# StackOverflow 问答 10232000-10232999

# layer - 自动更新 GeoServer 中的图层

> ID：10232001
> 
> 赞同：3
> 
> 时间：2012-04-19T15:55:31.220
> 
> 标签：layer, geoserver

我正在使用 Windows 上的 OpenGeo Suite 程序创建实时地图，当图层所基于的 PostGIS 表发生更改时，该地图会更新。但是，除非图层重新加载回 GeoServer，否则这是不可能的。有没有办法使这个过程自动化。谢谢

# less - Bootstrap LESS 需要 25 秒才能加载到 localhost

> ID：10232004
> 
> 赞同：1
> 
> 时间：2012-04-19T15:55:40.580
> 
> 标签：less

2天前我没有这个问题，现在我没有做任何事情就发生了。我有我的 site.less 文件，其中包含 bootstrap.less，加载所有 less 文件需要 25 秒，这在开发时非常烦人

less：成功解析[http://localhost/css/dev/public.less](http://localhost/css/dev/public.less)。

less：将[http://localhost/css/dev/public.less](http://localhost/css/dev/public.less)保存到缓存中。

less: [http://localhost/css/dev/public.less](http://localhost/css/dev/public.less)的 css在 26446 毫秒内生成

less: 26453ms 生成的css

我使用的是 Chrome 和 Firefox，两种浏览器都有同样的问题。我不确定它是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T23:31:42.287

因此，需要明确的是，看起来一切都是本地的。但不清楚的是你在用 LESS 和 CSS 做什么。CSS 需要一段时间才能编译成 LESS，但是你用什么来编译？少.js？

所以我假设您正在直接编辑 LESS 文件，您的目标是让 LESS 即时编译成 CSS，然后您将使用 CSS 进行生产……对吧？

如果我上面的假设是正确的，那么在开发过程中不要像在浏览器中将 LESS 编译成 CSS 那样使用 less.js。

使用这篇文章中的解决方案之一：[https ://webmasters.stackexchange.com/questions/25289/is-there-a-way-to-compile-less-files-to-css-so-that-every-browser -没有](https://webmasters.stackexchange.com/questions/25289/is-there-a-way-to-compile-less-files-to-css-so-that-every-browser-doesnt-have)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:25:17.833

我发现我已将数据库（Redis）从 localhost 更改为远程数据库。当我将其更改回 localhost 时，一切正常。我不确定数据库连接如何处理更少的文件。

# web-services - 如何为 cxf 总线注入自定义 JAXB 上下文？

> ID：10232007
> 
> 赞同：1
> 
> 时间：2012-04-19T15:55:51.437
> 
> 标签：web-services, jaxb, cxf

我有一个公开多个 Web 服务的服务器。
服务的对象分散在几个包中。
据我了解，如果您有继承并且服务可以返回许多可能的子类，您需要在基类上使用 @XmlSeeAlso，这会增加不必要的依赖关系和复杂性。
出于性能和动态配置的原因，我想为自己创建 JAXB 上下文，CXF 客户端/服务器服务将使用该上下文。
这样我可以避免不必要的依赖并自己管理上下文。我更喜欢在总线级别指定一次，但如果这不可能，我想在服务级别控制它就足够了。
提前致谢，
avner

# jquery - 带有 CORS 的 IE9 jQuery AJAX 返回“访问被拒绝”

> ID：10232017
> 
> 赞同：123
> 
> 时间：2012-04-19T15:56:27.730
> 
> 标签：jquery, internet-explorer-9, cross-domain, jsonp, cors

以下适用于**除 IE 之外**的所有浏览器（我正在 IE 9 中进行测试）。

```
jQuery.support.cors = true;
...
        $.ajax(
            url + "messages/postMessageReadByPersonEmail",
            {
                crossDomain: true,
                data: {
                    messageId       : messageId,
                    personEmail     : personEmail
                },
                success: function() {
                    alert('marked as read');
                },
                error: function(a,b,c) {
                    alert('failed');
                },
                type: 'post'
            }
        ); 
```

我有另一个使用 的函数`dataType: 'jsonp'`，但我不需要此 AJAX 调用返回的任何数据。我最后的手段是返回一些用 JSONP 包裹的乱码，只是为了让它工作。

任何想法为什么 IE 搞砸了一个不返回数据的 CORS 请求？

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2012-04-19T16:14:42.880

这是 jQuery 的一个已知[错误](http://bugs.jquery.com/ticket/8283)。jQuery 团队“没有计划在核心中支持这一点，并且更适合作为插件。” （见此[评论](http://bugs.jquery.com/ticket/8283#comment:1)）。IE 不*使用*XMLHttpRequest *，而是使用名为**XDomainRequest*的替代对象。

*在 jQuery中*有一个插件可以支持这个，[可以在这里找到](https://github.com/jaubourg/ajaxHooks/blob/master/src/xdr.js)： [https ://github.com/jaubourg/ajaxHooks/blob/master/src/xdr.js](https://github.com/jaubourg/ajaxHooks/blob/master/src/xdr.js)

**EDIT** 该函数`$.ajaxTransport`注册一个运输工厂。传输器在*内部*用于执行`$.ajax`请求。因此，我*认为*您应该可以`$.ajax`像往常一样打电话。`$.ajax`可以在[此处](http://api.jquery.com/extending-ajax/)找到有关运输机和扩展的信息。

此外，可以在[此处](https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest)找到此插件的更好版本。

另外两个注意事项：

1.  XDomainRequest 对象是[从 IE8 引入的，](http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx)在以下版本中将不起作用。
2.  从 IE10 开始，将[使用普通的 XMLHttpRequest 支持](http://blogs.msdn.com/b/ie/archive/2012/02/09/cors-for-xhr-in-ie10.aspx)CORS 。

**编辑 2：http 到 https 问题**

> 请求必须针对与托管页面相同的方案
> 
> 此限制意味着如果您的 AJAX 页面位于 [http://example.com](http://example.com)，那么您的目标 URL 也必须以 HTTP 开头。同样，如果您的 AJAX 页面位于[https://example.com](https://example.com)，那么您的目标 URL 也必须以 HTTPS 开头。

来源：http: [//blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx](http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx)

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2013-01-22T17:01:55.153

在@dennisg 接受的答案的基础上，我使用[MoonScript](https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest)的jQuery.XDomainRequest.js 成功地完成了这项工作。

以下代码在 Chrome、Firefox 和 IE10 中正常工作，但在 IE9 中失败。我只是简单地包含了脚本，它现在可以在 IE9 中自动运行。（可能是 8 个，但我还没有测试过。）

```
var displayTweets = function () {
    $.ajax({
        cache: false,
        type: 'GET',
        crossDomain: true,
        url: Site.config().apiRoot + '/Api/GetTwitterFeed',
        contentType: 'application/json; charset=utf-8',
        dataType: 'json',
        success: function (data) {
            for (var tweet in data) {
                displayTweet(data[tweet]);
            }
        }
    });
}; 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-06-17T18:01:42.233

可以在此处找到有关如何使用“jQuery-ajaxTransport-XDomainRequest”插件执行此操作的完整说明： [https ://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest#instructions](https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest#instructions)

该插件受到积极支持，可处理 HTML、JSON 和 XML。该文件也托管在 CDNJS 上，因此您可以直接将脚本拖放到您的页面中，无需额外设置： [http ://cdnjs.cloudflare.com/ajax/libs/jquery-ajaxtransport-xdomainrequest/1.0.1/jquery.xdomainrequest .min.js](http://cdnjs.cloudflare.com/ajax/libs/jquery-ajaxtransport-xdomainrequest/1.0.1/jquery.xdomainrequest.min.js)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-24T11:07:23.193

问题是IE9及以下不支持CORS。XDomainRequest 仅支持 GET/POST 和`text/plain`此处所述的内容类型：http: [//blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx](http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx)

因此，如果您想使用所有 HTTP 动词和/或 json 等，则必须使用另一种解决方案。我编写了一个代理，如果使用 IE9 或更低版本，它将优雅地降级为代理。如果您使用的是 ASP.NET，则根本不必更改您的代码。

解决方案分为两部分。第一个是一个 jquery 脚本，它与 jQuery ajax 处理挂钩。如果发出跨域请求并且浏览器是 IE，它将自动调用网络服务器：

```
$.ajaxPrefilter(function (options, originalOptions, jqXhr) {
    if (!window.CorsProxyUrl) {
        window.CorsProxyUrl = '/corsproxy/';
    }
    // only proxy those requests
    // that are marked as crossDomain requests.
    if (!options.crossDomain) {
        return;
    }

    if (getIeVersion() && getIeVersion() < 10) {
        var url = options.url;
        options.beforeSend = function (request) {
            request.setRequestHeader("X-CorsProxy-Url", url);
        };
        options.url = window.CorsProxyUrl;
        options.crossDomain = false;
    }
}); 
```

在您的 Web 服务器中，您必须接收请求，从 X-CorsProxy-Url http 标头中获取值并执行 HTTP 请求并最终返回结果。

我的博文：http: [//blog.gauffin.org/2014/04/how-to-use-cors-requests-in-internet-explorer-9-and-below/](http://blog.gauffin.org/2014/04/how-to-use-cors-requests-in-internet-explorer-9-and-below/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-20T17:57:17.480

我刚刚提出了所有**JSONP**请求，因为它是我们所有支持的浏览器（IE7+ 和常规浏览器）的唯一解决方案。请注意，您的答案在技术上适用于 IE9，因此您有正确的答案。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-15T22:54:13.320

基于 MoonScript 的解决方案，您可以尝试以下方法：

[https://github.com/intuit/xhr-xdr-adapter/blob/master/src/xhr-xdr-adapter.js](https://github.com/intuit/xhr-xdr-adapter/blob/master/src/xhr-xdr-adapter.js)

好处是，由于它是一个较低级别的解决方案，它将在 IE 8/9 上使用其他框架（而不仅仅是 jQuery）启用 CORS（尽可能）。我已经成功地将它与 AngularJS 以及 jQuery 1.x 和 2.x 一起使用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-30T20:11:59.000

在 Internet Explorer 8 和更新版本中使用 jQuery 获取跨域 JSON

非常有用的链接：

[http://graphicmaniacs.com/note/getting-a-cross-domain-json-with-jquery-in-internet-explorer-8-and-later/](http://graphicmaniacs.com/note/getting-a-cross-domain-json-with-jquery-in-internet-explorer-8-and-later/)

可以帮助解决从 X 域请求返回 json 的麻烦。

希望这可以帮助某人。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-07-08T08:04:25.367

要解决此问题，还要检查您的 ajax 文件中是否包含一些 .js 文件：I received Access denied error while including shadowbox.js in my ajax.php

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-11-07T13:37:15.837

我正在我的开发机器上测试 CORS Web 服务，并且仅在 IE 中收到“访问被拒绝”错误消息。Firefox 和 Chrome 运行良好。原来这是由于我在 ajax 调用中使用了 localhost 造成的！所以我的浏览器 URL 是这样的：

[http://my_computer.my_domain.local/CORS_Service/test.html](http://my_computer.my_domain.local/CORS_Service/test.html)

我在 test.html 中的 ajax 调用类似于：

```
//fails in IE 
$.ajax({
  url: "http://localhost/CORS_Service/api/Controller",
  ...
}); 
```

一旦我将 ajax 调用更改为使用我的计算机 IP 而不是 localhost，一切正常。

```
//Works in IE
$.ajax({
  url: "http://192.168.0.1/CORS_Service/api/Controller",
  ...
}); 
```

IE 开发工具窗口“网络”选项卡还显示了 CORS Preflight OPTIONS 请求，后跟 XMLHttpRequest GET，这正是我所期望的。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-02-13T04:42:48.100

更新至 2015 年初。xDomain 是一个广泛使用的库，可在 IE9 上以有限的额外编码支持 CORS。

[https://github.com/jpilora/xdomain](https://github.com/jpillora/xdomain)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-10-06T17:21:03.647

尝试在 IE8/9 中对 CORS 请求使用[jquery-transport-xdr jQuery 插件。](https://github.com/gfdev/javascript-jquery-transport-xdr)

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2015-06-28T21:03:49.230

注意——注意

不要在 ajax 中使用“ [http://www.domain.xxx](http://www.domain.xxx) ”或“ [http://localhost/](http://localhost/) ”或“IP >> 127.0.0.1”作为 URL。仅使用不带地址的路径（目录）和页面名称。

**虚假状态：**

```
var AJAXobj = createAjax();
AJAXobj.onreadystatechange = handlesAJAXcheck;
AJAXobj.open('POST', 'http://www.example.com/dir/getSecurityCode.php', true);
AJAXobj.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');
AJAXobj.send(pack); 
```

**真实状态：**

```
var AJAXobj = createAjax();
AJAXobj.onreadystatechange = handlesAJAXcheck;
AJAXobj.open('POST', 'dir/getSecurityCode.php', true);   // <<--- note
AJAXobj.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');
AJAXobj.send(pack); 
```

# c++ - 为提升测试编写我自己的测试运行器

> ID：10232024
> 
> 赞同：2
> 
> 时间：2012-04-19T15:56:43.267
> 
> 标签：c++, unit-testing, boost

我试图了解如何编写和使用我自己的带有 boost 的测试运行器（版本 1.42）。

使用我自己的测试运行器，如此[处所述，](http://www.boost.org/doc/libs/1_42_0/libs/test/doc/html/utf/user-guide/usage-variants/extern-test-runner.html)我想完成以下任务

*   使用我自己的 main()
*   我自己决定何时以及在什么情况下运行所有​​测试用例

到目前为止阅读我理解的文档，我可以通过提供我自己的测试运行器来完成这种行为。

```
#define BOOST_TEST_DYN_LINK

#include <boost/test/prg_exec_monitor.hpp>

#include <boost/test/unit_test.hpp>
#include <stdio.h>

int add(int i, int j)
{
    return i + j;
}

BOOST_AUTO_TEST_CASE(universeInOrder)
{
    BOOST_CHECK(add(2, 2) == 4);
}

int boost::prg_exec_monitor_main(int (*)(int, char**), int, char**){
      printf("Test me!");
    } 
```

我得到输出

> 考验我！

到目前为止，一切都很好。但：

*   prg_exec_monitor_main 和 test-runner 有什么区别？
*   如何获取所有已注册测试用例的列表？
*   如何开始这些测试？

# c# - 如何正确地将 URI 查询字符串解析为 C# 中的名称-值集合？

> ID：10232034
> 
> 赞同：2
> 
> 时间：2012-04-19T15:57:24.370
> 
> 标签：c#

我正在使用 .NET 4.5，并且正在尝试将 URI 查询字符串解析为`NameValueCollection`. 正确的方法似乎是使用`HttpUtility.ParseQueryString(string query)`which 获取从中获得的字符串`Uri.Query`并返回 a `NameValueCollection`。`Uri.Query`返回一个根据 RFC 2396 转义的字符串，并且`HttpUtility.ParseQueryString(string query)`需要一个 URL 编码的字符串。假设 RFC 2396 和 URL 编码是同一件事，这应该可以正常工作。

但是，文档[声称](http://msdn.microsoft.com/en-us/library/ms150046.aspx)`ParseQueryString`它“使用 UTF8 格式来解析查询字符串”。还有一个重载方法接受 a`System.Text.Encoding`然后使用它而不是 UTF8。

我的问题是：**使用 UTF8 作为编码意味着什么？**输入是 a `string`，根据定义（在 C# 中）是 UTF-16。那如何解释为 UTF-8？在这种情况下，使用 UTF8 和 UTF16 作为编码有什么区别？我担心的是，由于我接受任意用户输入，如果我搞砸了编码，可能会存在一些安全风险（即用户可能会通过一些脚本漏洞利用）。

关于这个主题有一个先前的问题（[How to parse a query string into a NameValueCollection in .NET](https://stackoverflow.com/q/68624/1325199)），但它没有专门解决编码问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T16:09:27.460

解析*编码*值时，它将这些值视为 UTF-8。以字符 ¢ 为例。UTF-8 编码是 C2 A2。因此，如果它在查询字符串中，它将被编码为 %C2%A2。

现在，什么时候`ParseQueryString`解码，它需要知道使用什么编码。默认值为 UTF-8，这意味着字符将被正确解码。但也许用户使用的是[Microsoft 的 Cyrillic](http://www.microsoft.com/typography/unicode/1251.htm)代码页 (Windows-1251)，其中 C2 和 A2 是两个不同的字符。在这种情况下，将其解释为 UTF-8 将是一个错误。

如果这是一个用户界面应用程序（即用户直接输入数据），那么您可能希望使用为当前 UI 文化定义的任何编码。如果您从 Web 页面获取此信息，那么您将希望使用页面使用的任何编码。如果您正在编写一个 Web 服务，那么您可以告诉用户他们的输入必须是 UTF-8 编码的。

# github - jenkins、Github 和 Puppet 是如何交互的

> ID：10232042
> 
> 赞同：5
> 
> 时间：2012-04-19T15:57:55.700
> 
> 标签：github, jenkins, puppet

首先我应该透露我只管理供应商关系并且缺乏深厚的技术知识。

我刚刚与我们的一个分包商进行了电话会议，他要求我签署 4 台不同服务器的 PO（一个用于 Jenkins，另一个用于 Github，第三个用于 Puppet，第四个用于测试盒）。

当我问他问题时，技术架构师似乎很防御。我知道质疑他的能力不是我的工作，但我确实有预算要管理，我担心他们过度设计了这个（或者至少他们提到的 3 种产品似乎有很多重叠）。有人能向我清楚地解释每个人所扮演的角色吗？

关于他们是否真的需要 4 台服务器以及所提到的某些技术是否可以在同一台服务器上共存，我也将不胜感激。（即 Jenkins、Github 和 Puppet 可以都存在于单个 Ubuntu 服务器上吗？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:16:28.540

4 个工具不重叠。它们相互作用和互补。

GIT 是源代码控制工具。您将所有编程历史存储在那里。这是开发黑盒。Jenkins 是持续集成工具。它将使用 GIT 获取最新版本的代码（或测试版本或预生产版本），以根据您定义的测试模式对其进行测试。Puppet 似乎是一个服务器管理工​​具箱。

老实说，这取决于您的项目。如果它是一个庞大的应用程序，需要繁重的构建周期，那么詹金斯在自己的服务器上会更好，这样人们仍然可以与其他服务正常工作。我相信 Jenkins/Puppet 可能在同一台服务器上。或者可能是 Pupper 和 GIT（git 资源非常少）。

测试箱听起来不错。但我认为 GIT 盒子也可以用作测试盒。

我认为您可以将该服务器需求减少 2。但同样，这取决于您项目的大小。如果这是一个大项目，公平竞争，让他们去做。即使服务器拆分有点奇怪，它也可能是必要的。但坦率地说，我认为你并不真的需要那个。

# java - 如何为长度未知的任务创建准确的进度条？

> ID：10232048
> 
> 赞同：3
> 
> 时间：2012-04-19T15:58:16.217
> 
> 标签：java, jprogressbar

如果我读取一个文件直到它到达一个空行并且想要创建一个有点准确的 JProgressBar 来确定读取何时完成，我该怎么做？

我问的原因是因为有些文件是在其他文件在和`200ms`之间读取的。`2500ms``10000ms`

我正在做一些简单的事情来读取文件

```
boolean completed

while(!completed) {
    //read file
    if(reader == null) {
        completed = false;
    } 
} 
```

那么有没有办法让进度条在这种情况下准确呢？（顺便说一下，文件的大小并不一定意味着在这种情况下读取时间会更少）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T16:14:49.163

**使用文件的大小——这是你最好的衡量标准。**

您展示的内容必须具有用户可以理解的含义。这是最重要的部分。如果进度条表示文件已处理的百分比，那就很容易理解、容易量化、容易计算和显示。这使您的进度条透明，这很重要。

想想用户如何看待它。你不需要编写某种预测智能，因为用户有大脑，他们可以得出自己的结论。因此，如果他们看到进度条在前半部分运行得很快，然后变慢，他们就知道它已经处理了文件的一半，但后半部分需要更长的时间。这就是他们需要知道的一切！他们可以得出自己的结论，即由于进度条变慢了，完成文件可能需要比前半部分指示的时间更长的时间。

事实上，用户可能已经对正在处理的文件有所了解。对于这个特定的文件，他们可能知道有用的（或长时间处理的）数据都在后半部分。所以当他们看到进度条变慢时，这是他们所预料的。这为用户提供了所需的透明度，让他们知道软件正在按应有的方式运行，并且他们可以就需要等待多长时间得出自己的结论。

当然，显示一个通用的估计“25% 的文件在 3 秒内处理完毕，因此我们估计额外的 9 秒才能完成”仍然很有用。这也是一个非常通用的透明等式，因此用户可以知道如何使用它并根据他们正在处理的文件的具体情况对其进行调整。

# loops - 处理循环，毫秒和随机

> ID：10232049
> 
> 赞同：0
> 
> 时间：2012-04-19T15:58:17.113
> 
> 标签：loops, random, progress-bar, processing

我想在每次运行程序时绘制一个从白色到黑色的处理进度条，并在 2 t0 8 秒内完成。确切的时间应该是随机的，但在 2 到 8 秒之内。

我已经运行了条形图，每次运行程序时，我都需要帮助以使条形图在 2 到 8 秒之间的随机时间完成。我完全迷失了，因为这是一个 uni 任务，我只是在寻找 psedocode 让我开始。到目前为止我有这个

```
int a;
  int k;
  int strokeC;
  boolean bar=true;

void setup (){
  size(500,300);
  background(255);
  colorMode(RGB,255);
  a = 130;
  k= a;
  strokeC = 255;
  rectMode(CENTER);
  noFill();
  rect(width/2,height/2,250,30);
}

void draw(){
 k++;

  for(int i=a, s=strokeC; i<=k && s>15; i++, s-- ) {
      stroke(s);
     line(i,140,i,160);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:01:18.440

你可以`Timer`为此设置一个

[有](http://enos.itcollege.ee/~jpoial/docs/tutorial/essential/threads/timer.html)一个关于定时器和调度的小教程

```
import java.util.Timer;
import java.util.TimerTask;

public class Reminder {
   Timer timer;

   public Reminder(int seconds) {
       timer = new Timer();
       timer.schedule(new RemindTask(), seconds*1000);        
}

    class RemindTask extends TimerTask {
        public void run() {
            System.out.println("Time's up!\n");
            timer.cancel(); //Terminate the timer thread
        }
    }

    public static void main(String args[]) {
       int random_num = Random.nextInt(7)+2; // Random num between 2-8; Random.nextInt(7) is from interval <0;7)
        new Reminder(random_num );
        System.out.println("Task scheduled.\n");
    }
} 
```

Timer 为 RemindTask 安排时间，当时间到时，调用 RemindTask 中的 run() 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-27T04:27:23.287

不是`k`每帧增加一，而是在 2 到 8 秒之间随机花费时间，并`k`在每帧设置适当的时间。

```
//your global variables...
int loadTime, startTime, endTime, barStart, barEnd;
void setup() {
  //your setup stuff...
  loadTime = random(2000, 8000);
  barStart = 130;
  barEnd = width - 130;
}
void draw() {
  if (frameCount == 1) {
    startTime = millis();
    endTime = startTime + loadTime;
  }
  k = map(millis, startTime, endTime, barStart, barEnd);
  //your for loop...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-17T01:33:37.217

一个可以使用`frameRate(your_number_here);`

它会减慢主处理“绘制”循环，如此处所述：[https ://processing.org/reference/frameRate_.html](https://processing.org/reference/frameRate_.html)

# excel - excel行中的sumif

> ID：10232050
> 
> 赞同：0
> 
> 时间：2012-04-19T15:58:18.247
> 
> 标签：excel

我想在 Excel 中创建一个计算总小时数的公式。这是工作表的外观。

第 1 行 2, 5, 7,1, 4, 5
第 2 行 X, , X,, , X 总小时数

第 3 行 X, , X,X, , X 总小时数等。

第一行表示小时数。

在总小时单元格中，我想添加小时数（第 1 行），其中第 n 行中的单元格不为空白？

这是我尝试过的，但它返回 0。
=SUMIF(E1:I1,NOT="",E2:I2)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T01:28:47.717

嘿，我发现了如何做到这一点。正确的公式是 =SUMIF(E2:I2,"<>",E1:I1)

# java - 使用自定义背景可绘制对象时损坏的 EditText 背景

> ID：10232051
> 
> 赞同：0
> 
> 时间：2012-04-19T15:58:19.707
> 
> 标签：java, android

我正在开发一个跨平台的 android/ios 框架的 android 部分，它可以让你用 JS 编写可以在两个平台上运行的应用程序。我这样说是因为这意味着我不能使用 9-patches 之类的东西来获得这种效果。完整代码在[https://github.com/mschulkind/cordova-true-native-android](https://github.com/mschulkind/cordova-true-native-android)

这是问题的两个屏幕截图：

- 编辑图像是因为我太新了，不能这么有用。当我不再是新手时，我将不得不添加它们。-

[这是从https://github.com/mschulkind/cordova-true-native-android/blob/master/src/org/apache/cordova/plugins/truenative/ViewPlugin.java#L146](https://github.com/mschulkind/cordova-true-native-android/blob/master/src/org/apache/cordova/plugins/truenative/ViewPlugin.java#L146)生成可绘制对象的代码

```
 // Borrowed from:
  // http://www.betaful.com/2012/01/programmatic-shapes-in-android/
  private class ViewBackground extends ShapeDrawable {
    private final Paint mFillPaint, mStrokePaint;
    private final int mBorderWidth;

    public ViewBackground(
        Shape s, int backgroundColor, int borderColor, int borderWidth) {
      super(s);

      mFillPaint = new Paint(this.getPaint());
      mFillPaint.setColor(backgroundColor);

      mStrokePaint = new Paint(mFillPaint);
      mStrokePaint.setStyle(Paint.Style.STROKE);
      mStrokePaint.setStrokeWidth(borderWidth);
      mStrokePaint.setColor(borderColor);

      mBorderWidth = borderWidth;
    }

    @Override
    protected void onDraw(Shape shape, Canvas canvas, Paint paint) {
      shape.resize(canvas.getClipBounds().right, canvas.getClipBounds().bottom);

      Matrix matrix = new Matrix();
      matrix.setRectToRect(
          new RectF(
            0, 0, 
            canvas.getClipBounds().right, canvas.getClipBounds().bottom),
          new RectF(
            mBorderWidth/2, mBorderWidth/2, 
            canvas.getClipBounds().right - mBorderWidth/2,
            canvas.getClipBounds().bottom - mBorderWidth/2),
          Matrix.ScaleToFit.FILL);
      canvas.concat(matrix);

      shape.draw(canvas, mFillPaint);
      if (mBorderWidth > 0) {
        shape.draw(canvas, mStrokePaint);
      }
    }
  } 
```

当直接将drawable设置为EditText的背景以及将其设置为EditText周围的父视图的背景时，都会发生这种情况。

任何人都知道这里发生了什么或我应该探索哪些途径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:12:07.440

看起来你想画一个圆角矩形。

要实现这种风格，使用 XML 可绘制对象会更简单。

您只需将 XML 文件放入 drawable/ 目录即可。在这里您可以描述所需的形状。一些关于 XML drawables 的文档在这里：http: [//idunnolol.com/android/drawables.html](http://idunnolol.com/android/drawables.html) 查看标签。

# ruby - 重用 Gem 的 rspec 助手

> ID：10232054
> 
> 赞同：0
> 
> 时间：2012-04-19T15:58:33.987
> 
> 标签：ruby, rspec, gem

我有一个 gem，[lock_jar](https://github.com/mguymon/lock_jar)，它[在运行时更改 Bundler 类](https://github.com/mguymon/lock_jar/tree/bundler_support/lib/lock_jar/bundler.rb)。这允许将 Java Jar 依赖项添加到 Gemfile。

我想做的是重用 Bundler 的[rspec helpers](https://github.com/carlhuda/bundler/tree/master/spec/support)。现在我从 Bundler 的 rspec 助手中复制了这些方法，这样我就可以测试 LockJar 和 Bundler 的集成。理想情况下，我只想将 Bundler 的规范助手包含在我的规范中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T22:11:33.263

必须有更好的方法来做到这一点，但一种是使用 Gem::Specification 获取 gem 的路径。

```
dir = Gem::Specification.find_by_name("lock_jar").gem_dir
files = Dir.glob(File.join(dir, "spec/support/*.rb"))
files.each { |f| require(f) } 
```

# iphone - 如何在 iOS 钥匙串中添加另一个密码？

> ID：10232059
> 
> 赞同：0
> 
> 时间：2012-04-19T15:58:44.727
> 
> 标签：iphone, objective-c, ios, passwords, keychain

我正在尝试使用此 Apple 示例代码中提供的 KeychainWrapper 类：http: [//developer.apple.com/library/ios/#samplecode/GenericKeychain](http://developer.apple.com/library/ios/#samplecode/GenericKeychain)

我的计划是为登录屏幕创建用户名和密码，并在我的应用程序中为密码屏幕创建密码/pin。所以我的问题是如何在钥匙串中添加另一个密码，因为我注意到在 GenericKeychain 示例中只列出了用户名和密码。最后，我想在我的应用程序的钥匙串中拥有一个用户名、密码和密码。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:05:06.853

我怀疑这是否可以做到....最多您可以创建两个用户名，并附加第二个用户名“_passcode”并将密码保存到其中...

例如：

```
username: ankit
password: 1234 
```

将此保存到钥匙串

然后再次使用保存另一对

```
username: ankit_passcode
passcode: 4321 
```

然后，您可以使用提供的用户名检索它...

希望这会有所帮助。

# android - 当客户端连接到 WifiP2p 组时收到通知

> ID：10232060
> 
> 赞同：0
> 
> 时间：2012-04-19T15:58:47.647
> 
> 标签：android, android-wifi, net.p2p, wifi-direct

[当客户端将自己连接到通过 createGroup (..)](http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html)创建的 WifiP2p 组时，是否有任何方法通过 BroadcastReceiver 获得通知？

听起来像

```
 - WIFI_P2P_STATE_CHANGED_ACTION
    - WIFI_P2P_PEERS_CHANGED_ACTION
    - WIFI_P2P_CONNECTION_CHANGED_ACTION and 
    - WIFI_P2P_THIS_DEVICE_CHANGED_ACTION 
```

不要处理这个。

谢谢你。工厂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T05:27:22.137

从我自己对 createGroup() 的测试中，我可以看出 WIFI_P2P_PEERS_CHANGED_ACTION 实际上是在客户端连接或断开连接时得到通知的。

# jquery - 当通过 jquery 显示部分表单时，Rails 3 忽略 PUT 方法导致路由错误

> ID：10232069
> 
> 赞同：0
> 
> 时间：2012-04-19T15:59:20.413
> 
> 标签：jquery, ruby-on-rails-3, routing, routes

我有一个模型`Patients`有很多`Healthplans`. 当单击“添加保险计划”链接时，我正在尝试通过使用 jquery 插入适当的表单来更新患者的健康计划。

单击时正确插入字段，但是提交表单时，出现以下错误：

```
No route matches [POST] "/patients/1472" 
```

当我检查 form_for 生成的代码时，它没有使用 PUT 方法创建隐藏字段来覆盖默认的 POST 方法。这是导致错误的原因，因为该 url 没有 POST 路由。有趣的是，如果我直接在 show.html.erb 中对表单进行编码，它会正确显示并且正确生成 PUT 方法的隐藏字段。只有当我使用 jquery 添加表单部分时它才会失败。

我花了几个小时来调整代码，研究 StackOverflow 和全能的谷歌，还没有发现完全相同的问题。

这是我的表格：

```
<%= form_for @patient do |f| %>
    <%= fields_for :healthplans_attributes do |builder| %>
        <td><%= builder.text_field :company %></td> 
        <td><%= builder.hidden_field :_destroy %><%= link_to_remove_fields "remove", f %></td>
    <% end %>
    <td><%= f.submit "Submit" %></td>
<% end %> 
```

我的控制器（省略了无关功能）：

```
class PatientsController < ApplicationController
  helper_method :sort_column, :sort_direction
  def index

def show
    @patient = Patient.find(params[:id])
    @insurance = Patient.return_insurances(@patient)
    @pa = @patient.preauthorizations
    @programs = @patient.programs
    @billingitems = Claim.return_billingitems(@patient, params[:page])
    @address = Patient.return_address(@patient)
    @phone = Patient.return_phone(@patient)
  end

  def new
    @patient = Patient.new
    1.times { @patient.healthplans.build }
    1.times { @patient.preauthorizations.build }
  1.times { @patient.programs.build }
    render :url => 'new.html' , :layout => "false"
end

def new_insurance
  @patient = Patient.find(params[:id])
  respond_to do |format|
    format.html
    format.js { @patient }
  end
end

  def create
#   raise params.inspect
    @patient = Patient.new(params[:patient])
    if @patient.save
      flash[:notice] = "Successfully created patient."
      redirect_to @patient
    else
      render :action => 'new'
    end
  end

  def edit
    @patient = Patient.find(params[:id])
  end

  def update
    @patient = Patient.find(params[:id])
    if @patient.update_attributes(params[:patient])
      flash[:notice] = "Successfully updated patient."
      redirect_to @patient
    else
      render :action => 'edit'
    end
  end 
```

在我看来 show.html.erb，我添加保险计划的链接：

```
 <tr>
        <td colspan="7">
            <table id="insurances">&nbsp;</table>
        </td>
    <tr>
        <td>
        <%= link_to "Add Insurance Plan", new_insurance_patient_path(:id => @patient.id), :remote => true %>
        </td>
    </tr> 
```

new_insurance.js.erb 文件：

```
J(function(){
  var html = '<%= escape_javascript(raw render(:partial => 'add_insurance')) %>';
  J("#insurances").append(html);
}); 
```

呈现部分 _add_insurance.html.erb：

```
<tr class="fields" >    
    <%= form_for @patient do |f| %>
    <%= fields_for :healthplans_attributes do |builder| %>
        <td><%= builder.text_field :company %></td> 
        <td><%= builder.hidden_field :_destroy %><%= link_to_remove_fields "remove", f %></td>
    <% end %>
    <td><%= f.submit "Submit" %></td>
    <% end %>
</tr> 
```

最后，我的 routes.rb 文件：

```
Billspace::Application.routes.draw do
  # The priority is based upon order of creation:
  # first created -> highest priority.
  match 'patients/set_active_flag/:id', :to => 'patients#set_active_flag'
  match 'patients/active_list', :to =>'patients#active_list'
  match 'patients/inactive_list', :to => 'patients#inactive_list'
  match 'payments/show_payment_items/:id', :to => 'billingitems#show_payment_items'
  match 'claims/claiminfo/:id', :to => 'claims#claiminfo'
  match 'claiminfo/:id', :to => 'claims#claiminfo'
  match 'patients/new', :to => 'patients#new'

  match 'claims/new/create_claims', :to => 'claims#create_claims'

  match 'payments', :to => 'billingitems#index' 

  resources :billingitems

  resources :claims
  resources :providers
  resources :patients

  resources :patients do
    member do
      get 'new_program'
      get 'new_insurance'
    end
  end

  match 'signup', :to => 'users#new', :as =>'signup'
  match 'logout', :to =>'sessions#destroy', :as => 'logout'
  match 'login', :to => 'sessions#new', :as => 'login'

  resources :sessions 
  resources :users 
end 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T23:00:06.657

我遇到了同样的问题（我使用的是 Rails 3.2.8）。你问这个问题已经 6 个月了，你可能早就解决或放弃了，但为了未来的谷歌人，我会发布这个答案。

这里的问题似乎是，就像我一样，您的表单标签在**<tr>**内，但不在任何**<td>**内。这适用于**<form>**标签，但不适用于 rails 用来封闭隐藏输入的**<div>**标签，因为可见（或潜在可见）的内容（例如**<div>**标签）通常不应该放在这样的位置。显然，Rails 在从 .erb 文件生成页面时这样做没有问题，但是 jQuery 会拒绝被要求做这种愚蠢且*明显*不正确的事情，并且会默默地丢弃有问题的**<div>**连同它的所有内容。对我有用的解决方案是将表单标签包含在它自己的小不可见**<td>**中，如下所示：

```
<td style="display:none">
    <%= form_for @patient do |f| %>
</td> 
```

这似乎使 jQuery 满意，您不是将**<div>**直接放在**<tr>**内部的疯子，并且表单已作为 PUT 正式提交。

# iphone - 不能让 AVAssetImageGenerator 给我电影的所有帧

> ID：10232072
> 
> 赞同：3
> 
> 时间：2012-04-19T15:59:34.530
> 
> 标签：iphone, ios, video, thumbnails

我不能`AVAssetImageGenerator`给我一部电影的所有帧。

使用此代码：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"video" ofType:@"mov"];
NSURL *url=[NSURL fileURLWithPath:path];
NSDictionary *options = [NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES] forKey:AVURLAssetPreferPreciseDurationAndTimingKey];
self.asset=[[AVURLAsset alloc] initWithURL:url options:options];

NSMutableArray *thumbTimes=[NSMutableArray arrayWithCapacity:asset.duration.value];
for(int t=0;t < asset.duration.value;t++) {
    CMTime thumbTime = CMTimeMake(t,asset.duration.timescale);
    NSValue *v=[NSValue valueWithCMTime:thumbTime];
    [thumbTimes addObject:v];
}
self.generator = [[AVAssetImageGenerator alloc] initWithAsset:asset];
self.generator.appliesPreferredTrackTransform=TRUE;
self.generator.requestedTimeToleranceAfter=kCMTimeZero;
self.generator.requestedTimeToleranceBefore=kCMTimeZero;

AVAssetImageGeneratorCompletionHandler handler = ^(CMTime requestedTime, CGImageRef im, CMTime actualTime, AVAssetImageGeneratorResult result, NSError *error){
    if (result != AVAssetImageGeneratorSucceeded) {
        NSLog(@"couldn't generate thumbnail, error:%@", error);
    }
    NSLog(@"actual time: %lld/%d (requested: %lld/%d)",actualTime.value,actualTime.timescale,requestedTime.value,requestedTime.timescale);
};
CGSize maxSize = CGSizeMake(320, 180);
generator.maximumSize = maxSize;
[generator generateCGImagesAsynchronouslyForTimes:thumbTimes completionHandler:handler]; 
```

我得到：

```
2012-04-19 18:55:06.801 OpenCVClient[77273:13b07] actual time: -9/600 (requested: 0/600)
2012-04-19 18:55:07.836 OpenCVClient[77273:13b07] actual time: -9/600 (requested: 1/600)
2012-04-19 18:55:08.314 OpenCVClient[77273:13b07] actual time: -9/600 (requested: 2/600)
2012-04-19 18:55:09.350 OpenCVClient[77273:13b07] actual time: -9/600 (requested: 3/600)
2012-04-19 18:55:10.186 OpenCVClient[77273:13b07] actual time: -9/600 (requested: 4/600)
2012-04-19 18:55:11.257 OpenCVClient[77273:13b07] actual time: -9/600 (requested: 5/600)
2012-04-19 18:55:11.697 OpenCVClient[77273:13b07] actual time: -9/600 (requested: 6/600)
2012-04-19 18:55:12.246 OpenCVClient[77273:13b07] actual time: -9/600 (requested: 7/600)
2012-04-19 18:55:13.255 OpenCVClient[77273:13b07] actual time: -9/600 (requested: 8/600)
2012-04-19 18:55:14.513 OpenCVClient[77273:13b07] actual time: -9/600 (requested: 9/600)
2012-04-19 18:55:15.944 OpenCVClient[77273:13b07] actual time: -9/600 (requested: 10/600)
2012-04-19 18:55:17.230 OpenCVClient[77273:13b07] actual time: 11/600 (requested: 11/600)
2012-04-19 18:55:17.995 OpenCVClient[77273:13b07] actual time: 11/600 (requested: 12/600)
2012-04-19 18:55:18.716 OpenCVClient[77273:13b07] actual time: 11/600 (requested: 13/600)
2012-04-19 18:55:19.399 OpenCVClient[77273:13b07] actual time: 11/600 (requested: 14/600) 
```

正如您在我尝试设置的代码中看到的那样，但没有`AVURLAssetPreferPreciseDurationAndTimingKey`任何效果。`requestedTimeToleranceBefore``requestedTimeToleranceAfter`

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:05:09.457

使用您的代码，您可以获得所有电影帧。请求时间和实际时间之间的差异是由电影帧率引起的。看来，你的电影大约有。25-29 帧/秒。因此，例如，时间 1/600s 和 8/600s 之间没有差异帧。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-24T10:19:10.980

```
 //loading image
    NSString *initialURL = [NSString stringWithFormat:@"%@",[arrayURL objectAtIndex:indexPath.row]];
    NSURL *url=[NSURL fileURLWithPath:initialURL];
    NSDictionary *options = [NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES] forKey:AVURLAssetPreferPreciseDurationAndTimingKey];
    self.asset=[[AVURLAsset alloc] initWithURL:url options:options];

    NSMutableArray *thumbTimes=[NSMutableArray arrayWithCapacity:asset.duration.value];
    CMTime thumbTime = CMTimeMake(1,1);
    NSValue *v=[NSValue valueWithCMTime:thumbTime];
    [thumbTimes addObject:v];

    self.imageGenerator = [[AVAssetImageGenerator alloc] initWithAsset:asset];
    self.imageGenerator.appliesPreferredTrackTransform=TRUE;
    self.imageGenerator.requestedTimeToleranceAfter=kCMTimeZero;
    self.imageGenerator.requestedTimeToleranceBefore=kCMTimeZero;

    AVAssetImageGeneratorCompletionHandler handler = ^(CMTime requestedTime, CGImageRef im, CMTime actualTime, AVAssetImageGeneratorResult result, NSError *error){
        if (result != AVAssetImageGeneratorSucceeded) {
            NSLog(@"couldn't generate thumbnail, error:%@", error);
        }
        NSLog(@"actual time: %lld/%d (requested: %lld/%d)",actualTime.value,actualTime.timescale,requestedTime.value,requestedTime.timescale);

        //your image view
        imageView.image = [UIImage imageWithCGImage:im];
    };
    CGSize maxSize = CGSizeMake(320, 180);
    imageGenerator.maximumSize = maxSize;
    [imageGenerator generateCGImagesAsynchronouslyForTimes:thumbTimes completionHandler:handler];
    //loaging complete 
```

# c - 哪种方式更好，更安全？

> ID：10232073
> 
> 赞同：1
> 
> 时间：2012-04-19T15:59:40.093
> 
> 标签：c, function, pointers

如果我想从函数返回一个指针，什么会更好更安全？

```
void pro_register_application(WNDCLASS* wc); /* use wc in function */ 
```

或者

```
WNDCLASS* pro_register_application(void)
{
   WNDCLASS* wc = malloc( sizeof(WNDCLASS) );
   ...
   return wc;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:00:59.600

只要您适当地记录正在处理的缓冲区所有权的详细信息，两者都是相同的，选择哪一个取决于选择的问题。

需要清楚地告知第二个示例的用户缓冲区的所有权已转移给他们，因此释放缓冲区的责任也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T16:09:42.270

If you choose to have your function create a data structure and return a pointer (your second way, up there), the caller has to know HOW you allocated the space for it... did you use malloc(), or GlobalAlloc(), or some other mechanism?... and then use the corresponding method to get rid of the thing. That's sufficient reason to make the client allocate the space and pass in a pointer, to my mind.

That said, I wouldn't kill anybody for using either method, if they'd taken appropriate care to deallocate the memory correctly.

This is one of the reasons that COM objects are useful-- the client doesn't have to know how an object was created, it just has to call Release() when it's done.

# matlab - 需要在MATLAB中生成k维空间中的点簇

> ID：10232078
> 
> 赞同：0
> 
> 时间：2012-04-19T16:00:10.953
> 
> 标签：matlab, cluster-analysis

生成的点应该是这样的 -

```
21   32   34   54   76   34
23   55   67   45   75   23.322
54   23   45   76   85.1 32 
```

上面的例子是k=6的时候。我怎样才能生成这样一个大约 1000 个点的集群并改变 k 的值和集群的半径。

是否有任何内置功能可以为我做到这一点？如果需要，我可以使用任何其他工具。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T04:40:37.340

看看[埃尔基](http://elki.dbs.ifi.lmu.de/)。它带有一个用于聚类数据集的非常灵活的数据生成器，并且在 wiki 上的某处有一个 640d 子空间聚类示例。

考虑使用`d`维度，因为当您谈论集群时，`k`通常指的是集群的数量（想想 k-means ...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T18:30:13.003

我认为您需要为此编写自己的代码。假设你的中心在原点，你必须按顺序选择*k*个数字，每一步都有约束，所有数字的平方和（包括）不能超过超球面平方的半径。也就是说，第*k*个数字的平方必须小于或等于半径平方减去所有先前选择的数字的平方和。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T18:33:10.890

如果你有统计工具箱，这很容易

[http://www.mathworks.co.uk/help/toolbox/stats/kmeans.html](http://www.mathworks.co.uk/help/toolbox/stats/kmeans.html)

否则，您可以很容易地使用 Lloyds 算法自己编写代码。

# oracle - Attunity SSIS 在 SSIS 数据流任务中不可用

> ID：10232084
> 
> 赞同：1
> 
> 时间：2012-04-19T16:00:25.010
> 
> 标签：oracle, ssis, connector

我将以下链接中的 Attunity SSIS 连接器安装到我的机器中。我的机器是一台 Windows 7 笔记本电脑，我使用 Visual Studio 2008 作为我的 IDE 来创建我的集成服务项目。现在根据 Attunity 提供的帮助，我应该能够从“选择工具箱项 -> SSIS 数据流任务”中选择 oracle 连接器，但是连接器在列表中不可用。我验证了程序文件文件夹，我可以看到 Attunity 文件夹以及语言文件夹。我也已经重新启动了我的机器。使用这些连接器我有什么遗漏吗？

下载： [http ://www.microsoft.com/download/en/details.aspx?id=29283](http://www.microsoft.com/download/en/details.aspx?id=29283)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:49:15.997

我相信您安装了错误版本的 Attunity SSIS 连接器。您提供的链接包含 SSIS 2008 的连接器，`SSIS 2012`而*不是*SSIS 2008 的连接器。

这是指向正确 Attunity 连接器的链接`SSIS 2008`

[**适用于 Oracle 和 Teradata 的 Microsoft® 连接器 v1.2**](http://www.microsoft.com/download/en/details.aspx?id=29284)

我安装了上述版本，我可以在对话框中看到*SSIS 数据流项上显示的连接器。*`Choose toolbox items`

![Attunity 连接器](../Images/7d1444361252dfd19124183cf162e2be.png)

# c# - 无法将 PageIndex 添加到 GridViewTemplate：ITemplate javascript 函数

> ID：10232088
> 
> 赞同：0
> 
> 时间：2012-04-19T16:00:44.713
> 
> 标签：c#, javascript, .net, gridview, itemplate

我在后面的代码中动态创建了 GridView。现在，在实际的 DataBinding 事件中，我有一个 JavaScript 函数可以保存已编辑的单元格及其值。这一切都可以在没有寻呼机的情况下正常工作，现在当我将寻呼机添加到 GW 时，我需要将页面索引添加到 JS 函数中，以便稍后我可以计算出实际更改的行/单元格。

```
// Databind an edit box in the grid
void edt_DataBinding(object sender, EventArgs e)
    {
        DropDownList txtData = (DropDownList)sender;
        GridViewRow container = (GridViewRow)txtData.NamingContainer;
        object dataValue = DataBinder.Eval(container.DataItem, _columnName);

        txtData.Attributes.Add("onchange", "sav(" + container.RowIndex.ToString() + "," + _columnName + ",this.value)");
        if (dataValue != DBNull.Value)
        {
            txtData.SelectedItem.Text = dataValue.ToString();
            txtData.BackColor = Color.LightGreen;
        }
    } 
```

我尝试将“grdMain.PageIndex”添加到 JS，但出现以下错误：“无法访问外部类型的非静态成员......

```
txtData.Attributes.Add("onchange", "sav(" + grdMain.PageIndex + container.RowIndex.ToString() + "," + _columnName + ",this.value)"); 
```

任何智能解决方法？

更多代码：

```
public class GridViewTemplate : ITemplate
{
    private ListItemType _templateType;
    private string _columnName;
    private string _col;
    private string _dataType;
    private bool _isLabel;
    private bool _isCategory;
    private string _types;
    private IQueryable _role;

    public GridViewTemplate(ListItemType type, string colname, string col, string DataType, bool isLabel, bool isCategory, string types, IQueryable role)
    {
        _templateType = type; 
        _columnName = colname;
        _dataType = DataType;
        _col = col;
        _isLabel = isLabel;
        _isCategory = isCategory;
        _types = types;
        _role = role;
    }

    void ITemplate.InstantiateIn(System.Web.UI.Control container)
    {
        Label lbl = new Label();
        switch (_types)
        {....
        }
    }
    void lbl_DataBinding(object sender, EventArgs e)
    {
        Label lbl = (Label)sender;
        GridViewRow container = (GridViewRow)lbl.NamingContainer;
        object dataValue = DataBinder.Eval(container.DataItem, _columnName);
        if (dataValue != DBNull.Value)
        {
            lbl.Text = dataValue.ToString();
        }            
    }

    // Databind an edit box in the grid
    void edt_DataBinding(object sender, EventArgs e)
    {....
    }
 } 
```

按钮点击：

```
 .....
    TemplateField tfUsers = new TemplateField();
    grdMain.Columns.Add(tfUsers);
    tfUsers.ItemTemplate = new GridViewTemplate(ListItemType.Item, "Name", "0", "String", true, false, "resource", lame);
    tfUsers.HeaderTemplate = new GridViewTemplate(ListItemType.Header, "Resource", "0", "String", true, false, "resource", lame);
    _dtEntry.Columns.Add("Name");
    ...... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T23:52:14.570

我不知道您的完整代码，所以我在这里猜测...

你试过ItemDataBound吗？

像这样的东西......

```
protected void grdMain_RowDataBound(object sender, GridViewRowEventArgs e)
{
   if (e.Row.RowType == DataControlRowType.DataRow)
   { 

    txtData.Attributes.Add("onchange", "sav(" + grdMain.PageIndex + container.RowIndex.ToString() + "," + _columnName + ",this.value)");

   }

} 
```

# asp.net - 在 Asp.net vb 中，如何通过一组面板与另一个包含面板进行迭代

> ID：10232090
> 
> 赞同：0
> 
> 时间：2012-04-19T16:00:46.717
> 
> 标签：asp.net, vb.net, controls, panel, loops

我希望能够遍历一组面板并设置它们的背景颜色，但我使用了代码：-

```
For Each ctrl In status.Controls
            If ctrl Is Panel Then
                ctrl.BackColor = Drawing.Color.Red
            End If
        Next 
```

我得到的错误是“面板是一种类型，不能用作表达式”

状态控制是另一个面板，其中包含较小的面板，可以在需要时更轻松地隐藏批次。

我怎么能做到这一点而不诉诸 if thens

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:01:33.083

稍微更新一下你的代码：

```
For Each ctrl In status.Controls 
    If TypeOf ctrl Is Panel Then 
        ctrl.BackColor = Drawing.Color.Red 
    End If 
Next 
```

# c# - 如何在泛型的 where 子句中指定泛型类？

> ID：10232091
> 
> 赞同：1
> 
> 时间：2012-04-19T16:00:48.370
> 
> 标签：c#, generics, c#-4.0

我有以下类和方法：

```
public class MyGenericClass<T>
    where T : class
{
}

public class MyClass
{
    public TGen MyMethod<TGen>(TGen myGenClass)
        where TGen : MyGenericClass<T>
        where T : class
    {
        return myGenClass;
    }
} 
```

但是，这会产生错误，因为它无法解析`T`MyMethod 中的符号。我宁愿不必有，`MyMethod<TGen, T>`因为这对我来说似乎有点多余。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:06:05.710

您必须先指定`T`才能在定义中使用它。编译器无法知道是什么`T`。

因此，您应该`T`在使用它之前指定（在方法级别如下，或者可能在类级别使用`MyClass`）：

```
public class MyClass
{
    public TGen MyMethod<TGen, T>(TGen myGenClass)
        where TGen : MyGenericClass<T>
        where T : class
    {
        return myGenClass;
    }
} 
```

您还可以在 where 子句中使用泛型类型的具体实现：

```
public class MyClass
{
    public TGen MyMethod<TGen>(TGen myGenClass)
        where TGen : MyGenericClass<DateTime>
    {
        return myGenClass;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T16:08:16.803

如果您希望能够为您的类型使用*任何* `MyGenericClass`实现`TGen`，那么您将需要创建一个`MyGenericClass`要使用的实现的基类（当然，这限制了您将为您的`TGen`实例获得的功能。

```
 public class MyGenericClassBase { }
 public class MyGenericClass<T> : MyGenericClassBase { }
 public class MyClass<TGen> 
      where TGen: MyGenericClassBase
 {
     // Stuff
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T16:03:58.520

听起来您只是忘记将`T`方法包含在泛型类型列表中：

```
public TGen MyMethod<TGen, T>(TGen myGenClass)
    where TGen : MyGenericClass<T>
    where T : class
{
    return myGenClass;
} 
```

# javascript - 使用 jquery 将 JSON POST 到控制器并使用内置验证

> ID：10232092
> 
> 赞同：0
> 
> 时间：2012-04-19T16:00:48.960
> 
> 标签：javascript, asp.net-mvc, json, validation, jquery-validate

我有一个收集一些数据的表格，最重要的是一个需要地理编码以获得纬度和经度的地址。

假设用户输入如下内容：

```
123 main st
SomEwheRE, NY 12345 
```

我的客户端 javasript 使用 Google 地理编码服务并尝试获取该地址的经纬度。作为回报，我还会返回更多附加信息，包括格式正确的地址：

```
123 Main St
Somewhere, NY 12345 
```

我想要做的是替换各自文本框中的值，以便用户可以验证数据是否正确，然后最终通过提交，`jQuery.post("My/Controller/", myJSONData, function(){});`但我遇到了一些奇怪的行为。

如果我输入地址但不包含邮政编码（数据库中需要它，但不需要对地址进行地理编码），我会收到验证错误。问题是我想推迟验证，直到我从地理编码服务获得信息并替换文本框中的值。

现在，如果我只输入部分地址（然后点击“提交”），会发生以下情况：

1.  缺少必填字段时出现验证错误，并且我的所有文本框都变为空白
2.  再次点击提交，这次文本框已正确填写地理编码信息，但所有字段都会产生验证错误。
3.  第三次点击提交，现在验证错误消失了，一切都如预期的那样。此时，我想认为表单有效并`POST`允许`Controller`.

代码：

```
 $(document).ready(function () {
    $("form").submit(function (e) {
        e.preventDefault();
        var geoCodedAddress = geoCodeAddress($("#Address1").val(), $("#City").val(), $("#State").val());
        console.log(geoCodedAddress);
        geoCodedAddress.Name = $("#Name").val();
        geoCodedAddress.Phone = $("#Phone").val();
        $("#Address1").val(geoCodedAddress.Address1);
        $("#City").val(geoCodedAddress.City);
        $("#State").val(geoCodedAddress.State);
        $("#ZipCode").val(geoCodedAddress.ZipCode);
    });
}); 
```

`geoCodeAddress()`返回填写了必填字段并且有效的 JSON 对象。我相信问题出在我的无能和我发布的代码块之间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T07:03:02.713

好吧，经过多次修补，这就是我想出的。基本上，当有人点击提交（或输入）时，我会停止提交表单（by `e.preventDefault()`）并检查它是否有效。如果表单数据有效，然后我处理用户输入的内容，用获取的数据填写表单字段（这没有任何功能，它只是在表单中闪烁新数据）。我不知道如何提交表单，所以我自己使用`$.post()`. 如果有更好的方法，请发表评论或回答，我会投票。这是我的完整代码：

```
 $(document).ready(function () {
    $("form").submit(function (e) {
        e.preventDefault();
        if ($("form").valid()) {
            geoCodeAddress($("#Address1").val(), $("#City").val(), $("#State").val(), function (geoCodedAddress) {
                geoCodedAddress.Name = $("#Name").val();
                $("#Address1").val(geoCodedAddress.Address1);
                $("#City").val(geoCodedAddress.City);
                $("#State").val(geoCodedAddress.State);
                $("#ZipCode").val(geoCodedAddress.ZipCode);
                $("#Longitude").val(geoCodedAddress.Longitude);
                $("#Latitude").val(geoCodedAddress.Latitude);
                $.post("/Controller/Action/", geoCodedAddress, function () { $(window).attr("location", "/Controller/"); });
            });
        }
    });
}); 
```

# c# - 获得基于语言的文化

> ID：10232096
> 
> 赞同：2
> 
> 时间：2012-04-19T16:01:09.817
> 
> 标签：c#, asp.net

我怎样才能获得基于语言的文化？例如，如果我将通过 language = CHS，它将根据国家语言支持 (NLS) API 参考检索 zh-CN：http: [//msdn.microsoft.com/en-us/goglobal/bb896001.aspx](http://msdn.microsoft.com/en-us/goglobal/bb896001.aspx)

我相信 .Net 框架应该为我们提供支持它的方法。

您的回复将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T16:04:53.293

这将为您提供匹配文化的列表：

```
CultureInfo.GetCultures(CultureTypes.AllCultures)
.Where(c => c.ThreeLetterWindowsLanguageName == "CHS") 
```

您可能想要使用`CultureTypes.SpecificCultures`而不是`CultureTypes.AllCultures`.

# c# - When i read the xml file it reads duplicates of the node

> ID：10232103
> 
> 赞同：0
> 
> 时间：2012-04-19T16:01:26.513
> 
> 标签：c#, xml, winforms, xmlreader

When i try read my xml file it seems to reads it twice and im unsure on how to fix such an error. I thought i can have some sort of loop but im still lost. Any help would be appreciated ty. - It writes the xml file correctly but the duplicate occurs when it reads it.

```
String workingDir = Directory.GetCurrentDirectory();
XmlTextReader textReader = new XmlTextReader(workingDir + @"\xmldoc.xml");

Console.WriteLine("BaseURI:" + textReader.BaseURI);
textReader.Read();

while (textReader.Read())
{
    if (textReader.Name == "test")
    {

        textReader.Read();
        XmlNodeType nType = textReader.NodeType;

        if (nType == XmlNodeType.Text)
        {
            //   label.Text = textReader.Value.ToString();
            Label l = new Label();
            System.Drawing.Point l1 = new System.Drawing.Point(15, 13 + a);
            l.Location = l1;
            l.Text = textReader.Value.ToString();

            a += 20;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T20:06:31.993

I have no idea what you are REALLY trying to do, and no visibility of you XML, but here is roughly how I would do it.

Notes:

1.  I'm using an XmlReader <- Better IMHO (base class, so there's less waffle)
2.  I'm using "reader.Value" without the ToString() as it's already a string type.
3.  I changed it to be a switch as I think they are cleaner, but there are A LOT of XmlNodeTypes out there and you don't want to have to if/else to much!!!

Code:

```
 XmlReader reader = XmlReader.Create("books.xml");
        while (reader.Read())
        {
            switch (reader.NodeType)
            {
                case XmlNodeType.Element: // The node is an element.
                    //DO NOTHING
                    break;
                case XmlNodeType.Text: //Display the text in each element.
                    //label.Text = reader.Value;
                    Label l = new Label();
                    System.Drawing.Point l1 = new System.Drawing.Point(15, 13 + a);
                    l.Location = l1;
                    l.Text = reader.Value;
                    a += 20;
                    break;
                case XmlNodeType.EndElement: //Display the end of the element.
                    //DO NOTHING
                    break;
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T21:29:20.083

What makes you think some entries are read twice? If it is the case, also check if this method is not called twice (shift + F12 in Visual Studio to find usage). Also, it seems that the piece of code you joined here is not complete (no declaration of variable 'a'). Do you have some code executed under the `if (textReader.Name == "test")` that would do the same operations?

# java - NullPointerException 试图在一个移动应用程序中添加 2 个可视组件

> ID：10232106
> 
> 赞同：3
> 
> 时间：2012-04-19T16:01:43.803
> 
> 标签：java, java-me, nullpointerexception, midp, lcdui

我只是想弄清楚我为什么会出错的逻辑。我第一次尝试在 1 中添加 2 个显示并使用 commandListener 切换视图。我从逻辑上认为我做的一切都是正确的，但我得到了一个空指针异常。我从不想知道答案，我喜欢努力工作，所以如果有人可以问我一个关于我正在努力实现的目标的问题，我可能会根据你的线索或提示来思考答案。将不胜感激。

```
import java.io.*;
import javax.microedition.midlet.*;
import javax.microedition.lcdui.*;

public class ClassApp extends MIDlet implements CommandListener {
    private Display mydisplay;

    private TextBox d;
    private Alert alert;
    private Command c,e,f,mNextCommand,l;
    private List mList;

    public ClassApp(){

        alert = new Alert("Listen", "Do you really want to start this app?", null, null);
        alert.setTimeout(Alert.FOREVER);

        c = new Command("Exit", Command.EXIT, 2);
        e = new Command("Back", Command.BACK, 0);
        f = new Command("Alert", Command.SCREEN, 3);
        mNextCommand = new Command("Next", Command.SCREEN, 4);
        l = new Command("List", Command.SCREEN, 3);

        d = new TextBox("ClassApp", "Commander", 20, TextField.ANY | TextField.PASSWORD); 
        d.addCommand(c);
        d.addCommand(e);
        d.addCommand(f);
        d.addCommand(l);
        d.setCommandListener(this);
        mList.addCommand(mNextCommand);
        mList.setCommandListener(this);

        String[] stringElements = { "Airplane", "Car", "Hotel" };
        Image[] imageElements = { loadImage("/airplane.png"),
        loadImage("/car.png"), loadImage("/hotel.png") };

        mList = new List("Reservation type", List.IMPLICIT,
        stringElements, imageElements);

    }
    public void startApp() 
    {

        mydisplay = Display.getDisplay(this);
        mydisplay.setCurrent(d);

    }
    public void commandAction(Command j, Displayable s) 
            { 
                if(j == f)
                    mydisplay.setCurrent(alert);
                if(j == l)
                    mydisplay.setCurrent(mList);
                if (j == mNextCommand || j == List.SELECT_COMMAND) {
                int index = mList.getSelectedIndex();
                Alert alert2 = new Alert("Your selection",
                "You chose " + mList.getString(index) + ".",
                null, AlertType.INFO);
                mydisplay = Display.getDisplay(this);
                mydisplay.setCurrent(alert2, mList);
        }

                else if(j == c)
                    notifyDestroyed();
            }

    public void pauseApp() { } 
    public void destroyApp(boolean unconditional) { }
    private Image loadImage(String name) {
        Image image = null;
        try {
        image = Image.createImage(name);
        }
        catch (IOException ioe) {
        System.out.println(ioe);
        }
        return image;
    }
} 
```

我得到的错误是：

```
Starting emulator in execution mode
Installing suite from: http://127.0.0.1:2913/ClassApp.jad
java.lang.NullPointerException:   0
    at ClassApp.<init>(ClassApp.java:33)
    at java.lang.Class.newInstance(), bci=0
    at com.sun.midp.main.CldcMIDletLoader.newInstance(), bci=46
    at com.sun.midp.midlet.MIDletStateHandler.createMIDlet(), bci=66
    at com.sun.midp.midlet.MIDletStateHandler.createAndRegisterMIDlet(), bci=17
    at com.sun.midp.midlet.MIDletStateHandler.startSuite(), bci=27
    at com.sun.midp.main.AbstractMIDletSuiteLoader.startSuite(), bci=52
    at com.sun.midp.main.CldcMIDletSuiteLoader.startSuite(), bci=8
    at com.sun.midp.main.AbstractMIDletSuiteLoader.runMIDletSuite(), bci=161
    at com.sun.midp.main.AppIsolateMIDletSuiteLoader.main(), bci=26 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:15:46.663

> 也许如果有人可以问我一个关于我想要达到的目标的问题，这可以让我使用你的线索或提示来思考答案......

好的，我们开始吧。

`ClassApp.java:33`错误消息的一部分告诉您 ClassApp.java 中的哪一行代码有问题。旁注神秘的部分`ClassApp.<init>`告诉您 ClassApp 构造函数中正在发生不好的事情。

如果从顶部数到第 33 行，您可能会发现：

```
 mList.addCommand(mNextCommand); 
```

现在，如果您寻找`mList`构造函数内部的处理方式（大约有 20 行要检查），您会发现一个有趣的事实，它将指导您找出那里的错误。

* * *

另一件值得记住的调查此类错误的事情是`NullPointerException`堆栈跟踪顶部显示的名称。它翻译成人类语言为

> `null`在不应该存在的地方存在价值。

^(这通常表明您可能已经注意到)某些变量没有正确分配。

* * *

PS。

> 我将继续寻找更好的效率（比如将代码移动到startapp中）

初始化`startApp`是一个可靠性问题，而不是效率问题。

有几件事建议在构造函数中初始化，`startApp`而不是在构造函数中初始化。例如，教程[MIDlet Life Cycle -> Execution States](http://www.oracle.com/technetwork/systems/lifecycle-138829.html#execution)中解释了这些内容：**“通常，您将使用 startApp() 来分配记录存储、网络连接、UI 组件等......”**

据我了解，没有明确的清单可以保证在构造函数中安全初始化的内容。正因为如此，我尝试尽可能多地进行初始化`startApp`——这样，我就不需要在规范中进行繁琐的检查来检查它是否安全。

# algorithm - 如何确保 rand() 不会再次选择一组点

> ID：10232112
> 
> 赞同：2
> 
> 时间：2012-04-19T16:02:15.963
> 
> 标签：algorithm, random, random-sample

我正在编写一个对一组 4 个数字执行随机扫描的代码。我想扫描 10000 个点（数百万后）。我刚刚了解了 rand()，所以这里是相关部分：

```
int numPoints = 10000;
double A,B,C,D;
 for (i=0; i<=numPoints1;i++) {

                srand ( time(NULL) );
                A = rand() % 500 + 100;
                B = rand() % 500 + 100;
                C = rand() % 100 - 100;        
                D = rand() % 5 + 2.5; 
```

然后将这四个变量输入一个函数（A，B，C，D）。代码在循环内执行一些检查和计算。

```
 } 
```

但是，我在输出文件中注意到很多时候，选择了同一组 A、B、C、D。

**问：**关于如何改善这种情况有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:12:53.290

您应该将调用`srand`移出循环。像这样：

```
srand(time(NULL));
for (i = 0; i <= numPoints1; i++)
{
   ...
} 
```

发生的事情是您在每次迭代时重新初始化随机数生成器。我记得，`time`以秒数返回时间。所以`time(NULL)`每秒只会更改一次，这意味着您将多次使用相同的种子播种随机数。

也就是说，这并不能保证一组数字不会重复。但是，它会使重复的可能性大大降低。

# c# - 在 C# 中操作 SQLite 数据或图像标记的字符串操作

> ID：10232114
> 
> 赞同：1
> 
> 时间：2012-04-19T16:02:17.440
> 
> 标签：c#, asp.net, string, sqlite

我正在做一个涉及 SQLite 数据库和一堆图像的项目。一切都将被放入外部硬盘驱动器中，并且一切都是只读的（没有 CRUD 的东西）。

该数据库包含一个照片表，其中一列（名为路径）是照片的路径（字符串）。我想使用 Telerik Rotator 来显示这些照片（它位于 RadWindow 内，如果对您有帮助的话，它会在 RadGrid 中选择一行后打开。）

我的问题是：需要更改路径。每个都以 H:\ 开头，我需要将其删除，并替换为 ~/ThisFolder/（它只指向 ../ThisFolder）。对于项目的所有其他部分，使用`ResolveUrl("~/ThisFolder/" + path.Remove(0, 3))`都有效，但我不知道如何在这里做。

**我要么需要在将 SQLite 数据放入 DataTable 之后操作 Path 列中的数据，要么稍后在 Path 字符串进入 asp:Image 标记之前对其进行操作。**

以下是我从 SQLite 数据库中获取数据并将其放入 DataTable 的方式：

```
 public static DataTable dtTable;
    public static string connectionString = ConfigurationManager.ConnectionStrings["Entity"].ConnectionString;
    public SQLiteConnection SQLiteConnection = new SQLiteConnection(connectionString);
    public SQLiteDataAdapter SQLiteDataAdapter = new SQLiteDataAdapter();
    public SQLiteCommand SQLiteCommand = new SQLiteCommand();    

private void GetDataSource() //called in Page_Load
    {
        dtTable = new DataTable();
        SQLiteConnection.Open();
        try
        {
            string selectQuery = "SELECT ParentTableID, PhotoID, Path FROM tblPhoto";
            SQLiteCommand myCommand = new SQLiteCommand(selectQuery, SQLiteConnection);
            using (SQLiteDataReader myReader = myCommand.ExecuteReader())
            {
                dtTable.Load(myReader);
            }
            RadRotator1.DataSource = dtTable;
        }
        finally
        {
            SQLiteConnection.Close();
        }
        RadRotator1.DataBind();
    } 
```

到目前为止，这是我的 asp 标签：

```
<asp:Image ID="Images" runat="server" AlternateText="Images" ImageUrl='<%#Bind("~/ThisFolder/{0}", "Path")%>' /> 
```

虽然 ImageURL 将是 ../ThisFolder/H:/yadayada 这里....

任何帮助将非常感激！如果我在某个地方不清楚，请随时提出问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:19:11.163

我会尝试 SQLLite 的[replace](http://www.sqlite.org/lang_corefunc.html#replace)。

`SELECT ParentTableID, PhotoID, replace(Path,'H:\','') as Path FROM tblPhoto`

# eclipse - 如何在 Eclipse 中跟踪返回路径？

> ID：10232118
> 
> 赞同：1
> 
> 时间：2012-04-19T16:02:27.803
> 
> 标签：eclipse

当我在 Eclipse 中调查代码时，我会执行以下操作：

```
method1() {

  method2(a,b,c); 
```

……

我选择method2并按F3：

```
method2(int a,String b, long c ){

 method3(); 
```

……

我选择method2并按F3：

```
method3() {
   ....
  method4(.... 
```

有时链可以接近 10 件！是否存在返回的捷径？所以我可以回到我之前的位置吗？

PS 我知道 Ctrl+Q 用于最后一次编辑，但这是不同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:05:02.377

您可以做的是`Call Hierarchy`在eclipse中使用，通过右键单击方法并选择`Open Call Hierarchy`，然后它将打开一个调用层次结构视图供您导航。

正如@Alexander Pavlov 建议的那样，您可以使用 Alt + Left / Right 进行导航

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T16:04:39.230

`Alt`+`Left`和`Alt`+`Right`遍历导航的历史（至少在 Linux 上）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T16:04:47.930

`Alt`+`Left`带您回到之前的位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T16:05:33.980

在调试透视图中，您可以看到整个堆栈跟踪

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T18:13:02.047

对于 OS X，option+command left 和 option+command right 对于 OS X。我很高兴看到 Eclipse 内置了这个。

仍然不像 Xcode 那样流畅......

# c# - 在表单之间发送数组列表

> ID：10232120
> 
> 赞同：0
> 
> 时间：2012-04-19T16:02:29.847
> 
> 标签：c#, winforms

目前我正在将一个数组列表从 form2 发送到 form 1，它工作正常。

```
Form1 form2 = new Form1(this, SampleArrayList); //pass form reference and an arraylist
form2.Show();
this.Hide(); 
```

在 form1 上，我将 SampleArrayList 与本地数组列表相关联。

```
Form2 formParent;
ArrayList SampleArrayList;
public MainForm(Form2 par, ArrayList _SampleArrayList)
{            
       InitializeComponent();
       this.formParent = par;
       this.SampleArrayList = _SampleArrayList;
} 
```

但是我想避免创建 Form1 的新实例

```
form2 = new Form1(this, SampleArrayList); 
```

我想将数组列表发送到当前正在运行的 Form1 实例。什么是最好的方法来做到这一点。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:04:56.570

在应用程序中充当通信平台的静态类可以解决问题，或者两种形式都可以归同一个对象所有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:02:45.077

在上面的评论中引用 OP：

> 首先创建Form1，点击添加按钮创建Form2。单击提交按钮会隐藏 Form2 并创建 Form1 的新实例以及我不想处理的旧实例。我想单击提交按钮并返回到 Form1 的运行实例。

那么这确实是一个更大的问题。这是我喜欢的一个很好的解决方案。

```
public partial class Form1 : Form
{
    private string dataFromThisForm; //can be whatever
    private void button1_Click(object sender, EventArgs e)
    {
        Form2 otherForm = new Form2();
        //pass some data to other form
        otherForm.SomeData = dataFromThisForm; 

        this.Hide();
        otherForm.Show();

        //when the other form is closed
        otherForm.FormClosed += (sender2, e2) =>
        {
            this.Show();

            string newData = otherForm.NewData;
        };

        //when the other form is hidden.
        otherForm.VisibleChanged += (sender2, e2) =>
        {
            this.Show();

            string newData = otherForm.NewData;
        };
    }
}
public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();
        //Use SomeData to populate controls.
    }

    public string SomeData { get; set; } //data passed in from other form

    public string NewData { get; private set; }  //data to expose to other form

    private void button1_Click(object sender, EventArgs e)
    {
        NewData = "SomeDataToPassToForm1";
        //this.Close();
        this.Hide();
    }
} 
```

几点注意事项：

*   您正在传递一个`ArrayList`, 而不是我在本示例中所做的字符串。An`ArrayList`是可变引用类型，而是 `string`不可变的。这意味着您可以只修改 `ArrayList`传递给 Form2 的值，这些更改将反映在 Form1 中的变量中，因为它们都指向同一个底层 `ArrayList`. 我把这段代码留在这里，因为它涵盖了一般情况。
*   您说单击提交按钮时隐藏了 Form2。通常在这个设计中你会关闭它，因为它不再需要了。如果你真的不打算再次使用它，我建议关闭它。如果您真的打算再次显示该表格，那么只需隐藏它就可以了。
*   如果您在提交时关闭 Form2，它将触发 FormClosing 事件，如果您只是隐藏它，它将触发 Visible 事件。您可能应该在我的代码中删除这两个事件处理程序之一，具体取决于您是实际关闭它还是隐藏它。如果你有时做一个，有时做另一个，那么可以随意离开两者。如果您将两者都留在其中，即使您只使用一个，您实际上也不会伤害任何东西（除了使人感到困惑）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T16:27:07.620

`Form1`如果不需要创建静态属性的实例，可以在类中编写静态属性。例如：

```
private static ArrayList _SampleArrayList;
public static ArrayList SampleArrayList
{
    get { return _SampleArrayList; }
    set { _SampleArrayList = value; }
} 
```

当您想`ArrayList`简单地更新写入时：

```
 Form1.SampleArrayList = SampleArrayList; 
```

**PS：**我建议您使用 a`List<>`而不是`ArrayList`.

如果您不知道类型而不是`ArrayList`使用`List<object>`else `List<T>`。

**编辑：**

如果**form1**和**form2**都是同一个类的一个实例，你只需要制作`ArrayList`静态的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T16:04:34.967

我将向 Form1 添加一个接受数组列表的方法。

就像是：

```
public void Setup(ArrayList SampleArrayList)
{
    // Do what you need here...
} 
```

然后，您可以从构造函数内部调用此方法（以保持构造函数相同），并在需要更改 Form 正在使用的列表时调用 Setup。

您上面的代码将是这样的：

```
// If you needed a new instance of Form1, it wouldn't change
Form1 form2 = new Form1(this, SampleArrayList); //pass form reference and an arraylist
form2.Show();
this.Hide();

// If you already had an instance in the form2 variable
form2.Setup(SampleArrayList); 
```

无论如何，如果您使用的是 .NET 2.0 或更高版本，我建议您使用通用 List 而不是 ArrayList 来存储列表数据。

# ssh - 在 sudoers 中分别设置环境变量 SSH_ASKPASS 或 askpass

> ID：10232121
> 
> 赞同：18
> 
> 时间：2012-04-19T16:02:33.133
> 
> 标签：ssh, environment-variables, debian, openssh

我正在尝试登录 ssh 服务器并执行以下操作：

```
ssh user@domain.com 'sudo echo "foobar"' 
```

不幸的是，我遇到了一个错误：

```
sudo: no tty present and no askpass program specified 
```

谷歌告诉我要么设置环境变量，要么在文件`SSH_ASKPASS`中设置。我的远程机器在 Debian 6 上运行，我已经安装了*ssh-askpass*和*ssh-askpass-gnome*包，我的文件如下所示：`askpass``sudoers`**`sudoers`**

 **```
Defaults        env_reset
Defaults        askpass=/usr/bin/ssh-askpass

# User privilege specification
root    ALL=(ALL) ALL
user    ALL=(ALL) ALL 
```

有人可以告诉我我做错了什么以及如何做得更好。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-19T16:18:45.987

有两种方法可以消除此错误消息。简单的方法是为远程 sudo 进程提供一个伪终端。您可以使用以下选项执行此操作`-t`：

```
ssh -t user@domain.com 'sudo echo "foobar"' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-27T05:04:35.710

与其分配 TTY 或设置可在命令行中看到的密码，不如执行以下操作。

创建一个回显您的密码的 shell 文件，例如：

```
#!/bin/bash

echo "mypassword" 
```

然后将其复制到您要使用的节点，`scp`如下所示：

```
scp SudoPass.sh somesystem:~/bin 
```

然后，当您`ssh`执行以下操作时：

```
ssh somesystem "export SUDO_ASKPASS=~/bin/SudoPass.sh;sudo -A command -parameter" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-05T20:22:00.890

另一种方法是运行`sudo -S`以“将提示写入标准错误并从标准输入读取密码而不是使用终端设备”（根据`man`）连同`cat`：

```
cat | ssh user@domain.com 'sudo -S echo "foobar"' 
```

只需在提示时输入密码即可。

一个优点是您可以将远程命令的输出重定向到其中没有“[sudo] password for ...”的文件：

```
cat | ssh user@domain.com 'sudo -S tar c --one-file-system /' > backup.tar 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-30T19:32:06.430

编辑 2013 年 12 月：这是一个简短的答案：花一两天时间熟悉 Python 库“ [Fabric](http://docs.fabfile.org/en/1.8/) ”。Fabric 解决了将远程任务分派到一台或多台服务器的大量问题。

您可能仍然希望在目标系统上设置一个可以运行无密码命令的用户名（您也可以使用 Fabric 来做到这一点！）。

请注意，Fabric 的某些方面并不完全符合 Python 风格。此外，Fabric 的设计首先考虑了系统管理员，即想要对服务器批量命令的人。如果您正在尝试做其他事情（例如自动化一些非常特定的服务器或场景），您将希望完全了解“使用设置”和/或 @roles 装饰器的工作原理。我没有回头...

（是的，我得到了在“远程”系统上运行的远程 SSH 命令。也就是说，服务器 A 要求服务器 B 连接到服务器 C，并且即使 A 不直接与服务器 A 对话，也可以在服务器 A 上看到该命令的返回服务器 C。使实验室设置更容易！）。

原始回复：这个问题有很多解决方案。课程用马；在不同的情况下，有些人比其他人更好。

提出的问题是，如何解决“无 TTY”错误。这似乎是重点，所以我认为关于 sudoers 的讨论只是试图解决 TTY 问题。

选项 1）Ashat 的回答效果很好……大多数时候。实际上，始终指定适用于更多目标系统的“-tt”。

请注意，如果您使用像 Paramiko 这样的 SSH 库，您仍然会遇到问题，它没有直观的“-t”方式。

选项 2）我的答案是指定一个 ASKPASS，即 STDIN。所以这个例子同时满足 sudo 密码要求和 TTY： $ shell> ssh user@domain.com 'echo "password"|sudo -S echo "foobar"'

选项 3) 是的，您可以对所有或部分用户禁用 sudo 密码检查，但这在生产服务器上并不酷。

选项 4）您可以远程“requiretty”（或为 sudoers 中的所有或部分用户设置“！requiretty”。同样，在生产盒上并不酷。

最好避免更改服务器。有一天，该服务器将被替换，设置恢复为默认设置，您的脚本将停止工作。

请注意，一旦您了解了所有选项，它就会打开更多自动化的大门（例如，您的笔记本电脑上的脚本可以连接到服务器主机名列表，并在这些服务器上执行 sudo 任务，而无需复制说脚本到这些服务器上）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-03T12:18:52.713

> `Defaults askpass=/usr/bin/ssh-askpass`

ssh-askpass 需要 X 服务器，因此您可以通过以下方式转发 X 连接，而不是提供终端（通过`-t`nosid 建议）`-X`：

```
ssh -X user@domain.com 'sudo echo "foobar"' 
```

但是，根据当前文档，`askpass`设置为`sudo.conf`as `Path`，而不是`sudoers`.

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-04-05T10:11:08.573

如何在 sudoers 文件中添加它：

```
user    ALL=(ALL) NOPASSWD: ALL 
```**

# visual-studio-2010 - 是否可以在 Visual Studio 或特别是 TFS 中限制某些文件类型 [如 css] 的编辑？

> ID：10232125
> 
> 赞同：0
> 
> 时间：2012-04-19T16:03:19.297
> 
> 标签：visual-studio-2010, sass, less, ironruby

我的问题是在大环境中最好阻止人们编辑生成的 CSS 文件，而不是在我们的例子中 .scss 文件。

强烈推荐任何使用 Visual Studio 进行前端开发的人检查 Web Workbench 插件，它允许您利用 SASS/LESS 预编译 CSS 和 CoffeeScript 预编译 javascript。您将需要安装 IronRuby，但两者都非常容易安装。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:21:22.623

您可以通过 Team Foundation Server Power Tools 附带的签入策略来完成此操作。有一个[禁止模式策略](https://rerrify.wordpress.com/2012/03/22/ignoring-files-from-team-foundation-server-check-ins-4/)将阻止签入与特定模式匹配的文件。

如果需要，您可以将其与[自定义路径策略](http://Custom%20Path%20Policy)相结合，将这些被阻止的模式范围限定到特定位置（这样您就可以将编译结果签入某些文件夹，而不仅仅是任何地方）

如果需要，您可以否决任一规则，但需要为此提供原因注释。[可以监控这些覆盖](http://colinsalmcorner.blogspot.com/2011/03/monitoring-check-in-policy-overrides.html)。

[有关入住政策的更多信息](https://msmvps.com/blogs/vstsblog/archive/2011/06/14/available-check-in-policies-for-team-foundation-server-2010.aspx)。

# web-services - 服务超时问题

> ID：10232127
> 
> 赞同：1
> 
> 时间：2012-04-19T16:03:20.453
> 
> 标签：web-services, cxf

我已经使用 WSDLToJava 生成了客户端存根。之后，我创建了这里提到的客户端 [http://cxf.apache.org/docs/developing-a-consumer](http://cxf.apache.org/docs/developing-a-consumer)。

```
this.testService = new TestService(wsdlURL, SERVICE_NAME); //line #1
    this.port = testService.getTestPort();          //line #2
    Client client = ClientProxy.getClient(port);        //line #3
    client.getInInterceptors().add(new LoggingInInterceptor());
    client.getOutInterceptors().add(new LoggingOutInterceptor());
    HTTPConduit conduit = (HTTPConduit)client.getConduit();
    // setting timeouts for connection
    String timeOutSecond = CoreProperty.getProp(CORE_SERVICE_TIME_OUT_MILLISECONDS);
    int timeout =0;
    try{
        if(Utils.isNotNullOrBlank(timeOutSecond))
            timeout = Integer.parseInt(timeOutSecond.trim());
        else
            timeout = Constants.DEFAULT_SERVICE_TIME_OUT_MILLISECONDS;
    }catch (NumberFormatException e) {
        timeout = Constants.DEFAULT_SERVICE_TIME_OUT_MILLISECONDS;
    }
    conduit.getClient().setReceiveTimeout(timeout); 
```

问题是如果服务器关闭，第 1 行将花费近 5 分钟来引发错误 - 在`wsdlURL`.

我想设置 30 秒的时间来建立客户端连接。

如果服务启动，一切正常，并且我设置的接收超时工作正常。如何设置建立连接的超时时间。 **程序在第 1 行等待，如果服务器关闭，它会在那里等待超过 4 分钟，我想避免这种情况。**

谢谢你的时间。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:21:36.303

我认为唯一的选择是创建一个 spring 配置文件，该文件配置一个名称为“http://servername.com/.*”的 http:conduit，设置更短的超时时间。从该配置文件创建总线。看：

[http://cxf.apache.org/docs/client-http-transport-including-ssl-support.html](http://cxf.apache.org/docs/client-http-transport-including-ssl-support.html)

# c - 当已经使用另一个分隔符时，在 C 中分隔空格（一次）的简单方法

> ID：10232130
> 
> 赞同：1
> 
> 时间：2012-04-19T16:03:32.330
> 
> 标签：c, whitespace, strtok, scanf

我有以下代码

```
while (*ptr != ',') {
    int items_read = sscanf(ptr, "%91[^,]%n", field, &n);
    printf("field = \"%s\"\n", field);
    field[0]='\0';
    if (items_read == 1)
        ptr += n; /* advance the pointer by the number of characters read */
    if ( *ptr != ',' ) {
        break; /* didn't find an expected delimiter, done? */
    }
    ++ptr; /* skip the delimiter */
} 
```

它读取我的字符串并为在逗号之间找到的每个字符串创建一个新数组，但是我在字符串中间有空格。我有很多要读入的字符串，其中一些在多个区域（在那个中间位置之后）有空格，我不希望占到空格，只是第一个实例。

我知道我可以穿上`|| ' '`、和/或第二个`while line`，但我还没有做我需要做的事情。`int line``if line`

我听说使用`strtok`不好，或者至少有更好的方法可以做到这一点。我不知道如何添加额外的“标志”（如我的代码中的逗号）以绕过代码。

例如：
3,875,837
文件 1.ext 3,437,281 文件 2.txt

我已经开始做我想做的事了。

```
field1 = 3  
field2 = 875  
field3 = 837 
```

但是，我希望这 2 个输入上的其余字符串进入单独的 char 数组并打印如下：

```
field4 = file1  
field5 = ext 
```

和

```
field4 = document  
field5 = two  
field6 = txt 
```

或者，我现在在想，无论如何我可以提取最后一次迭代，`char array field`以便通过完全相同的代码使用另一个循环，除了用空格替换`,`s吗？`' '`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:21:44.453

我将如何做到这一点将取决于数据。我可能会读入一个字符串，可能在第一个空格用 strchr 将其解析为两个，然后用逗号进行第一个字符串拆分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:32:47.433

很大程度上取决于您要将数据用于什么目的。如何在代码等的其他地方使用它。

猜猜我经常在这样的解析中使用简单的迭代。如果您想使用`sscanf`它可能会有所帮助；举个例子：

```
#include <stdio.h>

int prnt_fields(char **ptr)
{
    char field[128];
    int n;
    int i = 0;

    printf("Item {\n");
    while (**ptr) {
        if(sscanf(*ptr, "%127[^\t\n., ]%n", field, &n) != 1)
            break;
        printf("  %d => '%s'\n", i++, field);
        (*ptr) += n;
        /* To handle multiple spaces tabs etc.: */
        if(sscanf(*ptr, "%127[ \t.,]%n", field, &n))
            (*ptr) += n;
        /* Or:
        n = 0;
        sscanf(*ptr, "%*[ \t.,]%n", &n);
        (*ptr) += n;
        */

        if (**ptr == '\n') {
            printf("} OK!\n");
            (*ptr)++;
            return **ptr != '\0';
        }
    }
    /* Should never end here unless input is invalid;
     * aka not separated with , \n or over long fields (>127) */
    printf("} something failed!\n");
    return 0;
}

int main(void)
{
    char *tst = "3,875,837 file1.ext\n"
        "6,875,847 file2.ext\n"
        "3,437,281 document two.txt\n"
        "9,991,123\tdrei.txt\n"
        "4,494,123        vier    fünf .    txt\n"
        ;
    char field[128];
    int n;
    char *ptr = tst;
    int i = 0;

    while (*ptr) {
        if(sscanf(ptr, "%127[^, \n.]%n", field, &n) != 1)
            break;
        printf("field%d = '%s'\n", i++, field);
        ptr += n+1;

        /* If one want to validate separator

        ptr += n;
        if (*ptr != ',' && *ptr != ' ' && *ptr != '\n')
            break;
        ++ptr;

        */
    }

    ptr = tst;

    printf("\n---------------\n");
    while (prnt_fields(&ptr) > 0)
        ;

    return 0;
} 
```

应该给出如下内容：

```
field0 = '3'
field1 = '875'
field2 = '837'
...
field18 = '123  drei' <= breaks here
field19 = 'txt'
field20 = '4'
field21 = '494'
field22 = '123'
Item {
  0 => '3'
  1 => '875'
  2 => '837'
  3 => 'file1'
  4 => 'ext'
} OK!
Item {
  0 => '6'
  1 => '875'
  2 => '847'
  3 => 'file2'
  4 => 'ext'
} OK!
Item {
  0 => '3'
  1 => '437'
  2 => '281'
  3 => 'document'
  4 => 'two'
  5 => 'txt'
} OK!
Item {
  0 => '9'
  1 => '991'
  2 => '123'
  3 => 'drei'
  4 => 'txt'
} OK!
Item {
  0 => '4'
  1 => '494'
  2 => '123'
  3 => 'vier'
  4 => 'fünf'
  5 => 'txt'
} OK! 
```

* * *

编辑：

好的。这可以做得更干净、更漂亮，但你可能会有一个想法：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <limits.h>

struct file_data {
    struct date {
        int y;
        int m;
        int d;
    } date;
    struct time {
        int h;
        int m;
    } time;
    int size_prt[8];    /* max 2^63 : 9223372036854775808 bytes */
    double size;
    char name[512];
    char ext[16];
    char ext_tr[16];
    char name_prt[32][128]; /* should be malloc or ptrs or done in func or.. */
};

/* Default */
static const struct file_data file_def = {
    {0,0,0},{0,0},{-1},0,{'\0'},{'\0'},{'\0'},{{'\0'}}
};

void prnt_filedata(FILE *fh, struct file_data fd)
{
    int i = 0;
    fprintf(fh,
        "File { \n"
        "  Date: %4d-%02d-%02d\n"
        "  Time: %02d:%02d\n"
        "  Size: %.f\n"
        "  Size: %.2f K\n"
        "  Size: %.2f M\n"
        "  Size: %.2f G\n"
        "  Name: '%s'\n"
        "  Ext : '%s'\n"
        "  ExtT: '%s'\n"
        "  Szpt: ",
        fd.date.y, fd.date.m, fd.date.d,
        fd.time.h, fd.time.m,
        fd.size,
        (fd.size / (1 << 10)),
        (fd.size / (1 << 20)),
        (fd.size / (1 << 30)),
        fd.name,
        fd.ext,
        fd.ext_tr
        );
    while (fd.size_prt[i] != -1)
        fprintf(fh, "%d ", fd.size_prt[i++]);
    fprintf(fh, "\n  Fprt: ");
    i = 0;
    while (*fd.name_prt[i])
        fprintf(fh, "'%s' ", fd.name_prt[i++]);
    fprintf(fh, "\n}\n");
}

int extr_file_data(char **ptr, struct file_data *fd)
{
    int i;
    int n;
    char size[26];
    char name[512];
    char *p;
    *fd = file_def;

    while (**ptr) {
        if (sscanf(*ptr,
            "%4d-%2d-%2d %d:%d %25[0123456789,] %511[^\n]%n",
            &fd->date.y, &fd->date.m, &fd->date.d,
            &fd->time.h, &fd->time.m,
            size, name, &n) != 7) {
            fprintf(stderr,
                " * ERR; Unable to extract from %s\n",
                *ptr);
            return 0;
        }
        (*ptr) += n;
        p = size;
        i = 0;
        /* Size parts + total */
        while (*p && i < 7) {
            fd->size_prt[i] = (int)strtol(p, &p, 0);
            fd->size *= 1000;
            fd->size += fd->size_prt[i++];
            if (*p) ++p;
        }
        fd->size_prt[i] = -1;   /* flag next to last  */
        /* get .ext */
        if ((p = strrchr(name, '.')) != NULL) {
            strncpy(fd->name, name, p - name);
            strncpy(fd->ext, p + 1, 16);
            /* trimmed ext */
            if (sscanf(fd->ext, "%15s", fd->ext_tr) != 1)
                *fd->ext_tr = '\0';
        } else {
            strncpy(fd->name, name, 511);
        }
        /* get trimmed parts of name */
        p = fd->name;
        i = 0;
        while (sscanf(p, "%127s%n", fd->name_prt[i++], &n) == 1 && i < 32)
            p+=n;
            ;
        *fd->name_prt[n] = '\0';

        if (**ptr == '\n')
            (*ptr)++;
        return **ptr != '\0';
    }
    return 0;
}

int main(void)
{
    char *tst =
        "2012-04-18 13:28                  32 ein.ext\n"
        "2012-04-18 13:28       2,446,875,847 zwei.xt  \n"
        "2012-04-18 13:28                   0 drei  .xt\n"
        "2012-04-18 13:28 7,694,587,183,883,665 vier fünf.txt\n"
        "2012-04-18 13:28 9,991,123\t\tsechs\n"
        "2012-04-18 13:28 4,494,123        sieben     acht  .   txt\n"
        ;
    char *ptr = tst;
    struct file_data fd;

    while (extr_file_data(&ptr, &fd) > 0)
        prnt_filedata(stdout, fd);
    prnt_filedata(stdout, fd);

    return 0;
} 
```

应该给：

```
...
File { 
  Date: 2012-04-18
  Time: 13:28
  Size: 2446875847
  Size: 2389527.19 K
  Size: 2333.52 M
  Size: 2.28 G
  Name: 'zwei'
  Ext : 'xt  '
  ExtT: 'xt'
  Szpt: 2 446 875 847 
  Fprt: 'zwei' 
}
...
File { 
  Date: 2012-04-18
  Time: 13:28
  Size: 4494123
  Size: 4388.79 K
  Size: 4.29 M
  Size: 0.00 G
  Name: 'sieben     acht  '
  Ext : '   txt'
  ExtT: 'txt'
  Szpt: 4 494 123 
  Fprt: 'sieben' 'acht' 
}
... 
```

* * *

编辑（再次）；抱歉，只有一个奇怪的转变，我在测试后忘记改变了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T17:50:46.250

你可以看看`strcspn()`方法。

作为一个很好的副作用，它可以实现多字节字符安全。

# java - 在 Java 中用零填充列表

> ID：10232131
> 
> 赞同：1
> 
> 时间：2012-04-19T16:03:34.803
> 
> 标签：java, list, fill, zero

我正在使用 Java，我有一个 TimestampAndValue 类型的对象列表：

```
public class TimestampAndValue{
    private double value;
    private long timestamp;

    public long getTimestamp() {
        return timestamp;
    }

    public void setTimestamp(long timestamp) {
        this.timestamp = timestamp;
    }

    public double getValue() {
        return value;
    }

    public void setValue(double value) {
        this.value = value;
    }
} 
```

我的清单与此类似：

*   元素 1：时间戳 = 0，值 = 5
*   元素 2：时间戳 = 4，值 = 6
*   元素 3：时间戳 = 6，值 = 10
*   元素 4：时间戳 = 12，值 = 1

我想在输出中有这个列表：

*   元素 1：时间戳 = 0，值 = 5
*   元素 2：时间戳 = 1，值 = 0
*   元素 3：时间戳 = 3，值 = 0
*   元素 4：时间戳 = 4，值 = 6
*   元素 5：时间戳 = 5，值 = 0
*   元素 6：时间戳 = 6，值 = 10
*   元素 7：时间戳 = 7，值 = 0
*   元素 8：时间戳 = 11，值 = 0
*   元素 9：时间戳 = 12，值 = 1

我将尝试简短地解释我需要什么。当两个时间戳不是连续的整数时，我需要在它们之间放置最小数量的零。例如，在上面列表中的时间戳 4 和 6 之间的情况下，我只需要放置一个零，但在两个时间戳相差两个或更多的情况下，我需要在第一个时间戳之后放置一个零，然后放置一个零紧接在第二个时间戳之前。您可以在时间戳 6 和 10 之间看到这一点。我还需要放置的零具有正确的时间戳集。

现在我不知道如何解决它。谢谢您的支持！

这是使用您的建议对我有用的解决方案：

```
public static List<TimestampAndValue> insertMinimumNumberOfZerosBetweenValues(List<TimestampAndValue> list){
    if(list == null || list.isEmpty() || list.size() == 1)
        return list;

    int i;
    int j;
    long tempTimestamp1;
    long tempTimestamp2;
    long timestampDifference;

    List<TimestampAndValue> outList = new ArrayList<TimestampAndValue>();

    outList.add(list.get(0));
    for(i=0; i<list.size()-1; i++){
        j=i+1;

        tempTimestamp1 = list.get(i).getTimestamp();
        tempTimestamp2 = list.get(j).getTimestamp();
        timestampDifference = tempTimestamp2 - tempTimestamp1;

        if(timestampDifference == 2){
            TimestampAndValue tav = new TimestampAndValue();
            tav.setTimestamp(tempTimestamp1 + 1);
            tav.setValue(0);

            outList.add(tav);
        }
        else if(timestampDifference > 2){
            TimestampAndValue tav = new TimestampAndValue();
            tav.setTimestamp(tempTimestamp1 + 1);
            tav.setValue(0);

            outList.add(tav);

            TimestampAndValue tav2 = new TimestampAndValue();
            tav2.setTimestamp(tempTimestamp2 - 1);
            tav2.setValue(0);

            outList.add(tav2);
        }                

        outList.add(list.get(j));
    }

    return outList;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:14:10.740

这是作业吗？如果是这样，请标记为这样。

也许我误解了这个问题，但我认为一个简单的循环应该可以工作。按时间戳对列表进行排序，然后遍历所有值。一旦找到不连续的时间戳，就插入一个 0 条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:15:04.877

您必须处理输入列表中的时间戳对，累积输出列表：

```
outputList = new list of timestamps;

for (int i = 0; i < numerOfTimestamps-1; i++) {
    timestamp1 = inputList.get(i);
    timestamp2 = inputList.get(i+1); 
```

对于每一对，比较它们之间的距离：

*   如果它们是连续的，则添加`timestamp1`到输出列表
*   如果差值小于 2，则在输出列表中添加`timestamp1`一个新的时间戳`0`
*   如果差值等于或大于二，则添加`timestamp1`两个新的时间戳`0`到输出列表

然后

```
} // close loop 
```

并将最后一个时间戳添加到输出列表中。（它永远不会被循环添加。）

请注意，您需要单独处理空输入列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T16:06:43.730

也许我没有正确解决您的问题，但是您是否尝试过实现一种机制，如果时间戳不存在，则返回默认值 0？它将更加高效和简单

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T16:16:55.077

首先一个问题*为什么*你需要介于两者之间的那些整数？

下一个建议（未测试）：

```
List<TimestampAndValue> newList = new ArrayList<TimestampAndValue>();
TimestampAndValue lastAdded = null;    

for( int i = 0; i < oldList.length; i++ ) {   
  if( i > 0 && !isContiguous(lastAdded, oldList[i])) {
    newList.add(new TimestampAndValue(oldList[i].timestamp - 1, 0.0 ) );
  }

  newList.add( oldList[i] );
  lastAdded = oldList[i];

  if( i < (oldList.length - 1) && !isContiguous(oldList[i], oldList[i+1]) {
    lastAdded = new TimestampAndValue(oldList[i].timestamp + 1, 0.0 );
    newList.add( lastAdded );
  }
} 
```

基本上，您遍历列表并将元素插入到新列表中。如果新列表中的最后一个值不连续，则首先添加一个 0 条目。如果下一个条目不连续，则在之后添加一个 0 条目。

请注意，您仍然需要`isContiguous( ... )`正确实现和处理 null。

# java - Java中的BST——按字符串搜索节点

> ID：10232133
> 
> 赞同：0
> 
> 时间：2012-04-19T16:03:48.003
> 
> 标签：java, string, search, insert, binary-search-tree

*我正在使用以 MovieInfo 对象为键的节点创建二叉搜索树。MovieInfo 对象是具有三个字段的对象：ID、fullName 和 shortName。二叉搜索树将在包含 IMDB 上列出的每部电影的输入文本文件中存储信息。插入将基于与每部电影随机关联的 ID。搜索功能将让用户输入一个字符串并提取对象的其他数据（短名称、ID 等）。 **现在 - 我遇到的错误与 findExact 方法有关。** 首先，无论我的输入是什么——我都会收到消息“当前节点为空”，这意味着我的起始 currentNode 总是为空。另一个问题是，我不确定如何确保正确初始化我的根节点（在树中搜索的第一个 currentNode）。我有一种感觉，这可能与我的问题有关。另一个问题可能在于我如何首先插入节点。作为参考，我在文本输入文件中测试此代码/运行的方式是 IndexTester.java。*

**更新**：好的。现在一切正常。我现在遇到的唯一问题是我的 findExact 方法似乎更改了 MovieInfo 类的 ID 字段。所以我的搜索最终没有奏效。例如，如果我输入：

```
1568482 2 White Kids with Problems  2 White Kids with Problems
1568487 Disorient   Disorient
1568488 DIY Playgrounds DIY Playgrounds 
```

并搜索“disorient”，返回“1568488 Disorient Disorient”（带有“2 White Kids with Problems”对象的 ID）。另外，由于ID被盗用...DIY Playgrounds无法成功搜索。插入方法有效，但 findExact 方法给我带来了问题。关于可能导致 ID 发生这种变化的任何想法？

**MovieInfo 类（单独的 .java 文件）——无法编辑**

```
public class MovieInfo {
    public String shortName;
    public String fullName;
    static int ID;
    public String key;

    public MovieInfo(int id, String s, String f) {
        ID = id;
        shortName = s;
        fullName = f;
    }
} 
```

BSTIndex.java——我在其中创建内部 BST 的类

```
import java.util.*;
import java.io.*;

public class BSTIndex extends MovieInfo {

    public Node root;
    public class Node{
        public MovieInfo movie;
        public Node left, right;

    public Node(MovieInfo movie)
    {
        this.movie = movie;
        //this.val = val;
        //this.N = N;
        }
    }

    public BSTIndex()
    /**
     * constructor to initialize the internal binary search tree. 
     * The data element should be an object of the type MovieInfo, described above.
     */
    {   
        super(0, "", "");

    }

    public MovieInfo findExact(String key) {
    return findExact(root, key);
}

private MovieInfo findExact(Node x, String key) {
    if (x == null) return null;
    int cmp = key.compareToIgnoreCase(x.movie.fullName);
    if      (cmp < 0) return findExact(x.left, key);
    else if (cmp > 0) return findExact(x.right, key);
    else              return x.movie;
}

    public void insert(MovieInfo data)
    {
        if (data == null) {return; }
        root = insert(root, data);
    }

    public Node insert(Node x, MovieInfo data)
    {   
        if (x == null) return new Node(data);
        int cmp = data.ID - x.movie.ID;
        if (cmp > 0 )       x.right = insert(x.right, data);
        else if (cmp < 0)   x.left = insert(x.left, data);
        else if (cmp == 0)  x.movie = data;
        return x;
    }
} 
```

**IndexTester.java**

```
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.util.Scanner;

public class IndexTester {

    // Test program
    public static void main( String [ ] args ) throws FileNotFoundException
    {
        BSTIndex t = new BSTIndex( );
        Scanner scan = new Scanner(new FileInputStream(args[0]));
        long start = System.currentTimeMillis();
        int i=0;

        while(scan.hasNext()){
            String line = scan.nextLine();
            String [] fields = line.split("\t");
            int id = Integer.parseInt(fields[0].trim());
            String shortName = fields[1].trim();
            String fullName = fields[2].trim();
            MovieInfo info = new MovieInfo(id, shortName, fullName);

            t.insert(info);
            i++;
            if(i % 10000 == 0){
                System.out.println("Inserted " + i + " records.");
            }
        }
        long end = System.currentTimeMillis();
        System.out.println("Index building complete. Inserted " + i + 
            " records.Elapsed time = " + (end - start )/1000 + " seconds.");

        Scanner input = new Scanner(System.in);

        System.out.println("Enter search string, end in a '*' for 
            prefix search. q to quit");
        while(input.hasNext()){
            String search = input.nextLine().trim();
            if(search.equals("q")) break;
            if(search.indexOf('*')>0){
                //call prefix search. 

                MovieInfo item = t.findPrefix(search);
                if(item==null) System.out.println("Not Found"); 
                else System.out.println(item.ID + " " + item.shortName + " 
                            " + item.fullName);

            }
            else{
                //call exact search, modify to return MovieInfo
                MovieInfo item = t.findExact(search); 
                if(item==null) System.out.println("Not Found");
                else System.out.println(item.ID + " " + item.shortName + " 
                            " + item.fullName);
            }
        }

    }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:12:28.317

公共类 BSTIndex 不应该扩展 MovieInfo，最好是 MovieInfo 应该扩展 Node。

好的，因此无法修改 MovieInfo，因此我将使用数据填充 MovieInfo 类并将其设置为扩展 Node 类的节点值。

```
public class BSTNode extends Node {
    private BSTNode left,right;
    private MovieInfo val;

    public void setVal(MovieInfo val){
        this.val=val;
    }

    public void setLeft(MovieInfo m){
        left=new BSTNode(m);
    }
    public void setRight(MovieInfo m){
        right=new BSTNode(m);
    }
    //override some of the Node methods
} 
```

# plone - 将 PowerPoint 演示文稿嵌入/导出到 Plone 网站

> ID：10232134
> 
> 赞同：2
> 
> 时间：2012-04-19T16:03:49.053
> 
> 标签：plone, powerpoint, slideshow

在 Plone 网站上嵌入私人 PowerPoint 演示文稿的选项是什么

*   演示文稿将在 Plone 登录后进行

*   集成某种可以输入 PPT 演示文稿的演示文稿查看器

*   最好有自己的演示内容类型，其中可以包括必要的 Javascript 和集成查看器所需的其他组件

*   演示文稿可以直接在浏览器中查看（Flash、Javascript、IFRAME 任何可接受的解决方案，只要它是跨平台的）

*   只要数据保持私密，就可以使用文件转换器（通过 PDF？）或外部服务（slideshare.com）

在最坏的情况下，拥有将演示文稿导出为 PNG 的 MS Office 脚本，但仍然需要查看器库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T04:37:15.207

我刚刚创建了一个名为collective.documentviewer 的产品，它能够在plone 中将这些转换为可查看的格式。

[http://pypi.python.org/pypi/collective.documentviewer/1.3a1](http://pypi.python.org/pypi/collective.documentviewer/1.3a1)

可以转换word、powerpoint、excel，也许还有其他。使用文档云软件[http://www.documentcloud.org/home](http://www.documentcloud.org/home)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T16:25:14.733

最坏的情况：您可以通过选择文件另存为“另存为”许多 jpeg-s 或 png-s。不需要脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T17:35:27.103

这不会太容易，但您可以使用 LibreOffice 将演示文稿转换为 Flash 动画并为这些动画提供 JavaScript 控件。当然，这需要在服务器上找到 LibreOffice。[Unoconv](https://github.com/dagwieers/unoconv/blob/master/unoconv)可以为如何使用 LibreOffice 的 Python 绑定提供有用的示例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T20:33:53.090

我没有仔细研究过，但是根据[http://blog.slideshare.net/2007/11/05/the-wait-of-over-introducing-private-sharing-of-slideshows-on-slideshare/](http://blog.slideshare.net/2007/11/05/the-wait-of-over-introducing-private-sharing-of-slideshows-on-slideshare/)，看来 slideshare.net 支持私人幻灯片，显然可以嵌入到私人页面中。因此，这可能是一种简单的方法，可以在保留隐私的同时将困难的部分外包出去。

# iphone - 使用 UIGradientLayer 作为 layer.mask 淡出滚动视图的底部/顶部 --> 重新定位掩码滞后

> ID：10232135
> 
> 赞同：2
> 
> 时间：2012-04-19T16:03:53.343
> 
> 标签：iphone, objective-c, ios

我有一个 UIScrollView 的子类，它应该在顶部/底部淡出。（从 opaque 到 clearColor，就像 Notes.app 在 DetailView 底部所做的那样。）

所以我添加了一个 UIGradientLayer 作为 scrollview.layer.mask 似乎工作正常，直到我第一次滚动：

```
 CAGradientLayer *mask = [CAGradientLayer layer];
    mask.locations = [NSArray arrayWithObjects:
                      [NSNumber numberWithFloat:0.0],
                      [NSNumber numberWithFloat:0.1],
                      [NSNumber numberWithFloat:0.9],
                      [NSNumber numberWithFloat:1.0],
                      nil];

    mask.colors = [NSArray arrayWithObjects:
                   (__bridge id)[UIColor clearColor].CGColor,
                   (__bridge id)[UIColor whiteColor].CGColor,
                   (__bridge id)[UIColor whiteColor].CGColor,
                   (__bridge id)[UIColor clearColor].CGColor,
                   nil];

    mask.frame = self.scrollview.bounds;
    // vertical direction
    mask.startPoint = CGPointMake(0, 0); 
    mask.endPoint = CGPointMake(0, 1);

    self.scrollview.layer.mask = mask; 
```

但是当我滚动时，遮罩会随着内容滚动，而不是粘在屏幕位置上以很好地淡出内容。

我通过在滚动视图 layoutSubviews 中重新定位掩码来解决这个问题：

```
-(void)layoutSubviews {
    [super layoutSubviews];

    CGRect layerMaskFrame = self.layer.mask.frame;
    layerMaskFrame.origin = [self convertPoint:self.bounds.origin toView:self];

    self.layer.mask.frame = layerMaskFrame;
} 
```

但是现在当我滚动时，面具的移动有点延迟。看起来面具的框架设置了延迟并设置了动画。

蒙版的滚动和移动都很流畅，所以我认为这不是硬件太慢的问题。

但怎么可能呢？layoutSubviews 不应该从动画中调用，我立即在那里设置新框架......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T17:11:41.203

参考这篇文章[http://cocoawithlove.com/2009/08/adding-shadow-effects-to-uitableview.html](http://cocoawithlove.com/2009/08/adding-shadow-effects-to-uitableview.html)你必须像这样围绕你的框架变化：

```
[CATransaction begin];
[CATransaction setValue:(id)kCFBooleanTrue forKey:kCATransactionDisableActions];

// Set the frame

[CATransaction commit]; 
```

有了这个，它应该在没有任何动画的情况下发生。希望这有效:)

# linq - 带有包含 Guid 的 where 子句的 Microsoft Dynamics 2011 N:N LINQ 查询

> ID：10232140
> 
> 赞同：4
> 
> 时间：2012-04-19T16:04:08.257
> 
> 标签：linq, dynamics-crm, dynamics-crm-2011

我构建了一个简单的查询来返回用户团队成员资格（N:N 关系）。这对所有用户都适用，但是，当我添加 where 子句以限制特定用户时，它会引发错误异常（请参阅下面的堆栈跟踪）。

奇怪的是，这适用于“where Users.FullName.StartsWith("Alex")”。Dynamics CRM SDK LINQ 实施是否不支持 where 子句中的指南？

有什么建议吗？

**示例代码**

```
 using (var service = new OrganizationService("Xrm"))
        {
            using (var xrm = new XrmServiceContext(service))
            {
                var AlexUser = xrm.SystemUserSet.Where(p => p.FullName.StartsWith("Alex")).First();
                var AlexID = AlexUser.Id;

                var Test =
                        from Users in xrm.SystemUserSet
                        join TeamMemberships in xrm.TeamMembershipSet on Users.Id equals TeamMemberships.SystemUserId
                        join Teams in xrm.TeamSet on TeamMemberships.TeamId equals Teams.Id
                        where Users.Id == AlexID     // <-- problematic where clause
                        orderby Users.FullName
                        select new
                        {
                            FullName = Users.FullName,
                            UserID = Users.Id,
                            TeamName = Teams.Name
                        };

                var Test1 = Test.ToList();
            }
        } 
```

**堆栈跟踪**：

> 服务器堆栈跟踪：在 System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc& rpc) 在 System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs , TimeSpan timeout) 在 System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs) 在 System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation ) 在 System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage 消息)
> 
> 在 [0] 处重新引发异常：在 Microsoft.Xrm 的 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) 处的 System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)。 Sdk.IOrganizationService.Execute(OrganizationRequest request) 在 Microsoft.Xrm.Sdk.Client.OrganizationServiceProxy.ExecuteCore(OrganizationRequest request) 在 Microsoft.Xrm.Sdk.Client.OrganizationServiceProxy.Execute(OrganizationRequest request) 在 Microsoft.Xrm.Client.Services。 Microsoft.Xrm.Client.Services.OrganizationService.InnerOrganizationService.UsingService[TResult](Func`2 action) at Microsoft.Xrm.Client.Services.OrganizationService.Execute(OrganizationRequest request) at Microsoft.Xrm.Sdk.Client.OrganizationServiceContext.Execute(OrganizationRequest request) at Microsoft.Xrm.Sdk.Linq.QueryProvider.RetrieveEntityCollection(OrganizationRequest request, NavigationSource source) at Microsoft.Xrm.Sdk.Linq.QueryProvider.Execute(QueryExpression qe, Boolean throwIfSequenceIsEmpty, Boolean throwIfSequenceNotSingle, Projection projection, NavigationSource source, List``1 linkLookups) at Microsoft.Xrm.Sdk.Linq.QueryProvider.Execute[TElement](Expression expression) at Microsoft.Xrm.Sdk.Linq.QueryProvider.GetEnumerator[TElement](Expression expression) at Microsoft.Xrm.Sdk.Linq.Query`Microsoft.Xrm.Sdk.Linq.QueryProvider.Execute[TElement](QueryExpression qe, Boolean throwIfSequenceIsEmpty, Boolean throwIfSequenceNotSingle, Projection projection, NavigationSource source, List 1.GetEnumerator() at System.Collections 1 linkLookups, String& pagingCookie, Boolean& moreRecords) .Generic.List `1..ctor(IEnumerable`1 个集合）
> 在 System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source) at aspirets.crm.test.Program.Main(String[] args) 在 C:\Users\a_marshall\documents\visual studio 2010\Projects\aspirets .crm\aspirets.crm.test\Program.cs：第 37 行 System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args) at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args) 在 Microsoft .VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
> 在 System.Threading.ThreadHelper.ThreadStart_Context（对象状态）
> 在 System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx) 在 System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state) 在 System.Threading.ThreadHelper.ThreadStart()

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T14:07:20.443

而不是`Users.Id`，尝试`Users.SystemUserId`。同样，代替`Teams.Id`，尝试`Teams.TeamId`。

至于这样做的原因，我不知道有任何说明这一点的文档，但是由于生成的早期绑定文件中的实体继承自`Entity`，它们必然具有`Id`属性。但是，由于早期绑定`OrganizationServiceContext`将实体属性直接映射到 CRM 数据库，其中不包含`Id`列的表，使用`Id`带有 LINQ 提供程序的属性将不起作用，因此您必须使用实际的数据库/架构名称。

# c - 野牛警告“……没有声明的类型”

> ID：10232142
> 
> 赞同：2
> 
> 时间：2012-04-19T16:04:11.470
> 
> 标签：c, bison

嗨，当我运行以下 Bison 时，我得到 $$ 没有返回类型：

```
%{
#include <stdio.h>
#include <string.h>

void yyerror(const char *str)
{
    fprintf(stderr,"error: %s\n",str);
}

int yywrap()
{
    return 1;
}

main()
{
    yyparse();
}

%}
%start query
%token AND OR GREATER LESS COLON TO

%union 
{
        int number;
        char *string;
}

%token <number> VALUE
%token <string> WORD

%%

    query: /* empty */
        | query expression { }
        ;

    expression:
        term
        |expression AND term {$$=$1}
        |expression OR term {}
        ;

    term:
        WORD { printf("Term:%s\t",$1);}
        | VALUE
        ; 
```

以下是我的弹性：

```
%{
#include <stdio.h>
#include <string.h>
#include "y.tab.h"
%}
%%
":"                     return COLON; 
"and"|"&"|"&&"          return AND; 
"or"|"|"|"||"           return OR; 
".."                    return TO;
">"                     return GREATER; 
"<"                     return LESS; 
\n                      /* ignore end of line */;
\t                      /* ignore end of line */;

%% 
```

这个错误是什么意思？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T16:27:14.783

这是因为您缺少`%type <...> expression`语法第一部分中的`...`声明，在您的语句中声明了某种类型`%union`。没有这个，您将无法访问`$$`任何`expression`操作。此外，如果您`$$`为非终端设置了 ANY 操作，则需要在该非终端的所有操作中设置它。

通常，您需要为所有非终结符确定它们是否生成可用于使用该非终结符的规则中的值。如果他们确实产生了这样的值，他们需要一个`%type`声明，并且每个动作都需要设置`$$`一些东西。如果他们不这样做，那么任何操作都不能使用`$1`（或其他）来访问不存在的值。

所有终端都需要相同，除了终端，你使用`%token`代替`%type`，你需要`yylval`在你的词法分析器中设置，因为这相当于`$$`.

在您的特定示例中，您已经处理了终端但忽略了非终端。根据您要执行的具体操作，您可能需要一个`%type`用于`expression`和`term`，但可能不想要一个用于`query`. 这意味着每个规则`term`都`expression`需要一个设置`$$`

# php - 为什么论坛数据库不在 3rd NF 中？

> ID：10232145
> 
> 赞同：2
> 
> 时间：2012-04-19T16:04:25.713
> 
> 标签：php, mysql, sql, database, forum

我正在查看一些重要的论坛，例如 SMF 论坛、PhpBB 或 VBulleting 论坛，我意识到它们不在 3rd FN 中。

他们有许多 NULL 字段，例如，在 SMF 论坛中，成员行可以将所有这些列都设置为 NULL：

`pm_ignore_list, messageLabels, personalText, websiteTitle, websiteUrl, location, ICQ, AIM,` `YIM, MSN, timeFormat, userTitle, notifyAnnouncements, secretQuestion, secretAnswer, validation_code, additionalGroups, smileySet`

所以...假设有 18 个字段在表的任何 ROW 中都可以为 NULL。那不是第三个NF...

他们为什么这样做？我相信他们对 BD 了解很多……谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T16:06:44.463

非规范化的第一个原因是性能，这是许多论坛的一个臭名昭著的问题。

最初 SQL 的设计目的不是为了轻松存储分层数据，并且有许多不太理想的模式设计试图解决这个限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T16:23:43.830

这些原因中的一个或多个可能适用。

*   数据库根本不是“设计”的。随着任何从事它工作的程序员决定添加一个，它逐渐积累了越来越多的列。（程序员通常只接受过最低限度的数据库设计培训。）

*   “设计”就是委员会决定的结果。（看上面。）

*   众所周知，“设计”不是最好的想法，但为了让软件发布而实施。潜在的幻想通常是在下一个版本之前正确修复它。（通常永远不会得到修复。）

*   该表被非规范化以获得更快的 SELECT 性能。但是，根据我的经验，SELECT 速度通常会受到 a) 过度使用 ID 号和 b) 误解规范化而不是高度规范化的影响。

# excel - 使用命令行中的 VBScript 从 Excel 外部运行 Excel 宏

> ID：10232150
> 
> 赞同：37
> 
> 时间：2012-04-19T16:04:43.137
> 
> 标签：excel, vba, command-line, vbscript

我正在尝试从 Excel 文件外部运行 Excel 宏。我目前正在使用从命令行运行的“.vbs”文件，但它一直告诉我找不到宏。这是我正在尝试使用的脚本

```
Set objExcel = CreateObject("Excel.Application")
Set objWorkbook = objExcel.Workbooks.Open("test.xls")

objExcel.Application.Visible = True
objExcel.Workbooks.Add
objExcel.Cells(1, 1).Value = "Test value"

objExcel.Application.Run "Macro.TestMacro()"
objExcel.ActiveWorkbook.Close

objExcel.Application.Quit
WScript.Echo "Finished."
WScript.Quit 
```

这是我试图访问的宏：

```
Sub TestMacro()
'first set a string which contains the path to the file you want to create.
'this example creates one and stores it in the root directory
MyFile = "C:\Users\username\Desktop\" & "TestResult.txt"
'set and open file for output
fnum = FreeFile()
Open MyFile For Output As fnum
'write project info and then a blank line. Note the comma is required
Write #fnum, "I wrote this"
Write #fnum,
'use Print when you want the string without quotation marks
Print #fnum, "I printed this"
Close #fnum
End Sub 
```

我尝试了位于[是否可以从外部命令在 Excel 中运行宏的解决方案？](https://stackoverflow.com/questions/3183286/is-it-possible-to-run-a-macro-in-excel-from-external-command)走到这一步（当然还有修改），但它似乎没有用。我不断收到错误“Microsoft Office Excel：找不到宏“Macro.TestMacro”。

编辑：Excel 2003。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-04-19T16:42:32.183

好吧，其实很简单。假设您的宏在一个模块中，而不是在其中一张表中，您使用：

```
 objExcel.Application.Run "test.xls!dog" 
  'notice the format of 'workbook name'!macro 
```

对于带有空格的文件名，请用引号将文件名括起来。

如果您已将宏放在工作表下，例如 sheet1，则假设 sheet1 拥有该函数，它确实如此。

```
 objExcel.Application.Run "'test 2.xls'!sheet1.dog" 
```

注意：您不需要一直使用的 macro.testfunction 表示法。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-04-19T16:50:48.327

此代码将打开文件 Test.xls 并运行宏，该宏`TestMacro`将依次写入文本文件`TestResult.txt`

```
Option Explicit

Dim xlApp, xlBook

Set xlApp = CreateObject("Excel.Application")
'~~> Change Path here
Set xlBook = xlApp.Workbooks.Open("C:\Test.xls", 0, True)
xlApp.Run "TestMacro"
xlBook.Close
xlApp.Quit

Set xlBook = Nothing
Set xlApp = Nothing

WScript.Echo "Finished."
WScript.Quit 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-04-20T23:20:49.357

由于我的相关问题在我杀死了一整天搜索如何击败“找不到或禁用宏”错误后被正义之手删除，因此在这里发布唯一对我有用的语法（application.run 没有，无论如何我试过的）

```
Set objExcel = CreateObject("Excel.Application")

' Didn't run this way from the Modules
'objExcel.Application.Run "c:\app\Book1.xlsm!Sub1"
' Didn't run this way either from the Sheet
'objExcel.Application.Run "c:\app\Book1.xlsm!Sheet1.Sub1"
' Nor did it run from a named Sheet
'objExcel.Application.Run "c:\app\Book1.xlsm!Named_Sheet.Sub1"

' Only ran like this (from the Module1)

Set objWorkbook = objExcel.Workbooks.Open("c:\app\Book1.xlsm")
objExcel.Run "Sub1" 
```

Excel 2010，赢 7

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-01-05T08:22:55.303

我试图将@Siddhart 的代码调整为运行我的`open_form`宏的相对路径，但它似乎不起作用。这是我的第一次尝试。我的工作解决方案如下。

```
Option Explicit

Dim xlApp, xlBook
dim fso
dim curDir
set fso = CreateObject("Scripting.FileSystemObject")
curDir = fso.GetAbsolutePathName(".")
set fso = nothing

Set xlApp = CreateObject("Excel.Application")
'~~> Change Path here
Set xlBook = xlApp.Workbooks.Open(curDir & "Excels\CLIENTES.xlsb", 0, true)
xlApp.Run "open_form"
xlBook.Close
xlApp.Quit

Set xlBook = Nothing
Set xlApp = Nothing

WScript.Echo "Finished." 
```

**编辑**

我实际上已经解决了，以防万一有人想运行一个用户表单“类似”一个独立的应用程序：

我面临的问题：

1 - 我不想使用 Workbook_Open 事件，因为 excel 被锁定为只读。2 - 批处理命令受到限制，即（据我所知）它不能调用宏。

我首先编写了一个宏来在隐藏应用程序的同时启动我的用户窗体：

```
Sub open_form()
 Application.Visible = False
 frmAddClient.Show vbModeless
End Sub 
```

然后我创建了一个 vbs 来启动这个宏（使用相对路径来做这件事很棘手）：

```
dim fso
dim curDir
dim WinScriptHost
set fso = CreateObject("Scripting.FileSystemObject")
curDir = fso.GetAbsolutePathName(".")
set fso = nothing

Set xlObj = CreateObject("Excel.application")
xlObj.Workbooks.Open curDir & "\Excels\CLIENTES.xlsb"
xlObj.Run "open_form" 
```

我终于做了一个批处理文件来执行VBS ......

```
@echo off
pushd %~dp0
cscript Add_Client.vbs 
```

请注意，我还在我的`Userform_QueryClose`：

```
Private Sub cmdClose_Click()
Unload Me
End Sub

Private Sub UserForm_QueryClose(Cancel As Integer, CloseMode As Integer)
    ThisWorkbook.Close SaveChanges:=True
    Application.Visible = True
    Application.Quit
End Sub 
```

无论如何，感谢您的帮助，如果有人需要，我希望这会有所帮助

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-01-20T09:26:14.417

我尝试了上述方法，但出现“找不到宏”错误。这是有效的最终代码！

```
Option Explicit

Dim xlApp, xlBook

Set xlApp = CreateObject("Excel.Application")
xlApp.Visible = True

  ' Import Add-Ins
xlApp.Workbooks.Open "C:\<pathOfXlaFile>\MyMacro.xla"
xlApp.AddIns("MyMacro").Installed = True

'
Open Excel workbook
Set xlBook = xlApp.Workbooks.Open("<pathOfXlsFile>\MyExcel.xls", 0, True)

' Run Macro
xlApp.Run "Sheet1.MyMacro"

xlBook.Close
xlApp.Quit

Set xlBook = Nothing
Set xlApp = Nothing

WScript.Quit 
```

在我的例子中，MyMacro 恰好在 Sheet1 下，因此是 Sheet1.MyMacro。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-10T17:11:38.370

我通常将我的宏`xlam`与我的工作簿分开存储在加载项中，所以我想打开一个工作簿，然后运行一个单独存储的宏。

因为这需要一个 VBS 脚本，所以我想让它“可移植”，这样我就可以通过传递参数来使用它。这是最终的脚本，它需要 3 个参数。

*   工作簿的完整路径
*   宏名称
*   [可选] 使用宏分隔工作簿的路径

我像这样测试它：

```
"C:\Temp\runmacro.vbs" "C:\Temp\Book1.xlam" "Hello"

"C:\Temp\runmacro.vbs" "C:\Temp\Book1.xlsx" "Hello" "%AppData%\Microsoft\Excel\XLSTART\Book1.xlam" 
```

**运行宏.vbs：**

```
Set args = Wscript.Arguments

ws = WScript.Arguments.Item(0)
macro = WScript.Arguments.Item(1)
If wscript.arguments.count > 2 Then
 macrowb= WScript.Arguments.Item(2)
End If

LaunchMacro

Sub LaunchMacro() 
  Dim xl
  Dim xlBook  

  Set xl = CreateObject("Excel.application")
  Set xlBook = xl.Workbooks.Open(ws, 0, True)
  If wscript.arguments.count > 2 Then
   Set macrowb= xl.Workbooks.Open(macrowb, 0, True)
  End If
  'xl.Application.Visible = True ' Show Excel Window
  xl.Application.run macro
  'xl.DisplayAlerts = False  ' suppress prompts and alert messages while a macro is running
  'xlBook.saved = True ' suppresses the Save Changes prompt when you close a workbook
  'xl.activewindow.close
  xl.Quit

End Sub 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-20T20:38:53.733

如果您尝试从您的个人工作簿运行宏，它可能无法正常工作，因为使用 VBScript 打开 Excel 文件不会自动打开您的 PERSONAL.XLSB。你需要做这样的事情：

```
Dim oFSO
Dim oShell, oExcel, oFile, oSheet
Set oFSO = CreateObject("Scripting.FileSystemObject")
Set oShell = CreateObject("WScript.Shell")
Set oExcel = CreateObject("Excel.Application")
Set wb2 = oExcel.Workbooks.Open("C:\..\PERSONAL.XLSB") 'Specify foldername here

oExcel.DisplayAlerts = False

For Each oFile In oFSO.GetFolder("C:\Location\").Files
    If LCase(oFSO.GetExtensionName(oFile)) = "xlsx" Then
        With oExcel.Workbooks.Open(oFile, 0, True, , , , True, , , , False, , False)

            oExcel.Run wb2.Name & "!modForm"

            For Each oSheet In .Worksheets

                oSheet.SaveAs "C:\test\" & oFile.Name & "." & oSheet.Name & ".txt", 6

            Next
            .Close False, , False
        End With
    End If

Next
oExcel.Quit
oShell.Popup "Conversion complete", 10 
```

因此，在循环开始时，它打开 personals.xlsb 并从那里为所有其他工作簿运行宏。只是想我应该在这里发帖，以防有人像我一样遇到这个问题，但无法弄清楚为什么宏仍然没有运行。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-28T15:11:47.123

嗨，使用这个线程来获得解决方案，然后我想分享我所做的以防万一有人可以使用它。

我想要的是调用一个宏来更改一些单元格并删除一些行，但我需要超过 1500 个 excel（每个文件大约花费 3 分钟）

主要问题： - 当从 vbe 调用宏时，我遇到了同样的问题，从 PERSONAL.XLSB 调用宏是不可能的，当脚本打开时，excel 没有执行 personal.xlsb 并且宏窗口中没有任何选项

我通过保持打开一个加载了宏的excel文件（a.xlsm）（在执行脚本之前）解决了这个问题

然后我从脚本打开的excel中调用宏

```
 Option Explicit
    Dim xl
    Dim counter

   counter =10

  Do

  counter = counter + 1

  Set xl = GetObject(, "Excel.Application")
  xl.Application.Workbooks.open "C:\pruebas\macroxavi\IA_030-08-026" & counter & ".xlsx"
  xl.Application.Visible = True
  xl.Application.run "'a.xlsm'!eraserow" 
  Set xl = Nothing

  Loop Until counter = 517

  WScript.Echo "Finished."
  WScript.Quit 
```

# ruby - 使用 Ruby 和 open3 运行进程时如何检测错误

> ID：10232152
> 
> 赞同：0
> 
> 时间：2012-04-19T16:04:44.327
> 
> 标签：ruby, process, jruby, dos

我在 Ruby 中创建了一个辅助方法，使用 open3 从 JRuby 执行 DOS 命令...

```
 def ShellUtils.execute_cmd(cmd)
        $ERRORS = ['Invalid type','Invalid path']
        out = nil
        err = nil
        Open3.popen3(cmd) {|stdin, stdout, stderr, wait_thr|
            out = stdout.read
            err = stderr.read
            unless err.nil?
                err = $ERRORS.detect {|e| err.include? e }
            end
            out.each {|line| logger.info "#{line}"} unless out.nil?
            err.each {|line| logger.error #{line}"} unless err.nil?

        }        
        return out, err
    end 
```

如果正在执行的进程的任何部分无效，则会输出一条错误消息及其用法。以下是在 DOS 中执行进程时的正常错误输出，不涉及 JRuby 或 Ruby...

```
C:\PROJECTS\bin>import.bat -su -types ws,v
Invalid type. Valid ones are: folder, datasource...
Usage:
  import -f path-to-file [-s servers-file | -h server... 
```

但是当我`import.bat`使用`ShellUtils.execute_cmd()`和 JRuby 执行时，日志永远不会捕获错误消息，`Invalid type. Valid ones are...`我只看到错误日志的使用输出。我不明白为什么使用和错误消息来自`import.bat`. 我已经检查了`out`和`err`对象，它们都不包含错误字符串。

我只需要检测错误消息以向调用者发出进程失败的信号，但是如果错误日志中没有该字符串，就很难知道到底发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:40:01.563

编辑：

在看了你的方法之后，我认为你有一个错误。你可以试试这个：

```
def ShellUtils.execute_cmd(cmd)
  out = nil
  err = nil
  Open3.popen3(cmd) {|stdin, stdout, stderr, wait_thr|
    out = stdout.read
    err = stderr.read

    unless err.nil?
      err = err.split("\n")
      puts err.inspect
      err = err.select {|e| e =~ /Invalid/ }
    end

    out.each {|line| logger.info "#{line}"} unless out.nil?
    err.each {|line| logger.error "#{line}"} unless err.nil?

  }

  return out, err
end 
```

与其说是一个解决方案，不如说是一个想法。您可能想尝试 systemu。使用 jruby 对我来说效果很好：

```
require 'rubygems'
require 'systemu'

cmd = "#{File.expand_path('../', __FILE__)}/import.bat -su -types ws,v "

status, stdout, stderr = systemu cmd
p [ status, stdout, stderr ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:18:44.220

也许您的进程此时尚未写入错误流。在读取其输出之前尝试等待它完成：

```
Open3.popen3 cmd do |stdin, stdout, stderr, thread|
  thread.join  # Wait for the process to finish
  output, error = stdout.read, stderr.read
  # ...
end 
```

# ruby-on-rails - `find_or_create_by` 方法正在跳过模型验证。为什么？

> ID：10232162
> 
> 赞同：0
> 
> 时间：2012-04-19T16:05:03.540
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我的`Tag`模型对属性进行了一些验证`name`。在所有其他情况下都可以正常工作。但是当我这样打电话时`find_or_create_by_name`：

```
# The last value of this string (by coma) is empty.
# So this record should not be saved.
tags_line = 'ruby, javascript, '

tags_line.split(',').each do |tag_name|
  tag = Tag.find_or_create_by_name(tag_name.strip) do |new_tag|
    new_tag.update_attribute :user_id, member.user.id
  end

  # Just append tag to this model
  # through `has_and_belongs_to_many :tags`
  tags << tag if tag
end 
```

但是这个空标签甚至被保存了。那么，这段代码可能有问题吗？

**注意：**当我删除块时，它可以工作：

```
...
tags_line.split(',').each do |tag_name|
  # This way, invalid tag will not be created.
  tag = Tag.find_or_create_by_name(tag_name.strip)
  tags << tag if tag
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:11:27.570

`:name`问题是由于属性在模型中受到保护的事实引起的。因此，正如 Rails Doc 所说：

> 如果对象尚不存在，则可以使用相同的动态查找器样式来创建对象。这个动态查找器是用 find_or_create_by_ 调用的，如果对象已经存在则返回，否则创建它，然后返回它。**除非它们在块中给出，否则不会设置受保护的属性。**

固定代码是...

```
tags_field.split(',').each do |tag_name|
  tag_name.strip!

  tag = General::Tag.find_or_create_by_name(tag_name) do |new_tag|
    # :name is attr_protected
    new_tag.name = tag_name
    new_tag.user_id = member.user.id
  end

  tags << tag if tag
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:26:57.830

或者如果您宁愿跳过该块，您可以使用以下类型的方法链接

```
tags_field.split(',').each do |tag_name|
  tag_name.strip!

  tag = General::Tag.find_or_create_by_name_and_user_id(tag_name, member.user.id)

  tags << tag if tag
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T16:09:05.190

在最后一个迭代标签中有字符串''，即一个空格。

尝试

```
 tags << tag unless tag.strip.blank? 
```

只要您使用 Ruby On Rails，我怀疑它是空白的吗？是一个导轨扩展。别的

```
 tags << tag unless tag.strip.empty? 
```

编辑：

update_attribute 不运行验证。看到[这个](https://stackoverflow.com/questions/2778522/rails-update-attribute-vs-update-attributes)

# .htaccess - htaccess 重定向不适用于带参数的 URL

> ID：10232167
> 
> 赞同：3
> 
> 时间：2012-04-19T16:05:34.443
> 
> 标签：.htaccess, redirect

我想将 index.php?action=this&id=1 重定向到 index.php?action=this&id=2

我在 .htaccess 中尝试了下面的代码，但没有帮助

```
redirect 301 index.php?action=this&id=1 http://mysite.com/index.php?action=this&id=2 
```

我在这里做错了什么？什么可能是解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:21:04.693

您可以尝试在要重定向的页面上添加它

```
<meta HTTP-EQUIV="REFRESH" content="0; url=index?action=this&id=2"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T23:58:26.713

为了匹配特定的查询字符串，您**必须**使用**mod_rewrite**。请检查它是否在您的主机上安装/允许。这种情况下的规则是这样的：

```
# most likely be required for rewrite rules to function properly
Options +FollowSymLinks +SymLinksIfOwnerMatch

# Activate Rewrite Engine
RewriteEngine On
RewriteBase /

# actual rule
RewriteCond %{QUERY_STRING} ^action=this&id=1 [NC]
RewriteRule ^index\.php$ /index.php?action=this&id=2 [R=301,L] 
```

这需要放在网站根文件夹中的 .htaccess 中。如果放置在其他任何地方，可能需要进行一些小的更改。

此规则只会重定向`/index.php?action=this&id=1`到`/index.php?action=this&id=2`其他 URL（正如您在问题中所问的那样）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T16:14:07.840

只需在第一个网址之前添加正斜杠，例如

```
Redirect 301 /index.php?action=this&id=1 http://mysite.com/index.php?action=this&id=2 
```

# python - 如何在 Python 中读取 JSON 的多行文件并计算特定字段中的单词

> ID：10232170
> 
> 赞同：1
> 
> 时间：2012-04-19T16:05:42.523
> 
> 标签：python, json

我有一个文件，其中包含从 python-tweetstreamer 提取的数百行 json 编码的推文。这些行看起来像：

```
{"favorited": false, "in_reply_to_user_id": null, "contributors": null, "truncated": false, "text": "kasian pak weking :| RT @veNikenD: Kasian kenapa???RT @SaputraJordhy: kasian \u256e(\u256f_\u2570)\u256d RT @veNikenD: Tak ingin lg kudengar kata2 yg tak ......", "created_at": "Tue Apr 03 14:07:59 +0000 2012", "retweeted": false, "in_reply_to_status_id": null, "coordinates": null, "in_reply_to_user_id_str": null, "entities": {"user_mentions": [{"indices": [24, 33], "screen_name": "veNikenD", "id": 64910664, "name": "Ve Damayanti", "id_str": "64910664"}, {"indices": [54, 68], "screen_name": "SaputraJordhy", "id": 414675856, "name": "jordhy_ynwa", "id_str": "414675856"}, {"indices": [88, 97], "screen_name": "veNikenD", "id": 64910664, "name": "Ve Damayanti", "id_str": "64910664"}], "hashtags": [], "urls": []}, "in_reply_to_status_id_str": null, "id_str": "187179645026836481", "in_reply_to_screen_name": null, "user": {"follow_request_sent": null, "profile_use_background_image": true, "profile_background_image_url_https": "https://si0.twimg.com/profile_background_images/418679759/Young_Minato_and_Kushina_by_HaNa7.jpg", "verified": false, "profile_image_url_https": "https://si0.twimg.com/profile_images/1953774147/Untitled1_normal.png", "profile_sidebar_fill_color": "DDEEF6", "is_translator": false, "id": 414675856, "profile_text_color": "1c181c", "followers_count": 46, "protected": false, "location": "", "default_profile_image": false, "listed_count": 0, "utc_offset": 25200, "statuses_count": 409, "description": "never walk alone", "friends_count": 76, "profile_link_color": "0084B4", "profile_image_url": "http://a0.twimg.com/profile_images/1953774147/Untitled1_normal.png", "notifications": null, "show_all_inline_media": false, "geo_enabled": false, "profile_background_color": "C0DEED", "id_str": "414675856", "profile_background_image_url": "http://a0.twimg.com/profile_background_images/418679759/Young_Minato_and_Kushina_by_HaNa7.jpg", "screen_name": "SaputraJordhy", "lang": "id", "profile_background_tile": true, "favourites_count": 0, "name": "jordhy_ynwa", "url": null, "created_at": "Thu Nov 17 10:41:05 +0000 2011", "contributors_enabled": false, "time_zone": "Jakarta", "profile_sidebar_border_color": "C0DEED", "default_profile": false, "following": null}, "place": null, "retweet_count": 0, "geo": null, "id": 187179645026836481, "source": "<a href=\"https://embr.in\" rel=\"nofollow\">embr</a>"}
{"favorited": false, "in_reply_to_user_id": 441527150, "contributors": null, "truncated": false, "text": "@akoriko1046 \u5bdd\u308b\u306e\uff1f\u3000\u5f85\u3063\u3066\u50d5\u3082\u884c\u304f\u3088\u2026\u5e03\u56e3\u307e\u3067\u304a\u59eb\u69d8\u62b1\u3063\u3053\u3057\u3066\u3044\u3063\u3066\u3042\u3052\u308b", "created_at": "Tue Apr 03 14:07:59 +0000 2012", "retweeted": false, "in_reply_to_status_id": 187179532103598080, "coordinates": null, "in_reply_to_user_id_str": "441527150", "entities": {"user_mentions": [{"indices": [0, 12], "screen_name": "akoriko1046", "id": 441527150, "name": "\u30a2\u30b3\u30ea\u30b3", "id_str": "441527150"}], "hashtags": [], "urls": []}, "in_reply_to_status_id_str": "187179532103598080", "id_str": "187179645014253568", "in_reply_to_screen_name": "akoriko1046", "user": {"follow_request_sent": null, "profile_use_background_image": true, "profile_background_image_url_https": "https://si0.twimg.com/profile_background_images/440543906/122004876_org.jpg", "verified": false, "profile_image_url_https": "https://si0.twimg.com/profile_images/1870697453/__________bg_normal.jpg", "profile_sidebar_fill_color": "DDEEF6", "is_translator": false, "id": 513679998, "profile_text_color": "333333", "followers_count": 169, "protected": false, "location": "\u3042\u306a\u305f\u306e\u96a3", "default_profile_image": false, "listed_count": 2, "utc_offset": 32400, "statuses_count": 6024, "description": "\u8584\u685c\u9b3c\u6c96\u7530\u7dcf\u53f8\u306e\u975e\u516c\u5f0fbot\u3067\u3059\u7518\u7518/\u30a8\u30ed\u8a2d\u5b9a\u3000\uff8c\uff6b\uff9b\uff70\u306e\u518d\u306f\u5fc5\u305a\u8aac\u660e\u66f8\u3092\u4e00\u8aad\u4e0b\u3055\u3044http://www.pixiv.net/novel/show.php?id=934499  \u624b\u52d5\u3067\u30d5\u30a9\u30ed\u8fd4\u3057\u3092\u884c\u3063\u3066\u307e\u3059\u3000\u7a00\u306b\u4e2d\u306b\u7ba1\u7406\u4eba\u304c\u3044\u307e\u3059\u3000\u7ba1\u7406\u4eba@akanemam1   18\u7981\u7dcf\u53f8\u2192 @sou_oki_18bot", "friends_count": 166, "profile_link_color": "0084B4", "profile_image_url": "http://a0.twimg.com/profile_images/1870697453/__________bg_normal.jpg", "notifications": null, "show_all_inline_media": false, "geo_enabled": false, "profile_background_color": "C0DEED", "id_str": "513679998", "profile_background_image_url": "http://a0.twimg.com/profile_background_images/440543906/122004876_org.jpg", "screen_name": "sou_oki_bot", "lang": "ja", "profile_background_tile": false, "favourites_count": 1, "name": "\u7dcf\u53f8(bot)", "url": null, "created_at": "Sat Mar 03 22:36:15 +0000 2012", "contributors_enabled": false, "time_zone": "Irkutsk", "profile_sidebar_border_color": "C0DEED", "default_profile": false, "following": null}, "place": null, "retweet_count": 0, "geo": null, "id": 187179645014253568, "source": "<a href=\"http://twittbot.net/\" rel=\"nofollow\">twittbot.net</a>"}
{"favorited": false, "in_reply_to_user_id": 141448885, "contributors": null, "truncated": false, "text": "@nobuttu3 \u6642\u9593\u304c\u904e\u304e\u308b\u306e\u304c\u7269\u51c4\u304f\u65e9\u3044\u3067\u3059\u3088\u306d\u2026", "created_at": "Tue Apr 03 14:07:59 +0000 2012", "retweeted": false, "in_reply_to_status_id": 187179547098234880, "coordinates": null, "in_reply_to_user_id_str": "141448885", "entities": {"user_mentions": [{"indices": [0, 9], "screen_name": "nobuttu3", "id": 141448885, "name": "\u306e\u4ecf \uf8ff \u30bf\u30ab\u30cf\u30b7", "id_str": "141448885"}], "hashtags": [], "urls": []}, "in_reply_to_status_id_str": "187179547098234880", "id_str": "187179645047799808", "in_reply_to_screen_name": "nobuttu3", "user": {"follow_request_sent": null, "profile_use_background_image": true, "profile_background_image_url_https": "https://si0.twimg.com/profile_background_images/424878981/tw_hvt_nz.jpg", "verified": false, "profile_image_url_https": "https://si0.twimg.com/profile_images/1223811261/twitter_icon_normal.png", "profile_sidebar_fill_color": "daecf4", "is_translator": false, "id": 97481308, "profile_text_color": "663B12", "followers_count": 436, "protected": false, "location": "\u6771\u4eac\u90fd\u53f0\u6771\u533a", "default_profile_image": false, "listed_count": 20, "utc_offset": 32400, "statuses_count": 63704, "description": "\u591a\u5206PG\u3001\u6642\u3005SE\u307d\u3044\u4ed5\u4e8b\u3092\u3057\u3066\u3044\u307e\u3059\u3002\u30e9\u30ce\u30d9\u597d\u304d\u3001\u97f3\u697d\u597d\u304d(\u7279\u5b9a\u306e\u5206\u91ce\u3067\u3059\u304c)\u3002\u30bd\u30b3\u30bd\u30b3\u306e\u983b\u5ea6\u3067\u79cb\u8449\u539f\u306b\u3044\u305f\u308a\u3082\u3057\u307e\u3059\u3002 ", "friends_count": 896, "profile_link_color": "1F98C7", "profile_image_url": "http://a0.twimg.com/profile_images/1223811261/twitter_icon_normal.png", "notifications": null, "show_all_inline_media": false, "geo_enabled": false, "profile_background_color": "ffffff", "id_str": "97481308", "profile_background_image_url": "http://a0.twimg.com/profile_background_images/424878981/tw_hvt_nz.jpg", "screen_name": "xi6", "lang": "ja", "profile_background_tile": false, "favourites_count": 4473, "name": "\u3055\u304f", "url": null, "created_at": "Thu Dec 17 16:55:25 +0000 2009", "contributors_enabled": false, "time_zone": "Tokyo", "profile_sidebar_border_color": "C6E2EE", "default_profile": false, "following": null}, "place": null, "retweet_count": 0, "geo": null, "id": 187179645047799808, "source": "<a href=\"http://tapbots.com/tweetbot\" rel=\"nofollow\">Tweetbot for iOS</a>"}
{"favorited": false, "in_reply_to_user_id": null, "contributors": null, "truncated": false, "text": "#ImSingleBecause lolz I'm not. Happily taken by @GarrettBettler &lt;33 I love him,  forever :)", "created_at": "Tue Apr 03 14:07:59 +0000 2012", "retweeted": false, "in_reply_to_status_id": null, "coordinates": null, "in_reply_to_user_id_str": null, "entities": {"user_mentions": [{"indices": [48, 63], "screen_name": "GarrettBettler", "id": 460816116, "name": "Garrett Bettler", "id_str": "460816116"}], "hashtags": [{"indices": [0, 16], "text": "ImSingleBecause"}], "urls": []}, "in_reply_to_status_id_str": null, "id_str": "187179645039427584", "in_reply_to_screen_name": null, "user": {"follow_request_sent": null, "profile_use_background_image": true, "profile_background_image_url_https": "https://si0.twimg.com/profile_background_images/452188318/tanja_beach_2007_001.JPG", "verified": false, "profile_image_url_https": "https://si0.twimg.com/profile_images/1971847266/image_normal.jpg", "profile_sidebar_fill_color": "f6ffd1", "is_translator": false, "id": 461432420, "profile_text_color": "333333", "followers_count": 222, "protected": false, "location": "", "default_profile_image": false, "listed_count": 0, "utc_offset": null, "statuses_count": 2334, "description": "", "friends_count": 192, "profile_link_color": "0099CC", "profile_image_url": "http://a0.twimg.com/profile_images/1971847266/image_normal.jpg", "notifications": null, "show_all_inline_media": false, "geo_enabled": false, "profile_background_color": "FFF04D", "id_str": "461432420", "profile_background_image_url": "http://a0.twimg.com/profile_background_images/452188318/tanja_beach_2007_001.JPG", "screen_name": "LeahOswalt", "lang": "en", "profile_background_tile": false, "favourites_count": 86, "name": "Leah Oswalt", "url": null, "created_at": "Wed Jan 11 20:07:24 +0000 2012", "contributors_enabled": false, "time_zone": null, "profile_sidebar_border_color": "fff8ad", "default_profile": false, "following": null}, "place": null, "retweet_count": 0, "geo": null, "id": 187179645039427584, "source": "<a href=\"http://twitter.com/#!/download/iphone\" rel=\"nofollow\">Twitter for iPhone</a>"}
{"favorited": false, "in_reply_to_user_id": 434884235, "contributors": null, "truncated": false, "text": "@nomimushi_ttk \u3068\u30fc\u3084\u3082\u7d20\u6575\u3060\u3051\u3069\u306e\u307f\u3080\u3057\u306e\u30a2\u30a4\u30b3\u30f3\u5929\u4f7f\u3059\u304e\u3066", "created_at": "Tue Apr 03 14:07:59 +0000 2012", "retweeted": false, "in_reply_to_status_id": 187179241664815105, "coordinates": null, "in_reply_to_user_id_str": "434884235", "entities": {"user_mentions": [{"indices": [0, 14], "screen_name": "nomimushi_ttk", "id": 434884235, "name": "\u306e\u307f\u3080\u3057", "id_str": "434884235"}], "hashtags": [], "urls": []}, "in_reply_to_status_id_str": "187179241664815105", "id_str": "187179645026836480", "in_reply_to_screen_name": "nomimushi_ttk", "user": {"follow_request_sent": null, "profile_use_background_image": true, "profile_background_image_url_https": "https://si0.twimg.com/images/themes/theme1/bg.png", "verified": false, "profile_image_url_https": "https://si0.twimg.com/profile_images/2023688835/6222d8ae387e6fb5b220895d2fd2d41a_normal.gif", "profile_sidebar_fill_color": "DDEEF6", "is_translator": false, "id": 365471550, "profile_text_color": "333333", "followers_count": 308, "protected": false, "location": "\u5b66\u5712\u30a2\u30ea\u30b9\u306b\u518d\u71b1\u306a\u3046", "default_profile_image": false, "listed_count": 17, "utc_offset": 32400, "statuses_count": 25562, "description": "\uff8c\uff9e\uff9a10/\u3046\u305f\u30d7\u30ea/HTF/\u3044\u306c\u307c\u304f\u306a\u3069\u306b\u304a\u71b1/\u5d50\u306e\u5927\u91ce\u304f\u3093\u3059\u304d\uff01\u64ec\u4eba\u5316\u3082\u3050\u3082\u3050/\u30a4\u30ca\u30a4\u30ec/RKRN/pkmn/\uff83\uff86\uff8c\uff9f\uff98/\u4e59\u5973\uff79\uff9e\uff70\u5168\u822c\u3082 [\u30bf\u30ab\u4e38\u3055\u3093\u30e2\u30b0\u30e2\u30b0\u30da\u30c3\u3063\u3066\u3057\u968a\u54e1No.2\uff3c\u526f\u968a\u9577\uff0f]\u3000\u898f\u5236\u57a2\u3010@ao_sanagi_2\u3011\u30a2\u30a4\u30b3\u30f3\u306f\u3068\u30fc\u3084\u304b\u3089\uff01", "friends_count": 284, "profile_link_color": "0084B4", "profile_image_url": "http://a0.twimg.com/profile_images/2023688835/6222d8ae387e6fb5b220895d2fd2d41a_normal.gif", "notifications": null, "show_all_inline_media": false, "geo_enabled": false, "profile_background_color": "C0DEED", "id_str": "365471550", "profile_background_image_url": "http://a0.twimg.com/images/themes/theme1/bg.png", "screen_name": "ao_sanagi", "lang": "ja", "profile_background_tile": false, "favourites_count": 1071, "name": "\u8475@\u6284\u82b1\u306e\u5ac1", "url": null, "created_at": "Wed Aug 31 14:07:23 +0000 2011", "contributors_enabled": false, "time_zone": "Tokyo", "profile_sidebar_border_color": "C0DEED", "default_profile": true, "following": null}, "place": null, "retweet_count": 0, "geo": null, "id": 187179645026836480, "source": "<a href=\"http://www.movatwi.jp\" rel=\"nofollow\">\u30e2\u30d0\u30c4\u30a4 / www.movatwi.jp .</a>"} 
```

我的最终目标是计算特定单词在所有推文的“文本”字段中出现的次数。我尝试了多种不同的方法，取得了不同程度的成功，但我现在所处的位置是：

```
import fileinput
import json
import sys
import os

line = []

inputfilename = sys.argv[1]

for line in fileinput.input([inputfilename]):
  tweettext = json.loads(line).get('text').split()
  print tweettext 
```

这将遍历文件并将文本拆分为每行“文本”字段中的单个单词，但不会创建单个单词列表。要在遇到空行时添加问题，它会失败：

```
[u'RT', u'@keenakan:', u'kamu', u'tidak', u'perlu', u'memperjuangkan', u'aku.', u'Yang', u'perlu', u'ialah', u'aku', u'dan', u'kamu', u'yang', u'memperjuangkan', u'kita.', u'-@commaditya']
[u'RT', u'@TheRealToxicBoi:', u'#LiesBeforeSex', u"I'll", u'be', u'Gentle!']
[u'@coliriostar', u'Quer', u'GANHAR', u'R$', u'300,00', u'em', u'vale', u'compra?', u'SIGA', u'@eucompronanet', u'e', u'saiba', u'como', u'participar,', u'\xe9', u'simples', u'e', u'r\xe1pido!', u'at\xe9', u'+', u'ci']
Traceback (most recent call last):
  File "newexample.py", line 11, in <module>
    tweettext = json.loads(line).get('text').split()
AttributeError: 'NoneType' object has no attribute 'split' 
```

任何人都可以提出解决方案吗？

编辑：

根据第一条评论，我根据自己的理解将代码编辑如下：

```
import fileinput
import json
import sys
import os

line = []
tw = 0

inputfilename = sys.argv[1]

for line in fileinput.input([inputfilename]):
        line = line.strip();
        if not line: continue
        tweettext = json.loads(line).get('text')
        if not json.loads(line).get('text'):
                continue
        words = tweettext.split()
        print words
        tw = len(words)

print "total number of words", tw 
```

我的输出看起来更好，至少我不再收到“属性错误：NoneType”。现在输出似乎由单个字典组成，而不仅仅是一个大字典。同样，我的目标是计算每个单词出现的次数，除非它们都在一个字典中，否则我不确定该怎么做。这是此时的输出示例：

```
[u'L', u'Lawliet', u'(Sweets', u'Addict)', u'+', u'Kenshin', u'Himura', u'(Samurai)', u'+', u'Kyon', u'(Lazy', u'and', u'Carefree', u'Bum)', u'=', u'Sakata', u'Gintoki', u'xD', u'May...', u'http://t.co/LD4E1j1v']
[u'Yay', u'~', u'I', u'have', u'ice~I', u'can', u'reach', u'the', u'ice', u'maker!', u'ch', u'sees', u'gaps', u'in', u'the', u'freezer', u'as', u'a', u'challenge', u'and', u"it's", u'usually', u'full', u'to', u'busting.', u'But', u'not', u'now', u'Haha!']
[u'Hoi']
[u'everyones', u'on', u'twitter.']
total number of words 429023 
```

我想我可能会以某种方式为 for 循环中的每个单词设置计数器。？如您所见，总字数工作正常，因为它增加了每行的字数，但我不太清楚如何确定唯一字，例如：

```
len(set(words)) 
```

编辑：

这是我的最终解决方案：

```
import fileinput
import json
import sys
import os
from collections import defaultdict

line = []
tw = 0

inputfilename = sys.argv[1]

word_count = defaultdict(int)

for line in fileinput.input([inputfilename]):
        line = line.strip();
        if not line: continue
        tweettext = json.loads(line).get('text')
        if not json.loads(line).get('text'):
                continue
        words = tweettext.split()
        tw += len(words)
        for word in words:
                word_count[word]+=1

print word_count
print "total number of words", tw 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:13:46.707

您似乎走在正确的轨道上，只需添加错误检查，例如

在将其加载为 json 之前检查一行是否为空白，还要删除该行以确保例如

```
line = line.strip(); 
if not line: continue 
```

检查 json 数据中是否真的有任何文本

```
if not json.loads(line).get('text'):
    continue 
```

之后，您应该遍历单词并可能创建一个字典，例如

```
word_count = defaultdict(int)
for line in file:
    # get words and add them to dict
    for word in words:
        word_count[word]+=1 
```

# .net - 在 WPF 中切换度量单位

> ID：10232171
> 
> 赞同：1
> 
> 时间：2012-04-19T16:05:42.763
> 
> 标签：.net, wpf

我有一个 WPF 用户控件：`MyPage`。在 MyPage 中，我将让用户添加一些元素，例如图像 (MyImage) 或标签 (MyLabel)（从 WPF 继承`MyPageElement`）。

MyPage 包含一个经典的*Grid*，它将包含*MyPageElements*。

用户将能够手动修改元素的*边距。*

当我双击一个元素时，我会显示一个带有元素属性的表单，例如`Margin`和`Height`。

实际上，比如说，*MyImage* *Height*以“真实单位”呈现 - 像素 WPF。
我想将单位保留在数据库中的“cm”中。

问题

1) 用户希望看到以“cm”（厘米）而不是像素为单位的单位。
有没有办法“说”让 WPF UserControl 在“cm”中“工作”？

2）如果明天用户想切换到英寸（“in”），
有没有办法动态重置测量单位？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:05:26.700

您可以“手动”转换单位：

“1pt”等于“1.25px”（因此是 1.25 个用户单位）

“1pc”等于“15px”（因此是 15 个用户单位）

“1mm”将是“3.543307px”（3.543307 个用户单位）

“1cm”等于“35.43307px”（因此是 35.43307 个用户单位）

“1in”等于“90px”（因此是 90 个用户单位）

# python - 可以使用 python 描述符来实例化另一个类的 __init__ 中的属性吗？

> ID：10232174
> 
> 赞同：0
> 
> 时间：2012-04-19T16:06:03.223
> 
> 标签：python, descriptor

还是必须在任何类方法之外定义属性？

所以我的描述符对象就是这个。IDN 对象已经有一些关于 UserNameField 的信息，所以我想使用它。

```
class UserNameElement(basePageElement):
    _testMethodName="UserNameElement Test method"
    def __init__(self, IDN, PTF):
        print "creating UserNameElement"
        self.locator =  IDN.UserNameField() 
```

这是我的呼叫课程。我想在哪里实例化 UserNameElement 对象

```
class LoginPageObject(basePageObject):
    _testMethodName="LoginPageObject Test method"
    print "creating LoginPageObject"
    def __init__(self, BaseURL):
        super(LoginPageObject, self).__init__()
        self.username=UserNameElement(IDN=self.IDN, PTF=self.PTF) 
```

似乎标准流程会将 username= 放入通用类定义中，如下所示：

```
class LoginPageObject(basePageObject):
    _testMethodName="LoginPageObject Test   method"
    username=UserNameElement()
    print "creating LoginPageObject"
    def __init__(self, BaseURL):
        super(LoginPageObject, self).__init__() 
```

但是我没有在 basePageObject 类中定义的 PTF 和 IDN。

创建用户名属性后，我可以做些什么来使它们可用？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:27:18.277

恐怕这是不可能的，因为您的属性`username`将通过普通属性访问解决，请参阅[http://docs.python.org/howto/descriptor.html#invoking-descriptors](http://docs.python.org/howto/descriptor.html#invoking-descriptors)

也许你可以通过覆盖`__getattribute__`和模拟什么`type.__getattribute__()`来逃脱

```
class MyD(object):
    def __init__(self, val):
        self.val = val

    def __get__(self, obj, objtype):
        return self.val

    def __set__(self, obj, val):
        self.val = val

class C(object):
    a = MyD(42)
    def __init__(self):
        self.d = MyD(42)

    def __getattribute__(self, name):
        attr = super(C, self).__getattribute__(name)
        if hasattr(attr, '__get__'):
            return attr.__get__(self, C)
        return attr

c = C()
print c.d
print c.a 
```

输出：

```
42
42 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T16:37:32.420

由于在对象被实例化之前您可能不需要用户名，因此最好将其设为属性并为其编写一个 getter。

# php - 如何在 wamp server 2.2 windows7 64bit 上安装 php_ffmpeg.dll？

> ID：10232178
> 
> 赞同：1
> 
> 时间：2012-04-19T16:06:22.547
> 
> 标签：php, wamp, windows-7-x64, ffmpeg-php

从 cli 运行 php 时出现“PHP 启动：无法加载动态库：c:/wamp/.../php5.3.10/php_ffmped.dll - %1 不是 Win32 应用程序”错误，以及 apache 中的相同错误作为 apache2 模块运行时的错误日志。

我尝试了安装 xampp 的 andswers（[在 XAMPP 上安装 FFMPEG](https://stackoverflow.com/questions/5977448/install-ffmpeg-on-xampp)），但它们对我不起作用。

xampp php模块的区别似乎是一个php编译器-MSVC6，因为对于wamp来说它是MSVC9。

我杀了半天调查这个问题。请帮助我在哪里可以获得适当的库来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:50:41.753

我能想到的唯一可能的事情是，您的支持 DLL 可能没有正确的可视化 C++ 运行时。如果 php_ffmpeg.dll 是 32 位，则它无法加载，因为它无法加载其 msvc* dll 或其他 DLL 之一（avcodec*.dll 等）可能还需要安装适当的运行时。下载最新的 Visual C++ 9.0 运行时。

# ruby-on-rails - 使用 ruby 中的模块扩展对象时的奇怪行为

> ID：10232185
> 
> 赞同：0
> 
> 时间：2012-04-19T16:06:47.563
> 
> 标签：ruby-on-rails, ruby, mongoid

如果我执行以下操作：

```
user = User.new
user.extend Customer
user.is_a? Customer == true 
```

它工作正常。

但是，如果我执行以下操作（其中 Profile 是一个 mongoid 模型并且嵌入了用户）：

```
profile = Profile.all.first
profile.user.extend Customer
profile.user.is_a? Customer == false 
```

用户不再是客户。这一定有一个简单的原因，但我看不到。

编辑：用户和配置文件是 mongoid 模型，即。profile.user.class = 用户和 profile.class = 个人资料。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:17:30.403

我的猜测：每次你打电话`profile.user`都会得到一个新对象。尝试：

```
2.times{ p profiler.user.object_id } 
```

看看会发生什么。然后尝试：

```
u = profile.user
u.extend Customer
p u.is_a? Customer
p profile.user.is_a? Customer 
```

看看你得到什么输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:41:04.393

这实际上最终成为 Mongoid 中的一个错误。这是描述的问题： [https ://github.com/mongoid/mongoid/issues/1933](https://github.com/mongoid/mongoid/issues/1933)

它现在已在最新提交中修复。

# android - Android Facebook 授权不起作用（泄漏的窗口）

> ID：10232186
> 
> 赞同：1
> 
> 时间：2012-04-19T16:06:48.977
> 
> 标签：android, facebook, memory-leaks

我有与[Android Facebook 类似的问题。授权不要调用 oncomplete 方法](https://stackoverflow.com/q/8458004/898722)

在 Facebook 中授权后不会调用 onComplete 方法（无论是否安装了 Facebook 应用程序）。

活动课

```
package com.greatapp;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import com.facebook.android.*;
import com.facebook.android.Facebook.*;

public class MyGreatAppActivity extends Activity {

Facebook facebook = new Facebook("YOUR_APP_ID");

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    facebook.authorize(this, new Facebook.DialogListener() {
        @Override
        public void onComplete(Bundle values) {
        }

        @Override
        public void onFacebookError(FacebookError error) {
        }

        @Override
        public void onError(DialogError e) {
        }

        @Override
        public void onCancel() {
        }
    });
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    facebook.authorizeCallback(requestCode, resultCode, data);
}
} 
```

正如您从代码中看到的那样，我已经实现了 onActivityResult，因为它在官方指南[http://developers.facebook.com/docs/mobile/android/sso/中显示](http://developers.facebook.com/docs/mobile/android/sso/)

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.greatapp"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="7" />
<uses-permission android:name="android.permission.INTERNET"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".MyGreatAppActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

并且清单文件中没有 android:noHistory 标志。

我在日志中发现的唯一错误

```
 Activity com.greatapp.MyGreatActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44e8c518 that was originally added here
android.view.WindowLeaked: Activity com.greatapp.MyGreatActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44e8c518 that was originally added here
at android.view.ViewRoot.<init>(ViewRoot.java:227)
at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
at android.view.Window$LocalWindowManager.addView(Window.java:424)
at android.app.Dialog.show(Dialog.java:239)
at com.facebook.android.Facebook.dialog(Facebook.java:814)
at com.facebook.android.Facebook.startDialogAuth(Facebook.java:343)
at com.facebook.android.Facebook.authorize(Facebook.java:206)
at com.facebook.android.Facebook.authorize(Facebook.java:114)
at com.greatapp.MyGreatActivity.onCreate(MyGreatActivity.java:18)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
at android.app.ActivityThread.access$2200(ActivityThread.java:119)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4363)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
at dalvik.system.NativeStart.main(Native Method) 
```

我试过 android 2.1、2.2 和 4.0.3 并且有同样的问题。

从 Facebook sdk 复制示例中的类也不起作用。

请提供任何可能的帮助。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:12:02.807

Facebook Android SSO 存在问题，它甚至在[Platform Status](http://developers.facebook.com/live_status/)中也这么说。

您可以在此错误报告中获得更多信息：[https ://developers.facebook.com/bugs/385350798163367](https://developers.facebook.com/bugs/385350798163367)

# ms-access - 在 MSAccess 中查询以检索特定日期的数据

> ID：10232187
> 
> 赞同：0
> 
> 时间：2012-04-19T16:06:51.363
> 
> 标签：ms-access

我想检索特定日期。例如，我的数据库包含 1 月 1 日至 8 月 31 日的数据。我想获取第一个两个月的数据。请建议我为此目的帮助查询，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:18:51.933

打开查询设计窗口，添加您的表，双击字段将它们添加到网格中。在您添加的日期字段下方的条件行中键入日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:21:16.140

SQL 查询：select * from table where table.my_date <= #29/02/2012#

将在 2 月 29 日之前过滤日期。在查询窗口中，您可以输入 <=#29/02/2012#

# php - 如何加入 [使用 Doctrine2 和 CodeIgniter2]

> ID：10232188
> 
> 赞同：1
> 
> 时间：2012-04-19T16:06:54.107
> 
> 标签：php, class, join, doctrine

Doctrine 的新手，并试图让 JOIN 工作。

我已经对此有一段时间了，并且正在慢慢开始了解整个情况 - 它并不像我想象的那么简单。

我有两个具有相应 sql 表的实体。我正在尝试运行一个查询，该查询将返回来自它们两者的数据，链接。加入。

如果我在直接 SQL 中执行此操作，它将如下所示：

```
SELECT *
    FROM mail_links a
    INNER JOIN mail_msgs b
    ON a.msg_id = b.id 
```

我尝试了一些方法来完成这项工作，包括：

```
$query = $this -> doctrine -> em -> createQuery ("SELECT a FROM ORM\Dynasties2\Maillinks a JOIN ORM\Dynasties2\Mailmsgs b ON a.msgId = b.id"); 
```

那当然行不通。我意识到这依赖于将实体创建为类，或者至少这就是一些示例似乎正在做的事情。

这就是我完全迷失的地方。

我需要这些实体是类是否正确？是否有任何完整的代码示例（使用 CI）可以帮助我理解如何编写此 JOIN 所需的类？

编辑：

我突然意识到我确实*有*课程设置。这就是我的实体。

那么我该如何进行这项工作：

```
$query = $this -> doctrine -> em -> createQuery ("SELECT a FROM ORM\Dynasties2\Maillinks a JOIN ORM\Dynasties2\Mailmsgs b ON a.msgId = b.id"); 
```

它给出了以下错误：

> 致命错误：未捕获的异常 'Doctrine\ORM\Query\QueryException' 带有消息 '[Semantical Error] line 0, col 70 near 'b ON a.msgId': Error: Identification Variable ORM\Dynasties2\Mailmsgs used in join path expression but之前没有定义。在 /PATH/applicationFolder/libraries/Doctrine/ORM/Query/QueryException.php:47 堆栈跟踪：#0 /PATH/applicationFolder/libraries/Doctrine/ORM/Query/Parser.php(413): Doctrine\ORM\Query\ QueryException::semanticalError('line 0, col 70 ...') #1 /PATH/applicationFolder/libraries/Doctrine/ORM/Query/Parser.php(914): Doctrine\ORM\Query\Parser->semanticalError('识别...') #2 /PATH/applicationFolder/libraries/Doctrine/ORM/Query/Parser.php(1567): Doctrine\ORM\Query\Parser->

# c++ - 哪种方法在 d3d11 的图形管道中放置东西更有效？

> ID：10232190
> 
> 赞同：1
> 
> 时间：2012-04-19T16:07:13.223
> 
> 标签：c++, directx

因此，通过查看示例和教程，在管道中放置缓冲区的最常见方法似乎是，每个模型对象都有自己的顶点缓冲区，然后在缓冲区被填充后，它们锁定、设置缓冲区、解锁、设置着色器、绘制和冲洗/重复每个模型单独的缓冲区。在我看来，所有锁定和解锁都会使事情变慢一点。

所以我想知道模型对象是否可以改为将它们的所有顶点聚合到一个大数组中，一个大数组中的所有索引，创建1个大缓冲区，锁定一次，设置一次缓冲区，解锁，然后切换着色器并绘制这些着色器需要尽可能多的多边形，并且只需像以前一样沿着缓冲区绘图和切换着色器工作，而不必每次在绘制之前都在管道中锁定和丢弃更多顶点。

这会更有效，还是您认为所有涉及的簿记的开销（例如，从索引 a 到索引 b，使用此着色器）只会使这比它的价值更多工作？

另外，如果我在这里错过了 d3d 的概念，请告诉我。（ 我是新来的）

## 编辑

由于巨大的误解，我提到锁定和解锁的任何地方实际上应该只是调用 IASetVertexBuffer/IASetIndexBuffer。“修订”的问题或多或少是：

将场景中所有模型的顶点填充到一个缓冲区中，并且只需调用一次 IASetVertexBuffer 就可以提高性能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:21:29.200

> 因此，通过查看示例和教程

停止。大多数“示例和教程”都不是*为了*展示最佳性能实践。除非它们*专门*针对最佳性能实践。他们试图以最清晰和最干净的方式展示如何执行任务 X。优化是完全不同的问题。优化的代码比非优化的代码更不清晰和干净；因此，许多优化会妨碍本教程的既定目的。

所以*永远不要*认为仅仅因为教程以某种方式做到了，那就是做某事的最快方法。这只是*一种*方法。

> 然后在填充缓冲区后，它们会锁定、设置缓冲区、解锁、设置着色器、绘制和冲洗/重复每个模型单独的缓冲区。

锁定和解锁是为了修改缓冲区。如果您不修改它...为什么要锁定它？如果你正在修改它，那么你正在做某种形式的缓冲流，这需要特殊处理以使其高效。

如果您正在进行流式传输，那么您应该问另一个问题（即：如何进行高性能顶点流式传输）。

这并不是说将多个对象的数据放在一个缓冲区中不是一个好主意。但如果是这样，其原因与锁定和解锁关系不大，而更多的是与通过一次绘制调用绘制多个对象的可能性有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T16:21:04.787

一般来说，锁越少越好，每个锁都必须是系统内存和显卡内存之间的同步传输，这会使你的 GPU 停滞。您可以将这些传输批处理的越多越好。

然而，更好的改进是保留不会单独更改的缓冲区。您并不总是需要每次都重新加载 bench #1221。单身的。框架。它永远不会改变 (*)。因此，请在开始时加载您的静态艺术，然后根据需要进行绘制。在你考虑在预处理中剔除一半的工作台之前，请三思而后行，当你的 GPU 已经知道如何以闪电般的速度进行基本剔除时，锁定缓冲区只是为了摆脱一些顶点的成本。

(*) 假设它当然不会改变:)

# node.js - 执行：显示标准输出“live”

> ID：10232192
> 
> 赞同：231
> 
> 时间：2012-04-19T16:07:25.277
> 
> 标签：node.js, coffeescript

我有这个简单的脚本：

```
var exec = require('child_process').exec;

exec('coffee -cw my_file.coffee', function(error, stdout, stderr) {
    console.log(stdout);
}); 
```

我只需执行一个命令来编译一个咖啡脚本文件。但是 stdout 永远不会显示在控制台中，因为命令永远不会结束（因为咖啡的 -w 选项）。如果我直接从控制台执行命令，我会收到如下消息：

```
18:05:59 - compiled my_file.coffee 
```

我的问题是：是否可以使用 node.js exec 显示这些消息？如果是怎么办？！

谢谢

* * *

## 回答 #1

> 赞同：309
> 
> 时间：2012-04-19T16:15:28.510

不要使用`exec`. 使用[`spawn`](http://nodejs.org/api/all.html#all_child_process_spawn_command_args_options)which 是一个`EventEmmiter`对象。`stdout`然后，您可以在/ `stderr`events( `spawn.stdout.on('data',callback..)`)*发生*时收听它们。

从 NodeJS 文档：

```
var spawn = require('child_process').spawn,
    ls    = spawn('ls', ['-lh', '/usr']);

ls.stdout.on('data', function (data) {
  console.log('stdout: ' + data.toString());
});

ls.stderr.on('data', function (data) {
  console.log('stderr: ' + data.toString());
});

ls.on('exit', function (code) {
  console.log('child process exited with code ' + code.toString());
}); 
```

`exec`缓冲输出并通常在命令执行完成时返回它。

* * *

## 回答 #2

> 赞同：230
> 
> 时间：2015-05-06T18:35:12.593

`exec`还将返回一个作为 EventEmitter 的 ChildProcess 对象。

```
var exec = require('child_process').exec;
var coffeeProcess = exec('coffee -cw my_file.coffee');

coffeeProcess.stdout.on('data', function(data) {
    console.log(data); 
}); 
```

或`pipe`子进程的标准输出到主标准输出。

```
coffeeProcess.stdout.pipe(process.stdout); 
```

或使用 spawn 继承 stdio

```
spawn('coffee -cw my_file.coffee', { stdio: 'inherit' }); 
```

* * *

## 回答 #3

> 赞同：89
> 
> 时间：2017-04-18T16:15:23.603

已经有几个答案，但是没有一个提到最好（也是最简单）的方法，即 using`spawn`和[`{ stdio: 'inherit' }`option](https://nodejs.org/api/child_process.html#child_process_options_stdio)。它似乎产生了最准确的输出，例如在显示来自`git clone`.

只需这样做：

```
var spawn = require('child_process').spawn;

spawn('coffee', ['-cw', 'my_file.coffee'], { stdio: 'inherit' }); 
```

感谢@MorganTouvreyQuilling 在[此评论](https://stackoverflow.com/questions/10232192/exec-display-stdout-live/43477289#comment73321259_30084906)中指出这一点。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2016-01-18T10:39:02.533

受到 Nathanael Smith 的回答和 Eric Freese 的评论的启发，它可能很简单：

```
var exec = require('child_process').exec;
exec('coffee -cw my_file.coffee').stdout.pipe(process.stdout); 
```

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2014-07-29T11:54:27.117

我想补充一点，从生成的进程输出缓冲区字符串的一个小问题`console.log()`是它添加了换行符，这可以将生成的进程输出分散到其他行上。如果您输出`stdout`or `stderr`with`process.stdout.write()`而不是`console.log()`，那么您将“按原样”从生成的进程中获得控制台输出。

我在这里看到了该解决方案： [Node.js: print to console without a trailing newline?](https://stackoverflow.com/questions/6157497/node-js-printing-to-console-without-a-trailing-newline)

希望对使用上述解决方案的人有所帮助（这对于实时输出来说是一个很好的解决方案，即使它来自文档）。

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2017-10-07T06:26:11.710

我发现向执行此操作的实用程序添加自定义 exec 脚本很有帮助。

实用程序.js

```
const { exec } = require('child_process')

module.exports.exec = (command) => {
  const process = exec(command)

  process.stdout.on('data', (data) => {
    console.log('stdout: ' + data.toString())
  })

  process.stderr.on('data', (data) => {
    console.log('stderr: ' + data.toString())
  })

  process.on('exit', (code) => {
    console.log('child process exited with code ' + code.toString())
  })
} 
```

应用程序.js

```
const { exec } = require('./utilities.js')

exec('coffee -cw my_file.coffee') 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-11-11T17:15:36.360

在查看了所有其他答案后，我得出了以下结论：

```
function oldSchoolMakeBuild(cb) {
    var makeProcess = exec('make -C ./oldSchoolMakeBuild',
         function (error, stdout, stderr) {
             stderr && console.error(stderr);
             cb(error);
        });
    makeProcess.stdout.on('data', function(data) {
        process.stdout.write('oldSchoolMakeBuild: '+ data);
    });
} 
```

有时`data`会是多行，所以多行的`oldSchoolMakeBuild`标题会出现一次。但这并不足以让我改变它。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-05-15T07:06:37.140

child_process.spawn 返回一个带有 stdout 和 stderr 流的对象。您可以点击 stdout 流来读取子进程发送回 Node.js 的数据。作为流的标准输出具有流具有的“数据”、“结束”和其他事件。当您希望子进程将大量数据返回到 Node 时，spawn 最适合 - 图像处理，读取二进制数据等。

所以你可以使用下面使用的 child_process.spawn 来解决你的问题。

```
var spawn = require('child_process').spawn,
ls = spawn('coffee -cw my_file.coffee');

ls.stdout.on('data', function (data) {
  console.log('stdout: ' + data.toString());
});

ls.stderr.on('data', function (data) {
  console.log('stderr: ' + data.toString());
});

ls.on('exit', function (code) {
  console.log('code ' + code.toString());
}); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-04-27T09:02:24.847

这是一个用 typescript 编写的异步辅助函数，似乎对我有用。我想这不适用于长期存在的过程，但对某人来说仍然很方便？

```
import * as child_process from "child_process";

private async spawn(command: string, args: string[]): Promise<{code: number | null, result: string}> {
    return new Promise((resolve, reject) => {
        const spawn = child_process.spawn(command, args)
        let result: string
        spawn.stdout.on('data', (data: any) => {
            if (result) {
                reject(Error('Helper function does not work for long lived proccess'))
            }
            result = data.toString()
        })
        spawn.stderr.on('data', (error: any) => {
            reject(Error(error.toString()))
        })
        spawn.on('exit', code => {
            resolve({code, result})
        })
    })
} 
```

# less - .less：不编译变量文件

> ID：10232193
> 
> 赞同：0
> 
> 时间：2012-04-19T16:07:27.050
> 
> 标签：less

在 Windows 上，我使用 WinLESS 来编译我的 .less 文件，但我遇到了一个小问题。

我有几个文件可以导入我的核心 variables.less 文件。它只有变量。当 WinLESS 编译时，它也会生成一个空白 variables.css 文件。有没有办法阻止创建这个空白文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:24:11.773

如果您有最新版本（1.3.0），那么不，恐怕没有。

但是您应该在[https://github.com/dotless/dotless上提出一个错误](https://github.com/dotless/dotless)

我是他们的开发人员，我很快就会看看..

[编辑]

有一些想要的行为 - 如果您更改文件并且它从非空变为空，您会希望它更新。但是，如果输入文件是通配符并且输出为空并且文件不存在，则可能不应该创建它。

如果 less 文件中只有一个错误导致它什么也不输出怎么办？但是这个讨论应该转移到一个 github bug 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:13:21.177

你确定你的文件在winless窗口中没有被选中吗？

我在下面的屏幕截图中使用它并且没有得到空文件。

![无胜截图](../Images/1e60ffd77713a78194dc70de299e74c4.png)

# r - 使用对应于表达式的字符向量作为函数的参数

> ID：10232195
> 
> 赞同：4
> 
> 时间：2012-04-19T16:07:32.760
> 
> 标签：r, dataframe

我有以下代码，

```
z <- data.frame(a=sample.int(10),b=sample.int(10),c=sample.int(10))
letter <- c("a","c","b") # this will be used as the argument to a function
vec <- unlist(lapply(1:length(letter), 
              function(x) cat(paste("z[[letter[",x,"]]],",sep=""))))
vec[length(vec)] <- paste("z[[letter[",length(vec),"]]]",sep="") 
```

最后：

```
> vec    
[1] "z[[letter[1]]]," "z[[letter[2]]]," "z[[letter[3]]]" 
```

我想使用下面的代码`vec`来订购 dataframe 的行，`z`

```
z.sort <- z[with(z, order(???)),] 
```

如何获取`vec`要评估的字符向量作为 的参数`order`？`letter`考虑到, 用于形成`vec`将是函数的参数，有没有更好的方法来做到这一点？

期望的输出是：

```
 a  b  c
5   1  1  9
10  2 10  2
1   3  7  1
9   4  2  5
8   5  8  6
2   6  4  3
4   7  9 10
3   8  3  8
6   9  5  7
7  10  6  4 
```

或作为`dput`输出：

```
structure(list(a = 1:10, b = c(1L, 10L, 7L, 2L, 8L, 4L, 9L, 3L, 5L, 6L), c = c(9L, 2L, 1L, 5L, 6L, 3L, 10L, 8L, 7L, 4L)), .Names = c("a", "b", "c"), row.names = c(5L, 10L, 1L, 9L, 8L, 2L, 4L, 3L, 6L, 7L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T16:53:15.207

这是您想要的（使用不同的随机数据）：

```
> z[do.call(order, z[,letter]),]
    a  b  c
5   1  2  1
4   2  4  8
1   3  3  9
6   4  6  3
8   5  8  5
10  6  1  4
2   7  5  7
3   8 10  2
9   9  7  6
7  10  9 10 
```

`do.call`让我们将一个列表作为参数发送给一个函数，因此我们可以重新排序 of 的列`z`并将它们发送给`order`using `do.call`，因为 a`data.frame`只是一种特殊的列表。

在函数中没有问题：

```
my.reorder <- function(dat, cols) { dat[do.call(order, dat[,cols]),] } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:28:30.303

稍微澄清一下你的所作所为会有很大帮助，但有一些想法......

在您的`sapply`通话中，您可以通过以下方式大大简化：

```
vec <- sapply(letter, function(x) paste('z[["',x,'"]]',sep='')) 
```

除非您尝试查看输出并对其进行分配，否则 cat 步骤是不必要的……但是最好使用使用`print`. 你可以通过使用得到你正在谈论的排序`eval(parse(text=...))`

```
z[order(eval(parse(text=vec[1])),] 
```

并将每个排序作为一个列表：

```
lapply(vec, function(x) z[order(eval(parse(text=x))),]) 
```

但是...如果按字母中指定的每一列对 data.frame 进行排序是目标：

```
lapply(letter, function(x) z[order(z[[x]]),]) 
```

为您提供与上述所有繁琐步骤相同的输出。使用类似的东西`eval(parse(text=...))`经常意味着你在做一些愚蠢的事情，应该重新考虑你的步骤，因为很可能有一个更直接的解决方案。

# linux - bashscript 多重条件

> ID：10232196
> 
> 赞同：1
> 
> 时间：2012-04-19T16:07:32.787
> 
> 标签：linux, bash, shell

我编写了一个脚本，该脚本将备份到已安装的磁盘中`/mount/data/`，我不想在复制其他文件夹时复制该文件夹，我`proc`也`sys`不想复制

```
for dir in `ls /`; do
if [ $dir != "mount" -o $dir != "proc" -o $dir != "sys" ]; then
   sh /home/bin/safecopy $dir
fi
done 
```

但条件被忽略

```
$dir != "mount" -o $dir != "proc" -o $dir != "sys" 
```

并`safecopy`尝试复制`mount`，`proc`然后`sys`……为什么？

但是当我这样做时

```
for dir in `ls /`; do
    if [ $dir != "mount" ]; then
    if [ $dir != "proc" ]; then
    if [ $dir != "sys" ]; then
       sh /home/bin/safecopy $dir
    fi
    fi
    fi
done 
```

有用！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T19:05:40.013

假设它需要在 Bash 以外的 shell 上运行，一个好方法是使用`case`，因为它支持模式匹配（与 不同`[`）：

```
for dir in /*/; do
    case $dir in
        /mount/|/proc/|/sys/)
            :
            ;;
        *)
            /home/bin/safecopy "$dir"
            ;;
    esac
done 
```

特别是对于 Bash，您可以使用：

```
shopt -s extglob
for dir in /!(mount|proc|sys)/; do
    /home/bin/safecopy "$dir"
done 
```

*   永远不要迭代，甚至`ls`在脚本中使用。
*   从不分词命令替换输出，引用它们。
*   永远不要使用反引号，使用`"$(cmd)"`.
*   切勿使用`-a`或`-o`在使用经典`test`命令 ( `[`) 时使用。使用 [ 测试 ] || [ 测试 ] ...
*   使用引号！他们在几个重要的地方失踪了。
*   `safecopy`如果不需要特殊参数，则不必用“sh”调用“ ” `sh`。向脚本添加一个 shebang 并像任何其他命令一样调用它，或者如果它是一个库，则获取它并直接使用它的函数。

# objective-c - Xcode 4.3 断点记录对象描述

> ID：10232201
> 
> 赞同：3
> 
> 时间：2012-04-19T16:08:02.593
> 
> 标签：objective-c, xcode, xcode4.3, lldb

我想从各地的 NSLogging 转移到使用断点来记录性能影响不排除它的地方。

我知道我可以只是`po`一个带有*Debugger Command操作的对象，而且我知道我可以通过选择**Log Message*操作来记录任何字符串。

而且我认为我应该能够通过选择*Log Message*并输入类似`SomeText giving context for object description: @(const char *)[[anObject description] UTF8String]@`. 不幸的是，这似乎不起作用，并且总是给我我认为是指向描述字符串的指针。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:41:27.907

这有点棘手，但我认为这会奏效。将断点**操作**设置为调试器命令。然后将此文本用作操作：

```
po (NSString *) [@"Some text describing: " stringByAppendingString:(NSString *)[anObject description]] 
```

在调试器中工作时，您必须始终非常小心地转换返回类型。GDB 和 LLDB 都有。

我喜欢你使用断点来避免性能下降的想法，但这也意味着只有在连接到调试器时才会打印你的日志。虽然 NSLogs 会将它们的输出缓冲到系统日志中，但可以从 Xcode 中的 Organizer (Devices) 中查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T16:28:38.327

***（编辑：我错过了问题的重点，这不是答案）***

我认为最好使用[`DebugLog`](http://www.karlkraft.com/index.php/2009/03/23/114/). 它是一个*宏*，您可以轻松地禁用它（当您在调试版本中`def`-ine时它​​处于打开状态，当您不使用时它处于关闭状态）。因此，没有性能下降（恰恰相反）。`DEBUG``define`

只需更换

```
NSLog(@"Hello, World!"); 
```

和

```
DebugLog(@"Hello, World!"); 
```

而不是

```
19/4/12 8:55:52.949 PM Dictionary: Hello, World! 
```

你会得到：

```
BetterDictionary.m:737 Hello, World! 
```

*（它显示了哪个文件，甚至哪一行记录了它）*

这更有趣。`undefine`为您的生产构建调试，*根本*`DebugLog`不会被调用。

 *别忘了`#import 'DebugLog.h'`。*

# asp.net - 使用 CSS 为 ASP.Net 表单设置样式

> ID：10232210
> 
> 赞同：0
> 
> 时间：2012-04-19T16:08:46.660
> 
> 标签：asp.net, css

我正在将网站从纯 html 转换为 ASP.Net。

我在网站 frmRegister 和 frmLogin 有两种表格

我有像这样的每一个的css......

```
form#frmRegister .floatRight input{
width: 100%;
font-family: Arial, Helvetica, sans-serif;
font-size: 0.9em;
border: 1px solid #a1d19d;
font-weight: normal;
}

form#frmRegister .textRow input, form#frmRegister .textRow textarea, form#frmLogin                 .textRow input, form#frmLogin .textRow textarea, form#frmRegister .textRow select{
width: 90%;
 font-family: Arial, Helvetica, sans-serif;
 font-size: 0.9em;
 border: 1px solid #a1d19d;
} 
```

但是因为 asp 将表单重命名为 aspNetform，所以不应用样式。

我尝试将 aspNetform 添加到 css 中，但随后每个表单都获得了相同的样式。

我正在使用母版页顺便说一句。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T16:11:32.753

不要通过 ID 设置 CSS 样式。请改用[CSS 类](http://www.tizag.com/cssT/class.php)。

```
<form id="myForm" runat="Server" class="someClass"> 
```

在 CSS 中：

```
.someClass {background-color: blue; color:red; } 
```

虽然从技术上讲，我从未将 css 应用于表单，所以我不能 100% 确定上述方法是否有效。如果我需要这样做，我会在表单中嵌套一个 div，并将样式应用于 div。所以我会改变

```
<form id="myForm" runat="Server" class="someClass">
...
</form> 
```

至

```
<form id="myForm" runat="Server" >
   <div class="someClass">
      ...
   </div>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T16:11:25.100

尝试根据类名而不是 ID 给出样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T16:11:01.983

I don't work with web forms, so there may be a better solution, but you could just address your forms via CSS classes rather than ids.

E.g., add a class `frmRegister` to that form tag, and then address it in CSS like this:

```
form.frmRegister .floatRight input{ width: 100%; 
.... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T16:12:25.133

您是否尝试过`ClientID`控件的属性？

同样在您的 CSS 上，您可以执行以下操作：

```
form#<%=myControl.ClientID%>{
    /* css in here */
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T16:12:41.567

是的，表单代表网络表单应用程序中的一个特殊元素。最好只定义一个类并将其应用于您的表单，或者甚至在表单中放置一个 div 并对其进行样式设置。

此外，与常规 HTML 相比，一大优势是您可以将所有这些内容粘贴到母版页中。这样，您可以只在一个地方（母版页）调整您的整体页面布局，并将这些更改反映在每个页面上。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T16:16:31.293

您是在页面/母版页中嵌入样式还是在外部文件中？如果您将样式添加到母版页，它将影响其所有子页。

# android - Android 4 ICS Ice Cream Sandwich - 包含表单的 iframe

> ID：10232211
> 
> 赞同：10
> 
> 时间：2012-04-19T16:08:48.880
> 
> 标签：android, forms, iframe, android-browser

当用户聚焦时，Android 4 会重复输入。这个重复的输入位于真实输入之上，它的功能非常正常。这很奇怪，但是好的，它似乎有效。

但是，如果这些输入位于 iframe 中，则复制的输入将不再呈现在原始输入之上，而是呈现在不同的位置。

屏幕截图（重复输入包含蓝色边框，左上角）：![重复的输入包含蓝色边框，左上角](../Images/f19270217785e3af896225d7c79f4c6c.png)

据我所知，它实际上是在渲染这个重复的输入，就好像父 HTML 文档根本不存在一样。例如，如果您在 iframe 内添加一些 margin-top，则重复输入会考虑到这一点。

我为您的调试乐趣创建了一个现场示例：

[http://ghettocooler.net/stuff/code/android-ics-iframe/](http://ghettocooler.net/stuff/code/android-ics-iframe/)

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T07:23:32.043

只花了几个小时。davethegr8 上面的线程现在有了解决方案。解决我遇到的问题所需的一切是：

```
input {
    -webkit-user-modify: read-write-plaintext-only;
} 
```

在 HTC One X 默认浏览器上进行了测试，它运行良好。

# android - Android 中的活动和简单表单之间的根本区别是什么？

> ID：10232214
> 
> 赞同：1
> 
> 时间：2012-04-19T16:09:03.737
> 
> 标签：android, forms, view, android-activity

我对 Android 非常陌生，但在过去的两三周里，我已经设法弄清楚它的大部分内容以及事情是如何运作的。但是，有一件事仍然困扰着我 - 活动和简单表单之间的基本区别是什么？好吧，我知道 Android 没有“表单”之类的东西，但我的意思是元素的全屏布局，它有一个底层类，它的所有功能都在其中执行，而不是在进程范围的类中执行（准确地说是活动）。

据我了解，Activity 是一个单独的进程，由操作系统实例化以执行一些基本独立于整个应用程序的操作。这也意味着我们只能运行应用程序的一个活动，它仍将执行其所有功能，而无需加载整个应用程序。例如，如果我们有一个电影播放器​​也可以将电影从一种编解码器转换为另一种，我们可以将该功能实现为单独的 Activity，以便其他应用程序（如文件管理器）也能够**仅**使用该Activity 在编解码器之间转换电影活动，而不是整个应用程序。

这似乎非常简单。问题是 - 为什么每个人都使用单独的活动来实现**无法**与应用程序分离的功能？换句话说，人们通常使用我认为在同一流程中使用简单**表单**更合适的活动。例如，我看到人们使用单独的 Activity 来处理应用程序设置之类的事情，这显然不会在应用程序本身之外启动，或者编辑特定于应用程序的数据，这也不会在应用程序之外完成，因为要编辑的数据应该从只有应用程序知道的列表中选择。

根据我的经验的另一个例子 - 单位转换器应用程序。它有一个带有单位类别 GridView 的主菜单，在每个类别中都有一个单位列表，通过单击任何单位，我们有一个“计算器”表单，用于输入我们想要转换的值。如果我像每个人建议的那样一直这样做，我将有三个活动 - 一个用于主菜单，一个用于单元列表，一个用于输入值。但为什么？为什么我要独立于应用程序启动这三个活动中的任何一个？如果我想启动主菜单 Activity - 那么为什么不启动整个应用程序呢？如果我只想要一个单位列表 - 再次，只需启动整个应用程序，它' 不像某些 Facebook 客户端会在压力单位之间转换值（因为单位列表一次只涵盖一个类别）。并且为计算器启动一个活动根本行不通，因为它应该返回到列表以执行转换，并且您没有启动任何列表活动。

无论如何，即使我错了并且人们明智地使用它，仍然存在一个问题，即 Android SDK 并没有像我习惯的那样真正为**表单提供任何支持。**是的，有 ViewAnimator、ViewSwitcher 等。但它们所做的只是在它们的位置切换布局，而这几乎不会在表单之间切换。因此，至少接近该功能的唯一选择是使用活动。我们回到广场一。

所以简单地说 - 我是否遗漏了 Android 哲学中的某些内容？因为我很确定对应用程序中的每个表单都使用单独的 Activity（结果是单独的进程）是一种矫枉过正的做法。如果确实如此，而且每个人都知道——为什么 Android 没有任何实质性的表单切换机制？

提前感谢您对此问题的任何澄清。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T16:31:05.827

活动不会在单独的进程中产生（除非您明确告诉它）。APK 中的所有内容都将在您的进程中生成。即使另一个应用程序出于某种原因正在使用您的活动。

您可以通过不在清单中为其分配任何意图过滤器来使您的 Activity “有效”地对您的应用程序私有。

对于给出的示例，表单等同于活动。当您深入研究 Android 时，这并不是一个普遍的说法，但对于初学者来说，这是一个不错的类比。另一个常见的类比是，活动更像是网页，而不是传统的基于表单的 UI。

# sql-server - Conditionally setting visibility-toggling in SSRS

> ID：10232217
> 
> 赞同：1
> 
> 时间：2012-04-19T16:09:05.390
> 
> 标签：sql-server, reporting-services, reporting, ssrs-2008

I have a report in SSRS 2008 R2 that lists medications and prescriptions. The prescriptions are hidden unless you click on the medication + box to show them.

Now, in some cases, we don't have any prescriptions listed for a given medication -- they're managed by an external provider, but we want to track their existence anyway. This leaves me with the case where we still have the + box, but clicking on it shows an empty line. Is there any way to conditionalize the ability to toggle the line's visibility? Thanks.

ETA: Ok, I just figured out a partial answer to this. I had a spare textbox available, so I added the text "Show scrips" to it and made that the controlling box for the toggle, and then swapped its own visibility depending on whether there were actually scrips to show. However, this makes the borders go away, as well as the contents. Short of removing all the borders (which might be the proper solution, actually), any suggestions?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T17:42:58.460

[这是](http://social.technet.microsoft.com/Forums/en-US/sqlreportingservices/thread/563e6d9e-c824-4719-933e-37306a3b652f)一个讨论此问题的线程：您基本上将 +/- 放入另一列并根据是否有数据显示/隐藏它。

# ruby-on-rails-3 - How can I get an ActiveRecord query to ignore nil conditions?

> ID：10232220
> 
> 赞同：3
> 
> 时间：2012-04-19T16:09:15.950
> 
> 标签：ruby-on-rails-3, activerecord

In order to avoid having to construct complicated dynamic SQL queries, I'd like to be able to just pass in nil values in my conditions, and have those ignored. Is that supported by ActiveRecord?

Here is an example.

```
event = Event.find(:all, :conditions => { 
                                          :title       => params[:title],
                                          :start_time  => params[:start_time], 
                                          :end_time    => params[:end_time]
                                        }).first 
```

In that particular case, if params[:start_time] is set to nil, ActiveRecord will search for those Events that have their start_time set to null. Instead, I'd like it to just ignore start_time. How do I do that?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T16:21:19.963

您不必“创建复杂的动态 SQL 查询”来做您需要的事情。只需单独构建条件散列，并在创建时或创建散列后排除空值。

```
conditions = {}
conditions[:title] = params[:title] unless params[:title].blank?
conditions[:start_time] = params[:start_time] unless params[:start_time].blank?
conditions[:end_time] = params[:end_time] unless params[:end_time].blank? 
```

或者

```
conditions = {:title => params[:title], :start_time => params[:start_time], :end_time => params[:end_time]}
conditions.delete_if {|k,v| v.blank? } 
```

或者

```
conditions = params.reject {|k,v| !([:title, :start_time, :end_time]).include?(k) } 
```

但只有当键实际上是符号时，最后一种形式才有效。在 Rails 中，params 哈希是一个 HashWithIndifferentAccess，它允许您将文本键作为符号访问。当然，如果需要，您可以只使用键数组中的文本值来包含。

然后使用您预先构建的条件哈希查询：

```
event = Event.find(:all, :conditions => conditions).first 
```

# c - Create Window without Registering a WNDCLASS?

> ID：10232221
> 
> 赞同：6
> 
> 时间：2012-04-19T16:09:16.933
> 
> 标签：c, windows, winapi

Is it absolutely necessary to always build and register a new WNDCLASS(EX) for your application? And then use the lpszClassName for the main window?

Isn't there some prebuilt class name we can use for a main window, like there is "Button" and "Edit" for buttons and text-boxes etc.?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T17:01:05.267

您可以使用对话框资源创建迷你应用程序，使用 CreateDialog() 而不是 CreateWindow()。样板代码可能如下所示，减去所需的错误检查：

```
#include "stdafx.h"
#include "resource.h"

INT_PTR CALLBACK DlgProc(HWND hDlg, UINT message, WPARAM wParam, LPARAM lParam)
{
    switch (message)
    {
    case WM_INITDIALOG: 
        return (INT_PTR)TRUE;
    case WM_COMMAND:
        if (LOWORD(wParam) == IDOK || LOWORD(wParam) == IDCANCEL) {
            DestroyWindow(hDlg);
            PostQuitMessage(LOWORD(wParam)-1);
            return (INT_PTR)TRUE;
        }
        break;
    }
    return (INT_PTR)FALSE;
}

int APIENTRY _tWinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPTSTR lpCmdLine, int nCmdShow) {
    HWND hWnd = CreateDialog(hInstance, MAKEINTRESOURCE(IDD_DIALOG1), NULL, DlgProc);
    if (hWnd == NULL) DebugBreak();
    ShowWindow(hWnd, nCmdShow);
    UpdateWindow(hWnd);
    MSG msg;
    while (GetMessage(&msg, NULL, 0, 0)) {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
    return (int) msg.wParam;
} 
```

假设您使用 id IDD_DIALOG1 使用资源编辑器创建了一个对话框。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T16:11:06.217

There are no pre-defined window classes for top-level application windows. You must register a window class for your application, or use a dialog.

# php - Facebook Image Upload error: "Invalid OAuth access token signature"

> ID：10232232
> 
> 赞同：0
> 
> 时间：2012-04-19T16:09:56.423
> 
> 标签：php, facebook

I am trying to upload a photo using a facebook app. The code is

```
$fname = FULL_PATH_TO_FILE."/home_bg.jpg";
$attachment =  array(
    'access_token' => $facebook->getAccessToken(),
    'name' => '',
    'description' => '',
    'start_time' => '',
    'link' => '',
    'source'=> '@'.$fname
    /*...*/
);

/*Send the data*/
$data = $facebook->api('/'.$social_id.'/photos', 'post', $attachment); 
```

The application has a scope of: offline_access,read_stream,publish_stream,user_about_me,manage_pages

Is there something I am missing? Using the same credentials I can post to my wall without a problem.

Thanks for your time.

# php - How to cache view files into file.html on codeigniter

> ID：10232236
> 
> 赞同：1
> 
> 时间：2012-04-19T16:10:06.153
> 
> 标签：php, file, codeigniter, caching

I intend to save all views files generated by Codeigniter on my desktop; I need to output the views into files like home.html, single.html, page.html inside a folder. Is there an solution for this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:29:31.227

实际上，您可能会将视图作为数据返回，只需将其分配给变量即可。

```
$string = $this->load->view('myfile', $data, true); 
```

只要得到这个响应，创建一个文件并上传到服务器（使用 fwrite 或 ftp）。

下面是一个简单的例子：

```
<?php
$file = '/var/www/whatever/upload_dir/file.html';
$string = $this->load->view('myfile', $data, true);
// Write the contents back to the file
file_put_contents($file, $string );
?> 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T16:14:52.150

`TRUE`您可以通过在调用时提供第三个参数（布尔值）来加载视图并将其作为字符串返回[`$this->load->view()`](http://codeigniter.com/user_guide/general/views.html)。从那里，您可以调用[`file_put_contents()`](http://php.net/manual/en/function.file-put-contents.php)将字符串写入文件。

```
$view_string = $this->load->view('some_view', '', TRUE);
file_put_contents('filename', $view_string); 
```

您还可以使用[CodeIgniter File Helper](http://codeigniter.com/user_guide/helpers/file_helper.html)`write_file()`提供的将字符串写入文件。

# java - I want to return meaningful numbers with Math.random()

> ID：10232237
> 
> 赞同：-4
> 
> 时间：2012-04-19T16:10:10.703
> 
> 标签：java, math, random

> **Possible Duplicate:**
> [Java: generating random number in a range](https://stackoverflow.com/questions/363681/java-generating-random-number-in-a-range)

I am using `Math.random()` in java. But always it returns less than 0\. Such as 0.4454590405954

Is there a way to return meaningful numbers as what i want.

For example i want to return numbers which values are 0 to 100\. How i can do it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:11:21.067

You can use [Random.nextInt(int n)](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html#nextInt%28int%29) object to return int 0 - 100

> Returns a pseudorandom, uniformly distributed int value between 0 (inclusive) and the specified value (exclusive), drawn from this random number generator's sequence.

For example

```
Random random = new Random();
int myRandom = random.nextInt(101);
// do magic 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T16:13:06.207

使用以下命令获取 0 到 100 之间的整数：

```
Random r = new Random();
int x = r.nextInt(101); // from 0 (inclusive) to 101 (exclusive) 
```

# javascript - How can I ensure that my Submenu does not disappear when I hover out or add a delay before it disappears

> ID：10232248
> 
> 赞同：2
> 
> 时间：2012-04-19T16:11:12.860
> 
> 标签：javascript, jquery, html, css, navigation

I have a CSS3 Navigation Menu with no Javascript, I like how it is right now but there is one problem and the users are getting bothered with it.

The problem is that when a user hover over a Menu Link the submenu pops up which is exacly what I want but If user move the mouse arrow away from the submenu or the menu link, its dispairs ULTRA fast. It's very annoying and I have no Idea how to fix this, there is two solutions one way is to always show the submenu the other solution is that when a user hover out from the submenu the submenu should atleast wait 5-10 secs before disappearing and also if you hover out and hover back the submenu should stay. But I have no idea how to do it.

Here is the code and example try it out, any solutions is appreciated!

[http://jsfiddle.net/nPdNd/](http://jsfiddle.net/nPdNd/) expand the result window in Jsfiddle to see the whole nav menu

Thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:25:37.003

Multiple solutions exist to address your problem:

1.  Use css-transitions to delay disappearance of your submenu (you mentioned in chat that you don't have access to stylesheets... maybe try using inline styling? It's not the best idea, but maybe you can live with it):

    [http://www.w3schools.com/css3/css3_transitions.asp](http://www.w3schools.com/css3/css3_transitions.asp)

    [https://developer.mozilla.org/en/CSS/CSS_transitions](https://developer.mozilla.org/en/CSS/CSS_transitions)

    [http://www.w3.org/TR/css3-transitions/](http://www.w3.org/TR/css3-transitions/)

2.  If you have jQuery, you can use `.animate()` to do the same thing:

    [http://api.jquery.com/animate/](http://api.jquery.com/animate/)

    Take a look at `.stop()` too:

    [http://api.jquery.com/stop/](http://api.jquery.com/stop/)

3.  If all else fails, you can try playing around with `setTimeout();`

    [https://developer.mozilla.org/en/DOM/window.setTimeout](https://developer.mozilla.org/en/DOM/window.setTimeout)

    [http://www.w3schools.com/js/js_timing.asp](http://www.w3schools.com/js/js_timing.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T22:29:19.737

Example: [http://jsfiddle.net/nPdNd/40/](http://jsfiddle.net/nPdNd/40/)

Using jQuery

```
$(document).ready(function(){
    var clearli;
    $(".test").hover(function() {
        clearTimeout(clearli);
        $("ul#nav li").removeClass('current');
        $(this).addClass('current');
    }, function() {
        var getthis = $(this);
        clearli = setTimeout(function() {
           $(getthis).removeClass('current');
        }, 500);
    });
}); 
```

Changed CSS

`ul#nav li:hover > ul {` to `ul#nav li.current > ul {`

`ul#nav li:hover > ul li a {` to `ul#nav li.current > ul li a {`

EDIT: I changed the selector due to a bug to `.test` and added class test to the `<li>`

EDIT2: I feel stupid, I forgot to stop the timeout counter. Edited above.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T10:47:26.140

this is ONLY an example - [http://jsfiddle.net/nPdNd/22/](http://jsfiddle.net/nPdNd/22/)

i would suggest you experiment yourself, until you get a desired result

this example is based on `mouseenter`/`mouseleave` events:

```
$("#nav li").mouseenter(function(){
   $(this).children('#sub').show("slide", { direction: "up" }, 300);
});
$("#nav li,#sub").mouseleave(function(){
   $(this).children('#sub').hide("slide", { direction: "up" }, 300);
}); 
```

it is also uses JQuery UI

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T21:34:27.277

Hop, here is your jsfiddle modified: [http://jsfiddle.net/Ralt/nPdNd/25/](http://jsfiddle.net/Ralt/nPdNd/25/)

Now, as you can see, it's far from perfect. You shouldn't change the style property, but rather add then remove a class, but you get the idea of how to do that.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T09:44:51.193

Please add this script in you page , This is easy way Step 1-

Add comon jquery in you page

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script> 
```

Step 1- Add this script in your page -

```
<script type="text/javascript">
jQuery(document).ready(function() {
            $('ul#nav li').hover(function()
                          {
                          $(this).find('ul').stop(true,true).slideDown()
                          },
                          function()
                          {
                          $(this).find('ul').stop(true,true).slideUp()
            });
});

</script> 
```

I do have little changes in your css

Demo [http://jsfiddle.net/nPdNd/28/](http://jsfiddle.net/nPdNd/28/)

your code (li:hover)not work ie6 , did u check it ?

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-24T05:05:56.523

Check it.... [http://jsfiddle.net/lakshmipriya/nPdNd/31/](http://jsfiddle.net/lakshmipriya/nPdNd/31/)
Is this speed is ok for you....

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-25T00:05:29.477

CSSS transitions would be the only way to do this with only CSS. Simply set the transition-delay, then no CSS change will take effect until the delay clock is done. The only problem with this is IE, which does not support CSS transitions.

[https://developer.mozilla.org/en/CSS/transition-delay](https://developer.mozilla.org/en/CSS/transition-delay)

Other than this you will need to resort to JavaScript based menus, implementations of which can be found all over the internet.

# php - php xPath 代码优化

> ID：10232250
> 
> 赞同：0
> 
> 时间：2012-04-19T16:11:13.900
> 
> 标签：php, dom, optimization, xpath

我正在为一个有点慢的网站编写一个页面抓取工具，但有很多信息我想用于小部件目的（在他们的许可下）。目前，执行和解析我到目前为止所抓取`4-5 minutes`的所有内容都需要大致执行和解析。`~150 pages`这将是一个`crontab`'d 事件，并在生成时使用临时表，然后在完成时复制到“实时”表，因此从客户端的角度来看，这是一个无缝过渡，但是您能找到一种加快速度的方法我的代码，可能吗？

```
//mysql connection stuff here
function dnl2array($domnodelist) {
    $return = array();
    $nb = $domnodelist->length;
    for ($i = 0; $i < $nb; ++$i) {
        $return['pt'][] = utf8_decode(trim($domnodelist->item($i)->nodeValue));
        $return['html'][] = utf8_decode(trim(get_inner_html($domnodelist->item($i))));
    }
    return $return;
}

function get_inner_html( $node ) { 
    $innerHTML= ''; 
    $children = $node->childNodes; 
    foreach ($children as $child) { 
        $innerHTML .= $child->ownerDocument->saveXML( $child ); 
    } 

    return $innerHTML; 
}

// NEW curl instead of file_get_contents()
    $c = curl_init($url);
    curl_setopt($c, CURLOPT_HEADER, false);
    curl_setopt($c, CURLOPT_USERAGENT, getUserAgent());
    curl_setopt($c, CURLOPT_FAILONERROR, true);
    curl_setopt($c, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($c, CURLOPT_AUTOREFERER, true);
    curl_setopt($c, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($c, CURLOPT_TIMEOUT, 20);

    // Grab the data.
    $html = curl_exec($c);

    // Check if the HTML didn't load right, if it didn't - report an error
    if (!$html) {
        echo "<p>cURL error number: " .curl_errno($c) . " on URL: " . $url ."</p>" .
             "<p>cURL error: " . curl_error($c) . "</p>";
    }

// $html = file_get_contents($url);
$doc = new DOMDocument;

// Load the html into our object
$doc->loadHTML($html);

$xPath = new DOMXPath( $doc );

// scrape initial page that contains list of everything I want to scrape
$results = $xPath->query('//div[@id="food-plan-contents"]//td[@class="product-name"]');
$test['itams'] = dnl2array($results);

foreach($test['itams']['html'] as $get_url){
    $prepared_url[] = ""; // The url being scraped, modified slightly to gain access to more information -- not SO applicable data to see
}
$i = 0;
    foreach($prepared_url as $url){

    $c = curl_init($url);
    curl_setopt($c, CURLOPT_HEADER, false);
    curl_setopt($c, CURLOPT_USERAGENT, getUserAgent());
    curl_setopt($c, CURLOPT_FAILONERROR, true);
    curl_setopt($c, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($c, CURLOPT_AUTOREFERER, true);
    curl_setopt($c, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($c, CURLOPT_TIMEOUT, 20);

    // Grab the data.
    $html = curl_exec($c);

    // Check if the HTML didn't load right, if it didn't - report an error
    if (!$html) {
        echo "<p>cURL error number: " .curl_errno($c) . " on URL: " . $url ."</p>" .
             "<p>cURL error: " . curl_error($c) . "</p>";
    }

// $html = file_get_contents($url);
        $doc = new DOMDocument;
        $doc->loadHTML($html);

        $xPath = new DOMXPath($doc);

        $results = $xPath->query('//h3[@class="product-name"]');
        $arr[$i]['name'] = dnl2array($results);

        $results = $xPath->query('//div[@class="product-specs"]');
        $arr[$i]['desc'] = dnl2array($results);

        $results = $xPath->query('//p[@class="product-image-zoom"]');
        $arr[$i]['img'] = dnl2array($results);

        $results = $xPath->query('//div[@class="groupedTable"]/table/tbody/tr//span[@class="price"]');
        $arr[$i]['price'] = dnl2array($results);
        $arr[$i]['url'] = $url;
        if($i % 5 == 1){
            lazy_loader($arr); //lazy loader adds data to sql database
            unset($arr); // keep memory footprint light (server is wimpy -- but free!)
        }

        $i++;
        usleep(50000); // Don't be bandwith pig
    }
        // Get any stragglers
        if(count($arr) > 0){
            lazy_loader($arr);
            $time = time() + (23 * 60 * 60); // Time + 23 hours for "tomorrow's date"
            $tab_name = "sr_data_items_" . date("m_d_y", $time);
            // and copy table now that script is finished
            mysql_query("CREATE TABLE IF NOT EXISTS `{$tab_name}` LIKE `sr_data_items_skel`");
            mysql_query("INSERT INTO `{$tab_name}` SELECT * FROM `sr_data_items_skel`");
            mysql_query("TRUNCATE TABLE  `sr_data_items_skel`");
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T00:37:54.173

听起来您主要是在处理缓慢的服务器响应速度。对于这 150 页中的每一页，即使是 2 秒，您也会看到 300 秒 = 5 分钟。加快速度的最佳方法是使用 curl_multi_* 同时运行多个连接。

因此，将 foreach 循环的开始（通过 if !html 检查）替换为：

```
reset($prepared_url); // set internal pointer to first element
$running = array(); // map from curl reference to url
$finished = false;

$mh = curl_multi_init();

$i = 0;
while(!$finished || !empty($running)){
    // add urls to $mh up to a maximum
    while (count($running) < 15 && !$finished)
    {
        $url = next($prepared_url);
        if ($url === FALSE)
        {
            $finished = true;
            break;
        }

        $c = setupcurl($url);

        curl_multi_add_handle($mh, $c);

        $running[$c] = $url;
    }

    curl_multi_exec($mh, $active);
    $info = curl_multi_info_read($mh);
    if (false === $info) continue; // nothing to report right now

    $c = $info['handle'];
    $url = $running[$c];
    unset($running[$c]);

    $result = $info['result'];
    if ($result != CURLE_OK)
    {
        echo "Curl Error: " . $result . "\n";
        continue;
    }

    $html = curl_multi_getcontent($c);

    $download_time = curl_getinfo($c, CURLINFO_TOTAL_TIME);

    curl_multi_remove_handle($mh, $c);

    // Check if the HTML didn't load right, if it didn't - report an error
    if (!$html) {
        echo "<p>cURL error number: " .curl_errno($c) . " on URL: " . $url ."</p>\n" .
             "<p>cURL error: " . curl_error($c) . "</p>\n";
    }

    curl_close($c);

    <<rest of foreach loop here>> 
```

这将保持 15 次下载同时进行，并在完成时进行处理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T17:14:27.880

无论如何——历史也是如此：请看我的评论。

至于缓存：我正在使用[dnsmasq](http://en.wikipedia.org/wiki/Dnsmasq)进行缓存。

我的设置是使用厨师的[食谱](https://github.com/till/easybib-cookbooks/tree/master/dnsmasq)，我通过 chef-solo 运行。模板包含我的配置，属性包含我的设置。这很简单。

所以美妙之处在于，这允许我将此服务器放入 DHCP（我们使用 Amazon EC2，此服务通过 DHCP 将所有 IP 分配给虚拟实例），然后我不必对我的应用程序进行任何更改即可使用它们。

我还有[另一个食谱](https://github.com/till/easybib-cookbooks/tree/master/dhcp3)要编辑`/etc/dhclient.conf`。

这有帮助吗？让我知道在哪里详细说明。

**编辑**

只是为了澄清：这不是一个 Ruby 解决方案，我只是使用 chef 进行配置管理（这部分确保服务始终设置相同，等等）。Dnsmasq 本身充当本地 DNS 服务器并保存请求以加快速度。

手动方式如下：

在 Ubuntu 上：

```
apt-get install dnsmasq 
```

然后编辑`/etc/dnsmasq.conf`：

```
listen-address=127.0.0.1
cache-size=5000
domain-needed
bogus-priv
log-queries 
```

重新启动服务并验证它是否正在运行 ( `ps aux|grep dnsmasq`)。

然后将其放入您的`/etc/resolv.conf`：

```
nameserver 127.0.0.1 
```

测试：

```
dig @127.0.0.1 stackoverflow.com 
```

执行两次，检查解决时间。第二个应该更快。

享受！;)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T16:18:33.283

首先要做的是测量从服务器下载文件所花费的时间。使用函数`microtime(true)`获取调用前后的时间戳

```
file_get_contents($url); 
```

并减去这些值。在你发现真正的瓶颈在你的代码内部而不是在网络或远程服务器端之后，你才能开始考虑一些优化。

当您说 150 个页面需要 5 分钟来加载和解析时，即每页 2 秒，我的猜测是大部分时间都用于从服务器下载页面。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T20:12:14.010

您应该考虑使用 cUrl 而不是 file_get_contents() 和 DOMDocument::loadHTMLFile，因为它要快得多。看到这个问题： [https ://stackoverflow.com/questions/555523/file-get-contents-vs-curl-what-has-better-performance](https://stackoverflow.com/questions/555523/file-get-contents-vs-curl-what-has-better-performance)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-21T20:15:29.623

您需要进行基准测试。DNS 不是问题，如果您要废弃 150 个页面，DNS 肯定会在解析器上缓存 4 分钟，您需要解析其余 149 个页面。

尝试使用 wget/curl 计时页面所有传输，您可能会惊讶于它并没有您想象的那么快。

尝试并行请求，用 4 个并行请求击中它们将使您的时间缩短到 1 分钟。

如果您确实发现这是 xpath 问题，请使用 preg_split() 甚至是带有 popen() 的 awk 脚本来获取您的值。

# javascript - jsFiddle 代码不能在 Aptana 上运行

> ID：10232253
> 
> 赞同：1
> 
> 时间：2012-04-19T16:11:20.053
> 
> 标签：javascript, mootools, slider, jsfiddle

（首先，免责声明：我是 JavaScript / MooTools 新手，所以解决方案很可能是微不足道的失误）

在一些帮助下，我能够使用 MooTools 在 jsFiddle 上放置一个简单的滑块以正常运行。它在这里-> [http://jsfiddle.net/wowenkho/uGcTx/](http://jsfiddle.net/wowenkho/uGcTx/)

现在，我想在我自己的电脑上重现它。我从这里的一些线程中了解到我必须包装 jsFiddle 代码。在 Aptana 中，我有这样的代码：

```
<html>
    <head>
            <script type="text/javascript" src="mootools_v1_2.js"></script>

            <script type="text/javascript">
                $(function()
                {
                    window.addEvent('domready',function()
                    {
                        var s = new Slider(document.id("slider-1"), document.id("slider-input-1"),
                        {
                            onChange : function(step)
                            {
                                document.id("q1_r1").set('value',step);
                                document.id("value").set('html',step);
                            }           
                        });

                        window.onresize = function () {
                            //s.recalculate();
                        };

                    });
                });
        </script>
    </head>
    <body>
        <input name="q1_r1" id="q1_r1" type="hidden">

        <span id="value">0</span>

        <p ><div class="slider" id="slider-1" tabIndex="1">
            <input class="slider-input" id="slider-input-1" />
        </div>
    </body>
</html> 
```

我知道我使用的 MooTools 版本并不完全相同（jsFiddle 使用的是 1.2.5，我使用的是 1.2.1）。我可以尝试在这里使用 1.2.5（我会同时使用），但这不是目的，因为我必须使用 1.2.1。我也知道 MooTools 运行良好，至少在理论上是这样，因为我之前制作了“hello world”并且它运行良好。

目前情况如何，我只看到跨度和一个文本框，而不是滑块。

我想我在这里遗漏了一些微不足道的东西。

提前感谢所有可能的帮助，贾夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:44:30.937

您的实现有两个问题，第一个很简单，如果您在控制台中查看您的 domready 函数没有被调用，则将其从 $function 包装器中取出。

```
 window.addEvent('domready',function()
                {
                    var s = new Slider(document.id("slider-1"), document.id("slider-input-1"),
                    {
                        onChange : function(step)
                        {
                            document.id("q1_r1").set('value',step);
                            document.id("value").set('html',step);
                        }           
                    });

                    window.onresize = function () {
                        //s.recalculate();
                    };

                }); 
```

第二个是您实际上正在使用 mootools 的插件。如果您查看您的 js fiddle，它会说使用 mootools more 1.2.5.1。在 more 部分中，您可以找到滑块类。如果您没有，则未定义滑块。因此，请确保在下载所有插件所需的核心 mootools 时，还选中更多和滑块框。在 mootools 网站上，当您转到 1.2.5 下载核心时，转到更多构建器，您可以添加它们。

# postgresql - 使 Postgres 查询更快。更多索引？

> ID：10232258
> 
> 赞同：3
> 
> 时间：2012-04-19T16:11:28.383
> 
> 标签：postgresql, postgis

我正在运行 Geodjango/Postgres 9.1/PostGIS，并且试图让以下查询（以及其他类似的查询）运行得更快。

[为简洁起见，查询被截断]

```
SELECT "crowdbreaks_incomingkeyword"."keyword_id"
       , COUNT("crowdbreaks_incomingkeyword"."keyword_id") AS "cnt" 
  FROM "crowdbreaks_incomingkeyword"
 INNER JOIN "crowdbreaks_tweet"
       ON ("crowdbreaks_incomingkeyword"."tweet_id"
          = "crowdbreaks_tweet"."tweet_id")
  LEFT OUTER JOIN "crowdbreaks_place"
    ON ("crowdbreaks_tweet"."place_id"
       = "crowdbreaks_place"."place_id") 
 WHERE (("crowdbreaks_tweet"."coordinates"
        @ ST_GeomFromEWKB(E'\\001 ... \\000\\000\\000\\0008@'::bytea)
       OR ST_Overlaps("crowdbreaks_place"."bounding_box"
                     , ST_GeomFromEWKB(E'\\001...00\\000\\0008@'::bytea)
       )) 
   AND "crowdbreaks_tweet"."created_at" > E'2012-04-17 15:46:12.109893'
   AND "crowdbreaks_tweet"."created_at" < E'2012-04-18 15:46:12.109899' ) 
 GROUP BY "crowdbreaks_incomingkeyword"."keyword_id"
         , "crowdbreaks_incomingkeyword"."keyword_id"
    ; 
```

下面是 crowdbreaks_tweet 表的样子：

```
\d+ crowdbreaks_tweet;
                       Table "public.crowdbreaks_tweet"
    Column     |           Type           | Modifiers | Storage  | Description 
---------------+--------------------------+-----------+----------+-------------
 tweet_id      | bigint                   | not null  | plain    | 
 tweeter       | bigint                   | not null  | plain    | 
 text          | text                     | not null  | extended | 
 created_at    | timestamp with time zone | not null  | plain    | 
 country_code  | character varying(3)     |           | extended | 
 place_id      | character varying(32)    |           | extended | 
 coordinates   | geometry                 |           | main     | 
Indexes:
    "crowdbreaks_tweet_pkey" PRIMARY KEY, btree (tweet_id)
    "crowdbreaks_tweet_coordinates_id" gist (coordinates)
    "crowdbreaks_tweet_created_at" btree (created_at)
    "crowdbreaks_tweet_place_id" btree (place_id)
    "crowdbreaks_tweet_place_id_like" btree (place_id varchar_pattern_ops)
Check constraints:
    "enforce_dims_coordinates" CHECK (st_ndims(coordinates) = 2)
    "enforce_geotype_coordinates" CHECK (geometrytype(coordinates) = 'POINT'::text OR coordinates IS NULL)
    "enforce_srid_coordinates" CHECK (st_srid(coordinates) = 4326)
Foreign-key constraints:
    "crowdbreaks_tweet_place_id_fkey" FOREIGN KEY (place_id) REFERENCES crowdbreaks_place(place_id) DEFERRABLE INITIALLY DEFERRED
Referenced by:
    TABLE "crowdbreaks_incomingkeyword" CONSTRAINT "crowdbreaks_incomingkeyword_tweet_id_fkey" FOREIGN KEY (tweet_id) REFERENCES crowdbreaks_tweet(tweet_id) DEFERRABLE INITIALLY DEFERRED
    TABLE "crowdbreaks_tweetanswer" CONSTRAINT "crowdbreaks_tweetanswer_tweet_id_id_fkey" FOREIGN KEY (tweet_id_id) REFERENCES crowdbreaks_tweet(tweet_id) DEFERRABLE INITIALLY DEFERRED
Has OIDs: no 
```

这是查询的解释分析：

```
 HashAggregate  (cost=184022.03..184023.18 rows=115 width=4) (actual time=6381.707..6381.769 rows=62 loops=1)
   ->  Hash Join  (cost=103857.48..183600.24 rows=84357 width=4) (actual time=1745.449..6377.505 rows=3453 loops=1)
         Hash Cond: (crowdbreaks_incomingkeyword.tweet_id = crowdbreaks_tweet.tweet_id)
         ->  Seq Scan on crowdbreaks_incomingkeyword  (cost=0.00..36873.97 rows=2252597 width=12) (actual time=0.008..2136.839 rows=2252597 loops=1)
         ->  Hash  (cost=102535.68..102535.68 rows=80544 width=8) (actual time=1744.815..1744.815 rows=3091 loops=1)
               Buckets: 4096  Batches: 4  Memory Usage: 32kB
               ->  Hash Left Join  (cost=16574.93..102535.68 rows=80544 width=8) (actual time=112.551..1740.651 rows=3091 loops=1)
                     Hash Cond: ((crowdbreaks_tweet.place_id)::text = (crowdbreaks_place.place_id)::text)
                     Filter: ((crowdbreaks_tweet.coordinates @ '0103000020E61000000100000005000000AE47E17A141E5FC00000000000003840AE47E17A141E5FC029ED0DBE30B14840A4703D0AD7A350C029ED0DBE30B14840A4703D0AD7A350C00000000000003840AE47E17A141E5FC00000000000003840'::geometry) OR ((crowdbreaks_place.bounding_box && '0103000020E61000000100000005000000AE47E17A141E5FC00000000000003840AE47E17A141E5FC029ED0DBE30B14840A4703D0AD7A350C029ED0DBE30B14840A4703D0AD7A350C00000000000003840AE47E17A141E5FC00000000000003840'::geometry) AND _st_overlaps(crowdbreaks_place.bounding_box, '0103000020E61000000100000005000000AE47E17A141E5FC00000000000003840AE47E17A141E5FC029ED0DBE30B14840A4703D0AD7A350C029ED0DBE30B14840A4703D0AD7A350C00000000000003840AE47E17A141E5FC00000000000003840'::geometry)))
                     ->  Bitmap Heap Scan on crowdbreaks_tweet  (cost=15874.18..67060.28 rows=747873 width=125) (actual time=96.012..940.462 rows=736784 loops=1)
                           Recheck Cond: ((created_at > '2012-04-17 15:46:12.109893+00'::timestamp with time zone) AND (created_at < '2012-04-18 15:46:12.109899+00'::timestamp with time zone))
                           ->  Bitmap Index Scan on crowdbreaks_tweet_crreated_at  (cost=0.00..15687.22 rows=747873 width=0) (actual time=94.259..94.259 rows=736784 loops=1)
                                 Index Cond: ((created_at > '2012-04-17 15:46:12.109893+00'::timestamp with time zone) AND (created_at < '2012-04-18 15:46:12.109899+00'::timestamp with time zone))
                     ->  Hash  (cost=217.11..217.11 rows=6611 width=469) (actual time=15.926..15.926 rows=6611 loops=1)
                           Buckets: 1024  Batches: 4  Memory Usage: 259kB
                           ->  Seq Scan on crowdbreaks_place  (cost=0.00..217.11 rows=6611 width=469) (actual time=0.005..6.908 rows=6611 loops=1)
 Total runtime: 6381.903 ms
(17 rows) 
```

对于查询来说，这是一个非常糟糕的运行时。理想情况下，我希望在一两秒内得到结果。

我已将 Postgres 上的 shared_buffers 增加到 2GB（我有 8GB 的​​ RAM），但除此之外我不太确定该怎么做。我有哪些选择？我应该做更少的连接吗？我可以在那里添加任何其他索引吗？对 crowdbreaks_incomingkeyword 的顺序扫描对我来说没有意义。它是其他表的外键表，因此上面有索引。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T16:35:28.280

从您的评论来看，我会尝试两件事：

*   提高相关列的[**统计目标**](http://www.postgresql.org/docs/current/static/runtime-config-query.html#GUC-DEFAULT-STATISTICS-TARGET)（并运行`ANALYZE`）。

    ```
    ALTER TABLE tbl ALTER COLUMN column SET STATISTICS 1000; 
    ```

数据分布可能不均匀。更大的样本可以为查询规划器提供更准确的估计。

*   使用 中的成本[**设置**](http://www.postgresql.org/docs/current/interactive/runtime-config-query.html#RUNTIME-CONFIG-QUERY-CONSTANTS)。`postgresql.conf`与索引扫描相比，您的顺序扫描可能需要更昂贵才能提供良好的估计。

尝试降低专用数据库服务器的成本`cpu_index_tuple_cost`并将其设置`effective_cache_size`为总 RAM 的四分之三。

# asp.net - ASP.NET 和 ajax 响应

> ID：10232262
> 
> 赞同：2
> 
> 时间：2012-04-19T16:11:33.810
> 
> 标签：asp.net, ajax

我有一个对服务器进行 ajax 调用（使用 jQuery）的主网页（“基本页面”）。服务器端页面（“Ajax 页面”）是一个 ASP.NET Web 表单（此处未使用 MVC）。因为（在这种情况下）我使用 GridView 在 ajax 响应中呈现数据，所以我必须包含 <form runat="server"> 标记。

我的抱怨是——当基本页面收到 AJAX 响应时，它会将其插入 DOM，但由于 AJAX 响应由包含 <form> 标记的 HTML 标记组成，这有时会导致嵌套的 html 表单，即坏的。

我意识到我可以使用 jquery 仅将响应的片段插入到基本页面 DOM 中——或者我可以使用 jquery 随后去除有问题的 <form> 标记。但这些感觉就像是笨拙的变通办法。真的没有办法阻止 ASP.NET 页面使用 <form> 标记提供响应吗？我意识到表单标签是 ASP.NET 网络表单模型的核心，但它确实使在 ASP.NET 中使用 AJAX 成为一件复杂的事情——非常容易逆流而上。微软肯定已经意识到回发/服务器端模型已成为过去？

我还意识到 Microsoft 有一些服务器端 AJAX 库可能会解决这个问题——但我仍然想知道是否有 ASP.NET 网络表单的本地解决方案。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:26:53.923

使用 WebForms 和 AJAX 多年，我能理解您的沮丧。

通常在使用 jQuery AJAX 加载 WebForm 页面时，我`ajax`会在页面周围包装一个类，只是嵌套在表单中：

```
<html>
   <head></head>
   <body>
      <form runat="server">
         <div class="ajax">
            Content here..
         </div>
      </form>
   </body>
</html> 
```

然后当我加载页面时，我只调用这个`ajax`类：

```
$("element").load("http://domain.com/webpage.aspx .ajax"); 
```

这意味着该`form`元素不会呈现到我的页面中，从而防止嵌套表单问题，但您`GridView`仍然可以成功呈现为 HTML。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T10:52:13.103

您可以将 GridView 添加到 Web 用户控件，然后将其呈现为如下字符串：

```
public static string ExecuteToString(this Control control)
{
    Page page = new Page();
    page.Controls.Add(control);

    StringBuilder sb = new StringBuilder();
    using (StringWriter writer = new StringWriter(sb))
    {
        HttpContext.Current.Server.Execute(page, writer, false);
    }
    return sb.ToString();
} 
```

这意味着您不需要将 ajax 请求指向页面。您可以使用网络服务。查询特定方法，然后动态加载用户控件，将其呈现为字符串并返回 HTML。因为您将 HTML 和代码放在用户控件中，所以您不必担心删除表单标签，并且您仍然可以像在页面上一样使用所有 asp 控件。

我不知道使用这种方法的性能成本，但我已经使用了一段时间，对我来说似乎很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-24T10:07:34.193

我正在处理同样的问题，我通过以下方式解决了它：

```
Response.Write("whatever content")
Response.End() 
```

这只会发送您在“Response.Write()”中输入的内容...您仍然可以自由更改标题等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T16:28:13.113

如果您的 ajax 服务器页面是一个 aspx 页面（例如：ajaxpage.aspx），您可以删除 ajaxpage.aspx 中的 HTML makup，除了第一行提到 Page 指令。所以它应该是这样的。

```
<%@ Page Language="C#" CodeBehind="ajaxpage.aspx.cs" Inherits="MyProject.ajaxpage" %> 
```

在后面的代码中，您可以使用 response.Write 返回数据

```
protected void Page_Load(object sender, EventArgs e)
{
   Response.Write("your markup to return here");
} 
```

如果要返回某种（干净的）HTML标记/数据的某些部分，我倾向于使用`generic handler`（例如`ajaxresponse.ashx`：）文件而不是aspx文件并从中返回数据

```
public void ProcessRequest(HttpContext context)
{
    context.Response.ContentType = "text/plain";
    context.Response.Write("<h3>Here is the Markup for UserDetails</h3>");
} 
```

您不能在 ashx 文件上使用 ASP.NET 服务器控件。而且你不能有一个页面来拥有一个没有表单标签的服务器控件（例如： GridView ）。它应该放在表单标签内。请注意，您的服务器控件（如 gridview）将仅呈现 HTML 表格标记。

就个人而言，如果我想获得一些**干净且受控的 HTML 标记**，我想使用 ajax 将其显示/注入到我的当前页面中，我将使用 ashx 处理程序并编写我的代码来输出我需要的标记。与 aspx 文件相比，ASHX 文件具有性能优势，因为它不会通过正常的 ASPX 页面生命周期（所有这些事件！）。

# rest - 寻找基于 REST 的远程文件系统

> ID：10232264
> 
> 赞同：16
> 
> 时间：2012-04-19T16:11:50.893
> 
> 标签：rest, filesystems, storage

这是一个非常开放/普遍的问题（我希望不要太笼统:)）

我正在寻找可以插入 Web 服务器（如 apache）并处理 REST 请求以存储/检索/删除文件的库/模块。类似于 Amazon 的 S3 或 Windows Azure 存储，但是是开源的。

这样的事情存在吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T20:08:04.330

OpenStack SWIFT 是亚马逊 s3 的开源克隆。它是线性可扩展的，并为数据提供 REST 接口。[http://swift.openstack.org/](http://swift.openstack.org/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T19:58:24.507

[mod_dav](http://www.webdav.org/mod_dav/) ? DAV 是原始的通用/准系统 REST。您 PUT 文件，然后您可以将它们取回或删除它们......但这本身并不能提供任何管理，也许这就是您正在寻找的。您是否研究过[OpenStack](http://www.openstack.org/)，特别是对象存储组件？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-28T20:33:00.497

[我使用Node-FSAPI](https://github.com/Fluidbyte/Node-FSAPI)解决了类似的问题，这是一个基于 NodeJS 的服务器，它将文件系统的选定部分公开为 REST api。（它不是您要求的 Apache 模块，但它解决了同样的问题。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T06:56:15.960

您是否同时在寻找分布式文件系统？如果是这样，我建议使用 Apache Hadoop 的[HDFS](http://wiki.apache.org/hadoop/HDFS)和[WebHDFS REST API](http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/WebHDFS.html)来访问文件系统。

我如何不确定这是否可以部署为 Apache 或任何其他 Web 服务器的扩展 :-( 只是想分享这个想法，如果您正在寻找一个具有保证可靠性的分布式文件系统等。

# c++ - 在 C++ 中的地图中使用地图

> ID：10232266
> 
> 赞同：1
> 
> 时间：2012-04-19T16:11:55.180
> 
> 标签：c++

我正在尝试使用以下代码在地图中使用地图；

```
 map<map <int,int>,int > multimap; 
```

现在我想插入这样的数据`multimap[1]`--->（2,3），`multimap[4]`--->（5,6）。我一直在尝试按以下方式插入它，但我想有一个我似乎无法弄清楚的语法错误！

```
 multimap.insert(pair<int,pair<int,int>(2,3)>(1)); 
```

任何帮助将不胜感激。添加后，如何使用迭代器显示值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:19:05.953

地图模板需要两个参数`map<key, value>`。密钥必须有某种方式将自己与其他密钥进行比较。`map`它使用`<`运算符，所以如果你用 a 键，你`map<int,int>`会遇到问题，因为没有`<`为任意地图定义。

尝试

```
map<int, map<int, int> > multimap; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T16:36:10.393

如果你想要一个multipmap，那么你需要使用一个multimap :) 这是声明和插入语句。

```
typedef pair<int, int> valPair;
multimap<int, valPair> mmap;

mmap.insert(make_pair(1, make_pair(2, 3)));
mmap.insert(make_pair(1, make_pair(4, 5)));

for(multimap<int, valPair>::iterator it = mmap.begin();
    it != mmap.end(); ++it)
{
    cout << "Key: " << it->first << " Vals:(";
         << it->second.first << ", " << it->second.second << ")" << endl;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T16:33:06.060

-首先，您的代码中没有多重地图 - 只是一个名为“多重地图”的地图。

-其次，结构

```
map< map<int, int>, int > multimap; 
```

不会映射 1-->2, 3，因为您使用映射作为键，使用 int 作为值。

-第三，您收到构建错误的原因是因为您的案例中的 insert() 方法需要

```
pair< map<int, int>, int > 
```

你可能想要的是这样的：

```
map< int, pair<int, int> > multimap;
pair<int, int> myPair( 2, 3 );
multimap.insert( pair< int, pair<int, int> >( 1, myPair ) );

map< int, pair<int, int> >::iterator iter = multimap.begin();
while( iter != multimap.end() )
{
    int key = iter->first;
    pair<int, int> aPair = iter->second;
    ++iter;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T16:30:44.040

在我看来，您混淆了地图和多地图，以及键和值。

如果您想要一个将键 '1' 映射到值 '(2,3)' 和 '(4,5)' 的映射，请执行以下操作：

```
multimap<int,pair<int,int>> myMap { {1,{2,3}}, {1,{4,5}} }; 
```

或在 C++03 中：

```
multimap<int,pair<int,int> > myMap;
myMap.insert(make_pair(1,make_pair(2,3)));
myMap.insert(make_pair(1,make_pair(4,5))); 
```

* * *

在遍历映射时，每个项目都引用一个对，其中第一个项目是键，第二个项目是值。

```
for(auto &i : myMap) {
    std::cout << "Key: " << i->first
      << " Value: (" << i->second.first << ',' << i->second.second << ")\n";
} 
```

或者在 C++03 中

```
for(multimap<int,pair<int,int> >::const_iterator i(myMap.begin()),end(myMap.end()); i!=end; ++i) {
    std::cout << "Key: " << i->first << " Value: (" << i->second.first << ',' << i->second.second << ")\n";
} 
```

这将打印出：

```
Key: 1 Value: (2,3)
Key: 1 Value: (4,5) 
```

# javascript - 执行 onload=fn 时的第一个参数

> ID：10232267
> 
> 赞同：0
> 
> 时间：2012-04-19T16:11:56.390
> 
> 标签：javascript

当我做 ：

`img.onload=fn;`

函数 fn 获取`argument[0] [object Event]`.

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:15:54.427

您不会避免事件对象。你拥抱他们。话虽如此，如果您不想使用它，则不必使用它。当浏览器在`onload`事件中触发时，无论您是否请求它，它都会将一个事件对象传递给处理程序。正如您所指出的，`arguments`即使您没有在处理程序参数中专门为其提供名称，它也存在于数组中。

正如其他人在他们的回答和评论中指出的那样，您可以添加另一个匿名函数来进一步从引发的事件中删除您的响应代码，但我个人认为这真的没有必要。

正如@Yoshi 在上面的评论中指出的那样，以下方法可行：

```
img.onload = function() { 
  fn.call(this) 
}; 
```

这将调用`fn`传入当前上下文`this`引用的方法。同样，我个人只是避免接触事件对象，因为这种类型的代码可能会在六周后让其他人和你自己感到困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:24:21.007

除了乔纳森桑普森的回答，一个简单的解决方法可以像这样完成

```
img.onload = function() {
   fn();
} 
```

这样做`arguments`是空的，
请参阅小提琴（使用 javascript 控制台）：http: [//jsfiddle.net/ZxSEX/](http://jsfiddle.net/ZxSEX/)

# android - 母版页 Android

> ID：10232268
> 
> 赞同：1
> 
> 时间：2012-04-19T16:12:00.793
> 
> 标签：android, android-layout

我想构建多个布局，其中每个人都有一个共同的部分（一个带有多个按钮的侧边栏）。即左侧的静态侧边栏和根据静态菜单上按钮的点击而变化的右侧动态内容。

我已经尝试过使用碎片但失败了。有谁知道我的问题的解决方案？

谢谢

基托

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:16:18.437

我认为[这篇](http://jnastase.alner.net/archive/2011/01/08/ldquomaster-pagesrdquo-in-android.aspx)文章是你需要的。我知道只发布一个网址不是一个好的回答方式，但目前没有时间填写所有细节。

# c# - Sharepoint 2010 不调用我的自定义 HttpHandler 的 ProcessRequest

> ID：10232271
> 
> 赞同：0
> 
> 时间：2012-04-19T16:12:11.447
> 
> 标签：c#, sharepoint, iis-7.5, httphandler

好吧，我知道应该调用它的是 IIS。反正; 我有一个 Sharepoint 解决方案，当在文档库上单击具有特定扩展名的文件时，它应该返回一个特殊字符串。

在相应的 web.config 文件中，我有以下内容来运行这个 HTTP 处理程序：

```
<system.webServer>
   <handlers>
       ...
       <add name="MyFileHandler" path="*.bar" verb="*" type="Foo.Example.MyHandler, Foo.Example, Version=1.0.0.0, Culture=neutral, PublicKeyToken=3b53a24010893ac2" resourceType="File" />
       ...
    </handlers>
</system.webServer> 
```

HttpHandler 类是这样的：

```
namespace Foo.Example
{
    public class MyHandler : IHttpHandler
        {   
            public MyHandler(){} //For breakpoint

            public void ProcessRequest(HttpContext context)
            {
                //Do stuff and write to response.
            }

            public bool IsReusable
            {
                get { return false; }
            }
       }
} 
```

当我尝试在 Sharepoint 上打开带有“.bar”扩展名的文件时，它返回 404。我在 ProcessRequest 中所做的事情不相关，因为当我调试处理程序时，我可以看到调用了处理程序的构造函数，但没有调用“ProcessRequest” . 除了调试器之外，我还放置了调试行（File.AppendAll），再次根据调试输出调用构造函数。

IIS 7.5.7600

Sharepoint 2010 基金会

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T08:50:11.563

原来

> 资源类型="文件"

web.config 中的处理程序标记是问题所在。删除它或将其设置为“未指定”。

这已经在[这里](https://stackoverflow.com/a/5247330/846644)提到了，不幸的是，我之前没有发现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:41:08.777

我唯一能想到的就是尝试让你的处理程序真正成为第一个。

否则，最好与 SharePoint 实际集成，而不是尝试覆盖其行为。在这种情况下，您可能应该针对您想要实现的目标发布单独的问题。

# php - XML 和 PHP5 DOM

> ID：10232272
> 
> 赞同：2
> 
> 时间：2012-04-19T16:12:19.283
> 
> 标签：php, xml, dom

我正在开发一个应用程序，我需要转换如下所示的 XML 文档（words.xml）：

```
<?xml version='1.0' encoding='ISO-8859-1'?>
<!DOCTYPE words SYSTEM "words.dtd">
<words>
<word id="word_1">Alfa</word>
<word id="word_2">Beta</word>
<word id="word_3">Gamma</word>
<word id="word_4">Delta</word>
<word id="word_5">Zeta</word>
</words> 
```

使用 PHP5 和 DOM。我希望结果是（在这种情况下）：

```
word_1 = Alfa
word_2 = Beta
word_3 = Gamma
word_4 = Delta
word_5 = Zeta 
```

我的PHP代码：

```
<?php

$xmlHitzakDok = new DOMDocument();
$xmlHitzakDok->load("words.xml");

$x = $xmlHitzakDok->documentElement;
foreach ($x->childNodes AS $item)
  {
  print $item->nodeName . " = " . $item->nodeValue . "<br />";
  }
?> 
```

我没有得到任何结果。哪个是问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:25:05.673

问题不在于`$xmlHitzakDok->documentElement`不是`<words>`元素，而是文档本身，它不包含任何数据。

我建议使用 xpath 来获取您想要的元素。

```
$xPath = new DOMXPath($xmlHitzakDok);

foreach ($xPath->query('//words/word') AS $item)
{
    echo $item->getAttribute('id') . " = " . $item->nodeValue . "<br/>";
} 
```

# javascript - 有效打破html标签

> ID：10232273
> 
> 赞同：0
> 
> 时间：2012-04-19T16:12:19.397
> 
> 标签：javascript, jquery, html

我有这个简单的标记：

```
<p> some content here </p> 
```

我想把它分解成

```
<p> some </p> content <p> here </p> 
```

使用 javascript（或 jQuery 帮助）。
我想打破 html`p`标记，以便我的特定单词（例如`content`）将超出`p`. 我想找到跨浏览器和有效的解决方案。
提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:53:25.093

```
(function () {
  $.fn.extend({
    splitAt: function (splitter) {
      this.each(function () {
        var $replacement = $(), $org = $(this);

        $.each($org.text().split(splitter), function (_, val) {
          $replacement = $replacement.add($org.clone().html(val)).add(document.createTextNode(splitter));
        });

        $org.replaceWith($replacement.slice(0, -1));
      });

      return $(this.selector, this.context);
    }
  });
}(jQuery));

$('p').splitAt('content').css('background', 'lightblue');
​ 
```

演示：http: [//jsfiddle.net/hSQ2m/6/](http://jsfiddle.net/hSQ2m/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T16:16:15.187

试试这个..只需更改选择器和要从选择器中挑选和排除的单词

```
$('p').text($('p').text().replace('content','</p>content<p>')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T16:37:53.867

我为你做了这个：

**现场演示：http:** [//jsfiddle.net/oscarj24/A4efg/1/](http://jsfiddle.net/oscarj24/A4efg/1/)

**这将适用于您想要**在`<p></p>`标签内的任何文本。

HTML：

```
<p> some content here </p>
<input type="button" id="btn" value="Do it!"/>
<br/><br/>
results will be here:
<div id="result"></div> 
```

JS：

```
$('#btn').click(function(){

    // clean the "result" div each time you invoke "click"
    $('#result').html('');

    // get the text inside "<p></p>" tags
    var str = $('p').html();

    // make an array for all elements inside tag
    // result: ["", "some", "content", "here", ""]
    var substr = str.split(' ');

    // remove "space" elements from the array
    // result: ["some", "content", "here"]
    removeFromArray(substr, '');

    // populate the "result" div where i = index, e = element
    // result:
    //   some
    //   content
    //   here
    $.each(substr, function(i, e){
         $('#result').append('<p> ' + substr[i] + ' </p>');
    });
});

/* Function to remove element from js array */
function removeFromArray(arr){
    var what, a= arguments, L= a.length, ax;
    while(L> 1 && arr.length){
        what= a[--L];
        while((ax= arr.indexOf(what))!= -1){
            arr.splice(ax, 1);
        }
    }
    return arr;
} 
```

CSS - 只是为了样式:-)

```
div#result{
   color: red; 
}​ 
```

希望这会有所帮助:-) ​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T16:16:55.343

看看[`Text.splitText`](https://developer.mozilla.org/en/DOM/Text.splitText)和例子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T16:18:37.093

尝试这个 ：

```
$('p').each(function() {
    $(this).html($(this).html().replace('content','</p>content<p>'));​
}) 
```

使用 each 循环选定的文本`p`通过获取其 HTML 并替换为来设置元素的`content`HTML`</p>content<p>`

[这里的工作示例](http://jsfiddle.net/ns5PG/1/)

**更新**

感谢@Yoshi 下面的评论......没有each（）循环的更好方法：

```
$('p').html(function (_, html) {
  return html.replace('content','</p>content<p>');
});​ 
```

[这里的例子](http://jsfiddle.net/hSQ2m/)

# asp.net-mvc - GlobalFilterCollection 的过滤器在 ControllerInstanceFilterProvider 的过滤器之前运行

> ID：10232275
> 
> 赞同：7
> 
> 时间：2012-04-19T16:12:25.933
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, asp.net-mvc-filters

我遇到了一个奇怪的行为，但我不确定我是否在正确的轨道上。

我有一个控制器，它覆盖基类`OnException`的方法。`Controller`

```
public class ControllerFiltersController : Controller {

    public ActionResult Index() {

        throw new NotImplementedException();
    }

    protected override void OnException(ExceptionContext filterContext) {

        Trace.TraceInformation(
            "ControllerFiltersController Exception: " + DateTime.Now.ToString("hh:mm:ss.fff")
        );
    }
} 
```

我还有一个自定义的 ExceptionFilter 如下：

```
public class HandleErrorCustom : IExceptionFilter {

    public void OnException(ExceptionContext filterContext) {

        Trace.TraceInformation(
            "HandleErrorCustom Exception Message: " + DateTime.Now.ToString("hh:mm:ss.fff")
        );
    }
} 
```

然后，我将其注册为全局过滤器：

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters) {

    filters.Add(new HandleErrorCustom());
} 
```

我期望*控制器实例过滤器*`ControllerInstanceFilterProvider`在全局过滤器之前运行，因为由is提供的过滤器的顺序`Int32.MinValue`和它们的范围是`FilterScope.First`.

此处还解释了：[ASP.NET MVC 3 服务位置，第 4 部分：过滤器](http://bradwilson.typepad.com/blog/2010/07/service-location-pt4-filters.html)

但结果不同：

> iisexpress.exe 信息：0：HandleErrorCustom 异常消息：06:56:49.972
> 
> iisexpress.exe 信息：0：ControllerFiltersController 异常：06:56:49.974

这是一个 ASP.NET MVC 4 应用程序，我不知道有任何更改会影响 ASP.NET MVC 3 的过滤器排序行为。我在这里缺少什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-19T16:49:14.587

这是预期的行为。

过滤器排序取决于信息流动的方向。如果信息流入到动作中，那么顺序就是你所期望的；如果信息从动作中流出，则顺序颠倒。

例如，假设您按以下顺序拥有三个过滤器：F1、F2、F3。假设这些是动作过滤器（意思是，它们正在监听 ActionExecuting 和 ActionExecuted）。系统运行它们的顺序如下：

```
F1.ActionExecuting()
F2.ActionExecuting()
F3.ActionExecuting()
Action()
F3.ActionExecuted()
F2.ActionExecuted()
F1.ActionExecuted() 
```

根据定义，错误处理程序是在操作的返回端运行的过滤器，因此它们的顺序是相反的。

# sql - 使用单一参考对地区或国家进行建模

> ID：10232280
> 
> 赞同：1
> 
> 时间：2012-04-19T16:12:45.040
> 
> 标签：sql, data-modeling, region, country

我正在为葡萄酒和其他酒精饮料的经销商开发一个网站。显然，每种葡萄酒都是在一个国家生产的，必须在 Wine table 中建模。但很多时候，一个葡萄酒也有一个产区（朗格多克、里奥哈、布戈涅等），这些产区当然与一个国家是亲子关系。存在以下选项：

- 只给葡萄酒表提供一个地区的参考问题是一些葡萄酒/威士忌没有提到一个地区，只提到一个国家

- 为酒桌提供 2 个单独的 FK 引用，分别指向 Country 和 Region 表。这引入了循环引用和冗余问题，因为国家和地区已经相关。

- 使用 Location 表和从 Wine 表到 Location 表的单个 FK 引用。Location 表实际上是一个地区或一个国家（甚至可能是一个城市），所以它有一个字段“location_type”和一个父 FK 字段，指的是它自己的 PK。对于顶级 Country 条目，父 ID 为空。这是我在互联网某处找到的示例。然而，它会使查询更加复杂。

这是一个已知问题，有什么建议吗？TIA，克拉斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:22:40.743

我也在这个领域的一个应用程序上工作。葡萄酒常见的还有次产区或产区的概念，因此您可以品尝来自法国-勃艮第-科特多尔的葡萄酒，例如。我选择了您描述的第二个选项，将 FK 引用到 Country、Region 和 Subregion。只有 Country 字段是必需的，而其他字段可以为空。该模型加剧了参照完整性的潜在问题，但它极大地促进了基于这些字段的有效查询，这是首先捕获此信息的重点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T18:09:26.940

我认为您可能希望从维度分析的角度来看待这一点，而不是严格的实体关系。也就是说，非规范化的但可能正是您正在寻找的。我会推荐 Ralph Kimball 的有关维度数据仓库的书籍，因为它们经常解决这类问题。

在您的情况下，只需创建一个“位置”维度，其中包含您可能感兴趣的所有字段，以最低粒度级别：

*   地区
*   国家
*   子国家

是两个明显的。你可能还有山坡、城市等等。

举个例子，您将有以下行：

1.  巴罗洛/意大利/皮埃蒙特
2.  NULL/意大利/皮埃蒙特
3.  NULL/意大利/NULL

葡萄酒将连接到这张桌子。

现在，您遇到了此表的维护问题。然而，葡萄酒和官方产区的世界是众所周知的，而且变化非常缓慢，所以我不认为这是一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T23:12:31.520

关于创建位置维度的好点。这种类型的模型更有效地处理分析，但对于事务系统来说更复杂。这就涉及到您是在优化模型以处理 CRUD 类型的事务还是用于聚合数据分析。

总的来说，我假设 Klaus 正在考虑为具有基本查询的事务系统建模，而不是像数据仓库这样的基于分析的应用程序。

# java - Java JFileChooser 返回选定的目录而不是浏览它

> ID：10232281
> 
> 赞同：1
> 
> 时间：2012-04-19T16:12:51.953
> 
> 标签：java, swing, user-interface, filesystems, jfilechooser

当我双击一个目录时，JFileChooser 没有打开该目录，即它没有浏览它，但它选择了该目录并返回。如何实现 JFileChooser 以便在双击时显示文件夹的内容？
如果设置了**setFileSelectionMode(JFileChooser.FILES_ONLY)**则行为符合我的需要，但我必须使用**FILES_AND_DIRECTORIES**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:40:35.820

你可以添加你自己的`MouseListener`

```
final JFileChooser fileChooser = new JFileChooser();
fileChooser.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);
fileChooser.addMouseListener(new MouseListener() {

    @Override
    public void mouseClicked(MouseEvent arg0) {

        if(arg0.getClickCount() == 2) {
            File file = fileChooser.getSelectedFile();
            if(file.isDirectory()) {
                fileChooser.setCurrentDirectory(file);
                fileChooser.rescanCurrentDirectory();
            }
            else {
                fileChooser.approveSelection();
            }
        }
    }

    //Other methods (can be empty)  
}); 
```

这将检查双击并从`JFileChooser`检查中获取所选文件是否为目录，如果它跟随它，如果它是一个文件，则返回该文件。此外，如果您选择一个目录并点击打开它会打开该目录。

# java - hibernate 可选择不自动增加 ID 字段

> ID：10232284
> 
> 赞同：0
> 
> 时间：2012-04-19T16:12:56.303
> 
> 标签：java, hibernate, auto-increment

我的“理想”情况是有一个表，在生产中（Oracle）有一个 oracle 触发器生成的自动递增 ID。然而，在单元测试中，我希望能够“只使用 H2”作为我的数据库，并让它为我自动创建数据库。但后来我失去了自动递增的 ID。是否有可能通过任何方式两者兼得？（基本上是一个可选的生成ID？）

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:40:15.443

您也可以将 ID 列定义为`auto_increment`H2 中的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T00:08:18.477

看起来您可以指定序列名称本身，它将作为 h2 中的序列“自动创建”。我认为将其定义为 auto_increment 也可以，尽管我不确定当还有一个触发器从序列中为其分配一个值时它会如何工作。我想我担心的是休眠的自动增量对于多进程应用程序来说不够好，但它可能是。

[http://www.hibernate-training-guide.com/identifiers-generators.html](http://www.hibernate-training-guide.com/identifiers-generators.html)

[https://forums.oracle.com/forums/thread.jspa?threadID=2370530](https://forums.oracle.com/forums/thread.jspa?threadID=2370530)也可能有帮助

# c# - 在运行时验证从 URI 加载的 WPF 位图图像

> ID：10232286
> 
> 赞同：3
> 
> 时间：2012-04-19T16:13:00.343
> 
> 标签：c#, wpf, xaml, code-behind, bitmapimage

我正在尝试在运行时从 URI 加载 BitmapImage。我在我想通过数据绑定替换的 XAML 用户控件中使用默认图像。这行得通。

我遇到的问题是在替换图像使用无效文件的情况下（可能是错误的 URI，或者 URI 指定了非图像文件）。发生这种情况时，我希望能够检查 BitmapImage 对象以查看它是否已正确加载。如果没有，我想坚持使用的默认图像。

这是 XAML：

```
<UserControl x:Class="MyUserControl">
    <Grid>
        <Image
            x:Name="myIcon"
            Source="Images/default.png" />
    </Grid>
</UserControl> 
```

以及相关的代码隐藏：

```
public static readonly DependencyProperty IconPathProperty =
    DependencyProperty.Register(
        "IconPath",
        typeof(string),
        typeof(MyUserControl),
        new PropertyMetadata(null, new PropertyChangedCallback(OnIconPathChanged)));

public string IconPath
{
    get { return (string)GetValue(IconPathProperty); }
    set { SetValue(IconPathProperty, value); }
}

private static void OnIconPathChanged(
    object sender,
    DependencyPropertyChangedEventArgs e)
{
    if (sender != null)
    {
        // Pass call through to the user control.
        MyUserControl control = sender as MyUserControl;
        if (control != null)
        {
            control.UpdateIcon();
        }
    }
}

public void UpdateIcon()
{
    BitmapImage replacementImage = new BitmapImage();

    replacementImage.BeginInit();
    replacementImage.CacheOption = BitmapCacheOption.OnLoad;

    // Setting the URI does not throw an exception if the URI is
    // invalid or if the file at the target URI is not an image.
    // The BitmapImage class does not seem to provide a mechanism
    // for determining if it contains valid data.
    replacementImage.UriSource = new Uri(IconPath, UriKind.RelativeOrAbsolute);

    replacementImage.EndInit();

    // I tried this null check, but it doesn't really work.  The replacementImage
    // object can have a non-null UriSource and still contain no actual image.
    if (replacementImage.UriSource != null)
    {
        myIcon.Source = replacementImage;
    }
} 
```

下面是我如何在另一个 XAML 文件中创建此用户控件的实例：

```
<!--
  My problem:  What if example.png exists but is not a valid image file (or fails to load)?
-->
<MyUserControl IconPath="C:\\example.png" /> 
```

或者，也许有人可以建议一种不同/更好的方法来在运行时加载图像。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-10T08:24:43.647

Well, `BitmapImage` class has two events, which will be raised when either download or decoding has failed.

```
yourBitmapImage.DownloadFailed += delegate { /* fall to your def image */ }
yourBitmapImage.DecodeFailed += delegate { /* fall to your def img */ } 
```

On a side note, if you're trying to implement fallback placeholder: [http://www.markermetro.com/2011/06/technical/mvvm-placeholder-images-for-failed-image-load-on-windows-phone-7-with-caliburn-micro/](http://www.markermetro.com/2011/06/technical/mvvm-placeholder-images-for-failed-image-load-on-windows-phone-7-with-caliburn-micro/) seems nice.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-10T23:43:17.487

这很粗糙，但我发现无效的 BitmapImage 的宽度和高度将为 0。

```
 BitmapImage image;
    if(image.Width > 0 && image.Height > 0) 
    {  
        //valid image 
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-10T05:21:30.473

你可以试试这个检查

```
 if (bitmapImage.UriSource==null || bitmapImage.UriSource.ToString()).Equals(""))
        {
            Console.WriteLine("path null");
        }
        else
        {
            bitmapImage.EndInit();
        } 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-20T07:48:51.783

这已经得到了回答。请看一下[这个](https://stackoverflow.com/questions/3615800/download-image-from-the-site-in-net-c)和[这个](https://stackoverflow.com/questions/1450528/net-verify-url-is-image)。我认为他们俩都在某种程度上回答了您的问题，但我更喜欢前一种方法，因为它甚至会检查远程资源的 contentType。

你也可以看看这篇[文章](https://stackoverflow.com/questions/192085/test-to-see-if-an-image-exists-in-c-sharp)。

更新：

如果是本地文件，可以通过简单地使用 Uri 或路径创建一个 Image 对象来检查这一点。如果成功，则表示该图像是有效图像：

```
try
{
    Image image = Image.FromFile(uri);
    image.Dispose();
}
catch (Exception ex)
{
    //Incorrect uri or filetype.
} 
```

# actionscript-3 - forEach 中的 AS3 dispatchEvent

> ID：10232291
> 
> 赞同：0
> 
> 时间：2012-04-19T16:13:12.503
> 
> 标签：actionscript-3, foreach, wait, dispatchevent

我已经填充了一个数组。

我需要获取该数组中的每个项目，对该项目执行一些计算，将结果推送到数组，然后移动到数组中的下一个项目，依此类推。

计算是在一个单独的类中进行的。然后当计算完成时，我发送一个事件并监听类完成。

**我正在使用 forEach 但我需要暂停 forEach 函数并在继续之前等待 dispatchEvent 侦听器，但我似乎无法让它工作。**

跟踪似乎表明 forEach 只是在数组中运行并每次都重置计算类。

这是我的代码的 jist。我从服务器上的 sql 表中填充数组，然后启动 forEach。

任何人都可以建议一个解决方案：

```
 function handleLoadSuccessful(evt:Event):void
  {
        evt.target.dataFormat = URLLoaderDataFormat.TEXT;
        var corrected:String = evt.target.data;
        corrected = corrected.slice(1,corrected.length-1);
        var result:URLVariables = new URLVariables(corrected);
        if (result.errorcode=="0") 
      {
            for (var i:Number=0; i < result.n; i++) 
            {
                liveOrderArray.push(
                {   
                    code:result["ItemCode"+i],
              qty:Number(result["LineQuantity"+i]) - Number(result["DespatchReceiptQuantity"+i])
                })                      
            }       
          liveOrderArray.forEach(allocate);
      } else {
            trace("ERROR IN RUNNING QUERY");
             }
  }        
  function allocate(element:*, index:int, arr:Array):void {                
               trace("code: " + element.code + " qty:" + element.qty );
                allocationbible.profileCode = element.code.substring(0,1);
                allocationbible.finishThk = Number(element.code.substring(1,3));
                allocationbible.longEdgeCode = element.code.substring(3,4);
                allocationbible.backingDetailCode = element.code.substring(4,5);
                allocationbible.coreboardCode = element.code.substring(5,6);
                allocationBible = new allocationbible;
                allocationBible.addEventListener("allocated", updateAllocationQty, false, 0, true);
                trace("*************************************");
            }
function updateAllocationQty (evt:Event):void {                 
                //add result to array                   
                trace(allocationbible.coreboardLongCode);               
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T22:25:21.737

您不能暂停`for..each`循环，这在 AS3 中是不可能的。所以你需要重写你的代码。

**UPD：**上次误解了你的问题。要在进一步处理之前等待计算完成，您可以在分配事件处理程序中开始处理下一个元素。像这样的东西：

```
 var currentItemIndex:int;

 function startProcessing():void {
      // population of the array
      // ...
      allocationBible = new allocationbible();
      allocationBible.addEventListener("allocated", onAllocated);

      currentItemIndex = 0;
      allocate();
 }

 function allocate():void {
      var element:* = liveOrderArray[currentItemIndex];
      // configure allocationBible
      allocationBible.process(element);
 }

 function onAllocated(e:Event):void {
      trace("Allocated: " + allocationbible.coreboardLongCode);

      // allocate the next item
      currentItemIndex++;
      if (currentItemIndex >= liveOrderArray.length) {
           allocationBible.removeEventListener("allocated", onAllocated);
      } else {
           allocate();
      }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:40:40.670

如果您需要停止执行脚本以等待函数完成，那么调度事件不是您想要的方式。您想要做的是您调用的函数返回您正在等待的值并且根本不使用事件。

如果我知道您在 allocationbible 中所做的事情，可能会有所帮助

# c# - EWS 托管 API：搜索与 Windows 登录关联的主邮箱以外的收件箱

> ID：10232294
> 
> 赞同：9
> 
> 时间：2012-04-19T16:13:25.307
> 
> 标签：c#, exchangewebservices

我有一个应用程序从“用户 A”中提取电子邮件，电子邮件地址为 UserA@email.com。我使用以下代码来执行此操作：

```
ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2010);
service.UseDefaultCredentials = true;
service.Url = new Uri(ServerName);

FindItemsResults<Item> findResults = service.FindItems(WellKnownFolderName.Inbox, new  ItemView(500)); 
```

如果用户 A 已登录并运行应用程序，这将正常工作。

但是，假设“用户 B”已被授予对用户 A 收件箱的访问权限，并希望运行相同的应用程序以从用户 A 的收件箱中提取文件。如何更改上面的代码以指定电子邮件帐户收件箱？

我知道在获取凭据时我可以硬编码用户 A 的登录详细信息，但理想情况下，我会避免硬编码用户名，而是使用运行应用程序的用户的凭据。

这可能只是我缺乏理解，但我对 .net 相对较新，对 EWS 也很陌生。任何指针将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-24T10:58:06.517

委托是我需要的：

```
FolderId InboxId = new FolderId(WellKnownFolderName.Inbox, "UserA@email.com");
FindItemsResults<Item> findResults = service.FindItems(InboxId, new ItemView(500)); 
```

# ruby-on-rails - Ruby on Rails - 延迟作业的奇怪行为逻辑

> ID：10232302
> 
> 赞同：0
> 
> 时间：2012-04-19T16:13:55.087
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, delayed-job

我正在通过 tobi 执行延迟作业，当我运行延迟作业时，但 fbLikes 计数都是错误的，而且每次我再添加一家公司时，它似乎都会增加。不知道逻辑错在哪里。我之前测试过的 fbLikes 方法和它的工作原理（在我更改为 delay_job 之前）不确定“1”来自哪里......

[输出]

```
coca-cola
http://www.cocacola.com
Likes: 1  <--- Not sure why the fbLikes is 1 and it increment with second company fbLikes is 2 and so on... 
```

.

```
[Worker(host:aname.local pid:1400)] Starting job worker
[Worker(host:aname.local pid:1400)] CountJob completed after 0.7893
[Worker(host:aname.local pid:1400)] 1 jobs processed at 1.1885 j/s, 0 failed ... 
```

> 我正在模型中运行延迟作业并尝试运行计算 facebook 喜欢的作业

这是我的代码。[lib/count_rb.job]

```
require 'net/http'
    class CountJob< Struct.new(:fbid)

def perform 
    uri = URI("http://graph.facebook.com/#{fbid}")
    data = Net::HTTP.get(uri)
    return JSON.parse(data)['likes']
end
end 
```

[公司型号]

```
before_save :fb_likes
def fb_likes            
    self.fbLikes = Delayed::Job.enqueue(CountJob.new(self.fbId))
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:45:25.960

问题来自

```
before_save :fb_likes  
def fb_likes  
  self.fbLikes = Delayed::Job.enqueue(CountJob.new(self.fbId))  
end 
```

enqueue 方法不会返回运行 CountJob 的结果。我相信它会返回作业是否成功入队，当您将其保存到 fb_likes 值时，它会在作业成功入队时评估为 1。

您应该在 delay_job 正在运行的作业中设置 fbLikes ，而不是由于 enqueue 调用。

```
before_save :enqueue_fb_likes  
def fb_likes  
  Delayed::Job.enqueue(CountJob.new(self.fbId))  
end 
```

您在 CountJob 类中的 perform 方法可能应该采用模型 ID 供您查找并访问 fbId 和 fbLikes 属性，而不仅仅是采用 fbId。

```
class CountJob< Struct.new(:id)

def perform
  company = Company.find(id)
  uri = URI("http://graph.facebook.com/#{company.fbid}")
  data = Net::HTTP.get(uri)
  company.fbLikes = JSON.parse(data)['likes']
  company.save
end 
```

# php - PHP Zend gData 安装检查异常

> ID：10232303
> 
> 赞同：0
> 
> 时间：2012-04-19T16:13:56.433
> 
> 标签：php, gdata

当我运行在那里找到的安装检查程序时出现此异常：

[http://framework.zend.com/svn/framework/standard/trunk/demos/Zend/Gdata/InstallationChecker.php](http://framework.zend.com/svn/framework/standard/trunk/demos/Zend/Gdata/InstallationChecker.php)

```
Exception thrown trying to access Zend/Loader.php using 'use_include_path' = true. Make sure you include Zend Framework in your include_path which currently contains: .;C:\php\pear;C:\Program Files (x86)\EasyPHP-5.3.6.1\www\workspace\CPS\class\library\Gdata 
```

我不明白，因为：

```
C:\Program Files (x86)\EasyPHP-5.3.6.1\www\workspace\CPS\class\library\Gdata 
```

是我的 gData 库的正确路径，并且它应该是独立的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:46:01.093

我应该直接包含根文件夹所以库，它工作正常

# algorithm - 使用 Floyd-Warshall 算法计算 2 个顶点之间的路径数

> ID：10232306
> 
> 赞同：0
> 
> 时间：2012-04-19T16:14:09.807
> 
> 标签：algorithm, graph, floyd-warshall

给定一个有向无权无环图，我正在尝试调整 Floyd-Warshall 算法来计算 2 个顶点之间的路径数。我的代码目前如下所示：

对于 1 到 n 中的所有 k 对于 1 到 n 中的所有 i 对于 1 到 n 中的所有 j Aij = Aij + ( Aik * Akij)。

因此，我没有检查和替换最小距离，而是执行以下操作：

( `i`, `j`) 之间不带`k`+ 的路径计数（从`i`到的路径计数 * 从*`k`开始的路径计数）`k``j`

我的最终数组应该有任意 2 个顶点之间的路径数。

我无法证明这并没有给我 2 个顶点之间的简单路径的计数，但是没有建议在其他地方使用这种方法。

有人可以提供一个失败的反例吗？

PS：这不是我的作业，只是我捡到的一个编程练习。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T16:21:40.057

~~在无向无权无环图中，任意两个顶点之间最多有 1 条路径。如果有更多不同的路径，它们就会形成一个循环。~~ *（编辑问题后不相关）*

对于有向图，我认为您的算法没有问题。修改后的 Floyd-Warshall 算法的使用实际上在[本文](http://www.ekt.bme.hu/Cikkek/54-Vattai_Floyd-Warshall_Again.pdf)中有所提及。它没有被广泛使用的原因可能是它的复杂性 - O(n ³ ) 与[这种简单方法的 O(m+n) 相比](https://stackoverflow.com/a/5164820/1127872)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T17:27:41.467

在循环图的情况下，您不能使用直接的 Floyd-Warshall 算法来做到这一点，因为计算简单路径需要您跟踪您去过的地方。动态规划假设正在计算的状态只是递归中状态的函数，在这种情况下并非如此。

但是，我不明白为什么这**不起作用**。但是为什么要使用 Floyd-Warshall 只计算两个顶点（只使用 DFS 或 BFS）。

# database - 如何编码多对多关系？

> ID：10232309
> 
> 赞同：4
> 
> 时间：2012-04-19T16:14:19.897
> 
> 标签：database, oop

我对（精神上）连接数据库和面向对象的编程感到困惑。

例如，想象一个教师的成绩簿应用程序，其 UI 在表格的行中显示学生，在列中显示作业。底层数据库可能包含多对多关系：一个学生有很多作业，而一个作业有很多学生。

底层代码如何工作？您是否有一个带有引用作业列表的变量的 Student 类？还是带有引用学生列表的变量的作业类？两个都？...您是否有某种 StudentAssignment 类链接 Student 和 Assignment 的实例？（如果是这样，这是否意味着一个有 50 个学生和 10 个作业的班级同时在内存中有 500 个 StudentAssignment 对象、50 个 Student 对象和 10 个 Assignment 对象？！）......然后这些不同的类主要由（对于例如）使用底层数据库的 SQL 语句？

我知道这里有很多问题，但它们都在一起......编码多对多关系的普遍接受的策略是什么？

ps 只是为了让您不认为我很懒惰，我*确实*看过其他问题，例如[如何在代码中建模多对多关系？](https://stackoverflow.com/questions/1103693/how-to-model-a-many-to-many-relationship-in-code)和[建模 manyToMany 与 attributes 的关系](https://stackoverflow.com/questions/2943238/modelling-a-manytomany-relationship-with-attributes)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:21:20.573

在数据库中，您需要一个 Student 表、一个 Assignment 表和一个 StudentAssignment 的交集表。对此的 OOP 表示可能只是每个学生都有自己的作业集合。您需要查看哪些学生有特定的作业吗？如果你这样做了，那么一定要在 Assignment 对象上填充该信息。或者，您也可以检查每个学生是否有特定的作业。这取决于您。

数据库在数据的表示和访问方式方面存在限制，而您不一定在 OOP 语言中具有这些限制。

不过，您绝对不需要 StudentAssignment 对象。该表表示关系，而不是实体。

编辑：

如果您需要从作业到拥有该作业的学生，​​以及从学生到他们的所有作业，您将需要 50 个学生对象和 10 个作业对象。当您创建这些对象时，您可能希望用它们的关联对象填充每个对象上的集合（学生将有一个列表分配，反之亦然）。

假设你这样做了：

为所有学生创建对象（这将返回 50 条记录），将他们的作业集合设置为一个空列表。

```
SELECT
    StudentName,
    ID
FROM
    Student 
```

为您的所有作业创建对象（这将返回 10 条记录），将他们的学生集合设置为一个空列表。

```
SELECT
    AssignmentName,
    ID
FROM
    Assignment 
```

假设您使用以下内容查询所有数据：（假设每个学生都有每个作业，这将返回 500 条记录）

```
SELECT
    Student.ID [StudentID],
    Assignment.ID [AssignmentID]
FROM 
    Student
    INNER JOIN StudentAssignment ON Student.ID = StudentAssignment.StudentID
    INNER JOIN Assignment ON Assignment.ID = StudentAssignment.AssignmentID 
```

您可能希望遍历这 500 条记录，为每个关系添加相应的对象。您仍然只有这 60 个对象 (50 + 10)，但它们的关系将由每个对象具有的作业或学生的集合定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T16:19:52.040

您的困惑是可以理解的，将 SQL 模式转换为 OO 通常会令人困惑，因为它们是不同的范例。

如果您认为 OO 提供了一种抽象底层实现的方法，那么您将有一个更清晰的答案路径。为每个 SQL 表创建一个对象在清晰度或更好的抽象层方面确实没有任何好处。

> 您是否有一个带有引用作业列表的变量的 Student 类？还是带有引用学生列表的变量的作业类？两个都？

我可能会同时做这两个，这取决于数据访问模式。

> 您是否有某种 StudentAssignment 类链接 Student 和 Assignment 的实例？

不，这不是必需的。`Student`在你的和`Assignment`类中隐藏这个实现细节。

> 然后这些不同的类是否主要由（例如）与底层数据库一起使用的 SQL 语句组成？

他们可以，而且在现实生活中经常会这样做，但您也可以让他们调用其他实际访问数据的类，例如，使用存储库模式。

# ruby-on-rails - 基础网球联赛的 ruby on rails 模型关联功能

> ID：10232318
> 
> 赞同：0
> 
> 时间：2012-04-19T16:14:58.417
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model, associations

我对 Rails 还很陌生，我很挣扎我已经在这里查看了很多问题，我认为我的知识差距确实阻碍了我将两个和两个放在一起。

该网站是一个女子双打网球联赛。

这是我到目前为止所做的，我想我需要退后几步。

我使用 rails generate 脚手架来创建 4 个模型和带有视图等的控制器等。

模型如下所示：

```
players:
firstname
lastname
timestamps

teams:
playerone
playertwo
timestamps

fixtures:
team1
team2
court
division
date
timestamps

results:
fixture
set1team1
set1team2
set2team1
set2team2
set3team1
set3team2
team1
team2
timestamps 
```

现在我想创建关联，以便球队有两名球员（球员一，球员二），每场比赛都有两支球队（球队1，球队2）。

然后我希望结果模型中的夹具与夹具模型中的记录相关联。

球队进行 3 组 6 场比赛，因此结果模型中的单独字段是记录每组比赛中每支球队的结果，然后给球队一个最终得分。如果一支球队赢得了这一盘（前 6 场比赛），他们将获得额外的 6 分。

这是我对这些关系所做的尝试。

```
class Team < ActiveRecord::Base
  has_many :players
  has_one :playerone, :class_name => "Player", :foreign_key => "player"
  has_one :playertwo, :class_name => "Player", :foreign_key => "player"
end

class Player < ActiveRecord::Base
  belongs_to :team
end

class Result < ActiveRecord::Base
  has_one :fixture
end

class Fixture < ActiveRecord::Base
  has_many :teams
end 
```

我似乎掌握了rails中的视图和布局的诀窍，但我还没有意识到强大的一面。

我一直在查看许多教程，但这真的让我很沮丧，我希望有人能提供帮助。

提前致谢。

亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:35:45.723

无需尝试为 playerone 和 playertwo 定义关系。在您的团队编辑视图中，您将有两个选择，每个选择都从球员列表中选择。

夹具也是如此，也不需要在那里建立关系。事实上，我认为现在不需要任何关系与您对模型进行分层的方式，您只需要在编辑视图中创建各种选择，从适当的模型中进行选择。

这样看，有两个 'has' 关系，has_one 或 has_many，你接近它就像有 'has_two' 或 'has_three' 关系，没有这样的关系，这些事实已经硬编码在你的模型属性中。

# haskell - MAC LION 上的 Haskell

> ID：10232319
> 
> 赞同：2
> 
> 时间：2012-04-19T16:14:59.267
> 
> 标签：haskell

首先，谢谢你看这个。我是编程新手（我会编程 Java 和 Python）

我要问一些非常琐碎的问题。如何在我的 Mac 上安装 Haskell 的“额外”？我的情况是我运行了 ghci，我正在按照我的终端[http://learnyouahaskell.com/introduction上的教程进行操作](http://learnyouahaskell.com/introduction)

我下载了 GHC Xcode Emacs（不工作，下面有更多解释）

但我想在他们的示例中使用类似他们的东西，一个文本编辑器，可以帮助我用 .hs 编写并支持编程语言。我尝试下载 Emacs，但找不到“haskell”作为支持的语言，而且我不知道如何安装它，因此它可以与我的 GHC 一起使用。另外，我不认为本教程对 Cabal 说了很多。我如何访问它？如果我只是进入并输入“cabal install”或只是“cabal”，它只会给我“不在范围内”作为答案。

也许我误解了阴谋集团？这不是您“访问”的东西吗？

感谢您查看我的帖子。我期待函数式编程！（我是一名数学家:)）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T17:23:11.620

[您是否直接从http://www.haskell.org/ghc/](http://www.haskell.org/ghc/)安装了 ghc ？通常最好按照教程中的建议安装[haskell 平台。](http://hackage.haskell.org/platform/)它已经包括`cabal`了。

如果您使用 haskell 平台，请尝试查找`cabal`安装位置并将目录添加到 $PATH 变量中。如果 Mac 的平台安装程序未安装`cabal`在通常的位置，我认为您可能会触发错误。

（注意：AFAIK haskell 平台安装程序对于新的 MacOS 已损坏，它包含 xcode 的硬编码路径。但查找和修复很简单）

查看[emacs 的 haskell 模式](http://www.haskell.org/haskellwiki/Haskell_mode_for_Emacs)。我不使用emacs，所以链接是我唯一可以建议的，对不起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T20:01:48.467

如果您已经安装了 Apple 开发人员工具，您可以查看包管理器，例如 homebrew（请参阅安装[链接](https://brew.sh/)）。然后在终端中键入

```
brew install ghc haskell-platform 
```

它会处理所有事情、依赖关系等。您将立即获得 ghc、ghci、cabal 等所有内容。它会把东西放进去，`/usr/local/`所以你甚至可能不必编辑你的`$PATH`...

对于编辑，Aquamacs（从[http://aquamacs.org/](http://aquamacs.org/)下载）支持开箱即用的 Haskell，并且非常适合 Mac。

# c# - 在 .net 结构构造函数中使用 try-catch

> ID：10232320
> 
> 赞同：4
> 
> 时间：2012-04-19T16:15:00.183
> 
> 标签：c#, .net, try-catch, structure

我需要一个 .net 结构（它模仿连接的设备内部映射）并且我想使用 try catch 块，因为我正在使用 Marshall.PtrToStructure() 和相关的 GChandle 东西。但是，当我将结构字段分配放在 try catch 块中时，我收到此错误“在将控制权返回给发送者之前必须完全分配字段 1”。没有 try catch 块，基本代码可以正常工作。使用 try catch 块时有什么方法可以解决这个错误吗？我应该使用try catch吗？

```
[StructLayout( LayoutKind.Sequential )]
public struct Effects
{
    public UInt16 field_1;
    public UInt16 field_2;
    ...

    public Effects(byte[] effectsData)
    {
       GCHandle gch;
       try
       {
           gch = GCHandle.Alloc( effectsData, GCHandleType.Pinned );
           IntPtr pEffects = gch.AddrOfPinnedObject( );
           this = (Effects)Marshal.PtrToStructure( pEffects, typeof(Effects ) );
       }
       catch (Exception ex)
       {

       }
       finally
       {
           if (gch.IsAllocated)
               gch.Free( );
       }
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-19T16:21:46.753

构造函数必须保证**如果它正常返回则所有字段都被填写**。

假设您的代码在`try`. 然后你捕捉到异常，吃掉它，然后返回，而无需填写任何字段！编译器检测到这一点并禁止该程序。

吃掉每一个例外几乎肯定是在这里做的错误的事情。**如果存在未处理和意外的任意异常，**您真的要返回未初始化的结构吗？

如果那是您想要做的，那么您可以简单地说：

```
public Effects(byte[] effectsData) : this() { 
```

这将保证在 ctor 块运行之前将字段初始化为其默认值。

但再说一遍：这真的是你想要做的吗？这段代码对我来说看起来非常危险。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T16:20:46.970

如果发生异常，您希望发生什么？就您现在的代码而言，如果 try 块中发生异常，则会吞下异常（因为您的 catch 块是空的），并且结构未初始化——这正是编译器所抱怨的。

如果您只需要在 finally 部分使用 try-catch 块，则根本不要使用 catch 块，而只使用 try-finally。通过不捕获错误，让错误冒泡到用户界面。没有 catch 块（几乎）总是比空的 catch 块好。空的 catch 块使调试成为一场噩梦，因为您的代码只是“不起作用”，没有任何迹象表明出了什么问题。

因此，我将重写您的代码如下：

```
public Effects(byte[] effectsData) 
{ 
     GCHandle gch = GCHandle.Alloc( effectsData, GCHandleType.Pinned ); 
     try 
     { 
         IntPtr pEffects = gch.AddrOfPinnedObject( ); 
         this = (Effects)Marshal.PtrToStructure( pEffects, typeof(Effects ) ); 
     } 
     finally 
     { 
        if (gch.IsAllocated)
            gch.Free( ); 
     } 
} 
```

（如果在 中发生错误`GCHandle.Alloc`，则不会分配 gch，因此无需将其包含在 try-finally 块中。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T16:20:12.690

将此添加到构造函数

```
field_1 = 0;
field_2 = 0;
... 
```

结构的行为与类不同。您必须在构造函数中显式分配所有字段。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-19T16:20:38.313

您必须在构造函数中设置结构的所有属性。

**当您插入 try/catch 时，并非所有代码路径都允许设置这些属性**。

你可能想要这样的东西：

```
try
{
   // Tries to affect something

   // Then returns
   return;
}
catch (Exception ex)
{
    // Set default values
    this.field1 = ....
}
finally
{
   if (gch.IsAllocated)
       gch.Free( );
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-19T16:27:17.417

与提供第二个构造函数相比，静态成员的问题和混乱要少得多：

```
public static Effects Create(byte[] effectsData)
{
   GCHandle gch;
   try
   {
       gch = GCHandle.Alloc( effectsData, GCHandleType.Pinned );
       IntPtr pEffects = gch.AddrOfPinnedObject( );
       return (Effects)Marshal.PtrToStructure( pEffects, typeof(Effects) );
   }
   finally
   {
       if (gch.IsAllocated)
           gch.Free( );
   }
} 
```

这种情况下的异常处理很容易理解和维护。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-19T16:18:26.627

在离开构造函数之前，必须初始化结构的成员。

在捕获异常时抛出一些东西，或者在进入 try-catch 循环之前将数据成员初始化为合理的东西。或者您可以将这些值初始化为 catch 块内的某些内容。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-19T16:19:49.320

问题是空的catch块：如果发生异常应该如何初始化结构？

如果您真的想忽略异常，则必须`this`在 catch 块中初始化为默认值。要将所有字段设置为零，只需使用

```
this = new Effects(); 
```

或者，您可以通过让异常传播到构造函数之外来避免该问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-19T17:31:44.490

你肯定知道字节数组的布局吧？使用`BitConverter`类来初始化字段。这样您就不必担心 pinning、try-finally 和其他不必要的开销。

```
[StructLayout( LayoutKind.Sequential )]
public struct Effects
{
    public UInt16 field_1;
    public UInt16 field_2;

    public static Effects FromBytes(byte[] data)
    {
        var value = new Effects();
        value.field_1 = BitConverter.ToUInt16(data, 0);
        value.field_2 = BitConverter.ToUInt16(data, 2);
        return value;
    }
} 
```

进行任何必要的调整以适应[字节顺序](http://en.wikipedia.org/wiki/Endianness)和对齐差异。

# php - Apache 和/或 PHP 超时 - 难住了。

> ID：10232321
> 
> 赞同：2
> 
> 时间：2012-04-19T16:15:00.903
> 
> 标签：php, linux, apache, timeout

我有一个 PHP 脚本，当通过浏览器调用它时，它恰好在 60 秒后超时。我修改了 httpd.conf 并将 Timeout 指令设置为 300。我修改了所有 PHP 超时设置以延长超过 60 秒。当我从命令行运行脚本时，它将完成。当我每次在 60 秒后通过浏览器执行时，POOF，超时。

我还检查了任何 .htaccess 文件中是否存在超时指令。那里什么都没有。我完全被难住了。

我也在 PHP 代码中强制 set_time_limit(0) 。

我已经挖掘和测试了一个星期，并用尽了我的知识。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-20T17:18:15.377

您需要确保在 PHP 和 Apache 中都设置了更高的超时限制。

如果您在 php.ini 中设置较高的 max_execution_time，您的脚本将不会超时，但是，如果您没有定期将脚本结果的输出黄油刷新到浏览器，则脚本可能会在 Apache 端超时，因为网络超时。

在 httpd.conf 中：

```
Timeout 216000 
```

在 php.ini 中执行：

```
max_execution_time = 0 
```

（将其设置为 0 使其永远不会超时，就像使用 CLI（命令行）脚本一样）。

确保完成后重新启动 Apache！在大多数 linux 发行版上，您可以通过发出命令（以 root 身份）来执行此操作：

```
service httpd restart 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:39:52.027

可以设置maxtime的地方很多。如果您使用的是 FastCGI，尤其是使用诸如 Virtualmin 之类的东西，则有一组额外的 max_execution_time 设置对您隐藏，除非您有权访问。

简而言之，你需要弄清楚所有的地方，给定你的 PHP 堆栈设置，可以有一个执行时间限制器，设置这些值，重新启动服务器，然后执行

```
set_time_limit(0); 
```

为了很好的衡量。

如果没有关于您的特定设置的更多信息，并且鉴于我在处理 PHP 执行时间挂起方面的经验，我能告诉您的最多。

# ruby-on-rails - 如何在连接字符串时在 <%=%> 块内输出 html_safe？

> ID：10232324
> 
> 赞同：6
> 
> 时间：2012-04-19T16:15:14.640
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

考虑一下：

```
<%
str = "http://domain.com/?foo=1&bar=2"
%> 
```

现在这些情况：

```
<%=str%>
# output:http://domain.com/?foo=1&amp;bar=2

<%=str.html_safe%>
# output:http://domain.com/?foo=1&bar=2

<%="#{str.html_safe}"%>
# output:http://domain.com/?foo=1&amp;bar=2

<%=""+str.html_safe%>
# output:http://domain.com/?foo=1&amp;bar=2 
```

我需要用其他字符串输出 URL。我如何保证与符号不会被转义？由于我无法控制的原因，我无法发送`&amp;`.

请帮忙！在这里拉我的头发：\

**编辑：**为了澄清，我实际上有一个像这样的数组：

```
@images = [{:id=>"fooid",:url=>"http://domain.com/?foo=1&bar=2"},...] 
```

我正在`image_array`以这种方式创建一个 JS 数组（var）以在我的应用程序中使用：

```
image_array.push(<%=@images.map{|x|"{id:'#{x[:id]}',url:'#{x[:url].html_safe}'}"}.join(",")%>); 
```

这会产生：

```
image_array.push({id:'fooid',url:'http://domain.com/?foo=1&amp;bar=2'},...); 
```

这在我的具体情况下不起作用。我需要`url`没有`amp;`部分。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T16:24:42.320

当你写：

```
"#{foo.bar}" 
```

这〜相当于写作

```
foo.bar.to_s 
```

所以你实际上在做的是：

```
<%=str.html_safe.to_s%> 
```

…Rails 不再认为它是安全的，因此它会通过一轮 HTML 转义来命中您生成的字符串。

*我不知道 Rails 的内部结构，但我假设该`html_safe`方法使用实例变量扩展字符串对象，将其标记为 OK，但是当您通过插值将其包装在另一个字符串中时，您将获得一个没有该标志的新字符串。*

**编辑**：要满足您的需求，请使用`raw`或调用`html_safe`您的最终字符串：

```
<%=raw "foo#{str}"%>
<%="foo#{str}".html_safe%> 
```

或者在你的情况下：

```
image_array.push(<%=raw @images.map{…}.join(',')%>);
image_array.push(<%=@images.map{…}.join(',').html_safe%>); 
```

*另请参阅[此问题](https://stackoverflow.com/questions/4251284/raw-vs-html-safe-vs-h-to-unescape-html)。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T16:29:11.270

用这个

```
 <%=str.html_safe.to_s%> 
```

或者

```
 <%=raw(str)%> 
```

给你更好的结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T17:04:50.037

```
image_array.push(<%= @images.map{|x| "{id:'#{x[:id]}',url:'#{x[:url]}'}".html_safe }.join(",") %>); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-18T12:04:19.410

为了安全起见，你会做的是：

```
image_array.push(<%= @images.map { |image| image.as_json(only: [:id, :url]) }.to_json } %>) 
```

这将像这样正确地逃避`<`,`>`等：

```
[{"name":"\u003ch1\u003eAAAA\u003c/h1\u003e"}] 
```

对于像我这样想要连接字符串的人来说，这样做并不安全，最好的方法是连接标签，例如

```
 content_tag(:p) do
      content_tag(:span, "<script>alert(1)</script>") +
        link_to("show", user)
    end 
```

可以正常工作并正确转义第一个字符串

# dynamic - (CSS) 调整窗口大小时更改元素的样式

> ID：10232326
> 
> 赞同：2
> 
> 时间：2012-04-19T16:15:18.417
> 
> 标签：dynamic, resize

我最近偶然发现了奥巴马竞选活动中的这个微型网站：

[http://www.barackobama.com/anniversary](http://www.barackobama.com/anniversary)

这个网站的许多很酷的功能之一是它的动态标题——当你将浏览器窗口缩小时，顶部的“ **OBAMA * BIDEN** ”标志会自动浮动到标题的左侧，并且它的宽度变为 36px（从而“隐藏” “奥巴马拜登”文本）。

这个页面的开发者是如何实现这个效果的？这是 javascript/jquery 驱动的，还是纯粹的 CSS 技巧？

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:22:50.633

[这个问题](https://stackoverflow.com/questions/641857/javascript-window-resize-event)涵盖了[window.resize](https://developer.mozilla.org/en/DOM/window.onresize)事件。你可以在它的处理程序中做任何你需要的事情。

另一种选择是使用[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)，一旦浏览器窗口尺寸发生变化，您就可以更改应用的 CSS（这是您所指的网站所做的。它将样式类更改与动画结合起来（使用 Chrome 开发人员工具查看应用了哪些样式）到大小浏览器尺寸的徽标））。

# javascript - 将 JSON 从 jQuery .getJSON 传递到 Python

> ID：10232327
> 
> 赞同：0
> 
> 时间：2012-04-19T16:15:19.033
> 
> 标签：javascript, jquery, python, json

我一直在为离开 PHP 的潜在转变做准备，并决定在我的下一个项目中使用 Python，我已经设法让自己完全陷入了某些事情上，我想知道是否有人可以帮助我。

如果我执行：

```
$.getJSON('test.php', { testdata: 'hello world' }) 
```

在'test.php'中我可以使用

```
$_GET['testdata'] 
```

检索“你好世界”。

我似乎找不到 test.py 的等价物：

```
$.getJSON('test.py', { testdata: 'hello world' }) 
```

我已经看到在线发布的与 request.get 或 os.environment 相关的代码来获取数据，但我未能进行任何配置工作。有人有什么建议吗？

我对开发很陌生，所以如果我错过了一些明显的东西，我深表歉意。

亲切的感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:28:22.223

这对我有用：

```
import cgi
import cgitb     #this...
cgitb.enable()   #..and this are not really necessary but helps debuging

data= cgi.FieldStorage()

#remove this commant to take a look in the data received by python
#print data

#here you can retrieve the value passed by ajax
print data['testdata'].value 
```

我希望这个对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:28:43.547

[该`cgi`文档](http://docs.python.org/library/cgi.html)包含有关如何在 Python CGI 脚本中检索 GET 和 POST 变量的信息。

# ios - Xcode 框架出错

> ID：10232335
> 
> 赞同：1
> 
> 时间：2012-04-19T16:15:49.670
> 
> 标签：ios, xcode, ipad

我正在使用 mapkit 框架构建一个小型应用程序，但我不断收到此错误。我添加了 corelocation、mapkit 一切，我到处搜索，似乎无法摆脱它。

```
_OBJC_CLASS_$_MKPinAnnotationView", referenced from: objc-class-ref-to-MKPinAnnotationView in MapViewController.o

Symbol(s) not found 
```

并发出警告说`/MapKit.framework/MapKit, missing required architecture in i386 file`

我已经尝试了从切换到 iPhone 再到 iPad 的所有方法，再次添加框架，但没有任何效果。我有另一个小应用程序，其中 mapkit 工作得很好。我只是想知道是否有人以前见过这个错误。

# python - 在 O(N) 中采样 k 个随机排列而不进行替换

> ID：10232338
> 
> 赞同：2
> 
> 时间：2012-04-19T16:15:59.587
> 
> 标签：python, algorithm, permutation

我需要一个列表的许多唯一随机排列而不用替换，有效。我目前的做法：

```
total_permutations = math.factorial(len(population))
permutation_indices = random.sample(xrange(total_permutations), k)
k_permutations = [get_nth_permutation(population, x) for x in permutation_indices] 
```

where`get_nth_permutation`完全按照听起来的样子，有效地（意思是 O(N)）。但是，这只适用于`len(population) <= 20`，因为 21! 太长了，`xrange(math.factorial(21))`无法正常工作：

```
OverflowError: Python int too large to convert to C long 
```

是否有更好的算法来采样 k 个唯一排列而不用 O(N) 替换？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T17:05:32.470

到一定程度，没有必要使用`get_nth_permutation`来获得排列。只是洗牌！

```
>>> import random
>>> l = range(21)
>>> def random_permutations(l, n):
...     while n:
...         random.shuffle(l)
...         yield list(l)
...         n -= 1
... 
>>> list(random_permutations(l, 5))
[[11, 19, 6, 10, 0, 3, 12, 7, 8, 16, 15, 5, 14, 9, 20, 2, 1, 13, 17, 18, 4], 
 [14, 8, 12, 3, 5, 20, 19, 13, 6, 18, 9, 16, 2, 10, 4, 1, 17, 15, 0, 7, 11], 
 [7, 20, 3, 8, 18, 17, 4, 11, 15, 6, 16, 1, 14, 0, 13, 5, 10, 9, 2, 19, 12], 
 [10, 14, 5, 17, 8, 15, 13, 0, 3, 16, 20, 18, 19, 11, 2, 9, 6, 12, 7, 4, 1], 
 [1, 13, 15, 18, 16, 6, 19, 8, 11, 12, 10, 20, 3, 4, 17, 0, 9, 5, 2, 7, 14]] 
```

出现在此列表中`len(l)`大于 15 和< 100000的重复项的可能性压倒性地大`n`，但是如果您需要保证，或者对于较低的评论，如果接近，这将停止）。就像是：`len(l)``set``n``len(l)!`

```
def random_permutations(l, n):    
    pset = set()
    while len(pset) < n:
        random.shuffle(l)
        pset.add(tuple(l))
    return pset 
```

然而，随着`len(l)`变得越来越长，`random.shuffle`变得越来越不可靠，因为列表的可能排列的数量增加超出了随机数生成器的周期！因此，并非所有的排列都`l`可以以这种方式生成。此时，您不仅需要映射`get_nth_permutation`一系列随机数，还需要一个能够生成 和 之间的每个随机数的随机数生成`0`器`len(l)`！分布比较均匀。这可能需要您找到更强大的随机性来源。

然而，一旦你有了这个，解决方案就像[Mark Ransom](https://stackoverflow.com/a/10232691/577088)的回答一样简单。

要了解为什么`random.shuffle`large 变得不可靠`len(l)`，请考虑以下内容。`random.shuffle`只需要在`0`和之间选择随机数`len(l) - 1`。但它会根据其内部状态选择这些数字，并且它只能采用有限（和固定）数量的状态。同样，您可以传递给它的可能种子值的数量是有限的。这意味着它可以生成的唯一数字序列集也是有限的；调用那个集合`s`。对于`len(l)! > len(s)`，永远无法生成某些排列，因为与这些排列相对应的序列不在`s`.

What are the *exact* lengths at which this becomes a problem? I'm not sure. But for what it's worth, the period of the mersenne twister, as implemented by `random`, is [2**19937-1](http://docs.python.org/library/random.html#module-random). The [shuffle docs](http://docs.python.org/library/random.html#random.shuffle) reiterate my point in a general way; see also what Wikipedia has to say on the matter [here](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle#Pseudorandom_generators:_problems_involving_state_space.2C_seeding.2C_and_usage).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T16:37:24.367

而不是`xrange`简单地继续生成随机数，直到您拥有所需的数量为止。使用 a`set`确保它们都是唯一的。

```
permutation_indices = set()
while len(permutation_indices) < k:
    permutation_indices.add(random.randrange(total_permutations)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T16:53:38.290

我有一个 nth_permutation 的实现（不确定我从哪里得到它），我为了你的目的而修改了它。我相信这足以满足您的需要

```
>>> def get_nth_permutation(population):
    total_permutations = math.factorial(len(population))

    while True:
        temp_population = population[:]
        n = random.randint(1,total_permutations)
        size = len(temp_population)
        def generate(s,n,population):
            for x in range(s-1,-1,-1):
                fact = math.factorial(x)
                d = n/fact
                n -= d * fact
                yield temp_population[d]
                temp_population.pop(d)
        next_perm = generate(size,n,population)
        yield [e for e in next_perm]

>>> nth_perm = get_nth_permutation(range(21))
>>> [next(nth_perm) for k in range(1,10)] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T16:25:03.800

您似乎正在寻找[Knuth Shuffle](http://en.wikipedia.org/wiki/Knuth_shuffle)！祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T16:45:00.373

您可以使用`itertools.islice`而不是`xrange()`：

> CPython 实现细节：xrange() 旨在简单和快速实现可能会施加限制来实现这一点。Python 的 C 实现将所有参数限制为原生 C long（“短”Python 整数），并且还**要求元素的数量适合原生 C long**。如果需要**更大的范围**，可以**使用 itertools 模块**制作替代版本：islice(count(start, step), (stop-start+step-1+2*(step<0))//step)。

# objective-c - 计算垂直于另一条线中点的线

> ID：10232341
> 
> 赞同：1
> 
> 时间：2012-04-19T16:16:15.287
> 
> 标签：objective-c, c, math, line

本质上，我正在尝试计算两点之间的平分线。我有两种方法，一种有效，另一种无效。我不太明白为什么另一个不起作用。有效的计算量更大一些，并且由于此例程运行很多，我想使用更简单的一个……除非它不起作用。我可能遗漏了一些简单的东西，但我觉得这很有趣，因为我似乎比高中代数掌握得更好。

注意：函数传递的是端点（endPoint1，endPoint2）。这是一个有效的方法（使用 trig 计算平分线）：

```
CGPoint midPoint = CGPointMake((endPoint1.x + endPoint2.x) / 2, (endPoint1.y + endPoint2.y) / 2);

//Normalize an end point
CGPoint nPoint = CGPointMake(endPoint1.x - endPoint2.x, endPoint1.y - endPoint2.y);

//Find theta and rotate 90°
CGFloat theta = atanf(nPoint.y / nPoint.x);
if (nPoint.x < 0.0f) theta += M_PI;
else if (nPoint.x > 0.0f && nPoint.y < 0.0f) theta += (M_PI * 2);
theta += M_PI_2;

//Calculate another point along new theta and de-normalize the point
CGPoint centerPoint = CGPointMake(cosf(theta) * 10, sinf(theta) * 10);
centerPoint.x += midPoint.x;
centerPoint.y += midPoint.y;

//Create the line definition
LineDef def = LineDefForPoints(midPoint, centerPoint); 
```

这是没有的，但我希望它：

```
CGPoint midPoint = CGPointMake((endPoint1.x + endPoint2.x) / 2, (endPoint1.y + endPoint2.y) / 2);
//Calculate the slope and invert
CGFloat m = (endPoint1.y - endPoint2.y) / (endPoint1.x - endPoint2.x);
//Take the negative reciprocal 
m = -1/m;       

//Calculate another point on the line        
CGPoint centerPoint = CGPointMake(midPoint.x + 10, midPoint.y + (m * 10));
//Create the line definition
LineDef def = LineDefForPoints(midPoint, centerPoint); 
```

所以我发誓这应该有效。Y 的变化等于 x 的变化的 m 倍。我计算了中点，计算出垂直线的斜率并计算了该线上的另一个点。但是，当给定相同的端点时，创建的线定义并不等效，所以我遗漏了一些东西。

顺便说一下，LindeDef 是一个简单的结构体，其中包含三个 CGFloat 变量，用于直线的 a、b 和 c 分量。从两点创建 LineDef 是微不足道的（我碰巧正在使用块来执行此操作）：

```
LineDef (^LineDefForPoints)(CGPoint, CGPoint) = ^LineDef(CGPoint p1, CGPoint p2){
    LineDef line = {0,0,0};
    line.a = p2.y - p1.y;
    line.b = p1.x - p2.x;
    line.c = line.a*p1.x + line.b*p1.y;
    return line;
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:52:10.513

该死，这很简单。我重新格式化了我的实际生产代码，这样我就可以把它放在 Stack Exchange 上，并在这个过程中编辑了我的错误。我在问题中发布的代码实际上运行良好。最初这行：`m = -1 / m;`被折叠到原来的分配中，如下所示：`CGFloat m = -1 / (endPoint1.y - endPoint2.y) / (endPoint1.x - endPoint2.x);`。当然，现在问题很明显......我忘记了括号。我在堆栈交换中将这条线分成两部分，这样我就可以在评论中解释我的“推理”，希望能找到问题所在。

对不起，所有的烦恼。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:23:45.983

斜截形式对此很脆弱；使用向量。

> 〈V〉 = B - A
> 
> 中点 = 〈V〉/2 + A
> 
> ⟂〈V〉 = 〈V [y] , -V [x]〉</p>

# jquery - 从 div 获取 html 不获取图像标签

> ID：10232342
> 
> 赞同：1
> 
> 时间：2012-04-19T16:16:17.703
> 
> 标签：jquery, html, image

我在常规站点的子目录中有一个移动站点，我从常规站点获取的某些页面的内容，这很好，我使用以下代码：

```
$('.lastnews').load('/index-bestanden/news/news.html #newsmessage div:first'); 
```

在原始内容中是图像，当然它们在移动网站上显示为损坏，我想要的是获得没有图像的内容。

那可能吗 ？如何

到目前为止，我尝试了 .note 和 .exclude ，但无法正常工作

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:18:30.573

您始终可以选择和删除他们的图像：

```
$(".foo img").remove(); 
```

如果我们从加载回调中执行此操作，它将如下所示：

```
$('.lastnews').load('...news.html #newsmessage div:first', function(){
  $(this).find("img").remove();
}); 
```

# c# - 更改 Content.Load 格式

> ID：10232347
> 
> 赞同：0
> 
> 时间：2012-04-19T16:16:34.383
> 
> 标签：c#, xna, texture2d

我们正在 XNA 中开发一些游戏，感谢 Mono+MonoGame+MonoForAndroid，这些游戏将在所有三个主要移动平台上准备就绪。问题是，由于我们需要使用尽可能少的内存来避免设备崩溃，我们选择使用纹理格式 Bgra5551。

不幸的是，当您调用 Load 方法时，内容管理器对纹理 (A8R8G8B8) 使用颜色格式。

我的问题是：我可以使用 Content.Load 以某种方式获得 5551 纹理吗？

我已经有了将 32 位纹理转换为 16 位纹理的代码。我正在考虑一种方法来覆盖 Load 方法，但我没有找到任何东西。

我怎么能 ？

非常感谢您，

——尼古拉·马尔切桑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T18:38:34.690

默认纹理处理器不支持该输出纹理格式，但也许您想创建自己的纹理处理器......

```
[ContentProcessor(DisplayName = "MyTextureProcessor")]
public class TextureContentProcessor : TextureProcessor
{
    public override TextureContent Process(TextureContent input, ContentProcessorContext context)
   {          
        TextureContent data = base.Process(input, context);

        // Convert data

        return data;
   }
} 
```

# sharepoint-2010 - 在 sharepoint 中重新托管工作流

> ID：10232349
> 
> 赞同：0
> 
> 时间：2012-04-19T16:16:45.717
> 
> 标签：sharepoint-2010, workflow-foundation-4

我正在从事这样的项目：http: [//msmvps.com/blogs/theproblemsolver/archive/2009/12/23/rehosting-the-workflow-designer-in-wf4.aspx](http://msmvps.com/blogs/theproblemsolver/archive/2009/12/23/rehosting-the-workflow-designer-in-wf4.aspx)

是否可以在共享点中上传此应用程序并在共享点中执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:29:41.450

据我所知，SharePoint 仍在使用 WF3 运行时而不是 WF4 运行时。所以不，这是行不通的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T21:56:41.203

您必须在 .net 4 中创建一个单独的 Web 服务应用程序（使用 WF），然后从 SharePoint 调用该 Web 服务。
从 WF 中，您又可以通过托管客户端对象模型与 Sharepoint 集成。
有关客户端模型的更多信息，请参阅此链接：http:
[//msdn.microsoft.com/en-us/library/ee857094.aspx](http://msdn.microsoft.com/en-us/library/ee857094.aspx)

# mysql - 如果连接丢失，查询是否正确？

> ID：10232356
> 
> 赞同：2
> 
> 时间：2012-04-19T16:17:07.237
> 
> 标签：mysql

在建立到 MySQL 服务器的远程连接后（使用 MySQL 命令行前端），我开始执行一个很长的存储过程（我估计它可能需要超过 7 个小时）但在它中间我收到了错误：

错误 2013 (HY000): 查询期间丢失与 MySQL 服务器的连接

所以我猜我的查询超时了。此过程只是将一些值存储在以前的空表中。

在收到此错误并重新建立与服务器的连接后，我可以验证该过程是否以某种方式继续执行。一段时间后，我还验证了以前的空表现在有一些行。

我的问题是，即使连接丢失，我可以相信程序的执行是正确的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T02:04:57.533

首先，7小时似乎太长了。如果不完整的结果困扰您，您可以在完成 N 个查询时添加一些保存点，并将 N 个查询合并为一个事务。然后，每次您的程序异常停止时，您都可以加载上次保存的点。

我还建议您可以尝试将源数据选择到本地计算机中，并编写一些脚本来获取结果，然后将其上传到目标表。这将减少数据库服务器的开销。

# javascript - 无法在 Javascript 代码中选择子节点

> ID：10232359
> 
> 赞同：0
> 
> 时间：2012-04-19T16:17:17.450
> 
> 标签：javascript, jquery

我有这段 HTML 代码

```
<div id="countdown">
                    <ul>
                        <li id="giorni"><span class="num red">66</span><span class="lab">Giorni</span></li>
                        <li id="ore"><span class="num red">23</span><span class="lab">Ore</span></li>
                        <li id="minuti"><span class="num red">44</span><span class="lab">Minuti</span></li>
                        <li id="secondi"><span class="num red">14</span><span class="lab">Secondi</span></li>
                    </ul>
            </div> 
```

我想替换每个具有 num 类的 span 的内容。为了做到这一点，我写了：

```
var countdown = {
        init: function( config ) {
            this.dataX = Date.parse(new Date(2012, 5, 30));
            this.adesso = new Date().getTime();
            this.giorni = config.container.find('li#giorni');
            console.log(this.giorni);
            this.count();
        },
                ... some other code ...
};

countdown.init({
   container: $('div#countdown ul');
}); 
```

我真的不明白为什么如果我尝试登录`this.giorni`我会得到`[]`响应，但是如果我将相同的代码写入控制台，它会返回我需要的节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:26:40.973

```
$('#countdown span.num').each(function() {
    $(this).empty().html(Math.random() * 1000);
}); 
```

# c# - GeoCodeRequest() 构造函数返回 null

> ID：10232360
> 
> 赞同：1
> 
> 时间：2012-04-19T16:17:30.077
> 
> 标签：c#, wcf, soap, bing

我正在尝试创建一个使用 Bing 的地理编码肥皂服务的 wcf 服务。但是，当我尝试使用它的构造函数设置初始化一个新的 GeoCodeRequest 时，它会返回一个空值。当我打电话时，`request.Query = address;` 我收到一个空值错误，指的是 `request`.

```
public string RequestLocation(string address)
        {
            const string key = "mybingapplicationId";
            var request = new GeocodeRequest();
            request.Credentials.ApplicationId = key;
            request.Query = address;

            var filters = new ConfidenceFilter[1];
            filters[0] = new ConfidenceFilter { MinimumConfidence = Confidence.High };

            var geocodeOptions = new GeocodeOptions { Filters = filters };

            request.Options = geocodeOptions;

            // Make the geocode request
            var geocodeService = new GeocodeServiceClient("BasicHttpBinding_IGeocodeService");
            var geocodeResponse = geocodeService.Geocode(request);

            return geocodeResponse.Results[0].DisplayName;
        } 
```

[单元测试]

```
 [TestMethod()]
        [HostType("ASP.NET")]
        [AspNetDevelopmentServerHost("C:\\Development\\WcfService1\\WcfService1", "/")]
        [UrlToTest("http://localhost:24842/")]
        [DeploymentItem("WcfService1.dll")]
        public void RequestLocationTest()
        {
            var target = new TestService.BingEngineClient();
            var address = string.Format("1600 Pennsylvania Avenue, {0}, {1}","Washington", "DC"); 
            var expected = string.Empty;
            var actual = target.RequestLocation(address);
            Assert.IsNotNull(actual);
            Assert.Inconclusive("Verify the correctness of this test method.");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:05:53.890

首先，代码缺少凭据的初始化。

`request.Credentials = new GeocodeService.Credentials();`

当您完成[创建 Bing 地图帐户](http://msdn.microsoft.com/en-us/library/gg650598.aspx)时，您必须使用他们的应用程序为相关的特定应用程序
[创建 Bing 地图密钥](http://msdn.microsoft.com/en-us/library/ff428642.aspx)。请注意，这与您的帐户密钥不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T18:10:27.743

```
 public string RequestLocation(string address)
            {

                var request = new GeocodeRequest {Credentials = new Credentials {ApplicationId = _key}, Query = address};
                var filters = new ConfidenceFilter[1];
                filters[0] = new ConfidenceFilter { MinimumConfidence = Confidence.High };

                var geocodeOptions = new GeocodeOptions { Filters = filters };

                request.Options = geocodeOptions;

                // Make the geocode request
                var geocodeService = new GeocodeServiceClient("BasicHttpBinding_IGeocodeService");
                var geocodeResponse = geocodeService.Geocode(request);

                return string.Format("Longitude:{0},Latitude:{1}", geocodeResponse.Results[0].Locations[0].Longitude,
                                     geocodeResponse.Results[0].Locations[0].Latitude);
            } 
```

# javascript - 如何在 JavaScript 中检查变量是否为 null 或空字符串或所有空格？

> ID：10232366
> 
> 赞同：133
> 
> 时间：2012-04-19T16:17:47.080
> 
> 标签：javascript, jquery

我需要检查变量是否为空或所有空格或只是空白（“”）。

我有以下内容，但它不起作用：

```
var addr;
addr = "  ";

if (!addr) {
    // pull error 
} 
```

如果我执行以下操作，它会起作用：

```
if (addr) {

}​ 
```

我需要的是类似于 C# 方法的东西[`String.IsNullOrWhiteSpace(value)`](https://docs.microsoft.com/en-us/dotnet/api/system.string.isnullorwhitespace)。

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2012-04-19T16:43:40.657

一种更接近模仿的非 jQuery 解决方案`IsNullOrWhiteSpace`，但仅检测空、空或全空格：

```
function isEmptyOrSpaces(str){
    return str === null || str.match(/^ *$/) !== null;
} 
```

...然后：

```
var addr = '  ';

if(isEmptyOrSpaces(addr)){
    // error 
} 
```

*** 编辑 *** 请注意 op 明确指出：

> 我需要检查 var**是否为 null 或是否有任何空格，或者就此而言只是空白**。

因此，虽然是的，但“空白”不仅仅包含 null、空格或空白，我的答案旨在回答 op 的具体问题。这很重要，因为 op 可能不想捕获诸如标签之类的东西。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-04-19T16:21:44.847

```
if (addr == null || addr.trim() === ''){
  //...
} 
```

比较`null`也会赶上`undefined`。如果您也想`false`通过，请使用`!addr`. 为了向后浏览器兼容性`addr.trim()`交换`$.trim(addr)`.

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-04-19T16:19:49.543

您可以使用`if(addr && (addr = $.trim(addr)))`

这具有实际删除任何外部空格的优点，`addr`而不是在执行检查时忽略它。

参考：[http ://api.jquery.com/jQuery.trim/](http://api.jquery.com/jQuery.trim/)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2020-01-12T13:54:18.160

老问题，但我认为它值得一个更简单的答案。

你可以简单地做：

```
var addr = "  ";

if (addr && addr.trim()) {

    console.log("I'm not null, nor undefined, nor empty string, nor string composed of whitespace only.");

} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-05-24T14:10:14.597

以上的简化版本：（来自这里：[https](https://stackoverflow.com/a/32800728/47226) ://stackoverflow.com/a/32800728/47226 ）

```
function isNullOrWhitespace( input ) {
  return !input || !input.trim();
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-04-19T16:30:48.740

您可以创建自己的方法等价于

`String.IsNullOrWhiteSpace(value)`

```
function IsNullOrWhiteSpace( value) {

    if (value== null) return true;

    return value.replace(/\s/g, '').length == 0;
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2019-05-17T15:14:18.213

```
isEmptyOrSpaces(str){
    return !str || str.trim() === '';
} 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-06-29T00:03:08.413

在检查空白时，c# 方法使用 Unicode 标准。空白包括空格、制表符、回车和许多其他非打印字符代码。所以你最好使用：

```
function isNullOrWhiteSpace(str){
    return str == null || str.replace(/\s/g, '').length < 1;
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-01-08T08:35:06.660

```
isEmptyOrSpaces(str){
    return str === null || str.trim().length>0;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-11-22T08:19:52.783

试试这个

```
/**
  * Checks the string if undefined, null, not typeof string, empty or space(s)
  * @param {any} str string to be evaluated
  * @returns {boolean} the evaluated result
*/
function isStringNullOrWhiteSpace(str) {
    return str === undefined || str === null
                             || typeof str !== 'string'
                             || str.match(/^ *$/) !== null;
} 
```

你可以像这样使用它

```
isStringNullOrWhiteSpace('Your String'); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-05-05T14:34:08.473

```
function isEmptyOrSpaces(str){
    return str === null || str.match(/^[\s\n\r]*$/) !== null;
} 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2019-10-10T17:48:38.887

你可以试试这个：

```
do {
   var op = prompt("please input operatot \n you most select one of * - / *  ")
} while (typeof op == "object" || op == ""); 
// execute block of code when click on cancle or ok whthout input 
```

# ios - iOS - 表格视图 - 静态单元格（分组） - 更改部分标题文本颜色

> ID：10232368
> 
> 赞同：17
> 
> 时间：2012-04-19T16:17:54.990
> 
> 标签：ios, uitableview

**概述**

我有一个带有以下规范的表格视图的 iOS 项目：

*   **静态单元格**（内容不是动态填充的）
*   样式被分组

**问题**

1.  如何更改静态表格视图部分标题的文本颜色？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-19T16:53:41.550

您需要创建自己的标题视图：

在您的 tableview 数据源/委托中实现

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
    NSString *sectionTitle = [self tableView:tableView titleForHeaderInSection:section];
    if (sectionTitle == nil) {
        return nil;
    }

    // Create label with section title
    UILabel *label = [[[UILabel alloc] init] autorelease];
    label.frame = CGRectMake(20, 6, 300, 30);
    label.backgroundColor = [UIColor clearColor];
    label.textColor = [UIColor colorWithHue:(136.0/360.0)  // Slightly bluish green
                                 saturation:1.0
                                 brightness:0.60
                                      alpha:1.0];
    label.shadowColor = [UIColor whiteColor];
    label.shadowOffset = CGSizeMake(0.0, 1.0);
    label.font = [UIFont boldSystemFontOfSize:16];
    label.text = sectionTitle;

    // Create header view and add label as a subview

    // you could also just return the label (instead of making a new view and adding the label as subview. With the view you have more flexibility to make a background color or different paddings
    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, tableView.bounds.size.width, SectionHeaderHeight)];
    [view autorelease];
    [view addSubview:label];

    return view;
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-06-15T14:07:47.470

也可以这样做：

```
- (void)tableView:(UITableView *)tableView willDisplayHeaderView:(UIView *)view forSection:(NSInteger)section
{
    [[((UITableViewHeaderFooterView*) view) textLabel] setTextColor:[UIColor whiteColor]];
} 
```

......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-30T12:37:45.573

只有在为标题添加高度以及视图后，我才能查看标题

```
-(CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section{
    return 110;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-26T21:43:22.267

**在 Swift 4.2 中**：

```
override func tableView(_ tableView: UITableView, willDisplayHeaderView view: UIView, forSection section: Int) {
    if let headerView = view as? UITableViewHeaderFooterView {
        headerView.textLabel?.textColor = UIColor.OMGColors.dimText
    }
} 
```

无需制作自己的标题视图 - 这违背了静态单元格的目的。我很惊讶你不能直接在 IB 的某个地方设置它......

# ruby-on-rails - 圆形半径不适用于 gmaps4rails

> ID：10232369
> 
> 赞同：0
> 
> 时间：2012-04-19T16:17:57.360
> 
> 标签：ruby-on-rails, ruby-on-rails-3, google-maps, gmaps4rails

Gmaps4Rails.circles = [{"lat":50.44444444 , "lon":8.3333333}]; Gmaps4Rails.create_circles();

**当我检索 hashMap @circle 时，只有 lat 和 long 即将到来....所以我无法画出圆圈 ....anyOne 可以帮我解决这个问题...**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T21:19:53.397

`to_gmaps4rails`不会为圈子创建 json，您必须自己构建它。

[只要尊重预期的格式](https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Circles)。

# c# - 通过 WPF 客户端应用程序更改系统时间的策略

> ID：10232370
> 
> 赞同：0
> 
> 时间：2012-04-19T16:18:04.953
> 
> 标签：c#, .net, wpf

[我在这里](https://stackoverflow.com/questions/650849/how-to-change-system-date-programatically)找到了如何更改系统时间的好建议。

没关系...但是为 WPF 客户端应用程序更改系统本地时间的最佳策略是什么？

例如，我的应用程序定期从服务器获取一些数据，我可以通过它传递服务器时间。

或者可能更好地使用附加`thread`询问服务器服务器时间并始终更改本地系统时间......

所以我不知道哪种方法更好......

感谢您提供任何线索。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T17:00:45.467

最好不要这样做 - 它需要管理员权限才能更改系统时间，因此您的程序必须以管理员身份运行（在您的情况下可能可以接受，但通常不是一个好主意）。

在设置时间时，还需要一些努力来正确调整网络延迟。请查看它通常是如何完成的，即从[NTP - Network Time Protocol](http://en.wikipedia.org/wiki/Network_Time_Protocol)开始。

一种选择是将窗口配置为更频繁地检查时间，而不是手动进行，因为它已经实现了该功能。

# vb.net - 运营商除外

> ID：10232371
> 
> 赞同：2
> 
> 时间：2012-04-19T16:18:09.467
> 
> 标签：vb.net, linq, except

我正在创建一个预订系统，我想这样当用户在日历上选择一个日期时，下拉框将填充可用的时间。

下面是我的代码...

```
Protected Sub Calendar1_SelectionChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles Calendar1.SelectionChanged

    Label1.Text = Calendar1.SelectedDate
    Dim db As New DataClasses2DataContext

    Dim times = From s In db.Apps Where s.Date = Calendar1.SelectedDate Select New With {s.StartTime}

    Dim allslots = From c In db.Slots Select c.StartTime

    Dim leftover = times.Except(allslots)

    DropDownList1.DataSource = leftover
    DropDownList1.DataBind()

End Sub 
```

这是我得到的错误......

无法转换类型为“System.Data.Linq.DataQuery `1[System.TimeSpan]' to type 'System.Collections.Generic.IEnumerable`1[VB$AnonymousType_1`1[System.TimeSpan]]”的对象。

根据我的一般知识，我知道我将需要一个时间跨度。解析某个地方，我玩过一些东西，但似乎无法解决，有人可以帮忙吗？

谢谢，科拉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:30:18.643

我想你的意思是：

```
Dim times = From s In db.Apps
            Where s.Date = Calendar1.SelectedDate
            Select s.StartTime 
```

我想你可能已经`Except`退步了。你是这个意思吗？

```
Dim leftover = allslots.Except(times) 
```

# sql - 尝试在没有时区列的情况下查询时间戳的 Ingres 错误

> ID：10232373
> 
> 赞同：1
> 
> 时间：2012-04-19T16:18:19.570
> 
> 标签：sql, ingres

我正在尝试在时间为“没有时区的时间戳”的列上编写查询，这是我的 where 子句：

```
and (cv.expire_ts >= 'today' or ifnull(cv.expir_ts, '') = '') 
```

我收到以下错误：

```
Error: 'today' is invalid format or value for timestamp without time zone or timestamp with local time zone. Please enter a valid timestamp value in yyyy-mm-dd hh:mm:ss[.fff...] format.
SQLState:  22007
ErrorCode: 4328
Error: Specified cursor is not known to the server.
SQLState:  24000
ErrorCode: 590366 
```

我怎样才能使这个查询在这种类型的列上工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T19:06:02.800

尝试使用`CURRENT_DATE`不带引号的常量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T16:37:42.280

我认为缺少的部分是日期功能`'today'`

[参考](http://www.actian.com/kb/article/332083)

# asp.net-mvc - jQueryMobile、Ajax 导航和 MVC

> ID：10232374
> 
> 赞同：2
> 
> 时间：2012-04-19T16:18:24.350
> 
> 标签：asp.net-mvc, jquery-mobile

在 MVC 4 关于新[移动功能](http://www.asp.net/mvc/tutorials/mvc-4/aspnet-mvc-4-mobile-features)的文章之后，我添加了 NuGet 包`jQuery.Mobile.MVC`。该软件包安装了 jQuery Mobile 的旧版本 1.0.3b（当前版本为 1.1.0），并在以下位置创建以下内容`_Layout.Mobile.cshtml`：

```
$(document).bind("mobileinit", function ()
{
    // As of Beta 2, jQuery Mobile's Ajax navigation does not work in all cases (e.g.,
    // when navigating from a mobile to a non-mobile page), hence disabling it.
    $.mobile.ajaxEnabled = false;
}); 
```

我找不到任何文档说明究竟是什么不工作，是否有错误提交，以及该错误的状态可能是什么。jQuery Mobile 论坛中最接近的非古代类似提及是

[http://forum.jquery.com/topic/ajax-navigation-system-is-causing-problems](http://forum.jquery.com/topic/ajax-navigation-system-is-causing-problems)

在这种情况下，OP 的问题被认为是“设计使然”。

所以...

为什么 Ajax 导航可以开箱即用地关闭，这在 jQuery Mobile 1.1.0 中仍然是一个有效的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:45:00.237

MVC 4 Beta 的这个问题是，如果 ajax 导航没有关闭，页面导航会在一次导航后停止工作。

这在 jQuery Mobile 1.1.0 中仍然是一个有效的问题。我将 MVC 4 beta 与 jQuery Mobile 1.1.0 一起使用，如果未禁用 ajax 导航，页面之间的导航将非常不稳定。

*注意：*
您参考的论坛帖子与此问题无关。这篇文章是关于页面标题中的值未更新的，这是每个设计的。 [（因为这是该 OP 的唯一问题，我猜他正在使用 MVC 3）]

* * *

关于此状态，与您的问题有关：

> (...) 是否有提交的错误，以及该错误的状态可能是什么 (...)

我不知道……我也很高兴知道这一点。希望当 MVC 4 正式发布时它会得到修复。

# jquery - jQuery UI 自动完成源事件在 Symfony 上不起作用

> ID：10232382
> 
> 赞同：0
> 
> 时间：2012-04-19T16:18:36.517
> 
> 标签：jquery, jquery-ui, symfony1, autocomplete, jquery-ui-autocomplete

我需要`.txtProvince`用省名填写字段，并`.txtProvinceHidden`用省 ID 填写字段（或者`.txtProvince`可以有一个“province_id”属性，也许）。

我找到了这个解决方案（[这里](https://stackoverflow.com/questions/4895748/how-to-set-id-in-jquery-ui-autocomplete-source-event)）：

```
$(function() {                  
    var provinces = [{id: 1,label: "Alagoas"},{id: 2,label: "Bahia"}];
    $(".txtProvince").autocomplete({
        source: provinces,
        select: function(event,ui) {
              $(this).val(ui.label);
              $(".txtProvinceHidden").val(ui.id);
        }                   
    });             
}); 
```

到目前为止一切顺利，现在问题来了：当 jquery ui 执行搜索时，我得到“禁止”错误。

这是它寻求的网址：

```
http://dicasdedesconto.localhost/[["1","Alagoas"],["2","Bahia"]?term=Ba 
```

这是我在控制台上看到的错误：

```
Forbidden

You don't have permission to access /[["1","Alagoas"],["2","Bahia"] on this server.

Apache/2.2.20 (Ubuntu) Server at dicasdedesconto.localhost Port 80 
```

我确定这是一个路线问题，但我不知道如何解决这个问题。有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:48:08.597

这是您的代码的一个工作示例： [jsfiddle](http://jsfiddle.net/f8C9x/)

你有没有编辑你的例子？如果您传递给源的对象格式不正确，它可能会将其解释为字符串，而不是对象数组。查看控制台的示例，它似乎试图将您的源用作路径。让我想知道您是否在发布此问题时解决了自己的问题。

来自[自动完成文档](http://docs.jquery.com/UI/Autocomplete)

> 使用字符串时，自动完成插件期望该字符串指向将返回 JSON 数据的 URL 资源。

# qt - 为什么 setPos() 不移动场景中的 QGraphicsItems？

> ID：10232384
> 
> 赞同：1
> 
> 时间：2012-04-19T16:18:39.453
> 
> 标签：qt, layout, positioning

在下面的代码中，我有 3个由 布局`QGraphicsItem`的 s `QGraphicsLinearLayout`，它们被设置为 a 的布局`QGraphicsWidget`。

```
#include <QApplication>
#include <QBrush>
#include <QDebug>
#include <QGraphicsItem>
#include <QGraphicsLayoutItem>
#include <QGraphicsLinearLayout>
#include <QGraphicsRectItem>
#include <QGraphicsScene>
#include <QGraphicsView>
#include <QGraphicsWidget>
#include <QPen>

class MyShape : public QGraphicsRectItem, public QGraphicsLayoutItem {
  public:
    MyShape(void) {
        setPen(QPen(QBrush(Qt::black), 1));
        setBrush(QBrush(Qt::green));
        setRect(0, 0, 20, 20);
    }

    virtual QSizeF sizeHint(Qt::SizeHint which,
                            const QSizeF& constraint = QSizeF()) const {
        Q_UNUSED(which);
        Q_UNUSED(constraint);
        return boundingRect().size();
    }

    virtual void setGeometry(const QRectF& rect) {
        setPos(rect.topLeft());
    }
};

int main(int argc, char** argv) {
    QApplication app(argc, argv);

    QGraphicsScene scene;
    MyShape* shape1 = new MyShape;
    MyShape* shape2 = new MyShape;
    MyShape* shape3 = new MyShape;
    scene.addItem(shape1);
    scene.addItem(shape2);
    scene.addItem(shape3);

    QGraphicsLinearLayout* layout = new QGraphicsLinearLayout;
    layout->addItem(shape1);
    layout->addItem(shape2);
    layout->addItem(shape3);

    QGraphicsWidget* container = new QGraphicsWidget;
    container->setLayout(layout);
    scene.addItem(container);

    container->setPos(300, 300); // This doesn't appear to have any affect

    // Item for indicating origin
    QGraphicsRectItem* tmp = scene.addRect(0, 0, 2, 2, QPen(),
                                           QBrush(Qt::green));
    tmp->setPos(0, 0);

    qDebug() << tmp->scenePos();
    qDebug() << container->scenePos();

    QGraphicsView view;
    view.setScene(&scene);
    view.centerOn(0, 0);
    view.show();

    return app.exec();
} 
```

然后，我尝试`QGraphicsWidget`通过调用来移动场景中的`setPos()`，但它似乎不起作用（`QGraphicsItem`s 仍然在同一个地方）。但是，自从滚动条发生变化后，似乎发生了*一些事情。*看来，这个`QGraphicsWidget`动作，没有带`QGraphicsItem`s 随之而来。

为什么？

## 编辑：

根据*DerManu*`MyShape`的建议，我更改了to的继承`QGraphicsWidget`，并使用以下代码，它可以工作：

```
#include <QApplication>
#include <QBrush>
#include <QDebug>
#include <QGraphicsItem>
#include <QGraphicsLayoutItem>
#include <QGraphicsLinearLayout>
#include <QGraphicsRectItem>
#include <QGraphicsScene>
#include <QGraphicsView>
#include <QGraphicsWidget>
#include <QPen>

class MyShape : public QGraphicsWidget {
  public:
    MyShape(void) {
        setMinimumSize(20, 20);
        setMaximumSize(20, 20);
        setPreferredSize(20, 20);
    }

QRectF boundingRect(void) const {
    QRectF box(0, 0, 22, 22);
    box.translate(box.center() * -1);
    return box;
}

void paint(QPainter* painter,
                 const QStyleOptionGraphicsItem* option,
                 QWidget* widget) {
    Q_UNUSED(option);
    Q_UNUSED(widget);

    // Set box border appearance
    painter->setPen(QPen(Qt::black, 1));

    // Set box background appearance
    painter->setBrush(QBrush(Qt::green));

    QRectF box(0, 0, 20, 20);
    box.translate(box.center() * -1);
    painter->drawRect(box);
}

};

int main(int argc, char** argv) {
    QApplication app(argc, argv);

    QGraphicsScene scene;
    MyShape* shape1 = new MyShape;
    MyShape* shape2 = new MyShape;
    MyShape* shape3 = new MyShape;
    scene.addItem(shape1);
    scene.addItem(shape2);
    scene.addItem(shape3);

    QGraphicsLinearLayout* layout = new QGraphicsLinearLayout(Qt::Vertical);
    layout->addItem(shape1);
    layout->addItem(shape2);
    layout->addItem(shape3);

    QGraphicsWidget* container = new QGraphicsWidget;
    container->setLayout(layout);
    scene.addItem(container);

    container->setPos(200, 200); // This doesn't appear to have any affect
    scene.setSceneRect(-300, -300, 600, 600);

    // Item for indicating origin
    QGraphicsRectItem* tmp = scene.addRect(0, 0, 2, 2, QPen(),
                                           QBrush(Qt::green));
    tmp->setPos(0, 0);

    qDebug() << tmp->scenePos();
    qDebug() << container->scenePos();

    QGraphicsView view;
    view.setScene(&scene);
    view.centerOn(0, 0);
    view.show();

    return app.exec();
} 
```

那么是什么`QGraphicsWidget`提供了我在原始代码中遗漏的内容，以便`setPos`在容器项目上正确移动项目的位置`MyShape`？

# wcf - 在以编程方式构造的端点上以声明方式配置 WCF 行为扩展

> ID：10232385
> 
> 赞同：8
> 
> 时间：2012-04-19T16:18:40.713
> 
> 标签：wcf, app-config, endpointbehavior

我有一个想添加到 WCF 客户端的 WCF 行为扩展。但是，客户端是以编程方式构建的。端点地址可能会有所不同，但我知道类型。我可以以编程方式或在配置文件中添加行为（首选），但我只需要在配置文件中传递一些配置。

我不希望在常见行为（machine.config）中出现这种情况。

我可以以编程方式添加行为

```
endpoint.Behaviors.Add(new MyCustomBehavior()) 
```

但我宁愿在配置中进行，所以我也可以在那里配置扩展。

是否可以以声明方式向仅知道类型或接口的以编程方式构造的端点添加和配置端点行为扩展，同时以编程方式构造客户端端点？

```
<system.serviceModel>
  <client>
    <!-- Created programmatically -->
  </client>
<extensions>
  <behaviorExtensions>
    <add name="MyCustomBehavior" type="namespace.CustomBehaviors", MyAssembly, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" />
  </behaviorExtensions>   
</extensions>
  <behaviors>
    <endpointBehaviors>
      <behavior name="MyCustomBehavior">
        <MyCustomBehavior MyImportantBehaviorParam1="foo"  />
      </behavior>
    </endpointBehaviors>   
  </behaviors>
</system.serviceModel> 
```

当然，我可以将配置放在另一个部分，并在那里阅读我的行为，但如果可能的话，我宁愿使用 WCF 工具。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-19T17:28:28.667

为此，您需要为端点创建一个行为配置扩展。有关如何执行此操作的更多信息，请查看[https://docs.microsoft.com/en-us/archive/blogs/carlosfigueira/wcf-extensibility-behavior-configuration-extensions](https://docs.microsoft.com/en-us/archive/blogs/carlosfigueira/wcf-extensibility-behavior-configuration-extensions)。

**更新**：我现在看到你的问题。没有直接的方法可以将配置中声明的行为添加到通过代码创建的端点。不过，您仍然可以这样做，但是您需要使用一些反射来访问`CreateBehavior`行为配置扩展的方法（该方法受保护）以实际创建端点行为，以将其添加到通过代码创建的端点。下面的代码显示了如何做到这一点。

```
public class StackOverflow_10232385
{
    public class MyCustomBehavior : IEndpointBehavior
    {
        public void AddBindingParameters(ServiceEndpoint endpoint, BindingParameterCollection bindingParameters)
        {
            Console.WriteLine("In {0}.{1}", this.GetType().Name, MethodBase.GetCurrentMethod().Name);
        }

        public void ApplyClientBehavior(ServiceEndpoint endpoint, ClientRuntime clientRuntime)
        {
            Console.WriteLine("In {0}.{1}", this.GetType().Name, MethodBase.GetCurrentMethod().Name);
        }

        public void ApplyDispatchBehavior(ServiceEndpoint endpoint, EndpointDispatcher endpointDispatcher)
        {
            Console.WriteLine("In {0}.{1}", this.GetType().Name, MethodBase.GetCurrentMethod().Name);
        }

        public void Validate(ServiceEndpoint endpoint)
        {
            Console.WriteLine("In {0}.{1}", this.GetType().Name, MethodBase.GetCurrentMethod().Name);
        }
    }

    public class MyCustomBehaviorExtension : BehaviorExtensionElement
    {
        public override Type BehaviorType
        {
            get { return typeof(MyCustomBehavior); }
        }

        protected override object CreateBehavior()
        {
            return new MyCustomBehavior();
        }
    }

    [ServiceContract]
    public interface ITest
    {
        [OperationContract]
        string Echo(string text);
    }
    public class Service : ITest
    {
        public string Echo(string text)
        {
            return text;
        }
    }

    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        ServiceHost host = new ServiceHost(typeof(Service), new Uri(baseAddress));
        ServiceEndpoint endpoint = host.AddServiceEndpoint(typeof(ITest), new BasicHttpBinding(), "");

        var configuration = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
        ServiceModelSectionGroup smsg = configuration.GetSectionGroup("system.serviceModel") as ServiceModelSectionGroup;
        EndpointBehaviorElement endpointBehaviorElement = smsg.Behaviors.EndpointBehaviors["MyCustomBehavior_10232385"];
        foreach (BehaviorExtensionElement behaviorElement in endpointBehaviorElement)
        {
            MethodInfo createBehaviorMethod = behaviorElement.GetType().GetMethod("CreateBehavior", BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public, null, Type.EmptyTypes, null);
            IEndpointBehavior behavior = createBehaviorMethod.Invoke(behaviorElement, new object[0]) as IEndpointBehavior;
            endpoint.Behaviors.Add(behavior);
        }

        host.Open();
        Console.WriteLine("Host opened");

        ChannelFactory<ITest> factory = new ChannelFactory<ITest>(new BasicHttpBinding(), new EndpointAddress(baseAddress));
        ITest proxy = factory.CreateChannel();
        Console.WriteLine(proxy.Echo("Hello"));

        ((IClientChannel)proxy).Close();
        factory.Close();

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

以及此代码的配置：

```
<system.serviceModel>
    <extensions>
        <behaviorExtensions>
            <add name="myCustomBehavior_10232385" type="QuickCode1.StackOverflow_10232385+MyCustomBehaviorExtension, QuickCode1"/>
        </behaviorExtensions>
    </extensions>
    <behaviors>
        <endpointBehaviors>
            <behavior name="MyCustomBehavior_10232385">
                <myCustomBehavior_10232385/>
            </behavior>
        </endpointBehaviors>
    </behaviors>
</system.serviceModel> 
```

# web-services - 有比谷歌地图更便宜的 API 服务吗？

> ID：10232388
> 
> 赞同：1
> 
> 时间：2012-04-19T16:18:46.347
> 
> 标签：web-services, google-maps, cloud, bing-maps

在内部站点上使用 Google Maps Api 或 Bing Api 每年的**最低**费用为 5 位数 (USD)。

是否有更便宜的选择来执行以下操作？

*   对地址进行地理编码以获取经度和纬度
*   给定 10 个地址，找到一条通过它们的行车路线

在我们的例子中，只需要美国数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:59:50.553

如果您使用 Bing Maps Locations API（用于地理编码）和 Routes API（用于寻路），那么您只需为发生的可计费交易付费 - 没有最低费用。

这里的技术参考：http: [//msdn.microsoft.com/en-us/library/ff701722.aspx](http://msdn.microsoft.com/en-us/library/ff701722.aspx)

在以下位置注册密钥： http: [//www.bingmapsportal.com](http://www.bingmapsportal.com)

# facebook - 选定好友在线时短信通知

> ID：10232390
> 
> 赞同：0
> 
> 时间：2012-04-19T16:18:48.047
> 
> 标签：facebook, sms

我有一个想法开发一个 Facebook 应用程序，当他/她的朋友上线时通过 SMS 通知用户。用户可以预先选择他/她想要收到短信通知的朋友。

这是我第一次尝试为 Facebook 开发，所以我对该平台的经验和知识为零。我只是想知道我对这样一个应用程序的想法是否可行？Facebook 是否有用于 SMS 的 API？或者他们是否让第 3 方消息 API（例如我遇到的[这个API）与他们一起工作。](http://www.twilio.com/api/sms)

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:25:26.840

Facebook 应用程序实际上是在您的服务器上运行的，您可以做任何您想做的事情，只要您保持在应用程序所需信息的请求范围内。就目前而言，获取信息相对容易。我在 3 天内制作了一个极其复杂的应用程序。一旦你阅读并了解了如何提取某些信息，剩下的就是小菜一碟

# c# - 是否可以通过 SendKeys 发送特殊字符而不按 SHIFT 键？

> ID：10232392
> 
> 赞同：0
> 
> 时间：2012-04-19T16:18:54.690
> 
> 标签：c#, .net

我有一个应用程序在 SendKeys() 发送`SHIFT`击键时关闭（崩溃？）。可以通过简单的 shift 字符、`+`大写字母或通过发送辅助键（例如 .）间接调用 shift 键`@`。在上述任何一种情况下，应用程序都将关闭。这是第三方应用程序，所以我无法修复他们的代码。

我通过插入来解决资本问题`{CAPSLOCK}`。这并不能解决次要关键问题。是否可以在不调用 Shift 的情况下让 SendKeys 发送特殊字符？那些角色：`!@#$%^&*(){}|:"<>?`

[也许通过首先将它们转换为 unicode 表示或其他方式。我不想手动将所有这些字符映射到 Unicode。不确定底层代码是否仍会点击 SHIFT]？

**更新**
这是所要求的代码。

```
SetForegroundWindow(windowHandle);
string keySequence = stringVariable + "{TAB}" + "aa";//works fine
//string keySequence = stringVariable + "{TAB}" + "a+a";//crash
//string keySequence = stringVariable + "{TAB}" + "aS";//crash
//string keySequence = stringVariable + "{TAB}" + "a@";//crash
SendKeys.SendWait(keySequence); 
```

# sql-server - 2012 年 3 月 27 日对于 SQL Server 在 Varchar 到 Datetime 的转换中是否重要？

> ID：10232399
> 
> 赞同：1
> 
> 时间：2012-04-19T16:19:30.023
> 
> 标签：sql-server, stored-procedures, sql-server-2008-r2, sqlexception, outofrangeexception

我有一个存储过程，它接受一个作为字符串传入的日期时间参数。比如这样：

程序：

```
CREATE PROCEDURE [dbo].[MyFancySP]
   @MyStartDate datetime = NULL,
   @MyEndDate datetime = NULL
AS
.... 
```

称呼：

```
EXEC [dbo].[MyFancySP]
   @MyStartDate = N'01/01/2012',
   @MyEndDate = N'03/01/2012' 
```

存储过程一直这样工作。现在，这是有趣的部分。一旦我将日期更改为 2012 年 3 月 27 日或过去，我就会收到以下错误：**将 varchar 数据类型转换为 datetime 数据类型导致值超出范围。**

存储过程中唯一使用日期的地方是 where 子句。如果它与它有关，我也会在这里复制它：

```
WHERE
((@MyStartDate IS NOT NULL AND @MyEndDate IS NOT NULL 
AND d.SomeDate >= @MyStartDate AND d.SomeDate <= @MyEndDate) 
OR @MyStartDate IS NULL AND @MyEndDate IS NULL) 
```

任何想法为什么我会在 3 月 27 日或之后得到超出范围的异常？顺便说一下，这是在 SQL Server 2008 R2 上运行的。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:28:58.883

在每个新的数据库连接上执行以下操作。

```
SET DATEFORMAT DMY 
```

完成此操作后，您的问题应该会消失。我怀疑您的问题是由服务器语言环境的组合决定的，以及一个月中的日期是否是 13 日到 31 日。

您不仅会看到错误，还可能会在不注意的情况下获取不正确时期的数据；您的软件的其他层可能会对此进行纠正，但可能仅在某些情况下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:40:43.173

什么类型`d.SomeDate`？这是一个`NVARCHAR`偶然的机会吗？这可以解释它，因为在这种情况下，WHERE 子句将包含一个隐式转换，即[数据类型优先级](http://msdn.microsoft.com/en-us/library/ms190309.aspx)的规则状态应该作为`DATETIME`. 错误的明显随机性是由于查询扫描字段中具有无效日期的行这一简单事实`d.SomeDate`。在这种情况下，您正在处理数据纯度问题，您应该修复您的表，最好将列设置为 DATETIME。

此外：

*   `YYYYMMMDD`始终在字符串表示中使用规范的日期格式（无分隔符）： `EXEC [dbo].[MyFancySP] N'20120101', N'20120301';`. 此格式与主机区域设置、DATEFORMAT 和 LANGUAGE 设置无关，.

*   阅读[T-SQL 中的动态搜索条件](http://www.sommarskog.se/dyn-search-2008.html)。`WHERE column=@value or @value is null`停止查询性能优化死在其轨道上。阅读文章。

# python - Python - 函数的“_”参数

> ID：10232404
> 
> 赞同：0
> 
> 时间：2012-04-19T16:19:41.917
> 
> 标签：python, python-2.7

我是 python 新手，我已经看过好几次了：

```
>>> nums = [1,2,3,4,5]
>>> [(x,y) for x in nums for y in nums]
[(1, 1), (1, 2), (1, 3), (1, 4), (1, 5), (2, 1), (2, 2), (2, 3), (2, 4), (2, 5), (3, 1), (3, 2), (3, 3), (3, 4), (3, 5), (4, 1), (4, 2), (4, 3), (4, 4), (4, 5), (5, 1), (5, 2), (5, 3), (5, 4), (5, 5)]
>>> min(_, key=lambda pair: pair[0]/pair[1])
(1, 5) 
```

在上面的代码中，min 函数中的“_”的用途是什么，还有什么地方可以使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T16:22:31.443

在交互式解释器中，_ 用于引用最后返回的值。

例如

```
>>> 2 + 4
6
>>> _ + 4
10 
```

所以你也可以将它用作函数中的参数

```
>>> 2 + 4
6
>>> for i in range(_): print(i)
0
1
2
3
4
5 
```

# asp.net - 如何使用 net.pipe 绑定从 ASP.NET 管理工作流服务

> ID：10232414
> 
> 赞同：1
> 
> 时间：2012-04-19T16:20:05.300
> 
> 标签：asp.net, wcf, workflow-foundation, wcf-binding, net.pipe

我正在尝试通过标准命名管道端点管理托管在 AppFabric 上的工作流服务。我可以从控制台应用程序成功地做到这一点，但是当尝试从 ASP.NET 做同样的事情时，我得到“访问被拒绝”异常。

我知道这是应该在 web.config 中以某种方式解决的安全配置问题，但我不知道如何......

这是我使用的代码：

```
NetNamedPipeBinding binding = new NetNamedPipeBinding();
EndpointAddress addr = new EndpointAddress("net.pipe://localhost/ServiceLibrary/LongRunningService.xamlx/System.ServiceModel.Activities_IWorkflowInstanceManagement");

try
{
    var proxy = new WorkflowControlClient(binding, addr);
    Guid instanceId = new Guid("<<SOME WORKFLOW INSTANCE ID>>");
    proxy.Suspend(instanceId);
}
catch (Exception ex)
{
} 
```

**更新：** 理论上可以在没有安全性的情况下在 web.config 中注册端点（http 或 net.pipe）。在这种情况下，看起来一切正常......但我不想为网站上注册的每项服务都这样做。我认为应该有某种方法可以连接到已经注册的 net.pipe 端点。这是具有显式端点注册的 Web 配置（http、net.pipe）：

```
<behaviors>
  <serviceBehaviors>
    <behavior>
      <remove name="serviceCredentials" />
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false" />
      <sqlWorkflowInstanceStore instanceCompletionAction="DeleteNothing" instanceEncodingOption="None" instanceLockedExceptionAction="NoRetry" connectionStringName="ApplicationServerWorkflowInstanceStoreConnectionString" hostLockRenewalPeriod="00:00:30" runnableInstancesDetectionPeriod="00:00:05" />
      <workflowInstanceManagement authorizedWindowsGroup="" />
      <workflowUnhandledException action="AbandonAndSuspend" />
      <workflowIdle timeToPersist="00:00:30" timeToUnload="00:01:00" />
      <etwTracking profileName="Troubleshooting Tracking Profile" />
    </behavior>
    <behavior name="StnandardBehavior">
      <remove name="serviceCredentials" />
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false" />
      <sqlWorkflowInstanceStore instanceCompletionAction="DeleteNothing" instanceEncodingOption="None" instanceLockedExceptionAction="NoRetry" connectionStringName="ApplicationServerWorkflowInstanceStoreConnectionString" hostLockRenewalPeriod="00:00:30" runnableInstancesDetectionPeriod="00:00:05" />
      <workflowInstanceManagement authorizedWindowsGroup="" />
      <workflowUnhandledException action="AbandonAndSuspend" />
      <workflowIdle timeToPersist="00:00:30" timeToUnload="00:01:00" />
      <etwTracking profileName="Troubleshooting Tracking Profile" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<bindings>
  <basicHttpBinding>
    <binding name="httpSecurityOff" closeTimeout="00:10:00" openTimeout="00:10:00" receiveTimeout="00:10:00" sendTimeout="00:10:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
  </basicHttpBinding>
  <netNamedPipeBinding>
    <binding name="pipeSecurityOff" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" hostNameComparisonMode="StrongWildcard" maxBufferSize="65536" maxBufferPoolSize="524288" transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions" maxConnections="10" maxReceivedMessageSize="65536">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="None">
        <transport protectionLevel="None" />
      </security>
    </binding>
  </netNamedPipeBinding>
</bindings>
<services>
  <service name="LongRunningService" behaviorConfiguration="StnandardBehavior">
    <endpoint address="wce" contract="System.ServiceModel.Activities.IWorkflowInstanceManagement" binding="basicHttpBinding" bindingConfiguration="httpSecurityOff" kind="workflowControlEndpoint" />
    <endpoint address="wce" contract="System.ServiceModel.Activities.IWorkflowInstanceManagement" binding="netNamedPipeBinding" bindingConfiguration="pipeSecurityOff" kind="workflowControlEndpoint" />
    <endpoint contract="ILongRunningService" binding="basicHttpBinding" bindingConfiguration="httpSecurityOff" />
  </service>
</services> 
```

在这种情况下，用于连接到这个新端点的客户端代码应该有点不同：

```
 NetNamedPipeBinding binding = new NetNamedPipeBinding();
    binding.Security.Mode = NetNamedPipeSecurityMode.None;
    EndpointAddress addr = new EndpointAddress("net.pipe://{{MACHINE_NAME}}/ServiceLibrary/LongRunningService.xamlx/wce");

    try
    {
        var proxy = new WorkflowControlClient(binding, addr);
        Guid instanceId = new Guid(workflowInstanceId.Value);
        proxy.Suspend(instanceId);
        proxy.Close();
    }
    catch (Exception ex)
    {
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T07:05:18.150

您可以关闭安全性以查看 ASP.NET 应用程序池标识 ACL 是否存在问题：

```
NetNamedPipeBinding nnpb = new NetNamedPipeBinding();
nnpb.Security.Mode = NetNamedPipeSecurityMode.None; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T22:23:46.137

尝试将 Workflow ApplicationPool 用户放入用户组“AS_Administrators”中。需要重置 IIS 才能重新加载安全更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T20:50:31.890

您是否在 IIS 中为您的应用程序编辑了允许的网站/虚拟目录绑定？您需要[将 net.pipe 添加为允许的协议绑定](http://christopherdeweese.com/blog2/post/the-protocol-net-pipe-is-not-supportedwcfiis7was)。

# mediawiki - 如何在 MediaWiki 中定义文章标题？

> ID：10232419
> 
> 赞同：1
> 
> 时间：2012-04-19T16:20:24.287
> 
> 标签：mediawiki

我说的是使用 wiki 语法。通常，我通过创建链接然后对其进行编辑来创建文章，例如

```
[[secure-auth|Secure 2-Factor Authentication]] 
```

但这会导致该页面上的文章标题为“secure-auth”。我希望 URL 为 foo.com/mywiki/secure-auth ，但文章标题为“安全 2 因素身份验证”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T18:46:54.823

您不能拥有与文章标题不同的 URL 的文章。但是有一些方法可以解决这个问题：

1.  创建从“secure-auth”到“Secure 2-Factor Authentication”的[重定向。](http://meta.wikimedia.org/wiki/Help%3aRedirect)
2.  用于[`{{DISPLAYTITLE}}`](http://www.mediawiki.org/wiki/Help%3aMagic_words#Technical_metadata)修改页面标题的外观。
3.  配置您的 Web 服务器（很可能是 Apache 或 IIS）以按照您想要的方式[重写 URL 。](http://en.wikipedia.org/wiki/Rewrite_engine)

# ios - xcode获取UITabBar高度

> ID：10232424
> 
> 赞同：7
> 
> 时间：2012-04-19T16:20:40.590
> 
> 标签：ios, cocoa-touch

我的应用程序有一个 tabBarController 作为主控制器，我需要从任何视图控制器获取 tabBar 的高度，以便计算其余元素的正确位置。如何以编程方式获取它？谢谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-19T16:32:09.940

我强烈建议设置您的视图层次结构，以便外部视图由容器视图自动调整大小，然后更具体的内部视图可以检查外部布局视图的边界并在适当的时间适当地布置自己。

但是，如果您的要求使这成为不可能（或者非常复杂，并且您确实需要为所有内容指定点），您可以使用`UIViewController`'`tabBarController`属性获取选项卡栏的高度：

```
// from inside the view controller
CGSize tabBarSize = [[[self tabBarController] tabBar] bounds].size; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-23T13:32:10.917

对于**Swift**使用这个：

```
let tabBarHeight = tabBarController?.tabBar.bounds.size.height ?? 0 
```

当 tabBarController 不为 nil 时返回 tabBar 高度，否则为 0。

# php - PHP中可以使用私有常量吗？

> ID：10232434
> 
> 赞同：69
> 
> 时间：2012-04-19T16:21:13.957
> 
> 标签：php, constants, private

PHP 不允许

```
class Foo
{
    private const my_private_const; 
```

但当然允许

```
const my_const; 
```

所以实际上常量是全局的，因为我可以使用`my_const`任何地方访问`Foo::my_const`

有没有办法制作私有常量？

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2016-12-02T13:23:06.227

伙计们！[PHP 7.1.0 已发布](http://php.net/archive/2016.php#id2016-12-01-3)

现在可以使用带有类常量的可见性修饰符。

```
<?php
class Foo {
    // As of PHP 7.1.0
    public const BAR = 'bar';
    private const BAZ = 'baz';
}
echo Foo::BAR, PHP_EOL;
echo Foo::BAZ, PHP_EOL;
?> 
```

上述示例在 PHP 7.1 中的输出：

```
bar

Fatal error: Uncaught Error: Cannot access private const Foo::BAZ in … 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-04-19T17:38:26.307

答案是一个简单的“不”。PHP 不支持这个概念。你能做的最好的就是`private static`类中的一个变量，这当然不是那么好，因为它不是只读的。但你只需要解决它。

***编辑***

你的问题让我思考 - 这是我从未尝试过的东西，但可能会奏效。换句话说，“这是未经测试的”。但是假设你想要一个名为的“私有常量” `FOO`：

```
// "Constant" definitions
private function __get($constName){
    // Null for non-defined "constants"
    $val = null;

    switch($constName){
        case 'FOO':
            $val = 'MY CONSTANT UNCHANGEABLE VALUE';
            break;
        case 'BAR':
            $val = 'MY OTHER CONSTANT VALUE';
            break;
    }

    return $val;
} 
```

当然你的语法看起来有点奇怪：

```
// Retrieve the "constant"
$foo = $this->FOO; 
```

...但至少这是行不通的：

```
$this->FOO = 'illegal!'; 
```

也许值得一试？

干杯

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2016-06-03T22:20:11.953

请注意，类常量的可见性修饰符已在 PHP 7.1 中添加。

RFC：[支持类常量可见性](https://wiki.php.net/rfc/class_const_visibility)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-05-14T21:17:23.077

@Madbreaks 解决方法的简化版本：编写一个私有静态函数，返回私有“常量”的值：

```
private static function MY_CONSTANT() {
    return "constant string";
} 
```

用法：

```
public static function DoStuff() {
    echo self::MY_CONSTANT();
} 
```

# sql-server - 带 CASE 的 SQL 用户定义函数 - 请细化

> ID：10232439
> 
> 赞同：0
> 
> 时间：2012-04-19T16:21:34.767
> 
> 标签：sql-server, sql-server-2005

您能否建议我改进以下 Queru Please。

```
 ALTER FUNCTION GetTemplate_Lookup_id(@pid int)
    RETURNS  INT
    AS
    BEGIN
    DECLARE @Return int
    SELECT @Return= CASE @pid
    -- SOME OTHER Comment
    WHEN 208 THEN  4
    WHEN 283 THEN  4
    WHEN 402 THEN  4
    WHEN 42 THEN  4

    --SOME OTHER Comment
    WHEN 211 THEN  3
    WHEN 286 THEN 3
    WHEN 399 THEN 3
    WHEN 45 THEN 3

    --SOME OTHER Comment
    WHEN 209 THEN 1
    WHEN 284 THEN 1
    WHEN 397 THEN 1
    WHEN 43 THEN 1

    --SOME Other Comment
    WHEN 210 THEN 2
    WHEN 285 THEN 2
    WHEN 398 THEN 2
    WHEN 44 THEN 2

    ELSE 0
    END
    RETURN @Return
    END 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T16:27:44.453

```
CASE       
    WHEN @pid in (208, 283, 402, 42)
        THEN  4      
    WHEN @pid in (211, 286, 399, 45)
        THEN  3      
    WHEN @pid in (209, 284, 397, 43)
        THEN  1        
    WHEN @pid in (210, 285, 398, 44)
        THEN  2      
    ELSE 0     
END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T16:27:48.980

你不能用IN来清理吗？

```
...
SELECT @Return= CASE 
WHEN @pid IN (208, 283, 402, 42) THEN  4
WHEN @pid IN (211, 286, 399, 45) THEN  3
... 
```

# java - 字符串合并排序实现

> ID：10232441
> 
> 赞同：1
> 
> 时间：2012-04-19T16:21:40.803
> 
> 标签：java, string, sorting, merge

我一直在尝试在正在开发的程序中实现各种类型的排序。到目前为止，我已经设法对整数进行排序。为了使这个（合并）代码对 String 数组而不是 int 数组进行排序，必须进行哪些更改？时间复杂度会变化吗？如果是这样，是好是坏？

编辑 1：尝试使用 compareTo。似乎有些不对劲。返回错误，例如无法从字符串转换为整数，反之亦然。固定的

编辑 2：我在 if (array[low].compareTo(array[high]) >= 0) 行得到 NullPointerException。建议总是受欢迎的。

这是错误：

```
null  null  null  null  null  
Exception in thread "main" java.lang.NullPointerException
    at Merge.mergeSort_srt(Merge.java:28)
    at Merge.Sort(Merge.java:15)
    at Sort.main(Sort.java:73)

import java.io.File;

public class Merge 
{
    public void Sort (LinkedList listIn, int size) throws Exception
    {
        String[] mergeArray = new String[size] ;
        String textContent = null ;
        File outputFile ;

         for(int i = 0; i < mergeArray.length; i++)
           System.out.print( mergeArray[i]+"  ");
           System.out.println();
           mergeSort_srt(mergeArray,0, mergeArray.length-1);
           System.out.print("Values after the sort:\n");
           for(int i = 0; i <mergeArray.length; i++)
           System.out.print(mergeArray[i]+"  ");
           System.out.println();
           System.out.println("PAUSE");
    }

     public static void mergeSort_srt(String array[],int lo, int n)
     {
           int low = lo;
           int high = n;
           if (array[low].compareToIgnoreCase(array[high]) >= 0)
           {
               return;
           }

           int middle = ((n+1)/ 2);
           mergeSort_srt(array, low, middle);
           mergeSort_srt(array, middle + 1, high);
           int end_low = middle;
           int start_high = middle + 1;
           while ((array[low].compareToIgnoreCase(array[end_low]) <= 0) && (array[start_high].compareToIgnoreCase(array[high]) <= 0))
           {
               if(array[low].compareToIgnoreCase(array[start_high]) < 0)
               {
                   low++;
               }
               else
               {
                   String Temp = array[start_high];
           for (int k = start_high- 1; k >= low; k--)
           {
               array[k+1] = array[k];
           }
           array[low] = Temp;
           low++;
           end_low++;
           start_high++;
           }
           }
     }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T16:24:28.977

这取决于您要对字符串进行排序的方式，但[String](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#compareTo%28java.lang.String%29)`compareTo`的方法将帮助您实现这种排序：

> 返回： 如果参数字符串等于该字符串，则值为 0；如果此字符串按字典顺序小于字符串参数，则值小于 0；如果此字符串按字典顺序大于字符串参数，则值大于 0。

# javascript - 用 Javascript 存储 HTML5 画布的状态

> ID：10232442
> 
> 赞同：2
> 
> 时间：2012-04-19T16:21:41.917
> 
> 标签：javascript, html, canvas, store, restore

我正在尝试编辑[联合抽奖](http://anonym.to/?http://www.unionplatform.com/?page_id=2762)

我想存储画布的状态，所以如果有新访客进来，他会看到最后绘制的东西的状态。目前，画布为新访客清除了所有内容。

我与 union draw 有什么关系来存储画布的状态？

这样的事情有可能吗？如果是，如何？

```
var states = [];
function saveState(ctx){
  var c = document.createElement('canvas');
  c.width  = ctx.canvas.width;
  c.height = ctx.canvas.height;
  c.getContext('2d').drawImage(ctx.canvas,0,0);
  states.push(c);
  return c;
}

function restoreState(ctx,idx){
  var off = idx==null ? states.pop() : states[idx];
  ctx.drawImage(off,0,0);
} 
```

# android - 添加 LinearLayout 时强制关闭

> ID：10232446
> 
> 赞同：0
> 
> 时间：2012-04-19T16:21:47.263
> 
> 标签：android

如果没有这两行，我的 android 应用程序可以正常工作：

```
 layMain=  (LinearLayout) findViewById(R.id.layout_main);
    layMain.setOnTouchListener((OnTouchListener) this); 
```

调试显示系统在第一行之后被迫关闭。什么原因？谢谢你。

这是我的 onCreate() 方法，

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Set main.XML as the layout for this Activity
    setContentView(R.layout.main);

    // Add these two lines
    layMain=  (LinearLayout) findViewById(R.id.layout_main);
    layMain.setOnTouchListener((OnTouchListener) this); 

    // Add a few countries to the spinner
    Spinner spinnerCountries = (Spinner) findViewById(R.id.spinner_country);
    @SuppressWarnings({ "unchecked", "rawtypes" })
    ArrayAdapter countryArrayAdapter = new ArrayAdapter(this,
                android.R.layout.simple_spinner_dropdown_item,
                new String[] { "Canada", "USA" });
    spinnerCountries.setAdapter(countryArrayAdapter);

} 
```

堆栈跟踪：

```
04-19 19:31:12.146: DEBUG/AndroidRuntime(484): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
04-19 19:31:12.146: DEBUG/AndroidRuntime(484): CheckJNI is ON
04-19 19:31:13.834: DEBUG/AndroidRuntime(484): Calling main entry com.android.commands.pm.Pm
04-19 19:31:13.934: DEBUG/AndroidRuntime(484): Shutting down VM
04-19 19:31:13.954: INFO/AndroidRuntime(484): NOTE: attach of thread 'Binder Thread #3' failed
04-19 19:31:13.967: DEBUG/dalvikvm(484): GC_CONCURRENT freed 101K, 71% free 297K/1024K, external 0K/0K, paused 2ms+2ms
04-19 19:31:13.967: DEBUG/jdwp(484): Got wake-up signal, bailing out of select
04-19 19:31:13.974: DEBUG/dalvikvm(484): Debugger has detached; object registry had 1 entries
04-19 19:31:15.246: DEBUG/AndroidRuntime(495): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
04-19 19:31:15.246: DEBUG/AndroidRuntime(495): CheckJNI is ON
04-19 19:31:16.904: DEBUG/AndroidRuntime(495): Calling main entry com.android.commands.am.Am
04-19 19:31:16.984: INFO/ActivityManager(74): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=zaid.project.SlidingActivity/.SlidingActivityActivity } from pid 495
04-19 19:31:17.074: DEBUG/AndroidRuntime(495): Shutting down VM
04-19 19:31:17.124: INFO/AndroidRuntime(495): NOTE: attach of thread 'Binder Thread #3' failed
04-19 19:31:17.236: DEBUG/dalvikvm(495): GC_CONCURRENT freed 102K, 69% free 318K/1024K, external 0K/0K, paused 2ms+4ms
04-19 19:31:17.274: DEBUG/jdwp(495): Got wake-up signal, bailing out of select
04-19 19:31:17.274: DEBUG/dalvikvm(495): Debugger has detached; object registry had 1 entries
04-19 19:31:17.564: INFO/ActivityManager(74): Start proc zaid.project.SlidingActivity for activity zaid.project.SlidingActivity/.SlidingActivityActivity: pid=505 uid=10034 gids={}
04-19 19:31:19.584: DEBUG/AndroidRuntime(505): Shutting down VM
04-19 19:31:19.584: WARN/dalvikvm(505): threadid=1: thread exiting with uncaught exception (group=0x40015560)
04-19 19:31:19.634: ERROR/AndroidRuntime(505): FATAL EXCEPTION: main
04-19 19:31:19.634: ERROR/AndroidRuntime(505): java.lang.RuntimeException: Unable to start activity ComponentInfo{zaid.project.SlidingActivity/zaid.project.SlidingActivity.SlidingActivityActivity}: java.lang.ClassCastException: android.widget.ViewFlipper
04-19 19:31:19.634: ERROR/AndroidRuntime(505):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
04-19 19:31:19.634: ERROR/AndroidRuntime(505):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-19 19:31:19.634: ERROR/AndroidRuntime(505):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-19 19:31:19.634: ERROR/AndroidRuntime(505):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-19 19:31:19.634: ERROR/AndroidRuntime(505):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-19 19:31:19.634: ERROR/AndroidRuntime(505):     at android.os.Looper.loop(Looper.java:123)
04-19 19:31:19.634: ERROR/AndroidRuntime(505):     at android.app.ActivityThread.main(ActivityThread.java:3683)
04-19 19:31:19.634: ERROR/AndroidRuntime(505):     at java.lang.reflect.Method.invokeNative(Native Method)
04-19 19:31:19.634: ERROR/AndroidRuntime(505):     at java.lang.reflect.Method.invoke(Method.java:507)
04-19 19:31:19.634: ERROR/AndroidRuntime(505):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-19 19:31:19.634: ERROR/AndroidRuntime(505):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-19 19:31:19.634: ERROR/AndroidRuntime(505):     at dalvik.system.NativeStart.main(Native Method)
04-19 19:31:19.634: ERROR/AndroidRuntime(505): Caused by: java.lang.ClassCastException: android.widget.ViewFlipper
04-19 19:31:19.634: ERROR/AndroidRuntime(505):     at zaid.project.SlidingActivity.SlidingActivityActivity.onCreate(SlidingActivityActivity.java:28)
04-19 19:31:19.634: ERROR/AndroidRuntime(505):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-19 19:31:19.634: ERROR/AndroidRuntime(505):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
04-19 19:31:19.634: ERROR/AndroidRuntime(505):     ... 11 more
04-19 19:31:19.664: WARN/ActivityManager(74):   Force finishing activity zaid.project.SlidingActivity/.SlidingActivityActivity
04-19 19:31:20.344: WARN/ActivityManager(74): Activity pause timeout for HistoryRecord{405f6c20 zaid.project.SlidingActivity/.SlidingActivityActivity}
04-19 19:31:31.898: WARN/ActivityManager(74): Activity destroy timeout for HistoryRecord{405f6c20 zaid.project.SlidingActivity/.SlidingActivityActivity}
04-19 19:32:12.944: INFO/Process(505): Sending signal. PID: 505 SIG: 9
04-19 19:32:12.985: INFO/ActivityManager(74): Process zaid.project.SlidingActivity (pid 505) has died.
04-19 19:32:13.676: WARN/InputManagerService(74): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@406e5518 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:38:04.357

我怀疑问题出在这一行：

```
layMain = (LinearLayout) findViewById(R.id.layout_main); 
```

（这是 SlidingActivityActivity.java 中的第 28 行吗？）

您没有发布您的 XML 文件，所以我只是在这里猜测。很可能，`R.id.layout_main`指向`ViewFlipper`包含您的`LinearLayout`. 检查您的 XML 以确保您使用的是正确的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:38:52.563

我认为它可能是xml文件中的配置问题。这里有一个类似的线程：

[<TableLayout><TableRow><LinearLayout> 讨厌我。运行时强制关闭。安卓](https://stackoverflow.com/questions/3714148/tablelayouttablerowlinearlayout-hates-me-force-close-on-run-android)

# vim - ERB 文件缩进被 .rb 设置覆盖

> ID：10232447
> 
> 赞同：4
> 
> 时间：2012-04-19T16:21:49.163
> 
> 标签：vim, indentation

我已经安装并使用了文件类型插件。我有一个 ruby​​.vim 文件，`~/.vim/ftplugin/`它设置了 expandtab、softtabstop 和 shiftwidth。

我尝试对 .html.erb 文件执行相同的操作，这些文件似乎是 filetype `eruby`。我希望我的 erb 文件有制表符，制表位和 shiftwidth 为 4，但是 vim，无论我在 eruby.vim 中放什么，似乎总是在那之后读取 ruby​​.vim，出于某种原因，并且设置 sts 和 sw 只是就像我打开了一个普通的 ruby​​ 文件一样。

我也尝试将 eruby.vim 放在 下`ftplugin/after/`，但我得到了相同的结果。

到底是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T08:07:31.330

你应该把`eruby.vim`文件放在 `~/.vim/after/ftplugin/eruby.vim`. 应该没问题。

# c# - 在哪里可以找到 RegisterStartupScript 内容？

> ID：10232451
> 
> 赞同：0
> 
> 时间：2012-04-19T16:22:13.500
> 
> 标签：c#, asp.net, iis

我开发了一个 IIS 网站，它在使用 Visual Studio 托管时运行良好。然后我将它发送给客户，客户在本地将其托管在他的机器上，并且功能很好。然后，我们将相同的文件复制到他们的服务器上（它已经设置了 IIS 和用于外部 URL 的 DNS），并且大部分功能都可以正常工作。但是，其中一个`<asp:ImageButton`标签似乎只是刷新页面而不做任何事情（单击按钮时可能会发生 2 个结果，并且都调用 RegisterStartupScript() 并且我无法在页面上的任何地方看到脚本的结果）

我想在背景故事的所有杂乱无章之后，我的问题是：当您调用以下方法时，这是在页面上可见的东西吗，因为无论响应如何都应该调用它，所以我们至少可以寻找那个看看它是否完全通过了该方法。

```
Page.ClientScript.RegisterStartupScript() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:57:30.520

如果 .NET Framework 未正确注册或设置为错误的版本，我有时会遇到此类问题。检查服务器上为站点设置的 .NET 版本是否与您为其开发的版本相同。如果您的站点中缺少 ASP.NET 脚本或 .NET Framework 未正确注册到 IIS，您可能还需要使用 aspnet_regiis 来解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:01:37.807

如果您查看生成页面的来源，您应该会看到您的脚本或您在脚本参数中输入的任何内容，例如：

```
ClientScript.RegisterStartupScript(this.GetType(), "myKey", "CallStartup();", true); 
```

应呈现为：

```
<script type="text/javascript">
//<![CDATA[
CallStartup();Sys.Application.initialize();
//]]>
</script> 
```

# jsf-2 - Richfaces4.2 条件渲染问题

> ID：10232455
> 
> 赞同：1
> 
> 时间：2012-04-19T16:22:31.447
> 
> 标签：jsf-2, richfaces, facelets

我们正在从 JSP VDL 迁移到 Facelets VDL。我们有条件渲染标签需要移植到 Facelets。由于条件渲染中的 && 符号，.xhtml 编译失败。关于如何处理这个问题的任何想法？

```
<a4j:outputPanel styleClass="myclass" layout="block"
                         rendered="#{myBean.iscorrect && anotherBean.isCorrect}">
render something here ...

</a4j:outputPanel> 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:23:12.257

使用`and`而不是`&&`. 它也立即更加自我记录。

```
<a4j:outputPanel styleClass="myclass" layout="block"
    rendered="#{myBean.iscorrect and anotherBean.isCorrect}"> 
```

原因是因为 Facelets 是一种基于 XML 的视图技术，它`&`是 XML 中表示实体开始的特殊字符。您收到的确切的 Facelets 编译错误消息也应该暗示了这一点。其他需要注意的特殊字符是`<`和`>`在 EL 中应该分别替换为`lt`和`gt`。

此问题与 RichFaces 无关。在标准 JSF 标记中这样做时，您会遇到完全相同的问题。

顺便问一下，你真的有`isIscorrect()`getter方法吗？如果您有一个`private boolean correct;`with`public boolean isCorrect()`方法并且正在评估 as ，那对我来说会更有意义`rendered="#{myBean.correct and anotherBean.correct}"`。

# iphone - 如何在其他视图中使用 Linkedin-iphone current_user

> ID：10232457
> 
> 赞同：0
> 
> 时间：2012-04-19T16:22:38.993
> 
> 标签：iphone, objective-c, ios5, linkedin

我正在使用这个 LinkinClientLibrary [https://github.com/ResultsDirect/LinkedIn-iPhone](https://github.com/ResultsDirect/LinkedIn-iPhone)

我有点困惑，它是一个单视图应用程序演示，它工作，我已经设法让它在我自己的应用程序中工作。但是现在用户成功登录后，我想显示一个包含他所有的表格视图/她的连接，也许是连接的详细屏幕......

所以我现在有一个登录屏幕，在成功验证用户身份后，我对 tableview 执行 segue 以及如何在该 tableview 中使用当前用户连接，或者即使在视图中解释当前用户数据更简单（并检查用户仍处于连接状态）

谢谢弗雷德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:51:07.023

这里还有另一个 iPhone 示例客户端： [https ://github.com/synedra/LinkedIn-OAuth-Sample-Client](https://github.com/synedra/LinkedIn-OAuth-Sample-Client)

其中有一个配置文件视图，它使用来自 LinkedIn 的身份验证信息来调用 LinkedIn - 它演示了读取和写入功能。查看代码，看看它是否回答了您的问题。

# ios - iOS 5.1 CoreLocation，定位服务图标不消失

> ID：10232459
> 
> 赞同：4
> 
> 时间：2012-04-19T16:22:41.353
> 
> 标签：ios, core-location, cllocationmanager

我在我的应用程序中跟踪用户的位置，当我收到第一个位置更新时我会停止更新。这个想法是只获得一次用户位置的“快照”，而不是实际跟踪用户的移动。

但是在设备和模拟器上的 iOS 5.1 中，屏幕右上角的定位服务图标在跟踪开始后不会消失。

在 iOS 5.0 上（只能在模拟器中测试），图标按预期出现和消失。

有谁知道可能影响 iOS 5.1 中 CoreLocation 的任何错误？

我发现其他人报告了非常相似的情况，但是他说，如果您在多任务栏中强行终止该应用程序，则该图标将被删除，我的图标仍然存在，即使该应用程序根本没有运行也是如此。

另外（杀死应用程序后），如果我在设置中进入位置服务，我的应用程序会亮起紫色，我可以打开或关闭，切换顶部的位置图标没有问题。

看看这个人：[http ://bendodson.com/weblog/2012/03/14/ios-5-1-location-services-bug/](http://bendodson.com/weblog/2012/03/14/ios-5-1-location-services-bug/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-04T21:50:12.487

传统的方法：
`[locationManager stopUpdatingLocation];`
是不够的。您还必须添加：
`[locationManager stopMonitoringSignificantLocationChanges];`

这是[这个](https://stackoverflow.com/questions/5499594/gps-wont-stop-updating)问题的副本。

* * *

![在此处输入图像描述](../Images/e322a2384067eca823564e5f3797d127.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T16:25:23.973

我注意到它需要一段时间才能消失（大约 10 秒）。当视图消失时，您可能需要停止更新位置并将委托设置为 nil：

```
- (void)viewWillDisappear:(BOOL)animated
{
    if ([self isMovingFromParentViewController]) {
        // Popping the view
        NSLog(@"MyViewController isMovingFromParentViewController");
        [locationManager stopUpdatingLocation];
        [locationManager setDelegate:nil];
    }
    [super viewWillDisappear:animated];
} 
```

**注意：**此代码仅适用于 iOS 5，并且仅在视图被关闭并返回父视图时触发。相应调整。

顺便说一句，但您不应该依赖从位置管理器返回的第一个位置，除非您已经对其进行了新的测试。您可能会得到一个旧的缓存位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T07:08:21.037

> 这个想法是只获得一次用户位置的“快照”，而不是实际跟踪用户的移动。

也只是想得到一个快照。打电话后

```
[locationManager stopUpdatingLocation]; 
```

在 iPhone4S - iOS 5.1.1 上，导航图标不会立即消失，而是会延迟大约 10 秒。此外，我有时会在调用 stopUpdatingLocation 后收到另一个位置更新。

为了禁用导航图标，无需将位置管理器的委托设置为 nil。

# nosql - 如何进行 Memcached HA？

> ID：10232463
> 
> 赞同：1
> 
> 时间：2012-04-19T16:22:53.717
> 
> 标签：nosql, memcached, high-availability, duplication

我使用 memcached 来保存大约 5MB 的数据。大约 40% 的数据每秒钟更新一次，这导致 memcached 客户端和服务器之间的 qps 大约为 280 次，其中 get 和 set 各占一半的查询。除了实现这么大的数据交易，我也遇到了HA问题。

在我选择 memcached 之前，我也看过 Redis。但它似乎只有一个线程，不太可能在数据持久性上表现良好。此外，当 Redis 与 Memcached 一起使用时，它的客户端也不是那么容易访问。

但是如何使用 memcached 进行 HA？我应该如何保持主从 memcached 服务器之间的数据重复；当一个 memcached 服务器崩溃时，随之而来的是数据一致性问题。是否已经有一些用于 memcached HA 的好工具，或者是否有更好的 NoSql 数据库而不是 memcached？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-01T15:43:15.483

也许你可以使用 repcached(repcached.lab.klab.org) 或 magent( [https://code.google.com/p/memagent/](https://code.google.com/p/memagent/) )

# python - 欧拉计划 #2 - Python v3.2.3

> ID：10232465
> 
> 赞同：1
> 
> 时间：2012-04-19T16:23:06.580
> 
> 标签：python, fibonacci, memoization

我在 Project Euler的[问题 2上遇到问题。](https://projecteuler.net/problem=2 "欧拉计划：问题 2")目标是找出斐波那契数列中不超过四百万的偶数项之和。出于某种原因，我一直得到 0 作为我的输出。我究竟做错了什么？

```
total = 0
count = 0
term = 0
fibonacciMemo = {0:0, 1:1}

def main ():
    term = fibonacci (count)
    while (term <= 4000000):
        if (term % 2 == 0):
            total += term
        count += 1

def fibonacci (n):
    if not n in fibonacciMemo:
        fibonacciMemo [n] = fibonacci (n - 1) + fibonacci (n - 2)
    return fibonacciMemo [n]

print (total) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T16:29:14.000

一些问题：

*   您永远不会调用该`main`函数。您必须显式调用它才能执行它。

*   对变量`term`, `count`, `total`in的赋值`main`不会写入全局变量。`0`相反，将创建具有相同名称的不同局部变量，并且即使在`main`调用之后全局变量仍将具有该值。

    解决此问题的一种方法是`global term, count, total`在`main`. 但这是糟糕的设计。更好的是删除全局变量（使它们都本地化`main`），并`main`返回`total`. 然后`print(main())`会显示结果。

*   您只调用`fibonacci`一次`main`- 您需要将其放入循环中。否则循环将无限运行，因为`term`永远不会更新。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T16:28:14.937

这是因为你从不调用 main 或 fibonacci。你只需分配

```
total = 0
count = 0
term = 0
fibonacciMemo = {0:0, 1:1} 
```

进而

```
print (total) 
```

如果你想执行`main`，你必须明确地调用它，例如放在`main()`前面`print (total)`

您的代码中还有另一个问题。您尝试`total`从函数内递增全局变量。那是行不通的，除非你`global`向这个函数声明总。`global total`在第一次使用 total 之前放入函数来做到这一点。计数和术语同样的问题。而且您的控制流似乎也有问题。这不会产生正确的答案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T16:34:38.910

将此行添加到脚本的底部：

```
if __name__ == "__main__":
    main() 
```

`main()`当您将文件作为 Python 脚本运行时，它将调用。

顺便说一句，Project Euler 问题有一个更好的解决方案，您可以直接生成偶数斐波那契项而不是过滤。养成立即寻找智能解决方案的习惯，否则当问题变得具有挑战性时，您将碰壁。

# datagrid - Flex 4.5：通过 AS3 设置 textAlign GridColumn 的 itemRenderer

> ID：10232466
> 
> 赞同：0
> 
> 时间：2012-04-19T16:23:10.603
> 
> 标签：datagrid, flex-spark, itemrenderer, text-align

也许这真的很简单，但我不知道如何在 AS3（不是 mxml）中为默认 itemRenderer设置**“textAlign”属性。**我需要根据类型的属性来调整它，'int'或'Number'右对齐，'String'左对齐等等。

我正在使用 spark DataGrid 并监听 FlexEvent.CREATION_COMPLETE 事件；我无法将 itemRenderer 转换为 DefaultGridItemRenderer，并且 ClassFactory 不提供 setStyle 方法。

```
public function adjustGrid (e:Event):void
{
    for (var i:int=0; i<grd.columns.length; i++)
    {
        var gridColumn:GridColumn = GridColumn(grd.columns.getItemAt(i));
        DefaultGridItemRenderer(gridColumn.itemRenderer).setStyle("textAlign", "right");
    //ClassFactory(gridColumn.itemRenderer).setStyle("textAlign", "right");
    }
} 
```

任何帮助我都会感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:48:41.467

扩展 DefaultGridItemRenderer.......

```
override public function getTextStyles():TextFormat{
  var tf:TextFormat = super.getTextStyles();
  tf.align = "right";
  return tf;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-27T05:35:35.560

扩展 DefaultGridItemRenderer 并添加方法：

```
public function set styles(obj:Object):void
{
    for (var styleProp:String in obj) 
    {
        setStyle(styleProp,obj[styleProp]);
    }
} 
```

然后你可以放任何这样的样式：

```
 var itemRenderer:ClassFactory = new ClassFactory(DefaultGridItemRenderer);
    itemRenderer.properties = {
        styles:{textAlign:"right", fontWeight:"bold"},
        someOtherProp:"Hello"};
    rightList.itemRenderer = itemRenderer; 
```

# sqlite - 在 sqlite blackberry 中插入和检索日期值

> ID：10232471
> 
> 赞同：1
> 
> 时间：2012-04-19T16:23:41.303
> 
> 标签：sqlite, blackberry

如何将从 BB JDE 中的日期字段获取的日期（指定格式 dd-MM-yyyy）保存到 sqlite 数据库。我想以上述格式从 db 中插入和检索它。检索将基于范围搜索。

# list - Filemaker 值列表 - 减少和条件

> ID：10232475
> 
> 赞同：0
> 
> 时间：2012-04-19T16:23:48.963
> 
> 标签：list, filemaker

我正在尝试使用值列表来显示多个重复数据，但希望列表不仅显示在重复字段中，而且随着用户进行更多选择（几乎就像分层树）而缩小或减少。

这是我的关系中的递归还是只是条件重复字段显示基于任何计算的数据。

有点失落，但我想知道：

1.  从哪里开始定义值列表
2.  如何将重复字段连接到值列表
3.  如何根据上一个选择减少该列表

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T21:27:18.313

从这篇关于条件值列表的文章开始是值得的：http: [//help.filemaker.com/app/answers/detail/a_id/5833/~/creating-conditional-value-lists](http://help.filemaker.com/app/answers/detail/a_id/5833/~/creating-conditional-value-lists)

一旦您理解了这一点，您应该能够应用类似的推理来为您的解决方案创建最佳界面（可以是值列表、向下钻取门户或其他方法）

* * *

顺便说一句，使用重复字段通常会使您更难将数据输入和输出数据库以及对数据执行计算。您可能希望尽可能使用单个字段和相关表来代替重复字段。

# javascript - jQuery：如何在点击时删除所有元素的类？

> ID：10232478
> 
> 赞同：2
> 
> 时间：2012-04-19T16:23:57.367
> 
> 标签：javascript, jquery, addclass

我想知道是否有人可以改进我的代码...使用 jQuery 我试图在元素上应用一个类，我们只需单击并在其他元素上禁用该类。

您将在我的代码中看到我正在尝试在我刚刚单击的对象上应用一个类并删除其他元素上的所有类。

但就目前而言，正如您在*$("choice1-1").click(function()*

有人可以帮助我提供可以检测所有其他 ID 的代码吗？

**这是我目前的代码**

```
$(document).ready(function() 
{
    $('#stick-question-1').mouseenter(function() 
    {
        $('#stick-choices-1').show();

    });

    $('#stick-choices-1').mouseleave(function() 
    {
        $('#stick-question-1').show();
        $('#stick-choices-1').hide();
    });

    $("choice1-1").click(function()
    {
        $(this).addClass('hover-etat');
        $("#choice1-2").removeClass('hover-etat');
        $("#choice1-3").removeClass('hover-etat');
        $("#choice1-4").removeClass('hover-etat');
    });

}); 
```

我的HTML是这样的

```
 <div id="stick-choices-1" class="stick-choices">
        <a href="#" onclick="displayChoice1('Under 3\'9'); return false;" id="choice1-1">Under 3'9</a>
        <a href="#" onclick="displayChoice1('4\' to 5\'2'); return false;" id="choice1-2">4' to 5'2</a>
        <a href="#" onclick="displayChoice1('5\'3 to 5\'7'); return false;" id="choice1-3">5'3 to 5'7</a>
        <a href="#" onclick="displayChoice1('5\'8 and more'); return false;" id="choice1-4">5'8 and more</a>        
    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:26:05.090

只需使用：

```
$("#stick-choices-1 a").click(
    function(e) {
        e.preventDefault();
        $('.hover-etat').removeClass('hover-etat');
        $(this).addClass('hover-etat');
    }); 
```

我已经更改了您的初始选择器，以便`click`通过单击元素中的任何链接来触发事件`#stick-choices-1` `div`，它会阻止单击链接的默认操作（假设您希望停止默认设置），`hover-etat`从任何*具有*该类的元素，然后将该类名应用于该`this`元素。

`hover-etat`但是，将 jQuery 搜索具有该类的元素的范围限制为同一元素中的那些元素`#stick-choices-1`，而不是整个文档可能是有意义的：

```
$("#stick-choices-1 a").click(
    function(e) {
        e.preventDefault();
        $('#stick-choices-1 .hover-etat').removeClass('hover-etat');
        $(this).addClass('hover-etat');
    }); 
```

或者：

```
$("#stick-choices-1 a").click(
    function(e) {
        e.preventDefault();
        $(this).siblings('.hover-etat').removeClass('hover-etat');
        $(this).addClass('hover-etat');
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:27:07.137

它会正常工作：

```
$("#choice1-1").click(function(){
    $(".stick-choices a").each(function(){
            $(this).removeClass(".hover-etat");
    });
    $(this).addClass(".hover-etat");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T16:28:45.470

这应该这样做，并为*所有*链接注册此处理程序。

```
$('#stick-choices-1 > a').click(function(ev) {
    $(this).addClass('hover-etat').siblings().removeClass('hover-etat');
    ...
}); 
```

请注意使用`.siblings()`以确保只有同一组中的链接受到影响，并且不会向单击的链接发送不必要的类更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T16:29:11.660

此点击事件适用于所有选择：

```
$('.stick-choices a').click(function(e){
    $(this).siblings('.hover-etat').removeClass('hover-etat');
    $(this).addClass('hover-etat');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T16:29:49.663

```
$('div.stick-choices a').on('click', function(e) {
   e.preventDefault();
   $(this).addClass('hover-etat').siblings('a').removeClass('hover-etat');
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T16:29:57.773

> $("a", $("#stick-choices-1")).click(function(){
> 
> ```
>  $(".hover-etat").removeClass('hover-etat');
>    $(this).addClass('hover-etat'); 
> ```
> 
> });

可能是这样的吗？

# jquery - 评论系统 - 关于串联

> ID：10232479
> 
> 赞同：0
> 
> 时间：2012-04-19T16:23:57.640
> 
> 标签：jquery, concatenation

我有串联的帖子列表，用户可以对每个帖子发表评论（并且评论通过 jquery 获得实时更新）。我决定，因为我为每个帖子使用了一个唯一的变量，所以我可以将它附加到更新 div 的 id 的末尾，也可以将它附加到提交按钮的类的末尾，如下所示：

```
$my_list .= '
    <form action="#" method="post">
        <textarea class="commentbox" name="comment" id="comment"></textarea>
        <input type="hidden" name="post_id"  id="post_id" value=' . $post_id . ' />
        <input type="hidden" name="member_id" id="member_id" value=' . $id . ' />
        <input type="submit" class="submit' . $post_id . '" value="Comment " />
    </form>
    ' . $comment_list . ' // existing comments queried from the db
    <ol id="update' . $post_id . '"></ol> // jquery-ed live update comments
';
?> 
```

与上述相关的一切看起来都很好（即每个提交按钮都有一个唯一的类，每个更新 div 都有一个唯一的 id）。

所以我现在遇到的问题是：如何让我的 js 函数识别每个独特的“提交”？这就是我现在拥有的（下）。但是每当我点击帖子旁边的提交按钮时，什么都没有发生，我的页面只是重新加载，并且一个“#”被添加到 URL 的末尾。我检查了我的实时 http 标头，看起来评论与正确的唯一 $post_id 一起发布......但我相信它在 js 函数处停止。

```
<head>
<script type="text/javascript">
$(function() {
    $(".submit<?php echo $post_id; ?>").click(function() {
        var post_id = $("#post_id").val();  // this is the unique id for each story, in a hidden input
        var member_id = $("#member_id").val();  // this is a member for the commenter, in a hidden input
        var comment = $("#comment").val();  // this is the comment from the input box
        var dataString = 'post_id='+ post_id + '&member_id=' + member_id + '&comment=' + comment;   
        if(comment=='') {
            alert('Please enter a valid comment');
        } else {
            $("#flash").show();
            $("#flash").fadeIn(400).html('<span class="loading">Loading Comment...</span>');
            $.ajax({
                type: "POST",
                url: "commentajax.php",
                data: dataString,
                cache: false,
                success: function(html){
                    $("#update<?php echo $post_id; ?>").append(html);
                    $("#update<?php echo $post_id; ?> li:last").fadeIn("slow");
                    document.getElementById('post_id').value='';
                    document.getElementById('member_id').value='';
                    document.getElementById('comment').value='';
                    $("#comment").focus();
                    $("#flash").hide();
                }
            });
        }
        return false;
    });
});
</script>
</head> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:37:16.253

尝试替换`<input type="submit" class="submit' . $post_id . '" value="Comment " />`为`<input type="button" class="submit' . $post_id . '" value="Comment " />`，我认为`return false`不会停止这里的表单提交！但无法测试这个！

# unit-testing - 您的 Web 应用程序上的测试堆栈是什么？

> ID：10232480
> 
> 赞同：-1
> 
> 时间：2012-04-19T16:24:00.557
> 
> 标签：unit-testing, testing, selenium, phpunit, integration-testing

我想了解用于测试您的 Web 应用程序的测试软件。对我来说，我使用

[PHPUnit](https://github.com/sebastianbergmann/phpunit)用于 PHP 单元测试，尝试使用[QUnit](http://docs.jquery.com/Qunit)进行 Javascript 测试 对于 Web 用户界面，我使用[Selenium](http://seleniumhq.org/)但后来，我在测试 jQuery 和一些 javascript 的方式上遇到了麻烦。我使用 Apache Benchmark 进行负载测试。

你呢，你喜欢的软件堆栈让你对你的 Web 应用程序充满信心吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:31:59.990

嗯，我还在学习，但这是我用的

Java - JUnit/EclEmma

Javascript - 茉莉花/JSCoverage

# php - 更改 Apache CustomURL / 重写

> ID：10232481
> 
> 赞同：1
> 
> 时间：2012-04-19T16:24:02.583
> 
> 标签：php, apache, url-rewriting

我在 .htaccess 文件中设置了以下重写：

```
RewriteRule ^(\w+)/?$ profile.php?customURL=$1 [NC,L] 
```

它适用于 az AZ 0-9，但现在我需要添加对连字符的支持。

所以我把它改成：

```
RewriteRule ^[a-zA-Z0-9\-]+$ profile.php?customURL=$1 [NC,L] 
```

但是现在 PHP 看不到里面的内容了`$_GET["customURL"]`（即它是空的）。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:29:11.457

将规则更改为：

```
RewriteRule ^([a-zA-Z0-9\-]+)/?$ profile.php?customURL=$1 [NC,L] 
```

它就像一个魅力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T16:29:58.670

将其更改为：

```
RewriteRule ^([a-zA-Z0-9\-]+)?$ profile.php?customURL=$1 [NC,L] 
```

现在应该可以工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T16:29:41.533

看起来您跳过括号以 1 美元进行分组：

```
^([a-zA-Z0-9\-])+$ profile.php?customURL=$1 [NC,L] 
```

# c# - 当被问到时，让 WCF Web 服务看起来像一个 ASMX Web 服务？

> ID：10232484
> 
> 赞同：0
> 
> 时间：2012-04-19T16:24:19.540
> 
> 标签：c#, wcf, web-services, xcelsius

我目前正在使用 Xcelsius 连接到我的 WCF Web 服务，但是它不起作用。谷歌搜索我发现 Xcelsius 无法连接到 WCF Web 服务，但似乎无法找出原因。

假设 Web 服务泄露了它是什么类型（WCF 或 ASMX），是否有可能进行欺骗？在浏览器中更改用户代理的类似操作。

### 编辑

Xcelsius 期待服务 WSDL 的地址 (http://localhost:3951/Service1.svc?wsdl)。至于我的 WCF 服务发出的格式，它是

```
public string GetData(int value)
{
    return string.Format("You entered: {0}", value);
} 
```

我也尝试过使用 FlatWSDL，但这似乎并没有改变任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:56:45.327

只需`basicHttpBinding`在您的服务中使用，对于任何消费者来说，它看起来就像一个 ASMX 服务。

如果消费者期待一种特定的格式，那可能还不够。然后，您需要复制预期的格式。

# php - 为构造函数添加斜线返回类型

> ID：10232488
> 
> 赞同：1
> 
> 时间：2012-04-19T16:24:33.843
> 
> 标签：php, phpdoc, phpstorm

PhpStorm 是否有特定原因在构造函数的返回类型前加上斜杠？

```
class MyTest
{
    /**
     * Constructor
     *
     * @return \MyTest
     **/
    public function __construct(){}
} 
```

它在 PHPDoc 本身中是否有特殊含义？还是一些特定的 IDE 功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T16:28:26.013

它基本上意味着`MyTest`驻留在全局[`namespace`](http://php.net/manual/en/language.namespaces.php).

# javascript - 下拉菜单高度的 CSS 和 jQuery 问题

> ID：10232490
> 
> 赞同：0
> 
> 时间：2012-04-19T16:24:37.450
> 
> 标签：javascript, jquery, css, height, drop-down-menu

所以我做了一些下拉菜单。下拉菜单嵌套在 li 中。出于样式原因，我需要在页面首次加载时将下拉高度设置为 0px 并进行一些填充。我所有的下拉菜单都有不同的高度。当我也将 100% 作为动画高度时，它不起作用。

这是一个链接：[http ://www.jasonfoumberg.com/test/writing.html](http://www.jasonfoumberg.com/test/writing.html)

我如何让下拉动画到适当的高度。每个下拉菜单都有不同数量的项目。

jQuery

```
$(document).ready(function () {
    var defHeight = $('ul:first', this).height();
    console.log(defHeight);

    $("ul li").hover(

    function () {

        $('ul:first', this).animate({
            height: "100%"
        });
    }, function () {
        $('ul:first', this).animate({
            height: "0px"
        });
    });
});​ 
```

HTML

```
<div id="mainWrapperContent">
    <div id="writingMenu">
            <ul>
            <li><a href="">critical reviews</a>
                <ul>
                    <li><a href="">frieze</a></li>
                    <li><a href="">Modern Painters</a></li>
                    <li><a href="">photograph</a></li>
                    <li><a href="">sculpture</a></li>
                    <li><a href="">NewCity</a></li>
                </ul>                
            </li>
            <li><a href="">Exhibition Catalogs</a>
                <ul>
                    <li><a href="">Catalog One</a></li>
                    <li><a href="">Catalog Two</a></li>
                    <li><a href="">Catalog Three</a></li>
                    <li><a href="">Catalog Four</a></li>
                    <li><a href="">Catalog Five</a></li>
                </ul>                
            </li>
            <li><a href="">BreakOut Artists</a>
                <ul>
                    <li><a href="">2012</a></li>
                    <li><a href="">2011</a></li>
                    <li><a href="">2010</a></li>
                    <li><a href="">2009</a></li>
                    <li><a href="">2008</a></li>
                </ul>                
            </li>
            <li><a href="">Cover Stories</a>
                <ul>
                    <li><a href="">Catalog One</a></li>
                    <li><a href="">Catalog Two</a></li>
                    <li><a href="">Catalog Three</a></li>
                    <li><a href="">Catalog Four</a></li>
                    <li><a href="">Catalog Five</a></li>
                    <li><a href="">Catalog One</a></li>
                    <li><a href="">Catalog Two</a></li>
                    <li><a href="">Catalog Three</a></li>
                    <li><a href="">Catalog Four</a></li>
                    <li><a href="">Catalog Five</a></li>
                </ul>                
            </li>
            </ul>
    </div><!-- writing Menu -->    
</div><!-- mainWrapper Content -->​ 
```

CSS

```
#writingMenu a {
    margin: 0px 0px 0px 0px;
    padding: 12px 5px 5px 5px;
    text-align: right;
    -webkit-transition: all .3s ease;
    -moz-transition: all .3s ease;
    -o-transition: all .3s ease;
    -ms-transition: all .3s ease;
    transition: all .3s ease;
    background: #ffffff;
    color: #B3B3B3;
    min-width: 140px !important;
    display: block;
}

#writingMenu a:hover {
    color: #37342e;
}

#writingMenu ul li ul {
    position: absolute;
    width: 90%;
    float: left;
    overflow: hidden;
    border-left: thin solid black;
    border-bottom: thin solid black;
    border-right: thin solid black;
    margin-left: -5px;
    padding-top: 5px;
    background-image: url(images/speckled_backgrounddk.jpg);
    display: block;
    height: 0px;
}

#writingMenu ul li ul li {
    background-image: none;
    float: none;
}

#writingMenu ul li ul a {
    margin: 0px;
    padding: 0px;
    text-align: left;
    -webkit-transition: all .3s ease;
    -moz-transition: all .3s ease;
    -o-transition: all .3s ease;
    -ms-transition: all .3s ease;
    transition: all .3s ease;
    color: #B3B3B3;
    background-color: transparent;
    background-image: none;
    text-transform: lowercase;
    color: #999999;
}​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T22:39:53.270

如果您有兴趣，我制作了一个仅基于 css 的 dd 菜单......

HTML =>

```
<!-- by rocky -->
<div id="wrapper">
    <div id='navMenu'>

    <ul>
    <li><a href="#">Menu1</a>

    <ul>

    <li><a href="#">Dropdown1</a></li>
    <li><a href="#">Dropdown2</a></li>
    <li id="submenu"><a href="#">Dropdown3</a>
    <ul>
        <li><a href="#">Submenu 1</a></li>

        <li><a href="#">Submenu2</a></li>
        <li><a href="#">Submenu3</a></li>
        </ul>
    </li>

    </ul> <!-- End of Menu1-->

    </li> <!-- Menu2 -->

    <li><a href="#">Menu2</a>
    <ul>

    <li><a href="#">Dropdown2</a>       </li>
    <li id="submenu"><a href="#">Dropdown2</a>
        <ul>
            <li><a href="#">Dropdown2</a></li>
        </ul>
        </li>
    <li><a href="#">Dropdown2</a></li>

    </ul> <!-- End Inner UL -->

    </li> <!-- ABOUT -->
    <li><a href="#">Menu3</a>
    <ul>

    <li><a href="#">Submenu3</a></li>
    <li id="submenu"><a href="#">Submenu3</a>
        <ul>
    <li><a href="#">Submenu3</a></li>
        </ul>
        </li>
    </ul> <!-- End Inner UL -->

    </li> <!-- End main LI -->
    </ul> <!-- End main UL -->

    </div> <!-- End Nav -->

    </div> <!-- End wrapper --> 
```

和CSS：

```
#navMenu {
    margin: 0;
    padding: 0;
}

#navMenu ul{
    margin: 0;
    padding: 0;
    line-height: 30px;
}

#navMenu li{
    margin: 0;
    padding: 0;
    list-style: none;
    float: left;
    position: relative;
}

#navMenu ul li a {
    text-align: center;
    text-decoration: none;
    height: 30px;
    width: 150px;
    display: block;
    color: #000;
}

#navMenu ul ul {
    position: absolute;
    visibility: hidden;
    top: 30px;
}

#navMenu ul li:hover ul {
    visibility: visible;
}

#navMenu ul li ul a:hover {
    color: #999;
}

#navMenu ul ul li#submenu ul {
    position: absolute;
    visibility: hidden;
    top: 30px;
}

#navMenu ul ul li#submenu:hover ul {
    margin-top: -30px;
    margin-left: 105px;
    visibility: visible;
} 
```

这里有一个演示：http: [//dbwebb.se/style/ ?id=152](http://dbwebb.se/style/?id=152)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:35:15.557

```
 $(document).ready(function() {
    var defHeight = $('ul:first',this).height();
         console.log(defHeight);

        $("ul li").hover(
            function () {

                $('ul:first',this).stop().animate({height : "toggle"});
             }, 
            function () {
                 $('ul:first',this).stop().animate({height : "toggle"});
            }); 
            }); 
```

没试过，但这应该可以

# android - 如何从动态加载的类中调用 .showDialog()

> ID：10232492
> 
> 赞同：0
> 
> 时间：2012-04-19T16:24:52.973
> 
> 标签：android, dialog, dynamic-controls

我正在创建一个允许插件视图的家庭自动化应用程序。我已经能够在单独的项目（apk）中创建一个类作为示例插件：

```
public class MyTestClass_IRDroidUIPlugIn extends Button implements IRDroidInterface{
    Context mContext;
    public MyTestClass_IRDroidUIPlugIn(Context context) {
        super(context);
        mContext = context;
        setText("I was loaded dynamically! (1)");
        setOnClickListener(new View.OnClickListener() {  
            public void onClick(View v) {  
                    // how do I show the dialog from here? 
                Activity.showDialog(1);
            }}  
                );
    }
    public Dialog buildConfigDialog(int ID){
        AlertDialog.Builder builder = new AlertDialog.Builder(mContext);
        builder.setMessage("Click the Button...(1)")
           .setCancelable(false)
           .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                    dialog.dismiss();
               }           
           });
        return builder.create();
    }

} 
```

我可以在运行时加载这个类并创建它的一个实例：

```
 try {
        final File filesDir = this.getFilesDir();
        final File tmpDir = getDir("dex", 0);
        final DexClassLoader classloader = new DexClassLoader( filesDir.getAbsolutePath()+"/testloadclass.apk",
                tmpDir.getAbsolutePath(),
                null, this.getClass().getClassLoader());
        final Class<View> classToLoad = 
                (Class<View>) classloader.loadClass("com.strutton.android.testloadclass.MyTestClass_IRDroidUIPlugIn");
        mybutton = (View) classToLoad.getDeclaredConstructor(Context.class).newInstance(this);
        mybutton.setId(2);
        main.addView((View)mybutton);
      } catch (Exception e) {
        e.printStackTrace();
    }

    setContentView(main);
}
protected Dialog onCreateDialog(int id) {
    switch (id) {
        case 1:
            return ((IRDroidInterface) mybutton).buildConfigDialog(id);
    }
    return null;
} 
```

我希望插件能够显示配置对话框。有没有办法可以将 Activity 对象传递给此类，以便它可以使用 .showDialog(ID)。这将是理想的，以便可以正确管理对话生命周期。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:07:02.563

也许我错过了一些东西，但你为什么不能做这样的事情？

```
public class MyTestClass_IRDroidUIPlugIn extends Button implements IRDroidInterface{
    Activity mContext;
    public MyTestClass_IRDroidUIPlugIn(Activity context) {
        super(context);
        mContext = context;
        ...
        setOnClickListener(new View.OnClickListener() {  
            public void onClick(View v) {  
                mContext.showDialog(1);
            }}  

        );

.....
} 
```

当你创建这个类时，你已经传入`Activity`了这个类——所以只需使用它。

# sql - SQL Server 2012 \ VS 2010 - 自定义文件扩展名的 SQL 语法高亮

> ID：10232503
> 
> 赞同：4
> 
> 时间：2012-04-19T16:25:50.837
> 
> 标签：sql, visual-studio-2010, syntax-highlighting, sql-server-2012

在工作中，我们的 SQL 代码有多种文件扩展名：`.PRC`存储过程、`.TAB`表脚本等。

在以前版本的 SQL Server Management Studio 中，我可以将每个扩展设置为在`Tools > Options > Text Editor > File Extension`菜单中使用 SQL 语法突出显示。

但在 SQL Server 2012 中，选项`"SQL Query Editor"`消失了：

![在此处输入图像描述](../Images/f45adb107bc29695294bf764c66f6188.png)

任何人都知道解决方法，我尝试了一些注册表黑客无济于事）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T18:42:36.553

我添加了`*`一个由 SQL 查询编辑器处理的文件扩展名，现在我在可用编辑器的下拉列表中有“ *SQL 查询编辑器”选项。*我编辑的 reg 键是：

> HKEY_CURRENT_USER\Software\Microsoft\SQL Server Management Studio\11.0_Config\Editors{B5A506EB-11BE-4782-9A18-21265C2CA0B4}\Extensions

我将 DWORD 值与“sql”扩展名的值匹配。

编辑：看起来这只适用于 SMSS 的会话寿命。当我关闭并重新打开 SMSS 时，PRC 映射被删除，我创建的 DWORD 键也被删除。希望我能找到一种方法来保持它的持久性。

# javascript - javascript regExp 适用于测试人员，但不适用于我的网站

> ID：10232504
> 
> 赞同：0
> 
> 时间：2012-04-19T16:25:59.073
> 
> 标签：javascript, regex

用于测试 mm/yyyy 的简单 RegExp 适用于所有在线 RegExp 测试人员，但不适用于我的网站。

```
var re=new RegExp("^(1[0-2]|0[1-9]|\d)\/(20\d{2}|19\d{2}|0(?!0)\d|[1-9]\d)$");
if(!re.test(theForm.ceDate.value)) alert("Date must be MM/YYYY"); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T16:28:47.760

您的字符串文字正在吞噬`\`转义符。

相反，您应该使用正则表达式文字：`/(1[0-2]|0[1-9]|\d)\/(20\d{2}|19\d{2}|0(?!0)\d|[1-9]\d)$/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:53:21.960

## JavaScript

```
function Validation() {
    debugger;
    var reg = new RegExp('^(0[1-9]|1(1|2)|[0-9])\\/(20[0-9]{2}|19[0-9]{2})$');
    var txt = document.getElementById('<%= txt.ClientID %>');
    if (txt.value.match(reg) != null)
        return true;
    else
        return false;
} 
```

* * *

## 标记

```
<asp:LinkButton runat="server" ID="lnkSubmit" Text="Submit" 
                                 OnClientClick="return Validation();" />
<asp:TextBox ID="txt" runat="server"></asp:TextBox> 
```

# r - 用于数组的 xtable

> ID：10232506
> 
> 赞同：0
> 
> 时间：2012-04-19T16:26:18.857
> 
> 标签：r, plyr, sweave, xtable, knitr

我正在尝试将 xtable 用于 3 维数组。我最小的例子是

```
Test <- 
structure(1:8, .Dim = c(2L, 2L, 2L), .Dimnames = list(c("A1", 
"A2"), c("B1", "B2"), c("C1", "C2")))

library(plyr)
library(xtable)

a_ply(.data=Test, .margins=3, function(i) {
  xtable(x = Test[, , i])
      }
) 
```

这会产生以下错误：

```
 Error in xtable(x = Test[, , i]) : subscript out of bounds 
```

如果您能给我一些解决此问题的指示，我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T16:37:53.027

`a_ply`不返回任何东西，所以希望你的函数能保存这些或类似的东西。您传递给函数的 i 是基于您提供的边距的数组的子集。所以你发送它是 2x2 数组 C1，然后是 2x2 数组 C2：

```
a_ply(Test, 3, function(i) {print(i); print('-----')}) 
```

所以索引到你的`Test`数组`i`没有意义。

为什么不只是：

```
apply(Test, 3, xtable) 
```

或使用 plyr：

```
alply(Test, 3, xtable) 
```

对于针织机：

```
a_ply(Test, 3, function(i) print(xtable(i))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-27T18:57:25.497

这是一个旧线程，但我在当前项目中遇到了类似的问题。我想要一个 HTML 表格输出，其标题使用我的数组的第三个暗淡的名称标记。

通过以不同方式使用我的数组来克服这个问题。这个[答案](https://stackoverflow.com/a/16674755) 使我找到了解决方案。

```
x <- 1:dim(Test)[3]
l_ply(x, 
      function(i) cat(print(
                           xtable(Test[,,i],
                                  caption = paste("Heading ",
                                          dimnames(Test)[[3]][i],
                                          sep = "")),
                           type = "html", caption.placement = "top"), 
                         file = "Test.html",
                         append = TRUE)) 
```

# ruby-on-rails - 在 Rails 3 活动记录查询中使用 WHERE 子句

> ID：10232507
> 
> 赞同：4
> 
> 时间：2012-04-19T16:26:27.920
> 
> 标签：ruby-on-rails, ruby, activerecord

我是 Rails 新手，我正在尝试使用 where 方法从我的数据表中检索记录。但是，使用它似乎不会返回任何结果。

```
employee = Employee.where("first_name = ?", "bill")  #doesn't work

employee = Employee.where(:first_name => "bill")  #doesn't work

employee = Employee.find_by_first_name("bill")  #works 
```

我正在通过打印来测试结果`employee.first_name`，就像我说的前两个不返回任何东西，而第三个返回“账单”。这里发生了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T16:34:03.167

前两个将返回一个数组（具有该名称的所有员工）。 `Employee.find_by_first_name`只会返回第一个结果——`Employee.find_all_by_first_name`应该像前两个查询一样返回一个数组。

看看这是否符合您的预期：

```
Employee.where("first_name = ?", "bill").first 
```

（为了完整起见，实际返回的是一个*像*数组一样的`Employee.where`可链接范围对象）

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T16:34:54.240

跑步时前两个会发生什么`employee.first_name`？在我看来，您应该得到一个 no method 异常，因为 Array 没有 method `first_name`。

使用 where 子句不会自动返回找到的第一个员工模型对象，它会返回一个 ActiveRecord::Relation，然后当您尝试访问它时，rails 将自动将其计算为一个数组。where 子句将返回所有具有 first_name == "bill" 的员工

`find_by_first_name`即使有多个名为“bill”的员工，也只会返回 Employee 类的单个实例。

If you were to try `employee.first.fist_name` after running the first two, I believe you would find that you get "bill" if everything in the database is correct and there is an employee with the first name of "bill".*

# php - 从字符串中获取浮点值

> ID：10232508
> 
> 赞同：1
> 
> 时间：2012-04-19T16:26:36.477
> 
> 标签：php, regex, string

我有以下类型的字符串列表：

```
27 公里
56.1公里
45公里
96.2公里
87 千

```

我想得到每一个的数值。正如您所看到的，其中一些是浮点值，有时会输入错误的后缀“km”。我正在寻找的输出如下：

```
27
56.1
45
96.2
87

```

我在网上找到了将字符串转换为数字的正则表达式，但他们不认为某些值可以是浮点数，我该如何编写函数或找到满足我要求的表达式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T16:30:13.750

不需要正则表达式，只需使用[`floatval`](http://php.net/manual/en/function.floatval.php)：

```
$float = floatval($string); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T16:48:46.110

`$var = floatval($float);`就是你要找的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T16:30:04.520

只有`parseFloat()`他们。`parseFloat()`将以数字开头的字符串转换为数字并以第一个非数字字符结尾。

`parseFloat('96.2 km')`=`96.2`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T16:32:50.617

尝试这个。为我工作

```
try {    
    Regex regexObj = new Regex(@"\b\d+(?:\.\d{0,}|)");    
    Match matchResults = regexObj.Match(subjectString);    
  while (matchResults.Success) {    
        // matched text: matchResults.Value    
        // match start: matchResults.Index    
        // match length: matchResults.Length    
        matchResults = matchResults.NextMatch();    
    }     
} catch (ArgumentException ex) {    
    // Syntax error in the regular expression    
} 
```

php方式

```
preg_match_all('/\b\d+(?:\.\d{0,}|)/', $subject, $result, PREG_PATTERN_ORDER);
for ($i = 0; $i < count($result[0]); $i++) {
    # Matched text = $result[0][$i];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T16:29:20.460

对于这些字符串，您可以使用`/^\d+(\.\d+)?/`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T16:29:43.407

浮点正则表达式：[-+]?[0-9]*\.?[0-9]+

# c# - 我可以为 REST WCF 服务自动生成服务引用吗？

> ID：10232509
> 
> 赞同：6
> 
> 时间：2012-04-19T16:26:37.823
> 
> 标签：c#, json, wcf, rest, soap

对于 SOAP WCF over REST (json) wcf，我可以看到的唯一参数是，一旦创建了我的服务，我就可以在 Visual Studio 中添加一个引用，并且我可以为我准备好大量强类型类和一个我的客户端类可以通过调用我所有的网络方法。据我所知，它甚至设置了 web.config。

但是，当我公开一个 REST (json) 服务时，我仍然得到一个 WSDL。所以我想知道是否还有一种方法可以自动构建我的引用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T17:25:32.833

不使用 WCF 工具。与 SOAP（具有描述服务的既定协议 - WSDL）不同，REST 没有。WADL 就是这样一种协议，但它并不太普及，WCF 也不支持它。您仍然会获得 WSDL，因为 WCF 将描述它可以从服务中获得的所有内容。但是，WSDL 不会有一个`<wsdl:port>`元素来描述 REST 端点，这就是您获得 WSDL 但无法生成对它的引用的原因。

[http://blogs.msdn.com/b/carlosfigueira/archive/2012/03/26/mixing-add-service-reference-and-wcf-web-http-aka-rest-endpoint-does-not](http://blogs.msdn.com/b/carlosfigueira/archive/2012/03/26/mixing-add-service-reference-and-wcf-web-http-a-k-a-rest-endpoint-does-not-work.aspx)上的帖子[-work.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2012/03/26/mixing-add-service-reference-and-wcf-web-http-a-k-a-rest-endpoint-does-not-work.aspx)有更多关于这个问题的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-10T16:52:59.667

很老的问题，新的答案。

今天使用 openapi (swagger) 我可以通过使用[swagger 检查](https://inspector.swagger.io/builder)器做示例来实现这一点，我可以记录我的休息服务，并创建一个规范 yml/json 文件，允许验证和接受标准以及 java、python、c# 的自动化客户端， ruby,javascript 和其他我确定

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-06-22T15:52:05.533

我想详细说明一下：

尽管您确实无法使用 JSON REST WCF 服务获得 WSDL 添加服务引用，但我所做的是创建两个遇到数据挂钩：

1.  是返回 JSON 的操作
2.  是一个返回一个类包装器的单个 XML 操作，其中包括我允许的所有服务类，我称之为 Discover：

IE

```
public class Discover
{
  public Manager Manager {get;}
  public Employee Emp {get;}
  ....
}

[OperationContract]
public Discover DiscoverDTOs() 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-01-29T09:45:50.000

你可以，间接地。虽然 Visual Studio 生成的客户端不起作用，但该客户端实现了一个也生成的接口，您可以像这样使用它：

```
WebChannelFactory<IService> factory = new WebChannelFactory<IService>(new Uri(endpointAddress));

IService proxy = factory.CreateChannel();

int result = proxy.Operation(1, 2, 3); 
```

`WebChannelFactory`有另一个接受 a 的重载`WebHttpBinding`，您可以根据服务配置进行配置，也可以在 app.config 文件中手动进行此配置。

# windows-phone-7 - WP7 - 防止 RestSharp 缓存

> ID：10232514
> 
> 赞同：4
> 
> 时间：2012-04-19T16:27:06.907
> 
> 标签：windows-phone-7, restsharp

我在我的 Windows Phone 7.1 项目中使用 RestSharp。

我的问题是 RestSharp 总是缓存响应数据。

例子：

在我第一次发送请求时，它会正确返回数据。经过一些删除操作后，我再次发送该请求，但响应似乎与第一次相同，没有任何改变。

如果我停止调试并按 F5 重新开始，它会按预期完美运行。

我也尝试过`request.AddParameter("cache-control", "no-cache", ParameterType.HttpHeader);`，但没有运气。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-13T12:05:43.683

我有同样的问题，所以只需添加指定不缓存响应数据客户端的标头是我的带有基本 url 的 RestClient，而不是添加带有值 no-cache 的默认标头 Cache-Control。

```
client.AddDefaultHeader("Cache-Control", "no-cache") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T02:12:36.173

我在 Rico Suter 评论中找到了解决方案，谢谢！我会将其标记为已接受的答案

> 它是一个黑客，但尝试类似 url = originalUrl + "&nocache=" + DateTime.Now.Ticks

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T17:21:09.913

“Cache-Control”标头应该可以解决问题！

我认为 HTTP 标头不区分大小写，但服务器可能不同意我的看法！您应该尝试使用`Cache-Control`而不是`cache-control`...

此外，我还会在请求中添加`Pragma`带有`no-cache`值的标头（一些旧服务器不使用“Cache-Control”标头，但他们肯定会识别这个标头）！

我会尝试使用 Fiddler 调试通信并检查标头是否真的按预期发送到服务器！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-01T13:46:28.453

另一种解决方案是设置“If-Modified-Since”标头的值为`DateTime.Now`：

```
client.AddDefaultParameter("If-Modified-Since", DateTime.Now, ParameterType.HttpHeader); 
```

# mysql - 删除主键不影响外键约束到其他表

> ID：10232517
> 
> 赞同：5
> 
> 时间：2012-04-19T16:27:11.117
> 
> 标签：mysql

我想从学校表中删除一条记录，而不影响部门名称的外键。我试过了，但我收到了这条消息：

> “无法删除或更新父行：外键约束失败 ( `arusms`. `department`, CONSTRAINT `department_ibfk_1`FOREIGN KEY ( `school_name`) REFERENCES `school`( `school_name`) ON UPDATE CASCADE)”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:35:35.523

我不确定你为什么要这样做。如果您删除学校，该部门将成为孤儿。这就是首先使用外键来强制引用完整性的重点。如果您希望部门保留并能够执行此操作，则需要更改外键以包含 ON DELETE SET NULL。否则，您将不得不删除约束、执行删除并重新创建约束。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T06:55:06.990

您的错误消息隐藏了真正的原因。

```
(
arusms.department, 

CONSTRAINT department_ibfk_1 
  FOREIGN KEY (school_name) 
  REFERENCES school (school_name) 
  ON UPDATE CASCADE
) 
```

当您创建外键约束时，您省略了该`ON DELETE`部分。MySQL 为此使用了默认操作，即**`ON DELETE RESTRICT`**. 请参阅 MySQL 文档：[`FOREIGN KEY`约束](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

如果您希望能够在不影响相关部门的情况下删除学校，您可以

*   删除 FK 约束或

*   使列 ( `department.school_name`) 可为空并更改约束以执行`ON DELETE SET NULL`操作。

如果您希望能够删除学校和级联删除相关部门，您可以

*   更改约束以执行`ON DELETE CASCADE`操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T16:36:21.970

拥有外键的全部目的是保持数据一致。在您的情况下，这意味着对于每个`department`，都必须存在相应的`school`记录。如果你`DELETE`是一所学校，所有相应的部门也应该被删除，或者至少他们的`school`引用必须被`NULL`编辑。

如果你不需要这种强制，`DROP`外键。

或者，如果您只想将一个部门重新分配到另一所学校，请先执行此操作，然后再分配到`DELETE`原来的学校。

# solr - 在 solr 函数查询中使用另一个字段值作为默认值

> ID：10232519
> 
> 赞同：1
> 
> 时间：2012-04-19T16:27:16.080
> 
> 标签：solr

我正在尝试运行以下查询：

```
/solr/select?q=_val_:query("{!dismax qf=text v='solr rocks'}", my_field) 
```

但是，指定`my_field`为默认值会引发错误：

```
java.lang.NumberFormatException: For input string: "my_field" 
```

此外，这些查询也会失败：

```
/solr/select?q=_val_:query("{!dismax qf=text v='solr rocks'}", ceil(my_field))
/solr/select?q=_val_:query("{!dismax qf=text v='solr rocks'}", ceil(1.0)) 
```

我们不能在函数查询中指定另一个字段或函数作为默认值吗？还有另一种方法可以完成我想做的事情吗？

我正在使用 Solr 3.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:48:54.800

根据[QueryValueSource 的 ValueSourceParser 的代码](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.solr/solr-core/3.1.0/org/apache/solr/search/ValueSourceParser.java#ValueSourceParser)（第 261 行）， 的第二个参数`query`只能是浮点数。所以 3 或 4.5 会起作用，但是`my_field`or `ceil(1.0)`which are `ValueSource`s 而不是 constants 不会。

我不知道您的用例是什么，但是服用`max(query("{!dismax qf=text v='solr rocks'}"), my_field)`就足够了吗？（如果`my_field`具有正值，则结果只会在查询的分数低于 的值时与您尝试执行的操作不同`my_field`）

[否则，如果您确实需要此功能，那么基于QueryValueSource](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.solr/solr-core/3.1.0/org/apache/solr/search/function/QueryValueSource.java#QueryValueSource)实现您自己的函数应该相当容易，以便将 ValueSource 作为第二个参数而不是浮点数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:22:33.963

我确实找到了一种模拟所需逻辑的替代方法：

```
/solr/select?q=_val_:sum(query("{!dismax qf=text v='solr rocks'}"),product(map(query("{!dismax qf=text v='solr rocks'}",-1),0,100,0,1), my_field)) 
```

有点迂回的方式来做到这一点，但工作正常。

# c++ - 简单的 C++ - 关于字符串和连接以及将 int 转换为字符串

> ID：10232521
> 
> 赞同：0
> 
> 时间：2012-04-19T16:27:17.437
> 
> 标签：c++, string, visual-studio

> **可能重复：**
> [在 C++ 中将 int 转换为字符串的最简单方法](https://stackoverflow.com/questions/5590381/easiest-way-to-convert-int-to-string-in-c)

我有一个关于 Visual C++ 字符串的问题。我想连接下一个字符串。

```
for (int i=0; i<23; i++)
{
    imagelist.push_back("C:/x/left"+i+".bmp");
    imagelist.push_back("C:/x/right"+i+".bmp");
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:29:58.710

```
std::ostringstream os;
os << "C:/x/left" << i << ".bmp";
imagelist.push_back(os.str()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T16:32:11.777

一种解决方案是使用字符串流：

```
#include<sstream>

for (int i=0; i<23; i++)
{
    stringstream left, right;
    left << "C:/x/left" << i << ".bmp";
    right << "C:/x/left" << i << ".bmp";
    imagelist.push_back(left.str());
    imagelist.push_back(right.str());
} 
```

`stringstream`不是性能更快的解决方案，但易于理解且非常灵活。

另一种选择是使用`itoa`and `sprintf`，如果您对 c 样式打印感到宾至如归的话。不过，听说`itoa`不是很便携的功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T16:34:13.820

```
for (int i=0; i<23; i++)
{
    imagelist.push_back("C:/x/left"+std::to_string(i)+".bmp");
    imagelist.push_back("C:/x/right"+std::to_string(i)+".bmp");
} 
```

# data-binding - 嵌套在两个中继器中时如何将 GridView 置于编辑模式？

> ID：10232523
> 
> 赞同：1
> 
> 时间：2012-04-19T16:27:18.270
> 
> 标签：data-binding, gridview, nested-repeater, editmode

我在另一个中继器内的中继器内有一个 Gridview。声明性代码如下所示：

```
<asp:Repeater id="parentRepeater" runat="server">
      <itemtemplate>
            <b> <%# DataBinder.Eval(Container.DataItem, "Name") %></b>
            <div>
               <asp:repeater id="childRepeater" runat="server" datasource='<%# ((DataRowView)Container.DataItem).Row.GetChildRows("myrelation") %>' OnItemDataBound="getNestedData">
                    <itemtemplate>
                         <div><%# DataBinder.Eval(Container.DataItem, "Owner") %></div>
                         <div><asp:GridView ID="Grd" runat="server" AutoGenerateColumns="false" OnRowEditing="EditRecord" HorizontalAlign="Left" Width="100%">
                        </asp:GridView></div>
                </itemtemplate>
                </asp:repeater>
            </div>  
       </itemtemplate>
</asp:repeater> 
```

命令式代码隐藏如下所示：

```
public void Page_Load(object sender, EventArgs e)
{
        SqlConnection cnn = new SqlConnection("asdf");
        SqlDataAdapter cmd1 = new SqlDataAdapter("select * from tblNames", cnn);
        DataSet ds = new DataSet();
        cmd1.Fill(ds, "names");
        SqlDataAdapter cmd2 = new SqlDataAdapter("select * from tblThings", cnn);
        cmd2.Fill(ds, "things");
        ds.Relations.Add("myrelation",
        ds.Tables["names"].Columns["id"],
        ds.Tables["things"].Columns[NameID"]);
        parentRepeater.DataSource = ds.Tables["names"];
        Page.DataBind();
        cnn.Close();
} 
```

这样将设置父中继器和子中继器，当子中继器具有 itemdatabound 时，会发生以下绑定 gridview 的情况：

```
 public void getNestedData(Object Sender, RepeaterItemEventArgs e)
    {
        GridView subGridView = (GridView)e.Item.FindControl("Grd");
        DataRow rowView = (DataRow)e.Item.DataItem;
        Int32 key = (Int32)rowView["id"];

        SqlConnection cnn = new SqlConnection("asdf");
        SqlDataAdapter cmd1 = new SqlDataAdapter("select * from tblSubThings WHERE ThingID = " + key, cnn);
        DataSet ds = new DataSet();
        cmd1.Fill(ds, "subThings");
        subGridView.DataSource = ds.Tables["subThings"];

        TemplateField edit = new TemplateField();
        edit.ItemTemplate = new editGridViewTemplate(DataControlRowType.DataRow, "edit");
        subGridView.Columns.Add(edit);

        TemplateField Notes = new TemplateField();
        Notes.ItemTemplate = new GridViewTemplate3(DataControlRowType.DataRow, "Notes");
        Notes.HeaderTemplate = new GridViewTemplate3(DataControlRowType.Header, "Notes");
        Notes.EditItemTemplate = new NotesEditGridViewTemplate(DataControlRowType.DataRow, "Notes");
        subGridView.Columns.Add(Notes);

        subGridView.DataBind();
} 
```

这段代码一切正常。它显示了两个中继器内的gridview，带有一个编辑按钮。当编辑按钮被触发时，gridview 应该进入编辑模式（并使用 EditItemTemplate）。但是，调用 EditRecord 时，gridview 不会进入编辑模式。这是 EditRecord 的样子：

```
public void EditRecord(object sender, GridViewEditEventArgs e)
{
        GridView subGridView = (GridView)sender;
        subGridView.EditIndex = e.NewEditIndex;
        subGridView.Rows[e.NewEditIndex].RowState = DataControlRowState.Edit;
        DataBind();
} 
```

有谁知道如何让我的 GridView 进入编辑模式？

# r - 基于因子具有不同高填充颜色的 geom_tile 热图

> ID：10232525
> 
> 赞同：15
> 
> 时间：2012-04-19T16:27:25.983
> 
> 标签：r, ggplot2, heatmap

我有兴趣在 ggplot2 中构建一个热图，`geom_tile`它**根据**一个因素使用不同的渐变高颜色。

下面的图创建了一个图，其中各个图块根据 被着色为蓝色或红色`xy_type`，但没有渐变。

```
ggplot() + 
  geom_tile(data=mydata, aes(x=factor(myx), y=myy, fill=factor(xy_type))) + 
  scale_fill_manual(values=c("blue", "red")) 
```

下面的图没有使用`xy_type`因子来选择颜色，但是我得到了一个基于`xy_avg_value`.

```
ggplot() + 
  geom_tile(data=mydata, aes(x=factor(myx), y=myy, fill=xy_avg_value)) 
```

有没有混合这两个情节的技术？我可以使用 a 使用`facet_grid(xy_type ~ .)`渐变创建此数据的单独图。由于这最终将是一张地图（x~y 坐标），我想找到一种方法在一张`geom_tile`地图中同时显示不同的渐变。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-19T17:35:35.493

一般来说，**ggplot2**不允许单一类型的多个比例（即多种颜色或填充比例），所以我怀疑这（很容易）不可能。

我能想出的最接近的近似值是：

```
df <- data.frame(expand.grid(1:5,1:5))
df$z <- runif(nrow(df))
df$grp <- rep(letters[1:2],length.out = nrow(df))

ggplot(df,aes(x = Var1,y = Var2,fill = factor(grp),alpha = z)) + 
    geom_tile() + 
    scale_fill_manual(values = c('red','blue')) 
```

![在此处输入图像描述](../Images/d1b50710134265fe35e04eef6aaa6a01.png)

但是要获得一个明智的传说将是很困难的。

# java - 带有 apache axis2 的 Java 中的 Web 服务

> ID：10232529
> 
> 赞同：-3
> 
> 时间：2012-04-19T16:27:46.263
> 
> 标签：java, web-services, apache, axis2

如何从浏览器调用 Java 中的 Web 服务操作或方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:38:47.360

[Web 服务](http://en.wikipedia.org/wiki/Web_service)和浏览器中的浏览页面是访问 Web 应用程序的不同策略。如果您只是想通过从浏览器发送 URL 来运行方法，请查看[Servlets](http://en.wikipedia.org/wiki/Servlet)。不需要任何网络服务。使用 Axis 2，您可以访问来自不同程序甚至其他语言的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:38:04.850

无需太多麻烦即可调用 Web 服务的最简单方法是使用[SoapUI](http://www.soapui.org/)。

您只需创建一个新项目，导入它必须使用的 wsdl，SoapUI 将创建一个测试信封。

# php - 使用 PHP 从文本文件末尾删除/添加字符

> ID：10232533
> 
> 赞同：1
> 
> 时间：2012-04-19T16:27:57.967
> 
> 标签：php, mysql, text, character

我有一个读取文本文件内容的自动填充搜索（该文本文件必须以正确的方式格式化，否则搜索不起作用）。现在我以一种相当冗长的方式来做这件事，因为我需要在文件的开头和结尾加上方括号。

从数据库中获取数据的 PHP 脚本：

```
$getData = mysql_query("SELECT Name FROM tblIngredient"); 

 while($info = mysql_fetch_array($getData)) 
 {
    $string = '{"key": "'.$info['Name'].'", "value": "'.$info['Name'].'"}, ';
    $fp = fopen('data_old.txt', 'a');
    fwrite($fp, $string);
    fclose($fp);
 } 
```

第二个 php 脚本打开 data_old.txt 并在开头写上“[”，在结尾写上“]”，然后将其保存为 data.txt：

```
$string1 = '[' . file_get_contents('data_old.txt') . ']';
$fp = fopen('data.txt', 'a');
fwrite($fp, $string1);
fclose($fp); 
```

这会将数据保存为以下格式：（文件开头）

```
[{"key": "vodka", "value": "vodka"}, {"key": "tequila", "value": "tequila"}, { 
```

（文件结束）

```
{"key": "brandy", "value": "brandy"}, {"key": "beer", "value": "beer"}, ] 
```

**我的问题是文件末尾有一个逗号和空格：}，]，我需要它看起来像这样：}]**

我一直在谷歌搜索并尝试过[这个](https://stackoverflow.com/questions/8354384/php-remove-last-character-of-file)无济于事

**（我需要代码来截断 data.txt 文件的最后 2 个字符并再次写入）**

任何帮助表示赞赏

-马特

**编辑2::**

脚本1：

```
$getData = mysql_query("SELECT Name FROM tblIndredient"); 

 while($info = mysql_fetch_array($getData)) 
 {
    $string = ', {"key": "'.$info['Name'].'", "value": "'.$info['Name'].'"}';
    $fp = fopen('data.txt', 'a');
    fwrite($fp, $string);
    fclose($fp);
 }

    $content = file_get_contents('data.txt');
    $content = '[' . ltrim('[, ', $content);
    file_put_contents('data.txt'); 
```

脚本2：

```
 $string1 = '['. file_get_contents('data.txt') .']';
    $fp = fopen('data.txt', 'a');
    fwrite($fp, $string1);
    fclose($fp); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:33:09.140

```
$string1 = '[' . file_get_contents('data_old.txt');
$fp = fopen('data.txt', 'a');
fwrite($fp, $string1);
fclose($fp);

$files = fopen('data.txt', 'w+');
$content = fread($files, filesize('data.txt'));
$content = substr_replace($content ,"", -2);
$content .= ']';
fwrite($files, $content);
fclose($files); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T00:16:52.677

更改此行

> $string = '{"key": "'.$info['Name'].'", "value": "'.$info['Name'].'"}, ';

到

> $string = ', {"key": "'.$info['Name'].'", "value": "'.$info['Name'].'"}';

并改变这个

> $string1 = '['。file_get_contents('data.txt') .']';

到

```
$string1 = file_get_contents('data.txt');
$string1 = '[' . ltrim($string1, ', ') . ']'; 
```

这有帮助吗？

# android - 如何在关闭 DatePickerDialog 时显示软键盘？

> ID：10232534
> 
> 赞同：0
> 
> 时间：2012-04-19T16:28:02.457
> 
> 标签：android, keyboard, datepickerdialog

我试图在关闭 DatePickerDialog 时加载软键盘。这似乎是一个时间问题。DatePickerDialog 仍然具有焦点，因此尝试显示软键盘什么也不做。但是，如果我使用处理程序导致延迟，它可以正常工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:14:42.943

我通过在短暂延迟后显示软键盘解决了这个问题。这是一个黑客，但它的工作原理。

# iphone - 如何处理 -hd 文件

> ID：10232539
> 
> 赞同：1
> 
> 时间：2012-04-19T16:28:20.223
> 
> 标签：iphone, crash, uiimage, cocos2d-iphone

编辑：**在第一个答案之后，我对 stackoverflow 进行了更多研究，并将问题改写为°我如何只使用高清文件？”并发现：[如何阻止 Cocos2D 要求标准定义资源（SD 图像）？](https://stackoverflow.com/questions/8974374/how-do-i-stop-cocos2d-from-requiring-standard-definition-resources-sd-images)我现在试试建议的解决方案，如果可行，我将保留已编辑的标题并删除可能具有误导性的初始问题。**

有一段时间我正在尝试学习 Cocos2d 并使用诸如[cookbook](http://cocos2dcookbook.com/)和[学习 cocos2d 之](http://www.learn-cocos2d.com/)类的书籍。这是一个很好的开始，但有时我会陷入像我今天将要解释的问题一样。

[我开始修改第1](https://stackoverflow.com/questions/8974374/how-do-i-stop-cocos2d-from-requiring-standard-definition-resources-sd-images)册第 66 页中关于使用 CCParallaxNode 的示例。我的目标是添加以下大小的四层：960 像素高和 1280 像素宽，在带有 iOS 5.0 和 Cocos2d 1.01 rc 库的 iPhone 模拟器上运行。

我确实使用安装的模板创建了一个新项目，并修改了 HelloWorldLayer.m 类，如下所示：

```
// Import the interfaces
#import "HelloWorldLayer.h"

// HelloWorldLayer implementation
@implementation HelloWorldLayer
+(CCScene *) scene
{
    // 'scene' is an autorelease object.
    CCScene *scene = [CCScene node];

    // 'layer' is an autorelease object.
    HelloWorldLayer *layer = [HelloWorldLayer node];

    // add layer as a child to scene
    [scene addChild: layer];

    // return the scene
    return scene;
}

// on "init" you need to initialize your instance
-(id) init
{
    // always call "super" init
    // Apple recommends to re-assign "self" with the "super" return value
    if( (self=[super init])) {

        CCSprite* parallaxLayer01 = [CCSprite spriteWithFile:@"0-hd-red.png"];  
        CCSprite* parallaxLayer02 = [CCSprite spriteWithFile:@"0-hd-red.png"];
        CCSprite* parallaxLayer03 = [CCSprite spriteWithFile:@"0-hd-red.png"];
        CCSprite* parallaxLayer04 = [CCSprite spriteWithFile:@"0-hd-red.png"];  

        /**
        CCSprite* parallaxLayer01 = [CCSprite spriteWithFile:@"0-hd.png"];  
        CCSprite* parallaxLayer02 = [CCSprite spriteWithFile:@"1-hd.png"];
        CCSprite* parallaxLayer03 = [CCSprite spriteWithFile:@"2-hd.png"];
        CCSprite* parallaxLayer04 = [CCSprite spriteWithFile:@"3-hd.png"];    
      **/

        /**
         CCSprite* parallaxLayer01 = [CCSprite spriteWithFile:@"2-hd.png"]; 
        CCSprite* parallaxLayer02 = [CCSprite spriteWithFile:@"2-hd.png"];
        CCSprite* parallaxLayer03 = [CCSprite spriteWithFile:@"2-hd.png"];
        CCSprite* parallaxLayer04 = [CCSprite spriteWithFile:@"2-hd.png"];    

**/
        /**
        CCSprite* parallaxLayer01 = [CCSprite spriteWithFile:@"bar.png"];   
        CCSprite* parallaxLayer02 = [CCSprite spriteWithFile:@"bar.png"];
        CCSprite* parallaxLayer03 = [CCSprite spriteWithFile:@"bar.png"];
        CCSprite* parallaxLayer04 = [CCSprite spriteWithFile:@"bar.png"];    
        **/
        /**
        CCSprite* parallaxLayer01 = [CCSprite spriteWithFile:@"bar-hd.png"];    
        CCSprite* parallaxLayer02 = [CCSprite spriteWithFile:@"bar-hd.png"];
        CCSprite* parallaxLayer03 = [CCSprite spriteWithFile:@"bar-hd.png"];
        CCSprite* parallaxLayer04 = [CCSprite spriteWithFile:@"bar-hd.png"];    
        **/

        //Create a parallax node and add all four sprites
        CCParallaxNode* parallaxNode = [CCParallaxNode node];
        [parallaxNode setPosition:ccp(0,0)];
        [parallaxNode addChild:parallaxLayer01 z:1 parallaxRatio:ccp(0, 0) positionOffset:ccp(0,0)];
        [parallaxNode addChild:parallaxLayer02 z:2 parallaxRatio:ccp(1, 0) positionOffset:ccp(0,0)];
        [parallaxNode addChild:parallaxLayer03 z:3 parallaxRatio:ccp(2, 0) positionOffset:ccp(0,0)];
        [parallaxNode addChild:parallaxLayer04 z:4 parallaxRatio:ccp(3, 0) positionOffset:ccp(0,0)];
        [self addChild:parallaxNode z:0 tag:1];

        //Move the node to the left then the right
        //This creates the effect that we are moving to the right then the left
        CCMoveBy* moveRight = [CCMoveBy actionWithDuration:5.0f position:ccp(-80, 0)];
        CCMoveBy* moveLeft = [CCMoveBy actionWithDuration:2.5f position:ccp(80, 0)];
        CCSequence* sequence = [CCSequence actions:moveRight, moveLeft, nil];
        CCRepeatForever* repeat = [CCRepeatForever actionWithAction:sequence];
        [parallaxNode runAction:repeat];

    }
    return self;
}

// on "dealloc" you need to release all your retained objects
- (void) dealloc
{
    // in case you have something to dealloc, do it in this method
    // in this particular example nothing needs to be released.
    // cocos2d will automatically release all the children (Label)

    // don't forget to call "super dealloc"
    [super dealloc];
}
@end 
```

我确实尝试使用[4](https://i.stack.imgur.com/Pr0Fx.png)运行代码，这是一个使用 GIMP 创建的带有 alpha 通道的 PNG 图像。它最初确实有效，现在不再有效。我不确定我做了什么搞砸了。

奇怪的是，带有图像[5](https://i.stack.imgur.com/1SuT6.png)它确实有效。

我已经检查过，建议使用 1024 x 1024 图像的 UIImage 规范存在限制。所以我做了并重新调整了图像[6](https://i.stack.imgur.com/eCYYK.png)并创建了图像![缩小图像](../Images/2012f523c526205665eda6f185dfb64c.png) [3](http://www.learn-cocos2d.com/)，它在 UIImage 指定的限制范围内但不起作用。

对于不起作用，我的意思是代码崩溃并显示以下错误消息：

```
2012-04-19 17:14:29.189 ParallaxNodeTest[3713:10a03] cocos2d: cocos2d v1.0.1
2012-04-19 17:14:29.190 ParallaxNodeTest[3713:10a03] cocos2d: Using Director Type:CCDirectorDisplayLink
2012-04-19 17:14:29.226 ParallaxNodeTest[3713:10a03] cocos2d: OS version: 5.1 (0x05010000)
2012-04-19 17:14:29.227 ParallaxNodeTest[3713:10a03] cocos2d: GL_VENDOR:   Apple Computer, Inc.
2012-04-19 17:14:29.228 ParallaxNodeTest[3713:10a03] cocos2d: GL_RENDERER: Apple Software Renderer
2012-04-19 17:14:29.229 ParallaxNodeTest[3713:10a03] cocos2d: GL_VERSION:  OpenGL ES-CM 1.1 APPLE
2012-04-19 17:14:29.229 ParallaxNodeTest[3713:10a03] cocos2d: GL_MAX_TEXTURE_SIZE: 4096
2012-04-19 17:14:29.230 ParallaxNodeTest[3713:10a03] cocos2d: GL_MAX_MODELVIEW_STACK_DEPTH: 16
2012-04-19 17:14:29.231 ParallaxNodeTest[3713:10a03] cocos2d: GL_MAX_SAMPLES: 4
2012-04-19 17:14:29.233 ParallaxNodeTest[3713:10a03] cocos2d: GL supports PVRTC: YES
2012-04-19 17:14:29.234 ParallaxNodeTest[3713:10a03] cocos2d: GL supports BGRA8888 textures: YES
2012-04-19 17:14:29.235 ParallaxNodeTest[3713:10a03] cocos2d: GL supports NPOT textures: YES
2012-04-19 17:14:29.235 ParallaxNodeTest[3713:10a03] cocos2d: GL supports discard_framebuffer: YES
2012-04-19 17:14:29.235 ParallaxNodeTest[3713:10a03] cocos2d: compiled with NPOT support: NO
2012-04-19 17:14:29.236 ParallaxNodeTest[3713:10a03] cocos2d: compiled with VBO support in TextureAtlas : YES
2012-04-19 17:14:29.236 ParallaxNodeTest[3713:10a03] cocos2d: compiled with Affine Matrix transformation in CCNode : YES
2012-04-19 17:14:29.237 ParallaxNodeTest[3713:10a03] cocos2d: compiled with Profiling Support: NO
2012-04-19 17:14:29.268 ParallaxNodeTest[3713:10a03] cocos2d: surface size: 960x640
2012-04-19 17:14:29.336 ParallaxNodeTest[3713:10a03] cocos2d: Filename(0-hd-red.png) contains -hd suffix. Removing it. See cocos2d issue #1040
2012-04-19 17:14:29.337 ParallaxNodeTest[3713:10a03] cocos2d: CCFileUtils: Warning HD file not found: 0-red-hd.png
2012-04-19 17:14:29.338 ParallaxNodeTest[3713:10a03] cocos2d: CCTexture2D. Can't create Texture. UIImage is nil
2012-04-19 17:14:29.339 ParallaxNodeTest[3713:10a03] cocos2d: Couldn't add image:0-red.png in CCTextureCache
2012-04-19 17:14:29.340 ParallaxNodeTest[3713:10a03] cocos2d: Filename(0-hd-red.png) contains -hd suffix. Removing it. See cocos2d issue #1040
2012-04-19 17:14:29.340 ParallaxNodeTest[3713:10a03] cocos2d: CCFileUtils: Warning HD file not found: 0-red-hd.png
2012-04-19 17:14:29.341 ParallaxNodeTest[3713:10a03] cocos2d: CCTexture2D. Can't create Texture. UIImage is nil
2012-04-19 17:14:29.342 ParallaxNodeTest[3713:10a03] cocos2d: Couldn't add image:0-red.png in CCTextureCache
2012-04-19 17:14:29.342 ParallaxNodeTest[3713:10a03] cocos2d: Filename(0-hd-red.png) contains -hd suffix. Removing it. See cocos2d issue #1040
2012-04-19 17:14:29.343 ParallaxNodeTest[3713:10a03] cocos2d: CCFileUtils: Warning HD file not found: 0-red-hd.png
2012-04-19 17:14:29.344 ParallaxNodeTest[3713:10a03] cocos2d: CCTexture2D. Can't create Texture. UIImage is nil
2012-04-19 17:14:29.345 ParallaxNodeTest[3713:10a03] cocos2d: Couldn't add image:0-red.png in CCTextureCache
2012-04-19 17:14:29.345 ParallaxNodeTest[3713:10a03] cocos2d: Filename(0-hd-red.png) contains -hd suffix. Removing it. See cocos2d issue #1040
2012-04-19 17:14:29.346 ParallaxNodeTest[3713:10a03] cocos2d: CCFileUtils: Warning HD file not found: 0-red-hd.png
2012-04-19 17:14:29.365 ParallaxNodeTest[3713:10a03] cocos2d: CCTexture2D. Can't create Texture. UIImage is nil
2012-04-19 17:14:29.366 ParallaxNodeTest[3713:10a03] cocos2d: Couldn't add image:0-red.png in CCTextureCache
2012-04-19 17:14:29.367 ParallaxNodeTest[3713:10a03] *** Assertion failure in -[CCParallaxNode addChild:z:parallaxRatio:positionOffset:], /Users/daniele/Desktop/ParallaxNodeTest/ParallaxNodeTest/libs/cocos2d/CCParallaxNode.m:91
2012-04-19 17:14:29.369 ParallaxNodeTest[3713:10a03] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Argument must be non-nil'
*** First throw call stack:
(0x19e2022 0x1f7ccd6 0x198aa48 0x11af2cb 0x40661 0xb588e 0x3ba25 0xb5632 0xb4d3e 0x8164be 0x817274 0x826183 0x826c38 0x81a634 0x279aef5 0x19b6195 0x191aff2 0x19198da 0x1918d84 0x1918c9b 0x816c65 0x818626 0xb4816 0x24b5 0x1) 
```

我认为图像大小不是问题，因为我以前能够运行，但它适用于图像[5](https://i.stack.imgur.com/1SuT6.png)而不是其他图像[6](https://i.stack.imgur.com/eCYYK.png)的事实表明这与我使用创建 PNG 文件的方式有关GIMP..

有胶水吗？我附上我正在使用的 GIMP 设置[4的屏幕截图（不是英文，将在下面提供翻译）：](https://i.stack.imgur.com/Pr0Fx.png)

厚开：保存颜色作为背景，保存分辨率，保存创建日期，保存注释和保存透明点颜色的值。

不加厚：隔行扫描（Adam7），保存伽玛，保存图层移动

![设置](../Images/719fa9275d6b6d3145c852ce79aba892.png)

![酒吧](../Images/ae3a31686fa364832e6fd95ff96c3c10.png) ![坏形象](../Images/c052abafc080be887e0acc6058039460.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:34:09.333

为了使用 Retina 图像，您必须在项目中包含 -hd 和非 hd 文件。它们不必一定是合适的尺寸，但它们都必须存在。

所以如果你想使用一个名为的文件`0-red.png`，你必须包含`0-red.png`和`0-red-hd.png`。另外，请注意`-hd`在文件名的末尾有 be。

# php - 用多个变量的组合制作一个变量

> ID：10232550
> 
> 赞同：0
> 
> 时间：2012-04-19T16:28:55.247
> 
> 标签：php, javascript, html, sql, forms

我有个问题。为了让事情更清楚，我将举一个例子：

值以表格形式提交。我有：

```
Value1: Blanc
Value2: Titanium
Value3: 100
Value4: 150
Value5: China 
```

我想得到一个具有这种结构的值 6：

```
BLTIT-100150-CH 
```

Value6 有：（value1 的 2 个字符）+（value5 的 3 个字符）+（-）+（value3+value4 +（-）+（value5 的 2 个字符）。有没有办法用 PHP 或 JavaScript 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:36:17.797

PHP 中的 substr() 和连接 (.) 运算符的组合将解析出它。

例如，`substr($_POST['Value 1'],0,2);`将获得值 1 的前两个字符，前提是它位于该 POST 数组中。

然后只需在字符串上使用 concat 运算符：

```
$val6 = $str1.$str2."-".$str3.$str4."-".$str5; 
```

在 PHP 中这很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:36:33.213

在 PHP 中：

```
$Value6 = strtoupper(substr($Value1,0,2) . substr($Value2,0,3) . '-' . 
                     $Value3 . $Value4 . '-' . substr($Value5,0,2)
                    ); 
```

当然，这假设您的变量是在本地设置的。如果您直接从 POST 获取它们，则需要`$_POST['Value1']`代替`$Value1`等。

查找`substr`- 它需要一个字符串的一部分（称为子字符串），给定一个起点和一个长度。：http: [//php.net/manual/en/function.substr.php](http://php.net/manual/en/function.substr.php)

是`.`PHP 字符串连接运算符 - 它将两个字符串连接在一起。

`strtoupper`将字符串转换为大写（参见[http://php.net/manual/en/function.strtoupper.php](http://php.net/manual/en/function.strtoupper.php)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T16:39:18.693

使用 PHP，当您收到信息时，您可以执行以下操作：

```
$newValue = $_POST[Value1][0].$_POST[Value1][1];
$newValue .= $_POST[Value2][0].$_POST[Value2][1].$_POST[Value2][2]."-";
$newValue .= $_POST[Value3];
$newValue .= $_POST[Value4]."-";
$newValue .= $_POST[Value5][0].$_POST[Value5][1]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T16:39:24.787

这将使您在 PHP 中得到您想要的：

```
$value6 = strtoupper(substr($value1, 0, 2)) . strtoupper(substr($value2, 0, 3)) .
    "-{$value3}{$value4}-". strtoupper(substr($value5, 0, 2)); 
```

* * *

**编辑 ：**

由于生成的字符串 ( `$value6`) 中的所有字符都是大写的，因此您可以通过以下操作将其缩短一点：

```
$value6 = strtoupper(substr($value1, 0, 2) . substr($value2, 0, 3) .
    "-{$value3}{$value4}-". substr($value5, 0, 2)); 
```

# python - 减少 wxPython GUI 加载时间的方法

> ID：10232560
> 
> 赞同：1
> 
> 时间：2012-04-19T16:29:26.693
> 
> 标签：python, multithreading, performance, wxpython

这个问题是我的问题[Desktop GUI Loading Slow](https://softwareengineering.stackexchange.com/questions/144725/desktop-gui-loading-slow/145072#145072)的延续。

我有一个用 wxPython 开发的桌面 GUI，它使用 sqlAlchemy 从数据库中获取许多记录查询。我将获取的记录放入 Python 字典并使用它填充 GUI。但是，由于我在后台读取数千个数据，所以 GUI 会卡住并且加载非常缓慢。现在的问题是：

1.  我应该为每个 sqlalchemy 数据获取查询创建单独的线程吗？如果答案是肯定的，那么 wx.callAfter() 是我必须关注的方法（对于每个查询）吗？如果有人提供示例/未经测试的代码或链接，那么它将很有帮助。
2.  有没有其他方法可以在桌面 GUI 中实现延迟加载？

PS：请注意，这是我第一次做多线程和 wxPython。我是 Python/Django 的早期 Web 开发人员。另外，由于限制，我无法共享代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:02:12.427

您应该重新设计您的应用程序，以便数据加载部分和数据显示部分是分开的。在一个单独的线程中加载数据，该线程应该在您的应用程序中填充数据库模型，使用该模型填充 GUI，因此当应用程序加载时，GUI 将快速加载，但会在数据没有的地方显示“正在加载...”或类似的东西尚未加载。

加快速度的另一种方法是在需要查询之前不要运行查询，例如在 get 查询 DB 上使用 get 方法将它们包装在一个类中，但所有这些都取决于上下文。

此外，如果 GUI 主要用于查看，那么您可以加载第一组小数据并将其他数据推送到用户必须通过某些菜单或选项卡的其他视图，这样您可以延迟加载直到需要它或加载它们在背景中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:21:16.460

有几种方法可以防止 GUI 挂起。当然，您可以执行多线程并将记录填充到全局字典中。但是您可能会遇到[全局解释器锁](http://wiki.python.org/moin/GlobalInterpreterLock)(GIL)，这可能无助于 GUI 的响应能力。

第一种选择是使用 GUI 工具包的事件驱动特性，并使用工具包提供的“超时”或“计时器”功能来调用一个函数，该函数每次调用时都会加载几条记录。生成器[函数](http://wiki.python.org/moin/Generators)可以很好地解决这个问题。这可能是最容易实现的。一次可以加载多少条记录取决于机器的速度。我建议从一条记录开始，测量记录的加载，并增加记录的数量，这样每次调用的时间不会超过 0.1 秒。

第二是使用第二个进程加载数据，然后将其以小块的形式发送到 GUI。使用单独的进程（使用`multiprocessing`模块）具有不会遇到 Python 的 GIL 的优点。请注意，此方法或多或少包含第一种方法，因为您仍然必须在 GUI 的事件循环中处理来自第二个进程的消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T20:55:58.540

您没有提到您使用哪些小部件将数据加载到其中，但如果您使用 wx.grid.Grid 或 ListCtrl，那么是的，在各个小部件的虚拟实现中存在一些“延迟”加载内容。例如，请参阅 wxPython 演示，了解可以容纳一百万个单元的网格。另请参阅 Anurag 的回答。您真的不需要一次加载所有数据。只需加载您可以实际显示的数据。然后您可以在用户滚动时加载更多内容（或在后台线程中预加载）。

# c# - 不从后台工作人员 Mvvm 更新的单独视图

> ID：10232561
> 
> 赞同：3
> 
> 时间：2012-04-19T16:29:29.820
> 
> 标签：c#, mvvm

我在从另一个班级的后台工作人员更新单独打开的窗口的进度条时遇到问题。

程序执行如下：

1.  主窗口加载
2.  点击按钮做一些工作并打开一个弹出进度条（新打开的窗口）
3.  后台工作人员确实工作并向弹出进度条报告进度
4.  弹出进度条希望更新。

进度条值绑定到一个属性，在逐步调试器中，后台工作人员似乎可以更新该属性。这些更改不会反映在弹出进度条视图上。但是，绑定没有损坏，因为如果我手动尝试设置进度条的属性值，它可以正常工作。

此外，当我将进度条放在最初启动的 MainWindow 视图中时，它会更新得很好。有什么建议么？？

这是一些代码：

**主窗口视图模型**

```
public class MainWindowViewModel: BaseViewModel
{

    private void PerformSomeAction()
    {
        var popUpProgressBar = new PopUpProgressBarViewModel();
        popUpProgressBar.Show(popUpProgressBar);

        var worker = new BackgroundWorker { WorkerReportsProgress = true };

        worker.ProgressChanged += delegate(object s, ProgressChangedEventArgs args)
        {
            if (args.ProgressPercentage != popUpProgressBar.Progresser)
            {
                Progresser = args.ProgressPercentage;
                popUpProgressBar.Progresser = args.ProgressPercentage;
            }
        };

        worker.DoWork += delegate
        {

            for (int i = 0; i < 101; i++)
            {
                worker.ReportProgress(i);
                System.Threading.Thread.Sleep(10);
            }

            MessageBox.Show("Done");
        };

            worker.RunWorkerAsync();

    }

    private int _progresser;
    public int Progresser
    {
        get { return _progresser; }
        set
        {
            if (_progresser == value) return;
            _progresser = value;
            OnPropertyChanged("Progresser");
        }
    }

    private RelayCommand _startProcessing; //set private member
    public ICommand StartProcessing //public field used by xaml binding
    {
        get
        {
            return _startProcessing = MakeCommandSafely(_startProcessing, () => PerformSomeAction());
        }
    }
} 
```

**PopUpProgressBarViewModel**

```
public class PopUpProgressBarViewModel : BaseViewModel
{
    private PopUpProgressBar _popUpProgressBar;

    public void Show(PopUpProgressBarViewModel context)
    {
        _popUpProgressBar = new PopUpProgressBar {DataContext = context};
        _popUpProgressBar.Show();
    }

    private int _progresser;
    public int Progresser
    {
        get { return _progresser; }
        set
        {
            if (_progresser == value) return;
            _progresser = value;
            OnPropertyChanged("Progresser");
        }
    }
} 
```

有关完整的解决方案文件（这样您就可以看到发生了什么），[请参见此处](http://code.google.com/p/steamtwentythirteen/downloads/detail?name=popup_progressbar.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:47:19.373

您正在创建两个 PopUpProgressBarViewModel。您已经在 PopUpProgressBar.xaml 中创建了一个资源，而另一个正在 MainWindowViewModel 中创建（第 18 行）。

您的 XAML 绑定到在 PopUpProgressBar.xaml 中创建的那个，而您正在更新的那个是在 MainWindowViewModel 中创建的。

如果您可以减少它以便只创建一个，那应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:02:44.000

正如@Doug 所说，因为您已经在设置DataContext：

```
 _popUpProgressBar = new PopUpProgressBar {DataContext = context}; 
```

您可以将 PopUpProgressBar 更改为

```
 <Window x:Class="OpeningWindow_With_ProgressBar.View.PopUpProgressBar"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ViewModel="clr-namespace:OpeningWindow_With_ProgressBar.ViewModel" Title="PopUpProgressBar" Height="150" Width="300">

<Grid>

    <StackPanel>
        <Label FontWeight="Bold">Loading Something</Label>
        <ProgressBar Minimum="0" Maximum="100" Margin="0,10,0,0" Height="25px" Width="250px" Value="{Binding Path=Progresser, Mode=OneWay}"></ProgressBar>
        <TextBlock Margin="10,10,0,0" Text="Details of loading..."></TextBlock>
    </StackPanel>

</Grid> 
```

# umbraco - Umbraco Contour 多步表格 - 根据用户输入决定下一步

> ID：10232571
> 
> 赞同：4
> 
> 时间：2012-04-19T16:29:48.800
> 
> 标签：umbraco, multi-step, umbraco-contour

我正在使用 UmbracoCMS 和 Contour_1.1.12 创建多步骤表单时，我需要根据用户在上一步中提供的某些字段值动态决定下一步将显示哪个表单。

例如，在轮廓多步骤表单中，有一个步骤，用户必须使用复选框字段提供输入。在此步骤中填写表格后，用户将单击“下一步”按钮进入下一步。现在我想根据用户是否选择复选框来显示或跳过下一步。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:45:26.330

我在连接工作流模型时遇到了一些困难——我不确定它是否完全没有错误！我会使用 javascript/jquery 来隐藏或显示下一个字段作为临时措施。

1.  页面加载（http://api.jquery.com/ready/）-> 显示下拉菜单/隐藏可选问题
2.  下拉更改 (http://api.jquery.com/change/) -> 决定是否显示/隐藏可选问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-29T09:43:48.603

抱歉回复晚了，但您始终可以使用 USERCONTROLS 来完成此类工作。在不同的项目中创建用户控件，根据您的流程对其进行测试，然后通过创建宏在 umbraco 中使用它。

请参阅[此链接](http://umbraco.com/media/42a0202c-b0ba-4f84-bcf1-64dfd5230322-usingcontrolswithumbraco.pdf)以了解如何使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T15:48:09.190

我认为您可以通过连接到 Contour 事件模型/工作流来做到这一点。Contour 开发者文档有一些关于创建工作流的有用信息，可以从[这里](http://nightly.umbraco.org/Umbraco%20Contour/1.1.12/Developer%20Docs.pdf)下载。

# qt - 制作像 Qt 这样的 doxygen 文档枚举

> ID：10232572
> 
> 赞同：1
> 
> 时间：2012-04-19T16:29:49.097
> 
> 标签：qt, enums, doxygen

有没有办法让枚举的 doxygen 输出看起来像 Qt 的枚举文档？比较：[Doxygen enum](http://www.doxygen.nl/manual/examples/enum/html/class_enum___test.htm)与[Qt enum](http://qt-project.org/doc/qt-4.8/qt.html#WindowState-enum)。

如您所见，doxygen（除了没有味道）根本不显示枚举的数值，这对于 or-combinable 标志很有用。通过调整 CSS，我通过强制枚举常量和描述在同一行上使 doxygen 输出看起来更好一些，但是我还没有找到一种方法来修复 doxygen 的数值。

我知道我可以通过将 HTML 代码插入枚举文档来手动制作整个表格，但这是很多不必要的信息重复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T19:16:37.587

Qt 使用[**qdoc**](http://doc-snapshot.qt-project.org/qdoc/index.html)来记录它的源代码。我认为您无法使用传统的 doxygen 工具来模仿它的输出。

顺便说一句，[不推荐使用 qdoc，他们建议使用 doxygen 代替](http://qt.gitorious.org/qt/qt/blobs/HEAD/tools/qdoc3/README.TXT)。

# javascript - 需要 Handlebars.js 来渲染对象数据而不是“[Object object]”

> ID：10232574
> 
> 赞同：84
> 
> 时间：2012-04-19T16:29:50.770
> 
> 标签：javascript, json, handlebars.js

我正在使用 Handlebars 模板，并且 JSON 数据已经在 [Object object] 中表示，如何在 Handlebars 之外解析这些数据？例如，我试图通过把手标签在页面上填充一个 JavaScript 变量，但这不起作用。

有什么建议么？谢谢！

编辑：

为了澄清，我使用 ExpressJS w/ Handlebars 进行模板。在我的路线中，我有这个：

```
var user = {}
user = {'id' : 123, 'name' : 'First Name'}

res.render('index', {user : user}); 
```

然后在我的 index.hbs 模板中，我现在有了一个`{{user}}`对象。我可以`{{#each}}`用来遍历对象就好了。但是，我也在使用 Backbonejs，我想将此数据传递给视图，例如：

`myView = new myView({user : {{user}});`

问题是，如果我将它放在 console.log 中，它`{{user}}`只会显示`[Object object]`在源代码中，我会收到错误消息“意外标识符”。

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2012-04-19T17:13:10.843

输出 时`{{user}}`，Handlebars 将首先检索`user`'`.toString()`值。对于 plain `Object`s，[默认结果是`"[object Object]"`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/toString#Description)你看到的。

为了获得更有用的东西，您要么想要显示对象的特定属性：

```
{{user.id}}
{{user.name}} 
```

或者，您可以使用/定义帮助器以不同方式格式化对象：

```
Handlebars.registerHelper('json', function(context) {
    return JSON.stringify(context);
}); 
```

```
myView = new myView({
    user : {{{json user}}} // note triple brackets to disable HTML encoding
}); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-05-06T04:28:36.213

您可以简单地将 JSON*字符串化：*

```
var user = {}
user = {'id' : 123, 'name' : 'First Name'};
// for print
user.stringify = JSON.stringify(user); 
```

然后在模板打印中：

```
{{{user.stringify}}}; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-02-13T19:44:24.303

我在 node-js 中使用服务器端模板，但这也可能适用于客户端。我在节点中注册了[Jonathan](https://stackoverflow.com/users/15031/jonathan-lonowski)的 json 助手。在我的处理程序中，我通过 res.locals 添加上下文（例如地址簿）。然后我可以在客户端存储上下文变量，如下所示：

```
<script>
  {{#if addressBook}}
  console.log("addressBook:", {{{json addressBook}}});
  window.addressBook = {{{json addressBook}}};
  {{/if}}
</script> 
```

[注意三重卷曲（正如Jim Liu](https://stackoverflow.com/users/888639/jim-liu)所指出的）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T17:08:14.467

您试图在`{{ }}`无效的 JSON 对象中传递模板语法。

您可能需要这样做：

`myView = new myView({ user : user });`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-23T06:00:50.697

如果您想更好地控制输出格式，您可以编写自己的帮助程序。这个有一个递归函数来遍历嵌套对象。

```
 Handlebars.registerHelper('objToList', function(context) {
    function toList(obj, indent) {
      var res=""
      for (var k in obj) { 
          if (obj[k] instanceof Object) {
              res=res+k+"\n"+toList(obj[k], ("   " + indent)) ;
          }
          else{
              res=res+indent+k+" : "+obj[k]+"\n";
          }
      }
      return res;
    }    
    return toList(context,"");
  }); 
```

我们将把手用于电子邮件模板，事实证明这对以下用户很有用

```
{
  "user": {
    "id": 123,
    "name": "First Name",
    "account": {
      "bank": "Wells Fargo",
      "sort code": " 123-456"
    }
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-11T09:34:56.103

在节点路由器中 - 将响应对象字符串化。见下一行。

```
 response.render("view", {responseObject:JSON.stringify(object)}); 
```

在 HTML Script 标记中 - 用户模板文字（模板字符串）并使用 JSON.parse。

```
const json= `{{{responseObject}}}`;
const str = JSON.parse(json); 
```

像魅力一样工作！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-22T08:00:26.780

您可以在 Handlebars 模板中呈现列表或对象的键/值，如下所示：

```
{{#each the_object}}
  {{@key}}: {{this}}
{{/each}} 
```

# android - Android 更新视图树

> ID：10232583
> 
> 赞同：0
> 
> 时间：2012-04-19T16:30:05.277
> 
> 标签：android, view, android-linearlayout

问题：

我有一个类，继承自`LinearLayout`. 此类在构造函数中创建一些按钮，并使用`addChild()`. 我已经重载了方法`onSizeCHanged`，我想在这个方法中添加一些孩子。但是在单击其他按钮之一之前，更改不会生效。

所以，我需要按下一些现有的按钮，然后出现我添加的视图。（顺便说一句，只有带有 ontouchlistener 的按钮才能做到这一点。没有监听器的按钮不能使新视图出现）。

如何在`onSizeChange`方法中添加视图以使其立即出现？

加法：方法`forceLayout()`和`requestLayout()`不能工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:37:16.683

解决方案是：制作一个简单的布尔标志，在 onSizeChanged 上将其设置为“true”并调用“invalidate”。

在方法“onDraw”中检查标志是否为真，如果是，则调用 requestLayout。然后将标志设置为false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T18:24:30.743

我自己没有扩展 LinearLayout，但我读了一些类，我认为你需要重写 onLayout() 并在其中添加你的子视图。检查文档，看看它是否有帮助

[http://developer.android.com/reference/android/widget/LinearLayout.html#onLayout(boolean,%20int,%20int,%20int,%20int](http://developer.android.com/reference/android/widget/LinearLayout.html#onLayout(boolean,%20int,%20int,%20int,%20int) )

# jsf - JSF 网格中的多个组件

> ID：10232584
> 
> 赞同：0
> 
> 时间：2012-04-19T16:30:08.207
> 
> 标签：jsf, jstl, facelets, composite-component, jsf-1.2

我正在尝试使用 Facelet 标记文件在 panelgrid 中获取可重用的 jsf 1.2 组件组。@Balusc 在[如何制作 JSF 复合组件网格？](https://stackoverflow.com/questions/5713718/how-to-make-a-grid-of-jsf-composite-component)是一个极好的资源。我有几个后续问题：

1.  在我的 c:when 我如何测试 tagName 本身而不是检查属性。代替

    ```
    <c:when test="#{type != 'submit'}"> 
    ```

我想检查 tagName 本身来决定如何格式化它。如果'输入'做xxx。

2 这种方法对 jsf 1.2 除了 f:ajax 是否仍然有效？如果是，我可以用 a4j:support ... 替换吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T01:04:26.203

> *在我的 c:when 我如何测试 tagName 本身而不是检查属性。*

我不确定这个问题有什么意义。听起来你正在接近一些不完全正确的东西。您是否可能在多个标签文件上复制粘贴了完全相同的代码？你不应该那样做。使其成为可重用的`<ui:composition>`，或者`<ui:decoration>`您可以在每个标记文件中编写/装饰它，并`<ui:param>`根据 taglib 文件设置一个固定且唯一的值。

* * *

> *除了 f:ajax 之外，这种方法对 jsf 1.2 是否仍然有效？如果是，我可以用 a4j:support ... 替换吗？*

能够创建标记文件不一定是 JSF 特有的，而是所使用的视图技术（在本例中为 Facelets）所特有的。您甚至可以在其前身 JSP 中做类似的事情，另请参阅此答案以获取示例：[JSF 1.2 custom component from jsp:include](https://stackoverflow.com/questions/9435367/jsf-1-2-custom-component-from-jspinclude/9441652#9441652)它应该在支持相关视图技术的每个 JSF 版本中都可以正常工作。

至于 ajax 支持，标签文件与您在标签文件中所做的一切无关。如果你想要并且可以使用，`<a4j:support>`那就去做吧。

# php - 如何在 jQuery Mobile 页面中提交表单？

> ID：10232589
> 
> 赞同：7
> 
> 时间：2012-04-19T16:30:23.123
> 
> 标签：php, mysql, html, jquery

我有一个使用 jQuery 移动 UI 的 HTML 主页。在 HTML 页面的某处，我有一个类似于投票表单的表单：

```
<form name = "vote" action = "logicDB.php" method = "post">
                    <center>
                        <h3>Watch our videos above and share your opinion which manufacturer produces the best sport sedans</h3>                
                        <fieldset style = "width:60%;">
                            <legend>Choose a car:</legend>
                            <input type = "radio" name = "rc1" id = "radio-choice-1" value = "Audi"/>
                            <input type = "radio" name = "rc1" id = "radio-choice-2" value = "BMW"/>
                            <input type = "radio" name = "rc1" id = "radio-choice-3" value = "Mercedes"/>           
                        </fieldset>                 
                        <input value = "SUBMIT" type = "submit" />
                    </center>
</form> 
```

表单的操作参数正在调用具有以下逻辑的我的 php 文件：

```
<?php
$connection = mysql_connect("localhost","root","myPassword");
if(!$connection){ die('Could not connect: ' . mysql_error()); }

mysql_select_db("mydatabase", $connection);

if ($_POST['rc1'] == 'Audi')
{   
    mysql_query("
    UPDATE carvote
    SET votes = votes + 1
    WHERE Brands = 'Audi'
    ",$connection);

    echo "success Audi within if";
}

if ($_POST['rc1'] == 'BMW')
{
    mysql_query("
    UPDATE carvote
    SET votes = votes + 1
    WHERE Brands = 'BMW'
    ",$connection);

    echo "success BMW within if";
}

if ($_POST['rc1'] == 'Mercedes')
{
    mysql_query("
    UPDATE carvote
    SET votes = votes + 1
    WHERE Brands = 'Mercedes'
    ",$connection);

    echo "success Mercedes within if";
}
mysql_close($connection);
?> 
```

我在我的 WAMP localhost 服务器上创建了一个数据库，并且此 php 代码正在写入数据库，具体取决于从表单中选择和提交的单选选项。php 中的这些回声永远不会达到。

问题是当我点击提交时，我会在左上角看到一个白屏，上面写着“未定义”，之后没有任何内容写入数据库。我发现，如果我从 html 主页删除顶部调用 jQuery mobile 的行，一切正常，并且数据被写入数据库（达到 php 中的回声）。似乎 jQuery mobile 与我的 php 代码不兼容。我应该如何解决这个问题？先感谢您！

更新（我让它工作）：这是我在表格中所做的更改：

```
<form id = "ContactForm" onsubmit="return submitForm();"> 
```

带有数据库的 php 文件保持不变。除此之外，我还添加了一个 Ajax 代码：

```
function submitForm()
    {
        $.ajax({type:'POST', url: 'logicDB.php', data:$('#ContactForm').serialize(), success: function(response)
        {
            $('#ContactForm').find('.form_result').html(response);
        }});
        return false;
    } 
```

总结：jQuery Mobile 页面（在 div 中带有 data-role = "page" 的页面）只能通过 AJAX 提交。否则它将无法正常工作。我会把话题换成我的问题，让更多的人可以接触到。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T19:04:30.463

我复制了您的代码并插入了 jquery mobile，在进行了一些小的更改后，我正在发布数据。我通过回显命令运行它，而不是数据库插入。

看看以下内容：

在 Jquery Mobile 上调用：

```
<!DOCTYPE html> 
<html> 
    <head> 
    <title>My Page</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
</head> 
```

index.php 页面的其余部分：

```
<div data-role="page">
<center>
    <h3>Watch our videos above and share your opinion which manufacturer produces the best sport sedans</h3>                
    <form name="vote" action="logicDB.php" method="post" data-ajax="false">
        <fieldset style = "width:60%;" data-role="controlgroup">
            <legend>Choose a car:</legend>
            <input type = "radio" name="rc1" id = "radio-choice-1" value = "Audi"/>
            <label for="radio-choice-1">Audi</label>

            <input type = "radio" name="rc1" id = "radio-choice-2" value = "BMW"/>
            <label for="radio-choice-2">BMW</label>

            <input type = "radio" name="rc1" id = "radio-choice-3" value = "Mercedes"/>
            <label for="radio-choice-3">Mercedes</label>                            
        </fieldset>                 
        <input value = "SUBMIT" type = "submit" />
    </form>
</center> 
```

最后是 logicDB.php

```
if ($_POST['rc1'] == 'Audi') {
 echo "Audi <br>";
}
if ($_POST['rc1'] == 'BMW') {
 echo "BMW <br>";
}
if ($_POST['rc1'] == 'Mercedes') {
 echo "Mercedes <br>";
} 
```

主要的变化是

```
<fieldset style = "width:60%;" data-role="controlgroup"> 
```

和`data-ajax="false"`我之前提到的。

看看这是否适合你。

# android - 在 Android 上如何计算每日、每周、每月的 3G、WiFi 互联网流量？

> ID：10232591
> 
> 赞同：1
> 
> 时间：2012-04-19T16:30:23.673
> 
> 标签：android

我最近开始学习 android，在我目前的项目中，我需要计算每天、每周、每月的 3G 和 WiFi 互联网流量。现在我可以发现：

long totalRecievedBytes = TrafficStats.getTotalRxBytes();
long totalTransmittedBytes = TrafficStats.getTotalTxBytes();
字符串 allTraffic = humanReadableByteCount(totalRecievedBytes + totalTransmittedBytes);
TextView tv = (TextView) findViewById(R.id.traffic_3g_all);
tv.setText(allTraffic);

我见过 netcounter 应用程序，它将所有流量数据写入手机的内存。启动时从内存中读取流量数据。

有哪些方法可以收集有关每日、每周、每月的 3G、WiFi 互联网流量使用情况的信息？

谢谢，任何答案表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:09:42.763

如果您查看此处的类参考[TrafficStats Android Reference](http://developer.android.com/reference/android/net/TrafficStats.html)，系统不会按月、日或周跟踪它，并且某些设备不支持全部。因此，您的应用程序需要确定它是否受支持，然后定期读取统计信息并自行跟踪它们。我确实在文档中阅读了一种重置统计信息的方法，但我会看看设置中是否没有一些硬连线来重置此计数器。您可能希望在启动时运行服务以收集此数据，请参阅此[问题](https://stackoverflow.com/questions/2784441/trying-to-start-a-service-on-boot-on-android) 以了解如何执行此操作。

# email - 使用 smtp.mydomain.com 转发到 smtp.gmail.com？

> ID：10232592
> 
> 赞同：0
> 
> 时间：2012-04-19T16:30:24.633
> 
> 标签：email, smtp, gmail

我正在使用谷歌应用程序发送电子邮件。我可以使用 smtp.gmail.com 通过 c# 代码发送电子邮件。我希望能够改用名称 smtp.mydomain.com，但仍将其转到 smtp.gmail.com。我尝试在我的 DNS 设置中看到一个 CNAME，但我收到此错误：

“根据验证程序，远程证书无效。”

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:36:31.363

是的，您不能，用于与远程 SMTP 服务器进行私密通信的 TLS 证书是使用 smtp.gmail.com 签名的。唯一的解决方案是使用 sendmail 创建一个 SMTP 中继，例如在您自己的服务器上。

# windows - 按名称查找进程并杀死它

> ID：10232593
> 
> 赞同：0
> 
> 时间：2012-04-19T16:30:32.687
> 
> 标签：windows, qt, process, kill

我有一个基于 Qt 的更新程序应用程序，需要用新文件替换正在运行的进程。在 Windows 上，更新程序在进程运行时失败。

有没有办法可以按名称找到一个进程，例如 Firefox.exe 并使用 Qt 杀死它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:32:51.250

你可以这样调用系统：taskkill /f /im firefox.exe

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T16:36:59.173

Qt 中没有执行此操作的 API，这意味着执行此操作的唯一方法是使用特定于平台的代码。

# javascript - 在 jQuery 中创建具有属性的 HTML 元素，在 ie7 和 ie8 中失败

> ID：10232595
> 
> 赞同：1
> 
> 时间：2012-04-19T16:30:44.140
> 
> 标签：javascript, jquery, html

我正在通过 jQuery 生成一个带有属性的 HTML 元素，然后将其插入到 DOM 中。我将一个类属性传递给元素。见下文：

```
jQuery('<li></li>', {  
    class: "myClass" 
}); 
```

我在 ie7 和 ie8 中收到以下错误，与`class: "myCLass"`.

```
SCRIPT1028: Expected identifier, string or number 
```

它适用于 ie9 和 Firefox。没有测试过其他浏览器。

这种生成元素的方法是 ie7 和 ie8 不支持的属性吗？还是我在脚本中犯了错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T16:31:32.653

它是保留的。使用`className`或用引号括起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:36:17.290

要么使用`className`，要么使用`prop`。

```
// jQuery way
$('<div></div>').prop('class', 'myClass')

// Vanilla js way
$('<div></div>')[0].className = 'myClass' 
```

# visual-studio-2010 - Visual Studio 2010 查找菜单窃取焦点 - 无法滚动

> ID：10232600
> 
> 赞同：0
> 
> 时间：2012-04-19T16:31:14.183
> 
> 标签：visual-studio-2010

在 Visual Studio 2010 中，如果您按 ctrl+f，则查找菜单将获得焦点，您将无法使用鼠标滚轮在主窗口中滚动。有没有办法调整它以允许滚动？

在 Visual Studio 2008 中，如果按 ctrl+f，查找菜单将具有焦点，但您仍可以在主窗口中滚动。这是我在 2k10 中想要的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:48:09.007

据我所知，VS 中没有允许这样做的设置。我所做的是添加 Productivity Power Tools 扩展 [http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef/](http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef/)。

它的查找扩展取代了 ctrl+f 并允许我滚动文本编辑器窗口，即使焦点位于查找对话框上也是如此。

# ios - 如何减小 UITableView 的 backgroundView 的大小？

> ID：10232601
> 
> 赞同：2
> 
> 时间：2012-04-19T16:31:26.740
> 
> 标签：ios, uitableview

![带有多余 backgroundView 的 TableView](../Images/57c8c3e70fef3b49611466db2a13f28a.png)

我有 3 个表视图。主视图有一个子视图。任何线索如何删除每个表周围过多的背景视图边框？也就是说，对于标签 2，单元格：7 之后有一点空白。我可以隐藏它

```
[tableView setBackgroundView:nil]; 
```

但我需要重新设置大小，使其看起来接近单元格。tableView.frame 与 tableView.backgroundView.frame 大小相同。

# c# - 如何构建 ServiceStack 以将其与 MonoDroid 一起使用？

> ID：10232602
> 
> 赞同：3
> 
> 时间：2012-04-19T16:31:27.890
> 
> 标签：c#, build, xamarin.android, servicestack, ormlite-servicestack

我正在尝试将 ServiceStack REST DTO 和 OrmLite 与 monoDroid 一起使用。但我不知道如何构建 ServiceStack 来使用它。

默认情况下，我在部署到移动设备时出错：

> C:\Program Files (x86)\MSBuild\Novell\Novell.MonoDroid.Common.targets(464,2)：错误：加载程序集时出现异常：System.IO.FileNotFoundException：无法加载程序集“System.Configuration，版本= 2.0.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a'。也许它在 Mono for Android 配置文件中不存在？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:36:56.277

这里的问题是您试图使用针对 Android 应用程序 Mono 的完整 .NET 配置文件编译的 ServiceStack DLL，这注定会失败。在这种特殊情况下，它失败了，因为该 DLL 依赖于 System.Configuration，它不包含在 Mono for Android 配置文件中。为了在您的应用程序中使用库，您应该针对 Mono for Android 配置文件编译其源代码，这将验证配置文件是否支持它，并允许您从应用程序中安全地引用它。

当尝试为现有库编译 Mono for Android 版本时，最简单的起点是为其构建 Silverlight（如果有的话）。由于 Silverlight 公开的基类库与 Android 的 Mono 非常相似，因此文件/编译符号集通常也在它们之间排列。我在[这里有一篇旧帖子](http://www.gregshackles.com/2010/12/shared-libraries-for-windows-phone-7-monodroid-and-beyond/)，讨论了如何从其他项目链接文件以正确编译类库。

# mysql - 通过iOS应用程序将数据从json（php webservice）修改为mysql

> ID：10232604
> 
> 赞同：2
> 
> 时间：2012-04-19T16:31:44.237
> 
> 标签：mysql, ios, json

你好，我实际上开发了一个 Ios 应用程序这个应用程序使用 PHP Web 服务从 mysql 获取数据（转换为 JSON）。实际上它工作得很好。

但问题是：如果我想更新、删除一条信息。

例如：

```
@interface Base : NSManagedObject

@property (nonatomic, retain) NSNumber * id;
@property (nonatomic, retain) NSNumber * latitude;
@property (nonatomic, retain) NSNumber * longitude;
@property (nonatomic, retain) NSString * mail;      
... 
```

这个类是 Fill（在一个 http 请求之后，获取 JSON）......

问题 ：

```
self.mail = @"newmail@mail.com"; 
```

如何将这些数据更新到我的 MySQL 数据库？

*   创建另一个 WebService 并通过 url 发送数据？

    ```
    http://mywebsite/service/baseClassUpdate.php?id=XX&mail=XXXX 
    ```

*   如果是：它是“安全的”吗？因为如果有人找到这个网址......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:47:38.200

仅通过普通请求发送邮件更新绝对不安全。首先，这些操作之后应该是密码验证，其次你应该在最后添加一个 md5 哈希签名验证并验证服务器上的签名......

此外，您应该以单向散列格式（md5 或 SHA1）发送密码，并使用您在 Web 服务器数据库中的内容验证散列值...

编辑 **回复您对此答案的问题**

这是我要做的：我会这样做：

```
website/script.php?id=XX&mail=XXXX&password=MD5Pass&signature=MD5signature=MD5Signature 
```

md5signature 应该是所有参数 (id) (mail) (password) 的 md5 哈希值和一个秘密密码，例如***mySecr3tPass*** 所以如果 id=12, mail = mymail@mail.com 和 pass=AERF124F，签名将是12mymail@mail.comAERF124FmySecr3tPass 的 MD5 哈希，即 0b9492395c9c1a73a6622cab5a6a4de5

所以请求将是：`website/script.php?id=12&mail=mymail@mail.com&password=AERF124F&signature=0b9492395c9c1a73a6622cab5a6a4de5`

因此，在您的 php 脚本中，您应该计算所有参数的 md5 哈希值 + 密码短语并查看它们是否匹配。 **如果它们匹配，则请求有效，您可以继续，如果它们不匹配，则有人试图劫持数据库，忽略它！**

# ios5 - 如何在 iPhone 上显示 Google Maps API Web Services 数据

> ID：10232605
> 
> 赞同：1
> 
> 时间：2012-04-19T16:31:46.293
> 
> 标签：ios5, google-maps-api-3

我正在开发一个 iPhone 应用程序，我需要在其中显示两个位置之间的路线。

为此，我想利用 Google Maps API 服务并从他们那里获得 [JSON 响应][1]，我想在我的应用程序中显示数据。

我对这个实现完全陌生

谁能告诉我..如何实现这个..

我想使用该 JSON 数据并在我的应用程序中显示路线..

# .net - 如何通过管理网页更改窗口调度程序任务的日期？

> ID：10232611
> 
> 赞同：0
> 
> 时间：2012-04-19T16:32:10.547
> 
> 标签：.net, scheduled-tasks

如何通过 ac#**网页**创建窗口调度程序任务？

我有一个我想每周运行一到两次的 Exe。即使网站关闭，此任务也应该运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:41:18.780

您可以在命令提示符下通过 dos 命令安排任务。请参阅这篇文章[如何从命令行创建、修改和删除计划任务](http://www.howtogeek.com/51236/how-to-create-modify-and-delete-scheduled-tasks-from-the-command-line/)
您可以通过 aspx 执行 dos 命令。请参阅这篇文章[在 aspx 页面中运行 DOS 命令](http://wiki.customware.net/repository/display/SharePoint/Running+DOS+Command+Inside+aspx+Pages)。结合这两者，您可以通过asp.net中的网页提出命令来安排或修改windows中现有的预定命令。希望这可以帮助

编辑：发现有一个[Task Scheduler 2.0 Interfaces](http://msdn.microsoft.com/en-us/library/aa383600%28VS.85%29.aspx)，还从 codeproject 查看这篇文章：[A New Task Scheduler Class Library for .NET](http://www.codeproject.com/Articles/2407/A-New-Task-Scheduler-Class-Library-for-NET)

# android - 背景图像修复了在移动设备上使用 jquery mobile 和 phonegap 时出现的问题

> ID：10232614
> 
> 赞同：0
> 
> 时间：2012-04-19T16:32:25.683
> 
> 标签：android, mobile, jquery-mobile, cordova

我正在尝试让应用程序使用固定的背景图像，因此当它滚动时，图像会保持在同一位置。

在桌面浏览器上，这工作正常。当我使用 phonegap 并在我的 android 设备上运行它时，背景图像会跳转，然后在您滚动页面时重新出现在正确的位置。

我已经查看了堆栈溢出和谷歌，但还没有想出解决这个问题的方法。

我尝试将背景图像添加到 .ui-page、body 以及在其周围添加 div，但是每当您在 android 上的应用程序中滚动页面时，背景就会跳转。

我还尝试更改位置以将其链接到顶部、中心底部等，但没有任何效果。

页眉和页脚是固定的，并且正在使用 jquery mobile 1.1 和 phonegap 1.2。

如果还需要什么，我会分享我能做的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:14:41.563

Phonegap uses the androids native browser and position:fixed is only supported since android browser version 2.2.

Source: [http://caniuse.com/css-fixed](http://caniuse.com/css-fixed)

# powershell - Powershell - 通过函数上的“验证”属性引发的异常

> ID：10232616
> 
> 赞同：2
> 
> 时间：2012-04-19T16:32:30.450
> 
> 标签：powershell, powershell-2.0

我在 Powershell 中有这样的功能。当用户为任何参数传递空字符串时，powershell 会验证并引发异常。我该如何处理此类异常？

```
function CheckADUser()
{
    param(
            [ValidateLength(1,256)]
            [string]$domainName, 
            [ValidateLength(1,256)]
            [string]$username, 
            [ValidateLength(1,256)]
            [string]$password)
    Process{
    $fullyQualifiedUser = $domainName+"\"+$username
    $domain = New-Object DirectoryServices.DirectoryEntry("", $fullyQualifiedUser, $password)
    return $domain.name
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:05:21.123

使用 try/catch 块处理异常：

```
try {
  checkaduser $null $null $null
}
catch [System.Management.Automation.ValidationMetadataException] {
  # exception handling code
} 
```

# ajax - 具有动态内容的轮播

> ID：10232618
> 
> 赞同：3
> 
> 时间：2012-04-19T16:32:49.877
> 
> 标签：ajax, twitter-bootstrap, carousel

我在这里遇到了来自 Twitter 引导程序的轮播。[http://twitter.github.com/bootstrap/javascript.html#carousel](http://twitter.github.com/bootstrap/javascript.html#carousel)

它看起来真的很好。但是示例中的所有图像/内容都是硬编码的。如何向服务器请求新内容并将其显示在轮播中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:30:59.000

答案必须针对每种语言进行调整，但假设您使用 PHP 编程，它可能看起来像这样：

如果您有一组图像：

```
$images = ['path/to/image.jpg', 'path/to/image2.jpg', 'path/to/image3.jpg'] 
```

然后您将遍历这些图像，并将每个图像放置在适当的 HTML 标记中，如下所示：

```
<?php foreach ($images as $image) { ?>
  <div class="item">
    <img src="<?php echo $image ?>" />
  </div>
<?php } ?> 
```

# batch-file - 批处理文件：检查多个注册表项，根据需要创建/更改然后继续？

> ID：10232623
> 
> 赞同：1
> 
> 时间：2012-04-19T16:33:02.267
> 
> 标签：batch-file, registry

好的，我需要一个批处理命令（`FOR`也许是一个循环？）来检查多个注册表项是否存在`StateFlags0001`密钥。

如果密钥不存在，则创建它并将其设置`value`为`0x2`. 如果确实存在，请确保将其值设置为`0x2`。

我知道我可以用一些聪明的命令来做这个“很长的路” `IF`，但我想知道它是否可以以某种方式大大简化。

最终，我希望`cleanmgr /sagerun:1`命令通过批处理自动化，这样我就可以取消`cleanmgr /sageset:1`命令，因为这个批处理将被发送给一些对在计算机上执行基本任务一无所知的朋友和家人。让他们运行批处理文件会容易得多，然后我可以引导他们完成`cleanmgr sageset:1`命令之后/期间的步骤......

在有人问“为什么不简单地将`VolumeCaches`文件夹中的所有内容设置为您需要的内容？”之前，我已经省略了几个键，因为我不希望它们包含在清理过程中，所以这不是一个选项。

当然，如果更容易执行我的请求并忽略它们并在剩余的内容上运行循环（即下面的键），那么无论如何，让我们这样做......

这是有问题的键：

```
REG QUERY "HKLM\\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\VolumeCaches\Active Setup Temp Folders" /v "StateFlags0001" | Find "0x2"
REG QUERY "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\VolumeCaches\Downloaded Program Files" /v "StateFlags0001" | Find "0x2"
REG QUERY "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\VolumeCaches\Internet Cache Files" /v "StateFlags0001" | Find "0x2"
REG QUERY "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\VolumeCaches\Memory Dump Files" /v "StateFlags0001" | Find "0x2"
REG QUERY "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\VolumeCaches\Old ChkDsk Files" /v "StateFlags0001" | Find "0x2"
REG QUERY "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\VolumeCaches\Previous Installations" /v "StateFlags0001" | Find "0x2"
REG QUERY "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\VolumeCaches\Recycle Bin" /v "StateFlags0001" | Find "0x2"
REG QUERY "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\VolumeCaches\Setup Log Files" /v "StateFlags0001" | Find "0x2"
REG QUERY "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\VolumeCaches\System error memory dump files" /v "StateFlags0001" | Find "0x2"
REG QUERY "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\VolumeCaches\System error minidump files" /v "StateFlags0001" | Find "0x2"
REG QUERY "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\VolumeCaches\Temporary Files" /v "StateFlags0001" | Find "0x2"
REG QUERY "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\VolumeCaches\Temporary Setup Files" /v "StateFlags0001" | Find "0x2"
REG QUERY "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\VolumeCaches\Thumbnail Cache" /v "StateFlags0001" | Find "0x2"
REG QUERY "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\VolumeCaches\Upgrade Discarded Files" /v "StateFlags0001" | Find "0x2"
REG QUERY "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\VolumeCaches\Windows Error Reporting Archive Files" /v "StateFlags0001" | Find "0x2"
REG QUERY "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\VolumeCaches\Windows Error Reporting Queue Files" /v "StateFlags0001" | Find "0x2"
REG QUERY "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\VolumeCaches\Windows Error Reporting System Archive Files" /v "StateFlags0001" | Find "0x2"
REG QUERY "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\VolumeCaches\Windows Error Reporting System Queue Files" /v "StateFlags0001" | Find "0x2" 
```

所以，简而言之；

检查上面的键`StateFlags0001`。如果存在，请确保值为`0x2`. 如果不存在，则创建它并将值设置为`0x2`。运行`cleanmgr /sagerun:1`。出口。

一如既往，感谢您的启发！！！；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:56:26.873

正如你已经怀疑的那样，`for`是你的朋友

从这样的事情开始......

```
@echo off
for /f "skip=4 tokens=*" %%a in ('reg query "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\VolumeCaches\"') do (
  echo %%~na
  for /f "tokens=*" %%b in ('REG QUERY "%%a" /v "StateFlags0001" 2^>^&1 ^| Find "0x2"') do (
    echo %%b
  )
) 
```

然后`echo`通过适当处理键来更改命令

**EDIT1：** 我编辑了一些代码，向您展示如何处理键名。

1.  注意`skip=4`跳过`REG QUERY`输出第一行的选项；

2.  以及`echo %%~na`提取密钥名称以对其进行处理并有条件地执行第二个`REG QUERY`

**EDIT2：** 根据字符串列表检查字符串在 BAT 文件中有点棘手。这是一些帮助您入门的代码

初始化一个变量来保存你感兴趣的键

```
set keys=Active Setup Temp Folders
set keys=!keys!,Downloaded Program Files
set keys=!keys!,Internet Cache Files
set keys=!keys!,Memory Dump Files
set keys=!keys!,Old ChkDsk Files
set keys=!keys!,Previous Installations
set keys=!keys!,Recycle Bin
set keys=!keys!,Setup Log Files
set keys=!keys!,System error memory dump files
set keys=!keys!,System error minidump files
set keys=!keys!,Temporary Files
set keys=!keys!,Office Setup Files
set keys=!keys!,Temporary Setup Files
set keys=!keys!,Thumbnail Cache
set keys=!keys!,Upgrade Discarded Files
set keys=!keys!,Windows Error Reporting Archive Files
set keys=!keys!,Windows Error Reporting Queue Files
set keys=!keys!,Windows Error Reporting System Archive Files
set keys=!keys!,Windows Error Reporting System Queue Files
set keys=!keys!,Recycle Bin 
```

然后，在外部 for 循环中，将`echo`命令更改为

```
 call :findkey %%~na 
```

并添加代码以在找到时继续

```
 if "!foundkey!" NEQ "" ( 
    for /f "tokens=*" %%b in ('REG QUERY "%%a" /v "StateFlags0001" 2^>^&1 ^| Find "0x2"') do (
      echo %%b 
```

然后添加解析列表的逻辑

```
:findkey
set keylist=!keys!
set foundkey=
:againlist
for /f "tokens=1* delims=," %%k in ("!keylist!") do (
  if "%%k" NEQ "" ( 
    if /i "%*"=="%%k" (
      set foundkey=%%k
      goto :found
    )
  )
  if "%%l" NEQ "" (
      set keylist=%%l
      goto :againlist
  )
)
:found
goto :eof 
```

记得还要添加

setlocal enabledelayedexpansion

`for`在 BAT 文件的开头，因为它是循环内适当的变量扩展所必需的。

**编辑3：**

更简单的查找方法

```
:findkey
set foundkey=
for %%k in (!keys!) do (
  set curkey=%%k
  set curkey=!curkey:_= !
  if /i "!curkey!"=="%*" (
    set foundkey=!curkey!
  )
) 
goto :eof 
```

这个更简单`for`需要！keys！用空格隔开，所以你需要准备！keys！将所有空格替换为下划线，逗号替换为空格。

```
set keys=!keys: =_!
set keys=!keys:,= ! 
```

现在，把所有的部分放在一起，

```
@echo off
setlocal enabledelayedexpansion
set keys=Active Setup Temp Folders
set keys=!keys!,Downloaded Program Files
set keys=!keys!,Internet Cache Files
set keys=!keys!,Memory Dump Files
set keys=!keys!,Old ChkDsk Files
set keys=!keys!,Previous Installations
set keys=!keys!,Recycle Bin
set keys=!keys!,Setup Log Files
set keys=!keys!,System error memory dump files
set keys=!keys!,System error minidump files
set keys=!keys!,Temporary Files
set keys=!keys!,Temporary Setup Files
set keys=!keys!,Thumbnail Cache
set keys=!keys!,Upgrade Discarded Files
set keys=!keys!,Windows Error Reporting Archive Files
set keys=!keys!,Windows Error Reporting Queue Files
set keys=!keys!,Windows Error Reporting System Archive Files
set keys=!keys!,Windows Error Reporting System Queue Files
set keys=!keys: =_!
set keys=!keys:,= !

for /f "skip=4 tokens=*" %%a in ('reg query "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\VolumeCaches\"') do (
  call :findkey %%~na
  if "!foundkey!" NEQ "" ( 
    for /f "tokens=*" %%b in ('REG QUERY "%%a" /v "StateFlags0001" 2^>^&1 ^| Find "0x2"') do (
      echo %%b
    )
  )
)
goto :eof

:findkey
set foundkey=
for %%k in (!keys!) do (
  set curkey=%%k
  set curkey=!curkey:_= !
  if /i "!curkey!"=="%*" (
    set foundkey=!curkey!
  )
) 
goto :eof 
```

# ruby - Ruby 语言使用 WSDL 文件获取响应和请求

> ID：10232626
> 
> 赞同：0
> 
> 时间：2012-04-19T16:33:11.047
> 
> 标签：ruby, ruby-on-rails-3, rhomobile, rhodecode

我是红宝石和网络服务的新手。如何从下面的 WSDL 文件中获取请求和响应.. 任何机构都会为此发布 ruby​​ 代码...

参数可以作为字符串传递... pcEmployeecode="02385"

网址="http://online.mccolls.com.au:8080/wsa/wsa1/wsdl?targetURI=urn:OHWebServiceFMGT"

请帮我 ....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:52:16.240

你可以试试这个关于 Savon 的 railscast：

[http://railscasts.com/episodes/290-soap-with-savon](http://railscasts.com/episodes/290-soap-with-savon)

# ruby-on-rails - Rails 开发：如何一次响应多个请求？

> ID：10232627
> 
> 赞同：1
> 
> 时间：2012-04-19T16:33:11.493
> 
> 标签：ruby-on-rails, multithreading, mongrel, webrick, multiprocess

我继承了遗留 Web 应用程序的维护，采用一种“有趣”的方式来管理对数据库的并发访问。

该应用程序基于 ruby​​-on-rails 2.3.8。

我想建立一个开发环境，并从那里有两个网络浏览器同时发出请求，只是为了了解正在发生的事情。

当然，如果我使用 Webrick，这将不起作用，因为它一次只服务一个 http 请求，所以所有请求都被它有效地序列化。

我以为杂种可以帮助我，但是

```
mongrel_rails start -n 5 
```

实际上是在产生一个进程，而且它似乎也是单线程的。

设置我的开发环境以使其一次响应多个请求的最简单方法是什么？我想避免使用 apache 和 mod_passenger，因为这是开发，我希望能够更改代码并在下一个请求时自动重新加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:40:02.683

在开发模式下，mod_passenger 会重新加载类和视图。我将乘客专门用于开发和部署。

在生产中，您可以（从 rails 应用程序的根目录）：

```
touch tmp/restart.txt 
```

乘客将重新加载应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:42:43.650

看看瘦的

[http://code.macournoyer.com/thin/](http://code.macournoyer.com/thin/)

# iphone - 删除核心数据时出现“CoreData 无法完成故障”错误

> ID：10232630
> 
> 赞同：4
> 
> 时间：2012-04-19T16:33:22.123
> 
> 标签：iphone, objective-c, ios, core-data

这是我正在使用的代码行，这导致了问题：

```
[self.managedObjectContext deleteObject:object]; 
```

然后当它保存上下文时，它会导致崩溃：

```
Terminating app due to uncaught exception 'NSObjectInaccessibleException', reason: 'CoreData could not fulfill a fault' 
```

编辑：使用“-com.apple.CoreData.SQLDebug 1”运行代码。

```
CoreData: sql: BEGIN EXCLUSIVE
CoreData: sql: DELETE FROM ZENTRY WHERE Z_PK = ? AND Z_OPT = ?
CoreData: sql: COMMIT
CoreData: sql: SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZCREATIONDATE, t0.ZMESSAGE, t0.ZSECTIONIDENTIFIER, t0.ZVERSION FROM ZENTRY t0 WHERE  t0.Z_PK = ? 
CoreData: annotation: sql connection fetch time: 0.0042s
CoreData: annotation: total fetch execution time: 0.0096s for 0 rows.
    CoreData: annotation: fault fulfilled from database for : 0x209010 <x-coredata://[edited out long code here]/Entry/p34>
 *** Terminating app due to uncaught exception 'NSObjectInaccessibleException', reason: 'CoreData could not fulfill a fault' 
```

不确定这是否有助于找出问题所在？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-19T16:52:47.733

我认为你需要为这个问题提供更多的“背景”。

但是，有几个地方可以查找您的问题。首先，您是否使用多个 ManagedObject 上下文？如果是这样，请确保 self.managedObjectContext 与 object.managedObjectContext 相同。

你在使用多个线程吗？如果是这样，那么您必须使用多个 MOC。确保您仅在“其”线程上使用 MOC。

如果您使用包含策略，则意味着在您创建的线程上使用 MOC。如果是其他两个之一，那么您应该在 performBlock 或 performBlockAndWait 中执行 MOC 代码。

获取正在保存的对象的对象 id，并查看它是否在 SQL 文件中。

您可以打开核心数据 sql 调试标志（将“-com.apple.CoreData.SQLDebug 1”添加到方案中启动时传递的参数）并在您的应用程序运行时观察 SQL 语句日志到控制台。它可以帮助您追踪真正发生的事情。

我觉得暂时够了……

**编辑**

其他一些调试的东西......

结合上下文，抛弃所有关于状态的想法。插入/删除/注册/更新对象、propogatesDeletesAtaaendOfEvent、retainsRegisteredObjects 等...

Basically, these types of problems are very difficult to track down without lots of information, especially if you are only using one thread and one MOC... because most issues result from using multiple MOCs and/or threads.

# c# - 是否返回 IEnumerable<> 线程安全？

> ID：10232631
> 
> 赞同：23
> 
> 时间：2012-04-19T16:33:23.843
> 
> 标签：c#, .net-3.5, thread-safety

我有一个 Visual Studio 2008 C# .NET 3.5 项目，我想要一个线程安全的`Foo`对象池。

```
public class FooPool
{
    private object pool_lock_ = new object();
    private Dictionary<int, Foo> foo_pool_ = new Dictionary<int, Foo>();

    // ...

    public void Add(Foo f)
    {
        lock (pool_lock_)
        {
            foo_pool_.Add(SomeFooDescriminator, f);
        }
    }

    public Foo this[string key]
    {
        get { return foo_pool_[key]; }
        set { lock (pool_lock_) { foo_pool_[key] = value; } }
    }

    public IEnumerable<Foo> Foos
    {
        get
        {
            lock (pool_lock_)
            {
                // is this thread-safe?
                return foo_pool_.Select(x => x.Value);
            }
        }
    }
} 
```

函数是`public IEnumerable<Foo> Foos { get; }`线程安全的吗？或者，我是否需要克隆结果并返回一个新列表？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-19T16:35:50.187

不，不是。

如果在您的调用者枚举时另一个线程添加到字典中，您将收到错误消息。

相反，您可以这样做：

```
lock (pool_lock_) {
    return foo_pool.Values.ToList();
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-19T19:25:48.210

> 函数是`IEnumerable<Foo> Foos { get; }`线程安全的吗？

不。

> 或者，我是否需要克隆结果并返回一个新列表？

No, because that's not right either. A threadsafe method that gives the wrong answer is not very useful.

If you lock and make a copy then *the thing you are returning is a snapshot of the past*. The collection could be changed to be completely different *the moment the lock is released*. If you make this threadsafe by making a copy then you are now handing a bag full of lies to your caller.

When you are dealing with single-threaded code, a reasonable model is that everything is staying the same unless you take specific measures to change a thing. That is not a reasonable model in multi-threaded code. In multi-threaded code, you should assume the opposite: everything is constantly changing unless you take specific measures (such as a lock) to ensure that things are not changing. What is the good of handing out a sequence of Foos that describe the state of the world in the distant past, hundreds of nanoseconds ago? The entire world could be different in that amount of time.

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-04-19T16:36:01.687

它*不是*线程安全的。您需要返回`ToList()`：

```
return foo_pool_.Select(x => x.Value).ToList(); 
```

小心**延期执行！**

事实上，实际代码**在锁退出后运行**。

```
// Don't do this
lock (pool_lock_)
{
    return foo_pool_.Select(x => x.Value); // This only prepares the statement, does not run it
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T20:28:55.260

You may want to consider a SynchronizedCollection,

*SynchronizedCollection Class Provides a thread-safe collection that contains objects of a type specified by the generic parameter as elements.*

[http://msdn.microsoft.com/en-us/library/ms668265.aspx](http://msdn.microsoft.com/en-us/library/ms668265.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T20:57:40.143

If you'll lock on every read access you'll end with very bad performance. And in suggestions to use toList you'll also allocate memory every time.

If you using .NET 4 just use ConcurrentDictionary class from new thread safe collections. They will provide very fast (lock free) mechanisms for accessing data from multiple threads.

[http://msdn.microsoft.com/en-us/library/dd997305.aspx](http://msdn.microsoft.com/en-us/library/dd997305.aspx)

If you are using old .NET version I would suggest you to use for cycle with count variable instead of foreach it will work if you only add elements without removing them (as in your example)

# javascript - jquery检查变量值

> ID：10232633
> 
> 赞同：0
> 
> 时间：2012-04-19T16:33:39.633
> 
> 标签：javascript, jquery

在 jQuery 中，我有以下 4 个变量。

```
var add
var city
var state
var zip 
```

我需要检查以上任何一项是否有价值。如果没有一个值是可以的。如果它们都具有确定的值。

只需要检查其中至少一个没有值。不知道什么是最有效的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T16:42:14.120

```
var check = [ add, city, state, zip ].every( function ( v ) { return !!v } ) 
```

只是为了炫耀。

说明：该`every`方法循环遍历所有数组，`false`如果*其中一个*条件返回则返回`false`并立即停止循环。如果所有循环都返回`true`，`true`则返回。

PS：`v`用于“变量”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T16:46:52.223

```
var check = (function(a, b, c, d) {
    return !!a && !!b && !!c && !!d;
}(add, city, state, zip));

console.log(check); 
```

另一种方法...今天让我们学习一些新技术！

这实际上将检查该值是否为假。其他一切都可以（字符串、数字、TRUE）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T16:41:54.913

要检查 ia 变量是否有赋值给它，你可以这样做：

```
var myVar
....
if (typeof myVar === 'undefined'){
  // here goes your code if the variable doesn't have a value
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T17:01:10.587

```
if( add.length == 0 || zip.length == 0 || city.length == 0 || state.length == 0) {    
    alert("at least one of the variables has no value");      
};   else if (add.length == 0 & zip.length == 0 & city.length == 0 & state.length == 0) {
         alert("all of the variables are empty");
     }; else { alert("okay"); } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T16:46:13.023

简单地

```
if (yourVar)
{
    // if yourVar has value  then true other wise false.
} 
```

希望这就是你所需要的..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T16:41:17.580

```
if(!add || !city || !state || !zip) {
    console.log('exists var with no value');
} 
```

# facebook - 在 Facebook 上发布可点击的链接——带有发送按钮或发送对话框？

> ID：10232642
> 
> 赞同：0
> 
> 时间：2012-04-19T16:34:09.553
> 
> 标签：facebook

我们需要允许我们网站的用户发布到 Facebook 的可点击链接。更准确地说——我们需要代表用户使用可点击的链接预先填充其中一个 Facebook 插件。我们不能依赖用户自己输入此链接。

我们对此进行了研究，共享功能似乎提供了该功能，但 FB 已弃用共享：http: [//developers.facebook.com/docs/share/](http://developers.facebook.com/docs/share/)

我们成功实现了发送按钮（见这里：[https](https://developers.facebook.com/docs/reference/plugins/send/) ://developers.facebook.com/docs/reference/plugins/send/ ）

发送按钮虽然不允许我们发布可点击的链接。虽然我们网站的用户可以点击我们网站上的“发送”，然后会弹出“发送”对话框——我们不能用可点击的链接“预填充”“发送”对话框。

有没有办法将可点击的链接发布到 Facebook（现在已弃用的 Share 除外）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:44:26.457

只是一个想法，

相反，你为什么不使用[发送对话框来实现发送消息](https://developers.facebook.com/docs/reference/dialogs/send/)

像[这样的东西（小提琴）](http://jsfiddle.net/dhirajbodicherla/gftXF/)

希望这会有所帮助

# c - API 结构实用程序 - 函数或宏？

> ID：10232645
> 
> 赞同：0
> 
> 时间：2012-04-19T16:34:25.740
> 
> 标签：c, macros, inline-functions

我在库 API 中定义了一个实用程序结构，它有四个字段，都是数字计数器。

```
typedef struct {
  size_t bytes;
  int    codepoints;
  int    graphemes;
  int    columns;
} TickitStringPos; 
```

我想提供一些实用程序来轻松处理这些结构。我可以将这些实现为（静态内联）函数，例如

```
static inline void tickit_stringpos_zero(TickitStringPos *pos) {
  pos->bytes = pos->codepoints = pos->graphemes = pos->columns = 0;
}

static inline void tickit_stringpos_limit_columns(TickitStringPos *pos, int columns) {
  pos->bytes = pos->codepoints = pos->graphemes = -1;
  pos->columns = columns;
}

TickitStringPos here, limit;
tickit_stringpos_zero(&here);
tickit_stringpos_limit_columns(&limit, 20); 
```

或者我可以将这些实现为宏，例如

```
#define TICKIT_STRINGPOS_ZERO(pos) do { \
  (pos).bytes = (pos).codepoints = (pos).graphemes = (pos).columns = 0; \
} while(0);

#define TICKIT_STRINGPOS_LIMIT_COLUMNS(pos,_columns) do { \
  (pos).bytes = (pos).codepoints = (pos).graphemes = -1; \
  (pos).columns = _columns; \
} while(0);

TickitStringPos here, limit;
TICKIT_STRINGPOS_ZERO(here);
TICKIT_STRINGPOS_LIMIT_COLUMNS(limit, 20); 
```

我应该考虑如何权衡这两种方法？每种方法都可能同样强大和灵活，但出于某种原因，一种方法是否特别可取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:36:26.340

喜欢函数而不是宏，原因很简单，因为它们为您提供与宏不同的类型安全性。
此外，使用函数，您不必像宏那样处理任何副作用。

至于函数，`inline`它只是向编译器表明您希望它不绑定到编译器以生成函数`inline`，但是任何现代编译器都可以轻松完成所需的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:39:35.403

正如 Als 所说，出于维护的原因，我认为在有这种可能性时应该使用函数。由于它们是内联的，因此没有性能损失。将宏保存为常量，或者可能（非常）小的计算。

（注意：*inline*关键字使函数被原地替换，节省了上下文切换开销但引入了空间问题。除非您想为速度留出空间，否则您也可以使用常规函数）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T17:01:24.980

宏在编译器范围之外（之前）被评估，这是反对这些的主要论点（这是大多数时候它们只是不必要的第二个论点）。[您可以在这里](http://www2.research.att.com/~bs/bs_faq2.html#macro)找到 Bjarne Stroustrup 本人的一个很好的解释。

# javascript - CRM 2011 - 过滤子网格搜索功能

> ID：10232651
> 
> 赞同：4
> 
> 时间：2012-04-19T16:35:07.360
> 
> 标签：javascript, dynamics-crm-2011, crm, subgrid

我找到了一种如何使“过滤的子网格”与 JavaScript 一起工作的方法，但是当我在子网格上添加“搜索框”时，它会搜索所有记录，而不是过滤结果的记录。

基本上，我们唯一要做的就是在单击“子网格 A”中的一行时放置一个“FetchXML”，“子网格 B”正在获取新的“FetchXML”。不幸的是，我们不能再在“Subgrid B”中搜索，它会在“ALL”记录中搜索，并且只能在新的“FetchXML”中搜索。有人在 CRM 2011 中完成了这项工作吗？

我唯一要做的就是：

```
//Setting the fetch xml to the sub grid.
relatedSamples.control.setParameter("fetchXml", fetchXml);
relatedSamples.control.setParameter("effectiveFetchXml", fetchXml);
relatedSamples.control.setParameter("fetchXmlForFilters", fetchXml);

//This statement will refresh the sub grid after making all modifications.
relatedSamples.control.refresh(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T18:29:20.300

搜索后看看你的 EffectiveFetchXml。您会注意到它不包括您最初传递给它的 EffectiveFetchXml。

不幸的是，解决这个问题的唯一方法是劫持搜索按钮来触发您自己的事件。在您的事件中传递您想要的有效FetchXml，包括搜索框的值（例如，在搜索“t”时注入类似这样的东西......

```
<filter type="or">
<condition attribute="subject" operator="like" value="t%" />
<condition attribute="regardingobjectidname" operator="like" value="t%" />
</filter> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:22:31.070

Paul thx 为您的回答，它有效:) 我使用“F12”工具搜索“搜索”按钮的 ID 是什么，然后我可以覆盖它：

```
if (document.getElementById("ModulesPlannedChoice_findCriteriaButton") != null) document.getElementById("ModulesPlannedChoice_findCriteriaButton").onclick = function () { refreshModulesPlanned(); }
var searchValue = (document.getElementById("ModulesPlannedChoice_findCriteria") != null ? document.getElementById("ModulesPlannedChoice_findCriteria").value : ""); 
```

不，我的任务是完成所需的实现，快速查找就像正常的一样工作！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T04:51:05.127

**setParameter**函数不再可用。现在您可以使用**SetParameter**代替它。幸运的是刷新功能仍然可用。因此，更改代码中的函数名称，它将起作用。

# asp.net-mvc-3 - mvc3 下拉列表重新加载并设置值

> ID：10232659
> 
> 赞同：2
> 
> 时间：2012-04-19T16:35:38.953
> 
> 标签：asp.net-mvc-3, drop-down-menu

在编辑视图中：我正在传递 ddl 的 ViewBag 列表

控制器：

```
 ViewBag.CountryList = new SelectList(db.Country, "CountryCode", "Desc"); 
```

在编辑视图中：如何将 viewbag 分配给 ddl 并设置来自模型的值

```
@Html.EditorFor(model => model.CountryCode) <- contains the Desc Value, currently just shows in a textbox! 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:51:42.567

使用@Html.DropDownListFor。如果您阅读了 C# 指定您需要的参数，那么它是不言自明的。您在 viewbag 中有 selectList 的事实已经意味着您几乎已经自己完成了所有工作。

```
 @Html.DropDownListFor(model => model.CountryCode, ViewBag.CountryList); 
```

如果由于任何原因没有设置正确的值，您也可以使用

```
 @Html.DropDownList("CountryCode", ViewBag.CountryList, new { @value = @Model.CountryCode }); 
```

# ruby-on-rails-3 - 如何在虚拟属性范围内验证 Rails 模型属性的唯一性

> ID：10232660
> 
> 赞同：1
> 
> 时间：2012-04-19T16:35:42.830
> 
> 标签：ruby-on-rails-3

如何使用自定义或虚拟范围验证属性的唯一性？我想过使用虚拟属性，但它一直试图在数据库中查询 audit_year。我不想仅仅为了这个唯一性约束而创建另一个数据库列。

每个位置每年只能安排一次审核，因此我需要从预定属性中提取年份并验证该范围内的唯一性。

```
class Audit
    attr_accessible :location_name, :scheduled_date, :completion_date ...

    validates :location_name, :presence => true, :uniqueness => { :scope => :audit_year }

    ...

    def audit_year
        scheduled_date.year
    end

end 
```

我的虚拟属性尝试甚至可能不在正确的路径上。在 Rails 中执行此操作的“正确”方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T21:58:27.663

我知道这有点晚了，但我想我会参与进来。我是凭记忆做的，所以你可能需要稍微搞砸。

我的第一个想法是在您的 audit_year 方法中，您可以查询所有年份的数据库。就像是：

```
def audit_year
  !self.class.select('selected_date').map{ |a| a.selected_date.year }.include?(selected_date.year)
  # or using Rails 3.2 and Ruby 1.9.3:
  # !self.class.pluck('created_at').map(&:year).include?(selected_date.year)
end 
```

我对唯一方法的假设是，如果它返回 false，它将无法通过验证。此代码仅从您的类中选择一列（我使用 self.class 而不是 Audit，因此它更可重用），然后将年份映射到一个数组。如果包含 (true)，则返回相反的 (!)。您可能可以使用 uniq 优化查询，但这取决于表的大小是否有必要。

另一种选择是为属性滚动您自己的验证器，这真的不会那么困难。`selected_date.present?`唯一的区别是除了上述内容之外，您还需要添加一条有条件检查的行。如果你不知道怎么做，一个很好的资源是用于回调和错误的 Rails 指南：http: [//guides.rubyonrails.org/active_record_validations_callbacks.html](http://guides.rubyonrails.org/active_record_validations_callbacks.html)

希望有帮助。

# osgi - 在 Equinox 中运行 Arquillian

> ID：10232664
> 
> 赞同：4
> 
> 时间：2012-04-19T16:36:05.073
> 
> 标签：osgi, equinox, apache-felix, jboss-arquillian

我正在尝试在 OSGi 容器中运行集成测试，即嵌入在 Eclipse 中的 Equinox 容器，在远程模式下使用 Arquillian。

我按照JBoss OSGI 网站上[的说明进行操作。](https://docs.jboss.org/author/display/JBOSGI/Arquillian+Test+Framework)所以我首先通过添加这些人工制品（我通过浏览[jboss 存储库](https://repository.jboss.org/nexus/index.html#view-repositories;public-jboss~browsestorage)找到）来配置我的目标平台：

```
<dependency>
    <groupId>org.jboss.arquillian.osgi</groupId>
    <artifactId>arquillian-osgi-bundle</artifactId>
    <version>1.0.0</version>
</dependency>
<dependency>
    <!-- required by arquillian-osgi-bundle -->
    <groupId>org.jboss.logging</groupId>
    <artifactId>jboss-logging</artifactId>
    <version>3.1.0.GA</version>
</dependency>
<dependency>
    <groupId>org.jboss.osgi.jmx</groupId>
    <artifactId>jboss-osgi-jmx</artifactId>
    <version>1.0.10</version>
</dependency> 
```

当我尝试验证捆绑包时，我从 jboss-osgi-jmx 得到不满意的导入：

*   缺少包 org.jboss.osgi.spi.capability
*   缺少包 org.jboss.osgi.testing

显然，丢失的包属于这些工件（再次通过浏览找到）：

```
<!-- osgi.spi : this one ?-->
<dependency>
    <groupId>org.jboss.osgi</groupId>
    <artifactId>jboss-osgi-spi</artifactId>
    <version>1.0.10</version>
</dependency>
<!-- or that one ?-->
<dependency>
    <groupId>org.jboss.osgi.spi</groupId>
    <artifactId>jbosgi-spi</artifactId>
    <version>1.0.26</version>
</dependency>

<!-- osgi.testing -->
<dependency>
    <groupId>org.jboss.osgi.testing</groupId>
    <artifactId>jbosgi-testing</artifactId>
    <version>1.0.4</version>
</dependency> 
```

但是这些工件都不是 OSGI 包，所以我遇到了未解决的约束。

所以，我的问题是：

*   我搞砸了我的平台配置吗？
*   是否有人已经在远程模式下在非 JBoss osgi 容器中成功使用 Arquillian（普通的 felix 可以）？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-02T21:04:10.037

尝试使用[Pax Exam](http://team.ops4j.org/wiki/display/paxexam/Pax+Exam)进行 OSGi 测试。您可以在嵌入式和远程使用（本机测试容器与分叉测试容器）之间进行选择。

Pax Exam 支持所有符合 OSGI 4.2 的框架。它在 Equinox、Felix 和 Knopflerfish 上进行了回归测试。

# javascript - 使用包含括号、分号和空格的正则表达式发出拆分字符串

> ID：10232669
> 
> 赞同：0
> 
> 时间：2012-04-19T16:36:21.627
> 
> 标签：javascript, regex

我在下面有一个字符串：

```
var sphere1 = CSG.sphere({center: [5, 5, 5], radius: 10, resolution: resolution });<br>
var sphere2 = sphere1.translate([12, 5, 0]);<br> 
```

我尝试使用以下`(/,| |[|]|;/`作为我的正则表达式进行拆分）：

```
var words = $(selector).html().split(/,| |[|]|;/); 
```

我有三个问题：

*   我丢失了行尾的分号（在 BR 标记之前）-它们应该在 WORDS 数组中独立拆分

*   包含括号中第一个数字（5 或 12）的字符串也包含左括号

*   包含括号中最后一个数字（5 或 0）的字符串也包含右括号。

基本上，我正在尝试专门“隔离”任何数字，以便我可以单独增加/修改它们。

对 RegEx 有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T02:42:37.047

我在这里修复了它：http: [//jsfiddle.net/jonnycowboy/w4n3W/12](http://jsfiddle.net/jonnycowboy/w4n3W/12)我使用了我在另一个stackoverflow问题/答案中找到的方法：'var nums = $(selector).html().match(/[ 0-9]+/g); var words = $(selector).html().split(/[0-9]+/g); newHtml += '' + 单词[0] + ''; for (var i = 0; i < nums.length; i++) { newHtml += '' + nums[i] + ''; newHtml += '' + 单词[i+1] + ''; }'——</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:57:33.217

这可能会给你一个起点

[http://jsfiddle.net/JqT4k/1/](http://jsfiddle.net/JqT4k/1/)

```
var str = "var sphere1 = CSG.sphere({center: [5, 5, 5], radius: 10, resolution: resolution }); var sphere2 = sphere1.translate([12, 5, 0]);";

//evaluates each replace individually
function match_eval(m){
    // m is going to be [5, 5, 5] and then [12, 5, 0], you can do with this as you see fit
    return "[0,0,0]";    
}

alert(str.replace(/\[( *\d+ *,?)+\]/g, match_eval)); 
```

# facebook - app.facebook.com/app_name/ - 单击“转到应用程序”后重定向到外部 URL

> ID：10232672
> 
> 赞同：2
> 
> 时间：2012-04-19T16:36:27.253
> 
> 标签：facebook, facebook-graph-api, facebook-apps, facebook-canvas, klout

我知道有一种方法可以使用画布应用程序的 iframe 中的 javascript 将页面重定向到外部 url。但是有没有其他方法可以让用户在授权应用程序后立即直接重定向到外部 url。

我知道这是可能的，因为 Facebook 上一个著名的应用程序 klout 做到了。

http://apps.facebook.com/klout__/

重定向到

[http://klout.com/](http://klout.com/)一旦用户自动

记得我收到了我的 Facebook 朋友的邀请请求。当我单击邀请通知并授权应用程序时，它重定向到外部 url。知道这是如何完成的吗？我认为这在 Facebook 政策中也不会受到鼓励？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:48:06.737

Facebook 希望确保与其交互的服务器与应用程序设置中设置的域相同。

在 klout 示例中，您给出的他们所做的是添加一个在应用程序设置中完成的应用*程序域*，但是您可以在那里添加的域是有限的。例如，如果您在设置中的站点 URL 设置为“www.example.com”，那么您可以将“examlpe.com”或“sub.example.com”添加到应用程序域。但是，如果您尝试添加“www.example2.com”，您会得到：

> **错误**
> 
> example2.com 必须从您的站点 URL 或您的移动 Web URL 派生。

* * *

# 编辑

对不起，我没有正确理解你。

如果您只想将用户重定向到主窗口中的 url，那么您可以像这样使用 javascript：

```
top.location.href = "http://www.example.com"; 
```

我之前指的是能够将“www.example.com/”作为站点 url（在设置中）并且仍然使用带有 redirect_uri 等的“sub.example.com”。

* * *

# 第二次编辑

忘了提及这一点：在[Facebook 平台政策](http://developers.facebook.com/policy/)中，它指出：

> 13\. Facebook 上的 Canvas 或 Page Tab 应用程序的主要目的不能是简单地将用户从 Facebook 体验重定向到外部站点

因此，您不应该将用户重定向到 Facebook 之外。

# python - 托管我的 Django 站点

> ID：10232673
> 
> 赞同：15
> 
> 时间：2012-04-19T16:36:28.600
> 
> 标签：python, django, web-services

嗨，我正在寻找一些建议，因为我托管了一些个人网站，因此我目前拥有一个带有 Heart internet 的经销商包。但是我目前正在学习 Django（Python 框架）并希望能够托管我自己的服务器。

我一直在设置虚拟服务器来玩。无论如何，要获得 SSH 访问权限，您必须发送并要求他们为您打开它，同时询问他们是否可以安装 Django/设置 SSH 访问权限，我被告知除非我购买，否则我不能使用 Django即使在服务器上安装了 Python 也是一个虚拟机。

如果我有 SSH 访问权限，我可以将 Django 安装到我的服务器上吗？有没有其他人有类似的问题？或者任何人都可以告诉我该怎么做。我要做的最后一件事就是花更多的钱和他们在一起。

谢谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-19T16:41:59.607

听起来您正在描述一种共享托管情况，您可以通过 SSH 访问但网络服务器已为您预先配置。您实际上无法在该机器上安装和服务 Django，因为您将无法访问 Apache 或其他网络服务器配置。理论上，您可以从典型的 HTTP 端口以外的端口为 Django 提供服务，但这将是非常不规则的，您的托管公司不会欣赏它。

您可以在 Heroku 上部署 Django：[https](https://devcenter.heroku.com/articles/django) ://devcenter.heroku.com/articles/django 。它可以免费部署用于极低容量的应用程序或开发；成本与容量成线性关系。

您还可以将 Google App Engine 与稍旧版本的 Django 一起使用。这些选项中的任何一个都得到了各自供应商的官方支持，因此它们比尝试解决您的托管服务提供商设置的限制要好得多。

最后，您可以为虚拟机付费，在该虚拟机中您可以完全访问网络服务器配置，并且可以提供任何您喜欢的服务。虚拟机可从任意数量的公司以各种价位获得。您也可以开发一个 Django 应用程序，而不用在任何地方托管它，只在您的本地计算机上托管，并且在您的应用程序正常运行后担心托管。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-09-14T13:50:09.387

AWS：

*   提供免费层级
*   强大的支持（但要获得技术帮助，您必须付费）
*   可以使用平台（PAAS）BeanStalk
*   如果您获得专用实例，可以自定义架构
*   伟大的支持社区
*   自定义域
*   很棒的文档
*   可以 SSH
*   最受欢迎

Heroku：（姜戈）

*   一定程度上免费
*   免费计划中只能使用 POSTgresql
*   git 必须
*   很好的支持
*   容易上手
*   自定义域
*   可以在生产中使用 bash（不是 SSH）.. 不能在生产中进行直接更改。这就是使您的应用程序稳定的原因。任何更改/更新都通过 git。
*   代码维护 - 好（仅通过 git heroku 命令部署）
*   使用 AWS S3 存储静态文件
*   临时文件被定期删除
*   一旦你扩展他们开始计费，这真的很昂贵。
*   因为这是一个 PAAS，所以你已经得到了你所拥有的。（在某种程度上）定制APP的架构需要付出很多努力。

Google App Engine：（Flask/Django 项目。）

*   一定程度上免费
*   很容易上手（你好世界应用程序）
*   自定义域
*   代码维护 - 好（自动部署）
*   支持不可用

Pythonanywhere：

*   一定程度上免费
*   免费计划中没有自定义域
*   便于使用
*   很好的支持

网络派系：（Django）

*   不是免费的..（我认为（最低计划）在共享主机上每月花费 10 美元。）
*   SSH 可用
*   自定义域
*   架构定制。
*   很好的支持

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-08-30T21:19:07.413

[我对pythonanywhere.com](http://pythonanywhere.com)有很好的体验。对于非常小的项目，它也是免费的。

对我来说，它似乎非常适合尝试 django。以下是我如何从 Google App Engine 切换到 pythonanywhere.com 的简短故事：[Django unchained - python in the cloud](http://freeconnection.blogspot.hu/2013/08/python-django-unchained.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-19T23:00:23.870

我做了一段时间的虚拟服务器——然后进入了 Heroku。部署我的 django 应用程序的一种极其简单（在某些情况下完全免费）的方式。

我从您所在的位置开始，在共享托管环境中尝试使 django 工作。然后我自学了很多服务器管理和服务器设置的东西——从而转向专用的虚拟服务器设置。

唉，让 Django 在 apache 和 Centos 机器上工作可能会很痛苦——但 Heroku 让这一切变得更好。轻松的应用程序部署和可扩展性。Heroku 是一种云应用程序部署服务——它具有虚拟服务器的所有优点，无需设置。它实际上并没有安装在您的服务器上

看看这两篇文章

[https://devcenter.heroku.com/articles/django](https://devcenter.heroku.com/articles/django)

[http://rdegges.com/devops-django-part-4-choosing-heroku](http://rdegges.com/devops-django-part-4-choosing-heroku) （这篇文章还有更多内容，但很长）

我用了一半的时间就在互联网上建立了一个新的 django 应用程序。涉及很多成本估算，这就是为什么我要深入研究第二篇文章及其各个部分的原因。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-22T08:17:58.590

您可以在 Amazon EC2 上托管 Django。如果您利用他们的[免费](http://aws.amazon.com/free/)套餐，您可以在微型实例（618Mb RAM，30Gb 文件系统）中免费使用一年。您可以完全控制机器，包括 SSH 访问。有许多免费提供的图像已经捆绑了 Django，包括[BitNami Django Amazon Machine Image](http://bitnami.org/stack/djangostack#cloudImage)，它也是免费提供的（免责声明：我是 BitNami 开发人员之一）

# java - 在 Hudson 从站上运行 Webdriver 测试之前出现错误

> ID：10232674
> 
> 赞同：0
> 
> 时间：2012-04-19T16:36:28.833
> 
> 标签：java, junit, hudson, webdriver

我们正在尝试将我们的系统从 Selenium 1 迁移到 WebDriver。通过 Hudson 从站，出现了一条错误消息，但测试在 eclipse 中运行良好。

**环境：**

*   哈德逊大师：Linux机器
*   哈德逊奴隶：Windows 7、x86

Java版本：1.7.0_03

**系统：** 为该任务设置了一个新的 Hudson 作业，其配置与 Selenium 1 测试套件的配置相同。该作业执行 build.xml 文件中的目标。clean、makedir 和编译目标已成功运行。在执行测试时，Hudson 控制台上出现以下错误消息：

```
run_shopping_travel_tests:
    [junit] Running com.example.tests.ExampleTests
    [junit] Tests run: 1, Failures: 0, Errors: 2, Time elapsed: 2.385 sec
    [junit] Test com.example.tests.ExampleTests FAILED
    [junit] Running com.example.tests.Example2Test
    [junit] Tests run: 1, Failures: 0, Errors: 2, Time elapsed: 0.752 sec
    [junit] Test com.example.tests.Example2Test FAILED
     [echo] selenium directory: C:\Selenium 
```

错误：

错误信息

```
LINUX
Stacktrace

java.lang.NoSuchFieldError: LINUX
    at org.openqa.selenium.firefox.FirefoxBinary.isOnLinux(FirefoxBinary.java:62)
    at org.openqa.selenium.firefox.FirefoxBinary.startProfile(FirefoxBinary.java:72)
    at org.openqa.selenium.firefox.FirefoxBinary.clean(FirefoxBinary.java:273)
    at org.openqa.selenium.firefox.internal.NewProfileExtensionConnection.start(NewProfileExtensionConnection.java:78)
    at org.openqa.selenium.firefox.FirefoxDriver.startClient(FirefoxDriver.java:142)
    at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:85)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:121)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:77)
    at com.example.tests.ExampleTests.setup(ExampleTests.java:43) 
```

测试的java代码：

```
public class ExampleTests
{
    FirefoxDriver driver = null;

    @Before
    public void setup() {
         File profileDir = new File( "C:\\Selenium\\FirefoxProfile" );
         FirefoxProfile profile = new FirefoxProfile(profileDir);

         driver = new FirefoxDriver(profile); // line 43, where error appears
    }
    @Test
    public void T100_VerifyExampleTest() {
   // some test code here
    }
} 
```

我们试图在没有“配置文件”的情况下运行测试，并且出现了相同的错误消息。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:10:02.497

问题解决了。有一些 jar 库用于 -javac （在 ant 脚本中）编译，但不是 Eclipse。

解决方法：逐个检查jar文件，把不需要的从lib文件夹中删除。

# google-maps - 如何使用google map api计算从一个点到另一个点所需的时间？

> ID：10232678
> 
> 赞同：0
> 
> 时间：2012-04-19T16:36:42.123
> 
> 标签：google-maps

我正在尝试制作一个函数来计算从一个点到达另一个点所需的时间。

我有以下参数：

```
 $latA = 40.640;
   $longA = 22.944;
   $latB = 40.641;
   $longB = 22.959;

  function durationFromCoordinatesStreetWay($latA, $longA, $latB, $longB) {

  $sendRequest = "http://maps.googleapis.com/maps/api/directions/output?parameters"; 

  } 
```

任何人都可以帮助我做到这一点？

我必须使用方向方法。稍后我会将结果输出为 xml。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:35:10.353

这是一个工作页面：

[http://jsfiddle.net/GKSqB/](http://jsfiddle.net/GKSqB/)

**添加：带有 latLngs 的版本**（需要真实的工作场所）

[http://jsfiddle.net/aL7yL/](http://jsfiddle.net/aL7yL/)

它接近文档：

[https://developers.google.com/maps/documentation/javascript/directions](https://developers.google.com/maps/documentation/javascript/directions)

# jquery - 点击链接后如何向下滑动？

> ID：10232682
> 
> 赞同：0
> 
> 时间：2012-04-19T16:37:01.783
> 
> 标签：jquery, html, css

这是我正在处理的网页。

[http://www.solved.com](http://www.solved.com) 我想要的是当我单击“状态”时，例如：CA 我希望页面向下滑动并显示结果。现在它显示了结果，但它不会向下滑动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:38:02.310

使用`a name`（或`id`）和井号标签（有关名称，请参见[http://www.w3schools.com/tags/att_a_name.asp](http://www.w3schools.com/tags/att_a_name.asp)）

例如，加利福尼亚的链接是

```
<a href="#california">(image)</a> 
```

并且该部分有

```
<a name="california">California</a> 
```

（或最好）

```
<a id="california">California</a> 
```

*（编辑：这是使用内置浏览器功能的简单方法。如果您想使用 jquery 进行流畅的幻灯片，看起来[这可能是一个很好的脚本](http://www.position-absolute.com/articles/better-html-anchor-a-jquery-script-to-slide-the-scrollbar/)来调查）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:40:52.570

更改状态链接

```
<a href="#" id="AK">AK</a>
<a href="#" id="AL">AL</a> 
```

到

```
<a href="#can_map" id="AK">AK</a>
<a href="#can_map" id="AL">AL</a> 
```

如果您不喜欢立即滚动，请查看[https://github.com/kswedberg/jquery-smooth-scroll](https://github.com/kswedberg/jquery-smooth-scroll)或其他平滑滚动插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T17:01:19.633

您还可以像这样添加平滑滚动的良好效果：向您的链接添加一个类：

```
<a href="#can_map" class="anchor_class">Click me</a> 
```

然后使用 jquery，您可以在单击事件处理程序上添加以下内容：

```
$('.anchor_class').click(function(){ 
    href = $(this).attr("href");
    $('html,body').animate({scrollTop: $(href).offset().top};
    return false;
}); 
```

# php - 将哈希键/值对添加到 PHP 中的数组的正确语法是什么？

> ID：10232683
> 
> 赞同：-4
> 
> 时间：2012-04-19T16:37:04.260
> 
> 标签：php, hashmap

我想将一个哈希键/值对添加到一个空数组中。

这是我尝试执行的操作，但是出现错误：

```
Parse error: syntax error, unexpected T_DOUBLE_ARROW 
```

这是我的代码：

```
$key = (string)$degree->f[0];
$value = (string)$degree->f[1];        
$SDP_ID2CohortMap[] = ( $key => $value ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:24:35.193

您要做的是创建两个数组的联合，这可以使用[PHP 数组联合运算符^(*Docs*)](http://php.net/manual/language.operators.array.php)来完成：

```
$key   = (string)$degree->f[0];
$value = (string)$degree->f[1];        

$SDP_ID2CohortMap += array($key => $value);
                  ^^^^^^^^ 
```

可能这些信息对您有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:39:17.847

```
$SDP_ID2CohortMap = array( $key => $value );
$SDP_ID2CohortMap[$key] = $value; 
```

但不能同时两者。

# mysql - 仅选择表中重复的行

> ID：10232685
> 
> 赞同：2
> 
> 时间：2012-04-19T16:37:05.607
> 
> 标签：mysql, sql, select

我需要找到在我的数据库中获得奖金的用户。唯一让我感兴趣的用户是那些获得超过一次奖金的用户。

我应该如何处理此查询以仅获得多次获得奖金的用户？

```
select Bonus, BonusUser, BonusType, Amount 
from Bonus 
where BonusType="1" 
order by BonusUser asc; 
```

我需要一个提示所有“重复”行的查询，这样我就可以从中删除奖金。

我之前没有解释过，但是一些用户利用了一个错误并且可以获得免费奖金，所以我必须选择那些重复的行，分析并删除它是否是滥用案例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:41:19.613

你可以像下面那样做

```
 select BonusUser,
          count(*)
   from Bonus 
  where BonusType="1" 
  group by BonusUser
   having count(*)>1
  order by BonusUser asc 
```

您必须提供一些具有预期结果的虚拟数据..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T16:44:56.617

作为其他答案的替代方法，您还可以执行以下操作：

```
SELECT DISTINCT b1.*
FROM Bonus b1
JOIN Bonus b2
  ON b1.BonusUser = b2.BonusUser
  AND b1.Id > b2.Id
WHERE b1.BonusType = "1"
  AND b2.BonusType = "1"
ORDER BY b1.BonusUser ASC; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T16:40:27.850

添加一个`GROUP BY`和一个`HAVING`子句

```
SELECT Bonus
    , BonusUser
    , BonusType
    , Ammount 
FROM Bonus 
WHERE BonusType="1" 
GROUP BY BonusUser
HAVING Count(*) > 1
ORDER BY BonusUser asc; 
```

根据您的评论，我认为这就是您想要的，这将为您提供所有有奖金的用户列表，但它会给您提供超过一项奖金的用户数量：

```
SELECT Bonus
    , t.BonusUser
    , BonusType
    , amount 
    , t2.cntbonus
FROM Bonus t
inner join 
(
    select count(*) as CntBonus, bonususer
    from Bonus
    where BonusType='1'
    group by bonususer
) t2
    on t.bonususer = t2.bonususer
WHERE BonusType='1'
ORDER BY BonusUser asc 
```

# javascript - 在 JS 中使用（wordpress 的）TEMLATEPATH

> ID：10232686
> 
> 赞同：0
> 
> 时间：2012-04-19T16:37:05.630
> 
> 标签：javascript, wordpress, http

我使用 wordpress，我想问，有没有办法在我的 JS 中使用 TEMPLATEPATH。像这样：

```
jQuery ("#​​ajax").load ("<?php echo TEMPLATEPATH;?>" + "/aaa.txt"); 
```

问题是 TEMPLATEPATH 的结果是 C:\XAMPP\HTDOCS ...因此我有浏览器错误：跨源请求仅支持 HTTP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:09:10.387

提供的信息不多。你在使用 Wordpress`localhost`吗？有`file://`协议吗？

无论如何，尝试替换`TEMPLATEPATH`为`get_template_directory_uri()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T06:24:25.007

您可以使用 PHP 打印带有模板路径的 JavaScript 变量。

或者另一种选择是使用 PHP 本身打印此 JavaScript 代码。

# mysql - 查询更新问题

> ID：10232697
> 
> 赞同：3
> 
> 时间：2012-04-19T16:37:48.693
> 
> 标签：mysql, sql

我只是在此查询中感到困惑，如果您对此有任何想法，我不知道如何解决，请帮助我或绝对感谢您的帮助

我有这样的表结构，测试列包含 3 个值

![在此处输入图像描述](../Images/11367c55c2d22bb0001b1b3fc98d1f32.png)

```
UPDATE `test` SET test = test -3 
```

当我执行此查询时，结果将显示如下

![在此处输入图像描述](../Images/77dbbd66e89f246ad6fcfa8cf6dbdbf4.png)

```
UPDATE `test` SET test = test -4 
```

但是当我执行这个查询时，结果不会像这样正确保存在测试列中

![在此处输入图像描述](../Images/19146b1b819cf9b76744c4ac4c559147.png)

**需要 0 个结果，或者我也不需要任何减值**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:53:40.857

显然您正在使用`BIGINT UNSIGNED`数据类型。如果要存储负数，则需要将其更改为常规签名`BIGINT`（也请务必将其设置为`NULL`或`NOT NULL`根据需要）：

```
ALTER TABLE test
  MODIFY COLUMN test BIGINT; 
```

**更新**：如果你真的想在你的例子中存储 0 而不是 -4 ，你可以使用这样的`GREATEST()`函数来做到这一点：

```
UPDATE `test` SET test = GREATEST(CAST(test AS SIGNED) - 4,0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T16:49:06.207

问题很可能是由于您的 bigint 未签名。

[根据文档](http://dev.mysql.com/doc/refman/5.5/en/numeric-type-overview.html)，未签名的 bigint 是

> 一个大整数。有符号范围是 -9223372036854775808 到 9223372036854775807。无符号范围是 0 到 18446744073709551615。

注意无符号范围以及它是你的数字 - 3（我相信 4 来自从 0 到 xxx15）

因此，您只需要将列更新为非无符号（已签名）的 bigint，这应该可以工作。

```
ALTER TABLE test MODIFY COLUMN test BIGINT SIGNED; 
```

**更新**

如果你想保持 BIGINT UNSIGNED 以便你不能有负数，那么你可以编写一个触发器来强制一个 0，或者你可以让你的查询像这样：

```
UPDATE test
SET test = CASE WHEN test >= value THEN test-value ELSE 0 END 
```

基本上，如果尝试减去的值大于当前值，则只需将该值设置为 0，否则执行减法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T16:46:31.160

根据这个问题： [MySQL：bigint Vs int](https://stackoverflow.com/q/4769416/341547)

bigint 的最大值是 18,446,744,073,709,551,615

当您从 0 中减去时，您将返回到最大值，因为您的 bigint 是无符号的。

# django - Django 两列表单

> ID：10232702
> 
> 赞同：3
> 
> 时间：2012-04-19T16:37:59.780
> 
> 标签：django, forms, templates

为具有 9 个字段的模型实现 django ModelForm 的最pythonic方法是什么，这些字段将在模板中分为两列？像这样的东西：

```
<form>
    <div class="column-1">
        5 fields for column 1
    </div>
    <div class="column-2">
        4 fields for column 2
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T16:44:54.947

我认为最简单和最干净的方法是坚持文档中概述的方法......

```
<form>
    <div class="column-1">
       {{ form.field1 }}
       ...
       {{ form.field5 }}       
    </div>
    <div class="column-2"> 
       {{ form.field6 }}
       ...
       {{ form.field9 }}
       </div>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T16:57:40.337

您可以使用 carljm 的[django-form-utils](https://github.com/carljm/django-form-utils)来定义字段集。您可以根据需要为每个字段集指定一个类。不过，您仍然必须在表单定义中列出所有字段。

# asp.net-mvc - 当用户在注册后使用默认的 MVC Membership Provider 修改他们的电子邮件地址时，如何防止重复的电子邮件地址？

> ID：10232706
> 
> 赞同：2
> 
> 时间：2012-04-19T16:38:06.287
> 
> 标签：asp.net-mvc, asp.net-membership, membership-provider

我正在使用默认的 ASP.NET MVC 成员资格提供程序，并且我希望允许用户在创建帐户后修改他们的电子邮件。我不希望用户能够使用重复的电子邮件。

如何允许用户修改他们的电子邮件并检查该电子邮件是否未在数据库的其他地方使用？在使用默认成员资格提供程序时，我不确定进行此类检查的最佳方式。

注意 - 我知道会员资格提供者本身会在用户尝试注册他们的电子邮件地址时执行此检查，但我不知道以后如何执行此检查（由于新手）。

注2 - 我只知道这种访问用户电子邮件的方法，这是访问它的正确方法吗？

```
MembershipUser useremail = Membership.GetUser(User.Identity.Name);
ViewBag.Email = useremail.Email; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-19T16:50:43.443

您可以通过该电子邮件搜索现有用户名：

```
String userName = MembershipProvider.GetUserNameByEmail(email) 
```

如果未找到匹配项，则为`userName`空。有关这方面的更多信息，请参见[此处](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.getusernamebyemail.aspx)。

此外，如果您的 MembershipProvider 有，`RequiresUniqueEmail = true`那么应该已经为您执行了此检查 - 根据[此](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.requiresuniqueemail.aspx)页面。

# asp.net - Telerik RadGrid 使用数据数组

> ID：10232707
> 
> 赞同：1
> 
> 时间：2012-04-19T16:38:07.130
> 
> 标签：asp.net, html, telerik

我想使用 RadGrid 根据我拥有的数组动态打印表格。问题是我是 Telerik 和 ASP.NET 的新手。

我会在 PHP 中做的是：

```
<?php 
$data = stuff;
?>
<table>
   <?php foreach($data as $dataOne): ?>
      <tr><td><?php echo $dataOne; ?></td></tr>
    <?php endforeach; ?>
</table> 
```

现在我想在 ASP.NET 中使用 RadGrid 做同样的事情。

谢谢。

编辑：

数据以带有“对象”的 XML 形式返回，每个都有几个字段，包括名称和数字。我希望表格显示所有内容。我可以将 XML 解析为多个数组（每个数组包含一列）、对象或其他任何内容。我需要知道如何将其放入 RadGrid。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:40:48.187

ASP.NET 中的等效代码：

```
var data = getDataFromDB(); 

telerikGrid.DataSource=data;
telerikGrid.DataBind(); 
```

你将在 aspx 页面上定义你的 gridview：

```
<telerik:radgridview id="telerikGrid" runat="server" /> 
```

**更新：**

我将给您一个使用自定义业务对象的示例，因为您说您可以解析 XML 并创建对象。

具有如下的类结构：

```
public class Employee
{
    public string EmployeeName {get;set;}
    //... And more properties
    Public Child[] Children {get;set;}
}

public class Child
{
   public string Name {get;set;}
   //and more properties
} 
```

并假设您解析 XML 以构造一个`Employee[]`您希望以类似于以下方式在网格上显示的内容：

```
-------------------------------
| Employee Name  |   Children |
+-----------------------------+
|  John          |   Peter    |
|                |   Charles  |
+----------------+------------+
| Michael        |   Anna     |
+-----------------------------+ 
```

您的标记应如下所示：

```
<telerik:radgridview id="telerikGrid" runat="server" OnItemDataBound="telerikGrid_ItemDataBound">
 <MasterTableView AutoGenerateColumns="false">
      <Columns>
       <telerik:GridBoundColumn DataField="EmployeeName" HeaderText="EmployeeName">
       </telerik:GridBoundColumn>
       <telerik:GridTemplateColumn>
            <ItemTemplate>
                <telerik:radgridview runat="server" id="gridEmpChildren">
                   <MasterTableView AutoGenerateColumns="false">
                      <Columns>
                          <telerik:GridBoundColumn DataField="Name"                                       HeaderText="Children">
       </telerik:GridBoundColumn>
                      </Columns>
                   </MasterTableView>
                </telerik:radgridview>
            </ItemTemplate>
       <telerik:GridTemplateColumn>
 </MasterTableView>
</telerik:radgridview> 
```

您向 ItemDataBound 事件添加一个处理程序并按此方式实现它（注意上面的标记，它定义了此处理程序）：

```
protected void telerikGrid_ItemDataBound(object sender, GridItemEventArgs e) 
{ 
    if (e.Item is GridDataItem) 
    { 
        GridDataItem item = (GridDataItem)e.Item; 
        RadGridView childrenGrid = (RadGridView)item.FindControl("gridEmpChildren"); 
        childrenGrid.DataSource= item["Children"];//See class Employee
        childrenGrid.DataBind();
    } 
 } 
```

现在，一个完整的示例实现将呈现我上面示例中显示的网格，如下所示：

```
 //Sample data
 Employee[] employees = new Employee[] {
    new Employee{
            EmployeeName="John",
            Children= new Child[]{
                    new Child{Name="Peter"},
                    new Child{Name="Charles"}
                    }
        }
        ,new Employee{
            EmployeeName="Michael",
            Children=new Child[]{
                    new Child{Name="Anna"}
                    } 
        }
};

telerikGrid.DataSource=employees;
telerik.DataBind(); 
```

注意：没有任何代码经过测试，如果它不能立即工作，请让我放松一下。它肯定接近这个。

# javascript - 如何在javascript中按索引对数组进行排序

> ID：10232710
> 
> 赞同：2
> 
> 时间：2012-04-19T16:38:22.540
> 
> 标签：javascript

我试图通过它的第二个索引来订购一个数组数组，所以如果我有类似的东西：

```
a[0][0] = #
a[0][1] = $
a[1][0] = x
a[1][1] = y
a[1][2] = z
a[2][0] = qaz
a[2][1] = qwerty 
```

我得到：

```
a[0][0] = #
a[1][0] = x
a[2][0] = qaz
a[0][1] = $
a[1][1] = y
a[2][1] = qwerty
a[1][2] = z 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:54:55.450

这将以所需的顺序显示元素。

```
var a = [["#", "$"], ["x", "y", "z"], ["qaz", "qwerty"]]
var maxLen = 0;
for (var i = 0; i < a.length; i++)
{
    maxLen = Math.max(maxLen, a[i].length);
}
for (var y = 0; y < maxLen; y++)
{
    for (var x = 0; x < a.length; x++)
    {
        if (y < a[x].length)
        {
            alert(a[x][y]); // You could use document.write() etc.
        }
    }
} 
```

你没有说你打算对数组元素做什么，但是这个一般的想法将适用于按顺序显示或打印它们。

# java - 是否有一个可嵌入的事务性 Java 键值存储，允许您在不先删除对象的情况下覆盖它

> ID：10232711
> 
> 赞同：1
> 
> 时间：2012-04-19T16:38:23.400
> 
> 标签：java, nosql, key-value

我希望能够做这样的事情：

```
 db.createDbIfNotExists("/some/file");

 db.doInTransaction(new DbTransaction() {
     public void do() {

         for(KeyValue kv : listOfKvs) {
            ...some code that might fail...
            db.save(kv.getKey(), kv.getObject());
         }
     }  
 } 
```

如果已经存在任何键，我希望新对象覆盖该键处的旧对象。我不想加载并删除它或加载并更新它。

如果在事务期间我的代码抛出异常，我希望写入回滚。

它需要能够在大约 2/3 分钟内写入 500,000 个小于 1k 的对象。

提前致谢。

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T03:09:13.373

试试 Scalien，它有 Java 驱动程序、一致地复制并支持 ACID 事务。 [http://scalien.com/products/](http://scalien.com/products/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:56:01.663

汤姆：

Redis 是你最好的选择。我已经广泛使用它，它是一个具有最终一致性的数据结构服务器（不要与数据库服务器混淆）。它在内存中带有后备文件存储，并且速度非常快。更多细节请访问 redis.io。命令集位于[http://redis.io/commands](http://redis.io/commands) 也有事务支持 [http://redis.io/topics/transactions](http://redis.io/topics/transactions)

支持多种语言。Java 客户端可在[https://github.com/xetorthio/jedis获得](https://github.com/xetorthio/jedis)

# database - 访问数据库中平均静态数据的最佳方式（Hibernate、Postgres）

> ID：10232713
> 
> 赞同：1
> 
> 时间：2012-04-19T16:38:35.880
> 
> 标签：database, postgresql, hibernate, average

目前我有一个项目（用 Java 编写），它从微控制器读取传感器输出，并使用 Hibernate 每秒将其写入多个 Postgres 表。我每秒总共写入大约 130 列数据。一旦数据被写入，它将永远保持静态。这个系统在当前条件下似乎运行良好。

我的问题是关于将来查询和平均这些数据的最佳方式。我认为有几种方法是可行的，但我正在寻找关于哪种方法可以扩展和表现最好的输入。

由于我们每秒收集和写入数据，我们最终每月生成超过 250 万行。我们目前通过写入 JChart2D 的 JDBC 选择语句绘制这些数据（即从数据 WHERE time_stamp BETWEEN startTime AND endTime 中选择压力、温度、速度）。用户必须注意不要指定太长的时间段（startTimem 和 endTime delta < 1 天），否则他们将不得不等待几分钟（或更长时间）才能运行查询。

未来的目标是拥有一个类似于为 Google Finance 提供支持的 Google 可视化 API 的用户界面。关于时间缩放，即数据变得“更平滑”（或更平均）的时间段越长。

我考虑过的选项如下：

**选项 A：**使用 SQL avg 函数将平均数据点返回给用户。如果用户要求查看半年的数据，我认为这个选项会变得昂贵。我想这个场景中的界面会根据用户请求将行数缩放到平均水平。IE 如果用户要求一个月的数据，界面将要求每 86400 行的平均值，这将返回约 30 个数据点，而如果用户要求一天的数据，界面将要求每 2880 行的平均值，这也将返回 30 个数据点，但粒度更大。

**选项 B：**使用 SQL 返回某个时间间隔内的所有行，并使用 Java 接口对数据进行平均。我已经对此进行了简短的测试，并且我知道它很昂贵，因为我要返回 86400 行/天请求的间隔时间。我不认为这是一个可行的选择，除非在执行 SQL 选择时我没有考虑到某些事情。

**选项 C：**由于所有这些数据在写入后都是静态的，因此我考虑使用 Java 程序（使用 Hibernate）来编写平均值表以及当前正在写入的数据。在这个选项中，我有几个 Java 类“累积”数据，然后将其平均并以指定的时间间隔（5 秒、30 秒、1 分钟、1 小时、6 小时等）将其写入表中。未来的用户界面绘图程序将采用用户指定的时间间隔并确定要查询哪个平均值表。这个选项似乎会产生大量冗余并占用更多存储空间，但（在我看来）会产生最佳性能？

**选项 D：**来自更有经验的社区的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T22:01:33.220

一旦您有大量数据要传递，选项 A 就不会很好地扩展；与 A 相比，选项 B 的启动速度可能相对较慢，而且扩展性更差。选项 C 是一种通常称为“物化视图”的技术，您可能希望以一种或另一种方式实现这种技术，以获得最佳性能和可伸缩性。虽然 PostgreSQL 还不支持*声明性*物化视图（但我个人今年正在努力），但有一些方法可以通过触发器和/或计划作业来实现。

为了保持快速插入，您可能*不想*尝试维护主表上触发器的任何视图。您可能想要做的是定期将详细信息汇总到来自 crontab 作业（或类似作业）的汇总表中。您可能还希望通过使用已创建的汇总表以及不存在汇总表的明细表来创建视图以显示汇总数据。

如果您按日期范围对原始数据进行*分区*，则物化视图方法可能会更适合您。无论如何，这可能是一个非常好的主意。

[http://www.postgresql.org/docs/current/static/ddl-partitioning.html](http://www.postgresql.org/docs/current/static/ddl-partitioning.html)

# c# - 是否可以将索引号替换为 C# 中 String.Format 中的字符串？

> ID：10232714
> 
> 赞同：3
> 
> 时间：2012-04-19T16:38:39.170
> 
> 标签：c#, string

我可以这样使用`string.Format`吗？

**1 ) 将数字替换为字符串**

```
string sample = "Hello, {name}";

//I want to put a name string into {name}, is it possible? 
```

* ***2 ) 是否可以将字符串一一添加到字符串模板**

```
string sample = "My name is {0}, I am living in {1} ...";

// put {0} value
// and put {1} value separately

ex)
sample[0] = "MIKE";
sample[1] = "Los Anageles"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:41:32.897

1.  不

2.  是的; 只需构建一个数组，然后将该数组传递给`String.Format`（[这](http://msdn.microsoft.com/en-us/library/b1csw23d.aspx)是您将使用的特定重载）：

    ```
    object[] values = new object[2];
    values[0] = ...;
    values[1] = ...;
    String.Format(someString, values); 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T16:43:44.417

以下是您完成 #2 的方法：

```
 [Test]
    public void Passing_StringArray_Into_StringFormat()
    {
        var replacements = new string[]
            {
                "MIKE",
                "Los Angeles"
            };
        string sample = string.Format("My name is {0}, I am living in {1} ...", replacements);

        Assert.AreEqual("My name is MIKE, I am living in Los Angeles ...", sample);
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T16:46:14.617

您可以使用 James Newton-King 的 FormatWith：http: [//james.newtonking.com/archive/2008/03/29/formatwith-2-0-string-formatting-with-named-variables.aspx](http://james.newtonking.com/archive/2008/03/29/formatwith-2-0-string-formatting-with-named-variables.aspx)

Phil Haack 有一篇关于它的好帖子：http: [//haacked.com/archive/2009/01/04/fun-with-named-formats-string-parsing-and-edge-cases.aspx](http://haacked.com/archive/2009/01/04/fun-with-named-formats-string-parsing-and-edge-cases.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T16:46:05.897

**1：**

```
string sample1 = "Hello, {name}";
Console.WriteLine(sample1.Replace("{name}", "John Smith")); 
```

**2：**

```
string sample2 = "My name is {0}, I am living in {1} ..."; 
var parms = new ArrayList();
parms.Add("John");
parms.Add("LA");
Console.WriteLine(string.Format(sample2, parms.ToArray())); 
```

# javascript - 如何设置一个非常快的 node.js UDP 服务器

> ID：10232717
> 
> 赞同：12
> 
> 时间：2012-04-19T16:38:48.007
> 
> 标签：javascript, node.js, udp

我对 Node.js 很陌生，我有一个应用程序请求，该应用程序将接收 UDP 数据包的有效负载并对其进行处理。

我说的是每秒超过 400 条消息，这将达到大约 200.000 条消息/分钟。

我已经编写了一个代码来设置一个 UDP 服务器（实际上是从这里的文档[http://nodejs.org/api/all.html#all_udp_datagram_sockets](http://nodejs.org/api/all.html#all_udp_datagram_sockets)中获取的），但是它丢失了大约 5% 的数据包。

我真正需要开发的是一个服务器，它可以获取数据包并将其发送给另一个*工作人员*来处理消息。但看起来 node.js 中的线程是一场噩梦。

这是我的核心：

```
var dgram = require("dgram");
var fs = require("fs");
var stream = fs.createWriteStream("received.json",{ flags: 'w',
  encoding: "utf8",
  mode: 0666 });

var server = dgram.createSocket("udp4");
server.on("message", function (msg, rinfo) {
  console.log("server got: " + msg + " from " +
    rinfo.address + ":" + rinfo.port);
    stream.write(msg);
});

server.on("listening", function () {
  var address = server.address();
  console.log("server listening " +
      address.address + ":" + address.port);
});

server.bind(41234);
// server listening 0.0.0.0:41234 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T20:44:23.237

您缺少概念，就您的意思而言，NodeJS 并不意味着是多线程的，请求应该在一个循环中处理。不存在其他线程，因此不会发生上下文切换。在多核环境中，您可以通过节点的集群模块创建集群，我在[这里](http://mustafaakin.wordpress.com/2012/03/19/nodejs-simple-clustering-benchmark/)有一篇关于此的博客文章。

您将父进程设置为分叉子进程，并且只有子进程应该绑定到端口。您的父进程将处理子进程之间的负载平衡。

**注意**：在我的博客文章中，我做了 `i < os.cpus().length / 2;`，但应该是 `i < os.cpus().length;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:34:02.767

我写了一个类似结构的soap/xml转发服务，发现信息会分2个包来。我需要更新我的代码以检测消息的两半并将它们重新组合在一起。这个有效负载大小的问题可能更像是一个 HTTP 问题而不是 udp 问题，但我的建议是添加日志记录以写出您收到的所有内容，然后用细齿梳理一下。看起来你会记录你现在得到的东西，但你可能不得不挖掘你正在失去的 5%。

你怎么知道它的5%？如果您再次发送该流量，它会一直是 5% 吗？相同的消息总是丢失。

我使用 ruby​​ 和 Event Machine 为 voip/sip 呼叫数据构建了一个 UDP 服务器，到目前为止一切运行良好。（不过我对你的测试方法很好奇，我在 netcat 或一个小型 ruby​​ 客户端上做所有事情，我从来没有做过 10k 条消息）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-26T18:57:48.393

这里有一个微妙的提示。为什么您使用 UDP 传输流？您需要对流使用 TCP。UDP 协议发送数据报、离散消息。它不会在幕后将它们分开。**您发送的内容就是您使用 UDP 接收的内容。** *（IP 碎片是一个不同的问题，我在这里不讨论）*。您不必担心在另一侧重新组装流。这是使用 UDP 而不是 TCP 的主要优势之一。此外，如果您使用 localhost 到 localhost，您不必担心由于网络故障而丢失数据包。如果您溢出网络堆栈缓冲区，您可能会丢失数据包，所以如果您正在进行高速数据传输，请给自己一个大的数据包。因此，忘记流，只需使用 UDP 发送：

var udp_server = dgram.createSocket({ type: 'udp4', reuseAddr: true, recvBufferSize: 20000000 // <<== 强大的大缓冲区 });

udp_server.send("Badabing, badaboom", remote_port, remote_address);

Go 是由谷歌开发的，用于处理现代科技商店中出现的语言激增。（这很疯狂，我同意）。我不能使用它，因为它的文化和设计禁止使用异常，这是现代语言消除旧式错误处理所增加的大量混乱的最重要功能。除此之外，这很好，但这对我来说是一个表演障碍。

# apache - htaccess rewrite based on hostname or domain name

> ID：10232722
> 
> 赞同：17
> 
> 时间：2012-04-19T16:39:32.010
> 
> 标签：apache, .htaccess, mod-rewrite

I have two different domains (let's say www.site1.com and www.site2.com) that point to the same hosting server.

I need the two different domain names because I want to use the first one for the italian contents and the second one for the english contents. The contents are the same, unless for the language, but the domains *have* to be different.

So, I'd like to write a rule that lets me translate from:

*   `www.site1.com` to `/?lang=it`

*   `www.site2.com` to `/?lang=en`

I usually use the same domain name for many different languages rewriting from `www.site.com/it/` to `/?lang=it` (of course, a transparent rewriting - the user doesn't see any different URL).

I'd like to achieve the same using different domains but I can't figure out how... I've been working on it for hours and I can't achieve what I want!

Usually I use this:

```
RewriteCond %{REQUEST_URI} /([a-z]{2})
RewriteRule ^([a-z]{2})[/]*$ /index.php?lang=$1 [NC,QSA] 
```

I can't get this one work, to use different domains:

```
RewriteCond %{HTTP_HOST} ^www.site1\.com [NC]
RewriteCond %{REQUEST_URI} !^/index.php?lang=it
RewriteRule ^(.*)$ /index.php?lang=it [NC,QSA]

RewriteCond %{HTTP_HOST} ^www.site2\.com [NC]
RewriteCond %{REQUEST_URI} !^/index.php?lang=en
RewriteRule ^(.*)$ /index.php?lang=en [NC,QSA] 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-20T07:09:15.917

Lawrence Cherone - Thank you, that one works like a charm! Now it works:

```
RewriteCond %{HTTP_HOST} ^www\.site1\.com [NC] 
RewriteRule ^(.*)$ index.php?lang=it [NC,QSA] 
RewriteCond %{HTTP_HOST} ^www\.site2\.com [NC] 
RewriteRule ^(.*)$ index.php?lang=en [NC,QSA] 
```

Of course I check the www redirect before this rule.

Thank you!!

# android - 通知和主页按钮

> ID：10232724
> 
> 赞同：0
> 
> 时间：2012-04-19T16:39:37.250
> 
> 标签：android, notifications, android-activity, android-homebutton

我编写了一个通知函数来发送通知，当用户单击顶部栏上的通知时，它将切换到定义的活动。我的代码做了我想要的。但有一个问题。

假设有 3 个活动（A、B、C），当用户单击顶部栏上的通知时，它会切换到 A。

流程是：
（1）用户打开A
（2）点击A处的按钮切换到B
（3）点击顶栏的通知
（4）切换到A（没问题）
（5）再次点击a A 上的按钮并切换到 B
(6) 按 Home 按钮隐藏应用程序
(7) 长按 Home 按钮并单击应用程序图标
(8) 切换到 A (??? 它应该切换到 B 因为我在 Activity乙！）

---- 长按 Home 键切换到 App 时，如何避免切换到 Activity A？谢谢！

这是代码片段：

```
int notificationCounter = 0;
private void displayNotificationMessage(String title, String message, int notification_id, String fromUser, boolean vibrate, boolean playSound, String notificationActionStr)
{

    if (receiverMessageBroadcast || !currentTargetUser.equals(fromUser))
    {
        Intent intent = new Intent();
        intent.setClass(this, MainActivity.class);
        //intent.setAction(notificationAction + "_" + System.currentTimeMillis());
        Bundle bundle = new Bundle(); 
        bundle.putInt("notificationAction", 1);
        bundle.putString("targetUser", fromUser);
        intent.putExtras(bundle);

        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP|Intent.FLAG_ACTIVITY_SINGLE_TOP);

        Notification notification = new Notification(R.drawable.notification, message, System.currentTimeMillis());
        notification.setLatestEventInfo(this, title, message, PendingIntent.getActivity(this.getBaseContext(), notificationCounter, intent, PendingIntent.FLAG_UPDATE_CURRENT));

        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        notification.flags |= Notification.FLAG_SHOW_LIGHTS;     

        if (playSound)
            notification.defaults |= Notification.DEFAULT_SOUND;

        if (vibrate)
            notification.vibrate=new long[] {100L, 100L, 200L, 500L};

        notification.ledARGB = Color.WHITE;
        notification.ledOnMS = 1500;
        notification.ledOffMS = 1500;

        notificationMgr.notify(fromUser, 0, notification);
        notificationCounter++;          
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T10:19:39.947

这是“活动”和“任务”之间的区别，如此[处](http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html)所述。基本上，它是显示在后台堆栈中并且用户可以返回的任务，而不是活动。

您可以尝试在清单中使用“android:exported="true"” 标记活动 B。

# ios - 预期 ì)ì 错误

> ID：10232725
> 
> 赞同：0
> 
> 时间：2012-04-19T16:39:37.707
> 
> 标签：ios

Xcode 在我的 AppDelegate.m 文件中向我发送了一个 Expected ')' 错误，我不明白这个问题。有人可以帮助我吗？

```
- (void)applicationDidFinishLaunching:(UIApplication *)application 
{    
    NSArray *pippoInfos = [AwosDatabase database].pippoInfos;
    for (PippoInfo *info in pippoInfos) 
    {
        NSLog(@"%d: %@, %@, %@, %@" info.id, info.gigio, info.gigi, info.cip, info.ciop);
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:45:21.817

您的代码中有两个问题：

1.  您在方法末尾省略了右括号 - 但我猜这只是因为您没有引用整个方法而发生的。

2.  您省略了`NSLog`行中的第一个逗号。请注意，格式化字符串及其参数需要使用逗号分隔。

# mysql - 如何创建 NOT IN where 子句 Doctrine_Query？

> ID：10232727
> 
> 赞同：3
> 
> 时间：2012-04-19T16:39:44.083
> 
> 标签：mysql, symfony1, doctrine

我正在使用 Doctrine ORM 在 symfony 1.4 中开发。我无法使用带有 id 的数组创建 NOT IN where 子句。这是我的代码：

```
$results = Doctrine_Query::create()
  ->from('Asset a')
  ->where('a.id NOT IN (?)', implode(',', $ids))
  ->execute(); 
```

生成的这个查询的 sql 是这个：

```
WHERE (a.id NOT IN ('1,5,6,7,8,9,10,11,12,13,14,15,17,18,20,24,25,26,29,30,28')) 
```

如您所见，将填充有 id 的数组视为字符串。我也试过没有数组的内爆，但我得到了这个错误：

```
SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens 
```

包含排除 id 的数组 $ids 是一个纯数字。

我不知道这个子句的正确语法是什么。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:56:42.517

您必须使用`whereNotIn`（[旧文档但仍然](http://www.symfony-project.org/doctrine/1_2/en/06-Working-With-Data)可以）。

```
$results = Doctrine_Query::create()
  ->from('Asset a')
  ->whereNotIn('a.id', $ids)
  ->execute(); 
```

# javascript - 使用 jQuery 删除 CSS 样式 onLoad

> ID：10232728
> 
> 赞同：1
> 
> 时间：2012-04-19T16:39:45.027
> 
> 标签：javascript, jquery, html, css, append

在我问这个问题之前，请参考这个 jsFiddle：http: [//jsfiddle.net/AxGHA/3/](http://jsfiddle.net/AxGHA/3/)

我基本上想删除浮动：左；**H2**和**P**标签上的 StyleSheet 属性**IF**使用 jQuery 的 div 中不存在图像。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T16:55:28.773

你可以使用`:not`，`:has`我在下面做了一个示例代码：

```
$(".section:not(:has(>img))").addClass("no-image"); 
```

以及为此的CSS：

```
.no-image h2, .no-image p {
    float: none;
    width: auto;
} 
```

例如：http: [//jsfiddle.net/voigtan/AxGHA/5/](http://jsfiddle.net/voigtan/AxGHA/5/)

">img" 代替：

[http://jsfiddle.net/voigtan/AxGHA/6/](http://jsfiddle.net/voigtan/AxGHA/6/)

我正在向 .section 添加一个 css 类，并在 css 中设置我想要的样式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T16:43:40.280

```
if(!$('div.section img').length) {
   $('p, h2', 'div.section').css('float', 'none');
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T16:46:58.017

你可以这样做

```
$(".section").each(function() {
    var hasImage = $(this).children("img").length != 0;
    if (!hasImage) {
        $(this).find("h2,p").css("float", "none");
    }
});

​ 
```

查看更新的[jsFiddle](http://jsfiddle.net/AxGHA/4/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T16:43:42.947

```
 ​$(document).ready(function(){
    if ($("div.section").find("img").length == 0){
        $("h2.section, p.section").css("float", "none")            
    }
});​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-19T16:49:19.737

```
!​$('.section img​​​​​​​​​​​​​​​​​').length && $('.section h2, .section p').css('float', 'none'); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-19T16:50:19.847

我认为你可以做这样的事情（注意我没有测试代码）：

```
$('h2, p').parent('div').each(function(index, $element) {
    if (!$element.has('img'))
        $element.css('float', 'none');
}); 
```

请注意，我无法从我的位置查看 jsfiddle，所以我直接根据您的解释来回答。

# sitecore - 为项目 DisplayName 属性构建验证规则

> ID：10232731
> 
> 赞同：0
> 
> 时间：2012-04-19T16:40:02.480
> 
> 标签：sitecore

我正在研究 Sitecore 中的多语言解决方案，并希望使用项目的 DisplayName 属性来表示 URL，以允许特定语言的 URL。

我已将`useDisplayName`web.config 属性设置为 true，如下所示

```
<linkManager defaultProvider="sitecore">
  <providers>
    <clear />
    <add name="sitecore" 
         alwaysIncludeServerUrl="false"
         encodeNames="true"
         type="Sitecore.Links.LinkProvider, Sitecore.Kernel"
         addAspxExtension="false"
         shortenUrls="true"
         languageEmbedding="asNeeded"
         languageLocation="filePath"
         useDisplayName="true" />
  </providers>
</linkManager> 
```

我也一直在玩`<encodeNameReplacements>`可以在 URL 中用连字符替换`%20`以提供漂亮干净的 URL 的部分 - 对于那些感兴趣的人，这是通过以下方式完成的：

```
<replace mode="on" find=" " replaceWith="-" /> 
```

一切都很好，除了如果用户在打开上述设置的情况下在 DisplayName 中输入连字符，Sitecore 会中断......如果我关闭上述设置，那么我必须确保用户为 DisplayName 输入很好的连字符分隔值否则我们开始`%20`在 URL 中再次看到 nasty s ......

那么，有没有办法验证 DisplayName 属性以禁止或允许使用连字符？

或者，更好的是，有没有办法挂钩到发生 encodeNameReplacements 事情时执行的任何代码？这将是理想的，因为我可以允许用户为 DisplayName 输入他们喜欢的任何内容，然后即时清理此值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T09:00:18.043

有一个解决方案，但它需要一些编码，而且非常复杂。我以前在许多项目中都使用过这种解决方案，这是解决这个问题的唯一方法，我知道。

保存项目时，您不想真正用连字符替换空格，因为它对用户不友好。我的解决方案在运行时有效。

首先摆脱`<replace>`您添加的规则。

然后创建您自己的`LinkProvider`（继承自 Sitecore 的默认提供程序）。在 LinkProvider 内部创建一个方法来“规范化”项目的显示名称（例如，用空格替换连字符），让我们调用这个方法`NormalizeDisplayName()`。将其设为公开和静态，因为您稍后将需要它。

所以现在您已经设法让 Sitecore 用连字符替换链接中的所有空格。其余部分您仍然可以使用默认提供程序选项进行配置（addAspxExtension="false" useDisplayName="true" 等）

接下来是`ItemResolver`：Sitecore 的默认 ItemResolver 将不再识别项目路径，因此您将添加自己的 ItemResolver 来解决此问题。

创建一个继承自的类，`Sitecore.Pipelines.HttpRequest.HttpRequestProcessor`并将其配置为在默认 ItemResolver**之后**`<httpRequestBegin>`的管道中使用。

 **现在，当处理 itemresolver 时，您将首先拆分请求的 itempath（假设请求了“/category-name/subitem-name”）。从 siteroot 开始（可以从 中提取`Sitecore.Context.Site`），循环遍历所有子项，同时使用您`NormalizeDisplayName()`之前创建的方法规范他们的项目名称，直到找到与项目路径部分匹配的一个。

因此，在这种情况下，循环遍历 Home 项的子项，直到找到与标准化显示名称“类别名称”匹配的项。然后对该项目的子项执行相同的操作，直到找到具有标准化显示名称“subitem-name”的项目。

这样您就可以解析请求的项目，**如果原始显示名称已经包含连字符，它也可以工作**！

很抱歉我不能给你完整的代码示例，因为它非常复杂并且不仅限于上述内容。如果 URL 格式不正确，您还需要考虑重定向，并对 master/core 数据库进行例外处理以防止 Sitecore 中断。

希望这对你有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:37:45.710

如果您在 .net 反射器 (Sitecore.Shell.Framework.Commands.SetDisplayName) 中看到源代码，则没有运行的管道。

您可以制作一个保存事件，制作显示名称，因为您想用空格替换 hypen

```
public void OnItemSaving(object sender, EventArgs args)
    {
        Item item = Event.ExtractParameter(args, 0) as Item;

        item.Appearance.DisplayName = item.Appearance.DisplayName.Replace("-", " ");
    } 
```

只是事件的一个简单示例**

# php - 如何使用 Wikipedia API 在 php 页面上显示图像

> ID：10232735
> 
> 赞同：1
> 
> 时间：2012-04-19T16:40:19.973
> 
> 标签：php, mediawiki, wikipedia-api, getimagedata

嗨，我有一个使用 wikipedia API 的 php 页面，该页面使用 zend 框架来显示从搜索查询中获得的结果。目前它显示文章的标题和它的片段。我也希望能够显示图像。请就此事给我进一步的建议。谢谢。

下面是我的代码：（q 是在搜索框中输入的值）

```
<?php
// if form submitted
if (isset($_POST['q'])) {
    // load Zend classes
    require_once 'Zend/Loader.php';
    Zend_Loader::loadClass('Zend_Rest_Client');
    try {
        // initialize REST client
        $wikipedia = new Zend_Rest_Client('http://en.wikipedia.org/w/api.php');
        // set query parameters
        $wikipedia->action('query');
        $wikipedia->list('search');
        $wikipedia->srwhat('text');
        $wikipedia->format('xml');
        $wikipedia->srsearch($_POST['q']);
        // perform request
        // iterate over XML result set
        $result = $wikipedia->get();
    }
    catch (Exception $e) {
        die('ERROR: ' . $e->getMessage());
    }
 ?>

 <h2>Search results for '<?php echo $_POST['q']; ?>'</h2>
    <ol>
<?php foreach ($result->query->search->p as $r): ?>
<li><a href="http://www.wikipedia.org/wiki/
<?php echo $r['title']; ?>">
<?php echo $r['title']; ?></a> <br/>
<small><?php echo $r['snippet']; ?></small></li>
<?php endforeach; ?>
</ol>
<?php }?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-23T17:25:08.447

还有机会通过[JSONpedia](http://jsonpedia.org/)之类的包装 API 使用 Wikipedia 页面，它既可以实时工作（询问 Wiki 页面的当前 JSON 表示形式），也可以基于存储（查询以前在 Elasticsearch 和 MongoDB 中摄取的多个页面）。

特别是 JSONpedia 提供了一个 HTML 视图，将提取的 JSON 呈现给 HTML 页面。

例如，此查询处理 en:Albert_Einstein wiki 页面，提取 JSON 并将其呈现为具有完全解析的多媒体 URI 的基本 HTML。

[http://jsonpedia.org/annotate/resource/html/en%3AAlbert_Einstein?&procs=Extractors#references](http://jsonpedia.org/annotate/resource/html/en%3AAlbert_Einstein?&procs=Extractors#references)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:16:56.090

AFAIK没有任何真正好的方法。您可以获取生成的 HTML，找到第一个大小合理的图像并显示它（一旦您知道图像名称，您可以使用[imageinfo API](http://www.mediawiki.org/wiki/API%3aProperties#imageinfo_.2F_ii)获取可以在您自己的图像标签中使用的 URL）。

# asp.net - 客户端验证后阻止 asp.net 回发

> ID：10232739
> 
> 赞同：4
> 
> 时间：2012-04-19T16:40:47.287
> 
> 标签：asp.net, vb.net, validation, client-side-validation, server-side-validation

我有一个 asp.net 表单，其中包含一个下拉列表，该下拉列表在更改时发回服务器，并用一些日期填充第二个下拉列表。

该表单还包含其他字段，其中一些是经过验证的客户端和一些服务器端。

这是我遇到的问题。如果我收到客户端验证错误，然后尝试更改下拉列表，则不会填充第二个下拉列表。如果我再次更改第一个下拉列表，它会按预期工作。

这是我的提交按钮：

```
<asp:Button ID="btnSubmit" Text="Submit" runat="server" OnClientClick="Page_ClientValidate(); return checkPassengers();" OnClick="Page_Transfer" ValidationGroup="FormSubmit" /> 
```

这是我的客户端验证：

```
function checkPassengers() {
    if($("#testField").val() == "Name *" || $("#testField").val() == "") {
            $("#pltester").prepend("<p class='fillall'>Please fill in all fields marked with *</p>");
            return false;       
    }
}; 
```

下拉菜单：

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" >
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="ddl1st" EventName="SelectedIndexChanged" />
    </Triggers>
    <ContentTemplate>
        <asp:DropDownList ID="ddl1st" Width="190" AutoPostBack="true" OnSelectedIndexChanged="ChooseDates1st" runat="server" />
        <asp:DropDownList ID="ddlDepart1st" AutoPostBack="true" runat="server" />
    </ContentTemplate>
</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-04T18:25:04.343

简单的设置`CausesValidation="true"`并没有解决我的问题。使用 asp 下拉列表的 SelectedIndexChange 事件时，这似乎是个问题。我发现的解决方法是通过在回发之前验证不存在的验证组名称来使用 js 重置前端的验证。

```
function ignoreValidation() {
            if (typeof Page_ClientValidate != 'undefined') {
                Page_ClientValidate('reset-validation');
                Page_BlockSubmit = false;
            }
            return true;
} 
```

对于下拉列表

`<asp:DropDownList CausesValidation="false" onchange="ignoreValidation();" runat="server" ID="CustomerDropDownList" OnSelectedIndexChanged="LoadCustomers" AutoPostBack="true"/>`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T11:26:54.857

在使用更新面板时，我曾多次遇到过这个问题。

我发现如果需要验证该字段，那么您必须实际设置`CausesValidation="true"`元素才能使其仍可与更新面板一起使用。

希望这可以帮助你！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T16:47:35.243

如果下拉列表不需要验证，可以`CausesValidation="false"`在初始下拉列表中设置。这将导致它不会触发验证，因此可以随意更改。

或者，您可以将 DropDownList 放在不同的[ValidationGroup](http://msdn.microsoft.com/en-us/library/ms227424.aspx)中，以便更改它不会触发其他控件的验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T08:30:36.317

```
function validateCommand(group) {
        if (typeof (Page_ClientValidate) == 'function') {
            Page_ClientValidate(group);
            if (Page_IsValid) {
                Page_BlockSubmit = !confirm('Are you sure?');
            }
        }
    } 
```

# javascript - 如何将选项传递给 HTML 选择

> ID：10232745
> 
> 赞同：0
> 
> 时间：2012-04-19T16:40:59.067
> 
> 标签：javascript, dhtml

我想要不同的行为，具体取决于`<option>`选择的元素：

```
<select name="colorSelector" onchange="handleColorChange();">
    <option value="">- select -</option>
    <option value="1">Red</option>
    <option value="2">Blue</option>
</select>

function handleColorChange() {
    // Behave different depending on which <option> was just selected
} 
```

为了实现这一点，我需要`handleColorChange()`从侦听器内部传递什么到方法中？`onchange`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:05:19.913

好像`switch`还没有人提过。另外，不要将函数放在 HTML 中，这很糟糕。这是正确的方法：

```
document.getElementsByName( 'colorSelector' )[ 0 ].onchange = function ( ) {
    switch ( this.options[ this.selectedIndex ].value ) {
        case '1':
            // Do something when "Red" is selected
            break
        case '2':
            // Do something when "Blue" is selected
            break
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T16:52:38.390

尝试

```
function handleColorChange(self)
{
   console.log(self.selectedIndex);
   console.log(self.options[self.selectedIndex].text);
   console.log(self.options[self.selectedIndex].value)
}; 
```

在 HTML 代码中

```
<select id="mySelect" name="colorSelector" onchange="handleColorChange(this);"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T16:48:11.520

您不必传递任何东西来运行，只需分配一个 id 来选择：

```
<select id="mySelect" name="colorSelector" onchange="handleColorChange();">
    <option value="">- select -</option>
    <option value="1">Red</option>
    <option value="2">Blue</option>
</select>

function handleColorChange() {
var x=document.getElementById("mySelect").selectedIndex;
var y=document.getElementById("mySelect").options;
alert("Index: " + y[x].index + " is " + y[x].text);
} 
```

或者，如果您想按名称获取，请在您的函数中执行此操作：

```
var x=document.getElementsByName("colorSelector")[0].selectedIndex;
var y=document.getElementsByName("colorSelector")[0].options;
alert("Index: " + y[x].index + " is " + y[x].text); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T16:50:58.140

采用`this`

```
<select name="colorSelector" onchange="handleColorChange(this);">
    <option value="">- select -</option>
    <option value="1">Red</option>
    <option value="2">Blue</option>
</select>

function handleColorChange(element) {
    // Behave different depending on which <option> was just selected
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T16:52:38.853

```
<select name="colorSelector" onchange="handleColorChange(this);">
    <option value="">- select -</option>
    <option value="1">Red</option>
    <option value="2">Blue</option>
</select>​

function handleColorChange(obj) {
    alert(obj.options[obj.selectedIndex].value);
}​ 
```

JSFiddle[在这里](http://jsfiddle.net/TkkuJ/)

# python - 将 ipython 设置为 pydev 的解释器

> ID：10232746
> 
> 赞同：5
> 
> 时间：2012-04-19T16:40:59.067
> 
> 标签：python, eclipse-plugin, pydev, ipython

我想在 Pydev eclipse 插件中使用 IPython 作为解释器。

我有 IPython 0.10 和 Pydev 2.5.0，在 linux (opensuse) 上运行。

当我进入 Pydev 首选项并尝试设置 IPython 路径时（如本页所述：http: [//pydev.org/manual_101_interpreter.html](http://pydev.org/manual_101_interpreter.html)），我收到以下错误

“找不到 Python 标准库或找到没有 .py 文件的标准库”

ipython 解释器在 bash 终端上工作正常，我从命令“which ipython”获取路径。

有人能帮我吗 ？

谢谢 ！

解释器信息.py 输出是：

```
python /home/softs/eclipse/plugins/org.python.pydev_2.5.0.2012040618/PySrc/interpreterInfo.py 

<xml>
<version>2.7</version>
<executable>/usr/bin/python</executable>
<lib path="out">/home/softs/eclipse/plugins/org.python.pydev_2.5.0.2012040618/PySrc</lib>
<lib path="ins">/usr/local/lib64/python2.7/site-packages/scikits.timeseries-0.91.3-py2.7-linux-x86_64.egg</lib>
<lib path="ins">/usr/local/lib64/python2.7/site-packages/distribute-0.6.19-py2.7.egg</lib>
<lib path="ins">/usr/local/lib64/python2.7/site-packages/MeshPy-2011.1-py2.7-linux-x86_64.egg</lib>
<lib path="out">/data/dvp/python</lib>
<lib path="out">/home/mayet</lib>
<lib path="ins">/usr/lib/python27.zip</lib>
<lib path="ins">/usr/lib64/python2.7</lib>
<lib path="ins">/usr/lib64/python2.7/plat-linux2</lib>
<lib path="ins">/usr/lib64/python2.7/lib-tk</lib>
<lib path="ins">/usr/lib64/python2.7/lib-old</lib>
<lib path="ins">/usr/lib64/python2.7/lib-dynload</lib>
<lib path="ins">/usr/lib64/python2.7/site-packages</lib>
<lib path="ins">/usr/lib64/python2.7/site-packages/PIL</lib>
<lib path="ins">/usr/local/lib64/python2.7/site-packages</lib>
<lib path="ins">/usr/local/lib/python2.7/site-packages</lib>
<lib path="ins">/usr/lib64/python2.7/site-packages/gtk-2.0</lib>
<lib path="ins">/usr/lib/python2.7/site-packages</lib>
<lib path="ins">/usr/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg-info</lib>
<lib path="ins">/usr/lib64/python2.7/site-packages/wx-2.8-gtk2-unicode</lib>
<forced_lib>__builtin__</forced_lib>
<forced_lib>__main__</forced_lib>
<forced_lib>_ast</forced_lib>
<forced_lib>_codecs</forced_lib>
<forced_lib>_sre</forced_lib>
<forced_lib>_symtable</forced_lib>
<forced_lib>_warnings</forced_lib>
<forced_lib>errno</forced_lib>
<forced_lib>exceptions</forced_lib>
<forced_lib>gc</forced_lib>
<forced_lib>imp</forced_lib>                                                                                                                                                        
<forced_lib>marshal</forced_lib>                                                                                                                                                    
<forced_lib>posix</forced_lib>                                                                                                                                                      
<forced_lib>pwd</forced_lib>                                                                                                                                                        
<forced_lib>signal</forced_lib>                                                                                                                                                     
<forced_lib>sys</forced_lib>                                                                                                                                                        
<forced_lib>thread</forced_lib>                                                                                                                                                     
<forced_lib>xxsubtype</forced_lib>                                                                                                                                                  
<forced_lib>zipimport</forced_lib>                                                                                                                                                  
</xml>Traceback (most recent call last):                                                                                                                                            
  File "/home/softs/eclipse/plugins/org.python.pydev_2.5.0.2012040618/PySrc/interpreterInfo.py", line 142, in <module>                                                              
raise RuntimeError('Ok, this is so that it shows the output (ugly hack for some platforms, so that it releases the output).')                                                   
RuntimeError: Ok, this is so that it shows the output (ugly hack for some platforms, so that it releases the output). 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T23:30:02.140

这意味着在所有这些路径（xml 标记）中，PyDev 都无法找到 Python 库文件（例如 threading.py 或 traceback.py 等 - 请注意，如果您也只有 .pyc 文件而没有这些文件夹之一中的实际 .py 文件）。

或者您没有离开包含在解释器配置过程中选择的 Python 库的文件夹。

请注意，您并没有真正将“IPython”设置为解释器，而是将 Python 本身设置为解释器，并且可以安装 IPython 库以在交互式控制台中使用：http: [//pydev.org/manual_adv_interactive_console.html](http://pydev.org/manual_adv_interactive_console.html)（但从您的输出看来，您在指向配置/usr/bin/python 时这样做是正确的）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T10:55:57.980

要将 Ipython 作为默认 shell，请执行以下操作：转到 Window-->Preferences-->PyDev-->Interactive Console。在 Initial Interpreter Commands 字段中添加这 2 个命令：import IPython；IPython.Shell.IPShell().mainloop() 现在每次启动控制台时，IPython 都会默认启动。

注意1：当然，您需要在系统上安装 IPython 才能正常工作 注意2：解释器仍然会抱怨“在 [1]：PyDev 控制台：使用默认后端（IPython 不可用）”，但这是因为它打印它会在您有机会导入 IPython 之前自动进行。

希望这可以帮助！！再见！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T12:51:31.967

除了@mr_endres 提到的步骤之外，我还必须验证站点包的路径。有文件夹，但结果它是空的。

要验证正确的路径，您可以从终端启动 ipython 并执行以下操作（仅作为示例）：

```
 1\. import numpy as np
 2\. np.__file__ 
```

返回：

```
'`/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages`/numpy/__init__.pyc' 
```

然后我添加： '/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages' 到 PYTHONPATH （在 Eclipse 中它通过首选项-> PyDev -> 解释器 - Python -> PYTHON PATH 部分中的新文件夹）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T17:58:16.730

对我来说，以下两个步骤有效：1）将“/usr/lib/python2.7/site-packages/”添加到 PYTHONPATH 2）在 Window->Preferences->PyDev->Interactive Console 下启用选项“Connect console to变量调试视图"

奇怪的是，只有第二步 IPython 才开始......

# android - 如何为更大的屏幕尺寸布局提供更大的图像视图？

> ID：10232750
> 
> 赞同：1
> 
> 时间：2012-04-19T16:41:11.683
> 
> 标签：android

我正在研究我的中大屏幕 android 设计。我已经为 mdeium 屏幕设计了布局（在 eclipse 编辑器和模拟器上查看它）并确保它是好的。我的设计涉及文本视图和图像视图。我已经为不同的密度大小创建了 3 个可绘制文件夹，因此图片可以占据不同密度的粗糙空间。

现在，我正在查看大屏幕（甚至超大屏幕），但我的文本视图和图像视图看起来非常小（与屏幕大小相比）。因此，我想通过扩大一切来利用额外的空间。

我知道如何为文本视图做这件事，基本上我会让 textsize 更大（即，而不是 12 sp，我可以使它成为 16sp）

但是如何为 ImageView 做呢？Imageview 根据其大小显示图像。并且图像的大小确实适用于中等屏幕。我怎样才能让它更大？我应该提供更大尺寸和不同名称的相同图像吗？

请帮忙，顺便说一句，请不要将我指向支持多屏幕的android开发，因为我读过它，除非我错过了回答我问题的某一行，否则我找不到我需要的东西。谢谢您的帮助

决定编辑这个问题也许人们可以更多地理解我的问题。我有一个 50 X 50 像素的中等密度中等屏幕尺寸的图像。假设这个图像占用 5 x 5 毫米，现在如果我想在中等密度的 XLARGE 屏幕上显示相同的图像，但我希望它更大（比如占用 10 x 10 毫米）。我该如何做到这一点？我知道我在 XLARGE 文件夹中需要不同的布局，所以在这个布局中我应该如何处理那个图像视图？我是否要创建一个 100X100 像素的新 PNG 文件并将其放在中等密度文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:09:36.730

您的所有屏幕 xml 文件都可以放置在多个文件夹中（layout、layout-large、layout-xlarge 等），您可以在其中根据屏幕大小在 DPI 中缩放 UI 组件的大小。[请参阅此处](http://developer.android.com/guide/practices/screens_support.html)的Android 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:05:24.747

您可以根据您的要求使用 layout-xhdpi 、layout-hdpi 等。

# oop - VB脚本。数据集返回错误

> ID：10232758
> 
> 赞同：1
> 
> 时间：2012-04-19T16:41:28.217
> 
> 标签：oop, asp-classic, vbscript, data-access-layer

我没有任何编程经验`VBScript`，我想使用一些`OOP`方法。如果您在下面查看我的代码，您会看到我正在尝试使用一组返回数据集的方法创建 DB 访问类。不知道为什么，但收到错误：

```
Microsoft VBScript runtime error '800a01c2'

Wrong number of arguments or invalid property assignment

/TrashCan/library/BLL/CreditBLLClass.asp, line 18 
```

我有一个`.asp`页面：

```
<body>
    <!-- #INCLUDE FILE="library\BLL\CreditBLLClass.asp" -->
    <%             
        Dim creditBLL
        Dim reader
        creditBLL = new CreditBLLClass

            reader = creditBLL.GetData() 
            If reader.EOF = False Then
                Do While reader.EOF = False
                    Response.Write(reader.Fields("a").Value)
                    reader.MoveNext
                Loop    
            End If
    %>
</body> 
```

CreditBLLClass.asp:

```
<!-- #INCLUDE FILE="DatabaseConnectionClass.asp" -->
<%
Class CreditBLLClass
    'Private variables
    Dim connection

    Public Default Function Init()
        Set Init = Me
      End Function

    Public Function GetData ()
        connection = new DatabaseConnectionClass
        GetData = connection.DBGetRecords("select a from b")
    End Function
End Class

%> 
```

和数据库连接类

```
<% 

Class DatabaseConnectionClass

'Private variables
dim pConnection

Public Default Function Init()

    Set Init = Me
  End Function

Public Function DBGetRecords ( sSQL )

    Set pConnection = Server.CreateObject( "ADODB.Connection" )
    With pConnection
            .ConnectionString = "string"
            .Open
         End With
        DBGetRecords = pConnection.Execute ( sSQL )
End Function

End Class

%> 
```

请告诉我我做错了什么？也许有一种常见的方法来构建数据访问层？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T19:37:21.587

错误在错误的`invalid property assignment`一部分。

从您的代码：

```
connection = new DatabaseConnectionClass
GetData = connection.DBGetRecords("select a from b") 
```

使用对象时必须`Set`使用。

将其更改为：

```
Set connection = new DatabaseConnectionClass
Set GetData = connection.DBGetRecords("select a from b") 
```

# clojure - 为什么 `(exit)` 在 REPL 中并不总是可用？

> ID：10232760
> 
> 赞同：4
> 
> 时间：2012-04-19T16:41:44.930
> 
> 标签：clojure, exit, leiningen

今天我注意到了一些奇怪的事情。当我不在一个项目中时（也就是说，shell 不在 clojure 项目的目录中），我**可以**使用它`exit`来退出 REPL：

```
shell$ lein repl
REPL started; server listening on localhost port 43712
user=> (+ 3 4)
7
user=> (exit)
shell$ echo '<span>not in <s>kansas</s>clojure anymore</span>' 
```

当我“进入”一个项目时（即外壳位于 clojure 项目的目录中），我**不能**使用`exit`：

```
shell$ cd my_clojure_project
shell$ lein repl
REPL started; server listening on localhost port 69237
user=> (* 8 4)
32
user=> (exit)
java.lang.Exception: Unable to resolve symbol: exit in this context (NO_SOURCE_FILE:2)
user=> 
```

**这里有什么问题？**

* * *

Clojure 版本（两个示例）：

```
user=> (clojure-version)
"1.2.1" 
```

Leiningen 版本（两个示例）：

```
shell$ lein -v
Leiningen 1.6.1 on Java 1.6.0_26 Java HotSpot(TM) 64-Bit Server VM 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T21:29:20.530

似乎是因为`leiningen.core`有项目时命名空间不可用。更具体地说，当有一个项目时，您的项目代码会[在一个单独的 ClassLoader 中进行评估，](https://github.com/technomancy/leiningen/blob/1.x/src/leiningen/compile.clj#L200)而类路径中只有您的项目。因此，没有任何 Leiningen 函数可用。

Leiningen 2 REPL 没有这个问题。

# jquery - 带有 MultiSelect 的 JQGrid：单击行时不要选中复选框

> ID：10232765
> 
> 赞同：2
> 
> 时间：2012-04-19T16:41:53.263
> 
> 标签：jquery, checkbox, jqgrid, multi-select

制作方法：单击该行不选中/取消选中复选框，即仅当您单击列多选时才选中/取消选中该复选框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:56:51.540

[我想您会在此处](https://stackoverflow.com/a/7635601/315935)通过相应的演示找到您问题的答案。

# django - 实现 Django 自定义模板标签的问题

> ID：10232766
> 
> 赞同：0
> 
> 时间：2012-04-19T16:41:53.903
> 
> 标签：django, python-2.7

我需要实现一个模板标签，该标签将返回一个包含来自对象的项目集合的字符串。

我创建了以下结构：

```
produtos/        
    templatetags/
        __init__.py
        produto_tags.py 
```

产品标签.py：

```
# -*- coding: utf-8 -*-

from django import template
from django.template import Node
from produto.models import Produto
from django.template.loader import render_to_string

register = template.Library()

@register.tag
def get_all_tags(parser, token):
    args = token.split_contents()
    return ProdutoTemplateNode(args[1])

class ProdutoTemplateNode(Node):
    def __init__(self, produto):
        self.produto = produto

    def render(self, context):
        list = []
        produto = template.Variable(self.produto).resolve(context)
        tags = produto.tags.all()
        if tags:
            for tag in tags:
                list.append(tag.name)
            return ", ".join(list)
        else:
            return u'Não existem tags para este produto' 
```

模板：

```
{% load produto_tags %}
...
    {% for produto in produtos %}
        <li id="{{ produto.ordenacao }}" data-tags="{% get_all_tags produto %}">
            ...
        </li>
    {% endfor %}
    </ul>
{% else %}
    <p>Não existem produtos cadastrados no sistema</p>
{% endif %} 
```

我收到此错误：

```
TemplateSyntaxError at /concrete/nossos-sites.html
Invalid block tag: 'get_all_tags', expected 'empty' or 'endfor' 
```

我读了其他线程，人们说如果标签不存在就会发生这个错误，而且似乎是这样。我也一直在查看 djangoproject.com 文档，但我找不到任何关于可能发生的事情的线索。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:52:30.787

模板标记文件需要`templatetags`位于应用程序内部的一个目录中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T17:33:47.760

首先遵循 Daniel 和 Ignacio 的建议。此外，奇怪的是，您`{% load produto_tags %}`在模板顶部却出现了无效块错误：如果`produto_tags`无法加载，则错误应该类似于“produto_tags 不是有效标签”等等。您能否再次检查您发布的代码和路径结构？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T11:26:42.050

这很棘手，尽管很简单：

首先，项目其他地方的另一个文件夹中有另一个“produto_tags.py”：

```
project/
    common/
        templatetags/
            produtos_tags.py
    produtos/
        templatetags/
            produtos_tags.py 
```

所以，起初我将所有代码从 produtos/templatetags/ 移到 common/templatetags/。但是当我这样做时，Django 开始抱怨没有从 produtos 中找到 produtos_tags。之后，我将代码返回到 produtos/templatetags/ 并将文件重命名为 tags_produtos.py，这有助于显示下面我错误导入的简单部分：

错误的：

```
from produto.models import Produto 
```

正确的：

```
from produtos.models import Produto 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-19T16:45:24.587

改为使用`{{ produto | get_all_tags }}`。

该`{% ... %}`语法仅对块标签有效，例如`for`.

希望有帮助。

# jersey - Jersey - Freemarker - 使用自定义 ViewProcessor

> ID：10232769
> 
> 赞同：4
> 
> 时间：2012-04-19T16:42:00.330
> 
> 标签：jersey, freemarker

我的模板已呈现，但没有 freemarker 处理。输出是

```
<html>
<body>
    <h1>Welcome ${user}</h1>
</body>
</html> 
```

变量 user 没有被它的值替换。

所以我不确定 Jersey 是否了解我的自定义 ViewProcessor。我怎样才能明确告诉 Jersey 我想使用 Freemarker ViewProcessor。

我看过以下示例，但没有帮助 [http://search.maven.org/#browse%7C-1697896452](http://search.maven.org/#browse%7C-1697896452)

总而言之，我有：

在我的 pom.xml

```
<dependency>
    <groupId>com.sun.jersey.contribs</groupId>
    <artifactId>jersey-freemarker</artifactId>
    <version>1.12</version>
</dependency> 
```

在我的 JerseyServletModule

```
Map<String, String> params = new HashMap<String, String>();
params.put("com.sun.jersey.freemarker.templateBasePath", "freemarker");
serve("/*").with(GuiceContainer.class, params); 
```

在我的测试资源中

```
@Path("/test")
@GET
@Produces("text/html")
public Viewable getMytestView() {
    Map<String, Object> map = new HashMap<String, Object>();
    map.put("user", "Peter");
    return new Viewable("/test.ftl", map);
} 
```

在我的 src/main/resources/freemarker/test.ftl

```
<html>
<body>
    <h1>Welcome ${user}</h1>
</body>
</html> 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:07:40.357

好的，现在可以了。抱歉，这肯定是缓存问题。

# web-crawler - 如何在网站上找到 sitemap.xml 路径？

> ID：10232774
> 
> 赞同：42
> 
> 时间：2012-04-19T16:42:21.053
> 
> 标签：web-crawler, sitemap

如何找到网站的 sitemap.xml 文件？

例如，去 stackoverflow/sitemap.xml 得到一个 404。

在 stackoverflow/robots.txt 中写了以下内容：

> “这在技术上是无效的，因为出于某些不可原谅的原因，站点地图路径必须是绝对的，而不是相对的。站点地图：/sitemap.xml”

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-06-06T04:44:35.483

没有标准，所以不能保证。话虽如此，站点地图通常在根目录上进行自我标记，如下所示：

`example.com/sitemap.xml`

在某些服务器上区分大小写，因此请记住这一点。如果不存在，请查看根目录下的 robots 文件：

`example.com/robots.txt`

如果您没有在 robots 文件中看到它，请前往 Google 并搜索：

`site:example.com filetype:xml`

这会将结果限制为目标域上的 XML 文件。在这一点上，它会根据您正在使用的网站的具体情况进行反复试验。如果您从上面的 Google 搜索短语中获得了几页结果，请尝试进一步限制结果：

`filetype:xml site:example.com inurl:sitemap`

或者

`filetype:xml site:example.com inurl:products`

如果您仍然找不到它，您可以`right-click > "View Source"`搜索（又名：“控制查找”或`Ctrl + F`）`.xml`以查看代码中是否有对它的引用。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-04-19T16:50:18.690

我认为站点地图的位置没有标准。这就是为什么您在使用 Google 的网站管理员工具添加站点地图时应该为站点地图指定任意 URL 的原因。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-28T21:17:31.913

站点地图的位置会影响它可以包含哪些 URL，但除此之外没有标准。这是一个很好的链接，有更多解释：[http ://www.sitemaps.org/protocol.html#location](http://www.sitemaps.org/protocol.html#location)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-21T18:23:04.483

根据[协议文档](http://www.sitemaps.org/protocol.html#informing)，网站设计人员至少可以使用三个选项将 sitemap.xml 位置通知给搜索引擎：

*   通过提供的界面通知每个搜索引擎该位置
*   将 url 添加到 robots.txt 文件
*   通过http向搜索引擎提交url

因此，除非他们选择在 robots.txt 文件中发布站点地图位置，否则您无法真正知道他们将 sitemap.xml 文件放在哪里。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-02-01T09:57:13.153

使用 Google 搜索运算符为您找到它

用下面的代码搜索谷歌..

> inurl:domain.com filetype:xml [点击这里查看站点地图搜索示例](https://www.google.com/search?biw=1920&bih=979&ei=TAXhXfjMO8W38QPs55-gBw&q=inurl%3Axyz.com%20filetype%3Axml&oq=inurl%3Axyz.com%20filetype%3Axml&gs_l=psy-ab.3...12665.13853..14312...0.0..0.170.707.0j5......0....1..gws-wiz.9rC7kU6pOO4&ved=0ahUKEwj4oofZrI_mAhXFW3wKHezzB3QQ4dUDCAs&uact=5)

将 domain.com 更改为您要查找站点地图的域。这应该列出为给定域列出的所有 xml 文件.. 包括所有站点地图 :)

# linux - 我在哪里可以在 ubuntu 中找到 sys/conf.h？

> ID：10232778
> 
> 赞同：0
> 
> 时间：2012-04-19T16:42:33.370
> 
> 标签：linux, unix

当我在测试一些关于 STREAMS 的代码时，`#include <sys/conf.h>`需要将其添加到程序中，但`sys/conf.h`在 Ubuntu 中似乎不存在。我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:23:18.280

它在大多数 linux 系统中是不存在的。POSIX 不需要操作系统实现它。我在阅读 APUE（由 Stevens 撰写）时发现了这个问题，但是即使您删除了这个包含语句，程序也可以运行。

# awk - 偷看下一行，但不要消费它

> ID：10232780
> 
> 赞同：14
> 
> 时间：2012-04-19T16:42:35.227
> 
> 标签：awk, gawk

`getline`读入下一行并将`NR`计数器加 1。使用 后`getline`，`awk`恢复下一行的工作。在大多数情况下，这是所需的行为。

在我的特殊情况下，我只需要查看下一行并根据其内容阅读下一行，或者我需要回溯一行。

我怎样才能回溯一行`awk`？我尝试`NR`手动将计数器设置为，`NR=NR-1`但这不起作用。或者有没有一种方法只看下一行而不改变`NR`？

我需要一条线的前瞻。在这种情况下，简单地将行保存在变量中并稍后引用它是行不通的。我正在尝试在其中实现一个识字编程工具`awk`，其中一个主文件可能包含许多子文件。这样的子文件以类似`"% file:file1"`. 如果到达具有较低缩进的行或具有类似行的另一行，则到达此类文件的末尾`"% file:file2"`。

`/% file:/`当我已经用 getline 阅读了这一行时，不使用所有行匹配的规则集。这就是为什么我想重置`NR`到上一行，然后`awk`再次读取匹配的行`/% file:/`并执行适当的规则。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-20T00:56:59.467

这可能会接近您正在寻找的内容，并且不应该像`sed`解决方案那样昂贵，因为 AWK 维护指向`getline`打开文件的指针。

```
awk 'FNR == 1 {
         getline nextline < FILENAME
     }
     {
         getline nextline < FILENAME;
         print "currentline is:", $0;
         print "nextline is:   ", nextline
     }' input file 
```

第一个块读取第一行并浪费它。

在这种形式中，`getline`不设置任何变量，例如`NR`、或。它只设置您提供的变量（在这种情况下）。`FNR``NF``$0``nextline`

有关其他信息，请参阅[此内容。](http://www.gnu.org/software/gawk/manual/html_node/Getline_002fVariable_002fFile.html#Getline_002fVariable_002fFile)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:01:27.273

这有点 hack 并且相当昂贵，但是对于小文件确实可以让您提前了解：

```
cmd="sed -n " NR + 1 "p " FILENAME; cmd | getline nextline 
```

这将采用 NR 的当前值并使用 sed 从输入文件中提取行 NR + 1。这很昂贵，因为 sed 会在您每次进行前瞻时读取整个文件（您可以通过向 sed 添加“q”命令来稍微缓解这种情况）。变量 nextline 将设置为文件的下一行，并且在最后一行为空白。

# silverlight - Silverlight 流媒体视频

> ID：10232784
> 
> 赞同：1
> 
> 时间：2012-04-19T16:42:58.207
> 
> 标签：silverlight, video, encoding, streaming

我正在创建一个面向某家公司客户的网络平台。该公司要求该平台允许视频流。

重要的是要注意，该公司将通过我为此目的构建的软件将视频添加到平台上，并且每个视频都将在 sql server 表上引用。

我以前从未做过流媒体，所以我问了两件事：

第一个是关于 Silverlight 流媒体的一些指导（教程、文章、示例等）

另一个是我主要关心的问题。我有一些来自公司的视频样本，它们都超过 200 MB，最高可达 2GB，所以我知道我必须重新编码它们才能变得更小。但是，我该怎么做......我的意思是，我是否必须手动重新编码它们，一次一个，或者有没有办法在添加新视频时自动完成？

我有 Expression Studio Encoder 4 pro，但从未真正使用过它，据我所知，我必须手动添加每个视频来进行编码。再次......有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:39:21.253

Silverlight 并不支持所有视频格式和编码。有关受支持格式的列表，请参阅[此页面。](http://msdn.microsoft.com/en-us/library/cc189080%28VS.95%29.aspx)您可能需要重新压缩您的视频，不仅要减小它们的大小，还要规范格式。

重新压缩可以在后台运行的 Windows 服务中完成，要使用的更合适的库可能取决于您将使用的目标格式。对于 wmv 文件，我建议使用 Windows Media Format SDK、（目前已弃用）Windows Media Encoder SDK 或其后继的 Expression Studio Encoder SDK。对于使用 H264 作为目标，我建议使用[ffmepg](http://h264.code-shop.com/trac/wiki/Encoding)。

您应该根据您可以预见的网站用户数量来决定交付协议。HTTP 可能不是最佳选择，因为还有其他协议，例如[RTTP](http://en.wikipedia.org/wiki/Real-time_Transport_Protocol)，通常更适合视频流。

# php - 如果标签为空（无文本）...为 php 列表页运行 jquery 脚本

> ID：10232785
> 
> 赞同：0
> 
> 时间：2012-04-19T16:42:58.670
> 
> 标签：php, javascript, jquery

我有一个生成库存项目列表的 php 页面，我想确定库存项目的表 td 是否为空，以便我可以运行一个 jquery 脚本来说明我们是否有库存项目。

```
jQuery(document).ready(function() {
    if ($("#paperId:empty")) {
        $('#tablebox').append("<h2 class=\"floatclear\">There is stock that matches your search parameters.</h2>");
    } else {
        $("table").hide();
        $('#papernav').hide();
        $('#tablebox').append("<h2 class=\"floatclear\">No Stock is currently available.</h2>");
    }
}) 
```

我认为我应该在每次提交时都运行它，但不知道如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:10:06.880

`$("#paperId")` 首先没有。

生成表格时，在每条记录中添加一个类，如“papperID”，然后计算 dom 中元素的长度。

```
 $(".paperId").length 
```

# android - 调试 Android 应用程序时在 Eclipse 中进行堆栈分析

> ID：10232787
> 
> 赞同：0
> 
> 时间：2012-04-19T16:43:22.357
> 
> 标签：android, eclipse, debugging, stack-trace

在开发Android应用程序时，时不时会遇到异常发生但无法通过堆栈追溯的情况，因为此时显示的堆栈仅提及系统方法，而没有提及我的任何代码行。例如，如果我错误地将不正确的字符串传递给 Float.parseFloat，我会得到如下信息：

```
Thread [<1> main] (Suspended)   
LoadedApk$ReceiverDispatcher$Args.run() line: 710   
ActivityThread$H(Handler).handleCallback(Message) line: 587 
ActivityThread$H(Handler).dispatchMessage(Message) line: 92 
Looper.loop() line: 123 
ActivityThread.main(String[]) line: 3729    
Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
Method.invoke(Object, Object...) line: 507  
ZygoteInit$MethodAndArgsCaller.run() line: 874  
ZygoteInit.main(String[]) line: 632 
NativeStart.main(String[]) line: not available [native method] 
```

还有这个：

```
Thread [<1> main] (Suspended (exception RuntimeException))  
LoadedApk$ReceiverDispatcher$Args.run() line: 722   
ActivityThread$H(Handler).handleCallback(Message) line: 587 
ActivityThread$H(Handler).dispatchMessage(Message) line: 92 
Looper.loop() line: 123 
ActivityThread.main(String[]) line: 3729    
Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
Method.invoke(Object, Object...) line: 507  
ZygoteInit$MethodAndArgsCaller.run() line: 874  
ZygoteInit.main(String[]) line: 632 
NativeStart.main(String[]) line: not available [native method] 
```

问题是 - 我如何查明导致问题的代码行？在不正确使用 parseFloat 的情况下，我希望看到堆栈中提到 parseFloat 以及包含调用的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:48:10.110

在 Eclipse 的 DDMS 视图中检查 Logcat。这将向您显示更好的堆栈跟踪，了解错误在代码中的确切位置以及错误是什么

前任。我写了一个测试应用程序，像你说的那样无效地使用 Float.parseFloat 并在 logcat 中得到以下错误

```
04-19 12:56:55.929: E/AndroidRuntime(8532): FATAL EXCEPTION: main
04-19 12:56:55.929: E/AndroidRuntime(8532): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.test.testing/com.test.testing.TestingActivity}: java.lang.NumberFormatException
04-19 12:56:55.929: E/AndroidRuntime(8532):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1768)
04-19 12:56:55.929: E/AndroidRuntime(8532):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
04-19 12:56:55.929: E/AndroidRuntime(8532):     at android.app.ActivityThread.access$1500(ActivityThread.java:123)
04-19 12:56:55.929: E/AndroidRuntime(8532):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
04-19 12:56:55.929: E/AndroidRuntime(8532):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-19 12:56:55.929: E/AndroidRuntime(8532):     at android.os.Looper.loop(Looper.java:130)
04-19 12:56:55.929: E/AndroidRuntime(8532):     at android.app.ActivityThread.main(ActivityThread.java:3835)
04-19 12:56:55.929: E/AndroidRuntime(8532):     at java.lang.reflect.Method.invokeNative(Native Method)
04-19 12:56:55.929: E/AndroidRuntime(8532):     at java.lang.reflect.Method.invoke(Method.java:507)
04-19 12:56:55.929: E/AndroidRuntime(8532):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
04-19 12:56:55.929: E/AndroidRuntime(8532):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
04-19 12:56:55.929: E/AndroidRuntime(8532):     at dalvik.system.NativeStart.main(Native Method)
04-19 12:56:55.929: E/AndroidRuntime(8532): Caused by: java.lang.NumberFormatException
04-19 12:56:55.929: E/AndroidRuntime(8532):     at org.apache.harmony.luni.util.FloatingPointParser.parseFltImpl(Native Method)
04-19 12:56:55.929: E/AndroidRuntime(8532):     at org.apache.harmony.luni.util.FloatingPointParser.parseFloat(FloatingPointParser.java:321)
04-19 12:56:55.929: E/AndroidRuntime(8532):     at java.lang.Float.parseFloat(Float.java:323)
04-19 12:56:55.929: E/AndroidRuntime(8532):     at com.test.testing.TestingActivity.onCreate(TestingActivity.java:15)
04-19 12:56:55.929: E/AndroidRuntime(8532):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-19 12:56:55.929: E/AndroidRuntime(8532):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722)
04-19 12:56:55.929: E/AndroidRuntime(8532):     ... 11 more 
```

我们看到错误是由以下原因引起的`java.lang.NumberFormatException` ，向下钻取我们看到它来自这里：

```
at com.test.testing.TestingActivity.onCreate(TestingActivity.java:15) 
```

它指向我在第 15 行的 onCreate 方法中的活动。如果我查看第 15 行，我会看到 Float.parseFloat("bacon"); 并找到我的问题。我们不能将培根解析为浮点数（尽管这可能很美味），所以它会引发错误。

# jquery - jQuery div 添加类

> ID：10232788
> 
> 赞同：4
> 
> 时间：2012-04-19T16:43:22.787
> 
> 标签：jquery

我有以下代码将活动类添加到选定的 div：

```
$("div #"+ myID).addClass( "active" ); 
```

这仅在 myID 是一个单词时有效，当 myID 中有空格时，代码损坏，我试图用引号将 myID 包装起来，但不起作用。

很多内容都有空格，因为我不是内容所有者，无法控制更正内容，我只能修改我的代码以处理内容。有没有办法用空格指向 div id？谢谢你。

问题解决了。谢谢你们 ：-）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T16:44:22.713

元素 ID 不应包含空格。

> ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

来自 HTML[规范](http://www.w3.org/TR/html4/types.html#type-id)。

*   [HTML 中 id 属性的有效值是什么？](https://stackoverflow.com/questions/70579/what-are-valid-values-for-the-id-attribute-in-html)

* * *

如果元素 ID 超出您的控制范围，`\\`请在选择器中转义空格：

```
<div id="target element"></div>

$('#target\\ element').doSomething(); // escape invalid chars with \\ 
```

在您的情况下，您必须将 myID 中的空格替换为`'\\ '`

*   [**演示**](http://jsfiddle.net/paislee/Dqn2g/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:40:04.587

```
$("div #"+ myID).addClass( "active" ); 
```

只是上面的代码**无效的**

**HTML5 全局`id`属性：**

id 属性*`id`*为 HTML 元素指定一个唯一性（该值在 HTML 文档中必须是唯一的）。
id 属性最常用于指向样式表中的样式，并由 JavaScript（通过 HTML DOM）以特定的*`id`*.

*   必须以字母 AZ 或 az 开头
*   后面可以跟：字母 (A-Za-z)、数字 (0-9)、连字符 ("-") 和下划线 ("_")
*   在 HTML 中，所有值都不区分大小写。
*   必须至少包含一个字符（不能为空），并且不能包含任何**空格字符**。

**示例：**在 HTML5[中，下面的 id](http://mathiasbynens.be/demo/html5-id)是有效的。

```
<p id="#">Foo.</p>
<p id="##">Bar.</p>
<p id="♥">Baz.</p>
<p id="©">Inga.</p>
<p id="{}">Lorem.</p>
<p id="“‘’”">Ipsum.</p>
<p id="⌘⌥">Dolor.</p>
<p id="{}">Sit.</p>
<p id="[attr=value]">Amet.</p>
<p id="++++++++++[>+++++++>++++++++++>+++>+<<<<-]>++.>+.+++++++..+++.>++.<<+++++++++++++++.>.+++.------.--------.>+.>.">Hello world!</p> 
```

**在 jQuery 中：** jQuery 确实处理任何有效的***ID***名称。我们只需要转义元字符（点、分号、方括号...等）。（就像java脚本有引号问题）。

在 jQuery 中使用*id有以下限制。*

```
// Does not work
 $("#some:id")

 // Works!
 $("#some\\:id")

 // Does not work
 $("#some.id")

 // Works!
 $("#some\\.id") 
```

[请参阅此处](http://docs.jquery.com/Frequently_Asked_Questions#How_do_I_select_an_element_by_an_ID_that_has_characters_used_in_CSS_notation.3F)的参考

# python - 建模有界函数

> ID：10232790
> 
> 赞同：2
> 
> 时间：2012-04-19T16:43:31.867
> 
> 标签：python, math

我正在尝试对**单调**函数建模，该函数由 y_min 和 y_max 值限制，满足该范围内的两个值对 (x0,y0), (x1,y1)。

python中是否有某种包可能有助于解决此类函数的参数？

或者，如果有人知道关于建模这种函数的良好资料或论文，我将非常感激......

（对于任何有兴趣的人，我实际上是在尝试模拟许多买家与产品价格的市场响应曲线，这以零和最大需求为界）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T18:10:17.460

好吧，我仍然不清楚您想要什么，但是该形式的经典功能是[sigmoid](http://mathworld.wolfram.com/SigmoidFunction.html)（例如，它用于神经网络）。以更灵活的形式成为[通用逻辑函数](https://en.wikipedia.org/wiki/Generalised_logistic_function)，它将适合您的 (x,y) 约束和合适的参数。还有类似[的 gompertz 曲线](https://en.wikipedia.org/wiki/Gompertz_curve)。

但是，这些都是在开放域中定义的，我怀疑您的买家数量为负数。如果这是一个问题（您可能不在乎，因为它们非常接近于零），您可以尝试改变买家的数量（采用日志类型的作品，但前提是您可以拥有一小部分买家......）。

# android - Android模式匹配（不匹配）

> ID：10232795
> 
> 赞同：0
> 
> 时间：2012-04-19T16:43:45.157
> 
> 标签：android, regex, spannablestring

我正在尝试在字符串“Search\nPrefix with tag:app: or text:”中匹配“\b\w+:”

代码如下所示：

```
String s = "Search\nPrefix with tag: app: or text:";
SpannableString str = SpannableString.valueOf(s);
Pattern regex = Pattern.compile("\\b\\w+:");
Matcher m = regex.matcher(str);

while(m.find()) {
   // do stuff
} 
```

我在 Eclipse 中使用调试器跟踪代码，并且从未输入过 while 循环，这意味着 m.find() 返回 false。我试图将正则表达式更改为简单明了

```
Pattern regex = Pattern.compile("app:"); 
```

它应该可以工作，对吧？它与字符串中的显式文本相同。但仍然没有匹配。我怀疑匹配器在到达字符串中的换行符时会停止匹配。而且必须有一个标志或其他东西来告诉匹配器扫描整个字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T16:16:31.117

又是我的错。
我简化了代码以在此处显示，但实际上 while 条件是

```
while(m.find() && --count>0) 
```

，而**伯爵**是罪魁祸首。正则表达式没问题。

结论是：“工作累了就睡吧”

# c - 使用 C 中的索引访问枚举

> ID：10232796
> 
> 赞同：5
> 
> 时间：2012-04-19T16:43:53.697
> 
> 标签：c, enums, indexing

考虑：

```
enum Test
{
    a = 3,
    b = 7,
    c = 1
}; 
```

我想使用索引访问枚举。像这样的东西：

```
for (i=0; i<n; i++)
    doSomething((Test)i); 
```

我怎么能做这样的事情，我将能够使用索引访问枚举，尽管枚举的成员具有不同的值？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-19T16:47:32.157

这是你能做的最好的：

```
enum Test { a = 3, b = 7, c = 1, LAST = -1 };
static const enum Test Test_map[] = { a, b, c, LAST };

for (int i = 0; Test_map[i] != LAST; i++)
    doSomething(Test_map[i]); 
```

您必须自己维护映射。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T16:48:17.473

您的问题表明您并不真正了解枚举的用途。

它不是可以索引的东西，也没有任何理由这样做。您定义的实际上只是 3 个名为`a`、`b`和的常量`c`，它们的值分别是`3`、`7`和`1`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-19T16:47:01.233

你不能那样做。AC 枚举只不过是一堆常量。在 C# 或 Java 中可能没有类型安全或反射`enum`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-19T17:48:57.583

正如其他人提到的，这不是枚举的目的。为了做你所要求的，你可以简单地使用一个数组：

```
#define a 3
#define b 7
#define c 1

int array[3] = { a, b, c };
int i;

for( i = 0; i < sizeof(array)/sizeof(array[0]); i++ ) {
    doSomething( array[i] );
} 
```

# apache - 使用 Lucene 进行加权余弦相似度计算

> ID：10232804
> 
> 赞同：0
> 
> 时间：2012-04-19T16:44:23.743
> 
> 标签：apache, lucene

这个问题与使用 Lucene 计算文档之间的 CosineSimilarity 有关

这些文档分别用分类和本体术语进行标记。当我计算文档之间的文档相似度时，我想给那些分类术语和本体术语赋予更高的权重。

当我为文档编制索引时，我在我的程序中为每个文档定义了文档内容、分类和本体术语作为字段。

```
Field ontologyTerm= new Field("fiboterms", fiboTermList[curDocNo], Field.Store.YES, Field.Index.ANALYZED, Field.TermVector.YES);
Field taxonomyTerm = new Field("taxoterms", taxoTermList[curDocNo], Field.Store.YES, Field.Index.ANALYZED, Field.TermVector.YES);
Field document = new Field(docNames[curDocNo], strRdElt, Field.TermVector.YES); 
```

我正在使用 Lucene 索引 .TermFreqVector 函数来计算 TFIDF 值，然后使用 TFIDF 值计算两个文档之间的余弦相似度。

我可以使用 Lucene 的 field.setBoost() 函数在索引之前为字段赋予更高的权重。在看到提升值后，我使用调试器查看分类术语的频率值，但它不会改变术语频率。所以这意味着 setboost() 函数不会对 TermFreVector 或 TFIDF 值产生任何影响？setboost() 函数是否会增加权重并且只能用于文档搜索？

我能做的另一件事是，在计算 TFIDF 分数之前，以编程方式将分类和本体术语频率与定义的权重因子相乘。这会在文档相似度计算中赋予分类学和本体论术语更高的权重吗？

在使用 TermFreqVector 计算 TFIDF 值时，是否有任何其他 Lucene 函数可用于为某些字段赋予更高的权重？或者我可以为此目的使用 setboost() 函数，那么如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:26:25.807

`TermFreqVector`就是这样 - 术语频率。没有重量。它在文档中说“数组中的每个位置都包含该术语在文档或文档字段中出现的次数。”

[从Lucene 的算法](http://lucene.apache.org/core/3_6_0/api/core/index.html)中可以看出，使用 boosts 的方式是一个乘法因子。因此，如果您想复制它，那么是的，这将使您的条款具有更高的权重。

我不确定你的用例是什么，但你可能想考虑只使用 Lucene 的 Scorer 类。然后你就不必处理自己的问题了。

# javascript - 画布绘图 - 当我们有 x 和 y 坐标时，为什么需要 clickDrag.push(dragging)？

> ID：10232808
> 
> 赞同：0
> 
> 时间：2012-04-19T16:44:31.420
> 
> 标签：javascript, jquery, html5-canvas

我在寻找画布绘图时遇到了以下代码。[http://www.williammalone.com/articles/create-html5-canvas-javascript-drawing-app/](http://www.williammalone.com/articles/create-html5-canvas-javascript-drawing-app/)

```
$('#canvas').mousedown(function(e){
     var mouseX = e.pageX - this.offsetLeft;
     var mouseY = e.pageY - this.offsetTop;

     paint = true;
     addClick(e.pageX - this.offsetLeft, e.pageY - this.offsetTop);
     redraw();
   });

var clickX = new Array();
var clickY = new Array();
var clickDrag = new Array();
var paint;

function addClick(x, y, dragging)
{
  clickX.push(x);
  clickY.push(y);
  clickDrag.push(dragging);
}
function redraw(){
  canvas.width = canvas.width; // Clears the canvas

  context.strokeStyle = "#df4b26";
  context.lineJoin = "round";
  context.lineWidth = 5;

  for(var i=0; i < clickX.length; i++)
  {     
    context.beginPath();
    if(clickDrag[i] && i){
      context.moveTo(clickX[i-1], clickY[i-1]);
     }else{
       context.moveTo(clickX[i]-1, clickY[i]);
     }
     context.lineTo(clickX[i], clickY[i]);
     context.closePath();
     context.stroke();
  }
} 
```

当 mousedown() 事件触发时 addClick() 函数通过传递 x 和 y 值来调用。（x 和 y 坐标）。**没有**传递**var 拖动**的值。

然后在测试条件的地方调用 redraw() `if(clickDrag[i] && i){..}`。

我的问题是

1) clikDrag[] 数组如何获取值以及当我们有 x 和 y 坐标时为什么需要它。

2）下面的代码实际上做了什么？之间的区别`clickX[i-1] and clickX[i]-1`

```
if(clickDrag[i] && i){
          context.moveTo(clickX[i-1], clickY[i-1]);
         }else{
           context.moveTo(clickX[i]-1, clickY[i]);
         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T02:43:52.210

1）据我所知，不是。“clickDrag”正在添加第三个参数，但只给出了 2 个。

```
// two params passed
addClick(e.pageX - this.offsetLeft, e.pageY - this.offsetTop);

function addClick(x, y, dragging) {
    ...
    clickDrag.push(dragging);
} 
```

我猜 addClick 函数也在其他地方被调用，这个参数

2）我的猜测是 clickDrag 正在存储用户是否正在拖动。因此，如果拖动，则移动到下一个鼠标位置（clickX[i-1] 引用数组中的鼠标单击位置，因此是 -1（数组从 0 开始））

如果不拖动，代码会从数组索引 i 的结果中说 -1。我不知道这个电话的上下文，所以不能帮助你，对不起。

编辑 - - - - - - -

所以我下载了源代码，找不到您在第二个问题中引用的代码。不过，我发现了这个：

```
 context.beginPath();
    if(clickDrag[i] && i){
        context.moveTo(clickX[i-1], clickY[i-1]);
    }else{
        context.moveTo(clickX[i], clickY[i]);
    }
    context.lineTo(clickX[i], clickY[i]);
    context.closePath(); 
```

您是否可能不小心添加了-1？

# jquery-mobile - 向 DOM 添加元素后如何调整 jQuery Mobile 页面的大小？

> ID：10232809
> 
> 赞同：2
> 
> 时间：2012-04-19T16:44:34.010
> 
> 标签：jquery-mobile, footer, dom-manipulation

我有一个带有固定页脚的 jQuery Mobile (1.0.1) 页面：

```
<footer data-role="footer" data-position="fixed">
    <a href="#">Click Me!</a>
</footer> 
```

当我向 DOM 添加元素时，页脚栏（显然不应该移动）从屏幕底部滚动 - 根据添加到 DOM 的元素的高度。在（灰色）页面的前一个末端和页脚栏的新位置之间也有白色背景。

如果我向下滚动并向后滚动，则格式会更正。

我使用的是 Chrome，但它也出现在 Mobile Safari 和 IE 中。

将元素添加到 DOM 的代码是：

```
$("footer a").click(function () {
    $("div[data-role='content']").append($("<button>Button A</button>"), $("<button>Button B</button>"), $("<button>Button C</button>"), $("<button>Button D</button>"));

    $("div[data-role='content']").trigger("create");
}); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:48:39.907

您是否尝试过调用 JQM updatelayout 事件？

有关更多信息，请参阅此[页面。](http://jquerymobile.com/test/docs/api/events.html)

尝试这样的事情：

```
$("div[data-role='content']").trigger("create").trigger( 'updatelayout' ); 
```

# jquery - Jquery 类别 abd 子类别嵌套下拉

> ID：10232810
> 
> 赞同：0
> 
> 时间：2012-04-19T16:44:36.967
> 
> 标签：jquery

我在 Asp.Net MVC3 中有 2 个下拉菜单。

1.  控制器提供类别列表，我正在使用 Jquery Ajax 调用控制器类别方法并在下拉列表中填充类别列表。

2.  控制器提供子类别列表，我正在使用 Jquery Ajax 调用控制器子类别方法并在下拉列表中填充子类别列表。

如何使用 jquery 根据所选类别填充 su7bcategories ？任何帮助，将不胜感激。

如果有任何其他替代选项可以执行此任务，还建议我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:49:06.863

将 onchange 事件附加到类别并将选定的类别索引发送到服务器。服务器方法应填写其他下拉列表中的子类别

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:18:32.490

```
<table>
    <tr>
        <td>Category
        </td>
        <td>
            <select id="Category"></select>
        </td>
    </tr>
    <tr>
        <td>Subcategory
        </td>
        <td>
            <select id="SubCategory"></select>
        </td>
    </tr>
</table>

<script type="text/javascript">
    $(document).ready(function () {
        $.ajax({
            url: '/ControllerName/GetAllCategory', type: 'Get', dataType: 'json',
            success: function (data) {
                var categoryObj = $('#Category');
                categoryObj.empty();
                $.each(data, function (i, entity) {
                    categoryObj.append('<option value="' + entity.Id + '">' + entity.Name + '</option>');
                });
            }
        });

        $('#Category').change(function () {
            $('#SubCategory').empty();
            if ($(this).val() != null && $(this).val() != 0) {
                $.ajax({
                    url: '/ControllerName/GetAllSubCategory', type: 'Get', dataType: 'json',
                    data: { CategoryId: $(this).val() },
                    success: function (data) {
                        var subCategoryObj = $('#SubCategory');
                        //subCategoryObj.empty();
                        $.each(data, function (i, entity) {
                            subCategoryObj.append('<option value="' + entity.Id + '">' + entity.Name + '</option>');
                        });
                    }
                });
            }
        });
    });
</script> 
```

# javascript - 非法调用错误

> ID：10232811
> 
> 赞同：0
> 
> 时间：2012-04-19T16:44:37.713
> 
> 标签：javascript, jquery, post, live

我的脚本页面中只有一个函数，它给了我这个错误：Uncaught TypeError: Illegal invocation。老实说，我以前从未见过这个错误，而且我在网上找到的其他案例似乎都不适用于我。我的 jquery 在下面，我认为不需要任何其他部分，但请告诉我，我可以发布其他部分。

```
$(document).ready(function () {
    /*----UPDATE BOX REQUEST----*/
    $(".boxesChange").live("click", function () {
        entry = $(this).closest("tr");
        delivered = $(entry).find("#delivered");
        if ((delivered).is(":checked")) {
            deliveredBoolean = "1";
        } else {
            deliveredBoolean = "0";
        }
        boxesDelivered = $(entry).find("#boxesDelivered").val();
        bubbleWrapDelivered = $(entry).find("#bubbleWrapDelivered").val();
        supplyRequestId = $(entry).find(".boxesSupplyRequestId").val();

        $.post('boxesChange.php', {
            'delivered': delivered,
            'boxesDelivered': boxesDelivered,
            'bubbleWrapDelivered': bubbleWrapDelivered,
            'supplyRequestId': supplyRequestId
        }, function (response) {
            $(this).closest(".boxesScheduleEntry").css("background-color", "#ccffcc");
        });
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:05:30.283

我认为错误在这部分内部：

```
function (response) {
  $(this).closest(".boxesScheduleEntry").css("background-color", "#ccffcc");
} 
```

在这里，我认为`this`当您使用最接近获取“tr”元素时，您希望与上述相同。但这里`this`是 $.post imho 的上下文。

您要么需要绑定，要么`var boxChange = $(this),`在事件处理函数的顶部执行，然后使用缓存的引用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:15:12.523

问题出在您的`$.post`电话中。您正在尝试设置`'delivered'`为`delivered`，这是一个 jQuery 对象，我假设您的意思是`deliveredBoolean`.

另外，在回调函数`this`中并不是你想的那样，它是 jqXHR 对象，而不是元素。

```
var $this = $(this);
$.post(
        'boxesChange.php', 
        {
            'delivered': deliveredBoolean,
            'boxesDelivered': boxesDelivered,
            'bubbleWrapDelivered': bubbleWrapDelivered,
            'supplyRequestId': supplyRequestId
        },
        function (response) {
            $this.closest(".boxesScheduleEntry").css("background-color", "#ccffcc");
        }
); 
```

# iphone - UIWebView 接受普通的 NSString，但不接受来自对象的 NSString

> ID：10232813
> 
> 赞同：1
> 
> 时间：2012-04-19T16:44:43.707
> 
> 标签：iphone, xcode, webview

所以我有一个名为“theList”的对象，它包含大量关于学生的信息，其中一个元素是他们在线作品图像的 url。我正在使用 webview 使用代码显示该图像：

```
 NSString *urlAddress2 = theList.imageofwork; 
    NSURL *url2 = [NSURL URLWithString:urlAddress2]; 
    NSURLRequest *requestObj2 = [NSURLRequest requestWithURL:url2]; 
    [workWeb loadRequest:requestObj2]; 
```

这不起作用，但是当我将 'theList.imageofwork' （其中包含 'http://google.com' 我应该说，在我测试这个时）更改为 '@"http://google.com"' 时，它绝对有效美好的。

虽然我需要这个能够从“theList”中绘制，因为视图是一般的，并且应该根据您选择的学生而改变。所以我的问题是我做错了什么还是我应该以其他方式显示图像？

此外，在 theList.h 中，imageofwork 声明为：

```
@property (nonatomic, retain) NSString *imageofwork; 
```

在 theList.m 我有：

```
@synthesize imageofwork; 
```

我还应该提到我对 xcode 比较陌生，这是我在这里的第一篇文章！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:50:42.737

您应该更仔细地阅读[UIWebView类的文档。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)

这是您应该需要的：[loadHTMLString:baseURL:](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html#//apple_ref/occ/instm/UIWebView/loadHTMLString%3abaseURL%3a)

# numbers - 如何确定在任何编程语言中必须使用的数据类型？

> ID：10232819
> 
> 赞同：1
> 
> 时间：2012-04-19T16:45:00.580
> 
> 标签：numbers, type-conversion

我的英语不好，所以我为此道歉。

我对 java 和 C++ 的经验很少。但有一个问题。我只对整数使用整数，对十进制数使用双精度。有很多类型，如 float、long int 等。有没有特定的方法来决定我必须使用什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T18:49:53.277

You must check first for the type of data you want to store with the reference of data types provided in that programming language. Then very important you must check for the range of that data type...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:50:04.637

它完全取决于数据的大小，当然还有它的类型。例如，如果您有一个非常大的数字，无法适应机器字的大小（通常映射到 int[eger] 类型），那么您会选择`long`，依此类推。

对于一个小数字，我会选择`char`（因为它在 C/C++ 中占用一个字节），或者`short`如果数字大于 255 但小于 65535，等等。

而所有这些又取决于编程语言。

请务必检查您的编程语言参考以了解限制。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T16:57:51.460

不同的数值数据类型用于不同的值范围。什么范围适用于什么数据类型取决于您使用的语言和编译/运行程序的操作系统。

例如，`byte`数据类型使用 1 字节的存储空间，可以存储 0 到 255 的数字。 `word`数据类型通常使用 2 字节的存储空间，可以存储 0 到 65,536 的数字。然后你得到`int`- 这里的字节数不同，但通常是 4 个字节，值为 -2^31 到 2^31-1 - 依此类推。在 C/C++ 中还有限定符`signed`and `unsigned`，它们在 Java 中不存在。

使用`float`/ `double`，不仅数字的范围，而且精度（可以存储的小数位数）将是决定因素之一。与`double`相比，您可以存储更多的小数位`single`。

总体而言，决定将基于您需要在其中存储哪些数据、您愿意分配多少内存以及您在哪个平台上运行。查看您的语言文档以获取更多详细信息。例如，[此页面](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)描述[了 java 中的原始数据类型](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)。

# android - Android OpenGL ES 不使用 TRIANGLES 显示我的三角形状

> ID：10232820
> 
> 赞同：-1
> 
> 时间：2012-04-19T16:45:06.250
> 
> 标签：android, opengl-es

我想在 Android 设备上使用 OpenGL ES 来显示不同的形状。问题是我的代码甚至不适用于像矩形这样的简单形状（我将在下面使用）。

我认为 somthing 有问题`glTranslatef`。我已经调整了所有值，但我无法弄清楚它是什么。

矩形由点定义`P(0,0,0), P(0,1,0), P(1,1,0), P(1,0,0)`。在`Activity`我实现了`GLSurfaceView.Renderer`这样的：

```
private static FloatBuffer getVertexCoords() {
    float coords[] = {
        0f, 0f, 0f, // first triangle first point
        0f, 1f, 0f, // first triangle second point
        1f, 1f, 0f, // first triangle third point
        1f, 1f, 0f, // second triangle first point
        1f, 0f, 0f, // second triangle second point
        0f, 0f, 0f, // second triangle third point                
        }
    ByteBuffer vbb = ByteBuffer.allocateDirect(coords.length * 4); // n coords * 4 bytes per float
    vbb.order(ByteOrder.nativeOrder());
    FloatBuffer trianglesVB = vbb.asFloatBuffer();
    trianglesVB.put(coords);
    trianglesVB.position(0);
    return trianglesVB;
}

@Override
public void onDrawFrame(GL10 gl) {
   gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
   gl.glMatrixMode(GL10.GL_MODELVIEW);
   gl.glLoadIdentity();
   gl.glTranslatef(0f, 0f, -4f);
   gl.glEnableClientState(GL10.GL_VERTEX_ARRAY); // glBegin
   gl.glColor4f(1.0f, 0.0f, 0.0f, 1.0f);
   gl.glVertexPointer(3, GL10.GL_FLOAT, 0, getVertexCoords());
   gl.glDrawArrays(GL10.GL_TRIANGLES, 0, 2 * 3 * 3); // triangles * points * coords
   gl.glDisableClientState(GL10.GL_VERTEX_ARRAY); // glEnd
   int error = gl.glGetError();
   if (error != GL10.GL_NO_ERROR) {
       Log.e(TAG, "OpenGL ES Error: " + error);
   }
}

@Override
public void onSurfaceChanged(GL10 gl, int width, int height) {
    // think this one doesn't matter
}

@Override
public void onSurfaceCreated(GL10 gl, EGLConfig config) {
    gl.glClearColor(1.0f, 1.0f, 1.0f, 1.0f);    // white background
    gl.glFrontFace(GL10.GL_CW);         // front face is clockwise

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:40:57.510

我认为你需要一个投影矩阵。如果您不设置一个，那么您将直接在标准化设备坐标中绘制，其中唯一有效的 z 值是从（-1 到 1）。

只是您的三角形超出了显示的深度范围。

尝试向 onSurfaceCreated 添加一个简单的投影矩阵：

```
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glOrtho(-10, 10, -10, 10, 0, 10); 
```

# objective-c - 列表按钮功能

> ID：10232823
> 
> 赞同：0
> 
> 时间：2012-04-19T16:45:10.157
> 
> 标签：objective-c, xcode, ios5

我在屏幕中搜索符号的函数名称

[http://jesperbylund.com/wp-content/uploads//2012/01/image-2.png](http://jesperbylund.com/wp-content/uploads//2012/01/image-2.png)导航栏中的图标。

您如何在 de Path 应用程序中调用该图标及其功能？一种导航？（见屏幕）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:50:06.317

我会说 menuIcon 和 menuPanel。

我认为这种导航系统还没有合适的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:53:54.160

我想这是一个`UIBarButtonItem`使用`appearance`方法来设置按钮的背景图像。

至于它叫什么，嗯，你可以随便叫它——菜单按钮？

# python - 使用 redis-py 更改 PubSub 订阅

> ID：10232824
> 
> 赞同：3
> 
> 时间：2012-04-19T16:45:13.260
> 
> 标签：python, redis, socket.io, publish-subscribe, gevent

我有一个实时 web 应用程序，客户端从多个 Redis PubSub 频道接收更新，这些频道使用 gevent-socketio 和 redis-py 构建。

我正在查看[django-tictactoe](https://github.com/sontek/django-tictactoe)示例中的[views.py, l.26 。](https://github.com/sontek/django-tictactoe/blob/master/tictactoe/apps/core/views.py#L26)当客户端为频道发送订阅消息时，它会生成一个新的 greenlet。然后，greenlet 订阅 Redis PubSub 频道并阻塞，直到收到消息。

```
class GameNamespace(BaseNamespace):
    def listener(self, chan):
            red = redis.StrictRedis(REDIS_HOST)
            red = red.pubsub()
            red.subscribe(chan)

            print 'subscribed on chan ', chan

            while True:
                for i in red.listen():
                    self.send({'message': i}, json=True)

    def recv_message(self, message):
        action, pk = message.split(':')

        if action == 'subscribe':
            Greenlet.spawn(self.listener, pk) 
```

据我了解，如果不产生新的 Greenlets 或取消订阅，就不可能添加订阅。

您将如何以有效的方式处理频繁的订阅和取消订阅？

**更新：**我正在构建的是一个理论上无限的 2D 地图上的 HTML5 实时 MMO 游戏。由于地图的大小，无法将整个地图的状态发送到浏览器。因此，地图被划分为在玩家拖动地图时动态加载的图块（想想谷歌地图）。

每当拖动地图时，客户端/浏览器都会订阅刚刚变得可见的图块的更新，并在短暂延迟后取消订阅变得不可见的图块的更新。订阅的更改应该每名玩家每秒发生一次，所以*频繁*是相对的。

客户的数量（希望）会很大。理论上，所有玩家都可以查看地图的同一部分，这使得[SUBSCRIBE](http://redis.io/commands/subscribe)和[UNSUBSCRIBE](http://redis.io/commands/unsubscribe)非常昂贵，因为它们是“ `O(N) where N is the number of clients already subscribed to a channel`”。在实践中，它会均匀分布在世界各地，所以这应该不是问题。

但是，**我的主要问题是 Python Redis PubSub 实现在监听时阻塞。**在上面的示例中调用 red.listen() 后，在消息到达之前，我无法再更改订阅。上面的示例代码启动了一个新的 Greenlet，每个订阅都有一个到 Redis 的新连接，这可能是个坏主意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T21:45:47.557

您没有说明订阅之间的分区原理/要求是什么，即哪些信息流经订阅必须与其他订阅分开，因此很难明确回答。我会带着一些假设去......

如果您有少量或固定数量的客户端管理多个订阅，最好通过单个长期订阅多路复用多个不同的事件，该 Redis 客户端对最终的事件消费者进行多路复用。从 Redis 的角度来看，这种方法可能比为每个消费者重复设置和取消订阅更有效。

像这样的方案需要发布者方面的一些额外智能，以便他们可以为每条消息选择正确的队列，但这有时很容易实现，例如通过散列客户端 ID 模 N，其中 N 是 pub/ 的数量子队列。

我希望这与您所问的有关...

# performance - 由于缓存问题，在程序中跳来跳去是否会损害性能

> ID：10232825
> 
> 赞同：4
> 
> 时间：2012-04-19T16:45:20.107
> 
> 标签：performance, caching

我知道有内存缓存，因此使用内存中许多不同点的值会导致缓存未命中并损害性能。当一个程序被执行时，它是否真的以类似于 L1 缓存的小块从内存加载到 CPU 中？我问是因为大概然后频繁地在内存中跳跃会导致此缓存未命中并损害性能。所以我想这是两个问题：是否有这样的“执行缓存”并且经常跳来跳去会损害性能。

PS 不确定除了性能和缓存之外还有什么合适的标签。

PPS 一个示例情况可能是一个包含大量嵌套`if`s 和`else`s 的紧密循环，其中每个 if 和 else 嵌套底部的最终结果只是少量代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:49:54.320

是的。这个缓存称为指令缓存。用尽它会对性能产生严重影响。这就是内联函数并不总是有益的原因。内联函数会更快，但臃肿的代码大小可能会将热路径赶出 I-cache。

Linux 内核开发者邮件列表对此主题进行了有趣的讨论。

# c# - Linq to XML，为特定表单的每个不同元素创建一个新的自定义类

> ID：10232828
> 
> 赞同：-2
> 
> 时间：2012-04-19T16:45:23.090
> 
> 标签：c#, xml, linq, xml-parsing, linq-to-xml

我有一个奇怪的问题。我无法以任何方式修改我需要使用的 XML（这导致了我的问题）。我正在处理的 XML 采用以下形式：

```
<DocumentRoot>
   <Parent>
      <ClassAttribute> Value </ClassAttribute>
      <ClassName> More Attributes </ClassName> <!--Can occur a varying number of times.-->
   </Parent>
   <Parent>
      <ClassAttribute> Value </ClassAttribute>
      <ClassName> More Attributes </ClassName>
      <ClassName> More Attributes </ClassName>
   </Parent>
</DocumentRoot> 
```

我想做的是提取此信息，并使用它来实例化一个自定义类 CustomClassName，然后将其添加到 a`List<CustomClassName>`中，其中 XML 文档中的每个**不同** `<ClassName>`元素（不是值）用于创建一个新的 CustomClassName以下表格：

```
public class CustomClassName {
   public string ClassName; //gotten from the ClassName element (NOT the value)
   public List<string> classAttributes //gotten from the value inside the ClassAttribute element
   public List<string> moreAttributes //gotten from the value inside the ClassName element

} 
```

我希望我已经清楚地解释了我的愿望，如果没有，请戳我以获取更多信息。

是否有可能做到这一点 ？

编辑 ：

对于每个“不同的”ClassName 元素，我的意思是元素 ClassName 将在 XML 文档中出现多次，尽管如此，我希望只用其相关属性（ClassAttribute 元素的值）实例化一个 ClassName 类，并且不同的 ClassName 元素的值被“附加”到实例化类中属性的末尾。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:51:34.500

试试这个

```
from n in doc.Root.Elements("Parent") select 
{
ClassName = n.Element("ClassName").First().Attribute("ATTRNAME").Value,
classAttributes = from a in n.Elements("ClassAttribute") select a.Value,
moreAttributes  = from a in n.Elements("ClassName") select a.Value
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T17:27:07.120

```
XElement root = XElement.Load(file); // or .Parse(string)
List<CustomClassName> list = root.Descendants("ClassName").Select(x =>
new CustomClassName()
{
    ClassName = x.Name.LocalName, // is the name, not the value    
    classAttributes = x.Parent.Element("ClassAttribute").Value, // Value is a string, not a list, you'll have to do the conversion.
    moreAttributes = x.Value // is the value, but Value is a string, not a list, you'll have to do the conversion.
})
.ToList(); 
```

这没有多大意义，为什么要将`<ClassName>`元素名称中的字符串“ClassName”分配给自定义类中的 ClassName 变量。但是没有更多的xml，就不可能理解更多了。

我希望这对你有帮助。诀窍是`Descendants("ClassName")`然后每个节点`Parent.Element("ClassAttribute")`都获取其属性。

# eclipse - 需要知道在 Eclipse 中不使用鼠标进行导航的键盘快捷键

> ID：10232832
> 
> 赞同：0
> 
> 时间：2012-04-19T16:45:29.610
> 
> 标签：eclipse, keyboard, shortcut

我将按住`Ctrl`并单击构建路径中的类名称以导航到该类。

请帮助我在不使用鼠标单击的情况下找到键盘快捷键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:59:24.400

导航到类（或变量声明）的键盘快捷键是`F3`.

有关更多有用的快捷方式，请参阅[本文](http://www.vogella.com/articles/EclipseShortcuts/article.html)（或者只是谷歌有关 eclipse 快捷方式的另一页）

# java - 通过 MATLAB 读取网站内容

> ID：10232835
> 
> 赞同：0
> 
> 时间：2012-04-19T16:45:33.883
> 
> 标签：java, matlab

我需要通过 MATLAB 阅读网站的内容，但问题是当我将网站加载为：

```
URL = java.net.URL(UrlNew);
urlConnection = URL.openConnection();
urlConnection.connect();
str = regexprep(fileread(filename),'\s*',' '); 
```

该网站将我重定向到我必须首先按下“我同意”按钮的页面，然后它转到请求的页面。

如何在 MATLAB 中处理这种情况。我需要以某种方式单击 MATLAB 中的“同意”按钮才能访问原始网页。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T04:01:08.847

首先，您需要找出`action`原始页面上表单属性的值。您可以通过检查页面的源代码、查找包含“同意”按钮的表单标记，或者手动单击该按钮并查看 Chrome 开发人员工具中的网络活动选项卡或 Firefox 中的 Firebug 来执行此操作。

找到这个后，了解如何在 Java 中发送 POST 请求，并通过向表单的操作 URL 发送 POST 请求来模拟按钮的单击。如果您在那之后从套接字收集输出，它应该对应于您想要的页面。

# azure - Azure 诊断 - 单击浏览按钮时引发异常

> ID：10232836
> 
> 赞同：0
> 
> 时间：2012-04-19T16:45:37.017
> 
> 标签：azure, azure-diagnostics

我正在尝试将诊断记录到存储帐户中。

抛出错误 ![在此处输入图像描述](../Images/51049bc3b72812d5b79e025ac9c8b227.png)

没发生什么事。没有对话框。 ![在此处输入图像描述](../Images/83212b1f9e6ca0391c08491f9e1bef9b.png)

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T18:17:06.590

听起来安装 Azure SDK 时出现问题。您以前是否使用过它并且它刚刚开始发生，或者这是您第一次尝试这样做？

我会说卸载/重新安装 SDK 和 Azure VS 工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T07:41:23.427

我想建议你检查你的 csdef 和 cscfg 文件。如果您可以看到任何无效配置，它们可能会导致 Visual Studio UI 出现问题。此外，我们在 Visual Studio UI 中所做的一切也可以通过手动编辑 csdef/cscfg 文件来完成。因此，如果您无法在 Visual Studio 中使用此特定功能，您也可以手动修改连接字符串。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/windowsazure/ee758697.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee758697.aspx)。

最好的祝福，

明旭。

# .net - 为什么当我将它的数据源设置为我的数据集时，我的数据网格视图只显示空白行

> ID：10232847
> 
> 赞同：1
> 
> 时间：2012-04-19T16:46:20.810
> 
> 标签：.net, winforms

我对将 datagridviews 绑定到数据集是全新的。我创建了一个数据集，并且（我认为）用来自 sql server 数据库的表填充了它。但是，当我尝试填充 datagridview 时，它只显示一个空白的 7 列表，其中包含 Column1、Column2 等列标题。我确定我错过了一些愚蠢的东西，但不知道从哪里开始看。有人看到有什么问题吗？

*   值得一提的是：sql server 上的表不是空白的。

*   添加 initializeComponent 并**不能解决**它，就像在这篇文章中[DataGridView Rows Empty when set to DataSet](https://stackoverflow.com/questions/8801637/datagridview-rows-empty-when-set-to-dataset)

**编辑** 似乎我的数据集没有被填满。Dataset1.tables(0) 中没有行。从 GUI 看起来有一个叫做 AverageWeeklyLabsTableAdapter 的东西（见下图）。我想我假设数据集像 LINQ to SQL 一样工作，其中对象只是自动填充数据，但也许您需要调用代码来填充数据集？

加载事件...

```
 Dim myBindingSource As BindingSource = New BindingSource
    myBindingSource.DataSource = DataSet1.Tables(0) //has no rows
    DataGridView1.DataSource = myBindingSource
    DataGridView1.ReadOnly = True 
```

数据集

![在此处输入图像描述](../Images/14c06da41af6eaabc13f935483b92426.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:52:58.140

当我将数据加载到 a`datagridview`时，我使用 a`BindingSource`但从您有限的代码来看，您似乎并没有这样做。

因此，您将`DataSet`使用表格数据填充您的数据，然后使用您的数据加载您`BindingSource`的数据，类似于此（为简洁起见，代码缩短）：

```
dataAdapter.Fill(table); 
bindingSource1.DataSource = table;
datagridview1.DataSource = bindingSource1; 
```

根据您的编辑，您似乎并未实际填充数据。您必须使用来自表适配器的填充来从数据库中获取数据。此外，.net 将期望数据表的特定对象类型（基于数据集）有点像这样：

```
var adapter = new AverageWeeklyLabsTableAdapter();
var dataTable = new myForm.DataSet1.AverageWeeklyLabsDataTable
adapter.Fill(dataTable);
bindingSource1.DataSource = dataTable;
datagridview1.DataSource = bindingSource1; 
```

这是关于表格适配器的另一个问题：

[C# 表适配器实际返回什么？](https://stackoverflow.com/questions/3054777/what-do-c-sharp-table-adapters-actually-return)

# javascript - 用于创建类似界面的思维导图的 JS 库

> ID：10232850
> 
> 赞同：24
> 
> 时间：2012-04-19T16:46:38.790
> 
> 标签：javascript

我必须创建一个类似于[http://www.madeiracloud.com](http://www.madeiracloud.com)提供的用于绘制网络架构的界面（用于与他们所做的不同的目的）。

基本上，用户应该能够将元素拖放到画布上并使用方向箭头连接它们。

我应该为此使用什么库？我在看 d3、raphael 和 ocanvas。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-19T16:53:39.723

Raphaël ( [http://raphaeljs.com/](http://raphaeljs.com/) ) 结合 Dracula 图形库 ( [http://dracula.ameisenbar.de/](http://dracula.ameisenbar.de/) ) 将帮助您入门。

而且 thejit 也很完美：

多树 JavaScript InfoVis Toolkit 提供了用于为 Web 创建交互式数据可视化的工具。

[http://thejit.org/](http://thejit.org/)

**编辑：**

你也可以看看 Processing.js

[http://processingjs.org/](http://processingjs.org/)

Processing.js 是流行的 Processing 可视化编程语言的姊妹项目，专为 Web 设计。Processing.js 使您的数据可视化、数字艺术、交互式动画、教育图表、视频游戏等使用 Web 标准工作，无需任何插件。您使用 Processing 语言编写代码，将其包含在您的网页中，其余的由 Processing.js 完成。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-06T07:39:25.123

你应该看看内部使用[Raphael.js的](http://raphaeljs.com/)[MindMap](https://github.com/kennethkufluk/js-mindmap)项目。

[您可以在http://kenneth.kufluk.com/google/js-mindmap/](http://kenneth.kufluk.com/google/js-mindmap/)找到演示

![在此处输入图像描述](../Images/3ca5026342dfb4e9e4e73a8e360654be.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-09T18:04:02.823

在商业环境中，您还应该看看[yFiles for HTML](http://www.yworks.com/yfileshtml)必须提供什么。

这是一个通用的图形绘制和编辑 JavaScript 库，可以轻松解决您的“拖放和连接”用例。网上还有一个特定的[思维导图示例：](http://live.yworks.com/demobrowser/#Mindmaps)

[![思维导图Demo应用截图](../Images/62c781ea083c05ca9c716eeb4ccbd8ec.png)](https://i.stack.imgur.com/lYMRP.png)

但在此应用程序中，节点不是通过拖放创建的。然而，这当然也是可能的，正如可以在[这个在线演示](http://live.yworks.com/demobrowser/#Business-Process-Models)中看到的那样。

该库的特定优势是节点和连接的自动布局/排列，因此如果您要创建更大的网络或从外部数据源自动填充图形，这些会非常方便。但是，如果您不需要此功能集，当然也可以使用更简单的解决方案。请注意，d3 的重点是*查看*数据，而不是用户交互和交互式创建图形。

^(免责声明：我为创建该库的公司工作，但我不代表我的雇主。我的评论是我自己的。)

# facebook-fql - fql 查询限制？

> ID：10232854
> 
> 赞同：0
> 
> 时间：2012-04-19T16:46:53.083
> 
> 标签：facebook-fql, fql.multiquery

用户/网站对 fql 多查询 facebook 的每日限制是多少？我正在建立一个网站，每次登录时都会为用户查询大量 Facebook 数据？我想知道我们的网站可以做到多少次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:50:41.123

有一个类似的线程在这里讨论这个问题：

[调用 FQL 时达到 Facebook 应用程序限制](https://stackoverflow.com/questions/8759562/facebook-application-limit-reached-when-calling-fql)

希望这会帮助你。

# java - 错误：解析 XML 时出错：格式不正确（令牌无效）？

> ID：10232855
> 
> 赞同：0
> 
> 时间：2012-04-19T16:46:55.607
> 
> 标签：java, xml, eclipse

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<EditText
    android:id="@+id/etNum"
    android:layout_width="wrap_content"
    android:layout_height="102dp"
    android:hint="@string/Please enter a department number." 
    android:inputType="number"
    />

    <EditText
    android:id="@+id/etName"
    android:layout_width="wrap_content"
    android:layout_height="102dp"
    android:hint="@string/Or enter a department name." 
    android:inputType="string"
    />

<Button
    android:id="@+id/btnSearch"
    android:layout_width="fill_parent"
    android:layout_height="70dp"
    android:text="@string/Search" />

<TextView
    android:id="@+id/tvDisplay"
    android:layout_width="match_parent"
    android:layout_height="0dip"
    android:layout_weight="0.19" />

</LinearLayout> 
```

在第二个 EditText 的最后，我收到一个错误：解析 XML 时出错：格式不正确（无效令牌）。我不确定是什么原因造成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:55:44.473

基本上，EditText inputtype 用于设置 EditText 中的输入类型。

android:inputtype 的可能值为：

```
text
textCapCharacters
textCapWords
textCapSentences
textAutoCorrect
textAutoComplete
textMultiLine
textImeMultiLine
textNoSuggestions
textUri
textEmailAddress
textEmailSubject
textShortMessage
textLongMessage
textPersonName
textPostalAddress
textPassword
textVisiblePassword
textWebEditText
textFilter
textPhonetic
number
numberSigned
numberDecimal
phone
datetime
date
time 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T18:35:54.577

此行给出错误：android:inputType="string"

将输入类型从字符串更改为文本。错误：不允许使用字符串类型（在“inputType”处，值为“string”）。

# windows-phone-7 - 为什么 TextBlock 没有在画布中显示 Projection 属性？

> ID：10232856
> 
> 赞同：0
> 
> 时间：2012-04-19T16:46:55.747
> 
> 标签：windows-phone-7, textblock, projection

我得到了这段代码：

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
    <Canvas>
        <TextBlock Name="txtblk"
                   Canvas.Left="100" Canvas.Top="100"
                   Text="ROTATE">
        </TextBlock>
    </Canvas>
</Grid> 
```

它运行良好，我可以看到我的 TextBlock。但是如果我向它添加一个“投影”属性：

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
    <Canvas>
        <TextBlock Name="txtblk"
                   Canvas.Left="100" Canvas.Top="100"
                   Text="ROTATE">
            <TextBlock.Projection>
                <PlaneProjection x:Name="planeProjection"
                                 CenterOfRotationX="0.5" CenterOfRotationY="0.5"
                                 RotationZ="45"/>
            </TextBlock.Projection>
        </TextBlock>
    </Canvas>
</Grid> 
```

TextBlock 刚刚消失了！页面中没有其他控件。

谁能告诉我发生了什么？我真的被困住了。

谢谢！

PS完整的xaml如下：

```
<phone:PhoneApplicationPage 
x:Class="WP7Test.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d" d:DesignWidth="728" d:DesignHeight="480"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
SupportedOrientations="Landscape" Orientation="Landscape"
shell:SystemTray.IsVisible="False">

    <Grid x:Name="LayoutRoot" Background="Transparent">
        <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
            <Canvas>
                <TextBlock Name="txtblk"
                           Canvas.Left="100" Canvas.Top="100"
                           Text="ROTATE">
                    <TextBlock.Projection>
                        <PlaneProjection x:Name="planeProjection"
                                         CenterOfRotationX="0.5"
                                         CenterOfRotationY="0.5"
                                         RotationZ="45"/>
                    </TextBlock.Projection>
                </TextBlock>
            </Canvas>
        </Grid>
    </Grid>
</phone:PhoneApplicationPage> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T02:31:34.170

如果我运行相同事物的 Silverlight 示例[Projection Transforms Sans Math](http://msdn.microsoft.com/en-us/magazine/ee336134.aspx)，则该效果在 Silverlight 中可以正常工作。如果我将该项目中的 XAML 复制并粘贴到手机项目中，则投影会在手机上正确呈现。如果我将您的代码粘贴到 Silverlight 中，它在 Silverlight 中可以正常工作。如果我从您的代码中修剪奇怪的嵌套网格，它仍然可以在 Silverlight 中工作，但在电话上继续失败。如果我`Canvas`从手机版本中删除元素*并*删除`Canvas.Top`和`Canvas.Left`附加属性，那么它可以在手机上运行。

基于这些实验，我认为这看起来像一个错误，如果它不是错误，则在我能找到的任何地方都没有提到限制。

简单的解决方法是将 应用于`Projection`或类似的`StackPanel`UIElement`Viewbox`容器。

这是一个例子：

```
<Grid x:Name="LayoutRoot" Background="Transparent" ShowGridLines="True">
    <Canvas Background="Purple">
        <Viewbox Canvas.Left="100" Canvas.Top="100" >
            <Viewbox.Projection>
                <PlaneProjection x:Name="planeProjection" CenterOfRotationX="0.5" CenterOfRotationY="0.5" RotationZ="45"/>
            </Viewbox.Projection>
            <TextBlock Name="txtblk" Text="ROTATE" FontSize="288"/>
        </Viewbox>
    </Canvas>
</Grid> 
```

# xml - 查询如何在 eXist-db 中实际运行（沙盒与存储查询）

> ID：10232859
> 
> 赞同：1
> 
> 时间：2012-04-19T16:47:04.180
> 
> 标签：xml, xml-parsing, xmlhttprequest, backend, exist-db

我正在使用 eXist-db。执行查询时，eXist-db 的后端有哪些流程？例如，查询在以下场景中的运行方式有何不同？

1.  通过 eXist Sandbox 执行查询时？

2.  通过 REST 接口（即通过 Web 浏览器）执行查询时？

3.  此外，将 CSV 文件转换为位于同一集合中的 XML 文件时，后端会发生什么情况？（即使用[此处](http://en.wikibooks.org/wiki/XQuery/Parsing_CSV)概述的步骤。就我而言，我将 CSV 文件存储在数据库中。以下文件会发生什么情况：

    *   CSV 文件
    *   XQuery 文件
    *   通过 XQuery 转换运行 CSV 文件生成的 XML 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T21:08:39.297

1.  [eXist XQuery Sandbox](http://exist-db.org/exist/sandbox/sandbox.xql)是一个带有文本字段和提交按钮的网页。当您输入查询并提交查询时，文本字段的内容通过 Ajax 发送到服务器上的 sandbox.xql 查询，服务器动态执行查询（使用[util:eval()](http://exist-db.org/exist/functions/util/eval)）。然后将结果序列存储在会话中。结果序列中的前十个项目随后显示在结果窗口中；您可以一次翻阅 10 个结果。通过将结果存储在会话中，对结果进行分页不需要重新提交查询。下次提交查询时，旧结果将被清除，新结果将插入会话中。

2.  当您通过 REST 接口执行查询时（即，通过将 Web 浏览器直接指向存储在数据库中的查询，例如 .xq、.xqy、.xql 或 .xquery 文件）。数据库读取文件并执行查询，直接将所有结果直接返回给浏览器。

请注意，如果您的查询返回多个结果，沙盒不会抱怨，但浏览器确实希望 XML 文档具有良好的格式——即具有单个根元素。将查询从沙盒移动到存储的 .xq 文件时发生的常见错误或误解是忘记将查询结果包装在单个根元素中。

例如，在沙盒中，您可以将其作为查询输入：

```
<x/>, <y/>, <z/> 
```

提交后，您将获得 3 个结果：

1.  `<x/>`
2.  `<y/>`
3.  `<z/>`

但是，如果您将其保存为 .xq 文件（例如 myquery.xq）并通过[http://localhost:8080/exist/rest/db/myquery.xq 调用它](http://localhost:8080/exist/rest/db/myquery.xq)，那么您将在浏览器中收到关于结果格式不正确。解决方案是将结果包装在根元素中，例如：

```
<results><x/><y/><z/></results> 
```

您的最后一个问题有点含糊，但是您看到我对[您之前](https://stackoverflow.com/questions/10118569/how-to-add-csv-data-to-already-available-xml-using-xquery-file-used-in-exist-dat)关于如何运行 CSV 转换的问题的回答了吗？我概述了如何编写查询以获取存储在数据库中的 CSV 文件，将 CSV 文件转换为 XML，并将结果作为 XML 文件保存在数据库中。

# c - 调试时指针分配不起作用

> ID：10232866
> 
> 赞同：1
> 
> 时间：2012-04-19T16:47:32.497
> 
> 标签：c, pointers, null-pointer

我有一个包含两个指针的结构， <head, iterator> 两个指针都指向另一个结构 - Node.js。

```
typedef struct Map_t {

    Node head;
    Node iterator;

} Map_t;

typedef struct Node_t* Node;

struct Node_t {
    MapDataElement Data;
    MapKeyElement Key;

    struct Node_t *next;
};

typedef struct Map_t *Map; 
```

我想让*迭代器指针指向与**head*相同的位置。继承人在运行该行之前和之后的调试：

***行前*** ![在此处输入图像描述](../Images/3fb5e40046a80cca169ef4a4b5581c47.png)

***线后*** ![在此处输入图像描述](../Images/7db2bb657495c2e3668c4e6b519b38e9.png)

如您所见，运行该行之后，map->iterator 仍然指向 0x0.. 这是为什么呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:54:33.723

正如您的第二张图片所证明的那样，指针分配似乎已经发生，它突出显示了对`map->iterator`. 我想该方法运行完成，返回指针`0x9918f0`。

这使我相信您实际上并没有遇到指针分配失败，而只是调试器（Eclipse）显示更新值的失败。这可能是由于 Eclipse 中的错误，也可能是由于 Eclipse 可用的调试信息不​​足。仅凭给出的例子很难说。

# html - 静态 html / 图像的性能基准：lighthttpd 与 Amazon S3？

> ID：10232867
> 
> 赞同：1
> 
> 时间：2012-04-19T16:47:33.643
> 
> 标签：html, amazon-s3, amazon-ec2

我想知道什么解决方案可以为高流量静态网站提供更好的性能：

EC2 实例上的 lighthttpd Web 服务器，还是直接在 Amazon S3 上托管页面？有没有基准？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T22:10:24.710

这是测试和监控方法，试试这个。

在网站上创建负载的工具

*   您可以使用“ab”对站点运行测试。

    ```
     ab is a tool for benchmarking your Apache Hypertext Transfer Protocol (HTTP) server. It is designed to give you an impression of how your current Apache installation performs. This especially shows you how many requests per second your Apache installation is capable of serving. See how to use ab command. 
    ```

衡量绩效的工具

```
 *   httperf is a tool to measure web server performance. It speaks the HTTP protocol both in its HTTP/1.0 and HTTP/1.1 flavors and offers a variety of workload generators.  Following command causes httperf to create a connection to host www.cyberciti.biz send and receive the reply, close the connection, and then print some performance statistics.

   httperf --hog --client=0/1 --server=SITE_NAME --port=80 --uri=/ --send-buffer=4096 --recv-buffer=16384 --num-conns=1 --num-calls=1

 * apachetop --> This is a console-based (non-gui) monitoring tool which reads the server-status pages from one or more Apache servers and combines the information onto one easy monitoring screen. It displays the current number of reads, writes, keepalives etc, plus the overall number of requests/hits processed, the amount of data transferred, the number of requests & data processed per second since the Apache servers were started, and the 'current' per second numbers 
```

# c++ - 逆向工程 C++

> ID：10232871
> 
> 赞同：5
> 
> 时间：2012-04-19T16:47:46.810
> 
> 标签：c++, compiler-construction, reverse-engineering, ida

今天我决定使用 IDA Pro 反编译一个用 Visual C++ 编写的简单“Hello world”程序。

以我以前的知识，我确信我不会在可执行入口点找到对 printf 的立即调用，我是对的。发现很多代码不是我写的，是编译器在编译过程中添加的。

我想更好地了解在编译过程中添加了哪些代码。它有什么作用？有没有什么“技巧”可以快速找到“main”并跳过反汇编生成的所有不必要的代码？

我能找到的最好的是在这篇文章中：http: [//www.codeproject.com/Articles/4210/C-Reverse-Disassembly](http://www.codeproject.com/Articles/4210/C-Reverse-Disassembly)，说使用Visual C++编译的可执行文件的执行顺序如下：

1.  Crtl启动

2.  主要的

3.  CrtlCleanUp

请问我可以得到更详细的答案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T17:10:33.063

您可能会遇到 c++ 标准要求的各种内容。

最重要的是，需要有代码在调用 main 之前处理主翻译单元中任何静态的构造，以及在 main 离开之后处理它们的破坏的函数。此外，该标准需要一个函数，该函数`atexit`允许您注册要在 main 返回后调用的附加函数。

因此，启动代码至少需要能够构建函数的数据结构，这些函数将在从 main 返回时被调用。这是一个动态数据结构，因为它需要由程序添加到运行时，并且调用的顺序与注册相反（因此通常您需要一个可以轻松添加到您步行的地方的数据结构）。

但此外，该标准要求在该翻译单元中执行任何函数之前，在其他翻译单元中创建静态。通常，编译器会简单地安排链接器中的所有内容，以便在 main 之前调用所有内容，但这不是必需的。那些以不同方式做事的编译器需要在其他链接的翻译单元代码中为初始化例程提供 thunk，该代码将在第一次函数调用时调用。

如果您使用任何标准库，这就是相当多的工作。请记住，std::cout 是一个静态对象（静态生命周期，而不是静态链接 - 令人困惑的重载单词 alert）。因此，这意味着建立与您的控制台的通信，该控制台将调用您的平台所需的任何 API。标准中有很多这样的对象。

然后，可能会有特定于您的平台和/或编译器的东西以某种有用的方式准备过程，或解析环境变量，或加载“标准”动态/共享库或类似的东西。

通常，exit 只是遍历该列表并以某种方式将 main 的返回值提供给环境，因为大多数现代操作系统会自行清理，但除此之外可能还有系统特定的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T17:46:04.713

今天的编译器创建了大量的可执行文件，所以即使你找到了入口点，你也需要一段时间来理解并找到你真正需要的部分。

在您使用 hello world 应用程序的情况下，您可以在函数列表对话框中使用 IDA find entry point（我不记得确切的名称）。但同样我不推荐这种方法，除非应用程序非常小。

我使用的方法我称之为“自下而上的方法”（c）

我将从分析应用程序的当前行为开始，而不涉及任何工具。这是非常重要的一步，可以节省大量时间，因为您将知道您在寻找什么以及何时发生。然后确定“弱点”，如字符串、可以使用静态分析工具 (IDA) 找到的常量值。

下一步是反汇编应用程序并查找那些“弱点”（IDA 中的字符串模块），然后从它们使用的函数中找到对它们的引用（您可以在新的 IDA 版本中使用图形层次视图）

如果您仍然无法了解它的工作原理或从许多地方调用此代码，您不知道您需要哪个。您可以从运行时分析开始并使用调试器（softice？:)），如 ollydbg。这将向您展示静态分析中不可见的东西，例如虚函数/函数指针：调用 EAX。

然后你只需一步一步地处理，直到你得到你需要的。

# jquery - 缓慢的 JSON 请求

> ID：10232878
> 
> 赞同：1
> 
> 时间：2012-04-19T16:48:09.790
> 
> 标签：jquery, ajax, json, jquery-mobile, cordova

我正在为带有 phonegap 环境的 IOS 创建一个应用程序。我在我的一个页面上注意到滚动似乎真的很慢而且断断续续。我尝试了以下方法：

*   减少被拉取的数据量。我把它归结为只是拉入图像。但是，即使在加载图像后，它似乎仍然运行缓慢。
*   不调整图像大小
*   使用惰性滚动选项
*   尝试跳过我的代码的 json 部分并对图像进行硬编码，它在那时完美运行

我需要动态加载这些信息，以便让我的应用程序保持最新。以下是我的问题：

1.  JSON 请求是否始终保持打开状态，这是导致速度变慢的原因吗？有没有办法关闭请求。
2.  我没有看到我的应用程序陷入困境的原因是什么？

会喜欢你的想法，这是我的代码： [https ://gist.github.com/2422231](https://gist.github.com/2422231)

jquery - 1.7.1 jquerymobile - 1.1.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T19:13:14.407

json 不是问题，而是 JqueryMobile 中存在一个错误，当您滚动链接列表时会导致显示不连贯。干得好：

[https://forum.jquery.com/topic/why-jqm-touchscreen-list-scrolling-performance-stinks-and-what-to-do-about-it](https://forum.jquery.com/topic/why-jqm-touchscreen-list-scrolling-performance-stinks-and-what-to-do-about-it)

# wordpress - wordpress中的图像，该走哪条路？

> ID：10232882
> 
> 赞同：0
> 
> 时间：2012-04-19T16:48:11.667
> 
> 标签：wordpress

我知道我们可以使用 Post 缩略图和 wordpress 的原生图像：http: [//codex.wordpress.org/Post_Thumbnails](http://codex.wordpress.org/Post_Thumbnails)但是还有另一种调整图像大小的方法。也就是说，使用 image_resize 函数[http://codex.wordpress.org/Function_Reference/image_resize](http://codex.wordpress.org/Function_Reference/image_resize)，它将图像调整为某些特定尺寸。

现在，我的问题是......如果我想开发一个主题并想在不同的地方使用不同大小的缩略图，你会推荐我使用哪一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T01:53:58.097

作为@soju答案的补充：

如果要禁用默认图像，请将`$width`和`$heigth`属性设置为`0`。然后 WP 将在创建时跳过它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:01:49.970

如果您不需要超过 3 种不同的尺寸（缩略图、中号、大号），您只需在媒体选项中设置这些尺寸。

如果您需要更多，您可以使用[`add_image_size`](http://codex.wordpress.org/Function_Reference/add_image_size).

但在我看来，wordpress 处理图像的方式应该得到改进，因为它会为您在媒体库中上传的每个图像创建至少 3 个文件......最好只在需要时创建调整大小的图像并缓存它（如[图像缓存](http://drupal.org/project/imagecache)使用drupal）。

您可以使用[**timthumb**](http://code.google.com/p/timthumb/)，这是一种用于 wordpress 的图像缓存，它通常用于高级主题，但一定要获得最新版本，因为去年它存在严重缺陷。

# perl - Perl CGI 可靠地读取 url_param 和 param

> ID：10232884
> 
> 赞同：2
> 
> 时间：2012-04-19T16:48:22.353
> 
> 标签：perl, url, cgi, param

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T17:19:30.383

一个稍微改进的方法是检查 if `request_method() eq 'POST'`。如果您查询字符串并发布两者都包含相同的参数名称，您可能仍然会得到重复的参数名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:38:39.500

在检查了[CGI 模块的代码](https://metacpan.org/source/MARKSTOS/CGI.pm-3.59/lib/CGI.pm)之后，除了第 670 行上的一条语句，如果来自 POST 数据和查询字符串的数据应该是，则该语句意味着取消注释，我看不到任何地方都检查了 QUERY_STRING 环境变量的 POST 请求结合。

我建议要么在您的 CGI 副本中取消注释此行，要么将 POST 数据中的值复制到其他地方的 URL - 也许是浏览器？

# android - 从服务器接收数据的最佳方式

> ID：10232886
> 
> 赞同：0
> 
> 时间：2012-04-19T16:48:44.650
> 
> 标签：android, synchronization

我有一个网站，其中包含一些定期更新的信息。现在，我想创建一个android应用程序，我必须选择将手机上的远程数据与网站上的数据同步的方式。应该是 xml、soap、json 还是别的什么？什么是最好的方法？注意：它不会是异步的，一个请求 - 不时有一个响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:14:01.187

如果您的请求/响应足够简单，您将需要在 xml 和 json 之间进行选择。Soap 在 Android 中没有内置支持，xml 和 json 都有。xml和json之间，如果请求比较简单，可以选择自己比较了解的。由于在 Android 中处理它们并不困难，因此需要付出相同的努力。另一方面，如果您的请求是具体的，那么在不知道您的请求是什么的情况下就不可能回答。但是，在这种情况下，您不会一直在问这个问题。 `XmlPullParser`很容易。

# jquery - 添加弹出div，这是好方法吗？

> ID：10232890
> 
> 赞同：0
> 
> 时间：2012-04-19T16:48:59.887
> 
> 标签：jquery

作为标题，我刚刚编写了以下代码...这是创建弹出 div 的好方法吗？对不起，我的英语不好。

```
 $("#story-comments-text").mouseenter(function()
{
    var popupdiv="<div id='comments-popup'></div>";
    $(this).append(popupdiv);
    $.post()
    {
        //post request for popupdiv
    }
    return false;
}).mouseleave(function(){
    $("#comments-popup").remove();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:53:36.500

```
$("#story-comments-text").mouseenter(function(){
    var popupdiv = "<div id='comments-popup'></div>",
        that = this; // that is reference of #story-comments-text
    $.post('url', data, function(data) {  // just a demo request, you will configure it
        if(data) {
           popupdiv.html(res);  // make process as you want
           that.append(popupdiv);
        }
    }, 'json');
}).mouseleave(function(){
    $("#comments-popup").remove();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:21:17.077

慢动作 =)

```
$("#story-comments-text").mouseenter(function() {
    var $this = this;
    $.post('server.php', { name: "John", time: "2pm" }, function(data) {
        $("<div id='comments-popup' style='display: none'></div>").html(data).appendTo($this);
        $('#comments-popup').show("slow");
    });
}).mouseleave(function(){
    $('#comments-popup').hide("slow", function(){
        $("#comments-popup").remove();
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T16:57:46.930

```
$("#story-comments-text").mouseenter(function() {
    var $this = this;
    $.post('server.php', { name: "John", time: "2pm" }, function(data) {
        $("<div id='comments-popup'></div>").html(data).appendTo($this);
    });
}).mouseleave(function(){
    $("#comments-popup").remove();
}); 
```

# rest - REST：哪些 HTTP 状态代码？

> ID：10232895
> 
> 赞同：0
> 
> 时间：2012-04-19T16:49:07.317
> 
> 标签：rest, http-status-codes

我必须使用 rest 处理对我的服务器的一些客户端请求。
客户端发出发送 ID 的请求，我想返回合适的 http-error-codes 以防 ID

*   是无效的
*   不存在

但不幸的是，我不确定正确的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:54:02.663

*   无效：400
*   不存在：404
*   以前存在，但不再存在：410

# javascript - JQuery 自动完成更改事件

> ID：10232896
> 
> 赞同：0
> 
> 时间：2012-04-19T16:49:09.807
> 
> 标签：javascript, autocomplete, combobox, jquery

我的页面上有一个 jquery 自动完成组合框，如下所示：

```
$.widget( "ui.combobox", {
        _create: function() {
        ...
        var input = this.input = $( "<input>" )
                .insertAfter( select )
                .val( value )
                .autocomplete({
                    ...
                    select: function( event, ui ) {
                    ...
                    change: function( event, ui ) {
                    ...

$(function() {
    $("#myid").combobox();
} 
```

on `select`and `change`events 我执行 ajax 调用并更改隐藏字段中的一些信息，但是当我只是输入一些内容并且**没有取消关注**文本字段单击提交按钮时出现问题 -`change`事件没有被触发并且我在服务器上得到错误的数据（基本上我在隐藏字段中获得了先前由选择更改触发事件设置的数据，但没有捕获最新的数据）。那么如何`change`在发送表单之前执行文本字段取消聚焦以触发事件？或者也许还有其他一些方法可以捕获和触发文本字段中的最新更改（mb 替换某些 onkeypress 事件的更改）？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:48:39.867

您可以做的是单独制作用于在更改事件中获取隐藏字段数据的功能。此外，有一个回调函数作为该函数的参数，该函数将在数据更新后被调用。然后您可以在更改事件处理程序和表单提交处理程序中使用相同的功能。在提交处理程序中，您将禁用默认提交操作并为该函数提供回调，以便当隐藏字段中的数据更新时，您可以通过 JS 提交表单。

上面的解决方案应该可以工作，但是如果您要从自己的服务器获取数据以填写，那么您不应该通过客户端上的 Javascript 来执行此操作，而这应该只发生在您的服务器端代码上。例如，如果您使用隐藏字段将用户输入的字符串（例如“波兰”）映射到数据库中的某个 ID 并将该 ID 存储在隐藏字段中，那么您应该简单地将“波兰”作为字符串发送到服务器并在服务器上处理此映射。这样您的表单就无需等待从服务器获取此映射。当然，这只能在您将 AJAX 请求发送到您的服务器而不是发送到您无法从服务器访问的其他服务器时完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:00:21.617

您可以禁用提交按钮上的默认操作

```
$(".submit-btn").click(function(e){e.preventDefault();}); 
```

这样提交按钮将不会提交表单，并且您的表单将获得选择或更改事件，因为用户将通过单击提交按钮失去焦点

# java - 对应击键的字母数字字符串

> ID：10232900
> 
> 赞同：0
> 
> 时间：2012-04-19T16:49:17.680
> 
> 标签：java

我正在解决一个问题，我需要将给定的字母数字转换为`String`基于文本的格式（不知道到底该怎么称呼它）。`Example: a = 2, c = 222, f = 333`等等。为了更清楚，这可以在手机的键盘上找到。就像您在没有 QWERTY 键盘的旧硬键手机中发短信的方式一样。

`Example: (INPUT) hello (OUTPUT) 44+33+555+555+666`

这是我的想法。我可以将所有案例（总共 26 + 10 个）预加载到 a`HashMap`中并使用它。但我认为应该有其他更好的方法来做到这一点吗？欢迎所有/任何出色的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:01:30.517

由于您需要将字符串（或者您可能需要单个字符！？）与数字相关联，没有什么比使用一些 java.util.Map 实现更容易的了。

对于计算部分，您可以首先计算字符串中每个字符出现的频率，然后添加出现次数（c）x numberFor（c）（2 x 555，而不是在您的示例中添加两次 555）。

* * *

更新：想一想，对于特殊情况，可能会有优化。例如，在将所有映射为 0 的极端情况下，计算变得微不足道，不需要 hashmap ;) 或者所有数字都是正数？也许每个字母数字字符映射到不同的素数？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:14:09.893

`HashMap`将是做你想做的最简单的方法

因为您正在使用一组静态映射，所以您可能需要考虑将查找表实现为一个新类。我认为类的内部可以只是一个字符串数组。当您在数组中进行查找时，您可以从正在查找的字符中减去“a”字符，这将成为数组索引。（对于标点字符，如果减法的结果不在 0 到 25 之间，可以特殊情况处理）。这种方法将绕过散列函数并提高性能。

# php - php中的HTTP标头删除

> ID：10232902
> 
> 赞同：0
> 
> 时间：2012-04-19T16:49:23.463
> 
> 标签：php, api, http, rest, header

我正在开发一个 API REST，我希望我的代码能够区分 GET HTTP HEADER 和 DELETE HTTP HEADER 以返回所要求的信息或从数据库中删除此信息。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:52:54.133

你可以使用[这个](http://php.net/manual/en/reserved.variables.server.php)：

```
$_SERVER['REQUEST_METHOD'] 
```

请记住，除了 PUT 和 DELETE 之外，并非所有浏览器和某些服务器实现都支持。您可以使用 Rails 方式，并将 _method 参数传递给 POST/GET 调用。

# api - Foursquare 推送通知 API

> ID：10232903
> 
> 赞同：2
> 
> 时间：2012-04-19T16:49:24.413
> 
> 标签：api, push-notification, real-time, foursquare

我想通过使用推送通知来获取我的应用程序用户的签到。我是foursquare API的新手。如果有人能告诉我使用推送通知 API 需要遵循的步骤，我将不胜感激。或者如果您有示例/教程。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:12:35.503

当 Foursquare 向您的 push.php 文件发送推送时，它会发送签入的所有数据。这就是检查对象的样子[https://developer.foursquare.com/docs/responses/checkin](https://developer.foursquare.com/docs/responses/checkin)你如何处理这些数据取决于你。

您可以将其保存到数据库中；这是获取签入对象并将其保存到 MySQL 数据库的示例：[https ://github.com/brneese/foursquare-realtime-api-example/blob/master/checkins.php](https://github.com/brneese/foursquare-realtime-api-example/blob/master/checkins.php)

您还可以在您的服务器上触发一个事件，类似于这个非常聪明的人使用它的方式：[http ://www.youtube.com/watch?v=HlGH-uv3kts](http://www.youtube.com/watch?v=HlGH-uv3kts)

最后，您可以使用 Foursquare 的新应用程序平台的新功能“回复”部分来回复签到，目前在开发者预览中：[https](https://developer.foursquare.com/docs/checkins/reply) ://developer.foursquare.com/docs/checkins/reply 例如，您可以使用“回复” ，发送提醒您餐厅的特色菜。

希望链接和我的回答有所帮助。

# java - 如何手动生成 JUnit 测试报告

> ID：10232904
> 
> 赞同：3
> 
> 时间：2012-04-19T16:49:26.520
> 
> 标签：java, testing, junit, report

想不出更好的名字了。我在这里做错了，请指出正确的方向。

我有一个小型 Java 应用程序。我们使用 Jenkins 进行 CI 和 (AFAICT) maven-surefire 生成一些 Jenkins 理解的不错的测试报告。现在，我需要对我的应用程序进行一些健全性/验收测试。我的方法是：

*   配置一个 Jenkins 构建，该构建将生成一个 .rpm 包并将其与 AcceptanceTest.jar 一起复制到临时 VM
*   jar 实际上有一个用于 JUnit 测试用例的运行器，它将启动一些 Jetty/MQ 服务器、安装 rpm、更新配置并检查测试服务器是否按预期轮询/更新。

到目前为止一切顺利 - 我的 Jenkins 构建有一个非常简单的脚本，可以进行复制然后运行 ​​jar。如果我手动执行，我可以在控制台上看到结果。

我现在面临的问题是为 Jenkins 生成测试报告？maven 没有安装在测试虚拟机上，ant 也没有。有什么想法我可以在没有太多麻烦的情况下做到这一点吗？

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:08:23.250

我能想到的最简单的方法就是在测试虚拟机上安装 ANT。这些是步骤：

1.  安装 ANT
2.  使用 ANT 运行 JUnit 测试并指定将在其中创建测试报告的目录。这是通过 ANT JUnit 任务（使用*todir*指令的批处理测试任务）[完成的](http://ant.apache.org/manual/Tasks/junit.html)
**   配置 Jenkins 构建以获取报告。这是在“构建后操作”下完成的：“发布 JUnit 测试结果报告”有一个复选框。单击复选框并指定测试报告所在的目录。*

# java - HOWTO 根据 build.properties 中的值配置 hibernate.cfg.xml、struts.xml、MessageResources.properties

> ID：10232906
> 
> 赞同：2
> 
> 时间：2012-04-19T16:49:32.877
> 
> 标签：java, hibernate, ant, build, struts2

对于通过 ant 编译的 Struts2 项目，修改 hibernate.cfg.xml（例如 hibernate.connection.url）、struts.xml（例如 struts.devMode）、MessageResources.properties（例如 appName）中的变量的最佳实践或方法是什么？ ?) 等使用 ant 构建工具？

我有一个 build.properties （& local.build.properties 设置在不同的服务器实例，如 qa、staging 等），但我不知道是否有统一的方法来覆盖/覆盖各种项目配置文件中的值，如 hibernate.cfg .xml 等使用构建工具。

我正在寻找一个适用于所有配置文件的统一解决方案。但如果不是，那么针对特定配置文件的特定方法也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:31:54.857

Weel 对于您的情况，我诚实的建议是转到 Maven。

1.  在 Maven 中，您可以定义`<profiles/>`（又名 testing.staging、live 等），允许您为不同的环境配置设置。所有您需要指定 Maven 关于您希望事物移动的环境，并且 Maven 有足够的能力来处理这个。虽然这也可以用 Ant 完成，但我相信 Maven 提供了更多的灵活性。
2.  您可以选择在 Maven 中使用资源过滤。

我对 Ant 不是很熟悉，但相信您可以有 2 个不同的设置副本，可能位于两个不同的位置或具有两个不同的名称，您可以在构建执行时传递名称。

我仍然会选择 Maven，因为它的灵活性和易用性。

# javascript - 有没有办法使用 javascript 检测移动 Safari 音频中断（耳机拔出）？

> ID：10232908
> 
> 赞同：2
> 
> 时间：2012-04-19T16:49:56.873
> 
> 标签：javascript, jquery, mobile-safari, html5-audio, soundmanager2

我正在开发一个使用 jQuery 和 SoundManager 构建的 HTML5 音频播放器。

到目前为止，我们无法确定是否有办法在移动 Safari 中检测音频中断事件（例如拔下耳机）。现在，即使 iOS 已暂停播放器中的任何音频播放，我们仍会遇到播放器处于“正在播放”状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-12-04T13:11:46.710

我现在在使用 WebRTC 的网页上遇到了类似的问题。我发现如果你有一个`AudioContext`对象，你可以监听它的`statechange`事件。在拔下耳机时，上下文状态变为`suspended`。

[https://developer.mozilla.org/en-US/docs/Web/API/BaseAudioContext/onstatechange](https://developer.mozilla.org/en-US/docs/Web/API/BaseAudioContext/onstatechange)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:16:58.113

您是否尝试过轮询属性 object.position（SM2 对象）或 object.currentTime（音频对象）甚至属性 object.paused？您可以确保每次轮询时 position/currentTime 都会增加 - 如果不采取行动。

# oracle - Debian 上的 Oracle 11gr2

> ID：10232911
> 
> 赞同：0
> 
> 时间：2012-04-19T16:50:15.740
> 
> 标签：oracle

我想在 crunchbang（一个 debian 发行版）上的笔记本电脑（ASUS G71GX-7s023k）上安装 oracle 11g r2

我添加了所需的用户并安装了所有必需的软件包，但是每次我尝试运行 runInstaller 时，都会出现以下错误：

```
/media/data/database/install/.oui: 2: Syntax error: ")" unexpected 
```

任何人的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T19:14:12.233

你在运行 bash 还是 dash？来自某些 linux 发行版的几个问题是 /bin/sh 被 dash 替换，它导致某些 bourne shell 脚本本身失效。仔细检查以确保您的 /bin/sh 是 bash/bourne 而不是 dash。另外不要忘记使用“-ignoreSysPrereqs”运行 runinstaller 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T18:46:26.307

Oracle 数据库 11gR2 仅针对 Oracle Linux、Asianux、RedHat EL 和 Suse Linux 服务器进行了认证。Crunchbag（什么版本？）甚至不是 Debian，而是基于 Debian 的发行版。对于个人使用而言，您不必过于认真地对待认证矩阵（Fedora 很好），但您正在尝试做的是自找麻烦。

我的建议：不要这样做。

备择方案：

一个。使用虚拟机

湾。将 oracle 数据库软件放在某处的服务器上，并且只在您的笔记本电脑上运行客户端。

# ajax - Bing Maps AJAX中多边形集合上的事件处理程序未触发

> ID：10232918
> 
> 赞同：0
> 
> 时间：2012-04-19T16:50:39.830
> 
> 标签：ajax, bing-maps

我使用以下代码创建了一个同心环对象/集合。然后我想在地图上移动/拖动集合，突出显示这些环内感兴趣的位置。如您所见，我已向集合添加了一个事件处理程序，但是当我尝试在我的地图上拖动集合时，它永远不会触发事件处理程序。有什么想法为什么不呢？我已确认事件处理程序已到位。

使用 V7 的 Bing API。我在下面的代码示例中省略了处理程序，它们只是做简单的警报（“到这里”）；

```
function GetMap(){

       map.entities.push(AddRings(center));
}

 function AddRings(center) {
        var circleCollection = new Microsoft.Maps.EntityCollection();
        circleCollection.push(AddCircle(center.latitude, center.longitude, .05, new MM.Color(155, 2, 2, 2)));
        circleCollection.push(AddCircle(center.latitude, center.longitude, 5, new MM.Color(255, 0, 255, 0)));
        circleCollection.push(AddCircle(center.latitude, center.longitude, 20, new MM.Color(255, 255, 0, 0)));
        circleCollection.push(AddCircle(center.latitude, center.longitude, 10, new MM.Color(255, 0, 0, 255)));
        MM.Events.addHandler(circleCollection, 'mousedown', StartDragHandler);
        MM.Events.addHandler(circleCollection, 'mouseup', EndDragHandler);
        MM.Events.addHandler(circleCollection, 'mouseout', EndDragHandler);

        return circleCollection;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T22:56:52.103

EntityCollection 类没有鼠标事件。您可以在此处查看此集合有哪些事件：http: [//msdn.microsoft.com/en-us/library/gg427616.aspx](http://msdn.microsoft.com/en-us/library/gg427616.aspx)

您必须将事件添加到集合中的每个形状。

此外，您似乎正在尝试绘制一个复杂的多边形。您是否考虑过使用 AdvanceShapes 模块：http: [//msdn.microsoft.com/en-us/library/hh921952.aspx](http://msdn.microsoft.com/en-us/library/hh921952.aspx)

# xml - AS3，加载多个 XML 文件？

> ID：10232920
> 
> 赞同：0
> 
> 时间：2012-04-19T16:50:41.603
> 
> 标签：xml, actionscript-3, flash, oop

**背景**

我有一个基于计算机的培训项目，我需要为其构建一个标准化的包装器。课程页面将使用 XML 创建。每个页面都有自己的 XML 文件；例如，第 1 页将加载所有内容`1.xml`，第 2页将加载`2.xml`，以此类推。由于并非所有客户端都相同，因此页面的数量总是不同的。

**问题**

我已经创建了十个 XML 文件进行测试，但对于我的生活，我无法弄清楚以下内容：

*   使用 Flash，计算文件夹中 xml 文件的数量（我无法访问任何服务器端，如果我这样做会改变一切）我考虑过使用`IOErrorEvent.IO_ERROR`某种类型的循环，但我不知道在哪里甚至开始
*   使用 Flash，将所有 xml 文件中的所有信息加载到一个数组或向量中，以便在用户完成课程时显示在页面上。用户可以跳过课程，例如，他们可能想从第 5 页跳到第 20 页或其他任何内容。所以一个对象或关联数组是我的想法

我知道 Flash 无法访问文件系统，但由于 xml 文件将被命名为 1.xml、2.xml、3.xml、4.xml、5.xml 等......（这个命名约定将永远不会改变，因为XML文件将直接与页码相关）应该有办法做到这一点。我的想法是创建某种类型的循环来尝试加载每个文件。一旦由于找不到文件而引发错误，我将跳出循环。在下面查看我的工作文件。

**当前工作文件**

我创建并开始使用的文件信息很少，因为我什至不知道如何处理这个问题。但是，这就是我所拥有的：

**xml 文件** *（请记住，可能有 5 个或 100 个或任何其他客户端需要的文件，但它们的格式都相同）（另外，我**无权**访问任何类型的数据库，因此 XML 文件似乎是我的最佳选择）*

```
<?xml version="1.0" encoding="iso-8859-1"?>
<content>
    <title>My First Page</title>
    <body>This is the body of my new page I just built using XML</body>
    <img>graphic.jpg</img>
</content> 
```

**XmlClass.as** ** 代码见下文，我已经更新了 **

就像我说的，这是一个起点。很多事情需要解决，但我想确保我前进的道路是正确的;) 我不确定这个 xml 想法是否是解决这个问题的最佳方法。我只是想如果客户自己创建和维护 xml 文件，我会减轻一些工作量。

谢谢！

**编辑**

从我的回答来看，我的问题写得不好。这是我一直在处理的 XmlClass.as 文件，其中的注释可能比我上面所做的解释得更好。您可以在代码中看到我创建了一个方法，该方法构建了一个`_loaderArray`我可以在 for 循环中使用的方法来加载每个指向 xml 文件的链接。

我要做的就是获取 x 数量的 xml 文件并创建一个数组或其他东西，让我可以将所有 xml 文件放在一个地方。

XmlClass.as

```
package
{
import flash.display.*;
import flash.xml.*;
import flash.events.*;
import flash.net.*;

public class XmlClass extends XMLDocument
{       
    private var _xml:XML;       
    private var _loader:URLLoader;
    private var _request:URLRequest;
    private var _loaderArray:Array; /* this is to store my paths to each xml file */
    private var _xmlArray:Array; /* this is where I want to store all the information in all the xml files */
    private var _fileError:Boolean; /* this tells me that I have hit a 404 trying to load one of the files */

    public function XmlClass():void
    {
        BuildLoaderArray();
        BuildXmlArray();
    }
    /* build the xml array so I can have one place that stores each of the xml files content */
    private function BuildXmlArray():void
    {
        _loader  = new URLLoader();
        for(var i=1;i<_loaderArray.length;i++)
        {
            /* check to see if we have a 404 error and stop the loop */
            if(_fileError){break;}
            _request = new URLRequest(_loaderArray[i]);/* load each of the xml paths to load into the array */
            _loader.addEventListener(Event.COMPLETE,ProcessXML);
            _loader.addEventListener(IOErrorEvent.IO_ERROR,XMLioErrorHandler); 
            _loader.load(_request);
        }
        trace(_xmlArray);/* show me the newly created xml array that has all the files information */
    }
    /* build all the links to the xml files for the loader */
    private function BuildLoaderArray():void
    {
        _loaderArray = new Array();
        for(var i=1;i<201;i++)
        {
            _loaderArray.push("../xml/"+i+".xml");
        }
    }
    private function ProcessXML(e:Event):void
    {
        _xmlArray = new Array();
        _xml = new XML(e.target.data);
        _xmlArray.push(_xml);
    }       
    private function XMLioErrorHandler(e:IOErrorEvent):void
    {
        _fileError = true;
        trace("Loading Error")
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:38:37.403

这不是管理要加载的多个 xml 文件的正确方法。首先，您必须创建一个配置 xml 文件，该文件将包含将作为数据的一部分加载的 xml 文件列表，您需要先加载配置 xml 文件，然后在您必须启动内容 xml 文件之后根据配置xml文件。

您可以灵活地配置您的 xml 文件名和计数。它可以在任何情况下工作，并且不需要运行任何东西。每当您/您的客户想要更改时，只需更改配置 xml 文件。完成。

# regex - 正则表达式 mysql

> ID：10232929
> 
> 赞同：1
> 
> 时间：2012-04-19T16:51:05.580
> 
> 标签：regex

我正在用这样的regxp编写一个mysql选择

`SELECT name FROM employees WHERE name REGEXP '^A'`

什么是正则表达式语法：

任何包含`gmail.com`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:57:42.523

我不会在这里使用 REGEXP：

```
SELECT name FROM employees WHERE name LIKE '%gmail.com%'; 
```

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:54:02.683

这是你要找的吗？

```
REGEXP '@gmail\.com$' 
```

# eclipse - 关闭 Eclipse 运行时时“未找到供应代理”

> ID：10232930
> 
> 赞同：4
> 
> 时间：2012-04-19T16:51:06.493
> 
> 标签：eclipse, runtime, eclipse-rcp, rcp, pde

关闭我的 Eclipse 插件的运行时，我收到以下错误消息：

```
!ENTRY org.eclipse.core.resources 4 2 2012-04-19 18:44:18.200
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.core.resources".
!STACK 1
org.eclipse.core.runtime.CoreException: Provisioning agent not found
    at org.eclipse.pde.internal.core.target.P2TargetUtils.getAgent(P2TargetUtils.java:301)
    at org.eclipse.pde.internal.core.target.P2TargetUtils.getProfileRegistry(P2TargetUtils.java:781)
    at org.eclipse.pde.internal.core.target.P2TargetUtils.cleanOrphanedTargetDefinitionProfiles(P2TargetUtils.java:159)
    at org.eclipse.pde.internal.core.PDECore$1.saving(PDECore.java:258)
    at org.eclipse.core.internal.resources.SaveManager.executeLifecycle(SaveManager.java:383)
    at org.eclipse.core.internal.resources.SaveManager$1.run(SaveManager.java:192)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.internal.resources.SaveManager.broadcastLifecycle(SaveManager.java:195)
    at org.eclipse.core.internal.resources.SaveManager.save(SaveManager.java:1130)
    at org.eclipse.core.internal.resources.Workspace.save(Workspace.java:2375)
    at org.eclipse.ui.internal.ide.application.IDEWorkbenchAdvisor$5.run(IDEWorkbenchAdvisor.java:508)
    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
!SUBENTRY 1 org.eclipse.pde.core 4 0 2012-04-19 18:44:18.201
!MESSAGE Provisioning agent not found
!SUBENTRY 1 org.eclipse.pde.core 4 0 2012-04-19 18:44:18.202
!MESSAGE Provisioning agent not found

!ENTRY org.eclipse.ui.ide 4 4 2012-04-19 18:44:24.278
!MESSAGE Problems saving workspace

!ENTRY org.eclipse.ui.ide 2 1 2012-04-19 18:44:24.279
!MESSAGE Problems occurred while trying to save the state of the workbench.
!SUBENTRY 1 org.eclipse.core.resources 2 566 2012-04-19 18:44:24.280
!MESSAGE Problems occurred during save.
!STACK 1
org.eclipse.core.runtime.CoreException: Provisioning agent not found
    at org.eclipse.pde.internal.core.target.P2TargetUtils.getAgent(P2TargetUtils.java:301)
    at org.eclipse.pde.internal.core.target.P2TargetUtils.getProfileRegistry(P2TargetUtils.java:781)
    at org.eclipse.pde.internal.core.target.P2TargetUtils.cleanOrphanedTargetDefinitionProfiles(P2TargetUtils.java:159)
    at org.eclipse.pde.internal.core.PDECore$1.saving(PDECore.java:258)
    at org.eclipse.core.internal.resources.SaveManager.executeLifecycle(SaveManager.java:383)
    at org.eclipse.core.internal.resources.SaveManager$1.run(SaveManager.java:192)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.internal.resources.SaveManager.broadcastLifecycle(SaveManager.java:195)
    at org.eclipse.core.internal.resources.SaveManager.save(SaveManager.java:1130)
    at org.eclipse.core.internal.resources.Workspace.save(Workspace.java:2375)
    at org.eclipse.ui.internal.ide.application.IDEWorkbenchAdvisor$5.run(IDEWorkbenchAdvisor.java:508)
    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
!SUBENTRY 2 org.eclipse.pde.core 4 0 2012-04-19 18:44:24.280
!MESSAGE Provisioning agent not found 
```

谁能告诉我我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T16:46:50.267

正如亚历山大指出的那样，我错过了 Eclipse 没有自动添加的 Equinox 插件 org.eclipse.equinox.ds，即使在“添加必需的插件”之后也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T16:56:15.353

如该[线程所示](http://www.eclipse.org/forums/index.php/m/834031/)，当您单击“添加必需的插件”时，仍然缺少`org.eclipse.equinox.ds`可以链接到您正在使用的项目类型的包（例如，在您的情况下为“”）：

> 如果您**将构建更改为基于功能的构建并使用该`org.eclipse.rcp`功能**，您将为自己带来很多好处：它包括 RCP 应用程序的所有必要捆绑包，包括`org.eclipse.equinox.ds`和`.event`.

# javascript - fadeOut 只触发一次

> ID：10232931
> 
> 赞同：-2
> 
> 时间：2012-04-19T16:51:06.613
> 
> 标签：javascript, jquery, css

我正在使用 jquery 来显示一个错误 div，其定义为：

```
<div id="Div1" style="color: Black; background-color:Orange; font: bold small 'trebuchet ms',helvetica,sans-serif;"></div> 
```

在错误方法中，我按如下方式调用错误 Div：

```
$("#Div1").html('');
$("#Div1").html('Failed to upload. Please try again.').fadeOut(2000, function () { $(this).remove(); }); 
```

问题是错误 div 只被调用一次。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:54:56.733

最好使用 .text 而不是 .html，试试这个：

```
$("#Div1").text('Failed to upload. Please try again.').fadeOut(2000, function () {
    $(this).text('').show(); 
}); 
```

因为 .html() 是为了添加 html 内容。从jquery手册：

> .html( html字符串 )
> 
> htmlString 要设置为每个匹配元素的内容的 HTML 字符串。

见：[http ://api.jquery.com/html/#html2](http://api.jquery.com/html/#html2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T17:00:06.437

尝试淡出功能：

```
$("#Div1").html('');
$("#Div1").html('Failed to upload. Please try again.')
 .fadeOut(2000, function () { $(this).html('').show(); });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T16:53:35.003

试试这个

这是一个更新

```
$("#Div1").html('Failed to upload. Please try again.').fadeOut(2000, function () {
        $(this).html('').show(); 
}); 
```

# wordpress - wordpress 中的主题选项面板。最佳实践

> ID：10232933
> 
> 赞同：1
> 
> 时间：2012-04-19T16:51:16.330
> 
> 标签：wordpress

大多数免费和高级主题都提供主题选项面板。他们中的大多数使用 $options 数组来存储选项，之后，他们只是在需要时获取选项。

从我的角度来看，使用大量选项可能会增加 mysql 负载和查询次数。序列化整个 $options 数组，然后在标头中检索它，通过一个查询访问所有选项不是更好吗？

我需要一些关于哪个更好以及围绕这个问题的一些其他做法的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T01:52:42.387

## 用于救援的 API

你应该

*   为主题选项使用[设置 API （](http://codex.wordpress.org/Settings_API) [Chip Bennet 的好教程在这里](http://www.chipbennett.net/2011/02/17/incorporating-the-settings-api-in-wordpress-themes/)）
*   或者使用[Theme Modifications API](http://codex.wordpress.org/Theme_Modification_API)，它基本上是一个轻量级的设置 API。

两者都是专门为此而编写的。

## 重要笔记

记得：

*   在停用主题时删除所有选项（询问用户是否愿意这样做），这样您就不会弄乱用户 DB-Options_Table。
*   为您的选项添加前缀，以便更容易找到和识别它们。

## 加快速度的框架

您还获得了一些选项框架。[选项树](http://wordpress.org/extend/plugins/option-tree/)插件只是一个例子。大多数项目都托管在 GitHub 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T18:25:01.420

wordpress 确实序列化它的选项..

> “你不需要序列化值。如果值需要序列化，那么它会在插入数据库之前进行序列化”

来源：[http ://codex.wordpress.org/Function_Reference/add_option](http://codex.wordpress.org/Function_Reference/add_option)

# c++ - 最大相等字符串子数组

> ID：10232938
> 
> 赞同：1
> 
> 时间：2012-04-19T16:51:42.180
> 
> 标签：c++, algorithm

假设我有两个字符串：

```
"hello"
"love" 
```

字符串中最大子数组的大小为 2：“lo”。

这是另一个例子：

```
"ABBABBA"
"BBABCBA"
Maximum subarray: "BBAB"
Size: 4 
```

基本上，我怎样才能以最有效的方式解决这个问题？

我的想法如下：

*   为一个字符串生成所有子数组
*   为其他字符串生成所有子数组；
*   比较所有子数组
*   **结果是最大匹配子数组的大小**

但我认为这是一些看起来很糟糕的蛮力。知道如何改进吗？

谢谢！

**编辑** 我也需要字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T16:54:49.513

这是一个众所周知的问题，称为[最长公共子串](http://en.wikipedia.org/wiki/Longest_common_substring_problem)。可以使用*动态编程*方法在`O(mn)`、 where`m`和`n`are 中求解单个字符串的长度。维基百科中的文章包含易于理解的伪代码。

# c# - 将字符串转换为列表

> ID：10232940
> 
> 赞同：1
> 
> 时间：2012-04-19T16:51:46.563
> 
> 标签：c#, html, asp.net-mvc

我有一个控制器，它拉出一个学生列表并显示在一个视图中，在我的控制器操作的一部分下面，它将学生存储在一个列表中，然后存储到一个 TempData 变量中。然后我将其重定向到不同的操作以在视图中显示列表：

```
var StudentsList = (from s in data.vwStudents.Where(a => a.StudentID == Id)
                   group s by s.StudentName into g
                   select g.Key).ToList();

TempData["StudentsList"] = StudentsList;

return RedirectToAction("DisplayStudents"); 
```

我将 TempData["StudentList"] 变量传递给另一个控制器操作：

```
 [HttpGet]
    public ActionResult DisplayStudents()
    {
        ViewData["StudentsList"] = TempData["StudentsList"];
        return View();
    } 
```

这是我在视图中显示学生的方式：

```
 <%= ViewData["StudentsList"]%> <br /><br /> 
```

问题是，我看不到学生，而是看到：

```
System.Collections.Generic.List`1[System.String] 
```

在将 TempData 传递给视图之前，我是否需要将其转换为列表？还是我在视图中这样做？另外，如何将 TempData 变量转换为列表？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T16:55:21.790

使用以下：

```
string.Join(",",(List<string>)ViewData["StudentsList"])).ToArray()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T17:15:16.640

你所拥有的是一个名字列表，而不是一个名字；如果您的模型只是一个字符串，引擎可以将它原样转储到页面上并称之为好。但它*不知道如何处理列表，*因为有很多方法可以安排这样的事情。

它不知道你想要什么：一个逗号分隔的列表？一堆要点？一张桌子？引擎不知道，所以它放弃并要求您提供指示。

**所以你需要告诉视图如何显示你的列表。**你如何做到这一点取决于你，但我会给你一个例子。我对 Razor 引擎更熟悉，所以我将尝试使用该语法：

```
<ul>    
    @foreach (string name in (List<string>)ViewData["StudentsList"])
    {        
        <li>@name</li>        
    }    
</ul> 
```

这应该生成一个学生姓名的项目符号列表。如果您希望它采用不同的格式，只需使用 div 或其他东西而不是 ul/li 构造。

# java - 如何在 JFileChooser OpenDialog 中使用两个文件扩展名中的任何一个的所有文件

> ID：10232942
> 
> 赞同：0
> 
> 时间：2012-04-19T16:52:12.943
> 
> 标签：java, jfilechooser

用户将在 JFileChooser 中选择一个文件，该文件将被转换为新的文件格式，然后以不同的扩展名保存。我想显示具有两个扩展名的文件，以便用户能够查看文件是否已被转换。

我已经能够添加两个 FileNameExtensionFilter 方法，但这意味着用户必须在它们之间切换。有没有办法过滤掉除了两个扩展之外的所有内容？替代方案似乎不使用过滤器并接受所有文件。（在遥远的过去，我能够在 Windows 中使用 C/C++ 做到这一点）

我在 Ubuntu 下使用 Java。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:59:22.907

只需`FileFilter`接受任一文件类型

```
 public boolean accept(File f) {
      if( /* File is first type */ || /* File is second type */)
          return true;
      return false;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:00:32.613

编写自定义过滤器：

```
fc.setFileFilter(new FileFilter() {
    public boolean accept(File f) {
        if( checkForFileTypeOne() ||  checkForFileTypeTwo()) {
             return true;
        }
        return false;
    }

    public String getDescription() {
        return "Usefull files (*.abc, *.def)";
    }
}); 
```

# java - ORA-01780: 使用准备好的语句需要字符串文字

> ID：10232943
> 
> 赞同：1
> 
> 时间：2012-04-19T16:52:15.773
> 
> 标签：java, oracle

```
private final static String EXTERNAL_DATA_DIR_PATH = "E:/rptax/input/RPTAX_TAPEDATE_20120406";

PreparedStatement stmt1 = conn.prepareStatement("create or replace EXT_DATA_DIR as ?");
        stmt1.setString(1, EXTERNAL_DATA_DIR_PATH);
        stmt1.execute(); 
```

这给了我... java.sql.SQLException: ORA-01780: string literal required ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T16:56:58.217

不能在 DDL 语句（例如`CREATE DIRECTORY`语句）中使用绑定变量。您必须使用字符串连接来生成 DDL（请注意，您也缺少`DIRECTORY`后面的关键字`REPLACE`）。

通常，您希望 Java 应用程序发布 DDL 是很不寻常的。您的目录对象应该作为安装脚本的一部分在数据库中创建，同时创建表和视图等其他数据库对象。

作为健全性检查，您`EXTERNAL_DATA_DIR_PATH`是数据库服务器上的一个目录，对吗？它不是应用服务器或客户端机器上的路径。

# asp.net - 生产服务器中的 DotNetOpenAuth 错误

> ID：10232944
> 
> 赞同：1
> 
> 时间：2012-04-19T16:52:19.653
> 
> 标签：asp.net, .net, dotnetopenauth

我正在使用最新的[DotNetOpenAuth](http://www.dotnetopenauth.net/)版本。在 localhost 中一切正常。

我看到以下异常消息：

> 无法将“DotNetOpenAuth.OpenId.Behaviors.AXFetchAsSregTransform”类型的对象转换为“DotNetOpenAuth.OpenId.RelyingParty.IRelyingPartyBehavior”类型

堆栈跟踪是：

```
at DotNetOpenAuth.Configuration.TypeConfigurationElement1.CreateInstance(T defaultValue, Boolean allowInternals)
at DotNetOpenAuth.Configuration.TypeConfigurationCollection1.<>c__DisplayClass4.<CreateInstances>b__2(TypeConfigurationElement1 element)
at System.Linq.Enumerable.WhereSelectEnumerableIterator2.MoveNext()
at DotNetOpenAuth.OpenId.RelyingParty.OpenIdRelyingParty..ctor(ICryptoKeyStore cryptoKeyStore, INonceStore nonceStore)
at DotNetOpenAuth.OpenId.RelyingParty.OpenIdRelyingParty..ctor()
at Ideiota.WebApp.Modules.Login.HandleOpenIdProviderResponse()
at Ideiota.WebApp.Modules.Login.Page_Load(Object sender, EventArgs e)
at System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e)
at System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e)
at System.Web.UI.Control.OnLoad(EventArgs e)
at System.Web.UI.Control.LoadRecursive()
at System.Web.UI.Control.LoadRecursive()
at System.Web.UI.Control.LoadRecursive()
at System.Web.UI.Control.LoadRecursive()
at System.Web.UI.Control.LoadRecursive()
at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint);` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T16:57:29.177

对于遇到此问题的其他任何人，这就是我遇到的问题。升级到这个新版本（在我的例子中是通过 NuGet）添加了一些新配置，但没有删除旧的和无效的配置。

在你的`Web.config`：

```
<!-- old and invalid, remove this line -->
<add type="DotNetOpenAuth.OpenId.Behaviors.AXFetchAsSregTransform, DotNetOpenAuth" />
<!-- keep this new line -->
<add type="DotNetOpenAuth.OpenId.RelyingParty.Behaviors.AXFetchAsSregTransform,
           DotNetOpenAuth.OpenId.RelyingParty" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:37:01.847

但是错误在配置文件中。新版本有变化...

# ruby-on-rails - 使用现有的 rails 应用程序添加 twitter-bootstrap-rails

> ID：10232945
> 
> 赞同：12
> 
> 时间：2012-04-19T16:52:27.530
> 
> 标签：ruby-on-rails, twitter-bootstrap

我正在尝试将 twitter-bootstrap-rails 与现有的 rails 应用程序一起使用，并在刷新页面时收到以下错误。

没有要加载的此类文件 - 更少（在 /app/assets/stylesheets/bootstrap_and_overrides.css.less 中）

提取的源代码（第 5 行附近）：

```
2: <html>
3: <head>
4:   <title>Tracker</title>
5:   <%= stylesheet_link_tag    "application" %>
6:   <%= javascript_include_tag "application" %>
7:   <%= csrf_meta_tags %>
8: </head> 
```

知道我做错了什么吗？谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T19:51:25.763

就我而言，仅重新启动 rails 服务器并没有解决问题。我必须做以下事情来解决问题。

**1.**我需要先安装缺少的 gem。我在我的 Gemfile 中添加了以下几行：

```
 gem "therubyracer"
  gem "less-rails" 
```

然后在控制台中我跑了：

```
bundle install 
```

**2.**最后，我不得不**重新启动我的 rails server**。

完成所有这些步骤后，t​​witter bootstrap 开始使用我的 rails 应用程序。希望这可以帮助那些面临与我相同的麻烦的人！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T01:48:35.650

在某些情况下，您还没有安装 ruby​​racer。

添加

```
#gem 'therubyracer' , '= 0.10.2' 
```

到您的 Gemfile 和

```
#bundle install 
```

可以解决这个问题。（就我而言，我无法将 ruby​​racer 设为 0.11.0，因此我指定了 0.10.2）

如果你还没有安装libv8，你必须执行

```
#gem install libv8 --version=3.11.8.3 
```

或类似的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-18T12:57:29.047

使用导轨 3.2.13：

在我安装了 3 个 gem（therubyracer / less-rails / twitter-bootstrap-rails）之后，我在 application.css 中将 *= require twitter/bootstrap 替换为 *= require bootstrap_and_overrides。

来自 github 更新指南：

> > 此文件为您导入 Bootstrap 和响应式样式（响应式模块是分开的。） [https://github.com/seyhunak/twitter-bootstrap-rails/wiki/Upgrading-Guide](https://github.com/seyhunak/twitter-bootstrap-rails/wiki/Upgrading-Guide)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T03:16:54.327

根据 sdurg4 的建议，我还可以通过在布局模板的 stylesheet_link_tag 标记中将 'application' 替换为 'bootstrap_and_overrides' 来实现这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T02:26:13.513

我通过将 stylesheet_link_tag 替换为 bootstrap_and_overrides 来实现它。但是，我正在使用设计进行身份验证和 twitter-bootstrap-rails，我认为这会弄乱设计用户模型，因为没有任何注销或登录功能起作用。

# file - 如何在命令行中为 Maven 发布插件设置排除列表？

> ID：10232947
> 
> 赞同：4
> 
> 时间：2012-04-19T16:52:28.600
> 
> 标签：file, maven, plugins, release

我尝试使用选项：

```
checkModificationExcludeList 
```

但我不知道正确的语法：

```
mvn -U release:prepare checkModificationExcludeList myfile.txt 
```

不起作用。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-19T17:41:32.657

从本地修改检查中排除文件的正确语法是，

```
mvn release:prepare -DcheckModificationExcludeList=one.txt,two.txt 
```

确保使用 -D 传递参数

对于子目录中的文件，我相信你只需要给出文件名，路径就可以跳过。

# asp.net-mvc - 动作之间的参数传递

> ID：10232949
> 
> 赞同：0
> 
> 时间：2012-04-19T16:52:33.963
> 
> 标签：asp.net-mvc

我正在尝试这样做：

```
public ActionResult Index(List<Client> Client)
{
    if (Client != null)
        return View(Client);

    return View(db.Client.ToList());
}

[HttpPost]
public ActionResult Search(string cnpj)
{
    List<Client> Client = db.Client // here it finds one client
        .Where(c => cnpj.Equals(c.Cnpj))
        .ToList();

    return RedirectToAction("Index", Client);
} 
```

动作搜索后，它转到索引，但客户端参数始终为空..

有人知道为什么吗？

* * *

我这样做并且工作：

```
public ActionResult Index(string cnpj)
{
    if (!string.IsNullOrEmpty(cnpj))
    {
        List<Client> clients = db.Client
        .Where(c => cnpj.Equals(c.Cnpj))
        .ToList();

        return View(clients);
    }

    return View(db.Client.ToList());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:22:24.563

嗨，您应该创建一个自定义 ModelBinder 来传递自定义类型，如以下问题所示： [ASP.NET MVC controller actions with custom parameter conversion?](https://stackoverflow.com/questions/8406773/asp-net-mvc-controller-actions-with-custom-parameter-conversion)

然后他推荐了一篇非常好的博文： [ASP.NET MVC controller actions with custom parameter conversion？](https://stackoverflow.com/questions/8406773/asp-net-mvc-controller-actions-with-custom-parameter-conversion)

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:55:56.277

你不能简单地调用函数而不是重定向吗？从`Search`动作中调用它

```
Index(Client) 
```

重定向中发生的情况是使用重定向 URL 将 302 的 HTTP 代码发送到浏览器，然后浏览器向服务器发送新请求，因此`Client`是`null`因为浏览器无法将其发送回来。编辑： -
在阅读了这种情况下的评论后，您有两个选择
1.一个是进行另一个`Index`操作并将参数类型更改为字符串，因此现在您可以直接调用它
2.使用`TempData()`。这是 MVC 提供的一种特殊存储，它可以存储一个对象一段时间，并在第一次访问时失去它的值。
只需将客户端列表添加到临时数据`TempData.Add("Client",Client)`中，然后在操作索引中使用它作为`TempData["Client"]`

# html - 用显示将项目覆盖在某物之上：table-cell 和 min-height

> ID：10232954
> 
> 赞同：1
> 
> 时间：2012-04-19T16:52:41.773
> 
> 标签：html, css

使用`display: table-cell`时无法提供该元素`position:relative`。因此，为了用某些东西（例如半透明的 div）覆盖整个元素，您首先必须将内容包装在一个 div 中`position:relative`，然后将覆盖层放在那里。

但是，当我也在包装器上设置最小高度时，覆盖层不会延伸到整个高度，我似乎无法找到让包装器的内容高度感知的方法。是否仅使用 css 在具有 display:table-cell 和最小高度的 div 顶部有 100% 的高度覆盖？

```
<div style="table-row">
    <div style="table-cell; min-height: 100px">
        <div style="position: relative; height: 100%;"> // this refuses to extend to 100% height when the table row forces the cell height to grow
             <p> content </p>
             <div style="position:absolute; top:0;left:0;height:100%;width:100%"> // ... therefore so does this
             </div>
         </div>
    </div>
    <div style="table-cell; height: 150px"></div> // forces the entire row to grow in height
</div> 
```

# mysql - MySQL 使用 Filesort 和 Query 很慢？

> ID：10232957
> 
> 赞同：0
> 
> 时间：2012-04-19T16:52:48.263
> 
> 标签：mysql

我有一个查询：

```
SELECT listings.*, listingagents.agentid
FROM listings
LEFT JOIN listingagents ON (listingagents.id = listings.listingagentid)
LEFT JOIN ignore ON (ignore.system_key = listings.listingid)
WHERE ignore.id IS NULL
ORDER BY listings.id ASC 
```

我正在尝试提高此查询的性能，因为它非常慢并且给 MySQL 服务器带来了沉重的负载。

当我做一个 mysql 解释时，输出显示：

```
+--------+-------------+----------------+--------+- --------------+------------+---------+------------ ----------------+--------+------------------------ -+
| 编号 | 选择类型 | 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 | 额外 |
+--------+-------------+----------------+--------+- --------------+------------+---------+------------ ----------------+--------+------------------------ -+
| 1 | 简单 | 列表 | 全部 | 空 | 空 | 空 | 空 | 383360 | 使用文件排序 |
| 1 | 简单 | 上市代理| eq_ref | 初级 | 初级 | 4 | db.listings.listingagen... | 1 | |
| 1 | 简单 | 忽略 | 参考 | 系统密钥 | 系统密钥 | 1 | 常量 | 404 | 使用哪里；不存在 |
+--------+-------------+----------------+--------+- --------------+------------+---------+------------ ----------------+--------+------------------------ -+

```

我试着做一个简单的查询：

```
SELECT listings.*
FROM listings
ORDER BY listings.id ASC 
```

并且该查询也有“使用文件排序；”。

字段“listings.id”、“listingagents.id”和“ignore.id”是主键字段“listingagents.id”和“ignore.system_key”有索引。

我可以做些什么来改进第一个查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:01:55.790

尝试通过添加一些条件来减少列表范围（当前为 383360 行）。例如 id > x 或限制。

# django - 使用 Django social_auth 进行 REST 登录

> ID：10232961
> 
> 赞同：2
> 
> 时间：2012-04-19T16:52:58.697
> 
> 标签：django, rest, django-piston, django-socialauth

我被要求为我正在创建的 iOS 应用程序提供“使用 Facebook 登录”功能。该应用程序连接到使用 Piston 创建的 REST api，Web 应用程序使用 Django 创建并使用 social_auth。该应用程序还有一个 Facebook 登录。

我的想法是创建一个服务“FBLogin”，仅提供 Facebook 个人资料 UID（iPhone 上的单独 FB 登录程序以获取 ID）。使用 SocialAuth 模型，我可以使用 uid 和提供者查询数据库以获取用户...但是我如何使用身份验证机制来验证此用户实例？

有什么想法可以做到这一点吗？这感觉不太好......让用户实例通过身份验证是一件痛苦的事情......

用户名密码认证已经实现......没有问题。

顺便说一句，没有 django 经验……确实有很多其他开发经验，所以理解 python 和 django 并不难:)

发送 Y

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:49:40.517

它似乎并没有真正记录在任何地方，但您可以在 REST 处理程序中执行此操作：

```
from social_auth.backends.pipeline.social import associate_user
from social_auth.backends.facebook import FacebookBackend
from social_auth.models import UserSocialAuth
myextra_data = {
    'access_token' : 'jfkdlfsdgeyejfghfdsjdfpoweipuo',
    'id' : 123456789,
}
usa, created = UserSocialAuth.objects.get_or_create(provider = 'facebook',
                                                      uid=123456789)
usa.user = user
usa.extra_data = myextra_data
usa.save()
if created:
    associate_user(backend=FacebookBackend, user=user, uid=usa.uid) 
```

就数据如何`extra_data`以 YMMV格式格式化而言，这些都是特定于供应商的

# android - 复杂的表格或 ListView 布局

> ID：10232962
> 
> 赞同：1
> 
> 时间：2012-04-19T16:53:04.320
> 
> 标签：android, listview, tablelayout

我需要在我的 android 应用程序中实现一个组件，该组件显示如下图所示的数据：

![在此处输入图像描述](../Images/bc495370ddbab68185a89cf1db9a0d58.png)

我怎么能做到这一点？此表格组件的行为（滚动和其他）必须为`ListView`. 现在我有一个两级`ListView`where`"List 1 label"`和`"List 2 label"`are 父节点。我想把它们放在左边。也许我必须`TableLayout`在右栏中使用 where a `ListView`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:02:23.907

您可以使用 listview 作为主要项目。在适配器的 getview() 方法的另一侧，您可以根据要添加到右侧的项目数创建动态布局。通过根据要求在运行时动态化，您将能够生成 ui 并将其作为单个项目放置。或者我认为您使用的其他方法也是正确的，但在这种情况下，如果您不使用动态 ui，则要膨胀的表行数将得到固定。

# c# - 继承列表 ，希望通过字符串 ID 值而不是索引来检索项目

> ID：10232963
> 
> 赞同：1
> 
> 时间：2012-04-19T16:53:09.700
> 
> 标签：c#

我有一门课叫做问题。我有另一个名为 Questions 的类，它只是 List 创建集合的继承。

我怎样才能做到这一点，以便我可以通过它的 ID 属性而不是像这样的基于整数的索引来检索 Question 对象？：

```
Question q = Questions["someidhere"]; 
```

基本上，我正在寻找与 SqlDataReader 对象相同的功能，您可以在其中根据字段名称或索引检索字段。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T16:54:35.917

根本不要使用 a `List<T>`；用一个[`Dictionary<K,V>`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)

```
var dict = new Dictionary<string, Question>();
dict.Add("someidhere", new Question(...));
// ...
var q = dict["someidhere"]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T16:54:57.327

使用[`Dictionary<TKey, TValue>`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx). 这将做你需要它做的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T16:55:52.680

您可以为此目的使用[OrderedDictionary 。](http://msdn.microsoft.com/en-us/library/system.collections.specialized.ordereddictionary.aspx)OrderedDictionary 表示可由键或索引访问的键/值对的集合。

# twitter-bootstrap - 引导程序中的弹出窗口不起作用

> ID：10232964
> 
> 赞同：1
> 
> 时间：2012-04-19T16:53:13.613
> 
> 标签：twitter-bootstrap, popover

我正在使用引导程序，我正在尝试在链接上实现弹出效果。这是链接的代码

```
<a href="#" class="btn btn-danger" rel="popover" title="Title of popover" data-content="some text to display">Link popover</a> 
```

这是我在页面底部使用的 js 代码

```
<script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>  
<script src="js/jquery-1.7.2.min.js"></script>
<script src="js/bootstrap-transition.js"></script>
<script src="js/bootstrap-tooltip.js"></script>
<script src="js/bootstrap-popover.js"></script> 
```

什么都没有发生，我只能在正常的工具提示窗口中看到标题。任何的想法 ？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T16:55:59.900

你添加了这行代码吗？

```
$('.btn-danger').popover(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-11T13:01:40.923

加载引导`docs.min.js`脚本。

```
<script src="http://getbootstrap.com/assets/js/docs.min.js"></script> 
```

我遇到了同样的问题，由于某种原因，所需的 js 写在了这个文件中。

# javascript - 评论会影响性能吗？

> ID：10232989
> 
> 赞同：20
> 
> 时间：2012-04-19T16:54:25.207
> 
> 标签：javascript, performance, loops, comments, function-prototypes

我是否正确地说 JavaScript 代码没有被编译，甚至没有 JIT？如果是这样，这是否意味着评论会影响性能，并且我应该非常小心放置评论的位置？比如尽可能在函数定义的上方和外部放置函数注释，如果我想最大化性能，绝对避免在循环内放置注释？我知道在*大多数*情况下（至少在非循环情况下），性能的变化可以忽略不计，但我认为这将是一件值得了解和了解的事情，尤其是对于前端/js 开发人员. 另外，在我最近进行的 js 评估中提出了一个相关问题。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-19T16:56:59.490

> 我是否正确地说 JavaScript 代码没有被编译，甚至没有 JIT？

不会。尽管 JavaScript 传统上是一种“解释型”语言（尽管不一定如此），但大多数 JavaScript 引擎在必要时会即时编译它。V8（Chrome 和 NodeJS 中的引擎）用于立即快速编译，然后返回并积极优化任何经常使用的代码（旧的 FullCodegen+TurboFan 堆栈）；不久前进行了大量实际测量后，[他们切换](https://v8project.blogspot.co.uk/2017/05/launching-ignition-and-turbofan.html)到最初解析为 byteocde 和解释，然后在代码被大量重用时进行编译（新的 Ignition+TurboFan 堆栈），通过不编译运行显着节省内存- 一次设置代码。即使是不那么激进的引擎，几乎可以肯定至少会将文本解析为某种形式的字节码，并尽早丢弃注释。

请记住，“解释”与“编译”通常更多的是环境问题而不是语言问题。有 C 解释器，还有 JavaScript 编译器。语言往往与环境密切相关（就像 JavaScript 往往与 Web 浏览器环境相关联，尽管它的使用范围总是比这更广泛，甚至早在 1995 年），但即便如此（正如我们所见），可能会有变化。

> 如果是这样，这是否意味着评论会影响性能......

在初始解析阶段，非常非常*非常小。*但是评论很容易浏览过去，无需担心。

但是，如果您真的担心它，您可以使用诸如[Closure Compiler](https://developers.google.com/closure/compiler/)[`jsmin`](http://www.crockford.com/javascript/jsmin.html#)之类的工具来缩小您的脚本（即使只是简单的优化）。前者只会删除注释和不必要的空格，诸如此类的东西（仍然很有效）；后者这样做*并且*实际上理解代码并进行一些内联​​等。因此，您可以自由发表评论，然后使用这些工具确保在首次加载脚本时这些评论可能产生的任何微小影响都可以通过使用缩小工具绕过。

 *当然，关于 JavaScript 性能的问题是很难可靠地预测跨引擎，因为引擎差异很大。所以实验可以很有趣：

*   [这是](http://jsperf.com/is-there-a-cost-to-comments)一个实验，（理论上）每次都重新解析/重新创建函数
*   [这是一个](http://jsperf.com/is-there-a-cost-to-comments-v2)只解析/创建一次函数并重用它的函数

结果？我的看法是，测试的测量误差没有明显的差异。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-19T16:59:50.597

注释的最大影响是增大文件大小，从而减慢脚本的下载速度。因此，为什么所有专业网站都使用最小化器来生产高效版本，以将 js 缩减到尽可能小。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-19T16:58:28.480

它可能会产生一些影响。不过，效果非常简约（即使 IE6 也能正确处理评论！*待确认...*）。

然而，大多数人使用一个去除评论的缩小器。所以没关系。

还：

> V8 通过在执行 JavaScript 之前将其编译为本机机器代码来提高性能。

[来源](http://en.wikipedia.org/wiki/V8_%28JavaScript_engine%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-29T03:21:03.740

它[可以防止函数被内联](https://floitsch.blogspot.com/2012/03/optimizing-for-v8-inlining.html)，这会影响性能，尽管这不应该真的发生。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-14T18:48:40.763

在某些可能孤立的情况下，注释肯定会以某种方式阻碍代码执行。我正在编写一个冗长的用户脚本，在 Mac 上使用 TamperMonkey 的最新 Firefox 中使用，当我从脚本中删除冗长的注释时，几天来越来越沮丧的故障排除结束了，突然脚本执行停止完全挂在 Facebook 上。在新用户帐户上运行相同的确切脚本的多次来回比较，唯一的区别是评论，证明情况确实如此。*

# xml - 根据元素名称更改元素内容 XSLT

> ID：10232993
> 
> 赞同：0
> 
> 时间：2012-04-19T16:54:37.203
> 
> 标签：xml, xslt

这里是 XSLT 新手。我有一个看起来像任何东西的 XML 块，但是根据它的元素名称，我需要能够更改它的内容。问题是 XML 可以加前缀，也可以不加前缀。

带前缀的 XML 可能如下所示：

```
<POIS xmlns:tns="http://example.com/integration/docs" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <tns:POI>
      <tns:CTL>
         <tns:transaction_date/>
         <tns:record_qualifier/>
         <tns:start_date>2012-10-12 </tns:start_date>
         <tns:test_indicator>P</tns:test_indicator>
       </tns:CTL>
    </tns:POI>
 </tns:POIS> 
```

或不加前缀：

```
<POIS xmlns="http://example.com/integration/docs"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
 <POI>
      <CTL>
         <transaction_date/>
         <record_qualifier/>
         <start_date>2012-10-12</start_date>
         <test_indicator>P</test_indicator>
    </CTL>
  </POI>
 </POIS> 
```

当有值时，我想更改以**_date结尾的元素的内容。**

所以一个可能的输出将是：

```
<POIS xmlns:tns="http://example.com/integration/docs" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <tns:POI>
      <tns:CTL>
         <tns:transaction_date/>
         <tns:record_qualifier/>
         <tns:start_date>20121012 </tns:start_date>
         <tns:test_indicator>P</tns:test_indicator>
    </tns:CTL>
   </tns:POI> 
 </tns:POIS> 
```

这是我到目前为止所拥有的：

问题是它抱怨**tns: namespace**在更改的元素上添加前缀或为非前缀 XML 元素放置一个空白名称空间。

有什么解决办法吗？这是一个实用程序转换，所以我希望它尽可能通用。

```
 <xsl:stylesheet version="2.0"      
    xmlns:xp20="http://www.oracle.com/XSL/Transform/
    java/oracle.tip.pc.services.functions.Xpath20" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:template match="node()|@*">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template>

    <xsl:template match="node()[ends-with(name(), '_date')]">
     <xsl:choose>
      <xsl:when test="(text())" >
             <xsl:element name="{name()}" >
      <xsl:value-of select ="xp20:format-dateTime(text(),'[Y0001][M01][D01]')" /> 
      </xsl:element>
      </xsl:when>
      <xsl:otherwise>
     <xsl:copy>
          <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>   
      </xsl:otherwise>
    </xsl:choose>  
       </xsl:template>
    </xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:06:08.810

尝试更改`<xsl:element name="{name()}">`为`<xsl:element name="{local-name()}">`.

# jquery - 如何使用 python 框架 Splinter 与 jQuery 颜色框交互？

> ID：10232994
> 
> 赞同：1
> 
> 时间：2012-04-19T16:54:44.443
> 
> 标签：jquery, python, django, testing, colorbox

我正在使用带有 Chrome 驱动程序的 Splinter 来启动我的网站。我可以与页面上的元素进行交互。在某些时候，我单击打开（在 Ajax 中）一个颜色框的链接。
如何等待 ajax 响应，然后使用 Splinter 选择/填充颜色框中的某些字段？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T02:24:06.850

您可以使用 is_element_present 方法来验证元素是否存在：[http ://splinter.cobrateam.info/docs/matchers.html#checking-the-presence-of-elements](http://splinter.cobrateam.info/docs/matchers.html#checking-the-presence-of-elements)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:59:52.130

我猜是这样的

```
$(selector).colorbox({
    type:'iframe',
    ....

    onComplete:function(){

        //Ajax is done and now you can operate with this guy 

    }

}); 
```