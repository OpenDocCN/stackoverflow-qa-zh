# StackOverflow 问答 11397000-11397999

# html - Internet Explorer 中嵌套列表的定位

> ID：11397001
> 
> 赞同：1
> 
> 时间：2012-07-09T14:23:13.957
> 
> 标签：html, css

我正在使用仅使用 CSS 和 HTML 的动态侧边菜单。该菜单在除 Internet Explorer 之外的所有浏览器中都能正常工作，但在 IE 中，构成子菜单的嵌套列表被放置在离右侧约 50 像素的位置，因此子菜单和主菜单之间存在间隙。菜单在此页面的左侧

[http://www.mcstech.net/computer-training/visio/](http://www.mcstech.net/computer-training/visio/)

这是代码。

```
div.sidemenu{width:200px;}
div.sidemenu ul{background:#EBEBEB;list-style:none;margin:0;padding:0;width:200px;}
div.sidemenu li{float:none;font-size:1.2em;}
div.sidemenu li a{color:#333333;display:block;line-height:35px;text-align:left;text-decoration:none;margin:0px;padding:5px;text-align:left;text-decoration:none}
div.sidemenu li a:hover, .sidemenu ul li:hover a{background: #cccccc url('images/hover.gif') bottom center no-repeat;color:#333333;text-decoration:none;}
div.sidemenu li ul{background:#EBEBEB;display:none;height:auto;padding:0px;margin-left:200px;margin-top:-32px;border:0px;position:absolute;width:220px;z-index:200;/*top:1em;/*left:0;*/}
div.sidemenu li:hover ul{display:block;}
div.sidemenu li li {background:url('images/sub_sep.gif') bottom left no-repeat;display:block;float:none;margin:0px;padding:0px;width:220px;font-size:1.1em;}
div.sidemenu li:hover li a{background:none;}
div.sidemenu li ul a{display:block;margin:0px;padding:0px 10px 0px 15px;text-align:left;}
div.sidemenu li ul a:hover, .sidemenu li ul li:hover a{background:#cccccc url('images/hover_sub.gif') center left no-repeat;border:0px;color:#333333;text-decoration:none;}
div.sidemenu p{clear:left;}
div.sidemenu img {padding:0px 15px 5px 2px;width:25px;height:25px;}

<div class="sidemenu">
<ul>
   <li><a href="#"><img src="/icon_excel_small.jpg"><span>Excel Training</span></a>
      <ul>
         <li><a href="#"><span>Basic</span></a></li>
         <li><a href="#"><span>Intermediate</span></a></li>
         <li><a href="#"><span>Advanced</span></a></li>
      </ul>
   </li>
   <li><a href="#"><img src="/icon_access_small.jpg"><span>Access Training</span></a>
      <ul>
         <li><a href="#"><span>Basic</span></a></li>
         <li><a href="#"><span>Intermediate</span></a></li>
         <li><a href="#"><span>Advanced</span></a></li>
      </ul>
    </li>
</ul>
</div> 
```

谢谢您的帮助。史蒂文

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:26:32.160

我停止了与 IE 的斗争。我用它来为 IE 添加一个特殊的 CSS。您可以删除那里的 50 像素并针对 IE 进行调整。

```
<!--[if IE]> <link href="/css/ie.css" rel="stylesheet" type="text/css"> <![endif]--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:34:03.067

我认为这可能会有所帮助。

在您的顶级 LI 元素上使它们定位：相对

在您的子菜单上 UL 元素删除 margin-left 并添加 left:200px

# extjs - ExtJs4 及其 MVC：如何将所有可执行代码从“内联”处理程序移动到单独的控制器文件？

> ID：11397003
> 
> 赞同：2
> 
> 时间：2012-07-09T14:23:14.567
> 
> 标签：extjs, extjs4, extjs-mvc

在 ExtJS 4 中，新特性是模型-视图-控制器架构。然而，ExtJs4 示例是为一些简化的案例制作的，因此违反了这种意识形态。

我创建了 MVC javascript 文件（控制器、视图、模型、存储）的标准层次结构。在视图文件中，我在某些时候有一个按钮。

如果您在线查看示例，通常是这样的代码：

```
 items: [
                    {
                        xtype: 'button',
                        styleHtmlContent: true,
                        text: 'Upload image',
                        flex: 1,
                        formBind: false,
            handler: function() {...}
            ...
                      }] 
```

因此，即使是 ExtJS4 示例也“建议”将可执行部分放入表单定义中。虽然 MVC 确实要求所有操作都驻留在控制器 javascript 文件中。

另一个问题是表格中的操作列。下面是标准表配置中列的定义：

```
 xtype: 'actioncolumn',
     width: 50,
     fixed: true,
     altText: 'Actions',
      items: [
                  {
         icon: '/delete.png',
         tooltip: 'Delete',
         handler:function (grid, rowIndex,colIndex){
                ...} 
```

问题是，这里的处理程序接受一些特定于网格的参数！

提醒一下，在 extjs 4 中，控制器文件的规范示例类似于

```
 Ext.define('MyApp.controller.mainController', {
 extend: 'Ext.app.Controller',

 onButtonClick: function(button, e, options) {
  //  alert("Button has been clicked "+button);
     // TODO which button?

},

init: function() {
    this.control({
        "button": {
            click: this.onButtonClick
        }
    });

}
}); 
```

我的问题是如何重新排列代码以便： 1\. 删除处理程序：屏幕上任何按钮的指令 2\. 将操作附加到控制器文件中的按钮，当然包括单独按钮的单独操作。3.对actioncolumn表列做同样的操作，成功识别出哪个行哪个列的哪个动作触发了（即完全把函数调用从“handler”转移到controller文件）。

提前致谢， 阿斯卡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:36:32.760

ExtJs 示例并非都是最新的 MVC 架构。更重要的是，MVC 不是强制设计——一些用户可能不喜欢使用它，所以展示没有 MVC 的示例仍然很重要。

您提出的几乎所有问题都[在本文档教程](http://docs.sencha.com/ext-js/4-1/#!/guide/application_architecture)中得到了解答。

With regards to 3: I think it is some misleading from your part. Although you do define `this.onButtonClick' in your controller, the called function will still get all the parameters, just like your button handler method would - the caller component is usually the first parameter delivered with each event. You can, of course, just define more specific selectors using actions or ids in your controller. Again see the link above for an example.

# c# - Sharepoint 字段或属性“正文”不存在 ServerException

> ID：11397004
> 
> 赞同：3
> 
> 时间：2012-07-09T14:23:16.720
> 
> 标签：c#, .net, sharepoint, com

我正在尝试使用 C# 中的客户端对象模型以编程方式将讨论帖子插入到 Sharepoint 讨论板列表中。我正在使用以下代码：

```

var discussionList = sharepointContext.Web.Lists.GetByTitle("Discussion");

    var discussionItem = Utility.CreateNewDiscussion(sharepointContext, discussionList, "Test");

                讨论项目[“正文”] =“世界你好！”
                讨论项目[“作者”] = 22;
                讨论项[“编辑”] = 22;
                sharepointContext.Load(discussionItem);
                讨论项目.更新（）；
                sharepointContext.ExecuteQuery();

```

但是，每当我运行它时，我都会收到此异常

```
    Microsoft.SharePoint.Client.ServerException 未处理
      Message=Field 或属性“Body”不存在。
      源=Microsoft.SharePoint.Client.Runtime
      服务器错误代码=-1"

```

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T02:44:54.223

问题中的代码不起作用的原因是您`Update()` *在*调用`SPContext.Load()`. 如果你`Update()`先打电话，你会没事的。

# java - List 对象是否通过引用传递？

> ID：11397008
> 
> 赞同：36
> 
> 时间：2012-07-09T14:23:24.673
> 
> 标签：java, list

> **可能重复：**
> [Java 是按引用传递吗？](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)

对象是否`List`通过引用传递？换句话说，如果我将一个`ArrayList (java.util.ArrayList)`对象传递给一个类，当我更改它时它会自动更新吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-09T14:25:02.983

> 换句话说：如果我将一个 ArrayList (java.util.ArrayList) 对象传递给一个类，当我更改它时它会自动更新吗？

是的

> List 对象是否通过引用传递？

参考价值将被传递

```
public updateList(List<String> names){
 //..
} 
```

**解释**

当您调用`updateList(someOtherList);`其值时`someOtherList`，引用将被复制到`names`（方法中的另一个引用，逐位）所以现在它们都引用内存中的同一个实例，因此它会改变

* * *

**看**

*   [Java 是“按引用传递”还是“按值传递”？](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-09T14:26:15.183

是的`List`，您传递给方法的 a 是通过引用传递的。您添加到`List`方法内部的任何对象仍将在`List`方法返回后。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-09T14:26:05.157

如果您以一种方法添加到列表中，则其在第一种方法中的原始引用也将包含新项目。

[java 是按值传递的，对于对象，这意味着引用是按值传递的](https://stackoverflow.com/a/40523/106261)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T14:25:09.053

是的，因为您只需将`ArrayList`-Object 的引用传递给您的`Object`.

# ruby-on-rails - 使用 capybara has_context 一次检查多行

> ID：11397009
> 
> 赞同：3
> 
> 时间：2012-07-09T14:23:29.277
> 
> 标签：ruby-on-rails, selenium, cucumber, capybara

我有一个网页，我以打印机友好的格式显示，标题后跟属于该组的项目。例子：

```
Headline1
=========
Item1
Item2
Item3

Headline2
=========
Item4
Item5 
```

我想使用 cucumber + capybara 运行功能测试并验证页面内容是否正确。我将如何尽可能简单地做到这一点？因为我想确保每个项目都在正确的标题下结束。

我的第一次尝试是使用

```
page.should have_content"Headline1
=========
Item1
Item2
Item3

Headline2
=========
Item4
Item5" 
```

但这给了我一个奇怪的错误：

```
expected there to be content "Headline1\n=========\nItem1\n and so on" in "Headline1\n=========\nItem1\n and so on" 
```

换句话说，这两行是完全一样的！！！为什么这不起作用？任何解决方法？请注意，该页面仅包含基本文本，因此没有 div 项目或我可以在其中检查的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:34:21.623

使用`page.text`with `include?`or`match`方法。

[http://robots.thoughtbot.com/post/8399836754/multiline-strings-in-capybara](http://robots.thoughtbot.com/post/8399836754/multiline-strings-in-capybara) [http://praktikanten.brueckenschlaeger.org/2011/11/15/working-in-cucumber-with-new-lines-and -have_content](http://praktikanten.brueckenschlaeger.org/2011/11/15/working-in-cucumber-with-new-lines-and-have_content)

第一个链接的引用：

> 在 Capybara 中检查多行字符串时，您需要使用 page.text，因为 page.source 不保留新行 - 因此“a\nb”会在 page.source 中显示为“ab”。

# c# - 如何播放来自两个不同来源的音频和视频？

> ID：11397019
> 
> 赞同：1
> 
> 时间：2012-07-09T14:23:52.333
> 
> 标签：c#, audiovideoplayback

我有一些由应用程序编码的电影，该应用程序将音频和视频分隔在两个不同的文件中。我需要编写一个应用程序来像普通电影一样同时播放这两个文件，还需要添加字幕。

有任何想法吗？还是一段代码？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:27:04.347

也许[这个讨论](https://stackoverflow.com/questions/8802429/playing-background-audio-and-video-both-at-same-time)可以为您指明正确的方向。
如果 XNA 为您做这件事，那是有道理的。许多游戏都需要来自不同来源的视频和音频。

# python - 如何使用 twisted 监听多个 udp 端口 ？

> ID：11397020
> 
> 赞同：5
> 
> 时间：2012-07-09T14:23:55.153
> 
> 标签：python, twisted

我使用 Python 和通过 UDP 通信的 Twisted 库编写了一个服务器。这一切都很好。

我想做的是扩展该服务器，以便它可以同时接受多个 UDP 端口上的消息（我使用不同的端口来隔离返回的信息，而不是关于请求的来源）。我尝试先做最简单的事情作为测试 - 我编写的代码如下所示：

```
reactor.listenUDP(port, handler)
reactor.listenUDP(port+1, handler) 
```

（第一行是我服务器中最初的那个；第二行是要监听的第二个端口。）

当我运行它时，我得到以下信息：

```
File "./rspServer.py", line 838, in mainLoop
  reactor.listenUDP(self.args.port+1, udpHandler)
File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/twisted/internet/posixbase.py", line 347, in listenUDP
  p.startListening()
File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/twisted/internet/udp.py", line 86, in startListening
  self._connectToProtocol()
File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/twisted/internet/udp.py", line 106, in _connectToProtocol
  self.protocol.makeConnection(self)
File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/twisted/internet/protocol.py", line 665, in makeConnection
  assert self.transport == None
AssertionError 
```

我认为我不能添加第二个 UDP 监听器，但这正是我想做的（实际上，总共有 18 个监听器——说来话长）。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T14:43:01.400

对 listenUDP() 的每次调用都需要一个唯一的处理程序实例。除此之外，您的代码看起来不错。

# php - 从 PHP 将 NULL 插入 TSQL 日期

> ID：11397021
> 
> 赞同：1
> 
> 时间：2012-07-09T14:24:03.660
> 
> 标签：php, tsql, date, insert, null

我需要在我的 TSQL 表中的日期字段中插入一个 NULL 值。

当我从我的 php 构建查询时，我会：

```
 if (!is_null($object->getDate()))
        {
            $sSql .=" @Date =  '".$object->getDate()."',";   
        }
         else
        {
            $sSql .=" @Date =NULL,";

        } 
```

但这会插入 01/01/1900 0:00:00 而不是 NULL

该列是 datetime null，并且在过程中：

```
AND (@Date IS NULL OR CONVERT(DATETIME, @Date, 102) = MYDB.dbo.MYTABLE.Date) 
```

我正在设置这样的日期：

```
$objet->setDate(NULL); 
```

我究竟做错了什么 ？？

非常感谢

# php - 在 Javascript 和 PHP 中散列一个数组

> ID：11397022
> 
> 赞同：1
> 
> 时间：2012-07-09T14:24:03.723
> 
> 标签：php, javascript, json

我正在尝试将消息从 Javascript 客户端传递到 PHP 网络服务器。为了增加一层安全性，我想用哈希对数据对象进行签名。

```
/* Generate signature of the data with the password */
that.signEnvelope = function(data,password)
{
      return CryptoJS.SHA256(JSON.stringify(data) + password).toString();
}; 
```

这很快在服务器上崩溃了。JSON.stringify 函数不会为服务器上的 json_encode 生成 1:1 匹配的字符串，因此无法验证哈希。

```
protected function verifySignature($remoteSignature,$data,$privateKey)
{
    /* Combine json & key samen , then sha256 */
    $localSignature = hash('sha256',json_encode($data) . $privateKey);
    return ($localSignature === $remoteSignature);
} 
```

是否有另一种我可以在 PHP 和 Javascript 中实现的算法来生成可散列的字符串？

**结论**

允许跨平台的 json_encode 并不是一件明智的事情。没有标准的实现。

相反，我现在只允许带有字符串键/值对的数组，它们更容易连接和验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:51:41.763

您在那里遇到的不限于某些不同的空白/换行符。值得一提的是，不同的字符集会导致不同的输出。ISO8859-15 Euro-Sign 是 1 个字节长，UTF8 Euro-Sign 是 3 个字节长，并且总是有机会使用 \u#### 声明对 Char 进行编码。JSON-libs 并非旨在在不同平台上生成可比较的字符串。

如果您仍想使用 JSON，则必须使用在所有输入上表现相同的库，或者构建您自己的库。JSON 很容易手动生成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:27:50.007

您可以使用 JS 版本`json_encode`来获得 1:1 匹配：

[http://phpjs.org/functions/json_encode](http://phpjs.org/functions/json_encode)

# jquery - 触控设备的文档点击功能

> ID：11397028
> 
> 赞同：70
> 
> 时间：2012-07-09T14:24:13.327
> 
> 标签：jquery, css

我有一个使用 jquery 工作的子导航 - 用户单击顶级列表项，例如触发下拉列表的“服务”。下拉菜单通过单击“服务”链接进行切换。我已经做到了，因此用户可以单击屏幕上的任意位置以将下拉菜单切换到关闭状态。但是由于该站点具有响应性，我希望用户能够单击（触摸）屏幕上的任意位置以关闭下拉菜单，但我的问题是它不适用于触摸设备。

我为文档点击设置的代码是：

```
$(document).click(function(event) { 

  if ( $(".children").is(":visible")) {
    $("ul.children").slideUp('slow');
  }

}); 
```

我假设 document.click 可能不适用于触摸设备，如果不能，有什么解决方法可以达到相同的效果？

谢谢

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2012-07-09T15:21:05.490

更新！在现代浏览器中，点击事件将被触发，因此您不需要添加额外的事件`touchstart`或`touchend`事件`click`就足够了。

这个先前的答案在认为点击很特别的浏览器中工作了一段时间。它最初包括一个实际上从未标准化的“触摸”事件。

除非你有以下问题：

```
$(document).on('click', function () { ... }); 
```

没有必要改变任何东西！

以前的信息，更新删除`touch`...

要通过单击或触摸触发功能，您可以更改：

```
$(document).click( function () { 
```

对此：

```
$(document).on('click touchstart', function () { 
```

`touchstart`一旦元素被触摸，该事件就会触发，因此`touchend`根据您的情况使用它可能更合适。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2014-09-08T15:16:10.677

touchstart 或 touchend 不好，因为如果你滚动页面，设备会做一些事情。因此，如果我想通过点击或单击元素外部来关闭窗口并滚动窗口，我已经完成了：

```
$(document).on('touchstart', function() {
    documentClick = true;
});
$(document).on('touchmove', function() {
    documentClick = false;
});
$(document).on('click touchend', function(event) {
    if (event.type == "click") documentClick = true;
    if (documentClick){
        doStuff();
    }
 }); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-09T14:52:02.917

你可以使用[jqTouch](http://www.jqtouch.com/)或[jquery mobile](http://jquerymobile.com/)吗？在那里处理触摸事件要容易得多。如果没有，那么您需要模拟点击触摸设备，请按照以下文章操作：

[iphone-touch-events-in-javascript](http://ross.posterous.com/2008/08/19/iphone-touch-events-in-javascript)

[触摸演示](http://jsfiddle.net/bN2Jr/6/)

[更多在这个线程](https://stackoverflow.com/questions/3705937/document-click-not-working-correctly-on-iphone-jquery)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-09T14:43:33.477

要将它应用到任何地方，您可以执行类似的操作

```
$('body').on('click', function() {
   if($('.children').is(':visible')) {
      $('ul.children').slideUp('slow');
   }
});
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-01-10T20:03:08.733

如上所述，使用`'click touchstart'`将获得所需的结果。但是，如果`console.log(e)`您单击，您可能会发现当 jquery 将触摸识别为单击时-您将从单击和触摸启动中获得 2 个操作。下面的解决方案对我有用。

```
//if its a mobile device use 'touchstart'
if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {
    deviceEventType = 'touchstart'
} else {
//If its not a mobile device use 'click'
    deviceEventType = 'click'
}

$(document).on(specialEventType, function(e){
    //code here
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-20T05:26:20.287

批准的答案不包括必要的 return false 以防止 touchstart 在实现 click 时调用 click ，这将导致运行处理程序 twoce。

做：

```
$(btn).on('click touchstart', e => { 
   your code ...
   return false; 
}); 
```

# c++ - 使用 bool 非类型参数实例化类模板时出错

> ID：11397029
> 
> 赞同：1
> 
> 时间：2012-07-09T14:24:14.373
> 
> 标签：c++, templates

我很难弄清楚为什么下面的代码以及显示的依赖项无法编译，并希望帮助解决它。

主文件

```
#include <cstdlib>
#include <iostream>

#include "Foo.h"
#include "Bar.h"

int main()
{
    Foo<Bar> f1;        // ERROR
    Foo<Bar,true> f2;   // works
    return EXIT_SUCCESS;
} 
```

Foo.h

```
template<typename T, bool S = T::HAS_NATIVE_SUPPORT>
struct Foo
{
}; 
```

酒吧.h

```
struct Bar
{
    static const bool HAS_NATIVE_SUPPORT;
}; 
```

条形图.cpp

```
#include "Bar.h"
const bool Bar::HAS_NATIVE_SUPPORT = true; 
```

我在 Visual Studio 2008 命令提示符中收到以下错误

```
cl main.cpp Bar.cpp
main.cpp(12) : error C2975: 'S' : invalid template argument for 'Foo', expected compile-time constant expression
        c:\tmp\c++tests\so\Foo.h(1) : see declaration of 'S' 
```

在 g++ (GCC) 4.5.3 中，我收到以下错误消息：

```
$ g++ main.cpp Bar.cpp
main.cpp: In function ‘int main()’:
main.cpp:12:9: error: ‘Bar::HAS_NATIVE_SUPPORT’ is not a valid template argument for type ‘bool’ because it is a non-constant expression
main.cpp:12:12: error: invalid type in declaration before ‘;’ token 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:28:00.133

模板参数的值必须在编译时知道，但是通过在另一个源文件中初始化成员的值，编译器无法在需要时看到该值是什么。

您需要在类中初始化静态成员，使其可用作编译时常量：

```
struct Bar
{
    static const bool HAS_NATIVE_SUPPORT = true;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:44:04.863

A static member variable is only compile time constant if it is also initialized inside the class body.

So either initialize it there, or use one of the following variants:

```
template <bool B>
void Y () {}

struct X {
    enum { foo = true };
    enum : bool { bar = true };
    static const bool frob = true;
    static constexpr bool frobnicate = true;
};

int main () {
    Y<X::foo>();
    Y<X::bar>();
    Y<X::frob>();
    Y<X::frobnicate>();
} 
```

# git - Git远程：错误-'远程：错误：git push后无法取消链接旧的'filename_here'（权限被拒绝）'

> ID：11397030
> 
> 赞同：4
> 
> 时间：2012-07-09T14:24:17.017
> 
> 标签：git, permissions, file-permissions

大约 2 周以来，每当我执行 git push 时，我都会收到大约 200 个错误，读取这个远程：错误：无法取消链接旧的 'wp-plugins/foobar.php'（权限被拒绝）。但是我仍然可以将文件推送到服务器——只是没有 wp-plugins 目录中的任何文件。

今天在对权限被拒绝错误进行了一些研究之后，我运行了这个命令： git reset --hard master （来自[https://github.com/mxcl/homebrew/issues/2906](https://github.com/mxcl/homebrew/issues/2906)）

现在我的 Wordpress 目录中的每个文件都给了我远程：错误：无法取消链接旧的 'directory/filename.php'（权限被拒绝）错误（大约 2000 个）！推送似乎正常进行，但是当我检查我尝试推送的文件时，本地文件已更改，但远程文件仍然未更改。

如果现在还不是很明显，那么我对 Git 还是很陌生。请帮忙。我的新工作必须使用 Git。作为一名自由职业者，我不需要版本控制，但现在这是我必须更新网站的唯一工具，我不能，我很担心。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T14:29:31.913

根据您的描述，您似乎正在推入一个远程存储库，该存储库设置为将文件签出到本地工作目录，并且该目录中的权限不允许签出。如果是这种情况，一个放置得当的 chmod 命令应该可以解决问题（例如`chmod -R u+w *`使用用户凭据运行）

# java - 监听 View (List Header) onTouch 事件并禁用 ListView 上的滚动

> ID：11397031
> 
> 赞同：1
> 
> 时间：2012-07-09T14:24:21.303
> 
> 标签：java, android, android-layout, android-listview

当用户触摸列表标题并执行时，我基本上是在尝试禁用列表视图上的滚动`MotionEvent.ACTION_MOVE`。

*如果您想知道为什么会出现这种疯狂的实施？*- 我基本上在我的 listView Header 上构建了一个自定义搜索栏，它可以工作，`MotionEvent.ACTION_MOVE`并且由于视图是列表视图的标题，它不应该滚动，直到用户从这个自定义标题视图中取消触摸。

**所以我的问题/问题是。**

现在我有2个java类。Activity（它有这个列表视图）和自定义 Header（它是一个`View`实现`OnTouchListener`）。

1.  **当我的标题视图被触摸到此列表视图（活动）以禁用滚动时，如何传递值？**
2.  **似乎可以通过覆盖来禁用列表视图滚动，如此[处](http://blog.siegerstein.com/archives/206)`dispatchTouchEvent`所述。由于我的不是自定义列表视图，是否可以在活动类本身中禁用？**

对不起，我只是在学习，所以请不要介意我的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T06:48:06.923

好的，我对我提出的问题有点沉默，所以我正在回答我问题的前半部分。

**当我的标题视图被触摸到此列表视图（活动）以禁用滚动时，如何传递值？**

我在创建`interface`. 所以我创建了一个`public static interface`有`public void headerTouched(Boolean touchEvent);`方法的。我的类具有的代码`listView`是，`implementer`因此它会自动从接口类覆盖此方法。在这个类中，我创建了一个私有变量（在我的例子`boolean`中：），它监听从驱动程序类返回的布尔值。我的驱动程序类是具有此接口对象的 HeaderView，并通过它设置值。为了帮助新手了解界面，我在下面发布了我的代码。

**接口类**

```
public static interface HeaderTouchListener{
    public void headerTouched(Boolean touchEvent);
} 
```

**实施者类**

```
private boolean headerTouched = false;
public void headerTouched(Boolean touchEvent) {
    headerTouched = touchEvent;
} 
```

**司机班**

```
HeaderTouchListener touchListner = new ImplementerClassName();
touchListner.headerTouched(true); 
```

我仍然无法弄清楚如何在我的列表视图上禁用滚动。有关它的更多信息，请关注此问题[Set dispatchTouchEvent for List View without create custom List View class。（用于禁用滚动）](https://stackoverflow.com/questions/11401164/set-dispatchtouchevent-for-list-view-without-creating-custom-list-view-class-f)

# javascript - jQuery Mobile // 主题化我的动态对话框

> ID：11397033
> 
> 赞同：0
> 
> 时间：2012-07-09T14:24:36.953
> 
> 标签：javascript, jquery, themes, theming

在我的通知对话框中，我想通过参数对话框类型指定。但主题毕竟不是管理的，所以输入和其他人不是我的javascript函数中的css的主题。

HTML：

```
 <div id="notification" data-role="page" >

    <div data-role="header" data-theme="c">
        <h1></h1>
    </div>
    <div data-role="content" data-theme="c">
        </div>

</div> 
```

JAVASCRIPT：

```
function notification(title, text, notification_transition){
    $.mobile.changePage( "#notification", {
            transition: notification_transition,
            role: "dialog"
    } );

    $("#notification h1").html(title);
    $("#notification p.message").html(text);

    $("#notification div[data-role=content]").html('<p class="message"></p>'+
        '<p>Identifiant</p>'+
        '<input type="text" value="" data-theme="a">');

    try
    {
      navigator.notification.vibrate(500);
    }
    catch(error) {}
} 
```

如何在 $("#notification div[data-role=content]").html(); 之后重新启动 jaquery 移动主题 提前感谢 Metos

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:28:52.160

您可以尝试以下方法：http: [//forum.jquery.com/topic/how-to-refresh-the-theme-of-a-button](http://forum.jquery.com/topic/how-to-refresh-the-theme-of-a-button)

# facebook - 在使用 Facebook Graph API 的查询中使用 place 参数是否会影响帖子搜索的结果？

> ID：11397042
> 
> 赞同：0
> 
> 时间：2012-07-09T14:25:04.047
> 
> 标签：facebook, facebook-graph-api, rest

当用于使用 Facebook Graph API 搜索帖子时，我一直在尝试测试 place 参数。不过好像不影响结果！！例如：

[https://graph.facebook.com/search?q=coffee&type=post¢er=44,55&distance=1000](https://graph.facebook.com/search?q=coffee&type=post&center=44,55&distance=1000)

当我更改纬度和经度 (44,55) 或半径 (1000) 的值时，前面的 URL 结果不会改变

难道我做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:01:25.103

我认为“距离”和“中心”参数仅在您使用参数“type=place”时才有效。

例如，下面的两个链接返回证明了这一点。

https://graph.facebook.com/search?q=coffee&type=place¢er=44.270962,55.096039&distance=1000&access_token=[access_token]

https://graph.facebook.com/search?q=coffee&type=place¢er=53.270962,-6.096039&distance=1000&access_token=[access_token]

一旦你返回了所有的地方，你就可以在每个地方进一步搜索他们包含咖啡的帖子......

# java - 如何从同一个包中加载一个txt文件

> ID：11397046
> 
> 赞同：0
> 
> 时间：2012-07-09T14:25:08.510
> 
> 标签：java, file-io

我有一个像`com/tcs/incubation/sml/crawler/mediasources/twitterriver`. 我有一个 txt 文件，我需要从这个包结构 ietwitterriver 加载它。

我可以通过添加 src 来访问 `src/com/tcs/incubation/sml/crawler/mediasources/twitterriver`文件

```
BufferedReader objBufferedReader = new BufferedReader(new FileReader(filepath)); 
```

此文件路径将包含使用`.getAbsolutePath()`方法的绝对路径。

那么我如何从`com/tcs/incubation/sml/crawler/mediasources/twitterriver`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:28:53.863

如果文件属于你的程序的内部，只需使用`TwitterRiver.class.getRessourceAsStream()`来获取一个 InputStream。

# sql-server - DBContext SaveChanges 如何在内部工作？

> ID：11397051
> 
> 赞同：3
> 
> 时间：2012-07-09T14:25:22.907
> 
> 标签：sql-server, entity-framework, dbcontext

使用带有 SQL Server 2008 的实体框架，我们有一个写入大量数据的应用程序，例如每分钟 1000 行新行，每行都在它们自己的 DBContext.saveChanges 调用中（我们没有将它们批处理在一起）

问题是我们的写作落后了，远远落后。以至于事情似乎在颠簸。例如，我们将在两分钟内用新行调用 saveChanges 数千次，并且不会进行一次写入，然后突然之间我们将获得少量写入（但很多都完全丢失了）。

我们进行了 SQL 跟踪，发现 SQL 甚至在 10% 的 saveChanges 调用中都没有收到写入命令。

因此，在 saveChanges 和 SQL Server 之间似乎存在问题。我想知道这个电话是如何工作的。它使用线程池吗？排队？一些我们可能会溢出的缓冲区？也许由于写入量很大，它默默地失败了？

MSDN 在解释这些东西的实际工作原理方面毫无用处

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T15:08:23.813

阅读[msdn 中的性能注意事项，](http://msdn.microsoft.com/en-us/library/cc853327.aspx)并查看[Fastest Way of Inserting in Entity Framework](https://stackoverflow.com/questions/5940225/fastest-way-of-inserting-in-entity-framework)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:29:26.653

我不知道它在内部是如何工作的，但是通过这种过载，您最好将数据插入队列并使用一个或多个（但有限的）线程来清空队列并写入数据库。您可以测试和调整线程数量，以免丢失数据。

# notepad++ - notepad++ 在宏中运行插件

> ID：11397055
> 
> 赞同：3
> 
> 时间：2012-07-09T14:25:33.207
> 
> 标签：notepad++

我想编写一个从日志文件中获取一些文本的宏。某些开始和结束文本（xml 标记）的宏搜索并选择它们之间的文本。它将此文本复制到新文件中。

然后我想将其格式化为 xml 样式，所以我调用插件“xml 工具”->“漂亮打印”并从菜单“语言”->“XML”中选择

但我想将这两个最后步骤包含在我的宏中。这样我只需要按一个组合键，而不是 3。有可能吗？录制和保存宏时，他忽略了我在菜单中执行的 2 个操作。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:50:14.473

我从未使用过您的特定插件，但您通常可以为插件命令分配键盘快捷键（设置>快捷方式映射器>插件命令）。因此，如果您这样做，您应该能够在宏中注册快捷键。

# matlab - MATLAB - 在 gui 中更新绘图？

> ID：11397059
> 
> 赞同：4
> 
> 时间：2012-07-09T14:25:41.630
> 
> 标签：matlab, matlab-figure, matlab-guide

matlab 入门指南，遇到了一个绊脚石。把它当作玩具 gui 来说明我的问题一样简单。gui（名为 asas）有一个按钮和一个轴。按钮的回调读取

```
axesHandle= findobj(gcf,'Tag','axes1');
x=rand(randi(10+20,1),4);
plot(axesHandle, x) 
```

我没有编写其他代码（指南编写了它）。
我第一次按下按钮时，一切都很好：情节完成了。第二次，我从控制台收到一个错误：

```
Error using plot
Vectors must be the same lengths.

Error in asas>pushbutton1_Callback (line 83)
plot(axesHandle, x)

Error in gui_mainfcn (line 96)
        feval(varargin{:});
etc... 
```

我想绘制新数据 x，替换旧数据。
看起来 matlab 并没有替换要绘制的数据，而是以某种方式试图附加到绘图中？

我已经搜索过，但没有找到任何适用的内容。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T17:23:15.977

解释并不简单——如果您是 MATLAB 及其句柄图形子系统的新手，当然也不会。

您的代码原样，逐行：

```
axesHandle= findobj(gcf,'Tag','axes1');
x=rand(randi(10+20,1),4);
plot(axesHandle, x); 
```

第一行尝试在当前图形（“获取当前图形”）中定位属性设置为字符串`gcf`的任何子对象。我想你知道这件事吗？第二行当然会生成一些要绘制的随机数据。第三行将数据绘制在.`'Tag'``'axes1'``x`

但是在`plot`-call 之后，该属性`'Tag'`实际上被重置为`''`（空字符串），这反过来又会`findobj`在任何后续的轴句柄搜索中失败。因此，变量`axesHandle`不包含实际句柄，而是空矩阵`[]`。这将使绘图默认为另一种模式，将空矩阵解释为 x 轴的数据（的第一个参数`plot`）。这预计会导致您收到错误：

```
...
Error using plot Vectors must be the same lengths.
... 
```

Dan 在上面的评论中的解决方案是一种解决方法，但是告诉`plot`在哪里绘图是很有意义的——尤其是在 GUI 中。

您可以改为添加第四行：

```
set(axesHandle,'Tag','axes1'); 
```

这会将属性设置`'Tag'`回，`'axes1'`并且按钮上的任何后续单击现在也应该起作用。您现在可以添加多个轴对象。如果那是你想要的。

# regex - 我的正则表达式匹配案例有问题，我不希望它（数据验证）

> ID：11397060
> 
> 赞同：2
> 
> 时间：2012-07-09T14:25:45.610
> 
> 标签：regex, validation

我正在尝试为内部标记语言开发代码验证系统，但由于我对正则表达式没有经验，我遇到了一些麻烦。语言中的标签遵循以下格式：

{ 标签：数字：短语 1 | 短语 2 ... | 短语 n}

其中 number 是 (3.0, 3.5, 4.0 ... 8.5) 范围内的数字，并且其中一个短语的末尾必须有一个星号，并且必须至少有两个短语。请注意，标签不区分大小写，空格无关紧要。

我正在使用的正则表达式是：

```
\{ ?(mw) ?: ?[3-8]{1}(.0|.5)? ?((((\| ?(\w ?)+[\p{P}]? ?)*)+((\| ?(\w\ ?)+[\p{P}]?)* ?\* ?)+((\| ?(\w ?)+[\p{P}]? ?)*)?)|(((\| ?(\w ?)+[\p{P}]? ?)*)?((\| ?(\w ?)+[\p{P}]?)* ?\* ?)+((\| ?(\w ?)+[\p{P}]? ?)*)+))( ?\}) 
```

这确实符合以下正确情况：

```
{ mw : 3.5 | phrase 1 | phrase 2* | phrase 3} 
```

还有以下不正确的情况：

```
{ mw : 3.5 | phrase 1* | phrase 2* | phrase 3} [Two asterisks] 
```

和

```
{ mw : 3.5* | phrase 1 | phrase 2* | phrase 3} [An asterisk with the number value] 
```

谢谢你的帮助。

如果有人想提供有关数据验证系统通常如何工作的任何见解，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:29:28.460

这看起来像是一个正确语法的地方，并使用诸如 yacc、antlr...ect 之类的解析工具来构建将实际为您进行解析的代码。正则表达式只能做这么多，但看起来你的 DSL 的定义可能不准确。

否则您将需要使用多个正则表达式来验证使用单个表达式无法找到的特殊情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:39:34.677

这里：

```
\{\s*(\w+)\s*:\s*([3-8]\.[05])\s*(\|[^|*\n]*)*(\|[^|*\n]*\*\s*)(\|[^|*\n]*)*\} 
```

这是[一个演示](http://regexpal.com/?flags=g&regex=%5C%7B%5Cs%2a%28%5Cw%2B%29%5Cs%2a%3A%5Cs%2a%28%5B3-8%5D%5C.%5B05%5D%29%5Cs%2a%28%5C%7C%5B%5E%7C%2a%5Cn%5D%2a%29%2a%28%5C%7C%5B%5E%7C%2a%5Cn%5D%2a%5C%2a%5Cs%2a%29%28%5C%7C%5B%5E%7C%2a%5Cn%5D%2a%29%2a%5C%7D&input=%7B%20mw%20%3A%203.5%20%20%7C%20hello%2C%20%20world%20%20%7C%20says%20%20%7C%20i%20%20%7D%0D%0A%7B%20mw%20%3A%203.5%20%20%7C%20hello%2C%2a%20world%20%20%7C%20says%20%20%7C%20i%20%20%7D%0D%0A%7B%20mw%20%3A%203.5%20%20%7C%20hello%2C%20%20world%2a%20%7C%20says%20%20%7C%20i%20%20%7D%0D%0A%7B%20mw%20%3A%203.5%20%20%7C%20hello%2C%20%20world%20%20%7C%20says%2a%20%7C%20i%20%20%7D%0D%0A%7B%20mw%20%3A%203.5%20%20%7C%20hello%2C%20%20world%20%20%7C%20says%20%20%7C%20i%2a%20%7D%0D%0A%7B%20mw%20%3A%203.5%20%20%20%20%7D%0D%0A%7B%20mw%20%3A%203.5%20%20%7C%20%7D%0D%0A%7B%20mw%20%3A%203.5%2a%20%7C%20%7D%0D%0A%7B%20mw%20%3A%203.5%20%20%7C%20hello%2C%20world%20%20%7D%0D%0A%7B%20mw%20%3A%203.5%20%20%7C%20hello%2C%20world%2a%20%7D)，使用以下输入进行测试：

```
{ mw : 3.5  | hello,  world  | says  | i  }
{ mw : 3.5  | hello,* world  | says  | i  }
{ mw : 3.5  | hello,  world* | says  | i  }
{ mw : 3.5  | hello,  world  | says* | i  }
{ mw : 3.5  | hello,  world  | says  | i* }
{ mw : 3.5    }
{ mw : 3.5  | }
{ mw : 3.5* | }
{ mw : 3.5  | hello, world  }
{ mw : 3.5  | hello, world* } 
```

**更新**

一些笔记。

1.  在您的原始正则表达式中，` ?`说“0 或 1 个空格字符”。您可能的意思`\s*`是“0 个或多个空白字符”。
2.  在您的原始正则表达式中，请注意`(.0|.5)`实际匹配`A0`and `B5`。
3.  您可能需要修改我的正则表达式以重新合并您正在使用的任何内容`[\p{P}]?`。
4.  看起来您走在正确的轨道上，但您可能使某些事情过于复杂，并且很可能您的空格表达式有些时髦的东西弄乱了您的正则表达式。我鼓励使用我上面链接的工具[regexpal.com](http://regexpal.com/)，逐个测试你的正则表达式，看看哪里没有按预期工作。

**更新 2**

高度怀疑您是否能够添加标志，但该`x`标志会大大缩短此正则表达式：

```
\{(\w+):([3-8]\.[05])(\|[^|*\n]*)*(\|[^|*\n]*\*)(\|[^|*\n]*)*\} 
```

# xml - 使用jsp创建xml文件

> ID：11397061
> 
> 赞同：-3
> 
> 时间：2012-07-09T14:25:47.693
> 
> 标签：xml, html, jsp

我们可以使用 jsp 编码创建一个新的 xml 文件，任何人都可以帮我这样做吗？

我想创建一个这样的xml文件

例如：

```
<Question><para>Create a question </para><para>what is coordinate grid</para><para>pair of grids.</para><para>pair of points</para></Question> 
```

使用jsp编码。如果可能的话，请给我编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T16:29:44.520

您可以使用[Xstream](http://xstream.codehaus.org/)将您的对象序列化为 xml。你可以查看[这篇文章](https://stackoverflow.com/questions/4602210/xmlencoder-in-java-for-serialization)，我认为它会有所帮助。如果您在实施它时遇到问题，请告诉我。

# android - 以编程方式动态创建自定义布局，就像 Android 中的静态 xmls

> ID：11397062
> 
> 赞同：0
> 
> 时间：2012-07-09T14:25:49.527
> 
> 标签：android, android-listview, horizontalscrollview

我在这里使用这个 Horizo​​ntalScrollView - [http://www.dev-smart.com/archives/34](http://www.dev-smart.com/archives/34)并且基本上创建了三个水平级别，如静态使用 xml 所示。

```
 <ScrollView
    android:id="@+id/ScrollView01"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:id="@+id/lineartoc1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/title1"
            android:layout_width="wrap_content"
            android:layout_height="30px"
            android:layout_marginLeft="10dp"
            android:layout_marginTop="10dp"
            android:layout_weight="1"
            android:background="@drawable/tocheader"
            android:gravity="center_vertical|center_horizontal"
            android:minWidth="150px"
            android:text="example"
            android:textColor="#ffffff"
            android:textSize="18dp"
            android:textStyle="bold" />

        <a.b.c.d.HorizontalListView
            android:id="@+id/listview"
            android:layout_width="wrap_content"
            android:layout_height="150dp"
            android:layout_weight="1"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/title2"
            android:layout_width="wrap_content"
            android:layout_height="30dp"
            android:layout_marginLeft="10dp"
            android:layout_marginTop="10dp"
            android:layout_weight="1"
            android:background="@drawable/tocheader"
            android:gravity="center_vertical|center_horizontal"
            android:minWidth="150dip"
            android:text="example"
            android:textColor="#ffffff"
            android:textSize="18dp"
            android:textStyle="bold" />

        <a.b.c.d.HorizontalListView
            android:id="@+id/listview2"
            android:layout_width="wrap_content"
            android:layout_height="150dp"
            android:layout_weight="3"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/title3"
            android:layout_width="wrap_content"
            android:layout_height="30dp"
            android:layout_marginLeft="10dp"
            android:layout_marginTop="10dp"
            android:layout_weight="1"
            android:background="@drawable/tocheader"
            android:gravity="center_vertical|center_horizontal"
            android:minWidth="150dip"
            android:text="example"
            android:textColor="#ffffff"
            android:textSize="18dp"
            android:textStyle="bold" />

        <a.b.c.d.HorizontalListView
            android:id="@+id/listview3"
            android:layout_width="wrap_content"
            android:layout_height="150dp"
            android:layout_weight="3"
            android:textStyle="bold" />
        <!--
        <TextView
            android:id="@+id/title4"
            android:layout_width="300dp"
            android:layout_height="30dp"
            android:layout_marginTop="10dp"
            android:layout_weight="1"
            android:background="#88000000"
            android:gravity="center_vertical|center_horizontal"
            android:text="example"
            android:textColor="#ffffff"
            android:textSize="20dp"
            android:textStyle="bold" />

        <a.b.c.d.HorizontalListView
            android:id="@+id/listview4"
            android:layout_width="wrap_content"
            android:layout_height="300dp"
            android:layout_weight="1"
            android:textStyle="bold" />
        -->
    </LinearLayout>
</ScrollView> 
```

我正在创建三个水平列表视图，每个视图顶部都有文本，现在这些视图相对放置在另一个下方。它是如何工作的，最初只有第一个列表有一些项目。单击第一个水平列表视图中的一个项目会创建下一个水平列表，依此类推，用于下一级。但由于它是在 xml 中创建的，所以我只能有固定数量的级别——在我的例子中是三个。我如何以编程方式对相同的职位做完全相同的事情，以便我可以获得“n”级支持。此外，整个内容都包含在滚动视图中，因此页面永远不会结束，并且有 n 个级别的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:29:33.593

您可以使用 findViewById() 在代码中获取 LinearLayout 的句柄，然后调用 .addView(View child, LayoutParams) 并以这种方式设置您的子视图。

当您在 LinearLayout 中设置视图时，请记住使用 LinearLayout.LayoutParams.*。

# c# - 需要帮助重构这个基本的异步等待循环

> ID：11397067
> 
> 赞同：4
> 
> 时间：2012-07-09T14:25:59.663
> 
> 标签：c#, async-await

所以我有一个支持“保存”方法的业务对象，该方法对某些设备执行一些 IO。然后我有一个我想批量异步保存的对象的列表。我的代码现在看起来像这样：

```
 public async Task Save()
    {
        foreach (var element in Elements)
        {
            await element.Save();
        }
    } 
```

现在这会导致`n`等待次数，并且我知道每个等待都会导致一些 CPU 开销。我想消除这个并且只有一个等待。我如何重构以实现这一目标？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-09T14:32:01.943

好吧，您可以调用`Save()`所有内容，然后等待所有内容完成使用[`Task.WhenAll`](http://msdn.microsoft.com/en-us/library/hh160384%28v=vs.110%29.aspx)：

```
public async Task Save()
{
    await Task.WhenAll(Elements.Select(x => x.Save());
} 
```

或者，如果您真的什么都不做，只需：

```
public Task Save()
{
    return Task.WhenAll(Elements.Select(x => x.Save());
} 
```

编辑：如果您想连续执行它们，请使用您已经获得的代码。值得注意的是，异步/等待的设计方式，等待*实际上*同步完成的调用（例如缓存命中，或者在您的情况下是脏检查）非常便宜。它不需要做任何任务调度、创建延续或类似的事情。你说：

> 如果我有一个包含 10000 个对象的列表，并且只有 1 个是脏的，我最终会得到 9999 个不必要的异步等待，我怀疑这会很重要。

As ever, *suspicions* about performance bottlenecks are pretty much meaningless - what's important is *evidence* about performance bottlenecks. Have you tried the existing code and *measured* the cost? If not, I strongly suggest you do that before changing anything.

# html - 强制空白出现在固定宽度的 div 和页面右侧之间

> ID：11397072
> 
> 赞同：0
> 
> 时间：2012-07-09T14:26:10.410
> 
> 标签：html, css

我有一个前端 Web 开发专家的问题困扰着我。

在我的页面上，我有一个固定在页面右侧的侧边栏，然后是一大块内容（固定宽度），它占据了超过浏览器窗口的宽度。问题是，div 最右侧的内容无法看到，因为它位于固定侧边栏的后面。

[这是我在 jsFiddle 中的问题的一个超级精简示例。](http://jsfiddle.net/aHKU5/94/)

**编辑：** [这是我的问题的更完整示例。](http://jsfiddle.net/aHKU5/92/)

我认为只需将 padding-right: "width of sidebar"px 应用于正文或包装 div，或将 margin-right: "width of sidebar"px 应用于内容 div 应该可以解决问题，但两者都不起作用。我不想诉诸于放置一个填充 div 除非没有办法用 CSS 来实现这种效果。

我在谷歌上搜索了这个问题，但我发现的只是关于如何从右侧*删除空格的问题，这与我想要做的相反。*

感谢任何可以解决这个问题的人！

**编辑：**在看到关于为什么我不能简单地以不同方式进行设置的多个问题之后，我想我会通过展示一个更深入的例子来说明我正在努力完成的事情。[你可以在这里](http://jsfiddle.net/aHKU5/92/)看到。表格中的列必须是固定宽度的，我希望能够看到最后一列的全部内容。希望这有助于澄清事情！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:53:06.013

我知道你已经想出了一个 jquery 解决方案，但我认为你可以通过一个简单的 css 规则来解决：

```
tr td:last-child { padding-right: 100px; } 
```

`td`它只是在 each中的最后一个上设置填充`tr`，等于固定的右侧边栏宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:52:48.627

我知道您想要固定宽度，但我相信这可以满足您的需求，而无需担心用户屏幕分辨率。我刚刚添加了 float:right 和 width:100%; 到内容 div，它对我来说看起来不错。试试这个代码：

```
#content {
border: 1px solid #444;
background: #aaa;
height: 400px;
width: 100%;
float:right;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T14:33:53.890

我使用左 0 和右 110px 将包装器位置设为绝对位置，您也可以将其放在内容 div 上而不是包装器上。只是给你一个提示......见[http://jsfiddle.net/aHKU5/98/](http://jsfiddle.net/aHKU5/98/)

```
#wrapper {
    position: absolute;
    left: 0px; right:110px;
    border: 1px solid red;
} 
```

**编辑** 我还创建了一个具有最大宽度的版本，以确保内容永远不会超过 900 像素，但如果空间较小，它也会尊重侧边栏...... [http://jsfiddle.net/aHKU5/102/](http://jsfiddle.net/aHKU5/102/)

```
#wrapper {
    position: absolute;
    left: 0px;
    max-width: 900px;
    margin-right: 110px;
    border: 1px solid red;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T15:57:32.300

所以我想出了一个解决我的问题的方法。我只是简单地使用 jQuery 将 body 的宽度设置为表格的宽度*加上*右侧边栏的宽度。像魅力一样工作。

如果未来的开发人员偶然发现这个页面有同样的问题，这是我使用的代码：

$('body').css('width', $('table').width() + 150 + 'px');

其中 150 是侧边栏的宽度。

# android - 带有 Android 和浏览器客户端的节点服务器

> ID：11397077
> 
> 赞同：0
> 
> 时间：2012-07-09T14:26:36.420
> 
> 标签：android, node.js, websocket, autobahn

编辑：我想通过 Web 界面在 Android 和浏览器上实现一个测验应用程序。我正在寻找一种在服务器和客户端之间进行通信的方法。我尝试了 socket.io，但无法让它与 android 一起使用。

我正在使用托管在 nodester (nodester.com) 上的 node.js 服务器。我尝试了一些库，但无法正常工作。

我现在正在使用来自[https://github.com/einaros/ws的 einaros/ws](https://github.com/einaros/ws)

服务器代码是：

```
var clients = [],
numClients = 0;

var WebSocketServer = require('ws').Server,
  wss = new WebSocketServer({port: 20083});

wss.on('connection', function(ws) {

  ws.on('message', function(message) {
    console.log(wss.clients);
    console.log('received: %s', message);
    incomingMessage(message, ws)
  });

  /*
  ws.on('eigenesEvent', function(message) {
    console.log('eigenes Event ausgelöst: ' + message);
  });
  */
});

function incomingMessage(msg, ws) {
  //console.log(wss.clients);
  var obj = JSON.parse(msg);

    if(obj.type == "connect") {

      for(var i=0;i<clients.length;i++) {
        if(clients[i] == obj.id) {
          ws.send(JSON.stringify({
            to: obj.id,
            message: "name vergeben"
          }));
          return;
        }
      }
      clients[numClients] = obj.id;
      numClients++;
      for(var i=0;i<clients.length;i++) {
        console.log("Client" + i + ": " + clients[i]);
      }
      ws.send(JSON.stringify({
          to: "all",
          message: obj.id + " connected"
      }));
    }

  if(obj.type == "disconnect") {

    for(var i=0;i<clients.length;i++) {
      if(clients[i] == obj.id) {
        clients.splice(i, 1);
        numClients--;
        for(var i=0;i<clients.length;i++) {
          console.log("Client" + i + ": " + clients[i]);
        }
      }
    }

    ws.send(JSON.stringify({
      to: "all",
      message: obj.id + " disconnected"
    }));
    return;
  }

  if(obj.type == "answer") {
    if("id" in obj) {
      if(obj.answer == "a") {
        ws.send(JSON.stringify({
          to: obj.id,
          message: "a is correct"
        }));
      } else {
        ws.send(JSON.stringify({
          to: obj.id,
          message: "answer is incorrect"
        }));
      }
    }
  }

  if(obj.type == "something") {
    if("id" in obj) {
      ws.send(JSON.stringify({
        to: obj.id,
        message: "received: " + obj.message
      }));
    }
  }
} 
```

从 HTML 站点，我可以通过以下方式连接到服务器：

```
connect = function() {
    var host = "ws://einaros.nodester.com";

        try{
            socket = new WebSocket(host);
            console.log('WebSocket - status ' + socket.readyState);

            socket.onopen = function(msg) {
                console.log("Welcome - status " + this.readyState);
                socket.send(JSON.stringify({
                    id: model.getClientName(),
                    type: "connect"
                }));
                model.setConnectionStatus(true);
            };

            socket.onmessage = function(msg) {
                console.log("onmessage - msg: " + msg.data);
                checkMessage(msg.data);
            };

            socket.onclose = function(msg) {
                console.log("Disconnected - status " + this.readyState);
                model.setConnectionStatus(false);
            };

        }
        catch(ex){
            console.log(ex);
        }
}, 
```

在 Android 客户端我使用 AutobahnAndroid 来自：[http](http://autobahn.ws/android)
://autobahn.ws/android android 的客户端代码是：

```
package ps.mediengestaltung;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import de.tavendo.autobahn.WebSocketConnection;
import de.tavendo.autobahn.WebSocketException;
import de.tavendo.autobahn.WebSocketHandler;

public class MainActivity extends Activity {

public final WebSocketConnection mConnection = new WebSocketConnection();

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    final String wsuri = "ws://einaros.nodester.com";

    try {
        mConnection.connect(wsuri, new WebSocketHandler() {

            @Override
            public void onOpen() {
                Log.d("TAG", "Status: Connected to " + wsuri);
                mConnection.sendTextMessage("Hello Server!");
            }

            @Override
            public void onTextMessage(String payload) {
                Log.d("TAG", "Got echo: " + payload);
            }

            @Override
            public void onClose(int code, String reason) {
                Log.d("TAG", "Connection lost.");
            }
        });
    } catch (WebSocketException e) {
        Log.d("TAG", e.toString());
    }

}

} 
```

在 LogCat 我得到：
*08-01 08:48:13.017: D/TAG(704): 状态: 连接到 ws://einaros.nodester.com
08-01 08:48:13.167: D/TAG(704):连接丢失。*

我究竟做错了什么？有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T15:09:18.833

原因可能是：Weberknecht 只实现了（过时的）Hixie-76 版本的 WebSocket。

您可以尝试[**AutobahnAndroid**](http://autobahn.ws/)，它实现了 WebSocket 的最终 RFC6455 版本。

另一件事：您正在使用的 WebSocket 服务器不再维护（据我所知）。它也只实现了 Hixie-76——Chrome/Firefox 不再支持它。

尝试其中之一：

*   [https://github.com/einaros/ws](https://github.com/einaros/ws)
*   [https://github.com/Worlize/WebSocket-Node](https://github.com/Worlize/WebSocket-Node)

免责声明：我是 Autobahn 的作者，为 Tavendo 工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:32:42.263

您正在要求您的手机连接到本地主机。您没有在手机上运行节点吗？:)

```
URI url = new URI("ws://127.0.0.1:8080/test"); 
```

这应该指向您的节点地址/端口。

# sql - 查询多列sql。Ret 标题列进行匹配，返回行标题进行地址列匹配

> ID：11397078
> 
> 赞同：0
> 
> 时间：2012-07-09T14:26:38.480
> 
> 标签：sql

我正在寻找查询匹配列的正确方法（让它工作）。但是然后有 this-> AND 匹配的地址列，我只希望返回该行的标题。这将包括关键字搜索中的“按城镇搜索”。专业的想法？谢谢！

```
//works!
SELECT * FROM beaches
WHERE title LIKE '%".$input."%' 
//doesn't work at all
AND 
SELECT title FROM address WHERE LIKE '%".$input."%' 
```

更新：

@LittleBobbyTables 就是这样！这就是您使用搜索查询查询多个列的方式。

```
SELECT * 
FROM beaches 
WHERE (title LIKE '%".$input."%') OR (address LIKE '%".$input."%') 
```

至于其他有用的答案，我认为 JOINS 在哪里查询 TABLES，但我知道什么？我无法理解单个丢失的撇号。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:29:18.153

由于您只需要包含表中的`title`列`address`，因此您需要使用`UNION`：

```
SELECT title 
FROM beaches
WHERE title LIKE '%".$input."%' 
UNION ALL
SELECT title 
FROM address 
WHERE title  LIKE '%".$input."%' 
```

但是这种方法的问题是第一个查询返回的列需要与第二个查询返回的列匹配。

# jasper-reports - Jasper Reports - 从输入控件中删除按钮

> ID：11397079
> 
> 赞同：2
> 
> 时间：2012-07-09T14:26:39.243
> 
> 标签：jasper-reports, jasperserver

我一直在挖掘 Jasper 文档，但找不到答案。

目前对于我们的报告，我们有一个简单的输入控件，日期。当它启动时，我得到了一个日期控件，在底部，我得到了一系列无用的按钮选择......

应用、确定、重置、取消、保存

谁能帮我删除这些？只想确定并取消。我查看了 DefaultParametersForm.jsp，但很难在那里找到任何有用的东西。我是一个业余的jsp程序员。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T09:27:15.950

我们从输入控件弹出窗口中删除了取消按钮，我们在 jsp/templates 目录的 inputControls.jsp 文件中找到了它。

您还应该在这里找到应用、确定、重置和保存按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T17:52:01.133

我不知道如何删除按钮，但这些按钮并非都是无用的。重置会将您的字段清除回默认值（如果没有默认值，则为空白）。

当您使用 Control Layout 1 时，您可能会认为 Apply 和 OK 按钮做同样的事情，但事实并非如此。Apply 将使用设置的参数运行报告，但不会摆脱对话框。OK 运行也适用并删除对话框。（请注意，可以将对话框拖到一边。）

如果您切换到其他控件布局之一（我喜欢 4），则 OK 按钮消失 b/c 不再有对话框。您只会得到应用、重置和取消。

# c# - 在包含对象的 2 个列表框之间拖放（Winforms）

> ID：11397086
> 
> 赞同：1
> 
> 时间：2012-07-09T14:27:01.350
> 
> 标签：c#, .net, winforms, drag-and-drop

我有**2 个列表框**，其中包含特定类的项目（使用 DisplayMember）。现在我想在这两个列表框之间实现**拖放。**目前我不知道如何实现 DragDrop 事件。如果我只使用字符串，我的代码将如下所示（对于一个列表框）

```
private void listBoxRight_DragDrop(object sender, DragEventArgs e)
        {
            if (e.Data.GetDataPresent(typeof(System.String)))
            {
                Object item = (object)e.Data.GetData(typeof(System.String));
                string str = (string)e.Data.GetData(DataFormats.StringFormat);
                int index = m_listBoxRight.IndexFromPoint(e.X, e.Y);
                m_listBoxRight.Items.Add(item);
            }
        } 
```

这工作正常。但是真实对象的实现会如何呢？是否可以为任何对象实现拖放？

# jquery - 远程加载 HTML 到 JQUERY UI 对话框中的交互性

> ID：11397088
> 
> 赞同：0
> 
> 时间：2012-07-09T14:27:07.820
> 
> 标签：jquery, ajax, jquery-ui

## **背景**

我一直在使用 JQuery UI 插件来创建一个加载动态内容的对话框。

所以我加载了一个 html 文档，该文档显示了一系列可选项目，其中包含值的复选框：A、B、C、D、E

假设我勾选了“A、C、E”

我按下了一个提交按钮，它利用了对服务器的 AJAX 调用。服务器接收数据“A、C、E”，执行一系列查询并吐出数据和html来保存数据内容。像：

```
<input id="radio1" name="selGroup" type="radio" value="1"><p class="test"> 1 </p>
<input id="radio3" name="selGroup" type="radio" value="3"><p class="test"> 3 </p>
<input id="radio5" name="selGroup" type="radio" value="5"><p class="test"> 5 </p>
<input id="enterBttn" type="button" value="Submit"> 
```

此 html 内容返回到客户端并被转储到：

```
<div id="dialogCheck" title="Select one of these options"></div> 
```

这是通过使用 jQuery 完成的：

```
$("#dialogCheck").html(content); 
```

## **测试**

因此，我检查是否一切正常，并且确实如此。我得到一个对话框，其中包含我想要选择的单选按钮和值。但现在我想添加一些交互性。

## **问题**

当我打开一个带有从服务器注入的 html 的对话框时，它会在屏幕上显示内容，但是当我想在原始源代码上查看新的 html 时。它不存在。它只是显示为：

```
 <div id="dialogCheck" title="Select one of these options"></div> 
```

当我使用 JQuery 的 "$("#dialogCheck").html(content);" 插入。我阅读了文档，它提到了它如何不将 html 附加到原始源代码中。所以我的问题是，我应该如何在我注入的 html 之上添加 JQuery 脚本？

## **怪人**

如果我传入如下所示的内容：

```
$("#enterBttn").click(function(){ 
     $( "#dialogCheck" ).dialog("destroy");
 }); 
```

有用！我创建的 enterBttn 破坏了对话框。**但是**，如果我想添加悬停功能，例如，如果我想在对话框顶部突出显示文本或大纲 div，它将不起作用，因为它在原始源代码中不存在。

```
$(".test").hover(
    function(){
        $(this).append($("<span> ***</span>"));
    },
    function(){
        $(this).find("span:last").remove();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:36:25.283

新的 HTML 是否在“原始源代码”中没有区别（除了调试更容易，用户可以在客户端轻松保存页面）。但是，如果您真的希望某些内容出现在“原始源代码”中，那么您不应该使用 AJAX，而是应该重新加载整个页面并在服务器端插入额外的 HTML。

因此，无论 HTML 源代码如何，一切都应该正常工作。我猜您的代码不起作用，因为您在错误的时间执行它（例如，在插入新 HTML 之前）。您能否添加更多详细信息？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:57:58.683

可以对通过 AJAX 插入的 html 元素使用事件处理。jquery ON() [http://api.jquery.com/on/](http://api.jquery.com/on/)函数可用于此目的，或者当使用旧版本的 jquery 时，使用 LIVE() 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T16:36:00.180

好的，弄清楚发生了什么：

这两个都有效：

```
$("#enterBttn").hover(function(){
    $(".attriblst").append($("<span> ***</span>"));;
}, function(){
    $(".attriblst").find("span:last").remove();
}); 
```

和：

```
$("#dialogCheck").on({
    mouseenter: function(){
        $("p").append($("<span> ***</span>"));
    },
    mouseleave: function(){
        $("p").find("span:last").remove();
    }
 },"#enterBttn"); 
```

发生的事情是我插入代码的范围。我把它们放在文档准备部分，如果我把它拿出来放在我用来调用我的对话框的函数中（在文档准备好的外面），那么它就起作用了！多谢你们 ：）

# html - 固定高度和灵活宽度的一排桌子

> ID：11397093
> 
> 赞同：0
> 
> 时间：2012-07-09T14:27:26.937
> 
> 标签：html, html-table, word-wrap

如何创建具有固定 TR 高度（限制为两行）但每个 TD 具有灵活宽度和强制自动换行的单行表。

主要问题：当单词多于一个时，是否可以强制每个 TD 始终使用完整高度（使用两行），即如果 TD 包含一个单词，它应该显示在一行中，如果 TD 包含多于一个word 它应该显示在两行中（在这种情况下浏览器应该自动设置 TD 宽度）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:49:04.750

这似乎是不可能的。当有足够的水平空间时，表格布局机制会尽量避免单元格内的换行。通过在单元格上设置例如`width: 0`，您可以覆盖它，以便浏览器使每个单元格尽可能窄（实际上，在纯文本内容的情况下，与最宽的单词一样宽），但是然后例如三个单词组成三行，导致`height`设置被覆盖。

如果您指定需要这种布局的上下文和目的，也许可以制定一个新的、可解决的问题。

# android - 实际的警报应用程序是如何工作的？

> ID：11397097
> 
> 赞同：0
> 
> 时间：2012-07-09T14:27:46.857
> 
> 标签：android, android-intent, alarmmanager, android-alarms

我想知道实际的警报应用程序如何在准确的时间弹出对话框，而在它的背景中没有任何活动。如果您可以查看我的[这篇](https://stackoverflow.com/questions/11393744/how-to-set-up-alarm-same-like-alarm-app-in-android)文章以了解我正在寻找的确切解决方案，但非常感谢您回答这个问题。

**弹出代码**

```
public void onCreate(Bundle savedinstance)
{
    super.onCreate(savedinstance); 
    //alarmsound = MediaPlayer.create(this, R.raw.wewillrock);
    alarmsound = new MediaPlayer();

        try {
            if(db.getAlarmCount()!=0)
            {
                Cursor alarmcursor = db.getAlarmdetails(this);
                if(alarmcursor!=null)
                {
                    alarmcursor.moveToFirst();
                    String alarmTonepath = alarmcursor.getString(alarmcursor.getColumnIndex(GinoClockDatabase.AL_RINGTONEPATH)); 
                    alarmsound.setDataSource(alarmTonepath);    
                    alarmsound.prepare();
                }
                db.close(); 
            }
            db.close();
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block0
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        alarmsound.start();

    ((Activity)Global.context).finish();
    setContentView(R.layout.reminderpopupmessage);  
    settingViews(); 
}
private void settingViews() {
    yes = (Button) findViewById(R.id.btnReminderyes);
    no = (Button) findViewById(R.id.btnReminderno); 
}
@Override
public void onClick(View v) {

    switch(v.getId())
    {
    case R.id.btnReminderyes:
        alarmsound.stop();
        Intent splashscreen = new Intent(ReminderPopupMessage.this,SplashScreen.class);
        startActivity(splashscreen);
        ReminderPopupMessage.this.finish();
        break;
    case R.id.btnReminderno:
        alarmsound.stop();
        ReminderPopupMessage.this.finish();
        break;
    } 
} 
```

我正在寻找这个解决方案一个多月，但找不到解决方案。我想我已经问了超过 5 个关于此警报功能的问题。我希望我现在能得到答案。

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:34:44.073

这是Android报警应用程序[git_alarm_app的链接](https://github.com/android/platform_packages_apps_alarmclock)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:46:47.643

好吧，我看到了你的问题。为了在显示弹出窗口时摆脱后台活动，请在您的 AndroidManifest.xml 中使用此活动作为警报弹出：

```
<activity android:name=".AlarmPopup" android:theme="@android:style/Theme.Dialog"
              android:clearTaskOnLaunch="true" android:launchMode="singleInstance" 
              android:finishOnTaskLaunch="true" excludeFromRecents="true"/> 
```

# android - setArguments 的意义何在？

> ID：11397099
> 
> 赞同：43
> 
> 时间：2012-07-09T14:27:48.730
> 
> 标签：android, android-fragments

嗨，我正在查看 android 网站上的以下 Fragments 示例。

[http://developer.android.com/guide/components/fragments.html#Example](http://developer.android.com/guide/components/fragments.html#Example)

我想知道为什么要执行某些方法。

例如，为什么`detailsFragment`执行以下方法：

```
public static DetailsFragment newInstance(int index) {
    DetailsFragment f = new DetailsFragment();

    // Supply index input as an argument.
    Bundle args = new Bundle();
    args.putInt("index", index);
    f.setArguments(args);

    return f;
} 
```

您是否也不能简单地实例化`DetailsFragment`并使用 setter 方法来设置`index`。绕过整体`setArguments`。

首先使用`setArguments`有什么意义？你不能只使用 setter 和 getter 吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-09T14:33:45.170

您可以使用 getter 和 setter，但通过传入一个包，您不需要编写该代码，因为它已经存在。另外，我相信如果屏幕方向发生变化，这些参数会自动再次传入，这也让生活更轻松。

本质上，setArguments 和 getArguments 只是 Google 建议您遵循的一种设计模式：

> 每个片段都必须有一个空的构造函数，因此可以在恢复其活动状态时对其进行实例化。强烈建议子类不要有其他带参数的构造函数，因为片段重新实例化时不会调用这些构造函数；相反，参数可以由调用者使用 setArguments(Bundle) 提供，然后由 Fragment 使用 getArguments() 检索。 [http://developer.android.com/reference/android/app/Fragment.html](http://developer.android.com/reference/android/app/Fragment.html)

我认为这包括您的 Fragment 运行所需的设置器。话又说回来 - 没有什么强迫你这样做，而且如你所知 - 这不是让事情发挥作用的唯一方式。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-18T06:51:53.217

只是为了补充 Matthew 的回答：他正确地引用了 Fragments 需要有一个空的构造函数，以便框架可以在需要时重新实例化它们。

使用 getter 和 setter 很好，但由于框架可能会破坏并重新创建您的 Fragment，因此您必须确保不会丢失这些参数。

这必须通过`Fragment.onSaveInstanceState()`. 保存的声明将作为 中的参数和其他几种方法传回`savedInstanceState`给`Fragment.onCreate()`您`Fragment.onCreateView()`。

使用`Fragment.setArguments()`（在大多数情况下，我假设）更容易，框架会自动保留参数，因此将为您完成大部分工作。

设置器可能是您最初提供给片段的参数的方式，片段可能会随着时间的推移自行调整。在这种情况下，单独处理 savedInstanceState 可能比处理 savedInstanceState 和参数更容易 - 你必须决定哪个是有效参数。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-01-21T07:46:58.103

```
public void setArguments (Bundle args) 
```

> 提供此片段的构造参数。这只能在片段附加到其活动之前调用；也就是说，您应该在构建片段后立即调用它。**此处提供的参数将在片段销毁和创建中保留** *（可能是以前的官方文档中缺少粗体文本）*

[Fragments.setArguments（捆绑参数）](http://developer.android.com/reference/android/app/Fragment.html#setArguments(android.os.Bundle))

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-06T09:46:12.703

此外，setter 可能会被滥用。如果 updateSomeOtherStuff() 将更改某些视图，则会崩溃。

```
public class MyFragment extends Fragment {
   void setData(someData){
       this.someData = someData;
       updateSomeOtherStuff()
   }
} 
```

如果传入一个包，则不可能滥用设置器，并且您将始终知道这将在生命周期方法中设置。

# facebook - 对于安装了应用程序的测试用户，我为什么会收到“必须接受 TOS”错误？

> ID：11397105
> 
> 赞同：0
> 
> 时间：2012-07-09T14:27:56.293
> 
> 标签：facebook, facebook-graph-api, testing, integration-testing, restfb

我正在编写集成测试并以编程方式为我的应用程序创建和注册一些测试用户，方法是使用图形 API 创建已安装标志设置为 true 的用户。

这应该创建一个应用程序用户，因此我假设测试用户已经同意 TOS。

我是否切换到测试用户，然后应用程序会在应用程序中心的用户历史记录中列出。

但是，当我尝试从另一个测试用户向该用户发送应用程序请求时，我会收到 TOS 错误。

# ruby-on-rails - Rails url_for 命名空间模型和非命名空间控制器

> ID：11397108
> 
> 赞同：0
> 
> 时间：2012-07-09T14:28:01.843
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-routing

我正在尝试为一个模型生成一个 URL，该模型是从一个不是的控制器命名的。例如：

```
module SomeStuff
  class Widget < ActiveRecord::Base; end
end

class WidgetsController < ApplicationController
  def create
    w = Widget.create(params)
    location = url_for w
    render :json => w, :location => location
  end
end 
```

问题是 Rails 想要一个“some_stuff_widget_path”存在，但它不存在，因为控制器没有命名空间。我尝试了另一篇文章（http://stackoverflow.com/questions/4404440/rails-url-for-and-namespaced-models）中给出的解决方案，但它们似乎不起作用。

从技术上讲，我的模型位于一个单独的 gem 中，该 gem 具有命名空间，然后我的 Rails 应用程序包含该 gem 并提供控制器。在不更改该设置的情况下，有没有办法让“url_for”工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T16:05:20.120

正如您在上面的评论之一中提到的，您有

```
resources :widgets 
```

在你的`config/routes.rb`. 在`location`您尝试在上面设置的 中`url_for`，您正在尝试匹配以下路线

```
widget GET    /widgets/:id(.:format)    widgets#show 
```

但正如你所说，`url_for w`而是让 Rails 猜测你正在寻找*（不存在的）* `some_stuff_widget_path`路线。而是将该行更改为

```
location = url_for widget_path(w) 
```

# workflow-foundation-4 - 如何获取 WorkflowApplication 的上下文？

> ID：11397114
> 
> 赞同：2
> 
> 时间：2012-07-09T14:28:08.800
> 
> 标签：workflow-foundation-4

我正在制作一个类似于 Visual Workflow Tracking* 的工作流设计器。

我想添加一个新控件来调试 wf，但我不知道如何访问 wf 上下文

运行 WF 我使用这个：

```
 WFApplication wfApp = new WorkflowApplication(act, inputs); 
```

我的想法是当我接收跟踪事件时，获取 wfApp 的上下文，以获取变量或参数值。

有可能吗？

*您可以从以下位置下载 VisualStudioTracking 代码： [适用于 .NET Framework 4 的 Windows Communication Foundation (WCF) 和 Windows Workflow Foundation (WF) 示例](http://go.microsoft.com/fwlink/?LinkId=150780) ，然后：\WF_WCF_Samples\WF\Application\VisualWorkflowTracking*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T09:12:44.510

最后我解决了这个问题。

首先，我从 xaml 获取所有参数名称和工作流变量。

```
 class XamlHelper
    {   

    private string xaml;

    public XamlHelper(string xaml)
    {           
        this.xaml = xaml;

        DynamicActivity act = GetRuntimeExecutionRoot(this.xaml);
        ArgumentNames = GetArgumentsNames(act);

     GetVariables(act);
    }

    private void GetVariables(DynamicActivity act)
    {
        Variables = new List<string>();
        InspectActivity(act);

    }

    private void InspectActivity(Activity root)
    {

        IEnumerator<Activity> activities =
            WorkflowInspectionServices.GetActivities(root).GetEnumerator();

        while (activities.MoveNext())
        {

            PropertyInfo propVars = activities.Current.GetType().GetProperties().FirstOrDefault(p => p.Name == "Variables" && p.PropertyType == typeof(Collection<Variable>));
            if (propVars != null)
            {
                try
                {
                    Collection<Variable> variables = (Collection<Variable>)propVars.GetValue(activities.Current, null);
                    variables.ToList().ForEach(v =>
                    {
                        Variables.Add(v.Name);

                    });
                }
                catch
                {

                }
            }
            InspectActivity(activities.Current);
        }
    }

    public List<string> Variables
    {
        get;
        private set;
    }

    public List<string> ArgumentNames
    {
        get;
        private set;
    }

    private DynamicActivity GetRuntimeExecutionRoot(string xaml)
    {

        Activity root = ActivityXamlServices.Load(new StringReader(xaml));

            WorkflowInspectionServices.CacheMetadata(root);

        return root as DynamicActivity;

    }

    private List<string> GetArgumentsNames(DynamicActivity act)
    {
        List<string> names = new List<string>();
        if (act != null)
        {
            act.Properties.Where(p => typeof(Argument).IsAssignableFrom(p.Type)).ToList().ForEach(dp =>
            {
                names.Add(dp.Name);
            });

        }

        return names;
    }

} 
```

其次，我使用这些参数和变量名创建跟踪

```
 private static WFTrace CreateTrace(List<string> argumentNames, List<string> variablesNames)
    {
        WFTrace trace = new WFTrace();
        trace.TrackingProfile = new TrackingProfile()
        {
            ImplementationVisibility = ImplementationVisibility.All,
            Name = "CustomTrackingProfile",
            Queries = 
                {
                    new CustomTrackingQuery() 
                    {
                     Name = all,
                     ActivityName = all
                    },
                    new WorkflowInstanceQuery()
                    {

                         // Limit workflow instance tracking records for started and completed workflow states
                        States = {WorkflowInstanceStates.Started, WorkflowInstanceStates.Completed },
                   }
                }
        };

        trace.TrackingProfile.Queries.Add(GetActivityQueryState(argumentNames, variablesNames));

        return trace;
    } 
```

然后调用 wf 并添加 traceextension。

**亚当这是代码**

```
 private TrackingQuery GetActivityQueryState(List<string> argumentNames, List<string> variablesNames)
        {
            ActivityStateQuery query = new ActivityStateQuery()
            {
                ActivityName = "*",
                States = { ActivityStates.Executing, ActivityStates.Closed }
            };
            if (argumentNames != null)
            {
                argumentNames.Distinct().ToList().ForEach(arg =>
                {
                    query.Arguments.Add(arg);
                });
            }
            if (variablesNames != null)
            {
                variablesNames.Distinct().ToList().ForEach(v =>
                {
                    query.Variables.Add(v);
                });
            }
            return query;
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:29:01.677

您可以使用[Tracking Participants](http://msdn.microsoft.com/en-us/library/ee513993.aspx)在工作流运行时提取[变量和参数。](http://msdn.microsoft.com/en-us/library/ff628993)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T09:29:31.437

我尝试用这个跟踪参与者跟踪变量

```
 private static VisualTrackingParticipant VisualTracking()
    {
        String all = "*";
        VisualTrackingParticipant simTracker = new VisualTrackingParticipant()
        {
            TrackingProfile = new TrackingProfile()
            {
                Name = "CustomTrackingProfile",
                Queries = 
                    {
                        new CustomTrackingQuery() 
                        {
                            Name = all,
                            ActivityName = all
                        },
                        new WorkflowInstanceQuery()
                        {
                            // Limit workflow instance tracking records for started and completed workflow states
                           // States = { WorkflowInstanceStates.Started, WorkflowInstanceStates.Completed },
                           States={all}
                        },
                        new ActivityStateQuery()
                        {
                            // Subscribe for track records from all activities for all states
                            ActivityName = all,
                            States = { all },

                            // Extract workflow variables and arguments as a part of the activity tracking record
                            // VariableName = "*" allows for extraction of all variables in the scope
                            // of the activity
                            Variables = 
                            {                                
                                { all }   
                            },
                            Arguments={ {all}}
                        }   
                    }
            }
        };
        return simTracker;
    } 
```

这是 VisualTrackingParticipant

```
public class VisualTrackingParticipant : System.Activities.Tracking.TrackingParticipant
{
    public event EventHandler<TrackingEventArgs> TrackingRecordReceived;
    public Dictionary<string, Activity> ActivityIdToWorkflowElementMap { get; set; }

    protected override void Track(TrackingRecord record, TimeSpan timeout)
    {
        OnTrackingRecordReceived(record, timeout);
    }

    //On Tracing Record Received call the TrackingRecordReceived with the record received information from the TrackingParticipant. 
    //We also do not worry about Expressions' tracking data
    protected void OnTrackingRecordReceived(TrackingRecord record, TimeSpan timeout)
    {
        System.Diagnostics.Debug.WriteLine(
            String.Format("Tracking Record Received: {0} with timeout: {1} seconds.", record, timeout.TotalSeconds)
        );

        if (TrackingRecordReceived != null)
        {
            ActivityStateRecord activityStateRecord = record as ActivityStateRecord;

            if//(
                (activityStateRecord != null)
            // && (!activityStateRecord.Activity.TypeName.Contains("System.Activities.Expressions")))
            {
                Activity act = null;
                ActivityIdToWorkflowElementMap.TryGetValue(activityStateRecord.Activity.Id, out act);

                TrackingRecordReceived(this, new TrackingEventArgs(
                                                record,
                                                timeout,
                                                act
                                                )

                    );

            }
            else
            {
                TrackingRecordReceived(this, new TrackingEventArgs(record, timeout, null));
            }

        }
    }
}

//Custom Tracking EventArgs
public class TrackingEventArgs : EventArgs
{
    public TrackingRecord Record {get; set;}
    public TimeSpan Timeout {get; set;}
    public Activity Activity { get; set; }

    public TrackingEventArgs(TrackingRecord trackingRecord, TimeSpan timeout, Activity activity)
    {
        this.Record = trackingRecord;
        this.Timeout = timeout;
        this.Activity = activity;
    }
} 
```

如果我追踪这个 wf ：

```
<Activity mc:Ignorable="sap" x:Class="Microsoft.Samples.Workflow" xmlns="http://schemas.microsoft.com/netfx/2009/xaml/activities" xmlns:av="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:mv="clr-namespace:Microsoft.VisualBasic;assembly=System" xmlns:mva="clr-namespace:Microsoft.VisualBasic.Activities;assembly=System.Activities" xmlns:s="clr-namespace:System;assembly=mscorlib" xmlns:s1="clr-namespace:System;assembly=System" xmlns:s2="clr-namespace:System;assembly=System.Xml" xmlns:s3="clr-namespace:System;assembly=System.Core" xmlns:sa="clr-namespace:System.Activities;assembly=System.Activities" xmlns:sad="clr-namespace:System.Activities.Debugger;assembly=System.Activities" xmlns:sap="http://schemas.microsoft.com/netfx/2009/xaml/activities/presentation" xmlns:scg="clr-namespace:System.Collections.Generic;assembly=System" xmlns:scg1="clr-namespace:System.Collections.Generic;assembly=System.ServiceModel" xmlns:scg2="clr-namespace:System.Collections.Generic;assembly=System.Core" xmlns:scg3="clr-namespace:System.Collections.Generic;assembly=mscorlib" xmlns:sd="clr-namespace:System.Data;assembly=System.Data" xmlns:sd1="clr-namespace:System.Data;assembly=System.Data.DataSetExtensions" xmlns:sl="clr-namespace:System.Linq;assembly=System.Core" xmlns:st="clr-namespace:System.Text;assembly=mscorlib" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <x:Members>
    <x:Property Name="decisionVar" Type="InArgument(x:Boolean)" />
  </x:Members>
  <sap:VirtualizedContainerService.HintSize>666,676</sap:VirtualizedContainerService.HintSize>
  <mva:VisualBasic.Settings>Assembly references and imported namespaces serialized as XML namespaces</mva:VisualBasic.Settings>
  <Flowchart sad:XamlDebuggerXmlReader.FileName="C:\WF_WCF_Samples\WF\Application\VisualWorkflowTracking\CS\VisualWorkflowTracking\Workflow.xaml" sap:VirtualizedContainerService.HintSize="626,636" mva:VisualBasic.Settings="Assembly references and imported namespaces serialized as XML namespaces">
    <Flowchart.Variables>
      <Variable x:TypeArguments="x:String" Name="myStr" />
    </Flowchart.Variables>
    <sap:WorkflowViewStateService.ViewState>
      <scg3:Dictionary x:TypeArguments="x:String, x:Object">
        <x:Boolean x:Key="IsExpanded">False</x:Boolean>
        <av:Point x:Key="ShapeLocation">270,7.5</av:Point>
        <av:Size x:Key="ShapeSize">60,75</av:Size>
        <av:PointCollection x:Key="ConnectorLocation">300,82.5 300,111.5</av:PointCollection>
        <x:Double x:Key="Width">611.5</x:Double>
      </scg3:Dictionary>
    </sap:WorkflowViewStateService.ViewState>
    <Flowchart.StartNode>
      <FlowStep x:Name="__ReferenceID0">
        <sap:WorkflowViewStateService.ViewState>
          <scg3:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">179,111.5</av:Point>
            <av:Size x:Key="ShapeSize">242,58</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">300,169.5 300,199.5 280,199.5 280,269.5</av:PointCollection>
          </scg3:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
        <Assign sap:VirtualizedContainerService.HintSize="242,58">
          <Assign.To>
            <OutArgument x:TypeArguments="x:String">[myStr]</OutArgument>
          </Assign.To>
          <Assign.Value>
            <InArgument x:TypeArguments="x:String">PDC Rocks</InArgument>
          </Assign.Value>
        </Assign>
        <FlowStep.Next>
          <FlowStep x:Name="__ReferenceID1">
            <sap:WorkflowViewStateService.ViewState>
              <scg3:Dictionary x:TypeArguments="x:String, x:Object">
                <av:Point x:Key="ShapeLocation">174.5,269.5</av:Point>
                <av:Size x:Key="ShapeSize">211,61</av:Size>
                <av:PointCollection x:Key="ConnectorLocation">155.33,351.361666666667 155.33,481 204.5,481</av:PointCollection>
              </scg3:Dictionary>
            </sap:WorkflowViewStateService.ViewState>
            <WriteLine sap:VirtualizedContainerService.HintSize="211,61" Text="[myStr]" />
          </FlowStep>
        </FlowStep.Next>
      </FlowStep>
    </Flowchart.StartNode>
    <x:Reference>__ReferenceID0</x:Reference>
    <x:Reference>__ReferenceID1</x:Reference>
  </Flowchart>
</Activity> 
```

当活动评估关闭时，您会收到此跟踪此参数

[Arg] 值 = PDC Rocks [Arg] To = PDC Rocks

而且我不知道 var 的名称，其中 value 是 assined

# jquery - 带有弹出窗口的 HTML 图像映射。用 jquery 动画并回退到 css

> ID：11397126
> 
> 赞同：0
> 
> 时间：2012-07-09T14:29:01.220
> 
> 标签：jquery, html, css, map

我正在尝试使用弹出窗口构建图像映射。我找到了一个很好的解决方案，只使用 css 并想使用 jquery 为弹出窗口设置动画。

我知道网上有很多 jquery 解决方案，但我还没有找到一个在关闭 javascript 时会退回到 css 的解决方案。这是我想要制作动画的 CSS 版本的基本示例。

[小提琴](http://jsfiddle.net/AJBweb1986/QJN6H/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:44:31.137

If you just write your jQuery animation code to work on top of the css code you've already written then with no javascript you'll simply get the current results that you're getting from your css.

# c# - 向数据表添加新行时表没有主键

> ID：11397128
> 
> 赞同：0
> 
> 时间：2012-07-09T14:29:17.210
> 
> 标签：c#, winforms, datatable

我有一个 Windows 形式的数据表，我想在表中添加一个新行。我总是收到错误

> 表没有主键。

问题是我根本不想要主键。它可能在表中重复了“ID”。我的代码：

```
using (DataTable dt = new DataTable())
{
dt.Columns.Add("EntryDE", typeof(string));
dt.Columns.Add("Descr", typeof(string));
dt.Columns.Add("Id", typeof(int));
foreach (DataGridViewRow row in dgv.Rows)
{
    DataGridViewCheckBoxCell check = row.Cells[0] as DataGridViewCheckBoxCell;
    if (check.Value != null)
    {
        if ((bool)check.Value)
        {
            //this row has a checkBox set to true (tick is added)
            //add this row to dataTable ...
            DataRow myRow = (row.DataBoundItem as DataRowView).Row;
            DataRow dr = dt.NewRow();

            dr["EntryDE"] = myRow["ID"].ToString();        
            dr["Descr"] = myRow["EntryName"];               
            dr["Id"] = Id;    
                    dt.Rows.Add(dr);
        }
    }
} 
```

谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:32:07.483

您可能确实需要一个主键，因为没有它您以后将无法更新或删除行。

如果 ID 字段将包含重复项，那么您应该添加另一列，将其命名为 primary_key 或任何您喜欢的名称，并将该列用作 PK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:40:44.460

错误不是来自 DataTable，因为这有效：

```
 using (DataTable dt = new DataTable())
    {
        dt.Columns.Add("EntryDE", typeof(string));
        dt.Columns.Add("Descr", typeof(string));
        dt.Columns.Add("Id", typeof(int));

        for (int i = 0; i < 10; i++) 
        {
            DataRow dr = dt.NewRow();

            dr["EntryDE"] = "abc";
            dr["Descr"] = "xyz";
            dr["Id"] = 1;
            dt.Rows.Add(dr);
        }
    } 
```

你还有别的问题。

# windows-services - Quartz.net 不在远程服务器上触发

> ID：11397130
> 
> 赞同：1
> 
> 时间：2012-07-09T14:29:18.993
> 
> 标签：windows-services, quartz.net, windows-server, quartz.net-2.0

我已经在 Windows 服务中实现了quartz.net 来运行任务。在本地工作站上一切正常。但是一旦它被部署到远程win服务器主机上，它就会在初始化后挂起。

```
ISchedulerFactory schedFact = new StdSchedulerFactory();

// get a scheduler
var _scheduler = schedFact.GetScheduler();

// Configuration of triggers and jobs
var trigger = (ICronTrigger)TriggerBuilder.Create()
                                          .WithIdentity("trigger1", "group1")
                                          .WithCronSchedule(job.Value)
                                          .Build();

var jobDetail = JobBuilder.Create(Type.GetType(job.Key)).StoreDurably(true)
                                .WithIdentity("job1", "group1").Build();

var ft = _scheduler.ScheduleJob(jobDetail, trigger); 
```

一切似乎都是标准的。我有指向调度程序的私有静态指针，在作业初始化并添加到调度程序后，日志记录过程立即停止。之后没有其他事情发生。我会很感激任何建议。

谢谢。

PS：

根据quartz.net，在事件查看器mb中发现了一些奇怪的事件：

```
Restart Manager - Starting session 2 - ‎2012‎-‎07‎-‎09T15:14:15.729569700Z.
Restart Manager - Ending session 2 started ‎2012‎-‎07‎-‎09T15:14:15.729569700Z. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:48:49.233

根据您的问题和您在评论中提供的其他信息，我猜您的服务的 onStart 方法出了点问题。

以下是您可以做的一些事情来帮助找出和解决问题：

1.  将代码放在您的 onStart 方法中的 try/catch 块中，然后尝试安装和启动服务。然后检查windows日志，看看它是否安装正确、启动正确等。
2.  重新启动管理器正在运行的事实使我相信您的服务可能依赖于已经在使用的进程。确保在安装之前关闭服务的任何依赖项。
3.  将数据密集型或长时间运行的操作放入 onStart 方法也可能导致此问题。确保将此类代码排除在 onStart 之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-12T17:43:11.710

我有一个类似的问题，它是由程序集名称中的点/句点引起的，例如`Project.Update.Service`. 当我将其更改为`ProjectUpdateService`它工作正常。

奇怪的是，它总是在开发机器上工作。只是从不在远程机器上。

更新：可能是服务的长度导致了这个问题。通过删除点，我缩短了服务名称。看起来最大长度是 25 个字符。

# ajax - Grails 和 AJAX：remoteLink 导致重定向，而不是更新 div

> ID：11397133
> 
> 赞同：1
> 
> 时间：2012-07-09T14:29:24.313
> 
> 标签：ajax, grails

我正在尝试使用该标签制作一个启用 ajax 的 webapp。出于某种原因，它会将整个页面重定向到我的模板，并且不会更新指定的 div。

**这是我到目前为止所拥有的：**

在我的 GSP 文件的头部：

```
<g:javascript library="jquery" />
<g:setProvider library="jquery"/> 
```

在我的 GSP 文件的正文中：

```
 <div id="message"></div>
 <g:remoteLink controller ="reqOff" action="quick_req" update="[success: 'message']">ar</g:remoteLink> 
```

我的控制器方法返回一个模板；这似乎工作正常。

**问题：**

现在，它不会更新 div，而是在新页面上呈现我的模板。

**其他注意事项：** - 我的 grails 版本是 1.4.0.M1 - 我的 jquery 插件已安装并更新到 1.7.2 - 我认为没有其他冲突的 JS 库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:53:40.927

我用 JQuery 解决了这个问题，顺便说一下，它与评论中提到的 CSS 问题有关。事实证明，当 Gregg 指出 jQuery 可能没有加载时，他是在做某事。

我所做的是升级我的资源插件，因为它破坏了我的应用程序，迫使我了解资源插件的实际作用。在设置我的模块并获得 r:require 和 r:layoutResources 标签后，一切都加载得很好。这需要一些尝试和错误，我遵循了插件作者的教程类型博客文章： [http ://www.anyware.co.uk/2005/2011/09/12/optimising-your-application-with-grails -资源插件/](http://www.anyware.co.uk/2005/2011/09/12/optimising-your-application-with-grails-resources-plugin/)

总之，检查以确保您的资源使用资源插件正确加载。我假设 g:javascript 标记加载了 jQuery，但对于我的应用程序，显然不是这种情况。

# javascript - 将 Content-Encoding 标头附加到 IIS 7.5 中的特定文件

> ID：11397136
> 
> 赞同：0
> 
> 时间：2012-07-09T14:29:30.850
> 
> 标签：javascript, iis-7, http-headers, gzip

我想从我的 IIS 服务器提供一个 file.gz.js GZIP 压缩文件。我将后缀保留为“.js”，因此 IIS 将使用 Javascript 标头提供文件。但是，我想附加等于“gzip”的“Content-Encoding”标头，以便浏览器知道解压缩它。如何将“Content-Encoding”标头添加到特定文件？

其次，我可以只用 .gz 扩展名重命名 Javascript 文件，它会是一样的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:52:05.113

在 IIS 6 中，单击包含该文件的网站，在右侧窗格中右键单击特定文件，转到“属性”，转到“Http 标头”选项卡，然后添加名称为“内容”的客户标头-Encoding”和“gzip”的值。

在 IIS 7 中，这可以通过 GUI 实现，我相信您可以通过 asp.net 应用程序的 web.config 来实现。但是我现在无法访问 IIS 7，所以我无法为您提供分步指导。您可能可以单击该网站，然后单击底部的“内容”选项卡，然后右键单击特定文件。找到一些类似于属性的菜单，并找到允许您添加客户标题的地方。

抱歉，这是我目前可以为 IIS 7 提供的最好的。

当然还有其他带有自定义 http 处理程序的解决方案，但这是不可取的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-11T11:24:54.267

在较新版本的 IIS 中，您仍然可以通过 GUI 执行此操作，但它有点复杂：

*   在左侧窗格中，展开站点并单击文件所在的文件夹。
*   切换到“内容视图”（在主窗格的底部）
*   单击特定文件
*   在“操作”窗格（右侧）中单击“切换到功能视图”
*   单击“HTTP 响应标头”功能

现在您只能编辑该特定文件的响应标头。

# algorithm - 查找作为其他字符串前缀的字符串

> ID：11397137
> 
> 赞同：4
> 
> 时间：2012-07-09T14:29:31.343
> 
> 标签：algorithm, data-structures, language-agnostic, trie

这是一道面试题。给定多个字符串，找到这样的字符串，它们是其他字符串的前缀。例如，给定`strings = {"a", "aa", "ab", abb"}`结果是`{"a", "ab"}`.

最简单的解决方案是对字符串进行排序并检查每对两个后续字符串是否第一个是第二个的前缀。算法的运行时间就是排序的运行时间。

我想还有另一种解决方案，它使用 a `trie`，并且有 complex `O(N)`，其中 N 是字符串的数量。你能推荐这样一个算法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T14:40:45.177

关于 Trie，我有以下想法，复杂度 O(N)：你从空的 Trie 开始。你一个一个接一个单词，然后把单词加到 Trie 上。在向 Trie 添加一个词（我们称之为词 Wi）后，需要考虑两种情况：

1.  Wi 是您之前添加的一些单词的前缀。如果您在添加单词 Wi 时没有向 Trie 添加任何节点，则该陈述是正确的。在这种情况下，Wi 是前缀，也是我们解决方案的一部分。
2.  之前添加的一些词是Wi的前缀。如果您通过表示之前添加的某个单词的结尾的节点（让我们调用那个单词 Wj），那么该语句是正确的。在这种情况下，Wj 是 Wi 的前缀，也是我们解决方案的一部分。

更多细节（伪代码）：

```
for word in words
    add word to trie
    if size of trie did not change then   // first case
        add word to result
    if ending nodes found while adding word   // second case
        add words defined by those nodes to result
return result 
```

向 Trie 添加新词：

```
node = trie.root();
for letter in word
    if node.hasChild(letter) == false then   // if letter doesnt exist, add it
        node.addChild(letter)
    if letter is last_letter_of_word then   // if last letter of word, store that info
        node.setIsLastLetterOf(word)
    node = node.getChild(letter)    // move 
```

在添加新单词时，您还可以检查是否通过了代表其他单词最后一个字母的任何节点。我描述的算法复杂度是 O(N)。另一个重要的事情是，这样你可以知道单词 Wi 前缀其他单词的次数，这可能很有用。

{aab, aaba, aa} 的示例：绿色节点是检测为案例 1 的节点。红色节点是检测为案例 2 的节点。每一列（trie）是一个步骤。在开始的时候尝试是空的。黑色箭头显示我们在该步骤中访问（添加）了哪些节点。代表某个单词的最后一个字母的节点将该单词写在括号中。

![在此处输入图像描述](../Images/a9aea018edc3824e6216ff53601e76ea.png)

1.  在第 1 步中，我们添加单词 aab。
2.  在第 2 步中，我们添加单词 aaba，识别一个案例 2（单词 aab）并将单词 aab 添加到结果中。
3.  在第 3 步中，我们添加单词 aa，识别案例 1 并将单词 aa 添加到结果中。

最后我们有 result = {aab, aa} 这是正确的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T14:33:15.397

最初的答案是正确的：是一个字符串`a`（*误读*`b`）的子字符串。

使用 trie，您可以在第一次迭代中简单地将所有字符串添加到其中，在第二次迭代中，开始阅读每个单词，让它成为`w`. 如果你找到一个你读完的单词，但没有到达字符串终止符（`$`通常），你到达`v`了 trie 中的某个节点。 通过从
执行[DFS](http://en.wikipedia.org/wiki/Depth-first_search)`v`，您可以获得`w`作为它们前缀的所有字符串。

高级伪代码：

```
t <- new trie
for each word w:
   t.add(w)
for each word w:
  node <- t.getLastNode(w)
  if node.val != $
     collection<- DFS(node) (excluding w itself)
     w is a prefix of each word in collection 
```

注意：为了优化它，您可能需要做一些额外的工作：如果`a`是前缀`b`，并且`b`是前缀`c`，那么`a`是前缀`c`，所以 - 当你做 DFS 时，如果你到达某个已经搜索过的节点 -只需将其字符串附加到当前前缀即可。
尽管如此，由于可能存在二次可能性（`"a", "aa", "aaa", ....`），因此获得所有可能性需要二次时间。

* * *

原始答案：查找是否`a`是的子*字符串*`b`：

建议的解决方案以二次复杂度运行，您需要检查每两对，给您`O(n* (n-1) * |S|)`.

您可以在第一次迭代中从字符串构建[后缀树](http://en.wikipedia.org/wiki/Suffix_tree)，并在第二次迭代中检查每个字符串是否是另一个字符串的重要条目（不是其本身）。
这个解决方案是`O(n*|S|)`

# c# - asp.net 运行脚本

> ID：11397141
> 
> 赞同：0
> 
> 时间：2012-07-09T14:29:49.040
> 
> 标签：c#, asp.net, wsh

我有以下方法：

```
 protected void RunWSFScript()
    {
        try
        {
            System.Diagnostics.Process scriptProc = new System.Diagnostics.Process();
            scriptProc.StartInfo.FileName = @"cscript";
            scriptProc.StartInfo.Arguments = "\\\\server\\folder\\script.wsf \\\\server\\folder\\"
                + file + ".xml";
            scriptProc.StartInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden; //prevent console window from popping up 
            scriptProc.Start();
            scriptProc.WaitForExit();
            scriptProc.Close();

            string message = @"Please verify output.";
            System.Text.StringBuilder sb = new System.Text.StringBuilder();
            sb.Append("<script type = 'text/javascript'>");
            sb.Append("window.onload=function(){");
            sb.Append("alert('");
            sb.Append(message);
            sb.Append("')};");
            sb.Append("</script>");
            ClientScript.RegisterClientScriptBlock(this.GetType(), "alert", sb.ToString());
        }
        catch
        {
            string message = "An error has occured. Please try again.";
            System.Text.StringBuilder sb = new System.Text.StringBuilder();
            sb.Append("<script type = 'text/javascript'>");
            sb.Append("window.onload=function(){");
            sb.Append("alert('");
            sb.Append(message);
            sb.Append("')};");
            sb.Append("</script>");
            ClientScript.RegisterClientScriptBlock(this.GetType(), "alert", sb.ToString());
        }
    } 
```

我遇到的问题是，当我在本地调试时运行该方法时脚本正确执行，但是在我将站点放在 iis 服务器上之后，它不再执行，我也没有收到任何错误。

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:53:32.950

很可能是权限问题 - 服务帐户可能无法写入您指定的目录，或者它没有读取脚本文件本身的权限。

但是，您更大的问题是您的错误处理不够稳健。具体来说，如果脚本导致错误，您将永远不会检测到（正如您所发现的那样！！）。

您需要做些什么来解决这个问题取决于您的脚本如何报告它的错误。您通常需要重定向[StandardOutput](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.redirectstandardoutput.aspx)和[StandardError](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.redirectstandarderror.aspx)，并检查[退出代码](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.exitcode.aspx)。

这是**一种可能**实现的粗略概述。您将需要根据您的脚本和环境对其进行定制。

```
System.Diagnostics.Process scriptProc = new System.Diagnostics.Process();
scriptProc.StartInfo.FileName = @"cscript";
scriptProc.StartInfo.RedirectStandardOutput = true;
scriptProc.StartInfo.RedirectStandardError = true;
scriptProc.StartInfo.Arguments = @"\\server\some\folder\script.wsf";
scriptProc.StartInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden; 

scriptProc.Start();

// Read out the output and error streams *before* waiting for exit.
string output = p.StandardOutput.ReadToEnd();
string error = p.StandardError.ReadToEnd();

// Specify a timeout to ensure it eventually completes - this is 
// unattended remember!!
scriptProc.WaitForExit(10000); 
scriptProc.Close();

// Check the exit code. The actual value to check here will depend on
// what your script might return.
if (script.ExitCode != 0)
{
    throw new Exception(
        "Oh noes! Exit code was " + script.ExitCode + ". " +
        "Error is " + error + ". " + 
        "Output is " + output);
} 
```

# java - 要存储在单独文件中的 tomcat 日志

> ID：11397143
> 
> 赞同：0
> 
> 时间：2012-07-09T14:29:52.847
> 
> 标签：java, tomcat, log4j

我开发了一个 spring mvc 应用程序，它在 tomcat 上完美执行，但是我从服务器 tomcat 获取的日志在控制台上，我希望将日志存储在一个文件中，换句话说，我希望 tomcat 日志和事件是在控制台上显示要存储在文件中，我已经尝试了 apache 的日志 4j，下面是我正在使用的属性文件...

```
 ### direct messages to file or.log ###
log4j.appender.file=org.apache.log4j.FileAppender
log4j.appender.file.File=C:/logs/springmvc.log
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1} - %m%n
log4j.appender.file.append=true

### set log levels - for more verbose logging change 'info' to 'debug' ##
log4j.rootCategory=ALL, file
log4j.logger.Demo=\=debug
log4j.logger.org.eclipse=debug 
```

和主类..我希望记录 log.info 语句..

```
public class HelloWorldController extends AbstractController{
    protected final Log logger = LogFactory.getLog(getClass());
    @Override
    protected ModelAndView handleRequestInternal(HttpServletRequest request,
        HttpServletResponse response) throws Exception {
        logger.info("Returning hello view");
        ModelAndView model = new ModelAndView("HelloWorldPage");
        model.addObject("msg", "saral saxreva");

        return model;
    }
} 
```

但仍然没有在单独的文件中生成日志，请告知我，因为我对此感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:47:36.100

springmvc.log 文件是否在您的程序启动时创建？这是 log4j 是否被正确拾取的第一个迹象。

*   确保 log4j 属性文件位于正确的位置并且被正确拾取
*   仔细检查您的记录器和 LogFactory 类的导入语句（只是为了确保它们使用的是 log4j 类

如果 log4j 设置正确，您将看到应用程序启动时创建的 springmvc.log 文件。

然后在 log4j 属性中，尝试：

```
log4j.rootLogger=DEBUG,file 
```

并摆脱您拥有的其他两个

```
log4j.logger.Demo=\=debug
log4j.logger.org.eclipse=debug 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:47:44.970

我认为要启用 Web 应用程序的登录，您需要一些初始化它的侦听器（或 servlet）。例如在 Spring 中，您需要在 web.xml 中定义这样的监听器：

```
<!-- This listener is necessary to enable log4j logging -->
    <listener>
        <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
    </listener> 
```

在互联网上有很多关于此的信息。这是来自谷歌的第一个[链接](http://www.avajava.com/tutorials/lessons/how-do-i-initialize-log4j-in-a-web-application.html)。这是另一个[链接](http://blog.idleworx.com/2010/01/setting-up-log4j-for-simple-java-web.html)，其中描述了如何在没有 Spring 的情况下在 servlet 或侦听器中初始化记录器。

而且最好使用*log4j.rootLogger*而不是*log4j.rootCategory*因为 last 已被弃用。

# php - 实时 MySQL 监控

> ID：11397144
> 
> 赞同：7
> 
> 时间：2012-07-09T14:30:00.610
> 
> 标签：php, mysql, real-time

我想知道是否有一个工具可以使用 PHP 实时监控 MySQL DB 数据？

目前，我使用 Ajax 调用每隔几秒钟检查一次数据库是否有任何更新，但我认为当我有更多用户时这不是正确的方法，因为它会给服务器带来很大压力。

** 只是添加一个注释，我实际上想在我的网站上显示基于 PHP 编写的数据，因此找出集成其他工具以实现此目的的最佳方法是有用的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-09T14:35:35.993

PHP 并不是实时监控的最佳选择，因为它（通常）是基于事务的（HTTP）。

有一个名为“Mysql Monitor Tool”的免费开源Java程序，可以实时监控一个MySQL（或多个）数据库：

[http://sourceforge.net/projects/mysqlmt/](http://sourceforge.net/projects/mysqlmt/)

![截屏](../Images/ad04ffde05b687b5cabd695ff8058b96.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T14:44:31.507

我使用 JET Profiler： http: [//www.jetprofiler.com/](http://www.jetprofiler.com/)

它也有免费版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-23T16:49:43.943

Mysql Workbench 也有服务器监控功能。它基本上显示了您需要实时了解的大部分内容。

要打开它，请打开与数据库的连接，单击“服务器”选项卡，然后单击“服务器状态”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-17T21:02:00.460

经过长时间的搜索，我找到了一个新的免费[http://www.profilesql.com/](http://www.profilesql.com/)

很棒的工具，它在应用程序和数据库之间建立代理

# php - MySQL 的 CurDate() 函数错误（非语法）

> ID：11397146
> 
> 赞同：0
> 
> 时间：2012-07-09T14:30:05.807
> 
> 标签：php, mysql, date

我有一个后台脚本，它使用 MySQL 的 CurDate() 函数来检查我的数据库表中的字段中的日期是否已经过去，然后执行`mysql_query("UPDATE table SET"); etc...` 这是我拥有的当前代码，但问题是查询是每次更新字段，日期是否已过...请帮助！谢谢！

* * *

PHP/MySQL

```
 <?php 

        require ("connect.php"); 

        mysql_query("SELECT * FROM files WHERE active='1'");

        mysql_query("UPDATE files SET active='0' WHERE fortest < CurDate()")        

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:49:11.207

如果您的 fortest 字段是 MySQL 日期，那么您的代码或多或少是正确的。如果您正在存储一个字符串（例如“07-08-2012”），那么您将需要更改您执行此操作的方式。

你能运行这个并粘贴结果吗...

```
SHOW fields FROM your_table; 
```

# c# - winrt api 中的动作委托

> ID：11397147
> 
> 赞同：1
> 
> 时间：2012-07-09T14:30:10.023
> 
> 标签：c#, delegates, windows-runtime, .net-4.5

嗨，我在 windows rt 上开发了一个应用程序。我尝试使用 Action，但它说它不是有效的 winrt 类型。我找不到任何可以进一步详细说明的来源。

我的代码

```
public  void OnNetworkDown(Action NetworkEventHandler )
{
    _OnNetworkDown += NetworkEventHandler;
} 
```

> “Talk.To.Utilities.IO.Socket.TcpSocketAsyncEventArgs.OnNetworkDown(System.Action)”具有“System.Action”类型的参数“NetworkEventHandler”。“System.Action”不是有效的 Windows 运行时参数类型。

所以请指引我正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:57:28.993

You can not use the manages type Action use a delegate to do this.

```
public delegate void NetworkEventHandler();

public  void AddNetworkDownHandler(NetworkEventHandler handler)   
{      
 _OnNetworkDown += handler;
} 
```

But you can also expose the event to the public directly, this will the language projection enable to integrate the even more naturally into other languages like JavaScript.

# jqgrid - 比Jqgrid好吗？

> ID：11397148
> 
> 赞同：1
> 
> 时间：2012-07-09T14:30:22.237
> 
> 标签：jqgrid, telerik-mvc, jquery-datatables

我需要一个建议，我正在使用 Jqgrid 作为网格工具，不知怎的，我发现显示非常大的数据有些复杂，我说的是 450 条带有大数据的记录和 10 列。

你们有没有更好的网格可以让我有更好的表现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:13:18.193

我一直使用 dataTables 并且我总是推荐它，因为它易于使用和配置。它完美且快速地显示数据（我将它与超过 100.000 行的表一起使用，没有问题，正确配置服务器端处理）。
您现在唯一必须做的是（据我所知）它不支持表格主体中的 colspan，因此，如果您的布局需要，则无法使用数据表。（我通常会找到其他方式来展示东西，而不是使用 colspan，但对于某些人来说，这是一个障碍）

# javascript - 对此 JavaScript 代码片段感到困惑

> ID：11397151
> 
> 赞同：8
> 
> 时间：2012-07-09T14:30:29.070
> 
> 标签：javascript

对于这个片段，我对全局变量“a”的计算结果为 5 并不感到惊讶。

[http://jsfiddle.net/MeiJsVa23/gZSxY/](http://jsfiddle.net/MeiJsVa23/gZSxY/)：

```
var a = 10;

function func(){
  a = 5;
}

func();   // expect global variable 'a' to be modified to 5;

alert(a); // and this prints out 5 as expected. No surprise here.
​ 
```

但是对于这个代码片段，全局变量 'a' 的计算结果是 10 而不是 5？就好像`a = 5`从未发生过一样。

[http://jsfiddle.net/MeiJsVa23/2WZ7w/](http://jsfiddle.net/MeiJsVa23/2WZ7w/)：

```
var a = 10;

function func(){
  a = 5;
  var a = 23;
}

func();   // expect global variable 'a' to be modified to 5;

alert(a); // but this prints out 10!! why? 
```

​</p>

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-09T14:32:46.977

这是由于变量提升：使用`var`关键字定义的任何内容都会被“提升”到当前范围的顶部，从而创建一个局部变量`a`。请参阅：http: [//www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T14:43:29.077

所以，这里有两件事：[提升](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)和[阴影](http://en.wikipedia.org/wiki/Variable_shadowing)。

因为第一个，变量声明被“提升”到顶部，所以你的代码相当于：

```
var a = 10;

function func(){
    var a;
    a = 5;
    a = 23;
} 
```

而且因为第二个，你`a`用一个局部变量“遮蔽”了全局变量，所以这些变化不会反映到全局变量中`a`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T14:33:14.200

这称为“[变量提升](https://developer.mozilla.org/en/JavaScript/Reference/Statements/var#var_hoisting)”。 `var`声明（和`function()`声明）被移到其作用域的顶部。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T14:32:54.243

这与**吊装**有关。

在函数中，声明了一个同名的局部变量。即使它发生在你的修改之后，它也被认为是在它之前声明的——这被称为提升。

局部变量提升声明而不是值。所以：

```
function someFunc() {
    alert(localVar); //undefined
    var localVar = 5;
} 
```

函数，如果用`function name() {...`语法声明，声明和值都会提升。

```
function someFunc() {
    alert(someInnerFunc()); //5
    function someInnerFunc() { return 5; }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T14:33:13.437

```
var a = 10;  //a is 10

function func(){
  a = 5; //a is 5
  var a = 23; // a is now in local scope (via hoisting) and is 23
}

func();   

alert(a); // prints global a = 10 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-09T14:33:30.970

据推测，该语句*为整个范围*`var a = 23`创建了一个局部变量。所以全局被遮蔽了整个的，而不仅仅是语句下面的行。所以在你的第二个片段中，分配给下面声明的局部变量。*`a``func()``a = 5`*

# asp.net - 如何向 ASP.net 解决方案添加定义？

> ID：11397158
> 
> 赞同：0
> 
> 时间：2012-07-09T14:30:47.887
> 
> 标签：asp.net, visual-studio-2010, conditional-compilation

我可以通过*项目属性*`define`将一个添加到**WinForms**项目：

 *![在此处输入图像描述](../Images/e8c191e9d0375d9b46cec401b1aeead6.png)

如何添加`define`到**ASP.net**解决方案？

* * *

**更新**：这是在 ASP.net 解决方案中工作时 Visual Studio 2010 的样子：

![在此处输入图像描述](../Images/90ce5842b5d311e450cb8be0b98aa6c9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:18:15.917

您是否尝试过在中使用v 元素的`compilerOptions`属性？像这样：`compiler``web.config`

```
<system.codedom>
    <compilers>
        <compiler language="c#;cs;csharp" 
            extension=".cs" 
            warningLevel="4" 
            type="Microsoft.CSharp.CSharpCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
            compilerOptions="/define:TRACE">
            <providerOption name="CompilerVersion" value="v3.5"/>
            <providerOption name="WarnAsError" value="false"/>
        </compiler>
.... 
```

应该做我认为的伎俩...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:35:10.230

解决方案资源管理器 > WebApplicationProject（您的 Web 应用程序的名称）> 属性 > 构建：

![在此处输入图像描述](../Images/f50e5cf4d50125654874ab1afc4f7dc6.png)

![在此处输入图像描述](../Images/f6b64f8483b8ff4cdd632b8db08ce06a.png)*

# backbone.js - 如何在视图中使用主干模型事件？

> ID：11397160
> 
> 赞同：1
> 
> 时间：2012-07-09T14:30:50.537
> 
> 标签：backbone.js, backbone-events

我正在使用 thedersen 的 Backbone.validation 插件来提供验证。

验证本身到目前为止有效，并在我提交表单时执行。我只是没有成功让视图监听验证错误。

howto 说您可以通过以下方式监听验证事件：

```
model.bind('validated:invalid', function(model, attrs) {
   // do something
}); 
```

来源：[http ://thedersen.com/backbone.validation/#events/validated](http://thedersen.com/backbone.validation/#events/validated)

```
define(['jquery', 'underscore', 'backbone', "models/security/user", 'text!templates/security/registration.html'], function($, _, Backbone, SecurityUserModel, Template){

    var SecurityRegistrationView;

    SecurityRegistrationView = Backbone.View.extend({
        initialize: function(){
            this.model = new SecurityUserModel();
            this.render();
            Backbone.Validation.bind(this);
        },
        render: function(){
            $(this.el).append(Template);
        },
        events: {
            "submit form": "submit"
            , "validated:valid": "valid"
            , "validated:invalid": "invalid"
        },
        submit: function(e){
            e.preventDefault();

            var username, email, password;
            username = $("#_user_username").val();
            email = $("#_user_email").val();
            password = $("#_user_password").val();

            this.model.set('username', username);
            this.model.set('email', email);
            this.model.set('password', password);

            this.model.validate();

            console.log(this.model.validate());
        },
        invalid: function(){
            $("input").addClass("inputError");
            alert(" ");
        },
        valid: function(){
            alert(" ");
            this.model.save(function(){
                // server validation callback...
            });
        }

    });

    return SecurityRegistrationView;
}); 
```

那么如何在表单中使用模型相关事件呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T15:28:14.497

这些事件不是 DOM 事件，而是 Backbone 事件`validated:valid`。events 哈希用于处理 DOM 事件（[source](http://backbonejs.org/#View-delegateEvents)），而用于点击特定模型触发的事件`validated:invalid`。`Backbone.View``model.bind`

所以从事件哈希中删除这些行：

```
events: {
  "submit form": "submit", // LEAVE THIS AS IT IS A DOM EVENT
  "validated:valid": "valid", // REMOVE THIS
  "validated:invalid": "invalid" // REMOVE THIS
} 
```

并将其添加到您的初始化函数中

```
initialize: function(){
  this.model = new SecurityUserModel();
  this.render();
  Backbone.Validation.bind(this);

  this.model.bind('validated:valid', this.valid); // NEW
  this.model.bind('validated:invalid', this.invalid); // NEW
} 
```

现在您正在以正确的方式利用模型事件。

希望这可以帮助！

# c# - ContinueWith 主线程上的任务

> ID：11397163
> 
> 赞同：4
> 
> 时间：2012-07-09T14:30:53.203
> 
> 标签：c#, c#-4.0, task

如果这是一个简单的问题，请原谅我；我无法用足够通用的方式来表达它来搜索答案。

考虑这段代码：

```
var task = Task.Factory.StartNew(() => Whatever());  
task.ContinueWith(Callback, TaskScheduler.FromCurrentSynchronizationContext()) 
```

回调方法何时执行是如何确定的？

它会等到主线程当前完成它正在做的事情，还是会在异步调用完成后立即调用它？这个回调会在主线程返回之前完全执行吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T14:34:35.800

> 它会等到主线程当前完成它正在做的事情，还是会在异步调用完成后立即调用它？

当异步调用完成时，将*安排*继续。该调度的效果取决于调度程序（当然），但对于“正常” WPF 或 Windows 窗体消息循环，我希望它以类似于调用的方式调度，`Control.BeginInvoke`或者`Dispatcher.BeginInvoke`- 换句话说，当“主”线程已完成在此之前安排的其余任务。

我不希望主线程神奇地停止它正在做的事情并执行延续。但是，它*可以*使延续成为其队列中的高优先级任务。

# .net - 如何在 WPF 应用程序（Windows XP）中全局设置区域性？

> ID：11397164
> 
> 赞同：0
> 
> 时间：2012-07-09T14:31:02.833
> 
> 标签：.net, c, localization, culture

我有一个 WPF 应用程序，它使用 3rd 方控件（如[http://navigationpane.codeplex.com](http://navigationpane.codeplex.com)），它还提供翻译的 UI（特别是德语，这是我的应用程序的默认和唯一语言）。在 Win7 上，一切都以德语显示，在 WinXP 系统（德语 UI）上，第 3 方控件仍然加载英语资源。

我现在已经试过了

```
Thread.CurrentThread.CurrentUICulture = CultureInfo.GetCultureInfo("de-DE"); 
```

和这个

```
Thread.CurrentThread.CurrentCulture = CultureInfo.GetCultureInfo("de-DE"); 
```

这（这导致无法加载任何 XAML 文件，之后应用程序几乎损坏）：

```
<UICulture>en-US</UICulture> 
```

还有这个

```
FrameworkElement.LanguageProperty.OverrideMetadata(typeof(FrameworkElement), new FrameworkPropertyMetadata(XmlLanguage.GetLanguage(CultureInfo.CurrentCulture.IetfLanguageTag))); 
```

和这个：

```
[assembly: NeutralResourcesLanguageAttribute("de")] 
```

现在我几乎没有想法了。有什么进一步的建议吗？

除了`UICulture`，它根本不起作用，我正在使用上述所有方法并`App.OnStartup`没有达到预期的效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:04:37.560

问题实际上要简单得多，但我完全错过了：翻译的资源位于卫星 *.resources.dll 程序集中。在我自己的机器上，编译器将这些文件复制到输出目录（到相应的语言代码子目录），在测试机器（本例中为 XP）上，这些文件丢失了，因为它们尚未添加到安装包中.

添加 *.resources.dll 文件后，一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:40:33.277

尝试链接中的语法

[文化](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.currentuiculture.aspx)

Thread.CurrentThread.CurrentUICulture = CultureInfo.CreateSpecificCulture("fr-FR");

# emacs - 在 emacs lisp 中打开窗口并加载特定的缓冲区

> ID：11397166
> 
> 赞同：3
> 
> 时间：2012-07-09T14:31:55.683
> 
> 标签：emacs, clojure, elisp

我正在为我的 .emacs 配置进行 clojure 开发。

我想要发生的是每当我打开一个名为“project.clj”的文件时，如果没有名为“ *swank* ”的打开缓冲区，首先水平拆分窗口，然后垂直拆分右侧。然后从 project.clj 缓冲区运行 (clojure-jack-in) 以启动 REPL 并 (shell) 加载一个 bash shell。完成所有这些后，我希望 project.clj 文件位于左侧窗口中，shell 位于右上方窗口中，REPL 位于右下方窗口中。

此外，如果有办法让速度条在指定窗口而不是新框架中打开，那就太棒了。

我想我的问题是：有没有办法指定在哪个窗口中打开新缓冲区？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:01:35.233

好的，如何[通过 ibuffer](https://superuser.com/a/305494/147087)或通过[grid-files-sq](https://stackoverflow.com/a/11441270/1404208)或[GridLayout](http://www.emacswiki.org/emacs/GridLayout)和（更不相关的）[桌面记忆建议来回答这个问题](https://stackoverflow.com/questions/3792449/emacs-remember-all-opened-files-with-splitted-windows-and-their-positions)

# javascript - 在 maxlength 之后对 keyup 的 Ajax 请求 - 在 maxlength 之后出现数据错误

> ID：11397169
> 
> 赞同：-1
> 
> 时间：2012-07-09T14:32:01.190
> 
> 标签：javascript, ajax, jquery

我有一个 ajax 驱动的邮政编码查找。在字段达到所需字符数（zip 为 5）后，对服务的调用发生在 keyup 上。但是，如果用户继续输入（超过 6 个字符），即使他们没有显示在字段中，也会进行 ajax 调用并返回数据为 null 错误：

**html**

```
<input type="text" value="" id="billZipCode" name="billZipCode" class="smallInput coreAddrBill" maxlength="5"> 
```

**javascript**

```
//show city/state on input maxlength
$("input#billZipCode").live("keyup", function( event ){
    if(this.value.length == this.getAttribute('maxlength')) {
        if ($(this).valid() == true ) {
            zipLookup(this, "USA");

        }
    }
});

//zip code lookup
function zipLookup(myField, myCountry) {

    $.ajax({
        type: "POST",
        url: postalCodeLookupURL,
        dataType:"text json",
        data: { postalcode: $(myField).val(), country: myCountry },
        success: function(data) {
            var isError = data.isError;
            var city = data.city;
            var juris = data.juris;
            if(isError == "false"){

                    $(myField).parent().next('div').find('input').val(city);
                    $(myField).parent().next('div').next('div').find("select option[value='" + juris +"']").attr('selected', 'selected');
                    $("#createAccount").validate().element($(myField).parent().next('div').find('input'));
                    $("#createAccount").validate().element($(myField).parent().next('div').next('div').find("select"));

            }

        },
        error: function(){
        alert('failure');
      }

     });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:37:52.123

```
//Live is depreciated,use delegate and some other tweaks
    $("body").delegate("input#billZipCode","keyup", function( event ){
        if($(this).val().length >= $(this).attr('maxlength')) {          
                zipLookup(this, "USA");

        }else{
         alert('Max reached');
      }
    }); 
```

# python - 在 HTML 文件中使用 pylab 创建的应用程序中使用图表（使用 Django 创建）

> ID：11397171
> 
> 赞同：0
> 
> 时间：2012-07-09T14:32:02.140
> 
> 标签：python, html, django, linux, ubuntu-10.04

我的代码：

```
<html>
<style type="text/css">
    h1 {
         position: absolute;
         top:   5px;
         left:  200px;      
       }    

    form #Edit1 { 
                   position: absolute; 
                   top:    37px; 
                   left:   410px; 
                }

    form #Edit2 { 
                   position: absolute; 
                   top:    37px; 
                   left:   840px; 
                }

    </style>
    <font size="4" face="arial" color="#0000FF">
    <h1>XML Search</h1>
    </font>
    <br/>
    <br/>
    <Form Action ="/search/" Method ="POST">
    <div id="Edit1">
        <INPUT TYPE = 'VARCHAR'  name ='word' VALUE ="" size = "50">
    </div>
    <div id="Edit2">
        <INPUT TYPE = "Submit" VALUE = "Search">
    </div>
    <br/>
    <hr/>
    {% csrf_token %}
    </Form>

    {% if list1 %}
          <br/>     
          <head>
            #!/usr/bin/python
            # make a horizontal bar chart
            from pylab import *
            val = 3+10*rand(5)    # the bar lengths
            pos = arange(5)+.5    # the bar centers on the x axis

            figure(1)
            barh(pos,val, align='center')
            {% for l in list1 %}
                   xticks(pos, ({{l.file_name}},))
            {% endfor %}
            xlabel('Performance')
            title('How fast do you want to go today?')
            grid(True)
            show()
          </head>
          <body>
            <div id="chart_div" style="width: 1000px; height: 500px;"></div>
          </body>

    {% endif %}
</html> 
```

我在 Django 中创建了一个名为“search”的应用程序，它搜索用户在 10xml 文档中输入的关键字，并保持每个文件的出现频率。当用户输入单词时，他会以图表形式获得结果。上面提到的这个 HTML 代码文件是从 views.py 文件重定向的。在服务器上运行应用程序时，与 HTML 代码一起使用的 Python 代码会在用户输入关键字时按原样打印。如何在 HTML 页面中显示在 pylab 中创建的图表？

我有另一个想法，我之前用过谷歌图表，它们工作正常。唯一的问题是，如果没有互联网，它们将无法工作，这将是可能的应用程序的一个缺点。有没有办法解决这个问题，我的意思是我们如何静态使用谷歌图表？如果你们中的任何人想要我上传我的谷歌图表代码，我可以做到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:36:11.043

您需要使用 FigureCanvasAgg 后端并返回一个 HttpResponse。参见例如：

[使用 Matplotlib 的 Django][1]

[如何在 Django 中使用 Matplotlib？](https://stackoverflow.com/questions/1874642/how-to-use-matplotlib-in-django)

# ios - XMPPFramework - 从 Openfire 服务器检索存档消息

> ID：11397172
> 
> 赞同：13
> 
> 时间：2012-07-09T14:32:03.703
> 
> 标签：ios, xmpp, openfire, xmppframework

我正在使用 XMPP 和 openfire 服务器为 iPhone 开发一个聊天应用程序，OpenFire 服务器正在存储用户之间的所有聊天记录，但是当我尝试检索特定用户的聊天记录时，我只得到日期和聊天消息的数量，但没有实际的短信

我已经在 openfire 上安装了用于消息归档的开放归档插件

**这是我传递给 Openfire Server 的节**

```
 <iq type='get' id='pk1'>
    <list xmlns='urn:xmpp:archive'
    with='piyush@openfire'>
    <set xmlns='http://jabber.org/protocol/rsm'>
    <max>30</max>
    </set>
    </list>
    </iq> 
```

**这是我从服务器收到的结果**

```
 <iq type="result" id="pk1" to="vivek@openfire/iphone">
  <list xmlns="urn:xmpp:archive">
  <chat with="piyush@openfire" start="2012-07-04T13:16:12.291Z"/>
  <chat with="piyush@openfire" start="2012-07-05T08:25:31.555Z"/>
  <chat with="piyush@openfire" start="2012-07-05T12:38:24.098Z"/>
  <set xmlns="http://jabber.org/protocol/rsm">
  <first index="0">15</first>
  <last>25</last>
  <count>3</count>
  </set>
  </list>
  </iq> 
```

**这是我想要的，也是我期望的结果**

```
 <iq type='result' to='vivek@openfire/iphone' id='page1'>
 <chat xmlns='urn:xmpp:archive'
    with='piyush@openfire'
    start='2012-07-04T13:16:12.291Z'
    subject='She speaks!'
    version='4'>
<from secs='0'><body>Art thou not Romeo, and a Montague?</body></from>
<to secs='11'><body>Neither, fair saint, if either thee dislike.</body></to>
.
[98 more messages]
.
<from secs='9'><body>How cam'st thou hither, tell me, and wherefore?</body></from>
<set xmlns='http://jabber.org/protocol/rsm'>
  <first index='0'>0</first>
  <last>99</last>
  <count>217</count>
</set> 
```

请帮助我得到想要的结果

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-26T13:42:58.433

您必须使用`<retrieve>`（请参阅[http://xmpp.org/extensions/xep-0136.html](http://xmpp.org/extensions/xep-0136.html)`<list>` ）提出请求，然后您可以从收到的结果中花费特定时间。例如：

发送：

```
 <iq type='get' id='pk1'>
       <list xmlns='urn:xmpp:archive'
               with='piyush@openfire'>
        <set xmlns='http://jabber.org/protocol/rsm'>
            <max>30</max>
        </set>
      </list>
   </iq> 
```

收到：

```
 <iq type="result" id="pk1" to="vivek@openfire/iphone">
     <list xmlns="urn:xmpp:archive">
      <chat with="piyush@openfire" start="2012-07-04T13:16:12.291Z"/>
      <chat with="piyush@openfire" start="2012-07-05T08:25:31.555Z"/>
      <chat with="piyush@openfire" start="2012-07-05T12:38:24.098Z"/>
      <set xmlns="http://jabber.org/protocol/rsm">
          <first index="0">15</first>
           <last>25</last>
           <count>3</count>
      </set>
    </list>
 </iq> 
```

现在您选择`start`s 之一并发送（日期和时间必须准确）：

```
 <iq type='get' id='pk1'>
    <retrieve xmlns='urn:xmpp:archive'
        with='piyush@openfire''
        start='2012-07-04T13:16:12.291Z'>
     <set xmlns='http://jabber.org/protocol/rsm'>
       <max>100</max>
     </set>
    </retrieve>
 </iq> 
```

您将收到类似这样的信息（取决于最大值 -> max=30，body=30）：

```
 <iq type='result' to='vivek@openfire/iphone' id='page1'>
      <chat xmlns='urn:xmpp:archive'
             with='piyush@openfire'
              start='2012-07-04T13:16:12.291Z'
            subject='She speaks!'
       version='4'>
         <from secs='0'><body>Art thou not Romeo, and a Montague?</body></from>
         <to secs='11'><body>Neither, fair saint, if either thee dislike.</body></to>
          .
          [28 more messages]
          .
         <from secs='9'><body>How cam'st thou hither, tell me, and therefore?           </body>   
         </from>
      <set xmlns='http://jabber.org/protocol/rsm'>
       <first index='0'>0</first>
       <last>29</last>
       <count></count>
     </set>
  <iq> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-11-18T10:38:17.067

## 检索特定聊天时间

发送它以获取时间：

```
 NSXMLElement *iq1 = [NSXMLElement elementWithName:@"iq"];
 [iq1 addAttributeWithName:@"type" stringValue:@"get"];
 [iq1 addAttributeWithName:@"id" stringValue:@"pk1"];
 NSXMLElement *retrieve = [NSXMLElement elementWithName:@"list" xmlns:@"urn:xmpp:archive"];
 [retrieve addAttributeWithName:@"with" stringValue:@"amit@openfire"];
 NSXMLElement *set = [NSXMLElement elementWithName:@"set" xmlns:@"http://jabber.org/protocol/rsm"];
 NSXMLElement *max = [NSXMLElement elementWithName:@"max" stringValue:@"100"];
 [iq1 addChild:retrieve];
 [retrieve addChild:set];

 [set addChild:max];

 [xmppStream sendElement:iq1]; 
```

## 检索聊天记录

使用开始日期并发送：

```
 NSXMLElement *iq1 = [NSXMLElement elementWithName:@"iq"];
 [iq1 addAttributeWithName:@"type" stringValue:@"get"];
 [iq1 addAttributeWithName:@"id" stringValue:@"pk1"];

 NSXMLElement *retrieve = [NSXMLElement elementWithName:@"retrieve" xmlns:@"urn:xmpp:archive"];
 [retrieve addAttributeWithName:@"with" stringValue:@"amit@openfire"];
 [retrieve addAttributeWithName:@"start" stringValue:@"2013-11-18T05:11:53.460Z"];
 NSXMLElement *set = [NSXMLElement elementWithName:@"set" xmlns:@"http://jabber.org/protocol/rsm"];
 NSXMLElement *max = [NSXMLElement elementWithName:@"max" stringValue:@"100"];
 [iq1 addChild:retrieve];
 [retrieve addChild:set];
 [set addChild:max];
 [xmppStream sendElement:iq1]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-18T06:03:24.337

首先，要从 openfire 检索聊天记录，您需要安装 Open Archive 插件，因为监控插件仅用于在管理面板上监控和记录聊天历史记录，因此一旦您安装 Open Archive，您将不会收到代码“500”的任何错误。

您可以从以下链接下载并学习安装 Open Archive。

[https://nexus.reucon.com/content/repositories/opensource-snapshots/com/reucon/openfire/plugins/archive/](https://nexus.reucon.com/content/repositories/opensource-snapshots/com/reucon/openfire/plugins/archive/)

[https://maven.reucon.com/projects/public/archive/](https://maven.reucon.com/projects/public/archive/)

上述代码中的另一个问题是，当您在请求中提及开始标签时，它与具有确切时间戳的聊天匹配，这就是它返回错误代码“404”的原因。我从我的请求中省略了开始标记并编写了以下代码，该代码返回与用户的整个聊天历史记录。

```
NSXMLElement *iq1 = [NSXMLElement elementWithName:@"iq"];
[iq1 addAttributeWithName:@"type" stringValue:@"get"];
[iq1 addAttributeWithName:@"id" stringValue:@"pk1"];

NSXMLElement *retrieve = [NSXMLElement elementWithName:@"retrieve" xmlns:@"urn:xmpp:archive"];

[retrieve addAttributeWithName:@"with" stringValue:@"rahul@vishals-mac-pro.local"];
NSXMLElement *set = [NSXMLElement elementWithName:@"set" xmlns:@"http://jabber.org/protocol/rsm"];
NSXMLElement *max = [NSXMLElement elementWithName:@"max" stringValue:@"100"];

[iq1 addChild:retrieve];
[retrieve addChild:set];
[set addChild:max];
[[[self appDelegate] xmppStream] sendElement:iq1]; 
```

在这里，这将返回用户 Rahul 和当前登录用户之间的 XML 响应中的整个聊天历史记录。

有关更多详细信息，请参阅此博客[http://question.ikende.com/question/363439343236313430](http://question.ikende.com/question/363439343236313430)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-27T05:10:51.240

从 openfire 服务器获取归档消息的 Swift 版本请求：

```
func getArchieveMessages(){
        let iQ = DDXMLElement.elementWithName("iq")
        iQ.addAttributeWithName("type", stringValue: "get")
        iQ.addAttributeWithName("id", stringValue: "page1")
        let list = DDXMLElement.elementWithName("retrieve")
        list.addAttributeWithName("xmlns", stringValue: "urn:xmpp:archive")
        list.addAttributeWithName("with", stringValue: "partner@domain")
        let set = DDXMLElement.elementWithName("set")
        set.addAttributeWithName("xmlns", stringValue: "http://jabber.org/protocol/rsm")
        let max = DDXMLElement.elementWithName("max")
        max.addAttributeWithName("xmlns", stringValue: "http://jabber.org/protocol/rsm")
        //(max as! DDXMLElement).setStringValue("30")
        (set as! DDXMLElement).addChild(max as! DDXMLNode)
        list.addChild(set as! DDXMLNode)
        iQ.addChild(list as! DDXMLNode)
        xmppStream.sendElement(iQ as! DDXMLElement)
    } 
```

回复：

```
func xmppStream(sender: XMPPStream!, didReceiveIQ iq: XMPPIQ!) -> Bool {
        let chat = iq.elementForName("chat")
        let chats = (chat as DDXMLElement).children()
        for chat in chats{
            let msg = chat
            let body = (msg as! DDXMLElement).elementForName("body")
            if body != nil{
                if body.stringValue() != nil{
                    //print(body.stringValue()!)
                    chatMessages.append(body.stringValue()!)
                    if msg.attributeForName("jid") == nil{
                        type.append("Send")
                    }
                    else{
                        type.append("Receive")
                    }
                }
            }
        }
        print("Did receive IQ")
        return false
    } 
```

*with 是您要获取其存档消息的人的 jid

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-22T19:04:00.927

在 Swift 4 中获取归档消息的示例

声明并初始化变量 XMPPMessageArchivingCoreDataStorage 我在其中初始化 XMPPStream

```
var xmppMessageStorage: XMPPMessageArchivingCoreDataStorage?
var xmppMessageArchiving: XMPPMessageArchiving?

xmppMessageStorage = XMPPMessageArchivingCoreDataStorage.sharedInstance()
    xmppMessageArchiving = XMPPMessageArchiving(messageArchivingStorage: xmppMessageStorage)

    xmppMessageArchiving?.clientSideMessageArchivingOnly = true
    xmppMessageArchiving?.activate(stream)
    xmppMessageArchiving?.addDelegate(self, delegateQueue: DispatchQueue.main) 
```

这样做，每当消息到达时，这将导致它被归档而无需执行任何其他操作。

然后，检索归档的消息

```
func RecibedMessageArchiving(idFriend: String) {

        let JabberIDFriend = idFriend   //id friend chat, example test1@example.com

        let moc = xmppMessageStorage?.mainThreadManagedObjectContext
        let entityDescription = NSEntityDescription.entity(forEntityName: "XMPPMessageArchiving_Message_CoreDataObject", in: moc!)
        let request = NSFetchRequest<NSFetchRequestResult>()
        let predicateFormat = "bareJidStr like %@ "
        let predicate = NSPredicate(format: predicateFormat, JabberIDFriend)

        request.predicate = predicate
        request.entity = entityDescription

        //jabberID id del usuario, cliente
        var jabberIDCliente = ""
        if let jabberj = globalChat.value(forKey: "jabberID"){
            jabberIDCliente = jabberj as! String
        }

        do {
            let results = try moc?.fetch(request)

            for message: XMPPMessageArchiving_Message_CoreDataObject? in results as? [XMPPMessageArchiving_Message_CoreDataObject?] ?? [] {

                var element: DDXMLElement!
                do {
                    element = try DDXMLElement(xmlString: (message as AnyObject).messageStr)
                } catch _ {
                    element = nil
                }

                let body: String
                let sender: String
                let date: NSDate
                let isIncomings: Bool 
```

# c++ - C++ 32 位字字节交换

> ID：11397173
> 
> 赞同：0
> 
> 时间：2012-07-09T14:32:03.657
> 
> 标签：c++, byte, swap, endianness

> **可能重复：**
> [如何在 C++ 中的大端和小端值之间进行转换？](https://stackoverflow.com/questions/105252/how-do-i-convert-between-big-endian-and-little-endian-values-in-c)

我想知道你将如何字节交换 32 位字

我有这些单词的巨大缓冲区，并且由于字节顺序，它们中的每一个都需要进行字节交换。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T14:37:53.293

使用您的操作系统提供的功能（参见 Martin Beckett 的回答），或者，如果您出于兴趣正在寻找一种方法来执行此操作，您可能会对以下代码片段感兴趣：

```
x = (x & 0x0000FFFF) << 16 | (x & 0xFFFF0000) >> 16;
x = (x & 0x00FF00FF) << 8 | (x & 0xFF00FF00) >> 8; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:34:30.140

使用 您的操作系统提供的[htonl / ntohl](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738556%28v=vs.85%29.aspx)

# extjs - 将网格行中的数据加载到（弹出）表单中进行编辑

> ID：11397175
> 
> 赞同：1
> 
> 时间：2012-07-09T14:32:12.033
> 
> 标签：extjs, formpanel, loaddata

我在 Ext JS in Action（J. Garcia 著）中读到，如果我们有 Ext.data.Record 的实例，我们可以使用表单的 loadRecord 方法来设置表单的值。但是，他没有给出一个工作示例（在示例中，他使用数据通过名为 data.php 的文件加载到表单中）。我搜索了许多论坛，发现以下条目很有帮助，因为它让我了解了如何使用表单的 loadRecord 方法解决我的问题： [从网格加载数据到表单](https://stackoverflow.com/questions/10914803/load-data-from-grid-to-form)

现在我的商店和网格的代码如下：

```
var userstore = Ext.create('Ext.data.Store', {
  storeId: 'viewUsersStore',
  model: 'Configs',
  autoLoad: true,
  proxy: {
    type: 'ajax',
    url: '/user/getuserviewdata.castle',
    reader: {
      type: 'json',
      root: 'users'
    },
    listeners: {
      exception: function (proxy, response, operation, eOpts) {
        Ext.MessageBox.alert("Error", "Session has timed-out. Please re-login and try again.");
      }
    }
  }
});

var grid = Ext.create('Ext.grid.Panel', {
  id: 'viewUsersGrid',
  title: 'List of all users',
  store: Ext.data.StoreManager.lookup('viewUsersStore'),
  columns: [
    { header: 'Username', dataIndex: 'username' },
    { header: 'Full Name', dataIndex: 'fullName' },
    { header: 'Company', dataIndex: 'companyName' },
    { header: 'Latest Time Login', dataIndex: 'lastLogin' },
    { header: 'Current Status', dataIndex: 'status' },
    { header: 'Edit',
      menuDisabled: true,
      sortable: false,
      xtype: 'actioncolumn',
      width: 50,
      items: [{
        icon: '../../../Content/ext/img/icons/fam/user_edit.png',
        tooltip: 'Edit user',
        handler: function (grid, rowIndex, colIndex) {
          var rec = userstore.getAt(rowIndex);
          alert("Edit " + rec.get('username')+ "?");
          EditUser(rec.get('id'));
        }
      }]
    },
  ]
});

function EditUser(id) {
  //I think I need to have this code here - I don't think it's complete/correct though
  var formpanel = Ext.getCmp('CreateUserForm');
  formpanel.getForm().loadRecord(rec);
} 
```

'CreateUserForm' 是一个已经存在的表单的 ID，当用户点击编辑图标时它应该出现。然后应该使用网格行中的正确数据自动填充该弹出表单。

但是我的代码不起作用。我在“formpanel.getForm().loadRecord(rec)”行收到错误消息 - 它显示“Microsoft JScript 运行时错误：'undefined' is null or not an object”。

关于如何解决这个问题的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:42:49.013

Rec 在您的 EditUser 函数中未定义。您将 ID 作为参数提供给 EditUser，您需要将记录作为参数提供给它。

```
//The call
EditUser(rec);

function EditUser(rec) {
    var formpanel = Ext.getCmp('CreateUserForm'); 
    formpanel.getForm().loadRecord(rec);     
} 
```

# sql - 按最小和最大日期分组

> ID：11397176
> 
> 赞同：2
> 
> 时间：2012-07-09T14:32:12.730
> 
> 标签：sql, ms-access, gaps-and-islands

```
date        |  name      | go to work 
------------+------------+---------
02/01/2012  | Mike       |  train
03/01/2012  | Mike       |  train
04/01/2012  | Mike       |  bus
07/01/2012  | Mike       |  bus
08/01/2012  | Mike       |  bus
09/01/2012  | Mike       |  train 
```

有了这些记录，我想创建一个表：

```
name     from        to              go to work 
------------------------------------------------
Mike     02/01/2012  03/01/2012        train
Mike     04/01/2012  08/01/2012        bus
Mike     09/01/2012  09/01/2012        train 
```

我不知道如何在 Access 中编写 SQL 代码。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:34:58.100

```
SELECT  name, MIN(`date`) AS from, MAX(`date`) AS to 
FROM your_table
GROUP BY name, go_to_work 
```

# c# - 为什么我的异常没有被捕获？

> ID：11397178
> 
> 赞同：1
> 
> 时间：2012-07-09T14:32:25.360
> 
> 标签：c#, exception, try-catch, executionengineexception

我只是在调试时遇到了一个我没有得到的问题：我正在使用 kernel32.dll 中的方法来获取可用 RAM，但是它抛出了一个 System.EngineExecutionException，我捕获了它，但是调试器在异常处仍然停止并拒绝继续。那么为什么异常没有被捕获呢？

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Management;
using System.Diagnostics;
using System.Runtime.InteropServices;

namespace StationController.Diagnose
{
public class Memorystatus
{
    public UInt32 Length;
    public UInt32 MemoryLoad;
    public UInt32 TotalPhys;
    public UInt32 AvailPhys;
    public UInt32 TotalPageFile;
    public UInt32 AvailPageFile;
    public UInt32 TotalVirtual;
    public UInt32 AvailVirtual;
}
class Test
{
    [DllImport("kernel32")]
    private static extern void GlobalMemoryStatus(ref Memorystatus buf);

    private static UInt32 GetFreeRAM()
    {
        try
        {
            Memorystatus MemStat=new Memorystatus();
            GlobalMemoryStatus(ref MemStat);
        }
        catch (System.ExecutionEngineException){ return 0; }
        catch (System.Exception) { return 0; }
        catch { return 0; } //I know kind of redundant
        return sMemStat.AvailPhys;
    }
}
} 
```

工具->选项->“当异常在AppDomain之外时停止”未选中

我已经解决了异常的原因，Memorystatus 必须是一个结构而不是一个类，这个问题是关于 try-catch 行为

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:36:28.470

System.EngineExecutionException 是一个内部 .NET 错误，据我所知，当出现严重错误时，CLR 会抛出该错误。

能抓到吗？我不这么认为——因为我认为这个级别的异常会阻止你的代码继续执行

[http://social.msdn.microsoft.com/Forums/eu/clr/thread/4425321d-b291-4a2a-899c-8266f16e26d8](http://social.msdn.microsoft.com/Forums/eu/clr/thread/4425321d-b291-4a2a-899c-8266f16e26d8)

这可能是由于弄乱了非托管内存 - 例如您的 kernel32.dll 调用

[http://msdn.microsoft.com/en-us/library/system.executionengineexception.aspx](http://msdn.microsoft.com/en-us/library/system.executionengineexception.aspx)

# asp.net - 删除模板列

> ID：11397179
> 
> 赞同：0
> 
> 时间：2012-07-09T14:32:31.140
> 
> 标签：asp.net

我在 Visual Studio 2008 中使用带有 c# 的 ASP.NET。

我有一个数据网格，并且在数据网格中有一个模板列。我已经从另一个 .aspx 复制了数据网格。模板列用于删除目的（数据结果行），

但我不再需要这个模板列了。所以我尝试删除它。但是在执行时出现错误：“System.ArgumentOutOfRangeException = 指定的参数超出范围。参数名称索引。”

到达行时抛出错误：DataGrid1.DataBind();

我怎样才能解决这个问题 ？

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:47:00.230

我解决了。我不得不修改一些在 InitializeComponent() 中调用的方法。谢谢！

# javascript - 为什么匿名函数会被调用，而命名函数却不会？

> ID：11397182
> 
> 赞同：3
> 
> 时间：2012-07-09T14:32:45.810
> 
> 标签：javascript, coffeescript, dom-events

我正在创建一个 CoffeeScript 应用程序，它用画布元素覆盖网络摄像头视频（这只是为了上下文，但似乎与我的问题无关）。为了获得适当的画布大小以覆盖在视频上，我将事件处理函数附加到`loadedmetadata`事件，如下所示：

```
WebcamWizard.prototype.initializeUserMedia = function(stream) {
  // ...
  video = document.getElementById('webcam');
  video.addEventListener('loadedmetadata', function(e) {
     // ...
     v = e.srcElement;
     // ...
  });
  // ...
} 
```

这很好用。但是，在这种情况下，我的偏好是在这个特定类的不同方法中定义这个处理程序方法，如下所示：

```
WebcamWizard.prototype.initializeUserMedia = function(stream) {
   // ...
   video = document.getElementById('webcam');
   video.addEventListener('loadedmetadata', this.initializeCanvas);
   // ...
}

WebcamWizard.prototype.initializeCanvas = function(e) {
   // ...
   video = e.srcElement;
   // ...
} 
```

我喜欢这个的原因是因为它使 CoffeeScript 看起来更整洁，并允许我更轻松地访问我正在使用的类中的画布 DOM 对象。但是，当我执行第二个操作时，`initializeCanvas`似乎没有调用该方法。控制台上也没有报告错误。这是为什么？

奇怪的是，以这种方式调用方法似乎在同一个文件中以完全相同的方式工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T14:35:53.497

`this`问题可能是在事件发生后调用“initializeCanvas”时会缺少有用的参考。您正在传递对函数的引用，但`this`绑定是短暂的，将无法生存。

您可以将其包装在另一个函数中或使用`.bind()`：

```
var wiz = this;
video.addEventListener('loadedmetadata', function() { wiz.initializeCanvas }); 
```

# sql - 计算距离时，我的查询收到以下错误

> ID：11397189
> 
> 赞同：3
> 
> 时间：2012-07-09T14:32:58.493
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2008-r2

我收到以下错误“发生了无效的浮点运算”。当我运行此查询时：

```
SELECT PolID, LocID, Address, City, StateCode, OrigGeoLat, OrigGeoLong, NewGeoLat, NewGeoLong, 
acos(sin(radians(OrigGeoLat)) * sin(radians(NewGeoLat)) +
        cos(radians(OrigGeoLat)) * cos(radians(NewGeoLat)) *
        cos(radians(OrigGeoLong - NewGeoLong))) * 6372.8  as Distance
FROM zzGeoDataTMP 
```

所有 *geoLat 和 *geoLong 数据都定义为 numeric(18,10)。当我运行查询时，我开始取回数据，然后在特定的数据行上出现错误。例如，以下行仅在调用 ACOS 函数时才引发上述异常：

```
OrigGeoLat|OrigGeoLong|NewGeoLat|NewGeoLong
---------------------------------------------
32.9364620|-80.0411000|32.9364620|-80.0411000 
```

非常感谢您提供任何可以提供帮助的见解！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T14:50:52.190

您的计算正在累积一些小错误，这意味着计算值（传递给`ACOS`）*略高于*1。尝试用[`ROUND`](http://msdn.microsoft.com/en-us/library/ms175003.aspx)调用包装它：

```
acos(ROUND(sin(radians(OrigGeoLat)) * sin(radians(NewGeoLat)) +
    cos(radians(OrigGeoLat)) * cos(radians(NewGeoLat)) *
    cos(radians(OrigGeoLong - NewGeoLong)),15)
    ) 
```

我们*只*保留小数点后 15 位的准确性。

# c# - 在 c# 中使用 msi.dl 从 MSI 表中获取主键

> ID：11397192
> 
> 赞同：2
> 
> 时间：2012-07-09T14:33:10.643
> 
> 标签：c#, com, windows-installer

我在 c# 中调用`get_PrimaryKeys()`函数时遇到问题。`msi.dll`我想资助给定 MSI 表中的主键。我使用以下代码：

```
Type installerType = Type.GetTypeFromProgID("WindowsInstaller.Installer");
installer = (Installer)Activator.CreateInstance(installerType);
database = installer.OpenDatabase(MSIPath, MsiOpenDatabaseMode.msiOpenDatabaseModeTransact);
WindowsInstaller.Record data = null;     
data = database.PrimaryKeys[tableName];
string s = data.get_StringData(1); 
```

如果我使用`database.get_PrimaryKeys(tableName)`，它会给出相同的错误，即：

```
COMexception
Member not found. (Exception from HRESULT: 0x80020003 (DISP_E_MEMBERNOTFOUND)) 
```

当我使用 msi.dll 中的其他函数时，它们工作正常。

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T06:08:41.083

有一种更简单的方法可以从 C# 代码中查询 MSI 数据库。[WiX 工具集](http://wixtoolset.org/)包括一个精心设计的便捷 .NET API，称为 DTF（部署工具基础），它可以编写以下代码（C#）：

```
 using (var database = new Database("path\\to\\package.msi", DatabaseOpenMode.ReadOnly))
  {
    var table = database.Tables["someTableName"];
    foreach (var column in table.PrimaryKeys)
    {
      Console.WriteLine("The table {0} defines {1} as primary key", table.Name, column);
    }
  } 
```

所有你需要做的：

*   安装[WiX 工具集](http://wixtoolset.org/releases)
*   `Microsoft.Deployment.WindowsInstaller.dll`在您的 C# 项目中引用
*   添加`using Microsoft.Deployment.WindowsInstaller;`命名空间

您不必为了从 DTF 中获得优势而使用 WiX 构建您的 MSI。参考 DTF.chm（与 WiX 一起安装）以了解更多信息。

# mysql - SQL搜索具有相同名称列的条目？

> ID：11397193
> 
> 赞同：0
> 
> 时间：2012-07-09T14:33:12.327
> 
> 标签：mysql

我们有一个带有`VehicleName`列的车辆表。我正在调查用户拥有多辆相同车辆的错误`VehicleName`。我有这个查询来帮助返回哪些 VehicleNames 已被多次使用：

```
SELECT VehicleName, 
 (
  SELECT count(VehicleName) 
  FROM Vehicles as V2 
  WHERE V1.VehicleName = V2.VehicleName
 )
FROM Vehicles as V1; 
```

一方面，它很慢。这还不错，因为它不会投入生产。这只是为了帮助修复错误。其次，这将返回每一个`VehicleName`，甚至是计数为 1 的那些，这些是我对此应用程序不感兴趣的 VehicleNames。我不记得如何命名子查询，所以我不能添加一个`where`来限制它。

我不仅对如何命名子查询感兴趣，而且对他们更快的解决方案感兴趣吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T14:36:06.803

你想以某种丑陋的方式做到这一点吗？

```
SELECT VehicleName, COUNT(*) as TOTAL
FROM Vehicles
GROUP BY VehicleName
HAVING TOTAL > 1
ORDER BY TOTAL DESC; 
```

# symfony-2.1 - 对未绑定的表单字段进行验证

> ID：11397195
> 
> 赞同：4
> 
> 时间：2012-07-09T14:33:14.120
> 
> 标签：symfony-2.1

我有一个使用'property_path' => false 添加的额外未绑定字段的表单。

我想在这个领域做一个简单的验证，我发现很多答案建议使用类似的东西

```
$builder->addValidator(...); 
```

但我已经看到在 symfony 2.1 中 $builder->addValidator 已被弃用。有谁知道在 Symfony 2.1 中对未绑定字段进行验证的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T15:54:21.980

### 编辑 ：

我刚刚对主题[Symfony validate form with mapped false form fields做了一个更完整的回答](https://stackoverflow.com/questions/12911686/symfony-validate-form-with-mapped-false-form-fields/13086678#13086678)

### 原始答案

验证表单中的未绑定（非映射）字段没有很好的文档记录，快速发展的表单和验证器组件使少数示例过时（对于 Symfony 2.1.2）。

现在，我成功地使用事件侦听器验证了非映射字段。这是我的简化代码：

```
namespace Dj\TestBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

use Symfony\Component\Form\FormEvents;
use Dj\TestBundle\Form\EventListener\NewPostListener;

class PostType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('lineNumber', 'choice', array(
                        'label' => 'How many lines :',
                        'choices' => array(
                            3 => '3 lines',
                            6 => '6 lines'
                        ),
                        // 'data' => 3, // default value
                        'expanded' => true,
                        'mapped' => false
                    ))
                ->add('body', 'textarea', array(
                        'label' => 'Your text',
                        'max_length' => 120));

        // this listener will validate form datas
        $listener = new NewPostListener;
        $builder->addEventListener(FormEvents::POST_BIND, array($listener, 'postBind'));
    }

    // ... other methods
} 
```

和事件监听器：

```
namespace Dj\TestBundle\Form\EventListener;

use Symfony\Component\Form\FormEvent;
use Symfony\Component\Form\FormError;

/**
 * listener used at Post creation time to validate non mapped fields
 */
class NewPostListener
{

    /**
     * Validates lineNumber and body length
     * @param \Symfony\Component\Form\FormEvent $event
     */
    public function postBind(FormEvent $event)
    {
        $form = $event->getForm();
        $data = $event->getData();

        if (!isset($data->lineNumber)) {
            $msg = 'Please give a correct line number';
            $form->get('lineNumber')->addError(new FormError($msg));
        }

        // ... other validations

    }
} 
```

这就是我验证我的非映射字段的方式，直到我发现如何使用验证器执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:50:44.713

我从我们得到的文档中遇到了同样的问题：

> 接口 FormValidatorInterface 已被弃用，将在 Symfony 2.3 中删除。如果您使用此接口实现了自定义验证器，则可以用侦听 FormEvents::POST_BIND（或任何其他 *BIND 事件）的事件侦听器替换它们。如果您使用了 CallbackValidator 类，您现在应该将回调直接传递给 addEventListener。

这建议使用事件侦听器，但我还没有找到示例。

[https://github.com/symfony/symfony/blob/master/UPGRADE-2.1.md](https://github.com/symfony/symfony/blob/master/UPGRADE-2.1.md)

# java - 如何使用 Lucene 或余弦相似度查找文档相似度

> ID：11397202
> 
> 赞同：1
> 
> 时间：2012-07-09T14:33:24.617
> 
> 标签：java, lucene, cosine-similarity

大家好，我正在做一个网络项目，它具有查找两个文档之间相似性的功能。这些文件是文本文件。所以我需要使用余弦相似度或 lucene 来做到这一点。谁能帮我做到这一点？我找不到任何代码示例。我需要的是使用 lucene 或余弦相似度查找文档相似度的代码示例。请帮助我克服这个问题。（我正在使用 java 开发程序。请为此提供完整的代码示例）。提前致谢。

# python - 消除通知重复

> ID：11397203
> 
> 赞同：0
> 
> 时间：2012-07-09T14:33:27.083
> 
> 标签：python, django, notifications

我正在尝试创建像 facebook 一样的通知。一切正常，但我有重复。例如，action = like, url = post/1 我想获取所有 status = 1 的通知 - 未读并消除 action 和 url 相同的重复项。你可以在下面找到代码我有这样的错误：

错误：“列表索引超出范围”在

`if n_dup[i]['url'] == n_dup[j]['url'] and n_dup[i]['action'] == n_dup[j]`

```
def recieve_notification(request):
    t = loader.get_template('notifications.html')
    nots = Notification.objects.filter(recipent=request.user, status=1, pub_date__gte=datetime.datetime.now()-datetime.timedelta(days=3))
    n_dup = [] #list of notifications with duplicates
    for n in nots:
        n_dup.append({'id':n.id, 'url':n.url, 'action':n.action})

    i = len(n_dup)-1
    j = len(n_dup)-1    
    while j>=0:
        while i>=0: 
            if n_dup[i]['url'] == n_dup[j]['url'] and n_dup[i]['action'] == n_dup[j]['action'] and i is not j:  
                del n_dup[i]
            i-=1
        j-=1
        out_n = []      
        for n in n_dup:
            n_id = n['id']  
        out_n.append(Notification.objects.get(id=n_id)) 

    c = RequestContext(request, {'notifications':out_n, 'notifications_count':len(out_n)})
    return HttpResponse(t.render(c))` 
```

也许您知道编写所有这些东西的更好方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T14:51:45.227

在两个循环的第一次迭代中，`j == i == len(n_dup)-1`，所以`n_dup[i] == n_dup[j]`。它被认为是重复的并被删除。在第二次迭代中，您将尝试访问`n_dub[len(n_dup)-1]`不再存在的内容，因为您已将其删除。

* * *

如果我可以建议另一种方法，让我们偷懒，让 python 为我们做重复检测：

```
class Notification:
    def __init__(self, id, url, action):
        self.id = id
        self.url = url
        self.action = action

    def __eq__(self, other):
        return self.url == other.url and self.action == other.action

    def __hash__(self):
        return hash(self.url) ^ hash(self.action)

unique_notifications = {Notification(n.id, n.url, n.action) for n in nots} 
```

我们定义一个通知对象，用一种方法来比较它并计算一个哈希（这是将它放入一个集合中所需要的），并创建一组通知。集合从不包含重复项，因此您现在可以遍历集合！

您还可以将此方法添加到您的通知对象并直接使用它。然后你会写：

```
out_n = set(Notification.objects.filter(...)) 
```

奖励：该组用于删除重复项的算法比您使用的算法有效得多。

# ddl - 如何使用 mpeg-7 的 DDL(Description Definition Language) 来修改已有的描述符？

> ID：11397204
> 
> 赞同：2
> 
> 时间：2012-07-09T14:33:28.283
> 
> 标签：ddl, mpeg

在[维基百科](http://en.wikipedia.org/wiki/Description_Definition_Language)（和 MPEG-7 标准）中，它说：

> DDL（描述定义语言）是 MPEG-7 标准的一部分。它为用户提供了一套重要的工具来创建他们自己的描述方案（DS）和描述符（D）。DDL 定义语法规则来定义、组合、扩展和修改描述方案和描述符。

但我找不到任何关于如何使用 DDL 修改现有 DS 或 D 的教程。有什么例子吗？

# c# - 如何将 C# 与 ACAD 2010 连接起来

> ID：11397205
> 
> 赞同：2
> 
> 时间：2012-07-09T14:33:28.367
> 
> 标签：c#, .net, autocad

在 vs2008 C# 上工作，需要帮​​助连接 autocad 2010，我按照以下步骤连接，但它给了我一个错误。

我必须添加引用，所以我转到引用>>添加引用>>[COM TAB]>>Autocad 2010 类型库>>[OK]

我使用两个库：

```
using Autodesk.AutoCAD.Interop;
using Autodesk.AutoCAD.Interop.Common; 
```

然后我使用以下代码连接 AutoCAD 2010：

```
namespace Sample_CSharp_Acad_connect
{

 class Program
    {
        private static IAcadApplication oAcadApp = null;
        private static string sAcadID = "AutoCAD.Application.18";

        static void Main()
        {
            try  //get a running AutoCAD instance if avaialbale
            {
                oAcadApp = (IAcadApplication)System.Runtime.InteropServices.Marshal.GetActiveObject(sAcadID);
            }
            catch(Exception) //none found so start a new instance
            {
                System.Type AcadProg = System.Type.GetTypeFromProgID(sAcadID);
                oAcadApp = (IAcadApplication)System.Activator.CreateInstance(AcadProg);
            }
            if (oAcadApp != null)
            {
                oAcadApp.Visible = true; //could leave this false to hide Acad from the user
                //do whatever with Acad
                //oAcadApp.Quit();
            }
        }
    } 
```

错误消息：**获取组件 CLSID 的对象类 COM 时出错** ![在此处输入图像描述](../Images/c6bed0be524543605a784ff886d06d8b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T12:54:22.257

通讯？不要这样做。

AutoCAD 有一个 .NET API。有关来自 Autodesk 的资源，请参见[http://usa.autodesk.com/adsk/servlet/index?id=1911627&siteID=123112](http://usa.autodesk.com/adsk/servlet/index?id=1911627&siteID=123112)。另请参阅此处的 wiki 以获取更多信息和大量链接：[https ://stackoverflow.com/tags/autocad/info](https://stackoverflow.com/tags/autocad/info)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:54:10.780

你如何运行这段代码？是exe文件吗？据我所知，使用外部程序控制 AutoCAD 并不容易。通常存在阻止此类操作的 lizening 问题。

使用 DLL 访问 AutoCAD 功能可能更容易。在这种情况下，可以直接访问 AutoCAD 的对象模型：

```
Dim theApp as Autodesk.AutoCAD.Interop.AcadApplications = Autodesk.AutoCAD.Interop.AcadApplication()
Debug.Print(theApp.Caption) 
```

SDK 包含大量可加载到 AutoCAD 中的 DLL 示例。

**并且：如果没有必要，请考虑使用 .NET！**

# java - Django Web 前端和 Java 守护进程之间的通信

> ID：11397214
> 
> 赞同：1
> 
> 时间：2012-07-09T14:33:48.293
> 
> 标签：java, python, django, python-2.6

想象一下，我有

1.  一个 Django Web 前端和
2.  Java 守护进程。

该系统用于允许通过网络执行一些复杂的计算。

“一些复杂的计算”包括

*   为每个网络用户创建一个单独的数据库，
*   在服务器上运行本机脚本（同样，每个 Web 用户都有自己的目录和自己的文件），
*   解析由脚本生成的文件，
*   清理用户目录，当网络用户注销时，
*   生成要在 Web 前端显示的图像。

实施这种沟通有哪些选择

1.  从 Web 前端到 Java 守护进程（如“生成图像 X”请求）和
2.  从 Java 守护进程到 Web 前端（例如将生成的图像发回）

?

要求：

1.  简单性：这个系统将是一个原型（概念验证），我稍后会从头开始重写它（如果这个想法被证明是好的）。
2.  易于部署：我会非常频繁地更新网络前端和守护进程。

重要说明：目前，我不关心可扩展性/性能。

# android - 当加速度计中 3axis 的值发生变化时如何触发警报？

> ID：11397215
> 
> 赞同：0
> 
> 时间：2012-07-09T14:33:48.180
> 
> 标签：android, accelerometer

我有以下代码：

```
import android.app.Activity;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Bundle;
import android.widget.TextView;

public class MainActivity extends Activity implements SensorEventListener {
private SensorManager sensorManager;

TextView xCoor; // declare X axis object
TextView yCoor; // declare Y axis object
TextView zCoor; // declare Z axis object

@Override
public void onCreate(Bundle savedInstanceState){

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    xCoor=(TextView)findViewById(R.id.xcoor); // create X axis object
    yCoor=(TextView)findViewById(R.id.ycoor); // create Y axis object
    zCoor=(TextView)findViewById(R.id.zcoor); // create Z axis object

    // add listener. The listener will be HelloAndroid (this) class
    sensorManager.registerListener(this,
            sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
            SensorManager.SENSOR_DELAY_NORMAL);

    /*  More sensor speeds (taken from api docs)
        SENSOR_DELAY_FASTEST get sensor data as fast as possible
        SENSOR_DELAY_GAME   rate suitable for games
        SENSOR_DELAY_NORMAL rate (default) suitable for screen orientation changes
    */
}

public void onAccuracyChanged(Sensor sensor,int accuracy){

}

public void onSensorChanged(SensorEvent event){

    // check sensor type
    if(event.sensor.getType()==Sensor.TYPE_ACCELEROMETER){

        // assign directions
        float x=event.values[0];
        float y=event.values[1];
        float z=event.values[2];
// to display the 
        xCoor.setText("Accelerometer X: "+ x);
        yCoor.setText("Accelerometer Y: "+ y);
        zCoor.setText("Accelerometer Z: "+ z);
    }
} 
```

我需要在其中一个轴更改其值时触发警报....让说当发生事故并且我的 x 轴发生更改并将触发视频上传事件....有没有人知道并愿意引导我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:51:00.717

您将需要这样的东西（请注意，这更像是一个示例，而不是功能性 Android 特定代码）：

```
float foo = 100f;//Some default value

public void compareX(float x) { //Call this from your onSensorChanged and pass it the X value
float diff = x - foo;
if(diff>threshold) //threshold is the baseline value for your sudden change
{
uploadVideo();
}
else{
foo = x;
} 
```

这很可能在实践中不起作用，因为传感器会很快为您提供新值，并且差异不太可能高于阈值。相反，您需要对其进行编辑以在短时间内存储传感器的最大值和最小值，并检查它们与阈值的差异。例如，记录 3 秒内的最大值和最小值，并进行比较。如果它们的差异大于阈值，您应该从一些事故测试数据中预先计算出阈值，然后您上传视频或任何您想做的事情。

# apache-flex - 无法在 Chrome 开发工具中查看从 Flex 对象发出的 AJAX 请求的响应数据

> ID：11397220
> 
> 赞同：1
> 
> 时间：2012-07-09T14:34:03.483
> 
> 标签：apache-flex, google-chrome, flash, google-chrome-devtools

我不知道这改变的确切时间，但可能在版本 18 左右......过去，当 Flash 应用程序 (SWF) 进行 AJAX 调用时，我可以看到调用记录并且响应（将是 JSON）可用在网络选项卡的预览和响应子选项卡中 - 请注意，预览选项卡中的响应**不会**是漂亮的打印树。

现在，我看到了 AJAX 调用和所有标题信息，但预览和响应子选项卡是空的！

是否有可以记录这些的标志/设置？（我在 Chrome 20 上）

# silverlight - 使用用户名和密码的 SSAS 上 OLAP 多维数据集的 ADOMD 连接字符串

> ID：11397222
> 
> 赞同：0
> 
> 时间：2012-07-09T14:34:07.257
> 
> 标签：silverlight, connection-string, ssas, olap, adomd.net

我想从**Silverlight** 应用程序与部署在**SSAS上的****OLAP Cube建立连接。**我正在使用**ADOMD 库**，我想知道**Connection String**的格式。我有服务器 URL、多维数据集名称、用户名和密码。在[官方文档](http://msdn.microsoft.com/en-us/library/ms123468) 中我没有找到如何指定**身份验证参数**...

 ******//从**SQL Server Management Studio**我使用 Windows 身份验证连接到 OLAP 多维数据集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:50:06.913

它与 OLE DB 几乎相同。看到这个：http: [//msdn.microsoft.com/en-us/library/microsoft.analysisservices.adomdclient.adomdconnection.connectionstring](http://msdn.microsoft.com/en-us/library/microsoft.analysisservices.adomdclient.adomdconnection.connectionstring)******

# c# - 使用 lucene.net 锁定索引

> ID：11397224
> 
> 赞同：0
> 
> 时间：2012-07-09T14:34:12.190
> 
> 标签：c#, .net, lucene, locking, lucene.net

我在 SAN（共享区域网络）上有一个 Lucene 索引，它被多个 lucene 实例使用，分布在多台机器上。更新索引的时候，lucene的一个实例，会说add or update document，它会使i nativeFSLock，这使得其他人无法同时写，这个很好用！

问题是，我希望能够向任何 lucene 实例发送包含更新的批处理，并且我希望它完成所有更新然后释放锁。在 Lucene.net 中没有 addDocuments 方法，只有 AddDocument。所以我必须遍历我的所有文档并一次添加一个。一旦添加了一个文档，lucene 就会释放锁，然后为下一个文件创建一个新锁。因此，如果其他人尝试同时更新或添加文档，它有时会在那个小时间跨度内成功获得锁，而当这种情况发生时，只有我的一部分批次会通过（竞争条件）。

我想获得一个锁，直到我的整个批次完成后才释放它，有什么建议吗？

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T17:14:17.660

不要对存储在 SAN 上的索引使用 NativeFSLockFactory，或使用专用节点写入索引。

尝试使用 SimpleFSLockFactory 并查看它是否可以解决您的锁定问题。但是使用 SimpleFSLockFactory 可能会出现另一个问题，如果您的进程在持有锁时崩溃，它会留下锁。

更多细节在这里： http: [//lucene.apache.org/core/old_versioned_docs/versions/2_9_4/api/all/org/apache/lucene/store/NativeFSLockFactory.html](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_4/api/all/org/apache/lucene/store/NativeFSLockFactory.html)

我建议您使用上面链接中指定的锁定测试工具测试您的环境。（VerifyingLockFactory、LockVerifyServer 和 LockStressTest）

# zend-framework2 - Zend 框架 2：Zend_Navigation

> ID：11397226
> 
> 赞同：0
> 
> 时间：2012-07-09T14:34:19.483
> 
> 标签：zend-framework2

我只是想知道在 Zend Framework2 中使用 Zend_Navigation 的最佳方法是什么。目前我正在尝试为页眉和页脚菜单添加配置。两个菜单都应该自动填充。虽然，我遇到了很多问题：

a) 默认菜单的最佳位置应该是应用程序模块

b）我将以下内容添加到 module.config.php 的根目录中：

```
'view_helpers' => array(
    'helper_map' => array(
            'navigation' => 'Application\View\Helper\Navigation'
    ),
), 
```

我的 Navigation.php 位于 ./module/Application/src/Application/View/Helper/Navigation.php

并包含：

```
class Navigation extends AbstractContainer {
    public function __construct($menu = null) {
        var_dump($menu);
    }
} 
```

我知道班级可能是错的。但此刻我什至没有让 ZF2 加载类。怎么了 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:55:51.063

假设您使用的是 beta5 - 您只是错误地配置了 viewhelper。请参阅[这篇文章](https://stackoverflow.com/questions/11392624/how-to-add-custom-view-helpers-to-zend-framework-2-beta5)，了解如何正确执行此操作。

关于如何使用导航：我会在名为 servicemanager 的服务中创建一个服务，`navigation`并将我的导航放入一个新的配置键中：

```
return array(
    'navigation' => array(
        // your navigation config goes here
    ),
    'servicemanager' => array(
        'factories' => array(
            'navigation' => function($sm) {
                $config = $sm->get('Configuration');
                $navigation = new \Zend\Navigation\Navigation($config->get('navigation'));
                return $navigation;
            }
        ),
    ),
    'view_helpers' => array(
        'factories' => array(
            'navigation' => function($sm) {
                return new \My\View\Helper\Navigation($sm->get('navigation'));
            }
        ),
    ),
); 
```

（不确定导航类名称。没有看过它们。）

这做了三件事：

*   如果zend的导航，提供一个称为`navigation`指向实际实例的服务
*   提供您的视图助手并将其提供给导航实例的引用
*   `navigation`创建一个包含导航配置的新顶级键。其他模块可以在此处添加自定义导航，而无需更改设置中的任何内容。

例如，在您的控制器中，您通过调用代码获取导航实例

```
$this->getServiceLocator()->get('navigation'); 
```

而在您的视图中，助手可以通过其构造函数访问导航：

```
Navigation extends // ...
{
    public function __construct($navigation)
    {
        // do anything you want
    }
} 
```

其他模块可以通过写入相同的键向导航添加条目：

```
return array(
    'navigation' => array(
        // further navigation entries
    ),
); 
```

您将初始逻辑放在哪里（例如设置服务/视图助手）取决于您。我更喜欢为此编写一个自己的模块，可以通过一行代码禁用它（导致导航不再存在）。但是默认模块可能也是一个好地方。最终，您可以为导航和视图助手创建自己的工厂类，而不是将配置与代码混合。

免责声明：代码只是草稿 - 未经测试。

# asp.net - 单击提交按钮从 mvc 控制器进行 TPL 异步调用

> ID：11397229
> 
> 赞同：1
> 
> 时间：2012-07-09T14:34:30.027
> 
> 标签：asp.net, asp.net-mvc-3, task-parallel-library

基本上我想实现简单的搜索功能，每当用户在视图中的文本框中输入一些关键字并单击提交按钮时，我想使用 TPL 异步机制对预定义的网站 url 进行 ASYNC 调用。当我对控制台应用程序执行相同操作时，它就像一个魅力，但不适用于 ASP.NET MVC3。

我找不到原因

```
 public ActionResult Index()
    {
        ViewBag.Message = "Welcome to ASP.NET MVC!";

        return View();
    }

    public ActionResult About()
    {
        return View();
    }

    [HttpPost]
    public ActionResult Index(string text)
    {
        string[] url =  { "http://www.msnbc.com", "http://www.yahoo.com",
                             "http://www.nytimes.com", "http://www.washingtonpost.com",
                             "http://www.latimes.com", "http://www.newsday.com" };
        Task<string[]> webTask = this.GetWordCounts(url, text);
        string[] results = null;
        try
        {
            results = webTask.Result;
        }
        catch (AggregateException e)
        {

        }

        return View("Index", results);

    }

    //Taken from MSDN
    Task<string[]> GetWordCounts(string[] urls, string name)
    {
        TaskCompletionSource<string[]> tcs = new TaskCompletionSource<string[]>();
        WebClient[] webClients = new WebClient[urls.Length];

        object m_lock = new object();
        int count = 0;
        List<string> results = new List<string>();
        for (int i = 0; i < urls.Length; i++)
        {
            webClients[i] = new WebClient();

            #region callback
            // Specify the callback for the DownloadStringCompleted
            // event that will be raised by this WebClient instance.
            webClients[i].DownloadStringCompleted += (obj, args) =>
            {
                if (args.Cancelled == true)
                {
                    tcs.TrySetCanceled();
                    return;
                }
                else if (args.Error != null)
                {
                    // Pass through to the underlying Task
                    // any exceptions thrown by the WebClient
                    // during the asynchronous operation.
                    tcs.TrySetException(args.Error);
                    return;
                }
                else
                {
                    // Split the string into an array of words,
                    // then count the number of elements that match
                    // the search term.
                    string[] words = null;
                    words = args.Result.Split(' ');
                    string NAME = name.ToUpper();
                    int nameCount = (from word in words.AsParallel()
                                                     where word.ToUpper().Contains(NAME)
                                                     select word)
                                                    .Count();

                    // Associate the results with the url, and add new string to the array that 
                    // the underlying Task object will return in its Result property.
                    results.Add(String.Format("{0} has {1} instances of {2}", args.UserState, nameCount, name));
                }

                // If this is the last async operation to complete,
                // then set the Result property on the underlying Task.
                lock (m_lock)
                {
                    count++;
                    if (count == urls.Length)
                    {
                        tcs.TrySetResult(results.ToArray());
                    }
                }
            };
            #endregion

            // Call DownloadStringAsync for each URL.
            Uri address = null;
            try
            {
                address = new Uri(urls[i]);
                // Pass the address, and also use it for the userToken 
                // to identify the page when the delegate is invoked.
                webClients[i].DownloadStringAsync(address, address);
            }

            catch (UriFormatException ex)
            {
                // Abandon the entire operation if one url is malformed.
                // Other actions are possible here.
                tcs.TrySetException(ex);
                return tcs.Task;
            }
        }

        // Return the underlying Task. The client code
        // waits on the Result property, and handles exceptions
        // in the try-catch block there.
        return tcs.Task;
    } 
```

这是我的观点 - 现在我将关键字硬编码为 microsoft

```
@using (Html.BeginForm("Index", "Home", new { text = "Microsoft" }))
{
<input type="submit" />
} 
```

更新：它永远停留在 Index Post 方法的 try 块内

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T17:03:21.960

我建议您为此任务使用[AsyncController](http://msdn.microsoft.com/en-us/library/ee728598.aspx)以避免危害 ASP.NET 工作线程，这是 ASP.NET 应用程序可能发生的最糟糕的事情之一 => 工作线程用完。这就像在沙漠中耗尽燃料。你肯定会死。

因此，让我们从编写一个扩展方法开始，它允许我们将基于 WebClient 事件的旧模式转换为基于任务的新模式：

```
public static class TaskExtensions
{
    public static Task<string> DownloadStringAsTask(this string url)
    {
        var tcs = new TaskCompletionSource<string>(url);
        var client = new WebClient();
        client.DownloadStringCompleted += (sender, args) =>
        {
            if (args.Error != null)
            {
                tcs.SetException(args.Error);
            }
            else
            {
                tcs.SetResult(args.Result);
            }
        };
        client.DownloadStringAsync(new Uri(url));
        return tcs.Task;
    }
} 
```

有了这个扩展方法，我们现在可以定义一个基本上反映我们视图要求的视图模型：

```
public class DownloadResultViewModel
{
    public string Url { get; set; }
    public int WordCount { get; set; }
    public string Error { get; set; }
} 
```

然后我们转到一个包含 2 个操作的异步控制器：一个标准的同步`Index`操作，它将呈现搜索表单，一个异步`Search`操作，将执行实际工作：

```
public class HomeController : AsyncController
{
    public ActionResult Index()
    {
        return View();
    }

    [AsyncTimeout(600000)]
    [HttpPost]
    public void SearchAsync(string searchText)
    {
        AsyncManager.Parameters["searchText"] = searchText;
        string[] urls = 
        { 
            "http://www.msnbc.com", 
            "http://www.yahoo.com",
            "http://www.nytimes.com", 
            "http://www.washingtonpost.com",
            "http://www.latimes.com", 
            "http://www.unexistentdomainthatwillcrash.com", 
            "http://www.newsday.com" 
        };

        var tasks = urls.Select(url => url.DownloadStringAsTask());
        AsyncManager.OutstandingOperations.Increment(urls.Length);
        Task.Factory.ContinueWhenAll(tasks.ToArray(), allTasks => 
        {
            var results =
                from task in allTasks
                let error = task.IsFaulted ? task.Exception.Message : null
                let result = !task.IsFaulted ? task.Result : string.Empty
                select new DownloadResultViewModel
                {
                    Url = (string)task.AsyncState,
                    Error = error,
                    WordCount = result.Split(' ')
                        .Where(x => string.Equals(x, searchText, StringComparison.OrdinalIgnoreCase))
                        .Count()
                };
            AsyncManager.Parameters["results"] = results;
            AsyncManager.OutstandingOperations.Decrement(urls.Length);
        });
    }

    public ActionResult SearchCompleted(IEnumerable<DownloadResultViewModel> results)
    {
        return View("index", results);
    }
} 
```

现在我们定义一个`~/Views/Home/Index.cshtml`包含搜索逻辑和结果的视图：

```
@model IEnumerable<DownloadResultViewModel>

@using (Html.BeginForm("search", null, new { searchText = "politics" }))
{
    <button type="submit">Search</button>
}

@if (Model != null)
{
    <h3>Search results</h3>
    <table>
        <thead>
            <tr>
                <th>Url</th>
                <th>Word count</th>
            </tr>
        </thead>
        <tbody>
            @Html.DisplayForModel()
        </tbody>
    </table>
} 
```

当然，我们模型的每个元素都会自动呈现相应的显示模板 ( `~/Views/Shared/DisplayTemplates/DownloadResultViewModel.cshtml`)：

```
@model DownloadResultViewModel
<tr>
    <td>@Html.DisplayFor(x => x.Url)</td>
    <td>
        @if (Model.Error != null)
        {
            @Html.DisplayFor(x => x.Error)
        }
        else
        {
            @Html.DisplayFor(x => x.WordCount)
        }
    </td>
</tr> 
```

现在，由于搜索操作可能需要相当长的时间，您的用户可能很快就会感到无聊，而无法使用您的网页必须提供的其他百分之几的功能。

`Search`在这种情况下，使用 AJAX 请求调用控制器操作并显示一个微调器以通知用户他们的搜索正在进行中但没有冻结网页允许他们做其他事情（没有明显地离开页面）是绝对微不足道的.

所以让我们这样做，好吗？

我们首先将结果外部化为部分 ( `~/Views/Home/_Results.cshtml`) 而不触及显示模板：

```
@model IEnumerable<DownloadResultViewModel>
@if (Model != null)
{
    <h3>Search results</h3>
    <table>
        <thead>
            <tr>
                <th>Url</th>
                <th>Word count</th>
            </tr>
        </thead>
        <tbody>
            @Html.DisplayForModel()
        </tbody>
    </table>
} 
```

我们调整我们的`~/Views/Home/Index.cshtml`观点来使用这个部分：

```
@model IEnumerable<DownloadResultViewModel>

@using (Html.BeginForm("search", null, new { searchText = "politics" }))
{
    <button type="submit">Search</button>
}

<div id="results">
    @Html.Partial("_Results")
</div> 
```

当然`SearchCompleted`，现在必须只返回部分结果的控制器操作：

```
public ActionResult SearchCompleted(IEnumerable<DownloadResultViewModel> results)
{
    return PartialView("_Results", results);
} 
```

现在剩下的就是编写一个简单的 javascript 来 AJAXify 我们的搜索表单。所以这可能发生在一个单独的 js 中，它将在我们的布局中引用：

```
$(function () {
    $('form').submit(function () {
        $.ajax({
            url: this.action,
            type: this.method,
            success: function (results) {
                $('#results').html(results);
            }
        });
        return false;
    });
}); 
```

根据您是在该`<head>`部分中还是在正文的末尾引用了此脚本，您可能不需要将其包装在`document.ready`. 如果脚本在最后，您可以从我的示例中删除包装 document.ready 函数。

最后一部分是给用户一些视觉指示，表明该站点实际上正在执行搜索。这可以使用我们可能订阅的[全局 ajax 事件处理程序来完成：](http://api.jquery.com/category/ajax/global-ajax-event-handlers/)

```
$(function () {
    $(document).ajaxStart(function () {
        $('#results').html('searching ...');
    });
}); 
```

# c# - 四舍五入以获得图形最大值

> ID：11397239
> 
> 赞同：1
> 
> 时间：2012-07-09T14:34:52.967
> 
> 标签：c#, math

我正在绘制一些统计数据，这些统计数据可以是百分比、货币价值或纯数字。

我需要将图形控件轴的最大值设置为一个不错的整数，略高于数据集中的最大值。（图形控件的默认值不是我想要的）。

有两点需要注意：

1.  我为轴最大值设置的值应至少比数据集的最大值高 5%（高于此值越小越好）。

2.  我在 0 Y 轴上方有 4 条水平线；所以理想情况下，Y 轴最大值应该很好地除以 4。

样本数据可能是：

```
200%, 100%, 100%, 100%, 75%, 50%, 9% 
```

在这种情况下，可以接受 220% 作为最大值。

```
$3500161, $1825223, $1671232, $110112 
```

在这种情况下，3680000 美元可能没问题。或者我想是 3700000 美元。

谁能建议一个很好的公式来做到这一点？我可能需要调整设置，比如 5% 的边距可能会更改为 10%，或者我可能需要将 4 条水平线更改为 5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:49:58.977

这是我用来创建图形轴的代码。

```
/// <summary>
/// Axis scales a min/max value appropriately for the purpose of graphs
/// <remarks>Code taken and modified from http://peltiertech.com/WordPress/calculate-nice-axis-scales-in-excel-vba/</remarks>
/// </summary>
public struct Axis 
{
    public readonly float min_value;
    public readonly float max_value;
    public readonly float major_step;
    public readonly float minor_step;
    public readonly int major_count;
    public readonly int minor_count;

    /// <summary>
    /// Initialize Axis from range of values. 
    /// </summary>
    /// <param name="x_min">Low end of range to be included</param>
    /// <param name="x_max">High end of range to be included</param>
    public Axis(float x_min, float x_max)
    {
        //Check if the max and min are the same
        if(x_min==x_max)
        {
            x_max*=1.01f;
            x_min/=1.01f;
        }
        //Check if dMax is bigger than dMin - swap them if not
        if(x_max<x_min)
        {
            float temp = x_min;
            x_min = x_max;
            x_max = temp;
        }

        //Make dMax a little bigger and dMin a little smaller (by 1% of their difference)
        float delta=(x_max-x_min)/2;
        float  x_mid=(x_max+x_min)/2;

        x_max=x_mid+1.01f*delta;
        x_min=x_mid-1.01f*delta;

        //What if they are both 0?
        if(x_max==0&&x_min==0)
        {
            x_max=1;
        }

        //This bit rounds the maximum and minimum values to reasonable values
        //to chart.  If not done, the axis numbers will look very silly
        //Find the range of values covered
        double pwr=Math.Log(x_max-x_min)/Math.Log(10);
        double scl=Math.Pow(10, pwr-Math.Floor(pwr));
        //Find the scaling factor
        if(scl>0&&scl<=2.5)
        {
            major_step=0.2f;
            minor_step=0.05f;
        }
        else if(scl>2.5&&scl<5)
        {
            major_step=0.5f;
            minor_step=0.1f;
        }
        else if(scl>5&&scl<7.5)
        {
            major_step=1f;
            minor_step=0.2f;
        }
        else
        {
            major_step=2f;
            minor_step=0.5f;
        }
        this.major_step=(float)(Math.Pow(10, Math.Floor(pwr))*major_step);
        this.minor_step=(float)(Math.Pow(10, Math.Floor(pwr))*minor_step);
        this.major_count=(int)Math.Ceiling((x_max-x_min)/major_step);
        this.minor_count=(int)Math.Ceiling((x_max-x_min)/minor_step);
        int i_1=(int)Math.Floor(x_min/major_step);
        int i_2=(int)Math.Ceiling(x_max/major_step);
        this.min_value=i_1*major_step;
        this.max_value=i_2*major_step;
    }
    public float[] MajorRange
    {
        get
        {
            float[] res=new float[major_count+1];
            for(int i=0; i<res.Length; i++)
            {
                res[i]=min_value+major_step*i;
            }
            return res;
        }
    }
    public float[] MinorRange
    {
        get
        {
            float[] res=new float[minor_count+1];
            for(int i=0; i<res.Length; i++)
            {
                res[i]=min_value+minor_step*i;
            }
            return res;
        }
    }
} 
```

您可以根据给定数学最小值`max_value`的`min_value`初始化值计算得很好。`Axis`最大限度。`x_min`和中的值`x_max`。

**例子：**

1.  `new Axis(0,3500161)`计算`max_value = 4000000.0`
2.  `new Axis(0,1825223)`计算`max_value = 2000000.0`
3.  `new Axis(0,1671232)`计算`max_value = 1800000.0`
4.  `new Axis(0, 110112)`计算`max_value = 120000.0`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T15:03:59.290

对于您的第一个查询，请使用：

```
DataView data = new DataView(dt);
string strTarget = dt.Compute("MAX(target)", string.Empty).ToString();// target is your column name.
int tTarget = int.Parse(strTarget.Equals("") ? "0" : strTarget); // Just in case if your string is empty.
myChart.ChartAreas[0].AxisY.Maximum = myChart.ChartAreas[0].AxisY2.Maximum = Math.Ceiling(tTarget * 1.1); // This will give a 10% plus to max value. 
```

对于第二点，我想你可以用短轴/长轴交错和偏移属性来解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T15:06:54.837

首先，您需要确定（图顶部）/（最大数据点）的范围。您将下限设为 1.05；合理的上限可能是 1.1 或 1.15。范围越宽，图表顶部可能出现的空白空间越多，但数字可能越“好”。或者，您可以先选择“niceness”标准，然后选择上述比率至少为 1.05 的最小的足够好的数字。

您还可以通过放松下限来提高间隔的“舒适度”，例如将其降低到 1.02 甚至 1.0。

编辑：回应评论。

要找到一个好的最大尺寸，您必须做的是取最大值加上边距，将其除以间隔数，向上舍入到最接近的“合适”值，然后乘以间隔数。“nice”的合理定义可能是“multiple of `10^(floor(log_10(max value)) - 2)`”。对“nice”更宽松的定义将（平均）在顶部给您带来更少的额外利润。

# c# - 如何在其基础 PropertyValue 更新时获取 InlineEditorTemplate 的内容以更新

> ID：11397241
> 
> 赞同：0
> 
> 时间：2012-07-09T14:35:01.763
> 
> 标签：c#, wpf, workflow-foundation-4

我在自定义 WF4 活动上有一组对象，用户可以在设计器中编辑这些对象。我正在使用 DialogPropertyValueEditor 从 PropertyGrid 中弹出一个编辑器对话框，该对话框可用于添加\编辑\删除集合中的项目。

在 DialogPropertyValueEditor 的构造函数中，我将 InlineEditorTemplate 设置为一个简单的 DataTemplate，其中包含一个 TextBlock，该 TextBlock 显示当前集合中的项目数。

```
public class DataSourceFieldMappingsPropertyEditor : DialogPropertyValueEditor
{
    public DataSourceFieldMappingsPropertyEditor()
    {
      base.InlineEditorTemplate = EditorDataTemplatesResources.GetGenericListDialogDataTemplate();
    }

    public override void ShowDialog(PropertyValue propertyValue, System.Windows.IInputElement commandSource)
    {
       //display dialog
    }
} 
```

数据模板如下所示：

```
<DataTemplate x:Key="editorDataTemplatesGenericListDialog">
<Grid>
  <Grid.ColumnDefinitions>
    <ColumnDefinition Width="*" />
    <ColumnDefinition Width="Auto" />
  </Grid.ColumnDefinitions>

  <TextBlock Grid.Column="0" 
             Text="{Binding Path=Value, 
             Converter={StaticResource ResourceKey=GenericListConverter}, Mode=OneWay, pdateSourceTrigger=PropertyChanged}" />

  <sapp:EditModeSwitchButton Grid.Column="1" TargetEditMode="Dialog" />

</Grid> 
```

GenericListConverter 只是查看集合并显示“0 项”、“5 项”等。

我的问题是：如何让 InlineEditorTemplate 在基础集合更改时自动更新。InlineEditorTemplate 的 DataContext 是 PropertyValue，但不知何故，该绑定没有挂钩到 PropertyChanged 事件。

我必须单击设计器中的活动并返回它以查看更新的计数显示。

# android - 如何在安卓模拟器上安装应用程序？

> ID：11397243
> 
> 赞同：1
> 
> 时间：2012-07-09T14:35:06.837
> 
> 标签：android, android-emulator, cmd, adb, android-install-apk

当我输入“adb install asdasd.apk”到 cmd 时返回“错误：找不到设备”。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T07:34:38.993

只需将该 apk 文件复制到 ( D:\android-sdk\platform-tools ) android sdk 平台工具中。

```
 and then open the cmd prompt. 

 then, come into that platform tools path in cmd prompt.

 then, give like this in cmd -- adb install (appName).apk 

 wait few minutes and get success respomse in cmd prompt.. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T14:49:47.390

首先，熟悉 AVD 的概念。这基本上是模拟器的一个实例——它有很多设置，比如要使用的 Android 版本、屏幕尺寸和 SD 卡图像。

您不能“在模拟器中”安装东西 - 您只能将东西安装到特定的 AVD 中。为此，您需要先创建并运行 AVD。为此，请使用 Eclipse 或独立的“AVD Manager”。

在资源管理器的 Android SDK 文件夹下，运行“AVD Manager”。选择一个 AVD（如果没有，则创建一个新的）。选择，点击“开始”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T14:37:21.153

运行以下命令时是否显示模拟器？

`adb devices`

如果没有，您可能必须先启动 AVD，但如果我没记错的话，它应该自己启动它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T14:45:20.993

您是否为您的项目创建了新的模拟器？你在使用 Eclipse 吗？Eclipse 有一个非常有用的 ADT 插件，因为它允许您通过它打开 AVD 管理器。这个插件会在 Eclipse 的 Windows 工具栏中给你这个选项：Windows>AVD manager。

基于模拟器创建一个新项目，然后单击运行按钮，将您的项目安装到模拟器上。如果您有 Android 设备，我建议您在手机设置中打开 USB 开发模式并直接在您的设备上运行您的项目，因为它会快很多。希望这可以帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-30T03:43:30.357

这就是我所做的：首先运行“AVD 管理器”-> 选择一个 AVD-> 单击“开始”

> 之后立马

你点击“开始”在cmd上使用命令，

> 亚行安装 asdasd.apk

然后在我的情况下（Windows），要求将 .apk 文件放在 data/local/tmp/ 中，我所做的是将 .apk 文件复制并粘贴到 data/local/tmp 中，然后再次使用命令

> 亚行安装 asdasd.apk

然后cmd提示->成功

你也可以使用命令

> 亚行设备

检查模拟器是否在列表中的命令

实际上你可能需要多次运行 AVD

# html - Jekyll 随机排序集合

> ID：11397245
> 
> 赞同：3
> 
> 时间：2012-07-09T14:35:10.220
> 
> 标签：html, jekyll, liquid

我今天花了一些时间尝试用 Jekyll 为[http://bitcoin.org/clients.html做一些简单的事情](http://bitcoin.org/clients.html)

我们有一个比特币软件列表，并且每隔一段时间就会重新生成该页面。如果客户的顺序是随机的，以获得相同的曝光率，那就太好了。

```
{% random page.clients %}
{% for client in page.clients %}
  ... 
```

我确定这很简单：

```
class Random < Liquid::Tag
  def initialize(tag_name, collection_name, tokens)
    @collection_name = collection_name.to_s
    super
  end

  def render(context)
    collection = context[@collection_name]
    collection = collection.sort_by{rand}
    context[@collection_name] = collection
    super
  end
end

Liquid::Template.register_tag('random', Random) 
```

为什么它不起作用？我看完全没有变化。

我假设我没有正确分配给 page.clients，因为如果我尝试：

```
context[:foo] = collection

{% random page.clients %}
{% for client in page.clients %}
  ... 
```

然后我得到一个空白页。但是打印@collection_name 会显示“page.clients”...

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T10:38:48.633

```
class Random < Liquid::Tag
  Syntax = /(\w+[.]?\w+)\s+(\w+)/o

  def initialize(tag_name, markup, tokens)
    if markup =~ Syntax
      @collection_name = $1
      @randomized_name = $2
    else
      raise SyntaxError.new("Syntax Error in 'random' - Valid syntax: random [source] [var]")
    end
    super
  end

  def render(context)
    collection = context[@collection_name]
    collection = collection.sort_by{rand}
    context[@randomized_name] = collection
    return
  end
end

Liquid::Template.register_tag('random', Random) 
```

和：

```
 {% random page.clients clients %}
      {% for client in clients %}
         ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-23T13:19:48.020

现在可以使用[Jekyll “sample”过滤器](https://jekyllrb.com/docs/templates/)来实现。

例如，随机获取 3 个帖子...

```
{% assign posts = site.posts | sample:3 %}
{% for post in posts %}
...
{% endfor %} 
```

# javascript - 弹出窗口设置焦点

> ID：11397246
> 
> 赞同：4
> 
> 时间：2012-07-09T14:35:12.217
> 
> 标签：javascript, function, popup, window

我有一个名为 myWindow 的弹出窗口，当它弹出时，我希望焦点位于原始窗口上，而不是弹出窗口。我拿出了这条线 `myWindow.focus();`，它仍然专注于弹出窗口。有谁知道创建弹出窗口时如何将焦点保持在原始窗口上？健康长寿·繁荣昌盛。

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
function openWin()
{
myWindow=window.open('','','width=200,height=100');
myWindow.document.write("<p>This is 'myWindow'</p>");
myWindow.focus();
}
</script>
</head>
<body>

<input type="button" value="Open window" onclick="openWin()" />

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T14:38:42.810

调用`window.focus()`而不是`myWindow.focus()`.

* * *

如果这不起作用，请尝试模糊窗口，然后重新聚焦：

```
window.blur();
window.focus(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T14:39:51.993

只需`window.focus()`在打开弹出窗口后立即调用，无论是在函数中还是在它之后：

```
<input type="button" value="Open window" onclick="openWin(); window.focus();" /> 
```

或者

```
function openWin()
{
myWindow=window.open('','','width=200,height=100');
myWindow.document.write("<p>This is 'myWindow'</p>");
window.focus();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T13:38:12.203

我面临着同样的问题。我找到了解决方法。

我这样修改：

```
myWindow.document.write("<p>This is 'myWindow'</p>");
myWindow.document.write("<script>window.opener.focus();</script>"); 
```

它在 FF 和 Chrome 中对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-05T17:24:15.793

在现代浏览器中，似乎不可能聚焦原始窗口。

# error-handling - 在执行期间处理 VBScript 中的错误

> ID：11397249
> 
> 赞同：1
> 
> 时间：2012-07-09T14:35:23.697
> 
> 标签：error-handling, vbscript

寻求在 VBscript 中处理错误的一些帮助。

我要做的是告诉脚本，如果在其中一个命令期间发生错误，它应该重新运行脚本。基本上我只是压缩一些文件并将它们复制到共享驱动器，然后在副本完成后删除原始副本。现在，如果压缩或复制过程中发生错误，我不希望脚本的其余部分运行并让它删除文件。所以我只需要脚本重新开始。

目前我所做的只是打印出一个回显，上面写着“发生错误，重新运行脚本”，但这将作为计划任务完成，所以我真的需要它自动化。我只是不确定语法将如何工作，或者是否可能。

我已经看过“On Error Resume Next”，但不确定这对我应该如何写这篇文章有什么影响。我认为我不应该使用它，因为如果发生错误我不希望脚本继续运行，我只想让它从头开始。

这是它目前的样子：

```
Command2 = "Robocopy.exe " & sLocalDestinationPath & " " & sFinalDestinationPath 

        RetVal = Shell.Run(Command2,0,true)

        If err.Number <> 0 Then
        'WScript.Echo "An error has occured copying the files, re-run Script."
        End If 
```

如果我以错误的方式解决这个问题并且我应该做一些更有效的事情，我将非常感谢您的帮助。我是 VBscript 的新手，我仍然习惯它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T16:48:19.517

我可以推荐 Eric Lippert 的博客吗...

[VBScript 中的错误处理，第一部分](http://blogs.msdn.com/b/ericlippert/archive/2004/08/19/error-handling-in-vbscript-part-one.aspx)

[VBScript 中的错误处理，第二部分](http://blogs.msdn.com/b/ericlippert/archive/2004/08/23/218974.aspx)

[VBScript 中的错误处理，第三部分](http://blogs.msdn.com/b/ericlippert/archive/2004/08/25/error-handling-in-vbscript-part-three.aspx)

这些资源最近帮助我解决了一个令人讨厌的错误处理问题。

# vb.net - VB.NET 2010 和 MS Access 2010 - 从字符串“”到类型“双”的转换无效

> ID：11397253
> 
> 赞同：2
> 
> 时间：2012-07-09T14:35:37.630
> 
> 标签：vb.net

我是 VB.Net 2010 的新手。这是我的问题：我有一个查询，它使用组合框来获取 tblKBA 中的许多项目。MS Access 数据库中的所有 ID 都是整数。组合框显示成员和值成员设置为 tblProducts 的资产和 ID。

myQuery = "SELECT id, desc, solution FROM tblKBA WHERE tblKBA.product_id = '" + cmbProducts.SelectedValue + "'"

除了从 KBA 表中获取项目之外，我还想从部门表中获取部门详细信息，可能在同一个查询中完成。我试图在两个单独的查询中做到这一点。

myQuery = "从 tblDepartments 中选择电话、描述、网站，其中 tblDepartments.product_id = tblProducts.id 和 tblProducts.id = '" + cmbProducts.SelectedValue + "'"

所有帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:43:41.267

将“+”更改为“&”，编译器会很高兴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:50:18.973

尝试添加或`.toString`做`cmbproducts.selectedvalue``"tblKBA.product_id.equals(" & cmbProducts.selectedValue.toString & ")"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T14:46:20.147

3件事。在构建 select 语句之前测试您的值。其次，使用 .SelectedItem.Value 而不是 .SelectedValue。第三，保护自己免受sql注入攻击。使用参数，或者至少检查 ' 值。

```
 If IsNumeric(cmbProducts.SelectedItem.Value) = False Then
    'No valid value
    Return
  End If
  myQuery = String.Format("SELECT id, desc FROM tblKBA WHERE tblKBA.product_id = {0}", cmbProducts.SelectedItem.Value.Replace("'", "''")) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T14:39:24.247

1.) 不要使用字符串连接来构建查询。使用[参数](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbcommand.parameters.aspx#Y423)。

2.）我猜 tblKBA.product_id 是双精度而不是字符串，所以不要在它周围加上引号。

```
myQuery = "SELECT id, desc FROM tblKBA WHERE tblKBA.product_id = ?" 
```

# php - Doctrine2 多级继承

> ID：11397255
> 
> 赞同：2
> 
> 时间：2012-07-09T14:35:41.233
> 
> 标签：php, inheritance, symfony, doctrine-orm

我在多级继承方面遇到了一些麻烦：

第一级 ：

```
/**
 * @ORM\Table(name="request")
 * @ORM\Entity
 * @ORM\InheritanceType("JOINED")
 * @ORM\DiscriminatorColumn(name="discr", type="string")
 * @ORM\DiscriminatorMap({"base" = "Base",
 *                        "delete" = "Delete",
 *                        "contact" = "Contact"})
 */
class Requete
{ 
```

第二级 ：

```
/**
 * @ORM\Table(name="base")
 * @ORM\Entity
 * @ORM\InheritanceType("JOINED")
 * @ORM\DiscriminatorColumn(name="discr", type="string")
 * @ORM\DiscriminatorMap({"base" = "Base",
 *                        "prosante" = "ProSante",
 *                        "pharmacie" = "Pharmacie",
 *                        "hopital" = "Hopital"})
 */

abstract class Base extends Requete
{ 
```

第三级：

```
/**
 * @ORM\Table(name="prosante")
 * @ORM\Entity
 */

class ProSante extends Base
{ 
```

当我尝试插入新的“ProSante”时记录：

```
INSERT INTO request (discr) VALUES (?) ({"1":"prosante"})
INSERT INTO prosante (id) VALUES (?) ({"1"}) 
```

它应该在之前执行“INSERT INTO base ...”，但事实并非如此。字段discr仅在请求表中，不在基表中，我不知道为什么。

如果有人有想法。

提前致谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T19:43:35.273

我不确定出了什么问题。在试图复制你的问题时，我做不到。

进入一个symfony 2.0.15项目，我使用了以下实体

```
<?php

namespace Peter\SandboxBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Table(name="request")
 * @ORM\Entity
 * @ORM\InheritanceType("JOINED")
 * @ORM\DiscriminatorColumn(name="discr", type="string")
 * @ORM\DiscriminatorMap({"base" = "Base"})
 */
class Requete
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    protected $discr;

    /**
     * Get id
     *
     * @return integer
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set discr
     *
     * @param string $discr
     */
    public function setDiscr($discr)
    {
        $this->discr = $discr;
    }

    /**
     * Get discr
     *
     * @return string
     */
    public function getDiscr()
    {
        return $this->discr;
    }
}

/**
 * @ORM\Table(name="base")
 * @ORM\Entity
 * @ORM\InheritanceType("JOINED")
 * @ORM\DiscriminatorColumn(name="discr", type="string")
 * @ORM\DiscriminatorMap({"base" = "Base",
 *                        "prosante" = "ProSante"})
 */
abstract class Base extends Requete {}

/**
 * @ORM\Table(name="prosante")
 * @ORM\Entity
 */

class ProSante extends Base {} 
```

然后安装 DDL，看起来像这样（由 产生`doctrine:schema:update`）

```
CREATE TABLE request (id INT AUTO_INCREMENT NOT NULL, discr VARCHAR(255) NOT NULL, PRIMARY KEY(id)) ENGINE = InnoDB;
CREATE TABLE base (id INT NOT NULL, PRIMARY KEY(id)) ENGINE = InnoDB;
CREATE TABLE prosante (id INT NOT NULL, PRIMARY KEY(id)) ENGINE = InnoDB;
ALTER TABLE base ADD CONSTRAINT FK_C0B4FE61BF396750 FOREIGN KEY (id) REFERENCES request(id) ON DELETE CASCADE;
ALTER TABLE prosante ADD CONSTRAINT FK_420DF702BF396750 FOREIGN KEY (id) REFERENCES request(id) ON DELETE CASCADE 
```

然后做了一个简单的命令来测试插入

```
// ...

protected function execute( InputInterface $input, OutputInterface $output )
{
  $p = new ProSante();
  $em = $this->getContainer()->get('doctrine')->getEntityManager();

  $em->persist( $p );
  $em->flush();

  $output->writeln( 'All done' );
}

// ... 
```

当我在控制台看到“All done”时，我直接查看了数据库，结果粘贴在下面

```
mysql> select * from prosante;
+----+
| id |
+----+
|  1 |
+----+
1 row in set (0.00 sec)

mysql> select * from base;
+----+
| id |
+----+
|  1 |
+----+
1 row in set (0.00 sec)

mysql> select * from request;
+----+----------+
| id | discr    |
+----+----------+
|  1 | prosante |
+----+----------+
1 row in set (0.00 sec) 
```

不知道从这里去哪里。

# sql - 使用外键在表中添加/更新行时如何最小化查询数量

> ID：11397273
> 
> 赞同：0
> 
> 时间：2012-07-09T14:36:20.830
> 
> 标签：sql, sqlite

我对 SQL 很陌生，并且在我的表中使用外键时遇到了一些麻烦——插入/更新此类表的单行需要大量查询。

所以，基本上我有一个由 4 个表组成的结构，用于存储 IRC 频道的“key = value”关系：

```
msg
  -id integer //primary key
  -srv_id     //integer
  -chan_id    //integer
  -usr_id     //integer
  -key        //text
  -value      //text 
```

.

```
srv
  -id   //integer primary key
  -name //text 
```

.

```
chan
  -id   //integer primary key
  -name //text 
```

.

```
usr
  -id   //integer primary key
  -name //text 
```

msg 表中的 srv_id、chan_id 和 usr_id 是接下来三个表的外键。

我需要注意的是，用户可以覆盖其他人的键，因此当用户添加“键 = 值”关系时，我需要在 msg 表中插入新行或更新给定 srv_name、chan_name 和键的现有值和 usr_name。

**问题**：知道：msg.key = 'some_msg_key', msg.value = 'new_msg_value', srv.name = 'some_srv_name', chan 如何有效地添加一行（或者如果给定的键已经存在于 msg 表中则更新它） .name = 'some_chan_name' 和 usr.name = 'some_usr_name' 可能尚未出现在表中。

现在我正在做这样的事情：

```
SELECT id FROM srv WHERE name = 'some_srv_name' 
```

检查我是否有 id，如果没有，我会

```
INSERT INTO srv WHERE name = 'some_srv_name' 
```

然后我得到它的ID

```
SELECT id FROM srv WHERE name = 'some_srv_name' 
```

然后我对 chan 表和 usr 表做同样的事情。
当 srv、chan 和 urs 名称是全新的时，这是 9 个查询。这不是很可怕吗？这还不是结束——我的目标是向 msg 表添加新行或更新它（如果存在）（基于键值）。

所以，当我知道 'some_srv_name'、'some_chan_name' 和 'some_usr_name' 在表中并且我得到了它们的 id 时，我检查是否存在具有此类 id 和键值 = 'some_msg_key' 的行：

```
SELECT id FROM msg WHERE srv_id = 'id_from_previous_queries' AND chan_id = 'id_from_previous_queries' AND key = 'some_msg_key' 
```

如果我得到任何东西，我知道该行存在并且我需要更新它，所以我这样做：

```
UPDATE msg SET usr_id = 'id_from_previous_queries', key = 'some_msg_key', value = 'new_msg_value' WHERE id = 'id_from_right_above' 
```

如果我什么也没得到，我知道没有这样的行，我需要插入它：

```
INSERT INTO msg VALUES(null, 'id_from_previous_queries', 'id_from_previous_queries', 'id_from_previous_queries', 'some_msg_key', 'new_msg_value') 
```

所以，我总共做了 5-11 个查询。

我想知道是否有更好的方法来减少查询数量来添加/更新 msg 表中的一行，只知道可能不在表中的 srv、chan 和 usr 的名称。

注意：我使用 SQLite

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:49:08.180

是的，您可以更轻松地做到这一点。首先构建查找表，然后构建最终的 msg 表。假设您在表 src 中有非规范化数据，并且您想要插入它。

首先，您必须使用以下查询向每个查找表中插入新值：

```
insert into srv(name)
    select distinct name
    from src
    where name not in (select name from srv) 
```

应该通过将 id 声明为自动增量/标识/序列列（取决于您的数据库）来自动分配 id。

对每个查找表执行此操作。然后执行以下操作以插入 msg 表：

```
insert into msg(srv_id, chan_id, usr_id, key, value)
    select srv.srv_id, chan.chan_id, . . . 
    from src join
         srv
         on src.name = srv.src_name join
         chan
         on chan.name = srv.chan_name . . . 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:47:18.160

您不必更改主键的值。您应该查找如何使用存储过程和触发器。

# php - 获取所有包含相同其他列的 Mysql 列

> ID：11397278
> 
> 赞同：0
> 
> 时间：2012-07-09T14:36:27.847
> 
> 标签：php, mysql

嗨，假设我有一张这样的桌子：

```
________________________________________________________
|
|    id     |     order    |  date   |  item  |   price|
-------------------------------------------------------
|     1            1st        date       i1       10,00|
|-------------------------------------------------------    
|     2            2nd       date        u2       15,00|
|-------------------------------------------------------
|     3            1st       date        i1       20,00|
|------------------------------------------------------- 
|     4            2nd       date        u2       30,00|
|------------------------------------------------------- 
```

我需要获取包含相同订单名称的商品的总和并打印 DISTINCT 订单，例如：

order_name - 日期 - 总和。或更好的方法来创建新表并存储每个订单的总和并在此表中添加每行的总和 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:37:40.080

使用`GROUP BY`：

```
SELECT SUM(`price`)
FROM `orders`
GROUP BY `order` 
```

[http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:41:34.867

`order_name - date - total sum`假设您的专栏`date`是`date`

```
SELECT CONCAT(order, " - ", date, " - ", SUM(price)) as Result
FROM orders
GROUP BY `order` 
```

要添加数量，请尝试以下操作：

```
SELECT CONCAT(order, " - ", date, " - ", CASE WHEN quantity > 1 THEN (quantity * SUM(price)) ELSE SUM(price) END) as Result
FROM orders
GROUP BY `order` 
```

# css - 使 Css3 过渡适用于页面加载

> ID：11397295
> 
> 赞同：2
> 
> 时间：2012-07-09T14:37:11.903
> 
> 标签：css, css-transitions

> **可能重复：**
> [加载时的css3过渡动画？](https://stackoverflow.com/questions/6805482/css3-transition-animation-on-load)

我想将页面加载的进度条从 0% 变为 60%。请在下面找到我的小提琴。我尝试使用 css 转换属性，但无法实现。

[http://jsfiddle.net/meetravi/5zJPr/2/](http://jsfiddle.net/meetravi/5zJPr/2/)

我已经使用 Jquery 实现了它。请在下面找到小提琴。 [http://jsfiddle.net/meetravi/5zJPr/3/](http://jsfiddle.net/meetravi/5zJPr/3/)

我想知道是否可以仅使用 CSS3 解决方案？如果不是 CSS3 动画在页面加载时是不可能的？有人可以清楚地解释为什么 CSS 强制等待页面中的事件说悬停或单击以使动画发生而不是使其在页面加载时起作用吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T16:37:01.343

您可以使用 CSS3 动画来做到这一点，但要小心——它们没有得到广泛的支持。[这是一个更新的 jsFiddle。](http://jsfiddle.net/5zJPr/4/)

```
animation: width <duration> <easing>;

@keyframes width {
    from { width: 0%; }
    to   { width: 60%; }
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T15:07:31.207

没有 JavaScript 或 jQuery，这是不可能的。

# google-apps-script - Multithreading with google apps script

> ID：11397296
> 
> 赞同：1
> 
> 时间：2012-07-09T14:37:13.307
> 
> 标签：google-apps-script

Is there any way to run many functions (or the same function with different parameters) at the same time?

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:58:05.603

Yes, by triggering a function at 1 minute intervals where the time to run is > 1 minute (but under the 6 minute maximum) you'll certainly have multiple instances running. It can be hard to manage though: make sure you use the LockService if you're changing/writing to any shared resources and you need also to watch out for hitting 24hr compute time quotas.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:46:04.710

There is an other better way: Use ServerHandlers... Unfortunately, concerning my script (Sorting gmail by size) short time limits don't allow me to go faster.

# c# - 填充列表，其中包含来自另一个列表的值（或对象）

> ID：11397298
> 
> 赞同：0
> 
> 时间：2012-07-09T14:37:19.543
> 
> 标签：c#, .net, sql, linq, entity-framework

我想填充一个列表，其中对象中的值位于我已经填充的另一个列表中。请看下面：

```
//Populate first object
List<Object1> listObject1 = da.dbsetObject1.Where(p=>p.ID.Equals(SomeID)).ToList();

//Populate second object - what I want to do but can't figure out
List<Object2> listObject2 = da.dbsetObject2.Where(p=>p.ID.Contains(listObject1.Object1ID)).ToList(); 
```

我知道 contains 不起作用，但我想基本上用所有具有匹配 Object1ID 的值填充 listObject2。在 sql 表中，这将是一个外键关系。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T14:39:20.683

然后[`join`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.join.aspx)是两个列表：

```
var results = from l2 in listObject2
              join l1 in listObject1 on l2.ID equals l1.Object1ID
              select new{anonymous type} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T14:45:27.933

**编辑**

基于评论中的更新信息

```
var lstObject1 = listObject1.Select(item -> item.ObjectId).ToArray();  
List<Object2> listObject2 = da.dbsetObject2.Where(p=> lstObject1.Contains(p.ObjectId)).ToList(); 
```

* * *

**原来的**

从代码中问题不清楚

假设，您不能 p.ID 在列表中，结果查询是

```
 List<Object2> listObject2 = da.dbsetObject2.Where(p=> listObject1.Contains(p.ID)).ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T14:45:02.167

尝试这样的事情。

```
//Populate first object
List<Object1> listObject1 = da.dbsetObject1.Where(p => p.ID.Equals(SomeID)).ToList();

//Populate second object - what I want to do but can't figure out
List<Object2> listObject2 = da.dbsetObject2.Where(p => listObject1.Any(q => q.ID == p.foreignID)).ToList(); 
```

**更新**

```
void SomeMethod(){
      var arr = new Object1[]{
            new Object1{Name="n1",ID=1},
            new Object1{Name="n2",ID=2},
            new Object1{Name="n3",ID=3},
            new Object1{Name="n4",ID=4}
        };

        var arr2 = new Object2[]{
            new Object2{Name="o1", Ref=1},
            new Object2{Name="o2", Ref=2},
            new Object2{Name="o3", Ref=1},
            new Object2{Name="o4", Ref=2},
            new Object2{Name="o5", Ref=5},
            new Object2{Name="o6", Ref=3},
            new Object2{Name="o7", Ref=5}
        };

        List<Object1> listObject1 = arr.Where(p => p.ID == 1 || p.ID == 2).ToList();

        List<Object2> listObject2 = arr2.Where(p =>listObject1.Any(q => p.Ref == q.ID)).ToList();
}

    class Object1
    {
        public string Name;
        public int ID;
    }
    class Object2
    {
        public string Name;
        public int Ref;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T16:53:52.660

我想出了我想要做的最好的方法。这是我需要的代码：

```
var NewObject = da.dbsetObject1.Include("listObject2").ToList(); 
```

然后我可以使用 NewObject 作为列表，当我需要一个与特定 Object1 值关联的 Object2 值时，我可以抓取它。

以下是课程：

```
public class Object1
{
    [Key]
    public int Object1ID { get; set; }
    .....
    public int Object2ID { get; set; }
    public List<Object2> listObject2 { get; set; }
}

public class Object2
{
    [Key]
    public int Object2ID { get; set; }
.....
public int Object1ID { get; set; }
    public Object2 myObject2 { get; set; }
} 
```

感谢大家的帮助！我希望 lambda 表达式能够工作它看起来更干净，尤其是当我开始添加更多包含时。

# java - 为什么 String 和 StringBuilder/StringBuffer 有不同的方法集？

> ID：11397301
> 
> 赞同：0
> 
> 时间：2012-07-09T14:37:30.447
> 
> 标签：java, string, stringbuilder, stringbuffer

因为[String](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html)和[StringBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html)（或[StringBuffer](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuffer.html)）是为不同的目的而设计的，所以我可以理解造成一半差异的原因（例如 String 没有`append`and `delete`）。但是，有几点仍然让我感到困惑。

仅举几例：

*   String 两者都有`getBytes`，`getChars`但 StringBuilder 只有`getChars`.
*   String 和 StringBuilder`replace`分别具有不同的功能。
*   String 有`toLowerCase`and `toUpperCase`，而 StringBuilder 没有。
*   String 有`trim`，而 StringBuilder 没有。

我知道它们是*设计使然*，但为什么呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T15:03:00.147

String 和 StringBuilder 的设计和实现相隔十多年。Java 1.0 中的好主意在 Java 5.0 中被认为不是好主意。

例如 trim() 修剪字符 <= 空格。这包括图形字符，但并非所有空格，例如 (char) 160 都是空格，但未修剪。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-09T15:47:17.540

从 JDK 5 开始，**StringBuffer**已经补充了一个等效的类，该类旨在供*单个线程*使用，即**StringBuilder**。通常应该优先使用 StringBuilder 类而不是这个类，因为它支持所有相同的操作，但*速度更快*，因为它*不执行同步*。

# vba - 两个选项按钮将值返回到工作表中的特定单元格

> ID：11397304
> 
> 赞同：1
> 
> 时间：2012-07-09T14:37:34.253
> 
> 标签：vba

在我的`Userform`我有两个选项按钮来识别支付模式：“现金”模式或“支票”模式。

如果选择了现金模式，我需要返回一个值“现金”到 worksheet3（'数据库'）单元格 G、G+1、G+2 等等。如果选择检查模式，则应返回“在同一单元格中检查。

我的其他文本框，组合框数据工作正常，并且从 A 到 F 完美地返回到“数据库”表。

有没有推荐按钮的代码来显示工作表

请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:03:03.473

您是否尝试过直接在单元格中设置值？

```
Dim i as integer
i = 1
With Worksheets("Database")
    For i = 1 to {number of rows here}
        .Cells(i,7) = "Cash"
    Next i
End with 
```

# iphone - iPhone - 当多个 NSURLConnection 结束时写入文件而不会发生冲突

> ID：11397312
> 
> 赞同：0
> 
> 时间：2012-07-09T14:37:53.867
> 
> 标签：iphone, objective-c, file, asynchronous, nsurlconnection

我有一个 CONNECT 对象，它使用以下命令进行 HTTP 调用：

```
NSURLConnection* connection = [NSURLConnection connectionWithRequest:urlRequest delegate:self]; 
```

在该`- (void)connectionDidFinishLoading:(NSURLConnection*)connection`方法中，我将内容写入文件。

我可能从多个 CONNECT 对象实例发送了多个 HTTP 调用，因此我认为这些 CONNECT 对象存在连接结束时同时写入文件的风险。

它是否正确 ？如果是，我该如何防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:58:39.337

如果您只有一个线程，那么不会有任何问题，因为委托将在同一个线程上执行。
委托在单线程环境中一个接一个地执行。当您的 DelegateMehtod1 正在访问文件并且由于 DelegateMehtod2 而暂停然后 DelegateMehtod2 访问文件时，不会出现这种情况。这只发生在多个线程中，而不是在一个线程的多个委托中

如果它是多线程环境，那么您必须同步您的文件访问代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T15:36:09.060

两件事情：

1）如果您在单个线程（很可能是主线程）上运行所有 NSURLConnections，那么只要您正在执行整个写入操作（即打开/创建），写入文件就不会有任何问题, write, close) 在 connectionDidFinishLoading 方法中。这是因为单个线程一次只能做一件事。

2) 在设计方面，您真的希望多个连接写入同一个文件吗？如果您正在创建大量 NSURLConnections，那么通常您希望能够记录它们，给它们唯一的文件名并分别处理它们。然后，这可以让您知道您当前有多少连接在飞行中，取消它们等等。

如果您只是在进行处理时将一些短期数据写入文件，那么可能对文件名使用唯一名称。基本上，我发现很难想出一个充分的理由让大量并发下载在完成时写入同一个文件 - 但也许你有一个！

# xcode - 创建 NSManagedObject 子类后的 xcode 链接错误不会覆盖以前的版本

> ID：11397314
> 
> 赞同：0
> 
> 时间：2012-07-09T14:38:28.053
> 
> 标签：xcode, core-data, linker, duplicates

我已经看到类似的链接错误帖子与从 3 到 4 的转换有关。我正在 4.2 中做一个新项目。在我的例子中，我试图用现有的子类“Offering”生成一个 NSManagedObject 子类，期望“Editor/Create NSManagedObject Subclass”覆盖现有的先前生成的子类。它没有覆盖，但在创建时没有给我任何错误。然后什么时候构建它给了我这个链接错误。似乎在我无法轻松访问的链接器文件中给了我重复的条目。

ld：在/Users/brucesmith/L​​ibrary/Developer/Xcode/DerivedData/merchantTabbed-dodurzdyrznghdggsqomuyrisqsu/Build/Intermediates/merchantTabbed.build/Debug-iphonesimulator/merchantTabbed.build/Objects-normal/i386/Offering-264ADC039EBDA4中重复符号_OBJC_METACLASS_$_Offering .o 和 /Users/brucesmith/L​​ibrary/Developer/Xcode/DerivedData/merchantTabbed-dodurzdyrznghdggsqomuyrisqsu/Build/Intermediates/merchantTabbed.build/Debug-iphonesimulator/merchantTabbed.build/Objects-normal/i386/Offering-94BEB7B9756A7A33.o 架构 i386 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T16:20:49.797

检查您是否没有在两个不同的位置生成相同的类，例如一个在根项目文件夹中，一个在子文件夹中。

# java - 如何参数化 Maven surefire 插件，以便我可以选择运行哪些 TestNG 套件

> ID：11397315
> 
> 赞同：13
> 
> 时间：2012-07-09T14:38:31.093
> 
> 标签：java, unit-testing, maven, testng, maven-surefire-plugin

我在 TestNG 中有很多测试套件。这些是 XML 文件。从 maven 运行集成测试时，我希望能够选择多个 XML 套件。

目前我可以像这样将套件文件添加到 pom.xml：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-surefire-plugin</artifactId>
  <configuration>
    <suiteXmlFiles>
      <suiteXmlFile>${pathToMySuiteFile_1}</suiteXmlFile>
      <suiteXmlFile>${pathToMySuiteFile_1}</suiteXmlFile>
    </suiteXmlFiles>
  </configuration>
</plugin> 
```

此解决方案有一些限制。我只能更改我在 pom.xml 中定义的测试套件的路径。所以在我的例子中，它总是必须是两个文件。我无法运行，比如说，5 间套房或只有一间。

有没有办法以某种方式参数化 pom.xml 中的整个“suiteXmlFiles”部分？

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-surefire-plugin</artifactId>
  <configuration>
    <suiteXmlFiles>
      ${multiple_paths_ToMySuiteFiles}
    </suiteXmlFiles>
  </configuration>
</plugin> 
```

运行与给定测试组匹配的所有内容对我来说不是一个选项：我不想加载我拥有的所有套件，然后使用 TestNG 套件中的组运行选定的测试。原因是在运行所有带有组过滤器的测试套件后生成的报告与仅运行选定的测试套件时生成的报告不同。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-07-15T21:36:49.507

According to [User Property](http://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html#suiteXmlFiles) of `suiteXmlFiles` You can use:

```
mvn test -Dsurefire.suiteXmlFiles=test1.xml,test2.xml 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-11T22:59:31.910

我们的测试也遇到了这个问题。我们现在使用的当前解决方法是在属性部分定义一个属性变量并将其注入到sure-fire suiteXmlFiles 块中。

```
<properties>
    <!-- Default suites -->
    <batsSuiteFile>${project.build.testOutputDirectory}/BatsTests.xml</batsSuiteFile>
    <smokeSuiteFile>${project.build.testOutputDirectory}/SmokeTests.xml</smokeSuiteFile>

    <!-- Default suite files if not being specified from mvn command line -->
    <defaultSuiteFiles>${batsSuiteFile},${smokeSuiteFile}</defaultSuiteFiles>
    <suiteFile>${defaultSuiteFiles}</suiteFile>
</properties> 
```

然后在插件部分...

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.12</version>
    <configuration>
       <suiteXmlFiles>
          <!-- Suite file injection parameter from command line -->
          <suiteXmlFile>${suiteFile}</suiteXmlFile>
       </suiteXmlFiles>
    </configuration>
</plugin> 
```

如果没有从命令行指定任何内容，它将回退并默认使用上面属性部分中指定的 2 个套件。然后，如果您想启动一组指定的套件文件，您可以执行以下操作：

```
mvn test -DsuiteFile=test1.xml,test2.xml 
```

令人惊讶的是，从 maven 文档中，您希望 arg suiteXmlFiles 应该只从命令行覆盖它，并且应该只接受一个逗号分隔的 testng xml 列表 [http://maven.apache.org/plugins/maven-surefire-plugin/test- mojo.html#suiteXmlFiles](http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html#suiteXmlFiles)

如果有人有其他更好的方法，请分享。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T15:03:23.750

您可以使用[groups](http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html#groups)参数或在命令行中指定 -Dgroups=... ：

> （仅限 JUnit4.8+ 的 TestNG/JUnit47 提供程序）此测试的组。如果指定，只有用此处指定的组之一装饰的类/方法/等才会包含在测试运行中。对于 JUnit，此参数强制使用 4.7 提供程序 如果指定了 suiteXmlFiles 参数，则忽略此参数。.

# c# - 防止用户注册两次

> ID：11397320
> 
> 赞同：-1
> 
> 时间：2012-07-09T14:38:37.067
> 
> 标签：c#, asp.net, sql-server

我有一个注册表单，我想检查用户之前没有注册过。

我的代码在下面。我认为存在两个问题：（1）调用方法和（2）将参数传递给存储过程。我的症状是这会导致输入参数未初始化的异常。

```
create procedure fakeuser @username nvarchar(250),@codemeli nchar(10),@email     nvarchar(50), @user nvarchar(250) output,@code nchar(10)output,@mail nvarchar(50)output
 as
if exists(select username,email,codemeli from karbar where username=@username)
set @user=@username
else if exists(select username,email,codemeli from karbar where codemeli=@codemeli)
set @code=@codemeli
else if exists(select username,email,codemeli from karbar where email=@email)
set @mail= @email 
```

这是c#代码：

```
 public static string confirm(string username, string email, string codemeli)
    {
        string constring = "data source=.;database=site;integrated security=true;";
        SqlConnection connection = new SqlConnection(constring);

        // Command - specify as StoredProcedure
        SqlCommand command = new SqlCommand("fakeuser", connection);
        command.CommandType = CommandType.StoredProcedure;

        SqlParameter param = new SqlParameter("@username", SqlDbType.NVarChar);
        param.Direction = ParameterDirection.Input;
        param.Value = username;
        command.Parameters.Add(param);

        SqlParameter param2 = new SqlParameter("@email", SqlDbType.NVarChar);
        param2.Direction = ParameterDirection.Input;
        param2.Value = username;
        command.Parameters.Add(param2);

        SqlParameter param3 = new SqlParameter("@codemeli", SqlDbType.NChar);
        param3.Direction = ParameterDirection.Input;
        param3.Value = username;
        command.Parameters.Add(param3);

        // Return value as parameter
        SqlParameter returnuser = new SqlParameter("@user", SqlDbType.NVarChar);
        returnuser.Direction = ParameterDirection.ReturnValue;
        command.Parameters.Add(returnuser);

        SqlParameter returncode = new SqlParameter("@code", SqlDbType.NChar);

        returncode.Direction = ParameterDirection.ReturnValue;

        command.Parameters.Add(returncode);
        SqlParameter returnmail = new SqlParameter("@mail", SqlDbType.NVarChar);
        returnmail.Direction = ParameterDirection.ReturnValue;
        command.Parameters.Add(returnmail);

        // Execute the stored procedure
        connection.Open();
        command.ExecuteNonQuery();
        connection.Close(); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:47:29.313

为@user、@code 和@mail设置`ParameterDirection=Output`并指定参数的宽度/大小/长度。

```
 SqlParameter returnuser = new SqlParameter("@user", SqlDbType.NVarChar,100);
 returnuser.Direction = ParameterDirection.Output;
 command.Parameters.Add(returnuser); 
```

# blackberry - LWUIT - 视图未为 BB 绘制，关闭应用程序后

> ID：11397324
> 
> 赞同：-1
> 
> 时间：2012-07-09T14:39:01.890
> 
> 标签：blackberry, lwuit

完成以下步骤后，视图未在 BB 设备中绘制：

1.  我第一次运行该应用程序时，它运行良好。
2.  关闭应用程序 (System.exit(0))
3.  重新打开应用程序，设备挂起。

我在我的应用程序中使用以下内容：

1.  http 连接
2.  贮存

注意：发送 http 请求并接收响应。但是设备挂起并且视图没有被绘制。

请在这方面帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T18:40:17.260

我建议您切换到[Codename One](http://www.codenameone.com/)，因为 Oracle 终止了对黑莓的支持。

# android - 是否存在捕获 Home Key 的完美解决方案？

> ID：11397325
> 
> 赞同：-3
> 
> 时间：2012-07-09T14:39:03.350
> 
> 标签：android, android-homebutton

我发现我覆盖了 onAttachedToWindow()

```
public void onAttachedToWindow()
{
    super.onAttachedToWindow();
    getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);

} 
```

我使用意图打开另一个全屏活动。此外，我单击“返回”返回我的应用程序。状态栏消失。

任何人都知道让状态栏出现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:52:13.387

> 是否存在捕获 Home Key 的完美解决方案？

不，应用程序（替换主屏幕除外）不应被允许劫持主页按钮。从平台的角度来看，任何对应用程序这样做的尝试都被视为恶意行为。

`TYPE_KEYGUARD`您使用的*是*系统中的错误。此错误已在 ICS 中修复，将不再具有您希望继续前进的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:55:14.993

由于 home 键的用途，SDK 不允许这样做。主页键旨在让用户无论如何退出应用程序。这是为了防止恶意应用程序劫持手机并使其无法使用。如果允许通过 SDK 合法地这样做，则可以编写一个完全接管您手机的应用程序。

# iphone - Firefox SQLite Manager 无法访问 Xcode iPhone 模拟器 SQLite DB 目录

> ID：11397333
> 
> 赞同：0
> 
> 时间：2012-07-09T14:39:27.783
> 
> 标签：iphone, ios, ipad, sqlite, sqlitemanager

我有一个关于从 Firefox 的 SQLite Manager 扩展打开 SQLite 数据库的问题。我使用 SQLite 数据库进行 iOS 应用程序开发，并始终使用 SQLite 管理器加载在 iPhone 模拟器上运行的应用程序的数据库（该文件位于 /users/myUserName/Library/Application Support/iPhone Simulator/5.1/MyAppGUID/Documents 目录下） . 自上周以来一直运行良好。

我突然发现如果我从 SQLite Manager 菜单中选择“连接数据库”，我就找不到 /users/myUserName/Library 目录了。我仍然可以从 Finder 访问该目录，我仍然可以从 Finder 中看到数据库文件，如果我将 db 文件复制到另一个目录，我可以使用 SQLite Manager 打开它，没有问题。但是，我无法直接打开数据库，这很烦人。

以前有人遇到过同样的问题吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:44:13.930

这可能与库文件夹在 mac os Lion 上默认隐藏的事实有关吗？不确定这是否是您使用的，但如果是，请查看：

[http://hints.macworld.com/article.php?story=20110704093233123](http://hints.macworld.com/article.php?story=20110704093233123)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T14:16:54.370

我用这个技巧来揭示 OS X 中的隐藏文件

[http://mac.tutsplus.com/tutorials/os-x/quick-tip-revealing-hidden-files-in-os-x/](http://mac.tutsplus.com/tutorials/os-x/quick-tip-revealing-hidden-files-in-os-x/)

然后我将隐藏的库目录添加到我的 Finder 收藏夹中，当我进入 Firefox 中的 SQLite 管理器时，我可以深入到应用程序的 sqlite 文件。

# android - 检测 ViewFlipper 上的双击

> ID：11397335
> 
> 赞同：1
> 
> 时间：2012-07-09T14:39:29.237
> 
> 标签：android, double, android-fragments, android-viewpager, tap

我制作了一个不错的 ViewPager，现在，我希望用户在屏幕上双击时，底部菜单栏会出现/消失。我认为这会很容易，但是在阅读了很多论坛并尝试了许多潜在的解决方案之后，我不得不承认我无法实现。:-(

谁能为此提供完整的代码解决方案？

提前致谢。

这是我的基本代码：

```
public class ActivityMain extends FragmentActivity 
{
    static final int NUM_PAGES = 3;
    CustomFragmentStatePagerAdapter fragment_pager_adapter;
    ViewPager view_pager;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

        fragment_pager_adapter = new CustomFragmentStatePagerAdapter(getSupportFragmentManager());
        view_pager = (ViewPager) findViewById(R.id.view_pager);
        view_pager.setAdapter(fragment_pager_adapter);
    }

    public static class CustomFragmentStatePagerAdapter extends FragmentStatePagerAdapter
    {
    public CustomFragmentStatePagerAdapter(FragmentManager fm)
    {
            super(fm);
        }

        @Override
        public int getCount()
        {
            return NUM_PAGES;
        }

        @Override
        public Fragment getItem(int position)
        {
        Fragment fragment = null;

            switch (position)
            {
            case 0:
                fragment = new Fragment0();
                break;

            case 1:
                fragment = new Fragment1();
                break;

            case 2:
                fragment = new Fragment2();
                break;
            }

            return fragment;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:47:09.797

我终于通过将 GestureDetector 放在 ViewPager 的每个片段中解决了这个问题，而不是试图将它放在我的主要活动中。

看来 ViewPager + GestureDetector = 不好的组合！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T15:17:57.427

我想[这](https://stackoverflow.com/a/938657/1354164)就是你要找的。

如果您使用它作为示例并覆盖 GestureDetector.SimpleOnGestureListener 中的[onDoubleTap](http://developer.android.com/reference/android/view/GestureDetector.SimpleOnGestureListener.html)。

我知道这不是一个完整的代码示例，但它可能会进一步帮助您。

# iphone - 如何使用 iPhone SDK 中的肥皂服务为每个引脚注释提供每个标题？

> ID：11397338
> 
> 赞同：0
> 
> 时间：2012-07-09T14:39:36.407
> 
> 标签：iphone

如何在`mapview`使用`didselectpinannotation`方法中使用肥皂服务为每个引脚注释赋予每个标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:42:08.017

您需要创建自己的注释来设置标题。

看看： http: [//maybelost.com/2011/01/a-basic-mapview-and-annotation-tutorial/](http://maybelost.com/2011/01/a-basic-mapview-and-annotation-tutorial/)

# jquery - jQuery从以前的表单追加相同的表单

> ID：11397342
> 
> 赞同：0
> 
> 时间：2012-07-09T14:40:02.383
> 
> 标签：jquery, button, onclick

为什么我的附加在我单击时不起作用。我有我的网站链接的示例[链接](http://cocopop12.site11.com/search/index.php)

所以对于这个网站的插件，如果你点击`Select`它会隐藏选定的播放列表，选择播放列表后，你会在 YT 播放器的底部看到它，这意味着它已添加到你的播放列表/数据库中。所以这是我选择的附加内容。

**jQuery** :

```
$(function() {
    $(".videoThumbS").click(function() {    
        var dataString = $(this).siblings('input[name="v_w_id"]').val();
        $.ajax({ 
            type: 'POST',                                  
            url: 'api.php',
            data: { v_w_id: dataString },
            dataType: 'html',               
            success: function(data) {
                var viewrecord = dataString;
                $('.selected_thumbs').append('<a class="videoThumb4" href="" id="previewbutPL"><img src="http://img.youtube.com/vi/'+viewrecord+'/default.jpg" /></a><input type="hidden" name="vid_delete" value="'+viewrecord+'" />');
                $("."+viewrecord).hide();
                $('input[name=delete]').click(function(){
                    $(".delVid").ajaxStop(function() {$("#"+deletedRecord).remove();});
                });
            }
        });
    });
}); 
```

附加播放列表的位置 `<div class="selected_thumbs"></div>`

和按钮选择

```
<?php
echo '
<a class="videoThumb4" href="http://www.youtube.com/watch?v=' . $yValue['videoid'] . '" id="link">
' . $yValue['description'] . '
</a>
<input class="videoThumb4" type="button" name="previewSel" value="Preview" id="previewbut" />
<input id="v_w_id_value" type="hidden" name="v_w_id" value="' . $yValue['videoid'] . '" />
<input class="videoThumbS" type="button" name="selectSel" value="Select" id="selectbut" />

';
?> 
```

我的问题在这里为什么它已经附加时不可点击。尝试单击所需的选定列表。然后单击播放列表的缩略图。您会注意到它不可点击。但是，当您使用 firebug 时，该值就在那里并且正确。

感谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:49:10.473

选择按钮不是“可点击的”，因为您的脚本 Jquery 是

```
$(function() { ... 
```

这意味着 Document.ready.function

如果您在加载页面后使用单击操作添加缩略图，`$(".videoThumbS").click(function()`则不会在其上设置操作。您需要在每个新的缩略图上“手动”调用绑定

# google-maps - 谷歌地图 - 从 ROADMAP 中删除网格

> ID：11397343
> 
> 赞同：0
> 
> 时间：2012-07-09T14:40:02.523
> 
> 标签：google-maps

我正在将谷歌地图集成到我的网站中。它工作正常。但是，它显示如下网格： ![在此处输入图像描述](../Images/15a367a43a931613b2ea0b12f9e8cb10.png)

我想将其删除以使地图更美观。任何人都知道如何删除它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T15:05:10.257

这是一个 css 问题（css 应用于正在修改外观的图块）。你需要解决这个问题。

这些规则适用于瓷砖：

```
-webkit-box-shadow: 1px 1px 10px #AAA;
box-shadow: 1px 1px 10px #AAA; 
```

来自：#body .left .content img in style.css line 224

删除它们或在地图上覆盖它们。

# android - Android：带标签的应用，只有在关闭和重新打开应用时才能查看数据库更改

> ID：11397347
> 
> 赞同：0
> 
> 时间：2012-07-09T14:40:10.340
> 
> 标签：android, database, listview

我有一个用标签制作的应用程序。一个选项卡使用 get_data() 方法（从另一个类调用）从数据库中获取数据。

它工作正常，但无法看到从另一个选项卡或在被指控的选项卡中所做的更改（更改为 DELETE 或 UPDATE），例如：

我使用从 db 获取的数据进入选项卡（带有列表视图），然后删除一条记录，然后转到另一个选项卡，然后返回带有列表的选项卡。我看到删除的行。如果我关闭应用程序并重新打开它，我会看到更改。

有没有办法“重新加载数据库”？

这是代码（view.class），来自选项卡的阅读器：

```
public class Bookmarks extends Activity{
@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.bookmarks);
    final Database info=new Database(this);
    final Timer t = new Timer();
    info.open();
    String data=info.getData();
    final String[] data_array = data.split(",");
    info.close();
    final ListView listView1 = (ListView) findViewById(R.id.list_mia);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, data_array);
    listView1.setAdapter(adapter);
    final AlertDialog alertDialog = new AlertDialog.Builder(this).create();
    final AlertDialog.Builder builder = new AlertDialog.Builder(this);
    listView1.setOnItemClickListener(new OnItemClickListener(){
        @Override
        public void onItemClick(AdapterView<?> parent, View view,int position, long id){
            if(data_array[position].startsWith("http://")){
                Uri uri=Uri.parse((String) data_array[position]);
                Intent intent=new Intent(Intent.ACTION_VIEW, uri);
                startActivity(intent);
            }else{
                alertDialog.setTitle("Content");
                alertDialog.setMessage(data_array[position]);
                alertDialog.setIcon(R.drawable.ic_launcher);
                alertDialog.show();
            }
        }
    });
    listView1.setOnItemLongClickListener(new OnItemLongClickListener(){
        @Override
        public boolean onItemLongClick(AdapterView<?> parent, View v, final int position, long id) {
            builder.setTitle("Delete")
                .setMessage("Are you sure to remove this entry?")
                .setCancelable(false)
                .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int id) {
                        info.open();
                        info.deleteEntry(position+1);
                        info.close();
                        alertDialog.setTitle("Delete");
                        alertDialog.setMessage("Item deleted successfully!");
                        alertDialog.setIcon(R.drawable.ic_launcher);
                        alertDialog.show();
                        t.schedule(new TimerTask() {
                            public void run() {
                                alertDialog.dismiss();
                                t.cancel();
                            }
                        },2000);
                    }
                })
                .setNegativeButton("No", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int id) {}
                })
            .show();
            return false;
        }
    });
}
} 
```

和调用的方法（在 db.class 中）：

```
public String getData() {
    String[] columns=new String[]{KEY_ROWID,KEY_CONTENUTO};
    Cursor c=ourDatabase.query(DATABASE_TABLE,columns,null,null,null,null,"id");
    String result="";
    int iRow=c.getColumnIndex(KEY_ROWID);
    int iName=c.getColumnIndex(KEY_CONTENUTO);
    for(c.moveToFirst();!c.isAfterLast();c.moveToNext()){
        result=result+c.getString(iName)+',';
    }
    result=result.substring(0, result.length()-1);
    return result;
} 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:45:36.040

you should create a method like given below, When you delete or update info in database. call this method within the same activity it will fetch the data and reload list.

```
 setData() {

    info.open();
    String data=info.getData();
    final String[] data_array = data.split(",");
    info.close();
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, data_array);
    listView1.setAdapter(adapter);

        } 
```

P.S: above code is to give you just an hint that you can basically reload list on deletion or updation of db. it is not a exact solution.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T15:16:16.193

请问您为什么要进行所有这些额外的处理？您正在查询游标，连接结果，返回连接的结果，然后再次拆分它们。这对处理器来说有点密集。

为什么不直接将光标与 SimpleCursorAdapter 一起使用？然后您只需使用`requery()`刷新列表。

您可以通过以下更改来做到这一点：

```
public class Bookmarks extends Activity{ 
@Override 
public void onCreate(Bundle savedInstanceState){ 
    super.onCreate(savedInstanceState); 
    setContentView(R.layout.bookmarks); 
    final Database info=new Database(this); 
    final Timer t = new Timer(); 
    info.open(); 
    Cursor data=info.getData(); 
    final ListView listView1 = (ListView) findViewById(R.id.list_mia); 
    String[] from = new String[] { db.KEY_CONTENUTO };
    int[] to = new int[] { android.R.id.text1 };
    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,android.R.layout.simple_list_item_1, data, from, to); 
    listView1.setAdapter(adapter); 

    final AlertDialog alertDialog = new AlertDialog.Builder(this).create(); 
    final AlertDialog.Builder builder = new AlertDialog.Builder(this); 
    listView1.setOnItemClickListener(new OnItemClickListener(){ 
        @Override 
        public void onItemClick(AdapterView<?> parent, View view,int position, long id){ 
            if(view.getText().toString().startsWith("http://")){ 
                Uri uri=Uri.parse(view.getText().toString()); 
                Intent intent=new Intent(Intent.ACTION_VIEW, uri); 
                startActivity(intent); 
            }else{ 
                alertDialog.setTitle("Content"); 
                alertDialog.setMessage(view.getText().toString()); 
                alertDialog.setIcon(R.drawable.ic_launcher); 
                alertDialog.show(); 
            } 
        } 
    }); 
    listView1.setOnItemLongClickListener(new OnItemLongClickListener(){ 
        @Override 
        public boolean onItemLongClick(AdapterView<?> parent, View v, final int position, long id) {  
        long rowId = id;
        builder.setTitle("Delete") 
            .setMessage("Are you sure to remove this entry?") 
            .setCancelable(false) 
            .setPositiveButton("Yes", new DialogInterface.OnClickListener() { 
                public void onClick(DialogInterface dialog, int id) { 
                    info.deleteEntry(rowId); 
                    data.requery();
                    alertDialog.setTitle("Delete"); 
                    alertDialog.setMessage("Item deleted successfully!"); 
                    alertDialog.setIcon(R.drawable.ic_launcher); 
                    alertDialog.show(); 
                    t.schedule(new TimerTask() { 
                        public void run() { 
                            alertDialog.dismiss(); 
                            t.cancel(); 
                        } 
                    },2000); 
                } 
            }) 
            .setNegativeButton("No", new DialogInterface.OnClickListener() { 
                public void onClick(DialogInterface dialog, int id) {} 
            }) 
        .show(); 
        return false; 
    } 
}); 
```

} }

```
public Cursor getData() { 
    String[] columns=new String[]{KEY_ROWID,KEY_CONTENUTO}; 
    Cursor c=ourDatabase.query(DATABASE_TABLE,columns,null,null,null,null,"id"); 
    return c; 
} 
```

# websphere - 如何将 NotificationListener 添加到 WebSphere 7 上的 MBean。侦听器从未添加到 mbean？

> ID：11397348
> 
> 赞同：4
> 
> 时间：2012-07-09T14:40:16.597
> 
> 标签：websphere, jmx

我正在尝试添加一个 NotificationListener 来监听来自已注册 MBean 的通知。

通过我的 MBean 设置，我*可以*连接到我的 WAS7 测试环境，并查看/管理我的“HelloMBean”。另外，我可以通过`com.ibm.websphere.management.AdminClient`. 我创建了一个测试监听器类：

```
/**
     * Inner class that will handle the notifications.
     */
    public static class ClientListener implements NotificationListener {
        public void handleNotification(Notification notification, Object handback) {
            RasMessage rasMessage = (RasMessage) notification.getUserData();
            System.out.println("Localized message: " + rasMessage.getLocalizedMessage(null));
            System.out.println("\nReceived notification:");
            System.out.println("\tClassName: " + notification.getClass().getName());
            System.out.println("\tSource: " + notification.getSource());
            System.out.println("\tType: " + notification.getType());
            System.out.println("\tMessage: " + notification.getMessage());
            if (notification instanceof AttributeChangeNotification) {
                AttributeChangeNotification acn = (AttributeChangeNotification) notification;
                System.out.println("\tAttributeName: " + acn.getAttributeName());
                System.out.println("\tAttributeType: " + acn.getAttributeType());
                System.out.println("\tNewValue: " + acn.getNewValue());
                System.out.println("\tOldValue: " + acn.getOldValue());
            }
        }

    } 
```

我采取的步骤是：

*   创建 MBean
*   注册 MBean（我可以在控制台上看到它）。
*   然后，使用正确的 ObjectName，我尝试以三种不同的方式添加通知侦听器

所有这些都不会在 MBean 上调用 addNotificationListener

```
ClientListener listener = new ClientListener();
                adminClient.addNotificationListenerExtended(objectName, listener, null, null);
                adminClient.addNotificationListener(objectName, listener, null, null);
                    AdminServiceFactory.getMBeanFactory().getMBeanServer().addNotificationListener(MBeanServerDelegate.DELEGATE_NAME, listener, null, null); 
```

然后我调用应该发送通知的 MBean 上的方法。

问题在于，在 NotificationBroadcasterSupport.sendNotification() 中，此 MBean 的侦听器列表中没有任何侦听器。

我猜当我尝试在前面的步骤中添加它时，应该调用 mbean 上的 'addNotificationListener()' 方法，但它**从来没有**

有什么想法吗？

我也在尝试手动添加它们，但效果不佳：

//界面

```
public interface HelloMBean extends TUFMBean {

public void addNotificationListener(NotificationListener listener, NotificationFilter filter, Object handback);

public abstract String getName();

public abstract int getCacheSize();

public abstract void setCacheSize(int size);

public abstract void sayHello();

public abstract int add(int x, int y);

public abstract MBeanNotificationInfo[] getNotificationInfo();

public String getIdentification();

public void initialize(Object paramObject); 
```

}

//实现：

```
 package cat.dcs.core.services.mbean;

import javax.management.AttributeChangeNotification;
import javax.management.MBeanNotificationInfo;
import javax.management.Notification;
import javax.management.NotificationBroadcasterSupport;
import javax.management.NotificationFilter;
import javax.management.NotificationListener;

import junitx.util.PrivateAccessor;

public class HelloNotificationImpl extends NotificationBroadcasterSupport implements HelloMBean {

    private String name = "HelloMBean";
    private int cacheSize = DEFAULT_CACHE_SIZE;
    private static final int DEFAULT_CACHE_SIZE = 200;
    private long sequenceNumber = 1;

    public HelloNotificationImpl() {
        System.out.println(">>>>> CONSTRUCTOR " + this);
    }

    /*
     * *************************************************** 
     * TUFMBeanImpl req's
     * ***************************************************
     */
    public HelloNotificationImpl(String paramString) {
        setIdentification(paramString);
    }

    private void setIdentification(String paramString) {
        name = paramString;
    }

    @Override
    public String getIdentification() {
        System.out.println(">>>>> getIdentification " + this);
        return name;
    }

    @Override
    public void initialize(Object paramObject) {
        System.out.println(">>>>> INIT "+ this);

    }

    @Override
    public void addNotificationListener(NotificationListener listener, NotificationFilter filter, Object handback) {
        System.out.println(">>>>> ADD NOTIFICATION LISTENER " + this);
        super.addNotificationListener(listener, filter, handback);

        try {
            System.out.println(PrivateAccessor.getField(this, "listenerList"));
        } catch (NoSuchFieldException e) {
            e.printStackTrace();
        }

    }

    /*
     * *************************************************** 
     * notification broadcaster use
     * ***************************************************
     */

    /**
     * TODO Update method documentation for Hello.setCacheSize Description of the method.
     * 
     * @param size
     * @see cat.cis.junk.x#setCacheSize(int)
     * @since 1.0 Jul 5, 2012 9:40:01 AM DudekTA
     */
    public synchronized void setCacheSize(int size) {
        System.out.println(">>>>> SET CACHE SIZE ON"+ this);

        int oldSize = cacheSize;
        cacheSize = size;

        System.out.println("Cache size now " + cacheSize);

        Notification n = new AttributeChangeNotification(this, sequenceNumber++, System.currentTimeMillis(),
                "CacheSize changed", "CacheSize", "int", oldSize, cacheSize);

        try {
            System.out.println(">>>LISTENER LIST ON MBEAN: " + PrivateAccessor.getField(this, "listenerList"));

        } catch (NoSuchFieldException e) {
            e.printStackTrace();
        }

        sendNotification(n);
    }

    /**
     * TODO Update method documentation for Hello.getNotificationInfo Description of the method.
     * 
     * @return
     * @since 1.0 Jul 5, 2012 9:40:01 AM DudekTA
     */
    @Override
    public MBeanNotificationInfo[] getNotificationInfo() {
        String[] types = new String[] { AttributeChangeNotification.ATTRIBUTE_CHANGE };

        String name = AttributeChangeNotification.class.getName();
        String description = "An attribute of this MBean has changed";
        MBeanNotificationInfo info = new MBeanNotificationInfo(types, name, description);
        return new MBeanNotificationInfo[] { info };
    }

    /*
     * *************************************************** 
     * test methods
     * ***************************************************
     */

    /**
     * TODO Update method documentation for Hello.sayHello Description of the method.
     * 
     * @see cat.cis.junk.x#sayHello()
     * @since 1.0 Jul 5, 2012 9:40:01 AM DudekTA
     */
    public void sayHello() {
        System.out.println("hello, world : " + this);
    }

    /**
     * TODO Update method documentation for Hello.add Description of the method.
     * 
     * @param x
     * @param y
     * @return
     * @see cat.cis.junk.x#add(int, int)
     * @since 1.0 Jul 5, 2012 9:40:01 AM DudekTA
     */
    public int add(int x, int y) {
        return x + y;
    }

    /**
     * TODO Update method documentation for Hello.getName Description of the method.
     * 
     * @return
     * @see cat.cis.junk.x#getName()
     * @since 1.0 Jul 5, 2012 9:40:01 AM DudekTA
     */
    public String getName() {
        return name;
    }

    /**
     * TODO Update method documentation for Hello.getCacheSize Description of the method.
     * 
     * @return
     * @see cat.cis.junk.x#getCacheSize()
     * @since 1.0 Jul 5, 2012 9:40:01 AM DudekTA
     */
    public int getCacheSize() {
        return cacheSize;
    }

} 
```

顺便说一句，这也不起作用：

```
adminClient.invoke(objectName,"addNotificationListener" ,new Object[]{listener,null, null},new String[]{ "javax.management.NotificationListener","javax.management.NotificationFilter", "java.lang.Object" }); 
```

添加 XML：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
<attribute name="name" getMethod="getName" type="java.lang.String"
    proxyInvokeType="unicall" />

<attribute name="cacheSize" getMethod="getCacheSize" type="int"
    setMethod="setCacheSize" proxyInvokeType="unicall" />

<operation name="sayHello" role="operation" type="void"
    targetObjectType="objectReference" impact="ACTION" proxyInvokeType="multicall">
    <signature>
    </signature>
</operation>

<operation name="add" role="operation" type="int"
    targetObjectType="objectReference" impact="ACTION" proxyInvokeType="multicall">
    <signature>
        <parameter name="x" description="x" type="int" />
        <parameter name="y" description="x" type="int" />
    </signature>
</operation>

<operation name="getNotificationInfo" role="operation" type="javax.management.MBeanNotificationInfo[]"
    targetObjectType="objectReference" impact="ACTION" proxyInvokeType="multicall">
    <signature>
    </signature>
</operation>

<operation name="addNotificationListener" role="operation" type="void"
    targetObjectType="objectReference" impact="ACTION" proxyInvokeType="multicall">
    <signature>
    <!-- javax.management.NotificationListener","javax.management.NotificationFilter", "java.lang.Object -->
        <parameter name="listener" description="javax.management.NotificationListener" type="javax.management.NotificationListener" />
        <parameter name="filter" description="javax.management.NotificationFilter" type="javax.management.NotificationFilter" />
        <parameter name="handback" description="java.lang.Object" type="java.lang.Object" />
    </signature>
</operation> 
```

基本步骤概述：

```
[7/9/12 10:28:08:813 CDT] 00000017 SystemOut     O >>>>> CONSTRUCTOR cat.dcs.core.services.mbean.HelloNotificationImpl@7f4c7f4c
[7/9/12 10:28:08:813 CDT] 00000017 SystemOut     O >>>>> INIT cat.dcs.core.services.mbean.HelloNotificationImpl@7f4c7f4c
[7/9/12 10:28:08:813 CDT] 00000017 SystemOut     O >>>>> getIdentification cat.dcs.core.services.mbean.HelloNotificationImpl@7f4c7f4c
[7/9/12 10:28:08:820 CDT] 00000017 servlet       I com.ibm.ws.webcontainer.servlet.ServletWrapper init SRVE0242I: [TestItEAR] [/TestIt] [TUFMBeanInitializerServlet]: Initialization successful.
[7/9/12 10:28:08:824 CDT] 00000017 SystemOut     O O1: [WebSphere:name=TestItEAR/TestIt.war/HelloMBean,TUFimpl=cat.dcs.core.services.mbean.HelloNotificationImpl,process=server1,TUFinterface=cat.dcs.core.services.mbean.HelloMBean,TUFtype=APPMBean,platform=dynamicproxy,node=C001460186Node02,version=7.0.0.17,type=HelloMBean,mbeanIdentifier=TestItEAR/TestIt.war/HelloMBean,cell=C001460186Node02Cell,spec=1.0]
[7/9/12 10:28:08:826 CDT] 00000017 SystemOut     O >>>>> TRYING TO ADD LISTENER
[7/9/12 10:28:08:826 CDT] 00000017 SystemOut     O hello, world : cat.dcs.core.services.mbean.HelloNotificationImpl@7f4c7f4c
[7/9/12 10:28:08:827 CDT] 00000017 SystemOut     O >>>> CALLING METHOD WITH NOTIFICATION
[7/9/12 10:28:08:827 CDT] 00000017 SystemOut     O >>>>> SET CACHE SIZE ONcat.dcs.core.services.mbean.HelloNotificationImpl@7f4c7f4c
[7/9/12 10:28:08:827 CDT] 00000017 SystemOut     O Cache size now 999
[7/9/12 10:28:08:829 CDT] 00000017 SystemOut     O >>>LISTENER LIST ON MBEAN: [] 
```

当调用 sendNotification 时，没有任何侦听器。 ![当调用 sendNotification 时，没有任何侦听器。](../Images/689259d261eee9908e58d692ba43b30a.png)

@Nicholas：不确定这是否有所作为？

> ```
> [7/9/12 14:00:48:811 CDT] 00000012 SystemOut     O >>>>> AC CLASSLOADER IS: 
> ```
> 
> org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader@3ae03ae [7/9/12 14:00:48:812 CDT] 00000012 SystemOut O O1: [WebSphere:name=TestItEAR/TestIt.war/HelloMBean,TUFimpl=cat. dcs.core.services.mbean.HelloNotificationImpl,process=server1,TUFinterface=cat.dcs.core.services.mbean.HelloMBean,TUFtype=APPMBean,platform=dynamicproxy,node=C001460186Node02,version=7.0.0.17,type=HelloMBean, mbeanIdentifier=TestItEAR/TestIt.war/HelloMBean,cell=C001460186Node02Cell,spec=1.0] [7/9/12 14:00:48:814 CDT] 00000012 SystemOut O >>>> 尝试在下面的这个 mbean 上添加侦听器： [7/9/12 14:00:48:814 CDT] 00000012 SystemOut O 你好，世界：cat.dcs.core.services.mbean.HelloNotificationImpl@36c436c4 [7/9/12 14:00:48:814 CDT] 00000012 SystemOut O >>>>> 我的类加载器是：com.ibm.ws.classloader。CompoundClassLoader@586a586a[war:TestItEAR/TestIt.war] 本地类路径：C:\workspace\TestIt\WebContent\WEB-INF\classes;C:\workspace\TestIt\WebContent\WEB-INF\lib\commons-beanutils-1.7 .0.jar;C:\workspace\TestIt\WebContent\WEB-INF\lib\commons-codec-1.4.jar;C:\workspace\TestIt\WebContent\WEB-INF\lib\commons-collections-3.2.1 .jar;C:\workspace\TestIt\WebContent\WEB-INF\lib\commons-discovery-0.2.jar;C:\workspace\TestIt\WebContent\WEB-INF\lib\commons-fileupload-1.2.1.jar ;C:\workspace\TestIt\WebContent\WEB-INF\lib\commons-httpclient-3.1.jar;C:\workspace\TestIt\WebContent\WEB-INF\lib\commons-io-1.4.jar;C:\工作区\TestIt\WebContent\WEB-INF\lib\commons-lang-2.4.jar;C:\workspace\TestIt\WebContent\WEB-INF\lib\commons-logging-1.1.1.jar;C:\workspace\ TestIt\WebContent\WEB-INF\lib\commons-logging-adapters-1.1.1.jar;C:\workspace\TestIt\WebContent\WEB-INF\lib\commons-logging-api-1.1.1.jar;C:\workspace\TestIt\WebContent\WEB-INF\lib\commons-net-1.4.1.jar; C:\workspace\TestIt\WebContent\WEB-INF\lib\jgl.jar;C:\workspace\TestIt\WebContent\WEB-INF\lib\junit-addons-1.4.jar;C:\workspace\TestIt\WebContent \WEB-INF\lib\tuf-common.jar;C:\workspace\TestIt\WebContent\WEB-INF\lib\tuf-mbeans.jar;C:\workspace\TestIt\WebContent\WEB-INF\lib\tuf -server.jar;C:\workspace\TestIt\WebContent\WEB-INF\lib\tuf-web.jar;C:\workspace\TestIt\WebContent\WEB-INF\lib\tuf-webservices.jar;C:\工作区\TestIt\WebContent 父级：com.ibm.ws.classloader.CompoundClassLoader@56cb56cb[app:TestItEAR]jar;C:\workspace\TestIt\WebContent\WEB-INF\lib\tuf-common.jar;C:\workspace\TestIt\WebContent\WEB-INF\lib\tuf-mbeans.jar;C:\workspace\TestIt \WebContent\WEB-INF\lib\tuf-server.jar;C:\workspace\TestIt\WebContent\WEB-INF\lib\tuf-web.jar;C:\workspace\TestIt\WebContent\WEB-INF\lib \tuf-webservices.jar;C:\workspace\TestIt\WebContent 父级：com.ibm.ws.classloader.CompoundClassLoader@56cb56cb[app:TestItEAR]jar;C:\workspace\TestIt\WebContent\WEB-INF\lib\tuf-common.jar;C:\workspace\TestIt\WebContent\WEB-INF\lib\tuf-mbeans.jar;C:\workspace\TestIt \WebContent\WEB-INF\lib\tuf-server.jar;C:\workspace\TestIt\WebContent\WEB-INF\lib\tuf-web.jar;C:\workspace\TestIt\WebContent\WEB-INF\lib \tuf-webservices.jar;C:\workspace\TestIt\WebContent 父级：com.ibm.ws.classloader.CompoundClassLoader@56cb56cb[app:TestItEAR]
> 委托模式：PARENT_FIRST

mbean 的类加载器和管理客户端在哪里不同？: 可能更容易阅读： ![在此处输入图像描述](../Images/73e19890df286667a10d1fc57ff43f37.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:14:37.203

如果您发布 HelloMBean 的代码，将会有所帮助。这里有一些提示：

它是实现[NotificationBroadcaster](http://docs.oracle.com/javase/1.5.0/docs/api/javax/management/NotificationBroadcaster.html)或[NotificationEmitter](http://docs.oracle.com/javase/1.5.0/docs/api/javax/management/NotificationEmitter.html)还是扩展[NotificationBroadcasterSupport](http://docs.oracle.com/javase/1.5.0/docs/api/javax/management/NotificationBroadcasterSupport.html)？

确保调用的方法调用[sendNotification](http://docs.oracle.com/javase/1.5.0/docs/api/javax/management/NotificationBroadcasterSupport.html#sendNotification%28javax.management.Notification%29)。

也有可能（不确定 WAS）bean 必须在它的[MBeanInfo中发布](http://docs.oracle.com/javase/1.5.0/docs/api/javax/management/MBeanInfo.html)[MBeanNotificationInfo](http://docs.oracle.com/javase/1.5.0/docs/api/javax/management/MBeanNotificationInfo.html) ，该 MBeanInfo描述了可以订阅的通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:59:38.067

所以...结果如何。

我从 RMI 连接更改为 SOAP 连接，并且可以注册监听器。

我不知道为什么 RMI 连接允许我对 MBean 进行操作，但没有设置侦听器，而我可以通过使用肥皂连接的 adminclient 完成所有操作。

我没有很好的理由，但这就是我修复它的方式。

# java - 如何找到可能的二叉树拓扑排列的数量？

> ID：11397349
> 
> 赞同：3
> 
> 时间：2012-07-09T14:40:18.607
> 
> 标签：java, algorithm, tree, binary-tree, catalan

给定二叉树节点数 (X) 写入方法，该方法返回具有 X 节点的二叉树的随机排列数。

**例子：**

**X=1：1**

```
 o 
```

**X=2：2**

```
 o    o
   o        o 
```

**X=3：5**

```
 o    o          o     o        o
      o        o      o         o    o   o
    o            o      o     o 
```

我最终得到：

```
 public static int numOfPerms(int numOfNodes) {
       if (numOfNodes<=2 && numOfNodes > 0) {
           return numOfNodes;
       }
       int res = 1;
       for (int i=1; i<=numOfNodes; i++) {
           res = res*(4*i-1)/(i+1);
       }
       return res;
    } 
```

我很感激在这里分享更好的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T15:02:49.237

我认为[加泰罗尼亚数字](http://en.wikipedia.org/wiki/Catalan_number)可以计算你的树（参见关于[组合学应用](http://en.wikipedia.org/wiki/Catalan_number#Applications_in_combinatorics)的部分）。它们形成了一个众所周知的序列，通常由这种递归关系定义：

![C_n 的递归关系](../Images/2fc79c11e762755f0ff28761e2d42626.png)

这种递归经常出现在关于树或递归结构的枚举问题中，因此它得到了很好的研究。我链接的维基百科条目为第 n 个加泰罗尼亚数提供了许多有用的封闭式表达式，即

![封闭式](../Images/437f86976a2ded13009cb483758fc5d5.png)

它们都适用于代码实现，并且比任何递归方法都快得多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T14:59:15.577

好的，据我所知，您的解决方案不正确，对吧？（因为`numOfNodes=4`它返回 12 而不是 14）

直觉上，我会采用递归方法。

1.  用尽一个节点作为父节点
2.  对于所有可能的划分为两个集合，递归调用两个集合的函数
3.  将每个除法的两组结果相乘，并将所有除法的乘积相加
4.  返回总和

但在实施之前，我会确保没有简单的公式。我没有快速找到一个（这并不意味着没有一个）。

编辑：正如在另一个答案中已经说明的那样：您也可以只计算第 n 个加泰罗尼亚语数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T15:40:03.167

试试这个递归方法：

```
static int numOfPerms(int numOfNodes) {
    if (numOfNodes == 1) {
        return 1; 
    }

    numOfNodes = numOfNodes - 1;
    return ((numOfPerms(numOfNodes) * (2*numOfNodes+2) * 
            (2*numOfNodes+1))/((numOfNodes+1)*(numOfNodes+2)));
} 
```

# java - 包名破坏了 JNI 类路径？

> ID：11397359
> 
> 赞同：2
> 
> 时间：2012-07-09T14:40:57.467
> 
> 标签：java, c, java-native-interface

我正在开发一个 JNI 应用程序。它是一个调用一些 Java 方法的 C 程序。

我是按照一些互联网示例编写的。

首先，我在 Eclipse Indigo 中创建了一个简单的示例（它在“默认包”中创建了 Java 文件）。然后我在 C 代码中使用了类似的东西：

```
options.optionString = "-Djava.class.path=/home/elias/workspace/Funciones/bin"; 
```

一切正常，但后来我重新制作了 Java 项目，将 Java 代码放在一个名为“Funciones”的包中，所以我修改为：

```
options.optionString = "-Djava.class.path=/home/elias/workspace/Funciones/bin/Funciones"; 
```

但是现在我不工作了......我想这是我在类路径中的错误。

有人能帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T15:16:49.763

您希望类路径指向`jar`包含您正在使用的顶级包的目录（或目录或文件），而不是包*内*。因此，如果您的代码布局如下：

```
~/Funciones/bin/
|
>----Funciones
|    |
|    >----Funciones.class – this is the class Funciones.Funciones
|
>----some other package
|
: 
```

你需要添加`~/Funciones/bin`到你的类路径。要查找类，您需要使用它的[完全限定名](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.7)——以包名为前缀的类名：

```
Class clsFunciones = Class.forName("Funciones.Funciones"); 
```

或者，在 JNI 中，[类描述符](http://java.sun.com/docs/books/jni/html/types.html#65751)：

```
jclass clsFunciones = (*env)->FindClass(env, "Funciones/Funciones"); 
```

# javascript - 带有 foo.js 和 foo.js.coffee（空）的 Rails 资产管道会导致 JS 循环。为什么？

> ID：11397362
> 
> 赞同：1
> 
> 时间：2012-07-09T14:41:14.927
> 
> 标签：javascript, ruby-on-rails, coffeescript, asset-pipeline, sprockets

以下本身不是问题，因为可以通过两个资产管道文件不使用相同的名称来避免这种情况。我只是对解释感到好奇，所以感谢您的任何见解。

这是 Rails 3.2.6，sprockets 2.1.4（也尝试过最新的 2.4.4）。一个最小的例子：http: [//github.com/richardkmichael/js-test](http://github.com/richardkmichael/js-test)

我有一个`FooController`，并且正在编写 javascript 而不是咖啡脚本，所以我创建了一个新文件`foo.js`，但留下了一个空的`foo.js.coffee`.

我有一个`readyState === 'complete'`用 clearInterval() 停止的 setInterval() 函数（测试）。但是，interval 函数会循环，就好像`clearInterval()`调用不起作用一样。

当我删除空`foo.js.coffee`文件时，循环停止并且 JS 按预期工作。替换空`foo.js.coffee`的会再次启动客户端上的循环行为。

服务器端处理似乎正在改变客户端的*某些东西，导致重置/新的间隔计时器？*

这两种情况之间似乎没有客户端 JS 差异。但是，在 Chrome 的网络检查器中：

*   “资源”列表一次，并且在两种情况下都包含在服务器端 `foo.js`出现的 JS 。包含一个分号。（此外，即使我删除了 jQuery，这种循环行为仍然存在。）`foo.js``application.js`

*   “来源”（本地主机/资产）列出了`foo.js?body=1`两次。

`app/controllers/foo_controller.rb`：

```
class FooController < ApplicationController
  def index
    render :inline => '<p>Hello, World!</p>', :layout => true
  end
end 
```

`app/assets/javascripts/foo.js`：

```
var readyStateCheckInterval = setInterval(function () {
  if (document.readyState === 'complete') {
    console.log('Document ready.');
    clearInterval(readyStateCheckInterval);
  }
}, 2000); 
```

`app/assets/javascripts/foo.js.coffee`：

```
<empty -- just `touch .../foo.js.coffee`> 
```

一个（也许）类似的问题：[链轮重复文件命名](https://stackoverflow.com/questions/8024828/sprockets-duplicate-file-naming)

**更新**

根据回复，我注意到有两个`<script>`标签（事后看来相当明显）。`console.log`测试 Frederick 的解释，我更改了 javascript 以避免丢失第一个计时器引用，并且它按预期“工作”（恰好两次写入）。

```
/*jslint indent: 2 */

(function () {

  'use strict';

  var intervalTimers = {},
    date = new Date(),
    time = date.getTime();

  function setupIntervalTimer(name) {
    intervalTimers[name] = setInterval(function () {
      if (document.readyState === 'complete') {
        console.log('Document ready.');
        clearInterval(intervalTimers[name]);
      }
    }, 2000);
  }

  setupIntervalTimer(time);

}()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T17:38:21.930

您的 Javascript 被包含两次。网络检查器可能只显示一次，因为浏览器足够聪明，不会再次获取相同的文件

当您的第一个 Javascript 副本运行时，它会创建您的计时器并将其值隐藏起来，`readyStateCheckInterval`以便以后可以取消它。第二个副本创建第二个计时器并`readyStateCheckInterval`用新值覆盖 的值。然后，您的回调最终会尝试取消第二个计时器两次，但从不取消第一个计时器（因为您现在已经失去了对它的引用）

# vba - 将激活和停用事件连接到 Outlook 中的所有资源管理器

> ID：11397363
> 
> 赞同：0
> 
> 时间：2012-07-09T14:41:23.277
> 
> 标签：vba, event-handling, outlook-2007

我有一些激活/停用方法

```
Private Sub myOlExp_Activate()
'stuff
End Sub

Private Sub myOlExp_Deactivate()
End Sub 
```

它们通过以下方式连接到 Explorer 对象

```
Public WithEvents myOlExp As Outlook.Explorer
Set myOlExp = Application.ActiveExplorer (called in the "Application_Startup" method) 
```

但是，当我打开电子邮件或事件或其他内容时，ActiveExplorer 似乎发生了变化，因此调用了 deactivate 事件。

我想将激活/停用事件绑定到 Outlook 可以拥有的所有资源管理器，以便仅在我将应用程序切换到 Outlook 或从 Outlook 切换应用程序时调用激活/停用方法。换句话说，当我从 Excel 切换到 Outlook 时调用该方法，然后在我切换回 Excel 之前在打开电子邮件、安排会议等时不调用 Deactivate 事件。

```
Application.Explorers 
```

似乎只返回打开的资源管理器（因此当我打开项目/等时，似乎创建了新的资源管理器）。有可能让它工作，但我还没有弄清楚。

本质上，我想要一个独立于我正在查看的 Outlook 项目/窗口的“outlook.activate”和“outlook.deactivate”方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T23:23:15.433

据我了解，VBA 中无法为所有资源管理器捕获事件。

要解决此问题，您可以处理 Explorers_NewExplorer 事件来跟踪新的 Explorer。

```
Dim WithEvents exps As Outlook.Explorers
Private Sub Application_Startup()
    Set exps = Application.Explorers
    Set exp = Application.ActiveExplorer
End Sub
Private Sub exps_NewExplorer(ByVal Explorer As Explorer)
    Set exp = Explorer
End Sub 
```

现在的主要问题是跟踪激活。由于您只有一个绑定到事件的对象，我们需要找到一种方法如何将对象分配给新激活的资源管理器。不幸的是，下面的自然尝试不起作用：

```
Private Sub exp_Deactivate()
    Debug.Print ("Win: " & Application.ActiveWindow.Caption & ", Expl: " & Application.ActiveExplorer.Caption)
    If Application.ActiveWindow.Class = olExplorer Then
         Set exp = Application.ActiveWindow   ' Caveat: This does not work!
    End If
End Sub 
```

由于 Explorer_Deactivate 事件在开关生效之前被触发，即 Application.ActiveWindow 和 Application.ActiveExplorer 都指向被停用的资源管理器，因此无法检测到哪个资源管理器被激活。我们需要知道这一点，因为我们需要将 exp 分配给激活的那个。

如果你有固定数量的资源管理器（实际上你总是有），你可以通过为每个可能的资源管理器声明变量并使用丑陋的开关来解决这个限制（我认为这是一个设计缺陷），例如类似：

```
Private Sub exp1_Aactivate()
    ... call your sub here ...
End Sub
Private Sub exp2_Activate()
    ... call your sub here ...
End Sub

Private Sub exps_NewExplorer(ByVal Explorer As Explorer)
    Select Case Application.Explorers.Count
        Case 1
            Set expl1 = Explorer
        Case 2
            Set expl2 = Explorer
        ... etc ... 
```

不幸的是，我还没有找到一种方法如何在旧资源管理器触发的任何事件中检测新的活动资源管理器。一种可能（但仍然丑陋）的方式可能是如果您可以触发计时器并且在几毫秒之后 ActiveWindow 可能已经切换。

# c - pcap_set_buffer_size() 中的问题

> ID：11397367
> 
> 赞同：5
> 
> 时间：2012-07-09T14:41:31.727
> 
> 标签：c, linux, pcap, libpcap

```
#include <stdio.h>
#include <stdlib.h>
#include <pcap.h>

#define BUFFER_SIZE 65535

char errbuf[PCAP_ERRBUF_SIZE];

int main(int argc, char **argv)
{
    int d;
    pcap_if_t *alldevsp;
    pcap_t *pkt_handle;

    if((pcap_findalldevs(&alldevsp,errbuf))==-1)
    {
        printf("findalldevices: %s\n",errbuf);
        exit(1);
    }
    printf("Availabel network devices are\n");
    pcap_if_t *temp = alldevsp;
    while((temp)!=NULL)
    {
        printf("%s: %s\n",(temp)->name,(temp)->description);
        (temp)=(temp)->next;
    }
    pcap_freealldevs(alldevsp);

    pkt_handle = pcap_create("wlan1",errbuf);
    if(pkt_handle==NULL)
    {
        printf("create: %s\n",errbuf);
        exit(1);
    }

    if((pcap_set_rfmon(pkt_handle, 1))!=0)
    {
        printf("Monitor mode could not be set\n");
        exit(1);
    }

    if((pcap_set_buffer_size(pkt_handle, BUFFER_SIZE))!=0)
        {
        printf("ERROR\n");
        exit(1);
    }

    if((d=(pcap_activate(pkt_handle)))!=0)
    {
        if(d==PCAP_ERROR_RFMON_NOTSUP)
            printf("%d : PCAP_ERROR_RFMON_NOTSUP\n",d);
        if(d==PCAP_WARNING)
            printf("%d : PCAP_WARNING\n",d);
        if(d==PCAP_ERROR)
            printf("%d : PCAP_ERROR\n",d);
        pcap_perror(pkt_handle,"Activate");
        exit(1);
    }
    printf("d=%d\n",d);

    while(1)
    {
        scanf("%d",&d);
        if(d==-1)
            break;
    }

    pcap_close(pkt_handle);
    printf("Bye\n");

    return 0;
} 
```

当您使用以下命令运行上述程序时：

```
gcc -Wall -lpcap sample.c -o sample 
```

我收到以下错误：

```
-1 : PCAP_ERROR
Activate: can't mmap rx ring: Invalid argument 
```

但是，如果我**注释掉包含`pcap_set_buffer_size()`**函数调用的代码部分，则程序运行良好。

那么，这个问题是`pcap_set_buffer_size()`什么？

为什么会导致`pcap_activate()`失败？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T16:38:49.540

对于最近的 64 位 Linux：

任何等于或大于 65616 的缓冲区大小都应该这样做。

有关如何计算该值，请参阅来源中的in`create_ring()`实现。[`pcap-linux.c`](https://github.com/the-tcpdump-group/libpcap/blob/master/pcap-linux.c)`libpcap`

默认值为 2*1024*1024 = 2097152。

Windows 上的默认缓冲区大小为 1000000。

* * *

**更新：**

要设置的缓冲区大小是`pcap_set_buffer_size()`指（环）缓冲区，它存储已经收到的包。最佳大小取决于用例和可负担的系统资源（不可分页内存）。

请逐字查看以下有关接收缓冲区大小的语句 [`man pcap`](http://man7.org/linux/man-pages/man3/pcap.3pcap.html)：

> 为捕获而到达的数据包存储在缓冲区中，因此应用程序不必在它们到达后立即读取它们。在某些平台上，可以设置缓冲区的大小；尺寸太小可能意味着，如果捕获的数据包太多并且快照长度不限制缓冲的数据量，如果缓冲区在应用程序可以从中读取数据包之前填满，则数据包可能会被丢弃，而太大的大小可能会使用比防止数据包丢失所需的更多的不可分页操作系统内存。

* * *

**更新1：**

Anyway, the buffer's size should be least the snap length set for the handle in use, plus some bytes needed to properly align the buffer itself, otherwise activating the handle ends up as described in the original question.

One can retrieve the handle's current snap length using `pcap_snapshot()`. The default snap length is 65535 bytes.

# java - 英语和 JAX-B 之间的语义/语法冲突

> ID：11397372
> 
> 赞同：0
> 
> 时间：2012-07-09T14:41:42.337
> 
> 标签：java, rest, jaxb, jax-rs, resteasy

以下 DTO 用于封装要在服务提供者和服务请求者之间传输的一堆 Employee 记录。

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement (name="employees")
public class EmployeeList {
  private List<Employee> employee;

  public List<Employee> getEmployee() {
    if (employee==null)
      employee = new ArrayList<Employee>();
    return employee;
  }

  public void setEmployee(List<Employee> employee) {
    this.employee = employee;
  }
} 
```

上述 DTO 声明将生成以下 XML

```
<employees>
  <employee id="1234" ...... />
  <employee id="1236" ...... />
  ....
</employees> 
```

当我希望获得员工名单时，问题就出现了。

```
public void showEmployees(EmployeeList employeeList) {
    List<Employee> employees = employeeList.getEmployee();
    dothedo(employees);
} 
```

请注意，该函数不是 getEmployees 而是 getEmployee，因为该字段是雇员而不是雇员。

因此，我将 DTO 更改为：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement (name="employees")
public class EmployeeList {
  private List<Employee> employees;

  public List<Employee> getEmployees() {
    if (employee==null)
      employee = new ArrayList<Employee>();
    return employee;
  }

  public void setEmployee(List<Employee> employee) {
    this.employee = employee;
  }
} 
```

所以我现在会得到员工

```
List<Employee> employees = employeeList.getEmployees(); 
```

将复数放入 DTO 的问题是会导致遵循 XML，这是不可接受的。我什至不认为 RestEasy 运行时不会因为根元素和子元素之间的命名冲突而发声。

```
<employees>
  <employees id="1234" ...... />
  <employees id="1236" ...... />
  ....
</employees> 
```

那么，您的建议是什么，以使 DTO 在英语中直观（多个项目带有复数名称），并且 XML 输出也很直观（单数项目应该具有单数标签名称）。

有没有办法重新设计我的列表 DTO 来避免这种语义冲突？如果不是，您认为下一个版本的 jax-b 应该处理它是否足够重要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:49:03.087

您只需要在您的员工财产上使用@XmlElement(name = "employee")。

另请参阅@XmlElementWrapper - 在这种情况下不是必需的（因为您的类是“员工”包装器），但如果您使用“员工”对“公司”之类的东西进行建模，则这是必需的。

# c++ - Visual Studios 9 不一致的 Dll 链接

> ID：11397375
> 
> 赞同：0
> 
> 时间：2012-07-09T14:41:47.827
> 
> 标签：c++, visual-studio, dll, linkage

基本上是代码行

```
extern char *strlwr       OF((char *s)); 
```

给出错误

```
warning C4273: 'strlwr' : inconsistent dll linkage 
```

我不知道为什么。这不是我的代码，所以我在弄清楚如何修复它时遇到了问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:58:14.310

寻找：

```
_declspec( dllexport );
_declspec( dllimport ); 
```

附在 strlwr 的声明中。这与此有关。

基本上，当您在 dll 本身中声明 strlwr 时，例如，当包含 strlwr 的标头被编译成 .dll 的代码读取时，它应该被声明为 export。

当调用 dll 的代码读取头文件时，应将其声明为 dllimport。

我倾向于制作宏块，例如：

```
#ifndef DLL_IFACE
#ifdef DLL_IFACE_EXPORT
#define DLL_IFACE _declspec( dllexport )
#else  // !DLL_IFACE_EXPORT
#define DLL_IFACE _declspec( dllimport )
#endif // !DLL_IFACE_EXPORT
#endif // !DLL_IFACE 
```

然后对于作为 dll 接口一部分的标头中的所有符号，我使用 DLL_IFACE 声明这些符号。当 dll 代码读取标头时，我使用“#define DLL_IFACE_EXPORT”启动 .cpp 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-22T09:28:16.617

您可以使用`_strlwr_s`而不是`strlwr`.

# regex - 是否有一个正则表达式量词表示“x 或 y 重复”？

> ID：11397378
> 
> 赞同：4
> 
> 时间：2012-07-09T14:42:09.370
> 
> 标签：regex

我想匹配一个**只包含正好 7 位或 9 位数字**的字符串。

```
/^\d{7}$|^\d{9}$/ 
```

有没有另一种写法，类似于`/\d{7,8}/`7 位或 8 位数字？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T14:44:06.377

这个怎么样：

```
/^\d{7}(?:\d{2})?$/ 
```

**解释：**

```
^      # Start of string
\d{7}  # Match 7 digits
(?:    # Try to match...
 \d{2} #  2 digits
)?     # ...optionally
$      # End of string 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T14:47:14.397

替代方案：

```
/^(\d{7}|\d{9})$/ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-09T14:45:06.030

使用这个正则表达式

```
^\d{7}(\d{2})?$ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-09T14:47:07.247

匹配 7 位数字，然后匹配可选的两位数字。

```
/^\d{7}(\d{2})?/ 
```

# internet-explorer - Azure 和 IE9 的间歇性错误

> ID：11397379
> 
> 赞同：0
> 
> 时间：2012-07-09T14:42:09.683
> 
> 标签：internet-explorer, azure

我在 Azure 上有一个站点，在开发和现在的生产过程中，我偶尔会在 IE9 中看到一页乱码。它发生在模拟器和实时服务器上。我认为它在 IIS 中存在问题。当本地发生这种情况时，我只需重新启动应用程序，但在生产服务器上，我必须循环服务器或重新发布应用程序。当它处于这种状态时，在 IE 中加载页面的所有尝试要么导致垃圾字符，要么要求保存返回或在其他程序（3.5k）中打开它。我的页面是 9.6k，所以我知道不是这样。奇怪的是，当它处于这种状态时，它仍然可以从 firefox 或 chrome 运行。

这是我看到的片段：ìZmsÛÆñŸ™|‡Ú1ÀJH)Û'¨üeÉùWSÅÑÈrÜ

我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T10:56:59.587

这似乎是应用程序/代码问题，或者可能是浏览器问题，但与 Windows Azure 无关。

# wpf - 绑定到对象而不是属性

> ID：11397380
> 
> 赞同：2
> 
> 时间：2012-07-09T14:42:12.307
> 
> 标签：wpf, data-binding, object, properties

在使用转换器时，我想绑定到整个对象并将其发送给转换器使用，而不是绑定到每个单独的属性，所以我可以这样做：

```
Order thisOrder = (Order)values[0]; 
```

（注意，它是一个多重绑定，除了 thisOrder 对象之外还发送了其他值。现在 Order 类实现了 INotifyPropertyChanged 接口，并在其任何属性发生更改时引发适当的事件。转换器需要访问 Order 的多个属性,虽然它实际上只需要重新运行对其中一个属性的更改.有没有办法绑定到整个对象,以便如果任何属性发生更改,转换器会再次评估,或者只绑定到一个属性,但是对象的其余部分是否也可用作转换器工作的参数？

> 示例详细信息：订单具有以下字段：
> 
> *   ID
> *   市场价
> *   姓名
> 
> 当 MarketPrice 发生变化时，转换器需要根据 ID 和 MarketPrice 重新计算。目前，绑定应用于 xamDataGrid 的 DataRecordCellArea，如下所示：

```
<MultiBinding Converter="{StaticResource MarketPositionToBrushConverter}">
     <Binding RelativeSource="{RelativeSource Self}" Path="Record.DataItem"/>
...
</MultiBinding> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T00:06:03.907

据我所知，目前没有干净的解决方案。我建议您添加两个绑定，一个到`Order`对象，以便您可以访问所有值，另一个到对象，`MarketPrice`以便在该属性更改时绑定更新。然后，您可以通过第一个绑定访问对象和所有属性，并获得相应的更新。

这是另一种相当 hack 的方法，您可以`PropertyChanged`在拥有`Order`实例的类中订阅，然后在实例中发生更改`Order`时为实例属性触发更改通知`MarketPrice`。我会避免这样做，但它可以让你摆脱第二个绑定。

# c# - 将文档 ID 插入嵌套中继器的 WhereCondition

> ID：11397383
> 
> 赞同：1
> 
> 时间：2012-07-09T14:42:26.160
> 
> 标签：c#, repeater, kentico

我有一个嵌套中继器用作左导航。在二级页面上，我希望它只显示当前二级页面的第三项。其他次要项目的任何第三项都不应显示在此转发器上。我遇到的问题是，我目前在显示所有第三项的位置都有它，因为它只能在第一个（父）中继器的上下文中检索信息。

我觉得我应该能够调用当前页面的文档 ID 并将其插入到第二个（子）转发器的转换中，但同样，它只能从其父转发器项中检索文档 ID 和节点 ID。

你能帮我找到一个自定义函数或代码来帮助我解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:56:37.783

您可以访问当前文档的文档 ID。以下代码将打印出来：

```
<%=CMSContext.CurrentDocument.DocumentID.ToString() %> 
```

因此，您可以在某些转换方法中类似地使用文档 id：

```
<%#SomeMethod(CMSContext.CurrentDocument.DocumentID, otherParameter, ...) %> 
```

# c# - 根据 .net 中的应用程序 url 使用不同的连接字符串

> ID：11397385
> 
> 赞同：0
> 
> 时间：2012-07-09T14:42:31.807
> 
> 标签：c#, asp.net, .net, web-config

我有一个名为*FinanceTracker*的 asp.net 网络项目（使用了一年）。并且数据存储在`Finance_Tracker_db`. （这是一个跟踪组织财务数据的 Intranet 网站，从 访问 `http://OrgTracker`） 现在我需要为 IT 部门提供相同的应用程序。两者的数据上的一切都应该隔离。所以我创建了一个数据库名称的空副本`IT_Tracker_db`。（在同一数据库服务器上）并使用旧代码和修改后的连接字符串`web.config` （从`http://OrgTracker/IT/`部署在同一 IIS 服务器上访问）

但是为了减少对两个部署版本应用相同代码的维护，我计划使用具有不同连接字符串的相同代码。

现在我希望有类似的东西。

`http://OrgTracker/`- 这应该显示两个链接

1.  `http://OrgTracker/fincance/`
2.  `http://OrgTracker/IT/`

并且根据用户选择的 URL，应该从 web.config 使用正确的连接字符串

就像所有页面都将保持不变一样。

`http://OrgTracker/fincance/Status.aspx`, `http://OrgTracker/fincance/Inbox.aspx`等。

`http://OrgTracker/IT/Status.aspx`, `http://OrgTracker/IT/Inbox.aspx`等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:53:51.133

可以有多个配置

[ASP.NET 配置文件层次结构和继承](http://msdn.microsoft.com/en-us/library/ms178685.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:50:48.643

我建议不要这样做。首先，它很复杂并且没有内置的 ASP.NET 功能。其次，在未来的某个时间，您的用户可能会要求不同的东西：一个部门会立即想要更新版本，而另一个部门希望拥有稳定的旧版本，直到他们可以测试所有内容。

PS 但如果我是你，我会开始考虑在所有相关表中添加名为“部门”的附加列，以便将来可以统一数据库。这与我的第二点背道而驰 :)，但它会使一切更易于管理和架构合理，特别是如果更多部门想要使用您的应用程序。

# plone - 无法在 Plone 4 中注册转换 lynx_dump 错误日志条目

> ID：11397386
> 
> 赞同：3
> 
> 时间：2012-07-09T14:42:37.193
> 
> 标签：plone

目前 Plone 4.1 instance.log 之一是（从 3.3 开始）获取如下消息：

```
2012-07-09 17:40:38 ERROR PortalTransforms Cannot register transform lynx_dump, using BrokenTransform: Error
 Unable to find binary "lynx" in /Users/moo/tools/bin:/Users/moo/.zsh/bin:/opt/local/libexec/gnubin:/opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin 
```

1）这是一个真正的错误（可能不是）？

2）如何摆脱这个消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:48:27.990

这不是一个真正的问题，除非您使用`lynx_dump`转换（库存 Plone 没有使用它，其他转换也提供`text/html`）`text/plain`。

你有两种选择来处理它：

1.  移除`lynx_dump`变换。转到 ZMI，找到该`portal_transforms`工具，选中`lynx_dump`条目旁边的框，然后点击`[Delete]`表单底部的按钮。如果您不使用转换，这是无害的。

2.  安装`lynx`命令。`port install lynx`应该做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T22:22:38.713

“基本上无害”

无论如何，您可能都想安装 lynx，只是为了荣誉和过去的缘故，但是还有一些其他的转换也可以执行 html 到纯文本的转换。话又说回来，Lynx 转换确实为您赢得了一些屏幕阅读器的赞誉，这些屏幕阅读器适用于其他有能力的人群，而且不会消耗您的资源。所以 apt-get install lynx，或者你选择的操作系统提供的任何东西

# git - 从 git 中删除大型提交

> ID：11397392
> 
> 赞同：12
> 
> 时间：2012-07-09T14:43:05.237
> 
> 标签：git, git-filter-branch

我们正在运行一个中央 git 存储库 (gforge)，每个人都可以从中提取和推送。不幸的是，一些无能的同事认为将几个 10-100Mb 的 jar 文件推送到 repo 是一个好主意。因此，我们经常使用的服务器磁盘空间不足。

我们直到为时已晚才意识到这一点，大多数人已经撤下了新的大型回购。如果问题没有被推送，那么我们可以做一个 rebase 来剪掉那些巨大的提交并修复它，但是现在每个人都已经退出了，删除那个提交的最好方法是什么（或者做一个 rebase删除大文件），然后当每个人都想从/推入回购时，这*不会造成混乱吗？*

它应该是一个小的脚本仓库，但现在大小约为 700M :-(

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T14:52:50.453

避免混乱的最简单方法是给服务器更多的磁盘。

这是困难的一个。删除文件也需要将它们从历史记录中删除，这只能通过`git filter-branch`. 例如，此命令`<file>`将从历史记录中删除：

```
git filter-branch --index-filter 'git rm --cached --ignore-unmatch <file>' \
--prune-empty --tag-name-filter cat -- --all 
```

问题是这会重写 SHA1 哈希，这意味着团队中的每个人都需要重置到新的分支版本，否则会有一些严重的头痛风险。如果没有人在进行中并且你们都使用主题分支，那一切都很好。如果您更集中，您的团队很大，或者他们中的许多人在工作时保留肮脏的工作目录，那么没有一点混乱和不和谐就没有办法做到这一点。你可以花很长时间让每个人的本地工作正常。那写的，`git filter-branch`可能是最好的解决方案。只要确保你有一个计划，你的团队理解它，并确保他们备份他们的本地存储库，以防一些正在进行的重要工作丢失或被破坏。

一种可能的计划是：

1.  让团队生成他们正在进行的工作的补丁，例如`git diff > ~/my_wip`.
2.  让团队为他们已提交但未共享的工作生成补丁：`git format-patch <branch>`
3.  运行`git filter-branch`。确保团队知道在这种情况下不要拉动。
4.  让团队问题`git fetch && git reset --hard origin/<branch>`或让他们重新克隆存储库。
5.  应用他们之前承诺的工作`git am <patch>`。
6.  应用他们正在进行的工作`git apply`，例如`git apply ~/my_wip`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-09T14:47:24.517

看看这个[https://help.github.com/articles/remove-sensitive-data](https://help.github.com/articles/remove-sensitive-data)。他们在这里写了关于从你的 Git 存储库中删除敏感数据的文章，但是你可以很好地使用它来从你的提交中删除大文件。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-10T02:06:16.430

除了其他答案之外，您可能需要考虑添加一些针对未来巨型 jar 文件的先发制人保护，其形式是回购中禁止用户（或至少是“非管理员用户”）的预接收挂钩的形式从推送非常大的文件，或名为 的文件`*.jar`，或任何看起来最好的文件。

我们以前做过这种事情，包括禁止特定的提交 ID，因为某些用户无法掌握“将你的工作保存在临时分支上，重置和拉取，并重新应用你的工作，减去巨大的文件”。

请注意，pre-receive 钩子在一个相当有趣的上下文中运行：文件实际上已经上传，只是引用（通常是分支头）实际上还没有改变。您可以防止分支头更改，但您仍将使用（临时，直到 gc'ed）磁盘空间和网络带宽。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-07T23:24:35.023

使用过滤器分支！

```
git filter-branch --tree-filter 'find . -name "*.jar" -exec rm {} \;' 
```

然后只需清除所有没有任何文件的提交：

```
git filter-branch -f --prune-empty -- --all 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-10-15T16:28:04.650

GForge 家伙在这里。即使认为这主要是一个 git 问题，我还是想提供两件事：

1.  [从 GForge 6.3 开始](https://blog.gforgegroup.com/2013/09/03/what-to-expect-in-gforge-6-3/)，站点管理员可以识别使用过多磁盘的项目，以及旧项目和孤立项目。这可能会帮助您避免磁盘满的情况，尤其是在您有很多单独的团队和项目的情况下。
2.  在 GForge 中轻松实现 git 钩子（通常是 SCM 钩子）。站点管理员可以配置任意数量的挂钩命令，然后项目级人员可以选择他们想要的项目挂钩。添加一个阻止某些类型（或大小？）文件的钩子将非常适合此功能。

# javascript - 手风琴坏了

> ID：11397393
> 
> 赞同：0
> 
> 时间：2012-07-09T14:43:07.037
> 
> 标签：javascript, jquery, accordion, jquery-ui-accordion

我正在使用这段代码：

```
<script>
    $(document).ready(function() {
        $("#accordion").accordion(
            active: false,
            collapsible: true            
         });
</script> 
```

但是手风琴坏了，所有面板都打开了。

我如何对其进行编码，以便手风琴面板区域全部关闭。

感谢那些可以帮助我的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:45:13.690

It looks like you are missing several braces and parenthesis. Try this:

```
<script>
    $(document).ready(function() { 
        $("#accordion").accordion({ // <- add this curly brace {
            active: false, 
            collapsible: true
        });
    }); // <- add these to close the ready function
</script> 
```

P.S. I'm sure a javascript error was raised for this. To see these errors, open up your javascript console. In Chrome, hit F12 and click on Console. In Firefox, install firebug and then hit F12\. In IE, well, don't debug there. (*I'm half kidding; IE has a debugger that you can use if you want.*)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:45:11.420

You have a few typos in your question code. This should work:

```
$(document).ready(function() {
    $("#accordion").accordion({
        active: false,
        collapsible: true
    });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T14:45:13.690

Did you missed the `{`?

```
$("#accordion").accordion({
    active: false,
    collapsible: true            
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T14:47:18.813

试试这个设置

```
alwaysOpen: false 
```

哦，你那里有一些丢失的大括号

```
$(document).ready(function() {
  $("#accordion").accordion({
   active: false,
   collapsible: true,
   alwaysOpen: false
  });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T15:09:10.223

```
$(document).ready(function () {
  $("#accordion").accordion({
    active:false,
    collapsible:true
  }); 
}); 
```

# ruby - 安装 RVM 后无法使用 gems

> ID：11397396
> 
> 赞同：0
> 
> 时间：2012-07-09T14:43:10.960
> 
> 标签：ruby, rubygems, gem, rvm

我正在使用带有 Zsh 的 Arch Linux。我按照官方文档安装了 RVM：

```
$ curl -L https://get.rvm.io | bash -s stable --ruby
$ echo '[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm"' >> ~/.zshrc
$ source ~/.zshrc
$ rvm use 1.9.2 --default 
```

安装 RVM 后。我安装的每个 gem 都向我显示*Gem::LoadError*错误，如下所示：

```
$ gem install huami
$ huami
/home/meck/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find huami (>= 0) amongst [] (Gem::LoadError)
from /home/meck/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'
from /home/meck/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems.rb:1231:in `gem'
from /home/meck/.gem/ruby/1.9.1/bin/huami:22:in `<main>' 
```

宝石列表为空：

```
$ gem list

*** LOCAL GEMS *** 
```

这是我的宝石环境：

```
$ gem env
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.24
  - RUBY VERSION: 1.9.2 (2012-04-20 patchlevel 320) [x86_64-linux]
  - INSTALLATION DIRECTORY: /home/meck/.rvm/gems/ruby-1.9.2-p320@global
  - RUBY EXECUTABLE: /home/meck/.rvm/rubies/ruby-1.9.2-p320/bin/ruby
  - EXECUTABLE DIRECTORY: /home/meck/.rvm/gems/ruby-1.9.2-p320@global/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-linux
  - GEM PATHS:
     - /home/meck/.rvm/gems/ruby-1.9.2-p320@global
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
     - :sources => ["http://rubygems.org/"]
     - "gem" => "--user-install"
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

谁能指出我错过了哪一步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T02:13:06.937

RVM 不适用于 oh-my-zsh。oh-my-zsh 喜欢控制你的很多 shell 体验。您的里程会有所不同。某些扩展会与 RVM 的操作发生冲突。如果您遇到问题，请加入 IRC Freenode #rvm，因为他们可以为 oh-my-zsh 提供直接和快速的帮助。

# iphone - 我可以将 NSURLCredentialStorage 与数据保护一起使用吗？

> ID：11397399
> 
> 赞同：2
> 
> 时间：2012-07-09T14:43:16.583
> 
> 标签：iphone, ios, security, keychain

据我所知，`NSURLCredentialStorage`它只是带有更方便 API 的钥匙串服务的包装器。这就是我想使用它的原因。但我也想利用`kSecAttrAccessibleWhenUnlockedThisDeviceOnly`钥匙串提供的数据保护功能。

使用 NSURLCredentialStorage 存储凭据时，是否可以设置此属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T10:41:41.107

原来答案是肯定的，有点。我查看了`NSURLCredentialStorage`创建的钥匙串项目。它属于该类`kSecClassInternetPassword`，并且访问密钥`kSecAttrAccessible`设置为“ak”，即`kSecAttrAccessibleWhenUnlocked`. 因此，在设备锁定时密码不会被解密。

唯一的缺点是它`NSURLCredentialStorage`没有提供一种方法来改变它来`kSecAttrAccessibleWhenUnlockedThisDeviceOnly`为您的备份数据获得更高级别的安全性。您只能使用较低级别的钥匙串 API（即`SecItemUpdate`）在钥匙串项上手动更改该属性。

# python - 创建和初始化对象列表并从字典中为它们分配值

> ID：11397401
> 
> 赞同：-4
> 
> 时间：2012-07-09T14:43:31.053
> 
> 标签：python, python-3.x

我有一个具有属性`name`和`address`. 我需要使用格式的字典创建该类的几个实例`{name:age}`。每个对象的名称和地址应该来自字典元素。

我正在使用 Python 3.2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:56:14.810

这个怎么样：

```
>>> d = {"Mark": 32, "Jack": 25, "Jane":30}
>>> class Person():
...     def __init__(self,name,age):
...         self.name = name
...         self.age = age
...     def __str__(self):
...         return "{0} is {1} years old.".format(self.name, self.age)
...
>>> a = [Person(name,age) for name, age in d.items()]
>>> print(a[0])
Jane is 30 years old. 
```

# javascript - 使用正则表达式从字符串中提取数字

> ID：11397403
> 
> 赞同：1
> 
> 时间：2012-07-09T14:43:38.927
> 
> 标签：javascript, regex

我对正则表达式一无所知，但我知道它们是我在这里尝试做的正确工具：我试图从这样的字符串中提取一个数值：

```
approval=not requested^assignment_group=12345678901234567890123456789012^category=Test^contact_type=phone^ 
```

理想情况下，我会从中提取以下内容：`12345678901234567890123456789012`我尝试过的正则表达式都没有奏效。我怎样才能从这个字符串中得到我想要的值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T14:44:44.343

这将获得所有数字：

```
var myValue = /\d+/.exec(myString) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T14:48:38.270

```
mystr.match(/assignment_group=([^\^]+)/)[1]; //=> "12345678901234567890123456789012" 
```

这将找到从“assignment_group=”结尾到下一个插入`^`符号的所有内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T14:46:41.440

尝试这样的事情：

```
/\^assignment_group=(\d*)\^/ 
```

这将获得`assignment_group`.

```
var str = 'approval=not requested^assignment_group=12345678901234567890123456789012^category=Test^contact_type=phone^',
    regex = /\^assignment_group=(\d*)\^/,
    matches = str.match(regex),
    id = matches !== null ? matches[1] : '';
console.log(id); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T15:21:15.007

如果没有机会在任何地方都有数字，但当你需要它们时，你可以这样做：

```
\d+ 
```

\d 匹配数字，+ 表示“匹配后面的任何数字”

# android - 样式化操作项背景 ActionBarSherlock

> ID：11397407
> 
> 赞同：4
> 
> 时间：2012-07-09T14:43:44.353
> 
> 标签：android, android-actionbar, actionbarsherlock

我一直在尝试创建自己的行动项目，但这对我来说是不可能的。

我正在尝试做的是创建自定义操作项布局（例如颜色背景），例如“拇指”操作栏。我只想为我的一项活动更改操作项。

![在此处输入图像描述](../Images/10e4c918a225aa6969323affb06bec3c.png)

我一直在使用 android:icon 和 android:actionLayout 属性来操作菜单项。但我什么也没得到。

实际上，我在 StackOverflow 中看到了另一个线程，但它并没有帮助我......

[在 ActionBarSherlock 中使用自定义布局构建 ActionMode](https://stackoverflow.com/questions/10863080/building-actionmode-with-custom-layout-in-actionbarsherlock)

[样式化 ActionbarSherlock：操作项的 textColor](https://stackoverflow.com/questions/10062012/styling-actionbarsherlock-textcolor-of-the-action-items)

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-18T12:32:45.440

要覆盖`ActionBarSherlock`主题，您应该像这样进行：

`values/abs__themes.xml`从`ActionBarSherlock`库项目中打开。例如，您会看到：

```
<style name="Theme.Sherlock" parent="Sherlock.__Theme">
    <!-- Action bar styles (from Theme.Holo) -->
    <item name="actionDropDownStyle">@style/Widget.Sherlock.Spinner.DropDown.ActionBar</item>
    <item name="actionButtonStyle">@style/Widget.Sherlock.ActionButton</item>
    <item name="actionOverflowButtonStyle">@style/Widget.Sherlock.ActionButton.Overflow</item>
    <item name="actionModeBackground">@drawable/abs__cab_background_top_holo_dark</item>
    <item name="actionModeSplitBackground">@drawable/abs__cab_background_bottom_holo_dark</item>
    <item name="actionModeCloseDrawable">@drawable/abs__ic_cab_done_holo_dark</item>
    <item name="actionBarTabStyle">@style/Widget.Sherlock.ActionBar.TabView</item>
    ...
    // Here is what you wanted
    <item name="actionBarItemBackground">@drawable/abs__item_background_holo_dark</item>
    ... 
```

当您找到要自定义的项目（`actionBarItemBackground`在您的情况下）时，您可以在项目中创建自己`themes.xml`的项目，然后添加：

```
<style name="Custom.Theme.Sherlock" parent="@style/Theme.Sherlock">
    <item name="actionBarItemBackground">@drawable/my__item_background_holo_dark</item>
</style> 
```

这会覆盖默认值`Theme.Sherlock`，设置自定义`actionBarItemBackground`。

现在，`Theme.Sherlock`您应该使用`setTheme(R.style.Custom_Theme_Sherlock)`. 您可能还想覆盖其他两个主题 (`Theme.Sherlock.Light`和`Theme.Sherlock.Light.DarkActionBar`)

还有一个提示，这里是用于`ActionBarSherlock`默认操作项背景（在 holo_light 中）的可绘制选择器，它使用 9-patch png 可绘制对象：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<!-- Even though these two point to the same resource, have two states so the drawable will invalidate itself when coming out of pressed state. -->
<item android:state_focused="true"  android:state_enabled="false" android:state_pressed="true" android:drawable="@drawable/abs__list_selector_disabled_holo_light" />
<item android:state_focused="true"  android:state_enabled="false"                              android:drawable="@drawable/abs__list_selector_disabled_holo_light" />
<item android:state_focused="true"                                android:state_pressed="true" android:drawable="@drawable/abs__list_selector_background_transition_holo_light" />
<item android:state_focused="false"                               android:state_pressed="true" android:drawable="@drawable/abs__list_selector_background_transition_holo_light" />
<item android:state_focused="true"                                                             android:drawable="@drawable/abs__list_focused_holo" />
<item                                                                                          android:drawable="@android:color/transparent" /> 
```

* * *

对于其他基本定制，您可以使用此[工具](http://jgilfelt.github.com/android-actionbarstylegenerator/#name=example&compat=holo&theme=light&actionbarstyle=solid&backColor=E4E4E4,100&secondaryColor=D6D6D6,100&tertiaryColor=F2F2F2,100&accentColor=33B5E5,100)，它会为您生成样式。

# php - Session variables lost after header redirect

> ID：11397418
> 
> 赞同：0
> 
> 时间：2012-07-09T14:44:10.227
> 
> 标签：php, session, redirect

Bear with me if this looks similar to other questions posted here, I have already gone through all answers provided but not has solved my problem. I've reduced my problem to the bare minimum.

1.  I have two pages (page1.php, page2.php)
2.  Page1.php creates a session variable and if the session variable is set it then sends the browser to Page2.php
3.  On page2.php the browser is supposed to display the value of the session variable set in Page1\. php
4.  My problem is that page2.php views the session variable as not set.
5.  I have tried all the solutions posted by other users on stack overflow as you can see from my code below:

* * *

**Page1.php**

```
<?php
//start the session
session_start();

//set the session
$_SESSION['mysession'] = "Hello";

if(isset($_SESSION['mysession'])){
    //redirect the person to page 2
    session_write_close();
    header("Location: page2.php?PHPSESSID=".session_id());
    exit();
} else {
 echo "Session Not Set";
}
?> 
```

**Page2.php**

* * *

```
<?php
//start the session
session_start();
session_id($_GET['PHPSESSID']);

if ( isset ($_SESSION['mysession']) )
   echo $_SESSION['mysession'];
else
   echo "Session not set!";
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:48:55.973

session_id() 需要在 session_start() 之前调用

> 如果指定了**id**，它将替换当前会话 id。为此，需要在 session_start() 之前调用 session_id()。根据会话处理程序，会话 ID 中不允许所有字符。例如，文件会话处理程序仅允许 az AZ 0-9 、（逗号）和 -（减号）范围内的字符！
> 
> **注意**：当使用会话 cookie 时，为 session_id() 指定 id 将始终在 session_start() 被调用时发送一个新的 cookie，无论当前会话 id 是否与设置的相同。

[session_id()-手动](http://www.php.net/manual/en/function.session-id.php)

您还可以检查是否设置了基于 cookie 的身份验证。

请注意，如果用户发布 url，他们可能会将会话带到另一个客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:52:28.650

在 上`page2.php`，交换前 2 行。改变

```
session_start();
session_id($_GET['PHPSESSID']); 
```

至

```
session_id($_GET['PHPSESSID']);
session_start(); 
```

请参阅此处的`Parameters`部分..http://php.net/manual/en/function.session-id.php

# ios - 有没有一种方法可以在用户时间轴上自动显示 OpenGraph 操作，而无需从活动日志中启用它？

> ID：11397431
> 
> 赞同：1
> 
> 时间：2012-07-09T14:44:51.400
> 
> 标签：ios, facebook, ios5, facebook-opengraph

我正在使用以下代码将操作从我的 iPhone 应用程序发布到 Open Graph：

```
-(void) postEarnedBadgeToFacebook:(id)delegate:(Badge*)theBadge
{
    NSLog(@"Posting badge [%@] to facebook", theBadge.badgeTitle);

    NSMutableDictionary * params = [[NSMutableDictionary alloc]init];
    [params setValue:[theBadge getFullyQualifiedFacebookWebPageUrl] forKey:@"badge"];
    [params setValue:[theBadge getFullyQualifiedFacebookWebImageUrl] forKey:@"image"]; 

    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    NSLog(@"Posting graph request for me/myapp:earn");
    [[appDelegate facebook] requestWithGraphPath:@"me/myapp:earn" andParams:params andHttpMethod:@"POST" andDelegate:self];
} 
```

这工作得很好，我可以在我的 facebook 个人资料的活动日志中看到上述调用，如下所示：

![在此处输入图像描述](../Images/026fd0429896783b71b03604cb257529.png)

**问题**：虽然我的应用程序的操作显示在活动提要中，但有没有办法可以自动让它们显示在用户时间轴上？目前，用户必须手动点击绿色圈出的选项，然后选择“在时间轴上显示”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T03:16:07.710

[检查我的答案](https://stackoverflow.com/q/17310892/1749293) 并查看更多[关于 Explicit Sharing 的文档](https://developers.facebook.com/docs/opengraph/guides/explicit-sharing/)：

```
id<FBOpenGraphAction> action = (id<FBOpenGraphAction>) [FBGraphObject graphObject];
[action setObject: @"true" forKey: @"fb:explicitly_shared"];  // The key point! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:53:39.293

我不相信有另一种方法涉及您希望做的事情，因为 Facebook 会限制这可能产生的潜在垃圾邮件。

相反，Facebook 为有`publish_stream`兴趣立即发布到用户时间线的开发人员提供了扩展权限。这可能是你感兴趣的事情。

假设您使用的是 PHP，这可能是您查看的一个很好的起点（使用 PHP SDK）：

**参考**：developers.facebook.com/docs/reference/php/facebook-api/

享受和好运！

# extjs - EXTJS 3, how to get a cell value in the load event?

> ID：11397432
> 
> 赞同：0
> 
> 时间：2012-07-09T14:44:55.530
> 
> 标签：extjs

In the EXTJS 3, I have a directStore, I want to get a cell value in the first row in the load event ? please see the code below, how to get 'SUMMARY_ID' in the load event ?

```
 var store = new Ext.data.DirectStore({
            directFn: Report.ReadExceptionSummary,
            autoLoad: false,
            ....
            root: 'Summary',
            idProperty: 'SUMMARY_ID',
            totalProperty: 'total',
            fields: [
                { name: 'SUMMARY_ID', type: 'string' },
                 .....
            ],
            remoteSort: false,
            listeners: {
                load: function (store, recs, opt) {
                    // how to get first row 'Summary ID' value /
                }
            },
            exception: function (ex) {
                Ext.Msg.alert('Error', 'There was an error retrieving the Report.\n' + d.reader.jsonData.errorMessage);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:51:55.463

这是从第一行获取值的方法：

```
load: function (store, records) {
    if (records.length > 0) {
        var SUMMARY_ID = records[0].get('SUMMARY_ID');

        //this would also work because you defined SUMMARY_ID as idProperty
        var SUMMARY_ID = records[0].getId(); 
    } 
} 
```

# php - 如何在选项卡 [tab] 的简码之间插入 PHP

> ID：11397441
> 
> 赞同：0
> 
> 时间：2012-07-09T14:45:14.620
> 
> 标签：php, wordpress, shortcode

我希望在如何在我的 2 个选项卡之间插入我的 php 方面获得一些帮助。我正在使用 wordpress 并尝试修改模板，以便我的页面上有 2 个选项卡，其中包含来自其他两个 php 页面的动态内容。

我得到 2 个选项卡，但内容没有出现在选项卡中，而是出现在它们上方。我不知道下面的代码做错了什么，但我不知道是什么！

我的代码如下：

```
<?php

echo do_shortcode('[tabs style="boxed"]
[tab title="First Tab"]' .get_template_part("includes/categories-panel"). '[/tab]
[tab title="Second Tab"]'. get_template_part('includes/home-map-panel')  .'[/tab]
[tab title="Third Tab"] Tab 3 Content here [/tab]
[tab title="Fourth Tab"] Tab 4 Content here [/tab]
[/tabs]');

?> 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:48:30.980

`get_template_part`只是在那时和那里吐出内容，该函数需要一个很大的长字符串。

您必须[捕获输出](http://www.php.net/manual/en/book.outcontrol.php)并手动输入。

```
ob_start();
get_template_part("includes/categories-panel");
$cats = ob_get_clean();
ob_start();
get_template_part('includes/home-map-panel');
$home = ob_get_clean();

echo do_shortcode('[tabs style="boxed"]
[tab title="First Tab"]' .$cats. '[/tab]
[tab title="Second Tab"]'. $home  .'[/tab]
[tab title="Third Tab"] Tab 3 Content here [/tab]
[tab title="Fourth Tab"] Tab 4 Content here [/tab]
[/tabs]'); 
```

# android - ListView and android:id/empty

> ID：11397444
> 
> 赞同：1
> 
> 时间：2012-07-09T14:45:20.477
> 
> 标签：android, android-listview

I've an activity with a ListView. When there are no items to show in the ListView, I want to show a TextView with a message "No elements found". So I add a TextView with the "android:id/empty" id.

```
<ListView android:id="@android:id/list"
           android:layout_width="match_parent"
           android:layout_height="match_parent"
           android:layout_weight="1"
           android:drawSelectorOnTop="false"
           />

<TextView android:id="@android:id/empty"
           android:layout_width="match_parent"
           android:layout_height="match_parent"
           android:text="@string/noSeHanEncontradoConsumos"
           android:gravity="center"  
           android:visibility="gone"             
           /> 
```

My problem is when the user selects an item of the list. I want to show the element details in another activity, show I start a new activity. But before the "details" actitity is shown, the elements of the list disappear, and the message "No elements found" is shown.

What could I do?

Thanks

# android - Android invalidate not working

> ID：11397446
> 
> 赞同：0
> 
> 时间：2012-07-09T14:45:20.923
> 
> 标签：android, android-view

I found threads where people had troubles with invalidate because they were not on UI thread, calling sleep etc, but that doesn't apply to me. Code from onContextItemSelected, which runs on UI, right?

```
case CUT_ID:
            if(ldb.hasRights(meta.vpath)){
                RelativeLayout importBar = (RelativeLayout)findViewById(R.id.import_bar);
                RelativeLayout editBar = (RelativeLayout)findViewById(R.id.edit_bar);
                importBar.setVisibility(View.GONE);
                editBar.setVisibility(View.VISIBLE);
                clipboardVPath = meta.vpath;
                ImageView thumbView = (ImageView) info.targetView.findViewById(R.id.thumbview);
                thumbView.setImageResource(R.drawable.cut);
                gridView.invalidate(); 
```

The thumbView.setImageResource(R.drawable.cut); has the desired effect of replacing an item in a gridview by a scissors symbol. Problem arises when I select cut on another item. Now both have the cut drawable, while I allow only 1 item to be cut. This code in getView on my custom ThumnbnailAdapter should guarantee that the view I selected cut first on should revert to a bitmap from array thumbBitmaps:

```
if (thumbBitmaps.size() > position) {
                if(meta.vpath.equals(clipboardVPath)){
                    holder.img.setImageResource(R.drawable.cut);
                }else{
                    holder.img.setImageBitmap(thumbBitmaps.get(position));
                }   

            } 
```

Whats wrong here?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T16:38:07.073

我需要的是 adapter.notifyDataSetChanged(); 我猜在无效时，gridview 询问它的孩子是否需要重绘，他们都回答不，因为他们认为他们的数据是最新的。这是我的猜测。

# sql-server - What's the risk of corruption/data loss with constant queries

> ID：11397447
> 
> 赞同：3
> 
> 时间：2012-07-09T14:45:21.633
> 
> 标签：sql-server, database, sqlite, database-design

I am going to have about 4 servers (Linux) constantly (constantly as in as many as possible with multiprocessing) send queries (most of the queries with be creating new rows, however one of the servers will read data) to a data server. I imagine it would be better to have separate databases. I think sqlite3 is my best option, but I am open to recommendations. I want to minimize the risk of corruption and data loss any tips?

EDIT: I will also have to check the database(s) to for duplicates.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:47:54.477

这是一个非常困难的问题。如果您想使用单独的数据库，您必须担心手动保持它们的一致性（这是您*真的*不想解决的问题）。相反，让所有 4 个（或更一般地说，N 个）服务器指向同一个数据库实例，并让数据库为您进行集群。通过这种方式，DBMS 可以处理并发性和恒定性的东西，并且您仍然可以获得所需的性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T15:13:06.877

将这种风险降至最低的最佳方法是选择一个完全保证 ACID 合规性的数据库，并认真对待该保证。请注意，因为某些数据库系统并不总是为您提供 ACID 合规性，具体取决于您设置的选项。例如，使用 PostGres 或 SQL Server 会很安全。MySQL -[需要更多的思考](http://dev.mysql.com/doc/refman/5.6/en/mysql-acid.html)：

> 如果您有额外的软件保护、超可靠的硬件或可以容忍少量数据丢失或不一致的应用程序，***您可以调整 MySQL 设置以交换一些 ACID 可靠性以获得更高的性能或吞吐量。***

# android - Android 在 XML 中绘制自己的搜索栏拇指

> ID：11397453
> 
> 赞同：6
> 
> 时间：2012-07-09T14:45:47.683
> 
> 标签：android

请帮助为 SeekBar Thumb 定义自己的 XML drawable。在这个 XML drawable 中，我想为`state_selected`和定义自定义形状`state_pressed`。

据我了解，在 XML 中的 SeekBar 定义中，我们必须放置`android:thumb="@drawable/listview_bg_selector"`如下`listview_bg_selector`所示的位置：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_selected="false"
        android:state_pressed="false"
        android:drawable="@drawable/seekbar_thumb_default" /> 
    <item android:state_pressed="true"
        android:drawable="@drawable/seekbar_thumb_clicked"
        />
    <item android:state_selected="true"
        android:state_pressed="false"
        android:drawable="@drawable/seekbar_thumb_selected" 
         />
</selector> 
```

但是接下来要做什么，我在这里尝试了带有形状的可绘制对象的代码，但没有任何工作正常，我只看到了默认的 SeekBar。这个问题有什么例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T20:55:45.963

像这样的东西为我解决了这个问题。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/seek_thumb_pic">
        <shape android:shape="rectangle" />
    </item>

</selector> 
```

另一种方法可能是在代码中设置界限，但我不确定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-19T15:37:11.880

对于未来的答案寻求者，我使用[holo-colors.com](http://android-holo-colors.com/)来创建我自己的 custom `SeekBar`，我对此非常满意。

它们还提供创建其他 android 元素的函数，例如`Spinner`,`Switch`等。

# plsql - 在 Oracle Apex 中保存和检索大于 32K 的 CLOB 数据

> ID：11397456
> 
> 赞同：5
> 
> 时间：2012-07-09T14:45:55.073
> 
> 标签：plsql, onload, oracle-apex, clob

我的目标是将 CLOB 数据从数据库中检索到 Oracle Apex 应用程序中的 textarea 中，然后在按下“保存”按钮时将其从 textarea 本身保存到数据库中。我在此页面上还有一些其他字段（作为文本字段），它们是非 CLOB 字段，并且在单击按钮时也需要将它们保存在数据库中。

为此，我在页面的“HTML Header and Body Attribute”下使用了以下代码。这用于将 CLOB 检索/保存到 textarea/database 中。请注意，Apex 项目中的一个简单 PLSQL 代码就足以完成我在这里所做的事情，但前提是 CLOB 数据小于 32k 字节。由于 apex 中 plsql 的 32k 限制（以及使用 sql 时的 4k 限制），我正在使用此功能。

```
function clob_set(){  
        var clob_ob = new apex.ajax.clob(  
            function(){  
                var rs = p.readyState  
                if(rs == 1||rs == 2||rs == 3){  
                    $x_Show('AjaxLoading');  
                }else if(rs == 4){  
                    $s('P5075_RESPONSETEXT',p.responseText);  
                    $x_Hide('AjaxLoading');  
                }else{return false;}  
            }  
        );  

        if(!$v_IsEmpty('P5075_STYLESHEET')){clob_ob._set($v('P5075_STYLESHEET'))};  
    }  

    function clob_get(){  
        var clob_ob = new apex.ajax.clob(  
            function(){  
                var rs = p.readyState  
                if(rs == 1||rs == 2||rs == 3){  
                    $x_Show('AjaxLoading');  
                }else if(rs == 4){  
                    $s('P5075_STYLESHEET',p.responseText);  
                    $x_Hide('AjaxLoading');  
                }else{return false;}  
            }  
        );  
        clob_ob._get();  
    } 
```

我将“页面 HTML 正文属性”下的函数之一称为**onload = “javascript:clob_get();”**

为此，我在标头处理之后有一个 PLSQL。

```
declare
l_clob clob:= empty_clob();

begin

if apex_collection.collection_exists(p_collection_name=>'CLOB_CONTENT') then
apex_collection.delete_collection(p_collection_name=>'CLOB_CONTENT');
end if;

apex_collection.create_or_truncate_collection(p_collection_name=>'CLOB_CONTENT');
dbms_lob.createtemporary( l_clob, false, dbms_lob.SESSION );

SELECT xslt
INTO l_clob
FROM schematransform
WHERE namn = 'f';

apex_collection.add_member(p_collection_name => 'CLOB_CONTENT',p_clob001 => l_clob);
end; 
```

这工作得很好。现在，我有一个 plsql 进程，它将在 CLOB 和非 CLOB 字段中输入的详细信息保存到数据库中。但是一旦页面提交，我就会收到“HTTP Bad Request”。

谁能解释为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:48:42.960

这是 apex.ajax.clob 的代码，取自 apex_4_1.js：

```
/**
 * @namespace = apex.ajax
 */
apex.ajax = {
    /*clob*/
    clob : function (pReturn){
        var that = this;
        this.ajax = new htmldb_Get(null,$x('pFlowId').value,'APXWGT',0);
        this.ajax.addParam('p_widget_name','apex_utility');
        this.ajax.addParam('x04','CLOB_CONTENT');
        this._get = _get;
        this._set = _set;
        this._return = !!pReturn?pReturn:_return;
        return;
        function _get(pValue){
            that.ajax.addParam('x05','GET');
            that.ajax.GetAsync(that._return);
        }
        function _set(pValue){
            that.ajax.addParam('x05','SET');
            that.ajax.AddArrayClob(pValue,1);
            that.ajax.GetAsync(that._return);
        }
        function _return(){
        if(p.readyState == 1){
            }else if(p.readyState == 2){
            }else if(p.readyState == 3){
            }else if(p.readyState == 4){
              return p;
            }else{return false;}
        }
    }, 
```

因此，clob 设置和获取是真正异步的。您发布的代码提供了一个在请求完成时调用的处理函数（在 htmldb_get 中完成）。我认为这是一个丑陋的解决方法，但没关系。我们需要操作这个函数代码以使我们的提交工作。由于集合是异步的，我们不能确定在集合发生之前页面不会被提交。为防止这种情况，请修改您的 clob_set 代码：

```
function clob_set(pSubmit){
   var clob_ob = new apex.ajax.clob(
      function(){
         var rs = p.readyState
         if(rs == 1||rs == 2||rs == 3){
            $x_Show('AjaxLoading');
         }else if(rs == 4){
             //here the clob has actually been saved, and
             // the ajax call finished
            $s('P5075_RESPONSETEXT',p.responseText);
            $x_Hide('AjaxLoading');

            //pSubmit is a new param
            //use it to check if set has been called for
            //a page submit or not
            if(pSubmit){
               //disable the clob field: it should not be
               //substituted to the session state!!
               $('#P5075_STYLESHEET').prop("disabled", true);
               //actually submit the page. This will submit
               //all fields to session except the disabled ones
               apex.submit('SUBMIT');
            };
         }else{
            return false;
         };
      });

   if(!$v_IsEmpty('P5075_STYLESHEET')){
      clob_ob._set($v('P5075_STYLESHEET'));
   };
}; 
```

更改您的提交按钮，并让它的动作由动态动作定义。您需要这样做以防止通过默认过程将您的 clob 字段替换为会话。创建一个执行 javascript 的动态操作，使用 pSubmit 集调用 clob_set：

```
clob_set(true); 
```

请查看[apex.submit api 描述](http://docs.oracle.com/cd/E23903_01/doc/doc.41/e21676/javascript_api.htm#CHDBEACA)。还要了解按钮的工作原理：它提交页面并将请求设置为该按钮的名称（或其他请求值，如果明确定义）。

例如，一个按钮可以命名为“APPLY_CHANGES”并具有标签“更改”。如果您使用例如内置的行处理，这很重要。请求值将确定将调用哪个 SQL 操作，您可以在插入/更新/删除复选框旁边的流程详细信息中查看可能的值。

在这里，一个最有用的漂亮流程图：

![clob_set 流程图](../Images/01d098c4bf226c9e090c752a341cc657.png)

# mercurial - TortoiseHG - 重命名文件夹 --> 新文件夹

> ID：11397459
> 
> 赞同：3
> 
> 时间：2012-07-09T14:45:58.190
> 
> 标签：mercurial, tortoisehg

我在 Kiln 中创建了一个分支，并一直使用它在一个名为`contactsmanager`.

但是现在，在计划更改之后，我不想将我的更改合并回主干，而是将联系人管理器文件夹**重命名**为联系人。

*我希望 Tortoise不*将旧的 contactsmanager 文件夹视为已删除或重命名，而只是简单地**丢失**.

我想从后备箱拉下并获取旧的联系人管理器，并将它与新（重命名）的联系人文件夹并排放置，并且当它看起来正确时，将此结构推到后备箱（联系人管理器和联系人并排。 )

问题是，TortoiseHG 似乎确定旧的contactsmanager 文件夹已被删除，如屏幕截图所示。我尝试突出显示所有旧的联系人管理器内容，右键单击并选择“忘记”，但无济于事。

有没有办法在 Tortoise 中实现这一点？解决方法相当明确：在主干上复制旧的联系人管理器文件夹，将我的更改推送过来，在主干上重命名，手动恢复旧的联系人管理器，然后一切顺利。

不过，我希望有一个直接的方法。

![在此处输入图像描述](../Images/b97fbf0c5f787f3f16425b53d9534ca8.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T12:11:34.443

让我看看我是否可以清除有关 Mercurial 中不同文件状态之间转换的一些事情：

*   **清洁 → 已移除：**使用`hg remove`、`hg rename`或`hg forget`。

*   **已移除 → 清洁：**使用`hg revert`

因此，重命名、删除和忘记文件都会导致相同的结果：该文件计划在下一次提交中删除。不同的命令在工作副本中当然会有不同的效果：

*   `hg remove`: 文件已从您的工作副本中删除

*   `hg rename`: 文件已删除，但现在可以在另一个名称下找到

*   `hg forget`: 文件还在工作副本中

该`hg forget`命令在任何情况下都不会使文件恢复活力，这就是`hg revert`目的。

因此，如果我对您的理解正确，那么您希望`hg revert`整个`contactsmanager`文件夹将文件恢复到干净状态（这可能是您所说的“我想从后备箱拉下并获取旧的联系人管理器”的意思）。Mercurial 将不知道文件夹中的`contacts`文件——您可以照常添加它们。

如果你这样做，那么文件`contactsmanager`和文件夹之间将不会有任何“链接”，`contacts`并且文件夹将按照你的要求并排存在。缺少的链接意味着您不会被要求将一个文件夹中所做的更改合并到另一个文件夹中。如果你确实想要这个，那么你可以`hg copy`将`contactsmanager`文件夹添加到`contents`. 一个副本将使 Mercurial 中所做的更改合并`contactsmanager`到`contacts`. 有关更多信息，请参阅[我的回答。`hg copy`](https://stackoverflow.com/a/8531968/110204)

# linux - 飞思卡尔 LTIB 源代码控制，通过排除二进制文件和目标文件，使用“diff”和“patch”命令进行补丁文件

> ID：11397461
> 
> 赞同：0
> 
> 时间：2012-07-09T14:46:17.893
> 
> 标签：linux, linux-kernel, diff, patch, embedded-linux

我想知道是否有任何方法可以使用“diff”命令为 Free scale“LTIB”生成补丁文件（通过排除编译时生成的二进制文件、目标文件和其他临时文件（没有“./ltib clean /"distclean")) 并使用“patch”命令重新应用它们。

我可以生成补丁文件，默认情况下包含所有临时文件。

我提前感谢您的帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:54:14.840

这取决于您要制作的补丁。在 LTIB 环境中，您可能希望使用不同的策略更改几种类型的内容：

*   $LTIB_DIR/merge 中的文件：可以使用常规版本控制技术处理这些文件
*   $LTIB_DIR/config（以及 $LTIB_DIR/.config 和 $LTIB_DIR/.ltibrc）中的配置等：这些也可以通过常规版本控制技术来处理
*   对软件包的修改（在 $LTIB_DIR/rpm/BUILD 下）：LTIB 本身可以为您准备一个补丁文件并编辑活动的 .spec 文件（位于 $LTIB_DIR/dist 或 $LTIB_DIR/config/platform 下）；为此，您可以使用 ltib 制作补丁：

    ```
    cd $LTIB_DIR
    ./ltib -p packagename -m patchmerge 
    ```

如果您查看 ltib 脚本本身中的 patchmerge 代码，您会发现它大致执行以下操作：

```
mv $LTIB_DIR/rpm/BUILD/packagename $LTIB_DIR/rpm/BUILD/packagename.modified
cd $LTIB_DIR/rpm/BUILD/packagename.modified
make distclean
cd -
rpmbuild -bp ... # go through the original prep stage
diff --exclude CVS --exclude .git -uNr $LTIB_DIR/rpm/BUILD/packagename $LTIB_DIR/rpm/BUILD/packagename.modified > patchfile 
```

然后将补丁文件添加到规范中并告诉您有关它的信息。

我不知道您要避免使用哪个 distclean（全局或包），但是如果您可以在包目录中执行“make distclean”（而不是执行`./ltib -m distclean`，这将删除您的 rootfs），那么这个可能对你没问题。

否则，您可以使用 diff （或`git diff`）制作您自己的补丁文件。

您可以制作一个`diff`类似的排除文件`.gitignore`并将其提供给 diff 以便对补丁中的内容更具选择性（阅读`diff`手册页）：

```
cd $LTIB_DIR
vi diffignore # add file patterns to this file
mv $LTIB_DIR/rpm/BUILD/packagename $LTIB_DIR/rpm/BUILD/packagename.modified
./ltib -p packagename -m prep
diff --exclude CVS --exclude .git -X diffignore -uNr $LTIB_DIR/rpm/BUILD/packagename $LTIB_DIR/rpm/BUILD/packagename.modified > patchfile 
```

# javascript - 将元素定位在特定高度

> ID：11397464
> 
> 赞同：0
> 
> 时间：2012-07-09T14:46:24.250
> 
> 标签：javascript, jquery, css

在下面的小提琴中，文本“标题”（红色）看起来略高于问题文本的其余部分。如何降低文本的高度？

我试过使用“top -30px”吗？

[http://jsfiddle.net/25LjE/44/](http://jsfiddle.net/25LjE/44/)

```
.pds-pd-link {
display: none !important;
}
.pds-box {
    width: 220px !important;
}
.pds-input-label{
    width: auto! important;
}
.PDS_Poll{
    margin-bottom:15px;
}

<script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/6352993.js"></script>
<noscript><a href="http://polldaddy.com/poll/6352993/">This is very long test question to test how polldaddy handles questions that exceed that normal length............ yes a very long question indeed..............</a></noscript>

$(document).ready(function() {

    $('.pds-question-inner').prepend('<center><span style="color:red;font-weight:bold;font-size: 10pt;float:left"><u>Header</u></span></center>');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:54:25.420

首先，不要浮动标题`span`跨度。保持内联。所以从你的 js 中删除该声明。

其次，问题是`.pds-question-top`元素上的 padding-top 将段落文本向下推。尝试将其设置为零，一切看起来都很好。反正这更干净。我通常更喜欢在 p 元素上使用底部填充创建所有段落间距，并且没有顶部填充，这样段落将始终从我想要的位置开始。

看：

[http://jsfiddle.net/25LjE/56/](http://jsfiddle.net/25LjE/56/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:57:21.763

尝试`line-height`：或`vertical-align`

# iphone - cocos2d评分系统有一些问题

> ID：11397465
> 
> 赞同：1
> 
> 时间：2012-07-09T14:46:33.410
> 
> 标签：iphone, xcode, cocos2d-iphone

我正在尝试在 cocs2d 中制作评分系统，但我在评分中遇到了一些问题，我已经在 .m 中编写了这些

```
if (CGRectContainsPoint(bug.boundingBox, location)) {
        [self removeChild:bug cleanup: YES];
        score += 1;
        NSLog(@"%i", score);
    } 
```

我已经在 .h 中声明了分数

```
@interface GameScene : CCLayer {
        NSMutableArray *bugs;
        int score; 
```

}

但是如果我触摸精灵，我会得到 1 分并且精灵会被移除，但是当我触摸精灵所在的地方时，每次我触摸那里我都会得到 +1 分。

我希望你明白..谢谢,,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:52:45.020

我怀疑，从场景图中删除后，您需要从错误数组中删除该错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:41:25.303

您的源代码较少。但是，您可以使用将在接口中声明的整数变量。在实现中将整数变量设置为 0（在 init 方法中），当您创建新的错误时，将整数值再增加一并将错误精灵标签设置为整数值，如下所示：

```
// Interface
@interface yourScene:CCLayer {
    int bugsCount; // add new variable for counting current bugs
}

// implementation
@implementation
-(id) init {   

    if( (self=[super init])) {

        // Your code in init

        // integer value for counting current bugs
        bugsCount = 0;

    }

    return self;
}

-(void) addNewBug {

    // your code of adding bugs
    CCSprite *bug = [CCSprite spriteWithFile:@"bug.png"];
    bugsCount++;
    bug.tag = bugsCount; // Your bug sprite tag should be equal current bugsCount value
    bug.position = ccp(x,y);
    [self addChild:bug];

} 
```

在 ccTouchEnded 方法中，只需执行 for 循环来检测选择了哪些错误，如下所示：

```
-(void) ccTouchesEnded:(NSSet*)touches withEvent:(id)event {

    UITouch *touch = [touches anyObject];
    CGPoint location = [touch locationInView:[touch view]]; 
    location = [[CCDirector sharedDirector] convertToGL:location];
    location = [self convertToNodeSpace:location];

    // Detecting bug by touch
    for (i=1; i <= bugsCount; i++) {

        // get bug sprite by tag (from bugsCount idea)
        CCNode *bug = [self getChuldByTag:i];
        if (CGRectContainsPoint(bug.boundingBox, location)) {

            // add new score (now this will work)
            score += 1;
            NSLog(@"%i", score);

            // remove bug from scene
            [self removeChildByTag:1 cleanup:YES];

            // decrease number of bugs
            bugsCount--;
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T14:59:42.390

这是一种应该适合您的简单方法（当然可能更有效，但我决定保持简单）

创建一个名为 Bug 的类，其中包含一些属性，其中例如一个名为 'killed' 的 BOOL，当一个 bug 被杀死时，你将其设置为 true。让 bug 引用 sprite，或扩展 sprite 类，以便您知道它在哪里以及是否被触摸。

现在，当你按下一个 bug 时，一定要检查它是否被杀死，如果是，不要为它打分。

将您所有的错误对象添加到您的错误数组中，而不是您的精灵。您可以通过错误对象访问精灵。当您的错误被杀死时，重新使用它们以节省内存（即将它们从屏幕上移开并让它们稍后再次出现，再次将“killed”属性设置为false）

快乐的寻虫！

# wpf - ListBox ItemsSource

> ID：11397477
> 
> 赞同：-3
> 
> 时间：2012-07-09T14:47:18.353
> 
> 标签：wpf, silverlight, windows-phone-7

我正在做我的第一个 Windows Phone 7 应用程序。那里似乎不支持 DataGrid。我正在努力寻找工作。

我确实有这样的列表框：

```
 <ListBox x:Name="myListBox" Grid.Row="3">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <Image Name="assetImage" Grid.Column="0" />
                    <TextBlock Name="assetId" Grid.Column="1" />
                    <TextBlock Name="market" Grid.Column="2" />
                </Grid>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

如何为此类列表设置 ItemsSource？

假设我有`List<MyObject> { string uri; string assetid; string market;}`

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T15:21:17.077

这样做（在你的元素中添加绑定）：

```
<ListBox x:Name="myListBox" Grid.Row="3">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <Image Source="{Binding uri}" Name="assetImage" Grid.Column="0" />
                    <TextBlock Text="{Binding assetid}"  Name="assetId" Grid.Column="1" />
                    <TextBlock Text="{Binding market}" Name="market" Grid.Column="2" />
                </Grid>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

现在在要创建绑定的位置添加以下代码：

```
myListBox.ItemsSource=myObjects; 
```

我假设这`MyObject`是一个具有和作为属性的类`uri`，并且是一个具有类型项目的类。`assetid``market``myObjects``List<>``MyObject`

# mono - MonoGame 真的是跨平台的吗？

> ID：11397480
> 
> 赞同：8
> 
> 时间：2012-07-09T14:47:26.210
> 
> 标签：mono, xna

当我下载 MonoGame（我将使用它代替 XNA，因为我在 Mac 上）并解压缩它时，所有 MonoDevelop 解决方案文件都被命名为`MonoGame.Framework.[PLATFORM NAME].sln`，`[PLATFORM NAME]`并且是操作系统的名称。[并且教程](https://github.com/mono/MonoGame/wiki/Tutorials)中的代码对于每个平台都是不同的，因此似乎 MonoGame 应用程序要在不同的机器上运行，它必须被移植。它是否正确？如果是这样，还有哪些其他版本的 XNA 用于 Mono，最好是在 Xbox 360 上工作？我见过 MonoXNA，但在这篇文章中使用它似乎还不够成熟。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-09T15:38:33.603

MonoGame 通过在多个平台上提供 XNA API 使*您的代码*跨平台。（但它不会使您编译的*二进制文件*像 Flash 或 Java 那样跨平台。）

MonoGame*本身*不是跨平台的，因为每个平台都有一个版本，因为每个版本都包含为该平台实现 XNA API 所需的大量特定于平台的代码。

（虽然实际上大量的 MonoGame 代码*是*跨平台的，并且在不同的 MonoGame 版本之间共享——因为反过来，它是建立在 Mono、OpenGL 和 OpenAL 等层上的，这些层与 MonoGame 一样，提供具有不同底层实现的一致 API平台上。）

这与微软官方的 XNA 实现完全相同。XNA 库有 3 个不同版本（Windows、Xbox 360 和 Windows Phone）。它们都提供 XNA API。您可以为任何这些平台构建使用 XNA API 的代码。

* * *

MonoXNA 已经过时了，而且它的大部分有用代码已经进入了 MonoGame。

据我所知，目前没有其他使用 Mono 在 OSX 上运行的 XNA 实现。有[ExEn](http://andrewrussell.net/exen/)，它使用 Mono - 但仅适用于 iOS 和 Android。

在 Xbox 360 上使用 XNA 的唯一选择是使用 Microsoft 的版本。但这并不妨碍您也针对 MonoGame 编译您的代码。

# c# - 为什么我无法确定这个 Point 值是多少？

> ID：11397481
> 
> 赞同：1
> 
> 时间：2012-07-09T14:47:27.573
> 
> 标签：c#, windows-phone-7, silverlight-4.0

在 spc 下面的存根中是 StylusPointCollection，i = 3（或任何更大的值）和 spc.Count = 1024

```
for (Int32 i = 0, i < spc.Count; i++)
{
    Debug.WriteLine(spc[i].X.ToString() + " : " + spc[i].Y.ToString());
    ... 
```

错误消息信息是：

System.Windows.dll 中出现“System.ArgumentOutOfRangeException”类型的第一次机会异常指定的参数超出了有效值的范围。参数名称：X 类型为“System.NullReferenceException”的第一次机会异常发生在 ...

我找不到任何分析 X 的方法来查看它是什么以及出了什么问题。我已经尝试过 IsNaN 和 IsInfinity 之类的方法，但抛出了同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:00:00.543

在我看来，在 i 的特定值处实际上没有 X 的值。如果您在 Debug 行上附加调试器和中断，您应该查看 spc 集合并检查一些失败的索引，然后查看您的输入。

# java - JNA调用的C++方法

> ID：11397483
> 
> 赞同：0
> 
> 时间：2012-07-09T14:47:31.740
> 
> 标签：java, jna

如何转换 C++ 方法：

```
public (void) BinToSlices (BSTR Bin,LPSAFEARRAY FAR *Slices) 
```

在 JNA 方法中？我知道在 VB6 中是`BinToSlices(ByVal Bin as String, ByRef Slices as Integer())`

我对C++一无所知

谢谢

# c++ - 可变参数模板，没有匹配的函数调用

> ID：11397484
> 
> 赞同：1
> 
> 时间：2012-07-09T14:47:34.007
> 
> 标签：c++, templates, c++11, variadic-templates

我正在编写 的实现`zip`，但遇到了一些问题。这是一个最小的测试用例：

```
#include <iostream>
#include <deque>
#include <tuple>
#include <string>
#include <limits>

template <template <typename...> class Container, typename... Types>
Container<std::tuple<Types...>> zip(Container<Types> const&... args) {
  unsigned len = commonLength(args...);
  Container<std::tuple<Types...>> res;
  std::tuple<Types...> item;

  for (unsigned i=0; i<len; i++) {
    item = getTupleFrom(i, args...);
    res.push_back(item);
  }

  return res;
}

template <class ContainerA, class... Containers>
unsigned commonLength(ContainerA first, Containers... rest, unsigned len=std::numeric_limits<unsigned>::max()) {
  unsigned firstLen = first.size();
  if (len > firstLen) {
    len = firstLen;
  }
  return commonLength(rest..., len);
}

template <class ContainerA>
unsigned commonLength(ContainerA first, unsigned len=std::numeric_limits<unsigned>::max()) {
  unsigned firstLen = first.size();
  if (len > firstLen) {
    len = firstLen;
  }
  return len;
}

template <template <typename...> class Container, typename TypeA, typename... Types>
std::tuple<TypeA, Types...> getTupleFrom(unsigned index, Container<TypeA> const& first, Container<Types> const&... rest) {
  return std::tuple_cat(std::tuple<TypeA>(first[index]), getTupleFrom(index, rest...));
}

template <template <typename...> class Container, typename TypeA>
std::tuple<TypeA> getTupleFrom(unsigned index, Container<TypeA> const& first) {
  return std::tuple<TypeA>(first[index]);
}

int main() {

  std::deque<int> test1 = {1, 2, 3, 4};
  std::deque<std::string> test2 = {"hihi", "jump", "queue"};
  std::deque<float> test3 = {0.2, 8.3, 7, 123, 2.3};
  for (auto i : zip(test1, test2, test3)) {
    std::cout << std::get<0>(i) << std::get<1>(i) << std::get<2>(i) << std::endl;
  }
  //expected output:
  //1hihi0.2
  //2jump8.3
  //3queue7
  return 0;
} 
```

编译时出现以下错误：

```
error: no matching function for call to ‘commonLength(const Star::List<int>&, const Star::List<std::basic_string<char> >&, const Star::List<float>&)’
note: candidates are:
note: template<class ContainerA, class ... Containers> unsigned int Star::commonLength(ContainerA, Containers ..., unsigned int)
note: template<class ContainerA> unsigned int Star::commonLength(ContainerA, unsigned int) 
```

我假设我指定我的模板参数错误或类似的东西。我还尝试重新构建并完全消除该功能，但随后我遇到了同样的错误`getTupleFrom`。

谁能给我解释一下我为什么笨？因为我只是不知道我做错了什么。:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T15:08:00.973

好吧，这行得通：

```
#include <iostream>
#include <deque>
#include <tuple>
#include <string>
#include <type_traits>
#include <algorithm>
#include <limits>

template <class ContainerA>
unsigned commonLength(unsigned len, const ContainerA &first) {
  unsigned firstLen = first.size();
  if (len > firstLen) {
    len = firstLen;
  }
  return len;
}

template <class ContainerA, class... Containers>
unsigned commonLength(unsigned len, const ContainerA &first, const Containers&... rest) {
  unsigned firstLen = first.size();
  if (len > firstLen) {
    len = firstLen;
  }
  return commonLength(len, rest...);
}

template <template <typename...> class Container, typename TypeA>
std::tuple<TypeA> getTupleFrom(unsigned index, Container<TypeA> const& first) {
  return std::tuple<TypeA>(first[index]);
}

template <template <typename...> class Container, typename TypeA, typename... Types>
std::tuple<TypeA, Types...> getTupleFrom(unsigned index, Container<TypeA> const& first, Container<Types> const&... rest) {
  return std::tuple_cat(std::tuple<TypeA>(first[index]), getTupleFrom(index, rest...));
}

template <template <typename...> class Container, typename... Types>
Container<std::tuple<Types...>> zip(Container<Types> const&... args) {
  unsigned len = commonLength(std::numeric_limits<unsigned>::max(), args...);
  Container<std::tuple<Types...>> res;
  std::tuple<Types...> item;

  for (unsigned i=0; i<len; i++) {
    item = getTupleFrom(i, args...);
    res.push_back(item);
  }

  return res;
}

int main() {

  std::deque<int> test1 = {1, 2, 3, 4};
  std::deque<std::string> test2 = {"hihi", "jump", "queue"};
  std::deque<float> test3 = {0.2, 8.3, 7, 123, 2.3};
  for (auto i : zip(test1, test2, test3)) {
    std::cout << std::get<0>(i) << std::get<1>(i) << std::get<2>(i) << std::endl;
  }
  //expected output:
  //1hihi0.2
  //2jump8.3
  //3queue7
} 
```

它输出的正是您所期望的。问题是：

*   您没有在, while的 const 引用的参数中使用`const&`容器。`commonLength``zip`
*   `commonLength`无法推导出无符号参数，所以我把它移到了开头
*   您以错误的顺序声明/定义了函数（A 需要 B，但 A 是在 B 之前定义的），所以我重新排序了它们。

显然，clang 3.1 无法推导出 中的模板参数`zip`，但 g++ 4.6 可以很好地得到它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:50:35.773

一步一步挑选。

您缺少标题：

```
#include <limits> 
```

您有未声明的标识符：

```
template <template <typename...> class Container, typename TypeA, typename... Types>
std::tuple<TypeA, Types...> getTupleFrom(unsigned index, Container<TypeA> const& first, Container<Types> const&... rest) {
  return std::tuple_cat(std::tuple<TypeA>(first[index]), getTupleFrom(index, rest...), end);
} 
```

在哪里`end`声明？

你不一致：

```
Container<std::tuple<Types...>> zip(Container<Types> const&... args) {
  unsigned len = commonLength(args...);
  Container<std::tuple<Types...>> res; 
```

是`Container<std::tuple<Types...>>`还是`Container<Types>`？或者这正是你的意思？您的代码有点复杂，仅供快速查看。

然后，您只有`getTupleFrom`的非零计数版本`Container<TypeA>`，

```
template <template <typename...> class Container, typename TypeA, typename... Types>
std::tuple<TypeA, Types...> getTupleFrom(unsigned index, Container<TypeA> const& first, Container<Types> const&... rest) {
  return std::tuple_cat(std::tuple<TypeA>(first[index]), getTupleFrom(index, rest...), end);
}

template <template <typename...> class Container, typename TypeA>
std::tuple<TypeA> getTupleFrom(unsigned index, Container<TypeA> const& first) {
  return std::tuple<TypeA>(first[index]);
} 
```

这就是为什么有错误

```
error: no matching function for call to ‘getTupleFrom(unsigned int&)’ 
```

这表明您以某种方式达到了参数列表为空的点（无符号整数参数除外）。我想你需要防止这种情况。

# javascript - 当链接中引用视频时，是否可以在 iPad 上以全屏模式打开 .mp4？

> ID：11397486
> 
> 赞同：2
> 
> 时间：2012-07-09T14:47:37.183
> 
> 标签：javascript, ipad, html, video

基本上我的`<a href="../video/link-to-video.mp4">Play</a>`移动网络应用程序中有一个链接。我希望在 iPad 上以全屏模式打开此视频，但不确定这是否可行？目前视频填满了可用的屏幕空间，但我实际上必须物理单击全屏。任何建议都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:58:44.570

您可以通过实现 UIWebViewDelegate 的`webView:shouldStartLoadWithRequest:`方法来拦截请求。如果您截获 URL 以 结尾的请求`.mp4`，您可以返回`NO`并生成一个 MPMoviePlayerViewController 并播放其中的链接。否则，您将返回`YES`以允许在 Web 视图中进行任何其他形式的导航。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:56:27.790

您可以使用该`<video>`元素并将其大小设置为宽度和高度的 100%。我还没有测试过。

[http://www.w3schools.com/html5/tag_video.asp](http://www.w3schools.com/html5/tag_video.asp)

# c# - 需要了解 C# 部分，我是否遗漏了一些明显的东西？

> ID：11397487
> 
> 赞同：0
> 
> 时间：2012-07-09T14:47:37.720
> 
> 标签：c#, .net, constructor, design-patterns

遍历下面的 C# 代码（第 1 部分） - 为清楚起见进行了简化，它还有实例方法、更多成员等。我是否在这里遗漏了一些非常聪明的编程模式，或者它可以轻松地简化为第 2 部分？Address() 类型非常简单，实际上更像是一个数据传输对象。

**第 1 部分：**

```
public class MyStuff
{
    private IAddress _address;

    public MyStuff()
    {
            SetAddress(_address = new Address());
    }

    private void SetAddress(IAddress addr)
    {
        _address = addr;
    }
} 
```

**第 2 部分：**

```
public class MyStuff
{
    private IAddress _address = new Address();

    public MyStuff()
    {
        //The constructor is probably redundant too
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:53:17.657

你还没有澄清`_addressDao`，所以我将涵盖这两个基础：

* * *

[以下假设`_addressDao`存在某处并需要保留。]

您无法将其压缩为第 2 部分，因为`_addressDao`. 第 1 部分`_address`在方法调用期间设置 inline 然后还设置`_addressDao`，您的第二部分省略`_addressDao`，所以*不*等价。

* * *

[以下假设这`_addressDao`是一个错字和/或不再需要保留。]

`_addressDao`如果我们假设不是问题，那么第 2 部分可以是第 1 部分的有效替代方案。对于您的情况，这可能不是最好的方法，但是您并没有要求这样做，因此我不会对此进行诽谤。

* * *

内联类成员初始化，如果内存服务，编译成相同的东西，就好像你直接在构造函数中初始化它一样。最终结果是相同的行为，只是看起来不同的代码。

在第 2 部分中，您也正确地认为不再需要公共无参数构造函数，在没有任何构造函数的情况下，默认情况下会添加它。

* * *

关于这里使用的潜在设计模式，它可能是 IoC 或 DI 的*尝试*——但似乎在这两种情况下都*没有*成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:54:58.540

理想情况下，他们会做同样的事情。Piece 2 在运行时实际发生的是 _address 的初始化在 MyStuff() 构造函数中运行，在您的代码或任何 this()/base() 调用之前。

这里有很好的信息： [C# 成员变量初始化；最佳实践？](https://stackoverflow.com/questions/298183/c-sharp-member-variable-initialization-best-practice)

我认为 Piece 2 更容易阅读，但这纯粹是个人喜好。

话虽如此，您的第一部分是分配 _address 两次。一次调用函数，一次调用函数本身。

# jquery - 悬停函数中的 .unbind() 和 .bind() 函数

> ID：11397495
> 
> 赞同：0
> 
> 时间：2012-07-09T14:48:07.043
> 
> 标签：jquery, bind, unbind

我正在尝试制作一个悬停功能，它在悬停时会取消绑定先前绑定的功能。

但我认为我不明白 jquery 网站试图解释什么。

请在这个[jsfiddle](http://jsfiddle.net/motocomdigital/S9uVh/)中查看我的尝试。[http://jsfiddle.net/motocomdigital/S9uVh/](http://jsfiddle.net/motocomdigital/S9uVh/)

这是我的绑定函数，运行良好......

```
$("h1.trunc").bind().shorten({
    width: 300,
    tail: '...',
    tooltip: false 
}); 
```

但是当我的元素悬停时，我试图 .unbind() 它，但是在我的第二次悬停交替时重新绑定它......

```
$('#element').hover(
    function () {

        $(this).find("h1.trunc").unbind();

        $(this).animate({
            height : '100px'    
        }, 200 );       

    }, 
    function () {

        $(this).find("h1.trunc").bind().shorten({
            width: 300,
            tail: '...',
            tooltip: false
        });

        $(this).animate({
            height : '20px'    
        }, 200 );

    }
);​ 
```

有人可以帮我解决这个问题吗？还有一种方法不必在我的悬停函数中重新编写整个“h1.trunc”函数。

请在[此处查看工作 jsfiddle](http://jsfiddle.net/motocomdigital/S9uVh/)。提前致谢。

[http://jsfiddle.net/motocomdigital/S9uVh/](http://jsfiddle.net/motocomdigital/S9uVh/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T15:00:40.523

好吧，你似乎误解了一些事情。首先，`.bind()`独自一人（即没有参数）什么都不做。其次：这个`.shorten`插件似乎改变了内部 HTML，没有`binding`它。而且它不允许返回到以前的状态。所以我建议你应该这样做：

**HTML**

```
<h1 class="trunc" data-text="This is a truncated title to untruncate when hovered using unbind tricks"></h1> 
```

请注意，我将所有文本都放在`data-text`属性中。现在在您的处理程序中，您可以这样做：

**JavaScript**

```
var text = $("h1.trunc").attr("data-text");

$('#element').hover(
    function () {

        $(this).find("h1.trunc").text(text);

        $(this).animate({
            height : '100px'    
        }, 200 );       

    }, 
    function () {

        $(this).find("h1.trunc").text(text).shorten({
            width: 300,
            tail: '...',
            tooltip: false
        });

        $(this).animate({
            height : '20px'    
        }, 200 );
    }
);​ 
```

签[出这个 jsFiddle](http://jsfiddle.net/S9uVh/24/)。但是请注意，这个`.shorten`插件似乎设置了`nowrap`css，这使它看起来很糟糕。您可以更改所有必要的样式，但编写自己的`.shorten`函数可能更容易。:]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T15:01:55.623

如果您查看`shorten`实际在做什么，它正在删除文本，并且此方法没有相反的方法，例如`unshorten`.

如果我理解正确，您希望在悬停时显示文本，然后在悬停时再次截断它。

我会摆脱`shorten`插件，只使用css。看看这个小小提琴：http: [//jsfiddle.net/S9uVh/22/](http://jsfiddle.net/S9uVh/22/)

基本上我只是删除一个类，然后再次添加它。`<h1>`标签短路使用;

```
text-overflow: ellipsis;
overflow: hidden;    
white-space: nowrap; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T15:10:39.910

**工作演示：http:** [//jsfiddle.net/S9uVh/30/](http://jsfiddle.net/S9uVh/30/)

我存储了每个标题的原始文本，还存储了每个标题的缩短文本。在最近的 h1 的文本悬停时，`#element`将替换为原始文本。悬停时，其文本设置回缩短的版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T15:00:49.753

你在做某事/它错了。

用法是

```
.bind( eventType [, eventData], handler(eventObject) ) 
```

和

```
.unbind( [eventType] [, handler(eventObject)] ) 
```

此外 * *bind ()*已被弃用，您应该使用*on()*和*off()*

# java - XSS：无法关注 302

> ID：11397496
> 
> 赞同：1
> 
> 时间：2012-07-09T14:48:10.830
> 
> 标签：java, database, oauth, xss

我正在尝试使用 Java 构建应用程序。该应用程序将访问数据库的处理程序，该处理程序动态运行查询并返回结果。正在使用 OAuth。该应用程序从我服务器上的一个端口运行，处理程序和数据库在另一个端口上。根据我对 OAuth 的基本理解，这是我认为这一切如何运作的图片：

![我的应用程序的可视化](../Images/5a40ef253bc9bef2453d279bf79dfdcb.png) 如果我对 OAuth 的理解不足，请告诉我。

起初，当我尝试运行该应用程序时，我收到了带有 HTTP 500 代码的 OAuth 错误。我认为这是因为它使用的 OAuth 密钥不在服务器上批准的 OAuth 密钥列表中，所以我进入我的代码并逐步调试，直到我能够获取密钥和秘密并添加它们到那个列表。之后，我不再收到 OAuth 错误，但现在当我运行应用程序时，我得到一个 302 标头返回，其位置设置为：

`server:port2/.../oauth-authorize?oauth_callback=[handler URL]?request_token_secret=[gibberish]&oauth_token=[gibberish]`

request_token_secret 和 oauth_token 与我添加到列表中的不同。

不幸的是，它实际上并没有遵循 302 重定向。我不确定为什么会发生这种情况，但我很有信心这与我的应用程序在两个不同的端口上运行有关，因此遇到了 XSS 问题。我不确定为什么会发生这种情况，也不知道如何解决它，因为我不能使用 CORS，而且它们必须是两个不同的端口。

编辑：我尝试做同样的事情，但完全使用不同的服务器而不是具有两个不同端口的同一服务器。我得到了完全相同的错误，除了重定向位置中的令牌和秘密不同。所以这绝对是一个跨站点脚本的事情。

1.  我对 OAuth 工作原理（如图所示）的理解是否正确？
2.  这里到底发生了什么？
3.  是什么导致了这个问题，我该如何解决？

# iphone - UIWebView 的自定义搜索

> ID：11397507
> 
> 赞同：1
> 
> 时间：2012-07-09T14:49:04.213
> 
> 标签：iphone, objective-c, uiwebview

我想使用 UIWebView 在 iPhone 中创建自定义搜索。

示例：将`{query}`下面一行中的内容替换为用户输入的内容。

网址： `http://stackoverflow.com/search?q={query}&submit=search`

**最终代码：**

```
[super viewDidLoad];
_webView.delegate = self;
NSString *queryString = _searchField.text;
NSString *request2 = [NSString stringWithFormat:@"http://stackoverflow.com/search?q=%@&submit=search", queryString];
NSURLRequest *requestURL = [NSURLRequest requestWithURL:[NSURL URLWithString:request2]];

[_webView setScalesPageToFit:YES];
[self.webView loadRequest:requestURL]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:54:02.107

像这样的东西？

```
NSString *request = [NSString stringWithFormat:@"http://stackoverflow.com/search?q=%@&submit=search", @"USER ENTRY"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:58:35.863

NSString 为您提供了`stringByReplacingOccurrencesOfString:withString:`可以使用的方法：

```
NSString *request = [urlString stringByReplacingOccurrencesOfString:@"{query}"
                                                        withString:queryString]; 
```

NSMutableString 有类似的方法来修改字符串。

**注意：** “Occurrences”中有两个 r——我最初拼错了。这是您得到的错误的根源——您必须正确拼写方法名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T15:30:35.563

在将字符串发送到您的 NSURLRequest“请求”之前，您似乎没有将其转换为 URL 对象类型。

尝试：

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:request2]]; 
```

您也可以尝试 luxsypher 的字符串创建答案，而不是替换。

此外，您可能会考虑打印出您的 NSString 网址，以确保它是您所期望的！

# silverlight - 如何绑定故事板？

> ID：11397513
> 
> 赞同：0
> 
> 时间：2012-07-09T14:49:20.123
> 
> 标签：silverlight, xaml, windows-7

我有两个故事板如下。

```
<Storyboard x:Name="ToRed">
        <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"                                          >
            <EasingColorKeyFrame KeyTime="0" Value="Transparent"/>
            <EasingColorKeyFrame KeyTime="0:0:0.3" Value="Red"/>
            <EasingColorKeyFrame KeyTime="0:0:0.9" Value="Transparent"/>
        </ColorAnimationUsingKeyFrames>
    </Storyboard>
    <Storyboard x:Name="ToGreen">
        <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"                                           >
            <EasingColorKeyFrame KeyTime="0" Value="Transparent"/>
            <EasingColorKeyFrame KeyTime="0:0:0.3" Value="#FF14A514"/>
            <EasingColorKeyFrame KeyTime="0:0:0.9" Value="Transparent"/>
        </ColorAnimationUsingKeyFrames>
    </Storyboard> 
```

我需要根据我的虚拟机中的属性将这些故事板应用到边框控件的背景属性。我可以将它们包装成一种样式并将其绑定到属性吗？没有情节提要我做这样的事情

```
<Border BorderBrush="AliceBlue">
<Border.Background>
    <SolidColorBrush Color="{Binding Path=Direction,
        Converter={StaticResource dirToColConvertor}}"/>
</Border.Background> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:10:43.773

要更改控件的状态，您必须调用

VisualStateManager.GoToSate(yourcontrol,statename,IsTransition)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:15:06.470

我通过结合**vinod8812**的答案和自定义附加属性来解决它（如此处所述：http: [//umairsaeed.com/2010/04/22/custom-attached-properties-in-silverlight](http://umairsaeed.com/2010/04/22/custom-attached-properties-in-silverlight)）。我将每个故事板更改为可视状态，并使用附加属性将其绑定到我的视图模型。

# iphone - 如何组合两个可变数组？

> ID：11397514
> 
> 赞同：2
> 
> 时间：2012-07-09T14:49:22.887
> 
> 标签：iphone, ios, ipad

我有一个 iPhone 应用程序，我试图在其中添加两个可变数组。

```
NSMutableArray *dataArray = [[NSMutableArray alloc] init];
NSMutableArray *dataArray1 = [[NSMutableArray alloc] init];
NSDictionary *news = [dict objectForKey:@"news"];
NSDictionary *deals = [dict objectForKey:@"deals"];
NSLog(@"%@", [news classForCoder]);
NSLog(@"%@", news);

for (NSDictionary *key in news)
{ 
    if ([key isKindOfClass:[NSDictionary class]])
    {
        [dataArray addObject:key];      
    }
}

for (NSDictionary *key in deals)
{
    if ([key isKindOfClass:[NSDictionary class]])
    {
        [dataArray1 addObject:key];        
    }
}

self.newssarray = dataArray;
[self.mTableView reloadData]; 
```

在这里，我想将两个数组“dataArray”和“dataArray2”添加到一个数组中（`self.newsarray`）。任何人都可以帮助我实现这一目标吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-09T14:51:48.253

NSMutable 数组具有 NSArray 的所有方法，包括一个通过向自身添加另一个数组来创建新数组的方法：

```
self.newsarray = [[dataArray arrayByAddingObjectsFromArray:dataArray1] mutableCopy]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T15:15:50.807

如果您的属性是 NSMutableArray ：

```
self.newsarray = [NSMutableArray arrayWithArray:[dataArray arrayByAddingObjectsFromArray:dataArray1]]; 
```

如果是 NSArray ：

```
self.newsarray = [dataArray arrayByAddingObjectsFromArray:dataArray1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-07T07:34:45.433

斯威夫特 5。简单又简单的方法

```
let arrayFind = NSMutableArray()
let arrayNotFind = NSMutableArray()

let arrPicOne = arrayFind as! [Any]
let arrPicTwo = arrayNotFind as! [Any]

let tempResult = arrPicOne + arrPicTwo

let arrResult = NSMutableArray(array: tempResult) 
```

# jquery - 停止滚动文档的jquery滚轮

> ID：11397518
> 
> 赞同：1
> 
> 时间：2012-07-09T14:49:37.163
> 
> 标签：jquery, scroll, mousewheel

**编辑：**

也许我正在接近这个错误 - 有没有人知道阻止页面用鼠标滚轮滚动的任何方法？这甚至可以禁用吗？

--

我有一个 div 容器，里面装满了较小的 div，当鼠标滚轮滚动时会产生动画。这不是一个带有溢出：隐藏的 div，它没有滚动区域 - 它只是一个简单的 jquery 动画（顺便说一句，动画效果很好）。

不幸的是，尽管我尽了最大的努力，当鼠标在容器 div 内时，我无法阻止整个页面滚动。

我正在使用 Brandon Aaron 的 jQuery 鼠标滚轮插件（这应该可以解决我的问题，但不幸的是它不是）。

这是我的javascript：

```
$('#containerDiv').mousewheel(function(event,delta,deltaX,deltaY){
    /* all of this is supposed to stop the page from scrolling...  but it doesnt*/
    event.bubbles=false;
    event.cancelBubble=true;
    if(event.preventDefault) event.preventDefault();
    if(event.stopPropagation) event.stopPropagation();
    if(event.stopImmediatePropagation) event.stopImmediatePropagation();
    $(document).blur();
    $(this).focus();

    /*this function just animates the divs inside the container divs*/
    animateDivs(delta);
}); 
```

我已经解决了这些问题：

[防止滚动父元素？](https://stackoverflow.com/questions/5802467/prevent-scrolling-of-parent-element)

[停止鼠标滚轮的持续效果](https://stackoverflow.com/questions/9159327/stop-mousewheels-continued-effect)

[用jquery停止滚动网页](https://stackoverflow.com/questions/10670487/stop-scrolling-of-webpage-with-jquery)

他们似乎都没有帮助。

谁能为这个问题提供更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T11:17:35.107

您可以使用 galambalazs 的[解决方案](https://stackoverflow.com/a/4770179/1102223)，正如[Guilherme Torres Castro 回答](https://stackoverflow.com/a/11460033/1102223)的那样。但它不会取消`scroll`事件。如果要取消滚动事件，则必须添加它。我的[小提琴解决方案](http://jsfiddle.net/kubedan/qaxDR/)灵感来自[ntownsend 的帖子](https://stackoverflow.com/a/2469710/1102223)。

此解决方案的问题是“闪烁”（隐藏/显示）滚动条。所以我将滚动添加到 window.onScroll 事件的实际滚动位置，我的[最终解决方案就在这里](http://jsfiddle.net/kubedan/qaxDR/3)

最终解决方案在我尝试滚动时出现问题，但 beforeScroll 事件不存在[https://stackoverflow.com/a/3352244/1102223](https://stackoverflow.com/a/3352244/1102223)

# java - “保护”是可接受的 Java 类名吗

> ID：11397519
> 
> 赞同：0
> 
> 时间：2012-07-09T14:49:39.283
> 
> 标签：java, coding-style, naming-conventions

我正在尽我所能写出可读性好的代码，但在我的工作中经常有疑问！

我正在创建一些代码来检查某些受保护软件的状态，并创建了一个类，该类具有检查正在使用的软件是否获得许可的方法（有一个单独的许可类）。

我通过创建 appProtect 对象将当前访问的类命名为“Protection”。类中的方法允许检查有关应用程序的许多内容，以确认它实际上已获得使用许可。

对于此类，“保护”是一个可接受的名称吗？

我在某处读到，如果您必须考虑方法、类、对象等的名称，那么您可能没有以面向对象的方式进行编码。在发这篇文章之前我花了很多时间思考这个问题，这让我怀疑这个名字的适用性！

在创建（和校对）这篇文章时，我开始严重怀疑我迄今为止的工作。我也在想我可能应该将对象重命名为 applicationProtection 而不是 appProtect （尽管我也愿意对此发表任何评论？）。我发布的内容不多，希望我能从其他人的观点/意见中学到一些东西，即使他们只是确认我“做错了”！

编辑：感谢您的回复，如果这不是一个“有效”的问题，我们深表歉意。我打算去 licenseChecker （感谢@millimoose）虽然另一个线程建议“保护者”这似乎更合适，因为该类的行为取决于是否有有效的许可证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:55:17.807

类是对象的蓝图。对象代表现实世界的概念。因此，当您引用该概念时，类的名称应该简单地反映您在现实世界中使用的名称。在您的情况下，保护（即使是有效且不一定是坏名）不是很具体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:53:57.660

大声朗读代码，看看它听起来如何。显然这听起来并不完美，但是如果您正在向非程序员的人阅读类、实例和方法的名称，那么它们对他们来说应该是合理的，并且几乎是在讲述一个故事。我认为[DSL](http://weblog.jamisbuck.org/2006/4/20/writing-domain-specific-languages)的模式在很多情况下都非常适合遵循。这在 Java 编程中并不常见，并且并不总是适合问题，但我认为它为类和方法名称提供了一个很好的指南。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T14:55:32.717

通常，您希望将类命名为与*角色*相关的名称，而不是*动作*。由于您将创建与其他对象交互的类的实例，很明显，您的应用程序中的每个对象在总体方案中都扮演着特定的角色。

我认为`LicenseChecker`@millimoose 建议的名称非常适合您的情况，因为它准确地反映了班级的*角色*。

# java - 何时在 Java 中使用 Wea k 和 Phantom 引用

> ID：11397522
> 
> 赞同：8
> 
> 时间：2012-07-09T14:49:45.100
> 
> 标签：java, weak-references, soft-references, phantom-reference

我阅读了很多文章，但我不明白 - 在实践中我需要在哪里使用 Wea​​k 和 Phantom 引用？据我了解，软引用 - 是缓存的不错选择。但是虚弱又虚幻，不知道什么时候用。请提供我们需要使用它们的实际任务的示例。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T15:20:03.890

您可以将弱引用用于缓存，就像您所说的软引用一样。

PhantomReferences 有什么好处？我只知道它们有两种严重的情况：首先，它们允许您准确确定对象何时从内存中删除。它们实际上是确定这一点的唯一方法。这通常不是那么有用，但在某些非常特定的情况下可能会派上用场，例如处理大图像：如果您确定图像应该被垃圾收集，您可以等到它实际上是在尝试加载下一个图像之前，因此减少了可怕的 OutOfMemoryError 的可能性。

其次，PhantomReferences 避免了终结的一个基本问题：f​​inalize() 方法可以通过创建对它们的新强引用来“复活”对象。那你说呢？好吧，问题是覆盖 finalize() 的对象现在必须在至少两个单独的垃圾收集周期中被确定为垃圾才能被收集。当第一个循环确定它是垃圾时，它就有资格进行终结。由于对象在最终确定期间“复活”的可能性（很小，但不幸的是真实的），垃圾收集器必须再次运行，然后才能实际删除对象。并且因为终结可能没有及时发生，所以在对象等待终结时可能发生了任意数量的垃圾回收周期。

有关更多详细信息，请参阅此页面： [http ://weblogs.java.net/blog/2006/05/04/understanding-weak-references](http://weblogs.java.net/blog/2006/05/04/understanding-weak-references)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T16:07:51.957

基本上，当您想将一些附加数据与源代码不受您控制的对象关联时，您将使用 Wea​​k ref。通过使用弱引用，您可以将元对象的生命周期与主要对象的生命周期结合起来。

phantom refs 的主要用例是实现您自己的终结器线程，而不会出现与默认机制相关的危险，默认机制会强制引用对终结代码可访问的假定不可访问对象。

软引用主要用于缓存，但是，正如在此处的另一篇文章中所说，它们在实践中会产生非常灾难性的影响，从而破坏了缓存的意义。一个主要的 GC（将清除您的 Soft refs）通常不会发生，直到您的应用程序性能的压力增加。这是您最需要缓存的时候，也是您最有可能丢失缓存的时候——一次全部丢失。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-09T15:21:08.627

这篇[文章](http://www.kdgregory.com/index.php?page=java.refobj)对这个问题有很好的回答。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-09T14:56:28.020

我认为这篇文章很好地回答了你的问题。

[Java中的软引用和弱引用有什么区别？](https://stackoverflow.com/questions/299659/what-is-the-difference-between-a-soft-reference-and-a-weak-reference-in-java)

基本上，软参考比弱参考稍强。弱引用将在下一个 GC 周期被丢弃，而软引用将保留在内存中，直到出现内存压力并且 JVM 想要尽可能多地回收。

您应该考虑您拥有的引用仍然有效对您的程序有多重要。对于重新创建引用非常便宜的东西，我倾向于使用 Wea​​kReference，但如果它是来自数据库的值，您可能会倾向于软引用，因为除非您真的需要，否则您宁愿不重新运行查询。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T15:06:07.190

直到所有 WeakReference 对象都被垃圾回收后，SoftReference 对象才会被回收。

所以把不太重要的对象放在 WeakReference 对象中，用 SoftReference 对象来持有更重要的对象。

鉴于这些事实，您应该根据垃圾收集的需要使用好的参考对象。首先收集 WeakReference，然后是 SoftReference，最后是 PhantomReferences。

[文档说：](http://docs.oracle.com/javase/7/docs/api/java/lang/ref/package-summary.html#package_description)

*   软引用用于实现内存敏感缓存
*   弱引用用于实现不阻止其键（或值）被回收的规范化映射

顺便说一句，在某些情况下，出于缓存目的，使用 Wea​​kReference 而不是 SoftReference 可能是个好主意，因为缓存在内存中可能很重，因此需要清理。

对于 PhantomReference，用途不同。他们`are for scheduling pre-mortem cleanup actions in a more flexible way than is possible with the Java finalization mechanism.`

[本文](http://weblogs.java.net/blog/kcpeppe/archive/2011/09/29/mysterious-phantom-reference)详细介绍了 PhantomReference 的用途。

# ckeditor - 更改 ckEditor 的背景颜色

> ID：11397523
> 
> 赞同：4
> 
> 时间：2012-07-09T14:49:45.623
> 
> 标签：ckeditor

我需要使用我的 ckEditor 在加载时动态更改背景颜色，它所在的页面是一个动态加载页面，用户在其中具有特定的 bg 颜色。我无法加载 css 它必须只是编辑器主体背景颜色

所以我尝试了

```
window.onload=function(){
    CKEDITOR.instances.editor_data.addCss( 'body { background-color: #efefef; }' );
} 
```

我没有收到错误，但也没有得到任何更改

我也试过

```
CKEDITOR.instances.editor_data.addCss( '#cke_editor_data { background-color: #efefef; }' ); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-09T17:42:53.043

如果您在 window.load 期间调用它，那么为时已晚，[addCss](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#addCss)定义了一些 css 以在创建编辑器时加载，但它不会修改正在运行的实例。

所以你可以这样做（仅使用 addCSS）：

```
CKEDITOR.on('instanceCreated', function(e) {
    e.editor.addCss( 'body { background-color: red; }' );
}); 
```

或者这个（一种更通用的方式来处理已编辑的文档）

```
CKEDITOR.on('instanceReady', function(e) {
    // First time
    e.editor.document.getBody().setStyle('background-color', 'blue');
    // in case the user switches to source and back
    e.editor.on('contentDom', function() {
        e.editor.document.getBody().setStyle('background-color', 'blue');
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-04T16:55:04.093

@AlfonsosML 上面的第二个答案非常适合定位编辑器的正文元素。但是我需要在编辑器中定位 a 标签，发现他的第一个答案破坏了它。然后我尝试了@Doin 在评论中提供的解决方案：editor.document.addCssText() 也失败了。@Doin 已经在评论中更正了代码，`editor.document.appendStyleText()`但它被隐藏在上面。我给他的更正投了“有用”的投票，希望其他人能更快地看到它。这对我有用。我的工作代码混合了 2：

```
CKEDITOR.on('instanceReady', function(e) {
    // First time
    e.editor.document.getBody().setStyle('background-color', 'rgba(0,0,0,0.59)');
    e.editor.document.getBody().setStyle('color', 'white');
    e.editor.document.getBody().setStyle('text-align', 'center');
    e.editor.document.appendStyleText( 'a { color: white; }' );
    // in case the user switches to source and back
    e.editor.on('contentDom', function() {
        e.editor.document.getBody().setStyle('background-color', 'rgba(0,0,0,0.59)');
        e.editor.document.getBody().setStyle('color', 'white');   
        e.editor.document.getBody().setStyle('text-align', 'center');
        e.editor.document.appendStyleText( 'a { color: white; }' );
    });
}); 
```

谢谢

# xpages - 需要一些最佳实践意见

> ID：11397527
> 
> 赞同：2
> 
> 时间：2012-07-09T14:50:02.887
> 
> 标签：xpages

我正在创建一个 XPages 应用程序，它将显示一个按名称列出我们站点上所有软件应用程序的视图。我已将应用程序名称显示为链接，但是当有人单击该链接时，我不想从视图中打开文档。相反，我想读取包含 URL 的基础文档上的字段并启动它。该 URL 可以启动 Notes 客户端应用程序、Xpages 应用程序或只是一个网站。

当用户单击链接时，检索 URL 并启动它的最佳方法是什么？每种 URL 类型的问题是什么？

谢谢，

乔丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:07:58.187

将您的链接构建为 HTML。假设您的带有 URL 的字段被调用`targetURL`，并且您的应用程序名称字段是`Subject`然后您执行计算列类型 HTML（因此没有转义）：

```
"<a href=\""+curRow.getColumnValue("targetURL")+"\">"+curRow.getColumnValue("subject")+"</a>" 
```

您将拥有视图中的字段（但视图控件中不需要它们）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:15:59.613

如果您正在使用视图控件，请单击视图列，并且有一个名为 pageUrl 的属性。为您的视图控件指定一个集合名称，例如 rowData。您应该能够通过使用类似 rowData.getColumnValue("mycustomurl") 的东西来计算这个（单击属性旁边的小菱形）。这假设您的视图中有一个名为 mycustomurl 的列，其中包含您要链接到的 url。

我不知道我还没有尝试过从 Xpage 启动它们的不同 URL 类型。

希望这可以帮助，

以利亚

# ocean - 在虚拟机中运行 Petrel？

> ID：11397528
> 
> 赞同：3
> 
> 时间：2012-07-09T14:50:14.547
> 
> 标签：ocean, petrel

有人在虚拟机中运行 Petrel 吗？Parallels Workstation Extreme 看起来可以解决问题，但我想知道 Windows Server 的 Hyper-V 中的新 RemoteFX 是否可以工作？

随意将其设为社区 Wiki 帖子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:29:36.043

Petrel 不提供对虚拟机或远程桌面的官方支持。然而，Petrel 团队在内部开发中确实大量使用虚拟机。不仅是 Hyper-V，还有 VMWare、Windows Virtual PC 等。它*大部分时间*都可以工作，但有时您可能会遇到 3D 可视化问题（尤其是在大型 3D 体积可视化中，充分利用您的显卡），或者通过虚拟网络连接访问 Petrel 插件二进制文件和/或数据的问题。此类问题很难发现，有时甚至更难修复，但同样，在许多情况下，它只是开箱即用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T17:16:00.077

我们实际上是在内部使用 Hyper-V 在不同的操作系统上安装 Petrel。所以回答你的问题：是的，它有效。

换句话说，Petrel 中没有任何东西可以阻止您使用虚拟机盒。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T05:23:34.760

我们正在使用 ESXI，一切正常。有时我们会遇到插件问题，需要额外的软件，或者对图形有一些特定的要求。

# c# - 用户创建的数据存储在类似结构的表中

> ID：11397531
> 
> 赞同：0
> 
> 时间：2012-07-09T14:50:29.920
> 
> 标签：c#, asp.net, sql, xml

我有一个 asp.net 4.0 c# 应用程序，用户现在可以在其中创建一个表并将数据存储在该表中。已经为版本 1 决定的一件事是，一旦创建了表格，就无法对其进行编辑，这纯粹是为了使它不那么复杂。最好有一个解决方案来编辑​​模式的位置。

我的第一个想法是在数据库中有一个表，每一行代表每个“表”，一列将模式存储在 xml 中，然后第二列将存储数据。当尝试提取数据时，我会将 xml 读入数据表，然后将其保存回数据库中的 xml。任何想法建议或链接到其他人尝试这个将不胜感激！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:08:18.397

有很多方法可以做到：

1.  您可以通过“创建表”sqls 生成真实表。这将为您提供最佳性能，但从数据库管理员的角度来看，这将是一场噩梦。如果您没有经验，请不要这样做。

2.  制作表格：MyTable、MyColumn、MyRow 和 MyCell。

    *   MyTable 将具有 MyTableID（主键）和名称，
    *   MyColumn 将具有 MyColumnID（主键）、MyTableID（外键）、Name
    *   MyRow 将有 MyRowID（主键）、MyTableID（外键）
    *   MyCell 将有 MyCellID（主键）、MyColumnID（外键）、MyRowID（外键）和 Value（大变长字符串）

    这样，您至少可以使用 SQL 来查询、搜索和修改您的数据，并且性能会比使用 XML 更好（尽管不如使用“创建表”SQL 时那么好）。

3.  您可以使用 NoSQL 数据库。它们中的许多没有严格的结构，并且可以存储 JSON 之类的内容，因此您几乎可以在其中存储所有内容。此解决方案有许多缺点（例如缺少 SQL 和 ACID 事务完整性），但它可能适用于您的情况。[从.NET 有哪些 NoSQL 解决方案](https://stackoverflow.com/questions/1777103/what-nosql-solutions-are-out-there-for-net)开始？

# java - PHP - 执行 Java 程序 -> 评估回报

> ID：11397532
> 
> 赞同：-1
> 
> 时间：2012-07-09T14:50:30.460
> 
> 标签：java, php, exec

我刚刚发现了如何通过 php 执行 java 方法。

```
exec('execution line'); 
```

如果“执行行”返回任何对象，是否可以在 php-script 中像变量一样使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:54:46.523

你只会得到一个命令的结果，即一个字符串。您必须通过一个扩展（即[PHP/Java 桥](http://php-java-bridge.sourceforge.net/pjb/)）来获得更多“进化”的数据，但可能永远不会像您想要的那样简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T15:05:16.743

您可以使用以下命令在 PHP 中运行 Shell 命令获取输出：

```
$output = shell_exec("ls -la"); 
```

上面的示例将“ls -la”的输出放入 $output 变量中。

希望这可以帮助 ：-）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T14:58:44.700

如果你使用[proc_open](http://www.php.net/manual/en/function.proc-open.php)，你可以得到执行命令的标准输出和标准错误。

# asp.net-mvc - 如何使用 MS WebDeploy 将 ASP.NET 应用程序部署到 Amazon EC2？

> ID：11397533
> 
> 赞同：11
> 
> 时间：2012-07-09T14:50:32.700
> 
> 标签：asp.net-mvc, amazon-ec2, webdeploy, microsoft-web-deploy

我有一个托管在 Amazon EC2 服务上的 ASP.NET MVC 站点。我想用 MS WebDeploy 建立自动部署到这个站点。我发现了一篇很棒的文章：[Automating Deployment with Microsoft Web Deploy](http://weblogs.asp.net/scottgu/archive/2010/09/13/automating-deployment-with-microsoft-web-deploy.aspx)。

我无法访问`https://mySite:8172/MsDeploy.axd`，因为默认情况下亚马逊上的端口 8172 已关闭。我对 EC2 服务配置不是很熟悉，所以我不知道如何通过 https 协议打开这个端口。我已将 IIS 重新配置为使用默认端口 (433)，并且我在用于我的站点的 Amazon 安全组上打开了此端口。

现在我尝试`https://mySite/MsDeploy.axd`在网络浏览器中打开。IE 请求凭据，记下证书错误（我单击“继续..”）并将我转发到 404。

可以肯定的是，我尝试通过 VS 2010 进行部署，当然它不起作用。

任何有在 Amazon EC2 中使用 MS Web Deploy 经验的人都可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T16:05:13.730

两件事情。
首先：为了打开端口 8172，您需要
a) 在您的 EC2 实例的安全组中打开它，在 AWS 控制面板/EC2/安全组：
在`Create a new rule`下拉列表中，选择`Custom TCP rule`。这样，您将能够指定要打开的端口。然后，选择端口 8172 并在`Source`字段中输入客户端 IP 地址。
b) 打开 Windows 防火墙。

第二：发生证书错误的原因很可能是您的实例上没有证书，或者因为它`Common Name`与实例 FQDN 不匹配。404 是部署在 IIS 上不可用的症状。

# hardware - 是否可以将 SATA HDD 用作网络存储？

> ID：11397534
> 
> 赞同：0
> 
> 时间：2012-07-09T14:50:34.057
> 
> 标签：hardware, storage, network-storage

这是场景，

我有 1TB 内部 SATA 硬盘，它连接到台式机。如果我想从笔记本电脑访问此 HDD 中的文件，我必须打开此桌面并且应该使用 ssh (sftp) 或 Windows 共享。我发现这种方法很乏味，浪费电，而且方法很慢，因为桌面的启动和登录时间。

我想知道，是否有任何替代解决方案可以将 HDD 用作网络存储，并满足以下附加要求。

1.  轻松访问文件，就像 HDD 直接连接到计算机一样（无需太多设置）
2.  可以从 Windows、Linux 和 Mac 轻松访问。
3.  实现安全功能。
4.  通过 Internet 使用存储 (HDD)。（可选的）
5.  准备添加额外的 HDD

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:55:07.613

我可能误解了您的问题，但 NAS 可以满足您的所有要求。我自己正在使用 ReadyNAS Duo。它的价格约为 180 美元，并有 2xHDD 插槽

# c# - WebRequest 正在检索与浏览器不同的 HTML

> ID：11397536
> 
> 赞同：2
> 
> 时间：2012-07-09T14:50:48.030
> 
> 标签：c#, html, webrequest

**问题**

我的 c# web 请求检索到的 html 页面与我使用浏览器获得的不同。

**细节**

我正在尝试获取此 URL 引用的页面的 HTML：

```
https://sistemas.usp.br/jupiterweb/listarGradeCurricular?codcg=12&codcur=12012&codhab=1&tipo=N 
```

我用于 WebRequest 的代码是这样的：

```
public string HttpsGet (string url)
{
    string response = string.Empty;
    if (!string.IsNullOrEmpty(url))
    {
        HttpWebRequest WReq = (HttpWebRequest)WebRequest.Create("https://uspdigital.usp.br/jupiterweb/listarGradeCurricular?codcg=9&codcur=9012&codhab=100&tipo=N");
        WReq.Credentials = CredentialCache.DefaultCredentials;

        ServicePointManager.ServerCertificateValidationCallback = ((sender, certificate, chain, sslPolicyErrors) => true);

        try
        {
            WReq.Proxy = new WebProxy();
            WReq.Method = "GET";
            WReq.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.1 (KHTML, like Gecko) Chrome/13.0.782.107 Safari/535.1";
            WReq.ServicePoint.ConnectionLimit = 800;
            WReq.Timeout = 80000;
            WReq.ContentType = "application/x-www-form-urlencoded";
            WReq.Referer = "";
            WReq.AllowAutoRedirect = true;

            HttpWebResponse resp = (HttpWebResponse)WReq.GetResponse();
            using (resp)
            {
                response = (new StreamReader(resp.GetResponseStream(), Encoding.GetEncoding("ISO-8859-1"))).ReadToEnd();
            }
        }
        catch (Exception exception)
        {
            Exception ex = exception;
        }
        return response;
    }
    else
    {
        throw new Exception("URL is empty or null");
    }
} 
```

**我怎么知道他们是不同的**

我将从代码中检索到的 html 和从浏览器中检索到的 html（在 chrome 上查看源代码）粘贴到 notepad++ 上。

之后，我设法“计数”（ctrl+f -> 计数）这个字符串“#CCCCCC”，它表示某些表格行的背景颜色。

webrequest 的计数为 17，而浏览器的计数为 14。

此外，每个页面的“课程”都不同：网络请求课程是“Faculdade de Ciências Farmacêuticas”，而浏览器上的课程是“Faculdade de Economia, Administração e Contabilidade”（这些名称是葡萄牙语）。

**TL:博士**

不知道为什么，get on this link :`https://uspdigital.usp.br/jupiterweb/listarGradeCurricular?codcg=12&codcur=12012&codhab=1&tipo=N`与我复制粘贴到浏览器时的结果相比，在 webrequest c# 中给了我一个不同的页面。

**更新**

1.  我试图比较两个请求中的用户代理，它们匹配。

2.  我发现通过 C# 的 Web 请求总是给我相同的页面，即“Faculdade de Ciências Farmacêuticas”课程的页面

我猜这与HTTPS有关。

在此先感谢，很抱歉发了这么长的帖子

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T14:53:33.333

找出浏览器的用户代理字符串，然后将 WebRequest 上的用户代理字符串设置为匹配。许多站点提供基于 UA 的变体内容/标记/样式/脚本。

**更新**

如果您使用的是 HttpWebRequest，则可以通过 UserAgent 属性设置 UA。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T17:22:18.020

将主机设置为`uspdigital.usp.br`并将网址上的“sistemas”一词替换为“uspdigital”似乎对我有用。

# jquery - 使用 jquery 和 asp.net 创建水印

> ID：11397543
> 
> 赞同：1
> 
> 时间：2012-07-09T14:51:03.700
> 
> 标签：jquery, asp.net

我想使用 asp.net 和 jquery 创建水印。我有一个带有这样的文本框的页面：

```
<tr>
        <td>
            <%=GetLocaleResourceString("Address.FirstName")%>:
        </td>
        <td>
            <nopCommerce:SimpleTextBox runat="server" ID="txtFirstName" Width="165px" class="watermark" Text="Type your First Name" 
    Tooltip="Type your First Name" ErrorMessage="<% $NopResources:Address.FirstNameIsRequired %>">
            </nopCommerce:SimpleTextBox>
            <asp:Label ID="lblShippingAddressId" runat="server" Visible="false"></asp:Label>
        </td>
    </tr>
    <tr>
        <td>
            <%=GetLocaleResourceString("Address.LastName")%>:
        </td>
        <td>
            <nopCommerce:SimpleTextBox runat="server" ID="txtLastName" Width="165px" ErrorMessage="<% $NopResources:Address.LastNameIsRequired %>">
            </nopCommerce:SimpleTextBox>
        </td>
    </tr> 
```

其中 nopCommerce:SimpleTextBox 是这样的用户控件：

```
<%@ Control Language="C#" AutoEventWireup="true"
    Inherits="NopSolutions.NopCommerce.Web.Modules.SimpleTextBox" Codebehind="SimpleTextBox.ascx.cs" %>
<asp:TextBox ID="txtValue" runat="server"></asp:TextBox>
<asp:RequiredFieldValidator ID="rfvValue" ControlToValidate="txtValue" Font-Name="verdana"
    Font-Size="9pt" runat="server" Display="Dynamic">*</asp:RequiredFieldValidator> 
```

我正在关注这篇文章：

[http://weblogs.asp.net/dotnetstories/archive/2011/11/24/creating-a-simple-watermark-effect-using-jquery.aspx](http://weblogs.asp.net/dotnetstories/archive/2011/11/24/creating-a-simple-watermark-effect-using-jquery.aspx)

并在使用文本框控件的页面中添加 css 类和标题（请参阅第一个标记中的标题和 css）。

但是当我看到页面源代码时，我得到了这个标记：

```
<input type="text" style="width:165px;" class="textBox" id="ctl00_ctl00_cph1_cph1_ctrlCheckoutSinglePage_ctrlCheckoutBillingAddress_ctrlBillingAddress_txtEmail_txtValue" name="ctl00$ctl00$cph1$cph1$ctrlCheckoutSinglePage$ctrlCheckoutBillingAddress$ctrlBillingAddress$txtEmail$txtValue"> 
```

没有 CSS 没有添加标题。请建议我如何添加水印？

问候， 阿西夫·哈米德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:00:22.513

好像没有`class="watermark"`申请`txtValue`

```
<asp:TextBox ID="txtValue" runat="server"></asp:TextBox> 
```

它应该是

```
<asp:TextBox ID="txtValue" class="watermark" runat="server"></asp:TextBox> 
```

# path - 用 three.js 挤压

> ID：11397545
> 
> 赞同：1
> 
> 时间：2012-07-09T14:51:08.133
> 
> 标签：path, geometry, three.js

我想沿着圆形挤出一个矩形来制作一个 3d 环我看过 webgl_geometry_extrude_shapes.html 示例，但我无法用圆形更改示例路径。有人可以发布一个例子吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T23:35:00.840

我认为您正在寻找一种称为[车床](https://github.com/mrdoob/three.js/blob/master/src/extras/geometries/LatheGeometry.js)的不同类型的“挤压” 。您需要使用描述偏移矩形的点创建一个路径，然后将其传递给 LatheGeometry 并插入您的 Mesh 实例：

![车床视图 1](../Images/9bdccf9be096603473df4da72645d0cc.png)

![车床视图 2](../Images/b30e7ecc3a5b419260862c62895ca20c.png)

例如

```
var pts = [
            new THREE.Vector3(150,0,50),//top left
            new THREE.Vector3(200,0,50),//top right
            new THREE.Vector3(200,0,-50),//bottom right
            new THREE.Vector3(150,0,-50),//bottom left
            new THREE.Vector3(150,0,50)//back to top left - close square path
           ];
var mesh = new THREE.Mesh( new THREE.LatheGeometry( pts, 12 ), new THREE.MeshLambertMaterial( { color: 0x2D303D, wireframe: true, shading: THREE.FlatShading } ));
mesh.position.y = 150;
mesh.overdraw = true;
mesh.doubleSided = true;

scene.add( mesh ); 
```

在 LatheGeometry 构造函数中，第一个参数是您想要作为点数组车削的路径，第二个参数是步数（步数越多，细节/径向迭代越多），第三个参数（我没有使用在示例中）是角度 - 默认情况下它是 360，但您也可以控制它。

关于这些点，请注意它们在 x 轴上有一点偏移。定位你的点不仅会影响被车削的正方形的大小，还会影响车床偏移量（偏移量为 0 应该让你得到一个完整的圆柱体）。此外，这些点会影响车床轴（注意我使用了 XZ）。

如果您不熟悉车床的概念，您可能应该在 3D 编辑器中玩一玩，因为它们中的大多数都支持该功能。（有点跑题了，但这种操作在 Illustrator 中的 Effects > 3D > Revolve 下有点支持）

# mysql - 有什么方法可以知道mysql中的select语句读取了多少行？

> ID：11397549
> 
> 赞同：1
> 
> 时间：2012-07-09T14:51:18.190
> 
> 标签：mysql

我有一个包含大约 1500 万行的大表，所有 varchar 数据。我在它上面运行了一个自连接查询，它有一个 3 个自表连接，如下所示：

```
SELECT sj1.uid FROM tbl sj1 
JOIN tbl sj2 ON sj1.uid = sj2.uid 
JOIN tbl sj3 ON sj1.uid = sj3.uid
WHERE sj1.product_code = 'tb'
AND sj2.product_code = 'im'
AND sj3.product_code = 'mg' 
```

现在已经超过 2 小时，当我检查时，`show full processlist`我得到状态发送数据，没有别的。我想知道是否有任何方法可以知道此查询或任何其他相关状态已处理了多少行。我什至无法杀死这个查询，怀疑它可能接近尾声，如果被打断，这将是对资源的巨大浪费。有什么帮助吗？

这就是`EXPLAIN`解释我的原因：

```
+----+-------------+-------+------+-------------------+-------------------+---------+----------------------------------------+----------+-------------+
| id | select_type | table | type | possible_keys     | key               | key_len | ref                                    | rows     | Extra       |
+----+-------------+-------+------+-------------------+-------------------+---------+----------------------------------------+----------+-------------+
|  1 | SIMPLE      | a     | ALL  | ix_unique_user_id | NULL              | NULL    | NULL                                   | 14251264 | Using where |
|  1 | SIMPLE      | b     | ref  | ix_unique_user_id | ix_unique_user_id | 103     | ph_usertrack_analysis.a.unique_user_id |        2 | Using where |
|  1 | SIMPLE      | c     | ref  | ix_unique_user_id | ix_unique_user_id | 103     | ph_usertrack_analysis.a.unique_user_id |        2 | Using where |
+----+-------------+-------+------+-------------------+-------------------+---------+----------------------------------------+----------+-------------+ 
```

所以正在使用 unique_user_id 上的索引

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:59:06.083

不，您无法从 MySQL 中获取有关查询进度的任何信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-09T14:56:55.820

使用所需列为您的表格[编制索引，另请参见](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)[计数](http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html)。

```
SELECT count(sj1.uid) FROM tbl sj1 
JOIN tbl sj2 ON sj1.uid = sj2.uid 
JOIN tbl sj3 ON sj1.uid = sj3.uid
WHERE sj1.product_code = 'tb'
AND sj2.product_code = 'im'
AND sj3.product_code = 'mg'; 
```

如果需要，可以[按组](http://dev.mysql.com/doc/refman/5.0/en/group-by-optimization.html)放置。

# c# - 我需要清除 Thread.CurrentPrincipal 吗？

> ID：11397552
> 
> 赞同：0
> 
> 时间：2012-07-09T14:51:24.287
> 
> 标签：c#, wcf, web-services

当用户连接到我的网络服务时，我将`Thread.CurrentPrincipal`使用我的自定义上下文设置（messageinspector），然后可以在整个解决方案中使用它。

问题是是否`Thread.CurrentPrincipal`需要将其设置为 null 还是仅在当前通话期间存在？

它似乎只持续当前通话，但我不确定这是否只是巧合？

最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:05:21.357

不，这不是巧合，当您的呼叫完成当前线程完成并且您不再拥有身份时，我发现了同样的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T15:09:30.690

此属性表示您当前的安全登录，因此可能不应设置为 null，除非您有特殊需要。在许多情况下这是合适的（例如网上银行），但否则您可能需要它来继续访问您需要访问的资源。

进一步阅读 MSDN 文章：http: [//msdn.microsoft.com/en-us/library/system.threading.thread.currentprincipal.aspx](http://msdn.microsoft.com/en-us/library/system.threading.thread.currentprincipal.aspx)

# javascript - 如何使用可排序的 jQuery UI 在 sortstart 上停止？

> ID：11397558
> 
> 赞同：0
> 
> 时间：2012-07-09T14:51:58.597
> 
> 标签：javascript, jquery-ui, jquery-ui-sortable

如果里面有表格，我有一个可排序的并且不希望 LI 拖动。尝试使用 stopPropagation 在 sortstart 上取消、返回 false 或使用 cancel 方法将在拖动时产生 UI 错误。有什么想法可以解决吗？

[http://jsfiddle.net/davestein/WwDuU/](http://jsfiddle.net/davestein/WwDuU/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:04:38.040

我认为它应该包括这个来停止排序：

ui.draggable('取消')

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:02:44.387

```
$(ui.sender).sortable('cancel'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T22:56:00.530

要说没有答案只是因为它似乎是一个错误并且无法获得任何解决方法：http: [//bugs.jqueryui.com/ticket/8432](http://bugs.jqueryui.com/ticket/8432)

# javascript - 更改 div 的颜色

> ID：11397559
> 
> 赞同：0
> 
> 时间：2012-07-09T14:52:02.013
> 
> 标签：javascript, jquery, css

我有以下功能：

```
function red(opt) {
    var sqr;
    sqr="r"+parseInt(opt);
    hilight_css = {"background-color":"#f00"};
    $(#sqr).css(hilight_css);  
} 
```

我从另一个函数调用这个函数

```
red(questions); 
```

变量`questions`有值`1`。我的 div 的 id 是`r1`. 当我使用此代码时，它不起作用。任何人都可以帮助解决这个问题吗？

如果我用来`alert(sqr)`向我展示它的值，`sqr`但`r1` div 的颜色不会改变

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T14:53:45.003

您必须将字符串传递给`$`函数，如下所示：

```
$("#" + sqr).css(hilight_css); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T14:57:59.613

Constantinius 的回答是正确的，但我想指出，代码可以写得更紧凑：

```
function red(opt) {
    $("#r"+opt).css("background-color", "#f00");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T18:07:02.400

用这个

```
function red(opt)
        {
           var sqr;
           sqr="r"+parseInt(opt);
           hilight_css = {"background-color":"#f00"};
           $("#"+sqr).css(hilight_css); 
        } 
```

# android - 可以在操作栏上居中定位吗？

> ID：11397562
> 
> 赞同：0
> 
> 时间：2012-07-09T14:52:09.220
> 
> 标签：android, android-actionbar

是否可以在操作栏中居中放置任何内容？我知道可以在manifest中设置appIcon、appLogo或者label，但是会自动跳转到左侧。反正有没有把标志或标题放在中心？

*我在 Google 上找到了一些关于此的讨论，但大多提到 Adob​​e Flex*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:03:53.277

发现您可以在操作栏中拥有自定义布局。创建自定义布局（只需在 xml 中居中图像或文本），然后在操作栏中调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T15:08:45.990

如果我没记错的话，你想在顶部中心设置屏幕标题！如果我是正确的希望您在此答案中尝试以下建议？

[屏幕标题居中。](https://stackoverflow.com/questions/5347341/how-to-align-center-the-title-or-label-in-activity)

# parsing - 如何在 C# 中解析来自 Google Contacts API 的 xml 响应

> ID：11397563
> 
> 赞同：0
> 
> 时间：2012-07-09T14:52:09.673
> 
> 标签：parsing, google-api, google-contacts-api

我正在尝试通过我的 C# 应用程序中的 Google Contacts API 获取联系人列表。

以下是我用来提取 Google 联系人的代码，但不确定是否解析响应：

```
 OAuthGContacts _google = new OAuthGContacts();
        if (Request["code"] == null)
        {
            Response.Redirect(_google.AuthorizationLinkGet());

        }
        else
        {
              //Get the access token and secret.
            _google.AccessTokenGet(Request["code"]);

            if (_google.Token.Length > 0)
            {
             string   _contactResponse = _google.WebRequest(OAuthGContacts.Method.GET, "https://www.google.com/m8/feeds/contacts/default/full?access_token=" + _google.Token, string.Empty);
             XmlReader reader = XmlReader.Create(new StringReader(_contactResponse ));
             SyndicationFeed feed = SyndicationFeed.Load(reader);
             reader.Close();
            }
        } 
```

请建议如何解析响应以提取 Google 联系人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T16:44:17.900

您无需解析任何 XML 响应即可在 C# 应用程序中获取联系人列表。Google 的数据 API 提供了执行此操作的功能。[这](https://developers.google.com/google-apps/contacts/v3/#retrieving_all_contacts)是一个 .NET 示例。如果您看到协议，则只需单击 .NET 选项卡，您将看到以下代码

```
public static void PrintAllContacts(ContactsRequest cr)
{
  Feed<Contact> f = cr.GetContacts();
  foreach (Contact entry in f.Entries)
  .... 
```

# c# - 如何将整个流加载到 MemoryStream 中？

> ID：11397565
> 
> 赞同：24
> 
> 时间：2012-07-09T14:52:16.087
> 
> 标签：c#, .net, stream

就像在主题中一样：我想从文件（从流）中读取数据到内存（内存流）中以提高我的应用程序速度。怎么做？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-07-09T14:55:25.943

几个选项：

**首先将其全部读入字节数组...**

```
byte[] data = File.ReadAllBytes(file);
MemoryStream stream = new MemoryStream(data); 
```

**或者使用 .NET 4 的 CopyTo 方法**

```
MemoryStream memoryStream = new MemoryStream();
using (Stream input = File.OpenRead(file))
{
    input.CopyTo(memoryStream);
}
memoryStream.Position = 0; 
```

**或者手动进行**

```
MemoryStream memoryStream = new MemoryStream();
using (Stream input = File.OpenRead(file))
{
    byte[] buffer = new byte[32 * 1024]; // 32K buffer for example
    int bytesRead;
    while ((bytesRead = input.Read(buffer, 0, buffer.Length)) > 0)
    {
        memoryStream.Write(buffer, 0, bytesRead);
    }
}
memoryStream.Position = 0; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-09T14:54:56.817

如果您可以将整个文件保存在内存中，则[File.ReadAllBytes](http://msdn.microsoft.com/en-us/library/system.io.file.readallbytes)应该适合您：

```
using (var ms = new MemoryStream(File.ReadAllBytes(file)))
{
    // do work
} 
```

# php - 如何自动提交数据html表单？

> ID：11397566
> 
> 赞同：1
> 
> 时间：2012-07-09T14:52:17.250
> 
> 标签：php, javascript, html, forms

我有这个简单的形式：

```
<form ENCTYPE="multipart/form-data" action="story.php" method="POST">
<input type="submit" value="Show files">
<input type="hidden" name="emailp" id="emailp" value="">
</form> 
```

我用外部 iframe 和 javascript 的查询字符串参数填充“值”。行。现在我需要将此数据发送到一个 php 文件。我的想法是自动提交。现在我可以使用“显示文件”之类的按钮来做到这一点，但我不需要按钮，而是需要自动发送值的东西。有可能这样做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T14:53:52.630

设置输入值后，调用提交表单的此 JS 代码。

```
document.getElementById("storyForm").submit(); 
```

HTML：

```
<form ENCTYPE="multipart/form-data" action="story.php" method="POST" id="storyForm">
<input type="submit" value="Show files">
<input type="hidden" name="emailp" id="emailp" value="">
</form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T14:53:50.077

如果您向该表单添加一个 ID，您可以这样做。

`$('#FORM_ID').submit();`用 jQuery

```
form = document.getElementById('FORM_ID');
   form.submit(); 
```

或使用 JavaScript

# asp.net - ASP 后面带有 SQL DB 和 VB 代码。编辑返回的数据

> ID：11397567
> 
> 赞同：4
> 
> 时间：2012-07-09T14:52:20.673
> 
> 标签：asp.net, sql, sql-server

我正在尝试为我正在做的项目编写时间表应用程序，并且在一个月的大部分时间里，我没有在系统的关键部分方面取得进展。我需要能够通过周一至周日的每周视图编辑数据并将其添加到应用程序中。我有一个 SQL（服务器）数据透视表，它可以返回我每天输入的数据，但由于它使用动态标题作为一周中的日期，因此要编辑的 gridview 函数将不起作用。我试过绑定数据，但这有同样的问题，日期。我想我需要创建一个带有文本框的表单来输入数据并以这种方式更新，但是如何使用我拥有的查询填充这样的表单？我还需要能够添加新行。我已经走到了尽头，即将放弃编码，因为它现在让我感到压力。

这是我的 SQL，它准确地显示了我想要的数据：

```
ALTER PROCEDURE [dbo].[list_weekly_times]
as

DECLARE @offSetmon int, @fromdt datetime,@todt datetime,@offsetsun int, @COLName    varchar (max)
,     @SQL        varchar (max), @fromdate as date, @todate as date, @offsetmonval as int, @offsetsunval as int

SELECT @offSetmon = 1
select @fromdt = GETDATE()
SELECT @offSetSun = 7
select @todt = GETDATE()
SELECT @fromdt = CONVERT(DATETIME, CONVERT(INT, @fromdt) - (DATEPART(WEEKDAY, @fromdt) - @offSetmon))
SELECT @todt = CONVERT(DATETIME, CONVERT(INT, @todt) - (DATEPART(WEEKDAY, @todt) - @offSetsun))

select @COLName    = ''
 ,    @SQL        = ''

while @FromDt <= @ToDt
begin
      if    (@COLName = '')
      begin
            set   @COLName    = '[' + convert (varchar (10), @FromDt, 121) + ']'
      end
      else
      begin
            set   @COLName    = @COLName + ', [' + convert (varchar (10), @FromDt, 121) + ']'
      end
      set   @FromDt = dateadd (d, 1, @FromDt)
end
print @COLName
select      @SQL  = 'select project_code, activity_code,' + @COLName + 
              ' From (select project_code, activity_code, project_date, Project_time from timesheet) as P 
                pivot 
                  (     sum (Project_time)
                        for project_date in (' + @COLName + ')
                  ) as pvt
                order by project_code

              '
print @SQL
exec  (@SQL) 
```

只是不适用于编辑，因为枢轴是为数据显示而不是数据编辑而设计的。

也许枢轴方法是错误的，需要另一个方向。

任何帮助、教程、示例都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-26T22:57:13.580

**停止**。您正在通过动态编写的 SQL 语句将数据的客户端显示与数据的物理结构相混淆。 *这会让你遇到所有可能的世界中最糟糕的情况。*

理想情况下，您将在 ASP.NET 中使用或创建一个控件，该控件可以直接从`timesheet`表中获取漂亮而窄的行，并完全在 ASP.NET 层内处理数据输入的包装。

如果由于某种原因您无法做到这一点并且需要在服务器上保存按周的数据（例如，您有一个需要全部批准的每周工资单），您应该创建一个可更新的表或查看专用to `timecard_rows`，一周中的每一天都有七个字段和一些“基准日期”指示器，因此您可以强制所有七个字段进出`timesheet`表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T11:03:45.880

为什么不为此使用触发器。

假设您有这样的视图：

```
create view TimeCards
as
select yourDate FirstDayOfWeek
,      sum(case when day = 1 then hours else 0) end sun
,      sum(case when day = 2 then hours else 0) end mon
,      sum(case when day = 3 then hours else 0) end tue
,      sum(case when day = 4 then hours else 0) end wed
,      sum(case when day = 5 then hours else 0) end thu
,      sum(case when day = 6 then hours else 0) end fri
,      sum(case when day = 7 then hours else 0) end sat
from   table
group
by     WeekNumber 
```

然后在触发器中更新这样的时间：

```
create trigger TimeCards_Upd on TimeCards
instead of update
as
begin
    delete table
    where  date = yourDate + 0 -- sun

    insert
    into  table
    ( yourDate
    , hours
    )
    values
    ( date + 0 -- sun
    , sun -- hours from sunday
    )

    -- repeat for every other day
end; 
```

# android - 我可以将我的 apk 上传到 SD 卡而不是内部存储吗？

> ID：11397570
> 
> 赞同：1
> 
> 时间：2012-07-09T14:52:32.607
> 
> 标签：android, android-install-apk

我的 APK 很大，70 MB。我将它安装在外部存储中时没有任何问题，但是当我在安装前将其上传到手机时，APK会进入内部存储并且我的测试手机内部存储和很多Android手机都没有足够的空间没有足够的内部空间容纳 70 MB...

我可以先将我的 APK 直接上传到 SD 卡而不是内部存储吗？

* * *

上传的意思是“在运行时从我的 Eclipse 上传，或从市场下载，apk 将转到内部存储，但我希望 apk 转到外部并从外部开始安装”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T14:57:59.937

您可以使用清单中的安装位置标签在 SD 卡上安装您的应用程序。下面是更多详细信息

SD 卡安装是 Android 2.2 上的一项可选功能，由开发人员而非用户控制，不会影响在 Android 2.2 之前构建的任何应用程序。

*`android:installLocation`应用程序开发人员可以将根清单元素中的字段设置为以下值之一：*

**internalOnly**：仅在内部存储上安装应用程序。如果设备内部存储空间不足，这将导致存储错误。

**preferExternal** : android 系统尝试将应用程序安装在外部存储上。如果已满，则应用程序安装在内部存储上。

**auto**：让 Android 系统决定应用程序的最佳安装位置。默认系统策略是首先将应用程序安装在内部存储上。如果系统存储空间不足，则应用程序将安装在外部存储上。

这是参考文档>>[文档](http://android-developers.blogspot.in/2010/07/apps-on-sd-card-details.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:58:34.077

您可以在 amnifest 文件中设置应用程序安装的首选位置。

它的详细信息在 Android 开发者文档中给出：http: [//developer.android.com/guide/topics/data/install-location.html](http://developer.android.com/guide/topics/data/install-location.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T14:54:38.973

你可以在你的 AndroidManifest.xml 中设置一个标志来告诉操作系统你的应用程序更喜欢安装在 SD 卡上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T14:58:54.523

您可以将 apk 从您的 pc 复制到 android 手机 sd 卡，然后设置。另一件事，android 市场不支持大于 50MB 的 .apk 文件。

# python - python TypeError没有足够的格式字符串参数

> ID：11397571
> 
> 赞同：1
> 
> 时间：2012-07-09T14:52:42.420
> 
> 标签：python, regex, sed, fabric

尝试使用 python 结构更新文件

```
run('sed -i s/jahil/%s/g /etc/nginx/sites-enabled/%s' % (account)) 
```

或者

```
run('sed -i "s/jahil/%s/g" /etc/nginx/sites-enabled/%s' % (account)) 
```

错误：

```
TypeError: not enough arguments for format string 
```

任何想法 ？非常感谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T14:58:11.693

该错误告诉您问题所在：您`%s`的字符串中有两个占位符，但只有一个值。我假设您想在两个地方使用相同的值。在这种情况下：

```
run('sed -i s/jahil/%s/g /etc/nginx/sites-enabled/%s' % (account, account)) 
```

或者，等效地，使用字典，以便我们可以使用命名占位符：

```
run('sed -i s/jahil/%(a)s/g /etc/nginx/sites-enabled/%(a)s' % {"a": account}) 
```

完全在 Python 中进行这种字符串替换很容易；你可以考虑这样做而不是炮轰。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T14:56:33.273

就像错误所说的那样，您所说的参数数量与您提供的数量不匹配。一个自然错误，因为您希望它们相同：

```
run('sed -i "s/jahil/%s/g" /etc/nginx/sites-enabled/%s' % (account, account)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T14:56:29.750

您的格式字符串中有*两个* `%s`，因此您正在构建的字符串期望获得*两个* `string`参数。

除非`accounts`是两个字符串的元组，否则您将收到此消息。

你应该有这样的东西：

```
 % (account, something_else) 
```

如果这两个字符串都需要，`account`那么 `% (account, account)`就可以了。

# python - 有没有办法在 Python 中附加到现有的 gnome canvas bpath？

> ID：11397572
> 
> 赞同：12
> 
> 时间：2012-07-09T14:52:45.087
> 
> 标签：python, gnome

我正在尝试使用 Python 和 gnomecanvas 制作一个简单的绘图应用程序。遗憾的是，似乎没有任何关于 gnomecanvas 的 Python 绑定的文档。因此，我笨手笨脚地使用代码示例并试图从 C 绑定中猜测。

实际上，我的代码通过在笔划中保留当前点列表并在每个新项目处从此列表中生成一个新路径对象来工作：

```
def get_pointer_coords(self, event):
    return self.window_to_world(event.x, event.y)

def render_path(self):
    path_def = gnomecanvas.path_def_new(self.cur_path)
    self.current_item.set_bpath(path_def)

def button_press(self, event):
    is_core = event.device is gdk.device_get_core_pointer()
    if is_core:
        return
    self.drawing = True
    (x, y) = self.get_pointer_coords(event)
    self.cur_path = [(gnomecanvas.MOVETO_OPEN, x, y)]
    self.current_item = self.root().add( gnomecanvas.CanvasBpath
                                       , outline_color="#A6E22E"
                                       , width_pixels=1
                                       , cap_style=gdk.CAP_ROUND
                                       )

def button_release(self, event):
    self.drawing = False

def motion_notify(self, event):
    is_core = event.device is gdk.device_get_core_pointer()
    if not is_core and self.drawing:
        (x, y) = self.get_pointer_coords(event)
        self.cur_path.append((gnomecanvas.LINETO, x, y))
        self.render_path() 
```

这在我看来是一种相当低效的方法：每次指针移动时都生成一个新对象；考虑到我从平板电脑获得亚像素精度，这是*相当常见*的。

我的问题是：有没有一种方法可以像在这个库的 C 版本中那样简单地附加到每个指针运动的现有 bpath 上？

在相关的说明中，是否有任何关于此 API 的文档，因为我已经做了几个小时的谷歌搜索，但没有给我任何回报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:05:12.973

本机 C API 上有很好的[libgnomecavas 2.3](http://developer.gnome.org/libgnomecanvas/2.30/libgnomecanvas-gnome-canvas-path-def.html#gnome-canvas-path-def-concat)文档，其中包含所有 C 函数与 gnomecanvas 一起使用的描述。

Python 绑定通常不会公开所有描述的 API，尤其是您想要的功能，并且没有关于 gnome canvas 的 Python 绑定的文档，所有力量都被派去开发与 Gnome3 相关的东西（您可以在[live.gnome 上探索它。组织](http://live.gnome.org)）。

另一件事是 gnomecavas 已经过时了，Python 绑定也是如此。并且没有计划在未来支持它们（例如，最近几个版本的 Ubuntu 有这个包只是从一个版本复制到另一个版本，没有任何更改）。

但是还有另一个名为 GooCanvas 的画布库，它使用 Cairo 在屏幕上绘图，并且似乎是最新的，具有[PyGooCanvas](https://live.gnome.org/PyGoocanvas) Python 绑定并被一些广泛的项目使用，例如 Pitivi。

* * *

# javascript - 加载没有头部的 jQuery Mobile 对话框？

> ID：11397577
> 
> 赞同：0
> 
> 时间：2012-07-09T14:52:57.957
> 
> 标签：javascript, jquery, mobile, jquery-mobile

在我的 jQuery Mobile 网站中，我的标题中有一个按钮，如下所示：

```
<a href="/foo.html" data-rel="dialog" data-icon="grid">Foo</a> 
```

问题是 JQM 希望我用所有的脚本和 CSS 重新定义头部。这太尴尬了，特别是对于对话（更不用说慢）。我希望我的对话框只包含我的网格内容，而不必重新定义完整的 html 页面。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:15:52.120

您可以在同一页面中定义对话框（多页面布局）

*   [http://jsfiddle.net/cJyYb/](http://jsfiddle.net/cJyYb/)

HTML

```
<div data-role="page" id="thePage">
    <div data-role="content">
        <a href="#theDialog" data-rel="dialog">Open dialog</a>
    </div>
</div>

<!-- Add the dialog here -->
<div data-role="dialog" id="theDialog">
    <div data-role="header" data-theme="d">
        <h1>Dialog</h1>
    </div>

    <div data-role="content" data-theme="c">
        <h1>Delete page?</h1>
        <p>This is a regular page, styled as a dialog. To create a dialog, just link to a normal page and include a transition and <code>data-rel="dialog"</code> attribute.</p>
        <a href="#thePage" data-role="button" data-rel="back" data-theme="b">Sounds good</a>       
        <a href="#thePage" data-role="button" data-rel="back" data-theme="c">Cancel</a>    
    </div>
</div> 
```

文件：

*   [http://jquerymobile.com/demos/1.1.0/docs/pages/page-dialogs.html](http://jquerymobile.com/demos/1.1.0/docs/pages/page-dialogs.html)
*   [http://jquerymobile.com/demos/1.1.0/docs/pages/page-anatomy.html](http://jquerymobile.com/demos/1.1.0/docs/pages/page-anatomy.html)

# c# - 是否可以从 VSTO 中的 Range.Value 获取 int？

> ID：11397579
> 
> 赞同：5
> 
> 时间：2012-07-09T14:53:02.717
> 
> 标签：c#, excel, vsto, int

我有一个 VSTO 插件，并且正在从 Excel 工作表中读取数据。

似乎几乎所有数字数据都被读取为`double`. 是否有可能从中获得`int`价值`Range.Value`？

这是一些代码来说明我的意思。

```
Worksheet w = (Worksheet)Globals.ThisAddIn.Application.ActiveWorkbook.Worksheets["Sheet1"];
var value = ((Range)w.Cells[1, 1]).Value;
bool isInt = value is int;
bool isDouble = value is double; 
```

无论我在工作表 Sheet1 中使用哪种格式，单元格 A1`isInt`总是返回错误。

我应该使用某种格式来获取`int`吗？我认为可能`General`或`0`会工作，但似乎没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T15:19:08.777

Range.Value 返回的数值是双精度值（可能是因为它们在 Excel 中都存储为双精度值，所以看起来是否像整数的数字是格式化的结果）

我通过 GetValue 看到的唯一整数是错误的 ErrorCodes

**例如**

*   分区/0！是一个 Int32，值为 -2146826281

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T15:29:29.780

Govert 说 Excel 从不将数字存储为整数是正确的。

Excel 将数值存储为`Double Precision Floating Point`数字，或者`Doubles`简称为数字。

`Doubles`是 8 字节变量，可以存储精确到小数点后 15 位的数字。

**编辑**：

由于您正在寻找链接，请参阅此

链接： http: [//support.microsoft.com/kb/78113](http://support.microsoft.com/kb/78113)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T15:33:23.087

我很确定 Excel 中的所有数字都是双精度数。例如，以下 VBA 代码将单元格值设置为长整数 (Int32)，然后将其读回。

```
Dim n As Long
n = 123
Range("A1").Value = n
Debug.Print VarType(n)

Dim v As Variant
v = Range("A1").Value
Debug.Print VarType(v) 
```

*   输入是 VarType(n) = 3 = vbLong (Int32)
*   输出是 VarType(v) = 5 = vbDouble

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T15:01:56.787

从[文档](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.xlrangevaluedatatype.aspx)中调用时`var value = ((Range)w.Cells[1,1]).Value`，`Value`类型是从工作表中的值类型派生的。所以看起来您的 Excel 工作表的值格式为`doubles`，而不是`int`s。Excel 没有可以转换为 C# 的“整数”格式，最好的办法是`integer`在读入时将值转换为 。`Value`类型以 Excel 工作表中的任何格式出现。

[本文](http://support.microsoft.com/kb/78113)介绍 Excel 如何处理双精度浮点值。

# jsp - 如何使用 el 在 jsp 中访问 guice 会话范围

> ID：11397580
> 
> 赞同：0
> 
> 时间：2012-07-09T14:53:10.817
> 
> 标签：jsp, guice

我是 guice DI 框架的新手在 Spring 中，我们可以使用 el 访问会话范围变量

```
sessionScope['scopedTarget.sessionService'].loggedUser 
```

但是我怎么能在guice中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T20:06:31.283

如果您选择使用[Guice 的 Servlet 扩展](http://code.google.com/p/google-guice/wiki/Servlets)，您应该能够自动绑定 HttpSession 或 Provider<HttpSession>。

在你的课堂上，你会这样写：

```
private final MyDependency dependency;
private final Provider<HttpSession> sessionProvider;

@Inject
public MyClass(MyDependency dependency, Provider<HttpSession> sessionProvider) {
  this.dependency = dependency;
  this.sessionProvider = sessionProvider;
}

void callMyService() {
  HttpSession session = sessionProvider.get();
  String myValue = (String) session.get("value");
  // ...
} 
```

提供程序是内置接口，可让您从注入器获取新实例。如果类 Foo 已绑定，则您始终可以注入 Provider<Foo> 而无需任何额外工作。在这里，注入一个 Provider 是一个好主意，因为您正在编写的类可能比任何给定会话的寿命更长。

# java - 如何让 JScrollPane 每个鼠标滚轮步骤滚动 1 行？

> ID：11397581
> 
> 赞同：6
> 
> 时间：2012-07-09T14:53:15.700
> 
> 标签：java, swing, jscrollpane, swingx

我有一个 JScrollPane，它的内容窗格是一个 JXList。当我在列表上使用鼠标滚轮时，列表一次会执行三 (3) 个项目。这也适用于表格，无论行高如何。我该如何更改它，以便 - 无论平台如何 - 对于列表和表格，滚动距离都是 1 项？设置块增量不会削减它，因为表中的某些行具有不同的高度。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T16:03:22.890

出于纯粹的兴趣（还有一点无聊），我创建了一个工作示例：

```
/**
 * Scrolls exactly one Item a time. Works for JTable and JList.
 *
 * @author Lukas Knuth
 * @version 1.0
 */
public class Main {

    private JTable table;
    private JList list;
    private JFrame frame;

    private final String[] data;

    /**
     * This is where the magic with the "just one item per scroll" happens!
     */
    private final AdjustmentListener singleItemScroll = new AdjustmentListener() {
        @Override
        public void adjustmentValueChanged(AdjustmentEvent e) {
            // The user scrolled the List (using the bar, mouse wheel or something else):
            if (e.getAdjustmentType() == AdjustmentEvent.TRACK){
                // Jump to the next "block" (which is a row".
                e.getAdjustable().setBlockIncrement(1);
            }
        }
    };

    public Main(){
        // Place some random data:
        Random rnd = new Random();
        data = new String[120];
        for (int i = 0; i < data.length; i++)
            data[i] = "Set "+i+" for: "+rnd.nextInt();
        for (int i = 0; i < data.length; i+=10)
            data[i] = "<html>"+data[i]+"<br>Spacer!</html>";
        // Create the GUI:
        setupGui();
        // Show:
        frame.pack();
        frame.setVisible(true);
    }

    private void setupGui(){
        frame = new JFrame("Single Scroll in Swing");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JSplitPane split = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT);
        frame.add(split);

        // Add Data to the table:
        table = new JTable(new AbstractTableModel() {
            @Override
            public int getRowCount() {
                return data.length;
            }

            @Override
            public int getColumnCount() {
                return 1;
            }

            @Override
            public Object getValueAt(int rowIndex, int columnIndex) {
                return data[rowIndex];
            }
        });
        for (int i = 0; i < data.length; i+=10)
            table.setRowHeight(i, 30);
        JScrollPane scroll = new JScrollPane(table);
        // Add out custom AdjustmentListener to jump only one row per scroll:
        scroll.getVerticalScrollBar().addAdjustmentListener(singleItemScroll);
        split.add(scroll);

        list = new JList<String>(data);
        scroll = new JScrollPane(list);
        // Add out custom AdjustmentListener to jump only one row per scroll:
        scroll.getVerticalScrollBar().addAdjustmentListener(singleItemScroll);
        split.add(scroll);
    }

    public static void main(String[] agrs){
        new Main();
    }
} 
```

真正的魔力是在 custom 中完成的[`AdjustmentListener`](http://docs.oracle.com/javase/6/docs/api/java/awt/event/AdjustmentListener.html)，我们每次将当前的“滚动位置”增加一个块。如示例所示，这适用于上下以及不同的行大小。

* * *

正如评论中提到的**@kleopatra**，您还可以使用 a[`MouseWheelListener`](http://docs.oracle.com/javase/6/docs/api/java/awt/event/MouseWheelListener.html)仅重新定义鼠标滚轮的行为。

[请参阅此处](http://docs.oracle.com/javase/tutorial/uiswing/events/mousewheellistener.html)的官方教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-11T16:32:45.163

简单解释的代码太多：

```
JLabel lblNewLabel = new JLabel("a lot of line of text...");
JScrollPane jsp = new JScrollPane(lblNewLabel);
jsp.getVerticalScrollBar().setUnitIncrement(10); //the bigger the number, more scrolling
frame.getContentPane().add(jsp, BorderLayout.CENTER); 
```

# python - SocketServer.py 错误

> ID：11397591
> 
> 赞同：0
> 
> 时间：2012-07-09T14:53:41.360
> 
> 标签：python, socketserver, osc

谁能看到这里有什么问题？我是 python 新手，需要一些指导。我在带有 Lion 的 Mac 上以 32 位模式运行 Python 2.7.3。依赖项包括

pyOSC pyserial 2.6 python-xbee-api 2.00 optparse_gui 0.2 wxPython 2.8

我将不胜感激任何帮助！

```
OSCServer: KeyError on request from home.gateway:60537: 0
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line 284, in _handle_request_noblock
    self.process_request(request, client_address)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line 310, in process_request
    self.finish_request(request, client_address)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line 323, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line 638, in __init__
    self.handle()
  File "/Library/Python/2.7/site-packages/OSC.py", line 1770, in handle
    self._unbundle(decoded)
  File "/Library/Python/2.7/site-packages/OSC.py", line 1761, in _unbundle
    self._unbundle(msg)
  File "/Library/Python/2.7/site-packages/OSC.py", line 1752, in _unbundle
    self.replies += self.server.dispatchMessage(decoded[0], decoded[1][1:], decoded[2:], self.client_address)
  File "/Library/Python/2.7/site-packages/OSC.py", line 1714, in dispatchMessage
    reply = self.callbacks[addr](pattern, tags, data, client_address)
  File "minihiveosc.py", line 74, in handler_output
    self.setOutput( args[0], args[1:] )
  File "minihiveosc.py", line 178, in setOutput
    self.hive.oscToMiniBee( mid, data )
  File "minihiveosc.py", line 330, in oscToMiniBee
    self.hive.bees[ nid ].send_output( self.hive.serial, data )
KeyError: 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:57:16.833

当`KeyError`您使用不在字典中的键进行字典查找时，通常会引发异常。在这种情况下，它看起来像在最后一行：

```
self.hive.bees[ nid ].send_output( self.hive.serial, data ) 
```

..具体来说，`self.hive.bees[ nid ]`部分。`nid`显然拥有一个值`0`，并且您的`self.hive.bees`字典中没有`0`键。

# c++ - 如何检查这是否是 std::list 的最后一个成员？

> ID：11397598
> 
> 赞同：1
> 
> 时间：2012-07-09T14:53:59.060
> 
> 标签：c++, stl

我有一个如下列表

```
typedef std::list<std::string> SegmentValue; 
```

然后在迭代中我需要检查这是否是最后一次迭代。

```
 for(Field::SegmentValue::const_iterator it = m_segmentValue.begin();It != 
           m_segmentValue.end();It++){
              if((segIt + 1) == m_segmentValue.end())//last iteration
              ...
        } 
```

但我在编译时出错：

```
 error C2678: binary '+' : no operator found which takes a left-hand operand of type 'std::list<_Ty>::_Const_iterator<_Secure_validation>' 
```

我如何检查这是否是最后一次迭代？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T14:56:56.617

您不能将二进制`+`和`-`运算符与`std::list`迭代器一起使用。`std::list`迭代器是*双向*迭代器，但它们不是*随机访问*迭代器，这意味着您不能将它们移动任意常数值。

使用一元`++`而`--`不是

```
Field::SegmentValue::const_iterator it_last = m_segmentValue.end();
--it_last; 
```

现在`it_last`是最后一个元素迭代器。只要确保它仍然有效。如果您没有对容器进行任何使迭代器无效的修改，则可以预先计算`it_last`并在循环中使用它。否则，您必须根据需要重新计算它。

事实上，在通用算法中，尽可能优先使用`--`and`++`迭代器（而不是二进制`+ 1`and `- 1`）总是一个好主意，因为它降低了算法的要求：二进制`+`和`-`需要*随机访问*迭代器，而`++`和`--`使用*双向*迭代器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T14:58:37.753

使用[`std::next`](http://en.cppreference.com/w/cpp/iterator/next)：

```
if (std::next(segIt) == m_segmentValue.end()) ... 
```

如果您使用的是 C++03，您可以轻松编写`next`自己的代码：

```
template<typename T> T next(T it, typename std::iterator_traits<T>::difference_type n = 1) {
    std::advance(it, n);
    return it;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T14:58:43.803

可能是这样的：

```
Field::SegmentValue::const_iterator last = m_segmentValue.end()
--last;

for(Field::SegmentValue::const_iterator it = m_segmentValue.begin();
    It != m_segmentValue.end();
    It++) {

        if(It == last) {
            // last iteration
        }     
    } 
```

您只能使用随机访问迭代器进行算术运算。`std::list`的迭代器是双向的。

请参阅[**此处**](http://en.cppreference.com/w/cpp/iterator)，了解您可以使用各种类别的迭代器做什么和不能做什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T14:57:21.900

试试这个：

```
Field::SegmentValue::const_iterator next = it; ++next;
// or in C++11:
// Field::SegmentValue::const_iterator next = std::next( it );
if( next == m_segmentValue.end()) //last iteration 
```

列表迭代器是`Bidirectional`，不是`RandomAccess`所以他们不支持`operator+`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T14:58:31.830

std::list 迭代器不是随机访问，它们是双向的。不支持 operator+。你需要使用 std::vector 来做这样的事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-12T15:07:34.490

怎么样：

```
if ( &*it == &*(m_segmentValue.rbegin())) 
```

即，比较段的地址。

# wpf - 为列表视图列设置不同的对齐方式

> ID：11397600
> 
> 赞同：21
> 
> 时间：2012-07-09T14:54:11.420
> 
> 标签：wpf, listview

我无法绘制具有左对齐或居中对齐的列的列表视图。我查看了在这里或其他论坛上找到的一些解决方案，但它们似乎适用于[所有专栏](https://stackoverflow.com/questions/4883182/content-alignment-for-gridviewcolumn-in-the-listview?rq=1)，或者我无法让它们正常工作。

到目前为止，我得到的最好的是这段代码，但所有内容都是左对齐的（我已将右对齐放入以测试代码）。有人可以告诉我哪里出错了吗？

```
<ListView Name="lsvQuestions" DockPanel.Dock="Bottom">                
     <ListView.View>
         <GridView>
             <GridViewColumn Width="450" Header="Question Text">
                 <GridViewColumn.CellTemplate>
                     <DataTemplate>
                         <TextBlock Text="{Binding QuestionText}" TextAlignment="Left"/>
                     </DataTemplate>
                 </GridViewColumn.CellTemplate>
                 </GridViewColumn>
                 <GridViewColumn Width="200" Header="Type">
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding QuestionType}" TextAlignment="Right"/>
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                 </GridViewColumn>
                 <GridViewColumn Width="100" Header="Page Number">
                     <GridViewColumn.CellTemplate>
                         <DataTemplate>
                             <TextBlock Text="{Binding QuestionPageNumber}" TextAlignment="Center"/>
                         </DataTemplate>
                     </GridViewColumn.CellTemplate>
                 </GridViewColumn>
                 <GridViewColumn Width="100" Header="Order">
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding QuestionOrder}" TextAlignment="Center"/>
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                </GridViewColumn>
            </GridView>
        </ListView.View>               
    </ListView> 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-07-09T15:29:50.540

默认情况下，您`ListViewItem`的 s 不会拉伸内容，这就是所有项目都显示在左侧的原因。添加这个，它会工作：

```
<ListView.ItemContainerStyle>
    <Style TargetType="ListViewItem">
        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
    </Style>
</ListView.ItemContainerStyle> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-11-20T13:16:26.377

尽管[LPL](https://stackoverflow.com/a/11398263/378115)的提示已经避免了成千上万的麻烦，但我会更进一步，将**Horizo​​ntalContentAlignment**和**VerticalContentAlignment**定义为**拉伸**，以便针对大多数使用的表格驱动控件的预期对齐行为：

*   ListView 列标题和项目模板

*   DataGrid 列标题和单元格模板。

    ```
    <Window x:Class="TaskManager.UI.Views.AcumuladosPorTarefaWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:v="clr-namespace:TaskManager.UI.Views"
    xmlns:catel="http://catel.codeplex.com"        
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="AcumuladosPorTarefaWindow" Height="451.533" Width="323.305"
    >
    <Window.Resources>
    <Style TargetType="GridViewColumnHeader">
        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
        <Setter Property="VerticalContentAlignment" Value="Stretch" />
    </Style>
    <Style TargetType="DataGridColumnHeader">
        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
        <Setter Property="VerticalContentAlignment" Value="Stretch" />
    </Style>
    <Style TargetType="ListViewItem">
        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
        <Setter Property="VerticalContentAlignment" Value="Stretch" />
    </Style>
    <Style TargetType="DataGridCell">
        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
        <Setter Property="VerticalContentAlignment" Value="Stretch" />
    </Style>
    </Window.Resources>
    <StackPanel Orientation="Vertical">

    <ListView ItemsSource="{Binding AcumuladosPorTarefa}" SelectedItem="{Binding LinhaSelecionada}">
        <ListView.View>
            <GridView>
                <GridViewColumn>
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding TarefaID}"/>
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                    <GridViewColumnHeader>
                        <TextBlock Text="ID" TextAlignment="Center" />
                    </GridViewColumnHeader>
                </GridViewColumn>
                <GridViewColumn>
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Tarefa.Nome}"/>
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                    <TextBlock Text="Nome" TextAlignment="Left"/>
                </GridViewColumn>
                <GridViewColumn>
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding DuracaoInMS}" TextAlignment="Right" HorizontalAlignment="Stretch" />
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                    <GridViewColumnHeader Width="auto">
                        <TextBlock Text="Duração" TextAlignment="Right"/>
                    </GridViewColumnHeader>
                </GridViewColumn>
            </GridView>
        </ListView.View>
    </ListView>
    <DataGrid ItemsSource="{Binding AcumuladosPorTarefa}" AutoGenerateColumns="False" SelectedItem="{Binding LinhaSelecionada}" CanUserAddRows="False" HorizontalAlignment="Stretch">
        <DataGrid.Columns>
            <DataGridTemplateColumn Width="auto" MinWidth="20" CanUserSort="True" CanUserReorder="True" CanUserResize="True">
                <DataGridTemplateColumn.Header>
                    <TextBlock Text="ID" TextAlignment="Right" />
                </DataGridTemplateColumn.Header>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding TarefaID}" HorizontalAlignment="Stretch"/>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
            <DataGridTemplateColumn Width="auto" MinWidth="150" CanUserSort="True">
                <DataGridTemplateColumn.HeaderTemplate>
                    <DataTemplate>
                        <TextBlock Text="Nome" HorizontalAlignment="Left"/>
                    </DataTemplate>
                </DataGridTemplateColumn.HeaderTemplate>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Tarefa.Nome}"/>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
            <DataGridTemplateColumn Header="Duração" Width="auto" MinWidth="25" IsReadOnly="True">
                <DataGridTemplateColumn.HeaderTemplate>
                    <DataTemplate>
                        <TextBlock Text="Duração" TextAlignment="Right"/>
                    </DataTemplate>
                </DataGridTemplateColumn.HeaderTemplate>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding DuracaoInMS}" TextAlignment="Right" />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid>
    </StackPanel>
    </Window> 
    ```

记住：您始终[可以在应用程序级别定义默认样式和其他资源，](http://www.wpf-tutorial.com/wpf-application/resources/)因此您不必在每个视图中都定义它。

希望它可以帮助其他人，例如 LPL 的提示帮助我。

# c# - 多个 Orderby 和 Sort

> ID：11397601
> 
> 赞同：4
> 
> 时间：2012-07-09T14:54:14.047
> 
> 标签：c#, linq, lambda

我有 2 节课：

```
 Employee
 EmployeeDetails 
```

我想有一个列表，首先排序 Employee 然后对其进行排序，然后 EmployeeDetails orderby 然后对其进行排序。

我在想这样的事情：

```
var result = _db.Employee
              .OrderBy( e => e.EmpName )
              .Sort('DepartmentId') // using the diff property
              .ThenBy( ed => ed.EmpAddress )
              .Sort('PostCode'); // using the diff property 
```

我需要`EmpName`先从 Employee 中排序，然后从我想按 EmpAddress 排序的那些结果集中对其进行排序，然后对其进行排序，然后返回结果集。

这甚至可能吗？可以不使用 Lambda 来完成吗？是其他方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T15:18:48.593

以下代码是您要查找的代码吗？

```
var result = _db.Employee
                .OrderBy(e => e.EmpName)
                .ThenBy(e => e.DeptartmentId)
                .ThenBy(e => e.EmpAddresss)
                .ThenBy(e => e.PostCode); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T15:00:56.273

您正在寻找：

```
var result = _db.Employee
              .OrderBy( e => e.EmpName )  //OrderBy and SortBy empname  Ascending
              .ThenBy( ed => ed.EmpAddress ); //orderby address ascending 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T15:03:05.390

如果你的`Employee`班级有一个`EmployeeDetails`带有 的属性`EmpAddress`，你可以这样做：

```
var result = _db.Employee
          .OrderBy( e => e.EmpName )
          .ThenBy( e => e.EmployeeDetails.EmpAddress ); 
```

# java - 罗盘-lucene中的索引枚举

> ID：11397604
> 
> 赞同：0
> 
> 时间：2012-07-09T14:54:30.143
> 
> 标签：java, compass-lucene

我正在使用 Compass 从 DTO 对象中过滤数据。`@SearchableComponent`如果它是 POJO 对象，我标记字段，如果它`SearchableProperty`是字符串。这非常有效：我得到了对象和字符串的索引。

我的问题是如何注释 ENUM 数据类型？

我有的枚举示例：

```
public enum FooBar {
    FOO("foo"),
    BAR("bar");
    private final String value;

    ..(constructor)..

    public String value() {
        return value;
    }
} 
```

在这个片段中我应该在哪里放置注释以及应该放置哪个注释？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T09:40:29.633

`@SearchableProperty`从 2.1 版开始，这可以使用注释到该枚举类型的字段开箱即用，例如。

```
 @SearchableProperty    
    FooBar foobar; 
```

搜索使用枚举名称作为返回的过滤类型。处理问题上的价值事物是在使用名称进行搜索之后处理的。

请参阅[Compass 2.1.0 的发行说明](http://issues.compass-project.org/secure/ReleaseNote.jspa?projectId=10000&styleName=Html&version=10140)。

# c# - ubuntu下的System.Windows.forms

> ID：11397605
> 
> 赞同：0
> 
> 时间：2012-07-09T14:54:31.643
> 
> 标签：c#, .net, winforms, mono

嗨，我真的是 C# 的初学者，仍在学习我在 ubuntu 下工作并使用 gmcs 编译并使用 mono 运行的语言原理，我需要编译一个以以下开头的程序： using System.Windows.forms; 使用 System.Drawing；

我该怎么办，这似乎是一个装配问题，但我仍然不知道它是如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T15:04:59.697

我建议从使用[mono-develop](http://monodevelop.com/)开始。它将为您配置构建和部署。一开始这种方式更容易。

# algorithm - OpenCV 中的人脸识别器

> ID：11397606
> 
> 赞同：1
> 
> 时间：2012-07-09T14:54:33.243
> 
> 标签：algorithm, opencv, face-recognition

我在看文章

[http://docs.opencv.org/trunk/modules/contrib/doc/facerec/facerec_tutorial.html#conclusion](http://docs.opencv.org/trunk/modules/contrib/doc/facerec/facerec_tutorial.html#conclusion)

并尝试运行代码`facerec_lbph.cpp`。但是，我遇到了以下错误：

```
facerec_lbph.cpp:109:9: error: ‘FaceRecognizer’ was not declared in this scope
facerec_lbph.cpp:109:23: error: template argument 1 is invalid
facerec_lbph.cpp:109:31: error: invalid type in declaration before ‘=’ token
facerec_lbph.cpp:109:58: error: ‘createLBPHFaceRecognizer’ was not declared in this scope
facerec_lbph.cpp:110:10: error: base operand of ‘->’ is not a pointer
facerec_lbph.cpp:113:31: error: base operand of ‘->’ is not a pointer
facerec_lbph.cpp:132:10: error: base operand of ‘->’ is not a pointer
facerec_lbph.cpp:136:27: error: base operand of ‘->’ is not a pointer
facerec_lbph.cpp:144:18: error: base operand of ‘->’ is not a pointer
facerec_lbph.cpp:145:18: error: base operand of ‘->’ is not a pointer
facerec_lbph.cpp:146:18: error: base operand of ‘->’ is not a pointer
facerec_lbph.cpp:147:18: error: base operand of ‘->’ is not a pointer
facerec_lbph.cpp:148:18: error: base operand of ‘->’ is not a pointer
facerec_lbph.cpp:151:35: error: base operand of ‘->’ is not a pointer 
```

OpenCV 版本是

```
opencv-2.3.1-3.fc16.x86_64
opencv-python-2.3.1-3.fc16.x86_64
opencv-devel-2.3.1-3.fc16.x86_64
opencv-devel-docs-2.3.1-3.fc16.noarch 
```

系统版本是fedora 16，64位。我正在使用的makefile是：

```
CC = g++

SRC = facerec_lbph.cpp
TARGET = main

OBJS = facerec_lbph.o

INCDIRS = -I/usr/include/opencv -I/usr/include/opencv2
LIBDIRS = -L/usr/lib64

CFLAGS = -g $(INCDIRS)
LFLAGS = -lopencv_core -lopencv_highgui -lopencv_video -lopencv_imgproc -lopencv_objdetect -lopencv_ml -lopencv_contrib

all: $(OBJS)
    $(CC) -o $(TARGET) $(OBJS) $(INCDIRS) $(LIBDIRS) $(LFLAGS)
main.o: $(SRC) $(INCLUDE)
    $(CC) -c $(SRC) $(INCLUDE) $(INCDIRS) $(LIBDIRS) $(LFLAGS)

clean:
    rm -f $(TARGET) $(OBJS) *.gch 
```

我可以在需要新信息时更新错误报告。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T16:17:57.497

问题是，您使用的是 OpenCV 2.3.1。此 OpenCV 版本还没有 cv::FaceRecognizer，因此可以解释您的错误消息。我强烈建议您更新到 OpenCV 2.4.2。

该文档附带了很多示例：

*   [http://docs.opencv.org/trunk/modules/contrib/doc/facerec/index.html](http://docs.opencv.org/trunk/modules/contrib/doc/facerec/index.html)
*   [http://code.opencv.org/projects/opencv/repository/show/trunk/opencv/modules/contrib/doc/facerec/src](http://code.opencv.org/projects/opencv/repository/show/trunk/opencv/modules/contrib/doc/facerec/src)

但是，如果您无法更新到最近的 OpenCV 版本，您也可以尝试使用 0.03 版的[libfacerec](http://www.github.com/bytefish/libfacerec)（libfacerec 是我为 OpenCV 贡献的项目）。它与所有 OpenCV 2.3 版本兼容。它的界面略有不同，但算法相同。以下是可用的标签，您可以下载：

*   [https://github.com/bytefish/libfacerec/tags](https://github.com/bytefish/libfacerec/tags)

# server-sent-events - 如何“暂停”服务器发送事件？

> ID：11397616
> 
> 赞同：2
> 
> 时间：2012-07-09T14:55:08.620
> 
> 标签：server-sent-events, pausing-execution

如何暂停服务器发送事件连接？甚至有可能，还是我必须关闭 SSE 然后重新打开它并再次分配所有事件处理程序？

例如我想做的（这都是理论上的，我不知道暂停/重启函数名称）：

```
var source = new EventSource(url);

source.addEventListener("something", somefunction, false);
source.addEventListener("somethingElse", somefunction2, false);

//...some code

source.pause();

//...some code

source.restart(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T15:33:33.420

是的，这就是技术上需要发生的事情，但您可以将其抽象出来。注意：这个只有在你完成后才能连接`.connect()`

```
function EventSource2(url) {
    this.url = url;
    this.es = null;
    this.listeners = {};
}

EventSource2.prototype = {
    constructor: EventSource2,

    connect: function() {
        this.es = new EventSource(this.url);
        this.bindEvents();
    },

    disconnect: function() {
        this.es.close();
        this.es = null;
    },

    bindEvents: function() {
        for ( var type in this.listeners ) {
            var evs = this.listeners[type];
            for( var i = 0; i < evs.length; ++i ) {
                this.es.addEventlistener( type, evs[i], false );
            }
        }
    },

    addEventListener: function( type, fn ) {
        if( !this.listeners[type] ) {
            this.listeners[type] = [];
        }

        this.listeners[type].push( fn );
        if( this.es ) {
            this.bindEvents();
        }
    }
} 
```

用法：

```
var source = new EventSource2(url);

source.addEventListener("something", somefunction, false);
source.addEventListener("somethingElse", somefunction2, false);

source.connect();

source.disconnect();

source.connect(); 
```

# vbscript - VB 脚本不通过命令提示符调用 Bat 文件

> ID：11397617
> 
> 赞同：0
> 
> 时间：2012-07-09T14:55:10.983
> 
> 标签：vbscript

我有一个调用 bat 文件的 vb 脚本文件，这些文件位于 UNC 路径中。我正在使用命令提示符执行 vb 脚本，它正在执行但它没有调用 bat 文件。这是我为调用 bat 文件而编写的代码。sUsername 是管理员的用户名 fullpath 是 vb 脚本文件的绝对路径 setupfile 是 bat 文件名：edx.bat

objShell.run ("runas.exe /noprofile /user:" & sUsername &" "&""""& fullpath &"\" & setupFile & """")

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:59:40.477

当您将 runas 与 /user 一起使用时，它不要求输入密码吗？

# android - 使用来自 setlist.fm 的 JSON 响应调用 REST API

> ID：11397619
> 
> 赞同：0
> 
> 时间：2012-07-09T14:55:13.730
> 
> 标签：android, api

有人从 Android 调用过 setlist.fm API 吗？我正在尝试执行以下代码：

```
 DefaultHttpClient client = new DefaultHttpClient();
        HttpGet getRequest;

        try
        {
            getRequest = new HttpGet(url);
            HttpResponse getResponse = client.execute(getRequest);
            HttpEntity getResponseEntity = getResponse.getEntity();
            return getResponseEntity.getContent();
        }
        catch (Exception e)
        {
            Log.w(getClass().getSimpleName(), "Error for URL " + url, e);
            return null;
        } 
```

但我似乎遇到了两个问题。执行似乎总是以 200 的状态行正确返回，但是当我尝试获取实体时，即使响应对象显示返回了 basichttpentity 对象，长度也是 -1。此外，当我尝试调用 getContent 时，由于某种原因，它会因一般异常而爆炸。我尝试使用的示例 API 调用是[http://api.setlist.fm/rest/0.1/search/setlists.json?artistName=Prince](http://api.setlist.fm/rest/0.1/search/setlists.json?artistName=Prince)。

任何建议都将受到欢迎。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T12:33:22.080

我弄清楚了这个问题。似乎从 API 返回的响应是流式传输的并且以块的形式出现，我试图在实体完成之前抓取它。我删除了这段代码：

```
HttpEntity getResponseEntity = getResponse.getEntity();
return getResponseEntity.getContent(); 
```

并将其替换为：

```
return EntityUtils.toString(getResponse.getEntity()); 
```

# google-docs-api - 是否可以使用谷歌 API 更改谷歌文档（表格）？

> ID：11397623
> 
> 赞同：0
> 
> 时间：2012-07-09T14:55:25.400
> 
> 标签：google-docs-api

按照 API 的描述：

> “Google Documents List API 允许开发人员创建、检索、更新和删除 Google Docs”

如果我需要使用外部应用程序在表中写入内容怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:00:32.287

这是完全可能的。例如，我正在使用 python 根据用户的操作创建和更新 Google Doc 电子表格。有多种语言可供您选择，并且都有很好的文档记录。

# java - spring安全访问决策投票者投票方法中对象参数的实际类型是什么

> ID：11397627
> 
> 赞同：3
> 
> 时间：2012-07-09T14:55:32.043
> 
> 标签：java, spring-security

我目前正在 Spring 中研究基于角色的简单访问控制。我正在使用 AccessDecisionVoter 的实现。所以我想知道 Object o 中的参数是什么

```
public int vote(Authentication authentication, Object o, Collection<ConfigAttribute> configAttributes) { 
```

方法？Spring 文档说它是“安全对象”。我使用intercept-urls 并且这个投票者被调用，那么它是一个控制器吗？或者它只是一个网址字符串？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T20:34:47.483

如果您使用的是 Spring Security 3.1`AccessDecisionVoter`应该已经是通用的，`<S>`参数用作投票方法中的第二个参数。您可以浏览 AccessDecisionVoter 实现源代码（例如[`WebExpressionVoter`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/web/access/expression/WebExpressionVoter.html)which implements `AccessDecisionVoter<FilterInvocation>`）以了解该概念。其中一些实现使用 Object 作为通用参数，因为它们根本不需要使用安全对象（例如[`RoleVoter`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/access/vote/RoleVoter.html)）。

在您的情况下，您可能需要的是覆盖`supports(Class<?>)`方法（来自文档：它*指示 AccessDecisionVoter 实现是否能够为**指示的安全对象类型**提供访问控制投票。*）以获得[`FilterInvokation`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/web/FilterInvocation.html)安全对象，如下所示`WebExpressionVoter`：

```
@Override
public boolean supports(Class<?> clazz) {
    return clazz.isAssignableFrom(FilterInvocation.class);
} 
```

然后您的投票实施可能是：

```
@Override
public int vote(Authentication authentication, FilterInvocation fi,
    Collection<ConfigAttribute> attributes) {
  String url = fi.getRequestUrl();
  // rest of code, you can also fetch request / response from fi 
```

# android - 如何通过按下按钮从 url 获取和显示内容？

> ID：11397630
> 
> 赞同：0
> 
> 时间：2012-07-09T14:55:35.237
> 
> 标签：android, url, button, show

如何通过按下 android 中的按钮从 url 获取和显示内容？按钮在 xml 中，我需要在下面显示显示信息。

按钮 --> 来自[http://www.bovalpo.com/cgi-local/xml_bcv.pl?URL=1的信息](http://www.bovalpo.com/cgi-local/xml_bcv.pl?URL=1)

我的错误代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_bovalpo);

    Button ButtonOne = (Button)findViewById(R.id.btn);

    ButtonOne.setOnClickListener(new OnClickListener() {
        public void onClick(View arg0) {
          Intent viewIntent =

            new Intent("android.intent.action.VIEW",
            Uri.parse("http://www.bovalpo.com/cgi-local/xml_bcv.pl?URL=1"));
            startActivity(viewIntent);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:08:36.137

你的意图是错误的。尝试使用：

```
Intent intent = new intent(Intent.ACTION_VIEW, Uri.parse("http://www.bovalpo.com/cgi-local/xml_bcv.pl?URL=1"));
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T15:26:11.063

如果您想在按下 的同一视图中显示来自链接的信息`Button`，请不要使用`Intent`，因为它会将您带到另一个视图。

您可能想要使用的是`AsyncTask`（[about](http://developer.android.com/reference/android/os/AsyncTask.html)），它将通过互联网在后台获取信息，然后将其显示在按钮下方或屏幕上的任何其他位置。

要建立网络连接，请使用：

```
url = new URL("http://...");
urlConnection = url.openConnection();
InputStream inputStream = urlConnection.getInputStream(); 
```

要获取网络数据，请尝试[本主题](https://stackoverflow.com/questions/2492076/android-reading-from-an-input-stream-efficiently?answertab=active#tab-top)中显示的代码。

希望这可以帮助。

# c++ - 动态改变子菜单的值

> ID：11397632
> 
> 赞同：0
> 
> 时间：2012-07-09T14:55:37.260
> 
> 标签：c++, mfc

我正在开发一个代码，其中有一个菜单、子菜单（它是动态变化的）。我想获得子菜单的这个动态变化值的值。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-05T04:00:22.747

探索 CMainFrame 类的 OnInitMenuPopup 文档。

# javascript - 使用没有密钥的谷歌地图 api

> ID：11397637
> 
> 赞同：1
> 
> 时间：2012-07-09T14:56:07.470
> 
> 标签：javascript, google-maps

Google Maps API v.3的[说明](https://developers.google.com/maps/documentation/javascript/tutorial#api_key)说我

> 应使用 API 密钥加载 Maps API

奇怪的是它说我*应该……*，而不是我*必须……*。无论如何，目前，我并没有使用 API 密钥，因为（据我所知）在编写调用此 API 的代码时没有提及 API 密钥。

我应该返回并在加载 API 的 URL 中添加 API 密钥吗？没有钥匙似乎可以正常工作，所以我没有任何特别的动机去做这件事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T15:00:13.090

如果您是商业用户，您实际上不需要*拥有密钥。*[这是](https://developers.google.com/maps/documentation/javascript/tutorial#api_key)来自谷歌的一段话：

> Google Maps API for Business 开发人员不得在其请求中包含密钥。请参阅加载 Google Maps JavaScript API for Business 特定说明。

然而，普通用户不管有没有密钥都可以，尽管谷歌建议有一个密钥，这样您就可以监控 API 的使用情况。[这](https://developers.google.com/maps/faq#keysystem)是验证这一点的报价：

> Google Maps JavaScript API V3 不需要密钥，但使用密钥有好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T15:32:32.847

如果您想使用[API 管理控制台](https://code.google.com/apis/console/)来限制访问、收集使用情况统计信息等，您只需要一个密钥。因此，建议使用密钥，但不是必需的。请参阅[获取 API 密钥](https://developers.google.com/maps/documentation/javascript/tutorial#api_key)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T15:04:45.543

在 Api 版本 2 中，需要密钥才能在 API v3 中的 localhost 之外运行 gmap，不需要密钥

# ruby-on-rails - Rails - 渲染部分而不必在文件名前使用“_”？

> ID：11397638
> 
> 赞同：5
> 
> 时间：2012-07-09T14:56:09.247
> 
> 标签：ruby-on-rails, ruby-on-rails-3

如何渲染部分而不需要在文件名前提供“_”？有没有我可以调用不使用它的参数？

使用 RABL 和 Backbone 会出现此问题 - 使用 RABL 需要我在视图中有一个文件，例如“index.json.rabl”。但是，当我在页面加载中使用嵌入 JSON 时（与 Backbone 一样），我需要调用文件“_index.json.rabl”。这两个文件是完全相同的，只是需要有不同的名称。我希望只使用 1 个文件“index.json.rabl”并强制 render() 函数查找该文件名，而不使用“_”。

=> 编辑

人们在下面描述的标准解决方案不起作用。那可能是RABL问题？下面的代码*总是*转到 views/countries/_index.json.rabl 文件。

在我的 .erb 文件中

```
countryList.reset(<%=get_json("countries", "index", @countries)%>); 
```

在我的 application_helper.rb 文件中

```
def get_json(view_path, view_action, object)
    path = view_path + '/' + view_action + ".json"
    return raw(render(path, object: object, :formats => [:rabl]))
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T15:12:20.543

您可以通过执行以下操作来呈现文件：

```
render :file => "filename" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T17:21:39.970

来自[RABL 上的 RailsCast #322](http://railscasts.com/episodes/322-rabl?view=asciicast)：

```
<div id="articles" data-articles="<%= render(template: "articles/index.json.rabl") %>" > 
```

从这里开始，然后找出问题所在。但很明显，这`render template: path`是您想要的语法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T14:59:11.390

你试过了`render :template => "file_name"`吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T15:10:54.930

好的尝试：

```
<%= render :file => 'views_directory/index' %> 
```

`views_directory`视图中目录的名称在哪里8)

老的：

> 如果内容相同使用：
> 
> ```
> render :partial => "index" 
> ```
> 
> 在 index.json.rabl 和 _index.json.rabl 中的内容

# bash - 如何按日期范围提取文本？

> ID：11397645
> 
> 赞同：1
> 
> 时间：2012-07-09T14:56:30.640
> 
> 标签：bash, sed, awk

我正在尝试根据给定的日期范围从文件中提取文本。日期范围将由用户决定，但这里我只是使用固定范围。

使用后的文件内容`grep`如下：

```
ronnie@ronnie:~$ zgrep added new.txt
Jul 02 21:03 : update: added Linkin Park/Living Things(2012)/02 - Linkin Park - In My Remains.mp3
Jul 02 21:03 : update: added Linkin Park/Living Things(2012)/03 - Linkin Park - Burn It Down.mp3
Jul 07 10:33 : update: added Linkin Park/Living Things(2012)/04 - Linkin Park - Lies Greed Misery.mp3    
Jul 09 07:54 : update: added Linkin Park/Living Things(2012)/04 - Linkin Park - Lies Greed Misery.mp3 
```

现在，假设我想提取 date`Jul 07`和`Jul 09`. 所以我为此使用了以下命令

```
zgrep added new.txt | sed '/"Jul 09"/,/"Jul 07"/p' 
```

这给了我以下输出

```
Jul 02 21:03 : update: added Linkin Park/Living Things(2012)/02 - Linkin Park - In My Remains.mp3
Jul 02 21:03 : update: added Linkin Park/Living Things(2012)/03 - Linkin Park - Burn It Down.mp3
Jul 07 10:33 : update: added Linkin Park/Living Things(2012)/04 - Linkin Park - Lies Greed Misery.mp3
Jul 09 07:54 : update: added Linkin Park/Living Things(2012)/04 - Linkin Park - Lies Greed Misery.mp3 
```

所以，正如你所看到的，它没有考虑`range`我给 sed。

我的问题是根据日期范围提取文本的正确方法应该是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T15:00:39.890

对于有序输入，

```
command | sed -n '/^Jul 07/,/^Jul 09/p' inputFile 
```

足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T15:01:51.750

你很接近，你想要的是这样的：

```
zgrep added new.txt | sed -n -e '/Jul 09/,/Jul 07/p' 
```

变化是：

*   added `-n`，这意味着不会打印行，除非您特别说 with`p`
*   添加`-e`，只是为了清楚起见
*   删除了字符串周围的双引号。这些不是必需的，因为表达式已经包含在单引号中，并且双引号不会出现在您的文件中。

请注意，这和您的版本仅在行始终按日期/时间排序的情况下才有效。

# jquery - Infinite Scroll pathParse 用于反向 WordPress 评论

> ID：11397648
> 
> 赞同：0
> 
> 时间：2012-07-09T14:56:34.370
> 
> 标签：jquery, wordpress, infinite-scroll

我正在使用 jQuery Infinite Scroll 插件 - [https://github.com/paulirish/infinite-scroll/](https://github.com/paulirish/infinite-scroll/) 来显示我的分页 WordPress 评论。

该插件在查看从旧到新的评论时工作正常（我认为这是默认选项），但如果 WordPress 中的讨论选项设置为以下：

```
Break comments into pages with [XX] top level comments per page and the
[LAST] page displayed by default

Comments should be displayed with the [NEWER] comments at the top of each page 
```

然后无限滚动不再起作用。

看问题，好像是因为如果设置如上，那么WordPress会显示的第一个评论页面是最后一个，所以即

```
WordPress 1st comment page displayed = http://MYLINK/comment-page-5
WordPress 2nd comment page displayed = http://MYLINK/comment-page-4
WordPress 3rd comment page displayed = http://MYLINK/comment-page-3 
```

等等

但是，我*认为*Infinite Scroll 想要增加每一页，所以在显示第一页（实际上是第 5 页）之后，Infinite Scroll 正在寻找不存在的第 6 页。

查看 IS 选项，有一个**pathParse**选项 - 但没有说明如何使用它的文档。我什至不能 100% 确定这是否会有所帮助。

我（和许多其他人）会非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-08T20:44:40.107

Thought Id 在这里提供了一个更简单的解决方案。我没有尝试更改插件，而是发现（经过几天和几天的尝试）更容易反转评论数组。只需将其添加到您的functions.php（来自[这里](http://wpmu.org/daily-tip-how-to-reverse-wordpress-comment-order-to-show-the-latest-on-top/)）

```
if (!function_exists('iweb_reverse_comments')) {
function iweb_reverse_comments($comments) {
    return array_reverse($comments);
    }   
}
add_filter ('comments_array', 'iweb_reverse_comments'); 
```

这样，infinitescroll js 就可以保持原样。此外，您只需将 Wordpress 设置 > 讨论保留为默认设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T15:28:33.253

插件从选择器获取下一个要加载的 URL `div.navigation a:first`。它的 href 属性作为路径传递给下一页的 ajax 请求。在控制台中尝试那个 jQuery 选择器，看看它会产生什么；然后，您可以更改插件以重写选择器，或者更改您的 HTML 以便选择器获得正确的匹配。

### 尝试 2

解析问题不是因为编号；它正在寻找`page=3`并且您的链接是`page-3`. 假设无法更改，但您可以按照建议添加 pathParse 方法（在代码中注释掉类似方法的地方添加此方法）：

```
 ,pathParse:function(path,nextPage){
   path = path.match(/page[-=]([0-9]*)/).slice(1);
   return path;
 } 
```

然后让它正确地减少而不是增加我目前能看到的唯一方法是将第 493 行（在 WP 插件的开发版本中）更改为读取

```
opts.state.currPage--; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T16:28:10.190

我似乎已经为这个问题想出了一个（不完全优雅的）解决方案。

非常感谢@M1ke 的帮助。

好的，

因此，首先，您需要使用 pathParse 函数，因此您可以在其中定义 Infinite Scroll 选项：

加入

```
.infinitescroll({
    state: {
      currPage: 4 // The number of the first comment page loaded, you can generate this number dynamically to save changing it manually
    },        

    pathParse: function(path,nextPage){
        path = ['comment-page-','#comments'];
        return path;
    }
}); 
```

然后，您需要调整主插件文件（jquery.infinitescroll.js 或 .min 版本），因为似乎没有其他方法可以做到这一点。因此，找到包含以下内容的部分：

```
// increment the URL bit. e.g. /page/3/
opts.state.currPage++; 
```

并更改为

```
// decrement the URL bit. e.g. /page/3/
if (opts.state.currPage > 1) {
    opts.state.currPage--;
}
else if (opts.state.currPage == 1) {
    console.log("Last Page"); // Just needed for debugging              
    opts.state.currPage = 999999; // stop IS from loading Comment Page 0 by giving it a page number that won't exist and will return a '404' to provide 'end' function.
} 
```

此外，请确保以下部分：

```
this._debug('pathParse manual');
return opts.pathParse(path, this.options.state.currPage+1); 
```

改为：

```
this._debug('pathParse manual');
return opts.pathParse(path, this.options.state.currPage); 
```

# visual-studio - 将 Visual Studio XAML Intellisense 添加到非 wpf 类

> ID：11397650
> 
> 赞同：0
> 
> 时间：2012-07-09T14:56:42.837
> 
> 标签：visual-studio, xaml, intellisense

我在 c# 中有“类似 DOM”的数据结构（父节点、子节点、属性、枚举...），我想使用 xml\xaml 文件进行一些初始化。我已经编写了一个工具，可以将我的 xaml 转换为 c# 并将它们注入正确的位置。

我想要 WPF 的确切 Intellisense 行为，除了我的类不继承自 WPF 基类和我的项目在库上的非 wpf 应用程序中并且不引用 wpf 程序集。我也不想使用 xsd 模式，因为经常添加和编辑类。

我正在使用视觉工作室 2010

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:36:04.720

创建一个 xaml（首先创建一个资源字典并删除内容）。

添加您自己的程序集作为默认命名空间并开始使用您的类型。我最近为样本数据创建了一个测试，如下所示：

```
<MainViewModel xmlns="clr-namespace:MvvmTest.ViewModels.DesignTime"
               Name="The design time main view model">
    <MainViewModel.SubViewModels>
        <FirstSubViewModel Name="The design time first sub-view model" />
        <SecondSubViewModel Name="The design time second sub-view model" />
    </MainViewModel.SubViewModels>
</MainViewModel> 
```

[您可以使用XamlReader](http://msdn.microsoft.com/en-us/library/system.xaml.xamlreader.aspx)类加载文件。与 xml 相比，作为奖励，文件将被编译并且运行时加载会更快。

# .net - 在多线程环境中使用 TraceSource

> ID：11397654
> 
> 赞同：2
> 
> 时间：2012-07-09T14:56:57.957
> 
> 标签：.net, asynchronous, f#, trace, tracesource

我使用异步工作流在 F# 中编写了一个应用程序。现在我想做的是添加一些跟踪到它！

基本上有一个类 A 可以被实例化多次。每个实例都在独立异步（自身）和并行（与其他实例）工作。我现在的基本想法是为 A 的每个实例添加一个 TraceSource 实例，这很可能是我想要做的。我设法通过[https://github.com/matthid/fsharpasynctrace解决了使用 Async 对象分发 TraceSource 的问题](https://github.com/matthid/fsharpasynctrace)

但是，如果每个 TraceSource 实例都具有相同的名称，则其中一些将被写入同一个文件 (log.txt)，而另一些将被写入 {guid}log.txt。

如果我给每个实例一个其他名称，则用户必须编辑 app.config 文件才能获得正确的日志记录。A 的每个实例都有一个用户给定的逻辑名称，因此理想情况下，我会将实例的日志保存在 name_log.txt 中。（这是因为用户基本上是在运行时创建 A 的实例）

所以我的问题是：有没有更好的方法来做到这一点，即在没有用户交互的情况下仍然可以获得所需的输出和灵活性（通过 app.config）？

注意：因为基本上一切都在线程池中，并且因为可以同时跨实例有很多操作，所以跟踪类或线程根本不是一种选择。

注2：我可以考虑以某种方式扩展 app.config 并自己做，这是我唯一的选择吗？

编辑：为了使问题更清楚：

想象一下下面的类：

```
module OtherModule = 
    let doSomethingAsync m = async{return()}
[<AbstractClass>]
type A (name:string) as x = 
    let processor = 
        MailboxProcessor.Start(
            fun inbox -> async {
                while true do
                    let! msg = inbox.Receive()
                    do! x.B(msg)
                    do! OtherModule.doSomethingAsync(msg)})
    abstract member B : string -> Async<unit>
    member x.Do(t:string) = processor.Post(t) 
```

你有很多这个类的实例，每个实例都活得很长。您现在有上述情况。（您还想跟踪抽象成员，这可以通过受保护的跟踪源来完成......这在 F# 中不可用。并且您想跟踪一些模块功能。这就是我选择上述分发模型的原因。如果你这样做任何其他方式你都很难通过日志。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:11:26.510

您的解决方案看起来很有趣，但我认为使用基于`async`仅传递用于跟踪的对象的自定义工作流可能是一种矫枉过正。

我可能会尝试使用 F# 代理 - 您可以使用`TracingAgent`, 等方法创建一个`Error`，`Warning`并`Trace`报告各种类型的消息。初始化代理时，您可以指定它应该使用的文件。当您从多个线程调用代理时，这很好，因为代理在处理消息时会序列化消息。

因此，您的用户代码将如下所示：

```
let tracer = TracingAgent("Workflow 01")

let doSomeThingInner v = async {
    tracer.Critical "CRITICAL! %s" v
    return "ToOuter" }

let testIt () = async {
    tracer.Verbose "Verbose!" 
    let! d = doSomeThingInner "ToInner"
    tracer.Warning "WARNING: %s" d }

testIt () |> Async.RunSynchronously 
```

这样，您将不得不自己传递`tracer`对象，但这应该不是问题，因为通常您会使用少量的全局跟踪器。如果您出于某种原因想要更改输出文件，您可以向您的代理添加消息以执行此操作。

代理的结构类似于：

```
type TracingAgent(log) = 
  let inbox = MailboxProcessor.Start(fun inbox -> async {
    while true do
      let! msg = inbox.Receive()
      // Process the message - write to a log
    })
  // Methods that are used to write to the log file
  member x.Warning fmt = 
    Printf.kprintf (fun str -> inbox.Post(Warning(str))) fmt

  // Optionally a method that changes the log file
  member x.ChangeFile(file) = 
    inbox.Post(ChangeFile(file)) 
```

日志的配置可以从配置文件中加载——我想这样做的逻辑位置是在`TracingAgent`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T17:05:14.257

我还没有测试过这个，但它似乎可以工作。接受参数的`TraceXXX`方法。将其用作“实例标识符”怎么样？然后，您可以编写一个自定义跟踪侦听器以根据该 ID 重定向输出。也许这将作为一个起点：`TraceSource``id`

```
type MultiOutputTraceListener(directory) =
  inherit TraceListener()

  let mutable output : TextWriter = null
  let writers = Dictionary()

  let setOutput (id: int) =
    lock writers <| fun () ->
      match writers.TryGetValue(id) with
      | true, w -> output <- w
      | _ ->
        let w = new StreamWriter(Path.Combine(directory, id.ToString() + ".log"))
        writers.Add(id, w)
        output <- w

  override x.Write(msg: string) = output.Write(msg)
  override x.WriteLine(msg: string) = output.WriteLine(msg)

  override x.TraceData(eventCache, source, eventType, id, data: obj) =
    setOutput id
    base.TraceData(eventCache, source, eventType, id, data)

  override x.TraceData(eventCache, source, eventType, id, data) =
    setOutput id
    base.TraceData(eventCache, source, eventType, id, data)

  override x.TraceEvent(eventCache, source, eventType, id, message) =
    setOutput id
    base.TraceEvent(eventCache, source, eventType, id, message)

  override x.TraceEvent(eventCache, source, eventType, id, format, args) =
    setOutput id
    base.TraceEvent(eventCache, source, eventType, id, format, args)

  override x.Dispose(disposing) =
    if disposing then
      for w in writers.Values do
        w.Dispose() 
```

用法

```
module Tracing =
  let Source = TraceSource("MyTraceSource")

type A(id) =
  member x.M() =
    Tracing.Source.TraceEvent(TraceEventType.Verbose, id, "Entering method M()")
    ...

let a1 = A(1)
let a2 = A(2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T07:12:21.713

经过一些测试和思考答案后，我想出了以下解决方案：

```
type ITracer = 
    inherit IDisposable
    abstract member log : Diagnostics.TraceEventType ->Printf.StringFormat<'a, unit> -> 'a

type ITracer with
    member x.logVerb fmt = x.log System.Diagnostics.TraceEventType.Verbose fmt
    member x.logWarn fmt = x.log System.Diagnostics.TraceEventType.Warning fmt
    member x.logCrit fmt = x.log System.Diagnostics.TraceEventType.Critical fmt
    member x.logErr fmt =  x.log System.Diagnostics.TraceEventType.Error fmt
    member x.logInfo fmt = x.log System.Diagnostics.TraceEventType.Information fmt

type MyTraceSource(traceEntry:string,name:string) as x= 
    inherit TraceSource(traceEntry)
    do 
        let newTracers = [|
            for l in x.Listeners do
                let t = l.GetType()
                let initField =
                    t.GetField(
                        "initializeData", System.Reflection.BindingFlags.NonPublic ||| 
                                          System.Reflection.BindingFlags.Instance)
                let oldRelFilePath =
                    if initField <> null then
                         initField.GetValue(l) :?> string
                    else System.IO.Path.Combine("logs", sprintf "%s.log" l.Name)

                let newFileName =
                    if oldRelFilePath = "" then ""
                    else
                        let fileName = Path.GetFileNameWithoutExtension(oldRelFilePath)
                        let extension = Path.GetExtension(oldRelFilePath)
                        Path.Combine(
                            Path.GetDirectoryName(oldRelFilePath),
                            sprintf "%s.%s%s" fileName name extension)
                let constr = t.GetConstructor(if newFileName = "" then [| |] else [| typeof<string> |])
                if (constr = null) then 
                    failwith (sprintf "TraceListener Constructor for Type %s not found" (t.FullName))
                let listener = constr.Invoke(if newFileName = "" then [| |]  else [| newFileName |]) :?> TraceListener
                yield listener |]
        x.Listeners.Clear()
        x.Listeners.AddRange(newTracers)

type DefaultStateTracer(traceSource:TraceSource, activityName:string) = 
    let trace = traceSource
    let activity = Guid.NewGuid()
    let doInId f = 
        let oldId = Trace.CorrelationManager.ActivityId
        try
            Trace.CorrelationManager.ActivityId <- activity
            f()
        finally
            Trace.CorrelationManager.ActivityId <- oldId
    let logHelper ty (s : string) =  
        doInId 
            (fun () ->
                trace.TraceEvent(ty, 0, s)
                trace.Flush())
    do 
        doInId (fun () -> trace.TraceEvent(TraceEventType.Start, 0, activityName);)

    interface IDisposable with
        member x.Dispose() = 
            doInId (fun () -> trace.TraceEvent(TraceEventType.Stop, 0, activityName);)

    interface ITracer with 
        member x.log ty fmt = Printf.kprintf (logHelper ty) fmt 
```

实际上，我还找到了一个不依赖于反射的解决方案：您自己继承所有重要的 TraceListeners 并公开它们初始化的数据。然后在 MyTraceSource 构造函数中使用更改的数据创建匹配的侦听器。

编辑：非反射解决方案不如上述反射解决方案一般。

用法是这样的：

```
let SetTracer tracer (traceAsy:AsyncTrace<_,_>) = 
    traceAsy.SetInfo tracer
    traceAsy |> convertToAsync

module OtherModule = 
    let doSomethingAsync m = asyncTrace() {
        let! (tracer:ITracer) = traceInfo()
        return()
        }

[<AbstractClass>]
type A (name:string) as x = 

    let processor = 
        let traceSource = new MyTraceSource("Namespace.A", name)
        MailboxProcessor.Start(
            fun inbox -> async {
                while true do
                    let tracer = new DefaultStateTracer(traceSource, "Doing activity Foo now") :> ITracer
                    let! msg = inbox.Receive()
                    let w = x.B(msg) |> SetTracer tracer
                    do! OtherModule.doSomethingAsync(msg) |> SetTracer tracer})
    abstract member B : string -> AsyncTrace<ITracer, unit>
    member x.Do(t:string) = processor.Post(t) 
```

如果您在 app.config 中配置“logs\Namespace.A.log”，那么您将获得类似“logs\Namespace.A.name.log”的文件。

注意：您仍然必须复制可以通过 app.config 配置的其他属性，但现在应该很容易完成。

如果您觉得这不是正确的方法，请发表评论。

编辑：将此跟踪解决方案添加到[https://github.com/matthid/fsharpasynctrace](https://github.com/matthid/fsharpasynctrace)。

# video - 流式传输 RTP/RTSP：同步/时间戳问题

> ID：11397655
> 
> 赞同：13
> 
> 时间：2012-07-09T14:57:00.657
> 
> 标签：video, streaming, h.264, gstreamer, rtp

我在通过 RTSP 流式传输 H.264 视频时遇到了一些问题。目标是将摄像机图像实时流式传输到 RTSP 客户端（理想情况下最终是浏览器插件）。到目前为止，这一直运行良好，除了一个问题：视频在启动时会滞后，每隔几秒就会卡顿，并且有大约 4 秒的延迟。这是不好的。

我们的设置是使用 x264（w/zerolatency 和超快）进行编码，并使用 ffmpeg 0.6.5 中的 libavformat 打包到 RTSP/RTP 中。为了进行测试，我在连接到 RTSP 服务器时使用带有 gst-launch 的 GStreamer 管道接收流。**但是**，当直接从另一个仅使用 RTP 的 GStreamer 实例进行流式传输时，我已经能够重现相同的问题。

发送机：

```
gst-launch videotestsrc ! x264enc tune=zerolatency ! rtph264pay ! udpsink host=10.89.6.3 
```

收货机：

```
gst-launch udpsrc ! application/x-rtp,payload=96 ! rtph264depay ! decodebin ! xvimagesink 
```

您也可以在同一台机器上同时运行它们，只需将发送方的主机更改为 127.0.0.1。在接收端，您应该注意到视频卡顿且通常表现不佳，以及控制台上的重复警告：

```
WARNING: from element /GstPipeline:pipeline0/GstXvImageSink:xvimagesink0: A lot of buffers are being dropped.
Additional debug info:
gstbasesink.c(2875): gst_base_sink_is_too_late (): /GstPipeline:pipeline0/GstXvImageSink:xvimagesink0:
There may be a timestamping problem, or this computer is too slow. 
```

我在互联网上看到的一个普遍建议的“修复”是`sync=false`与 xvimagesink 一起使用：

```
gst-launch udpsrc ! application/x-rtp,payload=96 ! rtph264depay ! decodebin ! xvimagesink sync=false 
```

即使使用我们的相机软件进行测试，视频也会以接近零的延迟播放。这对于测试很有用，但对于部署不是很有用，因为它不适用于 Totem、VLC 或它们的浏览器插件嵌入。

我想尝试从源头解决问题；我怀疑 x264 或 RTP 有效负载上的 H.264 流上缺少某种时间戳信息。有什么方法可以修改*源*gst 管道，以便我不需要**在**接收器上使用`sync=false`？

如果这不可能，我如何告诉客户端（通过 SDP 或其他方式）不应该同步流？最终，我们使用某种 VLC 插件将其嵌入到浏览器中，因此可以在那里工作的解决方案会更好。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-02T23:09:46.647

正如 root.ctrlc 所发布的，您可以使用 sync=FALSE。但是，您可能会注意到发送方的 CPU 使用率大幅增加。原因是 sync=FALSE 告诉接收器在收到缓冲区后立即推出缓冲区。水槽驱动整个管道。因此，sync=FALSE 会导致管道对视频进行编码并尽快推送到 UDP；它将使用 100% 的 CPU。

您需要的是 gstrtpjitterbuffer。它还负责处理在这里被破坏的时间戳。

发件人示例：

```
gst-launch-0.10 -v videotestsrc ! videorate ! video/x-raw-yuv, framerate=30/1 ! ffmpegcolorspace ! x264enc ! rtph264pay ! udpsink port=50000 host=<sender IP> 
```

示例接收器：

```
gst-launch-0.10 udpsrc port=50000 caps="application/x-rtp, media=(string)video, clock-rate=(int)90000 , encoding-name=(string)H264 , payload=(int)96" ! gstrtpjitterbuffer ! rtph264depay ! ffdec_h264 ! ffmpegcolorspace ! videoscale ! "video/x-raw-yuv, width=320, height=240" ! xvimagesink 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-12T23:00:18.833

您可以将“sync=false”添加到源 gst 管道。在 Ubuntu 12.04 上，这似乎消除了滞后和错误消息。

这是我在源代码上使用的命令：

```
gst-launch videotestsrc ! x264enc tune=zerolatency ! rtph264pay ! udpsink host=127.0.0.1 sync=false 
```

这是我在接收器上使用的：

```
gst-launch udpsrc ! application/x-rtp,payload=96 ! rtph264depay ! decodebin ! xvimagesink 
```

不幸的是，我不知道为什么会这样，甚至不知道“sync=false”属性属于哪个组件（在源管道上）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-17T18:08:17.097

我不知道这是真的，但是当我在没有将电池充电器连接到笔记本电脑的情况下运行管道时，它曾经给我同样的警告，当我插入电源时，相信我它工作正常。我认为这可能是因为旧的 CMOS 电池无法正常工作。因为它负责时钟生成。

# magento - Magento：以编程方式从属性集中删除属性

> ID：11397663
> 
> 赞同：7
> 
> 时间：2012-07-09T14:57:22.390
> 
> 标签：magento, attributes, installation

我需要一个函数或一些代码来从分配给它的集合中删除一个属性。我知道分配属性的功能：

```
$setup->addAttributeToSet($entityTypeId, $setId, $groupId, $attributeId, $sortOrder=null) 
```

或删除属性：

```
$setup->removeAttribute($entityTypeId, $code) 
```

但不应删除该属性。不能再看到 AttributeSet 'Default'（组 'General'）中的属性。

我没有找到任何功能，例如：

```
removeAttributeFromAttributeSet() 
```

或某事。像那样

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T18:01:12.870

您可以在安装脚本中尝试此代码

```
<?php
/** @var $this Mage_Eav_Model_Entity_Setup */
$this->startSetup();

$this->deleteTableRow(
    'eav/entity_attribute', 
    'attribute_id', 
    $this->getAttributeId('catalog_product', 'attribute_code_here'), 
    'attribute_set_id', 
    $this->getAttributeSetId('catalog_product', 'Default')
);

$this->endSetup(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-02T11:17:42.407

下面将从属性集中删除属性

```
<?php 
$installer = $this;
$installer->startSetup();
$setup = new Mage_Eav_Model_Entity_Setup('core_setup');
$entityTypeId = $setup->getEntityTypeId('catalog_product');
$attributeId = $setup->getAttributeId('catalog_product', 'feature'); //feature is attribute code
$attributeSetId = $setup->getAttributeSetId($entityTypeId, 'Default');
$installer->deleteTableRow('eav/entity_attribute', 'attribute_id', $attributeId, 'attribute_set_id', $attributeSetId);                    
$installer->endSetup();
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T06:27:32.663

现在这是我使用的完整代码并且可以正常工作：

```
$installer = $this;
$installer->startSetup();

$attributeType = 'catalog_product';

$attribute_set_name = 'Default';

$attributeCode='my_attribute';

$setId = $installer->getAttributeSetId('catalog_product', $attribute_set_name);

$attributeId=$installer->getAttributeId($attributeType, $attributeCode);

$installer->deleteTableRow('eav/entity_attribute', 'attribute_id', $attributeId, 'attribute_set_id', $setId);

$installer->endSetup(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-04T09:44:57.327

// 它将永久删除您的属性。

```
$Attributes = array('accessories_size','accessories_type','apparel_type','author_artist','bag_luggage_type','bedding_pattern','bed_bath_type','books_music_type','camera_megapixels',
'camera_type','coater','color','colors','cost','decor_type','ebizmarts_mark_visited','electronic_type','featured','fit','format','frame_style','gender','gendered','genre','homeware_style',
'home_decor_type','impressions','is_sold','jewelry_type','length','lens_type','luggage_size','luggage_style','luggage_travel_style','make','manufacturer','material','model','necklace_length',
'occasion','perfector','sample_item_1','sheet_size','shoe_size','shoe_type','size','sleeve_length','style');

$entityType = 'catalog_product';

foreach($Attributes as $index => $attrCode){

        $attributeId = Mage::getResourceModel('eav/entity_attribute')->getIdByCode($entityType,$attrCode);   // it return false when attribute not exist.

        if($attributeId){
            Mage::getModel('catalog/product_attribute_api')->remove($attributeId);          
        }
} 
```

# javascript - 可用性日历 jQuery(?)

> ID：11397666
> 
> 赞同：3
> 
> 时间：2012-07-09T14:57:39.503
> 
> 标签：javascript, jquery, html, json, canvas

首先，我非常感谢您的任何意见。我不是要你为我做这件事，我只是想知道你对处理这个项目的最佳方式的想法。请看下图：

![在此处输入图像描述](../Images/88f43e47c5a6670517cb3537d00344ff.png)

抱歉，它是德语，重要的翻译如下：

verfügbar = 可用
的 bereits reserviert = 已预订
Uhrzeit = 时间段
aktuelle Woche = 本周
和 Mo、Di、Mi 等是一周中日期的缩短。

我将快速解释它应该做什么，因为图片并不能真正解释一切。它基本上是在“某人”全天有空时显示。数据将被提取为 JSON 并为每个用户动态显示并列出两周。我们所在的一周，以及未来的一周。

无论如何，我真的很想听听您对解决此问题的最佳方式的意见。我最初的想法是：Unix 时间戳，找到时间差并将其转换为像素以用作每个 div 的高度。但后来让我感到震惊的是，我无法找到 div 应该从哪里开始。（也许它从图片上的 10:00 开始，我将如何确定）

我想在画布上做这个，但是对画布的经验很少，所以我避免了。如果你会推荐它，请大声喊叫。我正在寻找理想的解决方案。

只是知道该学什么对我有很大的帮助，任何意见都将不胜感激！

谢谢你的时间，
彼得

编辑：对不起，我忘了提到这些事情，感谢您指出：

预留时间数据也将被拉取，用户可以决定在该时间段内是否可用或不可用。我不太确定在同一天拥有两个酒吧会有多复杂。例如：06:00 到 12:00 不可​​用，但 12:00 到 18:00 可用。所以我暂时避免这种情况。

时间间隔为 15 分钟。对于每 15 分钟，应该/可以将 9px 添加到高度。

感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T16:01:33.083

你可以在一个`<table>`巧妙的 CSS 样式中做到这一点......每个`<td>`都是 15 分钟和 9px 高度。第一个和最后一个包含开始/结束时间。[在我查看了http://www.project-open.org/](http://www.project-open.org/)的演示后，我有一些类似的要求并用表格和 css 解决了它，他们有时使用表格来显示日历/里程碑数据。此外，谷歌日历使用表格：[https ://www.google.com/calendar/](https://www.google.com/calendar/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:35:01.877

这个 jquery-plugin 可能值得一看 [https://github.com/themouette/jquery-week-calendar](https://github.com/themouette/jquery-week-calendar)

看起来它使用表和 div 的组合来进行布局

# java - Java Splash 参数使用 Jar 中的文件

> ID：11397667
> 
> 赞同：4
> 
> 时间：2012-07-09T14:57:40.363
> 
> 标签：java, splash-screen, jvm-arguments

所以我在一个包中有一个 Splash.png 文件。我想在运行 jar 文件时传递 -splash:splash.png 参数，但我希望将路径定向到 jar 中的内部包，而不是在 jar 实际运行的外部

例如，我有一个名为 res 的包，但是当我这样做时， `-splash:res/splash.png`它不会显示飞溅

当我这样做`-splash:splash.png`并且将 png 文件放在 jar 文件之外时，它显示启动画面没问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T15:05:09.803

当在 jar 中时，它似乎必须通过可运行 jar 中的清单指定。

```
Manifest-Version: 1.0
Main-Class: <class name>
SplashScreen-Image: <image name> 
```

[请参阅http://docs.oracle.com/javase/tutorial/uiswing/misc/splashscreen.html](http://docs.oracle.com/javase/tutorial/uiswing/misc/splashscreen.html)的“如何使用 JAR 文件显示启动画面”部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-08T01:53:59.497

/META-INF/MANIFEST.MF

JAR：包中的图像？

*   *包*theshow.jimmylandstudios.gui
*   *img-path* theshow/jimmylandstudios/gui

    ```
    Manifest-Version: 1.0
    Class-Path: .
    Main-Class: theshow.jimmylandstudios.gui.GUI
    SplashScreen-Image: theshow/jimmylandstudios/gui/images/splash.png 
    ```

# nhibernate - NHibernate.MappingException：没有持久性：System.Int32

> ID：11397669
> 
> 赞同：1
> 
> 时间：2012-07-09T14:57:48.340
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我有以下...

```
public class TempCartMap : ClassMap<TempCart>
{
   Id(x => x.Id).GeneratedBy.Identity();
   ...
   HasMany(x => x.Products)
    .Inverse().Cascade.AllDeleteOrphan()
        .Table("tblCartProducts")
            .Element("ProductId").KeyColumn("CartId").AsBag();
}

[Serializable]
public class TempCart {

  public TempCart(){
    Products = new List<int>();
  }

  public virtual IList<int> Products { get; set; }

} 
```

和一个持久性规范：

```
 [Test]
    public void CanMapSaleCart()
    {
        SystemTime.Freeze();

        IList<int> list = new List<int> {1, 2, 3};

        new PersistenceSpecification<SaleCart>(Session)
                        //Other PropertyChecks that work fine without the Next check
                        .CheckList(x => x.AdditionalProducts, list)
                        .VerifyTheMappings();
            } 
```

如果我将 CheckList 更改*为*CheckProperty*我*得到

> System.ApplicationException：对于属性 'Products' 预期 'System.Collections.Generic.List `1[System.Int32]' of type 'System.Collections.Generic.List`1[[System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]]' 但得到 '' 类型为 ' System.Collections.Generic.IList`1[[System.Int32，mscorlib，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089]]'

如果我离开它，*我*会得到

> NHibernate.MappingException：没有持久性：System.Int32

使我抓狂！

* * *

- - 额外的

如果我删除 .Inverse().Cascade.AllDeleteOrphan() 并创建一个新测试（不使用持久性规范）

```
[Test]
public void CanMapSaleCartWithAdditionalProducts()
{
    SaleCart sCart = FactoryGirl.Build<SaleCart>();
    sCart.AdditionalProducts = new List<int> { 1, 2, 3 };

    Session.Save(sCart);
    FlushAndClear();
} 
```

这就像我期望的那样保存，创建销售车，然后将产品添加到另一个表。

**TLDR**：这个问题似乎是因为我试图在 int 上使用持久性规范测试，而持久性规范测试实际上只接受名称（str）的实体。如果有人想对此进行扩展，请随意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T08:28:26.323

这个问题似乎是因为我试图在 int 上使用持久性规范测试，而持久性规范测试实际上只接受名称（str）的实体。如果有人想对此进行扩展，请随意。

# c++ - 如何构建我的 Linux c++ 应用程序以链接到旧版本的 libc？

> ID：11397670
> 
> 赞同：8
> 
> 时间：2012-07-09T14:57:48.660
> 
> 标签：c++, linux, linker, g++, embedded-linux

我在 Ubuntu 12.04 上构建了一个应用程序，并尝试在嵌入式系统上运行它。我`apt-cache show libc6`在我的开发机器上运行，它显示（除其他外）

```
Package: libc6
Priority: required
Section: libs
Architecture: i386
Source: eglibc
Version: 2.15-0ubuntu10
Replaces: belocs-locales-bin, libc6-i386
Provides: glibc-2.13-1, libc6-i686 
```

嵌入式设备上存在的 libc6 版本是 2.8.90。在`\lib`设备上的目录中，我有 2 个库

```
libc-2.8.90.so
libc.so.6 
```

当我将应用程序复制到嵌入式设备上时，出现以下错误

```
/usr/lib/libc.so.6: version `GLIBC_2.15` not found (required by ./ServerSocketApp) 
```

我知道如果可能的话，当我在我的开发机器上构建应用程序时，我需要强制它链接到与嵌入式设备上存在的相同版本的 libc6。我遇到的问题是我根本不知道该怎么做。我现在找到的任何答案对我来说都毫无意义。我需要将某些选项传递给 g++ 以使其链接到版本 2.8.90 吗？

绝望中，我在想是否可以将我的开发机器上的 libc 复制到嵌入式设备上，而不是已经存在的并希望最好？？？我似乎无法在网上找到任何简单的文档来解释你是如何做到这一点的，所以任何建议都会非常受欢迎，因为我在这里扯头发。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T16:57:27.310

好的，这里有一个更长的解释，但要小心。我仍然强烈建议您设置一个 chrooted 环境以匹配嵌入式设备上可用的环境，并在构建过程的最后阶段使用它。

您应该了解动态链接的 ELF 可执行文件是如何加载和执行的。有一种称为*运行时链接编辑器*(RTLD) 的东西，也称为动态链接器，它负责加载所有必要的动态链接库、修复重定位等。动态链接器的名称`/lib/ld-linux.so.2`在 32 位 Linux 系统上 `glibc2`与. 动态链接器与库的耦合**非常**紧密，通常只能处理该库的匹配版本。它的路径也被链接器*硬编码*到可执行文件中（通常`/lib64/ld-linux-x86-64.so.2``glibc2`**`glibc2`*`ld`，由编译器隐式调用以进行链接）。您只需执行以下操作即可轻松检查最后一条语句的有效性`ldd some_elf_executable`- 运行时链接编辑器显示完整路径：***

 ***```
$ ldd some_elf_executable
linux-vdso.so.1 =>  (0x00007fffab59e000)
libm.so.6 => /lib64/libm.so.6 (0x0000003648400000)
libc.so.6 => /lib64/libc.so.6 (0x0000003648800000)
/lib64/ld-linux-x86-64.so.2 (0x0000003648000000) <--- the RTLD 
```

为了生成一个动态链接的可执行文件，它使用`glibc2`与系统上安装的版本不同的版本，可执行文件将在其中运行，您应该使用以下一组选项将您的代码链接到`ld`：

*   `-rpath=/path/to/newer/libs`- 这个指示动态链接器`/path/to/newer/libs`在尝试解析库依赖项时首先搜索。应该与您在嵌入式设备上`/path/to/newer/libs`复制较新版本的路径相匹配`glibc2`
*   `-rpath-link=/path/to/newer/libs`- 此选项指示链接器（不是动态链接器）`/path/to/newer/libs`在链接期间解决共享库之间的依赖关系时使用 - 在您的情况下通常不需要
*   `--dynamic-linker=/path/to/newer/libs/ld-linux.so.2`- 这个覆盖了嵌入到可执行文件中的 RTLD 的路径

提供这些选项的方式`ld`通常是通过`-Wl`GCC 的选项。

```
-rpath=/path/to/newer/libs 
```

变成：

```
-Wl,-rpath,/path/to/newer/libs 
```

（注意`=`替换为`,`）

```
--dynamic-linker=/path/to/newer/libs/ld-linux.so.2 
```

变成：

```
-Wl,--dynamic-linker,/path/to/newer/libs/ld-linux.so.2 
```

`/lib/ld-linux.so.2`您应该从开发系统复制到`/path/to/newer/libs/`嵌入式设备上。您还应该复制`libc.so.6`数学库`libm.so.6`和可执行文件使用的或可能间接加载的所有其他库。请注意，`libc.so.6`和`libm.so.6`实际上是指向真实库的符号链接，其名称类似于`libc-2.<version>.so`. 您应该复制这些库文件并创建适当的符号链接以使每个人都满意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T15:16:52.557

[使用 LSB SDK ( http://www.linuxfoundation.org/collaborate/workgroups/lsb/download](http://www.linuxfoundation.org/collaborate/workgroups/lsb/download) )编译时可能会有一些运气，它限制了可执行文件可用的符号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T18:25:16.057

这从根本上是不正确的。虽然您可能能够拼凑出一种链接旧 libc 的方法，但问题在于您的环境设置。

当您为嵌入式系统开发应用程序时。你在主机上这样做。通常，主机和嵌入式设备不在同一架构上。例如，您的主机通常是在 x86 上运行的台式机/笔记本电脑，而嵌入式系统可能在 ARM 上。如果您碰巧与您的嵌入式设备使用相同的架构，那纯属巧合。标准实践环境设置仍应遵循：

*   主机应该有一个工具链设置来交叉构建应用程序到嵌入式架构
*   主机应该有您的嵌入式设备存在的完整 rootfs 的副本。这将包含您的交叉工具将用于为嵌入式系统编译应用程序的所有库

如果您以这种方式设置它。开发将很容易。您将能够设置简单、干净的 make 文件来构建您的应用程序，然后只需`scp`将二进制文件转移到嵌入式系统并运行即可。***

# java - 为什么在文件包含特殊 UTF-8 字符时使用 InputSource 修复 SAX 解析器

> ID：11397678
> 
> 赞同：3
> 
> 时间：2012-07-09T14:58:17.753
> 
> 标签：java, xml, string, sax

我正在寻找解释为什么当我的 XML 文件中有一些特殊的 UTF-8 字符时我的 SAX 解析器会失败。

解析我使用的 XML 文件`Document doc = builder.parse(inputSource);`

但是，当我使用它时，`inputSource`它工作正常：

```
DocumentBuilder builder = factory.newDocumentBuilder();
InputStream in = new FileInputStream(file);
InputSource inputSource = new InputSource(new InputStreamReader(in));
Document doc = builder.parse(inputSource); 
```

我不太明白为什么后者有效。我已经看到了它被使用的例子，但没有解释它为什么起作用。第二个解析字符串而不是文件，因此编码将是 UTF-8？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T15:01:35.330

我怀疑您的文档实际上并不是*您*声明的编码。这一行：

```
InputSource inputSource = new InputSource(new InputStreamReader(in)); 
```

将使用*平台默认*编码将二进制数据转换为`InputStreamReader`. XML 解析器不再执行此操作 - 它无法查看原始字节。

如果这有效，那么您的 XML 文件可能会被巧妙地破坏——它可能会声明它是 UTF-8 格式，但使用的是平台默认编码（例如 Windows-1252）。*如果您有任何*选择，您应该修复 XML，而不是使用解决方法。

# php - PHP：生成带有后缀和前缀作为大写字母的随机字符串

> ID：11397680
> 
> 赞同：-1
> 
> 时间：2012-07-09T14:58:31.823
> 
> 标签：php

嗨，伙计们，我想创建一个随机数字字符串，其中开头有一个固定字母 B，一组八个整数以任何随机字母结尾，例如 B07224081A，其中 A 和其他数字是随机的。这个字符串应该是唯一的。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T15:06:24.343

你的意思是这样的吗？

```
$letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
$numbers = rand(10000000, 99999999);
$prefix = "B";
$sufix = $letters[rand(0, 25)];

$string = $prefix . $numbers . $sufix;
echo $string; // printed "B74099731P" in my case 
```

字符越多 - 生成*唯一*字符串的机会就越大。

我认为这是更好的方法，[`uniqid()`](http://php.net/manual/en/function.uniqid.php)因为它基于毫秒。保证生成字符串的唯一性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T15:17:16.503

这应该适合你。

```
 $randomString = "B";
  for ($i = 0; $i < 9; $i++) {
    if ($i < 8) {
        $randomString.=rand(0,9);
    }  
    if ($i == 8) {
        $randomString.=chr(rand(65,90));
    }
  }
  echo $randomString; 
```

# file - 如何在 Qt 中将文本文件打印到打印机？

> ID：11397683
> 
> 赞同：7
> 
> 时间：2012-07-09T14:58:36.530
> 
> 标签：file, qt, printing

我已将一些示例数据写入文本文件。我想将此文本文件打印到我的打印机。谁能告诉我代码将如何使用Qt4来做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-09T18:14:35.757

您将需要使用 QPrinter 和 QPainter 对象将文本打印到打印机。

下面的代码会将示例文本打印到从对话框 (QPrintDialog) 中选择的打印机。

```
#include <QApplication>
#include <QPrinter>
#include <QPrintDialog>
#include <QPainter>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    QString text =
            "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\n"
            "eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut\n"
            "enim ad minim veniam, quis nostrud exercitation ullamco laboris\n"
            "nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor\n"
            "in reprehenderit in voluptate velit esse cillum dolore eu fugiat\n"
            "nulla pariatur. Excepteur sint occaecat cupidatat non proident,\n"
            "sunt in culpa qui officia deserunt mollit anim id est laborum.\n";

    QPrinter printer;

    QPrintDialog *dialog = new QPrintDialog(&printer);
    dialog->setWindowTitle("Print Document");

    if (dialog->exec() != QDialog::Accepted)
        return -1;

    QPainter painter;
    painter.begin(&printer);

    painter.drawText(100, 100, 500, 500, Qt::AlignLeft|Qt::AlignTop, text);

    painter.end();

    return 0;
} 
```

为了打印文本文件的内容，您需要逐行解析文件以生成包含内容的 QString。生成的 QString 可以像示例中的示例文本一样打印。

有关更多信息，请阅读[QPrinter](http://doc.qt.io/qt-5.4/qprinter.html)和[QPainter的文档](http://doc.qt.io/qt-5.4/qpainter.html)

# matlab - Matlab 可以使用多个处理器进行绘图和绘图中的交互吗？

> ID：11397687
> 
> 赞同：2
> 
> 时间：2012-07-09T14:58:40.197
> 
> 标签：matlab, plot, multiprocessing

我正在我的研究实验室分析 EMG 数据。其中一个步骤是计算数据集的连续小波变换（大小约为 80000）。因此，我使用带有小波工具箱的 Matlab 和“cwt”来绘制 3D 尺度图。

计算需要大量时间，并且几乎不可能进行任何交互，例如 3D 旋转（这对于查看数据的不同方面非常重要）。

资源监视器显示我的六核处理器中只有一个在工作。我将并行计算用于其他计算，但没有找到任何解决方案，甚至没有找到类似的问题。

我可以做些什么来激活对绘图的多核支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:31:02.287

我会冒险进行有根据的猜测并为您的问题的答案*“否”而丰满**有什么我可以做的来激活对情节的多核支持吗？*

Matlab 当然可以使用多个内核进行计算。它的许多内在函数已经是多线程的，并且将使用任何可用的内核，而程序员（或用户）不必采取任何特殊措施。对于您自己的计算，您可以使用并行计算工具箱。

然而，除非你有一些非常特殊的图形硬件（如果你有，为什么不提？）你的显示器会告诉你为什么当你与你的 3D 绘图交互时只使用一个处理器——在屏幕和屏幕之间的某个地方。您的计算机的硬件存在一个瓶颈，所有这些内核的输出通过该瓶颈被压缩到一个位和字节流中以供呈现。

您的经验与 Matlab 可视化例程的瓶颈是一致的，我认为从您提供的证据中可以安全地得出结论，Mathworks 没有多线程计算绘图中每个元素的新屏幕位置的例程为您可以旋转它，或进行任何其他处理以将分析结果转换为一张或多张图片。如果他们确实并行化了这些例程，那将改变瓶颈但不会消除它。

要消除瓶颈，您必须有一种方法让不同的 Matlab 线程分别处理屏幕的不同部分；我没有看到任何证据表明 Matlab 具有这种能力。Google 会为您找到大量对*并行渲染*的引用，但我没有看到 Matlab 目前实现了这方面的任何方面的迹象。

我只是补充一下，作为对您写的评论的回应，*不幸的是我无法重新采样我的数据*，您应该注意，Matlab 的可视化例程正在重新采样您的数据以进行演示，除非您仅可视化样本数量少于可用的像素数。如果您在水平 2000 像素的显示器上可视化具有 80000 个样本的时间序列，则必须给出一些东西。

如果您自己负责重新采样，您可能会获得更好的图形性能和更好的理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:38:29.350

Matlab 的绘图性能很差，它更注重可定制性而不是性能。使用 MEX 运行一些本机 C++ 代码以使用 OpenGL 绘制数据可能会快得多。

# jquery - 使用 jQuery 获取内部属性的值？

> ID：11397688
> 
> 赞同：0
> 
> 时间：2012-07-09T14:58:40.767
> 
> 标签：jquery

我有以下 jQuery：

```
$.fn.dataTableExt.afnSortData['dom-text'] = function (oSettings, iColumn) {
    var aData = [];
    $('td:eq(' + iColumn + ') input', oSettings.oApi._fnGetTrNodes(oSettings)).each(function () {
        aData.push(this.value);
    });
    return aData;
} 
```

我正在使用它来获取td 元素中的**输入****值。**

 **但是我的 HTML 现在看起来像这样：

```
<td id="tempRowKey_117" class=" sorting_1" data-rk="100001">  
   <input type="text" value="10.0.1" id="TempRowKey_117">
</td> 
```

如何更改我的 jQuery 以便它现在获取**data-rk**的值而不是输入的值？

换句话说，我想得到“10001”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T15:01:10.973

```
$.fn.dataTableExt.afnSortData['dom-text'] = function (oSettings, iColumn) {
    var aData = [];
    $('td:eq(' + iColumn + ')', oSettings.oApi._fnGetTrNodes(oSettings)).each(function () {
        aData.push($(this).attr('data-rk'));
    });
    return aData;
} 
```**

# mysql - 根据时间变量对两个表中的一对 COUNT 求和

> ID：11397690
> 
> 赞同：4
> 
> 时间：2012-07-09T14:58:43.893
> 
> 标签：mysql, sum

一个小时的大部分时间里一直在寻找这个问题的答案，但运气不佳。我有两个具有相同列名的区域表，我可以根据以下查询为任一表列出结果列表（将表 2 交换为表 1）：

```
SELECT Table1.YEAR, FORMAT(COUNT(Table1.id),0) AS Total
FROM Table1
WHERE Table1.variable='Y' 
GROUP BY Table1.YEAR 
```

理想情况下，我希望得到一个结果，按年份计算总和，而不是：

```
|     REGION 1     |     |     REGION 2     |
|  YEAR  |  Total  |     |  YEAR  |  Total  |
|  2010  |    5    |     |  2010  |    1    |
|  2009  |    2    |     |  2009  |    3    |
|        |         |     |  2008  |    4    | 
```

我有：

```
|     MERGED       |
|  YEAR  |  Total  |
|  2010  |    6    |
|  2009  |    5    |
|  2008  |    4    | 
```

我尝试了各种 JOIN 和其他想法，但我想我已经赶上了 SUM 和 COUNT 问题。任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T15:06:56.887

```
SELECT `YEAR`, FORMAT(SUM(`count`), 0) AS `Total`
FROM (
    SELECT `Table1`.`YEAR`, COUNT(*) AS `count`
    WHERE `Table1`.`variable` = 'Y'
    GROUP BY `Table1`.`YEAR`
    UNION ALL
    SELECT `Table2`.`YEAR`, COUNT(*) AS `count`
    WHERE `Table2`.`variable` = 'Y'
    GROUP BY `Table2`.`YEAR`
) AS `union`
GROUP BY `YEAR` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T15:04:34.633

您应该使用 UNION：

```
SELECT
    t.YEAR,
    COUNT(*) as TOTAL
FROM (

SELECT *
FROM Table1

UNION ALL

SELECT *
FROM Table2

) t
WHERE t.variable='Y'
GROUP BY t.YEAR; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T15:05:09.687

```
Select year, sum(counts) from (
SELECT Table1.YEAR, FORMAT(COUNT(Table1.id),0) AS Total
FROM Table1
WHERE Table1.variable='Y' 
GROUP BY Table1.YEAR
UNION ALL
SELECT Table2.YEAR, FORMAT(COUNT(Table2.id),0) AS Total
FROM Table2
WHERE Table2.variable='Y' 
GROUP BY Table2.YEAR ) GROUP BY year 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-16T02:11:06.020

为了改进 Shehzad 的回答：

```
SELECT YEAR, FORMAT(SUM(counts),0) AS total FROM (
SELECT Table1.YEAR, COUNT(Table1.id) AS counts
FROM Table1
WHERE Table1.variable='Y' 
GROUP BY Table1.YEAR
UNION ALL
SELECT Table2.YEAR, COUNT(Table2.id) AS counts
FROM Table2
WHERE Table2.variable='Y' 
GROUP BY Table2.YEAR ) AS newTable GROUP BY YEAR 
```

# mysql - 如何在 Yii 查询生成器中使用 LIKE

> ID：11397700
> 
> 赞同：2
> 
> 时间：2012-07-09T14:58:59.947
> 
> 标签：mysql, yii, query-builder

如何使用 YIi 查询生成器构建此查询

```
SELECT *
FROM `table`
WHERE type_item = 2 AND name_item LIke '%name%' 
```

我试过了

```
return Yii::app()->db->createCommand()
    ->select('*')
    ->from('{{event_field_variants}}')
    ->where('type_item = :type AND name_item LIKE "%:substr%"', array(':type' => '2', ':substr' => 'name'))
    ->order('variant ASC')
    ->queryAll(); 
```

但是这个查询得到 CdbcException。Yii 文档中的示例仅使用 like 或仅使用简单参数。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-09T15:00:51.377

```
->where('name_item LIKE :substr', array(':substr' => '%name%')) 
```

只是把它放在变量部分？

# objective-c - AudioUnitRender 因 GenericOutput 失败（-10877 /无效元素）

> ID：11397702
> 
> 赞同：1
> 
> 时间：2012-07-09T14:59:09.133
> 
> 标签：objective-c, ios, core-audio, audiounit

我基本上是在尝试获取`AUGraph`使用 a`GenericOutput Node`和调用`AudioUnitRender`. 作为我的程序的起点，我使用了Apple 的示例并进行了如下`MixerHost`更改。`outputNode`

```
AudioComponentDescription iOUnitDescription;
iOUnitDescription.componentType          = kAudioUnitType_Output;
iOUnitDescription.componentSubType       = kAudioUnitSubType_GenericOutput;
iOUnitDescription.componentManufacturer  = kAudioUnitManufacturer_Apple;
iOUnitDescription.componentFlags         = 0;
iOUnitDescription.componentFlagsMask     = 0; 
```

后来当我想获得我的样品时，我打电话给

```
AudioUnitRenderActionFlags  ioActionFlags = kAudioOfflineUnitRenderAction_Render;
AudioTimeStamp        inTimeStamp = {0};

inTimeStamp.mHostTime = mach_absolute_time();
inTimeStamp.mFlags =   kAudioTimeStampSampleHostTimeValid;

result = AudioUnitRender (
                 ioUnit,
                 &ioActionFlags,
                 &inTimeStamp,
                 1,
                 1024,
                 ioData
                 ); 
```

这会产生一个

> “-10877 / 无效元素”

错误。我的假设是，错误来自未`inTimeStamp.mSampleTime`正确设置字段。老实说，除了 之外，我还没有找到找出采样时间的方法`AudioQueueDeviceGetCurrentTime`，我无法使用它，因为我不使用`AudioQueue`. 但是，更改`ioActionFlag`to `kAudioTimeStampHostTimeValid`不会改变错误行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-11T19:20:57.013

与元素（又名“总线”）有关的错误是指您的 AudioUnitRender 调用的第四个参数 (1)。通用输出单元只有一个元素/总线：0，它具有输入、输出和全局范围。如果您将 0 传递给调用而不是元素 # 的 1，则该错误应该会消失。

# google-app-engine - 应用引擎数据存储中的邮政地址模型，公共属性应该如何结构化？

> ID：11397703
> 
> 赞同：1
> 
> 时间：2012-07-09T14:59:10.480
> 
> 标签：google-app-engine, app-engine-ndb

假设我们有基于 2 个模型的数百万个地址。

1.  `Address`模型具有纯字符串属性，即使对于常见的属性，如`county`：

    ```
    class Address(ndb.Model):

      house_no = ndb.StringProperty()
      street = ndb.StringProperty()
      locality = ndb.StringProperty() # City/town
      county = ndb.StringProperty()
      zipcode = ndb.StringProperty() 
    ```

2.  `StructuredAddress`model 通过将每个属性定义为 a 来保留更常见的属性作为对其他模型的引用`KeyProperty`：

    ```
    class StructuredAddress(ndb.Model):

      house_no = ndb.StringProperty()
      street = ndb.StringProperty()
      locality = ndb.KeyProperty(kind=Locality) # City/town
      county = ndb.KeyProperty(kind=County)
      zipcode = ndb.KeyProperty(kind=Zipcode) 
    ```

以下是问题：

*   当基于常见属性进行查询时，哪种模型更有效`zipcode`？

*   假设`county`属性的数量约为 50，而`zipcode`属性的数量约为数百万。给定数百万个地址记录，在这种情况下哪种模型更有效？

*   `KeyProperty`在这个例子中使用是否意味着更多的读取操作，并且实际上更高的账单？内置的 ndb 缓存会避免这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:15:14.223

KeyProperty 版本会更贵，因为 Key 占用的字节数比典型的邮政编码或城镇/县名要多。（每个键都重复它所指向的种类的全名。）

除了被动存储成本之外，您还需要为读取键引用的字段支付额外的读取成本。

最后，没有办法直接执行您需要执行这些查询的 JOIN（尽管这可能只是一次查找的问题）。

The only thing that using keys *buys* you is the possibility of changing the name of a town or county. But how often does that really happen?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:25:17.407

> 根据邮政编码等常见属性进行查询时，哪种模型更有效？

假设 ZipCode 类只包含一个带有邮政编码的 String/Int 属性，(1) 将使用一个 RPC 完成此查询，(2) 将使用两个 RPC：

(1)

```
# Get the first 100 adresses with zipcode 55555
addresses = Address.query().filter('zipcode','55555').fetch(limit=100) 
```

(2)

```
# Get the key of the zipcode 55555
zip = Zipcode.query().filter('code','55555').get()
# Get the first 100 addresses with the zipcode 55555
addresses = StructuredAddress.query().filter('zipcode',zip.key()).fetch(limit=100) 
```

所以这里（1）是优越的。

> 假设国家属性的数量约为 50，而邮政编码属性的数量约为数百万。给定数百万个地址记录，在这种情况下哪种模型更有效？

再次假设只有一个字符串与邮政编码相关联，并且通过效率您正在谈论存储效率（1）您只需存储数百万个地址，在（2）您将必须存储数百万个地址和数百万个邮政编码，因此（1）将更有效率。

同样，（1）将是优越的。

> 在这个例子中使用 KeyProperty 是否意味着更多的读取操作，并且实际上更高的账单？内置的 ndb 缓存会避免这种情况吗？

简而言之，是的，正如您对第一个问题的回答所证明的那样。实际上，您想要使用 KeyProperty 的唯一时间是当有多个字段将存储在参考模型中时。

# java - AxisTime 到 Java 时间

> ID：11397708
> 
> 赞同：1
> 
> 时间：2012-07-09T14:59:35.197
> 
> 标签：java, time

我试图将axis.types.Time转换为sql.Time，如下所示：

```
 org.apache.axis.types.Time axisTime = (org.apache.axis.types.Time) valore;
    Calendar calendarTime = axisTime.getAsCalendar();
    java.sql.Time jsqlT = java.sql.Time.valueOf( cal.get(cal.HOUR_OF_DAY) + ":" +  cal.get(cal.MINUTE) + ":" + cal.get(cal.SECOND) ); 
```

但我在转换之间有一个小时的差异。这与日光有关吗？我该如何解决？

（输出：轴时间：`20:45:00.000Z`

日历 ：`java.util.GregorianCalendar[time=-62167403700000,areFieldsSet=true,areAllFieldsSet=true,lenient=true,zone=sun.util.calendar.ZoneInfo[id="Europe/Berlin",offset=3600000,dstSavings=3600000,useDaylight=true,transitions=143,lastRule=java.util.SimpleTimeZone[id=Europe/Berlin,offset=3600000,dstSavings=3600000,useDaylight=true,startYear=0,startMode=2,startMonth=2,startDay=-1,startDayOfWeek=1,startTime=3600000,startTimeMode=2,endMode=2,endMonth=9,endDay=-1,endDayOfWeek=1,endTime=3600000,endTimeMode=2]],firstDayOfWeek=2,minimalDaysInFirstWeek=4,ERA=0,YEAR=2,MONTH=11,WEEK_OF_YEAR=1,WEEK_OF_MONTH=5,DAY_OF_MONTH=31,DAY_OF_YEAR=365,DAY_OF_WEEK=4,DAY_OF_WEEK_IN_MONTH=5,AM_PM=1,HOUR=9,HOUR_OF_DAY=21,MINUTE=45,SECOND=0,MILLISECOND=0,ZONE_OFFSET=3600000,DST_OFFSET=0]`

SQLTIME`21:45:00`

编辑：我通过使用字符串解决了这个问题......但是这个轴日期/时间对象对日光和时区不是很友好，DateTime 对象的麻烦甚至更糟（再次，我强制解决方案忽略 GMT/Daylights 和使用字符串）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:20:34.313

试试这个：

```
org.apache.axis.types.Time axisTime = (org.apache.axis.types.Time) valore;
Calendar calendarTime = axisTime.getAsCalendar();
java.sql.Time jsqlT = new java.sql.Time(calendarTime.getTimeInMillis()); 
```

这样，您就不应该对夏令时更改有任何问题。

# c# - 使用 LINQ 更新 app.config

> ID：11397711
> 
> 赞同：1
> 
> 时间：2012-07-09T14:59:40.813
> 
> 标签：c#, xml, linq, linq-to-xml, app-config

我有一个 app.config 文件。

我想检索和编辑一个属性：

```
<appSettings>
    <add key="ProcessorInstances" value="2" />
</appSettings> 
```

我正在使用这个查询：

```
var list5 = from appNode in doc2.Descendants("appSettings").Elements() 
            where appNode.Attribute("key").Value == "ProcessorInstances" 
            select appNode;
var element5 = list5.FirstOrDefault();
string five = element5.Attribute("value").Value; 
```

但现在我面临以下元素：

```
<app>
    <file value="../../../logs/Intel.Service.log" />
</app> 
```

和：

```
<baseAddresses>
    <add baseAddress="http://Machinename:portnumber/servicename/" />
</baseAddresses> 
```

这些元素没有任何关键属性。

如何编写 LINQ 查询来编辑它们？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T15:07:54.543

将 app.Config 文件解析为 xml 并使用 Linq 不是从 App.Config 获取设置的方法。而是使用*System.Configuration.ddl*（在您的项目中添加对此文件的引用）。

例如

```
string baseAddress = ConfigurationManager.AppSettings["baseAddress"].ToString(); 
```

# asp.net - ASP.Net 自定义控件 - 覆盖 onkeyup

> ID：11397713
> 
> 赞同：0
> 
> 时间：2012-07-09T14:59:48.670
> 
> 标签：asp.net, onkeyup

我遇到了一个看似简单的问题，却给我带来了很多麻烦。我已经为 ASP.NET 中的文本框定义了一个自定义控件，它具有内置的 onkeyup 属性。我的问题是，在使用此控件时，我想覆盖 onkeyup，但它似乎不起作用。我的源代码如下：

```
this.Attributes.Add("onkeyup", "javascript:" + onKeyUp + ";"); // for the custom control 
```

以及使用时

```
< myControl:SpecialTextBox ID="txtValue" runat="server"/> 
```

在我设置的代码后面

```
txtValue.Attributes.Add("onKeyUp", "DefaultValue();"); 
```

但是，我继续获取自定义控件中定义的 onkeyup，而不是更具体的。有什么解决办法吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T15:03:36.520

尝试`txtValue.Attributes["onKeyUp"] = "DefaultValue();";`在您的页面的代码隐藏中使用，这将覆盖您的自定义控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T15:07:42.797

您可以尝试在用户控件上添加属性，如下所示：

```
public string KeyUp
{
    get
    {
        if (txtValue.Attributes["onKeyUp"] == null)
            return string.Empty;

        return txtValue.Attributes["onKeyUp"]
    }
    set
    {
        txtValue.Attributes["onKeyUp"] = value;
    }
} 
```

在您的服务器端 asp.net 标签上，您可以调用此属性并设置值：

```
<myControl:SpecialTextBox ID="txtValue" runat="server" KeyUp="DefaultValue();" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T15:04:06.230

您可以将属性添加到您的`CustomControl`：

```
public string OnClientKeyUp { get { /**/ } set { /**/ } 
```

设置默认值，`OnInit`以便您稍后可以在页面中覆盖（例如`Page_Load`）。

# perl - 仅对数字评估 Perl 字符串为零

> ID：11397714
> 
> 赞同：1
> 
> 时间：2012-07-09T14:59:59.520
> 
> 标签：perl

我有一种情况，我希望变量作为字符串或数字传递给我。

IE

```
sub foo {
    # These can be either strings or numbers
    my ($bar, $var, $star) = @_;

    # I need to check to see if $bar is the number 0 (zero)
    if ($bar == 0) {
        # Do super magic with it
    }
} 
```

`$bar`不幸的是，当 Perl包含一个字符串时，它试图发挥超级魔力。

`$bar`当且仅当它是**数字**0（零）时，我如何告诉 Perl 做超级魔术？

我理解 Perl 从根本上解释是基于上下文的，这是这里的根本问题。这个问题的一个可能的解决方案是使用正则表达式，这很好，但我想知道是否还有另一个更“直截了当”的解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T15:18:22.490

我个人会同意@Disco3 的评论所说的。

```
if ($bar eq 0) { ... } 
```

这适用于`$bar = 0`，`$bar = 'foo'`并`$bar = 123`给出预期的结果。

不过，这是一个有趣的事实：

```
use Benchmark qw(cmpthese);
my $bar = '0';

cmpthese(-1, {
  'quoted'    => sub { $bar eq '0'    },
  'unquoted'  => sub { $bar eq 0      },
  'regex'     => sub { $bar =~ m/^0$/ },
}); 
```

对这三种解决方案进行基准测试告诉我们，未引用`0`是最快的方法。

```
 Rate    regex   quoted unquoted
regex     4504851/s       --     -70%     -76%
quoted   15199885/s     237%       --     -19%
unquoted 18828298/s     318%      24%       -- 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T15:08:59.407

为什么不：

```
if ( $bar =~ m/^0$/ ) { 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T16:06:37.677

这取决于您所说的“数字0”是什么意思。显然，你包含的一个字符串`0`是零。但是你对三个字符串`0.0`呢？

如果您只想匹配一个字符串`0`，请使用

```
if ($bar eq '0') {
   ...
} 
```

如果您想匹配 Perl 认为的数字零，请使用

```
use Scalar::Util qw( looks_like_number );

if (looks_like_number($bar) && $bar == 0) {
   ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T18:25:29.100

之间`looks_like_number`和数值比较，你可以很容易地得到相当不错的结果：

```
use Scalar::Util qw(looks_like_number);
use Test::More tests => 7;

sub is_numerically_zero {
    my ($string) = @_;

    return (looks_like_number($string) and $string == 0);
}

for my $string (qw(0 0.0 0e0), '  0  ') {
    ok(is_numerically_zero($string));
}

for my $string (qw(duckies 123), '') {
    ok(not is_numerically_zero($string));
} 
```

这假设您不想只匹配文字 string `'0'`。

# ruby-on-rails - 使用 koala Ruby gem 从 Facebook 检索朋友的education_history

> ID：11397716
> 
> 赞同：0
> 
> 时间：2012-07-09T15:00:06.670
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, koala, fb-graph

我想检索用户朋友education_history，我正在使用koala gem 和rubyonrails。

我在omniauth的初始化文件中添加了获取用户朋友education_history的权限：`:scope => 'user_education_history,friends_education_history`

到目前为止，我可以获得用户朋友：name 和：id，但不知道如何获得用户朋友 education_history。

```
def add_friends
    facebook.get_connections("me", "friends").each do |hash|
      self.friends.where(:name => hash['name'], :uid => hash['id']).first_or_create
    end
end 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:51:36.537

我通过使用考拉提供的字段键解决了我的问题，它更高效且运行速度更快：

```
def add_friends
    facebook.get_connections("me", "friends", :fields => "name, id, education").each do |hash|
      self.friends.where(:name => hash['name'], :uid => hash['id'], :highschool_name => hash['education'][0]['school']['name'], :graduateschool_name => hash['education'][1]['school']['name']).first_or_create
    end
  end 
```

# c# - 编译查询返回类型不可隐式转换

> ID：11397717
> 
> 赞同：0
> 
> 时间：2012-07-09T15:00:07.023
> 
> 标签：c#, entity-framework, lambda

我为我的代码优先实体模型编写了以下编译查询。但是，我需要帮助才能正确编译。下面是我的类的代码，然后是我为查询 BudgetContext 对象以获取此信息而编写的已编译查询

```
[DataContract]
public class BudgetSummary : IBudgetSummary, IEntity
{
    public int Id{ get()}
    public int MDACode{ get; set; }

    public DateTime BudgetYear{ get; set; }

    public virtual IList<IBudgetItem> budgetitems{ get; set; }

}

public class BudgetContext : DbContext
{ 
    public DbSet<Post> Posts { get; set; }
    public DbSet<Comment> Comments { get; set; }
    public DbSet<BudgetItem> BudgetItems { get; set; }
    public DbSet<BudgetLineItem> BudgetLineItems { get; set; }
    public DbSet<IBudgetSummary> BudgetSummaries { get; set; }
    public DbSet<MDA> MDAs { get; set; }

}

    static readonly Func<BudgetContext, int, IQueryable<BudgetSummary>> FindBudgetSummaryCompiledQuery =
CompiledQuery.Compile<BudgetContext,int, IQueryable<BudgetSummary>>(
        (ctx, mdaID) => from budgetsummary in ctx.BudgetSummaries
                        where budgetsummary.MDACode >= mdaID
                        select budgetsummary); 
```

**无法将 lambda 表达式转换为委托类型“System.Func>”，因为块中的某些返回类型不能隐式转换为委托返回类型**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T22:10:18.790

我找到了答案。

根据链接[http://blogs.msdn.com/b/adonet/archive/2011/03/02/ef-4-1-is-coming-dbcontext-api-amp-code-first-rtw.aspx](http://blogs.msdn.com/b/adonet/archive/2011/03/02/ef-4-1-is-coming-dbcontext-api-amp-code-first-rtw.aspx)

**1) DbContext 不支持编译查询** 不幸的是，由于我们在 .NET Framework 4.0 中提供的编译查询功能存在一些技术限制，我们无法通过 DbContext API 支持编译查询。我们意识到这是一个痛苦的限制，并将努力在下一个版本中启用此功能。

# javascript - Javascript，将变量传递给点击事件？

> ID：11397718
> 
> 赞同：0
> 
> 时间：2012-07-09T15:00:09.487
> 
> 标签：javascript, jquery

我真的不知道我会怎么做。这更像是一个概念问题而不是代码问题，所以我将发布一个示例：

```
object = $('#div');

function doSomething(object) {
    //iterates through a list and creates a UL with items in corresponding to that list.
    $(body).append("<li id='clickme'>Hello world</li>");
}

function createModal(object) {
    //creates modal dialogue.
    doSomething(object);
    //more stuff
}

$('#clickme').live("click", function() {
    //I need access to object (not the object declared at first,
    //the object passed into doSomething) here.

}); 
```

任何想法我会如何做这样的事情？doSomething 将创建一组 LI 并将参数传递给它。当单击函数创建的那些 LI 时，它们需要与传递给 doSomething 的参数进行交互。有没有办法绑定它们或什么？

对不起，如果我没有任何意义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T15:03:16.537

您可以使用[jquery 数据](http://api.jquery.com/jQuery.data/)函数将数据关联到您的 DOM 元素。然后，您可以在处理事件时读取这些数据。

另一种方法，通常不推荐，但当您在一个大通道中构建 html 并且无法轻松访问 DOM 元素并且只有字符串（或键）时很有用，是添加一个属性并稍后使用检索它[jquery 的 attr](http://api.jquery.com/attr/)函数。不过，我建议您尽可能使用数据功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T15:05:34.187

显式存储引用：

```
function doSomething(object) {
    //iterates through a list and creates a UL with items in corresponding to that list.
    $(body).append(
      $("<li/>", { id: 'clickme', text: 'Hello world',})
        .data('object', object)
    );
} 
```

然后事件处理程序可以检索引用：

```
$('#clickme').live("click", function() {
    var object = $(this).data('object');
    // ...
}); 
```

也`.live()`被弃用：

```
$('body').on('click', '#clickme', function() { 
```

是绑定委托事件处理程序的新方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T15:11:16.927

```
object = $('#div');

function doSomething(object) {
    $(body).append("<li id='clickme'>Hello world</li>");
    $('#clickme').click(function(evt) {
        // Here you have access to `object`
    });
}

function createModal(object) {
    //creates modal dialogue.
    doSomething(object);
    //more stuff
} 
```

这可能还不够。如果您要创建多个链接而不仅仅是一个带有 id 的链接，`clickme`您可能需要在附加点击处理程序时找到一个不同的选择器来使用。但是，如果您以这种方式嵌套函数，则可以访问`object`创建单击处理程序时使用的参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T15:14:23.197

另一种选择是通过闭包（未测试）在参数在范围内的位置声明和附加处理程序：

```
function doSomething(object) {
    $(body).append("<li id='clickme'>Hello world</li>").click(function() {
        //object is accessible here
    });
} 
```

# jquery - Internet Explorer 菜单 z 顺序：为什么不对？

> ID：11397725
> 
> 赞同：1
> 
> 时间：2012-07-09T14:57:40.520
> 
> 标签：jquery, internet-explorer-9

我的 Internet Explorer 9 似乎存在 z 顺序问题。它也可能存在于其他 IE 版本中，但未经测试。我必须这样假设。

本页：[http ://www.modelhelicopters.co.uk/partsfinder/trex500esp/frames](http://www.modelhelicopters.co.uk/partsfinder/trex500esp/frames)

如果您将鼠标悬停在部件查找器菜单栏（货币选择器下方）上的“此型号的所有页面”菜单项上 - 它应该会下拉所选型号直升机的所有部件查找器页面的列表。

如果您在 IE 或 Chrome 等中查看同一页面，您将看到它应该如何显示。

在 IE9 中，菜单在主分解视图图像的顶部被截断 - 表明 z 顺序错误。

我试过用一个 jquery 片段来修改它，但它没有修复 IE9。我知道代码是由 jquery 插入的，如 firefox 中的 firebug 所示。

```
$j('div.std img[src*="/partsfinder/img"]').attr("style","position:relative;z-index:-100;"); 
```

我真的不知道为什么这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:05:57.193

首先，您将 z-index 设置为负值？：

```
z-index:-100; 
```

将您的 z-index 设置为正数，如果这不起作用，请尝试！重要：

```
z-index:999;

z-index:999 !important; 
```

# rest - Restlet 客户端无法与 Jersey 服务进行良好的通信

> ID：11397726
> 
> 赞同：0
> 
> 时间：2012-07-09T15:00:38.510
> 
> 标签：rest, jersey, restlet

我想为我的球衣服务实现一个 restlet 客户端。我知道该服务有效，因为我已经为它开发了一个球衣客户端。但似乎球衣和休息之间的沟通有问题。

**泽西服务**

资源：

```
 @Path("/object")
 @RolesAllowed({"admin", "user"})
 public class ObjectResourceBean implements ObjectResourceIF {
        @POST
        @Consumes({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
        public Response postObject(JAXBElement<ObjectDTO> object) {
            ObjectDTO c = object.getValue();
            String generatedId = generateID();
            c.setObjectId(generatedId);
            c.setOwner(sec.getUserPrincipal().getName());
            return postAndGetResponse(c);
        }

        private Response postAndGetResponse(ObjectDTO object) {
            Response res;

                res = Response.created(UriBuilder.fromUri(uriInfo.getAbsolutePath() + "/" + object.getObjectId()).build()).entity(object).build();
                ObjectDAO.instance.getObjectDao().put(object.getObjectId(), object);

                System.out.println("Response: " + res);
            }
            return res;
        } 
```

Restlet Wrap 接口：

```
 @Path("/object")
    @RolesAllowed({"admin", "user"})
    public interface ObjectResourceIF {
        @Post
        public Response postObject(JAXBElement<ObjectDTO> object);
 } 
```

已经在这里，我不能使用像 @POST 这样的 Jersey 注释。我必须使用 Restlet Framework 中的 @Post。但这不是真正的问题。

**Restlet 客户端**

```
 ClientResource service = new ClientResource("http://localhost:8080/com-project-core/rest");
 service.setChallengeResponse(ChallengeScheme.HTTP_BASIC, "admin", "xxx");
 service.getReference().addSegment("object");
 // *create object*
 JAXBElement<ObjectDTO> object = new JAXBElement<ObjectDTO>(new QName("object"),    ObjectDTO.class, objectOne);
    ObjectResourceIF objectResource = service.wrap(ObjectResourceIF.class);

    List<Preference<MediaType>> acceptedMediaTypes = new ArrayList<Preference<MediaType>>();
    acceptedMediaTypes.add(new Preference(MediaType.APPLICATION_JSON));
    service.getClientInfo().setAcceptedMediaTypes(acceptedMediaTypes);

    Response res = objectResource.postObject(object); 
```

我刚刚收到内部服务器错误 (500)。

```
 Internal Server Error (500) - The server encountered an unexpected condition which prevented it from fulfilling the request
    at org.restlet.resource.UniformResource.toObject(UniformResource.java:649)
    at org.restlet.resource.ClientResource$1.invoke(ClientResource.java:1669)
    at $Proxy12.postObject(Unknown Source)
    at com.project.restlet.RestletConnectedTest.postObject(RestletConnectedTest.java:108)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
    Caused by: com.thoughtworks.xstream.mapper.CannotResolveClassException: objectId : objectId
    at com.thoughtworks.xstream.mapper.DefaultMapper.realClass(DefaultMapper.java:68)
    at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:38)
    at com.thoughtworks.xstream.mapper.DynamicProxyMapper.realClass(DynamicProxyMapper.java:71)
    at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:38)
    at com.thoughtworks.xstream.mapper.PackageAliasingMapper.realClass(PackageAliasingMapper.java:88)
    at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:38)
    at com.thoughtworks.xstream.mapper.ClassAliasingMapper.realClass(ClassAliasingMapper.java:86)
    at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:38)
    at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:38)
    at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:38)
    at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:38)
    at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:38)
    at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:38)
    at com.thoughtworks.xstream.mapper.ArrayMapper.realClass(ArrayMapper.java:96)
    at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:38)
    at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:38)
    at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:38)
    at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:38)
    at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:38)
    at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:38)
    at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:38)
    at com.thoughtworks.xstream.mapper.CachingMapper.realClass(CachingMapper.java:52)
    at com.thoughtworks.xstream.core.util.HierarchicalStreams.readClassType(HierarchicalStreams.java:29)
    at com.thoughtworks.xstream.core.TreeUnmarshaller.start(TreeUnmarshaller.java:136)
    at com.thoughtworks.xstream.core.AbstractTreeMarshallingStrategy.unmarshal(AbstractTreeMarshallingStrategy.java:33)
    at com.thoughtworks.xstream.XStream.unmarshal(XStream.java:923)
    at com.thoughtworks.xstream.XStream.unmarshal(XStream.java:909)
    at com.thoughtworks.xstream.XStream.fromXML(XStream.java:861)
    at org.restlet.ext.xstream.XstreamRepresentation.getObject(XstreamRepresentation.java:166)
    at org.restlet.ext.xstream.XstreamConverter.toObject(XstreamConverter.java:200)
    at org.restlet.service.ConverterService.toObject(ConverterService.java:161)
    at org.restlet.resource.UniformResource.toObject(UniformResource.java:647)
    ... 27 more 
```

在服务器端，请求完成

```
 return res; 
```

当我尝试它而不用包装接口时

```
 service.post(object, MediaType.APPLICATION_JSON).write(System.out); 
```

有用！

正如我所说，泽西客户端也可以工作。

也许转移的类 ObjectDTO 对解决方案很有用：

```
 @XmlRootElement
    @XmlAccessorType(XmlAccessType.FIELD)
    public class ObjectDTO implements Serializable{

        /**
         * 
         */
        private static final long serialVersionUID = -8545841080597549468L;

        @XmlElement(name="objectId")
        private String objectId;
        @XmlElement(name="owner")
        private String owner;
        @XmlElement(name="objectName")
        private String objectName;

        public ObjectDTO() {

        }

        public ObjectDTO(String objectName) {
            this.objectName = objectName;
        }

        public String getObjectId() {
            return objectId;
        }

        public void setObjectId(String objectId) {
            this.objectId = objectId;
        }

        public String getOwner() {
            return owner;
        }

        public void setOwner(String owner) {
            this.owner = owner;
        }
 } 
```

我也试过没有可序列化的。也没有@XmlElement 和@XmlAccessorType(XmlAccessType.FIELD)。我也试过了

```
 @Consumes({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON}) 
```

界面上的注释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:56:43.047

我们在 Jersey 服务器和 Restlet 客户端上遇到了同样的问题，但是有一个 get 请求。使用 Restlet 客户端与 Restlet 服务器通信，我们没有任何问题。所以我们可以看到的唯一区别是，Restlet 服务器实现将编组 POJO 的完整限定类名称包装为 JSON 对象，围绕包含 POJO 有效负载的 JSON 对象。

```
package com.xyz;

    public class ExamplePojo implements Serializable{

        private static final long serialVersionUID = 1L;

        private String var;

        public ExamplePojo(){

        }
    //... 
    } 
```

Restlet 服务器上生成的 json 字符串：

```
{"com.xyz.ExamplePojo":{"var":"10:23:53 30.10.2012"}} 
```

但是如果没有生成 MediaType.APPLICATION_JSON，则 Jersey 服务器在其默认实现中。泽西服务器上生成的 json 字符串：

```
{"var":"10:23:53 30.10.2012"} 
```

问题是，如果我们尝试通过 Restlet 客户端与 Jersey 服务器进行通信，我们会遇到与您的堆栈跟踪相同的错误，其根本原因是：

```
Caused by: com.thoughtworks.xstream.mapper.CannotResolveClassException: var : var 
```

我们的解决方案是，如果使用带有 Jersey 服务器实现的 Restlet 客户端，我们必须明确定义 JacksonConverter。

因此，我们将 Restlet zip 中的库放在客户端项目的构建路径中

```
org.restlet.ext.jackson.jar     
org.codehaus.jackson.core.jar           
org.codehaus.jackson.mapper.jar 
```

（资源接口）

```
public interface PojoResource {
    @Get("json")
    public ExamplePojo retrieve();
} 
```

然后我们将显式 JacksonConverter 添加到已注册的转换器中

```
public ExamplePojo doRequest(){
    ClientResource cr = new ClientResource( url ); 
    // this is essential for Restlet-Jersey marshalling  
    Engine.getInstance().getRegisteredConverters().add( 0, new JacksonConverter() ); 
    PojoResource resource = cr.wrap( PojoResource.class );
    return resource.retrieve();
} 
```

一切正常。

请注意，显式调用

```
Engine.getInstance().getRegisteredConverters().add( 0, new JacksonConverter() ); 
```

在 Reslet-Client 上与 Restlet-Server 的通信不起作用，但导致

```
org.codehaus.jackson.map.JsonMappingException 
```

因为将 JSON 对象“com.xyz.ExamplePojo”包装为无法识别的字段，必须将其标记为可忽略。

因此，在您的情况下，Restlet 似乎也没有找到用于解组的转换器，因此请尝试指定一个明确的转换器。

# c# - 词法分析器和解析器之间的通信

> ID：11397731
> 
> 赞同：37
> 
> 时间：2012-07-09T15:00:47.893
> 
> 标签：c#, c++, parsing, compiler-construction, lexer

每次我编写一个简单的词法分析器和解析器时，我都会偶然发现同一个问题：词法分析器和解析器应该如何通信？我看到四种不同的方法：

1.  词法分析器急切地将整个输入字符串转换为标记向量。完成此操作后，将向量馈送到解析器，解析器将其转换为树。这是迄今为止实现的最简单的解决方案，但由于所有令牌都存储在内存中，因此浪费了大量空间。

2.  每次词法分析器找到一个标记时，它都会调用解析器上的一个函数，传递当前标记。以我的经验，这只有在解析器可以自然地实现为像 LALR 解析器这样的状态机时才有效。相比之下，我认为它根本不适用于递归下降解析器。

3.  每次解析器需要一个令牌时，它都会向词法分析器询问下一个令牌。由于`yield`关键字，这在 C# 中很容易实现，但在没有它的 C++ 中很难实现。

4.  词法分析器和解析器通过异步队列进行通信。这在“生产者/消费者”的标题下是众所周知的，它应该大大简化了词法分析器和解析器之间的通信。它是否也优于其他多核解决方案？还是词法太琐碎？

我的分析合理吗？还有其他我没有想到的方法吗？实际编译器中使用什么？如果像 Eric Lippert 这样的编译器作者能够对这个问题有所了解，那将是非常酷的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T15:31:46.543

虽然我不会将以上大部分内容归类为*不正确*的，但我确实相信有几项具有误导性。

1.  在运行解析器之前对整个输入进行词法分析与其他选项相比具有许多优势。实现方式各不相同，但一般来说，此操作所需的内存不是问题，尤其是当您考虑您希望用于报告编译错误的信息类型时。

    *   好处
        *   错误报告期间可能会提供更多信息。
        *   以允许在解析之前进行词法分析的方式编写的语言更容易指定和编写编译器。
    *   缺点
        *   某些语言需要上下文相关的词法分析器，而这些词法分析器在解析阶段之前根本无法运行。

    **语言实现说明：**这是我的首选策略，因为它会生成可分离的代码，并且最适合翻译为实现该语言的 IDE。

    **解析器实现说明：**我用 ANTLR v3 试验了这种策略的内存开销。C 目标每个令牌使用超过 130 个字节，Java 目标每个令牌使用大约 44 个字节。使用修改后的 C# 目标，我展示了可以完全表示每个标记仅 8 个字节的标记化输入，这使得该策略即使对于非常大的源文件也很实用。

    **语言设计说明：**我鼓励人们设计一种新语言，以*允许*这种解析策略的方式这样做，无论他们最终是否选择它作为他们的参考编译器。

2.  看来你已经描述了我通常看到的“拉”解析器的“推”版本，就像你在＃3中一样。我的工作重点一直是 LL 解析，所以这对我来说并不是一个真正的选择。如果这对#3 有好处，我会感到惊讶，但不能排除它们。

3.  其中最具误导性的部分是关于 C++ 的陈述。在 C++ 中正确使用迭代器使其*非常*适合这种类型的行为。

4.  队列似乎是对#3 的重演，中间有一个中间人。虽然抽象独立操作在模块化软件开发等领域具有许多优势，但用于可分发产品的词法分析器/解析器对对性能非常敏感，并且这种类型的抽象消除了对数据结构和内存布局进行某些类型优化的能力. 我会鼓励在此使用选项#3。

    作为多核解析的附加说明：单个编译单元编译的初始词法分析器/解析器阶段通常不能并行化，它们也不需要考虑在不同编译单元上简单地运行并行编译任务是多么容易（例如，对每个源文件进行一个词法分析器/解析器操作，跨源文件并行化，但对任何给定文件仅使用单个线程）。

关于其他选项：对于旨在广泛使用（商业或其他）的编译器，通常实现者选择在目标语言的约束下提供最佳性能的解析策略和实现。使用简单的 LR 解析策略可以非常快速地解析某些语言（例如 Go），而使用“更强大”的解析策略（阅读：不必要的功能）只会减慢速度。其他语言（例如 C++）极具挑战性或无法使用典型算法进行解析，因此采用了速度较慢但功能更强大/更灵活的解析器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T16:04:14.143

我认为这里没有黄金法则。要求可能因情况而异。因此，合理的解决方案也可能不同。让我根据我自己的经验评论您的选择。

1.  “令牌向量”。此解决方案可能会占用大量内存。想象一下编译带有很多头文件的源文件。存储令牌本身是不够的。错误消息应包含带有文件名和行号的上下文。词法分析器可能会依赖于解析器。合理的例子：“>>” - 这是一个移位运算符还是关闭 2 层模板实例？我会否决这个选项。

2.  (2,3)。“一个部分调用另一个部分”。我的印象是，更复杂的系统应该调用不太复杂的系统。我认为词法分析器更简单。这意味着解析器应该调用词法分析器。我不明白为什么 C# 比 C++ 更好。我将 C/C++ 词法分析器实现为从基于语法的解析器调用的子例程（实际上这是一个复杂的类）。在这个实现中没有问题。

3.  “沟通过程”。在我看来，这有点矫枉过正。这种方法没有错，但也许最好保持简单？多核方面。编译单个文件是比较少见的情况。我建议使用自己的文件加载每个核心。

我看不到将词法分析器和解析器组合在一起的其他合理选择。

我写这些笔记是为了考虑编译软件项目的源代码。解析一个简短的查询请求是完全不同的事情，原因可能会有很大的不同。我的回答是基于我自己的经验。其他人可能对此有不同的看法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-09T15:13:59.717

lexer-parser 关系比[coroutines](http://en.wikipedia.org/wiki/Coroutine)的最一般情况更简单，因为通常通信是单向的；解析器不需要将信息发送回词法分析器。这就是急切生成方法有效的原因（虽然它确实意味着您可以更早地丢弃输入，但会受到一些惩罚）。

正如您所观察到的，如果词法分析器或解析器中的任何一个可以以可重新调用的样式编写，那么另一个可以被视为一个简单的子例程。这总是可以实现为源代码转换，将局部变量转换为对象槽。

尽管 C++ 没有对协程的*语言*支持，但可以利用*库*支持，尤其是[fiber](http://en.wikipedia.org/wiki/Fiber_%28computer_science%29)。Unix`setcontext`系列是一种选择；另一种是使用多线程，但使用*同步*队列（本质上是单线程，但在两个控制线程之间切换）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-09T15:26:57.057

还要考虑 #1 是否使用不需要它的 lex 令牌，例如，如果有错误，此外，您可能会在内存或 I/O 带宽上运行不足。我相信最好的解决方案是由 Bison 等工具生成的解析器使用的解决方案，解析器调用词法分析器来获取下一个标记。最小化空间需求和内存带宽需求。

`#4`只是不值得。词法分析和解析本质上是同步的——只是没有足够的处理来证明通信成本是合理的。此外，通常您会同时解析/解析多个文件——这已经可以一次最大化您的所有内核。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-09T15:12:31.763

我在我正在进行的玩具构建系统项目中处理它的方式是拥有一个“文件阅读器”类，带有一个函数`bool next_token(std::string&,const std::set<char>&)`. 此类包含一行输入（用于带有行号的错误报告）。该函数接受一个`std::string`将标记放入的引用，以及`std::set<char>`包含“标记结束”字符的 a。我的输入类既是解析器又是词法分析器，但如果你需要更多花哨的东西，你可以很容易地把它分开。所以解析函数只是调用`next_token`并且可以做他们的事情，包括非常详细的错误输出。

如果您需要保留逐字输入，则需要存储在 a`vector<string>`或其他内容中读取的每一行，但不要单独存储每个标记和/或双 y。

我正在谈论的代码位于此处：

[https://github.com/rubenvb/Ambrosia/blob/master/libAmbrosia/Source/nectar_loader.cpp](https://github.com/rubenvb/Ambrosia/blob/master/libAmbrosia/Source/nectar_loader.cpp)

（搜索`::next_token`和`extract_nectar`功能是一切开始的地方）

# php - 使用 php 和 simplexml_load_string 解析失败时，xml 标记中冒号的正则表达式

> ID：11397734
> 
> 赞同：0
> 
> 时间：2012-07-09T15:00:51.407
> 
> 标签：php, xml, regex

[在我上一个问题](https://stackoverflow.com/questions/11373387/accessing-or-listing-unknown-attributes-of-xml-nodes-with-php)的后续步骤中，如果您的 xml 文件中有一个格式错误的字符串，您可以使用 preg_replace_callback() 提取内容以删除中断的元素。

> 这个函数的重点不是用正则表达式解析 xml（一个**坏主意**），而是试图找到不解析的 xml 以及它失败的地方，以便我们可以在发送之前标记格式不正确的文章出去。这是在交付前清理内容的一组工具的一部分。我正在对已知的格式错误的公共 RSS url 以及内部 URL 进行测试，以查看它是否适合多种情况。回调将为失败的节点返回一个整数。如果之后通过，我们可以报告文章的索引，然后尝试使用 DOMDocument 尝试更正 html 并重试。如果失败，我们将其报告为关键，否则，我们将解析文章描述和内容返回到数据库，并将其标记为在交付前修改。

然后，您可以获取损坏的元素并通过 DOMDocument 运行它们以更好地格式化它们以返回 XML 文件。

但是，我被困在如何使下面的示例返回 false 之外：

示例 XML：

```
<item>
    <content:encoded><![CDATA[
        This is the text with odd characters that are killing 
        simplexml_load_string() (doesn't recover) and breaking 
        (although recoverable) DOMDocument
    ]]></content:encoded>
</item> 
```

如果我使用以下 PHP，我可以提取描述节点并将其转换为：

```
<description><![CDATA[
    This is some description text with the same problem
]]></description> 
```

到

```
<description>0</description> 
```

PHP：

```
preg_replace_callback(
    '/<description>(.*)<\/description>/', **// add msU modifiers to fix below**
    'node_tidy::callback_description',
    $xml
); 
```

...

```
private function callback_description($matches=false) {
    if(false !== $matches) {
        $this->arrDescriptions[] = $matches[1];
        return '<description>'.$this->indexDescriptions++.'</description>';
    } else {
        return false;
    }
} 
```

但是，当我尝试对`content:encoded`节点执行相同操作时，它返回 false。这是相关的功能：

```
private function callback_content_encoded($matches=false) {
    if(false !== $matches) {
        $this->arrContentEncoded[] = $matches[1];
        return '<content:encoded>'.$this->indexContentEncoded++.'</content:encoded>';
    } else {
        return false;
    }
} 
```

使用直接正则表达式来测试它是否是冒号，我使用了这个：

```
<?php

$string = '<content:encoded>this is some text</content:encoded>';
preg_match('/<content\:encoded>(.*)<\/content\:encoded>/',$string,$matches);

echo '<pre>';
print_r($matches);
echo '</pre>';

?> 
```

但是，无论是否添加`\:`. 有人可以为这里的误解指出正确的方向吗？

非常感谢！

更新：这是失败的真实 xml 的示例片段，如@Florent 所示。

[http://pastebin.com/7z0f3MJP](http://pastebin.com/7z0f3MJP)

更新：这个正则表达式匹配所需的内容：

```
preg_match('/<content\:encoded>(.*)<\/content\:encoded>/msU',$string,$matches); 
```

m 和 s 和 U 修饰符在这里解释得更好： [http ://www.php.net/manual/en/reference.pcre.pattern.modifiers.php](http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php)

我忽略了考虑这些修饰符。

结果现在由这个正则表达式返回，包括原来的问题，所以现在可以解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T16:01:44.767

您应该将以下标志添加到您的正则表达式中：

*   `m`启用多行字符串
*   `u`启用 UTF8 字符串（如有必要）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:17:05.613

未使用多行修饰符，因此不需要它。只有 /s（全点）修饰符是必需的。/U（不贪婪）修饰符永远不应该使用（在我看来）。应该使用 /u (unicode) 修饰符。

如果您希望在 CDATA 结构中解包 html，最好使用 w3c 规范，即，即使您的 xml 对其标签使用命名空间名称。仅当 xml 标记中的唯一元素是 CDATA 时，并且假定 xml 格式正确。

在现实世界中，评论可以包装 CDATA，反之亦然，以及隐藏许多其他内容。因此，现实情况是，正则表达式可能能够解析格式错误的 xml，然后恢复，但它并不可靠，而且肯定更复杂。

话虽如此，这将从您的示例中提取 CDATA，并且仅在字面意义上。

```
if (preg_match(
   '~<content:encoded\s*>
       \s*
       <!\[CDATA\[ (.*?) \]\]>
       \s*
     </content:encoded\s*>~xsu',
    $string,
    $matches) )
{
 print ( $matches[1] );
} 
```

# java - Java：画线 Slick LWJGL OpenGL

> ID：11397738
> 
> 赞同：2
> 
> 时间：2012-07-09T15:01:02.670
> 
> 标签：java, opengl, lwjgl

我正在学习如何使用 OpenGL 并开始围绕 Slick 2D 游戏库构建一些实验，但我遇到了一些问题。

我正在尝试绘制简单的线条，将它们存储在一个数组中，然后遍历该数组以呈现每一行。这是主要课程：

```
 ArrayList<Bloco> listaBlocos = new ArrayList<Bloco>();
ArrayList<Linha> listaLinhas = new ArrayList<Linha>();
boolean random = false;

@Override
public void init(GameContainer gc) throws SlickException {
    listaBlocos = new ArrayList<Bloco>();
    listaLinhas = new ArrayList<Linha>();
}

@Override
public void update(GameContainer gc, int delta) throws SlickException {
    Input input = gc.getInput();

    if (input.isMousePressed(0))
        listaBlocos.add(new Bloco(input.getMouseX() - 5, input.getMouseY() - 5, 10, new Color(0, 255, 0)));
    if (input.isMousePressed(1))
        listaBlocos.add(new Bloco(input.getMouseX() - 5, input.getMouseY() - 5, 10, new Color(255, 0, 0)));

    if (input.isKeyPressed(Input.KEY_A))
        if (random == false)
            random = true;
        else
            random = false;

    if (input.isKeyPressed(Input.KEY_S))
        listaLinhas.add(new Linha(input.getMouseX(), input.getMouseY(), 100, 100));

    if (input.isKeyDown(Input.KEY_D))
        listaLinhas.get(0).drawLine();

    if (!listaBlocos.isEmpty() && random)
        for (Bloco b : listaBlocos)
            b.moveRandom(delta);

}

public void render(GameContainer gc, Graphics g) throws SlickException {

    for (Linha l : listaLinhas)
        l.drawLine();

    for (Bloco b : listaBlocos)
        b.draw(g);

} 
```

这是 Linha 类（它扩展了 Line）：

```
public class Linha extends Line {

public Linha(float x1, float y1, float x2, float y2) {
    super(x1, y1, x2, y2);
}

public void drawLine() {

    GL11.glColor3f(1.0f, 1.0f, 1.0f);
    GL11.glBegin(GL11.GL_LINES);
    GL11.glLineWidth(5.0f);
    GL11.glVertex2f(getX1(), getY1());
    GL11.glVertex2f(getX2(), getY2());
    GL11.glEnd();
} 
```

}

这只是为了测试，如果有更好的方法来渲染一堆线条，请告诉我。问题是线条在屏幕上闪烁，它们并不总是全彩。我已经记录了这个问题，所以你可以看到发生了什么[http://www.youtube.com/watch?v=ymO00yb5NVE](http://www.youtube.com/watch?v=ymO00yb5NVE)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:06:45.130

我猜你在渲染中看到了奇怪的东西，因为你没有限制你的 FPS。

```
AppGameContainer gameContainer = new AppGameContainer(new Game("My Game"));
gameContainer.setTargetFrameRate(30); 
```

对 FPS 没有限制可能会导致您的`update`方法无法以足够的间隔定期调用，因为您的游戏`render`过于频繁地调用该方法。

# android - 在 Android 中以编程方式创建平行四边形 Drawable

> ID：11397744
> 
> 赞同：4
> 
> 时间：2012-07-09T15:01:17.823
> 
> 标签：android, toggle, drawable

我正在尝试重新创建 Ice Cream Sandwich 中看到的切换幻灯片，但对于 ICS 以下的 Android 版本不可用。我对我的滑块感到满意，但是我目前正在使用两个平行四边形图像（一个用于关闭状态，一个用于打开状态）。我想理想地在运行时创建可绘制对象，并根据状态简单地更改它的颜色。这最终将真正有助于定制。

一般来说，我对drawables很陌生，并且想以编程方式创建这个，因为在我们的框架中我们不使用xml。

创建这个的原因是平行四边形是一个整体，使缩放更易于管理和可定制。

任何帮助将不胜感激，如果您需要更多信息，请告诉我！

这就是 androids toggle 的样子，我想模仿他们的： ![ICS 切换](../Images/d13115947270a628b0f8da9ff34157a8.png)

如果您需要任何其他详细信息，请告诉我，我希望我以有意义的方式解释了我所追求的。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T15:53:11.887

所以我能够自己回答这个问题......我使用路径来创建可绘制对象，然后将它们缝合在一起以创建平行四边形。

```
public Drawable createThumbDrawable(boolean checked){
    Path path = new Path();
    path.moveTo(0, 0);
    path.lineTo(1, 0);
    path.lineTo(1, 1);
    path.lineTo(0, 1);
    path.close();

    PathShape shape = new PathShape(path, 1, 1);
    ShapeDrawable drawable = new ShapeDrawable(shape);
    if (checked){
        drawable.getPaint().setColor(Color.CYAN);
    }
    else
    {
        drawable.getPaint().setColor(Color.BLACK);
    }
    mThumbLeftDrawable = createLeftThumbDrawable(checked);
    mThumbRightDrawable = createRightThumbDrawable(checked);
    return drawable;
}

public Drawable createLeftThumbDrawable(boolean checked){
    Path path = new Path();
    path.moveTo(0, 25);
    path.lineTo(25, 0);
    path.lineTo(25, 25);
    path.close();

    PathShape shape = new PathShape(path, 25, 25);
    ShapeDrawable drawable = new ShapeDrawable(shape);
    if (checked){
        drawable.getPaint().setColor(Color.CYAN);
    }
    else
    {
        drawable.getPaint().setColor(Color.BLACK);
    }
    return drawable;
}

public Drawable createRightThumbDrawable(boolean checked){
    Path path = new Path();
    path.moveTo(0,0);
    path.lineTo(25, 0);
    path.lineTo(0, 25);
    path.close();

    PathShape shape = new PathShape(path, 25, 25);
    ShapeDrawable drawable = new ShapeDrawable(shape);
    if (checked){
        drawable.getPaint().setColor(Color.CYAN);
    }
    else
    {
        drawable.getPaint().setColor(Color.BLACK);
    }
    return drawable;

}

public void setChecked(boolean checked) {
    //Log.d(TAG, "setChecked("+checked+")");
    boolean lc = checked;
    if (!mTextOnThumb) {
        lc = !checked;
    }

    if (checked){
        mThumbDrawable = createThumbDrawable(checked);//this.getContext().getResources().getDrawable(R.drawable.slide_off);
    }
    else {
        mThumbDrawable = createThumbDrawable(checked);//this.getContext().getResources().getDrawable(R.drawable.slide); 
    }

    super.setChecked(checked);
    mThumbPosition = lc ? getThumbScrollRange() : 0;
    invalidate();
} 
```

# php - 通过 HTML 表单将值从 aspx 传递到 php，然后将它们存储在 mysql 数据库中

> ID：11397748
> 
> 赞同：-5
> 
> 时间：2012-07-09T15:01:28.053
> 
> 标签：php, asp.net, mysql

我是否可以使用 aspx 表单将值传递给 php 表单，然后将该数据存储在 mysql 数据库中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T15:04:33.483

从您的 ASPX 表单中，将操作设置为您的 PHP 页面。从这里，您可以通过您创建的 PHP 页面处理表单中的所有内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T15:05:42.950

您所需要的只是一个带有指向您的 php 脚本的动作的表单，然后当用户单击提交时，它将调用您的脚本：

```
<form method="POST" action="myPage.php"> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T15:06:02.753

表单（在此上下文中）既不是 PHP 也不是 aspx - 它们是 HTML。

如果您想通过使用 asp 服务器端脚本向 php 文件发出 POST 请求，那么您将需要检查 cURL（或任何等效的 asp）。

# graph - 如何从图形数据库 Neo4j 中计算叶节点？

> ID：11397751
> 
> 赞同：0
> 
> 时间：2012-07-09T15:01:39.463
> 
> 标签：graph, neo4j, nodes

[http://imageshack.us/photo/my-images/707/graphpw.png/](http://imageshack.us/photo/my-images/707/graphpw.png/)

我想知道如何使用 neo4j 中的方法或其他方法从某个节点获取叶节点的数量？

例子。

在节点 A --> 包含 12 个叶节点 在节点 B --> 包含 6 个叶节点

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:43:30.773

我会将中间关系建模为`contains`，叶关系建模为`leaf`，请参阅[http://console.neo4j.org/r/ulo3yc](http://console.neo4j.org/r/ulo3yc)

然后，你可以做

随着设置

```
create (f1{name:'folder1'}), ({name:'root'})-[:contains]->(f1)-[:leaf]->   (f2{name:'folder2'}), f1-[:leaf]->({name:'folder3'}) 
```

你可以做类似的事情

```
start root=node(1) 
match root-[:contains*0..]->()-[:leaf]->leaf 
return leaf 
```

返回

```
+-------------------------+
| leaf                    |
+-------------------------+
| Node[2]{name:"folder2"} |
| Node[3]{name:"folder3"} |
+-------------------------+ 
```

# extjs - 如何查找表并将新记录附加到其存储区？

> ID：11397752
> 
> 赞同：1
> 
> 时间：2012-07-09T15:01:42.847
> 
> 标签：extjs, extjs4

我需要根据我拥有的一些信息更新商店。

我在文档中有一个表格，它使用一些商店来保存数据，在页面的单独部分我有一个按钮，需要向商店（和表格）添加一些信息。我有点困惑，所以，我只是在这里问我需要知道的一切：

1.  需要指定表配置中的哪个属性来稍后定位表？
2.  我需要拨打哪个电话才能找到桌子并找到它的商店？
3.  如何生成数据并将其附加到表的现有存储中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T20:15:32.190

您所指的“表”是ExtJS 术语中的[Grid](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.Panel)。

1\. 要获取网格供以后使用，您需要对该对象的引用。ExtJS 中有很多方法可以获取这个引用。

**使用 Javascript 变量**：最简单的方法是拥有一个保存引用的 javascript 变量。这通常在创建网格时完成。例如：

```
var myGrid = Ext.create('Ext.grid.Panel', {
    // All the configs...
}); 
```

您可以使用该`myGrid`变量来访问网格。

**使用 ComponentManager**：当一个 ExtJS 组件被创建时，它被注册到组件管理器中。你总是可以从这个寄存器中获得一个 ExtJS 组件。管理器使用唯一 ID 跟踪每个组件。要使用此方法，您必须为您的网格组件定义一个唯一的 id，然后使用著名的`Ext.getCmp()`方法。这是一个例子：

```
var myGrid = Ext.create('Ext.grid.Panel', {
        id: 'myGrid',   // Unique id for the grid
    // All other configs...
}); 
```

使用此方法不是最佳做法。

**使用 itemId 和 Component Query**：比上述两种更好的方法；您可以使用`itemId`config 和[ComponentQuery](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ComponentQuery)。ComponentQuery 类提供基于选择器的 Sencha 组件搜索，类似于 DOM 查询。例子：

```
var myGrid = Ext.create('Ext.grid.Panel', {
        itemId: 'myGrid',   
    // All other configs...
}); 
```

要获得引用，您可以`query()`从容器中调用该方法或使用 Ext.ComponentManager（这是全局的）。

**在 MVC 控制器中访问**：如果您正在使用 MVC 开发应用程序，则可以使用此方法。一个控制器有参考数组，即：`refs`。（在内部，该方法使用 ComponentQuery 和选择器来访问组件）。请参阅 MVC 指南和示例以了解其工作原理。

* * *

2\. 使用上述任何一种技术获取网格后，只需调用以下方法即可获取商店：`getStore()`。这将返回存储对象 ( `Ext.data.Store`)。例子：

```
myStore = myGrid.getStore(); 
```

* * *

3\. 参考[Ext.data.Store](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store)文档。您可以使用 , 等方法来操作网格`add()`的`load()`存储`remove()`...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T22:06:27.780

供参考。它不是

```
Ext.Cmp() 
```

它是

```
Ext.getCmp('myGrid') 
```

# sql - SQL COUNT* GROUP BY 大于，

> ID：11397757
> 
> 赞同：56
> 
> 时间：2012-07-09T15:01:54.297
> 
> 标签：sql, count, group-by

我想用出现数选择不同的键，这个查询似乎是有效的：

```
SELECT ItemMetaData.KEY, ItemMetaData.VALUE, count(*) 
FROM ItemMetaData 
GROUP BY ItemMetaData.KEY 
ORDER BY count(*) desc; 
```

但我也想过滤这些结果，这意味着我只想要 count(*) 大于 2500 的地方，所以只会显示大于 2500 的出现，但是：

```
SELECT * 
FROM 
(
    SELECT ItemMetaData.KEY, ItemMetaData.VALUE, count(*) 
    FROM ItemMetaData 
    GROUP BY ItemMetaData.KEY 
    ORDER BY count(*) desc
) as result WHERE count(*)>2500; 
```

不幸的是，此查询导致语法错误。你能帮我实现我的要求吗？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-07-09T15:04:24.673

聚合的 HAVING 子句

```
SELECT ItemMetaData.KEY, ItemMetaData.VALUE, count(*) 
FROM ItemMetaData 
Group By ItemMetaData.KEY, ItemMetaData.VALUE
HAVING count(*) > 2500
ORDER BY count(*) desc; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-09T15:04:29.993

您应该使用`having`with 组函数而不是`where`. 例如：

```
select ..., count(*) from ... group by ... having count(*) > 2500; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-09T15:04:43.567

您不需要使用子查询 - 只需使用[`having`子句](http://msdn.microsoft.com/en-us/library/8hhs5f4e%28v=vs.80%29.aspx)而不是`where`子句来按聚合列进行过滤。

```
SELECT
ItemMetaData.KEY, ItemMetaData.VALUE, count(*)
FROM ItemMetaData
GROUP BY ItemMetaData.KEY
HAVING count(*) > 2500
ORDER BY count(*) desc 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-08-23T09:16:59.660

解释如下：`WHERE`子句在单个行上引入条件；`HAVING`子句引入了聚合条件。

`WHERE`前后使用。`GROUP BY`_ `HAVING`_ `GROUP BY`这不是强制性的，但在大多数情况下很有帮助。

```
SELECT 
       ItemMetaData.KEY, ItemMetaData.VALUE, СOUNT(*) 
FROM  ItemMetaData 
GROUP BY
       ItemMetaData.KEY, ItemMetaData.VALUE
HAVING СOUNT(*) > 2500
ORDER BY СOUNT(*) DESC; 
```

# javascript - 将数据从 google my-places 地图添加到自定义的 google 地图

> ID：11397758
> 
> 赞同：0
> 
> 时间：2012-07-09T15:01:55.423
> 
> 标签：javascript, google-maps, google-maps-api-3, kml, google-places-api

我用javascript制作了一个定制的谷歌地图： [http ://resortstudio.ch/kontakt/](http://resortstudio.ch/kontakt/)

我想直接从个人 google-my-places-map 添加（导入）许多标记。从类似于此示例的内容：http: [//goo.gl/maps/0uRg](http://goo.gl/maps/0uRg)

换句话说。我想将谷歌地图上保存的个人地图中的数据导入我的自定义样式地图。是否有一种简单的方法可以导入这些地点/标记，而无需将代码中的每个位置都写入我的自定义地图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T15:10:12.717

您可以使用[谷歌地图 API v3 中的 KmlLayer](https://developers.google.com/maps/documentation/javascript/layers#KMLLayers)来导入 KML。该地图有一个[KML 版本可用](https://maps.google.ch/maps/ms?ie=UTF8&msa=0&output=kml&msid=214148915556581732425.00048c8d7a85cb1291e7e)。

[这是一个显示您使用 API v3 提供的示例的示例](http://www.geocodezip.com/v3_GoogleEx_layer-kml_linkto.html?filename=https%3A%2F%2Fmaps.google.ch%2Fmaps%2Fms%3Fie%3DUTF8%26msa%3D0%26output%3Dkml%26msid%3D214148915556581732425.00048c8d7a85cb1291e7e)

您询问：

> 1.  有没有办法直接链接到谷歌地图上的 KML 文件，而不是自己下载/将 KML 文件放在服务器上？

*   上面的示例使用直接指向存储在 Google 服务器上的 kml 文件的链接。

> 2.  当我加载 KML 图层时，它会忽略我定义的地图“中心”。在上面的示例中也发生了同样的情况，其中“中心”设置为芝加哥，但被 KML (NYC) 覆盖。有什么方法可以覆盖 KML 中心设置？

*   在 KmlLayerOptions 中设置[preserveViewport 。](https://developers.google.com/maps/documentation/javascript/reference#KmlLayerOptions)

* * *

您可以通过单击已保存地图中的 KML 链接来下载上述 KML，请参见下图并注意最后一个链接 (KML)。

![在此处输入图像描述](../Images/e2da7a5910d9d444215b4a1021ec7a23.png)

# python - python os.path.getsize 不同于 len(f.read())

> ID：11397761
> 
> 赞同：2
> 
> 时间：2012-07-09T15:01:57.733
> 
> 标签：python, file, fread

我有一个文件 file.txt

正在做

```
print os.path.getsize(filename) 
```

输出

> 6510

和做

```
print len(open(filename).read()) 
```

得到我

> 6355

怎么会 ？我正在使用 Windows 7。如果我在 Windows 资源管理器中查看文件属性，它会说

> 大小：6.35 KB（6,510 字节）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T15:05:34.820

`open(filename)`以文本模式打开`filename`。

这意味着每个`\r\n`（回车，换行）都将被转换为`\n`Python 字符串中的一个。

好像您的文件有 155 行长。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-09T15:10:17.737

这是因为当文件保存在磁盘上时，文件系统也会使用一些额外的字节来存储文件的不同属性，例如创建日期和上次修改日期。当你这样做

```
print os.path.getsize(filename) 
```

它获取磁盘上实际文件的大小。

但如果你这样做

```
print len(open(filename).read()) 
```

您只需获得内容的长度或存储在文件中的数据，这总是较小的。

正是出于这个原因，Windows 资源管理器的属性窗口会显示大小（即文件内容的实际长度）和磁盘大小，即文件在磁盘上实际占用的字节数。

# javascript - 开始前导入图像

> ID：11397762
> 
> 赞同：0
> 
> 时间：2012-07-09T15:01:58.697
> 
> 标签：javascript, html, html5-canvas

在开始我的 HTML5 游戏之前，我试图导入我所有的源“基本上是图像”，但我不知道该怎么做！我尝试了这段代码，但它不起作用：

```
var canvas = document.getElementById('stage');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
canvas.style.background = 'url(img/tapis.jpg)';
var ctx = canvas.getContext('2d');

var carta = ["img/a1.png","img/a2.png","img/a3.png","img/a4.png","img/a5.png","img/a6.png","img/a7.png",
             "img/a8.png","img/a9.png","img/a10.png",
             "img/b1.png","img/b2.png","img/b3.png","img/b4.png","img/b5.png","img/b6.png","img/b7.png",
             "img/b8.png","img/b9.png","img/b10.png",
             "img/c1.png","img/c2.png","img/c3.png","img/c4.png","img/c5.png","img/c6.png","img/c7.png",
             "img/c8.png","img/c9.png","img/c10.png",
             "img/d1.png","img/d2.png","img/d3.png","img/d4.png","img/d5.png","img/d6.png","img/d7.png",
             "img/d8.png","img/d9.png","img/d10.png"];

var n = carta.length;
carta.forEach(function(srcu) {
var img = new Image();
img.src = srcu;
img.onload = function () {
    --n || oplach();
}
}); 
```

这是 oplach 函数：

```
function oplach(){
    var image = new Image();
    for(var i=0; i<carta.length; i++)
    {
        image.src= carta[i];
        ctx.drawImage(image,(i*40),50);
    }
} 
```

但它不起作用！任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:07:43.620

创建一个隐藏的 div 并将所有图像附加到此 div 中。当您需要在游戏中使用它们时，它们将被完全加载和缓存。

在你的 foreach 循环中有这样的东西。

```
var img = document.createElement("img");
img.src = yoursrc;
document.getElementById("hiddenelement").appendChild(img); 
```

**进一步阅读**

[http://www.mediacollege.com/internet/javascript/image/preload.html](http://www.mediacollege.com/internet/javascript/image/preload.html)

[使用 jQuery 预加载图像](https://stackoverflow.com/questions/476679/preloading-images-with-jquery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T15:05:57.680

像这样将生成的 img 标签添加到 DOM 中。

```
carta.forEach(function(srcu) {
  var img = new Image();
  img.src = srcu;
  img.onload = function () { --n || oplach(); }

  // ADD THE FOLLOWING LINE TO YOUR CODE
  document.documentElement.appendChild(img);
}); 
```

# r - R多个文件“拆分和绘图”

> ID：11397766
> 
> 赞同：0
> 
> 时间：2012-07-09T15:02:32.287
> 
> 标签：r, plot, split, r-factor

我有不同的 csv 文件，我正在阅读这样的文件：

```
files <- list.files("D:/...", pattern = "L01")
for (x in files) {
  (assign(x, read.csv(x, head=TRUE,, sep=",", skip= 92)))
} 
```

我接下来想要实现的是根据名为“案例”的列拆分（分配因子）文件，并为每个“案例”绘制条形图中剩余列的所有平均值。所以最后如果我有 2 个文件、50 个因子和 26 列，我将得到 100 个带有 26 条的图。

所以我需要每个文件，比如，

```
Cases  <- factor(x$Cases) 
```

但是对于每个文件，然后为每个因子绘制 26 条图。

希望这很清楚。

感谢您的任何建议。

例如，对于我拥有的每个文件

```
AAA  col1   col2  col3   ....  
AAA             
BBB  
BBB         
CCC  
CCC    
DDD  
DDD    
EEE  
EEE    
AAA  
AAA     
BBB  
BBB      
CCC  
CCC    
DDD  
DDD    
EEE  
EEE 
```

所以因数是`AAA`, `BBB`, `CCC`, `DDD`, `EEE`。我需要为每个文件绘制这些因子的每一列的平均值。

谢谢你的支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:22:47.970

你的问题措辞不是很清楚，但这样的事情可能会让你开始：

```
# First, some sample data
set.seed(1)
df = data.frame(Cases = sample(LETTERS[1:5], 20, replace=TRUE),
                Set1 = sample(4:10, 20, replace=TRUE),
                Set2 = sample(6:19, 20, replace=TRUE),
                Set3 = sample(1:20, 20, replace=TRUE),
                Set4 = sample(5:16, 20, replace=TRUE))

# Use aggregate to find means by group
temp = aggregate(df[-1], by=list(df$Cases), mean)

# Plot
# par(mfrow=c(2, 2)) # Just for demonstration; used for the attached image
lapply(temp[-1], barplot, names.arg = temp$Group.1)
dev.off() # Reset the graphics device if you've changed par. 
```

这为您提供了以下内容：

![在此处输入图像描述](../Images/a69330a139ef86241f06baf16fff4837.png)

# 更新

再次阅读您的问题后，我*认为*我误解了您想要如何进行分组。以下用于`apply`按行而不是按列绘制。

```
par(mfrow=c(2, 3)) # Just for demonstration 
apply(temp[-1], 1, barplot)
dev.off() # Reset the graphics device 
```

![在此处输入图像描述](../Images/538055b74833aa576ab379ae4aaf9a8a.png)

# 更新[回答评论中的一些问题]

如果您想组合一些因素，我建议在拆分之前创建一个新的因素变量。因此，例如，如果您想按“A+B”、“C”、“D”和“E”（四组而不是五组）进行拆分，您可以执行以下操作：

```
# Create a new factor variable
df$Cases_2 = df$Cases # So you don't overwrite your original data
levels(df$Cases_2) <- ifelse(levels(df$Cases_2) %in% c("A","B"),
                             "AB", levels(df$Cases_2))
# Proceed almost as before
temp = aggregate(df[-c(1, 6)], by=list(df$Cases_2), mean)
apply(temp[-1], 1, barplot) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T17:58:29.090

假设您已经正确设置了数据框，那么使用`aggregate`（或`ddply`来自[plyr](http://plyr.had.co.nz/)包）怎么样？这是一个带有这样一个数据框的玩具示例（您需要将其嵌入到循环中或编写自定义函数）。

```
L01_001 <- data.frame(Cases=gl(5, 2, 5*2*2, labels=c("AAA","BBB","CCC","DDD","EEE")), 
                      replicate(3, rnorm(5*2*2)))
mean.by.case <- with(L01_001, aggregate(L01_001[,-1], list(Cases=Cases), mean))
## opar <- par(mfrow=c(nlevels(L01_001$Cases), 1))
## apply(mean.by.case[,-1], 1, function(x) barplot(x))
## par(opar)
library(lattice)
barchart(~ X1 + X2 + X3 | Cases, mean.by.case) 
```

我不建议使用条形图来可视化您的数据：它们在显示数据的细微变化方面非常糟糕，并且[数据墨水比率](http://www.infovis-wiki.net/index.php/Data-Ink_Ratio)很差。在我看来，克利夫兰的点图或水平图可以完成这项工作。在后一种情况下，您甚至可以在单个页面上表示所有内容，这看起来像是“100 个绘图，其中包含 26 个小节”的一个非常好的替代方案。

# python - 根据文件名python或bash合并文件的好方法

> ID：11397769
> 
> 赞同：0
> 
> 时间：2012-07-09T15:02:57.960
> 
> 标签：python, bash

我有成千上万个这样命名的压缩 csv 文件：

```
result-20120705-181535.csv.gz 
```

181535 表示 18:15:35，现在我想每天合并这些文件（我有一周以上的数据，都像上面的例子一样命名），从凌晨 2:00 到第二天凌晨 2:00 ，然后将处理后的文件移动到一个名为 merge 的文件夹中

所以在当前文件夹中，我有大量的 .csv.gz 文件，我想扫描名称，将所有内容像`20120705-02*, 20120705-03*`...until`20120706-01*`合并`20120705-result.csv.gz`，然后将`20120705-02*, 20120705-03*`...until`20120706-01*`文件移动到一个名为 merge 的文件夹中，然后开始查找第二天的数据：`20120706-02*.....20120707-01*`

我想知道是否使用 python 或 bash 脚本来执行它，以及如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T16:22:17.887

这个答案是完全未经测试的，但希望它能提供一个工作的地方：

```
import datetime
import glob
from collections import defaultdict
import gzip
import os
import shutil

def day(fname):
    """
    Finds the "logical" day (e.g. the day minus 2 hours since your days 
    run from 2AM
    """
    d=datetime.datetime.strptime('result-%Y%m%d-%H%M%S.csv.gz')-datetime.timedelta(hours=2)
    return d.strftime('%Y%m%d')

files=sorted(glob.glob('result-*.csv.gz'))
cat_together=defaultdict(list)
for f in files:
    cat_together[day].append(f)

os.mkdir('merged')
for d,files in cat_together.items():
    outfile=gzip.open(d+'-result.csv.gz','wb')
    for f in files:
        gfile=gzip.open(f)
        outfile.write(gfile.read())
        gfile.close()
        shutil.move(f,'merged')
    outfile.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T15:55:54.010

创建一个包含这些行的文本文件：

```
#!/bin/bash

mkdir merged
shopt -s extglob

d1=$1
d2=$(date -d "$d1 +1 day")

for f in result-@($d1-@(0[2-9]|[1-2][0-9])|$d2-0[01])*.csv.gz ; do
  gzip -cd $f
  mv $f merged/$f
done | gzip > $d1-result.csv.gz 
```

并用`.sh`扩展名保存它（例如，myscript.sh）。接下来，在终端中，键入

```
chmod +x myscript.sh 
```

现在你可以输入类似的东西

```
./myscript.sh 20120705 
```

然后将按照您的描述进行。

要每天自动执行此操作，您可以在`/etc/crontab`文件中添加一行，例如

```
2 2 * * * root ./myscript.sh 
```

假设创建最后一个 .csv.gz 文件需要 1 分钟，再加上 1 分钟以确保 :)

为了使这种自动化方式正常工作，需要对上面的脚本进行一些修改。假设它将在**当天**运行，请更改定义日期的两行：

```
d1=$(date +%Y%m%d -d "now -1 day")
d2=$(date +%Y%m%d) 
```

应该这样做。与往常一样，在自动化之前*彻底测试它！*

# r - 用于滞后回归的 R data.table 分组

> ID：11397771
> 
> 赞同：13
> 
> 时间：2012-07-09T15:03:03.780
> 
> 标签：r, grouping, data.table, reshape

带有数据的表（它是一个 data.table 对象），如下所示：

```
 date         stock_id logret
   1: 2011-01-01        1  0.001
   2: 2011-01-02        1  0.003
   3: 2011-01-03        1  0.005
   4: 2011-01-04        1  0.007
   5: 2011-01-05        1  0.009
   6: 2011-01-06        1  0.011
   7: 2011-01-01        2  0.013
   8: 2011-01-02        2  0.015
   9: 2011-01-03        2  0.017
  10: 2011-01-04        2  0.019
  11: 2011-01-05        2  0.021
  12: 2011-01-06        2  0.023
  13: 2011-01-01        3  0.025
  14: 2011-01-02        3  0.027
  15: 2011-01-03        3  0.029
  16: 2011-01-04        3  0.031
  17: 2011-01-05        3  0.033
  18: 2011-01-06        3  0.035 
```

以上可以创建为：

```
DT = data.table(
   date=rep(as.Date('2011-01-01')+0:5,3) , 
   stock_id=c(1,1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,3),
  logret=seq(0.001, by=0.002, len=18));

setkeyv(DT,c('stock_id','date')) 
```

当然，真正的表格更大，有更多的 stock_id 和日期。旨在重塑此数据表，以便我可以对所有 stockid log_returns 及其相应的 log_returns 进行回归，滞后 1 天（或周末的前交易日）。

最终结果如下所示：

```
 date         stock_id logret lagret
   1: 2011-01-01        1  0.001    NA
   2: 2011-01-02        1  0.003    0.001
   3: 2011-01-03        1  0.005    0.003
   ....
  16: 2011-01-04        3  0.031  0.029
  17: 2011-01-05        3  0.033  0.031
  18: 2011-01-06        3  0.035  0.033 
```

我发现这个数据结构真的很难在不混淆我的股票的情况下构建。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-11T09:52:44.873

由于亚历克斯的评论，只是一些额外的注释。你很难理解这里发生了什么的原因是很多事情都是在一行中完成的。因此，分解事物总是一个好主意。

我们真正想要什么？我们想要一个新列`lagret`，在 data.table 中添加一个新列的语法如下：

```
DT[, lagret := xxx] 
```

where`xxx`必须在 column 中填入您想要的任何内容`lagret`。因此，如果我们只想要一个为我们提供行的新列，我们可以调用

```
DT[, lagret := seq(from=1, to=nrow(DT))] 
```

在这里，我们实际上想要 的滞后值`logret`，但我们必须考虑到这里有很多股票。这就是我们进行自连接的原因，即我们`DT`通过列`stock_id`和将 data.table 与自身连接起来`date`，但是由于我们想要每只股票的先前值，所以我们使用`date-1`。请注意，我们必须先设置键才能进行这样的连接：

```
setkeyv(DT,c('stock_id','date'))
DT[list(stock_id,date-1)]
    stock_id       date logret
 1:        1 2010-12-31     NA
 2:        1 2011-01-01  0.001
 3:        1 2011-01-02  0.003
 4:        1 2011-01-03  0.005
 5:        1 2011-01-04  0.007
 6:        1 2011-01-05  0.009
... 
```

如您所见，我们现在拥有了我们想要的东西。`logret`现在滞后一个周期。但我们实际上希望在 中的新列`lagret`中使用它`DT`，所以我们只需通过调用 [[3L]] 来获取该列（这意味着没有别的意思，然后给我第三列）并将这个新列命名为`lagret`：

```
DT[,lagret:=DT[list(stock_id,date-1),logret][[3L]]]
          date stock_id logret lagret
 1: 2011-01-01        1  0.001     NA
 2: 2011-01-02        1  0.003  0.001
 3: 2011-01-03        1  0.005  0.003
 4: 2011-01-04        1  0.007  0.005
 5: 2011-01-05        1  0.009  0.007
... 
```

这已经是正确的解决方案。在这个简单的例子中，我们不需要，`roll=TRUE`因为日期没有间隔。然而，在一个更现实的例子中（如上所述，例如当我们有周末时），可能会有差距。`DT`因此，让我们通过删除第一只股票中的两天来做一个现实的例子：

```
DT <- DT[-c(4, 5)]
setkeyv(DT,c('stock_id','date'))
DT[,lagret:=DT[list(stock_id,date-1),logret][[3L]]]
          date stock_id logret lagret
 1: 2011-01-01        1  0.001     NA
 2: 2011-01-02        1  0.003  0.001
 3: 2011-01-03        1  0.005  0.003
 4: 2011-01-06        1  0.011     NA
 5: 2011-01-01        2  0.013     NA
... 
```

如您所见，问题在于我们没有 1 月 6 日的值。这就是我们使用的原因`roll=TRUE`：

```
DT[,lagret:=DT[list(stock_id,date-1),logret,roll=TRUE][[3L]]]
          date stock_id logret lagret
 1: 2011-01-01        1  0.001     NA
 2: 2011-01-02        1  0.003  0.001
 3: 2011-01-03        1  0.005  0.003
 4: 2011-01-06        1  0.011  0.005
 5: 2011-01-01        2  0.013     NA
... 
```

只需查看有关如何`roll=TRUE`工作的文档即可。简而言之：如果找不到之前的值（这里`logret`是 1 月 5 日），它只需要最后一个可用的值（这里是 1 月 3 日）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-07T19:26:57.807

### 更新：

在 data.table 的当前开发版本 v1.9.5 中，[实现](https://github.com/Rdatatable/data.table/commit/b8c1b01ac9453750d0e99a388522877eec38f06b)了`shift()`# [965](https://github.com/Rdatatable/data.table/issues/965)，目前有两种类型`type = "lag"`（默认）和`type = "lead"`. 有关`?shift`使用的更多信息，请参阅。

有了这个，我们可以简单地做：

```
# type="lag" may be omitted, as it is the default.
require(data.table) ## 1.9.5+
DT[, lagret := shift(logret, 1L, type="lag"), by=stock_id]
#           date stock_id logret lagret
#  1: 2011-01-01        1  0.001     NA
#  2: 2011-01-02        1  0.003  0.001
#  3: 2011-01-03        1  0.005  0.003
#  4: 2011-01-04        1  0.007  0.005
#  5: 2011-01-05        1  0.009  0.007
#  6: 2011-01-06        1  0.011  0.009
#  7: 2011-01-01        2  0.013     NA
#  8: 2011-01-02        2  0.015  0.013
#  9: 2011-01-03        2  0.017  0.015
# 10: 2011-01-04        2  0.019  0.017
# 11: 2011-01-05        2  0.021  0.019
# 12: 2011-01-06        2  0.023  0.021
# 13: 2011-01-01        3  0.025     NA
# 14: 2011-01-02        3  0.027  0.025
# 15: 2011-01-03        3  0.029  0.027
# 16: 2011-01-04        3  0.031  0.029
# 17: 2011-01-05        3  0.033  0.031
# 18: 2011-01-06        3  0.035  0.033 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T13:38:49.600

感谢 Matthew Dowle 的建议，我能够使用以下内容：

```
DT[,lagret:=DT[list(stock_id,date-1),logret,roll=TRUE][[3L]]] 
```

结果是：

```
 date stock_id logret lagret
 1: 2011-01-01        1  0.001     NA
 2: 2011-01-02        1  0.003  0.001
 3: 2011-01-03        1  0.005  0.003
 4: 2011-01-04        1  0.007  0.005
 5: 2011-01-05        1  0.009  0.007
 6: 2011-01-06        1  0.011  0.009
 7: 2011-01-01        2  0.013     NA
 8: 2011-01-02        2  0.015  0.013
 9: 2011-01-03        2  0.017  0.015
10: 2011-01-04        2  0.019  0.017
11: 2011-01-05        2  0.021  0.019
12: 2011-01-06        2  0.023  0.021
13: 2011-01-01        3  0.025     NA
14: 2011-01-02        3  0.027  0.025
15: 2011-01-03        3  0.029  0.027
16: 2011-01-04        3  0.031  0.029
17: 2011-01-05        3  0.033  0.031
18: 2011-01-06        3  0.035  0.033 
```

# iphone - ios / xcode 使文本书写方向从右到左

> ID：11397773
> 
> 赞同：3
> 
> 时间：2012-07-09T15:03:09.387
> 
> 标签：iphone, ios, xcode, right-to-left

嗨，我正在尝试在 Xcode 中从右到左编写一个字符串，但不知道如何执行此操作。苹果文档说这个快捷方式有效：⌃⌥⌘⇠ 但它对我不起作用。

有谁知道这是怎么做到的？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T15:33:26.920

这是屏幕截图......

![在此处输入图像描述](../Images/48ea31f23fd2a397d41e8480294b2efe.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T15:25:20.187

这里的答案可能是您正在寻找的？

[https://stackoverflow.com/a/6505055/812715](https://stackoverflow.com/a/6505055/812715)

基本思想是添加一个不可见的 uni-code 字符，以启用从右到左的文本方向。

以下是所说内容的摘要： RIGHT-TO-LEFT EMBEDDING Unicode : 202B UTF8 : E2 80 AB

要实际实现它： uiTextView.text = [NSString stringWithFormat:@"\u202B%@",textString];

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T16:30:41.467

你是最新版本的 Xcode，如果没有更新再试试。如果这无助于查找文档的日期。它位于开发人员区域的页面底部。

希望有什么帮助！

# javascript - Html2Canvas 调整大小

> ID：11397785
> 
> 赞同：6
> 
> 时间：2012-07-09T15:03:43.567
> 
> 标签：javascript, html, canvas, screenshot, html2canvas

我正在使用 html2canvas 来获取网页的屏幕截图并将其呈现为缩略图（嗯，400x300，不完全是缩略图）。

基于[屏幕截图控制台代码](http://html2canvas.hertzen.com/screenshots.html)，除缩略图部分外，一切都很好。

如何将图像尺寸设置为 400x300？在萤火虫中，我将属性定位为：`<canvas style="width: 973px; height: 2184px;" width="973" height="2184"></canvas>`. 但是，我无法在我的代码（如下）或 html2canvas.js 中找出硬编码 400x300 参数的位置。

**截图.html：**

```
<html>
<head> 
<title>Screenshot</title> 
<!--[if lt IE 9]>
<script src="//html5shim.googlecode.com/svn/trunk/html5.js">
</script>
<![endif]--> 
</head> 
<body> 
<div class=container> </div> 
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 

<script type="text/javascript" src="js/html2canvas.js"></script> 
<script type="text/javascript">
var date=new Date();
var message,timeoutTimer,timer;
var proxyUrl="http://html2canvas.appspot.com";
function addRow(a,c,d){var b=$("<tr />").appendTo($(a));b.append($("<td />").css("font-weight","bold").text(c)).append($("<td />").text(d))}function throwMessage(b,a){window.clearTimeout(timeoutTimer);timeoutTimer=window.setTimeout(function(){message.fadeOut(function(){message.remove()})},a||2000);$(message).remove();message=$("<div />").html(b).css({margin:0,padding:10,background:"#000",opacity:0.7,position:"fixed",top:10,right:10,fontFamily:"Tahoma",color:"#fff",fontSize:12,borderRadius:12,width:"auto",height:"auto",textAlign:"center",textDecoration:"none"}).hide().fadeIn().appendTo("body")}$(function(){$("#recommended a").click(function(c){c.preventDefault();$("#url").val(this.href);$("button").click()});var a,b;$('input[type="button"]').click(function(){$(a.contentWindow).unbind("load");$(a).contents().find("body").html2canvas({canvasHeight:b.body.scrollHeight,canvasWidth:b.body.scrollWidth,logging:true})});$("#getscreenshot").click(function(d){d.preventDefault();$(this).prop("disabled",true);var c=$("#url").val();$("#content").append($("<img />").attr("src","loading.gif").css("margin-top",40));var f=document.createElement("a");f.href=c;$.ajax({data:{xhr2:false,url:f.href},url:proxyUrl,dataType:"jsonp",success:function(e){a=document.createElement("iframe");$(a).css({visibility:"hidden"}).width($(window).width()/2).height($(window).height()/2);$("#content").append(a);b=a.contentWindow.document;b.open();$(a.contentWindow).load(function(){var g=$(a).contents().find("body"),h={onrendered:function(j){$("#content").empty().append(j);$("#getscreenshot").prop("disabled",false);$("base").attr("href","")},allowTaint:true,taintTest:false,flashcanvas:"src/flashcanvas.min.js"},i=html2canvas(g,h)});$("base").attr("href",f.protocol+"//"+f.hostname+"/"+f.pathname);e=e.replace("<head>","<head><base href='"+f.protocol+"//"+f.hostname+"/"+f.pathname+"'  />");if($("#disablejs").prop("checked")){e=e.replace(/\<script/gi,"<!--<script");e=e.replace(/\<\/script\>/gi,"<\/script>-->")}b.write(e);b.close()}})})});
</script> 

<form class="well form-search"> 
<label for=url>Website URL:</label> 
<input type=url id=url value="http://www.yahoo.com" class="input-medium search-query"/>
<button class=btn id=getscreenshot>Get screenshot!</button> 
</form> 

 <div id=content></div> 

</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-30T16:27:38.377

基于 Mikkos 的提示，以下内容为我唤醒了

```
window.html2canvas([$('body')[0]], {
              onrendered: function(canvas) {
                var extra_canvas = document.createElement("canvas");
                extra_canvas.setAttribute('width',70);
                extra_canvas.setAttribute('height',70);
                var ctx = extra_canvas.getContext('2d');
                ctx.drawImage(canvas,0,0,canvas.width, canvas.height,0,0,70,70);
                var dataURL = extra_canvas.toDataURL();
                var img = $(document.createElement('img'));
                img.attr('src', dataURL);
                // insert the thumbnail at the top of the page
                $('body').prepend(img);
              },
            }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T18:26:04.183

您可以使用缩略图尺寸创建额外的 new`<canvas>`并使用 drawImage() 在这个 new 上按比例缩小它`<canvas>`。

drawImage() 可以读取`<canvas>`为`image`源，您可以设置目标宽度和高度。

[https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Canvas_tutorial/Using_images](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Canvas_tutorial/Using_images)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-09-16T17:58:43.903

这对我很有用...

```
 html2canvas(document.getElementById("divTextOrig"), { allowTaint: true, 
    scrollX:0, scrollY: -window.scrollY}).then(function(canvas)
    {
        document.getElementById("divText1").appendChild(canvas);
        $('canvas').css("width",txtWidth);
        $('canvas').css("height",txtHeight);                    
    }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-12T10:49:41.283

我对您的问题使用了类似的方法，部分基于其他答案:) 由于如果图像是实际图像，调整图像大小会更容易，这是我的代码：

```
var img = new Image();
img.src = canvas.toDataURL("image/png");
img.width = 500;
document.getElementsByClassName('modal-body')[0].appendChild(img); 
```

`canvas`是 html2canvas 函数的输出；`img`然后我使用 img 数据（画布的 base64 编码）创建一个设置源。其余的是标准的好旧javascript：设置img宽度，附加到div元素......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T18:45:47.980

好吧，您可以通过使用该方法从画布上下文中获取引用`getContext('2d')`，然后通过将返回的上下文分配给一个变量（例如。`ctx`），您可以使用上下文`scale`方法将画布上下文缩放到所需的大小。另外，您可以使用样式属性定义画布大小，并通过将实际图像大小除以所需的缩略图大小来设置样式`width`和属性的大小。`height`在最后一步中，您将结果数字放入`ctx.scale(width, height);`方法中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-08T11:17:59.467

对我来说不明确地发现了这种方式（后来我发现它为什么这样做）。只需在位置属性之后添加一些属性，例如 this `doc.addImage(img, 'JPEG', 20, 20, 200, 250)`，最后两个数字让您有机会调整 img 的大小。

# html - updatePanelElement.innerHTML = 渲染；- 未知错误

> ID：11397787
> 
> 赞同：1
> 
> 时间：2012-07-09T15:03:49.253
> 
> 标签：html, asp.net-ajax, updatepanel

我知道标题问题通常是由不正确的 HTML 引起的，但在我的一生中，我看不到我做错了什么。如果有人愿意查看代码并让我知道他们是否发现任何错误，我将不胜感激。

*我已删除代码片段，因为问题在于未提供 HTML*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:40:17.783

我设法弄清楚了这个问题。上一个面板中缺少 span 标签，由于某种原因，这对页面的该部分没有影响，但在 ajaxToolKit:ModalPopupExtender 上显示为错误。多奇怪。

感谢那些花时间查看代码的人。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-30T05:16:10.140

如果您的 gridview 在表格中，则将表格放在更新面板中。

# ruby-on-rails - 在负载平衡环境中识别请求已发送到的服务器？

> ID：11397792
> 
> 赞同：1
> 
> 时间：2012-07-09T15:04:10.753
> 
> 标签：ruby-on-rails, linux, load-balancing, crontrigger

我有一个生成报告的应用程序。我们有一个带有两个按钮“生成报告”和“取消”的网页。

现在点击“生成报告”，我触发了一个生成报告的 cronjob。我有一个负载平衡的环境 L1 & l2 服务器。现在，一旦我单击“生成报告”，cronjob 就会开始在其中一台服务器上运行，所以如果我现在单击“取消”按钮，它有时会抛出错误，因为它会尝试在未运行的服务器上停止 cronjob .

所以问题是“我怎么知道 cronjob 是在哪台服务器上启动并需要停止的”？

# java - 如何在投票方法的 AccessDecisionVoter 实现中获取要获取的 url？

> ID：11397802
> 
> 赞同：1
> 
> 时间：2012-07-09T15:04:42.623
> 
> 标签：java, spring-security

我正在使用 Spring Security 对与控制器匹配的 url 进行基于角色的访问控制。

我想创建一个系统，在其中检查一些 url 的用户权限。我已经创建了一个自定义访问决策投票器并在自定义访问决策管理器中使用它。但到目前为止，我无法获得我想要检查的实际网址。

访问决策投票者是否有可能获得正在投票的实际网址？我可以使用投票接口方法中指定的 Object o 参数吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T20:39:40.963

我想我在[这个答案](https://stackoverflow.com/a/11402701/708434)中回答了你的问题。基本上实现`AccessDecisionVoter<FilterInvocation>`，覆盖`supports(Class<?> clazz)`以仅对[`FilterInvocation`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/web/FilterInvocation.html)对象返回 true，并且在投票方法的第二个参数中，您将拥有带有您正在寻找的方法的`FilterInvocation`对象。`getRequestUrl()`

# php - Symfony2：动态路由前缀

> ID：11397806
> 
> 赞同：3
> 
> 时间：2012-07-09T15:04:54.523
> 
> 标签：php, symfony

我需要创建一个动态路由方案，其中我在路由前面加上一个变化的变量。

这是一个例子：

应用基础路由：/dashboard/

方案 A：/client_a/dashboard/
方案 B：/client_b/dashboard/
方案 C：/client_c/dashboard/

这个想法是保持应用程序核心代码相同，但允许在路由中引用不同的客户端。

设置它的最佳做法是什么？我可以在 routing.yml 中添加一个静态前缀，但除非`prefix: /myparameter`可以动态设置“”，否则这可能对我不起作用。主要原因是现有的 Symfony2 应用程序非常复杂。

如果我使用`/{client_name}/dashboard/`，我将不得不更改应用程序中的所有路径，因为现在我在路由中缺少一个附加参数。因此，我正在寻找一种解决方案，该解决方案允许我改造现有应用程序，而不必触及应用程序主代码。

谢谢，

JB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T02:32:42.783

@Jakub 的评论基本上是正确的。但是，如果像我的情况一样，必须对现有的 Symfony 应用程序进行改造以满足这个新要求，那将是非常乏味的。Symfony 中的安全实现还有一个问题，Symfony 需要登录、login_check 和 logout 方法的静态路径。因此，目前似乎不支持在这些场景中使用前缀。

# c - 在 mount() 上自动检测文件系统

> ID：11397813
> 
> 赞同：3
> 
> 时间：2012-07-09T15:05:19.660
> 
> 标签：c, linux, filesystems, mount

我的应用程序应该安装并检查插入 USB 插槽中的任何 pendrive 的内容。问题是，一些用户可能正在使用格式化为其他文件系统而不是标准“vfat”的笔式驱动器。标准

```
 mount /dev/sda1 /mnt/pendrive -t auto 
```

足以满足我的需要 - 它可以工作，并且将使用内核可读的任何文件系统。`system()`问题是我必须在应用程序中执行此操作，并且当存在“自然”C 解决方案时，我宁愿避免调用和 shell 命令。

```
 #include <sys/mount.h>
 ...
 result = mount("/dev/sda1", "/mnt/pendrive", "vfat" ,0, NULL); 
```

工作正常。但是，如果我替换`"vfat"`为`"auto"`或`NULL`没有安装任何内容。

当我检查了busybox的挂载源时，如果提供'auto'或没有提供文件系统类型，它似乎在mount()调用中将文件系统设置为NULL。但这个技巧似乎对我不起作用。我错过了什么？有没有一些相对简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T15:43:17.913

内核不能自动检测文件系统，所以你必须自己做。

busybox 实际所做的只是遍历所有相关的文件系统，从 /proc/filesystems 解析，然后调用 mount() 直到它成功（参见第[1898](http://git.busybox.net/busybox/tree/util-linux/mount.c)行）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-02T16:46:12.110

为什么不只使用循环？

```
#define MAX 4
const char *FSTypes[MAX] = { "ext4", "btrfs", "ntfs", "vfat" };
short Inc = 0;

for (; Inc < MAX; ++Inc)
{
    if (mount("/source", "/target", FSTypes[Inc], 0, NULL) == 0)
    { /*If it's successful, stop.*/
        break;
    }
} 
```

我意识到这是一个老问题，但这似乎与其他寻找答案的人有关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T18:12:42.417

如果`mount /dev/sda1 /mnt/pendrive -t auto`是你需要做的。然后就这样做。

```
sprintf(cmd, "mount /dev/sda1 /mnt/pendrive -t auto")    
rc = system(cmd); 
```

或者

```
sprintf(cmd, "mount /dev/sda1 /mnt/pendrive -t auto")    
if ((p = popen(cmd, "w")) != NULL)
{
    ...
} 
```

应该可以正常工作。您可能需要收听 udev 事件或扫描 udev 日志以查找当前连接的 USB 大容量存储设备，以获取节点路径，但这应该可以帮助您入门。

# regex - 如何在 case 语句中正确匹配以下消息 ID 格式

> ID：11397816
> 
> 赞同：1
> 
> 时间：2012-07-09T15:05:27.773
> 
> 标签：regex, bash, case

我试图让这个正则表达式模式在 case 语句中工作以匹配可以传递给脚本的特定类型的 ID。我需要将字母数字字符的确切数量与破折号相匹配，以将此消息 ID 与可能传递给此 bash 脚本的任何其他内容区分开来。

消息 id 格式的示例：`c7c3e910-c9d2-71e1-0999-0aec446b0000`

```
#!/bin/bash
until [ -z "$1" ]
 do
    case "$1" in
    "")
        echo "No value passed"
        ;;
    [a-z0-9]\{8\}-[a-z0-9]\{4\}-[a-z0-9]\{4\}-[a-z0-9]\{4\}-[a-z0-9]\{12\})
        echo "Found message ID: $1"
        ;;
    *)
        echo "Server $1"
        ;;
    esac
    shift 
done 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T15:12:26.793

UUID 由十六进制数字组成。

case 语句接受 glob 样式的模式，而不是正则表达式（方括号中的字符范围是可以的，但花括号中的量词不起作用）。

您可以使用 Bash 正则表达式匹配来测试您的字符串。

```
pattern='[[:xdigit:]]{8}-[[:xdigit:]]{4}-[[:xdigit:]]{4}-[[:xdigit:]]{4}-[[:xdigit:]]{12}'
if [[ $1 =~ $pattern ]]
then
    echo "found"
fi 
```

# java - 获取我的窗口的当前标题栏和边框大小并操作截图图像

> ID：11397817
> 
> 赞同：2
> 
> 时间：2012-07-09T15:05:30.187
> 
> 标签：java, swing

我正在试验`Java`和 GUI 操作，我有一个自定义对话框，它是从一个`jPanel`富有想象力的*DLog*创建的，它根据请求出现以收集用户输入。这工作正常，但当然我的对话框不是模态的，这使得其余控件在对话框打开时对用户可见和可访问。一点都不好！

为了克服这个问题，我有一个单独的`jPanel`称为*DLogCover*的窗口大小，但在需要之前它是不可见的。当自定义对话框显示时，我的窗口的屏幕截图被拍摄并显示为*DLogCover*上标签中的图像，该图像显示在我的自定义对话框下方，但高于其他所有内容（在`MODAL_LAYER`a `jLayeredPanel`- 自定义对话框出现在 上`POPUP_LAYER`）。尽管有两个琐碎的问题希望您能提供帮助，但这完全按计划进行。

首先截图当然包括标题栏和窗口的左边框。我已经考虑到这一点，使用了现在对我有用的任意数字，但当然这在每个操作系统上都会有所不同，因为我使用系统外观和感觉，这些大小可能不正确。

**问题**：有什么方法可以确保我的屏幕截图只是我的窗口的内部内容（或任何方法来始终获得窗口标题栏和边框的正确大小，无论操作系统如何）？

其次，虽然我的屏幕截图效果很好，但它只是窗口的图像，我想让它稍微褪色或模糊，以使它看起来实际上有东西覆盖了控件。

**问题**：有没有办法操纵图像来呈现这种外观？

这是我用来捕获图像并显示它的代码（在显示自定义对话框之前）：

```
DLOGCover.setVisible(true);
Point pos = this.getLocationOnScreen();
Dimension dim = this.getSize();
//Arbitrary sizes! These need to be discovered and set correctly!
int xLoc = pos.x +1 ;
int yLoc = pos.y + 11;

try
{
    Robot robot = new Robot();
    Rectangle captureSize = new Rectangle(xLoc, yLoc, dim.width, dim.height);
    BufferedImage bImage = robot.createScreenCapture(captureSize);
    Image imgwork = (Image)bImage;
    ImageIcon labelimg = new ImageIcon(imgwork);
    imageLabel.setIcon(labelimg);
}
catch(AWTException e)
{
    System.err.println("Ouch!");
}
//... show the custom dialog 
```

非常感谢您提供的任何帮助，和以前一样，我这样做的原因是因为我正在努力学习`Java`，所以我正在尝试，目前就是这样！

非常感谢您提供的任何帮助，当然我愿意接受有关实现相同目标的替代方法的建议。

## 一些答案

我想添加此信息，以便任何其他来寻找的人都可以找到它。

感谢 Andrew Thompson 的代码（非常感谢 nIcE cOw 提供的链接），我现在可以获得窗口内容的屏幕截图，无需尝试计算标题栏和边框大小：

```
public static BufferedImage getScreenShot(Component component)
{

    BufferedImage image = new BufferedImage(
      component.getWidth(),
      component.getHeight(),
      BufferedImage.TYPE_INT_RGB
      );
    // call the Component's paint method, using
    // the Graphics object of the image.
    component.paint( image.getGraphics() );
    return image;
} 
```

当我打开我的自定义对话框时调用它，然后我可以修改图像以使其变暗并稍微模糊，然后将其显示`jLabel`在我的自定义*DLogCover*上存在的 a 中（这只是图像的 a`jPanel`和 a `jLabel`）：

```
//get the screenshot
BufferedImage bufferedImage = getScreenShot( this.getContentPane() );

//blur and darken the image slightly
Kernel myKernel = new Kernel(3, 3,new float[] {1f/9f, 1f/9f, 1f/9f,1f/9f, 1f/9f, 1f/9f,1f/9f, 1f/9f, 1f/9f});
BufferedImageOp myOp1 = new ConvolveOp(myKernel);
bufferedImage = myOp1.filter(bufferedImage, null);
RescaleOp myOp2 = new RescaleOp(.6f, 0, null);
bufferedImage = myOp2.filter(bufferedImage, null);

//prepare the image to be shown in a `jLabel`
Image Conv1 = (Image)bufferedImage;
ImageIcon Conv2 = new ImageIcon(Conv1);
myLabel.setIcon(Conv2); 
```

然后我需要防止鼠标和键事件与主窗口上的控件交互，这些控件目前仍然可以访问，即使它们被图像隐藏了。我正在尝试使用以下代码执行此操作，但这似乎仅阻止鼠标事件：

```
myLabel.addMouseListener(new MouseAdapter() {});
myLabel.addMouseMotionListener(new MouseMotionAdapter() {});
myLabel.addKeyListener(new KeyAdapter() {}); 
```

iv 尝试了各种控件来代替，`jLabel`但效果相同：鼠标被阻止但按键没有。这是一个问题，因为应用程序中的主要元素之一是`jTextPane`绝对不允许接受无关的键输入。

为简单起见，目前我正在根据需要打开和关闭可编辑属性以防止意外键入文本窗格，但这在很大程度上是一种解决方法，因为在某些时候我可能分配了键盘加速器并且我不想要它们打开自定义对话框时意外激活。

如果有人有任何进一步的建议来防止在自定义对话框打开时任何键盘事件到达底层控件，我非常希望听到它们。

问候

MVK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:43:27.657

我强烈建议您查看 JXLayer 项目。它完全符合您的要求。

另外，请查看[http://www.jhlabs.com/ip/filters/index.html](http://www.jhlabs.com/ip/filters/index.html)上的 JHLabs-Filters 。

如果您仍然一头雾水，您可以获取内容窗格的大小并从主框架的高度中减去它。这应该（通常）给你你想要的结果。

你需要做类似的事情

```
Point pos = ((JComponent)frame.getContentPane()).getLocationOnScreen();
Point fPos = frame.getLocation(); 
```

这将允许您计算框架内内容窗格的偏移量，您可以从那里进行调整。

就个人而言，我只想研究 JXLayer。

谢恩

**更新：**

好吧，艰难的路。所以你已经捕获了屏幕。正如我上面建议的那样，您将需要修剪框架的边框。

使用 JHLabs-Filters，可以对图像进行如下模糊处理

```
GaussianFilter gf = new GaussianFilter(10);
imgBG = gf.filter(imgBG, null); 
```

要完成鼠标事件处理程序，您将需要使用“玻璃窗格”。这只是一个您可以放置​​在框架顶部的组件，将鼠标侦听器（和键侦听器）附加到它，它们应该为您“使用”事件。

查找 JFrame.getGlassPane()。基本上，您希望将用于绘制背景（并将对话框置于其上）的组件添加到此（不要忘记使其可见）。

这可能会在这方面对您有所帮助[http://www.java2s.com/Code/Java/Swing-JFC/Showhowaglasspanecanbeusedtoblockmouseandkeyevents.htm](http://www.java2s.com/Code/Java/Swing-JFC/Showhowaglasspanecanbeusedtoblockmouseandkeyevents.htm)

希望对谢恩有所帮助

# c - 在函数返回值上使用一元 & 运算符

> ID：11397818
> 
> 赞同：9
> 
> 时间：2012-07-09T15:05:32.267
> 
> 标签：c, function, pointers, unary-operator

我想在函数后面应用一元“&”运算符来操作函数返回值。但是，我得到一个编译时错误（我使用 MinGW 的 gcc）

> test.c：在函数'main'中：
> 
> test.c:8:12: error: lvalue required as unary '&' 操作数

我编写了一个代码以使我的问题更易于理解：

```
int function();
void function2(int *param);

main()
{
    function2(&function1());
}

int function1()
{
    return 10;
}

void function2(int *param)
{
    return;
} 
```

此代码创建相同的编译时错误。

问题是：如何仅从 function2“()”中使用 '&' 运算符，而在其他地方没有其他代码？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-09T15:41:55.883

您想要的可以在 C99 及更高版本中通过以下方式实现：

```
function2((int[]){function1()}); 
```

即制作包含函数返回值的复合文字。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-09T15:07:41.590

你不能。函数的返回值是一个值，而不是一个对象。它在内存中没有指定的位置，没有地址，因此您无法获取指向它的指针。相反，你可以写：

```
int a = function1();
function2(&a); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-09T15:09:02.697

问题是`&`需要变量的地址。函数的返回值不一定存储在内存中。换句话说，它不是一个`lvalue`（你不能把它放在左边`=`）。因此，询问它的地址是没有意义的（因为它不存在）。

你应该做的是：

```
int result = function1();
function2(&result); 
```

C11 标准`lvalue`在 6.3.2.1 中定义为：

> 左值是一个表达式（对象类型不是 void），它可能指定一个对象；（脚注：“左值”这个名称最初来自赋值表达式 E1 = E2，其中要求左操作数 E1 是（可修改的）左值。也许最好将其视为表示对象“定位器值” '。有时被称为''rvalue''的东西在本国际标准中被描述为''表达式的值''）

在同一标准中，在 6.5.3.2 中它说：

> 一元 & 运算符的操作数应为函数指示符、[] 或一元 * 运算符的结果，或指定不是位域且未使用寄存器存储类说明符声明的对象的左值.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-09T15:10:00.643

您无法获取函数返回值的地址。

如果该值通过 CPU 寄存器传回给调用者怎么办？

使 function2() 使用 function1() 的结果的唯一方法是使用中间变量，该变量恰好在内存中具有地址。

```
main()
{
    int a;

    a = function1();
    function2(&a);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-09T15:12:48.523

您不能直接执行此操作。函数返回值可能存储在堆栈中（很快会在另一个函数调用中被覆盖），或者可能存储在寄存器等中（取决于调用约定）。

您可能不想直接访问这些地方中的任何一个，而且它甚至没有多大意义（好吧，也许除非您真的知道自己在做什么）。

您使用的函数的返回值是一个右值（嗯......只是一个值），而正如您在编译器输出中看到的那样，“&”运算符需要一个左值（您可以分配给它的东西）。因此，只需将返回值存储在一个变量中（'main()' 中的一个局部变量，然后获取它的地址）。

```
int main() {
    int x = function1();
    function2(&x);
} 
```

# ruby-on-rails - attr_encryptor 错误解密错误

> ID：11397819
> 
> 赞同：1
> 
> 时间：2012-07-09T15:05:32.520
> 
> 标签：ruby-on-rails, attr-encrypted

我使用 danpal/attr_encryptor gem 来加密我的 ActiveRecord 模型中的某些属性。

```
attr_encrypted :number, :charset => 'UTF-8', :key => 'vasya pupkin' 
```

并得到以下错误

```
OpenSSL::Cipher::CipherError: bad decrypt 
```

然后我尝试在 rails 控制台中使用 encrypt_number 并在重新启动控制台时看到相同的“数字”字段值的不同值。为什么？

```
rails c
CreditCard.encrypt_number('hello')
"tRO0BETHrh5J3gXv8WVntw==\n"
quit
rails c
CreditCard.encrypt_number('hello')
"kJSbe30RQyR+gy3oDXv5ZA==\n" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T05:21:26.003

如果出现错误的解密错误，您是否在数据库中创建了列，并且 gem 是否会自动为您填充它们`encrypted_number_iv`？`encrypted_number_salt`

在 的情况下`encrypt_number`，您需要传递`:iv`和`:salt`选项（每次都相同）以在输出处接收相同的密文。

# php - Wordpress 根目录问题

> ID：11397822
> 
> 赞同：0
> 
> 时间：2012-07-09T15:05:37.387
> 
> 标签：php, wordpress, hosting, blogs, root

我在测试域和主机上设置了一个站点。然后，我将其移至其实际域和托管帐户，并进行了成功所需的所有更改。

我现在有一个媒体上传不起作用的问题。奇怪的是错误引用了旧的根目录。

```
 /home/wwwOLD/public_html/wp-content/uploads/image1.tmp because No such file or directory in /home/wwwNEW/public_html/wp-admin/includes/file.php on line 178 
```

有什么理由会引用那个旧的主目录，因为我在任何地方的数据库或任何配置中都看不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:10:43.623

我过去在移动 wp 网站时遇到过很多次。这就是我修复它们的方法：

转到您的 wp-admin / settings / media 并更新 **此文件夹中的存储上传字段**

要么把空白放在那里，要么把**wp-content/uploads**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T15:08:18.583

如果您传输文件而不是从头开始，则会维护配置文件，其中包含应上传到的位置文件。

备份数据库后，您应该从头开始重新安装 wordpress。

# javascript - 在页面加载时在登录表单字段中设置光标

> ID：11397828
> 
> 赞同：2
> 
> 时间：2012-07-09T15:05:59.177
> 
> 标签：javascript, forms, cursor

我试图让我的光标在页面加载时加载到我的登录表单字段中。所以我使用的这段代码应该适用于每个浏览器，但我无法让它在任何浏览器中运行，哈哈。

```
<script type="text/javascript">
$(document).ready(function(){
document.login.input.focus();
});
</script> 
```

这是我试图将其添加到的页面：http: [//test.clickacart.com](http://test.clickacart.com)

这应该在页面加载时将光标加载到第一个用户名/电子邮件字段中，这样用户就不必单击内部来填写它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T15:10:59.520

大多数浏览器都支持这样的自动对焦属性......

```
<input type='...' autofocus /> 
```

另一种选择是采取这样的jQuery路线......

```
$(function () {
   $('[autofocus]').focus()
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T15:08:37.087

```
$(function() { $('[name="email_address"]').focus(); }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T15:08:12.890

尝试通过选择器中的 id 指定字段名称

`$(document).ready(function() { $("#fieldId").focus(); });`

# android - 如何在大于屏幕尺寸的画布上绘制并能够在 android 中水平和垂直滚动/平移？

> ID：11397829
> 
> 赞同：1
> 
> 时间：2012-07-09T15:05:59.397
> 
> 标签：android, graphics, android-canvas, android-scrollview

我正在寻找一个真实示例，其中包含有关如何在大于屏幕尺寸的画布上绘制的示例代码（截至目前，我正在正常绘制并且无法查看外部屏幕尺寸）。更多的压力在于能够滚动/平移屏幕以查看整个画布。如果需要更多信息，请发表评论。

更新：在这里找到我的答案[Image in Canvas with touch events](https://stackoverflow.com/questions/5743328/android-image-in-canvas-with-touch-events)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T15:32:10.550

我的版本是从 Monodroid 转换而来的，但实现看起来应该差不多。（我试着把它放回java，如果不准确，请道歉）

1.  为了在屏幕外绘制，只需在您想要的任何地方绘制，它将被绘制到屏幕外。诀窍是通过缩放和平移来查看它。要缩放您的视图，需要实现 ScaleGestureDetector.IOnScaleGestureListener 并实现 onScale 方法，如下所示。

2.  对于平移，您只需要实现 onTouchEvent，无论如何缩放都是必需的。

    ```
    private float _scaleFactor;
    private float _xoffset;
    private float _yoffset;

    @override
    public bool onScale(ScaleGestureDetector detector){
        _scaleFactor *= detector.ScaleFactor;
        _scaleFactor = Math.Max(0.1f, Math.Min(_scaleFactor, 5.0f));
        invalidate();
        return true;
    } 

    @override 
    protected void onDraw(Canvas canvas){
        super.onDraw(canvas);
        canvas.save();
        canvas.scale(_scaleFactor, _scaleFactor);//for zoom
        canvas.translate(_xoffset, _yoffset);//for pan
        //DO NORMAL DRAWING HERE
        canvas.restore();
    }

    @override 
    public bool onTouchEvent(MotionEvent e){
        switch (e.action){
            case MotionEvent.ACTION_DOWN:{                        
                _prevx = e.getX();
                _prevy = e.getY();
            }
            break;
            case MotionEvent.ACTION_UP:{
                _xoffset += e.getX() - _prevx;
                _yoffset += e.getY() - _prevy;
                invalidate();

                _prevx = e.getX();
                _prevy = e.getY();
            }
            break;
        }
        return _scaleGestureDetector.onTouchEvent(e);
    } 
    ```

注意：此代码用于自定义 VIEW 对象 - 因此从 View 继承并实现 IOnScaleGestureListener

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T15:14:11.437

您可以简单地将整个画布放在[ScrollView](http://developer.android.com/reference/android/widget/ScrollView.html)中。这样，Android 会为您处理所有滚动。但是，如果您希望能够让用户与 Canvas 进行交互而不是滚动，则需要拦截来自 ScrollView 的一些触摸事件。可以在[此处](https://stackoverflow.com/a/2655740/1069068)找到执行此操作的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-21T08:28:19.010

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    CustomView customView;
    ScrollView scroll_view;
    HorizontalScrollView h_scroll_view;
    super.onCreate(savedInstanceState);
    scroll_view = new ScrollView(this);
    h_scroll_view = new HorizontalScrollView(this);
    customView = new CustomView(this);

    scroll_view.addView(customView);
    h_scroll_view.addView(scroll_view);
    setContentView(h_scroll_view);
}

public class CustomView extends View
{
    private Paint paint;
    Context app_context;

    public CustomView(Context context) {
        super(context);
        paint = new Paint();
        paint.setColor(Color.GRAY);
        app_context = context;
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec)
    {
        int width = 1000;
        int height = 1200;
        setMeasuredDimension(width, height);
    }

    @Override
    public void onDraw(Canvas canvas)
    {
       // ToDo: Put drawing code in here
            }
        }
    }
} 
```

# c# - gui中的rasdial错误

> ID：11397832
> 
> 赞同：0
> 
> 时间：2012-07-09T15:06:05.917
> 
> 标签：c#, .net, windows, winapi, ras

我正在使用 Rasdial.exe 创建一个新的拨号连接，它在控制台模式下显示错误。有没有办法让错误出现在 GUI 上？windows如何将错误代码显示为用户界面？

更新：

我使用了“Rasphone.exe”，它达到了我的预期。即它在用户界面中而不是在命令提示符中显示错误消息。但这是使用“RASPhone.exe”而不是“RASDial.exe”的正确方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:15:51.570

如果您真的想控制拨号连接时用户界面发生的情况，我建议您查看 CodePlex 上的 DotRas SDK。

```
using DotRas;

RasHandle handle = null;
using (RasDialer dialer = new RasDialer())
{
    dialer.StateChanged += (sender, e) => 
       {
           // Update your user interface.
       };
    dialer.EntryName = "Your Entry Here";
    dialer.PhoneBookPath = @"C:\YourPhoneBook.pbk";
    dialer.Credentials = new NetworkCredential("Some", "User");

    handle = dialer.DialAsync();
} 
```

这将使您能够在连接状态更改时根据需要更新用户界面，而无需将对控制台应用程序所做的更新路由到您的用户界面。

这是一个链接：[http ://dotras.codeplex.com](http://dotras.codeplex.com)

# google-app-engine - 如何从 webapp2 中的 html 页面生成 pdf 文件

> ID：11397834
> 
> 赞同：0
> 
> 时间：2012-07-09T15:06:21.143
> 
> 标签：google-app-engine, pdf, webapp2, html2pdf, pisa

我需要一个代码片段来从可以包含图像和一些 CSS 的 HTML 页面生成 PDF 文件。

我将 Google AppEngine 与 Python 2.7 和 webapp2（不是 Django）一起使用。

我知道这个问题可能值得一票否决，因为在询问之前我似乎没有进行足够的研究，但我实际上做了并且找不到一个具体的例子来说明如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T16:11:48.233

GAE provides the [conversion API](https://developers.google.com/appengine/docs/python/conversion/overview), which has the capability to convert html to PDF (among some others). For an example on how to convert an html with images to PDF see the answer to the question [Incomplete Google App Engine Documentation on Conversion API](https://stackoverflow.com/questions/10759324/incomplete-google-app-engine-documentation-on-conversion-api/11024894#11024894). If you need to include a CSS, then you need to include it in the html.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T15:21:16.093

在将 html 转换为 pdf 时，python 没有原生支持。但是，您可能想要搜索某人编写的具有该功能的库。有关详细信息，请参阅[http://www.xhtml2pdf.com/](http://www.xhtml2pdf.com/)。

在您设法将 pdf 数据写入字符串后，只需使用 webapp2 设置 pdf 标题，您就可以将 pdf 文件提供给客户端浏览器。

```
# In request handler 
self.response.headers['Content-Type'] = 'application/pdf'
self.response.headers['Content-Disposition'] = 'attachment;filename=downloaded.pdf'
self.response.write(pdfdata) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-28T14:26:42.367

我制作了 xhtml2pdf 在 Google AppEngine Python 上工作。

只需将您的 html 字符串作为 (get/post) 发送到此 url，它就会为您提供 pdf。

使用 HTTP POST：将 html 参数中的 html 字符串发布到以下 url。 [http://metrocdn.appspot.com/pdf/what_ever_filename_you_want.pdf](http://metrocdn.appspot.com/pdf/what_ever_filename_you_want.pdf)

或使用 HTTP GET： [http ://metrocdn.appspot.com/pdf/what_ever_filename_you_want.pdf?html=your-html-string](http://metrocdn.appspot.com/pdf/what_ever_filename_you_want.pdf?html=your-html-string)

问候

萨法拉兹·法鲁基

# .htaccess - 正则表达式的htaccess错误

> ID：11397837
> 
> 赞同：0
> 
> 时间：2012-07-09T15:06:33.790
> 
> 标签：.htaccess, mod-rewrite, redirect

我正在尝试基于正则表达式重定向到页面。

基本上，产品代码由数字和字母组成，仅此而已。

这是我的htaccess：

```
Options +FollowSymlinks
RewriteEngine On

RewriteRule ^(.*)-(\d{1,2})-(\d{1,3})-(\d{1,3})$ search.php?q=$1&p=$2&m=$3&c=$4

RewriteRule ^([A-Za-z0-9])$ product.php?p=$1 [NC,L] 
```

这是我似乎无法上班的最后一行。它只是给了我一个 404 page not found 错误。我知道 product.php 文件在那里，它与 search.php 在同一个地方工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:15:08.657

我想到了。

重写规则 ^([A-Za-z0-9]*)$ product.php?p=$1 [NC,L]

我猜 * 在它之前匹配无限次。

我发现是因为如果我只是去 /e、/E 或 /8 它会起作用。

# eclipse - 影响不可见窗口的 Eclipse Juno 键盘快捷键

> ID：11397838
> 
> 赞同：4
> 
> 时间：2012-07-09T15:06:38.597
> 
> 标签：eclipse

这是一个非常奇怪的问题：在使用 Eclipse Juno 并打开了多个类之后，当我 Ctrl-V 或 Ctrl-A 时，它不会影响选定和可见的窗口/类，而是另一个不可见的。我希望我的意思很清楚。还有其他人经历过吗？操作系统是薄荷 13。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T06:55:37.417

你在使用安卓开发工具吗？如果是这样，则有 2 个关于此的已知错误。一个已在 ADT 20 中修复，[另一个](http://code.google.com/p/android/issues/detail?id=34630)在 ADT 20.0.1 中仍处于打开状态。

# jquery - 用户滚动到锚点时的 Javascript CSS

> ID：11397844
> 
> 赞同：0
> 
> 时间：2012-07-09T15:07:23.950
> 
> 标签：jquery, css, class, hashchange, onscroll

我有一个网站[http://www.mitchellfinlay.co.uk/newlake/magazines.html](http://www.mitchellfinlay.co.uk/newlake/magazines.html)

它利用了窗帘效果，每个`li`元素在滚动时或在顶部单击链接时自动显示... tempus...talkbusiness 等。

我想要做的是当用户滚动到链接锚定到的那个窗帘时，将链接的类设置为“当前”。

这需要在用户滚动或自动滚动在该页面上停止时发生。

这是可以实现的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:16:23.600

这应该遍历标题中的链接，`current`从每个链接中删除类，并将其添加到单击的链接中：

```
$(document).on('click', '#headerLinks a', function() {
    $("#headerlinks a").removeClass("current");
    $(this).addClass("current");
}); 
```

至于滚动，您可以使用`element.posistion()`and`window.scrollTop()`来确定屏幕顶部的元素。我在这个[小提琴](http://jsfiddle.net/tcyrE/1/)中做了一个演示。您必须根据需要对其进行调整，但它显示了基本概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T15:27:29.757

关于评论的第二个问题：

您可以使用此变量剥离锚点并检查留下的内容。

例子：

```
$('#headerlinks a').click(function(){
   var anchor = document.location.hash;
   if ( anchor === '#myContent1' ) { //this can be href from ur a.
     $('.allContents').hide();
     $('#myContent1').show();
   }
}); 
```

# javascript - 我可以在 iPad 上使用 jwplayer，隐藏控制栏吗？

> ID：11397847
> 
> 赞同：1
> 
> 时间：2012-07-09T15:07:34.727
> 
> 标签：javascript, jquery, ipad, html5-video

我需要在没有控制栏的情况下管理一个回退到 flash 的视频播放器（以支持 IE 8 ）。用户将无法与视频交互，但只能使用我的自定义控件。

问题在于 iPad 环境。如果我使用 jwplayer，在 iPad 中它将创建一个默认的系统视频播放器，并带有它的控制栏。

有什么方法可以实现我的目标吗？也许原生管理视频 html 标签，与一些 JS / jQuery 界面交互？

我在这个链接上也试过 flowplayer：

[http://flowplayer.org/demos/plugins/javascript/controls-apple-ipad.html](http://flowplayer.org/demos/plugins/javascript/controls-apple-ipad.html)

但是在我的 iPad 上尝试，视频在第一帧冻结（不是最好的结果..）。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:09:38.130

试一试：

[http://videojs.com/](http://videojs.com/)

它具有闪存回退和非常好的文档。

它还覆盖了 iPad 的原生视频查看器。

# c - C中的多态函数参数/返回值

> ID：11397856
> 
> 赞同：1
> 
> 时间：2012-07-09T15:08:03.343
> 
> 标签：c, polymorphism, c89

我在嵌入式微控制器中工作，我必须将多种类型的数据读/写到非易失性 RAM (NVRAM)。我想避免为每个值编写单独的读/写函数以存储在 NVRAM 中，如下所示：

```
void Write_Value1(int value);
int Read_Value1(void);
void Write_Value2(unsigned long value);
unsigned long Read_Value2(void);
... 
```

随着要读/写的项目列表的增加，维护起来肯定很麻烦。在 C++ 中有几种方法可以解决这个问题，例如模板。使用模板，我可以编写一个`.Read()`和`.Write(T value)`函数，每个要读/写的项目都可以访问。无论如何可以从C中获得这种行为吗？我怀疑有某种方法，使用 void 指针和 vtables 的某种组合。我想以一种更加多态的方式处理这个问题，并具有以类似方式调用的将每个项目读/写到 NVRAM 的功能。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T15:18:31.003

您可以[非常接近地]使用宏在 C 中模拟 C++ 模板。

至少有两种方法可以做到这一点。

* * *

**第一种方法：“橡皮图章”宏**

为您的函数定义声明/定义宏

```
#define DECLARE_READ_WRITE(suffix, type)\
  type Read_Value_##suffix(void);
  void Write_Value_##suffix(type val);

#define DEFINE_READ_WRITE(suffix, type)\
  type Read_Value_##suffix(void) {\
    /* your code */ \
  }\
  void Write_Value_##suffix(type val) {\
    /* your code */ \
  } 
```

然后在一些头文件中做

```
DECLARE_READ_WRITE(long, long)
DECLARE_READ_WRITE(int, int) 
```

在一些实现文件中

```
DEFINE_READ_WRITE(long, long)
DEFINE_READ_WRITE(int, int) 
```

它将“生成” `Read_Value_int`、和.`Write_Value_int`的 声明和定义。`Read_value_long``Write_value_long`

* * *

**第二种方法：参数化的包含文件**

创建两个头文件。一个用于声明（`read_write.h.template`）

```
TYPE__ CONCAT(Read_Value_, SUFFIX__)(void);
void CONCAT(Write_Value_, SUFFIX__)(TYPE__ val); 
```

一个用于定义 ( `read_write.c.template`)

```
TYPE__ CONCAT(Read_Value_, SUFFIX__)(void)
{
  /* your code */
}

void CONCAT(Write_Value_, SUFFIX__)(TYPE__ val)
{
  /* your code */
} 
```

这`CONCAT`是宏标记连接的通常实现（也可以/应该在第一种方法中使用）。

然后将您的“模板化”代码包含到适当的头文件和实现文件中

```
#define TYPE__ int
#define SUFFIX__ int
#include "read_write.h.template"
#undef TYPE__
#undef SUFFIX__

#define TYPE__ long
#define SUFFIX__ long
#include "read_write.h.template"
#undef TYPE__
#undef SUFFIX__ 
```

在某些带有`read_write.c.template`标题的实现文件中也是如此。

后一种方法具有生成可调试代码的额外好处。即，您可以在调试器中单步执行它，就像它通常与 C++ 模板一起使用一样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T15:12:49.317

您可以使用 void 指针和大小来做到这一点：

```
void write_value (void *data, size_t size);
void* read_value (size_t size); 
```

然后：

```
write_value ( (void *) &int_val, sizeof (int));
write_value ( (void *) &ulong_val, sizeof (unsigned long));

intptr = read_value (sizeof (int));
charptr = read_value (sizeof (char)); 
```

然后`read_value`需要`malloc`一些东西并返回它。当您宁愿阅读自动时，这有时可能只是开销。然后做：

```
/* Declaration.  */
void read_value (void *data, size_t size);

/* Use.  */
read_value (&automatic_var, sizeof (automatic_var)); 
```

[最后，您可以以各种方式](https://stackoverflow.com/q/10950828/274261)“模拟”模板。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-09T15:13:54.930

根据目标类型返回不同的类型（几乎？）用 C 是不可能的。不过，你可以用宏来模仿它。例如：

```
#define WRITE(x)  write_value(x, sizeof(x))
#define READ(x)  read_value(&x, sizeof(x)) 
```

现在您可以编写 write_value() 和 read_value() 以根据长度复制数据，同时考虑内部例程中的字节序。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-09T15:18:14.507

C 中没有这样的东西。但是，您可以使用 struct 方法。

```
#define T_VOID  0
#define T_INT   1
#define T_ULINT 2

typedef struct 
{
    int type;
    union 
    {            
        int a; 
        unsigned long b; 
    } my_union;
} my_struct;

void write_value(my_struct *s)
{
    switch (s->type) 
    {
        case T_VOID:
        // do something
        break;
        case T_INT: 
        // do something with s->my_union.a
        break;
        case T_ULINT: 
        // do something with s->my_union.b
        break;
    }
} 
```

以同样的方式，`read_value`将返回一个`my_struct`指针。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-09T15:16:23.037

查看 Posix`read`和`write`函数，然后执行类似的操作：

```
void read(int address, void * data, int size);
void write(int address, const void * data, int size); 
```

然后后来：

```
read(address, &x, sizeof(x));
write(address, &x, sizeof(x)); 
```

# objective-c - 在opengl-es 2.0中每个顶点是否可以有多个法线

> ID：11397859
> 
> 赞同：0
> 
> 时间：2012-07-09T15:08:17.907
> 
> 标签：objective-c, ios, opengl-es

目前我为我的模型使用每个顶点一个法线，但这等同于让模型在照明方面看起来是圆形的，这并不理想，因为我的模型应该有锐利的边缘。谷歌搜索告诉我，在 opengl-es 2.0 中使用表面法线似乎是不可能的，但另一种技术是每个顶点使用多个顶点法线，就好像你在使用表面法线一样。

这意味着法线数组和顶点数组的索引缓冲区需要不同，因为例如，一个立方体将有 8 个顶点，但每个顶点需要 3 个法线来充当表面法线（每个连接面一个立方体，如果模型是三角化的opengl-es需要的，可能需要更多）。所以顶点的索引数组是 8，法线的索引数组是 8x3=24。

有人知道该怎么做吗？

目前我的代码看起来像这样

```
glGenVertexArraysOES(1, &_vertexArray);
glBindVertexArrayOES(_vertexArray);

glGenBuffers(1, &_indexBuffer);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, _indexBuffer);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, numIndices*sizeof(GLubyte), indices, GL_STATIC_DRAW);

glGenBuffers(1, &_vertexBuffer);
glBindBuffer(GL_ARRAY_BUFFER, _vertexBuffer);
glBufferData(GL_ARRAY_BUFFER, numVertices*sizeof(GLfloat), vertices, GL_STATIC_DRAW);

glEnableVertexAttribArray(GLKVertexAttribPosition);        
glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, 0, 0);

glGenBuffers(1, &_normalBuffer);
glBindBuffer(GL_ARRAY_BUFFER, _normalBuffer);
glBufferData(GL_ARRAY_BUFFER, numNormals*sizeof(GLfloat), normals, GL_STATIC_DRAW);

glEnableVertexAttribArray(GLKVertexAttribNormal);
glVertexAttribPointer(GLKVertexAttribNormal, 3, GL_FLOAT, GL_FALSE, 0, 0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T17:25:21.123

每个顶点不能有多个法线，法线和位​​置不能有不同的索引。

这样做的唯一方法是复制您的位置数据，并为每个位置附加不同的法线。

# combobox - 强制存储到内存中 (dojo 1.7)

> ID：11397864
> 
> 赞同：0
> 
> 时间：2012-07-09T15:08:26.240
> 
> 标签：combobox, dojo, store

我有以下代码很好用......

```
<div dojoType="dojo.data.ItemFileReadStore" url="[% c.uri_for('/') -%]sample_name" jsId="sampleNameStore" class="invisible"></div>

<select data-dojo-type="dijit.form.ComboBox" id="sample_name" searchAttr="label" store="sampleNameStore" name="sample_name" class="selectionNav tableData"></select> 
```

它工作得非常好，但在实际选择 ComboBox 之前它不会填充 ComboBox，因为 dojo 的行为是在访问 ComboBox 之前不将存储加载到内存中。我希望在页面加载后填充 ComboBoxes。

使用简单的单线将 ComboBox 绑定到数据源的能力非常棒且简单。有谁知道在加载时强制存储进入内存的方法？

珍妮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:24:04.110

`dijit.byId('sampleNameStore').fetch()`如果您希望加载所有数据，只需使用 :) store.fetch 获取带有空查询的项目。如果在显示组合框之前这样做，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:31:27.457

我经常为组合框使用克隆的内存库，以允许对键标签进行更多控制，例如这里将*标题*映射到*名称*

和

```
var store = ?;
var combobox = ?; 
var data=[];
function clone(items) {
   items.forEach(function(item) { 
       data.push( {name: store.getValue(item, "title"), id: store.getValue(item, 'id')} );
   });
   combobox.set("store", new memorystore({
     data:data
   }));
} 
```

任何一个

```
store.on("load", function() { clone(store._arrayOfAllItems) }); 
```

或者

```
 store.fetch({ onComplete: function(items) {clone(items);} }); 
```

# django - 如何自定义 Haystack 的 SearchView 以接受额外的 URL 参数？

> ID：11397869
> 
> 赞同：3
> 
> 时间：2012-07-09T15:08:45.010
> 
> 标签：django, django-haystack, django-class-based-views

给定 url conf：

```
r'^(?P<some_var>[-a-z0-9\.]*[a-z0-9\.]\.\w+)/search/$' 
```

如何将命名组传递`some_var`给 Haystack 的 SearchView？

我想`SearchView.get_results()`根据`some_var`.

这是最好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T15:32:48.423

子类`SearchView`和覆盖`__call__`，它是类的“视图”部分。

```
from haystack.views import SearchView

class MySearchView(SearchView):

    def __call__(self, request, some_var):
        self.some_var = some_var
        return super(MySearchView, self).__call__(request) 
```

然后，您可以`self.some_var`在该类上使用其他方法。

# apache - 使用 Apache 的 RewriteRule 进行 301 重定向（用于 Joomla 网站）

> ID：11397881
> 
> 赞同：1
> 
> 时间：2012-07-09T15:09:25.350
> 
> 标签：apache, mod-rewrite, redirect, http-status-code-301

我在重定向某些页面时遇到问题。我的重写规则如下所示（示例）：

```
RewriteRule /index.php?option=com_content&view=article&id=47:article-keyword&catid=8:position$ article-keyword.html [R=301,L] 
```

但它不起作用，我尝试了一些不同的组合，但它仍然什么也没做。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:21:49.170

**更新：下面的 RewriteRule 不正确。有关详细信息，请参阅 2012 年 7 月 9 日的更新**

我读过 RewriteRules 总是相对的，因此尝试：

```
RewriteRule ^index\.php\?option=com_content&view=article&id=47:article-keyword&catid=8:position$ article-keyword.html [R=301,L]` 
```

这应该重定向`/index.php?option=com_content&view=article&id=47:article-keyword&catid=8:position`到`article-keyword.html`

指定字符串的`^`开头。有关 Apache 的 RewriteRule 的更多信息，请查看[http://www.noupe.com/php/10-mod_rewrite-rules-you-should-know.html](http://www.noupe.com/php/10-mod_rewrite-rules-you-should-know.html)。

**更新 - 2012-07-08**

好的，在阅读 Apache 文档后，查询字符串上的 RewriteRule 不匹配。要匹配查询字符串中的数据，您需要使用 a`RewriteCond`和`%QUERY_STRING`变量。

**成功！以下对我有用！**

```
RewriteCond %{QUERY_STRING} option=com_content&view=article&id=47:article-keyword&catid=8:position
RewriteRule ^index\.php$ article-keyword.html? [R=301,L] 
```

这重定向`http://site.domain.com/index.php?option=com_content&view=article&id=47:article-keyword&catid=8:position`到`http://site.domain.com/article-keyword.html`

这只会将请求重定向到具有相关查询字符串的 index.php。

# ant - Ant 属性在 Windows 中是可变的，但在 Unix 中不是？

> ID：11397882
> 
> 赞同：2
> 
> 时间：2012-07-09T15:09:26.183
> 
> 标签：ant, properties, immutability, unset, ant-contrib

我正在使用 Ant 进行自动化构建过程。

一个目标是检查是否已经设置了变量，如果没有，将其设置为空字符串并将其作为环境键导出到可执行文件。我有多个属性文件，这些文件要么定义了`bla`属性，要么没有定义。所以我遍历我的文件列表并执行以下操作：

```
<for list="${propertyfiles}" param="mypropertyfile">
    <var name="bla" unset="true" />
    <property file="@{mypropertyfile}.properties" />
    <property name="bla" value=""/>
    ... use the "bla" property for something ... 
</for> 
```

解释这些行：

```
<var name="bla" unset="true" /> 
```

是确保没有从先前的循环传递中使用任何值。我包括具有或未定义该`bla`属性的属性文件。

```
<property file="@{mypropertyfile}.properties" /> 
```

以确保我可以使用该`bla`物业。我认为使用属性的不变性会很聪明。所以

```
<property name="bla" value=""/> 
```

设置属性以防它未在我的属性文件中定义。如果它已经被定义，理论上，初始属性值不能被覆盖。

现在奇怪的是：在我的 unix 系统上，这种方法就像一种魅力，**在 Windows**上却没有；**定义的属性值被空字符串覆盖**。两台机器都安装了ant 1.8。

我知道我可以使用`<if>`和`<isset>`属性标志以另一种方式解决问题，但我只是想知道这怎么可能。如果您能帮助我理解这种不一致的行为，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:03:23.153

变量和未设置是[变量任务](http://ant-contrib.sourceforge.net/tasks/tasks/variable_task.html)的一部分，因为你没有提到我用 1.0b2 和 1.0b3 测试过的 ant-contrib 版本。虽然这只是一个数据点，但我认为您可以首先假设结果的真实性，即`unset="true"`在 windows 和 ant 1.8 中的 *nix 上，如果之前已设置，您可以重新分配其他不可变属性的值（无论是在 for 循环内部还是外部），否则无效。

因此，在未设置的调用和将您的属性设置为默认值之间存在一个问题，即在 Windows 上，您的属性未按预期设置。因此，我会考虑两个可能的原因：

1.  属性文件不符合[加载规范](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html#load%28java.io.InputStream%29)，例如，您可以尝试运行类似[此程序](http://www.bastet.com/)的 unix2dos 版本以消除任何意外的 CRLF/LF 混淆，检查您是否使用 ISO 8859-1 字符编码（您可以使用类似[Text文件编码检测器](http://www.architectshack.com/TextFileEncodingDetector.ashx)），并使用`\"`.
2.  在属性文件中，属性的最后一个定义获胜，因此您可以拥有，例如，Linux 特定的文件内属性扩展，默认为`""`在您的 Windows 属性之后。

但是，如果`<echo> ${bla}`显示您的属性实际上是从文件中正确加载的，那么我将首先将您的代码移出 for 循环，看看它是否适用于单个案例。我的测试代码：

```
<project name="propertyMutator" default="mutator">
<taskdef resource="net/sf/antcontrib/antlib.xml"/>
<echo>Running ${ant.version}</echo>
<target name="mutator">
    <for list="one,two,three" param="mypropertyfile">
        <sequential>
          <var name="bla" unset="true" />
          <property file="@{mypropertyfile}.properties" />
          <echo message="Bla before default is: ${bla}"/>
          <property name="bla" value="default value"/>
          <echo message="Bla after default is: ${bla}"/>
        </sequential>
    </for>
</target>  
</project> 
```

和

```
one.properties: bla=${some.var}
two.properties: nothing=toSee
three.properties: bla=hello1
                  bla=hello2
                  bla=hello3 
```

印刷

```
Buildfile: C:\workspace\proj\propertyMutator.xml
 [echo] Running Apache Ant(TM) version 1.8.3 compiled on February 26 2012
mutator:
 [echo] Bla before default is: ${some.var}
 [echo] Bla after default is: ${some.var}
 [echo] Bla before default is: ${bla}
 [echo] Bla after default is: default value
 [echo] Bla before default is: hello3
 [echo] Bla after default is: hello3 
```

在linux和windows上。

# python - 扭曲的多消息反应器

> ID：11397888
> 
> 赞同：0
> 
> 时间：2012-07-09T15:09:40.970
> 
> 标签：python, twisted

我想通过扭曲来实现这种功能，但我似乎无法得到它：

所需的步骤是：

1.  与服务器建立连接

环形

```
1\. wait until a special message 
2\. send a message to server 
3\. handle the responce (if it is a special message exit the loop and call reactor.stop()) 
```

结束循环

我只是无法通过扭曲实现按需发送数据的简单功能。相反，我似乎必须提前知道我想发送的所有消息。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T16:02:19.090

当然，有一个解决方案，但它是什么取决于你的问题到底是什么。我的意思是：尚不清楚为什么您认为必须提前知道要发送的消息。

Twisted 是一个非常经典的基于异步事件、回调控制的框架；一切都是为了响应其他事件而“按需”完成的。

# c++ - C++ 中的标识字符串流

> ID：11397889
> 
> 赞同：0
> 
> 时间：2012-07-09T15:09:45.697
> 
> 标签：c++, tokenize, stringstream

是否有可能有一个具有这种行为的字符串流？

```
std::istringstream stringstream("hello world");
std::string output;
stringstream >> output;
assert(output == "hello world"); 
```

用例：

```
template <typename T>
T as(void) {
    T t;
    std::istringstream stringstream(this->m_str);
    stringstream >> t;
    return t;
} 
```

如果 T 是 std::string，它将不起作用。我可以进行专业化，但我想避免它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:12:37.593

不是直接的，因为`operator>>`采用 a 的重载`std::string`只会读取到第一个空格并且不包括第一个空格，所以调用只会得到`"hello"`.

# c# - IAsyncResult 对象

> ID：11397893
> 
> 赞同：-4
> 
> 时间：2012-07-09T15:10:02.313
> 
> 标签：c#, asp.net, .net

当我为异步方法调用创建一个while循环时出现此错误

错误>>提供的 IAsyncResult 对象与此委托不匹配

```
while(true)
{
  ..........
  Delegate =new MethodInvoker(UploadProcedureCall);
  callback=new AsyncCallback(EndInvoke);
  tag=Delegate.BeginInvoke(Params,obj,callback,null);
  Delegate.EndInvoke(tag);
} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:36:22.223

此错误是由于静态成员造成的。

# java - 如何在 Eclipse 中自定义和触发 Java 编译错误

> ID：11397895
> 
> 赞同：1
> 
> 时间：2012-07-09T15:10:06.660
> 
> 标签：java, eclipse, compiler-errors

我想在**Eclipse**中定义和触发一些自定义的 Java 编译错误。基本上我希望某些方法中的某些系统调用会触发**编译错误**。

在[这个讨论](https://stackoverflow.com/questions/1752607/how-to-intentionally-cause-a-custom-java-compiler-warning-message)中，提出了一个基于**注释**的解决方案，但它不适合我的情况，因为我无法预测何时会发生编译错误。我想要的是，当开发人员进行系统调用时，例如会触发编译错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:19:55.417

不完全是您要查找的内容，但请考虑使用自定义[Checkstyle](http://checkstyle.sourceforge.net/)定义。这是 checkstyle 文档中的一个示例，它将调用标记`System.out.println`为无效：

```
<module name="Regexp">
    <!-- . matches any character, so we need to escape it and use \. to match dots. -->
    <property name="format" value="System\.out\.println"/>
    <property name="illegalPattern" value="true"/>
</module> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-13T11:31:13.147

例如，如果您想阻止开发人员使用 java.lang.System，一个不错的技巧是在您的项目中创建一个自定义类**java.lang.System**，这样每次调用 java.lang.System 的任何方法（真正的) 会出现编译问题。

如果您使用 maven，您还可以在单​​独的 maven 项目中创建该类，并提供不与实际应用程序打包的范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T15:13:51.017

完成类似事情的唯一方法是为 Eclipse 编写一个在构建期间分析代码的插件。但是这样做的细节确实超出了 StackOverflow 问题的范围。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T15:13:52.837

您需要创建您的`Builder`实现并将其注册到 Java 项目。

你可以[从这里开始](http://wiki.eclipse.org/FAQ_How_do_I_implement_an_Eclipse_builder%3F)。

# scala - 更新不可变 AST 的最简单方法是什么？

> ID：11397900
> 
> 赞同：5
> 
> 时间：2012-07-09T15:10:18.110
> 
> 标签：scala, macros, abstract-syntax-tree, scala-2.10

在使用宏时，我已经到了需要更新 AST 中保持特定条件的那些节点的地步（我一直在努力避免它）。例如，假设我想更新每个节点：

```
Literal(Constant(1)) 
```

价值：

```
Literal(Constant(2)) 
```

这些 AST 节点可能位于表达式树中的任何位置，因此我不能使用 ad-hoc 模式匹配器。显然，我想做的最后一件事是编写一个能够覆盖所有编译器原语的完整模式匹配器。我一直在[API](http://www.scala-lang.org/api/milestone/index.html#scala.reflect.api.Trees%24TreeApi)中搜索，但我的印象是*collect*和*traversable* family 之类的方法不足以满足我的需求，因为它们将树视为线性事物，因此我想要整个更新的树. 那么，是否有可能以一种智能的方式更新不可变的表达式树？为什么标准 API 中不存在这样的“更新”操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T18:57:14.507

这是在 Scala 宏中使用 AST 转换器的示例：

[https://github.com/retronym/macrocosm/blob/171be7e/src/main/scala/com/github/retronym/macrocosm/Macrocosm.scala#L129](https://github.com/retronym/macrocosm/blob/171be7e/src/main/scala/com/github/retronym/macrocosm/Macrocosm.scala#L129)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T15:19:30.093

修改数据结构中的多类型节点一般是数据类型泛型的经典案例（通过类型构造函数对代码进行参数化）。

此类操作存在几种方法，例如[“Scrap Your Boilerplate”](http://www.haskell.org/haskellwiki/Research_papers/Generics)方法，它定义了数据类型通用遍历函数。

在 Haskell 中，节点更新函数在两个维度上进行参数化：按数据类型和按代码——因此您可以将不同的更新函数应用于结构中的任何位置的不同类型：

```
-- | Apply a transformation everywhere in bottom-up manner
everywhere :: (forall a. Data a => a -> a)
           -> (forall a. Data a => a -> a) 
```

在 Haskell 中这样做很大程度上依赖于类型类。在 Scala 中，有几个[移植的示例](https://stackoverflow.com/q/3031449/83805)

# c# - 访问数据网格标题中的组合框

> ID：11397905
> 
> 赞同：1
> 
> 时间：2012-07-09T15:10:28.240
> 
> 标签：c#, wpf, vb.net, xaml

我在标题中有一个带有组合框的数据网格。我正在使用组合框来选择取消选中列中的所有值。这是它的 xaml 代码：

```
<DataGridTemplateColumn.HeaderTemplate>
    <DataTemplate>
        <CheckBox x:Name="chbSelectAll" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0" Padding="0"
             Checked="chbSelectAll_Checked" Unchecked="chbSelectAll_Unchecked" IsChecked="False"/>
       </DataTemplate>
 </DataGridTemplateColumn.HeaderTemplate> 
```

我现在可以使用选中/未选中事件来设置列值。现在我想访问标题中复选框的值。或者只是一种通过代码取消选中它的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:28:33.063

您可以实现一个 inotifypropertychanged 属性以与您的复选框的“ischecked”属性绑定。这将允许访问该值并将其设置在您的视图模型中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:22:39.060

看起来你没有使用 MVVM，所以如果你不反对使用后面的代码，你可以通过你给它的名字来引用复选框。

```
chbSelectAll.IsChecked = true; 
```

# javascript - 使用 jQuery .on() 获取元素

> ID：11397907
> 
> 赞同：1
> 
> 时间：2012-07-09T15:10:37.693
> 
> 标签：javascript, jquery, yahoo

如果我使用`.on()`这样的jQuery函数（还有更多，但这是提取的主要问题区域）：

```
$(document).on("click", 
          $("#contcont a, #leftnav li a, #leftnav li ul a, #mainarea-home a").not(".secitem-mid a"),
    function clicker(event, sData) {

    var $this = $(this);

    sHREF = $this.attr("href");

    alert(sHREF);

} ); 
```

我越来越不确定，那么实际获取被点击元素的最佳方法是什么？显然，我需要`.on()`让它总是发生，而不是每次加载新数据时都必须将它附加到所有元素（这是通过 Yahoo! 存储，所以有必要这样做）。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T15:17:04.243

的第二个参数[`on`](http://api.jquery.com/on)是一个***选择器***，而不是一个 jQuery 对象；它用于事件委托。

如果您打算直接将它们连接起来，那么：

```
$("#contcont a, #leftnav li a, #leftnav li ul a, #mainarea-home a").not(".secitem-mid a").on("click", function clicker(event, sData) {

    var $this = $(this);

    sHREF = $this.attr("href");

    alert(sHREF);

}); 
```

如果您真的想使用事件委托，这部`.not`分会有点棘手，因为（取决于您的标记）您可能必须在主要系列中的每个选择器上重复它。由于这很丑陋，因此您最好在处理函数中处理该特定情况：

```
$(document).on("click", "#contcont a, #leftnav li a, #leftnav li ul a, #mainarea-home a", function clicker(event, sData) {

    var $this = $(this);

    // Handle the "not" part
    if (!$this.is(".secitem-mid a")) {
        sHREF = $this.attr("href");

        alert(sHREF);
    }
}); 
```

但是，另外：通常最好将您的委托放在离您要处理的元素最近的容器中。如果您的`#contcont`,`#leftnav`和`#mainarea-home`元素*不是*动态的，我可能会考虑将委托植根于它们而不是`document`，例如：

```
$("#contcont"     ).on("click", "a:not(.secitem-mid a)", clicker);
$("#leftnav"      ).on("click", "li a:not(.secitem-mid a)", clicker);
$("#mainarea-home").on("click", "a:not(.secitem-mid a)", clicker);
function clicker(event, sData) { ... } 
```

注意我只需要三个，而不是四个；你的`#leftnav li ul a`选择器已经被`#leftnav li a`.

* * *

还有一点离题：注意您使用的是*命名函数表达式*，这[在 IE8 和更早版本上可能会很棘手](http://blog.niftysnippets.org/2010/09/double-take.html)。我上面的最后一个示例消除了这一点，而是将其作为函数*声明*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T15:29:39.307

ON 方法也可以在没有委托的情况下使用。如果页面加载后没有添加内容，可以使用以下代码选择元素：

```
var elements = $('#contcont a, #leftnav li a, #leftnav li ul a, #mainarea-home a').not('.secitem-mid a'); 
```

下面做一些事件处理：

```
$(elements).on('click', function() {
    //do something
}); 
```

# solr - 如何按多个字段中的词频对 solr 进行排序？

> ID：11397919
> 
> 赞同：1
> 
> 时间：2012-07-09T15:11:32.773
> 
> 标签：solr

我被分配了一项任务，我应该更改我们的 solr 搜索，以使用术语频率对 solr 返回的列表进行排序。

好吧，我找到了一种方法，只需使用`omitNorms="true"`.

问题是，当我在做一个字段时，这将不起作用 - 搜索，按名称说：

```
q=name:jones 
```

按照这个例子，我得到一个文档列表，其词频在“名称”字段中最高。但我想要实现的是有一个查询，它给我一个文档列表，其词频在所有字段中都是最高的。

示例：如果名为 Jones 的用户在他的传记中也出现了 10 次“Jones”一词，我希望该文档的排名更高。

那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:07:16.640

您可以在所有字段中搜索查询词，并将字段查询用作过滤器。假设 Solr 设置为默认搜索所有字段，您的查询应该是`q=jones&fq=name:jones`

# c - 程序将不再找到 math.h

> ID：11397920
> 
> 赞同：1
> 
> 时间：2012-07-09T15:11:41.093
> 
> 标签：c, linux, linker, libm

很久之后，我下载了一个我共同开发的程序，并试图在我的 Ubuntu Linux 12.04 上重新编译它，但它似乎不再找到 math.h。这可能是因为最近发生了一些变化`gcc`，但我无法确定它是否有问题`src/Makefile.am`或缺少依赖项：

从[http://www.ub.edu/softevol/variscan/](http://www.ub.edu/softevol/variscan/)下载：

```
tar xzf variscan-2.0.2.tar.gz 
cd variscan-2.0.2/
make distclean
sh ./autogen.sh
make 
```

我得到：[...]

```
gcc -DNDEBUG -O3 -W -Wall -ansi -pedantic  -lm  -o variscan variscan.o statistics.o common.o linefile.o memalloc.o dlist.o errabort.o dystring.o intExp.o kxTok.o pop.o window.o free.o output.o readphylip.o readaxt.o readmga.o readmaf.o readhapmap.o readxmfa.o readmav.o ran1.o swcolumn.o swnet.o swpoly.o swref.o  
statistics.o: In function `calculate_Fu_and_Li_D':
statistics.c:(.text+0x497): undefined reference to `sqrt'
statistics.o: In function `calculate_Fu_and_Li_F':
statistics.c:(.text+0x569): undefined reference to `sqrt'
statistics.o: In function `calculate_Fu_and_Li_D_star':
statistics.c:(.text+0x63b): undefined reference to `sqrt'
statistics.o: In function `calculate_Fu_and_Li_F_star':
statistics.c:(.text+0x75c): undefined reference to `sqrt'
statistics.o: In function `calculate_Tajima_D':
statistics.c:(.text+0x85d): undefined reference to `sqrt'
statistics.o:statistics.c:(.text+0xcb1): more undefined references to `sqrt' follow
statistics.o: In function `calcRunMode21Stats':
statistics.c:(.text+0xe02): undefined reference to `log'
statistics.o: In function `correctedDivergence':
statistics.c:(.text+0xe5a): undefined reference to `log'
statistics.o: In function `calcRunMode22Stats':
statistics.c:(.text+0x104a): undefined reference to `sqrt'
statistics.o: In function `calculate_Fu_fs':
statistics.c:(.text+0x11a8): undefined reference to `fabsl'
statistics.c:(.text+0x11ca): undefined reference to `powl'
statistics.c:(.text+0x11f2): undefined reference to `logl'
statistics.o: In function `calculateStatistics':
statistics.c:(.text+0x13f2): undefined reference to `log'
collect2: ld returned 1 exit status
make[1]: *** [variscan] Error 1
make[1]: Leaving directory `/home/avilella/variscan/latest/variscan-2.0.2/src'
make: *** [all-recursive] Error 1 
```

这些库在那里是因为这个简单的示例运行良好：

```
$ gcc test.c -o test -lm
$ cat test.c 
#include <stdio.h>
#include <math.h>
int main(void)
{
        double x = 0.5;
        double result = sqrt(x);
        printf("The hyperbolic cosine of %lf is %lf\n", x, result);
        return 0;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T15:18:02.897

该库需要放在编译器命令的末尾，就像您在简单示例中所做的那样：

> gcc -DNDEBUG -O3 -W -Wall -ansi -pedantic -o variscan variscan.o statistics.o common.o linefile.o memalloc.o dlist.o errabort.o dystring.o intExp.o kxTok.o pop.o 窗口.o free.o output.o readphylip.o readaxt.o readmga.o readmaf.o readhapmap.o readxmfa.o readmav.o ran1.o swcolumn.o swnet.o swpoly.o swref.o statistics.o -lm

从[GCC 链接选项](http://gcc.gnu.org/onlinedocs/gcc/Link-Options.html)：

```
-图书馆
-l 库
    链接时搜索名为 library 的库。
    （将库作为单独参数的第二种选择
    仅用于 POSIX 合规性，不推荐使用。）

    在命令中编写此选项的位置有所不同；
    链接器在
    它们被指定的顺序。
    因此，`foo.o -lz bar.o' 在文件 foo.o 之后搜索库 `z' 但是
    bar.o 之前 如果 bar.o 引用 `z' 中的函数，那些函数
    可能无法加载。

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T16:25:13.320

似乎这个简单的改变就足够了`Makefile.am`：

```
+variscan_LDADD = -lm
-variscan_LDFLAGS = -lm 
```

# version-control - 是否有工具可以在多个平台上构建和测试未提交/本地更改？

> ID：11397923
> 
> 赞同：2
> 
> 时间：2012-07-09T15:11:49.143
> 
> 标签：version-control, build, cross-platform

我曾经工作过的一家公司一直饱受建筑损坏的困扰。因此，他们制作了一个工具，可以从开发人员的机器（它从 SCM 检测到）压缩本地未提交的更改，并将它们发送到远程服务器以进行测试构建。

远程服务器将使用存储库更新它的源副本，然后应用它从开发人员那里收到的更改。然后它将构建并测试更改。我们实际上针对多个平台，因此它会为每个平台执行上述操作。完成后，如果一切都是绿色的，则开发人员有理由相信他们可以在不破坏“真实”构建的情况下提交更改。

是否有任何工具可以做类似的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:14:19.693

您应该看看[Jenkins](http://jenkins-ci.org/)等持续集成工具。您可以让从站定位到多个平台。

然后你可以做的是使用分支：

假设您让开发人员将他们的代码提交到由您的 CI 工具监控的*开发*分支（也可以是主干）。当此分支上的构建状态满足您的条件时，您可以将这些更改合并到发布分支以将它们提交到生产环境。

此合并可以使用 CI 工具自动完成，也可以在 dev 分支上的所有灯都为绿色时手动完成。

# ruby-on-rails-3 - 如何使用 Rails::Generators.invoke("active_record:migration") 生成创建表迁移文件？

> ID：11397925
> 
> 赞同：0
> 
> 时间：2012-07-09T15:11:52.887
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1, rubygems

当我使用此代码时

```
Rails::Generators.invoke("active_record:migration","create_tests",{:behavior=>:invoke, :destination_root=>Rails.root}) 
```

要生成迁移文件，我生成了以下类：

```
class CreateTests < ActiveRecord::Migration
  def up
  end

  def down
  end
end 
```

但我想要的是这样的：

```
class CreateTests < ActiveRecord::Migration
  def change
    create_table :tests do |t|

      t.timestamps
    end
  end
end 
```

我不知道我需要在调用方法中传递哪些参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:33:14.487

您可以创建模板文件并将其用于生成目的。

```
 class CoolMessageGenerator < Rails::Generators::Base
      source_root File.expand_path('../templates', __FILE__)
      argument :model_name, :type => :string, :default => 'CoolMessage'

      def migration
        template 'cool_migration.rb',
                 File.join('db', 'migrate', "#{Time.now.to_i}_create_#{model_name.tableize}.rb")
      end
    end 
```

和 templates/cool_migration.rb 在同一目录中：

```
class Create<%= model_name.pluralize %> < ActiveRecord::Migration
  def change
    create_table :<%= model_name.tableize %> do |t|
      t.timestamps
    end
  end
end 
```

# javascript - SDK2：使用 x 轴的日期时间的 Rally.ui.chart 示例？

> ID：11397928
> 
> 赞同：1
> 
> 时间：2012-07-09T15:12:12.057
> 
> 标签：javascript, extjs, rally

您是否有任何使用 x 轴的日期时间的新 Rally.ui.chart.Chart 示例？文档中的示例似乎没有使用 XAxis 来设置标签，我认为日期时间示例会很有启发性。

# git - Git SVN - 无效的修订范围

> ID：11397930
> 
> 赞同：1
> 
> 时间：2012-07-09T15:12:22.187
> 
> 标签：git, git-svn

我将 git 与 SVN 一起使用。

我正在尝试执行`git svn dcommit`，但它给了我这个错误：

> $ git svn dcommit 致命：无效的修订范围 20edee48314fb1d070d84c1641abd5489d9a1479..refs/remotes/git-svn rev-list --pretty=raw --reverse 20edee48314fb1d070d84c1641abd5489d9a1479..refs 命令返回错误：128svn..refs/

我似乎无法理解出了什么问题。我什至不能做一个 git svn 信息。它给了我同样的错误

# javascript - 浮动菜单 CSS/Javascript 问题

> ID：11397932
> 
> 赞同：1
> 
> 时间：2012-07-09T15:12:30.563
> 
> 标签：javascript, html, css, mobile

我对这一切都很陌生，所以感谢您的耐心。好的，所以我正在构建一个带有浮动 Javascript 菜单的网站。原代码来自：[Jtricks Absolute Floating Menu](http://www.jtricks.com/javascript/navigation/floating.html)

问题出在：在移动浏览器中查看网站时，放大最初会导致浮动 javascript 菜单离开页面的最左侧并覆盖页面上的内容。我通过将其锁定到页面左侧的固定宽度 div 来解决此问题。

现在我遇到的问题是，我不想要 javascript 的花哨动画。[一个固定窗口的简单 CSS 脚本就可以了。](http://www.quackit.com/css/codes/css_floating_menu.cfm)唯一的问题是，当我在移动浏览器上放大时，我尝试过的所有东西都做了同样的“自由浮动”事情，我似乎找不到解决办法。

有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T20:49:56.310

I use the "Jtricks Absolute Floating Menu". To make the zoom work on it you have to remove one line in the function documentHeight. This line is "html.clientHeight,". Do the same for function documentWidth by removing line : "html.clientWidth,".

I have reported this bug to the creator.

Hope this help.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:44:14.643

好吧，我猜这正是`fixed`定位元素的行为。您想要的是菜单`fixed`在缩放为 100% 时像菜单一样工作，然后在屏幕放大时像相对或绝对定位的菜单一样工作。[这是一种检测缩放的方法](https://stackoverflow.com/questions/6163174/detect-page-zoom-change-with-jquery-in-safari)。我希望这会有所帮助。

# c++ - 致命错误：sys/statvfs.h：没有这样的文件或目录

> ID：11397934
> 
> 赞同：0
> 
> 时间：2012-07-09T15:12:33.230
> 
> 标签：c++, gcc

我试图编译一个需要 sys/statvfs.h 文件的程序。我正在使用 x86_64-w64-mingw32 编译器（windows-7）进行编译。

你们能指出一个正确的下载或任何其他方法来摆脱这个错误。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:24:21.737

这很简单。`sys/statvfs.h`是符合 POSIX 的 UNIX 和类 UNIX 系统的一部分。它只是在 Windows 中不存在。你可以试试 Cygwin，但从它的使用来看，我怀疑它也不会在那里。UNIX 程序通常在 UNIX 之间非常兼容，但如果它们使用 POSIX API，则几乎不会与 Windows 兼容。尝试在 Linux、Mac、Solaris 等上编译它。

# asp.net-mvc - 在 RedirectToAction 中丢失 Route 数据

> ID：11397938
> 
> 赞同：1
> 
> 时间：2012-07-09T15:12:39.967
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, redirecttoaction, data-loss

嗨，我有一个奇怪的问题，我们开始吧：

我正在使用此命令重定向：

`return RedirectToAction("ViewMessage", "Account", new {id = model.MessageId});`

但是在 ViewMessage 操作中，当我尝试获取 id 时，它的 null ?!?!?!?!??

`string strMessageId = RouteData.Values["id"] as string;`

我已经在很多地方完成了这段代码，它工作正常，但我不知道这里发生了什么...... :(

我知道我可以使用 TempData 但我不想:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:53:09.650

实际上你为我工作的方式仍然尝试这个

* * *

```
return RedirectToAction("ViewMessage",new RouteValueDictionary(new {controller="Account",action="ViewMessage", id = model.MessageId })); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T15:28:12.073

尝试使用 View Context 访问路由值

```
ViewContext.RequestContext.RouteData.Values("id") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T14:19:50.710

检查您的路由配置。如果您的操作参数名称是“id”，那么您的路由 url 模式应该是 {controller}/{action}/{id}。

# c++ - 为什么这行不通；opencv Mat_

> ID：11397939
> 
> 赞同：0
> 
> 时间：2012-07-09T15:12:44.073
> 
> 标签：c++, eclipse, opencv, pattern-recognition

我似乎无法让它工作。我正在尝试获取图像的像素值，但首先需要更改图像的颜色，但由于我不能使用 int 或只是 Mat 因为值不是整数，所以我必须使用`<float>`并且因为错误弹出当我尝试在 cmd 上运行它时。

```
int main(int argc, char **argv)
{

    Mat img = imread(argv[1]);
    ofstream myfile;

    Mat_<float> MatBlue = img;
        int rows1 = MatBlue.rows;
        int cols1 = MatBlue.cols;
        for(int x = 0; x < cols1; x++) {
            for(int y = 0; y < rows1; y++) {
                float val = MatBlue.at<cv::Vec3b>(y, x)[1];
                MatBlue.at<cv::Vec3b>(y, x)[0] = val + 1;

            }
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:35:43.570

要实现您的目标，即类型转换，请使用`cv::Mat::convertTo`.

示例：`img.convertTo(MatBlue, CV_32F)`或`img.convertTo(MatBlue, CV_32F, 1.0/255.0)`（使值在 0 和 1 之间标准化）。

您在代码中混合了 char 和 float 指针类型。

# php - 为什么在图像和 css 文件之后使用查询字符串？

> ID：11397942
> 
> 赞同：3
> 
> 时间：2012-07-09T15:12:54.693
> 
> 标签：php, asp.net, asp.net-mvc-3, html

我在各种网站上看到了一个查询字符串，后跟一个图像和 css 文件的数字。当我查看源代码（通过 Chrome 开发人员）时，缓存的 css 文件和图像的名称中没有查询字符串中的数字。我还在刷新页面时查询字符串中的数字发生变化的网站上看到过。

例如：

myimage.jpg?num=12345

myStyles.css?num=82943

刷新后：

myimage.jpg?num=67948

myStyles.css?num=62972

谁能向我解释这些查询字符串缺少跟踪的目的可能是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T15:14:49.687

开发人员经常使用这些带有随机数（或版本号）的查询字符串来强制浏览器请求一个新的副本并避免缓存这些文件，因为每次请求都不同。

因此，如果您有一个文件`/image.png`，但它是一个生成的图像，例如验证码或其他东西，您可以在它后面加上一个随机数查询字符串`/image.png?399532`，然后浏览器不会`image.png`从其缓存中提取，而是会从服务器下载一个新副本.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T15:14:53.633

1.  防止缓存（每次更新文件时，查询字符串可以提供一个唯一的 URL，从而导致浏览器下载新副本，而不是从缓存中加载过时的副本）
2.  版本控制（类似于#1，但有更具体的目的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T15:17:14.500

查询字符串用于版本控制，它强制导航器重新加载 css 和图像，而不是使用缓存

# sql-server - （访问）recordset.findfirst 是否应该在日期方面存在性能问题？

> ID：11397943
> 
> 赞同：1
> 
> 时间：2012-07-09T15:12:58.440
> 
> 标签：sql-server, ms-access, indexing

我正在使用 Access 遍历一个表，查找相关信息并将其放在一个主表中。

它加载两个记录集，开始迭代 rsImport（本地 <1000 行表），对于每个 rsImport 行，它会查看是否是与 rsRecords 中的 UniqueRef 匹配的行，然后它将更新或添加，如果它这样做了不存在。

F8 单步执行完整的代码，它实际上在读取 rsRecords.findfirst 时会暂停。如果我删除 DateofAction 部分，它会加快速度，所以它与日期有关。

有任何想法吗？

我用：

```
Dim rsImport As DAO.Recordset, rsRecords As DAO.Recordset
Set rsImport = CurrentDb().OpenRecordset("SELECT * from tblFeedbackImport", dbOpenDynaset)
rsImport.MoveLast
rsImport.MoveFirst
Set rsRecords = CurrentDb().OpenRecordset("SELECT * from dbo_tblFeedbackRecords", dbOpenDynaset, dbSeeChanges)
rsRecords.MoveLast
rsRecords.MoveFirst

Do While rsImport.EOF = False
 rsRecords.FindFirst "UniqueRef='" & Trim(rsImport!UniqueRef) & "' AND DateofAction=#" & Format(rsImport!DateofAction, "m-d-yy") & "#"

 rsImport.MoveNext
Loop 
```

我有一个基于两列（UNIqueRef 和 DateOfAction）的 PrimaryIndex（Clustered）。

# javascript - javascript获取函数内嵌套函数的索引

> ID：11397944
> 
> 赞同：0
> 
> 时间：2012-07-09T15:13:05.047
> 
> 标签：javascript

我有一个对数组进行排序的函数，在其中，我有自定义排序函数。像这样的东西：

```
function SortTheArray() {

  function SortCriteria1Asc(a, b) { ... }
  function SortCriteria1Dsc(a, b) { ... }
  function SortCriteria2Asc(a, b) { ... }
  function SortCriteria1Asc(a, b) { ... }

  var CustomSort;

  switch (SomeVar) {

     case 1:
       CustomSort = SortCriteria1Asc;
       break;

     case 2:
        CustomSort = SortCriteria1Dsc;
        break;

     case ....
  }

  SomeDataArray.sort(CustomSort);
} 
```

是否可以删除该`switch`语句并说该`CustomSort`函数仅等于第 n 个嵌套函数？

感谢您的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T15:14:59.807

不要给出函数名称，将它们存储在数组中。

```
var functions = [
  function (a,b) { ... },
  function (a,b) { ... },
  function (a,b) { ... }
]; 
```

然后只是：

```
SomeDataArray.sort(functions[SomeVar]); 
```

…但是数字索引的函数标识符听起来不是一个好主意。使用对象而不是数组并给它们起描述性名称可能会更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T15:15:57.037

你为什么不在一个由你切换的变量索引的对象中定义内部函数？

```
function SortTheArray(someVar){

   var sorters = {
       CriteriaA: function(array){ ... };
   };
   return sorters[someVar];
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T15:14:52.463

您可以直接在数组中构建函数：

```
function SortTheArray() {
   var functions = [];
   functions.push(function(a,b) { ... }); 
```

然后就可以执行了`functions[i](a,b)`。

# c# - 返回单行

> ID：11397946
> 
> 赞同：14
> 
> 时间：2012-07-09T15:13:18.087
> 
> 标签：c#, ado.net, asp.net-3.5

我正在尝试从数据库中返回一行：

```
using (connection = new SqlConnection(ConfigurationManager.AppSettings["connection"]))
{
    using (command = new SqlCommand(@"select top 1 col_1, col_2 from table1", connection))
    {
        connection.Open();

        using (reader = command.ExecuteReader())
        {
            reader.Read();
            return reader["col_1"];
        }
    }
} 
```

但我收到以下错误消息：

> 编译器错误消息：CS0266：无法将类型“对象”隐式转换为“字符串”。存在显式转换（您是否缺少演员表？）
> 第 90 行：return reader["col_1"];

我确定我犯了一个非常明显的错误，但我似乎找不到任何单行示例，我找到的所有示例都是针对使用`while loop`.

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-09T15:15:35.487

`reader["col_1"]`返回`object`。

你想要类似的东西`reader.GetString(reader.GetOrdinal("col_1"))`。

编辑-> 我只是想在此处添加一条注释，除了其他人提出的担忧之外，`SELECT TOP`没有 an`ORDER BY`可以根据架构更改和/或旋转木马扫描为您提供随机结果。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-09T15:26:49.700

这就是我设计（和修复）代码的方式：

```
using (var connection = new SqlConnection(ConfigurationManager.AppSettings["connection"]))
using (var command = new SqlCommand(@"select top 1 col_1, col_2 from table1", connection))
{
    connection.Open();

    using (var reader = command.ExecuteReader())
    {
        if (reader.Read()) // Don't assume we have any rows.
        {
            int ord = reader.GetOrdinal("col_1");
            return reader.GetString(ord); // Handles nulls and empty strings.
        }

        return null;
    }
} 
```

使用索引`reader[]`会给你`object`类型，这些需要转换。然而，我几乎不接触那种风格，总是喜欢稍微冗长但更健壮的序数使用，并以强类型的方式询问类型。

如果您只需要第一行的第一列中的值，则可以`ExecuteScalar`改用，这再次返回一个可以强制转换且不需要读取器的对象：

```
using (var connection = new SqlConnection(ConfigurationManager.AppSettings["connection"]))
using (var command = new SqlCommand(@"select top 1 col_1, col_2 from table1", connection))
{
    connection.Open();

    var result = command.ExecuteScalar();
    return result == null ? "" : (string)result;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-09T15:16:06.157

问题是返回类型。您所在的方法期望您返回一个字符串，但`reader["col_1"]`它是一个对象。我建议返回`reader["col_1"].ToString()`或`Convert.ToString(reader["col_1"])`。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-09T15:25:13.333

在我看来，你不想要一行，只想要一个值：

```
SqlConnection sqlConnection = new SqlConnection("Your Connection String");
SqlCommand cmd = new SqlCommand();
Object returnValue;

cmd.CommandText = "SELECT TOP 1 col_name FROM Customers";
cmd.CommandType = CommandType.Text;
cmd.Connection = sqlConnection1;

sqlConnection.Open();

returnValue = cmd.ExecuteScalar();

sqlConnection.Close();

return returnValue.ToString(); //Note you have to cast it to your desired data type 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-09T15:16:03.570

代替：

```
 using (reader = command.ExecuteReader())
 {
      reader.Read();
      return reader["col_1"];
 } 
```

您需要将`reader["col_1"]`转换为字符串，`reader["col_1"].ToString()`或者`reader.GetString(0)`像：

```
return reader.GetString(0); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-09T15:16:04.440

如果您的查询仅返回一个值，则可以使用`if`语句

```
[...]
string x = string.Empty;
if(reader.Read()) {
    // make sure the value is not DBNull
    if(DBNull.Value != reader["col_1"]) {
       x = reader.GetString(0);
    }
}
[...] 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-07-09T15:17:54.223

`reader["col_1"]`返回一个`object`. 我假设您的函数的返回类型为`string`，这是错误的来源，它不能隐式转换`object`为 a `string`。

您可能希望从 col_1 返回一个字符串，因此您可以强制转换它：`(string)reader["col_1"]`.

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-07-09T15:15:45.227

首先你可以使用 cast `(string)reader["col_1"]`。您可能期待一个字符串并且`reader["col_1"]`是一个`object`.

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-07-09T15:26:02.277

阅读器返回对象，您应该将其转换为您需要的对象，在本例中为字符串。

您可以使用以下任何代码：

`return reader.GetString(0);`

`return reader["col_1"].ToString();`

`return Convert.ToString(reader["col_1"]);`

`return reader["col_1"] as string;`

但不要忘记在离开功能之前关闭连接和阅读器。

```
string ret = reader.GetString(0);
reader.Close();
connection.Close();
return ret; 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-06-04T10:08:28.817

按照以下步骤选择单个列并显示它们。

```
 //create a connection
    SqlConnection sqlConnection = new SqlConnection("Your Connection String");
    SqlCommand cmd = new SqlCommand();
    cmd.Connection = sqlConnection;

    //open the connection
    sqlConnection.Open();

    //Your command query string
    cmd.CommandType = CommandType.Text;
    cmd.CommandText = "SELECT TOP 1 col_name FROM Customers";

    //Execute the reader
    SqlDataReader result  = cmd.ExecuteReader();
    result.Read();

    //close the connection
    sqlConnection.Close();

    return result["coiumn_name"].ToString(); 
```

# ios - 如何在 iOS 中使用 Facebook SDK 避免“已达到 Feed 操作请求限制”错误？

> ID：11397948
> 
> 赞同：-2
> 
> 时间：2012-07-09T15:13:34.277
> 
> 标签：ios, facebook, login

> 免责声明 - 这不是**垃圾邮件**。在应用程序中，用户每次都会确认消息。我只想要一个像“状态随机播放”这样的应用程序。测试这个应用程序，我发现使用这个应用程序，我可以将多个相同的消息和无限的消息发布到 facebook 上而不会出现任何错误。

我想在 Facebook 上发布无限数量的消息，但我找不到方法。

我该如何实施？

另一方面 - 正如我听说的那样，您可以在重新登录 Facebook 后再次发布。

如何在 iOS 内部重新登录 Facebook？也就是说，没有任何用户界面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T15:18:48.923

您在这里遇到的错误不能通过简单地注销并重新登录来绕过。 [我听说](https://stackoverflow.com/questions/11384152/how-to-avoid-the-duplicate-status-message-error-in-using-facebook-sdk-in-ios/11384187#11384187)这适用于“重复状态消息”错误，但您在这里看到的是**Facebook 为您的应用程序设置的限制**。用户注销并重新登录多少次并不重要——**他们仍在使用您的应用程序，并且仍会受到强制执行的限制的影响。**

* * *

## 被警告！

如果 Facebook 要“抓住”您绕过他们的安全功能，**他们将对**您/您的应用程序/您的用户/您的页面...等采取行动...

我在这里说的是个人经验...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T15:16:45.100

首先，请注意不要滥用 Facebook API 功能，因为如果您参与`spammy`行为，您可能会发现自己无法使用该服务。

在不使用用户界面的情况下重新登录，您可以简单地重新建立一个新的访问令牌以继续使用您的应用程序功能。

**参考**：http: [//developers.facebook.com/docs/authentication/reauthentication/](http://developers.facebook.com/docs/authentication/reauthentication/)

# java - Java垃圾收集和大对象

> ID：11397949
> 
> 赞同：1
> 
> 时间：2012-07-09T15:13:43.353
> 
> 标签：java, object, memory-management, garbage-collection

我的程序中有大约 1500x500 像素的栅格。每个像素都用一个浮点数表示。我相信这意味着 1500x500x4（字节）= 300 万字节或 3mb。它们可以比这更大。Java 垃圾收集器对大对象的处理方式是否与小对象不同？他们会自动跳到更高的一代吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T15:23:04.880

较大的物体可以直接放置在永久空间中。单个对象的大小很重要，例如`float[1500][1500]`1500 个对象，每个对象 1500*4（加上开销）。

[http://blog.dynatrace.com/2011/05/11/how-garbage-collection-differs-in-the-three-big-jvms/](http://blog.dynatrace.com/2011/05/11/how-garbage-collection-differs-in-the-three-big-jvms/)

这表明 JRockit 确实将大型对象放入永久空间，但没有提及 HotSpot。

* * *

这表明大对象必须大于年轻代空间才能直接进入永久空间。

[https://blogs.oracle.com/jonthecollector/entry/size_matters](https://blogs.oracle.com/jonthecollector/entry/size_matters)

# java - 使用外部 jar 文件从 Windows 命令行运行 Java 时出现 NoClassDefFoundError

> ID：11397952
> 
> 赞同：0
> 
> 时间：2012-07-09T15:13:52.837
> 
> 标签：java, windows, selenium, jar, command

我是从 Windows 命令行运行 Java 的新手，无法运行我的程序。总而言之，这正是我想要做的：

运行两个 .java 文件，TestCase1.java 和 UniversalVariables.java
合并多个外部 jar 文件
从命令行执行所有这些操作

TestCase1.java 包含所有功能代码，而 UniversalVariables.java 几乎只有一些数据，所以不要让其中的所有内容让您感到困惑。

应该注意的是，我正在使用 Selenium 并通过 Eclipse 运行它。

这是TestCase1.java：

 `````
package NSSR;

import com.thoughtworks.selenium.*;<br>
import org.junit.After;<br>
import org.junit.Before;<br>
import org.junit.Test;<br>

//Create new NSSR

public class TestCase1 extends SeleneseTestCase {

    public static void main(String[] args) {
        TestCase1 tc1 = new TestCase1();
        try {
            tc1.setUp();
            tc1.testTestCase1();
            tc1.tearDown();
        } catch (Exception e) {

        }
    }

    @Before
    public void setUp() throws Exception {
        selenium = new DefaultSelenium("localhost", 4444, "*firefox",
                UniversalVariables.baseAddress);
        selenium.start();
    }

    @Test
    public void testTestCase1() throws Exception {
        selenium.open(UniversalVariables.loginPage);
        selenium.type("name=USERNAME", UniversalVariables.username);
        selenium.type("name=PASSWORD", UniversalVariables.password);
        selenium.click("link=Submit");
        selenium.waitForPageToLoad("60000");
        selenium.open("/itg/dashboard/app/portal/PageView.jsp?IS_WINDOID=N");
        selenium.click("link=Create");
        selenium.click("link=Request");
        selenium.waitForPageToLoad("30000");
        selenium.select("name=REQUEST_TYPE_CREATE",
                "label=Non-Standard Service");
        selenium.click("css=span.secBtn > a");
        selenium.waitForPageToLoad("30000");
        String title = UniversalVariables.getRandomTitle();
        String req = UniversalVariables.Requestor;
        String dept = UniversalVariables.reqDept;
        String desc = UniversalVariables.getRandomDescription();
        String date = UniversalVariables.getRandomDate();
        System.out.println(title);
        System.out.println(req);
        System.out.println(dept);
        System.out.println(desc);
        System.out.println(date);
        selenium.type("id=REQ.DESCRIPTION", title);
        selenium.type("id=REQ.P.REQUESTORAC_TF", req);
        selenium.select("id=REQ.P.REQUESTOR_DEPT", dept);
        selenium.type("id=REQ.P.DETAIL_DESC", desc);
        selenium.type("REQ.P.REQ_COMPL_DATE", date);
        selenium.click("link=Submit");
        selenium.waitForPageToLoad("30000");
        selenium.refresh();
    }

    @After
    public void tearDown() throws Exception {
        selenium.stop();
    }
} 
````  `这是 UniversalVariables.java：

 `````
package NSSR;

import java.util.*;

public class UniversalVariables {

    public static String baseAddress = "******";
    public static String loginPage = "******";
    public static String username = "******";
    public static String password = "******";
    public static ArrayList<String> NSSR_Titles = new ArrayList<String>(NSSR_Titles());
    public static String Requestor = "******";
    public static String reqDept = "Shared Services";
    public static ArrayList<String> NSSR_Descriptions = new ArrayList<String>(NSSR_Descriptions());
    public static ArrayList<String> NSSR_Dates = new ArrayList<String>(NSSR_Dates());
    public static Random randy = new Random();
    public static int num;

    public static String getRandomTitle() {
        num = randy.nextInt(NSSR_Titles.size());
        return NSSR_Titles.get(num);
    }

    public static String getRandomDescription() {
        num = randy.nextInt(NSSR_Descriptions.size());
        return NSSR_Descriptions.get(num);
    }

    public static String getRandomDate() {
        num = randy.nextInt(NSSR_Dates.size());
        return NSSR_Dates.get(num);
    }

    public static ArrayList<String> NSSR_Titles() {
        ArrayList<String> list = new ArrayList<String>();
        for(int i = 1; i < 11; i++)
            list.add("Title " + i);
        return list;
    }

    public static ArrayList<String> NSSR_Descriptions() {
        ArrayList<String> list = new ArrayList<String>();
        for(int i = 1; i < 11; i++)
            list.add("Description " + i);
        return list;
    }

    public static ArrayList<String> NSSR_Dates() {
        ArrayList<String> list = new ArrayList<String>();
        for(int i = 1; i < 13; i++)
            for(int j = 1; j < 29; j++)
                for(int k = 13; k < 100; k++) {
                    String str = i + "/" + j + "/20" + k;
                    list.add(str);
                }
        return list;
    }
} 
````  `这是我在命令行中输入的（这些是我使用的所有 jar 文件。我知道它不漂亮......请耐心等待。）：

```
>javac -classpath C:\JAR\junit-4.0.jar;C:\JAR\junit-4.0-src.jar;C:\JAR\selenium-java-c
lient-driver.jar;C:\JAR\selenium-java-client-driver-sources.jar;C:\JAR\selenium-
java-client-driver-tests.jar;C:\JAR\selenium-java-client-driver-test-sources.jar
;C:\JAR\selenium-server.jar;C:\JAR\selenium-server-coreless.jar;C:\JAR\selenium-
server-sources.jar;C:\JAR\selenium-server-standalone-2.24.1.jar; NSSR\TestCase1.
java NSSR\UniversalVariables.java 
```

这编译得很好。然后我把它放到命令行中：

```
>java NSSR.TestCase1 
```

然后是错误：

 `````
Exception in thread "main" java.lang.NoClassDefFoundError: com/thoughtworks/sele
nium/SeleneseTestCase
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClassCond(Unknown Source)
        at java.lang.ClassLoader.defineClass(Unknown Source)
        at java.security.SecureClassLoader.defineClass(Unknown Source)
        at java.net.URLClassLoader.defineClass(Unknown Source)
        at java.net.URLClassLoader.access$000(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
Caused by: java.lang.ClassNotFoundException: com.thoughtworks.selenium.SeleneseT
estCase
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        ... 12 more
Could not find the main class: NSSR.TestCase1\.  Program will exit. 
````  `仅供参考，这是我的 CLASSPATH：

.;C:\Program Files\Java\jre6\lib\ext\QTJava.zip;C:\WINDOWS\system32\java.exe\lib;C:\Program Files\IBM\RationalSDLC\ClearQuest\cqjni.jar;C :\JAR*.jar

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T15:16:09.120

您还需要将罐子作为参数放入`java`，就像您传递的一样`javac`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T15:23:40.253

```
java -classpath "C:\JAR\junit-4.0.jar;C:\JAR\junit-4.0-src.jar;C:\JAR\selenium-java-client-driver.jar;C:\JAR\selenium-java-client-driver-sources.jar;C:\JAR\selenium-java-client-driver-tests.jar;C:\JAR\selenium-java-client-driver-test-sources.jar;C:\JAR\selenium-server.jar;C\JAR\selenium-server-coreless.jar;C:\JAR\selenium-server-sources.jar;C:\JAR\selenium-server-standalone-2.24.1.jar" NSSR.TestCase1 
```

应该做你想做的。`java`还需要知道在哪里可以找到库。它不存储在引用类文件中（也不应该，因为它只适合您自己的系统）``````

# java - JBOSS 在读取大型 XML 时重新启动

> ID：11397959
> 
> 赞同：0
> 
> 时间：2012-07-09T15:14:00.157
> 
> 标签：java, xml, xslt, jboss

在读取和处理大型 XML 文件时，我的 JBOSS 出现问题。

我的硬件：

-OS：Windows 2008 Server R2 Enterprise -CPU：Intel E7210 @ 2.4 Ghz（双核）-RAM：12 GB

我尝试读取大约 370 MB 的 XML 文件。当我在 JBOSS 中的程序正在读取这个文件时，内存使用量增加到大约 5 GB。

但是每次 JBOSS 在读取文件时崩溃并重新启动。日志文件中没有提示，为什么 JBOSS 正在重新启动：

带有 fromHdd.trf 的部分是我开始读取 xml 文件的部分（在 16:46:57,411） 两秒钟后（在 16:48:31,036），jboss 正在重新启动而没有任何错误。

jboss日志的一部分：

```
 2012-07-09 16:46:51,083 INFO  [de.softproject.integration.engine.X4engine] Started process "iMan_WebConnect/Stammdaten/ERW16/AttributeSets/Process/getAttributeSetsFromCML.wrf".
2012-07-09 16:46:57,411 INFO  [de.softproject.integration.engine.X4ModuleImpl] Executed action "fromHdd.tra" in 6.313 ms.
2012-07-09 16:48:31,036 INFO  [com.arjuna.ats.jbossatx.jta.TransactionManagerService] JBossTS Transaction Service (JTA version) - JBoss Inc.
2012-07-09 16:48:31,036 INFO  [com.arjuna.ats.jbossatx.jta.TransactionManagerService] Setting up property manager MBean and JMX layer
2012-07-09 16:48:31,645 INFO  [com.arjuna.ats.jbossatx.jta.TransactionManagerService] Starting recovery manager
2012-07-09 16:48:31,755 INFO  [com.arjuna.ats.jbossatx.jta.TransactionManagerService] Recovery manager started
2012-07-09 16:48:31,755 INFO  [com.arjuna.ats.jbossatx.jta.TransactionManagerService] Binding TransactionManager JNDI Reference
2012-07-09 16:48:35,926 INFO  [org.jboss.ejb3.EJB3Deployer] Starting java:comp multiplexer 
```

我的猜测：Java 程序使用 saxon 解析器。Java 或 saxon 解析器导致内存错误。

这部分来自文件 wrapper.conf，如果我为 Java 配置了 8GB RAM。

```
# Java Additional Parameters
wrapper.java.additional.1=-Dprogram.name=run.bat
wrapper.java.additional.2=-Dx4.config.file=../../X4config.xml
wrapper.java.additional.3=-Djavax.xml.transform.TransformerFactory=net.sf.saxon.TransformerFactoryImpl
wrapper.java.additional.4=-Xms128m
wrapper.java.additional.5=-Xmx8192m 
wrapper.java.additional.6=-XX:MaxPermSize=256m
wrapper.java.additional.7=-server
wrapper.java.additional.8=-Dsun.rmi.dgc.client.gcInterval=3600000 
wrapper.java.additional.9=-Dsun.rmi.dgc.server.gcInterval=3600000
wrapper.java.additional.10=-Djava.endorsed.dirs=../lib/endorsed 
```

我该怎么做，以防止 JBOSS 重新启动。希望你有一些想法。

最好的问候 LStrike

PS：是的，我知道，我没有发布任何代码。我无法访问来自Hdd.trf的功能背后的代码，所以我一般尝试得到一些答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T16:02:23.207

在这一点上，某种“内存不足”问题似乎是最可能的解释，但你真的需要一些证据：

*   您应该弄清楚如何从 JBoss 中获取更多关于导致重新启动的信息。检查所有日志文件。如果没有相关内容，请更改日志记录设置以增加日志记录量。

*   您应该考虑由于进程的“ulimit”资源限制或“OOM 杀手”的操作，JBoss JVM 被外部杀死的可能性。您希望在操作系统日志中有一些关于这些的迹象。

你怎么能防止这种情况发生？好吧，我唯一的建议是显而易见的。

*   增加 JVM 堆大小。（但取决于问题如何导致 JBoss 重新启动，这可能会使事情变得更糟。）

*   限制输入的大小，或将其分成更小的块。

*   重写使用 XSLT 以其他方式进行转换的部分。（Saxon 不是解析器。它是一个 XSLT 引擎。）

*   切换到更高效的 XSLT 引擎。这个 SO 问题的公认答案（[什么是最高效的基于 Java 的流 XSLT 处理器？](https://stackoverflow.com/questions/460895/what-is-the-most-efficient-java-based-streaming-xslt-processor)）说 Saxon-SA 在内存使用方面是最有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:27:16.477

似乎来自 Stephen C 的提示有帮助：

*   增加 JVM 堆大小。（但取决于问题如何导致 JBoss 重新启动，这可能会使事情变得更糟。）

我将 JVM 的大小调整为最小 4 GB，最大为 10 GB。

我已将 wrapper.conf 配置如下：

```
 # Java Additional Parameters
wrapper.java.additional.1=-Dprogram.name=run.bat
wrapper.java.additional.2=-Dx4.config.file=../../X4config.xml
wrapper.java.additional.3=-Djavax.xml.transform.TransformerFactory=net.sf.saxon.TransformerFactoryImpl
wrapper.java.additional.4=-Xms4096m
wrapper.java.additional.5=-Xmx10240m 
wrapper.java.additional.6=-XX:MaxPermSize=2048m
wrapper.java.additional.7=-server
wrapper.java.additional.8=-Dsun.rmi.dgc.client.gcInterval=3600000 
wrapper.java.additional.9=-Dsun.rmi.dgc.server.gcInterval=3600000
wrapper.java.additional.10=-Djava.endorsed.dirs=../lib/endorsed
wrapper.java.additional.11=-Dcom.sun.management.jmxremote.port=12233
wrapper.java.additional.12=-Dcom.sun.management.jmxremote.authenticate=false
wrapper.java.additional.13=-Dcom.sun.management.jmxremote.ssl=false
wrapper.java.additional.14=-Dcom.sun.management.jmxremote
wrapper.java.additional.15=-Djboss.platform.mbeanserver
wrapper.java.additional.16=-Djavax.management.builder.initial=org.jboss.system.server.jmx.MBeanServerBuilderImpl
wrapper.java.additional.17=-Dorg.tanukisoftware.wrapper.WrapperSimpleApp.maxStartMainWait=120
#wrapper.java.additional.18=-Xss7048k

# Initial Java Heap Size (in MB)
wrapper.java.initmemory=4096

# Maximum Java Heap Size (in MB)
wrapper.java.maxmemory=10240 
```

目前我正在处理一个 440 MB XML 文件。内存使用稳定在 8GB 左右。

希望以后能稳定运行。

谢谢你的帮助。

# php - php_self 问题表单提交

> ID：11397960
> 
> 赞同：0
> 
> 时间：2012-07-09T15:14:02.277
> 
> 标签：php, mysql

如果你能帮我解决这个问题，我的 php_self 编码有问题，这是我的代码：这是 php 代码

```
<?php
if (isset($_POST['submit']))
{
$id=$_REQUEST['id'];
$notes_en=$_REQUEST['notes_en'];

$notes_ru=$_REQUEST['notes_ru'];

$sql="UPDATE hostess SET notes_en='$notes_en',notes_ru='$notes_ru' WHERE id='$id'";
$result=mysql_query($sql);
if($result){
echo "<div id='edittxt'>successfully updated";
echo "<BR>";
echo '<td ><a href="index.php">View Results</a></div>';
}

else {
die('error'.mysql_error());
}}

?>

This here is the form code from which i ake the information 
<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
<label>Notes</label></br><div id="note"><h1><textarea value="<?php echo $star['notes_en'];?>"><?php echo $star['notes_en'];?></textarea></h1></div></br>

<input name="id" type="hidden" id="id" value="<?php echo $star['id'];?>">

<input type="submit" value="submit" name="submit"></form>" 
```

如果可能，请检查它，因为我一直在尝试修改它并且我没有得到任何结果，它不会给我错误，但它也不会更新数据库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:23:48.557

您的字段上没有名称属性。此外，不采用 value 属性。

试试这个：

```
<textarea name="notes_en"><?php echo $star['notes_en'];?></textarea> 
```

此外，我绝对建议您遵循 Marc B 的建议并保护自己免受 SQL 注入攻击。看看这个线程：

[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

# d3.js - d3.js：强制布局中的建议节点位置

> ID：11397961
> 
> 赞同：14
> 
> 时间：2012-07-09T15:14:05.650
> 
> 标签：d3.js, force-layout

我想创建一个节点有建议位置的图表，但我也想使用强制布局来确保节点本身不会重叠。这在d3中可能吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-11T04:45:51.203

是的，您可以通过以下方式执行此操作：

*   禁用默认重力和充电力。
*   实现[碰撞检测](http://mbostock.github.com/d3/talk/20111018/collision.html)。
*   实现将每个节点吸引到其建议位置的“自定义”重力。

这是一个活生生的例子：

*   [http://bl.ocks.org/1804919](http://bl.ocks.org/1804919)

[Shan Carter 对奥巴马 2013 年预算提案的可视化](http://www.nytimes.com/interactive/2012/02/13/us/politics/2013-budget-proposal-graphic.html)中使用了类似的技术[，Jim Vallandingham](http://vallandingham.me/bubble_charts_in_d3.html)的教程中进一步讨论了这些技术。

# python - 如何在 Python 中搜索字符串中的重复项

> ID：11397963
> 
> 赞同：0
> 
> 时间：2012-07-09T15:14:14.457
> 
> 标签：python, string, sorting

所以我需要一种方法让 python 基本上检测一个字符串之间的差异，如下所示：

```
W:1.0,X:1.1(A:0.1,B:0.2,(C:0.3,D:0.4)E:0.5,(F:0.6,G:0.7)H:0.8)Y:0.9 
```

还有这个：

```
A:0.1,B:0.2,(C:0.3,D:0.4)E:0.5,(F:0.6,G:0.7)H:0.8 
```

是否有任何函数可用于检测在第一个字符串中，有 2 个相互连接的内括号，而在第二个字符串中，第一个内括号最终后面跟着一个闭括号？最好不是 .re 正则表达式。谢谢！

编辑：我正在处理任何括号的情况，来自：

```
A:0.1,B:0.2,(C:0.3,D:0.4)E:0.5,(F:0.6,G:0.7)H:0.8,(T:0.6,V:0.7)S:0.8,(D:0.6,Y:0.7)P:0.8,(X:0.6,L:0.7)M:0.8 
```

内部 2 个子字符串上的任何无限量...到：

```
W:1.0,X:1.1(U:5.0(I:9.0)N:8.0,(A:0.1,B:0.2,(C:0.3,D:0.4)E:0.5,(F:0.6,G:0.7)H:0.8)R:3.4(O:5.5)P:3.0)Y:0.9 
```

一个高度复杂的多子字段字符串，可以包含任意数量的具有自己的孩子的孩子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T16:32:52.063

```
s = 'W:1.0,X:1.1(A:0.1,B:0.2,(C:0.3,D:0.4)E:0.5,(F:0.6,G:0.7)H:0.8)Y:0.9'

def max_depth(s, start_ch='(', end_ch=')'):
    depth = 0
    best = 0
    for ch in s:
        if ch == start_ch:
            depth += 1
            best = max(depth, best)
        elif ch == end_ch:
            depth -= 1
            if depth < 0:
                raise ValueError('illegal string - unmatched close-paren')
    if depth:
        raise ValueError('illegal string - unmatched open-paren')
    return best

print max_depth(s)    # => 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T15:16:43.363

您可以逐个字符地遍历字符串并计算开始与结束括号的数量。

正如蒂姆在评论中指出的那样，您应该有逻辑来识别何时结束括号多于开始括号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T16:00:03.610

这是一个尴尬的 numpy 方法。和 astay13 的建议基本一样，但是对于大数据集应该很快。如果数据太大以至于内存不足，则必须分块处理。

```
>>> import numpy as np
>>> a = 'W:1.0,X:1.1(A:0.1,B:0.2,(C:0.3,D:0.4)E:0.5,(F:0.6,G:0.7)H:0.8)Y:0.9'
>>> arr = np.fromstring(a, dtype=np.ubyte)
>>> parens = (arr==ord('(')).astype(int) - (arr==ord(')')) ## search for parens

>>> parens   ## 1 marks location of opening paren, -1 marks closing paren
array([ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1,  0,  0,  0,  0,  0,
        0,  0,  0,  0,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,
        0,  0, -1,  0,  0,  0,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  0,
        0,  0,  0,  0, -1,  0,  0,  0,  0,  0, -1,  0,  0,  0,  0,  0])

>>> parens[1:] += parens[:-1]  ## compute the nesting level at each character position
>>> parens   
array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2,
    2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T15:20:27.090

正则表达式将是一种更优雅的方式来执行此操作，它可以像`re.search(r'\(.*?\(.*?\)', string)`这样简单，它会通知您字符串是否在一个闭合括号之前有两个打开的括号。

如果您不想使用这些，但是您可以遍历字符串中的字符，如果遇到两个没有关闭括号的打开括号，然后处理它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T15:58:37.747

要确定一行没有嵌套括号（您的问题中的示例 2、3）：

```
re.match(r'(?: [^)]  |  \( [^)]* \) )*$', line, re.X) 
```

即，一行是重复零次或多次的括号中的非括号字符或非嵌套表达式。

# shopify - Webhook 响应但未创建

> ID：11397969
> 
> 赞同：0
> 
> 时间：2012-07-09T15:14:28.467
> 
> 标签：shopify, webhooks

当我试图“完成”安装过程的创建时，我决定通过 API 自动创建必要的 Webhook，这样店主就不用担心了。

似乎正在工作，但是我没有看到在 Preferences > Email .. Notifications 下安装了 Webhook。它只是空白，没有安装 Webhook。

当我创建 webhook 时，这是我从 API 返回的响应示例

```
Array
(
   [address] => http://myapp.com/shopify/webhook?topic=products_create
   [created_at] => 2012-07-06T11:16:44-04:00
   [format] => json
   [id] => 1921476
   [topic] => products/create
   [updated_at] => 2012-07-06T11:16:44-04:00
) 
```

所以它似乎是在向我发回一个带有 ID 的数据响应，但只是不在商店偏好中，它不存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T15:55:52.320

当您使用 API 创建 WebHook 时，您不会在 Shop 本身中看到它。以前可以看到，但是商家不小心删掉了，麻烦了。所以现在他们仍然隐藏。

使用 API 查询您创建的 WebHook。

# asp.net-mvc - 如何在 Dev express mvc 网格的下拉列表中显示数据

> ID：11397970
> 
> 赞同：1
> 
> 时间：2012-07-09T15:14:30.477
> 
> 标签：asp.net-mvc, devexpress

我有一个包含 3 列的 dev express 网格，我希望第 3 列是可编辑的。

当用户单击编辑时，应显示该行的下拉列表（仅在第 3 列中），但每一行应具有不同的下拉列表，因为我想根据字段名称从不同的存储过程中提取数据。

所以，我能够得到一个有 3 列的网格，前两列是不可编辑的，而且，我有一个第三列的下拉列表，但我不知道`o`如何在每一行的下拉列表中显示数据. 那就是我卡住的地方。

这是我到目前为止所写的：-

部分视图：-

```
settings.Columns.Add(col =>
    {
        col.FieldName = "DefaultValue";
        col.Caption = "Rule Type Value";
        col.Width = 300;
        col.ColumnType = MVCxGridViewColumnType.DropDownEdit;
        col.SetEditItemTemplateContent(column =>
        {
            Html.DevExpress().DropDownEdit(c =>
            {
                c.Name = "ddlName";
                c.SetDropDownWindowTemplateContent("WHAT GOES HERE!?!?!");
            }).Render();
        });
    }); 
```

如果有人可以帮助我，那就太好了。

如果我没有提供足够的信息来解释这个问题，那么请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-10T23:58:41.810

对于您的 dropdownedit，您希望以这种方式添加项目：

```
c.Properties.Items.Add("Item 1");
c.Properties.Items.Add("Item 2"); 
```

# android - getLastConfigurationInstance 给出空指针异常

> ID：11397977
> 
> 赞同：0
> 
> 时间：2012-07-09T15:14:56.220
> 
> 标签：android, configuration

我正在尝试使用保留我的活动配置

```
@Override
public Object onRetainNonConfigurationInstance() {
// TODO Auto-generated method stub      
    ArrayList<String> array = new ArrayList<String>();
    array = alarmsArrayList;
    return array;   
} 
```

当我尝试

```
ArrayList<String> data = (ArrayList<String>) getLastNonConfigurationInstance();
    if (data.size() != 0) 
    {
        alarmsArrayList = data;
        alarmList.setAdapter(adapter);
        startProgress(SingleAlarm.this.getCurrentFocus());
    }
    else
    {
        startProgress(SingleAlarm.this.getCurrentFocus());
    } 
```

它给出了一个`Null Pointer Exception`.

有没有办法保留 Activity 的每个配置，比如 CheckBox 状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:23:18.190

有很多方法可以在 Android 中保存配置或视图状态。你可以阅读这个[文档](http://developer.android.com/guide/topics/resources/runtime-changes.html)

这是几乎相同的[问题](https://stackoverflow.com/questions/8667813/how-to-save-state-of-activity)。

或者，如果您愿意，您可以在数据库或共享首选项中创建保存视图当前状态。

# c# - 可以在 C# 中同时声明和调用 lambda 表达式吗？

> ID：11397983
> 
> 赞同：26
> 
> 时间：2012-07-09T15:15:30.837
> 
> 标签：c#, lambda

在 VB.NET 中，可以在同一行声明和调用 lambda 表达式：

```
'Output 3
Console.WriteLine((Function(num As Integer) num + 1)(2)) 
```

这在 C# 中可能吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-09T15:18:33.773

您必须告诉编译器特定的委托类型。例如，您可以*转换*lambda 表达式：

```
Console.WriteLine(((Func<int, int>)(x => x + 1))(2)); 
```

编辑：或者是的，您可以按照 Servy 的回答使用委托创建表达式：

```
Console.WriteLine(new Func<int, int>(i => i + 1)(2)); 
```

请注意，这并不是一个*真正*的普通构造函数调用——它是用于创建委托的特殊语法，*看起来*像一个普通的构造函数调用。不过还是很聪明:)

您可以使用辅助类使其*更清洁：*

```
public static class Functions
{
    public static Func<T> Of<T>(Func<T> input)
    {
        return input;
    }

    public static Func<T1, TResult> Of<T1, TResult>
        (Func<T1, TResult> input)
    {
        return input;
    }

    public static Func<T1, T2, TResult> Of<T1, T2, TResult>
        (Func<T1, T2, TResult> input)
    {
        return input;
    }
} 
```

... 然后：

```
Console.WriteLine(Functions.Of<int, int>(x => x + 1)(2)); 
```

或者：

```
Console.WriteLine(Functions.Of((int x) => x + 1)(2)); 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-07-09T15:21:10.167

```
Console.WriteLine(new Func<int, int>(i => i + 1)(2)); 
```

使用更少的括号来使用`Func`' 的构造函数而不是强制转换。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-07-09T15:18:48.313

是的，虽然它很乱：

```
Console.WriteLine(((Func<int, int>) (num => num + 1))(2)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T15:21:24.847

Kind 或者，您必须使用 Func 对象：

```
 var square = new Func<double, double>(d => d*d)(2);
 Console.WriteLine(square); 
```

# php - 如何使用 php 验证 Apple IAP 收据？

> ID：11397984
> 
> 赞同：7
> 
> 时间：2012-07-09T15:15:31.170
> 
> 标签：php, ios, in-app-purchase

我正在使用 php 为 iOS 应用程序编写服务器。

我想通过访问 Apple 的应用商店服务器来检查收据。

根据苹果的帮助文档。我必须向苹果的服务器发送一个发布请求。

[http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/VerifyingStoreReceipts/VerifyingStoreReceipts.html#//apple_ref/doc/uid/TP40008267-CH104-SW1](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/VerifyingStoreReceipts/VerifyingStoreReceipts.html#//apple_ref/doc/uid/TP40008267-CH104-SW1)

我怎么能用php做到这一点，非常感谢！

谁能给我一个例子？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-05T13:10:20.093

```
<?php

$applesharedsecret = "applesecretfromyourdevaccount";
$receiptbytes      = "......applereceipt.......";
$appleurl          = "https://buy.itunes.apple.com/verifyReceipt"; // for production
// use https://sandbox.itunes.apple.com/verifyReceipt for testing with sandbox receipt
$request = json_encode(array("receipt-data" => $receiptbytes,"password"=>$applesharedsecret));
$ch = curl_init($appleurl);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $request);
$jsonresult = curl_exec($ch);
curl_close($ch);
var_dump($jsonresult); // see the details of the receipt.

?> 
```

# sql - 将所有行中的值转换为 VARBINARY(50)

> ID：11397985
> 
> 赞同：2
> 
> 时间：2012-07-09T15:15:34.727
> 
> 标签：sql, sql-server, sql-server-2008

我想升级表中的所有列，我的目标是从它将更新的行中检索一列然后更新它，例如：

```
update works 
set encrpyted_item_no = (CAST(RTrim((
    select unencrypted_item_no 
    from works 
    where name = name
) AS VARBINARY(50)) 
```

我知道该查询是错误的，这只是向您展示我的目标的一个示例。

我希望它`unencrypted_item_no`从其行中选择列，然后用它获取的数据更新同一行，`unencrypted_item_no`对**整个表执行此**操作。

我将如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T15:22:20.660

您不需要进行子选择，引用集合中的另一列将逐行工作，即：

```
UPDATE works 
SET encrpyted_item_no = CAST(RTrim(unencrypted_item_no) AS varbinary(50)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T15:23:06.597

这还不够吗？

```
update works 
set encrypted_item_no = CAST(RTrim(unencrypted_item_no) AS VARBINARY(50)) 
```

# android - Android Java编译错误：“=”上的语法错误，；预期的

> ID：11397988
> 
> 赞同：0
> 
> 时间：2012-07-09T15:15:43.400
> 
> 标签：android, syntax, onclick, findviewbyid

尝试在 Eclipse 中编译我的 java 代码时出现以下错误：

“此行有多个标记 - 行断点：TextButtonClicked(View) 上的 MyHelloWorld [line:25] - 标记上的语法错误“=”，；预期“

```
package com.example.helloworldandroid;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.TextView;
import android.support.v4.app.NavUtils;

public class MyHelloWorld extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_my_hello_world);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_my_hello_world, menu);
        return true;
    }
    public void onTextButtonClicked(View view){
        TextView textView =(TextView)findViewById(R.id.haikuTextView);
        textView.setVisibility(View.VISIBLE);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:28:21.113

尝试：

```
public void onTextButtonClicked(View view){
        txtView = new TextView(this);
        txtView=(TextView)findViewById(R.id.haikuTextView);
        textView.setVisibility(View.VISIBLE);
    } 
```

# maven - 从现有 Java EE 项目迁移到 maven，而不更改目录布局

> ID：11397993
> 
> 赞同：0
> 
> 时间：2012-07-09T15:15:49.440
> 
> 标签：maven, ant, directory-structure, rails-migrations

我已经看到很多关于这个问题的问题，但我是这个主题的新手，我必须将以前编写的项目（标准，Eclipse Java EE 项目）转换为 Maven。

我的第一个问题是我对 Maven 完全陌生。第二 - 我无法更改目录布局。第三 - 我的时间不多了。

我读过的一些主题涵盖了我的一些问题，但我需要更清楚。

我有 3 个相互连接的模块： * 带有目录的主要模块：.settings、db-schema、EarContent、* EJB 和 .settings、bin、build、ejbModule * WEB 和 .settings、build、src、WebContent。

据我所知（如果我错了，请纠正我）当我有一个带有源代码的目录时，只有一个“映射”，它看起来像这样：

```
<build>
    <sourceDirectory>ejbModule</sourceDirectory>
    ... 
```

但是如果我有两个目录呢？我的意思是 WEB 模块 - src 和 WebContent。如果不使用标准目录布局，我还需要更改什么？EarContent 的主模块是什么？- 没有源代码，但有一个 -ds.xml 文件（我猜）我必须放在某个地方。在主 POM.xml 中，我知道我必须添加标签，但我还应该做些什么吗？

对于（也许）不精确和广泛的问题，我很抱歉，但我今天已经开始了，我必须尽快完成。到目前为止，我已经找到了 Sonatype 网站并设法获得了他们的一份 pdf 文件，但我阅读它的速度太慢了，需要“一些”帮助。我还下载了 nexus 存储库的原型，我正在尝试理解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:29:22.593

尝试使用[build-helper-maven-plugin 的](http://mojohaus.org/build-helper-maven-plugin/usage.html)add-source 目标。