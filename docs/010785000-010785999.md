# StackOverflow 问答 10785000-10785999

# vb.net - 将 Func(Of TElement, TKey) 作为函数参数传递

> ID：10785004
> 
> 赞同：2
> 
> 时间：2012-05-28T12:52:21.627
> 
> 标签：vb.net, linq, sql-order-by

我想创建一个 GetAllContacts 方法，它采用 Func(Of Contact, TKey) 类型的排序参数，它与 IEnumerable(Of Contact) 的 OrderBy 方法采用的类型相同。这是我的代码：

```
 Public Function GetAllContacts(Of TKey)(ByVal sort As Func(Of Contact, TKey), ByVal sortDirection As SortDirection) As IEnumerable(Of Contact) Implements IContactRepository.GetAllContacts
        Select Case sortDirection
            Case sortDirection.Ascending
                Return ContactList.OrderBy(sort)
            Case sortDirection.Descending
                Return ContactList.OrderByDescending(sort)
        End Select
    End Function 
```

当我调用 GetAllContacts(Func(c) c.ContactID, SortDirection.Ascending) 时，出现错误：

```
"Value of type 'System.Func(Of Contact, String)' cannot be converted to 'Integer'." on the first parameter 
```

和

```
"Too many arguments to extension method 'Public Function ElementAtOrDefault(index As Integer) As Contact' defined in 'System.Linq.Enumerable'." on the second parameter. 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:58:28.383

我试过这个（净4.0）：

```
Public Function tst(a As String) As Integer
        Return a.Length
    End Function

    Public Function GetAllContacts(Of TKey)(ByVal sort As Func(Of String, TKey), ByVal sortDirection As DirectoryServices.SortDirection) As IEnumerable(Of String)
        Return {"a"}
    End Function 
```

和这个：

```
GetAllContacts(AddressOf tst, DirectoryServices.SortDirection.Ascending)
GetAllContacts(Function(a As String) As Integer
                       Return a.Length
                   End Function, DirectoryServices.SortDirection.Ascending)
GetAllContacts(Function(a) a.Length, DirectoryServices.SortDirection.Ascending) 
```

我没有错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:11:58.517

这是错误消息的情况。我在接口中的签名与在实现中的签名不同。一旦我修复了签名，错误就消失了。

# rpy2 - RPy2 将 Dataframe 转换为 SpatialGridDataFrame

> ID：10785007
> 
> 赞同：0
> 
> 时间：2012-05-28T12:52:40.510
> 
> 标签：rpy2, maptools

如何使用 R maptools 库将 Dataframe 转换为 SpatialGridDataFrame？我是 Rpy2 的新手，所以这可能是一个非常基本的问题。

R代码是：坐标（dataf）=~X+Y

在 Python 中：

```
import rpy2
import rpy2.robjects as robjects
r = robjects.r
# Create a Test Dataframe 
d = {'TEST': robjects.IntVector((221,412,332)), 'X': robjects.IntVector(('25', '31', '44')), 'Y': robjects.IntVector(('25', '35', '14'))}
dataf = robjects.r['data.frame'](**d)
r.library('maptools')
# Then i could not manage to write the above mentioned R-Code using the Rpy2 documentation 
```

除了这个特殊的问题，我很高兴能得到一些关于更一般性想法的反馈：我的最终目标是使用 gstat 库对空间数据进行回归克里金法。R 脚本工作正常，但我想从 Python/Arcgis 调用我的脚本。您如何看待这项任务，这可以通过 rpy2 实现吗？

非常感谢！理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:31:08.967

在某些情况下，Rpy2 仍然无法动态（和自动）生成智能绑定。

对 R 代码的分析将有助于：

```
coordinates(dataf)=~X+Y 
```

这可以更明确地写成：

```
dataf <- "coordinates<-"(dataf, formula("~X+Y")) 
```

最后一个表达式使 Python/rpy2 直截了当：

```
from rpy2.robjects.packages import importr
sp = importr('sp') # "coordinates<-()" is there

from rpy2.robjects import baseenv, Formula
maptools_set = baseenv.get('coordinates<-')
dataf = maptools_set(dataf, Formula(' ~ X + Y')) 
```

要（明智地）明确“坐标<-”的来源，请使用：

```
maptools_set = getattr(sp, 'coordinates<-') 
```

# android - 位图不缩放只有拖动发生请帮助我实现放大和缩小

> ID：10785008
> 
> 赞同：1
> 
> 时间：2012-05-28T12:52:46.167
> 
> 标签：android

嗨，在我的代码中，我是 android 平台的新手，只有拖动发生并且没有发生缩放，请帮助我

这是正在使用的代码

```
@Override
public void onDraw(Canvas canvas) {
    // TODO Auto-generated method stub

    canvas.drawBitmap(image, getBounds().left,getBounds().top, new Paint());

}

/* (non-Javadoc)
 * @see com.simplogics.surfaceview.Views.BaseView#onTouchEvent(android.view.MotionEvent)
 */

static final int NONE = 0;
static final int DRAG = 1;
static final int ZOOM = 2;
int mode = NONE;

@Override

public boolean onTouchEvent(MotionEvent event) {
    boolean handled = false;

    Log.d("SimpEditText", "(int)event.getX() " + (int)event.getX());
    Log.d("SimpEditText", "(int)event.getY() " + (int)event.getY());

    if(isTouchedInBounds((int)event.getX(), (int)event.getY())){
        Log.d("SimpEditText", "Touched in Bounds");
        handled = true;
        switch (event.getAction() & MotionEvent.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN:
            savedMatrix.set(matrix);
            start.set(event.getX(), event.getY());
            lastPosition.x = getBounds().left;
            lastPosition.y = getBounds().top;
        //  initialRotation = rotation(event);
            Log.d("VerticalLabelView", "mode=DRAG");
            mode = DRAG;
            break;
        case MotionEvent.ACTION_POINTER_DOWN:
            mode = ZOOM;

            initialScale = spacing(event);
            midPoint(mid, event);
            Log.d("VerticalLabelView", "mode=ZOOM");
            initialRotation = rotation(event);

            break;
        case MotionEvent.ACTION_UP:
            mode = NONE;
            break;
        case MotionEvent.ACTION_POINTER_UP:
            mode = NONE;
            Log.d("VerticalLabelView", "mode=NONE");
            break;
        case MotionEvent.ACTION_MOVE:
            if (mode == DRAG) {
                int x = (int)(event.getX() - start.x);
                int y = (int)(event.getY() - start.y);
                setPosition((int)lastPosition.x + x, (int)lastPosition.y + y);

            }else if(mode == ZOOM){

                currentScale = spacing(event);

                float scale =currentScale/initialScale;

                currentRotation = rotation(event);
                float angle = currentRotation - initialRotation;
                if(getImage().getWidth()> 100 && image.getWidth() <900){
                    /*Matrix testMatrix = new Matrix();
                    testMatrix.postScale(scale, scale,mid.x,mid.y);*/
                /*  rotatedImage = Bitmap.createBitmap(getImage(), 0, 0, (int)(image.getWidth()*scale),
                            (int)(image.getHeight()*scale), testMatrix, true);
                */
                    rotatedImage = Bitmap.createScaledBitmap(getImage(), (int)(image.getWidth()*scale), 
                        (int)(image.getHeight()*scale), true);
                setScale(getBounds().left,getBounds().top
                        , (int)(getImage().getWidth()*scale), (int)(getImage().getHeight()*scale));

                /*rotatedImage =rotate(angle, image);
                Matrix testMatrix = new Matrix();
                testMatrix.postScale(scale, scale,mid.x,mid.y);
                this.image = rotatedImage;
                rotatedImage = Bitmap.createScaledBitmap(image, (int)(image.getWidth()*scale), 
                        (int)(image.getHeight()*scale), true);
                this.image = rotatedImage;*/
                /*Matrix testMatrix = new Matrix();
                testMatrix.postScale(scale, scale,mid.x,mid.y);*/
            //  this.image = rotatedImage;
                /*rotatedImage = Bitmap.createScaledBitmap(image, (int)(image.getWidth()*scale), 
                        (int)(image.getHeight()*scale), true);
                this.image = rotatedImage;*/
                }

                this.image = rotatedImage;
            }
            break;
        }

    }

    return handled;

} 
```

这是我使用的 onDraw 和 touchevent 方法

请帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:17:56.630

你试试[这个](http://vmustafayev4en.blogspot.com/2011/12/android-imageview-zoom-in-zoom-out.html)教程，找出你的问题在哪里：

通过本教程，您可以学习许多功能，例如：

1.  拖动图像
2.  用捏缩放（两根手指）放大
3.  用捏缩放（两根手指）缩小

希望这就是你要找的

# jquery - Jquery Accordion 用于表格 HTML 中的行

> ID：10785011
> 
> 赞同：-1
> 
> 时间：2012-05-28T12:52:54.190
> 
> 标签：jquery, jquery-ui

我需要我的桌子有一个像[这个例子](http://jsfiddle.net/ht6NM/)一样的手风琴我试过这个选项但与我的 jquery 版本不兼容。在页面示例中，jquery 版本是 1.4.4，而在我的应用程序中，jquery 版本是 1.6。我怎样才能使这个代码与我的 jquery 版本兼容，以便下一个表有我想要的手风琴？

```
<table width="900px" border="0px">
    <h1>My table</h1>
    <thead>
        <tr>
            <th>column 1</th>
            <th>column 2</th>
            <th>column 3</th>
            <th>column 4</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="title_section" colspan="4">
                <div id="title_section">Title 1</div>
            </td>
        </tr>
        <tr>
            <td class="title_section">
                <div id="title_subsection">Title subsection 1</div>
            </td>
        </tr>
        <tr class="item1">
            <td>Item 1</td>
            <td>xyz1</td>
            <td>abc1</td>
            <td>ebt1</td>
        </tr>
        <tr class="item1">
            <td>Item 2</td>
            <td>xyz2</td>
            <td>abc2</td>
            <td>ebt2</td>
        </tr>
        <tr>
            <td class="title_section">
                <div id="title_subsection">Servicios profesionales domiciliarios</div>
            </td>
        </tr>
        <tr class="item1">
            <td>Item 3</td>
            <td>xyz3</td>
            <td>abc3</td>
            <td>ebt3</td>
        </tr>
        <tr class="item1">
            <td>Item 4</td>
            <td>xyz</td>
            <td>abc</td>
            <td>ebt</td>
        </tr>
        <tr class="total">
            <td colspan="2">item5</td>
            <td colspan="2" value="0"></td>
        </tr>
        <tr>
            <td class="title_section" colspan="4">
                <div id="title_section">Title 2</div>
            </td>
        </tr>
        <tr class="item2">
            <td>Item 11</td>
            <td>xyz11</td>
            <td>abc11</td>
            <td>ebt11</td>
        </tr>
        <tr class="item2">
            <td>Item 22</td>
            <td>xyz22</td>
            <td>abc22</td>
            <td>ebt22</td>
        </tr>
        <tr class="item2">
            <td>Item 3</td>
            <td>xyz33</td>
            <td>abc33</td>
            <td>ebt33</td>
        </tr>
        <tr class="total">
            <td colspan="2">dadkfdl</td>
            <td colspan="2" value="0"></td>
        </tr>
    </tbody>
</table> 
```

我感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:59:19.053

All you need is to include jquery UI, as you did in the fiddle.

jqueryui.com

# design-patterns - 使用 Yii 在表单中处理多个记录和模型 ajax

> ID：10785015
> 
> 赞同：0
> 
> 时间：2012-05-28T12:53:24.250
> 
> 标签：design-patterns, yii, multiple-records

这一定是一个常见的场景：

在一个名为**Subscription**的表单上，除了其他与订阅相关的字段外，我们还有：

选择您需要 多少**foo ：***从 [1] 到 [5* ]选择带有 5 个选项的框

如果用户选择**2**，那么通过 Ajax 应该会出现以下内容：

```
<!-- for 1 -->
 <input type="text" id="name1">Name of thing</input>  
 <input type="text" id="age1">Age of thing</input>  

<!-- for 2 -->
 <input type="text" id="name2">Name of thing</input>  
 <input type="text" id="age2">Age of thing</input> 
```

因此，我们有两个表（Subscription，foo），要在其中一个表（foo）上插入几条记录，所有这些都在一个表单上。

有没有人好心地画一个简单的例子来说明我们应该如何正确处理上述情况？

我发现的更接近的是这个，但是，它不包括多个模型或 ajax。:/ [http://www.yiiframework.com/doc/guide/1.1/en/form.table](http://www.yiiframework.com/doc/guide/1.1/en/form.table)

真的希望有人可以在这里推动我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:40:41.047

看看**Yii 1.1 Application Development Cookbook**一书中的[处理可变数量的输入一章](http://books.google.co.in/books?id=N94oPslRUocC&pg=PT180&lpg=PT180#v=onepage&q&f=false)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:01:57.990

我目前正在努力解决模拟问题。一般来说，我认为您应该能够遍历模型。每个表单都有如下字段名称：Object[$i]['number'] ($i = counter)。我认为，ajax 请求可以是部分渲染，不是吗？

如果我今晚找到它，我会在这里发布一些代码。**

# android - Android 滑动手势不可靠

> ID：10785016
> 
> 赞同：5
> 
> 时间：2012-05-28T12:53:35.343
> 
> 标签：android, xamarin.android, gesture, swipe, onfling

我在某种程度上进行了滑动工作，但我在屏幕上有一系列文本视图和微调器，似乎如果我不直接滑动其中一个，而是稍微跨过其中两个，它不会选择它那么好。总的来说，我认为它的滑动效果不如 iPhone 上发生的那样好，我想知道是否有人可以批评我的代码并帮助我优化它。

我正在初始化 GesureDectector 和 GestureListener。这是 GestureListener 类：

```
 public class GestureListener : Java.Lang.Object, GestureDetector.IOnGestureListener
    {
        private static int SWIPE_MAX_OFF_PATH = 250;
        private static int SWIPE_MIN_DISTANCE = 50;
        private static int SWIPE_THRESHOLD_VELOCITY = 200;
        private View view;
        private Activity act;

        public GestureListener(View _view, Activity _act)
        {
            view = _view;
            act = _act;
        }

        public bool OnDown( MotionEvent e )
        {
            return true;
        }

        public bool OnFling( MotionEvent e1, MotionEvent e2, float velocityX, float velocityY )
        {
            if ( Math.Abs( e1.GetY() - e2.GetY() ) > SWIPE_MAX_OFF_PATH ){
                return false;
            }
            if ( e1.GetX() - e2.GetX() > SWIPE_MIN_DISTANCE && Math.Abs( velocityX ) > SWIPE_THRESHOLD_VELOCITY ){
                HandleLeft();               
            }else if ( e2.GetX() - e1.GetX() > SWIPE_MIN_DISTANCE && Math.Abs( velocityX ) > SWIPE_THRESHOLD_VELOCITY ){
                HandleRight();
            }
            return false;
        }

        public void OnLongPress( MotionEvent e )
        {

        }

        public bool OnScroll( MotionEvent e1, MotionEvent e2, float distanceX, float distanceY )
        {
            return true;
        }

        public void OnShowPress( MotionEvent e )
        {

        }

        public bool OnSingleTapUp( MotionEvent e )
        {
            return true;
        }

        private void HandleLeft(){
            Male currActivity = (Male)act;
            currActivity.GetStrings("Female");
        }

        private void HandleRight(){
            Male currActivity = (Male)act;
            currActivity.GetStrings("Results");
        }
    } 
```

我将它用于我的 OnTouch 事件：

```
 public bool OnTouch(View v, MotionEvent e){
     bool handled = false;

     if(flingDetector != null){
    handled = flingDetector.OnTouchEvent(e);
     }

     if(v.GetType() == typeof(Spinner)){
    return !handled;    
     }else{
    return handled;
     }
 } 
```

任何帮助将不胜感激。

# android - C2DM 消息过期

> ID：10785019
> 
> 赞同：0
> 
> 时间：2012-05-28T12:54:03.300
> 
> 标签：android, timeout, push-notification, android-c2dm

有谁知道谷歌会在放弃之前尝试传递 C2DM 消息多长时间（甚至大约）？1周？2周？1天？当然假设注册是正确的，除了说设备离线之外的一切。

当然，我已经搜索过这样的问题，[但](https://stackoverflow.com/questions/8473918/how-to-set-a-timeout-expiration-on-a-c2dm-message)我的特定问题没有答案。

我知道我应该用某种确认来检查自己，但我仍然想知道谷歌什么时候放弃交付。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:11:45.383

Google 尝试传递 C2DM 消息的时间约为。28 天。

# iphone - 如何将 Layar 操作连接到我的 customViewController？

> ID：10785024
> 
> 赞同：0
> 
> 时间：2012-05-28T12:54:11.190
> 
> 标签：iphone, ios, viewcontroller, layar

**这是我的情况：**

我创建了一个层来查找 Vision-POI，并将 iPhone Layar Player SDK 集成到我的 iPhone 应用程序中。

当我找到一个 POI 时，我会在 POI 框架上看到一个图标“信息”。单击我想将其连接到我创建的视图控制器的图标，以显示此 POI 的详细信息。

如何设置 URI 操作以将图标链接到视图控制器？在文档中没有显示这种情况的示例。

[http://layar.com/documentation/browser/api/getpois-response/actions/#actions-uri](http://layar.com/documentation/browser/api/getpois-response/actions/#actions-uri)

感谢您的回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T14:43:20.943

您不能直接将您的 Layar 与 ViewController 连接。在 Layar 中使用 ViewController 加入 POI 是不可能的。您可以将 POI 与网站、视频、声音……连接起来。如果您想玩 ViewControllers 和增强现实，我建议您使用[Metaio SDK](http://www.metaio.com/products/sdk/)。它是免费的水印，你可以做的比 Layar 更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:15:10.593

我不熟悉 SDK，不幸的是，[操作文档](http://www.layar.com/documentation/browser/api/getpois-response/actions/)显然已经过时了。但是，假设文档是正确的，您必须能够将请求发送到包装应用程序并拦截它`UIApplication` `openURL:`并将 URL 参数传递给您的 show-info 方法（有关详细信息，请参阅[答案](https://stackoverflow.com/questions/10780545/uitextview-datadetectortypeaddress-map-opened-in-different-application/10780894#10780894)）。

# prolog - Prolog中的DCG（定句语法）

> ID：10785027
> 
> 赞同：0
> 
> 时间：2012-05-28T12:54:40.423
> 
> 标签：prolog, grammar, dcg, clause

我正在尝试在序言中制作一个 DCG，以便我根据一些谓词创建一个句子。我有两条信息 = 对象的属性（“查尔斯是人。”）和对象之间的关系（“查尔斯是威廉的父亲。”）

任务是创建这样的句子

```
[charles,is,a,man]
[camilla,is,a,woman]
[camilla,is,the,wife,of,charles]
[charles,is,the,father,of,william]
[charles,is,the,husband,of,camilla] 
```

我可以创建一个可以生成句子的简单 DCG，但是我如何实现关系，以便主语（查尔斯、卡米拉、查尔斯）对应于谓词部分（是男人，是女人）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T17:23:54.470

您可以将 DCG 规则与 Prolog 谓词组合如下

```
rpn --> [RPN], {rpn(RPN)}.   /* relative pronoun */
rpn(that).
rpn(which).
rpn(who). 
```

示例取自[JR Fisher 的教程](http://www.csupomona.edu/~jrfisher/www/prolog_tutorial/7_2.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T17:10:55.223

```
zdanie --> person, " ", iss, " ", animal, ".".

 man --> "adam" or "john".
women --> "eve" or "travolta".
iss --> "is".
animal --> "dog" or "cat" or "bird".

sentence(Z) :-
   phrase(zdanie, [I|R]),
   code_type(I, to_lower(J)),
   atom_codes(Z, [0' , J|R]). 
```

等等。

# java - primefaces 3.2中的级联下拉菜单不起作用

> ID：10785040
> 
> 赞同：0
> 
> 时间：2012-05-28T12:56:00.353
> 
> 标签：java, jakarta-ee, primefaces

我希望在 primefaces 3.2 中使用级联下拉菜单，但它不起作用。下面是我的xhtml代码：

```
<p:selectOneMenu style="width: 150px" value="#{watchBean.exchange}">
                    <f:selectItem itemLabel="NSE" itemValue="nse"/>
                    <f:selectItem itemLabel="BSE" itemValue="bse"/> 
                    <p:ajax event="change" update="sym" listener="#{watchBean.wow}" />
                </p:selectOneMenu> 
            <p:selectOneMenu style="width: 150px" id="sym" value="#{watchBean.sl}" var="scrip">
                <f:selectItems  itemLabel="#{scrip.scripSymbol}" itemValue="#{scrip.scripSymbol}"/>
            </p:selectOneMenu> 
```

豆代码：

```
import java.util.List;
import javax.annotation.ManagedBean;
import javax.inject.Named;
import javax.enterprise.context.RequestScoped;
import javax.faces.context.FacesContext;
import javax.faces.event.ValueChangeEvent;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;
import javax.xml.ws.WebServiceRef;
import service.MasterScrip;
import service.StatelessWebService_Service;

/**
 *
 * @author root
 */
@javax.faces.bean.ManagedBean
@javax.faces.bean.RequestScoped
public class watchBean {
    @WebServiceRef(wsdlLocation = "WEB-INF/wsdl/localhost_8080/StatelessWebService/StatelessWebService.wsdl")
    private StatelessWebService_Service service;

    /** Creates a new instance of watchBean */
    public watchBean() {
    }
    String uname,scripSym,exchange;
    Integer scripID;
    List<UserTrack> ut;
List<MasterScrip> sl;
    public List<MasterScrip> getSl() {
        return sl;
    }

    public void setSl(List<MasterScrip> sl) {
        this.sl = sl;
    }

    public String getExchange() {

        return exchange;
    }

    public void setExchange(String exchange) {
        sl=getAllScripByExchange(exchange);
        setSl(sl);
        this.exchange = exchange;
    }
public void wow(ValueChangeEvent e)
{    
    sl=getAllScripByExchange((String)e.getNewValue());
   // setSl(sl);
    //FacesContext.getCurrentInstance().renderResponse();

    // sl=getAllScripByExchange(exchange);
} .... 
```

我收到以下错误：

```
javax.el.MethodNotFoundException: Method not found: beans.watchBean@2e1b13.wow(javax.faces.event.AjaxBehaviorEvent) 
```

我提到了[如何让 PrimeFaces <p:selectOneMenu> 调用 valueChangeListener？](https://stackoverflow.com/questions/8407183/how-do-i-get-primefaces-pselectonemenu-to-call-valuechangelistener)并从我的代码中删除了监听器，只保留了第一个下拉列表的 value 属性，但它仍然不起作用，然后它没有给出错误并且第二个下拉列表没有动态填充。我被困在这个问题上，这个错误的原因是什么，如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:24:03.943

1) 从方法 wow() 中删除参数。ajax 监听器不带参数；执行该方法时，属性“exchange”包含新值。
2) selectOneMenus 应该被 h:form 包围
3) 第二个 selectOneMenu 是错误的。selectOneMenu 的 value 属性应该引用组合的选定项；不是项目列表。var 属性位于 f:selectItems 标记中。f:selectItems 标记缺少引用项目列表的 value 属性。它应该是这样的：

```
<p:selectOneMenu style="width: 150px" id="sym" value="#{watchBean.selectedItem}" >
          <f:selectItems value="#{watchBean.sl}" var="scrip"
                         itemLabel="#{scrip.scripSymbol}"
                         itemValue="#{scrip.scripSymbol}"/>
</p:selectOneMenu> 
```

# android - onfocuschangelistener 没有响应所有音频管理器更改

> ID：10785042
> 
> 赞同：1
> 
> 时间：2012-05-28T12:56:09.270
> 
> 标签：android, audio, onchange

我在以下链接中问了一个问题，[如何知道音频何时开始在 android 中播放，](https://stackoverflow.com/questions/10783031/how-to-know-when-audio-is-started-playing-in-android/10783453#comment14024396_10783453) 我得到了一个完美的答案。我附上了它的代码。现在我的问题是当音乐开始播放时我会失去音频焦点。我的`onfocuschange`听众没有对音频管理器的更改做出响应。我的代码有什么问题吗？所以我可以在音频管理器中收听所有更改（开始、暂停、停止）。感谢帮助。

我在我的服务类中实现了它。

```
am = (AudioManager) getApplicationContext().getSystemService(Context.AUDIO_SERVICE);

    am.getMode();

      afChangeListener = new OnAudioFocusChangeListener() {

            public void onAudioFocusChange(int focusChange) {
                Log.d("new","focus: " +focusChange+"mode "+am.getMode() +"ismusic "+am.isMusicActive());

                if (focusChange == AudioManager.AUDIOFOCUS_GAIN_TRANSIENT){
                    Log.d("new","focus:started trans " );

                }else if (focusChange == AudioManager.AUDIOFOCUS_GAIN_TRANSIENT_MAY_DUCK){
                    Log.d("new","focus:started duck " );

                }

            else if (focusChange == AudioManager.AUDIOFOCUS_LOSS_TRANSIENT){
                   Log.d("new","focus:paused  " );
            } else if (focusChange == AudioManager.AUDIOFOCUS_GAIN) {
                Log.d("new","focus:started " );
                } else if (focusChange == AudioManager.AUDIOFOCUS_LOSS) {
                    Log.d("new","focus:stoped  " );
                   // am.unregisterMediaButtonEventReceiver(RemoteControlReceiver);
                   // am.abandonAudioFocus(afChangeListener);
                    // Stop playback
                }
            }
        }; 
```

# android - 我在调用 Locations Manager requestSingleUpdate 时遇到错误

> ID：10785043
> 
> 赞同：0
> 
> 时间：2012-05-28T12:56:16.397
> 
> 标签：android, request, location

我正在实现“深入了解位置”中的代码，以下代码的最后一行会产生错误：

```
if (locationListener != null && (bestTime < minTime || bestAccuracy > minDistance)) { 
  IntentFilter locIntentFilter = new IntentFilter(SINGLE_LOCATION_UPDATE_ACTION);
  context.registerReceiver(singleUpdateReceiver, locIntentFilter);      
  locationManager.requestSingleUpdate(criteria, singleUpatePI); 
```

似乎没有为 LocationManager 定义 requestSingleUpdate ，尽管它在示例代码中，我看到人们说他们已经实现了这个代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:31:14.133

我在这里找到了类似问题的答案： [https ://stackoverflow.com/a/5469101/1285338](https://stackoverflow.com/a/5469101/1285338)

此 API 从 API 级别 9 及更高级别开始存在

# c# - 以具体类型引用 StructureMap 容器

> ID：10785049
> 
> 赞同：0
> 
> 时间：2012-05-28T12:56:49.980
> 
> 标签：c#, structuremap

我正在使用 DynamicProxy 的东西和 StructureMap 设计一个简单的方面框架，我遇到了一个问题。我的注册表中有以下方法：

```
public T AddAspectsTo<T>(T concreteObject)
{
    ProxyGenerator dynamicProxy = new ProxyGenerator();
    return (T)dynamicProxy.CreateInterfaceProxyWithTargetInterface(typeof(T)
    ,concreteObject,
    new[] { (IInterceptor)new AspectInterceptor(attributeMap) });
} 
```

这使我可以编写如下代码：

```
For<ITestClass>().Use<TestClass>().EnrichWith(AddAspectsTo<ITestClass>); 
```

重要的是我正在创建 AspectInterceptor 的具体版本。在那个类中，我需要从 IoC 容器中获取项目，但此时我不知道 IContainer 对象。

在使用生成的 ITestClasses 之前我不需要访问 IoC 容器，因此 IContainer 将被创建，但不知道如何获取实例？

为了清楚起见，我在这里谈论的是我们设置结构映射容器的情况：

```
IContainer container = new Container(new ItemWithPropertiesRegistry()); 
```

而不是标准的 ObjectFactory 东西，它工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:11:33.307

要丰富的实例可通过 lambda 获得：

```
For<ITestClass>().Use<TestClass>().EnrichWith(x => AddAspectsTo<ITestClass>(x)); 
```

# android - 将语言环境设置为应用小部件

> ID：10785051
> 
> 赞同：3
> 
> 时间：2012-05-28T12:56:58.773
> 
> 标签：android, localization, android-appwidget

我们的应用程序独立于设备设置强制执行特定的语言环境。在正确翻译字符串之前，这是一个临时决定。

```
 Configuration config = sContext.getResources().getConfiguration();
    if (!sDefaultLocale.equals(config.locale)) {
            Locale.setDefault(sDefaultLocale);
            config.locale = sDefaultLocale;
            sContext.getResources().updateConfiguration(config,
                    sContext.getResources().getDisplayMetrics());

    } 
```

不幸的是，强制区域设置不适用于应用程序小部件，小部件仍使用设备的区域设置。我正在寻找一种使应用程序小部件采用相同语言环境的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-14T06:57:49.650

更改区域设置后，您需要更新应用小部件。重要的是，在创建新的 RemoteViews 时，您需要使用 remoteViews.setTextViewText(..)以**编程方式设置所有字符串。**

如果应用小部件字符串资源是在 XML (android:text="@string/...") 中定义的 - 在设置新的语言环境后它们不会被更改。

# django - Django 1.4 自定义模板标签返回 HTML

> ID：10785052
> 
> 赞同：4
> 
> 时间：2012-05-28T12:56:59.073
> 
> 标签：django, templates

我设置了一个工作的自定义模板标签，它已注册，我可以调用它，它实例化一个 template.Node 实例并调用它的 render() 方法。问题是当我返回一个简单的字符串时

```
def render(self, context):
    return 'asd' 
```

它工作正常，但每当我尝试返回包含 html 的内容时它都会失败：

```
def render(self, context):
    return mark_safe('<ul class="jqueryFileTree" style="display: none;"><li><ITEM</li></ul>') 
```

它默默地失败而没有渲染任何东西。有什么帮助吗？

**编辑**：添加了 mark_safe。还是不行

**编辑**：标签：

```
 import os
    import urllib

    from django import template
    from django.utils.safestring import mark_safe

    register = template.Library()

    class DirTree(template.Node):
        def __init__(self, start_dir):
            self.start_dir = start_dir
        def render(self, context):
            # CODE THAT GENERATES A HTML NESTED LIST
            return mark_safe('<ul class="jqueryFileTree"><li><ITEM</li></ul>')

    @register.tag
    def print_tree(parser, token):
        try:
            # split_contents() knows not to split quoted strings.
            tag_name, start_dir = token.split_contents()
        except ValueError:
            raise template.TemplateSyntaxError("%r tag requires a single argument" % token.contents.split()[0])
        if not (start_dir[0] == start_dir[-1] and start_dir[0] in ('"', "'")):
            raise template.TemplateSyntaxError("%r tag's argument should be in quotes" % tag_name)
        return DirTree(start_dir[1:-1])

# TEMPLATE.HTML
# HTML 'N STUFF
    <div id="file-tree">
        {% print_tree "catflow_portal/static/repo/usr/test-user/catalogs/food/" %}
    </div>
#END TAGS 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-11T12:23:29.610

我认为您的问题是您需要`...|safe`在模板中使用来告诉 django 将此结果显示为 html，而不是强制将其显示为字符串`"..."`

[https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#safe](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#safe)

**2021-10-20 更新：Django 3.2**
`...|safe` 将字符串标记为在输出之前不需要进一步的 HTML 转义。当自动转义关闭时，此过滤器无效。

如果您正在链接过滤器，则在安全之后应用的过滤器会使内容再次变得不安全。例如，以下代码按原样打印变量，未转义：
`{{ var|safe|escape }}`

[https://docs.djangoproject.com/en/3.2/ref/templates/builtins/#std:templatefilter-safe](https://docs.djangoproject.com/en/3.2/ref/templates/builtins/#std:templatefilter-safe)

# php - 验证和存储复杂多页表单的最佳方法是什么？

> ID：10785054
> 
> 赞同：1
> 
> 时间：2012-05-28T12:57:02.300
> 
> 标签：php, database, forms

我正在开发一个非常糟糕的代码库，该代码库围绕 Zend 框架（PHP）*松散地*形成，因此不能使用 ORM，也不能使用任何其他框架。我曾尝试使用 Zend_Form，但发现文档太少（我使用 Zend_Form 开发了小型表单，但没有这种大小）。

我需要创建一个长表单（6 页长）。用户将能够根据需要在每个步骤之间切换，而无需验证，直到他们尝试提交表单（我认为这不是一个好主意，但这就是规范所说的）。

在该过程结束时，将验证表单，然后将数据拆分到数据库中的多个不同表中。哦，只是为了让事情变得有趣：这个表格有三个版本，所有的字段都有轻微的变化，没什么大不了的。它们都将数据存储在同一个表中。

那么，这样做的最佳方法是什么？我应该如何构建它，如果你必须构建这样的表单，你会怎么做？我正在用 PHP 编写它，但也想听听其他语言程序员的回应。此外，如果有任何用于构建此类表单的库或工具，我也想听听。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:17:56.533

从未使用 ZF 完成此操作，仅在提交最后一步时才使用验证完成此类表单，从未完成用户可以根据需要从一步跳到另一步的多步表单（我的意思是从第一步跳到第四步，例如）。

我所做的是一个 5 步表格（在第 4 步中可能有更多 3 个子步骤）。用户可以一次一步地执行这些步骤，也可以一次返回一步。每个步骤都被提交和验证 - 直到它是有效的用户不能跳转到下一步但他仍然可以返回 - 插入的值存储在会话中。我创建了一个模型（包含其他子类的结构化类），因此在提交每个步骤并验证后，数据将设置到存储在会话中的该模型中。

如果您需要一个非常大的表单，用户可以根据需要跳过步骤，我会考虑两种方法：

1.  仅创建一个表单，其步骤在视觉上分为一个选项卡 - 每个选项卡将仅包含相关字段，并且只有最后一个选项卡将包含提交按钮。其他选项卡将包含一个“下一步”按钮，该按钮只会打开下一个选项卡。字段数量可能存在问题 - 您只能通过 POST 发送有限数量的字段，通过 GET 发送更有限数量的字段（抱歉，不知道数字）。然后在调用提交后进行验证，然后您可以填写数据库表...
2.  为每个步骤创建一个表单。创建一个将存储数据的模型。每个步骤都将提交并仅将数据存储到该模型中（除了最后一步 - 这还将调用插入数据的验证） - 而模型将保存在会话中。当验证失败时，您会将用户重定向到第一个无效步骤，在数据无效的步骤显示一条消息（也可以直观地使该步骤无效）。如果验证正常，则取模型并填写数据库表...

不能告诉你两种方式会有多困难，因为我没有使用 ZF 做这样的事情......希望永远不会。

我还会考虑与客户交谈并解释仅在最后一步进行验证有点愚蠢且用户**不友好**......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:16:08.763

我将它分成几个部分：

**表单处理**

您在这里有两个主要选择（一种或另一种没有强烈的感觉）：

1.  在一个页面中创建整个表单并使用 JavaScript（或 jQuery 等库）在表单部分之间移动；可选地，您也可以在这里进行一些客户端验证。

2.  每页创建一个表单并让 PHP 处理结转，或者通过使用会话或使用隐藏的输入字段将所有内容保留在表单中（我个人更喜欢会话）。

处理细微的变化可以通过简单地传递第一页中的版本来完成，并通过采用策略模式来相应地更改您的表单。

**最终提交**

对于验证，您可以使用 PHP 的`filter`扩展（顺便说一句，默认提供）；它相当不错且可扩展。

如果验证失败，最好收集所有错误并将它们显示给用户（可能通过超链接跳转到各自的部分），而不是只显示第一个错误；在每个部分，您可能会再次提及错误以方便使用（用户讨厌来回跳转）。

就变化而言，将整个表单存储在数据库中与显示表单本身并没有太大区别。在这里再次使用策略模式。

希望这涵盖了大部分内容，如果您认为我可以改进，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T13:18:42.680

您因无法使用 ORM 或框架而受到限制，因此您可以查看序列化并将对象存储为会话对象。

创建一个“表单”类，其中包含特定于您的表单的一些属性，并在每次提交表单后设置这些值。

# ios - uitableviewcell被销毁时的iOS回调

> ID：10785055
> 
> 赞同：2
> 
> 时间：2012-05-28T12:57:04.063
> 
> 标签：ios, uitableview

当用户在 uitableview 中上下滚动时，单元格会被破坏和创建。

有没有办法检测一个细胞何时将被破坏或已经被破坏？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-28T13:10:00.033

假设通过“被破坏”实际上是指一个单元被重用，只需`prepareForReuse`在`UITableViewCell`派生类中实现即可。

**准备重用**

准备一个可重用的单元格以供表视图的委托重用。

```
- (void)prepareForReuse 
```

**讨论**

> 如果 UITableViewCell 对象是可重用的——也就是说，它有一个重用标识符——这个方法在从 UITableView 方法 dequeueReusableCellWithIdentifier: 返回对象之前调用。出于性能原因，您应该只重置与内容无关的单元格属性，例如 alpha、编辑和选择状态。重用单元格时，tableView:cellForRowAtIndexPath: 中的表视图委托应始终重置所有内容。如果单元对象没有关联的重用标识符，则不调用此方法。如果重写此方法，则必须确保调用超类实现。

可用性 适用于 iOS 2.0 及更高版本。另见 – initWithFrame:reuseIdentifier: @property reuseIdentifier 在 UITableViewCell.h 中声明

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T21:09:09.527

在不涉及适用性或性能的影响的情况下，另一种选择可能是使用 UITableView 类的 visibleCells 方法定期检查哪些单元格仍然可见：

```
- (NSArray *)visibleCells 
```

根据文档：

> 返回一个包含 UITableViewCell 对象的数组，每个对象代表接收表视图中的一个可见单元格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T13:00:25.487

您可以继承`UITableViewCell`并覆盖它的`dealloc`方法。

假设您正在重用单元以节省资源，那么这样做有什么好的理由吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T14:03:19.737

您试图拦截的是 UITableView 内部实现的一部分以及它如何管理其单元格。虽然有一些方法可以尝试拦截此类行为，但我建议您避免使用它们，因为无法保证 UITableView 的未来实现会保持这种行为。

在这种情况下，最好考虑一种不同的方法：设计和实现您自己的表类，或者更改您的代码逻辑。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T14:42:45.967

如上所述，细胞在离开屏幕时不会被破坏。但是，您可以执行一些操作来跟踪相关操作，具体取决于您要执行的操作。

首先有一个委托消息：

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath 
```

这是在单元格进入屏幕之前调用的。另一种可能性是已经说明的单元格的 prepareForReuse 方法。

另一种方法是：尝试覆盖 willMoveToSuperview: 或任何其他相关方法。我不确定这是否在单元格变得不可见后被触发，但它可能会起作用。

最好的问候，迈克尔

# java - 休眠会话

> ID：10785057
> 
> 赞同：0
> 
> 时间：2012-05-28T12:57:14.500
> 
> 标签：java, hibernate, sessionfactory

我在学习 Hibernate 时遇到了问题。我写了 UnitTest 并尝试将对象添加到数据库中。所有选择都正常工作，但插入不能正常工作。

```
public class HibernateTutorial extends BaseTest {

@Autowired
SessionFactory sessionFactory;

@Test
@Transactional
public void hibernateTutorial() {

    @SuppressWarnings("unchecked")
    List<User> users = sessionFactory.getCurrentSession().createQuery("from User").list();

    sessionFactory.getCurrentSession().saveOrUpdate(new User("HiberTest", "HiberPass", "Hiber@Mail.ru", "HiberSurname",
    "HiberLastname", "HiberAddress", "123432"));

} 
```

我也尝试这样的事情

```
public class HibernateTutorial extends BaseTest {

@Autowired
SessionFactory sessionFactory;

@Test
@Transactional
public void hibernateTutorial() {

    @SuppressWarnings("unchecked")
    List<User> users = sessionFactory.getCurrentSession().createQuery("from User").list();

    sessionFactory.getCurrentSession().saveOrUpdate(
            new User("HiberTest", "HiberPass", "Hiber@Mail.ru", "HiberSurname", "HiberLastname", "HiberAddress", "123432"));
    sessionFactory.getCurrentSession().getTransaction().commit();
}
} 
```

它向我抛出事务未成功启动的异常，但它添加了用户

这是一个例外

> org.springframework.transaction.TransactionSystemException：无法回滚休眠事务；嵌套异常是 org.hibernate.TransactionException: Transaction not successfully started at org.springframework.transaction.support.AbstractPlatformTransactionManager.processRollback(AbstractPlatformTransactionManager.java:845) ) 在 org.springframework.test.context.transaction.TransactionalTestExecutionListener$TransactionContext.endTransaction(TransactionalTestExecutionListener.java:512) 在 org.springframework.test 的 org.springframework.transaction.support.AbstractPlatformTransactionManager.rollback(AbstractPlatformTransactionManager.java:822)。上下文.事务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:59:55.120

我可以在您的代码中看到 2 个问题。

1 - 您的交易尚未开始。

答：在对数据库执行任何操作之前，您必须使用 getSession().beginTransaction() 方法。

2 - 如果您的事务失败，则没有回滚方法

答：使用 try-catch 块，请参见下面的示例。

我的代码示例：

```
public void salvarDB(Object object)
{
    Session session = HibernateUtil.getSession();
    HibernateUtil.beginTransaction();
    try
    {
        session.save(object);
        HibernateUtil.commit();
        avisos.salvoComSucesso(object);
    }
    catch(ConstraintViolationException e)
    {
        avisos.registroJaInserido(object);
        HibernateUtil.rollback();
    }
    catch (Exception ex) {
        avisos.falhaAoSalvar(object);
        HibernateUtil.rollback();
    }
    finally {
        HibernateUtil.closeSession();
    }
} 
```

# php - XML 到 ARRAY 的转换

> ID：10785068
> 
> 赞同：-2
> 
> 时间：2012-05-28T12:58:08.543
> 
> 标签：php, xml

我是 php 新手。我需要做一个将xml转换为数组的任务我在网上搜索了很多，发现很多函数类为我做这件事，但每个函数都需要参数，我不明白如何传递正确的参数。我需要一个函数来获取这个链接的 xml

```
 http://feeds.nytimes.com/nyt/rss/SundayBookReview 
```

如果你按 ctrl+u 它会给你源它将 b xml 我需要通过 php 的 xml 然后将它转换成一个数组请帮助我。我被卡住了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:05:06.847

这就是我使用的：

```
<?php

function xmlobj2arr($Data)
{
   if (!isset($ret)) { $ret = array(); }
   if (is_object($Data))
      { foreach (get_object_vars($Data) as $key => $val) { $ret[$key] = xmlobj2arr($val); } return $ret; }
   elseif (is_array($Data)) {
      foreach ($Data as $key => $val) { $ret[$key] = xmlobj2arr($val); } return $ret;
   } else { return $Data; }
}

$thexml = new SimpleXMLElement( file_get_contents("http://feeds.nytimes.com/nyt/rss/SundayBookReview") );
$arr = xmlobj2arr($thexml);
echo "<pre>";
print_r($arr);
echo "</pre>";

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:01:32.597

使用[简单派](http://www.simplepie.org/)

它非常容易和简单。下载并查看演示。

[在此处](https://github.com/simplepie/simplepie/blob/master/demo/index.php)查看演示代码

# iphone - 有声音但没有振动的通知，反之亦然

> ID：10785070
> 
> 赞同：1
> 
> 时间：2012-05-28T12:58:21.040
> 
> 标签：iphone, objective-c, notifications, vibration

*   如何使用有声音但没有振动的本地通知？
*   我怎么能反过来使用它，有振动但没有声音？

**编辑：**
当我阅读时，我发现了一种无声振动的解决方案
：（在我的情况下不适合本地通知）
a) AudioServicesPlayAlertSound(kSystemSoundID_Vibrate);
b) AudioServicesPlaySystemSound(kSystemSoundID_Vibrate);
并且作为变体播放静音声音，这将产生没有声音效果的振动。

而且我不能在没有振动的情况下使用声音（我们谈论本地通知）。我对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T04:04:31.100

> 如何使用有声音但没有振动的本地通知？

如果为通知指定了声音，则始终会触发振动（取决于用户的设置，他们可能已关闭振动）。我认为目前没有任何方法可以为启用声音的通知禁用振动。

> 我怎么能反过来使用它，有振动但没有声音？

你的猜测是正确的，这很容易使用静音文件实现（确保它小于 30 秒，通知 API 施加的限制）。

# c# - how to show current date on month calender from menu item of other form using c#

> ID：10785073
> 
> 赞同：0
> 
> 时间：2012-05-28T12:58:32.783
> 
> 标签：c#

I am working on a windows app. There is a menubar on main interface and on the main interface there is a panel. On click event of "View Calender" there is another form on the panel. On that form there is a monthcalender. I want to show current date bolded on click event of "Jump to Today" menu item. Please help me.

This code is on click event of "View Calender" button, which load the form on panel of main interface.

```
Calender obj = new Calender();
obj.TopLevel = false;

  if (panel2.Controls.Count > 0)
      {
          panel2.Controls.Clear();
          panel2.Controls.Add(obj);
          obj.TopLevel = false;
          obj.Show();
      }
 else
      {
           obj.TopLevel = false;
           panel2.Controls.Add(obj);
           obj.Show();
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:33:09.867

这应该让你开始

```
 Calender obj = new Calender();
  obj.TopLevel = false;

  if (panel2.Controls.Count > 0)
  {
      panel2.Controls.Clear();
      panel2.Controls.Add(obj);
      obj.TopLevel = false;
      obj.Show();
  }
  else
  {
       obj.TopLevel = false;
       panel2.Controls.Add(obj);
       obj.Show();
  }
  panel2.Controls.add(new Label{
       Text = DateTime.Now
  }); 
```

您需要向标签添加一个点击事件，并根据您的喜好设置字体。

# perl - 通过“->”调用方法与传递类/对象作为第一个参数之间到底有什么区别？

> ID：10785082
> 
> 赞同：7
> 
> 时间：2012-05-28T12:58:58.463
> 
> 标签：perl, oop, object

来自（在这个出色的[答案](https://stackoverflow.com/a/10784375/119280)[`perldoc perlobj`](http://perldoc.perl.org/perlobj.html#Method-Invocation)中引用）：

> ```
> my $fred = Critter->find("Fred");
> $fred->display("Height", "Weight"); 
> ```
> 
> ...上面的代码主要相当于：
> 
> ```
> my $fred = Critter::find("Critter", "Fred");
> Critter::display($fred, "Height", "Weight"); 
> ```

究竟有什么区别，撇开错误检查以确保第一个参数是祝福对象或有效的类名？例如，为什么它**大部分**但不完全相同？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-28T13:07:49.780

说 Critter 是一个子类，它没有定义`find`或`display`- 或两者！正如 perlobj 文档所解释的那样，这种对应关系不是一对一的，因为硬连线的子调用不执行方法查找。

> Perl 如何知道子程序在哪个包中？通过查看箭头的左侧，它必须是包名称或对对象的引用，*即*，已经被包祝福的东西。无论哪种方式，这都是 Perl 开始寻找的包。如果那个包没有同名的子例程，Perl 开始在那个包的任何基类中寻找它，以此类推。

使用 sub 时，您必须知道它静态的确切位置，否则您的程序将`die`. 要调用一个方法，您只需要指定从哪里开始搜索它。

例如：

```
#! /usr/bin/env perl

package Critter;
sub new { bless {}, shift }
sub display { ref($_[0]) . " display" }

package SuperCritter;
@SuperCritter::ISA = qw/ Critter /;

package main;
my $super = SuperCritter->new;

# one of these things is not like the other
warn $super->display;
warn Critter::display($super);
warn SuperCritter::display($super); 
```

输出：

```
SuperCritter 显示在 ./call-demo 第 14 行。
SuperCritter 显示在 ./call-demo 第 15 行。
在 ./call-demo 第 16 行调用了未定义的子例程 &SuperCritter::display。
```

# android - Android：了解 DPI 并通过代码获取它？

> ID：10785085
> 
> 赞同：2
> 
> 时间：2012-05-28T12:59:10.733
> 
> 标签：android, android-layout, dpi

谁能帮忙，我发现很难在精神上（理解它）获得手机的 DPI 并获得代码中的价值 :-)

例如，它指出密度如下（取自 android 文档）

```
ldpi    Resources for low-density (ldpi) screens (~120dpi).
mdpi    Resources for medium-density (mdpi) screens (~160dpi). (This is the baseline density.)
hdpi    Resources for high-density (hdpi) screens (~240dpi).
xhdpi   Resources for extra high-density (xhdpi) screens (~320dpi). 
```

但为什么它只声明为~240dpi，即。一个值？它不应该是（例如）移动设备（三星 Galaxy S2）是 WVGA (800 x 480) (DPI)，符号 ~ 是什么意思？

因此，以 800 x 480（三星星系 s2 的 dpi）为例，如何将其转换为上述值之一？

我想知道是否有人可以帮助我在精神上理解这一点。

那么稍后是否可以通过代码通过代码获取密度大小、DPI（包括 x 和 y）？

我有点失落

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T14:20:33.717

> 但为什么它只声明为~240dpi，即。一个值？

你期待什么？

> 符号〜是什么意思？

正如评论者指出的那样，这意味着“大约”。实际上，设备制造商通常会根据他们对现实世界应用程序行为的测试来选择他们希望他们的设备所处的密度桶。*一般来说*，他们会选择最接近他们实际屏幕密度的密度桶，但这并不能保证。

> 因此，以 800 x 480（三星星系 s2 的 dpi）为例，如何将其转换为上述值之一？

你没有。分辨率不是密度。我可以有一个对角线尺寸为 1mm、1cm、1m 或 1km 的 800x480 显示器。结果，它们中的每一个都将具有不同的屏幕密度。密度以 dpi = 每英寸“点数” = 每英寸像素数来衡量。

> 那么稍后是否可以通过代码通过代码获取密度大小、DPI（包括 x 和 y）？

是的，来自[一个`DisplayMetrics`对象](http://developer.android.com/reference/android/util/DisplayMetrics.html)。

# java - 从 Eclipse 导出的 jar 适用于 Linux，但不适用于 Windows

> ID：10785095
> 
> 赞同：2
> 
> 时间：2012-05-28T12:59:53.233
> 
> 标签：java, cross-platform, swt, compatibility, unsatisfiedlinkerror

我有一个我在 Ubuntu 上的 Eclipse 中编写的程序。我将程序导出到一个可运行的 .Jar 中，它在 Linux 系统上运行良好。如果我尝试在 Windows 系统上使用它，我会收到与两个 SWT .Dll 文件相关的 UnsatisfiedLinkError。我一直在尝试通过在命令行中输入来打开它：

```
java -jar <filename>.Jar` 
```

有没有办法可以将这些 .Dll 文件打包到可运行的 .Jar 中？我以前从未遇到过这个错误，所以我真的不知道该怎么办。很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:07:57.870

我通过使用[SWTJar](http://mchr3k.github.com/swtjar/)解决了这个问题。

> SWT 是一个 Java 小部件工具包，提供对本机 UI 元素的访问。这在打包应用程序时会出现问题，因为您需要为每个平台 (Windows/Linux/OSX)/(32/64bit) 包含不同的 SWT jar。为了支持所有这些标准平台，您必须构建和分发 6 个不同的包，这并不真正符合 Java 的一次编写，随处运行的精神。

这个怎么运作：

> SWTJar 是一个 ant 任务，它允许您构建一个在运行时加载正确 SWT 类的单个 jar，从而允许您分发一个跨 (Windows/Linux/OSX)/(32/64bit) 工作的单个 jar。

以防万一其他人遇到这个问题！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:06:56.710

我认为您需要遵循[这些步骤](http://wiki.eclipse.org/FAQ_How_do_I_create_an_executable_JAR_file_for_a_stand-alone_SWT_program%3F)。根据它们的措辞，听起来可运行 jar 仅适用于单个目标平台，尽管它可以是任何受支持的平台。

# jquery - 与 jQuery 比较

> ID：10785098
> 
> 赞同：0
> 
> 时间：2012-05-28T13:00:07.210
> 
> 标签：jquery

`billItems`我有一个在我的 jquery 中调用的数组，并且有类似的值，

```
[TUTION FEE ,SPORTS FEE ,CONVOCATION FEE ] 
```

在添加新项目之前迭代`billItems`，以避免重复，例如

```
for (var i = 0; i < billItems.length; i++) {
    var name = billItems[i];

    if (name == feesItem.ItemName) {  //here ItemName=TUTION FEE
        var validItem = 'False'
    }
} 
```

正如我上面提到的，正在传递`ItemName`as `TUTION FEE`，但它没有比较字符串，并且控件即使相同也不会进入块中。这个查询有什么问题，任何人都可以在这里帮助我....

我只是将数据附加到一个html表中

```
var feesItem = new Object();

  feesItem.ItemName     = $("#txtItemName").val();
  feesItem.Amount       = $("#txtAmount").val();

$("#BillTable > tbody").find("tr:gt(0)").remove();
  for (var i = 0; i < feesItemList.length; i++) {  
tab = "<tr><td>" + " <span class='bid'>" + feesItem[i].ItemName + " </span>
       </td><td>" + feesItem[i].Amount + "</td></tr>";

          $("#BillTable > tbody").append(tab);
} 
```

它仍然没有比较值...

我只是尝试比较 for 循环中的值，例如，

```
 var billItems = [];
  $(".bid").each(function () {
      billItems.push($(this).text());
  });

 var validItem = ($.inArray(feesItem[i].ItemName, billItems) < 0); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T13:08:44.337

使用[`$.inArray()`](http://api.jquery.com/jQuery.inArray/)：

```
var billItems = ['TUITION FEE', 'SPORTS FEE', 'CONVOCATION FEE'];
var validItem = ($.inArray(ItemName, billItems) < 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T13:11:37.423

您可以为此使用 jQuery 的 inArray 函数：

这是文档： [http ://api.jquery.com/jQuery.inArray/](http://api.jquery.com/jQuery.inArray/)

这里有一些代码向您展示如何使用它：

```
var myArray = ['TUTION FEE' ,'SPORTS FEE' ,'CONVOCATION FEE' ];
var itemName = 'SPORTS FEE';
var nonExistentItemName = 'OTHER FEE';
var isValid = false;

if($.inArray(itemName, myArray) == -1){
    isValid = true;
}

alert(isValid);

isValid = false;

if($.inArray(nonExistentItemName, myArray) == -1){
    isValid = true;
}

alert(isValid); 
```

这是 jsFiddle 来演示它：http: [//jsfiddle.net/sPeem/](http://jsfiddle.net/sPeem/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T13:11:46.863

注意@Rory McCrossan 关于 var validItem = false 的评论

还要确保您正在比较字符串与字符串或 int 与 int javascript 在交叉比较值类型时可能会给出一些 false-y 值。

顺便说一句，重写代码的方法是

```
//Search for a specified value within an array and return its index (or -1 if not found).
var index = jQuery.inArray(ItemName, billItems);

var validItem = index > -1; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T13:13:41.153

试试这个：

```
validItem = true;

for(var i = 0; i < billItems.length; i++) {
    var name = billItems[i];

    if(name == ItemName) { 
       validItem = false;
       break;
    }
}

if(validItem){
  billItems.push(ItemName);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-28T14:09:56.117

我将在这里冒险并猜测您的琴弦与它们看起来的不完全一样。尝试将比较更改为：

```
if ($.trim(name) == $.trim(feesItem.ItemName)) { 
```

这将在比较之前从两个参数中删除任何尾随或前导空格。希望有帮助。

# .htaccess - 将两个 mod_rewrite 规则合二为一

> ID：10785101
> 
> 赞同：0
> 
> 时间：2012-05-28T13:00:12.413
> 
> 标签：.htaccess, mod-rewrite

我需要将两个 mod_rewrite 规则合二为一。

1) 在 CMS 中，有 index.php 处理网络上的所有查询。例如，如果 URI 是 domain.com/query-string，则 index.php 调用/包含所需的部分并显示内容。我这样做：

```
RewriteCond %{REQUEST_URI} !\.[[:alnum:]]+$
RewriteRule ^([^*]+) index.php [L,QSA] 
```

2）我需要使用 HTTP 301 重定向将 www 永久移动到非 www。例如 www.domain.com 到 domain.com。我这样做：

```
RewriteCond %{HTTP_HOST} ^www.domain.com [NC]
RewriteRule ^(.*)$ http://domain.com/$1 [L,R=301] 
```

但是，当我将这两个规则都放入 htaccess 文件时，它会停止工作，并且 Web 重定向上的所有链接都会执行 index.php 并显示主页。这就是为什么，我需要将这两个规则合二为一。

在 .htaccess 的开头是：

```
RewriteEngine On
RewriteBase / 
```

有什么解决办法，怎么办？

整个.htaccess：

```
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_URI} !\.[[:alnum:]]+$
RewriteRule ^([^*]+) index.php [L,QSA]

RewriteCond %{HTTP_HOST} ^www.domain.com [NC]
RewriteRule ^(.*)$ http://domain.com/$1 [L,R=301] 
```

我试图重新排序规则，但没有解决方案。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:54:14.820

这是正确的顺序。根据到目前为止提供的信息，我认为这不应该起作用（在测试机器上工作）。如果它仍然不起作用 - 那么可能在其他地方有另一个规则（或者在您的 PHP 应用程序中进行了重定向）。

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^www\.domain\.com [NC]
RewriteRule ^(.*)$ http://domain.com/$1 [L,R=301]

RewriteCond %{REQUEST_URI} !\.[[:alnum:]]+$
RewriteRule ^([^*]+) index.php [L,QSA] 
```

**顺便说一句**，如果您`%{HTTP_HOST}`与正则表达式匹配（模式以 开头`^`），那么最好转义点，因为在某些情况下它可以产生巨大的差异（可能不是在您的情况下，但仍然，因为点表示“任何字符”）-- `^www\.domain\.com`。或者使用纯字符串比较而不是正则表达式：`=www.domain.com`

# grails - Grails - LESS CSS @import issue

> ID：10785102
> 
> 赞同：1
> 
> 时间：2012-05-28T13:00:13.693
> 
> 标签：grails, plugins, import, less, grails-plugin

I am unable to import a .less file into another one. I get a "file not found" exception, although I triple checked the path and syntax were right.

Here is how I try to import the file from within my `importingFileName.less`:

```
@import 'main'; 
```

Here is how I set the resources in my ApplicationResources.groovy

```
modules = {
    application {
        resource url: 'js/libs/jquery-1.7.2.min.js', disposition: 'head'
        resource url: 'js/libs/jquery-ui-1.8.20.custom.min.js', disposition: 'head'
        resource url: 'js/libs/jquery.form.js', disposition: 'head'
        resource url: 'js/application.js', disposition: 'head'
    }

    css {
        resource url: 'css/mobile.css'
        resource url: [dir: 'less', file: 'importingFileName.less'], attrs:[rel: 'stylesheet/less', type:'css']
    }
} 
```

Here is how I call the resource from the GSPs:

```
<r:require modules="application, css"/> 
```

Here is what I get:

```
ERROR resourceMappers.LesscssResourceMapper  - error compiling less file:
/home/userPath/.grails/2.0.3/projects/myApp/tomcat/work/Tomcat/localhost/_/grails-
resources/less/importingFileName.less

Message: Couldn't load main.less 
```

If I bundle everything into the `importingFileName.less` file, the CSS is loaded correctly using those settings. Any suggestion is most welcome.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:34:04.593

根据您使用的插件版本，单引号可能会导致问题。请参阅[https://github.com/paulfairless/grails-lesscss-resources/issues/26](https://github.com/paulfairless/grails-lesscss-resources/issues/26)。

尝试这个：

`@import "main.less";`

# python - How does Python run module code when there's no matching .pyc file?

> ID：10785105
> 
> 赞同：1
> 
> 时间：2012-05-28T13:00:23.593
> 
> 标签：python, bytecode

If I import a module1.py from the python command line in windows 7 I see the corresponding module1.pyc file appear in the Python32/**pycache**/ folder. My understanding was that it is this bytecode which is executed by the Python interpreter, however I can delete the module1.pyc file and my module functions (module1.func1() etc...) can still be called from the command line. What is running when the functions are called but the .pyc file is not there? When the bytecode is compiled is it also copied to runtime memory for the Python shell?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T13:03:07.033

运行解释器时字节码在内存中。.pyc 文件是下一次导入代码的缓存，因此如果代码没有更改，python 将不必解析代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T13:32:04.483

### TL;博士

Python 总是运行编译后的字节码，要么在运行时编译，要么从磁盘上的 .pyc 文件中读取。

### 稍微长一点的答案

当需要编译字节码时，Python 会调用[py_compile](http://docs.python.org/library/py_compile.html#module-py_compile)或[compileall 。](http://docs.python.org/library/compileall.html#module-compileall)如果在 .pyc 文件中找到有效的预编译字节码，Python 会使用它。即使没有原始源文件，它也可以做到这一点。

如果没有 .pyc 文件，或者源文件比预编译的字节码新，那么 Python 将使用源文件并重新编译。这就是你观察到的行为。

### 官方答复

有关规范的答案，请参阅[PEP 3147：PYC 存储库目录](http://www.python.org/dev/peps/pep-3147/#python-behavior)。

# java - 使用 Spring MVC 为输入文本设置日期格式

> ID：10785107
> 
> 赞同：7
> 
> 时间：2012-05-28T13:00:28.943
> 
> 标签：java, spring, spring-mvc

如何[`Date`](https://docs.oracle.com/javase/8/docs/api/java/util/Date.html)使用 Spring MVC 在文本字段中设置格式？

我正在使用 Spring Form 标签库和`input`标签。

我现在得到的是这样的`Mon May 28 11:09:28 CEST 2012`。

我想以`dd/MM/yyyy`格式显示日期。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T13:11:33.700

在 yr 控制器中注册日期编辑器：

```
@InitBinder
protected void initBinder(WebDataBinder binder) {
    binder.registerCustomEditor(LocalDate.class, new LocalDateEditor());
} 
```

然后数据编辑器本身看起来像这样：

```
public class LocalDateEditor extends PropertyEditorSupport{

 @Override
 public void setAsText(String text) throws IllegalArgumentException{
   setValue(Joda.getLocalDateFromddMMMyyyy(text));
 }

 @Override
 public String getAsText() throws IllegalArgumentException {
   return Joda.getStringFromLocalDate((LocalDate) getValue());
 }
} 
```

我正在使用我自己的抽象实用程序类（Joda）来解析日期，实际上是来自[Joda Datetime 库](http://joda-time.sourceforge.net/)的 LocalDates - 推荐为标准 java 日期/日历是可憎的，恕我直言。但你应该明白这一点。此外，您可以注册一个全局编辑器，因此您不必每个控制器都这样做（我不记得如何）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-28T13:11:40.873

完毕！我刚刚将此方法添加到我的控制器类中：

```
@InitBinder
protected void initBinder(WebDataBinder binder) {
    SimpleDateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy");
    binder.registerCustomEditor(Date.class, new CustomDateEditor(
            dateFormat, false));
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-08-26T07:23:15.170

如果您想格式化所有日期而不必在每个控制器中重复相同的代码，您可以在使用[**@ControllerAdvice**](http://static.springsource.org/spring/docs/3.2.4.RELEASE/javadoc-api/org/springframework/web/bind/annotation/ControllerAdvice.html)注释的类中创建一个**全局 InitBinder**。[](http://static.springsource.org/spring/docs/3.2.4.RELEASE/javadoc-api/org/springframework/web/bind/annotation/ControllerAdvice.html)

 **# 脚步

**1.**创建一个 DateEditor 类来格式化你的日期，像这样：

```
 public class DateEditor extends PropertyEditorSupport {

    public void setAsText(String value) {
      try {
        setValue(new SimpleDateFormat("dd/MM/yyyy").parse(value));
      } catch(ParseException e) {
        setValue(null);
      }
    }

    public String getAsText() {
      String s = "";
      if (getValue() != null) {
         s = new SimpleDateFormat("dd/MM/yyyy").format((Date) getValue());
      }
      return s;
    } 
```

**2.**创建一个带有@ControllerAdvice注解的类（我称之为GlobalBindingInitializer）：

```
 @ControllerAdvice
    public class GlobalBindingInitializer {

     /* Initialize a global InitBinder for dates instead of cloning its code in every Controller */

      @InitBinder
      public void binder(WebDataBinder binder) {
        binder.registerCustomEditor(Date.class, new DateEditor());
      }
    } 
```

**3.**在您的 Spring MVC 配置文件（例如 webmvc-config.xml）中添加允许 Spring 扫描您在其中创建 GlobalBindingInitializer 类的包的行。例如，如果您在 org.example.common 包中创建了 GlobalBindingInitializer：

```
 <context:component-scan base-package="org.example.common" /> 
```

完成的！

**资料来源：**

*   [Keenformatics - 如何使用 @ControllerAdvice 在 Spring 中创建全局 InitBinder](http://keenformatics.blogspot.it/2013/08/how-to-create-global-initbinder-in-spring.html)（我的博客）
*   [Spring Framework 3.2.4 - 注解类型ControllerAdvice](http://static.springsource.org/spring/docs/3.2.4.RELEASE/javadoc-api/org/springframework/web/bind/annotation/ControllerAdvice.html)
*   [Spring Framework API 2.5 - 注解类型 InitBinder](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/bind/annotation/InitBinder.html)
*   个人经验**

# python - 带有int参数的Django HttpResponseRedirect

> ID：10785110
> 
> 赞同：5
> 
> 时间：2012-05-28T13:00:34.237
> 
> 标签：python, django, django-views, django-urls

我想将一个 int 参数 ( `user_id`) 从登录视图传递到另一个视图。这可能在一个内`HttpResponseRedirect`吗？我尝试这样的事情：

```
return HttpResponseRedirect("/profile/?user_id=user.id") 
```

虽然我的 urlconf 是：

```
(r'^profile/(?P<user_id>\d+)/$', '...') 
```

但我不知道这是否是正确的方法。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T13:05:31.787

好吧，这显然不是正确的方法，因为您创建的 URL 与 urlconf 中的不匹配。

这样做的正确方法是依靠 Django 为您做这件事。如果你给你的 URL 定义一个名字：

```
urlpatterns += patterns('', 
    url(r'^profile/(?P\d+)/$', ' ...', name='profile'),
) 
```

然后您可以使用`django.core.urlresolvers.reverse`您的参数生成该 URL：

```
redirect_url = reverse('profile', args=[user.id])
return HttpResponseRedirect(redirect_url) 
```

请注意，在您的 URL 中使用 kwargs 而不是 args 更好，但我保留了它原来的样子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T22:43:32.703

最后，我通过执行以下操作结合了上述答案：

```
url = reverse('profile', kwargs={ 'user_id': user.id })
return HttpResponseRedirect(url) 
```

和

```
url(r'^profile/(?P<user_id>\d+)/$', '...', name='profile') 
```

它工作得很好。

谢谢你！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T13:04:27.147

这是可能的，但最好反转 URL，然后重定向到它：

```
url = reverse('name_of_url', kwargs={ 'user_id': user.id })
return HttpResponseRedirect(url) 
```

您应该确保您的 URL conf 中有一个命名参数（在我上面的示例中，它是一个名为`user_id`.

# php - YII框架：zii.widgets.jui.cjuidialog 固定位置

> ID：10785119
> 
> 赞同：1
> 
> 时间：2012-05-28T13:01:26.970
> 
> 标签：php, yii

有谁知道 zii.widgets.jui.cjuidialog （它是一个对话框）是否有一个固定位置的选项，所以它不能移动，我知道你可以固定大小。但我不喜欢我可以被移动的事实。有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T13:10:59.577

CJuiDialog 可以有[jQuery UI Dialog](http://jqueryui.com/demos/dialog/)的任何选项。因此，我认为在您的情况下，您需要将`draggable`option 声明为`false`.

```
$this->beginWidget('zii.widgets.jui.CJuiDialog', array(
    'id'=>'mydialog',
    'options'=>array(
        /* Other jQuery dialog options */
        'draggable' => false,
    ),
)); 
```

# mysql - TIMESTAMP 作为键及其默认值

> ID：10785122
> 
> 赞同：0
> 
> 时间：2012-05-28T13:01:37.447
> 
> 标签：mysql, sql, timestamp

在服务器中执行 SQL 脚本

> 错误：错误 1067：“Users_Created”的默认值无效

```
CREATE  TABLE IF NOT EXISTS `kwestionariusz_db`.`Companies` (
  `CompanyId` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  `Created` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ,
  `Name` TEXT NOT NULL ,
  `Users_UserId` INT UNSIGNED NOT NULL ,
  `Users_Created` TIMESTAMP NULL DEFAULT NULL ,
  PRIMARY KEY (`CompanyId`, `Created`, `Users_UserId`, `Users_Created`) ,
  INDEX `fk_Companies_Users1` (`Users_UserId` ASC, `Users_Created` ASC) ,
  CONSTRAINT `fk_Companies_Users1`
    FOREIGN KEY (`Users_UserId` , `Users_Created` )
    REFERENCES `kwestionariusz_db`.`Users` (`UserId` , `Created` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB 
```

所以，基本上，我做错了什么？我不希望在创建公司时更新 Users_Created，这会破坏关系。另外 - Companies.Created 是否会在更改时更新，例如 Companies.EMail？显然，我也不希望这样，但是将外键设为可空值无论如何都是错误的，对吧？所以我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:07:44.930

尝试这样做：

```
`Users_Created` TIMESTAMP DEFAULT 0 
```

有关 TIMESTAMP 初始化的完整指南，请阅读此参考文档：

[11.3.4\. TIMESTAMP 的自动初始化和更新](http://dev.mysql.com/doc/refman/5.5/en/timestamp-initialization.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:08:41.353

该`Users_Created`列是主键的一部分。主键不能包含可为空的列。

# c# - Wrong converting between int and char and back in C#

> ID：10785123
> 
> 赞同：3
> 
> 时间：2012-05-28T13:01:56.747
> 
> 标签：c#, char, int, xor

probably mine is a silly question, but I'm having troubles converting a char value into an int and convert back.

The problem is that I'm trying to decrypt a char value retrieved by an Access DB.

Here is my code

```
char chrVal = 'M';
int intVal = (int)chrVal; // Output 77 'M'
// Now trying to encrypt using XOR
int encIntVal = intVal ^ 203; // Output 134 '†'
// Convert back
char correct = (char)(encIntVal ^ 203); // Output 'M' - CORRECT
char wrong = (char)('†' ^ 203); // Output WRONG value 
```

The fact is that when I use the int resulting value from the encrypt XOR, I get correct result ('M'). Instead, when I use the char result from the encrypt XOR (that is what I have in the DB), I get wrong result (unreadable character).

I tried to use different encodings but I can't figure out where is the problem.

Any suggestion?

UPDATE

I found that probably the problem is with ADO.NET OleDbDataReader, because (int)Convert.ToChar(dr["Sex"]) gives me 8224 instead of 134, but I can't find a solution yet.

SOLVED

The character '†' is in the Windows 1252 code page. So I get a byte[] with the correct encoding.

```
byte[] byteVal = Encoding.GetEncoding(1252).GetBytes(dr["Sex"])
char correct = (char)(byteVal[0] ^ 203); // Output 'M' 
```

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T13:05:33.680

'†' 字符可以是多个 Unicode 值而不是一个的前字符。

我可以创建一个字体，其中“A”不仅仅适用于 65 ASCII 值，而是任何值，或者我可以创建一个所有字符都是“A”的字体。

就像在你的情况下'†'可以是你所说的 134 和 Oded 提到的 8224。

`Give more emphasis on ASCII/Unicode values and not on what that value when converted to character looks like.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T13:07:28.703

您的问题是`'†'`8224，而不是 134。（@Oded 首先提到了这一点）您可以改用`'\u0086'`134。

# objective-c - How to set object count to zero(or some value) in NSCountedSet?

> ID：10785126
> 
> 赞同：2
> 
> 时间：2012-05-28T13:02:03.867
> 
> 标签：objective-c, cocoa, nsset, nsmutableset, nscountedset

I have following `NSCountedSet`

```
<NSCountedSet: 0x53dfc0> (item1 [2000], item2 [9000], item3 [200], item4  [3000]) 
```

Now i want to remove `item1` object from my set.
one solution is

```
while([mySet countForObject:item1])
 [mySet removeObject:item1]; 
```

Output:

```
<NSCountedSet: 0x53dfc0> (item2 [9000], item3 [200], item4  [3000]) 
```

or i want to remove only 1000 `item1` object from my set.

```
 NSUInteger count = [mySet countForObject:item1];
    while(count)
    {
     [mySet removeObject:item1];
     --count;
    } 
```

Output:

```
<NSCountedSet: 0x53dfc0> (item1 [1000], item2 [9000], item3 [200], item4  [3000]) 
```

is there any better solution for this ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T13:23:44.833

您可以使用谓词进行过滤

```
[mySet filterUsingPredicate:[NSPredicate predicateWithFormat:@"self != %@", item1]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:21:42.113

我不认为你理解这个问题，所以我得到了这些结果：

```
<NSCountedSet: 0x6d9ee40> (two [1], three [1], one [1], four [1])

[mySet removeObject:@"one"];

<NSCountedSet: 0x6d9ee40> (two [1], three [1], four [1]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T17:51:47.037

NSCountedSet 不提供将某个对象的计数修改一定数量的方法（真的很遗憾）。

如果速度不是问题，您可以使用上述方法。但是，如果您需要其他东西：将 NSMutableSet 子类化以提供此“计数”功能可能是您的最佳选择。

# java - printing a JPanel

> ID：10785127
> 
> 赞同：0
> 
> 时间：2012-05-28T13:02:18.787
> 
> 标签：java, swing, printing, graphics2d

I am trying to print a JPanel called comp .It contains a tabel and some labels.When ever I

print the comp the table goes beyond the page's width. I really don't understand why this is

happening . Need a solution to this problem

Here is the print method I am using:

```
private void printCard(){

PrinterJob printjob = PrinterJob.getPrinterJob();
printjob.setJobName(" personal card ");

printjob.setPrintable (new Printable() {      
     public int print(Graphics pg, PageFormat pf, int pageNum){                  

         pf.setOrientation(PageFormat.LANDSCAPE);

         if (pageNum > 0){
            return Printable.NO_SUCH_PAGE;
         }

         Graphics2D g2 = (Graphics2D) pg;
         g2.translate(pf.getImageableX(), pf.getImageableY());
         g2.translate( 0f, 0f );
         comp.paint(g2);

         return Printable.PAGE_EXISTS;
     }
});

if (printjob.printDialog() == false)
   return;

try {
   printjob.print();
}
catch (PrinterException ex) {
   System.out.println("NO PAGE FOUND."+ex);
   }
} 
```

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T16:00:59.217

调整表格和标签的大小。这应该有效。

# python - python中的行尾

> ID：10785131
> 
> 赞同：12
> 
> 时间：2012-05-28T13:02:42.853
> 
> 标签：python

> **可能重复：**
> [在 Mac 和 Windows 上的 python 中处理 \r\n vs \n 换行符](https://stackoverflow.com/questions/4599936/handling-r-n-vs-n-newlines-in-python-on-mac-vs-windows)

我对某些事情有点困惑，我想知道这是否是 python 的事情。我有一个使用 Windows 行结尾 ("\r\n") 的文本文件，但如果我遍历文件中的某些行，将它们存储在列表中，然后将列表的字符串表示形式打印到控制台，它显示“\n”行结尾。我错过了什么吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-28T13:10:31.653

是的，这是一个 python 的东西；默认情况下`open()`以文本模式打开文件，其中行尾根据您的代码运行的平台进行翻译。您将`newline=''`在`open()`通话中设置要求不改变行尾。

Python 2 的标准`open()`函数不支持此选项，并且仅以二进制模式打开会阻止翻译，但您可以通过 using`io.open()`来使用 Python 3 的行为。

从[文档中`open`](http://docs.python.org/library/functions.html#open)：

> `newline`控制通用换行模式的工作方式（它仅适用于文本模式）。
> 
> [...]
> 
> *   从流中读取输入时，如果`newline`是`None`，则启用通用换行模式。`'\n'`输入中的行可以以、`'\r'`或结尾，这些在返回给调用者之前被`'\r\n'`翻译成。`'\n'`如果是`''`，则启用通用换行模式，但行尾会返回给调用者，但不会翻译。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-28T13:57:29.787

以二进制模式打开文件将在 Windows 上的 Py2 中避免这种情况。但是，在 Py3 中（如果您使用 Py2.6+`io.open`而不是内置），二进制模式与文本模式意味着定义明确且与平台无关，并且不影响通用换行符。相反，您可以这样做：

```
file = open(filename, 'r', newline='') 
```

并且换行符不会被规范化。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-28T16:13:56.497

您应该做的是打开具有通用换行支持的文件（对于 Python 2.x）。这是通过“U”或“rU”模式完成的。然后支持任何类型的换行符。以下文档在 python 手册[http://docs.python.org/library/functions.html#open](http://docs.python.org/library/functions.html#open)中给出：

> 除了标准的 fopen() 值模式之外，模式还可以是“U”或“rU”。Python 通常是用通用换行支持构建的；提供 'U' 将文件作为文本文件打开，但行可能被以下任何一种终止：Unix 行尾约定 '\n'、Macintosh 约定 '\r' 或 Windows 约定 '\ r\n'。所有这些外部表示都被 Python 程序视为“\n”。如果 Python 是在没有通用换行支持的情况下构建的，则带有“U”的模式与普通文本模式相同。请注意，如此打开的文件对象还有一个名为 newlines 的属性，其值为 None（如果尚未看到换行符）、'\n'、'\r'、'\r\n' 或包含所有看到的换行符类型。

对于 Python 3，有一个可以打开的换行选项来控制换行的行为。查看文档，似乎通用换行支持是默认设置。

# android - 使用单个选项卡中的多个活动从活动中获取空指针异常更改选项卡？

> ID：10785134
> 
> 赞同：0
> 
> 时间：2012-05-28T13:03:05.817
> 
> 标签：android, android-layout, android-widget

我会解释我的问题。我有 4 个选项卡，每个选项卡都有多个活动。现在我创建了 4 个选项卡组活动，扩展了 Activity Group 以处理多个活动。现在有一种情况，我必须进行第二个选项卡组活动的子活动。我想将当前选项卡更改为 2。但它在选项卡主机上给了我空指针异常。

如何从第一个活动组更改 ta 和 goto 第二个活动组？请给出想法。或任何我如何实施的例子？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:02:37.913

我已经解决了将 Tabhost 小部件设置为 public static TabHost tabHost 的问题；并通过调用 TabActivity.tabHost.setCurrentTab(2) 更改选项卡；

# c++ - 出口前景联系人

> ID：10785137
> 
> 赞同：0
> 
> 时间：2012-05-28T13:03:36.320
> 
> 标签：c++, windows, winapi, outlook, mapi

我已经在这里问过这个 ->[收集 Outlook 联系人列表](https://stackoverflow.com/questions/10774329/gather-outlook-contacts-list)

但是使用 MAPI 的解决方案看起来不错，它非常依赖于某些 Outlook 库，这些库并不存在于每台 PC 上，而且它们基于 Win 版本和 Outlook 版本具有不同的位置。

那么除了使用 MAPI 之外，没有其他方法可以获取联系人信息吗？联系人是否保存在我可以从中读取它们的文件中？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:11:20.500

[您可以根据PST 格式](http://www.five-ten-sg.com/libpst/rn01re05.html)编写自己的 Outlook pst 解析器。此文件中还提供了联系人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:37:48.723

MAPI 是基于 COM 的，因此您的代码不应该关心它的位置或安装了哪个版本，它只会使用可用的任何版本（假设您针对支持的最低版本进行构建）。

另一种方法是使用 Outlook 对象模型，它可以访问 Outlook 的内部，但其工作方式与 MAPI 几乎完全相同。

# ios - iOS中的UDP套接字错误

> ID：10785138
> 
> 赞同：0
> 
> 时间：2012-05-28T13:03:37.003
> 
> 标签：ios, sockets, udp

我正在创建一个 UDP 套接字，并尝试在下面的代码中发送到现有服务器：

```
struct sockaddr_in servAddr;
memset(&servAddr, 0, sizeof(servAddr));  
servAddr.sin_family = AF_INET;              
servAddr.sin_addr.s_addr = inet_addr(SERVER IP ADDRESS GOES HERE);
servAddr.sin_port   = htons(port);

int testSock = socket(PF_INET, SOCK_DGRAM, IPPROTO_UDP);

unsigned char byteData;
int sent;
unsigned int servSize = sizeof(servAddr);

if((sent = sendto(testSock, &byteData, 1, 0, (struct sockaddr *)&servAddr,  (socklen_t)&servSize)) < 0){
    NSLog(@"Error sending to server: %d %d", errno, sent);
} 
```

每次“sendto”返回-1，并且errno设置为63。我以前从未遇到过这个错误。

我可以完全自信地说，服务器或提供的 IP 地址或端口没有任何问题。它必须是客户端。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T22:01:30.583

63 是“文件名太长”。在这种情况下，对内核来说，sockaddr 显得太长了，那是因为您将指针作为长度传递，而不是实际长度。sendto() 的最后一个参数不是指针，而是一个值。去除 '＆'。

# java - 将 ArrayList 数据转换为以逗号分隔的指定 String[]？

> ID：10785139
> 
> 赞同：-1
> 
> 时间：2012-05-28T13:03:38.563
> 
> 标签：java, string, arraylist

> **可能重复：**
> [将 ArrayList<String> 转换为 String []](https://stackoverflow.com/questions/5374311/convert-arrayliststring-to-string)

如何将 a 转换`ArrayList`为 a `String[]`？

例如，我`ArrayList`的是

```
arrlist=[audio,video,song,tech] 
```

我想把它转换成`String[]`这样的：

```
String[] data;

data={ "audio","video","song","tech"}; 
```

我的问题是`ArrayList`数据可以动态更改，但我想要一个有限大小数组中的返回格式。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-28T13:06:08.570

您可以使用[`toArray(T[])`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#toArray%28T%5b%5d%29)：

```
ArrayList<?> foo;
String[] data = foo.toArray(new String[foo.size()]); 
```

您不必将非零长度数组传递给此函数，但如果您这样做并且它足够大，toArray 将简单地使用它，如果您不这样做，则 toArray 将进行第二次分配。这不是一个很好的优化点。相反，这是标准约定。

另请注意，`String[]`它不是不可变的，它只是固定大小。`ArrayList`和都`String[]`将允许您的数据“更改”；如果你想要一个不可变的列表（一个无法编辑且内容无法替换的列表），你可以在 Google Guava 中找到，或者自己实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T13:07:11.683

从

[将 ArrayList<String> 转换为 String[] 数组](https://stackoverflow.com/questions/5374311/convert-arrayliststring-to-string)

```
 ArrayList<String> stock_list = new ArrayList<String>();
    stock_list.add("stock1");
    stock_list.add("stock2");
    String[] stockArr = new String[stock_list.size()];
    stockArr = stock_list.toArray(stockArr);
    for(String s : stockArr)
        System.out.println(s); 
```

来自[http://viralpatel.net/blogs/2009/06/convert-arraylist-to-arrays-in-java.html](http://viralpatel.net/blogs/2009/06/convert-arraylist-to-arrays-in-java.html)

# matlab - 获取输出矩阵不同列的序列数据

> ID：10785141
> 
> 赞同：2
> 
> 时间：2012-05-28T13:03:58.753
> 
> 标签：matlab

我有一长列（1 * 1691）。我想提取行 (1,13,25...) 的值并将值放在输出矩阵的第 1 列，然后我想提取行 (2,14,26...) 的值并放入我的输出矩阵的第 2 列中的值，然后是行 (3,15,27....)，.........直到列中的行 (12,24,36......) 12\.

我已经产生了一个想法，如下所示，但是这样我必须为所有行写行，这很麻烦。任何人都可以请帮忙。谢谢

```
data=untitled;
d=zeros(144,12);
for n=1:144
  d(1,n)=data(n,:);
  d(2,n)=data(n+12,:);
  d(3,n)=data(n+24,:);
  d(4,n)=data(n+36,:);
  d(5,n)=data(n+48,:);
  d(6,n)=data(n+60,:);
  d(7,n)=data(n+72,:);
  d(8,n)=data(n+84,:);
  d(9,n)=data(n+96,:);
  d(10,n)=data(n+108,:);
  .................... 
```

结尾

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T13:12:21.547

```
d = reshape(data, 12, []) 
```

对你起作用吗？

# javascript - Watir - 如何访问通过Javascript生成的输入类型=文本元素？

> ID：10785142
> 
> 赞同：3
> 
> 时间：2012-05-28T13:04:04.553
> 
> 标签：javascript, ruby, watir, watir-webdriver

我是 Ruby (Watir) 和 Javascript 的新手。如果网站使用动态（通过单击按钮等）生成按钮的 Javascript 代码，我不知道如何访问它们。它可能有自己的名称或 ID，但我什至无法检查它，因为生成的按钮不是基于浏览器的网页源代码...

我认为这可能是一个答案；

```
browser = Watir::Browser.new(:firefox)
browser.send_keys :tab 
```

直到我意识到我似乎没有办法引用焦点按钮，即使我通过 Tab 键将焦点设置在目标上......

**编辑：谢谢大家。我认为这是一个菜鸟问题，现在我面临另一个大问题（所有生成的按钮共享完全相同的属性！！，所以我无法指定哪个），但那是另一回事了……**

** EDIT2：我刚刚解决了我的第二个问题。

```
browser.button(:attribute => "same", :index => *).click 
```

这个！

菜鸟问题

2012.5 - 2012.5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T13:20:02.263

Firefox 有一个检查元素的工具。您应该能够右键单击一个元素并选择“检查元素”菜单选项。然后按下 HTML 按钮以查看该按钮的源代码。

看到源代码后，您应该能够确定其属性以像任何其他按钮一样单击该按钮（假设该按钮已经可见）。

所以你会有一个像这样的脚本：

```
browser = Watir::Browser.new(:firefox)
browser.goto('http://my.page')
#Click the button that generates the other buttons
browser.button(:id, 'generate_buttons_button').click 
#Click the newly displayed buttons once they appear
generated_button = browser.button(:id, 'generated_button')
generated_button.wait_until_present
generated_button.click 
```

# iphone - 如何通过蓝牙将 iPhone 的打印命令发送到打印机？

> ID：10785148
> 
> 赞同：0
> 
> 时间：2012-05-28T13:04:43.587
> 
> 标签：iphone

我想实现这样的应用程序，在没有任何外部连接的情况下，我想从我的 iPhone 设备打印 img、text、pdf 到打印机。我只想在设备和打印机之间使用蓝牙连接。我经历了几个与此相关的问题，但无法获得确定的建议。有些人说要使用外部附件，有些人说要使用 GameKit。具体该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:13:32.137

您不能为此使用 GameKit：GameKit 仅用于与其他 iOS 设备通信。

您是打印机的制造商吗？如果是这样，您可以通过 Made for iPhone 程序使用外部附件，但您必须联系 Apple 以了解这需要什么（因为详细信息不为公众所知）。

如果您不是打印机制造商，那么您唯一的选择是打印机是否支持蓝牙 4.0 低功耗模式。如果是这样，您的应用程序可以使用[Core Bluetooth](https://developer.apple.com/library/ios/#documentation/CoreBluetooth/Reference/CoreBluetooth_Framework/_index.html)框架与其通信。

如果您不是打印机制造商，并且打印机不支持蓝牙 4.0 Low Energy，我认为您不走运。

# c# - 在 WPF 中使用 datatriggers 设置 ItemsSource 属性

> ID：10785150
> 
> 赞同：3
> 
> 时间：2012-05-28T13:04:50.513
> 
> 标签：c#, .net, wpf, xaml, data-binding

我一直在尝试基于数据触发器也绑定的枚举来设置 WPF 控件的项目源。

我一直很不成功，我不确定这是正确的方法：

```
<DataTrigger Binding="{Binding EnumSetting}" Value="Test">
      <Setter TargetName="control" Property="ItemsSource" Value="{Binding Model}" />
</DataTrigger> 
```

我一直在尝试上述的不同版本。任何人都可以帮助或指出我正确的方向。

例如，它是否应该包含在“<'style'>”标签中，我认为不应该这样，但我不确定为什么这不起作用。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T13:10:31.887

主要是你需要观察[DP 优先级](https://msdn.microsoft.com/en-us/library/ms743230%28v=vs.100%29.aspx)，这意味着你不能`ItemsControl`直接在 （或其子类）上设置 ItemsSource ，因为它会覆盖触发器。相反，您应该使用默认设置器。

```
<ItemsControl>
     <ItemsControl.Style>
          <Style TargetType="ItemsControl">
               <Setter Property="ItemsSource" Value="SomeDefaultHere"/>
               <Style.Triggers>
                   <DataTrigger ...>
                        <Setter Property="ItemsSource" Value="SomeOverrideHere"/>
                   </DataTrigger>
               </Style.Triggers>
          </Style>
    </ItemsControl.Style>
</ItemsControl> 
```

（除非您在某些控件模板的触发器中，否则您可能需要一种样式。）

# c# - 使用解析和反射来枚举字符串

> ID：10785154
> 
> 赞同：0
> 
> 时间：2012-05-28T13:05:15.060
> 
> 标签：c#, string, parsing, reflection, enums

我正在读取一个字符串并将该字符串与以下行中的枚举值之一匹配：

```
(DataType)Enum.Parse(typeof(DataType), row[0], true); 
```

是否有替代方法或更有效的方法来匹配字符串与 enum ？我听说这可以使用反射来完成，这可能吗？任何提示？会更有效吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T13:13:16.103

不，你肯定做对了 IMO。您可能会感到困惑的是，人们通常用 a 标记枚举以`DescriptionAttribute`另一种方式 - 将枚举转换为字符串以用于显示目的：

```
public enum SomeEnum
{
  [Description("This is value One")]
  Value1,
  [Description("This is value Two")]
  Value2
} 
```

# javascript - WP 在主导航中添加额外的标题？

> ID：10785155
> 
> 赞同：0
> 
> 时间：2012-05-28T13:05:31.497
> 
> 标签：javascript, html, css, wordpress

所以我在我的自定义 WP 主题中添加了一个菜单，这一切都很好。但是，当我刷新页面时，菜单中会出现一个额外的空白标题。有解决办法吗？我做错什么了吗？

这是我正在谈论的图像：http: [//oi46.tinypic.com/17txc8.jpg](http://oi46.tinypic.com/17txc8.jpg)

```
<div id="navbar">
    <?php wp_nav_menu( array( 'menu' => 'Primary Menu', 'container' => false,'menu_id' => 'main-nav','depth'=>'2')); ?>
        <div id="login" >
    <?php if (!(current_user_can('level_0'))){ ?>               
    <form name="loginform" id="loginform" action="<?php echo get_option('siteurl'); ?>/wp-login.php" method="post">

        <input value="Username" class="input" type="text" tabindex="10" name="log" id="user_login" style="padding-left: 2px;" onfocus="if (this.value == 'Username') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Username';}" />
        <input value="Password" class="input" type="password" tabindex="20" name="pwd" id="user_pass" style="padding-left: 2px;" onfocus="if (this.value == 'Password') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Password';}" />
        <input name="wp-submit" id="wp-submit" tabindex="100" value=" " type="submit" class="loginbutton" >
        <input name="redirect_to" value="<?php echo get_option('siteurl'); ?>" type="hidden">
        <input name="testcookie" value="1" type="hidden">

</form>
            <a class="helpbutton" href="<?php echo get_option('home'); ?>/wp-login.php?action=lostpassword"></a>
    <?php } else { ?>
    <ul class="admin_box">
                <li><a href="<?php echo get_option('home'); ?>/wp-admin/">Dashboard</a></li>
                <li><a href="<?php echo get_option('home'); ?>/wp-admin/post-new.php">Write New Post</a></li>
                <li><a href="<?php echo get_option('home'); ?>/forums">Forums</a></li>
                <li><a href="<?php echo wp_logout_url('$index.php'); ?>">Log out</a></li>
        </ul>
    <?php }?>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:13:41.190

您可以通过 CSS 覆盖它。

只需`margin-left:-30px;`在`#navbar`. 这会将您的整个导航栏向左移动并获得关于菜单的空间。

调整`margin-left`值以获得正确的位置。

# google-maps - MarkerClusterer V3 没有错误但无法正常工作

> ID：10785159
> 
> 赞同：0
> 
> 时间：2012-05-28T13:05:39.050
> 
> 标签：google-maps, google-maps-api-3

好的，所以我开发了以下代码以将 Google Maps 与 Marker Clusterer 一起使用。我使用了网站上的示例，并针对我的 json 数据稍作修改。我的问题是，我没有收到任何错误，但它也不起作用。我在这里做错了什么？

谢谢

```
<head>
    <style type="text/css">
        body {
            margin: 0;
            padding: 10px 20px 20px;
            font-family: Arial;
            font-size: 16px;
        }

        #map-container {
            padding: 6px;
            border-width: 1px;
            border-style: solid;
            border-color: #ccc #ccc #999 #ccc;
            -webkit-box-shadow: rgba(64, 64, 64, 0.5) 0 2px 5px;
            -moz-box-shadow: rgba(64, 64, 64, 0.5) 0 2px 5px;
            box-shadow: rgba(64, 64, 64, 0.1) 0 2px 5px;
            width: 600px;
        }

        #map {
            width: 600px;
            height: 400px;
        }
    </style>

    <script src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script src="http://google-maps-utility-library-v3.googlecode.com/" +
        "svn/trunk/markerclusterer/src/markerclusterer.js">
    </script>

    <script type="text/javascript">
        var data = {
            "users": [ 
                { "latitude":"48.4048403957642",
                    "longitude":"2.68452644348145" },
                { "latitude":"48.4050236871384",
                    "longitude":"2.68512690051361"},
                { "latitude":"48.4048403957642",
                    "longitude":"2.68452644348145"},
                { "latitude":"48.7570941168018",
                    "longitude":"2.16670989990234"},
                { "latitude":"48.404922961092",
                    "longitude":"2.70020564018949"},
                { "latitude":"48.8739279353421",
                    "longitude":"2.32875823974609"},
                { "latitude":"48.4048403957642",
                    "longitude":"2.68452644348145"},
                { "latitude":"41.0349860434783",
                    "longitude":"28.9774059609177"}
            ]
        };

        function initialize() {
            var center =
                new google.maps.LatLng(48.404840395764175,
                    2.6845264434814453);

            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 3,
                center: center,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            });

            var markers = [];
            for (var i = 0; i < data.length; i++) {
                var location = data.users[i];
                var latLng =
                    new google.maps.LatLng(location.latitude,
                        location.longitude);
                var marker = new google.maps.Marker({ position: latLng });
                markers.push(marker);
            }

            var markerCluster = new MarkerClusterer(map, markers);
        }

        google.maps.event.addDomListener(window, 'load', initialize);
    </script>  
</head>
<body>
    <div id="map-container"><div id="map"></div></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:40:20.543

没有添加标记，因为

`for (var i = 0; i < data.length; i++) {`

应该

`for (var i = 0; i < data.users.length; i++) {`

# c# - 为什么C#方法会生成重复的随机字符串

> ID：10785160
> 
> 赞同：2
> 
> 时间：2012-05-28T13:05:41.263
> 
> 标签：c#

以下方法生成具有给定长度的随机字符串。

当连续执行两次时，给出相同的字符串。有没有人能够解释为什么会这样？

```
 public static string GenerateRandomString(int size, bool lowerCase)
        {
            StringBuilder builder = new StringBuilder();
            Random random = new Random();
            char ch;
            for (int i = 0; i < size; i++)
            {
                ch = Convert.ToChar(Convert.ToInt32(Math.Floor(26 * random.NextDouble() + 65)));
                builder.Append(ch);
            }
            if (lowerCase)
                return builder.ToString().ToLower();
            return builder.ToString();
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T13:07:07.353

你没有`Random`正确使用。

当你在一个紧密的循环中调用你`GenerateRandomString`时，它最终会被多次播种到相同的值。

我建议阅读Jon Skeet 的 C# 深度站点中的[随机数](http://csharpindepth.com/Articles/Chapter12/Random.aspx)。

以下是获取`Random`实例的建议方法：

```
using System;
using System.Threading;

public static class RandomProvider
{    
    private static int seed = Environment.TickCount;

    private static ThreadLocal<Random> randomWrapper = new ThreadLocal<Random>(() =>
        new Random(Interlocked.Increment(ref seed))
    );

    public static Random GetThreadRandom()
    {
        return randomWrapper.Value;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T13:07:57.007

创建你的随机对象静态

```
public class MyClass
{
   public static Random rand = new Random();

   public int MyMethod()
   {
       return rand.Next() % 10 + 1;
   }
} 
```

随机作品`System.DatTime.Now.Ticks`。

如果我们这样做

```
Random rand = new Random(); 
```

在内部它发生在

```
Random rand = new Random(System.DateTime.Now.Ticks); 
```

想一想系统中唯一不变的想法是系统时间。

曾经使用 Random 类时，创建它的对象一次，然后`Next()`在任何你想要的地方使用它的方法。当在循环内创建随机对象时，您会在循环中发现这种情况。

在您的代码中，它们是一个接一个地创建的，它们是由相同的 Ticks 种子值创建的。

创建您的随机对象静态，然后它们将不一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T13:09:49.687

连续执行两次有多*快*？Random 的种子是时间相关的，因此如果您以编程方式进行测试，则可能会发生这种情况。我会在其他地方创建*一次*Random 对象，然后在方法中引用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T13:10:54.987

将您的`Random`对象移到方法之外，以便在重复调用时使用相同的对象。

```
static Random random = new Random(); 
```

您现在所拥有的问题是`Random`该类使用当前时间作为其种子值，因此如果快速连续创建两次，则两者将具有相同的种子，因此会产生相同的随机字符串。

# android - android - 如何在运行时获取应用程序的总内存使用量？

> ID：10785162
> 
> 赞同：2
> 
> 时间：2012-05-28T13:05:59.753
> 
> 标签：android, memory-management, process

我知道关于这个问题有多种解决方案和问题，但我测试过的没有一个适用于所有 android 版本，包括蜂窝和冰淇淋三明治。

例如，我创建了一个使用越来越多内存的应用程序，并使用“Debug.getNativeHeapAllocatedSize()”来获取内存使用情况，但它在摩托罗拉 xoom 上返回一个相对恒定的数字（即使我出去- of-memory error) ，但在 nexus one 上的数字在变化。

获取应用程序进程使用的总内存的最佳方法是什么（在代码内部，而不是通过 ddms）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:15:15.413

试试下面的这个方法，它会告诉你 DVM 的可用内存：

Runtime.getRuntime().freeMemory();

# mysql - 使用 bash 转义 SQL

> ID：10785165
> 
> 赞同：0
> 
> 时间：2012-05-28T13:06:22.353
> 
> 标签：mysql, sql, bash, escaping

我正在将数据从两个业务系统导入 MySQL。我编写了一些 bash 脚本来比较系统之间的差异，以便仅导入相关部分。现在我需要构建 SQL 查询，以便加载数据。我的主要问题是转义单引号，我在下面添加了应该转义它的代码部分，但不知何故，这只是有时这样做，不一致。我不明白...

```
TEXT=${PART[1]/\'/\\\'} 
```

所以...有没有更好的方法/程序可以通过管道传输数据来逃避数据？绝对最好的解决方案是使用 MySQL 的`load data infile`混合`on duplicate update`，但如果我理解正确，那还没有实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:15:06.300

Bash 可能不是执行此操作的正确工具，但要使您的方法至少更正确一点，您可以尝试

```
TEXT=${PART[1]//\'/\\\'} 
```

即使用双斜杠重复替换。

报价`man bash`：

> 如果pattern以/开头，所有匹配的pattern都被替换为字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T13:22:56.420

将[MySQLdb](http://mysql-python.sourceforge.net/MySQLdb.html)与 Python 一起使用并使用准备好的语句（参数化查询）。

请注意在select 语句和数据元组之间[使用逗号](http://mysql-python.sourceforge.net/MySQLdb.html#some-examples)而不是百分号。您想让模块而不是 Python 进行字符串替换。

```
c=db.cursor()
max_price=5
c.execute("""SELECT spam, eggs, sausage FROM breakfast
          WHERE price < %s""", (max_price,)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T13:24:55.697

```
echo "aaa''bbb" | sed "s/'/\\\'/g"

aaa\'\'bbb 
```

# c# - 如何用字符串中的唯一名称替换完整路径名？

> ID：10785167
> 
> 赞同：1
> 
> 时间：2012-05-28T13:06:31.817
> 
> 标签：c#, windows, string, replace

我正在使用 c# 并希望仅输入具有来自位置全名的数据的字符串名称

示例我在字符串中有这个名称： **D:\Users\admin\Documents\file.txt**，并且希望在字符串中只有**file.txt**

怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T13:08:37.837

您可以使用[Path](http://msdn.microsoft.com/en-us/library/3bdzys9w)类的[GetFileName方法：](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)

```
String path = "D:\Users\admin\Documents\file.txt";
string name = System.IO.Path.GetFileName(path); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T13:09:28.020

[`Path.GetFileName`](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)会返回你需要的。

```
string fileName = @"D:\Users\admin\Documents\file.txt";
string result;

result = Path.GetFileName(fileName); 
```

`result`将是“file.txt”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T13:09:38.347

如果你想使用文件扩展名

```
System.IO.Path.GetFileName(path); 
```

如果你想没有文件扩展名使用

```
System.IO.Path.GetFileNameWithoutExtension(path); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-28T13:10:01.237

使用[`Path.GetFileName`方法](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)：

```
string fileName = Path.GetFileName(path); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-28T13:10:57.923

正如 aleroot 所说，您想使用`System.IO.Path`该类。以下是您将如何使用它：

```
string strFullFilePath = "D:\Users\admin\Documents\file.txt";
string strFileNameOnly = System.IO.Path.GetFileName(strFullFilePath); 
```

我希望这有帮助。

# iphone - Flurry 广告未在 iOS 上展示

> ID：10785168
> 
> 赞同：1
> 
> 时间：2012-05-28T13:06:33.803
> 
> 标签：iphone, ios, ads, flurry

我已按照网站上的所有说明和说明来集成 FlurryAnalytics 和 FlurryAppCircle。分析正在显示信息，但在我创建的任何视图上都没有显示广告。

在 Application Delegate 中，我按照描述执行了此操作：

```
/* FLURRY APP-CIRCLE INTEGRATION CODE*/
[FlurryAppCircle setAppCircleEnabled:YES];

/* FLURRY ANALYTICS INTEGRATION CODE*/
[FlurryAnalytics startSession:@"MY_API_KEY_HERE"]; 
```

然后在视图的视图控制器中我添加了加载：

```
[FlurryAppCircle setAppCircleDelegate:  self];
hook = [FlurryAppCircle getHook:@"BuddyTracker_Default_Ad" xLoc:0 yLoc:0 
    view:self.view attachToView:YES orientation:@"portrait" 
    canvasOrientation:@"portrait" autoRefresh:YES canvasAnimated:YES 
    rewardMessage:nil userCookies:nil];

//where view is UIView. 
```

*   现在在 FlurryAppDelegate 中调用了该方法`- (void)dataAvailable`，但没有向该视图添加广告（可能作为子视图）。

*   我还尝试在`hook`数据可用时查看变量，但它是`nil`.

*   奇怪的是，当我
    `getHook:@"BuddyTracker_Default_Ad"`再次调用该`dataAvailable`方法时，广告神奇地出现了。

我不确定这里发生了什么。有人可以建议我应该怎么做才能在加载时自动将广告添加到视图中吗？

# php - PHP YII prettyPhoto 按钮点击

> ID：10785169
> 
> 赞同：0
> 
> 时间：2012-05-28T13:06:36.090
> 
> 标签：php, button, click, yii, prettyphoto

我正在使用 prettyPhoto 在网站上创建图像幻灯片，并且通过单击图像可以正常工作。但我想创建一个按钮单击事件，通过该事件幻灯片自动从图像 1 开始到 n。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:25:55.777

您可以将 autoplay_slideshow 设置为 true，以便在加载时启用幻灯片。

如果这不是一个选项，请查看[PrettyPhoto 文档](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/documentation/)，特别是自定义部分。将您的按钮标记添加到标记属性。

另一种选择是使用您自己的 JS 创建一个按钮，该按钮定期调用 prettyphoto 公共 API 函数，例如`$.prettyPhoto.changePage('next');`

# java - 如何在 Haskell 中为 Java 制作语法高亮？

> ID：10785171
> 
> 赞同：2
> 
> 时间：2012-05-28T13:06:53.033
> 
> 标签：java, haskell, syntax-highlighting, happy

很快，我将被迫在 Haskell 中展示一个项目，该项目旨在突出显示 Java 语法。我做了一些研究，发现 Happy 可能是一个解决方案（因为它是一个类似 yacc 的解析器）。还提到了 Bison 和 Parsec。由于我是 Haskell 的新手，我真的不知道如何开始这个项目。任何提示都会有很大帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T13:32:35.137

Haskell 中的高效语法高亮库，使用 alex 生成的词法分析器 - [https://github.com/jgm/illuminate](https://github.com/jgm/illuminate)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T22:24:51.017

> 由于我是 Haskell 的新手，我真的不知道如何开始这个项目

啊，这才是真正的问题。要开始学习 Haskell，我经常推荐[Learn You a Haskell](http://learnyouahaskell.com/)，可以免费在线阅读。我推荐的其他好资源包括[Real World Haskell](http://book.realworldhaskell.org/)（有点过时但仍然不错）和[Typeclassopedia](http://www.haskell.org/haskellwiki/Typeclassopedia)。

要处理包建议，您首先要安装[Haskell 平台](http://hackage.haskell.org/platform/)，然后您可以使用以下命令安装给定包：

```
cabal install PACKAGE 
```

但是请注意，Haskell 的发展速度非常快，因此有些软件包彼此不兼容。Cabal 应该防止你做任何太愚蠢的事情，但如果你最终弄乱了包之间的依赖关系，请[在 #haskell irc 频道](http://www.haskell.org/haskellwiki/Irc)寻求帮助。您可以通过在包概述页面上单击其名称来查看给定模块的文档。如果软件包不在[http://hackage.haskell.org](http://hackage.haskell.org)上，请联系所有者或在 irc 上寻求帮助，他们会帮助您生成文档并安装它。

我不知道语法高亮算法是如何工作的，所以我将把这部分留给你自己研究。如果允许您重用现有工作，那么您可能会使用[language-java](http://hackage.haskell.org/package/language-java)包（如 Louis 建议的那样）将原始文本解析为 Java 的抽象语法树，然后由您决定转换该语法树成您需要生成的任何彩色格式。

在您将大量时间投入任何一种方法之前，您应该咨询任何需要您执行此任务的人，以确保它是可以接受的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T13:10:27.163

[绑定到 libkate](http://hackage.haskell.org/package/highlighting-kate)怎么样？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T13:21:09.373

快速搜索 Hackage 返回[`language-java`](http://hackage.haskell.org/package/language-java)。您可能可以以某种方式调整其漂亮的打印机。

# numbers - 数字重复，连续数字 - 不允许

> ID：10785173
> 
> 赞同：-1
> 
> 时间：2012-05-28T13:06:57.977
> 
> 标签：numbers, repeat

我想创建一个验证器，它应该允许 3 位数字，并且不允许相同的数字，没有重复的数字，没有连续的数字。例如：111、123、121 不允许。

如何结合这些条件创建验证器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:12:50.670

正则表达式非常适合检查字符串的格式。

# php - Ajax 加载的内容在 Drupal 中引用了错误的节点 ID

> ID：10785174
> 
> 赞同：0
> 
> 时间：2012-05-28T13:07:04.257
> 
> 标签：php, jquery, drupal, views

我有一个节点列表，每个节点都可以单击。单击发送一个节点引用参数，该参数使用 ajax 加载一个新视图。Jquery 通过 content-type-tpl.php 上的隐藏输入值收集节点参考号。同样，新视图中的每个节点都有一个单击，该单击发送一个节点引用参数，该参数使用 ajax 加载一个新视图。然而，虽然原始视图中的点击工作正常，但新调用视图中的点击并没有引用正确的节点。不是引用被单击节点的节点 ID，而是收集视图中下一个节点的节点 ID。放置时奇怪`<?php echo $node->nid;?>`在 content-type-tpl.php 上，正确的节点 ID 会在页面上回显。但遗憾的是，这不是发送到视图参数的那个。因此，单击新加载的 ajaxed 视图中的任何节点，都会发送下一个节点的 id。这是java脚本：

```
Drupal.behaviors.ajaxlinks = function (context) {
    $('.morelink:not(.togg-processed)', context).addClass('togg-processed').each(function () {
      var myindex = $('.morelink').index($(this));
      var target = $('.newthing').eq(myindex)
      var nid = $(".mynid").eq(myindex).val();
    $(this).click(function() {
if (($('.hiddenrows').eq(myindex).is(":hidden")))
{    $('.hiddenrows').eq(myindex).show();
    $('.newthing').eq(myindex).show();
      var toLoad = Drupal.settings.basePath + 'replies/' + nid;
      xhr = $.ajax({
        url: toLoad,
        success: function(data) {
        $(target).html($(data));
     Drupal.attachBehaviors(context);
}
});
}
else
{
    $('.hiddenrows').eq(myindex).hide();
    $('.newthing').eq(myindex).hide();
}
    return false; 
```

这是相同的代码，所以我看不出为什么它在新加载的视图中工作方式不同。谁能发现我做错了什么？我怀疑这与放置变量或声明变量的方式有关。或者可能与滥用 index 、 eq 或 this 有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:43:46.230

看起来 Drupal.attachBehaviors 应该在 (target) 而不是 (context) 上触发。它在整个上下文中重新启动脚本，而不仅仅是新的 ajaxed 内容。所以我改变了 Drupal.attachBehaviors(context); 到 Drupal.attachBehaviors(target);

现在它起作用了！

# php - PHP preg_replace：将所有转换后的部分保存到一个数组中

> ID：10785179
> 
> 赞同：1
> 
> 时间：2012-05-28T13:07:28.483
> 
> 标签：php, preg-replace

我有一个包含许多日期的大文本，格式如下：

```
 10 april 2012, monday 
```

我需要将它们全部转换成这种格式：

```
 \r\nmonday, 10 april 2012 
```

所以，我写了一个正则表达式，它工作得很好。

```
 $matches1= preg_replace(
 '#(\d{,2} [a-z]+) \d{4}, (sunday|monday|tuesday|wednesday|thursday|friday|saturday)#u', 
 "\r\n$2$3$4$5$6$7$8, $1", 
 $txt); 
```

问题是我还需要将与替换模式匹配的文本的所有转换部分 - "\r\n$2$3$4$5$6$7$8, $1" (如 \r\nmonday, 10 april 2012) - 保存到大批。所以我有这样的事情：

```
 Array('\r\nmonday, 10 april 2012', '\r\ntuesday, 11 april 2012', '\r\nfriday, 14 april 2012' etc.) 
```

那可能吗？

替换模式 ("\r\n$2$3$4$5$6$7$8, $1") 来自 html 表单，可能会有所不同。

## 更新

我试图写一个回调函数，但我无法得到我需要的结果。所以我想出了以下几点：

```
 $text = ...;//some text
 $search = ...;//search pattern
 $replacement = ...;//replacement pattern

 preg_match_all('#' . $search. '#u', $text, $matches, PREG_SET_ORDER);

 foreach ($matches as $match) 
 {
     $replacements[] = preg_replace('#' . $search. '#u', $replacement, $match[0]);
 }

 $newtext = preg_replace('#' . $search. '#u', $replacement, $text); 
```

所以 $newtext 包含转换后的文本， $replacenemts 包含所有替换。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T13:17:01.493

改为使用[`preg_replace_callback`](http://php.net/preg_replace_callback)（或在以下代码示例中另外使用示例）并跟踪所有替换：

```
$search =  '#(\d{,2} [a-z]+) \d{4}, (sunday|monday|tuesday|wednesday|thursday|friday|saturday)#u';
$replace = "\r\n$2$3$4$5$6$7$8, $1";
$captured = array();

preg_replace_callback($search, function($matches) use (&$captured)  {
    $captured[] = $matches;    
}, $txt);

$matches1= preg_replace($search, $replace, $txt); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T13:09:53.850

使用 preg_replace_callback 和一个自定义函数，它将匹配项存储到一个数组中并返回替换字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T13:26:47.323

您也可以在中间使用逗号和空格分割字符串，然后在使用[1](http://www.w3schools.com/php/func_array_push.asp)`$txtArr = explode(', ', $txt, 1);`将它们推入数组的同时将它们连接在一起。不要忘记定义您将添加日期的数组（例如）。`array_push($matches, $txtArr[1].', '.$txtArr[0]);``$matches = array();`

如果它们位于一大串文本中，您可以使用 RegEx 函数定位它们，并利用它将“清理”的匹配项放入数组中。

# objective-c - iphone 应用程序 - 为 NavigationController 创建主页按钮？

> ID：10785182
> 
> 赞同：1
> 
> 时间：2012-05-28T13:07:35.400
> 
> 标签：objective-c, uinavigationcontroller

这是 xcode 默认所做的：当您在导航控制器中查看第一个视图时，“返回”按钮不会出现在标题中。后退按钮仅在您前往由第一个视图实例化的另一个视图时出现。

我希望在您处于第一个视图时出现主页按钮或返回按钮。单击它会执行某个操作....比如更改 rootviewcontroller。我怎样才能让这个按钮出现，我如何只在第一个视图上覆盖它的行为？当在任何其他视图上时，后退按钮的行为应该默认工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:13:58.160

试试这个：

```
UIButton *button =  [UIButton buttonWithType:UIButtonTypeCustom];
NSString* backBtnImg = @"myImage";
UIImage *buttonImage = [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:backBtnImg ofType:@"png"]];
[button setBackgroundImage:buttonImage forState:UIControlStateNormal];
[button setTitle:@"back" forState:UIControlStateNormal];
[button addTarget:self action:@selector(myAction) forControlEvents:UIControlEventTouchUpInside];
[button setFrame:CGRectMake(0, 0, buttonImage.size.width, buttonImage.size.height)];

UIBarButtonItem *btnItem = [[UIBarButtonItem alloc] initWithCustomView:button];
self.navigationItem.leftBarButtonItem = btnItem; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:20:00.260

在根视图控制器的`viewDidLoad`方法中，初始化 a`UIBarButtonItem`并将其添加到导航控制器的工具栏：

```
UIBarButtonItem *homeButton = [[UIBarButtonItem alloc]
                              initWithTitle:@"Home"
                              target:[AppDelegate sharedDelegate]
                              action:@selector(changeRootViewController)];
[self.navigationItem setLeftBarButton:homeButton animated:NO]; 
```

`target`如果您想换出根视图控制器，则应该是您的应用程序委托类。在该类中创建一个方法，调用该方法`changeRootViewController`来执行视图控制器交换。

您可以使用 更改`homeButton`以使用图像而不是文本[`initWithImage:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIBarButtonItem_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40007519-CH3-SW3)。

# sql-server-2008 - 将 64 位数据库还原到 32 位数据库 SQL Server

> ID：10785191
> 
> 赞同：4
> 
> 时间：2012-05-28T13:08:08.820
> 
> 标签：sql-server-2008, 32bit-64bit

在我的客户站点上，他们在我的开发环境中的 Server 2008 OS 机器上安装了 SQL Server 2008 R2 64 位 Express 版我有——安装了 32 位 Vista 机器和 Sql Server 2008 Express 版

我的问题是如何将 64 位数据库的备份恢复到我的 32 位数据库

我尝试了什么 1）创建 64 位数据库的备份并在我的 32 位机器上创建数据库并还原它我收到错误

服务器“egov041\SQLEXPRESS2008”的恢复失败。(Microsoft.SqlServer.SmoExtended)

System.Data.SqlClient.SqlError：数据库备份在运行版本 10.50.1600 的服务器上。该版本与运行版本 10.00.2531 的此服务器不兼容。在支持备份的服务器上恢复数据库，或使用与该服务器兼容的备份。(Microsoft.SqlServer.Smo)

2) 从服务器机器复制 MDF 和 LDF 文件并将其附加到我的机器上

我收到一个错误

为服务器“egov041\SQLEXPRESS2008”附加数据库失败。(Microsoft.SqlServer.Smo)

附加信息：

执行 Transact-SQL 语句或批处理时发生异常。(Microsoft.SqlServer.ConnectionInfo)

无法打开数据库“PwdMhToll”，因为它是版本 661。此服务器支持版本 655 和更早版本。不支持降级路径。无法打开新数据库“PwdMhToll”。CREATE DATABASE 已中止。（Microsoft SQL Server，错误：948）

我指的是 1) [http://social.msdn.microsoft.com/Forums/en/sqlexpress/thread/49f0adf1-8254-4e4a-b7ce-d9406d0ab6d6](http://social.msdn.microsoft.com/Forums/en/sqlexpress/thread/49f0adf1-8254-4e4a-b7ce-d9406d0ab6d6)

2) [http://blog.sqlauthority.com/2011/03/27/sql-server-32-bit-64-bit-html5-database-backup-restore/](http://blog.sqlauthority.com/2011/03/27/sql-server-32-bit-64-bit-html5-database-backup-restore/)

3) [http://blogs.msdn.com/b/cindygross/archive/2010/04/01/moving-data-between-32-bit-and-64-bit-sql-server-instances.aspx?CommentPosted=真的#commentmessage](http://blogs.msdn.com/b/cindygross/archive/2010/04/01/moving-data-between-32-bit-and-64-bit-sql-server-instances.aspx?CommentPosted=true#commentmessage)

从这些帖子中我得出结论，这是可能的，有没有人建议我的数据库恢复有什么问题......提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T14:13:11.873

您的问题不在于 32 位与 64 位，而是您正在尝试在旧版本上恢复/附加数据库。

如果要完成此操作，最好的方法是编写数据库（模式和数据）脚本，然后在目标实例上运行脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T13:51:14.393

> 数据库备份在运行版本 10.50.1600 的服务器上。该版本与运行版本 10.00.2531 的此服务器不兼容。

这强烈暗示源数据库是 2008 R2，而您本地安装的版本是 2008（不是 R2）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T09:46:00.177

我发现这样做的最佳方法是生成数据库脚本并在其他机器上执行它，这解决了我的问题，完整步骤请参考 [http://blog.sqlauthority.com/2007/08/21/sql-server -2005-create-script-to-copy-database-schema-and-all-the-objects-stored-procedure-functions-triggers-tables-views-constraints-and-all-other-database-objects](http://blog.sqlauthority.com/2007/08/21/sql-server-2005-create-script-to-copy-database-schema-and-all-the-objects-stored-procedure-functions-triggers-tables-views-constraints-and-all-other-database-objects)

# jquery-ui - datepicker（启用单个日期）

> ID：10785194
> 
> 赞同：1
> 
> 时间：2012-05-28T13:08:18.627
> 
> 标签：jquery-ui

由于我的要求，我正在寻找如何在 JQUERY 日期选择器中“启用”特定日期的示例。我已经禁用了 2 行代码，并且我的逻辑有一些我需要启用的特定日期。要通过禁用来做到这一点将需要更多的代码复杂性。我试图找到启用的示例，但一无所获。

如果无法在特定日期完成，我需要继续，但我想先检查

```
function changeFormat() {
    dVal = $("#FirstPeriodReconDate").datepicker("getDate");

    StartDate = new Date(dVal);
    EndDate = new Date(dVal);

    $("#FirstROCRecycleReconDate").datepicker("option", "numberOfMonths", 3);
    $("#FirstROCRecycleReconDate").datepicker("option", "buttonImage",
        $("#AbsolutePath").val() + 'Content/images/Control_MonthCalendar.bmp');
    $("#FirstROCRecycleReconDate").datepicker("option", "buttonImageOnly", true);

    StartDate = new Date("May 20, 2012");
    EndDate = new Date("June 21, 2012");
    $("#FirstROCRecycleReconDate").datepicker("option", "minDate", StartDate);
    $("#FirstROCRecycleReconDate").datepicker("option", "maxDate", EndDate);
} 
```

现在我想启用一个特定的日期，此时所有日期都被禁用。我需要启用 2012 年 6 月 1 日，但不确定是否可能

提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T13:32:20.307

您可以使用`beforeShowDay`jQuery UI 的 Datepicker ( [docs](http://docs.jquery.com/UI/Datepicker#event-beforeShowDay) ) 的事件：

> 该函数将日期作为参数，并且必须返回一个数组，其中 [0] 等于 true/false 指示此日期是否可选，[1](http://docs.jquery.com/UI/Datepicker#event-beforeShowDay)等于 CSS 类名称或默认表示为“”，并且[2](http://jsfiddle.net/jhogervorst/27eyP/)此日期的可选弹出工具提示。在显示之前，它会在日期选择器中的每一天被调用。

您可以像这样实现它（[现场示例](http://jsfiddle.net/jhogervorst/27eyP/)）：

```
var _allowedDates = [
    new Date(2012, 4, 27).getTime(),
    new Date(2012, 4, 28).getTime(),
    new Date(2012, 4, 29).getTime(),
];

function allowedDates(date) {
    date = date.getTime();

    for (i in _allowedDates)
        if (date == _allowedDates[i])
            return [true, ""];

    return [false, ""];
}

$('#datepicker').datepicker({
    beforeShowDay: allowedDates
});​ 
```

# visual-studio-2010 - 在 Windows XP 上将 FileExtd.lib 与 Visual Studio 2010 一起使用

> ID：10785195
> 
> 赞同：1
> 
> 时间：2012-05-28T13:08:20.957
> 
> 标签：visual-studio-2010

我一直在 VS2005 项目中使用 GetFileInformationByHandleEx 例程。当时该功能可用于 FileExtd.h 和 FileExtd.lib，您必须手动下载它。现在我想将项目迁移到 VS2010，并且我已经看到新 SDK 附带了一个 FileExtd.lib。

在 VS2010 中，GetFileInformationByHandleEx 是在 winbase.h 中声明的，但为了保持与 WindowXP 的兼容性，我必须声明一个 _WIN32_WINNT 具有较低的值（如 NTDDI_WINXP），它会禁用例程定义。否则它将静态链接到 kernel32.dll（该例程在 WinXP 上不可用）。因此，我认为解决方案是将旧的 FileExtd.h 与 VS2010 版本的 FileExtd.lib 结合使用。但如果我这样做，我会出现以下链接错误：

```
1>fileextd.lib(fileextd.obj) : error LNK2019: unresolved external symbol __imp__RtlSetLastWin32Error@4 referenced in function _BaseSetLastNTError@4
1>fileextd.lib(fileextd.obj) : error LNK2019: unresolved external symbol __imp__NtWaitForSingleObject@12 referenced in function _GetFileInformationByHandleEx@16 
```

我试图保留 winbase.h 的声明并在 kernel32.lib 之前声明 FileExtd.lib，但它仍然链接到 kernel32.dll。

另外，是否可以将使用其他版本的 Visual Studio 编译的库组合起来？我之所以问这个问题是因为我在我的 VS2010 项目中使用的是 VS2005 版本，如果 FileExtd.lib 可以编译并且运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-07-06T03:37:28.057

我遇到了同样的问题。在命令行中指定`FileExtd.lib` *之前应该没问题。* 这是我在为 XP 构建目标时在 Windows 10 下运行的 Visual Studio 2010 中的设置。`kernel32.lib``link.exe`

在配置属性/链接器/输入/附加依赖项下，添加`FileExtd.lib` *之前* `%(AdditionalDependencies)`。

[![链接设置](../Images/f00ab3b244969a8de47c5dd306f354a0.png)](https://i.stack.imgur.com/cPP6v.png)

生成的 DLL 不需要`GetFileInformationByHandle`kernel32.dll 中的符号，这可以通过运行`dumpbin`实用程序来保证。

```
dumpbin /imports path\to\dll-or-exe | grep SetFileInformationByHandle
              464 SetFileInformationByHandle  <-- disappered 
```

# c - 根据复选框更改输入框中的文本 (GTK+)

> ID：10785197
> 
> 赞同：0
> 
> 时间：2012-05-28T13:08:33.320
> 
> 标签：c, checkbox, gtk

我已经填充了一个包含 4 列的表。第一列是填充有循环的复选框。事实上，所有列都填充了一个循环。第二列是文本条目 entry[x][y]，其中 x 是列，y 是行。所以这就是我想要做的。当您选中第 1 行 (checkbox[y]) 中的复选框时，我想更改第 2 列第 1 行 (entry[x][y]) 中输入框的文本颜色。我知道答案很简单，但它让我难以理解。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T22:41:09.903

嗯，这是我的例子。可能更简单但有效。

```
#include <gtk/gtk.h>
#include <stdio.h>
#define TABLE 4
#define C_RED "red"
#define C_BLACK "black"

typedef struct _Widgets Widgets;
struct _Widgets
{
    GtkWidget *checkbox;
    GtkWidget *entry[TABLE-1];
};

static void change_color (GtkWidget *widget, gpointer data)
{
    int i;
    GdkColor color;
    Widgets *_widget = (Widgets*) data;
    gchar *cc = NULL;

    if (gtk_toggle_button_get_active (GTK_TOGGLE_BUTTON (widget)))
        cc = C_RED;
    else
        cc = C_BLACK;

    gdk_color_parse (cc, &color);
    for (i = 0; i < TABLE; i++)
        gtk_widget_modify_fg (_widget->entry[i], GTK_STATE_NORMAL, &color);
}

int main (int argc, char **argv)
{
    int x,z;
    int pos = 0;
    GtkWidget *window = NULL;
    GtkWidget *table = NULL;
    Widgets widgets[TABLE];

    gtk_init (&argc, &argv);
    window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
    gtk_window_set_title (GTK_WINDOW(window), "Feel Gtk Table");
    g_signal_connect (G_OBJECT (window), "destroy", G_CALLBACK(gtk_main_quit), NULL);
    table = gtk_table_new (TABLE, TABLE, FALSE);
    gtk_container_add (GTK_CONTAINER (window), table);

    for (x = 0; x < TABLE; x++)
    {
        widgets[x].checkbox = gtk_check_button_new ();
        gtk_table_attach_defaults (GTK_TABLE(table), widgets[x].checkbox, 0, 1, x, x+1);
        g_signal_connect (G_OBJECT (widgets[x].checkbox), "toggled", G_CALLBACK (change_color), &widgets[x]);
        for (z = 0; z < TABLE-1; z++)
        {
            widgets[x].entry[z] = gtk_entry_new();
            gtk_table_attach_defaults (GTK_TABLE(table), widgets[x].entry[z], z+1, z+2, x, x+1);
        }
    }
    gtk_widget_show_all (window);
    gtk_main ();

    return 0;
} 
```

# android - 如何在android的单选项目警报对话框中显示多行

> ID：10785201
> 
> 赞同：1
> 
> 时间：2012-05-28T13:08:46.433
> 
> 标签：android, android-alertdialog

我在带有单选项目模式的警报对话框中显示项目列表，没有任何问题。如果长度超过最大宽度大小，我如何在两行中显示每个项目的文本。列表项是动态加载的，所以我们不能通过 \n 断点来编辑它们。

任何人都可以帮我解决这个问题。

提前赞赏。

谢谢

萨蒂什

* * *

感谢您的回复，我在这里使用 AlertDialog.Builder 显示带有默认选项的对话框

```
AlertDialog.Builder builder=new AlertDialog.Builder(this);
     builder.setTitle("Select the Dealershipname");

     builder.setSingleChoiceItems(items, selectedDealershipname , new OnClickListener() 
     { 
       @Override
       public void onClick(DialogInterface dialog, int which) 
       {

          dialog.cancel();

       }
       });

     builder.show(); 
```

在这里，我没有使用任何 android.R.id.Text1 类型的布局。那么如何在这里更改 textview 的属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:23:37.627

您可能会更好地实现自定义 ArrayAdapter，您可以在其中以编程方式在适配器内更改列表项的布局。请参阅此处：[自定义 ArrayAdapter 教程](http://www.ezzylearning.com/tutorial.aspx?tid=1763429&q=customizing-android-listview-items-with-custom-arrayadapter)。

除了自定义适配器之外，您还可以将`android.R.layout.simple_list_item_single_choice`其用作传递给 ArrayAdapter 的布局。它仍将`android.R.id.text1`用于其 TextView，并将自动处理 RadioButton 而无需您进一步干预。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T15:04:57.647

只需在对话框列表内的 TextViews 上使用 setSingleLine(false)。您可以使用自定义 ArrayAdapter 获取对 textview 的引用：

```
 String[] items = {"foo foo foo foo foo foo foo", "bar bar bar bar bar bar", "foobar foobar foobar foobar foobar foobar"};

        ListAdapter adapter = new ArrayAdapter<String>(this,
                android.R.layout.select_dialog_item, android.R.id.text1, items) {
            public View getView(int position, View convertView, ViewGroup parent) {
                // User super class to create the View
                View v = super.getView(position, convertView, parent);

                // TextView title =
                // (TextView)v.findViewById(android.R.id.title);
                TextView tv = (TextView) v.findViewById(android.R.id.text1);

                tv.setSingleLine(false);

                return v;
            }
        }; 
```

# java - 在航点上创建按钮

> ID：10785203
> 
> 赞同：1
> 
> 时间：2012-05-28T13:08:50.997
> 
> 标签：java, swing, swingx

我使用 JXMapKit 创建了一个地图应用程序，并使用航点类创建自定义航点。我需要知道如何将按钮功能添加到 graphics2D 对象。是否有“按钮”界面，或者我应该扩展现有按钮或组件类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:04:02.740

使用鼠标单击动作侦听器解决了该问题，并检查鼠标单击距离航路点的距离是否很小（即 5 像素）

# asp.net - 配置错误

> ID：10785204
> 
> 赞同：1
> 
> 时间：2012-05-28T13:08:52.907
> 
> 标签：asp.net, html, config

我正在尝试加载我的网页，`index.html`并且它正在浏览器上显示以下消息。

> 配置错误
> 
> 说明：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。
> 
> 解析器错误消息：在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的。此错误可能是由未在 IIS 中配置为应用程序的虚拟目录引起的。

```
Line 24:             during development.
Line 25:         -->
Line 26:        <siteMap defaultProvider="XmlSiteMapProvider"  enabled="true">
Line 27:            <providers>
Line 28:                <clear/> 
```

有谁知道问题是什么？它说问题出在一个名为... web.config on Line: 26 的文件中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:12:50.530

> 将您的虚拟目录转换为 IIS 中的应用程序。这样做的步骤：

```
- Click on Start
 - Open inetmgr
 - Right click on virtual directory and click on convert to
   application. 
```

# php - CKEditor v3 不包含文本 粘贴到编辑器时的标签

> ID：10785205
> 
> 赞同：0
> 
> 时间：2012-05-28T13:09:01.980
> 
> 标签：php, javascript, ckeditor, html-editor

将文本粘贴到编辑器中时，是否可以强制 CKEditor HTML 编辑器将段落标签包裹在内容周围？

我正在运行版本 3.6.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:04:45.110

那是不同的。通常人们想要关闭强制 <p> 标签，而不是打开它们，因为它们在 CKEditor 中默认是打开的。尝试在 config.js 中使用此代码：

```
config.enterMode = CKEDITOR.ENTER_P; 
```

# android - 模拟器显示蓝屏，不显示谷歌地图

> ID：10785210
> 
> 赞同：0
> 
> 时间：2012-05-28T13:09:20.640
> 
> 标签：android, google-maps, google-maps-api-3, android-emulator, android-mapview

我正在尝试非常基本的谷歌地图 api 代码。但它只是给了我一个空白的蓝页。

我的程序是这个

Java 代码::

```
package com.project1;

import android.os.Bundle;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;

public class Testmap22Activity extends MapActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        MapView mapview = (MapView) findViewById(R.id.mapview);
        GeoPoint gp = new GeoPoint(130810,802740);
        MapController mvc = mapview.getController();
        mvc.setCenter(gp);
        mapview.setBuiltInZoomControls(true);
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }
} 
```

main.xml 是

```
<?xml version="1.0" encoding="utf-8"?>

                 <com.google.android.maps.MapView
                     xmlns:android="http://schemas.android.com/apk/res/android"
                      android:id="@+id/mapview"
                 android:layout_width="fill_parent"
                 android:layout_height="fill_parent"
                 android:enabled="true"
                 android:clickable="true"
                 android:apiKey="Key"
                 /> 
```

清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.project1"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-permission android:name="android.permission.INTERNET"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".Testmap22Activity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <uses-library android:name="com.google.android.maps"/>
    </application>

</manifest> 
```

我得到的只是一个启用缩放的空白蓝页。在这方面需要你的帮助...

副部

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:13:00.510

```
 android:apiKey="Key" 
```

而是插入您的 MD5（映射键）`"Key"`。

如何获取 MD5 https://developers.google.com/maps/documentation/android/mapkey

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:22:02.420

错误就在这里

```
 android:apiKey="Key" 
```

参考这个链接..这里地图视图是一步一步解释 [http://developer.android.com/resources/tutorials/views/hello-mapview.html](http://developer.android.com/resources/tutorials/views/hello-mapview.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T10:42:04.930

正如您所说，您输入了正确的地图密钥，并且构建目标已设置为 Google Api。那么这个蓝屏只有一种可能性（错误的纬度和经度参数）：

```
 GeoPoint gp = new GeoPoint(130810,802740); 
```

您在 GeoPoint 构造函数中提供了错误的参数，这就是您的屏幕显示为蓝色的原因。在 GeoPoint 构造函数中传递正确的纬度和经度。

# winapi - Windows 2000/XP 中涉及临界区的错误行为

> ID：10785211
> 
> 赞同：0
> 
> 时间：2012-05-28T13:09:20.793
> 
> 标签：winapi, critical-section, c++builder-6

最近我尝试在 Windows 7 x64 上运行一个旧应用程序（用 Borland C++ Builder 6 编写），发现 IO 线程不工作。调试表明问题出在错误处理类没有离开临界区（间接地，通过一个简单的包装类），因此添加到日志的每条消息都会导致两次调用，`EnterCriticalSection`但只有一次调用`LeaveCriticalSection`.

在我看来，这个错误应该使该类无法使用，但它是原始开发人员积极使用的常见类之一，并且这个特定的应用程序在 Windows 2000/XP 中始终运行良好。所以问题是为什么这个错误只出现在 Windows 7 中？

我在这里阅读了有关关键部分和建议问题的 MSDN 文章，唯一注意到的行为变化是未定义的获取顺序，这绝对不是这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:49:14.357

我使用 C++Builder 6，我的应用程序在 Windows 7 64 位的关键部分上运行良好。因此，您的问题必须是由于应用程序中的错误，而不是 API 中的错误。如果一个线程调用`EnterCriticalSection()`并成功获得了锁但没有调用`LeaveCriticalSection()`，后续线程会在自己的调用上死锁`EnterCriticalSection()`。因此，您将不得不继续调试以找出为什么原始线程没有`LeaveCriticalSection()`在它应该调用的时候调用。每个对 的调用都`EnterCriticalSection()`必须与对 的调用保持平衡`LeaveCriticalSection()`，尤其是在它们嵌套的情况下。

# python - for(i=0;True;i++) 在 python 中？

> ID：10785218
> 
> 赞同：3
> 
> 时间：2012-05-28T13:09:49.717
> 
> 标签：python

有没有一种更 Pythonic 的方式，或者至少是一种更短更简单的方式来做到这一点：

```
i = 1
while True:
    res = lookup(i) # returns a value or None
    if res is None:
        break
    else:
        i += 1
        yield res 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T13:14:13.960

您可以使用[`itertools`](http://docs.python.org/library/itertools.html)：

```
from itertools import takewhile, count

# ...
def myfunc():
    return takewhile(lambda x: x is not None, (lookup(i) for i in count(1))) 
```

如果你不喜欢`takewhile`任何原因：

```
for i in count(1):
     res = lookup(i)
     if res is None: break
     yield res 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T13:16:23.743

无需进入`itertools`...

```
i = 1
res = lookup(i)
while res is not None:
    i += 1
    yield res
    res = lookup(i) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-28T13:22:09.557

`itertools.count`可以无限计数：

```
for i in itertools.count(1):
    res = lookup(i)
    if res is None: break
    yield res 
```

# python - 如何使 absolute_import 在所有模块中成为默认值

> ID：10785223
> 
> 赞同：5
> 
> 时间：2012-05-28T13:10:18.860
> 
> 标签：python, import, python-2.7

在网上阅读后，我注意到有人承诺 Python 2.7 将使用绝对导入作为默认值。但是似乎并非如此，我们仍然必须使用

```
from __future__ import absolute_import 
```

我不希望我的代码使用一些遗留设置，所以我想确保所有模块都启用了这个。如何做到这一点，而不必在每个模块中重复此语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:28:48.090

`from __future__`导入必须首先完成，并且是特定于模块的。如果没有在所有模块中实际使用该行，就没有简单的方法让它对所有模块生效。

我相信您可以使用`grep`（如果没有，请自己动手）告诉您哪些模块中*没有*该行。

如果您想以艰难的方式做到这一点，请查看其中一个[`importlib`](http://docs.python.org/library/importlib.html?highlight=importlib#importlib)，或替换[`__import__`](http://docs.python.org/library/functions.html#__import__). 使用这两种方法中的任何一种，您都可以打开`.py`文件，插入

```
from __future__ import absolute_import 
```

行（如果还没有的话），然后进行实际的导入。但是，请注意不要将该行添加到您自己的模块之外的其他模块中，因为您无疑会从期望相对导入语义的模块中得到错误。

# c++ - 我可以使用带有 Visual Studio 2012 的 Windows 8 操作系统创建带有 GUI 的完整 Vista win32 应用程序吗？

> ID：10785228
> 
> 赞同：0
> 
> 时间：2012-05-28T12:18:27.867
> 
> 标签：c++, windows-8, 32bit-64bit, visual-studio-2012

编辑： 使用 Visual Studio 11 在 Windows 8 操作系统上支持使用 c++ 编程 Win32 应用程序，以后该应用程序可以在 Windows Vista 上运行（或带有 GUI 的完整的 win32 应用程序）（并远离 WinRT）？

我之前曾这样写过这个问题：我可以使用 Visual Studio 11 和 PacktPub “Microsoft Visual C++ Windows Applications by Example”一书来使用 Windows 8 OS 创建应用程序（或带有 GUI 的完整 win32 应用程序）（并远离 WinRT）以后可以在 Windows Vista 64 位或 32 位上运行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T13:19:11.623

你可以——如果你付钱的话。Express 版本已绝育。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T13:47:45.830

是的，有可能。

注意不要使用/链接到新的 Win8 apis/features/libraries（Msdn 提供了每个 api 的最低要求）。

默认情况下，要运行您的应用程序，您还需要在 Win7/Vista 机器上安装新的 VC 11 运行时。但是这个要求可以通过创建静态链接选项来消除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T13:41:32.473

是的。计划平台的更多细节在这里：http: [//blogs.msdn.com/b/visualstudio/archive/2012/05/18/a-look-ahead-at-the-visual-studio-11-product-阵容和平台支持.aspx](http://blogs.msdn.com/b/visualstudio/archive/2012/05/18/a-look-ahead-at-the-visual-studio-11-product-lineup-and-platform-support.aspx)。

> 为了帮助您利用最新功能，使用 Visual Studio 11 创建的应用程序的默认目标将设置为 .NET Framework 4.5（用于托管应用程序）和 VC11 工具集（用于本机应用程序）。两者都将允许您的应用程序在 Windows Vista 和更高版本上运行。

# python - 如何在 python 中为 iso-8859-15 转换标准化 unicode 编码？

> ID：10785231
> 
> 赞同：4
> 
> 时间：2012-05-28T13:10:47.893
> 
> 标签：python, unicode, encoding, utf-8, iso-8859-15

我想将 unicode 字符串转换为 iso-8859-15。这些字符串包括`u"\u2019"`（右单引号参见[http://www.fileformat.info/info/unicode/char/2019/index.htm](http://www.fileformat.info/info/unicode/char/2019/index.htm)）字符，它不是 iso-8859-15 字符集的一部分。

在 Python 中，如何规范化 unicode 字符以匹配 iso-8859-15 编码？

我查看了 unicodedata 模块但没有成功。我设法完成这项工作

```
s.replace(u"\u2019", "'").encode('iso-8859-15') 
```

但我想找到一种更通用、更清洁的方法。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T13:25:28.120

使用 unicode 版本的[`translate`](http://docs.python.org/library/stdtypes.html#str.translate)函数，假设`s`是一个 unicode 字符串：

```
s.translate({ord(u"\u2019"):ord(u"'")}) 
```

unicode 版本的参数`translate`是 dict 将 unicode 序数映射到 unicode 序数。将您无法在目标编码中编码的其他字符添加到此 dict 中。

您可以以更具可读性的形式构建映射表并从中创建映射字典，例如：

```
char_mappings = [(u"\u2019", u"'"),
                 (u"`", u"'")]
translate_mapping = {ord(k):ord(v) for k,v in char_mappings} 
```

* * *

来自翻译文档：

> 对于 Unicode 对象， translate() 方法不接受可选的 deletechars 参数。相反，它返回 s 的副本，其中所有字符都已通过给定的转换表映射，该转换表必须是 Unicode 序数到 Unicode 序数、Unicode 字符串或无的映射。未映射的字符保持不变。映射到 None 的字符被删除。请注意，更灵活的方法是使用 codecs 模块创建自定义字符映射编解码器（参见 encodings.cp1251 示例）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-28T13:34:42.587

除非您希望创建翻译规则（如果您这样做，请查看 Boud 的答案），您可以选择`encode`提供的默认错误处理程序之一，甚至注册您自己的：

```
In [4]: u'\u2019 Hi'.encode('iso-8859-15', 'replace')
Out[4]: '? Hi'

In [5]: u'\u2019 Hi'.encode('iso-8859-15', 'ignore')
Out[5]: ' Hi'

In [6]: u'\u2019 Hi'.encode('iso-8859-15', 'xmlcharrefreplace')
Out[6]: '&#8217; Hi' 
```

从`encode`文档字符串：

> S.encode([encoding[,errors]]) -> 字符串或 unicode
> 
> 使用为编码注册的编解码器对 S 进行编码。encoding 默认为默认编码。可能会给出错误以设置不同的错误处理方案。默认为“严格”，表示编码错误会引发 UnicodeEncodeError。其他可能的值是 'ignore'、'replace' 和 'xmlcharrefreplace' 以及使用 codecs.register_error 注册的可以处理 UnicodeEncodeErrors 的任何其他名称。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-28T14:30:18.277

有关信息，我的最终解决方案：

```
iso885915_utf_map = {
    u"\u2019":  u"'",
    u"\u2018":  u"'",
    u"\u201c":  u'"',
    u"\u201d":  u'"',
}
utf_map = dict([(ord(k), ord(v)) for k,v in iso885915_utf_map.items()])
s.translate(utf_map).encode('iso-8859-15') 
```

感谢您的帮助

# jquery-ui - 模板中的 Knockout jQuery UI 小部件绑定

> ID：10785241
> 
> 赞同：0
> 
> 时间：2012-05-28T13:11:17.093
> 
> 标签：jquery-ui, knockout.js

当使用[jquery-ui 自定义绑定](https://raw.github.com/gist/889400/knockout-jquery-ui-widget.js)将日期选择器添加到文本字段时，它只会在我不使用模板时更新我的​​模型。

[简单的 JSFiddle 问题演示](http://jsfiddle.net/tsmarsh/U5qRF/9/)

**HTML：**

```
<script type="text/html" id="datepicker-template">
        <span data-bind="text: $data"></span>
        <input type="text" data-bind="jqueryui: {widget:'datepicker'}, value: $data">
</script>

<h2>Witout templates</h2>
<div>
    <span data-bind="text: from"></span>
    <input type="text" data-bind="jqueryui: {widget:'datepicker'}, value: from">
    <span data-bind="text: to"></span>
    <input type="text" data-bind="jqueryui: {widget:'datepicker'}, value: to">
</div>
<h2>With template<h2>
<div data-bind="template: {name:'datepicker-template', foreach: dates}"></div> 
```

**JavaScript：**

```
$(function(){
    var ViewModel = function(){
        this.from = ko.observable("from");
        this.to = ko.observable("to");
        this.dates = ko.observableArray([this.from, this.to]);
    };

    var viewModel = new ViewModel();               
    ko.applyBindings(viewModel);
});​ 
```

感觉好像我错过了一些非常简单的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:53:22.260

实际上，在没有 jQueryUI 绑定的简单示例中，该问题是可以重现的。问题与`$data`淘汰模板中的关键字有关。

显然`$data`不能用于模板内的双向绑定。有关一些评论，请参阅[此 Google Groups 线程](https://groups.google.com/group/knockoutjs/browse_thread/thread/929e74437600fb6c/8bc4a3f579383f97?pli=1)：

> 如果你有项目： ["one", "two", "three"] 甚至 [ko.observable("one"), ko.observable("two"), ko.observable("three")] 在一个foreach $data 将是原始值，**此时 KO 无法知道如何写回它。您需要使用具有属性**的对象，以防您需要对值进行读/写访问。

因此，解决此限制的一种方法是为您的日期对象创建一个简单的 ViewModel：

```
var DateViewModel = function (initialValue) {
    this.value = ko.observable(initialValue);
}; 
```

然后在您的主 ViewModel 中，您可以编写：

```
var ViewModel = function() {
    this.dates = ko.observableArray([
        new DateViewModel("from"),
        new DateViewModel("to")
    ]);
}; 
```

你的模板最终会是这样的：

```
<script type="text/html" id="datepicker-template">
    <span data-bind="text: value"></span>
    <input type="text" data-bind="value: value">
</script> 
```

**示例：http:** [//jsfiddle.net/RjEnh/](http://jsfiddle.net/RjEnh/)

# asp.net-mvc - 重定向到另一个控制器中的操作

> ID：10785245
> 
> 赞同：143
> 
> 时间：2012-05-28T13:11:40.077
> 
> 标签：asp.net-mvc, asp.net-mvc-3, c#-4.0, redirecttoaction

我有两个控制器，都称为`AccountController`. 其中一个，让我们调用它`Controller A`，在被`Area`调用`Admin`中，另一个，让我们调用它`Controller B`，不在任何`Area`（我猜这意味着它在默认值`Area`？）。 `Controller B`有一个`action method`叫`Login`. 我有一个`action method`in `Controller A`，它有这条线

```
return RedirectToAction("LogIn", "Account"); 
```

问题是我`404`在执行此行时得到一个，因为尝试重定向到不存在`action`的`Controller A`. 我想打电话给`action method`。`Controller B`这可能吗？

* * *

## 回答 #1

> 赞同：263
> 
> 时间：2012-05-28T13:13:34.527

您可以`area`在`routeValues`参数中提供 。试试这个：

```
return RedirectToAction("LogIn", "Account", new { area = "Admin" }); 
```

或者

```
return RedirectToAction("LogIn", "Account", new { area = "" }); 
```

取决于你瞄准的区域。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-05-28T13:15:03.837

用这个：

```
return RedirectToAction("LogIn", "Account", new { area = "" }); 
```

这将重定向到“全局”区域`LogIn`中控制器中的操作。`Account`

它正在使用这个`RedirectToAction`重载：

```
protected internal RedirectToRouteResult RedirectToAction(
    string actionName,
    string controllerName,
    Object routeValues
) 
```

[**MSDN**](http://msdn.microsoft.com/en-us/library/dd460311.aspx)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-04-01T15:21:16.527

你可以使用这个：

```
return RedirectToAction("actionName", "controllerName", new { area = "Admin" }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-22T08:14:55.620

用这个：

```
 return this.RedirectToAction<AccountController>(m => m.LogIn()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-07T16:20:58.163

[RedirectToRoute()](https://docs.microsoft.com/en-us/dotnet/api/system.web.mvc.controller.redirecttoroute?view=aspnet-mvc-5.2)也可用。此外，更好的方法可能是使用 nameof()，这样您就可以避免在代码库中硬编码字符串。

```
return RedirectToRoute(nameof(AccountController) + nameof(AccountController.Login)); 
```

而且，如果您要重定向到接受参数的端点，请将这些传递。

```
return RedirectToRoute(nameof(Account) + nameof(Account.ChangePassword), new { id = id }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-06T07:08:44.717

尝试切换它们：

```
return RedirectToAction("Account", "Login"); 
```

我试过了，它奏效了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-25T15:34:00.983

这应该工作

```
return RedirectToAction("actionName", "controllerName", null); 
```

# java - Spring HibernateTemplate 会话

> ID：10785249
> 
> 赞同：2
> 
> 时间：2012-05-28T13:11:52.187
> 
> 标签：java, spring, hibernate, caching

我有两个问题：

*   Spring 什么时候关闭 Spring Container 创建的 SessionFactory 类（SessionFactory 是在容器中定义的）？

*   Hibernate 默认维护主缓存。缓存的范围是否仅限于会话或 sessionFactory？我的意思是，主缓存的内存什么时候释放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:29:39.520

> Spring 什么时候关闭 Spring Container 创建的 SessionFactory 类（SessionFactory 是在容器中定义的）？

当您关闭`ApplicationContext`（取消部署 Web 应用程序，正常关闭 JVM 等）时，它会自动完成。当容器关闭时，它会从所有 bean 的接口调用`destroy()`方法。`DisposableBean`其中一种方法定义在`LocalSessionFactoryBean`：

```
public void destroy() {
    this.sessionFactory.close();
} 
```

您根本不必为此烦恼。

> Hibernate 默认维护主缓存。缓存的范围是否仅限于会话或 sessionFactory？我的意思是，主缓存的内存什么时候释放？

“主”缓存称为*一级*缓存，与会话相关联。二级缓存是全局的`SessionFactory`，但是在关闭时它不会被释放，`SessionFactory`因为很可能您正在使用一些外部缓存提供程序，例如[ehcache](/questions/tagged/ehcache "显示标记为“ehcache”的问题")。如果是这种情况，EhCache 也必须关闭以释放该内存。但是如果使用 EhCache 支持，这也应该由 Spring 容器处理。

# 也可以看看

*   [使用 Hibernate + Spring 进行缓存 - 一些问题！](https://stackoverflow.com/questions/5405417)

# macos - Mac OSX 控制台不显示沙盒违规

> ID：10785251
> 
> 赞同：4
> 
> 时间：2012-05-28T13:11:55.627
> 
> 标签：macos, cocoa, app-store, appstore-sandbox

我即将在 Mac AppStore 上发布我的应用程序更新，并想检查沙盒违规情况。使用权利编译我的应用程序并对其进行代码签名......它正在运行，Activity Monitor 确认它正在使用沙盒环境。

我的问题是控制台没有显示任何来自沙盒的行。即使我故意模拟违规行为：比如禁用用户选择的文件读/写访问权限并尝试打开文件，OpenPanel 也永远不会出现（我想沙盒会阻止它），但控制台永远不会显示报告它的行。如果我在控制台中搜索“sandboxd”，我得到的唯一一行是关于未知 POSIXSpawnInterface 的信息。

我的疑问/问题是：

1）（删除！）

2）如果我的应用程序能够做任何我需要它做的事情（我打开 MIDI 输入，所以我必须包含一个临时的异常权限以进行全局访问），这是否意味着我可以使用沙盒，即使控制台是不报告任何违规行为？！

3）我的应用程序通过其应用程序 ID（读起来像 com.company.appname）向系统查询路径来搜索文件（应用程序包），然后我使用 NSBundle 仅检索它的版本。这些操作是否需要临时例外权限才能对 Application 文件夹进行只读文件访问（实际上我不知道确切的路径，因为它取决于用户安装应用程序的位置）？

提前感谢您提供的建议。问候，彼得。

# c# - 在强类型视图中使用 LabelFor 获取“对象不包含 xxx 的定义”

> ID：10785252
> 
> 赞同：1
> 
> 时间：2012-05-28T13:12:01.273
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, visual-studio-2010

当我尝试访问视图时，我的 MVC3 Razor 应用程序 (ASP.NET) 出现问题模型看起来像这样（已删除注释）

```
namespace MvcTest.Models {
        public class ContactMeModel {
        public string From { get; set; }
        public string Subject { get; set; }
        public string Message { get; set; }
    }
} 
```

视图有这样的东西（部分，只是放置给出错误的部分，不会超过那个......

```
@model MvcTest.Models.ContactMeModel
@{
     ViewBag.Title = "test"
}
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <div class="editor-label">
         @Html.LabelFor(model => model.From)
    </div>
} 
```

命名空间是正确的，但智能感知在标记的 .From 部分显示为红色，就好像它无法识别模型一样，但这也适用于工作的视图。

当我访问视图时，出现以下错误：

```
CS1061: 'object' does not contain a definition for 'From' and no extension method 'From' accepting a first argument of type 'object' could be found (are you missing a using directive or an assembly reference?) 
```

这很奇怪，因为 (a) Mvc web 项目具有对包含模型的 DLL 的引用 (b) 整个项目已被清理和重建 (c) 视图中的模型引用具有正确的完全限定模型名称 (d ) 模型类存在 (e) 除了在该视图上运行时没有编译错误。

顺便说一句，错误发生在我有@Html.LabelFor 的*任何地方*，因此例如股票 LogOn.cshtml 有一行产生相同的错误：

```
@Html.LabelFor(m => m.UserName) 
```

在“intellisense”中，我看到“用户名”文本带有一条锯齿形红线下划线，并且 intellisense 提到了同样的错误。但是，如果在同一页面上，我将 @model 行悬停在模型名称上并执行“转到定义”VS 将我带到定义。所以，它知道模型是什么，但不完全知道？！如果模型命名空间不正确，我在选择“转到定义”时会收到“导航”错误。

控制器操作方法如下所示：

```
 public ActionResult Contact()
    {
        return View(new Coralys.PanamaVibes.Mvc.Models.ContactMeModel());
    } 
```

所以是的，它返回正确的模型而不是匿名类型。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T21:55:36.800

花了一整天的时间在互联网上搜索和研究。我比较了我的旧解决方案和新解决方案，找到了罪魁祸首。

事实证明，除了内容和背后的一些其他代码的差异之外，主要区别在于，在损坏的解决方案中，我实现了一个**自定义 webviewpage**！这是在我顿悟的时候想到的。所以这让我想到了下一个问题，为什么它只破坏强类型视图，却能够导航到模型？

简单的答案是，自定义网页浏览页面由普通版本和通用版本组成。通用版本用于强类型视图。

我检查了我从@haacked 在他的博客上的贡献中增强的自定义网页视图。该博客上最后的评论之一是一个人（马修）使用强类型视图并遇到同样的问题。因此，解决方案是修改自定义 webviewpage 的通用版本，以便它不是从自定义非通用版本继承，而是从 WebViewPage 继承。然后所有强类型视图再次工作，CS1061 错误消失了。

我还强烈推荐@hatchet 的提示，以在 Release 版本中启用 BuildViews（而不是在 Debug 中，因为它延长了重建阶段）。

自定义 WebViewPage 的示例虽然在发布时已损坏，但**非常**有用，现在我可以创建自己的助手，而不会过度拥挤 Html 和 Url 助手。奇怪的是，当我寻找类似的东西时，他的文章是唯一真正涉及在 MVC3 中制作自定义助手问题的文章。

# extjs4 - 如何限制extjs中textarea的一行中的最大字符数？

> ID：10785253
> 
> 赞同：1
> 
> 时间：2012-05-28T13:12:07.037
> 
> 标签：extjs4, textarea, extjs4.1

我正在使用 extjs **Ext.form.field.TextArea (xtype: textareafield, textarea)**。我想将一行中的最大字符数限制为 50。
我正在使用它来动态地将选项添加到单选组，即每一行都将作为单独的选项添加到单选组。

如何限制 textarea 的一行中的字符？我在 jQuery 和纯 HTML 中找到了一些答案，但我正在寻找一种 extjs 方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-04T09:05:20.423

为 textareafield设置**maxlength**。

```
 {
                xtype: 'textareafield',
                name: 'user_message',
                id: 'user_message',
                height:150,
                maxLength : 50,
                margin:'5 10 22 10',
                fieldLabel: "Message"
            } 
```

# windows-phone-7 - 在 Bing Maps Windows Phone 7 中编辑路线：应用内或 BingMapsDirectionsTask

> ID：10785254
> 
> 赞同：0
> 
> 时间：2012-05-28T13:12:10.653
> 
> 标签：windows-phone-7, bing-maps

我想在 Windows Phone 7.1 中编辑地图的路线。

当前功能：自定义 bing 地图控件要求两个点并使用以下方法绘制路线：http: [//msdn.microsoft.com/en-us/library/ee681887.aspx](http://msdn.microsoft.com/en-us/library/ee681887.aspx)

试图从 BingMaps 网络界面模仿这些功能。

1.  基于起点和终点的路线 ![基于起点和终点的路线](../Images/8a11f9becd53a67247870d38acee1d28.png)

2.  路线变更开始 ![路线变更开始](../Images/a1b0c3765095fdc75e8d7a1ef1b92f08.png)

3.修改后的最终路线 ![在此处输入图像描述](../Images/c61c7a000fb8be189731925b1e9121de.png)

应用程序中的当前功能：

GestureListener 附加到包含路线的添加的地图层 -->( 监听 Drag Start , DragCompleted) Map Pan 事件 --> 如果地图层被拖动，则禁用地图缩放效果

尝试在 Bing 地图中模拟拖动和更改路线的等效效果，能够更新图层。

问题：仅在高缩放级别下实现对地图图层拖动的精确控制。

实际上，当尝试模仿 Metro 中的 bingMaps Web 控件功能时，UI 中的精美感觉就会丢失。

因此，考虑替代方式，例如：-

此功能是否可以通过 BingMapsDirectionsTask 在打开 bingMaps 后将回调返回给应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:26:16.440

在 BingMapsTask 或 BingMapsDirectionsTask 中可配置的内容很少。它们也是启动器而不是选择器，因此在您从它们返回到您的应用程序后不要返回任何内容。

你试图做的几乎是一个矛盾。您正在尝试从很远的距离进行小的调整。
我想知道尝试这样做是否有任何价值。能够放大的价值在于能够看到您所追求的细节和准确性。

这几乎就像在握着长刷的末端询问如何精细地绘画一样。你就是不会。您将使用适当的工具来完成这项工作，并按照预期的方式使用它并适合“手头”的任务。

显然，我还没有看到您正在尝试构建的应用程序以及您希望用户如何与之交互。
当您尝试与不准确的输入设备（手指）进行细粒度交互时，它确实为我敲响了警钟。
我还预计，如果在小屏幕、移动设备上提供此类功能真的有价值，那么用户可能会有一个学习曲线。我鼓励您尽早与真实用户进行测试，看看他们如何使用该设备以及如何调整体验，以便用户能够尽快获得他们想要的结果和行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:54:37.690

没有战争的意图，如果您从牛津到伍尔弗汉普顿，您可能采取顺时针或逆时针路线绕伯明翰 M40、M42、M5 或顺时针 M40、M42、M6 艾尔斯伯里到多佛，绕 M25 走哪条路？大规模的路线选择。用户可能（首先）熟悉 Google Maps 或 Bing Maps，两者都提供此功能。这就是我们前进的方向。如果您在地图上没有路线的部分移动手指，则地图会平移。如果您的手指“越过”一条路线，那么该路线就会移动，而与地图比例无关。

![伯明翰周边路线](../Images/aa38a83af14588e889622a6b6c2e1ac5.png)

# actionscript-3 - 如何将事件侦听器添加到符号而不是实例 as3

> ID：10785258
> 
> 赞同：1
> 
> 时间：2012-05-28T13:12:28.317
> 
> 标签：actionscript-3, flash, addeventlistener

我们有一个按钮符号，它在多个场景中作为实例重复插入。这个按钮在场景之间链接，基本上执行相同的功能。

有没有办法将 eventListener MouseEvent.CLICK 添加到符号本身，这样我们就不必为每个场景中的每个实例重新编写一个监听器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:27:54.363

Create a class, ie 'LinkingButton'. Inside this class create a click handler which would do what you want.

Then you will need to 'link' your class to the symbol in your library.

If done correctly you only will need to drag the symbol to the stage and it should work straight away. Or if you prefer to use the code it's simple, too:

```
var myButton:LinkingButton = new LinkingButton();
addChild(myButton); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:40:07.517

您既不能在符号（即 a `Class`）上接收鼠标事件，也不能从中分派任何事件。所以这是不可能的。

您可以创建一个新的 Sprite 符号，将您的自定义 Button 放入其中，然后在该 Sprite 内部的框架脚本中添加一个侦听器 - 但这真的很麻烦。

最干净的方法是在舞台上添加 Event.ADDED 的监听器 - 每当`DisplayObject`在显示列表中的任何位置添加任何新实例时都会捕获该监听器 - 并让处理程序函数将适当的监听器添加到您的每个特殊实例按钮：

```
 function onInstanceAdded( event:Event ) : void {
     if( event.target ) is MySpecialButton
         event.target.addEventListener( MouseEvent.CLICK, onSpecialButtonClick );
 }

 function onSpecialButtonClick( event:MouseEvent ) : void {
     doMagicStuffHere();
 }

 stage.addEventListener( Event.ADDED, onInstanceAdded ); 
```

# database - 从 Oracle 数据库中读取数据并将它们放入 Java JTable

> ID：10785259
> 
> 赞同：0
> 
> 时间：2012-05-28T13:12:35.210
> 
> 标签：database, oracle, jtable

我创建了一个由 5 列和 0 行组成的 JTable，最初，我没有数据，但我将进行查询，例如：

```
Select f1,f2,f3,f4,f5
From Users; 
```

当我要使用`while(rset.next())`等`rset.getString(1)`...

我应该在每个 .next() 上创建一行并将值放入其中吗？如何创建行？有更好的解决方案吗？

# asp.net - 如何在gridview中为动态列添加小计

> ID：10785260
> 
> 赞同：0
> 
> 时间：2012-05-28T13:12:48.267
> 
> 标签：asp.net, gridview

如何在gridview中为动态列添加小计

```
region  customer 01-feb-2012 02-feb-2012 ...... 29-feb-2012 Total
chennai xxx               10          20                       30
        yyy               10                                   10
        Total             20          20                       40
mumbai  aaa               20                                   20
        bbb                           10                       10
        Total             20          10                       30 
```

列数取决于所选月份中的天数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:37:19.783

我建议您不要在网格视图中计算它，而是在数据表级别执行它，而不是将数据表与网格视图绑定，因为在网格视图中执行它会使它变得复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T17:41:31.577

我已经为你提供了示例代码...

在您的代码中引用此代码，它将动态计算总值。使用 DataRowBound 属性，它的工作...

ASP 代码：

```
<asp:GridView ID="grdBoardingListReport" runat="server" CellPadding="2" ForeColor="#333333" GridLines="Both" AutoGenerateColumns="false" ShowFooter="false">
<AlternatingRowStyle BackColor="White" ForeColor="#284775" />
<EditRowStyle BackColor="#999999" />
<FooterStyle BackColor="#c5c5c5" Font-Bold="True" HorizontalAlign="Right" />
<HeaderStyle CssClass="clsReportGridHeader" BackColor="#c5c5c5" Font-Size="10"/>
<PagerStyle BackColor="#39afd9" ForeColor="White" HorizontalAlign="Center"/>
<Columns>
<asp:BoundField DataField="Sl.No" HeaderText="slno" />
<asp:BoundField DataField="fd_name" HeaderText="Name" />
<asp:BoundField DataField="fd_total" HeaderText="Total"/>
</Columns>
<RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
<SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
</asp:GridView> 
```

代码绑定：

```
private void bindFreePassReport()
{
if (!(Session["FreePassReceive"] == null))
{
DataTable freePassReceive = (DataTable)Session["FreePassReceive"];

if (freePassReceive.Rows.Count > 1)
{
grdFreePassReport.DataSource = freePassReceive;
grdFreePassReport.DataBind();
lblTitle.Text = Session["FreePassReportTitle"].ToString();
}
else
{
grdFreePassReport.DataSource = null;
grdFreePassReport.DataBind();
}
}
} 
```

数据行绑定：

```
int Total;
protected void grdBordingPlace_RowDataBound(object sender, GridViewRowEventArgs e)
{
if (e.Row.RowType == DataControlRowType.DataRow)
{
total += Convert.ToInt32(e.Row.Cells[2].Text);
}
else if (e.Row.RowType == DataControlRowType.Footer)
{
e.Row.Cells[1].Text = "Total" + " : ";
e.Row.Cells[2].Text = total.ToString();
}
} 
```

# objective-c - 使用 *.nib 文件显示模式窗口

> ID：10785265
> 
> 赞同：1
> 
> 时间：2012-05-28T13:13:00.073
> 
> 标签：objective-c, macos, cocoa

我有首选项窗格应用程序，需要使用特定的 nib 文件显示模式窗口。

我使用方法：

```
[NSBundle loadNibNamed:@"___NibName___" owner:self]; 
```

没关系，但窗口不是模态的（我可以访问首选项窗格窗口）。

我应该点什么来使这个窗口模态化（用户不应该有权访问首选项窗格窗口，直到当前窗口不会关闭）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T18:46:17.107

Easiest way to do and manage afterwards: create a new NSWindowController, set this class as File's owner in your custom nib/xib, connect the window outlet to your window within the nib/xib, get the window reference by first creating an instance of your class and then using

```
NSWindow *window = instance.window; 
```

Then run it modal with NSApplication's

```
runModalForWindow: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:27:25.827

如果你在`iOS`：

如果要将其显示为模式，则必须有一个单独的视图控制器来管理该 nib 文件。一旦你有了那个视图控制器的一个实例，用这个来展示它：

```
 aViewControllerClasss *sampleView= [[aViewControllerClasss alloc] initWithNibName:@"___yournibname___" bundle:nil];
 //set any variables of the new view controller(such as delegate) here, before you present it. 
 [self presentModalViewController:sampleView animated:YES];
 [sampleView release]; 
```

# c - 是否可以仅将参数发送到一个函数（在 DLL 中），而其他函数（在 DLL 中）将知道该参数的值？

> ID：10785267
> 
> 赞同：0
> 
> 时间：2012-05-28T13:13:01.993
> 
> 标签：c

我从 DLL 导出函数，它们都需要相同的参数（数字`N`（整数））。DLL 函数总是以相同的顺序从 LabVIEW 中调用 ( `initialization`, `calculation` `clean up`)

是否可以只设置`N`一次参数？我的意思是将它发送到`initialization`并以某种方式将其导出到其余功能？所以没有必要`N`手动发送到所有函数。

```
extern "C" __declspec(export) void initialization( int N ){
  do initialization with N
}

extern "C" __declspec(export) void calculation(){
  I would like to use N here but keep calculation()
}

extern "C" __declspec(export) void clean_up(){
  I would like to use N here but keep clean_up()
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:14:23.503

您可以将变量设为全局变量，从`initialization`方法中设置它，然后在其他方法中检索它。

您可以通过声明它`extern`并在单个`.c`文件中定义它来做到这一点。

# mediawiki - 安装了 PHP 5.3.2 的 MediaWiki 上的 FCKeditor

> ID：10785269
> 
> 赞同：0
> 
> 时间：2012-05-28T13:13:13.570
> 
> 标签：mediawiki, fckeditor

尝试为 MediaWiki 安装*FCKEditor*扩展。按照官方网站上的说明 - 从 svn 获取副本。

之后 - 将其包含到***LocalSettings.php***中：

**require_once("$IP/extensions/FCKeditor/FCKeditor.php");**

比我在尝试打开我的 Wiki 时遇到的错误：

```
Magic word 'NORICHEDITOR' not found

Backtrace:
#0 /usr/share/mediawiki/includes/MagicWord.php(244):     Language->getMagic(Object(MagicWord))
#1 /usr/share/mediawiki/includes/MagicWord.php(197): MagicWord->load('NORICHEDITOR')
#2 /var/lib/mediawiki/extensions/FCKeditor/FCKeditor.body.php(79):     MagicWord::get('NORICHEDITOR')
#3 [internal function]: FCKeditor_MediaWiki::onParserBeforeInternalParse(Object(Parser), '<div class='noa...', Object(StripState))
#4 /usr/share/mediawiki/includes/Hooks.php(117): call_user_func_array(Array, Array)
#5 /usr/share/mediawiki/includes/parser/Parser.php(870): wfRunHooks('ParserBeforeInt...', Array)
#6 /usr/share/mediawiki/includes/parser/Parser.php(327): Parser->internalParse('<div class='noa...')
#7 /usr/share/mediawiki/includes/Article.php(3557): Parser->parse('<div class='noa...', Object(Title), Object(ParserOptions), true, true, 0)
#8 /usr/share/mediawiki/includes/Article.php(989): Article->outputWikiText('<div class='noa...', false)
#9 /usr/share/mediawiki/includes/Wiki.php(450): Article->view()
#10 /usr/share/mediawiki/includes/Wiki.php(63): MediaWiki->performAction(Object(OutputPage), Object(Article), Object(Title), Object(User), Object(WebRequest))
#11 /usr/share/mediawiki/index.php(116): MediaWiki->initialize(Object(Title), Object(Article), Object(OutputPage), Object(User), Object(WebRequest))
#12 {main} 
```

我已经安装了 MediaWiki 1.15.1、PHP 5.3.2。

我找到了一些有关此 PHP 版本问题的信息，但找不到解决方案。

扩展名：[www.mediawiki.org/wiki/Extension_talk:FCKeditor_(官方)](http://www.mediawiki.org/wiki/Extension_talk%3aFCKeditor_%28Official%29)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T17:52:19.180

看起来您的扩展版本与您的 MediaWiki 版本不兼容。[在这里](https://www.mediawiki.org/wiki/Special%3aExtensionDistributor/FCKeditor)选择一个正确的版本。此外，您应该知道您的 MW 已经过时并且没有收到重要的安全更新，并且 FCKeditor 已被其开发人员抛弃。

# facebook - 喜欢页面墙上的帖子

> ID：10785272
> 
> 赞同：0
> 
> 时间：2012-05-28T13:13:31.310
> 
> 标签：facebook, api

我一直在搜索，但找不到答案：

使用我的应用程序，页面管理员可以将帖子发布到他的页面。我现在正在寻找一种方法来允许用户通过我的应用程序点赞帖子，从而使页面上帖子的点赞数实际上增加。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T13:35:29.440

根据[Post 对象的 Likes 连接](http://developers.facebook.com/docs/reference/api/post/#likes)：

> 您可以通过向具有 publish_stream 权限的 POST_ID/likes 连接发出 HTTP POST 请求来点赞帖子

您需要向`publish_stream`您的用户请求权限，然后您可以（JS 示例）：

```
FB.api("POST_ID/likes", function(response) {
    console.log("Like response: ", response);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:36:35.887

您可以通过 Graph API 通过使用具有`publish_stream`权限的访问令牌向 graph.facebook.com/POST_ID/likes 连接发出 HTTP POST 请求来点赞帖子。在此处阅读有关此内容的更多信息： [https ://developers.facebook.com/docs/reference/api/post/#likes](https://developers.facebook.com/docs/reference/api/post/#likes)

# php - MySQL 链接 2 个 id，其中一个是 auto_increment

> ID：10785278
> 
> 赞同：1
> 
> 时间：2012-05-28T13:13:44.900
> 
> 标签：php, sql, insert

好吧，我发现了一些可以完美运行但看起来很难看的东西是否可以在一个查询中执行此操作？

```
 $query = "INSERT INTO page(page_name, page_weight)
              VALUES('".mysql_real_escape_string($_POST['name'])."', '".mysql_real_escape_string($_POST['weight'])."')";
    $result = mysql_query($query);

    $query2 = "SELECT page_id FROM page WHERE page_id = (SELECT MAX(page_id)  FROM page)";
    $result2 = mysql_query($query2);
    while($row = mysql_fetch_assoc($result2))
    {
        $query3 = "INSERT INTO content(page_id, content_type)
                   VALUES('".$row['page_id']."', '".mysql_real_escape_string($_POST['type'])."')";
        $result3 = mysql_query($query3);
    } 
```

页面中的 page_id 是自动递增的，但内容中的 page_id 不是，是否可以以任何方式链接它们？

**编辑：**

谢谢 PLB 现在我有这个了

```
 $query = "INSERT INTO page(page_name, page_weight)
                VALUES('".mysql_real_escape_string($_POST['name'])."', '".mysql_real_escape_string($_POST['weight'])."')";
    $result = mysql_query($query);

    $query3 = "INSERT INTO content(page_id, content_type)
                VALUES('".mysql_insert_id()."', '".mysql_real_escape_string($_POST['type'])."')";
    $result3 = mysql_query($query3); 
```

是否可以进行 1 次查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:27:11.673

`mysql_insert_id();`返回最后插入的 id。使用它，您可以像这样删除选择查询：

```
 $query = "INSERT INTO page(page_name, page_weight)
                VALUES('".mysql_real_escape_string($_POST['name'])."', '".mysql_real_escape_string($_POST['weight'])."')";
    $result = mysql_query($query);

        $query3 = "INSERT INTO content(page_id, content_type)
                    VALUES('".mysql_insert_id()."', '".mysql_real_escape_string($_POST['type'])."')";
        $result3 = mysql_query($query3); 
```

但我建议停止使用`mysql_*`函数并尝试`mysqli_*`或`PDO`

# java - 在Android下合并两张图片，一张对另一张透明

> ID：10785279
> 
> 赞同：0
> 
> 时间：2012-05-28T13:13:46.767
> 
> 标签：java, android, android-image

我有一个 android 项目来处理图像，我有两个图像，我想将一个覆盖在另一个之上（混合）。要组合这两个图像，它有点简单，使用画布上的绘图：我使用了以下代码：

```
public static Bitmap overlay(Bitmap bottomImg, Bitmap topImg) {
    Bitmap bmOverlay =   Bitmap.createBitmap(bottomImg.getWidth(),bottomImg.getHeight(),bottomImg.getConfig());
    Canvas canvas = new Canvas(bmOverlay);
    canvas.drawBitmap(bottomImg, new Matrix(), null);
    canvas.drawBitmap(topImg, 0, 0, null);
    return bmOverlay;
} 
```

它工作得很好，但它不会操纵重叠图像的透明度。实际上，我希望顶部图像是透明的，以便查看它与底部图像的匹配程度。这是访问 alpha 通道或手动完成的事情，有人可以帮我完成这项任务。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-28T13:21:44.250

你可以试试 ：

```
topImg.eraseColor(Color.TRANSPARENT); 
```

这会将所有像素设置为透明。

# android - 登录方向更改

> ID：10785280
> 
> 赞同：0
> 
> 时间：2012-05-28T13:13:51.107
> 
> 标签：android, facebook, facebook-android-sdk

我有 android 登录对话框的问题。我不想`android:configChanges="keyboardHidden|orientation"`在 Manifest 中设置参数，因为这不是很好的 android 编程习惯。另一方面，在没有应用程序的情况下改变方向。在这种情况下有什么好的解决方案或替代方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:07:18.080

这是一个旧线程，但我确实有类似的问题，也不想设置`android:configChanges`. 我基本上将问题归结为`onSaveInstance(Bundle outstate)`. 显然，呼叫`Session.saveSession()`正在死去，因为无论出于何种原因，我的捆绑包都不能“序列化”......

# android - Android：RES目录下文件前缀的标准除了ic_？

> ID：10785281
> 
> 赞同：18
> 
> 时间：2012-05-28T13:13:53.503
> 
> 标签：android, android-layout, android-resources

任何人都知道 RES 目录中是否有我们需要使用（或建议使用）的标准前缀列表。ie Android 推荐 ic_ 用于图标，这很棒，我正在关注它。

但是徽标、按钮图像、导航图像等呢？

我真的很想知道其他人是否存在以及其他人正在使用什么

提前致谢

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-28T13:20:31.630

对图标资产使用通用命名约定

尝试命名文件，以便相关资产在按字母顺序排序时在目录中组合在一起。特别是，它有助于为每种图标类型使用公共前缀。例如：

```
Asset Type                   Prefix            Example
Icons                         ic_                ic_star.png
Launcher icons                ic_launcher        ic_launcher_calendar.png
Menu  and Action Bar icons    ic_menu            ic_menu_archive.png
Status bar icons              ic_stat_notify     ic_stat_notify_msg.png
Tab icons                     ic_tab             ic_tab_recent.png
Dialog icons                  ic_dialog          ic_dialog_info.png 
```

为设计师查看此链接[提示](http://developer.android.com/guide/practices/ui_guidelines/icon_design.html#design-tips)

# c# - 将巨大的 sql 转储文件拆分为尽可能小的块

> ID：10785283
> 
> 赞同：1
> 
> 时间：2012-05-28T13:13:59.403
> 
> 标签：c#, mysql

我正在尝试使用 C# 将巨大的 SQL 文件（超过几 GB）上传到远程 mysql 服务器。

有没有标准的方法；

1.  开始将 SQL 文件读入内存
2.  一旦我们有可用的东西就停止
3.  执行那个位
4.  从内存中删除该位
5.  阅读下一个可用部分
6.  等等。

还是我必须自己编写正则表达式或其他东西？文件太大，无法一口气读入内存。

**一个 sql 文件的开始**（如果它有帮助的话）

```
-- MySQL dump 10.13  Distrib 5.1.49, for debian-linux-gnu (x86_64)
--
-- Host: localhost    Database: qqqq
-- ------------------------------------------------------
-- Server version   5.1.49-3

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Current Database: `qqqq`
--

CREATE DATABASE /*!32312 IF NOT EXISTS*/ `qqqq` /*!40100 DEFAULT CHARACTER SET latin1 */;

USE `qqqq`;

--
-- Table structure for table `config`
--

DROP TABLE IF EXISTS `config`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `config` (
  `name` varchar(200) NOT NULL,
  `value` varchar(200) NOT NULL,
  `timestamp` int(11) NOT NULL,
  UNIQUE KEY `name` (`name`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `config`
--

LOCK TABLES `config` WRITE;
/*!40000 ALTER TABLE `config` DISABLE KEYS */;
INSERT INTO `config` VALUES ('someConfigValue','324',0),('someConfigValue2','27',0),('someConfigValue3','0',0);
/*!40000 ALTER TABLE `config` ENABLE KEYS */;
UNLOCK TABLES; 
```

我想我不能每次都拆分它 a ; 发生，因为其中一个也可能在文本字符串中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T13:24:52.580

当您通过`mysqldump`实用程序创建此转储时，我建议您**转储部分**. 以下是部分转储的一些技巧。

### 按表拆分

如果您有很多表，您可以按表拆分转储过程

```
mysqldump database table1 > table.sql
mysqldump database table2 table3 > table2-3.sql 
```

### 按行拆分

如果有些表有数百万行，则可以在转储时将其按行拆分。假设您有一个表`bigtable`并且它有一个自动列`id`，以下 2 个命令将其拆分为奇偶编号的自动列。

```
mysqldump --where="id%2=1" database bigtable  > bigtable_part1.sql
mysqldump --where="id%2=0" database bigtable  > bigtable_part2.sql 
```

如果不存在自动列，则需要依赖其他启发式方法。

```
mysqldump --where="gender='M'" database users  > users_male.sql
mysqldump --where="gender='F'" database users  > users_female.sql 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:18:21.087

尝试寻找常见的断点，或可以安全分割 SQL 文件的类似位置。例如：

```
--
-- (command here)
-- 
```

似乎用来表示一个“重要”命令，它出现在一个操作块之前。您可以尝试将其拆分为每个`--\n--`常见的“安全点”，因为应该在查询中转义换行符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T13:21:42.890

您可以尝试在内存中加载一些 SQL，然后使用“ [SET PARSEONLY ON](http://msdn.microsoft.com/en-us/library/ms178629.aspx) ”在服务器上执行它。如果解析成功，则尝试执行并继续下一步，如果没有，则加载一小段文本（直到下一个';'）并重试。

当然，它解析好并不意味着它会执行好，但我假设你已经对失败的执行进行了错误处理，对吧？:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-26T10:21:37.977

我有一个类似的问题，我最终做的是使用系统拆分命令拆分 sql 文件。

拆分 -l 1000 import.sql 拆分文件

以上将每1000行拆分sql文件。

希望这可以帮助某人。

# xcode - 有没有办法让 Xcode 像 Apple 的示例代码一样自动对齐变量名？

> ID：10785284
> 
> 赞同：6
> 
> 时间：2012-05-28T13:14:09.983
> 
> 标签：xcode

Apple 的示例项目除了类型规范/通用代码缩进外，通常还对齐变量名称：

```
 NSUInteger        level;
  double            fadeSpeed;
  CGPoint           ballPosition;
  int               keyOffset; 
```

相对于：

```
 NSUInteger level;
  double fadeSpeed;
  CGPoint ballPosition;
  int keyOffset; 
```

有没有捷径可以做到这一点？（我不知道它会叫什么，否则我可以在文档中搜索它。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T13:57:48.713

听起来您正在寻找[Uncrustify](http://uncrustify.sourceforge.net/)。我自己并没有在愤怒中使用它，但功能列表似乎包括您的要求：

> **特征**
> 
> *   标识代码，对齐括号，分配等
> *   **对齐 '=' 和变量定义**
> *   对齐结构初始化器
> *   对齐 #define 东西
> *   对齐反斜杠换行符
> *   重新格式化评论（一点点）
> *   修复字符间距
> *   在 return 语句中添加或删除括号
> *   在单语句 if/do/while/for 语句上添加或删除大括号
> *   支持嵌入式 SQL 'EXEC SQL' 东西
> *   高度可配置 - 自 0.59 版起有 412 个可配置选项

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T13:56:34.577

流行的漂亮打印机[`uncrustify`](http://uncrustify.sourceforge.net/)至少有十几个不同的可变对齐参数，您可以在其配置文件中指定它们。Tony Arnold 的项目向您展示了如何将其`uncrustify`用作[自动化服务](https://github.com/tonyarnold/Xcode-4-Uncrustify-Automator-Services)（这意味着您可以从 Xcode 或任何其他编辑器访问它）。Robert Payne 建议从可以合并到构建过程中[的 shell 脚本中使用它。](http://robertjpayne.com/post/9092159751/using-uncrustify-directly-in-xcode-4)

我的猜测是，Apple`uncrustify`在发布之前通过或其他一些漂亮的打印机运行它的示例，以便它们都使用通用样式进行格式化。如果您想完全复制 Apple 的风格，可能需要一些麻烦，但至少应该很容易让您的变量声明以您想要的方式对齐。自从我使用所有选项以来已经有一段时间了，但我会先查看`align_var_def_span`、`align_var_def_thresh`和`align_var_def_gap`设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T13:19:12.100

我不知道是否已经有一个快捷方式，但是您可以创建一个程序，它接受一个大字符串作为输入（变量），输出将是这个的对齐版本。编写这个程序应该不会引起太多问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-28T13:32:06.203

Xcode 中没有内置函数可以自动执行此操作，但是您可以轻松地将变量名与`tab`. 您必须`tab`在键入多次后按并对齐到相同的宽度。

# qt - qt 平台插件中的 processEvents 应该做什么？

> ID：10785287
> 
> 赞同：2
> 
> 时间：2012-05-28T13:14:19.073
> 
> 标签：qt, qt5

我正在为 qt 编写一个新的平台插件，我试图了解“processEvents”虚拟方法应该做什么？我的要求是我在文件描述符上接收事件，并且应该将它们转换为 qt gui 事件并将它们传递给 qt。请给个建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T13:25:53.560

从文档[http://qt-project.org/doc/qt-4.8/qcoreapplication.html#processEvents](http://qt-project.org/doc/qt-4.8/qcoreapplication.html#processEvents)：

> 根据指定的标志处理调用线程的所有挂起事件，直到没有更多事件要处理。
> 
> 当您的程序忙于执行长时间操作（例如复制文件）时，您可以偶尔调用此函数。

这可能不是您想要的。根据您对问题的简短描述，在我看来您想要 Linux 的 poll()。[http://linux.die.net/man/2/poll](http://linux.die.net/man/2/poll)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T21:12:28.210

您可以`QSocketNotifier`为此使用 a 。请注意， a`QSocketNotifier`仅在 Unix 系统上采用文件句柄。在 Windows 上，它需要一个特殊的 winsock 句柄，它不是事件对象的通用句柄，也不是文件句柄。不用担心`processEvents`，这与您的问题无关。

# java - 制作链表

> ID：10785288
> 
> 赞同：0
> 
> 时间：2012-05-28T13:14:21.210
> 
> 标签：java, list, reference

我想通过 Eclipse 制作 LinkedList，但我不知道如何制作 LinkedList。首先，我想与int的数据和参考进行比较。但是，我不知道如何比较。

```
package List;

public class DoubleLinkedList 
{
    CellDouble x;
    CellDouble head;//List's head
    public DoubleLinkedList()
    {
        //리스트의 헤더를 할당한다.
        head=new CellDouble(0);
        head.prev=head.next=head;
    }

    public void insertAfter(CellDouble p,int data)
    {
        CellDouble x=new CellDouble(data);
        x.prev=p;
        x.next=p.next;
        p.next.prev=x;
        p.next=x;

    }

    public void insertFirst(int data)
    {
        //List's next to insert
        insertAfter(head.next,data);
    }
    public void insertLast(int data)
    {
        //list's last's next to insert.
        insertAfter(head.prev,data);
    }
    public void removeCell(CellDouble p)
    {

        p.prev.next=p.next;
        p.next.prev=p.prev;
    }

    public Object removeFirst()
    {

        if(isEmpty())
        {
            return null;
        }
        CellDouble cell=head.next;
        removeCell(cell);
        return cell.data;
    }
    public Object removeLast()
    {
        // 요소가 없다면  null 반환
        if(isEmpty())
        {
            return null;
        }
        CellDouble cell=head.prev;
        removeCell(cell);
        return cell.data;       
    }
    public boolean isEmpty()
    {
        return head.next==head;
    }

     public void FindNumber(int data)
     {
         if(x==null)
         {
             insertFirst(data);
         }
         else if(x.data<data)
         {
             insertAfter(x,data);
         }
     }
     public void Findnumber(int data)
     {
         if(x.data==data)
         {
             removeCell(x);
         }
         else if(x.data!=data)
         {
             System.out.println("like this number is nothing");
         }
     }

} 
```

而且，我完成了我的编程。但是，它的结果'List.DoubleLinkedList@8c1dd9'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:24:59.087

[在此处](https://stackoverflow.com/questions/3742168/can-i-use-java-util-linkedlist-to-construct-a-circular-cyclic-linked-list/3742924#3742924)查看我的答案以了解基础知识。列表中的元素必须实现 Comparable，[在此处](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)阅读更多内容。

# php - 如何全局禁用 symfony2 http 缓存？

> ID：10785293
> 
> 赞同：1
> 
> 时间：2012-05-28T13:14:51.837
> 
> 标签：php, symfony, http-caching

我正在开发网站`Symfony2`。

该网站的大多数页面都是高度动态的，因此我遇到了 HTTP 缓存问题。

我发现如果我使用函数`setMaxAge(0)`进行响应，问题就会得到解决，但现在不可能为每个响应设置它。有什么方法可以 `setMaxAge`全局禁用 HTTP 缓存或 0 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:58:52.507

我将这一行添加到`Response`类的构造中：

```
$this->setExpires(new \DateTime('1980-01-01')); 
```

我不认为这是一个好主意，但它确实有效！

# zend-framework - 将视图脚本渲染到变量

> ID：10785301
> 
> 赞同：4
> 
> 时间：2012-05-28T13:15:20.433
> 
> 标签：zend-framework

如何将视图脚本渲染到动作控制器中的变量中？

我想渲染一个视图并将其作为字符串插入到数据库表中。

我正在使用 Zend Framework 1.11

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-28T13:24:32.750

从您的控制器中，您可以执行以下操作：

```
$view = new Zend_View();
$view->some_var = "some_value";
// ... more variable assignments

$output = $view->render('some script'); 
```

然后您可以将 $output 存储在您的数据库中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-18T15:11:39.787

只需使用：

`$output = $this->view->render('controller/action.phtml');`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-01T13:30:09.883

我知道这是一个老问题，但我尝试并想出了一个不同的解决方案：

```
$view = new Zend_View();
$view->some_var = "some_value";
$view->setScriptPath(APPLICATION_ROOT.'/layout/mail/');
$output = $view->render('led_inspira_inscricao_confirmada.phtml');
print_r($output);die; 
```

其中 APPLICATION_ROOT 是您在第一个 php 文件中的真实路径

```
define('APPLICATION_ROOT', realpath(dirname(__FILE__))); 
```

# java - Renderer.instance().render("/myTemplate.xhtml")) 包含 标记导致 Nullpointer 异常

> ID：10785306
> 
> 赞同：0
> 
> 时间：2012-05-28T13:16:17.053
> 
> 标签：java, jsf, seam

我正在尝试在后端呈现一些 html 并返回到 js 脚本进行附加。

**我的模板：**

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:s="http://jboss.com/products/seam/taglib"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"                

                <s:div styleClass="friendActionColumn" rendered="#{not actionDone}">

                    <h:form styleClass="add">

                        <h:commandLink id="addAction"
                                       action="#{action.action()}"
                                       value="#{messages['profile.action']}"
                                       rendered="#{action.isAllowed()}"/>

                    </h:form>
                </s:div>

</ui:composition> 
```

**我的豆子：**

```
@SuppressWarnings({"unchecked"})
@Name("actionBean")
@Scope(ScopeType.CONVERSATION)
@AutoCreate
public class ActionBean implements Serializable {

@Out(required = false)
private JSONObject uploadResult;

public void action() {

        ...Some cool code over here        

        if (this.isAllowedMoreAction(currentPage)) {
            Contexts.getEventContext().set("nextPage", currentPage + 1);
        }

        uploadResult = new JSONObject()
                .put("msg", Renderer.instance().render("/myTemplate.xhtml"));
    }
} 
```

这适用于常规的 html 和 seam 标签，但是当添加`<h:form>`, 或任何 h 标签时，我得到一个 Nullpointer 异常。您能否向我解释一下为什么以及如何解决这个问题！

堆栈跟踪：

```
15:28:09,562 ERROR [Exceptions] handled and logged exception
javax.el.ELException: java.lang.NullPointerException
    at org.jboss.el.util.ReflectionUtil.invokeMethod(ReflectionUtil.java:339)
    at org.jboss.el.util.ReflectionUtil.invokeMethod(ReflectionUtil.java:280)
    at org.jboss.el.parser.AstMethodSuffix.getValue(AstMethodSuffix.java:59)
    at org.jboss.el.parser.AstMethodSuffix.invoke(AstMethodSuffix.java:65)
    at org.jboss.el.parser.AstValue.invoke(AstValue.java:96)
    at org.jboss.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:276)
    at org.jboss.seam.core.Expressions$2.invoke(Expressions.java:175)
    at org.jboss.seam.navigation.Page.preRender(Page.java:311)
    at org.jboss.seam.navigation.Pages.preRender(Pages.java:351)
    at org.jboss.seam.jsf.SeamPhaseListener.preRenderPage(SeamPhaseListener.java:561)
    at org.jboss.seam.jsf.SeamPhaseListener.beforeRenderResponse(SeamPhaseListener.java:472)
    at org.jboss.seam.jsf.SeamPhaseListener.beforeServletPhase(SeamPhaseListener.java:148)
    at org.jboss.seam.jsf.SeamPhaseListener.beforePhase(SeamPhaseListener.java:118)
    at com.sun.faces.lifecycle.Phase.handleBeforePhase(Phase.java:214)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:96)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:266)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:83)
    at org.tuckey.web.filters.urlrewrite.RuleChain.handleRewrite(RuleChain.java:176)
    at org.tuckey.web.filters.urlrewrite.RuleChain.doRules(RuleChain.java:145)
    at org.tuckey.web.filters.urlrewrite.UrlRewriter.processRequest(UrlRewriter.java:92)
    at org.tuckey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFilter.java:381)
    at se.my.web.filter.MyUrlRewriteFilter.doFilter(MyUrlRewriteFilter.java:55)
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    at se.my.web.filter.SmallCaseFilter.doFilter(SmallCaseFilter.java:67)
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    at org.jboss.seam.web.IdentityFilter.doFilter(IdentityFilter.java:40)
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    at se.my.web.filter.UserAgentFilter.wrappedCall(UserAgentFilter.java:92)
    at se.my.web.filter.UserAgentFilter.doFilter(UserAgentFilter.java:78)
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    at se.my.web.filter.MDCFilter.doFilter(MDCFilter.java:61)
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    at org.jboss.seam.web.LoggingFilter.doFilter(LoggingFilter.java:60)
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:73)
    at org.jboss.seam.web.RedirectFilter.doFilter(RedirectFilter.java:45)
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    at org.jboss.seam.web.MultipartFilter.doFilter(MultipartFilter.java:90)
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    at org.jboss.seam.web.ExceptionFilter.doFilter(ExceptionFilter.java:64)
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    at org.ajax4jsf.webapp.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java:206)
    at org.ajax4jsf.webapp.BaseFilter.handleRequest(BaseFilter.java:290)
    at org.ajax4jsf.webapp.BaseFilter.processUploadsAndHandleRequest(BaseFilter.java:388)
    at org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:515)
    at org.jboss.seam.web.Ajax4jsfFilter.doFilter(Ajax4jsfFilter.java:56)
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    at se.my.web.filter.SaveRequestResponseFilter.doFilter(SaveRequestResponseFilter.java:47)
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    at org.jboss.seam.servlet.SeamFilter.doFilter(SeamFilter.java:158)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at se.my.web.filter.DisableUrlSessionFilter.doFilter(DisableUrlSessionFilter.java:89)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:173)
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:182)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:433)
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:104)
    at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:241)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.NullPointerException
    at com.sun.facelets.FaceletViewHandler.writeState(FaceletViewHandler.java:776)
    at org.ajax4jsf.application.ViewHandlerWrapper.writeState(ViewHandlerWrapper.java:114)
    at org.ajax4jsf.application.AjaxViewHandler.writeState(AjaxViewHandler.java:128)
    at com.sun.faces.renderkit.html_basic.FormRenderer.encodeEnd(FormRenderer.java:176)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:861)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:937)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:933)
    at com.sun.facelets.component.RepeatRenderer.encodeChildren(RepeatRenderer.java:50)
    at com.sun.facelets.component.UIRepeat.process(UIRepeat.java:357)
    at com.sun.facelets.component.UIRepeat.encodeChildren(UIRepeat.java:617)
    at org.jboss.seam.ui.util.JSF.renderChild(JSF.java:175)
    at org.jboss.seam.ui.util.JSF.renderChildren(JSF.java:163)
    at org.jboss.seam.ui.facelet.RendererRequest.renderFacelet(RendererRequest.java:140)
    at org.jboss.seam.ui.facelet.RendererRequest.run(RendererRequest.java:107)
    at org.jboss.seam.ui.facelet.FaceletsRenderer.render(FaceletsRenderer.java:43)
    at se.my.friends.FriendsBean.loadUserFriendsAjax(FriendsBean.java:118)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.seam.util.Reflections.invoke(Reflections.java:22)
    at org.jboss.seam.intercept.RootInvocationContext.proceed(RootInvocationContext.java:32)
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:56)
    at org.jboss.seam.core.BijectionInterceptor.aroundInvoke(BijectionInterceptor.java:77)
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
    at org.jboss.seam.core.MethodContextInterceptor.aroundInvoke(MethodContextInterceptor.java:44)
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
    at se.my.utils.timing.TimingInterceptor.timeCall(TimingInterceptor.java:45)
    at sun.reflect.GeneratedMethodAccessor144.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.seam.util.Reflections.invoke(Reflections.java:22)
    at org.jboss.seam.intercept.Interceptor.aroundInvoke(Interceptor.java:187)
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:72)
    at org.jboss.seam.transaction.RollbackInterceptor.aroundInvoke(RollbackInterceptor.java:28)
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
    at org.jboss.seam.bpm.BusinessProcessInterceptor.aroundInvoke(BusinessProcessInterceptor.java:51)
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
    at org.jboss.seam.security.SecurityInterceptor.aroundInvoke(SecurityInterceptor.java:163)
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
    at org.jboss.seam.intercept.RootInterceptor.invoke(RootInterceptor.java:107)
    at org.jboss.seam.intercept.JavaBeanInterceptor.interceptInvocation(JavaBeanInterceptor.java:185)
    at org.jboss.seam.intercept.JavaBeanInterceptor.invoke(JavaBeanInterceptor.java:103)
    at se.my.friends.FriendsBean_$$_javassist_seam_42.loadUserFriendsAjax(FriendsBean_$$_javassist_seam_42.java)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.el.util.ReflectionUtil.invokeMethod(ReflectionUtil.java:335)
    ... 74 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:35:04.000

在 FriendsBean.java:118 有一个空指针。
似乎这就是错误。

> 这适用于常规 html 和 seam 标签，但是在添加 h:form 时

根据我的经验，表格中的表格可能会产生错误。

# android - 在线创建文件 JSON

> ID：10785310
> 
> 赞同：-1
> 
> 时间：2012-05-28T13:16:35.923
> 
> 标签：android, json

我一直在解析 JSON，我想在线创建一个 JSON 文件。网站是否支持在线创建文件 JSON？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:24:29.997

[http://www.jsoneditoronline.org/](http://www.jsoneditoronline.org/)上有一个不错的在线 JSON 编辑器。

请注意，在阅读此问题之前我从未听说过此类工具，因为除了少数特殊情况外，我通常从不手动编写 JSON。JSON首先意味着一种可以很容易地被机器生成和解析的语言。

（我提到的特殊情况是一些配置文件，并使用格式和注释良好的 JSON，因为紧凑的符号绝对不适合人类。）

# vim - vim 不区分大小写的搜索和敏感的替换

> ID：10785311
> 
> 赞同：34
> 
> 时间：2012-05-28T13:16:39.867
> 
> 标签：vim

我有一个文件，里面有这个：

```
test
Test 
```

目前，如果我想用“foo”替换所有“test”，用“Foo”替换“Test”，我必须使用两个命令：

```
:%s/test/foo/g
:%s/Test/Foo/g 
```

有什么方法可以用一个命令完成这个吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-28T13:30:10.223

我认为tim pope 的 这个[vim 插件](https://github.com/tpope/vim-abolish)`%Subvert/{t}est/{f}oo/g`可以解决你的问题，安装它或者`%Subvert/test/foo/g`（感谢你的评论）会解决问题

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-02-09T16:24:07.907

正如我外公常说的，每个插件都有一个同样出色的 vim 单行。尝试

```
%s/\(test\|Test\)/\=submatch(0) =~ '\l.*' ? 'foo' : 'Foo'/g 
```

解释：

`%s/`替换整个缓冲区

`\(test\|Test\)/`匹配“测试”或“测试”

`\=`使替换字符串使用以下表达式的计算结果

`submatch(0)`在这种情况下，计算为整个匹配的表达式

`=~ '\l.*'`正则表达式匹配的字符串比较（针对以小写字母开头的单词）

`... ? 'foo' : 'Foo'`if-then-else 表达式，如果 ... 为真，则为 'foo'，否则为 'Foo'

`/g`在整条线上执行此操作

稍作修改，这应该足以满足我们的需求。参考：

```
:help :s
:help :sub-replace-\=
:help expression 
```

...我只是想对任何试图进入 vim 评估和表达式的人发出一点警告...它们非常违反直觉（我来自 C++ 背景，也许如果你来自 bash 或 python，那就更少了一个问题）。我发现以下 vimscript 指南/自学课程非常有帮助：[http ://learnvimscriptthehardway.stevelosh.com/](http://learnvimscriptthehardway.stevelosh.com/)

# java - 从 2012 年 1 月 1 日到 2012 年 1 月 1 日的日期格式转换 inv java？

> ID：10785318
> 
> 赞同：0
> 
> 时间：2012-05-28T13:17:04.970
> 
> 标签：java, android, date

我想在代码中将日期格式从`1-1-2012`To转换。`1 January 2012`谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T13:19:27.013

您可以使用`SimpleDateFormat`.

[http://developer.android.com/reference/java/text/SimpleDateFormat.html](http://developer.android.com/reference/java/text/SimpleDateFormat.html)

[http://www.exampledepot.com/egs/java.text/formatdate.html](http://www.exampledepot.com/egs/java.text/formatdate.html)

```
String pattern="dd/MMMM/yyyy"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T13:23:24.297

仔细阅读这个类... [java中的SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)

```
 String DateTime="1-1-2012";

        SimpleDateFormat dateFormat = new SimpleDateFormat(
                "dd-MM-yyyy");
        Date myDate = null;
        try {
            myDate = dateFormat.parse(DateTime);
        } catch (ParseException e) {
            e.printStackTrace();
        }

        SimpleDateFormat timeFormat = new SimpleDateFormat("d MMMMM yyyy");
        String finalDate = timeFormat.format(myDate);

        System.out.println(finalDate); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T13:26:45.530

您首先将输入字符串解析为日期，然后将其格式化为首选格式：

```
String inputDateString = "15-1-2012";
DateFormat dfFrom = new SimpleDateFormat("dd-MM-yyyy");
Date inputDate = dfFrom.parse(inputDateString);

DateFormat dfTo = new SimpleDateFormat("d MMMM yyyy");
String outputDate = dfTo.format(inputDate); 
```

[**运行解决方案。**](http://ideone.com/qvwJU)

此外，如果您需要本地化输出日期，[SimpleDateFormat 的构造函数](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html#SimpleDateFormat%28java.lang.String,%20java.util.Locale%29)支持自定义语言环境。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T13:45:12.307

试试这个工作

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main); 

        setCurrentDateOnView();
        addListenerOnButton();
    } 
    // display current date
    public void setCurrentDateOnView() {

        tvDisplayDate = (TextView) findViewById(R.id.tvDate);
        dpResult = (DatePicker) findViewById(R.id.datepicker);                  

        final   Calendar c = Calendar.getInstance();                
        year = c.get(Calendar.YEAR);
        month = c.get(Calendar.MONTH);           
        day = c.get(Calendar.DAY_OF_MONTH);             

    //  set current date into textview
        tvDisplayDate.setText(new StringBuilder()
    //  Month is 0 based, just add 1
        .append(month+1).append("-").append(day).append("-")
        .append(year).append(" "));

        tvDisplayDate = (TextView) findViewById(R.id.tvDate);   
        // set current date into datepicker
        dpResult.init(year, month, day, null);
    }       
    public void addListenerOnButton() {         
        btnChangeDate = (Button) findViewById(R.id.btnChangeDate); 
        btnChangeDate.setOnClickListener(new OnClickListener() {     
            public void onClick(View v) { 
                showDialog(DATE_DIALOG_ID);
            }
        });
    }       
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case DATE_DIALOG_ID:
            // set date picker as current date
            return new DatePickerDialog(this, datePickerListener,year, month,day);
        }
        return null;
    } 
    private DatePickerDialog.OnDateSetListener datePickerListener = new DatePickerDialog.OnDateSetListener() {           

        // when dialog box is closed, below method will be called.
        public void onDateSet(DatePicker view, int selectedYear,int selectedMonth, int selectedDay) {   

            Calendar c = Calendar.getInstance();                    
            c.set(selectedYear, selectedMonth, selectedDay);
            year = selectedYear;
            month = selectedMonth;               
            day = selectedDay;      

            string=c.getDisplayName(c.MONTH, LONG, Locale.US);  

            tvDisplayDate.setText(new StringBuilder()
               //     Month is 0 based, just add 1
                    .append(string).append("-").append(day).append("-")
                    .append(year).append(" "));                         

            // set selected date into datepicker also
            dpResult.init(year, month, day, null);
        }
    };  
} 
```

xml文件

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" > 
<Button
    android:id="@+id/btnChangeDate"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Change " /> 
<TextView
    android:id="@+id/lblDate"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Current Date (MM-DD-YYYY): "
    android:textAppearance="?android:attr/textAppearanceLarge" />

<DigitalClock
    android:id="@+id/digitalClock1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:textAppearance="?android:attr/textAppearanceLarge"/>

<TextView
    android:id="@+id/tvDate"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text=""
    android:textAppearance="?android:attr/textAppearanceLarge" />     

<DatePicker
    android:id="@+id/datepicker"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />        

</LinearLayout> 
```

# wpf - 使用 XAML 清除绑定

> ID：10785321
> 
> 赞同：1
> 
> 时间：2012-05-28T13:17:18.933
> 
> 标签：wpf, xaml, data-binding, triggers

我正在创建一个包含文本框的 wpf 应用程序。当文本框被禁用（默认状态）时，我将它绑定到某些东西，但是当用户双击文本框时，它会将其状态更改为启用并且用户可以对其进行编辑。但是当我在启用文本框后键入内容时，由于触发器（可能是 ui 正在更新并且触发器与他一起），它每秒都会被删除。当我使用代码并在双击后清除绑定时，它工作正常。但我不想通过代码来完成，我知道我只是缺少一点让 XAML 工作的东西。

这是我当前的 XAML：

```
<Style.Triggers>

    <Trigger Property="TextBox.IsEnabled" Value="False">

        <Setter Property="Text" Value="{Binding some binding}"/>

    </Trigger>

    <Trigger Property="TextBox.IsEnabled" Value="True">

        <Setter Property="Text" Value="{x:Null}"/>

    </Trigger>

</Style.Triggers> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T13:23:07.540

设置绑定但将其方向更改为 OneWayToSource 是否有帮助？

```
<Style.Triggers>

    <Trigger Property="TextBox.IsEnabled" Value="False">
        <Setter Property="Text" Value="{Binding someBinding}"/>
    </Trigger>

    <Trigger Property="TextBox.IsEnabled" Value="True">
        <Setter Property="Text" Value="{Binding Path=someBinding, Mode=OneWayToSource}"/>
    </Trigger>

</Style.Triggers> 
```

# mysql - 使用具有观察者模式的 JPA 实体还是使用 MySQL 视图？

> ID：10785323
> 
> 赞同：1
> 
> 时间：2012-05-28T13:17:46.003
> 
> 标签：mysql, jakarta-ee, jpa, observer-pattern

我有三个 JPA 实体的 JE66 应用程序。每个 id 都是 Generated.AUT。以下是实体：

1.  **Campaign**（字符串名称）/OneToMany CampaignInterval（双向）
2.  **CampaignInterval**（活动开始日期，活动结束日期）/OneToMany CostInterval(bidir)
3.  **CostInterval**（日期 costIntervaStart、日期 costIntervalEnd、双倍 costIntervalCost）

用户可以在 JSF 页面中输入数据这是一个示例：

*   广告系列名称：谷歌广告
*   活动间隔：[01.05.2012 / 31.08.2012]
*   成本间隔 1：[10.05.2012 / 20.05.2012/ 2000 €]
*   CostInterval 2: [01.08.2012 / 07.08.2012, 700 €]

数据保存在 MySQL 数据库 CAMPAIGN、CAMPIAGN_INTERVAL 和 COST_INTERVAL 中。最终用户希望在 MySQL 中有一个 DAILY_COST 表，其中包含列 [CampaignName, DailyDate, DailyCost] 对于上面的示例。**DAILY_COST 表将有 17 行**：

*   第 1 行 [谷歌广告，2012 年 5 月 10 日，200 欧元]
*   第 2 行 [谷歌广告，2012 年 5 月 11 日，200 欧元]
*   排 ....
*   第 10 行 [谷歌广告，2012 年 5 月 20 日，200 欧元]
*   第 11 行 [谷歌广告，01.08.2012，100 欧元]
*   排 ...
*   第 17 行 [谷歌广告，2012 年 8 月 7 日，100 欧元]

**问题是如何创建 DAILY_COST 表？**

我可以使用带有第四个 JPA 实体 (DailyCost) 的观察者设计模式作为计算和创建 [CampaignName, DailyDate, DailyCost] 的 ObserverClass 还是应该使用 MySQL 视图从现有的 3 个 JPA 实体表中创建 DAILY_COST 表？

我是 MySQL 新手，我不知道如何创建视图 :-)。我非常感谢每个答案，可能是代码视图示例或良好教程的链接。

非常感谢

# search - 有人配置过 apache solr FieldReaderDataSource 吗？

> ID：10785324
> 
> 赞同：0
> 
> 时间：2012-05-28T13:17:47.503
> 
> 标签：search, solr, datasource

我有一个包含 xml 的数据库列，我想在该列中使用 apache solr 内容进行索引，我有以下 data-config.xml （配置）。数据库名称为“solrdb”，列名称为“xmlfield”，似乎有问题，错误在底部指定。

```
<dataConfig>
        <!--Data source to connect to database-->
        <dataSource 
            name="XmlDocDS" 
            type="JdbcDataSource" 
            driver="com.mysql.jdbc.Driver" 
            url="jdbc:mysql://127.0.0.1/solrdb" 
            user="root" 
            password="root" /> 
        <!-- Data Source for getting xml columne data-->    
        <dataSource 
            name="solrFieldReaderDS" 
            type="FieldReaderDataSource"/>
        <document>
            <entity 
                name="xmltable"
                rootEntity="false"
                datasource="XmlDocDS"
                query="select xmlfield from xmltable">
                <field column="xmldata" blob="true" />
                <entity 
                    name="page" 
                    dataSource="solrFieldReaderDS" 
                    dataField="xmltable.xmldata"                 
                    processor="XPathEntityProcessor"             
                    forEach="/page"> 
                    <field column="id" xpath="/mediawiki/page/id"/> 
                    <field column="Title" xpath="/mediawiki/page/title"/> 
                </entity> 
            </entity>
        </document>
</dataConfig> 
```

错误如下：

```
SEVERE: Exception while processing: xmltable document : null:org.apache.solr.handler.dataimport.DataImportHandlerException: Unable to execute query: select xmlfield from xmltable Processing Document # 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:00:17.853

在这部分 JDBC 导入器代码中抛出错误：

```
try {
    Connection c = getConnection();
    stmt = c.createStatement(ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_READ_ONLY);
    stmt.setFetchSize(batchSize);
    stmt.setMaxRows(maxRows);
    LOG.debug("Executing SQL: " + query);
    long start = System.currentTimeMillis();
    if (stmt.execute(query)) {
      resultSet = stmt.getResultSet();
    }
    LOG.trace("Time taken for sql :"
            + (System.currentTimeMillis() - start));
    colNames = readFieldNames(resultSet.getMetaData());
  } catch (Exception e) {
    wrapAndThrow(SEVERE, e, "Unable to execute query: " + query);
  } 
```

所以连接或查询可能会出错（数据库有问题吗？）。还有“执行 SQL”和“sql 所用时间：”的 grep 日志

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:33:46.677

there was an error in connection, for some reason it was nto able to connect to my local machine, i changed the database host and it connected!, the problem is that I have the configuration in place and FieldReaderDataSource seems to work fine, but now when it completes everything it says documents indexed/updated = 0

here is my xml configuration

```
<dataSource
        name="jdbcDataSource"
        driver="com.mysql.jdbc.Driver"
        url="xxxx"
        user="yyyy"
        password="zzzz" readOnly="true"/>

        <dataSource 
            name="solrFieldReaderDS" 
            type="FieldReaderDataSource"/>
        <document>
            <entity
                name="tabledata"
                dataSource="jdbcDataSource"
                query="select codeID,codeText from ArticlePoolState where codeID=3">
                <entity 
                    name="xmldata" 
                    dataSource="solrFieldReaderDS" 
                    forEach="/med"
                    dataField="tabledata.codeText"               
                    processor="XPathEntityProcessor"> 
                    <field column="title" xpath="/title"/> 
                </entity>
            </entity>
        </document> 
```

The query is fine.

# css - 如何选择所有单元格等

> ID：10785325
> 
> 赞同：2
> 
> 时间：2012-05-28T13:17:49.123
> 
> 标签：css, html-parsing, nokogiri

如果这是非常基本的，请原谅。我一直在尝试遍历每个单元格，包括行数组中的*标题单元格。*我可以在 Nokogiri CSS 选择器中使用 OR 运算符吗？

```
thang= Nokogiri::HTML(IO.read "|cat page.html").css('table[@id="costbasisTable"] tr') 
```

正确获取所有行，包括标题行（在后续页面上重复）：

```
thang[0].inner_html
=> <th class="tLeft"></th><th>cellA2</th><th>cellA3data</th>

thang[1].inner_html
=> <td>cellB1</td><td>cellB2</td><td>cellB3data</td> 
```

问题在于以下内容，如果该行仅包含**th**而不是**td** ，则可能返回空白：

```
N=0
thang[N].css("td").map{|c| c.text.strip.gsub(/\t.*/,"").delete ",".tr("&/|:;\n","_")}.to_a 
```

**.css(...)**的哪个参数意味着“匹配任何`<td>`OR`<th>`单元格”？

对于这些 Nokogiri XML 元素，使用**.xpath()**是否可能/更好地完成？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T05:10:07.257

您想使用以下任一项：

```
# thang[n] is a Nokogiri <tr> node
cells = thang[n].css('th,td')
cells = thang[n].xpath('./th | ./td') 
```

请注意，CSS 版本将匹配任何嵌入的表（如果您有这样的恐惧），而 XPath 版本将仅匹配该行的直接子代。

# java - Sensor Driver 中的统一接口

> ID：10785326
> 
> 赞同：0
> 
> 时间：2012-05-28T13:17:52.197
> 
> 标签：java, design-patterns

在我目前的项目中，我正在尝试为所有传感器驱动程序制作统一的接口。

例如，`Temperature sensor`有一个温度传感器驱动程序可以从中获取数据。

现在，我的问题是每个传感器响应都有自己的数据对象。我写了以下温度传感器的例子。如何使传感器驱动程序接口统一，所以程序员应该只知道 SensorResonse（不是`TempSensorResponse`）。

```
public class TempSensor implements Sensor {

    /**
     * Returns a SensorInfo object that describes this sensor.
     */
    @Override
    public TempSensorInfo getSensorInfo() {
        // TODO Auto-generated method stub
        return null;
    }

    /**
     * Asks the sensor for a (possibly old) datapoint. Synchronous: returns
     * immediately, even if that means returning an old value.
     */
    @Override
    public TempResponse getData() {
        // TODO Auto-generated method stub
        return null;
    }

    /**
     * Asks the sensor for a new datapoint. Asynchronous.
     *
     * @param handler A Handler object to be executed when the sensor has a
     * new value. If this Sensor is event-based, this method starts listening
     * for data, and calls the handler whenever new events are detected.
     */
    @Override
    public void getData(SensorListener handler) {
        // TODO Auto-generated method stub

    }

} 
```

/** * SensorResponse 是传感器在被要求提供某些数据时传递给它的被调用者的响应。它携带传感器数据本身 * 一些关于它的元数据，例如产生此响应的传感器的 SensorInfo *。*/

```
public class TempResponse extends SensorResponse {

    public TempResponse(TempSensorInfo sensorInfo, TempSensorData payload) {
        super(sensorInfo, payload);
        // TODO Auto-generated constructor stub
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T13:36:51.873

使用泛型：

制作接口/基类。

```
public interface ISensor 
    <I extends ISensor.SensorInfo, 
     R extends ISensor.SensorResponse, 
     L extends ISensor.SensorListener> 
{

    /**
    * Returns a SensorInfo object that describes this sensor.
    */
    public I getSensorInfo();

    /**
    * Asks the sensor for a (possibly old) datapoint. Synchronous: returns
    * immediately, even if that means returning an old value.
    */
    public R getData();

    /**
    * Asks the sensor for a new datapoint. Asynchronous.
    * 
    * @param handler
    *            A Handler object to be executed when the sensor has a new
    *            value. If this Sensor is event-based, this method starts
    *            listening for data, and calls the handler whenever new events
    *            are detected.
    */
    public void getData(L handler);

    public static class SensorInfo { }
    public static class SensorResponse { }
    public static class SensorListener { }
} 
```

让您的传感器实现/扩展接口/类：

```
public class TemperatorSensor 
    implements ISensor 
        <TemperatorSensor.TemperatorInfo, 
         TemperatorSensor.TemperatorResponse, 
         TemperatorSensor.TemperatorListener> 
{

    @Override
    public TemperatorInfo getSensorInfo() {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public TemperatorResponse getData() {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void getData(TemperatorListener handler) {
        // TODO Auto-generated method stub
    }

    public static final class TemperatorInfo extends ISensor.SensorInfo { }
    public static final class TemperatorResponse extends ISensor.SensorResponse { }
    public static final class TemperatorListener extends ISensor.SensorListener { }
} 
```

不使用泛型：

基础接口/类

```
public interface ISensor {

    /**
     * Returns a SensorInfo object that describes this sensor.
     */
    public ISensor.SensorInfo getSensorInfo();

    /**
     * Asks the sensor for a (possibly old) datapoint. Synchronous: returns
     * immediately, even if that means returning an old value.
     */
    public ISensor.SensorResponse getData();

    /**
     * Asks the sensor for a new datapoint. Asynchronous.
     * 
     * @param handler
     *            A Handler object to be executed when the sensor has a new
     *            value. If this Sensor is event-based, this method starts
     *            listening for data, and calls the handler whenever new events
     *            are detected.
     */
    public void getData(ISensor.SensorListener handler);

    public static class SensorInfo { }
    public static class SensorResponse { }
    public static class SensorListener { }
} 
```

扩展接口/类

```
public class TemperatorSensor implements ISensor {

    @Override
    public SensorInfo getSensorInfo() {
        // TODO Auto-generated method stub
        return new TemperatorInfo();
    }

    @Override
    public SensorResponse getData() {
        // TODO Auto-generated method stub
        return new TemperatorResponse();
    }

    @Override
    public void getData(SensorListener handler) {
        if (handler instanceof TemperatorListener) {
            // TODO Auto-generated method stub
        }
    }

    public static final class TemperatorInfo extends ISensor.SensorInfo { }
    public static final class TemperatorResponse extends ISensor.SensorResponse { }
    public static final class TemperatorListener extends ISensor.SensorListener { }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:20:47.390

除了 Sensor 类层次结构之外，您很可能还必须创建 SensorResponse 类层次结构。getData() 方法（应在 Sensor 基类中定义）将被定义为返回 SensorResponse 的实例。

# facebook - 尝试回发时获取 Oauth 异常

> ID：10785333
> 
> 赞同：0
> 
> 时间：2012-05-28T13:18:20.633
> 
> 标签：facebook, facebook-graph-api, oauth, facebook-c#-sdk, facebook-comments

我正在尝试回复关于墙/时间线的评论。[如果我使用https://graph.facebook.com/me/permissions?access_token=ACCESS_TOKEN](https://graph.facebook.com/me/permissions?access_token=ACCESS_TOKEN)（示例）检查我拥有的权限，我会得到这个返回：

```
{
   "data": [
      {
         "installed": 1,
         "read_stream": 1,
         "status_update": 1,
         "photo_upload": 1,
         "video_upload": 1,
         "email": 1,
         "create_note": 1,
         "share_item": 1,
         "publish_stream": 1,
         "publish_actions": 1
      }
   ]
} 
```

哪个说我有 publish_stream/actions - 如果我正确阅读了文档，那么这就是我所需要的吗？我可以在墙上发表新评论但不能回复。

我得到的异常是“（OAuthException）（＃200）需要publish_stream权限或需要扩展权限：publish_actions”

我是否需要其他东西才能回复帖子，它说我需要我已经拥有的权限。

谢谢

编辑：

Facebook SDK C#

```
public bool ReplyToPost(string objId, string message)
        {
            FacebookClient client = new FacebookClient(GetAccessToken());

            IDictionary<string, object> param = new Dictionary<string, object>();
            param.Add(new KeyValuePair<string, object>("message", message));
            //744590031_10151761424915032 -- Test Obj.
            dynamic r = client.Post(string.Format("{0}/comments", objId), param);

            return true;
        } 
```

我知道一旦我的应用程序被授予权限，它应该始终拥有它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T16:11:21.180

在您的代码中，您是否发布了`objId`as `744590031_10151761424915032`？

尝试仅使用 objId 的最后一部分调用应用程序，例如`/10151761424915032/comments`，然后看看它是否有效。

# android - Simpe Android JUnit 测试在 Eclipse 中挂起

> ID：10785335
> 
> 赞同：5
> 
> 时间：2012-05-28T13:18:26.193
> 
> 标签：android, eclipse, unit-testing, junit

我一直在关注关于 Android 测试的书并实现了这个示例：

```
public class TemperatureConverterActivityTests extends
        ActivityInstrumentationTestCase2<TemperatureConverterActivity> {

    private TemperatureConverterActivity mActivity;

    private EditText mCelsius;
    private EditText mFarenheit;

    public TemperatureConverterActivityTests() {
        this("TemperatureConverterActivityTests");
    }

    public TemperatureConverterActivityTests(String name) {
        super(TemperatureConverterActivity.class);
        setName(name);
    }

    protected void setUp() throws Exception {
        super.setUp();
        mActivity = getActivity();

        mCelsius = (EditText) mActivity
                .findViewById(org.mighter.tc.R.id.celsius);
        mFarenheit = (EditText) mActivity
                .findViewById(org.mighter.tc.R.id.farenheit);
    }

    protected void tearDown() throws Exception {
    }

    public final void testPreconditions() {
        assertNotNull(mActivity);
    }

    public final void testHasInputFields() {
        assertNotNull(mCelsius);
        assertNotNull(mFarenheit);
    }

} 
```

但是，测试并没有完成。

我在控制台中得到的：

```
Android Launch!
adb is running normally.
Performing android.test.InstrumentationTestRunner JUnit launch
Automatic Target Mode: Several compatible targets. Please select a target device.
Uploading TemperatureConverterTest.apk onto device '80A358103041548074'
Installing TemperatureConverterTest.apk...
Success!
Project dependency found, installing: TemperatureConverter
Application already deployed. No need to reinstall.
Launching instrumentation android.test.InstrumentationTestRunner on device 80A358103041548074
Collecting test information
Test run failed: Instrumentation run failed due to 'Process crashed.'
Test run finished
Sending test information to Eclipse
Running tests... 
```

然后它挂起，这是 JUnit 视图：

![在此处输入图像描述](../Images/9fb4789a3e73bfeafb5a3500581c4fb5.png)

来自 LogCat 的唯一信息：

```
05-28 17:23:54.952: W/ActivityManager(224): Crash of app org.mighter.tc running instrumentation ComponentInfo{org.mighter.tc.test/android.test.InstrumentationTestRunner}
05-28 17:23:55.042: I/TestRunner(7174): <!>android.test.TestPrinter 50<!> started: testHasInputFields(org.mighter.tc.test.TemperatureConverterActivityTests)
05-28 17:23:55.062: I/TestRunner(7174): <!>android.test.TestPrinter 56<!> finished: testHasInputFields(org.mighter.tc.test.TemperatureConverterActivityTests)
05-28 17:23:55.062: I/TestRunner(7174): <!>android.test.TestPrinter 77<!> passed: testHasInputFields(org.mighter.tc.test.TemperatureConverterActivityTests)
05-28 17:23:55.072: I/TestRunner(7174): <!>android.test.TestPrinter 50<!> started: testPreconditions(org.mighter.tc.test.TemperatureConverterActivityTests)
05-28 17:23:55.082: I/TestRunner(7174): <!>android.test.TestPrinter 56<!> finished: testPreconditions(org.mighter.tc.test.TemperatureConverterActivityTests)
05-28 17:23:55.082: I/TestRunner(7174): <!>android.test.TestPrinter 77<!> passed: testPreconditions(org.mighter.tc.test.TemperatureConverterActivityTests)
05-28 17:23:55.652: I/TestRunner(7194): <!>android.test.TestPrinter 50<!> started: testHasInputFields(org.mighter.tc.test.TemperatureConverterActivityTests)
05-28 17:23:55.853: I/TestRunner(7194): <!>android.test.TestPrinter 56<!> finished: testHasInputFields(org.mighter.tc.test.TemperatureConverterActivityTests)
05-28 17:23:55.853: I/TestRunner(7194): <!>android.test.TestPrinter 77<!> passed: testHasInputFields(org.mighter.tc.test.TemperatureConverterActivityTests)
05-28 17:23:55.853: I/TestRunner(7194): <!>android.test.TestPrinter 50<!> started: testPreconditions(org.mighter.tc.test.TemperatureConverterActivityTests) 
```

尝试调试，但从未达到 testPreconditions()。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:57:02.877

只需要在 tearDown(); 中调用 super

# mysql - Toad for Mysql Server - 连接到远程主机时出现错误握手错误

> ID：10785337
> 
> 赞同：2
> 
> 时间：2012-05-28T13:18:41.180
> 
> 标签：mysql, sql, toad, ssh-keys

我无法使用 Toad 连接到我的远程服务器并收到错误握手错误。

现在我知道这是因为服务器上的 ssh 公钥已更改，但我找不到在 Toad 中配置的位置以及如何删除该密钥。

有人会知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-28T21:18:39.670

1）如果你可以连接到服务器管理员的cpanel，将你的ip添加到mysql远程列表中，在mysql remote下。请记住，如果您没有静态 ip，当您的 isp 更改您的 ip 时，这可能会突然停止工作

2) 检查并确保您拥有正确的 mysql 服务器地址。在 cpanel 中，这通常位于左侧。我的被​​列为 box999.bluehost.com （或类似的东西）

3) 确保您的防病毒软件没有阻止连接。

4) 确保您的 sql 客户端启用了 mysql 库。

# javascript - 在 div 中添加 css border-right

> ID：10785352
> 
> 赞同：0
> 
> 时间：2012-05-28T13:20:06.220
> 
> 标签：javascript, jquery, css

如何`css border-right`使用 javascript 在特定位置后添加。以这个为例：

```
<div id="test"></div>

<style>
  #test {
    background-color : red;
    height : 30px;
    width : 200px;
  }
</style> 
```

我们可以使用 javascript 添加 css 样式，但如果我想在`css border-right`之后添加`100px`，`#test`那么我该怎么做。在示例[http://jsfiddle.net/zUxmd/1/](http://jsfiddle.net/zUxmd/1/)中，我使用 javascript 添加了 css 边框，但如果我想在特定之后添加它，`px value`我该怎么做。任何帮助都会很棒。

**更新：** 我有以下`div`结构

```
<div id=test>
 <div id="1"></div>
 <div id="2"></div>
<div> 
```

`#1`和的宽度`#2`在 javascript 中计算，宽度的总和设置为`#test`. 现在假设如果总宽度是`188px`我想在视觉上区分哪里`100px`就像演示[http://jsfiddle.net/zUxmd/2/](http://jsfiddle.net/zUxmd/2/)准备的一样`tom`。这是否可能以任何方式就像在该位置添加标记一样。但我不想添加任何额外的虚拟 div。

**编辑：** 演示[http://jsfiddle.net/davidThomas/zUxmd/7/](http://jsfiddle.net/davidThomas/zUxmd/7/)`david`正是我想要的。任何更好的想法将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T13:29:09.817

好的，一个元素的边框出现在该元素的*边框*上。表示该`border`元素的最外边界，因此它不能出现*在*元素本身内，也不能与它出现的元素边的长度不同。

但是，也就是说，您可以通过伪元素笨拙地模仿您想要`addClass()`的东西：`::after`

CSS：

```
#test.amended {
    width: 100px;
    position: relative;
    border-right: 2px solid blue;
}
​#test.amended::after {
    content: '';
    position: absolute;
    top: 0;
    left: 102px;
    bottom: 0;
    display: inline-block;
    width: 98px;
    background-color: red;
}​ 
```

jQuery：

```
$(document).ready(function(){
    $('div').addClass('amended');
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/zUxmd/3/)。

* * *

**编辑**添加一个...*凌乱*（未优化）纯粹演示（和不推荐）的 JavaScript 解决方案：

```
function borderAt(el, pos) {
    if (!el || !pos) {
        return false;
    }
    else {
        var pos = parseInt(pos, 10), // ensures a valid number (though there should be a sanity-check too)
            w = el.clientWidth,
            h = el.clientHeight,
            nEl = document.createElement('div'),
            pEl = document.createElement('div');

        // adds a new 'parent' element to contain the elements
        el.parentNode.appendChild(pEl);

        // assigns the width of the specified 'el' element
        pEl.style.width = w + 'px';

        // appends the 'el' element to its new parent
        pEl.appendChild(el);
        nEl.style.backgroundColor = 'red';

        // so the new sibling appears side-by-side
        nEl.style.display = 'inline-block';

        /* calculates the width required by the new-sibling element
          in order to maintain visual continuity with the previous width */
        nEl.style.width = w - (pos + 2) + 'px';
        nEl.style.height = h + 'px';
        el.style.borderRight = '2px solid blue';
        el.style.width = pos + 'px';
        el.style.display = 'inline-block'; // so the 'el' element appears side-by-side with its new sibling

        // inserts new sibling after the 'el' element within its parent.
        el.parentNode.insertBefore(nEl, el.nextSibling);
    }
}

var el = document.getElementById('test');
borderAt(el, '160px');​ 
```

[JS Fiddle 概念验证](http://jsfiddle.net/davidThomas/zUxmd/7/)。

参考：

*   [`document.createElement()`](https://developer.mozilla.org/en/DOM/document.createElement).
*   [`element.clientHeight`](https://developer.mozilla.org/en/DOM/element.clientHeight).
*   [`element.clientWidth`](https://developer.mozilla.org/en/DOM/element.clientWidth).
*   [`node.appendChild()`](https://developer.mozilla.org/en/DOM/element.appendChild).
*   [`node.insertBefore()`](https://developer.mozilla.org/en/DOM/Node.insertBefore).
*   [`node.nextSibling`](https://developer.mozilla.org/en/DOM/Node.nextSibling).
*   [`parseInt()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T13:23:13.980

您可以使用 CSS 渐变和色标来*模拟这一点。*

演示：[http ://dabblet.com/gist/2819172](http://dabblet.com/gist/2819172)

请记住，将需要 IE 的替代方案 - 请参阅[CSS 渐变支持](http://caniuse.com/#feat=css-gradients)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T13:38:34.977

你所期待的是不可能***的***。你可以做以下技巧

**HTML：**

```
<div class="wrapper">
    <div id="test"></div>
</div> 
```

**CSS：**

```
#test{
 background-color:red;
 height: 30px;
 width: 200px;    
}
.wrapper.bordered {
    width: 300px;
    border-right: 2px solid blue;
} 
```

**jQuery：**

```
$(document).ready(function(){
  $('div.wrapper').addClass('bordered');
}); 
```

**[演示 1](http://jsfiddle.net/thecodeparadox/zUxmd/6/)**

要得到结果大卫做什么，你可以尝试：

**HTML：**

```
<div id="test">
    <span class="bordered">&nbsp;</span>
</div> 
```

**CSS**

```
#test{
    background-color:red;
    height: 30px;
    width: 200px;  
    position: relative;       
}
.bordered {
    width: 2px;
    background: blue;
    height: 30px;
    position: absolute;
} 
```

**jQuery：**

```
$(document).ready(function(){
  $('span.bordered').css('left', '100px');
}); 
```

**[演示 2](http://jsfiddle.net/thecodeparadox/eQDpe/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T13:22:27.907

你不能。

边框只能沿着元素的（整个）边缘出现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T13:23:35.747

如果我理解正确，我会添加一个内部 div：http: [//jsfiddle.net/zUxmd/1/](http://jsfiddle.net/zUxmd/1/)

html:

```
<div id="test">
    <div class="inner">
    </div>
</div>​​​​​​​​​ 
```

CSS：

```
#test{
 background-color:red;
 height: 30px;
 width: 200px;    
}
#test .inner {
    height: 100%;
    width: 100px;
} 
```

JS：

```
 $(document).ready(function(){
   $('#test .inner').css('border-right','2px solid blue');
 }); 
```

**更新**

这是使用背景图像的另一种可能性，想法是使用 1px x 1px 蓝点，但我找不到该图像：P

[http://jsfiddle.net/zUxmd/5/](http://jsfiddle.net/zUxmd/5/)

html:

```
<div id="test"></div>​ 
```

CSS：

```
#test{
  background-color:red;
  height: 30px;
  width: 200px;
}
#test.limit {
  background-image: url("http://www.scratchingpostgazette.com/forum/styles/Blue-Crush/theme/images/blue.gif");
  background-repeat: repeat-y;
  background-position: 100px 0;
} 
```

​​​​​​

```
$(document).ready(function(){
  $('#test').addClass('limit');
}); 
```

​</p>

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-28T13:24:51.973

如果你想有多个边框，试试`:after`and `:before`;

```
 #test {  
        background: red;  
        border: 1px solid #bbbbbb;  
        width: 200px;  
        height: 200px;  
        margin: 50px auto;  
        position: relative;  
    }  

    #test:before {  
        border: 1px solid blue;  
        content: '';  
        width: 198px;  
        height: 198px;  
        position: absolute;  
    }  

    #test:after {  
        content: '';  
        position: absolute;  
        width: 196px;  
        height: 196px;  
        border: 1px solid yellow;  
        left: 1px; top: 1px;  
    } 
```

[http://jsfiddle.net/hHxHN/3/](http://jsfiddle.net/hHxHN/3/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-28T13:25:26.150

像这样的东西会产生你正在寻找的效果，但它涉及添加一个额外的元素。

[http://jsfiddle.net/zUxmd/2/](http://jsfiddle.net/zUxmd/2/)

# google-chrome - Web Audio API：seek、play-/buffer-progress

> ID：10785354
> 
> 赞同：3
> 
> 时间：2012-05-28T13:20:30.720
> 
> 标签：google-chrome, html5-audio, web-audio-api

当您使用 Chrome 中的音频元素播放音频时，您会遇到烦人的咔嗒声和破裂声。至少在我的 64 位 Linux 安装下，即使在我格式化并安装了新的 Fedora 版本之后也是如此。（Firefox 和 Opera 都很好，甚至是 VirtualBox Windows 7 中的 IE9。）

但是使用 Web Audio API 而不是音频元素的演示具有完美的声音。所以我想知道我是否可以像音频元素一样使用 Web Audio API？但是有些事情你似乎无法用这个 API 做。还是我错过了什么？我在哪里找不到的东西：

*   在文件完全加载之前开始播放文件
*   获取缓冲区进度更新（取决于上一点）
*   获取播放进度更新
*   寻求

有没有办法使用 Web Audio API 做到这一点？

这是我会使用它的地方：http: [//tinyurl.com/magnatune-player](http://tinyurl.com/magnatune-player)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T03:32:34.520

我认为你至少应该仍然使用`<audio>`流媒体。`MediaElementAudioSourceNode`如果您愿意，可以将其视为网络音频：

```
var mediaSourceNode = context.createMediaElementSource(audioElement); 
```

AFAIK，没有办法直接流式传输网络音频。事实上，网络音频 api 建议您不要：

> 4.9\. 音频缓冲区接口
> 
> 此接口表示内存驻留的音频资产（用于一次性声音和其他短音频剪辑）。其格式为非交错 IEEE 32 位线性 PCM，标称范围为 -1 -> +1。它可以包含一个或多个通道。通常，预计 PCM 数据的长度会相当短（通常略少于一分钟）。**对于较长的声音，例如音乐音轨，应将流式传输与音频元素和 MediaElementAudioSourceNode 一起使用。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T03:58:06.000

除非您使用 a `MediaElementAudioSourceNode`（我假设您会遇到与您遇到的相同问题，因为它只是使用`<audio>`标签）AFAIK，您的问题的答案是：

*   在文件完全加载之前开始播放文件：**否。**
*   获取缓冲区进度更新（取决于上一点）：**可能**（您可以检查 XHR 上的进度事件）
*   获得播放进度更新：**否。**
*   寻求：**没有。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T14:10:18.350

与此同时，Chrome 修复了音频播放问题。所以我不再需要任何解决方法了。

# sql-server-2008 - 嵌套 SELECT 与 SQL Server 2008 中的先前选定值

> ID：10785356
> 
> 赞同：0
> 
> 时间：2012-05-28T13:20:42.223
> 
> 标签：sql-server-2008, sql

我想做一个 SELECT 并从列中获取信息和他的值。我知道我需要访问 *information_schema* 然后我需要在特定行中使用 *column_name* 在内部进行另一个 SELECT 以访问该值。

```
SELECT column_name,
   DATA_TYPE,
   CHARACTER_MAXIMUM_LENGTH,
   (? ... SELECT COLUMN_NAME FROM MYTABLE ... ?)
FROM information_schema.columns
WHERE table_name = 'MYTABLE'
ORDER BY ordinal_position 
```

如何使用行中的列更改 COLUMN_NAME 以获得结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T08:36:43.700

如果你的表中有不止一行，我不知道你想要这个。这适用于只有一行的表格。如果表中有不止一行，它将占用表中的一行。

```
SELECT I.COLUMN_NAME,
       I.DATA_TYPE,
       I.CHARACTER_MAXIMUM_LENGTH,
       (
       SELECT T.X.value('/*[local-name(.)=sql:column("I.COLUMN_NAME")][1]', 'nvarchar(max)')
       FROM 
         (
         SELECT *
         FROM MyTable
         FOR XML PATH(''), TYPE
         ) AS T(X)
       ) AS COLUMN_VALUE
FROM INFORMATION_SCHEMA.COLUMNS AS I
WHERE I.TABLE_NAME = 'MyTable'
ORDER BY I.ORDINAL_POSITION 
```

[SQL小提琴](http://sqlfiddle.com/#!3/2abfe/1/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T09:14:39.000

无论如何，您对如何在 Postgresql 上完成感兴趣：[http ://www.sqlfiddle.com/#!1/dea17/1](http://www.sqlfiddle.com/#!1/dea17/1)

```
create table beatles(firstname text,middlename text,lastname text, age int);

insert into beatles(firstname,middlename,lastname,age)
values('John','Winston','Lennon',40);

select c.column_name, x.arr[c.ordinal_position]
from information_schema.columns c
cross join 
    ( select avals (hstore(b)) as arr from (select * from beatles) as b  ) as x
where c.table_schema = 'public' and c.table_name = 'beatles'
order by c.ordinal_position 
```

输出：

```
| COLUMN_NAME |     ARR |
-------------------------
|   firstname |    John |
|  middlename | Winston |
|    lastname |  Lennon |
|         age |      40 | 
```

现场测试：[http ://www.sqlfiddle.com/#!1/dea17/1](http://www.sqlfiddle.com/#!1/dea17/1)

# c - Posix 正则表达式捕获组匹配序列

> ID：10785361
> 
> 赞同：0
> 
> 时间：2012-05-28T13:21:26.770
> 
> 标签：c, regex

我在 ac 程序中有以下文本字符串和正则表达式模式：

```
char text[] = "        identification     division. "; 
char pattern[] = "^(.*)(identification *division)(.*)$"; 
```

使用 regexec() 库函数，我得到以下结果：

```
字符串：标识划分。
模式：^(.*)(标识*除法)(.*)$
子表达式总数：3

好的，模式已匹配...

开始：0，结束：37，匹配：识别师。
子表达式 1 开始：0，结束：8，匹配：
子表达式 2 开始：8，结束：35，匹配：标识除法
子表达式 3 开始：35，结束：37，匹配：。

```

我想知道，因为正则表达式引擎以贪婪的方式匹配，并且第一个捕获组（。*）匹配任意数量的字符（换行符除外），为什么它不匹配文本字符串中的字符（最多 '.') 而不是只匹配前 8 个空格？

每个捕获组是否必须匹配？

是否有关于捕获组如何匹配文本字符串的规则？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:31:30.927

正则表达式尽可能贪婪，但不会太贪婪。如果左组像你想象的那样贪婪，匹配“标识划分”的组将无法匹配，错误地拒绝`text`，这在语言中很明显。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:31:16.073

正如您所说，如果贪婪组 (.*) 消耗了整个字符串，则正则表达式的其余部分将没有任何可匹配的内容，这不会使您的正则表达式与字符串匹配。所以，是的，每个捕获组（和其他模式部分）都需要匹配。这正是您在正则表达式中指定的内容。

尝试使用以下字符串，并使用不情愿和贪婪的第一组运行代码，您将看到不同之处。

```
char text[] = "    identification  division    identification     division. "; 
```

# android - “强制停止”后，Android 数据库变为空

> ID：10785363
> 
> 赞同：1
> 
> 时间：2012-05-28T13:21:28.810
> 
> 标签：android, sqlite

我有一个问题。“强制停止”后，我的数据库变为空。最初我打开空数据库，然后我正在添加一些数据。然后我在数据库中看到它们，它们可以在程序中看到。但是，如果我重新启动手机或“强制停止”应用程序 - 一切都从头开始。

这是我的DataBaseFactory代码：

```
package com.st.nyam.factories; 
```

公共类数据库工厂 {

```
private SQLiteDatabase db;
private final Context context;
private SD_util sdUtil;
private static String DB_NAME = "nyam_db.db3";
private static String DB_PATH = "/data/data/com.st.nyam/databases/";    
private static String TAG = "DataBaseFactory";
//private final String INSERT_RECEPY = "INSERT into RECEPIES ('id', 'recepy', 'author') VALUES (?, ?, ?)";

private final String SELECT_RECIPES = "SELECT * FROM recipes";
private final String SELECT_RECIPE_BY_ID = "SELECT * FROM recipes WHERE ID = ?";
private final String SELECT_COUNT_RECIPE_BY_ID = "SELECT count(*) FROM recipes WHERE ID = ?";
private final String SELECT_STEPS = "SELECT * FROM steps";
private final String SELECT_TABLES = "SELECT name FROM sqlite_master WHERE type= 'table' ORDER BY name";
private final String SELECT_STEPS_BY_ID = "SELECT * FROM steps where recipe_id = ?";
private final String INSERT_STEP = "INSERT INTO steps ('id', 'recipe_id', 'body', 'photo_file_name') VALUES (?,?,?,?) ";
private final String INSERT_RECIPE = "INSERT INTO recipes ('id', 'title', 'description', 'user_id', 'favorites_by', 'main_photo_file_name') VALUES (?,?,?,?,?,?) ";

public DataBaseFactory(Context ctx) {
    context = ctx;  
    sdUtil = new SD_util();
    SQLiteDatabase temp_db = ctx.openOrCreateDatabase(DB_NAME, Context.MODE_PRIVATE, null);
    temp_db.close();
    try {
        Log.i(TAG, "Copy intenting");
        copyDataBase();
    } catch (IOException e) {
        Log.e(TAG, e.getMessage());
    }
    Log.i(TAG, "Temp created");
    if (db == null) {
        db = SQLiteDatabase.openDatabase(DB_PATH + DB_NAME, null, SQLiteDatabase.OPEN_READWRITE);
    }
    Log.i(TAG, "Temp opened");
}

private boolean checkDataBase() {
    SQLiteDatabase checkDB = null;
    try {
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);
    } catch(SQLiteException e){
        //database does't exist yet.
        e.printStackTrace();
    }
    if(checkDB != null){
        checkDB.close();
    }
    return checkDB != null ? true : false;
}

public void openDataBase() throws SQLException {
    //Open the database
    String myPath = DB_PATH + DB_NAME;
    db = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
}

private void copyDataBase() throws IOException {
    //Open your local db as the input stream
    InputStream myInput = context.getAssets().open("db/" + DB_NAME);

    // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME;

    //Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);

    //transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer))>0){
        myOutput.write(buffer, 0, length);
    }
    Log.i(TAG, "Copy data");
    //Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();
}

public ArrayList<RecipeGeneral> getRecipes() {
    ArrayList<RecipeGeneral> recipes = new ArrayList<RecipeGeneral>();
    Cursor c = db.rawQuery(SELECT_RECIPES, null);
    Log.d(TAG, "getRecipes()");
    if (c != null && c.getCount() > 0) {
        c.moveToFirst();
        do {
            Log.d(TAG, "Getting recipe");
            RecipeGeneral recipe = ModelUtil.getRecipeFromCursor(c);
            recipes.add(recipe);
            Log.d(TAG, "Getting recipe added");
        } while (c.moveToNext());

    }
    c.close();
    return recipes;
}

public ArrayList<Step> getStepsByRecipeId(int recipeId) throws ParseException {
    Log.d(TAG, "In getStepsByRecipe");
    ArrayList<Step> steps = new ArrayList<Step>();
    Cursor c = db.rawQuery(SELECT_STEPS_BY_ID, new String[]{ Integer.toString(recipeId) });
    Log.d(TAG, "Get Query getStepsByRecipe");
    try {
        if (c != null && c.getCount() > 0) {
            c.moveToFirst();
            do {
                Log.d(TAG, "Getting step getStepsByRecipe");
                Step step = ModelUtil.getStepFromCursor(c);
                steps.add(step);
                Log.d(TAG, "Getting step added getStepsByRecipe");
            } while (c.moveToNext());
        }
    } finally {
        if (c != null) {
            c.close();
        }
    }
    c.close();
    return steps;

}

/*
public ArrayList<Step> getSteps() throws ParseException {
    ArrayList<Step> steps = new ArrayList<Step>();
    Cursor c = db.rawQuery(SELECT_STEPS, null);
    if (c != null && c.getCount() > 0) {
        c.moveToFirst();
        do {
            Step step = new Step();
            step.setId(c.getInt(c.getColumnIndex("id")));
            step.setRecipe_id(c.getInt(c.getColumnIndex("recipe_id")));
            step.setBody(c.getString(c.getColumnIndex("body")));
            step.setPhoto_file_name(c.getString(c.getColumnIndex("photo_file_name")));
            step.setPhoto_content_type(c.getString(c.getColumnIndex("photo_content_type")));
            step.setPhoto_file_size(c.getInt(c.getColumnIndex("photo_file_size")));
            step.setPhoto_updated_at(new SimpleDateFormat("yyyy.MM.dd G HH:mm:ss").parse(c.getString(c.getColumnIndex("photo_updated_at"))));
            step.setCreated_at(new SimpleDateFormat("yyyy.MM.dd G HH:mm:ss").parse(c.getString(c.getColumnIndex("created_at"))));
            step.setUpdated_at(new SimpleDateFormat("yyyy.MM.dd G HH:mm:ss").parse(c.getString(c.getColumnIndex("updated_at"))));
            step.setPhoto_processing(c.getInt(c.getColumnIndex("photo_processing")));
            steps.add(step);
        } while (c.moveToNext());
    }
    c.close();
    return steps;
}
*/

public ArrayList<Recipe> fetchRecipesByQuery(String query) throws ParseException {
    ArrayList<Recipe> recipes = new ArrayList<Recipe>();
    Cursor c =  db.query(true, "virt", null, "description " + " Match " + "'*" + query + "*'", null,
            null, null, null, null);
    try{ 
        Log.i(TAG, "Get Query");
        if (c != null && c.getCount() > 0) {
            c.moveToFirst();
            do {
                Log.i(TAG, "Getting recipe");
                //Recipe recipe = ModelUtil.getRecipeFromCursor(c);
                //recipes.add(recipe);
                Log.i(TAG, "Getting recipe added");
            } while (c.moveToNext());
        }
    } finally {
        if (c != null) {
            c.close();
        }
    }
    return recipes;
}

public void addRecipeToFavorites(Recipe recipe, Bitmap bitmap) {
    if (!isRecipeExists(recipe.getId())) {
        ArrayList<Step> steps = recipe.getSteps();
        Log.d(TAG,"Adding  recipe to favorites addRecipeToFavorites()");
        sdUtil.saveRecipeImage(bitmap, recipe.getImg_url());
        db.execSQL(INSERT_RECIPE, new String[] {
            Integer.toString(recipe.getId()), recipe.getTitle(),
            recipe.getDescription(), recipe.getUser(),
            Integer.toString(recipe.getFavorites_by()), recipe.getImg_url()
        });
        for (Step step : steps) {
            Object [] params = new Object[] {step.getImg_url()};
            new DownloadImageStep().execute(params);
            Log.d(TAG,"Adding step to favorites addRecipeToFavorites()");
            addStepToFavorites(step, recipe.getId());
        }
    } else {
        Log.d(TAG,"Recipe already added");
    }
}

public void addStepToFavorites(Step step, int recipe_id) {
    db.execSQL(INSERT_STEP, new String[]{
            Integer.toString(step.getNumber()), Integer.toString(recipe_id),
            step.getInstruction(), step.getImg_url(),
        });

}

/*
public void putRecepy(Recepy recepy) {
    db.execSQL(INSERT_RECEPY, new String[] 
                {Integer.toString(recepy.getId()),
                            recepy.getRecepy(), recepy.getAuthor()});
}
 */

public boolean isRecipeExists(int id) {
    Cursor c = db.rawQuery(SELECT_RECIPE_BY_ID,  new String[] 
            {Integer.toString(id)});
    try {
        Log.d(TAG, "isRecipeExists before c.movetoFirst()");
        if (c.moveToFirst()) {
            if (c != null && c.getCount() > 0) {
                Log.d(TAG, "Checking passed");
                //Recipe recipe = ModelUtil.getRecipeFromCursor(c);
                //Log.d(TAG, "RECIPEExists: "  + recipe.toString());
                return true;
            }
        } 
    } finally {
        if (c != null) {
            c.close();
        }
    }
    return false;
}

private class DownloadImageStep extends AsyncTask<Object,Void,Object> {

    @Override
    protected Object  doInBackground(Object... o) {
        Bitmap outBitmap = null;
        try{   
            sdUtil.saveStepImage((String)o[0]);
        }
        catch(Exception e){
            e.printStackTrace();
        }
        return outBitmap;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:26:56.137

覆盖 SQLiteOpenHelper 类的 onUpgrade() 方法并确保它为空。那是您的数据库可能已被删除的地方。

# list - Scala：List[Tuple3] 到 Map[String,String]

> ID：10785372
> 
> 赞同：4
> 
> 时间：2012-05-28T13:22:15.243
> 
> 标签：list, scala, map, type-conversion, tuples

我有一个`List[(Int,String,Double)]`需要转换为的查询结果`Map[String,String]`（用于在 html 选择列表中显示）

我被黑的解决方案是：

```
val prices = (dao.getPricing flatMap {
  case(id, label, fee) =>
    Map(id.toString -> (label+" $"+fee))
  }).toMap 
```

必须有更好的方法来实现同样的目标......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-28T13:29:52.703

这个怎么样？

```
val prices: Map[String, String] =
  dao.getPricing.map {
    case (id, label, fee) => (id.toString -> (label + " $" + fee))
  }(collection.breakOut) 
```

该方法`collection.breakOut`提供了一个`CanBuildFrom`实例，可确保即使您从 a 映射，由于类型注释， `List`a`Map`也会被重建，并避免创建中间集合。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-28T13:35:20.777

更简洁一点：

```
val prices =
  dao.getPricing.map { case (id, label, fee) => ( id.toString, label+" $"+fee)} toMap 
```

较短的替代方案：

```
val prices =
  dao.getPricing.map { p => ( p._1.toString, p._2+" $"+p._3)} toMap 
```

# iphone - 如何为现有的开发者制作一个新的应用程序？

> ID：10785374
> 
> 赞同：2
> 
> 时间：2012-05-28T13:22:21.237
> 
> 标签：iphone

我在 iOS 配置门户中有一个开发者帐户，并且已经拥有一个应用程序的所有证书。现在我想在同一个帐户中使用新的应用程序 ID 构建一个新应用程序。

我是否必须再次重复所有步骤？任何人都可以帮助我完成我需要在 iOS 配置门户中执行的步骤吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:27:58.623

您的证书保持不变。（开发商/发行）。

1.  创建特定于您的新应用程序的新应用程序 ID
2.  使用您在上述步骤中创建的新应用程序 ID 创建特定于该应用程序的新配置文件。选择现有的开发或分发证书。选择您希望安装应用程序以进行调试/AdHoc 构建的设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:28:30.400

是的。除了开发人员/分发证书之外，您将不得不为新应用程序重复它，这是因为您的应用程序的独立性，您的应用程序设置之一不会影响其他应用程序。

其他推送通知证书也将单独用于单独的应用程序。分布和开发

# delphi - 使用 Delphi 2007 在运行时将 IXMLDOMDocument3 保存到 xml 文件

> ID：10785377
> 
> 赞同：1
> 
> 时间：2012-05-28T13:22:26.870
> 
> 标签：delphi, delphi-2007

如果我想在运行时将 IXMLDOMDocument3 保存到硬盘驱动器上的文件中，那么语法是什么？

例如像 IXMLDOMDocument3.save('c:\test.xml')

或者甚至有可能吗？

此致！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T14:26:30.570

下面的示例代码演示了如何`IXMLDomDocument3`在运行时加载和保存 XML。它使用来自 Delphi-2010 的 msxml 头文件。`IXMLDomDocument3`继承自`IXMLDomDocument`并具有`Save`方法（正如您在问题中所写）。如果方法参数是一个字符串，那么它指定文件名（它创建或替换目标文件）。

```
program Project3;
{$APPTYPE CONSOLE}

uses SysUtils, msxml, comObj, activex;

    procedure LoadAndSaveXML(LoadFile, SaveFile : string);
    var xml : IXMLDOMDocument3;
        tn : IXMLDOMElement;
    begin
        xml := CreateComObject(CLASS_DOMDocument60) as IXMLDOMDocument3;
        xml.load(LoadFile);
        xml.save(SaveFile);
    end;
begin
  try

    CoInitialize(nil);
    try
        LoadAndSaveXML('D:\in.xml', 'D:\out.xml');
    finally
        CoUninitialize();
    end;
  except
    on E: Exception do begin
      Writeln(E.ClassName, ': ', E.Message);
      readln;
    end;
  end;
end. 
```

# search - Alfresco Web Quick Start 中是否存在用于高级搜索的功能？

> ID：10785379
> 
> 赞同：0
> 
> 时间：2012-05-28T13:22:29.493
> 
> 标签：search, alfresco

我需要为我的 Alfresco 网站创建高级搜索功能，以通过自定义元数据进行搜索。

Alfresco 是否为高级搜索提供现有功能，还是我必须使用带有搜索表单和 web 脚本的新 WQS 页面对此进行编码？

如果有人知道这将是一个很大的帮助，不想重新发明轮子和所有这些:) 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:50:07.927

鉴于这些信息，很难说要实施多少工作，但听起来这可以在几个小时内完成——假设你有一个熟练的开发人员。

无论如何，我绝对不建议建立一个基于快速入门的网站，除非你真的对“Alfresco 方式”的编码感到舒服——即 Spring Surf 和 A​​lfresco Share。当然，您还需要一些关于如何为 Repo 编码的知识。请记住，作为最佳实践示例的快速入门仅用于教育目的。在它之上构建很可能涉及从那里分叉并开始您的定制。在您决定走这条路之前，请确保快速入门涵盖了您的大量需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T03:32:27.917

我现在正在露天开发工作流程搜索。对我来说，我必须创建一个新页面，比如 alfresco 高级搜索。这是**共享高级搜索** [http://wiki.alfresco.com/wiki/Share_Advanced_Search](http://wiki.alfresco.com/wiki/Share_Advanced_Search)自定义示例。这是关于露天搜索的解释。[http://wiki.alfresco.com/wiki/Search](http://wiki.alfresco.com/wiki/Search)

我希望这可以帮助你。

# string - SPSS无法分配字符串变量

> ID：10785380
> 
> 赞同：1
> 
> 时间：2012-05-28T13:22:42.790
> 
> 标签：string, spss

第一个代码块运行良好，但我在它说“F14a 的值”的地方我希望它实际将存储在那里的字符串分配给 F14a_pd3。但是下面的语法应该会让我崩溃 SPSS。F14a 是一个长度为 50 的字符串变量。

工作无用的语法：

```
STRING F14a_pd3 (A50).
DO IF NOT F14a="missing" & papadex=3.
   COMPUTE F14a_pd3="value of F14a".
ELSE.
   COMPUTE F14a_pd3="missing".
END IF.
FREQUENCIES F14a_pd3. 
```

崩溃语法：

```
STRING F14a_pd3 (A50).
DO IF NOT F14a="missing" & papadex=3.
   COMPUTE F14a_pd3=F14a.
ELSE.
   COMPUTE F14a_pd3="missing".
END IF.
FREQUENCIES F14a_pd3. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T17:48:04.153

您应该考虑致电技术支持。您的语法很好，即使不是，也不应该使任何崩溃（最坏的情况下您应该只收到一条错误消息）。

运行这个可重现的示例来演示您的语法。如果这没有“崩溃”SPSS，那么可能是您正在处理的当前文件存在问题。

```
data list free / F14a (A10) papadex (F1.0).
begin data
missing 3
xxxxx  3
missing 0
yyyyy 1
zzzzz 0
end data.

STRING F14a_pd3 (A10).
DO IF NOT F14a="missing" & papadex=3.
   COMPUTE F14a_pd3=F14a.
ELSE.
   COMPUTE F14a_pd3="missing".
END IF.
LIST ALL. 
```

哪个产生表格；

> ```
> F14a       papadex F14a_pd3 
> 
> missing       3    missing 
> xxxxx         3    xxxxx 
> missing       0    missing 
> yyyyy         1    missing 
> zzzzz         0    missing 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T01:27:56.747

这种语法对我来说很好。当您说 SPSS 崩溃时，究竟会发生什么？那次会议还发生了什么？您使用的是什么版本和平台？

# string - GCC 的 std::string - 为什么这么奇怪的实现

> ID：10785381
> 
> 赞同：4
> 
> 时间：2012-05-28T13:22:46.960
> 
> 标签：string, gcc, stl, implementation, stdstring

当我查看在 gcc 中实现 std::string 的方式时，我注意到 sizeof(std::string) 完全等于指针的大小（x32 构建中为 4 个字节，x64 为 8 个字节）。由于字符串应该保存一个指向字符串缓冲区的指针，并且它的长度是最小的，这让我认为 GCC 中的 std::string 对象实际上是一个指向保存这些数据的一些内部结构的指针。

因此，当创建新字符串时，应该进行一次动态内存分配（即使字符串为空）。

除了性能开销之外，这还会导致内存开销（当我们分配非常小的内存块时会发生这种情况）。

所以我只看到这种设计的缺点。我错过了什么？这样做的好处是什么？首先这样做的原因是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T00:38:08.600

阅读顶部的长注释`<bits/basic_string.h>`，它解释了指针指向的内容以及字符串长度（和引用计数）的存储位置以及这样做的原因。

但是，C++11 不允许引用计数 Copy-On-Write `std::string`，因此必须更改 GCC 实现，但这样做会破坏 ABI，因此会延迟到 ABI 更改是不可避免的。我们不想更改 ABI，然后必须在几个月后再次更改，然后再更改。当它改变时，它应该只改变一次，以尽量减少用户的麻烦。

# android - 如何将不同的颜色应用于 Android 中的列表视图项目

> ID：10785386
> 
> 赞同：0
> 
> 时间：2012-05-28T13:23:08.557
> 
> 标签：android, android-listview

我必须显示如下图所示的列表视图

![图片](../Images/c5fcceb223aa4845ccc287074bad72e1.png)

在这里，我在 xml 中有这样的视图

```
 <View 
    android:id="@id/margin" 
    android:background="#6DAAE9"
    android:layout_width="20.0dip" 
    android:layout_height="fill_parent" /> 
```

我必须在加载列表时动态更改此背景（#6DAAE9），即使**列表项增加**，我也必须将这些颜色固定到相应的项。

有谁能够帮助我。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:27:45.480

基本上你需要编辑你的`getView`方法。

您可以使用

```
 convertView.setBackgroundColor(Color.parseColor("#6DAAE9")); 
```

使用适当的逻辑，这意味着如果您希望它是随机设置的随机颜色或保存一个带有顺序的数组等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:27:55.853

[请参阅此列表视图](http://samir-mangroliya.blogspot.in/p/android-customized-listview.html)，我根据奇数行或偶数行添加列表项，您可以在 getView() 方法中检查位置。您应该为此放置 imageview 并设置颜色而不是设置颜色到行。

```
 if(position==0){
         //here set color for imageview which position is 0
   }else if(position==1){
         //here set color for imageview which position is 1    
   } 
```

……

# javascript - 如何停止 setInterval()？

> ID：10785395
> 
> 赞同：1
> 
> 时间：2012-05-28T13:23:55.407
> 
> 标签：javascript, html, setinterval, clearinterval

下面是`setInterval()`和`clearInterval()`..的脚本

我一直在寻找`clearInterval()`停止`setInterval()`...我实现了该代码，但它不起作用..

我在这里想要实现的是，例如，有 8 个捕食者和 3 个猎物。当 Predator 比 Prey 多时 setInterval 将开始，因此 Prey 将减少 3，而 Predator 将增加 3 更多。当猎物的数量达到 0.. 捕食者应该停止增加，因为没有更多的猎物了..

这里的问题是，当猎物击中 0 时，捕食者仍在增加..我添加了`clearInterval()`但它不起作用..我可以知道出了什么问题吗？

```
<script>
    function startAni() {
        if ((document.getElementById('amount').value) >= (document.getElementById('amount5').value)) {
            alert("Predator is more than prey! FRENZY TIME!");
            var interval = setInterval(function () {
                Remove3(), removevalue3(), Add(), addvalues();
                if (document.getElementById('amount5').value = "0") {
                    alert("No more Prey!");
                    clearInterval(interval);
                }
            }, 5000);
        } else {
            alert("Prey is more than Predator! Revenge time!")
        }
    }
</script> 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T13:26:30.870

您需要确保`input`DOM 上有一个带有 id的实际值，`amount5`因为如果有，那么`document.getElementById('amount5').value = "0"`将`true`立即清除您的时间间隔......

但

```
if (document.getElementById('amount5').value = "0") { 
```

应该

```
if (document.getElementById('amount5').value == "0") { 
```

在 javascript 中，您使用双等号 ( `==`) 进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T13:26:39.387

这个：

```
if(document.getElementById('amount5').value = "0"){ 
```

你应该使用`==`而不是`=`，否则你的条件总是真实的。话虽如此，那句话会立即杀死计时器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T13:33:04.587

另一种看待它的方法是使用`setTimeout`代替`setInterval`and `clearInterval`：

```
function doAdd() {
    Remove3(), removevalue3(), Add(), addvalues();
    if (document.getElementById('amount5').value = "0") {
        alert("No more Prey!");
        // thats it, no more recursion as your stop condition has been met
    }
    else {
        setTimeout(doAdd, 5000); // continue as there is more to be done
    }
}
setTimeout(doAdd, 0); // start it off 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-28T04:24:40.823

您在设置区间变量范围时犯了错误。您应该将其定义为全局变量。

如果在“startAni”函数中定义，则该变量不能被“startAni”函数中的嵌套函数访问。

你应该定义为：

```
<script>
    var interval;//define it here
    function startAni() {
        if ((document.getElementById('amount').value) >= (document.getElementById('amount5').value)) {
            alert("Predator is more than prey! FRENZY TIME!");
            interval = setInterval(function () {  //do not redefined interval as var just use it here
    ....

</script> 
```

# java - NetBeans 平台：实体类错误

> ID：10785397
> 
> 赞同：0
> 
> 时间：2012-05-28T13:24:09.020
> 
> 标签：java, jpa, entity, netbeans-platform

到目前为止，我已经有了一个功能齐全的 NetBeans 平台应用程序，它只有一个屏幕，通过以下代码利用了 Shipvia 实体类：

```
import entity.Shipvia;
import entity.Route;
import java.util.List;
import javax.persistence.EntityManager;
import javax.persistence.Persistence;
import javax.persistence.Query;

public class RetrieveResultList {

    public static List RetrieveResultList (String tablename){
        EntityManager entityManager = Persistence.createEntityManagerFactory("EntityLibraryPU").createEntityManager();
        System.out.println("NAMED QUERY:>"+tablename+".findAll");
        Query query = entityManager.createNamedQuery(tablename+".findAll");
        List<Shipvia> resultList = query.getResultList();
        return resultList;
    }
} 
```

如您所见，我根据传递的表名创建了一个动态查询。因此，如果用户打开一个 ShipviaTopComponent，它将调用 Shipvia.findAll（参见下面的实体类的一部分）。

```
package entity;

import java.io.Serializable;
import javax.persistence.*;
import javax.xml.bind.annotation.XmlRootElement;

@Entity
@Table(name = "SHIPVIA")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Shipvia.findAll", query = "SELECT c FROM Shipvia c")
}); 
```

我的目标是有第二个屏幕，称为 RouteTopComponent 利用 Route 实体类

```
package entity;

import java.io.Serializable;
import javax.persistence.*;
import javax.xml.bind.annotation.XmlRootElement;

@Entity
@Table(name = "ROUTE")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Route.findAll", query = "SELECT c FROM Route c")
}); 
```

但是，这是我在尝试打开 Route 屏幕时遇到的错误：

```
SEVERE [global]
java.lang.IllegalArgumentException: NamedQuery of name: Route.findAll not found.
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.getDatabaseQueryInternal(EJBQueryImpl.java:577)
    at org.eclipse.persistence.internal.jpa.EntityManagerImpl.createNamedQuery(EntityManagerImpl.java:1043)
    at com.demo.viewer.RetrieveResultList.RetrieveResultList(RetrieveResultList.java:23)
    at com.demo.viewer.RoutesTopComponent.<clinit>(RoutesTopComponent.java:40)
Caused: java.lang.ExceptionInInitializerError
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27) 
```

RouteTopComponent 的第 40 行是：

```
List<Route> resultList = RetrieveResultList.RetrieveResultList("Route"); 
```

我很困惑为什么打开 ShipviaTopComponent 并找到 Shipvia.findAll 工作正常，但没有找到 RouteTopComponent/Route.findAll ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:15:00.937

如评论中所述，如果您在 Java SE 环境中使用 RESOURCE_LOCAL 事务类型/运行 JPA，则必须在 persistence.xml 文件中显式列出实体类。

# weka - WEKA：使用给定的 SMO 模型对 ARFF 数据进行分类

> ID：10785398
> 
> 赞同：0
> 
> 时间：2012-05-28T13:24:15.827
> 
> 标签：weka, smo

我是 weka 的新手，这是我的问题：我有一个未标记的 arff 数据和一个给定的 SMO 模型；我需要使用该模型对这些数据进行分类。我搜索了示例，但所有示例都使用测试集来构建分类器，而我没有测试集。

我需要使用 java 或 weka 命令行进行分类。

我试过（在linux下）命令，如：java weka.classifiers.functions.SMO -l /path/of/mymodel/SMOModel.model -T /path/pf/myunlabeledarff/unlabeled.arff

但我收到几个错误：S

有人能帮我吗？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T23:04:39.417

显示该`-l`标志有效的文档在这里：[http](http://weka.wikispaces.com/Primer) ://weka.wikispaces.com/Primer 。该文档还表明您的语法是正确的，并且您尝试做的事情是可能的。

您说数据未标记：如果您用于预测的 arff 文件与用于创建模型的 arff 文件的格式不匹配，这可能会导致错误。确保 arff 标头中声明了类属性，并且文件中的每个实例（行）中都有一个类值（即使该值是`?`表示未知的）。否则格式将不匹配，分类器将无法工作。

如果这不能解决问题，请发布您的错误消息。

# c - C语言中的分而治之二分查找

> ID：10785399
> 
> 赞同：0
> 
> 时间：2012-05-28T13:24:18.680
> 
> 标签：c, recursion, binary-search, divide-and-conquer

我正在尝试制作二进制搜索的分而治之版本，但是将数组划分为两个子数组并进行搜索类似于合并排序中的合并，我想这样做的原因是我想在 cilk 中使用它，但是我必须这样做。这是我编写的代码，它似乎有问题，因为它返回 -1 到有效的键值。

```
#include <stdio.h>
#include "BinarySearch.h"

int main () {
    int a[] = {0,1,2,3,4,5,6,7,8,9};
    int index = binarySearch(a, 0, 9, 7);
    printf("%i", index);

    return 0;
}

int binarySearch (int* A, int first, int last, int key) {
    if (last < first)
        return -1;
    else {
        int mid = (last + first) / 2;

        if (A[mid] == key)
            return mid;

        int x, y;
        x = binarySearch(A, first, mid - 1, key);
        y = binarySearch(A, mid + 1, last, key);

        if (x == -1 && y == -1)
            return -1;
        else if (x == -1 && y != -1)
            return y;
        else
            return x;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T13:28:24.090

这很简单，`99`您的数组中不存在。结果是正确的。您可能只是弄乱了参数-第一个是数组，接下来的两个代表搜索范围，第四个是您要查找的内容。正确的调用是：

```
int index = binarySearch(A, 0, 10, 4); 
```

还有，这

```
int* A = &a[0]; 
```

没用，你可以简单地使用`a`数组衰减到指针：

```
int index = binarySearch(a, 0, 7, 99);  // a instead of A 
```

此外 -**二进制搜索**考虑了数组已排序的事实。如果您的密钥低于中间值，为什么还要向右搜索 - 保证您不会在那里找到它。

你正在做的是`O(n)`，而不是`O(log(n))`二进制搜索解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T07:55:30.263

对于仍在寻找解决方案的任何人，[我发现这是由`ankzcode`](http://ankzcode.blogspot.in/2012/11/find-minimum-without-linear-search.html).

它使用分治法在没有线性搜索的情况下找到数组中的最小值。

```
#include <stdio.h>

int findMin(int a[], int l,int h)
{
    int pivot = (l + h) / 2;
    int minl=-1, minh = -1;

    if ( (pivot - l ) > 1) 
    {
        minl = findMin(a, l, pivot);
    }
    else 
    {
        minl = (a[l] > a[pivot])?a[pivot]:a[l];
    }
    if ( (h - pivot ) > 1) 
    {
        minh = findMin(a, pivot, h);
    }
    else 
    {
        minh = (a[l] > a[pivot])?a[pivot]:a[l];
    }

    return (minl>minh)?minh:minl;
}

int main()
{
    int a[]={5,2,9,10,3};
    printf("%d\n",findMin(a, 0, 5));
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T13:30:33.347

你给了键 99，它不在数组中，所以很明显代码返回 -1。

# java - 中断 RMI 调用中的阻塞线程

> ID：10785401
> 
> 赞同：1
> 
> 时间：2012-05-28T13:24:20.413
> 
> 标签：java, multithreading, rmi

考虑以下情况：

```
main() {
    ClassA insA = new ClassA();
    insA.run();
}

ClassA.run() {
    for(;;) {
        RMI.call();
        blahblah();
    }
} 
```

`RMI.call()`是一个 RMI 函数，它阻止线程使用`Semaphore.acquire()`，直到发生某些事情（在另一个线程中）。

问题是：我怎样才能安全地杀死所有线程？

如下定义一个`stop()`函数`ClassA`：

```
stop() {
    Thread.currentThread.interrupt();
} 
```

并从外部（例如`main()`）调用它不会中断 RMI 调用线程。

如何中断原始线程，以便正确退出代码？
还是有其他安全出口的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:29:15.467

检查这个库：http: [//java.net/projects/interruptiblermi](http://java.net/projects/interruptiblermi)。Thread#interrupt() 将无济于事。

# lua - 如何在lua中实现redo

> ID：10785402
> 
> 赞同：0
> 
> 时间：2012-05-28T13:24:23.190
> 
> 标签：lua, undo-redo

我刚刚被介绍到 LUA 语言，我正在着手我的第一个项目。然而，我现在面临的最大挑战是如何实施或进行撤消和重做。

但是，为了明确问题，该项目是自定义文本编辑器，因此，编辑任何输入文本都需要此处的撤消/重做。我已经设法处理了诸如剪切、复制、清除、查找单词以及更改字体、文本颜色、插入表格和图像等问题，所有这些都是用 lua 语言处理的。显然，有几个自定义文本编辑器，我相信迎合许多人的努力将为未来的进步或改进铺平道路。但是撤消/重做操作让我心碎，根据我的研究，这甚至是大多数现有自定义文本编辑器所缺乏的。

我搜索了几个论坛，它们似乎都给出了使用关联类型的表来加载信息并从那里检索它们的提示。令人难以置信的是，我认为其中一些网站只是分享他们从其他网站获得的知识，而没有任何技术观点或任何东西。这是因为，我遇到的大多数建议似乎在各个方面都相似且相同。对于访问过的大约数十个站点，没有用户尝试发布示例的地方，但我所看到的只是对大多数 lua 用户的抱怨。毫无疑问，对于本论坛中一些受人尊敬的大师来说，这似乎有点容易。

我似乎没有得到这些建议的真实情况。有人可以给我一个例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T18:57:15.120

撤消/重做非常适合[命令模式](http://en.wikipedia.org/wiki/Command_pattern)。

首先，您需要编写一些文本操作功能本身。只是*做*部分，不用担心取消或重新。这本身就是很多工作。

然后，您将拥有一堆函数来操作您的文档。`insertText()`，`setFont()`之类的东西`insertJpgImage()`。诀窍是现在您需要将每个函数包装在一个所谓的[命令](http://c2.com/cgi/wiki?CommandPattern)对象中。每个命令类都必须对`do()`自己和对`undo()`自己有一个方法。

现在您的所有文本操作操作都由命令对象表示，您可以通过以下方式执行每个操作（例如，加粗一些文本）：

```
boldCommand = setTextPropertyCommand:new(document, selectedArea, textProperties.bold)
boldCommand:do() --actually modify text
table.insert(commandUndoStack, boldCommand) --keep the command for possible undoing later. 
```

当您想撤消某些文本的粗体时，您可以调用：

```
command = table.remove(commandUndoStack)
command:undo() 
```

注意，如果你在 Lua 中使用一些 GUI 框架绑定，那么这个框架可能有它自己现成的撤消/重做功能。例如[Qt](http://en.wikipedia.org/wiki/Qt_%28framework%29)（带有 qtlua 绑定）提供[QUndoStack](http://qt-project.org/doc/qt-4.8/qundostack.html)类。

# er-diagrams - 在 ER 图中，是否有可能没有显示主键？为什么？

> ID：10785407
> 
> 赞同：0
> 
> 时间：2012-05-28T13:24:37.167
> 
> 标签：er-diagrams

在这里，我看到了没有实体主键的图表。

在这个图中，item 的 order_level 和 price 没有主键。如果没有主键，那么如何在数据字典中显示？ ![](../Images/aa4b0f8e475371d9b1cdf7000753a6c1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:33:44.937

它是以下之一：

1.）所有属性组合都是它的主键

2.）这是一个弱身份，您显示的图表不完整

3.) 图表错误/未显示主键。（在教科书中多次看到这种情况，其中通过示例解释 ER 图，如果不需要解释任何内容，则通常会丢失关键。）

# android - Android：文本的格式化部分不起作用

> ID：10785413
> 
> 赞同：3
> 
> 时间：2012-05-28T13:24:57.073
> 
> 标签：android, textview, android-textattributes

在我的 strings.xml 文件中，我定义了以下内容：

```
<string name="mystring"><b>Bold text</b>Non-bold text</string> 
```

它应该工作，因为它[在这里](http://developer.android.com/resources/faq/commontasks.html#selectingtext)指定。但实际上只显示粗体文本，而其他部分文本则消失了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T13:31:29.837

取自[这个](https://stackoverflow.com/questions/3235131/set-textview-text-from-html-formatted-string-resource-in-xml)SO 线程

用这个

```
textView.setText(Html.fromHtml(someText)); 
```

或通过这种方式从 xml

您可以在 strings.xml 中包含原始 HTML，只要将其包装在

```
<![CDATA[ ...raw html... ]]> 
```

例子：

```
<string name="nice_html">
<![CDATA[
<p>This is a html-formatted string with <b>bold</b> and <i>italic</i> text</p>
<p>This is another paragraph of the same string.</p>
]]>
</string> 
```

然后，在您的代码中：

```
TextView foo = (TextView)findViewById(R.id.foo);
foo.setText(Html.fromHtml(getString(R.string.nice_html))); 
```

您还可以在 CDATA 块内使用反斜杠转义撇号/单引号，这样您就可以拥有类似的东西`<b>can\'t</b>`而不是无限丑陋的东西`<b>can&apos;t</b>`

# java - 矩形以外形状的按钮

> ID：10785416
> 
> 赞同：1
> 
> 时间：2012-05-28T13:25:08.447
> 
> 标签：java, swing, jbutton

是否可以以矩形（或圆角矩形）以外的形状创建按钮。例如，您能否在地图上创建一个状态形状的按钮？单击形状中的任何位置会导致 MouseEvent 被广播吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T13:31:55.633

在 Java 中，使用实现接口的类的实例来呈现您的地图`Shape`，例如`Polygon`. 任何受支持的`contains()`方法都可以使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T13:33:34.217

您可以通过扩展 JButton 并`setContentAreaFilled(false);` 在构造函数中调用来创建此类按钮。`paintComponent()`然后你可以在覆盖的方法中绘制任何你喜欢的东西。您还需要覆盖提供所需鼠标命中测试的`contains()`方法。`JComponent`在此方法中，您可以调用多边形（用于绘制按钮的方法）`contains()`方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T13:37:51.453

以下是 JDC 技术提示的示例：

[http://web.mit.edu/java/JDCNewsletter/JDC-TECH8-99](http://web.mit.edu/java/JDCNewsletter/JDC-TECH8-99)

# c++ - 粉碎堆栈：溢出

> ID：10785424
> 
> 赞同：3
> 
> 时间：2012-05-28T13:25:29.803
> 
> 标签：c++, c, stack, overflow

我刚刚阅读*了 Smashing the Stack for Fun and Profit* ( [http://insecure.org/stf/smashstack.html](http://insecure.org/stf/smashstack.html) ) 并想探索更多。然后我在这里找到了这段代码：[https ://github.com/yangsu/Stack-Smashing](https://github.com/yangsu/Stack-Smashing)

我很清楚这里所说的原则，我严格按照步骤操作，但出现了一些错误。我开了2个终端。

在第一个终端中：（在另一个终端中键入“cat”行后出现“Segmentation fault”行）

```
$ sudo sysctl -w kernel.randomize_va_space=0
$ gcc -z execstack -fno-stack-protector webserver.c -o server
$ ./server 5000
Segmentation fault.  Shutting down peacefully, then rebooting.
$ 
```

在第二个航站楼，

```
$ g++ generate.cpp -o generate
$ ./generate
$ cat data.dat | nc 127.0.0.1 5000
$ 
```

错误是由“cat”行的错误格式或参数引起的吗？还是有其他原因？

此外，正如函数*sigsegv*中所写，服务器应在 2 秒后重新启动。但在我在这里的执行中它没有。为什么是这样？

非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:12:06.253

学习粉碎堆栈从关注最小的细节开始。
一个成功的漏洞利用和一个简单的进程崩溃几乎完全相同。您必须找到细微差别并更改漏洞利用。

首先调试崩溃的程序。
为什么它会崩溃？堆栈上写了什么？
它是因为修改了返回地址（在这种情况下你已经完成了一半）还是因为其他原因而崩溃？

如果你不能回答这些问题，那么即使你让事情顺利进行，你也将一无所获。

# android - 带有 Android 3.2 的 Google TV 模拟器

> ID：10785425
> 
> 赞同：1
> 
> 时间：2012-05-28T13:25:30.650
> 
> 标签：android, google-tv

我正在尝试在 GoogleTV 上测试 HLS 的兼容性，我读到新的 Google TV 将配备与 HLS 兼容的 Android 3.2，我为 Eclipse 安装了 Google TV 插件，但似乎是唯一的 Android 版本拥有是3.1。

HLS 不适用于该版本，所以我想知道是否可以下载 3.2 版本的模拟器或在 GoogleTV 模拟器中使用 Android 3.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:54:59.300

Android 3.2 尚不支持 Google TV 插件；但是，一般来说，使用模拟器测试视频播放的支持是有限的。要测试 HLS，您最好的选择是联系 Google TV 开发者关系团队。

# html - IE 单页对齐

> ID：10785427
> 
> 赞同：0
> 
> 时间：2012-05-28T13:25:40.807
> 
> 标签：html, internet-explorer, css, css-float

我正在为一个好的网站设计母版页。我已经使用 firebug 设计了适当的 css，但问题是当我在 IE 中打开页面时。对齐方式差异很大。

问题在于我为 div 块放置的宽度和边距。

整个页面在下面。

```
<html>
<head>
<link src="Styles.css" type="text/css"/>
<style type="text/css">
body{ 
    height:100%;
    font-family: Tahoma;
    width: 800px;
    margin: auto;
    color:#403e3e,
    color:gray;font-size: 12pt;
}
#sections{
    width:100%;
    background-color:#EFEFEF;
    float:left;
}
#container{
    background-color:#FFFFFF;   
    float: left;
}
.sectionBlock{
    float:left;
    width:30%;
    border:0px dotted red;
    padding: 10px;
}
h3{ 
    color:#990033;
    font-family:Maiandra GD;
    margin:9px;
}
#info{
    float:left;
}
.secHead{ 
    font-size:20pt;
    font-family:Maiandra GD;
    color:#990033;
    margin-bottom:2px;
}
.secDescription{ font-size:10pt;}
a{ color:#990033;}
#navigation ul{ 
    background-image: url("img/bar.jpg");
    margin: 0;
    height:32px;
    padding-top: 8px;
}
#navigation ul li{display:inline;padding:20px; font-size:16px;color:#302e2e;}
#footer {background-color:#E01B6A;}
#footer .footerText{margin:auto;width:100%;width: 340px;}

</style>
</head>

<body>
    <div id="header">

    </div>
    <div id="navigation">

      <ul>
         <li>Home</li>
         <li>Application Tracker</li>    
         <li>Insurance Policy downloads</li>     
         <li>Parner Login</li>   
         <li>SiteMap</li>    
      </ul>
    </div>
    <div id="container">
        <div id="intro">
        <h3>How can we help you? </h3>
        Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus id quod maxime placeat facere possimus,
        omnis voluptas assumenda est, omnis dolor repellendus. Rerum necessitatibus saepe eveniet. 
         <a href="#moreInfo">Find out more</a>
        </div>

        <div id="sections">
          <h3>Lorem Ipsum</h3>
            <div class="sectionBlock">
              <div class="secHead"> Tenants
              </div>
              <div class="secDescription">
             Lorem ipsum dolor sit amet, consecteur adipiscing elt, sed do elusmod tempor.<br/>
             <a href="#Tenants">Find out more</a>
              </div>
            </div>

            <div class="sectionBlock">
              <div class="secHead">Landlords
              </div>
              <div class="secDescription">
              Excepteur sint occaecat cupidatat non proident, sunt in culpa elt, sed do elus mod tempor qui officia deserunt mollit anim id est laborum.<br/>
              <a href="#Landlords">Find out more</a>
              </div>            
            </div>
            <div class="sectionBlock">
              <div class="secHead">Letting Agents
              </div>
              <div class="secDescription">
  Excepteur sint occaecat cupidatat non proident, sunt in culpa elt, sed do elus mod tempor qui officia deserunt mollit anim id est laborum.<br/>
                <a href="#Letting Agents">Find out more</a>
              </div>            
            </div>      

        </div>
        <div id="info">
        Maras is an independent company specialising in supplying services to the residential lettings industry. If you are an applicant,
            letting agent or landlord Maras is here to help you. Maras Group is directly authorised and regulated by the Financial Services
            Authority for general insurance activities.
        <ul>
            <li>Providers of services to the letting industry for more than 15 years. </li>
            <li>Over 250,000 references processed per annum. </li>
            <li>Over 1.5 Million telephone calls processed per annum. </li>
            <li>One of the largest providers of services to the lettings industry. </li>
            <li>Real value for money products and services. </li>
        </ul>   
       </div>

    </div>
    <div id="footer"> <div class="footerText">Copyright 2008@, maras. All Rights Reserved.</div></div>
</body>

</html> 
```

任何人都可以建议更改样式以使其在所有浏览器中看起来都相同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:39:25.540

我在页面内容周围添加了一个包装器，并将“文本对齐：中心”设置为正文（这有助于在 IE 中居中元素）。

请参阅下面的代码并告诉我它是否适合您

```
<html>
<head>
<link src="Styles.css" type="text/css"/>
<style type="text/css">
body{ height:100%; font-family: Tahoma; color:#403e3e, color:gray;font-size: 12pt; text-align: center;}
#wrapper { width: 800px; margin: 0 auto; text-align: left;}
#sections{ width:100%; background-color:#EFEFEF; float:left; }
#container{background-color:#FFFFFF; float: left;}
.sectionBlock{ float:left; width:30%; border:0px dotted red; padding: 10px; }
h3{  color:#990033; font-family:Maiandra GD; margin:9px; }
#info{ float:left; }
.secHead{  font-size:20pt; font-family:Maiandra GD; color:#990033; margin-bottom:2px; }
.secDescription{ font-size:10pt;}
a{ color:#990033;}
#navigation ul{  background-image: url("img/bar.jpg"); margin: 0; height:32px; padding-top: 8px; padding-left:40px;}
#navigation ul li{display:inline;padding:20px; font-size:16px;color:#302e2e;}
#footer {background-color:#E01B6A; text-align: center;}
#footer .footerText{margin:auto;width:100%;width: 340px;}
</style>
</head>

<body>
    <div id="wrapper">
        <div id="header">
        </div>
        <div id="navigation">
          <ul>
             <li>Home</li>
             <li>Application Tracker</li>    
             <li>Insurance Policy downloads</li>     
             <li>Parner Login</li>   
             <li>SiteMap</li>    
          </ul>
        </div>
        <div id="container">
            <div id="intro">
            <h3>How can we help you? </h3>
            Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus id quod maxime placeat facere possimus,
            omnis voluptas assumenda est, omnis dolor repellendus. Rerum necessitatibus saepe eveniet. 
             <a href="#moreInfo">Find out more</a>
            </div>

            <div id="sections">
              <h3>Lorem Ipsum</h3>
                <div class="sectionBlock">
                  <div class="secHead"> Tenants
                  </div>
                  <div class="secDescription">
                 Lorem ipsum dolor sit amet, consecteur adipiscing elt, sed do elusmod tempor.<br/>
                 <a href="#Tenants">Find out more</a>
                  </div>
                </div>

                <div class="sectionBlock">
                  <div class="secHead">Landlords
                  </div>
                  <div class="secDescription">
                  Excepteur sint occaecat cupidatat non proident, sunt in culpa elt, sed do elus mod tempor qui officia deserunt mollit anim id est laborum.<br/>
                  <a href="#Landlords">Find out more</a>
                  </div>            
                </div>
                <div class="sectionBlock">
                  <div class="secHead">Letting Agents
                  </div>
                  <div class="secDescription">
      Excepteur sint occaecat cupidatat non proident, sunt in culpa elt, sed do elus mod tempor qui officia deserunt mollit anim id est laborum.<br/>
                    <a href="#Letting Agents">Find out more</a>
                  </div>            
                </div>      

            </div>
            <div id="info">
            Maras is an independent company specialising in supplying services to the residential lettings industry. If you are an applicant,
                letting agent or landlord Maras is here to help you. Maras Group is directly authorised and regulated by the Financial Services
                Authority for general insurance activities.
            <ul>
                <li>Providers of services to the letting industry for more than 15 years. </li>
                <li>Over 250,000 references processed per annum. </li>
                <li>Over 1.5 Million telephone calls processed per annum. </li>
                <li>One of the largest providers of services to the lettings industry. </li>
                <li>Real value for money products and services. </li>
            </ul>   
           </div>

        </div>
        <div id="footer"> <div class="footerText">Copyright 2008@, maras. All Rights Reserved.</div></div>
    </div>
</body>

</html> 
```

# php - 清除 cookie，为什么需要特定值？

> ID：10785431
> 
> 赞同：2
> 
> 时间：2012-05-28T13:25:59.067
> 
> 标签：php, cookies

我正在阅读有关清除 cookie 的内容。假设一个 cookie 设置为`setcookie("abc", "xyz", time()+3600)`，然后从我读到的内容中，您可以通过使用`setcookie("abc", "xyz", time()-3600)`which 将 cookie 设置为过去过期来取消它。我见过的所有示例都使用这种格式。

我的问题是为什么最后一个参数必须特别是 time()-3600，为什么不能是 time()-1 或 time()-9999999？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T13:27:22.410

> 我的问题是为什么最后一个参数必须特别是 time()-3600，为什么不能是 time()-1 或 time()-9999999？

它没有。3600 可以，但过去的任何东西也可以。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T13:27:36.727

它不必是`time() - 3600`。这仅在示例中使用，因为它使“一小时前”变得很整洁。它必须是*过去的*某个时间，所以 `time()-1`或者`time()-9999999`也可以接受，任何价值都是如此`< time()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T13:30:36.123

诀窍在于`setcookie("abc", "xyz", time()-3600)`，这引用了服务器上的时间，而 cookie 的过期时间取决于运行浏览器的主机的时间。如果两个主机之间的时间不匹配，则 cookie 可能不会过期。但是，使用时间“1”表示到期时间为 1970 年 1 月 1 日午夜之后的 1 秒，这是可能的最早到期时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T13:28:14.980

当浏览器读取过去的时间时，它会被删除

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-28T13:29:53.043

`time()`返回自 Unix 纪元（格林威治标准时间 1970 年 1 月 1 日 00:00:00）以来以秒数测量的当前时间。

所以当你这样做时，这`time() + or - somedigit`意味着你正在增加或减少秒的价值，

# android - 预览期间带有自定义动作跳过按钮的android相机

> ID：10785434
> 
> 赞同：2
> 
> 时间：2012-05-28T13:26:26.870
> 
> 标签：android, camera

我需要在相机中实现一个功能，以便在拍照时预览期间在相机中添加跳过按钮。我已经看到自定义捕获按钮的代码与跳过按钮相同。

# php - 如何使用 OK Tech Web 服务使用 PHP 应用程序登录 Moodle？

> ID：10785438
> 
> 赞同：-1
> 
> 时间：2012-05-28T13:26:39.460
> 
> 标签：php, moodle

`login()`我想使用OK Tech Web 服务的功能使用 PHP 应用程序登录 Moodle 。

当我登录我的应用程序时，在登录功能中，我编写了以下代码以登录 OK Tech Web Services 的 Moodle。

我尝试了两种方法：

1 -

```
 $postdata = http_build_query(
                array(
                    'username' => 'XXXXXX',
                    'password' => 'XXXXXX',
                    'wsfunction' => 'login',
                    'wsformatout' => 'dump'
                )
            );

            $opts = array('http' =>
                array(
                    'method'  => 'POST',
                    'header'  => 'Content-type: application/x-www-form-urlencoded',
                    'content' => $postdata
                )
            );
            $context  = stream_context_create($opts);

            $result = file_get_contents('http://mymoodleserver/wspp/service_pp2.php', false, $context); 
```

和第二种方法

```
$xml_user =  simplexml_load_file('http://mymoodleserver/wspp/service_pp2.php?username=XXXXXX&password=XXXXXX&wsfunction=login&wsformatout=dump'); 
```

通过这种方式，我编写了代码并使用了该功能。

现在请检查一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:44:25.960

您可以简单地使用 Moodle 的登录功能，而不是使用 OK Tech Web 服务。

# api - google analytics api 用户统计查看

> ID：10785440
> 
> 赞同：1
> 
> 时间：2012-05-28T13:26:46.470
> 
> 标签：api, google-analytics, statistics

我浏览了谷歌分析 api 文档并没有找到答案。

如果我有用户名、密码和注册的应用程序，是否可以通过 API 从用户的谷歌分析帐户获取统计信息？

或者 API 只允许访问我的统计信息（使用 oauth 令牌）？

# memory - 堆溢出漏洞利用

> ID：10785449
> 
> 赞同：1
> 
> 时间：2012-05-28T13:27:21.397
> 
> 标签：memory, overflow, heap-memory, exploit

我了解溢出利用需要三个步骤：

1.将任意代码（shellcode）注入目标进程内存空间。

2.控制eip。

3.设置eip执行任意代码。

我阅读了 ben hawkens 关于堆利用的文章，并且了解一些关于如何最终覆盖函数指针以指向我的代码的策略。

换句话说，我理解第 2 步。

我不明白第 1 步和第 3 步。

1.  如何将我的代码注入进程内存空间？

2.  在第 3 步中，我使用指向我的 shellcode 的指针覆盖了一个函数指针，我如何计算\知道我的注入代码注入到哪个地址？（这个问题在stackoverflow中通过使用“jmp esp”来解决）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T02:38:11.843

在堆溢出中，假设系统没有激活 ASLR，您将知道在溢出中使用的内存块（也称为缓冲区）的地址。

一种选择是将 shellcode 放在缓冲区所在的位置，因为您可以控制缓冲区的内容（作为应用程序用户）。将 shellcode 字节放入缓冲区后，您只需跳转到该缓冲区地址。

例如，执行该跳转的一种方法是覆盖 .dtors 条目。一旦易受攻击的程序完成，shellcode - 放置在缓冲区中 - 将被执行。复杂的部分是 .dtors 覆盖。为此，您将不得不使用已发布的堆利用技术。

先决条件是禁用 ASLR（在执行易受攻击的程序之前知道缓冲区的地址）并且放置缓冲区的内存区域必须是可执行的。

更重要的是，第 2 步和第 3 步是相同的。如果您控制 eip，则将其指向 shellcode（任意代码）是逻辑。

PS：绕过ASLR比较复杂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T13:42:23.337

第 1 步需要被攻击代码中的漏洞。常见的漏洞包括：

*   缓冲区溢出（常见的 i C 代码，如果程序将任意长字符串读入固定缓冲区，就会发生这种情况）
*   评估未经处理的数据（在[SQL](http://xkcd.com/327/)和脚本语言中很常见，但也可以在其他语言中出现）

第 3 步需要详细了解目标架构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-10T10:35:12.830

1.  如何将我的代码注入进程空间？

    这是一个相当的陈述/问题。它需要在所述进程空间中有一个“可利用”的代码区域。例如，Windows 目前正在尽可能将大多数 strcpy() 重写为 strncpy()。我说***如果可能的话***

    因为并非所有使用 strcpy 的代码区域都可以成功转换为 strncpy。为什么？因为~@这个症结的区别如下所示；

    ```
    strcpy($buffer, $copied); 
    ```

    或者

    ```
    strncpy($buffer, $copied, sizeof($copied)); 
    ```

    这就是`strncpy`在现实世界场景中难以实施的原因。大多数操作都必须安装一个“幻数” `strncpy`（sizeof() 运算符创建这个幻数）

    作为编码员，我们被教导使用硬编码值，例如严格遵守 a`char buffer[1024];`是非常糟糕的编码实践。

    但是 ~ 相比之下 - 使用`buffer[]="";`or`buffer[1024]="";`是漏洞利用的核心。但是，例如，如果我们将此代码更改为后者，我们会在系统中引入另一个漏洞......

    ```
    char * buffer;
    char * copied;

    strcpy(buffer, copied);//overflow this right here... 
    ```

    或这个：

    ```
    int size = 1024;

    char buffer[size];
    char copied[size];

    strncpy(buffer,copied, size); 
    ```

    这将阻止溢出，但在 RAM 中引入了一个可利用的区域，因为大小是可预测的，并且可以结构化为 1024 个代码/数据块。

    因此，例如，在程序的地址空间中寻找 strcpy 的原始发布者，如果 strcpy 存在，将使该程序可被利用。

    strcpy 受到程序员青睐的原因有很多`strncpy`。幻数、可变输入/输出数据大小……编程风格……等等……

2.  如何在我的代码中找到自己（我的位置）

    查看各种黑客书籍以获取此类示例〜

    但是，试试；

    ```
    label:
    pop eax
    pop eax
    call pointer

    jmp label
    pointer:
    mov esp, eax
    jmp $ 
    ```

    这是一个无效的示例，因为我不想负责编写下一个莫里斯蠕虫！但是，任何体面的程序员都会了解这段代码的要点并立即知道我在说什么。

    我的儿子，我希望你的溢出技术在未来能奏效！

# php - 无法使用 json_decode 访问数组元素

> ID：10785454
> 
> 赞同：-1
> 
> 时间：2012-05-28T13:27:41.940
> 
> 标签：php, arrays, json

我使用 json_decode 从 JSON 响应中获取数组：

```
$result = (json_decode($trends,true)); 
```

这给了我以下内容（我没有包括所有的 EstablishmentDetail 数组结果）

```
Array ( [FHRSEstablishment] => Array ( [Header] => Array ( [#text] => [ExtractDate] => 2012-05-28 [ItemCount] => 5 [ReturnCode] => Success ) [EstablishmentCollection] => Array ( [EstablishmentDetail] => Array ( [0] => Array ( [FHRSID] => 248659 [LocalAuthorityBusinessID] => INS/06/06179 [BusinessName] => Ancient Raj [BusinessType] => Restaurant/Cafe/Canteen [BusinessTypeID] => 1 [AddressLine1] => 26 North Lane, Canterbury, [PostCode] => CT2 7EE [RatingValue] => 3 [RatingKey] => fhrs_3_en-GB [RatingDate] => 2010-11-18 [LocalAuthorityCode] => 180 [LocalAuthorityName] => Canterbury City [Scores] => [SchemeType] => FHRS [Geocode] => ) 
```

我认为我可以使用 foreach 来访问 BusinessName：

```
foreach ($result->FHRSEstablishment->EstablishmentCollection->EstablishmentDetail as $detail){
    echo $detail['BusinessName'];
} 
```

但我没有得到任何结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T13:31:09.970

问题是您正在访问您`$result`的对象：

```
$result->FHRSEstablishment 
```

但是当您将`json_decode`第二个参数设置为 调用时`true`，它会返回一个关联数组，您应该以如下方式访问它：

```
$result['FHRSEstablishment']['EstablishmentCollection'] //... 
```

如果您希望能够`$result`使用对象表示法访问您的，您应该将其定义为：

```
$result = json_decode($trends) //without 2nd parameter = true 
```

# ruby-on-rails - 如何操作键入/粘贴到文本字段中的内容并将结果保存到 ruby on rails 中的数据库？

> ID：10785458
> 
> 赞同：1
> 
> 时间：2012-05-28T13:27:50.347
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我想将 youtube URL 的 youtube 嵌入链接版本存储在我的数据库中。我有一个助手可以帮助将用户粘贴的链接转换为嵌入版本。

无论如何，在保存之前，我想对其进行转换，然后将转换后的值传递给模型以进行保存。我在控制器中创建了一个方法，用于将链接参数传递给进行转换的辅助方法。

无论如何，这没有任何影响。粘贴到文本框中的原始链接将被保存。我已经尝试在模型中使用 before_save 和 self.link 执行此操作，但它也不起作用。以下是我当前的代码。

**形式：**

```
= form_for @micropost, :remote => true do |f|
  = f.text_field :link, :class => "addLinkField"
  = f.submit 
```

**转换粘贴链接的助手：**

```
module OgpObjectsHelper
  def video_embed(video_url)
    if video_url[/(https?):\/\/(www.)?(youtube\.com\/watch\?v=|youtu\.be\|youtube\.com\/watch\?feature=player_embedded&v=)([A-Za-z0-9_-]*)(\&\S+)?(\S)*/]youtube_id = $4
      "http://www.youtube.com/embed/#{ youtube_id }"
  end
end 
```

**控制器：**

```
class MicropostsController < ApplicationController
  include OgpObjectsHelper

  before_filter :convert_video_link

  def create
    @micropost = current_user.microposts.build(params[:micropost])
        respond_to do |format|
            if @micropost.save
              format.html { render :partial => '/users/partials/micropost'} 
            end
        end
  end

  def convert_video_link
    video_embed(params[:micropost][:link])
  end

end 
```

我将不胜感激最好的方法解决方案谢谢。

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:55:37.103

在上面的代码中，您需要将`convert_video_link`方法修改为：

> params[:micropost][:link] = video_embed(params[:micropost][:link])

由于您仍在从`param`值创建记录。现有的方法不会改变这些参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T13:58:46.623

将其放入您的 Micropost 模型中，如果与 youtube 格式不匹配，请不要忘记验证 cos，链接现在将为 nil

```
# micropost.rb 
include OgpObjectsHelper

before_validate :convert_video_link

protected 
def convert_video_link
  self.link = video_embed(link)
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T14:06:17.090

问题在于你的助手。您正在尝试将`link`属性设置为正则表达式中的第四个反向引用，但实际上并未分配该值。过滤器只返回一个链接，但没有将模型上的任何属性设置为该链接。我的建议是将其移至模型的 before_save 中。以下未经测试的代码应该可以做到。

```
class Micropost

before_save :convert_video_url

def convert_video_url
  url = self.link
  youtube_id = url.scan(/(https?):\/\/(www.)?(youtube\.com\/watch\?v=|youtu\.be\|youtube\.com\/watch\?feature=player_embedded&v=)([A-Za-z0-9_-]*)(\&\S+)?(\S)*/)[0][3]
  self.link = "http://www.youtube.com/embed/#{ youtube_id }"
end 
```

请注意，如果 YouTube 更改其 URL 的格式，正则表达式将中断。

罗宾

# java - 在java中获取pl/sql数组返回值

> ID：10785459
> 
> 赞同：8
> 
> 时间：2012-05-28T13:27:50.737
> 
> 标签：java, oracle, jdbc, plsql

在 Java 中，如何从`pl/sql`返回数组的函数中获取值。

如果我的 pl/sql 函数返回调用的数组，在 java 中是否可以使用从java 对象`myArray`中获取值？`myArray``callablestatement`

谢谢

更新 1

我在其中调用函数的 Java 代码，但出现异常。

```
PLS-00306: wrong number or types of arguments in call to 'myfunc'

connection = con.getConnection();
        callablestatement = connection.prepareCall("{call myfunc(?,?,?}");
        callablestatement.setInt(1, param1);
        callablestatement.setInt(2, param2);
        callablestatement.setString(3, param3);
        callablestatement.registerOutParameter(4, Types.ARRAY);
        callablestatement.execute();        
        resultSet = callablestatement.getArray(4).getResultSet(); 
```

更新 2

```
private final String PRODECURE_NAME = "{? = call myfunc(?,?,?)}"; 
```

和

```
connection = con.getConnection();
    callablestatement = connection.prepareCall(PRODECURE_NAME);
    callablestatement.registerOutParameter(1, Types.ARRAY);
    callablestatement.setInt(2, param1);
    callablestatement.setInt(3, param2);
    callablestatement.setString(4, param3);

    callablestatement.execute();

create or replace type dates
       is varray(100) of varchar2(32); 
```

功能

```
CREATE OR REPLACE function myfunc (    
    p_id    IN number,
    p_c_id     IN number,
    p_co_no     IN number

)
    RETURN dates
AS
    myarray contract_dates;
    par1        VARCHAR2 (32);
    par2        VARCHAR2 (32); 
```

固定更新 3

```
connection = con.getConnection();
        callablestatement = 
                connection.prepareCall("begin ? :=myfunc(?,?,?); end;");
        callablestatement.registerOutParameter(1, OracleTypes.ARRAY, "DATES");
        callablestatement.setInt(2, param1);
        callablestatement.setInt(3, param2);
        callablestatement.setString(4, param3);
        callablestatement.execute(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T13:58:55.347

我没有这样做，`ARRAY`但它应该有效。首先，您必须注册`out`函数的参数。所以它可以是这样的。

```
private final String PRODECURE_NAME = "{? = call <ProcedureName>(?,?,?)}";

Connection con = null;
CallableStatement cs = null;

       try {
            con = DAOFactory.getDatabaseConnection();
            cs = con.prepareCall(PRODECURE_NAME);
            cs.registerOutParameter(1, java.sql.Types.ARRAY);
            cs.setYourType(2, <yourData>);
            cs.setYourType(3, <yourData>);
            cs.setYourType(4, <yourData>);
            cs.execute();
            Array arr = cs.getArray(1);
            if (arr != null) {
               String[] data = (String[]) arr.getArray();
            }
        } 
        catch (SQLException ex) {
            Logger.getLogger(OracleLiekDAO.class.getName()).log(Level.SEVERE, null, ex);
            try {
                con.rollback();
            }
        }
        finally {
            if (con != null) {
                try {
                    con.close();
                } 
                catch (SQLException ex) {
                    Logger.getLogger(OracleLiekDAO.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
        } 
```

试试这个人，然后告诉我是否这样做。

**编辑：**

这些字符**？**表示您将设置的一个参数（它被命名为参数化）。所以这：

```
cs.setYourType(2, <yourData>);
cs.setYourType(3, <yourData>);
cs.setYourType(4, <yourData>); 
```

意味着您设置了三个参数（？），方法的第一个参数是列索引，第二个是您特定类型的数据。

* * *

**编辑2：**

很抱歉我写了不好的解决方案，已经更新了，所以现在检查代码并尝试一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T13:37:35.353

从 PL/SQL 返回的 myArray 是**java.sql.Array**类型。您可以对其调用**getArray()**并对其进行类型转换以获取**java array**。

```
String[] array = (String[]) myArray.getArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T13:41:26.123

是的，您需要在[此处](https://stackoverflow.com/questions/5942203/callablestatement-registeroutparameter-multiple-row-result)`registerOutParameter`键入`Types.ARRAY`
查看示例

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T13:41:40.027

[JDBC 规范](http://jcp.org/aboutJava/communityprocess/final/jsr221/index.html)包含专门用于处理数组的整个部分（16.5）。你可能想看看。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-28T13:42:59.220

我相信您可以使用 SerialArray 类中存在的以下方法，该类是 java.sql.Array 的直接后代：

```
Object getArray(Map<String, Class<?>> map) 
```

这里的 Map 是一个对象及其属性的持有者，该对象将被映射到返回数组中获取的结果集。

有关更多详细信息，请参阅[http://docs.oracle.com/javase/1.5.0/docs/api/javax/sql/rowset/serial/SerialArray.html](http://docs.oracle.com/javase/1.5.0/docs/api/javax/sql/rowset/serial/SerialArray.html) javadoc

# box-api - Box API 2.0 创建文件夹 404 错误

> ID：10785463
> 
> 赞同：2
> 
> 时间：2012-05-28T13:27:57.547
> 
> 标签：box-api

我在移动设备上使用 Box API 2.0 版。我可以让文件上传/下载并让文件夹/文件信息正常工作。

当我尝试创建一个新文件夹时，我得到 404 作为 HTTP 状态。

请求 URL 地址[https://api.box.com/2.0/folders/0](https://api.box.com/2.0/folders/0)（在根目录下创建文件夹）。

附加标题

1.  身份验证标头

2.  L“内容类型”，L“应用程序/x-www-form-urlencoded”

3.  L“内容长度”，9

POST 请求正文“名称=测试”

任何帮助，将不胜感激。

最好的问候， Karthik

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T03:30:27.853

帖子正文[应该是 JSON](http://developers.box.com/docs/#api-basics)，而不是表单。在您的情况下，您将发送如下内容：

```
{
"name": "test"
} 
```

# ios - IOS：GLPaint 擦除图像视图

> ID：10785468
> 
> 赞同：1
> 
> 时间：2012-05-28T13:28:15.840
> 
> 标签：ios, xcode, opengl-es, brush

我正在使用 GLPaint 在 UIView 内进行绘制，但我不想使用擦除画笔。我知道有一个擦除刷的代码是：

```
glBlendFunc(GL_ONE, GL_ZERO);
glColor4f(0, 0, 0, 0.0); 
```

但是如果我在我的 UIView 中放入一个 imageView 我也想删除它.​​.....这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:13:22.890

有几种可能的方法可以做到这一点，但这是我首先要尝试的方法。在你的内部`PaintingView`，绘制一个纹理四边形，上面有纹理的图像。然后用你的笔画在上面画一个带纹理的四边形。将混合模式设置为正常过度模式 ( `glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);`)。然后，无论源 alpha 为 0，您都会看到带有纹理的四边形图像。

# wordpress - wordpress 缩略图下的文本太宽。需要像素限制

> ID：10785470
> 
> 赞同：2
> 
> 时间：2012-05-28T13:28:25.183
> 
> 标签：wordpress, text, width

我的缩略图是由用户的帖子生成的，标题写在下面。我的缩略图是 156 像素宽。

目前我正在使用 mb_strlen 将字符数限制为 24，然后...

如果某人的头衔是

“从前，汤姆的房子被烧毁了。”

缩略图下的标题显示为

“从前，汤姆#&s……”

哪个合适（即使我无法解决撇号问题 - 请也帮忙）。

但如果标题是

“从前，汤姆的房子被烧毁了。”

然后它下降到第二行，因为文本更宽（即使在这个编辑框中文本是统一的），它看起来像这样

'曾几何时

, 汤姆#&S...'

为了适应人们有时使用的大写字母，我不得不将 mb_strlen 设置为 12 左右，这在英语中是没有用的。

那么有人可以告诉我如何更改下面的代码，以便尊重 156 像素宽度而不是字符数吗？

```
<p><a href="<?php the_permalink() ?>"><?php if ( mb_strlen(get_the_title()) >= 24 ) echo mb_substr( get_the_title(), 0, 24 ).'...'; else the_title(); ?></a></p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:13:02.920

我认为解决您的问题的最佳解决方案是像这样的解决方案，使用 CSS 和旧版浏览器的 jQuery 后备？

[jQuery 基于像素宽度截断文本](https://stackoverflow.com/a/4225897/735782)

# c++ - 指针和性能影响？

> ID：10785471
> 
> 赞同：5
> 
> 时间：2012-05-28T13:28:27.047
> 
> 标签：c++

使用指针时是否会影响性能？

避免使用指针会更好吗？如果是，在什么情况下？显然，它们与引用一起有助于减少数据复制。我假设如果指向的数据类型很小，那么对指针的需求就会更小。相反，最好通过指针传递大对象，因为指针的开销小于复制对象的开销。

我还想知道参数/参数以外区域的指针？

在这种性能上下文中，引用通常比指针更好吗？

我很感激我正在接近微优化的“肮脏”主题，但我正在编写一个非常关注延迟的应用程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T13:53:39.093

我知道性能可能很重要，但语义*更*重要：快速和错误是无用的。

使用指针或引用具有语义含义，例如共享：

```
void foo(A& a) {
    a.a = 1;
    if (a.b != 0) { throw ... }
    a.b = 0;
} 
```

在这种情况下`a.b == 0`，第一个字段`a`已更改，但第二个字段未更改。

此外，此类共享可能会产生潜在的混叠：

```
void foo(struct A a, struct A b);

void foo(struct A* a, struct A* b); 
```

在第一种情况下，这两种结构必然是不同的，但在后一种情况下却不是。这种可能的别名可能会阻止优化。

首先关注语义。一旦你把它们做对了，你就可以在你的特定情况下调整和衡量效果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T13:36:55.990

> 在这种性能上下文中，引用通常比指针更好吗？

是的，尽可能使用引用，必要时使用指针。**在性能方面，它们是相同的。**

通常最好通过引用或指针传递大型结构以防止额外的复制，是的。

> 通过指针或引用访问变量或对象可能与直接访问它一样快。这种效率的原因在于微处理器的构造方式。在函数中声明的所有非静态变量和对象都存储在堆栈中，并且实际上是相对于堆栈指针进行寻址的。同样，在类中声明的所有非静态变量和对象都通过 C++ 中称为“this”的隐式指针访问。因此，我们可以得出结论，结构良好的 C++ 程序中的大多数变量实际上都是通过指针以一种或另一种方式访问​​的。因此，必须设计微处理器以使指针高效，这就是它们的本质。

虽然有**一些**缺点，但它们适用于指针和引用：

> 但是，使用指针和引用也有缺点。最重要的是，它需要一个额外的寄存器来保存指针或引用的值。寄存器是一种稀缺资源，尤其是在 32 位模式下。如果没有足够的寄存器，则每次使用时都必须从内存中加载指针，这会使程序变慢。另一个缺点是指针的值需要几个时钟周期才能访问指向的变量。

这里[是来源](http://www.agner.org/optimize/optimizing_cpp.pdf)。如果你问这个问题，我想你会发现它是一本好书。

让我们看一些代码：

```
 int x = 0;
00412E0E  mov         dword ptr [x],0 
   foo(x);
00412E15  lea         eax,[x] 
00412E18  push        eax  
00412E19  call        foo (4111C2h) 
00412E1E  add         esp,4 
   foo(&x);
00412E21  lea         eax,[x] 
00412E24  push        eax  
00412E25  call        foo (4111BDh) 
00412E2A  add         esp,4 
```

**调用函数时没有区别。**

```
void foo (int& x)
{
00411370  push        ebp  
00411371  mov         ebp,esp 
00411373  sub         esp,0C0h 
00411379  push        ebx  
0041137A  push        esi  
0041137B  push        edi  
0041137C  lea         edi,[ebp-0C0h] 
00411382  mov         ecx,30h 
00411387  mov         eax,0CCCCCCCCh 
0041138C  rep stos    dword ptr es:[edi] 
   x = 3;
0041138E  mov         eax,dword ptr [x] 
00411391  mov         dword ptr [eax],3 
}

void foo (int* x)
{
004117A0  push        ebp  
004117A1  mov         ebp,esp 
004117A3  sub         esp,0C0h 
004117A9  push        ebx  
004117AA  push        esi  
004117AB  push        edi  
004117AC  lea         edi,[ebp-0C0h] 
004117B2  mov         ecx,30h 
004117B7  mov         eax,0CCCCCCCCh 
004117BC  rep stos    dword ptr es:[edi] 
   *x = 3;
004117BE  mov         eax,dword ptr [x] 
004117C1  mov         dword ptr [eax],3 
} 
```

**功能内部没有区别。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T14:08:27.287

这取决于指针指向的位置。如果在堆栈上分配对象并且您在许多情况下传递指针参数将比指向堆上对象的指针更快。如果您传递的对象在大多数机会已经被 CPU 缓存之前在函数中被积极使用，那么性能将大致相同。

关于复制... 大多数编译器将使用 CPU 寄存器来传递指针，这是 CPU 中可用的最快内存。但是，如果您将作为值传递，编译器将需要复制整个对象并调用 ctor / dtor。

所以我的建议是尝试将东西放在堆栈上并通过指针/引用传递。

很难说性能不是恒定的，并且可能会在不同的硬件/操作系统/编译器上发生变化，所以我的建议是使用分析器工具对代码进行分析，以分析缓存未命中、内存碎片、cpu 使用率等问题。

[http://en.wikipedia.org/wiki/VTune](http://en.wikipedia.org/wiki/VTune)

[http://developer.amd.com/tools/CodeAnalyst/Pages/default.aspx](http://developer.amd.com/tools/CodeAnalyst/Pages/default.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T13:36:35.990

通过指针访问数据比直接访问数据要慢一些，但取消引用操作非常快，这通常没什么大不了的，除非您正在执行一些非常具体的重复数字运算任务。

关于传递大对象和小对象的指针，您是完全正确的。例如，int* 和 int 的大小可能相同，具体取决于实现。

引用和指针在性能方面通常是相同的。但是，如果您习惯使用 const Foo& 而不是 Foo*，编译器通常可以更好地优化您的代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-28T13:40:14.783

您对基于堆的对象的最大问题是，当您需要它们时，它们通常不会放在一起，这意味着您需要更多时间将这些对象读入 CPU 缓存以处理它们（即，如果您有 10 个对象您需要使用的，如果它们都是连续分配的，则单个内存读取将一次性将它们全部推入缓存，如果它们分散在整个堆中，则需要对它们中的每一个进行读取）。

公平地说，这适用于所有堆系统，包括垃圾收集系统，即使在垃圾压缩之后也是如此。答案（显然）是将这些对象一起分配，或者提供一个带有空闲空间的缓冲区，以便随着时间的推移将它们分配到其中。

指针的另一个问题是您需要间接访问指针对象。如果你有一个对象数组，你很好——它们通常是连续的。但是，如果您有一个指针数组，则必须读取这些指针才能找出读取对象的位置。

现在，指针也可以很快——如果你使用指针算法来访问你的连续对象（因为你只需要读取一个指针来找出所有对象的位置）。

所以简而言之，问题不在于指针本身，而在于你如何组织它们指向的数据。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-05-28T13:37:14.527

使用指针对性能没有影响。指针的使用非常快。在大多数（所有？）专业项目中，指针被用作常用工具。它们用于在任何地方构建列表、队列、地图、树、数据库。习惯他们！！！

# .htaccess - 如何让 .htaccess RewriteCond 检查域名？

> ID：10785475
> 
> 赞同：24
> 
> 时间：2012-05-28T13:28:50.863
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我有这个规则：

```
RewriteRule ^(about|installation|mypages|privacy|terms)(/)*$    
/index.php?kind=portal&id=1&page=$1&%{QUERY_STRING} [L] 
```

例如，如何更改它以使其仅适用于特定域`www.domain.com`？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-28T13:40:47.757

你需要一个重写条件：

```
RewriteCond %{HTTP_HOST} ^www.domain.com$ 
```

在你的重写规则之前。

如果您在规则之前列出多个重写条件，则每个条件都必须匹配才能执行 RewriteRule，例如：

```
RewriteCond %{HTTP_HOST} ^www.domain.com$
RewriteCond %{HTTP_HOST} ^www.domain2.com$ 
```

这当然行不通，因为 HTTP_HOST 不能同时包含两个值。

然后您必须使用 [OR] 修饰符：

```
RewriteCond %{HTTP_HOST} ^www.domain.com$ [OR]
RewriteCond %{HTTP_HOST} ^www.domain2.com$ 
```

以便在上述任何条件匹配时执行 RewriteRule。

有关详细信息，请参阅[http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html#rewritecond](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html#rewritecond)。

# objective-c - 未能正确声明/实现 UITableViewDataSource 方法

> ID：10785479
> 
> 赞同：1
> 
> 时间：2012-05-28T13:28:55.143
> 
> 标签：objective-c, cocoa-touch, uitableview

我有一个`UIViewController`我想用来实现`UITableViewDataSource`on 的方法。我有这个标题，`FriendsController.h`：

```
#import <UIKit/UIKit.h>
@interface FriendsController : UIViewController <UITableViewDataSource>
@end 
```

**编辑：**现在将`@interface`声明更新为：

```
@interface FriendsController : UIViewController <UITableViewDataSource, UITableViewDelegate> 
```

和这个实现，`FriendsController.m`：

```
#import "FriendsController.h"

@implementation FriendsController

- (NSInteger)tableView:(UITableView *)tableView 
numberOfRowsInSection:(NSInteger)section
{
  // Return the number of rows in the section.
  NSLog(@"CALLED .numberOfRowsInSection()");
  return 1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  NSLog(@"CALLED cellForRowAtIndexPath()");
  UITableViewCell *cell = [tableView
                             dequeueReusableCellWithIdentifier:@"FriendCell"];
  cell.textLabel.text = @"Testing label";
  return cell;
}
@end 
```

运行时，这给了我一个' `-[UIView tableView:numberOfRowsInSection:]: unrecognized selector sent to instance 0x81734d0`'。谁能看看我的实现/声明是否有问题`.numberOfRowsInSection()`？

**编辑：我从**[这里](https://stackoverflow.com/questions/330030/list-selectors-for-obj-c-object)添加了一种方法列表技术并运行视图“未连接”，它输出以下列表：

```
[<timestamp etc>] Method no #0: tableView:numberOfRowsInSection:
[<timestamp etc>] Method no #1: tableView:cellForRowAtIndexPath:
[<timestamp etc>] Method no #2: numberOfSectionsInTableView:
[<timestamp etc>] Method no #3: tableView:didSelectRowAtIndexPath:
[<timestamp etc>] Method no #4: viewDidLoad 
```

**发布脚本：** @ThisDarkTao 和@Pei 都做对了，这可以在我之前记录视觉部分的问题中看到，[here](https://stackoverflow.com/questions/10783206/several-widgets-using-xcode-storyboard-or-doing-it-wrong)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:35:53.587

您需要添加`UITableViewDelegate`到接口文件中的协议列表中，如下所示：`<UITableViewDataSource, UITableViewDelegate>`

您还需要以下所有委托方法：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return 1; // Number of rows
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = @"Test Cell";

    return cell;
} 
```

在您的 xib/storyboard 视图中，您还需要将 tableview 的委托和数据源连接连接到 viewcontroller。

如果您希望您的单元格在您点击它们时“做某事”，您还需要实现以下委托方法：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSLog(@"Tapped cell %d",indexPath.row);     
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T14:23:10.327

如果您在项目中使用 Storyboard，则必须在 Storyboard 的`UIViewController`Identity Inspector 上将 Class 字段设置为您的“FriendsController”。因此，您可以展示您`UIVIewController`正在使用正确的类（在这种情况下，为您提供 FriendController）。

裴。

# c++ - XP 中的 midi 驱动程序支持多个 midi 引脚

> ID：10785484
> 
> 赞同：3
> 
> 时间：2012-05-28T13:29:24.890
> 
> 标签：c++, windows, device-driver, midi

我正在尝试创建一个微型端口驱动程序（IMiniportDMus），它将公开两个 MIDI 输入和两个 MIDI 输出引脚（旧版）。在 Windows Vista 和 Win 7 中，当我使用 midiInXXX 和 midiOutXXX 函数时，我会看到这些引脚，但在 Windows XP 中，我只看到一个 midi in 和一个 midi out 引脚。

这是我的引脚描述符数组：

```
static PCPIN_DESCRIPTOR MiniportPins[] =
{
    {
    kMaxNumLegacyRenderStreams, kMaxNumLegacyRenderStreams, 0,  // InstanceCount
    NULL,                                                       // AutomationTable
    {                                                           // KsPinDescriptor
        0,                                                      // InterfacesCount
        NULL,                                                   // Interfaces
        0,                                                      // MediumsCount
        NULL,                                                   // Mediums
        SIZEOF_ARRAY(PinDataRangePointersStreamLegacy),         // DataRangesCount
        PinDataRangePointersStreamLegacy,                       // DataRanges
        KSPIN_DATAFLOW_IN,                                      // DataFlow
        KSPIN_COMMUNICATION_SINK,                               // Communication
        (GUID *) &KSCATEGORY_AUDIO,                             // Category
        &KSAUDFNAME_MIDI,                                       // Name
        0                                                       // Reserved
    }
},
{
    kMaxNumCaptureStreams, kMaxNumCaptureStreams, 0,            // InstanceCount
    NULL,                                                       // AutomationTable
    {                                                           // KsPinDescriptor
        0,                                                      // InterfacesCount
        NULL,                                                   // Interfaces
        0,                                                      // MediumsCount
        NULL,                                                   // Mediums
        SIZEOF_ARRAY(PinDataRangePointersStreamLegacy),         // DataRangesCount
        PinDataRangePointersStreamLegacy,                       // DataRanges
        KSPIN_DATAFLOW_OUT,                                     // DataFlow
        KSPIN_COMMUNICATION_SINK,                               // Communication
        (GUID *) &KSCATEGORY_AUDIO,                             // Category
        &KSAUDFNAME_MIDI,                                       // Name
        0                                                       // Reserved
    }
},
{
    kMaxNumLegacyRenderStreams, kMaxNumLegacyRenderStreams, 0,  // InstanceCount
    NULL,                                                       // AutomationTable
    {                                                           // KsPinDescriptor
        0,                                                      // InterfacesCount
        NULL,                                                   // Interfaces
        0,                                                      // MediumsCount
        NULL,                                                   // Mediums
        SIZEOF_ARRAY(PinDataRangePointersStreamLegacy),         // DataRangesCount
        PinDataRangePointersStreamLegacy,                       // DataRanges
        KSPIN_DATAFLOW_IN,                                      // DataFlow
        KSPIN_COMMUNICATION_SINK,                               // Communication
        (GUID *) &KSCATEGORY_AUDIO,                             // Category
        &KSAUDFNAME_MIDI,                                       // Name
        0                                                       // Reserved
    }
},
{
    kMaxNumCaptureStreams, kMaxNumCaptureStreams, 0,            // InstanceCount
    NULL,                                                       // AutomationTable
    {                                                           // KsPinDescriptor
        0,                                                      // InterfacesCount
        NULL,                                                   // Interfaces
        0,                                                      // MediumsCount
        NULL,                                                   // Mediums
        SIZEOF_ARRAY(PinDataRangePointersStreamLegacy),         // DataRangesCount
        PinDataRangePointersStreamLegacy,                       // DataRanges
        KSPIN_DATAFLOW_OUT,                                     // DataFlow
        KSPIN_COMMUNICATION_SINK,                               // Communication
        (GUID *) &KSCATEGORY_AUDIO,                             // Category
        &KSAUDFNAME_MIDI,                                       // Name
        0                                                       // Reserved
    }
}
}; 
```

如果 Windows XP 支持多个 midi 引脚，我找不到任何信息。我什至通过定义特定的 GUID 并注册它们来更新引脚名称。

这是一个已知问题还是我做错了什么？

# ruby-on-rails - Ruby 浮点数学 - Sum Calc 中的精度问题

> ID：10785487
> 
> 赞同：7
> 
> 时间：2012-05-28T13:29:40.007
> 
> 标签：ruby-on-rails, ruby, validation, math, floating-point

大家早上好，

我在浮点数学方面遇到了一些问题，完全迷失在“.to_f”、“*100”和“.0”中！

我希望有人可以帮助我解决我的具体问题，并准确解释他们的解决方案为什么有效，以便我下次理解这一点。

我的程序需要做两件事：

1.  对小数列表求和，确定它们的总和是否正好为 1.0
2.  确定 1.0 和数字总和之间的差 - 将变量的值设置为精确的差，使总和等于 1.0。

例如：

1.  [0.28, 0.55, 0.17] -> 总和应为 1.0，但我一直得到 1.xxxxxx。我正在以下列方式实现总和：

    ```
    sum = array.inject(0.0){|sum,x| sum+ (x*100)} / 100 
    ```

2.  我需要这个功能的原因是我正在读取一组来自 excel 的小数。它们不是 100% 精确的（它们缺少一些小数点），因此总和通常来自 0.999999xxxxx 或 1.000xxxxx。例如，我将获得如下值：

    ```
    0.568887955,0.070564759,0.360547286 
    ```

为了解决这个问题，我可以取前 n-1 个数字的总和，然后稍微改变最终数字，使所有数字总和为 1.0（必须使用上面的等式或任何我最终得到的验证） ）。我目前正在实施如下：

```
 sum = 0.0
          array.each do |item|
            sum += item * 100.0
          end
          array[i] = (100 - sum.round)/100.0 
```

我知道我可以用注入来做到这一点，但我试图用它来看看有什么用。我认为这通常是有效的（通过检查输出），但它并不总是满足上面的验证总和。所以如果需要，我也可以调整这个。请注意，我在这些数字中只需要两个小数精度 - 即 0.56 而不是 0.5623225。我可以在演示时或在此计算期间将它们四舍五入……这对我来说并不重要。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-28T14:01:54.970

如果准确性对您很重要，则不应使用浮点值，根据定义，浮点值是不准确的。Ruby 有一些精度数据类型用于计算精度很重要的算术。它们是，在我的脑海中[`BigDecimal`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/bigdecimal/rdoc/BigDecimal.html)，[`Rational`](http://www.ruby-doc.org/core-1.9.3/Rational.html)和[`Complex`](http://www.ruby-doc.org/core-1.9.3/Complex.html)，取决于您实际需要计算的内容。

看来，在您的情况下，您正在寻找的是 BigDecimal，它基本上是一个具有固定位数的数字，其中小数点后有固定位数（与浮点相反，它小数点后有任意位数）。

当您从 Excel 中读取数据并故意将“0.9987”之类的字符串转换为浮点数时，您会立即丢失字符串中包含的准确值。

```
require "bigdecimal"
BigDecimal("0.9987") 
```

该值是精确的。它是 0.9987。不是 0.998732109 或任何接近它的值，而是 0.9987。您可以对其使用所有常用的算术运算。如果您不将浮点数混入算术运算中，则返回值将保持精确。

如果您的数组包含您从 Excel 获得的原始字符串（即您没有`#to_f`'d 它们），那么这将为您提供一个 BigDecimal，它是它们之和与 1 之间的差异。

```
1 - array.map{|v| BigDecimal(v)}.reduce(:+) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T14:01:22.433

任何一个：

*   继续使用浮点数和`round(2)`你的总数：`12.341.round(2) # => 12.34`

*   使用整数（即美分而不是美元）

*   使用 BigDecimal 并且你不需要在对它们求和后进行四舍五入，只要你从 BigDecimal 开始只有两位小数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T16:35:54.257

我认为算法与准确性和精度的关系比选择 IEEE 浮点数而不是另一种表示法有很大关系。

人们过去常常在处理准确性和精度问题的同时进行一些精细计算。他们会通过管理他们使用的算法并理解如何更深入地表示函数来做到这一点。我认为你可能会犯错误，抛开更好的理解并假设另一种表示是解决方案。

例如，函数的多项式表示不能正确处理渐近线或奇点。

不要这么快丢弃浮点数。我可能会更聪明地使用它们的方式会做得很好。

# c++ - 如何允许工作线程更新 X11 窗口？

> ID：10785491
> 
> 赞同：2
> 
> 时间：2012-05-28T13:29:50.207
> 
> 标签：c++, x11

我有一个我试图修改的应用程序，以便工作线程可以告诉窗口用新数据更新自己。

变量定义如下：

```
Display *d;
Window w;
XEvent exppp; 
```

该窗口以以下代码启动：

```
XEvent e;

d = XOpenDisplay(NULL);
if (d == NULL) 
  return 0;

s = DefaultScreen(d);
w = XCreateSimpleWindow(d, RootWindow(d, s), 10, 10, 200, 800, 1,
                        BlackPixel(d, s), WhitePixel(d, s));
XSelectInput(d, w, ExposureMask | KeyPressMask);
XMapWindow(d, w);

while (1) {
  XNextEvent(d, &e);
  if (e.type == Expose || e.type == KeyPress) {
    // redraw routine goes here
  }
} 
```

我试图用来重绘窗口的是一个可以被另一个线程调用的函数：

```
void graphical_out::redraw()
{
  exppp.type = Expose;
  XSendEvent(d, w, false, Expose, &exppp);
} 
```

并且窗口仅在调整大小或收到按键时才会自行更新。这似乎有点像一个新手问题，但谷歌在这个问题上让我失望了。对我做错了什么有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T16:32:42.727

1.  你的论点`XSendEvent`是错误的。您需要传递掩码 ( `ExposureMask`)，而不是事件类型。
2.  `exppp.xexpose.window = w;`是强制性的（的窗口参数`XSendEvent`不是结构*的*窗口`XEvent`）。
3.  在发送之前清理事件：`memset(&exppp, 0, sizeof(exppp));`，以防万一。
4.  Xlib 不是线程安全的，从多个线程调用它的函数*可能*很危险。

**更新**在多线程程序中，需要在`XFlush`这里和那里调用（尽管多线程不能保证与 Xlib 一起工作）。

这段代码对我有用：

```
#include <X11/Xlib.h>
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>
#include <memory.h>

Display *d;
Window w;
int s;

void* tp (void* q)
{
    XEvent exppp;

    while (1)
    {
        sleep (3);
        printf ("Sending event of type Expose\n");
        memset(&exppp, 0, sizeof(exppp));
        exppp.type = Expose;
        exppp.xexpose.window = w;
        XSendEvent(d,w,False,ExposureMask,&exppp);
        XFlush(d);
    }
    return NULL;
}

int main ()
{
    XEvent e;
    pthread_t thread;

    d = XOpenDisplay(NULL);
    if (d == NULL)
        return 0;

    s = DefaultScreen(d);
    w = XCreateSimpleWindow(d, RootWindow(d, s), 10, 10, 200, 800, 1,
                            BlackPixel(d, s), WhitePixel(d, s));
    XSelectInput(d, w, ExposureMask | KeyPressMask);
    XMapWindow(d, w);

    pthread_create(&thread, NULL, tp, NULL);

    while (1) {
        XNextEvent(d, &e);
        if (e.type == Expose) {
            printf ("Got Expose event%s\n", e.xexpose.send_event ? " (SendEvent)" : "");
        }
        else if (e.type == KeyPress) {
            printf ("Got KeyPress event%s\n", e.xkey.send_event ? " (SendEvent)" : "");
        }
    }
} 
```

它可能对你有用，或者它可能会爆炸。Xlib 不是线程安全的，使用风险自负。

# ms-office - OPENXML SDK VS Microsoft 平台互操作程序集

> ID：10785495
> 
> 赞同：2
> 
> 时间：2012-05-28T13:30:02.267
> 
> 标签：ms-office, openxml, office-pia

我有一个要求，我需要扫描 Office 文档并删除文件/文档中嵌入的任何元数据。我是在 Microsoft Office 上开发应用程序的新手，发现我可以使用平台互操作程序集或 OPENXML SDK 来处理 Office 文档（word、excel 和 powerpoint）。

但是，我找不到任何解释 PIA 和 OPENXML 之间区别的源/链接。谁能解释一下何时需要查看哪个选项以及哪个选项易于使用（即，学习曲线上的努力更少）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:56:56.180

PIA 的最大问题是您将处理 COM 互操作非托管环境。以下是[区别](http://sharepoint2010master.blogspot.co.uk/2011/12/advantages-of-openxml-over-interop-for.html)

# extjs - Ext js 4 可编辑网格+salesforce

> ID：10785497
> 
> 赞同：1
> 
> 时间：2012-05-28T13:30:04.423
> 
> 标签：extjs, salesforce

我需要从 salesforce 中的可编辑网格 ext js 中保存更改。

[ExtJS 4 > 行编辑器网格 > 如何更改“更新”按钮文本](https://stackoverflow.com/questions/7750529/extjs-4-row-editor-grid-how-to-change-update-button-text)

上面的这个链接包含行编辑......当我点击更新按钮......我需要将数据发送给salesforce..你能给我一个简单的例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:52:54.533

订阅`edit`您的行编辑插件的事件：[http ://docs.sencha.com/ext-js/4-0/#!/api/Ext.grid.plugin.RowEditing-event-edit](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.grid.plugin.RowEditing-event-edit)

# solr - Apache Solr：更像这种定制

> ID：10785504
> 
> 赞同：4
> 
> 时间：2012-05-28T13:30:51.317
> 
> 标签：solr, lucene

我正在使用 Solr 来处理我的文本搜索需求。现在在 f1 上启用了 MLT（更像这样）。f2 是我的日期字段。我想要 f1 上的 MLT 结果，但我只想要它们来自我的数据库的一个子集，即某个日期之后的结果（f2 上的范围查询）。如何自定义 MLT 以便可以在 f2（非 MLT 字段）上添加此范围查询？

我是 Solr 和 Java 的新手。任何基本的帮助都将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T13:36:26.410

根据[https://wiki.apache.org/solr/MoreLikeThisHandler](https://wiki.apache.org/solr/MoreLikeThisHandler)，MoreLikeThisHandler 支持 CommonQueryParameters。这意味着您应该能够在`fq`搜索中添加（过滤查询）参数，并在 f2 介于某物和其他物之间进行过滤。例如：

```
fq=f2:["2011-03-21" TO "2012-03-21"] 
```

这就是说，从 MLT 中找到所有结果，然后添加此过滤查询。

# c++ - 指向类对象c ++的多维向量数组

> ID：10785505
> 
> 赞同：0
> 
> 时间：2012-05-28T13:30:51.547
> 
> 标签：c++, vector, multidimensional-array

我不确定发生了什么，因为我对 c++ 比较陌生

我在主循环上方全局定义了以下内容

```
vector<Character*> monsters[2][3][6];
vector<Item*> loot[2][3][6];
vector<NPC*> npc[2][3][6];
vector<Objects*> objects[2][3][6]; 
```

在我的 Character.h 文件中，我还定义了 objects 数组

```
extern vector<Objects*> objects[2][3][6]; 
```

在我创建对象数组之前，一切正常。
看来，如果我向怪物数组中添加超过 8 个对象，奇怪的值就会开始出现在对象中，并且对象的大小会增加。
我的代码一团糟，我不确定我应该在这里包含什么。我希望这足以让您了解我在做什么。

我还没有彻底测试过这个，所以它很可能发生在我所有的阵列上......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:28:59.853

最终，您想编写`Grid`适合您需要的自己的小类，或者使用[Boost.MultiArray](http://www.boost.org/doc/libs/1_49_0/libs/multi_array/doc/index.html)来处理这种情况。从长远来看，使用嵌套的原始数组会导致混乱。也许您还想避免存储指针并按值存储对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:41:10.713

看起来怪物阵列不够大，所以它“溢出”并将对象放置在阵列之外，从而最终进入另一个阵列。

给您带来的不便深表歉意。我希望这可以帮助别人。

# java - Java：日期格式转换问题

> ID：10785506
> 
> 赞同：0
> 
> 时间：2012-05-28T13:31:02.190
> 
> 标签：java, simpledateformat

我有格式的日期`EEE MMM dd HH:mm:ss zzz yyyy`

我必须将其转换为`dd/MM/yyyy`

我做了以下事情：

```
SimpleDateFormat fmt = new SimpleDateFormat("EEE MMM dd HH:mm:ss zzz yyyy");
SimpleDateFormat fmtddMMyyyy = new SimpleDateFormat("dd/MM/yyyy");
java.util.Date d = fmt.parse("Mon May 28 00:00:00 IST 2012");<br>
String formattedDate = fmtddMMyyyy.format(d); 
```

当我尝试打印`d`时，它显示`0027833001988071567`.

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:20:30.933

我不得不猜测您的真实代码与您显示的内容仅略有关联。由于一些实验和文档。

可能原始解析会引发异常，并且您打印的每个内容都与您的日期操作无关。

为了解决问题

*   打印要转换的字符串
*   打印解析的日期
*   打印转换后的字符串
*   使用带有 Locale 参数的构造函数变体，这样 stackoverflow 上的每个人都可以重现它，并且您的应用程序无论在何处运行都可以正常工作。

所有这些都在一个简单的类中，只包含一个包含代码的 main 方法。

如果问题仍然存在，请返回代码及其输出。

部分应用我的建议后，您可能会以这样的方式结束：

```
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Locale;

public class Experiment {
public static void main(String args[]) throws ParseException {
    SimpleDateFormat fmt = new SimpleDateFormat(
            "EEE MMM dd HH:mm:ss zzz yyyy", Locale.US);
    SimpleDateFormat fmtddMMyyyy = new SimpleDateFormat("dd/MM/yyyy",
            Locale.US);
    java.util.Date d = fmt.parse("Mon May 28 00:00:00 IST 2012");
    String formattedDate = fmtddMMyyyy.format(d);
    System.out.println(formattedDate);
}
} 
```

哪个打印出来

```
28/05/2012 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T13:35:42.683

尝试：

```
String formattedDate = fmtddMMyyyy.format(d); 
```

UPD：嗯，我得到了以下解决方案：

```
SimpleDateFormat fmt = new SimpleDateFormat("EEE MMM dd HH:mm:ss z yyyy", Locale.US); 
```

工作正常（没有语言环境定义也不适合我）。因为您根据英语定义月份名称和星期几名称，而不是您的本地语言，我认为。

# jquery - 如何在中继器控制列表中上下移动？

> ID：10785508
> 
> 赞同：1
> 
> 时间：2012-05-28T13:31:11.190
> 
> 标签：jquery

我有像 ul li 这样的绑定转发器控制列表

我需要首先显示用户的前 5 个名称。当用户单击向下箭头时，它将向下移动并获取接下来的五个名称。像其他所有名称一样。如果再次向上移动，它需要显示前 5 个名称。

同时我的焦点[选定名称]高度应始终位于中心名称，例如

1 2 3(selected) 背景颜色 有些人认为 4 5

向下箭头

6 7 8(selected) 背景颜色 有人认为 9 10

就像所有的名字一样。

如何在 jquery 或后面的代码中执行此操作

这是一个中继器示例：

```
<asp:Repeater runat="server" ID="repeater">
    <HeaderTemplate>
        <ul>
    </HeaderTemplate>
    <ItemTemplate>
        <li class="carouselDeptItem_<%# Container.ItemIndex + 1  %>">
           <%#Eval("Name") %>
        </li>
    </ItemTemplate>
    <FooterTemplate>
        </ul>
    </FooterTemplate>
</asp:Repeater> 
```

# internet-explorer - IE ActiveX 将用户代理更改为移动

> ID：10785512
> 
> 赞同：1
> 
> 时间：2012-05-28T13:31:17.447
> 
> 标签：internet-explorer, registry, activex

我正在使用一些使用 IE ActiveX 作为浏览器的软件。

我需要它，让它浏览哪个移动用户代理。

我一直在查看注册表，但找不到如何在 IE ActiveX 控件中设置/更改用户代理。

有没有人知道如何做到这一点，或者是否可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:57:52.463

由于您的应用程序使用 IE ActiveX，因此您的 EXE 和 ActiveX 组件（实际上“只是”一个 DLL）之间存在依赖关系。无法使用注册表更改此依赖关系。Windows 加载程序通常使用客户端（您的应用程序）和服务器（IE ActiveX 组件）的导入地址表 (IAT) 和导出地址表 (EAT) 来解决这些依赖关系 - 当组件被静态绑定时 - 而不是任何注册表设置。

如果您想要更灵活的解决方案，您的应用程序和浏览器之间的绑定必须由您的应用程序动态实现。

# .net - 部署包含 ADO.NET 实体数据模型的 MVC4 网站

> ID：10785516
> 
> 赞同：2
> 
> 时间：2012-05-28T13:31:35.190
> 
> 标签：.net, entity-framework

我创建了一个包含 ADO.NET 实体数据模型（linq 到实体）的 MVC4 网站，但在部署到服务器时出现以下错误

```
[ArgumentException: Unable to find the requested .Net Framework Data Provider.
   It may not be installed.]
System.Data.EntityClient.EntityConnection.GetFactory(String providerString) +251 
```

数据库是 SQL Server (System.Data.EntityClient)，这在我的笔记本电脑上运行良好。服务器是安装了 .NET 4 的 Windows 2008。有谁知道我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:46:41.177

Doh，应用程序池需要“启用 32 位应用程序 = true”

# asp.net-mvc-3 - 架构定义：MVC 3（夏普架构）+多租户

> ID：10785517
> 
> 赞同：2
> 
> 时间：2012-05-28T13:31:38.617
> 
> 标签：asp.net-mvc-3, model-view-controller, multi-tenant, sharp-architecture

我想与您分享我的想法并尝试获得一些建议。我想用尽可能好的架构来定义我的应用程序。任何评论将不胜感激。开始了...

我的技术：Sharp Architecture 1.9（MVC3、NHibernate、Castle Windsor 等）和 SQLServer 数据库

我的业务案例：SaaS 应用程序。许多客户，每个客户有多个用户，每个客户一个数据库和我们代码的相同代码（只有一个实例）

问题：我需要允许多个用户使用相同的代码同时连接到不同的数据库（只需一次安装）。据我所知，Sharp Architecture 默认不支持这些东西

经过一番研究，我发现了一个新概念：多租户。我想这是正确的方法。

所以问题是：

我的假设正确吗？多租户是实现目标的最佳方式吗？

另一方面，我发现了几个有趣的链接：

[http://weblogs.asp.net/zowens/archive/tags/Multi-tenancy/default.aspx（MVC](http://weblogs.asp.net/zowens/archive/tags/Multi-tenancy/default.aspx)方法） [http://msdn.microsoft.com/en-us/library/aa479086.aspx](http://msdn.microsoft.com/en-us/library/aa479086.aspx)

有人可以向我提供其他信息吗？

谢谢你的时间

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T17:43:55.953

多租户是您选择解决需求的正确方式。通过多租户 [每个租户单个数据库和单个代码库]，我们识别租户，然后使用他的数据库来验证他的用户或使用他的租户 ID 来识别他的应用程序数据库，这些只能在启用多租户的代码库中实现.

如果您有兴趣进一步深入研究，请留下您的评论，以便我们推进此讨论并从架构的角度让社区参与进来。

# c# - ASP.NET/C# SqlDataSource 命令和基于表的参数

> ID：10785518
> 
> 赞同：1
> 
> 时间：2012-05-28T13:31:54.373
> 
> 标签：c#, parameters, telerik, sqldatasource

有没有办法根据表名为 SqlDataSource 生成 CRUD 命令和参数？想法是只制作一个页面来处理查找表，它可以有不同的列，因此附加到 Teleriks RadGrid 的 SqlDataSource 可以填充所有具有表名的命令和参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:42:42.370

也许不是一个完整的答案，但希望这至少是一个好的开始。查看[Entity Framework](https://stackoverflow.com/questions/555062/good-entity-framework-sample-applications)和/或[T4 模板](http://t4-editor.tangible-engineering.com/How-Do-I-With-T4-Editor-Text-Templates.htm)（还有一个 VS 插件，用于语法突出显示）。否则，您将不得不查看使用各种泛型的答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:39:24.010

我已经解决了 DropDown`SelectedIndexChange`事件上动态更改的 CRUD 命令属性。无论如何，实体框架将是我将学习的东西

# javascript - 使用正文 onload 和 document.write 时忽略样式表

> ID：10785519
> 
> 赞同：6
> 
> 时间：2012-05-28T13:31:54.403
> 
> 标签：javascript

我正在用 JavaScript 试验来感受它，并且已经遇到了一个问题。这是我的html代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
<link rel="stylesheet" type="text/css" href="styles.css">
<script type="text/javascript" src="testing.js"></script>
</head>
<body onload="writeLine()">
</body>
</html> 
```

这是 JavaScript testing.js：

```
function writeLine()
{
    document.write("Hello World!")
} 
```

这是样式表styles.css：

```
html, body {
    background-color: red;
} 
```

这是一个非常简单的例子，但我可能选择了一个尴尬的例子，在 body 标签中使用 on-load。所以上面的代码加载并运行函数，但是样式表什么都不做，除非我删除头部的脚本标签。我曾尝试将脚本标签放在其他任何地方，但没有任何效果。我在网上研究了如何正确链接到 JavaScript 文件，但没有找到明确的解决方案，谁能指出我的错误？

我以前用过JavaScript，但在我不再使用它之前，我想从一开始就清楚地了解它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T13:40:24.200

您不能`document.write`在文档关闭后使用（它会在`onload`触发时）而不破坏现有文档（包括指向样式表的链接）。

[取而代之的是使用 DOM 操作，这在W3C JavaScript 核心技能](http://www.w3.org/wiki/Web_Standards_Curriculum#JavaScript_core_skills)的第 8 章和第 9 章中有介绍。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T13:41:46.920

你的问题是`document.write()`在错误的时刻被调用^*。此方法在页面的当前位置打印给定的文本，以便在页面仍在加载时工作。因为您在加载整个页面时调用它，所以结果是意外的（未定义？）

相反，您应该直接操作[dom](/questions/tagged/dom "显示标记为“dom”的问题")树：

```
function writeLine() {
    var text = document.createTextNode("Hello World!");
    document.body.appendChild(text);
} 
```

实际上在 Opera 浏览器中，我看到红色背景几毫秒，然后又变回白色。尝试注释掉`document.write()`- 背景符合预期。此外，您应该`<script>`在末尾包含标签`body`，但这不会解决您的问题。

^(* 老实说，没有打电话的好时机`document.write()`，避免它)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T13:42:02.047

`document.write`在您的特定示例中，在呈现内容后执行命令并覆盖现有内容时，添加脚本标记的位置并不重要。

如果您在覆盖内容之前添加警报，您可以看到您的页面在被覆盖之前是红色的`Hello World`。

# jquery - 使触摸屏无法选择文本输入？

> ID：10785525
> 
> 赞同：2
> 
> 时间：2012-05-28T13:32:06.793
> 
> 标签：jquery, jquery-ui, mobile, input, touchscreen

我使用 jQuery UI 来制作一个范围滑块。该插件在 html 中创建一个文本输入以显示范围值。问题是文本区域在触摸屏设备上是可选择的，即使它当时不可编辑。

如何停止可选择的文本输入？我尝试了以下 CSS：

```
-moz-user-select: none;
 -khtml-user-select: none;
 -webkit-user-select: none;
 user-select: none; 
```

以及以下 jQuery：

```
$("#amount, #amount2").mousedown(function (evt) {
       evt.stopImmediatePropagation();
       return false;
   });

$("#amount, #amount2").disableSelection(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:51:05.610

似乎 CSS `user-select`CSS 方法*确实*有效（至少在 Chromium 18/Ubuntu 11.04 中：

```
#amount {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    -o-user-select: none;
    user-select: none;
    outline: none;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/hBm9f/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:03:57.937

另一种方法是不使用文本区域。改用 PHP 的 GD 库来创建看起来像 textarea 的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T14:03:02.257

**编辑：**您可以像这样创建自己的`disableSelection()`：

```
jQuery.fn.extend({ 
        disableSelection : function() { 
                return this.each(function() { 
                        this.onselectstart = function() { return false; }; 
                        this.unselectable = "on"; 
                        jQuery(this).css('user-select', 'none'); 
                        jQuery(this).css('-o-user-select', 'none'); 
                        jQuery(this).css('-moz-user-select', 'none'); 
                        jQuery(this).css('-khtml-user-select', 'none'); 
                        jQuery(this).css('-webkit-user-select', 'none'); 
                }); 
        } 
}); 
```

像这样使用：

```
if( navigator.userAgent.match(/Android/i)
 || navigator.userAgent.match(/webOS/i)
 || navigator.userAgent.match(/iPhone/i)
 || navigator.userAgent.match(/iPad/i)
 || navigator.userAgent.match(/iPod/i)
 || navigator.userAgent.match(/BlackBerry/i)
 ){
 // touch screen detected
 $("#amount, #amount2").disableSelection(); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T15:01:00.267

它有点笨拙，但我找到了一个可行的解决方案。我刚刚在输入上放置了没有内容的 div，因此它不可选择，但在其他所有方面看起来和行为都像正常输入。谢谢

# android - 我的布局底部的 ListView

> ID：10785528
> 
> 赞同：1
> 
> 时间：2012-05-28T13:32:16.573
> 
> 标签：android, android-layout, android-listview

基本上我有一些几乎填满屏幕的视图（TextView、editText 和按钮）的布局，这些视图的底部有 ListVew 元素。我在运行时填充此列表。我遇到的问题是 listView 的滚动不起作用。我试图在整个布局上设置滚动条，但它不起作用。在布局末尾添加列表视图的最佳方式是什么？

问候，红海

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:35:59.453

> 永远不要将**listview、mapview、Webview**放在滚动视图中，因为这些视图已经滚动。

我认为其他视图，如textview，imageview放在RelativeLayout中，这个Relativelayout放在scrollview中。并完成scrollview的标签。`</ScrollView>`现在你应该在scrollView下面添加listview。

喜欢。

```
<ScrollView android:id="@+id/scroll" ...>
 <RelativeLayout...>
  <TextView... />
  <TextView... />
  <ImageView... />
 </RelativeLayout>
</ScrollView>
<ListView android:layout_below="@+id/@+id/scroll"... /> 
```

# java - 随机选择整数

> ID：10785530
> 
> 赞同：3
> 
> 时间：2012-05-28T13:32:23.033
> 
> 标签：java, android

我确实有以下代码用于获取随机整数

```
for (int i=1;i<=5;i++) {
  int rand= new Random().nextInt(10);
  Log.d("Ramdom number", String.valueOf(rand));
} 
```

问题是我不想重复随机数，这意味着当我运行这段代码时，它给了我 5 个数字，但其中两个至少重复。有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T13:42:41.037

对于小范围的数字可供选择，这应该可以解决问题：

```
ArrayList<Integer> numbers = new ArrayList<Integer>();
for (int i = 0; i < 20; ++i) {
    numbers.add(i);
}
Collections.shuffle(numbers);
for (int i = 0; i < 5; ++i) {
    Log.d("Random number", numbers.get(i).toString());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T13:34:54.727

问题是您正在循环中创建一个 Random 对象。如果循环是“紧”的，就像在这种情况下，随机对象将使用相同的值播种。将 Random 对象初始化移到循环之外应该可以解决问题。

```
Random r = new Random();
for (int i=1;i<=5;i++) {
            int rand= r.nextInt(10)

            Log.d("Ramdom number", String.valueOf(rand));  

    } 
```

编辑：

这应该有效（至少它对我有用）

```
public static Integer[] getRangedInt(int maxRange, int numCount)
{
    if (maxRange < numCount)
    {
        throw new Exception("maxRange cannot be smaller than numCount");
    }

    Set<Integer set = new HashSet<Integer>();
    Random r = new Random();
    while (Set.size() < numCount)
    {
        int random = r.nextInt(maxRange);  
        while (!set.add(random))
        {
            random = r.nextInt(maxRange); 
        }
    }

    return set.toArray(new Integer[set.size()]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T13:52:25.053

```
final int maxnumbers = 5;
final int maxvalue = 10;
final Random generator = new Random();
Set<Integer> numbers = new HashSet<Integer>();
while(numbers.size() < maxnumbers){
    numbers.add(random.nextInt(maxvalue));
} 
```

在此循环之后，您应该在 0 和set`maxnumber`之间有不重复的随机数。您必须小心，以免在使用此方法时迭代次数过多，即从 10000 个中生成 9999 个非重复数字可能需要很长时间。`maxvalue``numbers`

另一个更具可扩展性的版本是有一个数字列表：

```
List<Integer> numbers = new ArrayList<Integer>();
for(int i = 0; i<maxvalue; i++){ numbers.add(i); }
Collections.shuffle(numbers);
List<Integer> randomnums = numbers.subList(0, maxnumbers); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T13:38:59.480

因此，您要查找的不是随机数列表，而是随机排序的 30 个数字的列表。

一种方法是生成所有可能值的列表，然后将它们随机排序，然后根据需要将它们从列表的前面剥离。这是一些伪代码：

```
for(int i=1; i<=30; i++) {
    double r = rand();
    while (null != aTreeSet.get(r)) r = rand();
    aTreeSet.put(r, i);
} 
```

where`rand()`返回一些随机值（不是您寻求的 1-30，即`i`），可能介于 0 和 1 之间，`aTreeSet`这就是您的想法。

循环防止在 dup 返回的不太可能的情况下感到悲伤`rand()`。

`aTreeSet`要使用它，请按排序顺序从中提取值。

编辑 -***总*解决方案**

另一种方法是生成 1-30 值，如果它还没有在“我已经看到这个”集合中，则添加它并返回该值。如果*存在*，则生成一个新的随机数。重复直到发现未使用的号码。对于最后几个值，相对而言，这表现不佳。对于现代处理器上的 30 个值，它当然会在几毫秒内完成。如果您的最大值是 1,000 而不是 30，我会开始担心。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T13:46:13.163

我认为您需要一组随机数。这个提示应该足够了。

如果没有，请发表评论。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-28T13:46:23.317

您可以维护一个生成数字的列表

```
boolean flag=false;
Vector<int> vec = new Vector<int>();
for (int i=1;i<=5;i++) {
        flag=false;
        int rand= r.nextInt(10);
        for(int j=0;j<vec.size();j++)
        {
             if(vec.get(j)==rand)
             { 
                flag=true;
                break;
             } 
        }
        if(flag)
        {
            continue;
        } 
        else
        {
             Log.d("Ramdom number", String.valueOf(rand));
             vec.add(rand);

        }
} 
```

您可以维护生成数字的向量并检查

**该号码是否已经生成**然后生成新号码

**否则**显示此号码

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-28T13:55:03.837

你想要的是随机组合，使用哈希表避免重复

从我的脑海中，代码应该是这样的：

```
 Ramdom r = new Random();
    Hashtable<Integer, Integer> h = new Hashtable<Integer, Integer>();
    while( h.keys().size() < 5 ) {
            int i = r.nextInt(10);
            h.put(i,i);
    }
    Integer[] k = (Integer[]) h.keySet().toArray(); 
```

线

```
 h.put(i,i); 
```

如果重复，则仅覆盖该值，因此只有不同的绘制数字才会在哈希表中具有条目。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-05-28T13:42:25.317

您可以将生成的数字保存在集合中，并且仅当随机数不在集合中时才使用它

```
Random r = new Random();
    Set<Integer> generatedNumbers = new HashSet<Integer>();
    for(int i = 1;i<=5;i++)  {
      int rand = r.nextInt(10)
      if (!generatedNumbers.contains(rand)) {
        Log.d("Ramdom number", String.valueOf(rand));
        generatedNumbers.add(rand);
      } 
    } 
```

# c# - WCF System.Object 序列化

> ID：10785532
> 
> 赞同：1
> 
> 时间：2012-05-28T13:32:32.780
> 
> 标签：c#, .net, wcf, wcf-client

我有一个要求，我必须使用 System.Object 作为 WCF 中的参数。由于它不可序列化，因此我收到消息，因为它使用 System.Object，因此不支持该操作。这个问题的任何解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T01:10:09.887

当通过网络发送消息时，默认情况下，WCF 只会序列化足以传递消息的内容，即合同的成员。如果您的消息将“对象”作为参数，则需要通过网络发送带有类型信息的额外信息。如果在客户端和服务器上使用*相同的程序集*，则可以在服务器（和客户端）中使用 NetDataContractSerializer（而不是默认的 DataContractSerializer），它们将能够交换任意对象，如代码所示以下。但是，正如@MarcGravell 提到的，这可能不是 WCF 的最佳用法......

启用的代码`NetDataContractSerializer`：

```
public class Post_8b2c7ad7_b1c3_410b_b907_f25cee637110
{
    public class Person
    {
        public string Name { get; set; }
        public int Age { get; set; }
        public override string ToString()
        {
            return string.Format("Person[Name={0},Age={1}]", Name, Age);
        }
    }
    [ServiceContract]
    public interface ITest
    {
        [OperationContract]
        object Echo(object obj);
    }
    public class Service : ITest
    {
        public object Echo(object obj)
        {
            return obj;
        }
    }
    public class ReplaceSerializerOperationBehavior : DataContractSerializerOperationBehavior
    {
        public ReplaceSerializerOperationBehavior(OperationDescription operation)
            : base(operation)
        {
        }
        public override XmlObjectSerializer CreateSerializer(Type type, string name, string ns, IList<Type> knownTypes)
        {
            return new NetDataContractSerializer(name, ns);
        }
        public override XmlObjectSerializer CreateSerializer(Type type, XmlDictionaryString name, XmlDictionaryString ns, IList<Type> knownTypes)
        {
            return new NetDataContractSerializer(name, ns);
        }
        public static void ReplaceSerializer(ServiceEndpoint endpoint)
        {
            foreach (var operation in endpoint.Contract.Operations)
            {
                for (int i = 0; i < operation.Behaviors.Count; i++)
                {
                    if (operation.Behaviors[i] is DataContractSerializerOperationBehavior)
                    {
                        operation.Behaviors[i] = new ReplaceSerializerOperationBehavior(operation);
                        break;
                    }
                }
            }
        }
    }
    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        ServiceHost host = new ServiceHost(typeof(Service), new Uri(baseAddress));
        var endpoint = host.AddServiceEndpoint(typeof(ITest), new BasicHttpBinding(), "");
        ReplaceSerializerOperationBehavior.ReplaceSerializer(endpoint);
        host.Open();
        Console.WriteLine("Host opened");

        ChannelFactory<ITest> factory = new ChannelFactory<ITest>(new BasicHttpBinding(), new EndpointAddress(baseAddress));
        ReplaceSerializerOperationBehavior.ReplaceSerializer(factory.Endpoint);
        ITest proxy = factory.CreateChannel();
        Console.WriteLine(proxy.Echo("Hello"));
        Console.WriteLine(proxy.Echo(123.456));
        Console.WriteLine(proxy.Echo(new Uri("http://tempuri.org")));
        Console.WriteLine(proxy.Echo(new Person { Name = "John Doe", Age = 33 }));

        ((IClientChannel)proxy).Close();
        factory.Close();

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

# jquery - 触发点击linkedin javascript auth按钮在ios和android中不起作用（至少）

> ID：10785534
> 
> 赞同：1
> 
> 时间：2012-05-28T13:32:37.363
> 
> 标签：jquery, events, linkedin, jsapi

我正在尝试为 js api 生成的linkedin 按钮创建一个触发器。它在桌面浏览器中完美运行，但在移动浏览器（ios、android 浏览器）上不起作用。

这是代码：

**html:**

```
<script type="text/javascript" src="http://platform.linkedin.com/in.js">
  api_key: i6fpkmpak7qu
  authorize: true
</script>
<a href="#ln" title="Autentificare cu LinkedIn" id="sidebar_auth_ln" class="ln_auth_link"></a>
<div class="hidden_ln_login_holder">
    <script type="IN/Login" data-onAuth="onLinkedInAuth"></script>
</div> 
```

**Javascript：**

```
$(document).ready(function(){
    $('.ln_auth_link').click(function() {
        DIV = $(this).next();
        $('a span:first', DIV).live('click', function() { return true; });
        // also tried $('a span:first', DIV).click();, $('a span:first', DIV).trigger('click')
        return false;
    });
}); 
```

正如我上面提到的，这只是一个移动问题。另外，如果我使用此代码

```
alert($('a span:first', DIV).html()); 
```

它弹出“ln”，就像在桌面浏览器中一样。

此外，如果我不隐藏该部分并直接点击它，登录也不会出现问题。

这是代码所在的地址：http://test[dot]lacontabil[dot]ro

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-09T12:52:33.623

```
 <script type="text/javascript" src="http://platform.linkedin.com/in.js">
api_key:
//onLoad: onLinkedInLoad
scope: r_basicprofile r_emailaddress r_fullprofile
authorize:true
</script>

<script type="text/javascript">
function onLinkedInAuth() {
IN.API.Profile("me")
.fields("firstName", "lastName", "industry", "location:(name)", "picture-url", "headline", "summary", "num-connections", "public-profile-url", "distance", "positions", "email-address", "educations", "date-of-birth")
.result(displayProfiles);
IN.UI.Share().params({
url: "http://www.example.com"
}).place()
}
function displayProfiles(profiles) {
console.log(profiles);
member = profiles.values[0];
}
jQuery(document).ready(function(){
jQuery("#linkdinlog").click(function(){
IN.UI.Authorize().place();
IN.Event.on(IN, "auth", onLinkedInAuth);
});
});
</script>
<a href="javascript:void(0)" id="linkdinlog">link</a> 
```

您可以在[单击自定义按钮时调用它](http://urfusion.net/custom-linkedin-button-for-share-and-auth/)

# forms - Symfony2 表单 - 日期字段验证不起作用

> ID：10785536
> 
> 赞同：3
> 
> 时间：2012-05-28T13:32:46.520
> 
> 标签：forms, symfony

当我提交表单时，尽管我在实体中定义了约束，但未验证包含日期的文本字段。什么是不正确的？我是否需要为包含日期的文本字段编写自定义日期验证器？

在我的表单课中，我有

```
public function buildForm(FormBuilder $builder, array $options)
{
    $builder
            ->add('added', 'date', array(
                'required' => false,
                'widget' => 'single_text',
                'format' => 'yyyy-MM-dd',
                'attr' => array(
                    'class' => 'datepicker'
                )
            ))
} 
```

在实体中

```
/**
 * @var date
 *
 * @Assert\Date(message = "test")
 * @ORM\Column(name="added", type="date", nullable=true)
 */
private $added; 
```

在控制器中（我需要列出这些错误）

```
 $request = $this->getRequest();
    $r = $this->getProfileRepository();
    $profile = $id ? $r->find($id) : new \Alden\XyzBundle\Entity\Profile();
    /* @var $profile \Alden\XyzBundle\Entity\Profile */
    $form = $this->createForm(new ProfileType(), $profile);
    if ($request->getMethod() == 'POST')
    {
        $form->bindRequest($request);
        $errors = $this->get('validator')->validate($profile);
        foreach ($errors as $e)
        {
            /* @var $e \Symfony\Component\Validator\ConstraintViolation */
            $errors2[$e->getPropertyPath()] = $e->getMessage();
        }
        if (count($errors2))
        {
        ...
        } else {
            $em = $this->getEntityManager();
            $em->persist($profile);
            $em->flush();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:32:05.863

您可能需要更新配置。根据 Symfony2 书的[验证](http://symfony.com/doc/current/book/validation.html)部分：

> Symfony2 验证器默认启用，但如果您使用注释方法指定约束，则必须显式启用注释：

例如：

```
# app/config/config.yml
framework:
    validation: { enable_annotations: true } 
```

# jquery-globalization - Jquery Globalize 数字格式和 Google Chrome

> ID：10785539
> 
> 赞同：3
> 
> 时间：2012-05-28T13:33:19.647
> 
> 标签：jquery-globalization

这个小提琴在 IE 和 FF 中返回正确的“5,5”值，但在 Chrome 中它返回“5.5”

小提琴：http: [//jsfiddle.net/4tvSH/](http://jsfiddle.net/4tvSH/)

```
Globalize.culture("sv-SE");
alert(Globalize.format(5.5)); 
```

Globalize 插件中是否存在错误？

**编辑：**

这很奇怪，在 Web.Config (MVC3) 我有这个

```
<globalization enableClientBasedCulture="true" /> 
```

这意味着客户端设置了文化，chrome和FF都报告sv-SE，所以加载的全球化文化是sv-SE，就像上面的小提琴一样。

但是如果我在 Chrome 的第 767 行调试上面的代码

```
return culture.name.length ? value.toLocaleString() : value.toString(); 
```

value.toLocaleString() 将返回 en-US 格式

这行得通，但它是一个黑客..

```
//Fixes a bug in Globalize/Chrome where Globalize.format returns en-US format even with sv-SE
if($.browser.webkit == true) {
    Globalize.orgFormat = Globalize.format;
    Globalize.format = function(value, format) {
        if(format == null) {
            format = "N";
        }

        return this.orgFormat(value, format);
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:25:17.180

Chrome 确实似乎以与 firefox 不同的方式处理 value.toLocaleString()，但是我认为这应该被视为一个 Globalize 错误。

I have corrected this behaviour in my [Globalize fork](https://github.com/erethnor/globalize), which was as simple as removing that toLocaleString iirc.

# java - 何时更喜欢 EJB 而不是 WebServices？

> ID：10785544
> 
> 赞同：0
> 
> 时间：2012-05-28T13:33:56.023
> 
> 标签：java, web-services, ejb

何时使用 EJB 和 WebServices？我的理解是，EJB 用于从实现中抽象（实现细节），因为它只公开接口并且可以注入（使用@EJB）。与 EJB 相比，Web 服务为我们提供了更多的抽象，因为它们不仅可以隐藏实现细节，还可以隐藏编写它的语言。
因此，如果我们知道我们的客户端是 Java 程序，我们可以制作 EJB（因为它更方便，不需要编写 xml-json 序列化器/反序列化器）。如果我们知道客户端程序可能是用C#、php等编写的，那么我们必须做web-service（但使用起来不太方便）？在 Web 服务中使用 EJB 很好吗？（ejb 支持的网络服务）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:36:48.997

当您的消费者总是使用 Java 技术时，您可以选择 EJB。如果您的消费者使用不同的技术，您可能更喜欢网络服务。

# qt - 是否可以在 Windows Mobile/CE 下使用带有 QSystemTrayIcon 的上下文菜单？

> ID：10785546
> 
> 赞同：3
> 
> 时间：2012-05-28T13:34:05.790
> 
> 标签：qt, windows-mobile, windows-ce

我创建了带有上下文菜单的托盘图标，并将其激活的信号附加到我的对话框中的插槽：

```
trayIconMenu = new QMenu(this);
trayIconMenu->addAction(showAction);
trayIconMenu->addAction(quitAction);

trayIcon = new QSystemTrayIcon(this);
trayIcon->setContextMenu(trayIconMenu);
trayIcon->setIcon(QIcon(":/images/gear.png"));
trayIcon->show();
trayIcon->showMessage(tr("SSTRNL-B"),tr("Message from tray icon!"));

QObject::connect(trayIcon, SIGNAL(activated(QSystemTrayIcon::ActivationReason)),
                 this,   SLOT(trayactivated(QSystemTrayIcon::ActivationReason))); 
```

当我点击托盘图标时，我的插槽被调用。所以一切都很顺利，除了我看不到 QSystemTrayIcon 附加的上下文菜单。

在桌面系统中，我们可以使用右键单击托盘图标来查看其上下文菜单。但是我应该在 Windows mobile/CE 中做什么才能看到上下文菜单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:58:55.567

检查是否`QSystemTrayIcon::ActivationReason==QSystemTrayIcon::Context`在您的`SLOT`. 可能因为您使用的是移动应用程序，点击模式`contextmenu`可能与一般操作系统不同。

好的，如果是`QSystemTrayIcon::Trigger`，请在您的 SLOT 中调用`trayIcon->contextMenu()->popup(QPoint&)`，其中 QPoint 是托盘图标的位置。这样就可以了。

# iphone - 未找到“SHK.h”文件

> ID：10785549
> 
> 赞同：8
> 
> 时间：2012-05-28T13:34:36.553
> 
> 标签：iphone, objective-c, ios, sharekit

对不起各位菜鸟问题，需要帮助。我正在尝试使用 Sharekit - [https://github.com/ShareKit/ShareKit](https://github.com/ShareKit/ShareKit)。

我正在从“Installing sharekit”wiki 页面执行所有步骤，在尝试导入 SHK.h 之前我没有任何错误。SHK.h 在自动完成中可见，但我有错误。有什么可以错过的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T16:23:56.447

[链接https://github.com/ShareKit/ShareKit/issues/393#issuecomment-6057929](https://github.com/ShareKit/ShareKit/issues/393#issuecomment-6057929)中的答案部分准确。您可以在项目的同一级别拥有 ShareKit 文件夹。

只需在您的项目中添加“标题搜索路径”（假设您放置 ShareKit 的目录称为“ShareKit”：

```
$(SRCROOT)/../ShareKit/Classes/** 
```

和

```
$(SRCROOT)/../ShareKit/Submodules/** 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:48:01.040

我不确定您为什么会遇到问题，但您可以尝试

点击项目 -> 选择你的目标 -> 构建阶段 -> 展开编译源并确保你有你的 SHK.m 文件，如果没有，然后添加它。

# java - 如何下载 PrimeFaces 展示柜？

> ID：10785551
> 
> 赞同：5
> 
> 时间：2012-05-28T13:34:43.633
> 
> 标签：java, jsf, jakarta-ee, primefaces

我正在尝试学习 PrimeFaces。为此，我认为它的展示将是开始的好方法。但我想离线运行它，就像我们可以下载 struts 展示柜并运行它一样。同样，我想下载 PrimesFaces 的展示。

但我找不到直接链接。帮我解决这个问题。

还推荐我一些好书来深入了解primeFaces。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T13:41:01.047

在这里，您可以从[primefaces 存储库中获取它](http://repository.primefaces.org/org/primefaces/)

[primefaces/展示/](https://repository.primefaces.org/org/primefaces/showcase/)

关于书籍/知识库，请查看[文档部分](http://www.primefaces.org/documentation.html)，您会在那里找到很多关于 primefaces 的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T14:05:25.800

[您可以在http://www.mkyong.com/jsf2/primefaces/download-primefaces-showcase-and-source-code/](http://www.mkyong.com/jsf2/primefaces/download-primefaces-showcase-and-source-code/)上查看有关如何使用它的更多详细信息

# java - Java OOP：如何正确创建对象

> ID：10785552
> 
> 赞同：5
> 
> 时间：2012-05-28T13:34:45.477
> 
> 标签：java, oop, object

我使用 OOP 创建了一个简单的保龄球游戏，我想为每个碗创建一个类，一个由两个碗组成的 Frame 类，一个由十个帧组成的 Game 类。

目前我有这样的事情

Bowl.java

```
public class Bowl {

int bowlScore = 0;

public Bowl(int pinsKnocked){
    bowlScore = pinsKnocked;
}
} 
```

框架.java

```
public class Frame{

int firstScore;
int secondScore;
public Bowl firstBowl;
public Bowl secondBowl;

public Frame (){
    firstBowl = new Bowl(0);
    secondBowl = new Bowl(0);
}

public Frame (int firstScore, int secondScore){
    firstBowl = new Bowl(firstScore);
    secondBowl = new Bowl(secondScore);
} 
```

游戏.java

```
public class Game {

int totalScore;
public Frame firstFrame;
public Frame secondFrame;
...
    public Frame tenthFrame;

public Game(){
    firstFrame = new Frame();   
}

public Game(Frame f){
    firstFrame = f;
} 
```

这是使用 OOP 功能的正确方法还是我将如何改进它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T13:45:26.023

设计保龄球游戏没有 100% 正确的方法；有许多可行的解决方案，甚至更多是行不通的。

您需要的是一个适合您和您的目标的解决方案。

如果你想显示一个分数，那么我建议你从一个`getScore()`方法开始。如果要显示获胜者，请从`displayWinners()`方法开始。

最终你会发现这些方法自然地绑定到各种名词。例如，您可能从`getScore()`依附于一个`Game`对象开始，但随后意识到这不自然地意味着您的游戏只能有一个分数。如果发生这种情况，您会将 移动`getScore()`到一个`Player`对象，并让游戏保留一个或多个玩家。

如果您正在使用一种自然属于其他地方的方法，那么您的代码中有许多提示可以指导您。最明显的暗示是一个方法似乎对另一个对象的数据特别感兴趣，甚至对它自己的数据也是如此。在上面的示例中，`getScore()`游戏对象中的 a 对 Player 的帧、球等过度感兴趣。

为了获得如何安全地将代码从一个地方移动到另一个地方的技能和指导，我建议阅读 Martin Fowler 的 Refactoring Book。

[一个很好的例子，在这里演示了完全使用您的问题](http://www.objectmentor.com/resources/articles/xpepisode.htm)。

祝你好运，一段时间后，由于获得的技能，您将能够跳过此过程中的一些；但是，第一次学习时，最好不要跳过这些探索性步骤（从头开始）。

PS。请记住，您的代码只会确保执行您测试它要做的事情，如果您不熟悉测试驱动开发，那么研究它可能是一个好主意（提示，这是一个严重的轻描淡写）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T14:03:34.917

正如 Edwin 所提到的，它们有很多方法可以模拟保龄球比赛。但是在这里，我将列出可能对您的代码进行的更正以改进它。
这里有很多需要改进的地方
1\. score 属性只适用于 Bowl 类。所以从 Frame 和 Game 中删除 score 属性。
2\. `bowlScore`in`Bowl`应该是私有的并为其提供getter方法。你会
3\. 现在 Frame 类应该是这样的：

```
public class Frame{
    private Bowl firstBowl;
    private Bowl secondBowl;

    public Frame (int firstScore, int secondScore){
        firstBowl = new Bowl(firstScore);
        secondBowl = new Bowl(secondScore);
    }
    public int getFrameScore(){
       return (firstBowl.getScore()+secondBowl.getScore());
    }
} 
```

4.在游戏类中，你有构造函数，你只传递一帧？一名玩家的一场比赛由 10 帧组成。对帧使用 10 个变量也不是一个好主意。为此，我们有 java 集合。您可以使用列表。

```
public class Game {
    private java.uti.List<Frame> frames;
    public Game(List<Frame> frames){
      this.frames = frames;
    }
    public getGameScore(){
      // loop goes here to sum up scores from all frames
      //sum = sum+frames.get(i);
    }
} 
```

}

5.如果你假设这个游戏只有一个玩家玩，这个模型也是有效的。对于多个玩家，上面的 Game 类实际上变成了 Player 类，您必须创建新的 Game 类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T14:07:13.277

我倾向于删除`Bowl`. 如果您发现自己处于这种情况，请问自己 - 我将如何处理 100 个实例`Bowl`？`Frame`考虑一下在游戏生命周期内必须创建和维护的十个实例。保留多个实例不是一个好主意，除非您*需要*多个实例来处理某些业务逻辑。

```
public class Bowl {

    private int bowlScore;

    // Use a no-argument constructor
    public Bowl() {
        this.bowlScore = 0;
    }

    public void setBowlScore( int score ) {
        this.bowlScore = score;
    }

    public int getBowlScore() {
        return this.bowlScore;
    }
} 
```

对于`Frame`班级，

```
public class Frame {

    private int frameScore;
    private Bowl bowlArray[];

    public Frame() {
        this.frameScore = 0;
        this.bowlArray = new Bowl[2];
    }

    public void setScoreForFirstBowl( int score ) {
        this.bowlArray[0] = score;
        this.frameScore += score;
    }

    public void setScoreForSecondBowl( int score ) {
        this.bowlArray[1] = score;
        this.frameScore += score;
    }

    public void setFrameScore( int score ) {
        this.frameScore = score;
    }

    public int getFrameScore() {
        return this.frameScore;
    }

    // this should not be used, left in for completeness
    public Bowl[] getBowlArray() {
        return this.bowlArray;
    }
} 
```

而对于`Game`

```
public class Game {

     private int gameScore;
     private ArrayList<Frame> gameFrames;

     public Game() {
         this.gameScore = 0;
         this.gameFrames = new ArrayList<Frame>();
     }

     /* There are many ways of implementing the game logic. Here is an example.
        You will have to complete the rest :) */

     // @frame frame object with bowl data that is appended to list
     public void frameCompleted(Frame frame) {
         this.gameScore += frame.getFrameScore; // I assume this is what you want to do. Change if not
         this.gameFrames.add(frame);
     }

     /* The method written above can also be implemented by passing integer values
        for the score, bowl number and frame number. However, this would not be very
        OOP friendly. Essentially, this is 'Encapsulation' of the Frame data into the 
        Frame object. */

     // Add getters and setters for gameScore and gameFrames
} 
```

有关进一步使用的示例，请参阅[ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)文档。如果您不想使用它，可以将其替换为数组。我包括它只是为了展示列表能力。

[在此处](http://www.tutorialspoint.com/java/java_encapsulation.htm)和[此处](https://stackoverflow.com/questions/5038336/confused-with-java-encapsulation-concept)阅读有关[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29) 的更多信息。

`Bowl`你会注意到我在or`Frame`类中没有考虑到“罢工” 。这是因为它是一个需要满足的特殊情况，所以我把它留给你来实现。我的理解是，如果你在第一个碗上投出好球，你就不会得到第二个碗。

# powershell - 奇怪的任务 PowerShell 错误

> ID：10785553
> 
> 赞同：2
> 
> 时间：2012-05-28T13:34:48.023
> 
> 标签：powershell

“移动 QADObject：0000202B：RefErr：DSID-031007EF，数据 0、1 个访问点”

当我尝试以下操作时出现此错误：

```
Move-QADObject -identity $results_ep.dn -NewParentContainer "OU=Users,OU=AB,DC=domain,DC=local" -Credential $cred_ep 
```

我正在从域 A 运行此脚本，而对象应该移动的目标域是域 B（因此是凭据）。

有谁知道怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:20:40.297

Active Directory 中的默认树不是`OU=Users,dc=domain,dc=com`，而是`cn=Users,dc=domain,dc=com`（`CN=`不是`OU=`用户）。

尝试`OU=Users`改变`CN=Users`

编辑：

更好地阅读您的问题，我刚才看到您希望将对象移动到不同的域，来自`get-help move-qadobject`：

... 省略 ... 使用此 cmdlet 在 Active Directory 域内的容器之间移动对象（**该 cmdlet 不能将对象移动到不同的域**）。……省略……

阅读[此处](http://communities.quest.com/docs/DOC-10108)以使用 Quest.ActiveRoles.ADManagement sanp-in 执行此操作。

如果您在`Windows Server 2008 R2`DC，您可以使用名为 的 Windows PowerShell 模块在不同的域中移动`Active Directory`：

```
Move-ADObject -Identity "CN=Mary Vick,OU=Accounting,DC=SS64,DC=com" -TargetPath "OU=Accounting,DC=Europe,DC=SS64,DC=com" -TargetServer "server64.europe.SS64.com" 
```

我认为更好的是使用本机 Microsoft 命令行，例如[`ADMT`](http://technet.microsoft.com/en-us/library/cc974332%28v=ws.10%29.aspx)

# ftp - Concrete 5 - 将 C5 代码、图像和参考移至 docroot

> ID：10785557
> 
> 赞同：1
> 
> 时间：2012-05-28T13:35:21.267
> 
> 标签：ftp, content-management-system, web, concrete5

我已经在 Concrete 5.5.2.1 上安装、配置和构建了一个站点，并且一切正常。我有一个问题，`www.ayrshireminis.com/concrete5.5.2.1`例如，我的 URL 是 index.htm 文件所在的位置。有没有一种方法可以将代码带回 docroot，而不会破坏所有引用，例如数据库中的图像路径？

考虑到 Concrete 5 的下载包含此目录，我假设这是一些开发人员在使用此 CMS 时的常见问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T20:58:32.037

我不确定你为什么有一个“index.htm”文件——在crete5安装中没有这样的东西。不过，一般来说，您应该能够毫无问题地移动站点。一些可能的例外是：

*   根据你移动东西的准确程度，确保你得到每个文件夹/文件。例如，如果您使用 SSH 并执行类似的操作`mv concrete5.5.2.1/* ./`，那么您将错过该`.htaccess`文件（因为它是隐藏的）。但是，如果您在谈论 index.htm 文件，我猜您是在 Windows 服务器上而不是在 unix 上，所以这可能不适用。

*   在旧版本的 Concrete5 中，`config/site.php`文件中有一个设置`DIR_REL`，您需要在移动站点时进行更改。例如，如果从`concrete5.5.2.1`子目录移动到顶层，你会改变`define('DIR_REL', '/concrete5.5.2.1`); `to`定义（'DIR_REL'，''）；`. So take a look in your`config/site.php`file, but if you don't see the`定义（'DIR_REL'...` 行然后不要担心这一步。

*   如果您手动输入页面链接或图像的完整 URL，则需要更新它们。通常这不是问题（假设您使用位于富文本编辑器控件上方的 Concrete5 工具栏——例如“插入页面链接”、“插入图像”等）。但是，如果您在移动站点后发现死链接，则可以通过编辑有问题的块手动更新链接，或者如果您想确保一口气更新所有链接，您可以在数据库上运行以下查询（例如通过 PhpMyAdmin）：

    ```
    UPDATE btContentLocal SET content = REPLACE(content, '/old/base/dir/', '/new/dir/') WHERE content LIKE '%/old/base/dir/%';
    UPDATE btContentImage SET externalLink = REPLACE(externalLink, '/old/base/dir/', '/new/dir/') WHERE externalLink LIKE '%/old/base/dir/%';
    UPDATE btSlideshowImg SET url = REPLACE(url, '/old/base/dir/', '/new/dir/') WHERE url LIKE '%/old/base/dir/%'; 
    ```

    ***小心这些查询！！***您将需要对其进行更改`/old/base/dir/`并`/new/dir/`使其对您的特定站点有意义。在运行这些查询之前，您绝对应该积极地备份您的数据库，否则您可能会**完全彻底地破坏您的网站**，而没有任何方法可以恢复它！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:03:20.217

It is actually possible to move the code from a `ROOT/concrete5.5.2.1` directory back to the root *without* running the queries above. I simply moved the code up a directory and everything worked.

# .net - 从代码隐藏 WinForms 滚动 TreeView

> ID：10785558
> 
> 赞同：1
> 
> 时间：2012-05-28T13:35:22.067
> 
> 标签：.net, winforms, scroll, treeview

我正在用 winForms (C#) 编写一个可触摸的应用程序。而且我在滚动 TreeView 时遇到问题，我知道如何捕捉用户想要用手指滚动 TreeView 的内容，但我不知道如何强制 TreeView 从代码隐藏滚动。

# ruby-on-rails - 在创建时将随机 ID 号放入关联表中

> ID：10785559
> 
> 赞同：-1
> 
> 时间：2012-05-28T13:35:29.180
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

我正在尝试在我的关联表中放置一个随机 ID 号。我该怎么办？

```
def create
  @rand = rand(1...10)
  @player = Player.new(params[:player])
  @player.result_id = @rand
  if @player.save
    render :action => "new"
  else
    render :action => "new"
  end        
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:49:53.287

只需选择一个随机结果 id：

```
@player.result_id = Result.offset(rand(Result.count)).select('id').first.id 
```

关于选择随机记录，请参阅 [Rails 3：获取随机记录](https://stackoverflow.com/questions/5342270/rails-3-get-random-record)

# java - 将记录器消息写入文件和文本区域，同时保持 Java 中的默认行为

> ID：10785560
> 
> 赞同：5
> 
> 时间：2012-05-28T13:35:29.190
> 
> 标签：java, logging, textarea

我目前正在将来自我的应用程序的消息记录在 .log 文件中。到目前为止这工作正常，但现在我正在尝试将相同的消息输出到 textarea。我一直在使用默认记录器来完成这一切。

这样我就有一个类可以完成所有工作，将日志记录到 .log 文件并将相同的输出写入 textarea 以供管理员查看。

这是一个 Java swing JFrame 应用程序，只包含一个文本区域（我需要的全部）。后台发生了一堆事情，所有这些活动都必须记录下来以供审查/调试。

我一直很难找到一个好的例子，所以我想知道你们是否可以帮助我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-28T15:55:56.257

In your case, since you are using JDK default logging, your option is to write your own `java.util.Handler` and implement the publish method. Somewhat like this:

```
public class TextAreaHandler extends java.util.logging.Handler {

    private JTextArea textArea = new JTextArea(50, 50);

    @Override
    public void publish(final LogRecord record) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                StringWriter text = new StringWriter();
                PrintWriter out = new PrintWriter(text);
                out.println(textArea.getText());
                out.printf("[%s] [Thread-%d]: %s.%s -> %s", record.getLevel(),
                        record.getThreadID(), record.getSourceClassName(),
                        record.getSourceMethodName(), record.getMessage());
                textArea.setText(text.toString());
            }

        });
    }

    public JTextArea getTextArea() {
        return this.textArea;
    }

    //...
} 
```

Then, you can get the text area from your handler in your Swing application, somewhat like:

```
for(Handler handler: logger.getHandlers()){
    if(handler instanceof TextAreaHandler){
        TextAreaHandler textAreaHandler = (TextAreaHandler) handler;
        getContentPane().add(textAreaHandler.getTextArea());
    }
} 
```

Then, you make sure your `logging.properties` file contains the configuration of your new handler:

```
hackers.logging.TestDrive.level=INFO
hackers.logging.TestDrive.handlers=hackers.logging.TextAreaHandler 
```

And, if you are not going to put this configuration in your default `logging.properties` file (located in your JRE lib folder) then make sure to provide the path to your customized `logging.properties` file in a property at application startup:

```
java -Djava.util.logging.config.file=my-customized-logging.properties ... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-11T06:56:53.857

只是从 StreamHandler 扩展 - 这就是 ConsoleHandler 和 FileHandler 的工作方式。并且，覆盖`publish`函数：

```
public class TextAreaHandler extends StreamHandler {
    JTextArea textArea = null;

    public void setTextArea(JTextArea textArea) {
        this.textArea = textArea;
    }

    @Override
    public void publish(LogRecord record) {
        super.publish(record);
        flush();

        if (textArea != null) {
            textArea.appendText(getFormatter().format(record));
        }
    }
} 
```

在记录消息之前先设置输出位置，例如：

```
public TextAreaHandler textAreaHandler = new TextAreaHandler();
textAreaHandler.setTextArea(<your JTextArea control>); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T13:40:52.400

如果它是一个单体应用程序，您可以编写[`log4j custom appender`](http://www.javaworld.com/javaworld/jw-12-2004/jw-1220-toolbox.html)它将调用 textarea 内容的更新并在那里添加新行。
如果有两个独立的应用程序（一个产生日志，一个显示日志），您可以在它们之间建立一种连接（套接字/消息传递等），以通知管理应用程序有关记录的行并更新它们。

# android - Android SSLPeerUnVerfiedException

> ID：10785561
> 
> 赞同：1
> 
> 时间：2012-05-28T13:35:29.367
> 
> 标签：android

正在工作 https webservice 并且证书是自签名的，因此将其导入我的项目并创建 bks 文件以覆盖错误，但我仍然得到 SSLPeerUnverfiedException 。我还检查了以下问题[HttpGet with HTTPS ： SSLPeerUnverifiedException](https://stackoverflow.com/questions/2308774/httpget-with-https-sslpeerunverifiedexception)，这也无济于事

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:00:05.983

您是否尝试过 bob lee 的这种方法：http: [//blog.crazybob.org/2010/02/android-trusting-ssl-certificates.html](http://blog.crazybob.org/2010/02/android-trusting-ssl-certificates.html) 它解决了我的问题

# mysql - 从表中删除时外键约束错误

> ID：10785563
> 
> 赞同：2
> 
> 时间：2012-05-28T13:35:35.100
> 
> 标签：mysql

我有两张桌子：

请求 - Request_id ， Request_Message；// 包含请求

响应 - Response_id 、 Request_id 、 Response_Message；// 包含请求的响应。Request_id 是该表的外键

现在，当我**从请求中删除 Request_id = "REQ001";** ...

我想当我从请求表中删除任何请求时，所有相应的响应都必须从响应表中自动删除。如何实现这一点？

谢谢你的时间..

德韦什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T13:40:11.203

尝试在删除时使用级联：

```
create table Responses(
...
CONSTRAINT fk_column
  FOREIGN KEY (Request_id)
  REFERENCES Requests (Request_id)
  ON DELETE CASCADE
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T13:41:41.420

在定义子表（将具有外键）结构时使用级联删除。

```
CREATE TABLE `Responses ` 
  ( 
     `Request_id` INT(10), 
     INDEX (Request_id), 
     FOREIGN KEY (Request_id) REFERENCES Requests (Request_id) ON DELETE CASCADE 
  ) 
```

请记住，您需要使用 InnoDB 存储引擎：默认的 MyISAM 存储引擎不支持外键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T13:42:40.023

在约束`CASCADE`的定义中使用是一种选择。`FOREIGN KEY`但是，我建议使用 delete 语句的多表语法，例如：

```
DELETE FROM Requests, Responses
USING Requests
LEFT JOIN Responses ON Requests.Request_id=Responses.Request_id
WHERE Requests.Request_id='REQ001'; 
```

这是我首选的解决方案，因为它更明确地说明了实际发生的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T13:38:27.173

您需要先删除所有`Responses`引用`Request_id`您要删除的记录，或者您需要将外键定义为`ON DELETE CASCADE`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T13:40:34.850

如 MySQL`FOREIGN KEY`约束手册中所述，[http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)，如果你想让数据库处理这个而不是你的应用程序，您必须将您的更改`CONSTRAINT`为：

```
CONSTRAINT my_constraint FOREIGN KEY request_id (request_id) REFERENCES Requests (request_id) ON DELETE CASCADE; 
```

该`ON DELETE CASCADE`部分将负责删除表中的记录，这些记录的`Responses`值`request_id`设置为与表中要删除的记录相同的值`Requests`。

# google-maps - 涉及公交路线的计算

> ID：10785564
> 
> 赞同：2
> 
> 时间：2012-05-28T13:35:42.130
> 
> 标签：google-maps, google-places-api

我正在与一所大学合作开发他们的校园 iOS 应用程序。该应用程序的功能之一是能够确定哪些校园巴士路线最适合到达目的地（以及巴士到达时间的列表等）。

如果我有代表路线停靠点的长/纬度数据集，那么确定到长/纬度目的地点的最近路线的最简单方法是什么？我有 10 多个 roues 需要考虑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T22:46:36.197

If you want to determine the closest point to a route, you can use the [Distance to a Ray or Segment](http://softsurfer.com/Archive/algorithm_0102/algorithm_0102.htm#Distance%20to%20Ray%20or%20Segment) formula using a lat-lng as the reference point.

There is another option, if you are using a Google Map, because the Terms of Service require that the service be used in the context of a Google Map; you may want to consider the Google Maps Distance Matrix Service[^(dev-guide)](https://developers.google.com/maps/documentation/javascript/distancematrix). The service allows you to submit a request with an `origins` property, which must be an array of `google.maps.LatLng` starting points and a `destinations` property, which must be an array of `google.maps.LatLng` ending points. The `DistanceMatrixService`[^(api-doc)](https://developers.google.com/maps/documentation/javascript/reference#DistanceMatrixService) also allows you to define a `TravelMode`[^(api-doc)](https://developers.google.com/maps/documentation/javascript/reference#TravelMode), which may be one of: `BICYCLING`, `DRIVING`, or `WALKING`. It has the advantage over simple distance calculation, because it accounts for the natural activity of traveling from one point to another using the existing network of streets.

# jquery - 使用 JQUERY 验证表单字段

> ID：10785570
> 
> 赞同：1
> 
> 时间：2012-05-28T13:35:58.943
> 
> 标签：jquery

我有一个带有一个输入字段的表单字段。

一旦用户完成输入，我需要进行 ajax 调用并验证服务器端的输入。

我厌倦了 keyup、focusout、keydown 和 mouseup 事件，但似乎没有按预期工作。有人可以建议选择最好的键盘事件来解决这个问题。如果输入为空白，则也应显示错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:07:55.150

您可能正在寻找的事件是 blur() 事件，当用户离开输入字段时调用该事件（例如，通过按 Tab 或单击下一个输入）

例子：

```
 $(document).ready(function(){
        $('input#myInput').blur(function(){
            myValidator($(this), $(this).val());
        });
    });

    function myValidator($element, value)
    {
        // Example regex to sucessfully match a value of at least 4 digits
        if (!value.match(/^[0-9]{4,}$/)
        {
            // In this case I'm adding an error class to the input,
            // but feel free to do anything you like
            $element.addClass('error');
        }
    } 
```

编辑：

通过 AJAX 验证是一种非常糟糕的做法，因为可以轻松停止 HTTP 请求或完全禁用 JavaScript（我个人尽量避免不必要的 http 请求）。

我建议首先检查客户端（仅限 JavaScript/jQuery），然后在提交时仔细检查服务器端（使用 PHP/ASP）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:47:50.563

onchange 事件可能是您需要的。

onchange 监听输入元素的值所做的任何更改，而键事件仅记录在键盘上执行的操作（例如，按下和释放 Esc 也是一个有效的触发器）。

但是我真的没有在这里得到实际的问题。我认为你正在寻找的是一个**正则表达式**。

正则表达式是可用于检查数据是否满足给定条件的模式。例如：

```
'/[a-zA-Z0-9\-]{5, 10}/' 
```

可用于确定文本仅为字母数字且长度在 5 到 10 个字符之间。在这种情况下，它还允许使用连字符 ( - )。

可以在网络上的任何地方找到有关此的信息。

此外，考虑发布您的问题更具描述性并添加您正在使用的代码示例。这可能会激发更多有用的答案。

亲切的问候，

D.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T13:49:00.353

我将展示一个示例页面并将其正确添加到您的页面代码中......

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
                    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
  <script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
<style type="text/css">
* { font-family: Verdana; font-size: 96%; }
label { width: 10em; float: left; }
label.error { float: none; color: red; padding-left: .5em; vertical-align: top; }
p { clear: both; }
.submit { margin-left: 12em; }
em { font-weight: bold; padding-right: 1em; vertical-align: top; }
</style>
  <script>
  $(document).ready(function(){
    $("#commentForm").validate();
  });
  </script>

</head>
<body>

 <form class="cmxform" id="commentForm" method="get" action="">
 <fieldset>
   <legend>A simple comment form with submit validation and default messages</legend>
   <p>
     <label for="cname">Name</label>
     <em>*</em><input id="cname" name="name" size="25" class="required" minlength="2" />
   </p>
   <p>
     <label for="cemail">E-Mail</label>
     <em>*</em><input id="cemail" name="email" size="25"  class="required email" />
   </p>
   <p>
     <label for="curl">URL</label>
     <em>  </em><input id="curl" name="url" size="25"  class="url" value="" />
   </p>
   <p>
     <label for="ccomment">Your comment</label>
     <em>*</em><textarea id="ccomment" name="comment" cols="22"  class="required"></textarea>
   </p>
   <p>
     <input class="submit" type="submit" value="Submit"/>
   </p>
 </fieldset>
 </form>
</body>
</html> 
```

或者您可以从这里获取更多概念：http: [//speckyboy.com/2009/12/17/10-useful-jquery-form-validation-techniques-and-tutorials-2/](http://speckyboy.com/2009/12/17/10-useful-jquery-form-validation-techniques-and-tutorials-2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T13:49:53.620

[http://jsfiddle.net/landau/zKrYS/](http://jsfiddle.net/landau/zKrYS/)

我不太确定“不能按预期工作”是什么意思，但这里有一个例子。

```
$("form").on("submit", function(e) {
    e.preventDefault();
    var val = $("input").val().trim();
    if (!val) {
        alert("please fill in the field");
        return;
    }
    var jqxhr = $.ajax({
        url: "/echo/json/",
        data: {
            value: val
        },
        type: "post"
    }).done(function(data, status, xhr) {
        console.log(data, status, xhr);
    });
});​ 
```

# asp.net-mvc - ASP.NET MVC 3 EF Code First - 如何制作一个可以选择引用其自己类型的父级的模型？

> ID：10785572
> 
> 赞同：2
> 
> 时间：2012-05-28T13:36:02.160
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, ef-code-first

我正在尝试创建一个可以选择引用同一类型的父级的模型，例如：

```
public class Category
{
    public virtual long CategoryID { get; set; }

    public virtual Category? ParentCategory { get; set; }

    public virtual int UserID { get; set; }
    public virtual string Name { get; set; }

} 
```

如您所见，有一个名为 ParentCategory 的可选成员是可选的，它引用 Category 类型的类（即相同类型）。我相信您可以猜到，我正在尝试创建一个简单的类别树，其中根节点将没有父节点。

当 Entity Framework 尝试创建数据库时，这会导致以下错误：

*“类型‘MyProject.Models.Category’上的属性‘ParentCategoryID’上的 ForeignKeyAttribute 无效。在依赖类型‘MyProject.Models.Category’上找不到导航属性‘Category’。名称值应该是有效的导航属性名称。”*

我也试过这个：

```
public class Category
{
    public virtual long CategoryID { get; set; }

    [ForeignKey("Category")]
    public virtual long? ParentCategoryID { get; set; }

    public virtual int UserID { get; set; }
    public virtual string Name { get; set; }

} 
```

但这又导致了同样的错误。

是否可以使用 EF Code First 对此进行建模？如果我要手动创建数据库，很容易在数据库中建模。

在此先感谢本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T17:28:43.617

您的第一个示例甚至无法编译，因为`T?`的快捷方式`Nullable<T>`只能应用于值类型。

以下工作正常：

```
public class Category
{
    public virtual long CategoryID { get; set; }
    public virtual Category ParentCategory { get; set; }
} 
```

现在，这将默认为 FK 使用丑陋的名称，`ParentCategory_CategoryID`.

这是一种获得更好名称的方法，并且在使用时具有一定的灵活性：

```
public class Category
{
    public virtual long CategoryID { get; set; }
    [ForeignKey("ParentCategoryID")]
    public virtual Category ParentCategory { get; set; }
    public virtual long? ParentCategoryID { get; set; }
} 
```

# java - 类的所有方法的切入点，包括继承的方法

> ID：10785588
> 
> 赞同：5
> 
> 时间：2012-05-28T13:37:23.637
> 
> 标签：java, aspectj, spring-aop, pointcut

我正在玩 aop 和 aspectj 并发现了一个（对我来说）意想不到的行为。

在[aspectj-docs](http://www.eclipse.org/aspectj/doc/released/progguide/semantics-pointcuts.html)中，我找到了以下示例切入点：

```
execution(public void Middle.*()) 
```

对于以下类定义（我稍微更改了原始示例）：

```
class Super {
    public void m() { ... }
}
class Middle extends Super {
}
class Sub extends Middle {
    @Override
    public void m() { ... }
} 
```

该示例的描述指出：

> **[切入点] 为返回 void 且没有在 Middle 中声明或继承的**参数的公共方法挑选所有方法执行，即使这些方法在 Middle 的子类中被覆盖。

这个例子对我来说工作得很好，但是如果 class`Sub`没有覆盖，则不会拦截从外部到on a -instance`m()`的方法调用。这不违反文档吗？`m``Sub`

我[在继承类中遇到了另一个问题，](https://stackoverflow.com/questions/10774946/pointcut-confusion-with-inheritance)这是由使用代理引起的。但在这种情况下，使用代理不会导致这种行为，因为代理应该为所有代理类提供方法。还是我错过了什么？

我的方面定义：

```
@Aspect
public class MyAspect {
    @Before(value = "execution(* Middle.*(..))", argNames="joinPoint")
    public void myAdvice(JoinPoint joinPoint) {
        System.out.println("adviced: " + joinPoint.getSignature());
    }
} 
```

# c# - 在实体框架 4.3 中更新对象的列表属性 - 代码优先，N 层

> ID：10785595
> 
> 赞同：1
> 
> 时间：2012-05-28T13:37:57.460
> 
> 标签：c#, entity-framework

在 n 层场景中，数据层应该如何更新 EF 4.3 中对象的 List 属性？

假设我们有这个类：

```
public class Foo
{
  public int Id { get; set; }
  public string Name { get; set; }
  public List<Bar> Bars { get; set; }
} 
```

就保存/更新 ID 和名称而言，这很有效，但 Bars 属性被忽略。

```
protected void SaveChanges(Foo foo)
{
  this.Database.Entry<Foo>(foo).State = GetState(foo);
  this.Database.SaveChanges();
} 
```

由于原始上下文（检索到的 Foo）不再在内存中，数据层应该如何处理保存对 Bars 属性的更新？EF 如何知道哪些 Bar 项目已被删除、哪些已更新、哪些已添加？

注意：我可以遍历每个 Bar 项目并将其与原始项目进行比较，但我猜 EF 不应该以这种方式工作。这似乎乏味且不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:07:48.317

> EF 如何知道哪些 Bar 项目已被删除、哪些已更新、哪些已添加？

如果您自己编写持久性，它应该如何知道更改？我想你会选择以下两个选项之一：

*   您将查询数据库的当前状态并将其与接收到的状态进行比较以找出发生了什么变化
*   你会在你的类中添加一些辅助字段，让客户告诉你发生了什么变化

在这两种情况下，您都将使用有关更改的信息来生成正确的 SQL。

EF 只解决了最后一点（SQL 生成），但您仍然有责任告诉它发生了什么变化。

# nuget-package - NuGet 可以将 .cs 文件添加到目标项目吗？

> ID：10785596
> 
> 赞同：39
> 
> 时间：2012-05-28T13:38:02.170
> 
> 标签：nuget-package

我想创建一个 NuGet 包，在安装过程中将 .cs 文件（鼓励包使用者稍后修改的基类）添加到目标项目的根目录。

那可能吗？到目前为止我发现的所有内容都说“不，你只能在包目录下安装文件”。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-05-29T07:02:21.557

只需将您的 .cs 文件放在包根目录下名为“content”的文件夹中即可。

来自文档：

“您可以布局遵循 NuGet 约定的目录结构。

**工具**- 包的工具文件夹用于可从包管理器控制台访问的 PowerShell 脚本和程序。文件夹复制到目标项目后，添加到`$env:Path (PATH) 环境变量中。

**lib** - 安装包时，将 lib 文件夹中的程序集（.dll 文件）添加为程序集引用。

**内容**- 安装包时，内容文件夹中的文件将复制到应用程序的根目录。

将 Content 文件夹视为目标应用程序的根目录。例如，如果我希望一个包在目标应用程序的 /images 目录中添加图像，请确保将图像放在包的 Content/images 文件夹中。”

见：[http ://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package#From_a_convention_based_working_directory](http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package#From_a_convention_based_working_directory)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-24T15:27:40.730

您还可以`<files>`在构建包时使用 nuspec 的部分将文件移动到内容文件夹中：

```
<?xml version="1.0"?>
<package>
  <metadata>
    ...
  </metadata>
  <files>
    <file src="App.Template.config" target="content" />
    <file src="Program.template.cs" target="content" />
  </files>
</package> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-25T17:12:53.790

如果您正在创建`PackageReference`类似`netstandard2.0`库的项目，则以下内容应该有效：

.nu​​spec 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<package xmlns="http://schemas.microsoft.com/packaging/2012/06/nuspec.xsd">
  <metadata minClientVersion="3.3.0">
    ...
    <contentFiles>
      <files include="**/Pages/Shared/*.*" buildAction="Content" />
    </contentFiles>
  </metadata>
  <files>
    <file src="bin\Release\netstandard2.0\*.dll" target="lib\netstandard2.0" />
    <file src="contentFiles\**\*" target="contentFiles" />
  </files>
</package> 
```

这会将`contentFiles`文件夹复制到项目中。您可以通过编程语言和平台指定不同的文件。如果您想将所有文件都添加到`contentFiles/any/any`.

# c# - 在 C# 或 Java 中抽象一个 id 属性

> ID：10785598
> 
> 赞同：1
> 
> 时间：2012-05-28T13:38:13.427
> 
> 标签：c#, java

我正在设计一个 API。以下是来自接口的一些示例方法：

```
Entry findEntry(int processId);
Entry findEntry(int processId, Filter filter); 
```

where`processId`指的是一些唯一的识别信息。但是我真的不知道它的类型`processId`是什么。

我怎样才能抽象出某个元素之类`id`的东西？

我能想到的最好的方法是创建一个虚拟接口：

```
Entry findEntry(ProcessId id);
Entry findEntry(ProcessId, Filter filter); 
```

但是，我担心使用上述方法可能会迫使 API 的客户端在过高的抽象级别上运行。例如，进程 id 的相等性将不再起作用（而如果他们使用 int's - 它会）。

*澄清*：我没有澄清我只写接口（合同），稍后可能由不同的团队实现。这就是为什么我不能强制执行某些事情，比如 equals 方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T13:43:08.163

泛型是你的朋友

如果合适的话，在方法本身上

```
Entry findEntry<TKey>(TKey processId); 
```

或可能的班级

```
public class EntryFinder<TKey>
{
  public Entry findEntry(TKey processId)
  {
     // Implementation
  }
} 
```

**编辑**：如果您正在定义接口，您也可以在那里定义它并将其留给接口的实现者来确定他们想要使用什么类型来识别条目。

```
public interface IEntryFinder<TKey>
{
  Entry findEntry(TKey processId);
} 
```

用法：

```
// Foo's are looked up by integer
public class FooEntryFinder : IEntryFinder<int>
{
  public Entry findEntry(int processId)
  {
     // Implementation
  }
}
// Baa's are looked up by string
public class BaaEntryFinder : IEntryFinder<string>
{
  public Entry findEntry(string processId)
  {
     // Implementation
  }
} 
```

# .net - CellClick 事件：从组合框中的选择不平滑

> ID：10785599
> 
> 赞同：1
> 
> 时间：2012-05-28T13:38:25.377
> 
> 标签：.net, vb.net, winforms, events, datagridview

我有一个`DataGridView`有两列的。一个是`DataGridViewComboBoxColumn`，另一个是`DataGridViewButtonColumn`。要从 中捕获按钮单击`DataGridViewButtonColumn`，我已经编写了`CellClick`事件并且它工作正常。但是，这并不是让我从`DataGridViewComboBoxColumn`“顺利”中做出选择。我的意思是我必须单击组合框两次才能显示下拉列表。我注意到每次点击都会`CellClick`被触发。但只有在第二次单击后才会弹出下拉菜单。解决这个问题的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:39:13.940

问题已通过将`DataGridView`'`EditMode`属性设置为`EditOnEnter`如下所述解决：http: [//social.msdn.microsoft.com/forums/en-US/winformsdatacontrols/thread/c461b774-ece5-4fdd-86c5-90e5b6426690/](http://social.msdn.microsoft.com/forums/en-US/winformsdatacontrols/thread/c461b774-ece5-4fdd-86c5-90e5b6426690/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T04:31:41.093

我发现的最佳解决方法是在鼠标移到当前行时保持选中状态，以防止多次单击，一个将焦点带到当前行，第二个选择组合框下拉列表，将以下代码添加到数据网格的鼠标移动事件：

```
 Private Sub DataGridView1_MouseMove(sender As Object, e As System.Windows.Forms.MouseEventArgs) Handles DataGridView1.MouseMove
    Dim theRow As Integer = DataGridView1.HitTest(e.X, e.Y).RowIndex
    If theRow < 0 Then
        Exit Sub
    End If
    Me.DataGridView1.CurrentCell = Me.DataGridView1.Rows(theRow).Cells(0)
End Sub 
```

# jquery - 通过弹出提交表单

> ID：10785604
> 
> 赞同：0
> 
> 时间：2012-05-28T13:38:45.363
> 
> 标签：jquery

我做了一个表格。我想在提交时打开一个内联弹出窗口，并在弹出窗口中创建一个必须填写的文本框，然后在用户提交表单时在弹出窗口中，然后通过弹出窗口提交表单并刷新页面。

我无法在弹出窗口中显示警报框并通过弹出窗口提交表单。

```
<script type="text/javascript">
$(document).ready(function() {

  $("#submit").click(function(){
    $(".variousz").trigger('click');

  });

$(".variousz").fancybox({
    maxWidth    : 800,
    maxHeight   : 600,
    fitToView   : false,
    width       : '70%',
    height      : '70%',
    autoSize    : false,
    closeClick  : false,
    openEffect  : 'none',
    closeEffect : 'none',
    afterClose: function(){
         $('#formsubmit').submit();
        }

});
$("form").submit(function() {
 if ($('#accept').val() == 'ACCEPT'){ } else { $("span").text("Query is Not valid!").show().fadeOut(1000);
 return false; }
});
});
</script>
<body>

    <div id="inline" style="display:none;width:500px;">
        <h2>Lorem ipsum dolor sit amet</h2>     
        <p>
            <input type="text" name="accept" id="accept" value=""><span></span>

        </p>
        <p>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit.
        </p>
    </div>  
    <div class="tab_container">
            <a style="display:none;" class="variousz" href="#inline">Inline</a>

            <form method="GET" action="test.html" id="formsubmit" onsubmit="test.html" >
            <input type="text" name="aaa">
            <input type="button" id="submit" value="submit"> 
            </form>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:55:12.190

这里有几个弹出插件。 [http://choosedaily.com/1178/15-jquery-popup-modal-dialog-plugins-tutorials/](http://choosedaily.com/1178/15-jquery-popup-modal-dialog-plugins-tutorials/)
并用您的表单实现它们。
[这个老例子也是一个很好的例子](http://yensdesign.com/tutorials/popupjquery/) 。所有的[彩盒](http://www.jacklmoore.com/colorbox)，[花式盒，其他像这样的](http://fancybox.net) [灯盒替代品](http://www.tecdiary.com/blog/web-designing/top-10-css3-lightbox-alternatives.html) [可能很少](http://jquery-plugins.net/tag/lightbox)。

还有一个与此完全相同的[堆栈溢出问题。](https://stackoverflow.com/questions/3945216/pop-up-form-on-button-click)谢谢

# c# - 在 C# 中使用输出参数时出现 ORA-01036 错误

> ID：10785606
> 
> 赞同：2
> 
> 时间：2012-05-28T13:38:49.983
> 
> 标签：c#, oracle

我在 C#/Oracle 中的输出参数有问题。我已经隔离了我需要开始工作的代码。

这是一个更大的 SQL 语句的一部分，所以如果它没有意义，不要太担心。简而言之，我需要复制一行，给它一个新 ID 并返回该新 ID。我尝试使用不起作用的“返回”。我看不出为什么下面的代码不应该工作，但我收到“ORA-01036：非法变量名/编号”错误。谁能看到我做错了什么？

```
using (OracleConnection conn = new OracleConnection(connString))
{
    // Open connection and create command.
    conn.Open();
    using (OracleCommand cmd = new OracleCommand())
    {
        cmd.Connection = conn;
        cmd.CommandType = CommandType.Text;
        cmd.Parameters.Add("outValue", OracleType.Int32).Direction = ParameterDirection.Output;
        cmd.CommandText = "SELECT seq.nextval INTO :outValue FROM dual";
         try
         {
             cmd.ExecuteNonQuery();
         }
         catch (Exception e)
         {
             // This is just to see the exception when it fails.
         }
     }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:04:18.777

您是否尝试过这样的“返回”关键字？这段代码对我有用。

```
 using (OracleConnection conn = new OracleConnection(connString))
 {
     // Open connection and create command.
     conn.Open();
     using (OracleCommand cmd = new OracleCommand())
     {
         cmd.Connection = conn;
         cmd.CommandType = CommandType.Text;
         cmd.Parameters.Add("outValue", OracleType.Int32).Direction = ParameterDirection.Output;
         cmd.CommandText = "insert into table (id, value) values (seq.nextval, 'value') returning id into :outValue";
         cmd.ExecuteNonQuery();
     }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:42:10.070

您正在使用命名参数。尝试设置：

```
cmd.BindByName = true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T13:42:54.037

参数名称不匹配。

```
cmd.Parameters.Add(":outValue", OracleType.Int32).Direction.......;
                    ^ 
```

我还看到了查询语法的这种变化

```
"BEGIN SELECT seq.nextval INTO :outValue FROM dual END;" 
```

# matlab - fprintf 在数字之间打印随机字符串字母（即 K 或 á）

> ID：10785623
> 
> 赞同：0
> 
> 时间：2012-05-28T13:40:31.227
> 
> 标签：matlab

我遇到了麻烦，`fprintf`如果您能帮助我，我会非常感激：
在我现在正在处理的程序中，我正在使用单击鼠标时跟踪鼠标位置`get(gca, ‘currentpoint’)`，然后使用保存最终位置`fprintf`。当我没有在图形窗口中定义特定的轴位置时，一切都很顺利；但是，当我使用`set(gca, ‘visible’, ‘off’, ‘position’, [])`命令来定义特定的轴位置时，`fprintf`有时会在文本文件上写下一个字符串，要么 要么`K`，`á`然后在`dlmread`尝试读取文件时给出明显的错误。我想知道文本文件中这些字符串的原因可能是什么。

这是代码：

```
mouse = get(gca, 'currentpoint');
A = mouse(1, 1);
B = mouse(1, 2);
save x_center4.txt A -ascii;
save y_center4.txt B -ascii;
A = load('C:\MATLAB6p5\work\x_center4.txt');
B = load('C:\MATLAB6p5\work\y_center4.txt');
fid = fopen('grand_xcenter4.txt', 'a');
fid2 = fopen('grand_ycenter4.txt', 'a');
fprintf(fid, '%s %d\n', A);
fprintf(fid2, '%s %d\n', B);
fclose(fid);
fclose(fid2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T18:10:06.373

```
fprintf(fid, '%s %d\n', A);
fprintf(fid2, '%s %d\n', B); 
```

当格式字符串指定两个参数时，您在格式字符串之后仅提供 1 个参数：一个字符串 ( `%s`) 和一个以 10 为底的有符号整数 ( `%d`)？

这很可能是您报告的奇怪字符的原因。在调用之前了解`A`和的类型和值可能会有所帮助。`B``fprintf`

我一直在寻找关于什么构成 MATLAB 中的“未定义行为”的官方文档，但还没有找到好的来源。但是，未能提供字符串指定的正确数量和类型的参数几乎可以肯定是合格的。

# c# - 如何找出阻止对象垃圾收集的原因？

> ID：10785630
> 
> 赞同：3
> 
> 时间：2012-05-28T13:40:40.187
> 
> 标签：c#, wpf, visual-studio-express

我的一些对象没有被垃圾收集，我需要找出对对象的引用在哪里以及是什么阻止了垃圾收集。

我正在使用 Visual Studio Express。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T13:53:56.323

你可以试试[windbg的](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)[sos扩展](http://msdn.microsoft.com/en-us/library/bb190764%28v=vs.80%29.aspx)， 尤其是dumpheap和heapstat命令

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T13:56:52.350

您可以尝试使用非常流行的工具[Ants Memory Profiler 。](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/)它相当容易使用，它试图给你一个图表来说明你的参考资料是什么。在下面，我相信它的功能与 Bond 建议的类似，但它提供了更简单的用户体验。

它提供 14 天免费试用。实例图的示例如下所示：

![在此处输入图像描述](../Images/4e5efb3c73cfadde4610c37de04af9af.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-28T13:55:46.840

我会建议：

1.  分析您的代码并进行调试
2.  如果你找不到泄漏，你可以试试这个工具：[Memprofiler](http://memprofiler.com/)

# javascript - jQuery 不添加或删除类

> ID：10785632
> 
> 赞同：0
> 
> 时间：2012-05-28T13:40:43.990
> 
> 标签：javascript, jquery

为什么我的 jQuery 代码不添加并稍后删除加载类？

```
$('#crop').click(function (ev) {
    ev.preventDefault()
    $.post('frame.php?action=crop', dimensions, function (json) {
        $('body').addClass('loading')
        picture()
    }, 'json')
    $('body').removeClass('loading')
}) 
```

Chrome 和 Firebug 控制台是空的，所以不应该有任何错误。jQuery 版本是 1.4.4

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T13:41:44.707

它所做的是删除然后添加类。

您在回调中添加类到`$.post()`，这将在随后删除类*之后很长时间发生。*如果您交换这些行（在调用后添加`$.post()`并在回调中删除），那么它将更接近您想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T13:43:17.260

我认为你与订单混合...

```
$('#crop').click(function (ev) {
    ev.preventDefault()
    $.post('frame.php?action=crop', dimensions, function (json) {
        $('body').addClass('loading') // here you should remove the loading!
        picture()
    }, 'json')
    $('body').removeClass('loading') // here you should add the loading!
}) 
```

它应该是：

```
$('#crop').click(function (ev) {
    ev.preventDefault();
    $.post('frame.php?action=crop', dimensions, function (json) {
        $('body').removeClass('loading');
        picture();
    }, 'json');
    $('body').addClass('loading');
}); 
```

请注意，虽然用分号 ( `;`) 终止您的行不是强制性的，但这是最佳实践。

# postgresql - postgres 查询（不仅仅是函数）

> ID：10785640
> 
> 赞同：1
> 
> 时间：2012-05-28T13:41:10.723
> 
> 标签：postgresql

假设我有 2 个表：Human，Car。Table Car 有一些列，其中之一是 Human_id。例如，像这样：

```
Human_id Type
1        BMW
5        Mercedes
1        Audi
2        Peugeot
3        BMW
2        JEEP 
```

如何选择所有拥有不止一辆车的人？我的意思是我需要控制 Human_id 是否在 Human_id 列中多次使用。但我怎么能做到呢？

```
SELECT human.name
FROM Human, Car
WHERE .... <- what goes here?? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:51:04.453

`Car`尝试按 对您的记录进行分组`Human_id`，然后查看该`HAVING`子句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T14:28:43.130

```
SELECT human.name, car.human_id, count(*) as total
FROM Human, Car
group by human.name, car.human_id
having count(*) > 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T11:26:39.393

*如果您在Human*和*Car*表之间有 FK ，最好使用**Join**而不是笛卡尔积：

```
create table Human (
  idHuman integer primary key,
  name varchar(15),
   ...
);
insert into Human (idHuman, name) values
  (1,'A'), (2,'B'), (3,'C'), (4,'D'), (5,'E');

create table Car (
  Human_id integer REFERENCES Human ON DELETE CASCADE,
  Type varchar(15),
  ...
);
insert into Car (Human_id, Type) values 
  (1,'BMW'), (5,'Mercedes'), (1,'Audi')
 ,(2,'Peugeot'), (3,'BMW'), (2,'JEEP'); 
```

和查询：

```
select hu.name
from Human hu
join Car ca on (ca.Human_id = hu.idHuman)
group by hu.name
having count(*) > 1 
```

我希望我能帮助你

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-28T13:51:34.737

```
 select human.name
 from human
 where human.id in
      select human.id
      from car
      where count(car) > 1
      group by human.id 
```

# jquery - jquery else if 语句不起作用

> ID：10785641
> 
> 赞同：0
> 
> 时间：2012-05-28T13:41:11.777
> 
> 标签：jquery, ajax, forms, if-statement

如果用户没有完成整个表单，我想显示一条警告消息，但它似乎没有按我的意愿工作。jQuery .each 方法仅从第一个输入字段收集数据。如果我将第一个字段留空，它可以正常工作，但如果我只填写第一个字段并将其他字段留空，则显示成功，这是错误的。

```
// send message on click
$("#submit").click(function() {

    // store values
    var data = $("#form").serialize();

    $(":input, textarea").each(function() {

        // if empty show warning
        if ( $(this).val() === "" ) {
            $(".message-fail").fadeIn(500);
        }

        // if not empty send message
        else if ( !$(this).val() ) {
                $.ajax({
                    type: "POST",
                    url: "mail.php",
                    data: data,
                    success: function() {
                        $(".message-sent").fadeIn(500);
                    }
                });
        }

    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:43:31.560

您可以执行以下过程：

**但我认为你不需要在每个领域都需要 AJAX**

```
if ($.trim(this.value).length) { // if value exists
    $(".message-fail").fadeIn(500);
} else { // if no value exists, here no need to elseif
    $.ajax({
        type: "POST",
        url: "mail.php",
        data: data,
        success: function() {
            $(".message-sent").fadeIn(500);
        }
    });
} 
```

解释：

`$.trim(this.value)`-> 检查值是否存在

或者也可以使用（第一个更好）

`$.trim($(this).val()).length`-> 检查值是否存在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:44:00.617

在这一行`else if ( !$(this).val() )`有错误的条件，即`!$(this).val()`请纠正它会起作用....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T13:48:04.627

您需要将“else”放在“each”之外，因为第一个有效输入将发布表单:) 创建一个标志变量，在每个内部进行检查......但最好使用简单的循环。并在完成检查后再次检查您的标志并发布是否可以

# php - getmxrr 和已弃用：调用时传递引用

> ID：10785642
> 
> 赞同：1
> 
> 时间：2012-05-28T13:41:12.630
> 
> 标签：php, error-handling

[getmxrr](http://php.net/manual/en/function.getmxrr.php)的PHP 文档将语法指定为

```
bool getmxrr ( string $hostname , array &$mxhosts [, array &$weight ] ) 
```

此功能不会贬值（不会被更受欢迎的功能取代）。但是，当使用所述功能时，我收到以下警告：

> 已弃用：第 n 行的 path/to/script 中已弃用调用时传递引用

那么，应该如何使用这个实用程序而不引起 PHP 抱怨呢？

*语言对自己的处方皱眉不是很荒谬吗？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T13:44:17.897

你不应该这样称呼它。该函数声明了引用，它并不意味着在调用时使用。

```
$mxhosts = $weight = array(); // not really necessary but good for form :)
$res = getmxrr('example.com', $mxhosts, $weight);
// $mxhosts and $weight are populated 
```

另见： http: [//php.net/manual/en/language.references.pass.php](http://php.net/manual/en/language.references.pass.php)

# azure - 自动更新启动任务会在 azure 应用程序中工作吗？

> ID：10785650
> 
> 赞同：2
> 
> 时间：2012-05-28T13:41:43.417
> 
> 标签：azure, startup, auto-update

我已经为 Azure 应用程序构建了一个启动任务，其中包含 exe 文件（以一定的时间间隔定期运行），现在我想让它每周自动更新，就像我之前在[这里问过的那样](https://stackoverflow.com/questions/7721654/how-to-do-automatic-update-of-exe-project-in-c-sharp-and-azure-startup-task)

但是，我将通过该 exe（启动任务）执行一些替换该文件的逻辑，然后它也不会对新文件产生任何影响。我得出的结论是，只有当我们使用新文件升级/创建该 azure 项目时，新的启动任务才会生效。（如果我理解错了，请纠正我）

那么有什么方法可以通过重启实例（通过 exe/startuptask）来完成我的逻辑工作吗？我认为它也会使用原始文件（在升级/创建应用程序时添加到启动任务中）而不是新文件！

有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T13:54:59.263

这是一个非常不可靠的解决方案。如果 Azure 实例崩溃或因更新而停止运行，您将从原始服务包启动一个新实例。修改后的实例的所有状态都将丢失。

一种更可靠的方法是将易失性可执行文件存储在 Azure Blob 存储等某个位置。您将新版本上传到 blob 存储，角色以某种方式看到（通过轮询存储或某些用户调用的操作 - 没关系），下载新版本并用新版本替换现有版本。

这样，如果您的角色崩溃，它将在启动时可靠地从持久存储中获取最新版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T06:16:55.400

在我研究了你的问题之后，我可以提出一个非常简单的解决方案，如下所示，我之前为 Tomcat/Java 示例做过：

**准备您的 EXE 以重新启动 VM 以及您的原始代码**：

1.  在您的 EXE 中，创建一个方法以在 Azure 存储中以特定间隔查找特定 XML 文件，还添加重试逻辑以访问 XML
2.  解析 XML 以获取特定值，如果设置了特定值，则重新启动机器
3.  以 ZIP 格式打包您的 EXE 并放置在您的 Azure 存储中
4.  确保将 XML 放在 Cloud 上并设置 reboot = false 值

**在启动任务中做什么：**

1.  创建启动任务并从包含您的 EXE 的 Azure 存储下载 ZIP
2.  下载后解压文件并将EXE放到指定文件夹
3.  启动EXE

**当您想要更新 EXE 时该怎么做：**

1.  更新您的 EXE，打包成 ZIP 并放置在同名的 Azure 存储中的同一位置
2.  更新您的 XML 以启用重新启动

**更新将如何发生：**

1.  EXE 将在某些内部按设计后查找 XML
2.  一旦它看到重新启动设置，它将重新启动虚拟机
3.  重新启动后，启动任务将启动，您的新 EXE 将下载到 Azure VM 并进行更新。确保下载和更新在同一个文件夹中完成。

看看下面使用类似方法的示例中的 Startup tak：http: [//tomcatazure.codeplex.com/](http://tomcatazure.codeplex.com/)

# wpf - 命令行为附件参数

> ID：10785652
> 
> 赞同：1
> 
> 时间：2012-05-28T13:41:45.060
> 
> 标签：wpf, mvvm, command-behaviors

我已经实现了这篇文章中的代码：[http](http://wblo.gs/YvF) ://wblo.gs/YvF 。一切都按预期工作，但我不知道如何在事件触发时访问传递给事件处理程序的参数。我知道有命令参数，但我如何使用它来访问 EventArgs？这是我实现的代码...

拖动输入类

```
using System.Windows;
using System.Windows.Controls;
using System.Windows.Input;

public class DragEnter : Attachment<Control, DragEnterBehavior, DragEnter>
{
    private static readonly DependencyProperty behaviorProperty = Behavior();
    public static readonly DependencyProperty CommandProperty = Command(behaviorProperty);
    public static readonly DependencyProperty CommandParameterProperty = Parameter(behaviorProperty);

    public static void SetCommand(Control control, ICommand command) { control.SetValue(CommandProperty, command); }
    public static ICommand GetCommand(Control control) { return control.GetValue(CommandProperty) as ICommand; }
    public static void SetCommandParameter(Control control, object parameter) { control.SetValue(CommandParameterProperty, parameter); }
    public static object GetCommandParameter(Control buttonBase) { return buttonBase.GetValue(CommandParameterProperty); }
} 
```

DragEnterBehavior 类

```
using System.Windows.Controls;
using Microsoft.Practices.Prism.Commands;

public class DragEnterBehavior : CommandBehaviorBase<Control>
{
    public DragEnterBehavior(Control selectableObject)
        : base(selectableObject)
    {
        selectableObject.DragEnter += (sender, args) => ExecuteCommand();
    }
} 
```

实施代码

```
public ICommand EditItemCommand
{
    get
    {
        if (editItemCommand == null)
            editItemCommand = new RelayCommand(param => EditItemControl(), pre => IsItemEditButtonEnabled());

        return editItemCommand;
    }
}

public void EditItemControl()
{
    ...
    ChangedView(itemEditorViewModel);
}

<ListBox Behaviors:DragEnter.Command="{Binding EditItemCommand}" ... 
```

对此的任何帮助将不胜感激。谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:41:53.973

这是未经测试的，但是

*   将您的 DragEnterBehaviour 更改为

    ```
    public class DragEnterBehavior : CommandBehaviorBase<Control>
    {
        public DragEnterBehavior(Control selectableObject)
            : base(selectableObject)
        {
            selectableObject.DragEnter += (sender, args) =>
                                          {
                                              CommandParameter = args;
                                              ExecuteCommand();
                                          };
        }
    } 
    ```

*   将您的 RelayCommand（我假设这是来自 MVVM Light）更改为

    ```
    public ICommand EditItemCommand 
    { 
        get 
        { 
            if (editItemCommand == null) 
                editItemCommand = new RelayCommand<DragEventArgs>(
                    EditItemControl, IsItemEditButtonEnabled); 

            return editItemCommand; 
        } 
    } 

    public void EditItemControl(DragEventArgs args) 
    { 
        ... 
    } 
    ```

如果您使用的是 MVVM Light，那么您将获得相同的结果，如下所示：

```
<i:Interaction.Triggers> 
    <i:EventTrigger EventName="DragEnter"> 
        <cmd:EventToCommand Command="{Binding DragEnterCommand}" 
            PassEventArgsToCommand="True" /> 
    </i:EventTrigger> 
</i:Interaction.Triggers> 
```

# windows-phone-7 - Expensify WP7 测试框架

> ID：10785654
> 
> 赞同：0
> 
> 时间：2012-05-28T13:41:56.293
> 
> 标签：windows-phone-7, command, voice, speech

我们可以使用 Expensify 框架测试模拟器/设备上的语音命令吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:28:22.427

这种感觉应该是可能的，但不是我已经编码的东西。

要实现它，您必须设置某种播放系统来创建音频语音命令。例如，这可以通过使用 PC 上的 C# SpecFlow 步骤触发的音频播放来完成 - 例如使用 DirectShow/quartz 之类的东西 - [http://csharp-slackers.blogspot.co.uk/2008/10/playing-wav -或-mp3.html](http://csharp-slackers.blogspot.co.uk/2008/10/playing-wav-or-mp3.html)

然后，该音频将通过主机 PC 上的扬声器和麦克风播放并捕获回模拟器 - 只需确保它们的位置正确。

# c# - Monotouch中的Mysql连接问题

> ID：10785660
> 
> 赞同：1
> 
> 时间：2012-05-28T13:42:34.670
> 
> 标签：c#, mysql, xamarin.ios

我想在 monotouch 中使用 MySql connector.NET，它不断给我奇怪的错误。

错误如下：

> 错误 CS0584：内部编译器错误：无法导入类型 `MySql.Data.MySqlClient.MySqlConnection' from`MySql.Data，版本=6.3.9.0，Culture=neutral，PublicKeyToken=c5687fc88969c44d"

和：

> 无法隐式转换类型`object' to` MySql.Data.MySqlClient.MySqlConnection'。存在显式转换（您是否缺少演员表？）

我使用以下代码创建连接：

```
string ConnectionString = "Server=localhost;" + "Database=myDatabas;" + 
                          "User ID=username;" + "Password=myPassword;" +  
                          "Pooling=false;"; 
MySqlConnection conn = new MySqlConnection (); 
```

请帮助我解决上述错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T13:47:40.180

你有没有包括

```
conn.ConnectionString = ConnectionString; 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T14:24:31.513

确保您的`MySql.Data.dll`程序集是针对 MonoTouch 基类库 (BCL) 编译的。

MonoTouch BCL 是 Silverlight API 的超集，它不包括完整框架的所有功能，例如，并非 .NET 4.0 中的所有功能都可用。这可能会在加载程序集时引起问题（例如，对于编译器）。

# javascript - 谷歌地图自动完成列表

> ID：10785665
> 
> 赞同：0
> 
> 时间：2012-05-28T13:42:50.903
> 
> 标签：javascript, google-maps, autocomplete, google-api, google-maps-autocomplete

我想知道是否有人可以帮助我。

我正在使用下面的代码在用户输入地址详细信息时执行 Google 地图自动完成操作：

```
// JavaScript Document
var geocoder;
var map;
var marker;

function initialize(){
  var myOptions = {
    zoom: 6,
    center: new google.maps.LatLng(54.312195845815246, -4.45948481875007),
    mapTypeId: google.maps.MapTypeId.TERRAIN,
    mapTypeControl: true,
    mapTypeControlOptions: {
      style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR,
      position: google.maps.ControlPosition.TOP_RIGHT
    },
    navigationControl: true,
    navigationControlOptions: {
      style: google.maps.NavigationControlStyle.ZOOM_PAN,
      position: google.maps.ControlPosition.TOP_LEFT
    },
    scaleControl: true,
    scaleControlOptions: {
      position: google.maps.ControlPosition.BOTTOM_LEFT
    }
  };

  map = new google.maps.Map(document.getElementById('map'), myOptions);
  geocoder = new google.maps.Geocoder();
  marker = new google.maps.Marker({
    map: map,
    draggable: true
  });
}

$(document).ready(function() { 
  initialize();
  $(function() {
    $("#address").autocomplete({
      //This bit uses the geocoder to fetch address values
      source: function(request, response) {       
        geocoder.geocode( {'address': request.term }, function(results, status) {
          response($.map(results, function(item) {
            return {
              label:  item.formatted_address,
              value: item.formatted_address,
              latitude: item.geometry.location.lat(),
              longitude: item.geometry.location.lng()
            }
          }));
        })
      },
      //This bit is executed upon selection of an address
      select: function(event, ui) {
        $("#osgb36lat").val(ui.item.latitude);
        $("#osgb36lon").val(ui.item.longitude);
        var location = new google.maps.LatLng(ui.item.latitude, ui.item.longitude);
        marker.setPosition(location); 
        map.setZoom(16); 
        map.setCenter(location);

      }
    });
  });

  google.maps.event.addListener(marker, 'dragend', function() {
    geocoder.geocode({'latLng': marker.getPosition()}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        if (results[0]) {
          $('#address').val(results[0].formatted_address);
          $('#osgb36lat').val(marker.getPosition().lat());
          $('#osgb36lon').val(marker.getPosition().lng());

          var point = marker.getPosition();
          map.panTo(point);
        }
      }
    });
  });
}) 
```

这就是我将它放在我的表格中的方式。

```
<div>
  <input name="address" type="text" id="address" size="40" maxlength="40" style="font:Calibri; font-size:12px" />
</div> 
```

我现在想做的是限制列表中可查看的项目数量。我在几个论坛和谷歌地图网站上做了一些研究，但我似乎找不到解决方案，所以我什至不确定这是否可能。

我只是想知道是否有人可以看看这个，并提供一些关于我如何能够做到这一点的指导。

非常感谢和亲切的问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T13:46:42.507

Google Maps V3 API 现在包含一个自动完成功能，该功能将使任何文本输入字段适应自动完成位置和/或地点。它还没有显示缩略图，但添加地点对于某些用例来说非常有用，以下是详细信息：

文档：[http ://code.google.com/apis/maps/documentation/javascript/places.html#places_autocomplete](http://code.google.com/apis/maps/documentation/javascript/places.html#places_autocomplete)

参考：[http ://code.google.com/apis/maps/documentation/javascript/reference.html#Autocomplete](http://code.google.com/apis/maps/documentation/javascript/reference.html#Autocomplete)

示例：[http ://code.google.com/apis/maps/documentation/javascript/examples/places-autocomplete.html](http://code.google.com/apis/maps/documentation/javascript/examples/places-autocomplete.html)

我想这些对你有帮助......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T12:49:50.663

经过进一步研究，我在这里找到了一个很棒的教程：[http](http://rjshade.com/2012/03/27/Google-Maps-autocomplete-with-jQuery-UI/) ://rjshade.com/2012/03/27/Google-Maps-autocomplete-with-jQuery-UI/我已经能够适应。

# deployment - 使用 mercurial 部署网站

> ID：10785671
> 
> 赞同：2
> 
> 时间：2012-05-28T13:43:10.500
> 
> 标签：deployment, version-control, mercurial, bitbucket

我正在为我们的一个最新项目建立一个开发/部署周期。这是我想要做的，

1.  将最新代码提交到本地“mercurial”克隆。
2.  将其推送到托管在“bitbucket”的中央仓库
3.  在我的服务器上打开一些基于 Web 的管理控制台（这是我需要帮助的部分），该服务器已配置为使用 bitbucket 存储库自动获取最新提交并显示列表。
4.  选择其中一个修订版并执行更新，这将有效地更新网站。
5.  如果最新版本存在一些问题，请使用相同的 Web 控制台返回到以前的版本。

我在 step1 和 step2 使用“SourceTree”，我想保持整个循环 GUI 为基础。谁能建议我可以用于服务器端管理的任何工具（步骤 3、4、5）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:37:04.563

这比你想象的要简单：

1.  使用 bitbucket 作为源在您的服务器上克隆网站

2.  编写一个小型网络应用程序，该应用程序`hg pull -u`在您网站的根文件夹中调用。Mercurial 记得从哪里拉，所以你在这里不需要任何东西。

第二个特性可以使用`hg id -i`（见[这个答案](https://stackoverflow.com/questions/2485651/print-current-mercurial-revision-hash)）来实现，以获取当前版本。将其写入文件。

现在您需要一个网页，其中列出了该文件中的所有修订并`hg up -r <revision>`在您单击其中一个时运行。

`hg push`但也许更好的方法是使用本地存储库直接推送到 Web 服务器（请参见[此处](http://stevelosh.com/blog/2009/01/deploying-site-fabric-and-mercurial/)）。然后，您可以使用[挂钩](http://mercurial.selenic.com/wiki/Hook)来更新文件并将最新修订保存到文件中。

现在您只需要一个 Web 服务即可恢复到以前的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T20:06:48.917

[Team City](http://www.jetbrains.com/teamcity/)是一个网络应用程序，可以为您做到这一点。

它是一个持续集成服务器，但可以配置为仅在您使用应用程序时发布。

有许多持续集成服务器，我想大多数/所有人都可以做你想做的事，所以如果那个服务器不太适合你的需求，请四处搜索。

# linux - Linux 中的隔离存储

> ID：10785676
> 
> 赞同：1
> 
> 时间：2012-05-28T13:43:27.983
> 
> 标签：linux, isolatedstorage

在 Windows 中，我们可以将与特定应用程序相关的一些信息保存在应用程序的隔离存储中。

我们能否拥有这种相同类型的存储或任何其他安全存储位置来为 Linux 中的应用程序保存信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:47:34.823

最常见的是在用户主目录中有一个隐藏的子目录，并在那里存储数据。

# java - 如何从字符串中提取子字符串（Android）？

> ID：10785684
> 
> 赞同：0
> 
> 时间：2012-05-28T13:44:12.360
> 
> 标签：java, android, string, substring

我正在尝试使用从字符串中提取子字符串`java.Util.Scan`

子字符串在原始字符串中的“ `<TD class=MoreB align=center>`”和“ ”之间`</TD>`

这是代码：

```
public static String pullStringOut(String str)
{
    String stringer = null;

    Scanner scanner = new Scanner(str);
    scanner.findInLine("<TD class=MoreB align=center>");

    while (scanner.hasNext() && scanner.next() != "</TD>")
    {
        stringer+= " " + (scanner.next());
    }

    return stringer;
} 
```

但效果不佳。

从原始字符串：

" `<TD class=MoreB align=center>TextTextTextText</TD></TR></TABLE> }`"

我得到以下结果：

> " `TextTextTextText</TD></TR></TABLE> }`"

而不是预期的

> “文本文本文本文本”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:55:14.410

几个问题：

*   `scanner.next() != "</TD>"`将始终`true`作为操作数不会是同一个对象。使用`!scanner.next().equals("</TD>")`. 来自[JLS 的 Reference Equality Operators == 和 != 部分](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.21.3)：

    > 如果操作数的值都为 null 或都引用同一个对象或数组，则 != 的结果为 false；否则，结果为真。

*   `scanner.next()`在循环的每次迭代中被调用两次。改成：

    ```
    String line;
    while (scanner.hasNext() && !(line = scanner.next()).equals("</TD>"))
    {
        stringer+= " " + line;
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:58:31.923

您可以使用正则表达式。

就像是 ：

```
 Pattern p = Pattern.compile("/\<TD class=MoreB align=center>(.*)\<\/td\>/"); 
Matcher m = p.matcher(str); 
while(m.find()) { 

  //do whatever you want here
 } 
```

（未测试）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T23:38:30.990

这是一个替代解决方案：

```
String tvt ="<TD class=MoreB align=center>TextTextTextText</TD></TR></TABLE> }" //your original string
                String s ="<TD class=MoreB align=center>";
                String f= "</TD>";
                int sindex =tvt.indexOf(s);
                int findex =tvt.indexOf(f);
                String fs = "";
                if(sindex!=-1 && findex!=-1)
                fs=tvt.substring(sindex+s.length(), findex); // your desired substring 
```

# c++ - 如何修复重叠的 XML？

> ID：10785688
> 
> 赞同：0
> 
> 时间：2012-05-28T13:44:46.500
> 
> 标签：c++, python, xml, regex, bash

我有个问题。我正在对 XML 代码进行一些更改，但有时它会重叠，例如：

```
<xref><mytag></xref></mytag> 
```

我正在考虑一个将解析 XML 文件并解决该问题的脚本，例如：

```
<xref><mytag></mytag></xref><mytag></mytag> 
```

任何人都可以帮助我吗？也许一些正则表达式？或者一些可以使用的工具、python 脚本等。我有很多文件要修复，我将不胜感激每一个建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T13:56:39.900

使用[`lxml`](http://lxml.de/)；`recover`该库可以通过设置标志来尝试解析无效的 XML 并清理它：

```
>>> from lxml import etree
>>> from StringIO import StringIO
>>> ex = '<xref><mytag>there is some text</xref></mytag>'
>>> parser = etree.XMLParser(recover=True)
>>> tree = etree.parse(StringIO(ex), parser)
>>> etree.tostring(tree.getroot())
'<xref><mytag>there is some text</mytag></xref>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:47:00.807

这是我在 Python 中处理 xml 的最佳工具：[lxml](http://lxml.de/)

但是，您的问题恐怕无法用 lxml 解决，因为该 xml 无效。我鼓励您使用一些 xml 工具或库 (lxml) 来生成有效的 xml 并避免此类问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T13:54:12.553

至于 C++，您可以使用 POCO 库 XML（文档）功能来编辑您的 XML 文件：[Poco::XML::Document](http://pocoproject.org/docs/Poco.XML.Document.html)

# java - 嵌入式代理 Active MQ 启动

> ID：10785695
> 
> 赞同：1
> 
> 时间：2012-05-28T13:45:33.787
> 
> 标签：java, activemq

我写了一个使用 activemq 嵌入式代理的小程序。程序在一台机器上成功运行，但不能在另一台机器上运行。两台服务器都有 sun os 10 & java 7 以及 activemq 5.5.1。我的意思是不起作用，新的 BrokerService() 构造函数调用不会返回一段时间（几分钟）。片段代码如下所示。

谢谢建议。。

```
public static void main(String[] args) {

    // .... 
    try {
        p.start("tcp://192.168.4.2:61616");
    } catch (MessagingException e) {
        e.printStackTrace();
    }
    // ....

}

public void start(String brokerAddress) throws MessagingException {
    try {

        System.out.println(">>> initialize 2");
        broker = new JmsBroker(brokerAddress, brokerAddress.substring(6));
        System.out.println(">>> initialize 3");
        broker.start();
        System.out.println(">>> initialize 4");

        messageProducer = new JmsProducer(brokerAddress,
                                          "MESSAGING_IF_NAME",
                                          false,
                                          5000);
        System.out.println(">>> initialize 5");

    } catch (JMSException e) {
        System.out.println(e);
    }

}

public class JmsBroker extends Thread {

private BrokerService       broker;
private Object              lock;
private static final Logger logger = LoggerFactory.getLogger(JmsBroker.class);
private String              connector;

public JmsBroker(String jmsAddress, String brokerName) throws MessagingException {
    broker = new BrokerService(); // !!!!! PROBLEM
    broker.setBrokerName(brokerName);
    broker.setUseJmx(true);
    broker.setUseLoggingForShutdownErrors(true);
    broker.setSchedulerSupport(false);
    broker.setPersistent(false);
    connector = jmsAddress;

    try {
        System.out.println(">>> s1");
        broker.addConnector(connector);
        System.out.println(">>> s2");
        broker.start(true);
        System.out.println(">>> s3");

        while (!broker.isStarted()) {
            Thread.sleep(10);
            System.out.println("BROKER NOT STARTED");
        }

        logger.info("JMS BROKER STARTED");
        System.out.println("JMS BROKER STARTED");
    } catch (InterruptedException e) {
        throw new MessagingException(e);
    } catch (Exception e) {
        throw new MessagingException(e);
    }
}

public void run() {
    try {
        lock = new Object();
        synchronized (lock) {
            lock.wait();
        }
    } catch (Exception e) {
        logger.error("", e);
    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:45:17.327

etc/hosts 文件上的错误记录会导致此问题。删除后问题解决。

# winforms - 如何在winForms中透明地绘制非客户区？.Net 4

> ID：10785696
> 
> 赞同：1
> 
> 时间：2012-05-28T13:45:36.430
> 
> 标签：winforms, .net-4.0, transparency, nonclient

我正在开发一个自定义表单，我希望非客户区是透明的。我通过消息号“0x85”处理非客户区绘画，这是我迄今为止尝试过的：

*   使用颜色“Color.Transparent”进行绘制 -> 非客户区被涂成黑色。如果我使用红色或黑色或绿色的图像，它可以完美地工作，但透明 = 黑色
*   创建窗体大小的透明图像并使用方法“myGraphics.DrawImage("img.png")”。背景仍然是黑色的。如果我使用红色或黑色或绿色的图像，它也可以完美地工作......
*   不画任何东西（希望我能保持透明）......没用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:17:25.633

使窗口的某些部分透明需要硬件支持，这是一种称为分层的视频适配器功能。使用表单的 TransparencyKey 属性。将其设置为不寻常的颜色，例如 Color.Fuchsia。并使用该颜色绘制以使视频适配器省略像素。

# jquery - AJax 获取正确的值，返回包含文件？

> ID：10785698
> 
> 赞同：0
> 
> 时间：2012-05-28T13:45:58.153
> 
> 标签：jquery, ajax, asp-classic

我在这里完全感到困惑。

我有一个 html 表单，可以让用户编译 Doc ID 列表。单击我的创建按钮后，我会收到这些 Doc ID 的值的警报，并需要将它们发送到我的 ASP 页面以根据需要格式化字符串，然后返回格式化的字符串并用它填充文本区域。我已经从这里的等式中完全删除了我的 ASP 页面，因为不知何故，我的主页上出现了这个晦涩的问题。

当我单击我的创建按钮时，会弹出带有正确值的警报框，但不是将它扔到我的文本区域中，而是使用页面中的包含文件、完整的 CSS 和所有内容填充文本区域。我从来没有见过这样的事情。在 Firebug 中，我没有得到关于为什么这是响应文本或任何内容的信息。

奇怪的是，我已经在 jsFiddle 中设置了这个，在这里，我有完全相同的代码，但这次，我得到了正确的结果：http: [//jsfiddle.net/VNUUV/](http://jsfiddle.net/VNUUV/)

这让我束手无策，我需要一些见解。我实际测试页面上的代码与 JS Fiddle 上的代码相同。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T18:07:56.957

这可能是您遇到的情况可能发生的情况。未安装 ASP 功能的 IIS 服务器可能会将 asp 文件视为标准内容文件。服务器端包含仍然有效。

您的公司页面只是 html，因此可以很好地呈现。但是，您的 Ajax 请求只是在包含已解决后带回了 asp 页面的脚本文本。

# c# - 在操作系统级别检测引发的事件（操作系统外观）

> ID：10785699
> 
> 赞同：0
> 
> 时间：2012-05-28T13:46:10.517
> 
> 标签：c#, .net, windows, winforms, operating-system

我有一个似乎很常见的问题。我在一台最棒的电脑上运行 Windows 7 Home Premium（去年买的时候），某些视觉效果会自动关闭。

我的平均用户体验评分很高，所以它不能解释为什么会发生这种情况。唯一被关闭的功能是“拖动时显示窗口内容”选项。这真的让我很烦。

目前在线上没有针对此问题的有效解决方案。除了“必须与您机器上安装的另一个应用程序存在冲突”。

是的，我确实知道是什么应用程序导致了这种冲突。这是我该死的互联网提供商的软件——你知道……当你连接到网络时，你绝对必须始终打开该应用程序。

于是，我有了一个想法。如果我可以订阅一个事件，以便我在后台运行的应用程序将检测到此“拖动时显示窗口内容”选项何时关闭 - 然后我的应用程序将再次将其重新打开。

当我手动执行此操作时，它似乎会持续大约一两个小时，然后再次关闭。

是否可以处理这些类型的事件，并重新启动某些视觉效果功能？如果是这样，是否有任何资源？

我还没有找到关于这个主题的任何东西。

![在此处输入图像描述](../Images/0cc082abbcd054f9bfcc661b104b4b21.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:41:28.107

是的，当系统设置更改时， [WM_SETTINGSCHANGE消息会发送到所有窗口。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms725497%28v=vs.85%29.aspx)然后您可以使用 SPI_GETDRAGFULLWINDOWS 调用[SystemParametersInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724947%28v=vs.85%29.aspx)以确定“拖动时显示窗口内容”是否已禁用并使用 SPI_SETDRAGFULLWINDOWS 启用它。

因此，您需要做的就是创建一个带有表单的应用程序（甚至可以保持隐藏状态）并覆盖表单[WndProc](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.wndproc.aspx)并使用 p/Invoke处理`WM_SETTINGSCHANGE`消息和调用。`SystemParametersInfo`SystemParamtersInfo的 p/Invoke 定义[可在 pinvoke.net 获得](http://www.pinvoke.net/default.aspx/user32/SystemParametersInfo.html)

尽管可能更容易的是更改[HKCU\Control Panel\Desktop\DragFullWindows](http://technet.microsoft.com/en-us/library/cc978609.aspx)注册表值的安全性，使其无法更改。

# asp-classic - 弹出窗口不附加文本

> ID：10785706
> 
> 赞同：0
> 
> 时间：2012-05-28T13:46:32.853
> 
> 标签：asp-classic, popupwindow, window.open

当我进入一个网站时，我正在尝试实现一个“跟踪窗口”弹出窗口，然后在整个网站上向该窗口发送消息，以便诊断我在网站上遇到的一些更尴尬的问题。问题是页面发生变化，如果跟踪窗口已经存在，则在添加新的 TraceText 之前删除所有内容。我想要的是一个可以从网站内任何页面发送消息的窗口。

我有一个 javascript Script debugger.js，我将它作为脚本包含在每个屏幕中（如下所示），然后我会调用 sendToTraceWindow() 函数在整个网站上向它发送消息。由于我正在调查的问题，目前这主要是在 vbscript 中完成的。我认为这是因为我在 debugger.js 中编写脚本到每个屏幕，它设置 traceWindow 变量 = null （见下面的代码）但我不知道如何解决这个问题！

非常感谢任何帮助。安德鲁

代码示例：

**调试器.js**：

```
var traceWindow = null

function opentraceWindow()
{
   traceWindow = window.open('traceWindow.asp','traceWindow','width=400,height=800')
}

function sendToTracewindow(sCaller, pMessage)
{

   try
   {
      if (!traceWindow)
      {
         opentraceWindow()
      }

      if (!traceWindow.closed)
      {
         var currentTrace = traceWindow.document.getElementById('trace').value
         var newTrace = sCaller + ":" + pMessage + "\n" + currentTrace
         traceWindow.document.getElementById('trace').value = newTrace
      }
   }
   catch(e)
   {
         var currentTrace = traceWindow.document.getElementById('trace').value
         var newTrace = "error tracing:" + e.message + "\n" + currentTrace
         traceWindow.document.getElementById('trace').value = newTrace
   }

} 
```

**traceWindow.asp** - 只是一个 id='trace' 的文本区域：

```
<HTML>
   <head>
      <title>Debug Window</title>
   </head>
   <body>
      <textarea id="trace" rows="50" cols="50"></textarea>
   </body>
</HTML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:43:53.650

我认为没有任何方法可以解决您的 traceWindow 变量将在每次页面加载时重置的事实，因此使您对现有窗口的句柄无效。但是，如果您不介意利用 LocalStorage 和一些 jQuery，我相信您可以实现您正在寻找的功能。

将您的跟踪窗口更改为：

```
<html> 
   <head> 
      <title>Debug Window</title> 
      <script type="text/javascript" src="YOUR_PATH_TO/jQuery.js" />
      <script type="text/javascript" src="YOUR_PATH_TO/jStorage.js" />
      <script type="text/javascript" src="YOUR_PATH_TO/jquery.json-2.2.js" />
      <script type="text/javascript">
        var traceOutput;
        var traceLines = [];
        var localStorageKey = "traceStorage";

        $(function() {
          // document.ready.
          // Assign the trace textarea to the global handle.
          traceOutput = $("#trace");
          // load any cached trace lines from local storage
          if($.jStorage.get(localStorageKey, null) != null) {
            // fill the lines array
            traceLines = $.jStorage.get(localStorageKey);
            // populate the textarea
            traceOutput.val(traceLines.join("\n"));
          }
        });

        function AddToTrace(data) {
          // append the new trace data to the textarea with a line break.
          traceOutput.val(traceOutput.val() + "\n" + data);
          // add the data to the lines array
          traceLines[tracelines.length] = data;
          // save to local storage
          $.jStorage.set(localStorageKey, traceLines);
        }

        function ClearTrace() {
          // empty the textarea
          traceOutput.val("");
          // clear local storage
          $.jStorage.deleteKey(localStorageKey);
        }
      </script>
   </head> 
   <body> 
      <textarea id="trace" rows="50" cols="50"></textarea> 
   </body> 
</html> 
```

然后，在您要跟踪数据的页面中，您可以像这样修改您的 javascript：

```
var traceWindow = null;                 
function opentraceWindow() {                      
  traceWindow = window.open('traceWindow.asp','traceWindow','width=400,height=800');
}

function sendToTracewindow(sCaller, pMessage) {
  traceWindow.AddToTrace(sCaller + ":" + pMessage);
} 
```

每次加载新页面并刷新跟踪窗口时，都会从本地存储中加载现有跟踪数据并显示在您的文本区域中。这应该实现您正在寻找的功能。

请对任何错误表示友好-我将在星期一早上进行此操作！

找到 jQuery 库应该很简单。您可以在此处找到 jStorage 库：http: [//www.jstorage.info/](http://www.jstorage.info/)，您可以在此处找到 jquery-json：[http ://code.google.com/p/jquery-json/](http://code.google.com/p/jquery-json/)

# xsd - JMeter XML Schema的相对路径？

> ID：10785723
> 
> 赞同：1
> 
> 时间：2012-05-28T13:47:57.500
> 
> 标签：xsd, jmeter

我正在使用 JMeter 2.6，并为我的测试设置以下设置：

```
-
|-test.jmx
|-myschema.xsd 
```

我已经设置了一个 XML Schema Assertion，并`"myschema.xsd"`在 File Name 字段中输入了内容。不幸的是，这不起作用：

```
HTTP Request
Output schema : error: line=1 col=114 schema_reference.4:
Failed to read schema document 'myschema.xsd', because 
1) could not find the document; 
2) the document could not be read; 
3) the root element of the document is not <xsd:schema>. 
```

我尝试向 中添加一些东西`path`，包括`${__P(user.dir)}`（指向`home dir`用户的）和`${__BeanShell(pwd())}`（不返回任何内容）。我通过给出绝对路径让它工作，但脚本应该被其他人使用，所以这不好。

我可以让它使用在命令行中定义的属性值，但出于同样的原因，我也想避免它。

**在这些情况下，如何正确地将断言指向架构？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:10:07.090

看起来你必须在这种情况下

*   手动根据 xsd 验证您的 xml：只需使用来自例如[BeanShell Assertion](http://jmeter.apache.org/usermanual/component_reference.html#BeanShell_Assertion)或[BeanShell PostProcessor](http://jmeter.apache.org/usermanual/component_reference.html#BeanShell_PostProcessor)的相应 java 代码；
    这是一个非常好的解决方案：[https](https://stackoverflow.com/a/16054/993246) ://stackoverflow.com/a/16054/993246 （您也可以使用任何其他您想要的）；
*   挖掘 jmeter 的源代码，修改 XML Schema 文件获取以支持路径中的变量（文件名字段） - 就像[CSV Data Set Config](http://jmeter.apache.org/usermanual/component_reference.html#CSV_Data_Set_Config)一样；
    但是以前的方法似乎要容易得多；
*   [从 shell-script 或ant-task](http://www.programmerplanet.org/pages/projects/jmeter-ant-task.php)运行您的 jmeter 测试场景，这将在脚本执行之前首先将您的 xsd 复制到 jmeter 的 /bin 目录 - 至少 XML Schema Assertion 可以“按原样”使用。

也许如果你会发现任何其他/更好的 - 请分享它。
希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T09:12:19.947

**摘要：**最后我使用*[http://path.to.schema/myschema.xsd](http://path.to.schema/myschema.xsd)*作为断言中的文件名参数。

**说明：**按照 Alies Belik 的建议，我发现设置架构的代码如下所示：

```
DocumentBuilderFactory parserFactory = DocumentBuilderFactory.newInstance();
...
parserFactory.setAttribute("http://java.sun.com/xml/jaxp/properties/schemaSource", xsdFileName); 
```

其中 xsdFileName 是一个字符串（属性字符串实际上是一个常量，为了便于阅读，我将其内联）。

根据例如[this page](http://www.ibm.com/developerworks/xml/library/x-tipvalschm/)，该属性在以字符串形式出现时，被解释为一个URI——它包括HTTP URL。由于我已经拥有可通过 HTTP 访问的架构，因此我选择了此解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-14T15:28:08.663

将'myschema.xsd'添加到'ApacheJMeter.jar'旁边的apache-jmeter的\ bin目录中，**或者**从这个起点将'XML Schema Assertion'中的'File Name'设置为'myschema.xsd' .

**例如**

```
JMeter: C:\Users\username\programs\apache-jmeter-2.13\bin\ApacheJMeter.jar

Schema: C:\Users\username\workspace\yourTest\schema\myschema.xsd

File Name: ..\\..\\..\workspace\yourTest\schema\myschema.xsd 
```

# qt - 如何在 Qt 中以编程方式创建 SQLITE 数据库？

> ID：10785727
> 
> 赞同：3
> 
> 时间：2012-05-28T13:48:07.487
> 
> 标签：qt, sqlite, qt4

我正在 Qt 中制作通讯录应用程序。我希望我的应用程序在第一次运行时自动创建一个 QSQLITE 数据库，然后在将来访问这个数据库？有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T14:06:48.033

是的，您可以在第一次运行时创建 sqlite 数据库并使其渐进式。只需在您的应用程序的构造函数中执行此操作，并在创建它之前检查 db 是否存在，否则不要创建。您可以在后续运行同一 App 或不同 App 时访问数据库。

使用`db.setDatabaseName("databasename.db");`代替`db.setDatabaseName(":memory:");`，现在您的数据库将是`persistent`.

# java - Java：将代码移动到另一个类后调用super

> ID：10785729
> 
> 赞同：0
> 
> 时间：2012-05-28T13:48:19.830
> 
> 标签：java, super

我有一个被覆盖的方法，在这个方法中 super 用于调用被覆盖的方法。但是，此方法中的代码是我在多个类中使用的代码，因此我想通过将其放入一个类中的单个方法中来重用此代码。但是由于这段代码使用了关键字 super，我不确定如何将覆盖方法的引用传递给我的新方法。例如，这里是原始方法 inc class1：

```
@Override
public boolean onOptionsItemSelected(MenuItem item)
{
   /* Lots of code goes here, followed by the super call */
   return super.onOptionsItemSelected(item);
} 
```

在类 2 中：

```
public boolean onOptionsItemSelected(MenuItem item)
{
   /* Code from class1 gets relocated here. But how do I call super on the original method? */

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:52:00.287

好吧，除非类 2 是您的类 1 的共同祖先，否则您不能使用 super 调用它。如果您将代码移动到另一个与继承无关的类，您将被迫使用对象组合，也就是说，您的类 1（现在超级调用所在的位置）将需要对类 2（代码已移动到的位置）的对象引用) 对象以获得对给定方法的访问权限。

```
public boolean onOptionsItemSelected(MenuItem item)
{
   /* Lots of code goes here, followed by the super call */
   return this.myRef.onOptionsItemSelected(item);
} 
```

或者，您可以将有问题的方法设为静态，在这种情况下，您可以通过公开它的类来访问它（假设它称为 Util）。

```
public boolean onOptionsItemSelected(MenuItem item)
    {
       /* Lots of code goes here, followed by the super call */
       return Util.onOptionsItemSelected(item);
    } 
```

但是，根据方法的作用，将其设为静态可能不是一种选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:53:34.930

您可以简单地使 Class2 扩展与 Class1 相同的类。

该答案的其余部分假设 Class1 不继承自 Class2。

没有进一步的上下文，很难说这是否合适，但你可以尝试改变

`public boolean onOptionsItemSelected(MenuItem item)`

至

`public static boolean onOptionsItemSelected(MenuItem item)`, 并调用

`YourClassName.onOptionsItemSelected(yourArgument)`

# c# - 如何正确替换字符串

> ID：10785730
> 
> 赞同：2
> 
> 时间：2012-05-28T13:48:26.470
> 
> 标签：c#

在我的代码中，我找到所有匹配元素并将其替换为特殊值。

```
Regex imgRule = new Regex("img id=\\\".+?\\\"");
                    MatchCollection matches = imgRule.Matches(content.Value);
                    string result = null;
                    foreach (Match match in matches)
                        result = match.Value;

                    if (result != null)
                    {
                        var firstOrDefault = node.ListImages.FirstOrDefault();
                        if (firstOrDefault != null)
                        {
                            var htmlWithImages = content.Value.Replace(result, string.Format("img src='{0}' class='newsimage' width='300'", firstOrDefault.ImageUrlId));
                            node.Content = htmlWithImages;
                        }
                    } 
```

但是，我的代码是错误的，因为如果有多个匹配项，它只会替换最后一个匹配项，如何更正我的代码以替换文本中的所有匹配项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T13:51:10.420

您的 for 循环体周围缺少花括号。如果没有花括号，唯一多次执行的行是第一行。

试试这个：

```
foreach (Match match in matches)
{                                    // added curly brace here
    result = match.Value;

    if (result != null)
    {
        var firstOrDefault = node.ListImages.FirstOrDefault();
        if (firstOrDefault != null)
        {
            var htmlWithImages = content.Value.Replace(result,
                string.Format("img src='{0}' class='newsimage' width='300'",
                              firstOrDefault.ImageUrlId));
            node.Content = htmlWithImages;
        }
    }
}                                    // added curly brace here 
```

我还想补充两点：

*   您可以使用一种名为的方法`Regex.Replace`，而不是先使用正则表达式查找要替换的字符串，然后使用`string.Replace`.
*   如果您尝试解析 HTML，最好使用 HTML 解析器。查看[HTML Agility Pack](http://htmlagilitypack.codeplex.com)，看看它是否可以更简单地解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T13:51:09.700

我认为您可能在循环周围缺少一组括号...

只有这条线被循环。这就是为什么您的代码只更新最后一个条目，因为结果设置为集合中的最后一项（在 foreach 的最后一次迭代中）

```
 foreach (Match match in matches) 
                      result = match.Value; 
```

**更正的代码**

```
 Regex imgRule = new Regex("img id=\\\".+?\\\"");
                        MatchCollection matches = imgRule.Matches(content.Value);
                        string result = null;
                        foreach (Match match in matches) {
                            result = match.Value;

                           if (result != null)
                           {
                               var firstOrDefault = node.ListImages.FirstOrDefault();
                               if (firstOrDefault != null)
                               {
                                   var htmlWithImages = content.Value.Replace(result,    string.Format("img src='{0}' class='newsimage' width='300'", firstOrDefault.ImageUrlId));
                                   node.Content = htmlWithImages;
                               }
                           }   
                        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T13:51:40.150

```
foreach（匹配中的匹配）
{
    结果=匹配。值；

    如果（结果！= null）
    {
        var firstOrDefault = node.ListImages.FirstOrDefault();
        if (firstOrDefault != null)
        {
            var htmlWithImages = content.Value.Replace(result, string.Format("img src='{0}' class='newsimage' width='300'", firstOrDefault.ImageUrlId));
            node.Content = htmlWithImages;
        }
    }
}

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T13:52:19.233

Regex.Replace 方法不会简化您要完成的工作吗？

[http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.replace(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.replace(v=vs.71).aspx)

# javascript - 为什么我的地图功能还添加了 2 个空的“li”？

> ID：10785739
> 
> 赞同：0
> 
> 时间：2012-05-28T13:49:23.817
> 
> 标签：javascript, jquery, html

我在文本输入上附加了一个下拉菜单，我的性别为男性，女性我只是在我的 li 中添加它，而它得到 foucs。但是我又得到了 2 个空 li 的焦点。为什么？

这是我的代码：

```
$(document).ready(function(){

  var  gender = ['Female','Male'],
      genderField = $('#gender');

   var genderUpdate= function(){
            genderField.focus(function(){
                if(!$('#genderList').length){
                    var topPos = $(this).position().top,lftPos = $(this).position().left;
                    $('<ul id="genderList"></ul>').css({
                        position    :'absolute',
                        top         : topPos,
                        left        : lftPos
                    }).appendTo($(this).parent());

                    $.map(gender,function(val,i){
                        $('<li>'+val+'<li>').appendTo('#genderList');
                        console.log('append');
                    })

                }

            })
        }

                        genderUpdate();

}) 
```

这是小提琴：

[参观小提琴](http://jsfiddle.net/85DM4/1/)

这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T13:54:07.280

找出差异;=)

```
$('<li>'+val+'<li>').appendTo('#genderList');

$('<li>'+val+'</li>').appendTo('#genderList'); 
```

浏览器已经“很好”并自动关闭了您未关闭的 li 标签，在循环的每次迭代中都有两个。

# android - 适用于 Android 2.2 的动态 C/C++ 库：找不到错误符号

> ID：10785740
> 
> 赞同：1
> 
> 时间：2012-05-28T13:49:25.860
> 
> 标签：android, dynamic, makefile, android-ndk

我有两个项目。其中之一是带有本机代码的 Android 应用程序，它只是动态加载库 android_lib.so。

另一个项目是那个库（android_lib.so）。这个库的代码很简单，只是为了了解事情的进展。它只有一个功能。就这个：

```
int calculate (int x, int y)
{
  return (x*x+y*y);
} 
```

在**Makefile**我使用来自 Android 2.2 工具链的跨平台编译器（/usr/local/android-ndk-r8/toolchains/arm-linux-androideabi4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-gcc） ：

```
NDK_DIR=/usr/local/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin
ANDROID_GCC=$(NDK_DIR)/arm-linux-androideabi-gcc
NDK_ROOT=/usr/local/android-ndk-r8

CPPFLAGS = $(NDK_ROOT)/platforms/android-8/arch-arm/usr/include
CFLAGS =-nostdlib
LDFLAGS = -Wl,-rpath-link=$(NDK_ROOT)/platforms/android-8/arch-arm/usr/lib/ -L$(NDK_ROOT)/platforms/android-8/arch-arm/usr/lib/
LIBS=-lc

android_lib.so: calculate.o
    $(ANDROID_GCC) $(CFLAGS)  -shared -o android_lib.so calculate.o 

calculate.o: calculate.c
    $(ANDROID_GCC) $(CPPFLAGS) $(CFLAGS) -c -fPIC calculate.c
clean:
    rm -f *.o *.so 
```

所以我输入 make 并获取**android_lib.so**。在 android 项目的本机部分（它是混合 Java/C++ Eclipse 项目）我调用 dlopen()

```
dl_handle = dlopen( lib, RTLD_LAZY );
  if (!dl_handle) {
      error = (char *) dlerror();
      if (error != NULL) {
          __android_log_print(ANDROID_LOG_INFO,"nativeCode",error);
          return -1;
      }
      else {
          sprintf(sError,"%s is not found",lib);
          __android_log_print(ANDROID_LOG_INFO,"nativeCode",sError);
          return -2;
      }
  } 
```

它成功加载了android_lib.so。但是如果我试图调用函数 calculate() 我会出错。

```
func = (int (*)(int, int)) dlsym( dl_handle, "calculate" );
  error = (char *) dlerror();
  if (error != NULL) {
      __android_log_print(ANDROID_LOG_INFO,"nativeCode",error);
      return -3;
  } 
```

函数返回 -3 并且在 Eclipse 的 LogCat 中我可以看到

```
01-01 07:00:44.624: I/nativeCode(8696): Symbol not found: 
```

请帮我解决这个问题。

**更新**：

```
$ cd /usr/local/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin 
$ sudo ./arm-linux-androideabi-objdump -T /home/chet/workspace/dinLib/android_lib.so

/home/chet/workspace/dinLib/android_lib.so:     file format elf32-littlearm

DYNAMIC SYMBOL TABLE:
00000234 l    d  .text  00000000 .text
00000274 g    D  *ABS*  00000000 __exidx_end
000012e0 g    D  *ABS*  00000000 _bss_end__
00000234 g    DF .text  00000040 calculate
000012e0 g    D  *ABS*  00000000 __bss_start__
00000274 g    D  *ABS*  00000000 __exidx_start
000012e0 g    D  *ABS*  00000000 __bss_end__
000012e0 g    D  *ABS*  00000000 __bss_start
000012e0 g    D  *ABS*  00000000 __end__
000012e0 g    D  *ABS*  00000000 _edata
000012e0 g    D  *ABS*  00000000 _end
000012e0 g    D  .got   00000000 __data_start 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:32:51.640

一些重要的规则：

1.  你应该`ndk-build`直接使用`arm-linux-androideabi-gcc`
2.  在`Android.mk`库类型的下一个选项中：`LOCAL_LDFLAGS += -Wl,--export-dynamic`
3.  如果`dlerror()`返回错误并不意味着`dlsym()`失败。检查是否`dlsym()`真的返回`NULL`。因为它可能会返回一个有效地址，但`dlerror()`可能同时返回错误“找不到符号”%)) 我犯了这个愚蠢的错误！！！见代码。
4.  你不需要打电话`System.LoadLibrary(your_lib.so)`。仅`dlopen("your_lib.so")`来自本机代码，`RTLD_NOW`无论`RTLD_LAZY`有无！
5.  确保它`your_lib.so`位于`/data/data/app_name/libs`

    ```
    func = (int (*)(int, int)) dlsym( dl_handle, "calculate" );
    error = (char *) dlerror();
    if (error != NULL) { //replace it with if ((func == NULL)&& (error != NULL))
      __android_log_print(ANDROID_LOG_INFO,"nativeCode",error);
      return -3; 
    } 
    ```

就这样 ：）

# javascript - jQueryUI 对话框不工作 - 为什么？

> ID：10785741
> 
> 赞同：2
> 
> 时间：2012-05-28T13:49:26.507
> 
> 标签：javascript, jquery, jquery-ui, dialog

我就是想不通这个。对话框不弹出。我已经尝试了各种各样的东西，但它只是不起作用。这是我的代码：

```
<head>
    <script type="text/javascript" src="/js/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="/js/jquery-ui-1.8.20.custom.min.js"></script>
</head>
<body>
<script>
$(function() {
    // Dialog
    $('#dialog').dialog({
            autoOpen: false,
            width: 600,
            buttons: {
                    "Ok": function() {
                            $(this).dialog("close");
                    },
                    "Cancel": function() {
                            $(this).dialog("close");
                    }
            }
    });

    // Dialog Link
    $('#dialog_link').click(function(){
            $('#dialog').dialog('open');
            return false;
    });
});  
</script>

<a href="#" id="dialog_link">Open Dialog</a>

<div id="dialog">This should popup</div>
</body> 
```

这里有什么问题？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-15T05:34:51.727

尝试使用它可能会起作用。

> ```
> <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/themes/smoothness/jquery-ui.css">
> <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/jquery-ui.min.js"></script> 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T13:54:26.487

这个代码在哪里`jquery.ui.dialog.js`？？？？？？

请将此文件作为脚本标签添加到代码中......

你可以从这里放这个 JS 文件：

[http://jqueryui.com/ui/jquery.ui.dialog.js](http://jqueryui.com/ui/jquery.ui.dialog.js)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T14:04:26.843

您必须在

```
<a href="#" id="dialog_link">Open Dialog</a>
<div id="dialog">This should popup</div> 
```

在 body 元素之前阻塞，它应该可以工作。

您还必须包含 jQuery UI 的所有样式，以便它看起来更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T13:56:24.147

`<script></script>`是不足够的。应该`<script type="text/javascript"></script>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T13:56:50.773

我认为`script`标签只是在`body`丢失之后`type="text/javascript"`。IE。`<body><script type="text/javascript">...`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T23:27:15.307

我有同样的问题。这可能是兼容性问题，请尝试包括以下内容而不是您拥有的内容

```
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.22/jquery-ui.min.js" type="text/javascript"></script> 
```

还要正确显示对话框，替换`jquery-ui-1.8.xx.custom.css`以匹配`jquery-ui.min.js`版本，我找不到 google ajax 链接。

我想找到一个替代解决方案，但不知道我是否能找到一个。

# java - 如何在 Java 中使用节点属性值读取、更新和删除现有 XML 文件

> ID：10785743
> 
> 赞同：3
> 
> 时间：2012-05-28T13:49:38.597
> 
> 标签：java, xml, regex, xslt, xpath

我正在尝试根据找到的值读取/更新/删除 XML 文件。

我有一个名为`123456.xm`l 的 XML，格式如下。

```
<ps>
  <p n="359" u="/ae/arabic/plan_book/plan_and_book.aspx"/>
  <p n="277" u="/ae/english/plan_book/plan_and_book.aspx"/>
  <p n="410" u="/ao/english/plan_book/plan_and_book.aspx"/>
</ps> 
```

现在我在 java 中的新方法将获得 Filepath ( `c://java/Files/12345.xml`)、n(277 - 将在文件中检查的值) 和 U ("/de/english/plan_book/plan_and_book.aspx")。

我的java方法的逻辑如下，但真的不知道怎么写。

**添加/附加方法逻辑：**

1.  打开文件`c://java/Files/12345.xml`
2.  搜索所有节点并找到 n(277) 的值的基础。277 将只有一项记录
3.  如果该值存在于文件中，则不需要更新，否则在 xml 文件中添加新节点，例如，如果 n 的值是 (777)，因为该属性记录在文件中不存在，那么它将添加文件 ( `<p n="777" u="/ao/english/plan_book/plan_and_book.aspx"/>`) 中的新记录。
4.  将更新的 XML 保存在同一位置。

**删除方法逻辑：**

1.  打开文件`c://java/Files/12345.xml`
2.  搜索所有节点，根据n(277)的值找到。277 将只有一项记录。
3.  如果该值存在于节点属性“n”中，那么它将从 xml 中删除该节点，否则不需要更新。
4.  将更新的 XML 保存在同一位置。

如果您分享上述实施的一些好的示例或链接，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T14:37:24.200

**在 XSLT 中指定这种处理通常比在命令式语言中更容易和简单（不需要 regEx）**。

下面的 XSLT 转换可以直接使用，或者它可以给出如何用另一种语言实现相同算法的想法：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pAction" select="'delete'"/>
 <xsl:param name="pN" select="277"/>
 <xsl:param name="pU" select="'/de/english/plan_book/plan_and_book.aspx'"/>

 <xsl:template match="node()|@*" name="identity">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="ps">
  <ps>
    <xsl:apply-templates select=
     "*[not($pAction = 'delete')]
     |
      *[$pAction = 'delete' and not(@n = $pN)]
     "/>
    <xsl:if test="$pAction = 'add' and not(p[@n = $pN])">
      <p n="{$pN}" u="{$pU}"/>
    </xsl:if>
  </ps>
 </xsl:template>

 <xsl:template match="p">
  <xsl:choose>
    <xsl:when test="not(@n = $pN)">
      <xsl:call-template name="identity"/>
    </xsl:when>
    <xsl:otherwise>
      <xsl:if test="not($pAction = 'delete')">
          <xsl:call-template name="identity"/>
      </xsl:if>
     </xsl:otherwise>
  </xsl:choose>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<ps>
    <p n="359" u="/ae/arabic/plan_book/plan_and_book.aspx"/>
    <p n="277" u="/ae/english/plan_book/plan_and_book.aspx"/>
    <p n="410" u="/ao/english/plan_book/plan_and_book.aspx"/>
</ps> 
```

**产生了想要的正确结果：**

```
<ps>
   <p n="359" u="/ae/arabic/plan_book/plan_and_book.aspx"/>
   <p n="410" u="/ao/english/plan_book/plan_and_book.aspx"/>
</ps> 
```

**当参数`$pAction` 更改为**：

```
 <xsl:param name="pAction" select="''add'"/> 
```

**那么转换的结果是相同的 XML 文档（不变）。**

**当参数为**：

```
 <xsl:param name="pAction" select="''add'"/> 
```

**XML文档是**：

```
<ps>
    <p n="359" u="/ae/arabic/plan_book/plan_and_book.aspx"/>
    <p n="410" u="/ao/english/plan_book/plan_and_book.aspx"/>
</ps> 
```

**那么结果是**：

```
<ps>
   <p n="359" u="/ae/arabic/plan_book/plan_and_book.aspx"/>
   <p n="410" u="/ao/english/plan_book/plan_and_book.aspx"/>
   <p n="277" u="/de/english/plan_book/plan_and_book.aspx"/>
</ps> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T14:18:20.743

***当且仅当您的 XML 与您提供的示例一样简单时，您可以使用它：***

以下代码将遍历所有匹配的`<p>`元素：

```
try {
    Pattern regex = Pattern.compile("(?is)(<p n=\"(\\d+)\" u=\"([^\"<>]+?)\"/>)");
    Matcher regexMatcher = regex.matcher(subjectString);
    while (regexMatcher.find()) {
        // matched text: regexMatcher.group()
        // match start: regexMatcher.start()
        // match end: regexMatcher.end()
    } 
} catch (PatternSyntaxException ex) {
    // Syntax error in the regular expression
} 
```

要查找具有给定数字的特定节点（最好是字符串），请使用以下语法：

```
(?is)(<p n="#num_to_find#" )(u="[^"<>]+?"/>) 
```

在哪里更改`#num_to_find#`您选择的数字。然后可以替换为：

```
$1#string_to_replacewith## 
```

**正则表达式解释**

```
"(?is)" +                       // Match the remainder of the regex with the options: case insensitive (i); dot matches newline (s)
"(" +                           // Match the regular expression below and capture its match into backreference number 1
   "<p\\ n=\"#num_to_find#\"\\ " +     // Match the characters “&lt;p n="#num_to_find#" ” literally
")" +
"(" +                           // Match the regular expression below and capture its match into backreference number 2
   "u=\"" +                         // Match the characters “u="” literally
   "[^\"<>]" +                      // Match a single character NOT present in the list “"<>”
      "+?" +                          // Between one and unlimited times, as few times as possible, expanding as needed (lazy)
   "\"/>" +                         // Match the characters “"/>” literally
")" 
```

* * *

希望这可以帮助。

# css - iPad3 媒体查询会覆盖 iPhone4 的媒体查询

> ID：10785745
> 
> 赞同：0
> 
> 时间：2012-05-28T13:49:54.910
> 
> 标签：css, media-queries

这是我的视口元数据：

```
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, maximum-scale=1, minimum-scale=1"> 
```

这是我的CSS：

```
/* ---------- */
/* iPad 3     */
/* ---------- */

@media only screen and (-webkit-min-device-pixel-ratio: 2) and (min-device-width: 1536px) and (max-device-width: 2048px) and (orientation: landscape) {

    body { background: red; }
}

@media only screen and (-webkit-min-device-pixel-ratio: 2) and (min-device-width: 1536px) and (max-device-width: 2048px) and (orientation: portrait) {

    body { background: orange; }
}

/* ------------ */
/* iPhone 4     */
/* ------------ */

@media only screen and (-webkit-min-device-pixel-ratio: 2) and (min-device-width: 640px) and (max-device-width: 960px) and (orientation: landscape) {

    body { background: blue; }
}

@media only screen and (-webkit-min-device-pixel-ratio: 2) and (min-device-width: 640px) and (max-device-width: 960px) and (orientation: portrait) {

    body { background: gray; }
} 
```

为什么 iPad3 的 css 会覆盖 iPhone4 的 css？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:58:52.437

你有这些查询之外的 CSS 吗？

您的问题是您的 iPhone 查询有`min-device-width:640px`但 iPhone（甚至是 4）的宽度为 320px [比例为 2，产生 640 个可用空间点]，所以这些查询没有被应用（但 iPad 的查询也不应该，这这就是为什么我要问在查询之外是否还有其他 CSS）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T10:52:15.220

尝试更改设备特定 css 的顺序（例如，将 iPhone css 放在 iPad css 之上）。我不知道它会解决你的问题。但是，我在 HTML5 样板模板中看到了这一点。An di 在某处读过它，我们应该始终首先为小型设备编写 css 代码。

# c# - 在登台上部署时出现 DTSearch 错误

> ID：10785747
> 
> 赞同：1
> 
> 时间：2012-05-28T13:50:02.857
> 
> 标签：c#, asp.net, silverlight, dtsearch

当我在登台服务器上上传我的 silverlight 应用程序时，我遇到了以下错误。

无法加载文件或程序集“dtsearchNetApi2.dll”或其依赖项之一。应用程序无法启动，因为它的并排配置不正确。请参阅应用程序事件日志以获取更多详细信息。（来自 HRESULT 的异常：0x800736B1）

有没有人知道它的依赖性..我试过但没能做到。是版本问题还是其他？

# ios - MKOverlayView 用混合模式绘制一些东西

> ID：10785749
> 
> 赞同：2
> 
> 时间：2012-05-28T13:50:07.360
> 
> 标签：ios, cocoa-touch, cgcontext, mapkit

我想用混合模式绘制地图叠加。但是这段代码只是在没有任何混合模式的情况下绘制白色叠加层。我做错了什么？

```
- (void)drawMapRect:(MKMapRect)mapRect zoomScale:(MKZoomScale)zoomScale inContext:(CGContextRef)context
{
    UIGraphicsPushContext(context);

    CGContextSetFillColorWithColor(context, [UIColor whiteColor].CGColor);
    CGContextSetBlendMode(context, kCGBlendModeSaturation);
    CGContextFillRect(context, [self rectForMapRect:mapRect]);

    UIGraphicsPopContext();
} 
```

这是我想要的结果。我在 Photoshop 中制作了三层：

1.  原谷歌地图。
2.  具有饱和度混合模式的黑色图层。
3.  具有排除混合模式的白色图层。 ![在此处输入图像描述](../Images/ad209c1cb4344b4e057ff0344644d88a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T21:42:18.727

我建议使用 openstreetmap 和 wms 服务器或使用 mapbox 之类的服务设计您自己的地图，而不是将此自定义地图添加为叠加层。

以下是如何将其他地图添加为叠加层的示例：[https ://github.com/mtigas/iOS-MapLayerDemo](https://github.com/mtigas/iOS-MapLayerDemo)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T13:40:52.327

我猜你不能直接访问真正的地图视图上下文。因此，您可能必须拍摄地图的“屏幕截图”并在您的上下文中再次绘制它。之后，您当然可以应用您的效果。

# java - 在 JAVA 中存储二维数组的数据结构

> ID：10785760
> 
> 赞同：4
> 
> 时间：2012-05-28T13:51:20.060
> 
> 标签：java, arrays, multidimensional-array, arraylist

我正在寻找一种数据结构来存储二维整数数组。List 是正确的数据结构还是应该使用另一种？

有人可以给我一个关于如何创建这样的数据结构以及如何添加二维数组的简短示例吗？

编辑：我想要一个数据结构，我想在其中存储 int[11][7] 数组。例如十个 int[11][7] 数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T13:55:28.217

如果您需要`int[][]`在数据结构中存储多个数组，我可能会建议您将`int[][]`数组存储在一个`Object`表示数据包含的内容中，然后将它们存储`Objects`在一个`ArrayList`.

例如，这是一个简单的数组`Object`包装器`int[][]`

```
public class 2DArray {
    int[][] array;
    public 2DArray(int[][] initialArray){
        array = initialArray;
    }
} 
```

以下是您将如何使用它们并将它们存储在`ArrayList`

```
// create the list
ArrayList<2DArray> myList = new ArrayList<2DArray>();
// add the 2D arrays to the list
myList.add(new 2DArray(myArray1));
myList.add(new 2DArray(myArray2));
myList.add(new 2DArray(myArray3)); 
```

我建议的原因是您的`int[][]`数组必须对您有意义。通过将其存储在`Object`包装类中，您可以赋予它含义。例如，如果值是坐标，您将调用您的类`Coordinates`而不是`2DArray`. 因此，您创建一个`List`of `Coordinates`，它比 . 具有更多的意义`int[][][]`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T14:02:30.370

数组不仅仅是关于如何存储信息的想法，它也是如何存储数据的实现。因此，如果您使用数组，则您已经选择了数据结构。

如果要在数据结构中存储数据，则需要专注于数据结构的使用方式，考虑如何检索数据和存储数据，执行每个操作的频率以及将处理多少数据. 然后您知道哪些方法必须是最佳的，并且了解数据是否可以驻留在内存中等。

只是给你一个例子来说明有多少种方法可以解决这个问题：

1.  您可以将数组展平为一维数组，并使用 x*num_columns+y 作为索引
2.  您可以创建一个 Object 来包含该对，并将数组放入 Map
3.  您可以使用包含链表的链表。
4.  您可以使用包含树木的树。
5.  您可以使用包含树的列表。
6.  您可以在该对上创建一个偏序，然后将所有元素放入一棵树中。

所有这些解决方案在很大程度上取决于哪些操作对优化更重要。有时快速更新数据结构更重要，有时则不然。决定因素实际上是程序的其余部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T14:03:39.957

所以你想存储一个二维数组的集合：如果集合是固定大小的，则添加另一个维度：

```
int[][][] arrColl 
```

如果集合的大小可变，请使用您最喜欢的`Collection<int[][]>`（ArrayList、LinkedList 等）实现：

```
Collection<int[][]> arrColl 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T13:54:51.553

如果大小是固定的，则使用`int[][]`else `List<List<Integer>>`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T14:07:28.253

根据您的编辑：

`List<Integer[][]>`是您所需要的 - 这将允许您添加任意数量的二维`Integer`数组。请注意，这将涉及装箱和拆箱——如果可能的话，应该避免这种情况。

如果足够（如果您提前知道需要多少个 2D int 数组），您甚至可以使用`int[][][]`- 一个 3D 整数数组 - 这不涉及装箱/拆箱。

# sql - PostgreSQL 表变量

> ID：10785767
> 
> 赞同：27
> 
> 时间：2012-05-28T13:51:50.593
> 
> 标签：sql, postgresql, plpgsql, table-variable

T-SQL 中有类似表变量的东西吗？
在 Sql Server 中，它看起来像这样：

```
DECLARE @ProductTotals TABLE
(
  ProductID int,
  Revenue money
) 
```

然后在程序中我可以：

```
INSERT INTO @ProductTotals (ProductID, Revenue)
  SELECT ProductID, SUM(UnitPrice * Quantity)
  FROM [Order Details]
  GROUP BY ProductID 
```

并像处理普通表格一样使用此变量。

这是描述： http: [//odetocode.com/Articles/365.aspx](http://odetocode.com/Articles/365.aspx)

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-28T20:22:35.777

在 PostgreSQL 中使用**临时表。**对于您的示例：

```
CREATE TEMP TABLE product_totals (
   product_id int
 , revenue money
); 
```

手册关于[`CREATE TABLE`](https://www.postgresql.org/docs/current/sql-createtable.html)：

> 如果指定，则将该表创建为临时表。临时表在会话结束时自动删除，或者在当前事务结束时自动删除（见`ON COMMIT` 下文）。默认值`search_path`首先包括临时模式，因此当临时表存在时，不会为新计划选择同名的现有永久表，除非它们被模式限定名称引用。在临时表上创建的任何索引也自动是临时的。

**Postgres 9.1 或更高版本中的未记录表**是一个有点相关的特性。他们通过不写入[WAL](https://www.postgresql.org/docs/current/wal.html)来保存磁盘写入。以下是[Robert Haas 对这些功能的讨论：](https://rhaas.blogspot.com/2010/05/global-temporary-and-unlogged-tables.html)

另外，关于`money`数据类型：

*   [PostgreSQL：货币应该使用哪种数据类型？](https://stackoverflow.com/questions/15726535/postgresql-which-datatype-should-be-used-for-currency/15729573)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-09T07:19:08.220

您可以改为使用复合类型的数组

```
CREATE TABLE xx(a int, b int);

CREATE OR REPLACE FUNCTION bubu()
RETURNS void AS $$
DECLARE _x xx[];
BEGIN
   _x := ARRAY(SELECT xx FROM xx);
   RAISE NOTICE '_x=%', _x;
   ... 
```

# sql-server - sqlcmd中的多个文件

> ID：10785768
> 
> 赞同：1
> 
> 时间：2012-05-28T13:51:52.473
> 
> 标签：sql-server, sqlcmd

我有一个通过`SQLCMD`批处理文件执行的 sql 文件列表。

批处理文件 (.bat) 文件包含以下示例脚本：

```
SQLCMD -i master.sql 
```

master.sql 包含

```
:r script1.sql
:r script2.sql 
```

如果出现任何错误`script1`，我需要继续，`script2`但它会停止`script1`并出现错误消息。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-28T13:55:39.793

我们在谈论 MSSQL 吗？在这种情况下，您可能需要调查 Transact（一种内置编程语言）。无论如何，使用任何 if else 结构可能证明是您正在寻找的解决方案。

亲切的问候，

D.

# c++ - C++ VS2010 编译器不使用“推送”进行简单的函数调用

> ID：10785771
> 
> 赞同：2
> 
> 时间：2012-05-28T13:52:06.330
> 
> 标签：c++, visual-studio-2010, assembly, compiler-construction

我刚开始从编译器输出中学习一点汇编程序。

```
test(1); 
```

这个简单的函数调用创建以下 asm 输出（使用 x64 编译）

```
000000013FFF2E76  mov         ecx,1  
000000013FFF2E7B  call        test (13FFF33C0h) 
```

但为什么不是：

```
000000013FFF2E76  push        1  
000000013FFF2E7B  call        test (13FFF33C0h) 
```

我认为一个函数参数将是`pushed`堆栈然后`poped`在函数中。有人可以解释为什么 VS 更喜欢顶部的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T13:54:50.757

这是因为那是 x64 Windows 上的 ABI。

在 Windows x64 上，第一个整数参数传入`RCX`，第二个传入`RDX`，第三个传入，`R8`第四个传入`R9`。第五*个*及以下通过堆栈传递。

因为您的函数只有一个参数，所以只`RCX`使用了。

编译器发出了一个写入，`ECX`因为所有对 32 位寄存器的写入都会导致 64 位寄存器的较高部分归零，并且 32 位立即数明显短于 64 位立即数（指令缓存有人吗？）。

# mysql - 如何在 MySQL 中执行 2 个或多个硬编码插入语句

> ID：10785775
> 
> 赞同：0
> 
> 时间：2012-05-28T13:52:35.503
> 
> 标签：mysql, sql

有人知道如何在 MySQL 中执行以下代码：

```
INSERT INTO DLAccountingSystem.tblUserType
(UserTypeName, PermissionXML, LastEditUser, LastEditDate)
VALUES
('Admin', '', 'Admin User', CURDATE());

INSERT INTO DLAccountingSystem.tblUserType
(UserTypeName, PermissionXML, LastEditUser, LastEditDate)
VALUES
('Accountant', '', 'Admin User', CURDATE());

INSERT INTO DLAccountingSystem.tblUserType
(UserTypeName, PermissionXML, LastEditUser, LastEditDate)
VALUES
('Encoder', '', 'Admin User', CURDATE()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T13:56:56.547

以下语句将插入三条记录。遵循相同的方法。

```
INSERTINTO a VALUES (1,23),(2,34),(4,33); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T14:00:06.077

参考：[插入语法](http://dev.mysql.com/doc/refman/5.5/en/insert.html)

使用 VALUES 语法的 INSERT 语句可以插入多行。为此，请包含多个列值列表，每个列表都包含在括号中并用逗号分隔。例子：

```
INSERT INTO tbl_name (a,b,c) VALUES(1,2,3),(4,5,6),(7,8,9); 
```

每行的值列表必须用括号括起来。以下语句是非法的，因为列表中值的数量与列名的数量不匹配：

```
INSERT INTO tbl_name (a,b,c) VALUES(1,2,3,4,5,6,7,8,9); 
```

编辑：[使用单个查询将多条记录插入 MySQL 的简单示例](http://www.electrictoolbox.com/mysql-insert-multiple-records/)

```
INSERT INTO DLAccountingSystem.tblUserType
(UserTypeName, PermissionXML, LastEditUser, LastEditDate)
VALUES
('Admin', '', 'Admin User', CURDATE()),
('Accountant', '', 'Admin User', CURDATE()),
('Encoder', '', 'Admin User', CURDATE()); 
```

# javascript - Express 3.0升级

> ID：10785776
> 
> 赞同：0
> 
> 时间：2012-05-28T13:52:39.197
> 
> 标签：javascript, node.js, express

express 2 中的某些功能会在 express 3 中被弃用吗？

我正在使用 express 创建一个相当大的项目，我应该坚持使用 express 2 还是如果我想升级到 express 3 以后会遇到问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T14:27:14.320

最好参考迁移指南[从 2.x 迁移到 3.x](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x "迁移指南")，以找到特定于您预期应用程序的答案。

# c# - 暴露 WCF 类引用方法客户端

> ID：10785777
> 
> 赞同：-1
> 
> 时间：2012-05-28T13:52:45.797
> 
> 标签：c#, wcf, serialization, wcf-client, datacontractjsonserializer

我有一个 WCF 服务。我在 WCF 服务中添加了一个 DLL 的引用。现在 ddl 有一个类，我可以通过使用 serviceknowntypeattribute 而不是类中的函数来访问 WCF 客户端的类。任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:03:01.873

我猜您正在使用自动生成的代码（通过在 Visual Studio 中添加服务引用）。这会为您的类创建一个存根（仅是一个容器），但它实际上不是您的类。要在客户端代码中使用您的实际类，您必须在客户端项目和服务引用高级选项中引用它，确保您已选中“使用引用程序集中的类型”。

# iphone - 我们可以在情节提要中使用 xib 文件吗？

> ID：10785779
> 
> 赞同：3
> 
> 时间：2012-05-28T13:52:48.717
> 
> 标签：iphone, objective-c, storyboard

其实我有两个与情节提要有关的问题，

1.  我是否可以重用我之前在 Storyboard 中创建的 xib 文件，或者我必须将包含从 xib 复制到 Storyboard？如果是，那么如何？
2.  我可以在单个项目中同时使用情节提要和 xib，或者如果我使用情节提要，我不能使用 xib 创建视图控制器？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:18:28.490

Storyboard 和 nib 文件可以在同一个项目中使用而不会出现问题。您可以使用基于故事板的 VC 轻松地实例化具有 nib 名称的 VC，否则的话。我给你的一条建议是，如果可行，将 nib 转换为情节提要，这样应用程序以后更易于管理。如果您有一个带有多个 nib 的旧版应用程序，这可能不是很有效，但如果您只有少量（我会说少于 5 个），我会花时间将它们全部放在一个故事板中。

# jquery - Jquery 较新版本 - 无法获取 data-contentId 值

> ID：10785780
> 
> 赞同：2
> 
> 时间：2012-05-28T13:52:49.667
> 
> 标签：jquery, html, jquery-ui

我在看这个stackoverflow问题 [如何获取动态生成元素的数据属性](https://stackoverflow.com/questions/5831815/how-to-get-data-attributes-of-dynamically-generated-element)

这让我找到了这个小提琴 - [http://jsfiddle.net/Mk2zy/](http://jsfiddle.net/Mk2zy/)

但由于某种原因 - 它不适用于我的代码。然后我检查了 Jquery 版本 - 小提琴使用 1.5.2 - 所以在小提琴上，如果我将 jquery 版本更新为 1.5.2 以上的任何版本 - 它不再返回值 - 它返回未定义。

我在这里遗漏了一些简单的东西吗谢谢您的关注

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T13:55:33.177

使用`data-contentid`（仅在 jQuery 脚本中，见下文），全部小写，由[W3 规范](http://www.w3.org/TR/2011/WD-html5-20110525/elements.html#embedding-custom-non-visible-data-with-the-data-attributes)定义。jQuery 开发人员可能忽略了这个要求，并在以后的版本中解决了这个问题。

> **注意：** HTML 文档中 HTML 元素的所有属性都会自动变为 ASCII 小写字母，因此对 ASCII 大写字母的限制不会影响此类文档。

上面的语句转换为：如果`data-*`属性中有大写字母，它们会自动更改为小写，在 HTML 中，而不是在脚本中。这就是`$('data-contentId')`未定义的原因，因为`data-contentId`在 HTML 中已更改为`data-contentid`.

# c# - asp.net 日历日期范围

> ID：10785785
> 
> 赞同：3
> 
> 时间：2012-05-28T13:53:03.957
> 
> 标签：c#, asp.net, datetime, calendar

我有两个日历。我要实施的是基于第一个日历中选择的日期，第二个日历中的日期范围将从`calendar1.selectedDate + 1`无限期开始。

所以任何一个`dates < calendar1.selectedDate`都不应该在`calendar2`.

如何设置日历的范围，或者至少设置开始日期？

`asp:calendar`有很多属性，但就是找不到我要找的东西。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T14:17:51.673

**试试这个**

对于第二个日历控件

```
<asp:Calendar ID="Calendar2" runat="server" ondayrender="Calendar2_DayRender"></asp:Calendar> 
```

在*DayRender*事件上

```
 protected void Calendar2_DayRender(object sender, DayRenderEventArgs e)
    {
        DateTime dte = Calendar1.SelectedDate;
        if (e.Day.Date <= dte)
        {
            e.Day.IsSelectable = false;
            e.Cell.ForeColor = System.Drawing.Color.Gray;
        }
    } 
```

# prolog - prolog deleteall 不起作用

> ID：10785787
> 
> 赞同：1
> 
> 时间：2012-05-28T13:53:18.890
> 
> 标签：prolog, accumulator

我试图找出问题，但没有成功 你能告诉我哪里出了问题吗？

```
% using accumulator
deleteall(X,Y,Zs) :- deleteall(X,Y, [], Zs).
deleteall(X, [], Zs, Zs).
deleteall(X, [X|Xs], Xs, V).
deleteall(X, [Y|Xs], [Y|Zs], V) :- deleteall(X, Xs, Zs,V). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:18:19.807

对于纯粹的解决方案，请考虑[这个答案——注意不同的参数 order](https://stackoverflow.com/a/6441803/772868)。

但是您的实际问题是：**您的**解决方案有什么问题？

有一种方法可以以 Prolog 独有的方式来回答这个问题。在其他编程语言中，您必须找出有意义的测试用例。然后，您将使用此类测试用例来查看您的实现是否有效。当然，这在 Prolog 中也是可能的。

但是想想找出这些测试用例的实际**成本！**您必须详细了解整个关系。您必须在脑海中掌握有关数据结构的所有细则。这是一项相当智力的努力。您的示例非常简单，因此这种努力似乎是微不足道的。但是想象一下这里和那里添加了一些进一步的细节。

那么我们如何在不了解实际关系的情况下找出谓词的测试用例呢？

只需采取最一般的查询。也就是说，在所有参数中都有不同变量的目标。对于您的示例，那将是`deleteall(X, Xs, Ys)`. 现在，我们的工作已经完成，我们可以让 Prolog 来填补空白。

```
?-删除所有（X，Xs，Ys）。
Xs = Ys, Ys = [] ;
Xs = [X] ;
错误的。

```

根据您的定义，我们得到两个答案。第一个答案包含`Xs`作为空列表的解决方案`[]`。第二个答案包含`Xs`作为一个元素列表的解决方案。这就是你的关系所描述的全部。

包含两个甚至更多元素的列表呢？他们没有解决方案。因此，您的定义在这方面过于具体。

第二个答案适用于所有人`Ys`。例如`deleteall(1,[1],[2,3])`，根据您的定义，也成立。更糟糕的是：`deleteall(1,[1],[1]).`根本没有删除。所以你的定义在这里太笼统了。

* * *

这一切的关键在哪里？好吧，你必须编写纯粹的、单调的程序。也就是说，不得使用不纯的内置插件，如、 、和具有副作用的内置插件（或非常小心地使用`!/0`）`(\+)/1`。`(\=)/2``(\==)/2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:39:28.070

单例变量总是可疑的，在您的情况下， V in 的含义是`deleteall(X, [X|Xs], Xs, V).`什么？

除此之外，我不明白你为什么使用蓄电池。

您是否指定反转未删除的元素？否则，这是一个有效的 deleteall...

```
deleteall(_, [], []).
deleteall(X, [X|Xs], Zs) :- !, deleteall(X, Xs, Zs).
deleteall(X, [Z|Xs], [Z|Zs]) :- deleteall(X, Xs, Zs). 
```

测试：

```
?- deleteall(2,[1,2,3,54,2,1,4,2],X).
X = [1, 3, 54, 1, 4] ;
false. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T19:06:13.800

从您的代码来看，您似乎想要基于统一的删除所有语义（另一种方法是仅删除使用 (==)/2 相等的术语）。所有列表元素（以及您要删除的元素）是否总是接地？如果没有，只要您要删除的元素被部分实例化，并且在与列表元素之一统一时进一步实例化，您的代码就会失败。您可以通过在正文中使用双重否定来解决这个问题，而不是头部统一。正如“chac”已经指出的那样，您还留下了选择点。使用 cut 或 if-then-else 可以解决该问题。改进代码的另一种方法是将列表移动到第一个参数，允许 Prolog 的第一个参数索引为您提供更好的性能（当然，假设，对谓词的调用将实例化第一个参数）。遵循以下定义：

```
delete_all([], _, []).
delete_all([X|Xs], Y, Zs) :-
    (   \+ X \= Y ->
        delete_all(Xs, Y, Zs)
    ;   Zs = [X|Zs0],
        delete_all(Xs, Y, Zs0)
    ). 
```

# linux - 换档锁键的作用类似于逃生和换档锁。如何只让它表现得像使用 xmodmap 逃逸？

> ID：10785789
> 
> 赞同：2
> 
> 时间：2012-05-28T13:53:24.680
> 
> 标签：linux, vim, keyboard, keyboard-shortcuts

我希望我的 shift 锁定按钮在 vim 中的作用类似于 linux(ubuntu) 中的逃生。我在我的主目录中执行了以下操作：

1.  `xmodmap -e 'clear Lock' -e 'keycode 0x42 = Escape'`
2.  `xmodmap -pke > .Xmodmap`
3.  在主文件夹中创建 .xinitrc 并粘贴： `xmodmap .Xmodmap`在该文件中。

资源：

[https://askubuntu.com/questions/24916/how-do-i-remap-certain-keys](https://askubuntu.com/questions/24916/how-do-i-remap-certain-keys) [如何在 VIM 中映射 CAPS LOCK 键？](https://stackoverflow.com/questions/2176532/how-to-map-caps-lock-key-in-vim)

问题是现在我的`shift lock`密钥同时表现得像`shift lock`AND `escape`，我怎样才能将它更改为完全像`escape`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T16:25:44.290

对于 Ubuntu 11.10+（带有 Gnome 3 库），有一个“几乎隐藏”的键盘选项，可让您更改许多按键行为。要使**Caps Lock 像附加的 ESC 一样工作，请执行**以下步骤：

```
1\. System -> Preferences -> Keyboard
2\. Select Layouts tab, then Layout Options
3\. Click on 'CapsLock key behavior'
4\. Click on 'Swap ESC and CapsLock' 
```

这是一个打印屏幕： ![Gnome 3 - 使 Caps Lock 成为额外的 ESC](../Images/abec4b531ca1837df4d3ee1322d997c7.png)

如上图还有很多其他的可能，比如**“交换 ESC 和 Caps Lock”**。此外，如果您错过了 Caps Lock 功能，还有一个选项可以为其他键/键组合“映射 Caps Lock 行为”。只需阅读所有选项，测试几个并选择您的最爱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:40:44.923

您也可以使用 X 窗口下的命令。

```
/usr/bin/setxkbmap -option "ctrl:swapcaps" 
```

# java - 在 Java 中将字符串转换为字节

> ID：10785791
> 
> 赞同：1
> 
> 时间：2012-05-28T13:53:35.593
> 
> 标签：java, pack

> **可能重复：**
> [使用 Java 将十六进制转储的字符串表示形式转换为字节数组？](https://stackoverflow.com/questions/140131/convert-a-string-representation-of-a-hex-dump-to-a-byte-array-using-java)

我有一个 MD5 字符串

```
de70d4de8c47385536c8e08348032c3b 
```

我需要它作为字节值

```
DE 70 D4 DE 8C 47 38 55 36 C8 E0 83 48 03 2C 3B 
```

这应该类似于 Perls`pack("H32);`函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T13:59:35.993

你可以看看 Apache Commons Codec [Hex.decodeHex()](http://commons.apache.org/codec/apidocs/org/apache/commons/codec/binary/Hex.html#decode%28byte%5B%5D%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T13:57:17.137

循环`String`并使用`Byte.decode(String)`函数来填充字节数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T14:06:55.273

有很多方法可以做到这一点。这是一个：

```
public static void main(String[] args) {

    String s = "de70d4de8c47385536c8e08348032c3b";

    Matcher m = Pattern.compile("..").matcher(s);

    List<Byte> bytes = new ArrayList<Byte>();
    while (m.find())
        bytes.add((byte) Integer.parseInt(m.group(), 16));

    System.out.println(bytes);
} 
```

输出（`-34`== `0xde`）：

```
[-34, 112, -44, -34, -116, 71, 56, 85, 54, -56, -32, -125, 72, 3, 44, 59] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T14:00:40.800

未经证实：

```
String md5 = "de70d4de8c47385536c8e08348032c3b";
byte[] bArray = new byte[md5.length() / 2];
for(int i = 0, k = 0; i < md5.lenth(); i += 2, k++) {
    bArray[k] = (byte) Integer.parseInt(md5[i] + md5[i+1], 16);
} 
```

# asp.net - 在 ASP .NET 母版页中管理 css/js 文件的相对路径

> ID：10785794
> 
> 赞同：0
> 
> 时间：2012-05-28T13:53:39.933
> 
> 标签：asp.net, master-pages

在我的母版页中，我有

```
<script src="js/jquery-1.7.1.min.js" type="text/javascript"></script> 
```

以及许多其他脚本/链接元素。如果在与母版页文件相同的级别上呈现页面，则效果很好。如果我尝试访问子文件夹中的页面，则对 js/css 文件的请求是错误的。

我试过：

```
<script src="/js/jquery-1.7.1.min.js" type="text/javascript"></script> 
```

但它只有在没有应用程序虚拟路径的情况下才有效。如果我的申请位于：

```
http://localhost/virtualPath/subfolder/Page.aspx 
```

然后请求转到：

```
http://localhost 
```

我尝试使用 ResolveClientUrl，但我的头被定义为

```
<head runat="server"> 
```

所以我得到一个错误。有没有办法很好地解决这个问题？

注意：我使用主题时无法从 head 标签中删除 runat

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:06:33.687

您可以使用 server.mappath() 函数在 Init 过程中添加链接

[http://www.dotnetgenerics.com/Modules/TricksAndTips/ASP.NET/PowerOfTilda.aspx](http://www.dotnetgenerics.com/Modules/TricksAndTips/ASP.NET/PowerOfTilda.aspx)

[http://msdn.microsoft.com/en-us/library/ms524632(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms524632(v=vs.90).aspx)

这在您在 Visual Studio 上的预览中不起作用，但会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:03:27.367

Javascript 不必出现在 head 部分中，因此您可以返回 ResolveClientUrl 解决方案并将您的引用放在 body 标记中。css 应该是您主题的一部分，因此将自动添加

# neo4j - 具有数学公式的复杂密码查询

> ID：10785795
> 
> 赞同：3
> 
> 时间：2012-05-28T13:53:40.713
> 
> 标签：neo4j, similarity, graph-databases, cypher

我有一个带有 2 种节点的图：`person`& `food`。我有 1 种关系 -`Ate`有一个属性 - `count`。每次 a`person` *吃*a `food`，`count`关系的属性就会增加。

`person`我的目标是计算两个节点之间的相似度。我在网上找到了这个算法来计算相似度，我想用它。如何将其转换为 Cypher Query ？

```
sim = 0
for k = 1 to n:
  sim = sim + (1 - Math.abs((N1k/H1 - N2k/H2)))(N1k+N2k)/(H1+H2) 
```

在哪里：

sim = 相似性指数
H1 = 1`food`吃掉的物品 总数 H2 = 2吃掉的物品总数 n = 共有节点数 N1k = 1 吃掉“ n”个常见物品中的**“**第k 个”物品的 次数 N2k = 2 吃过“ n”个常见物品中的“第 k 个”物品的次数`person`
`food``person`
`food` **`person``food``food`
`person``food``food`** 

 **我已经准备好了骨架，但我只是不知道如何进行。

```
Start me=node(name="%s")
MATCH me-[r1:Ate]->some_food<-[r2:Ate]-other_dude
// do some stuff here to find out sim
RETURN other_dude, sim
ORDER BY sim DESC
LIMIT 10 
```

帮助表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T06:07:57.250

我在 Neo4j 邮件列表上看到了这个问题，但昨天无法回复。

我是 Cypher 的新手。但是，我可以帮助您解决 Gremlin 中的问题。我可以创建一个类似于您的图表并在其上运行 Gremlin 遍历。

我的图表看起来像：

```
gremlin> g.v(1,2,3,4)_().outE('eats').inV.path{it.name}{it.count}{it.name}  
==>[Neo, 5, Meat]
==>[Neo, 1, Cheese]
==>[Neo, 4, Chicken]
==>[Morpheus, 3, Bread]
==>[Morpheus, 3, Cheese]
==>[Morpheus, 2, Chicken]
==>[Trinity, 1, Apple]
==>[Trinity, 2, Bread]
==>[Trinity, 4, Meat]
==>[Trinity, 2, Cheese]
==>[Smith, 3, Apple]
==>[Smith, 4, Ham]
==>[Smith, 5, Pork]
gremlin> 
```

我编写了一个遍历来为任何一个顶点生成相似性索引，由`start`剩余的 ID 数组指示。我的最终遍历看起来像：

```
simarray=[];start=3;
[1,2,4].each{
                p1=start;p2=it;
                first=g.v(p1);
                second=g.v(p2);
                sim=0;
                h1=first.out('eats').count().toFloat();
                h2=second.out('eats').count().toFloat();
                first.outE('eats').as('edges')
                .inV.in('eats').has('id',second.id).back('edges')
                .each{
                        n1k = it.count;
                        n2k = it.inV.inE('eats').outV
                                .has('id', second.id).back(2).count.next();
                        sim = sim + (1 - ((n1k/h1)-(n2k/h2)).abs())*(n1k+n2k)/(h1+h2)
                        };
                simarray.add(sim)
            };
simarray 
```

输出：

```
gremlin> simarray=[];start=3;[1,2,4].each{p1=start;p2=it; first=g.v(p1); second=g.v(p2); sim=0; h1=first.out('eats').count().toFloat(); h2=second.out('eats').count().toFloat(); first.outE('eats').as('edges').inV.in('eats').has('id',second.id).back('edges').each{n1k = it.count; n2k = it.inV.inE('eats').outV.has('id', second.id).back(2).count.next(); sim = sim + (1 - ((n1k/h1)-(n2k/h2)).abs())*(n1k+n2k)/(h1+h2)}; simarray.add(sim)};simarray
==>0.7857142857142856
==>0.7142857142857143
==>0.14285714285714285 
```

上面的遍历直接转化为您的公式/计算。它可以针对图形遍历的性能进行优化。此外，您可能需要阅读 Gremlin 的文档以详细了解相关内容。 [https://github.com/tinkerpop/gremlin/wiki](https://github.com/tinkerpop/gremlin/wiki)

除了您已经是 Neo4j 邮件列表的成员之外，您还可以在 Gremlin 邮件列表上提出您的疑问： [https ://groups.google.com/group/gremlin-users](https://groups.google.com/group/gremlin-users)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T03:37:26.043

对公式不太好，但是有两篇关于计算相似度的博客文章您可能会感兴趣-您可以随时根据您的公式对其进行调整以使其更精确-

这个使用 Gremlin： [http ://blog.everymansoftware.com/2012/02/similarity-based-recommendation-engines.html](http://blog.everymansoftware.com/2012/02/similarity-based-recommendation-engines.html)

这使用 Cypher： [http ://thought-bytes.blogspot.in/2012/02/similarity-based-recommendations-with.html](http://thought-bytes.blogspot.in/2012/02/similarity-based-recommendations-with.html)**

# json - 从 json 文件中解析 grails 中的日期

> ID：10785796
> 
> 赞同：3
> 
> 时间：2012-05-28T13:53:48.170
> 
> 标签：json, parsing, date, grails

我正在处理一个 JSON 文件，我需要将它转换成一个对象。到目前为止，一切似乎都很容易，但我在尝试解析日期时发现了一个问题。

我正在尝试做这样的事情：

```
//My JSON file
data={
    "title":"myTitle"
    "releaseDate":"2012-05-28"
}

//Myclass
class Book{
String title
Date date
}

Book book = JSON.parse(data) 
```

我收到一个错误：

```
Cannot cast object  with class 'org.codehaus.groovy.grails.web.json.JSONObject' to class 'Book' due to: 
org.codehaus.groovy.runtime.typehandling.GroovyCastException: Cannot cast object '2012-05-28' with class 'java.lang.String' to class 'java.util.Date' 
```

我想我知道为什么会发生这种情况（显然，我不能将字符串转换为日期），但我不知道如何解决它。

我也尝试在`Config.groovy`我的格式中定义日期，如下所示：

```
grails.converters.json.date = 'yyyy-MM-dd' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-11-04T13:13:19.270

这是最近讨论的一个话题。最近的 GRAILS 版本，比如 3.x，具有强大的简单支持。参见例如[这个答案](https://stackoverflow.com/questions/2871977/binding-a-grails-date-from-params-in-a-controller)。
简而言之，您必须在 application.yml 或 application.groovy 中插入通用格式列表，以阐明从字符串到日期的转换。例如在 application.groovy 中：

```
grails.databinding.dateFormats = ["yyyy-MM-dd'T'hh:mm:ss.S'Z'", 'ddMMyyyy', 'yyyy-MM-dd HH:mm:ss'] 
```

这样，如果您有一个带有 Date 属性的域 Book.groovy

```
def book = new Book(JSON.parse(stringJson)) 
```

将完美地工作。使用 GRAILS 3.1.6 进行测试。

# regex - 在经典 ASP 中使用正则表达式获取特定元素的内容

> ID：10785797
> 
> 赞同：0
> 
> 时间：2012-05-28T13:53:53.180
> 
> 标签：regex, asp-classic, serverxmlhttp

所以我正在加载一些远程内容，需要使用正则表达式来隔离一些标签的内容。

```
 set xmlhttp = CreateObject("MSXML2.ServerXMLHTTP") 
 xmlhttp.open "GET", url, false 
 xmlhttp.setRequestHeader "Content-Type", "application/x-www-form-urlencoded" 
 xmlhttp.setRequestHeader "Accept-Language", "en-us" 
 xmlhttp.send "x=hello" 
 status = xmlhttp.status 
    if err.number <> 0 or status <> 200 then 
        if status = 404 then 
            Response.Write "[EFERROR]Page does not exist (404)." 
        elseif status >= 401 and status < 402 then 
            Response.Write "[EFERROR]Access denied (401)." 
        elseif status >= 500 and status <= 600 then 
            Response.Write "[EFERROR]500 Internal Server Error on remote site." 
        else 
            Response.write "[EFERROR]Server is down or does not exist." 
        end if 
    else  
 data =  xmlhttp.responseText 
```

我基本上还需要获取`<title>Here is the title</title>`元描述、关键字和一些选定的开放图元数据的内容。

最后我需要得到第**一个** `<h1>Heading</h1>`和`<p>Paragraph</p>`

如何解析 html 数据以获取这些内容？我应该使用正则表达式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:32:23.680

我实际上最终使用了这个解决方案，因为它也解决了代码中包含类名的问题。

```
Function GetFirstMatch(PatternToMatch, StringToSearch)
    Dim regEx, CurrentMatch, CurrentMatches

    Set regEx = New RegExp
    regEx.Pattern = PatternToMatch
    regEx.IgnoreCase = True
    regEx.Global = True
    regEx.MultiLine = True
    Set CurrentMatches = regEx.Execute(StringToSearch)

    GetFirstMatch = ""
    If CurrentMatches.Count >= 1 Then
        Set CurrentMatch = CurrentMatches(0)
        If CurrentMatch.SubMatches.Count >= 1 Then
            GetFirstMatch = CurrentMatch.SubMatches(0)
        End If
    End If
    Set regEx = Nothing
End Function

    title = clean_str(GetFirstMatch("<title[^>]*>([^<]+)</title>",data))
    firstpara = clean_str(GetFirstMatch("<p[^>]*>([^<]+)</p>",data))
    firsth1 = clean_str(GetFirstMatch("<h1[^>]*>([^<]+)</h1>",data)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:22:00.240

您可以使用 .responseXML 属性来检索您想要的内容，而无需使用正则表达式。`<title>`因为您要在,`<h1>`和标签中查找数据`<p>`，所以返回的文档可能是 HTML。如果 HTML 文档根据 XML 规范格式正确，则可能意味着在您获得响应后它已经被自动解析和访问。

所以你可以试试这个：

```
Dim objData
Set objData = xmlhttp.responseXML.selectSingleNode("//*[local-name() = 'title']")

If objData Is Nothing Then
    Response.Write "# no result #<br />"
Else
    Response.Write "title: " & objData.Text & "<br />"
End If 
```

但请注意，此 XPath 表达式可能不是查询 XML 文档的最有效方式（以防您要处理大量数据）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T18:03:07.523

使用与`Mid`功能相结合的`Instr`功能。我构建了一个函数，该函数使用该函数通过使用该`Mid`函数查找每个标签的位置来确定标签包装的文本`Instr`：

```
 Function GetInnerData(Data,TagOpen,TagClose)
   OpenPos = Instr(1,data,TagOpen,1)
   ClosePos = Instr(1,data,TagClose,1)
   If OpenPos > 0 And ClosePos > 0 Then GetInnerData = Trim(Mid(data,OpenPos+Len(TagOpen),ClosePos-(OpenPos+Len(TagOpen))))
 End Function 
```

当你像这样运行这个函数时，它会返回`My Title`

```
<%=GetInnerData("any text <title>My Title</title> any text","<title>","</title>")%> 
```

在你的情况下，你会这样做：

```
 TitleData = GetInnerData(data,"<title>","</title>") 
```

这将获得`<title>`标签中的内容。或者

```
 H1Data = GetInnerData(data,"<h1>","</h1>") 
```

这将获得`<h1>`标签中的内容。

该`Instr`函数返回在数据中找到的第一个字符串，因此该函数将完全满足您的需要。

# php - 用于表单验证的 jQuery post 函数只允许 alert() 显示返回的数据

> ID：10785801
> 
> 赞同：3
> 
> 时间：2012-05-28T13:54:10.370
> 
> 标签：php, javascript, jquery, ajax, alert

好的，所以我已经尝试了几乎所有东西。

```
$.post("include/ajax.php", { type: "workbookNumber", wbn: $("input[name='wbn']").val() }, function(data) {
    error.push("<li>"+data+"</li>");
    alert(data);
}); 
```

error.push 是已创建的错误数组，它可以完美运行，但根本不会添加到数组中。就好像那行代码不存在一样。在逗号变量数据中有一个额外的逗号的实例，表明它在那里，但即便如此，`<li></li>`仍然应该显示。

```
jQuery.ajax({
    type: "POST",
    url: "include/ajax.php",
    dataType:"html",
    data: { type: "workbookNumber", wbn: $("input[name='wbn']").val() },
    success:function(response) {
    alert(response);
    },
    error:function (xhr, ajaxOptions, thrownError) {
        alert("damn. -_-");
        alert(xhr.status);
        alert(thrownError);
    }    
}); 
```

我想不出任何合理的解释，我认为 PHP 没有足够的时间来显示结果，因为它正在搜索超过 20000 个代码的数据库但是，结果仍然通过警报返回，只是不是通过可以在屏幕上显示的实际文本中的错误数组。

错误数组工作正常，只是这个函数不起作用。以下是其他一些可以正常工作的示例：

```
if($("input[name='fname']").val() == "") {
    error.push("<li>The first name field is blank</li>");
}
if($("input[name='lname']").val() == "") {
    error.push("<li>The last name field is blank</li>");
}

if($("select[name='usertype']").val() == 0) {
    if($("input[name='vcode']").val() == "") {
        error.push("<li>The voucher code field is blank</li>");
    } else {
        $.post("include/ajax.php", { type: "findVoucher", vcode: $("input[name='vcode']").val() }, function(data) {
            if(data == "none") {
                error.push("<li>The voucher code does not exist</li>");
            }
        });
    }
} 
```

这是整个代码：

```
$(document).ready(function() {
$("#sit_date").datepicker();
$("select[name='usertype']").change(function() {
    if($(this).val()=="0") {
        $(".indv").slideUp(500);
        $(".comp").slideDown(500);
    } else {
        $(".indv").slideDown(500);
        $(".comp").slideUp(500);
    }
});
$("input[name='marka'],input[name='markb']").bind("keypress paste keyup  blur focus", function() {
    var marka = $("input[name='marka']").val();
    var markb = $("input[name='markb']").val();
    var perc = (marka/markb)*100;
    if(perc>0 && perc<=100) {
        $("#per").html(Math.round(perc));
    } else {
        $("#per").html("");
    }
});
$("input[name='vcode']").bind("keypress keyup paste blur focus", function() {
    $.post("include/ajax.php", { type: "checkVoucher", vcode: $(this).val() }, function(data) {
        $("input[name='group']").val(data);
    });
    $.post("include/ajax.php", { type: "checkType", vcode: $(this).val() }, function(data) {
        $("input[name='certificates']").val(data);
    });
});

$("input[name='wbn']").bind("keypress keyup paste blur focus", function() {
    $.post("include/ajax.php", { type: "getAssessment", wbn: $(this).val() }, function(data) {
        if(data!="") {
            $("select[name='assessment']").html(data);
        }
    });
});

/*
//turn into function
$(document).keyup(function(event){
    if(event.keyCode == 13){
        alert("works");
        $("input[name='manual_add']").click();
    }
});
*/

var error = [];
$("input[name='manual_add']").click(function() {
    if($("input[name='fname']").val() == "") {
        error.push("<li>The first name field is blank</li>");
    }
    if($("input[name='lname']").val() == "") {
        error.push("<li>The last name field is blank</li>");
    }

    if($("select[name='usertype']").val() == 0) {
        if($("input[name='vcode']").val() == "") {
            error.push("<li>The voucher code field is blank</li>");
        } else {
            $.post("include/ajax.php", { type: "findVoucher", vcode: $("input[name='vcode']").val() }, function(data) {
                if(data == "none") {
                    error.push("<li>The voucher code does not exist</li>");
                }
            });
        }
    }

    if($("input[name='wbn']").val() == "") {
        error.push("<li>The workbook number field is blank</li>");
    } else {

        $.post("include/ajax.php", { type: "workbookNumber", wbn: $("input[name='wbn']").val() }, function(data) {
            error.push("<li>"+data+"</li>");
            //this is the only thing that works correctly:
            alert(data);
        });

    }

    if(($("input[name='questions']").val() == "") && ($("input[name='marka']").val() != $("input[name='markb']").val())) {
        error.push("<li>The questions wrong field is blank</li>");
    }

    var list = "";
    $.each(error, function(i,val) { 
        list += val;
    }); 

    if(error.length>0) {
        $(".error").slideUp(500);
        $(".jquery-error ul").html("").append(list);
        $(".jquery-error").slideDown(500);
    } else {
        $("form").submit();
    }
});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:11:21.527

`var error`是在您的函数中声明的，因此`click()`在该函数之外无法访问。全局声明它，您的代码应该可以工作。`error`（在带有全局变量的 jsfiddle 上对我来说效果很好。）

其余的错误处理代码工作正常，因为它与`error`变量（`click()`函数）在同一范围内定义。但是对您的 ajax 请求的回调不是在您的函数的上下文中执行的，而是在`window`上下文中执行的。这绝对是一个范围问题。

当然，您必须等待服务器的响应回来更新您的错误通知。编写一个遍历`error`数组并显示相应通知的函数，然后从`error`AJAX 调用的函数中调用该函数。

尝试以下操作：

```
var error = [];

jQuery.ajax({
    type: "POST",
    url: "include/ajax.php",
    dataType:"html",
    data: { type: "workbookNumber", wbn: $("input[name='wbn']").val() },
    success:function(response) {
        alert(response);
    },
    error:function (xhr, ajaxOptions, thrownError) {
        error.push("<li>"+thrownError+"</li>");
        showErrors();
    }    
});​

function showErrors () {
     var list = "";
    $.each(error, function(i,val) { 
        list += val;
    }); 

    if(error.length>0) {
        $(".error").slideUp(500);
        $(".jquery-error ul").html("").append(list);
        $(".jquery-error").slideDown(500);
    } else {
        $("form").submit();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T14:15:02.370

您需要等到 ajax 函数完成，例如：

```
} else { //use a variable for ajax
    var XHR = $.post("include/ajax.php", { type: "workbookNumber", wbn: $("input[name='wbn']").val() }, function(data) {
        error.push("<li>"+data+"</li>");
    });

}

XHR.always(function() { //make sure ajax is completed and array updated first
    var list = "";
    $.each(error, function(i,val) { 
        list += val;
    }); 

    if(error.length>0) {
        $(".error").slideUp(500);
        $(".jquery-error ul").html("").append(list);
        $(".jquery-error").slideDown(500);
    } else {
        $("form").submit();
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T14:36:32.280

你确定你没有用本地变量隐藏全局变量**错误。**尝试使用

```
console.log(data);
console.log(error); 
```

在您的匿名函数中，您会看到问题出在哪里。

# javascript - 在 div 中以与在 textarea 中相同的方式包装文本

> ID：10785804
> 
> 赞同：3
> 
> 时间：2012-05-28T13:54:18.580
> 
> 标签：javascript, jquery, html, textarea

我在实时编辑 HTML 文本区域时创建了一个建议面板。为了获得 {x,y} 坐标，我使用了一个隐藏在 textarea 后面的 div。我得到了carret位置，然后将carret前面的文本加上一个span标签复制到隐藏的div。然后我得到跨度坐标并将其提供给建议面板。

唯一的问题是，当我在 textarea 中添加一条没有空格的长行时，该行在 div 面板中被剪切时会被换行（因此，在我添加回车之前，建议面板的位置不再合适）。

有没有办法在这两个地方（textarea 和 div 面板）以相同的方式调整文本？

（我正在使用 jQuery）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T13:57:45.417

为您的 DIV提供一种样式`word-wrap:break-word`将强制自动换行并使您的 DIV 像您的文本框一样处理长文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:57:19.840

将`overflow:auto`or`overflow:scroll`和 a添加`width: / height:`到您`div`的 css 中，这将为您提供一个滚动条，该滚动条将包裹文本并看起来像一个文本区域，而且没有边框。你也可以给它一个`border`样式，让它看起来更像一个文本区域。

像这样：

```
 <div style="overflow:auto;width:150px;height:50px;border:1px solid #CCC;">

    Your text goes here

 </div> 
```

# ruby-on-rails - 随机化 DB 记录 ID

> ID：10785814
> 
> 赞同：5
> 
> 时间：2012-05-28T13:55:07.157
> 
> 标签：ruby-on-rails, postgresql, encryption, random, uuid

在我们的 Web 应用程序中，我们希望随机化记录 ID。原因是我们想隐藏数据库中已经有多少条目并且我们有未列出的东西。如果 ID 是简单的递增数字，则很容易猜出未列出事物的 ID。

在我看来，有三种方法可以做到这一点：

## 简单随机数

算法：

1.  在插入时创建一个随机数。
2.  检查 ID 是否已在使用中。如果是，请转到 1。
3.  使用此 ID。

### 临

*   简单的
*   适用于任何大小或类型的 ID（32 位、64 位、可变长度、字符串）

### 魂斗罗

*   需要针对可能的竞争条件进行事务处理（算法不是原子的）

## UUID

### 临

*   碰撞的可能性很低，你可以忽略它

### 魂斗罗

*   我们希望将页面标题作为 URL 注释 ( `"#{id}--#{page_title}`) 的短 URL，UUID 会将此注释一直向右移动
*   我猜 UUID 作为主键的连接性能会降低吗？

## 加密的 ID

算法：

1.  `nextval`使用（原子！）从序列中读取数字
2.  使用密钥和适用于 ID 大小的加密算法加密 ID

### 临

*   没有竞争条件（不需要交易）

### 魂斗罗

*   ID 列的大小永远不能改变
*   如果有人能破解/猜出钥匙，一切都是徒劳的

## 时间戳

由@emboss 推荐

### 临

*   简单的
*   不会用完 ID

### 魂斗罗

*   可能会产生碰撞（尽管需要测试它是否真的发生）
*   也许有点猜不透

## 随机公共 ID/基于姓名的公共 ID

由@viktor tron 推荐

URL 中出现的所有事物的第二个 ID，仅用于查找记录。使用内部普通 ID（用于连接等）。

### 临

*   内部一切都保持清醒
*   一个好的随机算法/命名方案应该使 URL 猜测变得不可能（足够）

### 魂斗罗

*   更改了很多在公共接口中使用 ID 的东西
*   用户可能希望他们可以减少包含此类标题的 URL，但在这种情况下，这些 URL 将不再有效

我想我会使用第三个选项。还是有更多的反对意见？有没有更好的解决方案？我们使用 Ruby on Rails 3.x 和 PostgreSQL 9.x。

**编辑：**未列出并不意味着私有！这意味着就像 YouTube 上的未列出的视频。它们是普通视频，只是没有在搜索或上传者的个人资料中列出。因此，您无法真正找到它们（无需尝试所有可能的 ID），但知道 URL 的每个人都可以访问它们。当然，将某些内容设为未列出并将链接发送给其他人的用户必须意识到它可能不会保持未知状态（URL 可能会被传递，并且通过链接可能最终会出现在搜索引擎中）。

我们还有另一种选择将事情保密。这是两个不同的东西。（我认为假设每个人都知道“未列出”的含义是错误的。）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-28T14:24:44.493

**注意**：这回答了问题的初始版本，从中看不出这不是授权逻辑的替代品。

* * *

### 这是对错误问题的错误解决方案。

您认为问题在于：用户可以猜测“未列出”事物的 id 并使用它们。

实际问题是：用户可以在未经授权的情况下访问事物。

设置授权逻辑，只允许用户访问他可以合法访问的项目并禁止其他一切。

### 还

> 隐藏数据库中有多少条目

如果是这个原因，我认为小个子并不可耻。无论如何，您可以从 100000 开始您的序列或将其递增 N 或使用另一个类似的技巧 :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T14:17:22.113

我建议采用完全不同的方式：根本不向用户显示记录 ID。你不需要。对 url 使用另一种形式的标识。

既然你说你想要漂亮的网址，你可以简单地使用一个 slugger/permalink gem，比如[https://github.com/norman/friendly_id](https://github.com/norman/friendly_id)

friendly_id 的默认 slug 生成器提供了检查 slug 字符串的唯一性的功能，并在必要时附加一个序列来保证它。

说真的，别管 ID :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T14:33:01.410

使用带有一些静态盐的抗碰撞哈希函数以及“内部 ID”参考。例如，SHA-256 将 X 中的元素唯一映射到 H 中的元素，碰撞概率低；但是，从 H 中的元素计算 X 中的元素是非常困难的（数学上）。

在 Ruby 中，执行以下操作：

```
@hashed_id = Digest::SHA2.new << SHA_SALT << @foo.id 
```

顺便说一句，这不是一种加密形式，因为任何人都可以在不知道私钥的情况下在给定相同输入的情况下生成相同的哈希。它也只是一个单向函数，因此也没有“解密”算法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T15:35:17.900

我认为 Sergio 已经为您的问题提供了完美的答案。

您试图实现的是一个很好的隐匿安全示例：您不是正确限制对某些未列出项目的访问，而是试图对人们隐藏这些项目。但这仍然留下了*猜测*那些隐藏项目的可能性，而访问限制使得*无法*查看不应该查看的页面。这就是为什么访问限制是明显的赢家：我们看到不应该看到的东西的可能性为 0，而成功的可能性很小。即使它可以忽略不计，0 也总是会胜过某个大于零的值。

我只是想添加一些想法，为什么您提出的解决方案不起作用：

### 随机数

不在`SecureRandom`这里使用 a 已经破坏了目的。使用法线`rand`可以使随机数可预测，因此任何决心“找到”隐藏页面的人都有很大的成功机会。但是，即使使用安全的随机数，您也只是将页面均匀分布在某个数字范围内。最终进入您的应用程序的记录/页面越多，攻击者简单地随机猜测最终成功的可能性就越高。

### UUID

一旦攻击者发现它们是如何构造的，它们就很容易被猜到。它们的随机性没有安全性，因为它们是按照确定性方案构建的。

### 加密/散列

在这里使用加密是错误的。从某种意义上说它是可逆的，这是错误的，而且没有必要这样做，因为这正是你真正想要阻止的。除非您使用经过身份验证的加密，否则生成的密文将具有延展性，因此即使不知道所使用的密钥，攻击者也很有可能在被禁止的页面上欺骗他的方式。更不用说他们可能会尝试恢复密钥的无数次攻击。因此，更好的解决方案确实是使用适当随机化的安全散列函数。使用静态盐也不够好，原因与它对密码不够好一样：每个 ID 的盐会更好地减少预先计算字典的能力。预计算非常简单，用各种盐计算 ID 为 1-100 的表实际上是一个很有前途的策略，

但无论你多么努力，总有机会通过简单的猜测获得访问权限。因此，总结一下 Sergio 已经说过的话，您真正需要的是身份验证和访问限制的实现。

如果您想隐藏数据的大小，为什么不尝试使用时间戳呢？在任何情况下，我都会保持数据库 ID 不变，并为您希望在 URL 中显示的内容添加一个特殊的“显示 ID”列，但将原始 ID 作为主键。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-10T07:40:24.077

无耻插件： [https ://github.com/dividedmind/pg_random_id](https://github.com/dividedmind/pg_random_id)

只需将 gem 放入，按照自述文件添加迁移即可。这是基于加扰序列，因此保证没有冲突。您可以有随机整数或字符串 ID。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-28T15:04:53.070

虽然这是一个值得称赞的目标，但将 ID 列从自动递增整数更改可能是一个错误。当您深入了解它时，ID 列应该仅供数据库使用。它允许数据库公开关系并确保记录可以彼此分开查找。您正在尝试使用 ID 列来公开我认为的业务逻辑：您想要模型的基本随机参考编号。当业务逻辑发生变化时，您会想要更改 ID 列，这将导致外键丢失，并且可能会令人头疼。

为了实现这个目标，您应该创建一个新列，称为“数字”，并在其上实施这些策略之一。然后，如果您需要迁移到新策略，那么您这样做会容易得多：而不是做`Model.find(id)`，而是做`Model.find_by_number(number)`。

# mysql - 按天和小时分组并计数 - 如果没有则输出 0

> ID：10785819
> 
> 赞同：0
> 
> 时间：2012-05-28T13:55:32.940
> 
> 标签：mysql, sql, ruby-on-rails

如果我这样做，在铁轨上

```
TrackMood.where(mood: "good").group("date_format(created_at, '%Y%m%d %H')").count 
```

它产生 sql

```
SELECT COUNT(*) AS count_all, date_format(created_at, '%Y%m%d %H') 
AS date_format_created_at_y_m_d_h
FROM `track_moods` 
WHERE `track_moods`.`mood` = 'good' GROUP BY date_format(created_at, '%Y%m%d %H') 
```

我得到一个哈希作为输出

```
{"20120524 11"=>10, "20120524 12"=>7, "20120524 13"=>15} 
```

我想在没有创建记录的时间里在哈希中取零。

我尝试创建一个包含我想要检查的所有时间的数组：

```
times = ((Time.now - 5.days).to_i..Time.now.to_i).to_a.in_groups_of(1.hour)
         .collect(&:first).collect { |t| Time.at(t).strftime('%Y%m%d %H') } 
```

然后尝试

```
TrackMood.where("mood = 'good' AND date_format(updated_at, '%Y%m%d %H')
IN (:times)", mood: "good", site_id: 2, times: times )
.group("date_format(created_at, '%Y%m%d %H')").count 
```

但这仍然给了我和以前一样的哈希值。

那么如何将零添加到哈希中？

我正在使用 MYSQL 数据库。

# excel - Excel随机化十进制数

> ID：10785823
> 
> 赞同：5
> 
> 时间：2012-05-28T13:55:40.897
> 
> 标签：excel, random

我在 MS Excel 2007 中发现了一个非常好的函数，即`RANDBETWEEN(bottom, top)`. 问题在于它仅随机化整数。使用这个公式：

```
=RANDBETWEEN(7.0, 9.9) 
```

产量

```
8.0
9.0
7.0
7.0
etc... 
```

我怎样才能修改它，使它也能产生像下面这样的十进制数字

```
7.5
7.2
9.4
9.5
7.1
8.5
etc... 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-28T13:57:26.837

使用`randbetween(70,99)`并将结果除以 10。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-12T08:28:16.670

请参阅此 [http://ms-office.wonderhowto.com/how-to/generate-random-numbers-with-decimals-excel-338595/](http://link)

30-40 之间的随机十进制数

```
=rand()*10+30 
```

0-100 之间的随机十进制数

```
=rand()*100+0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-01T12:58:28.340

由于`RANDBETWEEN()`以前仅在分析工具包中可用（并且[在未安装工具包时](http://office.microsoft.com/en-001/excel-help/randbetween-HP005209230.aspx)产生 #NAME? 错误），因此您最好使用`RAND()`向后兼容，乘以和添加以移动范围并舍入到小数点后一位：

```
=ROUNDUP(7 + RAND() * (9.9 - 7 - 0.1), 1)    ' Excludes 7.0 and 9.9
=ROUNDUP(7 + RAND() * (9.9 - 7), 1)          ' Excludes 7.0, includes 9.9    
=ROUNDDOWN(7 + RAND() * (9.9 - 7), 1)        ' Includes 7.0, excludes 9.9
=ROUNDDOWN(7 + RAND() * (9.9 - 7 + 0.1), 1)  ' Includes 7.0 and 9.9 
```

但是这个`RANDBETWEEN()`问题现在只是一个向后兼容性问题，所以如果您确定您的电子表格只能在 Excel 2007 及更高版本中使用，那么您可以使用任何一种方法。

# django - 只有一个 Django 模型实例

> ID：10785827
> 
> 赞同：5
> 
> 时间：2012-05-28T13:56:02.600
> 
> 标签：django, django-models

我只想要下面模型的一个实例。如何在代码中强制执行此操作？

```
class Employer(models.Model):
    name=models.CharField(max_length=50, verbose_name = "Employer's Name")
    pin =models.CharField(max_length=50, verbose_name ="Employer's PIN")

    def __unicode__(self):
        return self.name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:14:00.347

尝试这个：

```
class Employer(models.Model):
    name = models.CharField(max_length=50, verbose_name="Employer's Name")
    pin = models.CharField(max_length=50, verbose_name="Employer's PIN")

    def __unicode__(self):
        return self.name

    class Meta:
        unique_together = ('name', 'pin') 
```

来自[Django 模型元选项](https://docs.djangoproject.com/en/dev/ref/models/options/#unique-together)。

# asp.net - WCF 服务 WebInvoke 属性并支持一些行为

> ID：10785830
> 
> 赞同：0
> 
> 时间：2012-05-28T13:56:14.003
> 
> 标签：asp.net, json, wcf

您好，目前我在 FW3.5 下有旧版 WCF 服务。使用一些 SilverLigt 应用程序，我需要扩展这个 WCF 服务以支持 JSON 格式并将其调用为 JavaScript 应用程序，目前服务看起来像

```
[ServiceContract(Namespace = "")]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class Alcatraz
{
    [OperationContract]
    [FaultContract(typeof(SomeError))]
    public SomeClass DoSomething(SomeClass data)
    {
    }
} 
```

据我所知，为了支持 WCF 服务的 JSON 格式，我需要将 WebInvoke 属性添加到方法中

```
[WebInvoke(Method = "GET",
           RequestFormat = WebMessageFormat.Json,
           ResponseFormat = WebMessageFormat.Json,
           UriTemplate = "players")] 
```

将属性添加`[DataContract]`到*SomeClass*类。但我不确定如果我添加这个，所有应用程序都会以同样的方式工作吗？

```
<system.serviceModel>
  <extensions>
    <behaviorExtensions>
      <add name="silverlightFaults" type="myNS.WCF.SilverlightFaultBehavior, SilverlightFaultBehavior, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"/>
    </behaviorExtensions>
  </extensions>
  <bindings>
    <customBinding>
      <binding name="binaryHttpBinding" allowCookies="true" receiveTimeout="00:02:00" sendTimeout="00:02:00" openTimeout="00:02:00" closeTimeout="00:02:00">
        <binaryMessageEncoding/>
        <httpTransport maxReceivedMessageSize="655360" maxBufferSize="655360"/>
      </binding>
    </customBinding>
  </bindings>
  <behaviors>
    <endpointBehaviors>
      <behavior name="SilverlightFaultBehavior">
        <silverlightFaults/>
      </behavior>
    </endpointBehaviors>
    <serviceBehaviors>
      <behavior name="myNS.WCF.MyServiceBehavior">
        <serviceMetadata httpGetEnabled="true"/>
        <serviceDebug includeExceptionDetailInFaults="true"/>
      </behavior>
    </serviceBehaviors>
  </behaviors>
  <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
  <services>
    <service behaviorConfiguration="myNS.WCF.MyServiceBehavior" name="myNS.WCF.MyService">
      <endpoint address="" binding="customBinding" bindingConfiguration="binaryHttpBinding" contract="myNS.WCF.MyService" behaviorConfiguration="SilverlightFaultBehavior"/>
      <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
    </service>
  </services>
</system.serviceModel> 
```

我需要做什么才能与其他客户端兼容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:18:09.570

如果你想使用 [WebGet] / [WebInvoke] 属性，你需要使用一个端点`webHttpBinding`和一个使用`<webHttp/>`端点行为的行为 - 请参阅下面的配置编辑。

```
<system.serviceModel>
  <extensions>
    <behaviorExtensions>
      <add name="silverlightFaults" 
           type="myNS.WCF.SilverlightFaultBehavior, SilverlightFaultBehavior, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"/>
    </behaviorExtensions>
  </extensions>
  <bindings>
    <customBinding>
      <binding name="binaryHttpBinding" 
               allowCookies="true" 
               receiveTimeout="00:02:00" 
               sendTimeout="00:02:00" 
               openTimeout="00:02:00" 
               closeTimeout="00:02:00">
        <binaryMessageEncoding/>
        <httpTransport maxReceivedMessageSize="655360" maxBufferSize="655360"/>
      </binding>
    </customBinding>
  </bindings>
  <behaviors>
    <endpointBehaviors>
      <behavior name="SilverlightFaultBehavior">
        <silverlightFaults/>
      </behavior>
      <behavior name="Web">
        <webHttp/>
      </behavior>
    </endpointBehaviors>
    <serviceBehaviors>
      <behavior name="myNS.WCF.MyServiceBehavior">
        <serviceMetadata httpGetEnabled="true"/>
        <serviceDebug includeExceptionDetailInFaults="true"/>
      </behavior>
    </serviceBehaviors>
  </behaviors>
  <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
  <services>
    <service behaviorConfiguration="myNS.WCF.MyServiceBehavior" name="myNS.WCF.MyService">
      <endpoint address="" 
                binding="customBinding" 
                bindingConfiguration="binaryHttpBinding" 
                contract="myNS.WCF.MyService" 
                behaviorConfiguration="SilverlightFaultBehavior"/>
      <endpoint address="web" 
                binding="webHttpBinding" 
                contract="myNS.WCF.MyService" 
                behaviorConfiguration="Web"/>
      <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
    </service>
  </services>
</system.serviceModel> 
```

# mysql - mysql守护进程爬行 - 非常慢

> ID：10785832
> 
> 赞同：0
> 
> 时间：2012-05-28T13:56:17.700
> 
> 标签：mysql, performance, daemon

我不知道发生了什么 - 前一刻我的 mysql 守护程序运行良好，下一刻它被锁定，通过守护程序的查询在等待 60 秒时超时。

我已经尝试重新启动，服务器和守护进程。我查看了错误日志，但什么也没有。CLI 工作正常，没有问题。HTTP 很好，Apache 报告没有问题。这只是罢工的守护进程，我不知道为什么。令人沮丧。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:00:30.930

安装[heidisql](http://www.heidisql.com/)并查看当它开始淹没时是什么将实例拉下。

此屏幕将帮助您查找实例列表以及它们目前正在做什么。

[http://www.heidisql.com/screenshots.php?which=host_processlist](http://www.heidisql.com/screenshots.php?which=host_processlist)

# oop - 如何在方法上使用 funcall 来设置对象的属性

> ID：10785839
> 
> 赞同：3
> 
> 时间：2012-05-28T13:56:51.613
> 
> 标签：oop, common-lisp

考虑到这段代码：

```
(defclass test () ((test :initform nil :accessor test)))
#<STANDARD-CLASS TEST>
(defvar *test* (make-instance 'test))
*TEST* 
```

这个测试：

```
(funcall #'test *test*)
nil 
```

人们会期望这有效：

```
(setf (funcall #'test *test*) 123) 
```

一样

```
(setf (test *test*) 123)
123 
```

但这会导致：

```
; in: LAMBDA NIL
;     (FUNCALL #'(SETF FUNCALL) #:NEW1175 #:TMP1177 #:TMP1176)
; ==>
;   (SB-C::%FUNCALL #'(SETF FUNCALL) #:NEW1175 #:TMP1177 #:TMP1176)
; 
; caught WARNING:
;   The function (SETF FUNCALL) is undefined, and its name is reserved by ANSI CL
;   so that even if it were defined later, the code doing so would not be portable.
; 
; compilation unit finished
;   Undefined function:
;     (SETF FUNCALL)
;   caught 1 WARNING condition 
```

为什么它不起作用，我该如何解决它？

我使用 SBCL 和 CLISP 对其进行了测试，结果相同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T14:39:54.923

`SETF`是一种特殊形式（请参阅[http://www.lispworks.com/documentation/HyperSpec/Body/05_aa.htm](http://www.lispworks.com/documentation/HyperSpec/Body/05_aa.htm)以了解说明它的规范部分）。您的第二个示例有效，因为 lisp 实现在`(test *test*)`语法上进行解释。

要了解发生了什么，请查看此会话：

```
This is SBCL 1.0.56.0.debian, an implementation of ANSI Common Lisp.
More information about SBCL is available at <http://www.sbcl.org/>.

SBCL is free software, provided as is, with absolutely no warranty.
It is mostly in the public domain; some portions are provided under
BSD-style licenses.  See the CREDITS and COPYING files in the
distribution for more information.
* (defclass test () ((test :initform nil :accessor test)))

#<STANDARD-CLASS TEST>
* (defvar *test* (make-instance 'test))

*TEST*
* (macroexpand '(setf (test *test*) 123))

(LET* ((#:*TEST*606 *TEST*))
  (MULTIPLE-VALUE-BIND (#:NEW605)
      123
    (FUNCALL #'(SETF TEST) #:NEW605 #:*TEST*606)))
T
* #'(setf test)

#<STANDARD-GENERIC-FUNCTION (SETF TEST) (1)>
* (macroexpand '(setf (funcall #'test *test*) 123))

(LET* ((#:G609 #'TEST) (#:*TEST*608 *TEST*))
  (MULTIPLE-VALUE-BIND (#:NEW607)
      123
    (FUNCALL #'(SETF FUNCALL) #:NEW607 #:G609 #:*TEST*608)))
T 
```

请注意，第一个宏扩展 grabs`#'(setf test)`是由您的`defclass`调用自动定义的编写器函数。第二个盲目地转换为`#'(setf funcall)`，它不存在（因此出现错误）。

回答您的“我该如何解决？” 问题，我们可能需要更多地了解您正在尝试做的事情。例如，您可以使用类似的东西`(setf (slot-value object slot-name))`，允许您以编程方式选择插槽。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T19:15:02.263

`:accessor`slot 选项定义了两个功能：读取`FOO`槽值和`(SETF FOO)`设置槽值。请注意，在 Common Lisp 中的后一种情况下，函数名不是一个符号，而是一个列表。

如果你想要一个函数和值的列表（你的评论），那么你的列表需要包含 setter 函数。

```
(defclass test ()
 ((foo :initform nil :accessor foo)
  (bar :initform nil :accessor bar)))

(map nil
     (lambda (function argument)
       (funcall function argument object))
     (list #'(setf foo) #'(setf bar))
     (list arg1 arg2)) 
```

# iframe - 隐形的赞按钮

> ID：10785843
> 
> 赞同：0
> 
> 时间：2012-05-28T13:57:03.680
> 
> 标签：iframe, facebook-like

我在几个网站上使用了几个月的 Like-Button。该按钮在 www.gartenfit.com 和 www.aussenanlagenideen.de 上仍然可以正常工作。

现在，几周以来，我再也看不到我的两个网站上的 Like-Button：www.tagstiles.com 和 www.kitawaldstrasse.de

如果我在 facebook 上登录，我可以在上面提到的两个网站上看到 Like-Button 的灰色阴影。如果我没有在 facebook 上登录，我看不到按钮。

我为 Like-Button 创建了一个新的 iframe-Code 并将其复制到一个新的 html 文档中。该页面是空白的（没有可见的 Like-Button）。我在 IE、FF 和 Opera 中尝试过。没有什么。这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Unbenanntes Dokument</title>
</head>

<body>
<iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.facebook.com%2Fpages%2Ftagstilescom%2F314372591939008&amp;send=false&amp;layout=standard&amp;width=150&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font=verdana&amp;height=35" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:150px; height:35px;" allowTransparency="true"></iframe>
</body>
</html> 
```

什么原因，我再也看不到Like-Button了？

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T00:41:13.387

我得到了问题的答案，如果您对哪些国家/地区的查看者可以查看您的页面设置限制，那么当用户注销时，fb 可以确定您查看该页面的国家/地区。取消国家限制，年龄限制，然后就可以了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:06:24.640

我也可以在您的网站上看到“赞”按钮。`<iframe src="//www.facebook.com/plugins/like.php?`您的代码与`<iframe src="http://www.facebook.com/plugins/like.php?`（即缺少协议`http`）相对应是否有原因？

您的网站不支持 HTTPS，因此您不妨添加`http`iframe URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-05T01:19:24.700

刚遇到这个问题，它最终成为了 adblocker plus chrome 插件。当我为那个网站关闭它时，瞧，有一个丢失的喜欢按钮。我不得不在这里写这个，即使这个问题已经存在两年了，希望它可以帮助其他一些迷失的灵魂寻找他们的按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T14:00:58.110

在 jsfiddle 中也是如此。事实上，我也可以在 2 个链接的站点中看到类似的按钮。使用铬 19。

因为它在 iframe 上，所以调用源可能有问题？

这也是我第一次看到以“//www.someurl ...”开头的src 尝试删除//或在它之前添加协议。

# visual-studio-2010 - Visual Studio 2010 无法识别正确的源代码管理插件

> ID：10785848
> 
> 赞同：16
> 
> 时间：2012-05-28T13:57:20.677
> 
> 标签：visual-studio-2010, version-control

我从事使用不同源代码控制提供程序的不同项目。颠覆、Git、TFS 等...

为了在 Subversion 上工作，我安装了 AnkhSVN。为了在 Git 上工作，我安装了 Git 源代码控制提供程序。为了在 TFS 上工作，……嗯，你明白了。

源代码控制信息保存为解决方案文件的一部分。

然而，当我打开一个新项目时，Visual Studio 总是使用最后选择的源代码控制提供程序。它似乎没有从解决方案文件中提取出来。我总是必须打开“工具”>“选项”对话框来切换提供者（这需要永远！）

这是我做错了什么吗？我希望 Visual Studio 能够根据开放的解决方案更改提供程序。

如果这是 Visual Studio 根本不做的事情，是否有一个宏或扩展可以自动解决这个问题？

我不敢相信这个问题以前没有被问过，但我在 StackOverflow 的“可能已经有你答案的问题”列表中没有看到任何明显的欺骗。可悲的是，这似乎指向了“这只是我”的答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-06-19T22:29:16.200

IMO 的每个解决方案提供商绑定是错误的，因为该解决方案可以驻留在多个源代码控制系统中。诀窍是在 VS 扩展的预加载解决方案事件中加载正确的源代码控制提供程序检查保留目录。核心代码如下：

```
IVsRegisterScciProvider vsRegisterScciProvider = GetService<IVsRegisterScciProvider>();
vsRegisterScciProvider.RegisterSourceControlProvider(sccProviderGuid); 
```

这种扩展的完整代码在[这里](https://github.com/ceztko/SccAutoSwitcher/tree/master/SccAutoSwitcher)。我可能会在一些测试后不久发布它，因为它非常简单，即使它需要我进行大量研究。我找不到任何类似的东西，这对我来说很奇怪，因为它应该是这样做的明显方式。关于的文档`RegisterSourceControlProvider`也极具误导性，因此这可能是原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T19:22:19.490

不是真正的答案，但这太大而无法发表评论：

我讨厌说“对我有用”，但实际上它确实对我有用。我只使用 AnkhSVN 和 TFS 客户端，但 Visual Studio 会根据我打开的解决方案在两者之间切换。因此，您所要求的绝对是工作的“支持”。也许其他插件提供商之一有问题？

您是否打开了解决方案文件并确认存在源代码管理信息？它应该如下所示：

```
GlobalSection(SubversionScc) = preSolution
    Svn-Managed = True
    Manager = AnkhSVN - Subversion Support for Visual Studio
EndGlobalSection

GlobalSection(TeamFoundationVersionControl) = preSolution
    SccNumberOfProjects = 5
    SccEnterpriseProvider = {4CA58AB2-18FA-4F8D-95D4-32DDF27D184C}
    SccTeamFoundationServer = http://XXXXX:8080/tfs/XXXXX
    SccProjectUniqueName0 = ...
    SccProjectName0 = ...
    SccLocalPath0 = ...
    <etc>
EndGlobalSection 
```

此外，当您打开一个合适的解决方案时，您会得到什么迹象表明它没有切换供应商？您是否收到错误消息，或者您的项目似乎没有绑定到源代码管理？特别是，当我打开 SVN 解决方案时，我的 TFS 窗口保持打开状态并显示奇怪的错误，但解决方案资源管理器中的上下文菜单确实切换到正确的提供程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T19:13:44.607

Visual Studio 绝对支持这一点。源代码控制提供程序应将某种信息持久保存到解决方案文件中，说明它是哪个提供程序以及它正在使用哪些绑定（如果需要——我认为 VSS 和 TFS 使用它）。

当 VS 加载解决方案时，它应该选择正确的提供程序。

从你的问题来看，从[这个问题](https://stackoverflow.com/questions/8307824/how-to-specify-the-source-control-plugin-on-a-per-solution-basis-in-visual-studi)来看，它在某种程度上被打破了。

您可能必须编写一个宏来执行此操作。这不是特别困难。您需要挂钩[SolutionEvents](http://msdn.microsoft.com/en-us/library/envdte.solutionevents)接口。我不确定您如何访问已配置的源代码控制提供程序。[从这里](http://msdn.microsoft.com/en-us/library/envdte.properties)开始。

尽管如此，它**应该**可以工作。我会尝试禁用除两个插件之外的所有插件，看看它是否正常工作。我要说的是，也许其中一个提供商在解决方案加载期间抛出了异常，而 VS 正在放弃其他提供商。

# android - Android webview在更改页面前闪烁

> ID：10785861
> 
> 赞同：1
> 
> 时间：2012-05-28T13:58:18.420
> 
> 标签：android, cordova, android-webview

我目前正在将我的应用程序从 phonegap/cordova 应用程序转换为使用本机 android webview（因为我不使用任何 cordova 插件并且想要添加广告）。然而，我面临的一个问题并未出现在 cordova 版本中。每当我单击链接以切换页面时，应用程序都会闪烁，然后发生页面转换。就像我说的，这不会发生在 phonegap/cordova 构建中，并且 html/javascript 是相同的。

这是我的安卓源码

```
package com.h2programming.epnext;

import android.app.Activity;
import android.os.Bundle;
import android.webkit.WebSettings;
import android.webkit.WebView;

public class EpisodeNext extends Activity
{
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    setupWebview();
}

private void setupWebview() {
    WebView view = (WebView)findViewById(R.id.webview);
    WebSettings settings = view.getSettings();

    view.setInitialScale(0);
    view.setVerticalScrollBarEnabled(false);
    view.requestFocusFromTouch();

    settings.setJavaScriptEnabled(true);
    settings.setDomStorageEnabled(true);
    settings.setDatabasePath("/data/data/com.h2programming.epnext/databases");

    settings.setJavaScriptCanOpenWindowsAutomatically(true);
    settings.setLayoutAlgorithm(WebSettings.LayoutAlgorithm.NORMAL);

    view.loadUrl("file:///android_asset/index.html");
}
} 
```

我试图从 cordova/phonegaps DroidGap 活动中添加方法，但我似乎找不到让我的 webview 在切换页面时不闪烁的部分（我只想要一个即时过渡）。有谁知道如何阻止这种情况？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T19:28:11.090

启用硬件加速后，这似乎是 ICS 中的错误。这已在 Jelly Bean 中修复。

# android - 自定义 CursorAdapter 和 CheckBox 状态

> ID：10785862
> 
> 赞同：1
> 
> 时间：2012-05-28T13:58:26.157
> 
> 标签：android, android-cursoradapter, android-cursorloader

我在尝试使用[建议的 CursorAdapter 实现时遇到问题](https://stackoverflow.com/questions/9424023/is-this-custom-cursoradapter-for-a-listview-properly-coded-for-android)与 CursorLoader 一起使用。当我可以通过 Cursor 为其提供一组静态数据时，CursorAdapter 工作得很好，但是当我尝试将它与 CursorLoader 结合使用时，我遇到了空指针的问题。我把它归结为这样一个事实，即当我向适配器提供一个游标时，它最初是空的（在处理 CursorLoader 实现时经常建议设置为 null）。适配器在实例化时循环通过光标来确定复选框处于什么状态，然后通过在各种文本视图和小部件中填充数据。不幸的是，光标在实例化时为空，只有在 CursorLoader 完成时才被提供数据集。我试图弄清楚是否可以将此 CursorAdapter 与 CursorLoader 一起使用，并且非常感谢一些帮助。

这是我的完整适配器：

```
public class ShopperListCursorAdapter extends CursorAdapter implements OnClickListener, LOG {
    private LayoutInflater mInflater;
    private GroceriesHelper mHelper;
    private List<Boolean> mCheckedState;

    public ShopperListCursorAdapter(Context context, Cursor cursor, GroceriesHelper helper, int flags) {
        super(context, cursor, flags);
        mHelper = helper;
        mInflater = LayoutInflater.from(context);
        for(mCheckedState = new ArrayList<Boolean>(); !cursor.isAfterLast(); cursor.moveToNext()) {
            mCheckedState.add(cursor.getInt(cursor.getColumnIndex(Groceries.COLUMN_CHECKED)) != 0);
        }
    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        Log.d(TAG, "newView");
        View view = mInflater.inflate(R.layout.listview_row, null);
        ViewHolder holder = new ViewHolder();
        holder.amount = (TextView) view.findViewById(R.id.text_amount);
        holder.unit = (TextView) view.findViewById(R.id.text_unit);
        holder.item = (TextView) view.findViewById(R.id.text_item);
        holder.checked = (CheckBox) view.findViewById(R.id.check_item);
        holder.checked.setOnClickListener(this);
        view.setTag(holder);
        return view;
    }

    @Override
    public void bindView(View view, Context context, Cursor cursor) {
        Log.d(TAG, "bindView");
        RowData data = new RowData();
        data.id = cursor.getInt(cursor.getColumnIndex(Groceries.COLUMN_ID));
        data.amount = cursor.getString(cursor.getColumnIndex(Groceries.COLUMN_AMOUNT));
        data.unit = String.valueOf(cursor.getInt(cursor.getColumnIndex(Groceries.COLUMN_UNIT_ID)));
        data.item = cursor.getString(cursor.getColumnIndex(Groceries.COLUMN_ITEM));
        data.position = cursor.getPosition();

        ViewHolder holder = (ViewHolder) view.getTag();
        holder.amount.setText(data.amount);
        holder.unit.setText(data.unit);
        holder.item.setText(data.item);
        holder.checked.setChecked(mCheckedState.get(data.position));
        holder.checked.setTag(data);
    }

    @Override
    public void onClick(View view) {
        boolean visibility = ((CheckBox) view).isChecked();
        RowData data = (RowData) view.getTag();
        Log.d(TAG, "data: " + data.position);
        mCheckedState.set(data.position, visibility);
        mHelper.setChecked(data.id, visibility == true ? 1 : 0);
    }

    private static class ViewHolder {
        TextView amount;
        TextView unit;
        TextView item;
        CheckBox checked;
    }

    private static class RowData {
        int id;
        String amount;
        String unit;
        String item;
        int position;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T02:53:18.333

复制和粘贴

```
for(mCheckedState = new ArrayList<Boolean>(); !cursor.isAfterLast(); cursor.moveToNext()) {
    mCheckedState.add(cursor.getInt(cursor.getColumnIndex(Groceries.COLUMN_CHECKED)) != 0);
} 
```

进入适配器类（即`public void populateAdapter()`）中的公共辅助方法。

然后，`onLoadFinished`在 (with ) 中交换光标，`mAdapter.swapCursor(cursor)`然后调用`mAdapter.populateAdapter()`. 这将确保您`Cursor`在尝试填充之前绑定到适配器`mCheckedState`。

也就是说，我不完全确定你首先要做什么`mCheckedState`......你为什么不能直接使用`Cursor`in检查/取消选中视图`bindView`？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-21T18:07:39.367

除非您通知游标，否则即使您的数据库已更新，游标也不会更新。您想要做的是在您的适配器中有一个单独的结构来跟踪单击/未单击状态并参考该结构以获得答案。如果答案不存在，请参考光标（这是您第一次显示列表时的情况）。

# java - 使用 procrun 检查服务是否正在运行

> ID：10785866
> 
> 赞同：3
> 
> 时间：2012-05-28T13:58:45.407
> 
> 标签：java, procrun

我正在使用[prunsrv](http://commons.apache.org/daemon/procrun.html)创建 Windows 服务。我想问你是否可以查询一个进程的状态（如果它正在运行，是否已停止）或者一个进程是否存在。我还想用 Java 程序读取 pid 文件的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T14:13:50.937

是的，有一个技巧：在服务的启动代码中创建一个本地套接字。如果您在创建套接字时遇到错误，您将知道该服务的实例已经在运行。

如果要检查服务是否处于活动状态，可以连接到套接字。如果失败，则该过程不存在。

并且你可以通过这个套接字返回服务的 PID，所以“监控”程序不需要知道日志路径和 PID 文件名。如果你实现了启动/停止方法，你甚至可以告诉监视器你的服务的状态。

这样做的最大优点是，当您的服务因任何原因终止时，操作系统将确保关闭套接字。第二个优点是它独立于操作系统工作 - 如果您需要将其移至 Linux 或 Mac，则无需更改代码。

# javascript - 用于 youtube 视频的 IE8 上的 pauseVideo() 给出“对象不支持此属性或方法”

> ID：10785872
> 
> 赞同：4
> 
> 时间：2012-05-28T13:59:57.013
> 
> 标签：javascript, internet-explorer, internet-explorer-8, youtube-javascript-api, object-tag

当尝试在 IE8 上为 youtube 视频使用 pauseVideo() 时，它给了我“对象不支持此属性或方法”，

这是我的嵌入式视频：

```
<div class="ytLarge">
    <object width="400" height="300">
        <param value="http://www.youtube.com/v/Y4EZULqhP2E" name="movie">
        <param value="true" name="allowFullScreen">
        <param value="always" name="allowscriptaccess">
        <param value="transparent" name="wmode">
        <embed width="400" height="300" wmode="transparent" 
               allowfullscreen="true" allowscriptaccess="always" 
               type="application/x-shockwave-flash" 
               src="http://www.youtube.com/v/Y4EZULqhP2E&autoplay=1&version=3&enablejsapi=1">
    </object>
</div> 
```

这是电话：

```
$('embed').each(function(index){
        $(this).get(0).pauseVideo();
}); 
```

该代码在 Firefox 和 chrome 中运行良好，但在 $(this).get(0).pauseVideo(); 行中给出了 IE8 上的“对象不支持此属性或方法”；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T18:06:40.187

对于我提醒的标签`<embed>`不能被 IE 识别，这就是为什么也使用标签的原因`<object>`：

`<object>`适用于 IE（这就是您的脚本在 IE 中失败的原因）

`<embed>`对于所有其他浏览器

# ruby - Cron、Ruby 和 watir-webdriver 问题

> ID：10785873
> 
> 赞同：2
> 
> 时间：2012-05-28T14:00:02.427
> 
> 标签：ruby, cron, watir-webdriver

我有简单的 ruby​​+watir-webdriver 示例：

```
#!/usr/bin/env ruby

require "rubygems"
require 'watir-webdriver'

browser = Watir::Browser.new
...
# do something
...
browser.close 
```

当我手动运行此文件时：

```
/path/to/my/ruby/example.rb 
```

它工作正常。当我将其放入 cronjob 时，它不起作用...我已将 cronjob 更改为

```
ruby /path/to/my/ruby/example.rb 
```

但再次无法正常工作。任何想法如何定位问题？

@Kevin 这里是输出：

```
/home/lks/.rvm/gems/ruby-1.9.3-p194/gems/selenium-webdriver-2.21.2/lib/selenium/webdriver/firefox/launcher.rb:77:in `connect_until_stable': unable to obtain stable firefox connection in 60 seconds (127.0.0.1:7055) (Selenium::WebDriver::Error::WebDriverError)
        from /home/lks/.rvm/gems/ruby-1.9.3-p194/gems/selenium-webdriver-2.21.2/lib/selenium/webdriver/firefox/launcher.rb:37:in `block in launch'
        from /home/lks/.rvm/gems/ruby-1.9.3-p194/gems/selenium-webdriver-2.21.2/lib/selenium/webdriver/firefox/socket_lock.rb:20:in `locked'
        from /home/lks/.rvm/gems/ruby-1.9.3-p194/gems/selenium-webdriver-2.21.2/lib/selenium/webdriver/firefox/launcher.rb:32:in `launch'
        from /home/lks/.rvm/gems/ruby-1.9.3-p194/gems/selenium-webdriver-2.21.2/lib/selenium/webdriver/firefox/bridge.rb:19:in `initialize'
        from /home/lks/.rvm/gems/ruby-1.9.3-p194/gems/selenium-webdriver-2.21.2/lib/selenium/webdriver/common/driver.rb:31:in `new'
        from /home/lks/.rvm/gems/ruby-1.9.3-p194/gems/selenium-webdriver-2.21.2/lib/selenium/webdriver/common/driver.rb:31:in `for'
        from /home/lks/.rvm/gems/ruby-1.9.3-p194/gems/selenium-webdriver-2.21.2/lib/selenium/webdriver.rb:63:in `for'
        from /home/lks/.rvm/gems/ruby-1.9.3-p194/gems/watir-webdriver-0.6.1/lib/watir-webdriver/browser.rb:35:in `initialize' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T17:13:46.797

我找到了解决方案 - 我需要以无头模式启动浏览器，这是我的工作示例：

```
#!/usr/bin/env ruby

require 'rubygems'
require 'watir-webdriver'
require 'headless'

headless = Headless.new
headless.start
browser = Watir::Browser.start 'http://www.url.com'
...
# do something
...
browser.close
headless.destroy 
```

来源：[http ://watirwebdriver.com/headless/](http://watirwebdriver.com/headless/)

非常感谢您的帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T17:57:48.017

您需要的是一些输出来解释问题所在。尝试以下操作并将 cron_out.log 文件的内容发送给我们。

```
/path_to_ruby_exec/ruby /path/to/my/ruby/example.rb >/homedir/cron_out.log 2>&1
```

另外，尝试“/path_to_ruby_exec/ruby”而不是“ruby”

# linq - 如何将字符串列表转换为忽略非整数的整数

> ID：10785874
> 
> 赞同：3
> 
> 时间：2012-05-28T14:00:02.930
> 
> 标签：linq, lambda, c#-3.0

我习惯于在不使用 Linq 或 Lambda 语句的情况下编写 C#，但我想提高我的理解。我有看起来像这样用 C# 2.0 编写的带有`foreach`循环的代码：

```
 List<string> strings = new List<string>();
        strings.Add("1");
        strings.Add("blah");

        List<int> ints1 = new List<int>();
        foreach (string x in strings)
        {
            int r;
            if (int.TryParse(x, out r))
                ints1.Add(r);
        } 
```

它正在执行一项简单的任务 - 从字符串列表中填充整数列表，忽略任何实际上不是整数的内容。在我有限的经验中，Linq 和 Lambda 语句似乎能够将 foreach 语句缩减为非常简洁易读的方式来做同样的事情。所以我想我会用 C# 3.0 试试这个小家伙。但我能想到的最好的是：

```
 IEnumerable<int> ints2 = strings.Select(x =>
                                     {
                                         int r;
                                         if (int.TryParse(x, out r))
                                             return r as int?;
                                         return null;
                                     })
                                     .Where<int?>(x => x != null)
                                     .Select(x => x.Value); 
```

呸！我找不到将转换和过滤结合在一个呼叫中的方法，最终得到的结果似乎比原来的要糟糕得多。有没有办法做到这一点，还是我应该坚持我的 foreach？

**编辑：**总结调查结果，如果您使用的是 .NET 4.0，这里有两种使用 LINQ 的方法：

```
IEnumerable<int> ints1 = strings
.Where(x => new Int32Converter().IsValid(x))
.Select(x => int.Parse(x));//Broken in .NET 3.5 due to bug in Int32Converter

IEnumerable<int> int2 = strings
.Where(x => { int r; return int.TryParse(x, out r); })
.Select(x => int.Parse(x)); 
```

第二种方法更快，并且在 .NET 3.5 中没有损坏。根据接受的答案，可能没有理由不将其放入扩展方法中，而不是 foreach。请参阅[连接问题](https://connect.microsoft.com/VisualStudio/feedback/details/93559/typeconverter-for-value-types-such-as-int-bool-short-etc-return-true-to-isvalid-even-if-the-value-is-not-valid)以了解该`Int32Converter`错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T14:25:11.327

你可以用一个简单的 linq 做到这一点

```
int num = 0;
var ints = (from str in strings
            where int.TryParse(str,out num)
            select num).ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T14:34:19.590

仅`int`使用**LINQ**的另一种方法是：

```
var integerList =
    strings
        .Where(x => new Int32Converter().IsValid(x))
        .Select(x => int.Parse(x)); 
```

[更新]

我使用 LINQPad进行了[性能测试。](http://linqpadsamples.codeplex.com/wikipage?title=Benchmark%20class%20for%20performance%20tests)

这里我报告代码和结果：

```
void Main()
{
    List<string> strings = new List<string>() { "1", "a", "3", "b" };

    Func<IEnumerable<string>, IEnumerable<int>> func1 =
        list => list.Where(x => new Int32Converter().IsValid(x)).Select(x => int.Parse(x));

    Func<IEnumerable<string>, IEnumerable<int>> func2 =
        list => { var ret = 0; return list.Where(x => int.TryParse(x, out ret)).Select(x => ret); };

    Benchmark
        .For(1000)
            .Execute("Int32Converter", () => func1(strings).Iterate())
            .Execute("int.TryParse", () => func2(strings).Iterate())
        .Report(4).Dump();
} 
```

比`int.TryParse`快约 165 倍`Int32Converter`。

[更新 2]

类`TypeConverter.IsValid`继承的`Int32Converter`包含一个在 .NET 4.0 中[修复的错误。](http://msdn.microsoft.com/en-us/library/tez461eb)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T14:04:19.503

就像这样：

```
from s in strings
let parsed = s.TryParseInt32()
where parsed != null
select parsed.Value;

public static int? TryParseInt32(this string str)
{
    int i;
    if (!int.TryParse(str, NumberStyles.Integer, CultureInfo.InvariantCulture, out i))
        return null;
    return i;
} 
```

TryParseInt32 扩展是可重用的。

这是一个替代方案：

```
from s in strings
select s.TryParseInt32() into parsed
where parsed != null
select parsed.Value; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T14:15:40.263

我有一些像这样的辅助方法

```
public static class CollectionUtilities {
    public static IEnumerable<int> ParseInt32(this IEnumerable<string> source) {
        return ParseInt32(source, NumberStyles.Integer, null);
    }

    public static IEnumerable<int?> TryParseInt32(this IEnumerable<string> source) {
        return TryParseInt32(source, NumberStyles.Integer, null);
    }

    public static IEnumerable<int> ParseInt32(this IEnumerable<string> source, IFormatProvider provider) {
        return ParseInt32(source, NumberStyles.Integer, provider);
    }

    public static IEnumerable<int?> TryParseInt32(this IEnumerable<string> source, IFormatProvider provider) {
        return TryParseInt32(source, NumberStyles.Integer, provider);
    }

    public static IEnumerable<int> ParseInt32(this IEnumerable<string> source, NumberStyles style) {
        return ParseInt32(source, style, null);
    }

    public static IEnumerable<int?> TryParseInt32(this IEnumerable<string> source, NumberStyles style) {
        return TryParseInt32(source, style, null);
    }

    public static IEnumerable<int> ParseInt32(this IEnumerable<string> source, NumberStyles style, IFormatProvider provider) {
        if (source == null)
            throw new ArgumentNullException("source");

        return ParseInt32Iterator(source, style, provider);
    }

    public static IEnumerable<int?> TryParseInt32(this IEnumerable<string> source, NumberStyles style, IFormatProvider provider) {
        if (source == null)
            throw new ArgumentNullException("source");

        return TryParseInt32Iterator(source, style, provider);
    }

    private static IEnumerable<int> ParseInt32Iterator(this IEnumerable<string> source, NumberStyles style, IFormatProvider provider) {
        foreach (string element in source) {
            yield return int.Parse(element, style, provider);
        }
    }

    private static IEnumerable<int?> TryParseInt32Iterator(this IEnumerable<string> source, NumberStyles style, IFormatProvider provider) {
        foreach (string element in source) {
            int value;
            bool success = int.TryParse(element, style, provider, out value);
            yield return success ? (int?)value : null;
        }
    }
} 
```

使用这些帮助程序，您的代码将如下所示：

```
var ints = strings.TryParseInt32().Where(x => x != null).Select(x => x.Value).ToList(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-28T14:33:06.293

我将定义我自己的扩展方法如下：

```
public static IEnumerable<int> AsIntegers (this IEnumerable<string> strings) {
   foreach (var s in strings) {
      int r; if (int.TryParse (s, r)) yield return r;
   }
}

...

List<int> intList = new List (stringList.AsIntegers ()); 
```

或者

```
var intList = stringList.AsIntegers ().ToList (); 
```

# java - 媒体播放器错误

> ID：10785878
> 
> 赞同：0
> 
> 时间：2012-05-28T14:00:10.310
> 
> 标签：java, android

我需要编写一个非常简单的 android 应用程序，但我有一个严重的问题。

这是我的课：

```
package com.music.playa;

import java.util.Random;

import android.app.Activity;
import android.content.Context;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class PlayMusic extends Activity {

    MediaPlayer mediaPlayer;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    public void playSound() {

        try {
            mediaPlayer.stop();
            mediaPlayer.reset();
            mediaPlayer.release();
            mediaPlayer = null;         
        } catch (Exception ex) {

        }

        String[] sounds = { "sound1", "sound2", "sound3" };
        mediaPlayer = null;
        int path = getResources().getIdentifier(
                sounds[new Random().nextInt(sounds.length)], "raw",
                getPackageName());
        mediaPlayer = MediaPlayer.create(this, path);

        mediaPlayer
                .setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
                    public void onCompletion(MediaPlayer mp) {
                        // do something...
                    }
                });

        mediaPlayer.setVolume(1, 1);
        mediaPlayer.start();

    }

} 
```

问题是，当我一直按下按钮调用 PlaySound 函数时，过了一会儿（大约按下按钮 40-50 次），控制台会抛出很多错误：

```
05-28 12:56:00.202: E/MediaPlayer(755): error (-38, 0)
05-28 12:56:01.153: E/MediaPlayer(755): error (-19, 0)
05-28 12:56:01.153: E/MediaPlayer(755): Error (-19,0) 
```

声音停止播放。

我应该怎么办？

安卓 SDK 2.3.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:26:01.793

您应该将媒体播放器实例创建为 PlayMedia 类的一个字段，并在设置按钮的 onClick 侦听器之前对其进行初始化。

在 onResume() 中准备它并在 onPause() 中释放它。您的按钮唯一需要做的就是停止/启动。

# android - Android 上的 Unicode 字符

> ID：10785882
> 
> 赞同：2
> 
> 时间：2012-05-28T14:00:26.673
> 
> 标签：android, unicode

我以前开发过Android应用程序。我计划编写一个支持带有 Unicode 的古吉拉特语的 Android 应用程序。[http://developer.android.com/index.html](http://developer.android.com/index.html)没有提供关于该主题的任何提示。该类`android.textview`不包含语言的语言选项，在资产目录中添加字体有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T17:44:26.533

是的，您可以将自定义字体设置为**TextView**。

* * *

假设您在**assets**文件夹下的**fonts文件夹中有一个****gujarati.ttf**字体：

 ****## 将自定义字体设置为 TextView 的代码：

```
 Typeface tf = Typeface.createFromAsset(getAssets(), "fonts/gujarati.ttf");               
    TextView tv = (TextView) findViewById(R.id.CustomFontText);
    tv.setTypeface(tf); 
```

* * *

它仅对您设置了字体的 TextView 启用古吉拉特语，但如果您想在系统范围内显示古吉拉特语，那么您需要知道：

> 每当 android 找不到特定字符时，它会查找 DroidSansFallback.ttf，因此您需要做的是通过将古吉拉特语 ttf 字体重命名为 DroidSansFallback.ttf 来替换模拟器/移动设备的 DroidSansFallback.ttf

* * *

如果您想[在 android 模拟器中安装 gujarati 字体，](https://stackoverflow.com/questions/10487976/what-is-the-best-way-of-installing-new-font-to-android-emulator/10487991#10487991)这里是过程。****

# eclipse-plugin - 将 Eclipse 插件从一个功能移动到另一个功能的好方法是什么？

> ID：10785889
> 
> 赞同：1
> 
> 时间：2012-05-28T14:00:48.313
> 
> 标签：eclipse-plugin, eclipse-rcp

假设我们有一个具有 2 个 Eclipse 功能的更新站点（每个都有自己的插件）：

*   主要特征
*   可选功能（取决于主要功能）

在新版本中，我想把Optional Feature的插件折叠成Main Feature。我不想再展示可选功能了。

如果我按照我说的那样进行操作，那么对于新安装来说这很好，但对于更新来说，这是有问题的，因为依赖于其插件的确切版本的旧功能会留下来并导致冲突。

我可以将可选功能保留为主要功能的包含功能，但在这种情况下，仍然会有一个“可选功能.feature.group”工件需要旧版本的功能。

我现在回到第一方，必须在更新站点中将可选功能添加回作为根功能并将其显示给用户只是为了在那里获得“* .feature.group”。以后可以安全地卸载它，我可以在名称和描述中指出这一点，但整个过程有些混乱，用户可能不容易理解。安装 Eclipse Marketplace 可能会更糟。

* * *

安装隐藏（包含在主要功能中）虚拟功能时遇到的简化示例错误：

```
Your original request has been modified.
  "Main Feature" is already installed, so an update will be performed instead.
Cannot complete the install because of a conflicting dependency.
  Software being installed: Main Feature 2 (main.feature.feature.group 2)
  Software currently installed: Optional Feature 1 (optional.feature.feature.group 1)
  Only one of the following can be installed at once: 
    Optional Feature Plug-in 1 (optional 1)
    Optional Feature Plug-in 2 (optional 2)
  Cannot satisfy dependency:
    From: Optional Feature 1 (optional.feature.feature.group 1)
    To: optional [1]
  Cannot satisfy dependency:
    From: Main Feature 2 (main.feature.feature.group 2)
    To: optional [1] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:43:55.927

为什么不将可选功能更改为虚拟功能（即没有插件的功能）。还要在虚拟功能的描述中明确说明它已被弃用。

# mysql - Sphinx 和带有 mysql innodb 事务的实时索引

> ID：10785890
> 
> 赞同：1
> 
> 时间：2012-05-28T14:00:48.973
> 
> 标签：mysql, innodb, real-time, sphinx

是否可以将 Sphinx RT 索引与 Mysql innodb 表结合使用来支持事务？

例如，我在 mysql 中有一个表 products，我在 Sphinx 中构建了一个实时索引以进行全文搜索。当在 mysql 中更新产品行时，我希望 Sphinx 中的索引也必须实时更新，以便立即对更新产品进行全文搜索，但都以一致的方式进行。

如果产品行更新失败或实时索引更新失败，都必须回滚以避免不一致。有可能的？我怎样才能得到这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:35:35.610

是的，这是可能的，但它有一些怪癖。Sphinx 支持事务（开始/语句/（提交，回滚）），但仅限于单个实时索引。这意味着，如果您想在单个事务中写入多个索引，它将无法工作。假设您有以下 mysql 表和 sphinx 实时索引，它们之间有直接的对应关系：

```
 posts_db      -> posts_rt
  comments_db   -> comments_rt 
```

在 mysql 中，很容易在单个事务中写入两个表：

```
START TRANSACTION;
    INSERT INTO posts_db ...;
    INSERT INTO comments_db ...;
COMMIT or ROLLBACK; // so far everthing ok 
```

但是如果你想对 sphinx 做同样的事情，它会失败：

```
START TRANSACTION;
    INSERT INTO posts_rt ...;
    // when executing the next statement you'll get an error
    INSERT INTO comments_rt ...;  // ERROR 1064 (42000): current txn is working with another index ('posts_rt') 
```

在 sphinx 中，您一次只能使用一个索引：

```
START TRANSACTION;
    INSERT INTO posts_rt ...;
COMMIT or ROLLBACK; // so far everthing ok

START TRANSACTION;
    INSERT INTO comments_db ...;
COMMIT or ROLLBACK; // so far everthing ok 
```

这很糟糕！这对于单索引应用程序来说很好，但对于其他情况，您必须使用 php 或您使用的任何东西来模拟事务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:04:22.453

对的，这是可能的。这是实时索引的描述 [http://sphinxsearch.com/docs/current.html#rt-indexes](http://sphinxsearch.com/docs/current.html#rt-indexes)

# c# - string.ToLower 和 TextInfo.ToLower 之间的区别

> ID：10785896
> 
> 赞同：6
> 
> 时间：2012-05-28T14:01:27.977
> 
> 标签：c#, .net

两者有什么区别？我应该什么时候使用它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:05:15.213

> 字符串上的**ToLower**和 ToLowerInvariant 方法在**调用时实际上会调用 TextInfo 虚拟属性**。出于这个原因，它们总是承载这种虚拟属性访问的开销。字符串类型方法的结果值没有差异，但在某些情况下速度较慢。

[**全文+基准**](http://www.dotnetperls.com/textinfo)

为了简单起见`str.ToLower()`，请忘记这个问题！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T14:06:33.853

空无一人。

`string.ToLower``TextInfo.ToLower`幕后的呼唤。

来自 String.cs：

```
 // Creates a copy of this string in lower case. 
    public String ToLower() {
        return this.ToLower(CultureInfo.CurrentCulture); 
    }

    // Creates a copy of this string in lower case.  The culture is set by culture.
    public String ToLower(CultureInfo culture) { 
        if (culture==null) {
            throw new ArgumentNullException("culture"); 
        } 
        return culture.TextInfo.ToLower(this);
    } 
```

# spring-mvc - 使用 @InitBinder 设置验证器时似乎没有使用

> ID：10785897
> 
> 赞同：3
> 
> 时间：2012-05-28T14:01:43.707
> 
> 标签：spring-mvc

我正在设置 @InitBinder 为 Spring MVC 控制器设置验证器。但是，它看起来不像验证器实际上是在运行时触发的。

控制器如下所示：

```
@Controller
@RequestMapping("/login")
public class LoginController {

final private static String USER_COOKIE_NAME = "ADVPROT_CHAT_USER"; 
final private static String CURRENT_VIEW     = "login";
final private static String SUCCESS_VIEW     = "redirect:welcome.htm";

@Autowired
private UserManagerService userManagerService;

@Autowired
private LoginValidator loginValidator;

@InitBinder("login")
protected void initBinder(WebDataBinder binder) {
    binder.setValidator(new LoginValidator());
}

@RequestMapping(method = RequestMethod.POST)
protected String processSubmit(@Valid @ModelAttribute("login") Login login, BindingResult result, ModelMap model, HttpServletRequest request, HttpServletResponse response) throws Exception {

    if(result.hasErrors()) {
        return CURRENT_VIEW;
    } else {
        model.addAttribute("login", login);

        String loginResultMessage = "Login successful via LDAP";  
        User user = getUser(login.getUsername());
        model.addAttribute("userLoggedIn", user);
        model.addAttribute("loginResultMessage", loginResultMessage);

        request.getSession().setAttribute("userLoggedIn", login.getUserLoggingIn());
        if (login.getUserLoggingIn() != null) {
            response.addCookie(new Cookie(USER_COOKIE_NAME, login.getUserLoggingIn().getId()));
        }

        return SUCCESS_VIEW;
    }
}

private User getUser(String username) throws Exception {

    return userManagerService.getUserById(username);
}

@RequestMapping(method = RequestMethod.GET)
protected String initForm(ModelMap model, HttpServletRequest request) {
    Login login = new Login();

    Cookie[] cookies = request.getCookies();
    if (cookies != null && cookies.length > 0) {
        for (Cookie nextCookie: cookies ) {
            if (nextCookie.getName().equals(USER_COOKIE_NAME)) {
                login.setUsername(nextCookie.getValue());
                break;
            }
        }
    }
    model.addAttribute("login", login);
    return CURRENT_VIEW;
}
} 
```

在运行时，验证器似乎没有进行任何检查。

如果我使用 @InitBinder 而不指定模型属性

```
@InitBinder
protected void initBinder(WebDataBinder binder) {
    binder.setValidator(new LoginValidator());
} 
```

看起来验证器被其他对象触发了，我得到了异常。所以，我的猜测是我为@InitBinder 指定模型的方式在某种程度上是不正确的，但我不确定。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-06-25T16:30:56.243

您不应该在`InitBinder`. 它必须看起来像：

```
@Autowired
private LoginValidator loginValidator;

@InitBinder
public void InitBinder(WebDataBinder binder) {
    binder.setValidator(loginValidator);
} 
```

由于您使用的是验证器，因此您必须使用`@Validated`而不是`@Valid`. 我是说：

```
@RequestMapping(method = RequestMethod.POST)
protected String processSubmit(@Validated @ModelAttribute("login") Login login, BindingResult result, ModelMap model, HttpServletRequest request, HttpServletResponse response) throws Exception { 
```

如果您需要一个工作示例，请查看[此处](https://github.com/pedrogonzalezgutierrez/simplespringproject/)

# audio - 调制和解调二进制数据到音频/从音频 - 一个或两个频率？

> ID：10785901
> 
> 赞同：1
> 
> 时间：2012-05-28T14:02:00.670
> 
> 标签：audio, signal-processing, audio-processing, amplitude

我将通过音频通道将二进制数据从 PC 传输到附近的智能手机（最好通过超声幅度调制，如 ~19 kHz）。我想知道什么是更好的方法：

*   使用一个固定频率来编码一个（高幅度）和零（静音）
*   使用两个固定频率，其中一个频率如上所述传输数据，第二个频率反转（静音为一）以获得更好的噪声容限。

数据将包括校验和，可能具有某种 RLL 编码以避免太长的同位序列。

第二种方式真的会增加数据传输的可靠性吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T16:29:02.180

通常，对于简单的调制方案，您将使用[FSK](http://en.wikipedia.org/wiki/Frequency-shift_keying)，具有两个合适的频率。但是，由于各种原因，您不太可能通过超声波进行此操作，并且您的数据速率也将非常低。由于您的传输通道会很嘈杂，您肯定需要一些强大的错误检查/纠正。

请注意，在软盘和硬盘驱动器等大容量存储设备变得负担得起之前（70 年代末/80 年代初），上述技术被广泛用于[分组无线电](http://en.wikipedia.org/wiki/Packet_radio)，并且在历史上也用于计算机上的[盒式磁带接口](http://en.wikipedia.org/wiki/Kansas_City_standard)，因此可能有很多关于通过消费类音频设备进行 FSK 算法和实现的材料。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T17:08:35.553

使用 2 个频率（又称二进制 FSK）是通常的做法，因为信号功率电平保持更恒定（因此不太可能与 AGC 或阈值检测器发生冲突或导致电源噪声）。

# jquery - jQuery.parseJSON 返回 null

> ID：10785902
> 
> 赞同：6
> 
> 时间：2012-05-28T14:02:00.863
> 
> 标签：jquery

我正在从 Web 服务返回 JSON。当我使用`jQuery.parseJSON`时，由于某种原因它为空。这是 JSON 的一个示例（通过 using 获得`JSON.stringify(msg)`）

```
{"0":{"i":"1x 8351-3 & 2 x 8352-3","D":"Notes","V":"1x 8351-3 & 2 x 8352-3"},"1":{"i":"PC3","D":"Unit","V":"PC3"},"2":{"i":"PC3","D":"Unit","De":"Unit","V":"PC3"}}
var data = jQuery.parseJSON(msg); 
```

数据为空？我错过了什么吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T14:07:19.797

如果您`JSON`是这样的（假设您通过 getJSON 从网络服务获取数据）

```
 {"error":"Error KL005"} 
```

然后你不需要调用`parseJSON`. 它是一个格式良好的 JSON 对象。你可以简单地通过它解析。

```
var response={"error":"Error KL005"};
alert(response.error); 
```

示例：http: [//jsfiddle.net/6YHeB/2/](http://jsfiddle.net/6YHeB/2/)

使用[JsonLint](http://jsonlint.com/)检查您的表达式是否是有效的 JSON。

# javascript - 恢复到以前的状态 - 拖放

> ID：10785907
> 
> 赞同：1
> 
> 时间：2012-05-28T14:02:25.217
> 
> 标签：javascript, jquery

拖放多个后，我希望取消选项，以便所有 div 在按下时恢复到原始状态和位置。

*HTML：*

```
<div class="connected">
    <div class="myDivs">Hello 01</div>
    <div class="myDivs">Hello 02</div>
    <div class="myDivs excludeThisCss">Hello 03</div>
    <div class="myDivs">Hello 04</div>
    <div class="myDivs">Hello 05</div>
    <div class="myDivs excludeThisCss">Hello 06</div>
    <div class="myDivs">Hello 07</div>
    <div class="myDivs">Hello 08</div>
    <div class="myDivs excludeThisCss">Hello 09</div>
    <div class="myDivs">Hello 10</div>
</div>
<button id="demo1" onclick="cancel()" title="Button">Cancel</button> 
```

*JavaScript：*

```
$(function() {
    $(".connected").sortable({
        connectWith: ".connected",
        items: ".myDivs:not(.excludeThisCss)"
    }).disableSelection();
});

function cancel() {
    // alert('cancelled');
}​ 
```

见小提琴：http: [//jsfiddle.net/adrianjsfiddlenetuser/zyUkd/6/](http://jsfiddle.net/adrianjsfiddlenetuser/zyUkd/6/)

我已经看到使用 .load 函数的示例，但我不想加载新数据，只需刷新 div

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T14:41:20.687

还有另一种更轻量级的解决方案。

首先，在 DOM 准备就绪时，让我们存储`data`每个元素的初始索引。

```
$(".connected").sortable({
    ...
}).children().each(function(index) {
    $(this).data("index", index);
}); 
```

然后，在取消时，让我们根据存储的索引恢复元素的位置，如下所示：

```
function cancel() {
    var indices = [];
    $(".connected").children().each(function() {
        indices.push($(this).data("index"));
    }).each(function(index) {
        var el = $(".connected").children().eq(indices[index]);
        if (!el.is(this)) el.before(this);
    });
}​ 
```

**演示：http:** [//jsfiddle.net/zyUkd/13/](http://jsfiddle.net/zyUkd/13/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T14:11:22.923

我可以通过将容器内的元素放入变量中来解决此问题，然后在您按“取消”时使用变量数据删除/加载容器。如果您事先将其保存在变量中，它会将其重置为其原始列表位置。

[http://jsfiddle.net/zyUkd/12/](http://jsfiddle.net/zyUkd/12/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T14:22:36.823

这是一种很好的老式方式：

声明一个全局变量以按初始顺序存储元素。`var def;`

在您的`$(document).ready()`, 即 ,`$(function(){})`按初始顺序存储元素：

```
def = $('.connected').html(); 
```

最后，在您的`cancel()`函数中，将元素恢复到初始顺序：

```
$('.connected').html(def); 
```

[***JSFiddle***](http://jsfiddle.net/zyUkd/9/)

这只是 3 行代码，不应该占用太多内存来存储几个 DOM 元素。

您还可以将`$('.connected')`元素备份到 var，从文档中删除当前元素，并将原始元素从 var 附加回页面的主体/容器 div。

查看[API 文档](http://jqueryui.com/demos/sortable/#method-destroy)，该`.sortable("destroy")`方法应该将可排序项目返回到其初始顺序，但是当我在您的示例中尝试时，destroy 方法不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T14:08:14.063

我建议`.data()`使用 key 将初始容器保存到元素的集合中，然后`"initial-container"`在还原时保存到它的.`.detach()``.append()``.data("initial-container")`

# c# - 将带有 alpha 通道的图像复制到带有自定义背景颜色的剪贴板？

> ID：10785909
> 
> 赞同：5
> 
> 时间：2012-05-28T14:02:37.390
> 
> 标签：c#, wpf, canvas, clipboard, alpha-transparency

**代码 ：**

```
private void Foo(Canvas canvas)
{
    // The content is a bit larger...
    Size size = new Size(canvas.ActualWidth * 1.1, canvas.ActualHeight * 1.2);

    // Create a render bitmap and push the surface to it
    RenderTargetBitmap renderBitmap =
        new RenderTargetBitmap(
        (int)size.Width,
        (int)size.Height,
        96d,
        96d,
        PixelFormats.Pbgra32
    );
    renderBitmap.Render(canvas);

    // Then copy to clipboard
    Clipboard.SetImage(renderBitmap);
} 
```

**我需要的 ：**

将具有透明背景的画布渲染为图像，然后将其复制到剪贴板（退出简单？不是真的）

**问题 ：**

粘贴时，我得到一个带有黑色背景的丑陋图像

**解决方案 1：**

```
canvas.Background = new SolidColorBrush(Colors.White); 
```

不行，这个厚的不行，背景下`canvas`不会变的 `renderBitmap.Render(canvas);`

相反，我必须使用计时器，给 WPF 一些时间来更改背景，然后在该计时器的滴答事件中渲染它。它可以工作，但不幸的是，它的内容`canvas`大于它的大小......所以白色背景只能覆盖它的一部分，仍然是丑陋的结果。（顺便说一句，有人知道为什么要花一些时间来改变背景吗？我认为应该立即改变）

我做错什么了吗？如何在剪贴板中获得白色背景的透明图像？

更重要的是，我注意到如果将一些PNG图像的背景粘贴到不支持alpha通道的mspaint.exe中，它的背景仍然是白色，而另一些则变成黑色。

`alternative color`如果粘贴图像的位置不支持 alpha 通道，是否有类似的东西用作背景？我们可以定制吗？

现在我`BitmapSource`用白色内容渲染了另一个，如果有办法将它与*renderBitmap*结合为背景，问题就解决了，但我不知道如何......

```
int dWidth = (int)size.Width;
int dHeight = (int)size.Height;
int dStride = dWidth * 4;
byte[] pixels = new byte[dHeight * dStride];
for (int i = 0; i < pixels.Length; i++)
{
    pixels[i] = 0xFF;
}
BitmapSource bg = BitmapSource.Create(
    dWidth,
    dHeight,
    96,
    96,
    PixelFormats.Pbgra32,
    null,
    pixels,
    dStride
);
// Combine bg with renderBitmap 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T01:50:13.037

这是我的最后一个解决方案，希望它能帮助其他有同样问题的人

```
// Create a render bitmap and push the surface to it
RenderTargetBitmap renderBitmap =
    new RenderTargetBitmap(
    (int)size.Width,
    (int)size.Height,
    96d,
    96d,
    PixelFormats.Pbgra32
);
renderBitmap.Render(surface);

// Create a white background render bitmap
int dWidth = (int)size.Width;
int dHeight = (int)size.Height;
int dStride = dWidth * 4;
byte[] pixels = new byte[dHeight * dStride];
for (int i = 0; i < pixels.Length; i++)
{
    pixels[i] = 0xFF;
}
BitmapSource bg = BitmapSource.Create(
    dWidth,
    dHeight,
    96,
    96,
    PixelFormats.Pbgra32,
    null,
    pixels,
    dStride
);

// Adding those two render bitmap to the same drawing visual
DrawingVisual dv = new DrawingVisual();
DrawingContext dc = dv.RenderOpen();
dc.DrawImage(bg, new Rect(size));
dc.DrawImage(renderBitmap, new Rect(size));
dc.Close();

// Render the result
RenderTargetBitmap resultBitmap =
    new RenderTargetBitmap(
    (int)size.Width,
    (int)size.Height,
    96d,
    96d,
    PixelFormats.Pbgra32
);
resultBitmap.Render(dv);

// Copy it to clipboard
try
{
    Clipboard.SetImage(resultBitmap);
} catch { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-10T10:47:45.927

我找到了一个更小、更易读的解决方案，我在[https://social.msdn.microsoft.com/Forums/vstudio/en-US/a6972b7f-5ccb-422d-b203-134ef9f10084/how-to找到了它-capture-entire-usercontrol-image-to-clipboard?forum=wpf](https://social.msdn.microsoft.com/Forums/vstudio/en-US/a6972b7f-5ccb-422d-b203-134ef9f10084/how-to-capture-entire-usercontrol-image-to-clipboard?forum=wpf) :

```
// Create a render bitmap and push the surface to it
RenderTargetBitmap renderBitmap =
    new RenderTargetBitmap(
    (int)size.Width,
    (int)size.Height,
    96d,
    96d,
    PixelFormats.Pbgra32
);

// Render a white background into buffer for clipboard to avoid black background on some elements
Rectangle vRect = new Rectangle()
{
    Width = (int)size.Width,
    Height = (int)size.Height,
    Fill = Brushes.White,
};
vRect.Arrange(new Rect(size));
renderBitmap.Render(vRect);

// renderBitmap is now white, so render your object on it
renderBitmap.Render(surface);

// Copy it to clipboard
try
{
    Clipboard.SetImage(resultBitmap);
} catch { ... } 
```

# svn - SVN - 合并主干中的分支更改

> ID：10785917
> 
> 赞同：0
> 
> 时间：2012-05-28T14:03:07.893
> 
> 标签：svn, branch, branching-and-merging, svn-trunk

我们正在开发 2 个并发版本，一个是分支，另一个是主干。并且每个分支的更改都必须合并到主干中。如果我们正在开发一个大功能，这需要很多时间。因此我想自动化这个过程，即每次分支发生变化时..这些变化与主干合并。

同样，我正在探索 SVN 并考虑编写一个执行此操作的脚本。有谁知道我怎么能做到这一点，有什么教程吗？我已经提到过各种类似的[文章](http://svnbook.red-bean.com/en/1.6/svn.branchmerge.advanced.html)。

到目前为止，我还无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:38:41.193

我试着用我自己的话重复这个问题：您计划在不久的将来发布*v0.1*，但还有很多工作要做。发布后不久，将发布具有一些附加功能的*v0.2* - 已经在开发中。如何用 Subversion 做到这一点？

我建议以另一种方式进行：尽可能晚地为*v0.1创建发布分支。*为不属于第一个版本的功能创建一个或多个功能分支。主干更改可以很容易地合并到功能分支中`svn merge ^/trunk`（由于合并跟踪而工作得很好）。大部分工作完成后创建发布分支，然后将功能分支重新集成到主干中。

创建发布分支后，应在主干上进行更改，并从主干合并到发布分支 - 所谓的樱桃采摘。它需要更多的努力，我推荐它，因为在我看来，开发应该发生在主干及其功能分支上——而不是发布分支上。

# javascript - 成为或不成为：window.onload

> ID：10785918
> 
> 赞同：0
> 
> 时间：2012-05-28T14:03:08.063
> 
> 标签：javascript

愚蠢的问题，但是当我写的时候`window.onload = alert('hi')`我得到了警报。

但是，如果我测试它的存在：`if (window.onload) alert("exists")`我得到`undefined`. 怎么来的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T14:05:59.040

您正在调用该`alert`方法（立即执行）并将其返回值 ( `undefined`) 分配给`onload`.

如果你想分配一个函数，`onload`那么你需要分配一个实际的函数，而不是任何旧函数调用的返回值。

例如：

```
onload = function () { 
    alert('hi');
}; 
```

或者

```
function createHiAlertFunction() {
    return function () {
        alert('hi');
    }
}
onload = createHiAlertFunction(); 
```

但是，一般来说，您应该避免将事物分配给事件处理程序属性，而应使用事件绑定方法。这样，如果您想调用多个函数，您就不必处理事情。

```
window.addEventListener('load', function () {
    alert('hi');
});​​​ 
```

请注意，旧的 IE 不支持此功能，因此您可能希望使用提供抽象层的众多库之一（例如 YUI 或 jQuery），该抽象层包括对旧的专有 Microsoft 方式的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T14:06:42.813

`window.onload`触发事件。默认情况下它没有值，当一切准备就绪时，它的值由用户设置。如果您没有设置值，它将是`undefined`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T14:34:27.260

尝试以下操作：

```
if(typeof window.onload !== "undefined") alert("exists!") 
```

这会显式检查对象上是否存在 onload 属性`window`。

编辑：

你看到的`undefined`是警报函数的返回值。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-28T14:06:37.710

你在哪里触发那个脚本？如果 window.onload 返回 false，则表示该页面尚未完全加载。

# java - Java 转换类

> ID：10785919
> 
> 赞同：2
> 
> 时间：2012-05-28T14:03:08.487
> 
> 标签：java, dto

我有一个像这样的课程：

```
Student
-name
-surname
-address
-number 
```

我有一个 DTO，比如：

```
StudentDTO
-name
-surname
-number 
```

我会将我的学生班级发送到另一个班级，仅包含姓名、姓氏和数字字段（我的意思不是所有字段），我决定将其命名为 DTO（我没有使用序列化等。只是我将这个班级的对象作为参数发送到任何其他类的方法）。

但是，让我们假设我有一行这样的代码：

```
getAllStudents(); 
```

它返回：

```
List<Student> 
```

但我想将它分配给一个变量：

```
List<StudentDTO> 
```

如何轻松转换它们？

**PS：**我不能改变我的*getAllStudents();* 方法在里面。我有学生列表，并且想要一种快速且设计良好的方法将对象列表转换为另一个对象列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:36:27.077

使用 Apache commons-beanutils：

```
PropertyUtils.copyProperties(studentDtoBean, studentBean); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:05:00.380

```
public StudentDTO convert() {
    StudentDTO newDTO = new StudentDTO(name, surname, number);
    return newDTO;
} 
```

您可以将其实现为公共方法。

显然，这将被抽象为一个更大的转换方法，可以进行批处理。另一种选择是实现 Cloneable 并仅为 Student -> StudentDTO 创建一个特定的实现。

迭代示例：

```
List<StudentDTO> myList = new ArrayList<>();
    for (Student s : collection) {
        myList.add(s.convert());
    }
    return myList; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T14:11:54.070

您可以从 StudentDTO 扩展 Student：

```
public class StudentDTO {
    name;
    surname;
    number;
}

public class Student extends StudentDTO {
    address;
} 
```

比你能做的：

```
List<StudentDTO> dtoList = new ArrayList<StudentDTO>(getAllStudents()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T14:12:24.817

您可以尝试更改`StudentDTO`以扩展`Student`

```
public StudentDTO extends Student {
} 
```

请记住，您可以拥有该`address`属性但无需使用它。如果你能做到，那么只需将你的方法的结果更改为：

```
public List<? extends Student> getAllStudents() {
    List<StudentDTO> lsStudentDTO = new ArrayList<StudentDTO>();
    //fill the list...
    return lsStudentDTO;
} 
```

编辑：

您不是在更改内部代码，而是在更改方法定义:)。此外，您总是可以扩展方法，也许是

```
public List<? extends Student> getAllStudentsDTO() {
    //maybe you should add another logic here...
    return getAllStudents();
} 
```

如果您甚至无法更改此行为，请使用@DavidB 回答。

# mysql - MySQL 从多个表中选择

> ID：10785922
> 
> 赞同：1
> 
> 时间：2012-05-28T14:03:29.507
> 
> 标签：mysql, select

我有一些代码（继承），它从表“成员”中选择一行，以及从表“图像”中的一行中选择一些细节：

```
SELECT members.main,members.id,image.main,image.thumb,bio,
altered,members.title,author 
FROM members,image WHERE members.main = image.id 
```

这在所有情况下都可以正常工作，除了“members.main”字段为空的情况。有没有办法在满足“members.main”为空的情况下保持此代码的相同功能（即匹配成员与图像）？

我试过

```
WHERE members.main = image.id OR members.main = '' 
```

但这返回了乱码的结果。

谢谢，

G

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T14:04:43.627

使用左外连接：

```
SELECT
    members.main,
    members.id,
    image.main,
    image.thumb,
    bio,
    altered,
    members.title,
    author
FROM members
LEFT JOIN image
ON members.main = image.id 
```

LEFT JOIN 返回左表（成员）中的所有行，无论它们是否与右表（图像）中的行匹配。

# .net - 永远无法访问的代码块

> ID：10785928
> 
> 赞同：4
> 
> 时间：2012-05-28T14:04:08.443
> 
> 标签：.net, profiling, code-analysis

我有一个 .NET 项目（C#），在我的代码中有这样的函数：

```
public void myFunction(string myStr)
{
   myStr = "This is not an empty string";

   if(String.IsNullOrEmpty(myStr))
   {
       DoSomething();
   }
} 
```

我想分析我的应用程序，看看是否有无法访问的代码块。我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:08:34.233

使用[ReSharper](http://www.jetbrains.com/resharper/)让您的代码更高效。检查其中一项功能中的不可用代码区域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T16:12:28.430

通常，要做到这一点，您需要对所有控制路径上的值进行符号分析，并进行布尔符号简化以确定条件是否为真。例如：

```
void bar(...a) {
  ...
  x=2*a;
  if (...)  x=17;
  foo(x)
  ...
}
void foo(int x) {
  if (x<a && !x>5) { // dead code if called from bar ...
  ... 
```

要知道死代码行真的死了，您必须找到*所有*对 foo 的调用，并验证每个调用是否都会导致这种情况发生。所以你需要一个全局调用图，你需要全局函数指针分析，你需要全局和局部指向分析......

我不知道有任何现成的工具可以做到这一点。

一个程序转换系统可以通过一些努力来构建。我们的[DMS Software Reengineering Toolkit](http://www.semanticdesigns.com/Products/DMS/DMSToolkit.html)包含所有提到的可用于 C 的机制。虽然所有这些机制都不适用于 C#，但它主要以与语言无关的方式实现，因此实现 C# 是汗水，但并非不切实际。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-28T14:09:09.780

您可能想要使用[ReSharper](http://www.jetbrains.com/resharper/)之类的工具，它可以在开发时进行代码质量分析。它会给你警告，比如“代码是启发式无法访问的”

# exception - 在一个事务期间流利的 Nhibernate NonUniqueObjectException

> ID：10785929
> 
> 赞同：0
> 
> 时间：2012-05-28T14:04:10.167
> 
> 标签：exception, transactions, fluent-nhibernate, unique

我坚持使用流利的 nhibernate 处理 NonUniqueObjectException 异常。我有一个循环处理一些业务逻辑，检查数据库中一些数据的存在。如果数据不是数据库，则应添加。但是这个周期内的所有操作都是在同一个事务中进行的。这是循环体的样子：

```
 // Open session, start transaction
 if(!_service.CheckIfEntityInDb(entity))
 {
   entity = new entity() {var1 = value1, var2 = value2};
   _service.SaveOrUpdate(entity);
 } 
```

我已经尝试过使用`merge`，但合并返回我的实体与空字段。该实体是一种映射，仅包含其他实体类型的两个属性。请给出解决这个问题的一些建议，除了在周期的每一步都提交数据。谢谢。

**更新**：

```
public bool CheckIfEntityInDb(entity)
{
  Session.QueryOver<Entity>.Where(x => x.Id == entity.Id).Future().FirstOrDefault();
}

public bool CheckIfEntityInDb(entity)
{
  Session.SaveOrUpdate(entity);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:20:03.940

假设您自己生成 id

```
var entity = session.Get<Entity>(someid); // this uses the firstlevel cache

if (entity == null)
{
    entity = new Entity { Id = someid, var1 = value1, var2 = value2 };
    session.Save(entity);
} 
```

## 身份生成后更新：

因为您使用身份，所以会话知道哪个 id 被保存，哪个不被保存。`session.SaveOrUpdate(entity);`如果实体是已知的，则什么也不做，当它是新实体时立即发出插入

# sql - 外键引用

> ID：10785930
> 
> 赞同：-1
> 
> 时间：2012-05-28T14:04:11.513
> 
> 标签：sql

所以情况是这样的，目前正在建设一个大学数据库。我有一个包含学术期间列的活动表，还有另一个名为 activity_enrolment 的列，它应该引用活动表中的学术期间列。

我一直在尝试执行基本的 FOREIGN KEY REFERENCES 活动（academic_period），但我收到一条错误消息，提示“引用的表中没有主键或候选键”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:09:21.033

`academic_period`将活动表的列标记为主键，然后尝试。

因为要在两个表之间的列上创建主子关系，一个列应该在该列上定义主键。

# .net - 来自 BackgroundWorker_RunWorkerCompleted 的 TargetInvocationException

> ID：10785940
> 
> 赞同：3
> 
> 时间：2012-05-28T14:04:44.123
> 
> 标签：.net, backgroundworker, targetinvocationexception

假设以下情况。表单有一个按钮，单击该按钮可启动后台工作人员。在 RunWorkerCompleted 事件处理程序中有一段代码会引发未处理的异常。表单从 Application.Run 方法开始。

```
public partial class FormMain : Form
{
    public FormMain()
    {
        InitializeComponent();
    }

    private void backgroundWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        throw new Exception();
    }

    private void button_Click(object sender, EventArgs e)
    {
        backgroundWorker.RunWorkerAsync();
    }
} 
```

问题是 Visual Studio 在 Application.Run 调用处中断，而不是在 FormMain.backgroundWorker_RunWorkerCompleted 方法中的“throw new Exception()”处中断。最重要的是，真正的异常被 TargetInvocationException 包裹，调用堆栈被简化为 Program.Main 方法，因此无法检查导致异常的代码。

如何防止这种包装？我在做一些本质上错误的事情吗？

从 TargetInvocationException 提供的调用堆栈来看，堆积了很多调用方法，对于我对消息循环的基本理解和对线程的不太基本的理解来说太多了。

编辑：我知道 TargetInvocationException 中有 InnerException 属性，并且可以通过查看那里来跟踪错误，但这不是问题。问题是如何在使用 TargetInvocationException 包装真正的异常之前停止 Visal Studio，这样我就可以使用 VS IDE 提供的所有这些不错的调试功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T15:04:16.423

是的，这是使 RunWorkerCompleted 事件在 UI 线程上运行的魔法带来的一个不幸的副作用。您编写的任何代码都没有使它运行，因此调试器无法显示任何相关内容，但程序中仍然涉及的最后一条语句，即启动消息循环的 Application.Run() 调用。

您必须通过在抛出异常时强制调试器停止来调试它。Debug + Exceptions，勾选 CLR exceptions 的 Throw 复选框。还要注意当你在没有调试器的情况下运行它时的行为，你会得到命运之轮对话框。使用 Application.SetUnhandledExceptionMode() 修复该问题。

# php - 正则表达式在 Expresso 中有效，但在 PHP 中无效（使用 preg_match_all）

> ID：10785941
> 
> 赞同：0
> 
> 时间：2012-05-28T14:04:47.823
> 
> 标签：php, regex, preg-match, preg-match-all

首先，我的正则表达式不是很好，所以这里可能有错误。我得到了我创建的以下正则表达式模式：

```
`(?:\\&|[^&])*` (PHP : `/(?:\\&|[^&])*/s`) 
```

解析以下字符串的类型：

```
hfghfg=hfghfg&gfdgdf=4343543&gfdgfdgfd=fsdfds\&hghg999 
```

浓缩咖啡给我这个：

```
hfghfg=hfghfg
NULL
gfdgdf=4343543
NULL
gfdgfdgfd=fsdfds\&hghg999
NULL 
```

所以它的作用与`explode('&', $String)`但 if相同`\& is found`，它不会削减。

但是在 PHP 中，`preg_match_all`给`preg_match`我这个：

```
preg_match_all('/(?:\\&|[^&])*/s', 
                     implode('', $this->Grecko->Input->Server('argv')), 
                     $Args, PREG_PATTERN_ORDER);
print_r($Args);

Array
(
    [0] => Array
        (
            [0] => hfghfg=hfghfg&gfdgdf=4343543&gfdgfdgfd=fsdfds\&hghg999
            [1] => 
        )

) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:13:45.690

我认为你需要的是`preg_split()`而不是`preg_match_all()`.

```
$str = 'hfghfg=hfghfg&gfdgdf=4343543&gfdgfdgfd=fsdfds\&hghg999';
$res = preg_split('/(?<!\\\)&/', $str);

print_r($res);

/*
Array
(
  [0] => hfghfg=hfghfg
  [1] => gfdgdf=4343543
  [2] => gfdgfdgfd=fsdfds\&hghg999
)
*/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T14:10:26.430

我敢打赌，问题在于您忘记添加额外的反斜杠以补偿`\`PHP 中的转义字符这一事实。

试试这个：

```
preg_match_all('/(?:\\\\&|[^&])*/s', implode('', $this->Grecko->Input->Server('argv')), $Args, PREG_PATTERN_ORDER);
print_r($Args); 
```

**编辑**

确实这就是问题所在 -[看到它工作](http://codepad.viper-7.com/TnJbgD)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T14:22:04.537

我相信 DaveRandom 是正确的，但是这是一种不使用正则表达式来解析给定字符串的替代方法。

它只是对`\&`as进行编码`%26`，这是与符号的 URL 编码值。然后，它用于[`parse_str`](http://www.php.net/parse_str)解析输入字符串。

```
$str = "hfghfg=hfghfg&gfdgdf=4343543&gfdgfdgfd=fsdfds\&hghg999";

// Properly encode the ampersand
$str = str_replace( '\&', '%26', $str);

// Parse the string
parse_str( $str, $arr);

var_dump( $arr); 
```

**输出：**

```
array(3) {
  ["hfghfg"]=>
  string(6) "hfghfg"
  ["gfdgdf"]=>
  string(7) "4343543"
  ["gfdgfdgfd"]=>
  string(14) "fsdfds&hghg999"
} 
```

我不确定是否有必要，但您可以[`urldecode`](http://www.php.net/urldecode)使用[`array_map`](http://www.php.net/array_map).

**编辑：**

如果你想保持 & 符号转义，你可以简单地用它的转义替换 & 符号，如下所示：

```
array_walk( $arr, 
    function( &$str) { 
        $str = str_replace( '&', '\&', $str);
}); 
```

这产生：

```
array(3) {
  ["hfghfg"]=>
  string(6) "hfghfg"
  ["gfdgdf"]=>
  string(7) "4343543"
  ["gfdgfdgfd"]=>
  string(15) "fsdfds\&hghg999"
} 
```

# ruby-on-rails - rails 设计受密码保护的资源

> ID：10785942
> 
> 赞同：0
> 
> 时间：2012-05-28T14:04:50.813
> 
> 标签：ruby-on-rails, devise

我是 Rails 新手，希望得到您的理解。我有以下问题：我需要创建一个受密码保护的资源，并且我正在尝试使用 Devise 找出最佳策略。我希望我的资源（某种列表）可供某些有密码的人使用，所以基本上他们不需要创建用户帐户等。我已经阅读了设计文档，看来我会必须使用令牌身份验证，这将是一种 API 密钥。问题是我找不到这种实现的任何好例子。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:34:33.520

如果您不想要用户帐户，最好使用 http 基本身份验证。 [http://api.rubyonrails.org/classes/ActionController/HttpAuthentication/Basic.html](http://api.rubyonrails.org/classes/ActionController/HttpAuthentication/Basic.html)

如果您坚持设计 API 令牌，您将需要一个存储身份验证令牌的用户模型。

# javascript - 我的 JSON 对象未更新

> ID：10785950
> 
> 赞同：0
> 
> 时间：2012-05-28T14:05:26.540
> 
> 标签：javascript, json

我正在尝试从 json 对象中动态添加和删除 JSON 元素。但它没有在**JSON.stringify**输出中更新。

```
{
    "selected_stores": [
        {
            "row_0": "3366::1148",
            "row_1": "3366"
        }
    ]
} 
```

我正在尝试在其中添加更多元素。像 row_2 这样，但它不起作用。添加新元素后**console.log(obj);** 记录新元素。但输出未更新。

[检查我的小提琴](http://jsfiddle.net/gchoken/4TzRC/7/)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:31:22.300

问题在于该`selected_stores`对象是一个具有单个元素的数组：一个包含多个属性的对象。然而，该代码假定该数组是一个包含多个对象的数组（每行一个）。

您可能希望将 JSON 结构更新为：

```
{
    "selected_stores": [
        {
            "row_0": "3366::1148"
        },{
            "row_1": "3366"
        }
    ]
} 
```

如果您打算按照您的方式编写 JSON，则需要在代码中完成对`selected_stores`第一个数组元素的引用：包含行属性的对象：

`selected_stores_jsonObj.selected_stores[0]['row_' + row_num] = outcheckedStr;`

[http://jsfiddle.net/4TzRC/28/](http://jsfiddle.net/4TzRC/28/)

# vb.net - 如何遍历一个字符串并创建一个数组？- VB.NET

> ID：10785951
> 
> 赞同：0
> 
> 时间：2012-05-28T14:05:34.650
> 
> 标签：vb.net, arrays, listbox

我有一个字符串，可以这么说，我在其中创建了一个模板。

{

```
Dim myvariable as string
Richtextbox1.text = Richtextbox1.text & "The dog jumped over the" & myvariable & "to find the fox." 
```

}

我有一个列表框，其中包含加载到变量示例中的选项列表：栅栏、存储桶等。

所以这些句子读起来像

1.  狗跳过栅栏去找狐狸
2.  狗跳过水桶去找狐狸

现在我将它编码为显示在富文本框中，但所有内容都在同一个富文本框中。

我试图在每个循环结束时将字符串加载到一个数组中，这样我就可以将每个句子分开。

最好的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:22:44.597

假设您的 ListBox 控件的名称是`myLstBox`，而您的 RichTextBox 控件是`myRchBox`

```
Private Sub WriteOnRichTextBox()
    For Each xStr As String In myLstBox.Items
         myRchBox.AppendText("The dog jumped over the " & _
                              xStr & " to find the fox.")
         myRchBox.AppendText(ControlChars.NewLine)
    Next
End Sub 
```

您需要循环在列表框中找到的所有项目。

# ruby - 正则表达式匹配生成部分无效输出的 URL

> ID：10785953
> 
> 赞同：0
> 
> 时间：2012-05-28T14:05:35.867
> 
> 标签：ruby, regex, url

我试图在我的 Ruby 应用程序中使用以下正则表达式代码来匹配 HTTP 链接，但它会生成无效的输出，在链接后面附加一个句点，有时是句点和一个单词，当在网络上测试时，它会变得无效。

```
URL_PATTERN  = Regexp.new %r{http://[\w/.%-]+}i
<input>.to_s.scan( URL_PATTERN ).uniq 
```

上面扫描链接的代码有问题吗？

来自应用程序的代码：

```
require 'bundler/setup'
require 'twitter'

RECORD_LIMIT = 100
URL_PATTERN  = Regexp.new %r{http://[\w/.%-]+}i

def usage
  warn "Usage: ruby #{File.basename $0} <hashtag>"  
  exit 64
end

# Ensure that the hashtag has a hash symbol. This makes the leading '#'
# optional, which avoids the need to quote or escape it on the command line.
def format_hashtag(hashtag)  
  (hashtag.scan(/^#/).empty?) ? "##{hashtag}" : hashtag
end

# Return a sorted list of unique URLs found in the list of tweets.
def uniq_urls(tweets)  
  tweets.map(&:text).grep( %r{http://}i ).to_s.scan( URL_PATTERN ).uniq
end

def search(hashtag)  
  Twitter.search(hashtag, rpp: RECORD_LIMIT, result_type: 'recent')
end

if __FILE__ == $0 usage unless ARGV.size >= 1  
hashtag = format_hashtag(ARGV[0]) 
tweets = search(hashtag) 
puts uniq_urls(tweets)
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T16:51:59.330

### TL;博士

人们总是发布不良链接。链接也受到位腐烂。

### 可能的答案

您是否手动验证了推文？你确定原始推文不包含格式错误的 URL 吗？如果有人发帖：

> [http://foo.](http://foo.Any)还有吐司吗？

那么你肯定会得到一个无效的结果，因为正则表达式需要 URL 周围的空格。如果您想修剪无效结果，则需要使用可以处理重定向的链接检查器来验证您找到的每个链接。

### 作者的免责声明

您发布的代码是我的，来自[CodeGnome/twitter_url_extractor](https://github.com/CodeGnome/twitter_url_extractor)。我故意省略了链接检查，因为我对提取 URL 感兴趣，而不是验证它们。

“它对我有用；您的里程可能会有所不同。”℠

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T19:26:09.747

与其重新发明轮子，不如使用 Ruby 的[URI.extract](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI.html#method-c-extract)？它与 Ruby 捆绑在一起。

从文档中：

```
概要

URI::extract(str[, scheme][,&blk])

精氨酸

str 要从中提取 URI 的字符串。
方案 将 URI 匹配限制为特定方案。

描述

从字符串中提取 URI。如果给出块，则遍历所有匹配的 URI。如果给定块或匹配的数组，则返回 nil。
用法

需要“uri”

URI.extract("这里是 http://foo.example.org/bla 和这里是 mailto:test@example.com 和这里也是。")
# => ["http://foo.example.com/bla", "mailto:test@example.com"]

```

如果您只想要 HTTP URL：

```
[3] (pry) main: 0> URI.extract("这里是 http://foo.example.org/bla 和这里是 mailto:test@example.com 和这里也是。", %w[http])
=> [“http://foo.example.org/bla”]

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T18:59:56.050

问题是您的正则表达式将包含一个尾随句点，因为您不加选择地检查单词字符、斜杠、百分号、连字符（又名“减号”）**和句**点的任意序列。这将捕获一个尾随句点，当 URL 位于句子末尾时，它实际上是标点符号，并且，如果人们省略句点后面的空格，则后面的任何内容 -[正如 CodeGnome 正确指出的那样](https://stackoverflow.com/a/10788022/990363)。您可以通过像这样排除尾随标点符号来部分缓解此问题（请注意，这仍然会捕获标点符号，然后是非 URL 内容）：

```
http://\w+(?:[./%-]\w+)+$ 
```

但是，这仍然会遗漏大部分现有 URL 并捕获大量无效内容：[URL 是相当复杂的野兽](http://www.w3.org/Addressing/URL/)。如果你想要一个完美的匹配，John Gruber 发布[了一个正则表达式](http://daringfireball.net/2010/07/improved_regex_for_matching_urls)，它匹配今天用作 URL 的任何内容，而不仅仅是 http(s) 的。为了更紧密地匹配大量纯网络 URL，包括 HTTPS 变体，确保您在开始时有一个格式良好的域，并捕获查询和片段标识符，正则表达式应该如下所示：

```
https?://[\w-]+(?:\.[\w-]+)+(?:/[\w-]+)*(?:(?:[./%?=&#-]\w+)+)? 
```

– 这仍然会捕获无效内容，并排除相当多的现有 URL（以及更大比例的有效 URL – 请参阅我上面链接到的 RFC），但它会让您更接近。

# java - 比较数据库中的图像

> ID：10785956
> 
> 赞同：1
> 
> 时间：2012-05-28T14:06:06.587
> 
> 标签：java, database, image

我从图像中获取 25 个样本，获取它们的平均 rgb 值并将它们保存在 5x5 颜色数组中。这些是我的“签名”。签名中的值如下所示：

```
Color signature[5][5];

-21233 -1 -323211 ... ...
-123 -12323 ...  
... 
```

我可以从签名的索引中获得红色、蓝色和绿色值。我使用这些值来比较两个图像的签名并获得“差异”值。

```
signature[1][1].getBlue() = 123, Color[1][1].getRed() = 200 ..

for (int x = 0; x < 5; x++) {   
        for (int y = 0;y < 5; y++) {
            int r1 = signature[x][y].getRed();
            int g1 = signature[x][y].getGreen();
            int b1 = signature[x][y].getBlue();
            int r2 = signature2[x][y].getRed();
            int g2 = signature2[x][y].getGreen();
            int b2 = signature2[x][y].getBlue();
            double tempDiff =  Math.sqrt((r1 - r2) * (r1 - r2) 
                                       + (g1 - g2) * (g1 - g2) 
                                       + (b1 - b2) * (b1 - b2));
            difference += tempDiff;
        }
 } 
```

我还获得了图像的第二个签名，显示了它们边缘找到的版本的签名。比较两张图像，我将正常特征差异与边缘特征差异相乘，得到最终的差异值。

在比较两张图像时，一切都很好。但是，我得到了很多图像，所以我将签名保存在数据库中，如下所示：

```
Table images:
-COLUMN name-       -COLUMN signature-             -COLUMN edge signature-
myimg.jpg  |-12312 -132 -2 ... (25 of them) |-123 -1 -1234 -6921 .. (25 of them)| 
```

我只是将签名索引与它们之间的空格连接起来并保存为字符串。

这是我的问题：我需要找到一张图片的相似之处。如果我从数据库中选择所有图像，事情会变得非常缓慢并且我的内存不足。我可以从数据库中选择 1000 张图像，比较并获取下 1000 张，但这甚至更慢。

我需要一种方法来比较查询中的图像签名，我准备好更改我的表的列，甚至准备尝试具有 100 列包含签名的所有 RGB 值的疯狂表。我需要减少或散列签名。您可以建议任何方法/方法、链接或库吗？任何帮助，将不胜感激。

如果需要，我在 NetBeans 上使用 Java，与 MySQL 一起工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:37:12.943

散列很可能不起作用，因为您正在搜索相似而不是相同的图像。即使您将相似的图像映射到同一个键，它也不会起作用，因为“相似”关系不是基于您对比较函数的定义的传递（A 类似于 B，B 类似于 C，但 C 可能不类似于 A ）。

我唯一能想到的就是像你说的那样存储在 25 * 3 列中。您可以编写 SQL 语句以仅选择**可能**通过距离测试的图像（如果差异已经大于阈值，则将其过滤掉）。如果数据库中的图像不太相似，则此方法应该可以正常工作。但是，如果数据库中的图像彼此非常相似，则此方法很糟糕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:45:58.913

您可以使用 SQL 来执行此操作。

如果您想查找所有重复项，您可以使用类似这样的内容（替换正确的字段名称）

```
SELECT i.[name] FROM images i 
  INNER JOIN 
     (SELECT signature, edge_signature 
          FROM images
           GROUP BY signature, edge_signature
            HAVING COUNT(*) > 1 ) dups
   on i.signature = dups.signature and i.edge_signature = dups.edge_signature; 
```

如果要查找特定图像的重复项，请创建签名并将它们放入此 SQL

```
SELECT i.[name]
  FROM images
    WHERE signature = '$yourCalculatedSignaturehere'
    and edge_signature = '$yourCalculatedEdgeSignaturehere'; 
```

这两个查询都可能返回多行（如果没有重复，则返回 0 行）。

您可以使用索引来加速这些查询`signature, edge_signature, [name]` （该索引可能会使您的表使用的磁盘空间增加一倍，但它应该会显着提高查询的性能）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T07:55:59.510

在看到我们需要 150 列之后，想到了两种方法：

1.  根据逻辑减少列数。
2.  使用感知散列（散列，其中接近的散列值表示接近的散列前值）

然而，在一个丑陋而混乱的实现之后，代码运行得很好。我所做的只是使用 SQL 查询在问题中进行计算，并从数据库中获取最相似的 50 张图片。得到结果后，我稍微整理了一下代码，它运行良好且快速。

因此，我们认为没有真正需要实施上述方法，因为它们会降低发现相似性的成功率，而且我们不需要更快。我们得到了最好的 50 个结果，因此内存复杂性也不是问题。

对于所有在项目中的“Java 部分”（或任何其他“代码”部分）中存在速度或内存问题的人，我强烈建议将尽可能多的工作转移到“数据库部分”并通过查询完成工作.

# c# - 一次读取一个字符时检测换行符

> ID：10785960
> 
> 赞同：1
> 
> 时间：2012-05-28T14:06:16.230
> 
> 标签：c#

目标文件：

```
Hello
World 
```

代码：

```
if (file != null)
{
    //Read file one character at a time
    StreamReader reader;
    reader = new StreamReader(file);
    do
    {
        int s = reader.Read();
        char sC = (char)s;
        if (sC.Equals(Environment.NewLine))
        {
            Console.WriteLine("+1");
        }
        Console.WriteLine((char)s);
    } while (!reader.EndOfStream);
    reader.Close();
    reader.Dispose();
} 
```

输出：

```
H
e
l
l
o

W
o
r
l
d 
```

因此`(sC.Equals(Environment.NewLine))`，一次读取一个字符时显然没有检测到与平台无关的换行符..我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T14:09:16.987

试试这个

```
if (sC.Equals('\n')) 
```

如果您确定总会有一个`\r`，那么您可以用另一个电话`\n`吞下它。`reader.Read();`例子：

```
if (sC.Equals('\n')) {
   reader.Read()
   Console.WriteLine("+1");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T14:11:38.530

这是因为`Environment.NewLine`它是`String`由`\r\n`（取决于您的环境，在 Windows 平台上它是`\r\n`）组成的 - 它们是回车符和换行符 - 它是通常定义*新行*的一对。

所以比较一个字符（可以是`\n`或`\r`）`\r\n`总是会产生`false`

相反，正如@jurgen d 的回答中提到的，尝试比较`\n`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T14:13:08.520

`Environment.NewLine`实际上是两个字符：\r\n

你真的需要一次读一个字符吗？您不喜欢使用 a[`StringReader`](http://msdn.microsoft.com/en-us/library/system.io.stringreader.aspx)并使用 ReadLine() 吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-08T15:34:28.663

删除的简单方法\n\r

```
 String text = "test\n\r";
        if (text[text.Length - 1] == 10 && text[text.Length - 2] == 13)
            text= text.Substring(0, text.Length - 2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-11T16:44:12.950

用这个-

```
if (sC.Equals('\r')) 
```

在您的情况下，因为 '\r' 出现在 '\n' 之前。

# windows-phone-7 - windows phone 可以覆盖屏幕锁定按钮吗？

> ID：10785968
> 
> 赞同：0
> 
> 时间：2012-05-28T14:06:31.280
> 
> 标签：windows-phone-7

有没有办法覆盖 Windows Phone 应用程序中的屏幕锁定按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:18:35.100

不，这是不可能的。你为什么想做这个？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:47:25.363

在代码中只有一个硬件按钮可以与之交互，那就是后退按钮。

虽然无法阻止用户锁定他们的手机，但您可以让您的应用程序在锁定屏幕下运行，或者在您的应用程序运行期间不活动后停止设备进入锁定屏幕模式。
请参阅[http://msdn.microsoft.com/en-us/library/ff941090(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/ff941090(v=vs.92).aspx)

# c# - 在 .NET 中将套接字发送/接收超时设置为小于 500 毫秒

> ID：10785971
> 
> 赞同：7
> 
> 时间：2012-05-28T14:06:36.257
> 
> 标签：c#, .net, sockets

根据 MSDN 文档，无法将 Socket.SendTimeout 设置为小于 500 毫秒的值：http: [//msdn.microsoft.com/en-us/library/system.net.sockets.socket.sendtimeout](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.sendtimeout)相同的规则适用于Socket.ReceiveTimeout（即使在 MSDN 文档中没有提到，这是真的，因为这两种情况都经过了实际测试）。

例如，如果完成套接字接收操作的时间超过 10 毫秒，是否还有其他方法可以使套接字接收操作超时？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-29T02:27:37.290

简单的答案是“你没有”。

`Send()`并且`Receive()`调用会阻塞程序的流程，直到数据被发送、接收或发生错误。

如果您想对呼叫进行更多控制，可以使用多种机制。最简单的就是使用`Poll()`.

```
Socket s;
// ...
// Poll the socket for reception with a 10 ms timeout.
if (s.Poll(10000, SelectMode.SelectRead))
{
    s.Receive(); // This call will not block
}
else
{
    // Timed out
} 
```

您也可以使用`Select()`,`BeginReceive()`或`ReceiveAsync()`其他类型的行为。

我建议您阅读 Stevens 的 UNIX Network Programming 第 6 章和第 16 章，以获取有关非阻塞套接字使用的更深入信息。尽管本书的名称中有 UNIX，但 UNIX 和 Windows（以及 .net）中的整体套接字架构本质上是相同的

# android - 探索Android在命令行中嵌入SQLite

> ID：10785982
> 
> 赞同：1
> 
> 时间：2012-05-28T14:07:11.000
> 
> 标签：android, sqlite

我正在尝试在命令行中探索 Android 嵌入式 SQLite 数据库。

我的 Android 模拟器已经创建了一个名为“notebase2”的数据库（参见屏幕截图），但命令行中的结果并未反映这一点。

屏幕截图显示了我的 Ubuntu 终端的一部分，它位于我的 Exclipse DDMS 透视图的文件资源管理器视图中。

![在此处输入图像描述](../Images/d2d85204409c223df560853b28baef21.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T14:09:54.897

`.databases`列出附加的数据库。您尚未打开或附加任何数据库。试试这个：

```
sqlite3 /data/data/your.applications.package/databases/notebase2 
```

# android - 无法通过代理从 Internet 下载文件

> ID：10785986
> 
> 赞同：1
> 
> 时间：2012-05-28T14:07:22.340
> 
> 标签：android, proxy, download

我的应用程序访问互联网以从给定链接下载文件。我正在使用我研究所的互联网连接，它使用代理设置。

为了让我的应用程序能够从 Internet 下载文件，我需要打开我的 Internet 浏览器，提供连接的用户名和密码并保持浏览器运行，只有这样我的应用程序才能下载完整的文件，如果我不这样做做这些事情我的应用程序正常运行并在所需位置创建一个文件，但显示文件大小为零，这很可能是因为它无法直接连接到互联网。

如果无法连接到互联网，如何让我的应用程序向我显示一个对话框，询问用户名和密码以连接到互联网。

谢谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:25:30.497

当您创建将通过其实现文件传输的连接对象时，您必须指定您正在使用代理所期望的任何形式的身份验证凭据。我不知道你会在 Java for Android 中做什么，但在 .NET 中我会这样做：

```
 LogHandler.Log(LogHandler.LogType.Debug, "Configure proxy credentials");

  // Proxy address and port
  ec2Config.ProxyHost = ConfigurationManager.AppSettings["LocalProxyHost"];
  ec2Config.ProxyPort = Convert.ToInt32(ConfigurationManager.AppSettings["LocalProxyPort"]);

  // Create a dummy webrequest so we can set proxy credentials (to stop the proxy spitting 407s at us)
  HttpWebRequest dummyRequest = (HttpWebRequest)WebRequest.Create(ec2Config.ServiceURL);
  dummyRequest.Proxy.Credentials = CredentialCache.DefaultCredentials;

  #pragma warning disable 168
  HttpWebResponse myHttpWebResponse = (HttpWebResponse)dummyRequest.GetResponse();
  #pragma warning restore 168 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:56:37.077

我开发了这个逻辑，它需要做很多工作，但它有助于我检测是否存在其他问题，如代理或其他问题，因为普通的互联网连接管理器无法检测是否需要身份验证。

```
 final ConnectivityManager conMgr =  (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
  final NetworkInfo activeNetwork = conMgr.getActiveNetworkInfo();

            if (activeNetwork != null && activeNetwork.getState() == NetworkInfo.State.CONNECTED) {

                            //Do what ever you wish to do

                            } else {
                                  // Display message internet connection not available
                                  } 
```

上面的代码提供了有关互联网连接是否可用的信息，但它不知道互联网连接是否需要身份验证，因此在检查上述条件后，我尝试访问下载链接，然后使用此逻辑。

这个stackoverflow查询中提到了我使用的逻辑（[如果互联网需要身份验证才能实际连接才能下载？](https://stackoverflow.com/questions/10844543/if-internet-requires-authentication-for-actually-connecting-to-be-able-to-downlo/10912354#10912354)）....希望这些信息对有需要的人有所帮助。

# java - 字符串上一个最后一个索引

> ID：10785987
> 
> 赞同：7
> 
> 时间：2012-05-28T14:07:25.670
> 
> 标签：java, csv

有没有一种简单的方法来获取字符串的倒数第二个分隔子字符串？

```
String original = "/1/6/P_55/T_140"; 
```

在此示例中，生成的子字符串将是`"P_55/T_140"`

我想在这个子字符串（`/`）的开头找到正斜杠的索引

我知道`String.lastIndexOf()`打两次电话会有帮助。但是寻找一种通用的更清洁的方法。也许对任何 N。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-28T14:10:16.690

> 但是寻找一种通用的更清洁的方法。也许对任何 N。

循环调用`String.lastIndexOf(int,int)`将非常有效，并且可以说非常干净：

```
 int pos = str.length();
    for (int i = 0; i < n; i++) {
        pos = str.lastIndexOf('/', pos - 1);
    }
    String out = str.substring(pos + 1); 
```

这可以很容易地变成一个辅助函数，接受`str`、`'/'`和`n`、和返回`out`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-04T18:07:54.757

获取媒体文件所在的文件夹名称

/storage/emulated/0/WhatsApp/Media/WhatsApp Video/VID-20170812-WA0000.mp4

使用下面的代码

```
String folderName = filePath.substring(filePath.lastIndexOf('/',filePath.lastIndexOf('/')-1),filePath.lastIndexOf('/')); 
```

将文件夹名称返回为“whatsApp Video”

# ipad - iPad模拟器+打开/关闭互联网

> ID：10785989
> 
> 赞同：7
> 
> 时间：2012-05-28T14:07:30.513
> 
> 标签：ipad, ios-simulator

我正在开发一个需要在在线/离线模式下测试的应用程序，所以我想知道是否有任何方法可以打开/关闭 iPad 模拟器的互联网连接（不关闭我的 MAC 的互联网服务）。请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T14:09:12.113

不，模拟器使用与你的 mac 相同的连接。所以你不能为模拟器手动关闭它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:11:51.137

完全禁用模拟器网络访问的唯一方法是拔下 Mac 的网络连接（或关闭 Wi-Fi），因为模拟器只是在 Mac 上运行的一个进程。

但是，大多数情况下，阻止对某些资源的访问就足够了，例如您的应用程序使用的任何 Internet 服务。诸如[Charles](https://www.charlesproxy.com)或[Proxyman 之](https://proxyman.io)类的代理服务器将允许您这样做，因此您可以测试您的应用程序无法访问您的服务器的情况。代理服务器对于调试网络问题、模拟特定服务器响应等也非常有用。

# ruby - Ruby 守护程序中的错误文件描述符

> ID：10785992
> 
> 赞同：7
> 
> 时间：2012-05-28T14:07:41.000
> 
> 标签：ruby, daemons

在 Mac OS X Lion 上使用 Ruby v1.8.7 和 Daemons v1.1.8，我正在尝试编写一个消费者进程并让它作为一个守护进程运行：

```
# config[:name] => 'idx_my_delete_consumer'
# config[:daemon] => {:multiple => false,
# :backtrace => true,
# :dir_mode => :normal,
# :log_dir => '/Users/pprakash/consumer.log',
# :monitor => true,
# :dir => '/Users/pprakash/pids'}

 Daemons.run_proc(config[:name], config[:daemon]) 做
    消费者 = MyConsumer.new(config)  
    消费者订阅
  结尾

```

然而，它并没有启动，而是抛出了一个很长的回溯，如下所示：

```
E, [2012-05-28T19:34:16.199770 #29357] 错误 -- : 错误的文件描述符 (Errno::EBADF)
/opt/local/lib/ruby/gems/1.8/gems/daemons-1.1.8/lib/daemons/daemonize.rb:134:in `for_fd'
/opt/local/lib/ruby/gems/1.8/gems/daemons-1.1.8/lib/daemons/daemonize.rb:134:in `close_io'
/opt/local/lib/ruby/gems/1.8/gems/daemons-1.1.8/lib/daemons/daemonize.rb:134:in `initialize'
/opt/local/lib/ruby/gems/1.8/gems/daemons-1.1.8/lib/daemons/daemonize.rb:134:in `new'
/opt/local/lib/ruby/gems/1.8/gems/daemons-1.1.8/lib/daemons/daemonize.rb:134:in `close_io'
/opt/local/lib/ruby/gems/1.8/gems/daemons-1.1.8/lib/daemons/daemonize.rb:75:in `call_as_daemon'
/opt/local/lib/ruby/gems/1.8/gems/daemons-1.1.8/lib/daemons/application.rb:258:in `start_proc'
/opt/local/lib/ruby/gems/1.8/gems/daemons-1.1.8/lib/daemons/application.rb:295:in `start'
/opt/local/lib/ruby/gems/1.8/gems/daemons-1.1.8/lib/daemons/monitor.rb:51:in `watch'
/opt/local/lib/ruby/gems/1.8/gems/daemons-1.1.8/lib/daemons/monitor.rb:51:in `fork'
/opt/local/lib/ruby/gems/1.8/gems/daemons-1.1.8/lib/daemons/monitor.rb:51:in `watch'
/opt/local/lib/ruby/gems/1.8/gems/daemons-1.1.8/lib/daemons/monitor.rb:45:in `each'
/opt/local/lib/ruby/gems/1.8/gems/daemons-1.1.8/lib/daemons/monitor.rb:45:in `watch'
/opt/local/lib/ruby/gems/1.8/gems/daemons-1.1.8/lib/daemons/monitor.rb:44:in `loop'
/opt/local/lib/ruby/gems/1.8/gems/daemons-1.1.8/lib/daemons/monitor.rb:44:in `watch'
/opt/local/lib/ruby/gems/1.8/gems/daemons-1.1.8/lib/daemons/monitor.rb:84:in `start_with_pidfile'
/opt/local/lib/ruby/gems/1.8/gems/daemons-1.1.8/lib/daemons/monitor.rb:64:in `fork'
/opt/local/lib/ruby/gems/1.8/gems/daemons-1.1.8/lib/daemons/monitor.rb:64:in `start_with_pidfile'
/opt/local/lib/ruby/gems/1.8/gems/daemons-1.1.8/lib/daemons/monitor.rb:111:in `start'
/opt/local/lib/ruby/gems/1.8/gems/daemons-1.1.8/lib/daemons/application_group.rb:149:in `create_monitor'
/opt/local/lib/ruby/gems/1.8/gems/daemons-1.1.8/lib/daemons/application.rb:284:in `start'
/opt/local/lib/ruby/gems/1.8/gems/daemons-1.1.8/lib/daemons/controller.rb:70:in `run'
/opt/local/lib/ruby/gems/1.8/gems/daemons-1.1.8/lib/daemons.rb:197:in `run_proc'
/opt/local/lib/ruby/gems/1.8/gems/daemons-1.1.8/lib/daemons/cmdline.rb:109:in `call'
/opt/local/lib/ruby/gems/1.8/gems/daemons-1.1.8/lib/daemons/cmdline.rb:109:in `catch_exceptions'
/opt/local/lib/ruby/gems/1.8/gems/daemons-1.1.8/lib/daemons.rb:196:in `run_proc'
用户/delete_consumer.rb:40

```

我不确定是什么导致了这个问题？目录名、日志文件名都有效。我能够使用这些配置创建 MyConsumer 的实例，并能够从独立程序/控制台正确执行其#subscribe。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T08:05:41.443

根据我使用 Ruby 守护程序的经验，我发现此类错误表明底层块（被守护程序）包含错误。修复这些错误也修复了这个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:56:17.670

您的示例中确实有可能导致错误的拼写错误。检查 MyConsumer 的拼写，您将 s 和 n 调换了...

```
consumer = MyCosnumer.new(config) 
```

# vb.net - VB.NET - app.config 还是什么？

> ID：10785994
> 
> 赞同：1
> 
> 时间：2012-05-28T14:07:51.613
> 
> 标签：vb.net, app-config

假设我想为我的客户提供一个 VB.NET 程序，该客户在技术上倾向于但不想编写太多代码。我希望他能够更改/设置一些变量的值。我可以将这些变量放在 app.config 中。

然后，他会将这些信息传递给技术上不如他的其他人。他根本不希望这些人改变这些价值观！也许他们也不应该能够查看它们，但是查看是可以接受的，改变这些值是不行的！如果他们完全篡改了值，程序应该会中断。

那么我应该如何在不问他的情况下将程序传递给他

如何完成这样的事情？我还想确保他不必向他的人提供大量文件。如何将它们捆绑在一起（使用 Visual Studio/Basic 2010 的快捷版）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T17:17:23.990

我不知道这是否是最好的方法，但是肯定会起作用的方法是拥有一个包含所有设置的二进制文件，以及一个使其易于编辑的工具，您可以提供给你的客户，而不是其他人......

# java - tailmap 方法如何从输入 treemap 中获取 sortedmap？

> ID：10785996
> 
> 赞同：1
> 
> 时间：2012-05-28T14:07:52.060
> 
> 标签：java

treemap 有一个方法tailmap 来获取一个sortedmap，它的key 不小于fromkey。跟踪源码发现tailmap在NavigableSubMap的construct方法中完成了工作。这是代码。

```
NavigableSubMap(TreeMap<K,V> m,
                        boolean fromStart, K lo, boolean loInclusive,
                        boolean toEnd,     K hi, boolean hiInclusive) {
            if (!fromStart && !toEnd) {
                if (m.compare(lo, hi) > 0)
                    throw new IllegalArgumentException("fromKey > toKey");
            } else {
                if (!fromStart) // type check
                    m.compare(lo, lo);
                if (!toEnd)
                    m.compare(hi, hi);
            }

            this.m = m;
            this.fromStart = fromStart;
            this.lo = lo;
            this.loInclusive = loInclusive;
            this.toEnd = toEnd;
            this.hi = hi;
            this.hiInclusive = hiInclusive;
        } 
```

在 this.toEnd = toEnd 的步骤之后；NavigableSubMap 类有尾地图。它是如何完成的？