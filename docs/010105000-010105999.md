# StackOverflow 问答 10105000-10105999

# python - IndexError：narray：索引超出范围（使用 Ocropus 时）

> ID：10105000
> 
> 赞同：0
> 
> 时间：2012-04-11T11:28:08.330
> 
> 标签：python, ubuntu

我正在使用 ocropus 来对未分割的图像进行二值化和分割。我使用命令通过 ocropus 将图像文件二值化为

`ocropus-binarize -o book /home/images/*.tif`

通过使用上面提到的命令，它可以很好地处理一些图像，但一段时间后它会提示一条错误消息，如下所示，

```
File "/usr/local/bin/ocropus-binarize", line 151, in <module>
   result = pool.map(process1, jobs)
File "/usr/lib/python2.7/multiprocessing/pool.py"
   return self.map_async(func, iterable, chunksize).get()
File "/usr/lib/python2.7/multiprocessing/pool.py", line 517, in get
   raise self._value
IndexError: narray: index out of range 
```

任何有关此事的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T20:05:30.123

此答案与 OCRopus 无关，但通常与此错误有关，以供将来的谷歌搜索使用。

多处理模块将工作分成块并将每个块发送到工作进程。工作在如下所示的块中执行：

```
try:
    result = (True, func(*args, **kwds))
except Exception, e:
    result = (False, e) 
```

where `func()`is `apply()`or`map()`取决于你是否使用`pool.apply()`or`pool.map()`并且 args 和 kwds 包含你想要运行的函数和你想要运行它的数据。

如果您的函数引发异常，而不是直接排除工作进程，该错误将作为结果元组传递回管理所有工作人员的进程。主进程看到这一点（在上面报告的 multiprocessing.py:517 上，这取决于 Python 版本）并从您的函数中重新引发原始异常。

这是*您的*函数中的错误，可能在单个数据上。不幸的是，没有报告原始异常的行号，这使得调试有点棘手。

# iphone - iphone应用程序是否存在于我们的设备中？不适用于 iPod / iPhone 设备，仅适用于模拟器。

> ID：10105001
> 
> 赞同：1
> 
> 时间：2012-04-11T11:28:13.953
> 
> 标签：iphone, objective-c, ios4, app-store, ios-simulator

要知道给定设备上安装了哪些应用程序，我遵循以下方式。

[如何确定我们的设备中是否存在 iphone 应用程序（上一个/下一个版本）？](https://stackoverflow.com/questions/10100713/how-to-determine-whether-an-iphone-app-previous-next-version-is-existed-in-ou)

这可以完美地找到安装在***SIMULATOR中的应用程序（用户应用程序和系统应用程序）。***

***但在我原来的设备 iPod/iPhone 中找不到。***

为什么以及如何为设备纠正它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:09:31.830

没有办法在**非越狱设备**上实现这一点。

有一种方法（确实是一种解决方法）可以检测您自己的应用程序（如果它们注册）`custom url`：方法在此处描述：[如何检测已安装的 iOS 应用程序](http://amitay.us/blog/files/how_to_detect_installed_ios_apps.php)

编辑：如果您决定采用这种方式，您可以在此处了解如何注册自定义 URL：

[注册自定义 URL 方案](http://iphonedevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)

[Objective-C：自定义 URL 方案](http://www.idev101.com/code/Objective-C/custom_url_schemes.html)

**编辑**：附加信息后：您想检查您的应用程序是否已安装并且此应用程序注册了`paintplus`URL 方案

您可以使用此方法（在您的其他应用程序中）检查是否`paintplus`已安装：

```
- (BOOL) paintplusInstalledOnThisDevice {

  UIApplication *app = [UIApplication sharedApplication];  
  NSURL *paintplusURL = [NSURL URLWithString: @"paintplus://"];
  return [app canOpenURL: paintplusURL];
} 
```

# ruby-on-rails-3 - 为什么 Factory Girl 不让我创建一个带有大括号的序列？

> ID：10105002
> 
> 赞同：1
> 
> 时间：2012-04-11T11:28:14.397
> 
> 标签：ruby-on-rails-3, factory-bot

```
FactoryGirl.define do
  sequence :email do |n|
    "user#{n}@example.com"
  end

  factory :user do
    email {FactoryGirl.generate :email}
    password "abc"
    admin false
  end
end 
```

工作得很好，但如果我这样做

```
FactoryGirl.define do
  sequence :email {|n| "user#{n}@example.com"}

  factory :user do
    email {FactoryGirl.generate :email}
    password "abc"
    admin false
  end
end 
```

我收到以下错误

```
/Users/brad/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/activesupport-3.0.10/lib/active_support/dependencies.rb:235:in `load': /Users/brad/Ruby_Rails/acute_pain/spec/factories.rb:2: syntax error, unexpected '{', expecting keyword_end (SyntaxError)
  sequence :email {|n| "user#{n}@example.com"}
                   ^ 
```

哇哦？

我正在使用 Factory Girl 3.1.0 和 Rails 3.0.10。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:42:05.033

注意参数！:)

```
sequence(:email) {|n| "user#{n}@example.com"} 
```

# lotus-notes - 使用 Xpages 在 Web 应用程序中注册用户

> ID：10105008
> 
> 赞同：2
> 
> 时间：2012-04-11T11:29:02.910
> 
> 标签：lotus-notes, xpages, lotus-domino

我已经搜索了“everywhereE”并且关于这个主题的信息非常少，所以我想我会问专业人士，每个像我这样的人都可以受益。无论如何，我正在构建一个应用程序，它需要用户注册才能创建文档并通过应用程序进行各种操作。现在用户注册不应该是新的和看不见的，我需要正确或最好的方式或任何你处理用户注册的方式。当用户输入数据并按下注册时，他们应该会收到包含确认其注册的链接的自动电子邮件，并且当他们登录应用程序时，他们将拥有分配给用户组的权限，例如称为“基本用户” . 另外，忘记密码选项？

您如何进行基本的用户注册处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T12:03:09.223

这个 OpenNTF 项目还有一个用户自行注册：[http ://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=LotusPeople](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=LotusPeople)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T15:57:10.323

我关于从 Facebook 注册用户的博文可能会有一些用处…… [http://mattwhite.me/blog/2010/10/20/how-to-get-sso-for-facebook-working-with-xpages。 html](http://mattwhite.me/blog/2010/10/20/how-to-get-sso-for-facebook-working-with-xpages.html)

马特

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T03:19:58.290

我还采用了 OpenNtf 项目进行自我注册（来自 younotes）并对其进行了一些更改。它工作得很好。

# android - 如何为首次启动应用程序（Android）创建“如何使用”屏幕（如 Go 启动器）

> ID：10105012
> 
> 赞同：0
> 
> 时间：2012-04-11T11:29:15.910
> 
> 标签：android, screen

我只想添加一个屏幕帮助，就像在 Go Launcher 中一样。屏幕仅在应用程序第一次在手机中启动时加载，并且不透明度低，可引导用户如何使用带有通知的箭头和文本的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:23:41.333

您可以在应用首选项中保存一个标志。

当您的应用程序第一次启动时，设置标志并将其保存在首选项中。在启动时检查此标志，您可以决定显示或隐藏您的屏幕。

一些不错的教程：

[http://www.vogella.de/articles/Android/article.html](http://www.vogella.de/articles/Android/article.html)

# cocoa - 保存数据 iphone

> ID：10105013
> 
> 赞同：0
> 
> 时间：2012-04-11T11:29:19.320
> 
> 标签：cocoa

在我的应用程序中，人们可以阅读新闻消息并添加反应等。文章从 JSON/XML 加载到 UITableview 中。

我想制作一个名为“收藏夹”的新 UITableviewController，其想法是在每篇文章下方放置一个按钮，以将消息保存到应用程序中的“收藏夹”中。

有谁知道这是怎么做到的吗？我只需要一些提示！我需要将数据保存在 .plist 中还是需要使用 userdefaults？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:32:10.810

你绝对可以做到这一点。

对我来说，plist 保存/加载大多数时候更容易，但这只是个人喜好问题：

```
NSMutableArray* favorites = [[NSMutableArray alloc] initWithContentsOfFile:filename]; 
```

# constraints - “约束”和“必需”属性的 XForms 关系

> ID：10105016
> 
> 赞同：2
> 
> 时间：2012-04-11T11:29:25.340
> 
> 标签：constraints, orbeon, xforms, required

作为参考，已经问过的最相似的问题是：https [://stackoverflow.com/questions/8667849/making-xforms-enforce-the-constraint-and-type-model-item-properties-only-when-fi](https://stackoverflow.com/questions/8667849/making-xforms-enforce-the-constraint-and-type-model-item-properties-only-when-fi "使 XForms 仅在填充字段时强制执行约束和类型模型项属性")不同之处在于我不能使用“相关”属性，因为我确实希望该字段可见且可访问。

我正在尝试制作一个具有以下属性的 XForms 表单：

1.  它显示一个名为“信息”的文本字段。（例如）
2.  此字段不得为**必填项**，因为可能不需要输入数据。（或者此数据将在以后输入。）
3.  但是，如果在此字段中输入数据，则必须遵守指定的**约束**。
4.  我无法将该字段标记为不**相关**，因为这会隐藏该字段并且可能需要在其中输入一些数据。

现在的问题是即使该字段中没有数据，约束仍然被强制执行（即即使它没有被标记为“必需”）。

我查看了[XForms 1.1 规范](http://www.w3.org/TR/2009/REC-xforms-20091020/#model-prop-constraint "XForms 1.1 属性：约束")，但是它似乎没有描述属性“必需”和“约束”应该如何交互。

我看到的唯一选择是将一部分添加到约束中，以便允许空值。例如：

> . = '' 或 <实际约束>

然而，我不喜欢这样。将其添加到每个此类字段中感觉像是一种解决方法。

有没有其他方法可以表达非必填字段不需要匹配该字段的约束？（我错过了什么吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:58:08.413

在 XForms 1.1 中，`required`有两个目的：

1.  根据需要标记该字段（实现可以设置控件样式以反映这一点，例如使用“*”）
2.  参与验证过程

后者在[4.3.3 xforms-revalidate 事件](http://www.w3.org/TR/xforms11/#evt-revalidate)中描述。

> 当且仅当以下条件成立时，实例节点才有效：

条件之一是：

> 如果所需的模型项属性为 true，则该值为非空

因此`and`，影响验证的所有方面之间都是合乎逻辑的。

我可以看到事情可能会有所不同，例如说`required="false()"`可能会禁用其余的验证。然而，这不是 XForms 采用的方法。

基于此，作为约束的一部分检查空虚并没有错。

XForms 2.0 可能会添加自定义 XPath 函数，这可能有助于逻辑的重用：

```
<bind ref="information" constraint="my:constraint(.)"> 
```

此外，如果约束可以用一种类型来表示，那么您可以使用[XForms 名称空间中的一种模式类型](http://www.w3.org/TR/xforms/#empty-content-types)，它允许空值有效。例如`xforms:double`认为空字符串和`42`是有效值，但不是`gaga`。

# jquery - jQuery ajax 加载状态消息

> ID：10105018
> 
> 赞同：0
> 
> 时间：2012-04-11T11:29:39.030
> 
> 标签：jquery

```
$.ajax({
                type: "POST",
                url: "Services/Services.asmx/GetAllDoctors",
                data: "{}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    for (var i = 0; i < data.d.length; i++) {
                        var centerAddress = CreateAddressToBind(data.d[i]);
                        doctorTemplates[i] = { row_ID: data.d[i].row_ID, DOCTOR_ID: data.d[i].DOCTOR_ID, DOCTOR_NAME: data.d[i].DOCTOR_NAME, LINE1_BLDG: data.d[i].LINE1_BLDG, LINE2_STREET: data.d[i].LINE2_STREET, LINE3_AREA: data.d[i].LINE3_AREA, CITY: data.d[i].CITY, PINCODE: data.d[i].PINCODE, MEDICALCENTER_ADDRESS: data.d[i].MEDICALCENTER_ADDRESS, STATE: data.d[i].PINCODE, OTHER_DETAILS: data.d[i].OTHER_DETAILS, CONTACT_DETAILS: data.d[i].CONTACT_DETAILS, modified: 0 }
                        $("#doctorTable").append("<tr id='tableRow'><td id='rowid' class='hiddenColumn'>" + data.d[i].row_ID.toString() + "</td><td id='doctorid'>" + data.d[i].DOCTOR_ID.toString() + "</td><td id='doctorname'>" + data.d[i].DOCTOR_NAME.toString() + "</td><td id='centerAddress'>" + data.d[i].MEDICALCENTER_ADDRESS.toString() + "</td><td id='doctorAddress'>" + data.d[i].LINE1_BLDG.toString() + "," + data.d[i].LINE2_STREET.toString() + "," + data.d[i].LINE3_AREA.toString() + "," + data.d[i].CITY.toString() + "," + data.d[i].PINCODE.toString() + "," + data.d[i].STATE.toString() + "</td><td id='cdetails'>" + data.d[i].CONTACT_DETAILS.toString() + "</td><td id='odetails'>" + data.d[i].OTHER_DETAILS.toString() + "</td><td><a href='#' onclick='EditRecord(this)'>Edit</a></td><td><a href='#' onclick='DeleteRecord(this)'>Delete</a></td><td class='modified'>0</td></tr>");
                    }
                    $("#doctorTable").dataTable();
                }
            }); 
```

如何在加载内容时显示 ajax 状态消息加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:31:16.810

只需在发送请求之前在您要更新的选择器中提供一些 html 消息。像这样

```
$("#doctorTable").text("loading");
$.ajax(....); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T11:33:29.463

尝试：

```
 $('#doctorTable')
    .hide()  // hide it initially
    .ajaxStart(function() {
        $(this).show();
    })
    .ajaxStop(function() {
        $(this).hide();
    }); 
```

# java - Play Framework 2.0 中的动态模板

> ID：10105022
> 
> 赞同：3
> 
> 时间：2012-04-11T11:30:04.407
> 
> 标签：java, scala, dynamic, playframework-2.0

在运行时生成模板`TemplateLoader`。`Play 1.0`

有什么解决方案可以动态加载模板`Play 2.0`吗？或者我可以以某种方式将其转换为 scala 代码以供使用`Eval`？

例如：我想在数据库中存储一些模板，以便某些用户可以编辑它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T04:04:53.030

Play 2.0 已经将您的模板编译为对象方法，因此您不必“动态加载”它们！

考虑这个名为`app/views/test.scala.html`.

```
@(num:Long) 
Your number is @num 
```

它成为`views.html`被调用的 Scala 方法`test`。使用以下代码对其进行评估：

```
val msg : String = views.html.test(23).toString() 
```

您不必只使用 html 视图。要将模板与字符串一起使用，请使用[`play.api.templates.Txt`](http://www.playframework.org/documentation/api/2.0/scala/index.html#play.api.templates.Txt)派生类。这是一个名为`app/views/quick.scala.txt`：

```
@(id:Long)Your id is @id 
```

它成为一种方法`views.txt.quick`并被使用：

```
val msg2 : String = views.txt.quick(32).body 
```

[您可以在 play.api.templates](http://www.playframework.org/documentation/api/2.0/scala/index.html#play.api.templates.package)包的文档中找到更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T19:30:09.180

似乎相关代码在`framework/src/play/src/main/scala/system/ApplicationProvider.scala`Play-2.0 目录中，尤其是`ReloadableApplication`类。我不确定这种即时编译是否适合您，因为您不想在请求模板时这样做（它很慢）。这意味着存储在数据库中没有多大意义：您不想存储模板源代码，而是存储已编译的模板对象。

为了争论，如果您只是将模板写入`app/views`目录，您可以让 Play 闲暇时编译它们。但是，请注意，因为它们可能不会在生产系统上编译。

# javascript - 使用 JS 随机化表格行，同时一次显示一个表格行

> ID：10105026
> 
> 赞同：1
> 
> 时间：2012-04-11T11:30:15.203
> 
> 标签：javascript, jquery, html, tablerow

我正在尝试创建一个表，该表一次只显示一行，并且每次刷新时都会随机化。这是我的代码：

```
<script>
var maxRows = 1; //displays one row at a time
$('#song-list').each(function() {
var cTable = $(this);
var cRows = cTable.find('tr:gt(0)');
var cRowCount = cRows.size();

if (cRowCount < maxRows) {
    return;
}

/* hide all rows above the max initially */
cRows.filter(':gt(' + (maxRows - 1) + ')').hide();

var cPrev = cTable.siblings('.prev');
var cNext = cTable.siblings('.next');

/* start with previous disabled */
cPrev.addClass('disabled');

cPrev.click(function() {
    var cFirstVisible = cRows.index(cRows.filter(':visible'));

    if (cPrev.hasClass('disabled')) {
        return false;
    }

    cRows.hide();
    if (cFirstVisible - maxRows - 1 > 0) {
        cRows.filter(':lt(' + cFirstVisible + '):gt(' + (cFirstVisible - maxRows - 1) +     ')').show();
    } else {
        cRows.filter(':lt(' + cFirstVisible + ')').show();
    }

    if (cFirstVisible - maxRows <= 0) {
        cPrev.addClass('disabled');
    }

    cNext.removeClass('disabled');

    return false;
});

cNext.click(function() {
    var cFirstVisible = cRows.index(cRows.filter(':visible'));

    if (cNext.hasClass('disabled')) {
        return false;
    }

    cRows.hide();
    cRows.filter(':lt(' + (cFirstVisible +2 * maxRows) + '):gt(' + (cFirstVisible +       maxRows - 1) + ')').show();

    if (cFirstVisible + 2 * maxRows >= cRows.size()) {
        cNext.addClass('disabled');
    }

    cPrev.removeClass('disabled');

    return false;
});
});
</script> 
```

**第二段代码：**

```
<script>
Array.prototype.shuffle = function() {
for (var i = 0; i < this.length; i++) {
// Random item in this array.
var r = parseInt(Math.random() * this.length);
var obj = this[r];

// Swap.
this[r] = this[i];
this[i] = obj;
}
}

function randomize(tableID) {
var myTable = document.getElementById(tableID);
var myRows = new Array();
for (i=myTable.rows.length-1; i>=0; i--) {
    var theRow = myTable.rows[i];
    myRows.push(theRow);
    theRow.parentNode.removeChild(theRow);
}
myRows.shuffle();
for (j=0; j<myRows.length; j++) {
    myTable.appendChild(myRows[j]);
}
}
window.onload = function() {
randomize("song-list");
}
//-->
</script> 
```

这两部分都可以自己正常工作，但是当我尝试将它们组合起来时，randomize 函数取代了其他代码，并且我得到了一长串 tr 刷新后随机化的列表。

我知道我可以做一些事情来使这些代码彼此一致。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:35:27.787

将整个第一个代码块放入一个函数中：

```
function showOneRow() {
    ...
} 
```

并在随机化后调用它：

```
window.onload = function() {
    randomize("song-list");
    showOneRow();
} 
```

# asp.net - 在 Asp.Net 中使用无 cookie 表单身份验证票证的可能缺点

> ID：10105028
> 
> 赞同：1
> 
> 时间：2012-04-11T11:30:19.113
> 
> 标签：asp.net, forms-authentication, cookieless

如果我使用

```
<authentication mode="Forms">

  <forms

  cookieless="UseUri"

  slidingExpiration="true"

  timeout="60"

  />

</authentication> 
```

进行此更改后。以匿名用户身份访问时，URL 看起来与以前完全相同。例如，当访问 Default.aspx 页面时，我的浏览器地址栏显示以下 URL：

```
http://localhost:2448/default.aspx 
```

但是，登录后，表单身份验证票证会嵌入到 URL 中。比如访问登录页面，以Sam登录后，返回到Default.aspx页面，但是这次的URL是：

```
http://localhost:2448/(F(jaIOIDTJxIr12xYS-VVgkqKCVAuIoW30Bu0diWi6flQC-FyMaLXJfow_Vd9GZkB2Cv-rfezq0gKadKX0YPZCkA2))/default.aspx 
```

**注意：**无 cookie 身份验证票更容易受到重放攻击，因为身份验证票直接嵌入在 URL 中。想象一个用户访问网站，登录，然后将 URL 粘贴到电子邮件中给同事。如果同事在到期前点击该链接，他们将作为发送电子邮件的用户登录！

如果我使用无 cookie 身份验证，这是一个可能的缺点，我有兴趣了解这种方法的其他可能缺点。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T11:43:35.233

缺点：

1.  可以存储在 URL 中的数据量有限（尤其是在移动和 Windows 2003 平台中）
2.  Cookie 重放攻击（您已经提到过） - 可以使用 ssl 避免，并使用超时进行限制。
3.  您的网址看起来很长而且不“整洁”。

# silverlight - Silverlight 应用程序不显示消息框

> ID：10105041
> 
> 赞同：0
> 
> 时间：2012-04-11T11:30:55.233
> 
> 标签：silverlight, messagebox

我正在 Silverlight 中制作 Web 应用程序。在该应用程序中，我将消息框显示为

```
MessageBox.Show("Hello"); 
```

每当我在 Visual Studio 中运行应用程序时，它都会正确显示消息框。但是每当我部署我的应用程序并尝试访问时，它都不会显示消息框。现在我是否必须编写客户端代码来显示消息或任何其他逻辑。请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:32:37.900

听起来您是在服务器上而不是客户端上执行此操作。
那是行不通的。

您需要在 Silverlight 或 Javascript 客户端代码中显示消息。

# php - 使用 json 从 IMDB 获取数据

> ID：10105046
> 
> 赞同：3
> 
> 时间：2012-04-11T11:31:42.083
> 
> 标签：php, json, api

我将[IMDB](http://www.imdb.com/)电影 ID 保存在我的数据库中。有没有办法通过他们的 id 获取 imdb 电影数据？

我有一个这样的json

```
http://api.rottentomatoes.com/api/public/v1.0/movies.json?apikey=XXXXXXXXXXXXXXXXXXXXXXXX&q=titanic3d 
```

我想要的是通过 id 获取 json 吗？有这样的json吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-31T01:09:21.683

[IMDB 通过最新的转储文件](http://www.imdb.com/interfaces)免费提供大部分数据。我编写了一个脚本，将这些转换为相当干净的 JSON：

[https://github.com/oxplot/imdb2json](https://github.com/oxplot/imdb2json)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T01:17:00.697

使用[IMDb-PHP-API](https://github.com/chrisjp/IMDb-PHP-API)，您可以获得如下 JSON 数据：

```
$movie = $imdb->find_by_id("tt0068646"); 
```

“tt”部分是可选的。

*披露：IMDb-PHP-API 是我编写的一个 PHP 脚本，最初基于[这个 Ruby gem](https://github.com/maddox/imdb-party)*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-12T09:51:27.817

您还可以使用 OMDB 获取完整的电影详细信息。这是链接：

[http://www.omdbapi.com/?i=](http://www.omdbapi.com/?i=YOUR)您的 IMDB ID&apikey=您的 API 密钥

# python - 如何将列表中的字符串连接成一个字符串并显示在模板的文本区域中

> ID：10105048
> 
> 赞同：0
> 
> 时间：2012-04-11T11:31:56.690
> 
> 标签：python, django, django-templates

我已将 Python 列表传递给模板，例如

```
l=['text','there is no salary','I need alcohol','and I want be high'] 
```

我有**id="raw"**的模板**文本区域**。如何将列表 l 中的所有元素连接到一个字符串中并显示在 textarea 中？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:35:13.803

你可以这样做：

```
<textarea>{{ l|join:"" }}</textarea> 
```

请参阅模板过滤器上的[Django 文档](https://docs.djangoproject.com/en/dev/topics/templates/#filters)**

# .net - 托管 dll 文件加载问题

> ID：10105050
> 
> 赞同：0
> 
> 时间：2012-04-11T11:32:01.297
> 
> 标签：.net, dll, loading, managed

我手上有一个大问题。我有一个需要托管 dll 文件才能工作的类库输出项目（一些 sdk dll，版本不会改变）。dll 放置在我的项目解决方案内的第三方文件夹中，并且我的类库项目具有从该特定位置对 dll 的引用。引用上的 CopyLocal 属性设置为 true。问题是当尝试使用这个 dll 时，我的应用程序会抛出 FileNotFoundException。经过一些研究并尝试遵循 stackoverflow 的另外两篇文章中的步骤，关于目标平台，问题尚未解决。还有一些非常奇怪的事情也在发生。安装 SDK 后应用程序正常工作，未安装时崩溃。据我所知，SDK 安装程序在 GAC 中添加了我需要的 dll。所以我尝试在GAC中注册这个dll文件，卸载SDK后，应用程序仍然找不到它。我不确定这是否相关，我的项目在 TFS 2008 上处于源代码控制之下。最近，发生了向 TFS 2010 的迁移。迁移之前的每个应用程序版本都可以正常工作，迁移之后的每个版本都不能正常工作。在 TFS 2010 下，我恢复到迁移之前的应用程序版本，但仍然无法正常工作。

我正在使用 VS 2010，.NET 框架 4.0，这是我在迁移之前使用的，当时一切都很好。

请指教。问候，亚历克斯·巴拉克

# ios - 在核心图中添加额外的 x 轴

> ID：10105060
> 
> 赞同：1
> 
> 时间：2012-04-11T11:32:45.020
> 
> 标签：ios, core-plot, cptbarplot

我想添加多个x轴，我的代码如下：

```
CPTXYAxisSet *axisSet = (CPTXYAxisSet *)barChart.axisSet;

    /// Here I customize default x and y axis. And they are correctly visible

    // Now create additional x axis
CPTXYAxis *bottomX = [[CPTXYAxis alloc]init];
bottomX.orthogonalCoordinateDecimal = CPTDecimalFromString(@"4");

CPTMutableLineStyle * lineStyle      = [CPTMutableLineStyle lineStyle];
lineStyle.lineWidth              = 3.0f;
lineStyle.lineColor              = [CPTColor greenColor];
lineStyle.dashPattern            = [NSArray arrayWithObjects:[NSNumber numberWithFloat:5.0f], [NSNumber numberWithFloat:5.0f], nil];

bottomX.axisLineStyle = lineStyle;

NSMutableArray * axes=[NSMutableArray arrayWithArray:axisSet.axes];
[axes addObject:bottomX];

axisSet.axes=axes; 
```

默认的 x,y 轴是完美的，但附加的 x 轴 (bottomX) 没有显示任何位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T22:21:41.170

您需要在新轴上设置绘图空间：

```
bottomX.plotSpace = barChart.defaultPlotSpace; 
```

# php - PHP: htmlspecialchars

> ID：10105061
> 
> 赞同：-1
> 
> 时间：2012-04-11T11:32:51.427
> 
> 标签：php, htmlspecialchars

我是编程新手，我正在尝试将 htmlspecialchars 应用于下面的脚本，但所有尝试都只是导致错误消息。我相信它应该类似于：echo htmlspecialchars($lines)，但不确定这将如何应用于下面的代码，或者我是否应该使用其他东西。

最终结果应将 .txt 文件中的文本转换为： Anna said she \"wouldn\'t go to Hannah\'s house\"。

to：安娜说她“不会去汉娜家”。

```
<?php
$lines = file('users.txt', FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);
uasort($lines, 'strnatcasecmp');

foreach ($lines as $num => $line) { 
printf("%s (line #%d)<br>", $line, $num);
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:35:37.330

```
<?php
$lines = file('users.txt', FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);
uasort($lines, 'strnatcasecmp');

foreach ($lines as $num => $line) { 
$line = htmlspecialchars(stripslashes($line), ENT_QUOTES, 'UTF-8');
printf("%s (line #%d)<br>", $line, $num);
}
?> 
```

`stripslashes()`将为您删除该内容中的斜线。

即使`htmlspecialchars()`不会处理斜线，我也将它们包含在内，因为在用户生成的数据上使用它是一种很好的形式（我假设文本文件中包含用户生成的数据）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:34:29.060

试试 stripslashes()

```
<?php
$lines = file('users.txt', FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);
uasort($lines, 'strnatcasecmp');

foreach ($lines as $num => $line) { 
printf("%s (line #%d)<br>", stripslashes($line), $num);
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T11:35:34.663

**尝试这个 ：**

```
<?php
    $lines = file('users.txt', FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);
    uasort($lines, 'strnatcasecmp');

    foreach ($lines as $num => $line) { 
        echo htmlspecialchars("$line (line #$num)<br>");
    }
?> 
```

# c# - Microsoft Sync 框架，基于许多表（连接 ..）进行过滤

> ID：10105062
> 
> 赞同：2
> 
> 时间：2012-04-11T11:32:53.817
> 
> 标签：c#, .net, synchronization

我目前正在测试同步框架。

我只是想根据其他表的标准同步表中的数据。在JuneT 发布后，我设法做到了这一点：

[http://social.msdn.microsoft.com/Forums/en/synclab/thread/f8516d4d-2352-468f-82e3-b06f18effaaa](http://social.msdn.microsoft.com/Forums/en/synclab/thread/f8516d4d-2352-468f-82e3-b06f18effaaa)

问题是这个解决方案非常慢......在我看来，“项目中的（选择......）”构造是针对源表中的每一行执行的......

还有一个修改 table_selectchanges 的选项，但它很容易通过重新创建数据库的范围同步基础结构来破坏。

这种任务还有其他解决方案吗？

谢谢

# javascript - 如何在网站上播放通知声音？

> ID：10105063
> 
> 赞同：126
> 
> 时间：2012-04-11T11:32:58.927
> 
> 标签：javascript, html, audio, notifications, html5-audio

当某个事件发生时，我希望我的网站向用户播放简短的通知声音。

打开网站时，声音不应**（**立即）自动启动。相反，它应该通过 JavaScript 按需播放（当特定事件发生时）。

重要的是，这也适用于较旧的浏览器（IE6 等）。

所以，基本上有两个问题：

1.  我应该使用什么编解码器？
2.  嵌入音频文件的最佳做法是什么？（`<embed>`对比`<object>`对比Flash对比`<audio>`）

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2012-04-11T13:56:18.530

## 2021解决方案

```
function playSound(url) {
  const audio = new Audio(url);
  audio.play();
} 
```

```
<button onclick="playSound('https://your-file.mp3');">Play</button> 
```

### 浏览器支持

Edge 12+、Firefox 20+、Internet Explorer 9+、Opera 15+、Safari 4+、Chrome

### 编解码器支持

只需使用 MP3

* * *

## 旧解决方案

（对于旧版浏览器）

```
function playSound(filename){
  var mp3Source = '<source src="' + filename + '.mp3" type="audio/mpeg">';
  var oggSource = '<source src="' + filename + '.ogg" type="audio/ogg">';
  var embedSource = '<embed hidden="true" autostart="true" loop="false" src="' + filename +'.mp3">';
  document.getElementById("sound").innerHTML='<audio autoplay="autoplay">' + mp3Source + oggSource + embedSource + '</audio>';
} 
```

```
<button onclick="playSound('bing');">Play</button>  
<div id="sound"></div> 
```

### 浏览器支持

*   [`<audio>`](https://caniuse.com/#feat=audio)（现代浏览器）
*   [`<embed`>](https://caniuse.com/#feat=embed)（后备）

### 使用的代码

*   适用于 Chrome、Safari 和 Internet Explorer 的 MP3。
*   用于 Firefox 和 Opera 的 OGG。

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2016-09-02T06:50:02.647

截至 2016 年，以下内容就足够了（您甚至不需要嵌入）：

```
let src = 'https://file-examples.com/wp-content/uploads/2017/11/file_example_MP3_700KB.mp3';
let audio = new Audio(src);
audio.play(); 
```

[在这里](https://stackoverflow.com/a/18628124/1371131)查看更多。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-06-16T23:59:54.597

另一个插件，用于在网站上播放通知声音：[**Ion.Sound**](http://ionden.com/a/plugins/ion.sound/en.html)

*   [基本演示](http://ionden.com/a/plugins/ion.sound/demo.html)
*   [高级演示](http://ionden.com/a/plugins/ion.sound/demo_advanced.html)
*   [Ion.Sound GitHub 页面](https://github.com/IonDen/ion.sound)

好处：

*   JavaScript 插件，用于播放基于 Web 音频 API 的声音，并回退到 HTML5 音频。
*   插件适用于最流行的桌面和移动浏览器，可以在任何地方使用，从常见的网站到浏览器游戏。
*   包括音频精灵支持。
*   没有依赖项（不需要 jQuery）。
*   包括 25 种免费声音。

设置插件：

```
// set up config
ion.sound({
    sounds: [
        {
            name: "my_cool_sound"
        },
        {
            name: "notify_sound",
            volume: 0.2
        },
        {
            name: "alert_sound",
            volume: 0.3,
            preload: false
        }
    ],
    volume: 0.5,
    path: "sounds/",
    preload: true
});

// And play sound!
ion.sound.play("my_cool_sound"); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-11T15:49:59.473

雅虎的媒体播放器怎么样 只需嵌入雅虎的库

```
<script type="text/javascript" src="http://mediaplayer.yahoo.com/js"></script> 
```

并像使用它一样

```
<a id="beep" href="song.mp3">Play Song</a> 
```

自动启动

```
$(function() { $("#beep").click(); }); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-07-25T15:20:36.690

**播放跨浏览器兼容通知**

正如@Tim Tisdall 在[这篇](https://stackoverflow.com/a/16282412/2218697)文章中所建议的那样，检查[Howler.js](https://github.com/goldfire/howler.js/)插件。

chrome 之类的浏览器`javascript`在最小化或不活动时会禁用执行以提高[性能](https://stackoverflow.com/questions/5927284/how-can-i-make-setinterval-also-work-when-a-tab-is-inactive-in-chrome)。但是即使浏览器处于非活动状态或被用户最小化，这也会播放通知声音。

```
 var sound =new Howl({
                     src: ['../sounds/rings.mp3','../sounds/rings.wav','../sounds/rings.ogg',
                           '../sounds/rings.aiff'],
                     autoplay: true,
                     loop: true
                    });

               sound.play(); 
```

希望能帮助某人。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-11T11:58:43.190

使用[audio.js](http://kolber.github.com/audiojs/)，它是一个用于回退到`<audio>`flash 的标签的 polyfill。

一般来说，请查看[https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)以了解 HTML 5 API 的 polyfill ..（*它包括更多`<audio>`polyfill*）

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-12-22T11:09:02.483

**如果您想在代码上调用事件最好的方法是创建触发器，因为如果用户不在页面上，浏览器将不会响应**

```
<button type="button" style="display:none" id="playSoundBtn" onclick="playSound();"></button> 
```

现在您可以在想要播放声音时触发按钮

```
$('#playSoundBtn').trigger('click'); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-10-24T08:43:06.913

如果您想通过以下方式自动化该过程`JS`：

包括在某处`html`：

```
<button onclick="playSound();" id="soundBtn">Play</button> 
```

并通过以下方式隐藏它`js`：

```
<script type="text/javascript">

document.getElementById('soundBtn').style.visibility='hidden';

function performSound(){
var soundButton = document.getElementById("soundBtn");
soundButton.click();
}

function playSound() {
      const audio = new Audio("alarm.mp3");
      audio.play();
    }

</script> 
```

如果您想播放声音，请致电`performSound()`某处！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-02-25T11:17:06.647

```
var audio = new Audio('audio_file.mp3');

function post()
{
  var tval=document.getElementById("mess").value;   
  var inhtml=document.getElementById("chat_div");
  inhtml.innerHTML=inhtml.innerHTML+"<p class='me'>Me:-"+tval+"</p>";
  inhtml.innerHTML=inhtml.innerHTML+"<p class='demo'>Demo:-Hi! how are you</p>";
  audio.play();
} 
```

此代码来自talkerscode 完整教程请访问[http://talkerscode.com/webtricks/play-sound-on-notification-using-javascript-and-php.php](http://talkerscode.com/webtricks/play-sound-on-notification-using-javascript-and-php.php)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-07-17T03:33:17.923

我们可以一起使用 Audio 和一个对象，例如：

```
var audio = {};
audio['ubuntu'] = new Audio();
audio['ubuntu'].src="start.ogg";
audio['ubuntu'].play(); 
```

甚至添加`addEventListener`for`play`和`ended`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-12-31T12:17:30.120

我写了一个干净的播放声音的函数方法：

```
sounds = {
    test : new Audio('/assets/sounds/test.mp3')
};

sound_volume = 0.1;

function playSound(sound) {
    sounds[sound].volume = sound_volume;
    sounds[sound].play();
}
function stopSound(sound) {
    sounds[sound].pause();
}
function setVolume(sound, volume) {
    sounds[sound].volume = volume;
    sound_volume = volume;
} 
```

# svn - SVN 导出命令不起作用

> ID：10105066
> 
> 赞同：1
> 
> 时间：2012-04-11T11:33:29.227
> 
> 标签：svn, tortoisesvn

我正在使用 Cygwin，我想做 SVN 导出我正在使用以下命令。

```
svn export http://SVNpath D:\Test -r 10 --username svntest --password svntest --force --non-interactive 
```

它工作正常。但如果有空间**`D:\Test Folder`**

```
svn: E205000: Try 'svn help' for more info
svn: E205000: Error parsing arguments 
```

我需要用**`%20`**.

请指导我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T11:43:36.793

如果路径包含空格，则必须用引号将它们括起来：

```
svn export http://SVNpath "D:\Test Folder" -r 10 --username svntest --password svntest --force --non-interactive 
```

如果您不这样做，那么它认为**D:\Test**是一个参数，而**Folder**是另一个参数。

# objective-c - 在MKMap中设置区域后，区域中的span自动变为两次

> ID：10105068
> 
> 赞同：0
> 
> 时间：2012-04-11T11:33:33.943
> 
> 标签：objective-c, mkmapview, mkcoordinateregion

伙计们。

我今天下午遇到了这个问题。我不想要不同的跨度......

我的代码是

```
- (IBAction)arrowClicked:(id)sender
{
UIButton *button = (UIButton *)sender;
for (Annotation *a in self.mapView.annotations) {
    if (a.tag==button.tag-800) {
        MKCoordinateRegion region = self.mapView.region;
        region.center = a.coordinate;
        region.span = span;
        NSLog(@"%f,%f",region.span.longitudeDelta, region.span.longitudeDelta);
        NSLog(@"%i",a.tag);
        NSLog(@"arrowClicked1  %f,%f",self.mapView.region.span.longitudeDelta, self.mapView.region.span.longitudeDelta);
        NSLog(@"arrowClicked1  %f,%f",region.span.longitudeDelta, region.span.longitudeDelta);
        [self.mapView setRegion:region animated:YES];
        NSLog(@"arrowClicked2  %f,%f",self.mapView.region.span.longitudeDelta, self.mapView.region.span.longitudeDelta);
        [self.mapView selectAnnotation:a animated:NO];
        break;
    }
}
}

- (void)mapView:(MKMapView *)mapView regionWillChangeAnimated:(BOOL)animated
{
NSLog(@"will changed");
for (UIImageView *arrow in self.mapView.subviews) {
    if (arrow.tag>=800) {
        [arrow removeFromSuperview];
    }
}
NSLog(@"regionWillChangeAnimated  %f,%f",self.mapView.region.span.longitudeDelta, self.mapView.region.span.longitudeDelta);
} 
```

日志是

```
2012-04-11 20:23:46.471 SFMap[4113:11603] 103
2012-04-11 20:23:46.471 SFMap[4113:11603] arrowClicked1  0.109863,0.109863
2012-04-11 20:23:46.472 SFMap[4113:11603] arrowClicked1  0.109863,0.109863
2012-04-11 20:23:46.472 SFMap[4113:11603] will changed
2012-04-11 20:23:46.472 SFMap[4113:11603] regionWillChangeAnimated  0.109863,0.109863
2012-04-11 20:23:46.472 SFMap[4113:11603] arrowClicked2  0.219727,0.219727 
```

我发现这个问题发生在 annotationList 的最后一个注释上。

谁能帮帮我？？谢谢~~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:34:43.943

跨度变化似乎很正常：[为什么 MKCoordinateSpan 变化？](https://stackoverflow.com/questions/2537263/why-mkcoordinatespan-changes)

如果您只是删除以下行，它将始终保持初始跨度：

```
span = self.mapView.region.span; 
```

# jquery - JQuery：淡出多个对象后淡入导致闪烁

> ID：10105073
> 
> 赞同：0
> 
> 时间：2012-04-11T11:33:41.327
> 
> 标签：jquery, fadein, fadeout, promise

对于这个项目，我有一个框 (div)，其中包含一些静态内容（包括选项卡）和可以在各种条件下更改的内容（单击、悬停和计时器）。这些动态内容视图中的每一个都位于一个单独的 div 中。

我正在尝试编写一个可以处理所有这些情况的函数，包括页面的初始加载，因为所有动态内容最初都是用 css 隐藏的。此函数采用父框，必须对其进行修改以跟踪事物，以及我希望更改为的视图。

所以，我首先淡出所有视图，以确保没有任何内容，然后淡入新视图。我很快意识到回调没有按顺序工作，所以我遇到了 promise() 函数。不幸的是，这会在我尝试过的每个浏览器（IE、Chrome 和 Firefox）中产生闪烁。在 Chrome 中，它只是偶尔出现，但在其他版本中，它几乎是恒定的。

```
$(container).children('.content_view').fadeOut(transition);
$(container).children('.content_view').promise().done(function() {
    $(next).fadeIn(transition);
}); 
```

这就是我目前代码的业务端。有没有更好的方法来做到这一点，或者有什么方法可以消除闪烁？不幸的是，这个页面大多会在行为不端的浏览器中查看。

在玩弄了延迟之后，我怀疑这个问题是时间问题。一个元素的过早删除，或者另一个元素的出现，会导致我的布局暂时改变，直到达到最终布局。我怀疑 promise() 函数实现了这样的延迟。

编辑：

我找到了一个似乎对我很有效的解决方案。由于我最初的淡出是为了处理多个视图以某种方式变得不隐藏的事件（由于其他原因，这种情况经常发生，使用 mouseenter 和 mouseleave 而不是 mouseover 和 mouseout）我决定尝试立即杀死会更好任何正在从以前的通话中消失的东西，然后做我的常规褪色：

```
$(container).children('.content_view').filter(function(){return ($(this).css('opacity') < 1)}).each(function() {
    $(this).stop();
    $(this).css('opacity',0);
    $(this).css('hidden','none');
});

if ($(container).children('.content_view').filter(function(){return ($(this).css('display') != 'none');}).length > 0)
    $(container).children('.content_view').filter(function(){return ($this.css('display') != 'none';}).fadeOut(transition, function() {
    $(content).fadeIn(transition);
});
else
    $(content).fadeIn(transition); 
```

希望这是有道理的。我以前不知道过滤器功能。很方便:)

请注意，在我的情况下，这是有效的，因为这是交换任何内容的唯一方式，并且它只会在每次调用结束时使一个元素树完全可见（或到达那里）。如果下一个还没有完成显示，它会立即被杀死并被替换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:40:15.320

这应该工作：

```
$(container).children('.content_view').fadeOut(transition, function() {
    $(next).fadeIn(transition);
}); 
```

然后尝试：

```
$(container).children('.content_view').each(function(){
    $(this).fadeOut(transition, function() {
        $(next).fadeIn(transition);
    });
}); 
```

然而，最好的解决方案可能是使用 CSS 过渡。有这种可能吗？这必须在什么浏览器上工作？

# php - 检测到损坏的 iconv PHP 扩展，安装无法继续

> ID：10105076
> 
> 赞同：-1
> 
> 时间：2012-04-11T11:33:48.783
> 
> 标签：php, mamp, moodle, iconv

我已经下载了 Moodle 并提取了 zip 文件。然后我把这个moodle放在MAMP/htdocs中。现在我从 localhost:8888/moodle 浏览，我收到以下错误。“检测到损坏的 iconv PHP 扩展，安装无法继续。”。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:44:31.003

您的问题实际上是题外话（希望这会被转移），Moodle 不适用于每个版本的 MAMP。您需要找到适用于您的 Moodle 的 MAMP 版本。

*   [Moodle MDL-28635 - 将损坏的 iconv 检测反向移植到 STABLE](http://tracker.moodle.org/browse/MDL-28635)

> 众所周知，MAMP 具有完全损坏的图标扩展，没有需要 iconv 的 Moodle 版本可以使用它。我想应该有一些大胆的字母警告，唯一的麻烦是一些用户不会像往常一样相信我们......
> 
> 如果检测到损坏的 iconv，Moodle 2.2dev 将完全停止安装和升级，我不确定这是稳定的最佳解决方案。
> 
> 这是一个阻止程序，因为损坏的 iconv 处理的任何数据都完全丢失了......

您可能需要更新或降级您的 MAMP 设置，ICONV 问题已在 MAMP / MAMP PRO 2.0.2 中修复。另请参阅[Broken iconv php extension MAMP](http://moodle.org/mod/forum/discuss.php?d=183176)。

有关的：

*   [iconv_strlen 函数导致执行超时，在 MAMP 上运行](https://stackoverflow.com/q/5400154/367456)
*   [错误 #43189 无法链接 iconv](https://bugs.php.net/bug.php?id=43189)
*   [错误 #48195 iconv 链接失败](https://bugs.php.net/bug.php?id=48195)
*   [错误 #49267 iconv 的链接失败：“未定义的符号：_libiconv”](https://bugs.php.net/bug.php?id=49267)
*   [Mac OS 10.6 (Snow Leopard) 上的 PHP 5.3.0 - Fabien Potencier；2009 年 11 月 5 日](http://fabien.potencier.org/article/37/php-5-3-0-on-mac-os-10-6-snow-leopard)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:41:14.197

15 秒的谷歌搜索。

看看下面的链接，似乎是合法的。

[http://moodle.org/mod/forum/discuss.php?d=183176](http://moodle.org/mod/forum/discuss.php?d=183176)

# c# - 哪种代码更好的编程风格

> ID：10105077
> 
> 赞同：3
> 
> 时间：2012-04-11T11:34:06.370
> 
> 标签：c#, .net, polymorphism

我有几个不同的对象，但我必须对它们执行类似的操作。使用什么比较好： 1\. 几种方法，并使用这些对象作为类型参数。2\. 使用一种获取 System.Object 作为参数的方法。在此方法中，我将检查参数类型并执行一些操作。

例如，我应该为某些操作发送通知。我有对象 Action1、Action2、Action3...ActionN，其中包含这些操作的详细信息。我应该使用：

```
 public void SendNotificationForAction1(Action1 action) {}
   public void SendNotificationForAction2(Action2 action) {}
   public void SendNotificationForActionN(ActionN action) {} 
```

或者

```
 public void SendNotification(Object action) 
   {
       //here I will check type of action and do something
   } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T11:39:28.947

我想这取决于：

发送通知的代码大致相同吗？那我会选择：

```
public void SendNotificationFor<T>(T action) {} 
```

否则我可能会选择[重载](http://csharp.net-tutorials.com/classes/method-overloading/)该方法：

```
public void SendNotification(Action1 action) {}
public void SendNotification(Action2 action) {}
public void SendNotification(ActionN action) {} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-11T11:37:40.827

第一个是类型安全的，第二个不是。因此，如果我必须在这两个选项之间进行选择，我会选择第一个。

另一方面，难道不能采用完全不同的方法吗？哪里有一个基类或接口 Action，其他类从哪里派生？接口或基类可以有一个“ `GetDetailsForNotification`”方法，您可以在实现者中实现该方法，并且您可以在方法中使用该`SendNotificationForAction`方法。

像这样的东西，但是，当然，我不知道这在您的情况下是否可行：

```
interface IAction
{
   string GetDetailsForNotification();
}

public class Action : IAction{
   public string GetDetailsForNotification()
   {
        return "details from Action";
   }
}

public class Action2 : IAction{
   public string GetDetailsForNotification()
   {
        return "details from Action2";
   }
}

public void SendNotificationForAction(IAction action) {

   var details = action.GetDetailsForNotification();
   ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T11:45:20.100

[策略模式](http://www.dofactory.com/Patterns/PatternStrategy.aspx)也可能适合这里：

```
private interface INotificationStrategy<T> // or non-generic with object
{
    void SendNotification(T action);
}

public class StringNotificationStrategy : INotificationStrategy<string>
{
    public void SendNotification(string action)
    {
        throw new NotImplementedException();
    }
} 
```

工厂可以为您提供正确的实现，并且您可以在不破坏现有接口的情况下提供进一步的实现......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T11:38:06.313

我会采用第一种方法。

它需要创建更多方法，可能还有更多代码，但我相信它更容易使用和类型安全。

您的第二种方法不允许我在编译时知道该方法期望什么样的 Object 而无需阅读代码（想象您分发此代码以用作库），如果我通过了错误的方法，唯一的事情你可以做的是让它在运行时失败 - 不是很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T11:47:01.913

正如大家所说，这取决于，但通常我更喜欢第二种方法的变体（如下），因为它在未来更容易扩展（当然，如果你需要的话）。

```
interface ISendNotificationHandler
{
    Type ActionType { get; }
    void SendNotification(object action)
}  

class Action1SendNotificationHandler : ISendNotificationHandler
{
    public Type ActionType {get{return typeof(Action1);}}
    public void SendNotification(object action)
    {
        Action1 a = (Action1)action;
        // TODO: send notification
    }   
}

// your method originally posted 
public void SendNotification(Object action)     
{
        var handlers = new ISendNotificationHandler[]{ new Action1SendNotificationHandler(), /* etc*/}

        // 
        var handler = handlers.FirstOrDefault(h=>action.GetType().IsSubclassOf(h.ActionType))
        if(handler != null)
        {
            handler.SendNotification(action);
        }
        else
        {
            throw new Exception("Handler not found for action " + action);
        }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-11T17:29:46.447

这是我的尝试：

每个 ActionN 类都派生自基本 Action ：

```
class Action1: Action, INotify
{
   public void override SendNotification() {...}
} 
```

如果某些通知具有通用实现，则将其放在 Action 类中。

现在在发送通知的班级中这样做：

```
class Sender
{
    public void SendNotif(INotify actn)
    {
       actn.SendNotification();
    }

} 
```

并将适当的对象发送到 SendNotif() 方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-11T11:43:37.840

您应该尽量使该方法保持通用性。

该`SendNotification`方法可以这样构建：

```
public void SendNotification<T>(T action) where T : SpecialAction {
} 
```

然后类/接口`SpecialAction`可以具有在操作之间不同的方法。例如：

```
[abstract class] [interface] SpecialAction {
    public string GetName();
    public bool CanDoX();
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-11T12:33:33.320

您是否考虑过使用观察者模式

[维基链接](http://en.wikipedia.org/wiki/Observer_pattern)在这里。

简而言之，假设您订阅了一份报纸，当有新版本的报纸（事件）时，订阅者将收到通知并交付新版本。

# git - 将更改合并到 git repo，就好像它们在过去发生过一样

> ID：10105078
> 
> 赞同：0
> 
> 时间：2012-04-11T11:34:10.480
> 
> 标签：git

我对 git 很陌生，所以如果这很明显（或不可能），请原谅我！

我将它用于 CMS 网站。我经常遇到这样的情况，即我对第三方组件进行了修改，然后又进行了更新。

如何添加更新组件中的更改，就好像它们发生在我的更改之前一样？还是这是“改写历史”？

我是否从引入组件的旧提交创建分支，添加更新的代码，然后合并到 master 中？子模块？还是我叫错了树，这种情况最好用另一种方式处理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T11:48:57.227

*（最初这个答案假设第 3 方组件来自公共 git 存储库，@jacob-dorman 澄清说他通过从较大项目的快照中复制组件的代码来获取更新）*

您需要维护一个包含**两个**分支的存储库：

*   `master`：每次获得组件的新快照时，将其提交到此分支
*   `tweaks`：基于分支的`master`分支，其中包含构成您的自定义调整的提交

每次使用组件的新快照更新“主”分支时，将分支重新设置在`tweaks`分支之上`master`：

```
$ git rebase master tweaks 
```

这将使您的调整有效地成为*最后发生的事情*。

所以，从一开始，这就是它在命令行上的样子......

# 获取第一个快照并将其存储在“主”分支上

```
mkdir my-fork-of-shinything
cd my-fork-of-shinything
git init
cp -R /tmp/shinything-snapshot-1 .  # copy the snapshot of code into your repo
git add -A    // stages ALL directory contents for commit
git commit -m "V1 snapshot of the shinything component" 
```

这将设置您的“主”分支。

# 在新的“tweaks”分支上添加你的调整

```
git checkout -b tweaks   // creates your new branch
... make your tweaks, commit them 
```

后来，当对原始组件进行了一些有趣的更新时......

# 获取新组件快照，更新“master”和“tweaks”分支

```
git checkout master
rm -Rf * // delete the contents of the old snapshot
cp -R /tmp/shinything-snapshot-2 . // get the brand new snapshot in place
git add -A
git commit -m "V2 snapshot of shinything, brings fix for #234" 
```

您的主分支现在拥有组件的更新历史记录，每个快照更新都有一个提交。最后将 ' *tweaks* ' 分支重新设置到 master 分支上 - 你的 'tweaks' 分支上的每个提交都将在 master 分支的新提示之上一个接一个地重播：

```
git rebase master tweaks // re-bases the commits from your tweaks branch 
```

# 更多调整？

如果您需要添加更多调整，只需检查分支并添加它们：

```
git checkout tweaks
... make your tweaks, commit them 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:36:07.243

给你一个简单的命令，`git pull --rebase`

兄弟，蒂姆

# javascript - 如何从此代码中删除时间？

> ID：10105080
> 
> 赞同：0
> 
> 时间：2012-04-11T11:34:15.580
> 
> 标签：javascript, html, date, datepicker, timepicker

我有此代码来生成日期/时间选择器，但我只需要使用此代码的日期选择器元素。

如何从此代码中删除时间选择器元素并且仍然可以正常工作？

```
function show_calendar(str_target, str_datetime) {
var arr_months = ["January", "February", "March", "April", "May", "June",
    "July", "August", "September", "October", "November", "December"];
var week_days = ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"];
var n_weekstart = 1; // day week starts from (normally 0 or 1)

var dt_datetime = (str_datetime == null || str_datetime =="" ?  new Date() : str2dt(str_datetime));
var dt_prev_month = new Date(dt_datetime);
dt_prev_month.setMonth(dt_datetime.getMonth()-1);
var dt_next_month = new Date(dt_datetime);
dt_next_month.setMonth(dt_datetime.getMonth()+1);
var dt_firstday = new Date(dt_datetime);
dt_firstday.setDate(1);
dt_firstday.setDate(1-(7+dt_firstday.getDay()-n_weekstart)%7);
var dt_lastday = new Date(dt_next_month);
dt_lastday.setDate(0);

var str_buffer = new String (
    "<html>\n"+
    "<head>\n"+
    "   <title>Calendar</title>\n"+
    "</head>\n"+
    "<body bgcolor=\"White\">\n"+
    "<table class=\"clsOTable\" cellspacing=\"0\" border=\"0\" width=\"100%\">\n"+
    "<tr><td bgcolor=\"#4682B4\">\n"+
    "<table cellspacing=\"1\" cellpadding=\"3\" border=\"0\" width=\"100%\">\n"+
    "<tr>\n <td bgcolor=\"#4682B4\"><a href=\"javascript:window.opener.show_calendar('"+
    str_target+"', '"+ dt2dtstr(dt_prev_month)+"'+document.cal.time.value);\">"+
    "<img src=\"prev.gif\" width=\"16\" height=\"16\" border=\"0\""+
    " alt=\"previous month\"></a></td>\n"+
    "   <td bgcolor=\"#4682B4\" colspan=\"5\">"+
    "<font color=\"white\" face=\"tahoma, verdana\" size=\"2\">"
    +arr_months[dt_datetime.getMonth()]+" "+dt_datetime.getFullYear()+"</font></td>\n"+
    "   <td bgcolor=\"#4682B4\" align=\"right\"><a href=\"javascript:window.opener.show_calendar('"
    +str_target+"', '"+dt2dtstr(dt_next_month)+"'+document.cal.time.value);\">"+
    "<img src=\"next.gif\" width=\"16\" height=\"16\" border=\"0\""+
    " alt=\"next month\"></a></td>\n</tr>\n"
);

var dt_current_day = new Date(dt_firstday);

str_buffer += "<tr>\n";
for (var n=0; n<7; n++)
    str_buffer += " <td bgcolor=\"#87CEFA\">"+
    "<font color=\"white\" face=\"tahoma, verdana\" size=\"2\">"+
    week_days[(n_weekstart+n)%7]+"</font></td>\n";

str_buffer += "</tr>\n";
while (dt_current_day.getMonth() == dt_datetime.getMonth() ||
    dt_current_day.getMonth() == dt_firstday.getMonth()) {

    str_buffer += "<tr>\n";
    for (var n_current_wday=0; n_current_wday<7; n_current_wday++) {
            if (dt_current_day.getDate() == dt_datetime.getDate() &&
                dt_current_day.getMonth() == dt_datetime.getMonth())

                str_buffer += " <td bgcolor=\"#FFB6C1\" align=\"right\">";
            else if (dt_current_day.getDay() == 0 || dt_current_day.getDay() == 6)

                str_buffer += " <td bgcolor=\"#DBEAF5\" align=\"right\">";
            else

                str_buffer += " <td bgcolor=\"white\" align=\"right\">";

            if (dt_current_day.getMonth() == dt_datetime.getMonth())

                str_buffer += "<a href=\"javascript:window.opener."+str_target+
                ".value='"+dt2dtstr(dt_current_day)+"'+document.cal.time.value; window.close();\">"+
                "<font color=\"black\" face=\"tahoma, verdana\" size=\"2\">";
            else 

                str_buffer += "<a href=\"javascript:window.opener."+str_target+
                ".value='"+dt2dtstr(dt_current_day)+"'+document.cal.time.value; window.close();\">"+
                "<font color=\"gray\" face=\"tahoma, verdana\" size=\"2\">";
            str_buffer += dt_current_day.getDate()+"</font></a></td>\n";
            dt_current_day.setDate(dt_current_day.getDate()+1);
    }

    str_buffer += "</tr>\n";
} 
```

本节对表格进行了说明，但是当我从表格中删除时间元素时，它不能正常工作？删除时间选择器元素后，日期选择器将出现但不会关闭！我该如何解决？

```
str_buffer +=
    "<form name=\"cal\">\n<tr><td colspan=\"7\" bgcolor=\"#87CEFA\">"+
    "<font color=\"White\" face=\"tahoma, verdana\" size=\"2\">"+
    "Time: <input type=\"text\" name=\"time\" value=\""+dt2tmstr(dt_datetime)+
    "\" size=\"8\" maxlength=\"8\"></font></td></tr>\n</form>\n" +
    "</table>\n" +
    "</tr>\n</td>\n</table>\n" +
    "</body>\n" +
    "</html>\n";

var vWinCal = window.open("", "Calendar", 
    "width=200,height=250,status=no,resizable=yes,top=200,left=200");
vWinCal.opener = self;
var calc_doc = vWinCal.document;
calc_doc.write (str_buffer);
calc_doc.close();
}

    function str2dt (str_datetime) {     
var re_date = /^(\d+)\-(\d+)\-(\d+)\s+(\d+)\:(\d+)\:(\d+)$/;
if (!re_date.exec(str_datetime))
    return alert("Invalid Datetime format: "+ str_datetime);
return (new Date (RegExp.$3, RegExp.$2-1, RegExp.$1, RegExp.$4, RegExp.$5,    RegExp.$6));
}
function dt2dtstr (dt_datetime) {
return (new String (
    dt_datetime.getFullYear()+"/"+(dt_datetime.getMonth()+1)+"/"+dt_datetime.getDate()));
 }
 function dt2tmstr (dt_datetime) {
return (new String (
dt_datetime.getHours()+":"+dt_datetime.getMinutes()+":"+dt_datetime.getSeconds()));
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:41:58.503

抱歉，这段代码太可怕了。最好完全重写它。我会建议：

*   至少将表示与数据和逻辑分开。最简单（尽管相当粗糙）的方法是将所有（格式化的）html 放在一个 var 中。不要附加/构建它。获取包含元素的必要数据并对其进行操作，即（只是一个概念）：

    ```
    var $layout = $('<form>'+
                        '<div/>' +
                         ....
                    '</form>'),
        $dateInput = $layout.find('input[name="date"]');

    .....

    $dateInput.val(date); 
    ```

    ;

*   更好地使用现有解决方案进行数据采集

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:42:33.323

一些库：

[http://javascriptcalendar.org/javascript-date-picker.php](http://javascriptcalendar.org/javascript-date-picker.php) http://www.javascriptkit.com/script/script2/tengcalendar.shtml [http://woork.blogspot.com/2009/01/beautiful-datepickers- and-calendars-for.html](http://woork.blogspot.com/2009/01/beautiful-datepickers-and-calendars-for.html)

# php - Joomla！通过调用 DB 填充注册表单上的列表框

> ID：10105082
> 
> 赞同：0
> 
> 时间：2012-04-11T11:34:18.747
> 
> 标签：php, xml, joomla

在此先感谢您的帮助...

我已根据需要修改了registration.xml 文件和其他文件，以便在mhy Joomla 上的注册表单中添加其他表单！地点。这些字段目前都是文本框，我想为状态等项目创建列表框。我不想输入选项和值，而是从数据库中的表中提取。

我的registration.xml文件中的这段代码有效：

```
<field name="statelist2" type="list" 
default=""
label="COM_USERS_REGISTER_STATE_LABEL"
description="COM_USERS_REGISTER_STATE_DESC"
message="COM_USERS_REGISTER_STATE_MESSAGE">
<option value="CT">CT</option>
<option value="MA">MA</option>
</field> 
```

我的registration.xml文件中的这段代码不起作用，我尝试删除对数据库的调用以使页面加载一些php：

```
<field name="statelist" 
type="list"
default=""
label="COM_USERS_REGISTER_STATE_LABEL"
description="COM_USERS_REGISTER_STATE_DESC"
message="COM_USERS_REGISTER_STATE_MESSAGE">
<?php
$x = "CT";
$z = "NY";
echo "<option value='" . $x. "'>" . $x . "</option>"; 
echo "<option value='" . $z. "'>" . $z . "</option>"; 
?>
</field> 
```

我的问题：1）我必须将代码放在哪里（在什么文件中）才能创建列表框或用潜在值填充它？

2) 为了利用现有的 Joomla! 框架，我在 registration.php 文件中看到了一些用于 loadFormData 和 getData 的函数 - 我可以在其中放置代码以在呈现后填充注册表单中的项目吗？我在想这样的事情，但不确定。

```
<?php 
    //init Joomla Framework 
    define( '_JEXEC', 1 ); 
    define( 'DS', DIRECTORY_SEPARATOR ); 
    define( 'JPATH_BASE', realpath(dirname(__FILE__).DS.'..' )); 

    require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' ); 
    require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' ); 

    $mainframe = JFactory::getApplication('site'); 

    //DBQuery 
    $database =& JFactory::getDBO(); 
    $query = "SELECT * FROM #__tbl_State;"; 

$database->setQuery($query); 
    //$result = $database->query();
$items = ($items = $db->loadObjectList())?$items:array(); 
    //print_r($result); 
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T11:35:06.073

```
<field
        name="STUDENT_COURSE"
        type="sql"
        multiple="false"
        size="1"
        label="Interested In Course"
        description="COM_HELLOWORLD_FORM_DESC_UPDHELLOWORLD_GREETING"
        query="select Course_Id, Course_Name from student_course"
        key_field="Course_Id"
        value_field="Course_Name"
        default="0"
required="true"
        >
     <option value="">Please Select Course</option>
</field> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T00:14:31.213

哇，在我看来，你正在努力工作。

除非我遗漏了什么，而且我经常这样做，否则您可以简单地使用正确的工具来完成这项工作；) [http://docs.joomla.org/SQL_form_field_type](http://docs.joomla.org/SQL_form_field_type)

如果您无法找到适合您的其他字段类型。 [http://docs.joomla.org/Standard_form_field_types](http://docs.joomla.org/Standard_form_field_types)

# android - Android：Scoreloop vs OpenFeint

> ID：10105084
> 
> 赞同：2
> 
> 时间：2012-04-11T11:34:25.987
> 
> 标签：android, openfeint, scoreloop

Android 的 OpenFient 和 Scoreloop 有什么比较吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T15:47:26.833

在编写我们使用“社交评分系统”的最新游戏之前，我找不到适用于 Android 的 OpenFeint 和 Scoreloop 的良好比较。

我们从 OpenFeint 实现开始，然后继续使用 Scoreloop，这是要启动的（参见：[https](https://play.google.com/store/apps/details?id=com.scoompa.marbles) ://play.google.com/store/apps/details?id=com.scoompa.marbles ）

以下是让我们切换的原因，以防其他人想在两者之间进行选择：

1.  OF 文档看起来像是从 iOS 移植过来的，而且非常糟糕。例如，文档给出了在您的 Application 类中初始化 OF 的示例。当用户忙于使用其他应用程序时，这将导致他们的“加入/不喜欢有趣”全屏对话框突然出现，因为随着内存可用性的变化，android 会在后台终止并重新创建您的应用程序。

2.  ScoreLoop 自动为用户创建一个“userId”，而无需他们注册/登录。这使我们能够发布用户的高分并显示他们的高分，而无需打扰用户登录。

3.  Scoreloop 有一个“离线”模式，这使得它更加健壮、高效、准确和易于使用。

4.  在不稳定的网络情况下，OF登录过程耗时很长，影响了游戏性能。（见上面的#3）。

5.  OF 不允许您获取分数排名。如果你想获得你的用户的排名，你必须获取完整的排行榜，循环通过它直到你找到你的用户的条目。这个“解决方案”几乎使这个选项不可用。

6.  Scoreloop 为我们提供了支持。我已经打开了几张票，他们都得到了及时和专业的答复。这些家伙摇滚。

我不久前写了这段代码，所以我可能忘记了其他原因。

**编辑**：

2011 年 4 月，日本公司 GREE, Inc. 以 1.04 亿美元收购 OpenFeint。根据收购后[此处发布的常见问题解答](http://support.openfeint.com/dev/OpenFeint-GREE-FAQ/)“OpenFeint SDK 将保留并仍可免费使用。整个 OpenFeint 团队将留下来，我们计划在未来几个月内将员工人数增加一倍，以便我们可以继续为您带来为您的游戏提供最好的社交、参与和发现功能。”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T15:13:43.243

GREE 将于 2012 年 12 月 14 日关闭 OpenFeint 服务器。他们提供了一个 api 迁移指南，他们承认该指南已过时且无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T19:00:37.683

OpenFeint 已被废弃，现在是 GREE。不再支持 OpenFeint SDK，所以最好的选择是使用 ScoreLoop 或其他东西。

# java - 在应用程序中记录 GC 信息

> ID：10105088
> 
> 赞同：11
> 
> 时间：2012-04-11T11:34:32.573
> 
> 标签：java, garbage-collection, jvm, logging

有没有办法将垃圾收集信息（例如`-XX:+PrintGCDetails`or的输出`-verbose:gc`）转发到 Java 应用程序中的记录器（在我的情况下为 sl4j + logback）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T14:52:25.947

这些消息是由 JVM 本机进程而不是 Java 代码生成的，所以你可以

1.  `-Xloggc`使用（无旋转） 将输出重定向到文件
    *   [如何将详细的垃圾收集输出重定向到文件？](https://stackoverflow.com/questions/1161647/how-to-redirect-verbose-garbage-collection-output-to-a-file)
2.  直接管道标准输出（几个旋转选项）
    *   [标准输出的日志轮换？](https://superuser.com/questions/291368/log-rotation-of-stdout)
    *   [java中的滚动垃圾收集器日志](https://stackoverflow.com/questions/3822097/rolling-garbage-collector-logs-in-java)
    *   [使用 logrotate 的垃圾收集器日志 (loggc) 文件轮换无法正常工作](https://stackoverflow.com/questions/8353401/garbage-collector-log-loggc-file-rotation-with-logrotate-does-not-work-properl)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-26T14:29:23.040

一个有趣的方法是将 gc.log 重定向到命名管道 `-Xloggc:/my/named/pipe` [如何将 GC 日志写入命名管道](https://stackoverflow.com/questions/24395623/how-to-write-gc-log-to-named-pipe)

然后从应用程序本身读取该管道： [如何从 Java 打开 Windows 命名管道？](https://stackoverflow.com/questions/634564/how-to-open-a-windows-named-pipe-from-java)

并从代码中记录到任意（例如异步滚动）logback 记录器。

在 Windows 机器上试过了。不幸的是，在 Windows 上设置比在 Linux 上更棘手。

在 Windows 上，它基本上是在一个额外的[Powershell 脚本](https://github.com/sshcherbakov/gc-logger/blob/master/GCLogPipeServer.ps1)的帮助下工作的（也可以是一个专用的应用程序）。该[示例项目](https://github.com/sshcherbakov/gc-logger)还包含一个演示应用程序，可立即用于测试通过 SLF4J 将 GC 日志重定向到 Logback。

# cakephp - 我想将 jquery 文件包含到 cakephp ctp 文件中

> ID：10105090
> 
> 赞同：-1
> 
> 时间：2012-04-11T11:34:50.113
> 
> 标签：cakephp

```
<?php echo $html->js( 'jquery.min' ); ?> 
```

我将 js 文件保存在 webroot/js/jquery.min.js 中

我收到错误

警告 (512)：方法 HtmlHelper::js 不存在 [CORE\cake\libs\view\helper.php，第 142 行]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:46:24.070

尝试：

```
 echo $this->Html->script('jquery.min'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T12:34:47.553

在 ctp 页面中包含 js 文件，请检查此代码，这将对您有所帮助。

```
echo $this->js->link('jquery-1.10.1.min'); 
```

输出：

```
<a href="/cake/posts/jquery-1.10.1.min" id="link-1138978643">/cake/posts/jquery-1.10.1.min</a> 
```

尝试这个 ：

```
echo $this->Html->script('jquery-1.10.1.min'); 
```

输出：

```
<script type="text/javascript" src="/cake/js/jquery-1.10.1.min.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T18:48:14.567

或者，您可以使用

```
<?php
echo $scripts_for_layout;
?>
just before you </head>. 
```

结果：js文件夹中的所有js文件都会自动

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T22:43:27.263

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

# html - HTML5 中的视频元素

> ID：10105091
> 
> 赞同：0
> 
> 时间：2012-04-11T11:34:55.190
> 
> 标签：html, html5-video

HTML5 视频标签如何消除对插件的需求。除了以前使用的标签（如嵌入和删除需要插件的对象）之外，视频标签还有什么作用？
请详细说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:05:25.613

关于视频和 IE9 的小问题。一位客户提供了 .mp4 视频。我们让它在一个带有 .ogg 选项和非 HTML 5 的 flash 对象后备的网站上工作。一切都很好，花花公子，在完全更新到最新 IE 的 XP 下工作得很好。所以IE很好。铬很好。火狐很好。平板电脑很好。网站看起来很棒。

然后我们投诉 - 视频没有显示。有人使用 Windows 7 和 IE，再次完全更新，看不到视频。

事实证明，客户端没有将 .mp4 编码为 H.264 格式的视频，我们完全更新的 XP 系统只运行 IE8（WinXP 没有 IE9）并优雅地退回到 Flash。Chrome 适合 .mp4，FF 适合 .ogg。但事实证明 IE9 正在读取标签，但无法读取 .mp4 文件 - 所以没有回退到 Flash，只是红十字会。解决方案是重新编码 .mp4（使用 Miro），使其具有正确的编解码器。

道德是如果对 IE9 有疑问，请检查 .mp4 文件是否已编码为正确的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:47:13.803

> HTML5 视频标签如何消除对插件的需求

`<video>`支持 HTML5 播放器的浏览器可以在使用标签时显示默认或内置播放器。

> 除了以前使用的标签（如嵌入和删除需要插件的对象）之外，视频标签还有什么作用？

该`<video>`标签对其他/旧标签没有任何作用，但它确实为您提供了一个后备选项。如果浏览器不支持 HTML5，它们将回退到旧方法，例如`<embed>`, `<object>`. 这是一个例子：

```
<video controls
  preload="none" width="590" height="320"
  data-setup="{}">
  <source src="Real_Media.theora.ogv" type='video/ogg'>

   <!-- fallback for older browsers -->

   <object width="590" height="320">
      <param name="movie" value="http://www.youtube.com/v/Z7pAr39ZnhA&amp;hl=en_US&amp;fs=1"></param>
      <param name="allowFullScreen" value="true"></param>
      <param name="allowscriptaccess" value="always"></param>
      <embed src="http://www.youtube.com/v/Z7pAr39ZnhA&amp;hl=en_US&amp&autoplay=1;fs=1" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="590" height="320" wmode="transparent"></embed>
   </object>

</video> 
```

如您所见，我们在`<object>`标签内指定了`<video>`标签。虽然它是可选的，但您需要为不支持 HTML5 的浏览器指定它。在上述情况下，如果浏览器支持 HTML5，`<video>`则将使用`<object>`标签并忽略标签，反之亦然。

* * *

有关 HTML5 视频的详细信息，请查看：

*   [深入了解 HTML5 - 视频标签](http://diveintohtml5.info/video.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-26T20:26:13.073

看看： [http](http://html5media.info/) ://html5media.info/包含一行 .js 以支持所有主要浏览器`<video>`和`<audio>`手机中的标签：

# web-services - 面向服务的架构建议

> ID：10105093
> 
> 赞同：6
> 
> 时间：2012-04-11T11:35:15.647
> 
> 标签：web-services, rest, soa, saas

出于个人和大学研究的原因，我正在考虑使用面向服务的架构构建一个简单的 CRM。它的意义只是为了解释架构本身，而不是商业用途。

我正在考虑实施一个提供简单分析服务和客户服务（用户存储、个人评论和其他一些东西）的 CRM。

我正在设计的架构定义： - WebGUI（其他服务的客户端） - AnalyticsService（接收数据、分析和收集数据的服务） - CustomerCareService（使用 RESTful API 应用 CRUD 操作的服务）。

每个服务都有自己的数据库，完全独立于其他服务。它们公开了一个公共接口。该接口当然必须提供某种身份验证，以拒绝未经授权的请求。

我想在这种架构中解释的优点是所有事物都独立的可能性以及将它们组合起来以提供新服务的能力（例如，如果有一个 OrderService 来处理订单，那么很容易将它与使用公共 API 的客户）。对我来说最大的优势是构建使用这些服务的其他客户端很容易。

我不知道什么是好的身份验证方法，可以很容易实现，我也不确定如何制作这个 API（使用 XML 或带有 GET/POST 数据的普通 REST API）。我曾与 Amazon、PayPal 和其他公司 API 合作过，他们似乎使用 REST 服务（paypal 使用丑陋的 _cmd GET 参数，而 Amazon 使用更好的 URI）来知道该怎么做，但是阅读一些关于 SOA 的东西似乎人们也使用XML。当然，我还需要考虑到 Web 界面必须能够识别登录用户、获取权限（令牌或其他任何内容）并将其与服务一起使用以显示信息。所以我不确定 SOA 是不是我真正构建的那种架构……是 SaaS 而不是 SOA？我认为使用 RESTful 应用程序会更好，

为清楚起见，我在这里列出我的问题：

1.  这种架构是称为 SOA 还是 SaaS（或两者兼有）？
2.  对于我想要获得的东西，什么是好的实现？（请尽可能详细地解释）
3.  哪种身份验证更适合客户端（用户令牌与 OAuth 或类似）
4.  您对此类项目有什么建议吗？

我有大约 3 个月的时间来做这件事，所以我不能做一些真正复杂的事情（除了这对于单个程序员来说是不现实的事实）。

我知道 Python（WSGI 框架）、Ruby on Rails、C/C++ 和其他语言（.net 除外），我想在 Linux 环境下开发它（MySQL 或 Postgres，如果您有任何建议，甚至可以使用 NoSQL正确的选择），我还可以将这些服务独立程序的几种语言结合起来。

我想在这里有一些好的观点和一些好的建议。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:48:01.743

我会将 SaaS 定义为一种商业模式，而不是一种架构；然而，就像所有业务领域需求一样，它会影响系统架构，但它本身不会。您定义的内容是面向服务的架构必不可少的。

您的陈述“独立并能够将它们组合以提供新服务”是建议 SOA 的基本非功能设计要求。

良好的 SOA 实现是关于定义良好且灵活的接口，以及*非常*明确的职责划分。然而，它很难被规范。证据在吃；它是否提供了灵活的重用。我的建议是花时间阅读 SOA 设计模式资源，并了解与使用的适当上下文相关的定义特征。然后应用单一职责原则适当的抽象级别。cf [（域）基于空间的架构](http://c2.com/cgi/wiki?SpaceBasedArchitecture)是一种 SOA 元模式。

关于授权，我建议遵循服务方法，使用分布式目录服务系统，如开放 LDAP，并注意服务提供者和用户拥有自己的凭据是完全合理的，您可以使用公私密钥签署消息。

主要建议是学习和借鉴他人的经验：

*   [http://www.soapatterns.org/](http://www.soapatterns.org/)
*   [http://martinfowler.com/eaaCatalog/](http://martinfowler.com/eaaCatalog/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T10:51:47.717

SOA 不强制使用 XML。

当前，网络技术占主导地位，并定义了未来。所以我们公司选择 JSON RESTful 服务作为基础。和 SOA 一样的原则。

建议语言是没有意义的，因为 SOA 和良好实现的目的是 - 允许使用任何语言或框架

（仅供参考，我们将 Java 与基于 Spring MVC 的 Web 服务、Node.js、PHP 一起使用）

# javascript - 网页视频

> ID：10105096
> 
> 赞同：0
> 
> 时间：2012-04-11T11:35:27.560
> 
> 标签：javascript, html, video

昨天[我问了一个](https://stackoverflow.com/questions/10095179/video-flash-or-videos-for-html)关于网站视频的问题，我得到了几个有用的链接的回复，这些链接有助于了解如何将视频实现到网页上。但现在我卡住了。我不知道该怎么办。

人们说我需要使用带有后备功能的 HTML5（如果不支持 HTML5，则使用自己的播放器）。没关系，但我的网络空间有限。我不能只为 1 个视频使用 3 种不同的文件格式（ogg、mpeg、flv 或 swf）。所以这就是我需要使用flv的原因。

我正在尝试制作自己的播放器，但我不知道从哪里开始。我正在搜索“视频播放器教程 html”、“视频教程 html”、“js 播放器视频教程”等，但谷歌给了我“初学者 HTML 教程”，这对我来说没用，我找不到任何链接开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:05:21.377

有同样的问题。我的网络编辑不知道如何创建多种格式的视频...

使用对您问题的评论，我这样做了：

```
<embed height="280" type="" width="320" wmode="transparent" bgcolor="undefined" allowfullscreen="true" x-shockwave-flashallowscriptaccess="always" application="" src="http://player.longtailvideo.com/player.swf" flashvars="file=http://www.musikali.dk/media/1500/new_holland_vs_john_deere.mp4" /> 
```

我将它作为 Umbraco CMS 的宏使用它作为 xslt 的一部分，它处理多种文件类型

```
<xsl:if test="contains(macro/Media1/File/umbracoFile, '.mp4')"> 
  <embed  height="280" type="" width="320" wmode="transparent" bgcolor="undefined"  allowfullscreen="true" x-shockwave-flashallowscriptaccess="always"  application="" src="http://player.longtailvideo.com/player.swf">
  <xsl:attribute name="flashvars">file=http://www.musikali.dk<xsl:value-of  select="macro/Media1/File/umbracoFile"/></xsl:attribute>
  </embed>
</xsl:if> 
```

...所以它不是 html5，但允许我的编辑器只使用一种文件类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T11:41:16.923

更努力地搜索并使用正确的关键字。像“html5 video”这样的东西应该会给你带来结果。HTML5 关键字指定您正在专门寻找与 html5 相关的关键字。

[http://html5video.org/](http://html5video.org/) [http://www.html5rocks.com/en/tutorials/video/basics/](http://www.html5rocks.com/en/tutorials/video/basics/)

# c# - ZXing 仍然存在内存泄漏。即使在释放 Global Alloc 之后

> ID：10105102
> 
> 赞同：1
> 
> 时间：2012-04-11T11:35:39.153
> 
> 标签：c#, xamarin.ios, zxing

在这篇文章：[Zxing 的 System.Drawing.Bitmap 中可能的内存泄漏中，有人](https://stackoverflow.com/questions/6977278/possible-memory-leak-in-zxings-system-drawing-bitmap)询问有关 ZXing 库中的内存泄漏的问题。我已经下载并使用免费分配的内存修改了库。我什至在适用的情况下引入了 using(){} 语句，但我仍然遇到内存泄漏。

我有一个怀疑。Marshal.Copy 是否可能做得更多，然后只是将数据从源复制到目标。复制后我是否还必须释放目的地？

正如您在下面的代码中看到的那样，我什至尝试只分配一次缓冲区，并且仅在请求比前一个更大的图像时才重新分配它，但这并没有解决问题。

问候保罗

我修改后的代码：

```
using System;
using MonoTouch.UIKit;
using MonoTouch.CoreGraphics;
using System.Runtime.InteropServices;
using System.Diagnostics;

namespace System.Drawing
{
public class Bitmap : IDisposable
{
    byte[] pixelData = new byte[0];
    int width = 0;
    int height = 0;
    static IntPtr m_BufferPointer = default(IntPtr);
    static int m_Size;

    /// <summary>
    /// Reallocs the buffer when it becomes too small
    /// </summary>
    private IntPtr ReallocBuffer(int size)
    {
        if(m_BufferPointer != default(IntPtr))
        {
            if(m_Size < size)
            {
                Marshal.FreeHGlobal(m_BufferPointer);
                m_BufferPointer = Marshal.AllocHGlobal(size);
            }
        }
        else
        {
            m_BufferPointer = Marshal.AllocHGlobal(size);
        }

        m_Size = size;

        return m_BufferPointer;
    }

    public Bitmap (UIImage image)
    {
        UIImage backingImage = image;
        IntPtr rawData;

        using (CGImage imageRef = backingImage.CGImage)
        {
            width = imageRef.Width;
            height = imageRef.Height;

            using (CGColorSpace colorSpace = CGColorSpace.CreateDeviceRGB ())
            {
                int size = height * width * 4;
                rawData = ReallocBuffer(size); //Marshal.AllocHGlobal (height * width * 4);

                using (CGContext context = new CGBitmapContext (rawData, width, height, 8, 4 * width, colorSpace, CGImageAlphaInfo.PremultipliedLast))
                {
                    context.DrawImage (new RectangleF (0.0f, 0.0f, (float)width, (float)height), imageRef);

                    pixelData = new byte[height * width * 4];

                    Marshal.Copy (rawData, pixelData, 0, pixelData.Length);
                }
            }
        }
    }

    private static int CountCalled;
    private static int LastCountCalled = 20000000; //30411000;

    public Color GetPixel (int x, int y)
    {
        try
        {               
            CountCalled++;

            if (CountCalled - LastCountCalled > 100000)
            {
                Debug.WriteLine (CountCalled);
                LastCountCalled += 1000000;
            }

            byte bytesPerPixel = 4;
            int bytesPerRow = width * bytesPerPixel;
            int rowOffset = y * bytesPerRow;
            int colOffset = x * bytesPerPixel;
            int pixelDataLoc = rowOffset + colOffset;

            Color ret = Color.FromArgb (pixelData [pixelDataLoc + 3], pixelData [pixelDataLoc + 0], pixelData [pixelDataLoc + 1], pixelData [pixelDataLoc + 2]);
            return ret;
        }
        catch (Exception ex)
        {
            Console.WriteLine ("Req:  {0}x{1}", x, y);
            throw ex;
        }
    }

    #region IDisposable implementation
    public void Dispose ()
    {
        pixelData = null;
        GC.Collect(0);
    }
    #endregion
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:12:09.450

您需要释放本机缓冲区，CGBitmapContext 不会为您执行此操作：

```
IntPtr rawData = Marshal.AllocHGlobal (height * width * 4);

try {
    using (CGContext context = new CGBitmapContext (rawData, width, height, 8, 4 * width, colorSpace, CGImageAlphaInfo.PremultipliedLast))
    {
        context.DrawImage (new RectangleF (0.0f, 0.0f, (float)width, (float)height), imageRef);

        pixelData = new byte[height * width * 4];

        Marshal.Copy (rawData, pixelData, 0, pixelData.Length);
    }
} finally {
    Marshal.FreeHGlobal (rawData);
} 
```

*根据评论中的 Jonathan.Peppers try-finally 建议进行了更新*

# asp.net-mvc-3 - 没有显示提要对话框的 FB 墙贴

> ID：10105105
> 
> 赞同：1
> 
> 时间：2012-04-11T11:35:47.327
> 
> 标签：asp.net-mvc-3, facebook-graph-api

是否可以在不打开提要对话框的情况下在用户的墙上发帖？？？？

谁能提供一些例子？？？

# xcode - 在 XCode 4 中更改输出路径并运行多个目标

> ID：10105110
> 
> 赞同：0
> 
> 时间：2012-04-11T11:36:04.080
> 
> 标签：xcode

是否可以更改目标可执行文件和库的构建位置的输出文件夹？还可以在 XCode 中一次运行多个目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:40:18.650

您可以从 Xcode 的 Locations Preferences 更改 Xcode 放置派生数据的位置。选择文件 > 项目设置允许您更改单个项目的派生数据位置。

我不知道有什么方法可以在 Xcode 中同时运行多个目标。

# gcc - 通过 openocd 使用 gdb（目标 arm）调试多源（asm 和 c）程序

> ID：10105111
> 
> 赞同：0
> 
> 时间：2012-04-11T11:36:05.743
> 
> 标签：gcc, gdb, arm, openocd

我想通过链接器从多个目标文件形成的程序源逐步调试。

为简单起见，我假设一个源是汇编文件，其中启动例程位于其中，另一个是 c 文件。该程序由以下makefile构建

```
 PREFIX=/opt/arm/bin
 LDSCRIPT=ld.script
 AS_BASEN=$(basename startup.s)
 C_BASEN=$(basename main.c)
 ASFLAGS=-g
 CCFLAGS=-g -nostartfiles
 LDFLAGS=--fatal-warnings    

 $(C_BASEN).bin: $(C_BASEN).elf
    $(PREFIX)/arm-objcopy -O binary $< $@

 $(C_BASEN).elf: $(LDSCRIPT) $(AS_BASEN).o $(C_BASEN).o
    $(PREFIX)/arm-ld $(LDFLAGS) -T $(LDSCRIPT) $(AS_BASEN).o $(C_BASEN).o -o $@

 $(C_BASEN).o: $(C_BASEN).c
    $(PREFIX)/arm-gcc $(CFLAGS) -c $< -o $@

 $(AS_BASEN).o: $(AS_BASEN).s Makefile
    $(PREFIX)/arm-as $(ASFLAGS) $< -o $@ 
```

尽管我认为我的问题与 openocd 无关，但为了完整起见，我声明了 openocd 的特定部分。在 openocd 守护进程启动后，我使用以下命令启动调试会话。

```
 nc localhost 4444 <<eof
 soft_reset_halt
 load_image `pwd`/main.bin $memory_location
 step $memory_location
 exit
 eof
 ddd --debugger 'arm-gdb -ex "target remote localhost:3333"' 
```

其中 $memory_location 是 .text 部分的第一个地址。打开后`ddd`，程序停在所需的地址，我可以像往常一样单步通过装配线。最后我到达了跳转指令，它跳转到位于 c 文件中的函数。再经过一步 gdb 在程序执行时不再响应。

也许你们中的一位专家可以给我一个提示，我必须改变什么，以便 gdb 在这一点上切换到 c 源，我可以继续逐步执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:15:50.737

也许您可以尝试这些工具的不同版本（如果其中的某些错误抑制了预期的行为）。试试看这里[http://www.comsytec.com/products/gnu-binaries/gcc-binaries.html](http://www.comsytec.com/products/gnu-binaries/gcc-binaries.html)

# hive - 如何在 EMR Hive 中映射动态 dynamoDB 列

> ID：10105112
> 
> 赞同：3
> 
> 时间：2012-04-11T11:36:08.090
> 
> 标签：hive, amazon-dynamodb, amazon-emr

我在 Amazon dynamoDB 中有一个表，其记录结构如下

```
{"username" : "joe bloggs" , "products" : ["1","2"] , "expires1" : "01/01/2013" , "expires2" : "01/02/2013"} 
```

其中 products 属性是属于用户的产品列表，并且 expires *n*属性与列表中的产品相关，产品列表是动态的并且有很多。我需要以类似的格式将此数据传输到 S3

```
joe bloggs|1|01/01/2013
joe bloggs|2|01/02/2013 
```

使用 hive 外部表，我可以映射 dynamoDB 中的用户名和产品列，但是我无法映射动态列。有没有一种方法可以扩展或调整 org.apache.hadoop.hive.dynamodb.DynamoDBStorageHandler 以便在 hive 摄取之前解释和构造从 dynamo 检索到的数据？或者是否有替代解决方案将发电机数据转换为第一范式？

我的一个关键要求是我保持 dynamodb.throughput.read.percent 设置提供的限制，这样我就不会影响表的操作使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T20:49:04.693

您可以为这种情况构建特定的 UDTF（用户定义的表生成函数）。我不确定 Hive 如何将星号（可能适用于您的情况）作为函数的参数处理。

[类似于Explode](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF#LanguageManualUDF-explode) ( [source](https://github.com/apache/hive/blob/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDTFExplode.java) ) 所做的事情。

# python - PyQt4 - 来自外部网站的 setWindowIcon

> ID：10105113
> 
> 赞同：0
> 
> 时间：2012-04-11T11:36:10.713
> 
> 标签：python, icons, pyqt, pyqt4

我目前在 PyQt4 中开发我的第一个应用程序，我现在想做的是从网站上的图像源设置我的应用程序的窗口图标。

我认为这样的事情会起作用，但事实并非如此：self.

```
# Sets the application icon
def set_app_icon(self, icon_url):
    self.setWindowIcon(QIcon(QUrl(icon_url)))

self.set_app_icon('http://web.page/icon.png') 
```

我怎样才能做到这一点？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:21:26.957

`QIcon`无法从网络上获取数据。您需要自己下载并提供给`QIcon`. 像这样的东西：

```
import sys
from PyQt4 import QtGui, QtCore, QtNetwork

class Main(QtGui.QMainWindow):
    def __init__(self, parent=None):
        super(Main, self).__init__(parent)

    def loadIconFromUrl(self, url):
        manager = QtNetwork.QNetworkAccessManager(self)
        manager.finished.connect(self._setIconFromReply)
        manager.get(QtNetwork.QNetworkRequest(QtCore.QUrl(url)))

    def _setIconFromReply(self, reply):
        p = QtGui.QPixmap()
        p.loadFromData(reply.readAll(), format="ico")
        self.setWindowIcon(QtGui.QIcon(p))

app = QtGui.QApplication(sys.argv)
main = Main()
main.loadIconFromUrl("http://en.wikipedia.org/favicon.ico")
main.show()
sys.exit(app.exec_()) 
```

# java - 使用java拆分字符串

> ID：10105114
> 
> 赞同：-4
> 
> 时间：2012-04-11T11:36:16.360
> 
> 标签：java

我想以相同的顺序多次拆分一个非常长的字符串，其中包括日期、时间和一些评论，如何使用 java 将它们分别拆分为日期、时间和评论。

例如：

```
21 March 2012 3:48 PM 11 doz 30 September 2011 10:51 AM Hotlist Task Deleted: To-do Ring re: Boody (Jessica ordered socks)With: 3 Beaches Chemist Deleted by: MASTER 21 September 2011 12:55 PM Hotlist Task Created: To-do Ring re: Boody (Jessica ordered socks) With: 3 Beaches Chemist Scheduled by: MASTER Assigned to: MASTER 21 September 2011 12:55 PM 7 doz 
```

我想要输出为：

```
Date              Time     Comments
21 March 2012     3:48 PM  11 doz
30 September 2011 10:51 AM Hotlist Task Deleted: To-do Ring re: Boody (Jessica ordered socks)With: 3 Beaches Chemist Deleted by: MASTER
21 September 2011 12:55 PM Hotlist Task Created: To-do Ring re: Boody (Jessica ordered socks) With: 3 Beaches Chemist Scheduled by: MASTER Assigned to: MASTER
21 September 2011 12:55 PM 7 doz 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:58:10.610

我还建议使用正则表达式来匹配您想要破坏字符串的条件。

您也可以放置一个分隔符，让正则表达式知道要破坏字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:55:08.440

我建议创建一个算法，根据您知道的格式查找起息日字符串（例如，查找与某个月份匹配的下一个字符串）并据此分解字符串。找到月份，备份直到找到日期并拆分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T12:01:12.983

```
s.replaceAll ("([0-3]?[0-9] [A-Z][a-z]+ 20[0-9][0-9] )", "\n$1") 
```

结果：

```
21 March 2012 3:48 PM 11 doz 
30 September 2011 10:51 AM Hotlist Task Deleted: To-do Ring re: Boody (Jessica ordered socks)With: 3 Beaches Chemist Deleted by: MASTER 
21 September 2011 12:55 PM Hotlist Task Created: To-do Ring re: Boody (Jessica ordered socks) With: 3 Beaches Chemist Scheduled by: MASTER Assigned to: MASTER 
21 September 2011 12:55 PM 7 doz 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T11:42:56.513

您可以尝试使用正则表达式，但条目之间必须有一个行/条目分隔符。

# jquery-ui - 如何在“jQuery Ui Draggable Helper”中的函数调用中发送参数？

> ID：10105121
> 
> 赞同：0
> 
> 时间：2012-04-11T11:36:42.583
> 
> 标签：jquery-ui, draggable

我正在使用 jQuery UI 插件来拖放我的对象，但我有一个问题。我的 html 源代码是这样的：

```
<html>
 <body>
  <div id="firstDiv">some thing is here</div>
 </body>
</html> 
```

现在，我想使用 helper 拖动上面的 div。我的代码是这样的：

```
<script type="text/javascript">
 $(document).ready(function(){
  $("#firsstDiv").draggable({helper:anImage});
 });
 function anImage() {
  return '<img src="~/myImage.png" alt="" />';
 }
</script> 
```

好的，这段代码也可以，但是我想设置图像地址，但是当我将函数更改为有参数时，这不起作用，O_o

我的新代码是这样的：

```
<script type="text/javascript">
 $(document).ready(function(){
  $("#firsstDiv").draggable({helper:anImage($(this).text())});
 });
 function anImage(address) {
  return '<img src="'+address+'" alt="" />';
 }
</script> 
```

但不工作。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:55:46.290

好的 - 你不能将参数传递给你的辅助函数。我很确定这就是问题所在。

解决这个问题的方法是创建一个设置函数，然后`anImage`从那里调用你的函数：

```
$(function(){
    $("#firsstDiv").draggable({
        helper: setup
   });
});

// function to setup draggable DOM elements
function setup() {
    anImage("~/myImage.png");
    // ... do other setup things here too
}

function anImage(imageAddress) {
    return '<img src="'+imageAddress+'" alt="" />';
} 
```

当然，除非您尝试`anImage`为每个可拖动元素使用不同的图像地址进行调用，在这种情况下，上述方法将不起作用。但是无论如何，您都不应该使用辅助函数来执行此操作，因为我很确定它只是为了包含设置您正在创建的所有可拖动元素的代码。

希望这可以帮助，

詹姆士

# c# - 从具有指定格式的字符串中解析日期时间

> ID：10105122
> 
> 赞同：1
> 
> 时间：2012-04-11T11:36:44.160
> 
> 标签：c#, .net

我正在尝试从中提取日期时间信息

```
"2012/04/03 10:06:21:611747" 
```

使用格式

```
String dateformat = @"yyyy/mm/dd hh:mm:ss:ffffff"; 
```

获得例外 - 任何帮助表示赞赏。

完整代码

```
 String dateformat = @"yyyy/mm/dd hh:mm:ss:ffffff";
 readonly CultureInfo _provider = CultureInfo.InvariantCulture;
 DateTime dateTime = DateTime.ParseExact(line, dateformat, _provider); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T11:38:43.583

使用`MM`数月：

```
 String dateformat = @"yyyy/MM/dd hh:mm:ss:ffffff"; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T11:38:39.620

你的格式应该是：

`yyyy/MM/dd hh:mm:ss:ffffff`

你有一个小写`m`的月份，这是不正确的。

查看此答案以获取更多信息：[.Net: DateTime String format](https://stackoverflow.com/questions/608057/net-datetime-string-format)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-11T11:38:18.083

你应该使用

```
String dateformat = @"yyyy/MM/dd hh:mm:ss:ffffff"; 
```

`MM`是一个月，`mm`而是分钟！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T11:44:35.543

采用

```
String dateformat = @"yyyy/MM/dd hh:mm:ss:ffffff"; 
```

使用 MM 表示月份。
由于在两个不同的地方解释 m 时出现混淆，因此发生了异常。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-11T11:46:33.750

替换`mm`为`MM`

此[链接](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)将有所帮助

# emacs - eval-when-compile 不被尊重？

> ID：10105123
> 
> 赞同：2
> 
> 时间：2012-04-11T11:36:44.830
> 
> 标签：emacs, elisp

我正在尝试为 emacs 24.1.50.1 安装 ace-jump-mode。

我已经用 Mx package-install 安装了它，调用 Mx ace-jump-mode 会激活它并提示输入字母，但是在输入字母时，我收到错误：

```
Symbol's function definition is void: every 
```

运行`emacs -q`（然后`(add-to-list 'load-path "~/.emacs.d/elpa")`像我在 .emacs 文件中一样运行）允许我加载 ace-jump-mode 并且它可以正常运行。因此假设错误存在于我的 .emacs 中，我将 .emacs 中的所有内容都注释掉，并定期重新打开 emacs，但仍然出现错误。

通过一些搜索，我认为问题出在 ace-jump-mode.el 中的代码

```
(eval-when-compile
  (require 'cl)) 
```

不使用时无法正常工作`emacs -q`。当我 Mx 加载库 cl 时，一切正常。

我想，由于我在网上找不到任何对此的参考，这不是一个常见的错误，所以它一定是我的配置有问题。我知道我可以在我的 .emacs 中加载 cl，但我认为不需要为一个函数加载整个包。

有谁知道如何解决这一问题？或者，如何从 cl 中只加载一个函数？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T13:40:58.803

Emacs 是自我记录的，`C-h f every`会告诉你这个函数是在`cl-extra`not中定义的`cl`，但是加载`cl`会自动加载它，所以它确实可用。

Emacs 24 的加载方式可能发生了一些`cl`变化，这破坏了这个库，我不确定。就像您发现的那样，最简单的解决方法就是

```
(require 'cl) 
```

在你的初始化文件中。这并不像你说的那么重要。无论如何，您可能使用的**许多**库都会这样做，因此您可能只是在更改加载内容的顺序。

另一种方法是只向作者提交一个`ace-jump-mode` 避免使用的补丁`every`，这更不方便。

最后，如果您开始`ace-jump-mode`工作，那是因为您加载了未编译的“.el”文件而不是已编译的“.elc”文件，后者本来可以运行`(require 'cl)`，这意味着两者都`cl`将`cl-seq`被加载到某个地方。所以没有任何魔法可以在不加载这些文件的情况下完成这项工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T14:10:14.267

`(eval-when-compile <foo>)`表示`<foo>`仅在编译文件时（或未编译运行时）执行。因此，如果您编译文件，生成的文件将不会加载`cl`，这是一个问题，因为仅在加载 `every`时才定义。用于加载*宏*（例如），因为这些仅在编译期间需要，但不是宏，因此您的问题。`cl``(eval-when-compile <foo>)`*`ignore-errors``every`*

# objective-c - ObjectiveC自动发布问题，代码有什么问题？

> ID：10105126
> 
> 赞同：4
> 
> 时间：2012-04-11T11:37:02.380
> 
> 标签：objective-c

Objective-C 的新手，

```
#import <objc/objc.h>
#import <Foundation/Foundation.h>

@interface Test:NSObject
{
  int x,y, abc;
  NSString *v1, *v2;
}
@property int x , y, abc;
-(void) print;

@end

@implementation Test
@synthesize x,y, abc;
-(void) print
{
 NSLog (@"v1 and v2 values %i, %i ", v1, v2);
}

@end

int main ( int argc, char **argv)

{
  Test *t = [[Test alloc] init];
  /* Synthesized Set Method */
  [t setX:100];
  [t setY:200];
 /* Synthesized Get Method */
  NSLog (@"Retrieving Values %i, %i ",[t x], [t y]);

 /* another Way to retrieve the throuhg KVC Model */
 NSLog (@" KVC Retrieveal  %i ", [t valueForKey:@"x"]); 
```

}

我没有得到编译时错误，但我得到了运行时错误：

```
2012-04-11 16:25:08.470 testpgm[22237] Retrieving Values 100, 200 
2012-04-11 16:25:08.513 testpgm[22237] autorelease called without pool for object (0x8e78ca0) of class NSMethodSignature in thread <NSThread: 0x8e23a08>
2012-04-11 16:25:08.514 testpgm[22237] autorelease called without pool for object (0x8e94610) of class NSIntNumber in thread <NSThread: 0x8e23a08>
2012-04-11 16:25:08.514 testpgm[22237]  KVC Retrieveal  149505552 
```

看起来这与内存问题有关。有人指出问题？

**注意：**通过您的所有输入，我可以解决自动释放问题，但仍然

```
NSLog (@" KVC Retrieveal  %i ", [t valueForKey:@"x"]); 
```

不打印正确的值，而是打印垃圾。难道我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T11:40:37.937

主例程不创建自动释放池。

根据您使用的版本和编译器，使用其中一种方法。

更新或使用 ARC：

```
int main(int argc, char *argv[])
{
    @autoreleasepool {

    // your code

    }
} 
```

或者

```
int main(int argc, char *argv[]) {
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

     // your code

    [pool drain];
} 
```

该代码还有许多其他问题，例如：

```
NSLog (@"v1 and v2 values %i, %i ", v1, v2); 
```

应该是

```
NSLog (@"v1 and v2 values %@, %@ ", v1, v2); 
```

%@ 用于打印对象，%i 用于整数。

该行：

```
NSLog (@" KVC Retrieveal  %i ", [t valueForKey:@"x"]); 
```

很有趣，因为 valueForKey 返回一个对象（在本例中为 an `NSNumber`），因此正确的语句是：

```
NSLog (@" KVC Retrieveal  %@ ", [t valueForKey:@"x"]); 
```

运行带有这些更正的程序会产生：

```
Retrieving Values 100, 200 
KVC Retrieveal  100 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-11T11:42:06.737

当您处于应用程序的运行循环中时，会为您创建一个默认的自动释放池。但是，当您使用自己的 运行时`main`，您需要在顶部手动创建一个自动释放池`main`，并定期将其排出。

```
NSAutoreleasePool *myPool = [[NSAutoreleasePool alloc] init];
// Your code that uses autorelease...
[myPool drain]; 
```

如果您使用新的 LLVM 编译器进行编译，请改用新`@autoreleasepool`功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T11:42:16.420

`main`函数必须有一个自动释放池。

```
int main(int argc, char *argv[])
{
    @autoreleasepool {

        // you code

        return ...;
    }
} 
```

**编辑：**
关于你的第二部分问题。`valueForKey`返回`id`，将其转换为`int`

```
NSLog (@" KVC Retrieveal  %i ", [[t valueForKey:@"x"] intValue]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T11:46:25.017

```
int main ( int argc, char **argv)

{
 NSAutoreleasePool *myPool = [NSAutoreleasePool new];
  Test *t = [[Test alloc] init];
  /* Synthesized Set Method */
  [t setX:100];
  [t setY:200];
 /* Synthesized Get Method */
  NSLog (@"Retrieving Values %i, %i ",[t x], [t y]);

 /* another Way to retrieve the throuhg KVC Model */
 NSLog (@" KVC Retrieveal  %i ", [t valueForKey:@"x"]);

 [pool drain];
} 
```

可能会奏效

# haskell - 在 Haskell 中识别函数的当前 HEC

> ID：10105127
> 
> 赞同：5
> 
> 时间：2012-04-11T11:37:05.273
> 
> 标签：haskell, parallel-processing

我正在使用 Strategies 编写一个并行的 Haskell 程序。它没有做它应该做的事情，我想检查一个函数在哪个 Haskell 执行上下文 (HEC) 中执行。

我可以在调试输出中使用 getHEC 调用或类似的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T12:15:12.363

`threadCapability`您可以通过调用from来找出 Haskell 线程正在运行的功能（即 CPU 内核）`Control.Concurrent`。

如果您使用 运行程序`+RTS -N`，则每个内核将生成一个操作系统级线程 (HEC)，因此返回的功能编号`threadCapability`将告诉您`forkIO`绿色线程正在哪个操作系统线程上运行。但是，如果您使用 明确指定操作系统线程的数量`+RTS -Nn`，其中`n`是系统上的内核数量以外的某个整数，这可能对您没有多大用处。

您可能还会发现[ThreadScope](http://www.haskell.org/haskellwiki/ThreadScope)对于调试和可视化并行程序的执行很有用。

# jquery - .加载一个 进入空 div 工作正常，但创建一个 在页面底部，不知道为什么

> ID：10105131
> 
> 赞同：0
> 
> 时间：2012-04-11T11:37:35.930
> 
> 标签：jquery, jquery-load

我使用 .load 将一个 nivo 滑块和一小段文本加载（单击时）到页面顶部的一个空 div 中。一切正常，但是当它加载时，它还会在页脚下方加载一个空的滑块 div，我可以通过为页面设置一个最大高度来隐藏它，但我想找出是什么原因造成的。

有问题的页面是[new.pudle.co.uk](http://new.pudle.co.uk)如果您单击其中一个粉红色瓷砖，它将打开加载滑块，同时将空 div 放在底部。

我使用的js是

```
google.setOnLoadCallback(function() {
$("#pegasus-tile, #o-w").click(function(){
    $("#proj-content").load("projects/pegasus.html", function(){

        $('<div id="slider" class="nivoSlider"></div>').appendTo($('body'));
        $('#slider').nivoSlider({effect: 'sliceUpDown'}),

        $("#close").click(function(){
        $("#proj-content").load("projects/blank.html"),

        $("#next-pegasus").click(function(){
        $("#proj-content").load("projects/bgapp.html");

            }); 
        });
    });
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:53:33.297

我认为你不需要这条线

```
$('<div id="slider" class="nivoSlider"></div>').appendTo($('body')); 
```

因为你有

```
<div id="slider" class="nivoSlider">
<img src="images/projects/pegasus property/1.png" width="490" height="400" />
<img src="images/projects/pegasus property/2.png" width="490" height="400" />
</div><!--slider close--> 
```

in `projects/pegasus.html`，因此出现了两个滑块，jquery 添加的滑块位于底部。

您是否添加了这个因为 nivoSlider 没有它或其他东西就无法工作？

此外，我注意到您`google.setOnLoadCallback(function() {`每个粉红色的盒子都有一个...这可能不是很容易维护（好吧，我假设您目前只是在测试，但最好第一次就“正确”。也许添加一个常见的类到每个粉色框，然后使用它的 id 来计算要加载的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:43:45.787

那是什么

```
$('<div id="slider" class="nivoSlider"></div>').appendTo($('body')); 
```

确实..它在主体底部添加了一个滑块..

你期待什么？（*哦，您每次点击都会添加一个..*）

# algorithm - 从保持排序的有序列表生成随机子列表

> ID：10105138
> 
> 赞同：7
> 
> 时间：2012-04-11T11:37:58.847
> 
> 标签：algorithm, sublist

考虑一个问题，其中 k 个项目的随机子列表 Y 必须从 X（n 个项目的列表）中选择，其中 Y 中的项目必须以与它们在 X 中相同的顺序出现。Y 中的选定项目不必是清楚的。一种解决方案是：

```
for i = 1 to k
    A[i] = floor(rand * n) + 1
    Y[i] = X[A[i]]
sort Y according to the ordering of A 
```

但是，由于排序操作，这具有运行时间 O(k log k)。要删除它很诱人

```
high_index = n
for i = 1 to k
    index = floor(rand * high_index) + 1
    Y[k - i + 1] = X[index]
    high_index = index 
```

但是由于统一的索引选择，这给返回的列表带来了明显的偏差。如果第二个解决方案中的索引分布不均匀，感觉就像一个 O(k) 解决方案是可以实现的。有谁知道是否是这种情况，如果是这样，边际指数的分布具有哪些属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:37:03.173

通过您的第一个算法，按排序顺序生成 k 个 [0, 1) 的均匀随机样本就足够了。

让 X1, ..., Xk 成为这些样本。给定 Xk = x，X1,...,Xk-1 的条件分布是 k-1 个有序的 [0, x) 的均匀随机样本，因此只需对 Xk 进行采样并递归即可。

Xk < x 的概率是多少？[0, 1)的k个独立样本中的每一个必须小于x，所以答案（Xk的累积分布函数）是x^k。要根据 cdf 进行采样，我们所要做的就是在 [0, 1): 的均匀随机样本上反转它`pow(random(), 1.0 / k)`。

* * *

这是我实际上会考虑实施的（预期的）O（k）算法。这个想法是将样本转储到 k 个 bin 中，对每个 bin 进行排序，然后进行连接。这是一些未经测试的 Python：

```
def samples(n, k):
    bins = [[] for i in range(k)]
    for i in range(k):
        x = randrange(n)
        bins[(x * k) // n].append(x)
    result = []
    for bin in bins:
        bin.sort()
        result.extend(bin)
    return result 
```

为什么这在预期中是有效的？假设我们对每个 bin 使用插入排序（每个 bin 的预期大小为 O(1)！）。在 O(k) 的操作之上，我们将按比例支付 bin 大小的平方和的数量，这基本上是冲突的数量。由于两个样本碰撞的概率最多为 4/k，并且我们有 O(k^2) 对样本，因此预期的碰撞次数为 O(k)。

我相当强烈地怀疑 O(k) 保证可以以很高的概率做出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T12:43:42.533

无偏`O(n+k)`的解决方案是简单的高级伪代码。

*   创建一个大小为 n 的空直方图 [初始化为所有元素为零]
*   用范围内的 k 个均匀分布的变量填充它。（做k次`histogram[inclusiveRand(1,n)]++`）
*   迭代初始列表 [A]，同时减少直方图中的元素并将元素附加到结果列表中。

**解释[编辑]：**

*   这个想法是随机选择`k`元素`n`，每个元素均匀分布，并从中创建一个[直方图](http://en.wikipedia.org/wiki/Histogram)。
*   此直方图现在包含每个索引，结果列表中将出现`i`多少次。`A[i]``Y`
*   现在，按顺序迭代列表`A`，并为每个元素`i`插入`A[i]`结果`Y`列表`histogram[i]`时间。
*   这可以保证您保持顺序，因为您按顺序插入元素，并且“永不返回”。
*   它还保证了无偏解，因为对于每个 i,j,K: `P(histogram[i]=K) = P(histogram[j]=K)`，因此对于每个`K`，每个元素都有相同的概率出现在结果列表`K`时间中。

我相信*可以*`O(k)`使用订单统计信息 [X [(i)] ]来完成，但我无法弄清楚：\

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T09:35:40.783

对于 Y 中的第一个索引，X 中的索引分布由下式给出：

P(x; n, k) = 二项式(n - x + k - 2, k - 1) / 范数

其中二项式表示二项式系数的计算，范数是归一化因子，等于可能的子列表配置的总数。

范数 = 二项式(n + k - 1, k)

所以对于 k = 5 和 n = 10，我们有：

*   标准 = 2002
*   P(x = 0) = 0.357, P(x <= 0) = 0.357
*   P(x = 1) = 0.245, P(x <= 1) = 0.604
*   P(x = 2) = 0.165, P(x <= 2) = 0.769
*   P(x = 3) = 0.105, P(x <= 3) = 0.874
*   P(x = 4) = 0.063, P(x <= 4) = 0.937
*   ...（我们可以继续这个直到 x = 10）

我们可以从这个分布中采样 Y 中第一项的 X 索引（称为 x1）。然后可以使用 P(x; (n - x1), (k - 1)) 以相同的方式对 Y 中的第二个索引的分布进行采样，以此类推所有后续索引。

我现在的感觉是这个问题在 O(k) 中是无法解决的，因为通常我们无法从常数时间描述的分布中进行采样。如果 k = 2，那么我们可以使用二次公式在恒定时间内求解（因为概率函数简化为 0.5(x^2 + x)）但我看不到将其扩展到所有 k 的方法（我的数学不是虽然不太好）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T10:44:05.293

原始列表 X 有 n 个项目。有 2**n 个可能的子列表，因为每个项目都会*或不会*出现在结果子列表中：每个项目都会在可能的子列表的枚举中添加一个位。您可以查看此 n 位位字的枚举。

由于您只想要具有 k 个项目的子列表，因此您对设置了 k 位的位字感兴趣。

一个实用的算法可以从 X 中选择（或不选择）第一个元素，然后考虑到所选择项目的累积数量，然后递归到 X 的最右边的 n-1 个子字符串。由于 X 列表按顺序处理，Y 列表也将按顺序处理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T12:48:15.613

您可以使用计数排序对 Y 进行排序，从而使排序相对于 k 呈线性。但是，为此，您需要一个额外的长度为 n 的数组。如果我们假设您已经分配了它，您可以执行您要求的代码任意多次，复杂度为 O(k)。

这个想法就像你描述的那样，但是我将使用一个大小为 n 的数组 cnt ，我假设它被初始化为 0，另一个我假设为空的“堆栈” st 。

```
for i = 1 to k
    A[i] = floor(rand * n) + 1
    cnt[A[i]]+=1
    if cnt[A[i]] == 1  // Needed to be able to traverse the inserted elements faster
      st.push(A[i])

for elem in st
  for i = 0 to cnt[elem]
    Y.add(X[elem])

for elem in st
  cnt[elem] = 0 
```

编辑：正如老男孩所说，我在帖子中所说的不是真的 - 我仍然需要对 st 进行排序，这可能比原来的提议要好一些，但不会太多。所以这种方法只有在 k 与 n 相当的情况下才有效，然后我们只需线性迭代 cnt 并以这种方式构造 Y。这种方式 st 不需要：

```
for i = 1 to k
    A[i] = floor(rand * n) + 1
    cnt[A[i]]+=1

for i = 1 to k
  for j = 0 to cnt[i]
    Y.add(X[i])
  cnt[i] =0 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-13T11:15:47.983

原始列表 X 有 n 个项目。有 2**n 个可能的子列表，因为每个项目都会或不会出现在子列表中：每个项目都会在可能的子列表的枚举中添加一个位。您可以查看此 n 位位字的枚举。

由于您只想要具有 k 个项目的子列表，因此您对设置了 k 位的位字感兴趣。一个实用的算法可以从 X 中挑选（或不挑选）第一个元素，然后考虑到所选项目的累积数量，然后递归到 X 的最右边的 n-1 个子串。由于 X 列表按顺序处理，Y 列表也将按顺序处理。

```
#include <stdio.h>
#include <string.h>

unsigned pick_k_from_n(char target[], char src[], unsigned k, unsigned n, unsigned done);
unsigned pick_k_from_n(char target[], char src[]
                , unsigned k, unsigned n, unsigned done)
{
unsigned count=0;

if (k>n) return 0;

if (k==0) {
        target[done] = 0;
        puts(target);
        return 1;
        }
if (n > 0) {
        count += pick_k_from_n(target, src+1, k, n-1, done);

        target[done] = *src;
        count += pick_k_from_n(target, src+1, k-1, n-1, done+1);
        }

return count;
}

int main(int argc, char **argv) {

char result[20];
char *domain = "OmgWtf!";
unsigned cnt ,len, want;
want = 3;

switch (argc) {
default:
case 3:
        domain = argv[2];
case 2:
        sscanf(argv[1], "%u", &want);
case 1:
        break;
        }
len = strlen(domain);

cnt = pick_k_from_n(result, domain, want, len, 0);

fprintf(stderr, "Count=%u\n", cnt);

return 0;
} 
```

删除递归留给读者作为练习。一些输出：

```
plasser@pisbak:~/hiero/src$ ./a.out 3 ABBA
BBA
ABA
ABA
ABB
Count=4
plasser@pisbak:~/hiero/src$ 
```

# c# - 没有网络连接的 LDAP 缓存

> ID：10105142
> 
> 赞同：0
> 
> 时间：2012-04-11T11:38:04.223
> 
> 标签：c#, active-directory, ldap

我们有一个程序在我们网络中的不同计算机上运行，​​该程序需要使用特定的管理员帐户登录才能执行某些任务。

我们的供应商编写了以下代码来检查用户是否是本地管理员。

问题是：

*   如果管理员用户之前登录过计算机，凭据是否会保存在缓存中，这样即使没有网络连接，下面的代码也能正常工作？
*   如果是这样，我们如何强制保存这些凭据？
*   否则，是否有任何替代方法可以使用缓存中的凭据登录？

    ```
    static bool UserExists(string domain, string username, string password)
    {
        if (System.Environment.GetEnvironmentVariable("UserDomain") != null)
        {
          if (string.Compare(System.Environment.GetEnvironmentVariable("UserDomain"), domain, true) != 0)
          {
            return false;
          }
        }
        string filter = string.Format("(&(ObjectClass={0})(sAMAccountName={1}))", "person", username);
        string[] properties = new string[] { "fullname" };

        using (DirectoryEntry adRoot = new DirectoryEntry("LDAP://" + domain, null, null, AuthenticationTypes.Secure))
        using (DirectorySearcher searcher = new DirectorySearcher(adRoot))
          {

            adRoot.Username = username;
            adRoot.Password = password;

            searcher.SearchScope = SearchScope.Subtree;
            searcher.ReferralChasing = ReferralChasingOption.All;
            searcher.PropertiesToLoad.AddRange(properties);
            searcher.Filter = filter;

            if (searcher.FindOne() != null)
            {
              // If you want to see the user details: searcher.FindOne().GetDirectoryEntry();
              return true;
            }
        }
      return false;
    } 
    ```

提前致谢

# java - jetty http 客户端中 SslSocketConnector setPort() 的替代品是什么？

> ID：10105144
> 
> 赞同：1
> 
> 时间：2012-04-11T11:38:12.677
> 
> 标签：java, ssl, jetty

我目前正在将我们的**码头**版本从**7.1.6 升级到 7.6.2**。我注意到我们当前使用的许多 SslSocketConnector 方法自我们的旧版本以来已被弃用。

从我在其他一些 SO 问题中看到的情况来看，我已经设法通过使用来替换大多数方法`SslContextFactory`。

**但是，我似乎找不到任何等效的`SslSocketConnector`'`setPort(int)`方法。关于相应方法的任何想法是什么`SslContextFactory`？**

升级码头版本前的代码：

```
theSSLConnector.setPort(theHTTPSPort);
theSSLConnector.setKeystore("key");
theSSLConnector.setPassword("OBF:password");
theSSLConnector.setKeyPassword("OBF:password");
theSSLConnector.setTruststore("trust");
theSSLConnector.setTrustPassword("OBF:password"); 
```

之后：

```
SslContextFactory theSSLFactory = new SslContextFactory();
// Port goes here?
theSSLFactory.setKeyStorePath("key");
theSSLFactory.setKeyManagerPassword("OBF:password");
theSSLFactory.setKeyStorePassword("OBF:password");
theSSLFactory.setTrustStore("trust");
theSSLFactory.setTrustStorePassword("OBF:password"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:03:06.707

设法通过使用我已经存在的`SslContextFactory`作为构造函数的输入参数来解决它`SslSocketConnector`：

```
SslContextFactory theSSLFactory = new SslContextFactory();
theSSLFactory.setKeyStorePath("key");
theSSLFactory.setKeyManagerPassword("OBF:password");
theSSLFactory.setKeyStorePassword("OBF:password");
theSSLFactory.setTrustStore("trust");
theSSLFactory.setTrustStorePassword("OBF:password");

SslSocketConnector theSSLConnector = new SslSocketConnector(theSSLFactory);
theSSLConnector.setPort(theHTTPSPort); 
```

# excel - 复制列，使用 Excel VBA 删除原始列

> ID：10105147
> 
> 赞同：0
> 
> 时间：2012-04-11T11:38:24.860
> 
> 标签：excel, vba

我一直致力于简化脚本，我想创建一个脚本，该脚本将在一系列列中复制到最左边的未占用列。然后删除原始列。

我已经调整了这个脚本，我发现它主要做我想做的事情，它复制了所有内容，但不会删除。

我还需要它来制作它，以便它可以选择所述列范围中的哪一行来查看以供参考。

有人可以看一下脚本并帮助完成我已经开始的工作吗？我一直在慢慢学习Excel VBA，工作让我还没准备好就往多个方向跳，所以我知道复制和删除选项应该很简单，但是因为我的工作，我还没有时间正确地学习所有内容，如果这是一个简单的答案，很抱歉，但我需要使这个脚本尽可能精简，这就是我到目前为止所知道和搜索的内容互联网上的代码和帮助。

```
Option Explicit

Sub MoveColumns()

    Dim cel As Range

    With ActiveSheet
        For Each cel In Intersect(.UsedRange, .[B:N]).SpecialCells(xlCellTypeBlanks).Cells
            cel = cel.Offset(0, 1)
        Next
    End With
End Sub 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T20:04:52.823

> > > 不要介意主目录下的数据，我有一个脚本可以删除它，所以当这个脚本运行时，它下面什么都没有运行。如果我想将 Copy G:G 移动到 F:F，然后删除 G:G，将 H:H 移动到 G:G，删除 H:H，然后继续直到所有列并排，没有空格介于两者之间，并且在其他任何地方都没有重复。

你想要的是复杂的移动方式。最简单的方法是删除空白列。其余列将自动向左移动 :) 我假设第 194 行之后没有数据。

试试这个

```
Option Explicit

Sub MoveColumns()
    Dim ws As Worksheet
    Dim lastCol As Long, i As Long
    Dim DelRange As Range

    Set ws = Sheets("BackOrder")

    With ws
        lastCol = .Cells.Find(What:="*", _
        After:=.Range("A1"), _
        Lookat:=xlPart, _
        LookIn:=xlFormulas, _
        SearchOrder:=xlByColumns, _
        SearchDirection:=xlPrevious, _
        MatchCase:=False).Column

        For i = 1 To lastCol
            If Application.WorksheetFunction.CountA(.Columns(i)) = 0 Then
                If DelRange Is Nothing Then
                    Set DelRange = .Columns(i)
                Else
                    Set DelRange = Union(DelRange, .Columns(i))
                End If
            End If
        Next

        If Not DelRange Is Nothing Then DelRange.Delete
    End With
End Sub 
```

高温高压

# delphi - 如何避免嵌入 iframe 元素的 OnDocumentComplete 事件？

> ID：10105150
> 
> 赞同：6
> 
> 时间：2012-04-11T11:38:28.597
> 
> 标签：delphi, iframe, delphi-7, twebbrowser

我想防止元素每次都`iframe`触发事件。`OnDocumentComplete`例如，一个页面有 4 个 iframe，当我加载这个页面时，我的`OnDocumentComplete`事件会运行 4 次。我只想`OnDocumentComplete`为每个页面运行一次。我怎样才能做到这一点？

也许我可以删除或阻止控制`iframes`。`TWebBrowser`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-11T12:13:48.057

主文档中的[`OnDocumentComplete`](http://docwiki.embarcadero.com/VCL/en/SHDocVw.TWebBrowser.OnDocumentComplete)每个`FRAME`/都会触发该事件。 如果您想忽略它们，请尝试以下操作：`IFRAME`

```
procedure TForm1.WebBrowser1DocumentComplete(Sender: TObject;
  const pDisp: IDispatch; var URL: OleVariant);
begin
  // check that the event is raised for the top-level browser (not frames or iframes)
  if pDisp = TWebBrowser(Sender).ControlInterface then
  begin
    // do something nice...
  end;
end; 
```

* * *

来自德尔福文档：

> 编写一个 OnDocumentComplete 事件处理程序以在框架或文档完全加载到 Web 浏览器中时执行特定操作。对于没有框架的文档，该事件在文档完成加载时发生一次。在包含多个帧的文档上，每个帧都会发生一次此事件。当多帧文档完成加载时，Web 浏览器最后一次触发该事件。
> 
> Sender 是加载文档的 Web 浏览器。
> 
> pDisp 是顶层框架或浏览器的自动化接口。当加载没有框架的文档时，pDisp 是 Web 浏览器的界面。当加载具有多个框架的文档时，这是包含框架的界面，除了最后一次发生事件时，它是 Web 浏览器的界面。

# c - C 应用程序中未处理的 win32 异常

> ID：10105151
> 
> 赞同：2
> 
> 时间：2012-04-11T11:38:33.573
> 
> 标签：c, exception

我有一个使用 Visual Studio 2010 在 C 下开发的应用程序。当我运行我的应用程序时，一切看起来都很好，直到它到达：

```
while ((row = mysql_fetch_row(result))) {
    t[k] = atof(row[num_fields - 1]);
    k++;
} 
```

选择查询没有任何问题。出现异常消息：

> 未处理的 win32 异常发生在...

我读了一些文章，这些文章告诉我这是释放内存的问题。

我已经添加了：

```
mysql_free_result(result);

free(t); 
```

但什么都没有改变。请帮忙。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-05-21T08:33:17.227

首先，你能做的更好的是使用调试器运行。话虽如此，我可以看到一些可能产生异常的事情：

*   如果 会发生什么`num_fields==0`？你会在`row`数组中得到一个异常
*   `mysql_fetch_row`在执行之前检查该行是否正确设置`atof`。例如，我会通过一些检查将相同的代码分成几行。

# sql-server - 如何在 Linq-to-SQL 中使用谓词搜索

> ID：10105152
> 
> 赞同：0
> 
> 时间：2012-04-11T11:38:35.157
> 
> 标签：sql-server, asp.net-mvc-3, linq-to-sql

我们在新项目中使用带有 SQL Server 的 Linq-to-SQL 作为 ORM。我以前从未使用过 Linq-to-SQL，所以我的问题可能有点愚蠢。我想要一个方法，通过谓词在数据库中搜索实体，如下所示：

```
public IEnumerable<T> Get<T>(Expression<Func<T, bool>> @where) 
```

您能否提供一些建议，让我可以看到一些代码示例或如何实现它的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:41:08.763

您想要 Where （在这里， originalList 是任何可枚举的，特别是它可以是您上下文中的表）：

```
var filteredList = originalList.Where(element => ShouldBeIncluded(element)); 
```

编辑：

或者

```
var filteredList =
    from element in originalList
    where ShouldBeIncluded(element)
    select element; 
```

如果 ShouldBeIncluded 是 a `Func<T, bool>`，则有一个引人注目的简化语法：

```
var filteredList = originalList.Where(ShouldBeIncluded); 
```

编辑2：另外，请注意完整的语法是：

```
var filteredList = originalList.Where<TTypeOfElement>(element => ShouldBeIncluded(element)); 
```

但是可以省略泛型参数，因为编译器会从 originalList 的类型中推断出它（假设它是 an `IEnumerable<TTypeOfelement>`）。

# spring - JBoss 5.1：Spring @Resource 注释不起作用

> ID：10105155
> 
> 赞同：0
> 
> 时间：2012-04-11T11:38:44.003
> 
> 标签：spring, resources, jboss5.x

我正在开发一个使用 Spring 3 和 Hibernate 3.5 和 Java 1.6 的应用程序。

到目前为止，我一直在使用 JBoss 4.2.1，一切都很好。

现在在迁移到 JBoss 5.1 时，我遇到了很多问题。其中之一是 JBoss 忽略了 Spring @Resource 注释。我得到以下异常：

> `java.lang.RuntimeException: mapped-name is required for serviceManager of deployment pol-1.0.war at org.jboss.web.tomcat.service.injection.WebResourceHandler.loadXmlResourceEnvRefs(WebResourceHandler.java:287) at org.jboss.web.tomcat.service.injection.WebResourceHandler.loadXml(WebResourceHandler.java:325) at org.jboss.web.tomcat.service.TomcatInjectionContainer.processMetadata(TomcatInjectionContainer.java:550) at org.jboss.web.tomcat.service.WebCtxLoader.start(WebCtxLoader.java:158)`

它期望每个 @Resource 的映射名称，如一些 ejb。

我见过类似的问题，但没有任何答案，例如：

[@Resource 注释不能与 JBoss5.0.1 一起正常工作](https://stackoverflow.com/questions/6581321/resource-annotation-not-working-properly-with-jboss5-0-1)

请指教。

阿迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:20:27.953

实际上，您的问题是 JBoss 不会忽略`@Resource`注释-它会尝试根据 EJB 规则处理它们，而不是将它们留给 Spring。

也许可以在 JBoss 配置中的某个地方禁用此功能，但最简单的解决方案是替换`@Resource`为`@Autowired`or `@Inject`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T20:48:31.887

听起来像 java 注释需要命名空间支持。

那么它将是@Spring:Resource 或@EJB:Resource。

甲骨文，你在听吗？

缺少注释的命名空间，您可以尝试更改类路径中库的顺序，以便 java 将首先（或最后）看到 Spring 注释，以最终提供所需结果为准。

# css - 在侧边栏中创建滚动条

> ID：10105160
> 
> 赞同：2
> 
> 时间：2012-04-11T11:39:10.513
> 
> 标签：css, scrollbar

我正在尝试在#main div 中创建一个滚动条，这样我就可以在不滚动页面或标题的情况下滚动它，但它不起作用。我错过了什么？

我的代码如下：

**CSS**

```
#topbar {
    height: 40px;
    background-color: blue;
}

#sidebar {
    position: absolute;
    top: 40px;
    bottom: 0px;
    width: 80px;
    overflow: hidden;   
}

#title {
    height:30px;
    background-color: red;
}

#main {
    height: auto;
    overflow: scroll;
} 
```

**HTML**

```
<div id="topbar">
    hello
</div>
<div id="sidebar">
    <div id="title">
        title
    </div>
    <div id="main">
        <!-- lots and lots of text-->
    </div>
</div> 
```

你可以在这里找到一个示例 JSFiddle：http: [//jsfiddle.net/PTRCr/](http://jsfiddle.net/PTRCr/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:22:32.447

你还在我看到的这个项目上。还有很多答案，但我认为没有人提出我认为您所要求的工作示例。

[这是一个工作](http://jsfiddle.net/FWdPe/3/)示例，（我希望）可以满足我的要求。

我添加了内容移动包装器，这样高度仍然可以是 100%。[您可以从此答案](https://stackoverflow.com/a/10092004/944301)中阅读有关该技术的更多信息。我还删除了所有绝对定位，我看不出你应该这样做的理由。

每个包装器都会针对之前的内容进行调整，首先是高度为 40 像素的顶部栏，然后是 30 像素的标题。

此示例还应遵循您之前的规范，其中滚动条在调整大小时将保持在同一基线上。

![预习](../Images/54cf2f31ecdb0ea7515f6f728c552e98.png)

正如你所看到的，通过下面的代码，尽管其他人已经让你相信了，**但可以做一个纯 CSS 的解决方案。**它只需要从 CSS 持有包中获取一些技巧。

伙计，我真是个笨蛋。

* * *

[示例](http://jsfiddle.net/FWdPe/3/)| 代码

HTML

```
<div id='container'>
    <div id="top-bar">hello</div>
    <div class="wrapper">
        <div class="side-bar">
            <div class="title">title</div>
            <div class="content_wrapper">
                <div class="content">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur gravida interdum dignissim. Aenean quis neque diam, ac vehicula turpis. Vestibulum lacinia libero sed massa fringilla tempor. Donec dictum metus ac justo congue lacinia sit amet quis nisi. Nam sed dolor vitae nisi venenatis imperdiet ut ullamcorper sem. Maecenas ut enim in massa ultricies lacinia quis nec lorem. Etiam vel lacus purus, a placerat lectus. Ut sed justo eros. Curabitur consequat nisi ut diam lacinia at posuere purus tristique. Quisque eu dapibus nunc.</div>
            </div>
        </div><div class="side-bar">
            <div class="title">title</div>
            <div class="content_wrapper">
                <div class="content">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur gravida interdum dignissim. Aenean quis neque diam, ac vehicula turpis. Vestibulum lacinia libero sed massa fringilla tempor. Donec dictum metus ac justo congue lacinia sit amet quis nisi. Nam sed dolor vitae nisi venenatis imperdiet ut ullamcorper sem. Maecenas ut enim in massa ultricies lacinia quis nec lorem. Etiam vel lacus purus, a placerat lectus. Ut sed justo eros. Curabitur consequat nisi ut diam lacinia at posuere purus tristique. Quisque eu dapibus nunc.</div>
            </div>
        </div><div class="side-bar">
            <div class="title">title</div>
            <div class="content_wrapper">
                <div class="content">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur gravida interdum dignissim. Aenean quis neque diam, ac vehicula turpis. Vestibulum lacinia libero sed massa fringilla tempor. Donec dictum metus ac justo congue lacinia sit amet quis nisi. Nam sed dolor vitae nisi venenatis imperdiet ut ullamcorper sem. Maecenas ut enim in massa ultricies lacinia quis nec lorem. Etiam vel lacus purus, a placerat lectus. Ut sed justo eros. Curabitur consequat nisi ut diam lacinia at posuere purus tristique. Quisque eu dapibus nunc.</div>
            </div>
        </div><div class="side-bar">
            <div class="title">title</div>
            <div class="content_wrapper">
                <div class="content">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur gravida interdum dignissim. Aenean quis neque diam, ac vehicula turpis. Vestibulum lacinia libero sed massa fringilla tempor. Donec dictum metus ac justo congue lacinia sit amet quis nisi. Nam sed dolor vitae nisi venenatis imperdiet ut ullamcorper sem. Maecenas ut enim in massa ultricies lacinia quis nec lorem. Etiam vel lacus purus, a placerat lectus. Ut sed justo eros. Curabitur consequat nisi ut diam lacinia at posuere purus tristique. Quisque eu dapibus nunc.</div>
            </div>
        </div>
    </div>
</div> 
```

CSS

```
body, html{
    height:100%;
    width: 100%;
    line-height: 100%;
    margin: 0;          /* Normalization */
    padding: 0;         /* Normalization */
}

div{
    box-sizing: border-box;
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
}

#container{
    height:100%;
    width: 100%;
    text-align: center;
    overflow: auto;
}

#top-bar{
    height: 40px;
    line-height: 40px;
    border: 1px solid lightblue;
    background: blue;
    color: white;
    text-align: center;
}

.side-bar {
    width: 120px;
    height: 100%;
    text-align: center;
    color: white;
    border: 1px solid DarkOrchid;
    display: inline-block;
    vertical-align: top;
}

.title {
    height:30px;
    line-height: 30px;
    border: 1px solid salmon;
    background: red;
}

.wrapper{
    margin-top: -40px;
    padding-top: 40px;
    height: 100%;
    width: 100%;

    white-space: nowrap;
}

.wrapper > div{
    white-space: normal;
}

.content_wrapper{
    margin-top: -30px;
    padding-top: 30px;
    height: 100%;
}

.content{
    color: black;
    height: 100%;
    overflow: auto;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T11:57:33.073

CSS 是样式表，其唯一目的是为文档设置样式。他们无法调查预先存在的元素。

唯一的方法是 div 的大小是否必须固定，或者您必须使用一些 JavaScript 来找出确切的高度。其他用户已经介绍了可以使用 CSS 完成此操作的方法。

所以，这是一种使用 jQuery 的方法

```
$("#main").height($(document).innerHeight()-$("#title").outerHeight() - $("#topBar").outerHeight()); 
```

[演示](http://jsfiddle.net/Starx/PTRCr/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T11:42:37.297

你想要可滚动的元素，应该

*   定义了高度和宽度
*   有属性`overflow:auto`

例子：

```
.scrollArea {
 width: 275px;
 height: 100px;
 padding-left: 5px;
 padding-right: 5px;
 border-color: #6699CC;
 border-width: 1px;
 border-style: solid;
 float: left;
 overflow: auto;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T16:42:43.660

您需要为#main 设置高度。它在[http://jsfiddle.net/PTRCr/7/工作](http://jsfiddle.net/PTRCr/7/)

```
#main {
    height: 100px;
    overflow-y: scroll;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T11:46:14.207

在您的情况下更改 CSS：

```
#sidebar {
position: absolute;
top: 40px;
bottom: 40px;
width: 80px;
overflow: scroll;   
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-11T11:47:02.427

您应该定义`height`of`<div id="main"`以在其上显示滚动条。无论您是使用 javascript 还是 jquery 计算它。

```
 #topbar {
    height: 40px;
    background-color: blue;
}

#sidebar {
    position:absolute;
    top: 40px;  
    bottom: 40px;
    width: auto;
    height:200px;
    overflow: hidden;   
}

#title {
    height:30px;
    background-color: red;
}

#main {
    height: 100px;
    width: 100%;
    overflow:auto;
} 
```

检查这个更新[的 jsFiddle](http://jsfiddle.net/gpcC6/15/)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-12T10:20:32.363

仅当您知道#title 的高度时才可能，无论是在其中一个`px`还是作为其父容器的百分比

#title 在`px` [jsFiddle中设置](http://jsfiddle.net/PTRCr/16/)

```
#main {
    position:absolute;
    top:30px; /* set this to whatever you have set the height of #title to*/
    bottom:0px;
    overflow-y: scroll;
} 
```

#title 设置为 % [jsFiddle](http://jsfiddle.net/PTRCr/17/) - 在 IE/FF/Chrome 中测试

# asp.net - 如何在 asp.net 会员中删除返回 url

> ID：10105161
> 
> 赞同：0
> 
> 时间：2012-04-11T11:39:26.053
> 
> 标签：asp.net

我正在使用 asp.net 成员资格，并且我从 loin 页面上的代码 plex 获得了一些代码，这些代码对所有角色成员都是通用的，我正在执行以下代码：

```
protected void Login1_Authenticate(object sender, AuthenticateEventArgs e)
{
//some code missing
below is to identify role and then redirecting to appropriate default page
else
        {
            // Next, determine if the user's username/password are valid
            if (Membership.ValidateUser(loginUsername, loginPassword))
            {
                e.Authenticated = true;
                string[] userRoles = Roles.GetRolesForUser(loginUsername);

                switch (userRoles[0])
                {
                    case "Administrator":
                        Login1.DestinationPageUrl = "~/Admin/Default.aspx";
                        break;
                    case "Member":
                        Login1.DestinationPageUrl = "~/Members/Default.aspx";
                        break;

                }
            }
} 
```

但是当我注销时，它会正确注销，将我重定向到注销页面，但附加了一个返回 URL：

```
http://localhost:52045/NexLev/login.aspx?ReturnUrl=%2fNexLev%2fMembers%2fDefault.aspx 
```

因此，如果成员第一次登录，则需要更正页面，然后如果它注销，则上述 url 会出现在注销页面上，但下次如果管理员登录，则需要登录到登录模板保持相同的 LoginView登录页面而不是将其带到管理员的默认页面。

有人可以建议如何克服这个问题吗？或者我应该根据用户角色应用不同的方法来重定向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:55:42.793

在`Login1_LoggedIn`事件尝试

```
Response.Redirect(Login1.DestinationPageUrl); 
```

这将强制 LoggedIn 事件重定向到 DestinationPageUrl 页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T11:51:50.013

您可以为所有用户（成员和管理员）使用通用默认页面，而不是设置`DestinationPageUrl`依赖于角色。用户登录后，他会被重定向到通用默认页面，该页面所做的只是检查用户的角色，然后使用 将用户重定向到正确的页面`Response.Redirect`。

# ios - uibarbuttonitem 不起作用

> ID：10105164
> 
> 赞同：0
> 
> 时间：2012-04-11T11:39:37.207
> 
> 标签：ios, uibarbuttonitem

```
- (void)viewDidLoad {
    [super viewDidLoad];
    UIBarButtonItem *refreshButton = [[UIBarButtonItem alloc] initWithTitle:@"Refresh" style:UIBarButtonItemStylePlain target:self action:@selector(refreshButtonClicked:)];
    [self.navigationItem setRightBarButtonItem:refreshButton animated:YES];
}
- (void)refreshButtonClicked:(id)sender {
    NSLog(@"Refreshed.");
} 
```

我在 AppDelegate 中以编程方式添加了一个导航控制器，并将此视图设置为根。

当我尝试以编程方式添加导航项时，如上所示，`refreshButton`导航栏中显示`refreshButtonClicked:`但未调用。

有什么问题？欢迎任何建议和意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:27:40.753

调用 viewDidLoad 中的超类

```
- (void)viewDidLoad {
    [super viewDidLoad];
    UIBarButtonItem *refreshButton = [[UIBarButtonItem alloc] initWithTitle:@"Refresh" style:UIBarButtonItemStylePlain target:self action:@selector(refreshButtonClicked:)];
    [self.navigationItem setRightBarButtonItem:refreshButton animated:YES];
} 
```

它将确保完成根类设置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:25:17.613

问题解决了。奇怪的。在我清理构建、删除派生数据并重新启动 Xcode 后，它可以正常运行。

# facebook - Facebook iFrame 画布应用 PHP 会话问题

> ID：10105168
> 
> 赞同：5
> 
> 时间：2012-04-11T11:39:51.900
> 
> 标签：facebook, internet-explorer, session, iframe, safari

我在过去一天半的时间里一直在解决一个问题，但仍未找到解决方案。

当在 facebook（在 facebook 的 iFrame 中）访问我的游戏时，php 会话不起作用。这适用于 IE 和 Safari。铬工作正常。

我已经阅读了堆栈上有关此问题的所有帖子，这似乎取决于第三方 cookie 安全性并且需要首先与 iFrame 交互。有一种解决方法是先让 javascript 将一些表单数据发布到 iFrame，但这似乎已在最近版本的浏览器中“修复”，因为这不再有效。

我什至尝试实现一个起始页面，要求他们首先单击一个链接（在 iFrame 中）以加载另一个页面，然后创建会话。但即使这样也行不通。

我什至使用 javascript 在 iF​​rame 中加载新页面也遇到了麻烦，这似乎总是会导致无限循环刷新。

不，P3P 标头不能解决它。

有没有人可以解决这个问题？考虑到存在多少 Facebook 应用程序，我不能成为唯一一个拥有它的人！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T17:48:05.150

我使用禁用了“接受第三方cookies”的客户端遇到了这个问题。我的解决方案是通过将此行放在每个页面的开头来强制 PHP 将会话 ID 嵌入到 URI 中：

```
ini_set('session.use_trans_sid', true); 
```

由于 URL 位于 Facebook 内的 iframe 中，因此顶部窗口中看不到 SID。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T23:23:11.173

对于 IE，您将需要 P3P 标头集。就像是：

```
<?php header('P3P: CP="CAO PSA OUR"'); ?> 
```

默认情况下，Safari 会阻止 3rd-party cookie。目前，唯一对我有用的解决方法是“弹出”一个新窗口来设置 cookie。我有这样的事情：

```
<script type="text/javascript">
    function safariFix(){
        if (navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Chrome') == -1){
            window.open('https://yourdomainname.com/safari.php', 'Safari Fix','width=100,height=100');
        }
    }
</script> 
```

safari.php**会有**这个：

```
<?php 
setcookie("safari_test", "1");
?>
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Safari Fix</title>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script> 
    </head>
    <script type="text/javascript">
    $(document).ready(function(){
        window.close();
    });
    </script>
    <body>
        Since Safari does not accept third-party cookies by default, we are forced to open this window.
        This window will automatically close once we have set the cookies.
    </body>
</html> 
```

**问题：**如果用户在 Safari 中启用了“阻止弹出窗口”，这将不起作用。如果有人对此有更好的解决方案，请告诉我；）

# xpages - xe:objectData - 对象已被删除或回收

> ID：10105169
> 
> 赞同：1
> 
> 时间：2012-04-11T11:39:57.217
> 
> 标签：xpages, xpages-extlib

我使用 xe:objectData 作为 xp:dataTable 的数据源。objectData1 使用一些 Java 代码从视图中检索与键（用户名）匹配的所有文档。Java 代码如下所示：

```
package com.isatweb.cois;

import static com.ibm.xsp.extlib.util.ExtLibUtil.getCurrentDatabase;
import static com.ibm.xsp.extlib.util.ExtLibUtil.getCurrentSession;

import java.io.Serializable;

import lotus.domino.Database;
import lotus.domino.Name;
import lotus.domino.Session;
import lotus.domino.View;
import lotus.domino.ViewEntryCollection;

public class ObjectDataVisits implements Serializable {

    private static final long serialVersionUID = 1L;

    ViewEntryCollection vec = null;
    public ObjectDataVisits(){
        try {
            this.update();
        } catch (Exception e) {
            System.out.print(e);
        }
    }

    public void update()  {
        try {
            Database _db = getCurrentDatabase();
            Session _session = getCurrentSession();
            Name nam = _session.createName(_session.getEffectiveUserName());
            String username = nam.getAbbreviated().replace(" ", "#").replace("/", "#").toUpperCase();
            View view = _db.getView("vw_visit_open");
            this.vec = view.getAllEntriesByKey(username);

        } catch (Exception e) {
            System.out.print(e);
        }
    }

    public ViewEntryCollection getVisits(){
                return this.vec;
    }
} 
```

XPage 有以下代码 ![在此处输入图像描述](../Images/af2e19929e0d65c71f35be03ea15e716.png)

当我第一次加载页面时，从 wiew 读取数据，dataTable 显示所有匹配文档的 NoteID。当我使用按钮刷新页面时，我收到“对象已被删除或回收”错误。任何人都可以请。告诉我我做错了什么？（也许，如何正确地做）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T12:03:06.423

问题是，Notes 对象不可序列化。在部分刷新期间，*getVisits()*方法在*update()方法***之前**执行。ViewEntryCollection 是对视图的引用，并且该视图已被回收。

 *如果您只想存储一些便笺 ID，则可以将它们存储在 Vector 中。否则，您每次都必须在*getVisits()方法中调用**update()*方法。*

# magento - 我可以覆盖 Magento Varien 类吗？

> ID：10105170
> 
> 赞同：1
> 
> 时间：2012-04-11T11:39:59.593
> 
> 标签：magento

我知道如何覆盖 Mage 类（其中的任何类`app/code/core`） 我的问题是如何覆盖 Varien 类？（内的类`lib/Varien`）

如果我想覆盖我在下面`Mage_Adminhtml_Block_Page_Menu` 创建一个类`MyCompany_Adminhtml_Block_Page_Menu``app/code/local/MyCompany/Adminhtml/Block/Page/Menu.php`

我把它命名为：

```
 class MyCompany_Adminhtml_Block_Page_Menu extends Mage_Adminhtml_Block_Page_Menu 
```

现在 Magento 使用我的课程`MyCompany_Adminhtml_Block_Page_Menu`而不是`Mage_Adminhtml_Block_Page_Menu`

我的问题是：我应该把新类放在哪里，以及如何命名它，例如覆盖 `Varien_Date`（`lib/Varien/Date.php`）

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T12:39:25.910

**如果必须**，请将文件和路径复制到*本地*代码池并进行必要的更改。没有用于更改类名的配置映射。

说明：参见*app/Mage.php*中的引导。按以下顺序为代码池和库设置了加载顺序：

1.  *应用程序/代码/本地/*
2.  *应用程序/代码/社区/*
3.  *应用程序/代码/核心/*
4.  *库/*

通常，`Varien_Autoload`负责将类名如 , 或映射`Varien_Data_Collection_Db`到`Mage_Core_Model_Abstract`相关`Zend_Db_Select`文件名（分别为*Varien/Data/Collection/Db.php*、*Mage/Core/Model/Abstract.php*和*Zend/Db/Select.php*）。然后将这些文件位置传递给`include()`，它在内部使用引导程序中设置的加载顺序。因此，如果文件*Varien/Data/Collection/Db.php*存在于“早期”位置之一下，则将使用*该版本的类定义。*

这些类型的修改可能是合理的，但它们应该经过深思熟虑并记录在案，因为整个定义将归您所有，并且将来需要合并任何升级。最好知道您想更改什么，因为其他人可能有一个侵入性稍小的选项。

# java - 从方法访问字段的正确方法是什么

> ID：10105172
> 
> 赞同：0
> 
> 时间：2012-04-11T11:40:08.440
> 
> 标签：java, class, methods, private, field

我想从方法访问类中的 StringBuilder 字段。字段和方法都是非静态的。我已经尝试了很多方法，而且无论我采用哪种方法，这一切似乎都有效，但我只是想知道正确的方法是什么。这是我的意思的一个例子：

```
public class ExampleClass {
    private StringBuilder sb = new StringBuilder();
    private void call() {
        sb.append("Test"); // I can do it this way
        this.sb.append("Second way"); // or this way
        // does it matter? can someone explain it to me?
    }
    public static void main(String[] args) {
        ExampleClass ec = new ExampleClass();
        ec.call();
    }
} 
```

我只是不明白这一点。我可能只是一个彻头彻尾的白痴，但访问该字段的正确方法是什么？

非常感谢，

保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:42:54.220

这两个是有区别的

```
sb.append("Test"); // I can do it this way
this.sb.append("Second way"); // or this way 
```

仅当您在该上下文中有一些其他变量也称为`sb`.

例如：

```
public class ExampleClass {
    private StringBuilder sb = new StringBuilder();
    private void call(StringBuilder sb) {
        sb.append("Test"); //refers to the parameter passed to the function
        this.sb.append("Second way"); //refers to your member
    }
    public static void main(String[] args) {
        ExampleClass ec = new ExampleClass();
        StringBuilder sb = new StringBuilder();
        ec.call(sb);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:42:51.773

在您的示例中，`sb`并`this.sb`引用同一个对象，这是该实例的字段`ExampleClass`。您可以使用其中任何一个。

在你的情况下，我会使用`sb`，因为没有歧义。在以下情况下使用`this`可能很有用：

```
public void setBuilder(StringBuilder sb) {
    this.sb = sb;
} 
```

`this.sb`是你的类字段，`sb`是`setBuilder`方法的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T11:42:52.363

没有“正确的方法”可以做到这一点。我宁愿不使用`this`，除非它不明确，因为在 IDE 中，该字段为我突出显示，所以我可以看到它正在解析为一个字段。此外，太多`this`的 's 混乱的代码。许多其他人更喜欢添加`this`，因为这样就不会让读者产生歧义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T11:43:06.500

我不确定这种情况是否有标准。

基本上“this”是隐含的，在你的情况下没有歧义（如果你有一个同名的参数，或者超类中的受保护/公共字段）。

我通常使用“this”，但这是个人喜好问题，我发现何时访问类参数更容易快速查看。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T11:44:04.157

两者本质上都在做同样的事情。在这种情况下使用 this 是多余的..

# json - 使用 jquery 或 ajax 从 json 查看数据和操作日期

> ID：10105177
> 
> 赞同：0
> 
> 时间：2012-04-11T11:40:43.087
> 
> 标签：json

首先，我是 jquery 和 ajax 的初学者，我想做的是在链接中查看整个 json 文件中的示例

[http://soap.madarat.jo/Services/BusinessApplication1-DomainService1.svc/json/gettasks](http://soap.madarat.jo/Services/BusinessApplication1-DomainService1.svc/json/gettasks)

以及编辑样本的可能性是什么，

```
 <!DOCTYPE HTML>
 <html>
 <head>
<title>json test</title>
<script src="js/json2.js" type="text/javascript"></script>
<script src="js/jquery-1.4.2.js" type="text/javascript"></script>
<script src="jtip.js" type="text/javascript"></script>

  <script type="text/javascript">

  function query() {
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.open("GET", "http://soap.madarat.jo/Services/BusinessApplication1-       DomainService1.svc/json/gettasks", false);
        xmlhttp.send();
        var results = JSON.parse(xmlhttp.responseText);
        var html = '<ol>';
        alert(results.GetTasksResult);
        if (results.GetTasksResult != null) {
            var title;
            alert(results);
            for (var i = 0; i < results.GetTasksResult.RootResults.length; i++ ) {

                entity = results.GetTasksResult.RootResults[i];
                html += '<li>'+entity.DoctorID +' by <b>'+ entity.TaskNote +'</b></li> <br><br> ';
            }
            document.getElementById('results').innerHTML = html;
        }
    }

  </script>
 </head>
 <body>

    <button type="button" onclick="query()">jquery</button>
        <div id="results" />

</body>
</html> 
```

但是当我点击按钮时没有任何反应，

为什么会这样

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T20:57:57.487

您没有正确使用您的请求者对象。你所做的只是发出一个请求，但没有等待它的回复。此代码异步工作，但您认为它是同步的，这就是您在获得数据之前就开始处理数据的原因。

## 使用 jQuery 发出 Ajax 请求

```
$.ajax({
   type: "GET",
   url: "http://soap.madarat.jo/Services/BusinessApplication1-DomainService1.svc/json/gettasks",
   success: function(data, status, xhr){
       data = data + "" == data ? $.parseJSON(data) : data;
       var el = $("#results").append("<ol></ol>").children("ol").first();
       if (data.GetTaskResult) {
           $.each(data.GetTaskResult.RootResult, function() {
               el.append("<li>" + this.DoctorID + " by <b>" + this.Tasknote + "</b></li>");
           });
       }
   }
}); 
```

这可能有错误，但它应该与您的代码大致相同。

另外，你儿子不需要添加 json2 库，我不知道你的 jtip。

## 我能给你的最好的建议

尝试首先熟悉您正在使用的库。在你的情况下，这将是 jQuery。它使您编写独立于浏览器的 Ajax 代码变得更加简单。即使它在那里，你也没有使用过它。**学习它，使用它**。浏览它的所有文档以了解如何使用它以及为什么这样做是明智的，不应该花费你一天的时间。

**[jQuery 文档](http://docs.jquery.com)**

# jquery - JQuery 在调整大小事件期间添加类。调整大小事件后删除类

> ID：10105180
> 
> 赞同：0
> 
> 时间：2012-04-11T11:40:54.953
> 
> 标签：jquery

我想在 .resize() 事件期间和在 resize 事件恢复为默认 css 属性之后编辑 div 元素的 css。

**添加上下文：** 假设我想设置显示：无；在我调整浏览器窗口大小时到全屏图片库。但是在我停止调整大小（超时？）后，将内容淡入。

或在调整大小时切换类。

希望你能明白！最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:46:18.250

```
timer = 0;
function start() {
    $("#id").addClass("resizing");
}
function stop() {
    $("#id").removeClass("resizing");
}
$(window).resize(function(){
    if (timer) {
        clearTimeout(timer);
    }
    timer = setTimeout(stop, 1000);
    start();
}); 
```

# c - 分析项目时如何解决 dyld 和 localtime 泄漏？

> ID：10105181
> 
> 赞同：3
> 
> 时间：2012-04-11T11:40:55.613
> 
> 标签：c, macos, valgrind, xcode-instruments, dyld

我正在分析我的来源。当我运行时，我看到一些在退出时仍然存在的分配`valgrind`。
这是摘要：

```
$ valgrind --track-origins=yes --show-reachable=yes --leak-check=full $BINARY

...

==20235== LEAK SUMMARY:
==20235==    definitely lost: 0 bytes in 0 blocks
==20235==    indirectly lost: 0 bytes in 0 blocks
==20235==      possibly lost: 0 bytes in 0 blocks
==20235==    still reachable: 20,228 bytes in 37 blocks
==20235==         suppressed: 0 bytes in 0 blocks
==20235== 
```

负责的图书馆是：

`dyld`：所有 81 个 malloc 都有共同的调用：（不知道）

![代号](../Images/20ad731afbf592663c995e8df3af0074.png)

`{libsystem_c, libsystem_notify, libdispatch}.dylib`：所有 10 个 malloc 都有共同的调用：

![当地时间](../Images/bbc181375d2bef9b660c5e9cf34f4f52.png)

`localtime(...)`在用于初始化和返回我不应该的`time.h`用途中定义，因为我没有分配它。`tzset(...)``struct tm*``free`

如何恢复这些仍然可以访问的 20,228 字节？

## 更新

* * *

我正在运行 Mac OS X

# java - 根据 log4j 中的日志记录级别创建不同的日志

> ID：10105184
> 
> 赞同：5
> 
> 时间：2012-04-11T11:41:02.977
> 
> 标签：java, log4j, logging

我正在尝试根据不同级别创建“不同”附加程序，但到目前为止我找不到隔离日志级别的方法......

```
<category name="com.sample" additivity="false">
    <priority value="INFO" />
    <appender-ref ref="AllAsync"/> 
    <appender-ref ref="ConsoleAppender"/> 
  </category> 
```

我需要一种方法来仅登陆要附加的 INFO 优先日志。由于 INFO 级别的日志记录也会放在带有 DEBUG 标记的记录器上……这对我没有帮助。

另一件事是对于“相同”的包，我无法定义不同的日志记录附加程序：

```
 <category name="com.sample" additivity="false">
            <priority value="INFO" />
            <appender-ref ref="AllAsync"/> 
            <appender-ref ref="ConsoleAppender"/> 
          </category>

     <category name="com.sample" additivity="false">
        <priority value="DEBUG" />
        <appender-ref ref="AllAsync"/> 
        <appender-ref ref="ConsoleAppender"/> 
      </category> 
```

在这里，我收到类似的错误：

```
log4j:ERROR Attempted to append to closed appender named [AllAsync].
log4j:ERROR Attempted to append to closed appender named [ConsoleAppender].
log4j:ERROR Attempted to append to closed appender named [ConsoleAppender].
log4j:ERROR Attempted to append to closed appender named [ConsoleAppender]. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T14:52:14.767

您可以根据 log4j 常见问题解答和 wiki 使用 LevelMatchFilter 按确切的日志级别进行过滤。

```
 <filter class="org.apache.log4j.varia.LevelMatchFilter">
         <param name="LevelToMatch" value="info"/> 
         <param name="AcceptOnMatch" value="true"/>  
 </filter> 
```

[这里](http://wiki.apache.org/logging-log4j/LogByLevel)的例子。

# sql - 如何在 GROUP BY 获得的 MS Access 查询中连接结果字符串

> ID：10105185
> 
> 赞同：2
> 
> 时间：2012-04-11T11:41:07.423
> 
> 标签：sql, string, ms-access, concatenation

我已经看到可以在 Access 中使用 & 连接字符串。

但是，我无法编写以下查询：

```
SELECT age, &names ==> this line does not work, how can I concatenate the strings? 
    FROM table GROUP BY age; 
```

以我为例：`"30; JohnWilliamPeter",`他们都是 30 岁。

有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:42:59.453

你的意思是：

```
 SELECT age & "; " & names
 FROM table 
 GROUP BY age & "; " & names 
```

但是，这似乎您的目标是一个应该是演示文稿而不是 SQL 的解决方案。

# java - Java：IndentingXMLStreamWriter 替代方案？

> ID：10105187
> 
> 赞同：12
> 
> 时间：2012-04-11T11:41:11.177
> 
> 标签：java, xml, indentation, stax

我正在使用 StAX 创建一个相当大的 xml 文档。到目前为止，我一直在使用 IndentingXMLStreamwriter 类来获取格式良好的文档（另请参阅[此答案](https://stackoverflow.com/questions/290326/stax-xml-formatting-in-java/3625359#3625359)）。几天前，我们使用较旧的 jdk 版本（6.26）设置了 jenkins 服务器，在该服务器上出现构建错误。

```
package com.sun.xml.internal.txw2.output does not exist 
```

我假设由于安装了 jdk 版本而无法找到该软件包。由于不同的原因，这无法更改（顺便说一句，有没有人知道添加了这个包（com.sun.xml.internal.txw2.output）的jdk版本？）。
因此，我正在寻找一种替代方法来进行缩进。我更喜欢与我使用的解决方案类似的解决方案，这意味着无需重新解析文档。有什么想法或建议吗？

谢谢拉斯
_

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-11-25T12:59:22.997

而不是可以在以下位置找到的`com.sun.xml.internal.txw2.output.IndentingXMLStreamWriter`用途：`com.sun.xml.txw2.output.IndentingXMLStreamWriter`

```
<dependency>
    <groupId>org.glassfish.jaxb</groupId>
    <artifactId>txw2</artifactId>
    <version>2.2.11</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-06-04T07:22:06.693

只是扩展迈克尔凯的答案（[https://stackoverflow.com/a/10108591/2722227](https://stackoverflow.com/a/10108591/2722227)）。

maven依赖：

```
<dependency>
            <groupId>net.sf.saxon</groupId>
            <artifactId>Saxon-HE</artifactId>
            <version>9.6.0-5</version>
</dependency> 
```

爪哇代码：

```
import java.io.OutputStream;
import net.sf.saxon.Configuration;
import net.sf.saxon.s9api.Processor;
import net.sf.saxon.s9api.SaxonApiException;
import net.sf.saxon.s9api.Serializer;
import net.sf.saxon.s9api.Serializer.Property;

public class Main {

    public static void main(String[] args) throws Exception {
        OutputStream outputStream = System.out;
        writeXmlDocument(outputStream);
    }

    private static void writeXmlDocument(OutputStream outputStream){
        Configuration config = new Configuration();
        Processor processor = new Processor(config);
        Serializer serializer = processor.newSerializer();
        serializer.setOutputProperty(Property.METHOD, "xml");
        serializer.setOutputProperty(Property.INDENT, "yes");
        serializer.setOutputStream(outputStream);

        try {
            XMLStreamWriter writer = serializer.getXMLStreamWriter();
            try {
                writer.writeStartDocument();
                {
                    writer.writeStartElement("root_element_name");
                    {
                        writer.writeStartElement("child_element");
                        writer.writeEndElement();
                    }
                    writer.writeEndElement();
                }
                writer.writeEndDocument();
                writer.flush();
                writer.close();
            } catch (XMLStreamException e) {
                e.printStackTrace();
            }

        } catch (SaxonApiException e) {
            e.printStackTrace();
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-11T14:59:33.123

如果其他建议不起作用，您可以从 Saxon 获取缩进 XMLStreamWriter，如下所示：

```
Processor p = new net.sf.saxon.s9api.Processor();
Serializer s = p.newSerializer();
s.setOutputProperty(Property.METHOD, "xml");
s.setOutputProperty(Property.INDENT, "yes");
s.setOutputStream(....);
XMLStreamWriter writer = s.getXMLStreamWriter(); 
```

一个优点是，这允许您使用其他序列化属性对序列化进行大量控制。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-07T23:35:57.927

有一个 IndentingXmlStreamWriter 的替代实现，它作为开源 stax-utils 项目的一部分在这里提供：http: [//java.net/projects/stax-utils/pages/Home](http://java.net/projects/stax-utils/pages/Home)

stax-utils 似乎是一个项目，旨在为 Java 提供基于 jsr-173 流 xml api 的实用程序

您需要将 stax-utils jar 添加为项目的依赖项。然后你可以导入 javanet.staxutils.IndentingXmlStreamWriter

由于 stax-utils 在 maven 中央存储库中，如果您使用 maven 作为依赖项，您可以通过以下方式获得它：

```
 <dependency>
        <groupId>net.java.dev.stax-utils</groupId>  
        <artifactId>stax-utils</artifactId>
        <version>20070216</version>
        <exclusions>
            <exclusion>
                <groupId>com.bea.xml</groupId>
                <artifactId>jsr173-ri</artifactId>
            </exclusion>
        </exclusions>
    </dependency> 
```

功能似乎与 txw2 类非常相似/等效

因为我使用的是 jdk 1.7，所以我已经排除了 jsr173-ri。我认为 1.6+ 将 jsr173 api 作为标准功能，但如果您使用 1.5 或更低版本，则需要额外的 jsr173 jar。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-15T21:34:59.763

如果您使用的是 Maven 和 Java 8，则可以导入以下内容以使用此类：

```
 <!-- https://mvnrepository.com/artifact/com.sun.xml.bind/jaxb-impl -->
        <dependency>
            <groupId>com.sun.xml.bind</groupId>
            <artifactId>jaxb-impl</artifactId>
            <version>2.1.17</version>
        </dependency> 
```

然后，将其导入为：`import com.sun.xml.txw2.output.IndentingXMLStreamWriter;`

# php - 使用 php 从 mysql 数据库表创建/更新 xml 文件

> ID：10105193
> 
> 赞同：0
> 
> 时间：2012-04-11T11:41:19.883
> 
> 标签：php, xml

我有一个从 XML 文件中获取数据的 javascript 图片库。我正在构建后端功能，以便其他人轻松更新图库。XML 文件中所需的所有数据都可以从我的数据库中的表中获得。

```
<?xml version="1.0" encoding="UTF-8"?>
<portfolio>
<items> 
    <item>
        <thumbnail>images/banner001.jpg</thumbnail>
        <preview>images/preview.jpg</preview>
        <category>banner</category>
        <description>Swatch MTV </description>
    </item>
    <item>
        <thumbnail>images/banner002.jpg</thumbnail>
        <preview>images/preview.jpg</preview>
        <category>banner,campaign</category>
        <description>Nike iD</description>
    </item>
    <item>
        <thumbnail>images/banner003.jpg</thumbnail>
        <preview>images/preview.jpg</preview>
        <category>banner</category>
        <description>Sony Handycam</description>
    </item>
    <item>
        <thumbnail>images/banner006.jpg</thumbnail>
        <preview>images/preview.jpg</preview>
        <category>banner</category>
        <description>Statoil App kampagne</description>
    </item>     
    <item>
        <thumbnail>images/design006.jpg</thumbnail>
        <preview>images/preview.jpg</preview>
        <category>web</category>
        <description>Hempel Website design</description>
    </item>

</items>
</portfolio> 
```

在这方面，我有几个问题（请记住，我对 php 相当陌生）：

1.  哪个是更好/更容易的选择：更新现有的 xml 文件或简单地用更新/更新的数据覆盖整个 xml 文件？
2.  如何使用 php 创建相同的 xml 格式？
3.  我一直在研究 SimpleXML 和 DOMDocument。在我的情况下，哪一个更好/更容易使用？

我会很感激你们能给我的任何帮助。如果发布代码，请附上简短的描述/解释。

如果您需要任何澄清，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:32:05.393

我认为用较新/更新的数据覆盖整个 xml 文件很容易。下面是通过连接到数据库来创建 xml 数据的 php 文件。

测试.php

```
<?php header('Content-type: application/xml');echo "<?xml version=\"1.0\" encoding=\"UTF-8\"?>";

    //connect to db here
    $query1 = "select datas";
    $res1   = mysql_query($query1);
    echo '<portfolio>';
    echo '<items>';
    while($row1 = mysql_fetch_array($res1)) 
    {
    ?>
      <item>
        <thumbnail><?php echo $row1['yourdata1']; ?></thumbnail>
        <preview><?php echo $row1['yourdata2']; ?></preview>
        <category><?php echo $row1['yourdata3']; ?></category>
        <description><?php echo $row1['yourdata4']; ?></description>
      </item>
   <?php
   } 
  ?>
  </items>
</portfolio> 
```

如果上面的文件名是test.php，那么你可以编写.htaccess 重定向来将url 重定向到.php 文件，当url 给出为.xml 时

当 URL 为[http://yoursitename.com/test.xml时，下面的代码重定向到 test.php](http://yoursitename.com/test.xml)

```
RewriteCond %{REQUEST_URI} test.xml
RewriteRule test.xml test.php [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:49:30.260

广告1）恕我直言，最好将条目更新（添加/删除）xml文件，如果您每次都生成新文件（以防有大量图像），您将不得不将大量数据保存到文件中......它没有对我来说似乎是正确的方法。

广告 2) php 有几个库可以帮助创建 xml 文件，例如你提到的 simplexml - 我不时使用它并且工作正常。

广告 3）再次恕我直言，很简单，易于理解的用途，我会推荐它。我认为没有必要在这里展示它是如何工作的......谷歌有很多例子。

万一你会坚持不要在这里问的事情。

# .net - 对话框必须由用户启动。银光

> ID：10105197
> 
> 赞同：3
> 
> 时间：2012-04-11T11:42:01.853
> 
> 标签：.net, silverlight

我已经阅读了几乎所有关于这个错误的 SO 线程。我发现 Openfiledialog 必须是您视图的代码隐藏文件中 Button Click Handler 的第一行。

我已经这样做了，但我仍然随机收到此错误。

```
Dialogs must be user-initiated.

at System.Windows.Controls.OpenFileDialog.ShowDialog()
at Portal.Presentation.SL.Views.AddEditPatient.Button_Click(Object sender, RoutedEventArgs e) 
```

任何指针？我正在使用银光 4

问候。

# java - 将工具提示复制到剪贴板

> ID：10105201
> 
> 赞同：-1
> 
> 时间：2012-04-11T11:42:06.080
> 
> 标签：java, tooltip, clipboard

我有一个带有图标、工具提示的 Java 程序……我需要的是，每次显示工具提示时，都应将包含的文本复制到 Windows 剪贴板。

任何解决方案都应该是所有工具提示的通用单一解决方案。我无法更改它们中的每一个的属性（有数千个......）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:04:39.143

在我看来，如果您确实在使用 Swing，您可能需要子类化您的组件并覆盖`createToolTip()`：

```
class MyJButton extends JButton {

    @Override
    public JToolTip createToolTip() {
         return new MyJTooltip();
    }

} 
```

和：

```
class MyJTooltip extends JToolTip {

    @Override
    public void setVisible(boolean aFlag) {
        super.setVisible(aFlag);
        //copy your text to clipboard here
    }

} 
```

不是很实用，不是很漂亮，但我现在想不出另一种方法：AFAIK，没有办法[继承 TooltipManager](http://docs.oracle.com/javase/7/docs/api/javax/swing/ToolTipManager.html)并将其用作默认值。

如果您使用的是 JavaFX，事情会变得容易得多：

```
new Button().setTooltip(new MyJavaFxTooltip()); 
```

# linux - 如何限制复制使用的缓存，以便其他缓存仍有可用内存？

> ID：10105203
> 
> 赞同：25
> 
> 时间：2012-04-11T11:42:15.067
> 
> 标签：linux, caching, filesystems, usb, file-copying

**基本情况：**

我在[openSUSE](https://en.wikipedia.org/wiki/OpenSUSE)中复制一些 NTFS 磁盘。每个是 2 TB。当我这样做时，系统运行缓慢。

**我的猜测：**

我相信这可能是由于缓存。Linux 决定丢弃有用的缓存（例如，[KDE 4](https://en.wikipedia.org/wiki/KDE_Software_Compilation)膨胀、虚拟机磁盘、[LibreOffice](https://en.wikipedia.org/wiki/LibreOffice)二进制文件、Thunderbird 二进制文件等），而是用复制磁盘中的内容填充所有可用内存（总共 24 GB），这些内容将是只读的一次，然后写下来，再也没有使用过。因此，每当我使用这些应用程序（或 KDE 4）时，都需要再次读取磁盘，并且再次从磁盘读取膨胀会使事情冻结/打嗝。

由于缓存消失了，而且这些臃肿的应用程序需要大量缓存，这使得系统非常缓慢。

既然是USB，磁盘和磁盘控制器不是瓶颈，所以使用[ionice](https://linux.die.net/man/1/ionice)并不能让它更快。

我相信这是缓存，而不仅仅是主板速度太慢，因为如果我停止复制所有内容，它仍然会运行一段时间不稳定，直到重新缓存所有内容。

如果我重新开始复制​​，它需要一分钟才能再次波涛汹涌。而且，我可以将它限制在 40 MB/s 左右，它再次运行得更快（不是因为它缓存了正确的东西，而是因为主板总线为系统磁盘提供了很多额外的带宽）。我可以完全接受主板的 I/O 能力被完全消耗（这是 100% 使用，这意味着 0% 的功率浪费这让我很高兴）而导致的性能损失，但我不能接受这种缓存机制在这方面表现得如此糟糕具体用例。

```
# free
             total       used       free     shared    buffers     cached
Mem:      24731556   24531876     199680          0    8834056   12998916
-/+ buffers/cache:    2698904   22032652
Swap:      4194300      24764    4169536 
```

我也在 Ubuntu 上尝试过同样的事情，这会导致整个系统挂起。;)

澄清一下，我不是在问如何为“系统”腾出内存，而是为“缓存”腾出内存。我知道缓存内存会在需要时自动返回给系统，但我的问题是它不是为缓存特定事物而保留的。

有没有办法告诉这些复制操作来限制内存使用，所以一些重要的东西仍然被缓存，因此任何减速都是正常磁盘使用的结果，而不是重新读取相同的常用文件？例如，是否有允许将每个进程/用户/文件系统用作缓存/缓冲区的最大内存设置？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-12-28T18:16:06.597

[nocache](https://github.com/Feh/nocache)命令是这个问题的一般答案！它也在 Debian 和[Ubuntu 13.10](https://en.wikipedia.org/wiki/Ubuntu_version_history#Ubuntu_13.10_.28Saucy_Salamander.29) (Saucy Salamander) 中。

感谢 Peter 提醒我们注意 rsync 中的 --drop-cache" 选项。但这在上游被拒绝了（[错误 9560 – drop-cache option](https://bugzilla.samba.org/show_bug.cgi?id=9560)），支持更通用的解决方案：新的“nocache”命令基于 fadvise 的 rsync 工作。

您只需将“nocache”添加到您想要的任何命令。它还具有用于描述和修改文件缓存状态的不错的实用程序。例如，以下是使用和不使用 nocache 的效果：

```
$ ./cachestats ~/file.mp3
pages in cache: 154/1945 (7.9%)  [filesize=7776.2K, pagesize=4K]
$ ./nocache cp ~/file.mp3 /tmp
$ ./cachestats ~/file.mp3
pages in cache: 154/1945 (7.9%)  [filesize=7776.2K, pagesize=4K]\
$ cp ~/file.mp3 /tmp
$ ./cachestats ~/file.mp3
pages in cache: 1945/1945 (100.0%)  [filesize=7776.2K, pagesize=4K] 
```

所以希望这适用于其他备份程序（rsnapshot、duplicity、rdiff-backup、amanda、s3sync、s3ql、tar 等）和其他您不想破坏缓存的命令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T13:33:09.027

[Kristof Provost 非常接近](https://stackoverflow.com/questions/10105203/how-can-i-limit-the-cache-used-by-copying-so-there-is-still-memory-available-for/10105568#10105568)，但在我的情况下，我不想使用[dd](https://en.wikipedia.org/wiki/Dd_%28Unix%29)或编写自己的软件，因此解决方案是使用 rsync 中的“--drop-cache”选项。

自从创建这个问题以来，我已经多次使用它，它似乎完全解决了这个问题。一个例外是当我使用 rsync 从不支持“--drop-cache”的 FreeBSD 机器上进行复制时。所以我写了一个包装器来替换*/usr/local/bin/rsync*命令，并删除该选项，现在它也可以从那里复制。

它仍然使用大量内存作为缓冲区，并且似乎几乎没有缓存，但无论如何它都能顺利运行。

```
$ free
             total       used       free     shared    buffers     cached
Mem:      24731544   24531576     199968          0   15349680     850624
-/+ buffers/cache:    8331272   16400272
Swap:      4194300     602648    3591652 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T14:38:18.680

内核无法知道您不会再次复制使用缓存的数据。这是您的信息优势。

但是您可以将交换性设置为 0：sudo sysctl vm.swappiness=0。这将导致 Linux 在库等被写入交换之前删除缓存。

它对我来说也很好用，尤其是与大量 RAM（16-32 GB）结合使用时性能非常好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T12:06:44.443

如果您使用普通 old 是不可能的`cp`，但如果您愿意自己重新实现或修补它，那么设置`posix_fadvise(fd, 0, 0, POSIX_FADV_NOREUSE)`输入和输出文件可能会有所帮助。

`posix_fadvise()`告诉内核你想要的访问模式。在这种情况下，您只会使用一次数据，因此缓存它没有任何意义。Linux 内核尊重这些标志，因此它不应该再缓存数据。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-11T17:26:41.047

> 我正在复制一些 NTFS 磁盘 [...] 系统运行缓慢。[...] 因为它是 USB [...]

减速是一个[已知的内存管理问题](https://unix.stackexchange.com/a/25691)。

使用较新的 Linux 内核。较旧的 USB 数据和“透明大页”有问题。请参阅这篇[LWN 文章](https://lwn.net/Articles/467328/)。[最近这个问题得到了解决 - 请参阅LinuxChanges](https://kernelnewbies.org/Linux_3.3#Memory_management)中的“内存管理” 。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-11T12:10:40.433

尝试使用`dd`而不是`cp`.

或`mount`带有`sync`标志的文件系统。

我不完全确定这些方法是否绕过交换，但可能值得一试。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-01-04T09:27:47.673

您实际上有两种选择：

1.  限制最大磁盘缓冲区大小：您看到的问题可能是由默认内核配置引起的，该配置允许使用*大量*RAM 进行磁盘缓冲，当您尝试将大量内容写入非常慢的设备时，您将结束为磁盘缓存占用大量宝贵的 RAM，从而降低设备速度。

    内核这样做是因为它假设进程在没有被慢速设备减慢时可以继续执行操作，并且如果需要，只需将页面写入存储（慢速 USB 记忆棒 - 但内核不考虑该过程的实际性能）。快速修复：

    ```
     # Wake up background writing process if there's more than 50 MB of dirty memory
     echo 50000000 > /proc/sys/vm/dirty_background_bytes
     # Limit background dirty bytes to 200 MB (source: http://serverfault.com/questions/126413/limit-linux-background-flush-dirty-pages)
     echo 200000000 > /proc/sys/vm/dirty_bytes 
    ```

    调整数字以匹配您愿意在磁盘写入缓存上花费的 RAM。一个合理的值取决于您的实际写入性能，而不是您拥有的 RAM 量。您的目标应该是几乎没有足够的 RAM 来进行缓存，以便为您的设备提供完整的写入性能。请注意，这是一个全局设置，因此您必须根据您使用的最慢设备进行设置。

2.  为要保持快速执行的每个任务保留最小内存大小。在实践中，这意味着`cgroup`为您关心的内容创建 s 并定义您希望为任何此类组拥有的*最小内存。*这样，内核可以根据需要使用*剩余*的内存。有关详细信息，请参阅此演示文稿：*[SREcon19 Asia/Pacific - Linux Memory Management at Scale: Under the Hood](https://www.youtube.com/watch?v=beefUhRH5lU&t=1505s)*

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-11T12:54:09.283

好的，既然我知道您正在使用`rsync`，我可以再挖掘一下：

rsync 似乎**在同时**与大量文件一起使用时无效。[他们的 FAQ](http://rsync.samba.org/FAQ.html#5)中有一个条目，这不是 Linux/缓存问题。这是一个吃太多 RAM 的 rsync 问题。

谷歌搜索[有人建议将同步拆分为多个`rsync`调用](http://lists.samba.org/archive/rsync/2005-July/012980.html)。

# c# - 从 ComboBox 中检索 DataSource 的内容

> ID：10105206
> 
> 赞同：3
> 
> 时间：2012-04-11T11:42:25.873
> 
> 标签：c#, asp.net

我有一个组合框，我绑定到具有三个属性的对象列表：`int a`、`int b`和`string x`。绑定时，我设置`DataTextField`为`x`和。我想要做的是在集合绑定到列表后在代码隐藏中获取值。我不想使用 ViewState。我可以使用反射吗？像这样的东西？`DataValueField``a``b`

```
var dataSource = ddlTest.GetDataSource();
var newDataSource = dataSource.GetType().GetProperty("_dataSource", 
    BindingFlags.NonPublic | BindingFlags.Instance); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:32:46.567

我不确定这一点，但您*可以*将其`b`作为自定义属性添加到`ListItem`. 尝试这样的事情，看看它是否有效：

```
var table = new DataTable("TableName"); 

//bind the dropdown to the result set
dropDownList.DataSource = table;
dropDownList.DataBind();

//iterate through the datasource and add custom attributes for each item in the list
table.AsEnumerable().ToList().ForEach(r => 
    dropDownList.Items.FindByValue(r.Field<int>("a").ToString()).Attributes["data-field"] = r.Field<int>("b").ToString()); 
```

如果您更喜欢使用常规的 foreach 循环：

```
foreach (DataRow row in table.Rows)
{
    var item = dropDownList.FindByValue(row.Field<int>("a").ToString());
    if (item != null)
    {
        item.Attributes["data-value"] = row.Field<int>("b").ToString();
    }
} 
```

如果添加自定义属性不起作用并且您不想使用 ViewState，则可能必须将`a`和都存储`b`在值字段中，并用分隔符分隔。这可能会很痛苦，因为您必须解析项目以获取值，但考虑到您的要求，如果自定义属性不起作用，这可能是最佳选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:49:26.237

我认为这种方法应该奏效。但是，要通过反射获得属性值，您必须这样做：

```
var dataSource = ddlTest.DataSource;
PropertyInfo property = dataSource.GetType().GetProperty("b", BindingFlags.NonPublic | BindingFlags.Instance);
var bValue = property.GetValue(dataSource, null); 
```

**编辑** 我认为问题在于我们没有考虑数据源是数组/列表的事实。我得到这个工作如下：

```
var data = (IEnumerable<object>)ddlTest.DataSource;        
Type t = typeof(MyClass);
var item = data.ToArray()[0];
System.Reflection.PropertyInfo pi = t.GetProperty("b");
int val = (int)pi.GetValue(item, null); 
```

这是在我在 Page_Init 中设置了这样的数据源之后：

```
var data = new List<MyClass> { new MyClass() { a = 1, b = 2, x = "testing" } };
ddl.DataSource = data;
ddl.DataBind(); 
```

# redis - 在 Redis 中存储小键值列表的最佳方法

> ID：10105207
> 
> 赞同：3
> 
> 时间：2012-04-11T11:42:29.570
> 
> 标签：redis

我正在尝试将 Redis 用作我正在制作的小游戏的主数据库（主要是为了搞乱编程和使用 Redis）。

但是，我遇到了一个无法找到答案的场景：

我希望存储人们可以使用的不同地图的名称列表（不是很多）以及他们的 ID。注意：我永远不需要从名称中获取 ID。

我认为可以做到这一点的两种方法是将信息存储为字符串或哈希。

IE：

1）基于字符串：

*   设置地图：0“主要”
*   设置地图：1“岛”
*   等（也许还有一个 maps:id 来存储一个自动增量值）

2）基于哈希：

*   hset 映射“0”“主要”
*   hset 映射“1”“岛”
*   ETC

我的问题是哪种方式看起来最好。鉴于永远不会有那么多地图，我倾向于使用单个散列对象。部分是因为这提供了一个很好的方法来返回所有存在的地图。但是是否有任何特殊原因表明基于字符串的查询会更有用。

希望你能给我一些明确的信息。

谢谢你，Pluckerpluck

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T13:53:20.467

实际上不鼓励使用基于字符串的值，因为它比散列消耗更多的内存。

Redis 优化小散列并以内存有效的方式对其进行编码。这种编码称为 zipmap（或 redis 2.6 中的 ziplist）。请参阅[http://redis.io/topics/memory-optimization](http://redis.io/topics/memory-optimization)，特别是“尽可能使用哈希”部分。

# perl - 合并文本文件中的列

> ID：10105209
> 
> 赞同：0
> 
> 时间：2012-04-11T11:42:52.067
> 
> 标签：perl, shell, unix, scripting

文本文件的输入

```
A | 1 | def | 1432
A | 1 | ffr | 1234
A | 1 | dfs | 3241
A | 2 | asf | 2213 
```

期望的输出

```
A | 1 | def 1432,ffr 1234,dfs 3241
A | 2 | asf 2213 
```

在单行中合并与**第二列相关的值**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:05:41.383

您的问题没有很好地说明，但这是解决问题的一步：

```
awk -F\| '{  a[$1 "|" $2] = a[$1 "|" $2 ] "," $3 $4 }
     END { for( x in a ) print x a[x]}' input |
     sed 's/,/|/'  # Trim leading comma 
```

这将错误地删除前 2 列中的任何一个中的第一个逗号，而不是在输出的第 3 列中错误插入的前导逗号，并且对前 2 列而不是第 2 列进行排序。此外，输出的顺序将不同于输入。可能还有其他问题，但这可能会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T12:14:34.343

这是 Perl 的尝试：

```
perl -F'\s+\|\s+' -alne '
$a{$F[1]} .= "$F[2] $F[3],";
END {
  $_ = "A | $_ | $a{$_}", s/,$//, print for sort keys %a;
}' FILE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:06:05.870

```
awk '
    BEGIN { FS = " \\| "; OFS = SUBSEP = " | " }
    {
        val[$1,$2] = val[$1,$2] sep[$1,$2] $3 " " $4
        sep[$1,$2] = ","
    }
    END { for (key in val) print key, val[key] }
' 
```

这可能不会保留输入的顺序。此外，它使用第一列和第二列作为键，但正如你所说的第一列没有改变它是无关紧要的。

# asp.net-mvc-3 - DDD 模型转 EF

> ID：10105217
> 
> 赞同：0
> 
> 时间：2012-04-11T11:43:10.917
> 
> 标签：asp.net-mvc-3, entity-framework, domain-driven-design

我有两个问题。

1：目前我有两个模型类映射到 EF 图中的两个实体。

DDD 如何与 EF 一起工作，因为如果我决定将模型类拆分为更小的特定类，例如从 2 到 4。EF 将如何与它们相关？

我是否必须创建一个单独的 DTO 将这四个模型类映射到 EF 将理解的两个实体模型？

只是想知道其他人是如何设法解决这个问题的。

2：EF 只识别具有公共属性的模型。如果我将模型类更改为具有 GetName()、SetName()、GetAddress() 等行为方法并将公共属性删除为私有成员，则 EF 会抛出一个不稳定并抱怨它在我的模型上找不到任何属性。我该如何解决这个问题？或者答案是否与第一个问题相同，因为我需要创建一个具有公共属性的 DTO，该属性映射自我的模型类，EF 将使用该属性？

我只是在想这是否是正确的路径，因为将我的 DDD 模型类映射到 EF 理解的另一组 DTO 或 EF 模型类似乎有点多余。如果我必须映射到 EF 类，它们会在模型层还是存储库层中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:13:39.380

1.  有可能将多个实体映射到同一个表（TPH 继承、表拆分），但这些可能性必须遵循严格的规则。否则，您最终可能会遇到无法将实体插入数据库的情况，因为它不包含记录的所有必需列。
2.  EF（带有 EDMX）也可以识别[非公共属性](https://stackoverflow.com/questions/5202780/entity-framework-and-business-objects/5202859#5202859)- EF 代码首先需要具有可访问的 getter 或 setter 的属性。此外，这些行为方法可能是多余的，因为在属性中编写自己的 getter 和 setter 具有相同的含义。

# c# - 使用 Flikr.net API 获取所有 Flikr PhotoSet 的列表

> ID：10105218
> 
> 赞同：0
> 
> 时间：2012-04-11T11:43:11.183
> 
> 标签：c#, .net, api, flickr

我正在尝试将所有照片集的名称添加到列表框中。我有令牌和有效的 Flickr 对象。我如何在 c# 中执行此操作。在标准的 Flikr API

```
flickr.photosets.getList 
```

已使用，但我如何在 .net 中实现这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:49:25.357

从[这里撕下来](http://hectorcorrea.com/Blog/Flickr-Library-in-C-Sharp)

C# 中的 Flickr 库

最近几天，我一直在研究一个示例 C# 库，以使用 Flickr 自己的 API 访问 Flickr 图片。这个库是一个轻量级的 C# 类，它提供了两个基本功能：(1) 检索您帐户中的照片集列表和 (2) 检索有关照片集中照片的信息。

使用这个类，您可以检索您的 Flickr 帐户中的照片集，并将它们显示在一个组合框中，其中包含如下几行代码：

```
 Flickr flickr = new Flickr("YourApiKey", "YourUserID");

        List<PhotoSetInfo > photosets = flickr.GetPhotoSets(); 

        cboPhotoSets.DataSource = photosets;

        cboPhotoSets.DataTextField = "Title";

        cboPhotoSets.DataValueField = "PhotoSetID";

        cboPhotoSets.DataBind(); 
```

选择照片集后，您可以使用以下代码检索有关其中照片的信息（如标题和 URL）。在此示例中，我将照片列表绑定到 ASP.NET datalist 控件以显示它们：

```
 Flickr flickr = new Flickr("YourApiKey", "YourUserID");

        List<PhotoInfo> photos = flickr.GetPhotosInSet(cboPhotoSets.SelectedValue);

        listPhotos.DataSource = photos;

        listPhotos.DataBind();

        lblPhotosMsg.Text = (photos.Count == 0) ? "No photos in this photoset" : ""; 
```

Flickr API 支持多种请求和响应格式。我在我的 FlickrLib 库中使用 REST 格式来处理请求和响应。一个典型的 Flickr REST 请求如下所示：

[http://api.flickr.com/services/rest/?method=methodName¶meter1=value1¶meter2=value2](http://api.flickr.com/services/rest/?method=methodName&parameter1=value1&parameter2=value2)

其中 methodName 是要调用的方法的名称，例如 flickr.photosets.getList 返回照片集列表。

Flickr 提供的 REST 响应是带有请求相关信息的 XML 文档。对于 flickr.photosets.getList 方法，响应将是一个带有 photoset 节点和几个 photoset 子节点的 XML 文档。这些 XML 响应很容易使用 LINQ to XML 进行解析，并将它们转换为 C# 强类型对象（如 PhotoSetInfo 和 PhotoInfo），然后可以将其绑定到 .NET 类。这正是 FlickrLib 库所做的，它为 Flickr API 功能提供了一个包装器，以便您可以轻松地从您的 .NET 应用程序中使用它。

参考

[您可以从http://hectorcorrea.com/downloads/FlickrLibDemo.zip](http://hectorcorrea.com/downloads/FlickrLibDemo.zip)下载此类的 C# 源代码

有关 Flick API 的信息，请访问[http://www.flickr.com/services/api/](http://www.flickr.com/services/api/)那里有很多关于 API 提供什么以及如何使用它的信息。API 提供了大量的 Flickr 功能，您可能会觉得这些功能很有用，而我的小课堂并未公开这些功能。

您需要从 Flickr 获取 API 密钥才能通过此类或任何其他类使用他们的 API。API 密钥是免费的，但它是必需的，以便 Flickr 可以防止单个用户向其站点提交过多请求并将其删除。

发表于 2008 年 11 月 30 日下午 12:27:00 永久链接

# c# - 为什么我的 XML 文件没有被保存，即使程序在我下次启动它时看到更新的值？

> ID：10105222
> 
> 赞同：1
> 
> 时间：2012-04-11T11:43:41.097
> 
> 标签：c#, xml, linq-to-xml

我正在读取 XML 文件的内容并将其解析为对象模型。

当我修改对象模型中的值时，然后使用以下代码将其保存回 xml：

```
XElement optionXml = _panelElement.Elements("options").FirstOrDefault();

optionXml.SetAttributeValue("arming", value.ToString());

_document.Save(_fileName); 
```

据我所知，这很有效，因为当我关闭应用程序并重新启动它时，我保存的值会在我下次查看它时反映在对象模型中。

但是，当我加载实际的 XML 文件时，这些值仍然是原来的样子。

为什么是这样？我需要做什么来保存具有新值的实际 XML 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:52:51.220

您很可能正在体验Windows Vista 中引入的[文件系统虚拟化。](http://msdn.microsoft.com/en-us/library/bb756960.aspx)

基本上，这意味着您*正在*保存文件，而不是您认为要保存它的位置。例如，您可能认为您正在保存到`C:\Program Files\Your App\yourFile.xml`.，但幕后发生的事情是操作系统正在默默地将其重定向到`%APPDATA%\Your App\yourFile.xml`. 当您重新加载它时，操作系统会再次从该位置静默重定向。

这是一种安全措施，旨在更好地封装应用程序及其数据，并防止对可能发生损坏的位置进行未经授权的写入。您仍然可以强制保存到`%PROGRAMFILES%\Your App`，但要做到这一点，您需要放宽应用于该文件夹的 ACL，或者您需要提升应用程序运行的权限级别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T11:57:10.500

我不确定是将其作为评论还是作为答案，但我认为这可能是一个潜在的答案。听起来 XML 文件正在被保存，因为数据在应用程序的实例中被持久化。它可能是像 slugster 提到的文件系统虚拟化，但它可能很简单，因为您正在查看 XML 文件的错误副本。如果您使用的是相对路径，则该文件可能已复制到新位置。我建议您对该文件名进行快速文件搜索，看看您会得到什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T12:50:02.690

事实证明，该文件被复制到输出目录并从中读取。我可以看到它正在按预期从那里更新。

# android - 在不创建层次结构的情况下使用 PreferenceActivity 和 PreferenceFragment

> ID：10105225
> 
> 赞同：7
> 
> 时间：2012-04-11T11:43:55.113
> 
> 标签：android

似乎从 android 开发人员文档中，他们提供了一个关于如何使用 heiarchy 和 headers 创建首选项的示例。

有没有办法在没有标题的情况下创建首选项？我看到有 EXTRA_NO_HEADER 但我不太确定如何使用它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T13:15:36.387

当然，只需创建您的 PreferenceActivity 或 ~Fragment，具体取决于 API 级别/支持库的存在。教程的开头只是从您的问题开始：[Settings @ Android Dev](http://developer.android.com/guide/topics/ui/settings.html#Activity)

# sql - ORACLE SQL 返回最近添加的记录详细信息

> ID：10105226
> 
> 赞同：0
> 
> 时间：2012-04-11T11:43:56.393
> 
> 标签：sql, oracle

编辑：在 Dems 的大力帮助下解决了，我将发布查询的截断版本，现在运行良好！

```
 SELECT
  *

FROM

    O_PERSONS

    /*The below left join returns the most recently added ethnicity classification*/
  LEFT JOIN 

  (SELECT
   ROW_NUMBER() OVER (PARTITION BY O_CLASSIFICATIONS.CLA_SUBJECT_ID ORDER BY O_CLASSIFICATIONS.CLA_DATE_NOTIFIED DESC) AS Sequence_ID,
   O_CLASSIFICATIONS.CLA_CAT_ID,
   O_CLASSIFICATIONS.CLA_SUBJECT_ID
   FROM
   O_CLASSIFICATIONS
   WHERE
   O_CLASSIFICATIONS.CLA_SUBJECT_IND = 'P'
   AND
   O_CLASSIFICATIONS.CLA_TOP_CAT_ID   =  'ETHNIC'
   AND
   O_CLASSIFICATIONS.CLA_CAT_ID <> 'DECLINED'
   ) ETHNIC 
   ON ETHNIC.CLA_SUBJECT_ID = O_PERSONS.PER_ID 
   AND ETHNIC.Sequence_ID = 1

    /*The below left join returns the most recently added PCG classification*/
   LEFT JOIN 

  (SELECT
   ROW_NUMBER() OVER (PARTITION BY O_CLASSIFICATIONS.CLA_SUBJECT_ID ORDER BY O_CLASSIFICATIONS.CLA_DATE_NOTIFIED DESC) AS Sequence_ID,
   O_CLASSIFICATIONS.CLA_CAT_ID,
   O_CLASSIFICATIONS.CLA_SUBJECT_ID
   FROM
   O_CLASSIFICATIONS
   WHERE
   O_CLASSIFICATIONS.CLA_SUBJECT_IND = 'P'
   AND
   O_CLASSIFICATIONS.CLA_TOP_CAT_ID   =  'PRIMARY'
   AND
   O_CLASSIFICATIONS.CLA_CAT_ID <> 'DECLINED'
   ) PCG
   ON PCG.CLA_SUBJECT_ID = O_PERSONS.PER_ID 
   AND PCG.Sequence_ID = 1

  WHERE

   O_PERSONS.PER_ID LIKE 'P%' 
```

我目前正在尝试编写一个查询，它将为我们系统上的客户返回某些详细信息。虽然客户只有一个出生日期、性别和 P ID，但他们可能有多个种族（由于数据质量）以及客户群体（这更合理，因为客户的需求可能会发生变化）。但是，对于这些特定项目，我只对最近添加的种族或客户群体感兴趣。下面我编写了一个查询，它为种族和客户组分配了一个行号，并计划只返回等于 1 的行号，因为这些通常是最新的。但是，我遇到了 2 个问题，其中一个我可以解决，另一个我不太确定。

首先，一些客户不会记录种族或客户群体。运行以下查询时，它们返回非常奇数的行号（通常为数千）。但是，我知道在我的“位置”中我可以指定如果客户组或种族为空则返回一行（因为这些将是需要解决的数据质量案例）。

第二个问题有点棘手，我将尝试用下表来表示。请注意，为了便于输入和理解，我对表格进行了缩写。

```
 P ID Ethnicity   PCG RN E RN P
  P1   WB          OV  1    2 
  P1   WI          OV  2    1 
```

上述客户有两个种族，尽管 WB 是最新的（因此 E 行中的 1 是正确的）。但是，客户端只记录了一个 PCG，但行号在第一行返回 2（可以说是我想要返回的行）。我不确定为什么，虽然我猜是因为 ETHNIC.CLA_SUBJECT_ID 加入了 O_PERSONS.PER_ID 并且 PER_ID 出现了两次，这就是为什么它认为该特定字段有两行。但是，即使是这样，有没有办法强制只有 1 出现在一行中？或者我可以用完全不同的方式做到这一点吗？希望这个查询有意义，如果部分不清楚，请道歉。谢谢，

```
 SELECT
          O_PERSONS.PER_ID as "P ID",
          olm_bo.get_per_name(O_PERSONS.PER_ID) as "Full Name",
          O_PERSONS.PER_BIRTH_DATE as "Date of Birth",
          case 
            when O_PERSONS.PER_DECEASED_DATE is null then FLOOR(MONTHS_BETWEEN(sysdate,O_PERSONS.PER_BIRTH_DATE)/12) 
            else FLOOR(MONTHS_BETWEEN(O_PERSONS.PER_DECEASED_DATE,O_PERSONS.PER_BIRTH_DATE)/12) 
          end as "Age",
          O_PERSONS.PER_DECEASED_DATE as "Date Deceased",
          olm_bo.get_gender_desc('P', O_PERSONS.PER_GENDER) as "Gender",
          CASE 
            WHEN ETHNIC.CLA_CAT_ID IN ('C1','C2','C3','C4','ABAN','AIND','AOTH','APKN') THEN 'Asian or Asian British'
            ELSE NULL
          End as "Ethnicity - Top" ,
          CASE 
            WHEN ETHNIC.CLA_CAT_ID IN ('BAFR','D2') THEN 'African'
            ELSE NULL
          End as "Ethnicity - Detail" ,
          CASE 
            WHEN PCG.CLA_CAT_ID IN ('ASYLUM','REFUGEE') THEN 'Asylum Seeker/Refugee'
            ELSE NULL
          End as "PCG",
          CASE 
            WHEN PCG.CLA_CAT_ID IN ('ASYLUM','REFUGEE') THEN 'Asylum Seeker/Refugee'
            ELSE NULL
          End as "PCG - Top",
          CASE 
            WHEN PCG.CLA_CAT_ID IN ('ASYLUM','REFUGEE') THEN 'Asylum Seeker/Refugee'
            ELSE NULL
          End as "PCG - DETAIL",

          to_char(row_number() over(PARTITION BY  ETHNIC.CLA_SUBJECT_ID ORDER BY abs(sysdate - ETHNIC.CLA_DATE_NOTIFIED) asc)) as "Row Number E",
          to_char(row_number() over(PARTITION BY  PCG.CLA_SUBJECT_ID ORDER BY abs(sysdate - PCG.CLA_DATE_NOTIFIED) asc))as "Row Number P"

        FROM

          O_PERSONS

          LEFT JOIN O_CLASSIFICATIONS ETHNIC ON ETHNIC.CLA_SUBJECT_ID = O_PERSONS.PER_ID 
          AND ETHNIC.CLA_SUBJECT_IND = 'P'
          AND ETHNIC.CLA_TOP_CAT_ID   =  'ETHNIC'
          AND ETHNIC.CLA_CAT_ID <> 'DECLINED'

          LEFT JOIN O_CLASSIFICATIONS PCG ON PCG.CLA_SUBJECT_ID = O_PERSONS.PER_ID 
          AND PCG.CLA_SUBJECT_IND = 'P'
          AND PCG.CLA_TOP_CAT_ID   =  'PRIMARY'
          AND PCG.CLA_CAT_ID <> 'DECLINED'

          WHERE
          /*Following line excludes any clients whose is less than 18)*/
            O_PERSONS.PER_BIRTH_DATE > trunc(add_months(O_PERSONS.PER_BIRTH_DATE,-216))
            AND  O_PERSONS.PER_ID LIKE 'P%' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:33:17.333

您应该在加入`ROW_NUMBER()` *之前*申请。

```
SELECT
  *     -- Your calculations here, '*' used for brevity
FROM
  O_PERSONS
LEFT JOIN
(
  SELECT
    ROW_NUMBER() OVER (PARTITION BY CLA_SUBJECT_ID ORDER BY CLA_DATE_NOTIFIED DESC) AS sequence_id,
    *
  FROM
    O_CLASSIFICATIONS
  WHERE
        CLA_SUBJECT_IND =  'P'
    AND CLA_TOP_CAT_ID  =  'ETHNIC'
    AND CLA_CAT_ID      <> 'DECLINED'
)
  ETHNIC
    ON  ETHNIC.CLA_SUBJECT_ID = O_PERSONS.PER_ID
    AND ETHNIC.sequence_id    = 1
LEFT JOIN
(
  SELECT
    ROW_NUMBER() OVER (PARTITION BY CLA_SUBJECT_ID ORDER BY CLA_DATE_NOTIFIED DESC) AS sequence_id,
    *
  FROM
    O_CLASSIFICATIONS
  WHERE
        CLA_SUBJECT_IND =  'P'
    AND CLA_TOP_CAT_ID  =  'PRIMARY'
    AND CLA_CAT_ID      <> 'DECLINED'
)
  PCG
    ON  PCG.CLA_SUBJECT_ID = O_PERSONS.PER_ID
    AND PCG.sequence_id    = 1
WHERE
     /*Following line excludes any clients whose is less than 18)*/
     O_PERSONS.PER_BIRTH_DATE > trunc(add_months(O_PERSONS.PER_BIRTH_DATE,-216))
AND  O_PERSONS.PER_ID LIKE 'P%' 
```

# actionscript - Actionscript 3 简单的图像滑块

> ID：10105227
> 
> 赞同：0
> 
> 时间：2012-04-11T11:43:57.527
> 
> 标签：actionscript, slider, scroller

提前感谢您的帮助。我是 actionscript 3 的菜鸟，我想做的是制作一个图像滑块。基本上，会有一个movieClip，作为一个容器，以及一个左右按钮。当我单击左按钮时，容器向左滑动，反之亦然。

现在我开始工作了，问题是当我按下左键时，容器向左移动，并且在我单击左键时一直向左移动。但我希望它在容器的末尾停止或循环，我不确定如何执行此操作。

我搜索了整个网络，但没有发现任何有用的东西，我发现的大部分内容都非常复杂或严重依赖外部库，我不想只是复制和粘贴我不理解的代码片段。任何人都可以就如何在 actionscript 3 中实现这一点提供一些见解。

到目前为止，这是我的代码的副本

谢谢-菜鸟

```
//leftButton and rightButton are movieClips on the stage
leftButton.addEventListener(MouseEvent.MOUSE_DOWN, moveLeft);
rightButton.addEventListener(MouseEvent.MOUSE_DOWN, moveRight);

//NOTE: thumbContainer is a movieClip on the stage
//Make the mask;
var myMask:MovieClip = new MovieClip();
this.addChild(myMask);
myMask.graphics.beginFill(0x000000);
myMask.graphics.drawRect(6,138,534,144);
myMask.graphics.endFill();
thumbContainer.mask = myMask;

//thumbContainer moves left on button press
function moveLeft(evt:Event):void
{
    thumbContainer.x -=  myMask.width;
}

//thumbContainer moves right on button press
function moveRight(evt:Event):void
{
    thumbContainer.x +=  myMask.width;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T20:31:26.807

> 现在我开始工作了，问题是当我按下左键时，容器向左移动，并且在我单击左键时一直向左移动。但我希望它在容器的末尾停止或循环，我不确定如何执行此操作。

你在这里提到的不是很清楚。据我了解，当您反复按下左（或右）按钮时，您有一个容器 myMask 会滑出您的父容器 thumbContainer 。

假设这是问题所在，允许 myMask 容器向左或向右移动，但每次检查屏幕分辨率宽度（可能有 if 语句或其他东西）。因此，只有在满足条件时才向左/向右移动（有向左/向右移动的空间）

希望有帮助！

# c++ - C/C++ 难题：使用单个 for 循环打印 1..15 15..1 中的值

> ID：10105229
> 
> 赞同：8
> 
> 时间：2012-04-11T11:44:07.500
> 
> 标签：c++, c, puzzle

它是由我的同事给出的，`1 2 3 4 .... 15 15 ..... 4 3 2 1`只打印*一个 for 循环*、*没有函数*、*没有 goto 语句*并且*不使用任何条件语句或三元运算符*的值。

所以我使用类型转换来解决它，但这不是一个精确的解决方案，因为 15 没有打印两次。

```
int main()
{
    int i, j;
    for(i = 1, j = 0;j < 29;j++, i += int(j/15)*-2 + 1)
        cout<<i<<endl;
} 
```

**输出**：`1 2 3 4 ... 15 14 13 .... 2 1`

任何替代解决方案？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-11T12:00:17.017

您可以从 1 循环到 30，然后使用 (i/16) 将是“0”作为您的上升部分和“1”作为您的下降部分的事实。

```
for (int i = 1; i < 31; i++)
{
    int number = (1-i/16) * i + (i/16) * (31 - i);
    printf("%d ", number);
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-04-11T11:49:26.253

```
for (int i=0; i<1; i++)
{
    std::cout << "1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1"
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-11T11:55:39.033

这个怎么样：

```
std::string first;
std::string second;

for ( int i = 1 ; i <= 15 ; i++ )
{
   std::ostringstream s;
   s << i;
   first += s.str();
   second = s.str() + second;
}

std::cout << first << second; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-11T11:48:32.677

选择：

```
static int bla[] = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1};

for (int i = 0; i < 30; i++) 
{        
    printf("%d\n", bla[i]);
} 
```

好的，与所有相比，它的执行速度更快......

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-11T11:49:34.907

XOR 位#4（即`j & 0x10`）与位 3:0。您将需要找到一种方法将该位“重复”到 4 个位置。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-04-11T13:08:38.120

```
for (int i=1;i<31;++i)
{
  cout<<(((i<<27>>31|i)&(~i<<27>>31|~i))&15)<<" ";
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-04-11T12:10:12.500

```
#include <iostream>

int main()
{
    for(int i = 1; i < 31; i++) std::cout << ((i/16)-1)*-i+(i/16)*(i^0x1F) << " ";
    std::cout << std::endl;
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-04-11T12:45:30.210

我见过许多*复杂*的答案，但没有人按*原样*利用对称性。

```
std::string head = "1";
std::string tail = "1";

for (unsigned i = 2; i != 16; ++i) {
  std::string const elem = boost::lexical_cast<std::string>(i);

  head = head + " " + elem;
  tail = elem + " " + tail;
}

std::cout << head << " " << tail << "\n"; 
```

在[ideone](http://ideone.com/h9vVv)采取行动（减号`lexical_cast`）：

> 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1

它的工作原理很简单，并且适用于任何大小的上限（只要您的计算机有足够的内存）。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-04-11T14:05:14.090

```
const int N = 15;
for(int i = 1; i <= 2 * N; ++i)
    printf("%d ", i + (i > N) * (1 + 2 * (N - i))); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-04-11T12:03:04.950

```
for (int i = 1; i < 30; i++)
    printf("%d\n", (-((i & 16) >> 4) + 1) * i + ((i & 16) >> 4) * (14 - (i & 15))); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-04-11T14:17:59.077

```
int main()
{

    for(int i = 15, j = 30, k = 15; i <= 30; i++, j--, k -= 2)
    {
        cout << (j - i) * (k % 2) << endl << (j - i - 1) * (k % 2) << endl;
    }

    return 0;
} 
```

这是我想出的。反之亦然，即：15 -> 0 -> 15。更值得深思。使用 mod 和 k 来计算是否为负数。I - J 在中间相遇。它绝不是完美的，还有其他一些更好的答案。

# jquery - 为什么 MiniProfiler 会加载 jquery-1.7.1，即使我已经在页面上加载了它？

> ID：10105231
> 
> 赞同：7
> 
> 时间：2012-04-11T11:44:28.030
> 
> 标签：jquery, asp.net, mvc-mini-profiler

我已经在已经引用 v1.7.1 的 jQuery 的 ASP.NET WebForms 页面上实现了 StackExchange MiniProfiler。jQuery 文件在本地托管，所以我的主文件如下所示：

```
<script src="Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
<%= MiniProfiler.RenderIncludes() %> 
```

但是，当我查看生成的输出源时，我得到了类似的东西

```
<script src="Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
<script type="text/javascript">    
    ...
    load('/app/mini-profiler-resources/jquery.1.7.1.js?v=tNlJPuyuHLy/d5LQjyDuRbWKa0weCpmO3xkO6MH4TtA=', initMp);
</script> 
```

查看开发工具网络选项卡，我可以看到它正在输入两个请求，一个为`Scripts/jquery-1.7.1.min.js`，另一个为`/app/mini-profiler-resources/jquery.1.7.1.js`

这不是一个相当大的冗余问题吗？如何阻止 MiniProfiler 包含请求、下载和解析 jQuery 库的另一个副本？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T23:45:51.413

原因是我们在 noConflict 中加载 jQuery。这消除了 jQuery 版本冲突的风险。例如，如果页面上有 jQuery 版本 1.0，我们不确定 MiniProfiler 是否仍然可以工作。为了避免任何风险，我们加载了我们自己的版本。

现在，我对一个拉取请求持开放态度，该请求在请求之前对 jQuery 进行版本检查，如果存在“正确”版本，我们可以简单地别名`jQueryMP`为`jQuery`. 但是，这会使代码复杂化，并且只能解决单个版本的 jQuery 的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:48:10.197

因为它们有不同的 url，所以这些是浏览器的不同资源。也许您只是不需要添加的第一个脚本。

或试试这个技巧：

```
<script src="/app/mini-profiler-resources/jquery.1.7.1.js?v=tNlJPuyuHLy/d5LQjyDuRbWKa0weCpmO3xkO6MH4TtA="></script> 
```

# android - 访问库项目的类时出现 NoClassDefFoundError

> ID：10105237
> 
> 赞同：0
> 
> 时间：2012-04-11T11:44:46.640
> 
> 标签：android, eclipse, noclassdeffounderror, android-library

通过在其 android 属性中将“Is Library”设置为 true，我已使用 eclipse 将现有的 android 项目（例如 App1）转换为 android 库项目。然后在我的另一个项目（比如 App2）中，我通过在其库引用中添加 App1 使用 eclipse 添加了这个库项目。在 App2 中，我尝试启动 App1 的活动。我在 App2 的清单文件中提到了这个活动。

```
Intent intent = new Intent(TestActivity.this, ForYouActivity.class);
TestActivity.this.startActivityForResult(intent, 1); 
```

但是当我运行应用程序时，我得到一个错误

```
E/AndroidRuntime(2489): java.lang.NoClassDefFoundError: com.test.activities.ForYouActivity 
```

这个你能帮我吗。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:52:22.233

确保您的库项目 .jar 文件位于“Android Dependencies”文件夹中。我之前回答过一个类似的问题，它可能会对您有所帮助：[https ://stackoverflow.com/a/9820881/518949](https://stackoverflow.com/a/9820881/518949)

# javascript - Dojo：dojox.grid.LazyTreeGrid + QueryReadStore - 对子分页时出错

> ID：10105238
> 
> 赞同：0
> 
> 时间：2012-04-11T11:44:48.103
> 
> 标签：javascript, ajax, dojo, treegrid

我正在 Dojo 中测试 LazyTreeGrid 实现。我有这个问题。当 LazyTreeGrid 与 LazyTreeGridStoreModel 和 QueryReadStore 子节点的分页一起使用时，有时会导致错误。

我试图只加载打开节点的子节点并只加载那些可见的记录。

根记录的分页似乎工作正常，但在打开一个节点后，只加载了第一页的子节点，其余的都用“...”填充。滚动我使用鼠标滚轮。

测试：Firefox (9.0.1)、Chrome (18.0.1025.152 m)、IE9 (9.0.8112.16421)

我在dojo trac开了一张票。在那里您可以找到代码示例和屏幕截图。

-> [http://bugs.dojotoolkit.org/ticket/15155](http://bugs.dojotoolkit.org/ticket/15155)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:35:24.587

发送到服务器的 URL 格式为[http://xxx/yyy?start=0&count=25](http://xxx/yyy?start=0&count=25) 我认为您需要尊重 start 和 count 参数，否则分页会发生坏事。看起来您的测试代码并没有这样做。

# python - 如何在python中的字典中对字典进行排序

> ID：10105239
> 
> 赞同：0
> 
> 时间：2012-04-11T11:44:49.193
> 
> 标签：python, sorting, dictionary

这是我的问题。我懂了

```
{'Ciaran Johnson': {'PB': 58.2,
                    'Gender': 'M',
                    'Age': 6,
                    'Event': 'IM',
                    'Name': 'Ciaran Johnson'},
 'Joan Pine': {'PB': 44.0,
               'Gender': 'F',
               'Age': 6,
               'Event': 'FS',
               'Name': 'Joan Pine'},
 'Eric Idle': {'PB': 57.2,
               'Gender': 'M',
               'Age': 6,
               'Event': 'IM',
               'Name': 'Eric Idle'},
 'Kirsty Laing': {'PB': 58.2,
                  'Gender': 'F',
                  'Age': 6,
                  'Event': 'IM',
                  'Name': 'Kirsty Laing'}} 
```

我必须先按性别排序，然后是事件和最后时间（PB - 最快成为第一）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T12:14:20.960

> 我有这个 [ `dict`]，我必须对其进行排序......

您不能对 a 进行排序`dict`，因为标准字典是无序的。但是，您可以使用[`OrderedDict`](http://docs.python.org/dev/library/collections.html#collections.OrderedDict)：

```
In [2]: from collections import OrderedDict

In [3]: sd = OrderedDict(sorted(d.items(), key=lambda (k,v): (v['Gender'], v['Event'], v['PB'])))

In [4]: sd
Out[4]: OrderedDict([('Joan Pine', {'PB': 44.0, 'Gender': 'F', 'Age': 6, 'Event': 'FS', 'Name': 'Joan Pine'}), ('Kirsty Laing', {'PB': 58.2, 'Gender': 'F', 'Age': 6, 'Event': 'IM', 'Name': 'Kirsty Laing'}), ('Eric Idle', {'PB': 57.2, 'Gender': 'M', 'Age': 6, 'Event': 'IM', 'Name': 'Eric Idle'}), ('Ciaran Johnson', {'PB': 58.2, 'Gender': 'M', 'Age': 6, 'Event': 'IM', 'Name': 'Ciaran Johnson'})]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T11:47:28.697

您不能在 Python 中对字典进行排序，它们本质上是无序的。

不过，您可以[对 keys() 进行排序](http://docs.python.org/library/functions.html#sorted)，这会创建一个列表，然后使用该列表以假有序的方式访问元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T12:02:03.870

尝试这个

```
>>> for k,v in sorted(spam.items(),key=lambda k:(k[1]['Gender'],k[1]['Age'],k[1]['PB'])):
    print(k,v)

Joan Pine {'PB': 44.0, 'Gender': 'F', 'Age': 6, 'Event': 'FS', 'Name': 'Joan Pine'}
Kirsty Laing {'PB': 58.2, 'Gender': 'F', 'Age': 6, 'Event': 'IM', 'Name': 'Kirsty Laing'}
Eric Idle {'PB': 57.2, 'Gender': 'M', 'Age': 6, 'Event': 'IM', 'Name': 'Eric Idle'}
Ciaran Johnson {'PB': 58.2, 'Gender': 'M', 'Age': 6, 'Event': 'IM', 'Name': 'Ciaran Johnson'}
>>> 
```

# workflow-foundation-4 - WF4实体状态处理，实体批处理

> ID：10105243
> 
> 赞同：1
> 
> 时间：2012-04-11T11:45:14.420
> 
> 标签：workflow-foundation-4, status, state-machine-workflow

我在 WF4 中创建了一个简单的订单管理器 wf 服务（状态机）。

![简单的状态机工作流程](../Images/1479168f691459f362f6acfecce02488.png)

订单（EF 实体）属性：Id、IsExport、NumOfProduct、ProductName、Status（等待、批准、拒绝）。

状态机状态：
1\. OrderReceived（验证 -> 响应活动）
2\. 等待（空） - 转换：
更新（更新订单活动）-> 等待状态批准（分配状态字段，更新订单和响应活动）-> 最终状态
3 . 最终状态。

相关键：Order.Id

实施提出了一些问题。

1.  WF可以管理订单实例的一个流，订单流和订单实体是一一对应的关系。问题是我应该在哪里以及如何根据状态过滤器（例如批准的订单或等待订单）实施实体列表。该列表应该可以通过 WCF 服务方法访问。

2.  管理批处理数据处理的最佳实践是什么。（例如：多个订单批准。客户端中的“Foreach”不是必需的 sln。）

3.  订单的状态由数据库中的“状态活动持久化实例”和实体的状态字段表示。确定实体状态的最佳实践是什么，列出处于定义状态的活动持久活动实例或根据状态过滤器参数从数据库中选择实体（通过活动）？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:05:14.500

好问题！

考虑到您的**第一个和第三个问题**，有几种可能的方法。所有这些都要求您编写自定义 WCF 服务来枚举所需的订单。这可能*不是*WF 服务；它可能是 REST 或 OData 服务。您将如何实施该服务？

1.  您可以完全通过 EF 查询数据库来完成。这根本不依赖于 WF，并且可能是最简单的方法。您的工作流程将在每次状态更改时更新数据库记录，并且服务只需要读取该值。

2.  您可以依赖 WF 提供的跟踪机制，以及 Ron Jacobs 在[回答您的问题](https://stackoverflow.com/a/10128891/439024)时提到的扩展。跟踪基础结构[在 MSDN 上](http://msdn.microsoft.com/en-us/library/ee513992%28VS.100%29.aspx)进行了描述。可以使用内存中的跟踪对象来获取活动工作流的状态。但是，这可能不适用于 IIS/WF 服务，这些服务在休眠时会自动持久化和卸载。您最好使用跟踪工具将状态记录写入数据库。然后，您的自定义服务将只查询此跟踪数据库。

除非您想要有关通过 WF 服务发生的状态更改和更新的全面信息，否则第一个建议就足够了。

至于你的**第二个问题**，那就有点复杂了。假设您编写了一个列出等待批准的订单的 REST 服务。您编写一个显示这些订单的网页，用户可以检查他想要批准的订单。现在，您需要更新的工作流程数量与他批准的订单数量相同。

正如您所提到的，您可以多次调用 Web 服务，但对于大量订单，这将是不必要的开销。

有什么选择？您需要在您的非 WF 服务上编写一个自定义服务方法，该方法采用一组订单 ID。该服务必须多次调用您的 WF 服务才能更新每个服务。由于 WF 服务是从同一台机器上的另一个服务调用的，因此您可以使用 .Net 命名管道绑定而不是 HTTP 绑定之一，这样开销就会少得多。

值得注意的是，Entity Framework 也不支持批量更新。如果您也希望批量更新数据库，则需要编写存储过程或自定义 SQL。

这一切值得努力吗？大概！使用 WCF 和命名管道绑定是 WF 的标准。您需要[为命名管道配置 Windows 激活服务](http://msdn.microsoft.com/en-us/library/ms752253.aspx)。此外，如果您尚未使用[AppFabric for Windows Server](http://msdn.microsoft.com/en-us/library/hh334201.aspx)，请查看它，因为它为 WF 服务添加了一些非常好的管理工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:43:19.037

我最近发布了一些新示例来展示如何访问 StateMachine 的当前状态和可能的转换。这些可能会对你有所帮助。

[Windows Workflow Foundation (WF4) - 跟踪状态机工作流服务](http://code.msdn.microsoft.com/Windows-Workflow-b9d5ccb7) [Windows Workflow Foundation (WF4) - 跟踪状态机](http://code.msdn.microsoft.com/Windows-Workflow-fee72008)

# php - 如何使用 PHP 的 DOMDocument 仅更改 HTML 文档的某些部分？

> ID：10105244
> 
> 赞同：1
> 
> 时间：2012-04-11T11:45:17.180
> 
> 标签：php, html, dom, html-parsing

假设我有一个`$str`代表 HTML 文档的字符串。它包含一个`$substr`描述一些 HTML DOM 节点的子字符串。我不知道或可以轻松匹配`$substr`，我只知道我在寻找什么 DOM 节点。

我最终想用另一个字符串替换这个子字符串`$replacement`。

我知道如何使用 PHP 的 DOMDocument 和 Xpath 来查找和提取 DOM 节点，...但只需更改 DOMDocument 然后使用`saveHTML`or就会`saveXML`出现以下问题：

*   它不仅会改变`$substr`（它会产生有效的 HTML 或 XML，这可能与输入字符串有很大不同）
*   有严格的限制`$replacement`：它必须可解析为 (X)HTML/XML。但假设我想拥有`$replacement = "<<<<<<<<"`?

有一些子问题可能会有所帮助：

*   有没有办法获取`$str`某个 DOM 节点的开始和结束位置？（类似于 ::getLineNo 方法）？之前有人问[过这个问题](https://stackoverflow.com/questions/4155255/keeping-file-offsets-while-parsing-html-with-the-dom)
*   是否可以转储 DOMDocument 作为输入的原始字符串的串联？

*   您看到更简单或更好的解决方案了吗？

# php - 如何从目录中找出最旧的文件？？？(PHP)

> ID：10105248
> 
> 赞同：1
> 
> 时间：2012-04-11T11:45:52.523
> 
> 标签：php, filemtime

我有一个名为“备份”的目录

它包含以下文件（带有一些具体细节）

```
No---File Name----------------------------------------------------------------Date--------------------Time-----------Size

1\.  blog-backup_on_11-April-2012_at_08-22-18AM.zip  11-April-2012   08:22:18AM  5.28MB
2\.  blog-backup_on_11-April-2012_at_08-25-24AM.zip  11-April-2012   08:25:25AM  5.28MB
3\.  blog-backup_on_11-April-2012_at_08-25-46AM.zip  11-April-2012   08:25:47AM  5.28MB
4\.  blog-backup_on_11-April-2012_at_08-26-07AM.zip  11-April-2012   08:26:08AM  5.28MB
5\.  blog-backup_on_11-April-2012_at_08-27-52AM.zip  11-April-2012   08:27:53AM  5.28MB 
```

我想从“备份”目录中获取最旧的文件，
例如“blog-backup_on_11-April-2012_at_08-22-18AM.zip”，它是目录中最旧的文件。

我尝试[了这个链接](http://php.net/manual/en/function.filemtime.php)，但无法处理逻辑。

请给一些建议，如何获得这个文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:06:11.223

```
$dir = 'path/to/backup/';

foreach (glob($dir.'*.zip') as $filename) {
  $time = filemtime($filename);
  $files[$time] = $filename;
}
krsort($files);

echo reset($files); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T12:01:40.153

尝试这个：

```
 $dir_path = 'c:/my_dir';
    if($handle = opendir($dir_path))
    {

        while(false !== ($entry = readdir($handle)))
        {
            $created = filemtime($dir_path . $entry);
            $myfiles[$created] = $entry;
        }

        krsort($myfiles); //first element is oldest file

        print_r($myfiles);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T20:43:41.623

我不确定为什么提到前面的答案，`krsort();`因为它实际上使第一个元素成为*最新*文件。使用

```
 ksort($file_arr);
    echo reset($file_arr); 
```

将回显最旧的文件。已经提到的开始代码不需要更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-01T02:47:41.477

除非有人能清楚地写出某种类型的单行字，我在这里还没有看到。我更喜欢可读且易于理解的算法，这些算法不依赖于您记住各种排序函数的作用。

```
$latest_file_time = 0;
foreach(glob("backup/*") as $this_filename){
        $file_changed_time = filemtime($this_filename);
        if($file_changed_time > $latest_file_time){
                $latest_file = $this_filename;
                $latest_file_time = $file_changed_time;
        }
}

echo "latest file time = $latest_file_time latest file name = $latest_file"; 
```

# tomcat - 在 ColdFusion 10 中获取实例名称

> ID：10105250
> 
> 赞同：6
> 
> 时间：2012-04-11T11:45:57.353
> 
> 标签：tomcat, coldfusion, coldfusion-10

如何在**ColdFusion 10**中获取 ColdFusion 实例的名称（例如“cfusion”） ？

Pre-10 你可以通过使用 jrun java 对象来做到这一点：

```
<cfobject action="create" type="java" class="jrunx.kernel.JRun" name="jr">

#jr.getServerName()# 
```

但是由于 Jrun 已被 Tomcat 取代，我需要找到一种获取实例名称的新方法。

我知道可以使用 admin api 来完成，但由于安全问题，这对我不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T13:49:23.737

查看服务器范围。server.coldfusion.rootdir 中有一个值。在 CF10 上，这是实例的目录。例如，对于我的 Mac 上的“cfusion”实例，这个值是 /Applications/ColdFusion10/cfusion。您可以获取路径中的最后一个目录 namd，这就是实例的名称。不完全优雅，但可能会为您提供所需的东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-22T06:56:27.510

CF10 的管理 API 中有一个“运行时”组件。您可以使用以下代码片段获取实例名称：

```
var runtime = createObject("component", "CFIDE.adminapi.runtime");
instance = runtime.getInstanceName(); 
```

`getServerName()`这应该返回与组件中使用的相同的值`jrunx.kernel.JRun`。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-04-11T12:35:54.803

这应该有效：

```
<cfset inetAddressObj = createObject("java", "java.net.InetAddress") />
<cfset machineName = inetAddressObj.localhost.getCanonicalHostName() /> 
```

# php - 关于在发布活动时发送图片

> ID：10105264
> 
> 赞同：0
> 
> 时间：2012-04-11T11:46:47.577
> 
> 标签：php, facebook, events

我想上传一张图片到 Facebook 活动。

我不明白[这个答案](http://facebook.stackoverflow.com/questions/9718301/posting-picture-on-event-page)中“@”的含义。不能直接在网上指定图片网址吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:15:04.873

实际上，您无法从根文件夹或您拥有代码的服务器的指定文件夹上传图像。您无法将图片路径链接到此代码。

“@” -> 这是 facebook 标准，用于指向您要上传的图片的真实路径。

# java - 如果表存在，则用于删除表的 Spring Bootstrap 上下文

> ID：10105267
> 
> 赞同：0
> 
> 时间：2012-04-11T11:46:58.357
> 
> 标签：java, spring, hibernate, jpa, spring-jdbc

我正在尝试创建一个应用程序引导程序，如果它们存在，它将删除应用程序中的所有表，然后用新数据初始化它们。

我创建了一个加载数据源上下文的 Spring 上下文 - 但是我不知道如何覆盖数据源的初始化，以便可以根据数据源的加载方式自定义行为。所以.. 使用 Hibernate 作为我的 JPA 实现..

如果数据源是从应用程序加载的 - 那么我希望更新模式：

```
 <persistence-unit name="myDB" transaction-type="RESOURCE_LOCAL">
    <properties>
        <property name="hibernate.hbm2ddl.auto" value="update"/>
    </properties>
</persistence-unit> 
```

如果数据源是从引导程序加载的 - 那么我需要以某种方式重载此行为，以便在加载新数据之前始终从头开始创建数据库：

```
 <persistence-unit name="myDB" transaction-type="RESOURCE_LOCAL">
    <properties>
        <property name="hibernate.hbm2ddl.auto" value="create"/>
    </properties>
</persistence-unit> 
```

我一直采用的方法不起作用，因为我将使用“更新”设置加载数据源，然后在尝试加载新数据之前删除表（如果存在）。但是 - 不再存在用于写入数据的表！

提前致谢

西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:06:39.307

您可以从 Spring 配置中传递 JPA 属性，而不是`persistance.xml`使用可以由 PlaceholderConfigurer（可能是 system-properties="OVERRIDE"）或 Spring 配置文件（自 3.1 起）或使用 Maven 过滤配置的占位符：

```
<util:map id="jpaPropertyMap" key-type="java.lang.String" value-type="java.lang.Object">
    <entry key="hibernate.hbm2ddl.auto" value="${database.ddl.mode}" />
</util:map>

<bean id="managementEntityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
    p:dataSource-ref="dataSource"
    p:jpaPropertyMap-ref="jpaPropertyMap" /> 
```

# objective-c - 如何在 ios 上定义可达性超时

> ID：10105276
> 
> 赞同：6
> 
> 时间：2012-04-11T11:47:25.440
> 
> 标签：objective-c, ios, reachability

我使用 Reachability 类来了解我是否有可用的 Internet 连接。问题是当 wifi 可用但没有互联网时，该`- (NetworkStatus) currentReachabilityStatus`方法需要太多时间。

我的代码：

```
Reachability* reachability = [Reachability reachabilityWithHostName:@"www.apple.com"];
NetworkStatus remoteHostStatus = [reachability currentReachabilityStatus]; 
```

应用程序暂时“冻结”在第二行。如何定义此等待的最长时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T15:31:30.567

我不这么认为。但更重要的是，如果可以的话，我认为你不会想要（你可能会得到误报）。让可达性顺其自然。

如果您查看 Reachability 演示项目，那么这个概念并不是在您需要 Internet 时调用`reachabilityWithHostName`和检查。`currentReachabilityStatus`您在应用程序委托的 didFinishLaunchingWithOptions 期间调用 currentReachabilityStatus，设置通知，当 Internet 连接发生变化时，Reachability 会告诉*您。*我发现`currentReachabilityStatus`当我（a）在启动时设置可达性时，后续检查非常快（无论连接性如何）；但是 (b) 以即时方式检查连通性。

如果您绝对需要立即开始处理，那么问题是您是否可以将其推入后台（例如`dispatch_async()`）。例如，我的应用程序从服务器检索更新，但因为这是在后台发生的，所以我和我的用户都不知道有任何延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-14T18:57:27.073

I was having issues with the same thing but I found a way to specify a timeout. I replaced this method inside the Reachability Class from Apple.

```
- (NetworkStatus)currentReachabilityStatus
{
NSAssert(_reachabilityRef != NULL, @"currentNetworkStatus called with NULL     SCNetworkReachabilityRef");
//NetworkStatus returnValue = NotReachable;
__block SCNetworkReachabilityFlags flags;

__block BOOL timeOut = NO;
double delayInSeconds = 5.0;

dispatch_time_t delay = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
dispatch_after(delay, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^(void){

    timeOut = YES;

});

__block NetworkStatus returnValue = NotReachable;

__block BOOL returned = NO;
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    if (SCNetworkReachabilityGetFlags(_reachabilityRef, &flags))
    {
        if (_alwaysReturnLocalWiFiStatus)
        {
            returnValue = [self localWiFiStatusForFlags:flags];
        }
        else
        {
            returnValue = [self networkStatusForFlags:flags];
        }
    }
    returned = YES;

});

while (!returned && !timeOut) {
    if (!timeOut && !returned){
        [NSThread sleepForTimeInterval:.02];
    } else {
        break;
    }
}

return returnValue;
} 
```

# c# - 将值附加到现有 IEnumerable 的末尾时产生返回

> ID：10105279
> 
> 赞同：6
> 
> 时间：2012-04-11T11:47:30.540
> 
> 标签：c#, yield-return

我刚发现`yield return`，我看起来真的很好。我以这样的方法使用它：

```
public IEnumerable<ValidationResult> Validate(ValidationContext vc)
{
    if (Name == "Arbitary")
        yield return new ValidationResult("Bad Name.", new[] { "Name" });
    else if (Email == "BadEmail")
        yield return new ValidationResult("Bad Email.", new [] {"Email" });
    // further rules follow.
} 
```

但是，我需要更改此方法以从子方法返回一些 ValidationResults。如果不使用`yield`，代码将如下所示：

```
public override IEnumerable<ValidationResult> Validate(ValidationContext vc)
{
    // TryValidateObject fills the ICollection you pass it.
    List<ValidationResult> retVal = new List<ValidationResult>();
    Validator.TryValidateObject(this, vc, retVal, true);

    if (Name == "Arbitary")
        retVal.Add(new ValidationResult("Bad Name.", new[] { "Name" }));
    else if (Email == "BadEmail")
        retVal.Add(new ValidationResult("Bad Email.", new[] { "Email" }));

    return retVal;
} 
```

是否可以使用 重写它`yield`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T11:54:34.650

你在找这个吗？

```
public override IEnumerable<ValidationResult> Validate(ValidationContext vc)
{
    // TryValidateObject fills the ICollection you pass it.
    List<ValidationResult> retVal = new List<ValidationResult>();
    Validator.TryValidateObject(this, vc, retVal, true);
    foreach (var item in retVal)
        yield return item;
    if (Name == "Arbitary")
        yield return new ValidationResult("Bad Name.", new[] { "Name" });
    else if (Email == "BadEmail")
        yield return new ValidationResult("Bad Email.", new[] { "Email" });       
} 
```

如果是这样，我相信第一个版本看起来更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T15:03:37.337

到目前为止发布的其他解决方案都很好。这是解决您的问题的另一种方法：

*   创建两个序列
*   连接它们
*   返回串联。

所以：

```
public override IEnumerable<ValidationResult> Validate(ValidationContext vc)
{
  return ResultsFromValidator(vc).Concat(AdditionalResults());
}
private IEnumerable<ValidationResult> ResultsFromValidator(ValidationContext vc)
{
  List<ValidationResult> retVal = new List<ValidationResult>();
  Validator.TryValidateObject(this, vc, retVal, true);
  return retVal;
}
private IEnumerable<ValidationResult> AdditionalResults()
{
  if (Name == "Arbitrary")
    yield return new ValidationResult("Bad Name.", new[] { "Name" });
  ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T11:54:18.267

当然。只需使用这个：

```
foreach (var item in retVal) {
    yield return item;
} 
```

之后，您还可以继续收益回报。因此，您可以在调用该方法后返回您的 retVal，然后像第一个示例一样继续。像这样：

```
public override IEnumerable<ValidationResult> Validate(ValidationContext vc)
{
    List<ValidationResult> retVal = new List<ValidationResult>();
    Validator.TryValidateObject(this, vc, retVal, true);
    foreach (var item in retVal) {
        yield return item;
    }

    if (Name == "Arbitary")
        yield return new ValidationResult("Bad Name.", new[] { "Name" });
    else if (Email == "BadEmail")
        yield return new ValidationResult("Bad Email.", new[] { "Email" });
    //...
} 
```

# windows - Windows - 当更衣室进程崩溃时，文件会发生什么，通过网络锁定

> ID：10105282
> 
> 赞同：2
> 
> 时间：2012-04-11T11:47:46.910
> 
> 标签：windows, file-locking

考虑一个在“本地”机器上运行的进程，它将文件锁定在 Windows 共享文件夹中（即位于另一台“远程”机器上的文件）。

如果“本地”进程崩溃，甚至本地 PC 关闭，或发生网络故障，文件会发生什么？即没有人明确地解锁文件 - 那么它会如何以及何时解锁？

所有涉及的机器都运行 Windows。

# c++ - netbeans 7.1.1 中的 Boost 库

> ID：10105286
> 
> 赞同：1
> 
> 时间：2012-04-11T11:48:04.313
> 
> 标签：c++, boost, compilation, configure

我需要在 netbeans 7.1.1 中编译和配置 boost 库的帮助，让我补充一下，我确实添加了在编译器选项中提取 boost zip 文件夹的路径，但它并没有帮助我，当我包括在内时

```
 #include <boost/thread.hpp> 
```

编译时出现错误

```
 fatal error :no such file or directory 
```

只是在我写的时候补充一下：-

```
 #include <boost/thread.hpp>//does shows the options out of which thread.hpp is one 
```

任何帮助的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T21:12:29.407

boost::thread 除了头文件之外还需要一个编译库。（我假设您使用的是 Windows 并拥有 netbeans c++ 插件）要为 netbeans 编译库，您需要使用 cygwin 并按照[boost.org](http://www.boost.org/doc/libs/1_49_0/more/getting_started/windows.html#prepare-to-use-a-boost-library-binary)上的步骤，使用该`toolset=gcc`标志以及调用时需要的任何其他标志`b2 install`。`--help`对于每个步骤，请在运行命令之前尝试。

# c# - 为可空外键创建导航属性

> ID：10105289
> 
> 赞同：2
> 
> 时间：2012-04-11T11:48:18.173
> 
> 标签：c#, entity-framework-4, ef-code-first

我正在使用 EntityFramework v4.3.1 并通过从 DbContext 继承并覆盖 OnModelCreating() 来通过代码构建我的模型。我有一张名为**Companies**的表和一张名为**Messages**的表。**Messages**表有一个可为空的外键**Messages.CompanyId**。设置后，特定消息将与特定公司相关联。当此字段为空时，消息与所有公司相关联。

我的问题是我不知道如何在 OnModelCreating() 方法中表达这种行为。如果我做：

```
modelBuilder.Entity<Message>().HasRequired(o => o.Company).WithMany(o => o.Messages).Map(o => o.MapKey("CompanyId")); 
```

我成功地获得了 Company 的导航属性，这样我就可以进行 TestCompany.Messages 之类的调用，并获得与特定公司关联的消息列表。但我还需要返回所有空消息。

如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T12:04:32.373

如果要查询与任何公司无关的消息，则需要`CompanyId`在`Message`实体类中对标量属性进行建模。

```
public class Message
{
    //other porperties

    public int? CompanyId { get; set; }
} 
```

`HasOptional`并使用而不是配置关系`HasRequired`。

```
modelBuilder.Entity<Message>()
    .HasOptional(o => o.Company).WithMany(o => o.Messages)
    .HasForeignKey(m => m.CompanyId); 
```

然后你可以使用查询

```
var messages = db.Messages.Where(m => m.CompanyId == null); 
```

# iphone - NSDate 单位和计算

> ID：10105291
> 
> 赞同：0
> 
> 时间：2012-04-11T11:48:20.443
> 
> 标签：iphone, objective-c, ios

我正在做一个需要检查与第一次发布日期的时差的项目。我正在使用 NSDayCalendarUnit 和 NSWeekCalendarUnit。基本上在前两周的每一天，我都想做一些事情。我正在使用的对象需要一次每两天处于某种状态。

所以例如

```
Day 1 & 2, Week 0 - State 1
Day 3 & 4, Week 0 - State 2
...
Day 1 & 2, Week 1 - State 8
Day 3 & 4, Week 1 - State 9 
```

这是我的代码：

```
 // get the data/time difference from the first launch
    int daysDifferent = [[dateDifferenceInfo objectForKey:@"days"] intValue];
    int weeksDifferent = [[dateDifferenceInfo objectForKey:@"weeks"] intValue];

    if(daysDifferent == 2 | daysDifferent == 3 && !weeksDifferent && _dot.age != 2){
        // set state
    }

    if(daysDifferent == 4 | daysDifferent == 5 && !weeksDifferent && _dot.age != 3){
        // set state
    }
    if((daysDifferent == 6 && weeksDifferent == 0 | daysDifferent == 0 && weeksDifferent == 1) && _dot.age != 4){
       // set state
    }

    if(daysDifferent == 0 | daysDifferent == 1 && weeksDifferent == 1 && _dot.age != 5){
       // set state
    }

    if(daysDifferent == 2 | daysDifferent == 3 && weeksDifferent == 1  && _dot.age != 6){
      // set state   
    }

    if(daysDifferent == 4| daysDifferent == 5 && weeksDifferent == 1  && _dot.age != 7){
      // set state   
    }

    if((daysDifferent == 6 && weeksDifferent == 1 | daysDifferent == 0 && weeksDifferent == 2)  && _dot.age != 8){
      // set state
    }

    if(weeksDifferent >= 2 && !(daysDifferent % 2)){
      // set state
    } 
```

旁注：我知道这是不好的代码，我打算用 switch case 替换它，我只需要先进行逻辑排序。

我的问题是有没有更好的方法来计算这种模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:15:02.643

正如您所说，我对您的目标并不完全清楚：

> 在前两周的每一天，我都想做一些事情。
> 
> 所以例如

```
Day 1 & 2, Week 0 - State 1
Day 3 & 4, Week 0 - State 2
...
Day 1 & 2, Week 1 - State 8
Day 3 & 4, Week 1 - State 9 
```

我原以为会在哪里

```
Day 1 & 2, Week 0 - State 1
Day 3 & 4, Week 0 - State 2
Day 5 & 6, Week 0 - State 3
Day 7 Week 0 & Day 1 Week 1 - State 4.
... 
```

因此，如果您的示例正确，则计算方式不同。

基于更简单的示例，我将计算自第一次约会以来的时间间隔，然后除以一天长度的两倍，然后发言。那就是状态：

```
NSDate *firstDate = ...
NSDate *secondDate = ...
NSTimeInterval interval = [ secondDate timeIntervalSinceDate: firstDate ];
double secondsPerDay = 60 * 60 * 24.0; // s per min times min per hr times hrs per dy. 
int state = (int) (interval / secondsPerDay * 0.5 ) + 1; 
```

另一方面，如果确实如您所描述的那样，那么我将使用的快速和简单的方法是进行类似的计算 - 在最后一行中省略 0.5 因子，然后使用简单的表查找从当天获取状态：

```
int table[ 14 ] = { 1, 1, 2, 2, 3, 3, 4, 5, 5, 6, 6, 7, 7, 8 };
int state = table[ (int) (interval / secondsPerDay ) ]; 
```

# java - 这里需要 Cloneable 吗？

> ID：10105292
> 
> 赞同：3
> 
> 时间：2012-04-11T11:48:23.320
> 
> 标签：java, clone, findbugs

Findbugs 给了我`public GsmSignalStrength clone()`以下警告：类定义了 clone() 但没有实现 Cloneable。

为什么我必须实现 Cloneable？是因为浅拷贝和深拷贝吗？我必须为我糟糕的 Java 技能道歉，但我是 Java 新手。

这是我的代码：

```
class GsmSignalStrength
{
    static final byte SIGNAL_STRENGTH_UNKNOWN = 99;
    static final byte SIGNAL_STRENGTH_1 = 1;
    static final byte SIGNAL_STRENGTH_2 = 2;
    static final byte SIGNAL_STRENGTH_3 = 3;
    static final byte SIGNAL_STRENGTH_4 = 4;
    static final byte SIGNAL_STRENGTH_5 = 5;

    /* Constructors */

    GsmSignalStrength(byte signalStrength)
    {
        initClassVars(signalStrength);
    }

    GsmSignalStrength()
    {
        initClassVars(SIGNAL_STRENGTH_UNKNOWN);
    }

    GsmSignalStrength(byte[] serializedData, IntClass deserializationIndex)
    {
        initClassVars(SIGNAL_STRENGTH_UNKNOWN);
        setClassProperties(serializedData, deserializationIndex);
    }

    byte value;

    /* Methods */

    public void copyTo(GsmSignalStrength destination)
    {
        destination.value = this.value;
    }

    public GsmSignalStrength clone()
    {
        GsmSignalStrength clonedValue = new GsmSignalStrength();

        this.copyTo(clonedValue);

        return clonedValue;
    }

    private void initClassVars(byte signalStrength)
    {
        this.value = signalStrength;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T11:49:54.177

您可以阅读[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Cloneable.html)。

> 一个类实现了 Cloneable 接口，以向 Object.clone() 方法指示该方法可以合法地对该类的实例进行逐个字段的复制。
> 
> 在未实现 Cloneable 接口的实例上调用 Object 的 clone 方法会导致抛出异常 CloneNotSupportedException。

但是，您没有以`clone()`正确的方式使用方法。看看这个[维基页面](http://en.wikipedia.org/wiki/Clone_%28Java_method%29)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T12:32:57.437

`Cloneable`这里*不需要*。

这是因为您的实现`clone()`实际上并没有克隆对象。在 Java 中，克隆的具体含义是使用`Object.clone()`JVM 来复制对象。虽然您的代码做了一些相当于克隆的事情（更好的是，恕我直言——它避免使用魔法），但它不是真正的克隆。

但是，[findbugs](/questions/tagged/findbugs "显示标记为“findbugs”的问题")不知道这一点，因此它担心您可能会尝试克隆非`Cloneable`对象。

这里的一种解决方案可能是将您的方法重命名为其他名称（`copy()`？），因此它似乎不是克隆。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T11:55:24.433

如果您将克隆实现为

```
public GsmSignalStrength clone()
{
    try{
    GsmSignalStrength clonedValue = (GsmSignalStrength )super.clone();

    this.copyTo(clonedValue);
    return clonedValue;
    }catch(CloneNotSupportedException e){thrown new RunTimeException(e);}

} 
```

（如果您要继承 GsmSignalStrength 子类，则需要根据[Object.clone()](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#clone%28%29)的文档进行）

super.clone 调用将引发 CloneNotSupportedException

# actionscript - 在 AS2 中蜂拥而至

> ID：10105296
> 
> 赞同：0
> 
> 时间：2012-04-11T11:48:42.833
> 
> 标签：actionscript, actionscript-2

嗨，我不断收到错误消息：在大于之前期望标识符。在第 13 行。请提供任何帮助，谢谢。

```
 fly = function () {
    this.animate = function() {
        // Capture mouse positions and distance from mouse
        this.targetX = _root._xmouse;
        this.targetY = _root._ymouse;
        this.distX = this.targetX-this.meX+this.flockX;
        this.distY = this.targetY-this.meY+this.flockY;
        // 
        if ((this.targetX == this.oldTargetX) && Math.random()>0.9) {
            // add small scale random darting if mouse is still
            this.flockX = (Math.random()*100)-50;
            this.flockY = (Math.random()*100)-50;
        } else if ((this.targetX<>this.oldTargetX) && Math.random()>0.8) {
            // add large scale random darting if mouse is moving
            this.flockX = (Math.random()*400)-200;
            this.flockY = (Math.random()*400)-200;
        }
        // Apply inertia equation
        this.meX = Math.round(this.meX+(this.distX)/20);
        this.meY = Math.round(this.meY+(this.distY)/20);
        // perform animation
        this._x = this.meX;
        this._y = this.meY;
        // remember the current mouse pos so we can tell if
        // it has moved next time around
        this.oldTargetX = this.targetX;
    };
    this.initialize = function() {
        this.targetX = 0;
        this.targetY = 0;
        this.distX = 0;
        this.distY = 0;
        this.meX = this._x;
        this.meY = this._y;
        this.oldTargetX = 0;
        this.flockX = (Math.random()*200)-100;
        this.flockY = (Math.random()*200)-100;
    };
    // set up onEnterFrame script to animate _parent...
    this.initialize();
    this.onEnterFrame = this.animate;
};
    //
    //
    var i:Number = 0;
    var bugClip:MovieClip;
    for (i=0; i<30; i++) {
        bugClip = this.attachMovie("bug", "bug"+i, i);
        fly.apply(bugClip);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:01:24.443

我不了解 Actionscript，但是通过查看您的代码，我建议您这样做：

```
 randomValue = Math.random()
    if ((this.targetX == this.oldTargetX) && randomValue>0.9) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-30T18:39:24.100

[自此处的 Flash Player 5 文档参考](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00000631.html)以来，不推荐使用 <> 运算符来表示不等于

您应该使用 != 来实现相同的功能。

虽然我在 Flash Player 10.2 上对此进行了测试，但它仍然可以编译和运行而没有错误。我猜你正在编译到更高版本。

# iphone - iPhone：fb://... URL 打开 Premier Inn 应用程序，而不是 Facebook

> ID：10105298
> 
> 赞同：2
> 
> 时间：2012-04-11T11:49:02.583
> 
> 标签：iphone, facebook, url

我不太了解iOS如何处理URL，但它似乎在我的手机上做了一些奇怪的事情......

我们的应用程序中有一个“Like”按钮，单击该按钮时应该打开 Facebook 应用程序（或 Safari，如果未安装 Facebook）。出于某种原因，当我在手机上单击它时，它会打开“Premier Inn”应用程序。我的手机上同时安装了 Facebook 应用程序和 Premier Inn 应用程序，但不确定为什么在执行以下代码时 Facebook 没有打开：

```
NSURL *fanPageURL = [NSURL URLWithString:@"fb://page/BIG_NUMBER_HERE"];

if (![[UIApplication sharedApplication] openURL: fanPageURL]) { ... } 
```

出于显而易见的原因，我在上面的代码中用页码替换了 BIG_NUMBER_HERE。

谁能解释为什么这可能会出错？Premier Inn 应用程序能否以某种方式“注册”为 fb:// 网址的处理程序？

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:51:44.090

正如您所建议的，听起来 Premier Inn 已注册为“fb”的处理程序。没有中央注册中心可以阻止应用程序使用相同的 URL 方案，这实际上取决于开发人员的好运和合理的命名空间选择。

编辑：我找不到这方面的规范来源，但调用的处理程序应用程序是最近安装的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T04:47:24.817

尝试将其更改`page`为`profile`.

# nsis - NSIS WriteIniStr

> ID：10105299
> 
> 赞同：1
> 
> 时间：2012-04-11T11:49:09.317
> 
> 标签：nsis

我正在尝试使用 NSIS 覆盖我的应用程序 .config 文件中的现有值。

我想更改'端点地址="http://DefaultWebService.asmx"'

到'端点地址="http://MyWebService.asmx"'

我的配置文件看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
<system.serviceModel>
<client>
  <endpoint address="http://DefaultWebService.asmx"
    binding="customBinding" bindingConfiguration="MyServiceSoap12"
    contract="WebServiceProxies.MyServiceSoap" name="MyServiceSoap12" />
</client>
</system.serviceModel>
</configuration> 
```

在我的 NSIS 中，我正在使用：

```
WriteIniStr "$MyApp.exe.config" "system.serviceModel" "endpoint address" "endpoint address="http://MyWebService.asmx" 
```

但这只是增加了

```
[system.serviceModel]
endpoint address=http://MyWebService.asmx 
```

到 .config 文件的底部。

我哪里错了？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:46:58.350

问题是您正在使用 WriteIniStr 更新 .ini 文件，而 application.config 是一个 XML 文件。你需要使用类似[这个](http://nsis.sourceforge.net/XML_plug-in)插件的东西。

# php - 如何更新现有日期并在 MySQL 表中插入新日期

> ID：10105304
> 
> 赞同：0
> 
> 时间：2012-04-11T11:49:21.973
> 
> 标签：php, mysql

我在更新日期时遇到了一点问题。我的第一张桌子是

```
DONOR
donor-nic----username-----status
111----------ali----------available
222---------usman--------notavailable 
```

我的第二张桌子是

```
DONATION
donation_id------donor_nic-----date---
1----------------111----------2012/03/04
2---------------111-----------2012/06/07
3----------------111---------2012/07/08
4----------------222---------2012/03/03 
```

现在我正在编辑个人资料，例如：

*   更改日期：2012/07/07
*   更改状态：可用/不可用

我想做以下事情：

*   如果捐赠者正在编辑个人资料/状态.. 选择捐赠表中已经存在的日期和他的捐赠者_nic，那么它将更新他的日期。
*   如果捐赠者选择捐赠表中不存在的新日期，则它将插入该日期。

我不知道如何选择捐赠者（111）的所有日期，然后从新日期匹配这个日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:58:27.367

要查看是否已经存在与特定捐赠者_nic 对应的指定日期，请使用

`SELECT COUNT(date) > 0 FROM DONATION WHERE donor_nic="111" AND date="your date";`

`true`如果已经为该供体_nic 指定了“您的日期”，这应该返回。

# asp.net - 在特定页面上启用 SSL。IIS Express 和 VS 2010

> ID：10105310
> 
> 赞同：0
> 
> 时间：2012-04-11T11:49:33.437
> 
> 标签：asp.net, visual-studio-2010, iis, iis-express

我刚刚为 Visual Studio 2010 安装了 sp1，现在我正在使用 IIS Express 调试我的 asp.net 项目和网站。我知道我可以从项目的属性中启用 ssl。但我想弄清楚的是如何为几个页面启用和要求 SSL，例如`Login.aspx`和`Register.aspx`.

我相信在 IIS 中，我们可以从 IIS 管理器中执行此类操作，但是，除了系统托盘中的一个小图标外，似乎没有 IIS express 的管理区域。我没有使用 webmatrix 安装 IIS express，而是作为一个独立的应用程序安装。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:32:00.810

您可以使用[Url Rewriting](http://www.iis.net/download/urlrewrite)来做到这一点。如果您在 IIS 中为您的站点安装了证书，但您为 https 和 http 配置了标头，则可以通过任一方法访问该站点的页面。您可以使用 url 重写来强制对给定页面的所有请求为 https，如下所示：

```
<rewrite >
  <rules>
    <clear />
    <rule name="Redirect Login Page" stopProcessing="true">
      <match url="^Login.aspx(.*)" />
      <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
        <add input="{HTTPS}" pattern="^OFF$" />
      </conditions>
      <action type="Redirect" url="https://{HTTP_HOST}/Login.aspx{R:1}" />
    </rule> 
```

我已经在一些应用程序中使用过它并且效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:47:00.480

您也可以以编程方式进行操作。请参阅[Request.IsSecureConnection](http://msdn.microsoft.com/en-us/library/system.web.httprequest.issecureconnection.aspx)和（仅）根据需要重定向。

有点跑题了，但是当你有一个[前端设备/集中器](https://stackoverflow.com/questions/998397/why-does-request-issecureconnection-return-false-when-true-is-expected)时，上面确实有一些警告。

# android - Android不止一次创建片段

> ID：10105311
> 
> 赞同：0
> 
> 时间：2012-04-11T11:49:33.437
> 
> 标签：android, android-fragments, fragment

使用此[示例](http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentTabsPager.html)：我制作了自己的片段，其中包含标签主机和标签内容：

```
 public class TabsFragment extends Fragment
    {
        private static final String EXTRA_TAB = "EXTRA_TAB";

        private TabHost tabHost;
        private TabManager tabManager;
        private MaptrixFragmentActivity activity;
        private Context context;

        @Override
        public void onAttach(Activity activity) 
        {
            this.activity = (MaptrixFragmentActivity) activity;
            this.context = activity;
            super.onAttach(activity);
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
        {
            View view = inflater.inflate(R.layout.fragment_tabs, container, false);
            tabHost = (TabHost)view.findViewById(android.R.id.tabhost);
            tabHost.setup();
            tabManager = new TabManager(activity, tabHost, R.id.realtabcontent);

            initTabs();

            if (savedInstanceState != null)
            {
                tabHost.setCurrentTabByTag(savedInstanceState.getString(EXTRA_TAB));
            }
            return view;
        }

        private void initTabs()
        {   
            // tab one
            addTab(Fragment.class, null, R.drawable.icon1, Res.S(R.string.tab1));

            // I have not implement the tab fragment yet!

            // tab two
            addTab(Fragment.class, null, R.drawable.icon2, Res.S(R.string.tab2));
        }

        private void addTab(Class<?> fragmenClass, Bundle bundle, int drawableId, String tag)
        {
            TabHost.TabSpec spec = tabHost.newTabSpec(tag);
            View tabIndicator = LayoutInflater.from(context).inflate(R.layout.item_tab, tabHost.getTabWidget(), false);
            ImageView icon = (ImageView) tabIndicator.findViewById(R.id.tab_image);
            icon.setImageResource(drawableId);
            spec.setIndicator(tabIndicator);
            tabManager.addTab(spec, fragmenClass, bundle);
        }

        @Override
        public void onSaveInstanceState(Bundle outState) 
        {
            super.onSaveInstanceState(outState);
            outState.putString(EXTRA_TAB, tabHost.getCurrentTabTag());
        }

        public static class TabManager implements TabHost.OnTabChangeListener 
        {
            private final FragmentActivity activity;
            private final TabHost tabHost;
            private final int containerID;
            private final HashMap<String, TabInfo> tabs = new HashMap<String, TabInfo>();
            TabInfo lastTab;
            TabFactory factory;

            public TabManager(FragmentActivity activity, TabHost tabHost, int containerID) 
            {
                this.activity = activity;
                this.tabHost = tabHost;
                this.containerID = containerID;
                factory = new TabFactory(activity);
                tabHost.setOnTabChangedListener(this);
            }

            public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args) 
            {
                tabSpec.setContent(factory);
                String tag = tabSpec.getTag();

                TabInfo info = new TabInfo(tag, clss, args);

                info.fragment = activity.getSupportFragmentManager().findFragmentByTag(tag);

                if (info.fragment != null && !info.fragment.isDetached()) 
                {
                    FragmentTransaction ft = activity.getSupportFragmentManager().beginTransaction();
                    ft.detach(info.fragment);
                    ft.commit();
                }

                tabs.put(tag, info);
                tabHost.addTab(tabSpec);
            }

            @Override
            public void onTabChanged(String tabId) 
            {
                TabInfo newTab = tabs.get(tabId);
                if (lastTab != newTab) 
                {
                    FragmentTransaction ft = activity.getSupportFragmentManager().beginTransaction();
                    if (lastTab != null) {
                        if (lastTab.fragment != null) 
                        {
                            ft.detach(lastTab.fragment);
                        }
                    }
                    if (newTab != null) 
                    {
                        if (newTab.fragment == null) 
                        {
                            newTab.fragment = Fragment.instantiate(activity, newTab.clss.getName(), newTab.args);
                            ft.add(containerID, newTab.fragment, newTab.tag);
                        } 
                        else 
                        {
                            ft.attach(newTab.fragment);
                        }
                    }

                    lastTab = newTab;
                    ft.commit();
                }
            }
        }

        private static class TabInfo 
        {
            private final String tag;
            private final Class<?> clss;
            private final Bundle args;
            private Fragment fragment;

            TabInfo(String _tag, Class<?> _class, Bundle _args) 
            {
                tag = _tag;
                clss = _class;
                args = _args;
            }
        }

        private static class TabFactory implements TabHost.TabContentFactory 
        {
            private final Context mContext;

            public TabFactory(Context context) 
            {
                mContext = context;
            }

            @Override
            public View createTabContent(String tag) 
            {
                View v = new View(mContext);
                v.setMinimumWidth(0);
                v.setMinimumHeight(0);
                return v;
            }
        }
    } 
```

但是当设备改变方向时，onCreateView 方法会调用两次或多次。

我的 FragmentActivity 是：

```
 public class MaptrixFragmentActivity extends FragmentActivity
    {
        @Override
        protected void onCreate(Bundle savedInstanceState) 
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.factivity);

            replace(R.id.factivity_content, new TabsFragment(), false, false);
        }

        @Override
        protected void onResume()
        {
            super.onResume();
        }

        @Override
        protected void onPause()
        {
            super.onPause();
        }

        public void replace(int rootView, Fragment fragment)
        {
            replace(rootView, fragment, true,  true);
        }

        public void replace(int rootView, Fragment fragment, boolean backStack)
        {
            replace(rootView, fragment, backStack,  true);
        }

        public void replace(int rootView, Fragment fragment, boolean backStack,  boolean animation)
        {
            FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
            if (animation) transaction.setCustomAnimations(R.anim.fragment_open, R.anim.fragment_close, R.anim.fragment_open_stack, R.anim.fragment_close_stack);
            if (backStack) transaction.addToBackStack(null);
            transaction.replace(R.id.factivity_maptrix_content, fragment);
            transaction.commit();
        }
    } 
```

为什么我有这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:01:09.060

您也许可以添加`android:configChanges="keyboardHidden|orientation"`到您的`AndroidManifest.xml`文件中。这样可以避免在方向更改时重新创建活动，因此不会创建两次 TabsFragment。

```
<activity android:name="MaptrixFragmentActivity" android:configChanges="keyboardHidden|orientation"> 
```

有关更多详细信息，请参阅[此](http://developer.android.com/reference/android/R.attr.html#configChanges)内容。

# entity-framework - 插入/更新多个对象

> ID：10105315
> 
> 赞同：0
> 
> 时间：2012-04-11T11:49:59.867
> 
> 标签：entity-framework

我有以下课程：

```
public class Location
{
    public int Id { get; set; }
    public string Description { get; set; }
    public string CarId { get; set; } 
    public Car Car { get; set; }
}

public class Car
{
    public string Id { get; set; }
    public string Color { get; set; } 
} 
```

还有一个观点：

```
 <div>@Html.LabelFor(location => location.Description)</div>
    <div>@Html.EditorFor(location => location.Description)</div>

    <div>@Html.LabelFor(location => location.Car.Id)</div>
    <div>@Html.EditorFor(location => location.Car.Id)</div>

    <div>@Html.LabelFor(location => location.Car.Color)</div>
    <div>@Html.EditorFor(location => location.Car.Color)</div> 
```

当我尝试这个时：

```
 [HttpPost]
    public ActionResult Create(Location location)
    {
        if (ModelState.IsValid) 
        {
            Car car = db.Car.Find(location.Car.Id);

            if (car != null)
                db.Entry(car).CurrentValues.SetValues(location.Car);
            else
                db.Car.Add(location.Car);

            db.Location.Add(locacao);
            db.SaveChanges();  

            return RedirectToAction("Index");
        }

        return View(locacao);
    } 
```

它在“db.SaveChanges”中中断，因为它说“无法在对象“dbo.Car”中插入重复键。

如果我删除'db.Location.Add(locacao);'，那么它对汽车（插入和更新）工作得很好，但数据库中没有添加任何位置。

当数据库中没有汽车的 ID 时，如何插入新车、有时更新并插入新位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:19:47.120

`Add`方法总是在对象图中添加所有实体，因此两者`db.Car.Add(location.Car)`都`db.Location.Add(location)`插入位置和汽车。

试试这个：

```
db.Location.Add(locacation);
// You can also use another way to find if you are working with a new Car 
// like location.Car.Id == 0
if (db.Car.Any(c => c.Id == location.Car.Id)) 
{
    db.Entry(location.Car).State = EntityState.Modified;
}
db.SaveChanges(); 
```

# c# - 将 DB 日志记录信息应用于每个 Crystal Reports 部分时，应用程序运行缓慢

> ID：10105318
> 
> 赞同：3
> 
> 时间：2012-04-11T11:50:08.423
> 
> 标签：c#, .net, crystal-reports

目前我使用以下方法将连接信息分配给所有报告部分。但由于我在报告中有很多部分，报告会在将近 10 秒后显示。这看起来真的很慢。当它安装在客户端时，是否有其他方法可以一劳永逸地为每个 CR 设置登录信息。

**JFYI**：所有 CR 都使用相同的登录凭据连接到同一个数据库。先感谢您。

```
 readDiamondBillReport = new RealDiamondBill();
                        crConnectionInfo.ServerName = db.Connection.DataSource;
                        crConnectionInfo.DatabaseName = db.Connection.Database;
                        crConnectionInfo.UserID = "client";
                        crConnectionInfo.Password = "client";
                        crConnectionInfo.IntegratedSecurity = false;

                        CrTables = readDiamondBillReport.Database.Tables;
                        foreach (CrystalDecisions.CrystalReports.Engine.Table CrTable in CrTables)
                        {
                            crtableLogoninfo = CrTable.LogOnInfo;
                            crtableLogoninfo.ConnectionInfo = crConnectionInfo;
                            CrTable.ApplyLogOnInfo(crtableLogoninfo);
                        }

                        Sections crSections2 = readDiamondBillReport.ReportDefinition.Sections;
                        // loop through all the sections to find all the report objects 
                        foreach (Section crSection in crSections2)
                        {
                            ReportObjects crReportObjects = crSection.ReportObjects;
                            //loop through all the report objects in there to find all subreports 
                            foreach (ReportObject crReportObject in crReportObjects)
                            {
                                if (crReportObject.Kind == ReportObjectKind.SubreportObject)
                                {
                                    SubreportObject crSubreportObject = (SubreportObject)crReportObject;
                                    //open the subreport object and logon as for the general report 
                                    ReportDocument crSubreportDocument = crSubreportObject.OpenSubreport(crSubreportObject.SubreportName);

                                    Tables SubCrTables = crSubreportDocument.Database.Tables;
                                    foreach (CrystalDecisions.CrystalReports.Engine.Table SubCrTable in SubCrTables)
                                    {
                                        crtableLogoninfo = SubCrTable.LogOnInfo;
                                        crtableLogoninfo.ConnectionInfo = crConnectionInfo;
                                        SubCrTable.ApplyLogOnInfo(crtableLogoninfo);

                                    }
                                }
                            }
                        }

                        readDiamondBillReport.Refresh(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T15:06:17.910

我终于发现，应用登录信息既不是问题，也不是刷新报告。但这是我用来在水晶报表中设置水印的大型图片对象。

我有 10 份使用此图片作为水印的报告。我删除了带水印的图像，现在解决了以下问题：

1.  项目构建非常非常快。以前大约需要 1 分钟才能构建，现在已大幅减少到 8-10 秒。

2.  对项目的任何更改，尤其是对报告的更改都可以更快地保存。

3.  一两次构建后，我曾经得到[“没有足够的存储空间来完成此操作” 。](https://stackoverflow.com/questions/6626056/not-enough-storage-is-available-to-complete-this-operation)我不得不重新启动 VS 并为每个构建交叉手指。

4.  Crystal Reports 在 CrystalReportViewer 上的显示速度更快，`objrpt.PrintToPrinter`运行速度也提高了 500 倍。

我希望这些观点对程序员同行有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T00:59:05.110

尽管您已经回答了自己的问题，但我将指出一种可用于 Crystal Reports 的替代方法。通常人们使用“拉取”方法，其中在 Crystal Report 上设置连接，并根据嵌入在报表中的查询“拉取”数据集。

但是，也可以使用“推送”方法。在这种情况下，您只需将 Crystal Report 数据源绑定到 XSD 模式并在 Crystal Report 上设置数据集。在 .NET 中，您可以轻松地从数据集中生成 XSD，因此这种方法很简单。因此，您可以将任何子报表绑定到您希望从传递的数据集中获得的特定表。

这里的优点是数据可以来自任何 DBMS（与数据库无关），并且可以在传递给报告之前根据需要进行操作（实现自定义安全性、连接等）。

需要注意的是，您不会为具有大量数据的报表实施此方法，因为 .NET 数据集可能会占用大量内存。

但是，由于您的性能问题与图像有关，因此这种方法没有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-14T06:06:35.803

每个报表都有一个子报表集合。

您可以将登录信息应用于每个子报表的表格，而不是在每个部分中搜索子报表。

这是一些代码

```
private void showrep(string repName)
        {
            rd = new ReportDocument();
            rd.Load(pth+"\\"+repName);
            LogInInfo();

            crv.ReportSource = rd;  // crv is the reportviewer
            crv.Show();
        }

        private void LogInInfo()
        {
            MyApp.Properties.Settings s = new MyApp.Properties.Settings();
            TableLogOnInfo linfo = new TableLogOnInfo();
            linfo.ConnectionInfo.DatabaseName = s.dbname;
            linfo.ConnectionInfo.UserID = s.usr;
            linfo.ConnectionInfo.Password = s.pw;
            linfo.ConnectionInfo.ServerName = s.svr;

            foreach (Table t in rd.Database.Tables)
            {
                t.ApplyLogOnInfo(linfo);
            }
            foreach (ReportDocument sr in rd.Subreports)
            {
                foreach (Table t in sr.Database.Tables )
                {
                    t.ApplyLogOnInfo(linfo);
                }
            }
        } 
```

希望能帮助到你。

# jquery - 使用 jQuery 计算 div 中的 div 数量

> ID：10105320
> 
> 赞同：3
> 
> 时间：2012-04-11T11:50:33.010
> 
> 标签：jquery

我有以下输出：

```
<section class="group">
  <div class="header">Header 1</div>
      <div class="item">item1</div>
      <div class="item">item2</div>
      <div class="item">item3</div>
  </div>    
</section>

<section class="group">
  <div class="header">Header 2</div>
      <div class="item">item1</div>
      <div class="item">item2</div>
      <div class="item">item3</div>
      <div class="item">item4</div>
      <div class="item">item5</div>
    </div>   
</section> 
```

我想用 jQuery 告诉我`.item`每个`<section>`. 目前正在尝试这个，但它没有给我正确的数字：

```
$('section.group').each(
  function() {
    alert($(this).length);
  }
); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-11T11:52:27.967

尝试：

```
$('section.group').each(
  function() {
    alert($('.item', $(this)).length);
  }
); 
```

### [[工作示例]](http://jsbin.com/epiwir)

或者

```
$('section.group').each(
  function() {
    alert(($(this).find('.item')).length);
  }
); 
```

### [[工作示例]](http://jsbin.com/epiwir/2)

* * *

您正在迭代各个部分，但您缺少对具有类的元素进行计数`item`:)

* * *

**有用的网址：**

*   [jQuery 上下文](http://api.jquery.com/jQuery/)
*   [jQuery find() 方法](http://api.jquery.com/find/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-06T20:49:29.767

```
$(".group").find(".item").length 
```

这是最简单的一条线解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T11:54:32.783

*您需要在this*的上下文中查看“.item” 。*this*的长度为 1，因为 this = 'section.group'

```
$('section.group').each(
  function() {
    alert($('.item',this).length);
  }
);​ 
```

在此处查看**选择器上下文**标题：http: [//api.jquery.com/jQuery/](http://api.jquery.com/jQuery/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T11:54:56.380

试试这个：

```
$('section').each(function() {
    alert($('.item', this).length);
});​ 
```

演示：http: [//jsfiddle.net/aXVqM/](http://jsfiddle.net/aXVqM/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-11T11:58:02.747

看下面的例子。 [http://jsfiddle.net/ricardolohmann/KMgtZ/](http://jsfiddle.net/ricardolohmann/KMgtZ/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-11T12:02:49.130

```
$('section.group').each(
  function() {
    alert($(this).children('.item').length);
  }
); 
```

这会比其他的快....我想

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-01-29T11:56:13.990

试试这个。

```
$('.change').click(function () {
     var lng = $(".item").length;
            $('.change ').height(function (index, height) {
                return (height * lng);
                //alert(height);
            });

     alert(lng);
        }); 
```

.change 是您必须更改高度或宽度的 div 类，您可以在此处查看如何实现：http: [//jsfiddle.net/sahilosheal/572WV/](http://jsfiddle.net/sahilosheal/572WV/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-25T06:31:36.503

我已经更改了第二部分类名的名称，请参见此处的演示：

```
$('section').each(function() {
    var numItems = $('.group').children('div.item').length;

    alert(numItems+''); 
});

$('section').each(function() {
    var numItems = $('.group1').children('div.item').length;

    alert(numItems+''); 
}); 
```

请参阅[此演示](http://jsfiddle.net/salwenikhil0724/N3TBg/)。

# objective-c - iOS5 Pages like view

> ID：10105325
> 
> 赞同：0
> 
> 时间：2012-04-11T11:50:48.060
> 
> 标签：objective-c, ios, ipad, view

在 iOS5 中是“页面”样式的特定视图吗？是否有我可以使用的特定控件/UI 元素？我不需要文档的预览模式，只需要来自 NSArray 或类似内容的图像和其下方的文本...

我正在寻找这样的东西：

![在此处输入图像描述](../Images/2d314085b1999e7876650efc2aa6e6bb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:59:15.163

我们为此使用 Gridviews - 请参阅上面提到的[AQGridView](http://github.com/AlanQuatermain/AQGridView)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:54:01.640

您可以使用 Custom 来完成`UItableview`。它会给你像网格视图一样的效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T11:56:58.010

看看[这里](http://developer.apple.com/library/ios/#samplecode/PageControl/Introduction/Intro.html)。这是 Apple 的示例，它将提供与您想要的几乎相同的界面。

希望能帮助到你

# java - Java JITC 本机代码生成/执行示例？

> ID：10105330
> 
> 赞同：1
> 
> 时间：2012-04-11T11:51:19.110
> 
> 标签：java, jit, native-code

我试图理解 Java JITC 的“本机代码生成和执行”部分，但很难准确地想象发生了什么。例如说我有以下课程：

```
class Foo
{
    private int x;
    public void incX()
    {
        x++;
    }
} 
```

javac 为该方法生成以下字节码：

```
public void incX();
Code:
Stack=3, Locals=1, Args_size=1
0:   aload_0
1:   dup
2:   getfield        #17; //Field x:I
5:   iconst_1
6:   iadd
7:   putfield        #17; //Field x:I
10:  return
LineNumberTable:
line 33: 0
line 34: 10

LocalVariableTable:
Start  Length  Slot  Name   Signature
0      11      0    this       LFoo; 
```

当 JITC 将其转换为本机代码时，究竟会发生什么？JVM 是如何执行本机代码的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:37:01.547

当该方法被足够频繁地调用以通过 JVM 的编译阈值时，JIT 将字节码编译为本机代码，并对其进行设置，以便对该函数的调用直接转到本机编译的方法。

# tapestry - Tapestry 5：如何获取引用页面类？

> ID：10105335
> 
> 赞同：3
> 
> 时间：2012-04-11T11:51:52.307
> 
> 标签：tapestry

有没有办法获取生成当前页面请求的前一页的 Tapestry 页面类或名称？

我`@Persist`在 Tapestry 页面中有一个必须重置的属性，*除非*引用页面是当前页面或一组预定义的其他 Tapestry 页面。

Tapestry 是否提供了一种简洁的方式来访问“引荐来源”页面的类或名称，而无需手动查看 Request 对象？

并且鉴于我设法以某种方式获取引用页面的类/名称，有条件地重置`@Persist`-ed 属性的最佳位置在哪里？`SetupRender()`还是`OnActivate()`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T21:59:00.140

我认为没有预定义的方法来获取呈现链接的页面。您可以轻松识别的唯一一个是页面何时调用自身（例如因为事件链接，它触发事件然后转发到页面本身）。

根据您的情况，您可以选择不同的解决方案。没有单一的最佳答案。这可能会有所帮助：[在页面之间传递数据](http://jumpstart.doublenegative.com.au/jumpstart/examples/state/passingbypersist)

*   存储最后一页的 @SessionState 对象很容易，但如果用户打开多个窗口/选项卡或在浏览器中使用前进/后退，它可能会搞砸。
*   包含页面名称的激活上下文也很容易，但用户可能会弄​​乱参数。

.

你想在哪里设置/重置你的属性也取决于你在做什么：[当](http://jumpstart.doublenegative.com.au/jumpstart/examples/navigation/whatiscalledandwhen) 我通常使用 onActivate() 方法时会调用什么，但是当 EventLink 或 Submit 被触发时，这个方法也会被调用两次！

# iphone - Sqlite 数据保存错误

> ID：10105337
> 
> 赞同：1
> 
> 时间：2012-04-11T11:52:02.527
> 
> 标签：iphone, sqlite, blob

我的代码是：

```
const char *sqlInsertString;
sqlite3_stmt *addStatement;
sqlInsertString=sqlite3_mprintf("insert into AnimalTable(name,propertyID,animalID,breed,dateofbirth,sex,notes,imageData) values" "('%s','%s','%s','%s','%s','%s','%s','%d')",nameString,propertyString,animalidString,breedString,dateofbirth,sexString,notesString,imageData);
    if (sqlite3_open([sqlFile UTF8String],&database)==SQLITE_OK) {
        sqlite3_prepare_v2(database, sqlInsertString, -1, &addStatement, NULL);
        if (sqlite3_step(addStatement)==SQLITE_DONE) {
            sqlite3_bind_blob(addStatement, 1, [imageData bytes], [imageData length], NULL);
            sqlite3_finalize(addStatement);
            NSLog(@"Data saved");

        }
        else
            NSLog(@"Some Error occurred");
    }

    sqlite3_close(database); 
```

我想我做错了什么，无法弄清楚。每当我将数据添加到 sqlite 时，它​​都会显示一些错误消息。并且还得到异常 NSInternalInconsistencyException no such table:AnimalTable。但是 AnimalTable 存在，当我在 sqlmanager 中执行查询时它运行正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:15:26.247

以下代码用于存储 blob 类型的数据存储，

愿这对你有帮助

```
 if(sqlite3_prepare_v2(database, sqlInsertQry, -1, &compiledStmt, NULL) == SQLITE_OK ){
                for (NSDictionary *dObj in arForData) {
                     sqlite3_bind_blob(compiledStmt,1,[[dObj valueForKey:@"NotiData"] bytes],[[dObj valueForKey:@"NotiData"] length],NULL);
                    PUT_Date(2,@"fireDate");

                    NSUInteger err = sqlite3_step(compiledStmt);
                    if (err != SQLITE_DONE){
                        //NSLog(@"error while binding %d %s",err, sqlite3_errmsg(database));
                        //NSLog(@"%@",dObj);
                    }
                    sqlite3_reset(compiledStmt);
                }
                sqlite3_finalize(compiledStmt);     
            } 
```

# iphone - 如何使用自动引用计数释放变量？我不想将某些东西设置为零，因为它会创建悬空指针？

> ID：10105340
> 
> 赞同：-3
> 
> 时间：2012-04-11T11:52:10.743
> 
> 标签：iphone, ios, cocoa, automatic-ref-counting

使用arc时如何释放任何东西？我不想将某些东西设置为零，因为它会创建悬空指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:07:40.280

使用 ARC 时，您不需要 - 不能 - 发布任何内容。正如您所建议的，最接近的等效项是将变量设置为`nil`，但这并不是绝对必要的。它不会创建悬空指针。

# pcre - 哪个正则表达式更快

> ID：10105347
> 
> 赞同：0
> 
> 时间：2012-04-11T11:52:38.210
> 
> 标签：pcre

我正在使用 PCRE `|^/foo/(.*?)(?::(?:bar)?)?$|`，否则`|^/foo/(.*?)(?::bar)?:?$|`这将是一个替换，所以我们希望在替换`:`时`:bar`从最后剥离。我知道这两者并不完全相同，但这并不重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T05:00:01.030

我会使用第一个，因为它只需要检查`:`一次。第二个可以匹配前三个字符，`:bat`然后必须回溯，然后`:`再次检查。此外，第二个可以匹配`:bar:`，而第一个不能。实际的速度差异很小。第二种方式最好写成`/^\/foo\/(.*?)(?::bar|:)?$/`

尽量不要使用正则表达式元字符作为分隔符！

# php - 选择是否在 Joomla 组件的子链接中显示模块

> ID：10105350
> 
> 赞同：1
> 
> 时间：2012-04-11T11:52:51.937
> 
> 标签：php, joomla, joomla1.5

在 Joomla 1.5 中，您可以将模块设置为显示在某些菜单上，而不显示在其他菜单上。当您将 Joomla 设置为在指向组件的菜单上显示模块时，它会在该组件内的所有可能链接上显示该模块。无论如何我可以更改此功能。有没有一种方法可以让我决定在某些子链接上显示哪个模块，而无需创建将我引导至这些子链接的菜单。

我希望我的问题很清楚。如果不是，请要求澄清，我很乐意这样做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:13:03.707

您可以考虑使用：[http ://www.nonumber.nl/extensions/advancedmodulemanager](http://www.nonumber.nl/extensions/advancedmodulemanager)

它为您提供了足够的选项来在像您这样的非常特定的页面/场景上显示模块。

# php - 在 XSLT 转换中定义自定义标签

> ID：10105355
> 
> 赞同：1
> 
> 时间：2012-04-11T11:53:25.567
> 
> 标签：php, xml, xslt, rss, xslt-1.0

我使用 php DOMDocument 进行 XSLT 将一个 XML 转换为另一个，我需要使用额外的标签 - **mytag**在生成的文档标签中，如

```
<mytag:full-text>...</mytag:full-text> 
```

为了定义这个标签，我尝试了这样的构造：

```
<xsl:namespace-alias stylesheet-prefix="mytag" result-prefix="mytag"/> 
```

所以我得到一个错误

```
Warning: DOMDocument::load() [domdocument.load]: Namespace prefix mytag on full-text is not defined 
```

我在做什么错？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T12:57:28.533

**这是一个完整的代码示例如何执行此操作**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:mytag="my:tag" exclude-result-prefixes="mytag">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="b">
  <b>
    <mytag:full-text>Some full-text here</mytag:full-text>
  </b>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<a><b/></a> 
```

**产生了想要的正确结果（在 下添加的新元素`b`）：**

```
<a>
   <b>
      <mytag:full-text xmlns:mytag="my:tag">Some full-text here</mytag:full-text>
   </b>
</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T12:05:44.823

尝试将 xmlns:mytag="some_namespace" 添加到 XSLT 的根目录，这样您就可以得到类似的东西

```
<xsl:stylesheet version="1.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:mytag="some_namespace"> 
```

# tfs - TypeMock 7 和构建服务器配置

> ID：10105357
> 
> 赞同：2
> 
> 时间：2012-04-11T11:53:34.527
> 
> 标签：tfs, msbuild, typemock, build-server

我们想升级我们的构建服务器以运行我们的 typemock 测试，但是我在正确配置它并找到有关此的正确信息时遇到了一些麻烦。我们的设置是 TFS2010，有 20 多个项目，每个项目从 TypeMock 5.x 到 6.2.2 运行。所有构建定义都是基于 msbuild 的，因为我们正在等待 TypeMock 使用我们的工作流模板（除了本文的范围之外）。现在，我已经在构建服务器上安装了 Isolator 7.0，但我似乎无法弄清楚我们如何使 typemock 工作。我有各种各样的问题。

1.  由于 TypeMock 安装在构建服务器上，我希望我不必向源代码管理添加任何额外的程序集并引用它们。但这些程序集似乎不在 GAC 中 - 为什么不呢。
2.  由于安装了 TypeMock，我希望我不需要使用许可信息在 msbuild 中调用注册（或发布）目标 - 这是正确的吗？
3.  我需要支持从 5.x 到 6.2.2 的各种版本的 TypeMock，但在构建服务器上安装了 7.0。我需要源代码控制 pr 中的任何版本特定程序集吗？项目和哪个？
4.  当我们在服务器上有 7.0 并且在客户端上有 6.2.2 时，推荐使用 typemock 和 msbuild 团队构建 def 的方法 - 安装什么以及在哪里安装源代码控制中的程序集等等。

我已经阅读了 TypeMock 网站上的所有文档，但仍然无法正确配置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T07:50:05.347

1.  测试项目引用了特定版本的 Isolator（5.x、6.2.2）。由于在构建期间需要程序集，因此程序集必须位于构建可以找到它们的位置。由于安装了 Isolator 7.0，因此可以找到的唯一程序集是 7.0 版本。Isolator 7.0 可以执行旧版本，但必须可以访问原始程序集。因此，原始程序集需要在源代码管理中。

2.  如果安装了隔离器，则无需调用注册操作，只需启动和停止。您需要确保使用隔离器配置实用程序在服务器上设置了一次许可证。

3.  通常，您需要放置[auto-deploy](http://docs.typemock.com/Isolator/##typemock.chm/Documentation/InstallingAutoDeploy.html)所需的所有程序集。在大多数情况下，拥有 Typemock.dll、Typemock.ArrangeActAssert.dll 和 Configuration.dll。

4.  客户端可以安装任何版本> 5.3.4，服务器应该安装V7.0。在源代码管理中，应存储来自 (3) 的程序集。

*免责声明 - 我在 Typemock 工作*

# python - 正则表达式组以查找范围

> ID：10105358
> 
> 赞同：0
> 
> 时间：2012-04-11T11:53:34.683
> 
> 标签：python, regex

我有一个字符串`"age > 4 < 6"`

我想获得最小和最大范围（4 是最小值，6 是最大值）而没有顺序成为问题，所以`"age < 6 > 4"`也应该像`"age > 4 < 6"`

我目前有：

```
pattern = re.compile(r'(?P<min>age.*?> ?[\d+] ?)(?P<max>age.*?< ?[\d+] ?)')
address = pattern.search('age > 4 < 6')
min, max = (address.group('min'), address.group('max'))
print min, max 
```

但这对我不起作用。

我正在尝试使用`.*?`允许 min 出现在 max 之前或 max 出现在 min 之前 - 但无济于事！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T12:24:04.860

```
>>> re.search('( < (?P<min>\d+)| > (?P<max>\d+))+', 'age < 4 > 6').groupdict()
{'max': '6', 'min': '4'} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T12:09:15.400

我对你的问题有点困惑，但你可以使用两个正则表达式：

```
text = "age > 4 < 6"
pmin,pmax = re.compile(r'age.*?< ?(\d+)'), re.compile(r'age.*?> ?(\d+)')
amin,amax = pmin.search(text), pmax.search(text)
min, max  = amin.group(1), amax.group(1)
print min, max 
```

# networking - VLSM 协助

> ID：10105360
> 
> 赞同：-1
> 
> 时间：2012-04-11T11:53:39.693
> 
> 标签：networking, cisco

我有一个关于使用 VLSM 的快速查询。我需要采用 VLSM 的优化寻址方案，我总共有 3 个网络通过两个不同的路由器连接，路由器 1 有一个由 300 台主机组成的网络，另一个由 25 台主机组成的网络。路由器 1 连接到路由器 2 并且有额外的 82 台主机。是否可以通过两个 IP 地址执行此方案？

假设我的起始 IP 是 182.20.1.0，这将如何工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:57:09.330

您至少需要 4 个子网（在路由器 1 和 2 之间，您需要一个 /30 子网）。您需要为每个子网保留 IP 地址，从主机数量最多的子网开始。

主机的数量决定了您的子网有多大。每个子网可以有 (2^n-2) 个主机，保留位数为 n。

因此，对于您的第一个子网，您需要 9 位，剩下的是 /23 子网。

使用下一个可用的 IP 地址重新开始您的下一个子网。

# java - 是否有任何适用于 OpenSocial 的 Java 客户端库？

> ID：10105362
> 
> 赞同：2
> 
> 时间：2012-04-11T11:53:47.677
> 
> 标签：java, opensocial, apache-shindig

我正在寻找 OpenSocial 的 Java 客户端库。Google Code 上有[opensocial-java-client](http://code.google.com/p/opensocial-java-client/)，但它似乎不活跃。有没有其他选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:11:11.663

您可能想看看[Apache Shindig](http://shindig.apache.org/)和[Apache Rave](http://rave.apache.org/)，它们都基于 Java 并且完全基于 OpenSocial。

# android - 封闭钛应用

> ID：10105363
> 
> 赞同：0
> 
> 时间：2012-04-11T11:53:49.100
> 
> 标签：android, titanium, titanium-mobile, titanium-modules

在启动应用程序时，如果它无法连接到服务器，那么我想关闭应用程序。请注意，我没有打开任何窗口或选项卡组。如何关闭应用程序？如果无法直接关闭应用程序，请告诉我是否可以使用 Titan-android-module 关闭应用程序。

PS：使用 Titanium 为 android 制作应用程序。

# wpf - 根据 Command.CanExecute 启用/禁用控制

> ID：10105364
> 
> 赞同：0
> 
> 时间：2012-04-11T11:53:49.860
> 
> 标签：wpf, mvvm, command

如果您有命令或带有参数的命令，则可以轻松控制按钮启用/禁用状态。

```
<Button Content="Seek" Command="{Binding MyCommand}" CommandParameter="SEEK"/> 
```

但是如何处理`TextBox`and `CheckBox`？使用命令，我可以创建一些逻辑并几乎自动控制这些东西：

```
_myCommand = new DelegateCommand<string>(onMyCommand, a => **some logic here**); 
```

但是如何在没有命令支持的情况下将此扩展`myCommand.RiseCanExecute()`到`TextBox`其他控件？

# core-data - 我可以创建一个包含*仅*关系的有效实体吗？（无属性）

> ID：10105367
> 
> 赞同：2
> 
> 时间：2012-04-11T11:53:57.030
> 
> 标签：core-data

![数据模型](../Images/f7ff79a5d3c305ee5d26ae235bbe75a1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T19:57:41.327

答案是否定的真的没有理由。

您可以轻松选择所需的任何属性/关系集。

至少，您可以尝试看看它是否崩溃）但是，真的，它不会）

# java - 无法在具有 8gb RAM 的系统上设置超过 4gb 的 xml

> ID：10105368
> 
> 赞同：2
> 
> 时间：2012-04-11T11:54:00.423
> 
> 标签：java, windows, jvm, jrockit

我需要设置

```
ANT_OPTS=-Xms1024m -Xmx6144m -XX:PermSize=1024m -XX:MaxPermSize=1024m

JAVA_OPTS=-Xms1024m -Xmx6144m -XX:PermSize=1024m -XX:MaxPermSize=1024m 
```

我有一个 8gb 的系统（最近从 4gb 升级）

但是，一旦我将 ant opts 设置为上述值，我将无法运行任何我的 ant 目标，并且出现以下错误

```
[ERROR] Argument error: -Xmx6144m
[ERROR] Specified maximum heap size (6144 MB) is larger than the address space on this platform (4 GB).
[WARN ] -XX:PermSize=1024m is not a valid VM option. Ignoring
[WARN ] -XX:MaxPermSize=1024m is not a valid VM option. Ignoring
Could not create the Java virtual machine. 
```

这表示我系统上的 Java

```
java version "1.6.0_20"
Java(TM) SE Runtime Environment (build 1.6.0_20-b02)
Oracle JRockit(R) (build R28.1.0-123-138454-1.6.0_20-20101014-1351-windows-x86_64, compiled mode) 
```

我在 Intel Core 2 Duo 3Ghz 处理器和 8GB RAM 上运行 Windows 7。

*PS：我为这个错误做了谷歌，这是我第一次出现这样的情况，我没有得到任何指向特定解决方案的链接。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T10:14:16.193

正如评论中所讨论的：

您的 ANT 安装似乎使用的是 32 位 JVM。虽然 64 位 JVM 在您的 PATH 中，但 ANT 不服从 PATH 中的 JVM，它首先查看 JAVA_HOME。您可以通过运行 $JAVA_HOME/bin/java -version 来验证这一点。

您可以更新您的环境以将 JAVA_HOME 设置为 64 位版本，或更改 ANT 脚本以始终使用特定版本的 Java。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T12:11:07.577

错误消息似乎暗示该平台是 32 位的。我想你实际上不能使用 4 GB。

我会尝试安装 64 位版本的 Java 并使用它。

* * *

对于 HotSpot JVM，我希望看到

```
$ java -mx30g -version
java version "1.6.0_31"
Java(TM) SE Runtime Environment (build 1.6.0_31-b05)
Java HotSpot(TM) 64-Bit Server VM (build 20.6-b01, mixed mode) 
```

# html - 保留的不可解析的 URI 是什么意思？

> ID：10105370
> 
> 赞同：0
> 
> 时间：2012-04-11T11:54:11.593
> 
> 标签：html, http, camera, uri, opera

[我在 Opera 网络浏览器上](http://my.opera.com/core/blog/2011/03/23/webcam-orientation-preview)找到了一段关于相机使用的文章：

> 我们通过不实现其提议的方法和属性来简化提议的 GeneratedStream 接口。成功回调中返回的 Stream 对象应直接分配给视频元素的 src 属性。当一个视频元素的 src 参数被分配了一个 Stream 对象并且该属性随后被查询时，该属性返回**保留**的，虽然**不可解析**的，URI of about:streamurl。

但是，我不知道保留的不可解析 URI 是什么。谁能帮我？太感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:40:49.207

基本上，它说这`about:streamurl`是一个神奇的关键字 url，它不能用于其他任何东西。但是，作为任何 URI，如果您在地址栏中输入它，它不会特别解析任何内容。

还有其他 URI 不可解析但有意义。我鼓励你看看`urn:`。例如，ISBN 组织发布了关于如何[为 ISBN 创建 URN](https://www.rfc-editor.org/rfc/rfc3187)的 RFC 。这有助于定义标识精确书籍但不可解析的 URI（键）。例如，您可以在报价中使用它。Kamo no Chomei 的一本书的引述

```
<blockquote cite="urn:isbn:978-2-35873-023-5">
    <p>Si le nid se déplaçait au gré des vagues, 
    il dériverait je ne sais où au moindre souffle 
    de vent, serait brisé par les flots, ou bien 
    tomberait aux mains des gens.</p>
</blockquote> 
```

然后一个搜索引擎索引网页可以收集这些 URN:ISBN 并创建一个引用数据库，其中包含对它来自的书的引用以及作者和标题。

# iphone - 在超类中声明子类变量

> ID：10105371
> 
> 赞同：0
> 
> 时间：2012-04-11T11:54:17.787
> 
> 标签：iphone, superclass

我的超类有 8 个子类，因此前 4 个子类中的变量是一种，其余 4 个子类是另一种。使用 getter 和 setter 方法声明我的超类中的所有变量，然后从各自的子类访问是否是正确的做法？这会有什么好处和坏处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:17:30.430

很难说，因为我们不知道确切的情况是什么。

对于您描述它的方式，最好进行此 3 级子类化

```
 superclass
                    (empty)
                       |
         --------------+--------------
         |                            | 
   subclass_typeA                subclass_typeB
(4 type A properties)          (4 type B properties) 
```

然后每个 sublclass_typeX 都有它自己的 4 个子类

**优点**：可读性，后期修改更容易

**缺点**：一开始为你做更多的工作

编辑：在超类中声明所有属性绝对是正确的做法。在这种情况下，您可以只使用一个添加了*枚举*属性的类，`classType`但这与 OOP 无关。

# javascript - 来自外部应用程序的 Adob e Acrobat Active x pro Javascript

> ID：10105373
> 
> 赞同：2
> 
> 时间：2012-04-11T11:54:20.563
> 
> 标签：javascript, acrobat

我想从外部应用程序运行 Acrobat Active X pro javascript 如何做到这一点。

假设我正在使用 adobe javascript 从 file2.pdf 在 file1.pdf 中插入一些页面，现在我想将 file1.pdf,file2.pdf 路径作为其他应用程序的变量传递如何做到这一点。

或者

我如何在 .net 应用程序中使用 adobe javascript 说 vb.net 或 c#.net 或 asp.net

# android - 手动分派 Google Analytics for Android

> ID：10105376
> 
> 赞同：1
> 
> 时间：2012-04-11T11:54:26.960
> 
> 标签：android, google-analytics

我正在使用具有调度间隔（即`tracker.startNewSession("xxxx", 10, this);`）的 android 谷歌分析。但是，在开发过程中，我注意到 SDK 不断打印有关数据库已满和最后一个事件未存储在 LogCat 中的信息。所以我决定`.dispatch()`在每次 API 调用后手动调用该方法，认为它会用一块石头杀死两只鸟：

1.  更频繁地发送事件，理论上这会阻止它们备份和丢失一些事件（根据我在开发中看到的 logcat 条目）。
2.  通过在移动无线电处于活动状态时发送任何 GA 事件来节省电池电量。

一旦我发布了它，我注意到我的 GA 统计数据（页面浏览量等）大约高出 35%；这只能意味着两件事之一，或者以前丢失了很多很多 GA 事件，或者现在错误地发送了一些事件而加倍。

有人对解决此问题的好方法有任何想法吗？如果它现在在报告移动浏览量和访问量方面做得更好，那就太好了。但是，如果由于我手动调用而无法准确跟踪数据`.dispatch()`，那么这很糟糕，我应该恢复此更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:51:17.253

当我提高手动调用调度的速率时，我也看到了这种情况。另外它确实有意义：因为他们在本地存储数据并批量发送到服务器，所以如果某些数据被卡住了几天，我不会感到惊讶。由于数据与*发送*日期相关联而不是*生成*日期，因此您会得到不准确的统计数据。

PS：您是否看过新的示例应用程序然后为 Android SDK 提供？他们在 AsyncTask 中运行所有内容，以改进调度并且不通过网络访问访问主线程。我通过将所有事件存储在一个队列中并只运行一个 AsyncTask 进一步改进了这一点……需要将它放在 Github 上但尚未清理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:09:06.693

EasyTracker 示例应用程序使用 AsyntTask 和网络队列来提高性能。正如 bitbox 所提到的，这可以延长电池寿命并减少丢失的曲目，而无需手动调度。

[您可以从https://code.google.com/p/analytics-api-samples/downloads/list](https://code.google.com/p/analytics-api-samples/downloads/list)下载 EasyTracker 的 jar 和源代码

# xpath - xpath - 如果存在另一个节点值，则选择一个节点值

> ID：10105387
> 
> 赞同：1
> 
> 时间：2012-04-11T11:54:51.753
> 
> 标签：xpath

我有几个节点（见下文）。我知道如何选择具有特定属性的特定节点。但在这种情况下，我想导入属于“narrowImage”组的媒体对象的“file_url”值。

```
<media_object>

 <media_object>
  <file_id>5175967</file_id>
  <group>wideImage</group>
  <file_url>http://www.mysite.com/image1.jpg</file_url>
 </media_object>

 <media_object>
  <file_id>5175968</file_id>
  <group>wideImage</group>
  <file_url>http://www.mysite.com/image2.jpg</file_url>
 </media_object>

 <media_object>
  <file_id>5175969</file_id>
  <group>narrowImage</group>
  <file_url>http://www.mysite.com/image3.jpg</file_url>
 </media_object>

</media_object> 
```

在上述情况下，我只需要值“http://www.mysite.com/image3.jpg”

那里有任何xpath专家可以为我指明正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:22:37.643

**使用**：

```
/*/*[group = 'narrowImage']/file_url 
```

这将选择`file_url`XML 文档中顶部元素的“孙子”元素，并且其父元素具有`group`字符串值为 的子元素`'narrowImage'`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:13:55.773

我认为你应该能够使用：

```
//media_object[group='narrowImage']/file_url 
```

这应该选择文件中的每个**media_object**（无论级别如何），然后根据**group='narrowImage'**过滤它们，然后为您提供**file_url**子项。

# php - 如何在php中转义字符串中的哈希符号

> ID：10105391
> 
> 赞同：4
> 
> 时间：2012-04-11T11:54:56.633
> 
> 标签：php, hash, escaping, symbols

你如何在 PHP 中转义哈希符号？

我想做，`"DELETE FROM [#8:1]"`但要让它发挥作用，我必须做`"DELETE FROM [".'#'."8:1]"`。虽然它有效，但它看起来有点笨拙，有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T12:32:41.507

使用单引号

```
'DELETE FROM [#8:1]' 
```

# c++ - Windows 上非 Qt 窗口的鼠标事件消失/被忽略

> ID：10105392
> 
> 赞同：1
> 
> 时间：2012-04-11T11:55:04.837
> 
> 标签：c++, qt, event-handling, mouse

对于 Qt（以及对于 stackoverflow）来说仍然相对较新，但在过去几周成功地用 Qt 替换了我们旧的过时的新 GUI 代码，并在此过程中改进了一些东西。但是现在我遇到了一个问题，到目前为止我还无法通过谷歌搜索。

一些背景：

应用程序有一个在 Qt 之外创建的 opengl 主窗口（该应用程序的大部分完全在 Qt 之外），Qt 窗口仅用于（开发）子功能，仅用于 GUI。

我在每帧的主循环中调用 processEvents()。

在两个平台上使用本地构建的 Qt 4.7.4。

在 linux 上一切正常。Qt 窗口正常运行，我可以像往常一样通过鼠标和键盘与主 opengl 窗口中的应用程序/模拟进行交互。

但是，当我应用相同的更改以在 Windows 上合并 Qt 时，鼠标不再在主窗口中工作。键盘可以，但我们的鼠标代码似乎从未收到任何 WM_INPUT 事件。当我禁用调用 processEvents() 时，鼠标再次正常工作。（但显然 Qt 窗口将无法正常工作）

似乎 Qt 正在捕获用于主窗口的鼠标事件并将它们扔掉/忘记它们，而不是将它们传递到主窗口。

不幸的是，我还没有发现任何表明这是一种常见现象（有一个常见的简单解决方案）。

我确实发现[http://qt-project.org/forums/viewthread/502](http://qt-project.org/forums/viewthread/502)引用了鼠标事件的问题，但是那里提到的使用 _WIN32_WINNT=0×501 定义的编译 Qt 的解决方案没有任何区别。

任何见解将不胜感激！

# c# - 使用“名称”属性时，SmtpClient 发送的附件顺序不正确

> ID：10105394
> 
> 赞同：4
> 
> 时间：2012-04-11T11:55:22.827
> 
> 标签：c#, .net, smtpclient

谁能重现这个问题？在我看来，这似乎是 SmtpClient (.NET 4.0) 中的一个非常严重的错误，但我不敢相信以前没有人见过这个问题，而且谷歌似乎没有让任何人看到类似的问题。

当发送包含超过 1 个附件的电子邮件并使用 'Attachment.Name' 属性时，附件的名称将不正确（例如，2 个附件的名称将被交换）。解决方法（实际上可能是要设置的正确属性）是使用 ContentDisposition.FileName。但如果这发生在每个人身上，我会非常感兴趣。谁能重现这个问题？在我看来，这似乎是 SmtpClient (.NET 4.0) 中的一个非常严重的错误，但我不敢相信以前没有人见过这个问题，而且谷歌似乎没有让任何人看到类似的问题。您需要在 c:\tmp\emailin\ 中创建几个 zip 文件

```
var zipCt = new ContentType { MediaType = MediaTypeNames.Application.Zip };

var attachmentA = new Attachment(@"c:\tmp\emailin\a.zip", zipCt);
attachmentA.ContentDisposition.FileName = "a.zip";
attachmentA.Name = "a.zip";

var attachmentB = new Attachment(@"c:\tmp\emailin\b.zip", zipCt);
attachmentB.ContentDisposition.FileName = "b.zip";
attachmentB.Name = "b.zip";

var msg = new MailMessage("testfrom@example.com", "testto@example.com")
{
       Body = "body",
       Subject = "subject"
};
msg.Attachments.Add(attachmentA);
msg.Attachments.Add(attachmentB);

using (var smtp = new SmtpClient())
{
     smtp.DeliveryMethod = SmtpDeliveryMethod.SpecifiedPickupDirectory;
     smtp.PickupDirectoryLocation = @"c:\tmp\emailout\";
     smtp.Send(msg);
} 
```

如果您现在查看 c:\tmp\emailout\ 中的 eml 文件，您将看到类似

```
X-Sender: testfrom@example.com
X-Receiver: testto@example.com
MIME-Version: 1.0
From: testfrom@example.com
To: testto@example.com
Date: 11 Apr 2012 12:36:48 +0100
Subject: subject
Content-Type: multipart/mixed; boundary=--boundary_0_1b7bb1ee-ba28-4258-b662-554adb7ff81a

----boundary_0_1b7bb1ee-ba28-4258-b662-554adb7ff81a
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

body
----boundary_0_1b7bb1ee-ba28-4258-b662-554adb7ff81a
Content-Type: application/zip; name=b.zip
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename=a.zip

UEsDBAoAAAAAAG5ki0AAAAAAAAAAAAAAAAAFAAAAYS50eHRQSwECPwAKAAAAAABu
ZItAAAAAAAAAAAAAAAAABQAkAAAAAAAAACAAAAAAAAAAYS50eHQKACAAAAAAAAEA
GADa2JQw1xfNAdrYlDDXF80B2tiUMNcXzQFQSwUGAAAAAAEAAQBXAAAAIwAAAAAA
----boundary_0_1b7bb1ee-ba28-4258-b662-554adb7ff81a
Content-Type: application/zip; name=a.zip
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename=b.zip

UEsDBAoAAAAAAHZki0AAAAAAAAAAAAAAAAAFAAAAYi50eHRQSwECPwAKAAAAAAB2
ZItAAAAAAAAAAAAAAAAABQAkAAAAAAAAACAAAAAAAAAAYi50eHQKACAAAAAAAAEA
GAD67/k51xfNAfrv+TnXF80B2tiUMNcXzQFQSwUGAAAAAAEAAQBXAAAAIwAAAAAA
----boundary_0_1b7bb1ee-ba28-4258-b662-554adb7ff81a-- 
```

请注意每个附件的 Content-Type: 和 Content-Disposition: 文件名如何不匹配。

难道我做错了什么？这是我应该用 MS 记录的错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T12:15:42.487

这是因为您需要为每个附件创建一个新的 ContentType 实例。

```
var zipCt = new ContentType { MediaType = MediaTypeNames.Application.Zip };
var zipCt2 = new ContentType { MediaType = MediaTypeNames.Application.Zip };

var attachmentA = new Attachment(@"c:\tmp\emailin\a.zip", zipCt);
attachmentA.ContentDisposition.FileName = "a.zip";
attachmentA.Name = "a.zip";

var attachmentB = new Attachment(@"c:\tmp\emailin\b.zip", zipCt2);
attachmentB.ContentDisposition.FileName = "b.zip";
attachmentB.Name = "b.zip"; 
```

应该解决你的问题。

# c# - 给定一个自动化元素，我如何模拟一次左键单击它

> ID：10105396
> 
> 赞同：15
> 
> 时间：2012-04-11T11:55:30.880
> 
> 标签：c#, automation

```
AutomationElement child = walker.GetFirstChild(el); 
```

使用 Windows 自动化我如何模拟左键单击 Child ？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-10T20:42:24.787

`Invoke`您可以通过以下方式发送鼠标事件，而不是发送鼠标事件`InvokePattern`：

```
public void InvokeAutomationElement(AutomationElement automationElement)
{
    var invokePattern = automationElement.GetCurrentPattern(InvokePattern.Pattern) as InvokePattern;
    invokePattern.Invoke();
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-11T13:02:16.633

尝试：

```
AutomationElement child = walker.GetFirstChild(el);
System.Windows.Point p = child.GetClickablePoint();
Mouse.Move((int)p.X, (int)p.Y);
Mouse.Click(MouseButton.Left); 
```

链接：
[AutomationElement.GetClickablePoint 方法](http://msdn.microsoft.com/en-us/library/system.windows.automation.automationelement.getclickablepoint.aspx)
[在没有真正使用鼠标的情况下模拟 WPF 控件上的鼠标 Enter/Move/Leave](http://social.msdn.microsoft.com/Forums/en/wpf/thread/0555c1ea-5b0f-4c5e-863c-b54eb510ad40)

**编辑评论**

请参阅此链接：

[Mouse.cs](https://github.com/Microsoft/TestApi/blob/master/Releases/TestApi_v0.6/Sources/TestApiCore/Code/Input/Mouse.cs)
[NativeMethods.cs TestApi](https://github.com/Microsoft/TestApi/blob/master/Releases/TestApi_v0.6/Sources/TestApiCore/Code/Input/NativeMethods.cs)
[简介 - 第 1 部分：输入注入 API](http://blogs.msdn.com/b/ivo_manolov/archive/2008/12/15/9223397.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-10T08:19:12.253

如果控件具有“ClickablePoint”，则可以使用此代码

```
 System.Windows.Point p = theButton.GetClickablePoint();
            AutoItX3Lib.AutoItX3Class au3;
            au3 = new AutoItX3Lib.AutoItX3Class();
            au3.AutoItSetOption("MouseCoordMode", 0);
            au3.MouseClick("LEFT", (int)p.X, (int)p.Y, 1, -1); 
```

其中[AutoItX3Lib](http://www.autoitscript.com/site/autoit/downloads/)是 AutoIt 的 C# API

# java - 创建会话时出现休眠错误

> ID：10105398
> 
> 赞同：2
> 
> 时间：2012-04-11T11:55:35.853
> 
> 标签：java, hibernate

当我尝试进入休眠会话时`(Session session = HibernateUtil.getSession();)`，我收到如下错误：

```
 Testcase: testMain(test.smssender.SmsSenderTest):        Caused an ERROR
null
java.lang.ExceptionInInitializerError
        at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
        at org.hibernate.engine.UnsavedValueFactory.instantiate(UnsavedValueFactory.java:22)
        at org.hibernate.engine.UnsavedValueFactory.getUnsavedIdentifierValue(UnsavedValueFactory.java:44)
        at org.hibernate.tuple.PropertyFactory.buildIdentifierProperty(PropertyFactory.java:44)
        at org.hibernate.tuple.entity.EntityMetamodel.(EntityMetamodel.java:123)
        at org.hibernate.persister.entity.AbstractEntityPersister.(AbstractEntityPersister.java:434)
        at org.hibernate.persister.entity.SingleTableEntityPersister.(SingleTableEntityPersister.java:109)
        at org.hibernate.persister.PersisterFactory.createClassPersister(PersisterFactory.java:55)
        at org.hibernate.impl.SessionFactoryImpl.(SessionFactoryImpl.java:226)
        at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1294)
        at vas.framework.hibernate.HibernateUtil.(HibernateUtil.java:38) 
```

HibernateUtil.java 文件的内容在这里： http: [//pastebin.com/exCCdX2P](http://pastebin.com/exCCdX2P)

我找不到问题所在。有什么帮助吗？

更新：重新创建实体对象解决了我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T08:14:59.553

重新创建实体对象解决了我的问题。

# php - 适应数据库连接的多语言脚本

> ID：10105401
> 
> 赞同：0
> 
> 时间：2012-04-11T11:55:39.580
> 
> 标签：php, mysql, html

我在我的网站中使用了一个非常好的多语言脚本。

[http://www.bitrepository.com/php-how-to-add-multi-language-support-to-a-website.html](http://www.bitrepository.com/php-how-to-add-multi-language-support-to-a-website.html)

但不幸的是我有一个问题：

我需要处理语言页面 ( `languages/lang.en.php`) 中的信息，以便从我的后台进行编辑，而不是转到语言页面并从那里填写。

例如，可以从文件柜`languages/lang.en.php`中产生回声吗？

我试过但没有成功，我喜欢将语言页面传达给我的数据库。

我试图看看我是否可以在语言文件中回显这部分代码：

$lang['PAGE_TITLE'] = '我的网站页面标题';

改成

$lang['PAGE_TITLE'] = ''; 但不起作用，看起来它只适用于 html 标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:58:28.010

如果在您的 php 页面中，您将标题设置为：

```
<title><?php echo $lang['PAGE_TITLE']; ?></title>
//change this to
<title><?php echo $lang-pagetitle; ?></title>
//and at the top of the document
$lang-pagetitle = $lang['PAGE_TITLE'];
//and when it needs to be changed, put this above where the title is echoed, 
//after where $lang-pagetitle is initially defined:

if(whatever condition) {
$lang-pagetitle = "something else";
} 
```

# iphone - 以编程方式删除 UIScrollView 中的内容？

> ID：10105405
> 
> 赞同：4
> 
> 时间：2012-04-11T11:55:50.943
> 
> 标签：iphone, objective-c, ios, uiscrollview

如何以编程方式删除 UIScrollView 中的内容？因为我必须经常更新其中的内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T11:59:35.443

我认为典型的 UIView 之间没有区别：

```
for (UIView *v in [scrollView subviews])
    [v removeFromSuperView]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-11T12:04:50.110

您可以循环浏览滚动视图的子视图，例如：

```
for(UIView *subview in scrollView.subviews)
    [subview removeFromSuperview]; 
```

或者您可以使用`- [NSArray makeObjectsPerformSelector:]`以下方法：

```
[scrollView.subviews makeObjectsPerformSelector:@selector(removeFromSuperview)]; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-11T11:59:05.023

```
for(UIView *vw in [scrView subViews])
  [vw removeFromSuperView]; 
```

您可以使用它来删除滚动视图中的内容

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-11T12:03:40.340

以下代码用于删除滚动视图中的对象

```
[[myScrollView viewWithTag:myButtonTag] removeFromSuperview]; 
```

# css - 如何为当前菜单赋予 CSS 样式？

> ID：10105406
> 
> 赞同：0
> 
> 时间：2012-04-11T11:56:12.417
> 
> 标签：css

当前链接的 css 是什么，例如当有人转到关于我们页面然后关于我们颜色变为红色....然后转到联系我们页面然后关于我们颜色变为默认值和联系我们颜色变为红色....

请帮助我是新设计师......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:03:54.193

在 CSS 中使用 :hover

将示例中的 li 替换为您在实际代码中使用的任何元素

例如。

```
li:hover{backgroundcolor:Red;} 
```

li 标记以防您设计类似的菜单

```
<ul>
   <li> Menu1</li>
   <li> Menu2</li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:30:45.173

您不能使用 JUST CSS 来确定您的用户当前是哪个页面 - 它只是不会这样做。你必须调整你的标记来添加某种你的 CSS 可以使用的钩子。像这样——

```
<ul id="nav">
   <li><a href="about.html" class="here">About Us</a></li>
   <li><a href="contact.html">Contact</a></li>
</ul> 
```

如果您正在构建静态 HTML 站点，您可以手动更改每个页面上的 HTML 以反映菜单中的当前页面。

如果您正在构建更复杂的东西，您可能需要依靠 PHP 或 JavaScript 来确定当前页面。这个脚本有点旧（它来自 Jeremy Keith 的“DOM Scripting”），但它可以完成这项工作：

```
function highlightPage(id){
    //make sure DOM methods are understood
    if(!document.getElementsByTagName) return false;
    if(!document.getElementById) return false;
    if(!document.getElementById(id)) return false;
    var nav = document.getElementById(id);
    var links = nav.getElementsByTagName('a');
    for (var i=0; i < links.length; i++){
        var linkurl = links[i].getAttribute('href');
        var currenturl = window.location.href;
        //indexOf will return -1 on non-matches, so we're checking for a positive match
        if (currenturl.indexOf(linkurl) != -1) {
            links[i].className = "here";
            var linktext = links[i].lastChild.nodeValue.toLowerCase();
            document.body.setAttribute("id",linktext);
        }
    }
}

addLoadEvent(function(){
    highlightPage('nav');
    });

function addLoadEvent(func){
    var oldonload = window.onload;
    if (typeof window.onload != 'function') {
        window.onload = func;
    } else {
        window.onload = function(){
            oldonload();
            func();
        }
    }
} 
```

该脚本将放入一个[外部链接的 javascript 文件](http://www.quackit.com/javascript/tutorial/external_javascript_file.cfm)中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T12:24:32.110

当您单击特定菜单时，该特定页面将打开。然后做简单的事，

为活动写课。

应用这个，主页

对于关于我们页面的活动类属性到关于我们 li

```
<ul>
   <li class="active">Home</li>
   <li>Projects</li>
   <li>About Us</li>
</ul> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T12:43:16.420

给 body 一个 id name `<body id="about-us">`。您的链接也需要一个 id `<a href="#" id='this-link">`。然后：

```
#about-us #this-link {
color:red;
}  
#contact-us #this-link {
} 
```

# java - 记录时异常处理有什么好处？

> ID：10105409
> 
> 赞同：2
> 
> 时间：2012-04-11T11:56:20.130
> 
> 标签：java, exception, logging

假设我想在日志中反映异常。

我应该将堆栈跟踪传递给`log.error()`还是只是 Exception's `toString()`？或者做一些更好的事情？

如何获取堆栈跟踪字符串以传递给记录器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T11:59:06.637

所有现代日志框架都将传递的`Exception`对象视为特殊：

```
log.error("Danger! High Voltage!", ex); 
```

该框架（让它成为[logback](/questions/tagged/logback "显示标记为“logback”的问题")或[log4j](/questions/tagged/log4j "显示标记为“log4j”的问题")）将为您很好地格式化堆栈跟踪。*除非您真的*知道自己在做什么，否则请始终记录完整的堆栈跟踪。否则，您始终可以从给定的记录器中过滤掉异常。

另请注意，许多重要的异常并没有提供有意义的信息，`NullPointerException`是重要的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T11:57:57.083

我当然会去记录整个堆栈跟踪。以这种方式找到它的来源要容易得多。

我不知道您使用什么库进行日志记录，但如果它不支持记录异常，您可以通过以下方式将堆栈跟踪作为字符串获取：

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
PrintStream ps = new PrintStream(baos);
exception.printStackTrace(ps);
ps.close();
String stacktrace = baos.toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T12:00:10.420

当使用类似[log4j](http://logging.apache.org/log4j/1.2/)的东西时，异常有一个额外的参数，所以你通常会这样写：

```
catch(Exception e){
    logger.error("some message", e);
} 
```

Log4j 将负责打印堆栈跟踪。

要记住的一件事（至少对于 log4j）是：当您不想记录消息而只想记录异常时，您必须使用：

```
logger.error("", e); 
```

不是

```
logger.error(e); // bad usage! This uses e.toString()!! 
```

# html - 使用多个文件输入时如何限制选择的最大文件数

> ID：10105411
> 
> 赞同：91
> 
> 时间：2012-04-11T11:56:28.663
> 
> 标签：html, file

使用`<input type="file" multiple>`时，用户可以选择多个文件。

一个如何设置可以选择多少个文件的限制，例如两个？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-04-11T12:10:36.037

您可以运行一些 jQuery 客户端验证来检查：

```
$(function(){
    $("input[type='submit']").click(function(){
        var $fileUpload = $("input[type='file']");
        if (parseInt($fileUpload.get(0).files.length)>2){
         alert("You can only upload a maximum of 2 files");
        }
    });    
});​ 
```

[http://jsfiddle.net/Curt/u4NuH/](http://jsfiddle.net/Curt/u4NuH/)

但是请记住也要检查服务器端，因为可以很容易地绕过客户端验证。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-11-21T08:00:59.967

在更改输入轨道时选择了多少个文件：

```
$("#image").on("change", function() {
    if ($("#image")[0].files.length > 2) {
        alert("You can select only 2 images");
    } else {
        $("#imageUploadForm").submit();
    }
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<strong>On change of the input track how many files are selected:</strong>
<input name="image[]" id="image" type="file"  multiple="multiple" accept="image/jpg, image/jpeg" >
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-07-04T13:55:30.537

如果文件数大于 max_file_number，这应该可以工作并保护您的表单不被提交。

```
$(function() {

  var // Define maximum number of files.
      max_file_number = 3,
      // Define your form id or class or just tag.
      $form = $('form'), 
      // Define your upload field class or id or tag.
      $file_upload = $('#image_upload', $form), 
      // Define your submit class or id or tag.
      $button = $('.submit', $form); 

  // Disable submit button on page ready.
  $button.prop('disabled', 'disabled');

  $file_upload.on('change', function () {
    var number_of_images = $(this)[0].files.length;
    if (number_of_images > max_file_number) {
      alert(`You can upload maximum ${max_file_number} files.`);
      $(this).val('');
      $button.prop('disabled', 'disabled');
    } else {
      $button.prop('disabled', false);
    }
  });
}); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-11-25T17:35:26.930

JS的另一种可能的解决方案

```
function onSelect(e) {
    if (e.files.length > 5) {
        alert("Only 5 files accepted.");
        e.preventDefault();
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-11-08T09:40:44.513

您还应该考虑使用库来做到这一点：它们允许限制等等：

*   [精细上传器](https://github.com/FineUploader/fine-uploader)。使用5.16.2 的[演示：](http://fineuploader.com/demos.html#list-number)`validation.itemLimit`

    ```
    var restrictedUploader = new qq.FineUploader({
        validation: {
            itemLimit: 3,
        }
    }); 
    ```

*   [bluimp 的 jQuery 文件上传插件](https://github.com/blueimp/jQuery-File-Upload)。用法：使用v9.22.0[的 jquery 文件上传限制文件数量：](https://stackoverflow.com/questions/16011200/jquery-file-upload-restricting-number-of-files)`maxNumberOfFiles`

    ```
    $('#fileuploadbasic').fileupload({
      maxNumberOfFiles: 6
    }); 
    ```

它们也可以在[https://cdnjs.com/上找到](https://cdnjs.com/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-22T19:45:23.860

在javascript中你可以做这样的事情

```
<input
  ref="fileInput"
  multiple
  type="file"
  style="display: none"
  @change="trySubmitFile"
> 
```

并且功能可以是这样的。

```
trySubmitFile(e) {
  if (this.disabled) return;
  const files = e.target.files || e.dataTransfer.files;
  if (files.length > 5) {
    alert('You are only allowed to upload a maximum of 2 files at a time');
  }
  if (!files.length) return;
  for (let i = 0; i < Math.min(files.length, 2); i++) {
    this.fileCallback(files[i]);
  }
} 
```

我也在寻找一种解决方案，可以在选择文件时对其进行限制，但直到现在我找不到类似的东西。

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2012-04-11T12:59:52.810

改为使用两个`<input type=file>`元素，而不使用`multiple`属性。

* * *

## 回答 #8

> 赞同：-6
> 
> 时间：2019-03-08T13:29:37.037

如果你想要 php，你可以计算数组，然后做一个 if 语句，比如

```
if((int)count($_FILES['i_dont_know_whats_coming_next'] > 2)
      echo "error message"; 
```

# iphone - 当点击并按住 tableview 单元格时会出现气泡，就像在 iphone 的 ipod 中录制歌曲一样

> ID：10105414
> 
> 赞同：1
> 
> 时间：2012-04-11T11:56:44.633
> 
> 标签：iphone, sdk, ipod

我正在开发一个音乐应用程序，我们可以在其中从 iPod 导入音乐并播放，在 iPhone IOS 5 的本机应用程序 (iPod) 中，当点击并按住任何歌曲或播放列表时会出现带有信息的气泡，我想在我的表格视图单元格，但不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:00:01.533

实现这3个方法，应该和你想要的差不多。

```
-(BOOL)tableView:(UITableView *)tableView shouldShowMenuForRowAtIndexPath:(NSIndexPath *)indexPath
-(BOOL)tableView:(UITableView *)tableView canPerformAction:(SEL)action forRowAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender
-(void)tableView:(UITableView *)tableView performAction:(SEL)action forRowAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender 
```

希望能帮助到你

# java - 如何创建选项卡 - Jquery 或 JSF

> ID：10105426
> 
> 赞同：3
> 
> 时间：2012-04-11T11:57:14.250
> 
> 标签：java, jquery, jsf, jsf-2

我想用标签创建 JSF 页面。像[这样](http://livedemo.exadel.com/richfaces-demo/richfaces/tabPanel.jsf)的东西。但是我想知道如果我选择使用 Jquery 来执行此操作，我可以实现延迟加载 - 当我单击 JSF 页面上的选项卡时，会在打开选项卡时生成内容。是否可以在纯 JSF 中实现选项卡的延迟加载？而且我想在这两种情况下我都可以轻松实现 AJAX。

最良好的祝愿

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T12:00:35.490

Primefaces [Tabview](http://www.primefaces.org/showcase/ui/tabviewDynamic.jsf)组件支持延迟加载。

来自展示柜的引述：

> 选项卡内容也可以使用 ajax 延迟加载，当动态属性设置为“true”时，只会呈现活动选项卡的内容，单击惰性选项卡将使用 ajax 获取选项卡内容。在处理具有大量内容的选项卡时，此行为可以方便地节省带宽并减小页面大小。

展示中的快速示例：

```
<h:form id="form">  
    <p:tabView id="tabView" dynamic="true" cache="true"> 
      // tabs
    </p:tabView>
</h:form> 
```

如果您在选项卡之间切换，该`cache`属性用于防止 ajax 重新加载选项卡内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T12:06:41.497

**注意：如果您希望您的选项卡 bean 成为会话范围，请阅读答案底部的说明...**

由于您不想使用任何第三方库，这里有一个 PureJSF + jQuery 示例

**JSF + Jquery + Ajax 延迟加载 + 查看 Scope Beans 示例...**

顺便说一句，这是最终的样子：

![JSF + Jquery 延迟加载标签](../Images/ab65f5793081c912bac964c373fb1a3b.png)

您可以查看 Web 服务器控制台的打印输出`@PostConstruct`以及`@PreDestroy`单击每个选项卡时...

选项卡的内容 - xhtml 页面及其 bean 将在选项卡单击（延迟加载）时加载，并在单击其他选项卡时被销毁，

我建议您创建一个新项目并慢慢将所有文件放入其中并开始播放并查看它......它 100% 工作，但我放置了一些打印输出只是为了看看它真的工作......

这个例子非常简单直接......

首先去[jQueryUI下载（1.8.18）](http://jqueryui.com/download)

并放置`jquery-1.7.1_.min.js`并`jquery-ui-1.8.18.custom.min.js`在`WebContent\resources\js`其中`jquery-ui-1.8.18.custom.css``WebContent\resources\css`

现在到其他文件...

**myTabs.xhtml**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:head>
 <h:outputScript library="js" name="jquery-1.7.1_.min.js" target="head" />
 <h:outputScript library="js" name="jquery-ui-1.8.18.custom.min.js" target="head" />
 <h:outputStylesheet library="css" name="jquery-ui-1.8.18.custom.css" target="head"     />
 <h:outputScript library="js" name="mytabs.js" target="head" />
</h:head>
<h:body>

<f:view>
    <h:form prependId="false">
        <h:panelGroup id="tabs" layout="block">
            <ul>
                <c:forEach items="#{myTabs.tabs}" var="tab">
                    <li><a href="##{tab.tabid}" onclick="$('#button_#{tab.tabid}').click()">#{tab.tabid}</a></li>
                    <h:commandButton id="button_#{tab.tabid}" value="TabClick" action="#{myTabs.switchPages(tab.tabid)}" style="display:none">
                        <f:ajax render="tabs"></f:ajax>
                    </h:commandButton>  
                </c:forEach>
            </ul>

            <c:forEach items="#{myTabs.tabs}" var="tab">
                <h:panelGroup id="#{tab.tabid}" layout="block" rendered="#{tab.tabid eq myTabs.selectedTab}">
                    <ui:include src="#{tab.tabfilename}"></ui:include>
                </h:panelGroup>
            </c:forEach>
        </h:panelGroup>
    </h:form>
</f:view>
</h:body>
</html> 
```

**MyTabs.java**

```
package pack;

import java.util.ArrayList;
import java.util.List;

import javax.annotation.PostConstruct;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;

@ManagedBean
@SessionScoped
public class MyTabs{

@PostConstruct
public void init(){
    tabs = new ArrayList<MyTabObject>();
    tabs.add(new MyTabObject("tab1.xhtml", "tab1"));
    tabs.add(new MyTabObject("tab2.xhtml", "tab2"));
    tabs.add(new MyTabObject("tab3.xhtml", "tab3"));

}
String selectedTab="tab1";

public String getSelectedTab() {
    return selectedTab;
}

public void setSelectedTab(String selectedTab) {
    this.selectedTab = selectedTab;
}

public String switchPages(String selTab) {
    selectedTab = selTab;
    return "myTabs.xhtml";
}

List<MyTabObject> tabs;

public List<MyTabObject> getTabs() {
    return tabs;
}

public void setTabs(List<MyTabObject> tabs) {
    this.tabs = tabs;
}

} 
```

**我的标签对象**

```
package pack;

public class MyTabObject{

String tabfilename;
String tabid;
public String getTabfilename() {
    return tabfilename;
}
public void setTabfilename(String tabfilename) {
    this.tabfilename = tabfilename;
}
public String getTabid() {
    return tabid;
}
public void setTabid(String tabid) {
    this.tabid = tabid;
}
public MyTabObject(String tabfilename, String tabid) {
    super();
    this.tabfilename = tabfilename;
    this.tabid = tabid;
}

} 
```

**Tab1Page ,（Tab2Page 和 Tab3Page 完全一样，只是把所有地方的数字都改了）**

```
package pack;

import java.io.Serializable;
import java.text.Format;
import java.text.SimpleDateFormat;
import java.util.Date;

import javax.annotation.PostConstruct;
import javax.annotation.PreDestroy;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;

@ManagedBean
@ViewScoped
public class Tab1Page implements Serializable{

/**
 * 
 */
private static final long serialVersionUID = 254415216070877770L;
// Constants
public final static String hashKey = "tab1PageTab";
public String actionString = "";

@PostConstruct
public void post(){
  Format formatter;
  Date date = new Date();

  // Time formate 01:12:53 AM
  formatter = new SimpleDateFormat("hh:mm:ss a");
  tabName = formatter.format(date);
    System.out.println("Tab1Page\t"+tabName+"\t@PostConstruct...");
}

@PreDestroy
public void destroy(){
  Format formatter;
  Date date = new Date();

  // Time formate 01:12:53 AM
  formatter = new SimpleDateFormat("hh:mm:ss a");
  tabName = formatter.format(date);
    System.out.println("Tab1Page\t"+tabName+"\t@PreDestroy...");
}

String tabName;

public String getTabName() {
    return this.getClass().getName().substring(this.getClass().getName().lastIndexOf("."))+"\t"+tabName;
}
public void setTabName(String tabName) {
    this.tabName = tabName;
}

public String getActionString() {
    return actionString;
}

public void setActionString(String actionString) {
    this.actionString = actionString;
}

} 
```

**tab1.xhtml （tab2.xhtml 和 tab3.xhtml 完全一样 - 只是替换数字）**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html" 
xmlns:f="http://java.sun.com/jsf/core"
xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:panelGroup>
    <h:form>
        <h:outputText value="#{tab1Page.tabName}" />
    </h:form>
</h:panelGroup>
</ui:composition> 
```

到最后一个文件

**mytabs.js（将其放在 WebContent\resources\js 中）**

```
$(document).ready(function () { 
    $("#tabs").tabs();
});

$(window).load(function() {
    jsf.ajax.addOnEvent(function (data) {
        if (data.status === "success") {
                $("#tabs").tabs();
        }
    });
}); 
```

**为了使用会话范围 Bean：**

`switchPages`中的方法`MyTabs.java`应该是`void`而不是返回任何东西，像这样

```
 public void switchPages(String selTab) {
    selectedTab = selTab;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-15T04:33:07.227

使用 jQuery UI 实现 ajax 选项卡根本不是问题。

[在此处](http://jqueryui.com/demos/tabs/#ajax)查看带有 ajax 的 jQuery Tabs 的文档，然后单击“查看源代码”以查找您需要的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T09:37:34.640

您可以查看书籍 Core`Java Server Faces third edition`第 339 页，了解如何使用`h:panelGrid`.

输出是这样的：

![在此处输入图像描述](../Images/99c2a92d0488b65ca4065f5862aacfb0.png)

这是书中的代码示例：

```
...
<h:form>
<h:panelGrid styleClass="tabbedPane" columnClasses="displayPanel">
<!-- Tabs -->
<f:facet name="header">
<h:panelGrid columns="4" styleClass="tabbedPaneHeader">
<h:commandLink tabindex="1"
title="#{msgs.jeffersonTooltip}"
styleClass="#{tp.jeffersonStyle}"
actionListener="#{tp.jeffersonAction}">
#{msgs.jeffersonTab}
</h:commandLink>
...
</h:panelGrid>
</f:facet>
<!-- Tabbed pane content -->
<ui:include src="washington.xhtml" />
<ui:include src="roosevelt.xhtml" />
<ui:include src="lincoln.xhtml" />
<ui:include src="jefferson.xhtml" />
</h:panelGrid>
</h:form>
... 
```

这是描述：

```
The tabbed pane is implemented with h:panelGrid. Because we do not specify
the columns attribute, the panel has one column. The panel’s header—defined
with an f:facet tag—contains the tabs, which are implemented with another
h:panelGrid that contains h:commandLink tags for each tab. The only row in the panel
contains the content associated with the selected tab.
When a user selects a tab, the associated action listener for the command link is
invoked and modifies the data stored in the backing bean. Because we use a
different CSS style for the selected tab, the styleClass attribute of each h:commandLink
tag is pulled from the backing bean with a value reference expression.
As you can see from the top picture in Figure 8–11, we have used the title
attribute to associate a tooltip with each tab. Another accessibility feature is the
ability to move from one tab to another with the keyboard instead of the
mouse. We implemented that feature by specifying the tabindex attribute for
each h:commandLink.
The content associated with each tab is statically included with the JSP include
directive. For our application, that content is a picture and some text, but
you could modify the included JSF pages to contain any set of appropriate
components. Notice that even though all the JSF pages representing content are
included, only the content associated with the current tab is rendered. That is
achieved with the rendered attribute—for example, jefferson.xhtml looks like this:
Putting It All Together
<h:panelGrid columns="2" columnClasses="presidentDiscussionColumn"
rendered="#{tp.jeffersonCurrent}">
<h:graphicImage value="/images/jefferson.jpg"/>
<span class="tabbedPaneContent">"#{msgs.jeffersonDiscussion}"</span>
</h:panelGrid>
Figure 8–12 shows the directory structure for the tabbed pane application and
Listings 8–14 through 8–17 show the most important files. 
```

不幸的是，我不知道如何在这段代码中添加延迟加载和 AJAX 支持。

# facebook - 跟踪 Facebook 分享流量

> ID：10105432
> 
> 赞同：1
> 
> 时间：2012-04-11T11:57:50.233
> 
> 标签：facebook, share

```
 $("document").ready(function(){

FB.Event.subscribe('edge.create', function(href, widget) {

...do something
});

}); 
```

上面的代码跟踪用户喜欢该网站，如何跟踪用户是否分享该网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:26:49.977

请注意，“分享”已被弃用，取而代之的是点赞按钮（请参阅[https://developers.facebook.com/docs/share/](https://developers.facebook.com/docs/share/)）。点赞按钮有一个“发送”组件，基本上相当于分享。

不幸的是，即使 Send 也会遇到您描述的问题：它不会生成任何类型的确认或回调。此问题已报告给 Facebook，您可以在此处跟踪错误报告： [https ://developers.facebook.com/bugs/275748669167650](https://developers.facebook.com/bugs/275748669167650)

# android - 如何从 Android 中动态添加的布局中捕获事件

> ID：10105436
> 
> 赞同：0
> 
> 时间：2012-04-11T11:58:13.043
> 
> 标签：android, android-layout, android-widget

在我的 android 项目中，我需要将控件动态添加到我的主活动屏幕中。我创建了一个 xml (row.xml)，它是在主屏幕上单击按钮时添加的。我想从 row.xml 中给出的控件（按钮）中捕获事件。

谁能帮我在哪里以及如何从新添加的布局中捕获 onClick 事件？

另外，我想添加许多子布局元素，是否需要为所有动态添加的子视图编写单独的 onClick 方法？

行.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout_Time"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="5dip"
    android:orientation="horizontal" >

    <EditText
        android:id="@+id/editText_FromTime"
        android:layout_width="216dp"
        android:layout_height="wrap_content"
        android:focusableInTouchMode="false"
        android:hint="@string/hintFromTime" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/button_Delete"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/btnDelete" />
    </LinearLayout>

</LinearLayout> 
```

因此，当我单击“添加时间槽”按钮时，我会得到一个新创建的包含两个元素的行。

当我点击删除按钮时，我想删除这一行。我是否还需要一个 viewID 才能删除这个新添加的视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:08:36.327

在列表适配器中创建一个onclicklistener，并将其设置为适配器的getView方法中的按钮。那应该行得通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:09:25.613

您可以将控件作为 Java 变量进行跟踪——不用担心动态 android xml。考虑在方法之外的顶部声明它们。

避免`OnClickListener`为每个控件添加新控件的一种方法是让您的类实现`OnClickListener`然后使用`view.setOnClickListener(this)`. 或者创建一个覆盖`onClick(View)`并使用的子类`setOnClickListener(MyListener)`。

您可以使用`Layout.removeView(View)`删除控件，只要您跟踪它们。

# google-chrome-extension - 创建 chrome 扩展后无法访问 popup.js 文件

> ID：10105440
> 
> 赞同：3
> 
> 时间：2012-04-11T11:58:28.080
> 
> 标签：google-chrome-extension

**清单.json**

```
{
  "name": "Summer",
  "version": "1.0",
  "manifest_version": 2,
  "description": "This is an addition extension",
  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "popup.html"
  }
} 
```

**popup.html**

```
<!doctype html>
<html>
  <head>
    <title>Getting Started Extension's Popup</title>

    <!-- JavaScript and HTML must be in separate files for security. -->
    <script src="popup.js"></script>
  </head>
  <body>
        <form name="form">
            <div id="sayi1">Sayı 1 :    <input type = "text" name="deger1"></div> 
            <div id="sayi2">Sayı 2 :    <input type = "text" name="deger2"></div> 
            <div id="sonuc">Sonuç :     <input type = "text" name="cevap"></div>
            <div id="button"><input type="button" value="Hesapla" onclick="hesaplama()" /></div>
        </form>
  </body>
</html> 
```

**popup.js**

```
function hesaplama()
{
var sayi1 = window.document.form.deger1.value;
var sayi2 = window.document.form.deger2.value;
var toplam = parseFloat(sayi1) + parseFloat(sayi2) ;
window.document.form.cevap.value = toplam; 
} 
```

当我加载这个扩展时，我可以正常看到。但是当我填充 deger1 和 deger2 文本框并单击按钮时，函数不起作用，在 souc 文本框（结果文本框）中为空。我该如何解决？我是创建 chrome 扩展的新手。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T08:54:07.200

你已经`manifest_version : 2`在你的清单中，所以请阅读它引入的变化......
[http://code.google.com/chrome/extensions/manifestVersion.html](http://code.google.com/chrome/extensions/manifestVersion.html)
你进入了控制台`Refused to execute inline event handler because of Content-Security-Policy`，因为 onclick 事件处理程序在您的 html ( `<input type="button" value="Hesapla" onclick="hesaplama()" />`) 中。对于清单版本 2，这是不允许的，您需要从 js 代码而不是 html 中附加事件侦听器。
这是您的代码的工作版本....
**popup.html**

```
<!doctype html>
<html>
  <head>
    <title>Getting Started Extension's Popup</title>

    <!-- JavaScript and HTML must be in separate files for security. -->
    <script src="popup.js"></script>
  </head>
  <body>
        <form name="form">
            <div id="sayi1">Sayı 1 :    <input type = "text" name="deger1"></div> 
            <div id="sayi2">Sayı 2 :    <input type = "text" name="deger2"></div> 
            <div id="sonuc">Sonuç :     <input type = "text" name="cevap"></div>
            <div id="button"><input type="button" value="Hesapla" /></div>
        </form>
  </body>
</html> 
```

**popup.js**

```
function hesaplama()
{
var sayı1 = window.document.form.deger1.value;
var sayı2 = window.document.form.deger2.value;
var toplam = (parseFloat(sayı1) + parseFloat(sayı2)) ;
window.document.form.cevap.value = toplam;
}
window.onload = function(){
    document.querySelector('input[value="Hesapla"]').onclick=hesaplama;
} 
```

# python - python中字典搜索结果的回调函数

> ID：10105441
> 
> 赞同：1
> 
> 时间：2012-04-11T11:58:28.877
> 
> 标签：python

我有一个现有的 python 脚本，除其他外，它根据正则表达式字典检查文件。如果该文件包含正则表达式之一，我注意到已命中字典，打印包含该文件的行并继续。很简单。

但是，我现在想为文件遇到的每个 RE 建立一个不同的回调函数。我对如何在长 if/elseif 块之外的 python 中实现这一点感到困惑。这是应该在 PERL 中完成的情况吗？（这意味着我必须重新编写相当多的代码，因此首先不这样做的原因）。

我已经检查了这些（甚至是帖子中的链接）以寻找可能的解决方法，但还没有看到任何可能有效的方法：

[Python中switch语句的替换？](https://stackoverflow.com/questions/60208/replacements-for-switch-statement-in-python)

[https://stackoverflow.com/questions/374239/why-doesnt-python-have-a-switch-statement](https://stackoverflow.com/questions/374239/why-doesnt-python-have-a-switch-statement)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T12:03:48.717

你可以做这样的事情：

```
def callback1(line, regex_match):
   #do what you want

def callback2(line, regex_match):
   #do what you want... else

regex_dict = {
   "first_regex" : callback1,
   "second_regex" : callback2,
}

file_to_check = open("the_file")
for line in file_to_check:
    for regex, callback in regex_dict.iteritems():
        result = re.match(regex, line)
        if result:
           callback(line, result)
           break 
```

然后，在每个正则表达式匹配中，您将调用与该行和正则表达式结果关联的回调。

# iphone - 仅在 iOS 4.3 上“自动释放且没有池 - 只是泄漏”

> ID：10105442
> 
> 赞同：1
> 
> 时间：2012-04-11T11:58:34.137
> 
> 标签：iphone, ios, autorelease, nsautoreleasepool

我在控制台中收到了数百条这样的消息：

```
__NSAutoreleaseNoPool(): Object 0x5d86f30 of class NSIndexPath autoreleased with no pool in place - just leaking 
```

除了更多关于 NSIndexPath 以外的类的消息。

我知道这意味着对象是自动释放的，没有自动释放池来添加它们，但为什么这仅发生在 iOS 4.3 而不是 iOS 5.0/.1

另外，如果 main() 的返回值包装在 NSAutoreleasePool 对象中，为什么没有自动释放池来添加自动释放对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:01:51.933

我不确定这是否是问题所在，但是 main() 中的自动释放池适用于 UIThread（至少在 4.3 中），当您打开另一个线程时，您应该在其周围放置一个新的自动释放池（仅当您使用自动释放时）。

# android - GestureOverlayView 不工作

> ID：10105444
> 
> 赞同：3
> 
> 时间：2012-04-11T11:58:53.237
> 
> 标签：android, view, gesture, gesture-recognition, ontouchlistener

我现在有点困惑：

我使用 Gesturebuilder 创建了 4 个手势 1 手势是向上滑动 2 手势是向下滑动 3 手势是向左滑动 4 手势是向右滑动

但是当我尝试在正在运行的应用程序上做一个手势时，只能识别左右，而且它的上下接缝也像左右一样，因为该方法给了我作为 toat 的 getsures

向左滑动的吐司显示：up,left

我还在我的活动和 OntouchListener 中使用自定义视图，但我无法让它工作

活动 ：

```
public class RunActivity extends Activity implements OnTouchListener, OnGesturePerformedListener {

    static int width;
    static int height;

    static boolean reset=false;

    draw d;

    //jump
    private GestureLibrary gestureLib;

private static Context mContext;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        d = new draw(this);
        d.setOnTouchListener(this);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        mContext = this;

        //get screen size
        WindowManager wm = (WindowManager) this.getContext().getSystemService(Context.WINDOW_SERVICE);
        Display display = wm.getDefaultDisplay();

        width = display.getWidth();  // deprecated
        height = display.getHeight();  // deprecated

        //Jump
        GestureOverlayView gestureOverlayView = new GestureOverlayView(this);
        View inflate = d;
        gestureOverlayView.addView(inflate);
        gestureOverlayView.addOnGesturePerformedListener(this);
        gestureLib = GestureLibraries.fromRawResource(this, R.raw.gestures);
        if (!gestureLib.load()) {
            finish();
        }
        setContentView(gestureOverlayView);

        //setContentView(d);
    }
    public static Context getContext(){
        return mContext;
    }
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        Log.d("touch","touched");

        if (draw.end == true)
        {
        reset=true;
        }
        return false;
    }
    @Override
    public void onGesturePerformed(GestureOverlayView overlay, Gesture gesture) {
        ArrayList<Prediction> predictions = gestureLib.recognize(gesture);
        for (Prediction prediction : predictions) {
            if (prediction.score > 1.0) {
                Toast.makeText(this, prediction.name, Toast.LENGTH_SHORT)
                        .show();
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:03:48.880

删除您的`onTouch()`方法，或者至少链接到超类而不是简单地返回`false`，看看是否有帮助。

# sockets - winCE 6下使用IPNAT API

> ID：10105445
> 
> 赞同：2
> 
> 时间：2012-04-11T11:58:53.603
> 
> 标签：sockets, windows-ce, nat, portforwarding, tcp-ip

嗨，我在 Windows CE 下，我需要编写一个用于端口转发的小应用程序。所以我必须使用 NAT（网络地址转换）驱动程序来做到这一点。这个驱动有文档吗？我在msdn下没有找到任何东西。可能我只会使用在 ipnat.h 中定义的 IOCTL_IP_NAT_DELETE_TICKET 和 IOCTL_IP_NAT_CREATE_TICKET。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-10T04:03:26.607

据我所知，MSDN 或其他任何地方都没有此功能的文档。

ipnat.h 标头中的注释应该可以帮助您。

如果您有权访问 Platform Builder，则有一个代码示例演示了如何使用这些 ioctl。对于 Platform Builder 7.0，此示例位于 C:\WINCE700\PUBLIC\SERVERS\OAK\SAMPLES\UPNP\IGD。

通过在“NAT0:”设备上调用 CreateFile 打开 NAT 驱动程序，然后在 DeviceIoControl 调用中使用返回的 HANDLE。

IOCTL_IP_NAT_CREATE_TICKET 和 IOCTL_IP_NAT_DELETE_TICKET 都采用 IP_NAT_CREATE_TICKET 类型的输入参数，并且在输出缓冲区中不返回任何内容。

# mysql - Tomcat 只冻结一个应用程序

> ID：10105448
> 
> 赞同：0
> 
> 时间：2012-04-11T11:58:57.537
> 
> 标签：mysql, tomcat, lamp

我有一个运行 Tomcat6 的 Ubuntu LAMJ 服务器。

我的一个 JSP 应用程序每隔几天就会死机一次，我很难找出原因。我必须重新启动 tomcat 才能让那个应用程序再次运行，因为它不会自行恢复。我在我自己的 log4j 日志中没有得到该应用程序的任何内容，并且在 Catalina.out 中也看不到任何内容。

此应用程序通过 server.xml 文件中的上下文元素与另一个应用程序共享 javax.sql.DataSource 资源。我不认为这是问题的原因，但我不妨提一下。

谁能指出我正确的方向来找到这个间歇性问题的原因？

提前致谢，

克里斯蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:40:23.913

获取正在运行的服务器的线程转储 有两个选项

**使用 VisualVM**

在你的 %java_home%/bin 文件夹中会有一个名为 jvisualvm 的文件。运行它并连接到您的 tomcat 服务器。单击“线程”选项卡，然后单击“线程转储”

**从命令行手动**

打开命令行并找到您的tomcat的进程ID

```
ps -ef | grep java 
```

一旦您确定了正在运行的 tomcat 实例的进程 ID，

```
kill -3 <pid> 
```

在此处替换进程 ID。这会将您的线程转储发送到您的 tomcat 的标准输出。很可能是 catalina.out 文件。

**编辑**- 根据以下马克的评论：

> 将 3 个线程转储间隔约 10 秒并进行比较是正常的。它可以更轻松地查看哪些线程“卡住”以及哪些线程正在移动

* * *

一旦你有了线程转储，你就可以分析它是否有卡住的线程。可能不是线程卡住的问题，但至少你可以看到服务器内部发生了什么来进一步分析问题。

# php - 使用 get_meta_tags 函数时复制元描述，只需要描述

> ID：10105456
> 
> 赞同：0
> 
> 时间：2012-04-11T11:59:21.550
> 
> 标签：php

当回显而不是仅删除所有其他元标记时，它似乎在重复描述，例如：

BBC 有 13 个不同的元标签，当我只在脚本中回显描述时，它会重复 13 次。

```
<?php
//make the array 
$TAarray = explode("\n", strip_tags($_POST['TAData'])); 

foreach ($TAarray as $key => &$line) {
            $line = trim($line); 
            // get the meta data for each url
            $tags = get_meta_tags($line);

            echo '<tr>';
            foreach ($tags as $meta)        
            {
            echo (isset($tags['description']))?"<br><br       />\nDescription($line):<br>\n".$tags['description']:"<br>\nDescription($line):<br>\nNo Meta    Description.";
                    /*echo '<td>' . $meta . '</td>';*/
            }
            echo '</tr>';
    }

    ?> 
```

这是任何人都想看到它工作的 URL：http: [//php-playground.co.cc/testdir/metaex.php](http://php-playground.co.cc/testdir/metaex.php)

附言

我知道复选框不起作用，它们仅用于布局

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:04:47.867

您正在遍历元标记，并且*对于每个元标记*，您都在呼应描述。

摆脱循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T12:05:13.683

我认为这就是你想要做的：

```
<?php
//make the array 
$TAarray = explode("\n", strip_tags($_POST['TAData'])); 

foreach ($TAarray as $key => &$line) {
            $line = trim($line); 
            // get the meta data for each url
            $tags = get_meta_tags($line);

            echo '<tr>';
            echo (isset($tags['description']))?"<br><br       />\nDescription($line):<br>\n".$tags['description']:"<br>\nDescription($line):<br>\nNo Meta    Description.";
                   echo '<td>' . $tags['description'] . '</td>';
            echo '</tr>';
    }

    ?> 
```

您会注意到已经删除了第二个 for 循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T12:06:33.787

如果您`foreach`与引用一起使用，最好在循环后删除该引用：

```
foreach ($TAarray as $key => &$line)
{
    $line = trim($line); 
}
unset($line); # remove the reference for safety reasons 
```

但是由于您不会`$TAarray`在该代码之后进行迭代，因此该代码无论如何都是多余的。不要编写多余的代码。我建议如下：

```
//make the array 
$TAarray = explode("\n", strip_tags($_POST['TAData'])); 
$TAarray = array_map('trim', $TAarray); 
```

我建议你把它放到它自己的函数中：

```
/**
 * @param string $html
 * @return string[] lines
 */
function getTrimmedTextLinesArrayFromHTMLBlock($html)
{
    $text = strip_tags($html);
    $lines = explode("\n", $text);
    $trimmed = array_map('trim', $lines);
    return $trimmed;
} 
```

然后，您可以在任何您认为合适的地方使用它。您还可以使用不同的输入独立测试此功能：

```
$lines = getTrimmedTextLinesArrayFromHTMLBlock($_POST['TAData']));
$whitelist = array("description");
foreach ($lines as $line)
{
    if (! $tags = get_meta_tags($line)) continue;
    echo '<tr>';
    foreach ($tags as $key => $meta)
    {
        if (! in_array($key, $whitelist)) continue;
        echo '<td>' . $meta . '</td>';
    }
    echo '</tr>';
} 
```

我希望这是有帮助的。

# python - python中的字典值添加值

> ID：10105458
> 
> 赞同：2
> 
> 时间：2012-04-11T11:59:24.403
> 
> 标签：python

所以这是我的问题，我有一个带有以下键 => 值的字典：

```
6bc51fb21fd9eefef4ec97a241733cd59b71e8e14ad70e9068d32002:политичка -> 2
6bc51fb21fd9eefef4ec97a241733cd59b71e8e14ad70e9068d32002:државата -> 2
6bc51fb21fd9eefef4ec97a241733cd59b71e8e14ad70e9068d32002:енергично -> 1
1caa60ebf9459d9cd406f1a03e1719b675dcfaad78292edc7e4a56be:полициска -> 1 
```

我有这段代码来显示所需的键：

```
for key, value in count_db.iteritems():
        print key[:56] 
```

所以现在我有：

```
6bc51fb21fd9eefef4ec97a241733cd59b71e8e14ad70e9068d32002 -> 2
6bc51fb21fd9eefef4ec97a241733cd59b71e8e14ad70e9068d32002 -> 2
6bc51fb21fd9eefef4ec97a241733cd59b71e8e14ad70e9068d32002 -> 1
1caa60ebf9459d9cd406f1a03e1719b675dcfaad78292edc7e4a56be -> 1 
```

我需要将它们合并到：

```
6bc51fb21fd9eefef4ec97a241733cd59b71e8e14ad70e9068d32002 -> 5
1caa60ebf9459d9cd406f1a03e1719b675dcfaad78292edc7e4a56be -> 1 
```

我已经做到了，但我没有正确地做到这一点：

```
length_dic=len(count_db.keys())
for key, value in count_db.iteritems():
    count_element=key[:56]
    #print "%s => %s" % (key[:56], value) #value[:56]

    for i in range(length_dic):
        i+=1
        if count_element == key[:56]:
            itr+=int(value) 
        print i
    length_dic=length_dic-1 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T12:05:55.347

一个简单的方法是：

```
result = {}
for key, value in count_db.iteritems():
    result[key[:56]] = result.get(key[:56], 0) + value 
```

`reduce`如果你想在一行上得到它，你也可以达到同样的效果：

```
import collections
result = reduce(lambda x,y: x[y[0][:56]] += y[1] , count_db.iteritems(), collections.defaultdict(int)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T12:09:47.227

鉴于您的字典为

```
>>> spam={"6bc51fb21fd9eefef4ec97a241733cd59b71e8e14ad70e9068d32002:AAAA": 2,
"6bc51fb21fd9eefef4ec97a241733cd59b71e8e14ad70e9068d32002:BBBB": 2,
"6bc51fb21fd9eefef4ec97a241733cd59b71e8e14ad70e9068d32002:CCCC": 1,
"1caa60ebf9459d9cd406f1a03e1719b675dcfaad78292edc7e4a56be:DDDD": 1
} 
```

你可以像下面这样

```
>>> bacon=collections.defaultdict(int)
>>> for k,v in [(k[:56],v) for k,v in spam.iteritems()]:
    bacon[k]+=v

>>> bacon
defaultdict(<type 'int'>, {'6bc51fb21fd9eefef4ec97a241733cd59b71e8e14ad70e9068d32002': 5, '1caa60ebf9459d9cd406f1a03e1719b675dcfaad78292edc7e4a56be': 1})
>>> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T12:11:57.033

我不明白你为什么在代码中做了所有这些。我认为这可以完成这项工作：

```
tmp_dict = {}
for key, value in count_db.iteritems():
    count_element=key[:56]

    if count_element in tmp_dict:
        tmp_dict[count_element] += value
    else:
        tmp_dict[count_element] = value 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T17:48:57.617

这正是[Counter](http://docs.python.org/dev/library/collections.html#collections.Counter)对象（在 2.7+ 版本中）的用途：

```
import collections
c = collections.Counter()

for key, value in count_db.iteritems():
    c[key[:56]] += value 
```

# c# - c# 使用Assembly从应用程序中获取框架/运行时版本

> ID：10105464
> 
> 赞同：3
> 
> 时间：2012-04-11T11:59:54.780
> 
> 标签：c#, frameworks, runtime, version

我正在尝试通过程序集检查其他 .NET 应用程序正在使用的框架版本。我找到了两种获取框架版本的方法（首先通过 ImageRunetimeVersion 和程序集的 FullName），但是我从中得到了两个不同的值，我不知道哪个是正确的：

```
 Assembly ass = Assembly.LoadFrom(autPath);            
        string imageRuntimeVersion = ass.ImageRuntimeVersion;
        Console.WriteLine("ImageRunetimeVersion: " + imageRuntimeVersion);
        Console.WriteLine("FullName: " + ass.FullName);

        Console.WriteLine("");            
        Console.WriteLine("----");
        Console.WriteLine("Referenced Assemblies: ");
        Console.WriteLine(""); 

        AssemblyName[] referencedAssemblies = ass.GetReferencedAssemblies();
        foreach (AssemblyName a in referencedAssemblies)
        {
            Console.WriteLine(a.FullName);
        } 
```

如果我要使用我的应用程序和例如paint.net 进行测试，结果是：

就像你看到的那样，我不能说哪个“版本”是正确的。最大的问题是，如果我要查看我的 .net 应用程序的项目属性，目标平台是 3.5 而不是 2.0 或 1.0-

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T12:16:03.500

我想我可以为你澄清一些事情。首先，FullName 属性为您提供应用程序版本号。这是您设置的数字，与 .NET 框架版本无关。这意味着可以忽略 FullName 属性中的版本号。

imageRuntimeVersion 是 CLR 版本。不幸的是，2.0 涵盖了 .NET 2.0、3.0 和 3.5。从技术上讲，您的应用程序正在为您提供正确的信息，但它并不是您真正想要的信息（我不认为）。

这是一篇有更多解释的 SO 文章： [Retrieve Target Framework Version and Target Framework Profile from a .Net Assembly](https://stackoverflow.com/questions/6854664/retrieve-target-framework-version-and-target-framework-profile-from-a-net-assem)

那篇文章给你的一些建议包括寻找一个可以为你提供目标框架的配置文件或查看所使用的库的版本。两者都不是万无一失的，但据我所知，这是你能做的最好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-28T13:08:40.783

TargetFramework 与 CLR 版本不同。

例如，

CLR 4.0 目标框架：.NET 4.0 和 .NET 4.5

使用 TargetFrameworkAttribute 的解决方案[http://www.lucbos.net/2011/08/get-targetframework-for-assembly.html](http://www.lucbos.net/2011/08/get-targetframework-for-assembly.html)

注意：TargetFrameworkAttribute 仅适用于 .NET 4.0。

```
 var targetFramework = "Unknown";
    var targetFrameworkAttributes = assembly.GetCustomAttributes(typeof(System.Runtime.Versioning.TargetFrameworkAttribute), true);
    if (targetFrameworkAttributes.Length > 0)
    {
        var targetFrameworkAttribute = (TargetFrameworkAttribute)targetFrameworkAttributes.First();
        targetFramework = (targetFrameworkAttribute.FrameworkDisplayName);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-20T16:09:11.330

Console.WriteLine("版本：{0}", Environment.Version.ToString());

# java - 将 JFreeChart 嵌入 Java Servlet

> ID：10105469
> 
> 赞同：0
> 
> 时间：2012-04-11T12:00:08.990
> 
> 标签：java, servlets, jfreechart

有没有什么方法可以嵌入`JFreeChart`到 Java Servlet 中，并且能够拥有图表的十字准线，放大缩小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:10:06.397

`JFreeChart`进入网页的唯一方法是使用 Applet。您不能仅使用 servlet 来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:50:21.747

或者，使用[java-web-start](/questions/tagged/java-web-start "显示标记为“java-web-start”的问题")从网页启动应用程序。

# .net - 使用 jQuery 从 ajax 调用时延迟从 Web 服务获取响应

> ID：10105472
> 
> 赞同：0
> 
> 时间：2012-04-11T12:00:26.600
> 
> 标签：.net, web-services, jquery

我正在使用 jQuery 调用 Web 服务（c#）方法。从 Web 服务获取结果后，我必须以 html 形式绑定数据。但问题是，在运行代码时，我从 Web 服务得到延迟响应，直到那时我函数返回 null 并且不设置表单字段。下面是我的代码。在这里，我得到 v 的空值

```
function CallBGHostService(aParam) {

var v = null;
$.ajax({

    url: "http://localhost/MyService.asmx/GetBusinessGroupData",
    type: 'POST',
    dataType: "json",
    data: "{'aBusinessGroupID':'" + aParam + "'}",
    contentType: "application/json; charset=utf-8",
    beforeSend: function (xhr) { xhr.withCredentials = true; },
    crossDomain: true,
    success: function test(response) {
        v = response.d;
        alert(response.d);

    },
    error: function test(response) {
        v = response.d;
        alert(response.d);
               }
});

return (v);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T21:02:56.110

只是为了查看您在`dataType: "text"`设置中收到的更改并将您的`success`功能更改为`success: function(response) {alert(response);},`. 您的错误函数设置不正确，它应该是：`error: function(XMLHttpRequest, textStatus, errorThrown){alert(errorThrown);}`. 此外，您不需要命名`success`and`error`函数。您当然不需要将它们命名为相同的东西！

# android - 确定操作栏是否拆分

> ID：10105473
> 
> 赞同：9
> 
> 时间：2012-04-11T12:00:31.030
> 
> 标签：android, android-actionbar, actionbarsherlock

我有一个`MapView`由 ActionBarSherlock 提供支持的操作栏。操作栏既是拆分的（在“窄”屏幕上）又是覆盖/半透明的（android:windowActionBarOverlay 为真）。或多或少像谷歌地图应用程序。

现在我想将视图推送到地图顶部，在屏幕底部仍然保持在底部操作栏上方。我的问题是我不知道底部操作栏的高度。坦率地说，我什至找不到办法知道它是否被绘制。`getHeight()`似乎返回了顶部操作栏的高度（或者可能是它们两个的高度，但我仍然不知道底部操作栏是否存在。

请告诉我，这些信息就在我眼前！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T23:17:10.613

如果您使用的是 ActionBarSherlock，您可以查找布尔值 abs__split_action_bar_is_narrow

只需创建一些静态方法即可

```
return ResourcesCompat.getResources_getBoolean(context,
                            R.bool.abs__split_action_bar_is_narrow); 
```

您需要使用 ResourcesCompat（来自 actionbarsherlock）类，因为 3.2 之前的版本无法读取带有指标的文件夹（如 values-sw480）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T08:09:57.137

我遇到了同样的问题。在纵向模式下的手机设备上，操作栏是分开的。因此菜单项位于顶部操作栏中，选项卡位于下方的第二个操作栏（选项卡栏）中。我只是没有找到任何可能的方法来确定操作栏的高度：在构建屏幕之前查看屏幕上剩余的空间。

所以我做了一个假设：

*   在小型和正常屏幕尺寸的设备上，操作栏以纵向模式拆分
*   在大屏幕设备（如 Nexus 7）上，操作栏也以纵向模式拆分
*   在 xlarge 屏幕尺寸设备（平板电脑）上，操作栏不会在纵向模式下拆分

所以我区分了不同的屏幕尺寸并创建了一个 bool 资源

```
<!-- res/values/booleans.xml -->
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <bool name="is_split_actionbar">false</bool>
</resources>

<!-- res/values-small-port/booleans.xml
     res/values-normal-port/booleans.xml
     res/values-large-port/booleans.xml -->
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <bool name="is_split_actionbar">true</bool>
</resources> 
```

在代码中，我访问这样的值：

```
Boolean isSplit = getResources().getBoolean(R.bool.is_split_actionbar); 
```

要在 onCreateView() 方法中获取操作栏高度：

```
TypedValue typedVal = new TypedValue();
getActivity().getTheme().resolveAttribute(R.attr.actionBarSize, typedVal, true); // use android.R when not using ABS
int actionBarHeight = getResources().getDimensionPixelSize(typedVal.resourceId); 
```

如果操作栏被拆分，则高度加倍：

```
if(isSplit) 
    actionBarHeight = actionBarHeight * 2; 
```

这不是一个理想的解决方案，但对我来说这是可行的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T04:19:23.293

底部栏应与常规操作栏的高度匹配。因此，在 XML 或代码中使用`?android:attr/actionBarSize`（或在 ActionBarSherlock 的情况下）作为高度就足够了。`?attr/actionBarSize``getResources().getDimensionPixelSize(R.attr.actionBarSize)`

*编辑：*

呃，在第二次阅读你的问题时，它似乎更专注于确定拆分操作栏是否存在。

您可能想阅读这些答案和行动栏大师亚当鲍威尔的后续评论：

*   [https://stackoverflow.com/a/8280776/132047](https://stackoverflow.com/a/8280776/132047)
*   [https://stackoverflow.com/a/8381191/132047](https://stackoverflow.com/a/8381191/132047)

# asp.net - 无法序列化会话状态。在“StateServer”和“SQLServer”模式下

> ID：10105474
> 
> 赞同：2
> 
> 时间：2012-04-11T12:00:32.200
> 
> 标签：asp.net

我在我的应用程序中使用`MySql`和`SQLLITE`。使用处理查询后返回`SQLLITE`的`session`值插入数据或更新数据时。`null`所以为了克服这个我写如下`Web.Config`

```
<sessionState mode="StateServer"></sessionState> 
```

一切正常，但是当进入某个页面时，我收到错误消息

`Unable to serialize the session state. In 'StateServer' and 'SQLServer' mode, ASP.NET will serialize the session state objects, and as a result non-serializable objects or MarshalByRef objects are not permitted. The same restriction applies if similar serialization is done by the custom session state store in 'Custom' mode.`

在剩余的页面中，每件事都运行良好，谁能说出为什么会这样

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:09:42.120

听起来很明显。最大的问题是为什么您认为需要从 In-Proc 更改为其他内容。听起来您的 SQLLITE db 可能位于 BIN 目录中，导致应用程序每次都重新启动，但没有更多信息，谁能确定。

`User`已经回应说确实如此。

**解决方案：**将 SQLLITE db 移动到另一个目录。

# postgresql - Postgresql 查询中的 COPY 命令

> ID：10105478
> 
> 赞同：0
> 
> 时间：2012-04-11T12:00:37.927
> 
> 标签：postgresql, copy

再会！

我想咨询一下 Postgresql 中的 COPY 命令。我有这张桌子：

```
CREATE TABLE pm_monitor_temporary
(
  date timestamp NOT NULL,
  targetid varchar(128) NOT NULL,
  value1 float8 NOT NULL,
  value2 float8 NOT NULL,
  value3 float8 NOT NULL,
  value4 float8 NOT NULL,
  value5 float8 NOT NULL,
  value6 float8 NOT NULL,
  datastatus1 varchar(2) NOT NULL,
  datastatus2 varchar(2) NOT NULL,
  datastatus3 varchar(2) NOT NULL,
  datastatus4 varchar(2) NOT NULL,
  datastatus5 varchar(2) NOT NULL,
  datastatus6 varchar(2) NOT NULL,
  granularity int4 NOT NULL,
  neid varchar(16) NOT NULL,
  CONSTRAINT pm_monitor_pkey PRIMARY KEY (date, targetid, granularity, neid)
); 
```

我确实创建了一个函数，它将 csv 内容复制到给定文件路径（文件的绝对路径）的表中。我的sql函数似乎有问题。：

```
Create Or Replace Function copycsv_pm_monitor_temp(filePath  varchar(1025))
Returns void As
$BODY$
DECLARE
  sql varchar(1025);
BEGIN
    sql := 'COPY  pm_monitor_temporary FROM {' || filePath ||
      '| stdin} using DELIMITERS ',' ' || ';' ;
    EXECUTE sql;
END;
$BODY$
LANGUAGE 'plpgsql' VOLATILE; 
```

这将编译，但是当我运行我的 java 代码时，这最终会导致错误。我错过了什么？

```
Caused by: org.postgresql.util.PSQLException: ERROR: query "SELECT  'COPY                  pm_monitor_temporary FROM {' ||  $1  || '| stdin} using DELIMITERS ',' ' || ';'" returned     2 columns 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T12:29:10.473

您没有正确处理您的引用，并且意外地得到了一个有效语法的语句，该语句没有正确数量的结果列。你也有一些其他的问题。

这个：

```
 sql := 'COPY  pm_monitor_temporary FROM {' || filePath ||
      '| stdin} using DELIMITERS ',' ' || ';' ; 
```

应该是这样的：

```
 sql := 'COPY pm_monitor_temporary FROM ''' || filePath ||
      ''' WITH (FORMAT csv, DELIMITER '','')'; 
```

# java - 当用户篡改表单提交时，显示 JSF 错误页面以获取异常

> ID：10105479
> 
> 赞同：0
> 
> 时间：2012-04-11T12:00:57.463
> 
> 标签：java, jsf, richfaces

当用户篡改 Richfaces 日历中的 POST 数据时，我试图显示一个通用错误消息页面。（使用篡改数据 firefox 插件）。

我选择一个正常的日期，打开篡改并调整日期值以包含字符串值。它返回到显示以下错误消息的页面：

```
java.lang.NumberFormatException: For input string: "2012dsafsf"
java.lang.NumberFormatException: For input string: "2012sdfsdf" 
```

我`<h:messages />`用来显示消息。

我已将以下内容添加到我的 web.xml 中，但它没有重定向到此页面。

```
<error-page>
  <exception-type>java.lang.NumberFormatException</exception-type>
  <location>/error.xhtml</location>
</error-page> 
```

有什么想法我哪里出错了吗？

我本质上需要的是一个通用的类/阶段监听器/转换器/whatever..来拦截和处理 JSF 捕获的某些类型的异常。（不是未处理的异常）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:11:00.780

修复它的最简单方法是在字段中添加验证器。使用验证器可以为此错误添加特定消息。

有关验证和转换的一些信息：http: [//www.ibm.com/developerworks/java/library/j-jsf3/](http://www.ibm.com/developerworks/java/library/j-jsf3/)

错误文档用于 HTTP 状态代码（例如 404/500）

# java - 如何从客户端关闭套接字？

> ID：10105480
> 
> 赞同：0
> 
> 时间：2012-04-11T12:01:01.463
> 
> 标签：java, sockets, netty

我有一个使用 netty 开发的服务器和客户端。在客户端使用同一通道写入几条消息后，我尝试关闭套接字（释放资源）。我已按照说明@ [http://netty.io/docs/unstable/guide/html/#start.12](http://netty.io/docs/unstable/guide/html/#start.12)

完成上述步骤后，客户端仍未关闭。

任何一位网络专家都可以在这里帮助我。

问候 T

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:27:11.723

that code seems to be missing the call to actually close the channel. i believe you want to actually call `Channel.close()` before line 14.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T08:55:15.187

我在我的代码中这样做：

```
public class TimeClient {
  public static void main(String[] args) throws Exception {
        ...
      ChannelFactory factory = ...;
        ClientBootstrap bootstrap = ...;
      ...
        ChannelFuture future(29) = bootstrap.connect(...);
      future.awaitUninterruptibly();(30)
        if (!future.isSuccess()) {
          future.getCause().printStackTrace();(31)
        }
      ... YOUR BUSINESS LOGIC HERE
      future.getChannel().close().awaitUninterruptibly();(32)
        factory.releaseExternalResources();(33)
  }
} 
```

# ruby-on-rails - RubyMine 错误：无法运行 gem 'rails'。找不到“导轨”

> ID：10105481
> 
> 赞同：11
> 
> 时间：2012-04-11T12:01:01.903
> 
> 标签：ruby-on-rails, ruby, linux, rubymine

当我尝试使用 RubyMine 创建 Rails 应用程序时，它失败并显示消息“无法运行 gem 'rails'。找不到'rails'”。为什么？以及如何解决？

RubyMine 的版本是 4.0.2。

关于我的系统有一些信息：

```
$ ruby -v
ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-linux]
$ gem -v
1.8.11
$ uname -a
Linux somehost 3.2.0-2-amd64 #1 SMP Tue Mar 20 18:36:37 UTC 2012 x86_64 GNU/Linux
$ lsb_release -d
Description:    Debian GNU/Linux testing (wheezy)
$ rails -v
Rails 3.2.3 
```

这是 gem list --local 的输出：http: [//pastebin.com/CymzGUpf](http://pastebin.com/CymzGUpf)

RubyMine 看到相同的一组宝石： http: [//ompldr.org/vZGM2eA](http://ompldr.org/vZGM2eA)

其他用于 Ruby 和 Ruby on Rails 的 IDE（带有插件 DLTK-Ruby、Netbeans 的 Eclipse）工作正常。

我做错了什么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-11T13:23:37.887

这个问题是由于可执行文件位于不同的目录引起的`ruby`，`rails`通常它们应该在同一个目录中，而 RubyMine 会在配置的解释器二进制文件`rails`所在的同一位置寻找脚本。`ruby`

在这种特殊情况下，位置如下：

*   `/usr/local/bin/rails`
*   `/usr/bin/ruby`

`rails`解决方案之一是在目录中创建脚本的符号链接`/usr/bin`：

`sudo ln -s /usr/local/bin/rails /usr/bin/rails`

# dll - 依赖项所见的 DLL 的导出函数

> ID：10105488
> 
> 赞同：0
> 
> 时间：2012-04-11T12:01:26.103
> 
> 标签：dll, dllexport, depends

我正在查看使用依赖从 dll 导出的函数列表，我注意到名称中包含一些奇怪的符号。它们的格式为

`??0Function Name@@QEAA@AEBV0@@Z`

0也可能被其他数字代替。

@@ 的数量和字母不同。

谁能说出它们代表什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:02:22.767

这是由 C++ 编译器修饰的 C++ 标识符的名称。您可以从 Visual Studio 命令提示符运行 undname.exe 实用程序，将其转换回原始 C++ 声明：

```
C:\>undname ??0Foo@@QEAA@AEBV0@@Z
Microsoft (R) C++ Name Undecorator
Copyright (C) Microsoft Corporation. All rights reserved.

Undecoration of :- "??0Foo@@QEAA@AEBV0@@Z"
is :- "public: __cdecl Foo::Foo(class Foo const & __ptr64) __ptr64" 
```

这使它成为 Foo 类的复制构造函数，编译为 64 位代码。我所知道的没有记录确切的装饰算法。通常，名称修饰用于避免链接器符号冲突，这是必要的，因为 C++ 支持重载。您可以通过使用来抑制装饰，`extern "C"`但这不适用于 C++ 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T21:16:49.550

在某些情况下，您可能有兴趣使用 Microsoft 提供的 API 以编程方式取消装饰这些名称[UnDecorateSymbolName](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681400%28v=vs.85%29.aspx)。

# postgresql - 如何从生产中克隆测试数据库的一个动作？

> ID：10105489
> 
> 赞同：12
> 
> 时间：2012-04-11T12:01:36.287
> 
> 标签：postgresql, templates, database-connection, postgresql-9.1

我正在寻找一个基本脚本/命令，它将创建一个实时数据库的副本（让它们命名为`mydb`和`mydb_test`，都在同一台服务器上）。

要求

*   即使`mydb_test`已经存在并且有记录，它也必须运行
*   即使`mydb`并且`mydb_test`确实有现有的连接，它也必须工作
*   如有必要，它必须清理可能存在的数据库

提示：

*   `drop database`如果您有现有连接，则无法使用

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T14:07:55.783

创建现有（实时）数据库的完整副本的最简单和最快的方法是[`CREATE DATABASE`使用`TEMPLATE`](http://www.postgresql.org/docs/current/sql-createdatabase.html)：

```
CREATE DATABASE mydb_test TEMPLATE mydb; 
```

但是，有一个**重要的限制**违反了您的第二个要求：模板（源）数据库不能有额外的连接。[我引用手册：](http://www.postgresql.org/docs/current/manage-ag-templatedbs.html)

> 可以创建额外的模板数据库，实际上可以通过将其名称指定为`CREATE DATABASE`. 然而，重要的是要理解，这不是（还）打算作为通用的“ `COPY DATABASE`”设施。主要限制是在复制源数据库时没有其他会话可以连接到源数据库。`CREATE DATABASE` 如果启动时存在任何其他连接，则会失败；在复制操作期间，将阻止与源数据库的新连接。

如果您拥有必要的权限，则可以终止与模板数据库的所有会话[`pg_terminate_backend()`](http://www.postgresql.org/docs/current/static/functions-admin.html#FUNCTIONS-ADMIN-SIGNAL-TABLE)。
要暂时禁止重新连接，[请撤销`CONNECT`特权](https://dba.stackexchange.com/questions/16426/how-to-drop-all-connections-to-a-specific-database-without-stopping-the-server/16427#comment25338_16427)（`GRANT`稍后再撤销）。

```
REVOKE CONNECT ON DATABASE mydb FROM PUBLIC;

-- while connected to another DB - like the default maintenance DB "postgres"
SELECT pg_terminate_backend(pid)
FROM   pg_stat_activity
WHERE  datname = 'mydb'                    -- name of prospective template db
AND    pid <> pg_backend_pid();            -- don't kill your own session

CREATE DATABASE mydb_test TEMPLATE mydb;

GRANT CONNECT ON DATABASE mydb TO PUBLIC;  -- only if they had it before 
```

在Postgres 9.2*之前*的版本中，使用`procpid`而不是`pid`：

*   [如果有活动连接，如何删除 PostgreSQL 数据库？](https://stackoverflow.com/questions/5408156/how-to-drop-a-postgresql-database-if-there-are-active-connections-to-it/13245265#13245265)

有关的：

*   [强制删除数据库，而其他人可能已连接](https://dba.stackexchange.com/a/11895/3684)

* * *

如果您负担不起终止并发会话的费用，请使用管道输出`pg_dump`to `psql`like 已经被其他答案所建议。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T12:41:45.813

这就是我一直在寻找的，但我必须自己编译它：P

我只希望我知道一种方法来保留相同的用户，而不必将其放入脚本中。

```
 #!/bin/bash
DB_SRC=conf
DB_DST=conf_test
DB_OWNER=confuser

T="$(date +%s)"

psql -c "select pg_terminate_backend(procpid) from pg_stat_activity where datname='$DB_DST';" || { echo "disconnect users failed"; exit 1; }
psql -c "drop database if exists $DB_DST;" || { echo "drop failed"; exit 1; }
psql -c "create database $DB_DST owner confuser;" || { echo "create failed"; exit 1; }
pg_dump $DB_SRC|psql $DB_DST || { echo "dump/restore failed"; exit 1; }

T="$(($(date +%s)-T))"
echo "Time in seconds: ${T}" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T12:18:21.323

由于您没有说在数据库中删除*对象*是一个问题，我认为`pg_dump`使用该`--clean`选项运行将满足您的需求。您可以将 pg_dump 的输出通过管道传输到 psql 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T12:37:32.170

您是否在此处查看带有[流复制的](http://www.postgresql.org/docs/current/static/warm-standby.html#STREAMING-REPLICATION)[热备](http://www.postgresql.org/docs/current/static/hot-standby.html)？

# svn - 重命名文件夹而不丢失分支和主干之间的链接

> ID：10105491
> 
> 赞同：0
> 
> 时间：2012-04-11T12:01:43.230
> 
> 标签：svn, version-control, tortoisesvn

我有两个工作副本：一个主干和一个分支：

*   主干 -> 应用程序 1.0
*   分支 -> 1.2 -> 应用程序 1.0

我需要重命名`App 1.0`为`Application`("1.0" 是从“手动”完成版本控制的日子开始的一个古老的东西，而 SVN 未被充分利用来委婉地说；我现在正在尝试设置它，尽管我没有太多经验源代码控制）。

我`TortoiseSVN -> Rename`在我的`1.2\App 1.0`和`trunk\App 1.0`本地磁盘文件夹（工作副本）上做了，我也重命名了存储库中的文件夹（通过`Repo-browser`）。

然而 1.2 分支中的代码文件`abc.cs`仍然“认为”它的基础是旧文件：`App 1.0/abc.cs`.

`Diff with previous version`给我一个错误（*“Subversion 报告了一个错误：无法在修订版 604 中找到 1.2\App 1.0\abc.cs 的存储库位置”*）。

请参阅此文件的修订图：

![在此处输入图像描述](../Images/0bb6fb0ead4127c754106b6dcf5679f9.png)

（出于易于理解的原因，我删除了应用程序的实际名称。）

通过将主干修改合并到分支来传播主干修改现在有点麻烦。

更重要的是，我的同事还有一份`App 1.0`工作副本（尚未提交或更新），所以我有点担心我们会搞砸事情，我不知道如何从这里继续。

**问题是：**我在哪里做错了，我该如何解决（对我和我的同事都是如此）？

我想独立重命名两个文件夹是破坏历史跟踪的错误（现在图片上的 637 和 639 之间没有直接联系，而这正是我所需要的）；我只是不确定我应该做什么，也不知道如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:07:24.007

该问题是由于重命名工作副本和 repo 文件夹而没有传达任何更改（如您所想）。

根据[此处](http://www.svnforum.org/threads/41094-Broke-history-path-by-independently-renaming-folders-in-the-trunk-and-in-the-branch)的线程，您可以重命名 repo 文件夹，然后更新工作副本，或使用命令行界面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:42:16.030

尝试检查一个新的工作副本 - 存储库中的一切可能都正常......

# java - 服务器不直接响应我的命令

> ID：10105495
> 
> 赞同：1
> 
> 时间：2012-04-11T12:02:00.673
> 
> 标签：java, netty

首先，我承认我是新手，我可能只是忘记在某个地方为正确的变量设置一个选项，但是我的谷歌搜索失败了，我不知道该怎么做，所以我希望得到一些帮助。

我基于 SecureChat 示例，它可以位于此处：[http ://netty.io/docs/unstable/xref/org/jboss/netty/example/securechat/package-summary.html](http://netty.io/docs/unstable/xref/org/jboss/netty/example/securechat/package-summary.html)

而我所做的不同之处仅在于 SecureChatServerHandler。更准确地说，在 messageRecieved 块中：

```
@Override
public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) throws Exception {
    // Convert the message to a string
    String request = (String) e.getMessage();

    System.out.println("Message recieved: " + request);

    if (request.equalsIgnoreCase("clients")) {
        channels.write("We currently have: " + channels.size() + " clients");
    } else if (request.toLowerCase().equals("koko"))
        for (Channel c : channels) {
            if (c == e.getChannel())
                c.write("HELLO WORLD");
        }
    else {
        // Then send it to all channels, but the current one.
        for (Channel c : channels)
            if (c != e.getChannel())
                c.write("[" + e.getChannel().getRemoteAddress() + "] " + request + "\n");
            else
                c.write("[you] " + request + "\n");

    }

    if (request.equalsIgnoreCase("bye"))
        e.getChannel().close();
} 
```

如果我发送一条正在广播的正常消息，则一切正常。但是如果我发送一个命令，比如**clients**或**koko**，我没有得到任何响应，直到我再次按 enter 并发送一条空消息。首先，我得到回复。

```
 C:\Device Manager\Application Server\Examp
 les\SecureChat\SecureChatClient\bin>java -jar client.jar 127.0.0.1 8080
 UNKNOWN SERVER CERTIFICATE: CN=securechat.example.netty.gleamynode.net, OU=Contr
 ibutors, O=The Netty Project, L=Seongnam-si, ST=Kyunggi-do, C=KR
 Welcome to Electus secure chat service!
 Your session is protected by TLS_DHE_RSA_WITH_AES_128_CBC_SHA cipher suite
 You are the 1th user
 koko<ENTER>
 <PRESS ENTER AGAIN>
 HELLO WORLD[you]
 clients<ENTER>
 <AND ENTER ONCE AGAIN>
 We currently have: 1 clients[you] 
```

我不明白，也不想要的是 - 按下输入按钮两次 - 事情。这似乎非常不合逻辑，而且令人恼火。Telnet 示例没有这些问题。

感谢您的时间。

问候，奥尔德里安。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:38:43.643

这是一个丢人的时代，你只是忘记了一个小细节，这把一切都搞砸了。

```
if (request.equalsIgnoreCase("clients")) {
    channels.write("We currently have: " + channels.size() + " clients /n"); // Forgot /n here
} else if (request.toLowerCase().equals("koko"))
    for (Channel c : channels) {
        if (c == e.getChannel())
            c.write("HELLO WORLD /n"); // <- Forgot /n here as well
    } 
```

# css - 无论页面大小如何，如何将两个元素彼此相邻放置

> ID：10105497
> 
> 赞同：2
> 
> 时间：2012-04-11T12:02:04.550
> 
> 标签：css, position

我正在尝试在我的网页上做一个 iphone 风格的滑动操作。这个想法是，在我的侧边栏中，如果我单击一个链接，它将侧边栏向左显示该链接的位置。为此，我正在并排创建两个侧边栏，可见侧边栏和下一个将隐藏在另一个元素后面的侧边栏。

可以在[http://jsfiddle.net/gpcC6/7/找到侧边栏的示例](http://jsfiddle.net/gpcC6/7/)

我遇到的问题是，当窗口调整大小时，第二个侧边栏位于第一个侧边栏下方。我想留在右边，即使这意味着它离开了屏幕的一侧。这可能吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T12:24:47.007

将侧边栏放在一个容器中，`white-space: nowrap`并制作它们`display: inline-block`而不是浮动它们，它应该按照您的说明工作。

* * *

请注意， `white-space: nowrap`在某些浏览器中，会将 HTML 中两个 div 之间的空间解释为实际空间

```
<div>
</div><!-- SPAAAAAACE -->
<div>
</div> 
```

要删除该间距，您需要将它们放在同一行

```
<div>
</div><div>
</div> 
```

或者，您可以将 a 添加`font: 0;`到父元素，在这种情况下，容器也会删除间距，但请注意，您需要在执行此操作之前明确定义所有元素的字体大小，否则所有子元素都将具有字体大小也为 0。;)

有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/5078239/how-to-remove-the-space-between-inline-block-elements)和[本文](http://www.lifeathighroad.com/web-development/css-web-development/inline-block-whitespace-workaround/)。

* * *

## [样品](http://jsfiddle.net/gpcC6/13/)| 代码

CSS

```
div{
    font-size: 16px;
}

#topbar {
    height: 40px;
    background-color: blue;
}

.wrapper{
    white-space: nowrap;
    font-size: 0;
}

.sidebar {
    width: 200px;
    display: inline-block;  
    white-space: normal;
}

.title {
    height:30px;
    background-color: red;
}

.main {
    height: auto;
    overflow: scroll;
} 
```

HTML

```
<div id="topbar">
    hello
</div>
<div class='wrapper'>
    <div class="sidebar">
        <div class="title">
            title
        </div>
        <div class="main">
            blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
        </div>

    </div>
    <div class="sidebar">
        <div class="title">
            title
        </div>
        <div class="main">
            blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah
        </div>      
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T12:21:02.050

在你的酒吧周围放置一个包装 div 并给它一个固定的宽度或最小宽度。然后你必须只看你的侧边栏在这个包装容器中彼此相邻。即使窗口较小并且您可以水平滚动，这也可以保证它们彼此相邻。

# objective-c - 如何在 Objective C 中找到两个对象之间的细微差别

> ID：10105500
> 
> 赞同：1
> 
> 时间：2012-04-11T12:02:10.810
> 
> 标签：objective-c, ios, reflection

如何找到相同类型的两个对象之间的值差异。例如，我有一个 Rectangle 类，它具有 x、y、width、height 属性和两个矩形类对象。如何找到（以编程方式或任何可视化工具或库等）一个矩形的哪些属性与第二个矩形不同？

或者有什么方法可以在控制台或文件中获取对象状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T12:27:41.077

*如果您在编译时确实**知道*对象的类，其他答案就很好。如果不是这种情况，您仍然很幸运，因为 Objective C 允许您在运行时探索对象的实例变量。比较两个未知对象的伪代码可能是：

 *```
+ (BOOL) compareObject:(id)obj1 withObject:(id)obj2 {

  unsigned int varCount1, varCount2;
  if ([obj1 class] != [obj2 class]) return NO;

  Ivar *vars1 = class_copyIvarList([obj1 class], &varCount1);
  Ivar *vars2 = class_copyIvarList([obj2 class], &varCount2);
  BOOL match = YES;

  for (int i = 0; i < varCount1; i++) {
    Ivar var1 = vars1[i];

    for (int j = 0; i < varCount2; j++) {
      Ivar var2 = vars2[j];
        if (strcmp(ivar_getName(var1), ivar_getName(var2)) == 0) {
          if (object_getIvar(obj1, var1) != object_getIvar(obj2, var2)) {
            match = NO;
            break;
          }
        } 
    }

    if (!match) break;

  }

  free(vars1);
  free(vars2);

  return match;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:06:27.820

如果您打印对象的描述，您将了解这些值。

例如，

```
CGRect rect = CGRectMake(10,10,20,20);
Rectangle *rectObject = [[Rectangle alloc] initWithFrame:rect];
NSLog(@"Desc : %@",[rectObject description]); 
```

另外，如果你想比较，

你可以通过 `NSLog(@"Origin x: %f", rectObject.frame.origin.x);`

你可以通过 `NSLog(@"Origin y: %f", rectObject.frame.origin.y);`

同样，您可以通过以下方式获得宽度，

```
NSLog(@"Width : %f", rectObject.frame.size.width);
NSLog(@"Height : %f", rectObject.frame.size.height); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T12:06:35.377

如果 x,y 等是浮点数，则假设 Rect1 和 Rect2 是两个对象，则

```
NSLog(@"for Rect1 \nx %f y %f \nFor Rect2 \nx %f y%f",Rect1.x,Rect1.y,Rect2.x,Rext2.y); 
```

这将分别显示 Rect1 和 Rect2 的 x 和 y

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T12:13:59.600

如果你想检查，如果两个变量指向*同一个实例*，你可以使用比较它们`obj1 == obj2`。

如果要检查，如果您的类的两个不同实例确实具有相同的成员值，则必须单独检查每个值。（例如。`obj1.property1 == obj2.property2`）。

如果您只是想检查相同的内容，则在调试时，只需放入断点并查看 xcode 的调试区域即可。你可以在那里检查所有活的物体。只需按对象旁边的箭头即可。局部变量（断点时存在）直接列出，成员折叠成self。*

# java - Apache Commons Math SpearmansCorrelation - 如何使用

> ID：10105501
> 
> 赞同：2
> 
> 时间：2012-04-11T12:02:13.320
> 
> 标签：java, apache, statistics, apache-commons

我正在尝试使用[Apache Commons Math 的 SpearmansCorrelation](http://jwork.org/jhepwork/api_extra/index.html?org/apache/commons/math/stat/correlation/SpearmansCorrelation.html)，但我遇到了一些困难，因为我没有足够的数学/统计学背景。

我从以下方面研究了 Spearman 的等级相关性：

*   [https://statistics.laerd.com/statistical-guides/spearmans-rank-order-correlation-statistical-guide-2.php](https://statistics.laerd.com/statistical-guides/spearmans-rank-order-correlation-statistical-guide-2.php)
*   [http://geographyfieldwork.com/SpearmansRank.htm](http://geographyfieldwork.com/SpearmansRank.htm)

我找到了以下示例：

*   [http://www.devdaily.com/java/jwarehouse/commons-math/src/main/java/org/apache/commons/math/stat/correlation/SpearmansCorrelation.java.shtml](http://www.devdaily.com/java/jwarehouse/commons-math/src/main/java/org/apache/commons/math/stat/correlation/SpearmansCorrelation.java.shtml)
*   [http://www.devdaily.com/java/jwarehouse/commons-math/src/test/java/org/apache/commons/math/stat/correlation/SpearmansRankCorrelationTest.java.shtml](http://www.devdaily.com/java/jwarehouse/commons-math/src/test/java/org/apache/commons/math/stat/correlation/SpearmansRankCorrelationTest.java.shtml)
*   [http://www.androidadb.com/class/na/NaturalRanking.html](http://www.androidadb.com/class/na/NaturalRanking.html)

我想计算我班级的两个列表之间的相关性：

```
public class TestClass{
    int rank; // there may be two or more classes with the same rank - will need an averaging ties strategy
} 
```

我从中推断出以下几点：

```
NaturalRanking naturalRanking = new NaturalRanking(NaNStrategy.FIXED,
        TiesStrategy.AVERAGE);

RealMatrix dataMatrix= createRealMatrix(double[], int, int); // what do I need this matrix for and what parameters do I need to pass?

SpearmansCorrelation sc = SpearmansCorrelation(dataMatrix, naturalRanking);
sc.correlation(double[],double[]);// I have to convert my class into a list of doubles? How? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T08:17:46.177

对于[您提供的链接](https://statistics.laerd.com/statistical-guides/spearmans-rank-order-correlation-statistical-guide-2.php)中的示例，您需要做的就是：

```
new SpearmansCorrelation().correlation(mathsList,englishList); 
```

默认情况下，该课程将平均平局。

# ibooks - 如何在 iOS 应用程序中打开 iba（iBooks Author）书籍？

> ID：10105503
> 
> 赞同：2
> 
> 时间：2012-04-11T12:02:28.630
> 
> 标签：ibooks

是否可以在 iOS 应用程序中解析和阅读 iba 书籍？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-01T10:13:09.937

如果没有大量的逆向工程，这可能是不可能的。正如mr.octobor 所建议的那样， .iba 文件*基于*epub，但布局和呈现不是通过epub 中的普通html、css 和javascript 来实现的。Apple 在 .iba 中使用了大量专有代码，特别是用于构建小部件。

Baldur Bjarnason 在这篇文章中感叹这一事实，您可以在其中更好地了解情况：[http ://www.baldurbjarnason.com/notes/the-ibooks-builtin-widgets/](http://www.baldurbjarnason.com/notes/the-ibooks-builtin-widgets/)

该文章中链接的 Daniel Glazman 的文章也很有用：[http ://www.glazman.org/weblog/dotclear/index.php?post/2012/01/20/iBooks-Author-a-nice-tool-但](http://www.glazman.org/weblog/dotclear/index.php?post/2012/01/20/iBooks-Author-a-nice-tool-but)

# xml - Windows Phone 7 上的 RSS

> ID：10105505
> 
> 赞同：0
> 
> 时间：2012-04-11T12:02:34.100
> 
> 标签：xml, windows-phone-7, rss

我是windows phone 7的开发者，我想问：如果我去.xml代码，还有这样的

```
<?xml version="1.0" encoding="utf-8"?>

<artists>
<images>
<image size="1">http://userserve-ak.last.fm/serve/34/17666215.jpg</image>
<image size="2">http://userserve-ak.last.fm/serve/64/17666215.jpg</image>
</images>
</artists> 
```

那么我该如何选择那里的第二个元素呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T18:12:15.080

我了解您想要解析此 XML 文件并获取第二个元素值，因此您可以使用以下方法执行此操作：

```
XDocument xmlDocument = XDocument.Parse("path_to_xml_file");
//you can also pass a the content as a string or a stream reader

XElement image = (from element in xmlDocument.Element("artists").Element("images").Descendants("image")
                          where element.Attribute("size").Value == "2"
                          select element).FirstOrDefault();

System.Diagnostics.Debug.WriteLine(image.Value); 
```

然后添加这个导入：

```
using System.Linq;
using System.Xml.Linq; 
```

并将 System.Xml.Linq.dll 的引用添加到您的项目中。

我认为这个链接对你也有帮助：[How to Get XML Node from XDocument](https://stackoverflow.com/questions/752271/how-to-get-xml-node-from-xdocument)

# jakarta-ee - 在 JAX-RS REST 服务应用程序中包含 JPA 项目

> ID：10105515
> 
> 赞同：4
> 
> 时间：2012-04-11T12:03:26.990
> 
> 标签：jakarta-ee, jpa, persistence, jax-rs

我编写了一个 JPA 项目，它封装了我所有的实体。由于 REST-Service 项目中也需要这些实体，我将 JPA-Project 导出为 *.jar 并将其包含在 REST-project 中（这没有 JPA-Facet）。

所以一切都可以部署在服务器上，我可以从前端访问 REST 服务，但是只要将 EntityManager 注入到一个类中，什么都不会发生。这会导致 NullPointerExceptions，因为 entityManager 不存在。

要注入的类被标记为`@Stateless`，entityManager 带有`@PersistenceContext`注释。

所以问题是：注入是在嵌套项目中工作还是我必须手动实例化 entityManager？

提前致谢！

此外，我正在使用 Glassfish v 3.1.2 和 JPA 2.0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T07:05:25.470

打算回答我自己的问题。在 netbeans 的帮助下，我收集了一些信息，这些信息让我可以轻松地改变我的项目结构。

这就是我所做的：

*   为 REST 项目提供 JPA 方面
*   将 persistence.xml 存储在该项目中
*   在包含实体的 jar 的 PU 链接中

这样我所要做的就是将注入的 entityManager 传递到实体项目中，我就完成了！

# zend-framework - 如何使用 Zend Framework 和 Wamp 2.2 创建一个合适的工作项目

> ID：10105517
> 
> 赞同：1
> 
> 时间：2012-04-11T12:03:29.723
> 
> 标签：zend-framework, windows-7, frameworks, installation, wamp

所以我已经在这里待了 2 天了，我无法让它一起工作。我在 c:\wamp 以标准方式安装了 Wamp 2.2，没什么特别的。我下载并解压了 Zend Frameworkm 文件夹并将其放在 C:\wamp\library 文件夹中。

所以它看起来像这样：

```
C:\wamp
   - www
 - ht.acces
 - index.php
   - bin
   - library
  - ZendFramework
      - bin
      - library
      - etc.
   - logs
   - tools
   - etc. 
```

现在按照指示，我将 php 位置和 Zend 框架库都添加到名为 PATH 的系统变量中，如下所示：..;C:\wamp\library\ZendFramework\bin\;C:\wamp\bin\php\php5 .3.10\;

现在我可以打开 cmd 并输入 zf create project quickstart，我指示它在 www. 像这样的 wamp 目录：

```
C:\wamp
   - www
 - quickstart
    - application
    - data
    - library
    - etc
 - ht.acces
 - index.php
   - bin
   - library
  - ZendFramework
      - bin
      - library
      - etc.
   - logs
   - tools
   - etc. 
```

现在开始有趣的部分。互联网上的所有指南都告诉我，我应该在 Windows 版本的 include_path 的 php.ini 中的 ZendFramework 文件夹中包含库文件夹的位置：“C:\wamp\library\ZendFramework\library”。

现在有趣的部分是没有人提到确切的 php.ini 文件！其中有 2 个，因为你们大多数人都知道，一个在 php 目录中，一个在 apache 目录中。

所以我提出了我的问题的第一部分，我需要哪个？

紧随其后的是第 2 部分，如何正确设置正确运行文件夹 C:\wamp\www\quickstart 中的 zend 应用程序所需的虚拟主机。

据我所知，我需要更改文件夹 C:\wamp\bin\Apache2.2.21\conf\ 中的文件 httpd.conf 文件

我需要添加一些内容

```
<VirtualHost 127.0.0.1>
     ServerName quickstart
     DocumentRoot "c:\wamp\www\quickstart\public"
    <Directory "c:\wamp\www\quickstart\public">
     AllowOveride all
     Order Allow,Deny
     Allow from all
    <\directory>
<\VirtualHost> 
```

然后在这样做之后，我需要更改目录 c:\windows\system32\drivers\etc 中的主机文件。然而，那时我完全迷失了。我的主机文件如下所示：

```
 --- standard commented wall of text ---

127.0.0.1       localhost 
```

在这一点上，我唯一知道的似乎接近它的是我需要添加以下行：

```
127.0.0.1       localhost quickstart 
```

或类似的规定。

那么有没有人有关于 Zend Framework 的经验可以为我提供答案？这将是非常appriciated :)

比约恩 -

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:16:06.810

首先，我很确定您需要更改以进行 Web 显示的 php.ini 是 apache 文件夹中的那个。（自从我使用 WAMP 以来已经有一段时间了）。

接下来不要在您的 apache 配置 httpd.conf 中构建您的虚拟主机，而是在 httpd-vhosts.conf 中构建您的虚拟主机。（您不想意外破坏 apache），
您在 url 时设置虚拟主机的方式看起来像`http:quickstart/`
这两个链接将有所帮助：

[设置 Apache 虚拟主机](http://apptools.com/phptools/virtualhost.php)
[Zend 服务器虚拟主机](http://blog.srmklive.com/2010/12/27/how-to-create-virtual-hosts-using-zend-server-ce/)

使用虚拟主机的关键之一是记住重做 localhost，这样它就不会消失。

使用 Windows 主机文件，请记住它必须在管理员模式下进行编辑，并且您可以在同一号码上拥有多个主机，这是一个示例：

```
# localhost name resolution is handled within DNS itself.
    127.0.0.1       localhost
#   ::1             localhost
    127.0.0.1       iam.local
    127.0.0.1       zfcms.local
    127.0.0.1       home.local
    127.0.0.1       places.local
    127.0.0.1       RentAFlat.local
    127.0.0.1       zf2-tutorial.local
    127.0.0.1       mp3.local
    127.0.0.1       quickstart 
```

以及来自 httpd-vhosts.conf 的示例，注意：localhost 是第一个虚拟主机......这很重要。

```
<VirtualHost *:80>
    DocumentRoot "C:\Zend\Apache2/htdocs"
    ServerName localhost
</VirtualHost>
<VirtualHost *:80>
    DocumentRoot "C:\www\iam\public"
    ServerName iam.local
    ErrorLog "C:\Zend\ZendServer\logs\iam.local.log"
    <directory "C:\www\iam">
    Options Indexes FollowSymlinks
    AllowOverride all
    Order Deny,Allow
    Deny from all
    Allow from 127.0.0.1
    </directory>
</VirtualHost> 
```

我希望这有帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:57:37.843

看起来你失踪了（首先）

```
<VirtualHost 127.0.0.1>

   ServerName quickstart
   (...)
<\VirtualHost> 
```

# windows - 在线程中调用 SHGetFileInfo 以避免 UI 冻结

> ID：10105518
> 
> 赞同：6
> 
> 时间：2012-04-11T12:03:37.150
> 
> 标签：windows, multithreading, .net-4.0, shell32

在 .NET 4.0 应用程序 (WPF) 中，我们`SHGetFileInfo`用于获取目录树的外壳图标​​。由于在某些情况下这需要相当长的时间（即对于无法访问的网络驱动器或软盘驱动器），我们希望在线程中执行此操作，然后在读入图标时更新图标。

调用基本相同，现在只是在一个线程内执行。因为有人说必须要有线程才能`STA`工作，所以我们使用Thread而不是ThreadPool进行测试，结果是一样的。使用`ThreadPool`也没有用。

`SHGetFileInfo`成功（返回 1），但结构中的 hIcon 成员为零。

```
IntPtr GetIcon(string name)
{
    Shell32.SHFILEINFO shfi = new Shell32.SHFILEINFO();
    uint flags = Shell32.SHGFI_ICON | Shell32.SHGFI_USEFILEATTRIBUTES | Shell32.SHGFI_SMALLICON;

    Shell32.SHGetFileInfo(
        name, System.IO.Directory.Exists(name) ? Shell32.FILE_ATTRIBUTE_DIRECTORY : Shell32.FILE_ATTRIBUTE_NORMAL,
        ref shfi, 
        (uint) System.Runtime.InteropServices.Marshal.SizeOf(shfi), 
        flags );
    return shfi.hIcon;
} 
```

相同的代码在 GUI 线程中运行良好。必须做什么才能使函数从单独的线程中工作，或者在不阻塞 GUI 线程的情况下使其工作？

* * *

更新：围绕这个的代码基本上是这样的：

```
var thread = new System.Threading.Thread(() => {
    var result = GetIcon("C:\\");
    // ... do something with the result
});
thread.SetApartmentState(System.Threading.ApartmentState.STA);
thread.Start(); 
```

如果只保留线程委托中的行，则它可以正常工作（当然是在 GUI 线程上）。

* * *

更新：现在，我们只是调用`SHGetFileInfo`它来使其工作。这样做的好处是解决了最初的问题（在加载所有图标之前，不会显示带有文件视图的页面），尽管这意味着页面对于每个图标都挂起。但至少用户现在可以看到正在发生的事情。我们仍在寻找问题的实际解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T13:02:49.227

刚刚成功地得到了像这样的工作。它以前在 Visual Studio 之外运行时曾严重崩溃。在此之前，我们经常取回默认图标，而不是文件类型的正确图标（因为我们追求的是文件图标，而不是目录图标）。

要考虑的因素的摘要。

*   如前所述，与 Shell 交互需要使用 STA 线程来泵送消息。BackgroundWorker 在这里是不够的。
*   初始化 SHFILEINFO 时，**将两个字符串属性（显示名称和类型名称）都设置为 string.Empty**。这在大多数示例中都没有显示，但未能做到这一点会导致我们崩溃。（在调试模式下，这意味着我们返回的第一个图标是错误的，这可能与您的问题相同。）
*   检查您的互操作声明是否正确。例如，`SHFILEINFO`类应该有一个`[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode, Pack = 4)]`属性。

# 用于 STA 线程上的后台任务的 TaskScheduler

我们正在使用任务并行库，因此需要一个可以在合适的后台线程上安排工作的 TaskScheduler。以下代码示例适用于公开可用于此目的的 TaskScheduler 属性的类。

请注意，在我们的应用程序的整个生命周期中，我们有一个此类的单个实例，因此我们没有实现 IDisposable。如果你想创建/销毁这些，你需要处理它。

```
namespace MyNamespace
{
    using System;
    using System.ComponentModel.Composition;
    using System.Threading;
    using System.Threading.Tasks;
    using System.Windows;
    using System.Windows.Threading;

    /// <summary>
    /// Exposes a <see cref="TaskScheduler"/> that schedules its work on a STA background thread.
    /// </summary>
    [Export]
    public class StaTaskSchedulerSource
    {
        /// <summary>
        /// A window that is used for message pumping.
        /// </summary>
        private Window window;

        /// <summary>
        /// Thread on which work is scheduled.
        /// </summary>
        private Thread thread;

        /// <summary>
        /// The <see cref="TaskScheduler"/> exposed by this class.
        /// </summary>
        private TaskScheduler taskScheduler;

        /// <summary>
        /// Initializes a new instance of the <see cref="StaTaskSchedulerSource"/> class.
        /// </summary>
        public StaTaskSchedulerSource()
        {
            using (ManualResetEvent re = new ManualResetEvent(false))
            {
                this.thread = new Thread(
                    () =>
                    {
                        this.window = new Window();

                        re.Set();

                        Dispatcher.Run();
                    });

                this.thread.IsBackground = true;
                this.thread.SetApartmentState(ApartmentState.STA);

                this.thread.Start();

                re.WaitOne();
            }

            this.window.Dispatcher.Invoke(
                new Action(
                    () =>
                    {
                        this.taskScheduler = TaskScheduler.FromCurrentSynchronizationContext();
                    }));
        }

        /// <summary>
        /// Gets a <see cref="TaskScheduler"/> that schedules work on a background STA
        /// thread.
        /// </summary>
        public TaskScheduler TaskScheduler
        {
            get
            {
                return this.taskScheduler;
            }
        }
    }
} 
```

当然，这整个事情只是使用一个调度程序来调用另一个线程上的调用。这可能有点慢。因此，如果处理许多图标，最好将它们批量处理。此外，我们缓存了我们已经检索到的图标，因此我们第二次不需要使用 Win Shell。

# 安全图标句柄

您可能还会发现以下用于图标句柄的包装器很有用。它源自[SafeHandle](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.safehandle.aspx)并确保您的图标在任何情况下都被正确销毁。

```
namespace UnmanagedResourceLib
{
    using System;
    using System.Runtime.ConstrainedExecution;
    using System.Runtime.InteropServices;
    using System.Security;
    using System.Security.Permissions;
    using Microsoft.Win32.SafeHandles;

    /// <summary>
    /// A <see cref="SafeHandle"/> implementation for HICON icon handles.
    /// </summary>
    [SecurityPermission(SecurityAction.InheritanceDemand, UnmanagedCode = true)]
    [SecurityPermission(SecurityAction.Demand, UnmanagedCode = true)]
    internal class SafeIconHandle : SafeHandleZeroOrMinusOneIsInvalid
    {
        /// <summary>
        /// Prevents a default instance of the <see cref="SafeIconHandle"/> class from being created.
        /// </summary>
        private SafeIconHandle()
            : base(true)
        {
        }

        /// <summary>
        /// Initializes a new instance of the <see cref="SafeIconHandle"/> class.
        /// </summary>
        /// <param name="nativeHandle">The HICON to wrap.</param>
        /// <param name="ownsHandle"><c>true</c> if finalization of this object should cause the icon to be destroyed.</param>
        public SafeIconHandle(IntPtr nativeHandle, bool ownsHandle)
            : base(ownsHandle)
        {
            this.handle = nativeHandle;
        }

        /// <inheritdoc />
        [ReliabilityContract(Consistency.WillNotCorruptState, Cer.MayFail)]
        override protected bool ReleaseHandle()
        {
            return NativeMethods.DestroyIcon(this.handle);
        }

        /// <summary>
        /// Exposes Windows API call to destroy an icon.
        /// </summary>
        [SuppressUnmanagedCodeSecurity]
        internal static class NativeMethods
        {
            /// <summary>
            /// Destroys an icon and frees any memory the icon occupied. 
            /// </summary>
            /// <param name="hIcon">A handle to the icon to be destroyed.</param>
            /// <returns><c>true</c> if the function succeeds.</returns>
            [System.Runtime.InteropServices.DllImport("user32.dll", SetLastError = true)]
            public static extern bool DestroyIcon(IntPtr hIcon);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T20:23:35.963

我不认为有任何问题。您不需要使用 SetApartmentState。根据[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762179%28v=vs.85%29.aspx)，您确实需要调用 CoInitialize 或 OleInitialize，但我认为 WPF 无论如何都应该为您调用它。

我在下面创建了一个简单的 WPF 应用程序。这工作正常。SHGetFileInfo 在与 UI 线程不同的线程上运行，并且 shfi.hIcon 不为零。

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        Debug.WriteLine(Thread.CurrentThread.ManagedThreadId);
        Task<IntPtr> task = Task.Factory.StartNew(() => GetIcon("C:\\"));
    }

    private IntPtr GetIcon(string name)
    {
        Debug.WriteLine(Thread.CurrentThread.ManagedThreadId);

        var shfi = new Shell32.SHFILEINFO();
        uint flags = Shell32.SHGFI_ICON | Shell32.SHGFI_USEFILEATTRIBUTES | Shell32.SHGFI_SMALLICON;

        Shell32.SHGetFileInfo(
            name,
            Directory.Exists(name) ? Shell32.FILE_ATTRIBUTE_DIRECTORY : Shell32.FILE_ATTRIBUTE_NORMAL,
            ref shfi,
            (uint) Marshal.SizeOf(shfi),
            flags);

        Debug.WriteLine(shfi.hIcon);

        return shfi.hIcon;
    }
}

public class Shell32
{
    public const int MAX_PATH = 256;

    // Browsing for directory.
    public const uint BIF_RETURNONLYFSDIRS = 0x0001;
    public const uint BIF_DONTGOBELOWDOMAIN = 0x0002;
    public const uint BIF_STATUSTEXT = 0x0004;
    public const uint BIF_RETURNFSANCESTORS = 0x0008;
    public const uint BIF_EDITBOX = 0x0010;
    public const uint BIF_VALIDATE = 0x0020;
    public const uint BIF_NEWDIALOGSTYLE = 0x0040;
    public const uint BIF_USENEWUI = (BIF_NEWDIALOGSTYLE | BIF_EDITBOX);
    public const uint BIF_BROWSEINCLUDEURLS = 0x0080;
    public const uint BIF_BROWSEFORCOMPUTER = 0x1000;
    public const uint BIF_BROWSEFORPRINTER = 0x2000;
    public const uint BIF_BROWSEINCLUDEFILES = 0x4000;
    public const uint BIF_SHAREABLE = 0x8000;

    public const uint SHGFI_ICON = 0x000000100; // get icon
    public const uint SHGFI_DISPLAYNAME = 0x000000200; // get display name
    public const uint SHGFI_TYPENAME = 0x000000400; // get type name
    public const uint SHGFI_ATTRIBUTES = 0x000000800; // get attributes
    public const uint SHGFI_ICONLOCATION = 0x000001000; // get icon location
    public const uint SHGFI_EXETYPE = 0x000002000; // return exe type
    public const uint SHGFI_SYSICONINDEX = 0x000004000; // get system icon index
    public const uint SHGFI_LINKOVERLAY = 0x000008000; // put a link overlay on icon
    public const uint SHGFI_SELECTED = 0x000010000; // show icon in selected state
    public const uint SHGFI_ATTR_SPECIFIED = 0x000020000; // get only specified attributes
    public const uint SHGFI_LARGEICON = 0x000000000; // get large icon
    public const uint SHGFI_SMALLICON = 0x000000001; // get small icon
    public const uint SHGFI_OPENICON = 0x000000002; // get open icon
    public const uint SHGFI_SHELLICONSIZE = 0x000000004; // get shell size icon
    public const uint SHGFI_PIDL = 0x000000008; // pszPath is a pidl
    public const uint SHGFI_USEFILEATTRIBUTES = 0x000000010; // use passed dwFileAttribute
    public const uint SHGFI_ADDOVERLAYS = 0x000000020; // apply the appropriate overlays
    public const uint SHGFI_OVERLAYINDEX = 0x000000040; // Get the index of the overlay

    public const uint FILE_ATTRIBUTE_DIRECTORY = 0x00000010;
    public const uint FILE_ATTRIBUTE_NORMAL = 0x00000080;

    [DllImport("Shell32.dll")]
    public static extern IntPtr SHGetFileInfo(
        string pszPath,
        uint dwFileAttributes,
        ref SHFILEINFO psfi,
        uint cbFileInfo,
        uint uFlags
        );

    #region Nested type: BROWSEINFO

    [StructLayout(LayoutKind.Sequential)]
    public struct BROWSEINFO
    {
        public IntPtr hwndOwner;
        public IntPtr pidlRoot;
        public IntPtr pszDisplayName;
        [MarshalAs(UnmanagedType.LPTStr)] public string lpszTitle;
        public uint ulFlags;
        public IntPtr lpfn;
        public int lParam;
        public IntPtr iImage;
    }

    #endregion

    #region Nested type: ITEMIDLIST

    [StructLayout(LayoutKind.Sequential)]
    public struct ITEMIDLIST
    {
        public SHITEMID mkid;
    }

    #endregion

    #region Nested type: SHFILEINFO

    [StructLayout(LayoutKind.Sequential)]
    public struct SHFILEINFO
    {
        public const int NAMESIZE = 80;
        public IntPtr hIcon;
        public int iIcon;
        public uint dwAttributes;
        [MarshalAs(UnmanagedType.ByValTStr, SizeConst = MAX_PATH)] public string szDisplayName;
        [MarshalAs(UnmanagedType.ByValTStr, SizeConst = NAMESIZE)] public string szTypeName;
    };

    #endregion

    #region Nested type: SHITEMID

    [StructLayout(LayoutKind.Sequential)]
    public struct SHITEMID
    {
        public ushort cb;
        [MarshalAs(UnmanagedType.LPArray)] public byte[] abID;
    }

    #endregion
}

/// <summary>
/// Wraps necessary functions imported from User32.dll. Code courtesy of MSDN Cold Rooster Consulting example.
/// </summary>
public class User32
{
    /// <summary>
    /// Provides access to function required to delete handle. This method is used internally
    /// and is not required to be called separately.
    /// </summary>
    /// <param name="hIcon">Pointer to icon handle.</param>
    /// <returns>N/A</returns>
    [DllImport("User32.dll")]
    public static extern int DestroyIcon(IntPtr hIcon);
} 
```

# java - 如何更改存储为像素值的图像的对比度和亮度

> ID：10105521
> 
> 赞同：5
> 
> 时间：2012-04-11T12:03:52.273
> 
> 标签：java, image-processing, bufferedimage

我有一个存储为像素值数组的图像。我希望能够对此图像应用亮度或对比度滤镜。有什么简单的方法或算法可以用来实现这一点。

这是我的代码...

```
 PlanarImage img=JAI.create("fileload","C:\\aimages\\blue_water.jpg");
   BufferedImage image = img.getAsBufferedImage();

   int w = image.getWidth();
   int h = image.getHeight();
   int k = 0;

   int[] sbins = new int[256];
   int[] pixel = new int[3];

   Double d = 0.0;
   Double d1;
   for (int x = 0; x < bi.getWidth(); x++) {
       for (int y = 0; y < bi.getHeight(); y++) {
           pixel = bi.getRaster().getPixel(x, y, new int[3]);
           k = (int) ((0.2125 * pixel[0]) + (0.7154 * pixel[1]) + (0.072 * pixel[2]));
           sbins[k]++;
       }
   } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T13:20:48.897

我的建议是使用 Java 的内置方法来调整亮度和对比度，而不是尝试自己调整像素值。做这样的事情似乎很容易......

```
float brightenFactor = 1.2f

PlanarImage img=JAI.create("fileload","C:\\aimages\\blue_water.jpg");
BufferedImage image = img.getAsBufferedImage();

RescaleOp op = new RescaleOp(brightenFactor, 0, null);
image = op.filter(image, image); 
```

浮点数是亮度的百分比。在我的示例中，它将亮度增加到现有值的 120%（即比原始图像亮 20%）

有关类似问题，请参阅此链接... [在 Java 中调整 BufferedImage 的亮度和对比度](https://stackoverflow.com/questions/3433275/adjust-brightness-and-contrast-of-bufferedimage-in-java)

See this link for an example application... [http://www.java2s.com/Code/Java/Advanced-Graphics/BrightnessIncreaseDemo.htm](http://www.java2s.com/Code/Java/Advanced-Graphics/BrightnessIncreaseDemo.htm)

# c++ - 类崩溃编译器中的 MSVC 2010 模板化映射

> ID：10105524
> 
> 赞同：2
> 
> 时间：2012-04-11T12:03:57.757
> 
> 标签：c++, class, templates, visual-c++, map

为什么以下代码会使编译器崩溃？

```
#include <iostream>
#include <string>
#include <map>

class test{
public:
    template <typename T>
    std::map<std::string, T> stuff;
};

int main(int argc, char* argv[])
{
    test peanuts;
    return 0;
} 
```

编译器中是否存在错误或什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:11:43.073

您试图拥有一个模板化变量，您只能拥有类模板或函数模板。如果它使编译器崩溃，那么*这*是一个错误，但它不是有效的 C++。你可以做类似的事情

```
 class test{
    public:
        template <typename T>
        class Map {
        public:
            std::map<std::string, T> stuff;
        };
    }; 
```

反而。

# mysql - 如何显示唯一的日期和 count() 记录 MySQL？

> ID：10105525
> 
> 赞同：1
> 
> 时间：2012-04-11T12:03:58.803
> 
> 标签：mysql, count

我有以下结构和记录的表。

**表 t1**

```
+------+-------------+---------------------+
| name |  f_inserted | timestamp           |
+------+-------------+---------------------+
| AAA  |   1         | 2012-04-10 06:44:19 |
| BBB  |   0         | 2012-04-10 08:44:19 |
| AAA  |   1         | 2012-04-10 09:44:19 |
| CCC  |   1         | 2012-04-11 09:48:19 |
+------+-------------+---------------------+ 
```

我想显示唯一的日期和计数 f_inserted where f_inserted = 1

在下表中，我希望结果为 -

**结果**

```
+-------------+------+
| date        |  cnt |
+-------------+------+
| 2012-04-10  |   2  | 
| 2012-04-11  |   1  |
+------+------+------+ 
```

提前致谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T12:07:13.837

这是一个基本的[MySQL GROUP BY](http://dev.mysql.com/doc/refman/5.5/en/group-by-modifiers.html)查询。唯一棘手的部分是您的时间戳有一个 DATETIME，而您只需要一个日期。使用[DATE() 函数](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_date)进行转换。

```
SELECT date(`timestamp`) as `date`, COUNT(*) from t1
WHERE f_inserted = 1
GROUP BY date(`timestamp`) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T12:11:32.110

这将给出您想要的结果 -

```
SELECT date(`timestamp`) as `date`,
COUNT(*) as cnt 
from table_name
WHERE f_inserted = 1
GROUP BY date(`timestamp`) 
order by cnt desc 
```

# javascript - Google Apps 脚本查找函数调用者 ID

> ID：10105526
> 
> 赞同：2
> 
> 时间：2012-04-11T12:03:58.817
> 
> 标签：javascript, google-apps-script

我有一个 Google Apps 脚本，它可以动态生成按钮并为每个 ClickHandler 分配一个 ClickHandler，然后再调用一个函数。我的问题是，因为每个按钮都调用相同的函数，所以我无法找到一种方法来识别它们中的哪一个实际进行了调用。这是一个代码示例：

```
var handler = app.createServerHandler("buttonAction");
for (i=1,...) {
  app.createButton(...).setId(i).addClickHandler(handler);
}
function buttonAction() {
  //How do I know what button made the call?
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T19:28:58.970

另一种选择是使用 e.parameter.source 值来确定触发 serverHandler 被调用的元素的 ID。

这是一个例子：

```
function doGet(e) {
  var app = UiApp.createApplication();
  var handler = app.createServerHandler("buttonAction");

  for (var i = 0; i < 4; i++) {
    app.add(app.createButton('button'+i).setId(i).addClickHandler(handler));
  }
  return app;
}

function buttonAction(e) {
  var app = UiApp.getActiveApplication();
  Logger.log(e.parameter.source);    
} 
```

e.parameter.source 将包含元素的 ID，然后您可以使用它来调用 app.getElementById(e.parameter.source) ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T14:07:50.503

我有同样的问题。它使用标签工作。

例如

### 设置

```
var button = addButton(app
                    ,panel
                    ,"buttonActiveTrelloProjects_" + i.toString()
                    ,appVars.buttonWidth() + "px"
                    ,appVars.level2ButtonHeight().toString() + "px"
                    ,false
                    ,false
                    ,"Trello"
                    ,"buttonActiveTrelloProjectsHandler"
                       ,(appVars.buttonLhsGap() * buttonCntr) + (appVars.buttonWidth() * (buttonCntr - 1 )   + 9)
                    ,(appVars.level2ButtonTopGap() * 34) 
                    ,3
                    ,"button");
      button.setTag(projectName ); 
```

### 利用

```
function buttonActiveProjectsChartHandler_1(button){

...

buttonTag        = getButtonTag(button);
chartType        = buttonTag.split(";")[1];
activeProject    = buttonTag.split(";")[0]; 

...

}

function getButtonTag(button){
var jsonButton = JSON.stringify(button);
  var source = button.parameter.source;
  var tagPtr = source + "_tag";
  return button.parameter[tagPtr];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T12:26:50.847

You could create multiple handlers, each for one button:

```
for (i=1,...) {
  var handler = app.createServerHandler("buttonAction" + i);
  app.createButton(...).setId(i).addClickHandler(handler);
}

function buttonAction1() {
  // code to handle button 1
}

function buttonAction2() {
  // code to handle button 2
}

function buttonAction... 
```

I wouldn't recommend of having these sort of "anonymous" action handlers though, as you might be having troubles later in remembering which actionX does what.

(e.g. have a different approach, w/o a loop, or prepare a dictionary-like/array object of meaningful handler names before that loop.)

OTOH, you could use event object argument provided to your callback function:

```
function buttonAction(event) {
  // use event object here to identify where this event came from
} 
```

The thing is the above `event` object properties depends on where your callback is being called from. For instance, if it were a submit button where you had a Form, then you could access parameters submitted by that from like so: `event.parameter.myParamName`. See [code sample here](https://developers.google.com/apps-script/guide_user_interfaces#UIUpdate).

So, if you have a variable number of buttons, you could use a hidden element + the button:

```
for (i=1,...) {
  var hiddenAction = app.createHidden("action", "action"+i);

  var handler = app.createServerHandler("buttonAction");
  handler.addCallbackElement(hiddenAction);

  var btn = app.createButton("Button text", handler);

  // you'll need to add both btn and hidden field
  // to the UI
  app.add(hiddenAction);
  app.add(btn);
} 
```

Then, your `buttonAction` might look like this:

```
function buttonAction(e) {
  var action = e.parameter.action;
  // do something based on action value here
  // which will be one of "action1", "action2", ...
} 
```

The above is a copy & paste from [Hidden class](https://developers.google.com/apps-script/class_hidden) sample.

The above might not work out of the box, but you get the idea: create a hidden element that holds the info you need in your callback, and attach that hidden to your server handler. You could even create multiple hidden elements or a Form panel.

# c# - DataGridView 单元格类型

> ID：10105529
> 
> 赞同：2
> 
> 时间：2012-04-11T12:04:27.673
> 
> 标签：c#, datagridview

我有带有复选框列的datagridview，但我希望某些列单元格是文本框单元格。
一列中是否可以有多种单元格类型？如果是，那么如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T12:10:39.463

有两种方法可以做到这一点：

1.  将 a`DataGridViewCell`转换为存在的特定单元格类型。例如，将 a 转换`DataGridViewTextBoxCell`为`DataGridViewComboBoxCell`类型。
2.  创建一个控件并将其添加到 的控件集合中`DataGridView`，设置其位置和大小以适合要作为宿主的单元格。

请参阅下面的示例代码，其中说明了这些技巧：

```
private void Form5_Load(object sender, EventArgs e)
{
   DataTable dt = new DataTable();
   dt.Columns.Add("name");
   for (int j = 0; j < 10; j++) { dt.Rows.Add(""); }
   this.dataGridView1.DataSource = dt;
   this.dataGridView1.Columns[0].Width = 200;

   // First method : Convert to an existed cell type such ComboBox cell, etc 
   DataGridViewComboBoxCell ComboBoxCell = new DataGridViewComboBoxCell();
   ComboBoxCell.Items.AddRange(new string[] { "aaa","bbb","ccc" });
   this.dataGridView1[0, 0] = ComboBoxCell;
   this.dataGridView1[0, 0].Value = "bbb";

   DataGridViewTextBoxCell TextBoxCell = new DataGridViewTextBoxCell();
   this.dataGridView1[0, 1] = TextBoxCell;
   this.dataGridView1[0, 1].Value = "some text";

   DataGridViewCheckBoxCell CheckBoxCell = new DataGridViewCheckBoxCell();
   CheckBoxCell.Style.Alignment = DataGridViewContentAlignment.MiddleCenter;
   this.dataGridView1[0, 2] = CheckBoxCell;
   this.dataGridView1[0, 2].Value = true;

   // Second method : Add control to the host in the cell
   DateTimePicker dtp = new DateTimePicker();
   dtp.Value = DateTime.Now.AddDays(-10);
   //add DateTimePicker into the control collection of the DataGridView
   this.dataGridView1.Controls.Add(dtp);
   //set its location and size to fit the cell
   dtp.Location = this.dataGridView1.GetCellDisplayRectangle(0, 3,true).Location;
   dtp.Size = this.dataGridView1.GetCellDisplayRectangle(0, 3,true).Size;
} 
```

[从这里](http://social.msdn.microsoft.com/Forums/en-US/winformsdesigner/thread/63ddb457-f769-44db-87cc-9e88e74929e8/)引用。

# assembly - 程序计数器？

> ID：10105530
> 
> 赞同：7
> 
> 时间：2012-04-11T12:04:29.417
> 
> 标签：assembly, cpu, mips, cpu-registers, cpu-architecture

如果我理解正确，程序计数器指向要执行的指令的地址，在大多数情况下，您将程序计数器加四以前进到下一条指令地址。但是假设您有一个程序计数器指向内存中的一个单词（例如单词 15），并且您想前进到下一条指令，您是否应该将 4 直接添加到 15 以获得下一条指令？任何解释将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T12:07:06.613

那东西叫做指令指针。一旦处理器解码了当前指令，它就会发现它占用了多少字节，并知道要向当前指令指针值添加多少字节以前进到下一条指令，这样当当前指令被执行时，处理器就知道下一步该做什么。

因此，例如，处理器从存储值 15 的指令指针开始，如您的示例中一样 - 它看起来在该地址发生了什么，恰好有一条指令占用 5 个字节，没问题 - 它在当前值上加了 5，这产生 20，因此指令指针现在存储值 20，然后处理器执行当前指令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T12:13:42.173

你永远不会直接推进程序计数器——CPU通过执行你的程序来为你做这件事。作为程序员，您通过执行各种跳转指令（有条件的、无条件的、跳转到子程序等）来操作程序计数器。当您需要向程序计数器添加偏移量时，一种特殊情况是在与位置无关的代码中分支时。但是，即使在这种情况下，您也不会将指令的大小添加到程序计数器中：相反，您可以通过执行“分支到相对地址”来提供要跳转到的位置的偏移量。

# c# - 在带有锚点的面板中居中用户控件会删除滚动条吗？

> ID：10105535
> 
> 赞同：1
> 
> 时间：2012-04-11T12:04:42.840
> 
> 标签：c#, winforms, user-controls, panel, anchor

在我当前的项目中，当我将我的添加`usercontrol`到. 我设法使用以下代码将其添加到面板的中间：`panel``splitcontainer`

```
 ucFactuur ucFactuur = new ucFactuur();

        ucFactuur.Location = new Point(
           splitContainer1.Panel2.ClientSize.Width / 2 - ucFactuur.Size.Width / 2,
           splitContainer1.Panel2.ClientSize.Height / 2 - ucFactuur.Size.Height / 2);
        ucFactuur.Anchor = AnchorStyles.None;

        splitContainer1.Panel2.Controls.Add(ucFactuur); 
```

但是现在我的滚动条不见了，当我删除它时它就在那里，`AnchorStyles.None`但是当我调整窗口大小时它不会停留在中间（它处于固定位置）。

![没有滚动条](../Images/4e846d3ea6a12168439177a6ee224786.png)

我不确定如何解决这个问题，也找不到任何其他方法来动态居中我的用户控件。

谢谢，托马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:48:26.843

`Anchoring.None`在这种情况下不起作用，因为它仅在没有滚动条时才起作用。但是一旦有了滚动条，您就不再希望控件居中，您需要将它定位在滚动值上。

换句话说，我认为您必须自己处理调整大小：

```
private void DoResize(object sender, EventArgs e) {
  splitContainer1.Panel2.AutoScrollMinSize = ucFactuur.Size;

  if (ucFactuur.Width < splitContainer1.Panel2.ClientSize.Width) {
    ucFactuur.Left = splitContainer1.Panel2.ClientSize.Width / 2 -
                     ucFactuur.Width / 2;
  } else {
    ucFactuur.Left = splitContainer1.Panel2.AutoScrollPosition.X;
  }

  if (ucFactuur.Height < splitContainer1.Panel2.ClientSize.Height) {
    ucFactuur.Top = splitContainer1.Panel2.ClientSize.Height / 2 -
                    ucFactuur.Height / 2;
  } else {
    ucFactuur.Top = splitContainer1.Panel2.AutoScrollPosition.Y;
  }
} 
```

然后您的设置将更改为：

```
ucFactuur ucFactuur = new ucFactuur();
ucFactuur.AutoSize = true;
ucFactuur.Resize += DoResize;
splitContainer1.Panel2.Resize += DoResize;
splitContainer1.Panel2.AutoScroll = false;
splitContainer1.Panel2.Controls.Add(ucFactuur); 
```

# flash - 加载视频缩略图时的跨域问题 (Flash)

> ID：10105544
> 
> 赞同：2
> 
> 时间：2012-04-11T12:05:12.370
> 
> 标签：flash, facebook-graph-api, video, thumbnails, cross-domain-policy

我正在尝试在 Flash 应用程序中显示一些 Facebook 视频缩略图，我尝试加载的所有视频缩略图似乎都托管在[https://fbcdn-vthumb-a.akamaihd.net](https://fbcdn-vthumb-a.akamaihd.net)上。

但是无法加载[crossdomain.xml （拒绝访问）。](https://fbcdn-vthumb-a.akamaihd.net/crossdomain.xml)有没有办法解决这个问题？（除了通过代理加载图像）。也许可以使用替代网址？

编辑：这是一个 Facebook 错误，[已被报告](https://developers.facebook.com/bugs/270901383004607)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:18:29.833

尝试在 Loader 中使用 LoaderContext 并将 checkPolicyFile 标志设置为 true：

```
var lc:LoaderContext = new LoaderContext();
lc.checkPolicyFile = true;

var loader:Loader = new Loader();
loader.load(new URLRequest("https://url.com/image/path/name.jpg"), lc); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:21:19.827

Akamai CDN 上的跨域策略文件存在一些已知问题。这是对与您的类似问题的深入研究以及解决方案：

[http://jessewarden.com/2009/03/handling-crossdomainxml-and-302-redirects-using-netstream.html](http://jessewarden.com/2009/03/handling-crossdomainxml-and-302-redirects-using-netstream.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T14:42:13.860

我最终使用代理来加载拇指，所以跨域没有问题，我刚刚检查过，跨域文件现在是正确的。

# php - 如何更改 wordpress 中的日历语言？

> ID：10105545
> 
> 赞同：1
> 
> 时间：2012-04-11T12:05:12.950
> 
> 标签：php, wordpress, calendar, widget

搜索后，我找不到解决以下问题的适当方法。

激活日历小部件后，它找不到更改语言的方法（而不是英语月份有法语月份，也适用于“SSFTWT M”）。要处理 wrpdress 文件夹中的哪个文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:11:48.607

我猜你在英语中找到的大部分内容都是日期：月份和日期的名称。最初我认为“非翻译”问题与使用 date() 函数而不是可以本地化的不同函数有关。然而，解决方案“更简单”。过程：

1) 编辑位于插件根目录的“the-events-calendar.class.php”文件。

2) 搜索“public function monthNames( $short = false )”并翻译 $months 数组所取的值，例如：

$months = array('Jan' => __('Ene', $this->pluginDomain),

$months = array('January' => __('Enero', $this->pluginDomain),

仅更改值“Ene”、“Enero”而不是应该继续存在的数组的键：“Jan”、“January”...

保存文件并上传到您安装的 WordPress 插件的相应根目录。

关于 .po 和 .mo 文件中其他一些没有翻译的词，我推荐阅读这篇 WordPress 文档。[http://codex.wordpress.org/Translating_WordPress](http://codex.wordpress.org/Translating_WordPress)

干杯!

# javascript - javascript setInterval json 请求

> ID：10105548
> 
> 赞同：0
> 
> 时间：2012-04-11T12:05:20.907
> 
> 标签：javascript, jquery, ajax, json, setinterval

下面是 JavaScript 代码，它应该每 1 分钟计数一次，但以某种方式每 20 秒计数一次。

```
var tim = setInterval(doCount, 60000);
var count = 0;
var currency = "R$";
var stopit = 0;
function doCount() {
   stopit++;
   if (stopit > 30) {
      $.ajax({
         url: "URL",
         cache: false,
         dataType: "json",
         success: function (json) {
            $.get("URL");
         },
         error: function (e, xhr) {

         }
      });
      return false;
   }
   count += 1.99;
   $("#number").html(
      currency +  parseFloat(count).toFixed(2).replace(/\./g, ',')
   );
   $.post("URL"});
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:29:59.943

只是给你一个选择 - 看看`jquery`插件[doTimeout](http://benalman.com/projects/jquery-dotimeout-plugin/)

特别是看看[投票示例](http://benalman.com/code/projects/jquery-dotimeout/examples/delay-poll/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:15:25.067

尝试将 doCount 包装在这样的函数中

```
var tim = setInterval(function() {
      doCount();
}, 60000); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-11T12:09:33.443

如果我很好地理解了您的问题，您只需将 60000 毫秒更改为 20000。（20 秒）

```
var tim = setInterval(doCount, 20000); 
```

# java - 使用移动网络时http连接冻结

> ID：10105552
> 
> 赞同：0
> 
> 时间：2012-04-11T12:05:32.570
> 
> 标签：java, blackberry

我正在尝试在黑莓平台上发出 http 请求，我的问题是：当我通过 WiFi 建立连接时效果很好，但是当我使用移动网络时它不起作用并且连接冻结

这是我的代码

```
 public static String getHttpUTFResponse(String url) {
    url = addConnSuffex(url);
    HttpConnection connection = null;
    byte responseData[] = null;
    try {
        connection = (HttpConnection) new ConnectionFactory()
                .getConnection(url).getConnection();
        int len = (int) connection.getLength();
        System.out.println(len);
        if (len != -1) {
            responseData = new byte[len];
            DataInputStream dis;
            dis = new DataInputStream(connection.openInputStream());
            dis.readFully(responseData);
            dis.close();
        }
    } catch (IOException e) {
        System.out.println("Connection Error");
    } finally {
        if (connection != null) {
            try {
                connection.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            connection = null;
        }

    }
    if (responseData != null) {
        try {
            return new String(responseData, "UTF-8");
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
            return null;
        }
    } else {
        return null;
    }
}

public static String addConnSuffex(String url) {
    ServiceBook sb = ServiceBook.getSB();
    ServiceRecord[] records = sb.findRecordsByCid("WPTCP");
    String uid = null;
    if (records == null) {
        return url;
    }
    for (int i = 0; i < records.length; i++) {
        if (records[i].isValid() && !records[i].isDisabled()) {
            if (records[i].getUid() != null
                    && records[i].getUid().length() != 0) {
                if ((records[i].getUid().toLowerCase().indexOf("wifi") == -1)
                        && (records[i].getUid().toLowerCase()
                                .indexOf("mms") == -1)) {
                    uid = records[i].getUid();
                    break;
                }
            }
        }
    }
    if (DeviceInfo.isSimulator()) {
        return url;
    }
    if (uid != null) {
        // open a WAP 2 connection
        url = url + ";deviceside=true;ConnectionUID=" + uid;
        System.out.println("**************** on conn" + url);
    } else {

        url = url + ";deviceside=true;interface=wifi";
        // Consider another transport or alternative action.
    }
    System.out.println("**************** on conn" + url);
    return url;
} 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:47:27.503

对于网络连接，TransportDetective.class 更加充分，可以解决很多与网络相关的问题。

[TransportDetective y URLFactory para configurar la conexion a web](http://ecuadorblackberry.ec/?p=425)

[建立 HTTP 或套接字连接的不同方法](http://supportforums.blackberry.com/t5/Java-Development/Different-ways-to-make-an-HTTP-or-socket-connection/ta-p/445879)

# objective-c - UIButton 受手势影响

> ID：10105555
> 
> 赞同：0
> 
> 时间：2012-04-11T12:05:43.340
> 
> 标签：objective-c, ios, uigesturerecognizer

我有一个响应手势的 UIView 并且希望在这个视图中有一个 UIButton 来响应内部的触摸。目前 UIButton 下方的手势似乎干扰了内部的触摸。

任何建议都会很棒。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T12:17:23.627

你必须用它`requireGestureRecognizerToFail:`来解决你的问题。

[看到这个](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizers/GestureRecognizers.html)。

# php - 如何将日期转换为时间戳

> ID：10105562
> 
> 赞同：-1
> 
> 时间：2012-04-11T12:06:16.180
> 
> 标签：php, mysql, timestamp

我如何将 2012-04-11 12:49:14 变成 unixtime stamp？

我努力了

```
$time = mktime("2012-04-11 12:59:14"); 
```

和

```
$time = strtotime("2012-04-11 12:59:14"); 
```

**编辑** 基本上在更新我的数据库时会添加一个看起来像这样的日期/时间。

```
2012-04-11 12:49:14 
```

我需要将其转换为 unix 时间戳，以便我可以使用我找到的“时间前”函数。

我的测试显示，

数据库输入 -> 2012-04-11 13:22:05 转换为 -> 1334143355 -> 但是当前时间 from(time()) 是 ->1334146956

我不明白为什么他们不匹配？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T12:09:00.130

该声明`$time = strtotime("2012-04-11 12:59:14");`工作得很好。

做一个

```
echo $time; 
```

在你的声明之后。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T12:38:04.457

这听起来像是时间偏移不匹配的问题（也许是夏令时）。最好全部在 PHP 中或全部在 MySQL 中完成，以避免时间偏移不匹配。

```
1334146484 - 1334142872 = 3612s = 1h 12s 
```

您应该在插入或检索数据时使用 UNIX_TIMESTAMP，具体取决于您喜欢存储为 unix 时间戳还是日期时间 -

```
INSERT INTO `table` (date_field) VALUES (UNIX_TIMESTAMP('2012-04-11 12:59:14'));

SELECT UNIX_TIMESTAMP(date_field) FROM `table`; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T12:37:35.630

我希望不同之处在于处于不同的时区。与预期结果相比，差异或多或少是 +1 小时。您需要更具体地说明您想要什么时间 - 例如您是从您的时区还是从 UTC 记录/检索时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T12:42:57.160

`$time = strtotime("2012-04-11 12:59:14");`是正确的选择。

# perl - Perl 脚本将单词从一个文件中删除到一个输出文件中

> ID：10105564
> 
> 赞同：0
> 
> 时间：2012-04-11T12:06:28.653
> 
> 标签：perl, text, split

我很确定这真的很基本。但是我不了解 Perl，只需要使用它一次。所以我很感谢你的耐心。

我正在尝试从 HTML 中的单行中删除不需要的文本：

```
 <a target="_blank"          href="http://sharepoint/sites/cerner/quickreferenceguides/Documents/EXP001_Run_Printable_TCI_List.pdf" onmouseover="return overlib('This guide outlines the process for running a printable TCI List', CAPTION, 'TCI LIST');" onmouseout="return nd();">Run Printable TCI List (<i>Revised<i>)</a> 
```

我想要留下的`Run Printable TCI List (<i>Revised</i>)`只是`</a>`. 我有大约 500 行这样的行，因为它们将来可能会改变，所以创建一个程序是有意义的。到目前为止，以下是我的 Perl 代码：

```
open (SEARK, 'C:\\HTMLsorter\\sources.txt');
open (OUTSEARK, '>C:\\HTMLsorter\\outseark.txt');
while(<SEARK>) {
  chomp;

  if ($_=~/<a target/) {
    $_ =~ s/\<i>//g;
    $_ =~ s/\<\/i>//g;
    @itemsa = split(/>/);
    @itemsb = split(/</, $itemsa[1]);
    print OUTSEARK ("$itemsb[0]\n");
  }
}
close (SEARK);
close (OUTSEARK); 
```

我相信您可以阅读此内容，但只是为了解释我正在打开一个名为的文件`sources.txt`，其中有 500 行要排序。输出文件将是`outseark.txt`. 到目前为止，它将输出：

```
Run Printable TCI List (Revised) 
```

这显然是由于针对箭头内部和周围的所有东西的分裂。任何想法如何将斜体保持在括号内？留下：

```
Run Printable TCI List (<i>Revised<i>) 
```

感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:45:57.270

```
#!/usr/bin/perl
use strict;
use warnings;

open IFH, '<myfile.txt';
open OFH, '>output.txt';

while (<IFH>) {
  if (/<a\s+target.*?>(.*?)<\/a>/i)
  {
    $_ = $1;
    s/<.*?>//g;
    print OFH "$_\n";
  }
}

close IFH;
close OFH; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:25:56.337

You could do this in one liner.

```
cat inputfile|perl -ne 'if (s#<a\s+target[^>]+>(.+?)</a>##is){print "$1\n";}'>outputfile 
```

It is working:

```
echo '<a target="_blank"          href="http://sharepoint/sites/cerner/quickreferenceguides/Documents/EXP001_Run_Printable_TCI_List.pdf" onmouseover="return overlib('This guide outlines the process for running a printable TCI List', CAPTION, 'TCI LIST');" onmouseout="return nd();">Run Printable TCI List (<i>Revised<i>)</a>
<a target="_blank"          href="http://sharepoint/sites/cerner/quickreferenceguides/Documents/EXP001_Run_Printable_TCI_List.pdf" onmouseover="return overlib('This guide outlines the process for running a printable TCI List', CAPTION, 'TCI LIST');" onmouseout="return nd();">Run Printable TCI List 1(<i>Revised<i>)</a>
<a target="_blank"          href="http://sharepoint/sites/cerner/quickreferenceguides/Documents/EXP001_Run_Printable_TCI_List.pdf" onmouseover="return overlib('This guide outlines the process for running a printable TCI List', CAPTION, 'TCI LIST');" onmouseout="return nd();">Run Printable TCI List 2(<i>Revised<i>)</a>
<a target="_blank"          href="http://sharepoint/sites/cerner/quickreferenceguides/Documents/EXP001_Run_Printable_TCI_List.pdf" onmouseover="return overlib('This guide outlines the process for running a printable TCI List', CAPTION, 'TCI LIST');" onmouseout="return nd();">Run Printable TCI List 3(<i>Revised<i>)</a>'|\
perl -ne 'if (s#<a\s+target[^>]+>(.+?)</a>##is){print "$1\n";}'

Run Printable TCI List (<i>Revised<i>)
Run Printable TCI List 1(<i>Revised<i>)
Run Printable TCI List 2(<i>Revised<i>)
Run Printable TCI List 3(<i>Revised<i>) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T16:25:32.953

您应该使用适当的 HTML 解析器，例如[`HTML::TreeBuilder`](https://metacpan.org/module/HTML%3a%3aTreeBuilder "元CPAN"). 代码不再像这个程序演示的那样复杂

```
use strict;
use warnings;

use HTML::TreeBuilder;

my $tree = HTML::TreeBuilder->new_from_file(*DATA);

print $_->as_text, "\n" for $tree->look_down(_tag => 'a', target => qr/./);

__DATA__
    <a target="_blank"          href="http://sharepoint/sites/cerner/quickreferenceguides/Documents/EXP001_Run_Printable_TCI_List.pdf" onmouseover="return overlib('This guide outlines the process for running a printable TCI List', CAPTION, 'TCI LIST');" onmouseout="return nd();">Run Printable TCI List (<i>Revised<i>)</a> 
```

**输出**

```
Run Printable TCI List (Revised) 
```

* * *

**编辑**

要在示例中的文件上使用此技术，代码如下所示

```
use strict;
use warnings;

use HTML::TreeBuilder;

my $tree = HTML::TreeBuilder->new_from_file('C:\HTMLsorter\sources.txt');

open my $out, '>', 'C:\HTMLsorter\outseark.txt' or die $!;

print $out $_->as_text, "\n" for $tree->look_down(_tag => 'a', target => qr/./); 
```

* * *

**编辑 2**

现在我更好地了解您的需求，我可以提供这种替代解决方案。它使用该[`HTML::DOM`](https://metacpan.org/module/HTML%3a%3aDOM)模块来访问 HTML 文档的*文档对象模型*，因为获得所需的结果`HTML::TreeBuilder`相对困难。

我还注意到您的示例 HTML 包含`<i>Revised<i>`的内容显然应该是`<i>Revised</i>`，并且我已针对此示例测试对其进行了更正。无论如何，Perl 试图像浏览器一样解析错误的 HTML，即使出现错误，输出仍然可用。

```
use strict;
use warnings;

use HTML::DOM;

my $dom = HTML::DOM->new;
$dom->parse_file('C:\HTMLsorter\sources.txt') or die $!;

open my $out, '>', 'C:\HTMLsorter\outseark.txt' or die $!;
print $out $_->innerHTML, "\n" for grep $_->attr('target'), $dom->getElementsByTagName('a'); 
```

**输出**

（标签已更正）

```
Run Printable TCI List (<i>Revised</i>) 
```

（带有原始标签）

```
Run Printable TCI List (<i>Revised<i>)</i></i> 
```

# php - 我无法使用 php 从 xml 文件中获取所有数据

> ID：10105565
> 
> 赞同：0
> 
> 时间：2012-04-11T12:06:33.677
> 
> 标签：php, xml-parsing

除了所有 <Item> 数据之外，我还可以从 xml 中获取数据。下面的代码只获取最后一个的数据。我以为 foreach 会为他们每个人得到它，但似乎没有。

```
<magic5Out version="2.1.0">
<Report customerPK="Survey_2" locationPK="229" userId="2299" template="13600" formDate="2012-04-11T00:00:00" dateTimeStarted="2012-04-11T07:34:04" dateTimeMobileReleased="2012-04-11T07:37:03" currentStatus="5" reportGuid="b174d011-77bb-4882-b87e-a2c60bdf265d">
    <Results>
        <Item itemPK="SurveyTab_9">
            <q1 listEntry="1.8m" listEntryId="239107"/>
            <q1Comments text=""/>
            <q2 listEntry="Green" listEntryId="239113"/>
            <q2Comments text=""/>
            <item_comments text="test"/>
        </Item>
        <Item itemPK="SurveyTab_24">
            <q1 listEntry="2.2m" listEntryId="239108"/>
            <q1Comments text=""/>
            <q2 listEntry="Silver" listEntryId="239112"/>
            <q2Comments text=""/>
            <item_comments text=""/>
        </Item>
        <Item itemPK="SurveyTab_10">
            <q1 listEntry="3.0m" listEntryId="239110"/>
            <q1Comments text=""/>
            <q2 listEntry="White" listEntryId="239111"/>
            <q2Comments text=""/>
            <item_comments text="No feed"/>
        </Item>
        <Item itemPK="SurveyTab_23">
            <q1 listEntry="2.2m" listEntryId="239108"/>
            <q1Comments text=""/>
            <q2 listEntry="Green" listEntryId="239113"/>
            <q2Comments text=""/>
            <item_comments text=""/>
        </Item>
    <surveyorComments0 text="testing"/>
    <surveyorName text="NICK"/>
    <surveyorSig opFile="D:\Sites\WebApp_eden\Output\2100\XMLSurvey\Attachments\1cf582f9-776c-472e-b8ce-877a51fae5e1.png"/>
    </Results>
</Report>
</magic5Out> 
```

这是我正在使用的 php：

```
$xml = simplexml_load_file($xml_file); 
/* more code here that works OK */
foreach($xml->Report->Results->Item as $tab) {
    $tab_name = (string) $tab['itemPK'];
    $q1_result =  $tab->q1['listEntry'];
    $q2_result =  $tab->q2['listEntry'];  etc.
    $q1_comment =  escape_data($tab->q1Comments['text']);
    $q2_comment =  escape_data($tab->q2Comments['text']);
    $item_comment = escape_data($tab->item_comments['text']);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:14:52.923

当您创建一个循环并定义一个变量时，在您的情况下，您将获得变量中循环的最后一个值。

你每次都覆盖你的变量。

```
foreach($xml->Report->Results->Item as $tab) {
    $tab_name[] = (string) $tab['itemPK'];
    $q1_result[] =  $tab->q1['listEntry'];
    $q2_result[] =  $tab->q2['listEntry'];  etc.
    $q1_comment[] =  escape_data($tab->q1Comments['text']);
    $q2_comment[] =  escape_data($tab->q2Comments['text']);
    $item_comment[] = escape_data($tab->item_comments['text']);
} 
```

尝试这样的事情。然后你有一个包含所有值的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:35:29.570

代码中的其他地方一定有什么东西搞砸了——我尝试了很多其他的东西，最终恢复到我在上面发布的 php 并且这次它工作了。希望这只是我自己浪费的时间。

# vim - 当前目录窗口标题

> ID：10105569
> 
> 赞同：2
> 
> 时间：2012-04-11T12:06:51.357
> 
> 标签：vim, macvim

有没有办法将当前工作目录公开为 MacVim 中的窗口标题？

我的用例是我打开了几个 MacVim 窗口，每个窗口都植根于我项目的一部分或单个项目的特定目录。因此，能够通过它们打开的文件夹来识别它们将非常有用。

干杯，棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-23T18:17:20.787

设置titlestring+=\ pwd:\ %{substitute(getcwd(),\ $HOME,\'~',\'')}

反斜杠和空格仅用于在标题字符串中插入空格。pwd：（和另一个转义空格）只是一个标签。%{ 。. . } 动态评估括号内容。%{getcwd()} 是获取当前目录的关键。这也会在将 $HOME 添加到标题字符串之前将其缩短为 ~。

更多 vim 想法在[https://ciaranm.wordpress.com/2008/05/15/my-vimrc/](https://ciaranm.wordpress.com/2008/05/15/my-vimrc/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T12:39:21.340

`:set titlestring=YOURTITLEHERE`更改“窗口”的标题。有一个自动示例`:help titlestring`。

# iphone - 如何在 UIWebView 中搜索文本由页数组成，文本应在 iPhone 中突出显示？

> ID：10105571
> 
> 赞同：0
> 
> 时间：2012-04-11T12:07:05.337
> 
> 标签：iphone, uiwebview, uisearchbar

我将 epub 文件解析为 UIWebView。我尝试添加 UISearchBar 以查找文本并突出显示。为此，我添加了 UIWebViewSearch.js 文件。在我的 UIWebView 中，我有很多页面。如果单击下一页显示下一页或单击上一页显示上一页ID。为此如何在 UIWebView 中搜索文本，如何选择文本？

如果有人知道请帮助我。

提前致谢...........

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:20:56.203

网络上有很多关于 JavaScript 搜索和突出显示功能的示例。

[这](http://www.nsftools.com/misc/SearchAndHighlight.htm)是一个例子。

一旦您使用 JavaScript 来搜索术语并在网页中突出显示它们，您将需要调用您的 JS 并将其传递给在`UISearchBar`.

这可以通过使用来实现：

```
NSString *jsCall = [NSString stringWithFormat:@"searchAndHighlight('%@');", yourSearchText];

[webView stringByEvaluatingJavaScriptFromString:jsCall]; 
```

[UIWebView 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)

# asp.net-mvc-3 - Autofac没有填充动作过滤器属性

> ID：10105579
> 
> 赞同：6
> 
> 时间：2012-04-11T12:07:17.523
> 
> 标签：asp.net-mvc-3, autofac, action-filter

我在 ASP.NET MVC 3 应用程序中有一个操作过滤器，需要将一些依赖项注入其中。我使用 Autofac.Mvc3 作为依赖注入器。

根据[autofac wiki](http://code.google.com/p/autofac/wiki/Mvc3Integration#Filter_Attribute_Property_Injection)，我只需要注册我想要注入的类型，调用`RegisterFilterProvider`并在我的操作过滤器上放置一个公共属性，然后 autofac 将在过滤器实例化期间用正确的对象填充该属性。

这是我的操作过滤器的一部分：

```
Public Class LogActionAttribute
    Inherits ActionFilterAttribute

    Property tracer As TraceSource

    Public Overrides Sub OnActionExecuting(filterContext As System.Web.Mvc.ActionExecutingContext)
        ...
        tracer.TraceData(...)
        ...
    End Sub
End Class 
```

这是我的 global.asax 的一部分：

```
Public Class MvcApplication
    Inherits System.Web.HttpApplication

    Shared Sub RegisterGlobalFilters(ByVal filters As GlobalFilterCollection)
        filters.Add(New MyHandleErrorAttribute)
        filters.Add(New LogActionAttribute)
    End Sub

    Sub Application_Start()
        InitSettingRepoEtc()
        ...
    End Sub

    Protected Shared Sub InitSettingRepoEtc()
        ...
        Dim builder = New ContainerBuilder
        builder.RegisterControllers(Reflection.Assembly.GetExecutingAssembly)
        ...
        builder.Register(Of TraceSource)(
            Function(x) New TraceSource("requests", SourceLevels.All)).InstancePerHttpRequest()
        ...
        builder.RegisterFilterProvider()
        Dim container = builder.Build
        DependencyResolver.SetResolver(New AutofacDependencyResolver(container))
        ...
    End Sub
End Class 
```

我已经`SetResolver`在尝试后立即设置断点：

```
DependencyResolver.Current.GetService(Of TraceSource) 
```

而且我成功从autofac得到了一个TraceSource对象，所以注册好像没问题。

但期间`OnActionExecuting`我的`tracer`财产是空的。

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T14:50:29.463

IIRC 提供者不适用于“全局”过滤器。

删除此功能：

```
Shared Sub RegisterGlobalFilters(ByVal filters As GlobalFilterCollection)
    filters.Add(New MyHandleErrorAttribute)
    filters.Add(New LogActionAttribute)
End Sub 
```

相反，直接向 Autofac 注册全局过滤器：

```
 builder.Register(Of MyHandleErrorAttribute)
     .As(Of IActionFilter)
     .PropertiesAutowired()
     .SingleInstance();

 builder.Register(Of LogActionAttribute)
     .As(Of IActionFilter)
     .PropertiesAutowired()
     .SingleInstance(); 
```

Autofac 将创建过滤器并适当地包含它们。这种方法的优点是您可以重构过滤器，使过滤器不是属性派生的，然后使用构造函数而不是属性注入。

# javascript - 使用 iframe 和 TextArea 进行富文本编辑的优缺点

> ID：10105581
> 
> 赞同：2
> 
> 时间：2012-04-11T12:07:30.073
> 
> 标签：javascript, html, web, richtextbox

使用 iframe 进行富文本编辑的优缺点是什么，使用 textarea 进行编辑的优缺点是什么。哪一个更好 ？

# javascript - JavaScript 中的正则表达式。只允许字母、逗号和标点符号

> ID：10105584
> 
> 赞同：3
> 
> 时间：2012-04-11T12:07:45.813
> 
> 标签：javascript, regex

我尝试制作一个正则表达式来验证 javascript 中的表单。RegEx 应该只允许字母逗号和标点符号。例如我有这个字符串：

```
Hi, this is a test of RegEx. Does it work 
```

我试过以下

```
/^[A-Za-z0-9,. ]{3,50}$/; 
```

但这似乎不起作用。解决方案？

谢谢！

编辑：

这是我的代码：

```
<script type="text/javascript">
  var RE_SSN = /^[A-Za-z0-9,. ]{3,50}$/; 

  function checkSsn(ssn){

   if (RE_SSN.test(ssn)) {
  alert("OK"); 
  javascript:addAppointment(document.forms[0])

    } else {
       alert("NO!");
   }
  }
  </script>

<div id="r">
    <label for="receipt">Receipt</label><input type="checkbox"     name="receipt" value="1"/>
</div>

<input type="button" value="Post it" onclick="checkSsn(this.form.content.value);"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T12:12:06.620

您可能需要转义“。” 因为这是正则表达式中的特殊字符。

```
/^[A-Za-z0-9,\. ]{3,50}$/; 
```

实际上可能不是。尝试使用[http://www.regextester.com/](http://www.regextester.com/) - 无论如何我都能让它工作。您能否向我们展示您如何实现此功能的完整代码？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T16:57:56.970

如果您不想在该字段的开头使用标点符号：

```
/^[a-zA-Z]+(([\'\,\.\- ][a-zA-Z ])?[a-zA-Z]*)*$/ 
```

这也允许空格（一种情况是姓氏 - De La Hoya 或 O'Doul）

# windows-phone-7 - 如何将超链接按钮从 c# 代码隐藏动态添加到列表框中的堆栈面板？

> ID：10105588
> 
> 赞同：0
> 
> 时间：2012-04-11T12:07:51.940
> 
> 标签：windows-phone-7

嗨，我有一个要求，我需要你的帮助：-

我有一组用逗号分隔的字符串类型的电话号码，现在我想将每个电话号码分配给超链接，单击它会调用 PhoneCallTask​​ 并拨打该特定电话号码。

1）那么，如何将每个电话号码分配给一个超链接（我们应该动态生成超链接吗？在c#代码隐藏中）

2）如果是这样，如何动态生成超链接按钮并将其添加到列表框中的堆栈面板？

3）我怎么知道点击了哪个超链接按钮？

4）所有的超链接按钮都指向同一个超链接点击事件？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T12:18:15.787

在您的 MainPage.xaml 中，将其添加到 ContentPanel 控件中：

```
<ListBox x:Name="PhoneNumbersList">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <HyperlinkButton Content="{Binding}" Click="PhoneNumberHyperlinkButton_Click" />
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

然后，在后面的 MainPage 代码中，添加以下代码：

```
public MainPage()
{
    InitializeComponent();

    var phoneNumbers = new string[] { "9999999", "8888888", "7777777" };

    PhoneNumbersList.ItemsSource = phoneNumbers;
}

private void PhoneNumberHyperlinkButton_Click(object sender, RoutedEventArgs e)
{
    var phoneNumberHyperlinkButton = (HyperlinkButton)sender;

    var phoneNumber = (string)phoneNumberHyperlinkButton.Content;

    new Microsoft.Phone.Tasks.PhoneCallTask()
    {
        PhoneNumber = phoneNumber
    }.Show();
} 
```

就是这样！

# c++ - 是否可以将 std::string 用于 read()？

> ID：10105591
> 
> 赞同：10
> 
> 时间：2012-04-11T12:08:02.280
> 
> 标签：c++, sockets, stdstring

是否可以将 std::string 用于 read() ？

例子 ：

```
std::string data;

read(fd, data, 42); 
```

通常，我们必须使用 char* 但可以直接使用 std::string 吗？（我更喜欢不创建 char* 来存储结果）

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-11T12:52:50.127

好吧，您需要以`char*`某种方式创建一个，因为这是该功能所需要的。（顺便说一句：您在谈论 Posix 函数 `read`，不是吗？不是`std::istream::read`吗？）问题不在于`char*`，而是`char*`指向的内容（我怀疑这就是您的实际意思）。

这里最简单和常用的解决方案是使用本地数组：

```
char buffer[43];
int len = read(fd, buffer, 42);
if ( len < 0 ) {
    //  read error...
} else if ( len == 0 ) {
    //  eof...
} else {
    std::string data(buffer, len);
} 
```

但是，如果您想直接捕获到`std::string`中，这是可能的（尽管不一定是一个好主意）：

```
std::string data;
data.resize( 42 );
int len = read( fd, &data[0], data.size() );
//  error handling as above...
data.resize( len );  //  If no error... 
```

这避免了复制，但坦率地说……与实际读取所需的时间和在字符串中分配内存所需的时间相比，复制是微不足道的。这也具有（可能可以忽略不计）的缺点，即生成的字符串具有 42 字节的实际缓冲区（四舍五入），而不仅仅是实际读取的字符所需的最小值。

（并且由于人们有时会提出关于内存连续性的`std:;string`问题：这是十年或更长时间前的问题。原始规范明确`std::string`设计为允许不连续的实现，沿着当时流行的路线`rope`类。在实践中，没有实现者发现这很有用，人们确实开始假设连续性。在这一点上，标准委员会决定使标准与现有实践保持一致，并要求连续性。所以......从来没有没有实现过连续的，考虑到 C++11 中的要求，未来的任何实现都不会放弃连续性。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T12:13:07.333

不，你不能也不应该。通常，std::string 实现在内部存储其他信息，例如分配的内存大小和实际字符串的长度。C++ 文档明确指出修改返回的值`c_str()`或`data()`导致未定义的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T12:13:06.577

如果读取函数需要 char *，则不需要。您可以使用 char 的 std::vector 的第一个元素的地址，只要它首先被调整大小。我不认为旧的（C++ 11 之前的）字符串保证有连续的内存，否则你可以对字符串做类似的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T12:18:27.963

不是，但

```
std::string data;
cin >> data; 
```

工作得很好。如果你真的想要 的行为`read(2)`，那么你需要分配和管理你自己的字符缓冲区。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T12:56:42.093

因为 read() 用于原始数据输入，所以 std::string 实际上是一个不好的选择，因为 std::string 处理文本。std::vector 似乎是处理原始数据的正确选择。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-11T12:58:21.133

使用字符串库中的 std::getline - 请参阅[cplusplus.com](http://cplusplus.com/reference/string/getline/) - 可以从流中读取并直接写入字符串对象。示例（再次从 cplusplus.com 翻录 - 在谷歌上第一次点击 getline）：

```
int main () {
  string str;
  cout << "Please enter full name: ";
  getline (cin,str);
  cout << "Thank you, " << str << ".\n";
} 
```

当从标准输入（cin）和文件（ifstream）读取时，这将起作用。

# android - 选择输入文本字段时如何删除android中的边框？

> ID：10105592
> 
> 赞同：3
> 
> 时间：2012-04-11T12:08:11.377
> 
> 标签：android, html, css

当我选择输入文本字段时，android默认浏览器会在输入文本字段周围绘制边框？

我试过这个，但它什么也没做。

```
input[type="text"]:focus { border: none; outline: none;} 
```

在android浏览器中选择文本字段时，输入文本字段周围是否可以没有边框？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T13:19:41.100

尝试将背景设置为透明。

```
<EditText   
    android:layout_width="fill_parent"  
    android:layout_height="wrap_content"  
    android:hint="@string/input"  
    android:background="#00000000" 
/> 
```

# python - 提取字典列表中元素的值

> ID：10105593
> 
> 赞同：-2
> 
> 时间：2012-04-11T12:08:12.710
> 
> 标签：python, data-structures, dictionary

我有一个python数据结构如下：

```
A = [{'abc': 'kjkjl'},{'abc': 'hjhjh'},{'abc': '78787'}] 
```

如何从 A 中删除“abc”并创建一个新列表：

```
B = ['kjkjl','hjhjh','78787'] 
```

编辑：使用解决方案我仍然收到以下错误：

```
return codecs.charmap_encode(input,errors,encoding_table)
UnicodeEncodeError: 'charmap' codec can't encode character u'\u03b9' in position 10:             character maps to <undefined> 
```

实际数据结构如下：

```
A =

{u'thread': u'Sujet  Topic de la communaut des fans de Star Wars  '}
{u'thread': u'Sujet Topic Unique La Communaut des Fans de Pirates des Caraibes '} {u'thread': u'Sujet Pandora - Topic de la communaut des fans de Avatar et de James Cameron '} {u'thread': u'Sujet Au-del de Brokeback ple-mle'} {u'thread': u'Sujet X Men 4 The Wolvy Gang fanfic'} {u'thread': u'Commentaire sur - Transformers 3'} {u'thread': u'Sujet le Photogramme - saison 2'} {u'thread': u'Sujet Une mditation sur lamour de la beaut'} {u'thread': u'Commentaire sur - Harry Potter et les reliques de la mort - partie 2'} {u'thread': u'Commentaire sur - Inception'} {u'thread': u'ALED - Cin\u03b9ma'} {u'thread': u'Sujet Commentaire sur Twilight - Chapitre 3 hsitation'} {u'thread': u'Sujet Topic unique La Justice league prvu pour 2013'} {u'thread': u'Sujet Commentaire sur Harry Potter et les reliques de la mort - partie 1'} {u'thread': u'Commentaire sur - Harry Potter et les reliques de la mort - partie 1'} {u'thread': u'Sujet Commentaire sur Avatar'} {u'thread': u'Sujet Rebecca and Billy s fan'} {u'thread': u'Sujet ALED - Bistrot'} {u'thread': u'Sujet ALED - Jeux'} {u'thread': u'ALED - Bistrot'} {u'thread': u'Sujet Topic Unique News Transformers III'} {u'thread': u'Sujet Topic Unique News Scream 4 Infos photos BA promo Sans HSFlood '} {u'thread': u'ALED - Jeux'} {u'thread': u'Sujet ALED - Musique'} {u'thread': u'ALED - Musique'} {u'thread': u'Sujet Batmanet une Lgende '} {u'thread': u'Sujet Commentaire sur The Dark Knight Rises'} {u'thread': u'Sujet Commentaire sur Resident Evil Afterlife'} {u'thread': u'Sujet Jake Sully lhomme qui marchait dans sa tte '} {u'thread': u'Sujet De qui Peter Jackson croit-il se moquer'} {u'thread': u'Sujet Commentaire sur Saw 3D'} {u'thread': u'[Topic Unique] News Spider-Man reboot'} {u'thread': u'Sujet Dbat autours sur les news ET rumeurs D'} {u'thread': u'Sujet Commentaire sur Scream 4'} {u'thread': u'Sujet Le Top 100 des internautes'} {u'thread': u'Sujet Topic des news Bilbo le Hobbit prquelle du Seigneur des Anneaux Spoilers possibles'} {u'thread': u'D\u03b9bat autours sur les news ET rumeurs -D'} {u'thread': u'Commentaire sur - The Dark Knight Rises'} {u'thread': u'Sujet Top Cinma 2010'} {u'thread': u'Topic des news Bilbo le Hobbit (pr\u03b9quelle du Seigneur des Anneaux) Spoilers possibles-'} {u'thread': u'Sujet Commentaire sur Pirates des Carabes la Fontaine de Jouvence'} {u'thread': u'Sujet Lunique et vritable explication de matrix revolutions'} {u'thread': u'Sujet Topic DE SECOURS de la communaut des fans de STAR WARS'} {u'thread': u'Sujet Commentaire sur X-Men Le commencement'} {u'thread': u'Commentaire sur - X-Men Le commencement'} {u'thread': u'Sujet TOPIQUE UNIQUE-FORUM OFFICIEL Rumeurs- News-Infos-Photos-BA-Compte rebours de RAMBO V'} {u'thread': u'Sujet Vos citations prfres du Seigneur des Anneaux'} {u'thread': u'Sujet Commentaire sur Piranha 3-D'} {u'thread': u'Sujet Fanarts - vos crations AVATAR'} {u'thread': u'Sujet Commentaire sur Sucker Punch'} {u'thread': u'Commentaire sur - Sucker Punch'} {u'thread': u'Sujet In brightest day in blackest night Green Lantern le film les news c est ici'} {u'thread': u'Sujet Commentaire sur The Expendables'} {u'thread': u'Sujet Commentaire sur Twilight - Chapitre 4 rvlation'} {u'thread': u'Sujet Meeting du TDLCDFDSW pour Juin 2011'} {u'thread': u'Sujet Topic Unique Harry Potter et les Reliques de la Mort Partie II News Photo Bande annonce '} {u'thread': u'Commentaire sur - Twilight - Chapitre 4 - r\u03b9v\u03b9lation'} {u'thread': u'Topic Unique Harry Potter et les Reliques de la Mort (Partie II) [News, Photo, Bande annonce ----]'} {u'thread': u'Sujet Commentaire sur Le Choc des Titans'} {u'thread': u'Sujet Le club des fans de cin'} {u'thread': u'Sujet Commentaire sur Le Dernier matre de lair'} {u'thread': u'Sujet Commentaire sur Black Swan'} {u'thread': u'Commentaire sur - Black Swan'} {u'thread': u"Commentaire sur - Tron l'h\u03b9ritage"} {u'thread': u'Sujet Armada 2008 rassemblement des fans de POTC pour la prise du port de Rouen membres only'} {u'thread': u'Sujet Commentaire sur Tron lhritage'} {u'thread': u'Sujet TOPIC OFFICIEL unique TINTIN news photos scoops '} {u'thread': u'Sujet Commentaire sur Iron Man 2'} {u'thread': u"Top des films de l'ann\u03b9e 2011"} {u'thread': u'Sujet Commentaire sur Prince of Persia les sables du temps'} {u'thread': u'Commentaire sur - Spider-Man (3D)'} {u'thread': u'Commentaire sur - World Invasion - Battle Los Angeles'} {u'thread': u'Sujet Commentaire sur Les Griffes de la nuit'} {u'thread': u'Sujet Commentaire sur World Invasion Battle Los Angeles'} {u'thread': u'Sujet Le merchandising - Les produits drivs'} {u'thread': u'TOPIC OFFICIEL [unique] - TINTIN (news, photos, scoops, ---)'} {u'thread': u'Sujet Commentaire sur Predators'} {u'thread': u'Sujet Box office Tron '} {u'thread': u'Sujet Commentaire sur Tree of Life'} {u'thread': u'Commentaire sur - Tree of Life'} {u'thread': u'Sujet Commentaire sur Robin des Bois'} {u'thread': u'Sujet Commentaire sur Thor'} {u'thread': u'Sujet THOR de Kenneth Brannagh Topic news'} {u'thread': u'Sujet NEW Signalez ici les nouveaux liens Top Ralisateurs et Ralisatrices des internautes rajouter dans le Sticky'} {u'thread': u'Sujet Topic Unique News Breaking Dawn'} {u'thread': u'Sujet Commentaire sur Kick-Ass'} {u'thread': u'Sujet Commentaire sur Le Monde de Narnia Chapitre 3 - LOdysse du Passeur daurore'} {u'thread': u"Commentaire sur - Le Monde de Narnia - Chapitre 3 - L'Odyss\u03b9e du Passeur d'aurore"} {u'thread': u'Sujet Top Cinma 2011'} {u'thread': u'Sujet Commentaire sur Paranormal Activity'} {u'thread': u'Sujet Marc andr Grondin'} {u'thread': u'Sujet Faisons un grand scenario participatif dHP '} {u'thread': u'Sujet Commentaire sur Shutter Island'} {u'thread': u'Commentaire sur - Shutter Island'} {u'thread': u'Sujet Pourquoi ce film est il autant dtest '} {u'thread': u'Sujet Commentaire sur Twilight - Chapitre 2 tentation'} {u'thread': u'Top Cin\u03b9ma 2011'} {u'thread': u'Sujet Commentaire sur Rien dclarer'} {u'thread': u'Sujet Discussion autour des news et rumeur du New Superman Project '} {u'thread': u'Discussion autour des news et rumeur du New Superman Project !'} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T12:11:18.377

您可以使用列表理解：

```
B = sum((i.values() for i in A), []) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T12:10:44.113

```
>>> B = [a["abc"] for a in A]
>>> B
['kjkjl', 'hjhjh', '78787'] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-11T12:13:14.030

鉴于您的清单为

```
>>> A
[{'abc': 'kjkjl'}, {'abc': 'hjhjh'}, {'abc': '78787'}] 
```

你可以做类似的事情

```
>>> list(itertools.chain(*[x.values() for x in A]))
['kjkjl', 'hjhjh', '78787']
>>> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T12:13:02.333

```
B = []
for key, value in A.iteritems():
    B.append(value) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-11T12:13:06.797

如果 A 中的所有 dicts 只有一个元素，你可以这样做......

```
>>> A = [{'abc': 'kjkjl'},{'abc': 'hjhjh'},{'abc': '78787'}]
>>> B = [x.values()[0] for x in A]
>>> B
['kjkjl', 'hjhjh', '78787'] 
```

# php - 手动删除 FOSFacebookBundle 中的 facebook cookie

> ID：10105594
> 
> 赞同：0
> 
> 时间：2012-04-11T12:08:13.357
> 
> 标签：php, facebook, symfony

我想手动删除我的应用程序使用的 facebook cookie，以便在用户的访问令牌不再有效时能够重新生成新的访问令牌。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:53:44.327

像这样：

```
setcookie ("fbsr_YOUR_APP_ID", "", time() - 3600); 
```

编辑：

还有一个额外的 cookie “fbm_YOUR_APP_ID”也应该被删除。

# php - 如何编写用于验证多页表单的控制器？

> ID：10105595
> 
> 赞同：0
> 
> 时间：2012-04-11T12:08:21.937
> 
> 标签：php, forms, model-view-controller, validation

我正在努力正确组织（MVC）控制器以验证多页表单。问题是我不仅要检查用户输入是否存在，而且我还必须将其与不同的数据库（取决于字段）进行匹配。我还需要不同视图选项的用户输入产生的数据库数据。

我不清楚我应该把验证放在哪里。我想把不太详细的东西放到控制器中，但同时我不喜欢模型相互使用（没有控制器）。

这是来自控制器的基本示例，步骤代表表单的不同阶段/页面：

```
// GET VARIABLES FROM $_POST + $_GET
private function make_environment()
{
    // PUT ALL VARIABLES INTO ARRAY
    $vars = array();
    if(!empty($_GET)) { $values = array_merge($vars,$_GET); }    
    if(!empty($_POST)) { $values = array_merge($vars,$_POST); }

    // PUT ALLOWED VARIABLES INTO PROPERTY
    foreach($this->properties as $property)
    {
        if(isset($values[$property]))
        {
            $this->properties[$property] = htmlspecialchars(trim($values[$property]));
        }
    }

}

// HANDLE DATA

// PRODUCES DATA FOR VIEW    
private function set_data()
{
    $data = '';
    // CHOOSE DATA-OBJECT AND DATA-HANDLER
    switch($this->properties['step'])
    {
        case 1:
            // DATA HANDLER
            $handler = new calendar($this->properties);
            $data['calendar'] = $handler->return_data();
            break;

        case 2:
            // DATA HANDLER
            $handler = new form($this->properties);
            $data['form'] = $handler->return_data();
            break;
    }

    return $data;
}

// CREATE OR UPDATE VIEW

private function run_view($data)
{
    new view('header','');

    switch($this->properties['step'])
    {
        default:
            new view('chooser','');
            break;
        case 1:
            new view('calendar',$data['calendar'],$this->properties);
            break;

        case 2:
            new view('form',$data['form'],$this->properties);
            break;
    }

    new view('footer','');
} 
```

目前，不同的“处理程序”（in `set_data()`）正在查询数据库，但在此之前，我需要检查是否已提交必填字段以及这些字段是否有效（它们是否存在于数据库中）。我真的不知道在哪里放置这种验证。可能在一个单独的模型中，但是我必须再次查询那里的数据库**和****数据**处理程序。也许你有一个想法？！

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:18:05.387

我不知道您使用的 MVC，但我更喜欢这样的东西：

```
$form = new MultipageForm('BubblePagesForm');
$form->importFromSession($app->getSession());
if ($form->validates($app->getRequest()))
{
    $form->processRequest($app->getRequest());
    $form->exportToSession($app->getSession());
    $responseType = new SuccessfullFormRequest($form);
}
else 
{
    $responseType = new InvalidFormRequest($form);
}
$app->setResponse($responseType, array($form)); 
```**

# extjs - 使用控制器附加事件（sencha touch / extjs）

> ID：10105596
> 
> 赞同：1
> 
> 时间：2012-04-11T12:08:23.200
> 
> 标签：extjs, sencha-touch-2

我在 Web 编程方面的经验仅限于中级、自学的 JS 和 jQuery 以及少量 PHP。ExtJS 变成了完全不同的动物。

我无法弄清楚为什么我的控制器没有按照我的预期做，特别是因为我遵循文档中使用的语法（由于它们无法描述示例中实际发生的情况，因此变得越来越无用。 ..但我离题了）。

**主.js**

```
 Ext.define("cs.view.Main", {
        extend: 'Ext.TabPanel',
        tabBarPosition: 'bottom',

        requires: [
            'cs.view.form',
            'cs.view.location',
            'Ext.TitleBar',
            'cs.controller.geolocate'
            ],

        config: {
            tabBar: {
                docked: 'bottom',
            },
            defaults: {
                flex: 1
            },
            items: [
                { xtype: 'form' },
                { xtype: 'location' }
                ]
            },
    }); 
```

**表单.js**

```
Ext.define('cs.view.form', {
    extend: 'Ext.form.Panel',
    requires: 'cs.controller.geolocate',
    id: 'ClientFinderForm',

    config: {
        title: 'Home',
        iconCls: 'home',
        items: [
        {
            xtype: 'toolbar',
            docked: 'top',
            title: 'Client Finder'
        },
        {
            xtype: 'textfield',
            name: 'address',
            label: 'address'
        },
        {   
            xtype: 'textfield',
            name: 'dist',
            label: 'distance(mi)'
        },
        {
            xtype: 'button',
            ui: 'confirm',
            text: 'submit',
            id: 'submitButton',
        }
            ]
        },
}); 
```

**地理定位.js**

```
Ext.define('cs.controller.geolocate', {
    extend: 'Ext.app.Controller',

    config: {
        control: {
            aButton: {
                tap: 'message'
            }
        },//control
        refs: {
            aButton: '#submitButton'
        },//refs
    },//config

    message: function(){
        Ext.Msg.alert("Success", "Finally!");
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:37:31.753

我相信 sencha touch 2 希望您将 views:[] 放入您的应用程序中。js

同样在您的 cs.view.form 中，您应该取出 xtype:'form'，它已经通过扩展 Ext.form.panel 知道它的表单。

从提交按钮中取出别名，您需要自己定义提交按钮以使用别名。

# networking - 移动网络世代和带宽

> ID：10105600
> 
> 赞同：0
> 
> 时间：2012-04-11T12:08:54.850
> 
> 标签：networking, mobile, bandwidth, 3g

我有几个与移动网络世代相关的问题：

1.  在比较一代移动网络时，人们提到1G和2G必须使用最大带宽。此内容中的带宽是多少，为什么他们使用最大带宽？
2.  1G 和 2G 是窄带网络。这里的窄带是什么？
3.  3G 和 4G 是宽带网络。他们不使用最大带宽吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T19:02:30.197

1.  它们使用最大带宽来传输模拟语音信息。由于可用带宽是有限的，并且使语音在另一端可识别所需的带宽也有限制，因此它们不能低于这个固定带宽。

2.  它是指载波的频率跨度。如果是窄带，那么通常只有几千赫兹，这使得可用带宽很低（这也取决于所使用的调制类型）。

3.  它们不需要用于语音通信的最大可用带宽，因为为了获得可接受的语音质量，我们需要传输仅对几千赫兹模拟信息进行编码的信号。

# performance - 为什么 Chrome 审核会建议我最小化 cookie 大小？

> ID：10105602
> 
> 赞同：14
> 
> 时间：2012-04-11T12:09:00.160
> 
> 标签：performance, google-chrome, browser, cookies, audit

如何最小化请求的 cookie 大小？Chrome 似乎“警告我”我的 cookie 大小为 41B，这根本不是很多，但它警告我有什么原因吗？

这是一个 PHPSESSID cookie，我真的不知道如何最小化。有任何想法吗？

我的请求响应本身应该已经被 Gzip 压缩了，但是据我所知，自己无法压缩标头，或者是否存在？

谢谢！我只是对性能和审计有一点强迫症，它们告诉我我可以做得更好。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-08-22T15:24:51.197

*Chrome 审核工具会错误地*发出此警告。41B 是一个小饼干，很容易适应 1500B 的 MTU。

例如，如果您对 Google.com 运行审核，它会抱怨他们的 104B cookie。Chrome 团队需要修复此错误警告，但您无需担心。

# c# - 在 .Net 服务器应用程序中创建 SSRS 样式表达式（函数）

> ID：10105603
> 
> 赞同：0
> 
> 时间：2012-04-11T12:09:05.347
> 
> 标签：c#, .net, function, transform, expression

我们有一个用 C# (.net 4.0) 编写的相当灵活的应用程序，它将数据复制到公司周围的不同 ERP 系统。它使用 XML 文件来确定从和到 ERP 系统、数据源、凭据和要复制的列。

我们看到的是，人们对在复制数据时进行转换很感兴趣。因此，具有产品系列的零件号将转换为仅一个产品系列。例如，使用 SSRS 函数进行以下转换 564-8911277 ==> 564 这将是

```
=Left("564-8911277", instr(564-8911277", "-") - 1)) 
```

想法是将表达式放在 XML 文件中，让系统解释表达式并转换数据。

我正在研究并进行成本估算以开发此功能，并想知道是否有任何已经存在的东西可以集成到 .net 应用程序中？

我发现了一些东西（从 2001 年开始的 scripting.net），但我想我会联系社区看看还有什么。

谢谢，蒂姆

# selenium - 如何使用 Selenium 创建一个自动检查邮件状态的工具？

> ID：10105605
> 
> 赞同：0
> 
> 时间：2012-04-11T12:09:10.153
> 
> 标签：selenium

如何使用 Selenium 创建一个自动检查邮件状态的工具？我的意思是这个工具包可以定期打开浏览器并检查我的在线邮箱是否有未读邮件，如果有则将状态更改为“已读”就可以了。

我目前正在搜索 selenium 框架并可以使用它来实现一些基本功能，但不知道**如何使其自动运行并按固定时间间隔运行**。有人可以指导我吗？任何建议将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:31:29.827

selenium 独立 jar 是可执行的，因此您可以编写一个脚本来运行您在 Selenium IDE 中创建的 selenium 测试。它会是这样的：

```
java -jar selenium-server-standalone-2.8.0.jar -htmlSuite "<path to your .html test suite>" 
```

然后，您可以将其安排为定期运行的 cron 作业。

以下是两个可能有帮助的相关问题：

[每 5 分钟自动运行 Selenium 测试](https://stackoverflow.com/questions/3769900/run-selenium-test-automatically-every-5-minutes)

[如何每 5 分钟运行一次硒测试？](https://stackoverflow.com/questions/6199874/how-can-i-run-a-selenium-test-every-5-minutes)

# nhibernate - 驱动 NHibernate.Driver.OracleDataClientDriver 不支持多查询

> ID：10105608
> 
> 赞同：1
> 
> 时间：2012-04-11T12:09:19.697
> 
> 标签：nhibernate

我正在尝试在 NHibernate 3.2 CR1 中使用 MultiCriteria，但出现以下错误： NHibernate.Driver.OracleDataClientDriver 驱动程序不支持多个查询。我的数据库是 Oracle 11。

有解决办法吗？

感激的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T16:31:33.250

这仍然是一个悬而未决的问题

[https://nhibernate.jira.com/browse/NH-2170](https://nhibernate.jira.com/browse/NH-2170)

# python - 将装饰器应用于上下文处理器

> ID：10105610
> 
> 赞同：0
> 
> 时间：2012-04-11T12:09:27.993
> 
> 标签：python, django, facebook, fandjango

我将 Fandjango 用于 Django Facebook Canvas 应用程序。

要使用 fandjango，您需要用 包装所有视图函数`@facebook_authorization_required`，以确保您获得授权，然后为您提供变量`request.facebook.user`。

**我想要**的是制作一个上下文处理器，它基于此定义更多变量，即我希望我的所有模板都能够`fb_user`用作`request.facebook.user`.

**问题是**，我不知道如何在上下文处理器上使用装饰器。

任何想法我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T12:34:48.937

无需包装上下文处理器。如果您首先包装了视图，那么`request`将已经使用该`facebook.user`属性进行注释。由于无论如何请求都会传递给上下文处理器，因此您可以访问该属性。

您可能应该`if hasattr(request, 'facebook')`在上下文处理器中进行快速检查，以确保它是从包装视图中调用的。

# ios - 如果启用了编辑模式，如何禁用 textview 的 uikeyboard

> ID：10105619
> 
> 赞同：3
> 
> 时间：2012-04-11T12:10:03.203
> 
> 标签：ios, uitextview, uikeyboard

如果启用了文本视图编辑，如何隐藏/禁用键盘。

我只希望该用户只能选择文本而不能输入文本。

因为选定的文本将转换为图像以进行移动动画。

不允许用户在 textview 中输入任何文本，这就是为什么应该隐藏或禁用键盘的原因，他只能用于文本选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T12:20:11.393

`uitextview.editable = NO;`或在 IB 中设置复选标记。它将允许选择带有选项的文本 - 复制并全选而不出现键盘。点击单词并按住以选择文本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T12:24:22.373

好的，只需取消选中 .xib 文件中 UItextview 的行为即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T12:36:57.310

尝试“可编辑”设置不起作用的方法是创建一个隐藏且不碍事的 UIView，并将其分配为文本视图的 inputView。如果该属性不为零，则将显示它包含的视图而不是键盘。

如：

```
self.textView.inputView = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, 1, 1)] autorelease]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T11:53:51.517

试试这个

yourtextview.UserinterationEnable=否；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T12:07:15.713

这将使键盘消失：

```
[[[UIApplication sharedApplication] keyWindow] endEditing:YES]; 
```

这是你想做什么？

# c# - What is this regular expression's name?

> ID：10105626
> 
> 赞同：1
> 
> 时间：2012-04-11T12:10:19.563
> 
> 标签：c#, regex, naming-conventions, constants

I'm refactoring [this regular expression](https://stackoverflow.com/questions/247546/outlook-autocleaning-my-line-breaks-and-screwing-up-my-email-format/247939#comment3872260_247939) C# string into a constant and I'm not sure how best to name it (my regex fu is weak).

`@"^(?!\s\s)"`

Doesn't the question mark denote something that's optional? What is the question saying is optional?

I've found that, as a developer, you have to clearly understand something before you can properly name it (also: [Naming is Hard](https://blog.stackoverflow.com/2009/03/it-stack-overflow-update-naming-is-hard/)), so I want to clearly understand this and then give it a proper name.

**What is the name of this regular expression?**

I'm considering `LinesThatDoNotStartWithTwoSpaces` or `DoesNotStartWithTwoSpaces`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T12:14:26.550

The construct itself is a Negative lookahead. It specifies a group that can not match after your main expression.

In this case, yes, it matches when the line being matched does not start with two spaces (white spaces ).

I would name the regex as `NotMatchLineStartingWithTwoWhiteSpaces`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T04:17:16.553

I always trying to use `Not` in variable name. For example `NotHuman`, its meaning will change with the definition of `Human`. Also, variable name should tells what-this-is but not what-this-can-do, so I think it's not a good idea to use verb in variable name, such as `Search`, `Match`.

For your case, how about `LineWithoutIndentation`, similar to the property `text-indent` in [CSS3](http://www.w3schools.com/cssref/pr_text_text-indent.asp).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T12:12:50.960

It's called [Negative lookahead](http://www.regular-expressions.info/lookaround.html)

# android - 关于 Spinner INVALID_POSITION 的基本查询

> ID：10105628
> 
> 赞同：2
> 
> 时间：2012-04-11T12:10:27.757
> 
> 标签：android, android-layout, spinner

根据 Android 文档，

公共 int getSelectedItemPosition ()

自：API 级别 1 返回当前选定项目在适配器数据集中的位置 返回 int Position（从 0 开始），如果没有选择，则返回 INVALID_POSITION。

**现在我想知道在哪种情况/情况下返回 INVALID_POSITION ，因为当微调器初始化时，它的默认位置设置为 0 。**

```
 Spinner spinner=(Spinner)findViewById(R.id.spinner1);
    ArrayAdapter<String> adapterVehicleList = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, vehicleTypeList);
    adapterVehicleList.setDropDownViewResource(android.R.layout.select_dialog_singlechoice);
    spinner.setAdapter(adapterVehicleList);
    spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onNothingSelected(AdapterView<?> parent) {
            // TODO Auto-generated method stub

        }
    });

    int position =spinner.getSelectedItemPosition();
             position =spinner.getSelectedItemPosition();
    Toast.makeText(this,String.valueOf(position),Toast.LENGTH_LONG).show();code here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:16:20.790

我怀疑这可能是当一个元素被选择使用`setSelection(int position)`并且位置为负数或大于元素数时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:15:06.360

我相信这就是当你有一个空的微调器时你会得到的，因为在这种情况下什么都不能选择。

# jquery - 如何导航嵌套的 json 数据

> ID：10105630
> 
> 赞同：0
> 
> 时间：2012-04-11T12:10:35.900
> 
> 标签：jquery, json

我需要一些帮助来导航 json 文件。

我希望从这样的回报中获得所有国家/地区名称：

```
[{"country":
    {
     "225":["United Kingdom","Europe"],
     "206":["Switzerland","Europe"],
     "176":["Romania","Europe"],
     "127":["Madagascar","AMEA"],
     "217":["Tunisia","AMEA"]
    }
  }] 
```

当我不知道或没有 225、206 等的列表时，我将如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T12:14:42.197

```
var arr = [
    {
       "country": {
            "225":["United Kingdom","Europe"],
            "206":["Switzerland","Europe"],
            "176":["Romania","Europe"],
            "127":["Madagascar","AMEA"],
            "217":["Tunisia","AMEA"]
       }
    }
] 
```

如果你有一个键（例如`225`），则 `arr[0]["country"]["225"]`返回一个数组`["United Kingdom","Europe"]`

如果您想获取键列表（和相应的值），只需使用

```
var countryObj = arr[0]["country"];
for (key in countryObj) {
   if (countryObj.hasOwnProperty(key)) {
      console.log(key);                /* e.g. 206 */ 
      console.log(countryObj[key]);    /* e.g. ["Switzerland","Europe"] */
      console.log(countryObj[key][0]); /* e.g. "Switzerland" */
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:28:58.597

您也可以将其用作数组，

如果您不知道键 255,256 并且只想获取国家/地区，那么可能一个好方法是使用 jquery 来遍历 jquery 对象

```
$(arr[0]["country"]).each(function(key,country){
  alert(country);
}) 
```

# silverlight - Silverlight中Datagrid的内置滚动条或滚动查看器的定制设计

> ID：10105635
> 
> 赞同：2
> 
> 时间：2012-04-11T12:10:42.473
> 
> 标签：silverlight, datagrid, silverlight-4.0

谁能建议我如何更改`DataGrid`Silverlight 中内置滚动查看器的样式。

现在我`DataGrid`正在采用项目中使用的默认滚动查看器样式，所以我想更改它是否有可能，如果是，请建议我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T23:19:06.917

如果您使用 Expression Blend，在设计模式下，您可以右键单击数据网格 > 编辑模板 > 编辑副本。

在“对象和时间线”窗口中将出现内置组件，包括水平和垂直滚动条：

![在此处输入图像描述](../Images/9bdece0665e03e2b306d84aeea244484.png)

之后，在“对象和时间线”窗口中，右键单击 ScrollBars > Edit Template > Edit Current。XAML 窗口将显示 ScrollBar 样式：

![在此处输入图像描述](../Images/eb3a09cb919c9ddb7fd65a9805e8f77f.png)

我建议您手动复制整个样式并在副本中进行更改。

# c# - 如何将 GridView 作为 ConverterParameter 传递

> ID：10105637
> 
> 赞同：13
> 
> 时间：2012-04-11T12:10:45.787
> 
> 标签：c#, wpf, xaml, data-binding

我正在尝试将 ListView 或 GridView 作为 ConverterParameter 传递但是，在 Converter 例程中，参数以类型字符串的形式出现

下面是 XAML 列表视图和 Converter 类的一部分。

非常感谢任何帮助。谢谢！！！

```
 <ListView Name="SeqDtStDataListView1" Grid.Row="1" 
        DataContext="{Binding Path=DisplayDT[0], Converter ={StaticResource      
                                                       CNVToColumn},ConverterParameter=?????}"
        VerticalContentAlignment="Stretch" VerticalAlignment="Stretch"
                                                       HorizontalAlignment="Stretch"
        SelectionChanged="SEQDatalistview_SelectionChanged"  Margin="5"> 

       <ListView.View >
             <GridView x:Name="SeqDtStDataGridView1"/>
       </ListView.View>
    </ListView> 
```

转换器：

```
namespace MFTest.Converters
{
public class CNVToColumn : IValueConverter
{

    public object Convert(object value,
                          Type targetType, 
                          object parameter,
                          System.Globalization.CultureInfo culture)
    {
        DataTable dt = (DataTable)value;
        GridView GV = (GridView)parameter;                <========= fail here ===========
        if (dt != null && GV != null)
          foreach (var colum in dt.Columns)               // Binding the Columns
          {
                DataColumn dc = (DataColumn)colum;
                GridViewColumn column = new GridViewColumn();
                column.DisplayMemberBinding = new Binding(dc.ColumnName);
                column.Header = dc.ColumnName;
                GV.Columns.Add(column);
          } 
        return null;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }

}
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-13T04:46:02.623

从 .NET 4 开始，您可以使用[`x:Reference`](http://msdn.microsoft.com/en-us/library/ee795380.aspx)它来避免`ElementName`只能在依赖属性上设置的绑定，同时实现几乎相同的事情。

由于循环依赖限制，您不能引用控件本身或其在树中的祖先。但是，您可以将绑定向上移动一个级别并仅继承`DataContext`，例如

```
<Border DataContext="{Binding Path=DisplayDT[0],
                              Converter={StaticResource CNVToColumn},
                              ConverterParameter={x:Reference SeqDtStDataListView1}}">
    <ListView Name="SeqDtStDataListView1" Grid.Row="1"> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-11T14:03:28.733

你不能绑定它。

ConvertParameter 继承自 Object，因此不可绑定。

但是，您可以在后面的代码中定义您的绑定，而不是在 XAML 部分中进行。

```
System.Windows.Data.Binding b = new System.Windows.Data.Binding();
b.ConverterParameter = this; 
```

[请在此处](http://www.shujaat.net/2011/02/wpf-binding-converter-parameter.html)阅读有关 ConvertParameter 的限制

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-04-11T12:18:41.570

你可以使用`ConverterParameter={Binding ElementName=[insert x:Name of grid view]}`

尽管恕我直言，我会重新考虑需求-您真的需要将 UIControl 作为 Converter 参数传递吗？

# api - 如何查询所有国家的所有 iTunes 店面？

> ID：10105638
> 
> 赞同：4
> 
> 时间：2012-04-11T12:10:45.930
> 
> 标签：api, itunes, country, storefront

我有一个 9 位数的 iTunes appID。

当我通过美国商店 [http://itunes.apple.com/us/app/id508611913](http://itunes.apple.com/us/app/id508611913)查询 itunes 时， 它不起作用。

当我在英国（英国）店面 [http://itunes.apple.com/gb/app/id508611913](http://itunes.apple.com/gb/app/id508611913)尝试它时， 它就可以工作了。

如果我在没有指定任何国家/地区的情况下尝试它，它默认为美国，所以它找不到它。

我想一次查询所有国家。Apple 是否提供可以跨所有国家/地区查询的 API？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T17:13:00.457

最简洁的答案是不。”

Apple 确实提供了一个 API（[http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html)），但每个查询都是店面特定的，因此如斯图尔特的第一个答案，您需要在每个国家/地区循环。

我们还为您可能感兴趣的客户提供了一个 API。这就是我们的“可用性工具”（[http://www.georiot.com/availability](http://www.georiot.com/availability)）的动力。

# jsf-2 - JSF 2.0；自定义数据类型类中的“参数类型不匹配”？

> ID：10105640
> 
> 赞同：1
> 
> 时间：2012-04-11T12:10:49.790
> 
> 标签：jsf-2, illegalargumentexception

我将为我的输入字段创建一个自定义数据类型。（见分类“金额”）。在输入字段“amountId”中设置值确实很完美。但是，如果我想提交表单并转到另一个页面，那么我就会遇到“参数类型不匹配”异常。

有人可以解释一下，为什么我会得到这个例外？

*   我需要转换器将输入值转换为字符串吗？
*   我是否忘记了 Amount 类中的一些方法来实现，哪些 JSF 需要获取值？

这是我的代码：

```
public class Amount implements Serializable {
    public Amount(BigDecimal bd){
    }

    public Amount(String s) {
    }

    @Override
    public String toString() {
    }
}

@ManagedBean(name="myBean")
    @RequestScoped
    public class MyBean extends BaseBean {
        private Amount amountValue;
        private UIInput amountValueId;

        public Amount getAmountValue() {
            return amountValue;
        }

        public void setAmountValue(Amount amountValue) {
            this.amountValue = amountValue;
            if (this.amountValueId != null)
                this.amountValueId.setSubmittedValue(amountValue);
        }

        public UIInput getAmountValueIdId() {
            return amountValueId;
        }

        public void setAmountValueId(UIInput amountValueId) {
            this.amountValueId = amountValueId
        }
    }

<h:inputText id="amountValueId" binding="#{myBean.amountValueId}" size="30" value="#{myBean.amountValue}" />

javax.servlet.ServletException: javax.el.ELException: java.lang.IllegalArgumentException: argument type mismatch
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:229)
    org.apache.myfaces.webapp.filter.ExtensionsFilter.doFilter(ExtensionsFilter.java:357)

org.apache.myfaces.view.facelets.el.ContextAwareELException: javax.el.ELException: java.lang.IllegalArgumentException: argument type mismatch
    org.apache.myfaces.view.facelets.el.ContextAwareTagValueExpression.setValue(ContextAwareTagValueExpression.java:166)
    javax.faces.component.UIInput.updateModel(UIInput.java:406)
    javax.faces.component.UIInput.processUpdates(UIInput.java:328)
    javax.faces.component.UIForm.processUpdates(UIForm.java:263)
    javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1469)
    javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1469)
    javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1469)
    javax.faces.component.UIViewRoot._processUpdatesDefault(UIViewRoot.java:1397)
    javax.faces.component.UIViewRoot.access$600(UIViewRoot.java:74)
    javax.faces.component.UIViewRoot$UpdateModelPhaseProcessor.process(UIViewRoot.java:1535)
    javax.faces.component.UIViewRoot._process(UIViewRoot.java:1358)
    javax.faces.component.UIViewRoot.processUpdates(UIViewRoot.java:806)
    org.apache.myfaces.lifecycle.UpdateModelValuesExecutor.execute(UpdateModelValuesExecutor.java:38)
    org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:170)
    org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:117)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:197)
    org.apache.myfaces.webapp.filter.ExtensionsFilter.doFilter(ExtensionsFilter.java:357) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T12:48:28.880

我认为您应该添加转换器来查看[JSF 2.0](http://www.mkyong.com/jsf2/custom-converter-in-jsf-2-0/)`<h:inputText`中的这个自定义转换器，因为您尝试提交到对象`String``Amount`

# c - system() 函数的参数？

> ID：10105644
> 
> 赞同：0
> 
> 时间：2012-04-11T12:11:05.673
> 
> 标签：c, linux, system, system-calls

我想将一个整数作为参数发送给`system()`C 中的函数，但我做不到。

我想这样做是因为我有一些 jpg 文件，它们通常被命名为程序会为一个整数变量分配一个随机选择的值，并使用该函数`1.jpg , 2.jpg ... 17.jpg ... ect.`打开与随机选择的整数同名的图像文件。`system()`

我的设想：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

main()
{
    srand(time(NULL));
    i=rand()%30+1; // for example i=17
    system("eog %d.jpg &",i);  //and i want to open 17.jpg here with eog
} 
```

我知道上面的函数有太多参数`system()`；我只是想举一个我想要的例子。

有没有办法做到这一点，如果没有，我还能怎么做我上面描述的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T12:12:57.400

用于`snprintf`构建您的字符串并将其传递给`system`.

```
char cmd[LEN];
snprintf(cmd, sizeof(cmd), "eog %d.jpg &", i);
system(cmd); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T12:15:33.600

您需要将整数转换为字符串参数：

```
int runSystem(const char *fmt, ...)
{
    char buffer[4096];
    va_list va;
    va_start(va, fmt);
    vsnprintf(buffer, sizeof(buffer), fmt, va);
    va_end(va);
    return system(buffer);
}

main()
{
    srand(time(NULL));

    i=1+rand()%30; // for example i=17

    runSystem("eog %d.jpg &",i);  //and i want to open 17.jpg here with eog

} 
```

# jquery - 链接在水平菜单中不起作用

> ID：10105647
> 
> 赞同：0
> 
> 时间：2012-04-11T12:11:12.390
> 
> 标签：jquery, html, css

`JQuery` 使用except`aerospace`和添加自动滑块后，我的水平链接无法正常工作`automotive`。添加更多超链接，因为由于我的声誉，我无法发布更多 href 链接。

下面是我的jQuery代码：

```
function slideSwitch() {
var $active = $('#slideshow IMG.active');

if ( $active.length == 0 ) $active = $('#slideshow IMG:last');
var $next =  $active.next().length ? $active.next()
    : $('#slideshow IMG:first');
var $sibs  = $active.siblings();
var rndNum = Math.floor(Math.random() * $sibs.length );
var $next  = $( $sibs[ rndNum ] );
$active.addClass('last-active');
$next.css({opacity: 0.0})
    .addClass('active')
    .animate({opacity: 1.0}, 1000, function() {
        $active.removeClass('active last-active');
    });
}

$(function() {
setInterval( "slideSwitch()", 5000 );
}); 
```

html:

```
<div id="hori">
   <ul>
      <li><a href="/home/adapco/Desktop/ksa1" target="name">Aerospace</a></li>
      <li><a href="/home/adapco/Desktop/ksa2.css" target="name">Automotive</a></li>
   </ul>
</div> 
```

CSS：

```
#slideshow
{
position:relative;
height:500px;
right:-570px;
top:-350px
}

#slideshow img
{
position:absolute;
top:0;
left:0;
z-index:8;
}

#slideshow img.active
{
z-index:10;
}

#slideshow img.last-active
{
z-index:9;
} 
```

检查此链接[http://jsfiddle.net/KyRus/20/](http://jsfiddle.net/KyRus/20/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:47:13.040

您有一个 id 为“slideshow”的 div，其中包含一些图像。此 DIV 位于菜单链接的绝对 ONTOP - 因此您不能按链接。因此，您要么需要将幻灯片定位不同，要么也将菜单位置设为绝对位置。

希望能帮助到你 ：）

# css - 试图定位标题

> ID：10105648
> 
> 赞同：0
> 
> 时间：2012-04-11T12:11:12.520
> 
> 标签：css, position

请问我将如何定位（单击以立即注册并下订单）保持在左侧的reacheasy单词和右下方的reacheasy徽标之间的中间是我的标记语言（链接到页面[http://到达easy.co.uk/testerid.php](http://reacheasy.co.uk/testerid.php)）

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
     <title>Reacheasy - Foremost website for shopping from Uk, and globally to Nigeria</title>
   <meta name="description" content="We offer online shopping and shipping from UK stores to Nigeria" />
    <meta name="keywords" content="shipping to nigeria, freight to nigeria,online shopping from uk" />

    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<link href="reasy.css" rel="stylesheet" type="text/css"/>  
</head>
  <body>
<div id="outer">
<div id="page">
<div id="header">
<div id="adban" style="position: absolute; left: 50%; margin-left: -150px;">
<span style="left;"><a href="reregister.php">Click here to Register now and place your orders</a></span>
</div>
<div id="hlogo">
<span style="float:right;margin:2px 2px 0 0;"><img src="img/relogo2.jpg"  class="logoImage" width="96" height="96"/></span>
</div>
<span style="font-size:small;text-shadow: 10px 10px 1px grey;"><h1>Reacheasy<span style="font-size:small;"><?php echo $_SESSION['username'];?></span></h1></span>
<ul id="nav">
    <li class="current"><a href="index.php">Home</a></li>
     <li><a href="women.php">Women</a></li>
     <li><a href="men.php">Men</a></li>
     <li><a href="children.php">Children</a></li>
     <li><a href="homeandappliances.php">Home&amp;Appliances</a></li>
     <li><a href="visionandsound.php">Vision&amp;Sounds</a></li>
      <!--<li><a href="motoring.php">Motoring</a></li>-->
      <li><a href="homemore.php">More</a></li>
      <li><a href="howto.php">Help(How to?)</a></li>
  </ul>
</div> <!--end of navigation div -->
</div>
<div id="navigation">

<?php
if($_SESSION['username'])
{ ?>
<ul id="navigationlb">
<li><a href='howto.php'>Help(How to?)</a></li>
<li><a href='notification.php'>Consignment notification</a></li>
<li><a href='youraccount.php'>Order Placement</a></li>
<li><a href='relogout.php'>Log out</a></li>
 </ul>
<?php }else{
?>
  <div>
<form action='relogin.php' method='post' class='rl'>
<fieldset>
<legend>Login</legend>
    <div>
    <label for='username' class='fixedwidth'>Username</label>
    <input type='text' name='username' id='username'/>
    </div>

    <div>
    <label for='password' class='fixedwidth'>Password</label>
    <input type='password' name='password' id='password'/>
    </div>
<div class='buttonarea'>
    <input type='submit' value='Log in'/>
    </div>
<p>
<a href='reregister.php'>Register </a>
<BR>PLACE YOUR ORDERS FROM ANYWHERE</BR> 
IN THE WORLD </BR> TO NIGERIA
</p>
<!--<p>
<BR>PLACE YOUR ORDER FROM ANYWHERE</BR> 
IN THE WORLD </BR> TO NIGERIA
</p>-->
</fieldset>
</form>
</div>
<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:26:20.703

Just apply

`top:50%` in your adban div

```
<div id="adban" style="margin-left:-150px; position:absolute; left:50%; top:50%;"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:19:52.563

为您的元素添加一些 CSS 样式`adban`，这样的事情应该可以解决问题：

```
<div id="adban" style="position: absolute; left: 50%; margin-left: -150px;"> 
```

# javascript - 我在这个 javascript 贷款计算器上遗漏了什么？

> ID：10105649
> 
> 赞同：1
> 
> 时间：2012-04-11T12:11:16.370
> 
> 标签：javascript, math, calculator

我正在尝试在 js 中构建一个非常简单的贷款计算器，用户在其中输入金额、利率以及每月付款或支付贷款的时间长度，然后计算器应该显示每月付款的结果金额，贷款的总时间和包括利息在内的总还款额。

我确信我的数学是正确的，但它似乎无法计算。我确实让它在以前的版本中工作，所以我想我可能会遗漏一些东西。希望你们中的一个人有足够的鹰眼来告诉我我做错了什么。

这是代码：http: [//jsfiddle.net/LsJ5U/](http://jsfiddle.net/LsJ5U/)

提前感谢你们可以提供的任何帮助。

干杯，

伊恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:24:17.060

您应该使用 .value 来获取第一个文本字段的值。

这是更新的小提琴。[http://jsfiddle.net/luan/LsJ5U/4/](http://jsfiddle.net/luan/LsJ5U/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T12:30:13.673

您的 conBalance 集合是错误的，当您想要的是值时，您正试图提取 innerTEXT。因为这是错误的，所以您的 conBalance 是一个空字符串（因为该元素的 innerTEXT 为空。

所以你应该有

```
var conBalanceElement = document.getElementById('conBalance');
var conBalance = conBalanceElement.value; 
```

代替

```
var conBalanceElement = document.getElementById('conBalance');
var conBalance ;
if (document.all) {
    conBalance = conBalanceElement.innerText;
}
else {
    conBalance = conBalanceElement.textContent;
} 
```

在您的小提琴示例中，这些更改足以产生每月还款和总还款（没有检查数学，因为您似乎对它们足够自信）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T12:24:33.347

conBalance 没有得到值

这有效： var conBalance = document.getElementById('conBalance').value;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T12:28:32.957

[http://jsfiddle.net/LsJ5U/6/](http://jsfiddle.net/LsJ5U/6/) - 这里是固定的，用于获得总贷款的价值。

PS 此外，创建一个将结果放入 html 的函数也是一个好习惯，而不是 4 次复制脚本

# r - 通过用零填充空白的行名将向量组合到数据帧

> ID：10105653
> 
> 赞同：1
> 
> 时间：2012-04-11T12:11:36.260
> 
> 标签：r, vector

我有以下难题。我有一个看起来像的数据框 x：

```
 v2      v3    
10   4.0      3.0
11   5.0      3.0
12   6.0      9.0
13   5.0      6.0    # where 10-14 are rownames
14   3.0      6.0 
```

然后是数据名 y：

```
 value        
11   99            
13   88      #where 11,13,14 are row names
14   33 
```

我想为匹配行名的 x 添加值并用 zeros.ie 填充空白：

```
 v2      v3    value
10   4.0      3.0     0
11   5.0      3.0     99
12   6.0      9.0      0
13   5.0      6.0     88
14   3.0      6.0     33 
```

虽然如果我必须用 NA 填充，也许我可以这样做，然后在新的 y 向量中将 NA 更改为零。

我一直在尝试 使用的变化`rbind.fill`，但我没有达到我希望的方式。`plyr``newDF<-do.call(rbind.fill)`

编辑我得到它给 NAS 使用 `merge(x,y,all=TRUE,by='row.names')`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:24:53.703

我会这样做：

```
y$row <- rownames(y)    # add a 'helper' column for the merge function.
x$row <- rownames(x)
n <-merge(x,y, by='row', all=T)
n <- n[,-1]    # remove the 'helper' column 
```

然后将 NA 替换为 0：

```
n[is.na(n$value),]$value = 0 
```

但是，如果您的 y/x 数据框中有 NA，这将失败，或者会产生错误的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:16:05.737

如果它只是一个列，这是另一种方法，虽然可能不是最好的，而是另一种方法：

```
x$value <- ifelse(rownames(x) %in% rownames(y), y$value, 0) 
```

# php - 适用于 Windows 的 PHP 代码编辑器

> ID：10105654
> 
> 赞同：-5
> 
> 时间：2012-04-11T12:11:36.307
> 
> 标签：php, windows, editor, textmate

目前我在 MAC 上使用 TextMate 进行 PHP 编辑。我想知道 WINDOWS（与 TextMate 相媲美）有哪些好的编辑器。

我希望编辑器应该支持的最重要的功能是“代码片段的自动完成”，例如：

```
p (tab key)  =>  outputs: <?php ?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:21:51.303

好吧，我正在使用成熟的**[JetBrains PhpStorm IDE](http://www.jetbrains.com/phpstorm/)**，我喜欢它。（有薪酬的）

在此之前，我使用**[了 MPSoftware phpDesigner](http://www.mpsoftware.dk/phpdesigner.php)**，它也很棒（而且速度很快！）。（也付费）

如果您不是在寻找完整的 IDE，而只是在寻找文本编辑器。我建议**[记事本++](http://notepad-plus-plus.org/)**。（自由的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T03:47:37.680

网豆记事本++

他们都是免费的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T02:59:28.397

[Sublime Text 2 (beta)](http://www.sublimetext.com/dev)在哲学上与 TextMate 非常相似，但更“现代”并且更积极、更透明地开发。它适用于 TextMate 的片段机制，它是跨平台的（Win/Mac/Linux），它是可扩展的……</p>

除了 ST2，Windows 上有许多面向 PHP 的文本编辑器，但我认为其中很多都没有适当的“片段扩展”系统。但是，现在大多数 IDE 都可以。

或者，如果您准备好深入研究，Vim 或 Emacs 可以同时击败 ST 2 和 TM。

# c# - WP 7 - HttpWebRequest 编码 ISO-8859-2

> ID：10105659
> 
> 赞同：0
> 
> 时间：2012-04-11T12:11:44.337
> 
> 标签：c#, html, windows-phone-7, encoding

我有这个代码：

```
 private void HandleWebResponse(IAsyncResult asyncResult)
    {
        WebRequestState state = (WebRequestState)asyncResult.AsyncState;

        HttpWebRequest request = state.Request;
        string url = request.RequestUri.ToString();
        state.Response = (HttpWebResponse)request.EndGetResponse(asyncResult);
        string absolutePath = state.Response.ResponseUri.AbsolutePath;

        if (state.Response != null)
        {
            StreamReader reader = new StreamReader(state.Response.GetResponseStream(),Encoding.GetEncoding("ISO-8859-1"));
            StringBuilder sb = new StringBuilder();
            while (!reader.EndOfStream)
                sb.Append(reader.ReadLine());
            ... 
```

我有编码 ISO-8859-2 的网页，但 WP7 不支持这种编码。如何将此编码转换为另一种编码？或者你有提示如何绕过这个问题？谢谢你的每一个建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:18:21.380

只需使用[Silverlight 编码生成器](http://www.hardcodet.net/2010/03/silverlight-text-encoding-class-generator)即可获得所需的编码！

# c - 编译错误：“{”标记之前的预期表达式

> ID：10105660
> 
> 赞同：-3
> 
> 时间：2012-04-11T12:11:47.680
> 
> 标签：c, compiler-errors

我收到错误

```
错误：“{”标记之前的预期表达式
```

尝试编译以下代码时：

```
#include <stdio.h>

int main()
{
    srand (time(NULL));
    int Seat[10] = {0,0,0,0,0,0,0,0,0,0};
    int x = rand()%5;
    int y = rand()%10;

    int i, j;
    do {
        printf("What class would you like to sit in, first (1) or economy (2)?");
        scanf("%d", &j);
        if(j == 1){
            Seat[x] = 1;
            printf("your seat number is %d and it is type %d\n", x, j);
        }
        else{
            Seat[y] = 1;
            printf("your seat number is %d and is is type %d\n", y, j);
        }
    }while(Seat[10] != {1,1,1,1,1,1,1,1,1,1});
} 
```

背景：该程序旨在成为一个航空公司座位预订系统。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T12:15:49.070

该行：

```
 while(Seat[10] != {1,1,1,1,1,1,1,1,1,1}); 
```

不是有效的 C 语法。我会添加一些变量，例如`allOccupied`并执行以下操作：

```
bool allOccupied = false;
do
{
   ...
   //Check if all Seats are occupied and set allOccupied to true if they are
}
while (!allOccupied); 
```

另一种选择是添加如下内容：

```
int Full[10] = {1,1,1,1,1,1,1,1,1,1};
do
{
}
while(memcmp(Full, Seat, sizeof(Full)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:16:43.553

您正在使用以下内容来检查所有数组元素是否为 1：

```
while(Seat[10] != {1,1,1,1,1,1,1,1,1,1}); 
```

这是不正确的。您需要运行一个循环并检查每个元素，或者更好的方法是保留已更改为的元素的计数`0`并`1`使用该计数来打破循环。

# php - 我不断收到未定义的索引通知

> ID：10105663
> 
> 赞同：0
> 
> 时间：2012-04-11T12:11:52.523
> 
> 标签：php, javascript, html, undefined-index

我有一个包含文件输入的表单：

```
 var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='startImageUpload(this);' class='imageuploadform' ><label>" + 
    "Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/><label class='imagelbl'>" + 
    "<input type='submit' name='submitImageBtn' class='sbtn' value='Upload' /></label>" + +
    "</p> <iframe class='upload_target' name='upload_target' src='#' style='wclassth:0;height:0;border:0px;solclass #fff;'></iframe></form>"); 
```

这链接到上传文件的 php 脚本：

```
<?php

   $destination_path = str_replace("//", "/", $_SERVER['DOCUMENT_ROOT']."/")."ImageFiles";

   $result = 0;

   $target_path = $destination_path . basename( $_FILES['fileImage']['name']);

   if(move_uploaded_file($_FILES['fileImage']['tmp_name'], $target_path)) {
      $result = 1;
   }

   sleep(1);
?>

<script language="javascript" type="text/javascript">window.top.window.stopImageUpload(<?php echo $result; ?>);</script> 
```

问题是，在 php 脚本中，它表明我有一个未定义的索引，无论它在 php 脚本中指出“fileImage”。但是我不知道为什么当我在“fileImage”形式的名称属性中提到时，它说我有未定义的索引。为什么说我在 php 脚本中有一个未定义的“fileImage”索引？

这是一个应用程序的链接，您可以在其中附加包含文件输入的行，您可以对此进行测试并自行查看是否愿意，但目前它一直说在上传过程中出现错误。[应用](http://helios.hud.ac.uk/u0867587/Mobile_app/QandATable2.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:27:36.757

导致此错误的根本原因可能有很多，但实际原因是`$_FILES`数组没有字符串索引`'fileImage'`。

为了更好地查看哪些索引可用，您可以执行以下操作：

```
var_dump(array_keys($_FILES)); 
```

参见[`array_keys`](http://php.net/array_keys)和[`var_dump`](http://php.net/var_dump)。

可能以下内容（在此问题中未记录的 javascript 代码）正在破坏您的表单或其数据中的某些内容：

```
onsubmit='startImageUpload(this);' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:01:35.290

我以前遇到过同样的问题，这是因为我的 ajax/javascript 代码。作为测试，请尝试在不使用 javascript 的情况下发送您的表单。这样，您将知道问题的确切位置。如果错误消失，您的问题可能与 javascript 有关。

我从来没有真正找到使用 ajax 上传文件的正确解决方案。我通过将表单发送到 iframe 解决了这个问题，然后在完成加载后收集反馈。

我会在表单标签上做这样的事情：`<form action="..." target="myframe">`。`name="myframe"`用and创建一个框架`onload="getResults()"` 这很模糊，但我希望它能给你一个想法。

使用时要小心，`onload`因为它会触发两次。当页面第一次加载完成时，以及表单完成提交时。

我希望我没有完全误解你的意思。

# terminal - 清除终端屏幕？

> ID：10105666
> 
> 赞同：18
> 
> 时间：2012-04-11T12:11:59.193
> 
> 标签：terminal, arduino, refresh, erase

我正在为我的机器人从 9 个不同的传感器读取数据，我需要在同一个窗口中稳定地显示它们，这样我就可以比较这些值并查看是否有任何读数关闭。

我在 Serial.print 和 lcd.print 中遇到的问题是值在不断变化，我在移动机器人时无法真正看清它们。

我正在考虑在显示其他任何内容之前调用类似 Serial.clear() 的东西，这只会让事情保持稳定并在一个地方，只改变值。

从我目前发现的情况来看，例如 Serial.print(17,BYTE) 不再受支持（调用 ESC 键）。

所以......对于那些有更多 Arduino 经验的人......这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-21T22:20:50.620

Arduino 串行监视器不是常规终端，因此无法使用标准终端命令清除屏幕。我建议使用实际的终端仿真器，例如[Putty](http://www.putty.org/)。

清除终端屏幕的命令是 ESC[2J

要在 Arduino 代码中完成：

```
 Serial.write(27);       // ESC command
  Serial.print("[2J");    // clear screen command
  Serial.write(27);
  Serial.print("[H");     // cursor to home command 
```

资料来源： http:
[//www.instructables.com/id/A-Wireless-Controlled-Arduino-Powered-Message-B/step6/Useful-Code-Explained-Clearing-a-Serial-Terminal/](http://www.instructables.com/id/A-Wirelessly-Controlled-Arduino-Powered-Message-B/step6/Useful-Code-Explained-Clearing-a-Serial-Terminal/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-14T02:14:06.837

没有办法清除屏幕，但是，一个非常简单的伪造它的方法可以打印尽可能多`Serial.println();`的内容，以将所有旧数据保留在屏幕之外。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-01-19T19:28:38.873

我发现 ASCII 12 制作了一个**Form feed**，这是一个新页面。这是维基百科的定义

> “换页是一个分页的 ASCII 控制字符。它强制打印机弹出当前页面并在另一页的顶部继续打印”

代码是

```
Serial.write(12); 
```

**Arduino Terminate 不支持字符**，但[Putty](http://www.putty.org/)一个轻量级的开源 telnet 客户端可以做到

代码示例

```
void setup() {
  Serial.begin(9600);//Initializase the serial transmiter speed

}

void loop() {
    //Code tested with Putty terminal

    Serial.write(12);//ASCII for a Form feed
    Serial.println("This is the title of a new page");// your code

    delay(500);//delay for visual
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-08T04:05:04.847

你可以试试：

```
Serial.write(13); 
```

哪个将提供一个回车，每次迭代都返回到行首 - 这应该做你所追求的？（特别是如果一切都是固定宽度）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-11T16:32:15.983

ESC 是字符 _ *2* _7，而不是 _ *1* _7。您也可以尝试十进制 12（又名 FF，换页）。

请注意，所有这些特殊字符都不是由 Arduino 处理的，而是由接收方的程序处理的。因此，一个标准的 Unix 终端（xterm、gnome-terminal、kterm，...）处理一组不同的控制序列，然后说一个 Windows 终端程序，如 HTerm。

因此，您应该指定您正在使用什么程序进行显示。之后，可以告诉您哪些控制字符和控制序列是可用的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-11T16:34:17.950

无法根据传入的串行数据清除串行监视器窗口。

我可以想到几个选项，最简单（也是最欺骗的）是使用`println()`您生成的包含传感器数据的固定宽度字符串。

Arduino IDE 的串行监视器`Autoscroll`复选框意味着如果您持续发送固定宽度的字符串（可能有 500 毫秒的延迟），这将给人的印象是它一旦到达底部并开始滚动就会更新。您还可以缩小窗口的高度，使其看起来只有一条线。

要完成适合串行的固定宽度字符串，`println()`您需要将传感器值转换为字符串的函数，以及将它们填充/修剪为持久大小。然后将这些值连接在一起（如果它使数据更易于阅读，则包括分隔符）

与此类似的输出是我所暗示的：

```
| 1.0 | 1.1 | 1.2 | 1.3 | 1.4 | 1.5 | 1.6 | 1.7 | 1.8 | 
```

考虑到所有因素，这不是一个很好的解决方案，但它会给你一个结果。

一个更聪明的想法是在 Arduino 之外构建另一个程序，它是 IDE，它监听 com 端口以获取从 Arduino 发送的传感器值。您的 Arduino 程序需要发送您的外部程序可以明确解释的消息，例如`1=0.5;`1 = 传感器 ID 和 0.5 = 传感器值。然后，外部程序将保留这些值（每个传感器 1）。然后，外部程序可以以您喜欢的任何方式显示此信息，一个不错的控制台输出将相对容易实现:-)

`C#`has`.NET`的`serialport`类，使用起来很愉快。（大多数时候！）

Python 有一个名为 的模块`pyserial`，它也很简单。

如果您选择以这种方式进行，任何一种语言都可以让您更好地控制控制台输出。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-11T14:20:15.017

我能想到的最好的方法是使用[处理](http://processing.org/)，网上有一些介绍，比如[显示串行数据](http://arduinobasics.blogspot.com/2011/06/displaying-serial-data-from-arduino-uno.html)、[arduino 图](http://arduino.cc/en/Tutorial/Graph)和[arduino 雷达](http://www.uchobby.com/index.php/2009/03/08/visualizing-sensor-with-arduino-and-processing/)
， 因为 Arduino 是基于处理的，所以学习起来并不难

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-04-03T09:39:58.913

例如，如果您来回更改波特率，它将清除用于英特尔 Galileo 开发的 Arduino IDE 1.5.3 版中的串行监视器窗口

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-06-13T05:43:25.930

另一个踢罐头：

```
void setup(){     /*123456789 123456789 123456789 123456789 123*/
  String newRow="\n|________________________________________";
  String scrSiz="\n|\n|\n|\n|\n|\n|\n|\n|\n|\t";
  Serial.begin(115200);  
       // this baudrate should not have flicker but it does as seen when
       // the persistence of vision threshold is insufficiently exceeded
       // 115200 baud should display ~10000 cps or a char every 0.1 msec
       // each 'for' loop iteration 'should' print 65 chars. in < 7 msec
       // Serial.print() artifact inefficiencies are the flicker culprit
       // unfortunately '\r' does not render in the IDE's Serial Monitor

  Serial.print( scrSiz+"\n|_____ size screen vertically to fit _____"  );
  for(int i=0;i<30;i++){
     delay(1000); 
     Serial.print((String)scrSiz +i +"\t" + (10*i) +newRow);}
}
void loop(){} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-07-28T09:59:36.383

你可以这样做：

```
Serial.println("\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"); 
```

或者如果你想：

```
for (int i=0; i<100; i++) {
   Serial.print("\n");
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-11-19T20:49:44.660

imprime en linea los datos con un espaciado determinado, asítendrás columnas de datos de la misma variable y será más claro

打印所有数据行，所以你有你需要的数据行，我只是解决了同样的问题，只是让你有一个恒定的数据大小和间距，我做了这个

```
Serial.print("cuenta q2: ");
Serial.print( cuenta_pulsos_encoder_1,3);
Serial.print("\t");
Serial.print(q2_real,4);
Serial.print("\t");
Serial.print("cuenta q3: ");
Serial.print( cuenta_pulsos_encoder_2,3);
Serial.print("\t");
Serial.print(q3_real,4);
Serial.print("\t");
Serial.print("cuenta q4: ");
Serial.print( cuenta_pulsos_encoder_3,3);
Serial.print("\t");
Serial.println(q4_real,4); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-06-14T11:15:18.183

如果你们中的一个人在 proteus 中使用虚拟终端并想清除它，只需添加 Serial.write(0x0C); 它会正常工作

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-01-12T05:23:36.797

我这样做`simple function`是为了实现这一点：

```
void clearscreen() { 
    for(int i=0; i<10; i++) {
        Serial.println("\n\n\n\n\n\n\n\n\n\n\n\n\n\n");
    }
} 
```

它适用于我`default terminal`

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2014-12-09T20:10:08.103

```
/*
As close as I can get to Clear Screen

*/

void setup() {
// put your setup code here, to run once:
Serial.begin(115200);

}

void loop() {

Serial.println("This is Line ZERO ");

// put your main code here, to run repeatedly:

for (int i = 1; i < 37; i++)
{

 // Check and print Line
  if (i == 15)
  {
   Serial.println("Line 15");
  }

  else
   Serial.println(i);  //Prints line numbers   Delete i for blank line
  }

  delay(5000);  

  } 
```

# struts2 - Struts2 中的 DisplayTag 用于分页

> ID：10105668
> 
> 赞同：0
> 
> 时间：2012-04-11T12:12:05.377
> 
> 标签：struts2, displaytag

我想将分页应用于我的 struts2 Web 应用程序。当用户登录时，我将他们重定向到主页，我想在主页上使用`display`标签显示所有用户。

我已经完成了研究并最终将其集成到我的 struts2 中，但是当我登录后运行代码时，它会显示消息`Nothing found to display`。

当我在 struts1.3 中以[该站点](http://www.vaannila.com/struts/struts-example/struts-pagination-example-1.html)为例进行了相同的操作时，它就可以工作了。我已将以下 JAR 文件复制到我的`lib`文件夹中：

```
commons-logging.jar
commons-lang.jar
commons-collections.jar
commons-beanutils.jar
displaytag-1.2.jar 
```

我也复制`displaytag.tld`到`struts-2.17.dtd`了我的`web-inf`文件夹中。

下面是我的代码：

我的个人资料.jsp

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<%@taglib uri="http://displaytag.sf.net" prefix="display" %>
<%@taglib uri="/struts-tags"  prefix="s" %>
<html>
   <head>
   </head>
<body>
    <div id="wrapper">
        <div id="steps">
            <fieldset class="step">
                <legend>Profile
                    </legend>
                <display:table id="data" name="list" requestURI="/display.action" pagesize="1" >
                    <display:column sortable="true">
                        <p>
                            <label for="username">User Name</label>
                            <input id="username" name="username" value="<s:property value="firstName" />" disabled="disabled"/>
                        </p>
                        <p>
                            <label for="email">Father Name</label>
                            <input id="email" name="email" value="<s:property value="lastName"/>" disabled="disabled" />
                        </p>
                        <p>
                            <label for="password">Age</label>
                            <input  name="password" value="<s:property value="dob"/>" disabled="disabled"/>
                        </p>
                        <p>
                            <label for="address">Address</label>
                            <input name="address"  value="<s:property value="emailID"/>" disabled="disabled"/>
                        </p>
                </fieldset>
                    </div>
                </display:column>
            </display:table>
        </div>
    </div>
</body>
</html> 
```

Struts.xml

```
<action name="display" class="com.java.action.SearchAction">
        <result name="success">/profile.jsp</result>
        <result name="errror">/error.jsp</result>
</action> 
```

SearchAction.java

```
private ArrayList<UserBean> list=new ArrayList<UserBean>();
//setter getter 
public String execute()
{
    UserBean rt=new UserBean();
    SearchDB user=new SearchDB();
    this.setList(user.search(gender,age_min,age_max,religion,caste,photo_display));
    return SUCCESS;
} 
```

用户Bean.java

```
public class UserBean {

private String emailID;
private String userName;
private String gender;
private String dob;
private String firstName;
private String lastName;
private int Id;
//setter and getter
} 
```

SearchDB.java

```
//code to get records. their is no problem here because it is taking records out from db fine. 
```

我不确定，但我的猜测是`requestURI`和 name 属性，`displaytag`因为在上面链接的示例中，他们使用`name="sessionScope.UserForm.userList"`. 有人能告诉我我哪里做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T16:53:30.077

您可能已经解决了它，但无论如何...尝试 OGNL 像这样：

```
<input id="username" name="username" value="%{data.firstName}" disabled="disabled"/> 
```

它直接使用用户属性的 getter。顺便说一句，我不确定您的禁用标签。您可能应该使用 readonly 代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:27:50.697

您已经设置了显示标签的总记录数，例如，

```
<display:table id="data" name="lstEntities"
                        sort="external" uid="row" htmlId="rowid" class="tborder"
                        style="width:100%"  excludedParams="*"
                        pagesize="${pageCriteria.recordsPerPage}" partialList="true"
                        size="${pageCriteria.totalRecords}" export="false"
                        requestURI="XXX.action">

   public class PaginationCriteria implements Cloneable, CommonConstants,
            Serializable {

        /**
         * Holds the Unie value of Class.
         */
        private static final long serialVersionUID = 8047568459658871831L;

        /**
         * Stores cache Mode.
         */
        private boolean cached;

        /**
         * Stores current page number in the user screen.
         */
        private int currentPage;

        /**
         * Holds the Name of the attribute in Entity to be unique.
         */
        private String distinctRootEntityName;

        /**
         * Stores the information about no of entities to be fetched.
         */
        private boolean fetchAll;

        /**
         * Stores the information about no. of records to be fetched.
         */
        private int recordsPerPage;

        /**
         * Stores the secondary sort column of the entity.
         */
        private String secondarySortBy;

        /**
         * Stores the Sort column of the entity.
         */
        private String sortBy;

        /**
         * Stores the sort order of the entity.
         */
        private boolean sortDescending;

        /**
         * Stores total no. of records.
         */
        private int totalRecords;

//Getters and setters of this properties   

} 
```

从动作类设置每页的记录和页面的第一条记录以及所有内容。在查询执行中设置执行的总数。在 Action 类中有这个域对象。

在 action 类中使用下面的方法来设置分页信息，

```
/**
     * Fills the Sort column, order, page number to be retrieved.
     * 
     * @param tableId -
     *        Display tag table Id to retrieve the Sort column, order, page
     *        number
     * @param defaultOrderCoulmn -
     *        If no parameter passed for sorting default order column will be
     *        applied.
     */
    protected void fillPaginationInfo(final String tableId,
            final String defaultOrderCoulmn, final String secondarySortColumn) {
        BaseAction.LOGGER.debug(BaseAction.LOG_PREFIX
                + "calling fillPaginationInfo param: tableId :" + tableId
                + "\ndefaultOrderCoulmn:" + defaultOrderCoulmn);
        this.getPageCriteria().setCurrentPage(
                this.getPageNumber(this.getHttpRequest(), tableId));
        String orderBy = this.getSortColumn(this.getHttpRequest(), tableId);
        this.getPageCriteria().setSortBy(
                orderBy == null || orderBy.equals("null") ? defaultOrderCoulmn
                        : orderBy);
        this.getPageCriteria().setSortDescending(
                this.getSortOrderDesc(this.getHttpRequest(), tableId));
        if (secondarySortColumn != null)
            this.getPageCriteria().setSecondarySortBy(secondarySortColumn);
        BaseAction.LOGGER.debug(BaseAction.LOG_PREFIX
                + "done fillPaginationInfo");
    } 
```

希望它会有所帮助。如果您需要任何其他信息，请告诉我。

# drupal - 使用 Yahoo Pipes 的类别提要

> ID：10105674
> 
> 赞同：0
> 
> 时间：2012-04-11T12:12:45.843
> 
> 标签：drupal, rss, yahoo-pipes

我正在使用 Yahoo Pipes API 创建一个应用程序，在该应用程序中我从不同的网站获取提要。这些提要最初是博客的主要 RSS 提要。但是，我只需要获取属于类别的那些提要。

[因此，假设在http://www.mysitename.ccom/rss.xml](http://www.mysitename.ccom/rss.xml)有一个带有 rss 提要的站点 mysitename.com 该站点的类别如下

```
Nation/World    
sports
politics
LocaL   
health  
specials    
spotlight   
weather 
```

现在我希望只获取这些特定标签的 RSS。

首先，我正在寻找某种方法来使用 Yahoo Pipe API 过滤器来获取仅包含这些标签/类别的提要，但 yahoo 管道过滤器仅支持使用作者姓名、标题、内容进行过滤，但不支持使用标签或类别进行过滤。

我的问题是：

1.  是否可以使用其他运算符在 Yahoo Pipes API 中过滤这些提要？
2.  此外，如果这不可能，我可能希望简单地添加诸如 mysitename.com/tag1 之类的 URL，但我无法在此 CMS（Drupal）中找到特定标签的提要。我想知道如何抓住它。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T21:46:54.053

通常，网站为每个类别提供单独的提要，CNN 和 BBC 就是很好的例子。所以很少需要复杂的过滤。听起来您正在尝试对其他人的 RSS 混搭进行 UN-mash，当然可以这样做，但更容易找出它从哪里获取源数据。

**Yahoo Pipes Tip#4** # 由于 Yahoo Pipes 的 V2 版本，一些选项已从 GUI 的下拉选择器中删除，但仍然存在于后端的内部工作中。除了*item.authorname*、*item.title*、*item.description*等选择器之外，您还可以手动输入**item.content**来对所有数据执行过滤或正则表达式等操作，而不仅仅是指定标签之间的部分。

# asp.net - 使用 reCAPTCHA 进行登录控制

> ID：10105675
> 
> 赞同：1
> 
> 时间：2012-04-11T12:12:49.440
> 
> 标签：asp.net, vb.net, recaptcha

我希望在登录屏幕上将[https://developers.google.com/recaptcha/docs/aspnet添加到 ASP.NET/VB 项目中。](https://developers.google.com/recaptcha/docs/aspnet)但是，有没有办法跟踪无效尝试，然后增加登录所需的时间？还是我需要创建自己的基于验证码的系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:37:56.333

您可以在 web.config 中执行此操作

```
 <configuration>
       <system.web>
          <membership defaultProvider=" ">
            <providers>
              <clear/>
                <add connectionStringName=""
                 applicationName=""
                 maxInvalidPasswordAttempts="3 "
                 passwordAttemptWindow="30"
                 name=""
                 type=""/>
               </providers>
              </membership>
         </system.web>
    </configuration> 
```

# c# - 将 UserControl 拖放到不同的窗体

> ID：10105678
> 
> 赞同：1
> 
> 时间：2012-04-11T12:12:58.420
> 
> 标签：c#, winforms

基本上，情况是这样的：FormA 有一个 UserControl（它包含 5 个标签和一个 picbox），并且被命名为“cardShowing”。

```
private void cardShowing_MouseDown(object sender, MouseEventArgs e)
{
    DoDragDrop(cardShowing, DragDropEffects.Copy);
} 
```

FormB 是拖动的目标

```
private void HandForm_DragDrop(object sender, DragEventArgs e)
{
    e.Effect = DragDropEffects.Copy;
    CardControl card = (CardControl)e.Data.GetData(typeof(CardControl));
    card.BorderStyle = BorderStyle.FixedSingle;
    card.Location = new Point(cardControl3.Location.X + 187, cardControl1.Location.Y);
    //cardControl1 and 3 are other controls already present on FormB
    this.Controls.Add(card);//add the card to the controls colection
} 
```

最后，结果是FormA失去了控制权而FormB获得了控制权（虽然效果是'复制'），但是属性变成了默认值-BorderStyle原本是FixedSingle，即使我确保这个属性设置为FixedSingle，它变成“无”。“位置”属性也是如此。

现在，我想做的不是将控件从其原始形式中删除，而是转移其实际属性。

**编辑** 我发现问题出在这条线上：

```
CardControl card = (CardControl)e.Data.GetData(typeof(CardControl)); 
```

那是因为它始终为空。我已经尝试过使用我编写的不同类而不是用户控件，但它仍然给出 null。有谁知道为什么会这样？

# c# - 要构建共享程序集，是否需要签名开销？

> ID：10105687
> 
> 赞同：1
> 
> 时间：2012-04-11T12:13:23.440
> 
> 标签：c#

> **可能重复：**
> [共享程序集 - 是否需要签名？](https://stackoverflow.com/questions/2877481/shared-assembly-is-signing-required)

如果我想构建一个共享程序集，是否需要签署和管理密钥对的开销？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:16:56.167

如果要将程序集部署到[全局程序集缓存](http://msdn.microsoft.com/en-us/library/yf1d93sz%28v=vs.71%29.aspx)，则需要对程序集进行签名：

> 部署在全局程序集缓存中的程序集必须具有强名称。

在其他部署场景中，强名称（这意味着签名）不是必需的，但鼓励使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:16:44.983

首先，构建共享程序集确实涉及使用加密密钥。在构建程序集时只需要公钥。面向 .NET Framework 的编译器提供命令行选项（或使用自定义属性）以在构建程序集时提供公钥。在源数据库中保留一个公共公钥的副本并将构建脚本指向该密钥是很常见的。在组件发货之前，必须使用相应的私钥对组件进行完全签名。这是使用名为 SN.exe（强名称）的 SDK 工具完成的。

强名称签名不像 Authenticode 那样涉及证书。不涉及第三方组织，无需支付任何费用，也没有证书链。此外，验证强名称的开销远低于 Authenticode。但是，强名称不会做出任何关于信任特定发布者的声明。强名称允许您确保给定程序集的内容没有被篡改，并且在运行时代表您加载的程序集来自与您开发所针对的发布者相同的发布者。但它没有说明您是否可以信任该发布者的身份。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T12:17:43.803

其实没有。.NET 不会强制您对程序集进行签名。此外，.NET 中的所有程序集都是共享的。您不能像使用 C++ 或任何其他本地语言一样构建静态库。

您需要签署程序集的唯一情况是您需要在[Globall Assembly Cache](http://www.google.ge/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCEQFjAA&url=http://en.wikipedia.org/wiki/Global_Assembly_Cache&ei=VnaFT7HWKIndsgaj7NzVBg&usg=AFQjCNEpJI_YwwAqTWCKd5soxUdM18upog)中部署它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T12:17:43.427

不，这不是必需的。
签名可用于增加信任，例如在使用有效证书唱歌时，或在您对程序集进行强名称签名时防止程序集被更改。
只有[GAC](http://en.wikipedia.org/wiki/Global_Assembly_Cache)中的程序集需要签名。

# macos - 用于提交应用程序世界的 zip 文件的 Blackberry 批量导入会导致无效的二进制错误

> ID：10105689
> 
> 赞同：1
> 
> 时间：2012-04-11T12:13:27.330
> 
> 标签：macos, blackberry, import

我使用在 Apple Mac 上运行的 Eclipse 开发了一个黑莓应用程序。以这种方式开发意味着我必须直接在设备上进行测试，因为我找不到适用于 Mac 的模拟器。现在应用程序已打包并准备好上传，我已经通过我的供应商帐户使用了批量导入选项，但我不断收到 Invalid Binary 错误，它指的是文件 DS_Store 附有很多数字。有人遇到过这个或知道这些文件是什么吗？除了我的应用程序代码文件和 devices.txt 文件之外，我的 zip 存档中没有任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:53:31.733

请按照此步骤获取 .zip 文件以进行发布：
[Contents of a .zip file for a release](http://docs.blackberry.com/en/developers/deliverables/25819/Options_for_a_zip_file_for_a_release_664581_11.jsp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T07:56:24.997

事实证明，这些`DS_Store`文件夹是在 Apple Mac 上自动创建的并且是隐藏的。因此，当我使用我的 cod 文件和`devices.txt`文件包创建发布文件夹时，这些`DS_Store`文件夹会自动添加。要删除它们，请打开终端窗口（通过实用程序）并输入以下命令：

```
find . -name '*.DS_Store' -type f -delete 
```

这将从所有子文件夹中递归删除隐藏`DS_Store`文件夹。我从我的顶级文件夹中执行此操作，然后重新创建了我的 zip 存档文件以上传到我的黑莓供应商帐户。它成功了！

# elasticsearch - Django Haystack order by distance by Elasticsearch backend, not a geo_point field error

> ID：10105693
> 
> 赞同：2
> 
> 时间：2012-04-11T12:13:38.743
> 
> 标签：elasticsearch, django-haystack

I'm using django 1.4, django-haystack 2.0 and Elasticsearch 0.19.1 I have an SearchIndex like that:

```
from haystack import indexes
from core.models import Project

class ProjectIndex(indexes.RealTimeSearchIndex, indexes.Indexable):
    text = indexes.CharField(document=True, use_template=True)
    location = indexes.LocationField(model_attr='get_location')

    def get_model(self):
        return Project 
```

and Project model like that:

```
class Project(BaseModel):
    name = models.CharField(_(u'Proje Adı'), max_length=50)
    latitude = models.FloatField()
    longitude = models.FloatField()

    def get_location(self):
        # Remember, longitude FIRST!
        return Point(self.longitude, self.latitude) 
```

So I want to query Project objects by distance specific coordinate from near to far:

```
....
location = Point(project.longitude, project.latitude)
projects = SearchQuerySet().models(Project).distance('location', location).order_by('distance') 
```

But I'm getting this error:

Failed to query Elasticsearch using '*:*': Non-OK status code returned (500) containing u'SearchPhaseExecutionException[Failed to execute phase [query], total failure; shardFailures {[jmUkmHkDTX-bo9DhFJdtSw][skp][2]: QueryPhaseExecutionException[[skp][2]: query[filtered(ConstantScore(NotDeleted(cache(QueryWrapperFilter(django_ct:core.project)))))->cache(_type:modelresult)],from[0],size[10],sort[]: Query Failed [Failed to execute main query]]; nested: ElasticSearchIllegalArgumentException[field [location] is not a geo_point field]; }{[jmUkmHkDTX-bo9DhFJdtSw][skp][4]: QueryPhaseExecutionException[[skp][4]: query[filtered(ConstantScore(NotDeleted(cache(QueryWrapperFilter(django_ct:core.project)))))->cache(_type:modelresult)],from[0],size[10],sort[]: Query Failed [Failed to execute main query]]; nested: ElasticSearchIllegalArgumentException[field [location] is not a geo_point field]; }]'.

What is wrong?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T15:39:36.473

Probably the "type" aspect of your location field is mapped wrong. This could be caused by the api that you used for mapping. Some aspects in a mapping can be changed, but not the "type" aspect of a field. So you'll have to create a new mapping with location field in geo_point type, and reindex your docs.

# ruby-on-rails - 仅通过 cap 找不到 RubyGem 捆绑器

> ID：10105700
> 
> 赞同：0
> 
> 时间：2012-04-11T12:14:01.543
> 
> 标签：ruby-on-rails, capistrano

这是我对 Rails 的 forst 部署试验。

我设法在服务器端设置了所有依赖项

当我输入

```
bundle exec rails console 
```

一切正常。我在本地运行 cap deploy:migrations 时遇到了这个奇怪的问题

```
[.com] sh -c 'cd /home//.com/releases/20120411120423 && bundle     install --gemfile /home//.com/releases/20120411120423/Gemfile --path /home//.com/shared/bundle --deployment --quiet --without development test'
** [out ::.com] /usr/lib/ruby/1.8/rubygems.rb:779:in `report_activate_error':     Could not find RubyGem bundler (>= 0) (Gem::LoadError
** [out ::.com] )
** [out ::.com] from /usr/lib/ruby/1.8/rubygems.rb:214:in `activate'
** [out ::.com] from /usr/lib/ruby/1.8/rubygems.rb:1082:in `gem'
** [out ::.com] from /home//.gems/bin/bundle:18
command finished in 539ms 
```

当我手动复制命令并在服务器中执行它时，它可以完美运行！

这是我的 deploy.rb 文件

```
require "bundler/capistrano"

default_run_options[:pty] = true
set :user, 'xyz'
set :domain, 'xyz.com'
set :application, 'xyz'

set :repository,  "#{user}@#{domain}:git/#{application}.git"
set :deploy_to, "/home/#{user}/#{domain}"
set :deploy_via, :remote_cache
set :scm, 'git'
set :branch, 'master'
set :git_shallow_clone, 1
set :scm_verbose, true
set :use_sudo, false

set :rake, "/home//.gems/bin/rake"

server domain, :app, :web
role :db, domain, :primary => true

namespace :deploy do
  task :restart do
  run "touch #{current_path}/tmp/restart.txt"
   end
end 
```

更新：

当我从 cap 启动 bundle -v 时，我得到了正确的位置！

```
$ cap invoke COMMAND="which bundle" 
```

输出

```
 /home//.gems/bin/bundle 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T21:34:45.247

将这些行添加到 config.ru 文件解决了问题

```
ENV['GEM_HOME'] = '/home/aaalsubaie/.gems/'
ENV['GEM_PATH'] = '/usr/lib/ruby/gems/1.8'

require 'rubygems'
Gem.clear_paths 
```

# java - PHP脚本根据mysql表的第一列单元格获取单元格

> ID：10105707
> 
> 赞同：-1
> 
> 时间：2012-04-11T12:14:30.087
> 
> 标签：java, php, android, mysql

我正在尝试实现一个搜索活动，该活动根据搜索从 mysql 表中获取数据。

我想编写一个 PHP 脚本来使用输入到 EditText 中的字符串并获取相邻的单元格。

例如，假设mysql表有两列：Firstname和surname；我希望能够通过搜索名字来获取姓氏（在 EditText 中输入名字。我知道这可能需要`SELECT Surname FROM Names WHERE ...`查询，但是如何从我的 Java 类中指示变量？

到目前为止的 PHP 脚本：

```
<?php
mysql_connect("localhost","root","");
mysql_select_db("androidapp");
$sql=mysql_query("SELECT surname WHERE $get'fname'");
while($row=mysql_fetch_assoc($sql)) $output[]=$row;
print(json_encode($output));
mysql_close();
?> 
```

此外，HttpGet 方法或 HttPost 方法是否合适，结果应在 TextView 中显示姓氏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:25:45.233

我假设您想通过 http post 或 http get 从 php 向 java (android) 发送和接收数据。如果我错了，请纠正我。

基本上，您希望 php 返回的是与表中第一个名称匹配的行。

```
mysql_connect("localhost","root","");

mysql_select_db("androidapp");

$fname = mysql_real_escape_string($_POST['fname']);

$result = mysql_query("SELECT surname FROM names WHERE fname = '$fname'");

//if you want only one record then
$row = mysql_fetch_array($result);

echo json_encode($row);

mysql_close(); 
```

`mysql_real_escape_string()`永远记得使用 php 的函数转义任何 sql 注入的数据。我也更喜欢 HTTP POST。

从您的 android 应用程序中，您必须向 PHP 脚本所在的服务器发送一个 http 请求。

希望这对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:26:58.290

我不太确定你在用你的查询做什么，但我会使用

```
$fname = addslashes($_GET['fname']);
$sql = mysql_query("SELECT surname FROM Names WHERE fname='$fname'");
... 
```

显然，您传入`fname=whatever`了查询。

GET 绝对没问题。HTTP 将 GET 请求指定为从服务器返回信息并且没有其他副作用（例如修改数据库）的请求。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-11T12:36:05.693

我猜你有一个 Android 应用程序（用 Java 编写），它与一种用 PHP 编码的 Web 服务进行通信。

因此，您的 PHP 应用程序应该像任何 Web 服务一样运行。

在 PHP 中，您可以使用 $_GET、$_POST 或 $_REQUEST 全局变量检索给脚本的参数。

*   $_GET 仅包含由 GET 方法发送的参数（直接在 URL 中）。

*   $_POST 仅包含 POST 方法发送的参数（嵌套在 http 查询中）。

*   $_REQUEST 是 $_GET + $_POST 的编译。

对于 Web 应用程序，$_REQUEST 通常是最好的解决方案，因此您允许调用者使用任何方法（POST/GET）。如果您只想修复一个，请选择 $_POST 或 $_GET。

所以，

```
$sql = mysql_query("SELECT surname WHERE firstname='".mysql_real_escape_string($_REQUEST['fname'])."'"); 
```

不要忘记转义参数`mysql_real_escape_string()`以防止 SQL 注入。

# android - Tab on focus 或 Tab on click 要增加的图像大小

> ID：10105708
> 
> 赞同：1
> 
> 时间：2012-04-11T12:14:30.657
> 
> 标签：android, image, tabs, onclick, onfocus

我希望对我的标签有这种外观![在此处输入图像描述](../Images/af643644ef7ba49e88e086484f7e8679.png)，例如，当用户单击某个标签或焦点时，该标签的图像应该被放大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:53:57.990

您可以在 Android 中随意使用标签大小，这有点粗糙，但可以做到

tabHost.getTabWidget().getChildAt(1).getLayoutParams().height = tabHeight;

其中 childAt 是您要使用的选项卡。当我这样做时，我通常已将所有选项卡修改为相同的高度（循环遍历它们），但它应该允许您像您想要的那样一次动态地更改高度.

抓住用户选择它，然后将最后选择的大小设置回“正常”并增加所选大小。

# vim - 简单 .vimrc 文件中的错误消息

> ID：10105710
> 
> 赞同：0
> 
> 时间：2012-04-11T12:14:34.167
> 
> 标签：vim

当我放入我的 .vimrc 文件时：

“设置退格 = 2；设置不兼容；打开语法；”

当我打开一个新的 vim 文件时它工作正常并使用这些设置但是我收到错误消息：

处理 /mount/autofs/home_stude1/a/afarah/.vimrc 时检测到错误：第 1 行：E474：无效参数：退格 =2；第 2 行：E488：尾随字符：不兼容；

可能微不足道，但不知道如何解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T12:19:50.417

请改用以下内容。

```
set backspace=2 nocompatible
syntax on 
```

Vim 的脚本语法不使用分号 AFAIK。

# java - 我应该使用哪个 InitialContextFactory？

> ID：10105716
> 
> 赞同：4
> 
> 时间：2012-04-11T12:14:48.867
> 
> 标签：java, ejb, openejb, apache-tomee

我正在使用 OpenEJB (TomEE++) 开发一个 EJB 3 项目。

我有一个无状态会话 bean，其名称已用注释指定。

```
@Stateless(mappedName="SlideService", name="SlideService")
public class SlideService {

    public Map<Category, List<SlideShow>> fetchSlideShowsByCategory() {
        Application app = Application.getInstance();
        return app.retreiveAllSlideShowsByCategory();
    }

    public SlideShow fetchSlideShow(long id) {
        return null;
    }

    public List<SlideShow> fetchSlideShowsByTitle(String title) {
        return null;
    }

} 
```

我从我的 Struts 动作类中查找 Session bean，就像这样。

```
Properties properties = new Properties();
properties.setProperty Context.INITIAL_CONTEXT_FACTORY,"org.apache.openejb.client.LocalInitialContextFactory");
InitialContext initialContext = new InitialContext(properties);
SlideService slideService = (SlideService)initialContext.lookup("SlideServiceLocalBean"); 
```

在上面的代码中，您会注意到我必须使用名称“SlideServiceLocalBean”来定位 bean，而我在 bean 的注释中明确指定了“SlideService”。

但是，当我尝试在测试用例中定位 bean 时，我必须使用另一个名称字符串。

```
EJBContainer ejbContainer = EJBContainer.createEJBContainer();
Object oSlideService = ejbContainer.getContext().lookup("java:global/slides/SlideService"); 
```

为什么查找名称存在差异？

我是在 Struts 动作类中以正确的方式获取 InitialContext，还是应该使用另一种机制/contextFactory 来获取初始上下文？

是否可以在不使用外部 DI 库的情况下将 bean 注入到动作类中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T07:15:52.620

在你的 struts 动作类中试试这个：

```
new InitialContext().lookup("java:global/slides/SlideService"); 
```

它应该可以正常工作。所以应该从动作类内部：

```
new InitialContext().lookup("java:module/SlideService"); 
```

`LocalInitialContextFactory`使用这些`java:global`和`java:module`名称来自的早于 JavaEE 6 Global JNDI 的查找。

该文档解释了它是如何工作的。

*   [http://openejb.apache.org/jndi-names.html](http://openejb.apache.org/jndi-names.html)

您的 bean 的名称是`SlideService`并且具有所谓的`@LocalBean`视图（单个 bean 可以有多个视图，例如 @LocalBean、@Remote、@Local），因此查找 SlideService 的名称`@LocalBean`最终是`SlideServiceLocalBean`

这只是默认格式。您可以将其更改为文件中您喜欢的任何内容`conf/system.properties`。

# sql-server - 将 SQL Server 2012 转换为 SQL Azure

> ID：10105719
> 
> 赞同：3
> 
> 时间：2012-04-11T12:15:00.773
> 
> 标签：sql-server, azure, azure-sql-database, sql-server-2012

我一直在使用 SQL Server 2012 附带的 VS11 beta。我还有一个 SQL Server 2008 R2 版本的`.mdf`文件，因为登台服务器使用 R2。

我稍后会将项目移植到 SQL Azure。如果我开始对文件的 SQL Server 2012 版本的数据库结构进行更改，以后是否可以将其转换为 SQL Azure，或者我是否还需要对 R2`.mdf`文件进行更改以保持同步?

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T12:58:12.827

SQL Azure 构建在 SQL Server 2012 之上。您可以使用[SQL Azure 迁移向导](http://sqlazuremw.codeplex.com/)将 SQL Server 2012 数据库直接迁移到 SQL Azure。

# c# - 平台构建器中的 DLL

> ID：10105728
> 
> 赞同：1
> 
> 时间：2012-04-11T12:15:34.110
> 
> 标签：c#, c++, windows-ce, platform-builder

我在平台构建器中构建了一个新的 dll，并尝试在我的应用程序中使用这个 dll。当我在我的应用程序中使用此 dll 时出现错误：找不到 PInvoke DLL 'HardwareAbstractionLayer.dll'。

这个错误是什么意思，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:03:54.180

这个错误的意思很简单：它根本无法在系统上找到所需的 DLL 来加载它。因此，请通过资源管理器检查您的文件，确保您的文件在设备上确实可用。

如果文件被烘焙到您的图像中并且确实位于您喜欢的所需位置（正确的文件夹？），您应该确保您的应用程序确实在正确的位置搜索 DLL。它是只查看自己的工作目录还是只查看 windows 文件夹？

为确保该文件可用于您的应用程序，请编写另一个不引用您的 DLL 的小型实用程序。相反，只需使用一些[`Directory.GetFiles()`](http://msdn.microsoft.com/en-us/library/07wt70x2.aspx)调用来确保您的应用程序也可以访问该文件。

如果所有这些都被检查，那么可能是为错误的平台编译了 DLL？确保将其设置为正确的 cpu 类型，并检查您的 DLL 本身是否有任何依赖关系，以及这些在目标上是否也可用。

# c# - 无法使用 jquery 访问 C# 方法

> ID：10105734
> 
> 赞同：3
> 
> 时间：2012-04-11T12:15:58.260
> 
> 标签：c#, jquery, asp.net

我正在尝试从 java 脚本调用 C# 方法，我是 Web 开发的新手，经过一番搜索后决定使用 jquery 来做同样的事情，我尝试调用该方法的方式是：

```
$.ajax({
          type: "POST",
          url: "Default.aspx/IncrementJ",
          data: "{}",
          contentType: "application/json; charset=utf-8",
          dataType: "json",
          success: function(msg) {
            alert("success!")
          }
        }); 
```

这里 IncrementJ 是我在 C# 中定义的函数名，我想调用它。这里是定义：

```
 [WebMethod]
    public static  void IncrementJ()
    {

        try
        {
            j++;
        }
        catch (Exception ex)
        {
            throw ex;
        }
    } 
```

当我运行我的程序时，Web 控制台抛出错误“无法找到资源增量J”；请告诉我哪里出错了，

谢谢 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T12:45:46.630

鉴于您对错误状态 404（未找到）的评论，可以推断该错误代表调用脚本：

“傻瓜的 Http 响应代码”

```
50x: we messed up. 
40x: you messed up. 
30x: ask that dude over there. 
20x: cool. 
```

So, given that the script cannot find the webmethod, I think its fair to deduce that it is looking in the wrong location. Try putting a relative path when referencing `Default.aspx/IncrementJ`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T12:19:25.627

我看到的一件事是您需要删除数据对象周围的引号。它应该是一个空的 JS 对象，例如`{}`不是`"{}"`

# xml - 如何从 web.config 文件中删除元素？

> ID：10105739
> 
> 赞同：0
> 
> 时间：2012-04-11T12:16:29.870
> 
> 标签：xml, wix

如果某些 PROP="0"，我想从 web.config（它安装在此安装中）文件中删除一些元素

```
<configuration>
 <thingy>
  <stuff>
   <item type='value1'  name='name1' file='node1.txt'/>
   <item type='value2' name='name2' file='node2.txt'/>
  </stuff>
 </thingy>
</configuration> 
```

我正在尝试这样做

```
<util:XmlConfig
  On="install"
  Action="delete"
  Id="RemoveAnElement"
  Node="element"
  File="Application.dll.config"
  VerifyPath="/configuration/thingy/stuff/item[\[]@type='value1'[\]]"
  ElementPath="/configuration/thingy/stuff"
  Sequence="100"
/> 
```

没有错误，但元素仍然存在。如何删除它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T13:04:59.500

从基本 XML 文件中删除元素并反转逻辑，以便 WiX 在 PROP="1" 时添加元素。

# drupal - Drupal 7 Views：使用哪种类型的输出来重新渲染链接

> ID：10105740
> 
> 赞同：0
> 
> 时间：2012-04-11T12:16:31.917
> 
> 标签：drupal, drupal-7, drupal-views

在视图中选择主题信息时，哪种类型的输出可以让我重新呈现链接？链接需要标题属性，视图 gui 不是一个选项。

*   展示
*   风格
*   排
*   场地

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:36:57.507

已解决：使用“行输出”作为主题建议并在循环其属性之前操纵 $fields 变量。

# eclipse - 无法在eclipse中创建java虚拟机弹出消息

> ID：10105743
> 
> 赞同：3
> 
> 时间：2012-04-11T12:16:52.800
> 
> 标签：eclipse, jvm

我想记录 GC 详细信息并在 eclipse 中添加以下 VM 参数：

```
-verbose:gc 
-XX:+PrintGCDetails
-XX:+PrintGCTimeStamps
-Xmx768M 
```

现在，当我启动应用程序时，我收到一个错误对话框，指出“无法创建 java 虚拟机”。

问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:01:39.683

以下[链接](http://www.cs.colostate.edu/helpdocs/eclipseCommLineArgs.html)说明了如何在 eclipse 中提供 VM 参数。

> 现在，当我启动应用程序时，我收到一个错误对话框，指出“无法创建 java 虚拟机”。

这可能有很多原因。一个常见的问题是 eclipse 找不到 java 可执行文件。您可以打开 eclipse.ini 文件并添加：

```
-vm
 /opt/jdk/bin/javaw.exe 
```

您应该将上述路径替换为可执行文件的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T21:43:43.840

我们面临着类似的问题。我们卸载了 java 7 并将其替换为 java 6 ( [http://www.java.com/en/download/manual_v6.jsp](http://www.java.com/en/download/manual_v6.jsp) )，这对我们有用。（以上建议的更改 - 使用 vm 编辑 .ini 文件等 - 对我们不起作用！它只是带来了不同的错误消息）。

我们确实面临的一个问题是让命令提示符中的“java -version”正常工作。我们看到以下错误：“打开注册表项时出现 java 错误”。以下链接中的选定答案（从 windows/system32 文件夹中删除 java.exe 等文件）有效，我们很高兴。

[Java 错误打开注册表项](https://stackoverflow.com/questions/6362037/java-error-opening-registry-key)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T14:14:49.127

检查 eclipse.ini 文件中是否有多个“-vm”条目。多个条目将导致出现此错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-12T09:53:46.393

我找到了非常简单的解决方案，只需删除 eclipse.ini 文件但先备份。

我多次遇到同样的问题，最后我删除了这个，我再也没有问题了。

它还增加了加载时间。现在我的日食开始得比之前更快。

# grails - 在 tomcat 6.0.28 上部署应用程序时出现问题

> ID：10105748
> 
> 赞同：1
> 
> 时间：2012-04-11T12:17:34.970
> 
> 标签：grails, deployment, tomcat6

我面临一个问题，我无法在 tomcat 上部署我的 grails 应用程序，我正在按照以下书面步骤操作：

1.  `grails prod war`
2.  `mv target/app.war /var/lib/tomcat6/webapps`
3.  使用重启tomcat`sudo service stop`

问题是我的服务器启动但它没有部署战争，因为当我 goto 时`/myapp`，我得到一个 404。

我得到的日志是：

`

```
Configuring Spring Security ...
System properties loaded from: /var/lib/tomcat6/webapps/jbilling/WEB-INF/classes/jbilling.properties
Resolved jbilling resources directory to: 
Apr 11, 2012 4:25:30 PM org.apache.catalina.core.StandardContext start
SEVERE: Error listenerStart
Apr 11, 2012 4:25:30 PM org.apache.catalina.core.StandardContext start
SEVERE: Context [/jbilling] startup failed due to previous errors
Apr 11, 2012 4:25:30 PM org.apache.catalina.loader.WebappClassLoader clearReferencesJdbc
SEVERE: The web application [/jbilling] registered the JBDC driver [org.postgresql.Driver] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.
Apr 11, 2012 4:25:30 PM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [/jbilling] created a ThreadLocal with key of type [null] (value [org.codehaus.groovy.grails.commons.spring.ReloadAwareAutowireCapableBeanFactory$2@127ea69]) and a value of type [java.lang.Boolean] (value [false]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak.
log4j:ERROR LogMananger.repositorySelector was null likely due to error in class reloading, using NOPLoggerRepository.
Apr 11, 2012 4:26:33 PM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(/var/lib/tomcat6/webapps/jbilling/WEB-INF/lib/geronimo-servlet_2.5_spec-1.2.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
Apr 11, 2012 4:26:33 PM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(/var/lib/tomcat6/webapps/jbilling/WEB-INF/lib/servlet-api-2.3.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
Loading configuration files from classpath
log4j:WARN No appenders could be found for logger (org.hibernate.cfg.annotations.Version).
log4j:WARN Please initialize the log4j system properly.
log4j:ERROR setFile(null,true) call failed.
java.io.FileNotFoundException: stacktrace.log (Permission denied)
    at java.io.FileOutputStream.openAppend(Native Method)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:207)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:131)
    at org.apache.log4j.FileAppender.setFile(FileAppender.java:290)
    at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:164)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:229)
    at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:52)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:40)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:117)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:121)
    at org.codehaus.groovy.grails.plugins.logging.Log4jConfig.createFullstackTraceAppender(Log4jConfig.groovy:177)
    at org.codehaus.groovy.grails.plugins.logging.Log4jConfig.this$2$createFullstackTraceAppender(Log4jConfig.groovy)
    at org.codehaus.groovy.grails.plugins.logging.Log4jConfig$this$2$createFullstackTraceAppender.callCurrent(Unknown Source)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:44)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:143)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:147)
    at org.codehaus.groovy.grails.plugins.logging.Log4jConfig.configure(Log4jConfig.groovy:145)
    at org.codehaus.groovy.grails.plugins.logging.Log4jConfig$configure.callCurrent(Unknown Source)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:44)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:143)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:151)
    at org.codehaus.groovy.grails.plugins.logging.Log4jConfig.configure(Log4jConfig.groovy:92)
    at org.codehaus.groovy.grails.web.util.Log4jConfigListener.contextInitialized(Log4jConfigListener.java:65)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4135)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4630)
    at org.apache.catalina.manager.ManagerServlet.start(ManagerServlet.java:1276)
    at org.apache.catalina.manager.HTMLManagerServlet.start(HTMLManagerServlet.java:625)
    at org.apache.catalina.manager.HTMLManagerServlet.doGet(HTMLManagerServlet.java:136)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:563)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:679)
Log4j XML Plugin - please put a log4j.groovy or log4j.xml under /grails-app/conf, or uninstall this plugin 
```

`

我什至在文件夹路径 /usr/share/tomcat6/bin/grails-app/conf 下有一个 log4j.xml 文件。

我尝试使用谷歌搜索，但我无法理解给出的解决方案，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T21:26:13.580

我刚刚在我们的工作日志文件中看到了这个错误。它并没有阻止我们的应用程序加载。

我们正在清理我们的日志，所以这里是修复：在`Config.groovy`log4j 附件中的文件中放置

```
appenders {
    'null' name:'stacktrace'
} 
```

# java - 重命名表头

> ID：10105749
> 
> 赞同：5
> 
> 时间：2012-04-11T12:17:40.270
> 
> 标签：java, swing, jtable, defaulttablemodel

在我的 JTable 中，我想使用右键单击选项重命名表标题。右键单击任何标题，它提供了重命名标题的选项。但是当我这样做时，它会重命名所选列的标题。所以我必须先左键单击该列，然后才能进一步处理。有什么方法可以让我在任何列上单击鼠标右键，它也会被选中，以便在重命名后它的值被重命名。

**我的动作监听器如下：**

```
int column = jTable1.getSelectedColumn();
                        if (column == -1) {
                            return;
                        }
                        if (column == 0) {
                            JOptionPane.showMessageDialog(jTable1, "You can not rename this column.");
                            return;
                        }
                        boolean blag = true;
                        String sColumnName = null;
                        while (blag) {

                        sColumnName = (String) JOptionPane.showInputDialog(jTable1, "Enter Column Name", "Add Column", JOptionPane.INFORMATION_MESSAGE, null, null, null);
                        if (sColumnName == null) {
                            return;
                        }
                        if (sColumnName.trim().equalsIgnoreCase("")) {
                            JOptionPane.showMessageDialog(jTable1, "Column name can not be blank.");
                            blag = true;
                        } else {
                            blag = false;
                        }
                        Vector vColumns = new Vector();
                        for (int i = 0; i < defaultTableModel.getColumnCount(); i++) {
                            vColumns.add(defaultTableModel.getColumnName(i));
                        }
                        if (vColumns.contains(sColumnName)) {
                            JOptionPane.showMessageDialog(jTable1, "Column name " + sColumnName + " already exist.");
                            return;
                        }
                    }
                    int viewColumn = jTable1.convertColumnIndexToView(column);
                    int totalColumn = defaultTableModel.getColumnCount();
                    Object[] headers = new Object[totalColumn];
                    for (int i = 0; i < totalColumn; i++) {
                        if (i == column) {
                            headers[i] = sColumnName;
                        } else {
                            headers[i] = defaultTableModel.getColumnName(i);
                        }
                    }
                    defaultTableModel.setColumnIdentifiers(headers); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T12:51:09.887

我想念那里

1)`MouseListener`并确定选择`Column`的值返回

```
 header.addMouseListener(new MouseAdapter() {

        @Override
        public void mouseClicked(MouseEvent e) {
            JTableHeader h = (JTableHeader) e.getSource();
            int i = h.columnAtPoint(e.getPoint());
            Object o = h.getColumnModel().getColumn(i).getHeaderValue();
            if (i < 0 || o == selectedColumn) {
                selectedColumn = null;
                return;
            }
            selectedColumn = o;
            h.requestFocusInWindow();
        }
    }); 
```

2) 变更代码`header.getColumnModel().getColumn(i).setHeaderValue("Clicked");`

简单的例子

![在此处输入图像描述](../Images/d0deacf61b424c0436ce0cbbbf487c79.png)![在此处输入图像描述](../Images/b81161e4b246c3510ec4d5e2500d8325.png)

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.table.*;

public class SelectedTableHeader {

    private JFrame frame = new JFrame("Table Demo");
    private JTableHeader header;
    private Object selectedColumn = null;
    private String[] columnNames = {"String", "Integer", "Float", "Double", "Locale & Double", "Boolean"};
    private Object[][] data = {
        {"aaa", new Integer(12), new Float(12.15), new Double(100.05), new Double(12.05), true},
        {"bbb", new Integer(5), new Float(7.154), new Double(6.1555), new Double(417.55), false},
        {"CCC", new Integer(92), new Float(0.1135), new Double(3.1455), new Double(11.05), true},
        {"ddd", new Integer(12), new Float(31.15), new Double(10.05), new Double(23.05), true},
        {"eee", new Integer(5), new Float(5.154), new Double(16.1555), new Double(17.55), false},
        {"fff", new Integer(92), new Float(4.1135), new Double(31.1455), new Double(3.05), true}};
    private TableModel model = new DefaultTableModel(data, columnNames) {

        private static final long serialVersionUID = 1L;

        @Override
        public Class<?> getColumnClass(int column) {
            return getValueAt(0, column).getClass();
        }
    };
    private JTable table = new JTable(model);

    public SelectedTableHeader() {
        header = table.getTableHeader();
        header.addMouseListener(new MouseAdapter() {

            @Override
            public void mouseClicked(MouseEvent e) {
                JTableHeader h = (JTableHeader) e.getSource();
                int i = h.columnAtPoint(e.getPoint());
                Object o = h.getColumnModel().getColumn(i).getHeaderValue();
                if (i < 0) {
                    selectedColumn = null;
                    return;
                }
                selectedColumn = o;
                header.getColumnModel().getColumn(i).setHeaderValue("Clicked");
                h.requestFocusInWindow();
            }
        });
        final TableCellRenderer hr = table.getTableHeader().getDefaultRenderer();
        header.setDefaultRenderer(new TableCellRenderer() {

            private JLabel lbl;

            @Override
            public Component getTableCellRendererComponent(
                    JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
                if (selectedColumn == value) {
                    lbl = (JLabel) hr.getTableCellRendererComponent(table, value, true, true, row, column);
                    lbl.setBorder(BorderFactory.createCompoundBorder(lbl.getBorder(), BorderFactory.createLineBorder(Color.red, 1)));
                    lbl.setHorizontalAlignment(SwingConstants.LEFT);
                } else {
                    lbl = (JLabel) hr.getTableCellRendererComponent(table, value, false, false, row, column);
                    lbl.setBorder(BorderFactory.createCompoundBorder(lbl.getBorder(), BorderFactory.createEmptyBorder(0, 5, 0, 0)));
                    lbl.setHorizontalAlignment(SwingConstants.CENTER);
                }
                if (column == 0) {
                    lbl.setForeground(Color.red);
                } else {
                    lbl.setForeground(header.getForeground());
                }
                /*return (value == selectedColumn) ? hr.getTableCellRendererComponent(
                table, value, true, true, row, column) : hr.getTableCellRendererComponent(
                table, value, false, false, row, column);*/
                return lbl;
            }
        });

        table.setRowHeight(20);
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        JScrollPane scroll = new JScrollPane(table);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(scroll);
        frame.pack();
        frame.setLocation(150, 150);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                SelectedTableHeader selectedTableHeader = new SelectedTableHeader();
            }
        });
    }
} 
```

3）另一种方法是将[CellEditor 添加到 JTableHeader](http://www.java2s.com/Code/Java/Swing-Components/EditableHeaderTableExample.htm)（注意从未尝试过，并且不确定编辑器是否按预期工作，仅作为示例，我确定需要进行一些修改）

# android - Android SDK r18 导出发布错误

> ID：10105750
> 
> 赞同：0
> 
> 时间：2012-04-11T12:17:42.033
> 
> 标签：android

我在工作区中有 2 个 Android 项目；首先是 libray 项目，其他是引用第一个项目的应用程序。Clean and Build 没有任何错误。但是当我尝试导出发布版本时，它给出了错误：“转换为 Dalvik 格式失败，错误 1”

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:31:23.227

当您`android.jar`不小心包含两次时，通常会发生这种情况。进入您的项目`Properties > Java Build Path > Libraries`并删除不在`Android X.Y`下拉列表下的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T12:27:48.417

**解决方案 1：**

你在用proguard吗？如果是这样..您可能想用[此处](http://sourceforge.net/projects/proguard/files/proguard/)的最新版本替换 sdk (C:\android-sdk\tools2\proguard*) 中的那个。

您可以将旧的 proguard 重命名为 proguard2 并将下载的版本放在 C:\android-sdk\tools2\proguard*

*注意：您的 AndroidSDK 的文件夹可能不同

* * *

**解决方案 2：**

如果您已将其他项目作为主项目的库导入，您可能会检查这些库是否被导入两次：

![安卓库](../Images/caf0dd48f5710a11b691850b2c0bcf2c.png) ![Android 构建路径](../Images/4d6078f8d86048301f1bd9f025148cc3.png)

这些图像是从[这个答案中提取的](https://stackoverflow.com/a/9357378/571353)

* * *

**解决方案 3：**

新建一个包名相同的Android项目，复制所有资源，Manifest和源文件，配置外部库，然后尝试编译新项目

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T06:24:51.140

问题解决了。删除了 r18 并选择了 r17，然后一切都很好。

# html - 使用 HTML5 和 CSS3 根据屏幕分辨率调整正文大小

> ID：10105753
> 
> 赞同：1
> 
> 时间：2012-04-11T12:17:44.460
> 
> 标签：html, css, resize, resolution, sticky-footer

我正在尝试执行以下操作。创建一个网站，其中包含静态顶部（标题）和中间的文章区域以及带有导航控件的粘性页脚。我的挑战如下。我希望控件始终位于页面底部，因此如果重新缩放浏览器/以不同的分辨率打开页面，则只有文章区域被调整大小……。我无法解决这个问题/或看到一个这样做的页面。

我想要一个 100px 的静态页眉，一个 150px 的静态页脚和一个 window.innerHeight 的文章区域 - 页脚 - 页眉

我见过很多带有静态页脚的页面，但所有这些都必须浏览到底部它的屏幕如此可见。我希望我的始终显示在屏幕底部。

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:26:28.463

```
#header{
background:yellow;
position:absolute;
top:0;
left:0;
height:100px;
width:100%;    
}

#foot{
background:yellow;
position:absolute;
bottom:0;
left:0;
height:150px;  
width:100%;        
}

#content{
background:orange;
position:absolute;
top:100px;
bottom:150px;
width:100%;    
} 
```

In xhtml [http://jsfiddle.net/DWMHr/](http://jsfiddle.net/DWMHr/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-11T12:25:04.550

我认为您最好的选择可能是使文章区域`overflow:scroll`

# c# - 如何使用单个变量来跟踪我的所有测试

> ID：10105754
> 
> 赞同：1
> 
> 时间：2012-04-11T12:17:49.787
> 
> 标签：c#, mstest

我正在使用 MSTest，当我第一次运行所有单元测试（或自己的测试）时，我想创建一个唯一标识符，我可以将其放入数据库记录中以跟踪测试。问题是我希望在所有测试中创建和使用相同的唯一引用。我真正想要使用的是 DateTime 戳。我正在寻找一个总是被引发的事件，然后我可以在测试期间将它放在一个静态容器中，然后从测试中访问这个静态容器......这可能吗？......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:35:19.657

您可以沿着有一个单独的类负责持有 static 的路线`DateTime`：

```
public static class TestIdGenerator
{
    private static readonly Lazy<DateTime> _testId = new Lazy<DateTime>(() => DateTime.Now);
    public static DateTime TestId
    {
        get { return _testId.Value; }
    }
} 
```

在您的测试中，您可以使用

```
var testId = TestIdGenerator.TestId; 
```

DateTime 将在第一次访问该`TestId`属性时设置，并且在每次后续访问时都将保持不变，直到 CLR 被卸载 - 这将在特定测试运行中的所有测试都完成时发生。

我刚刚对此进行了测试，对于夹具中的所有测试，它确实保持不变，但在下一次测试运行时会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:26:10.470

You could use the [AssemblyInitialize](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.assemblyinitializeattribute%28v=vs.80%29.aspx) attribute on a method to ensure it runs before any other methods in your test assembly. In that method you could generate your unique ID and set it to a static variable. If your testing methods span assemblies this won't work though.

# vb.net - Visual Basic 单选按钮

> ID：10105757
> 
> 赞同：2
> 
> 时间：2012-04-11T12:18:00.957
> 
> 标签：vb.net, visual-studio, radio-button

我有一个带有第二种形式的单选按钮的程序。当其中一个单选按钮被选中时，它将关闭该表单。但是，由于某种原因，第一个单选按钮被选中，导致表单关闭。它们在选中的属性上都设置为 false，并且它们的索引顺序是 1-4。我将标签设置为索引 0。我什至在表单 onload 函数中以图表方式将它们设置为 false，但第一个单选按钮仍处于选中状态。感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-16T13:12:36.850

只需将 tabstop 属性更改为 false。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T12:23:54.487

您需要将它们更改为复选框；单选按钮组总是有一个选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T12:37:35.830

让单选按钮关闭表单没有多大意义，因为它不是显示选择，而是作用于一个选择。尝试将它们更改为按钮。

如果您必须有 RadioButtons，请尝试添加另一个可聚焦控件，例如 Button，使其 TabIndex=0，而 RadioButtons 的 TabIndexes > 0。这就是它的工作方式。

另一种选择是在`Shown`事件中取消选中它们：

```
Private Sub Form1_Shown(ByVal sender As Object, ByVal e As EventArgs) Handles Me.Shown
  RadioButton1.Checked = False
  RadioButton2.Checked = False
  '// etc
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-17T15:16:48.577

或者你可以做我刚才做的事，在你的表单上创建一个额外的（不可见的）单选按钮，并将那个设置为选中=true。其他的都将被选中=false。

简单的。

# servlets - 将自定义标头参数添加到 Http 标头

> ID：10105760
> 
> 赞同：0
> 
> 时间：2012-04-11T12:18:18.577
> 
> 标签：servlets, servlet-filters

是否有任何工作方法可以将自定义属性添加到 Http 请求中的 Http Header 中。到目前为止
，我已经尝试放入 Servlet 过滤器响应，httpRequest 没有 addHeader 方法。我在 JSF 中尝试了 Phase Listener。似乎什么都不起作用。有什么办法吗？
我使用 Weblogic，是否有任何 Weblogic 特定的方式，比如一些可用于设置自定义标头的标签。请提出建议。
简而言之，我想要 Http Header 请求中的自定义属性。

有什么方法可以让我做类似下面的事情，可用于 IIS 服务器

```
<system.webServer> 
    <httpProtocol>
        <customHeaders>
            <clear />
            <add name="X-UA-Compatible" value="IE=EmulateIE7" />
        </customHeaders>
    </httpProtocol>
</system.webServer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T06:04:27.373

请求标头由调用 Servlet/JSP 的客户端发送，这就是为什么`Servlet Spec does not allow you to add any headers to the Request`. 如果您想为请求设置任何自定义属性，`the only way to do is using HttpServletRequest.setAttribute() method.`

# javascript - 如何使用 jQuery（移动）选择价格范围

> ID：10105763
> 
> 赞同：4
> 
> 时间：2012-04-11T12:18:22.400
> 
> 标签：javascript, jquery, mobile, jquery-mobile

我现在面临的问题是我想要一个移动设备的价格范围选择器。所以我转向 jQuery Mobile 来查看可能性。但我没有找到带有 2 个手柄的滑块（最低/最高价格），而只有一个带有 1 个手柄的滑块。

基本上，我想要这个，然后在移动设备上工作：http: [//jqueryui.com/demos/slider/#range](http://jqueryui.com/demos/slider/#range)

我为 jQuery Mobile 找到了这个，它运行良好，但只有 1 个句柄：http: [//jquerymobile.com/demos/1.1.0-rc.2/docs/forms/slider/](http://jquerymobile.com/demos/1.1.0-rc.2/docs/forms/slider/)

我有点坚持如何继续下去。如何创建具有 2 个句柄的工作 (jQuery UI) 滑块。

我试过谷歌搜索，并在这里搜索，但到目前为止还没有运气。

我很想看到一个解决方案，或者可能是一个替代方案（不是 2 个滑块）。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:37:56.603

请参阅上一个线程：[jQuery Mobile 双范围滑块工作但有问题](https://stackoverflow.com/questions/9237191/jquery-mobile-dual-range-slider-working-but-buggy)

这不是最好的解决方案——但可能会给你一个关于如何进行的想法。

我会使用 Jquery UI 解决方案，因为它稳定可靠，并且可能在您的 jQuery Mobile 主题之后对其进行主题化（给它类等）。

* * *

这可能是一个更好的版本：[jQuery Mobile Dual Range slider](https://stackoverflow.com/questions/8895748/jquery-mobile-dual-range-slider)

他们链接到这个：http: [//jsfiddle.net/NkjQr/3/](http://jsfiddle.net/NkjQr/3/)

我可以看到这是在 JqueryMobile 的路线图中：[https ://github.com/jquery/jquery-mobile/pull/2401](https://github.com/jquery/jquery-mobile/pull/2401)

# java - 如何在 JSP 中迭代映射对象的列表项列表？

> ID：10105766
> 
> 赞同：0
> 
> 时间：2012-04-11T12:18:31.837
> 
> 标签：java, list, jsp, view, loops

我需要在 JSP 中显示 List> 中的数据。那么如何在 JSP 中做到这一点呢？最好的方法是什么？例如;

```
List<Map> list=new ArrayList<Map>(); 
```

映射对象列表...我们将列表对象添加到 mainList。会是这样。。

```
List<List> mainList=new ArrayList<List>(); 
```

提前致谢！！！之前的回复非常感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:20:32.843

利用`<c:forEach>`

为了`List<List> list`

```
<c:forEach items="list" var="listOuter">

  <c:forEach items="listOuter" var="listInner">

  </c:forEach>

</c:forEach> 
```

* * *

**另见**

*   [帮助-jstl-foreach](https://stackoverflow.com/questions/5387174/help-jstl-foreach)
*   [循环通过-a-map-with-jstl](https://stackoverflow.com/questions/2848332/loop-through-a-map-with-jstl)

# ruby - 日期 strptime 返回无效日期

> ID：10105769
> 
> 赞同：3
> 
> 时间：2012-04-11T12:18:48.467
> 
> 标签：ruby, irb

这是我的 IRB 会议

```
1.9.2p290 :020 > Date.strptime("31-2-2010", "%d-%m-%Y")
ArgumentError: invalid date 
```

我已经给出了正确的值，但它正在返回`ArgumentError`。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T12:31:10.827

是的，你遗漏了一些东西：
二月从来没有 31 天，无论年份如何。

你给了它一个无效的日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-27T05:48:41.370

注意`Time.strptime("31-2-2010", "%d-%m-%Y")`会给你`2010-03-03 00:00:00 +0000`.

我`Time.strptime("31-2-2010", "%d-%m-%Y").to_date`用来避免无效的日期错误。

# c# - 想要创建 c# .net 安装程序

> ID：10105773
> 
> 赞同：1
> 
> 时间：2012-04-11T12:19:08.420
> 
> 标签：c#, sql-server-2005

我在 c# 中有一个 .net 应用程序。我使用 SQL Server 2005 作为数据库。我想为它创建设置。我希望当我运行安装程序时，它会自动安装我在先决条件中添加的 SQL Server 2005。

请帮助如何创建设置...？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T12:28:03.340

Visual Studio 的付费版本具有创建安装程序包的能力，但是，该功能严重缺乏，并且在 VS11 中被删除。我用过，我可以说，它不值得用。还有其他免费的部署工具。我推荐[Windows Installer XML](http://wix.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T12:34:51.793

VisualStudio 确实有新项目 -> 其他项目类型 -> 安装和部署 -> 安装项目。正如 Kendall 指出的，这是一个非常有限/基本的安装程序解决方案。但是，如果您真正想要做的只是将 SQL Express 作为先决条件并且您安装了应用程序，那么它可以管理它（但仅此而已）。

要设置先决条件：

*   转到项目属性（右键单击设置项目-> 属性），您将在该对话框中找到“先决条件”按钮。
*   这将打开一个对话框，其中列出了位于“Program Files\Microsoft SDKs\Windows\v6.0A\Bootstrapper”文件夹中的所有引导程序包。如果那是您想要的，请选择/cehck“SQL Server 2005 Express Edition SP2 x86”。
*   如果您想要完整版的 SQL Server，那么您需要为其找到一个引导程序包 - 搜索（sql 2005 完整引导程序包）应该会产生结果。

请注意，SQL Server 2005 将限制您安装 x86 - 如果您想要 x64 安装，请使用 SQL Server 2008 Express/full。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:11:31.363

您可以在 Visual Studio 中创建一个安装项目。它可以创建离线设置，其中可以包括先决条件或配置为在安装离线设置时从在线位置下载所述先决条件。

[http://msdn.microsoft.com/en-us/library/2kt85ked.aspx](http://msdn.microsoft.com/en-us/library/2kt85ked.aspx)

在进入这个之前，虽然我想分享我使用 SQL Server 作为先决条件的*非常痛苦的经历，以及***为什么你应该真正避免它（实际上，无论你使用哪种部署系统）**。

请参阅，Visual Studio 实例可用的先决条件取决于安装 VS 的同一台计算机上存在的文件夹：C:\Program Files\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages（这是针对 VS 2010 ，将 v7.0A 替换为 VS 2008 的 v6.0A，如果您使用的是 64 位，则将 Program Files 替换为 Program Files 9x86)。

你现在可以去检查一下，你很可能会看到一个文件夹列表，称为引导程序包，它们具有以下基本结构：

**product.xml ：**一个 xml 文件，描述 Visual Studio 的先决条件。这个文件是最重要的。它列出：

*   安装、升级或卸载 prerrequesite 所需的文件
*   评估条件以决定采取何种行动。例如：系统是 x86/x64 吗？是系统XP，服务器2003等？prerrequesite 已经安装了吗？哪个版本？哪种语言？
*   根据这些条件采取的行动。通常，与您正在安装的 exe 文件一起使用的命令行参数。

**一堆可执行文件（msi、exe）：**安装 prerrequesite 所需的文件（如果 product.xml 指的是获取这些文件的在线位置，则可能没有）。

**可选地，一些具有语言环境名称的文件夹：**您的 prerrequesite 的本地化。

现在这个系统有两大类问题：

**此设置系统的缺点：**

首先，product.xml 文件很难构建。这很可能意味着您要计算校验和、创建证书、浏览 Windows Installer 安装日志文件、使用一个非常有问题的工具，称为[Bootstrapper Manifest Generator](http://archive.msdn.microsoft.com/bmg)。你会发现自己在谷歌上搜索问题，唯一的结果将是你自己未回答的 Stack Overflow 问题。相信我，我去过那里。

其次，这整个助推器的事情完全不受（源）控制，并且是对团队合作和持续集成概念的侮辱。在 Program Files 中进行项目安装配置意味着：

*   对于您的所有项目，它必须是相同的先决条件。
*   没有版本控制。
*   您必须在所有可以构建解决方案的机器上保持整个 prerrequesite 文件夹一致，包括 CI 服务器（如果它被多个团队使用，这可能是一个巨大的麻烦）。

**SQL Server 作为先决条件的缺点：**

乍一看，[SQL Server 安装命令行](http://msdn.microsoft.com/en-us/library/ms144259%28v=sql.90%29.aspx)似乎很简单。您决定实例的名称，是安装还是升级，访问权限等。问题是，当您在现实生活中实际尝试时，我无法计算您在路径上会遇到的问题数量：

*   SQL Server 不会从一种语言升级到另一种语言。
*   SQL Server 不会在 x64 系统上从 SQL Server x86 升级到 SQL Server x64。
*   SQL Server not en-US 不会安装在 en-US Windows 上。
*   更一般地说，如果同一台机器上已经安装了任何接近 SQL Server 的东西，SQL Server 很可能无法安装。

如果您手动运行设置，它会告诉您原因。但是，如果您尝试将其作为先决条件进行，则意味着您必须预见可能发生的每一个配置问题。相信我，你永远看不到它的结局：SQL Server 设置如此复杂是有原因的......

现在你能做什么？

*   要求您的客户安装 SQL Server。这是一个不错的选择，无论如何他们都必须管理 SQL Server 许可证，因为他们是使用它的人。也许他们已经拥有了。
*   自己安装。
*   使用不同版本的 SQL Server，如 SQL CE。非常轻量级，功能较少，但如果您只想要一个本地数据库，它可以做到这一点。
*   使用不同的 RDB 系统。我不认识它们，也许它们更容易安装。

# php - Javascript、jQuery 和 Ajax 的新手

> ID：10105774
> 
> 赞同：0
> 
> 时间：2012-04-11T12:19:09.997
> 
> 标签：php, jquery, javascript-events

好的 - 我已经弄清楚如何使用 jquery 拖放可排序 ui。我还想出了如何用我的表中的时间数据填充 jquery 列表。但是……我又碰上了另一堵砖墙。

以下是 test.php 的脚本

```
<?php
session_start();
// include database connection file, if connection doesn't work the include file will throw an error message
include '../schedule/include/db_connect.php';

    $date1 = "10/01/2012";
        echo $date1;

// strtotime() will convert nearly any date format into a timestamp which can be used to build a date with the date() function.
$timestamp = strtotime($date1);
$start_date = date("Y-m-d", $timestamp);

$result="SELECT DATE_FORMAT(List_Dates.DB_Date, '%m/%d/%Y') as newdate, DATE_FORMAT(List_Time.TFM_Time,'%h:%i %p') as newtime
FROM List_Dates, List_Time
WHERE DATE(DATE_FORMAT(List_Dates.DB_Date,'%Y-%m-%d')) LIKE '" . $start_date . "%'
ORDER BY List_Time.TFM_Time";

$answer = mysql_query($result);

?>
<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8">
        <title>jQuery UI Sortable - Connect lists</title>
        <link rel="stylesheet" type="text/css" href="../schedule/include/formats.css"/>
        <link rel="stylesheet" href="../jquery/themes/custom-theme/jquery.ui.all.css">
        <script src="../jquery/jquery-1.7.1.js"></script>
        <script src="../jquery/ui/jquery.ui.core.js"></script>
        <script src="../jquery/ui/jquery.ui.widget.js"></script>

        <script src="../jquery/ui/jquery.ui.mouse.js"></script>
        <script src="../jquery/ui/jquery.ui.sortable.js"></script>
        <script src="../jquery/ui/jquery.ui.selectable.js"></script>
        <style>
        #sortable1, #sortable2 { list-style-type: none; margin: 0; padding: 0 0 2.5em; float: left; margin-right: 10px; }
        #sortable1 li, #sortable2 li { margin: 0 5px 5px 5px; padding: 5px; font-size: 1.2em; width: 120px; }
        </style>
        <script>
        $(function() {
                $( "#sortable1, #sortable2" ).sortable({
                        connectWith: ".connectedSortable"
                }).disableSelection();
        });
        </script>
</head>
<body>

<div>
<ul name="timelist" id="sortable1" class="connectedSortable">
<?php
while($row = mysql_fetch_array($answer))
{
        echo "<li class='ui-state-default'>". $row['newtime'] ."</li>";
}
?>
</ul>

<ul name="blocklist" id="sortable2" class="connectedSortable">
        <li id="blocked" type="date" class="ui-state-highlight"></li>
</ul>
</div>

</body>
</html> 
```

正如我之前提到的，该脚本成功地用我的数据库中的时间填充了一个可排序的拖放列表。我可以从左侧时间列表拖放一次到右侧阻止列表。现在我需要从阻止列表中提取一个数组。我发现了以下内容：

```
<script>
$('ul#myList li').each(function(){
var number = $(this).find('span:first-child').text();
var fruit = $(this).find('span:first-last').text();
});
</script> 
```

对于我的应用程序，按如下方式更改语法是有意义的：

```
<script>
$('ul#sortable2 li').each(function(){
var btime = $(this).find('span:first-child').text();
});
</script> 
```

但是......我无法弄清楚如何成功使用它并回显结果。我尝试过的一切都以失败告终。欢迎任何建议。

非常感谢 - 亭

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:40:50.843

查看 jQuery UI 文档，有一个名为 toArray 的方法，您可以在可排序元素上调用该方法来获取数组。

[http://jqueryui.com/demos/sortable/#method-toArray](http://jqueryui.com/demos/sortable/#method-toArray)

# android - 如何在asp .net mvc2控制器中检测android

> ID：10105775
> 
> 赞同：0
> 
> 时间：2012-04-11T12:19:12.470
> 
> 标签：android, asp.net-mvc, jquery-ui

我正在使用 ASP .NET MVC2 和 jquery UI 自动完成。

有时应用程序在三星 Galaxy Tab 中运行。

在这种情况下，很难从 jquery UI 自动完成中选择客户名称。

在这种情况下，如何检测三星 Galaxy 选项卡以呈现自动完成的选择元素？

我试过了

```
HttpContext.Current.Request.Browser.IsMobileDevice 
```

但它为小报返回 false。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:17:03.047

对于移动浏览器检测，您应该使用 51degrees.mobi 组件，因为您使用的是 MVC2。

[http://51degrees.codeplex.com/releases/view/85505#DownloadId=365978](http://51degrees.codeplex.com/releases/view/85505#DownloadId=365978)

您应该在 codeplex 站点上找到示例/文档，这些示例/文档将准确地向您展示如何做您想做的事情。

# jquery - Jquery 表单验证 - 弹出特定复选框

> ID：10105776
> 
> 赞同：1
> 
> 时间：2012-04-11T12:19:13.283
> 
> 标签：jquery, validation

我使用 Jquery 表单验证。在访客提交之前，我需要检查“条款和条件”复选框。如果未选中，我希望看到消息警报框。（文本框附近显示的其他消息）

这个怎么设置？我试试这个：

```
 $("#myform").validate({
      errorPlacement: function(error, element) {
            if ( element.is(":checkbox") ) {
                alert(error.html());
            }
            },
        rules: {
            name: {
                required: true,
                minlength: 3,
                maxlength: 40,
                lettersonly: false
            },
            ad: {
..... 
```

但这没有用。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:22:51.410

`error`没有 html() 函数。您可能试图提醒元素的标记。

```
alert(element.html()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:57:51.173

在第 3 行，它应该是： `if ( element.is(":checked") ) {`

# azure - 无论如何，天蓝色是否知道其他角色的实例是否已经开始？

> ID：10105780
> 
> 赞同：1
> 
> 时间：2012-04-11T12:19:22.803
> 
> 标签：azure, connection, azure-worker-roles, azure-web-roles

在我的服务部署中，我有两个角色.. 一个 web 角色和一个工作角色..
在我的 webrole 的 on_start() 方法中，我枚举了工作角色的实例并在某个内部端点上创建了一个 tcp 连接。
但通常它会失败，因为工人角色的实例还没有开始。
所以问题是我可以知道实例是否已经启动或者我可以等待工作者角色的实例以某种方式启动吗？这里是代码

```
public override bool OnStart()
        {
            // For information on handling configuration changes
            // see the MSDN topic at http://go.microsoft.com/fwlink/?LinkId=166357.

            ConnectionStatics.ConnectRouterToWorkers();
            Messaging.KeepReadingMessages.Start();

            return base.OnStart();
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T13:01:50.570

我建议将重试逻辑构建到您的循环中，以便当它无法建立连接时，它只是休眠并稍后重试。这不仅可以解决您的启动问题，还可以帮助您解决在结构控制器添加/删除实例时对服务拓扑的更改（这可能由于多种原因而发生）。

更进一步，您*可以*利用 RoleEnvironmentChanging 和 RoleEnvironmentChanged 事件来提供有关何时添加/删除实例的通知。但是我个人并没有利用这一点，也不能肯定地说这些方法可能会或可能不会反映特定实例的“就绪状态”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T18:48:25.853

另一种选择是让工作角色在启动时将消息放入队列中。然后你可以检查队列并等待它在那里发布消息。

# c# - 墓碑工作，但我的应用程序需要它吗？

> ID：10105789
> 
> 赞同：1
> 
> 时间：2012-04-11T12:20:07.233
> 
> 标签：c#, silverlight, windows-phone-7, codeplex, tombstoning

我正在使用 Codeplex 的[Tombstone 助手](http://tombstonehelper.codeplex.com/documentation?referringTitle=Home)，我有点困惑，我认为它保存了您的应用程序控件的状态，即文本框，我在我的应用程序的一个页面上使用代码，而不是在另一个页面上使用它，但是当我测试它时，它只是将两个页面中的文本框的状态保存为相同，当我测试它时没有附加 Tombstone Helper 的文本框保持它的状态。我正在测试的方式是按下模拟器上的 Windows 徽标打开浏览器，然后按住后退按钮。

这是我用于墓碑的代码

```
protected override void OnNavigatingFrom(System.Windows.Navigation.NavigatingCancelEventArgs e)
{
    this.SaveState(e); 
}

protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
{
    this.RestoreState();
} 
```

如果你能帮助我，我将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T13:32:04.667

您实际上并没有墓碑化您的应用程序 - 只是停用它。要强制应用程序墓碑（在调试时），请执行以下操作：

1.  在 Visual Studio 中，右键单击解决方案资源管理器中的项目并选择**属性**以打开项目设计器。

2.  如果您希望应用程序在停用时墓碑，请在“**调试**”选项卡上选中“**调试时停用时墓碑”复选框。**如果您希望应用程序在停用时进入休眠状态，请取消选中该复选框。

来源： http: [//msdn.microsoft.com/en-us/library/ff402564 (v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/ff402564(v=vs.92).aspx)

# f# - 为什么对于正常递归函数成功执行的输入，尾递归函数失败？

> ID：10105792
> 
> 赞同：2
> 
> 时间：2012-04-11T12:20:14.610
> 
> 标签：f#, tail-recursion

根据[MSDN](http://msdn.microsoft.com/en-us/library/dd233224.aspx)文档，在编写递归函数时，累加器参数的使用使函数尾递归，从而节省了堆栈空间。我正在使用 MSDN 网站上给出的两个示例来计算列表中所有数字的总和-

首先没有尾递归-

```
let rec Sum myList =
    match myList with
    | [] -> 0
    | h::t -> h + Sum t 
```

现在有了尾递归-

```
let Sumtail list =
    let rec loop list acc =
        match list with
        | h::t -> loop t acc + h
        | [] -> acc
    loop list 0 
```

并使用 input 运行这两个函数`[1..100000]`。函数`Sum`成功地计算了这个列表的总和，但是如果我通过了，就会给出 stackoverflow 异常，`[1..1000000]` 但是第二个函数`Sumtail` 失败了，`[1..100000]`而它应该比第一个函数提供更好的性能，因为它使用尾递归。还有其他影响递归函数的因素吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T12:26:03.567

您的第二个函数不是尾递归的，因为它被`loop t acc + h`解析为.`(loop t acc) + h``+``loop`

更改`loop t acc + h`为`loop t (acc + h)`以使函数变为尾递归。

# python - 字典数据提取问题

> ID：10105796
> 
> 赞同：1
> 
> 时间：2012-04-11T12:20:39.567
> 
> 标签：python, mongodb, dictionary, extract

top_100 是一个 mongodb 集合：

以下代码：

```
x=[]
thread=[]
for doc in top_100.find():
    x.append(doc['_id'])

db = Connection().test

top_100 = db.top_100_thread

thread = [a["thread"] for a in x]

for doc in thread:
    print doc 
```

给出这个错误：

```
Traceback (most recent call last):
  File "C:\Users\chatterjees\workspace\de.vogella.python.first\src\top_100_thread.py",        line 21, in <module>
    print doc
  File "C:\Python27\lib\encodings\cp1252.py", line 12, in encode
   return codecs.charmap_encode(input,errors,encoding_table)
UnicodeEncodeError: 'charmap' codec can't encode character u'\u03b9' in position 10:      character maps to <undefined> 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:25:00.603

这是因为您的文档包含一些 unicode 数据。您需要正确输出 unicode 数据，而不是直接打印。请参阅： [python 3.0，如何使 print() 输出 unicode？](https://stackoverflow.com/questions/507123/python-3-0-how-to-make-print-output-unicode)

# jquery-ui - Jquery ui对话框输入文本作为标题不起作用

> ID：10105797
> 
> 赞同：2
> 
> 时间：2012-04-11T12:20:43.333
> 
> 标签：jquery-ui, input, dialog

我正在使用 Jquery Ui 使用以下选项进行对话框：

```
$("#locations-dialog").dialog({
    autoOpen: false,
    title: '<input type="text" id="location-name" value="New Location">',
    draggable: false,
    modal: false,
    closeOnEscape: true,
    width: 660,
    height: 515,
}); 
```

可见，我使用输入字段作为标题。

我遇到的问题是，当我点击它时，什么也没有发生，这意味着我无法编辑文本。

不知道我是否做错了什么......但在 jquery ui 中说：

> 任何有效的 HTML 都可以设置为标题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:37:03.373

对话框的绑定是导致问题的原因。有关完整说明和变通示例，请参阅此 URL。

[jQuery UI 对话框 - 标题栏中的输入文本框被禁用？](https://stackoverflow.com/questions/7577012/jquery-ui-dialog-input-textbox-in-the-titlebar-is-disabled)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:40:14.753

正如其他人所说，这是因为对话框小部件禁用对其标题栏中所有元素的选择，即使`draggable`选项设置为`false`.

您可以在创建对话框小部件后将文本框添加到标题栏，如重复问题的答案所示，或者您可以调用`enableSelection()`以重新启用标题栏元素上的选择：

```
$("#locations-dialog").dialog("widget")
                      .find(".ui-dialog-titlebar")
                      .find("*").andSelf()
                      .enableSelection(); 
```

# java - 将对象包装在集合中的实用方法

> ID：10105799
> 
> 赞同：36
> 
> 时间：2012-04-11T12:20:50.633
> 
> 标签：java, collections

我正在 Java 核心库或其他一些常用依赖项（最好是 Apache 中的一个）中寻找一个静态方法，它执行以下操作：

```
public static <T> Collection<T> wrap(final T object){
    final Collection<T> collection = new ArrayList<T>();
    collection.add(object);
    return collection;
} 
```

你知道哪里已经存在这样的方法吗？由于我猜这个问题很常见，我不想复制它的解决方案。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-04-11T12:24:16.997

`java.util.Collections.singleton(object)`会给你一个不可变的`Set`. `singletonList`也可用。

效率较低`java.util.Arrays.asList(object)`会给你一个可变的（可以使用`list.set(0, x);`），但在结构上不可更改（不能添加或删除）`List`。它有点贵，因为在客户端创建了一个额外的数组。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-03-10T10:59:44.227

从 Java 8 开始，以下是一些在 List 中包装 Java 对象的有效方法。

收藏品。**[singletonList](https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#singletonList-T-)**：单项，不可变，从 1.3 开始。
`Collections.singletonList( object )`
内部类支持的高性能。

收藏品。**[nCopies](https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#nCopies-int-T-)**：一个对象，*零*到多个项目，不可变，从 1.2 开始。
`Collections.nCopies( number_of_copy, object )`
内部类支持的高性能。所有项目都指向同一个对象。

大批。**[asList](https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#asList-T...-)**：自 1.2 起，任意数量的对象，*大小*不可变（单个元素可变）。
`Arrays.asList( object1, object2, object3 )`
由内部类支持。[项目在编译时](https://stackoverflow.com/questions/21746663/how-does-jvm-implement-the-varargs)转换为数组，该数组直接支持 List。

new **[ArrayList(Collection)](https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html#ArrayList-java.util.Collection-)**：任意数量的对象，可变的，从 1.2 开始
`new ArrayList<>( Arrays.asList( object1, object2, object3 ) )`
ArrayList 是使用[数组克隆](https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#clone--)和[数组副本](https://docs.oracle.com/javase/8/docs/api/java/lang/System.html#arraycopy-java.lang.Object-int-java.lang.Object-int-int-)创建的，因此不使用任何循环。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T12:23:13.970

[番石榴中的不可变列表](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ImmutableList.html#of%28E%29)

```
public static <E> ImmutableList<E> of(E element) 
```

> 返回包含单个元素的不可变列表。此列表的行为和执行与 Collections.singleton(T) 相当，但不接受 null 元素。它主要是为了代码的一致性和可维护性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T12:22:19.910

不要害怕自己写东西。据我所知是不存在的。我认为这样做的一个原因是实用程序方法决定了它使用的 Collection 实现。在您的情况下，您选择了 ArrayList，但还有一大堆其他集合。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-11T12:25:05.703

java.util.Collections.singletonList() 或 singleton()。请注意，结果是不可变的。

# c - 隐写程序中的按位运算 (C)

> ID：10105803
> 
> 赞同：3
> 
> 时间：2012-04-11T12:21:14.543
> 
> 标签：c, bit-manipulation, bitmask, operations

我对 C 和按位运算都比较陌生，而且我在课堂上分配的作业遇到了麻烦。大部分代码已提供给我，但我一直在找出与按位运算有关的部分时遇到问题。一旦我弄清楚这部分，我会很高兴。我希望有人能帮忙！

以下是我的作业节选：

> > 您将需要使用 8 个字节的图像来隐藏 1 个字节的信息（请记住，只能修改封面图像的 LSB）。您将使用封面图像的其余 16 个字节来嵌入 b.size 的 16 位（二进制数据的大小字段的两个最低有效字节），接下来的 32 个字节将用于嵌入文件扩展名对于有效负载文件，然后您将使用 8*b.size 字节来嵌入有效负载（b.data）。

这个程序正在做的是图像的速记，我必须使用我创建的文件中的数据修改读取的图像的最低有效位。就像我说的，所有的代码都已经写好了。我只是不知道如何修改 LSB。任何帮助将不胜感激！！！

我必须用于重新格式化 LSB 的函数如下：

```
byte getlsbs(byte *b);
void setlsbs(byte *b, byte b0); 
```

这是我迄今为止尝试过的：

```
/* In main function */
b0 = getlsbs(&img.gray[0])

/* Passing arguments */
byte getlsbs(byte *b)
{
    byte b0;
    b0[0] = b >> 8;
    return b0;
} 
```

老实说，我完全不知所措。我整晚都在做这件事，但我仍然几乎没有取得进展。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T12:26:59.867

要将 b 的 LSB 设置为 1：

```
b |= 1; 
```

要将 b 的 LSB 设置为 0：

```
b &= 0xFE; 
```

这是一个如何实现这些功能的想法。此代码未经测试。

```
byte getlsbs(byte *b)
{
    byte result = 0;
    for (int i = 0; i < 8; ++i)
    {
        result >>= 1;
        if (*b & 1)
            result |=  0x80;
        ++b;
    }
    return result;
}

void setlsbs(byte *b, byte b0)
{
    for (int i = 0; i < 8; ++i)
    {
        if (b0 & 1)
            *b |= 1;
        else
            *b &= 0xFE;
        ++b;
        b0 >>= 1;
    }
} 
```

# cmake - 类似于 CMake 的配置

> ID：10105804
> 
> 赞同：1
> 
> 时间：2012-04-11T12:21:18.413
> 
> 标签：cmake, autotools

天。

是否有一个工具可以为 CMake 提供类似 autoconf 的配置界面？例如，而不是

```
cmake -DCMAKE_C_COMPILER=mpicc 
```

通过调用相同的命令

```
./configure CC=mpicc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T20:50:15.590

只需在配置脚本中包装对 cmake 的调用（来自 OpenSceneGraph）：

```
openscenegraph$ cat ./configure 
cmake . -DCMAKE_BUILD_TYPE=Release $@ 
```

请注意，这将执行“源内”构建。您可以通过通常的 -DVARNAME=VALUE 传递构建变量，例如：

```
./configure -DCMAKE_VERBOSE_MAKEFILE=On 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-01T19:39:54.420

这个[github 项目](https://github.com/nemequ/configure-cmake)提供了一个`configure`脚本，可以在 cmake 项目和标准之间进行理解和转换，`autotools` `configure`包括支持`--prefix`和`--enable`

需要一点时间去理解，但我相信它是最接近您期望的解决方案。

# android - 我如何获得 html 所有源代码？

> ID：10105805
> 
> 赞同：0
> 
> 时间：2012-04-11T12:21:30.493
> 
> 标签：android, string, inputstream, bufferedreader

我的意思是我使用下面的代码从 url 获取 html 源代码。但它不包含所有source.Buffersize 是问题还是字符串大小问题？

```
HttpURLConnection connection; 
            OutputStreamWriter request = null; 

                 URL url = null;    
                 String response = null;          
                 String parameters = "aranan="+et.getText();    

                 try 
                 { 
                     url = new URL("http://www.fragmanfan.com/arama.asp"); 
                     connection = (HttpURLConnection) url.openConnection(); 
                     connection.setDoOutput(true); 
                     connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded"); 

                     request = new OutputStreamWriter(connection.getOutputStream()); 
                     request.write(parameters); 
                     request.flush();             
                     String line = "";                
                     InputStreamReader isr = new InputStreamReader(connection.getInputStream()); 
                     BufferedReader reader = new BufferedReader(isr); 
                     StringBuilder sb = new StringBuilder(); 
                     while ((line = reader.readLine()) != null) 
                     { 
                         sb.append(line + "\n"); 
                     } 
                     // Response from server after login process will be stored in response variable.                 
                     response = sb.toString(); 
                     // You can perform UI operations here 
                     browser.loadDataWithBaseURL(null, response,"text/html", "UTF-8", null); 

                     isr.close(); 
                     reader.close(); 

                 } 
                 catch(IOException e) 
                 { 
                     // Error 
                 } 

        } 
    }); 
```

我尝试了一些类似 `BufferedReader reader = new BufferedReader(isr,8192);` 但它不起作用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:52:54.390

创建一个 WebRequest 类。比提出您的要求并得到回应。我试过那个网站，它可以工作。

```
WebRequest response = new WebRequest("http://www.fragmanfan.com/arama.asp?aranan=kurtlar", PostType.GET);
String htmltext = response.Get();
browser.loadDataWithBaseURL(null, htmltext, "text/html", "UTF-8", null); 
```

**WebRequest.class**

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.UnknownHostException;
import java.nio.charset.Charset;
import org.apache.http.HttpResponse;
import org.apache.http.client.CookieStore;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.protocol.ClientContext;
import org.apache.http.impl.client.BasicCookieStore;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.protocol.BasicHttpContext;
import org.apache.http.protocol.HttpContext;

public class WebRequest {
  public enum PostType{
    GET, POST;
  }

  public String _url;
  public String response = "";
  public PostType _postType;
  CookieStore _cookieStore = new BasicCookieStore();

  public WebRequest(String url) {
    _url = url;
    _postType = PostType.POST;
  }

  public WebRequest(String url, CookieStore cookieStore) {
    _url = url;
    _cookieStore = cookieStore;
    _postType = PostType.POST;
  }

  public WebRequest(String url, PostType postType) {
    _url = url;
    _postType = postType;
  }

  public String Get() {
    HttpClient httpclient = new DefaultHttpClient();

    try {
      // Create local HTTP context
      HttpContext localContext = new BasicHttpContext();

      // Bind custom cookie store to the local context
      localContext.setAttribute(ClientContext.COOKIE_STORE, _cookieStore);

      HttpResponse httpresponse;
      if (_postType == PostType.POST)
      {
        HttpPost httppost = new HttpPost(_url);
        httpresponse = httpclient.execute(httppost, localContext);
      }
      else
      {
        HttpGet httpget = new HttpGet(_url);
        httpresponse = httpclient.execute(httpget, localContext);
      }

      StringBuilder responseString = inputStreamToString(httpresponse.getEntity().getContent());

      response = responseString.toString();
    }
    catch (UnknownHostException e) {
      e.printStackTrace();
    }
    catch (Exception e) {
      e.printStackTrace();
    }
    finally {
      // When HttpClient instance is no longer needed,
      // shut down the connection manager to ensure
      // immediate deallocation of all system resources
      httpclient.getConnectionManager().shutdown();
    }

    return response;
  }

  private StringBuilder inputStreamToString(InputStream is) throws IOException {
    String line = "";
    StringBuilder total = new StringBuilder();

    // Wrap a BufferedReader around the InputStream
    BufferedReader rd = new BufferedReader(new InputStreamReader(is,Charset.forName("iso-8859-9")));
    // Read response until the end
    while ((line = rd.readLine()) != null) {
      total.append(line);
    }

    // Return full string
    return total;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:14:53.253

我遇到了一些问题。

我用 `Log.i("tag", html)` 但是记录器有一个最大长度的消息。我的 html 文本被剪裁了。有两种解决方案：

1.  将您的 html 拆分为小块
2.  像这篇文章一样使消息的最大长度更大： [链接](https://stackoverflow.com/questions/8888654/android-set-max-length-of-logcat-messages)

# c++ - C++/Qt FFmpeg 库错误：程序意外完成

> ID：10105807
> 
> 赞同：2
> 
> 时间：2012-04-11T12:21:43.817
> 
> 标签：c++, qt, ffmpeg

我正在尝试在 C++/Qt 中的 Windows 上使用 ffmpeg 库。这是我的主要功能：

```
#include <iostream>
#include <stdio.h>
#include <math.h>
using namespace std;

#define INT64_C(val) val##LL
#define UINT64_C(val) val##ULL
#include <QtCore>

#include <SDL/SDL.h>
#ifdef __MINGW32__
#undef main
#endif

//--------------- FFMPEG Headers and Libraries ---------------
extern "C"
{
#include <libavcodec/avcodec.h>
#include <libavformat/avformat.h>
#include <libswscale/swscale.h>
}

int main(int c, char *args[])
{
    av_register_all();
    AVFormatContext *ctx;

    if(avformat_open_input(&ctx,"salam.avi",NULL,NULL)!=0)
        return -1;
    return 0;
} 
```

它被编译和链接得很好。但是当我尝试运行它时出现此错误：
**程序已意外完成**
这发生在 *avformat_open_input* 函数上。有什么问题？是关于我的代码，还是我的库有问题？
提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:10:49.450

最后我找到了。答案很简单。`ctx`应由 NULL 初始化。

```
AVFormatContext *ctx = NULL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:15:21.383

可能是 AVI 的问题。确保您的 avi 受 FFMPEG 支持。[使用此工具](http://www.kcsoftwares.com/?vtb)检查格式到底是什么，并查找 FFMPEG 库帮助/支持以查看是否支持该格式。

# optimization - 优化 MongoDB 查询或索引

> ID：10105809
> 
> 赞同：2
> 
> 时间：2012-04-11T12:21:56.773
> 
> 标签：optimization, mongodb, indexing

我正在运行一个非常普通的 MongoDB 查询，没有什么复杂或特别的，我想知道它所花费的时间（> 1 秒）是否正常，或者我的索引是否有问题。

我为这个特定查询提供了一个索引，并`explain()`告诉我它已被使用，但它每次都会对集合进行全面扫描，并使整个网页的速度减慢 > 1 秒。

查询：

```
db.tog_artikel.find({"art_filter":{"$exists":false},"$where":"this._id == this.art_hauptartikelnr"}) 
```

解释：

```
> db.tog_artikel.find({"art_filter":{"$exists":false},"$where":"this._id == this.art_hauptartikelnr"}).explain()
{
    "cursor" : "BtreeCursor art_filter_1_art_hauptartikelnr_1",
    "nscanned" : 21306,
    "nscannedObjects" : 21306,
    "n" : 21306,
    "millis" : 1180,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "isMultiKey" : false,
    "indexOnly" : false,
    "indexBounds" : {
        "art_filter" : [
            [
                null,
                null
            ]
        ],
        "art_hauptartikelnr" : [
            [
                {
                    "$minElement" : 1
                },
                {
                    "$maxElement" : 1
                }
            ]
        ]
    }
} 
```

指数：

```
{
   "v": 1,
   "key": {
     "art_filter": 1,
     "art_hauptartikelnr": 1 
  },
   "ns": "togshop.tog_artikel",
   "background": true,
   "name": "art_filter_1_art_hauptartikelnr_1" 
} 
```

为什么每次都扫描完整的集合？为什么是`isMultiKey`假的，我该如何优化这个查询/索引？

环境是一个独立的服务器，MongoDB 2.0.1，64 位 Linux，从带有 php-mongo 1.2.6 的 PHP 访问

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T12:34:00.447

> 为什么每次都扫描完整的集合？

它不是。它正在通过索引：

```
"cursor" : "BtreeCursor art_filter_1_art_hauptartikelnr_1", 
```

这意味着索引“art_filter_1_art_hauptartikelnr_1”用于满足 $exists 条件。

如果那个过滤器的选择性不是很强（即有很多记录满足它），查询仍然会花费很多时间。

> 为什么 isMultiKey 为假

这是错误的，因为没有使用多键索引。多键索引是包含以数组作为值的字段的索引。它与复合索引（即具有多个字段）无关。

```
 $where":"this._id == this.art_hauptartikelnr" 
```

您的第二个条件是 Javascript 表达式，此处不能使用索引（因为查询分析器不了解您在做什么）。即使是这样，您也需要一个包含 _id 的索引。

> 如何优化此查询/索引？

对您的数据进行非规范化，使其具有一个新字段“idIsHauptArtikelNr”，其值为 true 或 false。在 (art_filter, idIsHauptArtikelNr) 上创建一个索引，并将您的查询替换为

```
 { art_filter :{ $exists :false}, idIsHauptArtikelNr : true } 
```

# windows - Apache 2 - LDAP/Active Directory - 自动登录/认证过程

> ID：10105816
> 
> 赞同：7
> 
> 时间：2012-04-11T12:22:38.240
> 
> 标签：windows, apache, authentication, active-directory

是否有一种完全自动化的方法来验证使用 IE8+ 和 Apache的用户，**而无需**用户输入任何形式的凭据？即使我正在运行 Windows，运行 IIS 也不是一个真正的选择。

我发现了一些基于 Perl 的解决方案应该可以工作，但我只能让它在 *Nix 上工作，而且需要大量的模糊测试。

我目前正在使用 authnz_ldap_module 效果很好，但是用户真的很暴躁和恼火，因为他们必须为他们打开的每个新会话输入他们的用户 ID 和密码。

有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-21T15:39:44.780

`mod_authnz_ldap`在最终让模块工作之后，我今天自己也遇到了同样的问题。

根据我迄今为止的研究，我认为您无法使用该模块进行无缝登录，`mod_authnz_ldap`而您必须使用该模块`mod_auth_sspi`。`network.automatic-ntlm-auth.trusted-uris`我已经尝试过了，它似乎可以按预期工作（无论如何在 Internet Explorer 上 - 您也可以通过修改密钥来配置 Firefox 以通过）。

以下是步骤：

1.  [从http://sourceforge.net/projects/mod-auth-sspi/](http://sourceforge.net/projects/mod-auth-sspi/)下载 mod_auth_sspi 模块
2.  从 zip 文件的 bin 文件夹中，将 mod_auth_sspi.so 复制到您的 apache 模块文件夹
3.  从 zip 文件的 bin 文件夹中，将 sspipkgs.exe 复制到您的 apache bin 文件夹
4.  编辑 httpd.conf 以便目录配置如下：

> ```
>  Alias /secure "C:/Secure"
>  <Directory "C:/Secure">
>  Order deny,allow
>  Allow from all
> 
>  AuthType SSPI
>  SSPIAuth On
>  SSPIOfferBasic on
>  SSPIBasicPreferred On
>  SSPIAuthoritative Off
>  AuthName "Login"
>  SSPIDomain dc.domain
> 
>  Require valid-user
>  </Directory> 
> ```

现在重新启动 Apache。

不幸的是，毕竟这对我来说不是一个解决方案，因为我有多个 LDAP 服务器要进行身份验证，但希望这会对你有所帮助。

# apache - Apache SSL 虚拟主机 404

> ID：10105818
> 
> 赞同：0
> 
> 时间：2012-04-11T12:22:56.867
> 
> 标签：apache, ssl-certificate, virtualhost

我在一台机器上有两个虚拟主机，它们的 IP 相同，我为其设置了 SSL 证书（具有 1 个备用主题名称）。这两个地址都被验证为正常工作，但在访问第二个站点的安全版本时出现 404 错误。第一个工作正常。我不确定这是 Apache 问题还是应用程序环境问题，或者两者兼而有之。以下是我如何设置虚拟主机的示例：

```
<VirtualHost *:443>
    ServerAdmin testymctesterson@test.com
    DocumentRoot "C:/Program Files/Apache Group/Apache2/htdocs/testsite1"
    ServerName testsite1.com:443
    ErrorLog logs/error_log
    TransferLog logs/access_log
    CustomLog logs/ssl_request_log \
          "%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \"%r\" %b"

    RewriteEngine On
    RedirectMatch ^/$ https://www.testsite1.com/apps/survey

    <IfModule mod_weblogic.c>
        MatchExpression / WebLogicHost=web01|WebLogicPort=8030|Debug=On
    </IfModule>

    SSLEngine on
    /// SSL Cert configurations

</VirtualHost>

<VirtualHost *:443>
    ServerAdmin testymctesterson@test.com
    DocumentRoot "C:/Program Files/Apache Group/Apache2/htdocs/testsite2"
    ServerName www.testsite2.com:443
    ErrorLog logs/error_log
    TransferLog logs/access_log
    CustomLog logs/ssl_request_log \
          "%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \"%r\" %b"

    RewriteEngine On
    RedirectMatch ^/$ https://www.testsite2.com/rpower

    <IfModule mod_weblogic.c>
        MatchExpression / WebLogicHost=web01|WebLogicPort=8030|Debug=On
    </IfModule>

    SSLEngine on
    /// SSL Cert configurations

    SetEnvIf User-Agent ".*MSIE.*" \
         nokeepalive ssl-unclean-shutdown \
         downgrade-1.0 force-response-1.0

</VirtualHost> 
```

谁能帮我弄清楚为什么我在测试站点 2 上得到 404？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T02:06:54.703

原来这是一个 Apache 版本问题。我们在服务器上有一个旧版本（2.2 之前），它显然不支持虚拟主机，至少不支持备用主题名称。一旦我们升级到 2.2.2x，它就可以正常工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T05:08:27.073

如果我做 SSL 怎么办，因为我需要一个重定向 URI，即 https:// 所以我在我的 xamp apache httpd 中有这个

DocumentRoot "C:/x/htdocs/project-lara/public" ServerName fuseuca.com DocumentRoot "C:/x/htdocs/project-lara/public" ServerName fuseuca.com SSLEngine on SSLCertificateFile "conf/ssl.crt/server. crt" SSLCertificateKeyFile "conf/ssl.key/server.key" AllowOverride All Order allow,deny Allow from all DocumentRoot "C:/x/htdocs/project-lara/public" ServerName fuseuca.com AllowOverride All Order allow,deny Allow from all全部

我还配置了主机 127.0.0.1 fuseuca.com

但我仍然得到网页不可用错误代码：ERR_CONNECTION_REFUSED

# string - 如果字符数大于某个值，则截断 Excel 单元格内的字符串

> ID：10105819
> 
> 赞同：1
> 
> 时间：2012-04-11T12:22:57.023
> 
> 标签：string, excel, count, trunk

在 Excel 中，对于工作表的每一行，我都有不同长度的字符串（a1、a2、a3 ...）。在单元格 B2 中，我必须`=Length(A1)`计算字符串中的字符。

我需要一个公式/函数，它可以截断 A 列中字符数 > 20 的所有字符串，例如：

```
$string = THIS IS A LONG STRING I WANT TO TRUNCATE IF EXCEEDS 20 CHARS;
if ($string > 20)
{
   COUNT 20 CHARS FROM THE BEGINNING OF STRING AND CUT THE REST
} 
else 
{
 skip 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T12:26:07.880

You can just read the 1st 20 characters, it doesn't matter if there are fewer;

```
 =left(A1, 20) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:27:06.277

使用`Len`Length 函数和`Left`函数仅使用前 20 个字符：

```
Dim myString As String

If (Len(myString) > 20) Then
    myString = Left(myString, 20)
End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T12:36:38.397

用这个，

```
=LEFT(DataCell,20) 
```

例如：

```
=LEFT(A1,20) 
```

# php - Codeigniter：无法找到您指定的模型

> ID：10105820
> 
> 赞同：4
> 
> 时间：2012-04-11T12:22:57.943
> 
> 标签：php, codeigniter, centos, hmvc

我已将我的 PHP 从版本 5.2.9 升级到 5.3.1，并且在我的 codeigniter 应用程序中遇到了以下问题：

`Unable to locate the model you have specified: some_model`

Codeigniter 2.1 版，带有 HMVC 扩展服务器：Centos 5

模型名称都是小写的，它也是通过调用它们的小写字母来加载的。在 PHP 升级之前，一切都可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:25:01.443

如果您使用的是 HMVC，那么您还必须提供模块名称。

像这样

```
$this -> load -> model('module/model_name'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-22T07:58:29.757

将第二个参数设为 TRUE：

```
$this->load->model('modelname', TRUE); 
```

# java - 如何在我们的 jar 文件中集成 wurfl

> ID：10105821
> 
> 赞同：1
> 
> 时间：2012-04-11T12:23:08.537
> 
> 标签：java

我为 jar 制作了一个类文件。这个类有使用 wurfl。并在 javac 中运行此代码，输出正常。但我制作 jar 文件然后给出错误。

整合 wurfl ：

```
 ApplicationContext ctx = new ClassPathXmlApplicationContext("/resources/wurfl-standard-import-ctx.xml");
     WURFLManager wurflManager = (WURFLManager) ctx.getBean("wurflManager"); 
```

我制作了jar文件并运行它。然后错误：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean wit
h name 'wurflModel' defined in class path resource [resources/wurfl-standard-imp
ort-ctx.xml]: Error setting property values; nested exception is org.springframe
work.beans.PropertyBatchUpdateException; nested PropertyAccessExceptions (2) are
:
PropertyAccessException 1: org.springframework.beans.MethodInvocationException:
Property 'wurfl' threw exception; nested exception is net.sourceforge.wurfl.core
.resource.WURFLResourceException: WURFL unexpected exception
PropertyAccessException 2: org.springframework.beans.MethodInvocationException:
Property 'wurflPatch' threw exception; nested exception is net.sourceforge.wurfl
.core.resource.WURFLResourceException: WURFL unexpected exception
        at org.springframework.beans.factory.support.AbstractAutowireCapableBean
Factory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1361)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBean
Factory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBean
Factory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBean
Factory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getOb
ject(AbstractBeanFactory.java:295)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistr
y.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBe
an(AbstractBeanFactory.java:292)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean
(AbstractBeanFactory.java:194)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.
preInstantiateSingletons(DefaultListableBeanFactory.java:580)
        at org.springframework.context.support.AbstractApplicationContext.finish
BeanFactoryInitialization(AbstractApplicationContext.java:900)
        at org.springframework.context.support.AbstractApplicationContext.refres
h(AbstractApplicationContext.java:455)
        at org.springframework.context.support.ClassPathXmlApplicationContext.<i
nit>(ClassPathXmlApplicationContext.java:139)
        at org.springframework.context.support.ClassPathXmlApplicationContext.<i
nit>(ClassPathXmlApplicationContext.java:83)
        at mwp.slktechlabs.cron.AnalyticsCron.setNewdataInUserResponseCollection
(AnalyticsCron.java:116)
        at mwp.slktechlabs.cron.AnalyticsCron.fillAnalyticsData(AnalyticsCron.ja
va:92)
        at mwp.slktechlabs.cron.AnalyticsCron.main(AnalyticsCron.java:44)
Caused by: org.springframework.beans.PropertyBatchUpdateException; nested Proper
tyAccessExceptions (2) are:
PropertyAccessException 1: org.springframework.beans.MethodInvocationException:
Property 'wurfl' threw exception; nested exception is net.sourceforge.wurfl.core
.resource.WURFLResourceException: WURFL unexpected exception
PropertyAccessException 2: org.springframework.beans.MethodInvocationException:
Property 'wurflPatch' threw exception; nested exception is net.sourceforge.wurfl
.core.resource.WURFLResourceException: WURFL unexpected exception
        at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(
AbstractPropertyAccessor.java:102)
        at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(
AbstractPropertyAccessor.java:58)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBean
Factory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1358)
        ... 15 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:16:55.830

将您的资源包包含在您的 jar 中，并且在此资源包静态文件中包含此代码。

```
<property name="wurfl" value="file:./resources/wurfl-2.2.zip"/>
<property name="wurflPatch" value="file:./resources/web_browsers_patch.xml"/> 
```

在此代码中使用文件协议。

# javascript - 你什么时候使用 Object.defineProperty()

> ID：10105824
> 
> 赞同：70
> 
> 时间：2012-04-11T12:23:16.920
> 
> 标签：javascript, ecmascript-5

我想知道什么时候应该使用

```
Object.defineProperty 
```

为对象创建新属性。我知道我可以设置类似的东西

```
enumerable: false 
```

但是你什么时候真的需要这个？如果你只是设置一个属性

```
myObject.myprop = 5; 
```

它的描述符都设置为true，对吗？当你们对 .defineProperty() 使用相当冗长的调用以及出于什么原因时，我实际上更好奇。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-04-11T12:24:43.720

[`Object.defineProperty`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/defineProperty)主要用于设置具有特定属性描述符的属性（例如只读（常量）、可枚举性（在[`for (.. in ..)`](https://developer.mozilla.org/en/JavaScript/Reference/Statements/for...in)循环中不显示属性、getter、setter）。

```
"use strict";
var myObj = {}; // Create object
// Set property (+descriptor)
Object.defineProperty(myObj, 'myprop', {
    value: 5,
    writable: false
});
console.log(myObj.myprop);// 5
myObj.myprop = 1;         // In strict mode: TypeError: myObj.myprop is read-only 
```

## 例子

此方法使用属性扩展`Object`原型。仅定义了 getter，并且可枚举性设置为`false`。

```
Object.defineProperty(Object.prototype, '__CLASS__', {
    get: function() {
        return Object.prototype.toString.call(this);
    },
    enumerable: false // = Default
});
Object.keys({});           // []
console.log([].__CLASS__); // "[object Array]" 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-01-10T13:23:53.663

在我的经验中，很少使用像“可枚举”这样的功能。主要用例是计算属性：

```
var myObj = {};

myObj.width = 20;
myObj.height = 20;

Object.defineProperty(myObj, 'area', {
    get: function() {
        return this.width*this.height;
    }
});
console.log(myObj.area); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-05-06T11:37:51.613

使用 Object.defineProperty 的一个非常好的理由是，它允许您循环遍历对象中的函数作为计算属性，它执行函数而不是返回函数的主体。

例如：

```
var myObj = {};

myObj.width = 20;
myObj.height = 20;

Object.defineProperty(myObj, 'area', {
    get: function() {
        return this.width*this.height;
    },
    enumerable: true
});

for (var key in myObj) {
  if (myObj.hasOwnProperty(key)) {
    console.log(key + " -> " + myObj[key]);
  }
}
//width -> 20, height -> 20, area -> 400 
```

与将函数作为属性添加到对象字面量相比：

```
var myObj = {};

myObj.width = 20;
myObj.height = 20;

myObj.area = function() {
       return this.width*this.height;
    };

for (var key in myObj) {
  if (myObj.hasOwnProperty(key)) {
    console.log(key + " -> " + myObj[key]);
  }
}
// width -> 20, height -> 20, area -> function() { return this.width*this.height;} 
```

确保将 enumerable 属性设置为 true 以便循环遍历它。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-08-13T22:20:56.530

例如，[这就是 Vue.js 跟踪`data`对象](https://vuejs.org/v2/guide/reactivity.html#How-Changes-Are-Tracked)变化的方式：

> 当您将纯 JavaScript 对象作为选项传递给 Vue 实例时`data`，Vue 将遍历其所有属性并将它们转换为`getter/setters`using **`Object.defineProperty`**。这是一个仅限 ES5 且不可填充的功能，这就是 Vue 不支持 IE8 及更低版本的原因。
> 
> getter/setter 对用户是不可见的，但在底层，它们使 Vue 能够在访问或修改属性时执行依赖跟踪和更改通知。
> 
> [...]

请记住，即使是 Vue.js 的超薄和基本版本也会使用更多的东西`Object.defineProperty`，但主要功能来自于它：

[![Vue.js 的反应周期](../Images/53638b5a1bfd5c328b8944f63eedff1f.png)](https://i.stack.imgur.com/HgQGq.png)

在这里你可以看到一篇文章，作者实现了类似 Vue.js 的最小 PoC 版本：[https ://medium.com/js-dojo/understand-vue-reactivity-implementation-step-by-step-599c3d51cd6c](https://medium.com/js-dojo/understand-vue-reactivity-implementation-step-by-step-599c3d51cd6c)

这里有一个演讲（西班牙语），演讲者在解释 Vue.js 中的反应性时构建了类似的东西：[https://www.youtube.com/watch? v=axXwWU-L7RM](https://www.youtube.com/watch?v=axXwWU-L7RM)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-09-04T18:26:08.413

## 概括：

在 Javascript 中，对象是键值对的集合。 `Object.defineProperty()`是一个可以在对象上定义新属性并可以设置属性的以下属性的函数：

*   **value `<any>`：**与键关联的值
*   **writable `<boolean>`:**如果 writable 设置为`true`可以通过为其分配新值来更新该属性。如果设置为`false`您无法更改该值。
*   **enumerable `<boolean>`：**如果 enumerable 设置为`true`Property 可以通过`for..in`循环访问。此外，返回的唯一可枚举属性键`Object.keys()`
*   **可配置`<boolean>`：**如果可配置设置为`false`您无法更改属性属性（值/可写/可枚举/可配置），也因为您无法更改值，您无法使用`delete`运算符将​​其删除。

## 例子：

```
let obj = {};

Object.defineProperty(obj, 'prop1', {
      value: 1,
      writable: false,
      enumerable: false,
      configurable: false
});   // create a new property (key=prop1, value=1)

Object.defineProperty(obj, 'prop2', {
      value: 2,
      writable: true,
      enumerable: true,
      configurable: true
});  // create a new property (key=prop2, value=2)

console.log(obj.prop1, obj.prop2); // both props exists

for(const props in obj) {
  console.log(props);
  // only logs prop2 because writable is true in prop2 and false in prop1
}

obj.prop1 = 100;
obj.prop2 = 100;
console.log(obj.prop1, obj.prop2);
// only prop2 is changed because prop2 is writable, prop1 is not

delete obj.prop1;
delete obj.prop2;

console.log(obj.prop1, obj.prop2);
// only prop2 is deleted because prop2 is configurable and prop1 is not
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-11-10T12:11:54.173

`Object.defineProperty` **防止您不小心将值分配给原型链中的某个键**。使用此方法，您只分配给该特定对象级别（而不是原型链中的任何键）。

例如：有一个对象`{key1: value1, key2: value2}`，你不知道它的原型链，或者你错误地错过了它，那么原型链中的某个地方有一些属性“颜色”-

**使用点（。）分配 -**

**此操作将为原型链中的键“颜色”赋值**（如果键存在于某处），您会发现对象没有任何变化，如 . obj.color='蓝色'; // obj 保持与 {key1: value1, key2: value2} 相同

**使用 Object.defineProperty 方法**-

```
Object.defineProperty(obj, 'color', {
  value: 'blue'
}); 
```

// 现在 obj 看起来像`{key1: value1, key2: value2, color: 'blue'}`. 它将属性添加到同一级别。然后您可以使用方法安全地迭代`Object.hasOwnProperty()`。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-06-22T18:38:32.357

我见过的一个简洁的用例`defineProperty`是库向用户提供一个错误属性，如果在某个时间间隔内没有访问它，您将自己记录错误。例如：

```
let logErrorTimeoutId = setTimeout(() => {
  if (error) {
    console.error('Unhandled (in <your library>)', error.stack || error);
  }
}, 10);

Object.defineProperty(data, 'error', {
    configurable: true,
    enumerable: true,
    get: () => {
      clearTimeout(logErrorTimeoutId);
      return error;
    },
  }); 
```

此代码的来源：[https ://github.com/apollographql/react-apollo/blob/ddd3d8faabf135dca691d20ce8ab0bc24ccc414e/src/graphql.tsx#L510](https://github.com/apollographql/react-apollo/blob/ddd3d8faabf135dca691d20ce8ab0bc24ccc414e/src/graphql.tsx#L510)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-07-06T14:30:51.397

一个很好的用途是当您需要以优雅的方式进行一些拦截或应用经典的 Observer/Observable 模式时：

[https://www.monterrail.com/blog/2016/how-to-build-a-reactive-engine-in-javascript-part-1-observable-objects](https://www.monterail.com/blog/2016/how-to-build-a-reactive-engine-in-javascript-part-1-observable-objects)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-09-28T19:21:43.640

一个非常有用的案例是监视对某些事物的更改并对其采取行动。这很容易，因为您可以在设置值时触发回调函数。这是一个基本的例子。

您有一个`Player`可以播放或不播放的对象。您希望在它开始播放和停止播放时立即发生某些事情。

```
function Player(){}
Object.defineProperty(Player.prototype, 'is_playing', {
  get(){
    return this.stored_is_playing;  // note: this.is_playing would result in an endless loop
  },
  set(newVal){
    this.stored_is_playing = newVal;
    if (newVal === true) {
      showPauseButton();
    } else {
      showPlayButton();
    }
  }
});
const cdplayer = new Player();
cdplayer.is_playing = true; // showPauseButton fires 
```

此答案与此处的其他几个答案相关，这些答案是获取更多信息的好起点，但无需遵循外部链接即可阅读有关库或编程范例的信息。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2016-12-11T11:22:29.720

@杰拉德辛普森

如果 'area' 应该是可枚举的，它也可以在没有 Object.defineProperty 的情况下编写。

```
var myObj = {
    get area() { return this.width * this.height }
};

myObj.width = 20;
myObj.height = 20;

for (var key in myObj) {
  if (myObj.hasOwnProperty(key)) {
    console.log(key + " -> " + myObj[key]);
  }
}

//area -> 400, width -> 20, height -> 20 
```

# android - 一个用户有多个非对称密钥对？

> ID：10105826
> 
> 赞同：1
> 
> 时间：2012-04-11T12:23:24.167
> 
> 标签：android, encryption, rsa

我正在创建一个 Android 应用程序，首先需要能够将数据安全地传输到服务器。所以我想到了RSA。

我会将公钥发送给用户，让他做他必须做的事情，然后通过私人接收并解密。没关系。

但现在看来，另一方也应该有某种加密。意思是，应该有加密消息并将其发送给用户的方法，并且只允许特定用户能够阅读它。

这闻起来就像拥有 2 对密钥，并将一对中的公钥和另一对中的私钥发送给用户，并将其余的保留给服务器。

我看过对称密钥，但它们对我来说似乎不太安全。

我错过了什么，或者这很常见吗？我对整个密码学领域有些陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:59:38.317

通常的建议适用：使用 HTTPS，不要试图发明安全的消息传递协议。你很可能会失败。如果您绝对需要这样做，通常的方法是使用 RSA 密钥来加密对称会话密钥并用这些密钥加密您的数据。另请注意，您可以使用 RSA 密钥加密的数据大小受密钥大小（1024、2048 等*位*）的限制。对于双向通信，每一方都需要拥有对方的公钥。所以它是这样的：

1.  Alice 将她的公钥 (RSA)*安全地*交给 Bob（见下文）
2.  Bob 将他的公钥 (RSA)*安全地*交给 Alice
3.  当 Bob 想要与 Alice 通信时，他会生成一个会话密钥（例如，一个 256 位 AES 密钥），然后使用她的公钥对其进行加密。
4.  Bob 将加密的会话密钥发送给 Alice。
5.  Bob 使用会话密钥 (AES) 对消息进行加密，并将其发送给 Alice。
6.  Alice 使用她的私钥 (RSA) 来解密会话密钥 (AES)。
7.  Alice 使用会话密钥 (AES) 解密来自 Bob 的消息。

在步骤 3 到 7 中颠倒 Bob 在 Bob 中的角色，以另一种方式进行通信。

但是，当然，如果您将公钥发送给某人，他们如何确定这实际上是您的密钥，而不是我的？如果您不亲自递交并出示带照片的身份证件，这绝非易事。

然后，您需要某种方法来验证来自 Bob 的（加密的）消息没有被修改（您可以将其切成两半，它仍然是有效的和可解密的；当然还有其他更复杂的攻击）。

所以只要说服你需要说服的人使用 HTTPS 或其他一些已建立的协议，不要试图重新发明轮子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-17T01:16:13.010

> 这闻起来就像拥有 2 对密钥，并将一对中的公钥和另一对中的私钥发送给用户，并将其余的保留给服务器。

这不是公钥基础设施的工作方式。你们每个人都**生成**自己的密钥对，并**交换**公钥。

客户端使用服务器的公钥加密数据到服务器并验证从服务器接收到的消息的签名。

服务器使用服务器的私钥来解密来自客户端的消息并签署发送给客户端的消息。

客户端密钥对的反向操作是相同的。

# android - 如何使用 Android 测试项目测试项目

> ID：10105838
> 
> 赞同：1
> 
> 时间：2012-04-11T12:24:17.303
> 
> 标签：android, unit-testing

我是测试android项目的新手。只是我尝试测试示例 hello world 应用程序。它的工作。我参考以下链接

```
 https://developer.android.com/resources/tutorials/testing/helloandroid_test.html 
```

我有一个疑问，我可以使用 android test 测试整个 android 项目吗？这是可能的？。否则，android 测试仅适用于小型应用程序。我想使用 android 测试项目来测试选项卡和 Web 服务命中以及许多功能。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:36:53.897

android 应用程序可以进行 JUnit 测试。如果你想测试一个 android 应用程序，那么你可以使用 robotsium 之类的测试工具。在这里你可以点击这个链接

[http://code.google.com/p/robotium/wiki/Getting_Started](http://code.google.com/p/robotium/wiki/Getting_Started)

Robotium 是一个测试框架，旨在轻松为 Android 应用程序编写功能强大且健壮的自动黑盒测试用例。

# php - 返回数组的类似 Array_unshift 的函数

> ID：10105839
> 
> 赞同：3
> 
> 时间：2012-04-11T12:24:21.843
> 
> 标签：php, arrays

php中是否有一个内置函数将元素添加到数组中，并返回新数组？

而不是返回数组的新长度？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T12:28:52.130

你可以使用

```
array_merge() 
```

例如

```
$resultingArray = array_merge(array($newElement), $originalArray); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T12:33:03.103

旁边`array_merge`，如果没有任何重复的键，您可以执行以下操作：

```
$array = array('a' => 'A');
$append = array('b' => 'hello');
$array = $append + $array; 
```

给出：

```
Array
(
    [b] => hello
    [a] => A
) 
```

加号是[数组联合运算符^(*Docs*)](http://php.net/manual/en/language.operators.array.php) 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T12:28:04.160

没有内置的，但它很简单，可以包装它：

```
function my_unshift($array, $var) {
  array_unshift($array, $var);
  return $array;
} 
```

但这不是必需的，因为`array_unshift()`对数组引用进行操作，因此原始文件已被修改。`array_push(), array_pop(), array_shift()`all 也对参考进行操作。

```
$arr = array(1,2,3);
array_unshift($arr, 0);

// No need for return. $arr has been modified    
print_arr($arr);
Array
(
    [0] => 0
    [1] => 1
    [2] => 2
    [3] => 3
) 
```

# armv7 - 错误链接 armv7 不运行 IOS DEVICE

> ID：10105846
> 
> 赞同：1
> 
> 时间：2012-04-11T12:24:48.910
> 
> 标签：armv7, ios-frameworks

我今天早上醒来，我的文件“libz.dylib”是红色的，我无法编译我的项目。所以我尝试重新安装 Xcode 4.3，我能够再次导入库。

然后，当我尝试在设备上运行时，编译器给了我这 4 个警告和这个错误：

```
ld: warning: ignoring file /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/crt1.3.1.o, file was built for i386 which is not the architecture being linked (armv7)
ld: warning: ignoring file /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/libsqlite3.0.dylib, file was built for unsupported file format which is not the architecture being linked (armv7)
ld: warning: ignoring file /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/libz.dylib, file was built for unsupported file format which is not the architecture being linked (armv7)
ld: warning: ignoring file /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/libstdc++.dylib, file was built for unsupported file format which is not the architecture being linked (armv7)
ld: warning: ignoring file /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/libSystem.dylib, file was built for unsupported file format which is not the architecture being linked (armv7)
ld: in /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/usr/lib/libobjc.A.dylib, file was built for unsupported file format which is not the architecture being linked (armv7) for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我可以在模拟器上运行我的应用程序，但我无法在设备上编译。

我认为问题出在图书馆链接上。以前有人遇到过同样的问题吗？

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:32:03.343

我刚才遇到了类似的问题，并将我的构建设置与正在运行的项目（从早期版本的 xcode 导入）进行了比较。我注意到工作项目在“其他链接器标志”中没有设置任何内容，而我的非工作项目中设置了“-arch i386”。我删除了它，它似乎已经修复了它。我真的不知道为什么。

# java - 将泛型引入遗留代码并在参数化实例上进行迭代

> ID：10105848
> 
> 赞同：2
> 
> 时间：2012-04-11T12:24:53.137
> 
> 标签：java, generics

我的问题与将泛型引入遗留 Java 类有关。下面代码中我想要生成的遗留类是 ClientObjectProxy 和 ClientObjectContainer。ClientObject 保持不变。为简单起见，我将所有类放在一个外部类中。

现在，在旧代码中，对未参数化的 ClientObjectProxyContainer 实例有许多方法 ClientObjectProxyContainer.getProxies() 调用。

通过引入泛型，循环 4 中的现有代码将不再编译，需要将调用提取到循环 1 中的局部变量，或者需要使用带问号的声明，类似于循环 2。新代码应使用参数化循环 3 中的变量。

我的问题是，这是适合我的方法，将现有代码更改为循环 1 或循环 2，还是有不修改遗留代码的方法？

谢谢

简

```
import java.util.ArrayList;
import java.util.List;

public class GenericForumsExample {
    /**
     * This class is unchanged
     */
    private class ClientObject {
    }

    /**
     * @param <T> Type of the ClientObject behind this proxy
     */
    private class ClientObjectProxy<T extends ClientObject> {
    }

    /**
     * @param <T> Type of the ClientObject contained in this collection
     */
    private class ClientObjectProxyContainer<T extends ClientObject> {
        //Previous signature was:
        //  public List<ClientObjectProxy> getProxies(){
        // New signature is the following
        public List<ClientObjectProxy<T>> getProxies(){
            return new ArrayList<ClientObjectProxy<T>>();
        }
    }

    public void testScenario() {
        ClientObjectProxyContainer proxyContainer = new ClientObjectProxyContainer();
        List<ClientObjectProxy> proxies = proxyContainer.getProxies(); // Just a compiler warning

        // Loop 1
        for (ClientObjectProxy proxy : proxies) {                     // Compiler OK
            //Do something...
        }

        // Loop 2
        ClientObjectProxyContainer<?> clientObjectProxyContainer = new ClientObjectProxyContainer();
        for (ClientObjectProxy<?> proxy : clientObjectProxyContainer.getProxies()) {
            //Do something...
        }

        // Loop 3
        for (ClientObjectProxy<ClientObject> proxy : new ClientObjectProxyContainer<ClientObject>().getProxies()) {
            //Do something...
        }

        // Loop 4
        // Compiler fails on next code line
        // incompatible types
        // found   : java.lang.Object
        // required: GenericForumsExample.ClientObjectProxy
        for (ClientObjectProxy proxy : proxyContainer.getProxies()) {
            //Do something...
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:51:28.680

在处理泛型的代码中，尽量避免使用原始类型。当您使用这些类型时，您通常会丢失比您预期更多的类型信息，就像在这种情况下发生的那样。

最后一个循环中的调用`proxyContainer.getProxies()`实际上返回 a `List`（因为`proxyContainer`是原始类型，所有与其类型相关的泛型都被删除，包括方法签名中的泛型）。如果你遍历一个 raw `List`，你只会得到`Object`s ，所以会出现编译错误。您可以通过在 for 循环中写入来解决此问题`(List<ClientObjectProxy>)proxyContainer.getProxies()`（您当然会收到警告）。

因此，使用通配符而不是原始类型通常更清楚。在已经“泛化”的代码中，永远不要使用原始类型`ClientObjectProxyContainer`，但`ClientObjectProxyContainer<?>`如果您没有具体类型，则始终使用。该类型的含义基本相同，但在使用时不会导致所有泛型类型都被忽略。

当为 of 类型使用通配符时`proxyContainer`，结果类型 of`getProxies()`将`List<ClientProxyObject<?>>`不是 just `List`，因此您可以将`ClientProxyObject`s 去掉（但在这里，也更喜欢使用`ClientProxyObject<?>`！）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:53:54.783

如果您引入泛型，我更喜欢 Loop 1 方法。那么您不必担心类型检查。

# android - 如何编辑android构建配置文件

> ID：10105855
> 
> 赞同：1
> 
> 时间：2012-04-11T12:25:17.153
> 
> 标签：android, build, config

使用 ant 构建项目时，我应该手动更改 project.properties 和 local.properties 等文件吗？文件开头的评论清楚地表明我不应该这样做。

我看到有些配置是写在ant.properties中的。

我必须如何编辑这些文件？

# asp.net - asp.net中的水晶报告-缺少参数值

> ID：10105859
> 
> 赞同：0
> 
> 时间：2012-04-11T12:25:40.580
> 
> 标签：asp.net, crystal-reports, report

我想打印我的报告，但出现此错误。打印前我必须定义哪些参数？我定义了 PrintToPrinter 函数的打印机名称和参数。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-25T14:10:34.973

想知道您缺少哪些参数？

```
 For Each key As ParameterField In CrystalReport.ParameterFields
                If key.HasCurrentValue = False Then
                    Debug.Print(key.Name.ToString)
                End If

            Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T12:35:17.563

“缺少参数值”意味着您没有为报告提供获取数据所需的所有参数。您必须为报告中的所有非可选参数提供值，它才能获取数据。

# variables - SSIS ScriptTask 更改变量的值属性

> ID：10105866
> 
> 赞同：0
> 
> 时间：2012-04-11T12:26:08.980
> 
> 标签：variables, ssis

我尝试简单地更改 SSIS 变量的值，在 ScriptTask 中执行此代码：

```
 string path = Dts.Connections["BazyPobrane"].ConnectionString.ToString();
        string[] nameZIParray = Directory.GetFiles(path, "*.ZIP");
        string[] nameRARarray = Directory.GetFiles(path, "*.RAR");

        foreach (string nameZIP in nameZIParray) //search new ZIP
        {
            if (File.GetCreationTime(nameZIP) > DateTime.Now.AddDays(-1))
            {
                Dts.Variables["User::NazwaPliku"].Value = Path.GetFileName(nameZIP);
            }

        }
        foreach (string nameRAR in nameRARarray) //search new RAR
        {
            if (File.GetCreationTime(nameRAR) > DateTime.Now.AddDays(-1))
            {
                Dts.Variables["User::NazwaPliku"].Value = Path.GetFileName(nameRAR);
            }

        }
        Dts.TaskResult = (int)ScriptResults.Success; 
```

执行 ScriptTask 后，它根本不更改变量值。调试模式似乎很好。也许我错过了一些组件设置？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:39:40.587

需要检查的一些事项：

1.  你确定变量没有改变吗？如果您使用 MessageBox 放置后续脚本任务，它是否显示正确的值？

2.  我认为您不需要变量类型，即删除“user::”

3.  确保变量位于 ReadWriteVariables 属性中，正如@OcasoP 所建议的那样

4.  变量的范围是什么？确保您没有不同范围的两个副本，或者至少您拥有的副本在*脚本*范围内是可见的

5.  您可以在写入之前尝试锁定变量（这应该相当于上面的（3））

最后一点的代码示例：

```
IDTSVariables100 variables = null;
this.VariableDispenser.LockOneForWrite("NazwaPliku",ref variables);
variables[0].Value = myValue;
variables.Unlock(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:51:18.777

调试添加 MsgBox(variable_name) 的脚本任务并通过执行查看其值。最佳调试选项:)

# linux - 为什么我不能使用 int 0x80 从指向堆栈内存的指针 sys_write？

> ID：10105871
> 
> 赞同：2
> 
> 时间：2012-04-11T12:26:26.717
> 
> 标签：linux, assembly, x86-64, system-calls

```
; NASM
push 30 ; '0'

mov rax, 4 ; write
mov rbx, 1 ; stdout
mov rcx, rsp ; ptr to character on stack
mov rdx, 1 ; length of string = 1
int 80h 
```

上面的代码不会将任何内容打印到标准输出。当我给它一个 ptr 给`section .data`. 我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T14:24:15.287

`amd64`使用与 不同的系统调用方法`int 0x80`，尽管这可能仍然适用于安装的 32 位库等。而`x86`一个会这样做：

```
mov eax, SYSCALL_NUMBER
mov ebx, param1
mov ecx, param2
mov edx, param3
int 0x80 
```

一个人`amd64`会这样做：

```
mov rax, SYSCALL_NUMBER_64 ; different from the x86 equivalent, usually
mov rdi, param1
mov rsi, param2
mov rdx, param3
syscall 
```

对于您想要做的事情，请考虑以下示例：

```
 bits 64
        global _start

section .text

_start:
        push            0x0a424242
        mov             rdx, 04h
        lea             rsi, [rsp]
        call            write
        call            exit
exit:
        mov             rax, 60     ; exit()
        xor             rdi, rdi    ; errno
        syscall

write:
        mov             rax, 1      ; write()
        mov             rdi, 1      ; stdout
        syscall
        ret 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T12:41:45.743

十进制 30 是 ASCII“记录分隔符”的代码。不管那是什么，它可能不是可打印的字符。

另一方面，30 十六进制（NASM 术语中的 30h 或 0x30）是 ASCII“0”的代码。

此外，您需要使用 64 位 ABI。

# ios - Write image data in dispatch_async

> ID：10105873
> 
> 赞同：0
> 
> 时间：2012-04-11T12:26:36.043
> 
> 标签：ios, uiimage, grand-central-dispatch, nsfilemanager

I'm having a problem when I try to save an UIImage as a PNG file by using GCD. Here's what am I writing :

```
 NSString *fileName = [[NSString stringWithFormat:@"%@.png",url] substringFromIndex:5];
        dispatch_queue_t queue = dispatch_queue_create("screenshotQueue", NULL);
        dispatch_async(queue, ^{
            NSFileManager *fileManager = [NSFileManager defaultManager];
            NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
            NSString *filePath = [documentsDirectory stringByAppendingPathComponent:fileName];
            [fileManager createFileAtPath:filePath contents:UIImagePNGRepresentation(image) attributes:nil];
        });
        dispatch_release(queue); 
```

It's working a first time but the other times I have nothing created. And this %@.png is weird because my only file created is not recognize by Finder. I have to add .png extension to the file (so filename.png.png) and I can open it then.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-16T18:44:39.257

它看起来像一个竞争条件。您在将块分派给队列后立即释放队列。`dispatch_release`在调用`dispatch_release`.

由于您只向*screenshotQueue*提交了一个块，因此最好使用全局系统队列之一。这样，您就不必处理管理队列的生命周期。

这可能会给你更一致的结果：

```
NSString *fileName = [[NSString stringWithFormat:@"%@.png",url] substringFromIndex:5];
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0);
dispatch_async(queue, ^{
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *filePath = [documentsDirectory stringByAppendingPathComponent:fileName];
    [fileManager createFileAtPath:filePath contents:UIImagePNGRepresentation(image) attributes:nil];
}); 
```

我不确定PNG文件类型问题。听起来 Finder 不知道文件的类型。您可以使用此命令查找 Spotlight 在其索引中的类型：

```
$ mdls -name kMDItemContentType <filename>.png 
```

它应该报告如下内容：

```
kMDItemContentType = "public.png" 
```

我通常`[NSData writeToFile:atomically:]`用于将字节保存到磁盘，它通常会正确处理细节。这可能有点矫枉过正，但您也可以使用 Image I/O 来加倍确定：

```
//The following 4 lines should preplace this line in your block:
//[fileManager createFileAtPath:filePath contents:UIImagePNGRepresentation(image) attributes:nil];
CGImageDestinationRef imageDest = CGImageDestinationCreateWithURL((__bridge CFURLRef)[NSURL fileURLWithPath:filePath], kUTTypePNG, 1, NULL);
CGImageDestinationAddImage(imageDest, [image CGImage], NULL);
CGImageDestinationFinalize(imageDest);
CFRelease(imageDest); 
```

我现在使用 Image I/O 完成所有图像加载/保存/缩略图。它真的很快。当然，如果您决定使用它，请确保将*ImageIO.framework添加到您的项目中。*

# arrays - Perl print 显示每个元素的前导空格

> ID：10105874
> 
> 赞同：4
> 
> 时间：2012-04-11T12:26:46.700
> 
> 标签：arrays, perl

我将文件加载到数组中（数组元素中的每一行）。我处理数组元素并保存到一个新文件中。我想打印出新文件：

```
print ("Array: @myArray"); 
```

但是 - 它在每一行都显示了前导空格。有没有一种简单的方法可以打印出没有前导空格的数组？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T12:30:06.793

是的——使用[`join`](http://perldoc.perl.org/functions/join.html)：

```
my $delimiter = '';  # empty string

my $string = join($delimiter, @myArray);

print "Array: $string"; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T12:34:50.937

[马特芬威克](https://stackoverflow.com/users/894284/matt-fenwick)是正确的。当你的数组用双引号括起来时，Perl 会将值`$"`（默认为空格；参见[perlvar 手册页](http://perldoc.perl.org/perlvar.html)）放在元素之间。你可以把它放在引号之外：

```
print ('Array: ', @myArray); 
```

如果您想用逗号分隔元素，请更改[输出字段分隔符](http://perldoc.perl.org/perlvar.html#Handle-%3eoutput_field_separator%28-EXPR-%29)：

```
use English '-no_match_vars';
$OUTPUT_FIELD_SEPARATOR = ',';     # or "\n" etc.
print ('Array: ', @myArray); 
```

# wireshark - saving some selected flows in a separate pcap file using wireshark

> ID：10105876
> 
> 赞同：0
> 
> 时间：2012-04-11T12:26:48.707
> 
> 标签：wireshark, wireshark-dissector

i am using wireshark Version 1.6.4\. i have following questions regarding the stream numbers in wireshark :

1) why is it that tcp streams use numbers while udp streams don't ? (when i do "follow tcp stream" it shows say "tcp.stream eq 2" but it is not the same when i do "follow udp streams)

2) i go to conversations and i want to save some selected flows (tcp or udp or both) in a separate pcap file. i thought of using some filter like (tcp.stream eq 4 || tcp.stream eq 2 || udp.stream eq 1) if i want to save 2 tcp flows for these two streams and one udp flow in a separate pcap file. Now the issue with this approach is that conversation window doesn't show up the stream no's & further udp streams don't have the stream no. Also i need to go to conversation window first to see which tcp flows to save (say i want to save some flows having maximum bytes exchange) and then select that flow to see its stream number and so on for other flows as well. This is very inconvenient and time consuming. Is there some better way to do this.

any help will be greatly appreciated. thanks a lot.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T18:17:58.000

2 对话窗口
- 右键单击​​ tcp 或 udp 流并选择“准备过滤器”| “选择” | “A <-> B”
可以在[过滤器工具栏中](http://www.wireshark.org/docs/wsug_html_chunked/ChUseFilterToolbarSection.html)
看到显示过滤器 - 右键单击​​另一个 tcp 或 udp 流并选择“准备为过滤器” | “...或已选择” | “A <-> B”
- 右键单击​​最后一个 tcp 或 udp 流并选择“应用为过滤器” | “...或已选择” | "A <-> B"

接下来，您可以将这 3 个流保存在单独的捕获文件中。

# android - Ringtone set as silent on android 2.3, but works on 4.0.3

> ID：10105877
> 
> 赞同：2
> 
> 时间：2012-04-11T12:26:48.660
> 
> 标签：android, delete-file, mediastore, ringtone

I have two questions:

1.  When I call my `saveas(ressound);` (inspired by stealthcopter.com) on a android 4.0.3 device the ringtone is nicely activated as a ringtone, but on a 2.3.3 device the selected ringtone is silent. Where did I go wrong in my code?

2.  The second thing that I want to know is how to delete the file. More importantly, how to get it out of the media store, does this happen automatically if I remove it from the sd?

* * *

UPDATE:

Added code to delete the whole folder plus content, works good and clean! (see below)

Try to call this code when I push a button:

```
sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://" + Environment.getExternalStorageDirectory()))); 
```

But it will not clean out the mediastore, it works with a reboot. I also tried the media scan within the dev tools, but that doesn't work. They mention that some apps need to restart, but how to restart the service responsible for displaying the list of available ringtones without rebooting the whole device?

* * *

variables:

```
String soundname;
int ressound;
int savetype;
String path="/sdcard/mysounds/";

savetype = RingtoneManager.TYPE_RINGTONE;
ressound = R.raw.sound1;
soundname = "sound1"; 
```

saveas(ressound);

```
//save as
  public boolean saveas(int ressound){
     byte[] buffer=null;
     InputStream fIn = getBaseContext().getResources().openRawResource(ressound);
     int size=0;

     try {
      size = fIn.available();
      buffer = new byte[size];
      fIn.read(buffer);
      fIn.close();
     } catch (IOException e) {
      return false;
     }

     String filename= soundname +".mp3";

     boolean exists = (new File(path)).exists();
     if (!exists){new File(path).mkdirs();}

     FileOutputStream save;
     try {
      save = new FileOutputStream(path+filename);
      save.write(buffer);
      save.flush();
      save.close();
     } catch (FileNotFoundException e) {
      return false;
     } catch (IOException e) {
      return false;
     }    

     sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, Uri.parse("file://"+path+filename)));

     File k = new File(path, filename);

     ContentValues values = new ContentValues();
     values.put(MediaStore.MediaColumns.DATA, k.getAbsolutePath());
     values.put(MediaStore.MediaColumns.TITLE, soundname);
     values.put(MediaStore.MediaColumns.MIME_TYPE, "audio/mp3");
     values.put(MediaStore.Audio.Media.ARTIST, "Elvis");
     values.put(MediaStore.Audio.Media.IS_RINGTONE, true);
     values.put(MediaStore.Audio.Media.IS_NOTIFICATION, true);
     values.put(MediaStore.Audio.Media.IS_ALARM, true);
     values.put(MediaStore.Audio.Media.IS_MUSIC, false);

     //Insert it into the database
     Uri newUri = this.getContentResolver().insert(MediaStore.Audio.Media.getContentUriForPath(k.getAbsolutePath()), values);

     // set as ringtone
     RingtoneManager.setActualDefaultRingtoneUri(this, savetype, newUri);

     return true;
    } 
```

delete();

```
public void delete() {
    File a = new File(path, "sound1.mp3");
    a.delete();
    File b = new File(path, "sound2.mp3");
    b.delete();
} 
```

deleteFiles(String path);

```
public static void deleteFiles(String path) {
    File file = new File(path);

    if (file.exists()) {
        String deleteCmd = "rm -r " + path;
        Runtime runtime = Runtime.getRuntime();
        try {
            runtime.exec(deleteCmd);
        } catch (IOException e) { }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:10:24.717

“android.permission.MODIFY_AUDIO_SETTINGS” 我认为这解决了问题一，直到现在才发现任何问题。

删除文件（字符串路径）；是问题 2 的部分解决方案 重新启动后，该项目消失了。

# mule - XMLStreamReader 解析器影响 MuleEventContext

> ID：10105881
> 
> 赞同：0
> 
> 时间：2012-04-11T12:27:04.190
> 
> 标签：mule, xmlstreamreader

我正在使用 Mule Studio (Mule 3.2.1CE) 来配置一个代理服务，它只是调用一个远程 Web 服务。调用并获得正确的响应（使用soapUI）一切正常。我想记录在 ESB 中收到的 SOAP 消息。我收到了 CXF 组件所期望的 DepthXMLStreamReader 消息，但是当我使用 XMLStreamReader 对象的 next() 方法时，我遇到了一个奇怪的行为。这是我使用的代码：

```
public Object onCall(MuleEventContext context) throws Exception {
    MuleMessage message = context.getMessage();
    DepthXMLStreamReader streamReader = new DepthXMLStreamReader((XMLStreamReader) message.getPayload());

    while(streamReader.hasNext()){
                streamReader.next();
                if(streamReader.getEventType() == XMLStreamReader.START_ELEMENT)
                {
                    System.out.println(streamReader.getLocalName());
                }
            }
    return context.getMessageAsString(); 
```

上面的代码工作并打印 XML 元素，但之后我收到以下错误：

```
 org.apache.cxf.interceptor.Fault: Failed to route event via endpoint: DefaultOutboundEndpoint{endpointUri=..., connector=HttpConnector
...
    Caused by: org.mule.transport.http.HttpResponseException: Internal Server Error, code: 500 
```

我尝试使用 StaxUtils.nextEvent 和 StaxUtils.toNextElement，但结果没有区别。我想知道为什么通过 next() 方法解析 XML 会影响 mule 上下文。如果我使用 System.out.println(context.getMessageAsString()); 在返回语句之前它打印“[消息无法转换为字符串]”，但它在上述代码中的 while 语句之前工作。

这是我的骡子配置：

```
<flow name="wsFlow1" doc:name="wsFlow1">
    <http:inbound-endpoint exchange-pattern="request-response" host="localhost" port="8090" contentType="text/xml" doc:name="HTTP"/>
    <cxf:proxy-service bindingId="..." namespace="http://..." service="..." payload="body" wsdlLocation="..." enableMuleSoapHeaders="false" doc:name="SOAP"/>
    <component class="mule.ws.SoapLogging" doc:name="Java"/>
    <http:outbound-endpoint exchange-pattern="request-response" address="http://..." contentType="text/xml" doc:name="HTTP"/>
</flow> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:08:48.907

我认为这与 MuleEventContext 无关。

飞行中的有效载荷是一个 XMLStreamReader。您在组件中*使用*此 XMLStreamReader，然后尝试返回它的 String 表示，这不再可能，因为您已经使用了它。

在您的组件中尝试以下操作：

*   将 XMLStreamReader 序列化为字符串
*   记录此字符串或其一部分
*   从组件返回此字符串。

# iphone - Add UIBarButtonItem to UINavigationController on iphone sdk

> ID：10105882
> 
> 赞同：1
> 
> 时间：2012-04-11T12:27:04.433
> 
> 标签：iphone, ios

I want to add back button on UINavigationController,I am trying Below Code :

```
EGOPhotoViewController *photoController = [[EGOPhotoViewController alloc] initWithPhotoSource:source];
    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:photoController];
    navController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
    navController.modalPresentationStyle = UIModalPresentationFullScreen;
   // UINavigationBar *my_bar;
    //UINavigationItem *my_item=[[UINavigationItem alloc] initWithTitle:@"test"];
    UIBarButtonItem* button = [[UIBarButtonItem alloc] initWithTitle: @"Back"
                                                               style: UIBarButtonItemStyleBordered
                                                              target: navController
                                                              action: @selector(onBack)];
    //my_item.rightBarButtonItem = button;
    [[navController navigationItem] setRightBarButtonItem:button];
    self.title=@"Gallery";
    [self presentModalViewController:navController animated:YES]; 
```

this code output is Below:

![enter image description here](../Images/91fb1ce27410223ddf37395f429ef527.png)

code does not add Back Button in UINavigationController.I am adding Code to Back button on UINavigationController,what's Wrong on my code...!

Please any one help me...!

Thanks..!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T12:35:15.367

尝试从 rootviewcontroller 类 (photoController) viewDidLoad 方法添加 UIBarButtonItem。

```
self.navigationItem.rightBarButtonItem =  [[UIBarButtonItem alloc] initWithTitle: @"Back"
                                                           style: UIBarButtonItemStyleBordered
                                                          target: navController
                                                          action: @selector(onBack)]; 
```

# android - Populate widgets from a cursor in onLoadFinished()

> ID：10105885
> 
> 赞同：6
> 
> 时间：2012-04-11T12:27:23.093
> 
> 标签：android, android-cursorloader

I want to know how to use the `CursorLoader` to populate the widgets on a screen. All the examples online are only for using an adapter and this works great. What I need is a reliable way to update the views in my screen from a Cursor and on the UI thread and without sometimes crashing because of `StaleDataException` or the cursor being deactivated all of a sudden. Here is my current approach but I still receive some crash reports from users.

```
@Override
    public Loader<Cursor> onCreateLoader(int id, Bundle arg1) {
        CursorLoader loader = null;

        switch (id) {
            case LOADER_ID_DATA:
                loader = new CursorLoader(...);
                break;
        }

        return loader;
    }

    @Override
    public void onLoadFinished(Loader<Cursor> loader, final Cursor cursor) {
        handler.post(new Runnable() {

            @Override
            public void run() {
                if (getActivity() == null)
                    return;

                updateView(cursor);
            }
        });
    }

    @Override
    public void onLoaderReset(Loader<Cursor> arg0) {
    } 
```

One solution would be to retrieve all the cursor fields directly inside onLoadFinished and pass them all to the handler to populate the widgets on the UI thread. But this is ugly because I may have a lot of values in the cursor. I would love to find a reliable crash-free way of dealing with all this.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T10:31:32.037

在询问#android-dev`SimonVT`并`readme`帮助我了解这一点之后。

没有任何声明`onLoadFinished`将在 UI 线程上调用，因此理论上您应该使用`Handler`Reto 书中建议的类似方法。但是，当使用 a `CursorLoader`（这是迄今为止最常见的用例）时，您几乎可以保证`onLoadFinished`将在 UI 线程中调用它。

# html - 跨域 IFRAME 调整大小

> ID：10105886
> 
> 赞同：3
> 
> 时间：2012-04-11T12:27:24.017
> 
> 标签：html, iframe, cross-domain

我知道这个问题很多，但是当我无法访问 IFRAME 显示的实际页面时，如何设置跨域 iframe 的动态高度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T12:59:18.510

你不能。无法从框架外部知道框架中文档的高度是多少，因为[有关文档的所有信息都受到](http://en.wikipedia.org/wiki/Same_origin_policy)第三方站点的保护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:50:23.947

如果您有权在父页面和 iframe 页面上添加 javascript，则可以将其添加到两者：

```
document.domain = 'mydomain.com'; 
```

这样可以避免跨域限制，并且可以通过嗅探高度来更改父页面中的 iframe 高度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T10:14:17.020

必须通过您自己的服务器代理页面（至少一次）

```
<?php
$homepage = file_get_contents('http://www.megaupload.com'); 
echo $homepage;
?>
<script>etc</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-25T16:24:02.143

我也遇到了这个问题，但我终于得到了解决方案：

将此代码放入`<head>`：

```
 <script type="text/javascript">
  function resizeCrossDomainIframe(id, other_domain) {
    var iframe = document.getElementById(id);
    window.addEventListener('message', function(event) {
      if (event.origin !== other_domain) return; // only accept messages from the specified domain
      if (isNaN(event.data)) return; // only accept something which can be parsed as a number
      var height = parseInt(event.data) + 0; // add some extra height to avoid scrollbar
      iframe.height = height + "px";
    }, false);
  };
</script> 
```

然后，将此代码用于 iframe：

```
<iframe src='http://www.example.com/my-iframe/' frameborder="0" id="my_iframe" onload="resizeCrossDomainIframe('my_iframe', 'http://www.example.com');"> 
```

# c++ - CDC::DrawText doesn't work?

> ID：10105889
> 
> 赞同：0
> 
> 时间：2012-04-11T12:27:33.457
> 
> 标签：c++, visual-c++, mfc

I get an error: Debug Assertion Failed at my myDC.DrawText? If I remove that line, the graphics work fine.

```
CPaintDC dc(this);

CBitmap myBmp;
CDC myDc;

HANDLE h = ::LoadImage(NULL,"C:\\lady.bmp",IMAGE_BITMAP,0,0,LR_LOADFROMFILE);
myBmp.Attach(h);

myDc.DrawText("Hello",CRect(10,10,100,30),DT_CENTER);  // Debug Assertion Failed

myDc.CreateCompatibleDC(&dc);
myDc.SelectObject(&myBmp);
dc.BitBlt(20,10,436,363,&myDc,0,0,SRCCOPY); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T12:29:26.250

您在实际创建 DC 之前绘制文本。将 DrawText 行移到 CreateCompatibleDB 行下方。

# c# - EmguCV FindFundamentalMat - 输入参数

> ID：10105907
> 
> 赞同：3
> 
> 时间：2012-04-11T12:28:50.397
> 
> 标签：c#, image-processing, opencv, emgucv, camera-calibration

我正在为 OpenCV 使用 EmguCV 包装器，并且我正在尝试通过基本矩阵进行未校准的校正。

我已经从两个相机中找到了带有 FindChessboardCorners 函数的图像点，然后我想找到基本矩阵，但是我在将参数传递给函数 [eCvInvoke.cvFindFundamentalMat()](http://www.emgu.com/wiki/files/2.0.0.0/html/215e547a-75d0-7e82-36db-bbc144cd9e22.htm) CvInvoke.cvFindFundamentalMat( ) 时遇到问题

困扰我的是二维点数组，只是无法获得正确的格式将其传递给 OpenCv 函数 cvFindFundamentalMat。

据我了解，EmguCV/OpenCV openCv 需要通过 IntPtr 传递的 CvMat 类型的一维数组......但即使我这样做，OpenCV 也会抛出错误消息“OpenCV：通道数或列数或行数必须为 = 1"

```
PointsF[] points1 = Camera1.Points;
PointF[] points2 = Camera2.Points

Matrix<float> points1 = new Matrix<float> (1, Camera1.ImagePoints[0].Length*2, 1);
for (int i =0; i <  Camera1.ImagePoints[0].Length-1; i+=2)
{
      points1[0, i] = Camera1.ImagePoints[0][i].X;
      points1[0, i+1] = Camera1.ImagePoints[0][i].Y;
 }

Matrix<float> points2= new Matrix<float>(1, Camera2.ImagePoints[0].Length * 2, 1);
for (int i = 0; i < Camera2.ImagePoints[0].Length-1; i+=2)
{
      points1[0, i] = Camera2.ImagePoints[0][i].X;
      points1[0, i+1] = Camera2.ImagePoints[0][i].Y;
}

IntPtr points1Matrix = Marshal.AllocHGlobal(StructSize.MCvMat);
GCHandle handlePoints1Ptr = GCHandle.Alloc(points1.MCvMat, GCHandleType.Pinned);
points1Matrix = handlePoints1Ptr.AddrOfPinnedObject();

IntPtr points2Matrix = Marshal.AllocHGlobal(StructSize.MCvMat);
GCHandle handlePoints2Ptr = GCHandle.Alloc(points2.MCvMat, GCHandleType.Pinned);
points2Matrix = handlePoints2Ptr.AddrOfPinnedObject();

_fundamentalMatrix = new Matrix<double>(3, 3, 1);

CvInvoke.cvFindFundamentalMat(points1Matrix, points2Matrix, _fundamentalMatrix.Ptr, CV_FM.CV_FM_RANSAC, 1.0, 0.99, IntPtr.Zero); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T15:17:12.710

有点晚了，但这是我的代码。如果它不再帮助你，它可能会帮助其他人。我不能确切地说出你的代码有什么问题，我自己对 OpenCV 很陌生：

```
public void Calculate()
{
    _pointCount = _leftPoints.Count;
    IntPtr points1 = CreatePointListPointer(_leftPoints);
    IntPtr points2 = CreatePointListPointer(_rightPoints);
    IntPtr status = CvInvoke.cvCreateMat(1, _pointCount, MAT_DEPTH.CV_8U);

    IntPtr fundamentalMatrix = CvInvoke.cvCreateMat(3, 3, MAT_DEPTH.CV_32F);
    int fmCount = CvInvoke.cvFindFundamentalMat(points1,
                                                points2,
                                                fundamentalMatrix,
                                                CV_FM.CV_FM_7POINT,
                                                3.0,
                                                0.99,
                                                status);
}

public IntPtr CreatePointListPointer(IList<PointF> points)
{
    IntPtr result = CvInvoke.cvCreateMat(_pointCount, 2, MAT_DEPTH.CV_32F);

    for (int i = 0; i < _pointCount; i++)
    {
        double currentX = points[i].X;
        double currentY = points[i].Y;
        CvInvoke.cvSet2D(result, i, 0, new MCvScalar(currentX));
        CvInvoke.cvSet2D(result, i, 1, new MCvScalar(currentY));
    }

    return result;
} 
```

# wordpress - 仅向 wordpress 中 P2 主题中的组成员显示状态

> ID：10105915
> 
> 赞同：1
> 
> 时间：2012-04-11T12:29:15.623
> 
> 标签：wordpress

我刚刚开始使用 WordPress，并尝试创建一个像 twitter 一样的微博网站。我已经安装了 P2 主题。它工作正常。我们可以发布我们的状态，如推文和所有。

现在我遇到的问题是：-

一旦任何用户登录该站点（我在本地主机上运行它并从后端自己创建了用户），他/她就可以看到所有其他用户的所有帖子和推文。

所以我尝试创建几个组并为每个组分配几个用户。由于我对 WP 完全陌生，我搜索了可以允许我创建组和分配成员的可能插件，以便特定组的用户可以看到同一组用户的帖子和推文。

但是我找不到任何这样的插件（或者可能是我无法使用通过谷歌搜索找到的插件）。

所以请任何人都可以帮助我解决这个问题。

我真的很感激任何帮助。

谢谢， chirag.tyagi

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T19:41:41.897

[该站点](http://wpmu.org/how-to-build-a-mini-twitter-site-with-buddypress-your-open-source-microblogging-platform/)有一个与 P2 集成的 Buddypress 主题，因此您可以将 BP 的组功能与 P2 一起使用，但它似乎已关闭，并且该项目的其他镜像也已关闭。

然而，有一些变通方法将 BP 的群组功能与插件相结合，以克隆带有标签和关注者的 Twitter，以及您想要的私人群组。请参阅[this](http://wpmu.org/how-to-build-a-mini-twitter-site-with-buddypress-your-open-source-microblogging-platform/)以获取我认为应该为您工作的示例。

请记住不要禁用组，这与帖子的建议相反。

# python - 尝试访问正确的目录

> ID：10105916
> 
> 赞同：0
> 
> 时间：2012-04-11T12:29:22.713
> 
> 标签：python, command-line, printing

因此，我正在尝试编写一个在 Windows 中使用命令行的脚本，它默认为我的 Python 目录下的结构 - 我不希望这样。

```
import subprocess
import time
subprocess.call(r"""Cscript %windir%/System32/Printing_Admin_Scripts/en-US/Prnport.vbs -a -r "saturn.print.mediag.com" -h "saturn.print.mediag.com" -o raw""")
time.sleep(5)
subprocess.call(r"""rundll32 printui.dll, PrintUIEntry /if /b "Saturn" /f w:\printers\toshibae3511\eng\est_c2.inf /r "saturn.print.mediag.com" /m "TOSHIBA e-STUDIO Color PS3""")
raw_input("press any key to exit") 
```

第一个子进程调用应该执行 c:\windows\system32 等中的脚本 prnport.vbs，但它会像 c:\python27\projects\printer setup\%windir%\system32 等一样执行

如何使它进入正确的目录，该目录可能（尽管可能不会）因计算机而异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:42:56.267

您需要[`os.path.expandvars`](http://docs.python.org/library/os.path.html#os.path.expandvars)在路径上使用“%windir%”来替换。

此外，除了问题之外，最好将参数列表而不是单个长字符串传递给`subprocess.call`，即

```
subprocess.call(['rundll32', 'printui.dll'...]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T12:42:06.663

您需要使用环境变量来获取 windir，%WINDIR% 不会扩展为您期望的值，因此假定它是相对于当前工作目录的。您可以使用`os.environ["WINDIR"]`or `os.getenv("WINDIR", "default_value")`，根据：[此链接](http://www.gossamer-threads.com/lists/python/python/162687)

我不确定是不是这样，我不在 Windows 上，但你需要类似的东西：

```
import os
windir = os.environ["WINDIR"]
subprocess.call(r'Cscript %s/System32/Printing_Admin_Scripts/en-US/Prnport.vbs -a -r "saturn.print.mediag.com" -h "saturn.print.mediag.com" -o raw' % (windir,)) 
```

并对多行使用三引号 """。单行使用 ' 或 " 不需要它们

否则，您将使用以下命令更改当前工作目录：

```
import os
os.chdir('C:\\Windows\\Sytem32\\')
subprocess.call(r'Cscript ./System32/Printing_Admin_Scripts/en-US/Prnport.vbs -a -r "saturn.print.mediag.com" -h "saturn.print.mediag.com" -o raw') 
```

# bash - 使用 awk 为变量赋值不适用于 cron

> ID：10105919
> 
> 赞同：0
> 
> 时间：2012-04-11T12:29:30.423
> 
> 标签：bash, awk

从 cron 运行脚本时遇到问题。首先，我发现访问 SQLite 有困难；现在让我抓狂的是 AWK 命令。

有问题的行是这样的：

```
sens=`awk -F, '{ if($2 == '${num}' && $4 == '$tipogalis' && $9 == "0")print $1 }' /usr/xbow/xserve/galtel/relasens` 
```

不想用细节来打扰你；它是 while 循环的主线，必须读取文件中列的值。它可以从命令行完美运行，但作为 cron 作业运行不会给变量“sens”带来任何价值。

我已经检查了该行内的所有变量都读取正常（num、tipogalis 等），所以我很确定问题与“&&”的数量或“打印”函数有关。

万一有人想对环境变量提出一些建议，我已经在脚本的开头添加了以下几行：

```
LANG=en_US.UTF-8
export LANG 
```

但没什么区别。

请问还有什么建议吗？我知道问题一定很小。魔鬼总是在细节中...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T11:40:41.413

最后正确的方法是这个：

感觉=`awk -F, '{ if($2 == '${num}' && $4 == '$tipogalis' && $9 == '0')print $1 }' /usr/xbow/xserve/galtel/relasens`

但问题不在于线路。由于内部问题，我拨打了一个从来不等于“0”的 9 美元电话。

对不起。这篇文章甚至可以完全删除以避免混淆其他用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:22:17.830

我假设您在 cron 中运行时验证了`num`和`tipogalis`变量的值是否正确。

我猜您在 awk if 语句中缺少围绕常量的引号。

```
sens=`awk -F, '{ if($2 == "'${num}'" && $4 == "'$tipogalis'" && $9 == "0")print $1 }' /usr/xbow/xserve/galtel/relasens` 
```

我会使用该`-v`选项将值传递给 awk 而不是将引用拼凑在一起。

```
sens=$(awk -F, -v val2="$num" -v val4="$tipogalis" '$2 == val2 && $4 == val4 && $9 == "0" {print $1}' /usr/xbow/xserve/galtel/relasens) 
```

# java - Android EditText & 对话框

> ID：10105920
> 
> 赞同：0
> 
> 时间：2012-04-11T12:29:33.620
> 
> 标签：java, android, datepicker, textview, android-edittext

我已经实现了一个带有 Edittext 的 android 屏幕。当用户触摸此 EditText 时，会出现一个 datepickerdialog。这一切都很好，但是我的问题是当用户触摸 EditText 时，会出现两个 datepickerdialogs。我只想要一个出现。

我想知道是否有人遇到过这个问题，还是只有我一个？如果是，有什么解决办法吗？我用谷歌搜索了它，但什么也没找到：/

关于代码，这就是我所拥有的：

```
 datebox = (TextView)findViewById(R.id.datebox);

    datebox.setOnTouchListener(new OnTouchListener() 

    {

        @Override
        public boolean onTouch(View arg0, MotionEvent arg1) {
            timedatedialog(false);
            return false;
        }});

public void timedatedialog(boolean flag) {

         if(flag==false){

               DatePickerDialog dateDlg = new DatePickerDialog(this,
                new DatePickerDialog.OnDateSetListener() {

            public void onDateSet(DatePicker view, int year,
                    int monthOfYear, int dayOfMonth)
            {
                Time chosenDate = new Time();
                chosenDate.set(dayOfMonth, monthOfYear, year);
                long dtDob = chosenDate.toMillis(true);
                CharSequence strDate = DateFormat.format("MMMM dd, yyyy", dtDob);

                Toast.makeText(ForecastingActivity.this,
                        "Date picked: " + strDate, Toast.LENGTH_SHORT).show();

                datebox.setText(strDate);

            }}, 2012,0, 1); 
```

任何帮助深表感谢。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:35:39.703

将您的更改`OnTouchListener`为`OnClickListener`或类似。任何类型的`onTouch()`触摸事件都会调用 - 方法，即：
如果您单击视图，您将进入`onTouch()`一个向下事件，
然后如果您碰巧移动手指，您将进入`onTouch()`一个移动动作，并且最后，您抬起手指，`onTouch()`再次获得，这次是向上事件。

`OnClickListener`另一方面，如果单击视图，则仅运行一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T12:35:46.737

试试这个，让我知道会发生什么..

```
 datebox.setOnTouchListener(new OnTouchListener() 
    {
        @Override
        public boolean onTouch(View arg0, MotionEvent arg1) {
         if((arg1.getAction() == MotionEvent.ACTION_DOWN))
          {
            timedatedialog(false);
          }
            return false;
        }}); 
```

或者只是更改为`onClickListener()`您的 EditText 的 it 方法..

# function - Extjs 从对象声明中调用函数

> ID：10105921
> 
> 赞同：0
> 
> 时间：2012-04-11T12:29:40.693
> 
> 标签：function, object, extjs, declaration

我有这个代码：

```
Ext.define('DKM.BaseClasses.Stores.BaseStore', {
requires:['Ext.window.MessageBox'],
extend: 'Ext.data.Store',

proxy:  {
        type:'ajax',
        listeners: {
            exception: function(proxy, response, options) {                 
                requestMessageProcessor(proxy, response);
            }

        },
        afterRequest: function(request, success) {

            requestMessageProcessor(request.scope, request.operation.response);
        },
},      

requestMessageProcessor: function(proxy, response) {
... 
```

我想做的是调用 requestMessageProcessor。问题（可能是范围问题）是我收到错误“requestMessageProcessor 不是函数”。

有人可以给我一个建议吗？

提前致谢！大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:42:12.630

像这样更改您的定义：

```
listeners: {
    exception: function(proxy, response, options) {                 
        this.requestMessageProcessor(proxy, response);
    },
    scope: this
}, 
```

那应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:01:37.340

如果您想将该函数用作可以随时随地调用的“全局”函数，那么我通常做的方式是**创建一个主控制器**，假设`MainController`并在其中定义函数。以后，每当你想调用它时，只需使用

`Ext.getController('MainController').yourFunction`

如果您仍然想将该功能放入您的商店，只需为该商店设置一个 id 并使用它：

`Ext.getStore('your-store-id').yourFunction`

希望能帮助到你。

# php - 在非对象上调用成员函数 userdata()

> ID：10105922
> 
> 赞同：2
> 
> 时间：2012-04-11T12:29:40.850
> 
> 标签：php, codeigniter

大家好，我有一个代码给我这个错误

> 致命错误：在第 3 行的 C:\wamp\www\project\application\controllers\admin\home.php 中找不到类 'MY_Controller'

我不知道为什么它会显示这个错误......</p>

C:\wamp\www\project\application\controllers\admin\home.php 的代码是

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Home extends MY_Controller {

function index()
{
    redirect('admin/login');
}

function logout()
{
    $this->session->unset_userdata('logged_in');
    //session_destroy();
    redirect('admin/login');
}
}
?> 
```

C:\wamp\www\project\application\libraries\MY_Controller.php 的代码是

```
<?php

class MY_Controller extends CI_Controller {
public function __construct() {
    parent::__construct();
    if (!$this->session->userdata('logged_in')) {
        redirect('admin/login');
    }
}

} 
```

如果我把

> 类 Home 扩展 CI_Controller

代替

> 类 Home 扩展 MY_Controller

在里面

> C:\wamp\www\project\application\controller\admin\home.php

文件并尝试加载

> C:\wamp\www\project\application\libraries\MY_Controller.php

在构造函数中

> C:\wamp\www\project\application\controllers\admin\home.php

表明

> 在非对象上调用成员函数 userdata()

为什么这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T12:30:44.373

扩展系统类时，您需要将类文件`core`而不是文件夹。`library`放入文件夹`MY_Controller.php`。`core`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:10:44.647

参考文档：[http ://codeigniter.com/user_guide/general/core_classes.html](http://codeigniter.com/user_guide/general/core_classes.html)

核心控制器需要存储在`application/core/`

所以当你扩展一个对象时，它会在那里寻找它。库文件夹用于存储“外部”库，您必须将其明确包含在控制器中：

前任： `$this->load->library('class name');`

这里的图书馆信息：http: [//codeigniter.com/user_guide/general/libraries.html](http://codeigniter.com/user_guide/general/libraries.html)

# windows - 路由 url 以从另一个站点获取内容

> ID：10105925
> 
> 赞同：0
> 
> 时间：2012-04-11T12:30:01.347
> 
> 标签：windows, iis, iis-7, url-rewriting, reverse-proxy

环境：IIS 7。

*   我有一个默认站点`www.domain.com`。文件夹 C:Inetpub/wwwroot/domain
*   有子域`www.subdomain.domain.com`。文件夹 C：Inetpub/wwwroot/domain/subdomain。
*   现在，我在外部服务器上建立了一个新网站，比如说`www.newdomain.com`. 由于某些限制，我无法`www.newdomain.com`在同一台 IIS 服务器上托管（如上所述）。

在此设置中，如何在将 URL 保留为的同时`www.subdomain.domain.com/blog`显示所有可用内容`www.newdomain.com``www.subdomain.domain.com/blog`

这如何在 IIS 7 中实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T08:49:33.770

我终于能够通过反向代理重写规则来做到这一点。对于那些有类似问题的人来说，解决方案是：

转到托管 www.subdomain.domain.com 的站点节点，然后单击重写规则。如果未安装 ARR，IIS 管理器会要求您安装它。安装 ARR 后关闭并重新打开 IIS 管理器。

打开重写规则窗口。将出现一个对话框，询问是否允许反向代理服务器场外的服务器，接受它。在入站规则中输入 www.newdomain.com。在 Outbound 规则的 from 输入中输入 www.newdomain.com，在 to 输入中输入 www.subdomain.domain.com。单击应用更改。

这会将整个 www.subdomain.domain.com 路由到 newdomain.com。您只需要路由 /blog 链接。

为此，请转到重写规则并选择您刚刚创建的重写规则。单击编辑并在 url 输入中的匹配部分将 (.asterix) 更改为 ^blog(.asterix)。这将应用规则来仅路由 /blog。

就这些。在浏览器中测试您的路由，如果一切正常，这应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T05:50:16.397

你必须把整个`www.subdomain.domain.com`放在另一台服务器上。您不能只将`/blog`路径放在其他地方。

`/blog`如果子域的 DNS 指向第一台服务器，那么任何客户端如何知道要转到另一台服务器？

或者，您可以`blog.subdomain.domain.com`为博客服务器创建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T06:30:15.720

可能的方法：

*   将新网站`blog.domain.com`与托管在不同服务器上的实际内容一样托管（与 IIS 服务器不同`domain.com`）
*   `subdomain.domain.com/blog`在新网站上设置 ProxyPass 。我知道如何在 Apache 上执行此操作（通过 mod_proxy 和 ProxyPass），但不确定如何使用 IIS 执行此操作。可能[ARR](http://blogs.iis.net/wonyoo/archive/2008/07/09/application-request-routing-arr-as-a-reverse-proxy.aspx)可以帮助你。

# html - 适用于 iOS 的 HTML 编辑器

> ID：10105931
> 
> 赞同：2
> 
> 时间：2012-04-11T12:30:23.800
> 
> 标签：html, ios, html-editor

有人可以建议任何用于编辑 HTML 的原生 iOS 组件吗？

我找不到任何谷歌搜索。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T12:35:35.067

[也许](http://www.textasticapp.com/)是文本？您最好在 iTunes 中搜索相关应用程序并自行选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:11:48.273

Solution here is to create custom JS HTML editor adopted to the touch screen.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T14:03:04.323

你可以看看 TinyMCE 或 CKEditor。两者都是用于创建 HTML 的 Javascript 编辑器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-03T20:25:21.497

我找到了这个工具，它是一个功能齐全的 Html 编辑器，如首页。[https://itunes.apple.com/us/app/a-real-html-editor/id732000017?mt=8](https://itunes.apple.com/us/app/a-real-html-editor/id732000017?mt=8)

# c# - 以编程方式将特定 TreeViewItem 选择到未绑定的 TreeView 中

> ID：10105933
> 
> 赞同：0
> 
> 时间：2012-04-11T12:30:25.977
> 
> 标签：c#, silverlight, treeview, code-behind

在我的 Silverlight 应用程序背后的代码中，我需要重新填充 TreeView，然后选择特定的 TreeViewItem。

代码本身很简单，就在这里（**我将对其进行修剪和伪代码化以使其尽可能短**）

```
private void Button_Click()
{
    Guid idToSelect = TellMeWhatToSelect();
    List<myObject> myDataList = myObjectRepository.RetrieveData().ToList();

    myTreeView.Items.Clear();
    foreach(myObject o in myDataList)
    {
        myTreeView.Items.Add(new TreeViewItem() { Content = o.DataField, Tag = o.Id });
    }

    myTreeView.Items.First(o => ((Guid)(o as TreeViewItem).Tag).Equals(idToSelect)).IsSelected = true;

} 
```

基本上就是这样：我正在将一些数据读入`myDataList`，然后循环遍历它并`TreeViewItem`根据需要创建尽可能多的 s 以显示数据。

问题是，`myTreeView.SelectedItem`在此结束时为空，并且`SelectionChanged`未触发事件。我认为，由于`Items`集合已被清除并重新填充，`IsSelected`打开其中一个项目就像点击一样，但似乎没有）。

奇怪的是（至少对我来说），`myTreeView.Items.First().IsSelected = true;`它自己发出（即调用一个带有那一行代码的方法）按预期工作：`SelectedItem`是否存在并且所有事件都被适当地触发。

我的代码有什么问题和/或我错过了什么？看起来清理物品会破坏一些东西。

我很确定其他人也有类似的问题，但是我尝试的一堆搜索没有帮助（我提出的大多数信息和问题都与 WPF 相关）。

感谢您的时间，如果需要，我会提供更多信息。另外，对不起文字墙。

**更新**

像这样修改代码，现在该方法按预期工作。

```
private void Button_Click()
{
    Guid idToSelect = TellMeWhatToSelect();
    List<myObject> myDataList = myObjectRepository.RetrieveData().ToList();

    myTreeView.Items.Clear();
    foreach(myObject o in myDataList)
    {
        myTreeView.Items.Add(new TreeViewItem() { Content = o.DataField, Tag = o.Id });
    }

    Dispatcher.BeginInvoke(()=>
    {        
        myTreeView.Items.First(o => ((Guid)(o as TreeViewItem).Tag).Equals(idToSelect)).IsSelected = true;
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:42:35.833

[在Dispatcher.BeginInvoke](http://msdn.microsoft.com/en-us/library/cc190259%28v=vs.95%29.aspx)`IsSelected`内设置属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T21:35:30.930

前段时间我遇到了同样的问题，我已经通过在将 TreeViewItem 设置为选中之前从树视图中调用 UpdateLayout 方法来解决。像这样：

```
 myTreeView.UpdateLayout();   
 myTreeView.Items.First(o => ((Guid)(o as TreeViewItem).Tag).Equals(idToSelect)).IsSelected = true; 
```

# file - 将变量保存到用户定义的名称的文件中 - matlab

> ID：10105934
> 
> 赞同：0
> 
> 时间：2012-04-11T12:30:34.970
> 
> 标签：file, matlab, save

我想将矩阵保存到文件中，因此我正在使用

```
dlmwrite('matrix', m); 
```

但我想使用保存文件对话框保存文件，就像使用[uiputfile](http://www.mathworks.com/help/techdoc/ref/uiputfile.html)但是，我不认为它可以

还有其他方法可以做类似的事情吗？或者我只是从[dlmwrite](http://www.mathworks.com/help/techdoc/ref/dlmwrite.html)函数中遗漏了一些东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:37:14.880

您可以为此使用 uiputfile：

```
[file,path] = uiputfile('*.csv','Save file');
csvwrite([path file], m); 
```

该`uiputfile`命令不保存任何内容，它只返回所选文件的名称和路径。看到[这个](http://www.mathworks.co.uk/help/techdoc/ref/uiputfile.html)。

# string - 如何在 Go 中将 int 值转换为字符串？

> ID：10105935
> 
> 赞同：645
> 
> 时间：2012-04-11T12:30:35.930
> 
> 标签：string, go, int, converters

```
i := 123
s := string(i) 
```

s 是'E'，但我想要的是“123”

请告诉我如何获得“123”。

在Java中，我可以这样做：

```
String s = "ab" + "c"  // s is "abc" 
```

我如何`concat`在 Go 中使用两个字符串？

* * *

## 回答 #1

> 赞同：1005
> 
> 时间：2012-04-11T12:33:55.287

使用[`strconv`](http://golang.org/pkg/strconv/#Itoa)包的`Itoa`功能。

例如：

```
package main

import (
    "strconv"
    "fmt"
)

func main() {
    t := strconv.Itoa(123)
    fmt.Println(t)
} 
```

`+`您可以简单地通过'ing 或使用包的`Join`功能来连接字符串[`strings`](http://golang.org/pkg/strings/#Join)。

* * *

## 回答 #2

> 赞同：171
> 
> 时间：2014-03-25T05:59:08.797

```
fmt.Sprintf("%v",value); 
```

`%d`如果您知道特定类型的值，请使用相应的格式化程序，例如`int`

更多信息 - [fmt](http://golang.org/pkg/fmt/)

* * *

## 回答 #3

> 赞同：69
> 
> 时间：2016-05-31T10:04:07.370

`fmt.Sprintf`，`strconv.Itoa`并将`strconv.FormatInt`完成这项工作。但是`Sprintf`会使用 package `reflect`，并且会多分配一个对象，所以这不是一个有效的选择。

[![在此处输入图像描述](../Images/af60ca4f5466099e1c94f80374bd8696.png)](https://i.stack.imgur.com/daIIz.png)

* * *

## 回答 #4

> 赞同：64
> 
> 时间：2015-01-17T15:10:48.717

有趣的是`strconv.Itoa`，[它](https://golang.org/src/strconv/itoa.go?s=783:806#L14)是

```
func FormatInt(i int64, base int) string 
```

以 10 为底

例如：

```
strconv.Itoa(123) 
```

相当于

```
strconv.FormatInt(int64(123), 10) 
```

* * *

## 回答 #5

> 赞同：43
> 
> 时间：2012-04-11T21:26:31.613

您可以使用[fmt.Sprintf](http://golang.org/pkg/fmt/#Sprintf)或[strconv.FormatFloat](https://golang.org/pkg/strconv/#FormatFloat)

例如

```
package main

import (
    "fmt"
)

func main() {
    val := 14.7
    s := fmt.Sprintf("%f", val)
    fmt.Println(s)
} 
```

* * *

## 回答 #6

> 赞同：30
> 
> 时间：2016-06-28T13:24:42.050

在这种情况下，两者都`strconv`做`fmt.Sprintf`同样的工作，但使用`strconv`包的`Itoa`功能是最好的选择，因为`fmt.Sprintf`在转换过程中会多分配一个对象。

[![检查两者的基准结果](../Images/2458d0fe343181539a47b4cdc9e1f1a9.png)](https://i.stack.imgur.com/qd7EP.png) 在此处检查基准：[https ://gist.github.com/evalphobia/caee1602969a640a4530](https://gist.github.com/evalphobia/caee1602969a640a4530)

例如，请参见[https://play.golang.org/p/hlaz_rMa0D](https://play.golang.org/p/hlaz_rMa0D)。

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2018-10-03T11:17:20.730

转换`int64`：

```
n := int64(32)
str := strconv.FormatInt(n, 10)

fmt.Println(str)
// Prints "32" 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2019-02-28T06:29:37.350

好的，他们中的大多数都向您展示了一些好东西。让我给你这个：

```
// ToString Change arg to string
func ToString(arg interface{}, timeFormat ...string) string {
    if len(timeFormat) > 1 {
        log.SetFlags(log.Llongfile | log.LstdFlags)
        log.Println(errors.New(fmt.Sprintf("timeFormat's length should be one")))
    }
    var tmp = reflect.Indirect(reflect.ValueOf(arg)).Interface()
    switch v := tmp.(type) {
    case int:
        return strconv.Itoa(v)
    case int8:
        return strconv.FormatInt(int64(v), 10)
    case int16:
        return strconv.FormatInt(int64(v), 10)
    case int32:
        return strconv.FormatInt(int64(v), 10)
    case int64:
        return strconv.FormatInt(v, 10)
    case string:
        return v
    case float32:
        return strconv.FormatFloat(float64(v), 'f', -1, 32)
    case float64:
        return strconv.FormatFloat(v, 'f', -1, 64)
    case time.Time:
        if len(timeFormat) == 1 {
            return v.Format(timeFormat[0])
        }
        return v.Format("2006-01-02 15:04:05")
    case jsoncrack.Time:
        if len(timeFormat) == 1 {
            return v.Time().Format(timeFormat[0])
        }
        return v.Time().Format("2006-01-02 15:04:05")
    case fmt.Stringer:
        return v.String()
    case reflect.Value:
        return ToString(v.Interface(), timeFormat...)
    default:
        return ""
    }
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2021-05-23T03:38:12.450

另外一个选项：

```
package main
import "fmt"

func main() {
   n := 123
   s := fmt.Sprint(n)
   fmt.Println(s == "123")
} 
```

[https://golang.org/pkg/fmt#Sprint](https://golang.org/pkg/fmt#Sprint)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-02-27T17:46:49.810

```
package main

import (
    "fmt" 
    "strconv"
)

func main(){
//First question: how to get int string?

    intValue := 123
    // keeping it in separate variable : 
    strValue := strconv.Itoa(intValue) 
    fmt.Println(strValue)

//Second question: how to concat two strings?

    firstStr := "ab"
    secondStr := "c"
    s := firstStr + secondStr
    fmt.Println(s)
} 
```

# bash - 根据列中出现的数字从大到小对 CSV 文件进行排序

> ID：10105942
> 
> 赞同：4
> 
> 时间：2012-04-11T12:31:07.400
> 
> 标签：bash, sorting

我有一个这样的 CSV 文件：

```
bear,1
fish,20
tiger,4 
```

我需要根据第二列中的内容从最大到最小对其进行排序，例如：

```
fish,20
tiger,4
bear,1 
```

如何以这种方式对文件进行排序？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T12:39:16.283

```
sort -t, -k+2 -n -r filename 
```

会做你想做的。

`-t,`将字段分隔符指定为逗号

`-k+2`指定要排序的字段 (field2)

`-r`指定反向排序

`-n`指定数字排序

# java - Android Game Java 从链表中删除位图

> ID：10105950
> 
> 赞同：0
> 
> 时间：2012-04-11T12:31:32.923
> 
> 标签：java, android, bitmap, linked-list

所以，我的画布上有各种位图，它们作为单独的类进行动画处理。

当位图离开屏幕时，我希望从链接列表中删除位图。它们位于链表中，因为屏幕上可能有多个相同的位图。

位图正在从屏幕上移除，但它仍在链表中，因为链表大小为 1。

如果我将多个位图添加到链接列表中，它们都会被绘制，但是当屏幕消失时，游戏会崩溃。

面板类。

```
public void doDraw(long elapsed, long score, Canvas canvas) {
        canvas.drawBitmap(background, 0, 0, null); // draw a black background
        synchronized (mChimneys) {

            if ((mPresents.size() < 3)) {
                for (Present presents : mPresents) {
                    presents.doDraw(canvas);
                }
            }
        }

    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        synchronized (mChimneys) {

            float x = event.getX();
            float y = event.getY();

            float mX = 0;
            float mY = 0;

            int mWidth = 0;
            int mHeight = 0;

            for (Santa santas : mSantas) {
                mX = santas.getmX();
                mY = santas.getmY();
                mWidth = santas.getmBitmap().getWidth();
                mHeight = santas.getmBitmap().getHeight();
            }

            switch (event.getAction()) {

            case MotionEvent.ACTION_DOWN:
                if (x >= mX && x < (mX + mWidth) && y >= mY
                        && y < (mY + mHeight)) {
                    if ((mPresents.size() < 4)) {
                        mPresents.add(new Present(getResources(), mX, mY));
                        mPresentNumber = mPresents.size();
                    }
                }
            }
        }
        return true;
    }

public void animate(long elapsedTime) {
        synchronized (mChimneys) {

            for (Present presents : mPresents) {
                boolean remove = presents.animate(elapsedTime);
                if (remove) {
                    mPresents.remove(presents);
                }
            }
        } 
```

现在的班级。

```
 package com.droidnova.android;

import java.util.ArrayList;
import java.util.LinkedList;
import java.util.List;
import java.util.Random;

import android.content.res.Resources;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;

public class Present {
    private float mX;
    private float mY;

    private Bitmap mBitmap;

    private int mSpeedY;

    Panel panel;

    public Present(Resources res, float x, float y) {
        Random rand = new Random();

        List<Integer> my_presents = new LinkedList<Integer>();

        my_presents.add(R.drawable.presentblue);
        my_presents.add(R.drawable.presentpurple);
        my_presents.add(R.drawable.presentred);
        my_presents.add(R.drawable.presentyellow);

        int choice = rand.nextInt(my_presents.size());

        mBitmap = BitmapFactory.decodeResource(res, my_presents.get(choice));
        mX = x + 50;
        mY = y + 100;
        mSpeedY = 5;
    }

    public void doDraw(Canvas canvas) {
        canvas.drawBitmap(mBitmap, mX, mY, null);
    }

    public boolean animate(long elapsedTime) {
        mY += mSpeedY * (elapsedTime / 20f);
        boolean remove = checkBorders();
        if (remove) {
            return true;
        }
        return false;
    }

    private boolean checkBorders() {
        if (mY + mBitmap.getHeight() >= Panel.mHeight) {
            return true;
            // mSpeedY = -mSpeedY;
            // mY = Panel.mHeight - mBitmap.getHeight();
        }
        return false;
    }
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:07:47.513

我认为这些行可能会导致问题：

```
 for (Present presents : mPresents) {
            boolean remove = presents.animate(elapsedTime);
            if (remove) {
                mPresents.remove(presents);
            }
        } 
```

由于您正在尝试从“mPresents”中删除“礼物”，而您在列表的该元素上。我可能是错的，但我认为这有点像吃自己的头。创建另一个列表（或只是另一个 Present 对象）可能会有所帮助，然后在循环完成后将其从列表中删除。例如，像这样：

```
ArrayList <Present> presentsToRemove = new ArrayList<Present>();
for (Present presents : mPresents) {
     if (presents.animate(elapsedTime)) {
           presentsToRemove.add(presents);
     }
}
mPresents.removeAll(presentsToRemove); 
```

请让我知道这是否有帮助，或者我是否误解了。

# wordpress - 通过 id 链接到自定义分类法

> ID：10105951
> 
> 赞同：4
> 
> 时间：2012-04-11T12:31:33.127
> 
> 标签：wordpress, custom-taxonomy

通过一系列具体要求，我发现自己需要使用其术语 id 链接到自定义分类类别...

我有这个 - 显示所有分类法的链接 - 我希望更改它，因此它只显示分类法的链接，其中术语 id 从我正在使用的自定义字段中动态提取。

```
$taxonomy = 'event-categories';
$terms = get_terms($taxonomy);
if ($terms) {
foreach($terms as $term) {
echo '<li><a href="http:/mysite.com/events/categories/project-events/' . $term->slug . '">' . $term->name .'</a></li>';
 }
}; 
```

本质上我需要“link_to_taxonomy_category(x)”，其中 x = term_id

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-11T12:49:17.777

您正在寻找的功能是`get_term_link`. 它需要一个术语对象、ID 或 slug 以及一个分类名称，并返回一个指向术语登录页面的 URL。

作为旁注，硬编码上面示例中的链接是脆弱的 - 始终保持您的代码尽可能可移植。如果该站点被移动到不同的域，该链接将会中断。WordPress 有几个功能可以根据当前安装环境动态生成链接。 `get_term_link`是一个例子。

来自[法典](http://codex.wordpress.org/Function_Reference/get_term_link)：

```
$terms = get_terms('species');
echo '<ul>';
foreach ($terms as $term) {
    echo '<li><a href="'.get_term_link($term->slug, 'species').'">'.$term->name.'</a></li>';
}
echo '</ul>'; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-31T22:02:22.053

如果您有单个`term_id`eg: `10`，自定义分类法，`series`那么您可以使用以下代码获取分类法术语链接。

注意：将 10 更改为您的 term_id 变量，并将“系列”更改为您的分类。

```
$term = get_term( 10, 'series' );
$term_link = get_term_link( $term );
echo '<a href="' . $term_link . '">View All</a>'; 
```

# xslt - 如何在 XSLT 中轻松生成唯一字符串？

> ID：10105956
> 
> 赞同：2
> 
> 时间：2012-04-11T12:31:59.993
> 
> 标签：xslt, doxygen

我有个问题！

我有一个包含部分和小节的 XML 文档。我正在使用它生成一个 Doxygen 页面`XSLTProc`，现在我遇到了问题。当我生成这样的部分名称时：

```
<xsl:template match="SECTION/SUBSECTION">
@subsection <xsl:value-of select="@title"/>
<xsl:apply-templates/>
</xsl:template> 
```

然后标题的第一个单词没有出现，因为 Doxygen 期望这样声明：

```
@subsection <subsectionname> <subsectiontitle> 
```

因此，第一个单词被自动视为小节名称。将随机生成的字符串放在那里似乎不是一项非常简单的任务。我尝试通过使用来输入唯一的数字`<xsl:value-of select="count(preceding-sibling::*[@col]) + 1"`，这按预期工作，但事实证明，Doxygen 不接受数字作为小节名称。我还尝试去除空格`"@title"`并将其用作小节名称，但 XSLTProc 抱怨它不是`<xslt:stylesheet>`. 我怎样才能轻松地将一些独特的字符串放在那里？它不必是有意义的文本。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T12:42:00.690

**使用`generate-id()`功能**。

```
<xsl:value-of select="generate-id(@title)"/> 
```

**如果您希望生成的字符串更“可读”，这是一种方法**：

```
<xsl:value-of select="concat(@title, generate-id(@title))"/> 
```

# c# - 如何在 Gridview 中获取可编辑字段的值

> ID：10105960
> 
> 赞同：1
> 
> 时间：2012-04-11T12:32:33.960
> 
> 标签：c#, asp.net, gridview, gridviewrow

我有一个带有 ObjectDataSource 的网格视图，我想一键更新它。因此，gridview 加载了可编辑和固定的字段。我循环通过gridview一次更新。我能够将固定字段（**Cells[0]**）中的值加载到 Products 对象（**p.ProductID**）中，但我无法将可编辑字段（**Cells[1]**）中的值加载到 Products 对象中( **p.Productname** )。

如何在对象中获取此值，以便将对象发送到 BLL 方法。为什么**row.Cells[0].Text**适用于固定字段，但不适用于可编辑字段？

```
 protected void Update_Click(object sender, EventArgs e)
    {
        BLLProducts BLLProducts = new BLLProducts();
        Products p = new Products();
        foreach(GridViewRow row in GridView1.Rows)
        {
            p.ProductID = Convert.ToInt16(row.Cells[0].Text);
         // p.Productname = row.Cells[1].Text;

            BLLProducts.update(p);
        }
    } 
```

标记：

```
<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
        <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
            DataSourceID="test">
            <Columns>
                <asp:BoundField DataField="ProductID" 
                    HeaderText="ProductID" SortExpression="ProductID" />
                <asp:TemplateField HeaderText="Productname" SortExpression="Productname">
                    <EditItemTemplate>
                        <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("Productname") %>'></asp:TextBox>
                    </EditItemTemplate>
                    <ItemTemplate>
                        <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("Productname") %>'></asp:TextBox>
                    </ItemTemplate>
                </asp:TemplateField>             
            </Columns>
        </asp:GridView>
        <asp:ObjectDataSource ID="test" runat="server" 
            SelectMethod="SelectAllProducts" TypeName="BLLProducts">
        </asp:ObjectDataSource>
        <asp:Button ID="Button3" runat="server" onclick="Update_Click" 
            Text="Update All" />
    </p>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:39:04.927

您正在使用哪个可编辑字段？

如果您使用过文本框，那么您应该得到如下值：

```
 foreach (GridViewRow gvr in GridView2.Rows)  
       {  
           TextBox tb = (TextBox)gvr.FindControl("TextBox1");  
           string txt = tb.Text;              
       } 
```

# android - Android 从 Eclipse 中的构建中排除文件

> ID：10105961
> 
> 赞同：8
> 
> 时间：2012-04-11T12:32:34.090
> 
> 标签：android, eclipse, build

我有一个 Android 项目，我正在 Eclipse 中处理该项目。没有特殊要求，但是我确实在项目中有几个文件我不想/不需要包含在最终构建中，但我确实希望将它们保留在原处。它们都是java源文件，都在同一个包中。该包中没有我需要包含的文件 - 所以我可以安全地从 build.xml 跳过整个包。

所以，对于我的问题：在构建 android 应用程序时，Eclipse 中有没有办法从构建中排除一个包（或单个文件）？

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-11T12:46:36.837

在 Eclipse 中，右键单击 Package Explorer 中的文件（或包）。应该有一个 Build Path > Exclude 选项

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-30T17:06:43.667

转到 eclipse File->new->Other->Faceted Project->Give project name 并根据需要将其添加到工作集中

Eclipse 不会构建该项目或工作集

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T16:51:56.857

确保您处于正确的视角。我刚刚遇到了类似的问题并且非常沮丧，因为我无法排除任何文件。事实证明，在我继续使用 vaca 之前，我一直在摆弄 PHP 透视图，并且从未将其更改回来。

# ios - 如何持久存储 twitter iOS5 ACAccount 以在多个视图控制器中使用

> ID：10105964
> 
> 赞同：1
> 
> 时间：2012-04-11T12:32:51.340
> 
> 标签：ios, twitter

我已经完全实现了 twitter iOS5 帐户，并假设用户已在设置页面中授予权限。

我想在应用程序的各种视图中使用相同的帐户，但不想一直要求用户授予访问权限。

有没有办法永久存储它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:45:30.527

这里可以使用几种方法。

您可以使用自定义单例类的属性来保留和共享对象。

这是一个很好的模式 -[在 Objective C 中使用 GCD 的 dispatch_once 创建单例](https://stackoverflow.com/questions/5720029/create-singleton-using-gcds-dispatch-once-in-objective-c)

您可以使用 AppDelegate 类并将其保留为该类的属性，但这种模式并不那么好恕我直言，因为它将 AppDelegate 视为您不知道如何处理的垃圾场，并且您也结束了到处都是丑陋的演员。

`((MyAppDelegate *)[[UIApplication sharedApplication] delegate]).acaccountobject`

从技术上讲，单例和 AppDelegate 是相同的主体，但如前所述，AppDelegate 不是垃圾场。

# css - 如何显示每行包含多个元素的表单标签？jsfiddle

> ID：10105965
> 
> 赞同：0
> 
> 时间：2012-04-11T12:32:55.767
> 
> 标签：css, forms, alignment, jsfiddle

我试图在表单元素上方显示我的表单标签，所以我在我的 CSS 中使用 display:block。但是，我无法以这种方式每行显示超过 1 个表单元素。

如何正确更新我的 CSS 以在表单元素上方显示我的标签，但每行能够显示多个元素？看这个例子：

[http://jsfiddle.net/Mhu76/1/](http://jsfiddle.net/Mhu76/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T12:39:10.377

在每组 span 和 input 周围放置 div，然后制作这些 div `display:inline-block;`。我在这里试过：http: [//jsfiddle.net/Mhu76/4/](http://jsfiddle.net/Mhu76/4/)

# java - 使用 JSoup 从亚马逊检索评论

> ID：10105968
> 
> 赞同：0
> 
> 时间：2012-04-11T12:32:59.593
> 
> 标签：java, html, jsoup

我正在使用 JSoup 从亚马逊的特定网页中检索评论，我现在拥有的是：

```
 Document doc = Jsoup.connect("http://www.amazon.com/Presto-06006-Kitchen-Electric-Multi-Cooker/product-reviews/B002JM202I/ref=sr_1_2_cm_cr_acr_txt?ie=UTF8&showViewpoints=1").get();
    String title = doc.title();

    Element reviews = doc.getElementById("productReviews");
    System.out.println(reviews); 
```

这给了我包含评论的 html 块，但我只想要没有所有标签 div 等的文本。然后我想将所有这些信息写入文件。我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:00:21.780

使用`text()`方法

```
System.out.println(reviews.text()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:28:29.807

虽然`text()`会给您一堆文本，但您需要首先使用 jsoup 的`select(...)`方法将问题细分为单独的评论元素。我会给你第一个大的划分，但你可以进一步细分它：

```
public static List<Element> getReviewList(Element reviews) {
  List<Element> revList = new ArrayList<Element>();
  Elements eles = reviews.select("div[style=margin-left:0.5em;]");
  for (Element element : eles) {
     revList.add(element);
  }
  return revList;
} 
```

如果你分析每个元素，你应该看到亚马逊如何进一步细分所持有的信息，包括评论的标题、评论的日期和它所持有的文本的正文。

# java - JTable 和 JButton

> ID：10105972
> 
> 赞同：0
> 
> 时间：2012-04-11T12:33:02.050
> 
> 标签：java, swing, java-7

我正在编写 Java 桌面应用程序。我有一些文本区域可以从用户那里获取数据。A `JButton`，它接受输入并处理它。并`JTable`填充处理过的数据。

这是我从 main 调用的构造函数 em。

```
 public ChangeButtonLabel()
    {
        JFrame f=new JFrame();
            f.setLayout(null);

        JLabel lab1=new JLabel("Name");
            JLabel lab2=new JLabel("Age");

        //table=new JTable(model);

        text1=new JTextField(20);
            text2=new JTextField(20);

        button=new JButton("OK");

            lab1.setBounds(10,10,100,20);
            text1.setBounds(120,10,100,20);

            lab2.setBounds(10,40,100,20);
            text2.setBounds(120,40,100,20);

            Table=new ArrayList();
        Table.add(new ArrayList());
        ((ArrayList)Table.get(0)).add("\nProgram Name   ");
        ((ArrayList)Table.get(0)).add("Count   ");
        ((ArrayList)Table.get(0)).add("Elapsed Time   ");
        ((ArrayList)Table.get(0)).add("Average ET\n");

        button.setBounds(120, 100, 100, 20);        

        button.addActionListener(new MyAction());

            Object[][] data = {
                {"Program Name","count","ET","Avg ET"}
            };

        model = new DefaultTableModel(data,columnNames);

            dataTable = new JTable(model);

            dataTable.setPreferredScrollableViewportSize(new Dimension(500, 70));
            dataTable.setFillsViewportHeight(true);

        dataTable.setBounds(220,130,300,200);
            f.add(lab1);
            f.add(text1);
            f.add(lab2);
            f.add(text2);

        f.add(dataTable);

        f.add(button);

            f.setVisible(true);
            f.setSize(300,350);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);   
    }
} 
```

在事件中，我试图通过删除其以前的值来更新整个 jtable。这是代码

```
model = new DefaultTableModel(data,columnNames);
dataTable.repaint();
dataTable=new JTable(model);

    dataTable.setPreferredScrollableViewportSize(new Dimension(500, 70));
    dataTable.setFillsViewportHeight(true);

dataTable.setBounds(220,130,300,200);

model.fireTableDataChanged(); 
```

其中 data 是二维数组，而 columnames 是列。

但我`JTable`没有得到更新。

在哪里做错了，请给我一些指导。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T12:34:46.830

您不想创建新的 JTable，因为这对当前显示的 JTable 没有影响。相反，您想调用`setModel(...)`当前的 JTable 并传入新的表模型。

另外，请处理您的代码格式，因为直言不讳，它很臭。既然你要求志愿者努力帮助你，我认为你付出类似的努力来不让阅读你的代码变得如此困难并不需要太多。

举个例子，看看哪个更容易阅读，你上面的代码，还是这个代码：

```
public class ChangeButtonLabel {
   private JTextField text1;
   private JButton button;
   private ArrayList Table;
   private JTextField text2;
   private Object[] columnNames;
   private DefaultTableModel model;
   private JTable dataTable;

   public ChangeButtonLabel() {
      JFrame f = new JFrame();
      f.setLayout(null);
      JLabel lab1 = new JLabel("Name");
      JLabel lab2 = new JLabel("Age");
      // table=new JTable(model);

      text1 = new JTextField(20);
      text2 = new JTextField(20);
      button = new JButton("OK");
      lab1.setBounds(10, 10, 100, 20);
      text1.setBounds(120, 10, 100, 20);
      lab2.setBounds(10, 40, 100, 20);
      text2.setBounds(120, 40, 100, 20);

      Table = new ArrayList();
      Table.add(new ArrayList());
      ((ArrayList) Table.get(0)).add("\nProgram Name   ");
      ((ArrayList) Table.get(0)).add("Count   ");
      ((ArrayList) Table.get(0)).add("Elapsed Time   ");
      ((ArrayList) Table.get(0)).add("Average ET\n");

      button.setBounds(120, 100, 100, 20);
      button.addActionListener(new MyAction());

      Object[][] data = { { "Program Name", "count", "ET", "Avg ET" } };
      model = new DefaultTableModel(data, columnNames);
      dataTable = new JTable(model);
      dataTable.setPreferredScrollableViewportSize(new Dimension(500, 70));
      dataTable.setFillsViewportHeight(true);
      dataTable.setBounds(220, 130, 300, 200);

      f.add(lab1);
      f.add(text1);
      f.add(lab2);
      f.add(text2);
      f.add(dataTable);
      f.add(button);
      f.setVisible(true);
      f.setSize(300, 350);
      f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
   }
} 
```

接下来我们将研究布局管理器的使用......

# android - Android：BackgroundService 中用于定位的计时器

> ID：10105974
> 
> 赞同：1
> 
> 时间：2012-04-11T12:33:07.480
> 
> 标签：android, location

我有一个包含一些活动的应用程序。我希望我的应用程序启动时，我开始监听来自 LocationManager 的更新，几分钟后，我想超时并停止监听更新。我在其他应用程序中这样做过，但我只有一个活动。

我现在拥有的是一个开始侦听 LocationUpdates 的 BackgroundService；如果它快速获得足够好的位置，它将停止侦听更新。但有时它不能很快找到一个好位置，我希望它超时，所以我有一个定时器，它会在一段时间后停止监听更新。当我启动应用程序并停留在第一个活动中时，这工作正常。

问题是当我启动应用程序，然后开始使用应用程序和其他活动启动时，计时器永远不会关闭，因此 LocationManager 始终处于打开状态，直到应用程序退出。

想法？是否有更好的方法来监听位置更新，以便应用中的任何 Activity 都可以获取位置，并确保超时停止监听更新？

**更新：** 事实证明，当我切换活动时，BackgroundService 被销毁，并且我取消了 onDestroy() 中的计时器。感谢您的回复——这足以确认一般方法是合理的，我可能在某处犯了一个愚蠢的错误（真的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:45:50.420

你为什么不把定时器放在后台服务？这将解决问题。

# android - android之间的区别

> ID：10105975
> 
> 赞同：0
> 
> 时间：2012-04-11T12:33:16.117
> 
> 标签：android

对这些相似类型的属性完全感到困惑

为身份证

```
id= "android:id/Some" 
```

和

```
id= "@+id/Some" 
```

和宽度

```
layout_width= 
```

和

```
width 
```

对于重力

```
layout_gravity 
```

和

```
gravity 
```

还有更多你想告诉的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T12:46:46.290

`id= "android:id/Some"`是在系统默认值中定义的 id。 `id="@+id/Some"`是您在应用程序中创建的本地 ID（“+”表示它是动态定义，即未在 id.xml 文件中定义）。

`layout_width=""`是您的视图在其父视图中的宽度。它可以是`wrap_content`或`match_parent`维度。`width`可用于实现与`layout_width`.

`layout_gravity`用于告诉该视图将如何放置在其父级中（即`layout_gravity="bottom"`在 TextView 上将视图放置在底部）。`gravity`是如何将此视图的子视图放置在其中（即`gravity="bottom"`在 TextView 上将文本放置在底部）。

通常，这些`layout_`属性与当前视图在其父视图中的行为方式有关。属性`layout_`决定视图内容的行为方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T12:39:15.570

对于 id，@ 告诉 android 你正在谈论一个资源（将被编译成 R.java）。+ 表示您正在创建新资源而不是引用现有资源。

layout_width（和 layout_height）可以是“wrap_content”或“fill_parent”（API 中的“match_parent”>= 11）。

宽度（和高度）是以指定单位（px、sp、dip 等）表示的组件的实际宽度

layout_gravity 指定孩子的重力。重力指定组件自身的重力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T12:39:53.100

您应该阅读[文档](http://developer.android.com/reference/android/widget/TextView.html)，一些属性是从 android.view.View 继承的，而另一些是对象属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T12:49:42.017

1.  id="android:id/Some" ---- 使用已经存在的名为“Some”的 id
2.  id= "@+id/Some" ---- 设置一个新的id命名为"Some"
3.  layout_width ---- 所有 View 对象的布局参数，始终是必需的
4.  width ---- 仅适用于 TextView 及其子类的对象，对于 TextView 是可选的
5.  重力----设置内容在视图本身中的位置
6.  layout_gravity ---- 设置视图在其父级中如何定位的位置

您需要阅读有关官方文档的更多信息，请尝试下面的 LinearLayout 中的代码以了解其工作原理

```
enter <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<TextView 
    android:id="@+id/some"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:width="100dip"
    android:height="100dip"
    android:text="SAMPLE"
    android:gravity="center"
    />
<TextView 
    android:id="@id/more"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="SAMPLE"
    android:layout_gravity="center"
    /></LinearLayout>here 
```

# python - 使用 unicode 字符串提取字典列表中元素的值

> ID：10105978
> 
> 赞同：-3
> 
> 时间：2012-04-11T12:33:24.773
> 
> 标签：python, data-structures

> **可能重复：**
> [提取字典列表中元素的值](https://stackoverflow.com/questions/10105593/extracting-values-of-elements-in-a-list-of-dictionaries)

A 是一个带有 unicode 字符串的 python 字典，如下所示：

```
A = [{'abc': 'Top Cin\u03b9ma 2011'},{'abc': 'D\u03b9bat autours sur les news ET rumeurs -   D'},{'abc': '78787'}] 
```

如何从 A 中删除 'abc' 中的 unicode 字符串并创建一个新列表：

```
B = ['Top Cin\u03b9ma 2011','D\u03b9bat autours sur les news ET rumeurs -   D','78787'] 
```

[提取字典列表中元素的值中](https://stackoverflow.com/questions/10105593/extracting-values-of-elements-in-a-list-of-dictionaries)的答案不适用于 unicode。

**编辑：**使用解决方案我仍然收到以下错误：

```
return codecs.charmap_encode(input,errors,encoding_table)
UnicodeEncodeError: 'charmap' codec can't encode character u'\u03b9' in position 10:        character maps to <undefined> 
```

实际数据结构如下：

```
A =

{u'thread': u'Sujet  Topic de la communaut des fans de Star Wars  '}
{u'thread': u'Sujet  Topic Unique La Communaut des Fans de Pirates des Caraibes '}
{u'thread': u'Sujet  Pandora - Topic de la communaut des fans de Avatar et de James Cameron '}
{u'thread': u'Sujet  Au-del de Brokeback  ple-mle'}
{u'thread': u'Sujet  X Men 4  The Wolvy Gang fanfic'}
{u'thread': u'Commentaire sur - Transformers 3'}
{u'thread': u'Sujet  le Photogramme - saison 2'}
{u'thread': u'Sujet  Une mditation sur lamour de la beaut'}
{u'thread': u'Commentaire sur - Harry Potter et les reliques de la mort - partie 2'}
{u'thread': u'Commentaire sur - Inception'}
{u'thread': u'ALED - Cin\u03b9ma'}
{u'thread': u'Sujet  Commentaire sur  Twilight - Chapitre 3  hsitation'}
{u'thread': u'Sujet   Topic unique  La Justice league prvu pour 2013'}
{u'thread': u'Sujet  Commentaire sur  Harry Potter et les reliques de la mort - partie 1'}
{u'thread': u'Commentaire sur - Harry Potter et les reliques de la mort - partie 1'}
{u'thread': u'Sujet  Commentaire sur  Avatar'}
{u'thread': u'Sujet  Rebecca and Billy s fan'}
{u'thread': u'Sujet  ALED - Bistrot'}
{u'thread': u'Sujet  ALED - Jeux'}
{u'thread': u'ALED - Bistrot'}
{u'thread': u'Sujet  Topic Unique News Transformers III'}
{u'thread': u'Sujet  Topic Unique News  Scream 4 Infos photos BA promo Sans HSFlood '}
{u'thread': u'ALED - Jeux'}
{u'thread': u'Sujet  ALED - Musique'}
{u'thread': u'ALED - Musique'}
{u'thread': u'Sujet  Batmanet une Lgende '}
{u'thread': u'Sujet  Commentaire sur  The Dark Knight Rises'}
{u'thread': u'Sujet  Commentaire sur  Resident Evil  Afterlife'}
{u'thread': u'Sujet  Jake Sully lhomme qui marchait dans sa tte '}
{u'thread': u'Sujet  De qui Peter Jackson croit-il se moquer'}
{u'thread': u'Sujet  Commentaire sur  Saw 3D'}
{u'thread': u'[Topic Unique] News Spider-Man reboot'}
{u'thread': u'Sujet  Dbat autours sur les news ET rumeurs D'}
{u'thread': u'Sujet  Commentaire sur  Scream 4'}
{u'thread': u'Sujet  Le Top 100 des internautes'}
{u'thread': u'Sujet  Topic des news Bilbo le Hobbit prquelle du Seigneur des Anneaux Spoilers possibles'}
{u'thread': u'D\u03b9bat autours sur les news ET rumeurs -D'}
{u'thread': u'Commentaire sur - The Dark Knight Rises'}
{u'thread': u'Sujet  Top Cinma 2010'}
{u'thread': u'Topic des news Bilbo le Hobbit (pr\u03b9quelle du Seigneur des Anneaux) Spoilers possibles-'}
{u'thread': u'Sujet  Commentaire sur  Pirates des Carabes  la Fontaine de Jouvence'}
{u'thread': u'Sujet  Lunique et vritable explication de matrix revolutions'}
{u'thread': u'Sujet  Topic DE SECOURS de la communaut des fans de STAR WARS'}
{u'thread': u'Sujet  Commentaire sur  X-Men Le commencement'}
{u'thread': u'Commentaire sur - X-Men Le commencement'}
{u'thread': u'Sujet  TOPIQUE UNIQUE-FORUM OFFICIEL Rumeurs- News-Infos-Photos-BA-Compte  rebours de RAMBO V'}
{u'thread': u'Sujet  Vos citations prfres du Seigneur des Anneaux'}
{u'thread': u'Sujet  Commentaire sur  Piranha 3-D'}
{u'thread': u'Sujet  Fanarts - vos crations AVATAR'}
{u'thread': u'Sujet  Commentaire sur  Sucker Punch'}
{u'thread': u'Commentaire sur - Sucker Punch'}
{u'thread': u'Sujet  In brightest day in blackest night Green Lantern le film les news c est ici'}
{u'thread': u'Sujet  Commentaire sur  The Expendables'}
{u'thread': u'Sujet  Commentaire sur  Twilight - Chapitre 4  rvlation'}
{u'thread': u'Sujet  Meeting du TDLCDFDSW pour Juin 2011'}
{u'thread': u'Sujet  Topic Unique Harry Potter et les Reliques de la Mort Partie II News Photo Bande annonce '}
{u'thread': u'Commentaire sur - Twilight - Chapitre 4 - r\u03b9v\u03b9lation'}
{u'thread': u'Topic Unique Harry Potter et les Reliques de la Mort (Partie II) [News, Photo, Bande annonce ----]'}
{u'thread': u'Sujet  Commentaire sur  Le Choc des Titans'}
{u'thread': u'Sujet  Le club des fans de cin'}
{u'thread': u'Sujet  Commentaire sur  Le Dernier matre de lair'}
{u'thread': u'Sujet  Commentaire sur  Black Swan'}
{u'thread': u'Commentaire sur - Black Swan'}
{u'thread': u"Commentaire sur - Tron l'h\u03b9ritage"}
{u'thread': u'Sujet  Armada 2008 rassemblement des fans de POTC pour la prise du port de Rouen  membres only'}
{u'thread': u'Sujet  Commentaire sur  Tron lhritage'}
{u'thread': u'Sujet  TOPIC OFFICIEL unique  TINTIN  news photos scoops '}
{u'thread': u'Sujet  Commentaire sur  Iron Man 2'}
{u'thread': u"Top des films de l'ann\u03b9e 2011"}
{u'thread': u'Sujet  Commentaire sur  Prince of Persia  les sables du temps'}
{u'thread': u'Commentaire sur - Spider-Man (3D)'}
{u'thread': u'Commentaire sur - World Invasion - Battle Los Angeles'}
{u'thread': u'Sujet  Commentaire sur  Les Griffes de la nuit'}
{u'thread': u'Sujet  Commentaire sur  World Invasion  Battle Los Angeles'}
{u'thread': u'Sujet  Le merchandising - Les produits drivs'}
{u'thread': u'TOPIC OFFICIEL [unique] - TINTIN  (news, photos, scoops, ---)'}
{u'thread': u'Sujet  Commentaire sur  Predators'}
{u'thread': u'Sujet  Box office Tron '}
{u'thread': u'Sujet  Commentaire sur  Tree of Life'}
{u'thread': u'Commentaire sur - Tree of Life'}
{u'thread': u'Sujet  Commentaire sur  Robin des Bois'}
{u'thread': u'Sujet  Commentaire sur  Thor'}
{u'thread': u'Sujet  THOR de Kenneth Brannagh Topic news'}
{u'thread': u'Sujet  NEW Signalez ici les nouveaux liens Top Ralisateurs et Ralisatrices des internautes  rajouter dans le Sticky'}
{u'thread': u'Sujet  Topic Unique News Breaking Dawn'}
{u'thread': u'Sujet  Commentaire sur  Kick-Ass'}
{u'thread': u'Sujet  Commentaire sur  Le Monde de Narnia  Chapitre 3 - LOdysse du Passeur daurore'}
{u'thread': u"Commentaire sur - Le Monde de Narnia - Chapitre 3 - L'Odyss\u03b9e du Passeur d'aurore"}
{u'thread': u'Sujet  Top Cinma 2011'}
{u'thread': u'Sujet  Commentaire sur  Paranormal Activity'}
{u'thread': u'Sujet  Marc andr Grondin'}
{u'thread': u'Sujet  Faisons un grand scenario participatif dHP '}
{u'thread': u'Sujet  Commentaire sur  Shutter Island'}
{u'thread': u'Commentaire sur - Shutter Island'}
{u'thread': u'Sujet  Pourquoi ce film est il autant dtest '}
{u'thread': u'Sujet  Commentaire sur  Twilight - Chapitre 2  tentation'}
{u'thread': u'Top Cin\u03b9ma 2011'}
{u'thread': u'Sujet  Commentaire sur  Rien  dclarer'}
{u'thread': u'Sujet  Discussion autour des news et rumeur du New Superman Project '}
{u'thread': u'Discussion autour des news et rumeur du New Superman Project !'} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:38:33.803

遍历列表 A 并为列表中的每个 d 调用**values**方法，该方法返回字典中包含的值列表，然后从该列表中获取第一项。

```
>>> [d.values()[0] for d in A]
['Top Cin\\u03b9ma 2011', 'D\\u03b9bat autours sur les news ET rumeurs -   D', '78787'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T12:38:38.110

可能不是最漂亮的解决方案，但我相信这可以满足您的需求

```
[i.values()[0] for i in A] 
```

我假设您显示的 B 中的 '}' 是编辑错误的结果，否则，这将不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T12:36:23.023

`values()`A中的每个字典有什么问题？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T12:37:13.913

就这么简单：

```
>>> reduce(lambda x,y: x+[y['abc']], A, []) 
```

# c# - 如何在 C# 中用小时填充下拉列表

> ID：10105979
> 
> 赞同：-1
> 
> 时间：2012-04-11T12:33:28.687
> 
> 标签：c#, asp.net, drop-down-menu

我必须有**2 个下拉列表，我想用从****1 到 24**的小时数填充它们。然后我想计算两个选定值之间的差异。如果我在第一个下拉列表中选择，假设小时值为 12，第二个值为 16，则差值为 4。

**我怎样才能在 c# 中实现这一点？**

我正在开发一个用**C#**编码的 asp.net Web 应用程序。

**下面是我如何填充我的下拉列表的代码：**

```
 DateTime Date = DateTime.Today;
 DateTime Time = DateTime.Now;
 ListItem item1 = new ListItem(Time.ToShortTimeString(),
                               Time.ToShortTimeString());

 for (int i = 0; i <= 48; i++)
 {
   ListItem item2 = new ListItem(Date.ToShortTimeString(), 
                                 Date.ToShortTimeString());

   droplist.Items.Add(item2);

   if (Date.CompareTo(Time) < 0 && Date.AddMinutes(30).CompareTo(Time) > 0)
     droplist.Items.Add(item1);

   Date = Date.AddMinutes(60);
 } 
```

**如何为我的下拉列表分配值，值是小时？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T12:39:29.220

`DateTime`您可以添加值本身，而不是将日期/时间字符串添加到下拉列表中。下拉列表通过调用显示其成员`ToString()`。这里的缺点：您不能使用其他时间格式，例如`ToShortTimeString()`.

另一种方法是`DateTime.TryParse`在计算之前使用该方法进行转换。

# linux - tomcat启动脚本错误

> ID：10105981
> 
> 赞同：1
> 
> 时间：2012-04-11T12:33:33.807
> 
> 标签：linux, tomcat, centos

我需要更改要由非 root 用户执行的 tomcat 进程。创建用户**tomcat**并将其放入**tomcat_group**组。更改了权限。然后更改**init.d**中的启动脚本。

我以 root 用户身份运行的旧脚本是

```
#!/bin/bash
# description: Tomcat Start Stop Restart
# processname: tomcat
# chkconfig: 234 20 80
JAVA_HOME=/usr/java/jdk1.6.0_31
export JAVA_HOME
PATH=$JAVA_HOME/bin:$PATH
export PATH
CATALINA_HOME=/usr/share/apache-tomcat-7.0.26

case $1 in
start)
sh $CATALINA_HOME/bin/startup.sh
;; 
stop)   
sh $CATALINA_HOME/bin/shutdown.sh
;; 
restart)
sh $CATALINA_HOME/bin/shutdown.sh
sh $CATALINA_HOME/bin/startup.sh
;; 
esac    
exit 0 
```

这作为 root 用户运行良好。

新剧本就是这样

```
 #!/bin/bash
# description: Tomcat Start Stop Restart
# processname: tomcat
# chkconfig: 234 20 80
JAVA_HOME=/usr/java/jdk1.6.0_31
export JAVA_HOME
PATH=$JAVA_HOME/bin:$PATH
export PATH
CATALINA_HOME=/usr/share/apache-tomcat-7.0.26/bin

case $1 in
start)
/bin/su tomcat $CATALINA_HOME/startup.sh
;; 
stop)   
/bin/su tomcat $CATALINA_HOME/shutdown.sh
;; 
restart)
/bin/su tomcat $CATALINA_HOME/shutdown.sh
/bin/su tomcat $CATALINA_HOME/startup.sh
;; 
esac    
exit 0 
```

但这在启动我的**服务**时会出错， 无法找到问题所在

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-02T13:11:56.627

我知道这是一个老问题，但这个答案可能会让某人受益。

我对“没有这样的文件或目录”有同样的问题。我将服务命令作为 shell 脚本运行 `$> /etc/init.d/tomcat stop` ，它返回： `-bash: /etc/init.d/tomcat: /bin/bash^M: bad interpreter: No such file or directory`

因为我在 Windows 环境中创建了脚本，所以它有 Windows 行结尾。一旦我解决了这个问题，Tomcat 就可以毫无问题地作为服务启动。

本文可能有助于换行[如何在 Bash 脚本中将 DOS/Windows 换行符 (CRLF) 转换为 Unix 换行符 (\n)？](https://stackoverflow.com/questions/2613800/how-to-convert-dos-windows-newline-crlf-to-unix-newline-n-in-bash-script)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T12:36:23.343

`su``-c`如果要使用它启动命令，则需要 a ：

```
/bin/su tomcat -c whatever_command 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T14:35:12.843

这很可能是由于将`$CATALINA_HOME`变量更改为`/bin`.

`startup.sh` 调用`catalina.sh`取决于`$CATALINA_HOME`特定目录的脚本。我绝对建议将其更改回`CATALINA_HOME=/usr/share/apache-tomcat-7.0.26`然后重新添加`/bin`到命令调用中。Tomcat 严重依赖`CATALINA_HOME`环境变量。

希望有帮助。

编辑：您仍然需要考虑 Mat 的回答，这应该只是修复您现在遇到的文件未找到错误。

# c# - 压缩/合并两个排序列表

> ID：10105982
> 
> 赞同：5
> 
> 时间：2012-04-11T12:33:49.613
> 
> 标签：c#

我有两个带有类型签名的排序字典

IE

```
SortedDictionary<decimal, long> A
SortedDictionary<decimal, long> B 
```

我想合并键相同的两个列表，从而创建一个新列表，例如

```
SortedDictionary<decimal, KeyValuePair<long,long>>
or
SortedDictionary<decimal, List<long>> 
```

这可能不是处理这种情况的最佳方式，但有人可以告诉我如何做到这一点或更好的处理方式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T13:10:37.157

这就是我所拥有的：

```
SortedDictionary<decimal, List<long>> merged = new SortedDictionary<decimal, List<long>>
 (
   A.Union(B)
   .ToLookup(x => x.Key, x => x.Value)
   .ToDictionary(x => x.Key, x => new List<long>(x))
 ); 
```

编辑：上述解决方案选择两个集合中未包含的键。这应该选择键相同的位置：

```
SortedDictionary<decimal, List<long>> merged = new SortedDictionary<decimal, List<long>>
 (
   A.Where(x=>B.ContainsKey(x.Key))
   .ToDictionary(x => x.Key, x => new List<long>(){x.Value, B[x.Key]})
 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:03:19.110

我认为另一种 LINQ 方法可以更好地捕获集合操作方面的意图：

```
SortedDictionary<decimal, long> a = new SortedDictionary<decimal, long>();
SortedDictionary<decimal, long> b = new SortedDictionary<decimal, long>();

a.Add(0, 10);
a.Add(1, 10);
a.Add(2, 100);
a.Add(100, 1);

b.Add(0, 4);
b.Add(4, 4);
b.Add(2, 10);

var result = a.Union(b)
    .GroupBy(x => x.Key)
    .ToDictionary(x => x.Key, x => x.Select(y => (long)y.Value).ToList()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:05:15.013

尝试这样的事情，这并不容易：

```
Dictionary<decimal, long> dic1 = new Dictionary<decimal, long>{ {3,23}, {2,3}, {5,4}, {6,8}};
    Dictionary<decimal, long> dic2 = new Dictionary<decimal, long>{ {3,2}, {2,5}, {5,14}, {12,2}};

    //recover shared keys (the keys that are present in both dictionaries)
    var sharedKeys = dic1.Select(dic => dic.Key).Intersect(dic2.Select(d2=>d2.Key));
    sharedKeys.Dump();

    //add to the fìnal dictionary
    var final = new Dictionary<decimal, List<long>>();
    foreach(var shk in  sharedKeys) {

       if(!final.ContainsKey(shk)) 
          final[shk] = new List<long>(); 

        final[shk].Add(dic1[shk]);
        final[shk].Add(dic2[shk]);
    }

**EDIT** 
//Skip below part if you need only keys present on both dictionaries.
///-----------------------------------------------------------------

    //get unique keys present in Dic1 and add
    var nonsharedkeys1 = dic1.Select(d=>d.Key).Where(k=>!sharedKeys.Contains(k)); 
    foreach(var nshk in  nonsharedkeys1) {

        final[nshk] = new List<long>();             
        final[nshk].Add(dic1[nshk]);        
    }

     //get unique keys present in Dic2 and add
    var nonsharedkeys2 =  dic2.Select(d=>d.Key).Where(k=>!sharedKeys.Contains(k));
    foreach(var nshk in  nonsharedkeys2) {

        final[nshk] = new List<long>();             
        final[nshk].Add(dic2[nshk]);        
    } 
```

*应该*为你工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T13:11:52.727

您可以简单地使用 LINQ 做到这一点：

```
var query = from a in A
            join b in B
                on a.Key equals b.Key
            select new {
                Key = a.Key,
                Value = Tuple.Create(a.Value, b.Value)
            };
var merged = new SortedDictionary<decimal, Tuple<long, long>>(
                 query.ToDictionary(x => x.Key, x => x.Value)
             ); 
```

我认为您应该在合并字典中使用`Tuple<long, long>`您的。`TValue`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T13:45:46.210

`Concat`你可以像这样“滥用” `Aggregate`：

```
var A = new SortedDictionary<decimal,long>();
var B = new SortedDictionary<decimal,long>();

A.Add(1, 11);
A.Add(2, 22);
A.Add(3, 33);

B.Add(2, 222);
B.Add(3, 333);
B.Add(4, 444);

var C = A.Concat(B).Aggregate(
    new SortedDictionary<decimal, List<long>>(),
    (result, pair) => {
        List<long> val;
        if (result.TryGetValue(pair.Key, out val))
            val.Add(pair.Value);
        else
            result.Add(pair.Key, new[] { pair.Value }.ToList());
        return result;
    }
);

foreach (var x in C)
    Console.WriteLine(
        string.Format(
            "{0}:\t{1}",
            x.Key,
            string.Join(", ", x.Value)
        )
    ); 
```

结果输出：

```
1:      11
2:      22, 222
3:      33, 333
4:      444 
```

这与您编写“正常”几乎相同`foreach`，实际上可以在任何`IEnumerable<KeyValuePair<decimal, long>>`（不仅仅是`SortedDictionary<decimal, long>`）上工作，并且如果需要，很容易扩展到两个以上的输入集合。

不幸的是，它也完全忽略了输入已经排序的事实`SortedDictionary`，因此性能不是最佳的。为了获得最佳性能，您必须`IEnumerator`为每个输入排序字典分别线性推进，同时不断比较底层元素 - 您可以完全避免`TryGetValue`这种方式......

# android - 调用 notifydatasetchanged() 后，Arrayadapter 未得到修改

> ID：10105984
> 
> 赞同：0
> 
> 时间：2012-04-11T12:34:00.123
> 
> 标签：android, android-listview, android-arrayadapter

伙计们，我正在使用一个简单的列表视图。我有两个活动，一个主要活动，第二个活动添加朋友在第二个活动中，我在文本框中获取朋友的用户 ID，并将该行添加到数据库并更新数组列表。当我回到主要活动时，我在 onResume() 函数中调用 notifyDataSetChanged() 并且我还记录了 arraylist 值。Arraylist 非常好，并且该行也插入到数据库中，但 listview 没有得到更新。我不知道这个问题请帮忙。这是d代码。

```
public class VayuActivity extends Activity {
    /** Called when the activity is first created. */
    static boolean first_time=true;
    ListView friend_list;
    public static List<String> al;
    public  ArrayAdapter<String> aa;
    String dummyfriends[]={"prashant","monika","pramod","dhara"};
    public static MessengerDataSource mds;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
/*        if(first_time==true)
        {
            first_time=false;
            setContentView(R.layout.registration);
        }
        else */
            setContentView(R.layout.main);

        al=new ArrayList<String>();
        for(String i:dummyfriends)
            al.add(i);

        aa=new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, al);

        friend_list=(ListView) findViewById(R.id.friend_list);

        friend_list.setAdapter(aa);

        mds= new MessengerDataSource(getApplicationContext());

        mds.open();

        System.out.println("I m in oncreate");

    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();

        al=mds.getFriends();
        aa.notifyDataSetChanged();

        System.out.println("I m in on resume function");
        System.out.println("Value of arraylist in on resume fun"+al);
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        System.out.println("I m in onpause function");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {

        MenuInflater mi=getMenuInflater();
        mi.inflate(R.menu.mainmenu, menu);

        return true;

    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {

        switch(item.getItemId())
        {
        case R.id.add_friend:
            //Toast.makeText(this, "Add Friend", 2000).show();
            Intent i=new Intent(VayuActivity.this,AddFriendActivity.class);
            startActivity(i);
            break;

        case R.id.remove_friend:
            Toast.makeText(this, "Remove Friend", 2000).show();
            break;

        }

        return true;
    }
}

package com.pdd.vayu;

import java.util.ArrayList;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class AddFriendActivity extends Activity implements OnClickListener{

    EditText et;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
         super.onCreate(savedInstanceState);
        setContentView(R.layout.addfriend);

        et=(EditText) findViewById(R.id.E_friendadd);

        Button b=(Button) findViewById(R.id.add_friend_button);
        b.setOnClickListener(this);
    }

    public void onClick(View v) {
        // TODO Auto-generated method stub
        String userid=et.getText().toString();
        //VayuActivity.al.add(f);
        Friend f=new Friend();
        f.setUserid(userid);
        f.setFname("pratik");

        VayuActivity.mds.addFriend(f);
        VayuActivity.al=(ArrayList<String>) VayuActivity.mds.getFriends();
        System.out.println(VayuActivity.al);
        //VayuActivity.aa.notifyDataSetChanged();
    }
} 
```

数据库类

```
package com.pdd.vayu;

import java.util.ArrayList;
import java.util.List;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;

public class MessengerDataSource {

    private SQLiteDatabase database;
    private MyDatabaseHelper mydbh;

    public static String USER_ID="userid";
    public static String F_NAME="fname";
    public static String CHAT_COUNT="chat_count";

    public static String M_TEXT="mtext";
    public static String SENDER="sender";
    public static String RECEIVER="receiver";
    public static String M_TYPE="type";

    public MessengerDataSource(Context c)
    {
        mydbh=new MyDatabaseHelper(c);
    }

    public void open()
    {
        try
        {
            database=mydbh.getWritableDatabase();   
        }
        catch(Exception e)
        {
            System.out.println(e.getLocalizedMessage());
        }
    }

    public void close() {
        mydbh.close();
    }

    public void addFriend(Friend f)

    {
        ContentValues cv = new ContentValues();
        cv.put(USER_ID,f.getUserid());
        cv.put(F_NAME, f.getFname());
        cv.put(CHAT_COUNT, f.getChat_count());

        try
        {
            database.insert(MyDatabaseHelper.TABLE_FRIEND, null, cv);
        }
        catch(Exception e)
        {
            System.out.println("Error while inserting  "+e.getLocalizedMessage());
        }

    }

    public void addMessage(Message m)

    {
        ContentValues cv = new ContentValues();
        cv.put(M_TEXT, m.getText());
        cv.put(SENDER,m.getSender());
        cv.put(RECEIVER,m.getReceiver());
        cv.put(M_TYPE, m.getType());

        database.insert(MyDatabaseHelper.TABLE_MESSAGE, null, cv);
    }

    public void deleteFriend(String fname)
    {
        database.delete(MyDatabaseHelper.TABLE_FRIEND,F_NAME+"="+fname , null);

    }

    public void deleteMessage(String text)

    {
        database.delete(MyDatabaseHelper.TABLE_FRIEND,M_TEXT+"="+text , null);
    }

    public List<String> getFriends()

    {
        List<String> friends= new ArrayList<String>();
        Cursor c=null;
        try
        {
        c=database.query(MyDatabaseHelper.TABLE_FRIEND, new String[]{F_NAME}, null, null, null, null,CHAT_COUNT);
        }
        catch(Exception e){System.out.println("Error while retrieving frnds list"+e.getLocalizedMessage());
        }

        if(c.moveToFirst())
        {
            do
            {
                String friend=c.getString(c.getColumnIndex(F_NAME));
                friends.add(friend);
            }
            while(c.moveToNext());
        }

        return friends;
    }

    public List<String> getMessages(String from)

    {
        List<String> messages= new ArrayList<String>();

        String where=SENDER+"="+from;

        Cursor c=database.query(MyDatabaseHelper.TABLE_MESSAGE, new String[]{M_TEXT},where , null, null, null,null);

        if(c.moveToFirst())
        {
            do
            {
                String message=c.getString(c.getColumnIndex(M_TEXT));
                messages.add(message);
            }
            while(c.moveToNext());
        }

        return messages;
    }

} 
```

数据库助手

```
package com.pdd.vayu;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

public class MyDatabaseHelper extends SQLiteOpenHelper {

    public static String TABLE_FRIEND="friend";

    public static String TABLE_MESSAGE="message";

    public static String CREATE_FRIEND="create table if not exists "+ 
    TABLE_FRIEND+" (userid varchar primary key,fname varchar,chat_count int);";

    public static String CREATE_MESSAGE="create table if not exists "+
    TABLE_MESSAGE+"(mid integer primary key autoincrement," +
    "mtext varchar," +"sender varchar , receiver varchar , type varchar)";

    //public static String TABLE_FRIENDS="friends";

    public static String DB_NAME="MessengerDB.db";

    Context context;

    public MyDatabaseHelper(Context context) {
        super(context, DB_NAME, null, 1);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub

        db.execSQL(CREATE_FRIEND);
        db.execSQL(CREATE_MESSAGE);

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

    }

} 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:10:59.373

要使 notifyDataSetChanged() 起作用，您必须使用它的添加/删除方法而不是实际列表将对象添加到 ArrayAdapter 本身。

您的 onResume 应如下所示：

```
@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();

    //al=mds.getFriends();
    aa.clear();
    aa.addAll(mds.getFriends());
    aa.notifyDataSetChanged();

    System.out.println("I m in on resume function");
    System.out.println("Value of arraylist in on resume fun"+al);
} 
```

ArrayAdapter 在启动时会创建列表的副本，因此在调用 notifyDataSetChanged 时，它只会查看自己的副本，而不是源列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:55:09.747

你必须尝试这样的 notifyDataSetChanged() 方法

有时，当您未在 adpter 中加载新数据时，它不会加载数据，因此在调用此方法之前，您必须在 onresume() 方法而不是 onCreate() 中加载 arrayadpter 中的数据。

```
public void refresh()
    {

        mHandler.postDelayed(new Runnable() {

            @Override
            public void run() {

                ((EfficentAdapter)list.getAdapter()).notifyDataSetChanged(); 
                }           
        }, 100);

    } 
```

# sql - 根据另一个表中存在的字符串更新二进制数据类型

> ID：10105988
> 
> 赞同：0
> 
> 时间：2012-04-11T12:34:16.957
> 
> 标签：sql, tsql

我在代码列表和主表之间存在多对多关系，主表中包含与人员相关的信息。有几个不同的代码具有不同的文本值，它们都是同一事物的变体。我想检查`ANY`它们是否存在。我这样做的方法是使用`LIKE%what i'm looking for%`. 我想根据我的其他表之一中存在某个字符串这一事实来更新我的主表中的二进制值。
![在此处输入图像描述](../Images/b468c89e92b8fce1854a5f0fac1b84d2.png)

这是我可以在不弄乱任何东西的情况下解决它的查询。

```
UPDATE tblVisits
SET variableOfInterest=1
FROM tblVisits INNER JOIN
icd_jxn ON tblVisits.kha_id = icd_jxn.kha_id INNER JOIN
tblICD on icd_jxn.icd_fk=tblICD.ICD_ID
WHERE (tblICD.Descrip LIKE N'%text of interest%') 
```

由于有这么多不同的代码具有共同的属性，即在其描述中包含特定字符串，我觉得这将是最好的方法，而不是使用大量的 OR 语句。在我决定在 tblVisits 中添加我的 'variableofInterest' 之前，这是一个较旧的模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:41:45.407

你可以重写它`EXISTS`：

```
UPDATE tblVisits
SET variableOfInterest = 1
FROM tblVisits 
WHERE EXISTS
      ( SELECT *
        FROM icd_jxn 
          INNER JOIN tblICD 
            ON icd_jxn.icd_fk = tblICD.ICD_ID
        WHERE tblICD.Descrip LIKE N'%text of interest%'
          AND tblVisits.kha_id = icd_jxn.kha_id
      ) 
```

# c# - 如何以编程方式扩展 Jquery 滑块面板？

> ID：10105989
> 
> 赞同：0
> 
> 时间：2012-04-11T12:34:19.297
> 
> 标签：c#, javascript, jquery, asp.net-2.0

我有用于登录的 JQuery Silder 面板 | 注册选项。为了参考，我已经包含了这个滑块的演示[Jquery Login | 注册滑块面板](http://web-kreation.com/tutorials/nice-clean-sliding-login-panel-built-with-jquery/)

实际的问题是如何以编程方式扩展此滑块，当位于文字控件在登录部分或注册新帐户部分具有值时。为了理解这个问题，我把我的设计代码。

```
 <asp:Panel ID="Panel_Login_Register" runat="server" CssClass="Panel_Slide">
    <div id="toppanel">
    <div id="panel">
        <div class="content clearfix">
            <asp:Panel ID="Panel_Welcome" runat="server" CssClass="left">
                <h1>Welcome to Om Investment</h1>
                <p class="grey">Om Investment Stock Market Research Trading &amp; Advisory, the most successful market
                trading team and has predicted the market direction always ahead of others, our
                powerful and high volume Market Gains trading team will deliver high returns to
                the Capital invested by clients, We have a consistent success ratio genuine more than
                80% in every type of Market.</p>
            </asp:Panel>
            <asp:Panel ID="Panel_Login" runat="server" CssClass="left" Width="200px" DefaultButton="btnlogin">
                    <h1>Member Login</h1>
                     <asp:Label ID="Label2" runat="server" Text="Username:" CssClass="grey" AssociatedControlID="txtusername"></asp:Label>
                      <cc1:TextBoxWatermarkExtender ID="TextBoxWatermarkExtender4" runat="server" TargetControlID="txtusername" WatermarkText="Enter username here"/>
                    <asp:TextBox ID="txtusername" runat="server" CssClass="field" ValidationGroup="Login"></asp:TextBox>
                  <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" ErrorMessage="<span style='color:Black'><b>Required Field Missing</b><br />Username is required.</span>"
                                                ControlToValidate="txtusername" ValidationGroup="Login" Display="None" SetFocusOnError="true"></asp:RequiredFieldValidator>
                                            <cc1:ValidatorCalloutExtender ID="ValidatorCalloutExtender2" runat="server" TargetControlID="RequiredFieldValidator2"
                                                Width="200px" HighlightCssClass="highlight" WarningIconImageUrl="images/1329542890_dialog-warning.png"
                                                CloseImageUrl="images/close.gif">
                                            </cc1:ValidatorCalloutExtender>
                    <asp:Label ID="Label3" runat="server" Text="Password:" CssClass="grey" AssociatedControlID="txtpassword"></asp:Label>
                     <cc1:TextBoxWatermarkExtender ID="TextBoxWatermarkExtender12" runat="server" TargetControlID="txtpassword"
                                                WatermarkText="123456789"/>
                    <asp:TextBox ID="txtpassword" runat="server" CssClass="field" ValidationGroup="Login" TextMode="Password"></asp:TextBox>
                    <asp:RequiredFieldValidator ID="RequiredFieldValidator3" runat="server" ErrorMessage="<span style='color:Black'><b>Required Field Missing</b><br />Password is required.</span>"
                                                    ControlToValidate="txtpassword" ValidationGroup="Login" Display="None"></asp:RequiredFieldValidator>
                                            <cc1:ValidatorCalloutExtender ID="ValidatorCalloutExtender3" runat="server" TargetControlID="RequiredFieldValidator3"
                                                Width="200px" HighlightCssClass="highlight" WarningIconImageUrl="images/1329542890_dialog-warning.png"
                                                CloseImageUrl="images/close.gif">
                                            </cc1:ValidatorCalloutExtender><br />
                    <asp:CheckBox ID="chk_remember" runat="server"/>&nbsp;<asp:Label ID="Label4" runat="server" Text="Remeber Me ?" CssClass="grey"></asp:Label>
                    <div class="clear"></div>
                    <asp:Button ID="btnlogin" runat="server" Text="Login" CssClass="bt_login" ValidationGroup="Login" OnClick="btnlogin_Click" />
                    <a class="lost-pwd" href="password_recover.aspx"> Lost your password ?</a>
                    <div class="clear"></div>
                    <p class="grey"><asp:Literal ID="ltr_error" runat="server"></asp:Literal></p>
            </asp:Panel>
     <asp:Panel ID="Panel_Register" runat="server" CssClass="left right" DefaultButton="btn_register" Width="356px">            
                    <h1>Create New Account</h1>             
      <p class="grey">(All the fields are compulsory)</p>
           <table><tr><td><asp:Label id="Label6" runat="server" Text="Your Name*" AssociatedControlID="txtname" CssClass="grey"></asp:Label> <cc1:TextBoxWatermarkExtender id="TextBoxWatermarkExtender5" watermarkText="Enter your name" runat="server" TargetControlID="txtname">
              </cc1:TextBoxWatermarkExtender> <cc1:FilteredTextBoxExtender id="FilteredTextBoxExtender2" runat="server" TargetControlID="txtname" ValidChars=" ,." FilterType="UppercaseLetters,LowercaseLetters,Custom">
              </cc1:FilteredTextBoxExtender></td></tr>
              <tr><td><asp:TextBox id="txtname" runat="server" CssClass="field" ValidationGroup="SignUp" MaxLength="50"></asp:TextBox> <asp:RequiredFieldValidator id="RequiredFieldValidator5" runat="server" ValidationGroup="SignUp" SetFocusOnError="true" Display="None" ControlToValidate="txtname" ErrorMessage="<span style='color:Black'><b>Required Field Missing</b><br />Your name is required.</span>"></asp:RequiredFieldValidator> <cc1:ValidatorCalloutExtender id="ValidatorCalloutExtender4" runat="server" TargetControlID="RequiredFieldValidator5" Width="200px" CloseImageUrl="images/close.gif" WarningIconImageUrl="images/1329542890_dialog-warning.png" HighlightCssClass="highlight">
                        </cc1:ValidatorCalloutExtender></td></tr>                                      
            <tr><td><asp:Label id="Label7" runat="server" Text="Your Username*" AssociatedControlID="txtusername1" CssClass="grey"></asp:Label> <cc1:TextBoxWatermarkExtender id="TextBoxWatermarkExtender6" watermarkText="Enter your username" runat="server" TargetControlID="txtusername1">
            </cc1:TextBoxWatermarkExtender> <cc1:FilteredTextBoxExtender id="FilteredTextBoxExtender3" runat="server" TargetControlID="txtusername" FilterType="UppercaseLetters,LowercaseLetters,Numbers,Custom">
              </cc1:FilteredTextBoxExtender></td></tr>
             <tr><td><asp:TextBox id="txtusername1" runat="server" CssClass="field" ValidationGroup="SignUp" MaxLength="50"></asp:TextBox><asp:CustomValidator ID="CustomValidator1" runat="server" ControlToValidate="txtusername1" OnServerValidate="CustomValidator1_ServerValidate" SetFocusOnError="True" ValidationGroup="SignUp" CssClass="grey" ErrorMessage="<span style='color:Gray'>Username is already exist</span>"></asp:CustomValidator></td></tr>
             <tr><td><asp:RequiredFieldValidator id="RequiredFieldValidator6" runat="server" ValidationGroup="SignUp" SetFocusOnError="true" Display="None" ControlToValidate="txtusername1" ErrorMessage="<span style='color:Black'><b>Required Field Missing</b><br />Your username is required.</span>"></asp:RequiredFieldValidator> <cc1:ValidatorCalloutExtender id="ValidatorCalloutExtender7" runat="server" TargetControlID="RequiredFieldValidator6" Width="200px" CloseImageUrl="images/close.gif" WarningIconImageUrl="images/1329542890_dialog-warning.png" HighlightCssClass="highlight">
                                                      </cc1:ValidatorCalloutExtender></td></tr>
             <tr><td><asp:Label id="Label9" runat="server" Text="Your Account Password*" AssociatedControlID="txtpass" CssClass="grey"></asp:Label> <cc1:FilteredTextBoxExtender id="FilteredTextBoxExtender4" runat="server" TargetControlID="txtpass" ValidChars="." FilterType="UppercaseLetters,LowercaseLetters,Numbers,Custom" InvalidChars=" ,'">
              </cc1:FilteredTextBoxExtender> <cc1:TextBoxWatermarkExtender id="TextBoxWatermarkExtender7" watermarkText="1234567890" runat="server" TargetControlID="txtpass">
            </cc1:TextBoxWatermarkExtender></td></tr>
            <tr><td><asp:TextBox id="txtpass" runat="server" CssClass="field" ValidationGroup="SignUp" MaxLength="15" TextMode="Password"></asp:TextBox> <cc1:PasswordStrength id="PasswordStrength1" runat="server" TargetControlID="txtpass" RequiresUpperAndLowerCaseCharacters="false" MinimumSymbolCharacters="0" MinimumNumericCharacters="0" StrengthStyles="TextIndicator_TextBox1_Strength1;TextIndicator_TextBox1_Strength2;TextIndicator_TextBox1_Strength3;TextIndicator_TextBox1_Strength4;TextIndicator_TextBox1_Strength5" TextStrengthDescriptions="Very Poor;Weak;Average;Strong;Excellent" HelpStatusLabelID="TextBox1_HelpLabel" PrefixText="Strength:" PreferredPasswordLength="10" StrengthIndicatorType="Text" DisplayPosition="RightSide"></cc1:PasswordStrength> <asp:RequiredFieldValidator id="RequiredFieldValidator7" runat="server" ValidationGroup="SignUp" SetFocusOnError="true" Display="None" ControlToValidate="txtpass" ErrorMessage="<span style='color:Black'><b>Required Field Missing</b><br />Your account password is required.</span>"></asp:RequiredFieldValidator> <cc1:ValidatorCalloutExtender id="ValidatorCalloutExtender8" runat="server" TargetControlID="RequiredFieldValidator7" Width="200px" CloseImageUrl="images/close.gif" WarningIconImageUrl="images/1329542890_dialog-warning.png" HighlightCssClass="highlight">
                                                       </cc1:ValidatorCalloutExtender></td></tr>
            <tr><td><asp:Label id="Label10" runat="server" Text="Confirm Password*" AssociatedControlID="txtcpass" CssClass="grey"></asp:Label><cc1:TextBoxWatermarkExtender id="TextBoxWatermarkExtender8" watermarkText="1234567890" runat="server" TargetControlID="txtcpass">
            </cc1:TextBoxWatermarkExtender> <cc1:FilteredTextBoxExtender id="FilteredTextBoxExtender5" runat="server" TargetControlID="txtpass" ValidChars="." FilterType="UppercaseLetters,LowercaseLetters,Numbers,Custom" InvalidChars=" ,'">
              </cc1:FilteredTextBoxExtender></td></tr>
            <tr><td><asp:TextBox id="txtcpass" runat="server" CssClass="field" ValidationGroup="SignUp" MaxLength="15" TextMode="Password"></asp:TextBox> <asp:RequiredFieldValidator id="RequiredFieldValidator8" runat="server" ValidationGroup="SignUp" SetFocusOnError="true" Display="None" ControlToValidate="txtcpass" ErrorMessage="<span style='color:Black'><b>Required Field Missing</b><br />Confirm password is required.</span>"></asp:RequiredFieldValidator> <asp:CompareValidator id="CompareValidator1" runat="server" ValidationGroup="SignUp" SetFocusOnError="true" Display="None" ControlToValidate="txtcpass" ErrorMessage="<span style='color:Black'><b>Entered Field is Invalid</b><br />Your new password and confirm password doesn't mathched.</span>" ControlToCompare="txtpass"></asp:CompareValidator> <cc1:ValidatorCalloutExtender id="ValidatorCalloutExtender9" runat="server" TargetControlID="RequiredFieldValidator8" Width="200px" CloseImageUrl="images/close.gif" WarningIconImageUrl="images/1329542890_dialog-warning.png" HighlightCssClass="highlight">
                                                       </cc1:ValidatorCalloutExtender> <cc1:ValidatorCalloutExtender id="ValidatorCalloutExtender11" runat="server" TargetControlID="CompareValidator1" Width="200px" CloseImageUrl="images/close.gif" WarningIconImageUrl="images/1329542890_dialog-warning.png" HighlightCssClass="highlight">
                                                       </cc1:ValidatorCalloutExtender></td></tr>
          <tr><td><asp:Label id="Label12" runat="server" Text="Your Birth Date*" AssociatedControlID="txtbdate" CssClass="grey"></asp:Label> <cc1:TextBoxWatermarkExtender id="TextBoxWatermarkExtender10" watermarkText="Enter your birthdate" runat="server" TargetControlID="txtbdate">
          </cc1:TextBoxWatermarkExtender></td></tr>
          <tr><td><asp:TextBox id="txtbdate" runat="server" CssClass="field" ValidationGroup="SignUp"></asp:TextBox> <asp:RequiredFieldValidator id="RequiredFieldValidator10" runat="server" ValidationGroup="SignUp" SetFocusOnError="true" Display="None" ControlToValidate="txtbdate" ErrorMessage="<span style='color:Black'><b>Required Field Missing</b><br />Your birthdate is required.</span>"></asp:RequiredFieldValidator> <asp:RegularExpressionValidator id="RegularExpressionValidator3" runat="server" ValidationGroup="SignUp" SetFocusOnError="true" Display="None" ControlToValidate="txtbdate" ErrorMessage="<span style='color:Black'><b>Entered Field is Invalid</b><br/>Birth date format should be like: DD/MM/yyyy</span>" ValidationExpression="^(((0[1-9]|[12]\d|3[01])\/(0[13578]|1[02])\/((19|[2-9]\d)\d{2}))|((0[1-9]|[12]\d|30)\/(0[13456789]|1[012])\/((19|[2-9]\d)\d{2}))|((0[1-9]|1\d|2[0-8])\/02\/((19|[2-9]\d)\d{2}))|(29\/02\/((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))))$"></asp:RegularExpressionValidator> <cc1:CalendarExtender id="CalendarExtender1" runat="server" TargetControlID="txtbdate" PopupButtonID="img_cal" Format="dd/MM/yyyy">
              </cc1:CalendarExtender> <cc1:MaskedEditExtender id="MaskedEditExtender5" runat="server" TargetControlID="txtbdate" ErrorTooltipEnabled="True" AcceptNegative="Left" DisplayMoney="Left" MaskType="Date" OnInvalidCssClass="MaskedEditError" OnFocusCssClass="MaskedEditFocus" MessageValidatorTip="true" Mask="99/99/9999"></cc1:MaskedEditExtender> <cc1:ValidatorCalloutExtender id="ValidatorCalloutExtender13" runat="server" TargetControlID="RequiredFieldValidator10" Width="200px" CloseImageUrl="images/close.gif" WarningIconImageUrl="images/1329542890_dialog-warning.png" HighlightCssClass="highlight">
                                                       </cc1:ValidatorCalloutExtender> <cc1:ValidatorCalloutExtender id="ValidatorCalloutExtender14" runat="server" TargetControlID="RegularExpressionValidator3" Width="200px" CloseImageUrl="images/close.gif" WarningIconImageUrl="images/1329542890_dialog-warning.png" HighlightCssClass="highlight">
                                                       </cc1:ValidatorCalloutExtender></td></tr>
          <tr><td><asp:Label id="Label11" runat="server" Text="Your e-mail*" AssociatedControlID="txtemail" CssClass="grey"></asp:Label><cc1:TextBoxWatermarkExtender id="TextBoxWatermarkExtender9" watermarkText="Enter your email" runat="server" TargetControlID="txtemail">
          </cc1:TextBoxWatermarkExtender></td></tr>
          <tr>
          <td><asp:TextBox id="txtemail" runat="server" CssClass="field" ValidationGroup="SignUp" MaxLength="50"></asp:TextBox><asp:CustomValidator ID="CustomValidator2" runat="server" ValidationGroup="SignUp" ControlToValidate="txtemail" SetFocusOnError="true" OnServerValidate="CustomValidator2_ServerValidate" CssClass="grey" ErrorMessage="<span style='color:Gray'>Email is already exist</span>"></asp:CustomValidator></td></tr>
          <tr><td><asp:RequiredFieldValidator id="RequiredFieldValidator9" runat="server" ValidationGroup="SignUp" SetFocusOnError="true" Display="None" ControlToValidate="txtemail" ErrorMessage="<span style='color:Black'><b>Required Field Missing</b><br />Your email is required.</span>"></asp:RequiredFieldValidator> <asp:RegularExpressionValidator id="RegularExpressionValidator2" runat="server" ValidationGroup="SignUp" SetFocusOnError="true" Display="None" ControlToValidate="txtemail" ErrorMessage="<span style='color:Black'><b>Entered Field is Invalid</b><br/>Email format should be like: name@domain.com</span>" ValidationExpression="^[\w-\.]{1,}\@([\da-zA-Z-]{1,}\.){1,}[\da-zA-Z-]{2,6}$"></asp:RegularExpressionValidator> <cc1:ValidatorCalloutExtender id="ValidatorCalloutExtender10" runat="server" TargetControlID="RequiredFieldValidator9" Width="200px" CloseImageUrl="images/close.gif" WarningIconImageUrl="images/1329542890_dialog-warning.png" HighlightCssClass="highlight">
                                                       </cc1:ValidatorCalloutExtender> <cc1:ValidatorCalloutExtender id="ValidatorCalloutExtender12" runat="server" TargetControlID="RegularExpressionValidator2" Width="200px" CloseImageUrl="images/close.gif" WarningIconImageUrl="images/1329542890_dialog-warning.png" HighlightCssClass="highlight">
                                                       </cc1:ValidatorCalloutExtender></td></tr>
          <tr><td><asp:Label id="Label13" runat="server" Text="Your Phone no*" AssociatedControlID="txtphoneno" CssClass="grey"></asp:Label> <cc1:TextBoxWatermarkExtender id="TextBoxWatermarkExtender11" watermarkText="Enter your phone no" runat="server" TargetControlID="txtphoneno">
          </cc1:TextBoxWatermarkExtender> <cc1:FilteredTextBoxExtender id="FilteredTextBoxExtender6" runat="server" TargetControlID="txtphoneno" FilterType="Numbers">
              </cc1:FilteredTextBoxExtender></td></tr>
          <tr>
          <td><asp:TextBox id="txtphoneno" runat="server" CssClass="field" ValidationGroup="SignUp" MaxLength="10"></asp:TextBox><asp:CustomValidator ID="CustomValidator3" runat="server" ValidationGroup="SignUp" ControlToValidate="txtphoneno" SetFocusOnError="true" OnServerValidate="CustomValidator3_ServerValidate" CssClass="grey" ErrorMessage="<span style='color:Gray'>Phone no is already exist</span>"></asp:CustomValidator></td>
          </tr>
          <tr><td><asp:RequiredFieldValidator id="RequiredFieldValidator11" runat="server" ValidationGroup="SignUp" SetFocusOnError="true" Display="None" ControlToValidate="txtphoneno" ErrorMessage="<span style='color:Black'><b>Required Field Missing</b><br />Your phone no is required.</span>"></asp:RequiredFieldValidator><asp:RegularExpressionValidator id="RegularExpressionValidator4" runat="server" ValidationGroup="SignUp" SetFocusOnError="true" Display="None" ControlToValidate="txtphoneno" ErrorMessage="<span style='color:Black'><b>Entered Field is Invalid</b><br/>Phone no format should like : 9000000098<br/> +91 Not Needed<span>" ValidationExpression="^((\\+91-?)|0)?[0-9]{10}$"></asp:RegularExpressionValidator> <cc1:ValidatorCalloutExtender id="ValidatorCalloutExtender15" runat="server" TargetControlID="RequiredFieldValidator11" Width="200px" CloseImageUrl="images/close.gif" WarningIconImageUrl="images/1329542890_dialog-warning.png" HighlightCssClass="highlight">
                                                       </cc1:ValidatorCalloutExtender> <cc1:ValidatorCalloutExtender id="ValidatorCalloutExtender16" runat="server" TargetControlID="RegularExpressionValidator4" Width="200px" CloseImageUrl="images/close.gif" WarningIconImageUrl="images/1329542890_dialog-warning.png" HighlightCssClass="highlight">
                                                       </cc1:ValidatorCalloutExtender></td></tr>
           <tr><td><asp:Button ID="btn_register" runat="server" Text="Register" ValidationGroup="SignUp" CssClass="bt_register" OnClick="btn_register_Click"/></td></tr>
          </table>
          <div class="clear"></div>
          <p class="grey"><asp:Literal ID="ltr_message2" runat="server"></asp:Literal></p>
         </asp:Panel>
        </div>
</div>
    <div class="tab">
        <ul class="login">
            <li class="left">&nbsp;</li>
            <li>Hello Guest!</li><li class="sep">|</li><li id="toggle">
                <a id="open" class="open" href="#">Log In | Register</a>
                <a id="close" style="display: none;" class="close" href="#">Close Panel</a>         
            </li>
            <li class="right">&nbsp;</li>
        </ul> 
    </div> 
</div>
 </asp:Panel> 
```

此滑块工作正常，但我不知道如果其中一个字面值具有价值，如何自动扩展此面板。

在注册新帐户面板中，我也有自定义验证器，如果三个自定义验证器之一抛出错误消息，我必须找到扩展此面板的方法。

有关详细信息，请参阅我还包括 js/slide.js 文件内容：

```
$(document).ready(function() {

    // Expand Panel
    $("#open").click(function(){
        $("div#panel").slideDown("slow");

    }); 

    // Collapse Panel
    $("#close").click(function(){
        $("div#panel").slideUp("slow"); 
    });     

    // Switch buttons from "Log In | Register" to "Close Panel" on click
    $("#toggle a").click(function () {
        $("#toggle a").toggle();
    });     

}); 
```

***_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __*更新代码*__ *_* __ *_* __ *_* __ *_* _ *_* __ *_* __ *_*** 此代码是关于我如何将客户错误附加到文字控制

```
protected void btnlogin_Click(object sender, EventArgs e)
{
    if (Page.IsValid)
    {

        using (SqlConnection conn = Util.GetConnection())
        {
            conn.Open();
            SqlCommand cmd = new SqlCommand("sp_CheckUserAccount", conn);
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.Add("@UserName", SqlDbType.VarChar).Value = txtusername.Text.Trim();
            cmd.Parameters.Add("@pass", SqlDbType.VarChar).Value = txtpassword.Text.Trim();
            cmd.Parameters.Add("@Error", SqlDbType.NVarChar, 100).Direction = ParameterDirection.Output;
            SqlParameter sqlParam = cmd.Parameters.Add("@Return Value", SqlDbType.Int);
            sqlParam.Direction = System.Data.ParameterDirection.ReturnValue;
            cmd.ExecuteNonQuery();
            int returnValue = (int)cmd.Parameters["@Return Value"].Value;
            if (returnValue == 1)
            {
                if (chk_remember.Checked == true)
                {
                    conn.Close();
                    cmd.Dispose();
                    conn.Open();
                    SqlCommand cmd1 = new SqlCommand("sp_Read_User_Type", conn);
                    cmd1.CommandType = CommandType.StoredProcedure;
                    cmd1.Parameters.Add(new SqlParameter("@Userid", SqlDbType.VarChar, 50, "Id"));
                    cmd1.Parameters["@Userid"].Value = txtusername.Text.Trim();
                    SqlDataReader reader = cmd1.ExecuteReader();
                    while (reader.Read())
                    {
                        if (reader["Type_name"].ToString() == "Admin")
                        {
                            Response.Cookies["UName"].Value = txtusername.Text;
                            Response.Cookies["PWD"].Value = txtpassword.Text;
                            Response.Cookies["UName"].Expires = DateTime.Now.AddMonths(2);
                            Response.Cookies["PWD"].Expires = DateTime.Now.AddMonths(2);
                            Session["username"] = reader["Id"].ToString();
                            Response.Redirect("~/Admin/Admin_Landing_page.aspx");
                        }
                        else
                        {
                            Response.Cookies["UName"].Value = txtusername.Text;
                            Response.Cookies["PWD"].Value = txtpassword.Text;
                            Response.Cookies["UName"].Expires = DateTime.Now.AddMonths(2);
                            Response.Cookies["PWD"].Expires = DateTime.Now.AddMonths(2);
                            Session["username"] = reader["Id"].ToString();
                            Response.Redirect("~/EndUser/myhome.aspx");
                        }
                    }
                    reader.Close();
                }
                else
                {
                    Response.Cookies["UName"].Expires = DateTime.Now.AddMonths(-1);
                    Response.Cookies["PWD"].Expires = DateTime.Now.AddMonths(-1);
                    conn.Close();
                    cmd.Dispose();
                    conn.Open();
                    SqlCommand cmd1 = new SqlCommand("sp_Read_User_Type", conn);
                    cmd1.CommandType = CommandType.StoredProcedure;
                    cmd1.Parameters.Add(new SqlParameter("@Userid", SqlDbType.VarChar, 50, "Id"));
                    cmd1.Parameters["@Userid"].Value = txtusername.Text.Trim();
                    SqlDataReader reader = cmd1.ExecuteReader();
                    while (reader.Read())
                    {
                        if (reader["Type_name"].ToString() == "Admin")
                        {
                            Session["username"] = reader["Id"].ToString();
                            Response.Redirect("~/Admin/Admin_Landing_page.aspx");
                        }
                        else
                        {
                            Session["username"] = reader["Id"].ToString();
                            Response.Redirect("~/EndUser/myhome.aspx");
                        }
                    }
                    reader.Close();
                }

            }
            else
            {
                ltr_error.Text = (string)cmd.Parameters["@Error"].Value;                                        }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:43:18.957

[http://www.roorkichap.com/sliding-login-panel-built-with-jquery-asp-net-vb-net-and-sql-server-2000/](http://www.roorkichap.com/sliding-login-panel-built-with-jquery-asp-net-vb-net-and-sql-server-2000/) 下载源代码并查看

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:06:44.980

**更新版本：** 文字不会在页面上生成任何标签。因此，您需要为

包装你的文字的标签。（或者更适合你的东西）

```
<p id="p_error" class="grey"><asp:Literal ID="ltr_error" runat="server"></asp:Literal></p> 
```

之后，您可以使用 js 检查任何文本。

```
$(document).ready(function() {
    if ($("#p_error").text() != "") //choose condition more suitable for you
        $("div#panel").slideDown("slow");
}); 
```

# c# - 如何将 DataTable 值检索到 在 ASP.NET 中

> ID：10105990
> 
> 赞同：0
> 
> 时间：2012-04-11T12:34:19.593
> 
> 标签：c#, asp.net

我是 ASP.NET 的新手，我正在我的应用程序中创建一个搜索框。

例如：如果用户在文本框中输入“abc”，那么文本框将从以“abc”开头的数据库中获取数据。我将此数据传递给`DataTable`.

它工作正常，

这是我的代码片段：

```
DataTable result = new DataTable();`

protected void TextBox1_TextChanged(object sender, EventArgs e)
{
    connString = System.Configuration.ConfigurationManager.ConnectionStrings["MyConsString"].ConnectionString;
    SqlConnection conn = new SqlConnection(connString);
    conn.Open();

    string query = string.Format("SELECT DISTINCT Scrip FROM dbo.SearchBoxData where Scrip Like '{0}%'", TextBox1.Text);

    SqlCommand cmd = new SqlCommand(query, conn);

    result.Load(cmd.ExecuteReader());

    conn.Close();
} 
```

现在我想在我的`<div>`标签中检索所有这些数据。我应该如何检索和显示？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:40:38.360

您应该使用数据绑定控件，例如 ListView 或 GridView。我建议创建一个单独的控件来保存列表中的一行，并使用 RowDataBound 方法来分配行数据。使用 ListView 的 ItemDatabound 事件的示例 - [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.itemdatabound.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.itemdatabound.aspx)

附带说明一下，您的代码容易受到 SQL 注入的攻击

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T12:46:31.090

您可能会更好地使用数据绑定控件，例如 ListView（或 GridView）控件。这样，您可以使用数据表中的数据创建所需的漂亮布局。

例如，可以使用 ListView：

```
<asp:ListView ID="lvwItems" runat="server" ItemPlaceholderID="plhItems">
    <LayoutTemplate>
        <div>
             <asp:PlaceHolder ID="plhItems" runat="server"></asp:PlaceHolder>
        </div>
    </LayoutTemplate>
    <ItemTemplate>
        <div>
            <%# Eval("ColumnFromDataTable")%>
        </div>
    </ItemTemplate>
</asp:ListView> 
```

在你后面的代码中，你可以这样做：

```
lvwItems.DataSource = result;
lvwItems.DataBind(); 
```

备注：代码只是我的想法，可能包含一些错误

# c# - 代码被一遍又一遍地重用，一种更易于管理的方式？

> ID：10105991
> 
> 赞同：0
> 
> 时间：2012-04-11T12:34:20.167
> 
> 标签：c#, wpf, winforms

所以我注意到我开始一遍又一遍地重用代码，而且它开始看起来很丑。每次单击按钮我都注意到除了 uri 之外，一些代码（对于 POST）是相同的。有什么办法可以更好地管理下面的代码吗？

```
 private void AddTag_Click(object sender, EventArgs e)
    {
        string uriAddTagtoGroup = string.Format("http://localhost:8000/Service/AddTagtoGroup/{0}/{1}", textBox6.Text, textBox7.Text);
        byte[] arr = Encoding.UTF8.GetBytes(uriAddTagtoGroup);
        HttpWebRequest req = (HttpWebRequest)WebRequest.Create(uriAddTagtoGroup);
        req.Method = "POST";
        req.ContentType = "application/xml";
        req.ContentLength = arr.Length;
        Stream reqStrm = req.GetRequestStream();
        reqStrm.Write(arr, 0, arr.Length);
        reqStrm.Close();
        HttpWebResponse resp = (HttpWebResponse)req.GetResponse();
        MessageBox.Show(resp.StatusDescription);
        reqStrm.Close();
        resp.Close();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T12:43:29.650

这段代码可以被拉入一个带有一些参数的方法中，用于改变参数：

```
private void AddTag_Click(object sender, EventArgs e)
{
    string uriAddTagtoGroup = string.Format("http://localhost:8000/Service/AddTagtoGroup/{0}/{1}", textBox6.Text, textBox7.Text);
    PerformPost(uriAddTagtoGroup);
}

public void PerformPost(string uri)
{
    byte[] arr = Encoding.UTF8.GetBytes(uri);
    HttpWebRequest req = (HttpWebRequest)WebRequest.Create(uri);
    req.Method = "POST";
    req.ContentType = "application/xml";
    req.ContentLength = arr.Length;
    Stream reqStrm = req.GetRequestStream();
    reqStrm.Write(arr, 0, arr.Length);
    reqStrm.Close();
    HttpWebResponse resp = (HttpWebResponse)req.GetResponse();
    MessageBox.Show(resp.StatusDescription);
    reqStrm.Close();
    resp.Close();
} 
```

对于一次性的东西（实现`IDisposable`的东西），还有`using`关键字：

```
using (var resp = req.GetResponse())
{
    MessageBox.Show(resp.StatusDescription);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T12:43:57.980

正如其他人在评论中指出的那样，只需将其封装成一个方法：

```
private void AddTag_Click(object sender, EventArgs e)
{
    string uriAddTagtoGroup = 
       string.Format("http://localhost:8000/Service/AddTagtoGroup/{0}/{1}",
          textBox6.Text, textBox7.Text);
    RequestResponse(uriAddTagtoGroup)
}

private void RequestResponse(string uriAddTagtoGroup)
{
    byte[] arr = Encoding.UTF8.GetBytes(uriAddTagtoGroup);
    HttpWebRequest req = (HttpWebRequest)WebRequest.Create(uriAddTagtoGroup);
    req.Method = "POST";
    req.ContentType = "application/xml";
    req.ContentLength = arr.Length;
    using(Stream reqStrm = req.GetRequestStream())
    {
       reqStrm.Write(arr, 0, arr.Length);
    }
    using(HttpWebResponse resp = (HttpWebResponse)req.GetResponse())
    {
       MessageBox.Show(resp.StatusDescription);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T12:44:17.333

是的，您可以创建一个静态类，可以在一个单独的文件中，并在您需要调用 post 例程时调用它：

```
private void AddTag_Click(object sender, EventArgs e)
{
    string uriAddTagtoGroup = 
        string.Format("http://localhost:8000/Service/AddTagtoGroup/{0}/{1}",
            textBox6.Text, textBox7.Text);
    PostRoutine(uriAddTagtoGroup);        
}

public static void PostRoutine(string uri)
{
    try
    {
        byte[] arr = Encoding.UTF8.GetBytes(uri);
        HttpWebRequest req = (HttpWebRequest)WebRequest.Create(uri);
        req.Method = "POST";
        req.ContentType = "application/xml";
        req.ContentLength = arr.Length;
        Stream reqStrm = req.GetRequestStream();
        reqStrm.Write(arr, 0, arr.Length);
        reqStrm.Close();
        HttpWebResponse resp = (HttpWebResponse)req.GetResponse();
        MessageBox.Show(resp.StatusDescription);
        reqStrm.Close();
        resp.Close();
    }
    catch(Exception ex)
    {    
        MessageBox.Show(ex.Message);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T12:44:03.963

如何创建一个接受一个参数的方法 - URI

```
private void AddTag_Click(object sender, EventArgs e)
{
   string uriAddTagtoGroup = 
      string.Format("http://localhost:8000/Service/AddTagtoGroup/{0}/{1}",
         textBox6.Text, textBox7.Text);
   someMethod(uriAddTagtoGroup);
} 

private void someMethod(String uriAddTagtoGroup)
{
    byte[] arr = Encoding.UTF8.GetBytes(uriAddTagtoGroup);
    HttpWebRequest req = (HttpWebRequest)WebRequest.Create(uriAddTagtoGroup);
    req.Method = "POST";
    req.ContentType = "application/xml";
    req.ContentLength = arr.Length;
    Stream reqStrm = req.GetRequestStream();
    reqStrm.Write(arr, 0, arr.Length);
    reqStrm.Close();
    HttpWebResponse resp = (HttpWebResponse)req.GetResponse();
    MessageBox.Show(resp.StatusDescription);
    reqStrm.Close();
    resp.Close();
} 
```

# asp.net-mvc-3 - MVC3 和 Ajax 错误“参数字典包含参数的空条目......”

> ID：10105992
> 
> 赞同：1
> 
> 时间：2012-04-11T12:34:21.823
> 
> 标签：asp.net-mvc-3, asp.net-ajax, routes

这让我发疯！

我有一个使用以下脚本使用 Ajax 填充的视图。

```
function loadAcquisitions() {
    var description = $("input#searchDescription").val();
    var startDate = $("input#searchStartDate").val();
    var endDate = $("input#searchEndDate").val();

    $.ajax({
        type: "POST",
        dataType: "json",
        url: "/Acquisition/Find",
        data: { searchDescription: description, searchStartDate: startDate, searchEndDate: endDate },
        success: function (jsonresults) {
            $("tbody#acquisitionContent").find("tr").remove().end();

            var pageCount = parseInt(jsonresults.length / pageSize);
            var startItemIndex = currentPageIndex * pageSize;
            var itemsToDisplay = pageSize + startItemIndex;

            if ((jsonresults.length - startItemIndex) < pageSize) {
                itemsToDisplay = jsonresults.length - startItemIndex + pageSize;
            }

            for (var i = startItemIndex; i < itemsToDisplay; i++) {
                $("tbody#acquisitionContent").append('<tr>' +
                    '<td><a href="/Acquisition/Edit/' + jsonresults[i].AcquisitionID + '">Edit</a></td>' +
                    '<td>' + jsonresults[i].AcquisitionDescription + '</td>' +
                    '<td>' + jsonresults[i].AcquisitionDate + '</td>' +
                    '<td>$' + jsonresults[i].AcquisitionCost + '</td>' +
                    '<td>$' + jsonresults[i].InstallationCost + '</td>' +
                    '<td class="last">$' + jsonresults[i].DeliveryCost + '</td>' +
                    '</tr>');
            }

            $('#pageTitle').text('Page ' + (currentPageIndex + 1) + ' of ' + pageCount);
        },
        error: function (c, b, a) {
            alert(a);
        }
    });
} 
```

请注意，链接是使用以下行生成的：

```
'<td><a href="/Acquisition/Edit/' + jsonresults[i].AcquisitionID + '">Edit</a></td>' 
```

链接标签似乎生成正确，形式为

```
/Acquisition/Edit/123 
```

在控制器中，我有以下名为“编辑”的函数，如下所示：

```
public ActionResult Edit(int acquisitionID)
{
    Acquisition acquisition = Acquisition.Get(acquisitionID);
    return View(acquisition);
} 
```

然后，在 global.asax 中，我为“编辑”定义了一条路线，如下所示：

```
routes.MapRoute(
    "EditAcquisition",
    "{controller}/{action}/{acquisitionID}",
    new { controller = "Acquisition", action = "Edit"}
    ); 
```

我已经尝试更改控制器中的“编辑”功能以接受可以消除错误的可为空的 int（int？）采集ID - 但不会改变将空值传递给控制器​​“编辑”功能的事实来自 Ajax 代码生成的链接。

任何帮助将不胜感激！

谢谢！

**更新：**

当我更新 global.asax 并添加“acquisitionID”作为参数时，如下所示：

```
routes.MapRoute(
    "EditAcquisition",
    "{controller}/{action}/{acquisitionID}",
    new { controller = "Acquisition", action = "Edit", acquisitionID = 0 }
    ); 
```

该应用程序的行为非常不同，因为导航链接现在都附加了“索引”。

```
/Acquisition/ 
```

变成

```
/Acquisition/Index 
```

**更新：**

这是 global.asax 的 RegisterRoutes 方法

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "EditProperty",
        "{controller}/{action}/{propertyID}",
        new {controller = "Property", action = "Edit"}
        );

    routes.MapRoute(
        "EditAssignee",
        "{controller}/{action}/{assigneeID}",
        new {controller = "Assignee", action = "Edit"}
        );

    routes.MapRoute(
        "EditAcquisition",
        "{controller}/{action}/{acquisitionID}",
        new {controller = "Acquisition", action = "Edit"}
        );

    routes.MapRoute(
        "Default",
        "{controller}/{action}/{id}",
        new {controller = "Home", action = "Index", id = UrlParameter.Optional}
        );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:11:16.023

你的路线

```
routes.MapRoute(
        "EditProperty",
        "{controller}/{action}/{propertyID}",
        new {controller = "Property", action = "Edit"}
        ); 
```

匹配所有其他路线..（*因为它们都有相同的模式`/controller/action/id`*）

提供的值`new {controller = "Property", action = "Edit"}`是默认值，而不是允许的值。

因此表单中的任何 url`/somecontroller/someaction/someid`都将与之匹配，并且 id 将被调用`propertyID`。

这就是为什么你没有收到`acquisitionID`

要么只保留那一条路线并将其命名`propertyID`为类似的通用名称`id`并在您的方法中使用它，或者`constraints`用于具有相同模式的所有路线

```
routes.MapRoute(
        "EditProperty",
        "{controller}/{action}/{propertyID}",
        new {controller = "Property", action = "Edit"},
        new {controller = "Property", action="Edit"} // constraint
        ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T12:41:42.840

对于我的路线，我总是包含以下`URLParameter`设置：

```
routes.MapRoute(
                "EditAcquisition",
                "{controller}/{action}/{acquisitionID}",
                new
                {
                    controller = "Acquisition",
                    action = "Edit",
                    acquisitionID = UrlParameter.Optional
                }
            ); 
```

即使参数不是可为空的 int，它也有效。我也做过

```
acquisitionID = 0 
```

恐怕我无法真正解释为什么它会起作用。

**编辑**

其他可以尝试的东西

```
"EditAcquisition",
 "Acquisition/Edit/{acquisitionID}",
 new
 {
     controller = "Acquisition",
     action = "Edit",
     acquisitionID = UrlParameter.Optional
 } 
```

因此，URL 与第二个参数 URL 进行匹配，而不是与默认值的第三个参数匹配。

# git - 使用 bashrc sh 别名创建多个 git 分支

> ID：10105996
> 
> 赞同：1
> 
> 时间：2012-04-11T12:34:51.097
> 
> 标签：git, bash, branch, alias

我正在尝试创建一个为我运行多个命令的别名。具体来说，该命令应该在多个目录中创建多个 git 分支（如果您知道其他方法可以做到这一点，那就太好了。）这是我正在做的事情：

```
alias branches="folder1; git checkout -b $1 ; folder2 ; git checkout -b $1; folder3; git checkout -b $1; folder4; git checkout -b $1" 
```

请注意，folder(n) 表示一个 git repo（一个单独的项目），它本身就是我以前使用过的一个简单的 cd 别名，所以没有问题。

我得到的错误：

```
bash: syntax error near unexpected token `;' 
```

我这样做是因为当我处理影响多个项目的 featureA 时，比如重构，我想确保我总是在 featureA 分支中。

谢谢。

编辑：我想使用 sh 别名。编辑标题以反映这一事实。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:31:51.793

看起来您不想要别名，而是想要一个 shell 函数：

```
function branches {
    cd folder1
    git checkout -b $1
    cd folder2
    git checkout -b $1
    cd folder3
    git checkout -b $1
    cd folder4
    git checkout -b $1
} 
```

或者，更好的是，循环执行：

```
function branches {
    for folder in folder1 folder2 folder3 folder4 ; do
        cd $folder
        git checkout -b $1
    done
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T12:53:40.640

那是 git 别名还是 sh 别名？

如果它是 git 别名，则需要`!`在代码的开头添加 a（以便您的 shell 可以运行它）。

但是从我读过的内容来看，你想要的不是 git 别名而是一个 shell 函数，它将进入每个文件夹并检查所述分支（顺便说一句，这根本不是一个好主意）。

# wcf - 无法建立后端连接

> ID：10105998
> 
> 赞同：0
> 
> 时间：2012-04-11T12:35:08.687
> 
> 标签：wcf

当我的 ASP.NET WCF 服务调用另一个 ASP.NET WCF 服务时，将返回以下内容：

> 无法建立后端连接
> 服务器堆栈跟踪：
> 在 System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc& rpc)
> 在 System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
> at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation) at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)
> 
> 在 [0] 处重新引发异常：在 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 类型) 在 ServiceNameSpace.Service
> 的 System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) 。 ServiceType.getStatus(getStatusRequest 请求)

有任何想法吗？

上午 10:12 更新 - 看了一会儿之后：我的猜测是其他服务不喜欢我们传递给它的某些数据。我认为它没有验证输入，然后在空引用或数据库查询上引发异常。

PS。由于安全\隐私原因，最后一个堆栈跟踪行中的组件名称已更改。

PS。我试图进行搜索。我将标题粘贴到搜索框中，然后单击输入框左侧的搜索。没啥事儿。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:45:48.443

我会在调用 wcf 服务的源代码中搜索*Failed toestablish a backside connection*一词。

我相当确定 WCF 堆栈中没有具有该确切术语的内置异常消息。

一旦你找到了引发异常的代码，你就离解决问题更近了一步；）