# StackOverflow 问答 10118000-10118999

# java - 在java中合并两个ArrayList

> ID：10118002
> 
> 赞同：1
> 
> 时间：2012-04-12T05:42:31.847
> 
> 标签：java, arraylist

我在 java 中有两个相同的数组列表，每个列表都有一个字符串值和一个整数计数。现在我必须将这些数组列表合并为一个，如果值存在，我将增加计数，如果值不存在，我将添加值和计数。

问题是，除了在 for 循环中迭代并检查每个值之外，我是否可以优雅地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T05:46:23.220

你不能，有太多的自定义逻辑。迭代、检查和添加——这是最好的方法，并且更具可读性。

从技术上讲，您可以使用`Multiset`from guava ，但是计数由集合本身而不是您自己处理，因此可能需要更多工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T05:49:00.127

> 问题是，除了在 for 循环中迭代并检查每个值之外，我是否可以优雅地做到这一点？

简短的回答是否定的。

您最好使用 HashMap 作为容器，至少合并操作会执行得更快。无论如何，您都需要一个循环。（因为没有 addAll / putAll 可以更新您的计数）。

# php - Mongo db将新字段添加到集合中，如果字段已存在则更新

> ID：10118008
> 
> 赞同：1
> 
> 时间：2012-04-12T05:43:09.787
> 
> 标签：php, mongodb, nosql

我有如下的 mongo 集合数组

```
[_id] => MongoId Object (
    [$id] => 7f841cef13cfcdba230019e2
)
[id] => 33
[name] => Adam
[table] => people 
```

我想将字段计数添加到现有字段

```
[_id] => MongoId Object (
    [$id] => 7f841cef13cfcdba230019e2
)
[id] => 33
[name] => Adam
[count] => 0
[table] => people 
```

如果 count 已设置，则更新数组。

我使用了“更新”方法，但需要更改所有数组而不是一个字段。我怎么能用 php 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T06:17:36.573

如果您询问如何将`count`字段设置为给定值（如果尚不存在则创建字段）而不更改任何其他内容，您可以使用`$set`运算符：

```
{ $set : { count: 0 }} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-09-30T09:28:35.040

使用`update`函数，例如：

```
 $collection->update('$set'=>array("_id" => new MongoID("id of document")), 
                     array("new fiels" => "value of field")); 
```

# java - 基于树的分布数据结构

> ID：10118009
> 
> 赞同：0
> 
> 时间：2012-04-12T05:43:10.240
> 
> 标签：java, data-structures, tree, hashtree

我正在研究一个逻辑，我想创建一个动态目录来导航用户。

用例说，我们必须有最多 50 个节点，最后一个度节点必须有 50 个叶子。（最后一个条目除外）

这种情况适用于 50 x 50、50 x 50 x 50 等。

任何人都可以建议我使用标准数据结构和逻辑来创建这样一个 n = 50 的 n 数组树，以使树具有最小深度并且在叶子处也同样平衡。

例如。

如果我有一个 6310 的列表，那么我们将有 node1 (2500) node2(2500) & node3(1310) 所以这会造成不平衡，即 level1 只有 3 个节点，但 level 2 有等于 50 个节点，因此分配失败。

在这里，我们还需要 level1 使其具有前 50 个范围，然后是 level2 中的分布。最后一个节点可以保持不均匀。

# java - Selenium WebDriver java测试中的StaleElementReferenceException

> ID：10118013
> 
> 赞同：3
> 
> 时间：2012-04-12T05:43:27.617
> 
> 标签：java, selenium, selenium-webdriver

```
org.openqa.selenium.StaleElementReferenceException：在缓存中找不到元素 - 页面可能在查找后已更改
命令持续时间或超时：30.02 秒
有关此错误的文档，请访问：http://seleniumhq.org/exceptions/stale_element_reference.html
构建信息：版本：'2.18.0'，修订：'15704'，时间：'2012-01-27 17:37:17'
系统信息：os.name：'Windows XP'，os.arch：'x86'，os.version：'5.1'，java.version：'1.6.0_17'
驱动程序信息：driver.version：RemoteWebDriver
    在 sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    在 sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    在 sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    在 java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    在 org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:147)
    在 org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:113)
    在 org.openqa.selenium.remote.RemoteWebDriver.execute（RemoteWebDriver.java:439）
    在 org.openqa.selenium.remote.RemoteWebElement.execute(RemoteWebElement.java:231)
    在 org.openqa.selenium.remote.RemoteWebElement.click(RemoteWebElement.java:72)
    在 com.harleydavidson.modelyear.selenium2.testcase.ImageTest.checkColor(ImageTest.java:79)
    在 com.harleydavidson.modelyear.selenium2.testcase.ImageTest.chooseModel(ImageTest.java:62)
    在 com.harleydavidson.modelyear.selenium2.testcase.ImageTest.testImage(ImageTest.java:28)
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    在 java.lang.reflect.Method.invoke(Method.java:597)
    在 org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    在 org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    在 org.junit.runners.model.FrameworkMethod.invokeExplosively（FrameworkMethod.java:42）
    在 org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    在 org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    在 org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
    在 org.junit.runners.ParentRunner.runLeaf（ParentRunner.java:263）
    在 org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    在 org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    在 org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    在 org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    在 org.junit.runners.ParentRunner.runChildren（ParentRunner.java:229）
    在 org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    在 org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    在 org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    在 org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)
    在 org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
原因：org.openqa.selenium.remote.ErrorHandler$UnknownServerException：在缓存中找不到元素 - 可能页面在查找后已更改
构建信息：版本：'2.18.0'，修订：'15704'，时间：'2012-01-27 17:37:17'
系统信息：os.name：'Windows XP'，os.arch：'x86'，os.version：'5.1'，java.version：'1.6.0_17'
驱动程序信息：驱动程序版本：未知
    在 .（资源：//fxdriver/modules/atoms.js:9557）
    在 .(resource://fxdriver/modules/atoms.js:10153)
    在 .(file:///C:/DOCUME~1/npolic/LOCALS~1/Temp/anonymous3371533678733192941webdriver-profile/extensions/fxdriver@googlecode.com/components/command_processor.js:10200)
    在 .(file:///C:/DOCUME~1/npolic/LOCALS~1/Temp/anonymous3371533678733192941webdriver-profile/extensions/fxdriver@googlecode.com/components/command_processor.js:10219)
    在 .(file:///C:/DOCUME~1/npolic/LOCALS~1/Temp/anonymous3371533678733192941webdriver-profile/extensions/fxdriver@googlecode.com/components/command_processor.js:10026)

```

Mycode是这样写的。用于连续动作。第一个动作第一次在循环内正常工作。当第二个循环开始时，它会抛出 StaleElementReferenceException 。所以请帮助我，如何一个一个地执行多个动作..

```
List<WebElement> colorButtons = driver.findElements(By.xpath("/html/body/div[4]/div[2]/div/div[4]/div[2]/div/img"));

for(WebElement colorButton : colorButtons)
{
    colorButton.click();
} 
```

问候纳尔西

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T08:35:05.163

基本上，`StaleElementReferenceException`当页面仍在加载或更改内容时会发生这种情况 - 所以有一些元素存在，但发生了一些事情，并且该元素 ios 不再存在于 DOM 中。

当您手动单击颜色按钮时，页面上会发生什么？我希望页面开始加载，或者显示一些东西。

您可能应该添加一些等待，或单击页面上的其他位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:16:09.340

你可以试试这个：

```
List<WebElement> elements = driver.findElements(By. xpath abc));

for(int i=0; i<elements.size(); i++){

    WebElement ele = null;

    if(i<3){

    List<WebElement> elements2 = driver.findElements(By. xpath abc);
    ele = elements2.get(i);
} 
```

# iphone - 通过 ASIHTTPRequest 下载视频时崩溃？

> ID：10118014
> 
> 赞同：1
> 
> 时间：2012-04-12T05:43:40.533
> 
> 标签：iphone, ios, crash, crash-reports

下面是 BUGSENSE 的堆栈跟踪：

堆栈跟踪：

```
0  libobjc.A.dylib 0x34a80464 0x34a7d000 13412
1  CoreFoundation 0x35818bbf -[NSObject(NSObject) performSelector:withObject:] 22
2  App-iPad 0x0002839d 0x1000 160669
3  CoreFoundation 0x35818bbf -[NSObject(NSObject) performSelector:withObject:] 22
4  Foundation 0x31181795 __NSThreadPerformPerform 268
5  CoreFoundation 0x358307dd __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ 12
6  CoreFoundation 0x358025b7 __CFRunLoopDoSources0 382
7  CoreFoundation 0x35801e5b __CFRunLoopRun 230
8  CoreFoundation 0x35801c87 CFRunLoopRunSpecific 230
9  CoreFoundation 0x35801b8f CFRunLoopRunInMode 58
10 GraphicsServices 0x320c84ab GSEventRunModal 114
11 GraphicsServices 0x320c8557 GSEventRun 62
12 UIKit 0x341dc329 -[UIApplication _run] 412
13 UIKit 0x341d9e93 UIApplicationMain 670
14 App-iPad 0x00003ac5 main 108 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:47:13.343

在我看来`delegate`，处理 的对象`ASIHTTPRequest`已被释放。

确保在解除分配委托时停止所有待处理的请求。

# testing - TCP服务器测试

> ID：10118017
> 
> 赞同：0
> 
> 时间：2012-04-12T05:43:54.060
> 
> 标签：testing, asynchronous, synchronous, tcpserver

我有一个用 C# 编写的 TCP 服务器（监听器）软件。许多设备（大约 5000 台）将异步连接到服务器并向服务器发送/接收消息。现在，我有 2 个问题。

1.  我必须向每条收到的消息发送回复消息。我应该使用哪种方式？异步（收到消息后尽快）或同步（使用回复任务发送回复）。

2.  我如何对我的服务器进行压力测试？我可以与 1-2 台计算机成功通信，但我不知道我的软件是否适用于 5000 台设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T05:59:22.393

从您的说法来看，您的服务器或侦听器应该可以在任何给定时间响应多个请求。关键是它是如何实施的？服务器是否支持多客户端响应，换句话说，它可以同时满足多个客户端的请求吗？可能正在使用多个线程等！还是它使用队列来跟踪所有请求，然后以有序的方式为它们提供服务，或者它是否使用其他方法来服务请求！

# sharepoint - 单击图像时如何弹出视频播放器窗口

> ID：10118019
> 
> 赞同：-1
> 
> 时间：2012-04-12T05:44:00.423
> 
> 标签：sharepoint, web-parts

我只是 Visual Studio 2010 和 Sharepoint 编码的初学者。我在 Visual Studio 2010 中编写代码并将其作为 Web 部件部署在 Sharepoint 站点中，

在此 Web 部件中，

单击静态图像时，它将在屏幕中央弹出视频播放器窗口，并应播放最近上传到资产库中的视频。

最近修改日期应显示在静态图像的底部。

你能帮我做这件事吗...

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:48:14.713

您可以使用[SSP.UI.ModalDialog.showModalDialog](http://msdn.microsoft.com/en-us/library/ff410058.aspx)方法在 SharePoint 2010 中显示弹出窗口。您可以拥有一个加载视频的[应用程序页面。](http://msdn.microsoft.com/en-us/library/ee231581.aspx)

# c# - 如何从 C# 调用具有 void* 回调和对象参数的 C++ Dll 中的函数

> ID：10118022
> 
> 赞同：7
> 
> 时间：2012-04-12T05:44:16.150
> 
> 标签：c#, c++, c, pinvoke

我正在尝试创建一个 C dll 的包装器，并且我正在尝试调用一个具有回调函数的函数，接收一个对象作为传回的指针。

.h 文件 delares

```
extern int SetErrorHandler(void (*handler) (int, const char*, void*),
                              void *data_ptr); 
```

处理程序是一个回调函数，在发生错误时调用，data_ptr 是任何传回给您的对象（状态），在我的应用程序中，它就是 this（当前对象）。

我能够在使用编组常量类型（如简单类型字符串、整数等）的 dll 中调用函数。但我不知道如何编组指向作为状态的 C# 对象的指针。

为了将对象引用从我通过在此处搜索找到的内容传递给 C 函数，否则我似乎需要一个结构类型才能编组到该函数，因此我创建了一个结构来保存我的对象：

```
[StructLayout(LayoutKind.Sequential)]
struct MyObjectState
{
   public object state;
} 
```

编辑：我试图在属性`[MarshalAs(UnmanagedType.Struct, SizeConst = 4)]`上放置一个属性： `public object state`，但这会产生相同的错误，所以我删除了它，它似乎无论如何都不起作用。

该结构包含一个对象属性，用于保存回调函数的任何对象。

我在 C# 中声明了委托，如下所示：

```
delegate void ErrorHandler(int errorCode, IntPtr name, IntPtr data); 
```

然后我在 C# 中声明了导入函数，如下所示：

```
[DllImport("somedll.dll", CallingConvention = CallingConvention.Cdecl)]
static extern int SetErrorHandler handler, IntPtr data); 
```

然后我在我的 C# 代码中创建了一个回调函数：

```
void MyErrorHandler(int errorCode, IntPtr name, IntPtr data)
{
    var strName = Marshal.PtrToStringAnsi(name);
    var state = new MyObjectState();
    Marshal.PtrToStructure(data, state);
    Console.WriteLine(strName);
} 
```

我可以按如下方式调用库函数：

```
var state = new MyObjectState()
{
    state = this
};
IntPtr pStruct = Marshal.AllocHGlobal(Marshal.SizeOf(state));
Marshal.StructureToPtr(state, pStruct, true);
int ret = SetErrorHandler(MyErrorHandler, pStruct); 
```

调用有效并调用了回调函数，但我无法访问回调函数中的数据，当我尝试时`Marshal.PtrToStructure`出现错误：

> 该结构不能是值类。

我在这里做了很多搜索，在 Marshall 和 void* 上找到了各种各样的东西，但没有什么能帮助我让它工作

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T07:33:57.993

你让这变得比它需要的更复杂。您的 C# 客户端不需要使用该参数，因为 C# 委托已经具有用于维护指针`data_ptr`的内置机制。`this`

所以你可以简单地传递`IntPtr.Zero`给代表。在您的错误处理程序委托中，您只需忽略`data_ptr`since的值`this`即可。

如果您不遵循此描述，这里有一个简短的程序来说明我的意思。注意`MyErrorHandler`一个实例方法是如何充当错误处理程序的，并且可以修改实例数据。

```
class Wrapper
{
    [UnmanagedFunctionPointer(CallingConvention.Cdecl)]
    delegate void ErrorHandler(int errorCode, string name, IntPtr data);

    [DllImport("somedll.dll", CallingConvention = CallingConvention.Cdecl)]
    static extern int SetErrorHandler(ErrorHandler handler, IntPtr data);

    void MyErrorHandler(int errorCode, string name, IntPtr data)
    {
        lastError = errorCode;
        lastErrorName = name;
    }

    public Wrapper()
    {
        SetErrorHandler(MyErrorHandler, IntPtr.Zero);
    }            

    public int lastError { get; set; }
    public string lastErrorName { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        Wrapper wrapper = new Wrapper();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T05:49:21.407

很可能有办法做到这一点，但我很久以前就放弃了。我想出的解决方案有点骇人听闻，但它非常有效，并且可以与我抛出的所有内容一起使用：

C# -> 托管 C++ -> 本机调用

这样做你最终会在托管 C++ 中编写一个小包装器，这有点痛苦，但我发现它比所有编组代码更有能力，也没有那么痛苦。

老实说，虽然我有点希望有人给出一个不回避的答案，但我自己已经为此苦苦挣扎了很长时间。

# spotify - Spotify 播放按钮的宽度和高度锁定为任意纵横比

> ID：10118026
> 
> 赞同：2
> 
> 时间：2012-04-12T05:44:48.787
> 
> 标签：spotify

我注意到我无法为 Spotify 播放按钮选择任何我想要的宽度和高度组合。如果我使用生成器工具并增加宽度，它会自动增加高度字段以匹配任意纵横比。因此，我永远无法真正获得所需的确切宽度和高度（即使在开发人员页面上指定的最小值和最大值内）。

我需要的是 440 像素的宽度和 720 像素的高度。当我将 iframe 中的宽度和高度设置为 440 x 720 时，它实际上以 440 x 520 呈现。

有修复的计划吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:34:23.350

我不相信这实际上是一个错误。您可以 - 正如 jackj4ck 所说 - 将样式属性添加到嵌入代码中，或者只是更改嵌入代码为您提供的高度和宽度属性。

例如：

```
<iframe src="https://embed.spotify.com/?uri=spotify:track:4bz7uB4edifWKJXSDxwHcs" width="300" height="380" frameborder="0" allowtransparency="true"></iframe> 
```

会成为：

```
<iframe src="https://embed.spotify.com/?uri=spotify:track:4bz7uB4edifWKJXSDxwHcs" width="440" height="720" frameborder="0" allowtransparency="true"></iframe> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T14:45:29.593

我在自定义 spotify 播放按钮时遇到了同样的问题。我通过将自定义样式传递给 iframe 对象解决了这个问题：

```
style="width:480px; height:480px; margin-top:5px; margin-left:15px; margin-bottom:21px;" 
```

例如 ：

```
<iframe src="https://embed.spotify.com/?uri=spotify:user:sharemyplaylists.com:playlist:0QoIyI6lLs5IfZMjOf5aNK&amp;theme=white" frameborder="0" allowtransparency="true" style="width:600px; height:680px; margin-top:5px; margin-left:15px; margin-bottom:21px;"></iframe> 
```

我知道它没有以这种方式记录，但它对我有用。

# cakephp - 如何对关联的表数据进行排序？

> ID：10118027
> 
> 赞同：2
> 
> 时间：2012-04-12T05:44:55.277
> 
> 标签：cakephp, pagination, cakephp-1.3

我必须在清单中显示有一个关系表数据。我正在为列表视图使用 CakePHP 分页和搜索功能。其余所有功能都运行良好，但我无法为相关表字段提供排序功能。

我正在使用

```
<th><?php echo $this->Paginator->sort('First Name','Enrollment.first_name');?></th>
<th><?php echo $this->Paginator->sort('Last Name','Enrollment.last_name');?></th>
<th><?php echo $this->Paginator->sort('Product','Product.name');?></th> 
```

但是对产品进行分类不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:30:33.623

```
<th><?php echo $this->Paginator->sort('First Name','Enrollment.first_name');?></th>
<th><?php echo $this->Paginator->sort('Last Name','Enrollment.last_name');?></th>
<th><?php echo $this->Paginator->sort('Product','Product.name');?></th> 
```

......

```
<td>
   <?php echo $this->Html->link($YOURVAR['Enrollment']['first_name'], array('controller' => 'enrollments', 'action' => 'view', $YOURVAR['Enrollment']['id'])); ?>
</td>
<td>
  <?php echo $this->Html->link($YOURVAR['Enrollment']['title'], array('controller' => 'enrollments', 'action' => 'view', $YOURVAR['Enrollment']['id'])); ?>
</td>
<td>

  // Checkout this line that you change the line as following
  <?php echo $this->Html->link($YOURVAR['Product']['name'], array('controller' => 'products', 'action' => 'view', $YOURVAR['Product']['id'])); ?>
</td> 
```

# java - 如何使用 java 从 selenium 中的日历中自动选择特定日期

> ID：10118029
> 
> 赞同：1
> 
> 时间：2012-04-12T05:45:03.043
> 
> 标签：java, selenium, automation, webdriver

我有一个案例，我必须从日历中选择 3 天的回溯日期。如何使用 selenium 自动化这个案例。我正在使用 java 和 selenium 进行自动化..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:29:16.177

1）假设您可以在输入字段中写入日期，而日历只是图标。你可以有这样的辅助方法

```
 public String threeDaysBefore(){
    String threeDaysBefore = "";
    Date date = new Date();
    Calendar cal = Calendar.getInstance();
    cal.setTime(date);

    cal.add(Calendar.DAY_OF_YEAR, -3);
    Date before = cal.getTime();
    SimpleDateFormat formatter = new SimpleDateFormat("dd.MM.yyyy HH:mm");
    threeDaysBefore = formatter.format(before);
    return threeDaysBefore;
} 
```

稍后在代码中

```
 WebElement calendarManualInput = driver.findElement...// find the manual input field
  calendarManualInput.sendKeys(threeDaysBefore()); 
```

2）如果你只能点击日历，那就有点棘手了。您仍然需要字符串，但略有不同：

```
 public String threeDaysBefore(){
    String threeDaysBefore = "";
    Date date = new Date();
    Calendar cal = Calendar.getInstance();
    cal.setTime(date);

    cal.add(Calendar.DAY_OF_YEAR, -3);
    Date before = cal.getTime();
    SimpleDateFormat formatter = new SimpleDateFormat("dd");
    threeDaysBefore = formatter.format(before);
    return threeDaysBefore;
} 
```

但是上面的内容很少。如果日期是 1.4。然后它将返回“29”，可以解释为 29.4。你不想发生。所以稍后在代码中你可能必须这样做

```
//this will click three days before
Date today = new Date();
Date minusThree = new Date();
Calendar now = Calendar.getInstance();
now.setTime(today);
Calendar before = Calendar.getInstance();
before.setTime(minusThree);
before.add(Calendar.DAY_OF_YEAR, -3);
int monthNow = now.get(Calendar.MONTH);
int monthBefore = before.get(Calendar.MONTH);

if (monthBefore < monthNow){
  // click previous month in the calendar tooltip on page
}
WebElement dateToSelect = driver.findElement(By.xpath("//span[text()='"+threeDaysBefore()+"']"));
dateToSelect.click(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-05T06:29:27.130

在这里，我从其官方网站“ [https://jqueryui.com/resources/demos/datepicker/default.html](https://jqueryui.com/resources/demos/datepicker/default.html) ”向您展示我用于自动化 jqueryui 日历的原始代码。

复制粘贴代码，看看它像魅力一样工作:)

如果你喜欢就投票吧:) 关于 Avadh Goyal

```
public class calendarHanding {

static int targetDay = 4, targetMonth = 6, targetYear = 1993;

static int currenttDate = 0, currenttMonth = 0, currenttYear = 0;

static int jumMonthBy = 0;

static boolean increment = true;

public static void getCurrentDayMonth() {

    Calendar cal = Calendar.getInstance();
    currenttDate = cal.get(Calendar.DAY_OF_MONTH);
    currenttMonth = cal.get(Calendar.MONTH) + 1;
    currenttYear = cal.get(Calendar.YEAR);
}

public static void getTargetDayMonthYear(String dateString) {
    int firstIndex = dateString.indexOf("/");
    int lastIndex = dateString.lastIndexOf("/");

    String day = dateString.substring(0, firstIndex);
    targetDay = Integer.parseInt(day);

    String month = dateString.substring(firstIndex + 1, lastIndex);
    targetMonth = Integer.parseInt(month);

    String year = dateString.substring(lastIndex + 1, dateString.length());
    targetYear = Integer.parseInt(year);

}

public static void calculateToHowManyMonthToJump() {

    if ((targetMonth - currenttMonth) > 0) {
        jumMonthBy = targetMonth - currenttMonth;

    } else {
        jumMonthBy = currenttMonth - targetMonth;
        increment = false;
    }
}

public static void main(String[] args) throws InterruptedException {
    // TODO Auto-generated method stub
    String dateToSet = "16/12/2016";

    getCurrentDayMonth();
    System.out.println(currenttDate);
    System.out.println(currenttMonth);
    System.out.println(currenttYear);

    getTargetDayMonthYear(dateToSet);
    System.out.println(targetDay);
    System.out.println(targetMonth);
    System.out.println(targetYear);

    calculateToHowManyMonthToJump();
    System.out.println(jumMonthBy);
    System.out.println(increment);

    System.setProperty("webdriver.chrome.driver",
            "C:\\Users\\ashutosh.dobhal\\Desktop\\Software\\chromedriver.exe");
    WebDriver driver = new ChromeDriver();
    driver.navigate().to(
            "https://jqueryui.com/resources/demos/datepicker/default.html");
    driver.manage().window().maximize();
    Thread.sleep(3000);

    driver.findElement(By.xpath("//*[@id='datepicker']")).click();

    for (int i = 0; i < jumMonthBy; i++) {
        if (increment) {
            driver.findElement(
                    By.xpath("//*[@id='ui-datepicker-div']/div/a[2]/span"))
                    .click();
        } else {
            driver.findElement(
                    By.xpath("//*[@id='ui-datepicker-div']/div/a[1]/span"))
                    .click();
        }
        Thread.sleep(1000);

    }

    driver.findElement(By.linkText(Integer.toString(targetDay))).click();

}
} 
```

# java - 从 Java 桌面应用程序打开浏览器并隐藏 url 行

> ID：10118030
> 
> 赞同：1
> 
> 时间：2012-04-12T05:45:05.840
> 
> 标签：java

例如，我想从 java 桌面应用程序中打开带有一些 url（“http:www.google.com”）的浏览器。但我不希望这个 url 在浏览器中可见。是否可以以某种方式隐藏带有 url 的行？

我找到了如何打开浏览器：[http ://www.mkyong.com/java/open-browser-in-java-windows-or-linux/](http://www.mkyong.com/java/open-browser-in-java-windows-or-linux/)

但不是如何隐藏带有 url 的行。这可能吗？

编辑：

我从 JS 中得到了可能的答案：[How to hide address bar in Firefox using javascript window.open](https://stackoverflow.com/questions/5664992/how-to-hide-address-bar-in-firefox-using-javascript-window-open)

我现在也打开浏览器

```
...
import java.awt.Desktop;
...
Desktop desktop = Desktop.getDesktop();
desktop.browse(new URI(''a_url"));
... 
```

我可以在其中集成 JS 以打开没有地址栏的弹出窗口吗？

# python - 你可以在正则表达式中放置一个列表成员的实例以在 python 中匹配吗？

> ID：10118032
> 
> 赞同：1
> 
> 时间：2012-04-12T05:45:12.140
> 
> 标签：python, regex, list, parsing, pattern-matching

所以基本上我试图从一个目录中的多个文件中读取行并使用正则表达式来专门找到一种时间戳的开头，我还想在正则表达式中放置一个月份列表的实例，然后创建一个计数器每个月根据它出现的次数。我在下面有一些代码，但它仍在进行中。我知道我关闭了 date_parse，但这就是我要问的原因。如果您能想到更有效的方法，请留下另一个建议。谢谢。

```
months = ['Jan','Feb','Mar','Apr','May','Jun',\
          'Jul','Aug','Sep','Oct','Nov','  Dec']
date_parse = re.compile('[Date:\s]+[[A-Za-z]{3},]+[[0-9]{1,2}\s]')
counter=0
for line in sys.stdin:
    if data_parse.match(line):
        for month in months in line:
            print '%s %d' % (month, counter) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T05:55:53.067

在正则表达式中，您可以有一个替代模式列表，使用竖线分隔。

[http://docs.python.org/library/re.html](http://docs.python.org/library/re.html)

```
from collections import defaultdict

date_parse = re.compile(r'Date:\s+(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)')

c = defaultdict(int)

for line in sys.stdin:
    m = date_parse.match(line)
    if m is None:
        # pattern did not match
        # could handle error or log it here if desired
        continue # skip to handling next input line
    month = m.group(1)
    c[month] += 1 
```

一些注意事项：

*   我建议您使用原始字符串（带有`r''`或`r""`）作为模式，这样反斜杠就不会变成字符串转义符。例如，在普通字符串中，`\s`不是转义符，您将得到一个反斜杠后跟一个“s”，但`\n`它是一个转义符，您将得到一个字符（换行符）。

*   在正则表达式中，当您将一系列字符括在方括号中时，您会得到一个匹配任何字符的“字符类”。因此，当您输入时，`[Date:\s]+`您会匹配`Date:`，但您也会匹配`taD:e`或这些字符的任何其他组合。只输入一个应该匹配自身的字符串是完全可以的，比如`Date:`.

# ruby-on-rails - 如何在表单中禁用 jquery 移动标记标记

> ID：10118035
> 
> 赞同：1
> 
> 时间：2012-04-12T05:45:28.443
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery-mobile

我使用 haml 、 bootstrap 和 jquery mobile。我尝试禁用 jmobile 以标记表单中的所有标签。我加：

```
%script{:src => "http://code.jquery.com/jquery-1.6.4.min.js"} 
:javascript
$(document).bind("mobileinit", function(){
  $.mobile.ignoreContentEnabled = true;
});
%script{:src => "http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"} 
```

在视图中，我用 div 包装表单：

```
.disable-markup{"data-enhance"=>"false"}
  = form_for ... 
```

**没有效果！** 然后我尝试将 data-role='none' 添加到每个标签（在萤火虫中我看到标签有 data-role='none'）

它仍然没有效果，jquery mobile markup all tag and conflig with bootstrap => my site broken

请帮我这样做：D：D：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:04:18.967

您应该使用 JQM1.1+ 而不是 JQM1.0。

参考 [http://jquerymobile.com/demos/1.2.0/docs/pages/page-scripting.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-scripting.html)

# domain-driven-design - CQRS/EventStore - 如果命令不应该失败，你如何管理一棵大树？

> ID：10118037
> 
> 赞同：1
> 
> 时间：2012-04-12T05:45:49.237
> 
> 标签：domain-driven-design, cqrs, event-sourcing

我读到 CQRS 中的命令被设计为不会失败，并且本质上应该是异步的。

就我而言，我有一棵树（想想 Windows 资源管理器），其中用户有代表视频内容位置的文件夹，每个子节点都是一个视频/媒体文件。多个用户都可以在树的同一分支上移动文件夹和文件（并上传新文件和创建新文件夹以及删除文件/文件夹）。

如果我忽略了命令的异步性质，我可以让第一个用户进行更改并在第二个用户提出异常，如果说用户将视频移动到的文件夹不再存在。现在第二个用户有责任刷新他的树的一部分，然后重新应用他的更改。

如果我的更改未被允许（即我尝试将视频文件移动到另一个文件夹并且另一个用户已删除该文件夹或将其移至其他位置），我将如何使用 CQRS 执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:53:53.427

当您将命令发送到您的域时，您的命令应该是有效的。因此，在发送之前，您必须在客户端上验证它以了解该文件夹是否仍然存在。它允许您通过清晰的错误消息告诉客户到底发生了什么

这也减少了很多*错误的余地*。发生故障的时间范围减少到通过网络发送命令的时间和在服务器上执行命令的时间。

*   如果这个风险真的很低。我们可能只收到来自域的失败命令答案（例如：枚举）。对于用户来说，它可能会以一般的异常消息告终，我们可以实现它的数据以向他展示事情是不同的，并且他不能做他想做的事情。我预计，如果此类消息在一年中仅出现 2-3 次，那么百分比较低的消息应该不会是一个大问题。

*   如果这种风险真的很高，或者如果无法从客户端进行验证，但只能在域端进行，那么我目前无法给你答案。我自己正在学习 CQRS，我不能说更多。

希望它有所帮助，

[编辑]

我假设命令处理不是异步的。如果是这样，我会尝试在命令执行期间捕获任何异常，并且我可以返回一些失败通知，而无需向客户端说明它到底是什么。对各种 readmodel 的投影保持异步。

```
 public void Handle(ICommand command)
        {
            try
            {
                CommandService.Execute(command);

                Bus.Return(ErrorCodes.None);
            }
            catch (Exception e)
            {
                Bus.Return(ErrorCodes.Fail);
            }
        } 
```

我的 CommandServiceDelegate 正确的执行者来完成这项工作：

```
Public class TheGoodExecutor{
      protected void Execute(IUOW context, MyCommand command)
        {
            var myDomainObject= context.GetById<DomainObjecType>(command.Id);

            myDomainObject.DoStuff(Command.Data);

            // Accept all the work we just did.
            context.Accept();
        }
} 
```

如果好的 Executor 出错，那么 Bus.Return(ErrorCodes.Fail);

这可以由我的客户同步或异步接收。

*如果您希望完全异步（这就是我正在尝试做的事情，或者至少我想以这种方式进行探索），我会尝试订阅事件，客户可能会感兴趣。我认为对于验证，听在大多数情况下，事件没有多大意义。但在第二种情况下，我说的是，它可能。在其他情况下，除了验证，它也可能......*

*斜体中的所有内容都是一些个人试用，我没有读过任何关于它的东西，也没有完成任何在这个意义上正常工作的东西。所以用大括号.. he he!!*

[/编辑]

# java - 获取无效游标状态（SQL 异常）

> ID：10118038
> 
> 赞同：0
> 
> 时间：2012-04-12T05:45:57.807
> 
> 标签：java, sql, sqlexception, insert-update

我有这个代码，我在数据库中插入一些值。我得到一个无效的光标状态异常。可能是什么原因...我首先从需要插入另一个表的表（选择语句）中选择一些值。我在这里做 2 次插入操作..

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@page import="java.sql.*"%>
<%@page import="java.util.*"%>
<%@page import="models.app.*"%>
<%-- <%@page import="MyPackage.*;"%> --%>

<%
String id = request.getParameter("employeeidname");
int offshore = Integer.parseInt(request.getParameter("offshorename"));
String email = request.getParameter("emailidname");
String profile = request.getParameter("profilename");
String empname = request.getParameter("employeenamename");
String projectname = request.getParameter("projectname");

/* HandleConnections con = new HandleConnections(); */
Connection con=null;
try{
    String driver = "sun.jdbc.odbc.JdbcOdbcDriver";
Class.forName(driver);

String db = "jdbc:odbc:Practice_Database";
con = DriverManager.getConnection(db,"","");
ResultSet rs=null;
Statement st2 =con.createStatement();
Statement st3 =con.createStatement();
Statement st = con.createStatement();
String sql1="SELECT Project_ID FROM Project_Table WHERE Project_Name = '"+projectname+"'";
rs= st2.executeQuery(sql1);
String sql ="INSERT into Emp_Product_Project_Mapping(Emp_IDFK, Project_IDFK) values('"+id+"',"+rs.getInt("Project_ID")+")";
int j = st3.executeUpdate(sql);
/* conn = con.getConnection(); */

SendMail send = new SendMail();
Generator gen1 = new Generator();
String temp = gen1.gen(8);
send.sendmail("shantanu.tomar@gmail.com", email, temp);

String sql2= "INSERT into Employee_Table(Emp_ID,F_Name,Profile,Offshore,Email,Password) values('"+id+"','"+empname+"','"+profile+"',"+offshore+",'"+email+"','"+temp+"')";
int i = st.executeUpdate(sql2);
if(i==1)
out.println("Values inserted successfully");
}
catch(Exception e){
    System.out.print(e);
    e.printStackTrace();
    }

%> 
```

我从中获取值的 URL 是::

```
http://localhost:8080/2_8_2012/jsp/Addemployeedatabase.jsp?employeeidname=A12&offshorename=2&emailidname=Mayur.Sharma@gmail.com&profilename=GL&employeenamename=Mayur&projectname=INFRASTRUCTURE 
```

例外 ：：

```
[Microsoft][ODBC Driver Manager] Invalid cursor statejava.sql.SQLException: [Microsoft][ODBC Driver Manager] Invalid cursor state 
```

使用 :: 解决

```
while(rs.next) to retrieve values from result set... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:01:11.383

如果您确实想要同时独立执行语句，那么您需要多个连接对象，通常通过连接池进行管理。

请注意，并非所有驱动程序都支持每个连接的多个语句，最值得注意的是 JDBC-ODBC 桥

# asp.net - 在不更改现有 EF 4.x 数据库优先方法中生成的模型的情况下修改模型结构

> ID：10118042
> 
> 赞同：0
> 
> 时间：2012-04-12T05:46:15.637
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, entity-framework, database-first

我在 EF 4.x 中使用 ASP.NET MVC 3.0 Database First 方法。模型是使用 EF 4.x DBContext Generator 生成的。现在我想更改模型结构但不想更改现有模型，因为如果修改了数据库，我必须再次生成模型，这样更改就会消失。我认为应该通过覆盖部分类来完成，但不清楚。有什么例子可以做到吗？实施它的最佳方法是什么？

编辑：我必须在一些模型中添加一些额外的验证，而不是全部。我想创建覆盖生成的类的独立模型，如果重新生成 EF 模型，对我们的自定义模型没有任何伤害。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:08:00.933

1.  您可以更改 *.tt 文件以从模型生成对象。你想改变什么对象。
2.  您可以像这样创建部分类

    命名空间 MyProject.Data{ 公共部分类用户{} }

但是您的部分类应该是 EF 创建的类的相同命名空间

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel;
using System.ComponentModel.DataAnnotations;

    [MetadataType(typeof(UserMetadata))]
    public partial class User : IEntity
    {
        internal class UserMetadata
        {
            [DisplayName("User Name")]
            public virtual string UserName
            {
                get;
                set;
            }
            [DisplayName("First Name")]
            public virtual string FirstName
            {
                get;
                set;
            }

            [DisplayName("LastName")]
            public virtual string LastName
            {
                get;
                set;
            }
        }
    } 
```

# php - 检查变量是否为数字的最佳方法

> ID：10118043
> 
> 赞同：1
> 
> 时间：2012-04-12T05:46:15.823
> 
> 标签：php, performance, numbers

我有一个 php 脚本，它从管理员那里获取一个数字并更改关联的用户。在我意识到`is_numeric`并且`intval`函数有一个有趣的行为之前，这很好。这是我使用的代码：

```
if( ((empty($_GET["uid"]))  || (!isset($_GET["uid"])))){
    $id=0;
}else{
    if(is_numeric($_GET["uid"])){
        $id=intval($_GET["uid"]);
        if($id<0){
            $id=0;
        }
    }else{
        $id=0;
    }
} 
```

但如果我`12er3`作为输入发送到脚本，`$id`将是`12`. 显然这不是我想要的。我发现了几种检查输入以确保它包含数字（并且只有数字）的方法：1：

```
$id=(filter_var($_GET['uid'],FILTER_VALIDATE_INT)?(intval($_GET['uid'])<0?0:intval($_GET['uid'])):0); 
```

2： [这个](https://stackoverflow.com/questions/901708/check-if-variable-has-a-number-php)
3：

```
preg_match("/^\d+$/",$_GET["uid"]) 
```

我的问题是哪一种更好用？

******
**注意：$id 应该是一个非负整数。**

**我没有回答它，因为没有人回答我的问题：我正在寻找最好的方法而不是方法！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T05:54:57.920

使用函数[`ctype_digit`](http://php.net/ctype_digit)来检查它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T05:47:40.033

PHP 的[is_numeric()](http://php.net/is_numeric)行为应该是可预测的，我认为在这里应该可以正常工作。我不明白你为什么需要`intval()`.

```
[ghoti@pc ~]$ php -r 'if (is_numeric("12er3")) print "yes\n";'
[ghoti@pc ~]$ php -r 'if (is_numeric("123")) print "yes\n";'
yes
[ghoti@pc ~]$ 
```

确认变量 is_numeric() 后，您可以按原样使用该变量。PHP 是无类型的。

```
[ghoti@pc ~]$ cat doit.php 
#!/usr/local/bin/php
<?php

$_GET["uid"]=$argv[1];

if (isset($_GET["uid"]) && is_numeric($_GET["uid"])) {
  $a=preg_split('/[^\d]+/', $_GET["uid"]+0);      # Use only the 
  $id=$a[0];                                      # integer part
  if ($id<0) {
    $id=0;
  }
} else {
  $id=0;
}

print $id . "\n";

[ghoti@pc ~]$ ./doit.php 123
123
[ghoti@pc ~]$ ./doit.php 12er3
0
[ghoti@pc ~]$ ./doit.php ""   
0
[ghoti@pc ~]$ ./doit.php   
0
[ghoti@pc ~]$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T06:19:16.463

哇。我真的很喜欢[数字 2 的这个答案](https://stackoverflow.com/a/901738/604259)，并且倾向于相信它似乎确实是过滤掉整数的最有效方法之一。

IE，例如引用的转发，感谢 Martin Geisler 与我们分享这个：

```
if (strcspn($_REQUEST['q'], '0123456789') != strlen($_REQUEST['q']))
  echo "true";
else
  echo "false"; 
```

我很想在这方面做基准测试，即使只是出于好奇。有很多方法可以做到这一点，希望其他人可能有想法。

您的第一种方法*看起来不错*，但我认为在某些奇怪的情况下它可能会失败。也许不是，我没有测试过你的代码，但我在想如果`$_GET['uid']`有一个价值`.+1234.56`或其他一些类似的奇怪情况，你可能会得到意想不到的结果。

您可以使用您拥有的代码轻松地进行几个测试和一个脚本，每个方法在它们自己的函数中，并通过调用每个函数 1000 次对此进行基准测试，您将立即了解最佳解决方案“性能-明智的'。结果可能会让你大吃一惊。我可以保证最漂亮的代码*并不总是*最好的！为了自己的表现，我不得不推出一些丑陋的技巧。

只要您的测试是严格的，并根据需要进行更新（非常重要）以反映它正在测试的代码的任何要求，您就可以使用您喜欢的任何实现，*它通过了我一直在谈论的测试*。

在这种情况下，要求非常低，很容易*测试*。

快乐的编码，干杯！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T05:57:37.720

它有帮助吗？

```
if (strval(intval($_GET["uid"])) == $_GET["uid"]) {
    // the value is an integer
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T06:04:10.633

您可以执行以下操作：

```
$id = (isset($_GET["uid"]) ? $_GET["uid"] : 0);
if ($id !== strval(intval($id))) {
    $id = 0;
}
$id = max(0, $id); 
```

# c++ - Windows CreateFileMapping：具有相同支持文件的不同文件映射对象

> ID：10118048
> 
> 赞同：1
> 
> 时间：2012-04-12T05:47:00.833
> 
> 标签：c++, c, windows, shared-memory, memory-mapping

我知道我们可以使用文件映射在两个进程之间共享内容，但这需要相同的文件映射对象。

**如果每个进程使用自己的文件句柄创建自己的文件映射对象，但每个文件句柄都指向同一个文件，**会发生什么？****

 **谢谢张

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T06:17:09.567

从文档：

> 创建文件映射对象实际上并不将视图映射到进程地址空间。MapViewOfFile 和 MapViewOfFileEx 函数将文件视图映射到进程地址空间。
> 
> 除了一个重要的例外，**从由同一文件支持的任何文件映射对象派生的文件视图在特定时间是连贯的或相同的。对于进程内的视图和由不同进程映射的视图，一致性得到保证。**
> 
> 异常与远程文件有关。尽管 CreateFileMapping 可以处理远程文件，但它并不能保持它们的一致性。例如，如果两台计算机都将文件映射为可写，并且都更改了同一页面，则每台计算机只能看到自己对该页面的写入。当数据在磁盘上更新时，它不会被合并。**

# android - 如何设计 Android Switch？

> ID：10118050
> 
> 赞同：123
> 
> 时间：2012-04-12T05:47:05.027
> 
> 标签：android, android-theme, styling, android-styles, android-switch

API 14 中引入的开关小部件默认采用全息主题样式。我想把它的风格稍微改变一下，为了品牌的原因改变它的颜色和形状。怎么办？我知道这一定是可能的，因为我看到了默认 ICS 和三星的 touchwiz 主题之间的区别

![在此处输入图像描述](../Images/7f41fbe6226cdd425c6ce60ce654fc77.png)

我假设我需要一些状态可绘制对象，并且我在[http://developer.android.com/reference/android/R.styleable.html](http://developer.android.com/reference/android/R.styleable.html)中看到了一些带有 Switch_thumb 和 Switch_track 的样式，这些样式看起来像我可能想要的. 我只是不知道如何使用它们。

如果这有所作为，我正在使用 ActionbarSherlock。当然，只有运行 API v14 或更高版本的设备才能使用开关。

* * *

## 回答 #1

> 赞同：261
> 
> 时间：2012-04-13T12:27:03.430

您可以定义用于背景的可绘制对象和切换器部分，如下所示：

```
<Switch
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:thumb="@drawable/switch_thumb"
    android:track="@drawable/switch_bg" /> 
```

现在您需要创建一个选择器来定义切换器可绘制对象的不同状态。这里是来自 Android 来源的副本：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_enabled="false" android:drawable="@drawable/switch_thumb_disabled_holo_light" />
    <item android:state_pressed="true"  android:drawable="@drawable/switch_thumb_pressed_holo_light" />
    <item android:state_checked="true"  android:drawable="@drawable/switch_thumb_activated_holo_light" />
    <item                               android:drawable="@drawable/switch_thumb_holo_light" />
</selector> 
```

这定义了拇指可绘制对象，即在背景上移动的图像。滑块使用了四个 [Ninepatch](http://developer.android.com/reference/android/graphics/NinePatch.html)图像：

停用的版本（Android 正在使用的 xhdpi 版本）![停用的版本](../Images/073f1259030c3110db41d6c1c7995e57.png)
按下的滑块：![按下的滑块](../Images/a1a9748a34cb0252be875c81fc3481a9.png)
激活的滑块（开启状态）：![激活的滑块](../Images/37f9fafb28d84e6c32cb4e8364cc978e.png)
默认版本（关闭状态）：![在此处输入图像描述](../Images/76dcc4943f00557ebc79541e214abfc4.png)

在以下选择器中定义了三种不同的背景状态：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_enabled="false" android:drawable="@drawable/switch_bg_disabled_holo_dark" />
    <item android:state_focused="true"  android:drawable="@drawable/switch_bg_focused_holo_dark" />
    <item                               android:drawable="@drawable/switch_bg_holo_dark" />
</selector> 
```

停用版本：![停用的版本](../Images/85743b7bf39624d396173c1d00a60141.png)
重点版本：![重点版](../Images/36b251f6602ad31f0e3322ed42d8b0b0.png)
和默认版本：![默认版本](../Images/5e69cc22fc04e16d8f55c1b63e6dc568.png)

要拥有样式开关，只需创建这两个选择器，将它们设置为您的开关视图，然后将七个图像更改为您想要的样式。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2013-02-21T22:38:46.860

这是 Janusz 的一个很棒的详细回复。但只是为了那些来到这个页面寻求答案的人，更简单的方法是从 Android Asset Studio 链接的[http://android-holo-colors.com/](http://android-holo-colors.com/)（死链接）

[AndroidOnRocks.com](http://androidonrocks.com/)上对所有工具都有很好的描述（网站现在离线）

但是，我强烈建议大家阅读 Janusz 的回复，因为它会使理解更加清晰。使用该工具快速完成工作

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-09-19T08:18:06.393

您可以通过设置不同的颜色属性来自定义材质样式。例如**自定义应用程序主题**

```
<style name="CustomAppTheme" parent="Theme.AppCompat">
    <item name="android:textColorPrimaryDisableOnly">#00838f</item>
    <item name="colorAccent">#e91e63</item>
</style> 
```

**自定义开关主题**

```
<style name="MySwitch" parent="@style/Widget.AppCompat.CompoundButton.Switch">
    <item name="android:textColorPrimaryDisableOnly">#b71c1c</item>
    <item name="android:colorControlActivated">#1b5e20</item>
    <item name="android:colorForeground">#f57f17</item>
    <item name="android:textAppearance">@style/TextAppearance.AppCompat</item>
</style> 
```

您可以通过定义 xml 可绘制对象来自定义**切换轨道和切换拇指**，如下图所示。欲了解更多信息[http://www.zoftino.com/android-switch-button-and-custom-switch-examples](http://www.zoftino.com/android-switch-button-and-custom-switch-examples)

[![自定义切换轨道和拇指](../Images/b0e2d48666da7ccd23b1d37ac8b20a03.png)](https://i.stack.imgur.com/tFSZa.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-08T09:14:58.653

另一种更简单的方法是使用形状而不是 9-patches。这里已经解释过了： [https ://stackoverflow.com/a/24725831/512011](https://stackoverflow.com/a/24725831/512011)

# javascript - preventDefault() 和单选按钮的奇怪行为

> ID：10118052
> 
> 赞同：11
> 
> 时间：2012-04-12T05:47:18.447
> 
> 标签：javascript, jquery, onclick, radio-button, preventdefault

看到这个jsFiddle：

[http://jsfiddle.net/nathanfriend/vAcpc/9/](http://jsfiddle.net/nathanfriend/vAcpc/9/)

似乎 preventDefault() 方法并不能阻止单击的单选按钮切换（请注意，无论其先前的状态如何，消息*始终*显示“此单选按钮已被选中”）。但是，在 onclick() 方法完成后，单选按钮会恢复到其初始状态（第一次选择单选按钮时除外）。

似乎 preventDefault() 的工作原理并不是通过实际阻止单选按钮被选中，而是通过将一组按钮返回到它们之前的状态。谁能解释这种行为？我希望能够完全防止单选按钮被切换——这样我可以准确地检查单选按钮是否在其 onclick() 方法中被选中。有任何想法吗？

 `* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-12T05:54:45.253

实际上，一个`mousedown`事件将首先被触发并检查您的单选按钮。您可以通过在单选按钮上按住鼠标按钮轻松验证这一点。然而，几乎所有的 GUI 元素只有在两者都被触发并成功运行时才会被执行或`mousedown`更改`mouseup`。

请参阅此示例（[演示](http://jsfiddle.net/vAcpc/10/)）：

```
$(function() {
    $('[name="test"]').each(function() {
         $(this).mousedown(function(e) {
            e.preventDefault();
            if ($(this).is(':checked')) {
                alert('This radio button was checked in mousedown');                
            } else {
                alert('This radio button was not checked in mousedown');
            }                    
        });
        $(this).click(function(e) {
            e.preventDefault();
            if ($(this).is(':checked')) {
                alert('This radio button was checked');
            } else {
                alert('This radio button was not checked');
            }                    
        });
    });           
}); 
```

正如您所看到的`mousedown`，首先触发了它，它会警告“此单选按钮未在 mousedown 中选中”。该`click`事件被阻止，因为实际`mouseup`事件被讨厌的警报取消了。但是，如果您使用，[`console.log`](http://jsfiddle.net/vAcpc/12/)您会注意到它`click`仍在执行，并且单选按钮仍处于虚拟状态。

但是，如果您[检查活动的单选按钮](http://jsfiddle.net/vAcpc/14/)，您会注意到没有活动的单选按钮。element的行为`click`有时很烦人，但`e.preventDefault()`会做的，不用担心。`

# xcode - 从 UIImagePickerController 获取修剪后的视频文件大小

> ID：10118056
> 
> 赞同：2
> 
> 时间：2012-04-12T05:47:58.363
> 
> 标签：xcode, set, uiimagepickercontroller, trim, alasset

使用选择视频后，`UIImagePickerController`我可以从其获取视频的文件大小 `[defaultRepresentation size]`。
但是，如果我启用选择器的修剪选项，`[defaultRepresentation size]`则返回与原始未修剪视频相同的文件大小。

有没有人有检索修剪视频文件大小的方法？

非常感激...

是的，我应该包含一些代码。我坏。

我想要实现的是让用户选择并修剪现有视频，然后上传修剪后的版本。我想要修剪版本的文件大小，以便在上传期间填充进度条。我也想要修剪版本的持续时间。

调用方法是：

```
-(IBAction)selectVideoPressed:(id)sender
{

if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypePhotoLibrary])

{

    UIImagePickerController *videoPicker = [[UIImagePickerController alloc] init];
    [videoPicker setDelegate: self];
    [videoPicker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
    [videoPicker setMediaTypes:[NSArray arrayWithObjects:(NSString *)kUTTypeMovie, nil]];
    [videoPicker setVideoQuality:vvi.videoQuality];
    [videoPicker setAllowsEditing:YES];
    [videoPicker setModalTransitionStyle:gTransitionStyle];

    [self presentViewController:videoPicker animated:YES completion:Nil];

}

} 
```

**在用户修剪并按下选择**后触发的委托方法是：

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{

[vvi setRawSourceVideoFileURL:[info objectForKey:UIImagePickerControllerMediaURL]];
[vvi setSourceVideoURL:[info objectForKey:UIImagePickerControllerReferenceURL]];

ALAssetsLibrary *assetLibrary = [[ALAssetsLibrary alloc] init];
ALAssetsLibraryAssetForURLResultBlock resultBlock = ^(ALAsset *myAsset)

{

    // Video metrics info.

    [vvi setVideoDuration:[myAsset valueForProperty:ALAssetPropertyDuration]];
    [vvi setVideoOrientation:[myAsset valueForProperty:ALAssetPropertyOrientation]];
    NSDate *videoDate = [myAsset valueForProperty:ALAssetPropertyDate];
    [vvi setVideoDateString:[videoDate descriptionWithLocale:[NSLocale currentLocale]]];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:gShortDateFormat];
    [vvi setShortVideoDateString:[dateFormatter stringFromDate:videoDate]];

    ALAssetRepresentation *myAssetRepresentation = [myAsset defaultRepresentation];
    [vvi setVideoAssetSize:[NSNumber numberWithLongLong:[myAssetRepresentation size]]];

    NSLog(@"Duration:%@", vvi.videoDuration);
    NSLog(@"Size:%@", vvi.videoAssetSize);

};

 .... 
```

`vvi`只是我自己的自定义类。两个 NSLog 返回原始未修剪视频的持续时间和大小。指向的视频`[vvi setRawSourceVideoFileURL:[info objectForKey:UIImagePickerControllerMediaURL]];`确实返回了正确修剪的视频。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-05T20:00:55.890

像这样的东西应该注意查找从 UIImagePickerController 返回的所选图像或视频的文件大小

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{

        NSURL *videoUrl=(NSURL*)[info objectForKey:UIImagePickerControllerMediaURL];

        //Error Container
        NSError *attributesError;
        NSDictionary *fileAttributes = [[NSFileManager defaultManager] attributesOfItemAtPath:[videoUrl path] error:&attributesError];
        NSNumber *fileSizeNumber = [fileAttributes objectForKey:NSFileSize];
        long long fileSize = [fileSizeNumber longLongValue];
} 
```

# ms-access - 如何搜索 VBA 代码文件

> ID：10118061
> 
> 赞同：18
> 
> 时间：2012-04-12T05:48:37.927
> 
> 标签：ms-access, vba

我刚开始在一家新公司工作，以前的开发人员在该公司创建了许多自动化任务。当然，几乎没有文档，我也没有机会与以前的开发人员合作，所以现在我试图筛选所有这些过程，寻找修改某些特定文件的过程。

我已经在 SQL 中编写了所有存储过程的脚本并使用了搜索工具，但没有找到我想要的东西，所以现在我想知道我需要的进程是否位于使用的许多 Access 数据库之一中。使用 SQL Server，很容易编写一个 C# 应用程序来编写 procs 脚本，这样我就可以搜索它们，但是使用 Access，我似乎仅限于单独打开每个 db 来搜索代码文件。

有没有办法以编程方式搜索 VBA 代码文件？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-12T18:37:22.927

如果您的兴趣是在 Access 数据库文件中搜索代码模块，则可以使用 VBE 对象模型。`ActiveVBProject`此示例在当前数据库的所有模块中搜索一个单词。如果数据库包含多个 VBProject，您可以枚举 VBProjects 集合并按名称一次搜索一个项目：

```
For Each objComponent In Application.VBE.VBProjects(ProjName).VBComponents 
```

或者，如果您更喜欢按编号而不是名称来引用项目，请注意编号以 1 而不是 0 开头。

```
Public Sub findWordInModules(ByVal pSearchWord As String)
    'Dim objComponent As VBComponent
    ' VBComponent requires reference to Microsoft Visual Basic
    ' for Applications Extensibility; use late binding instead:
    Dim objComponent As Object
    Dim strMessage As String
    Dim strModuleList As String

    strModuleList = vbNullString
    For Each objComponent In Application.VBE.ActiveVBProject.VBComponents
        If objComponent.CodeModule.Find(pSearchWord, 1, 1, -1, -1) = True Then
            strModuleList = strModuleList & "; " & objComponent.Name
        End If
    Next objComponent
    strMessage = "Text '" & pSearchWord & "' found in "
    If Len(strModuleList) > 0 Then
        strMessage = strMessage & "modules: " & Mid(strModuleList, 3)
    Else
        strMessage = strMessage & "no modules"
    End If
    Debug.Print strMessage
End Sub 
```

查看该`Find`方法的 Access 帮助主题；您可能更喜欢与我使用的不同的选项。

如果您想定位多个 db 文件并搜索每个文件中的模块，您可以使用该`OpenDatabase`方法自动执行此操作。我将把这部分的细节留给你。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-01-05T17:10:55.597

另一个选项，之前没有提到 - 是在 VBA 编辑器中从上下文菜单中打印项目代码。可以修改以下步骤以适应可用的应用程序，但结果是相同的 - 可搜索的文本。

在 VBA 编辑器中，右键单击项目名称，然后从出现的上下文菜单中单击打印。确保选中“代码”，然后单击“确定”。可以从最后一个对话框中的“设置...”菜单更改打印机。

[![右键点击](../Images/c38c075f17790ed7e4c6381452763698.png)](https://i.stack.imgur.com/EP7gN.png) [![复选框](../Images/654826a8bba2cf13c7a1099e265a5187.png)](https://i.stack.imgur.com/vUTY6.png)

附带说明 - 可以从“数据库工具”选项卡的“分析”组中的“数据库文档器”中打印独立模块、SQL、表等。

对于 Access 查询的排序和概述底层 SQL 非常有用。

[![数据库记录器](../Images/e97caa38e46c847dfd69c5a1b8a4701d.png)](https://i.stack.imgur.com/FLHSv.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-12T18:31:44.657

最好下载免费的[MZ-Tools](http://www.mztools.com/v3/mztools3.aspx) for VBA 并使用它们的搜索/替换功能。

![开始查找](../Images/9f769944ab359641e76082d448a1e8ca.png) [![查找结果](../Images/daad282c975a3ed7738382e2a1af7dd7.png)](https://i.stack.imgur.com/sy76W.png)

**编辑**

MZ-Tools for VBA 不再可用。付费版本适用于较新的办公室安装。

# python - 可腌制图像对象

> ID：10118068
> 
> 赞同：9
> 
> 时间：2012-04-12T05:49:11.503
> 
> 标签：python, python-imaging-library, pickle

如何从 PIL Image 对象创建一个可腌制文件，以便您可以将这些图像保存为单个腌制文件，然后上传到另一台计算机，例如运行 PIL 的服务器并在那里取消腌制？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-12T05:51:57.363

您可以将 Image 对象转换为数据，然后您可以腌制它：

```
image = {
    'pixels': im.tostring(),
    'size': im.size,
    'mode': im.mode,
} 
```

回到图像：

```
im = Image.fromstring(image['mode'], image['size'], image['pixels']) 
```

**注意：**如前所述`astex`，如果您使用的是 Pillow（推荐使用 PIL 而不是 PIL），则不`tostring()`推荐使用该方法`tobytes()`。同样与`fromstring()`for `frombytes()`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-12T06:25:27.707

Gerald 使用关键字 args 的答案略有不同

创建可腌制对象

```
image = {'data': im.tostring(), 'size':im.size, 'mode':im.mode} 
```

或者

```
image = dict(data=im.tostring(), size=im.size, mode=im.mode) 
```

解开回到图像

```
im = Image.fromstring(**image) 
```

# php - 通过 curl 方法获取 url 数据，在符号中给出意外结果

> ID：10118069
> 
> 赞同：6
> 
> 时间：2012-04-12T05:49:14.273
> 
> 标签：php, curl

我有时会面临通过 curl 方法获取 url 数据的问题，特别是网站数据是其他语言，如阿拉伯语等我的 curl 函数是

```
function file_get_contents_curl($url)
{
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

    $data = curl_exec($ch);
    $info = curl_getinfo($ch, CURLINFO_CONTENT_TYPE);

    //checking mime types
    if(strstr($info,'text/html')) {
        curl_close($ch);
        return $data;
    } else {
        return false;
    }
} 
```

以及我如何获取数据

```
$html =  file_get_contents_curl($checkurl);
    $grid ='';
    if($html)
    {
        $doc = new DOMDocument();
        @$doc->loadHTML($html);
        $nodes = $doc->getElementsByTagName('title');
        @$title = $nodes->item(0)->nodeValue;
        @$metas = $doc->getElementsByTagName('meta');
        for ($i = 0; $i < $metas->length; $i++)
        {
            $meta = $metas->item($i);
            if($meta->getAttribute('name') == 'description')
                $description = $meta->getAttribute('content');
        } 
```

我从一些阿拉伯网站（如 [http://www.emaratalyoum.com/multimedia/videos/2012-04-08-1.474873](http://www.emaratalyoum.com/multimedia/videos/2012-04-08-1.474873) 以及当我给这个 youtube 网址 [http://www.youtube.com/watch时）正确获取所有数据?v=Eyxljw31TtU&feature=g-logo&context=G2c4f841FOAAAAAAAFAA](http://www.youtube.com/watch?v=Eyxljw31TtU&feature=g-logo&context=G2c4f841FOAAAAAAAFAA)
它显示符号.. 我必须做什么设置才能显示完全相同的标题描述。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T11:18:40.433

### 介绍

学习阿拉伯语可能非常棘手，但它们是您需要确保的一些基本步骤

*   您的文件必须输出`UTF-8`
*   您的 DOMDocument 必须以 UTF-8 fromat 格式读取

### 问题

获取 Youtube 信息时，它已经给出了“UTF-8”格式的信息，并且检索过程添加了附加`UTF-8`编码....不知道为什么会发生这种情况，但一个简单的`utf8_decode`方法可以解决这个问题

### 例子

```
header('Content-Type: text/html; charset=UTF-8');
echo displayMeta("http://www.emaratalyoum.com/multimedia/videos/2012-04-08-1.474873");
echo displayMeta("http://www.youtube.com/watch?v=Eyxljw31TtU&feature=g-logo&context=G2c4f841FOAAAAAAAFAA"); 
```

### 输出

***emaratalyoum.com***

```
التقطت عدسات الكاميرا حارس مرمى ريال مدريد إيكر كاسياس في موقف محرج قبل لحظات من بداية مباراة النادي الملكي مع أبويل القبرصي في ذهاب دور الثمانية لدوري أبطال 
```

***youtube.com***

```
أوروبا.ففي النفق المؤدي إلى الملعب، قام كاسياس بوضع إصبعه في أنفه، وبعدها قام بمسح يده في وجه أحدبنات سعوديات: أريد "شايب يدللني ولا شاب يعللني" 
```

### 使用的功能

***显示元***

```
function displayMeta($checkurl) {
    $html = file_get_contents_curl($checkurl);
    $grid = '';
    if ($html) {
        $doc = new DOMDocument("1.0","UTF-8");
        @$doc->loadHTML($html);
        $nodes = $doc->getElementsByTagName('title');
        $title = $nodes->item(0)->nodeValue;
        $metas = $doc->getElementsByTagName('meta');
        for($i = 0; $i < $metas->length; $i ++) {
            $meta = $metas->item($i);
            if ($meta->getAttribute('name') == 'description') {
                $description = $meta->getAttribute('content');
                if (stripos(parse_url($checkurl, PHP_URL_HOST), "youtube") !== false)
                    return utf8_decode($description);
                else {
                    return $description;
                }
            }
        }
    }
} 
```

* **file_get_contents_curl***

```
function file_get_contents_curl($url) {
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

    $data = curl_exec($ch);
    $info = curl_getinfo($ch, CURLINFO_CONTENT_TYPE);

    // checking mime types
    if (strstr($info, 'text/html')) {
        curl_close($ch);
        return $data;
    } else {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T23:42:06.480

我相信这会起作用...... utf8_decode() 你的属性..

```
function file_get_contents_curl($url)
{
$ch = curl_init();
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

$data = curl_exec($ch);
$info = curl_getinfo($ch, CURLINFO_CONTENT_TYPE);

//checking mime types
if(strstr($info,'text/html')) {
    curl_close($ch);
    return $data;
} else {
    return false;
}
}

$html =  file_get_contents_curl($checkurl);
$grid ='';
if($html)
{
    $doc = new DOMDocument();
    @$doc->loadHTML($html);
    $nodes = $doc->getElementsByTagName('title');
    @$title = $nodes->item(0)->nodeValue;
    @$metas = $doc->getElementsByTagName('meta');
    for ($i = 0; $i < $metas->length; $i++)
    {
        $meta = $metas->item($i);
        if($meta->getAttribute('name') == 'description')
            $description = utf8_decode($meta->getAttribute('content'));
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T07:25:53.123

这里发生的情况是您丢弃了`Content-Type`cURL 在`file_get_contents_curl()`函数中返回的找到的标头；`DOMDocument`需要该信息来了解页面上使用的字符集。

一个有点丑陋但最通用的技巧是在返回的页面前面加上一个`<meta>`标签，该标签包含响应标头中返回的字符集：

```
if (strstr($info, 'text/html')) {
    curl_close($ch);
    return '<meta http-equiv="Content-Type" content="' . $info . '" />' . $data;
} 
```

DOMDocument 将接受错误放置的元标记并自动进行相应的转换。

# android - android中的滑动选择视图

> ID：10118070
> 
> 赞同：0
> 
> 时间：2012-04-12T05:49:18.457
> 
> 标签：android, view, android-widget

我必须为 Android 屏幕设计以下视图。

![在此处输入图像描述](../Images/71bbc7b96099fb8bf59e66990b17c77e.png)

为了选择一个选项，我们将滑动视图。Android中有没有这样的小部件？根据我的想法，没有这样的视图可用，我可以设计这个视图，但我的问题是滑动选择。有没有最好的方法来设计这个？请建议我您的意见。

任何替代解决方案可以做到这一点？

谢谢

# mysql - mysql查询中浮点值的位数？

> ID：10118072
> 
> 赞同：0
> 
> 时间：2012-04-12T05:49:34.703
> 
> 标签：mysql, floating-point

从位置限制 10 中选择名称、纬度、液化天然气

如果我想要 lat 和 lng 的小数点后的特定位数恰好是浮点值怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:05:42.827

如果 X 是您想要的位数：

```
select name, round(lat, X, 1), round(lng, X, 1)
from locations limit 10 
```

如果要舍入和截断，则取出舍入函数的 1 参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T05:58:52.740

假设你想得到 .3

```
select name , lat , lng from locations 
where lat like '%.3' and lng like '%.3'
limit 10 
```

# svn - SVN 数据库损坏

> ID：10118076
> 
> 赞同：0
> 
> 时间：2012-04-12T05:50:11.967
> 
> 标签：svn

每当我尝试从存储库更新我的代码时，我都会收到消息

> Can't open file 'E:\Repositories\Main\db\revs\7\7805'：系统找不到指定的文件。

如果我尝试进行干净的结帐，它会工作一段时间，然后我会收到错误

> '/svn/Main/!svn/me' 的报告：无法读取块大小：安全连接被截断

奇怪的是，我仍然可以办理登机手续。

查看 db\revs\7 文件夹，肯定有一些文件丢失。\6 包含从 6000 到 6999 的所有值。但在 \7 中有 7804 和 7806，但没有 7805。还有一些其他的缺失。

可以重新创建这些数据吗？我相当肯定我应该能够得到除了一些最近签到的所有东西，但我更希望没有数据丢失。

编辑：还应该注意我最近将一些大型二进制文件检查到存储库中。SVN 是否以不同的方式处理它们的存储？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T05:55:50.277

很难确切地说出为什么你会看到你所看到的，但我建议先检查你的硬盘。此外，请检查您的防病毒日志。

# silverlight - 用于在 silverlight 中的 MEF 中下载 .xap 文件的包目录

> ID：10118084
> 
> 赞同：1
> 
> 时间：2012-04-12T05:51:46.323
> 
> 标签：silverlight, silverlight-4.0, silverlight-3.0, silverlight-5.0

我正在使用包目录在按钮单击事件上下载 .xap 文件。

```
Package.DownloadPackageAsync(new Uri("Project.xap", UriKind.Relative),
          (args, p) => cat.AddPackage(p)) 
```

现在我的问题是，当我单击按钮时，是每次下载“Project.xap”还是只下载一次，然后从缓存中使用。

请帮助我。

# visual-studio-2010 - 错误信息的原因是什么？我用的是VS 2010专业版

> ID：10118086
> 
> 赞同：64
> 
> 时间：2012-04-12T05:51:56.630
> 
> 标签：visual-studio-2010

错误消息“快照已过期且无法再使用，因为类型树已更新，需要获取新的快照显示”的原因是什么？

在我启动 VS2010 并添加用户名/密码以连接到 TFS 存储库后，立即出现此错误。

我正在使用 VS 2010 专业版。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-02-01T12:30:50.130

在加载没有源代码控制绑定的项目（一个本地简单的 WinForms 项目）后，VS2012 也发生在我身上。我需要做的就是清理和重建。之后问题就解决了。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-27T19:40:42.480

这是 Visual Studio 中的一个错误。根据[http://connect.microsoft.com/VisualStudio/feedback/details/742959/the-snapshot-is-out-of-date](http://connect.microsoft.com/VisualStudio/feedback/details/742959/the-snapshot-is-out-of-date) “我们仔细研究了这个问题，这不是我们'将能够在下一个版本的 Visual Studio 中解决。”

他们建议等到后台语言解析器服务完成（或者，换句话说，不要试图在那里工作*太*高效。）我的经验是关闭所有文档，清理解决方案，重建它，然后关闭并重新- 暂停后打开确实消除了错误。

直到你做一些愚蠢的事情，比如编辑代码。然后，关于它何时再次发生的所有赌注都将再次取消。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-03-14T12:33:10.573

我在 VS2012 上遇到了类似的问题，在重建解决方案两次后，我仍然看到相同的错误消息。
根据来自[该站点](http://connectppe.microsoft.com/VisualStudio/feedback/details/742959/the-snapshot-is-out-of-date)的帖子的建议，我关闭了设计器选项卡，从解决方案资源管理器中重新打开它，问题就解决了。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-03-27T05:47:49.877

我也遇到了这个错误，但是在我`unload project`和之后`reload project`，问题就解决了。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-22T18:32:09.203

简单地重新启动 Visual Studio 2012 对我来说是一种解决方法，但它大约每小时都会发生一次，并且不得不重新启动 Visual Studio，这通常很烦人。

我还发现[这篇文章](http://alexgamedev.blogspot.ca/2012/02/xna-snapshot-is-out-of-date-and-can-not.html)表明[Productivity Power Tools](http://visualstudiogallery.msdn.microsoft.com/3a96a4dc-ba9c-4589-92c5-640e07332afd)是问题所在，只需在*Tools->Options->Productivity Power Tools*中关闭**Automatic Brace Completion**即可。自从进行此更改后，我再也没有看到错误消息:)

 *我会注意到，虽然我使用的是 Visual Studio 2012，而 OP 使用的是 Visual Studio 2010，但[生产力工具](http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef)也可用于 VS 2010，因此这仍然可以解决 VS 2010 中的问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-02-16T07:34:43.790

同样的问题在 VS2013 中仍然存在，但没有多少 Clean/Rebuild 或重新启动 VS 会有所帮助。我可以成功发布的唯一方法是禁用**AutoT4MVC**扩展。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-14T13:49:31.267

我也遇到了这个错误。我关闭了 Visual Studio 2012 并再次打开它，错误就消失了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-04T04:13:28.580

我使用了 Visual Studio 2012，并在我的 Windows 8 上遇到了这个错误。似乎关闭 VM 并重新启动 Visual Studio 解决了这个问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-12-04T14:21:45.713

我也会把我的两分钱扔在这里。

我已经尝试了 Clean、Rebuild、Restart 等的所有组合。我发现重新启动 Visual Studio 通常会使问题在至少一个 Publish 中消失。不过，这是奇怪的部分。您也可以完全不做任何事情来解决问题。如果您只是让 Visual Studio 静置大约一两分钟，*然后*发布，它通常可以正常工作。这里有一些背景巫术，等待它完成似乎可以解决问题。

我有一个需要发布的两个部分的解决方案。一个是 WCF 服务应用程序，另一个是 ASP.NET MVC5 网站本身。每当我发布服务，然后尝试发布站点时，我都会看到此错误。我可以发布服务，重新启动 VS，然后发布网站，**或者**我可以发布服务，去喝一杯，然后发布网站。只要我让 VS 有机会在任何类型的重建和网站发布之间“解决”，一切似乎都按预期工作。

走一走，回来，问题解决了。或者如果你没有时间。清洁、重建、重新启动、发布（起泡、冲洗、重复）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-09-04T07:58:22.817

当我有冲突的类名/命名空间时，我得到了这个错误。我从我的 XAML 文件中的不同 DLL 引用 UserControl，该文件与我的 XAML 文件（类名）具有相同的名称。也许这有帮助。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-04-03T12:32:58.947

我刚用VS2010得到了这个。

我有一个带有用户控件 (UCa) 的表单，上面有一个来自不同项目的用户控件 (UCa)。对 UCb 进行了更改，然后轻弹给设计师以获得形式和繁荣！快照错误。

通过完全清理解决，然后在构建项目的其余部分之前仅重建 UCb 项目。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-09-30T13:55:07.773

我正在使用 Visual Studio 2012，在启动 Visual Studio、让 TFS 连接到服务器然后打开我的解决方案时出现此错误。修复只是关闭 VS 并直接启动解决方案。*

# meteor - 当 Collection 插入导致 404 时，这意味着什么？

> ID：10118097
> 
> 赞同：2
> 
> 时间：2012-04-12T05:53:19.593
> 
> 标签：meteor

我在流星中有一个非常简单的测试应用程序，我创建了一个这样的集合：

```
var people = new Meteor.Collection("people"); 
```

当我尝试做一个简单的插入时，像这样：

```
people.insert({name: "Benson"}); 
```

我收到带有“找不到方法”文本的 404 错误。我承认我很有可能在这里指错了一些东西，但我很想知道哪里出了问题，以及为什么错误如此不透明（即它来自哪里）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T07:18:36.510

这个错误几乎可以肯定意味着您只`people`在客户端上定义，而不是在服务器上。声明也必须在`new Meteor.Collection('people')`服务器上运行，否则服务器不知道如何运行您的插入命令。

确保您`new Meteor.Collection`同时调用客户端和服务器。您是在内部调用它`if (Meteor.is_client)`，还是在`client`子目录下的文件中调用它？

更多细节：在服务器上，`new Meteor.Collection`定义了三个远程方法 ( `Meteor.methods`)，用于在命名的 MongoDB 集合中插入、更新和删除文档。在客户端，相同的命令会创建一个内存中的 minimongo 集合，该集合位于浏览器内部，并定义三个*存根*，通过对 minimongo 集合应用相同的更改来模拟方法。通过仅在客户端上声明集合，您的客户端代码可以很好地运行本地插入，但是当它要求服务器执行真正的插入时，服务器不知道您要求它执行什么方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-16T00:18:35.433

如果您只想在客户端使用 Collection 并且不需要将该数据保存到服务器，则可以通过将 null 传递给构造函数来在“client”文件夹或 .isClient() 函数中声明您的集合，如下所示：

```
if(Meteor.isClient()){
// Some other code
...

onlyClientCollection = new Meteor.Collection(null);

// Some other code
...
} 
```

# django - 在 Django View Execution 上设置超时

> ID：10118098
> 
> 赞同：3
> 
> 时间：2012-04-12T05:53:31.497
> 
> 标签：django, django-views

如何设置执行 django 视图的时间限制。即一个视图的执行时间永远不会超过 10 秒，如果确实如此，它应该从执行中途返回。我的想法是我们可以有一个装饰器。但我不确定。寻找解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T23:09:15.747

我建议考虑使用 Celery，它包括对任务的内置[时间限制支持](http://docs.celeryproject.org/en/latest/userguide/workers.html#time-limits)，并使您的 django 应用程序和服务器保持响应：

> 单个任务可能永远运行，如果您有很多任务等待某个永远不会发生的事件，您将无限期地阻止工作人员处理新任务。防止这种情况发生的最佳方法是启用时间限制。

# c++ - 如何在数组中找到未耦合的整数？

> ID：10118103
> 
> 赞同：1
> 
> 时间：2012-04-12T05:53:58.753
> 
> 标签：c++, c, algorithm

> **可能重复：**
> [查找数组中未出现两次的整数](https://stackoverflow.com/questions/2168716/find-integer-not-occurring-twice-in-an-array)
> [埃森哲面试问题 - 查找数组中唯一未配对的元素](https://stackoverflow.com/questions/2644179/accenture-interview-question-find-the-only-unpaired-element-in-the-array)

给定一个奇数大小的整数数组。数组中的所有整数都出现两次，除了一个整数。如何以最有效（内存和复杂性）的方式找到这个解耦整数？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-12T05:55:35.067

如果将它们全部异或，最终将得到唯一的（未耦合的）值。

这是因为`x`XOR对于所有值`x`都为零，而XOR是.`x``0``x``x`

例如，以下程序输出`99`：

```
#include <stdio.h>
int main (void) {
    int num[] = { 1, 2, 3, 4, 5, 99, 1, 2, 3, 4, 5};
    unsigned int i;
    int accum;

    for (accum = 0, i = 0; i < sizeof(num)/sizeof(*num); i++)
        accum ^= num[i];

    printf ("%d\n", accum);

    return 0;
} 
```

就效率而言，它基本上是 O(1) 空间和 O(n) 时间复杂度，最小、平均和最坏情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T06:04:22.227

正如 pax 建议的那样，将所有元素异或在一起将为您提供唯一的价值。

```
int getUncoupled(int *values, int len)
{
    int uncoupled = 0;
    for(int i = 0; i < len; i++)
        uncoupled ^= values[i];
    return uncoupled;
} 
```

但是这里有一个小警告：没有解耦值和解耦值为零的集合有什么区别？`x^x^y^y = 0`但也不`x^x^0^y^y`等于零？深思熟虑:)

# android - 在 android 上的 translateanimation 上更改图像

> ID：10118105
> 
> 赞同：0
> 
> 时间：2012-04-12T05:54:19.337
> 
> 标签：android

我将 translateAnimation 实现为 imageview。

它成功动画化。

一个翻译是向上移动，另一个是向下移动。我需要在开始第二次翻译时更改图像。

我的代码是：

```
<?xml version="1.0" encoding="utf-8"?><set xmlns:android="http://schemas.android.com/apk/res/android"
android:interpolator="@android:anim/accelerate_decelerate_interpolator"
android:shareInterpolator="true">
<translate
    android:fromXDelta="0%" android:toXDelta="0%p"
    android:fromYDelta="0%" android:toYDelta="20%"
    android:drawable="@drawable/bs_bunny1"
    android:duration="2000" android:startOffset="100"/>
<translate 

    android:fromXDelta="0%" android:toXDelta="0%p"
    android:fromYDelta="0%p" android:toYDelta="-20%p"
    android:duration="3000" android:startOffset="100"/></set> 
```

我将上面的动画设置为imageview。

但是我想在开始加载第二个翻译时更改图像.. 怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:41:16.360

您需要将其分成两个动画，并将 Animation.AnimationListener 注册到第一个翻译动画。在 Animation.AnimationListener 的 onAnimationEnd(Animation animation) 回调中，进行图像更改，然后开始第二个动画，如下所示：

```
translate.setAnimationListener(new Animation.AnimationListener() {

@Override
public void onAnimationStart(Animation animation) {
}

@Override
public void onAnimationEnd(Animation animation) {
    view.setImageResource(resId);
    view.startAnimation(translate2);
}

@Override
public void onAnimationRepeat(Animation animation) {
}
}); 
```

# jquery - 动画背景位置在 IE 8 中引发错误

> ID：10118106
> 
> 赞同：0
> 
> 时间：2012-04-12T05:54:23.183
> 
> 标签：jquery, jquery-plugins, internet-explorer-8, cross-browser

我试图找到一种方法来使用以下 jQuery 插件（[*由 Alexander Farkas 编写*](http://www.protofunc.com/scripts/jquery/backgroundPosition/)）为我的身体的背景位置设置动画：

```
(function($) {
    if(!document.defaultView || !document.defaultView.getComputedStyle){ // IE6-IE8
        var oldCurCSS = $.curCSS;
        $.curCSS = function(elem, name, force){
            if(name === 'background-position'){
                name = 'backgroundPosition';
            }
            if(name !== 'backgroundPosition' || !elem.currentStyle || elem.currentStyle[ name ]){
                return oldCurCSS.apply(this, arguments);
            }
            var style = elem.style;
            if ( !force && style && style[ name ] ){
                return style[ name ];
            }
            return oldCurCSS(elem, 'backgroundPositionX', force) +' '+ oldCurCSS(elem, 'backgroundPositionY', force);
        };
    }

    var oldAnim = $.fn.animate;
    $.fn.animate = function(prop){
        if('background-position' in prop){
            prop.backgroundPosition = prop['background-position'];
            delete prop['background-position'];
        }
        if('backgroundPosition' in prop){
            prop.backgroundPosition = '('+ prop.backgroundPosition;
        }
        return oldAnim.apply(this, arguments);
    };

    function toArray(strg){
        strg = strg.replace(/left|top/g,'0px');
        strg = strg.replace(/right|bottom/g,'100%');
        strg = strg.replace(/([0-9\.]+)(\s|\)|$)/g,"$1px$2");
        var res = strg.match(/(-?[0-9\.]+)(px|\%|em|pt)\s(-?[0-9\.]+)(px|\%|em|pt)/);
        return [parseFloat(res[1],10),res[2],parseFloat(res[3],10),res[4]];
    }

    $.fx.step. backgroundPosition = function(fx) {
        if (!fx.bgPosReady) {
            var start = $.curCSS(fx.elem,'backgroundPosition');
            if(!start){//FF2 no inline-style fallback
                start = '0px 0px';
            }

            start = toArray(start);
            fx.start = [start[0],start[2]];
            var end = toArray(fx.end);
            fx.end = [end[0],end[2]];

            fx.unit = [end[1],end[3]];
            fx.bgPosReady = true;
        }
        //return;
        var nowPosX = [];
        nowPosX[0] = ((fx.end[0] - fx.start[0]) * fx.pos) + fx.start[0] + fx.unit[0];
        nowPosX[1] = ((fx.end[1] - fx.start[1]) * fx.pos) + fx.start[1] + fx.unit[1];           
        fx.elem.style.backgroundPosition = nowPosX[0]+' '+nowPosX[1];

    };
})(jQuery); 
```

实际上，它说它与 IE6+ 兼容，但是在执行此操作时：

```
$('body').stop().animate({backgroundPosition: '50% -800px'}, 2000); 
```

..它在 IE8 或更低版本中抛出以下错误消息：

> 没有检索到属性“1”的值：对象为空或未定义

上面插件中的这一行指的是什么：

```
return [parseFloat(res[1],10),res[2],parseFloat(res[3],10),res[4]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:37:34.373

它只是 Internet Explorer 8，以不同方式处理脚本并引发如下错误：

```
No retrieved value for property "1": The object either is null or undefined 
```

# css - WP 导航菜单错误

> ID：10118112
> 
> 赞同：0
> 
> 时间：2012-04-12T05:54:52.743
> 
> 标签：css, wordpress, html

我在我的网站中使用了 WP 导航菜单。它工作正常。我在主页链接下添加了子链接。但它没有正确显示。请参考截图。 ![在此处输入图像描述](../Images/a71792a203bb0c31decfbd8ee76eb7e9.png)

在上图中，“支持我们的工作”子链接就可以了。但是主页子链接没有正确显示。我需要在 HOME 链接下显示类似于“支持我们的工作”的“新闻、日历、喜欢我们在 FaceB 上”。主页不接受子链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:35:25.000

当您有一个静态页面作为主页时，这是可能的。

转到设置、阅读、首页显示。然后选择您的“首页”，它将作为主页链接出现在菜单中。

然后在您的主题的**functions.php**中添加以下代码：

```
function my_page_menu_args( $args ) {
    $args['show_home'] = false; // Do not show 'home' link in the menu.
    return $args;
}
add_filter('wp_page_menu_args', 'my_page_menu_args', 1000); 
```

在菜单中，所选页面的子页面现在将显示为子菜单项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:19:33.910

尝试添加`theme_location => 'secondary'`

# ajax - .ajax() 表单提交错误

> ID：10118116
> 
> 赞同：0
> 
> 时间：2012-04-12T05:55:11.553
> 
> 标签：ajax, jquery

我正在尝试使用 .ajax() jquery 函数提交表单

```
function submitForm()
{
    $("#quiz").ajaxForm({
               target: '#result',   
              type:   'post',
              beforeSubmit: before_submit,
              success: showResponse

           }).submit();
 } 
```

问题是表单在第二次尝试中提交，即当我单击两次时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:02:32.037

```
$(document).ready(function(){
    $("form#submit").submit(function() {

    var fname     = $('#fname').attr('value');
    var lname     = $('#lname').attr('value');
        $.ajax({
            type: "POST",
            url: "ajax.php",
            data: "fname="+ fname +"&amp; lname="+ lname,
            success: function(){
                $('form#submit').hide(function(){$('div.success').fadeIn();});

            }
        });
    return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:03:10.900

你在初始化它`$(document).ready(function())`吗？我希望不是。首先在准备好的文档中初始化它减去`submit()`方法并`submit()`在`submitForrm()`

里面的东西`ajaxform()`必须在调用它们之前初始化，这就是为什么大多数 jquery 插件或小部件在文档就绪部分初始化的原因。

这就是为什么当你第一次调用它时它会被初始化，而第二次它会被实际执行。

# c# - 将 CJK 字符粘贴到 RichTextBox 会添加不需要的第二种字体

> ID：10118117
> 
> 赞同：2
> 
> 时间：2012-04-12T05:55:22.877
> 
> 标签：c#, unicode, fonts, richtextbox, cjk

如果将以下内容粘贴到 RichTextBox 中，CJK 字符和之后的所有内容都会变成第二种字体 - SimSun。

> 插入一个 CJK 字符：色</p>
> 
> ...使此字体更改。

这会以一种不需要的方式影响 RichTextBox 的格式，并且还会大大减慢大型复制/粘贴的速度。

我尝试将 RichTextBox 设置为使用 unicode 字体，例如“Lucida Sans Unicode”，并确保我从中复制的源（写字板）也使用“Lucida Sans Unicode”字体。但是，在一天结束时，当我粘贴到 RichTextBox 时，它会强制使用其他字体，例如 SimSun（如果我们使用其他类型的字符，则强制使用其他字体，例如“Shonar Bangla”或“Microsoft Himalaya”）。

既然“Lucida Sans Unicode”都有，为什么不能坚持一种字体呢？

我注意到其他人也有类似的问题： [RichTextBox - 保留原始格式（字体），即使在粘贴之后](https://stackoverflow.com/questions/1974185/make-a-richtextbox-only-have-one-font-even-if-pasted-into-vb-net)

不幸的是，该页面上的解决方案对我不起作用，因为我仍然发现 RTB 在 CJK 字符之后使用另一种字体。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T22:24:47.233

我自己时断时续地遇到这个问题。

今天在网上到处翻找之后，我注意到了一些东西`msdn`并尝试了一些东西。将此行添加到您的`Form1_Load()`，或行之后的表单构造函数`InitializeComponent()`：

```
richTextBox1.LanguageOption = RichTextBoxLanguageOptions.DualFont; 
```

我不是专家，我不能告诉你它为什么有效，但它对我有用！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T09:09:38.030

不幸的是，尽管它的名称有点令人困惑，但它`Lucida Sans Unicode`不包含 CJK 字符（正如您可以从名称中包含*Unicode*的字体所期望的那样）。这会触发一些字体回退机制，从而生成包含所需符号的字体。我看到的唯一可能的解决方案是使用实际上包含所有必需字符的字体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T16:55:38.430

为了补充 Petr 的答案（并部分使用他评论中的信息），事实证明，许多 Unicode 符号在 RichTextBox 中的渲染速度要慢得多。

但是通过过滤掉大约 1280 (0x500) 和更大的 unicode 字符，我发现粘贴的速度和以前一样快。

# javascript - Javascript 对象/地理位置 API

> ID：10118118
> 
> 赞同：0
> 
> 时间：2012-04-12T05:55:25.100
> 
> 标签：javascript, javascript-objects, w3c-geolocation

我正在使用 Phonegap 开发一个将使用 Geolocation 的移动应用程序。我之前使用过 Geolocation，但这次我认为为它创建一个新的对象包装器会更好，因为大部分功能都基于此，并且不想以混乱的代码结束。

解决方案可能是直截了当的，但它打败了我，因为我从来没有在 JS 中使用对象做过任何非常高级的事情。这是目前的代码（删除了不需要的部分）：

```
function Geolocation(maximumAge, accurate) {
    this.settings = {
            'maximumAge': maximumAge,
            'accurate': accurate
    }
}

Geolocation.prototype = {
    position: {
        latitude: null,
        longitude: null,
        altitude: null,
        accuracy: null,
        altitudeAccuracy: null,
        heading: null,
        speed: null
    },
    lastCheck: null,
    watchId: null,
    onSuccess: function(position) {
        this.position.latitude = position.coords.latitude;
        this.position.longitude = position.coords.longitude;
        this.position.altitude = position.coords.altitude;
        this.position.accuracy = position.coords.accuracy;
        this.position.altitudeAccuracy = position.coords.altitudeAccuracy;
        this.position.heading = position.coords.heading;
        this.position.speed = position.coords.speed;
        this.lastCheck = new Date(position.timestamp);
    }, 
    onError: function(error) {
        console.log(error.code+' '+error.message);
    },
    getCoordinates: function() {
        if (this.watchId == null) { 
            this.watchId = navigator.geolocation.watchPosition(this.onSuccess, this.onError, { maximumAge: this.settings.maximumAge, enableHighAccuracy: this.settings.accurate});
        }
        return {
            latitude: this.position.latitude,
            longitude: this.position.longitude
        };
    }
}; 
```

正如您可能已经注意到的那样，当我调用 getCoordinates() 时，回调成功函数（我猜）超出了对象的范围，因此不知道“this”是什么......关于如何绕过的任何想法这个或正确的实现是什么？

感谢您的时间！

**稍后编辑：**我知道我需要修改函数以仅在找到位置后返回坐标。目前不确定如何执行此操作，但如果您有任何提示，那就太好了！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-12T06:43:44.967

好的，我想通了，部分是在其他线程关于绑定回调函数范围的帮助下：[JavaScript Callback Scope](https://stackoverflow.com/questions/183214/javascript-callback-scope)

要返回坐标，我正在使用回调函数。包括下面的代码，我将其标记为社区 wiki - 但如果有人有任何建议，请继续提出。一切似乎都运行良好，但也许我没有在这里做某事。

```
function Geolocation(maximumAge, accurate) {
    this.settings = {
            'maximumAge': maximumAge,
            'accurate': accurate
    }
}

Geolocation.prototype = {
    position: {
        latitude: null,
        longitude: null,
        altitude: null,
        accuracy: null,
        altitudeAccuracy: null,
        heading: null,
        speed: null
    },
    lastCheck: null,
    callback: null,
    watchId: null,
    onSuccess: function(position) {
        this.position.latitude = position.coords.latitude;
        this.position.longitude = position.coords.longitude;
        this.position.altitude = position.coords.altitude;
        this.position.accuracy = position.coords.accuracy;
        this.position.altitudeAccuracy = position.coords.altitudeAccuracy;
        this.position.heading = position.coords.heading;
        this.position.speed = position.coords.speed;
        this.lastCheck = new Date(position.timestamp);

        var pos = {
            latitude: this.position.latitude,
            longitude: this.position.longitude
        };
                // call callback with position and accuracy parameters
        this.callback(pos, this.position.accuracy);
    }, 
    onError: function(error) {
        console.log(error.code+' '+error.message);
    },
    getCoordinates: function(callback) {
                // Helper function to bind scope to callback function as seen at https://stackoverflow.com/questions/183214/javascript-callback-scope
        function bind(scope, fn) {
            return function () {
                fn.apply(scope, arguments);
            };
        }
                // Assign the callback function to the local member
        this.callback = callback;
                // watchPosition is a method that gets called each time the position changes. Making sure it's only getting called once (watchId can be used to stop the function when necessary
        if (this.watchId == null) {
                        // notice usage of the bind function here 
            this.watchId = navigator.geolocation.watchPosition(bind(this, this.onSuccess), bind(this, this.onError), { maximumAge: this.settings.maximumAge, enableHighAccuracy: this.settings.accurate});
        }
    }
}; 
```

使用示例：

```
var geo = new Geolocation(3000, true);
geo.getCoordinates(createMap);

function createMap(position, accuracy) {
    // Your code here
} 
```

# php - 用户名和密码无效

> ID：10118123
> 
> 赞同：0
> 
> 时间：2012-04-12T05:55:50.917
> 
> 标签：php, javascript, mysql, ajax, jquery

[伙计们，请检查我的代码..我通过http://localhost/mycart/login.php?is_ajax=1&username=srini&password=srini](http://localhost/mycart/login.php?is_ajax=1&username=srini&password=srini)执行以下代码然后即使传递了有效的用户名和密码，我也会收到此错误。请帮助我谢谢

> mysql_num_rows() 期望参数 1 是资源，布尔值在第 25 行的 C:\wamp\www\mycart\login.php 中给出，用户名 'srini' 和密码 'srini' 未找到

```
<?php

$is_ajax = $_REQUEST['is_ajax'];
if (isset($is_ajax) && $is_ajax) {
       error_reporting(E_ALL ^ E_NOTICE);
    $uname = $_REQUEST['username'];
    $pword = $_REQUEST['password'];

    $uname = htmlspecialchars($uname);
    $pword = htmlspecialchars($pword);

    echo $uname;
    echo $pword;

     $con = mysql_connect("localhost", "root", "root");

    if (!$con) {

        die('Connection Failed' . mysql_error());
    }

    mysql_select_db("test", $con);

   $result = mysql_query("SELECT * FROM login WHERE L1 = $uname AND L2 = $pword");
   $num_rows = mysql_num_rows($result);
    if ($num_rows > 0)
        echo "success";
    else
        echo "username '{$uname}' and password '{$pword}' not found";

mysql_close($con);

}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T05:58:52.163

您的结果可能是`false`. 试试这个：

```
$result = mysql_query("SELECT * FROM login WHERE L1 = '".$uname."' AND L2 = '".$pword."'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T05:59:19.607

`'`在 SQL 查询中使用来屏蔽字符串值：

`$result = mysql_query("SELECT * FROM login WHERE L1 = '" . $uname . "' AND L2 = '" . $pword . "'");`

# objective-c - 导航控制器的标签栏问题

> ID：10118126
> 
> 赞同：0
> 
> 时间：2012-04-12T05:56:05.023
> 
> 标签：objective-c, uinavigationcontroller, tabs, uitabbarcontroller, tabbar

我试图找到一种方法来避免这种情况，但似乎在任何地方都找不到

我在情节提要中有一个标签栏应用程序

在其中一个选项卡中，我有一个导航栏，可以连续显示三个视图

如果我转到第三个视图，然后切换选项卡并返回到相同的选项卡，我会看到第三个视图而不是第一个视图......有什么办法解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T06:09:38.260

在您的 appDelegate 类中实现标签栏的以下委托，不要忘记将标签栏的委托设置为您的 appDelegate 或标签栏所在的类。

```
- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController
{
[(UINavigationController*)self.tabBarController.selectedViewController popToRootViewControllerAnimated:NO];   
return YES;
} 
```

如果您使用故事板，请在您的 appDelegate 的 didFinishLaunching 方法中编写以下代码，然后您的委托方法将被调用。

```
 UITabBarController* tab = (UITabBarController*)self.window.rootViewController;
    tab.delegate = self; 
```

这会做你的工作，让我知道它是否不适合你。

# javascript - 根据另一个更改 crud 或 sqlform 中字段的选项

> ID：10118127
> 
> 赞同：0
> 
> 时间：2012-04-12T05:56:08.250
> 
> 标签：javascript, jquery, web2py

我正在创建一个联系方式应用程序。我想为用户提供一个包含城市和州字段的表单。我希望城市字段具有下拉选项（类似于 SQLFORM 中带有 IS_IN_SET(...) 验证器的字段）。如果该命名城市仅存在一个州（不提交表单），则在选择城市时填充州字段。如果两个以上的州有同一个城市，那么应该会出现一个下拉列表。在 web2py 中是否有任何可用的快捷方法，如 ajax 或 jquery？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:18:34.060

这些选项应该让您走上正轨：

*   [惰性选项小部件](http://dev.s-cubism.com/plugin_lazy_options_widget)
*   [级联下拉列表](http://www.web2pyslices.com/slices/take_slice/85)
*   [基于 Python 列表的级联选择](http://www.web2pyslices.com/slices/take_slice/89)
*   [使用 Ajax 级联下拉列表](http://www.web2pyslices.com/slices/take_slice/144)

# java - SQLException: 此结 果集已关闭

> ID：10118129
> 
> 赞同：1
> 
> 时间：2012-04-12T05:56:33.503
> 
> 标签：java, postgresql

我正在尝试比较来自三个的值`Resultset`，但是我尝试运行它时似乎有例外。有人可以帮我解决哪里出错了。我将不胜感激。这是引发错误的代码片段：

```
 java.sql.Connection connDB = null;

    java.lang.Object[] reconciledPaymentDetails = null;

    java.util.Vector shiftsVector = new java.util.Vector(1, 1);

    String status = "";

    try {

        Class.forName("org.postgresql.Driver");
        } 
    catch (ClassNotFoundException ex) {
        Logger.getLogger(DBConnection.class.getName()).log(Level.SEVERE, null, ex);
       }
    try {
        connDB = DriverManager.getConnection("jdbc:postgresql://" + hostName + ":" + portNumber 
        + "/" + dbName, userName, password);

       System.out.println("Connection established : [" + connDB.toString() + "]");

       java.sql.Statement pstmt = connDB.createStatement();

       java.sql.Statement pstmtShifts = connDB.createStatement();

       java.sql.ResultSet rset = pstmt.executeQuery("SELECT DISTINCT payment_mode,  
       transaction_type, credit FROM ac_cash_collection WHERE shift_no = '" + shiftNumber + 
       "'");

    while (rset.next()) {
       java.sql.ResultSet rsetShifts = pstmtShifts.executeQuery("SELECT DISTINCT amount, 
       shift_amount FROM ac_shift_collections WHERE shift_no = '" + shiftNumber + "' AND 
       pay_mode ilike '"+rset.getString(1) +"'");

          while (rsetShifts.next()) {

            java.sql.ResultSet rset2 = pstmt.executeQuery("select debit from ac_cash_book where 
            shift_no='"+shiftNumber+"'");

               while (rset2.next()){
                   double debit =rset2.getDouble("debit");

                    if((rset2.getDouble("debit")<=0 ))

                       status = "no_banked";

                    else if((rset2.getDouble("debit")==rsetShifts.getDouble("amount")) &&  
                         (rsetShifts.getDouble("amount"))< rsetShifts.getDouble("shift_amount"))

                       status= "BntClosed";

                   else if (rset2.getDouble(1)==rsetShifts.getDouble("shift_amount"))

                       Status ="bClosed";

              shiftsVector.addElement(rset.getString(1)+":"+rsetShifts.getString(1)+":"+status);
    } 
   }
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T06:08:26.250

```
java.sql.ResultSet rset = pstmt.executeQuery("SELECT DISTINCT payment_mode, transaction_type, credit FROM ac_cash_collection WHERE shift_no = '" + shiftNumber + "'");
java.sql.ResultSet rset2 = pstmt.executeQuery("select debit from ac_cash_book where shift_no='"+shiftNumber+"'"); 
```

您的第二个调用释放第一个生成的资源，这就是 ResultSet 关闭的原因。

# c++ - 快速 n 为大 n 选择 k mod p？

> ID：10118137
> 
> 赞同：47
> 
> 时间：2012-04-12T05:57:46.020
> 
> 标签：c++, algorithm, modular, binomial-coefficients

我所说的“大 n”是指数以百万计的东西。p 是素数。

我已经尝试过 [http://apps.topcoder.com/wiki/display/tc/SRM+467](http://apps.topcoder.com/wiki/display/tc/SRM+467) 但该功能似乎不正确（我用 144 选择 6 mod 5 对其进行了测试，当它应该给我时它给了我 0 2)

我试过 [http://online-judge.uva.es/board/viewtopic.php?f=22&t=42690](http://online-judge.uva.es/board/viewtopic.php?f=22&t=42690) 但我不完全理解

我还制作了一个使用逻辑 (combinations(n-1, k-1, p)%p + combination(n-1, k, p)%p) 的记忆递归函数，但它给了我堆栈溢出问题，因为n 很大

我试过卢卡斯定理，但它似乎很慢或不准确。

我要做的就是创建一个快速/准确的 n 为大 n 选择 k mod p。如果有人可以帮助我展示一个很好的实现，我将不胜感激。谢谢。

根据要求，对于大 n 命中堆栈溢出的记忆版本：

```
std::map<std::pair<long long, long long>, long long> memo;

long long combinations(long long n, long long k, long long p){
   if (n  < k) return 0;
   if (0 == n) return 0;
   if (0 == k) return 1;
   if (n == k) return 1;
   if (1 == k) return n;

   map<std::pair<long long, long long>, long long>::iterator it;

   if((it = memo.find(std::make_pair(n, k))) != memo.end()) {
        return it->second;
   }
   else
   {
        long long value = (combinations(n-1, k-1,p)%p + combinations(n-1, k,p)%p)%p;
        memo.insert(std::make_pair(std::make_pair(n, k), value));
        return value;
   }  
} 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-04-12T06:17:03.733

因此，这是解决问题的方法。

你当然知道公式：

```
comb(n,k) = n!/(k!*(n-k)!) = (n*(n-1)*...(n-k+1))/k! 
```

（参见[http://en.wikipedia.org/wiki/Binomial_coefficient#Computing_the_value_of_binomial_coefficients](http://en.wikipedia.org/wiki/Binomial_coefficient#Computing_the_value_of_binomial_coefficients)）

你知道如何计算分子：

```
long long res = 1;
for (long long i = n; i > n- k; --i) {
  res = (res * i) % p;
} 
```

现在，由于 p 是素数，因此*与 p 互质*的每个整数的倒数都已明确定义，即可以找到^(-1 。)这可以使用费马定理 a ^(p-1) =1(mod p) => a*a ^(p-2) =1(mod p) 等 a ^(-1) =a ^(p-2 来)完成。现在您需要做的就是实现快速求幂（例如使用二进制方法）：

```
long long degree(long long a, long long k, long long p) {
  long long res = 1;
  long long cur = a;

  while (k) {
    if (k % 2) {
      res = (res * cur) % p;
    }
    k /= 2;
    cur = (cur * cur) % p;
  }
  return res;
} 
```

现在您可以将分母添加到我们的结果中：

```
long long res = 1;
for (long long i = 1; i <= k; ++i) {
  res = (res * degree(i, p- 2)) % p;
} 
```

请注意，我在任何地方都使用 long long 以避免类型溢出。当然你不需要做`k`幂运算——你可以计算 k!(mod p) 然后只除一次：

```
long long denom = 1;
for (long long i = 1; i <= k; ++i) {
  denom = (denom * i) % p;
}
res = (res * degree(denom, p- 2)) % p; 
```

编辑：根据@dbaupp 的评论 if k >= p the k! 将等于 0 模 p 并且 (k!)^-1 不会被定义。为了避免这种情况，首先计算 p 在 n*(n-1)...(n-k+1) 和 k 中的程度！并比较它们：

```
int get_degree(long long n, long long p) { // returns the degree with which p is in n!
  int degree_num = 0;
  long long u = p;
  long long temp = n;

  while (u <= temp) {
    degree_num += temp / u;
    u *= p;
  }
  return degree_num;
}

long long combinations(int n, int k, long long p) {
  int num_degree = get_degree(n, p) - get_degree(n - k, p);
  int den_degree = get_degree(k, p);

  if (num_degree > den_degree) {
    return 0;
  }
  long long res = 1;
  for (long long i = n; i > n - k; --i) {
    long long ti = i;
    while(ti % p == 0) {
      ti /= p;
    }
    res = (res * ti) % p;
  }
  for (long long i = 1; i <= k; ++i) {
    long long ti = i;
    while(ti % p == 0) {
      ti /= p;
    }
    res = (res * degree(ti, p-2, p)) % p;
  }
  return res;
} 
```

编辑：还有一个可以添加到上述解决方案的优化 - 我们可以计算 k!(mod p) 然后计算该数字的倒数，而不是计算 k! 中每个倍数的倒数。因此，我们只需要支付一次取幂的对数。当然，我们必须再次丢弃每个倍数的 p 除数。我们只需要改变最后一个循环：

```
long long denom = 1;
for (long long i = 1; i <= k; ++i) {
  long long ti = i;
  while(ti % p == 0) {
    ti /= p;
  }
  denom = (denom * ti) % p;
}
res = (res * degree(denom, p-2, p)) % p; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-02T13:59:20.873

对于大`k`，我们可以通过利用两个基本事实来显着减少工作：

1.  如果`p`是素数，则`p`的素数因式分解中的指数`n!`由 给出`(n - s_p(n)) / (p-1)`，其中是基本表示`s_p(n)`中的数字之和（因此对于，它是 popcount）。因此，在 的素数分解中的指数是，特别是，当且仅当在基数中执行加法时没有进位（指数是进位的数量）时，它才为零。`n``p``p = 2``p``choose(n,k)``(s_p(k) + s_p(n-k) - s_p(n)) / (p-1)``k + (n-k)``p`

2.  **威尔逊定理：** `p`是素数，当且仅当`(p-1)! ≡ (-1) (mod p)`。

`p`因式分解中的指数`n!`通常由下式计算

```
long long factorial_exponent(long long n, long long p)
{
    long long ex = 0;
    do
    {
        n /= p;
        ex += n;
    }while(n > 0);
    return ex;
} 
```

`choose(n,k)`对by的可分性检查`p`并不是绝对必要的，但首先进行检查是合理的，因为通常是这样，然后工作量就会减少：

```
long long choose_mod(long long n, long long k, long long p)
{
    // We deal with the trivial cases first
    if (k < 0 || n < k) return 0;
    if (k == 0 || k == n) return 1;
    // Now check whether choose(n,k) is divisible by p
    if (factorial_exponent(n) > factorial_exponent(k) + factorial_exponent(n-k)) return 0;
    // If it's not divisible, do the generic work
    return choose_mod_one(n,k,p);
} 
```

现在让我们仔细看看`n!`。我们将数字`≤ n`分成 的倍数`p`和互质的数字`p`。和

```
n = q*p + r, 0 ≤ r < p 
```

`p`贡献的倍数`p^q * q!`。这些数字互质以`p`贡献`(j*p + k), 1 ≤ k < p`for`0 ≤ j < q`的乘积和 的乘积`(q*p + k), 1 ≤ k ≤ r`。

对于互质的数字，`p`我们只会对贡献模感兴趣`p`。每个完整的运行`j*p + k, 1 ≤ k < p`都与`(p-1)!`模数一致`p`，因此它们总共产生`(-1)^q`模数的贡献`p`。最后一次（可能）不完整的运行产生`r!`模数`p`。

所以如果我们写

```
n   = a*p + A
k   = b*p + B
n-k = c*p + C 
```

我们得到

```
choose(n,k) = p^a * a!/ (p^b * b! * p^c * c!) * cop(a,A) / (cop(b,B) * cop(c,C)) 
```

其中是`cop(m,r)`与 互质的所有数的乘积。`p``≤ m*p + r`

有两种可能性，`a = b + c`和`A = B + C`，或`a = b + c + 1`和`A = B + C - p`。

在我们的计算中，我们已经预先排除了第二种可能性，但这不是必须的。

在第一种情况下，`p`取消的明确权力，我们留下

```
choose(n,k) = a! / (b! * c!) * cop(a,A) / (cop(b,B) * cop(c,C))
            = choose(a,b) * cop(a,A) / (cop(b,B) * cop(c,C)) 
```

任何`p`除法`choose(n,k)`都来自`choose(a,b)`- 在我们的例子中，不会有，因为我们之前已经消除了这些情况 - 并且，虽然`cop(a,A) / (cop(b,B) * cop(c,C))`不必是整数（考虑 eg `choose(19,9) (mod 5)`），当考虑表达式 modulo 时`p`，`cop(m,r)`减少到`(-1)^m * r!`, 所以，因为`a = b + c`，`(-1)`取消，我们只剩下

```
choose(n,k) ≡ choose(a,b) * choose(A,B) (mod p) 
```

在第二种情况下，我们发现

```
choose(n,k) = choose(a,b) * p * cop(a,A)/ (cop(b,B) * cop(c,C)) 
```

因为`a = b + c + 1`. 最后一位的进位意味着`A < B`，所以模`p`

```
p * cop(a,A) / (cop(b,B) * cop(c,C)) ≡ 0 = choose(A,B) 
```

（我们可以用模逆的乘法代替除法，或者将其视为有理数的同余，这意味着分子可以被 整除`p`）。无论如何，我们再次发现

```
choose(n,k) ≡ choose(a,b) * choose(A,B) (mod p) 
```

现在我们可以重现该`choose(a,b)`部分。

**例子：**

```
choose(144,6) (mod 5)
144 = 28 * 5 + 4
  6 =  1 * 5 + 1
choose(144,6) ≡ choose(28,1) * choose(4,1) (mod 5)
              ≡ choose(3,1) * choose(4,1) (mod 5)
              ≡ 3 * 4 = 12 ≡ 2 (mod 5)

choose(12349,789) ≡ choose(2469,157) * choose(4,4)
                  ≡ choose(493,31) * choose(4,2) * choose(4,4
                  ≡ choose(98,6) * choose(3,1) * choose(4,2) * choose(4,4)
                  ≡ choose(19,1) * choose(3,1) * choose(3,1) * choose(4,2) * choose(4,4)
                  ≡ 4 * 3 * 3 * 1 * 1 = 36 ≡ 1 (mod 5) 
```

现在实现：

```
// Preconditions: 0 <= k <= n; p > 1 prime
long long choose_mod_one(long long n, long long k, long long p)
{
    // For small k, no recursion is necessary
    if (k < p) return choose_mod_two(n,k,p);
    long long q_n, r_n, q_k, r_k, choose;
    q_n = n / p;
    r_n = n % p;
    q_k = k / p;
    r_k = k % p;
    choose = choose_mod_two(r_n, r_k, p);
    // If the exponent of p in choose(n,k) isn't determined to be 0
    // before the calculation gets serious, short-cut here:
    /* if (choose == 0) return 0; */
    choose *= choose_mod_one(q_n, q_k, p);
    return choose % p;
}

// Preconditions: 0 <= k <= min(n,p-1); p > 1 prime
long long choose_mod_two(long long n, long long k, long long p)
{
    // reduce n modulo p
    n %= p;
    // Trivial checks
    if (n < k) return 0;
    if (k == 0 || k == n) return 1;
    // Now 0 < k < n, save a bit of work if k > n/2
    if (k > n/2) k = n-k;
    // calculate numerator and denominator modulo p
    long long num = n, den = 1;
    for(n = n-1; k > 1; --n, --k)
    {
        num = (num * n) % p;
        den = (den * k) % p;
    }
    // Invert denominator modulo p
    den = invert_mod(den,p);
    return (num * den) % p;
} 
```

要计算模逆，可以使用费马（所谓的小）定理

> 如果`p`是素数`a`且不能被 整除`p`，则`a^(p-1) ≡ 1 (mod p)`.

并将逆计算为`a^(p-2) (mod p)`，或使用适用于更广泛参数范围的方法、扩展欧几里得算法或连分数展开式，它为您提供任何一对互质（正）整数的模逆：

```
long long invert_mod(long long k, long long m)
{
    if (m == 0) return (k == 1 || k == -1) ? k : 0;
    if (m < 0) m = -m;
    k %= m;
    if (k < 0) k += m;
    int neg = 1;
    long long p1 = 1, p2 = 0, k1 = k, m1 = m, q, r, temp;
    while(k1 > 0) {
        q = m1 / k1;
        r = m1 % k1;
        temp = q*p1 + p2;
        p2 = p1;
        p1 = temp;
        m1 = k1;
        k1 = r;
        neg = !neg;
    }
    return neg ? m - p2 : p2;
} 
```

就像计算一样`a^(p-2) (mod p)`，这是一种`O(log p)`算法，对于某些输入，它的速度要快得多（实际上是`O(min(log k, log p))`，因此对于 small`k`和 large `p`，它要快得多），而对于其他输入则要慢得多。

总的来说，这种方式我们最多需要计算 O(log_p k) 个二项式系数 modulo `p`，其中每个二项式系数最多需要 O(p) 个操作，从而产生 O(p*log_p k) 个操作的总复杂度。当`k`显着大于时`p`，这比解要好得多`O(k)`。对于`k <= p`，它简化为`O(k)`具有一些开销的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-23T20:33:45.793

如果您不止一次计算它，还有另一种更快的方法。我将在 python 中发布代码，因为它可能是最容易转换成另一种语言的，尽管我会将 C++ 代码放在最后。

# 计算一次

蛮力：

```
def choose(n, k, m):
    ans = 1
    for i in range(k): ans *= (n-i)
    for i in range(k): ans //= i
    return ans % m 
```

但是计算可能会涉及到非常大的数字，所以我们可以使用模块化的 airthmetic 技巧来代替：

`(a * b) mod m = (a mod m) * (b mod m) mod m`

`(a / (b*c)) mod m = (a mod m) / ((b mod m) * (c mod m) mod m)`

`(a / b) mod m = (a mod m) * (b mod m)^-1`

注意`^-1`最后一个等式末尾的 。这是`b`mod的乘法逆元`m`。它基本上意味着`((b mod m) * (b mod m)^-1) mod m = 1`，就像`a * a^-1 = a * 1/a = 1`使用（非零）整数一样。

这可以通过几种方式计算，其中之一是扩展欧几里得算法：

```
def multinv(n, m):
    ''' Multiplicative inverse of n mod m '''
    if m == 1: return 0
    m0, y, x = m, 0, 1

    while n > 1:
        y, x = x - n//m*y, y
        m, n = n%m, m

    return x+m0 if x < 0 else x 
```

请注意，另一种方法，求幂，仅在`m`为素数时才有效。如果是，您可以这样做：

```
def powmod(b, e, m):
    ''' b^e mod m '''
    # Note: If you use python, there's a built-in pow(b, e, m) that's probably faster
    # But that's not in C++, so you can convert this instead:
    P = 1
    while e:
        if  e&1: P = P * b % m
        e >>= 1; b = b * b % m
    return P

def multinv(n, m):
    ''' Multiplicative inverse of n mod m, only if m is prime '''
    return powmod(n, m-2, m) 
```

但请注意，扩展欧几里得算法往往仍然运行得更快，即使它们在技术上具有相同的时间复杂度 O(log m)，因为它具有较低的常数因子。

所以现在完整的代码：

```
def multinv(n, m):
    ''' Multiplicative inverse of n mod m in log(m) '''
    if m == 1: return 0
    m0, y, x = m, 0, 1

    while n > 1:
        y, x = x - n//m*y, y
        m, n = n%m, m

    return x+m0 if x < 0 else x

def choose(n, k, m):
    num = den = 1
    for i in range(k): num = num * (n-i) % m
    for i in range(k): den = den * i % m
    return num * multinv(den, m) 
```

# 多次查询

我们可以分别计算分子和分母，然后将它们组合起来。但请注意，我们为分子计算的乘积是`n * (n-1) * (n-2) * (n-3) ... * (n-k+1)`。如果您曾经了解过一种叫做*前缀和*的东西，那么这非常相似。所以让我们应用它。

预先`fact[i] = i! mod m`计算`i`最大值`n`，可能是`1e7`（一千万）。那么，分子是`(fact[n] * fact[n-k]^-1) mod m`，分母是`fact[k]`。所以我们可以计算`choose(n, k, m) = fact[n] * multinv(fact[n-k], m) % m * multinv(fact[k], m) % m`。

Python代码：

```
MAXN = 1000 # Increase if necessary
MOD = 10**9+7 # A common mod that's used, change if necessary

fact = [1]
for i in range(1, MAXN+1):
    fact.append(fact[-1] * i % MOD)

def multinv(n, m):
    ''' Multiplicative inverse of n mod m in log(m) '''
    if m == 1: return 0
    m0, y, x = m, 0, 1

    while n > 1:
        y, x = x - n//m*y, y
        m, n = n%m, m

    return x+m0 if x < 0 else x

def choose(n, k, m):
    return fact[n] * multinv(fact[n-k] * fact[k] % m, m) % m 
```

C++ 代码：

```
#include <iostream>
using namespace std;

const int MAXN = 1000; // Increase if necessary
const int MOD = 1e9+7; // A common mod that's used, change if necessary

int fact[MAXN+1];

int multinv(int n, int m) {
    /* Multiplicative inverse of n mod m in log(m) */
    if (m == 1) return 0;
    int m0 = m, y = 0, x = 1, t;

    while (n > 1) {
        t = y;
        y = x - n/m*y;
        x = t;

        t = m;
        m = n%m;
        n = t;
    }

    return x<0 ? x+m0 : x;
}

int choose(int n, int k, int m) {
    return (long long) fact[n]
         * multinv((long long) fact[n-k] * fact[k] % m, m) % m;
}

int main() {
    fact[0] = 1;
    for (int i = 1; i <= MAXN; i++) {
        fact[i] = (long long) fact[i-1] * i % MOD;
    }

    cout << choose(4, 2, MOD) << '\n';
    cout << choose(1e6, 1e3, MOD) << '\n';
} 
```

请注意，我正在铸造`long long`以避免溢出。

# java - payroll : 添加多个数组值

> ID：10118139
> 
> 赞同：0
> 
> 时间：2012-04-12T05:58:04.487
> 
> 标签：java, arrays, arraylist

问题是创建一个程序，要求用户输入多少员工。然后对于每个员工，输入姓名、小时工资率、工作小时数。计算员工工资、加班费和总工资的结果。

我的困境是如何找到所有工资的总和。所有员工工资、所有员工加班工资和所有员工总工资

前任。用户输入： 2 名员工（创建两个数组） 将输入两个输入（姓名、费率、工作小时数） 将计算
两个结果（工资、加班费、总工资） 如何将工资、加班费和总工资相加来自两个员工？

这是我想出的代码，但它需要工作

导入 java.util.Scanner；

```
public class paycheck {
   public static void main(String[] args)
   {

       Scanner input= new Scanner(System.in);
        System.out.print("Enter number of Employees: ");
        int numberOfEmp= input.nextInt();

        int[] arrayList= new int[numberOfEmp];
         for (int i = 0; i < arrayList.length; i++){

        System.out.print("Enter Employee Name: ");
        String empName= input.next();

        System.out.print("Enter hourly rate: ");
        int rate= input.nextInt();

        System.out.print("Enter hours worked: ");  
        int hours=input.nextInt();

       if (hours >=40)
   {
       double regPay=  hours * rate;
       double otPay = (hours-40) *(rate*1.5);
       double totalPay= regPay + otPay;
       System.out.print("\nEmployee name: " + empName+"\n Regular pay: " + regPay +"\n Overtime pay: " + otPay+ "\n Total pay: " + totalPay+ "\n"+ "\n");
   }

        else
   {
       double regPay=  hours * rate;
       double otPay =0;
       double totalPay= regPay + otPay;
       System.out.print("\nEmployee name: " + empName+ "\n Regular pay: " + regPay +"\n Overtime pay: " + otPay+ "\n Total pay: " + totalPay+ "\n"+ "\n");
    }

    }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T06:13:09.413

1.  创建一个包含您要跟踪的值的员工对象。
2.  创建员工的 ArrayList。
3.  创建一个允许用户输入员工信息的 while 循环，然后询问用户是继续还是停止。如果他们想停止退出循环并打印您的数据。

如果您创建一个员工对象，您可能希望为其提供一些静态变量来跟踪 total_pay、total_ot_pay 和您要跟踪的其他“总计”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:02:53.287

为什么不保留三个不同的变量，比如 allsalary、allovertime、allpay 并在输入任何新员工时继续添加。

# android - android facebook授权onActivityResult（）总是被调用，数据为null，resultCode为0（零/RESULT_CANCELED）

> ID：10118141
> 
> 赞同：0
> 
> 时间：2012-04-12T05:58:31.807
> 
> 标签：android, android-activity

我正在尝试将 facebook 集成到一个 android 应用程序中。我已将代码添加到 facebook 授权中（按照此处[http://developers.facebook.com/docs/mobile/android/build/](http://developers.facebook.com/docs/mobile/android/build/)的指南执行所有步骤）。每当 facebook 授权发生时，onActivityResult 将被回调，但数据为 null，resultCode 为 0（零/RESULT_CANCELED）。

这是我的代码：

主要活动类

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {        
    super.onActivityResult(requestCode, resultCode, data);        
    MCAndroidFBIntegration.authorizeCallback(requestCode, resultCode, data);
} 
```

MCAndroidFBIntegration.java

公共类 MCAndroidFBIntegration 实现 IFacebookIntegration {

```
private static final String APP_ID = APP_ID_NUMBER;
private static Facebook facebook;
private AsyncFacebookRunner mAsyncFBRunner;
public Preferences mPrefs;
private Context ctx;
private static MCAndroidFBIntegration mcAndroidFBIntegration;

public MCAndroidFBIntegration(Context ctx) {
    this.ctx = ctx;
}

@Override
public void integrate() {
    // Integrate with Facebook
    facebook = new Facebook(APP_ID);
    mAsyncFBRunner = new AsyncFacebookRunner(facebook);
    loginToFacebook();      
}

private void loginToFacebook() {
    mPrefs = GamePreference.getPreferences();
    String accessToken = mPrefs.getString(Config.ACCESS_TOKEN, null);
    long expires = mPrefs.getLong(Config.ACCESS_EXPIRES, 0);

    if (accessToken != null) {
        facebook.setAccessToken(accessToken);
    }

    if (expires != 0) {
        facebook.setAccessExpires(expires);
    }

    if (!facebook.isSessionValid()) {
        facebook.authorize((Activity) ctx, new String[] { "publish_stream",
                "read_stream", "offline_access"}, new DialogListener() {

            @Override
            public void onCancel() {
                // Function to handle cancel event
                System.out.println("Facebook:: event cancelled");
            }

            @Override
            public void onComplete(Bundle values) {
                // Function to handle complete event
                // Edit Preferences and update facebook acess_token
                System.out
                        .println("Facebook:: setting access token and expire time in preferences");
                User user = User.getUser();
                if (user != null) {
                    user.setAccessToken(facebook.getAccessToken());
                    user.setAccessExpires(facebook.getAccessExpires());
                    user.updatePrefs();
                    mPrefs.flush();
                }
            }

            @Override
            public void onError(DialogError error) {
                // Function to handle error
                System.out.println("Facebook:: Error - "
                        + error.getLocalizedMessage());

            }

            @Override
            public void onFacebookError(FacebookError fberror) {
                // Function to handle Facebook errors
                System.out.println("Facebook:: fbError - code: "
                        + fberror.getErrorCode() + "  message: "
                        + fberror.getLocalizedMessage());
            }

        });
    }
}

public static void authorizeCallback(int requestCode, int resultCode,
        Intent data) {
    if (data != null) {
        String error = data.getStringExtra("error");
        if (error != null) {
            String description = data.getStringExtra("error_description");
            System.out.println("Facebook:: error desc - " + description);
        } else {
            String token = data.getStringExtra("access_token");
            String expires = data.getStringExtra("expires_in");
            System.out.println("Facebook:: call back access token - "
                    + token);
            System.out.println("Facebook:: call back expires - " + expires);
        }
    }
    facebook.authorizeCallback(requestCode, resultCode, data);
} 
```

}

凸轮有人请告诉我我在这里做的错误是什么。

谢谢， 卡马尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:33:52.143

我有点面临同样的问题。并更新下面的代码来解决它。

```
public void loginAndPostToWall() {
  facebook.authorize(this, PERMISSIONS, Facebook.FORCE_DIALOG_AUTH,
        new LoginDialogListener());} 
```

# extjs - extjs 中 onLoad() 的自动选择问题

> ID：10118157
> 
> 赞同：1
> 
> 时间：2012-04-12T06:01:01.227
> 
> 标签：extjs, extjs3

我正在使用listner beforequery 来过滤组合框。过滤时一切都很好，但我面临一个问题，例如：

当我们在组合框中输入所需的字符以过滤它们时，它们会被自动选择..所以当我们想要输入新字符时，我们必须按右侧箭头来删除选择，否则剩余的字符将被删除......请帮助解释为什么这种行为。

代码：

```
xtype: 'combo',
            fieldLabel: 'Label',
            anchor: '100%',
            enableKeyEvents: true,
            allowBlank: false,
            displayField: 'value',
            store: 'level1Store',
            lazyInit: false,
            mode: 'local',
            forceSelection: true,
            disableKeyFilter: true,
            editable: true,
            triggerAction: 'all',
            valueField: 'key',
            name: 1,
            ref: 'combo1',
            id: 'field1' 
```

要过滤的侦听器代码：

```
Ext.getCmp('field1').addListener({
        beforequery: function (e) {
            if (e.query && e.query.indexOf('?') != -1) {
                e.cancel = true;
                var query = new RegExp(String.format('^{0}', e.query.replace(/\?/g, '[A-Za-z0-9]')));
                this.onLoad();
                this.store.clearFilter(true);
                this.store.filter(this.displayField, query);
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T15:29:30.080

你可以做两件事：

1）您可以用您自定义的所需行为覆盖此默认行为。

2）您可以收听组合的焦点事件并取消选择文本。

# ruby - 如何将 CSV 转换为 Excel？

> ID：10118158
> 
> 赞同：10
> 
> 时间：2012-04-12T06:01:01.960
> 
> 标签：ruby, excel, csv, gem

Ruby 中有没有将 CSV 文件转换为 Excel 的插件。我做了一点谷歌，但我发现的只是将 Excel 文件转换为 CSV。我知道一些我可以稍微调整并用于将 Excel 转换为 CSV 的宝石，但我需要知道是否有人以前做过。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-12T06:47:08.507

根据[这篇文章](https://stackoverflow.com/questions/7428997/whats-gem-can-operate-excel-on-linux)，[电子表格](https://rubygems.org/gems/spreadsheet)宝石是一种可能性。看起来这是一个非常受欢迎的宝石。看看这个。例子：

```
book = Spreadsheet::Workbook.new
sheet1 = book.create_worksheet

header_format = Spreadsheet::Format.new(
  :weight => :bold,
  :horizontal_align => :center,
  :bottom => true,
  :locked => true
)

sheet1.row(0).default_format = header_format

FasterCSV.open(input_path, 'r') do |csv|
  csv.each_with_index do |row, i|
    sheet1.row(i).replace(row)
  end
end

book.write(output_path) 
```

根据[这篇文章](https://stackoverflow.com/questions/9886361/use-different-color-for-different-values-in-drop-down-for-excel-files-created)，[write_xlsx](http://rubygems.org/gems/write_xlsx)是一种可能性。

我使用[Apache POI 库](http://poi.apache.org/spreadsheet/index.html)和 JRuby 来导出 xls 文件。这是一个简单的例子。

```
require 'java'
require 'poi.jar'
# require 'poi-ooxml.jar'
require 'rubygems'
require 'fastercsv'

java_import org.apache.poi.hssf.usermodel.HSSFWorkbook;

wb = HSSFWorkbook.new # OR XSSFWorkbook, for xlsx
sheet = wb.create_sheet('Sheet 1')

FasterCSV.open(ARGV.first) do |csv|
  csv.each_with_index do |csv_row, line_no|
    row = sheet.createRow(line_no)
    csv_row.each_with_index do |csv_value, col_no|
      cell = row.createCell(col_no)
      cell.setCellValue(csv_value) unless csv_value.nil? # can't pass nil.
    end
  end
end

f = java.io.FileOutputStream.new("workbook.xls")
wb.write(f)
f.close 
```

格式化 POI 电子表格的一些有用方法是

*   `sheet.createFreezePane(0,1,0,1)`
*   `wb.setRepeatingRowsAndColumns(0, -1, -1, 0, 1)`
*   `sheet.setColumnWidth(i, 100 *256)`
*   `sheet.autoSizeColumn(i)`，但请注意，如果您在无头模式下运行，则必须调用`java.lang.System.setProperty("java.awt.headless", "true")`

如果您安装了 Excel，您也可以在 Windows 上使用 Win32ole

```
require 'win32ole'
require 'rubygems'
require 'fastercsv'

xl = WIN32OLE.new('Excel.Application')
xl.Visible = 0
wb = xl.Workbooks.Add
ws = wb.Worksheets(1)

FasterCSV.open(ARGV.first) do |csv|
  csv.each_with_index do |csv_row, line_no|
    csv_row.each_with_index do |value, col|
      ws.Cells(line_no + 1, col + 1).Value = value
    end
  end
end

wb.SaveAs("workbook.xls", 56) # 56 = xlExcel8 aka Excel 97-2003\. i.e. xls
wb.SaveAs("workbook.xlsx", 51) # 51 = xlOpenXMLWorkbook
wb.SaveAs("workbook.xlsb", 50) # 50 = xlExcel12

wb.Close(2) #xlDoNotSaveChanges
xl.Quit 
```

使用 Excel 格式化的一些有用方法是

*   `xl.Rows(1).Font.Bold = true`
*   `ws.Cells.EntireColumn.AutoFit`

另一种选择是直接写入 Microsoft 的[XML 电子表格](http://msdn.microsoft.com/en-us/library/aa140066%28v=office.10%29)格式，正如 Railscasts.com 的 Ryan Bates 在他的[*导出 CSV 和 Excel*](http://railscasts.com/episodes/362-exporting-csv-and-excel)[章节](http://railscasts.com/episodes/362-exporting-csv-and-excel)[的结尾处](http://railscasts.com/episodes/362-exporting-csv-and-excel)*所做的那样。*

 *```
<?xml version="1.0"?>
<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet"
  xmlns:o="urn:schemas-microsoft-com:office:office"
  xmlns:x="urn:schemas-microsoft-com:office:excel"
  xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"
  xmlns:html="http://www.w3.org/TR/REC-html40">
  <Worksheet ss:Name="Sheet1">
    <Table>
      <Row>
        <Cell><Data ss:Type="String">ID</Data></Cell>
        <Cell><Data ss:Type="String">Name</Data></Cell>
        <Cell><Data ss:Type="String">Release Date</Data></Cell>
        <Cell><Data ss:Type="String">Price</Data></Cell>
      </Row>
    <% @products.each do |product| %>
      <Row>
        <Cell><Data ss:Type="Number"><%= product.id %></Data></Cell>
        <Cell><Data ss:Type="String"><%= product.name %></Data></Cell>
        <Cell><Data ss:Type="String"><%= product.released_on %></Data></Cell>
        <Cell><Data ss:Type="Number"><%= product.price %></Data></Cell>
      </Row>
    <% end %>
    </Table>
  </Worksheet>
</Workbook> 
```

[这颗宝石看起来也很有前途](https://github.com/randym/axlsx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T06:55:47.720

如果您没有找到任何将 CSV 转换为 EXCEL 的 gem，那么您可以尝试分别找到两个 gem

1.  读取/写入 CSV（用于读取 CSV 文件）例如[FasterCSV](http://fastercsv.rubyforge.org/)
2.  读取/写入 EXCEL（用于写入 EXCEL 文件）例如[SpreadSheet](https://rubygems.org/gems/spreadsheet)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-07T14:13:00.493

对于那些目前看到这一点的人来说，这八年来语法发生了一些变化。根据先前的答案（为了您的复制和粘贴习惯而在此处重新复制），以下内容对我来说非常有效：

```
def convert_csv_to_xlsx
  book = Spreadsheet::Workbook.new
  sheet1 = book.create_worksheet

  header_format = Spreadsheet::Format.new(
    weight: :bold,
    horizontal_align: :center,
    bottom: :medium,
    locked: true
  )

  sheet1.row(0).default_format = header_format

  CSV.open(input_path, 'r') do |csv|
    csv.each_with_index do |row, i|
      sheet1.row(i).replace(row)
    end
  end

  book.write(output_path)
end 
```

IE：FasterCSV 现在只是 CSV 并且不推荐使用 :bottom 为 true

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2019-03-10T15:48:55.810

简单的方法是：

1.  使用您喜欢的文本编辑器（如 Sublime Text）打开 CSV。记事本没问题
2.  将所有`,`（逗号）替换为选项卡`\t`
3.  使用扩展名另存为`.xls`
4.  使用 Excel 和 TADA 打开文件！干得好！*

# javascript - jquery如何根据内容减少textarea中的列数

> ID：10118159
> 
> 赞同：0
> 
> 时间：2012-04-12T06:01:07.840
> 
> 标签：javascript, jquery, html, css

我有一个带有默认列数的文本区域，比如 10 或 15 之类的。我希望文本区域在模糊时将文本收缩包裹在里面。有谁知道如何做到这一点？

到目前为止我有

```
$('textarea').live('blur', function() {
    var textAreaWidth = $(this).val().length;
    $(this).attr('cols', 'textAreaWidth');

}); 
```

但这很丑陋，原因很明显。我只是不知道该怎么做。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T06:15:28.040

删除 'textAreaWidth' 周围的单引号

`$(this).attr('cols', 'textAreaWidth');`

这是一个变量，不需要引号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T06:26:07.473

如果您只想减小大小，则应检查该值是否小于 20，然后减少列数。试试这个：

```
<textarea rows="2" cols="20"></textarea>

$('textarea').on('blur', function() {
    var textAreaWidth = $(this).val().length;

    if (textAreaWidth < 20) {
       $(this).attr('cols', textAreaWidth);
    }
    $('textarea').on('keypress', function() {
       $(this).attr('cols', '20');
    });   
}); 
```

[http://jsfiddle.net/4bccm/](http://jsfiddle.net/4bccm/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T06:29:21.650

```
$('textarea').bind('blur keyup', function() {
    $(this).attr('cols', $(this).val().length);
});​ 
```

这使它在您键入/模糊时缩小或增长。

# python - Beautifulsoup，达到最大递归深度

> ID：10118160
> 
> 赞同：6
> 
> 时间：2012-04-12T06:01:12.930
> 
> 标签：python, beautifulsoup

这是一个`beautifulsoup`在所有`<p>`html 标记中抓取内容的过程。从某些网页抓取内容后，我收到一条错误消息，提示超出最大递归深度。

```
def printText(tags):
    for tag in tags:
        if tag.__class__ == NavigableString:
            print tag,
        else:
            printText(tag)
    print ""
#loop over urls, send soup to printText procedure 
```

跟踪的底部：

```
 File "web_content.py", line 16, in printText
    printText(tag)
  File "web_content.py", line 16, in printText
    printText(tag)
  File "web_content.py", line 16, in printText
    printText(tag)
  File "web_content.py", line 16, in printText
    printText(tag)
  File "web_content.py", line 16, in printText
    printText(tag)
  File "web_content.py", line 13, in printText
    if tag.__class__ == NavigableString:
RuntimeError: maximum recursion depth exceeded in cmp 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T13:58:21.330

如果您的 printText() 遇到除 NavigableString 以外的任何内容，它会递归调用自身。这包括 NavigableString 的子类，例如 Comment。在 Comment 上调用 printText() 会迭代评论的文本，并导致您看到的无限递归。

我建议在 if 语句中使用 isinstance() 而不是比较类对象：

```
if isinstance(tag, basestring): 
```

我通过在递归之前插入打印语句来诊断这个问题：

```
print "recursing on", tag, type(tag)
printText(tag) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T06:06:00.527

你可能打了一个字符串。迭代一个字符串会产生长度为 1 的字符串。迭代那个长度为 1 的字符串会产生一个长度为 1 的字符串。迭代*那个*1-length 字符串...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T09:31:26.963

我有同样的问题。如果您有深度约为 480 级的嵌套标签，并且您想将此标签转换为字符串/unicode，您将获得`RuntimeError maximum recursion depth reached`. 每个级别都需要两个嵌套方法调用，很快你就会达到默认的 1000 个嵌套 python 调用。您可以提高此级别，也可以使用此助手。它从 html 中提取所有文本并将其显示在预环境中：

```
def beautiful_soup_tag_to_unicode(tag):
    try:
        return unicode(tag)
    except RuntimeError as e:
        if not str(e).startswith('maximum recursion'):
            raise
        # If you have more than 480 level of nested tags you can hit the maximum recursion level
        out=[]
        for mystring in tag.findAll(text=True):
            mystring=mystring.strip()
            if not mystring:
                continue
            out.append(mystring)
        return u'<pre>%s</pre>' % '\n'.join(out) 
```

# jasper-reports - Jasper Reports：如何在一页中打印多页

> ID：10118161
> 
> 赞同：1
> 
> 时间：2012-04-12T06:01:19.087
> 
> 标签：jasper-reports, ireport

我是 Jasper Reports 的新手。我有 2 组的报告。根据查询，正在打印多个页面。

第 1 组高度 - 95 分和第 2 组高度 - 144 分

我希望将这些多页打印在一页中（我想在一页中合并 5 页）。每个页面高度为 239 点。（即使页面内容少于 239 点，我想将剩余部分保持为空白，并在 239 点之后开始下一页）。我尝试创建一个报告并将上述报告作为子报告包含在内，并将主报告的高度设置为 1195 (239 * 5) 点。尽管如此，这些都被打印在不同的页面上。

导出的结果是： ![报告打印时看起来像这样](../Images/66e61dae1ca043058adc39057adf5ea5.png)

报告的主要设计是： ![主报告 - 这包括 2 个子报告](../Images/f3954a3786e950c8d5e42fcd5f5950be.png)

第一个子报表设计是： ![第一份子报告](../Images/e40173717df01e479b358e27971639c5.png)

第二个子报表设计是： ![第二分报告](../Images/3f86a49d400717d7782cf3f5a4437973.png)
请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T00:47:13.490

我已经根据您的规格进行了测试，它似乎工作得很好。我可以在这里给你一些建议。

1.  在您的主报告设计中，子报告元素的高度无关紧要，只要它等于基础带区即可。如果子报表元素较短，则差异将出现在结果中。
2.  子报告的页面高度无关紧要，只是乐队的总高度。
3.  检查以确保尚未在您创建的组上选择“在新页面上开始”选项。这是最有可能的问题。

如果前 3 项未能解决您的问题，请查看下面的示例并比较差异。

**主报告：**

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="MainReport1" language="groovy" pageWidth="595" pageHeight="1195" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="0" bottomMargin="0">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
        <defaultValueExpression><![CDATA["C:\\Users\\Bizz\\Documents\\JasperReports\\"]]></defaultValueExpression>
    </parameter>
    <queryString>
        <![CDATA[SELECT
     PRODUCT."ID" AS PRODUCT_ID,
     PRODUCT."NAME" AS PRODUCT_NAME,
     PRODUCT."COST" AS PRODUCT_COST
FROM
     "PUBLIC"."PRODUCT" PRODUCT]]>
    </queryString>
    <field name="PRODUCT_ID" class="java.lang.Integer"/>
    <field name="PRODUCT_NAME" class="java.lang.String"/>
    <field name="PRODUCT_COST" class="java.math.BigDecimal"/>
    <group name="Group1">
        <groupExpression><![CDATA[$F{PRODUCT_ID}]]></groupExpression>
        <groupHeader>
            <band height="50">
                <subreport>
                    <reportElement x="0" y="0" width="200" height="50"/>
                    <subreportParameter name="ProductID">
                        <subreportParameterExpression><![CDATA[$F{PRODUCT_ID}]]></subreportParameterExpression>
                    </subreportParameter>
                    <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
                    <subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "MainReport1_subreport2.jasper"]]></subreportExpression>
                </subreport>
            </band>
        </groupHeader>
    </group>
    <group name="Group2">
        <groupExpression><![CDATA["2"]]></groupExpression>
        <groupHeader>
            <band height="50">
                <subreport>
                    <reportElement x="0" y="0" width="200" height="50"/>
                    <subreportParameter name="ProductID">
                        <subreportParameterExpression><![CDATA[$F{PRODUCT_ID}]]></subreportParameterExpression>
                    </subreportParameter>
                    <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
                    <subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "MainReport1_subreport1.jasper"]]></subreportExpression>
                </subreport>
            </band>
        </groupHeader>
    </group>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band splitType="Stretch"/>
    </title>
    <pageHeader>
        <band splitType="Stretch"/>
    </pageHeader>
    <columnHeader>
        <band splitType="Stretch"/>
    </columnHeader>
    <detail>
        <band splitType="Stretch"/>
    </detail>
    <columnFooter>
        <band splitType="Stretch"/>
    </columnFooter>
    <pageFooter>
        <band splitType="Stretch"/>
    </pageFooter>
    <summary>
        <band splitType="Stretch"/>
    </summary>
</jasperReport> 
```

**子报表1：**

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="MainReport1_subreport1" language="groovy" pageWidth="555" pageHeight="95" columnWidth="555" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <parameter name="ProductID" class="java.lang.Integer"/>
    <queryString>
        <![CDATA[SELECT
     PRODUCT."ID" AS PRODUCT_ID,
     PRODUCT."NAME" AS PRODUCT_NAME,
     PRODUCT."COST" AS PRODUCT_COST
FROM
     "PUBLIC"."PRODUCT" PRODUCT
where
  product_id = $P{ProductID}]]>
    </queryString>
    <field name="PRODUCT_ID" class="java.lang.Integer"/>
    <field name="PRODUCT_NAME" class="java.lang.String"/>
    <field name="PRODUCT_COST" class="java.math.BigDecimal"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band splitType="Stretch"/>
    </title>
    <pageHeader>
        <band splitType="Stretch"/>
    </pageHeader>
    <columnHeader>
        <band splitType="Stretch"/>
    </columnHeader>
    <detail>
        <band height="95" splitType="Stretch">
            <staticText>
                <reportElement x="0" y="0" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[PRODUCT_ID]]></text>
            </staticText>
            <textField>
                <reportElement x="100" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{PRODUCT_ID}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement x="0" y="20" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[PRODUCT_NAME]]></text>
            </staticText>
            <textField>
                <reportElement x="100" y="20" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{PRODUCT_NAME}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement x="0" y="40" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[PRODUCT_COST]]></text>
            </staticText>
            <textField>
                <reportElement x="100" y="40" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{PRODUCT_COST}]]></textFieldExpression>
            </textField>
            <componentElement>
                <reportElement x="0" y="60" width="200" height="35"/>
                <jr:barbecue xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd" type="3of9" drawText="false" checksumRequired="false">
                    <jr:codeExpression><![CDATA[$F{PRODUCT_ID}]]></jr:codeExpression>
                </jr:barbecue>
            </componentElement>
        </band>
    </detail>
    <columnFooter>
        <band splitType="Stretch"/>
    </columnFooter>
    <pageFooter>
        <band splitType="Stretch"/>
    </pageFooter>
    <summary>
        <band splitType="Stretch"/>
    </summary>
</jasperReport> 
```

**子报告2：**

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="MainReport1_subreport2" language="groovy" pageWidth="555" pageHeight="888" columnWidth="555" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <parameter name="ProductID" class="java.lang.Integer"/>
    <queryString>
        <![CDATA[SELECT
     PRODUCT."ID" AS PRODUCT_ID,
     PRODUCT."NAME" AS PRODUCT_NAME,
     PRODUCT."COST" AS PRODUCT_COST
FROM
     "PUBLIC"."PRODUCT" PRODUCT
where
  product_id = $P{ProductID}]]>
    </queryString>
    <field name="PRODUCT_ID" class="java.lang.Integer"/>
    <field name="PRODUCT_NAME" class="java.lang.String"/>
    <field name="PRODUCT_COST" class="java.math.BigDecimal"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band splitType="Stretch"/>
    </title>
    <pageHeader>
        <band splitType="Stretch"/>
    </pageHeader>
    <columnHeader>
        <band splitType="Stretch"/>
    </columnHeader>
    <detail>
        <band height="144" splitType="Stretch">
            <staticText>
                <reportElement x="0" y="0" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[PRODUCT_ID]]></text>
            </staticText>
            <textField>
                <reportElement x="100" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{PRODUCT_ID}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement x="0" y="20" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[PRODUCT_NAME]]></text>
            </staticText>
            <textField>
                <reportElement x="100" y="20" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{PRODUCT_NAME}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement x="0" y="40" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[PRODUCT_COST]]></text>
            </staticText>
            <textField>
                <reportElement x="100" y="40" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{PRODUCT_COST}]]></textFieldExpression>
            </textField>
            <componentElement>
                <reportElement x="0" y="60" width="302" height="84"/>
                <jr:barbecue xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd" type="3of9" drawText="false" checksumRequired="false">
                    <jr:codeExpression><![CDATA[$F{PRODUCT_ID}]]></jr:codeExpression>
                </jr:barbecue>
            </componentElement>
        </band>
    </detail>
    <columnFooter>
        <band splitType="Stretch"/>
    </columnFooter>
    <pageFooter>
        <band splitType="Stretch"/>
    </pageFooter>
    <summary>
        <band splitType="Stretch"/>
    </summary>
</jasperReport> 
```

# c - 在单个解析中解析大文件以获取某些信息

> ID：10118162
> 
> 赞同：0
> 
> 时间：2012-04-12T06:01:21.070
> 
> 标签：c, networking

我有一个包含特定结构的大文件。我想知道结构中特定字段的前 10 个最常出现的值。我可以在一次解析中完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:11:18.510

您需要存储和更新包含字段和出现次数的关联数组。根据有多少不同的字段，您的记忆将成为限制。

完成后，根据值对数组进行排序。

AFAIK，C 不包括关联数组数据类型，因此您需要使用 3rd 方库，请参阅[寻找 C 中的良好哈希表实现以](https://stackoverflow.com/questions/1138742/looking-for-a-good-hash-table-implementation-in-c)获取一些选项。

至于排序，有[http://linux.die.net/man/3/qsort](http://linux.die.net/man/3/qsort)。

因此，忽略可能的内存要求，您可以一次性完成。

# asp.net - 如何读取 .html 页面中的 web.config 设置？

> ID：10118165
> 
> 赞同：0
> 
> 时间：2012-04-12T06:01:22.520
> 
> 标签：asp.net, html, web-config

我正在使用 ASP.NET 3.5 Web 表单。
我已将我的站点路径存储在 web.config 添加名为“CommonPath”的键。
现在我有一个简单的 html 页面，想在这个静态 html 页面上使用这个键。那么我该怎么做呢？或者还有其他方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T06:33:50.673

我过去所做的是将“.html”页面也注册为动态页面。（即就像ASPX）。

这可以通过您的“web.config”文件来完成：

```
....
<system.web>
    <compilation ...>
        <buildProviders>
            <add extension=".html" 
                 type="System.Web.Compilation.PageBuildProvider" />
        </buildProviders>
    .... 
```

和

```
....
<system.webServer>
    <handlers>
        <remove name="WebServiceHandlerFactory-Integrated" />
        <add name="PageHandlerFactory-Integrated-HTML" path="*.html" 
             verb="GET,HEAD,POST,DEBUG" type="System.Web.UI.PageHandlerFactory" 
             resourceType="Unspecified" preCondition="integratedMode" />
    </handlers>
.... 
```

正如[Robert](https://stackoverflow.com/users/75642/robert-koritnik)所指出的，这适用于 IIS 7 和 IIS 7.5（可能也适用于以上版本）。如果您使用的是 IIS 6，则必须通过 IIS 管理控制台进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T06:23:35.663

根据 Ramesh 和 Andrew Barber 的评论：最好的方法是将 .html 文件重命名为 .aspx，以便 ASP.NET 处理它，而不是 IIS 只返回静态文件。将简单的重定向永久规则添加到您的 Web 服务器以处理遗留流量。如果您必须保持 .html 文件不变，您可以添加一个重写规则（如果您安装了 IIS 重写模块）以在无人知道的情况下将 .html 文件指向 .aspx 文件；或者，或者，使用 ASP.NET 路由来实现相同的效果。

# yii - 插入 Jquery 脚本文件

> ID：10118169
> 
> 赞同：0
> 
> 时间：2012-04-12T06:01:48.203
> 
> 标签：yii

嘿伙计们！在我的网站上，我注意到在某些页面上我没有包含 Jquery 库。但在其他页面上，我在我的 head 标签中看到它：

```
 <head>
        ...
        <script type="text/javascript" src="/assets/fe9bd624/jquery.js"></script>
        <script type="text/javascript" src="/assets/fe9bd624/jquery.ba-bbq.js"></script>
        ...
    </head> 
```

在我的主题 layout/main.php 中，我的 head 标签中没有 Jquery 文件。所以问题是：什么控制在我的页面上插入 Jquery，以及如何在所有页面上插入它。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T07:49:54.920

只有调用 registerCoreScript 方法时，jQuery 才会自动插入。Yii 没有内置任何东西来强迫你使用 jQuery。

但是，可能是您在某处使用了使用 jQuery 的小部件或扩展，这将使其自己调用 registerCoreScript。（以 CGridView 为例）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:49:17.967

如果您使用任何需要 jquery 的小部件或组件或扩展并使用函数 registerCoreScript，则 jquery 将自动加载，否则 YII 不会加载任何 JQuery。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T18:05:38.290

在需要 jquery 的每个视图中，您都可以将其放在首位：

```
<?php Yii::app()->clientScript->registerCoreScript('jquery'); ?> 
```

如果您想包含在特定布局的所有页面中，您也可以将其放入您的布局中。

# android - 如何在 TableLayout 中添加 editText.addTextChangedListener

> ID：10118171
> 
> 赞同：7
> 
> 时间：2012-04-12T06:01:58.920
> 
> 标签：android, cell, android-tablelayout, editing

我的工作环境是Eclipse heliose，Android 1.6

我已经创建了一个 tableLayout 并成功添加了列和行，每个单元格都有一个 textView 和一个 EditText，我在访问每个单元格时遇到问题，需要将 addTextChangedListener 添加到单元格内的每个 editText 中。所以我需要将英文文本更改为印度文本。请提出解决方案

```
/**
 * Here we are going to define the grid The Grid has 1\. grid's value in the
 * particular position 2.
 */

public void setGrid() {

    String questionNumber[] = null;

    Typeface fontface = Typeface.createFromAsset(getAssets(), "fonts/padmaa.ttf");
    /*
     * Table layout for the crossword elements
     */
    TableLayout tableLayout = (TableLayout) findViewById(R.id.crosswordTableLayout);
    tableLayout.setGravity(Gravity.TOP);
    tableLayout.setBackgroundColor(Color.WHITE);
    tableLayout.setScrollContainer(true);

    for (int i = 0; i < sizeOfGrid; i++) {
        /*
         * This table row params is used to set the layout params alone we
         * are not going to use this anywhere
         */
        TableRow.LayoutParams tableRowParams = new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        tableRowParams.setMargins(1, 1, 1, 1);
        tableRowParams.height = 30;
        tableRowParams.gravity = Gravity.TOP;

        /*
         * Defining the row element for the crossword
         */
        TableRow tableRow = new TableRow(this);
        tableRow.setBackgroundColor(Color.WHITE);
        tableRow.setPadding(1, 0, 0, 0);
        tableRow.setGravity(Gravity.TOP);
        tableRow.setLayoutParams(tableRowParams);

        for (int j = 0; j < sizeOfGrid; j++) {

            /*
             * (1).Here we are defining headerTextView to set the clue
             * numbers. 
             * 2).columnEditText = a edit text view used to get the user
             * i/p data
             */
            TextView headerTextView = new TextView(this);
            columnEditText = new EditText(this);

            headerTextView.setGravity(Gravity.TOP);
            headerTextView.setTextSize(10);
            headerTextView.setEnabled(false);
            headerTextView.setHeight(30);
            headerTextView.setWidth(10);
            headerTextView.setTextColor(Color.BLACK);

            /* Override the edittext that has been created */
            columnEditText = (EditText) getLayoutInflater().inflate(R.layout.tablexml, null);
            columnEditText.setHeight(30);
            columnEditText.setWidth(25);
            /*
             * LinearLayout to arrange the two text view in a vertical
             * position
             */
            LinearLayout headerLinearLayout = new LinearLayout(tableRow.getContext());
            headerLinearLayout.setOrientation(LinearLayout.VERTICAL);
            headerLinearLayout.addView(headerTextView);

            /*
             * LinearLayout to arrange the first Linearlayout and Edit text
             * in a horizontal position
             */
            LinearLayout cellLinearLayout = new LinearLayout(tableRow.getContext());
            cellLinearLayout.setOrientation(LinearLayout.HORIZONTAL);
            cellLinearLayout.addView(headerLinearLayout);
            cellLinearLayout.addView(columnEditText);
            /*
             * Here we are setting the table's vertical border by some
             * workaround methods
             */
            cellLinearLayout.setLayoutParams(tableRowParams);
            /*
             * the column with complete black
             */
            if (cellValueArr[i][j] == null) {
                columnEditText.setBackgroundColor(Color.BLACK);
                headerTextView.setBackgroundColor(Color.BLACK);
                headerTextView.setGravity(Gravity.TOP);
                tableRow.setBackgroundColor(Color.BLACK);
                columnEditText.setEnabled(false);
            } else {
                /*
                 * column with values and question numbers
                 */
                tableRow.setBackgroundColor(Color.BLACK);
                if (quesNumArr[i][j] == null) {
                    columnEditText.setBackgroundColor(Color.WHITE);
                    headerTextView.setBackgroundColor(Color.WHITE);
                } else if (quesNumArr[i][j] != null) {
                    /*
                     * column without question number
                     */
                    questionNumber = quesNumArr[i][j].split("~");
                    quesArrList.add(questionNumber[1]);
                    headerTextView.setText(questionNumber[1]);
                    headerTextView.setTextColor(Color.BLACK);
                    headerTextView.setBackgroundColor(Color.WHITE);
                    columnEditText.setBackgroundColor(Color.WHITE);
                }

            }
            columnEditText.setId(i);
            headerTextView.setId(i);

            /* add the linear layout to the row values */
            tableRow.addView(cellLinearLayout);

            int childCount = tableRow.getChildCount();
            System.out.println("Child Count ::" + childCount);

            LinearLayout linearChild = (LinearLayout) tableRow.getChildAt(columnEditText.getId());
            colText = (EditText) linearChild.getChildAt(1);
            System.out.println("GET ID " + linearChild.getChildAt(1).getId());

            colText.addTextChangedListener(new TextWatcher() {
                @Override
                public void onTextChanged(CharSequence seq, int start, int before, int count) {
                    // TODO Auto-generated method stub
                    if (seq.length() > 0 & before == 0) {
                        final String charSequence = String.valueOf(seq);
                        final String engChar = String.valueOf(seq.charAt(seq.length() - 1));
                        println("GUJ :: currentlatin ===> " + engChar + " :: charSequence ==>" + seq);
                        // Method For Type Char
                        List softList = conv.getSoftKeyPressForChar(engChar, getApplicationContext(), seq);
                        charSeq = (String) softList.get(0);
                        Typeface fontface1 = Typeface.createFromAsset(getApplicationContext().getAssets(), "fonts/padmaa.ttf");
                        colText.setTypeface(fontface1, Typeface.NORMAL);
                        colText.setText(charSeq);
                        // for placing the cursor position
                        colText.clearFocus();
                        colText.requestFocus();

                    }
                }

                @Override
                public void beforeTextChanged(CharSequence s, int start, int count, int after) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void afterTextChanged(Editable s) {
                    // TODO Auto-generated method stub
                    System.out.println("AFTER TEXT CHANGE");
                }
            });

        }
        /* add the row values to the table layout */
        tableLayout.addView(tableRow);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:12:53.083

我还没有看完整个代码。但根据我最初的理解，你可以通过以下任何一种方式来做到这一点，

1.  正如有人之前提到的，去一个gridview。从对该问题的最后评论中，我无法充分考虑该问题，但如果它是一些滚动问题，您可以尝试将 layout-margin-bottom 设置为大约 5 dp，这样它就不会被裁剪（如果那是你的意思是）

2.  继续表格布局，创建一次 TextWatcher() 并在循环中按顺序添加它。如果您可以为每个元素设置 ID 或 setTag 可能会很好，例如，首先 editText 获取名称，“editText1”，然后是“editText2”，依此类推。因此，在循环中，您可以根据循环索引访问每个元素。

# javascript - 在 JavaScript 中设置 DIV 的宽度和高度

> ID：10118172
> 
> 赞同：133
> 
> 时间：2012-04-12T06:02:11.460
> 
> 标签：javascript

我有一个`div`. `id="div_register"`我想`width`在 JavaScript 中动态设置它。

我正在使用以下代码：

```
getElementById('div_register').style.width=500; 
```

但这行代码不起作用。

我也尝试使用以下单位`px`，但仍然没有运气：

```
getElementById('div_register').style.width='500px'; 
```

和

```
getElementById('div_register').style.width='500'; 
```

和

```
getElementById('div_register').style.width=500px; 
```

但这些代码都不适合我。

我不知道出了什么问题。

我正在使用 Mozilla Firefox。

**编辑**

```
<html>
    <head>
        <title>Untitled</title>
        <script>
            function show_update_profile() {
                document.getElementById('black_fade').style.display='block';
                //document.getElementById.('div_register').style.left=((window.innerWidth)-500)/20;
                document.getElementById('div_register').style.height= "500px";
                document.getElementById('div_register').style.width= '500px';
                //alert('kutta');
                  document.getElementById('div_register').style.display='block';
                document.getElementById('register_flag').value= 1;
                document.getElementById('physical_flag').value= 0;
                document.getElementById('cultural_flag').value= 0;
                document.getElementById('professional_flag').value= 0;
                document.getElementById('lifestyle_flag').value= 0;
                document.getElementById('hobby_flag').value= 0;
                //alert(window.innerWidth);
            }
        </script>
        <style>
            .white_content {
                display:none;
            }
        </style>
    </head>
    <body>
        <div id="main">
            <input type="button" onclick="javascript:show_update_profile();" id="show" name="show" value="show"/>
        </div>
        <div id="div_register">
            <table cellpadding="0" cellspacing="0" border="0">
                <tr>
                    <td>
                      welcome 
                    </td>
                </tr>
            </table>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：265
> 
> 时间：2012-04-12T06:05:00.120

您使用的属性可能无法在 Firefox、Chrome 和其他非 IE 浏览器中运行。为了使其在所有浏览器中都能正常工作，我还建议添加以下内容：

```
document.getElementById('div_register').setAttribute("style","width:500px"); 
```

为了交叉兼容性，您仍然需要使用该属性。顺序也可能很重要。例如，在我的代码中，当使用 JavaScript 设置样式属性时，我先设置样式属性，然后设置属性：

```
document.getElementById("mydiv").setAttribute("style","display:block;cursor:pointer;cursor:hand;");
document.getElementById("mydiv").style.display = "block";
document.getElementById("mydiv").style.cursor = "hand"; 
```

因此，最适合您的跨浏览器兼容示例是：

```
document.getElementById('div_register').setAttribute("style","display:block;width:500px");
document.getElementById('div_register').style.width='500px'; 
```

我还想指出，管理样式的一种更简单的方法是使用 CSS 类选择器并将您的样式放在外部 CSS 文件中。不仅您的代码更易于维护，而且您实际上会与您的 Web 设计师交朋友！

```
document.getElementById("div_register").setAttribute("class","wide");

.wide {
    display:block;
    width:500px;
}

.hide {
    display:none;
}

.narrow {
    display:block;
    width:100px;
} 
```

现在，我可以轻松地添加和删除一个类属性，一个属性，而不是调用多个属性。此外，当您的 Web 设计师想要更改宽的定义时，他或她不需要在您维护精美的 JavaScript 代码中四处寻找。您的 JavaScript 代码保持不变，但可以轻松自定义应用程序的主题。

该技术遵循将内容 (HTML) 与行为 (JavaScript) 和演示文稿 (CSS) 分开的规则。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-12T08:17:26.060

这些是将样式应用于元素的几种方法。尝试以下任一示例：

```
1\. document.getElementById('div_register').className = 'wide';
  /* CSS */ .wide{width:500px;}
2\. document.getElementById('div_register').setAttribute('class','wide');
3\. document.getElementById('div_register').style.width = '500px'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T07:01:08.277

修复代码`document`中的拼写错误（在函数的第 3 行和第 4 行拼写错误，并将 onclick 事件处理程序更改为读取：`onclick="show_update_profile()"`你会没事的。@jmort 的建议很好 - 只需设置 2 个您切换的 css 类在 javascript 之间 - 它会让事情变得更容易。

您还可以查看[element.addEventListener](https://developer.mozilla.org/en/DOM/element.addEventListener)以将事件处理程序分配给您的元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T06:50:34.980

如果您删除`javascript:`前缀并从您的 javascript 代码中删除未知 id 的部分`'black_fade'`，这应该在 firefox 中工作

精简示例：

```
<html>
    <head>
        <script type="text/javascript">
            function show_update_profile() {
               document.getElementById('div_register').style.height= "500px";
               document.getElementById('div_register').style.width= "500px";
               document.getElementById('div_register').style.display='block';
               return true;
           }
        </script>
        <style>
           /* just to show dimensions of div */
           #div_register
           {
                background-color: #cfc;
           }
        </style>
    </head>
    <body>
        <div id="main">
            <input type="button" onclick="show_update_profile();" value="show"/>
        </div>
        <div id="div_register">
            <table>
                <tr>
                   <td>
                     welcome 
                   </td>
                </tr>
            </table>
        </div>
    </body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-11T14:49:56.807

小心`span`！

`myspan.styles.width='100px'`不想工作。

将 更改`span`为`div`.

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-12T06:28:02.357

按钮的`onclick`属性采用 JavaScript 字符串，而不是您提供的 href。只需删除“javascript：”部分。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2021-04-11T22:33:43.393

你必须使用**document**。Document 接口代表浏览器中加载的任何网页，并作为网页内容的入口点，

[了解更多](https://developer.mozilla.org/en-US/docs/Web/API/Document)

```
document.getElementById('div_register').style.width='500px'; 
```

# java - 无法通过使用 selenium grid2 调用浏览器特定节点来运行 Testng 测试

> ID：10118176
> 
> 赞同：0
> 
> 时间：2012-04-12T06:02:46.640
> 
> 标签：java, selenium, testng

运行我使用 selenium grid2 用 java (testng) 编写的测试用例时遇到问题。这是我遵循的步骤

1.  使用“java -jar selenium-server-standalone.2.20.0.jar -role hub”调用集线器
2.  调用特定于浏览器的节点（java -jar selenium-server-standalone.2.20.0.jar -role node -hub [http://localhost:444/gird/register](http://localhost:444/gird/register) " -browser "browserName=firefox,version=11.0,maxInstance =5")
3.  尝试从命令提示符运行测试。

执行此步骤时出现错误。

如果我在没有特定浏览器的情况下调用节点，则不会出现任何错误。

可以帮助我解决问题。

谢谢拉古拉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T10:01:19.127

`"`-browser 之前有不正确的集线器端口（444 而不是 4444）和奇数符号。请将以下代码复制并粘贴到 cmd：

```
java -jar selenium-server-standalone.2.20.0.jar -role node -hub http://localhost:4444/gird/register -browser "browserName=firefox,version=11.0,maxInstance=5" 
```

# javascript - 为什么单击我的搜索按钮会返回错误？

> ID：10118180
> 
> 赞同：0
> 
> 时间：2012-04-12T06:02:55.940
> 
> 标签：javascript, testing, loadrunner

我正在使用真正的客户端协议，并且我有一个带有使用图像实现的搜索按钮的 Web 应用程序。我单击该图像按钮以提取一些结果。

搜索按钮的html代码是：

```
< img style="border: medium none;" 
onclick="ajaxLoadingStarted(this, document.getElementById('select:ajaxLoadingImg')); searchVehicles();" 
src="/webPortal/common/images/green-search-btn.png" id="select:searchBtn"> 
```

我的javascript代码是：

```
var searchobj = document.getElementById('select:searchBtn').onclick(); 
```

不幸的是，我收到了这个错误：

> t=00019690ms: 错误 -203252: 46: Evaluate JavaScript code / window.alert($('#javax.face...ement; } } / failed - 发生异常：NS_ERROR_NOT_AVAILABLE: 组件不可用 [MsgId: MERR-203252 ]

为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:33:11.190

我在编写脚本时也遇到了类似的问题。解决方案是：

1.  使用 Ajax Click and Script 协议进行录制。
2.  如果仍然无法识别，请使用以下代码：

```
web_text_link("", 
    "Snapshot=t50.inf", 
    DESCRIPTION, 
    "Text="",
    "ID=select:searchBtn", 
    ACTION, 
    "UserAction=Click", 
LAST); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:00:24.787

如果您播放单个步骤而不是从头开始播放脚本，则某些功能不可用。另一种方法是在您尝试的步骤之后的步骤上创建一个断点，并从头开始播放整个脚本。

# c - 使用 fread 将数据存储到 char 缓冲区中

> ID：10118181
> 
> 赞同：0
> 
> 时间：2012-04-12T06:03:06.190
> 
> 标签：c, file-io, binaryfiles

我正在做一个需要从二进制文件中读取数据的项目。我正在尝试将数据存储到 char 缓冲区中。假设二进制文件由一个字符、一个 int 和一个 double 组成，char 缓冲区需要多大？我将如何转换回 int's 和 doubles ？

我正在将数据读入一个字符缓冲区，因为它会提高我的程序的速度。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T06:48:50.890

以下示例程序从命令行指定的文件中获取 a 、 an和 a`fread()`的第一`DATASIZE`组：`char``int``float`

```
typedef struct Data_s {
  char c;
  int i;
  float f;
} Data_t;

#define DATASIZE 3

int main(int argc, char ** argv) {
  if (1 >= argc) {
    fprintf(stderr, "usage: %s <file name>\n", argv[0]);
    return EXIT_SUCCESS;
  }

  {
    FILE * f = fopen(argv[1], "r");
    if (!f) {
      perror("fopen() failed.");
      return EXIT_FAILURE;
    }

    {
      Data_t data[DATASIZE];
      size_t sizeData = sizeof(*data);
      size_t sizeToRead = sizeof(data)/sizeData;
      memset(data, 0, sizeToRead * sizeData);
      size_t sizeRead = fread(&data, sizeData, sizeToRead, f);
      if (0 != fclose(f))
        perror("fclose() failed,");
      if (sizeToRead != sizeRead) {
        perror("fread() failed.");
        return EXIT_FAILURE;
      }

      for (size_t i = 0; i < sizeToRead; ++ i)
        printf("read c=0x%02hhx, i=%d, f=%f from '%s'\n", data[i].c, data[i].i, data[i].f, argv[1]);
    }
  }

  return EXIT_SUCCESS;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:10:40.163

您可以使用 fscanf 函数将文件中的数据直接读取到急切等待的变量中：

```
char c;
int i;
double d;
FILE *fp = fopen("C:\\example.txt", "rb");
if (fp)
{
    fscanf(fp, "%c%d%lf", &c, &i, &d);
    fclose(fp);
    printf("Character: %c\nInteger: %d\nDouble: %lf\n", c, i, d);
} 
```

编辑：如果您正在寻找更多信息`fscanf`，请参见[此处](http://beej.us/guide/bgc/output/html/multipage/scanf.html) EDIT2：

## 二进制解决方案

```
FILE *fp = fopen("C:\\example.txt", "rb");
if (fp)
{
    char buffer[sizeof(int) + sizeof(double) + sizeof(char)];
    if (fread(buffer, 1, sizeof(buffer), fp) == sizeof(buffer))
    {
        char c = *(char*)buffer;
        int i = *(int*)(buffer + sizeof(char));
        double d = *(double*)(buffer + sizeof(char) + sizeof(int));
    }
    fclose(fp);
} 
```

# javascript - jQuery HTML 编辑器

> ID：10118183
> 
> 赞同：0
> 
> 时间：2012-04-12T06:03:14.143
> 
> 标签：javascript, jquery, html, regex, editor

对于我当前的项目，我正在创建一个 html 编辑器。

## **它需要如何工作**

***里面的元素***

1.  文本区域 - 将 HTML 键入为文本
2.  iframe - 将输入的 HTML 显示为真实的 [将字符串 HTML 呈现到 UI]
3.  一些按钮

***工作逻辑***

注册用户在文本区域内输入内容：

前任 ：

```
<div style="border:1px solid red;">This is a div</div> 
```

在该用户单击按钮 [Converting to UI] 之后，我们需要将 iframe 内容更改为新值 [文本区域的值]

转换 iframe 元素后 html 将是

```
<html>
<head>
<style>
 .mydiv{

  }
</style>
 </head>
<body>

<div class="mydiv" style="color:red">This is a div</div>

</body>
</html> 
```

还有另一个按钮可以将 iframe HTML 返回到文本区域，

所有这些都很好[除了萤火虫问题现在没有大问题]，但我需要集成更好的 UI 来自定义 iframe 内容->

例如：用户单击`DIV`iframe 上的一个，这样就会出现一个弹出窗口来更改该 div 的颜色和字体[它将是一些颜色选择器，用于选择颜色并下拉选择字体][我需要实现一些更像这样]。希望这不会是一个很大的痛苦。

所以在那之后我需要得到修改后的值。

例如：我改变了 div 的颜色，

所以返回的值将是这样的

```
<html>
<head></head>
<body>

<div class="mydiv" style="color:gray;">Hello World !</div>
</body>
</html> 
```

## **去做**

1.  请注意样式属性 [上面]，它是内联样式，如果元素定义了类，我需要将其转换为类范围，因此我需要使用新样式添加/更新 css 类“mydiv”。
2.  假设我们正在更改`body`iframe 元素上的某些内容，这`body`是一个常见元素，因此我需要`BODY`在 css 样式块中添加/更新范围

    前任：

    身体{颜色：灰色；}

    我希望你们明白我的想法，我需要在我当前的项目中实现这样的东西。

这有什么更薄的吗？[所以不用担心，我可以使用它] 或者我怎样才能做到这一点？尤其是css类的分组。

我希望我需要使用某种正则表达式，但我对此很薄弱。

请帮我完成。

**我在这里尝试过**：http : [//jsfiddle.net/5PKXq/3/](http://jsfiddle.net/5PKXq/3/)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T06:16:42.177

尽管我认为您确实在这里重新发明了轮子，但我看不出是什么阻止您获取 的内容`textarea`，然后将其直接附加到我不知道的容器`div`（它甚至没有必须是一个`iframe`，我个人认为这是一个不好的方法）。

```
var $textarea = $('textarea'),
    $container = $('div#container'),
    $refresh = $('button#refresh'),  // or something
    ;

$refresh.on('click', function () {
    $container.empty()
              .html($textarea.val())
              ;
    // or something
}); 
```

请注意，这是未经测试的代码。

# java - 是否有带有图标和文本的内部布局？

> ID：10118184
> 
> 赞同：0
> 
> 时间：2012-04-12T06:03:37.247
> 
> 标签：java, android

我知道有很多内部布局可以用于适配器 - android.R.layout.simple_list_item_1、android.R.layout.select_dialog_item 等。但是有没有任何内部布局可以用来制作带有图标和文本的项目（图像*_ _ _*文本）？为什么我应该使用 android.id 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T06:05:27.530

试试`android.R.layout.activity_list_item`。

编辑：使用`android.R.id.icon`或`R.id.icon`图标和`android.R.id.text1`文本。

# asp.net - 到期前的会话超时

> ID：10118186
> 
> 赞同：0
> 
> 时间：2012-04-12T06:03:55.843
> 
> 标签：asp.net, session-timeout

虽然效率很低，但我需要保持 10 个小时的 ASP.NET 会话……（600 分钟）

所以我在网络配置中写...

```
<authentication mode="Forms">
    <forms slidingExpiration="true" loginUrl="algoExpirou.aspx" name="AuthCookieConte" timeout="600" path="/">
    </forms>
</authentication> 
```

和 ' 票...

```
Dim isPersistent As Boolean = False
    Dim ticket As New FormsAuthenticationTicket(1, strNomeDoRespondente, System.DateTime.Now, DateTime.Now.AddMinutes(600), isPersistent, userData, FormsAuthentication.FormsCookiePath)
    Dim encodedTicket As String = FormsAuthentication.Encrypt(ticket)
    Response.Cookies.Add(New HttpCookie(FormsAuthentication.FormsCookieName, encodedTicket)) 
```

会议 ！！

```
Session.Timeout = 600 
```

无论如何，大约 25 分钟后有东西消失了……从日志中：

5:11:25 - 登录

5:35:28 - 超时...

0:24:03 差异

现在我对正在发生的事情有了一个线索。该站点的托管是共享的，我想知道超时是否有限制，但是该站点正在测试中，没有人在使用它！

感谢您对它的任何想法......问候，RConte

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T06:27:13.760

会话超时和身份验证超时是两个不同的东西。您只是将身份验证超时设置为 10 小时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T17:42:27.683

我知道这个问题在游戏中已经很晚了，但我之前已经被这个问题抓住了。[IIS 中有一个控制“空闲超时”](http://technet.microsoft.com/en-us/library/cc771956%28v=ws.10%29.aspx)的应用程序池设置。当达到空闲超时时，应用程序池工作进程将关闭。我相信表单身份验证 cookie 在会话结束时仍然存在。我通常将空闲超时设置为 0（以便它永远不会超时）并配置 IIS 以每天在同一时间回收我的应用程序池（例如 - 凌晨 1 点，当网站上的使用量很少或没有使用时）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T05:11:09.693

好的，伙计们，解决它！该站点位于使用所谓的“云”托管的托管站点中。将其移至同一托管公司的“非云”，它开始正常工作！（我向支持人员询问了这种可能性，但他们根本没有帮助）只用了 2 天就解决了……但我学到了一些。问候， R 孔蒂

# java - 如何使用服务注册

> ID：10118198
> 
> 赞同：1
> 
> 时间：2012-04-12T06:05:34.440
> 
> 标签：java

我遇到了一个问题，我写了一个`Class(EasybImpl)`which implement `EasybPlugin`，但是当我迭代提供者时，我无法获得我写的 EasybImpl 支持。

我认为 EasybImpl 正在使用 System 类加载器和控制台 println 类加载器作为 sun.misc.Launcher$AppClassLoader。它出什么问题了。

```
 Iterator providers = ServiceRegistry.lookupProviders(EasybPlugin.class, 
                         ClassLoader.getSystemClassLoader()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T06:40:56.313

您是否将您的班级声明为服务提供者？

> 为了声明服务提供者，服务子目录被放置在每个 JAR 文件中的 META-INF 目录中。该目录包含每个服务提供者接口的文件，该接口在 JAR 文件中具有一个或多个实现类。例如，如果 JAR 文件包含一个名为 com.mycompany.mypkg.MyServiceImpl 的类，该类实现了 javax.someapi.SomeService 接口，则 JAR 文件将包含一个名为：
> 
> META-INF/services/javax.someapi.SomeService
> 
> 包含以下行：
> 
> com.mycompany.mypkg.MyService

[http://docs.oracle.com/javase/6/docs/api/javax/imageio/spi/ServiceRegistry.html](http://docs.oracle.com/javase/6/docs/api/javax/imageio/spi/ServiceRegistry.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-21T22:48:10.897

需要四个步骤：

*   您将 META-INF/services 子目录构建到您的 JAR 文件中。
*   在“服务”目录中，为您正在实施的每个服务创建一个文件。（在你的情况下，这将是 file `META-INFA/services/my.package.EasybPlugin`）。
*   在该文件中，声明您的实现类的名称。
*   然后，您可以使用`java.util.ServiceLoader`API 来发现和加载已注册的服务。

服务提供者文件的示例：

```
# providers of EasyBPlugin SPI
# (comment lines begin with pound)
my.package.StandardEasybPlugin 
```

然后，您可以像这样查找并加载服务实现：

```
ServiceLoader<EasybPlugin> loader = ServiceLoader.load(EasybPlugin.class);
for (EasybPlugin plugin : loader) {
    // ...
} 
```

注 1：`ServiceProvider`您正在查看的 API 确实针对 Image IO，例如读取图像文件格式。`ServiceLoader`用于一般用途，除非您的目的不是阅读图像，否则应该首选。

这里有更详细的教程：http: [//literatejava.com/extensibility/java-serviceloader-extensible-applications/](http://literatejava.com/extensibility/java-serviceloader-extensible-applications/)

参考：

*   [https://docs.oracle.com/javase/tutorial/ext/basics/spi.html#the-serviceloader-class](https://docs.oracle.com/javase/tutorial/ext/basics/spi.html#the-serviceloader-class)
*   [https://docs.oracle.com/javase/7/docs/api/java/util/ServiceLoader.html](https://docs.oracle.com/javase/7/docs/api/java/util/ServiceLoader.html)
*   [https://docs.oracle.com/javase/tutorial/sound/SPI-intro.html](https://docs.oracle.com/javase/tutorial/sound/SPI-intro.html) *针对声音，但服务提供者文件的简单示例*。

# objective-c - 如何在出现视图时运行函数，但在关闭警报框时不运行？

> ID：10118201
> 
> 赞同：1
> 
> 时间：2012-04-12T06:05:56.467
> 
> 标签：objective-c, ios

我在视图控制器的 viewWillAppear 中放置了一个函数，以便每次加载视图时它都会运行：

```
- (void)viewWillAppear:(BOOL)animated
{
    [self initBasicSettings];
} 
```

但是，`initBasicSettings`每次关闭模式警报框（UIAlertView）时都会运行该函数，这是我不想要的。

如何在视图加载时运行函数，但在警报框关闭时不运行？如果这两个事件不能分开，我觉得这不是正交设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:16:03.323

假设这不是一个玩笑的问题。`UIViewController`默认情况下，此方法存根插入到新的子类中。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:21:03.727

即使将视图添加到视图层次结构或从视图层次结构中删除，这些图像也会清除您对 viewWillAppear 和 viewWillDisappear 的概念。

* * *

视图图像 - 添加到视图层次结构时。

![在此处输入图像描述](../Images/7f8efbd4b25603166f2a611df343e61b.png)

* * *

视图图像 - 从视图层次结构中移除时。

![在此处输入图像描述](../Images/753bc0bebc54c2e291fe96fe272f1e21.png)

# javascript - 如何在动态中将javascript对象添加到另一个对象

> ID：10118204
> 
> 赞同：15
> 
> 时间：2012-04-12T06:06:02.687
> 
> 标签：javascript, object, add

假设我有几个 javascript 对象

```
{"type":"gotopage","target":"undefined"}
{"type":"press","target":"a"}
{"type":"rotate","target":"long"} 
```

如何将此对象添加到另一个对象，例如

```
config={} 
```

如果每个插入的对象都有一个我可以添加为的 id，我知道如何：

```
config["id"]={} 
```

但在这种情况下，如何添加没有 id 的对象？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-12T06:10:19.647

```
var obj1 = {"type":"gotopage","target":"undefined"};

var config = {};
config.obj1 = obj1; 
```

您以后可以随时添加它们。

```
var obj1 = {"type":"gotopage","target":"undefined"};

var config = {};
config.obj1 = obj1;

var obj2 = {"key":"data"};
config.obj2 = obj2; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-12T06:10:55.063

我认为您正在混淆对象和数组。对象有命名键，数组有数字键。您可以使用以下方法轻松附加到数组`.push()`：

```
var arr = [];
arr.push("something"); 
```

但是，对于变量名称所暗示的配置对象，这并不是很有用。您应该为您的选项使用有意义的名称，例如：

```
var config = {
    something: 'blah',
    foo: 'bar'
}; 
```

您还可以在对象中存储一个数组：

```
config.manyStuff = [];
for(...) {
    manyStuff.push(...);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T06:10:17.527

如果您拥有的这些数据属于同一类型，请改用数组：

```
var some_data = {"type":"gotopage","target":"undefined"}

var config = [];
var config.push(some_data); //and do this for the rest 
```

您可以像这样访问配置项：

```
var someVariable = config[index]; //where index is a number starting from 0 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-12-15T22:19:44.383

如果要添加对象，可以使用使用扩展运算符轻松添加。

示例->

```
object1 = { property1: 1, property2: 2}
finalObject = [{...object1}] 
```

**finalObject = {...object1}**

并根据您的问题解决方案在此处使用数组对象

**finalObject = [{...object1}]**

```
object1 = { property1: 1, property2: 2}
    finalObject = [{...object1}]
    document.getElementById("demo").innerHTML = JSON.stringify(finalObject);
```

```
<div id = "demo"></div>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-20T00:22:03.220

我正在使用这个实用功能：

```
module.exports.combine = function() {

  var rv = {};
  for (i = 0; i < arguments.length; i++) {
    for (thing in arguments[i]) {
        rv[thing]=arguments[i][thing];
    }
  }
  return rv;
} 
```

具有相同名称的属性将被后面的参数中的属性覆盖

```
var util = require('lib/util.js');
console.log(util.combine(
  {"1":"one","two":function(){;},
  {"four":{"four.5":"four.5-b"}, "5":"foo"}}); 
```

结果：

```
 { '1': 'one',
    '5': 'foo',
    two: [Function],
    four: { 'four.5': 'four.5-b' } } 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-04-12T06:30:16.843

如果您希望在初始化期间添加它们，这可能会对您有所帮助：

```
 var config = [
               {"type":"gotopage","target":"undefined"},
               {"type":"press","target":"a"},
               {"type":"rotate","target":"long"}
              ] 
```

# java - 如何使用 mysql + java 实现逐行版本控制？

> ID：10118205
> 
> 赞同：2
> 
> 时间：2012-04-12T06:06:03.450
> 
> 标签：java, database, database-versioning

举个例子，我们有一个名为 student 的表（sID 是主键，isValid=1 表示该行有效，0 暂时无效）

```
sId    sName   gpa   isValid 
1      Tom      3.0    1
2      Hanks    3.5    1 
```

现在让我们假设我已经更新了 Tom 的值。但我仍然想保存以前的值。

```
sId    sName   gpa   isValid 
1      Tom      3.0    0
2      Hanks    3.5    1 
1      Tom      3.6    1 
```

现在汤姆斯值发生了变化。坚果他以前的价值观并没有永久删除。

我该如何实现这是有插件或什么的？问题是主键不止一次出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:32:27.860

您需要更改数据库设计。

保留在表中以及将成为父表的`sId,sName`任何其他字段（如果需要） 。`student`创建另一个表`student_academic`，例如`sId`作为学生表的外键以及`gpa, isvalid`字段。

对于每个学生值的更改，插入新的事务条目。这也可以确保数据库`Normalization` 并满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:18:49.707

我觉得这里不需要任何插件，我会做这样的事情：

1.  使您的 SID 自动递增
2.  对于每个插入，获取最后一个版本 (sId - 1) 并将其标记为 isValid = 0

我假设你正在使用 jdbc

# android - Android TranslateAnimation 的问题

> ID：10118210
> 
> 赞同：2
> 
> 时间：2012-04-12T06:06:41.347
> 
> 标签：android, android-layout, android-animation

我正在创建一个自定义切换开关，我大部分时间都完成了设计和功能，但有一件事阻碍了我，我试图在切换到拇指时添加动画，基本上是一个按钮，向右的动画效果很好，但问题在于向左的动画是我用来播放这两个动画的代码。

```
 private void playToggleanimation()
    {
        if(toggleAnimation != null && !toggleAnimation.hasEnded())
        {
            toggleAnimation.setAnimationListener(null);
            toggleAnimation.cancel();
        }
        View v = findViewById(button);
        toggleAnimation = (checked) ? new TranslateAnimation(v.getLeft(), getMeasuredWidth() / 2, 0, 0) : new TranslateAnimation(v.getLeft(), 0, 0, 0);
        toggleAnimation.setAnimationListener(listener);
        toggleAnimation.setFillAfter(true);
        toggleAnimation.setFillEnabled(true);
        toggleAnimation.setDuration(250);
        v.clearAnimation();
        v.startAnimation(toggleAnimation);
    } 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T09:24:21.567

我发现问题出在`getLeft()`方法上，而不是使用这条线

```
toggleAnimation = (checked) ? new TranslateAnimation(v.getLeft(), getMeasuredWidth() / 2, 0, 0) : new TranslateAnimation(v.getLeft(), 0, 0, 0); 
```

我使用下面的代码行来创建动画，效果很好。

```
toggleAnimation = (checked) ? new TranslateAnimation(v.getLeft(), getMeasuredWidth() / 2, 0, 0) : new TranslateAnimation(getMeasuredWidth() / 2, 0, 0, 0); 
```

该`getLeft()`方法总是返回 0。

# hibernate-search - 在自定义 FieldBridge 中使用分析器

> ID：10118212
> 
> 赞同：2
> 
> 时间：2012-04-12T06:07:04.857
> 
> 标签：hibernate-search, analyzer

我有一个 List getter 方法，我想将它索引（标记化）到多个字段中。

我有一个 FieldBridge 实现，它遍历列表并将每个字符串索引到一个字段中，并将索引附加到字段名称中，以便为每个字符串提供不同的名称。

我有两个不同的分析器实现（CaseSensitiveNGramAnalyzer 和 CaseInsensitiveNGramAnalyzer），我想与此 FieldBridge 一起使用（使字段的索引区分大小写和不区分大小写）。

这是我想将分析器应用到的 FieldBridge：

```
public class StringListBridge implements FieldBridge
{

   @Override
   public void set(String name, Object value, Document luceneDocument, LuceneOptions luceneOptions)
   {
      List<String> strings = (List<String>) value;
      for (int i = 0; i < strings.size(); i++)
      {
         addStringField(name + 1, strings.get(i), luceneDocument, luceneOptions);
      }
   }

   private void addStringField(String fieldName, String fieldValue, Document luceneDocument, LuceneOptions luceneOptions)
   {
      Field field = new Field(fieldName, fieldValue, luceneOptions.getStore(), luceneOptions.getIndex(), luceneOptions.getTermVector());
      field.setBoost(luceneOptions.getBoost());
      luceneDocument.add(field);
   }
} 
```

*   **是否可以将分析器应用于使用 FieldBridge 的字段？**
*   **如果是这样，这可以通过注释来完成，还是必须以编程方式完成？**
*   **如果是后者，我可以将分析器作为参数注入吗？**

我正在考虑以下内容，但对字段令牌流等完全不熟悉：

```
 private void addStringField(String fieldName, String fieldValue, Document luceneDocument, LuceneOptions luceneOptions)
   {
      Field field = new Field(fieldName, fieldValue, luceneOptions.getStore(), luceneOptions.getIndex(), luceneOptions.getTermVector());
      field.setBoost(luceneOptions.getBoost());
      try
      {
         field.setTokenStream(new CaseSensitiveNGramAnalyzer().reusableTokenStream(fieldName, new StringReader(fieldValue)));
      }
      catch (IOException e)
      {
         e.printStackTrace();
      }
      luceneDocument.add(field);
   } 
```

**这是一个理智的方法吗？**

**编辑**我尝试在 @Field 注释中指定 Analyzer 和 FieldBridge（不包括上述分析器代码），如下所示，但它似乎使用的是默认分析器，而不是使用`analyzer =`.

```
 @Fields({
      @Field(name="content-nocase",
             index = Index.TOKENIZED,
             analyzer = @Analyzer(impl = CaseInsensitiveNgramAnalyzer.class),
             bridge = @FieldBridge(impl = StringListBridge.class)),
      @Field(name = "content-case",
             index = Index.TOKENIZED,
             analyzer = @Analyzer(impl = CaseSensitiveNgramAnalyzer.class),
             bridge = @FieldBridge(impl = StringListBridge.class)),
   })
   public List<String> getContents() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T14:27:58.657

解决方案 atm 是通过自定义范围分析器或将*@AnalyzerDiscriminator与**@AnalyzerDef*一起使用。这也在 Hibernate Search 论坛上进行了讨论 - [https://forum.hibernate.org/viewtopic.php?f=9&t=1016667](https://forum.hibernate.org/viewtopic.php?f=9&t=1016667)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T02:05:59.997

我设法让这个工作。`analyzer =`当同时指定和指定时，休眠搜索似乎不使用指定的分析器`bridge =`，至少在指定的桥创建多个字段时。

手动将 TokenStream 从所需的分析器传递到桥中生成的字段让我得到了预期的结果：

```
 private void addStringField(String fieldName, String fieldValue, Document luceneDocument, LuceneOptions luceneOptions)
   {
      Field field = new Field(fieldName, fieldValue, luceneOptions.getStore(), luceneOptions.getIndex(), luceneOptions.getTermVector());
      field.setBoost(luceneOptions.getBoost());

      // manually apply token stream from analyzer, as hibernate search does not
      // apply the specified analyzer properly
      try
      {
         field.setTokenStream(analyzer.reusableTokenStream(fieldName, new StringReader(fieldValue)));
      }
      catch (IOException e)
      {
         e.printStackTrace();
      }
      luceneDocument.add(field);
   } 
```

`ParameterizedBridge`实现以指定要使用的分析器（`analyzer`在调用此方法之前实例化并存储在字段中）。

# cakephp - 如何在视图中使用 find('all') - CakePHP

> ID：10118217
> 
> 赞同：0
> 
> 时间：2012-04-12T06:07:34.050
> 
> 标签：cakephp, views, cakephp-2.0, findall

我搜索了很多，但我找不到如何在 Rails 中使用的视图中使用 find('all')，但在这里我收到错误“未定义的属性：View::$Menu [APP\Lib\ Cake\View\View.php，第 804 行]" 'Menu' 是我用来从菜单表中获取数据的模型。

我在视图中使用以下代码：

```
$this->set('test',$this->Menu->find('all'));
print_r($test); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T10:05:30.300

在您的 Menu 模型中创建一个方法，例如 getMenu()。在此方法中执行 find() 并获得所需的结果。在 getMenu() 方法中根据需要修改结果并返回数据。

如果您在 AppController::beforeFilter() 或 beforeRender() 的每个页面上都需要该菜单，只需执行

```
$this->set('menu', ClassRegistry::init('Menu')->getMenu()); 
```

如果您在任何地方都不需要它，您可能会更好地使用[requestAction](http://api20.cakephp.org/class/object#method-ObjectrequestAction)从 Menus 控制器中使用此方法获取数据，该控制器将从模型中调用 getMenu() 并返回数据。将它设置在你需要的地方会更好，如果你使用 requestAction 你也很可能想要缓存它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T06:55:37.573

***尽量不要在视图文件中检索数据。违反 MVC 规则***

在视图文件中试试这个：

```
$menu = ClassRegistry::init('Menu');
pr($menu->find('all')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-28T10:17:13.950

Cakephp 不允许这样做。

首先使用 ClassRegistry::init('Model'); 创建模型的引用（对象）；然后从使用对象调用查找函数

`$obj = ClassRegistry::init('Menu');` $test = $obj->find('all'); 回声“”；print_r($test); `

这将起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T06:30:48.053

在 AppHelper 中，

做一个下面的函数

```
function getMenu()
{

    App::import('Model', 'Menu');
    $this->Menu= &new Menu();
$test  = array();
$test = $this->Menu->find('all');
return $test;
} 
```

在视图中使用上述功能，例如：

```
<?php

 $menu = $html->getMenu();
 print_r($menu);

 ?> 
```

# actionscript-3 - 如何防止flex datagrid中的数据绑定？

> ID：10118218
> 
> 赞同：0
> 
> 时间：2012-04-12T06:07:35.970
> 
> 标签：actionscript-3, apache-flex, flex4

我在 flex 中有两个 Datagrid。我正在绑定数据`Datagrid1`到`Datagrid2`喜欢

```
(Datagrid2.dataProvider=Datagrid1.dataProvider as ArrayCollection;) 
```

如果我删除`Datagrid2`数据然后自动另一个`Datagrid1`删除。

所以我不想删除`Datagrid1`. 我该怎么做，但是我还有其他选项可以删除数据`Datagrid1`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:46:11.210

这主要是因为 Datagrid1.dataProvider 和 Datagrid2.dataProvider 是指针。每次设置 object1 = object2 时，它们将共享相同的内存，因为你给它们相同的地址来查看。

删除此类引用的许多简单方法。

datagrid2.dataProvider = datagrid1.dataProvider.toArray();

或者

datagrid2.dataProvider = ObjectUtil.copy(datagrid1.dataProvider) as ArrayCOllection;

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml">

    <mx:Script>
        <![CDATA[

            private function deleteFromDataGrid1():void {
                if(datagrid1.selectedIndex > -1)
                    myAC.removeItemAt(datagrid1.selectedIndex);

                myAC.refresh();
            }

            private function deleteFromDataGrid2():void {
                if(datagrid2.selectedIndex > -1)
                    datagrid2.dataProvider.removeItemAt(datagrid2.selectedIndex);
            }
        ]]>
    </mx:Script>

    <!-- An ArrayCollection with an array of objects -->
    <mx:ArrayCollection id="myAC">
        <!-- Use an mx:Array tag to associate an id with the array. --> 
        <mx:Array id="myArray">
            <mx:Object label="MI" data="Lansing"/>
            <mx:Object label="MO" data="Jefferson City"/>
            <mx:Object label="MA" data="Boston"/>
            <mx:Object label="MT" data="Helena"/>
            <mx:Object label="ME" data="Augusta"/>
            <mx:Object label="MS" data="Jackson"/>
            <mx:Object label="MN" data="Saint Paul"/>
        </mx:Array> 
    </mx:ArrayCollection>

    <mx:ApplicationControlBar>
        <mx:Button id="myButton" label="deleteFromDataGrid1" click="deleteFromDataGrid1()"/>
        <mx:Button id="myButton2" label="deleteFromDataGrid2" click="deleteFromDataGrid2()"/>
    </mx:ApplicationControlBar>

   <mx:HBox width="100%" horizontalAlign="center" height="100%">
     <mx:DataGrid id="datagrid1" dataProvider="{myAC}" height="100%"/>

    <mx:DataGrid id="datagrid2" dataProvider="{datagrid1.dataProvider.toArray()}" height="100%"/>
</mx:HBox>

</mx:Application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T07:00:47.687

使用以下...

```
(Datagrid2.dataProvider = ObjectUtil.copy(Datagrid1.dataProvider) as ArrayCollection;) 
```

或者

```
private var _coll:ArrayCollection;

private function setData():void{
   Datagrid1.dataProvider =  _coll;
   Datagrid2.dataProvider =  ObjectUtil.copy(_coll) as ArrayCollection;
} 
```

在上述情况下；如果您删除，从一个数据网格更改项目不会影响到另一个数据网格...

# java - 球衣中的服务器GET json，JAVA

> ID：10118223
> 
> 赞同：1
> 
> 时间：2012-04-12T06:08:02.517
> 
> 标签：java, json, get, jersey

我不确定如何获取 json 对象并使用来自 ajax json 帖子的 rest GET 将其输出到球衣中，我使用的是 grizzly 服务器，服务器已设置，这是应该获取 json 的代码，请纠正我，谢谢！

```
import java.io.IOException;
import java.io.InputStream;

import net.sf.json.JSONObject;
import net.sf.json.JSONSerializer;

import org.apache.commons.io.IOUtils;

import javax.ws.rs.*;

@Path("/helloworld")
public class GetData {
    @GET
    @Consumes("application/json")
            public String getResource(JSONObject obj) throws IOException {

        InputStream in = (InputStream) obj.values();
        String data = IOUtils.toString(in);

        JSONObject out = (JSONObject) JSONSerializer.toJSON(data);

        String result = out.getString("name");
        return result;       

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:31:07.687

你需要找出，你的 JSON 对象应该被反序列化成什么。如果它只是一个 JSONObject 并且您想手动解析它：

```
@Consumes("application/json")
public String getResource(JSONObject obj) {
...
} 
```

如果是某种自定义对象：

```
@Consumes("application/json")
public String getResource(CustomObj customObj) {
...
} 
```

但是你应该注意杰克逊将该对象编组/解组为 JSON。

# java - 如何将公钥转换为 BigInteger

> ID：10118224
> 
> 赞同：1
> 
> 时间：2012-04-12T06:08:04.770
> 
> 标签：java, elliptic-curve

我需要将公钥转换为 BigInteger。在下面的代码中，我提取了私钥并将其存储为`BigInteger`. 但是，当我对公众采用相同的方法时，它就不起作用了。

```
public static void main(String[] args) throws  Exception {
    Security.addProvider(new BouncyCastleProvider());
    BigInteger ZERO=new BigInteger("0");
    int c;
    //  ECParameterSpec ecSpec = ECNamedCurveTable.getParameterSpec("P-224");
    ECCurve curve = new ECCurve.Fp(
          new       BigInteger("883423532389192164791648750360308885314476597252960362792450860609699839"), // q
          new BigInteger("7fffffffffffffffffffffff7fffffffffff8000000000007ffffffffffc", 16), // a
          new BigInteger("6b016c3bdcf18941d0d654921475ca71a9db2fb27d1d37796185c2942c0a", 16)); // b

    ECParameterSpec ecSpec = new ECParameterSpec(
          curve,
          curve.decodePoint( Hex.decode("020ffa963cdca8816ccc33b8642bedf905c3d358573d3f27fbbd3b3cb9aaaf")), // G
              new   BigInteger("883423532389192164791648750360308884807550341691627752275345424702807307")); // n
    KeyPairGenerator kpg = KeyPairGenerator.getInstance("ECDSA", "BC");
    kpg.initialize(ecSpec, new SecureRandom());
    KeyPair keyPair = kpg.generateKeyPair();
    PublicKey pubKey = keyPair.getPublic();
    System.out.println(pubKey);
    PrivateKey privKey = keyPair.getPrivate();
    System.out.println(privKey);
    BigInteger s = ((ECPrivateKey) privKey).getS();
    System.out.println(s); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:43:25.413

在 ECDSA 中，私钥是 a `BigInteger`，但公钥是 a [`ECPoint`](http://www.bouncycastle.org/wiki/display/JA1/Elliptic+Curve+Key+Pair+Generation+and+Key+Factories)（由两个`BigInteger`值组成）。转换它是`BigInteger`行不通的。利用

```
ECPoint w = ((ECPublicKey)pubKey).getW();
BigInteger wx = w.getAffineX(), wy = w.getAffineY();
System.out.println(wx);
System.out.println(wy); 
```

# java - 检查 DAY_OF_WEEK 是否在星期一和星期五之间

> ID：10118225
> 
> 赞同：22
> 
> 时间：2012-04-12T06:08:07.010
> 
> 标签：java, android, error-handling, calendar, dayofweek

我正在尝试创建一种方法来检查“今天”是否在星期一和星期五之间。为此，我得到了这条线`'int day = Calendar.DAY_OF_WEEK;'` 的实际日期。之后，我用日期（星期一、星期二、星期三、星期四和星期五）填充 ArrayList。现在，当我检查实际日期是否在我的 ArrayList 中时，我设置`boolean DAY = true`else i set `boolean DAY = false`。我今天和昨天都尝试了该方法，但它总是将布尔值设置为 false。

我需要更改什么代码才能正常工作？你会在这里找到代码。

**代码**

```
 int day = Calendar.DAY_OF_WEEK;
                ArrayList<Integer> daylist = new ArrayList<Integer>();
                daylist.add(Calendar.MONDAY);
                daylist.add(Calendar.TUESDAY);
                daylist.add(Calendar.WEDNESDAY);
                daylist.add(Calendar.THURSDAY);
                daylist.add(Calendar.FRIDAY);

                if (daylist.contains(day)){
                    DAY = true;
                }else{
                    DAY = false;
                } 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-04-12T06:13:45.480

哇，这就像试图用热核弹头杀死蚊子 :-)

Java[保证（在 1.5 中）](http://docs.oracle.com/javase/1.5.0/docs/api/constant-values.html#java.util.Calendar.AM) （至少在[1.8](http://docs.oracle.com/javase/8/docs/api/constant-values.html#java.util.Calendar.ALL_STYLES)中不变） `SUNDAY`through的值`SATURDAY`是连续的（1 到 7），因此检查范围很简单。

但是，`DAY_OF_WEEK`它*不是*星期几，它是一个字段编号（值为 7），要传递给 getter 以*检索*星期几。唯一`Calendar.DAY_OF_WEEK`与实际日期匹配的时间是星期六。

您可以使用以下代码：

```
Calendar myDate = Calendar.getInstance(); // set this up however you need it.
int dow = myDate.get (Calendar.DAY_OF_WEEK);
boolean isWeekday = ((dow >= Calendar.MONDAY) && (dow <= Calendar.FRIDAY)); 
```

在此之后，`isWeekday`当且仅当从`myDate`星期一到星期五（含）这一天才是正确的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-12T06:13:25.543

`int day = Calendar.DAY_OF_WEEK;`应该改为

```
Calendar cal; // The calendar object
....your other code for getting the date goes here....
int day = cal.get(Calendar.DAY_OF_WEEK); 
```

您当前的代码只是获取常量的值`Calendar.DAY_OF_WEEK`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-12T06:13:58.540

我认为这应该对你有用。

```
int day = cal.get(Calendar.DAY_OF_WEEK);
if (day >= Calendar.MONDAY && day <= Calendar.FRIDAY){
    DAY = true;
}else{
    DAY = false;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-12T06:15:10.987

```
int day = Calendar.DAY_OF_WEEK; 
```

逻辑在这里被打破了。DAY_OF_WEEK 是一个常量，标识我们需要从`Calendar`实例中检索哪种类型的数据。

解决您的问题的最简单方法（因为 Calendar.FRIDAY > ... > Calendar.MONDAY）是

```
Calendar now = Calendar.getInstance();
int day = now.get(Calendar.DAY_OF_WEEK);
if (day >= Calendar.MONDAY && day <= Calendar.FRIDAY)
  // do something 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T06:24:17.613

第一个 Calendar.DAY_OF_WEEK 是一个整数字段，将始终为您提供 7。您需要创建一个 Calendar 实例，例如 Calendar cal = Calendar.getInstance(); 默认情况下，它会为您提供当前时区的当前日期。然后你可以调用 cal.get(Calendar.DAY_OF_WEEK); 这会给你周日和周六之间的任何一天

现在你可以检查这样的事情

```
 if(cal.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY || cal.get(Calendar.DAY_OF_WEEK) == Calendar.SATURDAY) {
         System.out.println("Weekend");
     } else {
        System.out.println("Weekday");
     } 
```

您可以将此逻辑应用于您的问题！

# javascript - 可切换的单选按钮

> ID：10118229
> 
> 赞同：0
> 
> 时间：2012-04-12T06:08:39.620
> 
> 标签：javascript, html, plugins, radio-button

我正在编写一个具有多个互斥选项的表单，但它们都不是必需的。因此，我希望用户能够单击已选择的单选按钮以取消选中它，从而将按钮集返回到首次加载页面时的状态（未选择任何按钮）。

有没有可以为我做这个的插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:15:48.103

你实际上不能这样做，你不应该过度思考解决方案。您为什么不尝试添加“以上都不是”选项或类似的东西？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T06:15:49.023

稳健的方法是在组中添加一个单选按钮，带有“无”之类的标签。当然，这可能需要对处理表单数据的服务器端代码进行少量添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T06:30:05.583

我认为您的问题与此类似：[如何在单击时选中/取消选中单选按钮？](https://stackoverflow.com/questions/4957207/how-to-check-uncheck-radio-button-on-click)您基本上可以使用 javascript（该问题的答案使用 jQuery）来使按钮可切换。祝你好运！

# iphone - iPad 中的应用程序崩溃但 iPhone 中没有

> ID：10118235
> 
> 赞同：1
> 
> 时间：2012-04-12T06:09:19.247
> 
> 标签：iphone, ios, ipad

早上好，我有一个运行良好的应用程序，`iPhone`但启动时崩溃`iPad`并且不明白问题所在。

```
Crash incident:Hardware Model:      iPad3,3
Process:         SardinianPirates1 [20569]
Path:            /var/mobile/Applications/BD12D72A-B8BC-4443-B866-8B632211A467/nameofapp.app/nameofapp
Identifier:      nameofapp
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-04-11 15:41:24.829 -0700
OS Version:      iPhone OS 5.1 (9B176)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Application Specific Information:
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Could not load NIB in bundle: 'NSBundle </var/mobile/Applications/BD12D72A-B8BC-4443-B866-8B632211A467/nameofapp.app> (loaded)' with name 'MainWindow-iPad''
*** First throw call stack:
(0x31f9e88f 0x367f3259 0x31f9e789 0x31f9e7ab 0x32d9f437 0x32da094d 0x32cd6509 0x32b5f893 0x32b598d7 0x32b27c6b 0x32b2770f 0x32b270e3 0x3595322b 0x31f72523 0x31f724c5 0x31f71313 0x31ef44a5 0x31ef436d 0x32b58a13 0x32b55e7d 0xfbdef 0xfbda8)

This is my Xcode error log when launch the iPad simulator

2012-04-12 07:53:50.556 nameofapp[16337:10a03] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Could not load NIB in bundle: 'NSBundle </Users/myname/Library/Application Support/iPhone Simulator/5.1/Applications/E8655CDA-1E4F-41CB-B3C7-9A5B7BFF13A6/nameofapp.app> (loaded)' with name 'MainWindow-iPad''
*** First throw call stack:
(0x1c1a022 0x1905cd6 0x1bc2a48 0x1bc29b9 0x5bb638 0x5bceb7 0x399ce1 0x399ff8 0x39917f 0x3a8183 0x3a8c38 0x39c634 0x2312ef5 0x1bee195 0x1b52ff2 0x1b518da 0x1b50d84 0x1b50c9b 0x398c65 0x39a626 0x25a7 0x2541 0x1)
terminate called throwing an exception(lldb) 
```

有什么想法可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T06:25:28.813

这是说它希望找到一个`MainWindow-iPad`在您的应用程序包中调用的文件。**在Summary** , **iPad Deployment Info**下查看 Target 设置。正如 Radider33 所说，您的应用程序委托也可能会要求这样做。

您可以选择三种不同的方法来解决此问题：

1.  如果您的应用程序 UI 是为 iPhone 屏幕尺寸精确设计的，请转到**Summary**，**iOS Application Target**并将**Devices**设置为**iPhone**。在 iPad 上，您的应用程序将在一个 iPhone 形状的窗口中运行，并带有通常的 2x 按钮。这是最少的工作，但具有最丑陋的结果。
2.  如果您的 iPhone UI 很好地使用了自动调整大小的遮罩，您可以设置 iPad**主界面**或**主故事板**文件名以匹配 iPhone / iPod 版本。所有视图都将根据其遮罩安装到更大的 iPad 屏幕上。
3.  If you want to redesign your UI for the iPad (most work, but Apple would rather you do this), create an appropriate set of files in Interface Builder. Either name the window `MainWindow-iPad`, or change the iPad **Main Interface** file to match whatever file you create.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T06:21:32.543

更改项目的默认窗口设置。并检查您的 ipad ios 版本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T06:11:33.187

检查您的项目设置。您的应用程序正在尝试借用文件名为“MainWindow-iPad”的 xib，但不能。确保您的应用程序委托以及项目的默认窗口设置中的所有内容都正确无误。

# vb.net - 共享集合 VB.NET

> ID：10118236
> 
> 赞同：0
> 
> 时间：2012-04-12T06:09:20.390
> 
> 标签：vb.net, collections, shared

我需要从我的数据库中获取大量数据，并希望在应用程序启动时获取这些数据，将其存储在一个集合中并在整个应用程序中重用。

我尝试声明一个公共共享集合并在我启动应用程序时填充它（在主窗体中）。第一次使用该集合时它工作正常，但随后它是空的。

我四处寻找我可能写过自己清除它但无法弄清楚的地方。任何人有任何想法或提示？

代码类似于：

```
Public Shared m_objDocCollection As Collection(Of clDocumentation) 
```

然后在主窗体中

```
clDocumentation.m_objDocCollection = clDocumentation.GetDocumentsFromDb() 
```

编辑; 抱歉没有添加代码。复制了最相关的并放在此处；[https://gist.github.com/2365610](https://gist.github.com/2365610)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:03:53.003

从您的代码中看不出发生了什么，但我的猜测是您不止一次（重新）初始化您的集合。

在您的代码中搜索正在（重新）初始化集合的任何位置，例如：

`m_objDocCollection = New Collection(Of clDocumentation)`

并在这些上设置断点。然后运行您的代码并查看它们何时触发。

# objective-c - 通过 Child NSView/ViewController 访问 NSWindow 的 Element

> ID：10118237
> 
> 赞同：2
> 
> 时间：2012-04-12T06:09:27.417
> 
> 标签：objective-c, interface-builder, nsview, nswindow

是否可以从子 NSViewController 访问 NSWindowController 的元素？

本质上，我有一个 NSProgressIndicator，它在 NSWindow 的底角旋转。这是因为我的 WebView 在我的 NSWindowController 而不是我的 NSViewController 中。

我现在想打破逻辑，但我无法理解如何从我的视图控制器访问这些元素。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:39:36.800

您无法将一个 NIB 的插座连接到另一个 NIB 中的对象，这样做表明您的设计存在问题。如果视图与窗口中的其他事物密切相关，那么它可能不应该被分离到不同的 NIB 中。

只有当视图作为一个独立的单元有意义时，它才应该进入一个单独的 NIB。它应该代表和操纵它的控制器，仅此`representedObject`而已。控制器可能有一个委托，它通知正在做什么并要求做出定制决策。

如果您采用这种设计，也许您可​​以继续使用单独的 NIB。也许窗口会引用某个模型对象。它将配置视图控制器以使用该模型对象作为其表示的对象。也许进度指示器会绑定到同一个模型对象。然后，当视图操作其表示的对象时，它也会*间接*影响进度指示器。

另一种选择是让窗口控制器将自己设置为视图控制器的委托，并且您的视图控制器可以在适当的点调用它以通知它视图中发生的事情。然后窗口控制器可以对进度指示器或视图之外的窗口中的其他内容执行任何适当的操作。这个假设的委托是你必须添加到视图控制器类的东西，你需要设计它的协议。

# python - python提取n列

> ID：10118239
> 
> 赞同：0
> 
> 时间：2012-04-12T06:09:32.677
> 
> 标签：python, numpy

我有一个格式为 numpy 的数组：

```
a = [[1,2,3],[4,5,6],[7,8,9]] 
```

我想将元素提取为：

```
a' = [[1,2],[4,5],[7,8]] 
```

我尝试使用：

```
a' = a[:][:2] 
```

但它不像我预期的那样工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T06:11:30.023

```
>>> [l[:2] for l in a]
[[1, 2], [4, 5], [7, 8]] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T06:13:38.873

```
>>> numpy.array([[1,2,3],[4,5,6],[7,8,9]])[:,:2]
array([[1, 2],
       [4, 5],
       [7, 8]]) 
```

# android - 跟踪在 Android 中发送的短信

> ID：10118242
> 
> 赞同：4
> 
> 时间：2012-04-12T06:09:48.387
> 
> 标签：android, sms

我注意到我通过 Android 中的标准 SmsManager 发送的跟踪未决意图似乎没有在其中保留额外信息。例子：

```
Intent sentIntent = new Intent(SENT);
sentIntent.putExtra("value1", "foo"); // <- note this value
PendingIntent sentPI = PendingIntent.getBroadcast(this, 0, sentIntent, 0);

SmsManager sms = SmsManager.getDefault();
sms.sendTextMessage(numberToSendTo, null, mMessageToSend, sentPI, null);

//... in the broadcastReceiver that catches the SENT intent ...
public void onReceive(Context arg0, Intent arg1) {

    arg1.getExtras().getString("value1");  // <- nothing, no such key
} 
```

有人可以测试一下吗，这种行为是故意的，我做错了，还是要为 Android 提交错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:28:25.223

在创建 PendingIntent 时尝试添加标志（有关标志及其一般行为，[`FILL_IN_SELECTOR`](http://developer.android.com/reference/android/content/Intent.html#FILL_IN_SELECTOR)请参阅规范）。[`PendingIntent.getBroadcast`](http://developer.android.com/reference/android/app/PendingIntent.html#getBroadcast%28android.content.Context,%20int,%20android.content.Intent,%20int%29)这应该`PendingIntent`会强制`Intent`.

# flash-cs5 - 将文本转换为十六进制 Flash CS5

> ID：10118243
> 
> 赞同：0
> 
> 时间：2012-04-12T06:09:55.117
> 
> 标签：flash-cs5, flash-cs5.5

我正在制作一个由背景和 3 个文本框组成的颜色测试仪。您可以在每个将更改背景的框中输入十六进制，例如

_ _ _ 0xF59900 _ _ _

Box1:F5 _ _ _ Box2:99 _ _ _ Box3:00

它显示“0xF59900”的顶部是一个文本字段。如何将其转换为 uint 以便更改背景颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:15:44.343

尝试类似：

var bgColor = "0x123456"; var bgColor:uint = uint(bgColor);

# php - RSS 阅读器如何处理 .php 文件的输出

> ID：10118244
> 
> 赞同：1
> 
> 时间：2012-04-12T06:10:01.533
> 
> 标签：php, xml, rss, rss-reader

我从 php 文件动态生成 rss 输出，输出提要的 url 是**http://mysite/rss-feed.php**。我已按照本[教程](http://www.ibm.com/developerworks/xml/library/x-phprss/index.html)生成提要。

我看过一些 rss 输出 url，它们不会有任何文件扩展名。我没有使用任何 MVC 框架，所以 url 也会有文件扩展名

根据我的网站托管在雅虎小型企业中，我无法访问 mod_rewrite 和 .htaccess 文件来隐藏 .php 的扩展名

即使我设置了**header("Content-Type: application/rss+xml; charset=ISO-8859-1")**。我怀疑所有 rss 读者都会考虑我的 rss 输出，并且我已经使用 W3C RSS 验证器工具测试了 rss 输出，它说它是有效的 RSS。

我也有2个问题

**1）**这是告诉读者从 xml 文件的 php 文件中读取 rss 的正确方法吗？

**2)**保留网址的更好方法是**http://mysite/rss-feed.php**或**http://mysite/rss-feed**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:14:24.593

1.  是的，读者应该关心 MIME 类型，而不是它的扩展名。
2.  没关系，但我更喜欢后者，因为它更短。

# arm - 将 UART 配置为 FIQ

> ID：10118246
> 
> 赞同：2
> 
> 时间：2012-04-12T06:10:09.930
> 
> 标签：arm

我正在研究 lpc2468 并使用**控制器的 UART0 与 sim300 gprs 模块进行通信**。有时，如果我发送一个命令来读取 sim 的信号强度，输入我

接收不正确。在查看问题后，我发现有时会出现问题

*当UART同时接收信息时，定时器被调用并且软件进入定时器块。在此期间，模块发送的一些字节会丢失。*至

防止这种情况我想将 UART0 配置为 FIQ，即具有最高优先级的中断。我可以吗

将 UART0 配置为 FIQ。如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:25:28.987

从 LPC2048 数据表，

> ARM 处理器内核有两个中断输入，称为中断请求 (IRQ) 和快速中断请求 (FIQ)。VIC 接受 32 个中断请求输入，可以编程为 FIQ 或向量 IRQ 类型。可编程分配方案意味着可以动态分配和调整来自各种外设的中断优先级。

所以你需要找出中断控制器的可编程寄存器在哪里，并将UART的中断类型更改为FIQ。

如果您有模拟支持，请查看[此](http://www.keil.com/dd/vtr/4181/7875.htm)内容以了解如何更改中断类型和优先级。

# r - R：预测因子中超过 52 个级别，为打印而截断

> ID：10118249
> 
> 赞同：-1
> 
> 时间：2012-04-12T06:10:21.037
> 
> 标签：r, rpart, cart-analysis

嗨，我是 R 编程语言的初学者。我使用 rpart 包为回归树编写了一个代码。在我的数据中，我的一些自变量有 100 多个级别。运行 rpart 函数后，我收到以下警告消息“**预测因子中超过 52 个级别，为打印而截断**”并且我的树以非常奇怪的方式显示。例如，我的树按位置拆分，大约有 70 个不同的级别，但是当标签显示在树中时，它会显示“ZZZZZZZZZZZZZZZZ......”我没有任何位置叫“ZZZZZZZZ”

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T15:16:38.687

R 中的许多函数对因子类型变量可以具有`randomForest`的级别数有限制（即，将因子的级别数限制为 32）。

我看到它处理的一种方法，尤其是在数据挖掘竞赛中是：

1) 确定给定函数允许的最大级别数（调用 this `X`）。

2)`table()`用于确定因子每个水平的出现次数，并从大到小排列。

3) 对于`X - 1`因子的顶层，保持原样。

4）对于级别 <`X`将它们全部更改为一个因素，以将它们识别为低发生级别。

这是一个有点长但希望有所帮助的示例：

```
# Generate 1000 random numbers between 0 and 100.
vars1 <- data.frame(values1=(round(runif(1000) * 100,0)))
# Changes values to factor variable.
vars1$values1 <- factor(vars1$values1)
# Show top 6 rows of data frame.
head(vars1)
# Show the number of unique factor levels
length(unique(vars1$values1 ))
# Create table showing frequency of each levels occurrence.
table1 <- data.frame(table(vars1 ))
# Orders the table in descending order of frequency.
table1 <- table1[order(-table1$Freq),]
head(table1)
# Assuming we want to use the CART we choose the top 51
# levels to leave unchanged
# Get values of top 51 occuring levels
noChange <- table1$vars1[1:51]
# we use '-1000' as factor to avoid overlap w/ other levels (ie if '52' was 
# actually one of the levels).
# ifelse() checks to see if the factor level is in the list of the top 51
# levels.  If present it uses it as is, if not it changes it to '-1000'
vars1$newFactor <- (ifelse(vars1$values1 %in% noChange, vars1$values1, "-1000")) 
# Show the number of levels of the new factor column.
length(unique(vars1$newFactor)) 
```

最后，您可能需要考虑使用截断的变量，`rpart`因为当有大量变量或它们的名称很长时，树形显示会变得非常繁忙。

# java - 在 Java 中跟踪/轮询日志文件的最有效方法

> ID：10118264
> 
> 赞同：4
> 
> 时间：2012-04-12T06:11:51.620
> 
> 标签：java, performance, file, file-io, polling

有很多方法，可以使用创建程序并调用 Unix`tail`命令，但是这样做的问题是该进程必须安装在安装了 tail 的 Unix 机器上。

另一种选择是逐行读取文件，直到没有更多行，休眠一段时间，然后尝试读取下一行并重复。

问题是我如何/如何轮询正在积极写入的文件。AFAIK 在文件被修改时，Java 无法获取异步通知，因为这太低级（来自操作系统的东西）。我也知道没有支持这一点的库。

我在想一个更好的方法可能是在文件的修改日期休眠/轮询..？

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T06:18:31.360

如果您可以使用 Java 7，则有 File Watchers，您可以实现您所需要的。
[文件通知](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)

对于 Java 6（和更早版本），您必须使用 Apache Commons VFS（[文件监视器）](http://commons.apache.org/vfs/apidocs/org/apache/commons/vfs2/impl/DefaultFileMonitor.html)库来创建您自己的文件监视器。

如果您不能使用 Java 7 或使用第三方库（例如 commons 或[jnotify](http://jnotify.sourceforge.net/)），您将不得不使用轮询线程自己编写一个文件看门狗。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T20:55:40.417

如果文件/目录已更改，您可以使用[java nio 的 WatchService](http://docs.oracle.com/javase/7/docs/api/java/nio/file/WatchService.html)获取异步通知。本[教程](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)解释了使用它的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T07:24:12.247

为了简化这一点，您可以做的是创建一个线程来轮询文件的大小并且只读取那么多，即它永远不会到达结尾。读取的数据可以写入管道，允许您的主线程读取连续管道。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T06:19:24.420

我不知道答案。只有两个提示
1\. 也许 RandomAccessFile 会帮助你。
2\. 尝试找到另一个开源程序，它可以做到这一点。（例如 IntelliJ IDEA 就是这样做的）

# php - PHP 字符串转 JSON

> ID：10118267
> 
> 赞同：0
> 
> 时间：2012-04-12T06:12:01.387
> 
> 标签：php, json, api, parsing

这是我的 php 脚本

```
<?php

require_once 'GoogleMovieShowtimes.php';

//Requests www.google.com/movies?near=washington
$test = new GoogleMovieShowtimes('washington');
ob_start(); 
var_dump($test->parse()); 
$save = ob_get_contents(); 
ob_end_clean();  
$save=json_encode($save);
$saveJSON=json_decode($save);
print_r($saveJSON);

?> 
```

我得到的输出是这个

```
array(1)
{
    ["theater"]=> array(10)
    {
        [0]=> array(1)
        {
            ["movies"]=> array(9)
            {
                [0]=> array(2)
                {
                    ["name"]=> string(35) "The Raid: Redemption (Serbuan maut)" ["time"]=> array(8)
                    {
                        [0]=> string(59) "2:20" [1]=> string(7) "" [2]=> string(65) "  4:50" [3]=> string(13) "  " [4]=> string(65) "  7:20" [5]=> string(13) "  " [6]=> string(67) "  9:50pm" [7]=> string(13) "  "
                    }

                }

                [1]=> array(2)
                {
                    ["name"]=> string(27) "Salmon Fishing in the Yemen" ["time"]=> array(8)
                    {
                        [0]=> string(59) "1:35" [1]=> string(7) "" [2]=> string(65) "  4:15" [3]=> string(13) "  " [4]=> string(65) "  7:00" [5]=> string(13) "  " [6]=> string(67) "  9:35pm" [7]=> string(13) "  "
                    }

                }

                [2]=> array(2)
                {
                    ["name"]=> string(38) "The Kid With a Bike (Le Gamin au Velo)" ["time"]=> array(10)
                    {
                        [0]=> string(59) "1:00" [1]=> string(7) "" [2]=> string(65) "  3:15" [3]=> string(13) "  " [4]=> string(65) "  5:30" [5]=> string(13) "  " [6]=> string(65) "  7:45" [7]=> string(13) "  " [8]=> string(67) "  9:55pm" [9]=> string(13) "  "
                    }

                }

                [3]=> array(2)
                {
                    ["name"]=> string(20) "Jiro Dreams of Sushi" ["time"]=> array(10)
                    {
                        [0]=> string(59) "1:30" [1]=> string(7) "" [2]=> string(65) "  3:40" [3]=> string(13) "  " [4]=> string(65) "  5:50" [5]=> string(13) "  " [6]=> string(65) "  8:00" [7]=> string(13) "  " [8]=> string(67) "  9:55pm" [9]=> string(13) "  "
                    }

                }

                [4]=> array(2)
                {
                    ["name"]=> string(17) "The Deep Blue Sea" ["time"]=> array(2)
                    {
                        [0]=> string(61) "4:05pm" [1]=> string(7) ""
                    }

                }

                [5]=> array(2)
                {
                    ["name"]=> string(38) "A Separation (Jodaeiye Nader az Simin)" ["time"]=> array(2)
                    {
                        [0]=> string(61) "1:10pm" [1]=> string(7) ""
                    }

                }

                [6]=> array(2)
                {
                    ["name"]=> string(8) "Thin Ice" ["time"]=> array(4)
                    {
                        [0]=> string(59) "7:10" [1]=> string(7) "" [2]=> string(67) "  9:40pm" [3]=> string(13) "  "
                    }

                }

                [7]=> array(2)
                {
                    ["name"]=> string(10) "The Skinny" ["time"]=> array(10)
                    {
                        [0]=> string(59) "1:00" [1]=> string(7) "" [2]=> string(65) "  3:00" [3]=> string(13) "  " [4]=> string(65) "  5:15" [5]=> string(13) "  " [6]=> string(65) "  7:30" [7]=> string(13) "  " [8]=> string(67) "  9:45pm" [9]=> string(13) "  "
                    }

                }

                [8]=> array(2)
                {
                    ["name"]=> string(19) "Hipsters (Stilyagi)" ["time"]=> array(8)
                    {
                        [0]=> string(59) "1:15" [1]=> string(7) "" [2]=> string(65) "  4:00" [3]=> string(13) "  " [4]=> string(65) "  6:45" [5]=> string(13) "  " [6]=> string(67) "  9:30pm" [7]=> string(13) "  "
                    }

                }

            }

        }

        [1]=> array(1)
        {
            ["movies"]=> array(3)
            {
                [0]=> array(2)
                {
                    ["name"]=> string(16) "Tornado Alley 3D" ["time"]=> array(6)
                    {
                        [0]=> string(62) "11:50am" [1]=> string(7) "" [2]=> string(65) "  2:30" [3]=> string(13) "  " [4]=> string(67) "  5:10pm" [5]=> string(13) "  "
                    }

                }

                [1]=> array(2)
                {
                    ["name"]=> string(33) "Dinosaurs 3D: Giants of Patagonia" ["time"]=> array(6)
                    {
                        [0]=> string(62) "10:15am" [1]=> string(7) "" [2]=> string(66) "  12:55" [3]=> string(13) "  " [4]=> string(67) "  4:35pm" [5]=> string(13) "  "
                    }

                }

                [2]=> array(2)
                {
                    ["name"]=> string(20) "Coral Reef Adventure" ["time"]=> array(6)
                    {
                        [0]=> string(62) "10:50am" [1]=> string(7) "" [2]=> string(65) "  1:30" [3]=> string(13) "  " [4]=> string(67) "  3:35pm" [5]=> string(13) "  "
                    }

                }

            }

        }

        [2]=> array(1)
        {
            ["movies"]=> array(1)
            {
                [0]=> array(2)
                {
                    ["name"]=> string(6) "At Sea" ["time"]=> array(6)
                    {
                        [0]=> string(62) "10:00am" [1]=> string(7) "" [2]=> string(66) "  12:00" [3]=> string(13) "  " [4]=> string(67) "  2:00pm" [5]=> string(13) "  "
                    }

                }

            }

        }

        [3]=> array(1)
        {
            ["movies"]=> array(11)
            {
                [0]=> array(2)
                {
                    ["name"]=> string(16) "The Hunger Games" ["time"]=> array(24)
                    {
                        [0]=> string(294) "11:30am" [1]=> string(7) "" [2]=> string(298) "  12:10" [3]=> string(13) "  " [4]=> string(298) "  12:45" [5]=> string(13) "  " [6]=> string(297) "  3:00" [7]=> string(13) "  " [8]=> string(297) "  3:30" [9]=> string(13) "  " [10]=> string(297) "  4:10" [11]=> string(13) "  " [12]=> string(297) "  6:20" [13]=> string(13) "  " [14]=> string(297) "  6:50" [15]=> string(13) "  " [16]=> string(297) "  7:35" [17]=> string(13) "  " [18]=> string(297) "  9:35" [19]=> string(13) "  " [20]=> string(298) "  10:05" [21]=> string(13) "  " [22]=> string(300) "  10:35pm" [23]=> string(13) "  "
                    }

                }

                [1]=> array(2)
                {
                    ["name"]=> string(16) "American Reunion" ["time"]=> array(18)
                    {
                        [0]=> string(294) "11:50am" [1]=> string(7) "" [2]=> string(298) "  12:50" [3]=> string(13) "  " [4]=> string(297) "  2:40" [5]=> string(13) "  " [6]=> string(297) "  4:00" [7]=> string(13) "  " [8]=> string(297) "  5:25" [9]=> string(13) "  " [10]=> string(297) "  7:00" [11]=> string(13) "  " [12]=> string(297) "  8:00" [13]=> string(13) "  " [14]=> string(297) "  9:50" [15]=> string(13) "  " [16]=> string(300) "  10:40pm" [17]=> string(13) "  "
                    }

                }

                [2]=> array(2)
                {
                    ["name"]=> string(13) "Mirror Mirror" ["time"]=> array(8)
                    {
                        [0]=> string(291) "1:30" [1]=> string(7) "" [2]=> string(297) "  4:50" [3]=> string(13) "  " [4]=> string(297) "  7:20" [5]=> string(13) "  " [6]=> string(300) "  10:00pm" [7]=> string(13) "  "
                    }

                }

                [3]=> array(2)
                {
                    ["name"]=> string(14) "21 Jump Street" ["time"]=> array(10)
                    {
                        [0]=> string(294) "11:45am" [1]=> string(7) "" [2]=> string(297) "  2:25" [3]=> string(13) "  " [4]=> string(297) "  5:10" [5]=> string(13) "  " [6]=> string(297) "  7:50" [7]=> string(13) "  " [8]=> string(300) "  10:25pm" [9]=> string(13) "  "
                    }

                }

                [4]=> array(2)
                {
                    ["name"]=> string(10) "Titanic 3D" ["time"]=> array(12)
                    {
                        [0]=> string(292) "12:00" [1]=> string(7) "" [2]=> string(297) "  1:00" [3]=> string(13) "  " [4]=> string(297) "  4:20" [5]=> string(13) "  " [6]=> string(297) "  5:20" [7]=> string(13) "  " [8]=> string(297) "  8:30" [9]=> string(13) "  " [10]=> string(299) "  9:30pm" [11]=> string(13) "  "
                    }

                }

                [5]=> array(2)
                {
                    ["name"]=> string(22) "Wrath of the Titans 3D" ["time"]=> array(14)
                    {
                        [0]=> string(294) "11:40am" [1]=> string(7) "" [2]=> string(297) "  2:20" [3]=> string(13) "  " [4]=> string(297) "  4:15" [5]=> string(13) "  " [6]=> string(297) "  5:00" [7]=> string(13) "  " [8]=> string(297) "  7:40" [9]=> string(13) "  " [10]=> string(297) "  9:40" [11]=> string(13) "  " [12]=> string(300) "  10:20pm" [13]=> string(13) "  "
                    }

                }

                [6]=> array(2)
                {
                    ["name"]=> string(19) "Wrath of the Titans" ["time"]=> array(4)
                    {
                        [0]=> string(291) "1:10" [1]=> string(7) "" [2]=> string(299) "  7:10pm" [3]=> string(13) "  "
                    }

                }

                [7]=> array(2)
                {
                    ["name"]=> string(27) "Dr. Seuss' The Lorax 3D" ["time"]=> array(2)
                    {
                        [0]=> string(294) "12:05pm" [1]=> string(7) ""
                    }

                }

                [8]=> array(2)
                {
                    ["name"]=> string(16) "Casa de mi Padre" ["time"]=> array(2)
                    {
                        [0]=> string(293) "1:15pm" [1]=> string(7) ""
                    }

                }

                [9]=> array(2)
                {
                    ["name"]=> string(9) "Project X" ["time"]=> array(8)
                    {
                        [0]=> string(291) "3:20" [1]=> string(7) "" [2]=> string(297) "  5:40" [3]=> string(13) "  " [4]=> string(297) "  8:10" [5]=> string(13) "  " [6]=> string(300) "  10:30pm" [7]=> string(13) "  "
                    }

                }

                [10]=> array(2)
                {
                    ["name"]=> string(12) "We the Party" ["time"]=> array(4)
                    {
                        [0]=> string(292) "12:15" [1]=> string(7) "" [2]=> string(299) "  2:45pm" [3]=> string(13) "  "
                    }

                }

            }

        }

        [4]=> array(1)
        {
            ["movies"]=> array(6)
            {
                [0]=> array(2)
                {
                    ["name"]=> string(16) "Casa de mi Padre" ["time"]=> array(6)
                    {
                        [0]=> string(59) "2:40" [1]=> string(7) "" [2]=> string(65) "  7:10" [3]=> string(13) "  " [4]=> string(67) "  9:20pm" [5]=> string(13) "  "
                    }

                }

                [1]=> array(2)
                {
                    ["name"]=> string(10) "Undefeated" ["time"]=> array(6)
                    {
                        [0]=> string(59) "2:20" [1]=> string(7) "" [2]=> string(65) "  7:30" [3]=> string(13) "  " [4]=> string(67) "  9:50pm" [5]=> string(13) "  "
                    }

                }

                [2]=> array(2)
                {
                    ["name"]=> string(10) "Coriolanus" ["time"]=> array(2)
                    {
                        [0]=> string(61) "5:00pm" [1]=> string(7) ""
                    }

                }

                [3]=> array(2)
                {
                    ["name"]=> string(3) "Boy" ["time"]=> array(4)
                    {
                        [0]=> string(59) "3:30" [1]=> string(7) "" [2]=> string(67) "  6:00pm" [3]=> string(13) "  "
                    }

                }

                [4]=> array(2)
                {
                    ["name"]=> string(16) "Chico & Rita" ["time"]=> array(4)
                    {
                        [0]=> string(59) "8:00" [1]=> string(7) "" [2]=> string(68) "  10:00pm" [3]=> string(13) "  "
                    }

                }

                [5]=> array(2)
                {
                    ["name"]=> string(19) "The Long Day Closes" ["time"]=> array(2)
                    {
                        [0]=> string(61) "5:20pm" [1]=> string(7) ""
                    }

                }

            }

        }

        [5]=> array(1)
        {
            ["movies"]=> array(3)
            {
                [0]=> array(2)
                {
                    ["name"]=> string(9) "Rescue 3D" ["time"]=> array(8)
                    {
                        [0]=> string(62) "11:15am" [1]=> string(7) "" [2]=> string(66) "  12:55" [3]=> string(13) "  " [4]=> string(65) "  3:05" [5]=> string(13) "  " [6]=> string(67) "  4:50pm" [7]=> string(13) "  "
                    }

                }

                [1]=> array(2)
                {
                    ["name"]=> string(15) "IMAX: Hubble 3D" ["time"]=> array(8)
                    {
                        [0]=> string(60) "10:20" [1]=> string(7) "" [2]=> string(68) "  11:55am" [3]=> string(13) "  " [4]=> string(65) "  1:30" [5]=> string(13) "  " [6]=> string(67) "  3:45pm" [7]=> string(13) "  "
                    }

                }

                [2]=> array(2)
                {
                    ["name"]=> string(6) "To Fly" ["time"]=> array(2)
                    {
                        [0]=> string(61) "2:30pm" [1]=> string(7) ""
                    }

                }

            }

        }

        [6]=> array(1)
        {
            ["movies"]=> array(4)
            {
                [0]=> array(2)
                {
                    ["name"]=> string(20) "Journey to the Stars" ["time"]=> array(16)
                    {
                        [0]=> string(60) "12:00" [1]=> string(7) "" [2]=> string(65) "  1:00" [3]=> string(13) "  " [4]=> string(65) "  2:00" [5]=> string(13) "  " [6]=> string(65) "  3:00" [7]=> string(13) "  " [8]=> string(65) "  4:00" [9]=> string(13) "  " [10]=> string(65) "  5:00" [11]=> string(13) "  " [12]=> string(65) "  6:00" [13]=> string(13) "  " [14]=> string(67) "  7:00pm" [15]=> string(13) "  "
                    }

                }

                [1]=> array(2)
                {
                    ["name"]=> string(17) "Cosmic Collisions" ["time"]=> array(10)
                    {
                        [0]=> string(62) "11:00am" [1]=> string(7) "" [2]=> string(66) "  12:30" [3]=> string(13) "  " [4]=> string(65) "  2:30" [5]=> string(13) "  " [6]=> string(65) "  4:30" [7]=> string(13) "  " [8]=> string(67) "  6:30pm" [9]=> string(13) "  "
                    }

                }

                [2]=> array(2)
                {
                    ["name"]=> string(16) "Infinity Express" ["time"]=> array(8)
                    {
                        [0]=> string(62) "11:30am" [1]=> string(7) "" [2]=> string(65) "  1:30" [3]=> string(13) "  " [4]=> string(65) "  3:30" [5]=> string(13) "  " [6]=> string(67) "  5:30pm" [7]=> string(13) "  "
                    }

                }

                [3]=> array(2)
                {
                    ["name"]=> string(17) "The Stars Tonight" ["time"]=> array(2)
                    {
                        [0]=> string(62) "10:30am" [1]=> string(7) ""
                    }

                }

            }

        }

        [7]=> array(1)
        {
            ["movies"]=> array(1)
            {
                [0]=> array(2)
                {
                    ["name"]=> string(24) "Selection of Short Films" ["time"]=> array(4)
                    {
                        [0]=> string(60) "12:30" [1]=> string(7) "" [2]=> string(67) "  3:30pm" [3]=> string(13) "  "
                    }

                }

            }

        }

        [8]=> array(1)
        {
            ["movies"]=> array(15)
            {
                [0]=> array(2)
                {
                    ["name"]=> string(16) "The Hunger Games" ["time"]=> array(18)
                    {
                        [0]=> string(292) "12:20" [1]=> string(7) "" [2]=> string(297) "  1:20" [3]=> string(13) "  " [4]=> string(297) "  3:50" [5]=> string(13) "  " [6]=> string(297) "  4:45" [7]=> string(13) "  " [8]=> string(297) "  6:15" [9]=> string(13) "  " [10]=> string(297) "  7:15" [11]=> string(13) "  " [12]=> string(297) "  8:10" [13]=> string(13) "  " [14]=> string(297) "  9:45" [15]=> string(13) "  " [16]=> string(300) "  10:30pm" [17]=> string(13) "  "
                    }

                }

                [1]=> array(2)
                {
                    ["name"]=> string(16) "American Reunion" ["time"]=> array(16)
                    {
                        [0]=> string(292) "12:30" [1]=> string(7) "" [2]=> string(297) "  1:30" [3]=> string(13) "  " [4]=> string(297) "  3:10" [5]=> string(13) "  " [6]=> string(297) "  4:30" [7]=> string(13) "  " [8]=> string(297) "  6:00" [9]=> string(13) "  " [10]=> string(297) "  7:30" [11]=> string(13) "  " [12]=> string(297) "  9:00" [13]=> string(13) "  " [14]=> string(300) "  10:15pm" [15]=> string(13) "  "
                    }

                }

                [2]=> array(2)
                {
                    ["name"]=> string(13) "Mirror Mirror" ["time"]=> array(8)
                    {
                        [0]=> string(291) "1:40" [1]=> string(7) "" [2]=> string(297) "  4:20" [3]=> string(13) "  " [4]=> string(297) "  7:10" [5]=> string(13) "  " [6]=> string(300) "  10:00pm" [7]=> string(13) "  "
                    }

                }

                [3]=> array(2)
                {
                    ["name"]=> string(17) "The Three Stooges" ["time"]=> array(2)
                    {
                        [0]=> string(294) "12:01am" [1]=> string(7) ""
                    }

                }

                [4]=> array(2)
                {
                    ["name"]=> string(14) "21 Jump Street" ["time"]=> array(8)
                    {
                        [0]=> string(291) "2:00" [1]=> string(7) "" [2]=> string(297) "  5:10" [3]=> string(13) "  " [4]=> string(297) "  7:50" [5]=> string(13) "  " [6]=> string(300) "  10:25pm" [7]=> string(13) "  "
                    }

                }

                [5]=> array(2)
                {
                    ["name"]=> string(10) "Titanic 3D" ["time"]=> array(10)
                    {
                        [0]=> string(292) "12:00" [1]=> string(7) "" [2]=> string(297) "  2:30" [3]=> string(13) "  " [4]=> string(297) "  4:15" [5]=> string(13) "  " [6]=> string(297) "  7:00" [7]=> string(13) "  " [8]=> string(299) "  8:45pm" [9]=> string(13) "  "
                    }

                }

                [6]=> array(2)
                {
                    ["name"]=> string(22) "The Cabin in the Woods" ["time"]=> array(2)
                    {
                        [0]=> string(293) "12:01am" [1]=> string(7) ""
                    }

                }

                [7]=> array(2)
                {
                    ["name"]=> string(22) "Wrath of the Titans 3D" ["time"]=> array(8)
                    {
                        [0]=> string(292) "12:10" [1]=> string(7) "" [2]=> string(297) "  3:00" [3]=> string(13) "  " [4]=> string(297) "  5:45" [5]=> string(13) "  " [6]=> string(299) "  8:30pm" [7]=> string(13) "  "
                    }

                }

                [8]=> array(2)
                {
                    ["name"]=> string(7) "Lockout" ["time"]=> array(2)
                    {
                        [0]=> string(294) "12:01am" [1]=> string(7) ""
                    }

                }

                [9]=> array(2)
                {
                    ["name"]=> string(19) "Wrath of the Titans" ["time"]=> array(8)
                    {
                        [0]=> string(292) "12:45" [1]=> string(7) "" [2]=> string(297) "  3:30" [3]=> string(13) "  " [4]=> string(297) "  6:30" [5]=> string(13) "  " [6]=> string(299) "  9:15pm" [7]=> string(13) "  "
                    }

                }

               //removed some things to minimize word count

                [12]=> array(2)
                {
                    ["name"]=> string(27) "Salmon Fishing in the Yemen" ["time"]=> array(4)
                    {
                        [0]=> string(291) "2:45" [1]=> string(7) "" [2]=> string(299) "  8:20pm" [3]=> string(13) "  "
                    }

                }

                [13]=> array(2)
                {
                    ["name"]=> string(42) "Wrath of the Titans: An IMAX 3D Experience" ["time"]=> array(8)
                    {
                        [0]=> string(291) "2:15" [1]=> string(7) "" [2]=> string(297) "  5:00" [3]=> string(13) "  " [4]=> string(297) "  7:40" [5]=> string(13) "  " [6]=> string(300) "  10:20pm" [7]=> string(13) "  "
                    }

                }

                [14]=> array(2)
                {
                    ["name"]=> string(17) "Friends With Kids" ["time"]=> array(4)
                    {
                        [0]=> string(292) "12:05" [1]=> string(7) "" [2]=> string(299) "  5:30pm" [3]=> string(13) "  "
                    }

                }

            }

        }

        [9]=> array(1)
        {
            ["movies"]=> array(1)
            {
                [0]=> array(2)
                {
                    ["name"]=> string(16) "The Hunger Games" ["time"]=> array(6)
                    {
                        [0]=> string(292) "12:30" [1]=> string(7) "" [2]=> string(297) "  4:00" [3]=> string(13) "  " [4]=> string(299) "  7:40pm" [5]=> string(13) "  "
                    }

                }

            }

        }

    }

} 
```

但现在如果我这样做

```
print_r($saveJSON["theater"]); 
```

我得到的只是'a'....没有别的，这不应该打印剧院阵列吗？怎么了？

如果我不执行 json_encode() 和 json_decode 而只是 echo $save 我得到相同的输出，那么我该如何遍历每个数组呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T06:15:01.253

1.  `print_r($saveJSON["theater"])`,`print_r($saveJSON[0]["theater"]);` 看起来 saveJSON 是一个包含 1 个元素的数组，它又是一个关联数组。

2.  还将您的 JSON 解码更改为返回数组而不是对象。

改变这个：

```
$saveJSON=json_decode($save); 
```

到

```
$saveJSON=json_decode($save,true); // to have saveJSON as an array, not object 
```

# google-maps-api-3 - Google 地方信息返回错误的城市

> ID：10118268
> 
> 赞同：3
> 
> 时间：2012-04-12T06:12:06.150
> 
> 标签：google-maps-api-3, autocomplete, google-places-api

我正在使用谷歌自动完成 Places API 构建一个应用程序。如果我使用地址“Pongal, New York, NY, United States”的预测建议，我会在返回地点对象中得到以下项目：

地点：曼哈顿

行政区域级别 2：纽约

Administrative_area_level_1：纽约

根据 google Places 的文档：[https](https://developers.google.com/maps/documentation/geocoding/) ://developers.google.com/maps/documentation/geocoding/ 对于美国， *locality*可用于获取*城市*或*城镇*， *administrative_area_level_1* 可用于*State*。

所以，我把*纽约*作为*州*，把*曼哈顿*作为*城市*，这是错误的，因为*曼哈顿*不是*城市*，这个地址的*城市是**纽约*

可能是我对谷歌的要求太多了。但是，非常感谢您对此的任何帮助，因为它会在以后的阶段破坏我的系统，或者如果我做错了什么，请纠正我。

扫描仪下的谷歌地图地址链接：[http ://maps.google.com/maps?q=Pongal,+New+York,+NY,+United+States&hl=en&ll=40.748492,-73.976612&spn=0.017947,0.042014&sll= 37.0625,-95.677068&sspn=38.365962,86.044922&oq=pongal&hq=Pongal,+New+York,+NY,+United+States&t=m&z=15&iwloc=A](http://maps.google.com/maps?q=Pongal,+New+York,+NY,+United+States&hl=en&ll=40.748492,-73.976612&spn=0.017947,0.042014&sll=37.0625,-95.677068&sspn=38.365962,86.044922&oq=pongal&hq=Pongal,+New+York,+NY,+United+States&t=m&z=15&iwloc=A)

# css - 移动 Web 应用的 CSS 库

> ID：10118287
> 
> 赞同：3
> 
> 时间：2012-04-12T06:13:53.377
> 
> 标签：css, mobile

我想知道是否有人知道任何严格针对移动网络应用程序的 CSS 资源？

我正在使用主干和 zepto 构建一个移动应用程序，但缺少一个用于处理主要用户界面组件的框架。

我知道有 jQuery mobile 和 ST2（是的，我知道你可以抓住他们的 css），但我想知道是否有任何资源是独立的移动 css 库并专注于使用 css 转换来模仿设备行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T06:19:01.450

我不知道有任何 CSS 框架是严格移动的，但这些框架非常好，并且具有媒体查询，有助于使他们的东西在移动设备上看起来不错。Bootstrap 是高度模块化的，因此它是一个很好的起点：

引导程序-http: [//twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)

基金会 - [http://foundation.zurb.com/](http://foundation.zurb.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-31T04:41:13.700

[topcoat.io](http://topcoat.io/)仍处于早期阶段，但发展很快。对于简单的示例应用程序，请查看：[Sample Mobile / PhoneGap Application with Backbone.js and Topcoat](http://coenraets.org/blog/2013/06/sample-mobile-phonegap-application-with-backbone-js-and-topcoat/)

问题有点老了，但我只是偶然发现了它。也许这对某人有用:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T01:12:11.763

现在有可用的 Kendo Mobile 可以做到这一点，但它不是免费的，也不是那么便宜。 [http://www.kendoui.c​​om/mobile.aspx](http://www.kendoui.com/mobile.aspx)

# java - 从 Eclipse Java 项目中删除未使用的标签库（奖品标签）

> ID：10118291
> 
> 赞同：0
> 
> 时间：2012-04-12T06:14:11.207
> 
> 标签：java, eclipse, jsp, jakarta-ee, taglib

我已删除[奖品标签](http://www.jenkov.com/prizetags/tabbed-pane-tag/installation.html).jar 和 .tld 文件。而且我想我已经删除了 JSP 页面顶部的所有标签库声明。但是每次我运行该项目时，它都会不断吐出以下消息（红色）：

```
Apr 12, 2012 3:43:41 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: urn:www.jenkov.com/projects/prizetags is already defined
Apr 12, 2012 3:43:41 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: urn:www.jenkov.com/projects/prizetags is already defined
Apr 12, 2012 3:43:41 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: urn:www.jenkov.com/projects/prizetags is already defined
Apr 12, 2012 3:43:41 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: urn:www.jenkov.com/projects/prizetags is already defined
Apr 12, 2012 3:43:41 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: urn:www.jenkov.com/projects/prizetags is already defined
Apr 12, 2012 3:43:41 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: urn:www.jenkov.com/projects/prizetags is already defined 
```

我真的很困惑，请说明我应该在哪里摆脱这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:38:56.860

使用 ctrl+H -> File Search 查找工作区中包含*Prizetags的所有文件*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:23:42.580

您是否从 META-INF 目录中删除了标记库描述符（.tld 文件）？（这是[安装过程](http://www.jenkov.com/prizetags/tabbed-pane-tag/installation.html)的第 2 步。）

# clojure - 了解 Mini-Kanren 的执行模型

> ID：10118292
> 
> 赞同：15
> 
> 时间：2012-04-12T06:14:13.193
> 
> 标签：clojure, scheme, logic, minikanren

SICP 的第 5 章解释了寄存器机器的元循环评估器实习生方案。

就 Scheme 原语而言，有什么可以提供类似类型的 Mini-Kanren 的吗？

我知道有一篇关于 Mini-Kanren 的论文（但是，我只关心建立一个心智模型；而不是所有血淋淋的优化细节）。我也知道有理性的计划者-但是，我不是在寻找一堆示例-我只是想以非常非常基本的形式理解 Mini-kanren，就像人们如何通过以下方式理解方案一样理解：eval、apply、if、set!、env

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-12T14:34:45.210

我认为阅读*The Reasoned Schemer*实际上是学习基础知识的正确方法。您还可以尝试从 Clojure Conj观看 Dan Friedman 和 William Byrd 的[miniKanren 谈话。](http://blip.tv/clojure/dan-friedman-and-william-byrd-minikanren-5936333)

由于miniKanren总共只有[七种形式](http://planet.racket-lang.org/package-source/dfriedman/miniKanren.plt/1/1/doc.txt)，了解基本形式实际上就是了解整个事物。该实现仅涉及[一页](http://planet.racket-lang.org/package-source/dfriedman/miniKanren.plt/1/1/minikanren.ss)宏，因此您可以尝试理解这一点。[您也可以尝试阅读 William Byrd博士论文](https://scholarworks.iu.edu/dspace/bitstream/handle/2022/8777/Byrd_indiana_0093A_10344.pdf?sequence=1)的介绍部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T14:39:59.027

在[The Reasoned Schemer](http://mitpress.mit.edu/catalog/item/default.asp?ttype=2&tid=10663)一书中，有一个基于 Scheme 的非常简单的逻辑系统的实现。它是自成一体的，理解它的唯一需要就是书本身，它——在该系列中其他书籍的风格中，非常容易理解。

# jquery - jquery 显示隐藏以在选项卡中编辑

> ID：10118295
> 
> 赞同：0
> 
> 时间：2012-04-12T06:14:31.317
> 
> 标签：jquery, jquery-ui-tabs, show-hide

我正在使用 jquery 选项卡。在每个选项卡上，都有一个“编辑”按钮，它隐藏标准文本并显示一个输入框。

问题是，两个选项卡都受到影响。我知道我可以为每个类（edit1、edit2 等）使用不同的类，但是如果我有很多选项卡怎么办？

示例：http: [//jsfiddle.net/mgjTD/](http://jsfiddle.net/mgjTD/)

什么是处理这个的好方法？

```
$(document).ready(function() {

    $('#sometabs').tabs();

    $('.edit_go').click(function(){
        $('.view').hide();
        $('.edit').show();
    });

    $('.view_go').click(function(){
        $('.view').show();
        $('.edit').hide();
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:16:41.423

您可以使用以下方法修复它[`.siblings()`](http://api.jquery.com/siblings/)：

```
$('#sometabs').tabs();

$('.edit_go').click(function () {
    $(this).siblings('.view').hide();
    $(this).siblings('.edit').show();
});

$('.view_go').click(function () {
    $(this).parent().siblings('.view').show();
    $(this).parent().siblings('.edit').hide();
}); 
```

演示：http: [//jsfiddle.net/ThiefMaster/mgjTD/6/](http://jsfiddle.net/ThiefMaster/mgjTD/6/)

# linux - Linux 中的字符串加密

> ID：10118297
> 
> 赞同：3
> 
> 时间：2012-04-12T06:14:37.680
> 
> 标签：linux, encryption, cryptography

谁能告诉我如何使用命令行工具接收 16 个字符的字符串并生成一个 16 个字符的加密字符串（以人类可读的格式）。

我已经探索过诸如 openssl 之类的选项，但我无法控制输出的长度。

有人可以建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T12:08:48.283

[这里](http://www.commandlinefu.com/commands/view/1792/rot13-using-the-tr-command)有 Linux 中 ROT13 的描述。我没有测试过：

`$alias rot13="tr '[A-Za-z]' '[N-ZA-Mn-za-m]'"`

这可能会满足您的需求，尽管它根本不安全。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T12:22:25.413

```
echo "abcdefghijklmnop" | gpg --armor -c --output - 
```

但是，这不会分解为 16 个字符的限制。

结果输出：

```
-----BEGIN PGP MESSAGE-----
Version: GnuPG v1.4.10 (GNU/Linux)

jA0EAwMCnM6hI0xpVVFgyScCfr6Zo2fZeuiVWteZKeptcvSBj9wxk2gRMqTERtz9
8dNUHZq2eRA=
=Jpku
-----END PGP MESSAGE----- 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T12:34:50.720

我不知道这将在哪里使用以及您的安全要求的详细信息是什么，因此我将根据您提供的信息进行回答。您需要：

*   强加密；
*   输出必须与输入的大小相同；
*   输出必须是人类可读的。

如果您放弃其中任何一项要求，这很容易。如果不是，这很难——如果不是不可能使用标准 Linux/Unix 工具的话。标准块密码将以块为单位对数据进行编码，因此它们确实具有相同的输入和输出大小——但它们将位序列转换为位序列，并且不能保证输出是“可读的”。然后，您可以使用 HEX（base16）或 base64 对输出进行编码，但这会扩展它（这就是 UtahJarhead 的意思，即“不会超出 N 个字符的限制”）。

可能的解决方案（每个都打破一个要求）是：

*   使用弱加密（ROT13 之类的替代密码——或者，如果你想要更复杂的东西，请实现[Vigenère 密码](http://en.wikipedia.org/wiki/Vigen%C3%A8re_cipher)，但你必须对其进行编码——或者相信其他人的实现）；
*   使用 AES 或其他一些好的分组密码（通过 OpenSSL，正如你提到的）加密，然后在输出上运行 base64；
*   使用 AES 或其他一些好的分组密码（通过 OpenSSL）进行加密，但不要指望任何人读取输出。

最后一点：加密方案很难设计和实施，涉及的细节太多，因此根本不建议创建临时加密方法......

***编辑***：正如对另一个答案的评论中提到的，您可以实现一次性键盘，但是您需要与文本一样长的密码，并且需要选择密码的每个字符并在字母表上均匀分布. 散列密码、编码为 ascii 并获取前 n 个字符*可能*就足够了 [1]。

无论如何，请记住明文太短*并且*可以“测试”（例如网站或加密文档的密码），对手可以进行详尽的搜索。

[1] 一些密码学家不同意您可以将哈希函数的输出视为“随机”（您将使用“随机 Oracle 模型”）。哈希的编码必须是这样的，给定输入中比特的均匀分布，作为输出的字母的均匀分布。当你把这个“pad”和消息结合起来的时候，一定是一对一的映射，所以最终输出的分布是均匀的。

# c - gluPerspective 没有看到我正在绘制的所有对象

> ID：10118300
> 
> 赞同：-1
> 
> 时间：2012-04-12T06:14:40.833
> 
> 标签：c, opengl, glut

我创建了一个 5 面的盒子，在里面放了一个球，让它在盒子里弹跳。我使用 glOrtho 创建了这个。

我想为我的课程创建一个 3d Brick Breaker 风格的游戏，所以我想把我的相机放进盒子里。我从 glOrtho 更改为 gluPerspective。我必须更改我的盒子的一些值才能正确渲染，但除非我把它放在原点上，否则球似乎已经丢失了。

这是我的值初始化：

```
void variableInits(){
    //Floor Plane
    pl1.pos.x = 0;   pl1.pos.y = -50;    pl1.pos.z = 0; 
    pl1.norm.x = 0; pl1.norm.y = 1; pl1.norm.z = 0;

    //Ceiling Plane
    pl2.pos.x = 0;   pl2.pos.y = 50;    pl2.pos.z = 0; 
    pl2.norm.x = 0; pl2.norm.y = -1; pl2.norm.z = 0;

    //Right Wall Plane
    pl3.pos.x = 50;    pl3.pos.y = 0;   pl3.pos.z = 0; 
    pl3.norm.x = -1; pl3.norm.y = 0; pl3.norm.z = 0;

    //Left Wall Plane
    pl4.pos.x = -50;  pl4.pos.y = 0;   pl4.pos.z = 0; 
    pl4.norm.x = 1; pl4.norm.y = 0; pl4.norm.z = 0;

    //Back Wall Plane
    pl5.pos.x = 0;   pl5.pos.y = 0;   pl5.pos.z = -100; 
    pl5.norm.x = 0; pl5.norm.y = 0; pl5.norm.z = 1;

    //Paddle Plane
    paddlePlane.max.x=.25; paddlePlane.max.y=.25; paddlePlane.max.z=1;
    paddlePlane.min.x=-.25; paddlePlane.min.y=-.25; paddlePlane.min.z=1;
    paddlePlane.normals.x=0; paddlePlane.normals.y=0;paddlePlane.normals.z=-0;

    //Ball Init
    b1.radius = 10;
    b1.pathDirection.x = 0; b1.pathDirection.y = 0; b1.pathDirection.z = 0;
    b1.pos.x = 0; b1.pos.y = 0, b1.pos.z = -25;

} 
```

所以我的球应该在 Z 轴的 -25 值上以 10 的半径绘制。可悲的是它没有。

也许这是我的 gluPerspective 调用的问题？

```
void reshape(int width, int height)
{
    if (height==0)
    {
        height=1;
    }

    glViewport(0,0,width,height);

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();

    gluPerspective(45.0f,(GLfloat)width/(GLfloat)height,0.0f,50.0f);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

} 
```

我会继续发布我的完整代码，但它有点长。

```
#include <stdio.h>
#include <gl/glut.h>
#include "pHeader.h"

#define EPSILON 1.0e-8
#define ZERO EPSILON

int g_mainWindow = -1;
float g_lightPos[] = {0, 0, 0, -50};
int angle = 0;
int g_moving;
int g_mouse_x;
int g_mouse_y;
int g_x_angle;
int g_y_angle;
double mX,mY,mZ;
float speed = 1;
plane pl1, pl2, pl3, pl4 ,pl5;
paddlePl paddlePlane;
float collDist = 1000;
ball b1;

void mouse(int button, int state, int x, int y)
{

    if (button == GLUT_LEFT_BUTTON && state==GLUT_DOWN)
    {
        g_moving = 1;

        g_mouse_x = x;
        g_mouse_y = y;
    }  
    else {
        g_moving = 0;

    }   
}

void mouseDrag(int x, int y)
{
    int dx, dy;

    if (g_moving){

        dx = x - g_mouse_x;
        dy = y - g_mouse_y;

        g_x_angle += dy;
        g_y_angle += dx;
        g_mouse_x = x;
        g_mouse_y = y;

    }

}

void paddle(int x, int y){
    GLint viewport[4];
    GLdouble modelview[16],projection[16];
    glGetIntegerv(GL_VIEWPORT,viewport);
    glGetDoublev(GL_MODELVIEW_MATRIX,modelview);
    glGetDoublev(GL_PROJECTION_MATRIX,projection);
    gluUnProject(x,viewport[3]-y,0,modelview,projection,viewport,&mX,&mY,&mZ);
}

/*************************************************
                Vector Math
**************************************************/

float dot(vector XYZ , vector nXYZ){
    return (XYZ.x * nXYZ.x) + (XYZ.y * nXYZ.x) + (XYZ.z * nXYZ.z);
}

vector cross(vector v1 , vector v2){
    vector result;
        result.x = v1.y * v2.z - v1.z * v2.y;

        result.y = v1.z * v2.x - v1.x * v2.z;

        result.z = v1.x * v2.y - v1.y * v2.x;

        return result;
}

vector vectScale(float scale, vector v1){
    vector result;

    result.x = v1.x * scale;
    result.y = v1.y * scale;
    result.z = v1.z * scale;

    return result;
}

vector vectorSub(vector v1, vector v2){
    vector result;

    result.x = v1.x - v2.x;
    result.y = v1.y - v2.y;
    result.z = v1.z - v2.y;

    return result;
}

vector flipVect(vector v1){
    vector result;

    result.x = -v1.x;
    result.y = -v1.y;
    result.z = -v1.z;

    return result;
}

vector vectorAdd(vector v1, vector v2){
    vector result;

    result.x = v1.x + v2.x;
    result.y = v1.y + v2.y;
    result.z = v1.z + v2.z;

    return result;
}
/****************************************************
           End Vecotor Math
****************************************************/

void planeCollision(){
    //Check Ceiling
    if(b1.pos.y + b1.radius >= 50){
        b1.pathDirection = vectorAdd((2 * dot(flipVect(b1.pathDirection), pl2.norm) , pl2.norm) , b1.pathDirection);
    }

    //Check Floor
    if(b1.pos.y-b1.radius <= -50){
        b1.pathDirection = vectorAdd((2 * dot(flipVect(b1.pathDirection), pl1.norm) , pl1.norm) , b1.pathDirection);
    }

    //Check Right Wall
    if(b1.pos.x + b1.radius >= 1){
        b1.pathDirection = vectorAdd((2 * dot(flipVect(b1.pathDirection), pl3.norm) , pl3.norm) , b1.pathDirection);
    }

    //Check Left Wall
    if(b1.pos.x - b1.radius <= -1){
        b1.pathDirection = vectorAdd((2 * dot(flipVect(b1.pathDirection), pl4.norm) , pl4.norm) , b1.pathDirection);
    }

    //Check Back Wall
    if(b1.pos.z - b1.radius <= -1){
        b1.pathDirection = vectorAdd((2 * dot(flipVect(b1.pathDirection), pl5.norm) , pl5.norm) , b1.pathDirection);
    }

    //Check paddle
    if(b1.pos.z + b1.radius >= paddlePlane.max.z && b1.pos.x >= paddlePlane.min.x && b1.pos.x <= paddlePlane.max.x && b1.pos.y >= paddlePlane.min.y && b1.pos.y <= paddlePlane.max.y){
        b1.pathDirection = vectorAdd((2 * dot(flipVect(b1.pathDirection), paddlePlane.normals) , paddlePlane.normals) , b1.pathDirection);
    }
}

void drawPlanes(){
    glBegin(GL_QUADS);
        //Floor
        glColor3f(1,0,0);
        glNormal3f( 0.0f , 1.0f, 0.0f);

        glVertex3f( 050.0f , -050.0f , -100.0f);
        glVertex3f(-050.0f , -050.0f , -100.0f);
        glVertex3f(-050.0f , -050.0f ,  000.0f);
        glVertex3f( 050.0f , -050.0f ,  000.0f);

        //Ceiling
        glColor3f(1,0,1);
        glNormal3f(0.0f,-1.0f,0.0f);

        glVertex3f( 050.0f, 050.0f, -100.0f);
        glVertex3f(-050.0f, 050.0f, -100.0f);
        glVertex3f(-050.0f, 050.0f,  000.0f);
        glVertex3f( 050.0f, 050.0f,  000.0f);

        //Right Wall
        glColor3f(0,1,0);
        glNormal3f( -1.0f , 0.0f, 0.0f);

        glVertex3f(050.0f , 050.0f ,  000.0f);
        glVertex3f(050.0f , 050.0f , -100.0f);
        glVertex3f(050.0f ,-050.0f , -100.0f);
        glVertex3f(050.0f ,-050.0f,   000.0f);

        //LeftWall

        glColor3f(0,1,1);
        glNormal3f( 1.0f , 0.0f, 0.0f);

        glVertex3f(-050.0f ,  050.0f , -100.0f);
        glVertex3f(-050.0f ,  050.0f ,  000.0f);
        glVertex3f(-050.0f , -050.0f ,  000.0f);
        glVertex3f(-050.0f , -050.0f , -100.0f);

        //Back Wall
        glColor3f(0,0,1);
        glNormal3f( 0.0f , 0.0f, 1.0f);

        glVertex3f( 050.0f ,  050.0f , -100.0f);
        glVertex3f(-050.0f ,  050.0f , -100.0f);
        glVertex3f(-050.0f , -050.0f , -100.0f);
        glVertex3f( 050.0f , -050.0f , -100.0f);

    glEnd();

}

void ballMove(){
    glPushMatrix();
        glColor3f(1,1,0);
        b1.pos.x += (b1.pathDirection.x * speed); b1.pos.y += (b1.pathDirection.y * speed); b1.pos.z += (b1.pathDirection.z * speed);
        glTranslatef(b1.pos.x,b1.pos.y,b1.pos.z);
        glutSolidSphere(b1.radius,100,100);
        printf("%.2f %.2f %.2f\n", b1.pos.x, b1.pos.y, b1.pos.z);
    glPopMatrix();
    planeCollision();
}

void drawPaddle(){
    //printf("x %f  y %f\n" , mX , mY);
    glPushMatrix();
    glPolygonMode( GL_FRONT_AND_BACK, GL_LINE);
        glBegin(GL_QUADS);
            glColor3f(1,1,1);    
            glVertex3f(mX +  25.0f , mY +  25.0f , 0.0f);
            glVertex3f(mX + -25.0f , mY +  25.0f , 0.0f);
            glVertex3f(mX + -25.0f , mY + -25.0f , 0.0f);
            glVertex3f(mX +  25.0f , mY + -25.0f , 0.0f);
        glEnd();
    glPolygonMode( GL_FRONT_AND_BACK, GL_FILL);
    glPopMatrix();

    paddlePlane.max.x=mX +  0.25f;  paddlePlane.max.y=mY +  0.25f; paddlePlane.max.z=1;
    paddlePlane.min.x=mX +  -0.25f; paddlePlane.min.y=mY + -0.25f; paddlePlane.min.z=1;

}

void display()
{   
    float red[] = {1,0,0,1};
    float blue[] = {0,0,1,1};
    glClear(GL_DEPTH_BUFFER_BIT | GL_COLOR_BUFFER_BIT);
    glEnable(GL_COLOR_MATERIAL);
    glEnable(GL_NORMALIZE);

    glColorMaterial(GL_FRONT_AND_BACK, GL_AMBIENT_AND_DIFFUSE);

    glPushMatrix();
        glRotated(g_y_angle, 0, 1, 0);
        glRotated(g_x_angle,1,0,0);
        glTranslated(0,0,-100);

        drawPaddle();
        ballMove();
        drawPlanes();

    glPopMatrix();

    angle += 1;

    glFlush();
    glutSwapBuffers();
}

void reshape(int width, int height)
{
    if (height==0)
    {
        height=1;
    }

    glViewport(0,0,width,height);

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();

    gluPerspective(45.0f,(GLfloat)width/(GLfloat)height,0.0f,50.0f);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

}

void idle()
{
    glutSetWindow(g_mainWindow);
    glutPostRedisplay();
}

void variableInits(){
    //Floor Plane
    pl1.pos.x = 0;   pl1.pos.y = -50;    pl1.pos.z = 0; 
    pl1.norm.x = 0; pl1.norm.y = 1; pl1.norm.z = 0;

    //Ceiling Plane
    pl2.pos.x = 0;   pl2.pos.y = 50;    pl2.pos.z = 0; 
    pl2.norm.x = 0; pl2.norm.y = -1; pl2.norm.z = 0;

    //Right Wall Plane
    pl3.pos.x = 50;    pl3.pos.y = 0;   pl3.pos.z = 0; 
    pl3.norm.x = -1; pl3.norm.y = 0; pl3.norm.z = 0;

    //Left Wall Plane
    pl4.pos.x = -50;  pl4.pos.y = 0;   pl4.pos.z = 0; 
    pl4.norm.x = 1; pl4.norm.y = 0; pl4.norm.z = 0;

    //Back Wall Plane
    pl5.pos.x = 0;   pl5.pos.y = 0;   pl5.pos.z = -100; 
    pl5.norm.x = 0; pl5.norm.y = 0; pl5.norm.z = 1;

    //Paddle Plane
    paddlePlane.max.x=.25; paddlePlane.max.y=.25; paddlePlane.max.z=1;
    paddlePlane.min.x=-.25; paddlePlane.min.y=-.25; paddlePlane.min.z=1;
    paddlePlane.normals.x=0; paddlePlane.normals.y=0;paddlePlane.normals.z=-0;

    //Ball Init
    b1.radius = 10;
    b1.pathDirection.x = 0; b1.pathDirection.y = 0; b1.pathDirection.z = 0;
    b1.pos.x = 0; b1.pos.y = 0, b1.pos.z = -25;

}

int main(int ac, char* av[])
{
    glutInit(&ac, av);
    glutInitDisplayMode(GLUT_RGBA | GLUT_DOUBLE);

    g_mainWindow = glutCreateWindow("Hello, glut");
    variableInits();
    glutDisplayFunc(display);
    glutReshapeFunc(reshape);
    glutIdleFunc(idle);
    glutMouseFunc(mouse);
    glutMotionFunc(mouseDrag);
    glutPassiveMotionFunc(paddle);

    glEnable(GL_LIGHTING);
    glEnable(GL_LIGHT0);
    glEnable(GL_DEPTH_TEST);
    glLightfv(GL_LIGHT0, GL_POSITION, g_lightPos);

    glShadeModel(GL_SMOOTH);                            
    glClearColor(0.0f, 0.0f, 0.0f, 0.5f);               
    glClearDepth(1.0f);                                                         
    glDepthFunc(GL_LEQUAL);                             
    glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST);

    glutMainLoop(); //no return
} 
```

标题

```
#pragma once
#ifndef pHeader_INCLUDED
#define pHeader_H_INCLUDED

typedef struct vector{
    float x,y,z;
}vector;

typedef struct ball{
    float radius;
    vector pathDirection;
    vector pos;
} ball;

typedef struct planeStruc{
    vector pos;
    vector norm;
} plane;

typedef struct paddlePlane{
    vector min;
    vector max;
    vector normals;
} paddlePl;

#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:04:14.707

`gluPerspective`近平面的值不能为 0.0，它要么产生错误（我不确定），要么导致发生一些奇怪的无穷大数学，这肯定不是你想要的。

您应该使近平面的值大于零，并且在不切断您想看到的东西的情况下尽可能大。如果你把它做得太小，你会损失很多 z 精度。

尝试从 0.1 开始。

# java - Android - ViewRootImpl$CalledFromWrongThreadException

> ID：10118301
> 
> 赞同：21
> 
> 时间：2012-04-12T06:14:40.910
> 
> 标签：java, android, imageview

我正在使用[它](http://savagelook.com/blog/android/display-images-from-the-internet-in-android)来显示来自 Internet 的图像，但它会引发如下错误：
**04-12 13:45:05.337: E/AndroidRuntime(27897): Caused by: android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread创建视图层次结构的可以触摸其视图。**

```
public class Order extends Activity {
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            new DownloadFilesTask().execute();       
        }    
        private class DownloadFilesTask extends AsyncTask<Void, Void, Void> {
            protected void onPostExecute(Void result) {
            }
             @Override
             protected Void doInBackground(Void... params) {
                 setContentView(R.layout.order);
                    ImageView imageView = (ImageView)findViewById(R.id.imgView);  
                    imageView.setImageDrawable(createDrawableFromURL("http://savagelook.com/misc/sl_drop2.png"));
                    return null;
             }          
        }     
        private Drawable createDrawableFromURL(String urlString) {
            Drawable image = null;
        try {
            URL url = new URL(urlString);
            InputStream is = (InputStream)url.getContent();
            image = Drawable.createFromStream(is, "src");
        } catch (MalformedURLException e) {
            image = null;
        } catch (IOException e) {
            image = null;
        } 
        return image;
        }

} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-24T18:15:22.253

我在尝试使用 JNI 从 c++ 更改 UI 视图时遇到了同样的问题。解决方案是使用

```
runOnUiThread(new Runnable() {
    public void run(){   
    }
}); 
```

runOnUiThread 是一个 Activity 方法，因此我必须将我的 Activity 实例设为公共静态才能调用我的公共静态方法，该方法稍后会从 JNI 调用。

希望这对其他人有帮助:)

PS：从这里我学习了如何使用 JNI [http://www.cocos2d-x.org/projects/cocos2d-x/wiki/How_to_use_jni](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/How_to_use_jni)为我以前用 cocos2dx 制作的 android 游戏

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-04-12T06:19:42.687

把这个放进去`onCreate()`

```
ImageView imageView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.order);
        imageView = (ImageView)findViewById(R.id.imgView);
        new DownloadFilesTask().execute();       
    } 
```

你的`AsyncTask`课应该是这样的，

```
 private class DownloadFilesTask extends AsyncTask<Void, Void, Void> {
             Drawable drawable;

             @Override
             protected Void doInBackground(Void... params) {
             drawable = createDrawableFromURL(
                                   "http://savagelook.com/misc/sl_drop2.png");
              return null;
             }
             protected void onPostExecute(Void result) {
                    imageView.setImageDrawable(drawable);
            }          
        } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T06:24:16.867

我认为这条线导致了错误..

```
 imageView.setImageDrawable(createDrawableFromURL("http://savagelook.com/misc/sl_drop2.png")); 
```

错误解释了为什么会这样..

```
 Only the original thread that created a view hierarchy can touch its views. 
```

导致此错误是因为您试图从其他线程更改主线程上的用户界面..这里**doInBackground**在您的情况下...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-13T04:39:03.473

如果您想在片段中完成这项工作，您应该从片段中的活动中调用 UI 线程。

```
getActivity().runOnUiThread(new Runnable() {
  public void run(){

    ... //your job 

  }
}); 
```

# git - 更改 git 存储库的 autoclrf 设置后，如何修复签出文件中的行结尾？

> ID：10118302
> 
> 赞同：3
> 
> 时间：2012-04-12T06:14:47.813
> 
> 标签：git, msysgit, line-endings

我在 Windows 上克隆了一个 git 存储库，并注意到行尾设置为 UNIX 样式（LF）。

为了解决这个问题，我将存储库的 autocrlf 值更改为 true ( `core.autocrlf=true`)。

但是，我在磁盘上的所有结帐文件仍然具有 UNIX 样式 (LF) 换行符。我该如何修复它们？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T06:15:13.307

**警告：**执行以下命令将导致您**丢失任何未提交的更改**。

要修复签出文件的行尾，您需要发出两个命令：

1.  `git rm --cached -r .`这会从 git 的索引中删除所有内容。
2.  `git reset --hard HEAD`这将重置所有本地更改。

* * *

如果您有待处理的更改，任务将变得更加困难。

您可以使用 msysgit 附带的[dos2unix](http://msysgit.googlecode.com/git/mingw/doc/dos2unix/dos2unix.html)命令来尝试修复和尝试提交的文件的行尾。

一旦您设法提交了您需要保留的任何更改，您可以使用上面提到的两个命令来重置存储库中所有文件的行尾。

# java - 如何在 Java 中实现 TreeSet？

> ID：10118303
> 
> 赞同：0
> 
> 时间：2012-04-12T06:14:51.003
> 
> 标签：java

我正在实现一个按人的年龄排序的 TreeSet，但如果人的名字相等，则不会将一个人保存在集合中。我实现了equals和hashcode，但是这个集合会保存所有人，即使他们有相同的名字。我不知道为什么。

```
public class Person implements Comparable<Person>{
    private String name;
    private int age;

    public Person(String name, int age){
        this.name = name;
        this.age = age;
    }

    @Override
    public int compareTo(Person o) {
        if(this.getAge()<o.getAge()){
            return -1;
        }
        return this.getAge() == o.getAge()?0:1;
    }

    @Override
    public boolean equals(Object object){
        return name.equals(((Person)object).getName());
    }

    @Override
    public int hashCode(){
        return name.hashCode();
    }

    public String getName() {
        return name;
    }

    public int getAge() {
        return age;
    }

    @Override
    public String toString() {
        return "Person [name=" + name + ", age=" + age + "]";
    }

    public static void main(String[] args){
        Set<Person> set = new TreeSet<Person>();
        set.add(new Person("Jack",30));
        set.add(new Person("Jack",20));
        System.out.println(set);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T06:37:21.253

你可以加

```
if(name.equals(o.getName())) {
    return 0;
} 
```

在你的`compareTo()`功能开始。这种方式 TreeSet 可以假设`a.equals(b)`等效于`a.compareTo(b) == 0`并且您仍然可以按年龄排序，因为集合中的所有名称都不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T06:19:05.120

你不能那样做。equals 和 compareTo 必须做“同样的事情”。也就是说，如果 equals 返回 true，compareTo 应该返回 0，反之亦然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T06:23:46.040

据我了解`TreeSet`，它只能包含独特的元素。为了将这些元素存储在 中`TreeSet`，实现将使用该方法*将*新元素与现有元素进行比较。`compareTo()`

您的代码目前在说 -*人在名字上是平等的，但只能在年龄上比较*

我建议您更改`equals()´,`compareTo() `and`hashCode()` 方法以考虑姓名和年龄。

要按`Person`年龄对您的对象进行排序，我会推荐一个`ArrayList`并按自定义排序`Comparator`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T06:45:43.610

根据`Set`（其中`TreeSet`继承）的定义： [http://docs.oracle.com/javase/6/docs/api/java/util/Set.html](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)：

> 集合不包含元素对 e1 和 e2 使得 e1.equals(e2)

但`TreeSet`也必须（来自：[http](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html) ://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html ）：

> 如果要正确实现 Set 接口，集合维护的顺序（无论是否提供显式比较器）必须与 equals 一致

因此，您的`compareTo()`方法应该首先检查两个`Person`是否`equals()`通过`name`，如果不是，请检查它们的`age`.

# objective-c - 使用对象之间的公共键值对将 NSArray 拆分为较小的键值编码数组

> ID：10118304
> 
> 赞同：5
> 
> 时间：2012-04-12T06:14:53.883
> 
> 标签：objective-c, arrays, sorting, split

我试图找到一个很好的解决方案，将一个字典数组拆分为一个较小的字典，这些字典由它们之间的共同值键入。
这是我的 JSON 示例，我从这里开始：

```
{
  "field": [
    {
      "id": 6,
      "name": "Andrea"
    },
    {
      "id": 67,
      "name": "Francesco"
    },
    {
      "id": 8,
      "name": "Maria"
    },
    {
      "id": 6,
      "name": "Paolo"
    },
    {
      "id": 67,
      "name": "Sara"
    }
  ]
} 
```

我想得到如下结果：

```
{
  "field": [
    {
      "6": [
        {
          "name": "Andrea",
          "id": 6
        },
        {
          "name": "Paolo",
          "id": 6
        }
      ],
      "67": [
        {
          "name": "Sara",
          "id": 67
        },
        {
          "name": "Francesco",
          "id": 67
        }
      ],
      "8": [
        {
          "name": "Maria",
          "id": 8
        }
      ]
    }
  ]
} 
```

我使用此代码进行了管理，它可以工作，但我想知道是否存在更正确和快速的东西：

```
 NSArray * array = ...;
    NSSortDescriptor *sorter1=[[NSSortDescriptor alloc]initWithKey:@"id" ascending:YES selector:@selector(compare:)];
    NSSortDescriptor *sorter2=[[NSSortDescriptor alloc]initWithKey:@"name" ascending:YES selector:@selector(caseInsensitiveCompare:)];
    NSArray *sortDescriptors=[NSArray arrayWithObjects:sorter1,sorter2,nil];
    array = [array sortedArrayUsingDescriptors:sortDescriptors];    
    //////////////////////////////SPLITTER
    NSMutableArray * subcategorySplittedArray = [[NSMutableArray alloc]initWithCapacity:30];
    NSNumber * lastID=[[array objectAtIndex:0]objectForKey:@"id"];
    NSMutableArray * shopArray = [[NSMutableArray alloc]initWithCapacity:100];
    NSMutableDictionary * catDict = nil;
    for (NSDictionary * dict in array) {
        NSNumber * catID = [dict objectForKey:@"id"];
        if ([lastID isEqualToNumber:catID]) {
            [shopArray addObject:dict];
        }
        else {

            catDict = [[NSMutableDictionary alloc]init ];
            [catDict setObject:[shopArray copy] forKey:lastID];
            [subcategorySplittedArray addObject:catDict];
            [shopArray removeAllObjects];
            [shopArray addObject:dict];
            lastID = catID;
        }
    }
    catDict = [[NSMutableDictionary alloc]init ];
    [catDict setObject:[shopArray copy] forKey:lastID];
    [subcategorySplittedArray addObject:catDict];
    ////////////////////////////////////
    return subcategorySplittedArray;

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-14T09:03:54.363

```
NSMutableDictionary* result = [NSMutableDictionary dictionary];
NSArray* ids = [array valueWithKey:@"id"];
NSSet* uniqueIDs = [NSSet setWithArray:ids];
for (NSNumber* anID in uniqueIDs)
{
    NSPredicate* pred = [NSPredicate predicateWithFormat:@"id == %@", anID];
    NSArray* dictsForID = [array filteredArrayUsingPredicate:pred];
    [result setObject:dictsForID forKey:anID];
} 
```

如果有很多 ID，您可以通过在循环外部构建一个带有变量引用的谓词，然后只需将变量替换为 in 来为每次通过循环生成特定于 id 的谓词来加快速度。

顺便说一句，在您的问题中，由于某种原因，结果“字段”仍然是一个数组。我认为没有必要。

* * *

更新为只通过一次：

```
NSMutableDictionary* result = [NSMutableDictionary dictionary];
for (NSDictionary* dict in array)
{
    NSNumber* anID = [dict objectForKey:@"id"];
    NSMutableArray* resultsForID = [result objectForKey:anID];
    if (!resultsForID)
    {
        resultsForID = [NSMutableArray array];
        [result setObject:resultsForID forKey:anID];
    }

    [resultsForID addObject:dict];
} 
```

# select - 在一次选择中选择更多字段

> ID：10118305
> 
> 赞同：0
> 
> 时间：2012-04-12T06:14:53.717
> 
> 标签：select, left-join, where-clause, abap

我设法通过更多选择和循环来进行选择。4张表（最后一张仅用于收集所有数据）

但现在我正在考虑一种方法，只需一个选择语句即可选择我需要的所有字段。这是巨大的选择:)

```
 SELECT vbak~vbeln vbak~audat
         tvakt~bezei
         vbap~posnr vbap~matnr vbap~kwmeng vbap~vrkme
         lips~vbeln lips~posnr lips~werks lips~lfimg
         vbfa~vbtyp_n
    FROM vbak JOIN vbap ON vbak~vbeln = vbap~vbeln
              JOIN tvakt ON vbak~auart = tvakt~auart
              LEFT JOIN vbfa ON vbfa~vbelv = vbak~vbeln AND vbfa~posnv = vbap~posnr
              JOIN lips ON vbfa~vbeln = lips~vbeln AND vbfa~posnn = lips~posnr
    INTO TABLE gt_salord
    WHERE tvakt~spras = 'EN' AND
          vbak~vbeln IN s_vbeln AND
          vbak~audat IN s_audat. 
```

问题是这行不通。当我尝试激活它时会抛出此错误：“无法与“VBAP~POSNR”进行比较。使用 LEFT OUTER JOIN 最多可以将一个表与另一个表连接“如果我不使用 LEFT JOIN 而只加入它工作，但我没有得到我想要的所有东西。我需要得到所有的销售订单，即使他们没有分配交货订单。有没有办法做到这一点，还是我真的必须拆分我的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:30:03.710

I have noticed in SAP that it's more efficient to simplify select statements and proceed with LOOP and SELECT SINGLE for table that do not participate in data selection.

In your case data from table VBFA could be fetch after data selection (it is not restricting the amount of data fetched from the DB).

Of course it depends on indexes, application server buffering... but, even though it might be counter-intuitive for SQL experts, keeping select statements not too complex in SAP is best.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:38:28.330

您可以尝试以下选择：

```
SELECT vbak~vbeln vbak~audat
       tvakt~bezei
       vbap~posnr vbap~matnr vbap~kwmeng vbap~vrkme
       lips~vbeln lips~posnr lips~werks lips~lfimg
       vbfa~vbtyp_n
  FROM vbak JOIN vbap ON vbak~vbeln = vbap~vbeln
            JOIN tvakt ON vbak~auart = tvakt~auart
            LEFT JOIN vbfa ON vbfa~vbelv = vbap~vbeln AND vbfa~posnv = vbap~posnr
            JOIN lips ON vbfa~vbeln = lips~vbeln AND vbfa~posnn = lips~posnr
  INTO TABLE gt_salord
  WHERE tvakt~spras = 'EN' AND
        vbak~vbeln IN s_vbeln AND
        vbak~audat IN s_audat. 
```

我无法测试结果，但语法检查说：好的。

只有一个微小的区别：

```
 x---- difference
                                                  v
                LEFT JOIN vbfa ON vbfa~vbelv = vbap~vbeln AND vbfa~posnv = vbap~posnr 
                LEFT JOIN vbfa ON vbfa~vbelv = vbak~vbeln AND vbfa~posnv = vbap~posnr 
```

你`vbfa~vbelv`跟比`vbak~vbeln`，我跟`vbap~vbeln`。两者具有相同的值，但在 -`on`子句中您再次使用`vbap`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T06:28:37.083

我不知道 SAP Abap 。但从 SQL 的角度来看，如果 SAP 支持派生查询，则可以使用它。

这是一些方法：

```
select * from
(
select * from
table1 inner join table2 on table1.key=table2.key
inner join table3 on table1.key=table3.key
) a left outer join table4 b 
on a.key=b.key 
```

将此作为问题发布被标记为 SQL。希望它有效

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-22T19:52:12.097

尝试改变left join的on子句中表字段的顺序。把 vbap~vbeln = vbfa~vbelv

# node.js - 刷新页面后套接字不起作用

> ID：10118307
> 
> 赞同：2
> 
> 时间：2012-04-12T06:15:00.613
> 
> 标签：node.js, socket.io, express

我构建了使用 socket.io 和 expressjs 的小型应用程序

服务器端

```
var express = require('express'),
sio = require('socket.io');
var app = express.createServer();

app.configure('development', function(){
app.use(express.bodyParser());
app.use(express.cookieParser());
    app.use(express.static(__dirname + '/'));
    app.set('views', __dirname + '/views');
    app.use(express.errorHandler({dumpExceptions: true, showStack: true}));
    app.use(app.router); 
});
app.listen(4000);
var io = sio.listen(app);

app.get('/', function (req, res) {
     res.redirect('index.html');
});

io.sockets.on('connection', function (socket) {

       app.post('/mysegment',function(req,res){
            var userData = req.body;
            socket.emit('sendUser', userData);
            res.send("yes I got that segment");
       });
       socket.on('getUser',function(msg){
            console.log("Yes Socket work Properly "+msg);
       });
}); 
```

和 index.html

```
var socket = io.connect();
socket.on('connect', function () {
    console.log("client connection done.....");
});
socket.on('sendUser', function (data) {
     alert("On send user");
     socket.emit('getUser',"Hello");
}); 
```

这个演示工作完美但是当我刷新页面并将发布请求发送到“/mysegment”时，我的时间套接字无法正常工作。我没有在我的控制台上收到消息“是的套接字工作正常（和我的消息）”但我得到了回应“是的，我得到了那个段”任何建议请...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T15:23:27.620

```
io.sockets.on('connection', function (socket) {

   app.post('/mysegment', ... 
```

这里发生的情况是，每次任何客户端连接到 websockets 时，都会将*一个新的处理程序*添加到所有 /mysgment POST 请求中。然后，当**任何人**向 /mysegment 发送 POST 时，所有连接的客户端都会得到`userData`……这可能不是您想要的。

为了简单起见，坚持使用套接字做一件事，而使用普通的 HTTP 做其他事情。

否则，您将不得不[共享会话](https://stackoverflow.com/questions/4641053/socket-io-and-session)和/或找到相应的套接字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-05T21:13:11.667

您可以像这样在快速路由中访问套接字对象（在 scoket.io v4 中）：

```
var socket = io.sockets.on('connection', function (socket) {
  socket.on('getUser',function(msg){
    console.log("Yes Socket work Properly "+msg);
  });
});

app.post('/mysegment',function(req,res){
  var userData = req.body;
  socket.emit('sendUser', userData);
  res.send("yes I got that segment");
}); 
```

# windows-phone-7 - 如何在wp7 xna中将纹理切割成两个相等的部分？

> ID：10118317
> 
> 赞同：1
> 
> 时间：2012-04-12T06:15:37.820
> 
> 标签：windows-phone-7, c#-4.0, silverlight-4.0

大家好，我正在尝试制作一个类似于水果忍者的应用程序，我需要将对象切成两部分。所以我想知道是否存在任何基本的 API 来做同样的事情。

# c# - 如何检查变量是数组还是对象？

> ID：10118324
> 
> 赞同：10
> 
> 时间：2012-04-12T06:16:11.363
> 
> 标签：c#, json, windows-phone-7, c#-4.0

为了反序列化一个 json 对象，我必须为子类定义一个包含一个对象或对象数组的父类。如果检索到一个对象，它必须是一个对象，如果从 json 检索到一个数组，它必须是一个对象数组。

JSON数组对象

```
{"y":{"x":[{"data":28}, {"data":56}, {"data":89}]}} 
```

JSON 对象

```
{"y":{"x":{"data":28}}} 
```

y 一次接收 x，另一次接收 x[]。没有这样的条件来确定 y 是否会接收数组或对象。

因此，为了确定我是否收到了一个数组，我正在检查 IsArray() 条件。

我试过

```
class Y
{
   public X x { get { return System.IsArray() ? new X() : new x[] }; set; }
}

class X
{
   public int data { get; set; }
} 
```

1.  它不工作。
2.  System.IsArray() 未被识别？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-12T06:38:07.633

首先，数组*是*一个对象。这是一件好事，因为它允许这些功能工作（都假设`using System;`）：

```
bool IsArray(object o) { return o is Array; }
bool IsArray(object o) { return o.GetType().IsArray; } 
```

其次，如果您想要一个类型可以是`X`或`X[]`的属性，则该属性的类型需要是`object`：

```
class Y             
{
   private object _x;
   public object x {
       get { return _x; }
       set
       {
           if (value.GetType != typeof(X) && value.GetType != typeof(X[]))
               throw new ArgumentException("value");
           _x = value;
       }
   }
} 
```

这有点忽略了静态类型的优势，因为您`object`在运行时使用和检查类型。将属性定义为数组确实要简单得多，即使对于只有一个值的情况也是如此。在这种情况下，它将是一个长度为 1 的数组。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-31T20:29:27.820

我一直在使用[Json.NET](http://james.newtonking.com/json) Nuget 包，使用起来非常容易：

```
 string jsonStr = "{'y':{'x':[{'data':28}, {'data':56}, {'data':89}]}}";
  dynamic jobject = JsonConvert.DeserializeObject(jsonStr);

  bool isArray  = jobject.y.x.Type == JTokenType.Array;
  bool isObject = jobject.y.x.Type == JTokenType.Object; 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T06:29:23.353

如果您明确声明它是 X 类型，则 Y 类中 X 类型的属性 x 不能是 X 的数组。将其声明为对象将是解决此问题的一种方法。

如果你想检查它是一个数组，我会使用一个支持字段（比如_x），然后你使用该属性的地方做一个检查（`typeof(_x) == X[]`）

不过，这可能会变得混乱，我最好的建议是将属性 x 的类型设置为 X[] 并在集合中确定该值是否是一个数组（如果是这样，只需 set `_x = value`），或者如果不是将值添加到 X 的空数组

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-12T11:48:27.730

你可以试试这个...

```
if (obj.GetType().IsArray)
{
  ...
} 
```

另一种方法是，

```
if (obj is Array) {
   ...
} 
```

# java - Java中日期的加法和减法

> ID：10118327
> 
> 赞同：9
> 
> 时间：2012-04-12T06:16:14.287
> 
> 标签：java, datetime, date

我们如何在java中添加或减去日期？例如`java.sql.Date`，格式如下：*yyyy-MM-dd*，我如何从中添加 5 个月？我在一些他们正在使用的教程中看到过`Calendar`，我们可以在上面设置日期吗？请帮忙。

示例：`2012-01-01`添加 5 个月后将变为`2012-06-01`.

*PS：我是一名 .Net 程序员，正在慢慢学习 Java 环境。*

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-12T06:19:19.923

首先，您必须将`String`日期转换为`java.util.Date`，而不是`java.util.Calendar`用于操作日期。也可以用millis做数学，但我不推荐这样做。

```
public static void main( final String[] args ) throws ParseException {
    final String sdate = "2012-01-01";
    final SimpleDateFormat df = new SimpleDateFormat( "yyyy-MM-dd" );
    final Date date = df.parse( sdate ); // conversion from String
    final java.util.Calendar cal = GregorianCalendar.getInstance();
    cal.setTime( date );
    cal.add( GregorianCalendar.MONTH, 5 ); // date manipulation
    System.out.println( "result: " + df.format( cal.getTime() ) ); // conversion to String
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T06:21:25.900

清除用于日期数学的内置 Date 类。看看 JodaTime，它对这类事情有更好的 API。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T06:18:14.183

采用[`Calendar`](http://docs.oracle.com/javase/1.6/docs/api/java/util/Calendar.html)

```
Calendar cal = Calendar.getInstance();
cal.add(Calendar.MONTH, 5); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T06:23:51.843

要将日期转换为日历，请使用：

```
Date date = your_date_here;

Calendar cal = Calendar.getInstance();
cal.setTime(date); 
```

然后使用日历算术函数来加/减：

```
cal.add(Calendar.MONTH, 5); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T06:21:40.610

或者，将日期转换为以英里为单位的时间。做数学，并将毫秒转换回日期。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T06:24:47.223

`CalenderUtils`从谷歌的包 GWT 中使用。

```
import com.google.gwt.user.datepicker.client.CalendarUtil; 
```

...

```
//now
Date d = new Date();
// Now + 2 months
CalendarUtil.addMonthsToDate(d, 2); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-05T13:57:35.357

另一种选择是来自第 3 方 Apache Commons 库集合的[DateUtils类。](http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/time/DateUtils.html)例子：

```
Date d = DateUtils.parseDate("2012-01-01", "yyyy-MM-dd");
Date d2 = DateUtils.addMonths(d, 5);
System.out.println("Old date + 5 months = " + d2); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-09-24T19:05:09.827

进行日期添加的完整程序位于[http://dwbitechguru.blogspot.ca/2014/09/jave-program-to-add-or-substract-dates.html](http://dwbitechguru.blogspot.ca/2014/09/jave-program-to-add-or-substract-dates.html)

# psexec - 将非 exe 文件复制到远程计算机

> ID：10118332
> 
> 赞同：6
> 
> 时间：2012-04-12T06:16:41.920
> 
> 标签：psexec, remote-server

我使用 PsExec 在远程机器上复制和运行一个 exe 文件。我还想将 xml 文件复制到远程机器。我可以这样做

```
PsExec.exe -d -c \\someserver  c:\somefile.xml 
```

上面的命令抛出错误说系统找不到指定的文件，但将 xml 文件添加到远程服务器。
你知道将文件复制到远程服务器的更好方法吗？
有没有可用的 PsTool？
还是 PsExec 中的一个选项？

编辑：（答案）我发现使用 Powershell 我们可以将文件复制到远程机器并且它有效。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T06:24:16.303

正如您可以从 psexec 帮助中看到的那样

> -c：将指定程序复制到远程系统执行。如果省略此选项，则应用程序必须位于远程系统的系统路径中。

因此，您的 xml 文件被复制到远程 sys/USER:[domainname]username]tem 上并执行，这会给您带来错误。
如果您的 xml 是您必须在远程计算机上运行的应用程序的一部分，那么一种解决方案是将应用程序与所有必要的文件一起压缩到一个自解压 EXE 中，该 EXE 在解压时运行主命令。

如果您只需要复制文件，为什么不使用映射远程文件夹然后复制文件的简单脚本呢？就像是：

```
NET USE \\computername\sharename password /USER:[domainname\]username
xcopy .....
NET USE \\computername\sharename /DELETE 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T06:27:56.987

PsExec 并非旨在跨机器复制文件。它只能复制将要远程运行的程序。

如果您有权访问远程计算机，则可以通过`copy c:\somefile.xml \\\\remote-machine\Admin$`在运行 PsExec 之前运行来完成复制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-12T09:03:05.890

您可以将此模式与 psexec 一起使用来复制任何扩展名...

> psexec -d -i 2 \PC 名称 -u 域\用户名 -p 密码 cmd /c 复制 \server\location\filename c:\xx\xx\xx

PS：如果您不确定 -d 和 i 的作用，请参阅 PSEXEC 开关。但是，“2”是远程桌面用户的会话 ID，每次创建新的远程桌面会话时都可能更改。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-10-21T05:16:11.183

这帮助我将我的 exe 文件复制到 c:\windows 目录中（在同一域内一对一复制）：

```
PsExec.exe -d -c \\remoteserver -u administrator -p password c:\executable.exe 
```

# c++ - wxWidgets 中的命令行参数

> ID：10118342
> 
> 赞同：6
> 
> 时间：2012-04-12T06:17:33.407
> 
> 标签：c++, command-line, wxwidgets

有没有办法可以读取传递给 C++ wxWidgets 应用程序的命令行参数？如果是这样，您能否提供一个如何执行此操作的示例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T20:15:41.587

在纯 C++ 中，有`argc`和`argv`。当您构建 wxWidgets 应用程序时，您可以使用`wxApp::argc`、`wxApp::argv[]`或`wxAppConsole::argc`、访问它们`wxAppConsole::argv[]`。请注意，`wxApp`它派生自`wxAppConsole`，因此取决于您是否拥有控制台应用程序或 GUI 应用程序。见[wxAppConsole](http://docs.wxwidgets.org/trunk/classwx_app_console.html)

```
IMPLEMENT_APP(MyApp)

bool MyApp::OnInit() {
// Access command line arguments with wxApp::argc, wxApp::argv[0], etc.
// ...
} 
```

您可能还对[wxCmdLineParser](http://docs.wxwidgets.org/trunk/classwx_cmd_line_parser.html)感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T06:29:31.870

看看这些例子（[1](http://wiki.wxwidgets.org/Command-Line_Arguments)，[2](https://web.archive.org/web/20090517040330/http://id.motd.org/pivot/entry.php?id=15)）或：

```
int main(int argc, char **argv) 
{ 
    wxApp::CheckBuildOptions(WX_BUILD_OPTIONS_SIGNATURE, "program"); 

    wxInitializer initializer; 
    if (!initializer) 
    { 
        fprintf(stderr, "Failed to initialize the wxWidgets library, aborting."); 
        return -1; 
    } 

    static const wxCmdLineEntryDesc cmdLineDesc[] = 
    { 
        { wxCMD_LINE_SWITCH, "h", "help", "show this help message", 
            wxCMD_LINE_VAL_NONE, wxCMD_LINE_OPTION_HELP }, 
        // ... your other command line options here... 

        { wxCMD_LINE_NONE } 
    }; 

    wxCmdLineParser parser(cmdLineDesc, argc, wxArgv); 
    switch ( parser.Parse() ) 
    { 
        case -1: 
            wxLogMessage(_T("Help was given, terminating.")); 
            break; 

        case 0: 
            // everything is ok; proceed 
            break; 

        default: 
            wxLogMessage(_T("Syntax error detected, aborting.")); 
            break; 
    } 
    return 0; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T07:49:42.627

您可以从提供[wxAppConsole::argc](http://docs.wxwidgets.org/trunk/classwx_app_console.html#a18d2288273cee260ff047831a5e8bfc5) 和[wxAppConsole::argv](http://docs.wxwidgets.org/trunk/classwx_app_console.html#aec036ffd2b28e72ca36cb0f7ef6a3b37)`wxApp`的继承中访问命令行变量。`wxAppConsole`

# ruby-on-rails - 格式化 Ruby on Rails 文本字段

> ID：10118343
> 
> 赞同：0
> 
> 时间：2012-04-12T06:17:34.903
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我有一个模块@post，用户可以在其中编写自己的帖子。问题是这些帖子没有段落，用户无法开始在新行中写入。也许有允许这样做的宝石？我正在使用 Ruby on Rails 3.2.1。

例如这段文字：

**此文字为粗体**，

*此文字为斜体*

这是列表：

1.  第 1 项；
2.  第 2 项；

但在我的主页中，这将如下所示：

此文字为粗体 此文字为斜体 这是列表： 1\. 项目 1；2.第2项；

我希望你明白我的意思...

**@post 节目：**

```
<div id="content">
<div class="post">
    <h1 class="title"><%=@post.title%></h1>
    <p class="byline"style="text-align: right; font-weight: bold;">Raksts izveidots: <%= @post.created_at.utc.strftime("%d.%m.%Y") %></p>
    <div class="entry">
        <p><%= @post.content  %></p>
        <%= image_tag @post.bildes.url(:medium) %>
        <%= image_tag @post.bildes.url(:thumb) %>
    </div>
</div> 
```

**@post 表格：**

```
<div id="content">
<%= form_for(@post) do |f| %>
  <% if @post.errors.any? %>
<div id="error_explanation">
  <h2><%= pluralize(@post.errors.count, "error") %> prohibited this post from being saved:</h2>
  <ul>
  <% @post.errors.full_messages.each do |msg| %>
    <li><%= msg %></li>
  <% end %>
  </ul>
</div>
  <% end %>
<% create_url = {:url=>{:action=>"create"}} if @post.new_record? %>
    <% form_for @post, :html => { :multipart => true } do |t| %>
      <b><%= t.label :title, 'Virsraksts:' %></b><br />
      <%= t.text_field :title %><br /><br />
      <b><%= t.label :content, 'Teksts:' %></b><br />
      <%= t.text_area :content %><br /><br />
      <b><%= t.label :bildes, 'Pievienot bildes:' %></b><br />
      <%= f.file_field :bildes %><br /><br />
      <%= t.submit %>
 <% end %>
      <%end%> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T06:30:13.950

也许我没有让你正确。但我认为您需要在页面上使用富文本编辑器。

那里有很多富文本编辑器，我建议您查看[Tinymce](http://www.tinymce.com/)，它也被 wordpress 使用。

这样用户可以输入段落并控制其他格式，这将导致html格式并保留所有样式。

我正在使用`gem 'tinymce-rails'`将 Tinymce 与 Rails 集成。它只是将tinymce导入资产管道，不提供任何帮助，但我认为它非常好，与资产管道配合得很好，这对我来说已经足够了，我不喜欢为此做太多的包装，这是链接：[tinymce -导轨](https://github.com/spohlenz/tinymce-rails)。您还可以找到许多其他提供与 Rails 更紧密集成的 gem。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T06:44:35.530

当输出为 HTML 时， Rails[`simple_format`](http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-simple_format)会为您提供正确格式化的段落和换行符，但对于更高级的格式化，您需要其他内容。

[如果您可以要求您的用户知道语法，那么Markdown](http://daringfireball.net/projects/markdown/)非常棒（Markdown 是 StackOverflow 使用的）。Ruby有几个[Markdown 格式化程序](https://stackoverflow.com/a/373446/211563)。

# jsp - 解决 JSP 会话注销

> ID：10118346
> 
> 赞同：0
> 
> 时间：2012-04-12T06:17:40.207
> 
> 标签：jsp, jsp-tags

我在 logout.jsp 中遇到了这样的错误

```
 org.apache.jasper.JasperException: Unable to compile class for JSP: 
  An error occurred at line: 2 in the jsp file: /logout.jsp
 session cannot be resolved
  1: <%@ page language="java"  session="false" %>
  2: <%session.invalidate();%>
  3: <%
  4: final String queryString = request.getQueryString();
  5: final String url = "http://www."testxxxxx".com/login.php?login_process=1&cas=1"; 
```

为什么它显示会话无法解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:20:25.057

也许是因为第 1 行说 session=false

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:19:20.803

从[文档](http://java.sun.com/products/jsp/tags/11/syntaxref11.fm7.html)

> 会话=“真|假”

默认值是true。

这是为了指定客户端是否必须加入 HTTP 会话才能使用 JSP 页面。如果值为 true，则会话对象引用当前或新会话。如果值为 false，则不能在 JSP 文件中使用 session 对象或具有 scope=session 的元素。

# java - Apache Commons 电子邮件编码附加 base64

> ID：10118348
> 
> 赞同：4
> 
> 时间：2012-04-12T06:17:46.183
> 
> 标签：java, base64, apache-commons-email

我正在尝试通过发送一个base64编码的文件`apache.commons.mail`，但我无法缝合以获取`Content-Transfer-Encoding: base64`它应该去的标题。

```
// Create the email
MultiPartEmail email = new MultiPartEmail();
email.setSmtpPort(587);
email.setDebug(false);
email.setHostName("smtp.gmail.com");
email.setAuthentication("from@gmail.com", "password");
email.setTLS(true);

email.addTo("to@example.com");
email.setFrom("from@example.com");
email.setSubject("subject");

email.attach(new ByteArrayDataSource(
     Base64.encodeBase64(attachFull.getBytes()), "text/plain"), 
     "samplefile.txt", 
     "sample file desc", 
     EmailAttachment.ATTACHMENT
); 
```

这就是到达接收者的东西。

```
------=_Part_0_614021571.1334210788719
Content-Type: text/plain; charset=Cp1252; name=texto.txt
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment; filename=samplefile.txt
Content-Description: sample file desc 
```

**如何指定文件是 Base64 编码的？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T07:18:43.657

最简单的解决方案是执行以下操作：

```
// create a multipart leg for a specific attach
MimeMultipart part = new MimeMultipart();
BodyPart messageBodyPart = new MimeBodyPart();
messageBodyPart.setDataHandler (new DataHandler(new ByteArrayDataSource(attachFull.getBytes(), "text/plain")));
messageBodyPart.removeHeader("Content-Transfer-Encoding");
messageBodyPart.addHeader("Content-Transfer-Encoding", "base64");
part.addBodyPart(messageBodyPart);
email.addPart(part); 
```

javax 会自动将您的文件转换为 base64。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T06:51:48.533

您可以尝试覆盖该[`attach`](http://commons.apache.org/email/api-release/org/apache/commons/mail/MultiPartEmail.html#attach%28%29)方法并`Content-Transfer-Encoding`在其中设置标题。默认情况下，框架不会为您设置它或干净地公开 MIME bodyPart。

# extjs - 如何从 Ext 窗口文本字段中获取用户输入值？

> ID：10118350
> 
> 赞同：6
> 
> 时间：2012-04-12T06:18:01.940
> 
> 标签：extjs

我有一个带有用 Extjs 设计的按钮的网页。当用户单击其中一个按钮时，会出现一个带有文本字段和下一步按钮的窗口。单击下一个按钮将加载另一个带有字段集的窗口，隐藏第一个。第二种形式的字段集数量将根据用户在第一个窗口中的输入进行调整。我正在尝试为此使用 for 循环。我使用的代码如下：

```
var win1, win 2, j;

var win1items = new Ext.form.FormPanel({
    //snip
    items: [{
        xtype: 'fieldset',
        defaultType: 'textfield',
        items: [{
            fieldLabel: 'Number',
            allowBlank: false,
            name: 'Number',
            width: 110,
            cls:"txtfield"
        }]
    }],
    buttons: [{
        text: 'Next',
        handler: function(){
            if(!win2){
                winc2 = new Ext.Window({
                    //snip
                    items: [win2items]
                });
            }

            win2.show(this);
            win1.hide();
        }
    }]
});

j = Ext.getCmp('win1').getForm().findField("Number").getValue();
var fldComs = [];

for (i=0; i<=j; i++){
    fldComs[i] =  new  Ext.form.FieldSet({
        //snip
        items: [{
        //snip
        }]
    });
}

win2items = new Ext.form.FormPanel({
    //snip
    items: [fldComs]
});

Ext.onReady(function(){
    new Ext.Toolbar({
        renderTo: document.body,
        items: [{
            xtype: 'tbbutton',
            text: 'Start Here',
            cls: 'menu-icon',
            handler: function(){
                if(!win1){
                    win1 = new Ext.Window({
                        //snip
                        items: [win1items]
                    });
                }
                win1.show(this);
            }
        }]
    });
}); 
```

我得到的错误是

> 未捕获的类型错误：无法调用未定义的方法“getForm”。

但是，如果我在 for 循环中使用固定值，例如 5，我将获得所需的输出。我正在使用分机 3.2.1

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-19T20:54:40.400

您的代码充满了使其无法正常工作的原因-我并不是要刻薄，但是从故障排除的角度来看，很难通过如此多的猜测工作来判断**真正的问题**出在哪里-我所看到的事情：

1) 您对 Ext.getCmp('win1') 的调用失败，因为没有任何 id 为 'win1' - 尝试：

```
 var win1items = new Ext.form.FormPanel({
        id: 'win1'
        ... 
```

2) 如果你的意思是'win1' 的 id 出现在你在处理程序中创建的窗口上，你需要在那里指定，但是，正如 MMT 所指出的，Ext.Window 没有 getForm() 方法（所以我怀疑这是你想要做的）。

3）如果您想要该文本字段的值，只需简单的方法并为该字段提供一个 ID：

```
[{
    label: 'Number',
    xtype: 'textfield',
    id: 'MyNumberField'
}]
... 
var j = Ext.getCmp('MyNumberField').getValue(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T20:35:06.743

getCmp() 接受 id 作为参数而不是变量。为解决问题，将 id 提供给表单面板，并将该 id 包含在 getCmp() 内的引号中。

它可能会奏效，但无论如何，正如 phat skat 正确指出的那样，您的代码非常难以阅读

# java - 带有 servlet 的 localhost https java 应用程序

> ID：10118355
> 
> 赞同：1
> 
> 时间：2012-04-12T06:18:19.647
> 
> 标签：java, servlets, https

我必须设计一个 localhost 应用程序，其他项目中的一个代码返回一个 url，如下所示..

[http://localhost:8080/MyProject?id=](http://localhost:8080/MyProject?id=) "somevalue"

现在我实现https的任务（另一个项目生成的url是硬编码的。所以我们也可以拥有https url....因为另一个项目也是我的项目之一，但是在任务结束之后将返回带有 id 作为参数的 url)

所以让我们有类型的 url

[https://localhost:8443/MyProject?id=](https://localhost:8443/MyProject?id=) "somevalue"

我的设计内容如下。

```
1\. i have to use https 
2.i have to use RSA bit length of 512 bits
3.i have to be able to read the value id with request.getParameter()
4.How https coding will be different from http in servlets..
can we use the same coding of http in https.. 
```

我不需要复杂的实现。我需要的只是它必须出现 https 并且在 servlet 实现中我想使用 http 编码......

可能吗..

谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T06:21:47.693

如果您从非 SSL 迁移到 SSL，您的代码不应受到影响，假设您使用的是 tomcat，请阅读文档以配置[SSL](http://tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html)

# objective-c - NSRegularExpression 不起作用

> ID：10118369
> 
> 赞同：2
> 
> 时间：2012-04-12T06:19:16.743
> 
> 标签：objective-c, regex, cocoa, nsregularexpression

我正在尝试从 facebook url 中解析照片 id，例如，

[https://www.facebook.com/photo.php?fbid=267217740038587&set=a.207272412699787.48907.100002510899673&type=1](https://www.facebook.com/photo.php?fbid=267217740038587&set=a.207272412699787.48907.100002510899673&type=1)

我的正则表达式是`@"https?:\/\/(www\.)?facebook\.com\/photo\.php\?fbid=([0-9]+)"`

我用一个外部工具测试了这个`RegExhibit`- [http://homepage.mac.com/roger_jolly/software/](http://homepage.mac.com/roger_jolly/software/)它似乎工作正常。

但是它在 XCode 中不起作用。我尝试调试，问题似乎是`\?`在 `photo\.php`. 当我将其更改为

`@"https?:\/\/(www\.)?facebook\.com\/photo\.php.fbid=([0-9]+)"`（注意我`\?`改为`.`）

它完美地工作。

虽然这是可以接受的，但我想知道为什么`\?`在这里不起作用。有专家吗？:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T07:11:02.643

我不确定，但也许反斜杠`\`在解析时正在转义 NSString 本身中的相关后续字符。例如，

```
NSLog(@"https?:\/\/(www\.)?facebook\.com\/photo\.php\?fbid=([0-9]+)"); 
```

实际上打印`https?://(www.)?facebook.com/photo.php?fbid=([0-9]+)`which if then 视为它自己的正则表达式将按照您描述它的方式执行（如果您将 a 替换为`?`a ，则会半正确地执行`.`）

所以，我猜它可以正常工作，你需要`@"https?:\\/\\/(www\\.)?facebook\\.com\\/photo\\.php\\?fbid=([0-9]+)"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:32:39.240

你可以试试这个：

```
NSString *query = @"parameter=2&secondparameter=3"; // replace this with [url query];
NSArray *components = [query componentsSeparatedByString:@"&"];
NSMutableDictionary *parameters = [[NSMutableDictionary alloc] init];
for (NSString *component in components) {
    [parameters setObject:[[component componentsSeparatedByString:@"="] objectAtIndex:0] forKey:[[component componentsSeparatedByString:@"="] objectAtIndex:1]];
} 
```

# neo4j - 使用neography按属性值过滤

> ID：10118373
> 
> 赞同：1
> 
> 时间：2012-04-12T06:19:28.270
> 
> 标签：neo4j, neography

我正在使用一个工作中的neography 示例的简单变体进行测试，虽然过滤器似乎应该可以工作，但我没有任何运气。我可以过滤 position.length 并且它工作正常，但我现在正在尝试基于节点属性进行过滤。

给定这些节点：

```
node1 = Neography::Node.create("name" => "node1")
node2 = Neography::Node.create("name" => "node2")
person1 = Neography::Node.create("name" => "Person1", "role" => "author")
person2 = Neography::Node.create("name" => "Person2", "role" => "author")
person3 = Neography::Node.create("name" => "Person3", "role" => "editor")
Neography::Relationship.create(:user, node1, person1)
Neography::Relationship.create(:user, node2, person2)
Neography::Relationship.create(:user, node1, person3)
Neography::Relationship.create(:user, node2, person3) 
```

将“the_node”设置为 person1，我试图让它返回 person3：

```
the_node.both(:user).
    order("breadth first").
    uniqueness("node global").
    #filter("position.length() == 2;").
    filter("currentNode.getProperty('role') == 'editor';").
    depth(2).
    map{|n| n.name}.join(', ') 
```

注释掉的过滤器按预期返回 person3（第二级关系），但基于“角色”属性的过滤器似乎过滤了所有内容，因此结果为空。

任何建议都会很棒；我绝对是 neo4j 和neography 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T21:17:32.663

而不是遍历端点，我会研究 cypher，请参阅[http://docs.neo4j.org/chunked/snapshot/cypher-query-lang.html](http://docs.neo4j.org/chunked/snapshot/cypher-query-lang.html)，它由 Neography 支持

您的查询将类似于

```
start user = node(1) 
match user-[:user]->person 
where person.role = "editor" 
return person.name 
```

高温高压

# objective-c - 如何将 32 位 PNG 转换为 RGB565？

> ID：10118374
> 
> 赞同：2
> 
> 时间：2012-04-12T06:19:33.400
> 
> 标签：objective-c, macos, cocos2d-iphone, compression, png

我怎样才能做到这一点？程序化解决方案（Objective-c）很棒，但即使是非程序化解决方案也很好。

我有 pixelmator -> 但这并没有给你选择。我似乎也无法使用预览来做到这一点。

我试过谷歌搜索，但到目前为止还没有找到解决方案。我能够使用的唯一工具是 TexturePacker，但它会创建一个精灵表。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T14:58:51.340

您可以使用[libpng](http://www.libpng.org/pub/png/libpng.html)将 PNG 图像转换为三字节 (8:8:8) RGB。然后可以下采样到 RGB565 的 5:6:5 16 位颜色值。如果`r`、`g`和`b`是各自的 8 位颜色（以无符号字符类型存储），则 16 位 RGB565 值为：

```
((r >> 3) << 11) | ((g >> 2) << 5) | (b >> 3) 
```

您可以通过舍入而不是切碎来改进这一点，注意不要溢出值。当它们在原始 8 位值中都相等时，您还可以强制绿色值等于蓝色和红色值。否则，可能会使原本为灰色的颜色在转换后无意中呈现颜色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T04:18:13.350

使用 Quartz 创建颜色为 RGB565 的位图上下文，在此上下文上绘制您的 PNG，将此位图上下文保存到文件中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T17:20:33.273

PNG 不支持 RGB565 打包。您始终可以对图像应用后处理（以编程方式或使用*ImageMagick*或任何图像编辑器），这相当于丢弃每个通道中的较低有效位。保存为 PNG 时，您仍将为每个通道节省 8 位（除非您使用调色板），但即便如此，由于 PNG 压缩，您仍会获得明显的尺寸减小。

一个简单的例子：原始：

![在此处输入图像描述](../Images/e12a57cb0e21fd8033a29f24cb310b36.png)

在使用 XnView 应用具有 32 个级别（相当于 RGB555）的简单分色后

![在此处输入图像描述](../Images/bef66ee642b01c0bf5e8eddcf3bec0a0.png)

大小从 89KB 到 47KB，质量损失很小。在具有梯度的合成图像的情况下，质量损失可能更加明显（条带）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-14T08:38:17.963

我从纹理打包器的创建者那里收到了这个答案：

```
you can do it from command line - see 
```

[http://www.texturepacker.com/uncategorized/batch-converting-images-to-pvr-or-pvr-ccz/](http://www.texturepacker.com/uncategorized/batch-converting-images-to-pvr-or-pvr-ccz/)

```
Just adjust the opt and set output to .png instead of pvr.ccz
Make sure that you do not overwrite your source images. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T15:47:18.310

根据总是正确的维基百科，唯一的 16 位 PNG 是灰度 PNG。 [http://en.wikipedia.org/wiki/Portable_Network_Graphics](http://en.wikipedia.org/wiki/Portable_Network_Graphics)

如果您只是像往常一样将 32 位（alpha）或 24 位（无 alpha）PNG 添加到您的项目中，然后在 Cocos2D 中设置纹理格式，一切都应该没问题。代码是：

```
[CCTexture2D setDefaultAlphaPixelFormat:kCCTexture2DPixelFormat_RGB565]; 
```

# android - 闹钟代码：mContext变量无法解析

> ID：10118376
> 
> 赞同：1
> 
> 时间：2012-04-12T06:19:38.707
> 
> 标签：android

我正在尝试在我的文件中复制粘贴后构建闹钟源代码编译时，我收到错误，mContext 无法解析。这是这段代码的链接：http: [//www.netmite.com/android/mydroid/2.0/packages/apps/AlarmClock/src/com/android/alarmclock/DigitalClock.java](http://www.netmite.com/android/mydroid/2.0/packages/apps/AlarmClock/src/com/android/alarmclock/DigitalClock.java)

我已经复制粘贴了下面使用 mContext 的部分代码

```
protected void onAttachedToWindow() {
    super.onAttachedToWindow();

    if (Log.LOGV) Log.v("onAttachedToWindow " + this);

    if (mAttached) return;
    mAttached = true;

    if (mAnimate) {
        setBackgroundResource(R.drawable.animate_circle);
        /* Start the animation (looped playback by default). */
        ((AnimationDrawable) getBackground()).start();
    }

    if (mLive) {
        /* monitor time ticks, time changed, timezone */
        IntentFilter filter = new IntentFilter();
        filter.addAction(Intent.ACTION_TIME_TICK);
        filter.addAction(Intent.ACTION_TIME_CHANGED);
        filter.addAction(Intent.ACTION_TIMEZONE_CHANGED);
        mContext.registerReceiver(mIntentReceiver, filter, null, mHandler);

    }

    /* monitor 12/24-hour display preference */
    mFormatChangeObserver = new FormatChangeObserver();

    mContext.getContentResolver().registerContentObserver(

            Settings.System.CONTENT_URI, true, mFormatChangeObserver); 

    updateTime();
}

private void setDateFormat() {      

    mFormat = Alarms.get24HourMode(mContext) ? Alarms.M24 : M12;
    mAmPm.setShowAmPm(mFormat == M12);
} 
```

为了解决这个编译错误，我把这个语句放在我的代码中

```
Context mContext; 
```

但是，尽管编译错误已解决，但在模拟器中启动时，应用程序会引发异常并退出而不启动。

有人可以告诉我如何使用这个上下文的东西或我写的 wat shud 作为替代方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T06:27:53.963

您需要启动 mContext。有一些不同的方法可以做到这一点。在活动中，您可以：

```
Context mContext = this; 
```

或一般来说：

```
Context mContext = getContext(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T06:23:55.743

使用 getContext() 方法代替 mContext 来获取上下文。那里的示例代码可能错过了这部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T06:32:53.050

而不是**mContext**使用**getApplicationContext() 。**希望它会工作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T06:29:47.097

在这里你需要添加你的活动的上下文试试我的代码

```
mFormat = Alarms.get24HourMode(this) ? Alarms.M24 : M12;
        mAmPm.setShowAmPm(mFormat == M12)

; 
```

需要更多代码

但我的建议是您在此视图或活动中获取上下文的位置在那里初始化您的 mContext 变量，它将起作用

# java - 不创建物理文件的动态编译

> ID：10118380
> 
> 赞同：0
> 
> 时间：2012-04-12T06:19:57.773
> 
> 标签：java, file, java-compiler-api, jsr199

我按照[通过 Java 编译器 API 动态生成 Java 类](http://www.accordess.com/wpblog/an-overview-of-java-compilation-api-jsr-199/)的教程进行操作，代码可以工作，但我看到的是程序在编译后会创建一个类文件。

```
import java.io.IOException;
import java.net.URI;
import java.util.Arrays;
import java.util.Locale;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.tools.JavaCompiler.CompilationTask;
import javax.tools.*;

public class Compiler {

    static final Logger logger = Logger.getLogger(Compiler.class.getName());
    static String sourceCode = "class HelloWorld{"
        + "public static void main (String args[]){"
        + "System.out.println (\"Hello, dynamic compilation world!\");"
        + "}"
        + "}";

    public void doCompilation() {

        SimpleJavaFileObject fileObject = new DynamicJavaSourceCodeObject("HelloWorld", sourceCode);
        JavaFileObject javaFileObjects[] = new JavaFileObject[]{fileObject};

        JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();

        StandardJavaFileManager stdFileManager = compiler.getStandardFileManager(null, Locale.getDefault(), null);

        Iterable<? extends JavaFileObject> compilationUnits = Arrays.asList(javaFileObjects);

        DiagnosticCollector<JavaFileObject> diagnostics = new DiagnosticCollector<>();

        CompilationTask compilerTask = compiler.getTask(null, stdFileManager, diagnostics, null, null, compilationUnits);

        boolean status = compilerTask.call();

        if (!status) {
            for (Diagnostic diagnostic : diagnostics.getDiagnostics()) {
                System.out.format("Error on line %d in %s\n", diagnostic.getLineNumber(), diagnostic);
            }
        }
        try {
            stdFileManager.close();
        } catch (IOException ex) {
            Logger.getLogger(Compiler.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public static void main(String args[]) {
        new Compiler().doCompilation();
    }
}

class DynamicJavaSourceCodeObject extends SimpleJavaFileObject {

    private String qualifiedName;
    private String sourceCode;

    protected DynamicJavaSourceCodeObject(String name, String code) {
        super(URI.create("string:///" + name.replaceAll("\\.", "/") + JavaFileObject.Kind.SOURCE.extension), JavaFileObject.Kind.SOURCE);
        this.qualifiedName = name;
        this.sourceCode = code;
    }

    @Override
    public CharSequence getCharContent(boolean ignoreEncodingErrors)
        throws IOException {
        return sourceCode;
    }

    public String getQualifiedName() {
        return qualifiedName;
    }

    public void setQualifiedName(String qualifiedName) {
        this.qualifiedName = qualifiedName;
    }

    public String getSourceCode() {
        return sourceCode;
    }

    public void setSourceCode(String sourceCode) {
        this.sourceCode = sourceCode;
    }
} 
```

是否有可能在调用`compilerTask.call();`后不创建类文件？如果是的话怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T06:31:05.257

对于您的工作，我会使用[Janino](https://stackoverflow.com/questions/616532/on-the-fly-in-memory-java-code-compilation-for-java-5-and-java-6)。仅使用 . 似乎是可行的`JavaCompiler`，但没有很好的记录。有关使用 JavaCompiler 进行处理的示例，请参阅我添加的带有链接问题的评论。

编辑：我发现了[一个](http://www.javablogging.com/dynamic-in-memory-compilation/)使用`JavaCompiler`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-17T14:55:34.050

为避免 JavaCompiler 创建类文件，请使用参数：“-proc:only”

# bash - 用于自动测试程序输出的 Bash 脚本 - C

> ID：10118381
> 
> 赞同：6
> 
> 时间：2012-04-12T06:20:03.510
> 
> 标签：bash, automated-tests

我对编写脚本非常陌生，并且无法弄清楚如何开始使用 bash 脚本，该脚本将根据预期输出自动测试程序的输出。

我想编写一个 bash 脚本，该脚本将在一组测试输入上运行指定的可执行文件，比如 in1 in2 等，针对相应的预期输出，out1、out2 等，并检查它们是否匹配。要测试的文件从标准输入读取其输入并将其输出写入标准输出。因此在输入文件上执行测试程序将涉及 I/O 重定向。

该脚本将使用单个参数调用，该参数将是要测试的可执行文件的名称。

我在进行此操作时遇到了麻烦，因此将不胜感激任何帮助（指向进一步解释我如何做到这一点的任何资源的链接）。我显然已经尝试过搜索自己，但并没有很成功。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T07:07:15.500

如果我得到你想要的；这可能会让你开始：

bash + diff 等外部工具的组合。

```
#!/bin/bash

# If number of arguments less then 1; print usage and exit
if [ $# -lt 1 ]; then
    printf "Usage: %s <application>\n" "$0" >&2
    exit 1
fi

bin="$1"           # The application (from command arg)
diff="diff -iad"   # Diff command, or what ever

# An array, do not have to declare it, but is supposedly faster
declare -a file_base=("file1" "file2" "file3")

# Loop the array
for file in "${file_base[@]}"; do
    # Padd file_base with suffixes
    file_in="$file.in"             # The in file
    file_out_val="$file.out"       # The out file to check against
    file_out_tst="$file.out.tst"   # The outfile from test application

    # Validate infile exists (do the same for out validate file)
    if [ ! -f "$file_in" ]; then
        printf "In file %s is missing\n" "$file_in"
        continue;
    fi
    if [ ! -f "$file_out_val" ]; then
        printf "Validation file %s is missing\n" "$file_out_val"
        continue;
    fi

    printf "Testing against %s\n" "$file_in"

    # Run application, redirect in file to app, and output to out file
    "./$bin" < "$file_in" > "$file_out_tst"

    # Execute diff
    $diff "$file_out_tst" "$file_out_val"

    # Check exit code from previous command (ie diff)
    # We need to add this to a variable else we can't print it
    # as it will be changed by the if [
    # Iff not 0 then the files differ (at least with diff)
    e_code=$?
    if [ $e_code != 0 ]; then
            printf "TEST FAIL : %d\n" "$e_code"
    else
            printf "TEST OK!\n"
    fi

    # Pause by prompt
    read -p "Enter a to abort, anything else to continue: " input_data
    # Iff input is "a" then abort
    [ "$input_data" == "a" ] && break

done

# Clean exit with status 0
exit 0 
```

* * *

编辑。

添加退出代码检查；和一小段步行槽：

简而言之，这将：

1.  检查是否给出参数（bin/application）
2.  使用“基本名称”数组，循环并生成真实文件名。
    *   即：有数组`("file1" "file2")`你得到

        *   在文件中：`file1.in`
        *   要验证的输出文件：`file1.out`
        *   输出文件：`file1.out.tst`
        *   在文件中：`file2.in`
        *   ...
3.  执行应用程序并在文件中重定向到`stdin`应用程序`<`，并`stdout`从应用程序重定向到输出文件测试`>`。
4.  使用像 ie 这样的工具`diff`来测试它们是否相同。
5.  检查工具的退出/返回代码并打印消息 (FAIL/OK)
6.  提示继续。

任何和所有偏离路线的东西都可以修改、删除等。

* * *

一些链接：

*   [TLDP；高级 Bash 脚本指南](http://tldp.org/LDP/abs/html/)（可以阅读[更多](http://userstyles.org/styles/browse/all/tldp)）
    *   [数组](http://tldp.org/LDP/abs/html/arrays.html)
    *   [文件测试运算符](http://tldp.org/LDP/abs/html/fto.html)
    *   [循环和分支](http://tldp.org/LDP/abs/html/loops.html)
    *   [退出状态](http://tldp.org/LDP/abs/html/exit-status.html)
    *   ...
*   [bash 数组教程](http://www.thegeekstuff.com/2010/06/bash-array-tutorial/)
*   [TLDP；Bash 初学者指南](http://tldp.org/LDP/Bash-Beginners-Guide/html/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T06:32:44.083

[Expect](http://expect.sourceforge.net/)可能非常适合此类问题：

> Expect 是一个主要用于自动化交互式应用程序的工具，例如 telnet、ftp、passwd、fsck、rlogin、tip 等。Expect 确实使这些东西变得微不足道。Expect 也可用于测试这些相同的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T07:20:44.060

首先看一下 Advanced Bash-Scripting Guide 关于[I/O 重定向](http://tldp.org/LDP/abs/html/io-redirection.html)的章节。

然后我不得不问为什么要使用 bash 脚本？直接从您的 makefile 中执行此操作。

例如，我有一个[通用的 makefile](http://pastebin.com/PCk0gNtE)，其中包含以下内容：

```
# type 'make test' to run a test.
# for example this runs your program with jackjill.txt as input
# and redirects the stdout to the file jackjill.out
test: $(program_NAME)
        ./$(program_NAME) < jackjill.txt > jackjill.out
        ./diff -q jackjill.out jackjill.expected 
```

您可以像这样添加任意数量的测试。您每次只需将输出文件与包含预期输出的文件进行比较。

当然，这仅在您实际使用生成文件来构建程序时才有意义。:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T06:25:10.720

功能。这里的字符串。重定向。过程替换。`diff -q`. `test`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T06:53:55.350

预期输出是第二种输入。

例如，如果您想测试一个平方函数，您的输入应为 (0, 1, 2, -1, -2)，预期输出为 (0, 1, 4, 1, 4)。

然后，您会将输入的每个结果与预期的输出进行比较并报告错误。

您可以使用数组：

```
in=(0 1 2 -1 -2)
out=(0 1 4 2 4)

for i in $(seq 0 $((${#in[@]}-1)) )
do
   (( ${in[i]} * ${in[i]} - ${out[i]} )) && echo -n bad" " || echo -n fine" "
   echo $i ": " ${in[i]}"² ?= " ${out[i]}
done

fine 0 :  0² ?=  0
fine 1 :  1² ?=  1
fine 2 :  2² ?=  4
bad 3 :  -1² ?=  2
fine 4 :  -2² ?=  4 
```

当然，您可以从文件中读取两个数组。

使用 (( ... )) 进行测试可以调用算术表达式、字符串和文件。尝试

```
 help test 
```

概览。

从文件中逐字读取字符串：

```
for n in $(< f1); do echo $n "-" ; done 
```

读入一个数组：

```
arr=($(< file1)) 
```

逐行读取文件：

```
for i in $(seq 1 $(cat file1 | wc -l ))
do
    line=$(sed -n ${i}p file1)
    echo $line"#"
done 
```

针对程序输出进行测试听起来像是字符串比较和程序输出捕获`n=$(cmd param1 param2)`：

```
asux:~/prompt > echo -e "foo\nbar\nbaz" 
foo
bar
baz
asux:~/prompt > echo -e "foo\nbar\nbaz" > file 
asux:~/prompt > for i in $(seq 1 3); do line=$(sed -n ${i}p file); test "$line" = "bar" && echo match || echo fail ; done 
fail
match
fail 
```

进一步有用：在 [[ ... ]] 括号中使用 =~ 对字符串进行正则表达式匹配：

```
for i in $(seq 1 3)
do
   line=$(sed -n ${i}p file)
   echo -n $line
   if [[ "$line" =~ ba. ]]; then
     echo " "match
   else echo " "fail
   fi
done 
foo fail
bar match
baz match 
```

# java - SQLException：尝试循环三个结果集时，此 ResultSet 已关闭

> ID：10118385
> 
> 赞同：1
> 
> 时间：2012-04-12T06:20:56.443
> 
> 标签：java, postgresql

我试图遍历 3 个结果集并比较它们的值。bt 它抛出了这个异常......有人可以帮助我了解我正在经历的事情吗？这是一段代码：

java.lang.Object[] reconciledPaymentDetails = null;

```
java.util.Vector shiftsVector = new java.util.Vector(1, 1);

String status = "";

try {

    Class.forName("org.postgresql.Driver");
    } 
catch (ClassNotFoundException ex) {
    Logger.getLogger(DBConnection.class.getName()).log(Level.SEVERE, null, ex);
   }
try {
    connDB = DriverManager.getConnection("jdbc:postgresql://" + hostName + ":" + portNumber + "/" + dbName, userName, password);

    System.out.println("Connection established : [" + connDB.toString() + "]");

    java.sql.Statement pstmt = connDB.createStatement();

    java.sql.Statement pstmtShifts = connDB.createStatement();

    java.sql.ResultSet rset = pstmt.executeQuery("SELECT DISTINCT payment_mode,transaction_type, credit FROM ac_cash_collection WHERE shift_no = '" + shiftNumber + "'");

    while (rset.next()) {

        java.sql.ResultSet rsetShifts = pstmtShifts.executeQuery("SELECT DISTINCT amount, shift_amount FROM ac_shift_collections WHERE shift_no = '" + shiftNumber + "' AND pay_mode ilike '"+rset.getString(1) +"'");

        while (rsetShifts.next()) {

            java.sql.ResultSet rset2 = pstmt.executeQuery("select debit from ac_cash_book where shift_no='"+shiftNumber+"'");

           while (rset2.next()){

                double debit =rset2.getDouble("debit");

                if((rset2.getDouble("debit")<=0 ))

             status = "no_banked";

               else if((rset2.getDouble("debit")==rsetShifts.getDouble("amount"))
                        && (rsetShifts.getDouble("amount"))< rsetShifts.getDouble("shift_amount"))
                        status= "BntClosed";
                else if (rset2.getDouble(1)==rsetShifts.getDouble("shift_amount"))
                    status ="bClosed";

            shiftsVector.addElement(rset.getString(1)+":"+rsetShifts.getString(1)+":"+status);

            } 
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T06:24:56.943

该[文档](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html)对此提供了清晰的解释：

> 默认情况下，每个 Statement 对象只能同时打开一个 ResultSet 对象。因此，如果一个 ResultSet 对象的读取与另一个 ResultSet 对象的读取交错，则每个对象都必须由不同的 Statement 对象生成。Statement 接口中的所有执行方法都会隐式关闭语句的当前 ResultSet 对象（如果存在打开的对象）。

所以你的选择是：

1.  `Statement`为每个查询使用不同的实例。
2.  在继续下一个之前收集每个`ResultSet`（即到 a`Set`或 a `List`）的所有结果，然后对收集的结果而不是直接在结果集上运行比较。

# python - Twisted 不适用于所有用户？

> ID：10118387
> 
> 赞同：2
> 
> 时间：2012-04-12T06:21:03.980
> 
> 标签：python, twisted

我正在使用 Python 中的 Twisted 开发“类似聊天”的服务器。但是我遇到了问题。在我的 Mac 的主管理员帐户上，Twisted 工作正常。但是当我进入一个单独的管理员帐户时，我被抛出了......

```
Traceback (most recent call last):
  File "/Users/Alec/Desktop/server.py", line 1, in <module>
    from twisted.internet.protocol import Protocol, Factory
ImportError: No module named twisted.internet.protocol 
```

它在另一个帐户上工作正常，但这个新的管理员帐户不起作用。我正在努力让我的项目继续进行，但这让我陷入了停顿。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:08:49.073

我只能猜测您的设置有什么问题，因为您没有提供太多信息。但是，原因一定与您调用的方式`python`有关，因为 OS X 上的默认 python 已安装 Twisted（您可能已经注意到）。

*   您的管理用户是否有自编译的 Python？
*   您的管理用户是否正在使用`virtualenv`，或任何其他可以删除的环境管理工具`site-packages`？
*   您的管理用户是否从 python.org 安装了 Python？（这与内置系统 Python 不完全兼容，并且会有不同的包可用。）

如果`type -p python`在 shell 中没有 print `/usr/bin/python`，那么很可能是其中一种情况，但修复它（换句话说，取消所做的任何事情）取决于这些选项中的哪一个更改了您的默认 Python。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:35:40.320

您可能想检查`sys.path`两个用户的（模块搜索路径）是否相同。

```
>>> import sys
>>> sys.path 
```

可能有一个用户特定的`PYTHONPATH`环境变量会改变两个用户之一的行为，尽管我不确定它是否真的会*破坏*导入。

# xamarin.ios - “无效句柄”创建 CGBitmapContext

> ID：10118388
> 
> 赞同：2
> 
> 时间：2012-04-12T06:21:04.233
> 
> 标签：xamarin.ios, cgbitmapcontext

我遇到了 CGBitmapcontext 的问题。创建 CGBitmapContext 时出现错误消息“无效句柄”。

这是我的代码：

```
var previewContext = new CGBitmapContext(null, (int)ExportedImage.Size.Width, (int)ExportedImage.Size.Height, 8, (int)ExportedImage.Size.Height * 4,                                                    CGColorSpace.CreateDeviceRGB(), CGImageAlphaInfo.PremultipliedFirst); 
```

谢谢;

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T06:57:24.807

那是因为您将 null 传递给第一个参数。CGBitmapContext 用于直接绘制到内存缓冲区中。构造函数的所有重载中的第一个参数是（Apple docs）：

> *data* 指向要在内存中呈现图形的目标的指针。此内存块的大小应至少为 (bytesPerRow*height) 字节。

在 MonoTouch 中，为了方便起见，我们得到了两个接受 byte[] 的重载。所以你应该像这样使用它：

```
int bytesPerRow = (int)ExportedImage.Size.Width * 4; // note that bytes per row should 
    //be based on width, not height.
byte[] ctxBuffer = new byte[bytesPerRow * (int)ExportedImage.Size.Height];
var previewContext = 
    new CGBitmapContext(ctxBuffer, (int)ExportedImage.Size.Width, 
    (int)ExportedImage.Size.Height, 8, bytesPerRow, colorSpace, bitmapFlags); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-08T19:59:00.040

`width`如果传递给方法的or`height`参数的值为 0，也会发生这种情况。

# android - 从列表视图的内部元素更改按钮的背景，Android

> ID：10118392
> 
> 赞同：-1
> 
> 时间：2012-04-12T06:21:31.500
> 
> 标签：android

我有一个`ListView lv`，并且我`Button delete`在 Listview 的底部有一个（按钮在 listview 之外）。有一个问题是我如何从列表视图内部处理按钮（例如更改背景或设置按钮的文本）。我有自己的适配器，我认为我必须处理按钮在`public void getView(int pos, View convertView, ViewGroup parent)`功能上的变化。有人有什么主意吗？P/s：这个问题的重点是：“如何处理列表视图中的其他元素？”。欢迎任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:38:04.857

假设您不只是从`Activity`or`Fragment`的`onCreate`方法中保存对 Button 的引用，那么在内部`getView`您将需要实现一个循环，沿着`ViewParent`链向上搜索您想要的实际视图。它可能看起来像这样：

```
ViewParent nv = parent.getParent();
while(nv != null){
  if(View.class.isInstance(nv)){
    View button = findViewById(R.id.button_id);
    if(button != null){
      // FOUND IT!
      // do something, then break;
      break;
    }
  }
  nv = nv.getParent();
} 
```

没有编译或测试，但是......类似的东西应该做你想要的。有关详细信息，请参阅[`ViewParent.getParent()`](http://developer.android.com/reference/android/view/ViewParent.html#getParent%28%29)文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T06:39:42.847

在活动中，

```
Button delete = (Button) findViewById(R.id.delete);
CustomAdapter adapter = new CustomAdapter(delete);//add your argumente here 
```

现在在适配器中，您可以为按钮设置 OnClickListener。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T06:34:52.447

我猜您正在使用自定义阵列适配器。如果是这样，您可以将对按钮的引用传递给 arrayadapter 类。

我不确定这是否会让您编辑按钮。如果不是，您可以从 Activity 向 ArrayAdapter 发送一个处理程序。所以在活动中创建一个类似这样的处理程序：

```
 protected Handler updateButtonHandler = new Handler() {
    @Override
    public void handleMessage(Message msg){
        //Update button
    }
}; 
```

然后在arrayadapter中有一个参考并且：

```
updateButtonHandler.sendEmptyMsg(0); 
```

# facebook - 使用图形 API 查找相关的 Facebook 兴趣

> ID：10118394
> 
> 赞同：0
> 
> 时间：2012-04-12T06:21:36.427
> 
> 标签：facebook, facebook-graph-api

我正在尝试找出一种在 Facebook 上找到相关兴趣的方法。例如，我想搜索 Cityville，结果应该是 Farmville、Castleville 等。

是否有支持此功能的 API，有哪些替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:19:30.343

您可以使用 url [https://graph.facebook.com/me/likes?access_token=](https://graph.facebook.com/me/likes?access_token=) **{your_token_here}通过****Graph API**搜索 JSON 结果，将“我”替换为 Facebook 用户 ID/名称。

 **如果您正在寻找页面搜索，您可以使用相同的 API，网址为[https://graph.facebook.com/search?q=](https://graph.facebook.com/search?q=) **{keyword}** &type=page&access_token= **{your_token_here}**。**

# log4net - 使用 log4net 在异常上下文中捕获数据

> ID：10118396
> 
> 赞同：1
> 
> 时间：2012-04-12T06:21:38.660
> 
> 标签：log4net

如何使用**log4net**捕获导致异常的方法的输入参数？

目前，我在每种方法中都使用**log4net**来`GlobalContext`存储输入参数，并通过自定义异常布局将上下文数据记录到数据库中。

我可以在这里应用其他更好的策略吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:31:05.103

如果您考虑使用面向方面的开发框架，您可以查看这篇文章： [Method Tracing Using log4net and PostSharp](http://michaelfcollins3.me/2010/10/method-tracing-using-log4net-and-postsharp/)

还有其他框架应该可以与 log4net 一起正常工作，例如 AspectF、Unity、Spring.Net，但我还没有尝试过。

# android - 如何使用本机相机自动开始拍摄图片

> ID：10118400
> 
> 赞同：0
> 
> 时间：2012-04-12T06:21:53.433
> 
> 标签：android

启动我的 Android 应用程序后，我想自动启动本机相机（可以使用意图完成）并每隔几秒钟自动开始拍照。

这可以做到吗？启动相机后，如何启动？因此，用户无需单击任何内容即可开始拍照过程。

提前致谢，佩马尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:30:42.207

相机意图中不支持自动捕捉。如果你想这样做，你需要在你的应用程序中实际实现相机代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:08:58.140

如果您正在使用意图，您只需启动已安装的相机应用程序并且没有进一步的控制权。如果您想定期捕捉图像并控制自己，您必须自己使用相机服务。在这里（在源代码库中），您可以找到如何启动相机和捕获预览的示例：

[http://sourceforge.net/projects/javaocr/](http://sourceforge.net/projects/javaocr/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T15:01:51.837

将按钮保留在那里，但将可见性设置为消失，以便用户看不到该按钮。

当你打开相机时，使用一个定时器任务，然后在定时器任务里面写：

button.performClick();

这里的按钮是对您的按钮或您正在使用的任何视图的引用。这将在您指定的时间后自动捕获图像。

# ruby-on-rails - 使用 Typus gem 在 Rails 上获取未定义的局部变量或方法“范围”的错误

> ID：10118405
> 
> 赞同：0
> 
> 时间：2012-04-12T06:22:21.703
> 
> 标签：ruby-on-rails, scope, admin, typus

有没有人用过带有rails的[typus gem ？](https://github.com/fesplugas/typus)我用它来管理我的管理面板，它在我的开发机器上工作得很好，当我在服务器上部署它时，我突然收到如下错误

`undefined local variable or method 'scopes' for <#<Class:0x00000002f31630>:0x00000002d42608>`

任何想法 ？

# jqgrid - JQGrid，编辑网址

> ID：10118407
> 
> 赞同：2
> 
> 时间：2012-04-12T06:22:26.567
> 
> 标签：jqgrid

我是 jQuery 新手，我需要在我的项目中使用 jqGrid。

我有一个编辑/删除/插入问题；我只有一个 URL，`editurl`然后在控制器中我使用该`oper`属性来决定它是插入还是删除操作。

但是我想有一个单独的 URL 用于 jqGrid 中的编辑、删除和插入操作。你能告诉我如何实现吗？

客户端代码：

```
$(document).ready(function () {
    var lastsel2;
    var grid = jQuery("#list5").jqGrid({
        url: '/home1/GetUserData',
        datatype: "json",
        mtype: "POST",
        colNames: ['Code', 'LoginID', 'Emailid', 'CreateDate'],
        colModel: [
        // { name: 'act', index: 'act', width: 75, sortable: false },
                        {name: 'Code', index: 'Code', width: 55, editable: true },
                        { name: 'LoginID', index: 'LoginID', width: 90, editable: true },
                        { name: 'Emailid', index: 'Emailid', width: 100, editable: true },
                    { name: 'CreateDate', index: 'CreateDate', width: 100, editable: true }
                      ],
        rowNum: 10,
        width: 700,
        height: 300,
        rowList: 10,
        pager: $("#pager2"),
        editurl: "/home1/EditUserData",
        onSelectRow: function (id) {
            if (id && id !== lastsel2) {
                if (id == "new_row") {
                    grid.setGridParam({ editurl: "/home1/InsertUserData" });
                }
                else {
                    grid.setGridParam({ editurl: "/home1/EditUserData" });
                }
                jQuery('#list5').restoreRow(lastsel2);
                $("#list5_ilsave").addClass("ui-state-disabled");
                $("#list5_ilcancel").addClass("ui-state-disabled");
                $("#list5_iladd").removeClass("ui-state-disabled");
                $("#list5_iledit").removeClass("ui-state-disabled");
                lastsel2 = id;
            }
        },
        caption: "Simple data manipulation"
    });
    jQuery("#list5").jqGrid('navGrid', '#pager2', { edit: false, add: false, del: true, search: false, refresh: false }, {}, {}, { url: '/home1/DeleteUserData' });
    jQuery("#list5").jqGrid('inlineNav', "#pager2", { edit: true, add: true, del: true, search: false, refresh: false });
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T08:48:24.910

您可以使用 navGrid 方法为所有操作传递选项，如下所示：

```
jQuery('#list5').jqGrid('navGrid', '#pager2', { edit: true, add: true, del: true },
    //edit options
    { url: '/home1/EditUserData' },
    //add options
    { url: '/home1/AddUserData' },
    //delete options
    { url: '/home1/DeleteUserData' }
); 
```

请[在此处](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:navigator)和[此处](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:form_editing)阅读更多信息。

**更新**

在 inlineNav 方法的情况下，jqGrid 总是将同一组参数 ( [editParams](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing) ) 传递给 saveRow 方法。作为效果，编辑/添加请求将发送到相同的 URL。您坚持检查`oper`以区分编辑添加。

在重新加载网格的主题中，您可以使用 editParams 设置 aftersavefunc 以触发`realoadGrid`如下：

```
jQuery('#list5').jqGrid('inlineNav', '#pager2', { edit: true, add: true, editParams: {
   aftersavefunc: function(rowId, response) { jQuery('#list5').trigger('reloadGrid'); }
}}); 
```

但是您应该记住，它也会在编辑后导致刷新（原因与上述相同）-您可以尝试使用响应参数来区分这两者。我还从代码中删除了 del、search 和 refresh，因为 inlineNav 没有这些选项。

# ruby-on-rails-3.1 - twitter_bootstrap_form_for 是否与 f.select 一起使用？

> ID：10118412
> 
> 赞同：0
> 
> 时间：2012-04-12T06:22:55.073
> 
> 标签：ruby-on-rails-3.1, twitter-bootstrap

是否可以在 twitter 引导下拉样式中包装 rails f.select 下拉标签，然后在按下提交按钮时将选择提交到数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:49:21.457

我知道这个问题很老，但我只是想自己解决这个问题。由此看来[，](https://stackoverflow.com/questions/12257130/twitter-bootstrapping-a-locale-selector-drop-down-in-rails-3/)您无法使用引导下拉样式设置表单选择样式。建议是丢失表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T12:02:17.473

正如[Twitter Bootstrapping 在 Rails 3 中的语言环境选择器下拉列表中](https://stackoverflow.com/questions/12257130/twitter-bootstrapping-a-locale-selector-drop-down-in-rails-3/)所回答的那样，本机 Bootstrap 下拉列表不支持`<select>`基于标记。所以大多数时候适应`<ul><li>`基于标记会更容易和更一致。

如果这不可能，可能还有其他解决方案，例如通过 Javascript将隐藏`<select>`与可见相关联。`.dropdown`

# iphone - 当财产声明不可避免时——Objective C 2.0

> ID：10118414
> 
> 赞同：3
> 
> 时间：2012-04-12T06:23:13.293
> 
> 标签：iphone, objective-c-2.0

在进行维护项目时，我正在努力处理大量杂乱的代码。在当前的作业中，我发现以前的开发人员已经为类的每个 iVar 和 IBOutlet 定义了属性（和综合）。

根据我的理解，我习惯于仅正确声明那些我打算在该类之外使用的变量。大多数时候，我不需要为任何 IBOutlet 声明属性（当然也不需要合成）。

我可以就“何时需要（或必须）声明财产和合成”有任何答案或文件吗？

### 编辑：

在阅读了 Dr.Kameleon 指出的帖子后，我想到了另一个问题：如果我将每个 iVar 声明为属性并合成它们，代码中可能存在哪些漏洞？我可以走那条路吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:46:17.113

没有关于何时使用属性和何时使用 ivar 的规则。使用两者都有自己的优势-

使用 ivar-

1.  使用 ivar 提供较小的性能优势。
2.  用户必须通过引用计数手动进行内存管理

使用属性-

1.  这确保了 KVO 合规性代码。
2.  通过使用属性，内存管理由访问器进行。

您可以查看以下主题以获取更多洞察信息 - [http://cocoawithlove.com/2010/03/dynamic-ivars-solving-fragile-base.html](http://cocoawithlove.com/2010/03/dynamic-ivars-solving-fragile-base.html)

在我看来，我总是更喜欢使用财产，因为它比 ivars 有很多好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T06:46:36.927

我认为总的来说，很难说拥有一两个额外的财产就是那么糟糕。话虽如此，包含大量的属性和变量会使事情变得混乱，并使代码难以理解和维护。而且您实际上并不需要为您视图中的每个 frazmabob 设置一个 IBOutlet。因此，如果您想稍微减少脂肪，只需摆脱在运行时不需要操作的任何内容。这听起来很简单，因为它是 - 包含变量/属性的唯一原因是如果您预计在运行时使用它。

至于向外界呈现属性，你是对的，OO 编程的一个主要概念是在不需要呈现的时候隐藏它们。如果您是团队的一员并且您不希望其他人篡改您的数据，这一点非常重要。所以去做吧——清理代码，让你自己和其他人的生活更轻松。

# asp.net-mvc-3 - @Url.Content 发布后发生变化

> ID：10118418
> 
> 赞同：0
> 
> 时间：2012-04-12T06:23:38.797
> 
> 标签：asp.net-mvc-3

在我的 MVC3 Razor 应用程序中，我将布局页面中的 ajax 称为

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script> 
```

当我在本地机器上运行它时，它工作得很好。但是使用 iis7 发布后，我的 ajax 调用不起作用。当我在浏览器中检查查看源代码时，参考就像`<script src="/Scripts/jquery.unobtrusive-ajax.js" type="text/javascript"></script>`发布之前和`<script src="mvcapplication/Scripts/jquery.unobtrusive-ajax.js" type="text/javascript"></script>` 发布之后一样。我很困惑为什么 url 会改变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:25:10.113

`Url.Content(string contentPaht)`使用该`VirtualPathUtility.ToAbsolute(string contentPath)`方法创建一个绝对url：

```
public string Content(string contentPath)
{
    if (string.IsNullOrEmpty(contentPath))
    {
        throw new ArgumentException(MvcResources.Common_NullOrEmpty, "contentPath");
    }
    if (contentPath[0] == '~')
    {
        return VirtualPathUtility.ToAbsolute(contentPath, 
               this.RequestContext.HttpContext.Request.ApplicationPath);
    }

    return contentPath;
} 
```

正如你所看到的`Request.ApplicationPath`，它代表了虚拟目录。当参数`contentPath`不以 a 开头时，它会在不使用该方法`~`的情况下返回 contentPath 。`ToAbsolute(string contentPath)`

所以你可以尝试使用：

```
@Url.Content("/Scripts/jquery.unobtrusive-ajax.js") 
```

**编辑：**您也可以尝试更改默认路由：

```
routes.MapRoute(
    "Default",
    "NameVirtualDirectory/{controller}/{action}/{id}",
    new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:27:45.037

因为在服务器上应用程序具有虚拟路径“mvcapplication”，即应用程序驻留在 IIS 中的虚拟目录“mvcapplication”中。它与 asp.net mvc 无关，它是一个 IIS 设置。

# javascript - 无法使用 sencha 自动滑动 html 页面

> ID：10118431
> 
> 赞同：0
> 
> 时间：2012-04-12T06:24:56.553
> 
> 标签：javascript, html, carousel, sencha-touch-2

我正在使用 sencha touch 2 + java script + html 5 创建简单的应用程序，它会自动更改/滑动 html 页面。我写了下面的代码来使用 DelayedTask 任务滑动 html 页面，但代码不起作用。

主.js

```
Ext.create('Ext.Carousel', {
fullscreen: true,
xtype:'carousel',
cls:'carousel',

defaults: {

    styleHtmlContent: true
},

config: {
    ui : 'light',

},

 listeners:
            {
                'afterrender': function(carousel) {
                    carousel.pageTurner = new Ext.util.DelayedTask(function() {
                        if (this.getActiveIndex() == this.items.length - 1) {
                            this.setActiveItem(0, 'slide');
                        }
                        else {
                            this.next();
                        }
                        this.pageTurner.delay(6000);
                    }, carousel);
                    carousel.pageTurner.delay(6000);
                }
            },

items: [

    {
        html : '<img src="resources/images/Picture1.png" width="100%" height = "100%" align="middle" /> <audio autoplay loop><source src="resources/audio/kalimba.mp3"></audio>',
        style: 'backgroundImage: url(resources/images/bg.png);backgroundRepeat: repeat;backgroundPosition: center'
    },
    {
        html : '<img src="resources/images/Picture2.png" width="100%" height = "100%" margin=0 align="middle" /> ',
        style: 'backgroundImage: url(resources/images/bg.png);backgroundRepeat: repeat;backgroundPosition: center'
    },
    {
        html : '<img src="resources/images/Picture3.png" width="100%" height = "100%" margin=0 align="middle" />',
        style: 'backgroundImage: url(resources/images/bg.png);backgroundRepeat: repeat;backgroundPosition: center'
    },
    {
        html : '<img src="resources/images/Picture3.png" width="100%" height = "100%" margin=0 align="middle" />',
        style: 'backgroundImage: url(resources/images/bg.png);backgroundRepeat: repeat;backgroundPosition: center'
    }
] 
```

});

我将此代码写到自动端，但它不起作用请帮助我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:23:24.270

您的代码中有很多错误。请试试这个，正如我测试过的那样，它可以工作（仅对**听众**进行更改）：

```
 listeners:
        {
            'show': function(carousel) {
                carousel.pageTurner = new Ext.util.DelayedTask(function() {
                    if (carousel.getActiveIndex() == carousel.items.length - 2) {
                        carousel.setActiveItem(0, 'slide');
                    }
                    else {
                        carousel.next();
                    }
                }, carousel);
                carousel.pageTurner.delay(1000);
            },

                'activeitemchange': function(carousel){
                    if (carousel.getActiveIndex() == 0) {
                       carousel.fireEvent('show',this);

                    } else

                    carousel.pageTurner.delay(1000);
                },

        }, 
```

一些解释：

*   `afterrender`在 Sencha Touch 2 中将event 替换为`paint`event。在这种情况下，您也可以使用`show`event。
*   每次换卡后设置延迟时间，需要监听`activeitemchange`事件

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T00:44:24.847

我知道已经有一个公认的答案，但这是我的实现（对于 sencha touch v2.2）

点击或手动滑动图像将暂停幻灯片。再次敲击将恢复。

确保将其应用于`xtype: 'carousel`'

```
 {
        xtype: 'carousel',

        //...your config stuff here...

        carouselSlideDelay: 3500,
        autoSlide: true,
        listeners: {
            initialize: function(carousel) {

                if (this.autoSlide) {
                    carousel.isRunning = false;
                    this.start(carousel);

                    // Add tap event.
                    carousel.element.on('tap', function(e, el){
                        if (!carousel.isRunning) {
                            carousel.next();
                            this.start(carousel);
                        } else {
                            this.stop(carousel);
                        }
                    }, this);

                    // Add drag event.
                    carousel.element.on('dragstart', function(e, el){
                        this.stop(carousel);
                    }, this);
                }
            }
        },
        start: function(carousel, delay) {
            // If already running.
            if (carousel.isRunning) { return; }

            // Allow for overriding the default delay value.
            var delay = (delay !== undefined ? delay : this.carouselSlideDelay);

            carousel.isRunning = true;
            carousel.timerId = setInterval(function () {
                carousel.next();
                if (carousel.getActiveIndex() === carousel.getMaxItemIndex()) {
                    carousel.setActiveItem(0);
                }
            }, delay);
        },
        stop: function(carousel) {
            clearInterval(carousel.timerId);
            carousel.isRunning = false;
        }
    } 
```

这大致基于此处的 Sencha Touch[演示](http://try.sencha.com/touch/2.0.0/demos/Ext.Carousel.next/viewer.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-24T02:37:33.747

在 chrome 43 错误之后。自动轮播在我的应用程序中不起作用。所以我做了一些定制

```
 direction: 'horizontal',
 delay: 10000,
 start: true,
 indicator:false,

listeners:
    {
       activate: function(homeScreenCarousel) {
        var me=this;

           homeScreenCarousel.pageTurner = new Ext.util.DelayedTask(function() {
                if (me.getActiveIndex() == me.items.length-1) {
                    me.setActiveItem(0,'slide');
                }
                else {
                   me.setActiveItem(me.getActiveIndex()+1,'slide');
                }
                me.pageTurner.delay(8000);
            }, homeScreenCarousel);
            homeScreenCarousel.pageTurner.delay(8000);
        },

        activeitemchange:function(homeScreenCarousel){
          var me=this;
          homeScreenCarousel.pageTurner = new Ext.util.DelayedTask(function() {
                if (me.getActiveIndex() == me.items.length - 1) {
                    me.setActiveItem(0, 'slide');
                }
                else {

                      me.setActiveItem(me.getActiveIndex()+1,'slide');
                }
                 homeScreenCarousel.pageTurner.delay(8000);
            }, homeScreenCarousel);

        }
    }, 
```

# java - java可以导入文本方法吗

> ID：10118433
> 
> 赞同：1
> 
> 时间：2012-04-12T06:25:09.470
> 
> 标签：java, text, methods, import

为了让我的问题更具体，我想知道编译后的 java 程序是否可以从简单的“text.txt”文件中导入方法，基本上是从文本字符？这可能吗？如果有怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T06:55:18.150

是的，这是可能的，这里有一个如何做的例子：[example](http://www.java2s.com/Tutorial/Java/0120__Development/CompileString.htm)。在该页面上编译了一个字符串，但它是相同的基本原理。如果您将文本文件中的内容读入字符串，您可以执行相同的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T06:33:59.447

这可以使用 BeanShell 轻松完成。

[http://www.beanshell.org/](http://www.beanshell.org/)

多年来一直存在，坚如磐石，工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T06:30:45.627

可以，但是如果您想用标准 Java 编写这些方法，则需要一些技术创造力。

本质上，您可以使用“脚本 API”（[http://docs.oracle.com/javase/6/docs/technotes/guides/scripting/programmer_guide/index.html](http://docs.oracle.com/javase/6/docs/technotes/guides/scripting/programmer_guide/index.html)）。此 API 允许您以任何语言执行“脚本”，作为更大 Java 应用程序的一部分。要让它运行 Java，您需要创建一个可以获取源代码的 ScriptEngine 实现，通过编译器 API ( [http://docs.oracle.com/javase/6/docs/api/javax/tools运行它/JavaCompiler.html](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html) )，然后执行它。

如果方法不必用 Java 编码，那么您可以使用开箱即用的脚本 API 以及标准脚本引擎之一。（例如，JavaScript 引擎经过了很好的测试）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T06:30:19.047

1.  所有方法都必须是类的一部分。
2.  您只能在字节码中使用方法。

IFF 你的文本文件定义了一个唯一的类，你可以使用[Java Compiler API](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)和反射来使用这样的方法。

# c - 使用 fseek 和 fread

> ID：10118435
> 
> 赞同：4
> 
> 时间：2012-04-12T06:25:15.553
> 
> 标签：c, io, fread, fseek

我正在从事一个从 bin 文件中读取数据并处理数据的项目。bin 文件很大，大约 150MB。我正在尝试使用 fseek 来跳过不需要的数据处理。

我想知道fseek的处理时间是否和fread一样。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T06:29:04.570

`fseek`只是重新定位内部文件指针，而`fread`实际读取数据。所以我想`fseek`应该比`fread`

如果您真的很想看看屏幕后面发生了什么，请`glibc`从[这里](http://ftp.gnu.org/gnu/libc/)下载并自己检查:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:21:05.003

如果您正在处理大文件，您是否考虑过读/写的替代方案？您可能会发现 mmap() (UNIX) 或 MapViewOfFile (Windows) 是更合适的选择。以下 UNIX 示例演示如何打开一个文件以读取和计算 ASCII 字符“Q”的出现次数。注意 - 已省略所有错误检查以使示例更短。

```
#include <stdio.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <sys/mman.h>
#include <unistd.h>

int main(int argc, char **argv)
{
  int i, fd, len, total;
  char *map, *ptr;

  fd = open("/tmp/mybigfile", O_RDONLY);

  len = lseek(fd, SEEK_END, 0);

  map = (char *)mmap(0, len, PROT_READ, MAP_SHARED, fd, 0);

  total = 0;
  for (i=0; i<len; i++) {
    if (map[i] == 'Q') total++;
  }

  printf("Found %d instances of 'Q'\n");

  munmap(map, len);

  close(fd);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T07:06:34.880

我可能觉得 fseek 可能比 fread 快一点，因为 fseek 将指针位置更改为您提到的新地址空间并且没有发生日期读取。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T06:29:08.250

> 我想知道 的处理时间`fseek`是否与`fread`.

可能不是，当然，它依赖于实现。

最有可能的是，`fseek`只会设置一个内存中的“文件指针”而不去磁盘读取任何信息。`fread`，另一方面，会读取信息。

一个`fseek`到文件位置 149M 后跟一个 1M`fread`可能会比 150 个不同的 1M`fread`调用快，除了最后一个之外的所有调用都丢弃。

# android - 在 SipDroid 中使用 g729 编解码器时出错

> ID：10118436
> 
> 赞同：1
> 
> 时间：2012-04-12T06:25:16.240
> 
> 标签：android, sip, codec

我正在开发一个 SIP 应用程序来拨打和接听电话。我希望该应用程序支持 g729 编解码器。

首先，我尝试使用 SipDroid 一个开源项目，并且我已按照[此步骤](http://code.google.com/p/sipdroid/issues/detail?id=49&q=g729%20codec&colspec=ID%20Type%20Status%20Priority%20Milestone%20Owner%20Summary%20Stars)（按照从 149 到 160 的注释）在[SipDroid](http://code.google.com/p/sipdroid/)中添加 g729 编解码器。

但是在我的应用程序中没有协商 g729 编解码器。我删除了其他编解码器并仅添加了 g729。

在我的 Asterisk 中，我添加了 g729 编解码器的 .so 文件，在 peers 帐户中，我禁止所有并只允许 g729，但我收到了不兼容编解码器的错误。[单击此处](https://stackoverflow.com/questions/10069274/how-to-add-g729-codec-in-android-application/10070748#comment12946883_10070748)了解有关 Asterisk CLI 的编解码器配置和日志消息的更多信息。

我确信客户端存在问题，因为我在 Asterisk 中添加了 g729，并且我正在调用具有 g729 编解码器的 Polycom。

任何有关此问题的建议和解决方案将不胜感激。

谢谢

**解决了：**

请看我的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:29:58.897

我遵循的步骤

*   **下载并在jni**文件夹中添加 g729_jni.cpp 。[点击这里](http://code.google.com/p/sipdroid/issues/attachmentText?id=49&aid=7963991223373796529&name=g729_jni.cpp&token=025a1iGrmm3wQbx6eSwk0oHoQPw%3A1363787775149)
*   **在org.sipdroid.codecs**包中创建或下载 g729.java 文件[点击这里](http://code.google.com/p/sipdroid/issues/attachmentText?id=49&aid=-8474206049513172531&name=G729.java&token=95Cri33msKTkLVmXLnlx4hEZiUk%3A1363787775151)
*   遵循此处列出的步骤 评论号[159](http://code.google.com/p/sipdroid/issues/detail?id=49&q=g729%20codec&colspec=ID%20Type%20Status%20Priority%20Milestone%20Owner%20Summary%20Stars)
*   下载 libs.rar 文件并解压
*   将该库添加到项目根目录。

    如果您想在 SipDroid 中添加 g729，请参考这里

    [http://junedk.blogspot.com/2013/10/add-g729-codec-in-sipdroid.html](http://junedk.blogspot.com/2013/10/add-g729-codec-in-sipdroid.html)

# struts2 - Struts2过滤器说明问题

> ID：10118441
> 
> 赞同：-1
> 
> 时间：2012-04-12T06:25:28.003
> 
> 标签：struts2

请解决这个问题。我是struts2的新手。我正在使用hibernate 3.1。提前谢谢

```
SEVERE: Exception starting filter struts2
Class: com.opensymphony.xwork2.spring.SpringObjectFactory
File: SpringObjectFactory.java
Method: getClassInstance
Line: 209 - com/opensymphony/xwork2/spring/SpringObjectFactory.java:209:-1
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:431)
    at org.apache.struts2.dispatcher.FilterDispatcher.init(FilterDispatcher.java:190)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:275)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:397)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:108)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:3693)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4340)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)
    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:920)
    at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:883)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:492)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1138)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:311)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:117)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
    at org.apache.catalina.core.StandardService.start(StandardService.java:516)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:566)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)
Caused by: java.lang.NullPointerException
    at com.opensymphony.xwork2.spring.SpringObjectFactory.getClassInstance(SpringObjectFactory.java:209)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.verifyResultType(XmlConfigurationProvider.java:519)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.addResultTypes(XmlConfigurationProvider.java:490)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.addPackage(XmlConfigurationProvider.java:446)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadPackages(XmlConfigurationProvider.java:264)
    at org.apache.struts2.config.StrutsXmlConfigurationProvider.loadPackages(StrutsXmlConfigurationProvider.java:111)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:193)
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:55)
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:374)
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:418)
    ... 28 more
Apr 12, 2012 11:48:51 AM org.apache.catalina.core.StandardContext start
SEVERE: Error filterStart
Apr 12, 2012 11:48:51 AM org.apache.catalina.core.StandardContext start
SEVERE: Context [/Struts2Hibernat] startup failed due to previous errors 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:18:52.777

Umesh Awasthi 是对的。您需要提供更多信息才能解决此问题。如果你使用 spring 来创建你的动作，这就是你需要做的。

1.  确保你的类路径中有 struts2-spring-plugin。
2.  使用 Spring 的 @Component 注释您的操作类。例如@Component("myActionName") 或使用 java.inject.Named (JSR330) @Named。例如@Named("myActionName")。
3.  您还需要对 struts.xml 进行另一项更改。将以下内容添加到它

4.  接下来在您的操作元素中，而不是在类属性中引用您的操作类的完整类路径，使用传递给@Named 或@Component 的值。例如 class="myActionName"

希望这可以帮助。如果您需要更多解释，请与我联系。

# java - 在 Windows 7 平台上的 Eclipse Indigo IDE 上使用 Java jpcap 进行编程

> ID：10118444
> 
> 赞同：2
> 
> 时间：2012-04-12T06:25:29.877
> 
> 标签：java, winpcap, jpcap

我正在用 Java 编程，并且是 jpcap 的新手。我已经为 Microsoft Windows 安装了 Jpcap。我的电脑在 Windows 7 平台上运行。我有一个 Eclipse Indigo IDE。当我使用 Eclipse Indigo IDE 创建一个新的 Java 项目时，我创建了一个带有 main 方法的类，然后我复制并粘贴了 jpcap 教程中的代码。

```
package PacketCapturing;

import jpcap.*;
import jpcap.packet.*;

public class NetworkInterfaceList {

public static void main(String args[]){
    //Obtain the list of network interfaces
    NetworkInterface[] devices = JpcapCaptor.getDeviceList();

    //for each network interface
    for (int i = 0; i < devices.length; i++) {
      //print out its name and description
      System.out.println(i+": "+devices[i].name + "(" + devices[i].description+")");

      //print out its datalink name and description
      System.out.println(" datalink: "+devices[i].datalink_name + "(" + devices[i].datalink_description+")");

      //print out its MAC address
      System.out.print(" MAC address:");
      for (byte b : devices[i].mac_address)
        System.out.print(Integer.toHexString(b&0xff) + ":");
      System.out.println();

      //print out its IP address, subnet mask and broadcast address
      for (NetworkInterfaceAddress a : devices[i].addresses)
        System.out.println(" address:"+a.address + " " + a.subnet + " "+ a.broadcast);
    }
} 
```

在 Eclipse Indigo IDE 的 Java 代码编辑器上，我看到为 NetworkInterface 类、NetworkInterface 设备、对象及其属性变量标记的红线。

当我将鼠标悬停在红色标记上时，我看到了以下错误消息：

```
Access restriction: The type NetworkInterface is not accessible due to restriction on required library C:\Windows\Sun\Java\lib\ext\jpcap.jar 
```

当我运行 Java 程序时，没有抛出编译错误，Java 控制台能够正确显示输出。为什么呢？？每当我在 Eclipse Indigo IDE 上调用 jpcap 库时，有什么方法可以删除 Java 编辑器上的红色标记？是因为我没有为windows安装winpcap吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:44:40.823

我遇到了完全相同的问题，我花了一段时间才找到解决方案。希望这可以帮助。

1.  您必须认识到 Jpcap 是 32 位的，并且您很可能在 Windows 7 上运行 64 位版本的 Eclipse。确保为此运行 32 位 Eclipse。

2.  转到 Jpcap 下载部分并将文件 jpcap-0.6.zip 和 JPcapSetup-0.6.exe 放在一个文件夹中。解压缩并执行它们。

3.  将 Jpcap.dll 文件复制到 C:\Windows\System32 文件夹

4.  启动 Eclipse，新建项目，新建包，新建类，编写代码。

5.  右键单击项目名称 --> 构建路径 --> 配置构建路径 ...-> Java 构建路径 --> 添加外部 JAR...

6.  添加 jpcap.jar 文件。

7.  运行你的程序。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-02T03:50:51.887

从 NetBeans 尝试它，如果需要安装它，请尝试手动导入库。jpcap.jar

# iphone - MPMoviePlayerController 当前播放项目详情？

> ID：10118447
> 
> 赞同：0
> 
> 时间：2012-04-12T06:25:37.813
> 
> 标签：iphone, mpmovieplayercontroller, currentitem

我正在使用 MPMoviePlayerController 播放音频流 url，它工作正常，是他们获取当前播放曲目详细信息的任何方式..我的意思是歌曲标题、艺术家姓名等。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T06:41:20.053

添加这个你的 .h 文件

```
@property (nonatomic, retain) MPMusicPlayerController *musicPlayer;
@property (nonatomic, retain) IBOutlet UILabel *songLabel;
@property (nonatomic, retain) IBOutlet UILabel *artistLabel;
@property (nonatomic, retain) IBOutlet UILabel *albumLabel;

- (void)handleNowPlayingItemChanged:(id)notification 
{
// Ask the music player for the current song.
MPMediaItem *currentItem = self.musicPlayer.nowPlayingItem;

// Display the artist, album, and song name for the now-playing media item.
// These are all UILabels.
 self.songLabel.text   = [currentItem valueForProperty:MPMediaItemPropertyTitle];
 self.artistLabel.text = [currentItem valueForProperty:MPMediaItemPropertyArtist];
 self.albumLabel.text  = [currentItem valueForProperty:MPMediaItemPropertyAlbumTitle];    
 // Display album artwork. self.artworkImageView is a UIImageView.
 CGSize artworkImageViewSize = self.artworkImageView.bounds.size;
 MPMediaItemArtwork *artwork = [currentItem valueForProperty:MPMediaItemPropertyArtwork];
 if (artwork != nil) 
 {
      self.artworkImageView.image = [artwork imageWithSize:artworkImageViewSize];
 }   
else
{
        self.artworkImageView.image = nil;
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T01:56:21.177

`MPMoviePlayerController`不支持从播放的流中获取基于 ID3 的元数据。您将不得不使用`MPMusicPlayerController`（本地内容）或可能`AVPlayer`（流式内容）来实现这一目标。虽然我必须承认我不完全确定是否`AVPlayer`/`AVPlayerItem`真的能完成工作——我自己从未尝试过。

# sitecore - 在 sitecore 6.2.0 中查找所有使用公共子布局的项目

> ID：10118448
> 
> 赞同：6
> 
> 时间：2012-04-12T06:25:52.590
> 
> 标签：sitecore

是否有可能获取 sitecore 中使用公共子布局或 XSLT 在演示选项卡中进行渲染的所有项目的列表，即假设有一个名为 layout1.ascx 的子布局被 5 个项目使用。是否可以获得列表所有这 5 个项目按搜索方法。

提前致谢。

问候， 迪维亚

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-12T08:28:53.937

您可能需要分两步执行此操作（或者如果它只有 1 个模板，则需要一个步骤）。

您需要使用 Link 数据库。

查看这些“链接”的最简单方法是转到子布局或渲染并转到“导航”菜单，然后单击“链接”。这应该向您显示指向当前项目的所有项目以及当前项目指向的所有项目（即双向）。

这可能会给你一个模板和/或项目的列表（如果子布局直接设置在一个项目上）。

然后转到模板并查看如何执行相同操作以查看哪些项目具有对模板的引用。

这应该向您显示哪些项目正在使用哪些子布局。

当然，这需要链接数据库已完成（应该自动完成，但您可以使用“开始”>“控制面板”>“数据库”>“重建链接数据库”强制执行此操作）并且子布局等绑定在 Sitecore 中。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-06-18T16:25:13.537

链接数据库建议很棒，但如果您的子布局被数百个项目使用，则加载可能需要一些时间。

另一种选择是这个快速查询：

```
fast://*[@__Renderings='%{FAAD00AE-A089-4AEF-989C-73917660FF48}%' or @__Final Renderings='%{FAAD00AE-A089-4AEF-989C-73917660FF48}%'] 
```

这可以在开发人员中心的 Tools > XPath Builder 下运行（或者对于 Sitecore 8.x，XPath Builder 可以在 /sitecore/shell/default.aspx?xmlcontrol=IDE.XPath.Builder 中找到）。

Sitecore 9.x 不再支持 XPath Builder，但如果您安装[Sitecore PowerShell Extensions](https://doc.sitecorepowershell.com/) ，您仍然可以运行它。

可以运行以下命令：

```
Get-Item -Path "master:" -Query "fast://*[@__Renderings='%{FAAD00AE-A089-4AEF-989C-73917660FF48}%' or @__Final Renderings='%{FAAD00AE-A089-4AEF-989C-73917660FF48}%']" 
```

根据需要更改上面的指南。

# java - 休眠异常。QuerySyntaxException：意外令牌：HAVING

> ID：10118449
> 
> 赞同：0
> 
> 时间：2012-04-12T06:25:53.853
> 
> 标签：java, hibernate, hql

我尝试使用这个 HQL 查询：

```
 Result.find("SELECT c, ( 3959 * acos( cos( radians(?) ) * "+
    "cos( radians( c.latitude ) ) *"+
    "cos( radians( c.longitude ) - radians(?) ) +"+
    "sin( radians(?) ) * sin( radians( c.latitude ) ) ) ) " +
    "AS distance FROM City c HAVING distance < ? ORDER BY distance ASC",
    latitude, longitude, latitude, radius).fetch(); 
```

但结果是：

```
IllegalArgumentException occured : org.hibernate.hql.ast.QuerySyntaxException: unexpected token: HAVING near line 1, column 204 [SELECT c, ( 3959 * acos( cos( radians(?) ) * cos( radians( c.latitude ) ) *cos( radians( c.longitude ) - radians(?) ) +sin( radians(?) ) * sin( radians( c.latitude ) ) ) ) AS distance FROM models.City c HAVING distance < ? ORDER BY distance ASC] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:29:09.813

尝试在您的查询中更改`HAVING`为, 。`WHERE`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T06:29:41.263

仅当您使用 GROUP BY 时才允许使用关键字 HAVING（考虑使用 WHERE 表示 GROUPS）。请参阅 SELECT 语法的[参考手册](http://dev.mysql.com/doc/refman/5.1/en/select.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-10T20:15:04.660

唯一的方法是使用本机查询，因为：

*   subselect 是不可能的：“请注意，HQL 子查询只能出现在 select 或 where 子句中。” [http://docs.jboss.org/hibernate/core/4.3/manual/en-US/html_single/#queryhql-subqueries](http://docs.jboss.org/hibernate/core/4.3/manual/en-US/html_single/#queryhql-subqueries)
*   没有 group by 是不可能的
*   哪里也不可能

Java代码：

```
@Query(value = "SELECT s.*,\n" +
            "  (\n" +
            "    3959 * acos(\n" +
            "        cos(radians(s.lat))\n" +
            "        * cos(radians(:lat))\n" +
            "        * cos(radians(:lon) - radians(s.lon))\n" +
            "        + sin(radians(s.lat))\n" +
            "          * sin(radians(:lat))\n" +
            "    )\n" +
            "  ) AS distance\n" +
            "FROM Stop s\n" +
            "HAVING distance < 30\n" +
            "ORDER BY distance asc", nativeQuery = true)
    List<Stop> findClosestStops(@Param("lat") Double lat, @Param("lon") Double lon); 
```

另一种方法是返回包含城市+距离的对象列表，但在哪里不可能，但您可以限制结果集

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T14:14:43.803

尝试

```
 select dis.c,dis.distance(
    SELECT c,
     ( 3959 * acos( cos( radians(?) ) *  cos( radians( c.latitude ) ) * 
cos( radians( c.longitude ) - radians(?) ) + sin( radians(?) ) *
 sin( radians( c.latitude ) ) ) )  AS distance FROM City c  ) dis 
where dis.distance<? order by dis.distance ASC 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T06:31:20.030

嗯，应该是什么“？” 范围？

如果为真，您应该像这样使用它

```
HAVING distance < :distance 
```

并使用

```
query.setParameter("distance", 50); 
```

# java - 如何在 Spring 3.0 中使用方法拦截器？

> ID：10118453
> 
> 赞同：2
> 
> 时间：2012-04-12T06:26:38.877
> 
> 标签：java, interceptor, spring-3

Spring 3.0 中可以使用哪个拦截器？我想在其中获取操作名称和方法名称。

HandlerInterceptorAdapter 正在工作，但我无法在此获取方法名称和操作名称..

任何帮助..？

## 调度程序-servlet.xml

```
<!-- Handle Interceptor -->
<mvc:interceptors> <bean   class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor" 
    /> <mvc:interceptor> <mvc:mapping path="/*" /> 
<bean class="com.asd.MyInterceptor" 
    /> 
</mvc:interceptor> </mvc:interceptors> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:56:20.590

实现 HandlerInterceptor 接口。该接口的 preHandle 和 postHandle 方法中的参数之一是对象处理程序。它实际上是一个 HandlerMethod 实例，它应该为您提供所需的一切。

# wpf - 如何移动 TabControl 的 TabItem？

> ID：10118455
> 
> 赞同：0
> 
> 时间：2012-04-12T06:26:44.117
> 
> 标签：wpf, tabcontrol

```
<Border Background="#FF260F54">
    <TabControl Name="MyTabCtrl" SelectionChanged="MyTabCtrl_SelectionChanged" >
        <TabItem Name="TItem01" Header="01">
            <TextBlock>TItem01</TextBlock>
        </TabItem>
        <TabItem Name="TItem02" Header="02">
            <TextBlock>TItem02</TextBlock>
        </TabItem>
    </TabControl>
</Border> 
```

我想让 TItem01 向左移动 200 像素，然后显示 TItem02。我该怎么办？请帮我。非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:44:09.323

不知道这是否是最简单的方法，但我会修改默认的 TabControl 样式：

```
<SolidColorBrush x:Key="WindowBackgroundBrush" Color="#FFF" />
<SolidColorBrush x:Key="SolidBorderBrush" Color="#888" />
<SolidColorBrush x:Key="DisabledForegroundBrush" Color="#888" />
<SolidColorBrush x:Key="DisabledBorderBrush" Color="#AAA" />
<Style  TargetType="{x:Type TabControl}">
    <Setter Property="OverridesDefaultStyle" Value="True" />
    <Setter Property="SnapsToDevicePixels" Value="True" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type TabControl}">
                <Grid KeyboardNavigation.TabNavigation="Local">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <TabPanel 
                        Name="HeaderPanel"
                        Grid.Row="0"
                        Panel.ZIndex="1" 
                        Margin="200,0,4,-1" 
                        IsItemsHost="True"
                        KeyboardNavigation.TabIndex="1"
                        Background="Transparent" />
                    <Border 
                        Name="Border" 
                        Grid.Row="1" 
                        Background="{StaticResource WindowBackgroundBrush}" 
                        BorderBrush="{StaticResource SolidBorderBrush}" 
                        BorderThickness="1" 
                        CornerRadius="2" 
                        KeyboardNavigation.TabNavigation="Local"
                        KeyboardNavigation.DirectionalNavigation="Contained"
                        KeyboardNavigation.TabIndex="2" >
                        <ContentPresenter 
                            Name="PART_SelectedContentHost"
                            Margin="4"
                            ContentSource="SelectedContent" />
                    </Border>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Foreground" Value="{StaticResource DisabledForegroundBrush}" />
                        <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource DisabledBorderBrush}" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

注意?中`TabPanel`元素的 Margin 属性。`ContolTemplate`该边距决定了标签的开始位置。默认为 0,0,4,-1，我将其修改为 200,0,4,-1 以符合您的要求。

如果你想知道我是如何制作这种风格的，有几种方法。最简单的方法是使用 Expression Blend。它有一个选项可以“破坏”您的控件并公开它的所有默认部分和样式。另一种方法是在 MSDN 中搜索 ControlTemplates，因为它们是公开的。（我用的是第二种方法）

# xcode - Facebook iOS SDK 无法与 iOS5 和情节提要一起使用

> ID：10118458
> 
> 赞同：0
> 
> 时间：2012-04-12T06:27:02.870
> 
> 标签：xcode, facebook, facebook-graph-api, ios5, storyboard

我按照此链接中的说明进行操作 [https://developers.facebook.com/docs/mobile/ios/build/](https://developers.facebook.com/docs/mobile/ios/build/)

我创建了一个 iOS Facebook SDK 静态库，编译器一直说 iniWithAppId 和 Delegate 方法有问题

错误日志

2012-04-12 14:11:10.569 comman[2609:f803]-[Facebook initWithAppId:withDelegate:]：无法识别的选择器发送到实例 0x68970e0

2012-04-12 14:11:10.572 comman[2609:f803] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[Facebook initWithAppId:withDelegate:]：无法识别的选择器发送到实例 0x68970e0”

*** First throw call stack: (0x13d7052 0x1568d0a 0x13d8ced 0x133df00 0x133dce2 0x209a 0x2c9d6 0x2d8a6 0x3c743 0x3d1f8 0x30aa9 0x12c1fa9 0x13ab1c5 0x1310022 0x130e90a 0x130ddb4 0x130dccb 0x2d2a7 0x2ea9b 0x1ff2 0x1f65)

终止调用抛出异常sharedlibrary apply-load-rules all

当前语言：自动；目前客观-c

(gdb)

```
#import <UIKit/UIKit.h>
#import "FBConnect.h"
@interface AppDelegate : UIResponder <UIApplicationDelegate, FBSessionDelegate>{
           Facebook *facebook;
}

@property (strong, nonatomic) UIWindow *window;
@property (nonatomic, retain) Facebook *facebook;

@end 
```

以上是我的应用程序委托标头，这是我的应用程序委托实现文件

```
#import "AppDelegate.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize facebook;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    facebook = [[Facebook alloc] initWithAppId:@"215686948531995" withDelegate:self];

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if([defaults objectForKey:@"FBAccessTokenKey"] && [defaults objectForKey:@"FBExpirationDateKey"]){
        facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
        facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
}

   // NSArray *permissions = [[NSArray arrayWithObjects:@"read_stream", @"publish_stream", @"offline_access", nil]retain];
    if(![facebook isSessionValid]){
        [facebook authorize:nil];
    }
    // Override point for customization after application launch.
    return YES;
} 
```

facebook 开发人员演示的方法是否仅适用于 xcode 4 或 ios 4.3？谁能给我一些建议，如何为ios5故事板编写类：3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:07:41.550

```
static NSString* kAppId = @"yourAppId";

_facebook = [[Facebook alloc] initWithAppId:kAppId andDelegate:self]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T04:47:33.050

我昨天自己实现了这个，它运行良好（静态 Facebook 库，使用 Storyboards）。我能看到的唯一区别（这会导致问题）是你打电话给：

```
facebook = [[Facebook alloc] initWithAppId:@"215686948531995" withDelegate:self]; 
```

我打电话给：

```
facebook = [[Facebook alloc] initWithAppId:@"215686948531995" andDelegate:self]; 
```

我相信使用`withDelegate`而不是的`andDelegate`错误会给你这个错误。

# java - Hibernate：实现 POP 方法

> ID：10118463
> 
> 赞同：0
> 
> 时间：2012-04-12T06:27:37.627
> 
> 标签：java, hibernate

我想在数据访问层中实现经典的 POP 方法：在内存中检索一些对象并将其从数据库中删除。问题是如果我在检索后删除它就不能在代码中使用它，那么有什么解决办法吗？

现在我在对对象进行一些操作后在代码中删除它。

谢谢

更新#1：

```
public Notification pop() {
    Session session = HibernateUtil.getSessionFactory().getCurrentSession();

    return (Notification) session.createCriteria(Notification.class)
        .uniqueResult();
} 
```

我想在检索对象后删除它，但仍然可以在我的代码中访问它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:52:04.600

我想我知道你想说什么。您应该为您的`Notification`类创建一个复制构造函数并执行以下操作：

```
public Notification popAndRemove(){
    Session session = HibernateUtil.getSessionFactory().getCurrentSession();

    Notification notification = session.createCriteria(Notification.class)
        .uniqueResult();    

    Notification newNotification = new Notification(notification);

    session.delete(notification);
    return newNotification;
} 
```

# javascript - Jstree 延迟加载和展开所有问题

> ID：10118465
> 
> 赞同：2
> 
> 时间：2012-04-12T06:27:46.677
> 
> 标签：javascript, lazy-loading, jstree

我们在同时使用延迟加载功能和 open_all 功能时遇到了问题。

树的内容是使用延迟加载功能加载的。

当我们选择一个节点并单击全部展开按钮时，该节点的所有子节点将使用 jstree ajax 调用获取并使用 open_all 函数打开，当单击全部折叠按钮时，我们使用 close_all 函数。这是第一次完美运行。

但是第二次，当我们在同一个节点上单击全部展开时，递归地点击相同的 ajax url。（我们认为，每次使用 open_all 打开节点时都会点击 url）。预期的行为不是调用 url（因为数据已经加载），只应该执行 open_all 函数。

你能否澄清如何解决这个问题

//加载树的代码

```
 $("#TreePanel").jstree({
    "xml_data" : {
        "ajax" : {
            "url" : "/ajax/loadTree",
            "type" : "post",
            "data" : function(node) {
                var data = {};              
                data.dunsNumber = ${dunsNumber};
                if (node == -1) {
                    //set duns number to data
                } else {
                    data.selectedNodeId = node.attr("id");
                    data.expandAll = isExpandAll;
                }
                return data;
            },
            "success" : function(data) {
                if ($(data).attr('id') == 'error') {
                    $("#overlayContent").empty();                       
                } else {
                    return data;
                }
            }
         },
         "xsl" : "nest"
    },  
    "plugins" : [ "themes", "xml_data" ]  
});

        //code to expand all nodes

       $("#ufvExpandAll").bind("click", function() {
    isExpandAll= true;
    $("#TreePanel").jstree("open_all", selectedNode);
    isExpandAll= false;
  });

      //code to collapse all nodes

$("#ufvCollapseAll").bind("click", function() {
    $("#TreePanel").jstree("close_all", selectedNode);
});

    //code to get the node and set on a variable on clicking a node

      var selectedNode;
$("#TreePanel").delegate("a", "click", function(e, data) {
    var node = $(e.target).closest("li");
    if (selectedNode != undefined && selectedNode != null) {
        $("#" + selectedNode.id + " > a").removeClass("jstree-default-             selected-node");
    }
    selectedNode = node[0];
    $("#" + selectedNode.id + " > a").addClass("jstree-default-selected-                 node");
        $("#ufvExpandAll").attr("disabled", false);
    $("#ufvCollapseAll").attr("disabled", false);
    return false;
}); 
```

提前致谢

问候哈里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:59:36.643

在执行逻辑以加载子节点之前，尝试检查节点以查看它是否有任何预先存在的子节点。

```
.bind("open_node.jstree", function (event, data) {
  var node = $(data.rslt.obj);
  var children = $.jstree._reference(node)._get_children(node);
  if (children.length==0){
    //node is empty, so do node open logic here
  }
}) 
```

# model-view-controller - EmberJS：在相当复杂的应用程序中很好地分离模型、存储、控制器、视图的关注点？

> ID：10118466
> 
> 赞同：10
> 
> 时间：2012-04-12T06:27:51.203
> 
> 标签：model-view-controller, store, ember.js, separation-of-concerns

我正在做一个相当复杂的 emberjs 应用程序，并将其绑定到 API 的后端。

API 调用通常不绑定到任何特定模型，但可能会在响应的不同部分返回各种类型的对象，例如，对事件 API 的调用将返回事件，但也会返回媒体资产和参与这些事件的个人。

我刚刚开始这个项目，我想获得一些专家指导，了解如何最好地分离关注点以拥有一个干净的可维护代码库。

我接近这个的方式是：

*   *模型*：本质上是处理带有字段和其他计算属性的记录。但是，模型不负责提出请求。
    *   例如个人、事件、图片、帖子等。
*   *商店*：它们本质上是缓存。例如， an`eventStore`会将迄今为止从服务器接收到的所有事件（可能来自不同的请求）存储在一个数组中，并且还存储在由 . 索引的事件的哈希中`id`。
    *   例如个人商店、事件商店等。
*   *控制器*：它们与一组相关的 API 调用相关联，例如 eventsController 将负责获取事件或特定事件，或创建新事件等。它们会将响应“路由”到不同的响应以`stores`供以后检索。一旦发送到商店，他们就不会保留回复。
    *   例如 eventsController、userSearchController 等。
*   *视图*：它们与特定视图相关联。一般来说，我的应用程序可能在不同的地方有几个视图，例如`latestEventsView`在仪表板上，除了有一个单独的事件页面。
*   *模板*：就是它们。

很多时候，我的模板需要直接绑定到商店（例如`peopleView`，想要在一个列表中列出 individualStore 中的所有个人，按某种顺序排序）。

有时，它们绑定到计算属性

```
alivePeople: function () { ... }.property('App.individualStore.content.@each'), 
```

视图中“选择”的各种过滤和排序选项应该从商店返回不同的列表。[您可以在什么是正确的 emberjs 在各种过滤选项之间切换的方式中](https://stackoverflow.com/questions/9909803/what-is-the-right-emberjs-way-to-switch-between-various-filtering-options)看到我的最后一个问题？

谁应该做这个过滤，视图本身还是商店？

这种跨层的绑定可以吗，还是有代码味道？关注点分离是好的，还是我错过了什么？控制器不应该在这里做更多的事情吗？我的视图应该直接绑定到商店吗？

MVC 的任何特殊情况更适合我的需求吗？

**2012 年 4 月 17 日更新** 我的研究还在继续，特别是来自[http://vimeo.com/user7276077/videos](http://vimeo.com/user7276077/videos)和[http://jzajpt.github.com/2012/01/17/emberjs-app-architecture.html](http://jzajpt.github.com/2012/01/17/emberjs-app-architecture.html)和[http:// /jzajpt.github.com/2012/01/24/emberjs-app-architecture-data.html](http://jzajpt.github.com/2012/01/24/emberjs-app-architecture-data.html)

我发现的一些设计问题是：

*   发出请求的控制器（商店或模型或其他东西应该这样做，而不是控制器）
*   缺少状态图——它们对于视图控制器交互很重要（有时你意识到你的交互不再简单）

这是一个很好的状态图示例：[https ://github.com/DominikGuzei/ember-routing-statechart-example](https://github.com/DominikGuzei/ember-routing-statechart-example)

**2013 年 1 月 9 日更新**

是的，它已经很久了，但是这个问题最近得到了很多观点，这就是为什么我想编辑它，以便人们可以理解。

自从提出这个问题以来，Ember 的环境发生了很大的变化，新的[指南](http://emberjs.com/guides/)也有了很大的改进。EmberJS 已经提出了约定（如 Rails），并且 MVC 现在定义得更好。

任何仍然困惑的人都应该阅读所有指南，并观看一些视频： [Seattle Ember.js Meetup](http://www.youtube.com/watch?v=4Ed_o3_59ME)

目前，我正在将我的应用程序升级到`Ember.js 1.0.0-pre2`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T06:35:01.040

*   您应该根据状态来考虑您的应用程序。看看[这个](https://speakerdeck.com/trek/applications-a-series-of-states)

*   最初，只需要一个路由和一个模板来描述一些东西并最终在浏览器中显示它，这就是 Emberjs 的新 API 试图强制执行的。随着您的需求变得更加详细，您可以添加视图、控制器或对象。虽然每个都回答了一个特定的需求。

*   如果您需要处理任何浏览器事件或包装
    您用于动画、样式设置的任何 3rd 方 JavaScript 库，请考虑使用视图。

*   如果您需要捕获特定于域的
    信息，请考虑使用对象，最有可能模仿后端信息。

*   控制器只是域对象的代理，可以封装与对象无关的逻辑。

这就是它的全部。如果你学会了如何根据状态来设计你的应用程序，那么其余的都将落入正确的位置，前提是你使用的是最新的 api，并执行我之前提到的规则。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T08:23:54.627

自从带有新路由器实现的 Ember 1.0.0-pre4 发布以来，我已经看到两个很好的参考资料描述了标准化的 EmberJS 应用程序结构。

熟悉 Rails 的人会发现它相当熟悉。

[https://github.com/trek/ember-todos-with-build-tools-tests-and-other-modern-conveniences](https://github.com/trek/ember-todos-with-build-tools-tests-and-other-modern-conveniences)

[http://reefpoints.dockyard.com/ember/2013/01/07/building-an-ember-app-with-rails-api-part-1.html](http://reefpoints.dockyard.com/ember/2013/01/07/building-an-ember-app-with-rails-api-part-1.html)

[https://github.com/emberjs/ember-rails](https://github.com/emberjs/ember-rails)上的 ember-rails 项目包含一个 Rails 生成器，用于创建与上述两个链接中描述的结构基本相同的 EmberJS 应用程序目录结构。

EmberJS 指南现在还描述了新的路由结构。[http://emberjs.com/guides/](http://emberjs.com/guides/)

更新 21/08/2013

如果您使用的是 Rails，那么 ember-rails gem 非常棒。我已经成功地使用了它。ember 社区内有两项努力来协助提供标准化的 ember 应用程序布局。显然它们将被合并，但现在检查一下：

[https://github.com/rpflorence/ember-tools](https://github.com/rpflorence/ember-tools)

[https://github.com/stefanpenner/ember-app-kit](https://github.com/stefanpenner/ember-app-kit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T08:14:50.163

另请参阅此[http://addyosmani.com/largescalejavascript/](http://addyosmani.com/largescalejavascript/) 它不是特别关于 EmberJs，但它是一篇很棒的文章，让您了解如何编写大规模 javascript 应用程序。

# csv - 如何限制 grep 仅搜索 CSV 文件中的一列，但输出完整的匹配行？

> ID：10118468
> 
> 赞同：5
> 
> 时间：2012-04-12T06:27:54.243
> 
> 标签：csv, grep

如何`grep`在 CSV 文件中仅搜索一列，但在找到匹配项后输出整行？例如：

```
fish @ eats worms
bear @ eats fish 
```

`fish`在第 2 列中搜索将输出： `bear @ eats fish`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T06:33:07.810

...使用 awk...

```
awk -F@ '{if ($2 ~ /fish/) { print $0; }}' <input file> 
```

要使用 shell 变量，将单引号更改为双引号并转义 awk 变量（soo awk 仍然看到 $2 等，而不是 shell 对它们的扩展。

```
awk -F@ "{if (\$2 ~ /$find_me/ ) { print \$0; } }" <input_file> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-08-17T14:23:23.023

使用`grep`：

```
grep ^.*@.*fish.*$ file.txt 
```

# sql - 检查条件而不是重复 Case When 的更好方法

> ID：10118471
> 
> 赞同：3
> 
> 时间：2012-04-12T06:27:59.937
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

这是我的表：

```
[Member]: 
{ [Id], [UserId], [UserName], [Email], [Status_Id], [MemberType_Id] }

[CustomerProfile] :
{ [Id], [Member_Id], [FirstName], [LastName], [SSN], [Gender], [PostalCode],[City_Id], [Address]}

[DealerProfile]:
{ [Id], [Member_Id], [FirstName], [LastName], [SSN], [Gender], [StoreName], [PostalCode], [City_Id], [Address] }

[ManagerProfile]
{ [Id], [Member_Id], [FirstName], [LastName], [SSN], [Gender] }

[City]:
{ [Id], [Title], [Province_Id] } 
```

所以我需要创建所有成员和相关列的完整视图，我将从以下选择查询开始：

```
SELECT     
[ME].[Id] AS [MemberId],
[ME].[UserId],
[ME].[UserName],
[ME].[Email],
[ME].[Status_Id],
[ST].[Title] AS [Status],
[ME].[MemberType_Id],
[MT].[Title] AS [MemberType],

CASE
    WHEN [ME].[MemberType_Id] = (SELECT TOP(1) [TMT].[Id] FROM [Members].[MemberType] AS [TMT] WHERE [TMT].[Title]='Customer') THEN [CUP].[Id] 
    WHEN [ME].[MemberType_Id] = (SELECT TOP(1) [TMT].[Id] FROM [Members].[MemberType] AS [TMT] WHERE [TMT].[Title]='Dealer') THEN [DEP].[Id]
    WHEN [ME].[MemberType_Id] = (SELECT TOP(1) [TMT].[Id] FROM [Members].[MemberType] AS [TMT] WHERE [TMT].[Title]='Manager') THEN [MAP].[Id] 
    ELSE 0 END AS [Profile_Id],
CASE
    WHEN [ME].[MemberType_Id] = (SELECT TOP(1) [TMT].[Id] FROM [Members].[MemberType] AS [TMT] WHERE [TMT].[Title]='Customer') THEN [CUP].[FirstName]
    WHEN [ME].[MemberType_Id] = (SELECT TOP(1) [TMT].[Id] FROM [Members].[MemberType] AS [TMT] WHERE [TMT].[Title]='Dealer') THEN [DEP].[FirstName]
    WHEN [ME].[MemberType_Id] = (SELECT TOP(1) [TMT].[Id] FROM [Members].[MemberType] AS [TMT] WHERE [TMT].[Title]='Manager') THEN [MAP].[FirstName]
    ELSE 'Unknown' END AS [FirstName],
CASE
    WHEN [ME].[MemberType_Id] = (SELECT TOP(1) [TMT].[Id] FROM [Members].[MemberType] AS [TMT] WHERE [TMT].[Title]='Customer') THEN [CUP].[LastName]
    WHEN [ME].[MemberType_Id] = (SELECT TOP(1) [TMT].[Id] FROM [Members].[MemberType] AS [TMT] WHERE [TMT].[Title]='Dealer') THEN [DEP].[LastName]
    WHEN [ME].[MemberType_Id] = (SELECT TOP(1) [TMT].[Id] FROM [Members].[MemberType] AS [TMT] WHERE [TMT].[Title]='Manager') THEN [MAP].[LastName]
    ELSE 'Unknown' END AS [LastName],
CASE
    WHEN [ME].[MemberType_Id] = (SELECT TOP(1) [TMT].[Id] FROM [Members].[MemberType] AS [TMT] WHERE [TMT].[Title]='Customer') THEN [CUP].[SSN]
    WHEN [ME].[MemberType_Id] = (SELECT TOP(1) [TMT].[Id] FROM [Members].[MemberType] AS [TMT] WHERE [TMT].[Title]='Dealer') THEN [DEP].[SSN]
    WHEN [ME].[MemberType_Id] = (SELECT TOP(1) [TMT].[Id] FROM [Members].[MemberType] AS [TMT] WHERE [TMT].[Title]='Manager') THEN [MAP].[SSN]
    ELSE 'Unknown' END AS [SSN],
CASE
    WHEN [ME].[MemberType_Id] = (SELECT TOP(1) [TMT].[Id] FROM [Members].[MemberType] AS [TMT] WHERE [TMT].[Title]='Customer') THEN [CUP].[Address]
    WHEN [ME].[MemberType_Id] = (SELECT TOP(1) [TMT].[Id] FROM [Members].[MemberType] AS [TMT] WHERE [TMT].[Title]='Dealer') THEN [DEP].[Address]
    WHEN [ME].[MemberType_Id] = (SELECT TOP(1) [TMT].[Id] FROM [Members].[MemberType] AS [TMT] WHERE [TMT].[Title]='Manager') THEN ''
    ELSE 'Unknown' END AS [Address],
CASE
    WHEN [ME].[MemberType_Id] = (SELECT TOP(1) [TMT].[Id] FROM [Members].[MemberType] AS [TMT] WHERE [TMT].[Title]='Customer') THEN [CUP].[PostalCode]
    WHEN [ME].[MemberType_Id] = (SELECT TOP(1) [TMT].[Id] FROM [Members].[MemberType] AS [TMT] WHERE [TMT].[Title]='Dealer') THEN [DEP].[PostalCode]
    WHEN [ME].[MemberType_Id] = (SELECT TOP(1) [TMT].[Id] FROM [Members].[MemberType] AS [TMT] WHERE [TMT].[Title]='Manager') THEN ''
    ELSE 'Unknown' END AS [PostalCode],
CASE
    WHEN [ME].[MemberType_Id] = (SELECT TOP(1) [TMT].[Id] FROM [Members].[MemberType] AS [TMT] WHERE [TMT].[Title]='Customer') THEN [CUP].[Gender]
    WHEN [ME].[MemberType_Id] = (SELECT TOP(1) [TMT].[Id] FROM [Members].[MemberType] AS [TMT] WHERE [TMT].[Title]='Dealer') THEN [DEP].[Gender]
    WHEN [ME].[MemberType_Id] = (SELECT TOP(1) [TMT].[Id] FROM [Members].[MemberType] AS [TMT] WHERE [TMT].[Title]='Manager') THEN [MAP].[Gender]
    ELSE 'Unknown' END AS [Gender],
CASE
    WHEN [ME].[MemberType_Id] = (SELECT TOP(1) [TMT].[Id] FROM [Members].[MemberType] AS [TMT] WHERE [TMT].[Title]='Customer') THEN [CUP].[City_Id]
    WHEN [ME].[MemberType_Id] = (SELECT TOP(1) [TMT].[Id] FROM [Members].[MemberType] AS [TMT] WHERE [TMT].[Title]='Dealer') THEN [DEP].[City_Id]
    WHEN [ME].[MemberType_Id] = (SELECT TOP(1) [TMT].[Id] FROM [Members].[MemberType] AS [TMT] WHERE [TMT].[Title]='Manager') THEN 0
    ELSE 0 END AS [CityId]

FROM [Members].[Member] AS [ME]
INNER JOIN [Members].[MemberType] AS [MT] ON [ME].[MemberType_Id] = [MT].[Id]
INNER JOIN [Members].[Status] AS [ST] ON [ME].[Status_Id]=[ST].[Id]
INNER JOIN [Members].[ManagerProfile] AS [MAP] ON [ME].[Id]= [MAP].[Member_Id]
INNER JOIN [Members].[CustomerProfile] AS [CUP] ON [ME].[Id]=[CUP].[Member_Id]
INNER JOIN [Members].[DealerProfile] AS [DEP] ON [ME].[Id]=[DEP].[Member_Id];
GO 
```

如您所见，重复 Case When 以查找成员类型并决定从哪个表中选择值。创建像我的视图这样的视图是个好主意吗？有没有更好的方法来检查会员类型？我应该提到表中的 Id 列`MemberType`可以更改，所以我不想使用这样的东西： `WHEN [ME].[MemberType_Id] = 1 Then ''`你的建议是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:28:05.027

我想这会对你有所帮助

```
SELECT     
[ME].[Id] AS [MemberId],
[ME].[UserId],
[ME].[UserName],
[ME].[Email],
[ME].[Status_Id],
[ST].[Title] AS [Status],
[ME].[MemberType_Id],
[MT].[Title] AS [MemberType],
[X].[Id] AS [Profile_Id], 
[X].[FirstName],
[X].[LastName],
[X].[SSN],
[X].[Address],
[X].[PostalCode],
[X].[Gender],
[X].[City_Id]
FROM [Members].[Member] AS [ME]
INNER JOIN [Members].[MemberType] AS [MT] ON [ME].[MemberType_Id] = [MT].[Id]
INNER JOIN [Members].[Status] AS [ST] ON [ME].[Status_Id]=[ST].[Id]
INNER JOIN 
    (Select [Member_Id], [Id], [FirstName], [LastName], [SSN], [Address]='', [PostalCode]='', [Gender], [City_Id]=0,
        [TYPE] = (SELECT TOP(1) [TMT].[Id] FROM [Members].[MemberType] AS [TMT] WHERE [TMT].[Title]='Customer') 
        From [Members].[ManagerProfile] AS [MAP] Where [MAP].[Member_Id] = [ME].[Id]
    Union All
    Select [Member_Id], [Id], [FirstName], [LastName], [SSN], [Address], [PostalCode], [Gender], [City_Id], 
        [TYPE] = (SELECT TOP(1) [TMT].[Id] FROM [Members].[MemberType] AS [TMT] WHERE [TMT].[Title]='Manager') 
    From [Members].[CustomerProfile] AS [CUP] Where [CUP].[Member_Id] = [ME].[Id]
    Union All
    Select [Member_Id], [Id], [FirstName], [LastName], [SSN], [Address], [PostalCode], [Gender], [City_Id], 
        [TYPE] = (SELECT TOP(1) [TMT].[Id] FROM [Members].[MemberType] AS [TMT] WHERE [TMT].[Title]='Dealer') 
    From [Members].[DealerProfile] AS [DEP] Where [DEP].[Member_Id] = [ME].[Id])
     AS [X] On [ME].[Id] = [X].[Member_Id] AND [ME].[MemberType_Id] = [X].[TYPE]
 GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:02:28.317

如果您假设经理、客户和经销商在同一张表中，事情会变得更简单：

```
SELECT     
    [ME].[Id] AS [MemberId],
    [ME].[UserId],
    [ME].[UserName],
    [ME].[Email],
    [ME].[Status_Id],
    [ST].[Title] AS [Status],
    [ME].[MemberType_Id],
    [MT].[Title] AS [MemberType],
    a.ID,
    a.FirstName,
    a.LastName,
    a.SSN,
    a.Address,
    a.PostalCode,
    a.Gender,
    a.City_Id
FROM [Members].[Member] AS [ME]
INNER JOIN [Members].[MemberType] AS [MT] ON [ME].[MemberType_Id] = [MT].[Id]
INNER JOIN [Members].[Status] AS [ST] ON [ME].[Status_Id]=[ST].[Id]
INNER JOIN 
(
   select 'Manager' MemberType, Member_id, Firstname, LastName, SSN, 
          Address, PostalCode, Gender, City_id
     from ManagerProfile
   union all
   select 'Customer', Member_id, Firstname, LastName, SSN, 
          Address, PostalCode, Gender, City_id
     from CustomerProfile
   union all
   select 'Dealer', Member_id, Firstname, LastName, SSN, 
          '', '', Gender, 0
     from DealerProfile
)   
   on me.id = a.member_id
  and MT.TYPE = a.MemberType 
```

这清楚地表明您的所有经销商、经理和客户都属于同一个表，或者可能属于每个类型的表，具有用于公共数据的公共表。MemberTypeId 将作为鉴别器从成员移动到新表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T06:56:54.793

您也可以`CROSS JOIN`使用类型。您仍将比较`typid`'s 和`case`语句将更容易阅读。像这样：

```
SELECT     
[ME].[Id] AS [MemberId],
[ME].[UserId],
[ME].[UserName],
[ME].[Email],
[ME].[Status_Id],
[ST].[Title] AS [Status],
[ME].[MemberType_Id],
[MT].[Title] AS [MemberType],

CASE
    WHEN [ME].[MemberType_Id] = tblTypes.CustomerId THEN [CUP].[Id] 
    WHEN [ME].[MemberType_Id] = tblTypes.DealerId THEN [DEP].[Id]
    WHEN [ME].[MemberType_Id] = tblTypes.ManagerId THEN [MAP].[Id] 
    ELSE 0 END AS [Profile_Id],
CASE
    WHEN [ME].[MemberType_Id] = tblTypes.CustomerId THEN [CUP].[FirstName]
    WHEN [ME].[MemberType_Id] = (tblTypes.DealerId  THEN [DEP].[FirstName]
    WHEN [ME].[MemberType_Id] = tblTypes.ManagerId THEN [MAP].[FirstName]
    ELSE 'Unknown' END AS [FirstName],
CASE
    WHEN [ME].[MemberType_Id] = tblTypes.CustomerId THEN [CUP].[LastName]
    WHEN [ME].[MemberType_Id] = tblTypes.DealerId  THEN [DEP].[LastName]
    WHEN [ME].[MemberType_Id] = tblTypes.ManagerId THEN [MAP].[LastName]
    ELSE 'Unknown' END AS [LastName],
CASE
    WHEN [ME].[MemberType_Id] = tblTypes.CustomerId THEN [CUP].[SSN]
    WHEN [ME].[MemberType_Id] = tblTypes.DealerId  THEN [DEP].[SSN]
    WHEN [ME].[MemberType_Id] = tblTypes.ManagerId THEN [MAP].[SSN]
    ELSE 'Unknown' END AS [SSN],
CASE
    WHEN [ME].[MemberType_Id] = tblTypes.CustomerId THEN [CUP].[Address]
    WHEN [ME].[MemberType_Id] = tblTypes.DealerId  THEN [DEP].[Address]
    WHEN [ME].[MemberType_Id] = tblTypes.ManagerId THEN ''
    ELSE 'Unknown' END AS [Address],
CASE
    WHEN [ME].[MemberType_Id] = tblTypes.CustomerId THEN [CUP].[PostalCode]
    WHEN [ME].[MemberType_Id] = tblTypes.DealerId  THEN [DEP].[PostalCode]
    WHEN [ME].[MemberType_Id] = tblTypes.ManagerId THEN ''
    ELSE 'Unknown' END AS [PostalCode],
CASE
    WHEN [ME].[MemberType_Id] = tblTypes.CustomerId THEN [CUP].[Gender]
    WHEN [ME].[MemberType_Id] = tblTypes.DealerId  THEN [DEP].[Gender]
    WHEN [ME].[MemberType_Id] = tblTypes.ManagerId THEN [MAP].[Gender]
    ELSE 'Unknown' END AS [Gender],
CASE
    WHEN [ME].[MemberType_Id] = tblTypes.CustomerId THEN [CUP].[City_Id]
    WHEN [ME].[MemberType_Id] = tblTypes.DealerId  THEN [DEP].[City_Id]
    WHEN [ME].[MemberType_Id] = tblTypes.ManagerId THEN 0
    ELSE 0 END AS [CityId]

FROM [Members].[Member] AS [ME]
INNER JOIN [Members].[MemberType] AS [MT] ON [ME].[MemberType_Id] = [MT].[Id]
INNER JOIN [Members].[Status] AS [ST] ON [ME].[Status_Id]=[ST].[Id]
INNER JOIN [Members].[ManagerProfile] AS [MAP] ON [ME].[Id]= [MAP].[Member_Id]
INNER JOIN [Members].[CustomerProfile] AS [CUP] ON [ME].[Id]=[CUP].[Member_Id]
INNER JOIN [Members].[DealerProfile] AS [DEP] ON [ME].[Id]=[DEP].[Member_Id]
CROSS JOIN
    (
        SELECT
            CustomerId,
            DealerId,
            ManagerId
        FROM
            (
                SELECT 1 AS nbr
            ) AS tblType
        LEFT JOIN
            (
                SELECT TOP(1) 
                    [TMT].[Id]  AS CustomerId
                FROM 
                    [Members].[MemberType] AS [TMT] 
                WHERE 
                    [TMT].[Title]='Customer'
            ) AS Customer ON 1=1
        LEFT JOIN
            (
                SELECT TOP(1) 
                    [TMT].[Id]  AS DealerId
                FROM 
                    [Members].[MemberType] AS [TMT] 
                WHERE 
                    [TMT].[Title]='Dealer'
            ) AS Dealer ON 1=1
        LEFT JOIN
            (
                SELECT TOP(1) 
                    [TMT].[Id]  AS ManagerId
                FROM 
                    [Members].[MemberType] AS [TMT] 
                WHERE 
                    [TMT].[Title]='Manager'
            ) AS Manager ON 1=1
    ) AS tblTypes 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T06:48:36.963

那这个呢：

```
CASE
    WHEN [MT].[Title]='Customer' THEN [CUP].[FirstName]
    WHEN [MT].[Title]='Dealer' THEN [DEP].[FirstName]
    WHEN [MT].[Title]='Manager' THEN [MAP].[FirstName]
    ELSE 'Unknown' END AS [FirstName] 
```

# php - PHP 强制将计数器重置为 0

> ID：10118480
> 
> 赞同：0
> 
> 时间：2012-04-12T06:28:45.317
> 
> 标签：php, drupal

我有一个菜单项计数器，基本上将增量值作为一个类添加到菜单系统：

```
 <?php
    if ($element['#original_link']['depth'] == 1) {
      static $counter = 0;
      $counter++;
      $class = 'count-' .  $counter;
    }
    $output = 'some output code build';
    return '<li class="' . $class . '">' .$output .'</li>';
    ?> 
```

请注意，代码位于每个菜单项内（在循环或数组之外）。该代码将简单地输出无序列表的列表，没有 UL：

```
<li class="count-1">One</li>
<li class="count-2">Two</li>, ...etc. 
```

这工作正常，直到我更改菜单的来源。

1）。一种是使用我的CMS的系统菜单，

2）。后者正在使用该系统菜单的块输出，

并且两者都输出类似的菜单结构，除了后者从 #1 继续计数器而不是从 1 重置（尽管一旦 #2 接管该位置，#1 就不会被激活）。我还没弄清楚为什么，但似乎#2 是#1 的延续。虽然我希望每个都应该从 1 开始递增。

我不能在这里使用重置。除了我的 CMS 对计数器的处理方式之外，还有什么明显的我错过了 PHP 可以在这里处理的事情吗？

任何指针将不胜感激。谢谢

更新，实际使用的代码：

```
function mytheme_menu_link(array $variables) {
  //dpm($variables);
  $element = $variables['element'];
  $sub_menu = '';

  if ($element['#below']) {
    $sub_menu = drupal_render($element['#below']);
  }

  if ($element['#original_link']['menu_name'] == variable_get('menu_main_links_source', 'main-menu')) {
    if ($element['#original_link']['depth'] == 1) {     
       static $counter = 0;
       $counter++;                    
       $element['#attributes']['class'][] = 'count-' .  $counter;
    }
  }

  $output = l($element['#title'], $element['#href'], $element['#localized_options']);
  return '<li' . drupal_attributes($element['#attributes']) . '>' . $output . $sub_menu . "</li>\n";
}

/**
 * Implements theme_menu_tree()
    No helpful variables, except for a flattened render of tree
 */
function mytheme_menu_tree__main_menu($variables) {
  return '<ul class="menu">' . $variables['tree'] . '</ul>';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T06:48:43.247

使用`static`变量时，变量的值不会在相同代码的后续执行之间重置。这就是`static`. 如果您不想要这种行为，请摆脱它。

# facebook - 如何使用 GraphAPI 将提要分享到 Facebook？

> ID：10118493
> 
> 赞同：0
> 
> 时间：2012-04-12T06:29:35.740
> 
> 标签：facebook, facebook-graph-api, facebook-c#-sdk

我正在开发 Facebook 应用程序并想添加共享功能，那么我如何使用 Facebook 图形 API 来实现共享功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:02:43.647

顺便说一句，您可以使用“**赞”按钮**访问所需的 URL，但带有“推荐”标签。

更好的方法是使用一些授权开发应用程序以在用户的​​提要中发布。通过这种方式，您可以使用**[Graph API](https://graph.facebook.com/)**在用户的提要中发布。

如果这两种方法对您来说都太耗时，请尝试使用**[ShareThis](http://sharethis.com/)**。

# excel - 从 SSRS 导出到 excel 时，excel 中的页脚会失真

> ID：10118495
> 
> 赞同：2
> 
> 时间：2012-04-12T06:29:40.390
> 
> 标签：excel, reporting-services, export-to-excel

导出到 Excel 时的 SSRS 报告页脚格式失真。（见下图）![在此处输入图像描述](../Images/5a34670e5a5c66e44b1aec63422f8ba3.png)

有什么建议么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:35:51.020

我通过使用占位符（HTML）选项解决了这个问题，并为前三个字符串使用了一个文本框。

# php - 此代码如何生成正确的字符序列？

> ID：10118497
> 
> 赞同：1
> 
> 时间：2012-04-12T06:29:41.683
> 
> 标签：php, math, obfuscation, captcha

有问题的代码来自[MathGuard](http://www.codegravity.com/projects/mathguard)，这是一个 PHP 反垃圾邮件验证码脚本，需要用户回答一个简单的数学问题。它将数字和运算符符号显示为 3x5 随机字符矩阵。我理解代码是如何工作的，因为我可以遵循代码并理解它在做什么；我只是不明白人们将如何得出这个解决方案。

这个函数接受一个整数来描述 3x5 矩阵的一行并将其转换为一行随机字符：

```
function decToBin($dec) {
    $pattern = "123456789ABCDEFGHIJKLMNOPQRTSTUWXYZ";
    $output = "   ";
    $i = 0;
    do {
        if ($dec % 2) {
            $rand = rand() % 34;
            $output { 2 - $i } = $pattern { $rand };
        } else {
            $output { 2 - $i } = " ";
        }
        $dec = (int) ($dec / 2);
        $i++;
    } while ($dec > 0);
    $output = str_replace(" ", "&nbsp;", $output);
    return $output;
} 
```

以下是数字描述符：

```
$number = array (
    array ( 7, 5, 5, 5, 7 ), // 0
    array ( 2, 6, 2, 2, 7 ), // 1
    array ( 7, 1, 7, 4, 7 ), // 2
    array ( 7, 1, 7, 1, 7 ), // 3
    array ( 4, 5, 7, 1, 1 ), // 4
    array ( 7, 4, 7, 1, 7 ), // 5
    array ( 7, 4, 7, 5, 7 ), // 6
    array ( 7, 1, 1, 1, 1 ), // 7
    array ( 7, 5, 7, 5, 7 ), // 8
    array ( 7, 5, 7, 1, 7 )  // 9
); 
```

我的问题是：**如何得出这个结论和生成方法并知道例如`7`会生成一整行随机字符，并且`5`只生成最外面的字符？**

这只是代码混淆的一种形式吗？是什么让这种方法比将数字存储为字符串（例如`111101101101111`as `0`）并用`1`随机字符替换每个数字更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T06:34:01.127

对我来说看起来像一个简单的位图。

```
7 = 1 1 1
5 = 1 0 1
5 = 1 0 1
5 = 1 0 1
7 = 1 1 1

2 = 0 1 0
6 = 1 1 0
2 = 0 1 0
2 = 0 1 0
7 = 1 1 1 
```

# android - 获取名称在其他表中的表详细信息

> ID：10118498
> 
> 赞同：1
> 
> 时间：2012-04-12T06:29:42.260
> 
> 标签：android, sqlite

我有一张主桌

```
MainTable ( ID, Name ) 
```

Name 列包含数据库中其他表的名称。

我想要一个查询来从 MainTable 的 Name 列中引用其名称的表中获取所有信息。

例如：主表

```
ID 1，名称 A
ID 2，名称 B

```

表 A

```
~~~~ 价值观~~~~

```

表 B

```
~~~~ 价值观~~~~

```

当发送 1 的查询时，A 的所有值都应该出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:06:57.517

你不能用 SQLite，AFAIK 做到这一点。在应用程序级别处理此动态 SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:35:35.177

# T-SQL 查询

声明@sql nvarchar(max)

声明@table nvarchar(max)

声明@no int;

设置@no =1（动态传递）

set @table ='select tablename from table1 where id = '+@no+''

执行（@表）

set @sql = 'select * from '+@table+''

执行（@sql）

希望这有效。

请给我们真正的价值观，这样我们才能让它发挥作用:)

# java - 程序声明事务关闭后我无法进行操作

> ID：10118501
> 
> 赞同：1
> 
> 时间：2012-04-12T06:29:51.387
> 
> 标签：java, mysql

我正在尝试对数据库执行多个调用，第一个（选择）工作正常..但是当进入第二个时，我得到了这个错误

```
com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: No operations allowed after statement closed.
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:406)
    at com.mysql.jdbc.Util.getInstance(Util.java:381)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:984)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:926)
    at com.mysql.jdbc.StatementImpl.checkClosed(StatementImpl.java:380)
    at com.mysql.jdbc.StatementImpl.executeQuery(StatementImpl.java:1250)
    at MysqlConnect.main(MysqlConnect.java:77)
    at __SHELL13.run(__SHELL13.java:6)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at bluej.runtime.ExecServer$3.run(ExecServer.java:724) 
```

这是我的代码（请原谅仍在学习）

```
import java.sql.*;

public class MysqlConnect{

  public static void main(String[] args) {

  Connection conn = null;

  String url = "jdbc:mysql://localhost:3306/";
  String dbName = "MyBussiness";
  String driver = "com.mysql.jdbc.Driver";
  String userName = "mambo"; 
  String password = "jambo";

  try {
  Class.forName(driver).newInstance();
  conn = DriverManager.getConnection(url+dbName,userName,password);

  System.out.println("Connected to the database");
       /*SELECTING DATA */
       // Get a statement from the connection
       Statement stmt = conn.createStatement() ;
       System.out.println("--------------------------------------------.");
       System.out.println("Retrieving items from the customers table  (USING SELECT)...");
       System.out.println("--------------------------------------------.");
       Thread.sleep(2000);
       // Execute the query
       ResultSet rs = stmt.executeQuery( "SELECT * FROM customers" ) ;

       // Loop through the result set
       while( rs.next() )
       {
          System.out.print( rs.getInt(1) ) ;
          System.out.print(",      ");
          System.out.print( rs.getString(2) );
          System.out.print(",      ");
          System.out.print( rs.getString(3) );
          System.out.print(",      ");
          System.out.print( rs.getString(4) );
          System.out.print(",      ");
          System.out.print( rs.getString(5) );
          System.out.print(",      ");
          System.out.print( rs.getString(6) );
          System.out.print(",      ");
          System.out.print( rs.getString(7) );
          System.out.print(",      ");
          System.out.print( rs.getString(8) );
          System.out.print(",      ");
          System.out.print( rs.getString(9) );
          System.out.print(",      ");
          System.out.println( rs.getString(10) );
        }

       // Close the result set, statement and the connection
       rs.close() ;
       stmt.close() ;

         /*UPDATING DATA */
       // Get a statement from the connection
       conn = DriverManager.getConnection(url+dbName,userName,password);
       Statement stmt2 = conn.createStatement() ;
       System.out.println("---------------------------------------------------------------------------.");
       System.out.println("Updating Customers Table for Customer ID 1 Federico Gutierrez Address1 Field  (USING UPDATE)...");
       System.out.println("---------------------------------------------------------------------------.");
       Thread.sleep(2000);
       // Execute the query
       ResultSet rs2 = stmt.executeQuery("UPDATE Customers SET Address1='999 Mambo Avenue' WHERE CustomerID = 1");

       // Loop through the result set
       while( rs2.next() )
       {
          System.out.print( rs2.getInt(1) ) ;
          System.out.print(",      ");
          System.out.print( rs2.getString(2) );
          System.out.print(",      ");
          System.out.print( rs2.getString(3) );
          System.out.print(",      ");
          System.out.print( rs2.getString(4) );
          System.out.print(",      ");
          System.out.print( rs2.getString(5) );
          System.out.print(",      ");
          System.out.print( rs2.getString(6) );
          System.out.print(",      ");
          System.out.print( rs2.getString(7) );
          System.out.print(",      ");
          System.out.print( rs2.getString(8) );
          System.out.print(",      ");
          System.out.print( rs2.getString(9) );
          System.out.print(",      ");
          System.out.println(rs2.getString(10) );
        }

       // Close the result set, statement and the connection
       rs2.close() ;
       stmt2.close() ;

           /*INSERTING DATA */
       // Get a statement from the connection
       conn = DriverManager.getConnection(url+dbName,userName,password);
       Statement stmt3 = conn.createStatement() ;
       System.out.println("---------------------------------------------------------------------------.");
       System.out.println("Inserting a new customer (Mario Villalobos) into the customers table ... (USING INSERT)");
       System.out.println("---------------------------------------------------------------------------.");
       Thread.sleep(2000);
       // Execute the query
       ResultSet rs3 = stmt.executeQuery("INSERT INTO Customers (SSN, FirstName, LastName, Address1, Address2, State, City, Zip, PhoneNumber)"+ 
                                          " VALUES ('444559999','Mario','Villalobos','777 Boynton Beach','Apt 4R','FL','Boynton Beach','33436','(555)444-5555'");

       // Loop through the result set
       while( rs3.next() )
       {
          System.out.print( rs3.getInt(1) ) ;
          System.out.print(",      ");
          System.out.print( rs3.getString(2) );
          System.out.print(",      ");
          System.out.print( rs3.getString(3) );
          System.out.print(",      ");
          System.out.print( rs3.getString(4) );
          System.out.print(",      ");
          System.out.print( rs3.getString(5) );
          System.out.print(",      ");
          System.out.print( rs3.getString(6) );
          System.out.print(",      ");
          System.out.print( rs3.getString(7) );
          System.out.print(",      ");
          System.out.print( rs3.getString(8) );
          System.out.print(",      ");
          System.out.print( rs3.getString(9) );
          System.out.print(",      ");
          System.out.println(rs3.getString(10) );
        }

       // Close the result set, statement and the connection
       rs3.close() ;
       stmt3.close() ;

                  /*DELETING DATA */
       // Get a statement from the connection
       conn = DriverManager.getConnection(url+dbName,userName,password);
       Statement stmt4 = conn.createStatement() ;
       System.out.println("---------------------------------------------------------------------------.");
       System.out.println("Deleting customer where the name is George...  (USING Delete)");
       System.out.println("---------------------------------------------------------------------------.");
       Thread.sleep(2000);
       // Execute the query
       ResultSet rs4 = stmt.executeQuery("DELETE FROM Customers WHERE FirstName Like '%George%'");

       // Loop through the result set
       while( rs4.next() )
       {
          System.out.print( rs4.getInt(1) ) ;
          System.out.print(",      ");
          System.out.print( rs4.getString(2) );
          System.out.print(",      ");
          System.out.print( rs4.getString(3) );
          System.out.print(",      ");
          System.out.print( rs4.getString(4) );
          System.out.print(",      ");
          System.out.print( rs4.getString(5) );
          System.out.print(",      ");
          System.out.print( rs4.getString(6) );
          System.out.print(",      ");
          System.out.print( rs4.getString(7) );
          System.out.print(",      ");
          System.out.print( rs4.getString(8) );
          System.out.print(",      ");
          System.out.print( rs4.getString(9) );
          System.out.print(",      ");
          System.out.println(rs4.getString(10) );
        }

       // Close the result set, statement and the connection
       rs4.close() ;
       stmt4.close() ;

       //Reseting data
       conn = DriverManager.getConnection(url+dbName,userName,password);
       Statement stmt5 = conn.createStatement() ;
       ResultSet rs5 = stmt.executeQuery("UPDATE Customers SET Address1='555 YY Ave' WHERE CustomerID = 1");
       rs5.close() ;
       stmt5.close() ;

       conn = DriverManager.getConnection(url+dbName,userName,password);
       Statement stmt6 = conn.createStatement() ;
       ResultSet rs6 = stmt.executeQuery("DELETE FROM Customers WHERE FirstName Like '%Mario%'");
       rs6.close() ;
       stmt6.close() ;
       conn = DriverManager.getConnection(url+dbName,userName,password);     
       Statement stmt7 = conn.createStatement() ;
       ResultSet rs7 = stmt.executeQuery("INSERT INTO Customers (SSN, FirstName, LastName, Address1, Address2, State, City, Zip, PhoneNumber)"+ 
                                          " VALUES ('923431432','George','Scott','2325 S Babcock St',' ','FL','Melbourne','32901','(321)984-4910'");
       rs7.close() ;
       stmt7.close() ;
       conn.close() ;

  System.out.println("Disconnected from database");
  } catch (Exception e) {
  e.printStackTrace();
  }
  }
} 
```

任何帮助将非常感激。

注意：它告诉我连接在第一次通过后关闭，但我没有 conn.Close(); 如您所见，直到最后。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T06:35:29.183

```
ResultSet rs2 = stmt.executeQuery(...)
             // ^^^^ 
```

你的意思是`stmt2`那里。请重新检查您的所有代码，以确保您不会重复使用语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T06:36:47.653

如果您现在还没有发现它，那么您正在重新使用您已经关闭的同一个 SQlStatement。该行：

```
ResultSet rs2 = stmt.executeQuery("UPDATE Customers SET Address1='999 Mambo Avenue' WHERE CustomerID = 1"); 
```

应该：

```
ResultSet rs2 = stmt2.executeQuery("UPDATE Customers SET Address1='999 Mambo Avenue' WHERE CustomerID = 1"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T06:53:12.700

做了一些更正，但代码仍然不好。应该管用。

```
 import java.sql.*;

public class MysqlConnect{

  public static void main(String[] args) {

  Connection conn = null;

  String url = "jdbc:mysql://localhost:3306/";
  String dbName = "MyBussiness";
  String driver = "com.mysql.jdbc.Driver";
  String userName = "mambo"; 
  String password = "jambo";

  try {
  Class.forName(driver).newInstance();
  conn = DriverManager.getConnection(url+dbName,userName,password);

  System.out.println("Connected to the database");
       /*SELECTING DATA */
       // Get a statement from the connection
       Statement stmt = conn.createStatement() ;
       System.out.println("--------------------------------------------.");
       System.out.println("Retrieving items from the customers table  (USING SELECT)...");
       System.out.println("--------------------------------------------.");
       Thread.sleep(2000);
       // Execute the query
       ResultSet rs = stmt.executeQuery( "SELECT * FROM customers" ) ;

       // Loop through the result set
       while( rs.next() )
       {
          System.out.print( rs.getInt(1) ) ;
          System.out.print(",      ");
          System.out.print( rs.getString(2) );
          System.out.print(",      ");
          System.out.print( rs.getString(3) );
          System.out.print(",      ");
          System.out.print( rs.getString(4) );
          System.out.print(",      ");
          System.out.print( rs.getString(5) );
          System.out.print(",      ");
          System.out.print( rs.getString(6) );
          System.out.print(",      ");
          System.out.print( rs.getString(7) );
          System.out.print(",      ");
          System.out.print( rs.getString(8) );
          System.out.print(",      ");
          System.out.print( rs.getString(9) );
          System.out.print(",      ");
          System.out.println( rs.getString(10) );
        }

       // DO NOT Close the result set, statement and the connection

         /*UPDATING DATA */
       // Get a statement from the connection
       System.out.println("---------------------------------------------------------------------------.");
       System.out.println("Updating Customers Table for Customer ID 1 Federico Gutierrez Address1 Field  (USING UPDATE)...");
       System.out.println("---------------------------------------------------------------------------.");
       Thread.sleep(2000);
       // Execute the UPDATE
      stmt.executeUpdate("UPDATE Customers SET Address1='999 Mambo Avenue' WHERE CustomerID = 1");

       // Loop through the result set
      //NO ResultSet for UPDATE

       // DON'T Close the result set, statement and the connection

           /*INSERTING DATA */
       // Get a statement from the connection

       System.out.println("---------------------------------------------------------------------------.");
       System.out.println("Inserting a new customer (Mario Villalobos) into the customers table ... (USING INSERT)");
       System.out.println("---------------------------------------------------------------------------.");
       Thread.sleep(2000);
       // Execute the UPDATE
    stmt.executeUpdate("INSERT INTO Customers (SSN, FirstName, LastName, Address1, Address2, State, City, Zip, PhoneNumber)"+ 
                                          " VALUES ('444559999','Mario','Villalobos','777 Boynton Beach','Apt 4R','FL','Boynton Beach','33436','(555)444-5555'");

       // Loop through the result set INSERT HAS NO RESULTSET

       // Close the result set, statement and the connection

                  /*DELETING DATA */
       // Get a statement from the connection
       System.out.println("---------------------------------------------------------------------------.");
       System.out.println("Deleting customer where the name is George...  (USING Delete)");
       System.out.println("---------------------------------------------------------------------------.");
       Thread.sleep(2000);
       // Execute the query, NO UPDATE
       stmt.executeUpdate("DELETE FROM Customers WHERE FirstName Like '%George%'");

       // Loop through the result set

       // Close the result set, statement and the connection

       //Reseting data
       stmt.executeUpdate("UPDATE Customers SET Address1='555 YY Ave' WHERE CustomerID = 1");

       stmt.executeUpdate("DELETE FROM Customers WHERE FirstName Like '%Mario%'");

       stmt.executeUpdate("INSERT INTO Customers (SSN, FirstName, LastName, Address1, Address2, State, City, Zip, PhoneNumber)"+ 
                                          " VALUES ('923431432','George','Scott','2325 S Babcock St',' ','FL','Melbourne','32901','(321)984-4910'");

   // NOW CLOSE DB RS, STATEMENT, CONN
       rs.close() ;

       stmt.close() ;
       conn.close() ;

  System.out.println("Disconnected from database");
  } catch (Exception e) {
  e.printStackTrace();
  }
  }
} 
```

# objective-c - Objective-C 和组件编程

> ID：10118502
> 
> 赞同：3
> 
> 时间：2012-04-12T06:29:52.640
> 
> 标签：objective-c, components, cop

我正在尝试在编写我的 iOS 游戏时实现组件编程的概念。

在 Clemens Szyperski 的《组件软件：超越面向对象编程》一书中，他提到了一种策略：

（不是引用）从添加组件 Quack 的 Duck 类开始。Quack 类在调用它的任何对象上实现一个接口，该接口指定一个使用 Quacks quack() 的方法

使用此设置，Duck 对 Quack 没有任何参考或认识，除非它被实例化，并且此后从未在 Duck 中使用过。其他对象可以调用 duckObject.quack() 并在只知道 Duck 对象的情况下到达 Quack。

到目前为止，我一直在尝试实现这一点，但没有成功。最好，Duck 只需要实例化代码，其余代码放在 Quack 类中。这可以在 Objective-C 中完成（对于 iOS？），还是我最好离开 COP 使用其他语言？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:02:55.813

我认为在 ObjC 中没有确切的比较，但听起来你想研究[message forwarding](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtForwarding.html)。如果向对象发送了一条它没有响应的消息，则在发出错误信号之前，运行时会发送该对象`forwardInvocation:`，并带有一个`NSInvocation`封装消息和参数的参数。

在*中*`forwardInvocation:`，一个对象可以将调用传递给另一个处理该消息的对象。这允许一个实例响应 message ，即使它没有由 实现，通过持有对 的实例的引用，它确实实现了它：*`Duck``quack``quack``Duck``Quack`*

 *```
- (void)forwardInvocation:(NSInvocation *)anInvocation
{
    if( [myQuack respondsToSelector:[anInvocation selector]] ){
        [anInvocation invokeWithTarget:someOtherObject];
    }
    else{
        [super forwardInvocation:anInvocation];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:59:26.423

不太确定你的问题是什么。听起来你想要一个对类的弱引用。首先是鸭类

```
//Duck.h
#import "Quack.h"

@interface Duck : NSObject {
    Quack *quacker;
}

@property (nonatomic, retain) Quack *quacker;

@end

//Duck.m

@implementation Duck
@synthesize quarker;

-(id) init {
    self = [super init];

    if(self) {

    }

    return self;
}

-(Quack *)quacker {
    if(quacker == nil) {
        [self setQuacker:[[[Quack alloc] init] autorelease]];
    }

    return quacker;
}

@end 
```

然后实现 Quack 类。

```
//Quack.h

@interface Quack : NSObject {

}

-(void)quack;

@end

//Quack.m

@implementation Quack 

-(id) init {
    self = [super init];

    if(self) {

    }

    return self;
}

-(void)quack {
    NSLog(@"quack");
}
@end 
```

现在在你想要的任何课程中：

```
//RandomClass.m
[[[self duck] quacker] quack]; 
```*

# iphone - 如何使用表单文件（.number/.exl/.scv）作为我的 iOS 应用程序的数据源

> ID：10118508
> 
> 赞同：1
> 
> 时间：2012-04-12T06:30:13.133
> 
> 标签：iphone, ios, database, ipad

我有一些数据存储在一个数字文件，一个表中，我如何将它用作 iOS 应用程序中 tableView 的数据源

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:40:22.220

编写一个类来解析它们，并将该类设置为表视图的数据源（使用 UITableViewDataSource 协议中的方法）。谷歌告诉我 .number 文件是捆绑包，内容只是压缩的 XML。有很多可用于 iOS 的 XML 解析器。

# c# - 带有松散类型参数的 WCF OperationContract

> ID：10118513
> 
> 赞同：4
> 
> 时间：2012-04-12T06:30:21.450
> 
> 标签：c#, wcf, operationcontract

我想在我的 web 方法中有一个松散类型的参数。

我有一个场景，客户端可以将 25 个 DataContract 对象中的任何一个发送到 WCF 操作中，例如

```
proxy1.myFunction(PersonObject)
proxy1.myFunction(ComputerObject) 
```

我的限制是应该只有一个操作合同暴露给客户。

如何设计一个可以将 25 个 DataContract 类中的任何一个作为参数的 Web 方法？我尝试使用`object`参数类型并将`KnownType`属性赋予 DataContract 类，但在序列化过程中我没有运气。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T06:34:35.427

我刚刚做了这个，我发现你需要在界面中添加 KnownTypesAttribute。

```
[ServiceContract]
[ServiceKnownType(typeof(MyContract1)]
[ServiceKnownType(typeof(MyContract2)]
[ServiceKnownType(typeof(MyContract3)]
public interface IMyService
{
    [OperationContract]
    object TakeMessage();

    [OperationContract]
    void AddMessage(object contract);

} 
```

在您的实现中，您需要检查类型以确保它是您的 DataContract 之一。

**编辑**

如果你有很多合约，你可以使用反射将它们添加到 KnownTypes。

```
internal static class KnownTypeHelper
{
    public static IEnumerable<Type> GetKnownTypes(ICustomAttributeProvider provider = null)
    {
        var types = Assembly.GetExecutingAssembly().GetTypes().Where(a => a.Namespace == "Company.Path.To.DataContractsNamespace").ToArray();

        return types;
    }
} 
```

然后你可以将你的接口声明为，

```
[ServiceContract]
[ServiceKnownType("GetKnownTypes", typeof(KnownTypeHelper))]
public interface IMyService
{
    [OperationContract]
    object TakeMessage( );

    [OperationContract]
    void AddMessage(object contract);
} 
```

这是一种更清洁的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T06:38:28.773

你可以尝试的一件事是，创建一个像 IObj 这样的接口，并为 25 个不同的数据合约对象实现这个接口。然后对于你的操作合约，让参数类型为 IObj。这将帮助您发送 25 个参数。

# php - 如何在 JavaScript 和 php 中获取文本字段值以插入 SQL

> ID：10118514
> 
> 赞同：0
> 
> 时间：2012-04-12T06:30:21.527
> 
> 标签：php, javascript, ajax

我需要知道如何获取发送到 JavaScript 的文本字段中的值并在 Php 中请求它以插入 SQL。这是我的代码，

**文本归档：**

```
Applicant Number<input type="text" size="2"  placeholder="e.g. 5"  id="AppNum<?php $ApplicantID?>" name="AppNum<?php echo $ApplicantID?>"> 
```

**JavaScript 代码：**

```
$.ajax({
type: "get",
url: "accept.php",
dataType: 'json',
data: dataString,
success: function(data) {
    $.each(data, function(key, value) {
        alert($('input[name="AppNum'+key+'"]').val());

    });
 } 
```

我确实尝试了下面的代码，但它没有用。

**php代码：**

```
$AppNum="AppNum".$ApplicantID;

$AppNum=$_REQUEST[$AppNum]; 
```

我期待着你的伟大的commnets，可以帮助我找出这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:20:26.760

如何将变量作为 POST 值而不是警告它

```
$.ajax({
    type: "POST",
    url: "page.php",
    data: "val="+$('input[name="AppNum'+key+'"]').val(),
    success: function(result){
        alert(result);
    },
    error: function(){alert('Error: cannot load page.');}
}); 
```

在php中

```
$_POST['val'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:51:04.367

1.  究竟是什么问题？php页面执行或javascript有问题，它甚至没有调用php页面就阻塞在那里？
2.  在 javascript 代码中，作为请求参数发送的“dataString”是什么？在 $.ajax 调用之前尝试 alert(dataString) 以检查 dataString 是否为空

# php - 无法选中 a 中的复选框 但在外面工作得很好

> ID：10118516
> 
> 赞同：0
> 
> 时间：2012-04-12T06:30:25.053
> 
> 标签：php, html, css

我无法选中以下代码中的复选框。如果`<input type="checkbox..`放在外面`<div>`它工作正常而不是里面`<div>`

知道为什么。

```
<div id="SEL">

  <div style="position:relative; width:100%; height:30px; background-color:#FF5300; bottom:1px;">

     <input type="checkbox" name="test" value="test" style="position:relative; top:5px; left:10px;">

  </div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:36:24.097

我无法重现您的问题。我可以检查复选框就好了：http: [//jsfiddle.net/4ugPj/](http://jsfiddle.net/4ugPj/)

如果您想通过单击橙色区域来选中复选框，请将其设为 LABEL 元素而不是 DIV：http: [//jsfiddle.net/4ugPj/1/](http://jsfiddle.net/4ugPj/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T10:16:28.457

使用标签，因为，该元素不会呈现为任何特殊的用户。但是，它为鼠标用户提供了可用性改进，因为如果用户单击元素内的文本，它会切换控件。

标签的 for 属性应该等于相关元素的 id 属性才能将它们绑定在一起。

```
 for example

         <div id="SEL">
         <label style="display:block; position:relative; width:100%; height:30px; background-color:#FF5300; bottom:1px;" for="check">
         <input type="checkbox" name="test" value="test" style="position:relative; top:5px; left:10px;" id="check">
         </label>
         </div> 
```

# jquery - jquery上的方法不起作用

> ID：10118517
> 
> 赞同：4
> 
> 时间：2012-04-12T06:30:38.907
> 
> 标签：jquery

我正在尝试在 1.7.2 上的方法上使用 jquery，但我遇到了麻烦。

我正在使用这个

```
$(function(){
$("a").on("click",'.displayBig', function(e) {
    e.preventDefault();
    alert('foo');
})});
<a href="images/large_4.jpg" class="displayBig" data="gallery0"><div id="magnify">dsfsfdsfs</div></a>​ 
```

​ 看来我的选择器不工作了。

我在这里创建了一个 jsfiddle。

[http://jsfiddle.net/BQDvM/](http://jsfiddle.net/BQDvM/)

多谢你们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T07:05:28.920

如果你想使用 的动态版本`.on()`，那么你需要使用这种形式：

```
$(staticParentSelector).on('click', '.displayBig', fn); 
```

`staticParentSelector`必须是指向动态对象的父级的选择器，并且在您运行上述 jQuery 以安装事件处理程序时存在，并且它必须是在安装事件处理程序后未被销毁和重新创建的对象。匹配第二个选择器（我将称之为动态选择器）的对象最初不需要存在，并且可以在将来的任何时间创建。

在最坏的情况下，它可能是这样的：

```
$(document).on('click', '.displayBig', fn); 
```

由于该`document`对象满足静态父对象的所有条件。但是，如果您选择一个更接近实际动态对象的静态父对象，并且您不将该`document`对象用于所有动态事件，您的事件将执行得更好。

所以，如果你有这样的 HTML：

```
<div id="container">
    <a href="images/large_4.jpg" class="displayBig" data="gallery0">
        <div id="magnify">dsfsfdsfs</div>
    </a>
</div> 
```

然后，您将使用这样的动态版本`.on()`：

```
$("#container").on('click', '.displayBig', fn); 
```

动态版本的`.on()`工作方式是将单个事件处理程序绑定到静态对象。然后，当有人单击您的动态对象之一时，该对象上没有针对单击的直接事件处理程序，因此单击会通过祖先对象冒泡。当事件到达具有事件处理程序的 staticParent 对象时，它会看到安装了动态事件处理程序，并将发起事件的对象与动态选择器进行比较。如果它们匹配，它会触发事件处理程序。如果它们不匹配，则不会触发任何事件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T06:36:55.500

或者，如果您想确保只选择 A-tags，您可以使用：

```
$(function(){
    $('a.displayBig').on("click", function(e) {
        e.preventDefault();
        alert('foo');
    });
}); 
```

[http://jsfiddle.net/BQDvM/2/](http://jsfiddle.net/BQDvM/2/) ​</p>

# oracle11g - 我正在 Windows 64 位上安装 Microsoft Biztalk Adapter Pack

> ID：10118518
> 
> 赞同：0
> 
> 时间：2012-04-12T06:30:39.037
> 
> 标签：oracle11g, biztalk, biztalk2006r2

我已经成功安装了 Oracle 11g 客户端和 WCF LOB 适配器。但是我收到以下错误：

> 此 Windows 安装程序包有问题。无法运行完成此安装所需的程序。请与您的支持人员或软件包供应商联系。

任何人都可以建议我如何解决它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:19:50.663

尝试按照[以下步骤操作](http://biztalkin-howard.blogspot.com/2011/11/biztalk-2010-wcf-lob-oracle-adapter.html)。使用 BizTalk 设置 WCF 适配器可能有些棘手。另外，请确保您没有安装旧版本的 oracle 客户端。

# bash - 如何删除包含超过一定数量字母的所有行？

> ID：10118519
> 
> 赞同：4
> 
> 时间：2012-04-12T06:30:39.560
> 
> 标签：bash

如何删除文件中包含超过给定数量字母的所有行？例如

```
bear
rabbit
tree
elephant 
```

如果我将其限制为 5 个字母或更少的单词，输出将是：

```
bear
tree 
```

*   该文件包含各种外来字符，每个外来字符都应计为一个字母。
*   标点符号也可以算作一个字母。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-12T06:43:55.217

```
$ awk 'length<=5' input.txt
bear
tree 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-12T06:42:54.890

以下方法可以解决问题：

```
sed -i '/^.\{5,\}$/d' FILE 
```

这意味着：

删除 ( `/ [...] /d`) 就地 ( `-i`switch ) 与以下模式匹配的所有行：

*   行首 ( `^`)
*   后跟任意字符 ( `.`) 重复 5 次或更多次 ( `\{5,\}`)
*   后跟行尾 ( `$`)

从名为`FILE`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-12T06:35:12.677

```
grep -v '......' myfile.txt 
```

将提供五个字符或更少的行。

它通过“选择”包含六个或更多字符的行来执行此操作，然后使用`-v`, 反转操作以仅打印出*不*匹配的行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T08:26:34.903

“该文件包含各种外来字符，每个都应算作一个字母。” 假设您的输入数据是 UTF8，这个 bash 过滤器脚本应该这样做。

```
#!/bin/bash
function px {
 local a="$@"
 local i=0
 while [ $i -lt ${#a}  ]
  do
   printf \\x${a:$i:2}
   i=$(($i+2))
  done
}
(iconv -f UTF8 -t UTF16 | od -x |  cut -b 9- | xargs -n 1) |
if read utf16header
then
 px $utf16header
 cnt=0
 out=''
 while read line
  do
   cnt=$(($cnt+1))
   if [ "$line" == "000a" ]
    then
     if [[ $cnt -le 5+1 ]] ; then
      out=$out$line
      px $out
     fi
     cnt=0
     out=''
   else
    out=$out$line
   fi
  done
fi | iconv -f UTF16 -t UTF8 
```

# android - 如何在 Andorid 的顶部/上方制作小部件？

> ID：10118522
> 
> 赞同：4
> 
> 时间：2012-04-12T06:30:47.003
> 
> 标签：android, android-layout

是否可以将小部件放在其他小部件的顶部？

这样做的真正目的是在 softInputKeyboard 出现时使按钮可见。无论滚动条在哪里，此按钮都必须始终位于软键盘上方。

所以也许还有其他解决方案可以达到目标，要求精确，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:01:14.307

可以使用[RelativeLayout](http://developer.android.com/reference/android/widget/RelativeLayout.html)。

LinearLayout 可以防止这种情况发生，并将小部件按水平/垂直顺序放置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T07:29:45.897

1) 软键盘隐藏
![在此处输入图像描述](../Images/c8b3ec2ca6ff410e894e96f822eadf0d.png)

2) 软键盘可见
![在此处输入图像描述](../Images/bd311021ffd2c4c52f294b6ed67fd17c.png)

ANDROID MANIFEST：（
添加`android:windowSoftInputMode="adjustResize"`到您的活动标签）

```
<activity
            android:windowSoftInputMode="adjustResize"
            android:name="._TestActivity"
            android:label="@string/app_name" > 
```

XML:

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/RelativeLayout1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_above="@+id/layout_buttons"
            android:orientation="vertical" >

            <EditText
                android:id="@+id/editText1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                 />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="RandomText"
                android:textAppearance="?android:attr/textAppearanceLarge" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="RandomText"
                android:textAppearance="?android:attr/textAppearanceLarge" />
            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="RandomText"
                android:textAppearance="?android:attr/textAppearanceLarge" />
            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="RandomText"
                android:textAppearance="?android:attr/textAppearanceLarge" />
            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="RandomText"
                android:textAppearance="?android:attr/textAppearanceLarge" />
            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="RandomText"
                android:textAppearance="?android:attr/textAppearanceLarge" />
            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="RandomText"
                android:textAppearance="?android:attr/textAppearanceLarge" />
            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="RandomText"
                android:textAppearance="?android:attr/textAppearanceLarge" />
            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="RandomText"
                android:textAppearance="?android:attr/textAppearanceLarge" />
            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="RandomText"
                android:textAppearance="?android:attr/textAppearanceLarge" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/layout_buttons"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:background="@android:color/darker_gray"
            android:orientation="horizontal" >

            <Button
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Ok" />

            <Button
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Cancel" />
        </LinearLayout>

    </RelativeLayout> 
```

# python - matplotlib，savefig：DPI 设置被忽略

> ID：10118523
> 
> 赞同：9
> 
> 时间：2012-04-12T06:30:47.020
> 
> 标签：python, matplotlib, show, dpi

我找不到其他人有这个问题。在 matplotlib 中，您可以使用 show() 或 savefig() 查看绘图。这些生成的图像略有不同；就我而言， savefig() 图像更丑陋且更难理解。我需要让我的考官轻松一点，所以..

我发现一些主题建议我将 DPI 大小设置为与 show() 相匹配。我努力了：

-> 直接使用 matplotlib.rcParams['savefig.dpi'] = 80 设置 savefig.dpi。

-> 直接在 ~/.matplotlib/matplotlibrc 中设置 savefig.dpi。

-> 将我的 rc 文件移动到 CWD。

-> 最后，使用 savefig('image.pdf', dpi=80)

我可以验证该属性确实已设置；但似乎该设置被 savefig() 忽略了。有人能帮忙吗？

（简化）代码：

```
plt.bar(ind, functimes, yerr=stddev, bottom=0, width=barWidth, align='center', color='b')

ax = plt.gca()
ax.legend(barRcts, barLegend)
plt.title("Function Call Overhead")
plt.xlabel("Function ID")
plt.ylabel("Execution Time [us]")

plt.xticks(ind, funcNames)
figtest.autofmt_xdate()

plt.savefig(out_file, dpi=80, format='pdf') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T17:04:12.157

PDF 保存将 DPI 设置用于 PDF 内的图像分辨率，而不是任何线/多边形分辨率（这在矢量格式中没有意义）。

如果您对屏幕上的输出感到满意，并且不需要可缩放的图形，那么保存为`png`可能就可以了。

# php - 添加到购物车按钮应提示登录屏幕

> ID：10118526
> 
> 赞同：0
> 
> 时间：2012-04-12T06:30:52.710
> 
> 标签：php, javascript, ajax, jquery

我正在做示例购物车应用程序，我的要求是当匿名用户要单击“添加到购物车”按钮时，如果成功，它应该提示输入“login.php”，然后只有用户可以查看购物车。下面是添加到购物车按钮和 iam 使用这种 ajax 调用来检查凭据。请帮忙谢谢

```
echo "<input id=add type='button' onClick=\"window.open('cart.php?action=add&id=" . $id . "','_self');\" value='Add to Cart' />";  ====> "add to cart button" 
```

# 阿贾克斯调用

```
$("#login").click(function() {

            var action = $("#form1").attr('action');
            var form_data = {
            username: $("#username").val(),
            password: $("#password").val(),
            is_ajax: 1
        };

        $.ajax({
            type: "POST",
            url: "login.php",
            data: form_data,
            success: function(response)
            {
                if(response == 'success')
                    $("#form1").slideUp('slow', function() {
                        $("#message").html("<p class='success'>You have logged in successfully!</p>");
                    });
                else
                    $("#message").html("<p class='error'>Invalid username and/or password.</p>");    
            }
        });

        return false;
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:21:19.100

因此，根据 SR 的建议，您应该尝试这样的事情

从按钮中删除这部分

```
onClick=\"window.open('cart.php?action=add&id=" . $id . "','_self');\ 
```

并在 jquery 代码中进行这些更改....或同义词，根据您的要求...

```
 $("#add").click(function(e) {
        e.preventDefault()          // will stop the form from submitting...        
        var SKU_data = {sku : 12345, quantity:3} //some data related to the product to be sent to some script to add to cart

        var url_to_check_user_session = 'checkAuthentication.php' ;        //which can be the same as action
        $.get(url_to_check_user_session, {username: $("#username").val()}, function(data){
            if(data=='authenticated'){
                $.ajax({        //code to check the login authentication
                    type: "POST",
                    url: "addToCart.php",
                    data: SKU_data,
                    success: function(response)
                    {
                        if(response == 'success')
                            $("#message").html("<p class='error'>Product added to your cart.</p>");
                        else
                            $("#message").html("<p class='error'>Ohh!! something went wrong while adding the product to the cart.</p>");    
                    }
                });}
            else{               // now do the real thing
                $("#form1").slideDown();
                $("#login").click(function() {
                    $.ajax({
                        type: "POST",
                        url: "login.php",
                        data: form_data,
                        success: function(response)
                        {
                            if(response == 'success')
                                $("#form1").slideUp('slow', function() {
                                    $("#message").html("<p class='success'>You have logged in successfully!</p>");
                                });
                            else
                                $("#message").html("<p class='error'>Invalid username and/or password.</p>");    
                        }
                    });
                })
                }
            })

        return false;
    }); 
```

希望这可以帮助...

# meteor - Meteor 服务器什么时候重启？

> ID：10118527
> 
> 赞同：4
> 
> 时间：2012-04-12T06:30:56.720
> 
> 标签：meteor

我运行排行榜示例。然后我在 leaderboard.js 中更改了 names 变量（Meteor.startup 函数参数初始化的一部分）中的一个科学家条目并保存了文件。

我应该期望流星在浏览器中推送更新的列表吗？

在我的情况下没有。所以我终止了流星（控制台中的 Contrl-C）。再次运行它，旧列表仍然出现，而不是新列表。

最后，只有在命令行中运行meteor reset 并再次运行meteor 后，更改的列表才会出现在浏览器（localhost）中。

这是预期的行为吗？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T09:10:47.517

是的，这是正确的行为。看看 leaderboard.js 的第 35 和 36 行。在服务器启动时（第 35 行），如果数据库中没有科学家（第 36 行），则将这六个人插入文件中。终止流星不会清除数据库，但“流星重置”会清除数据库，这就是您看到所见的原因。

基本上，这六个人应该是首次部署应用程序时排行榜的初始内容——他们不应该在每次服务器重新启动时重新添加。

# iphone - iOS：将照片发布到 Facebook 和小 html 作为标题

> ID：10118528
> 
> 赞同：1
> 
> 时间：2012-04-12T06:30:58.893
> 
> 标签：iphone, ios, facebook-graph-api

是否可以将图像上传到相册并包含一个小的 html 代码作为标题？

我想使用新的 Graph API 来做到这一点。

以下代码有效，但是当我将文本变量设置为 html 代码时，标题显示为纯文本，所有 html 标记都可见。

此外，在以下代码中，当 item.text 不为 null 时，its.title 将被完全忽略。

```
if (item.shareType == SHKShareTypeImage && item.image)
{   
    if (item.title) 
        NSLog(@"title = %@", item.title);
        [params setObject:item.title forKey:@"caption"];
    if (item.text) {
        NSString *mytext = [NSString stringWithFormat:@"%@\n\nCreated by iPhone app FaceMod: %@", item.text,appURL];
        [params setObject:mytext forKey:@"message"];
    }
    [params setObject:item.image forKey:@"picture"];
    // There does not appear to be a way to add the photo 
    // via the dialog option:
    [[SHKFacebook facebook] requestWithGraphPath:@"me/photos"
                                       andParams:params
                                   andHttpMethod:@"POST"
                                     andDelegate:self];
    [self retain]; //must retain, because FBConnect does not retain its delegates. Released in callback.
    return YES;
} 
```

我的理解是发布html的方式是使用“action”键：

```
NSString *actions = [NSString stringWithFormat:@"{\"name\":\"%@ %@\",\"link\":\"%@\"}",
            SHKLocalizedString(@"Get"), SHKCONFIG(appName), SHKCONFIG(appURL)];
[params setObject:actions forKey:@"actions"]; 
```

但这也不起作用，并且“动作” html 代码被忽略并且不会出现在 Facebook 上。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:04:48.480

不可以。您不能将 HTML 注入标题字段：Facebook 不允许您为在多个位置显示的值设置 HTML。您提交的任何 HTML 都将被视为纯文本，以防止任何 HTML 注入攻击或视觉样式更改。

# php - 使用子域验证 url 的正则表达式

> ID：10118536
> 
> 赞同：0
> 
> 时间：2012-04-12T06:31:23.373
> 
> 标签：php, regex, url, subdomain

```
preg_match('/^(http:\\/\/)?(.+)\.MYDOMAIN\.com(.*)/', $url, $match) 
```

这是我的正则表达式，用于验证必须具有子域的 URL，但如果有人使用`www` 而不是子域，它也会得到验证。例如：

*   `http://shoes.en.MYDOMAIN.com/`这必须通过

*   `http://www.MYDOMAIN.com/`这必须失败

如果子域是，我如何编辑我的正则表达式以失败`www`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T06:55:32.817

我认为你可以用一个否定的前瞻断言来做到这一点：`(?!www\.)`它被放置在协议检查之后，检查是否没有`www.`跟随开始或协议。

```
/^(http:\\\/\/)?(?!www\.)(.+)\.MYDOMAIN\.com(.*)/.test("www.MYDOMAIN.com") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T07:23:30.437

如何首先使用您当前的解决方案验证域，然后使用第二个表达式检查 www：

```
(\.www\.|http:\/\/www\.|^www\.) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T06:40:17.477

试试这个：测试了一点，似乎工作

```
preg_match('/^(http:\\/\/)?([^(www)]+)\.MYDOMAIN\.com(.*)/', $url, $match); 
```

# uml - 使用 STAR UML 对 java 代码进行逆向工程时出现异常

> ID：10118541
> 
> 赞同：2
> 
> 时间：2012-04-12T06:32:20.497
> 
> 标签：uml

我正在尝试对starUML 中的Java 代码进行逆向工程。但我收到不可恢复的解析错误。请告诉我这样做的原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T09:06:47.927

您需要换用新工具进行逆向工程。最好的工具是 EclipseUML omondo，但实在是太贵了。一个技巧是下载旧的 zip 30 天评估版本：[http ://www.uml2.org/eclipse-java-galileo-SR2-win32_eclipseUML2.2_package_may2010.zip](http://www.uml2.org/eclipse-java-galileo-SR2-win32_eclipseUML2.2_package_may2010.zip)

只需解压缩，即可立即使用 30 天。这是独立构建，包括 Eclipse 和所有需要的插件。

您无需购买该工具，只需使用此评估包进行逆向工程并将您需要的内容复制到您的文档中即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T06:34:25.673

STAR-Uml 很老，可能没有维护。我猜您的代码使用了泛型等新功能，而 Star-UML 无法解析它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-17T18:49:30.540

由于 Star UML 无法在 Java 代码中支持泛型，因此出现“不可恢复的解析错误”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-06T09:43:59.103

Star UML 不支持 Java Annotations，请在去掉代码中的注解后尝试做逆向工程。

# javascript - 从 High Charts 下载 pdf

> ID：10118543
> 
> 赞同：0
> 
> 时间：2012-04-12T06:32:34.003
> 
> 标签：javascript, highcharts

我在弹出窗口中显示高图表，当我下载此图表时，其文本被剪切。我尝试通过提供填充和减小字体大小，但它仍然被削减。为了更好地理解，我附上了弹出窗口和 pdf 的屏幕截图。 ![弹出](../Images/a281f5264eda183d8389f92ef4aa1224.png)

![pdf](../Images/e0f89f229f15c8e7b5b070048def7393.png)

对此的任何帮助将不胜感激。如果有任何此类问题的参考资料，也请告诉我。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T04:06:49.423

尝试将[导出宽度](http://jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/highcharts/exporting/width/)设置为必要的值。

```
$(function () {
    var chart = new Highcharts.Chart({

        chart: {
            renderTo: 'container'
        },

        credits: {
            enabled: false
        },

        xAxis: {
            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        },

        series: [{
            data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]        
        }],

        exporting: {
            width: 200
        }

    });
});​ 
```

# iphone - 在 iPhone 中查看 PDF？

> ID：10118546
> 
> 赞同：1
> 
> 时间：2012-04-12T06:32:40.847
> 
> 标签：iphone

我有一个 iPhone 应用程序，我需要在其中像书一样查看 pdf 页面。有没有办法在 UIWebview 中加载 PDF 文档，以便它可以水平滚动而不是垂直滚动？有可能吗？如果有人给我这样做的方法。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T06:50:00.913

你不能使用 UIWebView 和 QLPreviewController 来做到这一点。他们做他们所做的，并且不可定制。他们使用垂直滚动来显示 pdf 文档中的页面。

你唯一的机会是用 Quartz 框架打开 PDF 并访问每个页面，这个主题有很好的苹果教程。然后，您可以在带有 UIPageControl 的 UIScrollView 中根据需要呈现单独的页面，更好的是 UIPageViewController。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T07:38:20.053

我找到了一个开放的项目。我认为它已满

[https://github.com/iamruinous/Reader](https://github.com/iamruinous/Reader)

# java - 来自java中两个类的动态对象

> ID：10118549
> 
> 赞同：2
> 
> 时间：2012-04-12T06:32:56.253
> 
> 标签：java

UserCourse 和 NewReleases 是具有相同方法的不同类。但输出不同。

```
final Object userCourses;

    if(mFlag == 11){
            try{
                userCourses = new UserCourses(params[0]);
            }catch(Exception e){
                Log.i(TAG, "Exception: " + e.getMessage());
            }

        }
        else if(mFlag == 44){
            try{
                userCourses = new NewReleases();
            }catch(Exception e){
                Log.i(TAG, "Exception: " + e.getMessage());
            }
        } 
```

现在，当我打电话时

```
userCourses.getUserCourses().get(i); 
```

我收到“向用户课程添加演员表”错误。两个类都有这个方法。

是否可以这样做？如果是，请告诉我如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T06:35:20.150

您希望它如何工作，`useCourses`是基本类型`Object`- 它没有这种方法。

了解`Interfaces`以及如何使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:37:42.477

您应该转换为具有该方法的实际对象。

例子：

`((UserCourses)userCourses).getUserCourses().get(i);`或者

`((NewReleases)userCourses).getUserCourses().get(i);`

`Object`是所有对象都派生自的通用超类型。

这就是为什么您可以将 a`new UserCourses`和 a分配`NewReleases`给`Object`。

但是，您必须向下转换为特定对象才能调用实际方法。

这种方法虽然是不好的编程，因为它不是类型安全的。但是这段代码可以适应这种变化。

对于重构代码，您应该遵循另一种方法。阅读有关接口作为@Nim 的答案

# c++ - 比较两个无序集的相等性有多昂贵？

> ID：10118551
> 
> 赞同：12
> 
> 时间：2012-04-12T06:33:00.900
> 
> 标签：c++, set, complexity-theory, equality, unordered-set

给定两个`std::set`s，可以简单地同时遍历两个集合并比较元素，从而产生线性复杂度。这对 s 不起作用`std::unordered_set`，因为元素可以按任何顺序存储。`a == b`那么到底有多贵`std::unordered_set`呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-12T06:43:08.103

最坏的情况是 O(n²)。

但无序集实际上是按哈希排序的。因此可以比较散列（如果失败，集合不能相等），然后验证相同的散列（线性）在后面具有相同的值（对于具有相同散列的不同值，O(n²)）。

在最好的情况下，这是 O(n)。

通常，如果散列函数“好”（不同的对象 -> 总是不同的散列），复杂度趋于 O(n)，如果散列函数“坏”（一切总是具有相同的散列值），复杂度趋于 O(n²)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T06:41:41.257

和的复杂`operator==`性`operator!=`：

平均情况下的线性复杂度。N ²在最坏的情况下，其中 N 是容器的大小。

标准§23.2.5，第 11 点中的更多详细信息：

对于`unordered_set`和`unordered_map`，`operator==`（即，调用 的`==`运算符、`value_type`返回的谓词 `key_equal()`和返回的哈希器的次数）在平均情况下与 N ²`hash_function()`成正比，在最坏情况下与 N 2 成正比，其中.`N`^(`N``a.size()`)

# css - 使用 netbeans 的 css 中出现意外的令牌长度错误

> ID：10118553
> 
> 赞同：0
> 
> 时间：2012-04-12T06:33:07.290
> 
> 标签：css, netbeans

我在 css 中给出了 height:35px，它在 linux 文本编辑器中工作正常，但在 netbeans 中显示错误。

```
#hori li
{
padding:0;
text-align:center;
width:7em; 
float:left;
list-style:none
height:35px;
margin-left:15px;
background:#38ACEC;
-moz-border-radius: 70px;
border-radius: 70px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:43:53.607

关闭你的`list-style:none`. 像这样写`list-style:none;`。

```
#hori li
{
padding:0;
text-align:center;
width:7em; 
float:left;
list-style:none;
height:35px;
margin-left:15px;
background:#38ACEC;
-moz-border-radius: 70px;
border-radius: 70px;
} 
```

# c++ - boost::any typeid 优化 C++11

> ID：10118558
> 
> 赞同：5
> 
> 时间：2012-04-12T06:33:40.183
> 
> 标签：c++, boost, stl, c++11

> **可能重复：**
> [typeid 何时可以为同一类型返回不同的 type_info 实例？](https://stackoverflow.com/questions/1819114/when-can-typeid-return-different-type-info-instances-for-same-type)

如果我将`operand->type() == typeid(ValueType)`下面的行更改为`&operand->type() == &typeid(ValueType)`，代码仍然可以使用 gcc 并且在可执行文件中占用更少的空间（并且已经这样做了很多年），但是 C++11 标准是否提供任何保证，这种优化应该适用于不同的编译器？

```
template<typename ValueType>
ValueType * any_cast(any * operand)
{
    return operand && 
#ifdef BOOST_AUX_ANY_TYPE_ID_NAME
        std::strcmp(operand->type().name(), typeid(ValueType).name()) == 0
#else
        operand->type() == typeid(ValueType)
#endif
        ? &static_cast<any::holder<ValueType> *>(operand->content)->held
        : 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T07:09:03.600

不，不能保证。这个断言可能会触发：

```
assert(&typeid(int) == &typeid(int)); 
```

虽然需要一个非常愚蠢的编译器才能引发火灾，但它可能会发生。实际上，只有在跨动态库边界比较 typeid 时才会失败：

```
assert(&typeid_of_int_in_lib1() == &typeid_of_int_in_lib2()); 
```

这几乎肯定会触发。

# python - 如何在 Python 套接字应用程序中接受 GET 请求？

> ID：10118565
> 
> 赞同：1
> 
> 时间：2012-04-12T06:34:05.777
> 
> 标签：python, http, sockets, webserver

我正在编写一个非常基本的 Web 服务器作为家庭作业，我让它在 localhost 端口 14000 上运行。当我浏览到 localhost:14000 时，服务器发回一个带有表单的 HTML 页面（表单的操作是相同的地址- localhost:14000，不确定这是否正确）。

基本上，一旦页面在提交后重新加载，我希望能够从 GET 请求中收集数据 - 我该怎么做？我一般如何访问 GET 中的内容？

注意：我已经尝试过 socket.recv(xxx)，如果页面是第一次加载，这将不起作用——在这种情况下，我们不会从客户端“接收”任何东西，所以它只会继续旋转。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T06:58:58.013

秘密在于 conn.recv 它将为您提供请求的浏览器/客户端发送的标头。如果它们看起来像我使用 safari 生成的那样，您可以轻松解析它们（即使没有复杂的正则表达式模式）。

```
 data = conn.recv(1024)
    #Parse headers
    """
    data will now be something like this:

    GET /?banana=True HTTP/1.1
    Host: localhost:50008
    User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/534.53.11 (KHTML, like Gecko) Version/5.1.3 Safari/534.53.10
    Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
    Accept-Language: en-us
    Accept-Encoding: gzip, deflate
    Connection: keep-alive

    """
    #A simple parsing of the get data would be:
    GET={i.split("=")[0]:i.split("=")[1] for i in data.split("\n")[0].split(" ")[1][2:].split("&")} 
```

# csv - 如何使用 eXist 数据库中使用的 XQuery 文件将 CSV 数据添加到已经可用的 XML

> ID：10118569
> 
> 赞同：1
> 
> 时间：2012-04-12T06:34:39.653
> 
> 标签：csv, xquery, exist-db

我正在研究 eXist 数据库，我有一个新想法，我必须使用**XQuery**实现 XML 文件。

我想**将 CSV 文件转换**为已经在数据库集合中的 XML。而这个 XML 文件只包含必要的标签和信息。并且这些转换后的数据将被**保存**到 eXist 数据库中的 XML 中。

**像这样的 XML：**它的名字是 'createXML.xml'

```
<?xml version="1.0" encoding="UTF-8"?>
<records>
// All the Records from CSV file want to put here..... between Records tags
</records> 
```

**现在 CSV 文件是这样的：**

```
name,subject,marks    //header lines
krunal,maths,95
abc,sub1,87
def,sub2,67
... 
```

**像这样输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<records>
   <user>
       <name>krunal</name>
       <subject>maths</subject>
       <marks>95</marks>
   </user>
   <user>
       <name>abc</name>
       <subject>sub1</subject>
       <marks>87</marks>
   </user>
   <user>
       <name>def</name>
       <subject>sub2</subject>
       <marks>67</marks>
   </user>
      .
      .
      .
</records> 
```

谁能告诉我**如何在 eXist 数据库中使用 XQuery 将 CSV 数据添加到已经可用的 XML 并执行此功能。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:15:00.740

要阅读文件，请查看您的 XQuery 实现文档，此处[阅读 eXist 的文件](http://exist-db.org/functions/file/read)。

[Wikibooks 有一个关于如何解析 CSV 的优秀示例：](http://en.wikibooks.org/wiki/XQuery/Parsing_CSV)

```
let $csv := 'name,faculty
alice,anthropology
bob,biology'

let $lines := tokenize($csv, '\n')
let $head := tokenize($lines[1], ',')
let $body := remove($lines, 1)
return
    <people>
        {
            for $line in $body
            let $fields := tokenize($line, ',')
            return
                <person>
                    {
                        for $key at $pos in $head
                        let $value := $fields[$pos]
                        return
                            element { $key } { $value }
                    }
                </person>
        }
    </people> 
```

另一种可能性是使用另一个具有内置 csv 导入支持的 XQuery 引擎，例如[Zorba](http://www.zorba-xquery.com/doc/zorba-latest/zorba/xqdoc/xhtml/www.zorba-xquery.com_modules_csv2xml.html)或[BaseX](http://docs.basex.org/wiki/Parsers#CSV_Parser)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:58:51.137

假设 (1) 您的 CSV 文件已经在数据库中，并且 (2) 您希望将 CSV-to-XML 的结果存储在一个新的 XML 文件中，那么您的 XQuery 有 3 个部分：

1.  [使用util:binary-doc()](http://exist-db.org/exist/functions/util/binary-doc)和 [util:binary-to-string()](http://exist-db.org/exist/functions/util/binary-to-string)获取 CSV 文件的内容。请注意， util:binary-to-string() 假定文件使用 UTF-8 编码，但如文档所示，如果 CSV 文件具有非 UTF-8 编码，您可以告诉函数编码方案。
2.  [使用有关解析 CSV](http://en.wikibooks.org/wiki/XQuery/Parsing_CSV)的 XQuery Wikibook 文章（已在 @Ranon 的回复中提到）将 CSV 转换为所需的结构。我假设您知道足够多的 XQuery 以将此例程改编为您自己的函数 — 我将在下面将其称为 local:csv-to-xml()。
3.  使用[xmldb:store()](http://exist-db.org/exist/functions/xmldb/store)函数将生成的 XML 存储在数据库中

（请注意，util 和 xmldb 模块是 eXist-db 特定的模块，因为 XQuery 规范没有涵盖此功能。如果您使用不同的 XQuery 实现，则需要使用它们的特定于实现的方法。）

所以这里是 eXist-db 解决方案：

```
let $csv-file := '/db/myCSV.csv'
let $csv-binary := util:binary-doc($csv-file)
let $csv := util:binary-to-string($csv-binary)
let $xml := local:csv-to-xml($csv)
return
    xmldb:store('/db', 'createXML.xml', $xml) 
```

这会将 myCSV.csv 的转换版本作为 createXML.xml 存储在 eXist 数据库的根目录：/db/createXML.xml。

相反，如果您想将 XML 结果附加到现有的 XML 文件中，您将需要应用 XQuery Update 语法——它允许您在存储在数据库中的文档中插入节点、替换节点和删除节点。在 eXist-db 中，eXist 的 XQuery 更新语法的文档位于[http://exist-db.org/exist/update_ext.xml](http://exist-db.org/exist/update_ext.xml)。

# node.js - node.js+plates 乱码输出

> ID：10118570
> 
> 赞同：0
> 
> 时间：2012-04-12T06:34:42.127
> 
> 标签：node.js, flatiron.js

我正在使用 node.js 和 flatiron 板进行模板化，并且在使用数据数组时遇到了乱码输出问题。

我想绑定一个数组以列出 ID 为“list”的项目

JS：

```
var express = require('express');
var app = express.createServer();
var fs = require('fs');
var plates = require('plates');

var html = fs.readFileSync('plates.html', 'utf-8');

app.get('/', function(req, res) {
    var data = {
        list: [
            "Alpha",
            "Bravo",
            "Charlie",
            "Delta",
        ]
    }
    res.send(plates.bind(html, data))
})

app.listen(8080) 
```

HTML：

```
<html>
<body>
  <ul>
    <li id="list">REPLACE</li>
  </ul>
  <div>
    <h3>Hello World</h3>
    <p>Click the following button.</p>
    <span>Go Back</span>
  </div>
</body>
</html> 
```

我希望输出看起来像这样，其中只有列表项重复：

```
<body>
  <ul>
    <li id="list">Alpha</li>
    <li id="list">Bravo</li>
    <li id="list">Charlie</li>
    <li id="list">Delta</li>
  </ul>
  <div>
    <h3>Hello World</h3>
    <p>Click the following button.</p>
    <span>Go Back</span>
  </div>
</body>
</html> 
```

但是，我得到了这个奇怪的输出，无法理解原因可能是什么：

```
<html>
<body>
  <ul>
    <li id="list">Alpha</li>
  </ul>
  <div>
    <h3>Hello World</h3>
    <p>Clic<li id="list">Bravo</li>
  </ul>
  <div>
    <h3>Hello World</h3>
    <p>Clic<li id="list">Charlie</li>
  </ul>
  <div>
    <h3>Hello World</h3>
    <p>Clic<li id="list">Delta</li>
  </ul>
  <div>
    <h3>Hello World</h3>
    <p>Clic
  </ul>
  <div>
    <h3>Hello World</h3>
    <p>Click the following button.</p>
    <span>Go Back</span>
  </div>
</body>
</html> 
```

有任何想法吗？

（PS 我知道 HTML 不允许重复的 ID，这只是一个例子而不是问题）

**更新信息**

我运行了 pksankara 成功指出的测试，但是如果我修改测试以使用我的标记，我会失败：

修改 test-16.html：

```
<ul>
<li class="components"></li>
</ul>
<div>
<h3>Hello World</h3>
<p>Click the following button.</p>
<span>Go Back</span>
</div> 
```

输出：

```
<ul>
<li class="components">Union</li>
</ul>
<div>
<h3>Hello World</h3>
<p>Clic<li class="components">Director</li>
</ul>
<div>
<h3>Hello World</h3>
<p>Clic<li class="components">Broadway</li>
</ul>
<div>
<h3>Hello World</h3>
<p>Clic<li class="components">Plates</li>
</ul>
<div>
<h3>Hello World</h3>
<p>Clic<li class="components">Resourceful</li>
</ul>
<div>
<h3>Hello World</h3>
<p>Clic
</ul>
<div>
<h3>Hello World</h3>
<p>Click the following button.</p>
<span>Go Back</span>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T10:40:55.557

以下是如何从板块存储库中执行此操作的示例

*   板绑定：[https ://github.com/flatiron/plates/blob/master/test/api-test.js#L172](https://github.com/flatiron/plates/blob/master/test/api-test.js#L172)
*   JSON：[https ://github.com/flatiron/plates/blob/master/test/fixtures/test-16.json](https://github.com/flatiron/plates/blob/master/test/fixtures/test-16.json)
*   HTML：[https ://github.com/flatiron/plates/blob/master/test/fixtures/test-16.html](https://github.com/flatiron/plates/blob/master/test/fixtures/test-16.html)
*   输出：[https ://github.com/flatiron/plates/blob/master/test/fixtures/test-16.out](https://github.com/flatiron/plates/blob/master/test/fixtures/test-16.out)

我希望你能模仿它。

（**编辑**：唯一的错误是[https://github.com/flatiron/plates/issues/47](https://github.com/flatiron/plates/issues/47)）

# ios - 使用 iPhone 应用程序分发 SSH 密钥

> ID：10118572
> 
> 赞同：0
> 
> 时间：2012-04-12T06:34:45.707
> 
> 标签：ios, security, ssh, certificate

我有一个 iPhone 应用程序需要安全地连接回我们的托管环境。它使用 SSH 执行此操作，然后使用端口转发连接到 localhost:port，这实际上是在主机上运行的服务。

目前，我进行概念验证的方式是在应用程序中包含证书（私有和公共），然后通过 SSH 连接到主机。

这意味着不需要分发密码，但是这是一种好的做法吗？私钥是否应该包含在应用程序中？

如果没有，我应该如何在不分发密码的情况下做到这一点，我应该包括什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T06:36:22.530

分发密码或分发私钥是完全相同的事情，两者通常都是禁止的。

您没有向我们提供有关您实际尝试做什么的足够信息，但在我看来，您对最有可能解决的问题采取了一种非常复杂的方法。如果您的 iPhone 应用程序需要与服务器通信，那么您至少应该让每个 iPhone 应用程序生成自己的私钥/公钥组合，并将其公钥带外添加到服务器上的授权用户，这样您就可以有选择地撤销个别用户的访问权限。

# algorithm - 深度优先图算法的时间复杂度

> ID：10118580
> 
> 赞同：23
> 
> 时间：2012-04-12T06:35:28.583
> 
> 标签：algorithm, time-complexity, depth-first-search

我开始学习时间复杂度，并查看了一些简单排序的时间复杂度示例。

我想知道我们如何计算图中深度优先搜索的平均时间复杂度`|V|=n`，`|E|=m`设开始节点为“u”，结束节点为“v”。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-12T06:45:39.137

DFS 的时间复杂度为 O(n + m)。考虑到我们只访问每个节点一次，并且在树（无循环）的情况下，我们穿越所有边一次，我们得到了这种复杂性。

例如，如果起始节点是 u，结束节点是 v，我们会考虑最坏的情况，即 v 将是最后访问的节点。所以我们开始访问 u 的第一个邻居的连通分量，然后是第二个邻居的连通分量，依此类推，直到最后一个邻居的连通分量，我们找到 v。我们只访问了每个节点一次，并且没有交叉同一边不止一次。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-05-17T17:28:03.667

如果图以邻接表的形式给出，它将是 O(n+m)，但如果图是邻接矩阵的形式，那么复杂度是 O(n*n)，因为我们必须遍历整个排直到我们找到一条边。

# c# - Рow 得到 2 到 4 个对象元素

> ID：10118581
> 
> 赞同：0
> 
> 时间：2012-04-12T06:35:28.653
> 
> 标签：c#, linq

我有错误

```
Dictionary<int, string> viewBusinesAndCountLeft = grptemp.Take(4).ToDictionary(x => x.Count, x => x.BusinessCategoryName); 
```

错误：“已添加具有相同键的元素。”

这个怎么做？

```
var grptemp = (from adsBusines in m_adsRepository.SaleBusinesAds
               group adsBusines by adsBusines.BusinessCategory.Name
               into grp
               select new
               {
                  BusinessCategoryName = grp.Key,
                  Count = grp.Select(x => x.BusinessCategory.ChildItems.Count()).Distinct().Count()
               }).Take(8);

Dictionary<int, string> viewBusinesAndCountLeft = grptemp.Take(4).ToDictionary(x => x.Count, x => x.BusinessCategoryName);
Dictionary<int, string> viewBusinesAndCountRigth = grptemp.Skip(4).Take(4).ToDictionary(x => x.Count, x => x.BusinessCategoryName); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:47:49.443

您正在使用计数作为字典的键，这意味着每当您碰巧找到具有相同计数的两个类别时，您都会抛出该异常。

如果我理解您要正确执行的操作，则应该将“业务类别”作为字典的键，将计数作为值。

例如

```
Dictionary<string, int> viewBusinesAndCountLeft = grptemp.Take(4).ToDictionary(x => x.BusinessCategoryName, x => x.Count); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:48:44.947

声明 a`Dictionary<T,U>`表示具有 T 类型键的字典（在本例中为`int`） - 字典中的键必须是唯一的。

您可能希望键是字符串，值是计数。尝试切换你的论点：

```
Dictionary<string, int> viewBusinesAndCountLeft = 
    grptemp.Take(4).ToDictionary(x => x.BusinessCategoryName, x => x.Count); 
```

# php - 检查xml是否存在（不工作）

> ID：10118583
> 
> 赞同：0
> 
> 时间：2012-04-12T06:35:30.550
> 
> 标签：php, xml

我正在尝试通过 php 检查 url 上是否存在 xml 文件（增量名称，直到它失败）

为什么这段代码不起作用？

```
<?php

for ($i = 1; $i <= 10; $i++) {
$url = "http://thetvdb.com/api/E676DF9578EF38D7/series/78901/default/".$i."/1/en.xml";
echo $url."<br />";
$xml = simplexml_load_file($url);

if ($xml) {
echo "yay"."<br />";
} else {
echo "fail"."<br />";
die();
}
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:38:38.167

你的主要问题是`die()`。这将退出所有执行。

除非您打算稍后使用 XML ，否则我也会尝试使用`fopen()`而不是，例如`simplexml_load_file()`

```
$handle = @fopen($url, 'r');
if ($handle === false) {
    echo 'fail<br />';
    return; // check till it fails
} else {
    echo 'yay<br />';
    fclose($handle);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:40:25.467

您可以只使用 curl 来确定文件是否存在：

```
function does_remote_file_exist($url){
    $ch = curl_init($url);    
    curl_setopt($ch, CURLOPT_NOBODY, true);
    curl_exec($ch);
    $code = curl_getinfo($ch, CURLINFO_HTTP_CODE);

    if ($code == 200) $status = true;
    else $status = false;

    curl_close($ch);
   return $status;
} 
```

# python - 如何从脚本向 appengine 发出经过身份验证的请求？

> ID：10118585
> 
> 赞同：4
> 
> 时间：2012-04-12T06:35:38.380
> 
> 标签：python, google-app-engine

如何从 python 脚本向 appengine 发出经过身份验证的请求？我在网上找到了很多不同的方法，但都没有奏效。EG[如何从（非网络）python 客户端访问经过身份验证的 Google App Engine 服务？](https://stackoverflow.com/questions/101742/how-do-you-access-an-authenticated-google-app-engine-service-from-a-non-web-py)不起作用，请求返回登录页面。那篇文章很旧，也许从那以后发生了一些变化。有没有人有一个很好的包装对象来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T02:51:13.530

回答了我自己的问题：

```
from google.appengine.tools import appengine_rpc
use_production = True
if use_production:
  base_url = 'myapp.appspot.com'
else:
  base_url = 'localhost:8080'

def passwdFunc():
  return ('user@gmail.com','password')

def main(argv):
  rpcServer = appengine_rpc.HttpRpcServer(base_url,
                                          passwdFunc,
                                          None,
                                          'myapp',
                                          save_cookies=True,
                                          secure=use_production)
# Makes the actual call, I guess is the same for POST and GET?
blah = rpcServer.Send('/some_path/')

print blah

if __name__ == '__main__':
  main(sys.argv) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T06:39:27.593

[您可以在https://developers.google.com/appengine/docs/python/taskqueue/overview-pull#Using_the_Task_Queue_REST_API_with_the_Python_Google_API_Library](https://developers.google.com/appengine/docs/python/taskqueue/overview-pull#Using_the_Task_Queue_REST_API_with_the_Python_Google_API_Library)中查看用于处理 GAE 拉取队列的 Python 客户端库中发出请求的非 Web 身份验证 python 客户端的一个示例

# ios - 如何在 NSUserDefaults 中存储和检索 NSMutableDictionary？

> ID：10118586
> 
> 赞同：2
> 
> 时间：2012-04-12T06:35:38.713
> 
> 标签：ios, objective-c, nsuserdefaults, nsmutabledictionary

我试图这样做以在 NSUserDefaults 中存储一个空字典。

```
NSMutableDictionary* fruits = [NSMutableDictionary alloc];
[defaults setObject:fruits forKey:@"fruits"]; 
```

然后稍后再检索它。

```
NSMutableDictionary* fruits = [[NSMutableDictionary alloc] initWithDictionary:[defaults objectForKey:@"fruits"]]; 
```

但是，检索字典会使我的应用程序崩溃。为什么？如何在 NSUserDefaults 中存储字典？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-12T06:38:45.777

你得到一个不可变的字典。您无需将其“封装”在另一本字典中。如果你想让它可变写：

```
NSMutableDictionary* animals = [[defaults objectForKey:@"animals"] mutableCopy]; 
```

> NSUserDefaults 类提供方便的方法来访问常见类型，例如浮点数、双精度数、整数、布尔值和 URL。默认对象必须是一个属性列表，即以下实例（或集合实例的组合）：NSData、NSString、NSNumber、NSDate、NSArray 或 NSDictionary。如果要存储任何其他类型的对象，通常应该将其归档以创建 NSData 的实例。
> 
> 从 NSUserDefaults 返回的值是不可变的，即使您将可变对象设置为值。例如，如果您将可变字符串设置为“MyStringDefault”的值，那么您稍后使用 stringForKey: 检索的字符串将是不可变的。
> 
> 注意：通过 NSUserDefaults 类以编程方式访问的用户默认系统使用属性列表来存储代表用户偏好的对象。这种限制似乎从用户默认系统中排除了多种对象，例如 NSColor 和 NSFont 对象。但是如果对象符合 NSCoding 协议，它们可以归档到 NSData 对象，这些对象是属性列表兼容的对象。有关如何执行此操作的信息，请参阅“在用户默认值中存储 NSColor”“；尽管本文重点介绍 NSColor 对象，但该过程可以应用于任何可以归档的对象。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T07:15:29.320

您可以使用：

节省：

```
NSData *data = [NSKeyedArchiver archivedDataWithRootObject:mutableArray];
[[NSUserDefaults standardUserDefaults] setObject:stack forKey:@"Your Key"]; 
```

取回：

```
NSMutableArray *mutableArray = [NSKeyedUnarchiver unarchiveObjectWithData:data]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T06:46:41.567

您需要初始化您的字典并稍后将其设置为对象。这种方式有效，它与您的示例相同，但只是正确初始化。

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSMutableDictionary *dict = [[NSMutableDictionary alloc] initWithObjectsAndKeys:@"someValue", @"someKey", nil];
[defaults setObject:dict forKey:@"slovnik"];
[dict release];
NSLog(@"READ: %@", [defaults objectForKey:@"slovnik"]);
NSMutableDictionary *newDict = [[NSMutableDictionary alloc] initWithDictionary:[defaults objectForKey:@"slovnik"]];
NSLog(@"READ2: %@", newDict); 
```

现在我可以登录控制台并且应用程序不会崩溃：

```
2012-04-12 08:47:55.030 Test[12179:f803] READ: {
someKey = someValue;
}
2012-04-12 08:47:55.031 Test[12179:f803] READ2: {
someKey = someValue;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T06:47:14.433

```
NSMutableDictionary* fruits = [NSMutableDictionary alloc]; 
```

应该

```
NSMutableDictionary* fruits = [[NSMutableDictionary alloc] init]; 
```

您需要始终在分配对象后对其进行初始化。

# algorithm - 查找与某个指定范围具有非空交集的集合中的哪些范围

> ID：10118589
> 
> 赞同：0
> 
> 时间：2012-04-12T06:35:51.163
> 
> 标签：algorithm, data-structures

让我们有一组范围 r1, r2, ... rn。然后选择一些其他范围 R。什么是最快（或至少是快速）算法来确定范围 r1、r2、... rn 与 R 有非空交集？是否有存储范围集的最佳数据结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:53:58.940

看起来[间隔树](http://en.wikipedia.org/wiki/Interval_tree)是要走的路。

# android - 如何通过代码在android模拟器中获取PC的IP地址

> ID：10118590
> 
> 赞同：4
> 
> 时间：2012-04-12T06:36:09.177
> 
> 标签：android, android-emulator, ip

我正在使用此链接的代码[如何从代码中获取设备的 IP 地址？](https://stackoverflow.com/questions/6064510/how-to-get-ip-address-of-the-device)但是获取的IP地址与我的机器不同..我怎样才能在android模拟器上获取我的机器的IP地址..

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T07:26:51.173

如果您想访问主机，[请检查此内容。](http://juristr.com/blog/2009/10/accessing-host-machine-from-your/)

另一个解决方案是在 shell 上运行它

$ adb shell am start -a android.intent.action.WEB_SEARCH -e 查询“我的 ip 是什么”

它将显示您的系统IP

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:45:55.827

导入包java.net；

并编写代码，

```
try {
InetAddress thisIp =InetAddress.getLocalHost();
System.out.println("IP:"+thisIp.getHostAddress());
}
catch(Exception e) {
e.printStackTrace();
} 
```

# android - 从 Android 中的文件 res/xml 解析 DOM xml

> ID：10118597
> 
> 赞同：1
> 
> 时间：2012-04-12T06:36:29.690
> 
> 标签：android, xml, dom

我正在寻找使用 DOM 解析 res/xml 文件夹中的 xml 文件的解决方案（读取、修改 xml）。
方法

```
 getResources().getXml(id) 
```

只返回 XmlResourceParser 对象，如何将其转换为 Document 进行解析？我也关注[了这个问题](https://stackoverflow.com/questions/4329308/open-xml-file-from-res-xml-in-android/4329390#4329390)，但它没有帮助。

我该如何解决？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:54:47.493

您应该将 xml 文件放在`res/raw`文件夹中，然后您可以使用所有标准 DOM 方法（将其包装在等）中`getResources().getRawResource(R.raw.resource_id)`来获取可以处理的文件。`InputStream``InputSource`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:50:12.973

你可以参考下面的这个链接

[https://github.com/commonsguy/cw-android/tree/master/Resources/XML](https://github.com/commonsguy/cw-android/tree/master/Resources/XML)

这是 dom parcer 的简单演示，它是从本地调用 xml 文件。所以你也可以从 webservices 尝试。尝试并确保你得到你的数据

# java - 如何编译使用另一个 Java 类作为对象的 Java 类？

> ID：10118604
> 
> 赞同：0
> 
> 时间：2012-04-12T06:37:03.190
> 
> 标签：java, jsp, javabeans

我有一个使用 B.java 类作为对象的 A.java 类。

当我编译 A.java 类时，它会抛出编译错误消息，因为 Java 编译器根本无法引用 B.java 对象。所以，这是我的问题：

如果 A.java 类包含另一个 B.java 类，我该如何编译它？

Eclipse 是一个很棒的工具，但是当我需要为 Java bean 编译 Java 文件时，这个工具就没有用了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T06:39:24.327

您还没有解释您是如何尝试编译 A.java 的，或者您是否已经编译了 B.java。如果您还没有编译它们中的任何一个，只需将它们一起编译，例如

```
javac -d bin path/to/A.java path/to/B.java 
```

如果你已经编译了 B，你需要确保你的类路径是正确的，例如

```
javac -d bin -cp path/to/Broot path/to/A.java 
```

请注意，类路径值不应该是 B.class 文件本身，甚至也不应该是包含 B.class 的目录，而是输出层次结构的根。因此，如果 B 在包 foo.bar 中，并且 B.class 在目录 /x/y/z/foo/bar 中，您将编写：

```
javac -d bin -cp /x/y/z path/to/A.java 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:39:01.133

错误似乎是 B 类尚未编译。你能检查B类的错误，编译B，然后去A吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T06:39:31.133

确保在编译类时依赖项（jar 文件）和当前目录位于类路径中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T06:41:52.873

这是问题的重复：[我可以使用 JAVAC 编译具有多个文件和目录的项目吗？](https://stackoverflow.com/questions/864630/can-i-use-javac-to-compile-a-project-with-multiple-files-and-directories)

根据对象 B 的类型，您必须将其添加到类路径中。如果它在 jar 文件（库）中，则应该在命令行上使用 -c 选项。要添加其他源文件，请使用 -s 选项。

一旦你开始了更大的项目，就很难在命令行上继续手动执行此操作。看看像eclipse这样的合适的IDE。它为你做这一切。您只需在属性中设置一次类路径，然后单击一些菜单选项（或设置自动构建或使用快捷键）即可编译。

# linq-to-sql - LINQ 采用语法

> ID：10118605
> 
> 赞同：0
> 
> 时间：2012-04-12T06:37:07.570
> 
> 标签：linq-to-sql

我编写了一些 LINQ 来模拟 SQL GroupBy 语句（见下文）。但是，在分组之前，我也只需要考虑最后 10 个 settingId。我想我会使用 Take 来执行此操作，但是我的语句中正确的语法是什么？

```
var settings2 = from s in dc.SystemSettings
                where s.campConfig.campaignType == campType
                      && s.campId != campId
                      && s.settingKey == ticket.setting.Key
                orderby s.settingId descending
                group s by s.settingValue
                into grp
                select new
                {
                    SettingValue = grp.Key,
                    SettingCount = grp.Select(x => x.settingValue).Count()
                }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:09:42.193

我会做这样的事情

```
var settings2 = from sOuter in 
    (from s in dc.SystemSettings
    where s.campConfig.campaignType == campType
      && s.campId != campId
      && s.settingKey == ticket.setting.Key
    orderby s.settingId descending
    select s).Take(10)
    group sOuter by sOuter.settingValue
    into grp
    select new
    {
      SettingValue = grp.Key,
      SettingCount = grp.Select(x => x.settingValue).Count()
    }; 
```

# android - 在按钮单击时删除布局

> ID：10118606
> 
> 赞同：0
> 
> 时间：2012-04-12T06:37:08.040
> 
> 标签：android

我正在研究android。我正在创建一个应用程序，在该应用程序中，我在单击按钮时动态创建了一组按钮。但是每次单击按钮时都会创建按钮。我希望这种情况发生一次。我可以清除开头的空格`OnClickListener()?`我不知道该怎么做。下面是我的代码。

```
button_generate.setOnClickListener(new View.OnClickListener() {
                    public void onClick(View v) {
                               //*-----------clearing the variables--------*
                        final TableLayout rel=(TableLayout)findViewById(R.id.tab1);

                        int k=0,i=0,j=0;

                                  count=3;
                                    System.out.println("count is"+count);

                                    while(j<count)      
                                    {

                                              TableRow tr = new TableRow(EspeakerActivity.this);
                                              //for(int c=1; c<=3; c++) {
                                                  Button b1 = new Button (EspeakerActivity.this);
                                                  Button b2= new Button (EspeakerActivity.this);
                                                  Button b3 = new Button (EspeakerActivity.this);
                                                  b1.setText("1");
                                                  b2.setText("2");
                                                  b3.setText("3");

                                                  b1.setTextSize(10.0f);
                                                 200));

                                                  tr.addView(b1, 100,50);
                                                  tr.addView(b2, 100,50);
                                                  tr.addView(b3, 100,50);

                                              rel.addView(tr);

                                        }

                            j++;
                                    }

                    }
                    }
                    );//*--------closing the button click------* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:42:30.817

提供按钮 ID，然后在添加按钮之前使用 findViewByID() 查看按钮是否已经存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:59:54.777

您可以在每个按钮单击时清除 TableLayout，如下所示

```
....
onClick(View v) {
  final TableLayout rel=(TableLayout)findViewById(R.id.tab1);
  for(int x=0; x<rel.getChildCount(); x++)
  {
     View v = rel.getChildAt(x);
     rel.removeView(v);
  }
  ....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T06:44:57.117

```
TableRow tr = new TableRow(EspeakerActivity.this);
tr.setId(/*some id*/)
                                              //for(int c=1; c<=3; c++) {
                                                  Button b1 = new Button (EspeakerActivity.this);
                                                  Button b2= new Button (EspeakerActivity.this);
                                                  Button b3 = new Button (EspeakerActivity.this);
                                                  b1.setText("1");
                                                  b2.setText("2");
                                                  b3.setText("3");

                                                  b1.setTextSize(10.0f);
                                                 200));

                                                  tr.addView(b1, 100,50);
                                                  tr.addView(b2, 100,50);
                                                  tr.addView(b3, 100,50);
//check rel already has that tr.. if it has don't add anythin.. better if you do it before even creating the TAbleRow
                                              rel.addView(tr); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T06:46:01.597

[在 Android 运行时隐藏线性布局](https://stackoverflow.com/questions/5644539/hiding-linear-layout-on-runtime-in-android)

你可以参考这个链接，我相信你会得到你的答案。如果不能通过这个链接解决然后告诉我。

# database - 在 DB2 中为 CURRENT_TIMESTAMP 使用什么？

> ID：10118614
> 
> 赞同：4
> 
> 时间：2012-04-12T06:37:47.823
> 
> 标签：database, db2

我正在将一些 MySQL 语句转换为 DB2 数据库，但在以下查询中遇到了问题

```
CREATE TABLE RFX_EVENT_MAPPING (
  EVENT_TYPE varchar(4) NOT NULL,
  EVENT_DESC varchar(50) NOT NULL,
  EVENT_CLASS varchar(50) default NULL,
  OWNER varchar(6) default NULL,
  LAST_UPDATE_TIME timestamp NOT NULL default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP,
  LAST_UPDATE_USER varchar(20) NOT NULL
); 
```

如您所见，有

```
LAST_UPDATE_TIME timestamp NOT NULL default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP 
```

哪个不起作用，那么如何使用 db2 实现相同的功能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T07:43:55.920

在 DB2 9.7 for Linux, UNIX, Windows 中，IBM 添加了*行更改时间戳*的概念。

```
create table rcttest (
   c1 int,
   c2 char(10),
   insert_ts timestamp not null with default current timestamp,
   change_ts timestamp not null generated always for each row 
                                on update as row change timestamp
); 
```

# iphone - 使用 replaceOccuranceOfString 函数时出错

> ID：10118615
> 
> 赞同：0
> 
> 时间：2012-04-12T06:37:47.780
> 
> 标签：iphone, replace, nsmutablestring, nscfstring

`[str replaceOccurrencesOfString: withString: options: range:`

`[str replaceOccurrencesOfString:@"'" withString:@"!~" options:0 range:NSMakeRange(0,str.length)]`

我正在使用此函数将 ' 符号替换`NSMutableString`为 !~ 符号，以便我可以将该字符串存储到数据库中。当我将它存储到数据库中时它工作正常，但是在检索并使用相同的函数将其转换回来时它向我显示错误。

**错误** `*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Attempt to mutate immutable object with replaceOccurrencesOfString:withString:options:range:'`

这里，`str`是`NSMutableString`类型。我检查了它的类型，`[str class]`它的转换`NSCFString`者不知道它为什么会改变？我也尝试将其转换为`NSMutableString`，但它没有转换。我以其他方式尝试了很多次，但它在所有其他地方都可以正常工作，仅在我的一个视图控制器中，它向我展示了这一点。

任何猜测我在哪里做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:11:12.000

您没有展示如何将不可变从数据库转换为可变字符串。仅仅做`NSMutableString *mstr = str;`是不够的，你需要使用`NSMutableString *mstr = [NSMutableString stringWithString:str];`.

因为返回的字符串是不可变的，您可能需要考虑使用`[NSString stringByReplacingOccurrencesOfString:withString:]`而不是使用可变字符串。

# c++ - IBM Informix 数据库中 INT8 类型的 RFX 等效数据类型

> ID：10118616
> 
> 赞同：1
> 
> 时间：2012-04-12T06:37:48.460
> 
> 标签：c++, visual-studio, visual-c++, informix

我在 INT8 类型的 IBM Informix 数据库中有一个字段来保存 20 位数字。MSVC++（RFX 等效数据类型）中的等效数据类型应该是什么？我正在使用 Visual C++，我的 IDE 是 Visual Studio 6.0。

字段 initial_amount 将像这样声明：

```
RFX_Int64(pFX, _T("[initial_amount]"), m_initial_amount); 
```

我已经为此编写了以下自定义 RFX 定义代码。但似乎有同样的问题。

```
void AFXAPI RFX_Int64(CFieldExchange* pFX, LPCTSTR szName, __int64& value)
{
    ASSERT(AfxIsValidAddress(pFX, sizeof(CFieldExchange)));
    ASSERT(AfxIsValidString(szName));

    UINT nField;
    if (!pFX->IsFieldType(&nField))
        return;

    LONG* plLength = pFX->m_prs->GetFieldLengthBuffer(nField - 1, pFX->m_nFieldType);
    switch (pFX->m_nOperation)
    {
    case CFieldExchange::BindFieldToColumn:
            {
#ifdef _DEBUG
                    // Assumes all bound fields BEFORE unbound fields
                    CODBCFieldInfo* pODBCInfo =
                            &pFX->m_prs->m_rgODBCFieldInfos[nField - 1];

                    if (pODBCInfo->m_nSQLType != SQL_C_DOUBLE &&
                            pODBCInfo->m_nSQLType != SQL_FLOAT)
                    {
                            // Warn of possible field schema mismatch
                            if (afxTraceFlags & traceDatabase)
                                    TRACE1("Warning: double converted from SQL type %ld.\n",
                                            pODBCInfo->m_nSQLType);
                    }
#endif
            }
            // fall through

    default:
    LDefault:
            pFX->Default(szName, &value, plLength, SQL_BIGINT ,
                    sizeof(value), 22);
            return;

    case CFieldExchange::Fixup:
            if (*plLength == SQL_NULL_DATA)
            {
                    pFX->m_prs->SetNullFieldStatus(nField - 1);
                    value = afxDoublePseudoNull;
            }
            return;

    case CFieldExchange::SetFieldNull:
            if ((pFX->m_pvField == NULL &&
                    pFX->m_nFieldType == CFieldExchange::outputColumn) ||
                    pFX->m_pvField == &value)
            {
                    if (pFX->m_bField)
                    {
                            pFX->m_prs->SetNullFieldStatus(nField - 1);
                            value = afxDoublePseudoNull;
                            *plLength = SQL_NULL_DATA;
                    }
                    else
                    {
                            pFX->m_prs->ClearNullFieldStatus(nField - 1);
                            *plLength = sizeof(value);
                    }
#ifdef _DEBUG
                    pFX->m_nFieldFound = nField;
#endif
            }
            return;

    case CFieldExchange::MarkForAddNew:
            // can force writing of psuedo-null value (as a non-null) by setting field dirty
            if (value != afxDoublePseudoNull)
            {
                    pFX->m_prs->SetDirtyFieldStatus(nField - 1);
                    pFX->m_prs->ClearNullFieldStatus(nField - 1);
            }
            return;

    case CFieldExchange::MarkForUpdate:
            if (value != afxDoublePseudoNull)
                    pFX->m_prs->ClearNullFieldStatus(nField - 1);
            goto LDefault;

case CFieldExchange::AllocCache:
            {
                    CFieldInfo* pInfo = &pFX->m_prs->m_rgFieldInfos[nField - 1];
                    pInfo->m_pvDataCache = new __int64;
                    pInfo->m_nDataType = AFX_RFX_DOUBLE;
            }
            return;

#ifdef _DEBUG
    //  case CFieldExchange::DumpField:
//  {
//      *pFX->m_pdcDump << "\n" << szName << " = " << value;
//  }
            return;
#endif //_DEBUG

    }
} 
```

此代码适用于 Visual C++ 6.0 吗？如果没有，那我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T03:00:06.817

您只能将 19 位存储在 INT8 中，而不是 20 位。如果需要 20 位，请使用 DECIMAL(20,0)。

您应该使用 BIGINT 而不是 INT8；BIGINT 在磁盘上占用 8 个字节，而 INT8 在磁盘上占用 10 个字节（不要问）。

这与您之前关于 RFX 和 64 位整数的两个问题有何不同？

1.  [RFX_BigInt 错误](https://stackoverflow.com/questions/9770018/rfx-bigint-error)。
2.  [Informix 中 __int64 的 RFX 等效数据类型](https://stackoverflow.com/questions/9733226/rfx-equivalent-data-type-for-int64-in-informix)。

至于 MS Visual C++ 6.0 中可能有什么，对不起，我不知道。维基百科说它是在 1998 年发布的；这有点老了，不是吗？它可能不支持 64 位数据类型，这很可能是您在使用 64 位数据类型时遇到问题的原因。

# wso2 - wso2GadgetServer：如何使用代理？

> ID：10118618
> 
> 赞同：3
> 
> 时间：2012-04-12T06:37:56.927
> 
> 标签：wso2

我在公司网络中安装了 wso2GadgetServer-1.4.2。可以通过代理访问外部数据源。在 /repository/conf/wrapper.conf 我添加了以下内容：

```
wrapper.java.additional.11=-Dhttp.proxyHost=<ip of our proxy>
wrapper.java.additional.12=-Dhttp.proxyPort=<port the proxy is listening to>
wrapper.java.additional.13=-Dhttp.nonProxyHosts=127.0.0.1|localhost 
```

我（重新）启动了 GadgetServer 并再次打开仪表板。（预定义）小工具的（外部）内容未显示。而是显示了超时消息。在 /repository/logs/wrapper.logs 中，我找到了相应的条目，如下所示：

```
INFO   | jvm 1    | 2012/04/12 08:24:21 | Apr 12, 2012 8:24:20 AM org.apache.shindig.gadgets.servlet.ProxyBase outputError
INFO   | jvm 1    | 2012/04/12 08:24:21 | Warnung: Request failed
INFO   | jvm 1    | 2012/04/12 08:24:21 | org.apache.shindig.gadgets.GadgetException: org.apache.http.conn.ConnectTimeoutException: Connect to soa-platform.blogspot.com/209.85.148.132:80 timed out
INFO   | jvm 1    | 2012/04/12 08:24:21 |   at org.apache.shindig.gadgets.http.BasicHttpFetcher.fetch(BasicHttpFetcher.java:351)
[...]
INFO   | jvm 1    | 2012/04/12 08:24:21 | Caused by: org.apache.http.conn.ConnectTimeoutException: Connect to soa-platform.blogspot.com/209.85.148.132:80 timed out 
```

**有没有人有想法，如何解决这个问题？**

[顺便说一句：2 个人在http://wso2.org/forum/thread/21081](http://wso2.org/forum/thread/21081)解决了同样的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:15:55.817

在文章[WSO2 ESB 4.0.3 - 为客户端软件配置转发代理中，](http://peterverschueren.blogspot.de/2012/03/wso2-esb-403-configure-forward-proxy.html)我找到了一个解决方案。如果`http.`从配置中删除 ，则显示小工具的外部内容：

```
wrapper.java.additional.11=-DproxyHost=<ip of our proxy>
wrapper.java.additional.12=-DproxyPort=<port the proxy is listening to>
wrapper.java.additional.13=-DnonProxyHosts=127.0.0.1|localhost 
```

# sql - 从按字段排序的表中选择前 1 个结果

> ID：10118622
> 
> 赞同：0
> 
> 时间：2012-04-12T06:38:17.477
> 
> 标签：sql, sql-server-2008

我有一张这样的桌子：

```
id               package               start_date            option
1                342323                2012-02-02            1
2                3423333               2012-02-06            1
3                552234                2012-02-14            2 
```

我只想选择`(top 1)`具有`minimum start_date`.

我试过`where start_date = MIN(start_date)`了，但它不起作用。

我正在使用 SQL Server 2008。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T06:42:15.980

```
select top 1 * from table
order by start_date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T06:41:29.650

对于 Sql 服务器

```
 select top 1 * from tbl_name order by start_date 
```

对于 MySQL

```
 select * from tbl_name order by start_date asc limit 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T06:41:45.527

尝试：

```
where start_date = (select min(start_date) from yourtable) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T06:42:13.797

```
SELECT * FROM myTable
ORDER BY start_date ASC
LIMIT 1 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T06:42:15.433

```
SELECT * from Yourtable 
WHERE start_date = (SELECT (Min(yt1.Start_Date) FROM YourTable as yt1) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-12T06:42:33.800

对于 MSSQL

```
select top 1 * from your_table order by start_date asc 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-12T06:43:49.427

这个特定于 SQL Server 的查询应该为您提供所需的数据。尝试使用这个：

```
select top 1 * from tbl_name order by start_date asc 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-12T07:19:27.240

您还可以使用：

```
;With top_record as 
(
 SELECt *
  ,row_number() OVER (order by start_date ASC) as row
  FROM yourtable
)
SELECT * from top_record WHERE row = 1 
```

然后，这将使您可以灵活地通过使用 DENSE_RANK / RANK 而不是 ROW_NUMBER() 来确定如何处理平局

# javascript - ios中的phonegap通知不起作用

> ID：10118625
> 
> 赞同：0
> 
> 时间：2012-04-12T06:38:36.750
> 
> 标签：javascript, cordova, backbone.js, requirejs

Phonegap 或 Cordova 通知在 Backbone、require 和 javascript 中不起作用。

所以情况是如果 USERNAME 或 PASSWORD 为空，它应该通知（使用 phonegap ）但它不会工作。有任何想法吗？

我有这个代码

```
define([
'jquery',
'backbone',
'underscore',
'base64',
'mobile',
'cordova',
'const',
'text!template/login/login.tpl.html'
],function($, Backbone, _, base64, Mobile, Cordova, Const, template){

if(!Const.USERNAME || !Const.PASSWORD)
        {
            navigator.notification.alert("Invalid Username/Password!");
            $("input").val("");
        }else{

            var auth = EncodeAuth(Const.USERNAME,Const.PASSWORD);

            var sendAuthorization = function (xhr) {
              xhr.setRequestHeader('Authorization', auth)
            };

            this.model.save(this.model, {
                beforeSend : sendAuthorization,
                success: function(model,result){
                    if(result.ErrorMessage === null)
                    {
                        alert(JSON.stringify(result.Message));
                        $("input").val("");
                    }
                    else
                    {
                        alert(JSON.stringify(result.ErrorMessage));
                        $("input").val("");
                    }
                }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:59:17.480

解决了我的问题。我使用了错误版本的 cordova 或 phonegap。我正在使用 android 版本，因为我也在 Windows 上检查它。

# java - SOAP 消息中的数字签名

> ID：10118632
> 
> 赞同：2
> 
> 时间：2012-04-12T06:39:19.370
> 
> 标签：java, xml, soap, xml-serialization, digital-signature

我正在尝试在 Java 中为一些政府服务创建带有签名（俄罗斯 GOST34.10-2001 算法）的 SOAP 消息。问题是服务告诉我签名无效，我看不到我在哪里犯了错误。我从中读取私钥和证书的密钥容器是有效的。哪里出了问题？我知道我的问题非常具体，但我仍然希望有人能告诉我方法。

更新1：*一点更新：消息正文有一些西里尔文（utf）-8节点和值* 更新2：所以我通读了[这个问题](https://stackoverflow.com/questions/8438857/converting-a-byte-to-privatekey-in-java-for-digital-signature)并尝试以相同的方式获取PrivateKey并得到了这个异常：java.lang.IllegalArgumentException：private密钥算法与终端实体证书中的公钥算法不匹配

这是一些代码：

在这里，我将类编组到 SOAP 主体中：

```
try {
            MessageFactory mf = MessageFactory.newInstance();
            SOAPMessage sm = mf.createMessage();
            SOAPPart sp = sm.getSOAPPart();
            SOAPEnvelope envelope = sp.getEnvelope();

            QName bodyId = new QName("http://ws.unisoft/", "SendFullULRequest");

            SOAPBody sb = (SOAPBody) envelope.getBody();
            SOAPHeader sh = (SOAPHeader) envelope.getHeader();

            javax.xml.bind.JAXBContext jaxbCtx = javax.xml.bind.JAXBContext.newInstance(FullULRq.class);
            javax.xml.bind.Marshaller marshaller = jaxbCtx.createMarshaller();

            marshaller.marshal(new JAXBElement<FullULRq>(bodyId, FullULRq.class, fulr),
                    sm.getSOAPBody());

            sm.saveChanges(); 
```

然后我计算摘要值：

```
ReferenceType rt2 = new ReferenceType();
            rt2.setURI("#body");
            ////Пункт 7
            ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
            Source xmlSource = new DOMSource(sm.getSOAPBody());
            Result outputTarget = new StreamResult(outputStream);
            try {
                Transformer transformer = TransformerFactory.newInstance().newTransformer();
                transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
                transformer.setOutputProperty(OutputKeys.INDENT, "no");
                transformer.transform(xmlSource, outputTarget);
                Init.init();

                Canonicalizer canon = Canonicalizer.getInstance(Canonicalizer.ALGO_ID_C14N_EXCL_OMIT_COMMENTS);
                final ByteArrayInputStream is = new ByteArrayInputStream(canon.canonicalize(outputStream.toByteArray()));

                rt2.setDigestValue(computeDigestWithStream(is));
            } catch (Exception e) {
                e.printStackTrace();
            } 
```

使用这种方法：

```
public static byte[] computeDigestWithStream(ByteArrayInputStream stream) throws Exception {
    final MessageDigest digest =
            MessageDigest.getInstance("GOST3411");

    // processing data
    final DigestInputStream digestStream =
            new DigestInputStream(stream, digest);
    while (digestStream.available() != 0) {
        digestStream.read();
    } 
```

最后我从块中生成一个签名（其中存在元素）：

```
 ByteArrayOutputStream outputStream2 = new ByteArrayOutputStream();
        Source xmlSource2 = new DOMSource(sm.getSOAPBody());
        Result outputTarget2 = new StreamResult(outputStream2);
        Transformer transformer = TransformerFactory.newInstance().newTransformer();
        transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
        transformer.setOutputProperty(OutputKeys.INDENT, "no");
        transformer.transform(xmlSource2, outputTarget2);
        Init.init();
        Canonicalizer canon = Canonicalizer.getInstance(Canonicalizer.ALGO_ID_C14N_EXCL_OMIT_COMMENTS);
        InputStream is2 = new ByteArrayInputStream(outputStream2.toByteArray());
        byte[] bb = canon.canonicalize(outputStream2.toByteArray());
        byte[] signval = sign("CryptoProSignature", key, bb); 
```

符号（）方法：

```
public static byte[] sign(String algorithmName, PrivateKey privateKey, byte[] data) throws Exception {
        final Signature sig = Signature.getInstance(algorithmName);
        sig.initSign(privateKey);
        sig.update(data);
        return sig.sign();
    } 
```

如果它是相关的，这就是我从容器中读取 privateKey 的方式：

```
 KeyStore ks = KeyStore.getInstance("FloppyStore");

        String passwd = "*";
        String kalias = null; 

        ks.load(null, null);

        Enumeration enum1 = ks.aliases();
        for (; enum1.hasMoreElements();) {
            String tAlias = (String) enum1.nextElement();
            if (ks.isKeyEntry(tAlias)) {
                kalias = tAlias;
            }
            System.out.println(tAlias);
        }

        PrivateKey key = (PrivateKey) ks.getKey(kalias, passwd.toCharArray()); 
```

谢谢！

# jxl - jxls forEach 标签：如何定义局部变量？

> ID：10118633
> 
> 赞同：0
> 
> 时间：2012-04-12T06:39:20.677
> 
> 标签：jxl

我们能否在 jxls 中定义局部变量，用于设置列的递增计数。

例如：考虑以下

```
<jx:forEach items="${myList}" var="myVar">
-- i need to define a local integer variable here which will have an initial value as 0
-- and i will increment it and display in the output xls's first column
</jx:forEach> 
```

基本上我的要求是在 jxls 代码中有某种局部变量声明，我会在 xml 中增加和显示。

欢迎任何其他替代方案。

问候， 拉胡尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T03:22:54.553

jx:forEach 标记支持**varStatus**属性，该属性定义循环状态对象的名称，该名称将在每次迭代时传递到 bean 上下文中。循环状态对象是 LoopStatus 类的一个实例，它具有单个“**索引**”属性，用于标识正在迭代的集合中当前项的索引

```
<jx:forEach items="${employees}" var="employee" varStatus="status">
  | ${status.index} | ${employee.name} | ${employee.payment} | ${employee.bonus}
</jx:forEach> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:39:40.663

想通了.... 我们可以`<jx:out expr="hssfRow.getRowNum()" />`在要显示编号的列中使用。我们可以将上面的代码保留在`<jx:forEach items="${myList}" var="myVar">`标签内

# java - 为什么eclipse需要多次导入？

> ID：10118642
> 
> 赞同：0
> 
> 时间：2012-04-12T06:40:07.870
> 
> 标签：java, eclipse

a.java 已导入 java.io.*；我把所有的java都拖到了项目中，但有些以红色图标结束，而a.java以黄色结束。那些有红色的没有进口，就像没有进口一样，但这就是我把 a.java 放在那里的原因。为什么它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:43:14.950

导入的范围是它所在的 .java 文件。也就是说，在 a.java 中导入一些东西对 b.java 完全没有影响。

“import”关键字实际上有一个有点不幸的名字。刚接触 Java 的人通常认为它以某种方式“引入”。它真正做的只是给你一个速记来引用另一个包中的东西。例如，您可以在任何需要该类的地方编写“java.io.File”，而不是导入它并将其称为“File”。无论您使用导入我们的完全限定名称，编译后的代码最终都会完全相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T07:02:02.073

仅仅因为`A.java`拥有`import java.io.*;`它并不意味着可以`B.java`访问`java.io.*;`. `B.java`即使它们在同一个包中，也必须明确导入它想要使用的东西。这在 JLS 的[§6.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.3)和[§7.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html#jls-7.5)中有规定。

从第 6.3 节开始：

> 导入声明使类型或成员仅在实际包含导入声明的编译单元中通过其简单名称可用。导入声明引入的类型或成员的范围具体不包括包声明的 PackageName、当前编译单元中的其他导入声明或同一包中的其他编译单元。

# iphone - 将应用提交到苹果应用商店后如何更改“版本发布控制”

> ID：10118648
> 
> 赞同：4
> 
> 时间：2012-04-12T06:40:49.523
> 
> 标签：iphone, ios, app-store

我刚刚向 Apple 应用商店提交了我们应用的新版本，但我之前打开了“版本发布控制”，因此该应用现在将等待我在它（希望）获得批准后开始分发到 iTunes 应用商店.

我想更改此设置，以便在批准后自动发送到 App Store。我怎样才能做到这一点？

朱利安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T07:54:56.313

据我所知，你不能。您必须等待应用程序被接受或拒绝您的构建并更改它（在等待列表中重新开始......）

# ios - 在电话间隙 1.6.0 中打开外部链接

> ID：10118649
> 
> 赞同：1
> 
> 时间：2012-04-12T06:40:55.283
> 
> 标签：ios, cordova

如何使用最新版本的 phonegap 在 iOS 中打开外部链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T03:54:33.880

**找到了解决方案**

**在MainViewController.m**中取消注释此块

 **```
/* Comment out the block below to over-ride */
/*

- (void) webViewDidStartLoad:(UIWebView*)theWebView 
{
    return [super webViewDidStartLoad:theWebView];
}

- (void) webView:(UIWebView*)theWebView didFailLoadWithError:(NSError*)error 
{
    return [super webView:theWebView didFailLoadWithError:error];
}

- (BOOL) webView:(UIWebView*)theWebView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType
{
    return [super webView:theWebView shouldStartLoadWithRequest:request navigationType:navigationType];
}
*/ 
```

并替换这个完整的功能

```
- (BOOL)webView:(UIWebView *)theWebView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

和

```
- (BOOL) webView:(UIWebView*)theWebView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType
 {
     NSURL *url = [request URL];
     if ([[url scheme] isEqualToString:@"http"] || [[url scheme] isEqualToString:@"https"]) 
     {
        return YES;
     }
     else {
        return [ super webView:theWebView shouldStartLoadWithRequest:request navigationType:navigationType ];
     }
 } 
```**

# java - 比较 Scala 列表和 Java 列表

> ID：10118651
> 
> 赞同：15
> 
> 时间：2012-04-12T06:41:16.297
> 
> 标签：java, list, scala, comparison, equality

如何将 Scala 列表与 Java 列表进行比较？

```
scala> List(1, 2, 3, 4, 5)
res0: List[Int] = List(1, 2, 3, 4, 5)

scala> java.util.Arrays.asList(1, 2, 3, 4, 5)
res1: java.util.List[Int] = [1, 2, 3, 4, 5]

scala> res0 == res1
res2: Boolean = false 
```

是否有一些同时接受 Scala 列表和 Java 列表的静态辅助方法进行比较？或者在这两种列表上是否有一种“惰性包装器”，然后我可以通过它们直接比较`==`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-12T06:58:33.383

...或使用`sameElements`.

```
scala> import collection.JavaConversions._
import collection.JavaConversions._

scala> res0.sameElements(res1)            
res3: Boolean = true 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-12T09:28:24.330

您可以`JavaConverters`为此使用：

```
scala> import collection.JavaConverters._
import collection.JavaConverters._

scala> res0 == res1.asScala
res2: Boolean = true 
```

请注意，`asScala`仅返回原始视图`List`，请参阅[JavaConverters](http://www.scala-lang.org/api/current/index.html#scala.collection.JavaConverters$)`asScalaBufferConverter`文档中的文档。

# google-app-engine - appengine jpa 缓存 2 级性能很差

> ID：10118658
> 
> 赞同：1
> 
> 时间：2012-04-12T06:41:56.280
> 
> 标签：google-app-engine, jpa-2.0, datanucleus

appengine java sdk 1.6.4.1 数据核 jpa2.0.0 数据核缓存 3.0.1

大家好

我正在使用 DN 缓存级别 2 插件。

```
<property name="datanucleus.cache.level2.type" value="javax.cache"/>
<property name="datanucleus.cache.level2.cacheName" value="xxxxx"/> 
```

我注意到直接查询存在性能问题。

```
Query query = em.createQuery("Select m.key from MessageUser m "
                + "where " + " m.userKeyList = :userKey "
                + "AND m.date > :date ORDER BY m.date DESC"); 
```

缓存开启时，它在 1159 毫秒内执行，缓存关闭 86 毫秒。

有什么明显的错误。从 appstats 跟踪缓存版本正在以串行方式从 memcache 中检索每个实体。

关于这是预期的还是我塞满的任何解释？

缓存关闭

```
(1) 2012-04-12 06:19:38.737 "GET /timeline/status?id=49001&sincedate=1333485300" 200  real=86ms api=0ms overhead=0ms (6 RPCs) 

@11ms datastore_v3.RunQuery real=10ms api=241ms
@31ms datastore_v3.Get real=7ms api=208ms
@4ms datastore_v3.BeginTransaction real=4ms api=0ms
@52ms datastore_v3.Get real=7ms api=8ms
@65ms datastore_v3.Get real=4ms api=0ms
@78ms datastore_v3.Commit real=4ms api=0ms 
```

缓存开启

```
9) 2012-04-12 05:54:24.385 "GET /timeline/status?id=49001&sincedate=1333485300" 200 real=1159ms api=0ms overhead=0ms (109 RPCs) 
@13ms datastore_v3.RunQuery real=12ms api=241ms
@28ms memcache.Get real=2ms api=0ms
@33ms memcache.Get real=2ms api=0ms
@37ms memcache.Get real=3ms api=0ms
@42ms memcache.Get real=2ms api=0ms
@47ms memcache.Get real=2ms api=0ms
@50ms memcache.Get real=2ms api=0ms
@54ms memcache.Get real=2ms api=0ms
@57ms memcache.Get real=2ms api=0ms
<repeat this for another 50 or60 times
@3ms datastore_v3.BeginTransaction real=4ms api=0ms
@1126ms datastore_v3.Get real=5ms api=8ms
@1134ms memcache.Get real=3ms api=0ms
@1139ms memcache.Get real=2ms api=0ms
@1143ms datastore_v3.Get real=4ms api=0ms
@1153ms datastore_v3.Commit real=3ms api=0ms 
```

迭代实体列表的代码

```
List<Message> list = messageDAO.findSinceDate(userKey, sinceDate);

JSONArray jsonList = new JSONArray();

for (Message message : list) {
item.put("id", message.getKey().getId());
    item.put("name", message.getName());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T22:05:59.613

查询缓存可能只缓存结果集的实体键。然后在访问实体时查找实体本身。

以下是有关查询缓存以及它们如何实际降低性能的更多信息。它是关于 Hibernate L2 缓存，但 datanucleus 实现可能是相似的。 [http://tech.puredanger.com/2009/07/10/hibernate-query-cache/](http://tech.puredanger.com/2009/07/10/hibernate-query-cache/)

# c++ - 寻求更好的编码和压缩数字的方法

> ID：10118668
> 
> 赞同：0
> 
> 时间：2012-04-12T06:43:01.520
> 
> 标签：c++, encoding, numbers

我从一组 13 种数据中抽取了 13 个数字，每种类型有 4 项，所以总共 52 项。我们可以将项目编号为 1,2,3,4,5,6,7,8,9,10,11,12,13，所以会有 4 个“1”，4“2”，... 4集合中的“13”。从集合中抽取的 13 个数字是随机的。整个过程重复了百万次甚至更多，所以我需要一种有效的方法来存储这 13 个数字。我正在考虑使用某种编码方法将 13 个整数压缩成位。例如，我计算有多少“1”、“2”……首先，用 2 位对每个项目的计数进行编码，然后再使用 1 位来表示项目是否被绘制。所以对于每个项目，我们需要 3 位，总共 13 个项目需要 39 位。这样做肯定需要 8 个字节。但这仍然太多了，因为我说的是几百万或十亿次计算，并且每个集合都必须稍后存储到文件中。因此，如果我使用 8 个字节，我的数据仍然会询问大约 80GB。但是，如果我可以将其减少一半，我将节省 40GB。知道如何更有效地压缩这种结构吗？我也想用 5 个字节代替，但我需要处理不同类型的数字（一个 int + 一个 char），c++ 中是否有任何库可以轻松地为我进行编码/压缩？知道如何更有效地压缩这种结构吗？我也想用 5 个字节代替，但我需要处理不同类型的数字（一个 int + 一个 char），c++ 中是否有任何库可以轻松地为我进行编码/压缩？知道如何更有效地压缩这种结构吗？我也想用 5 个字节代替，但我需要处理不同类型的数字（一个 int + 一个 char），c++ 中是否有任何库可以轻松地为我进行编码/压缩？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:46:31.457

Google 的协议缓冲区可以存储位数较少的整数，具体取决于其值。它可能会显着减少您的存储空间。请参阅[http://code.google.com/p/protobuf/](http://code.google.com/p/protobuf/)

此处描述了实际的协议：[https ://developers.google.com/protocol-buffers/docs/encoding](https://developers.google.com/protocol-buffers/docs/encoding)

至于压缩，你看过[zlib](http://zlib.net/)是如何处理你的数据的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:00:08.313

使用您的方案，由 8 个字节的 64 位表示的每手 39 位将浪费 25 位，大约 40%。

如果您将手牌放在一起，您可以在不浪费这些位的情况下代表它们。

39 and 64 have no common factors, so the lowest common multiple is just the multiple 39 * 64 = 2496 bits, or 312 bytes. This holds 64 hands and is about 60% of the size of your current scheme.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T06:49:40.457

也许比您要寻找的要复杂一些，但请查看[HDF5](http://www.hdfgroup.org/HDF5/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T06:51:28.600

尝试谷歌搜索 LV77 和 LVZ 压缩

# ruby-on-rails - 如何指定 :path 和 :url 以在 Paperclip、Rails 3.0.12 中保存 img

> ID：10118675
> 
> 赞同：1
> 
> 时间：2012-04-12T06:43:40.173
> 
> 标签：ruby-on-rails

我在 Rails 3.0 应用程序中使用 Paperclip，以便向用户添加头像，但由于路径关闭，它不会保存图像。这是我得到的：

2012-04-11 23:38:29 -0700 开始为 127.0.0.1 获取“/profilepics/small/missing.png”

ActionController::RoutingError（没有路由匹配“/profilepics/small/missing.png”）：

我的用户模型有：

```
 has_attached_file :profilepic, :styles => { :small => "150x150>" } 
```

我应该为 :path => & :url => 放什么？

表格看起来像：

```
 <% form_for @user, :html => { :multipart => true } do |f| %>

      <%= f.file_field :profilepic %>

      <% end %> 
```

日志看起来像：

在 2012-04-12 00:33:51 -0700 开始为 127.0.0.1 获取“/system/profilepics/small/missing.png”

ActionController::RoutingError（没有路由匹配“/system/profilepics/small/missing.png”）：

在救援/布局中渲染 /usr/lib/ruby/gems/1.9.1/gems/actionpack-3.0.12/lib/action_dispatch/middleware/templates/rescues/routing_error.erb (1.2ms)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T07:15:43.703

查看我的示例：

```
 has_attached_file :avatar, :styles => { :thumb => "50x50#", :large => "1000x1000>", :medium => "200x200#" },
     :default_url => "/system/avatars/:style/missing.png",
     :url  => "/system/:attachment/:id/:style_:filename",
     :path => ":rails_root/public/system/:attachment/:id/:style_:filename" 
```

*   :default_url - 是默认图片的路径，当用户没有上传任何头像时
*   “#” - 此符号用于裁剪图像

然后你可以这样显示你的图像：

```
<%=image_tag(@user.avatar.url(:thumb))%>
<%=image_tag(@user.avatar.url(:medium))%> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:20:23.787

现在工作！！！

对于在同一问题上苦苦挣扎的人，这里有一些重要的事情要始终确保并检查：

1.  在您的表单中，始终指定**{ :multipart => true }**否则，表单将不接受文件附件。

    ```
    <%= form_for @user, :html => **{ :multipart => true }** do |f| %> 
    ```

2.  在您的 user.rb （或您要添加附件的任何模型）中，制作**attr_accessible :photo**（或您命名附件的任何名称）

3.  安装新的 Gem 后总是重启你的服务器。

：） 多谢你们！！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T07:35:29.110

如果您只想显示图像，则无需提供 url 和路径选项。

在显示页面中使用此行，它将显示图像...

```
 <%=image_tag(@user.profilepic.url(:small))%> 
```

享受..............

# ruby-on-rails - 耙路线提供虚假信息

> ID：10118680
> 
> 赞同：1
> 
> 时间：2012-04-12T06:43:52.580
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, routes, asset-pipeline

我想这件事在写作之前就已经让我很开心了，我觉得它与 Rails 3.1+ 中的资产管道功能有关。

我在 routes.rb 文件中定义了一个名为 assets 的路由。这是 routes.rb 文件：

```
resources :assets do 
    member do
      get 'remove_template'
      get 'all_sticker'
      get 'download_sticker'
    end
    collection do 
      get 'failed_asset'
    end
  end 
```

现在运行时`rake routes`：

```
sample_template_sticker_template GET    /sticker_templates/:id/sample_template(.:format) sticker_templates#sample_template
    update_copy_sticker_template PUT    /sticker_templates/:id/update_copy(.:format)     sticker_templates#update_copy
               sticker_templates GET    /sticker_templates(.:format)                     sticker_templates#index
                                 POST   /sticker_templates(.:format)                     sticker_templates#create
            new_sticker_template GET    /sticker_templates/new(.:format)                 sticker_templates#new
           edit_sticker_template GET    /sticker_templates/:id/edit(.:format)            sticker_templates#edit
                sticker_template GET    /sticker_templates/:id(.:format)                 sticker_templates#show
                                 PUT    /sticker_templates/:id(.:format)                 sticker_templates#update
                                 DELETE /sticker_templates/:id(.:format)                 sticker_templates#destroy
                       thank_you        /thank_you(.:format)                             home#thank_you
                            home        /welcome(.:format)                               home#index
                new_user_session GET    /users/sign_in(.:format)                         devise/sessions#new
                    user_session POST   /users/sign_in(.:format)                         devise/sessions#create
            destroy_user_session DELETE /users/sign_out(.:format)                        devise/sessions#destroy
                   user_password POST   /users/password(.:format)                        devise/passwords#create
               new_user_password GET    /users/password/new(.:format)                    devise/passwords#new
              edit_user_password GET    /users/password/edit(.:format)                   devise/passwords#edit
                                 PUT    /users/password(.:format)                        devise/passwords#update
                           login GET    /                                                devise/sessions#new
                          logout GET    /logout(.:format)                                devise/sessions#destroy
                           users GET    /users(.:format)                                 users#index
                                 POST   /users(.:format)                                 users#create
                        new_user GET    /users/new(.:format)                             users#new
                       edit_user GET    /users/:id/edit(.:format)                        users#edit
                            user GET    /users/:id(.:format)                             users#show
                                 PUT    /users/:id(.:format)                             users#update
                                 DELETE /users/:id(.:format)                             users#destroy
                        products GET    /products(.:format)                              products#index
                                 POST   /products(.:format)                              products#create
                     new_product GET    /products/new(.:format)                          products#new
                    edit_product GET    /products/:id/edit(.:format)                     products#edit
                         product GET    /products/:id(.:format)                          products#show
                                 PUT    /products/:id(.:format)                          products#update
                                 DELETE /products/:id(.:format)                          products#destroy
         create_sticker_stickers GET    /stickers/create_sticker(.:format)               stickers#create_sticker
                        stickers GET    /stickers(.:format)                              stickers#index
                                 POST   /stickers(.:format)                              stickers#create
                     new_sticker GET    /stickers/new(.:format)                          stickers#new
                    edit_sticker GET    /stickers/:id/edit(.:format)                     stickers#edit
                         sticker GET    /stickers/:id(.:format)                          stickers#show
                                 PUT    /stickers/:id(.:format)                          stickers#update
                                 DELETE /stickers/:id(.:format)                          stickers#destroy 
```

如您所见，即使我可以访问我在`routes.rb`.

谁能解释为什么输出`rake routes`不包含资产资源的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:58:16.177

改变你的资源的**路径**（`assets`），你会没事的！它将解决与`/assets`用于提供样式/图像/javasctipts 的默认路径的冲突。

试试这个：

```
resources :assets, path: '/my_assets' do 
```

# javascript - ie上的空白div但不是空白

> ID：10118683
> 
> 赞同：2
> 
> 时间：2012-04-12T06:43:58.040
> 
> 标签：javascript, css, internet-explorer

例如下面有一个 div,html 代码

```
<div id="testDiv"></div> 
```

但是当我设置`div(id=testDiv)`on ie 的 innerHTML 属性时，请参见下面的代码：

```
document.getElementById('testDiv').innerHTML= ''; 
```

并且 div 将具有高度和宽度，不再是空白 div
，这就是为什么？
如果我希望设置innerHTML=''时div是空白div（如果不设置显示：无），我该怎么办？
现在显示测试代码（在 ***ie7***和 chrome 上运行不同的结果）

```
<!DOCTYPE>
<html>
<head>
<style>
        #bl{background:red;}
</style>
<script type="text/javascript">
function f(a){
    var t=document.getElementById("bl");
    t.innerHTML=a;
}
</script>
</head>
<body>
    <button type="button"  onclick="f('')">test</button>
    <div id="bl"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:06:52.680

在您的函数中，检查文本是否为`''`，如果是，则从 div 中删除子节点。而不是设置它的值。

```
if (a=='') t.removeChild(t.childNodes[0]);
else t.innerHTML=a; 
```

检查了 IE8 和 IE8 的兼容模式（所以它也应该在 IE7 中工作）。

为了更稳定，您可以从中删除所有子节点`t`，就像这样......

```
if (a=='') {while (t.hasChildNodes() t.removeChild(t.childNodes[0]);}
else t.innerHTML=a; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T06:50:02.607

我认为这是一种已知的 IE 行为。除了设置`innerHTML`为空字符串，您还可以设置`font-size`为 0。

# ant - 您可以从自定义 Ant 任务中执行 Ant 任务吗？

> ID：10118687
> 
> 赞同：0
> 
> 时间：2012-04-12T06:44:24.370
> 
> 标签：ant

我正在编写一个自定义 Ant 任务来处理一些业务逻辑，并且我想调用[Move](http://ant.apache.org/manual/Tasks/move.html) Ant 任务。

我想我会使用 Execute java 类，但我很难弄清楚。

我是朝着正确的方向前进，还是您不能以 Ant 的方式从另一个类调用一个类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:39:29.703

对于您的任务，您想调用该`Move`任务。所以你想移动一些文件。

1.  一般来说，当你用 Java 编码时，你应该避免调用内置的 Ant 任务，因为它们通常性能很差。例如，您可以使用`File.renameTo()`方法 from`java.io.File`或`Files.move()`from `java.nio.file.Files`（仅限 JDK7）。

2.  如果您确实想利用一些 Ant 的东西，例如`<fileset>`，您可能希望您的任务能够将`Move`任务作为构建 xml 中的嵌套任务。只需将您的任务 a`TaskContainer`并在其方法中进行一些过滤。

3.  当然，您也可以只导入 Move 任务，设置所有需要的属性，然后调用它的`execute()`方法。但我不喜欢那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T21:13:12.040

上面的答案没有回答原始问题“您可以从自定义 Ant 任务中执行 Ant 任务吗？”

答案肯定是肯定的。

这是一个复制的例子。移动类似。虽然`File.renameTo()`可能比调用 Ant Move 任务具有更好的性能，但您可能希望从自定义 Ant 任务中调用 Ant 任务肯定是有原因的，尤其是在不存在合适的 JRE 替代方案的情况下。Ant API 非常广泛，并提供了大量有用的任务。此外，您可能希望从不同的自定义 Ant 任务中调用自定义 Ant 任务。

另请参阅[http://www.jajakarta.org/ant/ant-1.6.1/docs/ja/manual/api/org/apache/tools/ant/taskdefs/package-summary.html](http://www.jajakarta.org/ant/ant-1.6.1/docs/ja/manual/api/org/apache/tools/ant/taskdefs/package-summary.html)

```
import org.apache.tools.ant.types.FileSet;
import org.apache.tools.ant.taskdefs.Copy;
...
// set up the Strings inputPath and outputPath appropriately...
...
try{    
  FileSet inputSet = new FileSet();     // what to copy FROM
  inputSet.setDir(new File(inputPath)); 
  Copy copyTask = new Copy();
  copyTask.setProject(getProject());
  copyTask.setTodir(outputPath);        // where to copy TO
  copyTask.setFailOnError(true);
  copyTask.addFileset(inputSet);
  copyTask.execute();   
}
catch(Exception e){
  String msg = "Exception while invoking Copy task with inputPath=\"" + inputPath + "\" and outputPath=\"" + outputPath + "\": " + e.toString();
  throw new BuildException(msg, e);
} 
```

# objective-c - Xcode如何替换文本中的引号？

> ID：10118691
> 
> 赞同：2
> 
> 时间：2012-04-12T06:44:48.760
> 
> 标签：objective-c, xcode, xcode4

我正在解析一个包含很多引号的 xml 链接，我想替换它。我已经使用了这段代码，但由于引用，它不会运行。那你能帮帮我吗？

```
NSString *delete1 = [currentStringValueImage stringByReplacingOccurrencesOfString:@" "application" " withString:@""]; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T06:47:14.437

在您的字符串中使用 '\' 转义引号符号：

```
NSString *delete1 = [currentStringValueImage stringByReplacingOccurrencesOfString:@" \"application\" " withString:@""]; 
```

# c# - 使用 C# 将照片保存到用户无权访问的目录

> ID：10118693
> 
> 赞同：0
> 
> 时间：2012-04-12T06:45:16.810
> 
> 标签：c#, security, filesystems

我现在正在使用 C# 开发 WPF 应用程序，我需要能够保存一些图像。这些图像需要保存到当前登录的用户在没有一些管理权限的情况下无法访问的目录中（本质上是为了控制将哪些图像保存到该目录的安全性）。

如何设置此类安全权限？是否有一些目录可以添加子目录，其中包含这些图像？

通常，我会尝试在我所拥有的示例中发布一些代码。不过，我不完全确定从哪里开始解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:02:09.107

所有非用户程序的默认上下文是`system`您可以通过它使用的`service programming`并且您不熟悉它。黑客将登录另一个帐户（即管理员）并在该上下文中运行程序，这在所有 Windows 版本上都是不可能的，我认为不值得花费资源并且存在安全风险。

另一种解决方案是`encrypt`您的应用程序数据并将其存储在某处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T07:07:51.053

正如 Andrew 在他的评论中所说的那样，您最好从服务开始。这将在另一个帐户下运行（通常是系统，但您可以在控制面板中更改它）。首先，服务只是任何其他正常过程的第一步。因此，要在用户应用程序和服务之间建立连接，您可以随意使用[任何进程间通信](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365574.aspx)。

普通应用程序和服务之间的唯一区别是服务将通过服务管理器启动和管理，并且需要从[`ServiceBase`](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.aspx). 也可能这个[演练](http://msdn.microsoft.com/en-us/library/zt39148a.aspx)可以帮助你开始。

# java - 在 GWT DisclosurePanel 的标题中的一个小部件上设置自定义 onClick

> ID：10118694
> 
> 赞同：0
> 
> 时间：2012-04-12T06:45:24.403
> 
> 标签：java, gwt

我有以下用户界面情况：

```
<g:DisclosurePanel width="100%" ui:field="disclosurePanel">
       <g:customHeader>
         <g:HorizontalPanel width="100%" ui:field="tableRow">
           <g:cell width="16px" horizontalAlignment="ALIGN_CENTER">
             <g:Image url="images/plus-icon.gif" ui:field="icon"></g:Image>
           </g:cell>
           <g:cell width="20%">
             <g:Label ui:field="productName"></g:Label>
           </g:cell>
           <g:cell>
             <g:Anchor ui:field="info"><ui:msg>More info...</ui:msg></g:Anchor>
           </g:cell>
         </g:HorizontalPanel>
       </g:customHeader>
       <g:VerticalPanel width="100%" ui:field="details">
         <!-- details panel here -->
       </g:VerticalPanel>
     </g:DisclosurePanel> 
```

我想将一个事件处理程序方法绑定到`Anchor info`. 然而，我在标题中的每个小部件都会打开和关闭显示面板，即使我在`info`by 上挂了一些东西：

```
@UiHandler("info")
public void onInfoClicked(ClickEvent event)
{
   // do something custom, but do not open/close the disclosurepanel
} 
```

我希望这可以在不制作自定义复合材料或其他东西的情况下实现。你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:14:02.867

好吧，它按设计工作。您放入其中的每个元素`DisclosurePanel`都有一个单击处理程序，可以打开/关闭它。所以在你的标题里面应该只有图像和/或文本，基本上只有没有逻辑的元素。我会考虑以不同的方式排列您的 html 元素，因此链接不在标题内...

如果你真的，真的必须把它放在标题中，你可以将它添加到你的锚点击事件中：

```
disclosurePanel.setOpen(!disclosurePanel.isOpen()); 
```

这将恢复 DisclosurePanel 的先前状态。好的部分是，它太快了，你甚至看不到 DisclosurePanel 打开/关闭，不好的部分是，这真是糟糕的设计......

**另外：DisclosurePanel 使用 Anchors 来显示。锚点只允许每个定义块元素，所以你根本不应该这样使用它！（请参阅[将 div 放入锚点是否正确？](https://stackoverflow.com/questions/1827965/is-putting-a-div-inside-a-anchor-ever-correct)）**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T09:29:15.213

DisclosurePanel 的 header 是私有内部类 ClickableHeader：

```
private final class ClickableHeader extends SimplePanel {

private ClickableHeader() {
  // Anchor is used to allow keyboard access.
  super(DOM.createAnchor());
  Element elem = getElement();
  DOM.setElementProperty(elem, "href", "javascript:void(0);");
  // Avoids layout problems from having blocks in inlines.
  DOM.setStyleAttribute(elem, "display", "block");
  sinkEvents(Event.ONCLICK);
  setStyleName(STYLENAME_HEADER);
}

@Override
public void onBrowserEvent(Event event) {
  // no need to call super.
  switch (DOM.eventGetType(event)) {
    case Event.ONCLICK:
      // Prevent link default action.
      DOM.eventPreventDefault(event);
      setOpen(!isOpen);
  }
}
} 
```

假设您的代码：

```
@UiField
DisclosurePanel p;

//call this somewhere once on widget creation to 
//prevent header's default click handler
private void myInit()
{
    p.getHeader().unsinkEvents(Event.ONCLICK);
}

@UiHandler("info")
public void onInfoClicked(ClickEvent event)
{
   //trigger "standard" click handler if you want
   if(someCondition) {
       //convert GwtEvent descendant to NativeEvent descendant;
       p.getHeader().onBrowserEvent(event.getNativeEvent().<Event> cast());
   }

   // do something custom, but do not open/close the disclosurepanel
} 
```

# c# - 如何始终设置活动形式？

> ID：10118713
> 
> 赞同：1
> 
> 时间：2012-04-12T06:46:20.533
> 
> 标签：c#, winforms

有没有办法将表单设置为始终处于活动状态？无论我打开另一个表单，我打开的表单设置为非活动状态，而其他设置为活动状态。
例如：
我有两个表格：“主表格”和“提醒表格”。当我启动应用程序时，它会加载“提醒表单”，然后加载“主表单”，然后“主表单”处于活动状态，但我希望“提醒表单”处于活动状态，但表单加载方式的顺序需要是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:51:30.243

如果说“活跃”是指始终保持专注，那么内置方式是不可能的，它应该由您处理。如果您希望它始终可见（它位于其他表单之上），您可以使用`TopMost=true`属性，因此它将始终覆盖所有*非 TopMost*表单，顺便说一句，如果出现另一个 TopMost 表单，则不能保证。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T06:52:58.167

你可以使用

```
public ReminderForm()
{
    InitializeComponent();
    MainForm frm2 = new MainForm();
    MainForm.Show();
    Activate();
} 
```

如果您希望您的表单始终位于其他表单之上，请设置`TopMost = true;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T06:51:59.440

您可以注册该[`Deactivate`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.deactivate.aspx)事件，然后调用[`Activate`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.activate.aspx)以使表单再次处于活动状态：

```
public ReminderForm()
{
    //other stuff
    Deactivate += (s, e) => { if (/* check if really do it */) Activate(); };
} 
```

如果您只想让“提醒表单”可见，设置[`TopMost`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.topmost.aspx)为 true 是更简单的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T06:52:45.137

将表单的`TopMost`属性设置为`true`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T06:59:58.877

```
 private void button1_Click(object sender, EventArgs e)
    {
        Form2 f2 = new Form2();
        f2.Show();
        this.Focus();
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T08:31:59.523

将`TopMost`属性设置为`True`

# .net - 在 asp.net 2.0 中使用 XmlDataSource 控制转换 xml

> ID：10118714
> 
> 赞同：0
> 
> 时间：2012-04-12T06:46:25.650
> 
> 标签：.net, xml, xslt, transform, xmldatasource

使用 ASP.NET 2.0 我执行了以下步骤

**书本.xml**

```
<?xml version="1.0"?>
<greeting>
  Hello, World!
</greeting> 
```

**数据.xsl**

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="html"/>
  <xsl:template match="/">
    <xsl:apply-templates select="greeting"/>
  </xsl:template>
  <xsl:template match="greeting">
    <h1>
      <xsl:value-of select="."/>
    </h1>
  </xsl:template>
</xsl:stylesheet> 
```

**页**

```
<div>
   <asp:XmlDataSource runat="server" EnableCaching="false" ID="xmlDs" DataFile="~/book.xml" TransformFile="~/data.xsl"></asp:XmlDataSource>
</div> 
```

遗憾的是，页面中没有出现任何内容，我希望有一个 output `Hello, World!`。那么这里有什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:06:55.483

我认为您正在寻找的控制是`<asp:Xml>`：

```
<div>
    <asp:Xml id="test" DocumentSource="book.xml" TransformSource="data.xsl" runat="server"/>
</div> 
```

XmlDataSource 通常与其他数据绑定控件（如 TreeViews 或 Repeaters）结合使用

# html - 自动定位和缩放嵌入 iFrame

> ID：10118716
> 
> 赞同：0
> 
> 时间：2012-04-12T06:46:29.750
> 
> 标签：html, css, canvas

您好，我正在尝试制作一个非常简单的网站，其中包含背景图片和浮动 youtube 视频。我的问题是，无论分辨率或浏览器窗口如何，我都需要将 youtube 视频放在特定位置并调整大小以填充确定的空间。

视频需要进入左中暗区；我不太确定该怎么做我有一段时间没有编码了。我有足够的背景来调整大小，但除此之外。我试图遵循这些指南。

[http://css-tricks.com/fluid-width-youtube-videos/](http://css-tricks.com/fluid-width-youtube-videos/)

我将不胜感激任何帮助。你可以在这里找到图片 [http://i.stack.imgur.com/rkYos.jpg](http://i.stack.imgur.com/rkYos.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:09:58.030

将 iframe 放入 div 并将其绝对定位在您想要的位置

[http://www.zachgraeve.com/2006/10/01/center-abosulte-position-div/](http://www.zachgraeve.com/2006/10/01/center-abosulte-position-div/)

确保将 z-index 设置为更高的正值以使其保持“顶部”

另请参阅[https://stackoverflow.com/search?q=absolute+position+div](https://stackoverflow.com/search?q=absolute+position+div)

# iphone - 添加到主屏幕后如何阻止 iOS Safari 网页加载缓存页面？

> ID：10118719
> 
> 赞同：3
> 
> 时间：2012-04-12T06:46:39.490
> 
> 标签：iphone, ios, ipad, web-applications, safari

我在 iOS 主屏幕上添加了一个网站。如果加载从 iOS 主屏幕打开网站，它似乎总是在加载缓存页面。即使我更新了页面或完全删除了页面，它仍然会加载原始版本。

如果我直接从 iOS Safari 打开网站而不是单击主屏幕上的图标，它将加载更新的页面。

该站点托管在运行 Ubuntu 11.10 的 Apache 上。

我在里面添加了以下内容

并添加

试图强制它加载更新的页面。

我还尝试从 iOS Safari 设置中清除缓存、cookie 和历史记录，并重新启动 ipad，但似乎没有任何效果。

请帮忙~！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T06:53:29.957

*应该这样做，尽管在最初不是*从缓存副本加载页面的情况下，它会导致页面的双重加载。

```
<script>
    var url = window.location.href;
    if (url.indexOf('rnd=') == -1) {
        url = (url.indexOf("?") == -1 ? url + "?rnd=" : url + "&rnd=") + Math.random();
        window.location.href = url;
    }
</script> 
```

所以基本上你会添加`http://mysite.com/myCoolPage.html`到 iOS 主屏幕，然后每当页面在浏览器中加载时，它就会重定向到`http://mysite.com/myCoolPage.html?rnd=xxxxxxx`，有效地防止它被缓存。

# iphone - 在 ios 5 中的 MP 音乐播放器控制器中出现错误的播放状态

> ID：10118726
> 
> 赞同：8
> 
> 时间：2012-04-12T06:47:20.327
> 
> 标签：iphone, objective-c, ios, ios5, ios4

我在 MP 音乐播放器中的播放状态错误。在播放歌曲时，我处于暂停状态。我的应用程序在 ios 4 中运行良好，但我在 ios 5 中遇到了这个问题。有人可以帮帮我吗？

我的代码在这里。

```
[musicPlayer stop];
if (userMediaItemCollection)
{
   userMediaItemCollection=nil; 
}
musicPlayer.nowPlayingItem=nil;

userMediaItemCollection=[MPMediaItemCollection collectionWithItems:[mediaItemCollection    items]];

[musicPlayer setQueueWithItemCollection:userMediaItemCollection];
[musicPlayer setNowPlayingItem:    
[[userMediaItemCollectionitems]objectAtIndex:indexOfCurrentObject]];
[self enablePrevAndNextButtons];

[musicPlayer play];        
}

-(void)playbackStateDidChanged:(NSNotification *)notification
{

 if (musicPlayer.playbackState!=MPMusicPlaybackStatePlaying)
 {
    [playPauseButton setBackgroundImage:[UIImage imageNamed:@"play_iPad.png"] forState:UIControlStateNormal];
 }
 else if(musicPlayer.playbackState==MPMusicPlaybackStatePlaying)
 {
    [playPauseButton setBackgroundImage:[UIImage imageNamed:@"pause_iPad.png"] forState:UIControlStateNormal];
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T20:36:50.397

我也向 Apple 报告了这个错误。通过执行以下操作，我能够 100% 地重现它：

启动使用 MPMusicPlayerController 的应用程序。启动“音乐”应用程序。点击播放，跳过，跳过，暂停，播放，暂停 打开原始应用程序，MPMusicPlayerController 的 MPMusicPlaybackState 将不正确。

这里提出的解决方案都不适合我。有效的解决方案是跟踪错误发生的时间并在这些情况下特别更新 UI。

收到`UIApplicationDidBecomeActiveNotification`通知后（有关更多详细信息，请参阅 matbur 帖子），查看当 MPMusicPlaybackState 说它是时音频是否实际上没有播放：

```
-(BOOL) isPlaybackStateBugActive {
    MPMusicPlaybackState playbackState = self.musicPlayer.playbackState;
    if (playbackState == MPMusicPlaybackStatePlaying) {
        AudioSessionInitialize (NULL, NULL, NULL, NULL);
        UInt32 sessionCategory = kAudioSessionCategory_AmbientSound;
        AudioSessionSetProperty (kAudioSessionProperty_AudioCategory, sizeof (sessionCategory), &sessionCategory);
        AudioSessionSetActive (true);

        UInt32 audioIsPlaying;
        UInt32 size = sizeof(audioIsPlaying);
        AudioSessionGetProperty(kAudioSessionProperty_OtherAudioIsPlaying, &size, &audioIsPlaying);

        if (!audioIsPlaying){
            NSLog(@"PlaybackState bug is active");
            return YES;
        }
    }

    return NO;
} 
```

不要忘记导入 AudioToolbox 框架。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T13:43:30.373

这些变通办法都不能解决我的应用程序的问题。这是 iOS 中的一个错误，在 Apple 修复它之前，我的应用程序将永远无法正常运行。

我有一个带有播放/暂停按钮的音乐播放器。播放音乐时，按钮显示“暂停”图标。当音乐暂停时，按钮会显示“播放”图标 - 就像所有音乐应用程序一样。我可以通过执行以下操作随时复制该错误：1\. 在我的应用程序中播放音乐（播放/暂停按钮正确显示“暂停”图标） 2\. 后台我的应用程序并锁定我的手机约 10 分钟 3\. 加倍点击主页并点击 iPod 控件中的暂停按钮 4\. 解锁我的手机并再次打开我的应用程序 5\. 音乐将停止播放，但我的应用程序在应该“播放”时仍显示“暂停”图标

我已经进行了大量的调试和日志记录，以确保在我的应用程序变为活动状态时始终调用更新我的播放/暂停按钮的方法。问题是当我重新进入我的应用程序时，即使音乐停止/暂停，MPMusicPlayer 的播放状态仍设置为 MPMusicPlaybackStatePlaying。

大约一年前，我为此提交了一份错误报告，但没有收到来自 Apple 的任何消息。如果其他人会提交一份，将不胜感激。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-14T13:20:53.960

此代码在上一个按钮单击时使用上一首歌将播放

```
- (IBAction)playPreviousSongInList:(id)sender {

        static NSTimeInterval skipToBeginningOfSongIfElapsedTimeLongerThan = 3.5;

        NSTimeInterval playbackTime = self.musicPlayer.currentPlaybackTime;
        if (playbackTime <= skipToBeginningOfSongIfElapsedTimeLongerThan) {

            [self.musicPlayer skipToPreviousItem];

        } else {

            [self.musicPlayer skipToBeginning];
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T18:39:17.800

我在发布 iOS 5 时遇到了同样的问题。我发现，playbackState 属性确实得到了更新，但是在延迟之后，所以当你的playbackStateDidChanged 方法运行时它还没有设置。

我的解决方法是在我开始播放时设置我自己的名为 musicPlayerRecentlyStartedPlaying 的实例变量。然后我使用一个从计时器调用的方法来检查该变量和playbackState 属性，以确定播放器是否真的在播放：

```
- (void)playMusic {
    [self.musicPlayer play];
    self.musicPlayerRecentlyStartedPlaying = TRUE;
    self.musicControlsUpdateTimer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(updateMusicControls:) userInfo:nil repeats:TRUE];
}

- (void)stopMusic {
    [self.musicPlayer stop];
    self.musicPlayerRecentlyStartedPlaying = FALSE;
    [self.musicControlsUpdateTimer invalidate];
}

- (void)updateMusicControls:(NSTimer *)timer {
    BOOL playing = (([self.musicPlayer playbackState] == MPMusicPlaybackStatePlaying)&&(self.musicPlayer.nowPlayingItem));
    if (!playing) {
        // check to see if we recently started playing
        if (self.musicPlayerRecentlyStartedPlaying) {
            playing = TRUE;
        }
    } else {
        // once the property is updated, we no longer need this
        self.musicPlayerRecentlyStartedPlaying = FALSE;
    }
} 
```

您可能不需要从计时器调用 updateMusicControls，但我这样做是因为我还在音乐播放时更新进度条的位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T05:50:07.923

我有同样的问题，但是当我的应用程序在后台运行/暂停多次时，我向 Apple 报告了该错误并希望尽快得到答复，我想知道我的编码是否错误或是否存在 API 问题。如果这是您遇到的错误，这可能会有所帮助。我找到了一个解决方法，即使不是最好的解决方案，因为我的应用程序是可以接受的：

在 viewDidLoad 中，添加以下内容：

```
NSNotificationCenter *notificationCenter = [NSNotificationCenter defaultCenter];
[notificationCenter addObserver: self
                       selector: @selector (handle_ApplicationDidBecomeActive:)
                           name: UIApplicationDidBecomeActiveNotification
                         object: nil]; 
```

然后，创建一个 handle_ApplicationDidBecomeActive 方法，并添加：

```
- (void) handle_ApplicationDidBecomeActive: (id) notification
{
    if (musicPlayer.playbackState!=MPMusicPlaybackStatePlaying)
    {
       [playPauseButton setBackgroundImage:[UIImage imageNamed:@"play_iPad.png"] forState:UIControlStateNormal];
       [musicPlayer pause];
    }
    else if(musicPlayer.playbackState==MPMusicPlaybackStatePlaying)
    {
       [playPauseButton setBackgroundImage:[UIImage imageNamed:@"pause_iPad.png"] forState:UIControlStateNormal];
       [musicPlayer pause];
    }
} 
```

（不要将此代码放在您的playbackStateDidChanged 方法中，因为这可能会产生无限循环）

这会将您的按钮和音乐播放器的状态同步到 API 报告的状态。在巧合的情况下，不会有任何类型的影响，在其他情况下，播放器将相应地暂停/播放。

# shell - 如何从 shell 中的文本文件中选择随机的唯一行？

> ID：10118733
> 
> 赞同：10
> 
> 时间：2012-04-12T06:47:47.040
> 
> 标签：shell, sed, awk

我有一个行数未知的文本文件。我需要随机抓取其中一些行，但我不希望有任何重复的风险。

我试过这个：

```
jot -r 3 1 `wc -l<input.txt` | while read n; do
  awk -v n=$n 'NR==n' input.txt
done 
```

但这很丑陋，并且不能防止重复。

我也试过这个：

```
awk -vmax=3 'rand() > 0.5 {print;count++} count>max {exit}' input.txt 
```

但这显然也不是正确的方法，因为我什至不能保证得到`max`线路。

我被困住了。我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T08:57:02.917

这可能对您有用：

```
shuf -n3 file 
```

[shuf](http://www.gnu.org/software/coreutils/manual/html_node/shuf-invocation.html#shuf-invocation)是 GNU coreutils 之一。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T06:58:48.783

如果您可以访问 Python（将 更改`10`为您想要的）：

```
python -c 'import random, sys; print("".join(random.sample(sys.stdin.readlines(), 10)).rstrip("\n"))' < input.txt 
```

（这适用于 Python 2.x 和 3.x。）

另外，（再次将 更改`10`为适当的值）：

```
sort -R input.txt | head -10 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T06:53:47.817

如果`jot`在您的系统上，那么我猜您正在运行 FreeBSD 或 OSX 而不是 Linux，因此您可能没有类似`rl`或`sort -R`可用的工具。

不用担心。我不得不在不久前这样做。试试这个：

```
$ printf 'one\ntwo\nthree\nfour\nfive\n' > input.txt
$ cat rndlines
#!/bin/sh

# default to 3 lines of output
lines="${1:-3}"

# default to "input.txt" as input file
input="${2:-input.txt}"

# First, put a random number at the beginning of each line.
while read line; do
  printf '%8d%s\n' $(jot -r 1 1 99999999) "$line"
done < "$input" |
sort -n |               # Next, sort by the random number.
sed 's/^.\{8\}//' |     # Last, remove the number from the start of each line.
head -n "$lines"        # Show our output

$ ./rndlines input.txt 
two
one
five
$ ./rndlines input.txt 
four
two
three
$ 
```

这是一个 1 行示例，它还使用 awk 更干净地插入了随机数：

```
$ printf 'one\ntwo\nthree\nfour\nfive\n' | awk 'BEGIN{srand()} {printf("%8d%s\n", rand()*10000000, $0)}' | sort -n | head -n 3 | cut -c9- 
```

请注意，不同版本的`sed`（在 FreeBSD 和 OSX 中）可能需要`-E`选项而不是`-r`处理 ERE，或者如果您想明确使用正则表达式中的 BRE 方言，尽管我测试的所有内容都适用于 BRE 中的转义边界。（（HP/UX 等）的古代版本`sed`可能不支持这种表示法，但只有在您已经知道如何做到这一点时才会使用这些表示法。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-12T07:01:48.793

这应该可以解决问题，至少`bash`假设您的环境具有其他可用命令：

```
cat chk.c | while read x; do
    echo $RANDOM:$x
done | sort -t: -k1 -n | tail -10 | sed 's/^[0-9]*://' 
```

它基本上输出您的文件，在每行的开头放置一个随机数。

然后它对该数字进行排序，抓取最后 10 行，并从中删除该数字。

因此，它为您提供了文件中的 10 行随机行，没有重复。

例如，这是使用该`chk.c`文件运行 3 次的副本：

```
====
pax$ testprog chk.c
} else {
}
newNode->next = NULL;
colm++;

====
pax$ testprog chk.c
}

arg++;
printf (" [%s] n", currNode->value);
free (tempNode->value);

====
pax$ testprog chk.c

char tagBuff[101];
}
return ERR_OTHER;
#define ERR_MEM 1

===
pax$ _ 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-12T10:43:16.597

```
sort -Ru filename | head -5 
```

将确保没有重复。并非所有的实现`sort`都有`-R`选项。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-12T09:07:39.907

要使用 Perl获取`N`随机行：`FILE`

```
perl -MList::Util=shuffle -e 'print shuffle <>' FILE | head -N 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-10-02T21:41:10.080

如果您不想安装其他任何东西，这是使用 ruby​​ 的答案：

```
cat filename | ruby -e 'puts ARGF.read.split("\n").uniq.shuffle.join("\n")' 
```

例如，给定一个文件 (dups.txt)，如下所示：

```
1 2
1 3
2
1 2
3
4
1 3
5
6
6
7 
```

您可能会得到以下输出（或一些排列）：

```
cat dups.txt| ruby -e 'puts ARGF.read.split("\n").uniq.shuffle.join("\n")'
4
6
5
1 2
2
3
7
1 3 
```

评论中的更多示例：

```
printf 'test\ntest1\ntest2\n' | ruby -e 'puts ARGF.read.split("\n").uniq.shuffle.join("\n")'
test1
test
test2 
```

当然，如果你有一个包含重复测试行的文件，你只会得到一行：

```
printf 'test\ntest\ntest\n' | ruby -e 'puts ARGF.read.split("\n").uniq.shuffle.join("\n")'
test 
```

# wpf - 如何处理 InputBinding 命令和切换按钮？

> ID：10118736
> 
> 赞同：0
> 
> 时间：2012-04-12T06:47:50.913
> 
> 标签：wpf, command, togglebutton, inputbinding

我有一个 InputBinding 目的是 F6 作为激活编辑模式的快捷方式，如下所示：

```
<Window.InputBindings>
    <KeyBinding Gesture="F6" Command="{Binding Path=ActivateEdit}"/>
</Window.InputBindings> 
```

按钮本身如下所示：

```
<ToggleButton Height="26" Width="26" Margin="0,0,1,1" Padding="1" 
                            ToolTip ="Bearbeiten (F6)" 
                            Command="{Binding ActivateEdit}"               
                            IsChecked="{Binding IsEditPressed, Converter={StaticResource boolToNullableBoolConverter}}"
                            IsTabStop="False" BorderThickness="0" BorderBrush="{x:Null}" Focusable="False">
    <Image Source="/Images/Edit.ico" Stretch="Fill" Height="16" Width="16"/>
</ToggleButton> 
```

如果手动按下按钮，则会触发命令。此外，如果用户按 F6。但在这种情况下，按钮不会获​​得 IsChecked 状态。如何在不为 KeyBinding 编写不同命令的情况下完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:53:32.630

让您的命令“切换”`IsEditPressed`属性，理想情况下，这将是唯一需要做的事情，这样可以更轻松地保持一切同步。然后，您甚至不需要`ToggleButton`本身的命令，因为`IsChecked`绑定就足够了。

# python - 将特定对象（但类型相同）附加到 Django 中的过滤对象

> ID：10118737
> 
> 赞同：0
> 
> 时间：2012-04-12T06:48:09.903
> 
> 标签：python, django, django-queryset

如果我得到这样的`User`对象列表

```
special_user_list = User.objects.filter( userprofile__user_type = 'special' ) 
```

我如何还附加`request.user`（当前登录的用户），这也是一个`User`？

我知道我可能可以做类似的事情

```
special_user_list = User.objects.filter(
    Q( userprofile__user_type = 'special' ) |
    Q( pk = request.user.pk )
) 
```

但我不确定上面的代码是否可以双重包含`request.user`（如果`request.user.get_profile().user_type = 'special'`也是）。此外，我想避免使用复杂的 SQL 语句来添加我已经知道身份的用户来访问数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T06:50:56.950

数据库执行此操作比 Python 执行此操作便宜。

```
special_user_list = User.objects.filter(
    Q(userprofile__user_type='special') |
    Q(pk=request.user.pk)
).distinct() 
```

# php - 在 Vim 中（重新）格式化 PHP 代码

> ID：10118738
> 
> 赞同：1
> 
> 时间：2012-04-12T06:48:11.223
> 
> 标签：php, vim, code-formatting, macvim

如何格式化看起来像这样的 PHP 代码

```
class SomeClass
{
    function insideclass()
    {

    }
} 
```

进入这个，在没有任何外部工具的情况下使用 Vim？

```
class SomeClass {
    function insideclass() {

    }
} 
```

我并不是说这是格式化代码的最佳方式，但这是我们在团队中所遵循的。

**编辑**：删除了对代码片段插件的引用，这导致了对该问题的一些混淆。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T07:58:49.160

你有两个不相关的问题，你不会找到一个独特的解决方案。

1.  **您不喜欢默认`class`代码段。**

    没问题。如果它不存在，`~/.vim/snippets/php.snippets`请按照其他答案创建和自定义它以适应您团队的规则。Snipmate 不够聪明，无法适应您的编码风格。

2.  **您现有的一些代码不符合您的编码规则。**

    Snipmate 根本无济于事，因为它只处理*插入*，而不处理*转换*。您将需要一些外部[美化](http://beautifyphp.sourceforge.net/)器或一些宏。

    ***编辑***

    这是一个非常简单的命令，可以完全按照*您的示例*进行操作。我不保证它适用于任何地方的一切。把它作为一个天真的起点。

    ```
    :g/^\s*{\s*$/normal kJ 
    ```

    *   `:g/pattern`作用于所有包含 的行`pattern`，请参阅`:h :global`。

    *   `^\s*{\s*$``{`无论它们与行首之间有多少空格，都匹配所有单个。

    *   `normal`执行`normal`命令，请参阅`:h :normal`.

    *   `kJ`上升一行并`J`与匹配的行一起进入该行。

    *   完毕。

    ***结束编辑***

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T06:54:51.623

为什么不修改那个插件的源代码呢？

例如，更改这些：

```
snippet class
    /**
     * ${1}
     */
    class ${2:ClassName}
    {
        ${3}
        function ${4:__construct}(${5:argument})
        {
            ${6:// code...}
        }
    } 
```

到

```
snippet class
    /**
     * ${1}
     */
    class ${2:ClassName}{
        ${3}
        function ${4:__construct}(${5:argument}){
            ${6:// code...}
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T06:56:33.190

所有 snipmate 片段都存储在一个目录中。转到该目录并编辑所需的文件。

目录存储在 vim 目录中并调用`snippets`. 在那里你看到一个`php.snippets`文件。转到该文件，在第 70 行，您可以编辑该类的代码段。

# ruby-on-rails - 将 Cassandra 与 Rails 应用程序一起使用

> ID：10118740
> 
> 赞同：0
> 
> 时间：2012-04-12T06:48:31.257
> 
> 标签：ruby-on-rails, ruby, cassandra

我想在我的 rails 应用程序中使用 cassandra。我心中有几个问题： * 如何连接 cassandra 客户端？* 如何在请求期间将 cassandra 客户端对象存储在所有模型对象之间共享的位置。当然，如果有连接池，我需要在请求处理结束时将对象返回到池中。

非常感谢贝朗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:21:10.267

我找到了解决方案：

我应该`Thread.current[]`用来确保不会根据请求重新创建 cassandra 客户端。

就像是：

```
Thread.current[:cassandra_client] ||= Cassandra.new(keyspace, servers) 
```

# xml - 基于多个属性从 XML 中读取

> ID：10118745
> 
> 赞同：4
> 
> 时间：2012-04-12T06:48:48.643
> 
> 标签：xml, delphi, delphi-2010

我有以下格式的 XML：

```
<Accounts>
  <Account ID="1"   City="Bangalore" Amount="2827561.95" /> 
  <Account ID="225" City="New York"  Amount="12312.00" /> 
  <Account ID="236" City="London"    Amount="457656.00" /> 
  <Account ID="225" City="London"    Amount="23462.40" /> 
  <Account ID="236" City="Bangalore" Amount="2345345.00" /> 
</Accounts> 
```

在这里，使帐户独一无二的是属性`ID`和`City`.

我如何阅读`Amount`独特的？如何读取`ID`和`City`属性组合的数量？

例如，我需要使用 和 获取帐户`Amount`的。如果我使用类似的代码`ID=225``City=London`

```
Node.GetAttribute('ID')=225 
```

它总是给我第一个 ID=225 的节点

感谢您。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-12T07:03:34.553

试试XPath，用这句话`./Accounts/Account[@ID="225"][@City="London"]`定位节点。

试试这个样本

```
{$APPTYPE CONSOLE}

uses
  MSXML,
  SysUtils,
  ActiveX,
  ComObj;

Const
 XmlStr =
' <Accounts>'+
'  <Account ID ="1"   City="Bangalore" Amount="2827561.95"/>'+
'  <Account ID="225" City="New York"  Amount="12312.00"/>'+
'  <Account ID="236" City="London"    Amount="457656.00"/>'+
'  <Account ID="225" City="London"    Amount="23462.40"/>'+
'  <Account ID="236" City="Bangalore" Amount="2345345.00"/>'+
'</Accounts>';

procedure Test;
Var
  XMLDOMDocument  : IXMLDOMDocument;
  XMLDOMNode      : IXMLDOMNode;
begin
  XMLDOMDocument:=CoDOMDocument.Create;
  XMLDOMDocument.loadXML(XmlStr);
  XMLDOMNode := XMLDOMDocument.selectSingleNode(Format('./Accounts/Account[@ID="%s"][@City="%s"]', ['225', 'London']));
  if XMLDOMNode<>nil then
    Writeln(Format('Amount %s',[String(XMLDOMNode.attributes.getNamedItem('Amount').Text)]));
end;

begin
 try
    CoInitialize(nil);
    try
      Test;
    finally
      CoUninitialize;
    end;
 except
    on E:EOleException do
        Writeln(Format('EOleException %s %x', [E.Message,E.ErrorCode]));
    on E:Exception do
        Writeln(E.Classname, ':', E.Message);
 end;
 Writeln('Press Enter to exit');
 Readln;
end. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T07:03:54.207

```
function getAmount(Id, City: string): string;
begin
  Result := ''
  aNode := xmldocument1.DocumentElement.ChildNodes['Accounts'];
  for i := 0 to ChildNodes.Count do 
    with aNode.Nodes[i] do
      if (Attributes['ID'] = Id) and (Attributes['City'] = City) then 
      begin
        Result:= Attributes['Amount'];
        Break;
      end;
  end;
end; 
```

# php - 使用 memcached 存储桶掌握 Couchbase

> ID：10118749
> 
> 赞同：2
> 
> 时间：2012-04-12T06:48:56.730
> 
> 标签：php, memcached, couchbase

我的情况是，我目前有 3 个 memcached 实例在 3 个不同的服务器上运行。我的应用程序当前位于相同的 3 个不同节点。所有应用程序服务器都知道所有 memcached 服务器，但如果其中一个出现故障，我无法通知。这个想法是将 memcached 服务器移动到自己的节点。

我已经开始将 CouchBase 视为解决此问题的替代方案，但不确定它是否会起作用。

是否可以让我在每个应用程序节点上都有一个 CouchBase 集群，然后将它们连接到不同的 memcached 服务器，然后 CouchBase 将监视并知道哪些是活动的？

在这种情况下，当前与 memcached 实例相关联的应用程序如何知道如果 memcached 实例之一关闭了如何获取数据？还是 CouchBase 将成为负责存储它的中间人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:39:36.403

Couchbase 是一个非常灵活的平台，可在替换标准 memcached 实例时使用。它允许您将大量容错从您的应用程序转移到 couchbase 实例。

由于您使用的是 PHP，我建议您在访问 Couchbase 集群时使用 PHP SDK。可以在这里获得：http: [//www.couchbase.com/develop/php/current](http://www.couchbase.com/develop/php/current)

现在，重要的是要知道 PHP 的 SDK 是“vbucket 感知”的。这意味着当您使用它连接到 Couchbase 集群时，它将从您放入构造函数的地址中收集所有节点的所有信息。例如：

```
#Create the Couchbase object
$cb_obj = new Couchbase("127.0.0.1:8091", "user", "pass", "default"); 
```

这将创建一个对象，您可以通过该对象运行命令，它自己能够在节点出现故障时处理所有故障转移，等等。每种语言都有自己的小代码过程（我自己通常使用 Python），但是一旦你熟悉了它们，它们就会非常有效。

可以通过命令行界面或通过访问 Web URL 来管理集群`http://<nodehostname>:8091/`。这也是您在安装初始集群后将访问的 URL。

我强烈推荐 Couchbase 作为独立 memcached 的替代品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:29:41.193

使用 Couchbase，您将创建一个由三个节点中的每一个组成的集群。在您的应用程序中，您创建了一个 PHP(?) Couchbase 客户端的实例，并为其提供了指向至少一个节点的 URI。客户端将从这些节点中的任何一个了解集群的拓扑。

客户端维护与集群的流式连接，并将在拓扑发生任何变化时收到通知。如果一个节点宕机，客户端会做出相应的反应。

您可以设置自动故障转移和通知以提醒您自动故障转移事件。

# php - 为什么我导出数据时浏览器中没有长时间出现下载窗口

> ID：10118751
> 
> 赞同：4
> 
> 时间：2012-04-12T06:49:05.370
> 
> 标签：php, zend-framework, export, export-to-csv

我尝试将数据从数据库导出到 .csv。当我单击导出链接时，如果数据量很大，我很长一段时间都看不到浏览器中的保存窗口。如果脚本看起来像挂了一段时间并且在很长一段时间后可以在浏览器中看到保存窗口，那可能会很混乱。代码在控制器中是这样的：

```
$this->_helper->layout->disableLayout();
        $this->_helper->viewRenderer->setNoRender();
        $fileName = $list->list_name . '.csv';

        $this->getResponse()->setHeader('Content-Type', 'text/csv; charset=utf-8')
                            ->setHeader('Content-Disposition', 'attachment; filename="'. $fileName . '"');      

        $contacts = new Contact();
        $contacts->export($listId); 
```

导出方法一一读取记录并打印如下：

```
 $fp = fopen('php://output', 'w');        
    foreach ($mongodbCursor as $subscriber) {
           $row = formRow($subscriber);
       fputcsv($fp, $row);
        } 
```

我在一些保存 winow 的应用程序上看到几乎立即出现，当您单击保存时，您会看到下载进度。

我试图替换：

```
 $this->getResponse()->setHeader('Content-Type', 'text/csv; charset=utf-8')
                        ->setHeader('Content-Disposition', 'attachment; filename="'. $fileName . '"'); 
```

有了这个：

```
 header('Content-Type: text/csv; charset=utf-8');
    header('Content-Disposition: attachment; filename="'. $fileName . '"'); 
```

到目前为止它没有帮助。我想知道是否可以在从数据库中一一读取所有数据之前发送标头？感谢您的协助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:56:22.497

嗯我不熟悉 php://output，我的应用程序用 fopen,fwrite,fclose 将我的信息写入一个临时文件，然后我用类似的 header(); 选项。

```
 $filesize = filesize("tmp/export.csv");
            header("Content-Type: text/csv");
            header("Content-Disposition: attachment; filename=\"export.csv\"");
            header("Conent-Length: $filesize");
            readfile("tmp/export.csv");
            unlink("tmp/export.csv");
            exit; 
```

这会立即提供您浏览器的下载窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T06:58:57.903

你可以尝试这样做：

*   调用标头函数而不是`$this->getResponse()->setHeader()`（响应内容可能保存在缓冲区中并仅在完成时输出 - 导出完成的时间）
*   尝试直接回显内容而不是写入 php://output（如果您在此之前设置标题，您回显的所有内容都将放在生成的 CSV 文件中）

编辑

替换为如下`fputcsv`函数`print_row`

```
function print_row($row) {
        echo '"' . implode('","', $row) . '"' . "\r\n"; 
} 
```

该函数将第一个参数作为数组获取，添加`"`和回显`,`到内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T01:53:17.063

您的函数可能希望在 long 操作之前调用 flush / ob_flush 并让 HTTP 标头在 long 过程之前发送给客户端。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T15:52:32.503

尝试在你的价值中使用`application/force-download`而不是。`text/csv``Content-Type`

```
header("Content-Type: application/force-download; name=\"" . $fileName . "\""); 
```

这将强制一个实际的下载框，而不是仅仅*在*浏览器中显示内容。

以下是[MIME Application](http://mimeapplication.org/force-download.html)的一些文档：

> Mime application/force-download，通常表示为 mime application/x-force-download，通常与 PHP 代码结合使用以触发下载框，而不是用于在 Web 浏览器中显示内容。
> 
> 例如，如果您的网站上有一个文件，您希望用户下载而不是在 Web 浏览器中查看，您可以在文件的标题内容类型字段中输入适当的 mime 应用程序/强制下载代码。请注意，mime application/force-download 不是已注册的 MIME 类型。此外，在 PHP 代码中使用时，mime application/force-download 的首选拼写包含“x-”前缀。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T07:10:31.507

```
// $file = path of file

header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename='.basename($file));
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
header('Content-Length: ' . filesize($file));
ob_clean();
flush();
readfile($file);
exit; 
```

来源： http: [//php.net/manual/en/function.readfile.php](http://php.net/manual/en/function.readfile.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-20T11:26:35.343

我不知道这是否是一个好的解决方案，我没有进行太多探索，但似乎它正在工作。在我将一些数据添加到标头之后的缓冲区之后，在导出之前，它会控制它。

```
 header('Content-Type: text/csv; charset=utf-8');
    header('Content-Disposition: attachment; filename="'. $fileName . '"');

    echo str_pad('', ini_get('output_buffering'));      
    ob_flush();
    flush();

    Model_Subscriber1::exportList($listId); 
```

为了让它在控制器中工作，我在 Zend Bootstrap.php 中添加了：

```
/**
 * hint to the dispatcher that it should not use output buffering to capture output generated by action controllers.
 *  By default, the dispatcher captures any output and appends it to the response object body content. 
 */
protected function _initFront()
{
    $frontController = Zend_Controller_Front::getInstance();
    $frontController->setParam('disableOutputBuffering', 1);        
} 
```

在这种情况下，我在浏览器中快速获取下载窗口，然后导出数据，这可能需要很长时间。我不知道这个解决方案现在是否可以接受。我很乐意在这里发表您对此的看法。它会导致将空数据添加到导出文件时出现问题。因此，我将其更改为控制器。

```
 header('Content-Type: text/csv; charset=utf-8');
    header('Content-Disposition: attachment; filename="'. $fileName . '"');

    Model_Subscriber1::exportList($listId); 
```

并将 chang 函数导出为如下所示：

```
 foreach ($mongodbCursor as $subscriber) {
           $row = formRow($subscriber);
    echo '"' . implode('","', $row) . '"' . "\r\n";
    ob_flush();
    flush();                    

  } 
```

# wpf - 根据选择的组合框更改元素高度

> ID：10118756
> 
> 赞同：1
> 
> 时间：2012-04-12T06:49:30.727
> 
> 标签：wpf, binding, combobox

我有一个用于选择媒体类型的组合框。我希望在选择 .vmw、.mpeg 或 .avi 文件时改变 mediaelement 的高度。如何使用 MVVM 方法实现这一目标？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T10:03:06.433

您可以使用适当的转换器将 MediaElement 的`Width`and`Height`直接绑定到其`Source`属性，该转换器根据媒体类型选择适当的大小：

```
<MediaElement
    Width="{Binding Path=Source, RelativeSource={RelativeSource Self}, Converter={StaticResource MediaElementSizeConverter}, ConverterParameter=Width}"
    Height="{Binding Path=Source, RelativeSource={RelativeSource Self}, Converter={StaticResource MediaElementSizeConverter}, ConverterParameter=Height}"/> 
```

转换器：

```
public class MediaElementSizeConverter : IValueConverter
{
    private const double defaultWidth = 320d;
    private const double defaultHeight = 240d;
    private const double wmvWidth = 640d;
    private const double wmvHeight = 480d;

    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        Uri source = value as Uri;

        if (source != null)
        {
            if (source.AbsolutePath.EndsWith(".wmv"))
            {
                return (parameter as string) == "Width" ? wmvWidth : wmvHeight;
            }

            // more media types ...
        }

        return (parameter as string) == "Width" ? defaultWidth : defaultHeight;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:58:31.490

一种解决方案是将 绑定`ComboBox`到自创建`MediaTypeDefinition`类的列表。

```
public class MediaTypeDefinition
{
    public string Name { get; set; }

    public int Height { get; set; }
} 
```

然后，您可以将 绑定`SelectedItem`到媒体元素的高度。

```
<ComboBox x:Name="mediaTypeList" ItemsSource="{Binding Definitions}" SelectedValuePath="Name" />

<MediaElement Height="{Binding SelectedItem.Height, Elementname=mediaTypeList}" /> 
```

# python - Python numpy 排序一维数组

> ID：10118762
> 
> 赞同：2
> 
> 时间：2012-04-12T06:50:06.977
> 
> 标签：python, arrays, sorting, numpy

我正在尝试使用这个非常简单的代码对一个 numpy 数组进行排序：

```
print np.array([2,0,8,4,1]).sort() 
```

但是，我得到了结果：

```
None 
```

有人能告诉我这里发生了什么吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-12T06:51:38.293

该数组可能会被就地排序，就像 Python 所做的`list.sort()`那样，因此您不会误以为原始数组仍然是相同的。

```
arr = np.array([2,0,8,4,1])
arr.sort()
print arr 
```

# mysql - 在 MySQL 中存储网站用户首选项的最佳方式 - BINARY 或 INT

> ID：10118763
> 
> 赞同：4
> 
> 时间：2012-04-12T06:50:09.727
> 
> 标签：mysql, database, database-design

我知道之前有人问过这个问题，最好的答案似乎如下： [保存用户偏好的最佳方法？](https://stackoverflow.com/questions/1079711/best-approach-to-save-user-preferences)

但是我有一些额外的标准，这就是我再次问这个问题的原因，我需要能够将 1 个用户的偏好与另一个用户的偏好进行比较，并快速获得两个用户之间的差异所有用户偏好都将是一个布尔值

实现这一目标的最佳方法是什么？

我在考虑以下几点：有一个代表所有用户偏好的二进制数：例如 1100011100 .. 每个位对应于一个特定的偏好

然后将其保存为 BINARY 类型（我可以存储 255 位，即 255 首选项设置 - 对吗？）或将二进制文件转换为 int 并将其存储为 int （然后选择在 INT 或 BIGINT - INT = 4 *8 = 32 位，BIGINT = 8*8 = 64 位）

这样我只需要在我的用户表中有 1 个额外的列来存储偏好，并且它很容易通过简单地获取二进制数来比较两个用户之间的偏好

有没有人对如何做我想做的事情有任何其他想法，或者在我在这里尝试做事的方式中看到问题？

（注意数据库不是我的强项）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T20:55:06.773

我建议远离 BINARY Bitmask 选项，因为它使查询具有特定设置的用户变得非常困难。

我已经看到这样做的一种方法是使用数据库中的键值对。

```
SettingsTable
(
  FkUserId int,
  SettingKey varchar(1024),
  SettingValue varchar(1024)
); 
```

这不适用于大量用户，但它可以轻松添加任意数量的键/值组合，而无需修改数据库。

您可以使用 settingsKey 表和设置值表以更有效的方式执行类似的操作。

```
SettingsKeys
(
  KeyId int,
  SettingKey varchar(1024)
);

SettingsTable
(
  FkUserId int,
  FkKeyId int,
  SettingValue varchar(1024)
); 
```

这将比原始设置表更有效，并且您可以存储任意数量的可能设置，而无需修改架构。

只是几个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:54:45.430

您的 Integer Idea 听起来是解决问题的最佳方法，您可以在 mysql 中有一个存储的 proc 或等效程序，它也会将您的整数转换为位表示。您可以查看以下问题[SQL Server Convert integer to binary string](https://stackoverflow.com/questions/127116/sql-server-convert-integer-to-binary-string)以获取有关如何执行相同操作的详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T16:06:08.403

您的数据库是否必须回答以下问题：

***对于给定的偏好，哪些用户拥有它？***

*对字段中的位进行编码会阻止 DBMS 对这些位中的每一个进行索引并有效地*回答上述问题。

一般来说，违反[原子性](http://en.wikipedia.org/wiki/First_normal_form#Atomicity)原则（因此违反 1NF）确实应该有一些很好的理由。说实话，您实际上可能在这里有这样的原因，在空间节省和特定（窄）类查询的性能方面。只要确保您将失去的灵活性在未来将不再需要。

# java - 将日期和时间添加到 GWT 中的当前日期和时间

> ID：10118765
> 
> 赞同：0
> 
> 时间：2012-04-12T06:50:12.920
> 
> 标签：java, gwt, date, time

我需要从用户那里获取日期和时间并将其添加到当前日期和时间。

例如，如果当前日期是 2 月 1 日，时间是下午 12:00，并且用户输入指定 31 天零 2 小时 - 输出应该是 3 月 3 日下午 2:00。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-08T22:34:50.850

这是我的 DateTimeUtil，你可以使用它。

```
public class DateTimeUtil {
    public static String getYear(Date date) {
        return DateTimeFormat.getFormat("yyyy").format(date);
    }
    public static String getMonth(Date date) {
        return DateTimeFormat.getFormat("MM").format(date);
    }
    public static String getDay(Date date) {
        return DateTimeFormat.getFormat("dd").format(date);
    }
    public static String getHour(Date date) {
        return DateTimeFormat.getFormat("HH").format(date);
    }
    public static String getMinute(Date date) {
        return DateTimeFormat.getFormat("mm").format(date);
    }
    public static String getSecond(Date date) {
        return DateTimeFormat.getFormat("ss").format(date);
    }

    // The String year must to have yyyy format

    public static Date getDate(String years, String months, String days, String hours, String minutes, String seconds) {
        DateTimeFormat dtf = DateTimeFormat.getFormat("yyyy-MM-dd HH:mm:ss");
        Date date = dtf.parse(years + "-" + months + "-" + days + " " + hours + ":" + minutes + ":" + seconds);
        GWT.log("date parsed " + date);
        return date;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:06:34.870

日历不是 GWT JRE 仿真的一部分。您可以参考对您的问题有答案的旧帖子。这是[链接](https://stackoverflow.com/questions/2527845/how-to-do-calendar-operations-in-java-gwt-how-to-add-days-to-a-date)

# c++ - 为什么我们更喜欢在 cocos2d 中使用“CCFollow”而不是“CCCamera”？

> ID：10118766
> 
> 赞同：2
> 
> 时间：2012-04-12T06:50:18.180
> 
> 标签：c++, ios, cocos2d-iphone

就我而言，我正在制作一个摄像机始终跟随我的角色的 2D 游戏，但是会有场景限制，所以当他几乎靠近场景边界时我必须停止跟随他。我还必须处理相机比例，所以我必须决定是使用 CCFollow::actionWithTarget() 还是 CCCamera。

在 CCCamera.h 中它说：

> 限制：

```
- Some nodes, like CCParallaxNode, CCParticle uses world node coordinates, and they won't work properly if you move them (or any of their ancestors)
using the camera.

- It doesn't work on batched nodes like CCSprite objects when they are parented to a CCSpriteBatchNode object.

- It is recommended to use it ONLY if you are going to create 3D effects. For 2D effecs, use the action CCFollow or position/scale/rotate. 
```

最后一句很有意思，为什么只在 3D 效果中使用它？似乎 CCCamera 的制作人不推荐它。我知道这是处理摄像机运动的捷径，但我只是不知道为什么最好不要在 2D 游戏中使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T13:48:17.197

如果您注意到，CCCamera.h 文件还显示：

```
Useful to look at the object from different views.
The OpenGL gluLookAt() function is used to locate the
camera. 
```

OpenGL Redbook 中有一篇很好的文章介绍了相机的工作原理。我的理解是，相机是用来设置初始方向的，然后你通过更新模型矩阵来移动世界（这就是我猜 CCFollow 为你做的事情）。如果您仍想使用相机，这里有一个答案可能会有所帮助：

[移动CCCamera](https://stackoverflow.com/questions/3562720/question-regarding-moving-cccamera)

# css - 如何在文本字段中显示多种字体颜色

> ID：10118767
> 
> 赞同：4
> 
> 时间：2012-04-12T06:50:34.423
> 
> 标签：css, textbox, textfield, required-field

我想要文本字段中的文本，例如“你的名字*”
，“你的名字”的颜色应该是黑色，* 的颜色应该是红色。
我怎样才能做到这一点？？

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:00:36.987

你不能; 文本输入字段的值是纯文本。

将解释（包括必要性指示符（如果需要））放在标签中，而不是放在字段中。您可以为指标使用标记，并为其着色：

```
<label for=name>Your name<span class=reqd>*</span>:</label>
<input id=name name=name size=40 required> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:58:49.300

一个文本框中不能有不同的颜色。（无论如何可靠地跨浏览器）

对于必填字段，最常见的解决此问题的方法是将星号直接放在文本框之后，并带有一个类以将文本设置为红色。

示例：http: [//jsfiddle.net/JzFd4/](http://jsfiddle.net/JzFd4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T07:33:57.437

我想你应该想要这个

**CSS**

```
label{
    color:black;
}
label  span {
    color:red;
}
input{
    line-height:25px;
    color:gray;
    font-size:16px;
}

input:focus{
color:black;
} 
```

**HTML**

```
<label>
    Your Name:- <input type="text" value="your name"><span>*</span>
</label> 
```

现场演示[http://jsfiddle.net/rohitazad/dZmaZ/](http://jsfiddle.net/rohitazad/dZmaZ/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-11-25T07:24:32.253

这就是我在这里提出的问题。
多种颜色占位符。
[答案链接在这里](https://stackoverflow.com/questions/25907031/is-it-possible-multiple-text-color-in-a-single-placeholder<br)

这里有一些技巧

```
.input-field {
    position: relative;
    display: inline-block;
}
.input-field > label {
    position: absolute;
    left: 0.5em;
    top: 50%;
    margin-top: -0.5em;
    opacity: 0.5;
}
.input-field > input[type=text]:focus + label {
    display: none;
}
.input-field > label > span {
    letter-spacing: -2px;
}
.first-letter {
    color: red;
}
.second-letter {
    color: blue;
```

```
<div class="input-field">
    <input id="input-text-field" type="text"></input>
    <label for="input-text-field"> 
        <span class="first-letter">your name</span>  
        <span class="second-letter">*</span>
    </label>
</div>
```

# c - 连接到 C 中的特定 IP 地址？

> ID：10118770
> 
> 赞同：2
> 
> 时间：2012-04-12T06:50:36.540
> 
> 标签：c, network-programming

通过在客户端代码中使用它，我已经完成了对基本聊天服务器和客户端的所有测试：

```
 struct sockaddr_in server;
  struct hostent * hp;

  server.sin_family = PF_INET;
  hp = gethostbyname( "localhost" );
  if ( hp == NULL )
  {
    perror( "Unknown host" );
    return EXIT_FAILURE;
  } 
```

重点是“本地主机”。这段代码运行良好。现在我正在尝试在两台计算机之间进行测试，但我不确定如何指定要连接的服务器的名称/地址。需要改变什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T06:56:37.600

什么都不需要改变。只需用 or 替换`"localhost"`它`"192.168.0.1"`应该`"stackoverflow.com"`可以工作。

请注意，`gethostbyname`如果标记为已过时，则应替换为`getaddrinfo`.

**编辑**

`getnameinfo`->`getaddrinfo`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T06:53:31.783

啊，您可以将任何 IP 地址传递给`gethostbyname`函数：

```
hp = gethostbyname( "74.125.224.73" ); 
```

或者

```
 hp = gethostbyname( "google.com" ); 
```

会得到那个IP地址。

# iphone - 点击手势在 UIimageview 上不起作用

> ID：10118785
> 
> 赞同：1
> 
> 时间：2012-04-12T06:51:52.967
> 
> 标签：iphone, ios, xcode

在我的应用程序中，我有三个随机移动的 uiimageview。单击 imageview 它应该隐藏。但是我的 Tapgesture 不起作用。单击它不会隐藏。

```
- (void)showAlert1:(UITapGestureRecognizer *)sender
{
    if (image1.tag == 1)
    {
        image1.hidden = TRUE;
    }
    else
    {
        image1.hidden = FALSE;
    }
}

- (void)showAlert2:(UITapGestureRecognizer *)sender
{
    if (image1.hidden == TRUE && image3.hidden == FALSE)
    {
        image2.hidden = TRUE;
    }
    else
    {
        image2.hidden = FALSE;
    }
}

- (void)showAlert3:(UITapGestureRecognizer *)sender
{
    if (image1.hidden == TRUE && image2.hidden == TRUE)
    {
        image3.hidden = TRUE;
    }
    else
    {
        image3.hidden = FALSE;
    }
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    if (image1.tag == 1)
    {
        image1.userInteractionEnabled = YES;

        UITapGestureRecognizer* tap = [[UITapGestureRecognizer alloc] initWithTargetelf actionselector(imageAlerts];
        tap.numberOfTapsRequired = 1;
        [image1 addGestureRecognizer:tap];
    }

    if (image2.tag == 2)
    {
        image2.userInteractionEnabled = YES;

        UITapGestureRecognizer* tap = [[UITapGestureRecognizer alloc] initWithTargetelf actionselector(showAlert2];
        tap.numberOfTapsRequired = 1;
        [image2 addGestureRecognizer:tap];
    }

    if (image3.tag == 3) 
    {
        image3.userInteractionEnabled = YES;

        UITapGestureRecognizer* tap = [[UITapGestureRecognizer alloc] initWithTargetelf actionselector(showAlert3];
        tap.numberOfTapsRequired = 1;
        [image3 addGestureRecognizer:tap];
    }
} 
```

谁能帮我？

提前致谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-12T07:15:37.040

如果您在 xib 中添加了图像，请选中xib 文件中的`userInteractionEnabled`and`multipleTouch`

或者

```
image.userInteractionEnabled = YES;
image.multipleTouchEnabled = YES; 
```

在 ViewDidLoad

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:58:24.540

您是否实现了 UIGestureRecognizerDelegate 并设置为 self？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T07:11:18.637

试试这个 -

```
- (void)viewWillAppearBOOL:animated
{

[super viewWillAppear:animated];

if (image1.tag==1)

{

image1.userInteractionEnabled = YES;

UITapGestureRecognizer* tap = [[UITapGestureRecognizer alloc] initWithTargetelf actionselector(showAlert1:];

tap.numberOfTapsRequired = 1;

[image1 addGestureRecognizer:tap];

}

if (image2.tag==2) 

{

image2.userInteractionEnabled = YES;

UITapGestureRecognizer* tap = [[UITapGestureRecognizer alloc] initWithTargetelf actionselector(showAlert2:];

tap.numberOfTapsRequired = 1;

[image2 addGestureRecognizer:tap];

}
if (image3.tag==3) 

{

image3.userInteractionEnabled = YES;

UITapGestureRecognizer* tap = [[UITapGestureRecognizer alloc] initWithTargetelf actionselector(showAlert3:];

tap.numberOfTapsRequired = 1;

[image3 addGestureRecognizer:tap];

}
} 
```

它也有内存泄漏。`UIGesture`添加到图像后不释放。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-12T07:28:03.510

试试这个

```
- (void)showAlert1:(UITapGestureRecognizer *)sender 
{     
  if (sender.state == UIGestureRecognizerStateEnded)     
  {        
     // your handling code
    if (image1.tag==1)
         image1.hidden=TRUE;
    else
         image1.hidden=FALSE;     
  }  
} 
```

# wpf - MVVM Wait Cursor 如何在调用命令期间设置.wait 光标？

> ID：10118788
> 
> 赞同：28
> 
> 时间：2012-04-12T06:52:19.743
> 
> 标签：wpf, mvvm, wait, mouse-cursor

设想：

*   用户单击视图上的按钮
*   这会调用 ViewModel 上的命令 DoProcessing

考虑到 View 和 ViewModel 的职责，Wait 光标是如何以及在哪里设置的？

为了清楚起见，我只是想在命令运行时将默认光标更改为沙漏。命令完成后，光标变回箭头。（这是我正在寻找的同步操作，我希望 UI 阻止）。

我在 ViewModel 上创建了一个 IsBusy 属性。如何确保**Application**的鼠标指针发生变化？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-12T11:46:07.803

我在我的应用程序中成功使用它：

```
/// <summary>
///   Contains helper methods for UI, so far just one for showing a waitcursor
/// </summary>
public static class UIServices
{
    /// <summary>
    ///   A value indicating whether the UI is currently busy
    /// </summary>
    private static bool IsBusy;

    /// <summary>
    /// Sets the busystate as busy.
    /// </summary>
    public static void SetBusyState()
    {
        SetBusyState(true);
    }

    /// <summary>
    /// Sets the busystate to busy or not busy.
    /// </summary>
    /// <param name="busy">if set to <c>true</c> the application is now busy.</param>
    private static void SetBusyState(bool busy)
    {
        if (busy != IsBusy)
        {
            IsBusy = busy;
            Mouse.OverrideCursor = busy ? Cursors.Wait : null;

            if (IsBusy)
            {
                new DispatcherTimer(TimeSpan.FromSeconds(0), DispatcherPriority.ApplicationIdle, dispatcherTimer_Tick, System.Windows.Application.Current.Dispatcher);
            }
        }
    }

    /// <summary>
    /// Handles the Tick event of the dispatcherTimer control.
    /// </summary>
    /// <param name="sender">The source of the event.</param>
    /// <param name="e">The <see cref="System.EventArgs"/> instance containing the event data.</param>
    private static void dispatcherTimer_Tick(object sender, EventArgs e)
    {
        var dispatcherTimer = sender as DispatcherTimer;
        if (dispatcherTimer != null)
        {
            SetBusyState(false);
            dispatcherTimer.Stop();
        }
    }
} 
```

这是取自[这里](https://stackoverflow.com/questions/7346663/how-to-show-a-waitcursor-when-the-wpf-application-is-busy-databinding)。Courtsey胡特里[胡特](https://stackoverflow.com/users/139961/huttelihut)。

`SetBusyState`每次您认为要执行任何耗时的操作时，都需要调用该方法。例如

```
...
UIServices.SetBusyState();
DoProcessing();
... 
```

这将在应用程序繁忙时自动将光标更改为等待光标，并在空闲时恢复正常。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-02-13T15:22:01.817

一个非常简单的方法是简单地绑定到窗口（或任何其他控件）的“光标”属性。例如：

XAML：

```
<Window
    x:Class="Example.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
     Cursor="{Binding Cursor}" /> 
```

ViewModel 光标属性（使用 Apex.MVVM）：

```
 private NotifyingProperty cursor = new NotifyingProperty("Cursor", typeof(System.Windows.Input.Cursor), System.Windows.Input.Cursors.Arrow);
    public System.Windows.Input.Cursor Cursor
    {
        get { return (System.Windows.Input.Cursor)GetValue(cursor); }
        set { SetValue(cursor, value); }
    } 
```

然后只需在需要时更改视图中的光标...

```
 public void DoSomethingLongCommand()
    {
        Cursor = System.Windows.Input.Cursors.Wait;

        ... some long process ...

        Cursor = System.Windows.Input.Cursors.Arrow;
    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-06-17T22:33:14.897

你想在视图模型中有一个`bool`属性。

```
 private bool _IsBusy;
    public bool IsBusy 
    {
        get { return _IsBusy; }
        set 
        {
            _IsBusy = value;
            NotifyPropertyChanged("IsBusy");
        }
    } 
```

现在您要设置要绑定到它的窗口样式。

```
<Window.Style>
    <Style TargetType="Window">
        <Setter Property="ForceCursor" Value="True"/>
        <Style.Triggers>
            <DataTrigger Binding="{Binding IsBusy}" Value="True">
                <Setter Property="Cursor" Value="Wait"/>
            </DataTrigger>
        </Style.Triggers>
    </Style>
</Window.Style> 
```

现在，每当执行命令并且您的视图模型很忙时，它只会设置`IsBusy`标志并在完成时将其重置。窗口将自动显示等待光标并在完成后恢复原始光标。

您可以在视图模型中编写命令处理函数，如下所示：

```
 private void MyCommandExectute(object obj) // this responds to Button execute
    {
        try
        {
            IsBusy = true;

            CallTheFunctionThatTakesLongTime_Here();
        }
        finally
        {
            IsBusy = false;
        }
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-12T07:42:56.107

命令在视图模型上处理，因此合理的决定是执行以下操作：

1）创建一个繁忙的指标服务并将其注入视图模型（这将允许您轻松地用一些讨厌的动画替换光标逻辑）

2）在命令处理程序中调用忙指示服务来通知用户

我可能是错的，但看起来您正在尝试在 UI 线程上进行一些繁重的计算或 I/O。在这种情况下，我强烈建议您在线程池上执行工作。您可以使用 Task 和 TaskFactory 轻松地使用 ThreadPool 包装工作

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T07:47:02.643

[Laurent Bugnion 在线（ MVVM Light](http://mvvmlight.codeplex.com/)的创建者）举办了一场精彩的[会议](http://www.galasoft.ch/mvvmvideo1)（50:58 ）。还有一个[deepDive 会议](http://www.galasoft.ch/mvvmvideo2)可用（或者[在这里](https://channel9.msdn.com/Events/MIX/MIX11/OPN03)（24:47））。

在其中至少一个中，他使用 is BusyProperty 对繁忙指示器进行实时编码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-12-09T04:05:13.277

ViewModel 应该只决定它是否忙，关于使用什么光标或是否使用其他技术（如进度条）的决定应该留给 View。

另一方面，在 View 中使用代码隐藏来处理它也不是那么理想，因为理想的情况是 View 不应该有代码隐藏。

因此，我选择创建一个可在 View XAML 中使用的类，以指定当 ViewModel 忙时光标应更改为等待。使用 UWP + Prism 的类定义是：

```
public class CursorBusy : FrameworkElement
{
    private static CoreCursor _arrow = new CoreCursor(CoreCursorType.Arrow, 0);
    private static CoreCursor _wait = new CoreCursor(CoreCursorType.Wait, 0);

    public static readonly DependencyProperty IsWaitCursorProperty =
        DependencyProperty.Register(
            "IsWaitCursor",
            typeof(bool),
            typeof(CursorBusy),
            new PropertyMetadata(false, OnIsWaitCursorChanged)
    );

    public bool IsWaitCursor
    {
        get { return (bool)GetValue(IsWaitCursorProperty); } 
        set { SetValue(IsWaitCursorProperty, value); }
    }

    private static void OnIsWaitCursorChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        CursorBusy cb = (CursorBusy)d;
        Window.Current.CoreWindow.PointerCursor = (bool)e.NewValue ? _wait : _arrow;
    }
} 
```

使用方法是：

```
<mvvm:SessionStateAwarePage
    x:Class="Orsa.Views.ImportPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mvvm="using:Prism.Windows.Mvvm"
    xmlns:local="using:Orsa"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mvvm:ViewModelLocator.AutoWireViewModel="True"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
    <Grid>
    <Grid.RowDefinitions>
    .
    .
    </Grid.RowDefinitions>
    <local:CursorBusy IsWaitCursor="{Binding IsBusy}"/>
    (other UI Elements)
    .
    .
    </Grid>
</mvvm:SessionStateAwarePage> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-12T08:16:20.070

恕我直言，等待光标逻辑位于视图模型中的命令旁边是非常好的。

至于更改光标的最佳方法，请创建一个更改属性的`IDisposable`包装器。`Mouse.OverrideCursor`

```
public class StackedCursorOverride : IDisposable
{
    private readonly static Stack<Cursor> CursorStack;

    static StackedCursorOverride()
    {
        CursorStack = new Stack<Cursor>();
    }

    public StackedCursorOverride(Cursor cursor)
    {            
        CursorStack.Push(cursor);
        Mouse.OverrideCursor = cursor;            
    }

    public void Dispose()
    {
        var previousCursor = CursorStack.Pop();
        if (CursorStack.Count == 0)
        {
            Mouse.OverrideCursor = null;
            return;
        }

        // if next cursor is the same as the one we just popped, don't change the override
        if ((CursorStack.Count > 0) && (CursorStack.Peek() != previousCursor))
            Mouse.OverrideCursor = CursorStack.Peek();             
    }
} 
```

**用法：**

```
using (new StackedCursorOverride(Cursors.Wait))
{
     // ...
} 
```

以上是我发布到这个[问题](https://stackoverflow.com/a/675686/73025)的解决方案的修订版。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-04-22T18:34:26.793

```
private static void LoadWindow<T>(Window owner) where T : Window, new()
{
    owner.Cursor = Cursors.Wait;
    new T { Owner = owner }.Show();
    owner.Cursor = Cursors.Arrow;
} 
```

# sql - 带有内部连接的 sql 计数

> ID：10118793
> 
> 赞同：1
> 
> 时间：2012-04-12T06:53:00.640
> 
> 标签：sql, count, inner-join

我有一张缺勤表，那张表存储着缺勤人员的学生证。

从这个表中我必须找到总出席者和总缺席者，为此我刚刚加入了包含特定部分最大容量的部分表。

为此，我的查询是

```
select COUNT(Attendance.studentid) as Absentees
        ,Sections.Max-count(studentid) as Presentees
from Attendance
inner join Students
on students.StudentId=Attendance.StudentId
inner join Sections
on Sections.CourseId=students.CourseId
group by Sections.Max 
```

它工作正常，同样我如何找到性别明智的出席者/缺席者......性别列在学生表中，任何人都可以给我一些想法，提前谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T06:56:06.623

只需将性别列添加到您的`select ...`列和 中`group by`，您最终将得到每个性别的一行：

```
select COUNT(Attendance.studentid) as Absentees,
       Sections.Max-count(studentid) as Presentees,
       Students.Gender as Gender
from Attendance
inner join Students
on Students.StudentId=Attendance.StudentId
inner join Sections
on Sections.CourseId=Students.CourseId
group by Sections.Max, Students.Gender 
```

# plugins - 当用户未登录时，移动站点上的点赞按钮会重定向到 PC 登录页面

> ID：10118810
> 
> 赞同：1
> 
> 时间：2012-04-12T06:54:32.697
> 
> 标签：plugins, facebook-like

我想要的是将用户重定向到 m.facebook.com/login.php?.....（移动登录页面）而不是 PC 登录页面。
当我们使用对话框时，我们可以指定*display=touch来指定智能手机的显示模式，但是就我阅读文档*[http://developers.facebook.com/docs/reference/](http://developers.facebook.com/docs/reference/plugins/like/)而言，按钮插件没有这种选项
[插件/喜欢/](http://developers.facebook.com/docs/reference/plugins/like/)

我认为 facebook 应该检测用户的设备并显示适当的登录页面。
至少，分享按钮会重定向到相应的登录页面。
如果他们是我们可以指定的一种方式，我想知道。到目前为止，我正在使用插件的 iframe 版本。
有人可以帮助我吗？

# c# - 在 C# 中获取和设置默认属性值

> ID：10118812
> 
> 赞同：0
> 
> 时间：2012-04-12T06:54:40.797
> 
> 标签：c#, class, object, properties, get

```
class Log
{
 public int LocationId { set { value = 1; } get; }
} 
```

> 当我这样使用时，这会将 Log 的默认值设置为 1：Log l=new log(); Console.Writeline(l.LocationId);
> 
> ?

我知道使用属性的正常方式，但这也可以吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T06:56:46.863

正确的方法是在构造函数中：

```
class Log {
    public Log() {
        LocationId = 1;
    }

    public int LocationId { set; get; }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T06:57:09.787

不，你应该这样做：

```
class Log
{
   private int locationID = 1; //This is a default value
   public int LocationId 
   { 
      set 
      { 
          locationID = value; 
      } 
      get 
      {
          return locationID;
      } 
   }
} 
```

# jquery - 用jquery解析单行json

> ID：10118816
> 
> 赞同：1
> 
> 时间：2012-04-12T06:54:47.523
> 
> 标签：jquery, json, parsing

这是我的简单 json 代码：

```
{
    "status": 1,
    "message": "This message"
} 
```

使用萤火虫控制台，我可以得到`status`：

```
$({"status":1,"message":"This message"}.status)[0];
>>> 1 
```

但是`message`以同样的方式是行不通的，我得到`undefined`：

```
$({"status":1,"message":"This message"}.message)[0];
>>> undefined 
```

我将获得“此消息”。我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T06:58:37.997

不应该是这种语法吗？

```
$({"status":1,"message":"This message"})[0].message 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T07:02:12.680

```
$(function(){
    var x= {"status":"1","message":"This message"};
    alert(x.message);
})​ 
```

看这里[http://jsfiddle.net/JxHme/](http://jsfiddle.net/JxHme/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T07:07:02.567

尝试不使用jquery ...

```
var myjson = {
    "status": 1,
    "message": "This message"
};
document.writeln(myjson.status);
document.writeln(myjson.message); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T07:00:49.563

无需使用 jQuery。POJS 完成这项工作

```
{"status":1,"message":"This message"}.message; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-09T10:05:35.453

这对我有用

```
alert({"status":1,"message":"This message"}.message) 
```

# jquery - 我从这个 jQuery Masonry 实现中遗漏了什么？

> ID：10118822
> 
> 赞同：4
> 
> 时间：2012-04-12T06:55:15.133
> 
> 标签：jquery, jquery-plugins, tumblr, jquery-masonry

我已经在堆栈上筛选了过多的 Masonry 帖子，并查看了其他 tumblr 博客的来源，但我无法识别我缺少什么。希望你们中的一个可以提供帮助。

有问题的网站可~~**在此处**~~获得视觉参考（注：1 或 2 张时尚泳装照片 - 驯服但可能对某些人来说是 NSFW）。

如您所见，图像仍未正确垂直堆叠。我哪里出错了？

CSS

```
#wrapper {
    width: 960px;
    margin: 0 auto;
    background: #000;
    height: 400px;

}

#wrapper .posts {
    background: #ff9900;
    width: 950px;
    position:relative;
    height:100%;
}

#wrapper .entry {
    width: 300px;
    float: left;
} 
```

砌体脚本

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="http://static.tumblr.com/yflpwuf/SSOm2d3y2/jquery.masonry.min.js"></script>

<script type="text/javascript">

var $posts = $('.posts');

$posts.imagesLoaded( function(){
  $posts.masonry({
    itemSelector : '.entry',
    columnWidth: 300

  });
});

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T08:49:07.640

您在此处提供的 Masonry 脚本似乎没问题（您提供的链接中的脚本有问题）。试着把它移到文档的底部，就在“body”的结束标签之前

```
...</div>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/ jquery.min.js"></script>
<script src="http://static.tumblr.com/yflpwuf/SSOm2d3y2/jquery.masonry.min.js"></script>

<script type="text/javascript">

var $posts = $('.posts');

$posts.imagesLoaded( function(){
$posts.masonry({
itemSelector : '.entry',
columnWidth: 300

 });
});

</script>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T09:07:05.837

`imagesLoaded`由于未定义函数，因此出现错误。您的 jquery.masonry.min.js 看起来缺少[imagesLoaded 插件](https://github.com/desandro/imagesloaded)。[获取这个缩小的砌体源](http://masonry.desandro.com/jquery.masonry.min.js)的副本，而不是似乎有 imagesLoaded 并查看[文档](http://masonry.desandro.com/docs/intro.html)

# android - 更改精灵位置 onAccelerometerChanged

> ID：10118835
> 
> 赞同：0
> 
> 时间：2012-04-12T06:55:52.743
> 
> 标签：android, andengine, game-engine

我是 AndEngine 的新手。我使用animatedSprite 和Sprite 对象。我想在加速度计的基础上移动 Sprite，但我也不想移动 animatedSprite。我想要物理世界的实现

```
private void addBottomFace(final float pX, final float pY) {
    myBottomSticFace = new Sprite(pX, pY, myBottomStickTextureRegion);
    myBottomStickBody = PhysicsFactory.createBoxBody(this.myPhysicsWorld, myBottomSticFace, BodyType.DynamicBody, myFixtureDef);

    this.myScene.attachChild(myBottomSticFace);
    this.myPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(myBottomSticFace, myBottomStickBody, true, true));
}

@Override
public void onAccelerometerChanged(AccelerometerData pAccelerometerData) {
    final Vector2 gravity = Vector2Pool.obtain(pAccelerometerData.getX(), pAccelerometerData.getY());
    myBottomSticFace.setPosition(myBottomSticFace,getX() + pAccelerometerData.getX(), myBottomSticFace,getY());
    Vector2Pool.recycle(gravity);
} 
```

使用此代码，mBottomSticFace 将根据加速度计移动，但身体不会移动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:50:43.450

您应该创建两个不同的实体并将其附加到您的精灵。要移动的Body应该设置为BodyType.DynamicBody，另一个应该设置为BodyType.StaticBody。

要查看加速度计和主体示例，请查看： [http ://code.google.com/p/andengineexamples/source/browse/src/org/anddev/andengine/examples/PhysicsExample.java](http://code.google.com/p/andengineexamples/source/browse/src/org/anddev/andengine/examples/PhysicsExample.java)

# facebook - Facebook FQL 获取用户列表并包含已安装参数

> ID：10118837
> 
> 赞同：1
> 
> 时间：2012-04-12T06:55:52.953
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我想获取用户的朋友列表。在此列表中，我想知道哪些用户也安装了该应用程序。

根据[https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/) 有一个可通过图形 api 访问的已安装参数。

我正在尝试使用以下查询来执行此操作，但我无法获得结果。（为了便于阅读，我将查询拆分为多行）

```
var query = "SELECT uid, name, first_name, last_name, pic_square, status, installed  FROM user ";
query +=  "where uid IN (SELECT uid2 FROM friend WHERE uid1 = " + Titanium.Facebook.uid + ")";
query += "order by first_name"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:10:24.580

刚刚使用 api explorer 看看这个。您希望“is_app_user”作为 FQL 查询的字段并且未安装，因为 fql 中不存在该字段，但它是一个 api 端点

fql?q=SELECT uid, name, first_name, last_name, pic_square, status, is_app_user FROM user where uid IN (SELECT uid2 FROM friend WHERE uid1 = me()

或尝试

[https://developers.facebook.com/tools/explorer/433871385166/?method=GET&path=fql%3Fq%3DSELECT%20uid%2C%20name%2C%20first_name%2C%20last_name%2C%20pic_square%2C%20status%2C %20is_app_user%20FROM%20user%20where%20uid%20IN%20(SELECT%20uid2%20FROM%20friend%20WHERE%20uid1%20%3D%20me](https://developers.facebook.com/tools/explorer/433871385166/?method=GET&path=fql%3Fq%3DSELECT%20uid%2C%20name%2C%20first_name%2C%20last_name%2C%20pic_square%2C%20status%2C%20is_app_user%20FROM%20user%20where%20uid%20IN%20(SELECT%20uid2%20FROM%20friend%20WHERE%20uid1%20%3D%20me) ())

# r - 绘制世界银行数据：条件长度 > 1

> ID：10118838
> 
> 赞同：1
> 
> 时间：2012-04-12T06:56:00.633
> 
> 标签：r, google-visualization, panel-data

我正在尝试使用 R 的 googleVis 包绘制一些世界银行数据，但它给了我以下错误：

```
In if (class(x[[.x]]) == "Date") as.character(x[[.x]]) else x[[.x]] :
the condition has length > 1 and only the first element will be used 
```

我使用了以下代码：

```
# load the packages
library(WDI) # package for importing World Bank data
library(plm) # package for working with panel data
library(googleVis) # the googleVis package

# import the data using the WDI package
LONG <- WDI(country=c("AGO","BEN","BWA","BFA","BDI"), indicator=c("SP.DYN.CBRT.IN",
"SP.DYN.TFRT.IN", "SP.POP.TOTL", "NY.GDP.PCAP.KN"), start=2005, end=2009, 
extra=FALSE)

# transform to panel format and encode the year variable as numeric
PANEL <- pdata.frame(LONG, c("country","year"))
PANEL$year <- as.numeric(as.character(PANEL$year))

# plot in a MotionChart using googleVis
MC <- gvisMotionChart(PANEL, idvar="country", timevar="year")
plot(MC) 
```

有人知道这是为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-03-04T15:03:12.633

您确实需要将数据从普通数据框转换为面板数据框。您可以使用数据框参数直接调用“gvisMotionChart”。

请看下面的代码：

```
library(WDI) # package for importing World Bank data
library(plm) # package for working with panel data
library(googleVis) # the googleVis package

# import the data using the WDI package
LONG <- WDI(
   country=c("AGO","BEN","BWA","BFA","BDI"), 
   indicator=c("SP.DYN.CBRT.IN", "SP.DYN.TFRT.IN", "SP.POP.TOTL", "NY.GDP.PCAP.KN"), 
   start=2005, 
   end=2009, 
   extra=FALSE)

# plot in a MotionChart using googleVis
MC <- gvisMotionChart(LONG, idvar="country", timevar="year")
plot(MC) 
```

输出： [![在此处输入图像描述](../Images/1ab5eeb3756ea42f5c698b8a00c2eff3.png)](https://i.stack.imgur.com/qBcF3.png)

# r - 对 R 中的 2 个单独列表使用应用函数

> ID：10118839
> 
> 赞同：0
> 
> 时间：2012-04-12T06:56:02.810
> 
> 标签：r, apply

我有以下代码来创建示例函数并生成模拟数据

```
mean_detects<- function(obs,cens) {
 detects <- obs[cens==0]
 nondetects <- obs[cens==1]
 res <- mean(detects)
 return(res) 
}

mu <-log(1); sigma<- log(3); n_samples=10, n_iterations = 5; p=0.10
dset2 <- function (mu, sigma, n_samples, n_iterations, p) {
  X_after <- matrix(NA_real_, nrow = n_iterations, ncol = n_samples)
  delta <- matrix(NA_real_, nrow = n_iterations, ncol = n_samples)
  lod <- quantile(rlnorm(100000, mu, sigma), p = p)
  pct_cens <- numeric(n_iterations)
  count <- 1
  while(count <= n_iterations) {     
  X_before <- rlnorm(n_samples, mu, sigma)
  X_after[count, ] <- pmax(X_before, lod)
  delta [count, ] <- X_before <= lod
  pct_cens[count] <- mean(delta[count,])
  if (pct_cens [count]  > 0 & pct_cens [count] < 1 ) count <- count + 1 }
  ave_detects <- mean_detects(X_after,delta)  ## how can I use apply or other functions here?
  return(ave_detects) 

} 
```

如果我指定 n_iterations，我将有一个 1x10 X_after 矩阵和 1x10 delta 矩阵。然后 mean_detects 函数使用此命令可以正常工作。

```
ave_detects <- mean_detects(X_after,delta) 
```

但是，当我将 n_iterations 增加到 5 时，我将有 2 个 5x10 X_after 和 delta，然后 mean_detects 函数不再起作用。它只为我提供 1 次迭代而不是 5 次的输出。我的真实模拟有数千次迭代，因此还必须考虑速度和内存。

编辑：我根据您的评论编辑了我的代码。我创建的 mean_detects 函数旨在展示同时使用 X_after 和 delta 矩阵的示例。真正的功能很长。这就是为什么我没有在这里发布它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:51:34.250

你的实际问题不是很清楚。所以，

1.  “我的函数只接受 1 个数据帧”。
    *   实际上你的函数有两个向量
2.  编写可以同时使用 X_after 和 delta 的代码。这并不意味着什么——对不起。
3.  “必须考虑速度和内存”。这是模糊的。你的内存会用完吗？作为建议，您可以考虑滚动均值。例如，

    ```
    x = runif(5)
    total = 0
    for(i in seq_along(x)) {
       total = (i-1)*total/i + x[i]/i
      cat(i, ": mean ", total, "\n")
    }
    1 : mean  0.4409 
    2 : mean  0.5139 
    3 : mean  0.5596 
    4 : mean  0.6212 
    5 : mean  0.6606 
    ```

**在旁边**

1.  您的`dest2`函数需要变量`n`（您尚未定义）。
2.  您的`dest2`函数没有返回明显的值。
3.  您的`mean_detects`功能可以简化为：

    ```
    mean(obs[cens==0]) 
    ```

# ios5 - Wifi direct 在 iPhone 4 或 iOS 5 中可用吗？

> ID：10118840
> 
> 赞同：4
> 
> 时间：2012-04-12T06:56:04.633
> 
> 标签：ios5, ios4, wifi-direct

任何人都可以建议 iPhone 4s 或 iOS 5 支持的 Wifi 直连技术吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:39:58.893

iOS5 肯定不支持它：我没有看到 API 支持它。而且我也不认为 iPhone 4S 也支持它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:41:58.720

从 iOS 5.1 和 iPhone 4S 开始，iOS 上没有 Wifi Direct，但您始终可以使用蓝牙。

# performance - LWP::UserAgent `:content_cb`: 回调中的附加代码会减慢下载速度吗？

> ID：10118843
> 
> 赞同：0
> 
> 时间：2012-04-12T06:56:07.030
> 
> 标签：performance, perl, callback, download, lwp-useragent

-callback中的附加代码`:content_cb`会减慢下载速度吗？

假设附加代码需要 1_000/1_000_000 秒才能运行并且回调被调用 1_000 次，那会减慢 1_000/1_000_000 * 1_000 秒的下载速度吗？

```
#!/usr/bin/env perl
use warnings;
use 5.012;
use Time::HiRes qw(usleep);
use File::Basename;
use LWP::UserAgent;

my $url = 'my_url';
my $file_name = basename $url;
my $ua = LWP::UserAgent->new();

open my $fh, '>>:raw', $file_name or die $!;
my $res = $ua->get( 
    $url,
    ':content_cb' => sub { 
        my ( $chunk, $res, $proto ) = @_;
        print $fh $chunk; 
        usleep( 1000 ); # code substitute
    },
);
close $fh; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:24:27.827

我建议使用[`HTTP::Async`](https://metacpan.org/pod/HTTP::Async)模块。

```
use HTTP::Async;

my $url = 'http://...';
my $async = HTTP::Async->new;

$async->add( HTTP::Request->new( GET => $url ) );

while ( my $response = $async->wait_for_next_response ) {
  # Do some processing with $response
} 
```

# web-services - 通过 JSF 应用程序使用 Web 服务

> ID：10118853
> 
> 赞同：0
> 
> 时间：2012-04-12T06:56:48.887
> 
> 标签：web-services, jsf

我有一个 Web 服务，我想通过 JSF 使用它。我是网络服务的初学者，我用谷歌搜索了它，但没有找到任何令人满意的答案，任何人都可以帮忙。我有一个 wsdl 链接，只有在这个 wsdl 文件的帮助下才能调用公开的方法。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T21:44:16.750

在您的 WSDL 文件（或您的 WSDL 链接）上运行 wsimport 工具。它将生成您可以在 JSF 应用程序中使用的客户端类。

查找具有方法 getPort() 或 getPort 的类。它将返回作为 Web 服务代理的对象。您可以在其上调用 Web 服务方法。

您将在 Java JDK bin 目录中找到 wsimport。

# r - 如何为多个数据框条目分配唯一标识符

> ID：10118856
> 
> 赞同：5
> 
> 时间：2012-04-12T06:56:52.960
> 
> 标签：r, plyr, reshape

我有一个包含三个标识符的大型数据框。例如：

```
df <- data.frame(year=c(1999,1999,2000,2000,2000), country=c('K','K','M','M','S'), 
                 site=c('di','se','di','di','di')) 
```

这将产生一个这样的数据框：

```
 year country site
    1999    K     di
    1999    K     se
    2000    M     di
    2000    M     di
    2000    S     di 
```

我想在数据框中添加一个附加列，并通过使用“年份”、“国家”和“站点”的条目分配一个“唯一 ID”。它看起来像这样：

```
 year country site unique_id
    1999    K     di     1
    1999    K     se     2
    2000    M     di     3
    2000    M     di     3
    2000    S     di     4 
```

任何有关如何执行此操作的建议将不胜感激。我在想它可以以某种方式使用**plyr**包来完成？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T07:06:36.423

这应该工作得很好。（它利用了因子的唯一级别每个都实际存储为整数，并用于`as.numeric()`访问/提取这些整数值的事实）。

```
df$unique_id <- 
    as.numeric(as.factor(with(df, paste(year, country, site, sep="_"))))
df
#   year country site unique_id
# 1 1999       K   di         1
# 2 1999       K   se         2
# 3 2000       M   di         3
# 4 2000       M   di         3
# 5 2000       S   di         4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T07:12:07.020

我会这样做

```
lookup <- data.frame(id=1:length(unique(apply(df, 1, paste, collapse=""))), key=unique(apply(df, 1, paste, collapse="")))

df$id <- apply(df, 1, function(x) lookup[lookup$key==paste(x, collapse=""), "id"]) 
```

# php - PHP时间戳显示秒数

> ID：10118863
> 
> 赞同：-1
> 
> 时间：2012-04-12T06:57:42.297
> 
> 标签：php, timestamp

> **可能重复：**
> [将时间戳转换为 php 中的时间，例如 1 天前、2 天前](https://stackoverflow.com/questions/1416697/converting-timestamp-to-time-ago-in-php-e-g-1-day-ago-2-days-ago)

我正在尝试通过 php 显示帖子的年龄。我正在做的是使用下面的代码将 php 时间戳存储在 mysql 中。

`$timestamp=time();`

所以我留下了一个这样的数字

`1334216865`

我将如何去改变它，所以它会说例子：

8 秒前

如果您在 10 秒后刷新页面，它将显示：

18 秒前

我不确定如何将时间戳转换回时间以显示我的示例。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T07:04:36.670

或者你可以做一个小“time_ago”函数：

```
function ago($time) { 
    $timediff=time()-$time; 

    $days=intval($timediff/86400);
    $remain=$timediff%86400;
    $hours=intval($remain/3600);
    $remain=$remain%3600;
    $mins=intval($remain/60);
    $secs=$remain%60;

    if ($secs>=0) $timestring = "0m".$secs."s";
    if ($mins>0) $timestring = $mins."m".$secs."s";
    if ($hours>0) $timestring = $hours."u".$mins."m";
    if ($days>0) $timestring = $days."d".$hours."u";

    return $timestring; 
}
echo ago(1334214962); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T07:01:21.167

```
echo (time() - $post_timestamp) . " seconds ago"; 
```

非常简单。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T07:02:00.797

只需再次运行 time() 函数并减去发布的时间 - 然后进行一些算术运算以输出它已经持续了多长时间：每分钟 60 秒、每小时 60 分钟等......时间函数是自某个事件以来的秒数很久以前。因此，时间函数的每个增量都是 1 秒。

# android - 如何为平板电脑测试创建 AVD？

> ID：10118866
> 
> 赞同：6
> 
> 时间：2012-04-12T06:57:49.207
> 
> 标签：android, android-emulator, avd

我可以为 android 4.0.3 创建一个 AVD，以便我可以在模拟器上测试我的应用程序吗？我已经从 Android SDK 管理器下载了 android 4.0.3 SDK。但是我怎样才能创建一个 AVD 以便我将作为平板电脑环境运行？我发现的唯一一个是三星 Galaxy Tab，但它适用于 API 8。我正在寻找适用于 4.0.3 的东西

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T07:29:30.343

在下面的链接中检查如何在多个屏幕上测试您的应用程序：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

它在那里给出了如何在平板电脑上测试您的应用程序。您只需要根据特大号更改您的avd。请记住，平板电脑的一件事皮肤可从 3.0 开始。

在平板电脑的 4.0 皮肤中不存在。为此尝试 3.0 到 3.2 版本（专为平板电脑制作。\

Android avd很烂，

我建议，快速使用 genymotion。比你的手机更快

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T07:27:40.613

如果您正在寻找三星 Galaxy Tab 的皮肤版本，它目前不适用于任何 ICS API 级别。

仅使用分辨率为 ICS 创建平板电脑模拟器可能会有些棘手。例如，三星 Galaxy S II 的分辨率为 720 * 1280 像素。

要为基于 ICS API 的平板电脑创建 AVD，您应该使用“皮肤”选项下下拉菜单中的“ **WXGA800 ”。**我使用这个选项来创建平板电脑 AVD 并一直使用它。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T07:29:12.353

在皮肤中：如果存在 WXGA720 或 WXGA800，您可以在内置或分辨率检查中选择内置下拉菜单，如果其中有两个，则选择一个并创建 avd，如果是 4.0，它会创建选项卡。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T07:05:03.553

如果你开始日食。

单击菜单栏中的 [Window -> AVD Manager]

单击“新建”以创建新的模拟器。

在这里，您可以选择要在其上运行的目标/平台。并选择模拟器的分辨率。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T07:05:04.537

仅供参考，您可以创建任何大小/分辨率的 AVD。只需在创建 AVD 时定义分辨率。

![在此处输入图像描述](../Images/c71a5d827bb36da2fd4d1246b124a71f.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T07:13:18.807

据我所知，4.0.3 没有特定的设备模拟器。正如前面的答案所说，您可以使用 api 级别 15 从设备管理器创建一个 avd。它不适合你吗？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-17T14:15:36.187

大多数答案现在已经 7 岁了，而且是特定于 Eclipse 的。

[此处](https://developer.android.com/studio/run/managing-avds)描述的使用 Android Studio 的当前解决方案是：

1.  打开安卓工作室
2.  转到工具-> AVD 管理器
3.  单击 + 创建虚拟设备

# java - 如何在 XML 单元中进行比较时忽略 XML 标记的属性？

> ID：10118867
> 
> 赞同：0
> 
> 时间：2012-04-12T06:57:50.250
> 
> 标签：java

我正在使用 XMLUnit 来比较两个 XML。我的要求是在比较两个 XML 时要忽略少数 XML 标记的少数属性。有什么办法可以忽略一些属性吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:43:40.043

您可以使用 XPath 转换 XML 以去除您不感兴趣的属性。您可以调整此线程中的示例[http://www.actionscript.org/forums/showthread.php3?t=218460](http://www.actionscript.org/forums/showthread.php3?t=218460)

# ajax - 如何在 Sonata 管理表单中使用 Ajax？

> ID：10118868
> 
> 赞同：29
> 
> 时间：2012-04-12T06:57:52.560
> 
> 标签：ajax, symfony, symfony-sonata, sonata-admin

我有一个具有以下字段和关联的商家实体：-

```
/**
 * @ORM\ManyToMany(targetEntity="Category", inversedBy="merchants")
 */
public $categories;

/**
 * @ORM\ManyToMany(targetEntity="Tag", inversedBy="merchants")
 */
public $tags;

/**
 * @ORM\ManyToOne(targetEntity="Category", inversedBy="merchants")
 */
protected $primaryCategory;

/**
 * @ORM\ManyToOne(targetEntity="Tag", inversedBy="merchants")
 */
protected $primaryTag; 
```

标签和类别也有一个多对多映射。所以我们有 Tag_Category、Merchant_Tag、Merchant_Category 映射表。

现在我想在这些字段上执行一些 ajax。

我想允许用户首先选择主标签。在Primary Tag的基础上，ajax将类别刷新为只属于该Tag的类别和一些操作。

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-05-28T11:08:31.333

几个月前我能够完成这项工作。虽然 a.aitboudad 分享的内容是准确的。Symfony/Sonata 的初学者可能会遇到一些问题。

以下是步骤。

**1> 扩展 Sonata CRUD 的`edit.html.twig`/ `base_edit.html.twig`。** 为简单起见，我将只使用后者。复制`vendor/bundles/Sonata/AdminBundle/Resources/views/CRUD/base_edit.html.twig`到与 MerchantAdminController 对应的视图文件夹中 -`YourBundle/Resources/views/Merchant/base_edit.html.twig`

**2> 我们需要告诉 MerchantAdmin 类使用这个模板。**所以我们像这样重写 SonataAdmin 的`getEditTemplate`方法：

```
public function getEditTemplate()
{
    return 'YourBundle:Merchant:base_edit.html.twig';
} 
```

**3>****接下来**，我们需要在`base_edit.html.twig`. 标准 Ajax 包括以下内容：

**3.1>** -- 在控制器中为Ajax 请求创建一个Action 我们主要想得到一个与特定标签对应的类别ID 列表。但很可能你只是在使用 Sonata 的 CRUD 控制器。

定义扩展 CRUDController 的 MerchantAdminController

```
<?php

namespace GD\AdminBundle\Controller;

use Sonata\AdminBundle\Controller\CRUDController as Controller;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpFoundation\Response;
use GD\AdminBundle\Entity\Merchant;

class MerchantAdminController extends Controller
{

} 
```

**3.2>** -- 告诉你的管理服务使用这个新创建的控制器而不是默认的 CRUDController`YourBundle/Resources/config/services.yml`

```
gd_admin.merchant:
        class: %gd_admin.merchant.class%
        tags:
            - { name: sonata.admin, manager_type: orm, group: gd_merchant, label: Merchants }
        arguments: [null, GD\AdminBundle\Entity\Merchant, GDAdminBundle:MerchantAdmin] 
```

请注意，第三个参数是控制器的名称。默认情况下，它将为空。

**3.3>** -- 创建一个`getCategoryOptionsFromTagAction`在你的控制器中命名的动作。您的 Ajax 调用将针对此操作。

```
// route - get_categories_from_tag
public function getCategoryOptionsFromTagAction($tagId)
    {   
        $html = ""; // HTML as response
        $tag = $this->getDoctrine()
            ->getRepository('YourBundle:Tag')
            ->find($tagId);

        $categories = $tag->getCategories();

        foreach($categories as $cat){
            $html .= '<option value="'.$cat->getId().'" >'.$cat->getName().'</option>';
        }

        return new Response($html, 200);
    } 
```

**3.4>** -- 在`app/config/routing.yml`. 如果您使用 FOSJsRoutingBundle，请记住公开您的路线（否则您将不得不硬编码，这不是一个好主意）。

```
get_categories_from_tag:
    pattern: /{_locale}/admin/gd/admin/merchant/get-categories-from-tag/{tagId}
    defaults: {_controller: GDAdminBundle:MerchantAdmin:getCategoryOptionsFromTag}
    options:
        expose: true 
```

**3.5>** -- 发出 Ajax 请求并使用响应

```
{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript">

        $(document).ready(function(){
            var primaryTag = $("#{{ admin.uniqId }}_primaryTag");
            primaryTag.change(updateCategories()); // Bind the function to updateCategories
            primaryTag.change(); // Manual trigger to update categories in Document load.

            function updateCategories(){
                return function () {
                    var tagId = $("#{{ admin.uniqId }}_primaryTag option:selected").val();
                    var primaryCategory = $("#{{ admin.uniqId }}_primaryCategory");
                    primaryCategory.empty();
                    primaryCategory.trigger("liszt:updated");
                    var locale = '{{ app.request.get('_locale') }}';

                    var objectId = '{{ admin.id(object) }}'

                    var url = Routing.generate('get_categories_from_tag', { '_locale': locale, 'tagId': tagId, _sonata_admin: 'gd_admin.merchant', id: objectId });
                    $.post(url, { tagId: tagId }, function(data){
                        primaryCategory.empty().append(data);
                        primaryCategory.trigger("liszt:updated");
                    },"text");

                    primaryCategory.val("option:first").attr("selected", true);
                };
            }
        });
    </script>
{% endblock %} 
```

***问题 1：***如何获取附加到所有奏鸣曲元素的唯一 ID

***解决方案：***使用 admin 变量，它可以让您访问所有 Admin Class 的属性，包括 uniqId。请参阅有关如何使用它的代码。

***问题 2：***如何在 JS 中获取路由器。

***解决方案：***默认情况下 Symfony2 Routing 在 JS 中不起作用。您需要使用一个名为 FOSJSRouting 的包（如上所述）并公开路由。这将使您也可以访问 JS 中的 Router 对象。

我稍微修改了我的解决方案以使这个示例更清晰。如果您发现任何错误，请随时发表评论。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-31T12:47:42.840

在 Amit 和 Lumbendil 回答的第 1 步，您应该更改

```
{% extends base_template %} 
```

进入

```
{% extends 'SonataAdminBundle::standard_layout.html.twig' %} 
```

如果您收到类似的错误

```
Unable to find template "" in YourBundle:YourObject:base_edit.html.twig at line 34\. 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-06-24T14:36:44.950

很详细的帖子，只是为了更新覆盖的方式，使用Admin类中的*编辑*模板。
现在，你应该这样做：

```
// src/AppBundle/Admin/EntityAdmin.php  

class EntityAdmin extends Admin
{  
    public function getTemplate($name)
    {
        if ( $name == "edit" ) 
        {
            // template 'base_edit.html.twig' placed in app/Resources/views/Entity
            return 'Entity/base_edit.html.twig' ;
        }
        return parent::getTemplate($name);
    }
} 
```

或者将其注入使用[提供的方法](https://sonata-project.org/bundles/admin/master/doc/reference/templates.html#configuring-templates)的服务定义中，以使 Admin 类尽可能干净：

```
// app/config/services.yml  

app.admin.entity:
    class: AppBundle\Admin\EntityAdmin
    arguments: [~, AppBundle\Entity\Entity, ~]
    tags:
        - {name: sonata.admin, manager_type: orm, group: "Group", label: "Label"}
    calls:
        - [ setTemplate, [edit, Entity/base_edit.html.twig]] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-24T09:46:58.457

在块 javascripts 中，您必须更改`"liszt:updated"`为`"chosen:updated"`

希望它可以帮助某人；）

# opengl - OpenGL顶点数组，矩阵指针？

> ID：10118872
> 
> 赞同：1
> 
> 时间：2012-04-12T06:58:09.780
> 
> 标签：opengl, opentk

一年前我写了一段代码，用于`Shapes`使用 C# + OpenTK 渲染可编辑的 2D。每个`shape`都有自己的顶点，编辑`Shape`直接更改顶点值。

我`CollectVertices()`在 display_callback_func 中有一个迭代所有的`Shapes`并将顶点信息组合在大数组中并使用下面的代码片段一次绘制它们：

```
GL.EnableClientState(ArrayCap.VertexArray);
GL.EnableClientState(ArrayCap.ColorArray);

// draw fills (triangles)
GL.ColorPointer<byte>(3, ColorPointerType.UnsignedByte, 0, fillColor);
GL.VertexPointer<double>(2, VertexPointerType.Double, 0, fillArray);
GL.DrawArrays(BeginMode.Triangles, 0, fillArray.Length / 2);

// draw lines
GL.ColorPointer<byte>(3, ColorPointerType.UnsignedByte, 0, lineColor);
GL.VertexPointer<double>(2, VertexPointerType.Double, 0, lineArray);
GL.DrawArrays(BeginMode.Lines, 0, lineArray.Length / 2);

GL.DisableClientState(ArrayCap.ColorArray);
GL.DisableClientState(ArrayCap.VertexArray); 
```

一年后的今天，我想介绍一个新`struct Transform`的`Shape`对象。它将包含一个`Vector2 Center`和`Matrix Orientation`。编辑`Shape`现在将更改值`Transform`（尽管缩放仍将在顶点数据上完成，因为它在逻辑上应该如此）。

什么是包含转换矩阵的简洁方法，只需对上述代码片段进行最小的更改？

# linux - RHEL 链接器错误

> ID：10118886
> 
> 赞同：1
> 
> 时间：2012-04-12T06:59:24.417
> 
> 标签：linux, rhel

我`RHEL 5.8`在`x86_64`机器上：

```
$ uname -r
2.6.18-308.1.1.el5
$ uname -m
x86_64
$ 
```

尝试交叉编译源代码以使其`i386`兼容：

```
CFLAGS += -m32
LDFLAGS += -L/lib -lpthread -luuid 
```

但链接阶段失败并出现错误：

```
/usr/bin/ld: skipping incompatible /usr/lib64/libuuid.so when searching for -luuid
/usr/bin/ld: skipping incompatible /usr/lib64/libuuid.a when searching for -luuid
/usr/bin/ld: cannot find -luuid
collect2: ld returned 1 exit status 
```

实际上，主机具有`/lib/libuuid.so.1.2`：

```
$ readelf -h /lib/libuuid.so.1.2
ELF Header:
  Magic:   7f 45 4c 46 01 01 01 00 00 00 00 00 00 00 00 00 
  Class:                             ELF32
  Data:                              2's complement, little endian
  Version:                           1 (current)
  OS/ABI:                            UNIX - System V
  ABI Version:                       0
  Type:                              DYN (Shared object file)
  Machine:                           Intel 80386
  Version:                           0x1
  Entry point address:               0xf90
  Start of program headers:          52 (bytes into file)
  Start of section headers:          13352 (bytes into file)
  Flags:                             0x0
  Size of this header:               52 (bytes)
  Size of program headers:           32 (bytes)
  Number of program headers:         6
  Size of section headers:           40 (bytes)
  Number of section headers:         28
  Section header string table index: 27
$ 
```

是否有任何`ld`或其他选项来解决此链接问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:48:07.793

链接器仅搜索库名称，不搜索版本号（“libuuid.so”）。惯例是将其符号链接到`soname`（在本例中为“libuuid.so.1”），而后者又是到真正共享库（在本例中为“libuuid.so.1.2”）的符号链接。

因此，您需要这些符号链接`/lib`才能让链接器找到库。

（有关此主题的更多信息：http: [//tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html](http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T07:02:59.233

如果要链接特定的共享对象，则必须将其直接传递给编译器或链接器。

# jquery-mobile - 在 jQuery Mobile 页面中嵌入 Google 地图

> ID：10118887
> 
> 赞同：2
> 
> 时间：2012-04-12T06:59:25.987
> 
> 标签：jquery-mobile, google-maps-api-3, embed

我要做的就是在 jQuery 移动页面的内容标签中嵌入一个护目镜地图，但我无法让它出现在页面上。我猜这是一个小错误，但我已经为此苦苦挣扎了一段时间，任何帮助将不胜感激。

```
<head>
    <style type="text/css">
        #map_canvas {
            height: 256px;
            width: 384px;
            margin-top: 0.6em;
        }
    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript" src="fbObj1.js"></script>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.css"
    />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.js"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="PATH_TO_PLUGIN/jquery.ui.map.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"
    />
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.css"
    />
</head>

<body>
    <script type="text/javascript">
        geocoder = new google.maps.Geocoder();
        var map = new google.maps.Map($("div#map_canvas"), {
            center: new google.maps.LatLng(37.371940, -122.116470),
            zoom: 11,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        });
        map.index = 2;
    </script>
    <div data-role="page">
        <div data-role="header"></div>
        <div data-role="content">
            <div id="map_canvas"></div>
        </div>
        <div data-role="footer" data-position="inline"></div>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:38:48.313

以下代码对我有用

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&sensor=SET_TO_TRUE_OR_FALSE"></script>  
<script type="text/javascript">      
    function initialize() {
        var myOptions = {
            center: new google.maps.LatLng(37.371940, -122.116470),           
            zoom: 11,          
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };         
        var map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);
    }     
 </script> 

 <body onload="initialize()"> 
```

# blackberry - Torch 的黑莓广告

> ID：10118893
> 
> 赞同：1
> 
> 时间：2012-04-12T07:00:10.500
> 
> 标签：blackberry

我下载了广告 SDK 并按照 SDK 随附的开发指南 PDF 中的说明进行操作。

这是在 PDF 中逐步设置所有配置内容后我的代码的样子：

1.  Banner BannerAd = new Banner("我的区号#", null);
2.  bannerAd.setMMASize(Banner.MMA_SIZE_EXTRA_LARGE);
3.  添加（横幅广告）；

当我只有第 1 行和第 2 行时，什么也没有发生，但是当我放入第 3 行时，我的模拟器将无法启动，并且它也无法在实际设备上运行。我没有收到异常，也没有在事件日志中看到任何奇怪的东西。

我运行的模拟器是 BlackBerry Torch，实际设备也是如此，广告 SDK 适用于 post6.0 设备。

# c# - 为什么Windows phone 7 UDP 接收失败？

> ID：10118897
> 
> 赞同：0
> 
> 时间：2012-04-12T07:00:24.617
> 
> 标签：c#, windows-phone-7, udp

我有一个来自“ [Windows Phone 7 上的对等通信](http://www.codeproject.com/Articles/217754/Peer-Communication-on-Windows-Phone-7)”的多播项目。

我正在使用三星 GT-18350 手机进行测试。

工作 Windows Phone 版本：

*   操作系统版本：7.10.7740.16
*   固件版本号：2424.11.11.7
*   硬件修订号：23.15.0.8
*   电台软件版本：0424.11.11.7
*   电台硬件版本：0.0.0.800
*   引导加载程序版本：5.11.17.0
*   芯片SOC版本：0.74.2.1

我使用具有上述配置的三星手机测试了该应用程序。它工作正常，但是在更新下面的配置后它不起作用。

无法在最新版本的 Windows Phone 7 中运行：

*   操作系统版本：7.10.8107.79
*   固件版本号：2424.12.01.1
*   硬件修订号：23.15.0.8
*   电台软件版本：0424.12.1.1
*   电台硬件版本：0.0.0.800
*   引导加载程序版本：6.1.2.0
*   芯片SOC版本：0.74.2.1

我该如何解决这个问题？

# javascript - 如何识别设备以为 iPad 和 Galaxy Tab 制作单独的 css？

> ID：10118909
> 
> 赞同：2
> 
> 时间：2012-04-12T07:01:16.337
> 
> 标签：javascript, css

我的 Web 应用程序必须支持多种设备。我已经为所有移动平板设备编写了通用 css，但它在 iPad 上出现了一些问题。我找到了专门针对 iPad 的修复程序。

现在我想为 iPad 和银河设备分离出 css。

有没有办法在媒体查询或任何其他方式为 ipad 加载一个 css 为 Galaxy 设备加载另一个 css？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:10:06.547

您可以使用[媒体查询](http://mislav.uniqpath.com/2010/04/targeted-css/)进行组合以检测设备并定位您的 CSS。设备具有一组特定的属性（分辨率、方向、宽度、高度等），您可以使用媒体查询来挑选它们。这是[MDN 的参考资料](https://developer.mozilla.org/en/CSS/Media_queries)和[另一篇文章](http://www.vanseodesign.com/css/media-queries/)供进一步参考，还有一个[类似的问题](https://stackoverflow.com/q/6370690/575527)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T07:13:50.397

您可以使用的唯一媒体查询是询问[屏幕大小](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)如果由于某种原因这还不够（可能屏幕大小相同或者您必须知道型号）您可以使用[此脚本](http://www.quirksmode.org/js/detect.html)来识别设备并加载根据设备的相关CSS。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T07:15:42.723

通过将它们与正则表达式进行比较，您可以非常简单地检测 iPad 或 iPhone 等 iOS 设备的 http 请求用户代理，并相应地包含相关的 CSS。检测 iPhone/iPad 的简单正则表达式是：

```
(iPhone|iPad).*?OS ((\d+)_(\d+))(?:_(\d+))? 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T07:33:27.003

如果“专门针对 iPad 的修复”是指对已安装的 Safari 实例的修复 - 您应该使用功能检测。

使用指定的 JS 库最容易做到这一点，我更喜欢[Modernizr](http://modernizr.com/)。

# javascript - 咖啡脚本 - 保留类上下文和事件上下文

> ID：10118911
> 
> 赞同：5
> 
> 时间：2012-04-12T07:01:21.307
> 
> 标签：javascript, coffeescript, raphael

寻找一个常见问题的优雅解决方案：

我有一个订阅少量事件的类，我希望处理程序成为我的类中的实例方法，但也想获取事件上下文（在这种情况下事件触发的元素）。

我正在为方法定义使用粗线语法，但无法获取事件上下文。具体来说，我使用的是 raphael js，并且在订阅元素时，事件对象不包含元素，只有 dom 元素，所以没有事件上下文我将不得不通过它在论文中的 raphael id 来搜索元素，而我不喜欢。

在这种情况下，最佳做法是什么？我目前在每次订阅事件之前创建一个新的上下文对象，上下文包含实例引用和元素引用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T07:18:42.513

如果我理解正确，您希望在处理函数中保留对绑定和未绑定上下文的引用。您可以通过手动执行类似于胖箭头的操作来实现此目的：

```
class TheListenerObject
  constructor: ->
    context = @ # some people may call it `self`
    @theHandlerMethod = () ->
      referenceToTheListenerObjectInstance = context
      referenceToTheUnboundContext = @ 
```

# java - XPath 函数将多个文本节点转换为单个节点

> ID：10118914
> 
> 赞同：1
> 
> 时间：2012-04-12T07:01:33.227
> 
> 标签：java, xpath, substring, saxon

我正在使用 SAXON Java 来评估使用 substring-after() 的 XPath 表达式。当针对某些 DOM 执行此函数时，会出现以下错误：

`A sequence of more than one item is not allowed as the first argument of substring-after().`

是否有任何 XPath 函数可以将多个文本节点转换为单个节点？以下是我测试的不同 XPath：

```
1\. substring-after(normalize-space(//*[@id='PrintArea']//div/p[1]//span/font), ':')

2\. substring-after(normalize-space(//*[@id='PrintArea']//div/p[1]//span/font[1]), ':')

3\. substring-after(//*[@id='PrintArea']//div/p[1]//span/font/text(), ':')

4\. substring-after(//*[@id='PrintArea']//div/p[1]//span/font[1]/text(), ':')

5\. substring-after(//*[@id='PrintArea']//div/p[1]//span/font/text()[position()=1], ':')

5\. substring-after(//*[@id='PrintArea']//div/p[1]//span/font[1]/text()[position()=1], ':') 
```

我还应该补充一点，Firebug 的 FirePath 成功地评估了上述所有内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T08:56:02.907

如果 substring-after 的第一个参数（我称之为 ARG）包含多个节点，则 XPath 1.0 将忽略除第一个之外的所有节点。如果这是您想要的效果，请将 ARG 更改为 (ARG)[1] 以使其明确。注意括号：`/a/b/c/text()[1]`不会产生所需的效果，它需要是`(/a/b/c/text())[1]`.

还有另外两种可能的解释。您可能想说：对于第一个参数返回的每个文本节点，返回第一个冒号之后的子字符串。那将是

```
ARG/substring-after(., ':') 
```

或者您可能想说：将第一个参数返回的文本节点连接成一个字符串，并在第一个冒号之后找到该字符串的部分。那将是

```
substring-after(string-join(ARG, ''), ':') 
```

因此，根据您想要这三种行为中的哪一种，选择要匹配的语法。XPath 2.0 使它成为一个错误，因为猜测您的意图是危险的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:51:56.920

您应该能够使用[`string-join`函数](http://saxon.sourceforge.net/saxon7.7/functions.html#fn%3astring-join)( [spec](http://www.w3.org/TR/xpath-functions/#func-string-join) ) 将它们转换为单个字符串。这将获取一个字符串列表并为您提供一个字符串作为结果。使用空字符串作为分隔符。

# sql - DQL 的 Datediff 函数未按预期返回结果

> ID：10118917
> 
> 赞同：1
> 
> 时间：2012-04-12T07:01:42.107
> 
> 标签：sql, date, dql, documentum

我正在尝试使用 DQL 查询来查询文档服务器。使用 DATEDIFF 函数选择在当前日期创建的数据。这是查询

```
 SELECT title FROM content_table WHERE DATEDIFF(day, "r_creation_date", DATE(TODAY)) < '1' AND content_type IN ('story','news') 
```

问题在于今天的数据也选择了昨天的。为什么还有少于 1 个条件获取昨天的数据？

已尝试使用 DATEDIFF(day, "r_creation_date", DATE(TODAY)) = '0' 但这没有获取任何结果。我理解甚至时间都在图片中，但是当我使用“天”作为日期模式时，它不仅会单独计算天数的差异吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:58:22.473

我应该使用该`GETDATE()`功能来获取当前日期

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:15:06.540

你可以试试这个查询：

```
SELECT title FROM content_table WHERE r_creation_date > DATE(TODAY) AND content_type IN ('story','news') 
```

如果您需要今天创建的对象（00:00 之后，而不是过去 24 小时内）

# php - 如何检查同一ID不同科目的成绩是否相同？

> ID：10118918
> 
> 赞同：5
> 
> 时间：2012-04-12T07:01:42.123
> 
> 标签：php, mysql

```
ID    | Subject | Grade

12113   BM         A     
12113   BI         A    
12113   MM         A    
12113   SJ         A    
12113   GE         B    
12113   SV         A    
12113   PJ         A    
12112   BM         A     
12112   BI         A    
12112   MM         A    
12112   SJ         A    
12112   GE         A    
12112   SV         A    
12112   PJ         A 
```

大家好，以上是显示有多个科目的学生ID的示例表。我不知道如何使用 mysql 查询来检查同一个学生 ID 是否所有科目的分数都为 A。

试图使用`HAVING MAX(Grade) = 'A'`但没有帮助。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:09:25.163

```
select ID, 
case when count(ID) = sum(case when Grade = 'A' then 1 else 0 end) then 'YES' else 'NO' end as IsAllAGrade
from yourTable
group by ID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T07:14:41.717

这将返回`A`所有科目的所有学生：

```
select distinct id from t t1
where not exists (
  select * from t t2
  where t1.id = t2.id and grade != 'A') 
```

如果要检查特定学生，只需添加一个`where`子句。顺便说一句……一个学生对于一个给定的科目可以有多个结果吗？（两次相同的科目但不同的年级）

[你可以在这里](http://sqlfiddle.com/#!2/d8313/1)检查小提琴。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T07:12:28.573

```
SELECT * FROM TABLE t1
WHERE NOT EXISTS (
  SELECT 1 
  from table t2 
  where t2.id = t1.id 
  and t2.grade <> t1.grade) 
```

没有假设（“假设所有 ID 都有 7 门课程”），始终有效，这就是我们[`NOT EXISTS`](http://dev.mysql.com/doc/refman/4.1/pt/exists-and-not-exists-subqueries.html)的目标。

### 如果您只想要获得所有 A 的 ID

...只需添加一个 where 子句（或更改现有的子句）：

```
SELECT * FROM TABLE t1
WHERE NOT EXISTS (
  SELECT 1 
  from table t2 
  where t2.id = t1.id 
  and t2.grade <> 'A') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T07:09:40.027

您是否尝试过这样的事情（按升序排序，在您的情况下只给出第一个值 A）

```
SELECT * FROM `yourtable` WHERE `ID` = '12112' AND `Subject` = 'MM' ORDER BY `Grade` ASC LIMIT 0, 1 
```

# jquery - 使用 javascript 调用操作并导致回发

> ID：10118925
> 
> 赞同：2
> 
> 时间：2012-04-12T07:02:33.400
> 
> 标签：jquery, asp.net-mvc-3, razor

我需要使用 javascript 方法调用操作。那就是我有一个带有链接的页面，如下所示，

```
 <a href="javascript:Sort();" >Click Me to Go</a> 
```

我需要在单击此按钮时调用一个操作，该操作将返回一个视图，并且我希望进行回发。

下面是我发现的工作，但我不确定这是否是正确的方法，有没有办法可以使用 $post、$ajax 或 $json 来做到这一点？

这是因为我也需要将价值传递给操作。

```
 function Sort() {
        location.href='@Url.Action("ActioName")';
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:03:17.533

我假设由于您没有在 Url.Action(...) 中提供路由值，因此您要发布到操作的数据正在由客户端上的用户设置？

如果是这样，一种非常简单的方法是创建一个带有隐藏字段的表单（或者如果您想要直接的用户交互，则可能是可见的），然后在排序上设置这些字段，然后提交表单。

例如：

```
<form id='sortform' action='@Url.Action("ActionName")' method='POST'>
   <input type='hidden' name='MyFirstSortValue'>
   <input type='hidden' name='MySecondSortValue'>
</form> 
```

和：

```
function Sort() {
     var formElem = document.getElementById('sortform');
     formElem.MyFirstSortValue.value = "blah";
     formElem.MySecondSortValue.value = "blah";
     formElem.submit();
} 
```

如果您只是让用户选择排序信息，那么我建议让表单输入可见并直接使用它们，而不是在调用 Sort 时间接设置它们。

完成上述操作后，您可以使用[FormCollection](http://msdn.microsoft.com/en-us/library/system.web.mvc.formcollection.aspx)通过控制器访问信息。例如：

```
[HttpPost]
public ActionResult ActionName(FormCollection form)
{
    string myFirstSortValue = form["MyFirstSortValue"];
    string mySecondSortValue = form["MySecondSortValue"];

    // Do something to sort the data in the model...

    return View(yourModel);

} 
```

这将导致回发与正在传输的数据一起发生，并显示所需的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T07:05:23.587

```
function Sort() {
$.ajax({
   url:"@Url.Action("ActioName")",
   success:function(data){
       //do some thing
   }
})
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T07:36:22.960

```
@Html.ActionLink("LinkText","Action","Controller") 
```

试试这个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T07:36:59.947

如果你想从 javascript 调用一个动作，那么下面将起作用。

```
var somedata = null;
    $.ajax(
   {
       type: "POST",
       url: '@Url.Action("ActioName")',
       data: somedata,
       cache: false,       
       success: function (result) {
           //// if you want to go to a different page, then you can use 
           //// location.href='@Url.Action("ActioName")';
       },
       error: function (xhr, ajaxOptions, thrownError) {
                      alert(xhr.status);
                      alert(thrownError);
       }
   }); 
```

# javascript - 带有变量调用的 Google Map API 实现

> ID：10118927
> 
> 赞同：-1
> 
> 时间：2012-04-12T07:02:39.310
> 
> 标签：javascript, api, google-maps

这是我的谷歌地图代码如下：

```
<div id="map_canvas" style="width: 500px; height: 400px;"></div>

<script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
<script type="text/javascript">
InitMap("[['Leslie Fleming',41.977, -71.3248, 1 ],['Chris Reale',41.977, -71.3248, 2 ],['Michael Anello',41.977, -71.3248, 3 ],['Ed Pariseau Jr',41.977, -71.3248, 4 ],['Ryan Higgens',41.977, -71.3248, 5 ]]", "41.977, -71.3248");
function InitMap(MapElement, MapPointer){
    var locations = MapElement;
    var map = new google.maps.Map(document.getElementById('map_canvas'), {
      zoom: 10,
      center: new google.maps.LatLng(MapPointer),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var infowindow = new google.maps.InfoWindow();

    var marker, i;

    for (i = 0; i < locations.length; i++) {  
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][1], locations[i][2]),
        map: map
      });

      google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
          infowindow.setContent(locations[i][0]);
          infowindow.open(map, marker);
        }
      })(marker, i));
    }
}
</script> 
```

为什么它不工作？我做错什么了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T10:44:48.300

请参阅我已解决的代码。这是多标记谷歌地图。您可以通过 AJAX 使用它。我不需要聘请程序员。我能够解决它。

```
 <div id="map_canvas" style="width: 500px; height: 400px;"></div>

<script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
<script type="text/javascript">
InitMap([["Leslie Fleming",41.977, -71.3248, 1 ],["Chris Reale",41.977, -71.3248, 2 ],["Michael Anello",41.977, -71.3248, 3 ],["Ed Pariseau Jr",41.977, -71.3248, 4 ],["Ryan Higgens",41.977, -71.3248, 5 ]], 41.977, -71.3248);
function InitMap(MapElement, latitude, longitude){
    var locations = MapElement;
    var map = new google.maps.Map(document.getElementById('map_canvas'), {
      zoom: 10,
      center: new google.maps.LatLng(latitude, longitude),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var infowindow = new google.maps.InfoWindow();

    var marker, i;

    for (i = 0; i < locations.length; i++) {  
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][1], locations[i][2]),
        map: map
      });

      google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
          infowindow.setContent(locations[i][0]);
          infowindow.open(map, marker);
        }
      })(marker, i));
    }
}
</script> 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-12T08:12:35.210

请参阅我已解决的代码。这是多标记谷歌地图。您可以通过 AJAX 使用它。我不需要聘请程序员。我能够解决它。

```
 <div id="map_canvas" style="width: 500px; height: 400px;"></div>

<script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
<script type="text/javascript">
InitMap([["Leslie Fleming",41.977, -71.3248, 1 ],["Chris Reale",41.977, -71.3248, 2 ],["Michael Anello",41.977, -71.3248, 3 ],["Ed Pariseau Jr",41.977, -71.3248, 4 ],["Ryan Higgens",41.977, -71.3248, 5 ]], 41.977, -71.3248);
function InitMap(MapElement, latitude, longitude){
    var locations = MapElement;
    var map = new google.maps.Map(document.getElementById('map_canvas'), {
      zoom: 10,
      center: new google.maps.LatLng(latitude, longitude),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var infowindow = new google.maps.InfoWindow();

    var marker, i;

    for (i = 0; i < locations.length; i++) {  
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][1], locations[i][2]),
        map: map
      });

      google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
          infowindow.setContent(locations[i][0]);
          infowindow.open(map, marker);
        }
      })(marker, i));
    }
}
</script> 
```

# java - Sling 中的映射过滤器和 servlet

> ID：10118928
> 
> 赞同：2
> 
> 时间：2012-04-12T07:02:54.087
> 
> 标签：java, servlets, osgi, servlet-filters, sling

我有一个要求，我对页面的请求将被拦截过滤器过滤。根据不同的条件，请求必须被重定向到不同的页面。

我创建了一个包并在包激活器中注册了 servlet 和过滤器，从[这里](http://felix.apache.org/site/apache-felix-http-service.html#ApacheFelixHTTPService-UsingtheExtHttpService)得到了提示。

以下是代码片段：

```
Hashtable initParams = new Hashtable(); // to  pass a dictionary object to
                                        // service.register
initParams.put("sling.servlet.resourceTypes","/login");
initParams.put("sling.servlet.extensions","jsp");
service.registerServlet("/myServlet", this.myServlet, initParams, null);
initParams = new Hashtable();
initParams.put("sling.filter.scope","REQUEST");
service.registerFilter(this.checkPageRequest, "/.*",null, 2, null);
service.registerFilter(this.checkValidSession, "/.*", null, 1, null); 
```

我面临两个问题：

1.  我无法确定将过滤器映射到相应 servlet 的位置。我的理解是`checkPageRequest`过滤器将被调用，然后是`checkValidSession`. 如果没有`requestdispatcher.forward(..)`，则`myServlet`servlet 将被命中。在我的情况下，过滤器按预期通过 using 被调用`filterChain.doFilter(..)`，但 servlet 没有被调用。

2.  由于我的过滤器必须拦截所有页面请求，所以当我`requestdispatcher.forward(..)`对任何页面执行操作时，会再次调用相同的过滤器，进入循环。

我正在将其开发为 OSGi 捆绑包，以部署在 DayCQ 环境中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T12:11:58.607

当您使用 Sling 时，您应该使用 Sling 的基于标准 SCR 的方法来注册您的组件，在[http://sling.apache.org/site/filters.html](http://sling.apache.org/site/filters.html)中描述了过滤器和[http://sling.apache .org/site/servlets.html](http://sling.apache.org/site/servlets.html)用于 servlet。

正如您似乎正在做的那样，直接向 HttpService 注册 servlet 和过滤器将与 SlingMainServlet“对抗”，它应该在 Sling 应用程序中获取所有请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-08T06:27:37.987

那么您的过滤器和 Servlet 应该具有相同的 URL 映射。当然，过滤器将首先被调用。

让 Filter 预处理数据，让 servlet 将数据添加到请求对象中并将其分派给 JSP。请参见下面的示例，

```
@SlingFilter(order=1)

@Properties({
    @Property(name="service.pid", value="com.videojet.hiresite.filters.AddNewUserFilter",propertyPrivate=false),
    @Property(name="service.description",value="Preproceesing Filter", propertyPrivate=false),
    @Property(name="service.vendor",value="XXX Tech", propertyPrivate=false),
    @Property(name="pattern",value="/services/videojet/v1/.*", propertyPrivate=false) 
//  The Property Above property Maps your Filter to URL
})
public class AddNewUserFilter implements javax.servlet.Filter{

    private final Logger log = LoggerFactory.getLogger(this.getClass());
    public void destroy() {
        // TODO Auto-generated method stub

    }

    public void doFilter(ServletRequest request, ServletResponse response,
            FilterChain chain) throws IOException, ServletException {

        log.info("AddNewUserFilter Invoked Invoked");
// Preprocessing here and just call chain.doFilter(xxx); 
```

和 Servlet

```
@SlingServlet(
        paths={"/services/videojet/v1/AddNewUserController/view","/services/videojet/v1/AddNewUserController/userExists"
                ,"/services/videojet/v1/AddNewUserController/addUser"}
)
@Properties({
    @Property(name="service.pid", value="com.videojet.hiresite.controllers.AddNewUserController",propertyPrivate=false),
    @Property(name="service.description",value="Adds new user", propertyPrivate=false),
    @Property(name="service.vendor",value="XXX Tech", propertyPrivate=false)
})
public class AddNewUserController extends SlingAllMethodsServlet{

    /**
     * @author Oliver Kaunds
     */
    ///content/dam/videojetdocuments
    private static final long serialVersionUID = 1L;

    private final Logger log = LoggerFactory.getLogger(this.getClass());

    @Reference
    protected AddNewUserService addNewUserService;

    @Override
    protected void doGet(SlingHttpServletRequest request, SlingHttpServletResponse response) throws ServletException, IOException
    {

        log.info(":: Do GET Called ");
        String path =request.getRequestURI();
        log.info("PATH :: "+ path);
        try{
            if(path.equals("/services/videojet/v1/AddNewUserController/view"))
            {
                /* Do the dispatching here  One Servlet can have more than one Request 
                 Mappings . My Each mapping serves a purpose. */

                List<HRRepresentative> list =addNewUserService.getHRRepresentative();
                request.setAttribute("hrList",list );
                HttpSession session = request.getSession();
                String userOperation =(String)session.getAttribute("userOp");
                request.setAttribute("userOp", userOperation);
                session.removeAttribute("userOp");
                //throw new Exception("My Exception");
                RequestDispatcher dispatcher =request.getRequestDispatcher("/content/videojet/en/addnewuser.html"); // Dispatch to JSP here
                dispatcher.forward(request, response); 
            } 
```

**这是一个久经考验的代码**

# hadoop - 从 HDFS 加载数据并使用 Pig 写入 HBase 时出错

> ID：10118930
> 
> 赞同：0
> 
> 时间：2012-04-12T07:02:55.520
> 
> 标签：hadoop, hbase, apache-pig, hdfs

如何将hdfs中的mapreduce程序的输出数据加载到hbase中？

我尝试运行以下 pig 命令将数据从 hdfs 加载到 hbase：-

```
A = LOAD 'hdfs://b**/user/user1/development/hbase/output/part-00000' USING PigStorage('t') as (strdata1:chararray, strdata2:chararray); 
STORE A INTO 'hbase://mydata' USING org.apache.pig.backend.hadoop.hbase.HBaseStorage('mycf:strdata2'); 
```

其中，`hdfs://b**/user/user1/development/hbase/output/part-00000`是 map-reduce 输出`mydata`是创建的 hbase 表名称 `mycf`是列族名称

我收到以下错误：-

```
ERROR 2017: Internal error creating job configuration.

org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobCreationException: ERROR 2017: Internal error creating job configuration. 
  at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler.getJob(JobControlCompiler.java:673) 
  at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler.compile(JobControlCompiler.java:256) 
  at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher.launchPig(MapReduceLauncher.java:147) 
  at org.apache.pig.backend.hadoop.executionengine.HExecutionEngine.execute(HExecutionEngine.java:378) 
  at org.apache.pig.PigServer.executeCompiledLogicalPlan(PigServer.java:1198) 
  at org.apache.pig.PigServer.execute(PigServer.java:1190) 
  at org.apache.pig.PigServer.access$100(PigServer.java:128) 
  at org.apache.pig.PigServer$Graph.execute(PigServer.java:1517) 
  at org.apache.pig.PigServer.executeBatchEx(PigServer.java:362) 
  at org.apache.pig.PigServer.executeBatch(PigServer.java:329) 
  at org.apache.pig.tools.grunt.GruntParser.executeBatch(GruntParser.java:112) 
  at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:169) 
  at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:141) 
  at org.apache.pig.tools.grunt.Grunt.exec(Grunt.java:90) 
  at org.apache.pig.Main.run(Main.java:406) 
  at org.apache.pig.Main.main(Main.java:107)
Caused by: java.lang.IllegalArgumentException: java.net.URISyntaxException: Relative path in absolute URI: hbase://mydata_logs at org.apache.hadoop.fs.Path.initialize(Path.java:148) 
  at org.apache.hadoop.fs.Path.<init>(Path.java:71) 
  at org.apache.hadoop.fs.Path.<init>(Path.java:45) 
  at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler.getJob(JobControlCompiler.java:476) 
  ... 15 more
Caused by: java.net.URISyntaxException: Relative path in absolute URI: hbase://mydata_logs at java.net.URI.checkPath(URI.java:1787) 
  at java.net.URI.<init>(URI.java:735)
  at org.apache.hadoop.fs.Path.initialize(Path.java:145) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:18:57.160

仅从数据源字符串中删除 hbase:// 模式，如下所示： STORE A INTO 'mydata' USING org.apache.pig.backend.hadoop.hbase.HBaseStorage('mycf:strdata2');

# deployment - 除了热部署之外，在 jboss 服务器中部署的任何其他选项？

> ID：10118934
> 
> 赞同：-3
> 
> 时间：2012-04-12T07:03:14.460
> 
> 标签：deployment, jboss

我想知道除了热部署之外在jboss服务器中部署的方法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T17:43:24.747

让客户和建造者建立计划：

```
ModelControllerClient client = ModelControllerClient.Factory.create(host, port);
ServerDeploymentManager manager = ServerDeploymentManager.Factory.create(client);
DeploymentPlanBuilder builder = manager.newDeploymentPlan(); 
```

以及执行任何操作的方法（这里实现了一些）：

```
public DeployementActionStatus execute(Type deploy) throws IOException
{
    List<Throwable> errors = new LinkedList<Throwable>();
    DeployementActionStatus status = DeployementActionStatus.SUCCESS;

    switch (deploy)
    {
    case DEPLOY:
        if (archive != null)
        {
            plan = builder.add(archive).deploy(archive.getName()).build();
        }
        else
        {
            return DeployementActionStatus.FAILURE;
        }

        break;
    case REDEPLOY:
    {
        if (archive != null)
        {
            plan = builder.redeploy(archive.getName()).build();
        }
        else
        {
            return DeployementActionStatus.FAILURE;
        }

        break;
    }
    case UNDEPLOY:
    {
        plan = builder.undeploy(getApplicationName()).build();
        break;
    }
    case REMOVE:
    {
        plan = builder.remove(getApplicationName()).build();
        break;
    }

    default:
        plan = null;
        break;
    }
    if (plan == null)
    {
        throw new IllegalStateException("Invalid type: " + deploy);
    }

    if (plan.getDeploymentActions().size() > 0)
    {
        try
        {
            final ServerDeploymentPlanResult planResult = manager.execute(plan).get();

            // Check the results
            for (DeploymentAction action : plan.getDeploymentActions())
            {
                final ServerDeploymentActionResult actionResult = planResult.getDeploymentActionResult(action
                        .getId());
                final ServerUpdateActionResult.Result result = actionResult.getResult();
                switch (result)
                {
                case FAILED:
                case NOT_EXECUTED:
                case ROLLED_BACK:
                {
                    log.error(actionResult.getDeploymentException());
                    if (actionResult.getDeploymentException().getMessage() != null
                            && actionResult.getDeploymentException().getMessage().contains("Duplicate"))
                    {
                        status = DeployementActionStatus.FAILURE_ALREADY_DEPLOYED;
                    }
                    else
                    {
                        status = DeployementActionStatus.FAILURE;
                    }
                    break;
                }
                case CONFIGURATION_MODIFIED_REQUIRES_RESTART:
                    // Should show warning
                    break;
                default:
                    break;
                }
            }

        }
        catch (InterruptedException e)
        {
            errors.add(e);
            status = DeployementActionStatus.FAILURE;
        }
        catch (ExecutionException e)
        {
            errors.add(e);
            status = DeployementActionStatus.FAILURE;
        }
        catch (Exception e)
        {
            if (e instanceof RuntimeException)
            {
                status = DeployementActionStatus.CONNECTION_TO_SERVER_FAILED;
            }
        }
    }
    return status;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T00:56:33.567

只有在 JBoss 运行时才认为部署是热的。如果您不想要热部署，您可以关闭部署扫描器 [1] 或停止 JBoss 并部署工件。

```
[1] https://community.jboss.org/wiki/ConfiguringTheDeploymentScannerInConfjbossSystemxml 
```

# c++ - DeviceContext (HDC) 中的 Alpha 通道

> ID：10118935
> 
> 赞同：7
> 
> 时间：2012-04-12T07:03:18.280
> 
> 标签：c++, windows, winapi, gdi

请帮助我处理 HDC 中的 alpha 通道。我让 HDC dc 抛出 CreateCompatibleDC。比调用 CreateDIBSection 并且可以在内存中找到图像字节。比调用 DrawFrameControl 到这个 dc。一切正常，但在内存中，每个像素有 4 个字节，alpha 通道填充 00。即使之前有 FF。但我需要 alpha 通道。我怎样才能让 DrawFrameControl 设置真正的 alpha 值或者只是不触摸它们。谢谢你。抱歉英语不好:(

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T09:12:48.580

您不能让 GDI 不写入每像素四字节位图的 alpha / 保留字节。GDI 并不是真正的 alpha 感知，除了几个函数，比如[`AlphaBlend`](http://msdn.microsoft.com/en-us/library/dd183351.aspx). 但是，您可以使用它写入的知识并将 alpha 重置为 0*以了解它写入的像素*，然后手动修复 alpha。

有关更多信息，请阅读以下三篇文章：

*   [使用 GDI 的透明图形，第 1 部分](http://itinerantdeveloper.blogspot.com/2011/10/transparent-graphics-with-pure-gdi-part.html)
*   [使用 GDI 的透明图形，第 1 部分 1/2](http://itinerantdeveloper.blogspot.com/2011/11/transparent-graphics-with-pure-gdi-part.html)
*   [使用 GDI 的透明图形，第 2 部分](http://itinerantdeveloper.blogspot.de/2012/03/transparent-graphics-with-pure-gdi-part.html)

前两个可能会为您提供足够的信息来实现您想要的。

这些文章采用通用方法使用 GDI 函数处理 alpha，通过扫描 alpha 被破坏的像素并修复它（并使用更高级的技术以正确的 alpha 绘制多个相互叠加的东西。） [`FrameRect`](http://msdn.microsoft.com/en-us/library/dd144838(v=VS.85).aspx)绘制一个矩形其中线条是一个单位宽和高。您可能会发现使用线条绘制甚至直接在内存中编辑像素位图以在内存中绘制直线更有效。这避免了必须扫描整个位图以查找 GDI 绘制的像素 - 毕竟，因为它是一个具有一个单位宽边缘的矩形，您可以确切地知道哪些像素将被绘制到，并且可以自己编辑它们。

# c# - 如何从 C# 读取数组列表并将其写入 java 脚本对象

> ID：10118937
> 
> 赞同：2
> 
> 时间：2012-04-12T07:03:38.950
> 
> 标签：c#, javascript, sql-server

我目前在 C# 中有一个数组列表，其中包含我的数据库表（有 4 列，其中 2 列是 C# 中的 dateTime 对象），我想将 arrayList 的值读入 javascript 对象，这是对象类的类构造函数我想存储数组列表数据：

```
 function job()
             {
             this.name="new_job";
             this.Sdate=17; 
             this.Edate=25;
             this.Smonth=1;
             this.Emonth=1;
             this.color='B'
             this.Syear=2012;
             this.Eyear=2012;
                     } 
```

我想在 javascript 中实现这样的目标：

`jobObject1.name=arrayList's first row first object`,

我不知道数据实际上是如何存储在数组列表中的，事实上我是第一次使用它，如果除了使用 arrayList 之外还有其他方法将数据从我的数据表存储到 javascript 对象中，请告诉我,我会用那个..

我只是想以某种方式使用数组列表将数据表传递给我的javascript对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:13:02.113

您可以将数据表转换为 JSON 对象。有一些自定义库，例如 JSON.net，或者您可以编写自己的函数。请参阅以下链接进行自定义转换：- [http://www.codeproject.com/Articles /19396/Convert-ASP-NET-DataTable-to-JSON-to-use-a-DataTab](http://www.codeproject.com/Articles/19396/Convert-ASP-NET-DataTable-to-JSON-to-use-a-DataTab)

# c++ - 在 C++ 中的 UDP 套接字编程中获取“传输端点未连接”

> ID：10118943
> 
> 赞同：2
> 
> 时间：2012-04-12T07:04:13.083
> 
> 标签：c++, c, linux, sockets, udp

我`Transport endpoint is not connected`在 UDP 服务器程序中遇到错误，而我试图通过`shutdown(m_ReceiveSocketId, SHUT_RDWR);` 以下是我的代码片段来关闭套接字：

```
 bool UDPSocket::receiveMessage()
    {
        struct sockaddr_in serverAddr; //Information about the server
        struct hostent *hostp; // Information about this device 

        char buffer[BUFFERSIZE]; // Buffer to store incoming message
        int serverlen; // to store server address length

        //Open a datagram Socket
        if((m_ReceiveSocketId = socket(AF_INET, SOCK_DGRAM, 0)) < 0)
        {
            Utility_SingleTon::printLog(LOG_ERROR,"(%s %s %d) UDP Client - socket() error",__FILE__,__func__, __LINE__);
            pthread_exit(NULL);
            return false;
        }

        //Configure Server Address.
        //set family and port
        serverAddr.sin_family = AF_INET;
        serverAddr.sin_port = htons(m_ListeningPort);

        if (bind(m_ReceiveSocketId, (struct sockaddr *) &serverAddr,sizeof(struct sockaddr_in)) < 0 )
        {
            Utility_SingleTon::printLog(LOG_ERROR,"(%s %s %d) UDP Client- Socket Bind error=%s",__FILE__,__func__, __LINE__,strerror(errno));
            pthread_exit(NULL);
            return false;
        }

        //TODO Re-Route Mechanism.
        if((serverAddr.sin_addr.s_addr = inet_addr(m_ServerIPStr.c_str())) == (unsigned long)INADDR_NONE)
        {
            /* Use the gethostbyname() function to retrieve */
            /* the address of the host server if the system */
            /* passed the host name of the server as a parameter. */
            /************************************************/
            /* get server address */
            hostp = gethostbyname(m_ServerIPStr.c_str());
            if(hostp == (struct hostent *)NULL)
            {
                /* h_errno is usually defined */
                /* in netdb.h */
                Utility_SingleTon::printLog(LOG_ERROR,"%s %d %s %s %d", "Host Not found",  h_errno,__FILE__,__func__, __LINE__);
                pthread_exit(NULL);
                return false;
            }
            memcpy(&serverAddr.sin_addr, hostp->h_addr, sizeof(serverAddr.sin_addr));
        }

        serverlen = (int )sizeof(serverAddr);

        // Loop and listen for incoming message 
        while(m_RecevieFlag)
        {
            int receivedByte = 0;
            memset(buffer, 0, BUFFERSIZE);
            //receive data from the server
            receivedByte = recvfrom(m_ReceiveSocketId, buffer, BUFFERSIZE, 0, (struct sockaddr *)&serverAddr, (socklen_t*)&serverlen);
            if(receivedByte == -1)
            {

                Utility_SingleTon::printLog(LOG_ERROR,"[%s:%d#%s] UDP Client - receive error",__FILE__,__LINE__,__func__);
                close(m_ReceiveSocketId);
                pthread_exit(NULL);
                return false;
            }
            else if(receivedByte > 0)
            {
                string rMesg;
                rMesg.erase();
                for(int loop = 0; loop < receivedByte; loop++)
                    rMesg.append(1, buffer[loop]);
                Utility_SingleTon::printLog(LOG_DEBUG,"[%s:%d#%s] received message=%d",__FILE__,__LINE__,__func__, rMesg.length());
                QOMManager_SingleTon::getInstance()->setReceivedMessage(rMesg);
                raise(SIGUSR1);
            }

        }

        close(m_ReceiveSocketId);
        pthread_exit(NULL);
        return true;

    } 
```

任何帮助，将不胜感激。谢谢尤维。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T08:25:56.243

您不需要为 UDP 套接字调用 shutdown()。从手册页：

```
The shutdown() call causes all or part of a full-duplex connection on the socket
associated with sockfd to be shut down. 
```

如果在 UDP 套接字上调用 shutdown()，它将返回 ENOTCONN（指定的套接字未连接），因为 UDP 是无连接协议。

您需要做的就是关闭套接字并将套接字设置为 INVALID_SOCKET。然后在你的析构函数中检查套接字在关闭之前是否已经设置为 INVALID_SOCKET 。

# java - 我可以并且是否需要避免单例模式？

> ID：10118945
> 
> 赞同：1
> 
> 时间：2012-04-12T07:04:16.580
> 
> 标签：java, design-patterns, static, singleton

我正在编写一个程序，在许多其他东西中，我需要三个类，我们可以在这里称之为 writer、storage 和 reader。

Writer 需要非常频繁地访问存储类，而 Reader 则很少，尤其是与 writer 相比。存储类仅用于存储数据写入器的写入。作者唯一要做的就是经常写入一些短脉冲数据。读取器从存储中读取写入的数据，然后刷新存储以释放一些空间供写入器写入新数据。为了给出访问频率的一些数字和概念，假设作者在每分钟内多次访问存储，而读者大约每小时访问一次。

所以问题是我需要在存储类中使用单例模式还是将其声明为静态类就足够了？

另外，我如何确保读取器类在使用存储时，它会在读取并从存储中刷新数据后立即释放存储资源？大多数情况下，存储类应该可供写入者在其中写入数据。

单例方法看起来不错，尤其是我不是 OOP 背景。我听说这很糟糕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:17:30.177

与这些问题一样，我认为没有一个正确的答案。

首先，这个问题已经[有了很好的答案](https://stackoverflow.com/a/1020384/139277)。

单例模式的典型实现依赖于包含该类的唯一实例的静态字段。我根本不喜欢这种方法，因为静态字段本质上是一个具有所有缺点的全局变量（例如隐藏的依赖关系和增加耦合的风险，不利于可测试性）。

但是，从某种意义上说，在您的应用程序中只需要一个类的单个实例，更一般的单例概念在您描述的场景中可能是一个好主意。但是，我不会通过静态变量神奇地访问它，而是将它传递给使用它的类的构造函数。这样，类之间的依赖关系是显而易见的，它将简化测试（例如，如果你想注入一个模拟而不是真正的类）。[有关构造函数注入](http://misko.hevery.com/2009/02/19/constructor-injection-vs-setter-injection/)的更多好处，请参见此处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T07:08:10.683

> 我需要在存储类中使用单例模式还是将其声明为静态类就足够了？

这些都是不相关的问题。
单例是关于你应该拥有多少个类的实例。
使用单例，您只在程序中强制执行 1 个实例。
如果这是您需要的，请使用单例。
剩下的你应该阅读生产者/消费者模式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T07:14:17.083

基本上，单例与静态类几乎相同。在相同的情况下，两者都有好坏之分，但单例更“面向对象”。在基于原型的语言中，没有真正的区别。

单身人士的名声很差，因为很多人将它们用作全局变量的替代品（现在每个人都“知道”这是不好的）。以这种方式使用，单例与全局变量一样糟糕。如果它确实模拟了一个您可以证明只有一个实例的对象，请使用单例。如果它甚至在理论上*可能*在将来有另一个实例，或者如果它没有为特定的东西建模，那么不应该使用单例模式 - 也不应该使用静态类。

这一切都与您的读者/作家问题无关；如评论所示，一种是生产者/消费者模式或观察者模式（取决于您如何实现它）。另一个是基本的面向对象设计问题。

# c# - 关于如何在winform中动态绘制拓扑图的一些东西

> ID：10118946
> 
> 赞同：-1
> 
> 时间：2012-04-12T07:04:24.423
> 
> 标签：c#, winforms, visual-studio-2010, topology

我以前从来没有这样做过。不知道可以用哪个控件或者什么类来解决，可以给点建议吗？我正在使用 C#，我的平台是 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:19:32.653

几年前，对于类似 2D CAD 的程序，我使用[piccolo2d](http://code.google.com/p/piccolo2d/)取得了巨大成功。这是一个很好的书面 2D 库，完全用`C#`. 顺便说一下，我们应该根据自己的需要对其进行一些定制，以便在我们的特定比赛中运行得更快，但我再说一遍，我对它有很好的感觉。

祝你好运。

# java - JAXB 中的 XML 解析问题

> ID：10118948
> 
> 赞同：3
> 
> 时间：2012-04-12T07:04:42.570
> 
> 标签：java, jaxb

我正在尝试从第三方 url 解析 xml Stream。在我的控制台中它看起来像。

`

```
 <?xml version="1.0" encoding="utf-8"?>
    <ArrayOfString xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://tempuri.org/">
      <string>CMSDocs</string>
      <string>CRMIncomingDocs</string>
      <string>CRMOutgoingDocs</string>
      <string>Customized Reports</string>
      <string>scripts</string>
      <string>Site Assets</string>
      <string>Site Pages</string>
      <string>Style Library</string>
    </ArrayOfString> 
```

`

我收到错误后的错误。

```
Exception in thread "main" javax.xml.bind.UnmarshalException
 - with linked exception:
[org.xml.sax.SAXParseException: Premature end of file.]
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.createUnmarshalException(AbstractUnmarshallerImpl.java:315)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.createUnmarshalException(UnmarshallerImpl.java:481)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:199)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:168)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:137)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:184)
    at com.cms.webservice.converter.BaseMarshaller.convertToObject(BaseMarshaller.java:41)
    at com.cms.webservice.converter.BaseMarshaller.main(BaseMarshaller.java:90)
Caused by: org.xml.sax.SAXParseException: Premature end of file.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:195)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:174)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:388)
    at com.sun.org.apache.xerces.internal.impl.XMLScanner.reportFatalError(XMLScanner.java:1411)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:1058)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:510)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:807)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:107)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:195)
    ... 5 more
Java Result: 1 
```

但它与 XML 一样

`

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ArrayOfString>
    <string>Kshitij-1</string>
    <string>Kshitij-2</string>
    <string>Kshitij-3</string>
    <string>Kshitij-4</string>
    <string>Kshitij-5</string>
</ArrayOfString> 
```

`

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T09:08:22.763

您可以使用`@XmlSchema`注解来指定命名空间限定。包注释放置在一个特殊的类上，该类`package-info`必须与您的域类位于同一个包中。下面是一个适用于您的用例的示例。

**包信息**

```
@XmlSchema( 
    namespace = "http://tempuri.org/", 
    elementFormDefault = XmlNsForm.QUALIFIED) 
package example;

import javax.xml.bind.annotation.XmlNsForm;
import javax.xml.bind.annotation.XmlSchema; 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/08/jaxb-namespaces.html](http://blog.bdoughan.com/2010/08/jaxb-namespaces.html)

# android - 找出应用程序在缓存中存储的内容

> ID：10118954
> 
> 赞同：0
> 
> 时间：2012-04-12T07:05:06.160
> 
> 标签：android

我的 Android 应用似乎使用了太多的缓存空间。apk 小于 2 MB，但 App 使用了大约 5 MB 的缓存。现在我想找出什么可以使用这么多空间。也许它是背景图像，它是 700 KB Jpg（它是一张照片）？

我没有在缓存中明确存储任何数据，所以我想知道这 5 MB 是从哪里来的。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:25:36.713

您可以尝试在 DDMS [http://developer.android.com/guide/developing/debugging/ddms.html上检查您的应用程序的堆和分配跟踪器](http://developer.android.com/guide/developing/debugging/ddms.html)

# iphone - 在相机叠加层中创建我们自己的裁剪矩形

> ID：10118955
> 
> 赞同：4
> 
> 时间：2012-04-12T07:05:12.833
> 
> 标签：iphone, ios, camera, uiimagepickercontroller

我想说明我的基本要求，即为`UIImagePickerController`相机更改裁剪矩形的框架。

我刚刚意识到不可能更改裁剪矩形的框架。这让我只有一个选择，即创建我自己的相机叠加层，我可以在其中设置裁剪矩形的框架。我搜索了很多，但一无所获。我之前问[过](https://stackoverflow.com/questions/10100220/how-to-use-uiimagepickercontrollercroprect)，但没有得到任何东西。我什至不知道这是否可能，如果是，那么如何创建它并移动裁剪框，根据默认`UIImagePickerController`裁剪矩形对其进行缩放。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T07:17:29.050

您必须实现自己的 CropRect。首先设置

```
[picker setAllowsEditing:NO]; 
```

然后在`didFinishPickingMediaWithInfo`委托中推送你自己的 CropRect 视图

```
CustomImageEditor *custom = [[CustomImageEditor alloc] initWithNibName:@"CustomImageEditor" bundle:nil];
[picker pushViewController:custom animated:YES];
[custom release]; 
```

在推送视图时，像这样将图像传递给自定义视图

```
 UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
 custom.pickedImage = image; 
```

在该 customView 中，您裁剪图像。

要裁剪图像，请尝试这样..

```
CGImageRef imageRef = CGImageCreateWithImageInRect([image CGImage], cropRect);
UIImage *image = [UIImage imageWithCGImage:imageRef]; 
```

# zk - ZKOSS标签中的数字格式

> ID：10118961
> 
> 赞同：1
> 
> 时间：2012-04-12T07:05:33.257
> 
> 标签：zk, labels

有没有办法在 ZK 标签组件中格式化数字，看起来像 `<label value="${each.value}" />`？值是双倍的，我想分隔数千等...我知道例如 doublebox 具有格式属性，但如果我只想将数字显示为标签怎么办？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:53:30.797

**功能要求**

首先，我在 ZK 的跟踪系统上为此打开了一个功能请求，你可以在[这里](http://tracker.zkoss.org/browse/ZK-1047)找到它。如果您需要更新，请按照此操作。

**实施方式**

事实上，根据您使用的模式和技术，有多种方法可以实现这一点。

**MVC & EL**

您可以创建一个 EL 函数，该函数将为您在 ZUL 文件中进行格式化。首先创建一个这样的类：

```
public class FormatElNumber {
    public static String formatStock(double stock) {
        final NumberFormat nf = NumberFormat.getInstance();
        nf.setMaximumFractionDigits(2);
        return nf.format(stock);
    }
} 
```

这将输出带两位小数的数字。其次，您需要将其添加到您的 zul 文件的顶部：

```
<?xel-method prefix="c" name="formatStock" class="demo.grid.hierarchy.FormatElNumber"
   signature="java.lang.String formatStock(double)"?> 
```

然后，当您有标签时，您可以执行以下操作：

```
<label style="color:red;" value="${c:formatStock(each.averageHigh)}" /> 
```

有关此技术的更多信息可[在此处](http://books.zkoss.org/wiki/ZUML_Reference/ZUML/Processing_Instructions/xel-method)获得。

**MVVM**

MVVM 实际上更容易实现，例如，您创建所谓的转换器（请注意，此类未经测试，但您明白了）。

```
public class NumberFormatConverter implements Converter {

    @Override
    public Object coerceToBean(Object val, Component comp, BindContext ctx) {
        return null;
    }

    @Override
    public Object coerceToUi(Object val, Component comp, BindContext ctx) {

        if(!(val instanceof Integer)) {
            throw new IllegalArgumentException("The argument must be a number!");
        }

        final Object tmp = ctx.getConverterArg("length");
        int length = 0;

        if(tmp instanceof Integer) {
            length = (Integer)tmp;
        }

        final NumberFormat nf = NumberFormat.getInstance();
        nf.setMaximumFractionDigits(length);

        return nf.format(val);
    }

} 
```

然后你在 zul 文件中所做的就是指定你想对值使用转换器，例如：

```
<label value="@load(vm.message) @converter(vm.myConverter)"/> 
```

有关此技术的更多信息，您可以参考[此处](http://books.zkoss.org/wiki/ZK%20Developer%27s%20Reference/MVVM/Data%20Binding/Converter)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T12:54:21.410

来自文档：http: [//books.zkoss.org/wiki/ZUML_Reference/EL_Expressions/Core_Methods/formatNumber](http://books.zkoss.org/wiki/ZUML_Reference/EL_Expressions/Core_Methods/formatNumber)

```
<?taglib uri="http://www.zkoss.org/dsp/web/core" prefix="c"?>
<zk>
    <label value="${c:formatNumber(2332315231, '$ ###,###,###.00')}" />
</zk> 
```

# ios - 如何创建具有多行多列的表格视图？

> ID：10118962
> 
> 赞同：3
> 
> 时间：2012-04-12T07:05:43.100
> 
> 标签：ios, uitableview, sdk, uinavigationcontroller

我知道如何创建一个单列多行的表格视图，但我不知道如何创建一个多行多列的表格视图。

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:16:00.663

我就是这样做的：

```
#import <Foundation/Foundation.h>

  @interface MyTableCell : UITableViewCell 

{   
NSMutableArray *columns;
 }

- (void)addColumn:(CGFloat)position;

@end 
```

执行：

```
#import "MyTableCell.h"

#define LINE_WIDTH 0.25

@implementation MyTableCell

- (id)init
{
self = [super init];
if (self) {
    // Initialization code here.
}

return self;
}

 - (void)addColumn:(CGFloat)position 
{
[columns addObject:[NSNumber numberWithFloat:position]];
 }

- (void)drawRect:(CGRect)rect 
{
CGContextRef ctx = UIGraphicsGetCurrentContext();
// Use the same color and width as the default cell separator for now
CGContextSetRGBStrokeColor(ctx, 0.5, 0.5, 0.5, 1.0);
CGContextSetLineWidth(ctx, LINE_WIDTH);

for (int i = 0; i < [columns count]; i++)
{
    CGFloat f = [((NSNumber*) [columns objectAtIndex:i]) floatValue];
    CGContextMoveToPoint(ctx, f, 0);
    CGContextAddLineToPoint(ctx, f, self.bounds.size.height);
}

CGContextStrokePath(ctx);

[super drawRect:rect];
}

@end 
```

最后一块，cellForRowAtIndexPath

```
MyTableCell *cell = (MyTableCell *)[rankingTableView dequeueReusableCellWithIdentifier:MyIdentifier];
cell              = [[[MyTableCell alloc] initWithFrame:CGRectZero reuseIdentifier:MyIdentifier] autorelease]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T10:45:21.123

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
  static NSString *cellIdentifier = @"MyCell";

  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
  if (cell == nil) {
    // load cell from nib to controller's IBOutlet
    [[NSBundle mainBundle] loadNibNamed:@"MyTableCellView" owner:self options:nil];
    // assign IBOutlet to cell
    cell = myCell;
    self.myCell = nil;
  }

  id modelObject = [myModel objectAtIndex:[indexPath.row]];

  UILabel *label;
  label = (UILabel *)[cell viewWithTag:1];
  label.text = [modelObject firstField];

  label = (UILabel *)[cell viewWithTag:2];
  label.text = [modelObject secondField];

  label = (UILabel *)[cell viewWithTag:3];
  label.text = [modelObject thirdField];

  return cell;
} 
```

我认为这段代码会帮助你 UITableView 并不是真正为多列设计的。但是您可以通过创建自定义 UITableCell 类来模拟列。在 Interface Builder 中构建您的自定义单元格，为每一列添加元素。给每个元素一个标签，以便您可以在控制器中引用它。

给你的控制器一个插座来从你的笔尖加载电池：

```
@property(nonatomic,retain)IBOutlet UITableViewCell *myCell; 
```

然后，在您的表视图委托的 cellForRowAtIndexPath 方法中，按标签分配这些值。

# nhibernate - 在 Nhibernate 中填充实体

> ID：10118963
> 
> 赞同：0
> 
> 时间：2012-04-12T07:05:43.897
> 
> 标签：nhibernate

任何人都可以帮我一些想法吗？下面是我的问题。假设我有一个名为 A 的实体，其字段为 A1、A2、A3 和 A4，而且我有 3 个存储过程，它们仅从表 A 返回数据。

（注：表 A 只有 4 列 A1、A2、A3、A4）。

第一个存储过程返回 A1、A2 第二个存储过程返回 A1、A2、A3 第三个存储过程单独返回 A1。

对于上述场景，我需要创建三个不同的映射还是有任何解决方法？如何使用单个实体 A 和更少的更改代码来处理这种场景......

**我的场景：**

```
public IList<Userdatasw> Find(string userName)
        {
            var s = ServiceLocator.Resolve<IeGoatSessionFactory>().OpenSession();

            // Executing the stored procedure 
            IList userList1 = s.CreateSQLQuery("exec dbo.IFSEntry @UserName=:UserName")
                .AddScalar("Password", NHibernateUtil.String)
                .AddScalar("UserLevel", NHibernateUtil.Int32)
                .AddScalar("UserName", NHibernateUtil.String)
                .AddScalar("EmployeeId", NHibernateUtil.String)
                .AddScalar("SenAccntManager", NHibernateUtil.String)
                .AddScalar("updaterequired", NHibernateUtil.String)
                .SetParameter("UserName", userName).List();

            // Trying to cast anonymous type to Userdatasw
            IList<Userdatasw> userdatasw1 = userList1.OfType<Userdatasw>().ToList();
            return userdatasw1;

        } 
```

在上面的代码中，返回类型是 Ilist，但我需要将其转换为 Userdatasw，代码更改较少。我在 Nhiberante 中看到了很多解释“从存储过程填充实体”的链接，但我有 20 个字段的实体，并且在上面的 SP 中只返回 6 个值。

那么对于每个返回相同类型的 SP，我们需要创建单独的映射吗？

任何想法将不胜感激。

谢谢，文卡特什。Ĵ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T09:00:19.777

大家好，我有解决方案。如果我们使用 SetResultTransformer 就很简单。

```
 public IList<Userdatasw> Find(string userName)
    {
        var s = ServiceLocator.Resolve<IeGoatSessionFactory>().OpenSession();

        IQuery query = s.CreateSQLQuery("exec dbo.IFSEntry @UserName=:UserName")
                          .AddScalar("Password", NHibernateUtil.String)
                          .AddScalar("UserLevel", NHibernateUtil.Int32)
                          .AddScalar("UserName", NHibernateUtil.String)
                          .AddScalar("EmployeeId", NHibernateUtil.String)
                          .AddScalar("SenAccntManager", NHibernateUtil.String)
                          .AddScalar("updaterequired", NHibernateUtil.String)
                          .SetResultTransformer(Transformers.AliasToBean(typeof(Userdatasw)))
                          .SetParameter("UserName", userName);
        return query.List<Userdatasw>();
    } 
```

# ios - 如何识别新 iPad

> ID：10118966
> 
> 赞同：2
> 
> 时间：2012-04-12T07:05:51.947
> 
> 标签：ios

我需要知道当前设备是 iPad2 还是新 iPad。我使用`[[UIScreen mainScreen] Scale]`，但结果是 1.0

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T07:11:27.077

如发现[here](https://stackoverflow.com/questions/9688930/programmatically-detect-an-ipad-3-hd)：

```
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad && [[UIScreen mainScreen]     respondsToSelector:@selector(scale)] && [UIScreen mainScreen].scale > 1)
{
    // new iPad
} 
```

# php - 不要以编程方式在 wordpress 中显示较旧的帖子

> ID：10118967
> 
> 赞同：1
> 
> 时间：2012-04-12T07:05:52.087
> 
> 标签：php, wordpress-theming, wordpress

我正在使用“未来就是现在！” 插件，并希望显示未来计划的所有帖子。唯一的问题是，我如何在进入循环之前进行类似 (WHERE date >= $currentdate) 的查询？

```
 <?php if (is_category('My awesome category')) {
        $currentdate = date("Y-m-d",mktime(0,0,0,date("m"),date("d"),date("Y")));
        /* Some sort of query with the statement date >= $currentdate? */
    }
    ?>

    /* The Loop */
    <?php if (have_posts()) : while (have_posts()) : the_post();
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:29:56.477

```
query_posts(array('post_status' => 'future')); 
```

编辑：以上是适合您的循环的简单答案，但作为默认解决方案，您最好使用新的 $WP_Query 对象：

```
$my_query = new $WP_Query;
$my_query->query_posts(array('post_status' => 'future'));

while ($my_query->have_posts()) : 
    $my_query->the_post();
    the_title();
endwhile; 

wp_reset_postdata();  // now the main wordpress query and post data is intact 
```

第二次编辑：类似的查询，但有一个过滤器：

```
function filter_where( $where = '' ) {
    // posts in the future
    $now = date("Y-m-d H:i:s");
    $where .= " AND post_date >= '$now'";
    return $where;
}

add_filter( 'posts_where', 'filter_where' );
$q = new WP_Query(array('post_type' => 'post'));
while ($q->have_posts()) : 
    $q->the_post();
    the_title();
endwhile; 
remove_filter( 'posts_where', 'filter_where' ); 
```

# java - 如何在 Eclipse 中调试“构建期间发生错误”？

> ID：10118968
> 
> 赞同：1
> 
> 时间：2012-04-12T07:06:01.573
> 
> 标签：java, eclipse, debugging

当我得到“构建工作区遇到问题。构建过程中发生错误。” 在 Eclipse 中有没有办法调试这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T08:29:21.067

按`Ctrl`-`3`然后输入错误日志。它应该显示正在发生的事情。

编辑：如果你想调试 Eclipse 的问题，我猜你必须在调试模式下启动它。自己从未尝试过，但看到这个答案：[https ://stackoverflow.com/a/2332050/116509](https://stackoverflow.com/a/2332050/116509)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-05T07:41:31.023

尝试在project properties-> android中更改API级别，然后重启eclipse，再次将API级别更改为上一个。

这对我有用..

# java - 在 Java 中将半带和全带 CJK 拉丁字符转换为 ASCII

> ID：10118970
> 
> 赞同：1
> 
> 时间：2012-04-12T07:06:11.943
> 
> 标签：java, encoding, character-encoding

我的应用程序接受用户的输入。一些亚洲用户使用类似拉丁文的字符输入文本，但使用 Unicode 范围 U+FF01–FF5E 进行编码。当我尝试将此输入字符串与 ASCII 中的内容进行比较时，它们不相等（如预期的那样）。

这是关于字符范围的维基百科文章[http://en.wikipedia.org/wiki/Halfwidth_and_fullwidth_forms](http://en.wikipedia.org/wiki/Halfwidth_and_fullwidth_forms)

如何将该范围内的字符转换为 ASCII 等价物？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:09:48.860

如果这些是您需要转换的*唯一字符，您可以使用：*

```
String convertLatinLikeToAscii(String text) {
    char[] chars = text.toCharArray();
    for (int i = 0; i < chars.length; i++) {
        char c = chars[i];
        if (c >= 0xff01 && c <= 0xff5e) {
            // Map U+FF01 to U+0021 etc
            chars[i] = (char) (c - (0xff01 - 0x21));
        }
    }
    return new String(chars);
} 
```

# ant - 想要制作调用所有项目的 build.xml 文件的 master buil.xml 文件

> ID：10118971
> 
> 赞同：0
> 
> 时间：2012-04-12T07:06:20.340
> 
> 标签：ant, build-automation

每个子项目都包含自己的构建文件，主项目有一个能够构建所有子项目的主构建文件。

我想知道如何制作这个可以依次调用所有其他构建文件的主构建文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:41:46.113

检查`subant`任务：

[http://ant.apache.org/manual/Tasks/subant.html](http://ant.apache.org/manual/Tasks/subant.html)

# c# - C#如何使浏览器可点击

> ID：10118973
> 
> 赞同：0
> 
> 时间：2012-04-12T07:06:24.423
> 
> 标签：c#, winforms, browser

我想知道当用户双击我的网络浏览器组件时如何触发事件。既然没有这样的事件怎么可能......

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:45:06.530

听起来像是 WPF 问题 :-) 在那里，您将使用附加到浏览器的行为。如果您可以更改您的应用程序（取决于您已经完成的工作），请参阅[此链接以获取有关此方法的更多信息。](http://brianseekford.com/index.php/2010/08/31/mouse-double-click-for-wpf-in-mvvm-using-a-clean-behavior-with-command-binding/)

如果您无法应用此解决方案，只需将事件处理程序绑定到 click 事件并计算每次点击次数相对于自上次单击以来的鼠标移动并且如果两个条件都为真（在 0.2 秒内单击两次，鼠标没有例如，移动超过 2px）执行您的双击代码。您应该使用的事件是`previewMOUSEdown`or `MOUSEdown`， not `KEYdown`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-12T07:25:48.077

```
// Call this where you want to create the event (let's say on the form load for example).
webBrowser1.DoubleClick += new EventHandler(webBrowser1_DoubleClick);

// This happens when the event is fired (so when you double click on the webbrowser control).
void webBrowser1_DoubleClick(object sender, EventArgs e)
        {
            // Code
        } 
```

尝试这个。

我不知道为什么您不能通过设计器设置此事件:(，但这应该可以。

# php - 重新格式化 post 数组

> ID：10118984
> 
> 赞同：0
> 
> 时间：2012-04-12T07:06:59.420
> 
> 标签：php, mysql, arrays, multidimensional-array

我有一个如下的帖子数组：

```
[quantity] => Array
    (
        [5] => 10
        [23] => 20
    )

[price] => Array
    (
        [5] => 100.00 $
        [23] => 200.00 $
    )

[amount] => Array
    (
        [5] => 1,000.00 $  
        [23] => 4,000.00 $ 
    ) 
```

5 和 23 是产品的 ID。我需要将其转换为：

```
[5]  => Array
     (
        [quantity] => 10
        [price]    => 100.00 $
        [amount]   => 1,000.00 USD
     )
[23] = => Array
     (
        [quantity] => 20
        [price]    => 200.00 $
        [amount]   => 4,000.00 USD
     ) 
```

我怎样才能有效地实现这一点，以便他们可以为 mysql 插入做好准备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:12:29.490

遍历其中一个数组，获取 ID 并重建。

例子：

```
// YOUR DATA
$quantity = array();
$price = array();
$amount = array();

// NEW ARRAY
$array = array();

foreach ($quantity as $id => $itemQty) {
   $itemPrice = $price[$id];
   $itemAmount = $amount[$id];
   $array[$id] = array("quantity" => $itemQty, "amount" => $itemAmount, "price" => $itemPrice);
} 
```

现在您可以根据需要对 $array 中的数据进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:52:59.040

```
$quantity = array(5=>10,23=>20);
$price    = array(5=>'100.00$',23=>'200.00$');
$amount   = array(5=>'1000.00$',23=>'4000.00$');

$newData  = array_map(null, $quantity, $price,$amount);
$newKeys  = array_keys($quantity);
$data     = array_combine($newKeys,$newData);

echo('<pre>');
print_r($data); 
```

但是数组必须是有序的！</p>

# java - Java 调试 - 异常并发

> ID：10118986
> 
> 赞同：0
> 
> 时间：2012-04-12T07:07:06.923
> 
> 标签：java, debugging, exception, netbeans, concurrency

我正在使用 java 和 netbeans IDE，我正在尝试调试到输出窗口。我的日志以运行顺序打印到输出窗口，但异常除外，这些异常往往在代码运行中提前打印。这是输出的示例 -

19:45:53.266：检查我们是否超过起点 19:45:53.267：SortRequestIdList 中的错误。异常 = [Ljava.lang.Object; 不能转换为 [Ljava.lang.String; 19:45:53.266：我们已经过了起点。检查我们相对于边界的位置 19:45:53.266 ：我们低于下限。即将运行 RunnerBelow 19:45:53.267：ListLex 中的错误。异常=空19：45：53.266： *******进入RunnerBelow***********

 ***所以例外是“提前”打印。有没有一种方法可以控制这些打印的时间，以便（事件 A 在事件 B 之前运行）=>（A 的调试输出出现在事件 B 之前）？

感谢你们提供的任何帮助！

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:33:27.957

异常通常使用 System.err 打印，而正常的调试消息将写入 System.out。由于使用两个不同的流来创建输出，有时您会看到在异常之前发生的任何调试消息之前写入的异常。

如果您可以更改生成消息的代码，我建议您在 catch 块中将输出添加到 System.out。（您可以使用 System.out.println(e.getMessage())）。如果这不可能，您可以将相关的调试消息打印到 System.err。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:29:10.877

`printStackTrace`使用`System.err`，而对于您可能使用的所有其他输出`System.out`。要么`System.err.println`在您的代码中使用（简单的解决方案），要么制作一个接受异常并将其堆栈跟踪打印到的方法`System.out`（相当困难）。***

# c# - 为什么我的用户控件库不再有自己的选项卡？

> ID：10118987
> 
> 赞同：1
> 
> 时间：2012-04-12T07:07:10.497
> 
> 标签：c#, winforms, visual-studio-2010, dll, user-controls

我制作了一个包含一个控件的用户控件库，并将其添加到`winforms`项目中。它自动显示在以控件库命名的选项卡下的工具箱中。然后我在lib中添加了2个控件，并构建了它，当我打开`winforms`项目时，它并没有出现在工具箱中，我发现[这个问题](https://stackoverflow.com/questions/3628163/c-sharp-custom-control-doesnt-show-up-in-the-toolbox)并通过右键单击将其放回工具箱，然后单击“选择项目”并转到库的 bin 目录。但它只出现在所有控件选项卡中。我的问题是，为什么它停止自动执行它，为什么它不再有自己的选项卡（以前它有自己的选项卡）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T01:20:21.537

只是我在精神上经历了一些想法，希望能解决你的问题。

是的，我也有一个单独的“控件库”dll，它有子类文本框、复选框、标签等......

每个类都被声明为 PUBLIC。
每个类都作为一个零参数 constructor() 作为默认值，即使另有暗示。

也就是说，我的“解决方案”具有主要的“Windows 应用程序”项目。然后，我将其他（控制类库项目）添加到解决方案中，如果您的还没有的话。

然后，在我的主项目中，我做了一个添加参考。这会弹出要选择的位置对话框，包括 .Net、COM、项目、浏览和最近。我确保我引用了“项目”，它应该列出您的解决方案中的所有项目。我不只是选择您可能已经在其中构建项目的物理 .DLL。

然后，在菜单下，我执行“Build”/“CLEAN SOLUTION”。这会强制所有其他依赖项项目重新构建和重新加载其 DLL，然后重新构建解决方案的主项目。

这样做之后，所有控件都应该刷新到工具栏中，例如当您打开主项目窗口以添加控件时。工具栏应该根据与您的解决方案关联的项目 dll 自动加载工具栏控件...

它可能只是让你挂掉的一个缺失的步骤......

# javascript - 骨干模型上的初始化和构造函数有什么区别

> ID：10118988
> 
> 赞同：67
> 
> 时间：2012-04-12T07:07:15.567
> 
> 标签：javascript, backbone.js

骨干模型上的初始化和构造函数有什么区别。

当我扩展主干模型（ParentModel）时，我使用初始化方法来设置任何默认属性。但是每当我基于 ParentModel 创建模型时，我都会使用构造函数来运行任何初始功能。我这样做是因为它有效，但工作中有人问我为什么同时使用初始化和构造函数，除了它有效之外我没有一个好的答案。我可以花时间阅读源代码来弄清楚它，但在这里提问并得到正确答案似乎要容易得多。

```
var ParentModel = Backbone.Model.extend({
  initialize : function() {
    // code here
  },
});

var Model = ParentModel.extend({
  constructor : function (options) {
    Backbone.Model.prototype.constructor.call(this, options);
    // code here
   }, 
```

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-04-12T07:32:15.457

`constructor`在 Backbone 设置结构之前运行。`initialize`在结构的`constructor`函数内部调用。所以基本上如果你需要在 Backbone 建立结构之前增加任何东西，`constructor`如果你需要在 Backbone 建立结构之后增加任何东西 use `initialize`。

（来自[关于该主题的 Github 讨论](https://github.com/documentcloud/backbone/issues/720)）

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-04-12T11:22:41.443

`constructor`是 Backbone 用来设置自己的功能 - 创建模型、设置事件和进行各种其他设置。覆盖它时要非常小心，因为如果你通过覆盖或隐藏方法来阻止 Backbone 代码运行，你会得到难以调试的奇怪错误。

`initialize`另一方面，Backbone 在完成其内部管道后调用其对象的函数。如果您没有做任何专门干扰正常 Backbone 功能的事情，只需使用初始化。

如果您使用的是 CoffeeScript，使用`constructor`. （这是给我的）。不过，只要确保你总是打电话`super`。

# sql - oracle - to_Date 格式

> ID：10118991
> 
> 赞同：2
> 
> 时间：2012-04-12T07:07:17.017
> 
> 标签：sql, database, oracle, date

您将使用什么格式将此 CHAR 值转换为日期？

```
Apr  9 1996  2:11:00:000PM

ie. select to_date('Apr  9 1996  2:11:00:000PM','???') from dual; 
```

有没有人找到一个很好的参考，因为我看到的所有参考都希望小时前有一个 0 开头。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T07:50:13.970

这是带有日期字符串的示例。

```
select to_date(
to_char(to_timestamp('Apr 9 1996 2:11:00:000PM','MON DD YYYY hh:mi:ss:FF3PM'),'YYYY-MM-DD HH:MI:SS AM'),
'YYYY-MM-DD HH:MI:SS AM')
from dual; 
```

希望它有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T07:14:45.420

第一：TO_DATE 不支持小数秒，所以你必须玩弄 TO_TIMESTAMP

[第二：您必须使用 oracle 的格式，您可以在此处](http://infolab.stanford.edu/~ullman/fcdb/oracle/or-time.html)找到有效值表

乍一看，像这样的格式`'MON DD YYYY HH:MI:SS:FF3 AM'`应该可以工作

编辑：今天的咖啡因太少了，忘了上午 ^^ 抱歉

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T07:16:34.513

这可能有效（未经测试）：

```
'Mon  dd YYYY   HH:MI:SS   AM' 
```

# javascript - 使用jquery绘制垂直线

> ID：10118992
> 
> 赞同：3
> 
> 时间：2012-04-12T07:07:26.207
> 
> 标签：javascript, jquery, css, kendo-ui

我有以下 json，我需要创建一个网格，并且在网格上方还需要根据值显示垂直线：

```
var arr = [];

 arr= [
   {"Measure":"Air Pollution","Rank":"1","Value":"15.5"},
   {"Measure":"Water Pollution","Rank":"2","Value":"13.5"},
   {"Measure":"Soil Erosion","Rank":"3","Value":"10.5"}
 ] 
```

现在我需要创建一个网格，在网格上方，需要根据“值”创建垂直条。由于有 3 个值，因此将创建 3 个条形图。Now when 1st row in the grid is selected, the first vertical bar needs to be highlighted . 同样，当第一个竖线被选中时，网格中的第 1 行被选中。创建网格不是问题，因为我使用的是 KendoUI 网格，而是创建垂直条，而选择是我卡住的地方。有什么看法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:42:08.247

我看到您的目标是将您的数据可视化为条形图。如果是这样，请不要重新发明轮子。为此目的，有很多优秀的 JS 库。

我有很好的使用[HighCharts](http://www.highcharts.com/)的经验，试试吧。

***免责声明**：这可能是一种矫枉过正，但如果组件是通用的（为了将来与灵活数据的兼容性），它是一个合适的解决方案*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:06:53.540

基于@Bogdan M.关于使用`div`元素的建议，我设置了一个[jsFiddle 演示使用 jQuery 构建的垂直条](http://jsfiddle.net/eliranmal/Nf5VG/)。它将值的输入作为数字数组传递，并将其转换为 DOM 元素，并相应地设置它们的高度。

该演示可以很容易地更新以使用 OP 提供的数据结构，并且还可以添加选择行为功能。

这个最终版本（包含完整的解决方案，用于构建组件和为其分配选择行为）可以**[在 jsFiddle 上的完整演示中看到](http://jsfiddle.net/eliranmal/cNUxR/)**。

现在剩下的就是将选择功能的处理程序 - 作为单元格/行侦听器 - 分配给 KendoUI 网格。

# windows-installer - 卸载注册表项 (Windows Installer) 中的 DWORD 版本来自哪里？

> ID：10118993
> 
> 赞同：2
> 
> 时间：2012-04-12T07:07:28.137
> 
> 标签：windows-installer

我正在尝试为我们的应用程序编写一个自定义自动更新程序。它最初是使用 InstallShield 和 MSI 安装的。我发现用于添加/删除程序的信息位于

HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall{Guid}

如果我将 Version、VersionMajor 和 VersionMinor 更新为与新版本相同（当我运行安装程序时），则该补丁可以正常应用，否则它会在应用程序启动时进行修复。

VersionMajor 和 VersionMinor 都匹配主 Exe 的主要和次要版本。虽然版本似乎是一个随机数，并且与 Exe 版本的任何部分都不匹配。它从何而来？

例如，如果 Exe 版本是 5.12.0.2019

我可以运行此代码以获取版本信息

```
 class Program
{
    static void Main(string[] args)
    {
        FileVersionInfo vi = FileVersionInfo.GetVersionInfo(@"C:\MyApp.exe");
        Console.WriteLine("Version: {0}", vi.FileVersion);
        Console.WriteLine("Major: {0}", vi.FileMajorPart);
        Console.WriteLine("Minor: {0}", vi.FileMinorPart);
        Console.WriteLine("Build: {0}", vi.FileBuildPart);
        Console.WriteLine("Private: {0}", vi.FilePrivatePart);
        Console.WriteLine("Product Version: {0}", vi.ProductVersion);
        Console.WriteLine("Product Major: {0}", vi.ProductMajorPart);
        Console.WriteLine("Product Minor: {0}", vi.ProductMinorPart);
        Console.WriteLine("Product Build: {0}", vi.ProductBuildPart);
        Console.WriteLine("Product Private: {0}", vi.ProductPrivatePart);

        Console.Read();
    }
} 
```

输出是

```
Version: 5.12.2019
Major: 5
Minor: 12
Build: 0
Private: 2019
Product Version: 5.12.2019
Product Major: 5
Product Minor: 12
Product Build: 0
Product Private: 2019 
```

但是注册中的版本是一些 9 位数字，例如“118358017”，与任何该信息都不匹配。我期待在那里看到私人版本，但事实并非如此

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T11:42:19.547

以十六进制查看 118358017 可能会有所帮助：

```
070E0001 
```

在假设它是 MMmmBBBB 的主要/次要/构建的压缩 DWORD 后将其拆分后，这对我来说听起来像是 7.14.1。

# oracle - DBMS LOB.SUBSTR 抛出 ORA-00904：无效标识符错误

> ID：10118994
> 
> 赞同：2
> 
> 时间：2012-04-12T07:07:33.893
> 
> 标签：oracle, oracle11g, ora-00904

我们的一位客户正在 oracle sql developer 中运行脚本来升级他的数据库表结构、procudere 和触发器等。但是在运行脚本时，他正在`ORA-00904: Invalid Identifier Error for DBMS_LOB.SUBSTR()`一个`DBMS_LOB.GETLENGTH()`过程中。

有人能说出为什么会这样吗？

有使用 Oracle Sql 开发人员版本 3.1.07 Build MAIN-07.42 和 Oracle 11g。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T07:49:24.077

我想有3个可能的原因：

1.  用户在 sys.dbms_lob 上缺少执行权限（尽管默认情况下授予 PUBLIC 权限）
2.  数据库中没有 sys.dbms_lob 的同义词 dbms_lob（尽管应该存在这样的公共同义词）
3.  客户工作的模式包含一些其他同名的包 DBMS_LOB

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-26T13:04:40.150

使用 sys 运行此 sql 以检查您的架构是否具有执行 DBMS_LOB 的权限。

```
select * from dba_tab_privs where table_name='DBMS_LOB'; 
```

默认情况下，您应该在受赠者中看到 PUBLIC。

如果没有，您可以使用 sys.sql 运行 sql。

```
grant execute on sys.DBMS_LOB to public; 
```

或者

```
grant execute on sys.DBMS_LOB to <your_schema_name> 
```