# StackOverflow 问答 11756000-11756999

# sql - 删除从 CSV 到 SQL Server 的页眉和页脚导出数据

> ID：11756001
> 
> 赞同：0
> 
> 时间：2012-08-01T09:06:14.680
> 
> 标签：sql, sql-server-2008

我需要将数据从 CSV 导出到 SQL Server

我的 CSV 文件是这样的

```
Name,CustomerID
A,1 
b,2
End 
```

我只需要将数据导出到 SQL Server 表中

```
A,1
b,2 
```

我尝试使用`BULK INSERT`，但标题来了

我需要删除页眉和页脚。

唯一的选择是使用格式文件创建 bcp

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:21:27.617

您可以使用 first_row 和 last_row 选项。如果有 100 行设置 first_row=2 和 last_row=99

# html - 链接不应在 URL 中显示 # 并在其 href="#" 时向上滚动

> ID：11756004
> 
> 赞同：1
> 
> 时间：2012-08-01T09:06:34.013
> 
> 标签：html, hyperlink, tags, href

如何使链接 a href="#" 在单击时在 URL 中不显示 # 并且不向上滚动页面？

我在[http://www.offroadstudios.com/creative-agency](http://www.offroadstudios.com/creative-agency)看到过 但无法了解他们是如何做到的。左侧菜单包含一个 href="#" 但它的行为方式与我要求的方式相同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T09:13:30.523

查看该站点，他们似乎正在使用 jQuery 来更改可见内容。要防止 a`#`出现在您的浏览器栏中，您可以`preventDefault`：

```
$("a.myLinkClass").click(function(e){
   e.preventDefault();
   //do something..
}); 
```

见演示：http: [//jsfiddle.net/SJuwL/show](http://jsfiddle.net/SJuwL/show)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T09:32:09.827

在主题作者链接中，他们使用了这个：

```
jQuery(document).ready(function() {     
    jQuery('.product-selector').each(function(i, element) {
        jQuery('.product-selector.product-' + i).click(function() {
            jQuery('a#products-top').focus();
            if (producttool == false) {
              producttool = true;
            }

            // Return false so that the page doesn't switch.
            return false;
        });
    });
}); 
```

因此，您的问题的答案是`return false;`在 onclick 事件中。

在这里演示：http: [//jsfiddle.net/FSou1/K3p2W/](http://jsfiddle.net/FSou1/K3p2W/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T09:12:48.260

```
$('a[href="#"]').click(function(event){

    event.preventDefault();

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T09:13:48.660

攻击链接的点击处理程序并阻止默认操作

```
$('a').click(function(){return false}); 
```

[http://jsfiddle.net/MjyzK/show/](http://jsfiddle.net/MjyzK/show/)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-01T09:14:39.743

要链接跳转到 HTML 文件中的某个位置，可以使用命名的锚标记。

```
 <a name="here"></a>
    <a href="#here">LINK</a> <!-- jumps to the position "here" --> 
```

# python - Find on beautiful soup in loop 返回 TypeError

> ID：11756006
> 
> 赞同：3
> 
> 时间：2012-08-01T09:06:40.787
> 
> 标签：python, web-scraping, beautifulsoup, html-table, html-parsing

我正在尝试使用 Beautiful Soup 在 ajax 页面上抓取表格，并使用 TextTable 库以表格形式将其打印出来。

```
import BeautifulSoup
import urllib
import urllib2
import getpass
import cookielib
import texttable

cj = cookielib.CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
urllib2.install_opener(opener)

...

def show_queue():
    url = 'https://www.animenfo.com/radio/nowplaying.php'
    values = {'ajax' : 'true', 'mod' : 'queue'}
    data = urllib.urlencode(values)
    f = opener.open(url, data)
    soup = BeautifulSoup.BeautifulSoup(f)
    stable = soup.find('table')
    table = texttable.Texttable()
    header = stable.findAll('th')
    header_text = []
    for th in header:
        header_append = th.find(text=True)
        header.append(header_append)
    table.header(header_text)
    rows = stable.find('tr')
    for tr in rows:
        cells = []
        cols = tr.find('td')
        for td in cols:
            cells_append = td.find(text=True)
            cells.append(cells_append)
        table.add_row(cells)
    s = table.draw
    print s

... 
```

虽然我试图抓取的相关 HTML 的 URL 显示在代码中，但这里有一个示例：

```
<table cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
                        <th>Artist - Title</th>
            <th>Album</th>
            <th>Album Type</th>
            <th>Series</th>
            <th>Duration</th>
            <th>Type of Play</th>
            <th>
                <span title="...">Time to play</span>
            </th>
                    </tr>
                <tr>
                        <td class="row1">
                <a href="..." class="songinfo">Song 1</a>
            </td>
            <td class="row1">
                <a href="..." class="album_link">Album 1</a>
            </td>
            <td class="row1">...</td>
            <td class="row1">

            </td>
            <td class="row1" style="text-align: center">
                5:43
            </td>
            <td class="row1" style="padding-left: 5px; text-align: center">
                                    S.A.M.
                            </td>
            <td class="row1" style="text-align: center">
                ~0:00:00
            </td>
                    </tr>
                <tr>
                        <td class="row2">
                <a href="..." class="songinfo">Song2</a>
            </td>
            <td class="row2">
                <a href="..." class="album_link">Album 2</a>
            </td>
            <td class="row2">...</td>
            <td class="row2">

            </td>
            <td class="row2" style="text-align: center">
                6:16
            </td>
            <td class="row2" style="padding-left: 5px; text-align: center">
                                    S.A.M.
                            </td>
            <td class="row2" style="text-align: center">
                ~0:05:43
            </td>
                    </tr>
                <tr>
                        <td class="row1">
                <a href="..." class="songinfo">Song 3</a>
            </td>
            <td class="row1">
                <a href="..." class="album_link">Album 3</a>
            </td>
            <td class="row1">...</td>
            <td class="row1">

            </td>
            <td class="row1" style="text-align: center">
                4:13
            </td>
            <td class="row1" style="padding-left: 5px; text-align: center">
                                    S.A.M.
                            </td>
            <td class="row1" style="text-align: center">
                ~0:11:59
            </td>
                    </tr>
                <tr>
                        <td class="row2">
                <a href="..." class="songinfo">Song 4</a>
            </td>
            <td class="row2">
                <a href="..." class="album_link">Album 4</a>
            </td>
            <td class="row2">...</td>
            <td class="row2">

            </td>
            <td class="row2" style="text-align: center">
                5:34
            </td>
            <td class="row2" style="padding-left: 5px; text-align: center">
                                    S.A.M.
                            </td>
            <td class="row2" style="text-align: center">
                ~0:16:12
            </td>
                    </tr>
                <tr>
                        <td class="row1"><a href="..." class="songinfo">Song 5</a>

            </td>
            <td class="row1">
                <a href="..." class="album_link">Album 5</a>
            </td>
            <td class="row1">...</td>
            <td class="row1"></td>
            <td class="row1" style="text-align: center">
                4:23
            </td>
            <td class="row1" style="padding-left: 5px; text-align: center">
                                    S.A.M.
                            </td>
            <td class="row1" style="text-align: center">
                ~0:21:46
            </td>
                    </tr>
                <tr>
            <td style="height: 5px;">
        </td></tr>
        <tr>
            <td class="row2" style="font-style: italic; text-align: center;" colspan="5">There are x songs in the queue with a total length of x:y:z.</td>
        </tr>
    </tbody>
</table> 
```

每当我尝试运行此脚本函数时，它都会以`TypeError: find() takes no keyword arguments`on中止`header_append = th.find(text=True)`。我有点难过，因为似乎我正在做代码示例中显示的事情，而且它似乎应该工作，但它没有。

简而言之，我该如何修复代码以便没有 TypeError 以及我做错了什么？

编辑：我在编写脚本时提到的文章和文档：

*   [http://segfault.in/2010/07/parsing-html-table-in-python-with-beautifulsoup/](http://segfault.in/2010/07/parsing-html-table-in-python-with-beautifulsoup/)
*   [http://oneau.wordpress.com/2010/05/30/simple-formatted-tables-in-python-with-texttable/](http://oneau.wordpress.com/2010/05/30/simple-formatted-tables-in-python-with-texttable/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T19:11:57.550

您收到错误的原因`TypeError: find() takes no keyword arguments`是因为您实际上是在调用`find()`一个字符串。

### 字符串查找

[`find`](http://docs.python.org/2/library/stdtypes.html#str.find)*是一个没有关键字参数*的python字符串方法。例子：

```
>>> 'hello'.find('l')
2
>>> 'hello'.find('l', foo='bar')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: find() takes no keyword arguments 
```

### 美丽的汤发现

Beautifulsoup[`Tag`](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#tag)也有一个[`find`](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#find)方法，这是你试图使用的。

### 底线

在您的代码中的某个时刻，当您想要使用标签时，您最终调用了字符串 find。

Python 使用[鸭子类型](http://en.wikipedia.org/wiki/Duck_typing)，在这种情况下可能会导致混淆。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T10:05:27.740

## 基本问题

解析器行为正确。您只是使用相同的表达式来解析不同类型的元素。

## 修改后的代码

这是一个片段，只关注返回抓取的列表。获得列表后，您可以轻松地格式化文本表：

```
import BeautifulSoup

def get_queue(data):
    # Args:
    #   data: string, contains the html to be scraped
    soup = BeautifulSoup.BeautifulSoup(data)
    stable = soup.find('table')

    header = stable.findAll('th')
    headers = [ th.text for th in header ]

    cells = [ ]
    rows = stable.findAll('tr')
    for tr in rows[1:-2]:
        # Process the body of the table
        row = []
        td = tr.findAll('td')
        row.append( td[0].find('a').text )
        row.append( td[1].find('a').text )
        row.extend( [ td.text for td in td[2:] ] )
        cells.append( row )

    footer = rows[-1].find('td').text
    return headers, cells, footer 
```

## 输出

`headers`, `cells`, 和`footer`, 单元格现在可以输入`texttable`格式化函数：

```
import texttable
def show_table(headers, cells, footer):
    retval = ''
    table = texttable.Texttable()
    table.header(headers)
    for cell in cells:
        table.add_row(cell)
    retval = table.draw()
    return retval + '\n' + footer

print show_table(headers, cells, footer) 
```

```
+----------+----------+----------+----------+----------+----------+----------+
| Artist - |  Album   |  Album   |  Series  | Duration | Type of  | Time to  |
|  Title   |          |   Type   |          |          |   Play   |   play   |
+==========+==========+==========+==========+==========+==========+==========+
| Song 1   | Album 1  | ...      |          | 5:43     | S.A.M.   | ~0:00:00 |
+----------+----------+----------+----------+----------+----------+----------+
| Song2    | Album 2  | ...      |          | 6:16     | S.A.M.   | ~0:05:43 |
+----------+----------+----------+----------+----------+----------+----------+
| Song 3   | Album 3  | ...      |          | 4:13     | S.A.M.   | ~0:11:59 |
+----------+----------+----------+----------+----------+----------+----------+
| Song 4   | Album 4  | ...      |          | 5:34     | S.A.M.   | ~0:16:12 |
+----------+----------+----------+----------+----------+----------+----------+
| Song 5   | Album 5  | ...      |          | 4:23     | S.A.M.   | ~0:21:46 |
+----------+----------+----------+----------+----------+----------+----------+
There are x songs in the queue with a total length of x:y:z. 
```

# hibernate - grails executeQuery HQL - 找不到参数

> ID：11756015
> 
> 赞同：1
> 
> 时间：2012-08-01T09:07:15.343
> 
> 标签：hibernate, grails, hql, grails-orm

我很少在查询中使用*executeQuery*，因为有时我会收到此错误并且我不知道如何修复它，这是我的代码：

```
use(TimeCategory) {
        def referenceDate = new Date() - 101.year
        println '============================= '+referenceDate
            def cancelledSlots = RegistrantTestingCenterExamSchedule.executeQuery("""select rt.registrant.emailAddress from RegistrantTestingCenterExamSchedule as rt 
                where rt.registrant.firstName in(select i.firstName from Individual i) and rt.registrant.lastName in(select i.lastName from Individual i) and 
                rt.registrant.middleName in(select i.middleName from Individual i) and rt.registrant.birthDate in(select i.birthDate from Individual i) or 
                rt.registrant.seniorCitizen = false or rt.registrant.birthDate >=:refDate""",[refDate: referenceDate])            
} 
```

我收到此错误消息： *找不到命名参数 [refDate]* 我试图删除不需要将其与声明的参数进行比较的条件（*和 rt.registrant.birthDate>=:refdate",[refDate:refereneceDate]* ) 并且它有效。我真的不知道为什么我仍然收到此错误，似乎我正确声明了参数，并且传递的值参数是有效的，因为我可以看到它打印在我的终端上。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T07:01:06.070

[根据手册](http://grails.org/doc/latest/guide/single.html#hql)，三引号多行字符串不适用于 HQL （请参阅多行查询部分）。尝试使用行继续符：

```
executeQuery("select rt.registrant.emailAddress \
from RegistrantTestingCenterExamSchedule as rt \
.... \
or rt.registrant.birthDate >= :refDate", [refDate : referenceDate]) 
```

# python - python的ubuntu中的地理定位包

> ID：11756018
> 
> 赞同：1
> 
> 时间：2012-08-01T09:07:32.500
> 
> 标签：python, ubuntu

如何在 ubuntu for python 中安装地理定位包？

我想使用地理位置（如城市、邮政编码等）获取数据。

如何使用邮政编码获取城市，国家，请您向我推荐任何图书馆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:24:02.873

```
$ sudo apt-get install geoip-bin
$ geoiplookup 8.8.8.8
GeoIP Country Edition: US, United States 
```

如果您只需要数据库，无需工具：

```
$ sudo apt-get install geoip-database 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:14:18.737

这可能有一些用处： http: [//www.hostip.info/use.html](http://www.hostip.info/use.html) 这是一个 IP 地理定位网站，带有可以在 python 中使用的 API。虽然它可能不是很准确。

# c# - WCF 如何在 post 方法中返回字节数组并读取字节内容以打开为 pdf

> ID：11756019
> 
> 赞同：1
> 
> 时间：2012-08-01T09:07:32.980
> 
> 标签：c#, wcf

WCF 服务：

```
public byte[] GetEsignContent(string LoanID)
    {

        string strConnection;
        strConnection = ConfigurationManager.AppSettings["SqlConn"];
        WMSQLCon.DBSettings.ConnectionString = strConnection;

        byte[] bDocContent;
        IAppUsers.GetDocContent(Convert.ToInt32(LoanID), out bDocContent);
        return bDocContent;

    } 
```

客户端应用程序(aspx)

```
 int LoanID = Convert.ToInt32(Request.QueryString["LoanID"]);
            string URL = "http://PS30/IAPPService/IApp.svc/IApp/GetEsignDocument/" + LoanID.ToString(); ;
            HttpWebRequest hwrProg = (HttpWebRequest)WebRequest.Create(URL);
            HttpWebResponse hwrpProg = (HttpWebResponse)hwrProg.GetResponse();
            StreamReader sr = new StreamReader(hwrpProg.GetResponseStream(), Encoding.ASCII);
           // string str = sr.ReadToEnd();
           // byte[] bcontent = Convert.FromBase64String(sr.ReadToEnd());
           //byte[] bcontent = Encoding.ASCII.GetBytes(sr.ReadToEnd());  
            Response.ContentType = "Application/pdf";
            Page.Response.AddHeader("Content-Disposition", "inline;filename=xxx.pdf");
            Response.AddHeader("content-length", bcontent.Length.ToString());
            Response.BinaryWrite(bcontent);
            Response.Flush();
            Response.Close();
            sr.Close(); 
```

我无法获得在客户端应用程序的 bcontent 中提供服务的确切二进制文件..请帮助我...

# python - celeryd 进程的数量是否取决于 --concurrency 设置？

> ID：11756020
> 
> 赞同：6
> 
> 时间：2012-08-01T09:07:35.813
> 
> 标签：python, concurrency, celery, celeryd

我们在 Supervisor 后面运行 Celery 并以

```
celeryd --events --loglevel=INFO --concurrency=2 
```

然而，这会创建一个最多三层深度并包含最多 7 个 celeryd 进程的进程图（Supervisor 产生一个 celeryd，它产生几个其他的 celeryd，它再次产生进程）。我们的机器有两个 CPU 内核。

所有这些流程都在处理任务吗？也许其中一些只是工作人员池？--concurrency 设置如何与实际产生的进程数相关联？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T09:50:38.360

`--concurrency`如果是 2，你不应该有 7 个进程。

实际启动的进程是：

*   主要消费流程

    将工作委托给工作人员池

*   工作池（这是`--concurrency`决定的数量）

所以这是 3 个进程，有 2 个并发。

此外，如果启用了 force_execv，则会启动一个用于清理信号量的非常轻量级的进程（默认情况下，我使用的是 redis 或 rabbitmq 以外的其他传输）。

请注意，在某些情况下，进程列表还包括线程。如果使用 rabbitmq/redis 以外的传输，worker 可能会启动多个线程，包括一个始终启动的 Mediator 线程，除非`CELERY_DISABLE_RATE_LIMITS`启用。

# web-services - 以编程方式在 Jetty 上部署 Axis2 Web 服务

> ID：11756022
> 
> 赞同：1
> 
> 时间：2012-08-01T09:07:37.250
> 
> 标签：web-services, jetty, axis2

我在 Eclipse 中创建了一个简单的 Axis2 Java WebService。我正在尝试在码头（嵌入式码头）中以编程方式部署相同的

```
WebAppContext webAppContext = new WebAppContext();
webAppContext.setDescriptor(webAppContext + "/WEB-INF/web.xml");
webAppContext.setResourceBase(".");
webAppContext.setContextPath("/"); 
```

当我从浏览器访问服务器时，我只看到我项目的目录结构（目录：/），它显示我项目中的所有文件夹作为链接......

当我单击 webcontent 文件夹时，它显示默认的 html 页面，我创建了 index.html

但我无法从中获取 webservice wsdl 路径。

# iphone - iPhone中的图像尺寸不正确

> ID：11756026
> 
> 赞同：0
> 
> 时间：2012-08-01T09:07:46.400
> 
> 标签：iphone, objective-c, ios, uiimage, size

我需要使用和`image height`。`width`我的. 但是当我发现使用的大小时`800*800``image``ios simulator``image`

```
image.size.width and image.size.height 
```

它给了我`315*120`这是不正确的，为什么会这样？

```
- (void)elcImagePickerController:(ELCImagePickerController *)picker didFinishPickingMediaWithInfo:(NSArray *)info 
{
    NSLog(@"%@",info);

    int temp = [[DataManager sharedObj] imageCount];

    for(NSDictionary *dict in info) 
    {
        [[DataManager sharedObj]  setImageCount:temp+1];

        NSMutableDictionary* dataDic = [[NSMutableDictionary alloc] init];

        UIImage* img = [dict objectForKey:UIImagePickerControllerOriginalImage];

        NSLog(@"%.2f",img.size.width);
        NSLog(@"%.2f",img.size.height);
     }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:14:13.923

试着打电话`image.frame = cgrectmake(x, y, 800, 800)`。

如果你有一个`UIImageView *image`而不是`UIImage *image`，你可能会得到视图的框架而不是图像。

* * *

**已解决：**
更改`fullScreenImage`为`fullResolutionImage`您的`ELCImagePickerController.m`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:15:57.823

您可以使用此获取图像大小

```
UIImage *imageS = [dict objectForKey:UIImagePickerControllerOriginalImage];

NSLog(@"width = %.2f, height = %.2f", imageS.size.width, imageS.size.height);
NSLog(@"Image Size = %@",NSStringFromCGSize(imageS.size)); 
```

两条线都可以。

它会正确打印。请再次检查您的模拟器图像。如果您通过谷歌添加它，我可能会保存图像缩略图而不是原始图像，这就是您错误大小的原因。否则获取图像大小的方法是正确的。

# c# - 不是每个请求都调用 HttpModule

> ID：11756038
> 
> 赞同：3
> 
> 时间：2012-08-01T09:08:15.950
> 
> 标签：c#, asp.net, .net, httpmodule

我在我们的服务器上安装了一个 HTTP 模块。奇怪的是它可以工作，但每隔一段时间它就不会被执行。我有日志记录，在它不起作用的时候它没有到达记录的代码。我在 IIS 日志或事件查看器中也看不到任何内容。

```
 namespace RedirectModule
    {
        public class RedirectModule : System.Web.IHttpModule
        {
            private const string MobileUserAgent = "MobileUserAgentCacheKey";

            private const string 

STRING_TO_FIND = "info/lps";
        private const string STRING_TO_ADD = "/mobile";

        public void Dispose()
        {
            //clean-up code here.
        }

        public void Init(HttpApplication context)
        {          
            context.BeginRequest += context_BeginRequest;
        }
        private static object sync = new object();
        private void context_BeginRequest(object sender, EventArgs e)
        {

            try
            {

                HttpContext context = HttpContext.Current;

                string url = context.Request.Url.ToString().ToLower();

                if (!url.Contains(STRING_TO_FIND) || url.Contains(STRING_TO_FIND + STRING_TO_ADD))
                    return;
                Logger.Current.Log("Starting Redirect Phase");

                if (XmlToValues.IsMobile(context.Request.ServerVariables["HTTP_USER_AGENT"],
                                       GetCachedFile(context, "Settings.xml")))
                {
                    var mobileRedirect = GetRedirectUrl(url, STRING_TO_FIND, STRING_TO_ADD);
                    if (mobileRedirect != null)
                    {
                        Logger.Current.Log("Redirect to Mobile page");
                        context.Response.Redirect(mobileRedirect);

                    }
                }
                Logger.Current.Log("Web Page");
                Logger.Current.Log("End Begin Request");
            }
            catch (Exception ex)
            {
                if (ex is ThreadAbortException)
                    return;

                Logger.Current.LogError(ex);

            }
        }

        public static string GetRedirectUrl(string url, string strToFind, string strToAdd)
        {
            try
            {
                Logger.Current.Log("Get Redirect Url ");
                int idx = url.IndexOf(strToFind) + strToFind.Length;
                return url.Substring(0, idx) + strToAdd + url.Substring(idx);
            }
            catch (Exception ex)
            {

                Logger.Current.LogError(ex);

                return null;
            }
        }

        private XmlNodeList GetCachedFile(HttpContext context, string filePath)
        {
            try
            {
                Logger.Current.Log("GetCachedFile START");
                if (context.Cache[MobileUserAgent] == null)
                {
                    context.Cache[MobileUserAgent] = XmlToValues.GetMobileUserAgents(filePath);
                    Logger.Current.Log("Add Mobile File to Cache");
                }
                return (XmlNodeList)context.Cache[MobileUserAgent];
            }
            catch (Exception ex)
            {
                Logger.Current.LogError(ex);

                return null;
            }
        }

    }
} 
```

和我的 Web.Config：

```
<?xml version="1.0" encoding="UTF-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>

  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
      <remove name="RedirectModule" />
      <add name="RedirectModule" type="RedirectModule.RedirectModule, RedirectModule" />

    </modules>
    <handlers>
      <remove name="Redirect" />
    </handlers>
    <validation validateIntegratedModeConfiguration="false"/>
  </system.webServer>
  <system.web>
    <httpModules>
      <add name="RedirectModule" type="RedirectModule.RedirectModule, RedirectModule" />
    </httpModules>
    <compilation debug="true">    
    </compilation>
  </system.web>
</configuration> 
```

ps 我在web.config中取出了log4net，因为它很麻烦。

这是该项目的链接：[http ://www.sendspace.com/file/w42me5](http://www.sendspace.com/file/w42me5)

这是被请求页面的标记，它在一个名为 index.htmnl 的文件中：

```
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
<!-- no cache headers -->
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="no-cache">
<meta http-equiv="Expires" content="-1">
<meta http-equiv="Cache-Control" content="no-cache">
<!-- end no cache headers -->
</head>
<body>
MOBILE
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T07:22:40.453

听起来您可能在浏览器和服务器之间的某个地方遇到了缓存。缓存有很多潜在的位置，这里有一些尝试找到它的一般步骤：

*   **浏览器**- 浏览器不必请求它缓存的内容。 [此问题](https://stackoverflow.com/questions/1192458/how-to-check-whether-the-images-are-from-cache)列出了适用于不同浏览器的工具，以确认正在发送哪些请求。
*   **客户端计算机**- 如果从浏览器发送请求，您可能有一个代理（如[Squid](http://www.squid-cache.org/)）返回缓存数据。您可以使用[Fiddler](http://www.fiddler2.com)检查 HTTP 请求是否离开客户端计算机。
*   **网络代理**- 与客户端计算机的想法相同，只是代理位于网络上某处的服务器上。您必须分析代理服务器上的传出 HTTP 流量以确定是否正在发送请求。
*   **Web 服务器**- 您的重定向模块可以提供缓存的内容，而不是呈现新内容。在这种情况下，它应该显示在您的日志中。在 BeginRequest 处理程序的最开始添加一个日志调用，以确认请求是否真正到达您的服务器。

为了防止缓存，您可以在请求中添加无缓存标头（[此处](http://ray.jez.net/prevent-client-side-caching-with-httpmodules/)的文章）：

```
 private void Application_EndRequest(Object source, EventArgs e) 
        {
            HttpApplication application = (HttpApplication)source;
            HttpContext context = application.Context;
            context.Response.ExpiresAbsolute = DateTime.Now.AddDays( -100 );
            context.Response.AddHeader( “pragma”, “no-cache” );
            context.Response.AddHeader( “cache-control”, “private” );
            context.Response.CacheControl = “no-cache”;
        } 
```

*编辑*

# 调试什么请求到达服务器

响应中的 HTTP 200 表明您很可能没有缓存问题。要确认每个请求确实到达服务器，请尝试将日志添加到 Application_BeginRequest 处理程序（在 Global.asax 中）以记录每个请求并将其与 HttpModule 中的 context_BeginRequest 生成的日志进行比较。

```
//In Global.asax
private void Application_BeginRequest(Object source, EventArgs e) {
    Logger.Current.Log("Request made to Application_BeginRequest")
}

//In your HttpModule
    private void context_BeginRequest(object sender, EventArgs e)
    {
        //Log before any of your other code
        Logger.Current.Log("Request made to context_BeginRequest")

        try
        {
              // your code
        }
        catch (Exception ex)
        {
            // log the exception first in case this is the problem
            Logger.Current.LogError(ex);

            if (ex is ThreadAbortException)
                return;

        }
    } 
```

# 解释结果

在没有到达您的模块的请求后检查您的日志。

*   如果它什么也没显示，则该请求永远不会到达您的服务器。见上文关于缓存
*   如果您的日志以*Request made to Application_BeginRequest*结束，则您的模块没有被调用。
*   如果它以*Request made to context_BeginRequest*结束，那么在您的记录器之前的模块代码中存在错误，这会导致某些请求崩溃。这可能是一个空引用 HttpContext.Current，或 Request，或溢出问题，或任何其他事情。这应该由您的 finally 语句记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:45:17.530

我有一个类似的问题...尝试在您的网络浏览器中关闭缓存，然后重试。为了关闭此请求的缓存，您需要修改响应标头。[修改缓存选项的示例](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.cache%28v=vs.71%29.aspx)

# android - 显示带有头像的 FB 好友

> ID：11756039
> 
> 赞同：-3
> 
> 时间：2012-08-01T09:08:16.557
> 
> 标签：android, facebook, list, listview, android-listview

我正在制作一个 android 应用程序，作为其中的一部分，我需要将我所有的 FB 朋友与他们的个人资料图片放在一个列表中。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:44:34.573

这是一个关于如何做到这一点的很棒的教程：[教程](https://parse.com/questions/how-can-i-find-parse-users-that-are-facebook-friends-with-the-current-user) 你必须将[parse](http://www.parse.com)集成到你的应用程序中。获得所有朋友 fbId 的列表后，您可以像这样简单地获取他们的个人资料图片：

```
public static final String TYPE_SMALL = "small";
    public static final String TYPE_MEDIUM = "normal";
    public static final String TYPE_LARGE = "large";

public static Bitmap getProfilePicture(String id, String type) {
        URL img_value = null;
        Bitmap profilePicture = null;
        try {
            img_value = new URL("http://graph.facebook.com/"+id+"/picture?type=" + type);
            profilePicture = BitmapFactory.decodeStream(img_value.openConnection().getInputStream());

        } 
        catch (MalformedURLException e) {
            e.printStackTrace();
            Log.d("SpaceDroid", "MalformedURLException");

        } 
        catch (IOException e) {
            e.printStackTrace();
            Log.d("SpaceDroid", "IOException");

        }

        return profilePicture;

    } 
```

我希望这能让你开始！

# java - 具有自定义字体和本地图像的 Webview

> ID：11756041
> 
> 赞同：0
> 
> 时间：2012-08-01T09:08:18.143
> 
> 标签：java, android, fonts, webview

我想使用自定义字体显示带有本地图像和文本的 web 视图。两者都可以单独使用 using `mywebview.loadDataWithBaseURL()`。因为我的本地图像在不同文件夹中的 sdcard 和我的自定义字体位于应用程序的资产/字体文件夹中，所以我无法`loadDataWithBaseURL`根据我的理解实现解决方案。

有没有人有提示或解决方案？

问候麦克弗利

非常感谢他暗示内容提供者。我想这将是我的解决方案。但这对我不起作用。我基于一个 android 论坛的例子实现了 contentprovider。webview 只显示我的文本，但没有图片。我在内容提供程序的所有方法中都设置了调试断点，但应用程序没有通过该代码。我为这个问题添加了我的代码，也许有人确实看到了这个问题？

**内容提供者类**

```
class LocalFileContentProvider extends ContentProvider {
private static final String URI_PREFIX = "content://myapp.pictures";

public static String constructUri(String url) {
    Uri uri = Uri.parse(url);
    return uri.isAbsolute() ? url : URI_PREFIX + url;
}

@Override
public ParcelFileDescriptor openFile(Uri uri, String mode) throws FileNotFoundException {

    File file = new File(getContext().getFilesDir() + uri.getPath());      
    ParcelFileDescriptor parcel = ParcelFileDescriptor.open(file, ParcelFileDescriptor.MODE_READ_ONLY);
    return parcel;
}

@Override
public boolean onCreate() {
    return true;
}

@Override
public int delete(Uri uri, String s, String[] as) {
    throw new UnsupportedOperationException("Not supported by this provider");
}

@Override
public String getType(Uri uri) {
    throw new UnsupportedOperationException("Not supported by this provider");
}

@Override
public Uri insert(Uri uri, ContentValues contentvalues) {
    throw new UnsupportedOperationException("Not supported by this provider");
}

@Override
public Cursor query(Uri uri, String[] as, String s, String[] as1, String s1) {
    throw new UnsupportedOperationException("Not supported by this provider");
}

@Override
public int update(Uri uri, ContentValues contentvalues, String s, String[] as) {
    throw new UnsupportedOperationException("Not supported by this provider");
} 
```

}

**安卓清单**

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

**我的 HTML**

```
<img width="120" height="120"  src="content://myapp.pictures/images/example/example1.jpg"  style="float:right;clear:right;margin:0 5px 0 0;"> 
```

# ios - 是否可以将交互式元素加载到 iOS 应用程序中？

> ID：11756044
> 
> 赞同：0
> 
> 时间：2012-08-01T09:08:27.527
> 
> 标签：ios, iphone, ipad

有谁知道如何打包一个可以由 iOS 应用程序动态加载的外部交互式幻灯片？有可能吗？

例如，想象一下在 iPad 上有一个演示应用程序。网络上有一组交互式幻灯片，假设它们包含可拖动的元素。

我可以将这些幻灯片对象之一加载到应用程序中并与之交互吗？如果是这样，幻灯片对象是什么格式？

谢谢，

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:07:03.930

从技术上讲，可以在应用程序中动态加载捆绑包（[NSBundle ）组件。](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/LoadingCode/Concepts/CFNSBundle.html)这些包甚至可以包含可执行代码，尽管出于安全原因，AppStore 指南禁止以这种方式使用动态加载的 NSBundle。

此外，您可以只使用 UIWebView 在网页上显示一些“幻灯片”，尽管很难让应用程序的行为与本机幻灯片一样 - 甚至可能是不可能的（由于网页渲染的工作方式比较例如，本地控件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T11:27:14.000

好的，假设您以某种方式在 Web 服务器上拥有这些“外部交互式幻灯片”。由于您不是说它们属于某种类型（如 powerpoint 等），我只是假设这些幻灯片是一些罕见的格式，任何现有应用程序或 Safari 浏览器可能都不支持。

那么你的问题的答案是：编写你自己的 iOS 应用程序，它可以阅读、呈现和编辑这些幻灯片。它们是什么格式？好吧，没关系。编写一个应用程序，可以从数据中下载幻灯片数据并进行解析，并呈现在手机上。

然后让用户与之交互，也许让应用程序将更改上传到服务器。

你可以在你的应用程序中做任何你喜欢的事情，没有限制。你只需要为它编写代码。如果有某种标准化格式，假设您希望您的应用程序显示 powerpoint 演示文稿，那么您将有 3 个选择。使用其他人的应用程序，或使用解析器为 powerpoint 文件编写自己的应用程序，或使用其他人编写的代码制作自己的应用程序（您在应用程序中包含的第三方库）

在您的具体情况下，我不知道是否有任何第三方库可以与您的幻灯片进行交互，但我猜您需要自己完成大部分工作。您可以先查看与在线幻灯片交互的 Web 服务如何工作，以及是否可以通过自己制作的 iOS 应用程序与它们交互。

没有什么可以阻止您创建应用程序、将幻灯片数据读入应用程序、以您喜欢的任何方式呈现、让用户更改它、将其保存在您的应用程序中或将更改上传到服务器。这完全取决于你 =)

祝你好运！

# c# - 要编写哪个代码块以及在哪里到达和分配？

> ID：11756046
> 
> 赞同：-1
> 
> 时间：2012-08-01T09:08:31.873
> 
> 标签：c#

要编写哪个代码块以及在哪里到达和分配？大家好，对于这个基本问题很抱歉，但如果你能在下面解释一些问题，我会很高兴。谢谢。

```
 namespace forms
 {
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
           // in thic code block what kind of things can i write or im allowed to write?   Q1
        }

        Form2 frm2 = new Form2();  // why should i write this line (since i already added form2 to my project as seen in the picture) ![enter image description here][1]to see frm2.Show(); in button1_Click part?   Q2
        //what happens in the background (from the compiler point of view) when i do Form2 frm2 = new Form2();?   Q3

        frm2.Show(); // why cant i reach frm2 in here? i just declared above.  Q4
        //just like that
        int number1; // i declare number variable in here
        number1= 5; // and why cant i assign number in here?

        // what kind of things can i write or allowed to write in this block ?   Q5
        // i sometimes confuse where i need to start writing the code or where i need to write or in which block ?

        public int number2;

        // ok now lets say i put a button on the form and when i double click it generated the code down below 
        //and now lets look in that code block

        private void button1_Click(object sender, EventArgs e)
        {    
           // ok now we are in this block and now it see when i write 
           frm2.Show();
            //or 
            //it see when i write 
           number1 = 5;   
           //ok now lets look at number1 and number2 what changes when i write public int and just int without public?  Q6
        } 
    }
} 
```

![在此处输入图像描述](../Images/898bc6c2f9218d75611b475a6d8a4f0d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:18:31.680

首先，您的代码不应在线编译：

```
frm2.Show(); 
```

和

```
number1= 5; 
```

这些行应该是方法的一部分。

现在回答你的问题。

Q1。那是`Form1`类的构造函数块。您可以在第一次执行`Form1`.

Q2。你的线

```
Form2 frm2 = new Form2(); 
```

正在为 创建一个实例`Form2`，尽管您将文件添加到项目中，但要使用`Form2`您必须先创建它的实例。

Q3。上面的行是创建一个实例`Form2`，调用构造函数`Form2`并将实例分配`Form2`给它的引用`frm2`

Q4。你做不到`frm2.Show();`，只能在类级别进行字段定义和初始化。这条线应该是某种方法的一部分。

Q5。与 Q4 相同的答案

编辑：Q6。如果您`public`使用 int 指定，则该字段将可在类外部访问，如果您未指定任何内容，则[`internal`](http://msdn.microsoft.com/en-us/library/7c5ka91b%28v=vs.80%29.aspx)默认情况下是该字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T09:39:13.873

我建议您获得一本好的 C# 电子书，例如[Visual C# Programming - How to Program](https://rads.stackoverflow.com/amzn/click/com/0132151421)。

您提出的问题包含在 C# 中的[构造函数](http://en.wikibooks.org/wiki/C_Sharp_Programming/Objects#Constructors)、[对象](http://en.wikibooks.org/wiki/C_Sharp_Programming/Objects)、[变量](http://en.wikibooks.org/wiki/C_Sharp_Programming/Variables)、[类可访问性之下。](http://en.wikibooks.org/wiki/C_Sharp_Programming/Classes)此外，还有大量[免费的在线 c# 书籍](http://www.e-booksdirectory.com/listing.php?category=12)。

# javascript - 单击可拖放区域

> ID：11756050
> 
> 赞同：0
> 
> 时间：2012-08-01T09:08:58.790
> 
> 标签：javascript, jquery, jquery-ui, drag-and-drop

我正在创建的游戏中有一个拖放事件。我不想将元素拖动到放置区域，而是希望能够单击可拖动的然后放置区域并为其移动设置动画。可以这样做，以便用户不必物理拖动它吗？

如果是这样，我会从这里去哪里......

```
$('.drag').draggable({

helper: 'clone',
snap: '.drop',
grid: [60, 60],
revert: 'invalid',
snapMode: 'corner'
});

$('.drop').droppable({
drop: function(event, ui) {
    word = $(this).data('word');

    guesses[word].push($(ui.draggable).attr('data-letter'));
    console.log($(event));
    console.log($(ui.draggable).text());

    console.log('CHECKING : ' + $(this).text() + ' against ' +                  $(ui.draggable).text().trim());

    if ($(this).text() == $(ui.draggable).text().trim()) {

        $(this).addClass('wordglow3');
    } else {
        $(this).addClass('wordglow');
    }
    console.log('CHECKING : ' + $(this).text() + ' against ' + $(ui.draggable).text().trim());

    console.log(guesses);

    if (guesses[word].length == 3) {
        if (guesses[word].join('') == word) {
            $('td[data-word=' + word + ']').addClass('wordglow2');

        } else {
            $('td[data-word=' + word + ']').addClass("wordglow4");
            guesses[word].splice(0, guesses[word].length);
        }
    }

}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:47:24.207

**尝试这个...**

```
$('.drag').on('click', function(e) {
e.preventDefault();

var target = $('.drop-box.spellword:not(.occupied):first');
var targetPos = target.position();
var currentPos = $(this).offset();
var b = $(this);

if (target.length) {
    target.addClass("occupied");
    $(".minibutton").prop("disabled", true);
    b.clone().addClass(
    b.data("letter") == target.data("letter") ? "wordglow3" : "wordglow").appendTo("table").css({
        background: "transparent",
        position: "absolute",
        top: currentPos.top,
        left: currentPos.left
    }).animate({
        top: targetPos.top,
        left: targetPos.left
    }, "slow", function() {
        $(this).css({
            top: 0,
            left: 0
        }).appendTo(target);

       }); 

    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:18:27.957

[http://jqueryui.com/demos/droppable/#revert](http://jqueryui.com/demos/droppable/#revert)看看这个反向动画在放置在错误的位置时如何？当被拖动对象的状态为真且要拖动到的位置为真时，使用其动画动作并触发从一个位置到另一个位置的移动。

使用标志来检查它们是否被点击。希望你能弄清楚其余的。

# java - JSP下拉不提交对象

> ID：11756051
> 
> 赞同：2
> 
> 时间：2012-08-01T09:09:15.790
> 
> 标签：java, spring, jsp

我有一个表格，其中填充了数据库中的数据。在开始描述我的问题之前，一些片段：

一类：

```
// @Entity for areas
public class Area {
@Id
@Column(name = "area")
private String area;

@Column(name = "deleted")
private boolean deleted;

getter/setter
} 
```

二等舱

```
// @Entity for employees
public class Employee {
@Id
@GeneratedValue
@Column(name = "ID")
private long id;

@ManyToOne
@JoinColumn(name = "area")
private Area area;

@Column(name = "name")
private String name;

getter/setter 
```

调用EmployeeController中的方法向jsp返回数据

```
protected String createDialog( @PathVariable("id") Long id, Model model ){
    Employee employee = id == 0 ? new Employee() : employeeService.findById(id);
    //return employee
    model.addAttribute("employeeModel", employee );
 //add data needed to create dropdown holding areas
    //areaService.findAll returns a List<Area>
    model.addAttribute("areas", areaService.findAll( 
                new Sort( 
                    Sort.Direction.ASC,
                    "area"
                    )
                ));
    return "employees/dialogUpdateEdit";
} 
```

jsp，显示区域的下拉列表，如果没有返回新员工，则显示已知数据

```
<form:form action="employees/ajax" commandName="employeeModel" method="POST" id="createForm">
    <table class="fullWidth">
        <tr>
            <td>Area</td>
            <td>
                <form:select path="area" items="${areas}" class="fullWidth">
                </form:select>
            </td>
        </tr>
        <tr>
            <td>Employee Name</td>
            <td><form:input path="name" class="fullWidth"/></td>
        </tr>
        <tr>
            <td colspan="2">
                <input type="submit" value="Save Changes" id="btnSaveEmployee" class="fullWidth" />
            </td>
        </tr>
    </table>

    <!-- adding hidden field to hold id on update -->
<form:hidden path="id" />   

</form:form> 
```

控制器方法进行验证并返回一些错误或不

```
@RequestMapping(value = "/ajax", method = RequestMethod.POST)
protected @ResponseBody ValidationResponse createOrUpdate(
        @Validated @ModelAttribute("employeeModel") Employee employee,
        BindingResult bindingResult) {

    if (!bindingResult.hasErrors()) {
        employeeService.createOrUpdate(employee);
    }

    return validate(employee, null, bindingResult);
} 
```

对于问题：这一切都很好，下拉列表被填充，数据被填充到输入中。但是当我点击提交时，我收到以下错误：

> java.lang.IllegalStateException：无法将类型 [java.lang.String] 的值转换为属性“区域”所需的类型 [com.whatever.Area]：找不到匹配的编辑器或转换策略

据我了解，表单只是提交“区域”的纯字符串，而不是绑定列表中的对象。

如何让表单提交对象而不是字符串？我的装订有问题吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:53:24.650

回答我自己的问题，并希望那个人在不知不觉中帮助我的人获得很多学分；）

我必须添加一个自定义活页夹......以前从未听说过，所以我先问了很长一段路。

这个链接有我发现的关于这个主题的最好和最短的教程，因为我知道我在找什么： [http ://empire5.com/development/binding-a-custom-object-in-spring-3/](http://empire5.com/development/binding-a-custom-object-in-spring-3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:03:57.747

我认为选择你可以试试这种类型的代码

```
<select name="area" id="area" >      
  <option value="${areas}">${areas}</option>
</select> 
```

# c# - 从 Web 方法中查找应用程序路径

> ID：11756052
> 
> 赞同：4
> 
> 时间：2012-08-01T09:09:18.037
> 
> 标签：c#, asp.net, .net, webmethod

我在 ASP.NET 页面中实现了一个 web 方法来执行异步调用。现在我需要知道我的 Web 应用程序的物理应用程序路径。

我通常使用`Request.PhysicalApplicationPath`，但是如何从 Web 方法中获取相同的信息？

**注意**web 方法中没有`Request`或`Server`属性可用...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T09:31:21.263

我一直用：

```
var rootPath = HostingEnvironment.ApplicationPhysicalPath; 
```

你还需要`using System.Web.Hosting;`在你的类指令头中添加

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:12:32.847

你试过使用`Server.MapPath("/")`吗？

编辑：

或者也许`System.Web.Hosting.HostingEnvironment.MapPath()`？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-14T10:53:22.157

```
AppDomain.CurrentDomain.BaseDirectory 
```

# c# - 在 C# 中将日期时间转换为特定格式

> ID：11756056
> 
> 赞同：3
> 
> 时间：2012-08-01T09:09:35.903
> 
> 标签：c#, .net, datetime, datetime-format

我想将日期时间转换为指定格式

```
Wed Aug 01 2012 14:37:50 GMT+0530 (India Standard Time) 
```

实际上我想在网页上使用 Jquery 显示计时器。所以我尝试了一些我知道的格式。并从[http://www.dotnetperls.com/datetime-format](http://www.dotnetperls.com/datetime-format)中找到了一些但它们都没有返回我需要的结果。实际上我必须从服务器打发时间所以我尝试了以下代码。 **代码背后**

```
protected void Button3_Click(object sender, EventArgs e)
{
    //string hello = DateTime.UtcNow.ToString();
    string hello = String.Format("{0:F}", DateTime.UtcNow);

    DateTime.UtcNow.ToString("");
    ScriptManager.RegisterStartupScript(this, this.GetType(), "hdrEmpty1", "show(" + hello + ")", true);
} 
```

**jQuery**

```
function show(datetime) {
        alert(datetime);
        var Digital = datetime  //new Date()
        var hours = Digital.getHours()
        var minutes = Digital.getMinutes()
        var seconds = Digital.getSeconds()
        var dn = "AM"
        if (hours > 12) {
            dn = "PM"
            hours = hours - 12
        }
        if (hours == 0)
            hours = 12
        if (minutes <= 9)
            minutes = "0" + minutes
        if (seconds <= 9)
            seconds = "0" + seconds
        document.getElementById('<%= Label1.ClientID %>').innerHTML = hours + ":" + minutes + ":" + seconds + " " + dn
        setTimeout("show()", 1000)
    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-01T09:11:56.837

你可以用它`date.ToString("format")`来做到这一点。Microsoft 提供了有关如何按照您想要的方式格式化日期的[完整参考。](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

**编辑：**

可能没有与您的格式完全匹配的格式，但您可以根据上述参考中提供的格式说明符组合您自己的格式。

```
// This will output something like Wed Aug 01 2012
date.ToString("ddd MMM dd yyyy"); 
```

我相信您可以按照相同的模式自己完成其余的工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T09:12:06.357

您可以使用`String.Format()`并指定自己的自定义格式 - `ddd mmm dd yyyy`. 亲自尝试以探索更多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-04T12:49:36.190

试试这个在c#中将日期时间转换为印度日期格式

```
IFormatProvider culture = new System.Globalization.CultureInfo("hi-IN", true);
        DateTime dt2 = DateTime.Parse(txtStatus.Text, culture, System.Globalization.DateTimeStyles.AssumeLocal); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T09:58:45.597

已经提供的信息没有理由让您自己解决这个问题，但要获得一个字符串读数：

```
"Wed Aug 01 2012 14:37:50 GMT+0530 (India Standard Time)" 
```

然后，您想要以正确的形式（“Wed Aug 01 2012 14:37:50”位）获取日期和时间，并在末尾添加“GMT+0530（印度标准时间）”。当然，假设那个位总是相同的。

所以你需要的代码是：

```
string string_name = (date.ToString("ddd MMM dd yyyy HH:mm:ss") + "GMT+0530 \(India Standard Time\)");
//string_name will be in the form "Wed Aug 01 2012 14:37:50 GMT+0530 (India Standard Time)" 
```

但是，正如我所说，这是您应该能够使用提供的参考资料自己解决的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T10:20:56.393

如果您不想硬编码 GMT 偏移量并且不能依赖当地时间是印度标准时间，您可以从以下位置获取此信息`TimeZoneInfo`：

```
// get UTC from local time
var today = DateTime.Now.ToUniversalTime();
// get IST from UTC
var ist = TimeZoneInfo.ConvertTimeBySystemTimeZoneId(today, "UTC", "India Standard Time");
// find the IST TimeZone
var tzi = TimeZoneInfo.FindSystemTimeZoneById("India Standard Time");
// get the UTC offset TimeSpan
var offset = tzi.GetUtcOffset(today);
// determine the TimeSpan sign
var sign = offset.Ticks < 0 ? "-" : "+";
// use a custom format string
var formatted = string.Format(CultureInfo.InvariantCulture, "{0:ddd MMM HH:mm:ss} GMT{1}{2:hhmm}", today, sign, offset); 
```

# biztalk - BizTalk SourceFileName 脱水

> ID：11756061
> 
> 赞同：0
> 
> 时间：2012-08-01T09:10:21.063
> 
> 标签：biztalk

我正在尝试使用自定义文件名，因为我需要创建两个文件（一个备份文件）所以我按照以下教程在[此处创建文件名](http://www.codeproject.com/Articles/13449/Using-the-SourceFileName-Macro-to-Create-a-Custom)

现在，当我用`DELCUS%MessageID%.txt`一切正常进行测试时，但是当我将其更改为`DELCUS%SourceFileName%.txt`界面时，它会永久脱水。

我为文件名做的唯一事情就是这个

> fileName = "ContExt" + System.DateTime.Now.ToString(); Message_send_Belspeed_BeautDay_ContExt(FILE.ReceivedFileName) = fileName;

为什么使用 SourceFileName 会导致脱水？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T11:16:15.077

发现问题。

过了一会儿，界面确实崩溃了，文件名看起来像

DELCUS2012 10:50:40.txt

在文件名中有 : 不好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T15:35:11.147

这只是一个标准的 Windows 文件命名限制，你不能使用这些字符“\ / : * ?” < > | 来命名你的文件。所以很明显你的实例会被卡住！

# asp.net-mvc-3 - 在 mvc3 razor 中执行页面时如何隐藏 webgrid？

> ID：11756068
> 
> 赞同：0
> 
> 时间：2012-08-01T09:10:43.987
> 
> 标签：asp.net-mvc-3, webgrid

当我在视图中删除 webgrid 和 layout=null 时，它的执行和客户端验证消息正在显示...但是当我使用 layout=nlll 和 Webgrid 执行页面时，它显示以下错误“必须先绑定数据源可以执行此操作”

控制器 ：

```
[AcceptVerbs(HttpVerbs.Get)]
        public ActionResult Display()
        {
              return View();
        }

[AcceptVerbs(HttpVerbs.Post)]
        public ActionResult Display(string brandname)
        {

            ShoppingClass s = new ShoppingClass();

           var ob= s.Searching(brandname);

            return View(ob);

        } 
```

看法 ：

```
@model List<ShoppingCart.Models.ShoppingClass>
@{
    ViewBag.Title = "Display";
      Layout = null;
}

 @{
     var grid = new WebGrid(source: Model, defaultSort: "Drug_Code", rowsPerPage: 20);
}

<script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script>

        @using (Html.BeginForm(null, null, FormMethod.Post))
        {
            for (int i = 0; i < 1; i++)
            {
      @*
            <table><tr><td> @Html.Label("BrandName")</td>
            <td>@Html.TextBox("BrandName")<div>@Html.ValidationMessage("BrandName")</div></td>
            <td><input type="submit" value="Search" name="Search" /></td></tr></table>*@

            <table><tr><td> @Html.LabelFor(o => o[i].BrandName)</td>
            <td>@Html.TextBoxFor(o => o[i].BrandName)<div>@Html.ValidationMessageFor(o => o[i].BrandName)</div></td>
            <td><input type="submit" value="Search" name="Search" /></td></tr></table>

            }

        }

    <div id="grid">
    @grid.GetHtml(tableStyle: "listing-border", headerStyle: "gridhead", footerStyle: "paging", rowStyle: "td-dark", alternatingRowStyle: "td-light",
       columns: grid.Columns(
                   grid.Column("GenericName", format: @<text>@item.GenericName</text>),
                   grid.Column("BrandName", format: @<text>@item.BrandName</text>),
                   grid.Column("Purchaseqty", format: @<text>@item.Purchaseqty</text>),
                   grid.Column("Purchaseprice", format: @<text>@item.Purchaseprice</text>),
                   grid.Column("Drug_Code", format: @<text>@item.Drug_Code</text>),
                   grid.Column(header: "", format: (item) => Ajax.ActionLink("Add to Cart", "ADDTOCART",
                   new { brandname = @item.BrandName, purchaseqty = @item.Purchaseqty, drugcode = @item.Drug_Code }, new AjaxOptions { HttpMethod = "Post", OnSuccess = "ADDTOCART" }))

                                                                                                )
                                                                                                )
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T09:22:39.133

如果您想在模型为空时隐藏网格，那么您可以在其中放置一个 if 语句来检查模型是否为空......即。

```
if (model != null)
{
    // Make and populate grid here
} 
```

# c# - 任何 (.NET) Redis SessionStore 库？

> ID：11756070
> 
> 赞同：2
> 
> 时间：2012-08-01T09:10:55.913
> 
> 标签：c#, web-services, redis

我正在尝试为即将到来的 WebAPI 项目搜索一个使用 Redis 作为 SessionStore 的好的库。搜索后，我看到这个[github repo](https://github.com/angieslist/AL-Redis)就是这样做的。还有其他类似的库吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:55:21.383

这是一个基于 ServiceStack.Redis 客户端的客户端，可通过 NuGet 获得：

[https://github.com/TheCloudlessSky/Harbour.RedisSessionStateStore](https://github.com/TheCloudlessSky/Harbour.RedisSessionStateStore)

[http://nuget.org/packages/Harbour.RedisSessionStateStore](http://nuget.org/packages/Harbour.RedisSessionStateStore)

# c# - HTTPWebRequest 登录。登录后导航

> ID：11756075
> 
> 赞同：0
> 
> 时间：2012-08-01T09:11:06.930
> 
> 标签：c#, redirect, cookies, httpwebrequest, local

1.  登录并创建新的（cookie）会话（systempage.local/login.php）
2.  如果登录成功，导航到页面并执行某些操作（导航到 systempage.local/index.php）

我正在尝试为本地网络中的站点编写应用程序。
login.php 通常会重定向到 index.php。（在浏览器中）
我已经准备好我的 webrequest 以登录它。（到目前为止有效）

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using System.Net;
using System.IO;

namespace WindowsFormsApplication1
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    string sThepage;
    CookieContainer logincookie;

    private void button1_Click(object sender, EventArgs e)
    {
        string strPostData = "user_name=" + txtUser.Text + "&password=" + txtPass.Text + "&language=en&action%3Asubmit=Submit";
        CookieContainer tempCookies = new CookieContainer();

        ASCIIEncoding encoding = new ASCIIEncoding();
        byte[] data = encoding.GetBytes(strPostData);

        HttpWebRequest postReq = (HttpWebRequest)WebRequest.Create("system.local/Login.php");
        postReq.Method = "POST";
        postReq.KeepAlive = true;
        postReq.AllowAutoRedirect = false;
        postReq.Accept = "Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";

        postReq.ContentType = "application/x-www-form-urlencoded";
        postReq.Referer = "system.local/interface/Login.php";
        postReq.UserAgent = "User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1";
        postReq.ContentLength = data.Length;

        Stream postreqStream = postReq.GetRequestStream();
        postreqStream.Write(data, 0, data.Length);
        postreqStream.Close();

        HttpWebResponse postResponse;
        postResponse = (HttpWebResponse)postReq.GetResponse();
        tempCookies.Add(postResponse.Cookies);
        logincookie = tempCookies;

        StreamReader postRegReader = new StreamReader(postResponse.GetResponseStream());
        sThepage = postRegReader.ReadToEnd();

        // Blanksite if login success.
        if (!sThepage.Contains("!doctype"))
        {
            MessageBox.Show("you logged in");
            Navigate(); //Navigate to the index.php
        }
        else
        {
            MessageBox.Show("Client was unable to connect!");    

        }

        richTextBox1.Text = sThepage;
    }
}   
} 
```

..

现在我需要一种导航到索引页（以及其他一些页面）的方法

```
 private void Navigate()
 {
    // What to do here?
    // and how to keep my cookie(sesion) for the next page?
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:38:32.437

您需要做的是在登录请求完成后，将您发送到变量/文件的 cookie 记录下来，并在每个后续请求中再次发送回相同的 cookie。您可以从标头对象中获取 cookie。

# asp.net - 上传大型视频时抛出“system.outofmemoryexception”

> ID：11756076
> 
> 赞同：-2
> 
> 时间：2012-08-01T09:11:09.537
> 
> 标签：asp.net

我正在尝试使用上传处理程序上传视频，但在上传大型视频文件时`system.outofmemoryexception`抛出。我的代码在下面

```
using System.Collections.Generic;
using System;
using System.Drawing;
using System.Web;
using System.IO;
using SageFrame.Web;
using System.Web.SessionState;
using System.Web.Configuration;

public class UploadHandler : IHttpHandler, IRequiresSessionState
{
    public void ProcessRequest(HttpContext context)
    {
        HttpRuntimeSection configSection = new HttpRuntimeSection();
        context.Response.Write(configSection.MaxRequestLength);  
        HttpRequest Request = HttpContext.Current.Request;
        HttpFileCollection myfile = Request.Files;  ////Here i get error     
    }
} 
```

我正在使用`VS2010`谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:46:59.307

正如建议的那样，您可能需要更改 HttpRuntime maxRequestLength 属性以允许您的大文件大小。指定的大小以千字节为单位，下面的示例将其设置为 100MB：

```
<httpRuntime maxRequestLength="102400"/> 
```

# javascript - HTML5 History API - 操作不安全

> ID：11756078
> 
> 赞同：0
> 
> 时间：2012-08-01T09:11:24.387
> 
> 标签：javascript, html

[我从http://www.murraypicton.com/playground/animating-the-address-bar.html](http://www.murraypicton.com/playground/animating-the-address-bar.html)保存了这个简单的 HTML5 History API 演示页面

并在本地打开它。Firefox 给我“操作不安全”，当我点击“开始”时，Chrome 什么也没给我。为什么以及如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T02:33:56.867

当我使用服务器时，它可以工作。使用 wamp。因此意味着无法在没有 oa 服务器的情况下运行。想知道有没有人知道为什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T06:28:17.427

您必须在 Web Server 中部署并打开它。如果您直接从目录打开它到网络浏览器，您可能会收到此错误。

# html - 使用绝对位置在 FireFox 中 100% TextArea

> ID：11756087
> 
> 赞同：5
> 
> 时间：2012-08-01T09:11:57.893
> 
> 标签：html, textarea, css-position

我试图让我`textarea`填满所有可用空间，我用过：

我不能使用 100% `width`&`height`因为我到处都有边距和填充，我必须在相对位置 parent + `top`、`right`、`bottom`&中使用绝对位置`left`- 这在 FF 中不起作用。关于如何解决它的任何想法？

更新 1 - 当我用它替换我`textarea`时 `DIV`它开始工作。

更新 2 - 实际标记：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body>
    <div style="position: relative; margin: 25px; width: 200px; height: 200px; background-color: Gray;">
        <textarea style="top: 0px; right: 0px; bottom: 0px; left: 0px; position: absolute;">A</textarea>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T13:51:24.570

Snook 先生在去年 3 月失败了，但他提出了一种解决方法：

> [将 textarea 包裹在另一个元素中](http://snook.ca/archives/html_and_css/absolute-position-textarea)

这对您有任何帮助吗？

# python - 在 django sweetpie 中使用 OneToOneField 创建对象

> ID：11756088
> 
> 赞同：5
> 
> 时间：2012-08-01T09:12:04.433
> 
> 标签：python, django, tastypie

我有两个模型： Project 和 Album 。它们通过 oneToOneField 相互关联。

专辑/models.py：

```
class Album(models.Model):
    title = models.CharField(_('title'), max_length=128)
    slug = models.SlugField(_('slug'), unique=True, default='main-gallery') 
```

项目/模型.py

```
class Project(models.Model):
    title = models.CharField(_('title'), max_length=300)
    slug = models.SlugField(_('slug'), unique=True)

    main_gallery = models.OneToOneField(Album, verbose_name=_('related main album'), related_name='project', unique=True)

@receiver(pre_save, sender=Project)
def create_project(sender, instance=None, **kwargs):
    if instance is None:
    try:
        str(instance.main_gallery)
    except Album.DoesNotExist:
        main_gallery = Album.objects.create(title=''.join((instance.title, ' - ', 'main gallery'))) 
```

如果创建了一个项目，也会为其创建一个专辑。这工作正常。但是当我尝试使用 django sweetpie 在我的 api 中创建一个时，它不会起作用：

```
class AlbumResource(ModelResource):
    class Meta:
        queryset = Album.objects.all()
        resource_name = 'album'
        #fields = ['title','slug',]

    def dehydrate_resource_uri(self, bundle):
        return bundle.data['slug']

class ProjectResource(ModelResource):
    main_gallery = fields.OneToOneField(AlbumResource, 'main_gallery', related_name='project', full=False)
    class Meta:
        queryset = Project.objects.all()
        resource_name = 'project'
        fields = ['slug', 'title', 'main_gallery']

        authorization= Authorization()

        allowed_methods = ['get', 'post', 'put']

def obj_create(self, bundle, request=None, **kwargs):
    logger.debug("obj_create Bundle %s" % bundle)
    return super(ProjectResource, self).obj_create(bundle, request, created_by=request.user) 
```

虽然 API 端点上的“GET”`Project`有效，但当我尝试`Project`通过“POST”创建新的时，我收到以下错误：

```
 Traceback (most recent call last):
  File "/Users/PATHvenv/lib/python2.7/site-packages/django/core/handlers/base.py", line 111, in get_response
    response = callback(request, *callback_args, **callback_kwargs)
  File "/Users/PATHvenv/lib/python2.7/site-packages/django/views/decorators/csrf.py", line 77, in wrapped_view
    return view_func(*args, **kwargs)
  File "/Users/PATHvenv/lib/python2.7/site-packages/tastypie/resources.py", line 192, in wrapper
    response = callback(request, *args, **kwargs)
  File "/Users/PATHvenv/lib/python2.7/site-packages/tastypie/resources.py", line 397, in dispatch_list
    return self.dispatch('list', request, **kwargs)
  File "/Users/PATHvenv/lib/python2.7/site-packages/tastypie/resources.py", line 427, in dispatch
    response = method(request, **kwargs)
  File "/Users/PATHvenv/lib/python2.7/site-packages/tastypie/resources.py", line 1165, in post_list
    updated_bundle = self.obj_create(bundle, request=request, **self.remove_api_resource_names(kwargs))
  File "/Users/PATH/path/path/apps/api/resources.py", line 70, in obj_create
    return super(ProjectResource, self).obj_create(bundle, request, created_by=request.user)
  File "/Users/PATHvenv/lib/python2.7/site-packages/tastypie/resources.py", line 1774, in obj_create
    bundle = self.full_hydrate(bundle)
  File "/Users/PATHvenv/lib/python2.7/site-packages/tastypie/resources.py", line 698, in full_hydrate
    value = field_object.hydrate(bundle)
  File "/Users/PATHvenv/lib/python2.7/site-packages/tastypie/fields.py", line 636, in hydrate
    value = super(ToOneField, self).hydrate(bundle)
  File "/Users/PATHvenv/lib/python2.7/site-packages/tastypie/fields.py", line 154, in hydrate
    elif self.attribute and getattr(bundle.obj, self.attribute, None):
  File "/Users/PATHvenv/lib/python2.7/site-packages/django/db/models/fields/related.py", line 343, in __get__
    raise self.field.rel.to.DoesNotExist
DoesNotExist 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T03:03:18.020

原因是 Tastypie 在到达您的`pre_save`接收器之前失败了。根据您粘贴的回溯，它在`full_hydrate`. 这样做的原因是默认情况下`main_gallery`是必需的而不是给出的（因为您假设它将被创建）。

尝试添加`blank=True, null=True`到

```
main_gallery = fields.OneToOneField(AlbumResource, 'main_gallery', related_name='project', full=False) 
```

# jquery - 使用 Jquery追加

> ID：11756090
> 
> 赞同：0
> 
> 时间：2012-08-01T09:12:06.570
> 
> 标签：jquery

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:18:51.200

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:21:10.117

看起来你拼错了手风琴：

将其更改为：

```
$('.accordian h2, .accordian h3').each(function () { 
            $(this).html(function() { 
            var headertext = '<a href="#">' + $(this).html() + '</a>'; 
            return headertext; 
        }); 
    }); 
```

在这里查看 js fiddle [http://jsfiddle.net/HukJE/4](http://jsfiddle.net/HukJE/4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T09:23:05.127

**编辑**：对不起，是 wrapInner() 而不是 wrap()。

三件事：

1）您不需要.each（），只需：

```
$('.accordion h2, .accordion h3').wrapInner('<a href="#"></a>'); 
```

2）您的html中有错字：

```
<div class="accordian">  <-- accordion? 
```

3) “h2 a”点击事件中缺少“parent()”：

```
$(".accordion h2 a").click(function() { 
        $(this).next(".levelOne").slideToggle("slow"); <-- actual

$(".accordion h2 a").click(function() { 
        $(this).parent().next(".levelOne").slideToggle("slow"); <-- with parent() 
```

然后它将起作用:)

jsFiddle：http: [//jsfiddle.net/fy2uM/2](http://jsfiddle.net/fy2uM/2)

# regex - R：创建一个没有特定字符串的文件列表

> ID：11756095
> 
> 赞同：1
> 
> 时间：2012-08-01T09:12:14.697
> 
> 标签：regex, r

我正在尝试从包含具有以下模式的文件的目录中创建文件列表：

```
Name_Surname_12345_noe_xy.xls  
Name_Surname_12345_xy.xls 
```

xy 可以是一个或两个字符。

现在我想要一个文件名中不包含“noe”的所有文件的列表。我只能读取“noe” - 使用的文件

```
fl = list.files(pattern = "noe.+xls$", recursive=T, full.names=T) 
```

但找不到排除它们的方法。有什么建议么？

非常感谢
马库斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T09:25:23.297

Get all the files and then use `grep` to find the `noe` ones and subset them out:

```
> all
[1] "Name_Surname_123425_xy.xls"    "Name_Surname_1234445_xy.xls"  
[3] "Name_Surname_12345_noe_xy.xls" "Name_Surname_12345_xy.xls"    
[5] "Name_Surname_13245_noe_xy.xls"
> all[grep("noe_xy.xls",all,invert=TRUE)]
[1] "Name_Surname_123425_xy.xls"  "Name_Surname_1234445_xy.xls"
[3] "Name_Surname_12345_xy.xls" 
```

always make sure you check the edge cases where all or none of the files match:

```
> all[grep("xls",all,invert=TRUE)]
character(0)
> all[grep("fnord",all,invert=TRUE)]
[1] "Name_Surname_123425_xy.xls"    "Name_Surname_1234445_xy.xls"  
[3] "Name_Surname_12345_noe_xy.xls" "Name_Surname_12345_xy.xls"    
[5] "Name_Surname_13245_noe_xy.xls" 
```

Using grep with a negative index works except in these edge cases:

```
> all
[1] "Name_Surname_123425_xy.xls"    "Name_Surname_1234445_xy.xls"  
[3] "Name_Surname_12345_noe_xy.xls" "Name_Surname_12345_xy.xls"    
[5] "Name_Surname_13245_noe_xy.xls"
> all[-grep("noe_xy.xls",all)] # strip out the noe_xy.xls files

[1] "Name_Surname_123425_xy.xls"  "Name_Surname_1234445_xy.xls"
[3] "Name_Surname_12345_xy.xls"  

 # works. Now strip out any xls files (should leave nothing)

> all[-grep("xls",all)]
character(0)

# yup, that works too. Now strip out 'fnord' files, shouldn't remove anything:

> all[-grep("fnord",all)]
character(0) 
```

Epic fail! Reason is left as an exercise to the reader.

# javascript - JavaScript / HTML 命令行小部件

> ID：11756096
> 
> 赞同：3
> 
> 时间：2012-08-01T09:12:16.153
> 
> 标签：javascript, command-line, widget

我正在用 JavaScript 制作基于文本的游戏，并且正在寻找具有以下功能的命令行小部件：

*   print - 能够发送同步命令将一些文本（最好支持任意 HTML）放入命令行。
*   commands - 能够指定用户可以输入的命令，然后这些命令将执行功能（应该支持此类命令的参数，并且最好还具有自动完成功能）。
*   prompt - 能够请求输入（并将该输入发送到回调）。这应该排队打印，并禁用命令。
*   用户不应该能够编辑输出文本（但应该能够复制和粘贴）。
*   最好使用语义元素。
*   浏览器支持：最新的 Firefox 和 Chrome，最好还有 IE9，最新的 Safari 和 Opera。

有谁知道任何这样的预先存在的小部件，如果不知道，任何人都可以给我提示如何制作一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:28:57.613

做这个并不像你想象的那么棘手。我最近为一个项目制作了一个，使用 HTML 元素和 jQuery JS。

我为输入行使用了一个输入元素 - 处理特殊的按键，如 enter 和 tab。对于以前的命令和响应，我使用了一个可滚动区域，当新的输入或响应可用时，我将新元素附加到该区域。

我在 DIV 中显示了命令和响应，它允许复制和粘贴（以及 HTML 格式）。我什至将响应设置为可公开的，因此我最初只显示命令，您可以单击“展开”按钮来显示其余部分。

最后一切都运作良好。只是一些简单的 HTML 元素和一些 jQuery 代码，它们并不像我在启动它时想象的那么复杂。到目前为止，最复杂和最多的代码是在调整美学！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:33:18.880

看[这里](http://bellard.org/jslinux/index.html)，这是一个用 Javascript 编码并运行 Linux 的“虚拟盒子”，终端可能是你可以看看的东西。据我看，桌子已经完成了。

问候...

# android - 在sqlite中将字符串转换为日期的Sqlite查询？

> ID：11756098
> 
> 赞同：0
> 
> 时间：2012-08-01T09:12:27.230
> 
> 标签：android, sqlite

我在 yyyy-mm-dd 格式的表中有字符串格式的日期。我想将该字符串转换为日期格式，以便进一步比较日期。

任何帮助都会很棒..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:15:32.940

我建议您使用[SQLite - DateTime](http://www.sqlite.org/lang_datefunc.html)函数来比较字段数据值。或者，您可以使用`java.text.SimpleDateFormat`类的`parse`方法将字符串日期转换为日期类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:07:28.033

我得到了这个查询。SqlLite 直接比较两个字符串日期之间的差异。

```
select column from Table where columnDate between '2012-07-01' and '2012-07-07' 
```

但是谢谢你们的兴趣。

# windows-8 - 如何将 MouseMoved 事件传递给 WebView 内容？

> ID：11756100
> 
> 赞同：2
> 
> 时间：2012-08-01T09:12:29.737
> 
> 标签：windows-8, winrt-xaml

我们在 WinRT XAML 应用程序中使用 webview 控件。我们面临的问题是使用触摸时没有将MouseMove事件传递给html，而使用鼠标时通常会传递。

使用 touch 时，在 touch-move-release 期间传递的事件是：

*   鼠标按下
*   鼠标向上

使用鼠标时，它们是：

*   鼠标按下
*   鼠标移动
*   鼠标向上

有没有办法解决这个问题？

# android - java.lang.IllegalStateException：键 f1 的片段不再存在：索引 3

> ID：11756102
> 
> 赞同：61
> 
> 时间：2012-08-01T09:12:32.847
> 
> 标签：android, android-fragments

我想了解此异常以实施适当的修复。

有一个 ViewPager，它使用 FragmentStatePagerAdapter 通过 getItem 和`MyFragmentClass.newInstance(...)`.

适配器的 getItem 如下所示：

```
@Override
public Fragment getItem(int position) {
    Fragment fragment = null;

    switch(position) {
        case 0:
            fragment = MyFragment2.newInstance(par1);
            break;
        case 1:
            fragment = MyFragment2.newInstance(par2, par3);
            break;
    }
    return fragment;
} 
```

问题：

当活动被销毁并再次创建时，适配器再次被实例化，片段再次使用`MyFragmentClass.newInstance(...)`...创建，但随后在这一行：

`pager.setAdapter(adapter);`

我得到了提到的例外。

我查看了引发异常的源代码，是这样的：

```
@Override
public Fragment getFragment(Bundle bundle, String key) {
    int index = bundle.getInt(key, -1);
    if (index == -1) {
        return null;
    }
    if (index >= mActive.size()) {
        throw new IllegalStateException("Fragement no longer exists for key "
                + key + ": index " + index);
    }
    Fragment f = mActive.get(index);
    if (f == null) {
        throw new IllegalStateException("Fragement no longer exists for key "
                + key + ": index " + index);
    }
    return f;
} 
```

因此，在那里传递了一个包，其中包含一些引用我的旧片段的状态，但这与当前状态 ( ) 不对应`mActive`，并且引发了异常。

我不明白这背后的想法是什么，或者我应该以哪种方式实例化片段。

我尝试了一个从另一个上下文中得到的技巧：

`pager.setOffscreenPageLimit(1);`

为了避免片段在屏幕外时被破坏（在2页视图页面的情况下，虽然不知道它是否适用于状态适配器）。但似乎没有关系，至少，它没有帮助，仍然得到同样的异常。

捕获异常会导致页面为空白。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2015-01-22T14:39:09.823

这可以帮助 -

```
@Override
public Parcelable saveState() {
    return null;
} 
```

将上面的行添加到`FragmentStatePagerAdapter`.

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-09-04T20:07:41.103

如果您不希望碎片在屏幕外时被回收，您应该使用`FragmentPagerAdapter`而不是`FragmentStatePagerAdapter`.

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2018-12-19T10:14:57.883

**问题详情**

默认情况下，FragmentStatePagerAdapter 将保存和恢复 ViewPager 的状态。在恢复时，如果片段实例由于某种原因被杀死，那么 FragmentManger 将抛出此异常。

**解决方案：**

要解决这个问题，需要重写我们的 FragmentStatePagerAdapter 中的 restoreState 方法并放入 try catch 块。它将防止崩溃，并且它将在正常情况下保留 viewpager 的片段状态。

```
@Override
public void restoreState(Parcelable state, ClassLoader loader) {
    try {
        super.restoreState(state, loader);
    } catch (Exception e) {
        Log.e("TAG", "Error Restore State of Fragment : " + e.getMessage(), e);
    }
} 
```

**注意：**我们可以使用 FragmentPagerAdapter 或 Override [saveState](https://stackoverflow.com/a/28091395/2336184) () 并返回 null 也可以解决此问题，但 viewpager 在正常情况下不会保留其状态。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2020-01-18T19:27:08.643

如果您使用的是 ViewPager2 则在 ViewPager2 对象上使用此方法

```
viewPager2.setSaveEnabled(false); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-03-19T18:02:45.093

我整天都在努力解决这个问题，但现在我找到了解决方案。

```
private ViewPager _mViewPager;
_mViewPager.setOffscreenPageLimit(5);
//5 is how much page you have. 
```

`setOffscreenPageLimit`设置应保留到处于空闲状态的视图层次结构中当前页面的任一侧的页面数。超出此限制的页面将在需要时从适配器重新创建。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-10-28T18:41:10.683

使用活动生命周期而不是片段。

```
public class MyAdapter extends FragmentStateAdapter {

    public MyAdapter (@NonNull Fragment fragment) {
        super(fragment.getFragmentManager(), fragment.getActivity().getLifecycle());
    }
} 
```

或者正如其他人提到的那样禁用`ViewPager2`保存状态。

*   在布局中：`android:saveEnabled="false"`
*   在代码中：
    *   `viewPager.setSaveEnabled(false);`
    *   `viewPager.setSaveFromParentEnabled(false);`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-05-04T02:47:04.990

很好 ！`pager.setAdapter(adapter);`由于调用时重复`restoreState`导致异常：

```
Fragment no longer exists for key f0: index 0 
```

我们可以释放 Fragment RootView

```
 public void onDestroyView() {
    super.onDestroyView();
    if (isRecyclerRootViewAlways()) {
        mRootView = null;//<--
    }
    mMyFragmentLifecycle.onFragmentDestroyView(this);
} 
```

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2018-01-20T06:45:25.133

利用

> 获取片段管理器（）

在片段适配器而不是子片段管理器中

```
PagerAdapter adapter = new PagerAdapter(getFragmentManager()); 
```

我希望这有帮助。

# r - R - 如果条件的子集数据

> ID：11756104
> 
> 赞同：1
> 
> 时间：2012-08-01T09:12:44.843
> 
> 标签：r, statistics

如何使用逻辑条件对数据进行子集化。

假设我有如下数据。我想用第一个条件对数据集进行子集化，即所有动物都有 FCR 记录，然后我想将所有动物与这些动物放在新的数据集中。

```
animal  Feed    Litter  Pen 
1   0.2 5   3
2   NA  5   3
3   0.2 5   3
4   0.2 6   4
5   0.3 5   4
6   0.3 4   4
7   0.3 5   3
8   0.3 5   3
9   NA  5   5
10  NA  3   5
11  NA  3   3
12  NA  3   5
13  0.4 7   3
14  0.4 7   3
15  NA  7   5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:18:24.583

我假设“FCR 记录”（在您的问题中）与“Feed”有关。然后，如果我正确理解了这个问题，您可以这样做：

```
split(df[complete.cases(df),], df[complete.cases(df), 4])
# $`3`
#    animal Feed Litter Pen
# 1       1  0.2      5   3
# 3       3  0.2      5   3
# 7       7  0.3      5   3
# 8       8  0.3      5   3
# 13     13  0.4      7   3
# 14     14  0.4      7   3
# 
# $`4`
#   animal Feed Litter Pen
# 4      4  0.2      6   4
# 5      5  0.3      5   4
# 6      6  0.3      4   4 
```

在上面，`complete.cases`删除任何不完整的观察。如果您需要匹配特定变量的参数，您可以使用类似的东西`df[!is.na(df$Feed), ]`来代替`complete.cases`. 然后，`split`创建一个`data.frames`拆分列表`Pen`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:19:07.260

```
# all animals with Feed data
df[!is.na(df$Feed), ]
# all animals from pens with at least one animal with feed data in the pen
df[ave(!is.na(df$Feed), df$Pen, FUN = any), ] 
```

# c# - bing route服务中的Fault exception1错误

> ID：11756105
> 
> 赞同：2
> 
> 时间：2012-08-01T09:12:46.293
> 
> 标签：c#, silverlight, windows-phone-7, silverlight-4.0

我正在使用 bing 网络服务来查找两个地方之间的最短路线。

但我得到了这个奇怪的错误：

```
 public imagine_cup.RoutingService.RouteResponse EndCalculateRoute(System.IAsyncResult result) {

                object[] _args = new object[0];

                imagine_cup.RoutingService.RouteResponse _result = ((imagine_cup.RoutingService.RouteResponse)(base.EndInvoke("CalculateRoute", _args, result))); //error in this line

                return _result;

            } 
```

该错误表明它是服务器错误。

这是我的代码：

```
 public void CalculateRoute(List<Pushpin> wayPoints)
        {

            // Set the credentials.
            routeService.RouteRequest routeRequest = new routeService.RouteRequest();
            routeRequest.Credentials = new Credentials();
            routeRequest.Credentials.ApplicationId = _applicationId;

            // Return the route points so the route can be drawn.
            routeRequest.Options = new routeService.RouteOptions();
            routeRequest.Options.RoutePathType = routeService.RoutePathType.Points;

            // Set the waypoints of the route to be calculated using the Geocode Service results stored in the geocodeResults variable.
            routeRequest.Waypoints = new System.Collections.ObjectModel.ObservableCollection<routeService.Waypoint>();
            //Adding way points
            foreach (Pushpin ps in wayPoints)
            {
                routeRequest.Waypoints.Add(PushpinToWaypoint(ps));
            }

            // Make the CalculateRoute asnychronous request.
            _routeService.CalculateRouteAsync(routeRequest);
        } 
```

我已经更新了我的 bing maps 密钥，所以原因不是旧密钥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:14:06.977

好的，既然我们已经在评论中确定问题出在起点和终点之间的距离上，这就是我的答案。

你不能路由很远的距离（甚至在[Bing 地图](http://www.bing.com/maps)上也不能（他们显然使用相同的路由服务））......服务就是这样创建的。如果你真的非常需要这个，你可以考虑一些算法，将距离分成更小的块。然后你会在较小的块之间找到多条路线，然后将它们连接起来（在地图上将它们连接起来）......

这里明显的问题是：如何找到能够将路径分成块的中间点？好吧，一种相当简单的方法是找到点之间的空气距离（参见[Haversine 公式](http://en.wikipedia.org/wiki/Haversine_formula)），然后将其分成相等的部分。显然，这意味着您将影响最终路线，并且几乎肯定不会是起点和终点之间的最短路线。此外，它可能会将您的用户引导到甚至没有道路的奇怪地方（森林、沙漠、海洋）。小题外话：我不知道为什么有人会同时在两个遥远的国家/地方之间行驶，只是为了找出行车距离，他们可以在网上的某个地方做......

# awk - 如何在awk中用4个零填充十六进制数？

> ID：11756109
> 
> 赞同：2
> 
> 时间：2012-08-01T09:12:51.000
> 
> 标签：awk

输入

```
 63 0063 
    63 0384 
    0 0065 
    65 0065 
    6A 0065 
```

输出

```
 0063 0063 
    0063 0384 
    0000 0065 
    0065 0065 
    006A 0065 
```

使用 awk '{printf "%04s %04s\n",$1,$2}' 输出空格而不是零

```
 63 0063 
  63 0384 
   0 0065 
  65 0065 
  6A 0065 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T09:22:47.773

您可以将十六进制转换为数字，然后再次将其打印为十六进制：

```
awk '{printf "%04x", strtonum("0x"$1)}' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:17:44.263

你有一个额外`%s`的 awk 的 printf。你可以使用这个命令：

```
awk '{printf "%06s %06s\n", $1, $2}' file.txt 
```

获得 6 的宽度，其中空格之前将用零填充。

**要在纯 bash 中做同样的事情，请使用以下代码：**

```
while read a1 a2
do
   printf "%06s %06s\n" $a1 $a2
done < file.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T11:14:13.867

尽管语法会有所不同，但使用子字符串技术将在各种语言中提供一致的结果。在 AWK 中：

```
awk 'function pad(string) {return substr("0000" string, length(string) + 1)} {print pad($1), pad($2)}' 
```

您可以将长度作为参数传递的一种方法：

```
awk 'function pad(string, len,      z) {z = "000000000000"; return substr(substr(z, length(z) - len) string, length(string) + 1)} {print pad($1, 4), pad($2, 4)}' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-08T15:11:00.073

有同样的问题。为什么不使用 sed 将空格转换为 0？

我认为这可以工作：

```
echo 63 | awk '{ printf "%4s\n", $0 }' | sed 's/ /0/g' 0063
echo DF | awk '{ printf "%4s\n", $0 }' | sed 's/ /0/g' 00DF 
```

# python - Django：为多个数据库站点编写测试

> ID：11756115
> 
> 赞同：0
> 
> 时间：2012-08-01T09:13:02.930
> 
> 标签：python, django

我有 2 个站点：A 和 B。A 依赖于 B 中的一些表，因此它的设置中有一个`DATABASES`指向 B 的条目以及其设置下的一些条目，以`DATABASE_ROUTERS`将某些模型访问路由到 B 的数据库。

现在我正在尝试在 A 上编写一个测试，但只是`manage.py test`立即运行失败，因为 A 的某些模型依赖于来自 B 的表所涵盖的某些模型，而 B 的完整数据库表尚未创建。

所以我的问题是，我如何调整我`TEST_RUNNER`的第一次`syncdb`在 B 上针对 B 的测试数据库运行，然后当我`manage.py test`在 A 上运行时，它可以从 B 中找到它所依赖的表？

我希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:25:58.467

我终于让测试运行了，这就是我所做的：

*   `DATABASE_ROUTERS`运行测试时禁用设置
*   在设置中维护B别名`DATABASES`但名称与A相同
*   `INSTALLED_APPS`将不存在的B 附加到 A`INSTALLED_APPS`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:23:00.570

如果您的测试不能选择将所有数据放在一个数据库中（例如，为测试设置不同的路由器设置），您应该考虑创建自己的[`TEST_RUNNER`](https://docs.djangoproject.com/en/dev/ref/settings/#test-runner). 也许[这](http://googletorp.com/blog/how-run-sql-django-test-database-syncdb)将为您指明正确的方向！

# c# - 如何构造顺序 ID 逻辑

> ID：11756117
> 
> 赞同：0
> 
> 时间：2012-08-01T09:13:10.860
> 
> 标签：c#, sequential

当出现“插入”表单时，我得到了一个 textbox1.text="J001" 。“插入”中有一个按钮，所以如果我们单击该按钮，mbox 会说“已添加 J001”。

但是，我想更改 textbox.text = "J002"; 所以我正在使用。

`string splitter=textbox1.text.toString().subString(1)`

它将返回 001。现在我必须使它成为 002？不过我不能对此 +1，此外，我没有使用任何数据库，因此当我们关闭表单并重新打开它们时，它将再次变为“J001”。单击按钮，文本变为“J002”。关闭表单，重新打开，它显示“J001”和无限循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:16:30.300

很难理解你想要什么，但也许这就是你想要的：

```
string splitter = textbox1.Text.ToString().Substring(1);

try {
    int number = Convert.ToInt32(splitter) + 1;
} catch (FormatException e) {
    // Not a number...
}

textbox1.Text = String.Format("J{0}", number.ToString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:22:14.953

使用静态变量跟踪您的号码，然后简单地格式化文本并将计数器加 1。如果您关闭应用程序并重新启动它，计数器将重新开始。如果您希望它持久存在，则必须将值保存在数据库之类的地方。

```
static int _counter = 0;

...

textbox1.Text = string.Format("J{0,2}", ++_counter); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T09:22:25.377

像这样：它将处理可变长度前缀和可变长度数字（最长为 long，所以 19 位）。

首先它计算前缀后面的位数，然后用增加的值替换这些数字。

```
string str = "J9999";

int firstDigit = str.Length;

for (; firstDigit > 0; firstDigit--)
{
    if (!char.IsDigit(str[firstDigit - 1]))
    {
        break;
    }
}

if (firstDigit < str.Length)
{
    long num = long.Parse(str.Substring(firstDigit));
    num++;

    int numOfDigits = str.Length - firstDigit;
    var temp = num.ToString("D" + numOfDigits);

    //Uncomment this for fixed length with overflow: J999->J000, otherwhise you have J999->J1000
    //temp = temp.Substring(temp.Length - numOfDigits);

    str = str.Remove(firstDigit) + temp;
} 
```

# cookies - 欧盟 cookie 法 - 第三方会话 cookie

> ID：11756121
> 
> 赞同：2
> 
> 时间：2012-08-01T09:13:31.117
> 
> 标签：cookies, session-cookies

**我对有关第三方会话 cookie 的欧盟 cookie 法律感到困惑。**

我们正在构建一个插件，该插件从与周围网站不同的域（我们的服务器）加载 HTML。因此，从本质上讲，它是网站所有者可以插入其网站的小部件。

此小部件需要使用会话 cookie 存储会话数据。**这是允许的吗？**如果是这样，我需要同意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T10:06:33.537

需要征求同意的是使用您的插件的网站所有者，而不是您作为小部件所有者/cookie 域。

但是，这并不意味着作为制作人您应该耸耸肩继续做下去，您应该提供网站所有者可以参考的有关插件 cookie 使用的信息。

如果您编写此内容以供非技术人员使用，这将很有帮助，并且您也可以将 cookie 的详细信息提交给[cookiepedia.co.uk](http://cookiepedia.co.uk)，以允许最终用户找到他们需要包含在有关您的 cookie 的隐私声明中的详细信息.

这个答案是基于这个经验：

我们在 ukcookieslaw.co.uk 为非技术网站所有者提供了一个解决方案，其中包括政策、横幅和可在多达 250 个网站页面中搜索的 AUDIT。审核会找到您的 cookie，发现它未被识别，建议它“可能”是会话 cookie，但所有者应手动填写详细信息。

审核将报告您的 cookie 域，因此在跟踪它时，所有者很可能会与您联系。掌握信息是明智的，最好包括一份声明，说明您没有整理/持有这些细节。

确实，“必要”的 cookie 是免税的，但立法存在教育偏见，这意味着必须“告知”任何同意（暗示或明确），并且告知（即教育）的责任在于所有者和设计师。

因此，为此，并非所有会话 cookie 都是“安全的”，它们的使用和存在应该在理想情况下进行描述，并以适合让读者“知情”的阅读水平进行描述。

希望有所帮助，它是“允许的”，报告其使用不是您的责任，但作为一名优秀的开发人员，提供有关目的和意图的信息是适当的。

菲利普

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T13:54:49.653

如果并且直到欧洲官员解决它（并且无法找到替代建议），我可以谦虚地提交以下图形作为惯例，希望前三个不需要进一步解释（也许使用图像'title =“ ' )，最后一个作为政策的链接。1) 无 Cookie 2) 仅会话 Cookie 3) 仅用于导航的 Cookie 4) 保留附加信息。

显然我需要声望点来发布图片。也许有人可以做到这一点。图片在 www.wordscans.com/cookpic/ 如果您觉得可以提交更好的图片，让我们保留一个月左右，让管理员决定。

# java - Google App Engine Java 应用程序：数据库迁移

> ID：11756126
> 
> 赞同：1
> 
> 时间：2012-08-01T09:13:52.590
> 
> 标签：java, python, google-app-engine, data-migration

我从 API Google App Engine 遵循以下步骤：[https ://developers.google.com/appengine/docs/adminconsole/datastoreadmin#Copying_Entities_to_Another_Application](https://developers.google.com/appengine/docs/adminconsole/datastoreadmin#Copying_Entities_to_Another_Application)

1.  使用 Python SDK，我部署了 datastore_admin 应用程序：*appcfg.py -A APPID update DIRECTORYOFDATASTOREADMINAPP*
2.  在仪表板中，我选择实体并按*复制到另一个应用程序*进入远程端点：[https ://ANHORTHERAPPID.appspot.com/_ah/remote_api](https://ANHORTHERAPPID.appspot.com/_ah/remote_api)

我收到以下错误：“启动作业时出现问题。错误是：获取[https://ANHORTHERAPPID.appspot.com/_ah/remote_api](https://ANHORTHERAPPID.appspot.com/_ah/remote_api)失败，状态为 404”

有什么帮助吗？我完全迷路了:-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:50:13.863

解决了：

1.  您必须是两个应用程序（起点和终点）的所有者（角色）
2.  您必须编辑 datastore_admin 应用程序（在我的帖子中的第一个链接下载它）并编辑文件：
    *   app.yaml：目标应用的 ID
    *   appengine_config.py：原始应用程序的 ID
3.  在两个应用中部署 datastore_admin 应用：
    *   *appcfg.py -A APPIDORIGIN 更新 DIRECTORYOFDATASTOREADMINAPP*
    *   *appcfg.py -A APPIDDESTINATION 更新 DIRECTORYOFDATASTOREADMINAPP*

西班牙语完整解决方案：[http ://www.megustaprogramar.com/2012/08/migrasion-de-datos-bajo-google-app-engine/](http://www.megustaprogramar.com/2012/08/migracion-de-datos-bajo-google-app-engine/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T00:13:00.747

我想添加一个我错过的小但关键的项目，文件（app.yaml 和 appengine_config.py）必须复制到 Java 项目的根目录，而不是 war 目录，而是最顶层目录。

我错过了这一点，当我运行 appcfg.py 时，它给了我错误：

```
appcfg.py: error: Directory does not contain an app.yaml configuration file. 
```

包含文件后一切顺利，谢谢！

# excel - 在字符串 Excel 中查找文本

> ID：11756131
> 
> 赞同：0
> 
> 时间：2012-08-01T09:14:14.353
> 
> 标签：excel, excel-formula

例如，我想从 Excel 中的文本行中获取一个值

```
Cell A = abcederfsdfdeikdfKEY=testOnFly&gameFound 
```

我想返回 Key 值，即`"testOnFly"`

我如何使用简单的函数或 VBA 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:17:59.303

好的，我找到了；

```
=(MID(A1,FIND(E1,A1)+LEN(E1),(FIND(F1,A1)-FIND(E1,A1)-LEN(E1)))) 
```

# javascript - JsTree如何创建根节点

> ID：11756133
> 
> 赞同：9
> 
> 时间：2012-08-01T09:14:14.620
> 
> 标签：javascript, jstree

如何使用“create”方法创建根节点

```
Root
 |___ Child1
 |___ Child2 
```

我正在使用 JsTree，通过使用 'json_data' 我可以创建节点，但我想使用 'create' 方法动态创建所有节点。

请帮我....

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-03-24T13:38:26.713

从 jsTree 3.0.0-beta10 版本开始，要创建顶级节点，父节点的引用是`"#"`. 例如：

```
$("#jstree").jstree('create_node', '#', {'id' : 'myId', 'text' : 'My Text'}, 'last'); 
```

此处给出的较旧答案不适用于该版本的 jsTree。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:24:58.643

Maybe it is what you are looking for:

```
$("#tree").jstree("create", -1, false, "Name", false, true); 
```

# jquery - jQuery 点击处理程序只工作一次

> ID：11756136
> 
> 赞同：1
> 
> 时间：2012-08-01T09:14:22.177
> 
> 标签：jquery

我已经开始学习 jQuery 并且正在学习一些非常简单的示例，但已经遇到了问题。单击白天按钮时，我正在更改正文，然后再次为夜间按钮更改不同的背景。

我发现单击处理程序仅工作一次，如果我先单击夜间按钮，那么白天按钮将不起作用？任何人都可以为此提供建议或分享最佳实践吗？

这是我到目前为止的代码：

```
<!DOCTYPE html>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
 <body>

  <h1>My Website</h1>

  <button id="first">Day</button>
  <button id="second">Night</button>

  <script>
  $(function() {
    $('button#first').click(function() {

      $('body').addClass('day');
    });
    debud

    $('button#second').click(function() {

      $('body').addClass('night');
    });

  });

  </script>
</body>
</html> 
```

[http://jsbin.com/ufadul/3/edit](http://jsbin.com/ufadul/3/edit)上的可运​​行副本

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T09:16:57.120

此脚本将继续将这些类添加到您的 body 标记中，而不是替换它们。由于在 CSS 中的位置而`.night`优先。`.day`

使用以下方法来防止这种情况发生：

```
$(function() {
    $('button#first').click(function() {
      $('body').removeClass('night');
      $('body').addClass('day');
    });

    $('button#second').click(function() {
      $('body').removeClass('day');
      $('body').addClass('night');
    });

  }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T09:18:23.547

尝试删除课程，这应该可以解决您的问题

```
$(function() {
    $('button#first').click(function() {
      $('body').addClass('day');
      $('body').removeClass('night');
    });

    $('button#second').click(function() {
      $('body').addClass('night');
   $('body').removeClass('day');
    });

  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T09:23:10.800

```
$(function() {
    $('button#first').click(function() {
      $('body').attr('class','day');
    });

    $('button#second').click(function() {
      $('body').attr('class','night');
    });

}); 
```

[**演示**](http://jsfiddle.net/uttara/z6knm/)

# php - JQGrid for PHP 用图标替换链接文本

> ID：11756137
> 
> 赞同：0
> 
> 时间：2012-08-01T09:14:22.473
> 
> 标签：php, jquery, jqgrid, jqgrid-php

我正在为 PHP 使用 JQGrid。

[在此处](http://www.trirand.com/blog/?p=617)查看主页

我已将编辑和删除添加到这样的列中：

```
$g->set_actions(array(  
    "add"=>false, // allow/disallow add
    "edit"=>true, // allow/disallow edit
    "delete"=>true, // allow/disallow delete
    "rowactions"=>true, // show/hide row wise edit/del/save option
    "autofilter" => true, // show/hide autofilter for search
) 
); 
```

它工作得很好并且做了它应该做的，但是编辑和删除链接是文本的，我需要用图像替换文本，但不知道我需要在哪里/在哪里更改它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:06:31.537

You will need to define your own formatter for the cells. See [this example.](http://www.trirand.com/blog/phpjqgrid/examples/functionality/custom_formatter/default.php)

[This page](http://www.trirand.com/blog/phpjqgrid/examples/editing_data/datepicker/default.php) demonstrates using a predefined formatter, which would be another option, depending on your needs.

# c++ - 使用正则表达式选择引号下字符串的第二个实例

> ID：11756140
> 
> 赞同：0
> 
> 时间：2012-08-01T09:14:36.850
> 
> 标签：c++, regex

如何使用正则表达式选择引号下的第二个字符串？

例如：

```
entry = ("plk", "Kopiuj - linearnie");
entry = ("ptb", "Copiar - linear"); 
```

我知道`"[^"]*"`选择引号下的所有内容，但我想用正则表达式找到的是“Kopiuj - linearnie”和“Copiar - linear”，并忽略“”下的第一个字符串，如“plk”和“ptb”（即第二个每行字符串）。

干杯，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:17:38.460

只要让它捕获右括号，就像[这样](http://regexr.com?31ms4)

```
"([^"]*)"\) 
```

结果字符串在第一个捕获组中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:20:12.560

```
"[^"]*", *"([^"]*)" 
```

然后访问第一个捕获组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T09:22:07.060

如果你这样做

```
/"([^"]*)"[^"]*"([^"]*)"/ 
```

如果您使用正则表达式替换函数，那么第一个字符串将在变量 $1 中，第二个在 $2 中。

或者你可以做

```
/"[^"]*"$/ 
```

它将在行尾匹配（$ 字符），因此它只匹配最后一个文本。

[http://www.regextester.com/index2.html](http://www.regextester.com/index2.html)非常适合测试您的正则表达式。

# puppet - 没有投票的木偶踢？

> ID：11756145
> 
> 赞同：3
> 
> 时间：2012-08-01T09:15:01.157
> 
> 标签：puppet

我在**kick**模式（puppetrun）中使用 Puppet：

客户的 puppet.conf：

```
[main]
    modulepath = /etc/puppet/modules:/usr/share/puppet/modules
    logdir = /var/log/puppet
    rundir = /var/run/puppet

    # The default value is '$confdir/ssl'.
    ssldir = $vardir/ssl
    server = puppetmaster.example.com
    listen = true

    # only kick, no polling
    client = false
    certname = client.example.com
    pluginsync = true

[agent]
    # The default value is '$confdir/classes.txt'.
    classfile = $vardir/classes.txt
    ignorecache = true
    report = true
    environment = dev
    client = false

    # The default value is '/localconfig'.
    localconfig = $vardir/localconfig 
```

* *puppet kick --host **效果很好，但另外每 30 (runinterval) 分钟，puppet 客户端执行一次由自身触发的部署（轮询）。

我以为**client=false**会停止轮询，但似乎没有。

有人知道解决这个问题的方法吗？

来自慕尼黑的感谢，安迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:02:31.570

`client = false`根据 [http://docs.puppetlabs.com/references/stable/configuration.html](http://docs.puppetlabs.com/references/stable/configuration.html) ， puppet.conf 中的指令似乎不存在（尽管页面顶部指定它应该可用）。

但是，`--no-client`您可以在启动代理时指定选项（检查`puppet help agent`）：

```
--no-client:
  Do not create a config client. This will cause the daemon to run
  without ever checking for its configuration automatically, and only
  makes sense when puppet agent is being run with listen = true in puppet.conf
  or was started with the `--listen` option. 
```

添加这些的最佳位置是`/etc/sysconfig/puppet`基于 RPM 的 GNU/Linux 发行版和`/etc/default/puppet`基于 deb 的发行版。对于其他人，您必须检查启动脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:26:51.877

看起来您想要在 [main] 部分中使用 'onetime=true'。好像没有客户端设置。请参阅[http://docs.puppetlabs.com/references/stable/configuration.html#onetime](http://docs.puppetlabs.com/references/stable/configuration.html#onetime)

# domain-driven-design - 在 DDD 中删除实体

> ID：11756146
> 
> 赞同：8
> 
> 时间：2012-08-01T09:15:06.473
> 
> 标签：domain-driven-design, ddd-repositories

我正在学习 DDD 并且有这个基本问题：

似乎工厂、丰富的域模型、存储库（CRUD 的）创建、读取、更新都得到了处理，但是删除呢？删除实体可能有一些业务逻辑，您在哪里处理？RepositoryImpl（属于基础设施）层不应该检查那些不变量，它的工作是从底层数据存储中删除给定的实体。这似乎与工厂的意图截然相反，但 DDD 没有类似“杀死”工厂以进行删除的功能。

假设有一个用户可以删除的订单实体，但直到它处于“已完成”状态，所以请求删除的客户端`repo.delete(ent)`应该得到一个异常。同样，在某些情况下，当客户端请求删除时，它会导致更新（可能是状态更改或设置软删除标志）。

应该在哪里处理这种情况`entity.delete()`（这有意义吗？）或在称为删除的应用程序或域服务中。我担心的是只要Repository接口有那个叫做delete的方法，任何客户端都可以绕过服务方法直接调用repo方法。

只是为了添加一个上下文，我将如何构建我的层是通过 Java 包，并使用包可见性作为一种工具来禁止破坏层之间的交互。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T16:21:03.267

据我所知，DDD 中的删除没有具体的指导方针（“删除”是一个非常通用且面向数据的术语）。它被称为“*生命终结*”，它是存储库的责任。大多数时候，生命的终结并不简单，并且与一些业务规则相关联，可能是状态更改等。很多时候域对象根本不会被删除，它们只是转换到“存档”状态。我强烈推荐阅读Udi Dahan 的[这篇文章](http://www.udidahan.com/2009/09/01/dont-delete-just-dont/)。

为了强制执行与对象生命周期结束相关的不变量，您可以像这样构造代码：

```
class Order{
  ...
  bool CanBeArchived(){
    ...
  }
  ...
}

interface OrderArchiver {
  // throws InvalidOperationException if order can not be archived
  void Archive(Order order);
}

class NHibernateOrderArchiver implements OrderArchiver {      
  void Archive(Order order){
    if(!order.CanBeArchived()){
      throw new InvalidOperationException("Order can not be archived.");
    }
    ...
  }
} 
```

如果实现需要访问与订单关联的其他域对象，则方法“CanBeArchived”也可以是“OrderArchiver”接口的一部分。

# java - 套接字附加程序 - 逐步的基本示例

> ID：11756148
> 
> 赞同：5
> 
> 时间：2012-08-01T09:15:08.557
> 
> 标签：java, log4j, distributed, appender

你能推荐一些关于在分布式系统中使用 log4j 的简单教程，尤其是关于 SocketAppender 的教程吗？

我试图找到一些基本的例子，但我失败了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T09:17:59.967

[这个](http://nilshb.wordpress.com/2009/06/22/apache-log4j-as-log-server/)看起来简单明了。来自文章：

> [使用SimpleSocketServer](https://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/net/SimpleSocketServer.html)的示例服务器启动（从命令行）：

```
> java -jar log4j.jar org.apache.log4j.net.SimpleSocketServer 4712 log4j-server.properties 
```

> 现在您所要做的就是在客户端上指定您的附加程序。
> 
> 示例附加程序：

```
> log4j.appender.SERVER=org.apache.log4j.net.SocketAppender
> log4j.appender.SERVER.Port=4712
> log4j.appender.SERVER.RemoteHost=loghost
> log4j.appender.SERVER.ReconnectionDelay=10000 
```

# web - 如何在搜索结果中将子域列在您的域名下方？

> ID：11756151
> 
> 赞同：1
> 
> 时间：2012-08-01T09:15:21.827
> 
> 标签：web, seo, search-engine, subdomain

我一直在寻找许多著名的网站，我注意到其中一些顶级网站在搜索结果的第一个条目中将其子域显示在其域名下方。他们如何做到这一点？这是他们使用的 SEO 技术吗？还是谷歌会自动为著名的顶级网站添加这些？

这是下面的图片，说明了我的意思：

![在此处输入图像描述](../Images/fddce22f6723a79a9aa13e23bddff231.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:09:25.433

这些链接称为“附加链接”，我不相信这是您自己设置的任何内容。如果域是受信任的，谷歌会确定放在那里的重要主题。

# assembly - iret 和 iretd,iretq 有什么区别？

> ID：11756153
> 
> 赞同：5
> 
> 时间：2012-08-01T09:15:27.043
> 
> 标签：assembly, linux-kernel, x86

我想在 Linux x86_64 服务器上模拟 iret 条件。我发现有三个指令

1.  iret：操作数大小 16
2.  iretd：操作数大小 32
3.  iretq：操作数大小 64

我无法区分它们，以及使用哪一个。感谢任何人的帮助！

我还有一个关于模拟 iret 的问题，你能看看吗？http://stackoverflow.com/questions/11756274/how-to-simulate-a-iret-on-linux-x86-64

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-01T10:49:04.193

从这个[链接](http://courses.engr.illinois.edu/ece390/archive/spr2002/books/labmanual/inst-ref-iret.html)：

> IRET 通过从堆栈中弹出 IP（或 EIP）、CS 和标志从中断（硬件或软件）返回，然后从新的 CS:IP 继续执行。
> 
> IRETW 将 IP、CS 和标志分别弹出 2 个字节，总共从堆栈中取出 6 个字节。IRETD 将 EIP 弹出 4 个字节，再弹出 4 个字节，其中顶部两个被丢弃，底部两个进入 CS，并将标志也作为 4 个字节弹出，从堆栈中取出 12 个字节。
> 
> IRET 是 IRETW 或 IRETD 的简写，具体取决于当时的默认 BITS 设置。

IRETQ 也非常相似

# apache - 用于重定向的 Apache RewriteRule

> ID：11756158
> 
> 赞同：0
> 
> 时间：2012-08-01T09:15:52.657
> 
> 标签：apache, mod-rewrite, redirect

一个只想：

```
vhost1.xyz.com/name1/* 
```

重定向到：

```
vhost2.xyz.com/name2/* 
```

例子：

```
vhost1.xyz.com/name1/24ds21t31?kofs=oif.com 
```

重定向到：

```
vhost2.xyz.com/name2/24ds21t31?kofs=oif.com 
```

它总是类似于：/name1/some_number_&chars?name=url

我试过这段代码：

```
RewriteCond %{REQUEST_URI} ^vhost1.xyz.com/name1/$
RewriteRule . - [E=myUri:%1,E=myQuery:%2]
RewriteRule . http://vhost2.xyz.com/name2/%{ENV:myQuery} [R=301,L] 
```

但它正在制作：

```
vhost1.xyz.com/name1/24ds21t31?kofs=oif.com 
```

重定向到：

```
vhost2.xyz.com/name2/kofs=oif.com 
```

所以“24ds21t31？” 部分丢失了，我需要这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:44:33.013

尝试这个：

```
RewriteCond %{REQUEST_URI} ^vhost1.xyz.com/name1/(.+)$
RewriteRule . http://vhost2.xyz.com/name2/%1 [R=301,L] 
```

编辑：我们需要所有字符......不仅是点（我犯了一个错误，因为我累了）。所以 (.+) 而不是 (\.+)

EDIT2：与主机之前？(vhost1.xyz.com in rewriteCond) 你以前没有别名或其他重写条件吗？如果 name1 不存在，这也是一个问题......（别名或创建一个空目录应该是一个解决方案）

# javascript - 在事件绑定后将元素附加到 DOM 时，触摸事件不起作用

> ID：11756164
> 
> 赞同：0
> 
> 时间：2012-08-01T09:16:20.720
> 
> 标签：javascript, android, jquery, ipad, html

当我在 HTML 代码中创建一个 div 时，然后在其上绑定触摸事件 - 一切都很完美。但是当我像这样创建 div 时：`$('<div ...></div>')`然后绑定的触摸事件将不起作用。iPad 和 Android 设备上的行为相同。

这是重现问题的代码：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <script type="text/javascript" src="libs/jquery-1.7.2.js"></script>
    <script language="JavaScript">
        $(function() {
            $('#a').bind('touchstart', function(e) { alert('It works!'); });

            var b = $('<div style="width:100px; height:100px; background-color:red;" id="b" ></div>');
            b.bind('touchstart', function(e) { alert('Does not work :-('); });
            $('body').append(b);
        });
    </script>
</head>
<body>
    <div style="width:100px; height:100px; background-color:green;" id="a" ></div>​
</body> 
```

jsfiddle 的示例：http: [//jsfiddle.net/EqJDA/11/](http://jsfiddle.net/EqJDA/11/)

我四处寻找，发现如果你在同一个元素上绑定任何鼠标事件和触摸事件，那么触摸事件将被忽略。我认为 jQuery 添加了一些隐藏的鼠标事件并为 div "b" 列出了所有这些事件，但只有一个触摸事件。

*更新：*如果在附加到 DOM 的元素之后绑定事件 - 一切都很好。但是我无法预测元素何时会被附加到 DOM 并且必须在它发生之前构造它并添加事件。

那么，有谁知道为什么会发生这种情况？有什么解决方法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:23:44.667

在浏览完您的代码后，我认为您没有在 DOM 中附加元素。所以该事件没有被注册。

试试这个。

```
$(function() {
            $('#a').bind('touchstart', function(e) { alert('It works!'); });

            var b = $('<div style="width:100px; height:100px; background-color:red;" id="b" ></div>');

            $('body').append(b);
b.bind('touchstart', function(e) { alert('Does not work :-('); });
        }); 
```

# c# - 将可空类型转换为引用的简洁方法

> ID：11756185
> 
> 赞同：1
> 
> 时间：2012-08-01T09:17:39.387
> 
> 标签：c#, pass-by-reference, nullable

我正在尝试概括我编写的解决方案，以便可以将其应用于类似的问题。

我有许多不同的对象，它们都包含可为空的双精度数。我想以某种方式将它们（双打）传递到字典中，然后将数据直接放入相关对象中。

如果双打是引用类型，这将非常简单，但它们不是。

所以我需要一个通过引用来引用它们的解决方案。我唯一能想到的就是创建我自己的包含双精度类型的类，但这需要大量工作，因为我使用了许多双精度类型的代码——据我所知，你不能扩展值类型。

关于我如何去做的任何想法？

添加 - 这是我正在尝试做的事情的示例代码示例。这不是实际的代码。

```
void ReadTable(Dictionary<string,double?> dict)
{
//read some sort of table here by usign the string as the headers
dict["header"] = Convert.toDouble(tableValue);
//etc...
}

MyObject myObject = new MyObject();
//fill it up from the table
Dictionary<string,double?> req = new Dictionary<string,double?>();
req.add("header",myObject.something);
req.add("header2",myObject.somethingElse);
ReadTable(req);

MyOtherObject myOtherObject = new MyOtherObject();
//fill it up from the table
Dictionary<string,double?> req2 = new Dictionary<string,double?>();
req2.add("aheader",myOtherObject.m2something);
req2.add("aheader2",myOtherObject.m2somethingElse);
ReadTable(req2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:24:28.843

如果您的意图是（非编译代码，仅用于说明）：

```
Dictionary<string, ref double?> lookup = ...

double? someField = ...

lookup.Add("foo", ref someField); 
```

然后：

```
lookup["foo"] = 123.45; 
```

并让*那些*知道的代码出现`someField`：那么确实，那不能也不会起作用。好吧，有一些疯狂的hacky方法，但*不要那样做*。您所描述的确实是正确的方法：

```
public class MyWrapper {
    public double? Value {get;set;}
}

Dictionary<string, MyWrapper> lookup = ...

MyWrapper someField = new MyWrapper();

lookup.Add("foo", someField); 
```

然后：

```
lookup["foo"].Value = 123.45; 
```

然后任何代码引用`someField.Value`都会看到新值。

您也许可以使用泛型来概括这一点。

如果您想最小化代码更改，您可以添加一个运算符：

```
public class MyWrapper {
    public double? Value {get;set;}
    public static implicit operator double?(MyWrapper value) {
        return value == null ? null : value.Value;
    }
} 
```

这至少适用于执行以下操作的任何代码：

```
double? tmp = someField; 
```

或者：

```
SomeMethodThatTakesNullableDouble(someField); 
```

# javascript - jQuery tablesorter：TypeError：s [1]未定义

> ID：11756187
> 
> 赞同：1
> 
> 时间：2012-08-01T09:17:44.250
> 
> 标签：javascript, jquery, tablesorter

我有表格，在通过 JS 更新它之后，我运行更新触发器（就像在这种情况下多次提到的那样），但它不起作用，FireBug 说：“TypeError：s [1] 未定义”。

```
// in $(document).ready()
$('#stattable').tablesorter();

// after updating table content
$('#stattable').triggerHandler('update');
$('#stattable').trigger('sorton', [[1, 1], [0, 0]]);
$('#stattable').trigger('appendCache'); 
```

HTML 代码：

```
<table id="stattable">
 <thead>
  <tr><th>Producer</th><th>Value</th><th>Amount</th></tr>
 </thead>
 <tbody>
  <!-- here dynamically generated data -->
 </tbody>
 <tfoot>
  <tr><td>SUM:</td><td></td><td></td></tr>
 </tfoot> 
</table> 
```

动态数据格式：

```
<tr>
 <td>Ford</td>
 <td>1999.90</td>
 <td>10</td>
</tr>
<tr>
 <td>Renault</td>
 <td>345.1</td>
 <td>2</td>
</tr>
<tr>
 <td>Mitsubishi</td>
 <td>0</td>
 <td>0</td>
</tr>
... etc. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T03:18:42.367

[触发](http://api.jquery.com/trigger/)事件时，需要将额外的参数括在方括号中：

```
$('selector').trigger('event', [ parameters ]); 
```

所以在这种情况下，sortList 缺少一组额外的括号：

```
$('#stattable').trigger('sorton', [ [[1, 1], [0, 0]] ]); 
```

# serialization - GSON 在 JSF 托管 bean 中不可序列化

> ID：11756189
> 
> 赞同：0
> 
> 时间：2012-08-01T09:17:57.027
> 
> 标签：serialization, jsf-2, gson

我正在使用 GSON。当我启动tomcat时，它给了我错误。我的部分代码：

```
 @ManagedBean(name = "kpilist")
@ViewScoped
public class KPIListController implements Serializable {

    public List<KPI> getKPI() {
        KPIDAO kpiDAO = new KPIDAO();        
        List<KPI> kpiList = new ArrayList<KPI>();
         Gson gson = new Gson();  
        try {
            kpiList = kpiDAO.getKPI(selectedKPIType);     
            json = gson.toJson(kpiList) ;
            Logger.getLogger(KPIListController.class.getName()).warning("The KPI JSON" + json);
        } catch (SQLException ex) {
            ex.printStackTrace();
            return null;
        }
        return kpiList;
    } 
```

* * *

```
WARNING: Cannot serialize session attribute com.sun.faces.renderkit.ServerSideStateHelper.LogicalViewMap for session 41AC6C7AB4B0869A29778EA4155BFCA1
    java.io.NotSerializableException: com.google.gson.Gson
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1180)
        at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)
        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)
        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
        at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
        at java.util.HashMap.writeObject(HashMap.java:1014)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:962)
        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1480)
        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
        at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)
        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)
        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
        at java.io.ObjectOutputStream.writeArray(ObjectOutputStream.java:1362)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1170)
        at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
        at java.util.HashMap.writeObject(HashMap.java:1014)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:962)
        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1480)
        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
        at java.io.ObjectOutputStream.writeArray(ObjectOutputStream.java:1362)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1170)
        at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
        at java.util.HashMap.writeObject(HashMap.java:1014)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:962)
        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1480)
        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
        at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
        at java.util.HashMap.writeObject(HashMap.java:1014)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:962)
        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1480)
        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
        at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
        at org.apache.catalina.session.StandardSession.writeObject(StandardSession.java:1692)
        at org.apache.catalina.session.StandardSession.writeObjectData(StandardSession.java:1092)
        at org.apache.catalina.session.StandardManager.doUnload(StandardManager.java:411)
        at org.apache.catalina.session.StandardManager.unload(StandardManager.java:353)
        at org.apache.catalina.session.StandardManager.stopInternal(StandardManager.java:497)
        at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
        at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5449)
        at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
        at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1540)
        at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1530)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722) 
```

我在使用 GSON 时做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T10:24:31.673

在您的代码中我看不到它，但看起来有一个成员变量包含 a `Gson`，可能是间接的（它甚至可以是一个匿名类实例捕获它）。AFAIK，例外说`Gson`不是`Serializable`，`这没关系，因为你很可能不想存储它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-05T12:39:48.957

您可以尝试使用“瞬态”关键字：

```
transient Gson gson = new Gson(); 
```

这将在序列化过程中忽略“gson”。您可以在此处阅读更多信息：[https](https://www.baeldung.com/java-transient-keyword) ://www.baeldung.com/java-transient-keyword 。

问候。

# c# - 如何处理一次性对象抛出的异常？

> ID：11756191
> 
> 赞同：7
> 
> 时间：2012-08-01T09:17:58.913
> 
> 标签：c#, idisposable

假设 Constructor 和 Process 方法可能抛出异常，使用 Disposable 对象的最佳方法是什么？我通常更喜欢以下实现之一。

1.  使用块尝试捕获周围

    ```
    try
    {
        using (Disposable dispObj = new Disposable())
        {
            dispObj.Process();
        }
    }
    catch (Exception ex)
    {
        // Do something
    } 
    ```

2.  try-catch-finally 块。

    ```
    Disposable dispObj2 = null;
    try
    {
        dispObj2 = new Disposable();
        dispObj2.Process();
    }
    catch (Exception ex)
    {
        // Do something
    }
    finally
    {
        if (dispObj2 != null)
        {
            dispObj2.Dispose();
        }
    } 
    ```

**更新：**

再次：**“假设 Constructor 和 Process 方法可能会抛出异常”**。我真的不明白为什么没有人关心他们的答案中的异常。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T09:19:20.673

`using`很好。它有一个内置的 try-finally 块。如果发生异常，会自动调用 dispose 方法。

这可以

```
using (Disposable dispObj = new Disposable())
{
    dispObj.Process();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T09:23:52.463

using 语句在后台使用 try - finally，并且仅适用于实现 IDisposable 的对象。您不必将 try catch 与 using 一起使用。请看以下示例（来自[MSDN - using 语句](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)）。

```
using (Font font1 = new Font("Arial", 10.0f)) 
{
    byte charset = font1.GdiCharSet;
} 
```

上面的代码是一样的：

```
Font font1 = new Font("Arial", 10.0f);
  try
  {
    byte charset = font1.GdiCharSet;
  }
  finally
  {
    if (font1 != null)
      ((IDisposable)font1).Dispose();
  } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T09:20:30.613

像这样做：

```
using (Disposable dispObj = new Disposable())
{
    dispObj.Process();
} 
```

一次性对象总是在它们超出`using`子句范围时被处置，即使它是由异常引起的。

并且不要使用空的`catch {}`，完全没有意义的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-01T09:20:18.730

```
using (Disposable dispObj = new Disposable())
    {
        dispObj.Process();
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-01T09:21:48.833

实现 IDisposable 接口的类通常使用 .NET 框架垃圾收集器无法清理的资源。调用 IDisposable.Dispose() 方法会执行将宝贵资源显式释放回世界的代码。实现 IDisposable 接口的类的一个主要示例是 SqlConnection 类。SqlConnection 类使用 Microsoft SQL Server 数据库连接。由于 SQL Server 支持的连接数量有限，因此尽快释放连接非常重要。通常，您不会直接调用 Dispose() 方法。通常，您会利用代码中的 Using 语句，就像您在代码中提到的那样

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-26T17:52:57.987

您提出的方法#1 可能是实现您想要的最简洁的方法。

周围的`try`...`catch`块应该捕获任何抛出的异常，包括构造函数抛出的异常。如果在一次性对象正在使用（`using`块内）时发生异常，则该对象也将在`catch`接管之前被处置。

方法#2 采用与方法#1 不同的执行路径。请注意，根据[C# Reference](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)，方法 #1 从字面上编译，就好像以下内容一样：

```
try
{
    {
        Disposable dispObj = new Disposable();
        try
        {
            dispObj.Process();
        }
        finally
        {
            if (dispObj != null)
                ((IDisposable)dispObj).Dispose();
        }
    }
}
catch (Exception ex)
{
    // Do something
} 
```

所以，这两种方法的作用域是不同的。如果可能，我会更喜欢方法＃1，因为范围问题，也因为它更容易阅读。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-01T09:20:40.380

在可能的情况下，您应该使用 using 块。它将保证在您的对象上调用 Dispose。手动操作很容易出错。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-01T09:41:06.853

```
using (IDisposable disp = new IDisposable())
{
   //some logic here
} 
```

这段代码将被翻译成这样：

```
IDisposable disp = new IDisposable();

try
{
  //some logic here
}
finally
{
  if (disp != null)
     ((IDisposable)disp).Dispose();
} 
```

块中的代码“最终”始终执行，因此它使您有可能抛出异常，从使用块中返回，毫无疑问 Dispose 不会被调用。

但是你应该小心使用和对象初始值设定项。

```
using (var fs = new FileStream(@"C:\blabla", FileMode.Open) { Position = pos })
{
    //some logic here
} 
```

从[这里](http://msdn.microsoft.com/en-us/library/system.io.filestream.position.aspx)可以看出，属性 Position 可以抛出异常。问题是对象将被创建，这将在**try 块之外**完成，因此可能存在内存泄漏。正确的方法

```
using (var fs = new FileStream(@"C:\blabla", FileMode.Open))
{
    fs.Position = pos;
    //some logic here
} 
```

# c# - 如何插入多个列表 到数据网格视图

> ID：11756199
> 
> 赞同：0
> 
> 时间：2012-08-01T09:18:36.657
> 
> 标签：c#, c#-4.0, datagridview

如何使用 4 个不同的列表创建 datagridview。

```
List<string> experience = new List<string>();
    List<string> Cname = new List<string>();
    List<string> Clink = new List<string>();
    List<string> Ccomp = new List<string>(); 
```

我必须根据上述 4 个列表在 datagridview 中创建四列。我怎样才能做到这一点。每个`List<string>`内容都将添加到 datagridview 列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:22:06.403

使用您的四个列表创建 DataTable 并将您的 datagridview 与此 DataTable 绑定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T09:23:40.887

您不能绑定多个，为此您应该创建一个可以将这些数据存储在单个中的集合。

您可以使用 DataTable 或者可以创建一个具有四个属性的类，然后对该类进行列表，或者如果要使用预定义的 .net 类，您可以使用 Tuple 类。

如果使用 Tuple 类，你可以试试这个，但所有列表必须具有相同的计数。

```
 var list = new List<Tuple<string,string,string,string>>();

    for(int i=0; i<experience.Count; i++)
       list.Add(new Tuple<string,string,string,string>(experience[i],Cname[i],Clink[i],Ccomp[i]));

    dataGridView.DataSource = list; 
```

或者对于数据表，您可以尝试

```
DataTable dt = new DataTable("Table");
dt.Columns.AddRange(new DataColumn[]{ 
    new DataColumn("experience", typeof(string)),
    new DataColumn("Cname", typeof(string)),
    new DataColumn("Clink", typeof(string)),
    new DataColumn("Ccomp", typeof(string))
 });

for(int i=0; i<experience.Count; i++){
   var newRow = dt.NewRow();
    newRow["experience"] = experience[i];
    newRow["Cname"] = Cname[i];
    newRow["Clink"] = Clink[i];
    newRow["Ccomp"] = Ccomp[i];
    dt.Rows.Add(newRow);
 }

dataGridView.DataSource = dt; 
```

# android - Android：如何填写 SwipeyTabs？

> ID：11756204
> 
> 赞同：7
> 
> 时间：2012-08-01T09:18:47.360
> 
> 标签：android

我`SwipeyTabs`在我的应用程序中使用。我不确定如何填写标签内容。它甚至没有任何自己的xml。

我正在使用这样的标签：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_swipey_tabs);
    initViewPager(4, 0xFFFFFFFF, 0xFF000000);
    mSwipeyTabs = (SwipeyTabsView) findViewById(R.id.swipey_tabs);
    mSwipeyTabsAdapter = new SwipeyTabsAdapter(this);
    mSwipeyTabs.setAdapter(mSwipeyTabsAdapter);
    mSwipeyTabs.setViewPager(mPager);
}

private void initViewPager(int pageCount, int backgroundColor, int textColor) {
    mPager = (ViewPager) findViewById(R.id.pager);
    mPagerAdapter = new ExamplePagerAdapter(this, pageCount, backgroundColor, textColor);
    mPager.setAdapter(mPagerAdapter);
    mPager.setCurrentItem(1);
    mPager.setPageMargin(1);
} 
```

这是`activity_swipey_tabs.xml`布局：

```
<android.ex.com.viewpager.extension.SwipeyTabsView
    android:id="@+id/swipey_tabs"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#3B3B3B" />

<View
    android:id="@+id/colorline"
    android:layout_width="fill_parent"
    android:layout_height="2dip"
    android:layout_below="@+id/swipey_tabs"
    android:background="#FF91A438" />

<View
    android:id="@+id/blackline"
    android:layout_width="fill_parent"
    android:layout_height="1dip"
    android:layout_below="@+id/colorline"
    android:background="#FF000000" />

<android.support.v4.view.ViewPager
    android:id="@+id/pager"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/blackline" /> 
```

有没有例子或教程？

任何支持都会很棒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T12:30:00.123

选项卡`SwipeyTabs`就像虚拟布局，我的意思是它们没有自己定义的布局。您应该动态定义每个组件。

让我详细解释一下。例如，您需要一个 ListView（自定义）。您创建了这样的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="70dp"
    android:padding="5dp"
    android:background="#ffffff" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="80dp"
        android:layout_height="60dp"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:src="@drawable/i1" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/imageView1"
        android:layout_alignParentRight="true"
        android:textColor="@android:color/black"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/textView2"
        android:layout_alignTop="@+id/imageView1"
        android:textColor="@android:color/black" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/imageView1"
        android:layout_toRightOf="@+id/imageView1"
        android:textColor="@android:color/black"
        android:textAppearance="?android:attr/textAppearanceSmall" />

</RelativeLayout> 
```

现在你也需要一个`ArrayAdapter`来适应这个习惯`ListView`，我不包括`ArrayAdapter`。

所以在你的`PagerAdapter`类中，定义一个`ListView`并使用这个布局。例如：

```
@Override
public Object instantiateItem(View container, int position) {
    ListView v = new ListView( mContext );
    //test_list_layout which is above
    TestAdapter adapter = new TestAdapter(mContext, R.layout.test_list_layout, objs);

    v.setAdapter( adapter );
    ((ViewPager)container ).addView( v, 0 );
    v.setSelection( scrollPosition[ position ] );
    v.setOnScrollListener( new OnScrollListener() {             
         public void onScrollStateChanged( AbsListView view, int scrollState ){}
         public void onScroll( AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount ) {
        scrollPosition[ pos ] = firstVisibleItem;
         }
    });
    return v;
} 
```

现在它运作良好。如果您需要更多选项卡，请使用`position`参数作为分隔符，例如`if(position == 0)`. 在这你将需要这一行：

```
((ViewPager) container).removeView((View) container); 
```

就这样。我希望，这很清楚。

# python - 非pydev项目上的python解释器？

> ID：11756207
> 
> 赞同：1
> 
> 时间：2012-08-01T09:18:55.847
> 
> 标签：python, eclipse, pydev

我们已经成功地在我们的 Eclipse 上添加了 pydev 插件。因此，在 pydev 项目中，它会检测到错误等等。

但问题是我们有什么方法可以在非 pydev 项目中使用 pydev 功能（例如错误检测）？（例如 java 项目）。

实际上，我们正在开发一个包含一些 .py 文件的 eclipse 插件，我们希望它能够将它们解释为附带功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:30:47.893

PyDev 应该可以正常工作。在项目属性中，您可以设置解释器、PYTHONPATH 和其他 PyDev 相关设置。

要手动触发代码分析，请右键单击项目、文件或文件夹并选择`PyDev`->`Code analysis`

# objective-c - RestKit - fetchFromDataStore（缓存）问题

> ID：11756210
> 
> 赞同：3
> 
> 时间：2012-08-01T09:19:15.963
> 
> 标签：objective-c, ios, caching, core-data, restkit

我正在研究 RestKit 框架及其工作原理。然后我创建一个简单的项目，它将调用 Github api 并将数据加载到 tableview 中 - 在我阅读了一些教程之后 - 关于从远程加载和映射它工作正常并加载到 tableview 但是当我试图从数据存储 - 离线模式 - 应用程序将崩溃，这是日志：

```
2012-07-29 16:21:41.611 RKGithubClient_FromZtoH[29181:c07] I restkit:RKLog.m:33 RestKit initialized...
2012-07-29 16:21:53.161 RKGithubClient_FromZtoH[29181:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'executeFetchRequest:error: A fetch request must have an entity.'
*** First throw call stack:
(0x20b9022 0x197acd6 0xf15871 0x643c 0x42e5 0x3e14 0x4697 0x53838f 0x5385eb 0x5394ed 0x4a6a0c 0x4abf92 0x4a614b 0x495550 0x495670 0x495836 0x49c72a 0x2a6a 0x46d386 0x46e274 0x47d183 0x47dc38 0x471634 0x25e1ef5 0x208d195 0x1ff1ff2 0x1ff08da 0x1fefd84 0x1fefc9b 0x46dc65 0x46f626 0x259d 0x2505)
terminate called throwing an exception 
```

这是 fetchFromDataStore 方法：

```
- (void)fetchFromDataStore
{
    NSFetchRequest *request = [[[RKObjectManager sharedManager] mappingProvider] fetchRequestForResourcePath:self.resourcePath]; //self resourcePath]];
    self.repos = [GithubRepo objectsWithFetchRequest:request];
    [self.tableView reloadData];
} 
```

知道为什么会发生这种情况，因为我为它们创建了实体，您可以从此链接查看源代码：

[源代码](https://dl.dropbox.com/u/66255347/RKGithubClient_FromZtoH.zip)

此外，是否有任何有用的 RestKit 缓存示例或教程？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T06:36:13.227

最后，我得到了答案。。

问题与以下事实有关，当我要求： NSFetchRequest *request = [[[RKObjectManager sharedManager] mappingProvider] fetchRequestForResourcePath:self.resourcePath]; 在 myViewController.m 上，返回为空。发生这种情况的原因是对象映射器尚未配置为正确处理核心数据缓存。我在用着：

```
- (void)setObjectMapping:(RKObjectMappingDefinition *)objectMapping forResourcePathPattern:(NSString *)resourcePathPattern; 
```

虽然我应该使用：

```
- (void)setObjectMapping:(RKObjectMappingDefinition *)objectMapping forResourcePathPattern:(NSString *)resourcePathPattern withFetchRequestBlock:(RKObjectMappingProviderFetchRequestBlock)fetchRequestBlock; 
```

它位于对象映射的核心数据扩展中。您提供的额外块用于决定需要哪个获取请求，具体取决于在 resourcePath 中传递的参数（在本例中为用户 RestKit）。在特定情况下，我想返回一个在 repo 的 user == "RestKit" 时查找 repos 的 fetch 请求。

该方法的文档虽然很难找到，但非常有帮助：

```
/**
 Configures an object mapping to be used when during a load event where the resourcePath of
 the RKObjectLoader instance matches resourcePathPattern.

 The resourcePathPattern is a SOCKit pattern matching property names preceded by colons within
 a path. For example, if a collection of reviews for a product were loaded from a remote system
 at the resourcePath @"/products/1234/reviews", object mapping could be configured to handle
 this request with a resourcePathPattern of @"/products/:productID/reviews".

 **NOTE** that care must be taken when configuring patterns within the provider. The patterns
 will be evaluated in the order they are added to the provider, so more specific patterns must
 precede more general patterns where either would generate a match.

 @param objectMapping The object mapping to use when the resourcePath matches the specified
 resourcePathPattern.
 @param resourcePathPattern A pattern to be evaluated using an RKPathMatcher against a resourcePath
 to determine if objectMapping is the appropriate mapping.
 @param fetchRequestBlock A block that accepts an individual resourcePath and returns an NSFetchRequest
 that should be used to fetch the local objects associated with resourcePath from CoreData, for use in
 properly processing local deletes
 @see RKPathMatcher
 @see RKURL
 @see RKObjectLoader
 */
- (void)setObjectMapping:(RKObjectMappingDefinition *)objectMapping forResourcePathPattern:(NSString *)resourcePathPattern withFetchRequestBlock:(RKObjectMappingProviderFetchRequestBlock)fetchRequestBlock; 
```

# jquery - AjaxComplete() 仅用于函数，而不是选择器

> ID：11756211
> 
> 赞同：0
> 
> 时间：2012-08-01T09:19:20.043
> 
> 标签：jquery, ajax, click

嗨，我在一个 js 文件中有一个 AjaxComplete 函数，该函数会为不同的按钮触发多次点击，但都引用了同一个选择器。

我需要为每个点击功能使用不同的 ajaxComplete 功能，这可能吗？

```
jQuery(document).ready(function(){
var number = 1;
///////////////////////////////////////////////////
 /* The button to see the single portfolio items */
jQuery(document).on('click','.cover a, .prev_mimo, .next_mimo',function (coverclick){

    coverclick.preventDefault();
    coverclick.stopPropagation();
    coverclick.stopImmediatePropagation();
    number ++;
    /* Get the link */
    var coverlink = jQuery(this).attr('href');
    jQuery('.loadmask').show();
    jQuery('.loadmask-msg').show();
    jQuery('.upperdiv').animate({height : 'hide', opacity : 'hide', easing: 'EaseOutBounce'},'slow', function(){                                        jQuery('.upperdiv').html('');});
    jQuery('.upperdiv').load(coverlink+' .loading_div');

    return false;

});
jQuery('.upperdiv').ajaxComplete(function() {
        var  slideClass = 'all_project_images' + number;
        var  dentroClass = '.' + slideClass;
        jQuery('html,body').stop().animate({
                    scrollTop: jQuery(this).offset().top},
                    'slow');
        jQuery('.post_nav_portfolio').show();
        jQuery('.slideshow ul').removeClass().addClass(slideClass);
        jQuery(dentroClass).stop(false,true).responsiveSlides({
                    auto: true,
                    nav: true,
                    speed: 500});   
        jQuery('.upperdiv').animate({height : 'show', opacity : 'show', easing: 'EaseInBounce'},'slow');
        jQuery('.loadmask').hide();
        jQuery('.loadmask-msg').hide();
        jQuery('.cover').hover(function(){
                jQuery(this).children('.mimo_portfolio_image').stop().animate({opacity : 0.5},'fast');
                    }, function(){
                jQuery(this).children('.mimo_portfolio_image').stop().animate({opacity : 1},'fast');
                    }); 
        jQuery("a[rel^='prettyPhoto']").prettyPhoto();
        jQuery('.slideshow').hover(function(){
                jQuery(this).children('.rslides_nav').show('slow');
                }, function(){
                jQuery(this).children('.rslides_nav').hide('slow');
            });
            console.log(dentroClass);

            });

      }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:25:22.367

inside your `ajaxComplete()` function you can check which was the original button that initiated the ajax call, by testing out `$(this)`.

Try something like this:

```
 $('.buttons').ajaxComplete(function(){
      if($(this).hasClass('button1')){
         // do one thing
      }else if($(this).hasClass('button2')){
         // do another
      }
 }); 
```

in this case, your buttons should have different classes to describe their actions:

```
<button class="buttons button1">button1</button>
<button class="buttons button2">button2</button> 
```

# msbuild - AfterTargets 失败不会失败 msbuild 运行

> ID：11756217
> 
> 赞同：6
> 
> 时间：2012-08-01T09:19:39.907
> 
> 标签：msbuild

在我的解决方案中，有些项目有最后需要运行的任务，比如将文件复制到各个地方。我们通过以下方式实现`AfterTargets="Build"`：

```
<Target Name="CopyStuff" AfterTargets="Build">
    <Copy SourceFiles="..." DestinationFolder="..." />
</Target> 
```

如果有效。但是，在构建解决方案（而不是单个项目！）时，如果复制失败，我们会收到红色构建警告，但 msbuild（以及因此 TFS 构建）成功：

```
> msbuild /t:clean;build my.sln
(...)
(in red...) error MSB3021: Unable to copy file (...)

> echo %errorlevel%
0     <<<<<<< This means succeeded 
```

据我了解，这是因为 msbuild 认为只要主要的“构建”目标通过，一切也都通过了。

我们的解决方法 - 将目标更改为`BeforeTargets="AfterBuild"`，这将我的目标置于 Build 目标中。但是，这需要了解“构建”目标的内容，并且可能不适用于其他项目类型。

问题：

1.  有没有办法让`AfterTargets="Build"`解决方案构建失败？
2.  如果没有，有没有办法自动验证人们没有添加`AfterTargets="Build"`到他们的项目中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T03:38:28.713

如果 Source 和 Destination 的内容不同，您是否尝试在 <Copy /> 任务之后添加 <Error /> 以引发错误？

# jsf - xhtml 中的 javascript (Richfaces)

> ID：11756219
> 
> 赞同：3
> 
> 时间：2012-08-01T09:19:55.543
> 
> 标签：jsf, richfaces, seam

我正在尝试在 xhtml 中包含 jquery 和 jquery-ui 库。我听说richfaces 已经有jquery，但是jquery-ui 没有。我不知道如何包含它们。

除此之外，我还有另一个使用 jquery 和 jquery-ui 的 js 库。那么，我需要做些什么来导入这 3 个 js 源并在

`<script type="text/javascript"> </script>`

堵塞？这些js文件必须放在哪里？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T11:58:55.933

RichFaces 4.x 确实捆绑了 jQuery。它与资源名称一起可用，`jquery.js`并且通常仅在某个 RichFaces 组件需要它时自动包含，但您也可以通过`<h:outputScript>`.

至于你自己的js文件，直接放到`/resources`public webcontent的文件夹下，`<h:outputScript>`照常使用即可。

假设

```
WebContent
 |-- resources
 |    |-- jquery-ui.js
 |    `-- yourscript.js
 : 
```

这是您可以参考的方式（请注意，`jquery.js`由 RichFaces 提供，而不是您自己！）

```
<h:head>
    ...
    <h:outputScript name="jquery.js" />
    <h:outputScript name="jquery-ui.js" />
    <h:outputScript name="yourscript.js" />
</h:head> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-25T19:15:43.033

RichFaces 提供的资源映射到像**jquery.js**这样的短资源名称。

所有资源的完整列表可以在组件 jar (richfaces-components-ui-4.xyFinal.jar) 内名为**Static.properties的文件中找到。**

**META-INF/richfaces/staticResourceMapping/Static.properties 中的**一些行：

```
jquery.js=org.richfaces.staticResource/4.x.y.Final/Static/jquery.js
org.richfaces\:tooltip.js=org.richfaces.staticResource/4.x.y.Final/Static/org.richfaces/tooltip.js 
```

您可以查看资源及其资源名称和完整路径。另请注意，有带库名称和不带库名称的资源名称 - 因此您必须将**library**属性与**outputScript**一起使用：

```
<h:outputScript name="jquery.js" />
<h:outputScript library="org.richfaces" name="tooltip.js" /> 
```

在 jquery/... 之后包含自己的脚本。

恕我直言，您永远不应该依赖资源导入，这是组件使用的副作用。

# c# - MQRC_PROPERTY_NOT_AVAILABLE：GetPropertyNames 返回“不存在”属性的名称

> ID：11756220
> 
> 赞同：1
> 
> 时间：2012-08-01T09:19:56.167
> 
> 标签：c#, .net, ibm-mq

我在从接收到的属性中读取属性时遇到了一个大问题`MQMessage`（我使用的是 WebSphere MQ 7.5 客户端）。访问某些属性时`GetObjectProperty`会引发`MQRC_PROPERTY_NOT_AVAILABLE`错误。我将尝试解释我的日志记录代码中的错误。

我在应用程序中有一些日志记录工具。此工具还可以选择转储所有已处理的 MQ 消息。转储包含消息正文、来自 MQMD 的所有标准消息头以及所有其他 JMS 或用户属性。转储属性时会导致问题，因为`GetPropertyNames("%")`返回消息中“不存在”的属性名称 -`GetObjectProeprty`使用此类名称调用会导致`MQException`原因代码 2471 - `MQRC_PROPERTY_NOT_AVAILABLE`。

这是我的转储属性方法的简化代码：

```
private static void DumpMessageProperties(MQMessage message, StringBuilder dumpBuilder) {
    IEnumerator names = message.GetPropertyNames("%");
    dumpBuilder.AppendLine("Properties:");
    while (names.MoveNext()) {
        string name = names.Current.ToString();
        dumpBuilder.AppendFormat("  {0}: ", name);

        try {
            object value = message.GetObjectProperty(name);

            if (value != null) {
                Type type = value.GetType();
                if (type != typeof(sbyte[])) {
                    if (type == typeof(string)) {
                        string strValue = value.ToString();
                        dumpBuilder.Append(String.Format("\"{0}\" [{1}]", strValue, type));
                    } else {
                        dumpBuilder.Append(String.Format("{0} [{1}]", value, type));
                    }
                } else {
                    dumpBuilder.Append(String.Format("{0}", DumpSByteArray((sbyte[])value)));
                }
            }
        } catch (MQException e) {
            dumpBuilder.AppendFormat("{0} ({1})", e.Message, e.ReasonCode.ToString());
        }

        dumpBuilder.AppendLine();
    }
} 
```

我偶尔会`MQRC_PROPERTY_NOT_AVAILABLE`在转储接收或发送消息的用户属性时得到。收到消息时转储失败的示例：

```
Properties:
  JMSReplyTo: "queue:///SomeQueue" [System.String]
  Encoding: MQRC_PROPERTY_NOT_AVAILABLE (2471)
  JMSDeliveryMode: 0 [System.Int32]
  CodedCharSetId: MQRC_PROPERTY_NOT_AVAILABLE (2471)
  JMSDestination: "queue:///SomeReplyQueue" [System.String]
  MessageVersion: "001" [System.String]
  mcd.Msd: "jms_text" [System.String]
  MessageName: "SomeMessageName" [System.String] 
```

看起来 MQRFH2 标头中的控制字段以某种方式传递到消息中。我以为客户端会自动处理 MQRFH2 消息格式并为我翻译。

已发送消息转储失败的示例：

```
Properties:
  JMSTimestamp: MQRC_PROPERTY_NOT_AVAILABLE (2471)
  mcd.Msd: 
  JMSDestination: MQRC_PROPERTY_NOT_AVAILABLE (2471)
  JMSReplyTo: MQRC_PROPERTY_NOT_AVAILABLE (2471)
  JMSDeliveryMode: 1 [System.Int32] 
```

为什么会这样？我检查[了错误的文档，](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/index.jsp?topic=/com.ibm.mq.amqzao.doc/fm20360_.htm)但我仍然不明白如何避免错误并简单地获取这些数据或如何摆脱不应成为消息一部分的属性（RFH 控制字段，如`Encoding`）`CodeCharSetId`。

这看起来`MQMessage`处于不一致的状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T11:54:22.923

我认为您应该仅从 MQRFH2 标头中读取属性。我就是这样做的：

```
MQRFH2 rfh2 = null;

// Find and store message length
int msglen = replyMessage.getMessageLength();

MQHeaderList list = new MQHeaderList(replyMessage);
int indexOf = list.indexOf("MQRFH2");
if (indexOf >= 0) {
    rfh2 = (MQRFH2) list.get(indexOf);
    msglen = msglen - header.size();
}

// this will hold the message text
String msgText = replyMessage.readStringOfCharLength(msglen);

// this will hold all the properties in the end
Map<String, Object> headers = new TreeMap<String, Object>();

if (rfh2 != null) {
    try {
        for (Element folder : rfh2.getFolders()) {
            String prefix = folder.getName() + ".";
            for (Element element : folder.getChildren()) {
                headers.put(prefix + element.getName(), element.getValue());
            }
        }
    } catch (IOException e) {
        e.printStackTrace();
    } catch (Exception ex) {
        ex.printStackTrace();
    }
} 
```

虽然这是 Java，但我确信有一种类似的方法可以使用 .net 来实现。

希望它会有所帮助。

# asp.net-mvc - asp MVC 4中的点分隔客户端日期验证

> ID：11756226
> 
> 赞同：2
> 
> 时间：2012-08-01T09:20:13.887
> 
> 标签：asp.net-mvc, validation, datetime, localization, client-side

所以几个小时以来，我一直在努力解决这个问题。我正在为我的日期输入字段创建本地化验证。我已经覆盖了默认的 jquery 日期验证器，并且该方法似乎工作正常。一切似乎都按计划进行，但 jquery 验证器不会让我发布表单。

放置在自定义验证方法中的断点在 firebug 中被正确命中，并按预期返回 true。

一旦我继续执行，带有红色矩形的验证错误字段就消失了，但验证摘要仍然显示 MVC 生成的属性错误。

这是代码：

tracker.validate.js

```
// Replace dots so jq validator can understand what's going on
$(function () {
    $.validator.addMethod(
    "date",
    function (value, element) {
        var s = value;
        s = value.replace(/\./g, '/');

        // Chrome requires tolocaledatestring conversion, otherwise just use the slashed format
        var d = new Date();
        return this.optional(element) || !/Invalid|NaN/.test(new Date(d.toLocaleDateString(value))) || !/Invalid|NaN/.test(new Date(s));
    },
    ""
    );
});

$.validator.unobtrusive.parse(); 
```

这是我的部分视图中的脚本引用，该表单所在的位置

```
<script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/tracker.validate.js")" type="text/javascript"></script> 
```

日期时间编辑器模板

```
@model DateTime

<input style="width:44%;display:inline;" type="text" name='@(ViewData.TemplateInfo.HtmlFieldPrefix).Day' value='@Model.Date.ToShortDateString()' class='date'/>
<input style="width:30%;display:inline;" type="text" name='@(ViewData.TemplateInfo.HtmlFieldPrefix).Time' value='@Model.ToShortTimeString()' onblur='formatTimeInput(this)'/>
@Html.HiddenFor(model => model) 
```

日期选择器初始化：

```
$.datepicker.setDefaults($.datepicker.regional['fi']);

$('.date').datepicker({
    showOn: "button",
    dateFormat: "dd.mm.yy",
    buttonImage: '/content/images/calendarIcon.png',
    buttonImageOnly: true,
    constrainInput: false
}); 
```

有什么我遗漏的东西，还是有什么办法可以摆脱这些默认属性错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T05:55:35.827

显然还有其他一些与验证冲突的脚本文件。我删除了这条线

```
<script src="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Scripts/js")"></script> 
```

来自 _Layout.cshtml，它现在正在工作。

# javascript - Javascript中带小数的正则表达式

> ID：11756227
> 
> 赞同：0
> 
> 时间：2012-08-01T09:20:14.647
> 
> 标签：javascript, regex

我想要一个文本框的正则表达式，它只允许 3 位数字并通过以下条件：

1.  只有数字（234 或 123）或
2.  最后只有一位小数 (55.1)
3.  不应允许空格
4.  如果使用小数，那么小数点之后/之前也应该有一个数字（不允许使用 555\. 或 12\. 或 .12）

我有以下部分工作的RE：

```
/^\d{0,3}$|^\d{0,2}[\.]\d{1}$/ 
```

修改这个有什么帮助吗？

看起来问题是额外的：

我在按键时使用代码。因此它会在按键时验证每个按下的值。

```
 if (window.event)    {
        knum = e.keyCode;
    }
    else if (e.which)    {
        knum = e.which;
    }
    kchar = String.fromCharCode(knum);
    numcheck = /^\d{0,3}$|^\d{0,2}[\.]\d{1}$/;

    alert(numcheck.test(kchar)); 
```

对于任何十进制按键，它都会返回 false。即使我输入 55，然后尝试中间的小数使其变为 5.5，ite 返回 false。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:27:49.940

您至少需要 1 个数字，但最多需要 3 个：`\d{1,3}`

或者

小数点前必须至少有 1 位，但不能超过 2 位，小数点后必须有 1 位：`\d{1,2}[.]\d`

所以这些结合起来：`/(^\d{1,3}$|^\d{1,2}[.]\d$)/`

**更新：**

您正在测试在按键事件中添加的字符，而不是输入字段的完整值。这永远不会有预期的结果。

```
document.getElementById("yourfield").onkeyup = function(e) {

    // the event
    if (!e) e = window.event;

    // determine the target of the keyup event (the input field)
    var targ;
    if (e.target)
       targ = e.target;
    else if (e.srcElement)
       targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
       targ = targ.parentNode;

    // get the value
    kchar = targ.value;
    numcheck = /^\d{0,3}$|^\d{0,2}[\.]\d{1}$/;

    // test
    alert(numcheck.test(kchar));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:47:50.460

试试`/^\d{1,3}|(\d{1,2}\.\d)$/`？

你的角色类不应该逃避句号，所以应该是`[.]`，虽然我更喜欢写只是`\.`因为为一个角色创建一个类是一种浪费。同样，当意味着完全相同的事情时，`\d{1}`是多余的。`\d`我还假设您也不想允许空文本框，所以我写了一些允许 1-3 位数字或 1-2 位数字，一个句点，然后是一个数字。如果这是错误的，您可以将第一个范围更改`\d`回`{0,3}`，这将允许文本框不包含任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T09:29:21.143

使用这个：

```
/^\d{1,3}$|^\d{1,2}[.]\d$/ 
```

# jquery - 如何删除父 tr

> ID：11756230
> 
> 赞同：14
> 
> 时间：2012-08-01T09:20:27.647
> 
> 标签：jquery, jquery-selectors

**更新 1：**

我想知道它是否与正在删除的元素中的按钮有关，所以它最终会删除也删除的按钮？这可能不是问题，我只是在打字，我在想。

我刚刚尝试过：

```
$( "input.btnX" ).click(function(event) {
    alert("test");
}); 
```

而且我没有收到警报...我应该使用`live`还是`on`现在使用，因为按钮和表格是动态生成的。

**原始问题：**

我有一个表（动态生成，所以我不知道它在 tbody 中有多少 tr，看起来像这样：

```
<table>
    <tbody>
        <tr>
            <td>col1</td>
            <td>col2</td>
            <td><input type="button" class="btnX" name="x" value="x" /></td>
        </tr>
        <tr>
            <td>col1</td>
            <td>col2</td>
            <td><input type="button" class="btnX" name="x" value="x" /></td>
        </tr>
    </tbody>
</table> 
```

如果单击 x 按钮，如何删除父 tr？所以在这个例子中，如果底部的 x 被点击，它应该删除底部的 tr。

我试过这个：

```
$( "input.btnX" ).click(function(event) {
    $(this).parent('tr').remove();
}); 
```

但什么也没有发生。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-01T09:22:11.487

只需使用

```
 $( "input.btnX" ).click(function(event) {
    $(this).parent().parent().remove();
}); 
```

或者

```
 $( "input.btnX" ).click(function(event) {
        $(this).closest("tr").remove();
    }); 
```

因为你正在做的是去父母那里是 tr 然后寻找一个 tr

在此处查看示例[http://jsfiddle.net/gYDUF/](http://jsfiddle.net/gYDUF/)

如果您的表格是由 javascript 呈现的，您可能还需要更改您的点击

```
$("input.btnX" ).live(click, function(){

     $(this).closest("tr").remove();
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T09:22:16.750

试试这个：

```
$( "input.btnX" ).click(function(event) {
    $(this).closest('tr').remove();
}); 
```

因为 tr 不是输入元素的直接父级。

编辑：如果表是动态构建的，请尝试使用

```
$( "input.btnX" ).live("click", function(event) {
    $(this).closest('tr').remove();
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-01T10:13:15.180

```
$( "input.btnX" ).on("click", function(event) {
    $(this).closest('tr').remove();
}); 
```

这应该可以完成工作并避免不推荐使用的“.live()”（如前所述）。

另请参阅此[jsfiddle](http://jsfiddle.net/h9DKW/8/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-01T10:40:27.933

jQuery[`.live()`](http://api.jquery.com/live/)方法已被弃用，委托事件处理程序现在应该使用[`.delegate()`](http://api.jquery.com/delegate/)（对于旧版本）或[`.on()`](http://api.jquery.com/on/).

`.on()`用于委托事件的语法是：

```
$(document).on('click','input.btnX', function() {
    $(this).closest('tr').remove();
}); 
```

请注意，`document`此处也可以替换为绑定处理程序时存在的任何静态父元素（未来按钮的）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-01T09:25:07.160

不确定它是否更好，但我使用`parents()`...

```
$('input.btnX').click(function() {
    $(this).parents('tr').remove();
}); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-01T09:23:47.280

首先将 to 更改`id="btnX"`为`class="btnX"`，因为 id 应该是唯一的。

那么你可以这样做：

```
$( "input.btnX" ).live(function(event) {
    $(this).closest('tr').remove();
}); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-03-08T14:36:02.400

首先感谢大家，我想分享并回馈我能够从这个线程解决的错误，我自己的解决方案版本：

**解决方案第 1 步：在我的设置中使用“最接近”而不是父/父（也删除父，所以不适合我）对我有用：**

```
$("#container1").on('click','#remove',function(e) {
    $(this).closest("tr").remove();
}); 
```

**解决方案第 2 步：因为它是 'tr'，所以将您的 javascript 引用 id [ie #container1] 放在 'table' 而不是 'tr' 上，否则会出现设计错误**

```
 <table id="container1"> 
```

**Solution step 3: Don't forget to activiate jquery in your page:**

```
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-01T09:56:00.643

```
$("input.btnX").live("click", function(event) {
    $(this).closest('tr').remove();
});​ 
```

这解决了您的问题，请参阅[这个 jsFiddle](http://jsfiddle.net/h9DKW//3/)，它表明它可以正常工作。

这是一个[更新](http://jsfiddle.net/h9DKW/2/)，显示它与动态表一起使用

# android - BitmapFactory.decodeResource 和 drawable* 文件夹

> ID：11756231
> 
> 赞同：15
> 
> 时间：2012-08-01T09:20:29.380
> 
> 标签：android, bitmap, drawable, android-resources

我想知道是否`decodeResource (Resources res, int id, BitmapFactory.Options opts)`考虑到 drawable-ldpi、mdpi、hdpi 等文件夹。

我检查了源代码，它看起来不像那样，但我可能遗漏了一些东西。

（一般情况下，R.drawable. 在 Android 源中解析在哪里？我找不到它。）

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-01T09:24:06.790

是的，它考虑到了这一点。例如，如果您这样做：

```
Resources res = getContext().getResources();
int id = R.drawable.image; 
Bitmap b = BitmapFactory.decodeResource(res, id); 
```

如果所有可绘制文件夹中都存在“图像”，则位图将有所不同。所以我认为使用重载方法`decodeResource (Resources res, int id, BitmapFactory.Options opts)`将以相同的方式工作。

# resources - 在 java 文件中使用 MonoDroid 生成的资源？

> ID：11756232
> 
> 赞同：1
> 
> 时间：2012-08-01T09:20:29.677
> 
> 标签：resources, xamarin.android

我创建了一个 MonoDroid 库项目并向项目中添加了一些资源。当我在 C# 类中使用这些资源时，它工作正常。（为此，我必须将 and 标记添加到从应用程序项目复制的 .csproj 文件中）。

现在我想使用我在 .java 文件中添加的资源。我添加了 Java 源文件并将构建操作设置为 AndroidJavaSource。不幸的是，我找不到使用 R 命名空间的资源。没有生成包含我的资源的 .java 文件。有没有办法在我的 java 文件中使用 MonoDroid 生成的资源？

背景：我想在我的项目中使用 ActionBar，并考虑在 Library 项目中使用 Android 的 ActionBarCompat 项目（位于 [...]\android-sdk\samples\android-14\ActionBarCompat）作为源文件。那里的 .java 文件使用其 res 文件夹中的布局和其他资源，我也会将其复制过来。我想使用上述方法。如果（目前）不可能，欢迎使用更好的方法回答。（不，请不要将我指向其他 ActionBar 实现，谢谢。这不是问题的范围。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T09:51:42.073

Xamarin 前段时间似乎解决了这个问题。我使用的是旧版本的 MonoDroid，没有时间升级到新版本。这是一种解决方法。

Xamarin.Android 编译器从库文件中链接资源，并在应用项目的 Resources.designer.cs 文件中创建一个名为 UpdateIdValues() 的函数。该函数用于将库项目中的资源 id 固定为最终在主项目中生成的正确 id。出于这个原因，库项目中的资源 ID 被声明为“public static int”，而不是应用程序项目中的“public const int”。

在某些时候，他们忘记了在某个地方实际调用这个函数。因此，Xamarin 开发人员提供了一种解决方法： [http ://forums.xamarin.com/discussion/comment/5816/#Comment_5816](http://forums.xamarin.com/discussion/comment/5816/#Comment_5816)

该解决方法对我有用，当我升级 Xamarin.Studio 时，我可以再次删除该解决方法，因为它应该可以开箱即用。

# haskell - 模板 Haskell 元组更新功能

> ID：11756238
> 
> 赞同：1
> 
> 时间：2012-08-01T09:20:38.413
> 
> 标签：haskell, tuples, template-haskell

是否有函数，或者我如何编写函数`updateTuple`，例如：

```
$(updateTuple 5 (0, 2, 4)) (_ -> 'a', (*2), _ -> 42) (1, 2, 3, 'b', 'c') 
  -> ('a', 2, 6, 'b', 42) 
```

基本上，第一个参数`updateTuple`是要更新的元组的长度，第二个参数是这些元素的索引。它产生一个接受两个元组的函数，第一个是更新函数，第二个是旧元组，并将这些更新函数应用于各自的元素。

我查看了[tuple-th](http://hackage.haskell.org/package/tuple-th)但我找不到任何可以用来轻松实现它的东西。

**编辑：** `$(updateTuple 5 [0, 2, 4])`也可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T10:14:26.603

我有点希望别人回应，但没关系。这是我很快做出的解决方案：

```
module Tuples (updateTuple) where

import Language.Haskell.TH

updateTuple :: Int -> [Int] -> Q Exp
updateTuple len ixs = do
  ixfns <- mapM (newIxFunName . (+1)) ixs
  ixvns <- mapM newIxVarName [1..len]
  let baseVals = map VarE ixvns
      modVals = foldr applyFun baseVals $ ixs `zip` ixfns
  return . LamE [matchTuple ixfns, matchTuple ixvns] $ TupE modVals
  where
    matchTuple = TupP . map VarP
    newIxFunName = newIndexedName "fun"
    newIxVarName = newIndexedName "var"
    newIndexedName prefix = newName . (prefix ++) . show
    applyFun (ix, fn) = modifyElem ix $ AppE $ VarE fn

modifyElem :: Int -> (a -> a) -> [a] -> [a]
modifyElem 0 f (x:xs) = f x : xs
modifyElem n f (x:xs) = x : modifyElem (n - 1) f xs
modifyElem n _ [] = error $ "index " ++ show n ++ " out of bounds" 
```

使用示例：

```
{-# LANGUAGE TemplateHaskell #-}
module Main where
import Tuples

main :: IO ()
main = print $ $(updateTuple 5 [0, 2, 4])
                (\ _ -> 'a', (*2), \ _ -> 42)
                (1, 2, 3, 'b', 'c') 
```

编译（显示生成的代码）：

```
$ ghc -ddump-splices -fforce-recomp main.hs
[1 of 2] Compiling Tuples           ( Tuples.hs, Tuples.o )
[2 of 2] Compiling Main             ( main.hs, main.o )
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
Loading package pretty-1.1.1.0 ... linking ... done.
Loading package array-0.4.0.0 ... linking ... done.
Loading package deepseq-1.3.0.0 ... linking ... done.
Loading package containers-0.4.2.1 ... linking ... done.
Loading package template-haskell ... linking ... done.
main.hs:6:18-40: Splicing expression
    updateTuple 5 [0, 2, 4]
  ======>
    \ (fun1_a1Cl, fun3_a1Cm, fun5_a1Cn)
      (var1_a1Co, var2_a1Cp, var3_a1Cq, var4_a1Cr, var5_a1Cs)
      -> (fun1_a1Cl var1_a1Co, var2_a1Cp, fun3_a1Cm var3_a1Cq,
          var4_a1Cr, fun5_a1Cn var5_a1Cs)
Linking main ... 
```

输出：

```
$ ./main
('a',2,6,'b',42) 
```

**编辑：**使 lambda 中的函数使用与变量相同的索引，这样更有意义。

# jquery - 如何更改 jquery.reel-1.2-bundle 中的加载栏

> ID：11756241
> 
> 赞同：0
> 
> 时间：2012-08-01T09:20:41.887
> 
> 标签：jquery, html

我想更改加载栏的样式 - 我该怎么做？我发现我必须更改JS文件中的css。但我无法自定义我的加载栏。我已经做了一些改变，但它不起作用：

```
 va = function(d) {
    D(C + t(Tb) + t(d), {
        position: Sa,
        width: 0,
        height: 0,
        overflow: jb,
        backgroundImage: url("http://10.200.1.200/bosch_life/life_dev/static/img/layout/loading.png")
        });
        return va["$" + d] = k(T(ra), {
        "class": Tb + C + d
    })
} 
```

请帮帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:30:08.770

I can't load your background file, so I can't see what image you are trying to use.

if you just want to change the color, just look in .js file for the first instance of `backgroundColor: '#000'` and replace it with your new color. (The second instance of `backgroundColor` is for the dot indicator if you choose to display the horizontal/vertical indicator.) I'm using the minified version, and it's on line 35.

The full annotated code is [https://github.com/pisi/Reel/blob/master/jquery.reel.js](https://github.com/pisi/Reel/blob/master/jquery.reel.js) line 1642.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-25T10:40:16.683

**预加载器的高度**可通过 Reel 选项进行配置[`preloader`](http://reel360.org/reel#preloader)，该选项采用数字像素值（`4`默认情况下，`0`完全禁用预加载器进度指示）。

预加载器是使用在样式表之前注入头部的 CSS 样式表来设置样式的，因此只需将您想要的任何 CSS 属性应用于`.reel-preloader`样式表中的类，就可以很容易地进行自定义。

*例如，使预加载器变为红色并粘在图像的顶部而不是底部：*

```
.reel-preloader {
  background: #F00;
  top: 0;
} 
```

**预加载器的宽度**随着从 0% 到 100% 的百分比进度以编程方式增长。

# asp.net - 使用验证器控件验证 asp.net 中的日期字段

> ID：11756242
> 
> 赞同：0
> 
> 时间：2012-08-01T09:20:42.877
> 
> 标签：asp.net, regex, validation, date, comparevalidator

我的页面中有以下**验证器**控件。

```
<asp:CompareValidator ID="cvPatientDateOfBirth" runat="server"
        ControlToValidate="txtPatientDateOfBirth"  
        ErrorMessage="Enter proper date.(DD/MM/YYYY)" 
        Font-Bold="True" Operator="GreaterThan"  Display="Dynamic"
        ValidationGroup="FirstPreview" CssClass="validatorMsg" 
        SetFocusOnError="True" ValueToCompare="1/1/1100" Type="Date" >
    </asp:CompareValidator> 
```

*   当我输入 12/09/1900 时，它正在正确验证。[好的]
*   当我输入 12/09/1009 时，它没有正确验证。[好的]
*   当我输入 12/09/09 时，它正在验证。[不打算]。在这种情况下，我希望它仅在日期年份为 4 位时验证。否则显示错误信息。

如果我同时使用**比较验证器**进行日期类型检查和**正则表达式验证器**进行年（4 位）检查，那么“12/02/198”将显示两个验证器的错误消息。

谁能告诉我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T09:24:21.067

您可以使用 RegularExpressionValidator 并设置`ValidationExpression`

```
ValidationExpression = "\d{1,2}\/\d{1,2}/\d{4}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T04:57:30.843

此正则表达式工作正常

```
^(0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])[- /.](19|20)\d\d$ 
```

# java - 使用 Eclipse IDE 在 weblogic 服务器中发布项目时出错

> ID：11756243
> 
> 赞同：5
> 
> 时间：2012-08-01T09:20:44.763
> 
> 标签：java, eclipse, weblogic

在 WebLogic 服务器（使用 Eclipse IDE）中发布项目时出现以下错误。

```
 Error with publish task 'Split Source Mapping Generation Task'.
 Error processing split source mapping:
 'C:/Projects/EnrollmentWS/implementation/lib'='/WEB-INF/lib'

 WebLogic split source deployment only supports resource folder mapping to EAR or 
 web content root.
 Please change the deployment mode to exploded archive in Server Editor.
 Note: I tried after change deployement mode to explode archive.now im getting 'module
 exception' 
```

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-22T08:09:38.273

可能已经解决了这个问题。我认为出现错误消息是因为部署程序集不支持所有映射。

请右键点击网页项目：

```
Properties -> Deployment Assembly 
```

并删除 /WEB-INF/lib 行。

[这是](https://community.oracle.com/thread/1556828)一个解释：

> 如果您在 Deployment Assembly 中将外部文件夹映射到 Web 资源，则并非所有映射都受支持，拆分源中仅支持映射到 EAR 或 Web 内容根的资源文件夹。（在您的情况下，应该支持映射到“/WEB-INF/classes/”，这是我们将在未来版本中修复的错误）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-29T20:27:01.577

就我而言，在尝试唤醒一个在 Maven 上创建的项目后，我删除了上面说的行`/WEB-INF/web.xml`：

`Properties -> Deployment Assembly`

我的配置在带有*Oracle Web Logic Server Tools的**Spring Tool Suite*上，从 Marketplace 下载，并在使用[Luna OEPE 插件通过 url](http://download.oracle.com/otn_software/oepe/12.1.3.8.1/luna/repository)进行更新后将 WAR 解决方案部署到 WebLogic 12.1.3

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-08T09:35:53.447

按着这些次序.....

> 1.  停止服务器
> 2.  右键单击 Oracle 服务器并转到属性。
> 3.  转到 WebLogic > 发布
> 4.  选择发布为分解档案
> 5.  转到您的域路径
>     
>     
>     
>     ```
>     C:\Oracle\Middleware\user_projects\domains\Domain_Name\servers\AdminServer 
>     ```
>     
>     
> 6.  删除所有“**除了安全性**”。
>     
>     
> 7.  现在重新启动服务器。它会正常工作。*

# asp.net-mvc - 我想在我的 .cshtml 页面上添加 AZ 过滤器。任何人都可以帮我补充一下吗？

> ID：11756245
> 
> 赞同：0
> 
> 时间：2012-08-01T09:20:54.523
> 
> 标签：asp.net-mvc, razor

我想在我的 cshtml 页面上添加 AZ 过滤器。任何人都可以帮我补充一下吗？

我想要索引页面。并且任何人单击 A 然后控制转到带有查询字符串的 A。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T10:44:17.143

你的意思是这样的：

```
<ul>
@for (int i = 65; i < 91; i++)
{
    <li>@Html.ActionLink(((char) i).ToString(), "Index","Home", new {query = (char) i}, null) </li>
}
</ul> 
```

# javascript - 如何按名称获取调用 AJAX.BeginForm'onsuccess 的表单或 div

> ID：11756248
> 
> 赞同：0
> 
> 时间：2012-08-01T09:20:58.010
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-2, ajax.beginform

我在 div 元素中调用了 Ajax.BeginForm，所以我想获取表单所在的 div 元素。即我想要一个等价于

```
function function1(event){
var table = $(event.target).parents("table");
} 
```

可以从 Ajax.beginform 的 onsuccess 函数中使用。有人可以在这里帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:44:09.123

事实证明，在 onsuccess 函数中，“this”指的是表单元素。所以我可以很容易地使用，

```
$(this).find("mydiv"); 
```

或者

```
$(this).parent("table").find("mydiv"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-17T08:10:09.597

MVC4 似乎打破了它。可怕的“这个”现在是 XHR。要解决此问题，请使用这个讨厌的 hack：

```
$(function() {

    var lastEvent = null;
    $("body").on("submit", "form[data-ajax=true]", function(e) {

        lastEvent = e;

    });
    window.TagXhrWithEventTarget = function(xhr) {

        xhr.capturedSubmitEvent = lastEvent;

    }

}); 
```

并以开始形式：

```
@using (Ajax.BeginForm("MyAction", "MyController", new AjaxOptions
{
    HttpMethod = "POST",
    OnSuccess = "ProcessResponse",
    OnBegin = "TagXhrWithEventTarget"
} 
```

然后在 ProcessResponse 中：

```
function ProcessResponse(data, status, xhr) {

    var e = xhr.capturedSubmitEvent;
    var control = e.target;
    . . . 
```

# git - 如何清理提交树中未使用的侧分支？

> ID：11756250
> 
> 赞同：8
> 
> 时间：2012-08-01T09:21:06.520
> 
> 标签：git, git-rebase

您将如何清理提交树中未使用的侧分支（不是真正的 git 分支）？

示例（树、假提交哈希、提交消息、可选 [指针]）：

```
*    0001 last commit [master] [origin/master] [HEAD]
| *  0002 old, unused merge
|/|
* |  0003 some remote commits
* |  0004 another commit from remote
| *  0005 old, unused commits
|/
*    0006 old tree 
```

路径 0001、0003、0004、0006 应该保持不变，但提交 0002 和 0005 没有用，也没有任何好处。如何删除提交 0002 和 0005？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-01T12:18:20.927

[tarsius](https://stackoverflow.com/users/51019/tarsius)[在回答另一个问题](https://stackoverflow.com/a/4528593/131120)时写道：

> ```
> git reflog expire --expire=now --all
> git gc --prune=now 
> ```

这会清除 reflog，然后清理存储库。一开始清理 reflog 并不总是有效，因为`git-gc`只要 reflog 没有过期（默认为 90 天），由 reflog 标记的无意义提交就会保持活动状态。

据我所知，在这样做之后，所有悬空提交都真的消失了。所以人们应该确定一个人真的不再需要所有这些了。如果真的想保留一些悬空提交，可以：

```
git checkout <dangling_commit_id>
git branch <new_branch_name_of_your_choice> 
```

或使用[git format-patch](http://git-scm.com/docs/git-format-patch)将整个提交存储在文本文件中。

# java - 手工编码 GUI 和 Netbeans

> ID：11756253
> 
> 赞同：1
> 
> 时间：2012-08-01T09:21:11.653
> 
> 标签：java

我即将开始学习编写 GUI。现在我知道最好是第一次手动编写代码以掌握这些概念。

我的问题是：我是否需要禁用 Netbeans 中的 GUI 构建器才能执行此操作？查了一下 Netbeans 论坛，但找不到明确的答案。似乎大多数程序员仍然更喜欢手动编码选项。

感谢您的关注

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:22:44.940

不，您不必禁用任何东西。您可以立即开始编写 Swing 代码。

[`HelloWorldSwing`](http://docs.oracle.com/javase/tutorial/uiswing/examples/start/HelloWorldSwingProject/src/start/HelloWorldSwing.java)通过粘贴程序的源代码并运行它自己尝试一下。这是一个缩写版本：

```
import javax.swing.*;        

public class HelloWorldSwing {

    private static void createAndShowGUI() {
        //Create and set up the window.
        JFrame frame = new JFrame("HelloWorldSwing");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Add the ubiquitous "Hello World" label.
        JLabel label = new JLabel("Hello World");
        frame.getContentPane().add(label);

        //Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        //Schedule a job for the event-dispatching thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:24:38.393

Swing 可以在没有任何额外内容的情况下启动，这是一个示例。

```
import javax.swing.JFrame;
import javax.swing.JLabel;

public class HelloWorldFrame extends JFrame {

    //Programs entry point
    public static void main(String args[]) {
        new HelloWorldFrame();
    }

    //Class Constructor to create components
    HelloWorldFrame() {
        JLabel jlbHelloWorld = new JLabel("Hello World");
        add(jlbHelloWorld); //Add the label to the frame
        this.setSize(100, 100); //set the frame size
        setVisible(true); //Show the frame
    }
} 
```

Note: This is the minimal to get it running a Extremely simple version... @aioobe is the more standard approach but requires understanding more concepts :)

# ios - 如何获得十进制键盘

> ID：11756255
> 
> 赞同：1
> 
> 时间：2012-08-01T09:21:25.527
> 
> 标签：ios, xcode

我想以编程方式为 UITextField 显示十进制键盘。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T09:29:26.507

假设这`myTextField`是`IBOutlet`在您的控制器中，您可以在您的`viewDidLoad`方法中执行此操作：

```
self.myTextField.keyboardType = UIKeyboardTypeDecimalPad; 
```

# birt - 如何从内容页面在 BIRT 母版页中设置值？

> ID：11756260
> 
> 赞同：0
> 
> 时间：2012-08-01T09:21:30.177
> 
> 标签：birt

BIRT 报告：

我想在库中定义母版页并将其用作许多报告的基础。母版页仅包括公司徽标、日期、第 x 页（共 y 页）和报告标题的空格。报告标题将由单个报告设置，并且可能包含查询数据。

报表如何在母版页中设置数据？

**澄清**

我想要一个报告（基于母版页）进行查询以获取数据（例如报告标题）并将其传递给母版页。例如，标题包含公司徽标（固定）和标题（动态）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:45:51.697

我所做的是以下。

*   在库中定义新参数，例如 MyHeaderText
*   给参数一个默认值，例如人员列表
*   在报告中包含参数
*   用所需文本覆盖默认值，例如员工 - 按国家/地区分组

为我工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T12:45:50.523

只需将参数传递给母版页，您就可以获得您的值..

# git - git本地并发访问

> ID：11756263
> 
> 赞同：13
> 
> 时间：2012-08-01T09:21:45.520
> 
> 标签：git, concurrency

我正在编写一段代码来包装对 git 存储库的访问（它执行写入/添加/提交并最终推送）

此应用程序对 git 存储库进行并发访问（它是一个 Web 应用程序，多个进程并行运行）。

我想知道我是否应该在 git 操作上添加某种锁定（即互斥锁），或者多个进程并行执行 git add/commit 是否是安全操作

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T09:34:57.460

如果您正在包装官方 git-client （您 - 关于您的评论 - 所做的），您可以依赖它并且不需要自己实现它（再次）。它已经注意到，写入动作看起来是原子的。

# java - 使用 ProcessBuilder 执行进程会导致 waitFor 挂起

> ID：11756267
> 
> 赞同：2
> 
> 时间：2012-08-01T09:21:56.170
> 
> 标签：java, exec

我在用 Java 运行外部应用程序时遇到问题。我知道输入和输出流的问题，我正在尝试按如下方式阅读它们：

```
 ProcessBuilder pb = new ProcessBuilder(args);
    args[args.length - 1] += "<NUL";

    pb.redirectErrorStream(true);
    Process p = pb.start();

    InputStreamReader isr = new InputStreamReader(p.getInputStream());
    BufferedReader input = new BufferedReader(isr);
    while (input.readLine() != null) {
    }       

    p.waitFor();
    input.close();
    isr.close(); 
```

我正在执行的命令是 xdg-open 的 URL，所以它不应该等待输入。

这在我的机器上工作十分之九，但有时它只是挂在 pb.start(); 并且该命令未执行。

java 线程正在等待进程返回。这是堆栈跟踪：

```
Name: LinkHandlerExec
State: WAITING on java.lang.UNIXProcess$Gate@356122dc
Total blocked: 0  Total waited: 1

Stack trace: 
java.lang.Object.wait(Native Method)
java.lang.Object.wait(Object.java:502)
java.lang.UNIXProcess$Gate.waitForExit(UNIXProcess.java:80)
java.lang.UNIXProcess.<init>(UNIXProcess.java:161)
java.lang.ProcessImpl.start(ProcessImpl.java:81)
java.lang.ProcessBuilder.start(ProcessBuilder.java:468) 
```

这是 strace 告诉我的：

```
$ sudo strace -p 13255
Process 13255 attached - interrupt to quit
futex(0x7fbb673e49d0, FUTEX_WAIT, 13262, NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T16:29:58.397

我们还在 CentOS 6.3 JDK 1.6.0_33-b03 上观察到了这样的问题。调查表明，这是在该 Java 进程中发生 OutOfMemoryError 之后发生的。

查看类 java.lang.UNIXProcess 的代码，我想当在 UNIXProcess 构造函数中运行的单独线程中抛出非 IO 异常（例如错误）时，可能会发生此类问题，该线程位于第 109 行和第 130 行之间。此代码最好组织为

```
try {
  .....
} finally {
  gate.exit();
} 
```

, 但它被组织为

```
try {
  ...
} catch (IOException e) {
  gate.setException(e); /*remember to rethrow later*/
  gate.exit();
  return;
}
...
gate.exit(); 
```

，因此非 IO 异常可能导致 gate.exit() 不被调用，这导致主调用者线程在方法 gate.waitForExit() 中永远挂起（第 145 行）。

# scala - 选择 Scala Web 框架

> ID：11756269
> 
> 赞同：40
> 
> 时间：2012-08-01T09:22:00.050
> 
> 标签：scala, playframework, lift, scalatra

我即将开始一个应该在 Tomcat 服务器上运行的 Web 应用程序的项目。我决定选择 Scala——我工作的另一个选择是 Groovy——主要是为了类型安全。我现在面临着为工作选择合适工具的任务。

我需要开发的项目只能通过 JSON API 访问。它将与自己的数据库和两个外部服务交互，这两个服务分别公开一个 JSON 和 XML API。我还需要能够安排定期作业，我的应用程序将使用这些外部服务执行各种同步任务。

对于数据库，我希望能够在 Scala 中定义我的模型并自动生成模式。如果需要更改我的模型，我希望有迁移来处理它。

对于这个应用程序，我正在尝试评估 Lift, Play！2和斯卡拉特拉。

*   **电梯**是我的第一选择。它是三个项目中最成熟的，并且似乎被认为是高度安全的（我不想在安全性上妥协）。此外，它还具有似乎是 Scala 中最好的 JSON 处理库。尽管如此，在涉足它之后，我不确定这是否是正确的选择。该文档并不是我见过的最好的。此外，在我看来，Record + Squeryl 似乎比 Mapper 更好，但这种用法的文档更加稀缺。最后，虽然 Lift 确实可以用于创建 Web 服务，但它的真正优势似乎在于状态处理，因此我不相信我的项目需要额外的复杂性。

*   **玩！2**似乎有更好的文档，对我来说看起来更熟悉（我来自 Django 背景）。同样，它的默认数据库抽象并没有真正让我满意：ANORM 依赖于 SQL，它对类型检查没有帮助。无论如何我都必须使用 Squeryl，我不确定这个用例的文档是否一样好。此外，部署 Play！2 个应用程序目前比我想要的更复杂。一个必须安装播放！在生产服务器上，我不确定这是我工作的选项。否则，有一个插件可以让它与 servlets 容器一起工作，但它是非常新的，我不确定它有多稳定/可靠。

*   最后还有使用**Scalatra**的选项。Scalatra 似乎很容易设置，它的设计正是为了创建 Web 服务。折衷方案是 Scalatra 没有提供太多功能。它没有与现有的 ORM 集成，也没有建议如何组织应用程序的模型部分，也无助于设计 cron 或命令行任务。我也不确定该项目的长期未来。

你认为什么是我的任务的最佳选择？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-01T12:30:58.083

如果您来自 MVC 背景，那么 Play 将是最熟悉的。Lift 不是 MVC，它需要一些时间来理解它。

没有理由不能将 Scala 与基于 Java 的框架（如 Jersey、Spring MVC、[Dropwizard](http://dropwizard.codahale.com/)、Restlet、RESTEasy 等）一起使用。或者您可以将 Scala 与 Grails 一起使用，就像您可以将 Java 与 Grails 一起使用一样。注意 - Groovy 从 2.0 版开始具有类型安全性，因此需要考虑这一点。

如果您正在考虑 Scalatra，请不要忘记[Spray](https://github.com/spray/spray/wiki/)、[Unfiltered](http://unfiltered.databinder.net/Unfiltered.html)、[BlueEyes](https://github.com/jdegoes/blueeyes) ...

请务必查看 Matt Raible[对 Web 框架的全面比较](http://www.slideshare.net/mraible/comparing-jvm-web-frameworks-jfokus-2012)。还有这些其他 SO 问题： [Rest API Server 的 Scala 框架？](https://stackoverflow.com/questions/3678795/scala-framework-for-a-rest-api-server),[如何使用 Akka 实现一个 REST Web 服务？](https://stackoverflow.com/questions/6668999/how-to-implement-a-rest-web-service-using-akka)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-01T09:27:00.060

尽管您已经给了一些候选人，但我向您推荐了 Tim Perrett 的演讲（Lift in Action 的作者，他在其中比较了 scala webframeworks： [http ://skillsmatter.com/podcast/scala/scalable-language-web](http://skillsmatter.com/podcast/scala/scalable-language-web)

# maven - 如何使用 Maven 跟踪 jar？

> ID：11756273
> 
> 赞同：1
> 
> 时间：2012-08-01T09:22:06.390
> 
> 标签：maven, dependencies, dependency-management

我正在使用命令行中的 maven 来构建我的应用程序，并且我获得了构建成功，但是在 eclipse 中我得到了错误：

```
The repository system is offline but the artifact org.codehaus.plexus:plexus-archiver:jar:1.2 is not available in the local repository. 
```

虽然我更新了项目配置和更新依赖项，但我想知道这个 jar 是由哪个插件或依赖项负责的？

以下是我正在使用的插件：

```
<plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>hibernate3-maven-plugin</artifactId>
                <version>2.2</version>
                <executions>
                    <execution>
                        <phase>process-classes</phase>
                        <goals>
                            <goal>hbm2ddl</goal> 
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <components>
                        <component>
                            <name>hbm2ddl</name>
                            <implementation>annotationconfiguration</implementation>
                        </component>
                        <component>
                            <name>hbmdoc</name>
                        </component>
                    </components>
                    <componentProperties>
                        <configurationfile>/target/classes/hibernate.cfg.xml</configurationfile>
                        <outputfilename>CreateTables.sql</outputfilename>
                        <namingstrategy>com.xeno.advertisingsuite.web</namingstrategy>
                        <drop>false</drop>
                        <create>true</create>
                        <export>false</export>
                        <format>true</format>
                    </componentProperties>
                </configuration>
            </plugin>

            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-resources-plugin</artifactId>
                <version>2.5</version>
                <configuration>
                    <encoding>UTF-8</encoding>
                </configuration>
            </plugin>

            <!-- run command: mvn tomcat7:run -->
            <plugin>
                <groupId>org.apache.tomcat.maven</groupId>
                <artifactId>tomcat7-maven-plugin</artifactId>
                <version>2.0-beta-1</version>
                <configuration>
                    <path>/${project.build.finalName}</path>
                </configuration>
            </plugin>

            <!-- run command: mvn 7:run -->
            <plugin>
                <groupId>com.googlecode.t7mp</groupId>
                <artifactId>maven-t7-plugin</artifactId>
                <version>0.9.6</version>
                <configuration>
                    <tomcatHttpPort>8081</tomcatHttpPort>
                    <tomcatShutdownPort>8008</tomcatShutdownPort>
                    <tomcatVersion>7.0.22</tomcatVersion>
                </configuration>
            </plugin>

<plugin>
      <groupId>org.codehaus.mojo</groupId>
      <artifactId>aspectj-maven-plugin</artifactId>
      <version>1.4</version>
      <configuration>
        <complianceLevel>1.6</complianceLevel>
        <encoding>UTF-8</encoding>
        <aspectLibraries>
          <aspectLibrary>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aspects</artifactId>
          </aspectLibrary>
        </aspectLibraries>
        <Xlint>warning</Xlint> 
      </configuration>
      <executions>
        <execution>
          <goals>
            <goal>compile</goal>
            <goal>test-compile</goal> 
          </goals>
        </execution>
      </executions>
    </plugin>

     </plugins> 
```

请告知如何解决这个问题，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T09:50:29.147

尝试通过解决插件依赖关系`mvn dependency:resolve-plugins`- 它将打印 Maven 插件的依赖关系树以输出。

开启调试模式的选项也有很大帮助：`mvn -X`

# linux - 如何在 linux x86_64 上模拟 iret

> ID：11756274
> 
> 赞同：2
> 
> 时间：2012-08-01T09:22:08.760
> 
> 标签：linux, assembly, linux-kernel, x86

我正在编写一个基于 Intel VT 的调试器。

由于 iret 指令在 vmx-guest 中的性能在 NMI-Exiting=1 时发生了变化。所以我应该自己在vmx-host中处理NMI，否则，guest会有nmi reentrant bugs。

我检查了英特尔手册：

> 在执行 NMI 中断处理程序时，处理器会禁用对 NMI 处理程序的额外调用，直到执行下一条 IRET 指令。这种对后续 NMI 的阻塞防止了对 NMI 处理程序的调用堆积。

所以我试图自己在 vmx-host 中模拟一个 iret。CPL 保持 ring0 并保持堆栈和代码段不变。

我在下面写了一个示例代码，它是在 NMI 导致的 vmx-exit 之后：

```
asm volatile(
    "pushfq \n\t"
    "mov %%cs.%%ax \n\t"
    "push  %%rax\n\t"
    "mov $._restart_code,%%rax \n\t"
    "push %%rax \n\t"
    "iret \n\t"/*manully iret in the host before vmx-entry.*/
    "._restart_code:"
    "nop":); 
```

任何人都可以显示一些指南？

# jakarta-ee - Netbeans Java EE 项目在不同机器上具有层

> ID：11756280
> 
> 赞同：3
> 
> 时间：2012-08-01T09:22:24.950
> 
> 标签：jakarta-ee, netbeans, ejb

目标是创建一个简单的 Java EE 6 应用程序，其中 EJB 部署在一台机器上，Web 部件部署在另一台机器上。我正在使用 Glassfish 和 Netbeans 7.2，但我对这两个部分之间的依赖关系感到困惑。

我创建了一个企业应用程序项目，Netbeans 7.2 开始将该项目拆分为一个战争部分和一个罐子部分。由于两者应该部署到两台不同的机器（两台 Glassfish 服务器）中，我在创建第一个 EJB 时使用了 Remote 选项，但 Netbeans 要求我提供一个 Remote Project。我应该创建一个包含远程接口的库吗？而在那种情况下，战争部分应该使用它吗？（似乎war jsf托管bean已经能够导入接口，所以我很困惑）。

我读过的所有 Netbeans 教程都没有在客户端是 Web 应用程序时提到远程接口，而只有在客户端是企业客户端应用程序时才提到。使用 Web 组件和 ejb 组件开发 Java EE 多层应用程序的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T02:23:55.503

是的，您必须为远程接口再创建一个项目，否则您无法调用 EJB

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T19:34:36.640

是的。您需要使用所有必需的（远程）业务接口/异常和旅行对象（TO）创建“EJB 客户端”jar。

如果你使用 maven，你可以在这里找到一个很好的文档，如何创建这样的文档： [https ://maven.apache.org/plugins/maven-ejb-plugin/examples/generating-ejb-client.html](https://maven.apache.org/plugins/maven-ejb-plugin/examples/generating-ejb-client.html)

然后在您的 war/WEB-INF/lib 上仅包含您的应用程序的客户端 jar 和所有其他必需的 jar，但不包含包含您的 EJB 服务实现的 jar。这些部署在另一台机器上的 EAR/lib 文件夹中。client-jar 必须只存在于您的 Web 机器类路径上。

顺便说一句：如果你使用 Maven。查看 GitHub 上的示例 maven 结构： [https](https://github.com/StefanHeimberg/stackoverflow-1134894/) ://github.com/StefanHeimberg/stackoverflow-1134894/ 。这不是“拆分”架构的示例，但我认为它可能是信息性的。或简单地忽略它:)

# smalltalk - Pieradmin 安装错误：缺少类 ImageSegment

> ID：11756281
> 
> 赞同：3
> 
> 时间：2012-08-01T09:22:26.463
> 
> 标签：smalltalk, pharo, seaside

我正在尝试使用以下命令在[Pharo 1.4 (Summer)](http://www.pharo-project.org/pharo-download)的干净映像上安装[Pieradmin](http://pieradmin.seasidehosting.st)：

```
Gofer it
    renggli: 'pier2addons';
    package: 'ConfigurationOfPierAdmin';
    load.

ConfigurationOfPierAdmin loadBleedingEdge. 
```

它进行了一段时间并出现了错误：

```
This package depends on the following classes:
    ImageSegment
You must resolve these dependencies before you will be able to load these definitions: 
    writeKernel:on: 
```

您可以继续，它将完成安装所有依赖项。

我有两个问题：

*   我在哪里可以获得 ImageSegment 类？
*   或者，如果我不能，那么 writeKernel:on: 不存在有关系吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T10:04:13.207

是的，ImageSegment 已从 Pharo 1.4 中删除。并且 ReferenceStream 也从 Pharo 2.0 中删除。这个想法是依靠新的更好的工具，比如 Fuel 序列化程序（参见[http://rmod.lille.inria.fr/web/pier/software/Fuel](http://rmod.lille.inria.fr/web/pier/software/Fuel)）。

Yanni 和我做了两件事：Pier 持久性和基于 Fuel 的内核导出/导入。您可以在以下位置找到代码：

```
Gofer it
    squeaksource3: 'pierfuel';
    package: 'Pier-FuelPersistence-Core';
    package: 'Pier-FuelPersistence-Test';
    load. 
```

然后你可以这样做，例如：

```
 PRFuelExporterImporter new exportKernelNamed: 'pierDBX' toFilename: 'pierDBX.fuel' 
```

和：

```
 PRFuelExporterImporter new importNewKernelNamed: 'pierDBX' fromFilename: 'pierDBX.fuel' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T12:52:31.053

弥敦道，

几乎可以肯定，对 ImageSegment 的依赖来自`Pier-Pharo-Persistency`定义在`ConfigurationOfPier2>>baseline2060:`其中的包，它作为`Core`Pier 组的一部分包含在其中……乍一看，这似乎`Pier-Pharo-Persistency`是 Pier 非常需要的。

您可以摆弄 the`ConfigurationOfPier2>>baseline2060:`并`Pier-Pharo-Persistency`从`Core`组中删除，然后再次尝试加载，但您可能只是为自己制造了另一个更微妙的问题。[在Pier 邮件列表](https://www.iam.unibe.ch/mailman/listinfo/smallwiki)上问这个问题可能是个好主意

OTOH，我很确定它`Pier-Admin`适用于 Pharo-1.3，所以这将是您的最佳选择。

戴尔

# javascript - 使用范围界定“绑定到点击事件”的解释

> ID：11756282
> 
> 赞同：0
> 
> 时间：2012-08-01T09:22:38.537
> 
> 标签：javascript, jquery, html, bind

我有[这个](https://stackoverflow.com/questions/11741922/jquery-class-is-not-responding-to-click-despite-being-listed-within-selectors)问题，但简而言之：我有一个自调用函数`(function TCC() {...})();`，它可以生成两个元素部分，等等。这些元素是用类生成的`btn`。`$('.btn').click(function () {...};`[带有适当的 console.log() ] 的另一个 JQuery 函数显示`btn`除了前面提到的两个部分的元素之外，页面上所有具有类的元素都被单击。

一条评论建议“出现问题是因为您在“列按钮生成器”循环之前绑定了单击事件。”，以及建议的解决方案：

```
$.each(cols, function(i) {...}).done(function(){ //Add click event handler now }); 
```

第一个问题是有人可以详细说明“因为您在“列按钮生成器”循环之前绑定了点击事件。

第二个问题是关于提议的解决方案。由于我有两行单独的代码用于生成，并且`$('btn').on('click', function() {...});`块超过 50 行，如何在不复制代码行的情况下实现解决方案，因为我认为该`.done()`方法需要这个。有问题的页面在[这里](http://specialorange.org/resume)。

*   生成代码相对于的当前作用域结构`.on('click')`如下（对不起，图片，但 StackOverflow 出于某种原因不喜欢这种格式）：

    ![在此处输入图像描述](../Images/b36327634e6d2d4b9357347589225c63.png)

代码生成行的范围是否会影响这一点，如果是这样，我可以将它们从自调用函数中拉出来以修复建议中提到的“绑定到单击事件”吗？

感谢您的帮助和专业知识，因为从头开始学习编程，这些类型的结构课程通常被排除在教科书中经常包含的在线学习工具之外。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T10:02:05.690

你真的应该发布实际的代码。但是不要紧。我认为`click`没有调用您的事件的唯一问题是您使用了不正确的语法。

jQuery的[on 函数](http://api.jquery.com/on/)，语法如下：

**HTML**

```
<div class='button_container'>
    <button> This is a button</button>
    <button> This is a button</button>
</div> 
```

**JavaScript**

```
$('.button_container').on('click', 'button', function(){
    console.log('I have been clicked!');
});
//Note the the second selector 'button' within the declaration 
```

由于该`on`函数基本上替换了`live`and`delegate`函数，因此现在为 中的所有按钮定义了处理程序`div.buttons`，而不管它是何时以及如何创建的（即动态创建的）。这可能有点误导。

如果你做一个简单的选择

```
$('button').on('click', function(){ /* do something **/ }) 
```

jQuery 假设您正在谈论直接事件绑定——即，dom 元素已经加载。它不会影响任何动态创建的元素（请注意，如果您在创建代码之后附加绑定，它仍然可以在这些元素上工作，因为它们已经存在于 DOM 中）。

除非您提供第二个选择器，否则这是默认行为。这有点令人困惑，但继续前进。如果您想在实际创建它们之前定位这些元素，请执行此类操作

```
//Right syntax
$(document).on('click','button', function(){ /* do something **/ })
//This will bind to all buttons 
```

# c# - RadGrid - 重新绑定

> ID：11756287
> 
> 赞同：-1
> 
> 时间：2012-08-01T09:22:55.423
> 
> 标签：c#, telerik, radgrid

我在表单中有一个 Radgrid 和 RadCombobox。在一个函数中，我正在调用一个 forloop。在那个 forloop 中，我正在为网格使用 Rebind 事件。在循环中，第一次去网格的NeedDataSource，从第二次没有发生Needdatasource事件，

当 Combobox 文本更改时，Grid 应该转到 NeedDataSource 事件。请帮忙。

```
for (int a = 0; a < EmpCodecmb.Items.Count; a++)
        {            
            EmpCodecmb.Text = EmpCodecmb.Items[a].Text;
            EmpCodecmb.SelectedValue = EmpCodecmb.Items[a].Value;

        SqlCommand cmd1 = new SqlCommand();
        con.Open();
        cmd1.Connection = con;
        cmd1.CommandType = CommandType.StoredProcedure;
        cmd1.Parameters.Clear();
        cmd1.CommandText = "get_EmpLeaveDetails";
        cmd1.Parameters.AddWithValue("@EmployeeID", EmpCodecmb.SelectedValue);
        cmd1.Parameters.AddWithValue("@SelectedMonth", commonDatetime);
        SqlDataReader sdp1 = cmd1.ExecuteReader();
        while (sdp1.Read())
        {
            CLtxt.Text = sdp1["CL"].ToString();
            ELtxt.Text = sdp1["EL"].ToString();
            LOPtxt.Text = sdp1["LOP"].ToString();
        }
        con.Close();

        Grid1.Rebind();
        Grid2.Rebind();

        Insert_f1();
        Insert_f2();
    }` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T17:09:53.287

我知道这已经有一段时间了，但我认为这可能会有所帮助： http: [//nwije.blogspot.com/2011/04/telerik-radgrid-doesnt-fire.html](http://nwije.blogspot.com/2011/04/telerik-radgrid-doesnt-fire.html)

# spring - Sitemesh 3\. 输出所有body标签属性到布局

> ID：11756289
> 
> 赞同：2
> 
> 时间：2012-08-01T09:22:59.753
> 
> 标签：spring, jakarta-ee, spring-mvc, sitemesh

我有一个页面：

```
<body class="auth_loginForm" controller="auth" action="loginForm" > 
```

以及带有主体的站点网格布局：

```
 <body iamalayout="true" >
    <sitemesh:write property='body'/>
 </body> 
```

有没有办法让正文的属性出现在最后一页上？

那就是最终的 body 标签看起来像：

```
<body iamalayout="true" class="auth_loginForm" controller="auth" action="loginForm" > 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T13:34:04.987

尝试像这样设置布局主体标签：

```
<body iamalayout="true" <decorator:getProperty property="body.class" /> <decorator:getProperty property="body.controller" /> <decorator:getProperty property="body.action" /> > 
```

或者如果它不能正常工作，请尝试为每个 decorator:getProperty 标签附加 writeEntireProperty="true"，例如

```
 <decorator:getProperty property="body.class" writeEntireProperty="true" /> 
```

希望能帮助到你。

[http://wiki.sitemesh.org/wiki/display/sitemesh/Tag+References](http://wiki.sitemesh.org/wiki/display/sitemesh/Tag+References)

# javascript - getItemAtIndex 不是函数错误

> ID：11756291
> 
> 赞同：0
> 
> 时间：2012-08-01T09:23:04.000
> 
> 标签：javascript, xul

我对 xul 和 javascript 有一个奇怪的问题。我有一棵树，里面有多行数据。我必须选择设置为活动列的每一行`"NO"`并为整行更改`background color`。

我的javascript代码是这样的：

```
function markInactive() {

    var tree = document.getElementById('bsTree');
    var treerow;

    for (var i = 0; i < tree.view.rowCount; i++) {

        if (tree.view.getCellText(i, tree.columns.getNamedColumn("bsActive")) == "NO") {

            treerow = tree.view.getItemAtIndex(i);
            treerow.firstChild.setAttribute('style', 'background: #FF0000');

        }  
    }  
} 
```

现在奇怪的部分。这不起作用，因为我的 jsconsole 返回错误，即`getItemAtIndex is not a function`. 我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:07:06.370

我通过构建自己的自定义树视图和编辑树的 getCellProperties 方法解决了这个问题

```
getCellProperties: function (row, col, props) {

    if(tree.view.getCellText(row, tree.columns.getNamedColumn("bsActive")) == "NO"){

          var aserv=Components.classes["@mozilla.org/atom-service;1"].
                    getService(Components.interfaces.nsIAtomService);

          props.AppendElement(aserv.getAtom("makeItRed"));

    }
} 
```

和 CSS：

```
treechildren::-moz-tree-cell(makeItRed){
     background-color: #ff0000;
} 
```

# exception - 使用 Spock 投射空对象的问题

> ID：11756297
> 
> 赞同：1
> 
> 时间：2012-08-01T09:23:29.693
> 
> 标签：exception, grails, groovy, casting, spock

我有一个 Spock 测试，它在两台 Mac OS X Lion 机器上失败，但在其他 Linux 机器和[Spock Web Console](http://meetspock.appspot.com/)上工作。

我发现了另一个相关问题：[为什么在测试我的控制器时出现无法转换对象“null”错误？](https://stackoverflow.com/q/10040162/462015)

我正在使用 Grails 2.0.0 和 Spock 0.6。有什么建议么？似乎是一个错误

```
def "casting null object"() {
    expect:
    null as BigDecimal == null
}

| Failure:  casting null object(com.arturoherrero.MySpec)
|  org.codehaus.groovy.runtime.typehandling.GroovyCastException: Cannot cast object 'null' with class 'org.codehaus.groovy.runtime.NullObject' to class 'java.math.BigDecimal' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:45:22.673

看起来你在[Grails 2.0.0 中遇到了这个错误](http://jira.grails.org/browse/GRAILS-8800)

也就是说，它已针对 Grails 2.0.2 进行了修复，因此可能需要升级您的一台机器以进行检查？

手指交叉！

# ruby-on-rails - 使用 ruby on rails 将图像存储在内存或浏览器缓存中

> ID：11756298
> 
> 赞同：0
> 
> 时间：2012-08-01T09:23:31.347
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

现在在我的 Rails 应用程序中，我存储了一个来自 url 的图像，该图像存储在我的系统**tmp**文件夹中。但问题是我正在使用**heroku**来运行这个 rails 应用程序，那么使用 heroku 运行时存储过程将如何？

```
def mail
@image = https://chart.googleapis.com/chart?chs=150x150&cht=qr&chl=5&choe=UTF-8
path_image = "/tmp/img.png"
open(@image) do |chart|
 File.open(path_image, 'wb') {|f| f.write chart.read }
end
welcome(path_image)
end 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:37:08.813

正如[Heroku 的开发中心](https://devcenter.heroku.com/articles/read-only-filesystem)中所述，您可以将*临时*文件存储在`#{RAILS_ROOT}/tmp/`(Rails 2) 或`Rails.root.join('tmp')`(Rails 3) 目录中。

# c# - 轻松编辑、删除、添加项目到数据网格

> ID：11756301
> 
> 赞同：0
> 
> 时间：2012-08-01T09:23:37.633
> 
> 标签：c#, wpf

我的 WPF 应用程序窗口中有一个数据网格，我必须将其绑定到一个可观察的集合。我必须为用户提供选项，以便能够在此数据网格中编辑、删除、添加和编辑项目。

我在下面做了数据网格的绑定，但想问我如何允许用户轻松地从数据网格中添加、编辑/更新、删除项目。

这是我当前的代码：

**.xaml**

```
<DataGrid x:Name="dgrQuestions" AutoGenerateColumns="False" Height="272" HorizontalAlignment="Left" Margin="42,73,0,0" VerticalAlignment="Top" Width="669" ItemsSource="{Binding QuestionsList}">
      <DataGrid.Columns>                
            <DataGridTextColumn Header="FirstQues" Binding="{Binding Question}"/>
            <DataGridTextColumn Header="SecondQues" Binding="{Binding Answer}"/>
            <DataGridTextColumn Header="ThirdQues" Binding="{Binding Hint}"/>
      </DataGrid.Columns>
</DataGrid> 
```

**.xaml.cs 代码**

```
using Quest; //class having the format of the question

public class Master
{

    private ObservableCollection<Quest> questList;
        public event PropertyChangedEventHandler PropertyChanged;        

        public ObservableCollection<Quest> QuestionList
        {
            get { return questList; }
            set 
            {             
                questList = value;
                if (PropertyChanged != null)
                    PropertyChanged(this, new PropertyChangedEventArgs("QuestionsList"));
            }
        }

    //Add, Edit, Remove, Reset methods required
} 
```

**为其创建对象的类的**.cs 代码（此处仅提及属性）：****

 **```
public string Question
        {
            get { return _question; }
            set{ _question = value; OnPropertyChanged("Question"); }
        }

        public string Answer
        {   get { return _answer; }
            set {_answer = value; OnPropertyChanged("Answer"); }
        }

        public string Hint
        {
            get { return _hint; }
            set { _hint = value; OnPropertyChanged("Hint"); }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:37:40.943

要添加/删除，请确保 CanUserAddRows 和 CanUserDeleteRows 属性设置为 true。然后，用户应该能够通过输入底部的空白行来添加行，并通过选择行并按键盘上的 Delete 来删除行。

To edit rows, the IsReadOnly property must be false (which it is by default).**

# ruby-on-rails - Rails 在我的纯文本邮件中转义 HTML

> ID：11756304
> 
> 赞同：6
> 
> 时间：2012-08-01T09:23:40.347
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, actionmailer, erb

我正在使用 rails 3.2.5`ActionMailer`发送纯文本邮件。鉴于我有这样的邮件视图：

## `message_from_user.text.erb`：

```
Hi <%= @recipient.name %>,

You got the following message from <%= @sender.name %>:

<%= @message %> 
```

什么时候`@message`是`"quotes & ampersands"`，那么纯文本邮件包含`&quot;quotes &amp; ampersands&quot;`. 所以看起来 Rails 只是将其视为 HTML 视图并转义任何 html 以防止跨站点脚本。然而，这是一封纯文本邮件。扩展是`.text.erb`并`ActionMailer`检测到这一点并将 MIME 设置为`text/plain`. 所以我永远不想逃避其中的任何html。

我的应用程序中有很多邮件模板，它们都是纯文本。我会考虑修补所有这些以包含`<%=raw @message%>`或`<%= @message.html_safe %>`不好的样式 -*不是很干燥*。

我尝试了各种变通方法，包括修补 Erubis 的钱。它们似乎都不起作用。我正在寻找一些补丁或配置选项或任何禁用所有`.text.erb`文件转义 html 的东西。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T16:04:32.887

通过 Erubis 代码调试几个小时后，我找到了以下修复。您可以将其放入`config/initializers/fix_my_mails.rb`. 我已经用 rails 3.2.7 对此进行了测试。它可能适用于其他版本。

```
module ActionView
  class Template
    module Handlers
      class ERB
        def call(template)
          if template.source.encoding_aware?
            # First, convert to BINARY, so in case the encoding is
            # wrong, we can still find an encoding tag
            # (<%# encoding %>) inside the String using a regular
            # expression
            template_source = template.source.dup.force_encoding("BINARY")

            erb = template_source.gsub(ENCODING_TAG, '')
            encoding = $2

            erb.force_encoding valid_encoding(template.source.dup, encoding)

            # Always make sure we return a String in the default_internal
            erb.encode!
          else
            erb = template.source.dup
          end

          self.class.erb_implementation.new(
            erb,
            :trim => (self.class.erb_trim_mode == "-"),
            :escape => template.identifier =~ /\.text/ # only escape HTML templates
          ).src
        end
      end
    end
  end
end 
```

它只是禁用`.text`文件名中包含的每个 erb 文件中的 HTML 实体。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-01T09:32:54.400

尝试

```
<%= @message.html_safe %> 
```

如果您使用了搜索功能，您就会找到这个答案。如果这不符合您的需求，也许检查

[https://rails.lighthouseapp.com/projects/8994/tickets/4858-actionmailer-is-html-escaping-ampersand-in-urls-in-plain-text-messages](https://rails.lighthouseapp.com/projects/8994/tickets/4858-actionmailer-is-html-escaping-ampersand-in-urls-in-plain-text-messages)

如果您还没有看到，那里会讨论一些选项

# asp.net - 您在控制器中测试的内容是什么？

> ID：11756305
> 
> 赞同：0
> 
> 时间：2012-08-01T09:23:42.810
> 
> 标签：asp.net, asp.net-mvc, unit-testing

假设您的控制器中有一个注册操作。

```
 [HttpPost]
    public ViewResult Register(string username, string email, string password, string repeatPassword) 
```

该行动将：

1.  检查和验证参数
2.  通信并将新数据添加到存储库
3.  返回一个视图。

肯定需要对 1 和 3 进行单元测试，但是 2 呢？有什么方法可以对 2 进行单元测试，而不必在存储库中实现 add 方法？

谢谢，

温迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:57:05.297

您使用 Moq 对 #2 的测试将是：

```
[Test]
public void UserIsAddedToRepository()
{
    // arrange
    var username = "user1";
    var email = "email@address";
    var password = "password";
    var controller = new LoginController();
    var mockUserRepo = new Mock<IUserRepo>();
    mockUserRepo.Setup(m => m.AddNewUser(username, email, password));

    // act
    controller.Register(username, email, password, "");

    // assert
    mockUserRepo.Verify(m => m.AddNewUser(username, email, password));
} 
```

Moq 的*Verify*将像 NUnit *Assert*一样运行，如果未调用预期的方法，则测试将失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:25:14.677

In order to test number 2, you can use mocking. You can mock your repository and return valid result for the test.

You can do the mock manually (in several ways, for example pass a parameter to the action method with the relevant repository - real or mock; or instantiate the controller class with the relevant mock object etc.) or you can use a mocking library like [Moq](http://code.google.com/p/moq/).

# php - SonataNewsBundle 中缺少“format_date”Twig 过滤器

> ID：11756313
> 
> 赞同：0
> 
> 时间：2012-08-01T09:24:08.123
> 
> 标签：php, symfony-sonata, symfony-2.1

我刚刚安装了 SonataNewsBundle。我在尝试访问 _http://localhost/news 时遇到了这个异常：

```
The filter "format_date" does not exist. Did you mean "format_file" in SonataNewsBundle:Post:archive.html.twig at line 20 
```

问题是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:15:08.217

我更改`format_date`为`date`在 archive.html.twig、view.html.twig、comment.html.twig 并且它的作品

# java - jsp中Crystal Report 11的数据库登录屏幕后出现空指针异常

> ID：11756316
> 
> 赞同：1
> 
> 时间：2012-08-01T09:24:10.743
> 
> 标签：java, jsp, crystal-reports, crystal-reports-xi

下面是我在jsp中的代码。当我运行应用程序并尝试查看报表时，水晶报表查看器会弹出数据库登录窗口。当我提供用户名和密码时，它会引发空指针异常。可能是什么问题？帐号、起始日期、截止日期参数不为空。

```
<%@page import="com.crystaldecisions.sdk.occa.report.application.ReportClientDocument"%>
<%@page import="com.crystaldecisions.sdk.occa.report.application.DatabaseController"%>
<%@page import="com.crystaldecisions.sdk.occa.report.application.DBOptions"%>
<%@page import="com.crystaldecisions.sdk.occa.report.exportoptions.ReportExportFormat"%>
<%@page import="com.crystaldecisions.sdk.occa.report.exportoptions.ExportOptions"%>
<%@page import="com.opensymphony.xwork2.ActionContext"%>
<%@page import="java.text.SimpleDateFormat"%>
<%@ page import="com.crystaldecisions.report.web.viewer.*" %>
<%@ page import="com.crystaldecisions.sdk.occa.report.data.*"  %>
<%@page import="com.crystaldecisions.sdk.occa.report.reportsource.*"%>
<%@page import="com.crystaldecisions.sdk.occa.report.lib.*" %>

<%@page import="java.io.*"%>

<%@page contentType="text/html"%>
<%@page pageEncoding="UTF-8"%>

<%

    try {
        String account = ActionContext.getContext().getSession().get("account").toString();
        String frm_date = ActionContext.getContext().getSession().get("frm_date").toString();
        String to_date = ActionContext.getContext().getSession().get("to_date").toString();

        //System.out.println("From report Viewer "+account+" "+frm_date+" "+to_date);

        String reportName = "rpt_dp_customer_estmt1.rpt";
        File reportFile = new File(reportName);
        System.out.println("Path: " + reportFile.getAbsolutePath());
//check to see if the report source already exists
        Object reportSource = null; //session.getAttribute("reportSource");
//if the report source has not been opened
        //if (reportSource == null) {
//---------- Create a ReportClientDocument -----------
        ReportClientDocument oReportClientDocument = new ReportClientDocument();
//---------- Set the path to the location of thereport soruce -------------
//Open report.

        oReportClientDocument.open(reportName, 0);

        //parameters
        //}
        Fields fields = new Fields();

        ParameterField acc = new ParameterField();
        Values a_vals = new Values();
        ParameterFieldDiscreteValue acc_field = new ParameterFieldDiscreteValue();
        acc.setName("I_ACCT_NO");
        acc.setReportName("");
        acc_field.setValue(account);
        a_vals.add(acc_field);
        acc.setCurrentValues(a_vals);

        String fr_date = "07/07/2001";
        SimpleDateFormat ft = new SimpleDateFormat("mm/dd/yyyy");

        ParameterField f_date = new ParameterField();
        Values f_date_vals = new Values();
        ParameterFieldDiscreteValue f_date_field = new ParameterFieldDiscreteValue();
        f_date.setName("I_START_DATE");
        f_date.setReportName("");
        f_date_field.setValue(ft.parse(frm_date));
        f_date_vals.add(f_date_field);
        f_date.setCurrentValues(f_date_vals);

        String tr_date = "07/07/2012";

        ParameterField t_date = new ParameterField();
        Values t_date_vals = new Values();
        ParameterFieldDiscreteValue t_date_field = new ParameterFieldDiscreteValue();
        t_date.setName("I_END_DATE");
        t_date.setReportName("");
        t_date_field.setValue(ft.parse(to_date));
        t_date_vals.add(t_date_field);
        t_date.setCurrentValues(t_date_vals);

        fields.add(acc);
        fields.add(f_date);
        fields.add(t_date);

        //infos go here
        final String DBUSERNAME = "ESTATEMENT";
        final String DBPASSWORD = "estatement";

        final String CONNECTION_STRING = "!oracle.jdbc.driver.OracleDriver!jdbc:oracle:thin:ESTATEMENT/estatement@192.168.100.240:1521:RUBIKON";
        final String TRUSTEDCON = "false";
        final String PREQESERVERNAME = "192.168.100.240";
        final String SERVERTYPE = "JDBC (JNDI)";
        final String DATABASE_DLL = "crdb_jdbc.dll";
        final String DATABASE = "FINCALIVE";
        final String DBCLASSNAME = "oracle.jdbc.driver.OracleDriver";
        final String USEJDBC = "true";
        final String DATABASE_NAME = "FINCALIVE";
        final String SERVERNAME = "192.168.100.240:1521:RUBIKON";
        final String CONNECTIONURL = "jdbc:oracle:thin:ESTATEMENT/estatement@192.168.100.240:1521";
        final String SERVER = "192.168.100.240:1521:RUBIKON";
//Open report.

// Set DB Username and Password

        oReportClientDocument.getDatabaseController().logon(DBUSERNAME, DBPASSWORD);

// Create the two connectioninfo objects to use
        IConnectionInfo oldConnectionInfo = new ConnectionInfo();
        IConnectionInfo newConnectionInfo = new ConnectionInfo();

        // Assign the old Connection info to the reports current info
        DatabaseController dbController = oReportClientDocument.getDatabaseController();
        oldConnectionInfo = dbController.getConnectionInfos(null).getConnectionInfo(0);

        // If this connection needed parameters, we would use this field. 
        Fields pFields = null;

        // Create a new propertybag for the new location
        PropertyBag boPropertyBag1 = new PropertyBag();

// Set new table logon properties
        boPropertyBag1.put("URI", CONNECTION_STRING);
        boPropertyBag1.put("Trusted_Connection", TRUSTEDCON);
        boPropertyBag1.put("PreQEServerName", PREQESERVERNAME);
        boPropertyBag1.put("Server Type", SERVERTYPE);
        boPropertyBag1.put("Database DLL", DATABASE_DLL);
        boPropertyBag1.put("Database", DATABASE);
        boPropertyBag1.put("Database Class Name", DBCLASSNAME);
        boPropertyBag1.put("Use JDBC", USEJDBC);
        boPropertyBag1.put("Database Name", DATABASE_NAME);
        boPropertyBag1.put("Server Name", SERVERNAME);
        boPropertyBag1.put("Connection URL", CONNECTIONURL);
        boPropertyBag1.put("Server", SERVER);
        boPropertyBag1.put("Use JDBC", "true");

// Assign the properties to the connection info
        newConnectionInfo.setAttributes(boPropertyBag1);

// Set the DB Username and Pwd
        newConnectionInfo.setUserName(DBUSERNAME);
        newConnectionInfo.setPassword(DBPASSWORD);

// The Kind of connectionInfos is SQL
        newConnectionInfo.setKind(ConnectionInfoKind.SQL);

// set the parameters to replace.
// The 4 options are:
// _doNotVerifyDB
// _ignoreCurrentTableQualifiers
// _mapFieldByRowsetPosition
// _useDefault 
        int replaceParams = DBOptions._ignoreCurrentTableQualifiers + DBOptions._doNotVerifyDB;

// Now replace the connections 
        dbController.replaceConnection(oldConnectionInfo, newConnectionInfo, fields, replaceParams);

        oReportClientDocument.getDatabaseController().replaceConnection(oldConnectionInfo, newConnectionInfo, fields, replaceParams);

        System.out.println("Connection Replaced");
        ReportExportControl exporter = new ReportExportControl();

// set the report source
        reportSource = oReportClientDocument.getReportSource();
        exporter.setReportSource(reportSource);

        ExportOptions exportOptions = new ExportOptions();
        exportOptions.setExportFormatType(ReportExportFormat.PDF);
        exporter.setExportOptions(exportOptions);
        exporter.setParameterFields(fields);
// tell the viewer to display the report
        exporter.processHttpRequest(request,
                response,
                getServletConfig().getServletContext(),
                null);
        //create the CrystalReportViewer object
        /*CrystalReportViewer oCrystalReportViewer = new CrystalReportViewer();

        //Get the report source
        reportSource = oReportClientDocument.getReportSource();

        //set the reportsource property of the viewer
        oCrystalReportViewer.setReportSource(reportSource);
        //set viewer attributes
        oCrystalReportViewer.setOwnPage(true);

        //set the CrystalReportViewer print mode
        oCrystalReportViewer.setPrintMode(CrPrintMode.ACTIVEX);

        oCrystalReportViewer.setParameterFields(fields);

        oCrystalReportViewer.setEnableParameterPrompt(true);
        //refresh the CrystalReportViewer if necessary (only required once)
        if (session.getAttribute("refreshed") == null) {
        oCrystalReportViewer.refresh();
        session.setAttribute("refreshed", "true");
        }

        oCrystalReportViewer.setZoomFactor(100);
        oCrystalReportViewer.processHttpRequest(request, response,
        getServletConfig().getServletContext(), null);*/
    } catch (ReportSDKException e) {
        out.print(e);
    }
%> 
```

* * *

## 堆栈跟踪是

```
 WARNING: StandardWrapperValve[jsp]: PWC1406: Servlet.service() for servlet jsp threw exception
java.lang.NullPointerException
    at org.apache.jsp.reportViewer_jsp._jspService(reportViewer_jsp.java:80)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:111)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:403)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:492)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:378)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:88)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:428)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.displaytag.filter.ResponseOverrideFilter.doFilter(ResponseOverrideFilter.java:125)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
    at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:330)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:174)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

# sql - sql server 转换失败

> ID：11756319
> 
> 赞同：0
> 
> 时间：2012-08-01T09:24:18.267
> 
> 标签：sql, sql-server

我正在查询一个数据库，其中出现以下异常：

> 将 varchar 值“B6UJ978023EC”转换为数据类型 int 时转换失败

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T09:33:29.380

我的猜测是您的查询看起来像这样：

```
select * from mytable where SomeField = 'B6UJ978023EC' 
```

如果是这种情况，`SomeField`则被声明为`INT`数据类型，并且 Sql Server 正在尝试转换`'B6UJ978023EC'`为`INT`不起作用的数据类型。

您可能正在尝试进行插入/更新，因此如果 SomeField 是 INT，这也不起作用。

```
update mytable
  set SomeField = 'B6UJ978023EC'
where something = something

insert mytable (field1, field2, SomeField)
values(123, 'abc', 'B6UJ978023EC') 
```

结果相同，将 varchar 值“B6UJ978023EC”转换为数据类型 int 时转换失败

在这种情况下，要么更改列的数据类型，要么更改变量的值。

**更新**：

如果您的列的数据类型是`(N)VARCHAR`但包含一些实数，那么您可以简单地在您要查找的数字周围添加单引号。

```
-- works
select * from mytable where SomeField = '123456'

-- doesn't work - same error
select * from mytable where SomeField = 123456 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:31:32.150

试试这个：

错误是因为您试图将字符值转换为整数值。只需将以下条件添加到查询中，以便它只选择整数值

```
where  ISNUMERIC(col+ '.0e0')=1 
```

# delphi - 为什么我们使用单位中的最终确定？

> ID：11756321
> 
> 赞同：12
> 
> 时间：2012-08-01T09:24:25.520
> 
> 标签：delphi

我想知道如果我们想在关闭应用程序时销毁某些东西，为什么要使用“Finalization”？不关闭应用程序直接释放所有对象而不调用.Free？

谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-01T09:28:45.290

> 关闭应用程序不会直接释放所有对象而不调用`Free`吗？

不，Delphi 类实例不会被垃圾收集，因此需要手动销毁它们。

但是，如果您正在谈论一个可执行进程，那么不处置某些对象是完全可以接受的，因为当该进程终止时，操作系统将重新声明该进程拥有的所有资源。因此，即使 Delphi 析构函数不运行，操作系统也会在进程终止时整理所有内容。进程一旦终止就不可能*泄漏任何系统资源。*

请注意，如果该单元包含在 DLL 或包中，那么如果该 DLL 重复加载和卸载到单个进程中，那么在完成时未能销毁所有对象将导致内存泄漏。

如果您知道您的代码只在可执行文件中运行，那么在最终确定时不要随意使用`Free`对象。请注意，如果您使用的是内存泄漏检测工具，那么这样做会导致您故意泄漏的对象被视为内存泄漏。通过调用来处理[`RegisterExpectedMemoryLeak`](http://docwiki.embarcadero.com/Libraries/en/System.RegisterExpectedMemoryLeak)。

最后要说明的一点是，对象的析构函数有时不仅仅是释放内存。例如，有时它可以将值保存到设置文件或注册表中。自然地，您不想省略为这样的对象运行析构函数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T07:33:35.857

添加到大卫赫弗曼回答的最后一点：可能需要正确释放其他资源，例如生成校验和的文件处理程序或连接到 PC 的某些硬件必须置于特定状态（例如激光关闭，这是我目前正在使用的）。

# asp.net-mvc-3 - 如何解决 NullReferenceException

> ID：11756326
> 
> 赞同：-1
> 
> 时间：2012-08-01T09:24:51.007
> 
> 标签：asp.net-mvc-3

我收到以下异常：

```
Exception Details: System.NullReferenceException: Object reference not set to an instance of an    object.

Source Error: 
Line 34:                 <div>
Line 35:                     @Html.LabelFor(m => m.accountStatus)
Line 36: (HERE)              @Html.DropDownListFor(m => m.accountStatus, Model.accStat) 
Line 37:                 </div>
Line 38:         </fieldset> 
```

以下是我正在使用的模型。我在我的模型中创建了一个 List 属性。我在我的 Html.DropDownListFor 助手中引用它。但我得到了例外。

```
public class OperatorModel
{
    [Required]
    [Display(Name = "Account ID")]
    public string accountID { get; set; }

    [Required]
    [Display(Name = "Account Name")]
    public string accountName { get; set; }

    [Required]
    [Display(Name = "Password")]
    public string password { get; set; }

    public List<SelectListItem> accStat
    {
        get
        {
            List<SelectListItem> lst = new List<SelectListItem>();
            lst.Add(new SelectListItem { Text="ACTIVE", Value="0", Selected=true });
            lst.Add(new SelectListItem { Text="DEACTIVATED", Value="1" });
            return lst;
        }
    } 
```

**编辑**

以下是我的控制器代码：

```
public class AdministratorController : Controller
{
    //
    // GET: /Administrator/

    public ActionResult Index()
    {
        return View();
    }

    public ActionResult Create()
    {
        return View();
    }

    public ActionResult Read()
    {
        return View();
    }

    public ActionResult Update()
    {
        return View();
    }

    public ActionResult Disable()
    {
        return View();
    }

    public ActionResult Enable()
    {
        return View();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T10:20:56.673

您必须将 OperatorModel 从您的操作传递给视图：

例如：

```
 return View(new OperatorModel()); 
```

# c# - Azure instance - my direct changes were lost

> ID：11756336
> 
> 赞同：0
> 
> 时间：2012-08-01T09:25:28.360
> 
> 标签：c#, asp.net, deployment, azure

I have a small production instance on Azure for my web app. To quickly make changes to the live site, I open the instance via RDC and copy across any dlls and files that need to be added. That seemed to be working fine.

However, last night, the instance seemed to have been reset (I'm still investigating why) and the version of the site was rolled back to a month or so ago.

I have read on StackOverFlow that any changes made via RDC are not saved when an instance reset is performed by Microsoft and that it rolls back to the previous Publish.

Surely there has to be a quicker way to make changes to a production instance than having to Publish the app each time? Each Publish takes approximately 45 minutes. If I'm making multiple deployments per day then is there a better solution?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:37:41.500

不，所有更改都必须发布。Microsoft 保证会有一个工作实例，但不保证它将是同一个实例。

我们一直在寻找其他解决方案，但现在只发布更改。但我们可能很幸运能浪费 10 分钟来发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:58:03.247

您可以查看以下几件事：

1.  ***.cspkg**文件的大小。尝试缩小 *.cspkg 文件以减少上传时间。例如，您可以将图像、视频等静态文件存储在 blob 存储中。
2.  使用将所有文件从 blob 容器同步到 IIS 网站的同步机制。如果您使用它，您可以简单地将文件复制到 blob 存储以更新您的实例。请注意，您需要考虑一些事情，例如您的启动任务会发生什么，滚动升级会怎样……？史蒂夫为此写了一篇很棒的博文：[通过与 Blob 存储同步，在几秒钟内更新您的 Windows Azure 网站](http://blog.smarx.com/posts/update-your-windows-azure-website-in-just-seconds-by-syncing-with-blob-storage)（这使用 WorkerRole 而不是 WebRole）
3.  转到 Windows Azure 网站，这允许您使用 FTP、[Git等](https://www.windowsazure.com/en-us/develop/net/common-tasks/publishing-with-git/)**立即**部署...

# c++ - How do you assign value to char[] in heap?

> ID：11756337
> 
> 赞同：0
> 
> 时间：2012-08-01T09:25:28.033
> 
> 标签：c++, c

I got a _CrtIsValidHeapPointer error with my code. And I finally find out what caused the trouble.
I use the example below to illustrate it:

```
char* c=(char*)malloc(20*sizeof(char));
//cout<<&c<<endl;
c="hello world";
//cout<<&c<<endl;  //if you uncomment the 2 clauses,you'll see the address is the same
                                  //which means the string literal is in the heap
cout<<c<<endl;
free(c); 
```

1) It seemed that spaces used by string literals can't be freed? Why?

2)What't the method do you use to assign valee to array of char?
ps: I use `sprintf(c,"hello world");` that works fine. But any better way?

* * *

After read the answers. I realize that I misunderstand the meaning of &c.
I should use `printf("%p\n",c);` instead.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T09:26:30.883

You should copy the string using `strcpy`.

The assignment `c="hello world"` doesn't copy the contents of the string, but assigns the address of the string literal to the pointer c. When you call `free(c)` afterwards, the pointer is not a valid heap address any more.

> //if you uncomment the 2 clauses,you'll see the address is the same

What you see is not the *value* of pointer `c`, but the *address* of the pointer, which is obviously the same.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-01T09:27:24.807

You need to use [`strcpy`](http://linux.die.net/man/3/strcpy), or a safer version `strncpy`. Note that with `strncpy`, you have to NUL-terminate the string yourself in case there was not enough space.

Examples:

```
char *some_other_string = ...;
int len = strlen(some_other_string);
char *c = malloc((len + 1) * sizeof(*c));
if (c == NULL)
    // handle error

strcpy(c, some_other_string);

free(c); 
```

Note that in this case, we know there is enough space in `c`, so we can use `strcpy`. If we don't know, you can cut the string up to where you can handle it:

```
char *some_other_string = ...;
char *c = malloc((MAX_LEN + 1) * sizeof(*c));
if (c == NULL)
    // handle error

strncpy(c, some_other_string, MAX_LEN);
c[MAX_LEN] = '\0';

free(c); 
```

Note that in the case of `strncpy`, if there is not enough space, the string is not NUL-terminated and you have to do it manually.

* * *

Side note:

`&c` is the address of variable `c`. It has nothing to do with its contents, so no matter what you do with `c`, `&c` will not change.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T09:27:29.313

```
c = "hello world"; 
```

You are modidying the `c` pointer to the pointer to the `"hello world"` string literal. This does not copy the string but just modify the `c` pointer. You have to use the `strcpy` function to copy a string in an array of `char`.

```
strcpy(c, "hello world"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T09:33:51.043

如果您使用该语言的 C++ 部分，这一切都由`std::string`C++ 标准库中的 处理。

```
std::string c = "hello world"; 
cout << c << endl; 
```

完毕！

您不必手动管理任何内容。

# jsp - Jsp:forward redirection

> ID：11756340
> 
> 赞同：2
> 
> 时间：2012-08-01T09:25:32.497
> 
> 标签：jsp, forward

I have a page called `story.jsp` (this is the parent page) & in `story.jsp`, based on certain condition I am forwarding (using `jsp:forward`) the page to some other story page path like `../business/story.jsp`.

So in this scenario please let me know, whether the response again comes to the parent page or it will execute the `../business/story.jsp` & serve to the browser
or
it will come to the parent `story.jsp` & execute its contents as well.

I am totally confused please help me.

Please let me know the details.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T10:27:18.240

顾名思义，当您执行`forward`( ) 时，它将转发请求，即终止当前页面的执行并将所有控制权转移到它已转发到的下一个 jsp。所以浏览器只会提供你的内容。`jsp:forward``story.jsp``../business/story.jsp`

其中，如果您执行`include`( `jsp:include`)，则顾名思义，在执行包含的页面后，控件将转移回您的父页面，即浏览器将提供两个 JSP 的内容。

# java - Reading InputStream from Java Interactive Process using ProcessBuilder

> ID：11756342
> 
> 赞同：0
> 
> 时间：2012-08-01T09:25:36.693
> 
> 标签：java, inputstream, interactive, processbuilder

I am trying to run an interactive executable from Java application using ProcessBuilder; it's supposed to take input, produce output and then wait for the next input. The main problem here with Input/Output streams. I send an input and get nothing. Here is the code:

```
private static Process process;
private static BufferedReader result;
private static PrintWriter input;

process = new ProcessBuilder("compile-lm", lmFile.toString(), " --score yes").redirectErrorStream(true).start();

input = new PrintWriter(new OutputStreamWriter(process.getOutputStream()), true);
input.println(message);
System.out.println(message);

result = new BufferedReader(new InputStreamReader(process.getInputStream()));
String line = new String();

while ((line = result.readLine()) != null)
{

/* Some processing for the read line */

System.out.println("output:\t" + line);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:02:50.463

我已经尝试过您的代码，它工作正常，代码没有问题。我认为您尝试执行的命令存在问题（它什么都不返回）。尝试更改参数甚至更改整个命令进行测试。如果您可以在其他地方执行命令（例如终端尝试它并查看具有相同参数的输出）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:42:09.367

我已经多次使用过类似的设置，但现在找不到工作副本:(我的第一反应是将初始化阅读器（结果变量）的行移到将命令发送到的行之前进程（input.println（消息））。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T11:01:02.497

尝试关闭进程的输出流。基本上，您受子进程输出端发生的任何缓冲的支配。

# iphone - int++ 递增 4

> ID：11756344
> 
> 赞同：3
> 
> 时间：2012-08-01T09:25:41.770
> 
> 标签：iphone, objective-c, ios, int

这是我的代码：

```
- (IBAction)NextTouched:(id)sender {
    NSLog(@"Index = %i", index);
    if([project getCount]>(index++)) {
        [self setUI:index];
    }
} 
```

索引是一个整数，如我的 .h 文件中所声明的：

```
@property (nonatomic) int *index; 
```

但是每次我点击按钮时，日志都会显示整数增加了 4。你能告诉我为什么吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-01T09:33:03.160

它上升 4 的原因是因为`index`是一个*指针*。当你增加一个指针时，它的值会增加它指向的数据类型的大小，在本例`int`中是 4 个字节。

鉴于`index`似乎是一个`NSArray`（或其他一些集合类）的索引，我认为你想做到这一点`int`而不是`int *`解决你的问题。最好还是让它无符号，比如`NSUInteger`，这是从`count`方法返回的类型。

另外我认为你会想要使用前缀增量而不是后缀增量，以便`if`测试使用新增加的值，而不是以前的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:50:33.767

只需将 index 定义为**整数变量**而不是**指针**，如果要在递增之前打印值，请使用 index++ 否则使用 ++index 递增值然后打印

# iphone - 提交按钮的长度与 iPhone 模拟器中的输入字段的长度不同

> ID：11756345
> 
> 赞同：2
> 
> 时间：2012-08-01T09:25:46.913
> 
> 标签：iphone, html, css, ios, webkit

我希望我的文本字段和按钮跨越屏幕的整个大小，但是即使它们使用相同的 CSS 选择器，文本字段和按钮的长度也不相同。

这是代码：http: [//jsfiddle.net/AakN4/2/](http://jsfiddle.net/AakN4/2/)

在野生动物园中，差异不大，但仍然可见。

## 结果

Left 定义了像素宽度
Rigth，宽度为 100%（文本字段的长度应与按钮的长度相同）。

[http://i.minus.com/jUbh0W0aVWFMl.png](http://i.minus.com/jUbh0W0aVWFMl.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T09:34:37.107

为您的输入定义**box-sizing 。**像这样写：

```
input {
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    font-size: 15pt;
    width: 150px;
} 
```

检查这个[http://jsfiddle.net/AakN4/4/](http://jsfiddle.net/AakN4/4/)

差异的原因是默认情况下`input type="submit"`工作`box-sizing`。它完全包含在其中并`padding & border`完全添加。`width``input type="text"``padding & border``width`

# wpf - get value for a resource from another resource in XAML

> ID：11756347
> 
> 赞同：1
> 
> 时间：2012-08-01T09:26:02.307
> 
> 标签：wpf, xaml, resources, staticresource

I want SystemColors.ControlBrushKey to have same color as SystemColors.HighlightBrushKey. How do I specify it in XAML? I've tried:

```
<SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="{StaticResource SystemColors.HighlightBrushKey}"/> 
```

But it throws an exception: *"Cannot find resource named 'SystemColors.HighlightBrushKey'. Resource names are case sensitive.".* Then I've tried:

```
<SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="{StaticResource {x:Static Member=SystemColors.HighlightBrushKey}}"/> 
```

And the exception is: *'#FF3399FF' is not a valid value for property 'Color'.* After that I've tried:

```
<SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="{x:Static Member=SystemColors.HighlightBrushKey}"/> 
```

And I've also got an error: *"'HighlightBrush' is not a valid value for property 'Color'."*

So how do I specify it correctly?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:38:34.510

```
<SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}"
                 Color="{DynamicResource {x:Static SystemColors.HighlightColorKey}}"/> 
```

# c# - Validating event not fired for child controls of picturebox

> ID：11756349
> 
> 赞同：0
> 
> 时间：2012-08-01T09:26:21.203
> 
> 标签：c#, winforms, events, picturebox, validating

Yesterday I have implemented some validating events for controls in a groupbox located on a WinForm. I have set the AutoValidate property of the form to Disabled, I have set the CausesValidation property of the controls to true and implemented the Validating event of the controls. By calling the ValidateChildren() method of the form I force that validating events are executed. This was working all fine.

But after placing this groupbox on top of a picturebox and setting the picturebox as parent of the groupbox then validating events aren't executed anymore....

Below some demo code. Form is only containing a picturebox, groupbox, textbox and button.

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void textBox1_Validating(object sender, CancelEventArgs e)
    {
        MessageBox.Show("Validating textbox");
        e.Cancel = true;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        if (ValidateChildren())
            MessageBox.Show("Validation not executed :-(");
        else
            MessageBox.Show("Validation executed :-)");
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        groupBox1.Parent = pictureBox1;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:13:19.293

ValidateChildren() 方法调用 ValidateChildren(ValidationConstraints.Selectable) 来完成工作。这是一个 PictureBox 的问题，它是不可选择的。所以它的孩子也没有得到验证。

用 ValidationConstraints.None 调用它也不起作用，验证子控件的能力是由 ContainerControl 实现的，而 PictureBox 不是从它派生的。所以你也不能在 PictureBox 上调用 ValidateChildren。自己枚举控件并触发 Validating 事件也不起作用，PerformControlValidation() 方法是内部的。

您需要重新考虑尝试将 PictureBox 变成 ContainerControl 的想法。大多数控件都可以类似于图片框，如果不是通过 BackgroundImage 属性然后通过 Paint 事件。

# php - 像步骤导航一样的面包屑

> ID：11756350
> 
> 赞同：0
> 
> 时间：2012-08-01T09:26:21.797
> 
> 标签：php, navigation, breadcrumbs

我有一件小事我想不通。

我有一个页面，其中有 6 个步骤。如何在下一步处于非活动状态且所有先前步骤处于活动状态的情况下制作类似导航的面包屑？

IE。

步骤 1 > 步骤 2 > 步骤 3 > 步骤 4 > 步骤 5 > 步骤 6

当我在第 4 步时看起来像这样

**步骤 1** >**步骤 2** >**步骤 3** >**步骤 4** > 步骤 5 > 步骤 6

这些活动步骤将在 url 中有一个参数指向该步骤页面。

即第 1 步的页面参数是 page=intro

希望有人可以帮忙？

- - - - 解决方案 - - - -

```
session_start();
$_SESSION['page'][] = $_GET["page"];

$steps = array(
    "selecthouse" => "Vælg hustype og tagform",
    "selectrooftile" => "Vælg tagsten",
    "angleinput" => "Tagvinkel",
    "rfinish" => "Tag-detaljer",
    "inputdims" => "Indsæt mål",
    "matliste" => "Materiale-liste",
    );

foreach($steps as $key => $value) {
    if(in_array($key, $_SESSION['page'])) {       
        echo '<a href="?page='.$key.'">'. $value .'</a></b> >';
    } else {
        echo $value ." > ";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:46:06.807

有很多方法可以做到这一点，最好的方法真的取决于你的代码的其余部分。

我个人对这样的线性导航的偏好是将用户访问的页面存储在会话中的数组中，例如

```
<?php
  session_start();
  $_SESSION['pages'][] = $_SERVER['REQUEST_URI'];
?> 
```

然后你需要做的就是在“面包屑”中的每个项目周围放置一个 if 数组，例如

```
<?php
  if (in_array('/step1.php',$_SESSION['pages'])) {
    ?>
    <a href="/step1.php">Step 1</a>
    <?php
  } else {
    ?>
    Step 1
    <?php
  }
?> 
```

编辑

从您新发布的代码中，有一个结束`</b>`但没有开始标签。

至于取消设置恢复到一个步骤，你最好做这样的事情：

```
<?php
  $stepskeys = array_keys($steps);
  $_SESSION['pages'] = array(
    0 => $stepskeys[1],
    1 => $stepskeys[2],
    2 => $stepskeys[3]
  );
?> 
```

这会将阵列重置回第 3 步。

# php - PHP weekdays of current week, why is date() and strtotime taking next week?

> ID：11756351
> 
> 赞同：3
> 
> 时间：2012-08-01T09:26:23.917
> 
> 标签：php, date, strtotime

I am using the following code to get a Y-m-d format of weekdays:

```
$monday = date('Y-m-d', strtotime('Monday'));
$tuesday = date('Y-m-d', strtotime('Tuesday'));
$wednesday = date('Y-m-d', strtotime('Wednesday'));
$thursday = date('Y-m-d', strtotime('Thursday'));
$friday = date('Y-m-d', strtotime('Friday')); 
```

Today is 2012-08-01 (week 31) the Monday value I need should be 2012-07-30.

How come `strtotime('Monday')` makes it next monday?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T09:32:32.353

因为`date('Y-m-d')`返回今天的日期，即八月。你正在转换`monday`为`time`. 现在时间是用`date(Y-m-d)`（2012 年 8 月）来表示的。所以显而易见的答案是从今天开始的下一个星期一。

所以要获得上周的日期，请使用

```
$monday=date(Y-m-d,strtotime('monday this week')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:31:05.333

它总是返回第二天的类型。下周一是 08-06，下周四是 08-02。

```
<?php
  function getDateOfWeekDay($day) {
    $weekDays = array(
      'Sunday',
      'Monday',
      'Tuesday',
      'Wednesday',
      'Thursday',
      'Friday',
      'Saturday',
    );

    $dayNumber = array_search($day, $weekDays);
    $currentDayNumber =  date('w', strtotime('today'));

    if ($dayNumber > $currentDayNumber) {
      return date('Y-m-d', strtotime($day));
    } else {
      return date('Y-m-d', strtotime($day) - 604800);
    }
  }

  echo  getDateOfWeekDay('Monday');
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T09:44:15.620

对于我的应用程序，我只需要为本周的日期创建变量。

这就是我使用这段代码的原因：

```
$mon_value= date('Y-m-d', strtotime('Monday this week'));
$tue_value= date('Y-m-d', strtotime('Tuesday this week'));
$wed_value= date('Y-m-d', strtotime('Wednesday this week'));
$thu_value= date('Y-m-d', strtotime('Thursday this week'));
$fri_value= date('Y-m-d', strtotime('Friday this week')); 
```

# r - Replace nth line in a text file

> ID：11756353
> 
> 赞同：13
> 
> 时间：2012-08-01T09:26:34.427
> 
> 标签：r, file-manipulation

How do I go about in replacing the nth line of a text file in R?

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-01T09:47:10.477

要替换此的第三行：

```
$ cat junk.txt
sic transit
gloria mundi
temeo danoas
et dona ferentes 
```

做这个：

```
> latin = readLines("junk.txt",-1)
> latin[3]="per ardua ad astra"
> writeLines(latin,"junkout.txt") 
```

并得到：

```
$ cat junkout.txt 
sic transit
gloria mundi
per ardua ad astra
et dona ferentes 
```

如果需要，您可以`writeLines(latin,"junk.txt")`覆盖输入文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T09:33:47.657

我不知道是否可以选择更改流文件中的特定行（在文件中查找），尽管您可以选择读取文件、更改列并将帧写入文件、读取、写入功能为您提供所需的东西。

您也可以使用`read.table()`将文件读入表格格式，更改特定行，然后`write.table()`

您有诸如 和 之类的选项`read.csv()`以及`write.csv()`许多其他选项，例如`readLines()`.

**编辑**

[这是R 中文件处理](http://en.wikibooks.org/wiki/R_Programming/Text_Processing)的 wiki 链接

# oracle - Listener doesn't work when connected to my company network

> ID：11756354
> 
> 赞同：1
> 
> 时间：2012-08-01T09:26:55.973
> 
> 标签：oracle, listener

I have a strange problem, the Oracle listener works just fine and has no problems, but when I connect to my company network the listener doesn't work, could any one advise me about that problem?

I am using xe oracle 11.

note: Host set here to "xxxxxx.xxxx.xxxxx.xxx", because I don't know if i'm officially allowed to list my computer name outside my network or not.

## My tnsnames.ora

```
XE =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = xxxxxx.xxxx.xxxxx.xxx)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = XE)
    )
  )

EXTPROC_CONNECTION_DATA =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1))
    )
    (CONNECT_DATA =
      (SID = PLSExtProc)
      (PRESENTATION = RO)
    )
  )

ORACLR_CONNECTION_DATA = 
  (DESCRIPTION = 
    (ADDRESS_LIST = 
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1)) 
    ) 
    (CONNECT_DATA = 
      (SID = CLRExtProc) 
      (PRESENTATION = RO) 
    ) 
  ) 
```

## My listener.ora

```
SID_LIST_LISTENER =
  (SID_LIST =
    (SID_DESC =
      (SID_NAME = PLSExtProc)
      (ORACLE_HOME = C:\oraclexe\app\oracle\product\11.2.0\server)
      (PROGRAM = extproc)
    )
    (SID_DESC =
      (SID_NAME = CLRExtProc)
      (ORACLE_HOME = C:\oraclexe\app\oracle\product\11.2.0\server)
      (PROGRAM = extproc)
    )
  )

LISTENER =
  (DESCRIPTION_LIST =
    (DESCRIPTION =
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1))
      (ADDRESS = (PROTOCOL = TCP)(HOST = xxxxxx.xxxx.xxxxx.xxx)(PORT = 1521))
    )
  )

DEFAULT_SERVICE_LISTENER = (XE) 
```

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-01-10T10:09:31.970

我已经替换`RAJESH-PC.xxxxx.xx.com with RAJESH-PC (hostname) or localhost` 了 listener.ora 和 tnsnames.ora`(path oraclexe\app\oracle\product\11.2.0\server\network\admin)` 并重新启动了我的系统。连接到VPN后它工作正常。

```
listener.ora
===========
LISTENER =
  (DESCRIPTION_LIST =
    (DESCRIPTION =
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1))
      (ADDRESS = (PROTOCOL = TCP)(HOST = RAJESH-PC)(PORT = 1521))
    )
  ) 
```

或者

```
LISTENER =
  (DESCRIPTION_LIST =
    (DESCRIPTION =
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1))
      (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
    )
  ) 
```

# tnsnames.ora

```
XE =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = RAJESH-PC)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = XE)
    )
  ) 
```

或者

XE = (DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521)) (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = XE)))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-13T04:59:22.963

解决方案 2

请在主机文件路径（`C:\Windows\System32\drivers\etc\hosts`）中添加以下主机详细信息

```
127.0.0.1 localhost
localhost RAJESH-PC RAJESH-PC.xxxxx.xx.com
127.0.0.1 RAJESH-PC RAJESH-PC.xxxxx.xx.com 
```

# java - Spring-hibernate jpa 和 jboss - 将对象保存到第二个数据库

> ID：11756361
> 
> 赞同：0
> 
> 时间：2012-08-01T09:27:16.710
> 
> 标签：java, database, spring, hibernate, jboss

注意：虽然一开始很相似，但这不是重复[使用 Spring、JPA 和 Hibernate 来访问 Jboss 中配置的多个数据库/数据源](https://stackoverflow.com/questions/10674051/using-spring-jpa-with-hibernate-to-access-multiple-databases-datasources-config)

亲爱的 Stackoverflow，

我有一个在 jboss-4.2.1.GA 上运行并使用单个数据库的带有休眠应用程序的 spring-jpa。

我现在将第二个 spring-hibernate 项目与上述项目捆绑在同一个 ear 文件中，但它需要使用第二个数据库。第二个 hibernate/spring 项目是使用 database.properties 和 hibernate.cfg.xml 文件设置的。

这两个数据库的详细信息存储在 jboss oracle-ds.xml 文件中：

```
<datasources>
    <local-tx-datasource>
        <jndi-name>DefaultDS</jndi-name>
         ...
     </local-tx-datasource>
     <local-tx-datasource>
        <jndi-name>SecondDS</jndi-name>
         ...
     </local-tx-datasource>
</datasources> 
```

我的问题是，在第二个项目中，使用第二个数据库而不是第一个数据库的对象，我如何为第二个数据库调用 sessionFactory，其详细信息存储在 oracle-ds.xml 而不是使用 database.properties 文件？我见过一个例子调用

```
@Resource(mappedName = "java:SecondDS")
private DataSource secondDS;
...
java.sql.Connection conn = secondDS.getConnection(); 
```

如果获得一个连接那么容易，那只对准备好的语句有用，我怎样才能掌握 sessionFactory？有没有类似的方法？

我见过的所有例子都是指 database.properties 而不是 jboss ds.xml 文件。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:05:34.383

有几种解决方案，具体取决于您如何将数据源绑定到 presistance 上下文、Spring 方式、JPA 方式或 Hibernate 方式......

**春天**

要将 spring/hibernate 应用程序链接到 JNDI 数据源，您需要使用 JndiObjectFactoryBean

```
<bean id="serverDataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
  <property name="jndiName" value="java:comp/env/jdbc/blah"/>
  <property name="proxyInterface" value="javax.sql.DataSource"></property>
</bean> 
```

这样，您就有了一个代表 JNDI 数据源的 spring bean。您将需要创建 2 个（每个数据源一个）。他们需要在你的 spring 定义的 SessionFactory 中注入数据源。如果您使用 Spring 托管的 JPA 实体管理器，则可以使用相同的方法。

**JPA**

如果您使用的是 JPA（会话工厂是 hibernate 而不是 jpa...），您还可以在相应的 persistence.xml 文件中定义一个 jndi 数据源名称。

```
<persistence-unit name="sample">
  <jta-data-source>java:/DefaultDS</jta-data-source>
  ...
</persistence-unit> 
```

注入 entityManager 时需要使用 unitName 参数：

```
 @PersistenceContext(unitName="sample") 
```

**休眠**

对于 hibernate.cfg.xml 文件，您可以使用此属性指定 JNDI 数据源

```
<property name="connection.datasource">java:/comp/env/jdbc/MyDB</property> 
```

应删除 database.property 以确保使用 jndi 数据源。

这些只是示例，最终结果将取决于您如何制作管道。

# playframework - 我可以在游戏框架中刷新然后清除它们吗？

> ID：11756362
> 
> 赞同：0
> 
> 时间：2012-08-01T09:27:17.030
> 
> 标签：playframework, playframework-1.x

我需要向 mysql 插入大约 70000 条记录，但我发现它非常慢。

所以我想这样做：

```
if (count % 2000 == 0) {
            QueryResult.em().flush();
            QueryResult.em().clear();
} 
```

但是当插入完成时，没有数据真正插入数据库。

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T06:17:19.517

您需要先提交您的交易。

我使用以下内容：

```
JPA.em().getTransaction().commit();
JPA.em().getTransaction().begin();
JPA.em().flush();
JPA.em().clear(); 
```

# java - 当两个字符串具有相同的文字（java）时，是否执行字符串池

> ID：11756366
> 
> 赞同：1
> 
> 时间：2012-08-01T09:27:36.703
> 
> 标签：java, string, oop, pool

我参考了以下链接

[Java中的字符串池是什么？](https://stackoverflow.com/questions/3801343/what-is-string-pool-in-java)

[垃圾收集和字符串](https://stackoverflow.com/questions/2202162/garbage-collection-and-strings)

[http://www.xyzws.com/Javafaq/what-is-string-literal-pool/3](http://www.xyzws.com/Javafaq/what-is-string-literal-pool/3)

[关于Java的字符串池的问题](https://stackoverflow.com/questions/1881922/questions-about-javas-string-pool)

还是有些疑惑，请帮帮我

```
 `public class StrPool
             { 
               public static void main(String[] args)
               { 
                String abc="hello";
                String abcd="hello";
                System.out.println(abc==abcd);
               }
             }
             ` 
```

在上面的例子中 OP : **true**

所以我们可以确认这两个对象都来自同一个 String 对象我很清楚。

```
 `String abc="hello World";
     String abcd="hello";
     System.out.println(abc==abcd);` 
```

这给出了输出：**假**

所以当两个字符串对象具有相同的字面量时执行字符串池？？？

如果那么两个字符串对象将在字符串池中创建？

为什么第二个输出是假的？？？

我读到 String 类是不可变的

`abc`并且`abcd`有不同的对象引用然后不可变意味着

“第一个字符串对象将由 JVM 创建，并提供两个对 abc 和 abcd 的引用 “我说得对吗？

非常感谢你........

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:29:06.247

第二**个**输出`false`既是**字符串** `abc`又`abcd`具有不同的内容（文本）

是的，正如您所说，**String 类是不可变**的，即它们的内容不会**更改**，如果您更改**字符串文本**，那么*JVM*将分配一个**新空间**而不是更改它。

现在，当您使用某些文本创建新`String`引用时，*JVM*将检查该文本是否**已存在**于池中，**如果**然后将您的字符串引用到该文本，**否则**将在池中 创建**新文本**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:42:05.307

考虑第一个代码，

在执行语句`String abc="hello"`时，JVM 会做以下事情 1\. 创建一个 String 类型的引用 abc。2\. 检查字符串池中的文字“hello”是否可用，如果可用，它将其引用值分配给 abc，否则将创建字符串文字“hello”，将其引用分配给 abc 并将其添加到字符串池。

将重复相同的步骤`String abcd="hello"`。在这里，由于“hello”已经在字符串池中可用，abcd 也将引用它。

在第二个代码块中也将遵循这些相同的步骤，（实际上每次使用这样的语句创建字符串对象时）只是文字“hello world”和“hello”将被不同地创建并分配给它们各自的变量。

我想，现在你可以猜到上面两个代码示例输出背后的原因了。

字符串是不可变的，意味着你不能改变任何字符串对象。相反，JVM 将创建新的字符串对象（或从字符串池中获取一个）并将其分配给引用。例如

```
 String varA = "hello"; -> 1

   String varB = "hello"; -> 2

   varA="world" -> 3

   varB ="world" -> 4 
```

在第 1 行，JVM 将在字符串池中创建字符串对象“hello”并将其引用分配给 varA。在第 2 行，JVM 会将字符串池中已经存在的“hello”对象的引用分配给 varB。在第 3 行，JVM 将创建一个新对象“world”并将其引用分配给 varA。现在字符串池将有两个对象，“hello”和“world”。在第 4 行，JVM 会将字符串池中已经存在的“world”对象的引用分配给 varB。字符串池仍然有两个对象，“hello”和“world”。

所以基本上，JVM 没有修改任何 String 对象，它只是修改了引用。

希望它可以帮助你。如果您有任何问题，请发表评论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T09:43:38.910

> 所以当两个字符串对象具有相同的字面量时执行字符串池？？？

--> 不完全是，字符串池是在定义文字字符串的时候进行的。如果您创建像`String obj = "sometext"`和创建第二个像这样的文字字符串对象`String obj1 = "some Other Text"`，则 obj1 的内容将被 JVM 与“sometext”进行比较。`String str1 = "hello"`如果两个内容像and一样相等`String str2 = "hello"`，则对象引用`str1`and`str2`将指向同一个对象（“hello”）。

> 为什么第二个输出是假的？？？

--> 因为`abc`and`abcd`指向不同的字符串对象。

不可变意味着：一旦创建了对象，您就无法更改其内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T09:43:55.190

Java 自动将[String.intern](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#intern%28%29)应用于双引号文字。因此可以保证

```
String foo1 = "foo";
String foo2 = "foo";
assert foo1 == foo2; 
```

然而，对于*不是*作为文字构造的字符串，这不能保证，即给定

```
String foo1 = "foo";
// contrived example, but imagine foo2 came from reading a file or similar
String foo2 = new String(new char[] { 'f', 'o', 'o' }); 
```

可以保证但不一定*如此*。您可以显式调用 - 可以保证- 但是当您关心值相等时使用它通常更清晰，并且仅在您真正需要引用相等时才使用 == 。`foo1.equals(foo2)``foo1 == foo2``intern``foo1 == foo2.intern()``equals`

# javascript - 标记 JQplot 饼图

> ID：11756368
> 
> 赞同：1
> 
> 时间：2012-08-01T09:27:41.837
> 
> 标签：javascript, jqplot

我正在使用 JQplot 饼图。我需要标签出现在图表之外。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:14:49.330

如果您的意思是数据标签，那么您需要将 设置为`dataLabelPositionFactor`大于的适当值，`1.0`然后您就完成了。

[此处提供示例示例。](http://jsfiddle.net/Boro/NYewy/57/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T12:59:17.783

为此，您需要指定放置属性：

```
legend: { 
              show:true; placement: "outsideGrid"
            } 
```

例子 ：

```
 $.jqplot('YOUR_DIV_ID', [['LABEL_1',2],['LABEL_2',232],['LABEL_3',22], { 
          seriesDefaults: {
            // Make this a pie chart.
            renderer: jQuery.jqplot.PieRenderer, 
            rendererOptions: {
              // Put data labels on the pie slices.
              // By default, labels show the percentage of the slice.
              showDataLabels: true
            }
          }, 
//Make legend visibile, outside the chart
          legend: { 
              show:true, placement: "outsideGrid"
              }
        }
      ); 
```

# c++ - 虚函数表什么时候设置为0

> ID：11756372
> 
> 赞同：2
> 
> 时间：2012-08-01T09:28:15.367
> 
> 标签：c++, visual-c++

我正在分析我们的应用程序中发生的访问冲突，因为它试图在其虚函数表指向 0 的对象上调用虚函数。所以我想知道对象生命周期中的哪些点是虚函数表指针未设置或明确设置为零？

（我们使用 Visual C++ 10 作为编译器。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T09:33:54.123

当对象处于有效状态时，vtable 指针永远不会为 0。在构造和销毁过程中，虽然对象具有抽象基类的动态类型，但 vtable 将指向抽象基类 vtable，其中将包含纯虚函数，但 vtable 指针本身仍将非零。

vtable 指针唯一可以为零的时间是在构造之前或销毁之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T11:46:08.750

如果 vtable 指针确实为零，那么您可能使用了 VC++ 扩展，例如：

```
class __declspec(novtable) Base {
public:
    Base();
    virtual void proc();
}; 
```

这里`__declspec(novtable)`告诉编译器该类不需要 vtable，因为在派生类安装了自己的 vtable 之前，不会在其上调用任何虚函数。如果您在此之前调用 Base::proc()，您可能会收到错误消息。

vtable 本身更可能是非零的，但函数在其中的插槽为零，因为函数是纯虚拟的：

```
class Base {
public:
    virtual void proc() = 0;
}; 
```

然后有人用如下代码调用它：

```
void Derived::proc() {
    Base::proc();
    // Derived-specific stuff here.
}; 
```

发生这种情况是因为 Derived 的作者假设他们的覆盖需要调用 Base 版本，即使 Base 版本不存在。

无论哪种方式，找到它的一种方法是停止所有基类的恶作剧，正常定义函数，然后查看调用它的内容。例如：

```
class Base {
public:
    virtual void proc() {
        assert( typeof(*this) != typeof(Base) ); // Break-point here.
    }
}; 
```

# java - Java中的变量范围

> ID：11756375
> 
> 赞同：0
> 
> 时间：2012-08-01T09:28:20.687
> 
> 标签：java, scope

如何让变量`srcAdd1`也`dstAdd1`可以在外部使用`if {}`？变量`srcAdd1`并且`dstAdd1`只能在`IPPacket`.

```
packet1 = jpcap.getPacket();

if (packet1 instanceof IPPacket) {
  IPPacket ipp1 = (IPPacket)packet1;
  InetAddress srcAdd1 = ipp1.src_ip;
  InetAddress dstAdd1 = ipp1.dst_ip;

  if (ipp1 instanceof TCPPacket) {
    TCPPacket tcp1 = (TCPPacket)ipp1;
    int dstPort1 = tcp1.dst_port;

    if (dstPort1 == 135) {
      System.out.println(srcAdd1 +" "+  dstAdd1 +" "+ dstPort1);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:16:11.310

它是一个局部变量，仅限于 {} 范围。

来自[**JLS**](http://docs.oracle.com/javase/specs/jls/se5.0/html/statements.html#14.4.2)

> 块中局部变量声明的范围（第 14.2 节）是该声明出现的块的其余部分，从其自己的初始化程序（第 14.4 节）开始，并在局部变量声明语句的右侧包括任何进一步的声明符。

如果您希望它在范围之外可见，请考虑将其作为您班级中的一个字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:25:22.857

```
packet1 = jpcap.getPacket();
InetAddress srcAdd1 = null;
InetAddress dstAdd1 = null;

if (packet1 instanceof IPPacket) {
  IPPacket ipp1 = (IPPacket)packet1;
  srcAdd1 = ipp1.src_ip;
  dstAdd1 = ipp1.dst_ip;

  if (ipp1 instanceof TCPPacket) {
    TCPPacket tcp1 = (TCPPacket)ipp1;
    int dstPort1 = tcp1.dst_port;

    if (dstPort1 == 135) {
      System.out.println(srcAdd1 +" "+  dstAdd1 +" "+ dstPort1);
    }
  }
}

// later

// this condition is true only if packet1 is an instance of IPPacket
if(srcAdd1 != null && dstAdd1 != null) {
    // do stuff with srcAdd1 and dstAdd1
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T10:26:42.713

**1.** **块内**`Declaring`的变量，将限制其在该块内的范围。

 ****2\.** **Class 范围内**`Declaring`的变量，将在**整个类中具有可访问性。**

 ******3.**声明`srcAdd1`，并`dstAdd1`在**类范围内**。

**例子：**

```
public class Test{
  InetAddress srcAdd1;
  InetAddress dstAdd1;

public void go(){

  // Your code................

  srcAdd1 = ipp1.src_ip;
  dstAdd1 = ipp1.dst_ip;

 // Your code................

  }
} 
```******

# python - Python：如何在使用 str.lower 时避免字符串中的特定单词小写

> ID：11756376
> 
> 赞同：1
> 
> 时间：2012-08-01T09:28:20.370
> 
> 标签：python

我是 python 新手

我有一个字符串列表如下

```
mylist=["$(ProjectDir)Dir1\Dest1","$(OutDir)Dir2\Dest2","$(IntDir)Dir2\Dest2"] 
```

我想将每个列表项值小写如下

```
mylist=["$(ProjectDir)dir1\dest1","$(OutDir)dir2\dest2","$(IntDir)dir3\dest3"] 
```

即我想防止 `$(ProjectDir)`, `$(OutDir)`,`$(IntDir)`小写

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:35:54.743

这个想法很简单。您使用描述不转换部分的正则表达式拆分字符串，然后仅转换其偶数部分，然后将它们连接回来。

```
>>> import re
>>> mylist=["$(ProjectDir)Dir1\Dest1","$(OutDir)Dir2\Dest2","$(IntDir)Dir2\Dest2"]
>>> print ["".join([s if i%2 else s.lower()  for (i,s) in enumerate(re.split('(\$\([^)]*\))', x))]) for x in mylist]
['$(ProjectDir)dir1\\dest1', '$(OutDir)dir2\\dest2', '$(IntDir)dir2\\dest2'] 
```

这里的主要内容是：

```
[ "".join([
     s if i%2 else s.lower()
     for (i,s) in enumerate(re.split('(\$\([^)]*\))', x))])
   for x in mylist ] 
```

您浏览列表`mylist` 并为每个 x 生成修改版本：

```
[ ... for x in mylist ] 
```

`x`您使用此操作转换每个：

```
"".join([
     s if i%2 else s.lower()
     for (i,s) in enumerate(re.split('(\$\([^)]*\))', x))] 
```

这意味着：将字符串拆分为必须转换（偶数）和不得转换（奇数）的部分。

例如：

```
>>> re.split('(\$\([^)]*\))', x)
['', '$(ProjectDir)', 'Dir1\\Dest1'] 
```

而不是枚举它们并转换所有偶数部分：

```
>>> print list(enumerate(re.split('(\$\([^)]*\))', x)))
[(0, ''), (1, '$(ProjectDir)'), (2, 'Dir1\\Dest1')] 
```

如果零件是偶数或奇数，您可以使用以下方法进行检查`if`：

```
 s if i%2 else s.lower() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T09:40:44.190

如果你对正则表达式过敏...

```
exclusions = ['$(ProjectDir)', '$(OutDir)', '$(IntDir)']
mylist = ["$(ProjectDir)Dir1\Dest1", "$(OutDir)Dir2\Dest2", "$(IntDir)Dir2\Dest2"]

## Lower case everything
mylist = [s.lower() for s in mylist]

## Revert the exclusions
for patt in exclusions:
    mylist = [s.replace(patt.lower(), patt) for s in mylist]

print mylist 
```

# css - zend 表单创建的样式定义列表（必须在 IE7+ 中工作）

> ID：11756377
> 
> 赞同：0
> 
> 时间：2012-08-01T09:28:31.047
> 
> 标签：css, zend-framework, zend-form

我使用 Zend_Form 和它的默认装饰器来创建一个表单。这将输出以下 HTML：

```
<dl>
<dt><label for="title">Title</label></dt>
<dd>
  <input type="text" name="title" value="some title">
  <ul>
    <li>Some error message for the title</li>
    <li>Some other error message for the title</li>
  </ul>
</dd>
<dt><label for="type">Type</label></dt>
<dd>
  <select name="type">
    <option value="1">Type 1</option>
    <option value="2">Type 2</option>
    <option value="3">Type 3</option>
  </select>
  <ul>
    <li>Some error message for the type</li>
    <li>Some other error message for the type</li>
  </ul>
</dd>
<dt><label for="description">Description</label></dt>
<dd>
  <textarea name="description" rows="40" cols="100">This is a description of the item</textarea>
  <ul>
    <li>Some error message for the description</li>
    <li>Some other error message for the description</li>
  </ul>
</dd> 
```

我需要对其进行样式设置，以便标签出现在相关输入框的左侧，并且无序列表中的任何错误都出现在它们相关的元素的右侧。

在过去的美好时光（笑话），我可以使用具有 3 列的表来实现我想要的，如下所示：

```
<table>
<tr>
  <th><label for="title">Title</label></th>
  <td><input type="text" name="title" value="some title"></td>
  <td>
    <ul>
      <li>Some error message for the title</li>
      <li>Some other error message for the title</li>
    </ul>
  </td>
</tr>
<tr>
  <th><label for="type">Type</label>
  </th>
  <td><select name="type">
    <option value="1">Type 1</option>
    <option value="2">Type 2</option>
    <option value="3">Type 3</option>
  </select></td>
  <td>
    <ul>
      <li>Some error message for the type</li>
      <li>Some other error message for the type</li>
    </ul>
  </td>
</tr>
<tr>
  <th><label for="description">Description</label></th>
  <td><textarea name="description" rows="40" cols="100">This is a description of the item</textarea></td>
  <td>
    <ul>
      <li>Some error message for the description</li>
      <li>Some other error message for the description</li>
    </ul>
  </td>
</tr>
</table> 
```

显然，这并不是我真正想要考虑的事情。主要是因为我真的不想将列固定为相同的宽度。

我也尝试不使用 zend 表单装饰器方法，因为从代码可读性的角度来看，您需要提供的糟糕的嵌套数组非常糟糕。我理想的方法可能是在每个标签、输入和 ul 周围包裹一个 div，然后在 div 上使用 clear:both。然后我可以在每个标签、输入和 ul 上使用 float:left。

我一直在这里测试这个问题的各种其他答案：http: [//htmledit.squarefree.com/](http://htmledit.squarefree.com/)

不过，似乎没有其他人的解决方案真正起作用。显然，它需要在 IE 中工作，尽管在 IE7 之前不需要。如果有人能想出只在 IE8 中有效的东西，那可能一推就可以了。

我曾尝试将自定义视图脚本应用于表单元素，但由于选择而引发了一大堆其他问题。

根据以下文章，将 ul 元素放在 dl 的 dd 部分中是完全有效的，只是不在 dt 中：http: [//www.maxdesign.com.au/articles/definition/](http://www.maxdesign.com.au/articles/definition/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:55:57.373

使用 jQuery。我认为错误 ul 元素有一些与之关联的错误类。Javascript：

```
$('ul.error').each(function(){
  $(this).appendTo(     //get error <ul>
   $(this)              //start chain from self
   .parent()            //move to parent <td>
   .prev()              //move to previous <td> element
  );                // and append there.
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:14:38.183

这个问题的答案似乎是您必须在 Zend Framework 1 中使用装饰器。

您可能认为 viewScripts 是一种解决方案，但似乎如果您沿着这条路线走，那么您将打开一罐蠕虫，因为您最终将不得不为按钮、文件元素、文本输入、选择、单选和复选框创建不同的视图脚本因为它们都需要稍微不同的东西传递给实际渲染元素的内置助手。至少使用装饰器可以避免在每个脚本中复制一定数量的布局，只需添加或删除装饰器。

看起来他们正在放弃 ZF2 中的装饰器方法，尽管采用更适合 MVC 的东西。

# java - Java解析文本文件

> ID：11756385
> 
> 赞同：0
> 
> 时间：2012-08-01T09:29:12.070
> 
> 标签：java, performance, parsing, text-files

我需要为文本文件（至少 20 kb）编写一个解析器，并且我需要确定一组单词中的单词是否出现在这个文本文件中（大约 400 个单词和数字）。所以我正在寻找最有效的方法来做到这一点（如果找到匹配项，我需要对此进行进一步处理，这是前一行）。

我目前所做的是排除不包含任何信息的行（元数据行的种类），然后逐字比较 - 但我不认为只逐字比较是最有效的可能性。

谁能提供一些提示/提示/想法/...

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:05:22.630

这取决于您对“高效”的含义。

如果您想要一种非常直接的编码方式，请记住 java 中的 String 对象具有方法 String.contains(CharSequence sequence)。

然后，您可以将文件内容放入一个字符串中，然后使用方法 contains() 迭代您想要检查的关键字是否出现在字符串中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:51:52.963

以下情况如何：

```
Put all your keywords in a HashSet (Set<String> keywords;)
Read the file one line at once
  For each line in file:
  Tokenize to words
  For each word in line:
  If word is contained in keywords (keywords.containes(word))
    Process actual line
    If previous line is available
        Process previous line
  Keep track of previous line (prevLine = line;) 
```

# java - 如何在动作监听器上控制焦点监听器？

> ID：11756389
> 
> 赞同：0
> 
> 时间：2012-08-01T09:29:31.623
> 
> 标签：java

我有一个面板。此面板有一个文本字段和一个按钮。文本字段有焦点侦听器来搜索一些 db 值，如果没有写入值，它会在选项卡时显示退出显示消息。但是，当编辑文本字段并单击按钮而不按 Tab 键时，会发生以下顺序：1）焦点丢失 2）动作侦听器

问题是失去焦点的调用，当编辑到文本字段时应该调用动作侦听器--->单击按钮（没有标签进入文本字段）

请您分享您的想法好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:20:53.330

"*如果用户在输入内容后离开，则调用动作侦听器而不调用失去焦点*

好的，首先，您不能不触发焦点丢失，但是，您可以忽略它

```
public void focusLost(FocusEvent evt) {
   if (textField.getText().length() > 0) {
       // call action
   } else {
      // show error message
   }
} 
```

好的，既然我们可以忽略焦点事件，那么如何触发动作事件呢？

嗯，令人惊讶的是，这真的很简单

```
button.doClick(); 
```

# c - 线程退出时不完整的 sylog 日志

> ID：11756390
> 
> 赞同：0
> 
> 时间：2012-08-01T09:29:44.883
> 
> 标签：c, rsyslog

我有一个初始化syslog的主程序，这个程序可以运行多个线程，问题是，当一个线程退出时，我在syslog文件中只找到了他们的一部分日志，请问是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:32:44.777

您应该刷新缓冲区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T11:04:03.900

经过一些测试，我找到了解决方案，使用 LOG_EMERG 而不是 LOG_INFO 或 LOG_DEBUG，这将使 syslog 优先考虑消息，因此我的线程消息不再丢失。

# ruby-on-rails - Ruby on Rails：显示两个日期之间的结果

> ID：11756393
> 
> 赞同：2
> 
> 时间：2012-08-01T09:30:17.820
> 
> 标签：ruby-on-rails, ruby, date, activerecord, between

我在搜索我的数据库时使用 jquery 日期选择器来选择两个日期。目前，搜索只会搜索确切的开始日期和确切的结束日期，但我希望用户能够选择两个日期，他们可以在这些日期之间进行搜索。

这是我的模型：

```
class Project < ActiveRecord::Base
  attr_accessible :business_div, :client, :customer_benifits, :edited_date, :end_date, :entry_date, :exception_pm, :financials, :industry, :keywords, :lessons_learned, :project_name, :project_owner, :role, :start_date, :status, :summary, :tech

validates_presence_of :business_div, :client, :customer_benifits, :end_date, :exception_pm, :financials, :industry, :keywords, :lessons_learned, :project_name, :project_owner, :role, :start_date, :status, :summary, :tech

def self.search(search_client, search_industry, search_role, search_tech, search_business_div, search_project_owner, search_exception_pm, search_status, search_start_date, search_end_date, search_keywords) 
  return scoped unless search_client.present? || search_industry.present? || search_role.present? || search_tech.present? || search_business_div.present? || search_project_owner.present? || search_exception_pm.present? || search_status.present? || search_start_date.present? || search_end_date.present? || search_keywords.present?

if search_start_date != ""
search_start_date = Date.parse(search_start_date).strftime("%Y-%m-%d")
end
if search_end_date != ""
search_end_date = Date.parse(search_end_date).strftime("%Y-%m-%d")
end

  where(['client LIKE ? AND industry LIKE ? AND role LIKE ? AND tech LIKE ? AND business_div LIKE ? AND project_owner LIKE ? AND exception_pm LIKE ? AND status LIKE ? AND start_date LIKE ? AND end_date LIKE ? AND keywords LIKE ?', "%#{search_client}%", "%#{search_industry}%" , "%#{search_role}%" , "%#{search_tech}%" , "%#{search_business_div}%" , "%#{search_project_owner}%" , "%#{search_exception_pm}%" , "%#{search_status}%", "%#{search_start_date}%", "%#{search_end_date}%","%#{search_keywords}%"])

end

def self.paginated_for_index(projects_per_page, current_page)
    paginate(:per_page => projects_per_page, :page => current_page)
  end

end 
```

这是我的搜索视图：

```
<h1>Search</h1>

<% if @project_search.total_entries > 0 %>
<%= form_tag search_path, method: :get do %>

Client :
<%= select(@projects, :client, Project.all.map {|p| [p.client]}.uniq, :prompt => "-Any-", :selected => params[:client]) %></br>

Industry :
<%= select(@projects, :industry, Project.all.map {|p| [p.industry]}.uniq, :prompt => "-Any-", :selected => params[:industry]) %></br>

Role :
<%= select(@projects, :role, Project.all.map {|p| [p.role]}.uniq, :prompt => "-Any-", :selected => params[:role]) %></br>

Technologies :
<%= select(@projects, :tech, Project.all.map {|p| [p.tech]}.uniq, :prompt => "-Any-", :selected => params[:tech]) %></br>

Business Division :

<%= select(@projects, :business_div, Project.all.map {|p| [p.business_div]}.uniq, :prompt => "-Any-", :selected => params[:business_div]) %></br>

Project Owner :
<%= select(@projects, :project_owner, Project.all.map {|p| [p.project_owner]}.uniq, :prompt => "-Any-", :selected => params[:project_owner]) %></br>

Exception PM
<%= select(@projects, :exception_pm, Project.all.map {|p| [p.exception_pm]}.uniq, :prompt => "-Any-", :selected => params[:exception_pm]) %></br>

Start Date :

<%=  text_field_tag("start_date") %></br>

End Date :

<%= text_field_tag("end_date") %></br>

Status :

<%= select(@projects, :status, Project.all.map {|p| [p.status]}.uniq, :prompt => "-Any-", :selected => params[:status]) %></br>

Keywords :

<%= text_field_tag :keywords, params[:keywords] %></br>

<%= submit_tag "Search", name: nil %>

<% end %>

<% if @search_performed %>
<h3><%=@project_search.total_entries%> results</h3>

<table class = "pretty">
<table border="1">
  <tr>
    <th><%= sortable "project_name", "Project name" %> </th>
    <th><%= sortable "client", "Client" %></th>
<% if false %>
    <th>Exception pm</th>
    <th>Project owner</th>
<% end %>
    <th><%= sortable "tech", "Technologies" %></th>
    <th><%= sortable "role", "Role" %></th>
    <th><%= sortable "industry", "Industry" %></th>
<% if false %>
    <th>Financials</th>
    <th>Business div</th>
    <th>Status</th>
    <th>Start date</th>
    <th>End date</th>
    <th>Entry date</th>
    <th>Edited date</th>
    <th>Summary</th>
    <th>Lessons learned</tStackh>
    <th>Customer benifits</th>
    <th>Keywords</th>
    <!th></th>
    <!th></th>
    <!th></th>
<% end %>
  </tr>

<% @project_search.each do |t| %>
  <tr>
    <td><%= t.project_name %></td>
    <td><%= t.client %></td>
<% if false %>
    <td><%= t.exception_pm %></td>
    <td><%= t.project_owner %></td>
<% end %>
    <td><%= t.tech %></td>
    <td><%= t.role %></td>
    <td><%= t.industry %></td>
<% if false %>
    <td><%= t.financials %></td>
    <td><%= t.business_div %></td>
    <td><%= t.status %></td>
    <td><%= l(t.start_date) if t.start_date? %></td>
    <td><%= l(t.end_date) if t.end_date? %></td>
    <td><%= t.entry_date %></td>
    <td><%= t.edited_date %></td>
    <td><%= t.summary %></td>
    <td><%= t.lessons_learned %></td>
    <td><%= t.customer_benifits %></td>
    <td><%= t.keywords %></td>
<% end %>
    <td><%= link_to 'Show', t %></td>
    <!td><%#= link_to 'Edit', edit_project_path(project) %></td>
    <!td><%#= link_to 'Destroy', project, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %>
</table>
<%end %>

<% if @search_performed %>
Results per page: <%= select_tag :per_page, options_for_select([10,20,50], params[:per_page].to_i), :onchange => "if(this.value){window.location='?per_page='+this.value;}" %>

<% end %>

<% else %>
<h2> Sorry, there are no results matching your search. Please try again. </h2> 
<% end %>
<br />
<%# end %>

<% if @search_performed %>
<%= hidden_field_tag :direction, params[:direction] %>
<%= hidden_field_tag :sort, params[:sort] %>
<%= hidden_field_tag :per_page, params[:per_page] %>
<%= hidden_field_tag :page, params[:page] %>

<%= will_paginate (@project_search) %>

<%= button_to "Search Again?", search_path, :method => "get" %>

<% end %>
<%= button_to "Home", projects_path, :method => "get" %> 
```

这是我的控制器的一部分：

```
def search

@search = params[:client], params[:industry], params[:role], params[:tech], params[:business_div], params[:project_owner], params[:exception_pm], params[:status], params[:start_date], params[:end_date], params[:keywords]

@project_search = Project.search(*@search).order(sort_column + ' ' + sort_direction).paginated_for_index(per_page, page)

@search_performed = !@search.reject! { |c| c.blank? }.empty? 

   @project = Project.new(params[:project])

respond_to do |format|
      format.html # search.html.erb
      format.json { render :json => @project }
    end

end 
```

希望有人可以帮助我。我是 Rails 新手，所以轻松一点:)。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:45:05.623

我假设您想显示所有在`search_start_date`和之间进行的项目`search_end_date`。所以这将转化为以下逻辑：

*   项目在时间范围内开始：

    `project.start_date BETWEEN search_start_date AND search_end_date`

*   项目在时间范围内结束：

    `project.end_date BETWEEN search_start_date AND search_end_date`

*   项目在时间范围之前开始并在时间范围之后结束：

    `project.start_date <= search_start_date AND project.end_date => search_end_date`

您可以直接将其转换为 SQL 并将其放入您的 where 命令中。

作为建议：我会将您的 where 命令中的问号更改为命名占位符，因为它使您的查询更具可读性。ActiveRecord 查询指南有详细信息：http: [//guides.rubyonrails.org/active_record_querying.html#conditions](http://guides.rubyonrails.org/active_record_querying.html#conditions)（第 2.2.1 节占位符条件）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-19T09:00:41.727

查看[Rails 指南](http://guides.rubyonrails.org/active_record_querying.html)中的 Range 条件：

```
Client.where(created_at: (Time.now.midnight - 1.day)..Time.now.midnight) 
```

这将产生以下 SQL：

```
SELECT * FROM clients WHERE (clients.created_at BETWEEN '2008-12-21 00:00:00' AND '2008-12-22 00:00:00') 
```

因此，您可以使用范围搜索两个日期之间的字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T09:43:07.933

*更新*：这是您的查询应该是这样的：

```
where(['client LIKE ? AND industry LIKE ? AND role LIKE ? AND tech LIKE ? AND business_div LIKE ? AND project_owner LIKE ? AND exception_pm LIKE ? AND status LIKE ? AND DATE(start_date) BETWEEN ? AND ? AND DATE(end_date) BETWEEN ? AND ? AND keywords LIKE ?', 
      "%#{search_client}%", "%#{search_industry}%" , "%#{search_role}%" , "%#{search_tech}%" , "%#{search_business_div}%" , 
      "%#{search_project_owner}%" , "%#{search_exception_pm}%" , "%#{search_status}%", 
      search_start_date, search_end_date, search_start_date, search_end_date,"%#{search_keywords}%"
    ]) 
```

我们正在做的是告诉 MySQL 获取开始日期和结束日期的日期位，并确保它在我们提供的值之间。

希望这可以帮助

# javascript - 在 JAVA SCRIPT FUNCTION 中调用的 ASP 经典函数

> ID：11756394
> 
> 赞同：0
> 
> 时间：2012-08-01T09:30:18.090
> 
> 标签：javascript, asp-classic

我想知道是否允许从 javascript 函数调用 asp 经典函数。

像这个。

```
function asp(asp)

....do task

end function 
```

然后 ......

```
function javascript(java)
{
bConsultant = alert('<%=asp("'+ java +'")%>');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:55:15.310

您不能从 javascript 调用经典 asp 函数。classic-asp 是一种服务器端脚本语言，而 javascript 是一种客户端脚本语言。所以很简单，它定义了在哪里运行哪些代码或功能。
您可以通过 ajax 来做到这一点，但它实际上并没有调用函数。它只是在已经在服务器中运行的经典 asp 中调用整个页面

# java - 带有部分的Android拖放列表视图

> ID：11756398
> 
> 赞同：0
> 
> 时间：2012-08-01T09:30:34.180
> 
> 标签：java, android, listview, drag-and-drop

`ListView`我想在 android 中开发一个拖放功能，它应该在`ListItems`.

我从这里找到了拖放源 [http://ericharlow.blogspot.in/2010/10/experience-android-drag-and-drop-list.html?showComment=1343729578427](http://ericharlow.blogspot.in/2010/10/experience-android-drag-and-drop-list.html?showComment=1343729578427)

[https://github.com/bauerca/drag-sort-listview](https://github.com/bauerca/drag-sort-listview)

但是如何实现部分或分隔符的功能

提前致谢。

# javascript - 获取容器中的空白空间

> ID：11756399
> 
> 赞同：1
> 
> 时间：2012-08-01T09:30:42.840
> 
> 标签：javascript, jquery

如何使用 Javascript 在容器中获取空白区域（例如白色）？是否有现成的 jQuery 函数或类似的东西？

![屏幕](../Images/6a7ccf0be77cf6e246a7dbca91d416de.png)

我需要 Javascript 中“空白”白色区域的宽度、高度、左侧和顶部位置。

**[http://jsfiddle.net/P4QHj/](http://jsfiddle.net/P4QHj/)**

HTML

```
<div id="container">
  <div class="box-item a">A</div>
  <div class="box-item d">D</div>
  <div class="box-item e">E</div>
  <div class="box-item f">F</div>
</div>​ 
```

CSS

```
.box-item {
 width: 100px;
 height: 100px;
 background-color: grey;
 display:block;
 position:absolute;
}

#container {
 position:relative;
 width:300px;
 height:300px;
 min-width:300px;
 max-width:300px;
}

.a {
 position:relative;
 left:100px;
 width:200px;
 height:200px;
}

.d {
 left:0px;
 top: 200px;    
}
.e {
 left:100px;
 top: 200px;    
}
.f {
 left:200px;
 top: 200px;    
} 
```

​</p>

TIA frgtv10

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:10:05.320

在您的情况下，这很容易：您知道布局，取`left`“A”的`top`值和其他元素的值 - `100 x 200px`。

对于未知空间和未知元素位置的更通用解决方案，您只能在容器上应用网格/表格。

1.  获取您的尺寸`#container`
2.  选择一个网格间距（在你的情况下：`100px`，让未知布局中的所有空间使用 1px）
3.  `3x3`构建一个大小为“维度”/“网格间隔”（此处为：）的布尔值或零的二维数组
4.  遍历所有盒子项目
    1.  获取盒子的位置和尺寸
    2.  通过网格间隔划分
    3.  `true`增加数组中各个值的覆盖计数（或设置为）
5.  空格在网格中仍然有`0`/值。`false`将它们的 indizes 与网格间距相乘以获得坐标。

对于获取维度，jQuery 的[`width`](http://api.jquery.com/width/)/[`height`](http://api.jquery.com/width/)函数可能会有所帮助。对于职位，您需要阅读`top`/`left`样式值。当它们被编写为内联样式时，它们会更容易获得，而不是在样式表中使用 id（甚至曾经使用过的类）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-24T09:19:17.093

这可能不是您特别寻找的解决方案，但由于它与这个问题的标题相匹配，我认为可能对其他一些寻找解决方案的人有用。

假设：

1.  容器大小为 3 x 3 个单元格
2.  单元格大小相同
3.  我按列号而不是行来引用单元格（首先水平定位，然后垂直定位）
4.  您有一个对象，其中包含有关容器中占用空间的信息（我们称之为“占用”）。在我的示例中，每个最终条目都包含一个具有“width”属性的对象，该属性包含内容的水平大小（我称它们为“平铺”），但这也可能是直接分配给条目的平面整数。

示例内容：

```
occupancy[0][1] = {width: 1};
occupancy[1][0] = {width: 1};
occupancy[1][1] = {width: 2};
occupancy[2][2] = {width: 1}; 
```

所以它使占用看起来像（“x”表示占用）：

```
| - | x | - |
| x | x | x |
| - | - | x | 
```

执行：

```
const COLUMNS_COUNT = 3;
const MAX_ROWS = 3;
const tilesGroupedByRowColumn = {
    '0': {'1': {width: 1}},
    '1': {'0': {width: 1}},
    '1': {'1': {width: 2}},
    '2': {'2': {width: 1}},
}

let getTileOccupancyAreasMatrix = function () {

    let tileOccupancyAreasMatrix = {};

    for (let row = 0; row < MAX_ROWS; row++) {
        for (let column = 0; column < COLUMNS_COUNT; column++) {
            if (typeof tileOccupancyAreasMatrix[row] === 'undefined') {
                tileOccupancyAreasMatrix[row] = {};
            }

            if (tileOccupancyAreasMatrix[row][column] === 1) {
                // columns have been marked used by some previous iteration,
                // that was handling tiles extending to more than 1 column width
                continue;
            }

            if (typeof tilesGroupedByRowColumn[row] === 'undefined'
                || typeof tilesGroupedByRowColumn[row][column] === 'undefined') {
                tileOccupancyAreasMatrix[row][column] = 0;
                continue;
            }

            let tileWidth = tilesGroupedByRowColumn[row][column].width;
            let tileHeight = tilesGroupedByRowColumn[row][column].height;
            // code below also handles the case when tile extends to next rows and column(s)
            for (let rowNumber = row; rowNumber < row + tileHeight; rowNumber++) {
                if (typeof tileOccupancyAreasMatrix[rowNumber] === 'undefined') {
                    tileOccupancyAreasMatrix[rowNumber] = {};
                }
                for (let columnNumber = column; columnNumber < column + tileWidth; columnNumber++) {
                    tileOccupancyAreasMatrix[rowNumber][columnNumber] = 1;
                }
            }
        }
    }

    return tileOccupancyAreasMatrix;
}, 
```

解决方案应该适用于任何大小的容器 - 给出了 3x3 示例以简化示例。

最终解决方案可能应该接受参数而不是依赖于预定义的常量——我的示例来自我的 Vue 实现，它读取框架数据，因此不需要参数。

# objective-c - 下载时确定文件大小

> ID：11756401
> 
> 赞同：1
> 
> 时间：2012-08-01T09:30:58.033
> 
> 标签：objective-c, download, asihttprequest, nsfilemanager

我想确定正在下载的文件的文件大小。我使用 ASIHTTPRequest 并且通常它应该跳转到 didReceiveBytes 但它没有这样做相反我启动了一个计时器来重复检查该位置的文件大小。像这样 ：

```
NSError* error;
NSFileManager* fm = [NSFileManager defaultManager];
NSDictionary* itemAttributes = [fm attributesOfItemAtPath:_location error:&error];
if(!error){
    unsigned long long fsize = [itemAttributes fileSize];
    [downloadLabel setText:[NSString stringWithFormat:@"%llu MB downloaded",fsize] ];
    NSLog(@"MB downloaded: %llu", fsize);
} else {
    NSLog(@"error=%@", error);
} 
```

问题是，在文件完成下载之前，我收到以下错误：

```
 error=Error Domain=NSCocoaErrorDomain Code=260 "The operation couldn’t be completed.             (Cocoa error 260.)" UserInfo=0xf57aa60 {NSFilePath= "long filename", NSUnderlyingError=0xf57ad90 "The operation couldn’t be completed. No such file or directory" 
```

完成后它终于给了我：

MB下载：34443951

事实上，我最后下载的 MB 告诉我文件路径是正确的。但是为什么它在下载时告诉我该文件不存在？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:04:30.153

最后，我最终直接从 ASIHTTP 请求中请求字节：

```
unsigned long long bytes = request.totalBytesRead;
double mb;
if(bytes >0){
    mb = bytes/1000000.0f;        
    [downloadLabel setText:[NSString stringWithFormat:@"%.2f MB downloaded",mb] ];
} 
```

使用触发的计时器不断检索此值以更新下载的字节并转换为表示 MB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:35:10.933

使用网络的[ASIHTTP](http://allseeing-i.com/ASIHTTPRequest/How-to-use)库，你可以很容易地做到这一点。

阅读“**自定义进度跟踪**”部分。

或者你可以使用

```
-(NSURLRequest *)connection:(NSURLConnection *)connection
        willSendRequest:(NSURLRequest *)request
       redirectResponse:(NSURLResponse *)response {
}

long long size = [response expectedContentLength]; 
```

但是so站点中有很多解决方案：http:
[//goo.gl/0hrK2](http://goo.gl/0hrK2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T06:18:06.007

试试这个代码，它可以帮助你

```
- (void)request:(ASIHTTPRequest *)request didReceiveData:(NSData *)data
{

    [request contentLength];
    [downloadButtton setTitle:@"Cancel" forState:UIControlStateNormal];
    [downloadButtton addTarget:self action:@selector(cancelDownloading) forControlEvents:UIControlEventTouchUpInside];
    long length = [request contentLength];

    fileLength = length;

    NSLog(@"fileLength ====> %f",fileLength);

  //  progressView.hidden=NO;
   // progressText.hidden=NO;
    double length2 = [data length];
    currentLength += length2;
    //    double progress = currentLength/fileLength;

  NSString *firstDataLength=[NSString stringWithFormat:@"%.2f MB",fileLength/1024/1024 ];
   NSString *totalMBytes=[NSString stringWithFormat:@" of %.2f MB",fileLength/1024/1024 ];
   NSString *totalMBytesWritten=[NSString stringWithFormat:@"%.2f MB",currentLength/1024/1024];

    NSLog(@"firstDataLength %@",firstDataLength);
    NSLog(@"totalMBytes %@",totalMBytes);
    NSLog(@"totalMBytesWritten %@",totalMBytesWritten);

    progressText.text=[totalMBytesWritten stringByAppendingString:totalMBytes];
    NSUInteger left = [data length];
    NSUInteger nwr = 0;
    do {
        nwr = [fileStreem write:[data bytes] maxLength:left];
        if (-1 == nwr) break;
        left -= nwr;
    } while (left > 0);
    if (left) {
        NSLog(@"stream error: %@", [fileStreem streamError]);
    }

} 
```

# c# - 在 C# 中编码 XML

> ID：11756403
> 
> 赞同：2
> 
> 时间：2012-08-01T09:31:03.650
> 
> 标签：c#, encoding

我有一个 xml 文件，其中包含变音符号，如下所示：

```
<NameGe>ËÇ</NameGe> 
```

有没有办法读取这个文件并像这样写出来：

```
<NameGe>&#214;&#231;</NameGe> 
```

所以基本上它应该写出变音符号的数字/编码值。

问候。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T10:03:26.633

你可以通过覆盖来做到这`WriteString`一点`XmlTextWriter`

```
MemoryStream m = new MemoryStream();
MyWriter xmlWriter = new MyWriter(m);

XDocument xDoc = XDocument.Parse(xml);
xDoc.Save(xmlWriter);
xmlWriter.Flush();

string s = Encoding.UTF8.GetString(m.ToArray()); 
```

-

```
public class MyWriter : XmlTextWriter
{
    public MyWriter(Stream s) : base(s,Encoding.UTF8)
    {
    }
    public override void WriteString(string text)
    {
        base.WriteRaw(HttpUtility.HtmlEncode(text));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:37:30.413

使用`HttpUtility.HtmlEncode`和`HttpUtility.HtmlDecode`。

# java - 在java中获取当前日期

> ID：11756406
> 
> 赞同：-2
> 
> 时间：2012-08-01T09:31:07.553
> 
> 标签：java, mysql, date

如何在java中获取当前日期详细信息？我开发了一个类：

```
 public class RetailerWs {

 public String customerData(){
  String customerInfo = "";
  try{
  Class.forName("com.mysql.jdbc.Driver");
  Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/pro","root","");
   //Find customer information where the customer ID is maximum
   PreparedStatement statement =  con.prepareStatement("select * from orders where status='Q' AND date='2012-08-01'");
   ResultSet result = statement.executeQuery();
   int count=0;
    count++;
  // System.out.println(count);
   while(result.next()){
  System.out.println(count);
  }
      }
 catch(Exception exc){
 System.out.println(exc.getMessage());
  }

 return customerInfo;
 } 
```

}

这是另一堂课。

```
 public class Demo {
  public static void main(String[] args){
    RetailerWs obj = new RetailerWs();
    System.out.println(obj.customerData());
  }

 } 
```

如果我运行`demo`，它会在之后调用`RetailerWs`它显示的值`count`。问题是目前我手动插入日期，即

```
 PreparedStatement statement =  con.prepareStatement("select * from orders where status='Q' AND date='2012-08-01'"); 
```

但我想要一个获取当前日期的查询。如何创建和调用它？请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T09:35:39.023

你可以试试

```
select * from orders where status='Q' AND date = CURDATE(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:36:34.860

您可以使用[日历](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html)实现它，如：

```
public static Date getToday(Date date) {
    Calendar c = Calendar.getInstance();
    c.setTime(date);
    c.set(Calendar.HOUR_OF_DAY, 0);
    c.set(Calendar.MINUTE, 0);
    c.set(Calendar.SECOND, 0);
    c.set(Calendar.MILLISECOND, 0);
    return c.getTime();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T09:41:39.163

用问号替换您准备好的语句中的日期，并使用该`setDate()`方法设置其值：

```
statement = con.prepareStatement("select * from orders where status='Q' AND date=?");
statement.setDate(1, new Date()); 
```

的第一个参数`setDate()`是 的索引（从 1 开始）`?`。将此机制也用于其他参数 (Q) 将是一种很好的做法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T09:57:56.633

如果日期列包含时间部分，您需要修改如下查询

```
select * from orders where status='Q' AND 
date >= CURDATE() and date<CURDATE() +interval 1 day ; 
```

# php - 用于 php 数组的 TryGet 过程

> ID：11756407
> 
> 赞同：0
> 
> 时间：2012-08-01T09:31:12.807
> 
> 标签：php, null, key, associative-array

每次我必须从 PHP 中的关联数组中获取一个可能不存在的元素时，我都必须编写两次。

```
$myvar = array_key_exists($array, 'key') ? $array['key'] : NULL; 
```

我觉得有一种更简单的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:33:54.013

我知道你的意思......我更喜欢这种方法：

```
$myvar = isset($array['key']) ? $array['key'] : null; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:37:09.327

同样的，你必须对它的存在做出判断，

```
$myvar=isset($array['key'])?$array['key']:"";    
$myvar=$array['key']||$myvar=""; 
```

你可以试试，希望对你有用~~~~

# cluster-analysis - 主题检测的策略和聚类算法

> ID：11756411
> 
> 赞同：2
> 
> 时间：2012-08-01T09:31:45.673
> 
> 标签：cluster-analysis, mahout

我想知道解决以下问题的好策略或算法：

我所拥有的是：一组来自不同来源的新闻文章，每篇文章都有时间戳和新闻类别的加权向量。

我想要的是：处理同一主题的来自不同来源的文章集群。

我基本上想复制谷歌新闻的关键功能：呈现主题并为同一主题列出不同的新闻来源。

对于上面提到的新闻类别向量之类的文章，我已经有了很好的功能，我需要知道的是选择正确的策略、聚类算法和库来进行聚类。

聚类算法应具备的特征：

1.  没有固定数量的集群，（我事先不知道我的文章集中有多少主题）。
2.  有效地将新文章映射到现有集群，或者如果文章不能很好地适合现有集群，则创建一个新集群。
3.  考虑相似性文章的时间戳。
4.  如果要过时并从基础文章集中删除，请解散集群。

我从未做过任何聚类，所以我不知道是否有提供上述功能的聚类算法，或者这些功能中的某些功能是否过于复杂或使聚类方式变慢，因此我需要为它们找到解决方法。

没错，我正在将 mahout 视为集群库。是否有任何现成的开源实现可以使用 mahout 或其他库进行主题检测？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-28T11:43:54.427

我认为以下论文是我在不知道集群数量的情况下遇到的主题检测的最佳方法之一。

[http://www.uni-weimar.de/medien/webis/research/events/tir-08/tir08-papers-final/wartena08-topic-detection-by-clustering-keywords.pdf](http://www.uni-weimar.de/medien/webis/research/events/tir-08/tir08-papers-final/wartena08-topic-detection-by-clustering-keywords.pdf)

# ruby-on-rails - 如何在rspec中测试采用递归方法的非变量？

> ID：11756413
> 
> 赞同：1
> 
> 时间：2012-08-01T09:31:46.020
> 
> 标签：ruby-on-rails, ruby, recursion, rspec

这是等待测试的代码，似乎是鸡蛋问题。

```
def generate_number
  number = Array.new(8){rand(10)}.join
  return number unless Book.exists?(:number => number)
  generate_number
end 
```

在方法中添加一个变量将很容易处理这个问题，但我认为可能有更好的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:56:19.047

您的方法返回一个随机字符串，因此您无法测试显式返回值。你可以测试的是：

1.  该方法返回一个由 8 位数字组成的字符串
2.  该方法返回的字符串不是任何现有书籍的编号

# jquery - Ajax 网络服务

> ID：11756415
> 
> 赞同：0
> 
> 时间：2012-08-01T09:31:58.200
> 
> 标签：jquery, ajax, web-services

我的 ajax 请求有很多问题。我手动测试了 Web 服务并且工作正常，但我的 jquery ajax 请求显示下一个错误：

```
XMLHttpRequest cannot load http://www.newvision.pt/InlineDisplays/Displays.asmx/GetTicketsXMLDebug?&DisplayIds=1|2\. Origin http://localhost is not allowed by Access-Control-Allow-Origin. 
```

我的ajax请求是：

```
$.ajax({
        type: "POST",
        dataType : "xml",
        url: "http://www.newvision.pt/InlineDisplays/Displays.asmx/GetTicketsXMLDebug?&DisplayIds=1|2" ,
        crossDomain: true,
        // jsonp: false,
        // processData: false,
        success: function(data){

            console.log(data);

        },
        error: function(objeto, quepaso, otroobj){
            console.log(this.url);
            console.log("ERROR");
        }
    }); 
```

如果有人知道是什么问题我会apreciatte它！！！谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:33:39.857

这是跨域请求的古老问题 对跨域请求进行简单的谷歌搜索，您将看到数百万的结果。出于安全原因，您不能将请求从一个域发送到另一个域。

再次使用 jsonP 格式有一些可能性，快速搜索应该可以帮助您。

# sql-server - SQL Server varchar 内存使用

> ID：11756418
> 
> 赞同：0
> 
> 时间：2012-08-01T09:32:07.883
> 
> 标签：sql-server

有一个专栏`field1 varchar(32)`

如果我只在此字段中存储“ABC”，则需要 3 个字节。当 SQL Server 访问该列并将其缓存在内存中时，它需要多少内存？3字节还是32字节，如何证明你的答案？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T12:08:35.737

SQL Server 不会缓存该列。它将缓存恰好包含该值的整个页面，因此它将始终缓存 8192 字节。页面的位置取决于[行](http://technet.microsoft.com/en-us/library/ms189087%28v=sql.105%29)内存储与[行溢出](http://technet.microsoft.com/en-us/library/ms186981%28v=sql.105%29)存储以及列是否[稀疏](http://msdn.microsoft.com/en-us/library/cc280604.aspx)等因素。

现在一个更好的问题是这样一个值在页面中占据了多少？答案也不是直截了当的，因为该值可以存储为 uncompressed、[row-compressed](http://msdn.microsoft.com/en-us/library/cc280576.aspx)、[pagecompressed](http://msdn.microsoft.com/en-us/library/cc280464)或[column-compressed](http://rusanu.com/2012/05/29/inside-the-sql-server-2012-columnstore-indexes/)。确实，行压缩对 varchar 字段没有影响，但页面压缩确实如此。

*现在，对于回答类型值在非压缩表中的行内占用**多少存储空间`varchar(32)`*的直接方式，最佳资源是[存储引擎内部：记录剖析](http://www.sqlskills.com/blogs/paul/post/Inside-the-Storage-Engine-Anatomy-of-a-record.aspx)。阅读 Paul Randal 的文章后，您将能够回答问题，并证明答案。

此外，您必须考虑以该列作为键或包含该列的任何二级索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:37:10.710

平均为其申报规模的 50%。这方面有很多文档。这是我从[How are varchar values stored in a SQL Server database?](https://stackoverflow.com/questions/5704634/how-are-varchar-values-stored-in-ms-sql-database)

# iphone - UIFont Sizes：半磅大小可能吗？

> ID：11756419
> 
> 赞同：3
> 
> 时间：2012-08-01T09:32:08.797
> 
> 标签：iphone, ios, fonts, uikit, uifont

我想知道为什么这三个之间没有区别：

```
textView.font = [UIFont fontWithName:f size:10.0];
textView.font = [UIFont fontWithName:f size:10.5];
textView.font = [UIFont fontWithName:f size:10.9]; 
```

无论如何，字体将显示为 10。字体大小会从 CGFloat 转换为整数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:50:43.837

我认为字体大小正在改变，但小于 1 的增量非常小，即我们的眼睛无法弄清楚。`textView` **获取字体大小**后就可以看到了。每次增加**字体大小**后，看看它打印了什么`NSLog`..**`textView`**

 **```
textView.font = [UIFont fontWithName:@"Arial" size:10.0];
float fontSize1 = textView.font.pointSize;
NSLog(@"fontSize1 = %f",fontSize1);

textView.font = [UIFont fontWithName:@"Arial" size:10.5];
float fontSize2 = textView.font.pointSize;
NSLog(@"fontSize2 = %f",fontSize2);

textView.font = [UIFont fontWithName:@"Arial" size:10.9];
float fontSize3 = textView.font.pointSize;
NSLog(@"fontSize3 = %f",fontSize3); 
```

你会得到这样的：

**字体大小1 = 10.000000**

**字体大小2 = 10.500000**

**字体大小3 = 10.900000****

# php - HTTP 错误 500.0 - 内部服务器错误 该页面无法显示，因为发生了内部服务器错误

> ID：11756421
> 
> 赞同：0
> 
> 时间：2012-08-01T09:32:21.590
> 
> 标签：php, iis-7.5

我正在使用 php 和 IIS 7.5。错误的其他细节：

```
Module  FastCgiModule
Notification    ExecuteRequestHandler
Handler PHP_via_FastCGI
Error Code  0x00000000
Requested URL   http://localhost:80/example.php
Physical Path   C:\inetpub\wwwroot\example.php
Logon Method    Anonymous
Logon User  Anonymous 
```

example.php 有以下代码：

```
<?php
class Persons {
    function say_hello() {
    echo "Hello my name is Sithelo Ngwenya. <br/>"
    }
}
$person = new Persons();
echo get_class($person) . "<br/>";

?> 
```

如何修复错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:42:49.927

`echo "Hello my name is Sithelo. <br/>"`在您的功能中缺少一个`;`.

# android - 在 ListView 项目中赋予未读的效果

> ID：11756422
> 
> 赞同：1
> 
> 时间：2012-08-01T09:32:28.047
> 
> 标签：android, android-listview

我正在使用自定义的 ListView，我正在尝试获得电子邮件已读/未读效果（即阅读时加粗）。由于我使用的是光标适配器，我无法破解它；这是我的代码

```
String[] from = new String[]
        { 
        cursor.getColumnName(4), 
        cursor.getColumnName(3),
        cursor.getColumnName(1),
        cursor.getColumnName(2),
        cursor.getColumnName(7),
        cursor.getColumnName(o)
        //,cursor.getColumnName(10)
        //cursor.getColumnName(columnIndex)
        };
      int[] to = new int[] 
        { 
        R.id.pay_freq, 
        R.id.tax_period,
        R.id.tax_date, 
        R.id.tax_year, 
        R.id.net_pay,
        R.id.row_id
        };
      strGetReadorNot = cursor.getString(10);            
      if(strGetReadorNot.equals("0"))
      {
       setTypeface(null,Typeface.BOLD);
      }
      else
      {

      }
      //Adapter used as interface between the widget and String array
      adapters = new SimpleCursorAdapter(PayslipListActivity.this, R.layout.list_items,cursor, from, to);
      setListAdapter(adapters); 
```

有什么帮助吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:39:40.960

您必须使用自定义 CursorAdapter。

`bindView()`检查是否已阅读电子邮件并设置 textView 的字体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:40:22.100

您需要实现`SimpleCursorAdapter.setViewBinder`并在绑定 each 时`View`，检查邮件是否未读/已读并将`TextView`Style 设置为相应的粗体。

# css - 在 MSIE 中恢复输入元素的初始边框

> ID：11756423
> 
> 赞同：0
> 
> 时间：2012-08-01T09:32:30.240
> 
> 标签：css, internet-explorer

`input { border: initial; }`这可能是一个需要回答的微不足道的问题，但是在 IE8 和 9 中是否存在等效的问题？

如果有人知道颜色是什么，我会很好地使用带有显式边框的嵌套框来获得默认的 IE 外观（因为它们可以`initial`在其他浏览器中被覆盖以清除它们）。

我已经尝试过的事情：`2px inset #XXX`X 有不同的值；`2px inset threedhighlight`;`-ms-initial`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:57:50.593

不，[`initial`](http://www.w3.org/TR/css3-values/#common-keywords)并不意味着“浏览器默认”。它表示根据 CSS 规范定义的属性初始值，与浏览器默认值无关。对于`border`，它`thin none`后面是`color`属性的值。（该`initial`值受 Chrome 支持，但不受 Firefox 或 IE 9 支持。）

您可以尝试将属性显式设置为您希望成为浏览器默认值的值，尽管这通常因浏览器版本而异。页面[http://www.iecss.com](http://www.iecss.com)被描述为显示 IE 默认样式表功能。根据它，以下内容适用于 IE 6：

```
background-color: #FFF;
border-style: inset;
border-width: 2px;
font-family: sans-serif;
font-size: 10pt;
overflow: hidden;
padding: 1px;
zoom: 1; 
```

对于 IE 7 到 IE 9，页面具有相同的声明，除了`border-style`缺少的 。这是不可能的，因为初始值为`none`。也许意图是说边框样式在 CSS 中是不可描述的。但对我来说，它看起来真的很内嵌。

要将某些元素的某些属性保留为浏览器默认值，请不要在 CSS 中设置它们。使用在需要时排除它们的选择器。这有时可能需要添加标记。

# spring - 服务器端验证无法正常工作

> ID：11756427
> 
> 赞同：1
> 
> 时间：2012-08-01T09:32:39.893
> 
> 标签：spring, spring-mvc

我正在为我的表单配置服务器端验证。我的问题是当控件进入 Areavalidator 类时

```
 @Override
    public boolean supports(Class<?> clazz) {
    return Area.class.isAssignableFrom(clazz);
} 
```

从上述方法中，控件再次返回到控制器类，在错误集中它显示零错误。我的问题是为什么它没有进入我正在做验证工作的方法中。@Override 公共无效验证（对象目标，错误错误）{

```
 Area object = (Area)target;

    ValidationUtils.rejectIfEmptyOrWhitespace(errors, "areaName",
            "label.areaNameRequired");

   if(object.getAreaCode().length()==0)

    {
        {
            errors.rejectValue("areaCode", "label.areaCode", null);
        }

    }   

    } 
```

我的控制器类中用于验证的代码

```
 @Autowired
    private AreaValidator areaValidator;

    @InitBinder("area")
    protected void initBinder(WebDataBinder binder) {
        binder.setValidator(areaValidator);
    }

    @RequestMapping(value = "/saveGridArea", method = RequestMethod.POST)
    public String saveCountry(@ModelAttribute @Valid Area area,ModelMap map,BindingResult error) {

        if (error.hasErrors()) {
            return "area";
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:55:44.697

这是因为当你这样做时`@Valid`，它应该在 :`BindingResult`旁边有相应的权利`modelAttribute`：这里，你`ModelMap`介于两者之间，使得框架无法将链接/关联的错误与`modelAttribute`.

您只需要更改方法变量的顺序。

试试这个，它应该工作：

```
@RequestMapping(value = "/saveGridArea", method = RequestMethod.POST)
public String saveCountry(@ModelAttribute @Valid Area area,BindingResult error, ModelMap map){
        ...
} 
```

# c# - C# 中的打印机设置

> ID：11756429
> 
> 赞同：0
> 
> 时间：2012-08-01T09:32:43.350
> 
> 标签：c#, printing

我正在我的应用程序中创建一个 PDF 文件，然后打印它（工作正常。）

当我在另一台计算机/打印机上打印此 pdf 时，它看起来不一样！我希望它在我打印的任何打印机上看起来总是一样的。

也许我必须设置边界？像这样：

```
PrinterSettings ps = new PrinterSettings();
ps.DefaultPageSettings.HardMarginX = 0;
ps.DefaultPageSettings.HardMarginY = 0; 
```

但是 HardMargin 是不可写的。你们有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:46:00.937

尝试这样设置：

```
 PrintDocument printDocument1 = new PrintDocument();

        var printerSettings = new System.Drawing.Printing.PrinterSettings();
        printerSettings.PrinterName = "Printer name";// optional
        //printerSettings.PrinterName = "HP Officejet J6400 series";

        printDocument1.PrinterSettings = printerSettings;

        printDocument1.PrintPage += printDocument1_PrintPage;
        PrintDialog printDialog1 = new PrintDialog();
        printDialog1.Document = printDocument1;
// in the dialog, you can set up the paper size, etc.
        printDialog1.UseEXDialog = true;
        if (printDialog1.ShowDialog() == DialogResult.OK)
        {
        printDocument1.Print();
        } 
```

处理函数：

```
private void printDocument1_PrintPage(object sender, System.Drawing.Printing.PrintPageEventArgs e)
    {
//This print form a rich textbox, but you can render pdf here.
        //e.Graphics.DrawString(richTextBox1.Text, richTextBox1.Font, Brushes.Black, 100, 20);
        //e.Graphics.PageUnit = GraphicsUnit.Inch;
    } 
```

# java - 使用 smack 连接到 Google Talk

> ID：11756432
> 
> 赞同：6
> 
> 时间：2012-08-01T09:32:46.660
> 
> 标签：java, smack, google-talk

我想开发一个连接到 Google Talk 并允许用户与其朋友聊天的 Java 应用程序。我正在使用 smack API 和下面的代码：

```
ConnectionConfiguration config = new ConnectionConfiguration("talk.google.com",5222,"gmail.com");
SASLAuthentication.supportSASLMechanism("PLAIN", 0);
XMPPConnection connection  = new XMPPConnection(config);
try {
    connection.connect();
} catch (XMPPException e) {
    e.printStackTrace();
}
try {
    connection.login("username", "password");
} catch (XMPPException e) {
    e.printStackTrace();
} 
```

但我得到了休闲例外：

```
SASL authentication PLAIN failed: invalid-authzid: 
    at org.jivesoftware.smack.SASLAuthentication.authenticate(SASLAuthentication.java:337)
    at org.jivesoftware.smack.XMPPConnection.login(XMPPConnection.java:203)
    at org.jivesoftware.smack.Connection.login(Connection.java:348)
    at Main.main(Main.java:21) 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T08:55:24.877

这应该可以解决问题，非常简单

```
import org.jivesoftware.smack.Chat;
import org.jivesoftware.smack.ChatManager;
import org.jivesoftware.smack.ConnectionConfiguration;
import org.jivesoftware.smack.MessageListener;
import org.jivesoftware.smack.XMPPConnection;
import org.jivesoftware.smack.XMPPException;
import org.jivesoftware.smack.packet.Message;
import org.jivesoftware.smack.packet.Presence;

 public class SenderTest 
{
public static void main(String args[])
{
    //ConnectionConfiguration connConfig = new ConnectionConfiguration("localhost", 5222);
        //connConfig.setSASLAuthenticationEnabled(false);
     //ConnectionConfiguration connConfig = new ConnectionConfiguration("localhost", 5222);
     ConnectionConfiguration connConfig = new ConnectionConfiguration("talk.google.com", 5222, "gmail.com");
       XMPPConnection connection = new XMPPConnection(connConfig);

        try {
            connection.connect();
            System.out.println("Connected to " + connection.getHost());
        } catch (XMPPException ex) {
            //ex.printStackTrace();
            System.out.println("Failed to connect to " + connection.getHost());
            System.exit(1);
        }
        try {
            connection.login("sender@example.com", "a");
            System.out.println("Logged in as " + connection.getUser());

            Presence presence = new Presence(Presence.Type.available);
            connection.sendPacket(presence);

        } catch (XMPPException ex) {
            //ex.printStackTrace();
            System.out.println("Failed to log in as " + connection.getUser());
            System.exit(1);
        }

    ChatManager chatmanager = connection.getChatManager();
    Chat newChat = chatmanager.createChat("receiver@gmail.com", new MessageListener() {
        public void processMessage(Chat chat, Message message) {
            System.out.println("Received message: " + message);
        }
    });

    try {
        newChat.sendMessage("Howdy!");
        System.out.println("Message Sent...");
    }
    catch (XMPPException e) {
        System.out.println("Error Delivering block");
    }
}

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-30T11:38:38.210

这拯救了我的一天

```
connectionConfig = new ConnectionConfiguration(host, port, service);
connectionConfig.setSASLAuthenticationEnabled(false);
connectionConfig.setTruststoreType("BKS");
connection = new XMPPConnection(connectionConfig); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T10:40:04.283

This is the method I used to connect to google talk using smack.

```
 private ConnectionStatus status;
 private XMPPConnection xmppConnection;

public void connect(String server, int port, String s) throws Exception
{
xmppConnection = new XMPPConnection(new ConnectionConfiguration(server, port,s));
xmppConnection.connect();
xmppConnection.addConnectionListener(this);
xmppConnection.getChatManager().addChatListener(this); 
} 
```

and the authentication.

```
public void authenticate(String username, String password) throws Exception
{
  xmppConnection.login(username, password);
buddyList.setSession(xmppConnection);
setStatus(ConnectionStatus.AUTHENITCATED);
} 
```

# c# - 反射是比较相同类型的两个对象的更好方法吗？

> ID：11756433
> 
> 赞同：2
> 
> 时间：2012-08-01T09:32:50.450
> 
> 标签：c#, wpf, reflection

**背景：**

我有 2 个相同类型的对象实例。一个对象填充了我连接到的设备的配置，另一个对象填充了我存储在硬盘驱动器上的配置版本。

用户可以更改其中任何一个，所以我想比较它们并将差异呈现给用户。

每个对象都包含许多 ViewModel 属性，所有这些属性`ViewModelBase`都是我想要比较的。

**问题：**

比我要提议的方法更好。

我正在考虑使用反射来检查我的对象中的每个属性，对于每个扩展`ViewModelBase`，我将遍历每个属性。对于任何不同的内容，我会将名称和值放入一个列表中，然后将其呈现给用户。

而不是发明这个轮子，我想知道这是否是以前解决过的问题？有没有更好的方法来完成它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T09:34:58.723

根据要比较的属性数量，手动检查将是更有效的选择。但是，如果您有很多属性或希望检查是动态的（即您只需添加新属性并且它会自动工作），那么我认为反射是这里的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T09:42:41.080

为什么不为您的类型实现等于运算符？

[http://msdn.microsoft.com/en-us/library/ms173147(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms173147(v=vs.80).aspx)

编辑：仔细阅读后，我发现您实际上要问的是进行实际比较的最有效方法是什么。

通过反射来节省代码但速度较慢。通过大量手动比较来完成它相当快，但代码更多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T10:06:38.720

如果你相当威慑和懒惰的好方法。您可以混合使用这两种解决方案的优点。借助[cci](http://ccimetadata.codeplex.com/)之类的工具，您可以发出比较属性的方法。这样做的好处是您的反射代码将在编译时执行，让您可以在运行时执行严格的转发方法。这使您可以根据需要更改模型，而不必担心比较代码。这样做有一个缺点，那就是学习 cci，这是非常具有挑战性的。

# sencha-touch-2 - 如何在 JSONP 请求“回调”方法中导航不同的视图

> ID：11756434
> 
> 赞同：0
> 
> 时间：2012-08-01T09:32:50.347
> 
> 标签：sencha-touch-2

//下面是我的回调方法，它返回一些响应代码。现在问题是我需要从回调方法导航到不同的视图。我在用户登录中使用的这个逻辑。为我提供一些解决方案，我可以在下面导航到不同的视图，我声明了一些用于导航到不同视图的代码，这些代码在回调方法外部而不是在回调方法内部工作正常。

```
 Ext.data.JsonP.request({
                url:'url',
                method: 'POST',
                callbackkey: 'callback',
                params: {
                    userID: user_Id,
                    password: password,
                    format: 'json'
                },
                callback: function (response, value, request) {
                       //Logic should come here
                    }
                    else
                    {
                    }
                },

                failure: function (response, request) {
                }
            });

enter code here 
```

//下面是配置项

```
config: {
        refs: {
            homepage:'HP'
        }
    } 
```

//我在成功块中添加下面的代码但出现错误

```
 var noteEditor = this.getHomepage();
  Ext.Viewport.animateActiveItem(noteEditor, this.slideLeftTransition); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:49:12.417

假设你在做类似的事情

```
Ext.data.JsonP.request({
            url:'url',
            method: 'POST',
            callbackkey: 'callback',
            params: {
                userID: user_Id,
                password: password,
                format: 'json'
            },

            scope: this,      /// fix handler scope

            callback: function (response, value, request) {
                if () {
                   //Logic should come here
                   var noteEditor = this.getHomepage();
                   Ext.Viewport.animateActiveItem(noteEditor, this.slideLeftTransition);     
                }
                else
                {
                }
            },

            failure: function (response, request) {
            }
}); 
```

你必须添加一个**范围：这个**属性到 ajax 调用。

干杯，奥列格

# java-me - 如何在 j2me(java) 中处理多个 rss 文件

> ID：11756436
> 
> 赞同：0
> 
> 时间：2012-08-01T09:32:55.200
> 
> 标签：java-me, rss

我正在为 2 个 xml 文件在 j2me(java) 中开发 Rss Feed Reader App，但我的 for 循环是

有问题，xml文件给出null，当我运行我的应用程序时，控制不会在我的循环getXMLFeed（url1）中使用这个方法；，而不是它正在完成 for 循环。任何人都可以帮忙吗？我的循环是否正确？一旦检查我的源代码？我遇到了 for 循环的问题

检查我的源代码：

```
 urls = new String[2];//Array Declaration
 urls[0] = "http://www.teluguone.com/news/tonefeeds/topnews/topnews-20.rss";
 urls[1] = "http://www.teluguone.com/news/tonefeeds/topstory/topstory-25.rss";
 for (int i = 0; i < urls.length; i++) //iterration
 {        
      myThread = new ParseThread(this);           
      myThread.getXMLFeed(url1);                     
      myDysplay.setCurrent(mform);
 }

public void getXMLFeed(final String url) {
        Thread t = new Thread() {
            public void run() {
                    myConnection = (HttpConnection) Connector.open(url);//HttpConnection
                    InputStream stream = myConnection.openInputStream();
                    ParseXMLFeed(stream);
           } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:48:45.707

也许您只是忘记粘贴该行，但似乎您没有调用`t.start()`内部`getXMLFeed`方法。

# windows - 如何仅使用一个命令在本机 Windows telnet 客户端程序中登录和执行 ftp 命令

> ID：11756438
> 
> 赞同：0
> 
> 时间：2012-08-01T09:33:07.693
> 
> 标签：windows, ftp, ftp-client

我想做的是发出一个包含我要执行的 ftp 命令的命令。我希望我的命令包含用户名、密码和命令。

我只能使用 windows 本地 ftp 客户端程序，而且似乎对此没有任何帮助。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:52:15.117

你读过'ftp /吗？例如

```
Ftp -s:YouFileWithFtpCommands 
```

# jquery-ui - 如何使用以下代码生成上下文菜单

> ID：11756440
> 
> 赞同：0
> 
> 时间：2012-08-01T09:33:17.090
> 
> 标签：jquery-ui, jquery, jquery-plugins

使用这段代码，我得到了 JSON 数据，但我只想显示一个上下文菜单。你能修改这段代码吗？

```
 switch (htmlTagName) {
        case 'a':
            alert('a'+'isShiftExists:'+isShiftExists+'length:'+jQ(this).parents('td').find('div.wb_sm_m').length);
            if (jQ(this).parents('td').find('div.wb_sm_m').length > 0 && isShiftExists != -1) {
                //loop json array to build context menu
                jQ(this).parents('td').find('div.wb_sm_m').each(function() {

                    var jsonArr = JSON.parse(jQ(this).text());  //jsonArr contains the json array
                    alert(JSON.stringify(jsonArr));
                //loop items of the json array to find context menu item and link
                //                        jQ.each(jsonArr, function(key, val) {
                //                    
                //                            });
                });
            }
            break;

        case 'td':
            alert('td'+'isShiftExists:'+isShiftExists+'length:'+jQ(this).find('div.wb_sm_m').length);
            if (jQ(this).find('div.wb_sm_m').length > 0 && isShiftExists != -1) {
                //loop json array to build context menu
                jQ(this).find('div.wb_sm_m').each(function() {

                    var jsonArr = JSON.parse(jQ(this).text());  //jsonArr contains the json array
                    alert(JSON.stringify(jsonArr));
                });
            }
            break;

        default:
            break;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:41:47.890

检查此上下文菜单[插件](http://www.abeautifulsite.net/blog/2008/09/jquery-context-menu-plugin/)和[演示](http://labs.abeautifulsite.net/archived/jquery-contextMenu/demo/)页面以了解上下文菜单实现。

# visual-studio-2008 - 如何更改 SSIS 中的默认包保护级别？

> ID：11756442
> 
> 赞同：12
> 
> 时间：2012-08-01T09:33:25.620
> 
> 标签：visual-studio-2008, ssis

当我在 SQL Server 商业智能开发工作室中创建一个新的 SSIS 包时，默认的 ProtectionLevel 是`EncryptSensitiveWithUserKey`，但我们要使用的标准 ProtectionLevel 是`DontSaveSensitive`。

有谁知道是否有办法更改默认的 ProtectionLevel 值？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-01T15:53:25.217

## 2012用户欢欣鼓舞

SSIS 2012 允许包保护级别的项目级别设置。

![在此处输入图像描述](../Images/7d18ab114865f01c363ffa585edf17ae.png)

如果我手动将包保护级别更改为与项目不同的级别，则在您尝试运行/构建时它将失败。

`Project consistency check failed. The following inconsistencies were detected: Package3.dtsx has a different ProtectionLevel than the project.`

## 那么灵魂与2005-2008R2有什么关系呢？

我发现最好的方法是在项目中或在实际的 Visual Studio 安装中创建模板包。

在创建基础包、设置日志记录、配置、包保护级别等之后，您需要找到一种让人们使用它的方法。如果它是基于项目的，我发现让人们在复制包后重新生成包 ID 很重要。[BIDSHelper](http://bidshelper.codeplex.com/)非常适合解决这个问题——只需在解决方案资源管理器中右键单击包并选择`Reset GUIDs.`否则，我的基础包中有一个注释，提醒开发人员右键单击控制流，选择属性，然后在 ID 属性中单击`<Generate New ID>`

如果您选择从“添加，新项目菜单”（ctrl-shift-A）中建立模板，您只需将包复制到您的[模板文件夹](http://msdn.microsoft.com/en-us/library/ms345191.aspx)中。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-01T09:39:18.977

单击 SSIS 设计器中控制流选项卡的设计区域中的任意位置以显示包属性并根据您`ProtectionLevel`的安全树视图中的要求进行选择.....

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-07T10:59:53.543

根据我的经验，更改项目的属性级别对单个包没有任何作用。但是在以下页面中有一个解决方案：

[http://technet.microsoft.com/en-us/library/cc879310.aspx](http://technet.microsoft.com/en-us/library/cc879310.aspx)

这是使用这样的命令..

```
for %f in (*.dtsx) do dtutil.exe /file %f /encrypt file;%f;2;strongpassword 
```

在您的 SSIS 项目文件夹中。它将项目中的每个模块更改为倒数第二个值中指定的保护级别。如果为 0，则不存储值，则不需要密码，可以去掉最后一个分号和后面的所有内容。

以下 MSDN 文章有一个表格，其中包含每个保护级别的数字，与 dtutil 一起使用：

[http://technet.microsoft.com/en-us/library/ms141747.aspx](http://technet.microsoft.com/en-us/library/ms141747.aspx)

# regex - 使用 augeas 解析分段文件

> ID：11756446
> 
> 赞同：1
> 
> 时间：2012-08-01T09:33:45.893
> 
> 标签：regex, augeas

我正在尝试创建一个模块来解析以特定方式划分的 vim 文件。示例文件：

```
" My section {
    set nocompatible            " be iMproved
    set encoding=utf-8
" }
" vim: set foldmarker={,} foldlevel=0 foldmethod=marker: 
```

在编写模块时，我陷入了困境：

```
module Vimrc =
    autoload xfm
    let section = del "\" " "\" " . key /[^\n]+/ . del "\n" "\n" . store /.*/ . del "\" " "\" "
    let lns = [ section . del "\n" "\n" ] *
    let filter = (incl "*.vim")
    let xfm = transform lns filter 
```

我知道还有其他一些错误，但它抱怨 regex `key /[^\n]+/`，说：

> /tmp/aug/vimrc.aug:3.36-.48:exception: 键正则表达式 /[^ ]+/ 匹配一个 '/'

我不明白这个`/`角色与这有什么关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:51:59.170

正如错误所说，您的键正则表达式匹配斜杠，这是非法的，因为`/`它被用作树中的级别分隔符。

如果您的部分名称可以包含斜杠，您需要将它们存储为节点值，而不是标签，所以而不是：

```
{ "My section"
  { "set" = "nocompatible" { "#comment" = "be iMproved" } } } 
```

你必须这样做：

```
{ "section" = "My section"
  { "set" = "nocompatible" { "#comment" = "be iMproved" } } } 
```

# php - 通过 App 将照片上传到托管 App 的粉丝专页

> ID：11756453
> 
> 赞同：0
> 
> 时间：2012-08-01T09:33:58.173
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我试图弄清楚如何让用户使用 PHP-SDK 将照片从我的应用程序上传到我的粉丝页面（托管应用程序的页面）。

设想：

1.  用户打开APP

2.  有一个上传表单，用户可以在其中选择要上传的照片

3.  上传照片后，应该在托管应用程序的粉丝专页上

4.  看起来应该是用户直接去粉丝专页上传了一张照片，而且他的信息流上也应该有通知说他上传了一张照片到 XXX

（这只是关于图形 api，我不想要描述如何创建表单或 Facebook 应用程序等的指南。）

我的问题：这甚至可能吗？我尝试了什么：

```
 $data = $fb->api($fb->getPageId().'/photos', 'POST',
        array( 'source' => '@' .$img,
               'message' => 'Test'
    )); 
```

我用我的页面 ID 调用了 api。但不是将它上传到我的页面照片，而是将图像上传到用户画廊。

我还尝试使用页面的访问令牌上传它。但为了做到这一点，我需要大多数用户不会为这么简单的事情授予的“manage_pages”权限。

如果有人能引导我走向正确的方向，我将不胜感激。在此先感谢，托马斯

# jquery - 全幅问题第 2 部分

> ID：11756454
> 
> 赞同：0
> 
> 时间：2012-08-01T09:34:09.883
> 
> 标签：jquery, css

我的页面右侧似乎有一些过度的水平滚动。

我推断这与我网站顶部的脚本有关——当我删除它时，问题就会自行解决。

只是为了让您了解我希望实现的目标；我希望顶部的图像跨越浏览器的 100% 宽度，但保持类型居中。

当您第一次访问该站点时，您会很好地了解我在说什么。

[http://cargocollective.com/btatest](http://cargocollective.com/btatest)

提前致谢

迈克尔

**编辑**

代码如下：

```
<script type="text/javascript">
        // The social div 
    var $socialDiv,
        // The social div's height 
        socialDivHeight = 560,
        currentSocialDivHeight = socialDivHeight;

    $(document).ready(function() {
        $socialDiv = $('.social');
        $socialDiv.css({
            'background-image': 'url(http://a3.sphotos.ak.fbcdn.net/hphotos-ak-prn1/563655_324264884301748_471368753_n.jpg)',
            'background-repeat': 'no-repeat',
            'background-attachment': 'fixed',
           'background-size' : '110% auto',
            'height' : socialDivHeight + 'px',
            'margin-left' : '-100%',
            'margin-right' : '-100%',

        });
    });

    $(window).scroll(function() { 
        //Get scroll position of window 
        var windowScroll = $(this).scrollTop(); 

        var newSocialDivHeight = Math.max(0, socialDivHeight - windowScroll);

        if (Math.abs(newSocialDivHeight - currentSocialDivHeight) < 1)
            return;

        $socialDiv.css({
            'opacity' : 1 - windowScroll / 400
        });

        currentSocialDivHeight = newSocialDivHeight;
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:59:45.237

`<div class="social" style="background-image: …;">`导致滚动条。

您正在有效地创建一个 2160 像素宽（包括边距）的元素，并且想知道为什么您有一个水平滚动条？

你有：

```
.project_content { width: 720px; }
.social {
    /* implied with = 100%, since this is a block element */
    margin-left: -100%; /* add 720px on the left */
    margin-right: -100%; /* add 720px on the right */
} 
```

但是您的目标是使`.social`宽度为 100%。为了实现这一点，您可以重新排序您的 HTML 结构或通过分配`position: relative;`或将元素从“正常”流中取出`position: absolute;`。

# javascript - 用js修改类名

> ID：11756455
> 
> 赞同：0
> 
> 时间：2012-08-01T09:34:11.120
> 
> 标签：javascript, hyperlink

我的菜单列表包含：

```
<ul class="content_menu tabs">
        <a href="#" name="content_1" class="tab active"><li class="pager_link_0_active"></li></a>
        <a href="#" name="content_2" class="tab"> <li class="pager_link_1"></li></a>
        <a href="#" name="content_3" class="tab"><li class="pager_link_2"></li></a>
        <a href="#" name="content_4" class="tab"><li class="pager_link_3"></li></a>
        <a href="#" name="content_5" class="tab"><li class="pager_link_4"></li></a>
        <a href="#" name="content_6" class="tab"><li class="pager_link_5"></li></a>
        <a href="#" name="content_7" class="tab"><li class="pager_link_6"></li></a>
        <a href="#" name="content_8" class="tab"><li class="pager_link_7"></li></a> 
        <a href="#" name="content_9" class="tab"><li class="pager_link_8"></li></a>                                              
</ul> 
```

我想要做的是，当单击特定链接时，我需要从包含活动的 li 类名称中删除活动（例如 pager_link_0_active）并将活动添加到单击的 li（例如 pager_link_2_active）

我知道有一种方法可以做到：

`$(".active").removeClass("active");`

`$(this).addClass("active");`

但在我的情况下， active 不是分开的，它是类名的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:28:06.767

根据标准 ul 只能包含元素，但可以通过以下方式实现您想要的：

```
 $(function () {
            $('ul.content_menu.tabs a.tab').click(function () {
                var newActive = $(this);

                if (newActive.hasClass('active')) {
                    return;
                }

                var oldActive = $('ul.content_menu.tabs a.tab.active');
                oldActive.removeClass('active');
                var oldIndex = $('ul.content_menu.tabs a.tab').index(oldActive);
                oldActive.children().attr('class', 'pager_link_' + oldIndex);

                var newIndex = $('ul.content_menu.tabs a.tab').index(newActive);
                newActive.addClass('active');
                newActive.children().attr('class', 'pager_link_' + newIndex + '_active');
            });
        }); 
```

这是[小提琴](http://jsfiddle.net/qaKxa/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:08:36.413

最好将其设置为单独的类`<li class="pager_link_1 pager_active">`，然后您可以轻松删除和添加 pager_active。

如果 LI 总是只有一个类，试试这个：

```
var active_li = $(".active li");
var active_class = active_li.attr("class");
active_li.attr("class", active_attr.replace("_active", "");
var this_li = $(this).children("li");
var this_class = this_li.attr("class");
this_li.attr("class", this_class+"_active"); 
```

# c# - 如何强制 Web 浏览器控制记住代理凭据设置？

> ID：11756456
> 
> 赞同：2
> 
> 时间：2012-08-01T09:34:11.310
> 
> 标签：c#, vb.net, winforms, proxy, webbrowser-control

我正在使用 .net Web 浏览器控件通过具有凭据的代理在新窗口中打开一个 url。我为此使用此代码：

```
Public Function AppendHeader(ByRef OriginalHeader As String, ByVal Addition As String) As Boolean
    If OriginalHeader <> "" Then
        OriginalHeader = OriginalHeader + vbNewLine
    End If
    OriginalHeader = OriginalHeader + Addition
    OriginalHeader.Trim(vbNewLine.ToCharArray)
End Function

Public Function Base64Enc(ByRef s As String) As String
    Base64Enc = Convert.ToBase64String(System.Text.ASCIIEncoding.ASCII.GetBytes(s))
End Function

Public Sub Navigate()
    Dim webBrowser As WebBrowser = New WebBrowser()
    Dim headers As String = ""
    AppendHeader(headers, "Proxy-Authorization: Basic " & Base64Enc("user:pass"))
    'AppendHeader(headers, "Authorization: Basic " & Base64Enc("user:pass"))
    webBrowser.Navigate("http://stackoverflow.com", Guid.NewGuid().ToString(), Nothing, headers)
End Sub 
```

此代码有助于在第一次隐藏 Windows 安全窗口，但如果加载网页将请求发送到其他 url，则此窗口会一次又一次地显示（您可以在下面的屏幕截图中看到它）。

![截屏](../Images/d76f0ee50ddf85a35ff2f460d5d63416.png)

那么我能做些什么来解决这个问题呢？（我使用的是 winforms 和 vb.net，但 C# 也适用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-01T06:46:51.097

试一试我无法测试它:)

```
Private Sub webBrowser_Navigating(ByVal sender As Object, ByVal e As WebBrowserNavigatingEventArgs)

    Dim credentials As New System.Net.NetworkCredential("user", "pwd", "MyDomain") 
    Dim proxy As New System.Net.WebProxy("127.0.1.2", 80) 
    If proxy Is Nothing Then
        e.Cancel = True
    End If

End Sub 
```

# javascript - 通过 Node.js 路由 http 请求

> ID：11756459
> 
> 赞同：5
> 
> 时间：2012-08-01T09:34:27.433
> 
> 标签：javascript, node.js, networking, cucumber

我正在尝试使用 Node.js 进行黄瓜测试设置，可以使用 iframe 测试任何网站。通常，由于跨脚本安全限制，iframe 是不可行的。但是，如果有可能（我确定是这样。而且我相信您会提出解决方案）在请求特定 url 名称时通过请求的 url 获取作为测试目标的网站，以便 iframe将加载测试目标的副本。基本上只是一个标准的 node.js 服务器，它基于 req.url 获取特定页面，类似于地址请求路由器。

这是我公然尝试做到这一点。通过获取测试页。网址有效。但我在从 http 服务器切换到连接对象时遇到问题。有没有办法“提供”与 http 服务器响应的连接？

PS。我还使用两个 node.js 服务器创建了一个解决方案。节点 1 获取测试目标并将其与黄瓜测试页面混合。节点 2 托管黄瓜测试。该解决方案有效。但它会在发生 javascript 命名冲突的网站上产生问题。这就是为什么通过封装解决这个问题的 iframe 解决方案更具吸引力。

```
var http  = require('http');
var connect    = require('connect');
var port  = process.env.PORT || 8788;

var server = http.createServer(function(req, webres)
{
    var url = req.url;
    console.log(url);

    if(url == '/myWebsiteToBeTestedWithCucumberJS')
    {
        // Load the web site to be tested "myWebsiteToBeTestedWithCucumberJS"
            // And update the references
            // Finaly write the page with the webres
            // The page will appear to be hosted locally

        console.log('Loading myWebsiteToBeTestedWithCucumberJS');
        webres.writeHead(200, {'content-type': 'text/html, level=1'});
        var options =
        {  
                   host: 'www.myWebsiteToBeTestedWithCucumberJS.com,   
                   port: 80,   
                   path: '/'
        };

        var page = '';
        var req = http.get(options, function(res)
        {
            console.log("Got response: " + res.statusCode);   
            res.on('data', function(chunk)
            {
                page = page + chunk;
            });   
            res.on('end', function()
            {
                    // Change relative paths to absolute (actual web location where images, javascript and stylesheets is placed)
                    page = page.replace(/ href="\/\//g       , ' href="/');
                    page = page.replace(/ src="\//g          , ' src="www.myWebsiteToBeTestedWithCucumberJS.com');
                    page = page.replace(/ data-src="\//g     , ' data-src="www.myWebsiteToBeTestedWithCucumberJS.com');
                    page = page.replace(/ href="\//g         , ' href="www.myWebsiteToBeTestedWithCucumberJS.com');

                    webres.write(page);
                    webres.end('');
            });
        });
    }
    else
    {
        // Load any file from localhost:8788
            // This is where the cucumber.js project files are hosted
        var dirserver     = connect.createServer();
        var browserify = require('browserify');
        var cukeBundle = browserify({
          mount: '/cucumber.js',
          require: ['cucumber-html', './lib/cucumber', 'gherkin/lib/gherkin/lexer/en'],
          ignore: ['./cucumber/cli', 'connect']
        });
        dirserver.use(connect.static(__dirname));
        dirserver.use(cukeBundle);
        dirserver.listen(port);
    }
}).on('error', function(e)
{  
      console.log("Got error: " + e.message);   
});
server.listen(port);
console.log('Accepting connections on port ' + port + '...'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:10:35.347

毕竟这并不难。
作为 node.js 的新手，我必须意识到使用多个侦听器的可能性。
阅读[nodejitsu](https://github.com/nodejitsu/node-http-proxy)的功能帮助我解决了这个问题。

下面的示例在指定 url 时加载 www.myWebsiteToBeTestedWithCucumberJS.com，如下所示：`http://localhost:9788/myWebsiteToBeTestedWithCucumberJS` 其中所有其他请求都作为 cucumber.js 网站请求处理。
希望这对其他 node.js newcucumbers 有意义。

```
var http  = require('http');

var connect    = require('connect');
var port  = process.env.PORT || 9788;

var server = http.createServer(function(req, webres)
{
    var url = req.url;
    console.log(url);
    if(url == '/myWebsiteToBeTestedWithCucumberJS')
    {
        loadMyWebsiteToBeTestedWithCucumberJS(req, webres);
    }
    else
    {
        loadLocal(req, webres, url);
    }
}).on('error', function(e)
{  
      console.log("Got error: " + e.message);   
});
server.listen(port);
console.log('Accepting connections on port ' + port + '...');

function loadMyWebsiteToBeTestedWithCucumberJS(req, webres)
{
    console.log('Loading myWebsiteToBeTestedWithCucumberJS');
    webres.writeHead(200, {'content-type': 'text/html, level=1'});
    var options =
    {  
               host: 'www.myWebsiteToBeTestedWithCucumberJS.com',   
               port: 80,   
               path: '/'
    };

    var page = '';
    var req = http.get(options, function(res)
    {
        console.log("Got response: " + res.statusCode);   
        res.on('data', function(chunk)
        {
            page = page + chunk;
        });   
        res.on('end', function()
        {
                page = page.replace(/ href="\/\//g       , ' href="/');
                page = page.replace(/ src="\//g          , ' src="http://www.myWebsiteToBeTestedWithCucumberJS.com/');
                page = page.replace(/ data-src="\//g     , ' data-src="http://www.myWebsiteToBeTestedWithCucumberJS.com/');
                page = page.replace(/ href="\//g         , ' href="http://www.myWebsiteToBeTestedWithCucumberJS.com/');

                webres.write(page);
                webres.end('');
        });
    });

}

function loadLocal(req, webres, path)
{
    console.log('Loading localhost');
    webres.writeHead(200, {'content-type': 'text/html, level=1'});
    var options =
    {  
               host: 'localhost',   
               port: 9787,   
               path: path
    };

    var page = '';
    var req = http.get(options, function(res)
    {
        console.log("Got response: " + res.statusCode);   
        res.on('data', function(chunk)
        {
            page = page + chunk;
        });   
        res.on('end', function()
        {
                webres.write(page);
                webres.end('');
        });
    });
}

// Cucumber site listening on port 9787
var dirserver     = connect.createServer();
var browserify = require('browserify');
var cukeBundle = browserify(
{
    mount: '/cucumber.js',
    require: ['cucumber-html', './lib/cucumber', 'gherkin/lib/gherkin/lexer/en'],
    ignore: ['./cucumber/cli', 'connect']
});
dirserver.use(connect.static(__dirname));
dirserver.use(cukeBundle);
dirserver.listen(9787); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-26T16:08:15.557

```
var http = require('http'); 

// Create a server object 
http.createServer(function (req, res) { 

    // http header 
    res.writeHead(200, {'Content-Type': 'text/html'}); 

    var url = req.url; 

    if(url ==='/about') { 
        res.write(' Welcome to about us page'); 
        res.end(); 
    } 
    else if(url ==='/contact') { 
        res.write(' Welcome to contact us page'); 
        res.end(); 
    } 
    else { 
        res.write('Hello World!'); 
        res.end(); 
    } 
}).listen(3000, function() { 

    // The server object listens on port 3000 
    console.log("server start at port 3000"); 
}); 
```

# java - 收件人多时无法发送电子邮件

> ID：11756461
> 
> 赞同：0
> 
> 时间：2012-08-01T09:34:31.370
> 
> 标签：java, email, jakarta-mail, james

当我只向几个人发送电子邮件时，我的电子邮件代码运行良好，但是当我发送给所有联系的用户（177）时，我收到了这个错误：

```
[ERROR]  - org.apache.commons.mail.EmailException: Sending the email to the following server failed : hlrdwd.com:25 
```

代码如下：

```
HtmlEmail email = new HtmlEmail();
        email.setCharset("utf-8");
        if (vo.getContent() != null && vo.getContent().trim().length() > 0) {
            email.setHtmlMsg(vo.getContent());
        } else {
            email.setHtmlMsg("   ");
        }
        email.setSubject(vo.getTitle());
        email.setFrom(vo.getSender(), currentuname);
        email.setHostName(Property.getSmtp());
        List<Map<String, String>> toList = mm.formatAddress(vo
                .getReceiver());
        if (toList != null) {
            for (int i = 0; i < toList.size(); i++) {
                Map<String, String> tMap = toList.get(i);
                email.addTo(tMap.get(mm.KEY_EMAIL), tMap.get(mm.KEY_NAME));
                System.out.println(tMap.get(mm.KEY_EMAIL));
            }
        }
        email.setAuthentication(currentuser, password);

        String messageid = email.send(); 
```

我谷歌这个并添加`email.setTLS(true);`，但仍然无法工作。等待您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:41:48.840

问题是接收邮件服务器不喜欢同时向太多人发送消息。作为参考，postfix 默认拒绝超过 50 个收件人的邮件。

最简单的解决方案是发送多条消息，而不是一次发送给所有人。在极端情况下，您可以为每个用户发送一条消息——然后您有机会根据需要自定义消息，这也降低了它们被过滤为垃圾邮件的可能性。

# objective-c - Mac 到蓝牙设备的文件传输，简单的例子？

> ID：11756464
> 
> 赞同：5
> 
> 时间：2012-08-01T09:34:39.977
> 
> 标签：objective-c, macos, cocoa, bluetooth, iobluetooth

我花了两天时间搜索和阅读蓝牙编程指南，同时尝试拼凑一个小型 Mac 应用程序，该应用程序将从放置文件夹中检索图像并通过蓝牙将任何新文件发送到预定设备。似乎没有很多好的例子可用。

我现在可以生成蓝牙服务浏览器并选择设备及其 OBEX 服务，建立服务并创建连接，但随后什么也没有发生。谁能指出我的方向/向我展示一个可行的简单示例？

附上 AppDelegate 源代码。谢谢阅读！

```
#import "AppDelegate.h"

@implementation AppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {

    IOBluetoothServiceBrowserController *browser = [IOBluetoothServiceBrowserController serviceBrowserController:0];
    [浏览器运行模式];

    //IOBluetoothSDPServiceRecord
    IOBluetoothSDPServiceRecord *result = [[browser getResults] objectAtIndex:0];
    [自我描述：结果]；

    if ([[result.device.name substringToIndex:8] isEqualToString:@"Polaroid"]) {
        打印机=结果.设备；
        服务记录 = 结果；
        [自测打印]；
    }
    别的 {
        NSLog(@"%@ 不是一个有效的设备", result.device.name);
    }
}

-（无效）testPrint {
     currentFilePath = @"/Users/oyvind/Desktop/_DSC8797.jpg";
    [自我发送文件：当前文件路径]；
}

- (void) sendFile:(NSString *)filePath {
    IOBluetoothOBEXSession *obexSession = [[IOBluetoothOBEXSession alloc] initWithSDPServiceRecord:serviceRecord];

    如果（obexSession！= 无）
    {
        NSLog(@"OBEX 会话建立");

        OBEXFileTransferServices *fst = [OBEXFileTransferServices with OBEXSession:obexSession];
        OBEXDelegate *obxd = [[OBEXDelegate alloc] init];
        [obxd setFile:filePath];
        [fst setDelegate:obxd];

        OBEXError cnctResult = [fst connectToObjectPushService];

        如果（cnctResult！= kIOReturnSuccess）{
            NSLog(@"创建连接时出错");
            返回;
        }
        别的 {
            NSLog(@"OBEX 会话已创建。发送文件：%@", filePath);
            [fst sendFile:filePath];
            [打印机打开连接];
        }
    }
    别的 {
        NSLog(@"创建 OBEX 会话时出错");
        NSLog(@"发送文件出错");
    }
}

@结尾

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-30T10:07:15.927

好的; 这就是最终成为功能核心部分的内容。我制作的应用程序是一种用于宝丽来即时打印机的打印服务器，它只接受对象推送上的图像。

首先，确保监视文件夹存在。

```
/*

    Looks for a directory named PolaroidWatchFolder in the user's desktop directory
    and creates it if it does not exist.

 */

- (void) ensureWatchedFolderExists {
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSURL *url = [NSURL URLWithString:@"PolaroidWatchFolder" relativeToURL:[[fileManager URLsForDirectory:NSDesktopDirectory inDomains:NSUserDomainMask] objectAtIndex:0]];
    BOOL isDir;
    if ([fileManager fileExistsAtPath:[url path] isDirectory:&isDir] && isDir) {
        [self log:[NSString stringWithFormat:@"Watched folder exists at %@", [url absoluteURL]]];
        watchFolderPath = url;
    }
    else {
        NSError *theError = nil;
        if (![fileManager createDirectoryAtURL:url withIntermediateDirectories:NO attributes:nil error:&theError]) {
            [self log:[NSString stringWithFormat:@"Watched folder could not be created at %@", [url absoluteURL]]];
        }
        else {
            watchFolderPath = url;
            [self log:[NSString stringWithFormat:@"Watched folder created at %@", [url absoluteURL]]];
        }
    }
} 
```

然后扫描可用的打印机：

```
/*

    Loops through all paired Bluetooth devices and retrieves OBEX Object Push service records
    for each device who's name starts with "Polaroid".

 */

- (void) findPairedDevices {
    NSArray *pairedDevices = [IOBluetoothDevice pairedDevices];
    devicesTested = [NSMutableArray arrayWithCapacity:0];
    for (IOBluetoothDevice *device in pairedDevices)
    {
        if ([self deviceQualifiesForAddOrRenew:device.name])
        {
            BluetoothPushDevice *pushDevice = [[BluetoothPushDevice new] initWithDevice:device];
            if (pushDevice != nil)
            {
                [availableDevices addObject:pushDevice];
                [pushDevice testConnection];                
            }
        }
    }
} 
```

最后一个函数调用是对 BluetoothPushDevice 的内置方法来测试连接。这是响应的委托处理程序：

```
- (void) deviceStatusHandler: (NSNotification *)notification {
    BluetoothPushDevice *device = [notification object];
    NSString *status = [[notification userInfo] objectForKey:@"message"];

    if ([devicesTested count] < [availableDevices count] && ![devicesTested containsObject:device.name]) {
        [devicesTested addObject:device.name];
    }
} 
```

在服务器启动时，此方法将运行以响应计时器滴答声或手动扫描：

```
- (void) checkWatchedFolder {
    NSError *error = nil;
    NSArray *properties = [NSArray arrayWithObjects: NSURLLocalizedNameKey, NSURLCreationDateKey, NSURLLocalizedTypeDescriptionKey, nil];

    NSArray *files = [[NSFileManager defaultManager]
                      contentsOfDirectoryAtURL:watchFolderPath
                      includingPropertiesForKeys:properties
                      options:(NSDirectoryEnumerationSkipsHiddenFiles)
                      error:&error];

    if (files == nil) {
        [self log:@"Error reading watched folder"];
        return;
    }

    if ([files count] > 0) {
        int newFileCount = 0;

        for (NSURL *url in files) {
            if (![filesInTransit containsObject:[url path]]) {
                NSLog(@"New file: %@", [url lastPathComponent]);
                [self sendFile:[url path]];
                newFileCount++;
            }
        }
    }
} 
```

当找到新文件时，ww 首先需要找到一个不忙于接收打印文件的设备：

```
/*

 Loops through all discovered device service records and returns the a new OBEX session for
 the first it finds that is not connected (meaning it is not currently in use, connections are
 ad-hoc per print).

 */

- (BluetoothPushDevice*) getIdleDevice {
    for (BluetoothPushDevice *device in availableDevices) {
        if ([device.status isEqualToString:kBluetoothDeviceStatusReady]) {
            return device;
        }
    }
    return nil;
} 
```

然后用这个方法发送一个文件：

```
- (void) sendFile:(NSString *)filePath {
    BluetoothPushDevice *device = [self getIdleDevice];
        if( device != nil ) {
        NSLog(@"%@ is available", device.name);
        if ([device sendFile:filePath]) {
            [self log:[NSString stringWithFormat:@"Sending file: %@", filePath]];
            [filesInTransit addObject:filePath];
        }
        else {
            [self log:[NSString stringWithFormat:@"Error sending file: %@", filePath]];
        }
    }
    else {
        NSLog(@"No idle devices");
    }
} 
```

传输完成后，调用此委托方法：

```
/*

    Responds to BluetoothPushDevice's TransferComplete notification

 */

- (void) transferStatusHandler: (NSNotification *) notification {
    NSString *status = [[notification userInfo] objectForKey:@"message"];
    NSString *file = ((BluetoothPushDevice*)[notification object]).file;

    if ([status isEqualToString:kBluetoothTransferStatusComplete]) {
        if ([filesInTransit containsObject:file]) {
            NSFileManager *fileManager = [NSFileManager defaultManager];
            NSError *error = nil;
            [fileManager removeItemAtPath:file error:&error];
            if (error != nil) {
                [self log:[NSString stringWithFormat:@"**ERROR** File %@ could not be deleted (%@)", file, error.description]];
            }

            [self log:[NSString stringWithFormat:@"File deleted: %@", file]];
            [filesInTransit removeObject:file];
        }
        else {
            [self log:[NSString stringWithFormat:@"**ERROR** filesInTransit array does not contain file %@", file]];
        }
    }

    [self updateDeviceStatusDisplay];
} 
```

我希望这可以帮助别人！

# java - 如何授权来自另一个应用程序的有效用户的请求

> ID：11756467
> 
> 赞同：0
> 
> 时间：2012-08-01T09:34:40.793
> 
> 标签：java, authentication, spring-mvc

我有两个 Web 应用程序，app-A 和 app-B（都将托管在不同的服务器上）。现在对于 app-A 中的特定事件，我需要调用 app-B 的 URL，以便 app-B 可以进行一些处理。在 app-A 中，我正在关注登录/注销以授权用户。所以在 app-A，一切都是安全的。

但是如果 URL 暴露给某人，他们可以玩我的 app-B。那么我如何在 app-B 中验证请求来自 app-A 的授权用户？

我正在使用 Java（Spring MVC）。在此先感谢您的时间。

更新 ：

*   app-A 和 app-B 都将被托管并向公众公开。
*   app-A 和 app-B 在数据库和登录机制中有不同的用户（表）集。
*   该场景是管理员登录的app-A，并进行了一些活动。这会触发对未受保护的 app-B url 的调用。问题是 - 我如何确保在 app-B 中呼叫仅来自 app-A 的管理员，而不是来自任何外部用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:38:51.353

您需要在服务器上进行单点登录，就像[CAS](http://www.jasig.org/cas/)一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T11:53:10.267

您必须创建包含指定请求的链接，以及一些自定义文本（例如：会话 id）和此文本的数字签名，使用私钥签名，这将为您的应用程序共享。app-B 可以验证签名，如果通过，则触发请求。

[编辑]：您必须记住，传递的令牌必须具有有限的生存时间，否则如果有人抓住了链接，他以后就可以使用它。因此，您可以将创建令牌的日期和时间添加到您的“自定义文本”（如上所述）中，并让 app-B 不会触发 5 分钟前创建的请求。

# ios - 在 iOS 中向 JSON 请求添加 JSON Blob

> ID：11756468
> 
> 赞同：0
> 
> 时间：2012-08-01T09:34:53.517
> 
> 标签：ios, json

我需要能够创建一个 JSON 对象（我使用的是 iOS 5 中的内置类）。应该发送的 JSON 是这样的：

```
 {"request_type":"<the request type (a string)>" "security_level":<the security level (an int)> "device_type":"<android or ios (a string)" "version":<the app version (android, ios on different version schemes) (a float)> "email":<the email address of the user sending the request (a string)> "blob":{<the contents of the actual request, encrypted/encoded according to the security level (a map)>} 
```

我的问题是最后一部分，一个“blob”，它基本上只是另一个 JSON 对象，即

```
 {"display_name":"Jack Bower", "email":"jackb@gmail.com", "password":"roflcopter"} 
```

（让我们忘记密码是明文）

我可以使用 NSDictionary 创建所有内容，只是不知道如何添加最后一部分。

我的猜测是使用 NSDictionary 创建第一个请求。然后使用另一个 NSDictionary 创建第二个 blob 请求。然后只需将第二个 blob NSDictionary 作为对象添加回初始 NSDictionary。

NSJSONSerialization 会理解我想要做什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:51:19.483

好的，我想现在是凌晨 5 点，我真的很愚蠢：

这是答案：

```
NSDictionary *blobData = [NSDictionary dictionaryWithObjectsAndKeys:
                             @"email",userEmail,
                             @"password",userPassword,
                      nil];
NSString *blobString = [[NSString alloc]
                        initWithData:[NSJSONSerialization dataWithJSONObject:blobData options:kNilOptions error:&error]
                        encoding:NSUTF8StringEncoding];
NSDictionary *requestData = [NSDictionary dictionaryWithObjectsAndKeys:
                             @"login",@"request_type",
                             0,@"security_level",
                             @"ios",@"device_type",
                             @"blob",blobString,
                             nil];
NSData *JSONRequestData = NULL;
if ([NSJSONSerialization isValidJSONObject:requestData]) {
        NSData *JSONRequestData = [NSJSONSerialization dataWithJSONObject:requestData options:kNilOptions error:&error];
}
else NSLog(@"requestData was not a proper JSON object"); 
```

# javascript - 谷歌浏览器中的 getUserMedia

> ID：11756473
> 
> 赞同：1
> 
> 时间：2012-08-01T09:35:09.870
> 
> 标签：javascript, google-chrome

我无法在 Google Chrome (v21) 中显示视频流

代码

```
<html>
<head>
<script>
window.addEventListener('DOMContentLoaded', function() {
    navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;
    if(navigator.getUserMedia) {
        navigator.getUserMedia({video: true, audio: true}, function(stream) {
            var video = document.getElementById('sourcevid');
            video.src = stream;
        }, function(error) {
            console.error(error.code);
        });        
    } else {
        console.log('Not supported in this browser.');
    }
}, false);
</script>
</head>
<body>
 <video id="sourcevid" autoplay>Put your fallback message here.</video>
</body>
</html> 
```

请帮助我了解问题出在哪里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T18:40:54.530

我遇到了同样的问题，我通过调用视频元素的播放方法来修复它。即使添加了自动播放属性，它也不起作用。我对此的最佳猜测是，在加载视频标签的那一刻，源是空的，因此无法启动。

```
 navigator.getUserMedia = navigator.webkitGetUserMedia || navigator.getUserMedia;
    var success = function(stream){
      var video = document.getElementById('myVideo');
      video.src = webkitURL.createObjectURL(stream);
      //Even if autoplay is true you need to call the play method
      video.play();
    }
    var error = function(err){
      console.log(err)
    }
    navigator.getUserMedia({video:true, audio:true}, success, error); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:43:34.057

除非您启用了`flag`for Chrome ，否则这将不起作用...`Enable PeerConnection`

`about:flags`1)在 Chrome中访问网址
2) 查找`Enable PeerConnection`
3) 启用它
4) 重新启动 Chrome
5) ???
6) 利润……？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T10:38:46.447

我遇到了类似的问题，但它只是通过最初添加空白源来解决。

```
<video id="sourcevid" src="" autoplay>Put your fallback message here.</video> 
```

# c# - MVC3 C# 中用于计划任务的物理应用程序路径

> ID：11756481
> 
> 赞同：0
> 
> 时间：2012-08-01T09:35:38.527
> 
> 标签：c#, asp.net-mvc-3, httpwebrequest, scheduled-tasks

我正在开发基于 ASP.NET MVC3 C# 的电子商务网站。我已经使用每分钟运行一次的 System.Threading 实现了计划任务。此计划任务调用简单函数，它返回产品并插入到另一个表中以满足某些要求。

我的问题是：
有一个字段说 ProductImageURL 并且所有图像都存储在内容/拇指中。当我尝试使用 HttpContext.Request.PhysicalApplicationPath 获取此路径时，它会抛出这样的错误

`The method or operation is not implemented. at System.Web.HttpRequestBase.get_PhysicalApplicationPath()`

发生此错误是因为调度程序任务的功能是通过 http 请求产品图像，但发起请求不是 http ......只是简单的函数调用。如果我们手动输入物理路径，那么该功能似乎可以正常工作。

那么我该如何解决呢？或者有没有其他方法可以解决这类问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T04:24:23.430

这不起作用，因为您正在分派另一个线程来处理任务。那时，您不再有权访问 HttpContext....因为您在另一个线程上。新线程不知道 HttpContext 或它来自哪里。

您可能需要使用`Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);`或类似的工具来获取应用程序的路径。

另一种选择是将当前目录`HttpContext.Request.PhysicalApplicationPath`作为字符串参数传递给您的函数。真的取决于您的代码如何设置以生成后台线程并调用该函数。

# javascript - require.js：访问所有加载的模块

> ID：11756483
> 
> 赞同：44
> 
> 时间：2012-08-01T09:36:01.733
> 
> 标签：javascript, requirejs, js-amd

有没有办法访问 require.js 的所有加载模块？

背景：
我想`init()`在所有加载后自动调用我的 javascript-modules 的函数，请参阅[require.js + backbone.js：如何构造具有初始化函数的模块？](https://stackoverflow.com/questions/11740567/) 在没有 require.js 的情况下，我遍历了我自己的模块存储并调用了每个`init()`函数。
我现在想用 require.js 来做这件事。我知道调用`my_custom_init_function_favoritecolor_petname_love123`每个加载的模块（包括外部库）是危险的。我希望这会比手动更新所有模块（以及这些模块的要求）列表造成的麻烦更少。忘记一个模块 init() 比具有我的自定义函数名称的第三方库更有可能（尽管后者可能更难调试）。

或者有没有人对如何实现这一点有更好的想法？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-09-27T05:52:53.400

是的，`require.s.contexts._.defined`是一个对象，其键是模块名称，值包括从该模块返回的值。

`require.s.contexts._.defined`包括所有模块（`define()`例如`require()`作为程序起点的 Javascript 文件，`data-main`用于 RequireJS 指示）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-18T13:06:37.817

刚刚在我的 RequireJS 项目中完成了类似的行为。`require.s.contexts['_'].registry`保存已注册模块的列表。

我`Underscore.js`用于获取、过滤和迭代模块列表。也许以下代码片段可以帮助您：

```
var modules_registered = _.keys(require.s.contexts['_'].registry);
var modules_to_be_initialized = _.filter(modules_registered, function(module_title) {
    return module_title.indexOf('modules') > -1;
});

_.each(modules_to_be_initialized, function(module_name) {
    require([module_name], function(current_module) {
        current_module.init();
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-24T20:57:20.807

我很懒，所以我这样做了：

```
 var modulesToLoad = Object.keys(require.s.contexts['_'].registry);
    require(modulesToLoad); 
```

基于此处的其他答案。

# mysql - 创建mysql触发器有问题

> ID：11756487
> 
> 赞同：0
> 
> 时间：2012-08-01T09:36:27.227
> 
> 标签：mysql

嗨，我正在尝试创建以下触发器

CREATE TRIGGER TRIGBEFORE INSERT ON 员工为每一行开始更新员工 SET userId = userId +1 WHERE userId >1; 结尾

它给了我下面的mysql错误，请指出其中有什么问题。

# 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 5 行的 '' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:40:04.533

您忘记设置分隔符并拼错了一个单词：

```
delimiter |
CREATE TRIGGER TRIG BEFORE INSERT ON employee 
FOR EACH ROW BEGIN 
    UPDATE employee SET userId = userId +1 WHERE userId >1; 
END;
|
delimiter ; 
```

如果您没有设置另一个分隔符，`;`则语句将在第一个结束`;`，您的触发器定义将不完整。你需要告诉 MySQL 语句应该在你定义的分隔符处结束。之后，您可以使用`delimiter ;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:38:39.403

我认为你有一个拼写错误`TRIGBEFORE`：[manual here](http://dev.mysql.com/doc/refman/5.5/en/trigger-syntax.html)

```
CREATE TRIGGER trigger_name BEFORE INSERT ON ... 
```

# php - PHP，目录迭代器

> ID：11756491
> 
> 赞同：1
> 
> 时间：2012-08-01T09:36:46.293
> 
> 标签：php

我试图理解我从这段代码中得到的部分输出：

```
<?php
class DirectoryReader extends DirectoryIterator
    {

        function __construct($path)
        {

            parent::__construct($path);
        }

        function current()
        {
            return parent::getFileName();
        }

        function valid()
        {
            if(parent::valid())
            {
                if (!parent::isDir())
                {
                    parent::next();
                    return $this->valid();
                }
            return TRUE;
            }
            return FALSE;
        }

    } 

    try
    {

        $it = new DirectoryReader('C:\wamp\www');

        while($it->valid())
        {

            echo $it->current().'<br />';

            $it->next();
        }
    }
    catch(Exception $e)
    {
        echo 'No files Found!<br />';
    }
?> 
```

在代码中，您可以看到我将此路径传递给构造函数：`C:\wamp\www`，

我不明白的是：在我看到所有文件夹之前，第一行是`.`，第二行是`..`，然后我可以看到文件夹名称，例如：

```
.
..
someFolder
someOtherFolder 
```

我知道`.`显示当前文件夹并`..`返回文件夹层次结构，但我不明白为什么它会先打印`.`然后`..`再打印文件夹？我真的很想了解这个迭代器的动作，如果有人可以帮助我理解我将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:49:39.523

万一你不想显示。和..（如其他优秀答案中所述）此片段直接取自[手册页评论](http://php.net/manual/en/class.directoryiterator.php)。

向我们显示目录中除“。”之外的所有文件和目录。和 ”..”。

```
<?php

foreach (new DirectoryIterator('../moodle') as $fileInfo) {
    if($fileInfo->isDot()) continue;
    echo $fileInfo->getFilename() . "<br>\n";
} 
```

* * *

**编辑**

`FilesystemIterator`优先于`DirectoryIterator`. 使用前者时，默认情况下会跳过点文件（有一个标志来控制此行为）。

```
<?php

foreach (new FilesystemIterator('../moodle') as $fileinfo) {
    echo $fileinfo->getFilename() . "<br>\n";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T09:59:08.250

代码为点目录`parent::isDir()`返回，这意味着您自己的方法也为它们返回。`TRUE``valid()``TRUE`

您可以编辑您的方法以查看是否`isDot()`返回`TRUE`或`FALSE`相应地响应。

```
function valid()
{
    return $this->isDir() && !$this->isDot();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T09:42:01.870

该列表是正确的，因为`.`并且`..`也是每个目录中的（虚拟）节点。`valid()`如果你想抑制以点开头的文件/文件夹的输出（就像 Apache 在默认配置中所做的那样），你必须在给定的代码中自己实现适当的检查。

> 构建目录时，它最初会填充两个特殊文件的文件名部分：'.' 和“..”文件。'.' 的文件名部分 file 填充了已在其中创建条目的目录文件的 inode#；'。' 是实现当前目录的文件的硬链接。
> 
> '..' 文件的文件名部分由包含当前目录文件的文件名部分的目录文件的 inode# 填充。'..' 是指向实现当前目录的直接父级的文件的硬链接。
> 
> 来源： http: [//linuxgazette.net/105/pitcher.html](http://linuxgazette.net/105/pitcher.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T09:42:10.043

它打印 . 和 .. 因为该类仅检查该文件夹是否是一个既 . 和..是

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T09:54:41.070

此外，结果是排序的，这就是为什么 '.' 出现在“..”和“some_other_directories”之前。

# css - 更改跨度类的默认 Twitter Bootstrap 边距 20px

> ID：11756493
> 
> 赞同：5
> 
> 时间：2012-08-01T09:36:53.920
> 
> 标签：css, twitter-bootstrap, html

我用

```
<div id="windows">
    <div class="row-fluid">
        <div class="span4 mywindow">Text</div>
        <div class="span4 mywindow">Text</div>
        <div class="span4 mywindow">Text</div>
    </div>
</div> 
```

在特殊宽度的 div #windows 内。

我想减少这三个块之间的默认 20px 空间。

这些CSS代码

```
#windows .span4
{
    margin-right:-10px;
} 
```

在块之间设置适当的空间，但每个块保持相同的宽度，因此总宽度小于父 div 的 100%（有一个正确的空间）。

我可以通过更改块的宽度来修复它`!important`。所以修复是

```
#windows .span4
{
margin-right:-10px;
width:180px !important;
} 
```

那么问题是：如果我必须如此努力地修复它，那么在我的窗口中使用 Twitter Bootstrap span4 类是否有意义？

我的意思是，修复 Twitter Bootstrap 跨度类的边距和宽度是一个好习惯，还是有一个更简单、更好的解决方案来修复块？PS Twitter Bootstrap 也用于页面上的其他目的（因此 span4 并不是我使用 Twitter Bootstrap 的唯一原因）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T12:35:22.060

您正在尝试更改列之间的*装订线宽度。*最简单的方法是在下载之前自定义 BS 构建：

[http://twitter.github.com/bootstrap/customize.html#variables](http://twitter.github.com/bootstrap/customize.html#variables)

更改`@gridGutterWidth`那里的值（对于固定布局），然后下载您的构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T11:12:35.580

这可能会帮助人们在 Rails 应用程序中使用 bootstrap 作为 gem 来解决同样的问题。

如果您将引导程序与 gem 'bootstrap-sass' 一起使用，则可以直接覆盖此默认值，如下所示：

```
.span{
  margin-left:0px;
} 
```

这会覆盖 gem 给出的默认边距。

# mediacontroller - 来自给定媒体实体的启用链接

> ID：11756495
> 
> 赞同：0
> 
> 时间：2012-08-01T09:37:05.940
> 
> 标签：mediacontroller, v4l2

在 Linux V4L2 和媒体控制器架构中，我们将媒体设备视为媒体实体，并在旅途中动态地建立它们之间的连接..!! 例如，demux0（demuxer 0）可以连接到 Vid_plane1（赋予主视频输出的实体名称）。此外，一个媒体实体可以一次与多个媒体实体连接。

我的问题是，如果我想找出特定媒体实体输出垫（接收器垫）存在多少启用的连接，找到它的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:34:10.880

您可以使用 media-ctl 实用程序，它将枚举指定媒体控制器中的所有 v4l2 实体。

您应该注意的一件事是 media/v4l2 头文件的目标内核版本与 media-ctl 实用程序中的头定义之间的区别。

[http://git.ideasonboard.org/media-ctl.git](http://git.ideasonboard.org/media-ctl.git)

# jquery - 如何使用 jquery 仅更改单击链接的背景颜色

> ID：11756502
> 
> 赞同：0
> 
> 时间：2012-08-01T09:37:21.567
> 
> 标签：jquery, html, css

有链接列表，如果我单击另一个链接，如何使用 jquery 更改仅单击链接的背景颜色并将其恢复为原始颜色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T09:44:44.510

这应该为您做到这一点：

```
$("a").click( function(event)
{
    $("a").css('background-color', '');
    $(this).css('background-color', 'red');
}); 
```

在现实世界中，您可能会将这些链接放在 div 或其他东西中，所以应该是这样的：

```
<div id="divName">
<a href="#">Link</a>
<a href="#">Link</a>
<a href="#">Link</a>
</div>
​
<script language="javascript">

$("#divName a").click( function(event)
{
    $("a").css('background-color', '');
    $(this).css('background-color', 'red');
});

</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T09:43:20.503

也许像这样基本的东西？

```
$("#linkDivWrapper").on("click", ".linkClass", function () {
    $(this).css({'background-color': '#ccc'});
}); ​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T09:48:12.127

非常普遍，因为没有发布标记，并且针对所有`<a>`元素并阻止默认操作，因为转到新页面将使突出显示链接非常无用：

```
var elems = $('a'); //select all a elements, could use class instead;

elems.on('click', function(e) {
    e.preventDefault(); //prevent default action
    $(this).addClass('highlight'); //add highlight class to clicked
    elems.not(this).removeClass('highlight'); //remove highlight class from others
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T10:12:59.620

[**检查这个 jsfiddle 演示**](http://jsfiddle.net/libinvbabu/9R5CG/)

**HTML：**

```
<ul id="menu">
    <li><a href="#">Link 1</a></li>
    <li><a href="#">Link 2</a></li>
    <li><a href="#">Link 3</a></li>
</ul​​​​​​​​​​​​​​&gt;​​​​​​​​ 
```

**脚本：**

```
$("#menu li a").click( function(event)
{
    $("li a").css('background', '');
    $(this).css('background', '#f5c491');
});​ 
```

希望这会帮助你。

# c++ - 堆栈变量或函数声明

> ID：11756504
> 
> 赞同：2
> 
> 时间：2012-08-01T09:37:29.490
> 
> 标签：c++, linux, g++

> **可能重复：**
> [最令人头疼的解析：为什么不 A a(()); 工作？](https://stackoverflow.com/questions/1424510/most-vexing-parse-why-doesnt-a-a-work)

我在 file1.h 中有两个类：

```
class ZoneRecord {
public:
    //a lof of stuff here
};

class RegisterRecord {
public:
RegisterRecord(ZoneRecord rec); //this function register object rec in a fabric
}; 
```

file2.cpp 有：

```
#include "file1.h"
class MockZoneRecord: public ZoneRecord {
public:
MockZoneRecord(): ZoneRecord() {}
};

RegisterRecord mockrecord_register(MockZoneRecord()); 
```

这段代码编译得很好，除了一件事。它说 mockrecord_register 是一个函数的声明。但我实际上想创建一个名为 mockrecord_register 的 RegisterRecord 类型的全局对象。如何明确告诉编译器这不是函数原型，而是对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T09:41:04.923

您正在经历[最令人烦恼的解析](http://en.wikipedia.org/wiki/Most_vexing_parse)。

解决此问题的一种方法是使用复制，例如

```
RegisterRecord mockrecord_register = RegisterRecord(MockZoneRecord()); 
```

另一个是括号的使用，就像 yuri Kilochek 的答案一样。

如果您的编译器与 C++11 兼容，则可以使用以下构造：

```
RegisterRecord mockrecord_register{MockZoneRecord()}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:40:15.200

在参数周围放置括号：

```
RegisterRecord mockrecord_register((MockZoneRecord())); 
```

# javafx - javafx 2.1 中 javafx 1.3 的 javafx.lang 包的替代品是什么？

> ID：11756508
> 
> 赞同：2
> 
> 时间：2012-08-01T09:37:56.783
> 
> 标签：javafx, javafx-2

我正在将我的项目从 javafx 1.3 转换为 javafx 2.1。但我的`javafx.lang`包裹有问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T15:04:54.530

JavaFX 1.3 lang 包内容被拆分并移至下一个位置：

*   持续时间成为`javafx.util.Duration`
*   `javafx.lang.FX`方法可从：
    *   `javafx.application.Platform`
    *   `javafx.application.Application`
    *   和标准 Java SE 类
*   `Buildins`不存在了。它的功能可以被 Java SE 替代。

# ruby-on-rails - 如何在 Rails3 中使用子域作为参数？

> ID：11756511
> 
> 赞同：2
> 
> 时间：2012-08-01T09:38:17.480
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing, subdomain

当我访问[http://testuser.example.com](http://testuser.example.com)时，我希望它使用参数“testuser”访问“用户”控制器的“显示”操作，这是用户模型中的用户名。

我怎样才能轻松存档？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T10:07:06.740

这应该工作

```
@user = User.find_by_name(request.subdomain) 
```

**更新**

路线

```
constraints(:subdomain => /.+/) do
  root :to => 'user#show'
end 
```

只需在子域存在时定义新的路由规则，您可以根据需要更改它。

# php - 从 php 中的 pattern_match 中排除一些模式

> ID：11756514
> 
> 赞同：0
> 
> 时间：2012-08-01T09:38:19.887
> 
> 标签：php, preg-split

我正在尝试将原始文本拆分为句子。所以我只是使用函数并根据,和`preg_split()`的出现将原始文本拆分为句子。但正如预期的那样，由于某些特殊情况，例如“博士”、“先生”等，我遇到了一些问题。`?``.``;``.`

我怎样才能从分裂中排除这样的词或模式？

```
preg_split('/(\. )|(\? )|(\; )!(Mr\.)/', $content); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:46:48.990

您可以在正则表达式中添加[否定](http://www.regular-expressions.info/lookaround.html)的lookbehind，以确保点前面没有“先生”和公司：

```
preg_split('/((?<!(Mr|Dr))\.|\?|;) /', $content); 
```

我还稍微简化了正则表达式。您还应该考虑用`\s|$`（任何空格或输入结尾）替换当前表达式末尾的单个空格。

**[看到它在行动](http://ideone.com/pjkJM)**。

# udp - 我可以在 Cloud Foundry 上打开一个端口吗？

> ID：11756517
> 
> 赞同：0
> 
> 时间：2012-08-01T09:38:34.313
> 
> 标签：udp, port, cloud-foundry

我想建立从终端设备到 My App On Cloud Foundry 的 UDP 连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:16:33.697

Cloud Foundry 上的应用程序的所有输出都由代理通过 Web 服务器 (nginx) 传递，据我所知，只有 http 和 https 是打开的。

也许你应该看看与你的控制台应用程序通信的替代方式，你想要实现什么样的通信？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T11:19:17.513

从终端设备使用 CF_HOST:UDP_PORT 应该没问题。我假设在您的终端设备上部署了一个应用程序（Java、Perl 等），在 CF 服务器上部署了一个具有 UDP 通道的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-01T09:21:55.080

这是一篇旧帖子，但在将我的应用程序移植到关键的云铸造平台时，我遇到了类似的问题。

事实证明，您可以继续对任何传出流量使用 tcp 或 udp，而无需进行任何特殊配置（例如服务绑定等），而对传入流量仅使用 http 或 https。但是，这里提出了一个有趣的解决[方法](https://stackoverflow.com/a/17878010/2215986)

# jquery - 使用 jquery 传递时在 JSP 中读取 JSON 对象时出错

> ID：11756519
> 
> 赞同：1
> 
> 时间：2012-08-01T09:38:47.823
> 
> 标签：jquery, json, jsp

我想在 jquery 中创建一个 json 对象并在 jsp 中处理它并以 json 格式返回。我创建了一个 json 对象并发布到一个 jsp 文件：

```
$.post("processDropDown.jsp", $('#fields tr td input').serializeArray(),
function(data) {
alert(data);
}); 
```

在 jsp 文件中，我读取参数并放入 jsonobject，但返回 json exception-null object 异常。

```
JSONObject inp = new JSONObject();
Enumeration enumeration = request.getParameterNames();
try {
    while (enumeration.hasMoreElements()) {
        String parameterName = (String) enumeration.nextElement();
        out.print("\nParameter = " + parameterName+"\n");
        inp = inp.getJSONObject(request.getParameter(parameterName));
        out.print("::" + inp.toString());
    }
} catch(Exception ex) {
    out.print(ex);
} 
```

JSON.stringify() 方法在我将其传递给 jsp 之前在客户端中返回以下输出。

```
JSON.stringify($('#fields tr td input').serializeArray());

[{"name":"valueField","value":"12"},{"name":"textField","value":"Twelve"},{"name":"valueField","value":"34"},{"name":"textField","value":"ThirtyFour"}] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:49:16.473

改变

```
$.post("processDropDown.jsp", 
   $('#fields tr td input').serializeArray(),
   function(data) {
      alert(data);
   }
); 
```

到

```
$.post("processDropDown.jsp", 
   JSON.stringify($('#fields tr td input').serializeArray()),
   function(data) {
      alert(data);
   }
); 
```

您发布的是 Object Literal 而不是 JSON。很好地阅读了关于[Object vs JSON here](http://benalman.com/news/2010/03/theres-no-such-thing-as-a-json/)

请注意`.serializeArray()`文档中的这一点：

> .serializeArray() 方法创建一个**JavaScript 对象数组，准备好编码为 JSON 字符串。**它对表示一组表单元素的 jQuery 对象进行操作。

强调我的...

# perl - 打印 perl 结构成员

> ID：11756524
> 
> 赞同：0
> 
> 时间：2012-08-01T09:39:16.203
> 
> 标签：perl

我有一个结构，想打印出引号内的内容

```
#!/usr/bin/perl

use Class::Struct;

struct( astruct => [ test => '$']);

my $blah = new astruct;
$blah->test("asdf");

print "prints array reference: '$blah->test'\n";
print "prints content: '", $blah->test, "'\n"; 
```

输出是

```
prints array reference: 'astruct=ARRAY(0x20033af0)->test'
prints content: 'asdf' 
```

有没有办法打印引号内的内容？

它让我的代码有点邋遢，不得不一直打开和关闭引号。当使用 `` 运行使用结构内容的命令时，这也是有问题的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:41:43.847

你考虑过 Perls 的[Data::Dumper](http://search.cpan.org/~smueller/Data-Dumper-2.131/Dumper.pm)吗？

> 给定一个标量或引用变量的列表，用 perl 语法写出它们的内容。引用也可以是对象。每个变量的内容在单个 Perl 语句中输出。正确处理自引用结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T11:12:33.933

该变量`$blah`保存一个数组引用，并在*取消引用*之前*插入*到字符串中。为了改变这一点，我们将解引用放在字符串之外：

 *```
print "prints no array reference any more: '".($blah->test)."'\n";
# parenthesis was optional 
```

或者用匿名数组拉一个小技巧：

```
print "prints no array reference any more: '@{[$blah->test]}'\n"; 
```

我们取消引用 ( `@{...}`) 一个匿名数组 ( `[...]`)，我们从`test`方法的返回值构造它。（我们的结构字段，无论如何。）

虽然这两种方法在构造字符串时都有效，但第二种形式可以很容易地用于 a `qx`or *backticks*环境。您还可以构建一个字符串`$command`，然后使用`qx($command)`.

如果您不需要 的附加功能`Class::Struct`，您可以随时使用哈希并省去麻烦：

```
%blah = (test => 'asdf');
print "prints my value: '$blah{test}'\n"; 
```

或者

```
$blah = {test => 'asdf'};
print "prints my value: '$blah->{test}'\n"; 
```*

# caching - Jenkins 禁用或清除 Maven 构建的缓存

> ID：11756528
> 
> 赞同：8
> 
> 时间：2012-08-01T09:39:29.573
> 
> 标签：caching, maven, dependencies, jenkins

我们的 maven 项目都建立在 jenkins 上，然后将工件部署到 maven 存储库。

然而，由于某种原因，在构建一个依赖于刚刚构建的其他项目的项目时，似乎存在某种缓存或更新滞后。

假设工件 A 中存在错误，并且 B 依赖于 A。现在我在本地修复错误，更新 B 中的依赖项，运行 B，一切都很好。很明显，我签到了。现在我在 Jenkins 上构建 A，然后在 B 上构建。然后我得到新构建的 B 并运行它。错误仍然存​​在。几个小时后，如果我再次构建 B，它会很好地得到新的 A，并且错误消失了..

所以必须有办法强制jenkins在其服务器上使用新的A。使用`mvn -u`or`mvn --update-snapshots`将无济于事。它将检查更新并没有找到..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T01:32:30.633

我相信在 Maven/Jenkins 中不可能有这样的缓存行为，因为你所有的快照都是在本地构建在同一个 Jenkins 实例中的。不需要“更新快照”选项，因为您没有从远程仓库获取它。但是，我建议您查看 Jenkins 中的存储库设置。在 Jenkins 中，我们可以更改使用哪个 maven 存储库（默认情况下，它由整机共享，但可以更改为 per-workspace 或 per-executor 等。（在您的项目配置下`Build -> Advanced`，您可以检查“ `Use private Maven repository`”，并且在中`Manage Jenkins -> Configure System -> Maven Project Configuration`，您可以选择管理方式`Local Maven Repository`。我怀疑您已将其更改为“本地到执行者”

如果您有任何设置导致 A 的构建安装在 B 使用的不同存储库中，您可能会遇到遇到的问题。

# jquery - jQuery找到最近的匹配元素

> ID：11756529
> 
> 赞同：72
> 
> 时间：2012-08-01T09:39:29.227
> 
> 标签：jquery, dom-traversal

我有一系列带列的行，我想选择在释放键时调用函数的字段（价格输入）`input`的前一列中的字段值。`input`

我试过了：

```
quantity = $(this).parent().parent().children().val() ;
quantity = $(this).parent().parent().children().closest('.inputQty', this).val() ; 
```

但两者都不起作用。

DOM 的一个例子：

```
<div class="row">
    <div class="column"><input class="inputQty" id="quantity0" /></div>
    <div class="column"><input class="someOther" id="Other0" /></div>
    <div class="column">
        <div class="cSelect">
            <select id="currency0"><option>£</option></select>
            <input class="price" id="price0" />
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2012-08-01T09:43:05.237

```
var otherInput = $(this).closest('.row').find('.inputQty'); 
```

这上升到一个行级别，然后回到`.inputQty`.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-01T09:42:44.763

`closest()`只找父母，我猜你真正想要的是[`.find()`](http://api.jquery.com/find/)

```
$(this).closest('.row').children('.column').find('.inputQty').val(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T09:42:23.940

获取元素的`.column`父`this`元素，获取其上一个兄弟元素，然后在那里找到任何输入：

```
$(this).closest(".column").prev().find("input:first").val(); 
```

演示：http: [//jsfiddle.net/aWhtP/](http://jsfiddle.net/aWhtP/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T09:42:36.493

你可以试试：

`$(this).closest(".column").prev().find(".inputQty").val();`

# java - 在 Eclipse 编辑器中检测选项卡关闭

> ID：11756534
> 
> 赞同：2
> 
> 时间：2012-08-01T09:40:18.963
> 
> 标签：java, eclipse-rcp

我有一个带有自己的编辑器的 Eclipse RCP 应用程序。类编辑器扩展自`org.eclipse.ui.texteditor.AbstractTextEditor`并添加到扩展中`plugin.xml -> org.eclipse.ui.editors`。如何检测用户何时关闭文档？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T10:42:35.117

对于编辑器关闭事件，请执行以下操作：

```
IWorkbenchPage page = ...;

    //adding a listener
IPartListener2 pl = new IPartListener2() {
        // ... Other methods
        public void partClosed(IWorkbenchPartReference partRef)
        {
            //if(partRef.getId().equals(youreditor.id){ /* do something*/ }
        }

};
page.addPartListener(pl); 
```

看看这些链接：

1.  [如何在 Eclipse 的默认代码编辑器中添加监听器？](https://stackoverflow.com/questions/10340798/how-to-add-a-listener-to-the-default-code-editor-in-eclipse)
2.  [常见问题解答 如何确定选择了哪个视图或编辑器？](http://wiki.eclipse.org/FAQ_How_do_I_find_out_what_view_or_editor_is_selected?)

# matlab - 向量的方向

> ID：11756539
> 
> 赞同：1
> 
> 时间：2012-08-01T09:40:40.847
> 
> 标签：matlab

如果我有 ：

```
a=magic(9); 
```

如何计算中任意两点之间向量的方向和大小`a`？例如，如果我定义`vec = [a(1,1) a(2,2)]`，向量的方向是否会定义为：`vecdir = a(1,1) - a(2,2)`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T12:34:05.480

计算方向的正确方法是使用`atan2()`代替`atan()`，因为`atan()`无法解析象限并在第二和第三象限中给出错误的角度（即当 x 为负时）。举个例子，

```
x = -1;
y = -1;
dir = atan(y/x);  % returns 0.78540 rad = 45 deg 
```

这显然是错误的方向。然而，`atan2()`产量

```
dir2 = atan2(y, x); % returns -2.3562 rad = -135 deg. 
```

如果您坚持使用`atan()`，则必须检查 x 参数的符号，并`pi`在它为负时添加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T10:57:08.413

```
vec = [x y]
dist = sqrt(sum(vec.^2)) % i.e. sqrt(x^2 + y^2)
dir = atan(y/x) % i.e. atan(vec(2) / vec(1)) 
```

# c# - 从 MS Access 获取图片到 C# 中的图片框

> ID：11756541
> 
> 赞同：1
> 
> 时间：2012-08-01T09:40:49.850
> 
> 标签：c#, ms-access

嗨，我使用下面的代码将图像保存到我的数据库中，

但现在我想知道如何将图片从数据库中获取到 PictureBox

你能帮我么。

```
private void button1_Click(object sender, EventArgs e)
{
    ofdFoto.ShowDialog();
    string i = ofdFoto.FileName.ToString();
    pbxFoto.ImageLocation = i;
}

private void button2_Click(object sender, EventArgs e)
{
    dbConn.Open();
    string querys = "INSERT INTO Fruits (Name, Picture) VALUES ('" + txtName.Text + "','" + ImageToByte(pbxFoto.Image) + "')";
    OleDbCommand cd = new OleDbCommand(querys, dbConn);
    cd.ExecuteNonQuery();
    dbConn.Close();
    MessageBox.Show("Picture saved", "Information", MessageBoxButtons.OK, MessageBoxIcon.Information);
}

public static byte[] ImageToByte(Image img)
{
    ImageConverter converter = new ImageConverter();
    return (byte[])converter.ConvertTo(img, typeof(byte[]));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:48:19.243

```
private void button1_Click(object sender, EventArgs e)
    {
        PictureBox p =new PictureBox();
        p.ImageLocation = ofdFoto.FileName.ToString();
        p.Location = new Point(100, 100);
        this.Controls.Add(p);
    } 
```

看看这对你有没有帮助！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:48:45.193

试试这个代码：

```
public static Bitmap BytesToBitmap(byte[] byteArray)
{
    using (var ms = new MemoryStream(byteArray))
    {
        var img = (Bitmap)Image.FromStream(ms);
        return img;
    }
} 
```

并设置为[`PictureBox.Image`](http://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox.image.aspx)属性：

```
pictureBox1.Image = BytesToBitmap(byteArray); 
```

# c# - SQL 更新语句错误

> ID：11756542
> 
> 赞同：0
> 
> 时间：2012-08-01T09:41:01.820
> 
> 标签：c#, sql, ms-access, ado.net

这个 SQL UPDATE 语句有什么问题？

```
try
{
   int ageValue = Int32.Parse(age.Text);

   string updateQuery = "Update \nMyTable \nSet \nFName = '" + fname.Text.ToString() + "',\nLName = '" + lname.Text.ToString() + "',\nAge = " + ageValue + ",\nCome = '" + from.Text.ToString() + "',\nTo = '" + to.Text.ToString() + "' Where Age=" + ageValue + ";";

   MessageBox.Show(updateQuery);

   OleDbConnection con = new OleDbConnection("provider=Microsoft.JET.OLEDB.4.0; Data Source = Database5.mdb");

   OleDbCommand com = new OleDbCommand(updateQuery, con);

   con.Open();
   com.ExecuteNonQuery();
   con.Close();
}
catch (FormatException ex)
{
    MessageBox.Show(ex.Message);
}
catch (OleDbException ex)
{
    MessageBox.Show(ex.Message);
} 
```

我收到了那个错误

> 更新语句中的语法错误

该 SQL 更新有什么问题？

工具：

*   微软访问 2003
*   微软 Visual Studio 2010 C#

请提前帮助和感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:46:37.413

尝试摆脱 \n 垃圾。

```
string updateQuery = "Update MyTable Set FName = '" + fname.Text.ToString() + "',LName = '" + lname.Text.ToString() + "',Age = " + ageValue + ",Come = '" + from.Text.ToString() + "',To = '" + to.Text.ToString() + "' Where Age=" + ageValue; 
```

输出连接的结果并尝试运行它。如果这不起作用，请在此处发布连接的结果，应该有人可以提供帮助。在不知道连接结果的情况下，很难知道出了什么问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T09:47:07.193

尝试像这样更改查询（删除`\n`s 和 final `;`）

```
string updateQuery = "Update MyTable Set FName = '" + fname.Text.ToString() + 
    "', LName = '" + lname.Text.ToString() + "', Age = " + ageValue + 
    ", Come = '" + from.Text.ToString() + "', To = '" + to.Text.ToString() + 
    "' Where Age=" + ageValue; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T19:51:31.737

这就是我用 C 语言编写内联 SQL 的方式：

```
string strSQL = "";
strSQL += "  Update MyTable Set  ";
strSQL += "  FName =  '" + fname.Text.ToString() + "'  ";
strSQL += "  ,LName = '" + lname.Text.ToString() + "'  ";
strSQL += "  ,Age =   '" + ageValue              + "'  ";
strSQL += "  ,Come =  '" + from.Text.ToString()  + "'  ";
strSQL += "  ,To =    '" + to.Text.ToString()    + "'  ";
strSQL += "  Where Age = '" + ageValue + "'  "; 
```

易于阅读且工作正常。

您还可以在连接到数据库之前将其添加到查询下方：

```
Response.Write(strSQL);
return; 
```

这将向您显示发布到服务器的内容，并使查找错误变得更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T09:48:26.410

您好，您可以尝试使用此代码

```
StringBuilder  stringBuilder = new StringBuilder() ;
stringBuilder.Append("Update MyTable Set FName = ") ;
stringBuilder.Append(fname.Text.ToString()) ;
stringBuilder.Append(",\nLName = ") ;
stringBuilder.Append(lname.Text.ToString()) ;
stringBuilder.Append(",\nAge = ") ;
stringBuilder.Append(ageValue) ;

stringBuilder.Append(",\nCome = ") ;
stringBuilder.Append(from.Text.ToString()) ;
stringBuilder.Append(",\nTo = ") ;
stringBuilder.Append(to.Text.ToString()) ;

stringBuilder.Append(" Where Age=") ;
stringBuilder.Append(ageValue) ;
stringBuilder.Append(";") ;

var result = stringBuilder.ToString(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T09:46:03.043

我建议您打开 Sql Profiler 并跟踪您的更新查询，因为它很容易阅读连接的查询字符串

# iphone - UIButton在iPhone中没有改变标题

> ID：11756554
> 
> 赞同：1
> 
> 时间：2012-08-01T09:41:48.043
> 
> 标签：iphone, xcode, uibutton

按钮不会更改标题。当我第一次单击它时，它会更改标题，但是当我隐藏表格时，它不会在按钮上显示标题。我不知道为什么`NSLog`它显示标题但不显示在按钮上

```
-(IBAction)btnClicked
{
    if (flag==1) 
    {
        flag=0;
        tblSimpleTable.hidden=NO;
        [i setImage:[UIImage imageNamed:@"UpArrow.png"]];
    }
    else
    {
        flag=1;
        tblSimpleTable.hidden=YES;
        NSLog(@"This is title %@",title);
        btn.titleLabel.text=title;
        [i setImage:[UIImage imageNamed:@"downArrow.png"]];
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T09:45:57.193

根据`[UIButton titleLabel]` [参考资料](http://developer.apple.com/library/ios/documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html#//apple_ref/occ/instp/UIButton/titleLabel)，该属性是*只读*的。

您将需要`[UIButton setTitle:forState:]`改用。

苹果[参考](http://developer.apple.com/library/ios/documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html#//apple_ref/occ/instm/UIButton/setTitle%3aforState%3a)。

**编辑**：您还可以缩减实现的大小：

```
- (IBAction)btnClicked
{
    tblSimpleTable.hidden = flag;
    [i setImage:[UIImage imageNamed:flag ? @"DownArrow.png" : @"UpArrow.png]];
    if (flag)
        [btn setTitle:@title forState:UIControlStateNormal];
    flag = !flag;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:46:36.260

用这种方法试试..

```
[button setTitle:@"Title" forState:UIControlStateNormal]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T09:43:57.497

请试试这个

```
[btn setTitle:@"My Title" forState:UIControlStateNormal]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T09:55:41.663

设置按钮的标题及其状态。在您的情况下，您的字符串是**标题**，然后像这样设置它..

```
[btn setTitle:title forState:UIControlStateNormal]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-15T18:04:56.800

尝试这个... `[btn setTitle:title forState:UIControlStateNormal]`

根据[UIButton](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIButton_Class/index.html#//apple_ref/occ/instp/UIButton/titleLabel)的 Apple 文档，`titleLabel`它是只读的。

# jquery - Jquery 仅链接操作

> ID：11756556
> 
> 赞同：0
> 
> 时间：2012-08-01T09:41:52.507
> 
> 标签：jquery, jquery-plugins

我有以下html代码：

```
<a href="/produkt" class="menuTabs">My Catalog 1 <span>(23752)</span></a> 
```

查询：

```
 $('a.menuTabs', '#subNav').mouseover(function (e) {
... 
```

这里的问题是我只想在“我的目录 1”而不是“跨度”选择时执行鼠标悬停功能。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:45:02.737

为什么不将要触发鼠标悬停的文本包装在自己的跨度中？

```
<a href="/produkt" class="menuTabs"><span class="mouseover">My Catalog 1</span> <span>(23752)</span></a>

$('a.menuTabs span.mouseover', '#subNav').mouseover(function (e) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:55:11.043

只需检查哪个元素是鼠标悬停的目标

```
$('a.menuTabs', '#subNav').mouseover(function (e) {
    if (e.target != this){
        $('.disp').text('s');
        return;
    }
    $(​'.disp'​​​​).text('a');
}​);​ 
```

[http://jsfiddle.net/brfLX/](http://jsfiddle.net/brfLX/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T09:44:13.107

完整的解决方案[在这里](http://jsfiddle.net/CZBMS/1/)：

```
$('a.menuTabs').mouseover(function (e) {});
$('a.menuTabs > span').mouseover(function (e) {  e.stopPropagation(); }); 
```

[与此](https://stackoverflow.com/questions/2364629/jquery-stop-child-triggering-parent-event)相同的问题。

# javascript - 完成后清除网格

> ID：11756559
> 
> 赞同：0
> 
> 时间：2012-08-01T09:42:05.153
> 
> 标签：javascript, jquery

在文字游戏中，我创建它的目的是通过拖放相应的字母来完成网格中的单词。这样做会导致网格后面的图像被显示出来。

目前，网格由 6 个、3 个字母的单词（18 个单元格）和 18 个空白单元格填充。

因此，当单词完成时，它们的样式会逐渐消失。然后，当所有单词完成后，我希望其余的单元格消失。我该怎么做？

这是掉落的脚本...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:02:21.647

我在这里假设“网格中的其余方块”是所有带有 class 的表格单元格`noglow`。在这种情况下，使它们全部消失的代码将如下所示：

```
// Make all table cells with the class 'noglow' fade out over 0.5 seconds
$('td.noglow').fadeOut(500, function() {
    // Optional callback function for when the elements have completely faded out
}); 
```

# android - HttpGet 在 android 中不起作用

> ID：11756566
> 
> 赞同：0
> 
> 时间：2012-08-01T09:42:25.510
> 
> 标签：android, ruby-on-rails

我正在尝试发出请求并从服务器获取响应。这是我的 HttpGet 请求。

```
public static String getAddress() throws Exception {
        final HttpGet get = new HttpGet("192.168.1.4:3000/api/1.0/geo/address/lookup");
    } 
```

我的服务器端是由 ruby​​ on rails 编写的。

路线.rb

```
map.with_options(:controller => "geo") do |geo|
    geo.geo_lookup_address "/api/1.0/geo/address/lookup", :action => "lookup_address" 
```

我的控制器是

```
class GeoController < ApiController
def lookup_address
      puts "lookup"
  end
end 
```

我的 html 是 lookup_address.html.erb

```
<h1>GEO</h1> 
```

当我在浏览器中输入地址（192.168.1.4:3000/api/1.0/geo/address/lookup）时，我看到了结果 GEO，但是当我在 android 应用程序中使用它时它不起作用我检查并且我有一个异常在 HttpGet 请求上，但问题是我无法找出究竟是什么 execption。这里有什么解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T09:43:26.907

你有没有尝试过？

```
"http://192.168.1.4:3000/api/1.0/geo/address/lookup" 
```

正如我在您的问题中看到的那样，`http://`您在**..**`HttpGet`

也不要忘记在您的应用程序清单文件中添加权限，

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

# java - Java：部分路径与文件的部分名称存在

> ID：11756567
> 
> 赞同：1
> 
> 时间：2012-08-01T09:42:30.503
> 
> 标签：java, file

如果我只知道目录结构的路径和文件的部分名称，我想知道是否有办法知道文件是否存在。

例如，我想检查以下路径中是否存在以下 tar.gz 文件：

```
/home/rah/data/download/lib/test@4.3-00@20120731.0.tar.gz 
```

当我知道

```
path = /home/rah/data/download/lib/
partial file name = test@4.3-00@20120731 
```

**（注意我缺少“0.tar.gz”）**。实际上，我不想在文件名中的日期之后计算 0（它可以是任何值 0、1、2、3...）。

所以我希望这个工作：

```
if( filename.canRead() ) {
//
} 
```

如果文件名类似于：“test@4.3-00@20120731..tar.gz *”，其中 STAR (* ) 可以是任意数字

我该怎么做？或者这是否可以检查部分路径是否存在，例如

/home/rah/data/download/lib/test@4.3-00@20120731？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T09:50:30.677

您可以编写一个[FileFilter](http://docs.oracle.com/javase/7/docs/api/java/io/FileFilter.html)并将其提供给[File.listFiles()](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#listFiles%28java.io.FileFilter%29)方法。大致上，它看起来像这样：

```
File dir = new File("/home/rah/data/download/lib/");

// list the files using a anonymous FileFilter
File[] files = dir.listFiles(new FileFilter() {

    @Override
    public boolean accept(File file) {
        return file.getName().startsWith("test@4.3-00@20120731");
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T09:46:31.983

好吧，您必须手动完成，列出文件夹中的所有文件，然后将每个文件与您的匹配条件进行比较，

Fo commons io 您可以执行以下操作

```
FileUtils.listFiles(new File("/home/"), new PrefixFileFilter("data"), null) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T09:49:07.637

如果您使用的是 Java SE 7，则可以使用新的监视服务：[http ://docs.oracle.com/javase/tutorial/essential/io/notification.html](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T09:52:11.147

是的。你会想看看[FileFilter](http://docs.oracle.com/javase/7/docs/api/javax/swing/filechooser/FileFilter.html)。

基本思想是使用[File.listFiles](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#listFiles%28java.io.FileFilter%29)方法，传入过滤器并检查结果数组的长度是否为 0

**更新了示例@ OPs 请求**

正如其他人已经指出的那样，它相对简单。

```
File path = new File("/home/rah/data/download/lib");
File[] listFiles = path.listFiles(new FileFilter() {

    @Override
    public boolean accept(File file) {

        String name = file.getName().toLowerCase();
        return name.startsWith("test@4.3-00@20120731");

    }

});

if (listFiles.length == 0) {

    // File does not exit

} else {

    // File exists

} 
```

你真的应该构建你自己的`FileFilter`，你可以传入`String`你需要匹配的，但我会把它留给

正如还指出的那样，您可以查看 Apache 的 CommonIO API

# xcode - 等到动画块在segue之前完成

> ID：11756572
> 
> 赞同：3
> 
> 时间：2012-08-01T09:42:56.603
> 
> 标签：xcode, ios5, animation, segue, block

我正在为我的卡片应用程序实现一些简单的动画。

到目前为止一切都很好，但在我可以说它完成之前，我还有一个细节需要修复。

**场景非常简单：**

在 segue 模态显示新屏幕之前，三张卡片必须以动画形式退出屏幕。

到目前为止，他的动画被执行并加载了新视图，但我无法解决的细节是“等到动画完成后再引入新视图”。

**这就是我的做法：**

1) 使用此方法设置退出动画

```
- (void)performExitAnimationWithCompletionBlock:(void (^)(BOOL))block
{    
    [UIView animateWithDuration:0.1f
                          delay:0.0f
                        options:UIViewAnimationOptionCurveEaseOut
                     animations:^
     {
         self.optionOneFront.center = self.optionOneBack.center = self.optionTwoFront.center;
         self.optionOneFront.transform = self.optionOneBack.transform = self.optionTwoFront.transform;

         self.optionThreeFront.center = self.optionThreeBack.center = self.optionTwoFront.center;
         self.optionThreeFront.transform = self.optionThreeBack.transform = self.optionTwoFront.transform;
     }
                     completion:^(BOOL finished)
     {
         CGPoint point = CGPointMake(self.optionTwoFront.center.x, self.view.frame.size.height * -2.0f);

         [UIView animateWithDuration:1.0f
                               delay:0.0f
                             options:UIViewAnimationOptionCurveEaseOut
                          animations:^
          {
              self.optionOneFront.center   = point;
              self.optionOneBack.center    = point;
              self.optionTwoFront.center   = point;
              self.optionTwoBack.center    = point;
              self.optionThreeFront.center = point;
              self.optionThreeBack.center  = point;
          }
                          completion:block];
     }];
} 
```

2）尝试在呈现“AddOptions”VC之前将segue代码包装在动画中

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    [self performExitAnimationWithCompletionBlock:^(BOOL finished)
     {
         // Executes the following "if" statement if the user wants to add new options
         if ([segue.identifier isEqualToString:@"AddOptions"])
         {
             UINavigationController *navigationController = segue.destinationViewController;
             OptionsViewController *controller = (OptionsViewController *)navigationController.topViewController;
             controller.delegate = self;
         }         
     }];    
} 
```

正如我之前所说，一切正常，但模式窗口在动画完成之前出现。

知道我缺少什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:28:19.233

与其在方法中触发动画，不如在想要开始动画过程时`prepareForSeque`尝试调用，然后在最终动画的完成块中使用方法手动触发序列。`[self performExitAnimationWithCompletionBlock]``[self performSegueWithIdentifier]`

我假设您的序列当前连接到故事板中的按钮触摸。如果是这种情况，您将不得不在情节提要中断开它。也许你可以通过连接到故事板上的一个不可见按钮来保持序列的活力，这样它就永远不会被自动触发。

相反，像这样编写按钮代码：

```
-(void)btnStartSeque:(id)sender{

      //trigger animations

      [self performExitAnimationWithCompletionBlock:^(BOOL finished){
         [self performSegueWithIdentifer:@"AddOptions" sender:self];
     }];    
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

   // Executes the following "if" statement if the user wants to add new options
    if ([segue.identifier isEqualToString:@"AddOptions"])
    {
      UINavigationController *navigationController = segue.destinationViewController;
      OptionsViewController *controller = (OptionsViewController *)navigationController.topViewController;
      controller.delegate = self;
    }               
} 
```

获得您想要的功能的另一种（也许更好？）解决方案是根本不使用序列，而是手动转换屏幕。在这种情况下，从情节提要中完全删除序列。还要确保在情节提要中提供 OptionsViewController 的标识符。对导致动画/过渡的动作执行以下代码：

```
-(void)btnStartModalTransition:(id)sender{

      //trigger animations

      [self performExitAnimationWithCompletionBlock:^(BOOL finished){

          //load the storyboard (sub in the name of your storyboard)
          UIStoryBoard* storyBoard = [UIStoryBoard storyBoardWithName:@"MyStoryBoard" bundle:nil]
          //load optionsviewcontroller from storyboard
          OptionsViewController *controller = (OptionsViewController *)[storyBoard instantiateViewControllerWithIdentifier:@"OptionsViewControllerIdentifier"];
          UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:controller];

         controller.delegate = self;
         [self presentModalViewController:navigationController animated:YES];
     }];    
} 
```

# ruby-on-rails - “新闻”资源的自定义路由

> ID：11756580
> 
> 赞同：0
> 
> 时间：2012-08-01T09:43:23.110
> 
> 标签：ruby-on-rails

我在 Rails 3.2 应用程序中有一个名为“新闻”的资源。我知道这不是用于资源的最佳名称，但我不想更改它。

我的路由有问题，因为 new_news_path 不起作用。

如何为新操作定义自定义路由？类似news#new的unused_news_path？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:34:38.967

在你的试试这个`routes.rb`：

```
match "unused" => "news#new" 
```

当您执行 a`rake routes | grep unused`时，您将获得以下输出：

```
unused /unused(.:format) news#new 
```

因此，您现在可以`unused_path`在您的视图和控制器上使用来执行相应的操作。

# visual-studio-2010 - VS2010 F5可用但Ctrl F5无效

> ID：11756581
> 
> 赞同：0
> 
> 时间：2012-08-01T09:43:23.077
> 
> 标签：visual-studio-2010

当我试图在 C# 环境中调用“LoadLibrary”时，我遇到了一个地狱般的问题。当我按“Ctrl + F5”进入直接运行环境时应用程序崩溃了，但如果我按“F5”进入调试模式肯定没问题。我试图直接运行应用程序，它有同样的错误。附件中有一些测试项目，我认为描述问题已经足够了。我是怎么解决的？

**Ps：**解决方案的环境必须设置为“Debug”，编译形式必须为“X64”，则ConsoleApplication2项目为“启动项目”。

我尝试使用“LibraryEssential”项目来调用“MathmaticLibrary”项目中的“MathmaticPower”函数。但是我的 C# 项目“ConsoleApplication2”通过“PInvoke LoadLibrary”加载了“LibraryEssential”dll 文件。

**一些改进**：我尝试在“管理员”中运行 C# exe 应用程序，没问题，但我用其他用户运行它，它失败了！我必须以管理员角色运行应用程序吗？我不想这样做。有没有其他方法解决这个问题？

附加文件：[LoadLibrary.zip](https://ftf-248.yousendit.com/download/1/04D3FB32693FD51B/8b10cd07266f297a0ee7042ee494b0bd770d55a3/LoadLibrary.zip?download_id=3819940999&user_locale=en&id=1461889965&ufid=04D3FB32693FD51B&file=LoadLibrary.zip)

# php - 权限被 mkdir 拒绝？

> ID：11756584
> 
> 赞同：0
> 
> 时间：2012-08-01T09:43:32.030
> 
> 标签：php, codeigniter, mkdir

我正在尝试使用 Codeigniter 创建一个目录。但它给了我这个错误：

```
Message: mkdir() [function.mkdir]: Permission denied. 
```

这是代码：

```
 $imageDir   = $_SERVER['DOCUMENT_ROOT'] . DS . 'public' . DS . 'images' . DS . 'products';
        $userDir = $imageDir . DS . $userId;

        if (!is_file($userDir) && !is_dir($userDir)) {
            if (!mkdir($userDir)) {
                return false;
            }
            return true;
        } 
```

我已经将权限更改为 777，但问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:04:39.300

尝试

```
$imageDir = $_SERVER['DOCUMENT_ROOT'] .'/public/images/products/';
$userDir = $imageDir . $userId; 
```

并尝试回显 $userDir 以便您可以找到它创建目录的路径。

# c# - GridView 的 UpdateMethod 没有触发

> ID：11756589
> 
> 赞同：0
> 
> 时间：2012-08-01T09:43:40.223
> 
> 标签：c#, asp.net, gridview, objectdatasource

我有一个以编程方式绑定到 ObjectDataSource 的 GridView，例如：

```
ObjectDataSource risks = new ObjectDataSource("Risks", "RetrieveProjectRisk");
risks.TypeName = "Promanto.ProjectRisks";
risks.DataObjectTypeName = "Promanto.ProjectRisk";
risks.SelectMethod = "RetrieveProjectRisk";
risks.DeleteMethod = "DeleteProjectRisk";
risks.InsertMethod = "AddProjectRisk";
risks.UpdateMethod = "UpdateProjectRisk";
risks.SelectParameters.Add("WhereClause", TypeCode.String, "ProjectID  ='PR0002'");
RisksGrid.DataSource = risks;
RisksGrid.DataBind(); 
```

但是当我单击编辑按钮然后更新我的值时，我首先得到一个错误，即 RowUpdating 应该存在。当我添加它时，我不知道该放什么。我的 UpdateMethod "UpdateProjectRisk" 不是应该自动触发吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:57:23.553

当您使用 时`ObjectDataSource`，仅提供`UpdateMethod`是不够的。

您的更新方法将需要有关要更新哪一行的参数。网格视图本身不提供此功能。

您需要实施`RowUpdating`以提供`UpdateParameters`更新您的所需的`ObjectDataSource`

看看这个[ObjectDataSource 示例](http://highoncoding.com/Articles/139_GridView_With_ObjectDataSource.aspx)

# php - 在第 5 次匹配后用 null 替换 char

> ID：11756595
> 
> 赞同：-1
> 
> 时间：2012-08-01T09:44:04.667
> 
> 标签：php

**执行以下操作的最佳方法是什么？**

```
# if I have the following string :
$str = "Foo Bar Foo Bar Foo Bar Foo Bar Foo Bar Foo Bar Foo Bar";
# and I want to remove "o" character after 5-th match so result I need is :
$newStr = "Foo Bar Foo Bar Fo Bar F Bar F Bar F Bar F Bar..."; 
```

我知道的方式：

```
 $str = "Foo Bar Foo Bar Foo Bar Foo Bar Foo Bar Foo Bar Foo Bar";
  $str = explode("o", $str);
  $new = "";
  $c = 1;
  foreach($str as $k) {
    if($c>5)
      $new .= $k;
    else 
      $new .= $k."o";
    $c++;
  } 
```

*我相信有更好的方法来做到这一点。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:00:26.930

必须有一百万种方法来做到这一点。我快速浏览了内置函数，看看是否有第`strpos`n^次出现的 a ，但没有。

这是**一个**解决方案。它可能不是最好的，但谁知道呢。

```
$str = "Foo Bar Foo Bar Foo Bar Foo Bar Foo Bar Foo Bar Foo Bar";

for (
    $offset = 0, $count = 0;
    $count < 5;
    $offset = strpos($str, 'o', $offset) + 1, $count++
);

$newStr = substr($str, 0, $offset++) .
    str_replace('o', '', substr($str, $offset)); 
```

抱歉，循环的疯狂，最近做了太多代码高尔夫！

这是另一种方法。

```
$str = "Foo Bar Foo Bar Foo Bar Foo Bar Foo Bar Foo Bar Foo Bar";

$newStr = implode('o', str_replace('o', '',  explode('o', $str, 6))); 
```

# windows-8 - 确定应用程序是在本地运行还是已通过 App Store 部署

> ID：11756598
> 
> 赞同：2
> 
> 时间：2012-08-01T09:44:10.433
> 
> 标签：windows-8, windows-runtime, winjs

有没有办法确定应用程序是在本地运行还是已通过 App Store 部署？

我想在开发期间使用 Windows.ApplicationModel.Store.CurrentAppSimulator 测试试用模式功能，但如果应用程序已由普通用户从商店下载，则默认为 Windows.ApplicationModel.Store.CurrentApp。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:26:56.617

我不相信这很容易做到。我怀疑*最简单*的方法是通过条件编译，并生成一个特定的构建以供提交。您可以为此使用[Ajaxmin](http://ajaxmin.codeplex.com "阿贾克斯敏")，但这需要进行一些设置。

鉴于部署时的应用程序无论其机制如何都应该是可区分的，我不认为这是：http: [//msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.package。安装位置.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.package.installedlocation.aspx)

会有所帮助。它会合理地告诉您您是否已从 VS（部署松散文件）而不是作为包进行部署。

# javascript - 加载事件上的单击按钮

> ID：11756606
> 
> 赞同：3
> 
> 时间：2012-08-01T09:44:30.563
> 
> 标签：javascript, html, onload

我有以下 javascript -

```
function onLoad() {
    if (!(document.applets && document.VLVChart && document.VLVChart.isActive())) {
        setTimeout('onLoad()', 200);
        return;
    }
    objChart = document.VLVChart;
    PollEvent();
}

function fan() {
    objChart.reorganize();
} 
```

然后在加载 HTML 页面时 -

```
<body onLoad="onLoad()"> 
```

并在 HTML 中有一个执行该`fan()`功能的按钮 -

```
<input type='button' value='Fan' onClick='fan();'> 
```

我是否可以在 onload 事件中激活该`fan()`功能，以便用户不必单击按钮？

**编辑** 在尝试提供的答案后，在调试代码中断时 -

```
objChart.reorganize(); 
```

在`fan()`有错误的函数内 -

```
SCRIPT5007: Unable to get value of the property 'reorganize': object is null or undefined 
```

这很奇怪，因为当我手动单击页面上的按钮时，该功能工作正常。

**解决方案** 经过多次头疼后，我意识到我试图`fan()`在页面（更具体地说是 objChart）完全加载之前加载函数。因此，为什么在`onLoad`事件中添加功能不起作用。我添加了一个`setTimeout`-

```
function Fan()
{
setTimeout(function(){objChart.reorganize();},3000);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T09:46:38.793

```
<body onload='onLoad(); fan();'>... 
```

但是最好避免使用内联 JS，最好开始研究集中式事件管理。这有各种优点。

[**我昨天写**](https://stackoverflow.com/questions/11737873/why-are-inline-on-event-handler-attributes-in-modern-semantic-html-a-good-or-a/11742769#11742769)的另一个问题的答案概述了为什么会这样。如果它对您来说是新的，那么像 jQuery 之类的东西会让这变得微不足道。

```
$(function() {
    $('body').on('load', function() {
        onLoad();
        fan();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:47:57.183

阅读您的问题，我假设您甚至没有尝试过。只需从您的`onLoad()`-function 中调用该函数：

```
function onLoad()
{
    fan();
    /* … */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T09:49:18.273

是的。

您可以`<body onload='onLoad(); fan();'>`按照 Utkanos 的建议使用。

如果您使用 jQuery，您还可以在头部粘贴一个脚本，其中包含：

```
$(function(){
   ...
}); 
```

jQuery 函数实际上会更早地触发，正如[这里](http://api.jquery.com/ready/)所解释的。

# database - 表列名称设计

> ID：11756610
> 
> 赞同：3
> 
> 时间：2012-08-01T09:44:42.110
> 
> 标签：database, database-design

假设我有以下表格：`Customer`和`Staff`.

```
Customer (CusID, CusName, CusAddres, CusGender)
Staff (StaID, StaName, StaAddress, StaGender) 
```

对比

```
Customer(ID, Name, Address, Gender)
Staff(ID, Name, Address, Gender) 
```

哪种设计更受欢迎，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T13:09:20.197

SQL 使用了一个称为**域名完整性**的概念，这意味着对象的名称具有由其容器指定的范围。

列名必须是唯一的，但只能在包含这些列的表的上下文中。表名必须是唯一的，但只能在包含表等的模式的上下文中。

当您查询列时，您需要引用您感兴趣的模式、表和列，除非可以推断出其中的一个或多个。除非您的查询非常简单以至于它只引用一个表，否则您将需要直接引用表名或使用别名，例如 Customer.ID 或来自客户 C 的 C.ID 等。

第一个选项是对所有列名唯一性的技术要求的回归，这适用于旧的 ISAM 数据库和 1960 年代和 70 年代的 COBOL 等语言。这在 1980 年代无缘无故地被拖到 dBase 中，并且在关系和对象 DBMS 时代作为一种惯例一直存在。 **抵制这种过时的惯例。**

第二种方法更简单，更易读。更简单、更易读的代码更容易编写和维护。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T15:19:10.927

键是沿外键“传播”的，因此如果它们在所有生成的“副本”中保持名称不变，这将很有用。它只是使数据库模式更清晰：您不必查看 FK 定义¹即可查看特定字段的来源 - 您只需查看其名称即可做到这一点。

另一方面，非关键字段不会传播，并且没有特别的理由在各自的表之外保持它们的名称唯一。

所以，我推荐一种混合方法：

*   为关键字段名称添加前缀以使它们在所有表中保持唯一，并避免重命名传播的字段。
*   不要为非关键字段名称添加前缀以使其更短，即使这可能会导致不同表中的某些名称重复。

例如：

```
Customer (CustomerID, Name, Addres, Gender)
Staff (StaffID, Name, Address, Gender) 
```

如果你碰巧在这两个²之间有一个连接表，它会看起来像这样......

```
CustomerStaff(CustomerID PK FK1, StaffID PK FK2) 
```

...所以不需要重命名（如果两个父键都被命名，那将是必要的），并且`ID`立即清楚从哪里来。此外，我个人不喜欢在前缀中缩短表名（因此而不是），因为这使得命名更加“机械”和可预测。`CustomerID``StaffID``CustomerID``CusID`

* * *

*¹可能有多个级别！*

*²只是一个例子。是否有意义是另一回事。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T15:46:00.797

ID 是一个 SQL 反模式（http://www.amazon.com/SQL-Antipatterns-Programming-Pragmatic-Programmers/dp/1934356557/ref=sr_1_1?s=books&ie=UTF8&qid=1343835938&sr=1-1&keywords=sql+antipatterns） , 从不命名列 ID。我会使用：

```
Customer(CustomerID, Name, Address, Gender) 
Staff(StaffID, Name, Address, Gender) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T10:12:57.940

我会说第二种选择更好。如果您决定更改表名，则不必更改所有列的名称。此外，当您编写 SELECT 语句时，通常无论如何都会使用别名（“select sta.name, sta.adress from staff sta...”）一般来说，当有疑问时，总是选择一个更简单的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T10:06:33.520

每个行业都有自己的标准。在这两种设计风格中都是正常的。建议使用第一个。

```
Customer(CusID, CusName, CusAddres, CusGender)
Staff(StaID, StaName, StaAddress, StaGender) 
```

因为它使用表名符号`Customer`to`Cus`和`Staff`to `Sta`。它有助于项目良好的维护。

一些组织也使用`vch`数据`VARCHAR`类型，`int`数据`INT`类型。

像

```
Customer(intCusID, vchCusName, vchCusAddres, vchCusGender)
Staff(intStaID, vchStaName, vchStaAddress, vchStaGender) 
```

# java - 编写 Java 枚举的正确和错误方法

> ID：11756612
> 
> 赞同：0
> 
> 时间：2012-08-01T09:44:46.603
> 
> 标签：java, enums

最近，我发现了以下结构的代码：

*接口*：

```
public interface Base<T> {

    public T fromValue(String v);

} 
```

*枚举实现*：

```
public enum AddressType implements Base<AddressType> {

    NotSpecified("Not Specified."),

    Physical("Physical"),

    Postal("Postal");

    private final String label; 

    private AddressType(String label) { 
        this.label = label; 
    } 

    public String getLabel() { 
        return this.label; 
    }

    @Override
    public AddressType fromValue(String v) {
        return valueOf(v);
    }
} 
```

我的直接反应是无法通过反序列化或反射创建枚举实例，因此`fromValue()`应该是静态的。

我不是要开始辩论，但这是正确的吗？我读过，[为什么 Enum 会实现一个接口](https://stackoverflow.com/questions/2709593/why-would-an-enum-implement-an-interface)，我完全同意所提供的答案，但上面的例子是无效的。

我这样做是因为“建筑师”不想接受我的回答，所以这是为了创造一个强有力的论据（有事实）为什么上述方法是好/坏的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:47:15.003

您的`Base`接口未声明`valueOf`，并且该`fromValue`方法确实已实现。我看不出为什么这段代码不应该编译。如果您指的是`valueOf`内部调用`fromValue`，那是对为每个枚举定义的静态方法的调用。不过，我不得不同意，它的设计是非常错误的，因为您需要枚举的任意成员来调用`fromValue`并获取真正的成员。

另一方面，在我现在正在做的一个项目中，我有几个枚举实现了一个通用接口。这是因为枚举是相关的，我希望能够根据它们的共同语义统一对待它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:14:38.503

在我看来，这种设计是错误的。为了使用`valueFrom()`，必须事先获取此枚举的实例。因此，它看起来像：

```
AddressType type = AddressType.Postal.valueFrom("Physical"); 
```

它有什么意义？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T10:22:22.497

您的 Base 界面似乎有其他用途（如果有的话）。

它可能是一个 String-to-T-converter，因为它从 String 生成一个 T。如果它实现了这个接口，那`enum`是完全错误的（@yegor256 已经指出了原因）。所以你可以保留枚举，你可以在它的方法中有一些`AddressTypeConverter implements Base<AddressType>`调用。`AddressType.valueOf()``fromString()`

但不要误会我的意思：实现接口的枚举并不是一个坏习惯，只是这种特殊用法是完全错误的。

# java - Java vs Qt-Qml 用于快速、流畅的 UI 设计

> ID：11756613
> 
> 赞同：2
> 
> 时间：2012-08-01T09:44:50.963
> 
> 标签：java, qt, user-interface, qml

我有使用 qml 设计 UI 的经验，并且几乎可以立即创建流畅的 UI。

我想知道是否有可用于 Java 的类似工具包，它可以在以下方面与 qml 相匹配 -

1.  使用方便。
2.  qml 提供的丰富的“外观和感觉”。
3.  快速发展

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-09T02:44:52.647

## [JavaFX](http://docs.oracle.com/javase/8/javafx/get-started-tutorial/jfx-overview.htm#JFXST784)是最接近的匹配项

在 Internet 上的某个地方，我什至读到 QtQuick (QML+Javascript) 是 JavaFX，据说“*做得对*”。这是因为原始[JavaFX 语言的语法非常相似](https://en.wikipedia.org/wiki/JavaFX_Script)。还有类似于 Qt Quick Designer的[Scene Builder等工具。](http://code.makery.ch/library/javafx-8-tutorial/part1/)当心 JavaFX 已经死了。而且*新*的JavaFX 不是基于 JSON，而是基于 XML，并且更类似于 XAML。

## Android SDK 是另一种选择

凭借 Android 获得的所有动力，您可以非常安全地选择它的整个套件进行设计。Android 不需要进一步解释，Android Studio 有很多东西可以简化开发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-12T14:55:33.303

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T19:08:02.180

没有这样的工具（至少我不知道）。

我在这里看到的唯一解决方案是使用[JNI](https://en.wikipedia.org/wiki/Java_Native_Interface)并将 QML 与 Java 结合起来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T14:24:00.817

最流行的 Java UI 框架 SWT 和 Swing 类似于 Qt Widgets。我知道唯一一个在 Java 世界中带来声明式 UI 开发风格的 - E4/XWT。但它看起来更像 Microsoft WPF 而不是 Qt QML，我没有在商业项目中尝试过。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-07-09T16:26:20.967

我正在开发这个开源项目，使用 Android XML 构建 GUI 应用程序以在 iOS、Android、树莓派等上运行，使用[totalcross](https://github.com/TotalCross/totalcross)作为引擎在设备上呈现 XML。

[https://github.com/TotalCross/KnowCodeXML](https://github.com/TotalCross/KnowCodeXML)

# c# - 我如何使用在哪里 编译时 T 未知时的扩展方法

> ID：11756614
> 
> 赞同：1
> 
> 时间：2012-08-01T09:44:53.803
> 
> 标签：c#, linq, entity-framework, lambda, generic-collections

我正在使用 JSON 编写 C# MVC 应用程序，并尝试使用 EF 将 JSON 检索回数据库。

不幸的是，我不会让这样的代码工作：

```
IEnumerable<object> NewValueSubCollection = (IEnumerable<object>)NewValue.GetType().GetProperty(col.Name).GetValue(NewValue, null);
//Where col is a property of an object of type (IEnumerable<???>)

foreach (var line in ((IEnumerable<object>)col.GetValue(originalEntity, null)).ToList<object>())
{
    Type lineType = ObjectContext.GetObjectType(line.GetType());
    var lineEntitySet = context.GetEntitySet(lineType);
    EntityKey lineKey = context.CreateEntityKey(lineEntitySet.Name, line);
    if (NewValueSubCollection.Where(lineKey).Count() == 0) //See bellow
    context.DeleteObject(line);
} 
```

我在哪里实现了这个：

```
public static class LinqExtension
{
    //Enable searching in a collection is an entity Key exist... and retrieve info.
    public static IEnumerable<T> Where<T>(this IEnumerable<T> source,EntityKey key)
    {
        return Enumerable.Where(source, CreateFilterExpressionBasedOnKey<T>(key).Compile());
    }

    private static Expression<Func<TInput, bool>> CreateFilterExpressionBasedOnKey<TInput>(Type sourceType, EntityKey key)
    {
        var param = Expression.Parameter(sourceType, "");

        Expression myFilter = Expression.Constant(true);
        if (key != null)
        {
            foreach (var item in key.EntityKeyValues)
            {
                Expression Left = Expression.PropertyOrField(param, item.Key.ToString());
                Expression Right = Expression.Constant(item.Value);

                myFilter = Expression.AndAlso(myFilter, Expression.Equal(Left, Right));
            }
        }
        return Expression.Lambda<Func<TInput, bool>>(myFilter, param);
    }
} 
```

问题是 NewValueSubCollection 的类型是：`IEnumerable<object>`当我希望我可以`IEnumerable<MyListObjectType>`通过我的 Where 扩展时……。然后我在运行时遇到了一个异常： System.ArgumentException: 'TOId' is not a member of type 'System.Object'

如果我使用：

```
Type generic = typeof(Collection<>);
Type typeArgs = (NewValue.GetType().GetProperty(col.Name).GetValue(NewValue, null)).GetType().GetGenericArguments()[0];
Type constructed = generic.MakeGenericType(typeArgs);
object o = Activator.CreateInstance(constructed);
o = NewValue.GetType().GetProperty(col.Name).GetValue(NewValue, null); 
```

我收到以下代码的编译错误：

```
if (o.Where(lineKey).Count() == 0) //error!!!
// 'object' does not contain a definition for 'Where' acception a first argument of type 'object' could be found (are you missing directive or an assembly reference?) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:54:29.630

您需要动态访问它，但您可以使用“动态”关键字避免一些令人头疼的反射。

所以这：

```
NewValueSubCollection.Where(lineKey).Count() == 0 
```

变成这样：

```
NewValueSubCollection.Cast<dynamic>().Where(d => lineKey(d)).Count() == 0 
```

或者（更简单，更有效，如果枚举没有副作用）这个：

```
!NewValueSubCollection.Cast<dynamic>().Any(d => lineKey(d)) 
```

* * *

一个简单的概念证明程序：

```
class Program
{
    static void Main(string[] args)
    {
        var list = new List<string>();
        IEnumerable<object> objects = list;
        Func<string, bool> func = s => s.Contains("x");

        list.Add("Test");
        list.Add("x");
        list.Add("mux");
        foreach (var item in objects.Cast<dynamic>().Where(d => func(d)))
            Console.WriteLine(item);
        Console.ReadKey();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:46:23.783

在您的第一个示例中，您`NewValueSubCollection`的静态类型为`IEnumerable<object>`，因此您的参数化类型`T`为`object`，并且当您编译表达式时，它会尝试查找对象类的属性，因此是异常。

同样，您`o.Where(...)`无法工作，因为`Where`扩展方法是在 上定义的`IEnumerable<>`，并且这些方法是在编译时静态解析的。

恐怕您必须`Where`通过反射调用该方法，您可能会在这里找到一些帮助：[如何使用反射调用扩展方法？](https://stackoverflow.com/questions/1452261/how-do-i-invoke-an-extension-method-using-reflection)

# django - Django 根据字段值禁用 list_editable

> ID：11756616
> 
> 赞同：3
> 
> 时间：2012-08-01T09:44:57.023
> 
> 标签：django, django-admin

我有一个模型，其管理员如下：

```
class MyModelAdmin(admin.ModelAdmin):
    list_display  = ('invoice_code', 'total_amount', 'paid', )
    list_editable = ('paid', )
    search_fields = ('invoice_code', )

   def __init__(self, *args, **kwargs):
        super(MyModelAdmin, self).__init__(*args, **kwargs)
        self.list_display_links = (None, ) 
```

这里**支付**的字段是一个布尔字段，默认情况下它将被取消选中。我想要实现的是，**支付**的字段在未选中时应该是可编辑的，并且在选中时应该是只读的。我想在**list_editable**中实现这一点。有可能实现这一目标吗？如果是这样，该怎么做？谢谢是提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T16:18:09.127

据我所知，您只能使用 list_editable 中的默认字段。这些字段仅支持与这些默认字段相关的标准行为。此外，您可以对表中的记录执行的操作彼此相同。

如果您想逐行实现自定义行为，我相信您必须在模型中实现一个函数，该函数返回一个字段，如果选中，则该字段可编辑，未选中时不可编辑。这只是根据您提供的类和一些 JS 返回一个活动或不活动的 html 复选框的问题。您也可以将其直接实现到具有禁用属性的输入复选框中。

但是，为了更新复选框和指定字段，您必须通过 ajax POST 命令（通过 Jquery 或其他方式）将值更新到后端，或者您必须更改表单的行为/查看并且必须通过保存来更新。

希望这可以帮助。

# android - 如何在android中将线程从睡眠中唤醒

> ID：11756627
> 
> 赞同：1
> 
> 时间：2012-08-01T09:45:37.460
> 
> 标签：android, multithreading, onclick, sleep

我有一个等待用户按下图像的活动。如果用户在 3 秒内没有按任何内容，我希望活动关闭（完成（））。那是我的代码：

```
private final int delay = 3000;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.after_hangup);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED);
    final ImageView pressToLaunchbrowser = (ImageView) findViewById(R.id.after_hang_up_image);

    pressToLaunchbrowser.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            //getWindow().addFlags(WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD);   // if we want to open the device.
            Intent intent = new Intent(Intent.ACTION_VIEW);
            intent.setData(Uri.parse(url));
            startActivity(intent);
            Thread.interrupted();
        }
    }); 
    new Thread() {
        public void run() {
            try {
                    Thread.sleep(delay);
                    finish();
            }
            catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }.start();
}} 
```

我的问题是，如果按了，我怎么能唤醒线程？我试过`Thread.interrupted();`但它不工作。如果我按下与否，线程仍然等待 3 秒。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T09:50:34.997

Android中不建议使用线程..使用Handler来管理依赖时间的操作..例如，代替`new Thread()`..，试试

```
Handler handler = new Handler();
handler.postDelayed('runnable-that-will-finish-activity', 3000); 
```

在 onclicklistener 中：

```
handler.remove('runnable-that-will-finish-activity') ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:14:28.420

```
import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.os.Handler;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.WindowManager;
import android.widget.ImageView;

public class NewActivity extends Activity {

    private final int delay = 3000;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.after_hangup);
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED);
        final ImageView pressToLaunchbrowser = (ImageView) findViewById(R.id.after_hang_up_image);

        final Handler handler = new Handler();
        handler.postDelayed(finishRunnable, delay);
        pressToLaunchbrowser.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // getWindow().addFlags(WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD);
                // // if we want to open the device.
                Intent intent = new Intent(Intent.ACTION_VIEW);
                intent.setData(Uri.parse(url));
                startActivity(intent);
                handler.removeCallbacks(finishRunnable);
            }
        });

    }

    private Runnable finishRunnable = new Runnable() {

        @Override
        public void run() {
            finish();

        }
    };
} 
```

# android - Play 商店的设备兼容性问题

> ID：11756629
> 
> 赞同：4
> 
> 时间：2012-08-01T09:45:40.020
> 
> 标签：android, google-play

我有一个关于在 Google Play 商店上发布 Android 应用程序的奇怪问题。问题是有 0 个设备兼容，因此我们无法发布它。

这是清单文件的样子：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.xxx"
    android:installLocation="auto"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="7" android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.INTERNET" />

    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

    <uses-permission android:name="android.permission.READ_CONTACTS" />

    <supports-screens
        android:largeScreens="true"
        android:normalScreens="true"
        android:xlargeScreens="true" >
    </supports-screens>

    <application
        android:name=".application.xxx"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar">

        <!--  To use google maps -->
        <uses-library android:name="com.google.android.maps" /> 
             <!-- activities/services defined here -->
    </application>
</manifest> 
```

如您所见，这里没有什么特别之处。我什至尝试发布定义为 0 权限的应用程序只是为了看看会发生什么，但我仍然遇到相同的兼容性问题。

我应该提到几件事：

*   我已经尝试使用 0 权限发布，仍然是同样的问题。
*   我尝试将其设置`minSdkVersion`为 13，仍然是同样的问题。
*   我正在使用`Ant`（`ant clean release`）构建。该应用程序在我们的任何设备（`Galaxy SII with 2.3`, `HTC Sensation with 2.3`, `Galaxy Spica with 2.1`, `Nexus S with 4.1.1`）上运行良好。
*   在我的代码中的某个时刻，我正在使用特定于 API 13 及更高版本的功能，但我在运行时检查 API 级别并将该功能替换为与旧版本兼容的另一个功能。

任何想法？

谢谢！

**编辑**

的输出`aapt dump badging`是：

```
package: name='com.myapp' versionCode='1' versionName='1.0'
sdkVersion:'7'
uses-permission:'android.permission.INTERNET'
uses-permission:'android.permission.WRITE_EXTERNAL_STORAGE'
uses-permission:'android.permission.ACCESS_FINE_LOCATION'
uses-permission:'android.permission.ACCESS_NETWORK_STATE'
uses-permission:'android.permission.READ_CONTACTS'
application-label:'MyApp'
application-label-fr:'MyApp'
application-icon-120:'res/drawable-ldpi/ic_launcher.png'
application-icon-160:'res/drawable-mdpi/ic_launcher.png'
application-icon-240:'res/drawable-hdpi/ic_launcher.png'
application-icon-320:'res/drawable-xhdpi/ic_launcher.png'
application: label='MyApp' icon='res/drawable-mdpi/ic_launcher.png'
uses-library:'com.google.android.maps'
launchable-activity: name='com.myapp.activities.SplashScreenActivity'  label='MyApp' icon=''
uses-permission:'android.permission.READ_EXTERNAL_STORAGE'
uses-implied-permission:'android.permission.READ_EXTERNAL_STORAGE','requested WRITE_EXTERNAL_STORAGE'
uses-permission:'android.permission.READ_CALL_LOG'
uses-implied-permission:'android.permission.READ_CALL_LOG','targetSdkVersion < 16 and requested READ_CONTACTS'
uses-feature:'android.hardware.location'
uses-implied-feature:'android.hardware.location','requested a location access permission'
uses-feature:'android.hardware.location.gps'
uses-implied-feature:'android.hardware.location.gps','requested android.permission.ACCESS_FINE_LOCATION permission'
uses-feature:'android.hardware.touchscreen'
uses-implied-feature:'android.hardware.touchscreen','assumed you require a touch screen unless explicitly made optional'
uses-feature:'android.hardware.screen.portrait'
uses-implied-feature:'android.hardware.screen.portrait','one or more activities have specified a portrait orientation'
main
other-activities
other-services
supports-screens: 'small' 'normal' 'large' 'xlarge'
supports-any-density: 'true'
locales: '--_--' 'fr'
densities: '120' '160' '240' '320' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T09:49:21.750

坦率地说，Google Play 搞砸了。我有三个已发布的应用程序，它们与 0 台设备兼容，但拥有数千名用户。更奇怪的是，Google Play 为我提供了这些应用的统计数据，显示了世界各地的用户。

所以我会说继续发布它。有时可能需要一段时间才能显示，但一旦显示，您应该能够将其安装在您的设备上并确认用户可以下载它，尽管控制台显示 0 个兼容设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:51:46.113

我必须遇到同样的问题，但是一旦我发布它，它就会向我显示兼容的设备数量。所以不要担心发布你的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T11:40:37.717

结果发现一点问题都没有！apk 只是未激活，错误消息具有误导性（说`no compatible devices`而不是：） `0 apks activated`。

# grails - Grails 2.1.0 app tomcat 7.0.22 重定向后会话为空

> ID：11756630
> 
> 赞同：3
> 
> 时间：2012-08-01T09:45:40.507
> 
> 标签：grails, session-variables, tomcat7, ajp

我只是在学习 grails，当我在 Netbeans 中运行一个应用程序时，它运行良好，但在部署到 Centos 5.4 服务器上的 Tomcat 7.0.22 时显示奇怪的行为。我正在使用 proxy_ajp 使该应用程序可与 apache 一起使用。

问题似乎在于重定向后会话未得到维护，因此我丢失了登录信息，导致应用程序再次尝试登录。

我的 proxy_ajp 设置是

```
<Location /PreyerBooks >
   ProxyPass ajp://localhost:8011/PreyerBooks    
   ProxyPassReverse ajp://localhost:8011/PreyerBooks
</Location> 
```

该应用程序正在部署且没有错误，并且与数据库和 LDAP 的连接正常。我通过按如下方式登录身份验证方法对此进行了测试

## UserController - 认证功能

```
 def authenticate = {
    def password=passhash(params.password)
    log.info " login attempt ${params.login} - ${params.password} - ${password}"
    def match = User.findAll(
      directory: "user",
      filter: "(&(uid=${params.login})(userpassword=${password}))"
    )
    log.info " match ${match}"
    if (match) {
      def user = Employee.findByLogin(params.login)
      log.info " user ${user} - ${user?.role}"
      if(user){
        session.user = user
        log.info "success"
        flash.message = "Hello ${user.firstname}!"
        redirect(controller:"Book", action:"index")      
      }else{
        log.error "failed login attempt mismatch to ldap ${params.login}"
        flash.message = "Sorry, ${params.login}. Please try again."
        redirect(action:"login")
      }
    }else{
      log.error "failed login attempt ${params.login} - ${params.password}"
      flash.message = "Sorry, ${params.login}. Please try again."
      redirect(action:"login")
    }
  } 
```

## BookController - 身份验证功能（检查是否登录）

```
 def beforeInterceptor = [action:this.&auth, except:[]]

  def auth() {
    log.info "BookController:auth() ${session}"

    if(!session.user) {
      redirect(controller:"User", action:"login")
      return false
    }
    log.info "BookController:auth() working"
    return true
  } 
```

日志显示

```
 INFO  books.UserController  -  login attempt username - password - passwordhash
 INFO  books.UserController  -  match [de.preyer.books.User@d4a1cc]
 INFO  books.UserController  -  user username - admin
 INFO  books.UserController  - success
 INFO  books.BookController  -  BookController:auth() Session Content: 
```

session.user 变量已经消失。我检查了密码哈希，它与 LDAP 服务器正确匹配（因此匹配中的对象引用）。此用户在其获得其角色的数据库中正确找到。

我无法直接访问该应用程序，避免使用 apache ajp，因为该端口在防火墙中被阻止并且我无法打开它。因此我无法测试问题是否出在 ajp 或 tomcat 中

我已尝试搜索指定为标题的条件，但没有发现任何相关内容。

a) 浏览器 cookie 已启用并正常工作，我尝试了 Safari、Firefox 和 Chrome，但均未成功。我不认为这是浏览器问题，因为相同的浏览器可以在 NetBeans 中使用该应用程序（我认为使用码头）

b) 我已设置`grails.serverURL = "http://servername/PreyerBooks"`为完全限定域

如果我关闭身份验证，该应用程序将起作用。

我一定是做错了什么，或者错过了部署中的一个步骤。

现在我知道我可以使用 Spring Core 包含一个插件，但这对我的应用程序来说太过分了，并且进一步增加了调试的复杂性。我希望在继续之前让当前的实现工作。该逻辑是从 Grails 2.1.0 文档中复制的，因此它应该可以工作。

我在[httpSession](https://stackoverflow.com/questions/6470261/httpsession-in-grails)中读到，事情必须是可序列化的，但是如果文档中的示例不起作用，为什么当我在 NetBeans 中运行该应用程序时它会起作用？

我很茫然。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:44:49.740

使用 spring-security-core 插件（或 Shiro，或任何已建立的、经过验证的安全实现）。这并不复杂，并且滚动您自己的安全性是被黑客入侵的快捷途径。

# ios - 如何在uitableview上从服务器加载动态数据

> ID：11756631
> 
> 赞同：6
> 
> 时间：2012-08-01T09:45:53.590
> 
> 标签：ios

我是ios开发的初学者，如果有人知道代码，我需要从tableview上的服务器加载动态数据，请分享。

提前感谢，安倍。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T09:49:02.410

使用核心数据和[NSFetchedResultsController](http://developer.apple.com/library/ios/#DOCUMENTATION/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html)，通过 tableview 控制器的委托方法从 NSFetchedResultsController 实例填充 tableview。它自动将数据库上的删除、添加和任何类型的更新反映到 tableview 上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T10:26:33.280

根据模型的复杂程度以及所需的缓存策略类型，有不同的方法可以将表视图连接到远程数据源。这里有很多话要说，但如果你是初学者，最好的办法是看看互联网上的一些例子。

网络通信的“少数”开源项目提供了处理服务器驱动应用程序的好方法和好例子（包括源代码）。我引用了我更喜欢的两个：

*   [AFNetworking](https://github.com/AFNetworking/AFNetworking)：这个库和 UITableViewController 的示例源可能适合您的需要
*   [RestKit](https://github.com/RestKit/RestKit)：如果您想将服务器返回的数据映射并持久化到本地模型，这将变得很有用。不过，这可能需要更多的学习时间。

但提醒您无论如何都需要了解[UITableView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)和相关协议的基础知识：[UITableViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html)和[UITableViewDataSource](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html)。文档没问题，但您甚至可能想看一下关于表格视图的[WWDC 2011 播客。](https://developer.apple.com/itunes/?destination=adc.apple.com.4092349126.04109539109.4144345631?i=1314817424)

此外，如果您还需要数据持久性，您应该开始研究[Core Data](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)和[NSFetchedResultControllers](http://developer.apple.com/library/ios/DOCUMENTATION/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html)，正如 illis 和 Bogdan 所说，但事情会开始变得有点棘手。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T10:16:16.477

实际上 NSFetchedResultsController 有点难以理解。

您应该尝试自己处理 UITableView 数据。看看[UITableViewDelegate 协议](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html)

以下是您可以遵循的一些步骤：

1) 创建一个继承 UITableViewDelegate 和 UITableViewDataSource 的类

```
@interface YourTableViewController: UITableViewController<UITableViewDelegate,UITableViewDataSource> 
```

2）创建一个数组来保存你的数据

```
@property (nonatomic,retain) NSMutableArray *data; 
```

3）实现这个方法：

```
 - (void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath { 
        DataObject *d=[data objectAtIndex:indexPath.row]; // selected data, now you can handle it        
    }

    - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
        return data.count;
    }

    - (UITableViewCell *)tableView:(UITableView *)mtableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
        NSString *ident=@"CatalogCell";       
        UITableViewCell *cell=(UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:ident];       
        if (cell==nil) {           
            cell=[[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:ident] autorelease];          
        }
        DataObject *d=[data objectAtIndex:indexPath.row];
        [cell.textLabel setText:d.someField];      
    } 
```

4）选择一些方法（[NSURLConnection](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)， ASIHTTPRequest （对不起，我只允许2个超链接）或其他）从服务器获取数据

```
-(void) parseData:(NSString *) d {
    NSArray * parsedData=[self someMethodToParseData:d];
    [data setArray:parsedData];
    [tableView reloadData];    
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T09:58:00.777

您可以使用 ASIHTTPRequest 库从您的服务器获取数据。[您可以在http://allseeing-i.com/ASIHTTPRequest/](http://allseeing-i.com/ASIHTTPRequest/)上找到有关它的一些信息

您可以使用[http://www.edumobile.org/iphone/iphone-programming-tutorials/how-to-use-tableview-in-iphone/](http://www.edumobile.org/iphone/iphone-programming-tutorials/how-to-use-tableview-in-iphone/)此链接获取有关 tableview 的更多信息。

在链接的教程中，您必须在 viewDidload 方法中请求您的数据。

```
- (void)viewDidLoad {

    // Request your data on this line.
    /*NSArray *array = [[NSArray alloc]     initWithObjects:@"Sleepy",@"Sneezy",@"Bashful",@"Happy",@"Doc",
                        @"Grmpy",@"Dopey",@"Thorin",@"Dorin",@"Nori",
                        @"Ori",@"Balin",@"Dwalin",@"Fili",@"Kili",@"Oin",                                                
                        @"Gloin",@"Bifur",@"Bofur",@"Bombur",nil ];*/

     self.listData = array;
     [array release];
     [super viewDidLoad];
} 
```

所有这些都是简单的用法。您必须体验更多示例才能使用更复杂的情况。我将为教程添加更多代码，以从服务器获取数据并显示在 tableview 上。

# sockets - Metro 风格应用程序异步套接字问题（连接前发送函数调用）

> ID：11756636
> 
> 赞同：0
> 
> 时间：2012-08-01T09:46:06.033
> 
> 标签：sockets, windows-8, microsoft-metro, asyncsocket

我使用**Windows.Networking.Sockets创建了一个****Metro 风格**的数据报服务器和一个客户端。我正在用**C++编写代码**

 ****比我尝试连接并将数据从客户端发送到服务器。

但我面临的问题是，由于 Windows Metro 应用程序是完全**异步**的，我的应用程序**在连接完成之前开始发送数据**。

我想要一种方法，我的发送函数将在连接完成后发送数据。

**msdn**已经为客户端服务器提供了一个示例代码，但是他们使用一个**按钮来发送数据，这需要时间**来操作，同时连接完成。这就是应用程序运行良好的原因。

但我试图在不使用发送按钮的情况下在主代码中进行客户端服务器通信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T23:10:57.117

在这里做一些假设 b/c 你没有提供任何代码，但你应该使用[DatagramSocket.ConnectAsync](http://msdn.microsoft.com/en-us/library/windows/apps/hh701226.aspx) create_task 的延续。如果您将发送数据放在 task::then 中，则调用的异步性质不会有问题。请参阅[这篇](http://msdn.microsoft.com/en-us/library/windows/apps/Hh780559.aspx)关于在 C++ Windows 8 应用程序中处理异步的文章。这里也有很多[很好的例子](http://code.msdn.microsoft.com/windowsapps/Windows-8-Asynchronous-08009a0d)。****

# java - Android，java - 无法从异步任务更新变量

> ID：11756638
> 
> 赞同：2
> 
> 时间：2012-08-01T09:46:07.977
> 
> 标签：java, android, android-asynctask

这是代码

变量声明

```
 public String gpu2dcurent = "1234567"; 
```

Asynctask，完成后它应该更新变量gpu2dcurent，但它没有

```
 private class readgpu2d extends AsyncTask<String, Void, String> {

    protected String doInBackground(String... args) {
         Log.i("MyApp", "Background thread starting");

         String aBuffer = "";

         try {

            File myFile = new File("/sys/devices/platform/kgsl-2d0.0/kgsl/kgsl-2d0/gpuclk");
            FileInputStream fIn = new FileInputStream(myFile);
            BufferedReader myReader = new BufferedReader(
                    new InputStreamReader(fIn));
            String aDataRow = "";
            //String aBuffer = "";
            while ((aDataRow = myReader.readLine()) != null) {
                aBuffer += aDataRow + "\n";
            }

            ;
            myReader.close();

        } catch (Exception e) {
            Toast.makeText(getBaseContext(), e.getMessage(),
                    Toast.LENGTH_SHORT).show();

        }

         return aBuffer.trim();
     }

     protected void onPostExecute(String result) {
         // Pass the result data back to the main activity
        gpu2dcurent = result;
         //Toast.makeText(getBaseContext(), result,
                //Toast.LENGTH_SHORT).show();
         gpu.this.data = result;

         if (gpu.this.pd != null) {
             //gpu.this.pd.dismiss();
         }
     }

    } 
```

测试变量是否有新值。它没有，它显示 1234567

```
 TextView tx = (TextView)findViewById(R.id.textView3);
tx.setText(gpu2dcurent); 
```

我错过了什么吗？当我从 onPostExecute 方法内部更新 textView 时，它工作正常，但是当 Asynctask 完成变量值重置为默认值时

```
 public class gpu extends Activity{

public String gpu2dcurent = "1234567"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:47:53.823

在 gpu 类中声明如下：

```
public String gpu2dcurent = "1234567"; 
```

在 AsyncTask 类 readgpu2d 中，使用如下：

```
gpu.gpu2dcurent = result; 
```

* * *

更新你的 UI=User Interface 意味着 TextView 在

**onProgressUpdate()**

AsyncTask 的方法。

```
And check where have you declared gpu2dcurent variable??? 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T09:49:50.820

我怀疑您是否尝试`TextView` **在完成异步任务之前设置文本。**

是的，要么成功，`static public String gpu2dcurent = "1234567";`

`TextView`或者，设置文本`onPostExecute()`

```
protected void onPostExecute(String result) {
         // Pass the result data back to the main activity
        gpu2dcurent = result;
         //Toast.makeText(getBaseContext(), result,
                //Toast.LENGTH_SHORT).show();
         gpu.this.data = result;  
         if (gpu.this.pd != null) {
             //gpu.this.pd.dismiss();
         }
      tx.setText(gpu2dcurent);
     }
    } 
```

**更新：**

更新有问题的代码后，

改变这一行，

```
new readgpu2d().execute("blablabla"); 
```

到

```
new readgpu2d().execute("blablabla").get(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T09:55:05.423

尝试将 setText 放入`onPostExecute`

```
protected void onPostExecute(String result) {
     TextView tx = (TextView)findViewById(R.id.textView3);
     tx.setText(result);

     // Pass the result data back to the main activity
    gpu2dcurent = result;
     //Toast.makeText(getBaseContext(), result,
     //Toast.LENGTH_SHORT).show();
     gpu.this.data = result;

     if (gpu.this.pd != null) {
         //gpu.this.pd.dismiss();
     }
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T10:08:23.710

这是整个代码

```
 package rs.pedjaapps.DualCore;

 import java.io.BufferedReader;
 import java.io.File;
 import java.io.FileInputStream;
 import java.io.IOException;
 import java.io.InputStreamReader;
 import java.util.List;
 import java.util.concurrent.TimeoutException;
 import android.app.Activity;
 import android.app.ProgressDialog;
 import android.os.AsyncTask;
 import android.os.Bundle;
 import android.util.Log;
 import android.view.View;
 import android.widget.AdapterView;
 import android.widget.ArrayAdapter;
 import android.widget.Spinner;
 import android.widget.AdapterView.OnItemSelectedListener;
 import android.widget.TextView;
 import android.widget.Toast;

 import com.stericson.RootTools.RootTools;
 import com.stericson.RootTools.RootToolsException;

 public class gpu extends Activity{

public String gpu2dcurent = "1234567";

private ProgressDialog pd = null;
private Object data = null;

 private class readgpu2d extends AsyncTask<String, Void, String> {

    protected String doInBackground(String... args) {
         Log.i("MyApp", "Background thread starting");

         String aBuffer = "";

         try {

            File myFile = new File("/sys/devices/platform/kgsl-2d0.0/kgsl/kgsl-2d0/gpuclk");
            FileInputStream fIn = new FileInputStream(myFile);
            BufferedReader myReader = new BufferedReader(
                    new InputStreamReader(fIn));
            String aDataRow = "";
            //String aBuffer = "";
            while ((aDataRow = myReader.readLine()) != null) {
                aBuffer += aDataRow + "\n";
            }

            //gpu2dcurent = aBuffer.trim();
            myReader.close();

        } catch (Exception e) {
            Toast.makeText(getBaseContext(), e.getMessage(),
                    Toast.LENGTH_SHORT).show();

        }

         return aBuffer.trim();
     }

     protected void onPostExecute(String result) {
         // Pass the result data back to the main activity
        gpu2dcurent = result;
         //Toast.makeText(getBaseContext(), result,
                //Toast.LENGTH_SHORT).show();
         gpu.this.data = result;

         if (gpu.this.pd != null) {
             gpu.this.pd.dismiss();
         }

     }

    }

    @Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.gpu);
this.pd = ProgressDialog.show(this, "Working..", "Loading...", true, false);
new readgpu2d().execute("blablabla");
TextView tx = (TextView)findViewById(R.id.textView3);
tx.setText(gpu2dcurent);
 }

} 
```

# java - Hibernate 集合的安全装饰器

> ID：11756639
> 
> 赞同：1
> 
> 时间：2012-08-01T09:46:14.777
> 
> 标签：java, spring, hibernate, security, aop

我面临一个概念问题：如何过滤对 Hibernate 加载的实体的某些属性的访问？

例如：我有一辆汽车，里面有 4 个轮子（2 个红色，2 个蓝色；双向链接）；用户 A 有权看到红色和蓝色的轮子，用户 B 只能看到蓝色的轮子。当我检索 Cars 时，也会获取车轮（有时通过 Hibernate.initialize，有时通过直接在查询中获取）。

当我请求 Cars 时，我想找到一种方法将车轮过滤到仅用户有权查看的车轮。（DB加载后的过滤结果暂时可以）

我想保持过滤机制不那么具有侵入性。

**什么不起作用：**

*   @Filter（或@Where）：凭据检查有点棘手，我还有其他一些连接要做，以了解是否允许用户查看轮子；

*   Spring ACL：我的凭证管理太棘手，无法使用（此外，不确定它是否能够过滤内部属性）；

**实施的解决方案：**

*   定义一个自定义 UserCollectionType，并提供一个 Collection Decorator 仅检索授权数据（重载 iterator()、get(int index)、...）；**缺点：**我的集合不连贯：添加数据时，只有在允许当前用户的情况下才能访问它。不确定这是一个可靠的解决方案。

**其他解决方案：**

*   **域对象上的 AOP**：我认为这是最好的；在我的域对象上添加 AOP，它定义了它的可授权实体集合的访问器，并在访问时过滤它们。不方便：在 hibernate 加载的域对象上添加 AOP 可能很棘手？（参见[Spring AOP Advice for Hibernate managed POJO](https://stackoverflow.com/questions/7669003/spring-aop-advice-for-hibernate-managed-pojo)）

*   **Hibernate Interceptor/Event**：我尝试使用它，但没有找到做我想做的事的好地方，而不会被打扰。而且我不想“真正”修改加载的集合：它必须对休眠透明（我不希望休眠在每次用户 B 在非只读事务中访问它们时从汽车上移除红色轮子）。

*   **AOP + Introspection on暴露服务**：在事务上下文之外，递归过滤每个实体的每个集合属性以去除未经授权的元素；也许是更简单、侵入性更小的解决方案；**缺点**：集合属性不能保持不变；

**您如何看待已实施的解决方案？关于如何做到这一点的任何其他想法？**

（上下文是：Hibernate 4.1.3、Spring 3.1.1、java 7）

谢谢 ！

# powershell - Powershell 进度条

> ID：11756645
> 
> 赞同：2
> 
> 时间：2012-08-01T09:46:37.647
> 
> 标签：powershell, progress-bar, powershell-2.0

我是 Powershell 的新手，在获取进度条以使用 foreach-object 循环时遇到问题（如果可能的话）

多亏了克里斯，下面是我到目前为止所拥有的，我的问题是进度条到达一个点，然后出现错误：101 参数大于允许的最大范围 100：

```
$FolderList = Get-Content C:\Folders.txt
$i = 0

foreach( $Folder in $FolderList )
{

Write-Host $Folder
Get-ChildItem $Folder -Recurse *.pdf | foreach-object{

$fileCount = (Get-ChildItem $Folder).Count
$i += 1
Write-Progress -Activity "Counting Files" -status "Searching...." -percentComplete (($i / $fileCount)*100)

$pdf = c:\pdftk.exe $_.FullName dump_data
$NumberOfPages = [regex]::match($pdf,'NumberOfPages: (\d+)').Groups[1].Value

    New-Object PSObject -Property @{
    Name = $_.Name
    FullName = $_.FullName
    NumberOfPages = $NumberOfPages 
     } 
   } 
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T12:17:07.697

这是我解决问题的方法：

```
$i = 0
$pdfFiles = @()

#First, get the files and add them to a collection:
foreach ($folder in $FolderList){
    Get-ChildItem $Folder -Recurse *.pdf | %{$pdfFiles += $_}
}

#Measure the collection
$fileCount = ($pdfFiles | Measure-Object).Count

#Do work on the collection
$pdfFiles | foreach-object{
    $pdf = c:\pdftk.exe $_.FullName dump_data
    $NumberOfPages = [regex]::match($pdf,'NumberOfPages: (\d+)').Groups[1].Value
    New-Object PSObject -Property @{
        Name = $_.Name
        FullName = $_.FullName
        NumberOfPages = $NumberOfPages 
    }
    $i += 1
    Write-Progress -Activity "Counting Files" -status "Searching...." -percentComplete (($i / $fileCount)*100)
} 
```

# javascript - jquery根据元素的父标签执行动作

> ID：11756649
> 
> 赞同：0
> 
> 时间：2012-08-01T09:46:42.737
> 
> 标签：javascript, jquery, html, jquery-selectors

我有以下内容：

```
<ul class="head clearfix">\
    <li class=""><strong><a href="/firmy" class="menuTabs">Katalog firm <span>(3516)</span></a></strong></li>
    <li class=""><a href="/produkty" class="menuTabs">Katalog produktów <span>(23752)</span></a></li>
    <li class=""><a href="/uslugi" class="menuTabs">Katalog uslug <span>(81)</span></a></li>
    <li class="last"><a href="/szkolenia" class="menuTabs">Katalog szkolen <span>(529)</span></a></li>
</ul> 
```

我只需要对没有`<strong>`标签作为父级的链接执行鼠标悬停效果。因此，在上面的示例中，我将跳过“目录公司”链接，因为该链接有一个标签作为父级。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:50:01.100

你的 CSS 选择器是

```
ul.header > li > a.menuTabs:hover 
```

定义悬停效果

如果你需要一些 jquery 功能，你可以使用

```
$('ul.header > li > a.menuTabs') 
```

获取这些元素

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:49:26.457

这只能通过使用直接子选择器在 CSS 中定义`>`

```
ul.head > li > a.menuTabs:hover 
{
   /* hover style */
} 
```

您可以在 jquery 中使用相同的选择器

```
$('ul.head > li > a.menuTabs') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T09:54:46.993

只需从选择器中过滤掉具有strong标签的父元素并附加鼠标事件：

```
​$('ul.head li a')​.filter(function() {
    return !$(this).parent().is('strong');
}).on('mouseenter', function() {
    $(this).css('color','green');
});​ 
```

[小提琴](http://jsfiddle.net/35sZx/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T09:50:15.420

```
$('.head').on('click', 'li > a', function(evt) {
    //do something
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T09:50:33.827

我建议，作为使用更具体的选择器（在大多数情况下可能是更好的选择）检查鼠标悬停事件中的父元素的替代方法：

```
$('a').on('mouseover', function(e){
    var that = this;
    if ($(that).parent().is('strong')) {
        return false;
    }
    else {
        // do stuff.
    }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T09:50:48.647

```
$('.head > li > .menuTabs').mouseover(fucnction () {
  // code here
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-01T09:56:58.717

请像这样使用。

```
ul li>a:hover
{
background-color:black;
}​ 
```

# java - 我无法解决这个“NullPointerException”

> ID：11756659
> 
> 赞同：0
> 
> 时间：2012-08-01T09:47:19.837
> 
> 标签：java, swing, jdbc

我正在尝试使用 swing 事件处理来访问数据库表记录，但是在按下按钮后它显示异常。我不知道出了什么问题。这是我的代码：

```
private void DisplayAllButtonActionPerformed(java.awt.event.Act ionEvent evt) {

    try { 

        String SQL = "SELECT * FROM OCCUPANTS";
        rs = stmt.executeQuery( SQL ); //line no 264

        while( rs.next( )) {
            int id_col = rs.getInt("ID");
            String id=Integer.toString(id_col);
            String room =rs.getString("ROOM");
            String occupant = rs.getString("OCCUPANT");

            DisplayArea.setText( id + " " + room + " " + occupant);
        }
   } 
   catch ( SQLException err ) {
        System.out.println( err.getMessage( ) );
   }
} 
```

**休闲是个例外：**

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at wumpus.WumpusGUI.DisplayAllButtonActionPerformed(W umpusGUI.java:264)
at wumpus.WumpusGUI.access$300(WumpusGUI.java:16)
at wumpus.WumpusGUI$4.actionPerformed(WumpusGUI.java: 164)
at javax.swing.AbstractButton.fireActionPerformed(Abs tractButton.java:2018)
at javax.swing.AbstractButton$Handler.actionPerformed (AbstractButton.java:2341)
at javax.swing.DefaultButtonModel.fireActionPerformed (DefaultButtonModel.java:402)
at javax.swing.DefaultButtonModel.setPressed(DefaultB uttonModel.java:259)
at javax.swing.plaf.basic.BasicButtonListener.mouseRe leased(BasicButtonListener.java:252)
at java.awt.Component.processMouseEvent(Component.jav a:6505)
at javax.swing.JComponent.processMouseEvent(JComponen t.java:3321)
at java.awt.Component.processEvent(Component.java:627 0)
at java.awt.Container.processEvent(Container.java:222 9)
at java.awt.Component.dispatchEventImpl(Component.jav a:4861)
at java.awt.Container.dispatchEventImpl(Container.jav a:2287)
at java.awt.Component.dispatchEvent(Component.java:46 87)
at java.awt.LightweightDispatcher.retargetMouseEvent( Container.java:4832)
at java.awt.LightweightDispatcher.processMouseEvent(C ontainer.java:4492)
at java.awt.LightweightDispatcher.dispatchEvent(Conta iner.java:4422)
at java.awt.Container.dispatchEventImpl(Container.jav a:2273)
at java.awt.Window.dispatchEventImpl(Window.java:2719 )
at java.awt.Component.dispatchEvent(Component.java:46 87)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.j ava:703)
at java.awt.EventQueue.access$000(EventQueue.java:102 )
at java.awt.EventQueue$3.run(EventQueue.java:662)
at java.awt.EventQueue$3.run(EventQueue.java:660)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPri vilege(ProtectionDomain.java:76)
at java.security.ProtectionDomain$1.doIntersectionPri vilege(ProtectionDomain.java:87)
at java.awt.EventQueue$4.run(EventQueue.java:676)
at java.awt.EventQueue$4.run(EventQueue.java:674)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPri vilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java: 673)
at java.awt.EventDispatchThread.pumpOneEventForFilter s(EventDispatchThread.java:244)
at java.awt.EventDispatchThread.pumpEventsForFilter(E ventDispatchThread.java:163)
at java.awt.EventDispatchThread.pumpEventsForHierarch y(EventDispatchThread.java:151)
at java.awt.EventDispatchThread.pumpEvents(EventDispa tchThread.java:147)
at java.awt.EventDispatchThread.pumpEvents(EventDispa tchThread.java:139)
at java.awt.EventDispatchThread.run(EventDispatchThre ad.java:97)
BUILD SUCCESSFUL (total time: 28 seconds) 
```

这是全局初始化`stmt`

```
public class WumpusGUI extends javax.swing.JFrame {

    Connection con;
    Statement stmt;
    ResultSet rs;
    /**
     * Creates new form WumpusGUI
     */
    public WumpusGUI() {
        initComponents();
        DBConnect();
    }

    public void DBConnect() {
        try {
            String host = "jdbc:derby://localhost:1527/occupants";
            String uName = "ravi";
            String uPass= "ravi";
            Connection con = DriverManager.getConnection( host, uName, uPass );
            Statement stmt = con.createStatement();
        }  
        catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T09:49:29.193

好吧，您还没有显示`stmt`声明的位置，但听起来它可能为空。*您期望*它在哪里设置为非空值？

关于这个有两点：

*   `PreparedStatement`每次执行查询时都应该使用单独的
*   无论如何，您不应该在 UI 线程中执行数据库访问

（此外，您的方法名称违反了 Java 命名约定。）

编辑：从您的评论中，您得到：

```
public class WumpusGUI ... {
    Statement stmt;

    public void DBConnect() {
        ...
        Statement stmt = con.createStatement();
        ...
    }
} 
```

你方法的那一行声明了一个新的*局部*变量——它没有为*实例*变量赋值，所以实例变量保持为空。

最小的“修复”是将该行更改为：

```
stmt = con.createStatement(); 
```

...但正如我上面所说，这不是*正确*的解决方法。理想情况下，您应该从GUI 类中获取*所有这些数据库代码，但**至少*每次要执行它时都应该创建一个新语句。（然后在 finally 块中关闭它。）

编辑：此外，如果您在方法中遇到异常，您只是将其打印出来并愉快地继续......所以您的`stmt`变量*仍然*为空。*不要*捕获`Exception`一般情况，*也不要*捕获您之后真的无法继续的异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T09:49:39.370

很简单：`stmt`还没有初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T09:56:05.423

您的 stamt 变量可能已使用 null 全局初始化，但您无法分配必须从连接中获取的值。检查您的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T10:06:19.920

在使用它之前，您必须调用 DBConnect 方法来初始化 stmt 变量。

# wpf - 专注于禁用的 MenuItem。WPF

> ID：11756661
> 
> 赞同：1
> 
> 时间：2012-08-01T09:47:31.733
> 
> 标签：wpf, menuitem

当它是时如何选择一些 MenuItem

```
IsEnabled="false" 
```

我希望能够通过键盘的箭头选择此项。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-01T11:02:08.673

您应该将 的属性绑定`IsEnabled` 到键盘事件。

# liferay-6 - 在 Portlet 类中创建 ResourceURL 有什么用？

> ID：11756662
> 
> 赞同：0
> 
> 时间：2012-08-01T09:47:32.420
> 
> 标签：liferay-6

我正在使用 Liferay 6.1 CE 进行门户应用程序开发。我是 Liferay 的新手，所以如果我的问题是错误的，请原谅。

我看到要在 Liferay 中使用 AJAX 请求，我们需要使用 ResourceURL。

现在我的问题是，我在互联网上看到很多示例，他们在 Java 类中使用创建 ResourceURL。

```
ResourceURL chartUrl = renderResponse.createResourceURL(); 
```

所以请告诉我在 Portlet 类中创建 ResourceURL 有什么用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T11:29:02.727

ResourceURL 已在 JSR-286 标准中引入以进行 ajax 调用。

在 liferay 中，如果您说单击任何链接，如果您想执行任何操作并且页面不应该刷新。

定义一个链接并为其提供资源 url。在您的类文件中通过映射资源操作来实现逻辑，并且您的数据将在不刷新页面的情况下呈现给 portlet。

# xml - xslt中的递增值

> ID：11756675
> 
> 赞同：0
> 
> 时间：2012-08-01T09:48:22.533
> 
> 标签：xml, xslt, xpath

很抱歉再次问这个问题。当我使用上一个问题的答案时，我遇到了一些问题。假设我的xml是这样的，

```
<comp>
<section id="1">
 <p>text</p>
 <figure xml:id="c1-fig-002"/>
 <p>text</p>
 <figure xml:id="c1-fig-003"/>
</section>
<section id="2">
 <p>text</p>
 <figure xml:id="c1-fig-003"/>
 <figure xml:id="c1-fig-004" resumeNumberingAt="7"/>
 <figure xml:id="c1-fig-005"/>
 <p>text</p>
</section>
<section id="3">
 <p>text</p>
 <figure xml:id="c1-fig-006"/>
 <figure xml:id="c1-fig-007" resumeNumberingAt="18"/>
 <p>text</p>
 <figure xml:id="c1-fig-008"/>
 <p>text</p>
 <figure xml:id="c1-fig-009"/>
</section>
</comp> 
```

我正在使用 xslt 来获得以下结果，

```
<comp>
<section id="1">
 <p>text</p>
 <figure xml:id="c1-fig-002"/>
 <fignum>2</fignum>
 <p>text</p>
 <figure xml:id="c1-fig-003"/>
 <fignum>3</fignum>
</section>
<section id="2">
 <p>text</p>
 <figure xml:id="c1-fig-003"/>
 <fignum>3</fignum>
 <figure xml:id="c1-fig-004" resumeNumberingAt="7"/>
 <fignum>7</fignum>
 <figure xml:id="c1-fig-005"/>
 <fignum>8</fignum>
 <p>text</p>
</section>
<section id="3">
 <p>text</p>
 <figure xml:id="c1-fig-006"/>
 <fignum>9</fignum>
 <figure xml:id="c1-fig-007" resumeNumberingAt="18"/>
 <fignum>18</fignum>
 <p>text</p>
 <figure xml:id="c1-fig-008"/>
 <fignum>19</fignum>
 <p>text</p>
 <figure xml:id="c1-fig-009"/>
 <fignum>20</fignum>
</section>
</comp> 
```

我需要从 fig 之后的数字中获取`2`价值`c1-fig-002`。

如果有一个属性 resumeNumberingAt 那么我需要使用该值而不是正常值并增加下一个节点的值。我使用以下 xslt 来执行此操作，但它不起作用。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="xml" indent="yes"/>

  <xsl:template match="figure[@resumeNumberingAt != '']">
    <xsl:call-template name="fig">
      <xsl:with-param name="sequence" select="@resumeNumberingAt"/>
    </xsl:call-template>
  </xsl:template>

  <xsl:template match ="section">
   <!--some operation-->
  </xsl:template>
  <xsl:template match ="p">
  <!--some operation-->
  </xsl:template>
  <xsl:template match="figure" name="fig">
    <xsl:param name="sequence" select="substring(@xml:id, 10, 1)"/>
    <figure>
      <xsl:apply-templates select="@*"/>
      <fignum>
        <xsl:value-of select="$sequence"/>
      </fignum>
    </figure>
    <xsl:apply-templates select="following-sibling::figure[1]">
      <xsl:with-param name="sequence" select="$sequence + 1"/>
    </xsl:apply-templates>
  </xsl:template>

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:34:23.523

**这个 XSLT 1.0 样式表...**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<xsl:strip-space elements="*" />  

<xsl:template match="@*|node()">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
 </xsl:copy>
</xsl:template>

<xsl:template match="figure">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
 </xsl:copy>
 <fignum>
   <xsl:variable name="base-node" select="
     ((preceding::figure[@resumeNumberingAt] |
       self     ::figure[@resumeNumberingAt] )[last()]  |
       self     ::figure)[1]" />
   <xsl:variable name="base">
     <xsl:apply-templates select="$base-node" mode="numbering" />
   </xsl:variable>
   <xsl:variable name="prev-figs"      select="preceding::figure" />
   <xsl:variable name="prev-fig-count" select="count($prev-figs)" />
   <xsl:value-of select="$base +
     count(($base-node/following::figure|$base-node)
       [count(. | $prev-figs) = $prev-fig-count])" />
 </fignum> 
</xsl:template>

<xsl:template match="figure[@resumeNumberingAt]" mode="numbering">
 <xsl:value-of select="@resumeNumberingAt" /> 
</xsl:template>

<xsl:template match="figure" mode="numbering">
 <xsl:value-of select="substring(@xml:id, 8, 3)" /> 
</xsl:template>

</xsl:stylesheet> 
```

**... 获取您的示例输入文档并生成规定的预期输出文档。此解决方案已在 Microsoft XslCompiledTransform XSLT 引擎上成功测试**

## 解释

在无模式图形模板中，我们将复制输入图形元素并创建以下 fignum 元素。变量 $base-node 将是我们基于图形编号的基础节点。细看，这表情……

```
(preceding::figure[@resumeNumberingAt] |
 self     ::figure[@resumeNumberingAt] )[last()] 
```

... 将使用 @resumeNumberingAt 属性引用最近的上一个图形元素，或者如果此元素具有 @resumeNumberingAt 属性，则引用此元素（焦点节点）。通常，这将是我们计算 fignum 的基础。但是，当焦点节点位于第一个 @resumeNumberingAt 之前时，例外情况。在这种情况下，我们将基于上下文节点的计数（通过 xml:id 属性）。因此，在所有情况下，我们都可以找到基节点，而无需任何带有此表达式的笨拙的 xsl:if 语句……

```
 ((preceding::figure[@resumeNumberingAt] |
   self     ::figure[@resumeNumberingAt] )[last()]  |
   self     ::figure)[1] 
```

现在来计算基数。我们有基础节点。如果它有一个@resumeNumberingAt 属性，那么它就是基数，否则它基于@xml:id 属性。与其进行显式测试，我们可以简单地利用带有模式的模板选择机制来计算基数。例如，对于节点...

```
<figure xml:id="c1-fig-006"/> 
```

...基础节点是...

```
<figure xml:id="c1-fig-004" resumeNumberingAt="7"/> 
```

...因此基数为 7。稍后将需要将此偏移 +2 以获得所需的 fignum 9。相比之下，对于节点...

```
<figure xml:id="c1-fig-003"/> 
```

...基节点是自身，基值为 3（'003' 转换为整数）。稍后将需要将此偏移 +0 以获得所需的 fignum 3。

变量 $prev-figs 是该元素之前的一组图形元素。因此，现在我们通过将基本 fignum 偏移基节点和焦点节点（包括基节点，但不包括焦点节点）之间的数字计数来计算 fignum。这个偏移量是两个集合之间的交集：

(1) 基础节点之后（包括）的数字；和

(2) 焦点节点之前的数字。

在 XSLT 1.0 中，计算两个集合的交集的一般方法是......

```
$node-set1[count(. | $node-set2) = count($node-set2)] 
```

...这正是我们对这个指令所做的......

```
<xsl:value-of select="$base +
 count(($base-node/following::figure|$base-node)
   [count(. | $prev-figs) = $prev-fig-count])" /> 
```

## 一般原则

采用了以下一般原则：

1.  使用联合运算符 (|) 和位置谓词来避免显式分支指令。
2.  使用模板匹配机制来避免显式分支指令，从而提供强大、可扩展性和简单性。
3.  根据需要使用 XSLT 1.0 设置交集的模式。

# blackberry - 关闭黑莓的代码

> ID：11756678
> 
> 赞同：0
> 
> 时间：2012-08-01T09:48:40.207
> 
> 标签：blackberry, blackberry-jde, jde

是否有可用于**从我的应用程序中关闭黑莓**的命令或代码？我创建了一个由按钮组成的简单应用程序，现在我想要的是设备在单击按钮时关闭。这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:45:16.753

是[Device.requestPowerOff(boolean allowAutoStart)](http://www.blackberry.com/developers/docs/7.0.0api/net/rim/device/api/system/Device.html#requestPowerOff%28boolean%29)

# php - PHP数组：我怎样才能回显这个值？

> ID：11756683
> 
> 赞同：0
> 
> 时间：2012-08-01T09:48:50.937
> 
> 标签：php, arrays

我正在尝试在我的 wordpress 选项中回显数组第二级的设置，并且在获取变量时遇到了一些麻烦。此代码确实有效：

```
 <?php foreach($area['fields'] as $field): ?>
 <?php if ($field['id'] == 'show_border')
  {echo ' show_border';} ?>
 <?php endforeach; ?> 
```

这只是检查是否有一个字段询问您是否要显示边框，是否有任何我想要的回声，无论该字段设置为实际显示边框与否。

我要做的只是回显在“show_border”字段中设置的值。

知道我会怎么做吗？

**编辑**

```
array(11) {
  [0]=>
  array(3) {
    ["name"]=>
    string(10) "# of posts"
    ["id"]=>
    string(5) "posts"
    ["type"]=>
    string(4) "text"
  }
  [1]=>
  array(5) {
    ["name"]=>
    string(13) "posts per row"
    ["id"]=>
    string(13) "posts_per_row"
    ["type"]=>
    string(6) "select"
    ["default"]=>
    int(3)
    ["options"]=>
    array(8) {
      [1]=>
      int(1)
      [2]=>
      int(2)
      [3]=>
      int(3)
      [4]=>
      int(4)
      [5]=>
      int(5)
      [6]=>
      int(6)
      [7]=>
      int(7)
      [8]=>
      int(8)
    }
  }
  [2]=>
  array(5) {
    ["name"]=>
    string(11) "header type"
    ["id"]=>
    string(13) "f_header_type"
    ["type"]=>
    string(6) "select"
    ["default"]=>
    string(2) "h4"
    ["options"]=>
    array(6) {
      ["h1"]=>
      string(2) "h1"
      ["h2"]=>
      string(2) "h2"
      ["h3"]=>
      string(2) "h3"
      ["h4"]=>
      string(2) "h4"
      ["h5"]=>
      string(2) "h5"
      ["h6"]=>
      string(2) "h6"
    }
  }
  [3]=>
  array(5) {
    ["name"]=>
    string(5) "icon?"
    ["id"]=>
    string(9) "show_icon"
    ["type"]=>
    string(5) "radio"
    ["default"]=>
    string(3) "yes"
    ["options"]=>
    array(2) {
      ["yes"]=>
      string(3) "yes"
      ["no"]=>
      string(2) "no"
    }
  }
  [4]=>
  array(5) {
    ["name"]=>
    string(13) "icon location"
    ["id"]=>
    string(13) "icon_location"
    ["type"]=>
    string(6) "select"
    ["default"]=>
    string(4) "left"
    ["options"]=>
    array(3) {
      ["left"]=>
      string(4) "left"
      ["right"]=>
      string(5) "right"
      ["top"]=>
      string(3) "top"
    }
  }
  [5]=>
  array(5) {
    ["name"]=>
    string(10) "show text?"
    ["id"]=>
    string(9) "show_text"
    ["type"]=>
    string(5) "radio"
    ["default"]=>
    string(3) "yes"
    ["options"]=>
    array(2) {
      ["yes"]=>
      string(3) "yes"
      ["no"]=>
      string(2) "no"
    }
  }
  [6]=>
  array(5) {
    ["name"]=>
    string(12) "show border?"
    ["id"]=>
    string(11) "show_border"
    ["type"]=>
    string(5) "radio"
    ["default"]=>
    string(2) "no"
    ["options"]=>
    array(3) {
      ["top"]=>
      string(3) "top"
      ["bot"]=>
      string(3) "bot"
      ["no"]=>
      string(2) "no"
    }
  }
  [7]=>
  array(5) {
    ["name"]=>
    string(8) "category"
    ["id"]=>
    string(8) "category"
    ["type"]=>
    string(6) "select"
    ["multiple"]=>
    bool(true)
    ["options"]=>
    array(2) {
      [4]=>
      string(7) "feature"
      [3]=>
      string(6) "slider"
    }
  }
  [8]=>
  array(4) {
    ["name"]=>
    string(14) "custom classes"
    ["id"]=>
    string(14) "custom_classes"
    ["type"]=>
    string(4) "text"
    ["default"]=>
    string(0) ""
  }
  [9]=>
  array(5) {
    ["name"]=>
    string(10) "read more?"
    ["id"]=>
    string(9) "read_more"
    ["type"]=>
    string(5) "radio"
    ["default"]=>
    string(3) "yes"
    ["options"]=>
    array(2) {
      ["yes"]=>
      string(3) "yes"
      ["no"]=>
      string(2) "no"
    }
  }
  [10]=>
  array(4) {
    ["name"]=>
    string(14) "read more text"
    ["id"]=>
    string(14) "read_more_text"
    ["type"]=>
    string(4) "text"
    ["default"]=>
    string(16) "Continue reading"
  }
} 
```

我正在尝试获得类似 ["id"]=> "show_border" 的值并回显它的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:57:19.530

基本上，您无法在 PHP 中获取要从已经加载到服务器端的表单中选择的表单值。

这就像从未来走向过去。

您应该使用 Javascript 代码 + AJAX，而不是 PHP，但它会复杂得多。在不知道网站的完整来源的情况下，不可能用一个简单的答案告诉您。

这也取决于您的开发技能。

# c# - C# 序列化对象版本

> ID：11756684
> 
> 赞同：7
> 
> 时间：2012-08-01T09:48:52.357
> 
> 标签：c#, xml, serialization, versioning

我有以下情况。在我的 C# 应用程序中，我有一个使用 XmlSerializer 序列化的类。这个类非常复杂，我的类的一个对象作为应用程序文件保存在本地磁盘上，以后可以打开（经典的保存工作和重新打开工作）。我的问题是，在开发过程中，被序列化的对象的类可能会发生变化。我想要一个版本系统，它允许我的应用程序意识到保存的 xml 它属于旧版本但仍然可以打开。旧的应用程序版本也无法打开新的 xml 版本。

例如：

```
class ComplexObject
{
   public string settings1;
   public string settings2;
} 
```

我序列化对象，在生产中发送应用程序。明天我的课变成了

```
class ComplexObject
{
   public string settings1;
   public string settings2;
   public string settings3;
} 
```

我的新版本应用程序将如何打开旧类定义的序列化对象以及新类定义，在将文件加载到对象时没有错误（反序列化）

欢迎任何建议和基本样品！

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T10:00:39.313

这完全取决于串行器的选择。在这种情况下`XmlSerializer`很好，并且可以正常工作；具有新值的客户端将加载新值；没有意愿的客户。样本：

```
var reader = XmlReader.Create(new StringReader(
    @"<ComplexObject><foo>123</foo><bar>abc</bar></ComplexObject>"));
var ser = new XmlSerializer(typeof (ComplexObject));
var obj = (ComplexObject)ser.Deserialize(reader); 
```

和：

```
public class ComplexObject
{
    public string foo;
} 
```

可以工作和加载`foo`但不是`bar`。

不要`BinaryFormatter`用于这个 - 这会导致一个伤害的世界。如果您想要二进制输出，请考虑类似 protobuf-net 之类的东西，它旨在公开适应版本控制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T09:57:57.000

[版本容错序列化](http://msdn.microsoft.com/en-us/library/ms229752%28v=vs.80%29.aspx)

简而言之，您要么将字段标记为`Optional`（并用默认值填充它们），要么实现反序列化构造函数，它将根据需要解析值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T09:55:57.670

我希望我正确理解了您的问题。您正在将一个类序列化为一个文件。然后你改变内存中的类（例如你添加另一个属性）。不，您想从文件中反序列化此类。只要您只添加新属性，这没有问题。解串器将忽略它们。他创建了您的类的一个新实例（这就是为什么可序列化类必须具有默认构造函数的原因）并尝试填充他在流中找到的属性以进行反序列化。如果您更改属性的类型或删除属性，您将无法反序列化它。

“删除属性”的一种解决方法可能是保留您有意删除的属性并进一步忽略这些属性。

您可以查看 msdn [http://msdn.microsoft.com/en-us/library/ms229752%28v=vs.80%29.aspx中解释的 Version Tolerant Serialization](http://msdn.microsoft.com/en-us/library/ms229752%28v=vs.80%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T09:53:44.280

**轨道 1**

您可以为新版本的文件打开器创建一些`if..else`机制，它会尝试将文件从可能的最低版本打开到更高版本。

**轨道 2**

您可以将版本信息存储在文件中。

```
class ComplexObject
{
   public string settings1;
   public string settings2;
   public string fileVersion;
} 
```

**轨道 3**

您可以为不同的文件版本使用不同的文件扩展名。（如 .doc、.docx）

# apache - mod_rewrite 不能双向工作

> ID：11756687
> 
> 赞同：0
> 
> 时间：2012-08-01T09:49:07.170
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我得到一个**原始网址**： **www.mydomain.com/menu/ ?myid=29&mypage=pizza-hut.html**

使用以下 mod_rewrite 代码：

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule ^menu/([^/]*)/([^/]*)\.html$ /menu/?pid=$1&alias=$2 [L] 
```

我得到了这个不错的网址： **www.mydomain.com/menu/29/pizza-hut.html**

所以，上面的两个网址都引用了同一个页面......对！现在真正的交易是，

为什么当我输入网址时，原来的：

**www.mydomain.com/menu/?myid=29&mypage=pizza-hut.html**

***它不会重定向到***

**www.mydomain.com/menu/29/pizza-hut.html**

它在地址栏中保留了原来的那个，我应该添加任何行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:01:24.887

本质上，您生成的所有链接都应该是不错的 url。不要`/menu/?myid=29&mypage=pizza-hut.html`在您的任何页面中都有链接。使用您已确保在后端正确路由的干净 URL，如下所示：`www.mydomain.com/menu/29/pizza-hut.html`

您在服务器上重写的规则将漂亮的 url 改写为您的内容可以理解的内容（例如`/menu/?myid=29&mypage=pizza-hut.html`）。这是最重要的部分。如果您想更正所有对丑陋 URL 的直接请求，您需要首先确保您的所有页面都开始使用漂亮的页面，然后您可以执行以下操作：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /menu/?\?myid=([^&]+)&mypage=([^&\ ]+)
RewriteRule ^menu/?$ /menu/%1/%2? [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T04:33:07.893

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /menu/?\?myid=([^&]+)&mypage=([^&\ ]+) 
RewriteRule ^menu/?$ /menu/%1/%2.\html? [R=301,L] 
```

注意`?`以下`.\html`

# ruby-on-rails - 在 Twitter 应用程序（Rails）中更改消费者密钥时重用 OAuth 令牌和秘密

> ID：11756689
> 
> 赞同：1
> 
> 时间：2012-08-01T09:49:15.967
> 
> 标签：ruby-on-rails, twitter-oauth

我在一个 Rails 应用程序中工作，在该应用程序中我使用 OmniAuth 通过 Twitter 对用户进行身份验证。一旦用户被正确验证，我就会从 Twitter 获取 OAuth Token 和 OAuth Secret。

然后我可以使用这个令牌和密钥对从我的 Rails 应用程序进行 api 调用。

我的 twitter 应用程序中的消费者密钥用于与用户令牌和秘密一起进行 api 调用。

**现在，当我的消费者密钥（我的推特应用程序的）被更改时。之前获得的所有 OAuth 令牌和秘密都不起作用（我不能用它来进行 api 调用）。**

更改消费者密钥后，我应该如何处理这种情况？

有没有办法用新的消费者密钥刷新 Oauth 令牌和秘密，而不提示用户再次使用 twitter 进行身份验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T05:06:18.127

如果您更改了消费者密钥，这意味着您正在使用不同的 twitter 应用程序，那么旧的应用程序令牌支持新应用程序的时间是多少？无法合并两个 twitter 应用程序令牌。

更改使用者密钥后，用户再次需要对新的 Twitter 应用程序进行身份验证。

# c++ - 在 C++ 中自删除对象

> ID：11756693
> 
> 赞同：14
> 
> 时间：2012-08-01T09:49:24.627
> 
> 标签：c++

> **可能重复：**
> [C++：删除这个？](https://stackoverflow.com/questions/3150942/c-delete-this)
> [面向对象自杀或删除此；](https://stackoverflow.com/questions/3959634/object-oriented-suicide-or-delete-this)

我想知道下面的代码是否安全运行：

```
#include <iostream>
using namespace std;

class A
{
public:
    A() {
        cout << "Constructor" << endl;
    }
    ~A() {
        cout << "Destructor" << endl;
    }

    void deleteMe() {
        delete this;
        cout << "I was deleted" << endl;
    }
};

int main()
{
    A *a = new A();
    a->deleteMe();
    cout << "Exit ...";
    return 0;
} 
```

输出是：

```
Constructor
Destructor
I was deleted
Exit ... 
```

并且程序正常退出，但是这里有一些内存访问暴力吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T09:50:20.147

万一`delete this`在那次调用之后没有人会使用该对象是可以的。如果对象当然是在堆上分配的

例如`cocos2d-x`游戏引擎就是这样做的。它使用相同的内存管理方案`Objective-C`，这是基本对象的一种方法：

```
void CCObject::release(void)
{
    CCAssert(m_uReference > 0, "reference count should greater than 0");
    --m_uReference;

    if (m_uReference == 0)
    {
        delete this;
    }
} 
```

我不认为这是一种`c++`管理内存的方式，但这是可能的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T11:38:33.430

没关系，因为你有运行简单的方法。删除后，所有变量和虚拟表都清除了。只是，分析这个例子：

```
#include <iostream>

class foo
{
public:
    int m_var;
    foo() : m_var(1)  
    {

    }

    void deleteMe()
    {
        std::cout << m_var << "\n";
        delete this;
        std::cout << m_var << "\n"; // this may be crush program, but on my machine print "trash" value, 64362346 - for example
    }

    virtual void bar()
    {
        std::cout << "virtual bar()\n";
    }

  void anotherSimpleMethod()
    {
       std::cout << "anotherSimpleMethod\n";
    }

    void deleteMe2()
    {
        bar();
        delete this;
        anotherSimpleMethod();
        // bar(); // if you uncomment this, program was crashed, because virtual table was deleted
    }
};

int main()
{
    foo * p = new foo();
    p->deleteMe();
    p = new foo();
    p->deleteMe2();
    return 0;
} 
```

我无法解释更多细节，因为它需要一些关于在程序加载后将类和方法存储在 RAM 中的知识。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T10:06:59.133

当怀疑内存使用（或类似问题）方面是否发生了奇怪的事情时，请依靠适当的分析工具来帮助您澄清情况。

例如，使用[**valgrind**](http://en.wikipedia.org/wiki/Valgrind)或类似的程序来检查是否存在内存泄漏或编译器几乎无法帮助您解决的类似问题。

虽然每个工具都有其局限性，但通常可以通过使用它获得一些有价值的见解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T09:55:16.383

当然，您只需运行析构函数。方法不属于对象，所以运行正常。在外部上下文中，对象 (*a) 将被销毁。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-01T09:53:03.830

其中没有内存访问冲突，您只需要小心。但是在任何语言中都不建议删除`this`指针，即使上面的代码可以正常工作。与 相同`delete a`，但请尝试以其他方式进行，安全方式。

例如，您发布的代码本身存在一些不合逻辑的地方。

```
void deleteMe() 
{
    delete this;
    cout << "I was deleted" << endl; // The statement here doesn't make any sense as you no longer require the service of object a after the delete operation 
} 
```

**编辑：**对于**Sjoerd**

这样做更有意义

```
 void deleteMe() 
{
    delete this;
}

 int main()
 {
 A *a = new A();
 a->deleteMe();
 cout << "a was deleted" << endl;
 cout << "Exit ...";
 return 0;
 } 
```

`deleteMe()`永远不要到达函数中的第二行，但它会被调用。你不认为这违背了语言的哲学吗？

# android - Android：了解 os sendBroadcast(Intent i)？

> ID：11756695
> 
> 赞同：0
> 
> 时间：2012-08-01T09:49:26.690
> 
> 标签：android, broadcastreceiver

我是安卓新手。我可以理解广播接收器的概念，但我无法理解 sendBroadcast(Intent i) 的概念。我主要怀疑谁会听这个 sendBroadcast。

```
public class OOVOOActivity extends Activity {
    /** Called when the activity is first created. */
    public static int count = 0;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.main);
        addShortcut();
 }

    private void addShortcut(){  
        Intent shortcut = new Intent("com.android.launcher.action.INSTALL_SHORTCUT");

        // Shortcut name
        shortcut.putExtra(Intent.EXTRA_SHORTCUT_NAME, getString(R.string.app_name));  
        shortcut.putExtra("duplicate", false);  // Just create once

        // Setup current activity shoud be shortcut object 
        ComponentName comp = new ComponentName(this.getPackageName(), "."+this.getLocalClassName());  
        shortcut.putExtra(Intent.EXTRA_SHORTCUT_INTENT, new Intent(Intent.ACTION_MAIN).setComponent(comp));  

        // Set shortcut icon
        ShortcutIconResource iconRes = Intent.ShortcutIconResource.fromContext(this, R.drawable.search);  
        shortcut.putExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE, iconRes);  

        sendBroadcast(shortcut);  
    } 
```

我有几个问题要问

1.  在上面的代码中没有使用**toast 消息**，但是如果我运行应用程序，我可以看到 toast 消息。请解释它是如何出现的，并告诉我如何隐藏那些 toast 消息。
2.  你可以看到**sendBroadcast(shortcut);** ，基本上谁会听这个广播。

请清除我的疑问。感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:56:21.720

> 你可以看到 sendBroadcast(shortcut); ，基本上谁会听这个广播。

其他一些应用程序或应用程序。没有应用程序可能会收到此广播。999 个应用程序可能会收到此广播。这取决于其他应用程序的用户和开发人员。

在这种情况下，您假设设备上有一个或多个应用程序将响应`com.android.launcher.action.INSTALL_SHORTCUT`广播。请注意`com.android`. 这意味着此`Intent`操作不是 Android SDK 的一部分。`com.android`用于Android环境的各个部分。事实证明，此`Intent`操作未记录在案，这意味着它可能适用于所有设备和 Android 操作系统版本，也可能不适用。

> 请解释一下它是怎么来的

除了您之外，其他开发人员可以编写显示`Toast`消息的代码。他们甚至可以编写代码来显示`Toast`响应广播的消息`Intent`。事实证明，您的测试环境包含这样的代码，可能在`com.android.launcher`应用程序中。

> 也告诉我如何隐藏那些吐司味精

你没有。

# android - 如何在 sharedpreferences 中保存和检索多个值？

> ID：11756700
> 
> 赞同：1
> 
> 时间：2012-08-01T09:49:39.630
> 
> 标签：android, android-layout, android-intent

我有 2 个活动 1.Register.java 2.SecureXActivity.java 在注册活动中，我正在使用共享首选项注册我的应用程序。我使用共享首选项仅显示一次注册活动。现在我的要求是从注册活动中获取用户名，该用户名在注册时仅显示一次并将其保存在 SecureXActivity 活动中，注册后只有此活动对用户可见。所以请在这方面帮助我？我是安卓新手。

我的代码如下

注册.java

```
public class Register extends Activity
{
public static final String PREFS_NAME = "LoginPrefs";
public static final String USER_NAME = "USER";

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.register);

    /*
     * Check if we successfully logged in before.
     * If we did, redirect to home page
     */
    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
    if (settings.getString("logged", "").toString().equals("logged")) 
    {
        Intent intent = new Intent(Register.this, SecureXActivity.class);
        startActivity(intent);
    }

    Button b = (Button) findViewById(R.id.btnRegister);
    b.setOnClickListener(new OnClickListener() 
    {
        public void onClick(View v) {
            EditText username = (EditText) findViewById(R.id.reg_employeeid);
            EditText password = (EditText) findViewById(R.id.reg_password);
            String welcm ="Welcome";
            String space = " ";
            EditText firstname = (EditText)findViewById(R.id.reg_firstname);
            EditText lastname = (EditText)findViewById(R.id.reg_lastname);
            String getfirstname = firstname.getText().toString();
            String getlasttname = lastname.getText().toString();
            String welcome=welcm.concat(space).concat(getfirstname).concat(space).concat(getlasttname);

            if(username.getText().toString().length() > 0 && password.getText().toString().length() > 0 ) 
            {
                if(username.getText().toString().equals("test") && password.getText().toString().equals("test")) 
                {
                    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
                    SharedPreferences.Editor editor = settings.edit();
                    editor.putString("logged", "logged");
                    editor.commit();    
                    Intent intent = new Intent(Register.this, SecureXActivity.class);
                    intent.putExtra("name", welcome);
                    startActivity(intent);
                }
            }
        }
    });
}
} 
```

SecureXActivity.java

```
public void onCreate(Bundle savedInstanceState)
{
    Thread.setDefaultUncaughtExceptionHandler(new exceptionHandler(this));
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
        Bundle extras =getIntent().getExtras();

    if (extras != null)
    {
        String value = extras.getString("name");
        TextView txtwelcm= (TextView)findViewById(R.id.textViewwelcm);
        txtwelcm.setText(value);
    }
} 
```

我想要从一个活动到另一个活动的值，并且应该将值保存到另一个活动。在我上面的代码中，我使用意图完成了此操作。但问题是值在第二个活动中只显示一次。当我按下返回按钮或主页键时，值不可见？如何做到这一点。

为响应@Picarus 添加：

问题是我使用相同的共享首选项只显示一次注册活动。但它没有在 SecureX 活动上显示名称。是否可以使用相同的共享偏好将值从注册活动传递到 Securex 活动

整个代码在下面再次给出 Register.java

```
 public class Register extends Activity 
    { 
public static final String PREFS_NAME = "LoginPrefs"; 

@Override 
public void onCreate(Bundle savedInstanceState)  
{ 
    super.onCreate(savedInstanceState); 
    setContentView(R.layout.register); 

    /* 
     * Check if we successfully logged in before. 
     * If we did, redirect to home page 
     */ 
    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0); 
    if (settings.getString("logged", "").toString().equals("logged"))  
    { 
        Intent intent = new Intent(Register.this, SecureXActivity.class); 
        startActivity(intent); 
    } 

    Button b = (Button) findViewById(R.id.btnRegister); 
    b.setOnClickListener(new OnClickListener()  
    { 
        public void onClick(View v) { 
            EditText username = (EditText) findViewById(R.id.reg_employeeid); 
            EditText password = (EditText) findViewById(R.id.reg_password); 
            String welcm ="Welcome"; 
            String space = " "; 
            EditText firstname = (EditText)findViewById(R.id.reg_firstname); 
            EditText lastname = (EditText)findViewById(R.id.reg_lastname); 
            String getfirstname = firstname.getText().toString(); 
            String getlasttname = lastname.getText().toString(); 
            String welcome=welcm.concat(space).concat(getfirstname).concat(space).concat(getlasttname); 

            if(username.getText().toString().length() > 0 && password.getText().toString().length() > 0 )  
            { 
                if(username.getText().toString().equals("test") && password.getText().toString().equals("test"))  
                { 
                    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0); 
                    SharedPreferences.Editor editor = settings.edit(); 
                    editor.putString("name", welcome); 
                    editor.commit();     
                    Intent intent = new Intent(Register.this, SecureXActivity.class); 
                    //intent.putExtra("name", welcome); 
                    startActivity(intent); 
                } 
            } 
        } 
    }); 
} 
} 
```

SecureXActivity.java

```
public class SecureXActivity extends Activity 
{ 
public static final String PREFS_NAME = "LoginPrefs"; 

private ListView m_listview; 
Button btnSendlogs; 
Button btnMailadmin; 
Button btnContactSupport; 
Button btnSettings; 

@Override 
public void onCreate(Bundle savedInstanceState) 
{ 
    Thread.setDefaultUncaughtExceptionHandler(new exceptionHandler(this)); 
    super.onCreate(savedInstanceState); 
    setContentView(R.layout.main); 
    //Here we are setting the installation date of a application 
    ContextWrapper context = this; 
    PackageManager packageManager = context.getPackageManager(); 
    ApplicationInfo appInfo; 
    try 
    { 
        appInfo = packageManager.getApplicationInfo("com.simsys.securex", 0); 
        String sourceDir= appInfo.sourceDir; 
        long dateTimeSync= new File(sourceDir).lastModified(); 
        String DateTimeStamp=getDate(dateTimeSync, "dd/MM/yyyy hh:mm:ss"); 
        String dateTimeSync2="Installed_Date:"; 
        String dateTimeSync3=dateTimeSync2.concat(DateTimeStamp); 
        TextView txtCurrentTime= (TextView)findViewById(R.id.textViewdatetime); 
        txtCurrentTime.setText(dateTimeSync3); 
    }  
    catch (NameNotFoundException e)  
    { 
        e.printStackTrace(); 
    } 
    //Here We Welcome the user 

    //List View 
    m_listview = (ListView) findViewById(R.id.list_view); 
    ArrayList<String> listItems=new ArrayList<String>(); 
    listItems.add("CAMERA"); 
    listItems.add("RECORDER"); 
    ArrayAdapter<String> adapter = 
            new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, listItems); 

    m_listview.setAdapter(adapter); 
    if(isBluetoothServiceRunning()) 
    { 
        listItems.add("BLUETOOTH"); 
    } 
    if(isGprsServiceRunning()) 
    { 
        listItems.add("GPRS"); 
    } 
    if(isWifiServiceRunning()) 
    { 
        listItems.add("WIFI"); 
    } 
    adapter.notifyDataSetChanged(); 
    //Call to Buttons Functionality 
    btnSendlogs = (Button) findViewById(R.id.button_sendlogs); 
    btnSendlogs.setOnClickListener(myhandler1); 
    btnMailadmin=(Button) findViewById(R.id.button_mailtoadmin); 
    btnMailadmin.setOnClickListener(MailadminHandler); 
    btnContactSupport = (Button) findViewById(R.id.button_contactsupport); 
    btnContactSupport.setOnClickListener(ContactSupportHandler); 

} 

//Navigation from Registration to Main page 
public boolean onCreateOptionsMenu(Menu menu)  
{ 
    MenuInflater Inflater = getMenuInflater(); 
    Inflater.inflate(R.menu.menu, menu); 
    return true; 
} 

@Override 
public boolean onOptionsItemSelected(MenuItem item) 
{ 
    if (item.getItemId() == R.id.logout) 
    { 
        SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0); 

        String data2=settings.getString("name", ""); 
        TextView txtwelcm= (TextView)findViewById(R.id.textViewwelcm); 
        txtwelcm.setText(data2); 
        SharedPreferences.Editor editor = settings.edit(); 
        editor.remove("name"); 
        editor.commit(); 
        finish(); 
    } 
    return super.onOptionsItemSelected(item); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:57:21.753

为了实现 sharedPreferences 使用以下代码

```
 Sharedpreferences myPref = this.getSharedPreferneces("your_file_name",MODE);
 SharedPreferences.Editor editor = myPref.edit();
 editor.putString("String_Name",value);
 editor.putInt("Int_Name","value"); 
```

从 SharedPreferences 中检索

```
 Sharedpreferences myPref = this.getSharedPreferneces("your_file_name",MODE);  
   String stringValue = myPref.getStirng("String_Name","DEFAULT_VALUE"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:53:52.137

您可以从任何活动（SecureXActivity）中检索您的 SharedPreferences，就像在 Register.java 中一样

```
SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
settings.getString("logged", ""); 
```

你有没有尝试过？你发现什么问题？

编辑：也许是因为您尝试从 onCreate.load 加载它。刷新或单击主页时不会调用此方法。您应该在您的应用程序中找到更合适的点来执行此操作。

# php - 如果语句设置变量但语法错误

> ID：11756702
> 
> 赞同：0
> 
> 时间：2012-08-01T09:49:47.740
> 
> 标签：php, variables, if-statement

我收到此语句的语法错误

```
$catlist = if (function_exists('put_cat_icons')) {
put_cat_icons( wp_list_categories('echo=0&orderby=id&show_count=1&title_li=&child_of=' . $cat_id.'&echo=0'));
} else {
wp_list_categories('echo=0&orderby=id&show_count=1&title_li=&child_of=' . $cat_id);
}​​​​​​​ 
```

如果我删除`$catlist =`，我不会收到任何错误。代码中有什么问题？我可以设置这样的变量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:51:30.163

`if`因为赋值的值是无效的。不知道，你从哪里得到这个。但是，您可以在此处使用[三元运算符](http://php.net/language.operators.comparison#language.operators.comparison.ternary)

```
$catlist = function_exists('put_cat_icons')
    ? put_cat_icons( wp_list_categories('echo=0&orderby=id&show_count=1&title_li=&child_of=' . $cat_id.'&echo=0'))
    : wp_list_categories('echo=0&orderby=id&show_count=1&title_li=&child_of=' . $cat_id); 
```

此外，当您查看代码时，您可能会意识到`wp_list_categories()`-call 在两种情况下都是相同的

```
$catlist = wp_list_categories('echo=0&orderby=id&show_count=1&title_li=&child_of=' . $cat_id);
if (function_exists('put_cat_icons')) $catlist = put_cat_icons($catlist); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:51:12.190

我建议重新排列你的代码

```
if (function_exists('put_cat_icons')) {
    $catlist = put_cat_icons( wp_list_categories('echo=0&orderby=id&show_count=1&title_li=&child_of=' . $cat_id.'&echo=0'));
} else {
    $catlist = wp_list_categories('echo=0&orderby=id&show_count=1&title_li=&child_of=' . $cat_id);
}​​​​​​​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T09:51:23.127

您不能分配条件的结果 - 它们必须是独立的。可能你的意思是：

```
if (function_exists('put_cat_icons')) {
    $catlist = put_cat_icons( wp_list_categories('echo=0&orderby=id&show_count=1&title_li=&child_of=' . $cat_id.'&echo=0'));
} else {
    $catlist = wp_list_categories('echo=0&orderby=id&show_count=1&title_li=&child_of=' . $cat_id);
}​​​​​​​ 
```

您可能对普通条件和三元条件感到困惑，后者确实允许赋值。

```
$something = 1 < 2 ? 'foo' : 'bar'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T09:51:51.707

从外观上看，您将普通 if 语句与[三元运算符](http://www.php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary)混合在一起，看起来应该像这样`$someVar = (condition) ? "TRUE VALUE" : "FALSE VALUE";`

在您的情况下使用三元运算符看起来像这样：

```
$catlist = (function_exists('put_cat_icons')) ? 
    put_cat_icons( wp_list_categories('echo=0&orderby=id&show_count=1&title_li=&child_of=' . $cat_id.'&echo=0')) : 
    wp_list_categories('echo=0&orderby=id&show_count=1&title_li=&child_of=' . $cat_id); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T09:52:15.980

我不认为这是设置变量的正确方法。你想这样做吗

```
$catlist = (function_exists('put_cat_icons')) ? put_cat_icons( wp_list_categories('echo=0&orderby=id&show_count=1&title_li=&child_of=' . $cat_id.'&echo=0')):
wp_list_categories('echo=0&orderby=id&show_count=1&title_li=&child_of=' . $cat_id); 
```

# android - 从 ListView 编辑/删除项目的正确方法是什么

> ID：11756704
> 
> 赞同：1
> 
> 时间：2012-08-01T09:49:51.350
> 
> 标签：android, listview

所以，我有带有 ArrayList<MyObject> 的 MainActivity、用于显示它的 ListView 和用于获取用于编辑项目的 UI 的 EditActivity。ListView 的适配器扩展了 ArrayAdapter<MyObject>。当用户单击项目时，我想用对象启动 EditActivity 进行编辑。我怎么能把对象放到EditActivity？我有：

```
 Intent i = new Intent(this, EditActivity.class);
    startActivity(i); 
```

如何在 EditActivity 中获取对象？当然，我可以将 ArrayList< MyObject> 声明为静态并将项目的索引设置为：

```
 Intent i = new Intent(this, EditActivity.class);
    i.putExtra("index", iItemIdex);
    startActivity(i); 
```

然后，在 EditActivity 中，得到它：

```
 int iIndex = getIntent().getExtras().getInt("index");
    MyObject o = MainActivity.MyArray.get(iIndex); 
```

但我想这不是最好的决定:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:55:29.843

如果要编辑 a `ListView`，只需`ArrayAdapter`使用Adapter 上的`add`、`insert`、`remove`和函数编辑 。`clear`

完成此操作后，您调用`notifyDataSetChanged()`以通知 的内容`ArrayAdapter`已更改。您`ListView`将使用新值进行更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:01:33.180

您不必将 List 声明为静态的。这是您应该让它工作的代码（一种可能性）：

```
@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    MyObjectClass obj = (MyObjectClass) arg0.getAdapter().getItem(arg2);
    Intent intent = new Intent(this, EditActivity.class);
    intent.putExtra("myKey", obj);
    startActivity(intent);
} 
```

这样就没有无用的静态变量，并且您正在按照它的方式使用该方法。IMO 最简单、最干净的解决方案之一。
**请注意**，要使用此方法，您必须在自定义中重新定义该`getItem(int)`方法`ArrayAdapter`。你应该做这个 ：

```
@Override
public MyObjectClass getItem(int position) {
    return this.myList.get(position);
} 
```

**编辑：**然后，如果您希望能够删除项目，我认为您应该将包含您的对象的整个列表放入意图中（不要将其声明为静态）。然后只需调用 add()/remove() 方法，当您想要更新 UI 以显示修改后的列表时，只需在您的自定义 ArrayAdapter 上调用 notifyDataSetChanged()，例如在 MainActivity 中返回时：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    yourListAdater.notifyDataSetChanged();
    /* Assuming you have a reference pointing to your adapter in your MainActivity, if you don't just do: ((MyCustomAdapterClass) myListView.getAdapter()).notifyDataSetChanged(); */
} 
```

# mysql-workbench - 在 Mysql Workbench 中复制选定的查询字段名称

> ID：11756705
> 
> 赞同：2
> 
> 时间：2012-08-01T09:49:54.970
> 
> 标签：mysql-workbench

我正在使用 mysql 工作台（SQL 编辑器）。我需要复制 Mysql 查询浏览器中存在的每个查询中的列列表。例如

```
Select * From tb 
```

我想要的字段列表如下：id，title，keyno，......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T10:03:48.330

您的意思是您希望能够获取指定表的一列或多列？

**第一种方法** Do`SHOW COLUMNS FROM your_table_name`并从那里根据您想要的内容添加一些基本过滤，方法是指定您只需要数据类型为 int 的列，默认值为 null 等，例如`SHOW COLUMNS FROM your_table_name WHERE type='mediumint(8)' AND`null`='yes'`

**第二种方式** 这种方式更加灵活和强大，因为您可以组合保存在 MySQL 的 INFORMATION_SCHEMA 内部数据库中的许多表和其他属性，其中包含所有数据库列、表等的记录。使用下面的查询并将 TABLE_NAME 设置为表你想找到列

```
SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME='your_table_name'; 
```

要将匹配列的数量限制为特定数据库`AND TABLE_SCHEMA='your_db_name'`，请在查询末尾添加

此外，要让列名不是出现在多行中，而是作为逗号分隔的列表出现在单行中，您可以使用`GROUP_CONCAT(COLUMN_NAME,',')`而不是仅`COLUMN_NAME`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-12-30T14:26:23.080

要选择 select 语句中的所有列，请转到 SCHEMAS 菜单并右键单击要选择列名的 ok 表，然后选择“复制到剪贴板 > 全选语句”。

[![在此处输入图像描述](../Images/0b6cfdfce990c1c4cc9b6733a6f68b2d.png)](https://i.stack.imgur.com/f2dFA.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-15T13:44:27.813

接受的解决方案很好，但仅限于表中的字段名称。处理任意查询将标准化您的 select 子句，以便能够使用正则表达式仅去除列别名。我将我的选择子句格式化为“每个元素 1 行”，所以 `Select 1 + 1 as Col1, 1 + 2 Col2 From Table` 变成 `Select 1 + 1 as Col1 , 1 + 2 Col2 From Table` 了然后我在“每个选择元素 1 行”版本上使用简单的正则表达式来替换`"^.* "`（不包括引号）什么都没有。正则表达式查找行中最后一个空格之前的所有内容，因此它假定您的列别名不包含空格（因此用下划线替换空格）。或者，如果您不喜欢“每个元素 1 行”，那么请始终使用“as”关键字来为您提供正则表达式可以掌握的句柄。

# ruby-on-rails - Bootstrap 模态显示两次

> ID：11756714
> 
> 赞同：1
> 
> 时间：2012-08-01T09:50:27.820
> 
> 标签：ruby-on-rails, twitter-bootstrap, modal-dialog

在我的 Rails 应用程序中，我使用的是 Twitter 引导程序。

之前，一切正常，但突然模态开始显示两次。我不知道发生了什么..我的代码如下所示。

# 设计/注册/new.html.erb

```
<%= link_to "Terms of Service", terms_in_modal_path, {:class => "show-terms", :remote => true} 
```

# pages_controller

```
def terms_in_modal
  respond_to do |format|
    format.js
  end
end 
```

# terms_in_modal.js.erb

```
$("#signup-modal").html('<%= escape_javascript render(:partial => "terms_in_modal") %>');
$('#show-terms').modal('show'); 
```

# _terms_in_modal.html.erb

```
<div id="show-terms" class="modal hide fade in">
...
</div> 
```

单击链接后，会出现两个模态，输出 html 如下所示。

```
<div id="signup-modal">
  <div id="show-terms" class="modal hide fade in" style="display: block; ">
    <div class="modal-header">
    ...
  </div>
</div>

<div class="modal-backdrop fade in"></div>
<div class="modal-backdrop fade in"></div>

<div id="show-terms" class="modal hide fade in" style="display: block; ">
    <div class="modal-header">
    ...
</div> 
```

编辑1

在我在 Heroku 上的登台应用程序中，模态运行良好。奇怪的是，在我上次推送 heroku 之后，我没有编辑任何与模式和注册页面相关的内容。我最近将操作系统更改为 Mountain Lion，因此它可能与操作系统有关。

编辑2

我做了“git push staging master”并尝试了模式是否可以正常工作，并且工作正常。很奇怪..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:51:33.153

It does this in your local environment most likely because your compiled assets that you need for Heroku are conflicting with the assets Rails includes on the fly when your in a development environment. To prevent this, you most likely need to just `rm -rf public/assets` to remove your precompiled assets. You should make sure to recompile them before every push to Heroku.

# android - 所有设备的软键盘 Appaer 的视图行为都不相同？

> ID：11756721
> 
> 赞同：0
> 
> 时间：2012-08-01T09:50:37.620
> 
> 标签：android, android-layout, view

我制作了支持多屏幕的应用程序，这意味着我已经添加了屏幕大小的权限，并且我的应用程序在 320*480 分辨率下运行良好我已经在 Galaxy S2 中针对此分辨率进行了**测试**

![在此处输入图像描述](../Images/787d2af86fb362412d2e65e20e1c880e.png)通过单击添加更多详细信息，我显示了六个编辑文本，但在第一个大小为 800*480 的模拟器中，当尝试输入**lable1**或**详细信息**时，看到软键盘打开但编辑文本没有出现在软键盘上方，所以如果我滚动该视图而不是它显示在 320*480 分辨率下它在键盘上向上推而无需滚动的位置。

对于**Label3**和800*480 分辨率的**细节**，它既不能在软键盘上方显示 edittext，也不能像 lable1 那样通过滚动来查看，而在 320*480 分辨率下它可以正常工作，而且我 还给了**android:imeOptions=" actionNext"**和**android:nextFocusDown="@+id/etMoreDetail3"**用于这六个编辑文本，但在 Galaxy s2 中，它的行为变化不像其他设备那样按顺序工作**lable1-->detail1-->lable2-->detail2-->标签3-->细节3**

我尝试通过在活动清单中添加 **android:windowSoftInputMode="adjustPan"**、**adjustResize**、**android:windowSoftInputMode="adjustPan|adjustResize"**、**stateHidden**但没有运气在输出中没有任何变化我的 xml 文件位于[xml 文件](http://pastebin.com/86g3qGrv)中，我已经添加这在清单中

```
 <supports-screens android:smallScreens="true"
    android:normalScreens="true" android:largeScreens="true" android:anyDensity="false" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:55:23.957

你应该为不同的屏幕创建不同的布局

[http://developer.android.com/training/basics/supporting-devices/index.html](http://developer.android.com/training/basics/supporting-devices/index.html)

# android - Android：“无法从对象转换为专辑”（专辑是一个类..）

> ID：11756724
> 
> 赞同：0
> 
> 时间：2012-08-01T09:50:38.257
> 
> 标签：android, lazy-loading, adapter

这里是 android 新手，（和一般编程）

我正在按照这个示例尝试创建一个惰性图像加载适配器：[http](http://thinkandroid.wordpress.com/2012/06/13/lazy-loading-images-from-urls-to-listviews/) ://thinkandroid.wordpress.com/2012/06/13/lazy-loading-images-from-urls-to-listviews/ 我正在使用“专辑”而不是学生，但其余的几乎相同。

当我从我的适配器调用以下内容时：

```
Album getItem(int position) {
    return items.get(position);
} 
```

我得到“类型不匹配：无法从对象转换为专辑”。我尝试从示例中逐字复制代码，但我得到了同样的错误..

有人可以解释我做错了什么，以及如何解决吗？谢谢你。

这是代码：

专辑类：

```
package another.music.player;

import android.graphics.Bitmap;
import android.os.AsyncTask;
import android.util.Log;

public class Album {

    private String album;

    private String imageUri;

    private Bitmap image;

    private AlbumAdapter albumAdapter;

    public Album(String album, String imageUri) {

        this.album = album;
        this.imageUri = imageUri;

        // Default image
        this.album = null;
    }

    public String getAlbum() {
        return album;
    }

    public void setAlbum(String album) {
        this.album = album;
    }

    public String getImageUri() {
        return imageUri;
    }

    public void setImageUri(String imageUri) {
        this.imageUri = imageUri;
    }

    public Bitmap getImage() {
        return image;
    }

    public AlbumAdapter getAdapter() {
        return albumAdapter;
    }

    public void setAdapter(AlbumAdapter albumAdapter) {
        this.albumAdapter = albumAdapter;
    }

    public void loadImage(AlbumAdapter albumAdapter) {
        // Hold a reference to the adapter
        this.albumAdapter = albumAdapter;
        if (imageUri != null && !imageUri.equals("")) {
            new ImageLoadTask().execute(imageUri);
        }
    }

    // Async task
    private class ImageLoadTask extends AsyncTask<String, String, Bitmap> {
        @Override
        protected void onPreExecute() {
            Log.i("ImageLoadTask", "Loading Image..");
        }

        // Param[0] is Image URI
        protected Bitmap doInBackground(String... param) {
            Log.i("ImageLoadTask", "Attempting to load image Uri: " + param[0]);
            try {
                Bitmap bitmap = ImageService.getBitmapFromURI(param[0]);
                return bitmap;
            } catch (Exception e) {
                e.printStackTrace();
                return null;
            }
        }

        protected void onProgressUpdate(String... progress) {
            // No Op
        }

        protected void onPostExecute(Bitmap ret) {
            if (ret != null) {
                Log.i("ImageLoadTask", "Successfully loaded" + album + " image");
                image = ret;
                if (albumAdapter != null) {
                    // When image is loaded, notify the adapter
                    albumAdapter.notifyDataSetChanged();
                }
            } else {
                Log.e("ImageLoadTask", "Failed to load " + album + " image");
            }
        }
    }
} 
```

专辑适配器类：

```
package another.music.player;

import java.util.ArrayList;
import java.util.List;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class AlbumAdapter extends BaseAdapter {

    private LayoutInflater mInflater;

    private List items = new ArrayList();

    public AlbumAdapter(Context context, List items) {
        mInflater = LayoutInflater.from(context);
        this.items = items;
    }

    public int getCount() {
        return items.size();
    }

    public Album getItem(int position) {
        return items.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        Album album = items.get(position);
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.row_layout, null);
            holder = new ViewHolder();
            holder.name = (TextView) convertView.findViewById(R.id.name);
            holder.image = (ImageView) convertView.findViewById(R.id.image);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        holder.name.setText(album.getName());
        if (s.getImage() != null) {
            holder.pic.setImageBitmap(s.getImage());
        } else {
                // MY DEFAULT IMAGE
            holder.pic.setImageResource(R.drawable.generic_profile_man);
        }
        return convertView;
    }

    static class ViewHolder {
        TextView name;

        ImageView pic;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:59:59.450

您有一个 generic `List`，它将包含`Object`实例。这意味着类的任何实例`Object`或扩展的类`Object`（基本上所有实例）。当您尝试从该列表中取出一个项目时，编译器知道它是一个`Object`，但是您的方法签名说您正在返回一个`Album`; 编译器不知道您从列表中检索的元素**肯定是**，`Album`因此它无法编译代码。

您可以通过以下两种方法之一来解决此问题。您可以声明您`List`只包含`Album`该类的实例：

```
List<Album> items = new ArrayList<Album>(); 
```

或者您可以转换您从列表中检索的对象，以告诉编译器**您**确定它是一个`Album`即使它不是：

```
Album getItem(int position) {
    return (Album)items.get(position);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:53:10.597

尝试以这种方式列出您的清单：

```
List<Album> items = new ArrayList<Album>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T09:56:33.710

您应该使用 List/ArrayList 的特殊形式，或者自己转换结果。

```
Album getItem(int position) {
    return (Album)items.get(position);
} 
```

或更好：

```
private List<Album> items = new ArrayList<Album>(); 
```

# simple-html-dom - 每 10 分钟自动获取数据（简单的 html dom）

> ID：11756728
> 
> 赞同：0
> 
> 时间：2012-08-01T09:50:44.833
> 
> 标签：simple-html-dom

我正在做一个项目，我想在其中获取最后一分钟的航班，然后将它们保存到我的数据库中。问题是我不希望每次用户访问网站时都进行抓取，然后保存到我的数据库中，因为这只会导致大量重复。我可以以某种方式让网站在预定时间为我获取数据，然后删除数据库中以前的记录吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T04:38:22.943

如果您希望操作系统定期执行任务，cron 作业就是您想要的。

要么让 cron 作业通过命令行调用你的程序，要么使用 wget 来获取会触发数据获取的页面。

有关 cron 作业的更多信息： [http ://www.thesitewizard.com/general/set-cron-job.shtml](http://www.thesitewizard.com/general/set-cron-job.shtml)

# python - Django 和多种形式

> ID：11756729
> 
> 赞同：0
> 
> 时间：2012-08-01T09:50:45.890
> 
> 标签：python, django

我正在尝试找出最适合 django 的方式来执行以下操作：

**楷模**

```
class Warehouse(models.Model):
      name = models.CharField()

class Product(models.Model):
      name = models.CharField()

class ProductStock(models.Model):
      product = models.ForeignKey(Product)
      warehouse = models.ForeignKey(Warehouse)
      qty = models.IntegerField() 
```

知道我需要输入每个仓库的库存，在产品页面上构建表单的最佳方法是什么？

我知道我可以抓住仓库并对其进行迭代并构建一个 qty 字段输入，然后在提交时对其进行迭代，但是有更好的方法吗？

干杯，本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:58:58.997

[Modelformsets](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#model-formsets)应该可以解决问题。特别是，查看内联模型表单集和内联表单集工厂。它们是我在 Django 中最喜欢的东西之一，但如果您是该框架的新手，它们也是一个很大的麻烦。

# php - PHP 中的 memcached 持久性无法按预期工作

> ID：11756732
> 
> 赞同：6
> 
> 时间：2012-08-01T09:51:07.507
> 
> 标签：php, memcached, persistent, persistent-connection, libmemcached

我尝试了一些不同的 memcached 库和插件版本，以实现 PHP memcache 客户端和 memcached 服务器之间的真正持久性。

问题是仍然打开和关闭连接，以便连接计数器上升，而不是重用现有的持久连接。

我已经从 Redhat 机器上的最新源代码编译了 memcached 守护进程。我使用版本 memcached-1.4.14 并以“#/opt/memcached/bin/memcached -vvvv”开头

我还从最新的源版本 memcached-2.0.1 编译的 php 插件，我已经针对 libmemcached-1.0.9 编译它以使其保持最新。目前它不能针对 libmemcached-1.0.10 进行编译。

我的 PHP 脚本如下所示：

```
<?php
header("Cache-Control: no-cache, must-revalidate");
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT");

$key = "key_" . uniqid();
$memcached = new Memcached( 'persistent' );
$memcached->setOption(Memcached::OPT_LIBKETAMA_COMPATIBLE, true);
$memcached->setOption(Memcached::OPT_RECV_TIMEOUT, 1000);
$memcached->setOption(Memcached::OPT_SEND_TIMEOUT, 3000);
$memcached->setOption(Memcached::OPT_TCP_NODELAY, true);
$memcached->setOption(Memcached::OPT_PREFIX_KEY, 'persistent');

if( !count($memcached->getServerList() ) )
{
    $memcached->addServer( 'localhost', 11211 );
}
$memcached->set($key, 'value');
$value = $memcached->get($key);

print_r( $memcached->getStats() );
?> 
```

在触发脚本时，我在输出中看到没有添加服务器，只有在超时时间之后。

```
Array ( [@�qVG:11211] => Array ( [pid] => 3728 [uptime] => 73 [threads] => 4 [time] => 1343813688 [pointer_size] => 64 [rusage_user_seconds] => 0 [rusage_user_microseconds] => 6998 [rusage_system_seconds] => 0 [rusage_system_microseconds] => 31995 [curr_items] => 37 [total_items] => 37 [limit_maxbytes] => 67108864 [curr_connections] => 38 [total_connections] => 47 [connection_structures] => 39 [bytes] => 3589 [cmd_get] => 37 [cmd_set] => 37 [get_hits] => 37 [get_misses] => 0 [evictions] => 0 [bytes_read] => 3267 [bytes_written] => 39458 [version] => 1.4.14 ) ) 
```

但是连接计数器仍然上升，我想客户端创建了一个连接，并且在服务器端重新使用了持久连接。

```
#netstat -an | grep 11211 | wc -l

tcp        0      0 ::1:11211                   ::1:55941                   VERBUNDEN   
tcp        0      0 ::1:55961                   ::1:11211                   VERBUNDEN   
tcp        0      0 ::1:55959                   ::1:11211                   VERBUNDEN   
tcp        0      0 ::1:11211                   ::1:56005                   VERBUNDEN   
...and so on 
```

在服务器端，我得到详细的输出，告诉我使用了持久性：

```
...
<43 get persistentkey_5018f83903ded
> FOUND KEY persistentkey_5018f83903ded
>43 sending key persistentkey_5018f83903ded
>43 END
... 
```

我们希望在具有大量传入连接的高性能环境中使用 memcache，而当前的连接数量确实会杀死 apache 子代。任何想法如何实现真正的持久性？

使用的软件：

*   红帽企业 Linux 服务器 6.2 版（圣地亚哥）
*   PHP 版本 5.3.3
*   Prefork 中的 Apache/2.2.15
*   内存缓存服务器 1.4.14
*   libmemcached 1.0.9
*   PHP memcached 插件 2.0.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:03:31.983

那是因为您`Memcached::OPT_TCP_NODELAY`在每个请求中都设置了。像这样的一些选项会导致 libmemcached 库在您设置它时执行重新连接。

由于连接选项持续存在，因此没有理由在每次请求时都设置它们。因此，您应该使用：

```
<?php
header("Cache-Control: no-cache, must-revalidate");
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT");

$key = "key_" . uniqid();
$memcached = new Memcached( 'persistent' );

if( !count($memcached->getServerList() ) )
{
    $memcached->setOption(Memcached::OPT_LIBKETAMA_COMPATIBLE, true);
    $memcached->setOption(Memcached::OPT_RECV_TIMEOUT, 1000);
    $memcached->setOption(Memcached::OPT_SEND_TIMEOUT, 3000);
    $memcached->setOption(Memcached::OPT_TCP_NODELAY, true);
    $memcached->setOption(Memcached::OPT_PREFIX_KEY, 'persistent');
    $memcached->addServer( 'localhost', 11211 );
}
$memcached->set($key, 'value');
$value = $memcached->get($key);

print_r( $memcached->getStats() );
?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T20:34:08.987

我不相信使用 Memcached 扩展可以实现*真正的持久化。*来自 PHP 的[持久](http://jmeter.apache.org)文档：

### 如果您使用 PHP-CGI

持久连接可以在整个应用程序过程中共享，但会在脚本完成（页面加载）时关闭；

### 如果您使用 Apache 的多进程模块

一个请求将衍生一个具有持久连接的子进程。如果有新请求进来，而前一个请求尚未完成，则将使用现有的持久连接。但是，如果没有额外的请求，持久连接将在子进程完成时关闭。

您提供的脚本可能对测试 memcached 有效，但手动运行它可能不会。看看[jMeter](http://jmeter.apache.org)。您可以快速创建一个[线程组](http://jmeter.apache.org/usermanual/build-web-test-plan.html)，并在您的应用程序中抛出 100 多个用户。

# jquery - jQuery 加载和获取

> ID：11756741
> 
> 赞同：0
> 
> 时间：2012-08-01T09:51:32.597
> 
> 标签：jquery

我有这个标记`index.html`

```
<html>
     <head>
         <title>Jquery Ajax</title>
         <script src="jquery.js"></script>
         <script>
             $(document).ready(function(){
             $('button').click(function() {
                 $('#result').load('ajax/about.html');
             });
             });
         </script>
     </head>

     <body>
         <button>Click me</button>
         <div id="result">Hel</div>
     </body>
</html> 
```

在我的`about.html`我有一个简单的文本。当我单击按钮时，没有任何反应。考虑到我也使用了 $.get。但它不起作用。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:58:39.190

如果您在本地工作，如果您使用 chrome 尝试使用 firefox 或像这样启动 chrome，则可能会遇到问题

苹果电脑

```
/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome --allow-file-access-from-files 
```

视窗

```
open /Applications/Google\ Chrome.app --args --allow-file-access-from-files 
```

如果您的文档都在线，请确保您的两个文件都在同一个域中

另外，如果您使用 php，我认为您可以添加此

```
<?php header('Access-Control-Allow-Origin: *'); ?> 
```

但请确保在上线之前将其删除

# java - ImageIO.write 不起作用？

> ID：11756745
> 
> 赞同：2
> 
> 时间：2012-08-01T09:51:43.703
> 
> 标签：java, image, swing

您好，我的后续函数有问题，应该将转发的 bufferedImage 保存在磁盘上。当我运行此代码时，没有异常抛出没有问题，BufferedImage 被传输到 ImageIO.write(img, ext ,fileToSave) 文件已创建，ext 正确但我的磁盘上没有图像！几个小时后，我不知道会出什么问题。也许许可？但我有它在磁盘上读/写。

```
 public boolean SaveImage(BufferedImage img)
{
    JFileChooser FC=new JFileChooser("C:/");
    FC.addChoosableFileFilter(new jpgSaveFilter());
    FC.addChoosableFileFilter(new jpegSaveFilter());
    FC.addChoosableFileFilter(new PngSaveFilter());
    FC.addChoosableFileFilter(new gifSaveFilter());
    FC.addChoosableFileFilter(new BMPSaveFilter());
    FC.addChoosableFileFilter(new wbmpSaveFilter()); 

    int retrival=FC.showSaveDialog(null);

    if (retrival == FC.APPROVE_OPTION) 
       {

            String ext="";

            String extension=FC.getFileFilter().getDescription();

           if(extension.equals("*.jpg,*.JPG"))
          { 
              ext=".jpg";
          }
          if(extension.equals("*.png,*.PNG"))
          { 
              ext=".png";
          }
          if(extension.equals("*.gif,*.GIF"))
          { 
              ext=".gif";
          }
          if(extension.equals("*.wbmp,*.WBMP"))
          { 
              ext=".wbmp";
          }
          if(extension.equals("*.jpeg,*.JPEG"))
          { 
              ext=".jpeg";
          }
          if(extension.equals("*.bmp,*.BMP"))
          { 
              ext=".bmp";
          }

          File fileToSave = FC.getSelectedFile();
          try{
              ImageIO.write(img, ext ,fileToSave);

          }
          catch (IOException e) {
                e.printStackTrace();
            }
          catch(Exception ex)
          {
              System.out.println(ex.getMessage());
              return false;
          }
          return true;
       }
    return false;
} 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T09:55:33.390

问题是您将文件格式指定为 ext

有效地你的说法

```
ImageIO.write(img, ".jpg" ,fileToSave) 
```

您需要提供它，以便它评估为

```
ImageIO.write(img, "jpg" ,fileToSave) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T09:53:21.487

ImageIO.write 中的扩展名应该是`"PNG"`, `"JPG"`. 没有重点。

而且这种`if (extension.equals("..."))`方法非常糟糕。确保您确实提供了扩展。IE：至少其中一个 if 成功了。尝试`ext`在写入之前打印它，以检查它是否具有正确的值。

```
System.out.println("Extension: " + ext); 
```

哦，`javax.imageio`只支持 PNG、JPG、JPEG（和 GIF 只读）。要动态获取支持的格式列表，请使用：

```
ImageIO.getWriterFormatNames(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T10:05:33.307

错误可能在这里： JFileChooser FC=new JFileChooser("C:/"); 将文件路径更改为“C:\”（或双反斜杠）

# windows-mobile - Windows 移动 API 的参考链接？

> ID：11756747
> 
> 赞同：0
> 
> 时间：2012-08-01T09:51:48.897
> 
> 标签：windows-mobile, windows-mobile-6.5, windows-mobile-6, windows-mobile-5.0

请告诉我 windows mobile 中有哪些 API 可用。请告诉我相关的参考链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:50:46.813

您必须下载免费的 Microsoft Windows Mobile SDK：[http](http://www.microsoft.com/en-us/download/details.aspx?id=5389) ://www.microsoft.com/en-us/download/details.aspx?id= 5389（有关 WEH652 以外的其他 SDK，请参见底部）。

Windows Mobile 设备支持标准 Win32 API 的子集以及一些特定于 Mobile 的 API。

根据设备操作系统版本，它们预装了 Dotnet Compact Framework 1.0、2.0 或 3.5：http: [//msdn.microsoft.com/library/w6ah6cw1.aspx](http://msdn.microsoft.com/library/w6ah6cw1.aspx)

如果您需要其他信息，您应该在问题中更具体。

# java - Java：将多维数组转换或引用为一维数组

> ID：11756750
> 
> 赞同：1
> 
> 时间：2012-08-01T09:52:03.110
> 
> 标签：java, parallel-processing, opencl, gpgpu, jocl

我有一个用 Java 编写的程序，其中涉及大量的多维数组。我正在尝试使用 JOCL (OpenCL) 对其进行并行化，但是在传递给 OpenCL 之前，必须将多维数组转换为一维数组。

除了用一维数组重写整个程序，还有其他的解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:41:52.103

当我有多维数组时，这是我在 C++ 中所做的：

```
for (int i = 0 ; i < n ; i++) {
    queue.enqueueWriteBuffer(buffer, CL_FALSE, i*m*sizeof(int), m*sizeof(int), data[i]);
} 
```

当我需要阅读时也是如此，只是在你的内核中小心你的索引。

你不能在 Java 中做同样的事情吗？

# javascript - 向 api.twitter.com 发出 XMLHttpRequest 的解决方法？

> ID：11756753
> 
> 赞同：0
> 
> 时间：2012-08-01T09:52:17.683
> 
> 标签：javascript, json, twitter

****更新：**

显然问题演变成 XMLHttpRequest 问题：

```
XMLHttpRequest cannot load http://api.twitter.com/1/statuses/user_timeline.json?screen_name=bogdanch&. Origin http://adfix.ro is not allowed by Access-Control-Allow-Origin. 
```

我正在使用的代码是：

```
(function ($) {
    var Twitter = {
        init: function () {
            this.insertLatestTweets("bogdanch")
        },
        insertLatestTweets: function (a) {
            var b = 5;
            var c = "http://api.twitter.com/1/statuses/user_timeline.json?screen_name=" + a + "&#038;count=" + b + "&#038;callback=?";
            $.getJSON(c, function (b) {
                var c = '<marquee behavior="scroll" scrollamount="1" direction="left">';
                for (var d in b) {
                    c += '<a href="http://twitter.com/' + a + "#status_" + b[d].id_str + '">' + b[d].text + " <i>" + Twitter.daysAgo(b[d].created_at) + "</i></a>"
                }
                c += "</marquee>";
                $("#twitter p").replaceWith(c);
                Twitter.fancyMarquee()
            })
        },
        fancyMarquee: function () {
            $("#twitter marquee").marquee("pointer").mouseover(function () {
                $(this).trigger("stop")
            }).mouseout(function () {
                $(this).trigger("start")
            }).mousemove(function (a) {
                if ($(this).data("drag") == true) {
                    this.scrollLeft = $(this).data("scrollX") + ($(this).data("x") - a.clientX)
                }
            }).mousedown(function (a) {
                $(this).data("drag", true).data("x", a.clientX).data("scrollX", this.scrollLeft)
            }).mouseup(function () {
                $(this).data("drag", false)
            })
        },
        daysAgo: function (a) {
            if ($.browser.msie) {
                return "1 day ago"
            }
            var b = (new Date(a)).getTime();
            var c = (new Date).getTime();
            var d = Math.round(Math.abs(c - b) / (1e3 * 60 * 60 * 24));
            var e = d + " days ago";
            if (d == 0) {
                e = "today"
            } else if (d == 1) {
                e = d + " day ago"
            }
            return e
        }
    };
    Twitter.init()
})(jQuery); 
```

有没有办法可以避免 XMLHttpRequest 问题？

****原帖**

我想实现我最后 5 条推文的水平选取框，我遵循了本教程：[http](http://artistutorial.blogspot.ro/2011/09/how-to-make-horizontal-scrolling.html) ://artistutorial.blogspot.ro/2011/09/how-to-make-horizo​​ntal-scrolling.html 。你可以[在这里](http://bit.ly/MRckz9)看到我的版本 问题是当我尝试在[我的网站](http://adfix.ro)上实现它时它没有加载任何推文并使用 Chrome 检查器我看到一个未捕获的类型错误

```
Cannot call method 'getJSON' of undefined 
Twitter.insertLatestTweets 
Twitter.init 
(anonymous function) 
```

我不明白为什么它适用于 pastebin 而不是我的网站。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:59:00.183

这是因为由于某种原因，您使用的jquery.js[文件](http://adfix.ro/wp-includes/js/jquery/jquery.js?ver=1.7.2)`jQuery.noConflict();`在它的末尾，这使得它`$`不可用。删除该行，使用`jQuery`而不是`$`，或将代码包装在闭包中：

```
(function($) {
    // your code
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:04:06.967

为了避免向 api.twitter.com 发送 XMLHttpRequest，我制作了一个充当代理的 php 文件。该文件包含以下代码：

```
<?php
header('Content-Type: text/xml');
$tweets = file_get_contents('http://api.twitter.com/1/statuses/user_timeline.xml?screen_name=TWITTER_USERNAME_HERE&count=6');
echo $tweets;
?> 
```

# c# - 使用正则表达式对象 C# 的 CSV 解析错误

> ID：11756754
> 
> 赞同：1
> 
> 时间：2012-08-01T09:52:19.760
> 
> 标签：c#, regex, csv, .net-2.0

我正在使用 ParseCSV 函数来解析 C# 中的 CSV 文件。

CSV 文件的最后一列包含：**NM 120922C00002500（后面有很多空格）**

在 ParseCSV 函数中，我传递了一个输​​入字符串，作为读取 CSV 文件的结果。

输入字符串的一部分是：

> "1",000066,"07/30/2012","53193315D4","B","99AAXXPB0",",","","","CALL NM 09/22/12 00002.500 ","MG", 100.00,1.050000,310,32550.00,25530.70,360,37800.00,30477.78,"C",2.50000,09/22/2012,"NM"," **NM 120922C00002500** ".

在 CSVParse 函数中，正在执行以下操作：

```
string csvParsingRegularExpressionOld = Prana.Global.ConfigurationHelper.Instance.GetAppSettingValueByKey("CSVParsingRegularExpression");
string csvParsingRegularExpression = csvParsingRegularExpressionOld.Replace("\\\\", "\\"); 
```

在 csvParsingRegularExpression 值出来为：

```
((?<field>[^",\r\n]*)|"(?<field>([^"]|"")*)")(,|(?<rowbreak>\r\n|\n|$)) 
```

我跟进

```
Regex re = new Regex(csvParsingRegularExpression);

MatchCollection mc = re.Matches(inputString);

foreach (Match m in mc) 
{

   field = m.Result("${field}").Replace("\"\"", "\"");
} 
```

但是当涉及到最后一个值“NM 120922C00002500”时，这里的字段包含空字符串。这个问题的可能解决方案是什么？

我不知道 CSV 文件或正则表达式方法“**匹配**”是否有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T05:39:27.910

不要使用正则表达式来读取 CSV。

[http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:40:35.213

您不匹配最后一组，因为它以引号外的句点结尾。如果将句点添加到正则表达式的终止组，则它可以工作：

```
(\"?(?<field>[^",\r|\n]*)\"?\,?)*\.?(?<rowbreak>[\r|\n]*) 
```

尽管正如其他评论所指出的那样，如果数据确实是有效的 CSV 文件，那么滚动您自己的解析器并不是一个好主意（我没有费心检查给定的样本是否与[规范](https://www.rfc-editor.org/rfc/rfc4180)匹配）。有[很多](https://stackoverflow.com/questions/2081418/parsing-csv-files-in-c-sharp)可用的解析器，你可能会错过一些边缘情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T05:50:05.283

如果您不是绝对想使用正则表达式，这是我制作的一个小类，然后是它的用法：

```
public class ParseHelper
{
    public char TextDelimiter { get; set; }
    public char TextQualifier { get; set; }
    public char EscapeCharacter { get; set; }

    public List<string> Parse(string str, bool keepTextQualifiers = false)
    {
        List<string> returnedValues = new List<string>();

        bool inQualifiers = false;
        string currentWord = "";

        for (int i = 0; i < str.Length; i++)
        {
            //Looking for EscapeCharacter.
            if (str[i] == EscapeCharacter)
            {
                i++;
                currentWord += str[i];
                continue;
            }

            //Looking for TextQualifier.
            if (str[i] == TextQualifier)
            {
                if (keepTextQualifiers)
                    currentWord += TextQualifier;

                inQualifiers = !inQualifiers;
                continue;
            }

            //Looking for TextDelimiter.
            if (str[i] == TextDelimiter && !inQualifiers)
            {
                returnedValues.Add(currentWord);
                currentWord = "";
                continue;
            }

            currentWord += str[i];
        }

        if (inQualifiers)
            throw new FormatException("The input string, 'str', is not properly formated.");

        returnedValues.Add(currentWord);
        currentWord = "";

        return returnedValues;
    }
} 
```

用法，根据您的情况：

```
ParseHelper ph = new ParseHelper() {
    TextDelimiter = ',',
    TextQualifier = '"',
    EscapeCharacter = '\'};
List<string> parsedLine = ph.Parse(unparsedLine); 
```

# jquery - 带有选择框的下拉 div 不起作用 IE9

> ID：11756758
> 
> 赞同：0
> 
> 时间：2012-08-01T09:52:37.773
> 
> 标签：jquery, html, css

嗨，我有 IE9 的问题。我有带有选择框的下拉菜单，如果我尝试选择值，悬停 div 将消失。我试图通过一些代码来弄清楚，但我被卡住了。这是我的代码。所以如果有人知道如何修复那个 IE 芽，我会很高兴的。谢谢

代码：http: [//jsfiddle.net/fT7D3/13/](http://jsfiddle.net/fT7D3/13/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:10:28.187

Check out [this fiddle](http://jsfiddle.net/fT7D3/25/)

Try this code :

```
$('.left_content_tab_combobox').focus(function() {
    $(this).parents('.dropdown').addClass('dropdown_hover'); }).blur(function() {
    $(this).parents('.dropdown').removeClass('dropdown_hover');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T11:54:58.137

修改了您的 html+css 并使用 jQuery 隐藏和显示下拉菜单。仅使用伪选择器可能无法做到这一点`:hover`，您可以看看这个[问题](https://stackoverflow.com/questions/10995165/css-opposite-of-hover-on-mouse-leave)。

```
$(document).ready(function(){
    $('.drop').mouseenter(function(){
        $('#menu .content').hide();
        $(this).next('.content').show();
    });
    $('.closex').click(function(){
        $(this.parentNode).hide();
    });
}); 
```

[小提琴](http://jsfiddle.net/qBPPw/1/)/[粘贴](http://pastebin.com/Ts9CkXGE)

# android - 在 Android 中使用一个 OnClickListner 处理多个复选框？

> ID：11756761
> 
> 赞同：0
> 
> 时间：2012-08-01T09:52:50.910
> 
> 标签：android, checkbox

我有一个包含复选框列表的滚动视图，现在我必须根据每个复选框的状态设置对应于每个复选框的整数值。我可以通过为每个复选框应用 onClickListner 来做到这一点，但我认为我并没有直截了当地想它，它可以像我们在按钮的情况下通过实现 onClickListener 那样只用一个 cliclListener 来完成。帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:57:12.170

您可以使用 single`OnClickListner`和 use`switch case`语句

```
public void onClick(View v){
  switch(v.getId()){
     case R.id.checkbox1:

      break;

      case R.id.cbox2:

       break;

      ............and so on

   }
} 
```

并将此 onClickListner 设置为您的整个视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:56:50.410

也许您可以在滚动视图上添加 onTouchListener 或 onClickListener。触摸时，您可以获取被触摸的子元素。然后你就可以处理事情了。

# java - Java中的复杂泛型

> ID：11756764
> 
> 赞同：3
> 
> 时间：2012-08-01T09:53:12.330
> 
> 标签：java, generics

我有一个超类型定义为：

```
public abstract class AType<T> {
        ....

    private T value;
    private T mask;

    public T getValue() {
        if (isMasking())
            return null;

        return this.value;
    }

    public void setValue(T value) {
        if (value == null)
            throw new IllegalArgumentException("Value is mandatory.");

        this.value = value;
    }

    protected T getMask() {
        if (!isMasking())
            return null;

        return this.mask;
    }

    protected void setMask(T mask) {
        if (mask == null)
            throw new IllegalArgumentException("Mask is mandatory.");

        this.setMasking(true);
        this.mask = mask;
    }
        ...
} 
```

和几个子类型，如：

```
public class SpecType extends AType<Integer> {
    ...
} 
```

这些子类型指定了未知参数....我有更多的 fe IPv4、Long 等

现在我需要在运行时以某种方式进行动态转换......我在枚举中定义了这些类，如下所示：

```
public enum Type {
    SOME_TYPE(new TypeID(0, (short) 0), OFMU16.class,
            new Instantiable<AType<?>>() {
                @Override
                public SpecType instantiate() {
                    return new SpecType(new OFMatchTypeIdentifier(0, (short) 0));
                }
            }),...;

    ...

    public Class<? extends AType<?>> toClass() {
    return this.clazz;
}

    ...

} 
```

我想做类似的事情：

```
AType<?> type = SOME_TYPE.newInstance();    //this works

SOME_TYPE.toClass().cast(type).setValue(10);    //this don't work 
```

所以我必须静态地做：

```
((SpecType) type).setValue(10); 
```

一切都会好起来的，但是这个模块的用户不想每次都在枚举中查找并手动转换。这可能会出错并花费大量时间进行调试：/....

我的问题是如何重构它或如何定义继承结构以允许用户动态转换？是否可以？

**编辑：** 我正在解析来自网络的数据包。供应商类型标识符和值/掩码类型有很多不同的类型 - 这些字段对于每个这种组合都是常量，所以我将其定义为枚举常量。Fe 20 只有 TypeID 不同，但 VendorID 相同，都可以表示为 Integer，接下来的 10 个 VendorID 和 TypeID 不同，但都可以表示为 Short 等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:39:07.127

目前还不清楚为什么你应该完全施放。一旦`SOME_TYPE`写入您的源代码**或**set`setValue`方法的类型是硬编码的（在您的示例中`int`）`Integer`，您就不需要运行时检查 - 您需要编译时检查。

所以我想下面的代码片段是你的 API 用户应该如何编码的：

```
public class TypeTest {
    public static void main(String[] args) {
        AType<Integer> type0 = Types.SOME_TYPE_0.instantiate();
        type0.setValue(10);

        AType<String> type1 = Types.SOME_TYPE_1.instantiate();
        type1.setValue("foo");
    }
} 
```

我已将您的示例精简到了解泛型部分所需的最低限度：

```
abstract class AType<T> {
    private T value;

    // standard getter/setter
    public T getValue() { return this.value; }
    public void setValue(T value) { this.value = value; }
}

class SpecTypeInt extends AType<Integer> {
}

class SpecTypeString extends AType<String> {
}

interface Instantiable<T> {
    T instantiate();
} 
```

关键部分是：不要使用 an `enum`，因为 an`enum`不能有类型参数。`interface`您可以像下一个片段一样使用纯文本。接口中的每个引用都指向一个工厂。每个工厂都知道 a) 抽象类型和 b) 具体类型。为了使泛型满意，您必须将 a) 和 b) 与`? extends X`.

```
interface Types {
    Instantiable<? extends AType<Integer>> SOME_TYPE_0 = new Instantiable<SpecTypeInt>() {
        @Override
        public SpecTypeInt instantiate() {
            return new SpecTypeInt();
        }
    };

    Instantiable<? extends AType<String>> SOME_TYPE_1 = new Instantiable<SpecTypeString>() {
        @Override
        public SpecTypeString instantiate() {
            return new SpecTypeString();
        }
    }  ;
} 
```

**清理：**您的用户是否必须查看界面：是的，无论如何他必须，因为他必须知道哪种类型适合`setValue` ¹。没有解决方案可以规避这一点。尽管 Eclipse 可能会对您和您的用户有所帮助：`main`只需键入`Types.SOME_TYPE_1.instantiate();`然后转到行首，点击`Ctrl``2`+ `L`（“分配给本地变量”），Eclipse 会`AType<String> instantiate =`为您替换该部分。

* * *

¹如果您的用户不知道该`setValue`方法的正确类型，那么您就问错了问题。在这种情况下，您应该问诸如“如何设计通用安全转换设施？”之类的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T11:41:32.380

也许使用这样的 setValue 方法：

```
public void setValue(Object value) {
    if (value == null)
        throw new IllegalArgumentException("Value is mandatory.");
    this.value = (T)value;
} 
```

虽然你会有一个未经检查的演员表。

希望这可以帮助

# android - Android 应用程序使用 setOnClickListener 崩溃

> ID：11756765
> 
> 赞同：-1
> 
> 时间：2012-08-01T09:53:12.530
> 
> 标签：android, android-widget

我开始programmig Android App。但是我正在为此苦苦挣扎，尽管我在这个论坛上发现了类似的东西（[这里](https://stackoverflow.com/questions/8675412/nullpointerexception-in-setonclicklistener)-尚未检查-）。当我按下按钮时，我的应用程序崩溃了。这里的代码：

```
package mobileapp;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity implements OnClickListener {

  @Override
  public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);
      View button = (Button) findViewById(R.id.button_print_string);
      button.setOnClickListener(this);
  }

  public void onClick(View v) {
      switch (v.getId()) {
      case R.id.button_print_string:
              EditText cerca = (EditText) findViewById(R.id.cerca);
          Bundle bundle = new Bundle();
          bundle.putString("result", cerca.getText().toString());
          Intent Intent2 = new Intent(getApplicationContext(), SecondActivity.class);
          startActivity(Intent2);
      }
  } 
```

}

*这是我的清单文件：*

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="it.stasbranger.clinigomobile"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="9"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

    </activity>

     <activity
        android:name=".SecondActivity" >
        <intent-filter ></intent-filter>
     </activity>
</application>

</manifest> 
```

和我的activity_main：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<Button
    android:id="@+id/button_print_string"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:text="@string/str_button" />

<EditText android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:id="@+id/cerca" 
    android:inputType="textEmailAddress" 
    android:text="@string/cerca">
<requestFocus></requestFocus>
</EditText>

</RelativeLayout> 
```

我得到：

```
08-01 09:40:59.335: E/AndroidRuntime(560): FATAL EXCEPTION: main
08-01 09:40:59.335: E/AndroidRuntime(560): java.lang.RuntimeException: Unable to start activity ComponentInfo{it.stasbranger.clinigomobile/it.stasbranger.clinigomobile.SecondActivity}: java.lang.NullPointerException
08-01 09:40:59.335: E/AndroidRuntime(560):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
08-01 09:40:59.335: E/AndroidRuntime(560):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
08-01 09:40:59.335: E/AndroidRuntime(560):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
08-01 09:40:59.335: E/AndroidRuntime(560):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
08-01 09:40:59.335: E/AndroidRuntime(560):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-01 09:40:59.335: E/AndroidRuntime(560):  at android.os.Looper.loop(Looper.java:137)
08-01 09:40:59.335: E/AndroidRuntime(560):  at android.app.ActivityThread.main(ActivityThread.java:4424)
08-01 09:40:59.335: E/AndroidRuntime(560):  at java.lang.reflect.Method.invokeNative(Native Method)
08-01 09:40:59.335: E/AndroidRuntime(560):  at java.lang.reflect.Method.invoke(Method.java:511)
08-01 09:40:59.335: E/AndroidRuntime(560):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-01 09:40:59.335: E/AndroidRuntime(560):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-01 09:40:59.335: E/AndroidRuntime(560):  at dalvik.system.NativeStart.main(Native Method)
08-01 09:40:59.335: E/AndroidRuntime(560): Caused by: java.lang.NullPointerException
08-01 09:40:59.335: E/AndroidRuntime(560):  at it.stasbranger.clinigomobile.SecondActivity.onCreate(SecondActivity.java:14)
08-01 09:40:59.335: E/AndroidRuntime(560):  at android.app.Activity.performCreate(Activity.java:4465)
08-01 09:40:59.335: E/AndroidRuntime(560):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
08-01 09:40:59.335: E/AndroidRuntime(560):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
08-01 09:40:59.335: E/AndroidRuntime(560):  ... 11 more 
```

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:55:06.180

在类的第 14 行有一个 NullPointerException `SecondActivity`。

请给我们这个类的源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:56:00.857

试试这个...

```
Intent Intent2 = new Intent(MainActivity.this, SecondActivity.class);
                            ^^^^^^^^^^^^^^^^^
startActivity(Intent2); 
```

在你的第二个活动中检查这个

```
if(getIntent().getExtras().getString("result") != null)
{
   textView.setText(getIntent().getExtras().getString("result"))
}
else
{
   textView.setText("null");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T10:00:09.963

您收到 NullPointerException 是因为您没有使用**setContentView**方法。

公共类 SecondActivity 扩展 Activity { TextView text_result; ?? 宣言

```
/** Called when the activity is first created. */
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.second_activity_xml);  //  CREATE XML ADD  THIS

    Bundle bundle = this.getIntent().getExtras();

    text_result = (TextView) findViewViewById(R.id.text_resultID);  //  INITIALIZE
    text_result.setText(bundle.getString("result"));
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T10:07:15.380

在你的代码中你使用

```
public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);
      View button = (Button) findViewById(R.id.button_print_string);
      button.setOnClickListener(this); 
```

您正在创建 View 对象并使用 Button 进行类型转换，而不是使用对象按钮定义 Button。

像这样使用它。-->

```
public void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);
          setContentView(R.layout.activity_main);
          Button button = (Button) findViewById(R.id.button_print_string);
          button.setOnClickListener(this); 
```

# c - 在小部件 GTK 下方放置弹出菜单

> ID：11756767
> 
> 赞同：1
> 
> 时间：2012-08-01T09:53:18.090
> 
> 标签：c, button, gtk, popupmenu

我在将弹出菜单放置在 GTK 中我想要的位置时遇到了一些问题（与我的按钮沿相同的 y 轴，因此它似乎从按钮下拉）。

当我在 win32 中编写类似的东西时，我得到了它的工作，但是对于我的生活，我无法让这个东西在我想要的地方绘制！

我已经完成了我的研究，我知道（我认为）应该做什么，那就是当我调用 gtk_menu_popup()

我应该在一个函数指针中将它传递给一个放置弹出窗口的方法（链接到方法规范 - [http://developer.gnome.org/gtk/2.24/GtkMenu.html#GtkMenuPositionFunc](http://developer.gnome.org/gtk/2.24/GtkMenu.html#GtkMenuPositionFunc)）

但是我对函数指针有点垃圾（我说话的时候旁边有 Kernighan 和 ritchie 的书），但我很确定我做对了。

这是我对该方法的尝试：

```
void set_position(GtkMenu *menu,gint *x,gint *y,gboolean push_in,gpointer user_data)
{
 printf("Help!\n";
 GtkWidget *originButton = (GtkWidget *) gtk_object_get_data(GTK_OBJECT(menu),"button");
 gdk_window_get_position(originButton->window,x,y);
 //now I realise this will place it at the top of the widget but thats acceptable for now, I just want the method to be called!
} 
```

我通过这样做从按钮处理程序调用它：

```
static gboolean handler (GtkWidget *widget,GdkEvent *event)
{
 GdkEventButton *bevent = (GdkEventButton *) event;
 gtk_menu_popup(GTK_MENU(widget),NULL,NULL,set_position,bevent->button,bevent->button,bevent->time);
} 
```

但是当我编译它时它说它不是 GtkMenuPositionFunc，所以我只是将它转换（虽然不知道这是否正确）。

问题是我不认为我的方法被调用，因为它从不打印帮助:(加上它仍然在我单击的任何地方生成菜单（可能是因为它没有调用该方法或它应该做的任何事情）。

任何帮助/想法都会受到极大的欢迎:)谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:32:39.810

我之前也有同样的问题。我使用了以下代码。

```
static void
set_position(GtkMenu *menu, gint *x, gint *y, gboolean *push_in, gpointer user_data)
{
  GtkWidget *button = GTK_BUTTON(user_data);

  gdk_window_get_origin(button->window, x, y);
  *x += button->allocation.x;
  *y += (button->allocation.y + (button->allocation.height));
}

static void
handler(GtkWidget *menu, GtkWidget *button)
{
  GtkRequisition requisition;

  gtk_widget_size_request(menu, &requisition);
  if (button->allocation.width > requisition.width)
    gtk_widget_set_size_request(menu, button->allocation.width, -1);

  gtk_menu_popup(GTK_MENU (menu),
                 NULL, NULL,
                 (GtkMenuPositionFunc) set_position, button,
                 0, gtk_get_current_event_time());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T12:43:14.880

好的，非常感谢 Pfeiffer 提供的示例代码。我不得不对其进行一些更改，因为我遇到了编译器错误（虽然我有 Werror）。

在 set poisition 方法中，我最终转换为 GTK_WIDGET 而不是 GTK_BUTTON 因为这就是它所期望的

所以我的新设置位置方法看起来像：

```
static void set_position(GtkMenu *menu, gint *x, gint *y, gboolean *push_in, gpointer user_data) {

  GtkWidget *button = GTK_WIDGET(user_data);

  gdk_window_get_origin(button->window, x, y);
  *x += button->allocation.x;
  *y += (button->allocation.y + (button->allocation.height));

} 
```

由于我不知道如何连接和传递 Pfeiffer 传递的两个小部件，我目前有这个：

```
static gboolean handler(GtkWidget *widget, gpointer data) {

  gtk_menu_popup(GTK_MENU(data), NULL, NULL,(GtkMenuPositionFunc)set_position,widget,(guint)widget, gtk_get_current_event_time());

  return TRUE;

} 
```

还必须将小部件转换为（guint），否则我会收到关于第 6 个参数的编译器错误:)

我可能最终会在这种方法中投入更多，但这是我让它工作所需的最低限度。

使用普通的 gtk_signal_connect 方法连接

```
 gtk_signal_connect(GTK_OBJECT(button), "clicked", GTK_SIGNAL_FUNC(handler), GTK_OBJECT(menu)); 
```

其中 button 和 menu 是我之前使用的 GtkButton 和 GtkMenu 实例 :)

完全归功于 Pfeiffer 的答案，我只是展示了对我有用的东西:)

谢谢，希望这对某人有帮助:)

# linux - Linux 更改为另一个 /dev/ttyX 并在那里运行程序

> ID：11756768
> 
> 赞同：2
> 
> 时间：2012-08-01T09:53:18.277
> 
> 标签：linux, sh, tty

是否可以在 /dev/tty1 上运行脚本并生成在 /dev/tty2 上运行的程序并等待它完成并运行脚本中的其他命令？例如：

```
echo "Hello, this is from terminal 1"
chvt 2
sh myprogram.sh (I want it to run on tty2, but it runs on tty1)
chvt 1 
```

**我的程序.sh：**

```
echo "Hello' this is from terminal 2, please type your input:"
read A
exit A 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T09:55:21.453

是的，您可以使用`openvt`.

```
openvt -c 2 sh myprogram.sh 
```

# nhibernate - 用于图形的流利的 nhibernate 级联

> ID：11756774
> 
> 赞同：0
> 
> 时间：2012-08-01T09:53:26.900
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

更好地理解级联。有人可以解释为什么在节点 C 和 D 以下的情​​况下没有持久化吗？谢谢。

```
public class Node : Entity
{
    public virtual Node Previous { get; set; }
    public virtual Node Next { get; set; }
    public virtual string Name { get; set; }

    public Node() { }
    public Node(string Name)
    {
        this.Name = Name;
    }

    public virtual void Connect(Node Previous, Node Next)
    {
        this.Previous = Previous;
        this.Next = Next;
    }
} 
```

映射：

```
public class NodeMap : IAutoMappingOverride<Node>
{
    public void Override(AutoMapping<Node> mapping)
    {
        mapping.References(x => x.Previous).Cascade.SaveUpdate(); 
        mapping.References(x => x.Next).Cascade.SaveUpdate(); 
    }
} 
```

数据创建：

```
INHibernateRepository<Node> NodeRepository = new NHibernateRepository<Node>();

Node A = new Node("A");
Node B = new Node("A");
Node C = new Node("C");
Node D = new Node("D");
Node E = new Node("E");
Node F = new Node("F");

A.Connect(null, B);
B.Connect(A, E);
C.Connect(B, E);
D.Connect(B, E);
E.Connect(B, F);
F.Connect(E, null);

NodeRepository.SaveOrUpdate(A);
NodeRepository.DbContext.CommitChanges(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:57:29.083

您的图表如下所示

```
A <-> B <-> E <-> F

B <- C -> E
B <- D -> E 
```

如您所见，您没有从`A`到`C`和从`A`到的链接`D`（仅在相反的方向上）

因此，当您保存`A`NHibernate 时，会尝试保存 的所有依赖项`A`，并找到 unsaved `B`，然后`E`然后`F`。

# iphone - iPhone 上的自动数据备份

> ID：11756776
> 
> 赞同：2
> 
> 时间：2012-08-01T09:53:28.737
> 
> 标签：iphone, objective-c, ios, backup, uilocalnotification

我有一个应用程序，它允许用户备份应用程序上的数据，它通过将数据转换为 JSON 字符串并将数据推送到服务器，在服务器上将其转换为 XML 并存储以备不时之需数据恢复。

目前，用户通过按下按钮手动执行备份。

我的问题是，是否可以实现某种自动备份功能？应用程序在哪里每天自动备份数据？

据我所知，实现接近此功能的唯一方法是安排本地通知提醒用户备份他们的数据，此时用户将打开应用程序并运行一些代码来执行备份。

这是尽可能接近还是有另一个更好的解决方案？

谢谢，

泰辛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:37:41.463

As I know there are several type of apps that are allowed to run in background (VOIP,GPS ...).

I see solution of your problem like this: Use location background mode Register background task by using NSTimer `UIApplication:beginBackgroundTaskWithExpirationHandler:`

NSTimer time should be smaller than `UIApplication:backgroundTimeRemaining`, else you have to enable and disable location manager before backgroundTimeRemaining not 0 to avoid your task killed.

This way application can be in background and perform data backup.

# python - 如何在 linux 机器中更改 python 的默认版本？（不仅仅是符号链接）

> ID：11756777
> 
> 赞同：10
> 
> 时间：2012-08-01T09:53:28.860
> 
> 标签：python, ubuntu, defaults

由于各种原因和用途，我在 ubuntu（精确）中安装了多个版本的 python。我有 python 2.7 和 python 2.6。我需要将 python 2.6 设为默认值，而不是 python 2.7。我更新了 python 符号链接以指向 python2.6。那只会让我通过命令行直接访问 python2.6。但是当我从 aptitude 安装一些软件包时，它会直接转到与 python2.7 兼容的东西，因为在操作系统的某个地方，它认为这是默认设置。我应该如何改变这个？

PS：我知道从包的源代码安装的解决方法。但始终获取源代码并不容易，而且并非所有人都很慷慨。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T10:21:25.743

在 Ubuntu 和其他 Debian 派生发行版上，定义要在系统范围内运行哪个 Python 版本的正确方法是使用`sudo update-alternatives --config python`. 另见[http://www.stylesen.org/python_27_debian_squeeze_60](http://www.stylesen.org/python_27_debian_squeeze_60)

# objective-c - 如何从我的 Xcode 应用程序中删除所有 NSLog 和评论？

> ID：11756779
> 
> 赞同：3
> 
> 时间：2012-08-01T09:53:34.753
> 
> 标签：objective-c, xcode, comments, nslog

无论如何，是否可以`NSLog`通过任何技巧/工具从应用程序中删除行？我通常使用`NSLog's`每种方法来了解控制流程并了解应用程序变量的值。我还使用大量注释行来解释方法和变量的性质。

在某些时候，这些`NSLog`s 和注释行使我难以理解该程序。所以我需要继续删除和重新创建它们。**有没有办法通过 Xcode 中的任何技巧来显示/隐藏它们？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-01T10:05:05.140

**使用全局搜索和替换工具（cmd-shift-f，或编辑、查找、在工作区中查找）**

单击查找，选择替换
样式=> 正则表达式

对于`NSLogs`, 搜索

```
NSLog\(.*\).*$ 
```

并**用空格替换**。

对于`comments,`搜索

```
\/\/.*$ 
```

和

```
\/\*.*\*\/ 
```

并**用空格替换**。

并**通过手动替换**那些完成

```
/* fjeizghrij
   eopgfjeipgez
*/ 
```

因为我不知道如何安全地抓住它们？

**编辑 ：**

最后，**请注意此全局替换，因为您将无法撤消**！例如，之前复制/粘贴您的项目。您也应该使用全局替换的预览功能，并检查每个条目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T11:31:18.490

我不确定您要删除这些`NSLog`行和注释的确切原因是什么。

如果您可以努力阅读源代码，要删除注释，请将Xcode 首选项中**的注释颜色设置****为与背景相同或将其字体大小设置为 1**，当您阅读代码时将看不到它们。:)

我不知道`NSLog`，但我正在使用以下方式来避免最终版本中不需要的日志记录。

这是一个简单的宏：

```
#ifdef DEBUG
#define DebugLog(...) NSLog(__VA_ARGS__)
#else
#define DebugLog(...) { }
#endif 
```

我正在使用正常`DebugLog(...)`使用的，并且**Xcode 仅在****mode 下**登录，我在创建应用程序的发布版本时不需要删除任何日志。`NSLog(...)` **`DEBUG`**

# ruby-on-rails-3 - 使用 Rails 3 接收电子邮件

> ID：11756783
> 
> 赞同：-1
> 
> 时间：2012-08-01T09:53:45.797
> 
> 标签：ruby-on-rails-3, actionmailer

我正在寻找一些用 rails 3.2 解析邮件的好方法。

我不想像 R. Bates 在剧集中展示的那样设置外部服务器：[http ://railscasts.com/episodes/313-receiving-email-with-mailman](http://railscasts.com/episodes/313-receiving-email-with-mailman)

我找到了简单的解决方案：

```
 Mail.defaults do
  retriever_method :pop3, :address    => "pop.gmail.com",
    :port       => 995,
    :user_name  => '*****@gmail.com',
    :password   => '*****',
    :enable_ssl => true
  end

  Mail.all.each do |email|
    some_email_parser(email)
  end 
```

它作为 rake 任务被 Cron 每 15 分钟调用一次。如果您发现这种方法的任何缺点，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:20:47.457

这段代码工作正常，所以我就这样离开了。

# augmented-reality - 为 blackberry10 创建增强现实应用程序

> ID：11756784
> 
> 赞同：5
> 
> 时间：2012-08-01T09:53:48.210
> 
> 标签：augmented-reality, wikitude, blackberry-10

我是一名**BlackBerry 原生**应用程序开发人员。我是 BB10 应用程序开发的新手。我应该在 BB10中创建一个基于**增强现实的应用程序。**我不知道是否有任何可用于 blackberry10的**第三方库。**

我已经用谷歌搜索了这个东西。了解到Wikitude已经为Android和iOS提供了**wikitide-SDK**；使用它，android 和 iPhone 开发人员可以非常轻松地开发 AR（增强现实）应用程序。消息称，Wikitude 将于今年晚些时候发布适用于 BlackBerry 的 SDK。

有人知道**Wikitide-SDK for BB10** (blackberry) 的确切发布日期吗？

有人知道我可以用来为 BB10 开发 AR 应用程序的**任何第三个库吗？**

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:34:07.827

目前我正在为 BB10 探索 Wikitude。我想知道Wikitude是否在后台获取用户位置？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T21:00:34.823

截至 8 月 1 日，他们已经发布了这份[新闻稿](http://www.wikitude.com/wikitude-launches-tripadvisor-augmented-reality-app)。

该新闻稿的有趣之处在于（强调）：

> Wikitude 最新推出的产品是 Wikitude SDK，它允许第三方开发自己的 AR 应用程序。*该公司还在为 BlackBerry® 10 准备 SDK*。

但是，他们尚未提供时间表。

编辑：现在可用：

[http://www.wikitude.com/wikitude-launches-worlds-augmented-reality-sdk-blackberry-10](http://www.wikitude.com/wikitude-launches-worlds-augmented-reality-sdk-blackberry-10)

# php - PHP 会话数组被覆盖

> ID：11756788
> 
> 赞同：0
> 
> 时间：2012-08-01T09:54:15.637
> 
> 标签：php, arrays, session-variables

我存储在会话变量中的数组有问题。当我尝试更改数组中的特定项目时，整个数组会被新值覆盖。

我的代码如下：

```
<? session_start();

include '../../config/config.php';
include '../functions.php';

if ($user){             
    $type = str_replace("-", "_", ucwords(sanitize($_POST['type'], 'u')));
    $name = str_replace("-", "_", ucwords(sanitize($_POST['name'], 'u')));

    $price = sanitize($_POST['price'], 's');    
    $num = sanitize($_POST['num'], 's');
    preg_match_all('/[-+]?\b[0-9]+(\.[0-9]+)?\b/', $price, $result);                                                            

    if ($num != ""){
        $num = explode("-", $num);

        echo '<pre>';
            print_r($num);
        echo '</pre>';

        echo '<br/>';       

        echo '<pre>';
            print_r($_SESSION['prodcontrolprices']);
        echo '</pre>';              

        switch(count($num)){
            case 2:                                 
                $_SESSION['prodcontrolprices'][$num[0]][$name] = array("price"=>$price);                            
                echo "1here";
                break;
            case 3:                                                                                             
                $_SESSION['prodcontrolprices'][$num[0]][$num[1]]['subs'][$type][$name] = array("price"=>$price);                
                echo "2here";
                break;
            case 4:                 
                $_SESSION['prodcontrolprices'][$num[0]][$num[1]][$num[2]]['subs'][$type][$name] = array("price"=>$price);
                echo "3here";
                break;
            case 5:                 
                $_SESSION['prodcontrolprices'][$num[0]][$num[1]]['subs'][$num[2]][$num[3]]['subs'][$type][$name] = array("price"=>$price);
                echo "4here";
                break;
        }           

        echo '<br/>';

        echo '<pre>';
            print_r($_SESSION['prodcontrolprices']);            
        echo '</pre>';

    }else{
        $_SESSION['prodcontrolprices'][$type][$name] = array("price"=>$price);          
    }
}

?> 
```

下面是 echo 语句的输出：

```
Array
(
    [0] => Style
    [1] => One_sided
) 
```

数组在赋值之前的内容。

```
Array
(
    [Style] => Array
        (
            [One_sided] => Array
                (
                    [price] => 130.00
                    [subs] => Array
                        (
                            [Quantity] => Array
                                (
                                    [500] => Array
                                        (
                                            [price] => 10.00
                                        )

                                    [1000] => Array
                                        (
                                            [price] => 20.00
                                        )
                                )
                        )
                )
        )
) 
```

数组赋值后的内容。

```
Array
(
    [Style] => Array
        (
            [One_sided] => Array
                (
                    [price] => 230.00
                )
        )
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T09:56:17.350

您的问题是您正在用一个新子数组（只有一个元素）*替换整个子数组：*

```
$_SESSION['prodcontrolprices'][$type][$name] = array("price"=>$price); 
```

相反，您应该做的是在其中添加/替换一个值：

```
$_SESSION['prodcontrolprices'][$type][$name]['price'] = $price; 
```

# git - 不同开发方向下 Git fork 的工作流程

> ID：11756791
> 
> 赞同：1
> 
> 时间：2012-08-01T09:54:28.190
> 
> 标签：git

情况是我们有一个为大众构建的产品，我们在 GIT 存储库中拥有它（我们称之为`upstream`）。我们的一个客户想要一个定制版本的产品，所以我们将它分叉并保存在一个 diff GIT 存储库中（让我们称之为`origin`）。

想法是在自己的客户定制开发方向上引领 origin repo，同时继续接收来自上游的更新。

我已将上游作为远程添加到我正在开发它的本地存储库中，并且我知道我可以从上游提取更新，合并它们或任何看起来不错的东西，但我想听听做过或做过的人它是为了使工作流程顺畅并避免任何可能的陷阱？

编辑： fetch-merge 工作流程会像两个 repos 中的相同更改一样处理吗？就像工作已经开始在 fork 和我在 origin 本身修复的一些东西一样，但我也需要在上游进行相同的修复。那么我是否应该在上游再次提交以修复该问题，并且 git 可以在下次合并它们以更新 fork 时检测到相似性，或者我应该将该修复作为单独的提交提交，即使它符合我所做的工作提交？我更关心的是如何让这个过程以最小的摩擦进行。

另一个问题：在小改动上使用cherry-pick 似乎是个好主意。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:26:17.123

由于未来的合并问题，尽可能避免挑选樱桃（如“[如何在 git 中合并特定提交](https://stackoverflow.com/questions/881092/how-to-merge-a-specific-commit-in-git/881112#881112)”中所述）

> 樱桃从一个分支选择提交到另一个分支基本上涉及生成一个补丁，然后应用它，因此也会以这种方式丢失历史。
> 
> 这种提交 ID 的更改破坏了 git 的合并功能

尝试隔离您知道需要在他们自己的提交中应用到其他 repo 的更改，以便仅应用这些更改。
然后 a `git fetch`，后跟`rebase`分支的 a ，是在分支历史记录中包含来自上游的提交的最佳方式。
这类似于“ [git 工作流程和变基与合并问题](https://stackoverflow.com/q/457927/6309)”中描述的工作流程（参见更新部分）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:56:04.633

为避免挑剔，您可能需要仔细查看系统的设计/架构。它被分成功能模块越多，使用插件机制等，就越容易**向**两个分支添加功能和更新。

如果系统没有整齐地划分为模块，那么在合并过程中没有 git 工作流可以解决您的问题，并且合并将变得越来越复杂。

# http - 什么是 HTTP-FED 1.1？

> ID：11756793
> 
> 赞同：1
> 
> 时间：2012-08-01T09:54:28.700
> 
> 标签：http, federated-identity

在调查联合身份验证时，我遇到了 SAML 旁边的一个协议：HTTP-FED。

奇怪的是，我找不到该协议的任何技术文档。

它是什么？像我怀疑的那样，它是用于 HTTP 而非 WS 服务的基于声明的协议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:39:23.490

HTTP-Fed 似乎是商业供应商的产物（简化版）。它还没有被任何标准机构（我发现）批准，这就是为什么你可能找不到太多关于它的原因。从我在他们的网站上读到的内容来看，它似乎本质上是互联网上凭证缓存/凭证重放的一个花哨的名称。从他们的网站——http: [//www.symplified.com/http-federation/](http://www.symplified.com/http-federation/)

> “... HTTP-FED 利用了 SP 现有的 HTTP 登录机制。这意味着不需要对 SP（目标应用程序）进行任何更改，并且 SP 不需要特殊软件，从而减少了联合所需的工作量域。”

这不是一个标准，因此没有关于您在购买他们的产品之外如何实施它的信息。如果您正在查看适用于云应用程序的 Web SSO，我会坚持使用为此类活动设计时考虑到安全性的实际标准（SAML、OpenID、OAuth、Open ID Connect）。

# python - 网络摄像头：libv4l2 & VIDIOC_DQBUF：没有这样的设备

> ID：11756794
> 
> 赞同：5
> 
> 时间：2012-08-01T09:54:30.883
> 
> 标签：python, opencv, webcam

我使用 OpenCV 库编写了一个 python 代码来检测运动。如果发生运动，它会拍摄移动对象的快照。但是我的问题是：如果我在我的电脑（Ubuntu 12.04）上执行程序，一切都很好。

但是，当我在运行 Angstrom Linux 并连接了 Us Robotics 网络摄像头设备的 BeagleBone 上执行该程序时，过了一会儿它给出了以下错误：

```
libv4l2: error dequeuing buf: No such device
VIDIOC_DQBUF: No such device 
```

我怎么解决这个问题？问候

编辑：我在我的 BeagleBone 上安装了 ubuntu 12.04，它也一切正常。看来我的问题与 Angstrom 图像有关。也许是驱动程序或库（libv4l2？）问题？有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T18:37:44.863

当板通过 USB 电缆供电时，我也看到 Ubuntu 出现此错误。当我用 5V 电源为电路板供电时，问题就消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-17T17:24:40.100

我遇到了同样的问题。由于这个错误，我什至改变了我的董事会。但是当我重新使用旧电源时，它就消失了。就如此容易。

# objective-c - 如何测试 NSCFBolean 值？

> ID：11756795
> 
> 赞同：39
> 
> 时间：2012-08-01T09:54:34.137
> 
> 标签：objective-c

从 JSON 接收到的数据，如下所示：

```
{
    myself = 1;
    "id" = 123;
} 
```

我把它放到了一个N​​SDictionary *messageDic中，我还定义了一个值*isMyself来接收自己的值

```
Boolean isMyself = [messageDic objectForKey:@"myself"]; 
```

但它不起作用。

所以我打印日期类型，

```
const char* className = class_getName([[messageDic objectForKey:@"myself"] class]);
NSLog(@"yourObject is a: %s", className);
NSLog(@"Size of BOOL %d", sizeof(isMyself));
NSLog(@"Size of BOOL %@", [messageDic objectForKey:@"myself"]); 
```

结果是：

```
2012-08-01 17:41:48.886  yourObject is a: __NSCFBoolean
2012-08-01 17:41:48.887  Size of BOOL 1
2012-08-01 17:41:48.887  Size of BOOL 0 
```

并且下面的 if 部分也不起作用。

```
if ([messageDic objectForKey:@"myself"] == 0) 
```

我试过了

```
NSCFBoolean *isMyself = [messageDic objectForKey:@"myself"]; 
```

我得到了上面的错误表格。

我的问题是我应该怎么做才能测试 的值`[messageDic objectForKey:@"myself"]`？什么是`__NSCFBoolean`？

谢谢！

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-08-01T13:04:54.183

您从 [messageDic objectForKey:@"myself"] 得到的结果是一个 NSNumber，那么您需要将结果转换为 Bool。所以试试下面：

```
if ([[messageDic objectForKey:@"myself"]boolValue] == NO) 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-08-01T10:07:47.907

__NSCFBoolean 是用于 NSNumber[类 cluster](https://developer.apple.com/library/ios/#documentation/General/Conceptual/CocoaEncyclopedia/ClassClusters/ClassClusters.html)的私有类。要从中提取适当的值，您需要使用 NSNumber 类中的方法，`-boolValue`在您的情况下：

```
BOOL isMyself = [[messageDic objectForKey:@"myself"] boolValue]; 
```

# magento - 法师注册表键“_singleton/awall/feed_extensions”已经存在

> ID：11756796
> 
> 赞同：1
> 
> 时间：2012-08-01T09:54:35.470
> 
> 标签：magento

当我加载管理面板时，我收到了这个错误。

我该如何解决这个问题？

```
There has been an error processing your request

Mage registry key "_singleton/awall/feed_extensions" already exists

Trace:
#0 /var/www/magento_upgrade/app/Mage.php(222): Mage::throwException('Mage registry k...')
#1 /var/www/magento_upgrade/app/Mage.php(476): Mage::register('_singleton/awal...', false)
#2 /var/www/magento_upgrade/app/code/core/Mage/Core/Model/App.php(1316): Mage::getSingleton('awall/feed_exte...')
#3 /var/www/magento_upgrade/app/Mage.php(447): Mage_Core_Model_App->dispatchEvent('controller_acti...', Array)
#4 /var/www/magento_upgrade/app/code/core/Mage/Core/Controller/Varien/Action.php(528): Mage::dispatchEvent('controller_acti...', Array)
#5 /var/www/magento_upgrade/app/code/core/Mage/Adminhtml/Controller/Action.php(160): Mage_Core_Controller_Varien_Action->preDispatch()
#6 /var/www/magento_upgrade/app/code/core/Mage/Core/Controller/Varien/Action.php(408): Mage_Adminhtml_Controller_Action->preDispatch()
#7 /var/www/magento_upgrade/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('index')
#8 /var/www/magento_upgrade/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#9 /var/www/magento_upgrade/app/code/core/Mage/Core/Model/App.php(354): Mage_Core_Controller_Varien_Front->dispatch()
#10 /var/www/magento_upgrade/app/Mage.php(683): Mage_Core_Model_App->run(Array)
#11 /var/www/magento_upgrade/index.php(87): Mage::run('', 'store')
#12 {main} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T14:40:45.030

乌斯曼说的是对的，但谜团是怎么会发生这种情况？

她一定是在使用 AW 的扩展，它有一个观察者，`<controller_action_predispatch>` 它会调用 class `awall/feed_extensions`， type`Singleton` 这就是为什么它会创建名称为注册表的原因`_singleton/awall/feed_extensions` 要调试它，我们可以使用 php 的调试回溯。把这一行放在你的`Mage.php`下面`public static function registry`：

```
public static function registry($key)
{
    $str = Varien_Debug::backtrace(true, false);
    if(!empty($str)){
        Mage::log($str);
    }
    if (isset(self::$_registry[$key])) {
        return self::$_registry[$key];
    }
    return null;
} 
```

使用它我们可以回溯谁调用了注册表（观察者除外），因为在正常情况下不应该有任何代码直接调用注册表（`_singleton/awall/feed_extensions`）所以它不应该被多次调用。它将记录结果`[MagentosRoot]/var/log/system.log`

确保您已在管理面板中打开日志设置：

```
System > Configuration > Developer > Log Settings > Enabled [Yes] 
```

因为您现在无法打开管理面板，所以您需要直接从数据库中更改它使用此查询来查看您是否打开了日志设置：

```
mysql> select * from core_config_data where path like 'dev/log/active';
+-----------+---------+----------+----------------+-------+
| config_id | scope   | scope_id | path           | value |
+-----------+---------+----------+----------------+-------+
|       244 | default |        0 | dev/log/active | 1     |
+-----------+---------+----------+----------------+-------+
1 row in set (0.00 sec) 
```

value = 1 表示您已将其打开。如果您的数据库中没有该值，只需插入它：

```
insert into core_config_data (scope, scope_id, path, value) values ('default', 0, 'dev/log/active', 1); 
```

如果数据库中的值为0，则将其更改为1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T07:59:34.873

对我来说，它可以简单地删除与 AheadWorks 相关的所有文件（它们上的“AW”）并重新安装，这次小心地将每个文件放在相应的文件夹中。

在刷新管理页面之前，找到`Mage_Compiler.xml`并确保有类似`<active>false</active>`.

有点吓人

否则，试试这个：

首先去 app/etc/modules/aw_all.xml 把 true 改成 false

首先转到 app/etc/modules/aw_blog.xml 将 true 更改为 false 然后登录到管理员您的管理员现在可以工作。

然后

转到系统->工具->编译禁用它。

现在首先转到 app/etc/modules/aw_all.xml 将 false 更改为 true

转到 app/etc/modules/aw_blog.xml 将 false 更改为 true

然后检查它是否工作..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T10:04:58.590

这是因为您已经注册了相同的键名`_singleton/awall/feed_extensions`。正如您在 Mage.php 中看到的

```
public static function register($key, $value, $graceful = false)
{
    if (isset(self::$_registry[$key])) {
        if ($graceful) {
            return;
        }
        self::throwException('Mage registry key "'.$key.'" already exists');
    }
    self::$_registry[$key] = $value;
} 
```

所以尝试使用其他名称注册。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-29T18:29:03.467

我迟到了这个问题，但昨晚我遇到了同样的问题，希望这个答案能帮助别人（这个错误让我花了一天的时间）。我正在使用带有 Mage World 扩展的 Magento 1.9 应用程序。在我的本地环境中，我切换了分支以处理其他事情，但我不断收到通用的 Magento 错误页面。查看 var/log/system.xml，我看到了这个：

```
a:5:{i:0;s:70:"Mage registry key "_singleton/onestepcheckout/observer" already exists";i:1;s:1691:"#0 C:\Sites\myintent-shop\app\Mage.php(223): Mage::throwException('Mage registry k...')
#1 C:\Sites\myintent-shop\app\Mage.php(477): Mage::register('_singleton/ones...', false)
#2 C:\Sites\myintent-shop\app\code\core\Mage\Core\Model\App.php(1316): Mage::getSingleton('onestepcheckout...')
#3 C:\Sites\myintent-shop\app\Mage.php(448): Mage_Core_Model_App->dispatchEvent('controller_acti...', Array)
#4 C:\Sites\myintent-shop\app\code\core\Mage\Core\Controller\Varien\Action.php(339): Mage::dispatchEvent('controller_acti...', Array)
#5 C:\Sites\myintent-shop\app\code\core\Mage\Cms\Helper\Page.php(113): Mage_Core_Controller_Varien_Action->generateLayoutBlocks()
#6 C:\Sites\myintent-shop\app\code\core\Mage\Cms\Helper\Page.php(52): Mage_Cms_Helper_Page->_renderPage(Object(Mage_Cms_IndexController), 'home')
#7 C:\Sites\myintent-shop\app\code\core\Mage\Cms\controllers\IndexController.php(45): Mage_Cms_Helper_Page->renderPage(Object(Mage_Cms_IndexController), 'home')
#8 C:\Sites\myintent-shop\app\code\core\Mage\Core\Controller\Varien\Action.php(418): Mage_Cms_IndexController->indexAction()
#9 C:\Sites\myintent-shop\app\code\core\Mage\Core\Controller\Varien\Router\Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('index')
#10 C:\Sites\myintent-shop\app\code\core\Mage\Core\Controller\Varien\Front.php(172): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#11 C:\Sites\myintent-shop\app\code\core\Mage\Core\Model\App.php(354): Mage_Core_Controller_Varien_Front->dispatch()
#12 C:\Sites\myintent-shop\app\Mage.php(684): Mage_Core_Model_App->run(Array)
#13 C:\Sites\myintent-shop\index.php(87): Mage::run('', 'store')
#14 {main}";s:3:"url";s:1:"/";s:11:"script_name";s:10:"/index.php";s:4:"skin";s:7:"default";} 
```

原来我必须清除我的缓存目录。最简单的方法是转到 root -> var -> cache 并删除“cache”文件夹中的所有“mage-*”文件夹（注意：我保留了 cdn.cache 文件）。

# iphone - 有没有像appstore这样的其他商店来上传iphone应用程序？

> ID：11756797
> 
> 赞同：1
> 
> 时间：2012-08-01T09:54:39.043
> 
> 标签：iphone, ios, app-store

我尝试在 appstore 中上传应用程序，但创建帐户需要 5000 rs/年。谁能告诉我除了appstore之外我们是否还有其他iphone appstore。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:00:42.477

搜索**iOS 的替代商店**。但是如果你的目标是合法的 ios(iPhone/iPad) 设备，你必须使用 Apple 的 AppStore

**编辑**我试图分享 lmgtfu.com 的链接，但它不允许我分享该内容，所以在我的回答中有类似“这里有一些替代商店”之类的东西，很抱歉在没有修复的情况下分享它。

# django - Django：在 shell 中模拟 HTTP 请求

> ID：11756800
> 
> 赞同：23
> 
> 时间：2012-08-01T09:54:48.370
> 
> 标签：django, django-shell

我刚刚了解到，使用 Rails 可以在控制台中用几行代码模拟 HTTP 请求。

查看：http: [//37signals.com/svn/posts/3176-three-quick-rails-console-tips](http://37signals.com/svn/posts/3176-three-quick-rails-console-tips)（“深入了解您的应用程序”部分）。

Django有类似的方法吗？会很方便。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2016-07-26T17:44:13.000

您可以使用`RequestFactory`，它允许

*   将用户插入请求

*   将上传的文件插入到请求中

*   向视图发送特定参数

并且不需要使用[requests](https://requests.readthedocs.io/en/master/)的额外依赖。

请注意，您必须同时指定 URL 和视图类，因此与使用请求相比，它需要多行代码。

```
from django.test import RequestFactory

request_factory = RequestFactory()
my_url = '/my_full/url/here'  # Replace with your URL -- or use reverse
my_request = request_factory.get(my_url)
response = MyClasBasedView.as_view()(my_request)  # Replace with your view
response.render()
print(response) 
```

`my_request.user = User.objects.get(id=123)`要设置请求的用户，请在获取响应之前执行类似操作。

要将参数发送到基于类的视图，请执行以下操作 `response = MyClasBasedView.as_view()(my_request, parameter_1, parameter_2)`

**扩展示例**

这是一个`RequestFactory`结合使用这些东西的例子

*   HTTP POST（到 url `url`、功能视图`view`和数据字典`post_data`）

*   上传单个文件（路径`file_path`、名称`file_name`和表单字段值`file_key`）

*   将用户分配给请求 ( `user`)

*   `url_kwargs`从 url ( )传递 kwargs 字典

`SimpleUploadedFile`帮助以对表单有效的方式格式化文件。

```
from django.core.files.uploadedfile import SimpleUploadedFile
from django.test import RequestFactory

request = RequestFactory().post(url, post_data)
with open(file_path, 'rb') as file_ptr:
    request.FILES[file_key] = SimpleUploadedFile(file_name, file_ptr.read())
    file_ptr.seek(0)  # resets the file pointer after the read
    if user:
        request.user = user
    response = view(request, **url_kwargs) 
```

**在 Python shell 中使用 RequestFactory**

`RequestFactory`默认情况下将您的服务器命名为“testserver”，如果您不在测试代码中使用它，这可能会导致问题。您会看到如下错误：

```
DisallowedHost: Invalid HTTP_HOST header: 'testserver'. You may need to add 'testserver' to ALLOWED_HOSTS. 
```

@boatcoder 评论中的这个解决方法显示了如何将默认服务器名称覆盖为“localhost”：

```
request_factory = RequestFactory(**{"SERVER_NAME": "localhost", "wsgi.url_scheme":"https"}). 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-01T10:06:21.910

我如何模拟来自 python 命令行的请求是：

*   使用优秀的[请求库](http://docs.python-requests.org/en/latest/index.html)
*   使用django[反向功能](https://docs.djangoproject.com/en/dev/topics/http/urls/#reverse)

模拟请求的一种简单方法是：

```
>>> from django.urls import reverse
>>> import requests
>>> r = requests.get(reverse('app.views.your_view'))
>>> r.text
(prints output)
>>> r.status_code
200 
```

更新：一定要启动 django shell（通过`manage.py shell`），而不是经典的 python shell。

更新 2：对于 Django <1.10，将第一行更改为

```
from django.core.urlresolvers import reverse 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-09-26T17:15:34.887

（参见 tldr；向下）

这是一个老问题，但只是添加一个答案，以防有人可能感兴趣。

虽然这可能不是最好的（或者说 Django）做事的方式。但你可以尝试这样做。

在你的 django shell 里面

```
>>> import requests
>>> r = requests.get('your_full_url_here') 
```

**说明：** 我省略了`reverse()`, 说明，因为`reverse()`或多或少会找到与 views.py 函数关联的 url，`reverse()`如果您愿意，可以省略 ，并放置整个 url。

例如，如果您的 django 项目中有一个朋友应用程序，并且您想在朋友应用程序中查看`list_all()`（在 views.py 中）功能，那么您可以这样做。

**TLDR；**

```
>>> import requests
>>> url = 'http://localhost:8000/friends/list_all'
>>> r = requests.get(url) 
```

# java - 帧之间的Android OpenGL黑屏

> ID：11756801
> 
> 赞同：0
> 
> 时间：2012-08-01T09:54:50.653
> 
> 标签：java, android, opengl-es

我从open GL开始并且有一个小问题，我正在尝试用纯色（和随机）颜色绘制屏幕，​​但它显示出高刷新的颜色。我在 onDrawFrame 方法中插入了一个睡眠，以查看发生了什么，结果是：黑屏 - 彩色屏幕 - 黑屏 - 彩色屏幕......每秒刷新一次。我究竟做错了什么？那是我的代码：

```
package com.example.opengltest;

import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.nio.FloatBuffer;
import java.util.Random;

import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;

import android.app.Activity;
import android.opengl.GLSurfaceView;
import android.opengl.GLSurfaceView.Renderer;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;

public class MainActivity extends Activity implements Renderer {

    GLSurfaceView glView;
    GL10 gl;
    Object stateChanged = new Object();
    Random rand = new Random();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        glView = new GLSurfaceView(this);
        glView.setRenderer(this);
        setContentView(glView);
    }

    private void paint() {
        Log.i("OPENGL","paint");
        gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
        gl.glClearColor(rand.nextFloat(), rand.nextFloat(), rand.nextFloat(),
                1);
        gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
        gl.glViewport(0, 0, glView.getWidth(), glView.getHeight());
        gl.glMatrixMode(GL10.GL_PROJECTION);
        gl.glLoadIdentity();
        gl.glOrthof(0, 320, 0, 480, 1, -1);

        ByteBuffer byteBuffer = ByteBuffer.allocateDirect(3 * 2 * 4);
        byteBuffer.order(ByteOrder.nativeOrder());
        FloatBuffer vertices = byteBuffer.asFloatBuffer();
        vertices.put(new float[] { 0.0f, 0.0f,
        319.0f, 0.0f,
        160.0f, 479.0f });
        vertices.flip();

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    protected void onPause() {
        super.onPause();
        glView.onPause();
    }

    @Override
    protected void onResume() {
        super.onResume();
        glView.onResume();
    }

    public void onDrawFrame(GL10 gl) {
        Log.i("OPENGL","onDrawFrame");
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

    public void onSurfaceChanged(GL10 gl, int width, int height) {
        Log.i("OPENGL","onSurfaceChanged");

    }

    public void onSurfaceCreated(GL10 gl, EGLConfig config) {
        this.gl = gl;
        Log.i("OPENGL","onSurfaceCreated");paint();

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T10:34:36.543

You are calling your `paint()` method in onSurfaceChanged whereas you should call some of its contents in `onDrawFrame()`, and never use the sleep function inside a GL thread, it will only cause black screens flickering all over.

In particular, try moving

```
gl.glClear(GL10.GL_COLOR_BUFFER_BIT); // Clear the color buffer
gl.glClearColor(rand.nextFloat(), rand.nextFloat(), rand.nextFloat(), 1); // Clear it with a random color 
```

to the onDrawFrame function, and I don't know exactly why you're calling `glClear()` twice in `paint()`, but that's a mistake, you're clearing what you just painted with a random color! So delete that second call to onClear() and I think you should be fine. Actually, I don't even think you need the first glClear() call, because you're already clearing it with glClearColor, although if you do introduce some alpha transparency then you're better off having both (or else they will sum up).

Let us know if that helped!

# python - 让一些代码运行，同时执行更多

> ID：11756802
> 
> 赞同：0
> 
> 时间：2012-08-01T09:54:57.973
> 
> 标签：python, loops, background, execution

我在 python 中开始一个循环，在我开始循环之后，我希望在循环之后继续执行代码，而循环继续循环（在“背景”中）。

```
x=True

while x:
  #do some output
  sleep(1)

#ask for input or something
if input()=='something':
  x=False 
```

因此，在该示例中，`#do some output`将在要求输入时继续发生。

这在python中可能吗？是否有任何解决方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T10:00:10.027

据我了解，您想要的是创建一个在后台继续执行某些任务的线程。

[http://docs.python.org/library/threading.html](http://docs.python.org/library/threading.html)

线程是一个中等复杂的问题，所以在这里给你一个秘诀不会太多。我建议您查看文档以了解所涉及的内容。

如果您遇到特定于实施的问题，请更新您的问题或创建一个新问题。

编辑：我同意蒂姆霍夫曼的评论，正确的解决方案取决于你想要达到的目标。据我了解，线程应该适合你，但如果你给我们更多细节，可能更容易给出更准确的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:38:30.680

按照OP的希望我发布答案。:) 有多个库可用于实现您想要做的事情。最知名的包括：

*   [线程模块](http://docs.python.org/library/threading.html)
*   [多处理模块](http://docs.python.org/library/multiprocessing.html)

它们之间存在细微的差异，但我想你现在不应该担心。我鼓励你阅读更多关于多处理和线程的信息。“绿色”线程也是一个有趣的选择。

# performance - 使用 Adob e Flex 进行速度测试

> ID：11756805
> 
> 赞同：1
> 
> 时间：2012-08-01T09:55:04.373
> 
> 标签：performance, apache-flex, air, download, adobe

如果我要使用 Adob​​e Flex 进行连接速度测试，我将如何去下载和上传文件到服务器以及从服务器上传来获得时间？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:39:36.557

您可以使用[getTimer()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/package.html#getTimer%28%29)来计算相对时间。只需调用该函数两次，并使用两次调用之间的差异。我相信它会以毫秒为单位返回一个值。

可以在后台测试数据传输，可以使用HTTPService，或者RemoteObject，WebService，或者URLLoader；取决于您要下载/上传的内容。

如果您需要使用用户交互上传文件，则必须使用[FileRference.browse()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html#browse%28%29)和/或[FileReference.upload()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html#upload%28%29)

# c - C 代码，为什么将地址 0xFF00 转换为结构？

> ID：11756814
> 
> 赞同：7
> 
> 时间：2012-08-01T09:55:27.727
> 
> 标签：c, casting, struct, hex

我试图了解一些用 C 语言编写的用于 USB Wi-Fi 适配器的 Linux 内核驱动程序代码。`1456`文件中的行`/drivers/net/wireless/rtl818x/rtl8187/dev.c`（以防万一有人想参考内核代码的上下文）读取：

```
 priv->map = (struct rtl818x_csr *)0xFF00; 
```

我很好奇正确的操作数在这里做什么 - `(struct rtl818x_csr *)0xFF00;`。我一直将其解释为“将内存地址`0xFF00`转换为类型`rtl818x_csr`，然后将其分配给`priv->map`”。如果我的解释是正确的，那么内存地址有什么特别之处，`0xFF00`以至于驱动程序可以可靠地判断它所追求的东西总是在这个地址上？我很好奇的另一件事是 0xFF00 只有 16 位。如果它正在投射内存地址，我会期待 32/64 位。

谁能澄清这行代码中发生了什么？我想我对 C 语法的理解存在缺陷。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T10:10:18.827

`0xFF00` is an address in the IO address space of the system. If you look in the code, the address is never directly dereferenced but accessed through IO functions.

For example, in the call

```
rtl818x_iowrite8(priv, &priv->map->EEPROM_CMD,
                 RTL818X_EEPROM_CMD_CONFIG); 
```

which then calls Linux kernel low level IO functions.

The address is cast to a pointer to a struct to give access to offsets from the adress, example here:

```
0xFF00 + offsetof(struct rtl818x_csr, EEPROM_CMD) 
```

Note that in the `rtl818x_iowrite8` call above, no dereference occurs when passing the `&priv->map->EEPROM_CMD` argument because of the `&` operator, only the address + offset is computed. The dereference is further achieved withtin the internal low level functions called inside `rtl818x_iowrite8`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T10:15:11.443

您必须从设备的角度考虑这一点。

[从为 rtl8187 设备映射的地址空间内的地址 0xFF00 开始是一个内存范围，该内存范围保存的信息结构与此处](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=drivers/net/wireless/rtl818x/rtl818x.h;h=1615f63b02f6128f781364f86a8780b7bdaf9c21;hb=2d534926205db9ffce4bbbde67cb9b2cee4b835c#l18)定义的 rtl818x_csr 结构相同。

因此，在逻辑映射该区域后，您可以开始对其进行总线读取和写入以控制设备。就像[这里](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=drivers/net/wireless/rtl818x/rtl8187/dev.c;h=71a30b026089eddf6bf08658cf7e3f628992dbc5;hb=2d534926205db9ffce4bbbde67cb9b2cee4b835c#l1481)一样（不得不再删掉两个超链接，因为我没有发布超过 3 个的必要声誉，但你明白了）。这些只是几个例子。如果您阅读整个文件，您会发现读写操作随处可见。

为了理解为什么该结构看起来那样以及为什么使用 0xFF00 而不是 0xBEEF 或 0xDEAD，您必须查阅该设备的数据表。

因此，如果您想开始查看内核代码，特别是设备驱动程序，您需要的不仅仅是代码。您还需要数据表或规格。这可能很难找到（请参阅从供应商处征求开放文档的大量电子邮件线程和文章）。

无论如何，我希望我回答了你的问题。快乐黑客！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T10:00:03.540

将绝对地址转换为指向结构的指针是驱动程序中将设备的（内存映射）寄存器作为普通 C 结构访问的常用方法。

使用`0xff00`有效，因为 C 不做数字的符号扩展。

# php - 如何使用 preg_match_all 从字符串中获取不同的变量

> ID：11756817
> 
> 赞同：0
> 
> 时间：2012-08-01T09:55:39.807
> 
> 标签：php, string, preg-match-all

我想知道如何从这个字符串中获取标识符 number1 和 number2。

```
NAME  IDENTIFIER-NUMBER1-NUMBER2 
```

例子：

```
John Doe ABC-3901-11801 
```

我想将 IDENTIFIER NUMBER1 和 NUMBER2 分别放入不同的变量中。

但问题是我并不总是知道它在什么位置，或者它后面是否有额外的文本，如下所示：

```
Blablabla ABC-3901-11801 John Doe Blablabla 
```

ofc 也可以有不同的数字和字母：

```
XYZ-46781-28102 
```

谁能解释一下如何在 php.ini 中找到这些变量。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:46:05.863

假设：

*   标识符始终为大写
*   标识符总是由 3 个字母组成
*   Number1 只有数字并且总是以破折号开头
*   Number2 只有数字并且总是以破折号开头

这个正则表达式可以工作->`'/([A-Z]{3})-([0-9]*)-([0-9]*)/'`

例子：

```
$data = 'Blablabla ABC-3901-11801 John Doe Blablabla';
preg_match_all('/([A-Z]{3})-([0-9]*)-([0-9]*)/', $data, $matches, PREG_PATTERN_ORDER);
var_dump($matches); 
```

这将输出

```
array
  0 => 
    array
      0 => string 'ABC-3901-11801' (length=14)
  1 => 
    array
      0 => string 'ABC' (length=3)
  2 => 
    array
      0 => string '3901' (length=4)
  3 => 
    array
      0 => string '11801' (length=5) 
```

*   $matches[1] 始终是标识符
*   $matches[2] 总是 number1
*   $matches[3] 总是 number2

编辑：这也是一个更通用的正则表达式：

```
/([A-Za-z]*)-([0-9]*)-([0-9]*)/ 
```

这仅假设 IDENTIFIER 仅包含字母（任何数字，大写或小写）

例如，这个正则表达式在这种情况下有效

```
Blablabla abcdef-3901-11801 John Doe Blablabla 
```

# ios - 有没有办法在 photoLibrary 中获取照片的路径？

> ID：11756824
> 
> 赞同：2
> 
> 时间：2012-08-01T09:55:54.370
> 
> 标签：ios, filepath, assets, assetslibrary

首先，请原谅我糟糕的英语。这是我第一次发布我的问题。

问题： 我访问了AssetsLibrary，得到了assets（一些图片），然后我把它们存入了一个NSArray，现在我想知道它们的文件路径，比如“xx/xxx/xxxxxx.png”；</p>

在阅读了苹果的帮助文档后，我可以得到它的一些属性，但是网址，例如：image:assets-library://asset/asset.JPG?id=F2C5D63D-BCA9-4A53-ACA7-8FB9C6EDC1E6&ext=JPG没有帮助。

有什么办法可以帮助我做到这一点？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T18:30:59.743

这是无法做到的。例如，请参阅[此](https://stackoverflow.com/questions/11556100/alassetslibrary-getting-the-path-of-a-video-and-play-it-later/11556277#11556277)答案。它是关于电影文件的，但也适用于图像。

# mysql - 如何在 Mysql 中生成排名？

> ID：11756834
> 
> 赞同：2
> 
> 时间：2012-08-01T09:56:47.827
> 
> 标签：mysql, sql

我在 Mysql 中有一个复杂的场景。我的表结构和数据如下所示：

```
Field_a   Field_b   Field_c   Total    Rank
-------   -------   -------   -----    ----
1.2       1.1       3.9       6.2      1
1.2         0         0       1.2      4
1.2       1.1         0       3.3      3
1.2         0       3.9       5.1      2
1.2         0       3.9       5.1      2
1.2         0         0       1.2      4 
```

该字段和“总计”和“排名”不存在，我必须在查询数据库时生成它们。有没有办法在mysql中检索Rank？

问候多伦德拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T10:15:39.940

试试这个查询 -

```
SELECT t1.Field_a + t1.Field_b + t1.Field_c AS total, t2.rank FROM table5 t1
  JOIN (SELECT total, @r:= @r + 1 rank FROM (SELECT Field_a + Field_b + Field_c AS total FROM table5 GROUP BY total DESC) t1, (SELECT @r:=0) t2 ORDER BY total DESC) t2
    ON t1.Field_a + t1.Field_b + t1.Field_c = t2.total 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T10:01:50.483

```
set @N:=0;
select *,@N:=@N+1 as Rank from
(
select Field_a ,  Field_b ,  Field_c, Field_a  + Field_b +  Field_c  as total 
from table
) as t
order by total desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T10:06:28.250

我认为这就是你要找的：

```
SELECT Field_a, Field_b, Field_c, 
       IF((Field_a + Field_b + Field_c) <> @var_total_prev, 
           (@var_rank:= @var_rank + 1), 
            @var_rank) AS rank,
       (@var_total_prev := (Field_a + Field_b + Field_c)) AS total
FROM my_table a,(SELECT @var_rank := 0, @var_total_prev := 0) r
ORDER BY total DESC; 
```

# c# - 从后面的代码更改 Javascript 变量值

> ID：11756838
> 
> 赞同：7
> 
> 时间：2012-08-01T09:56:56.693
> 
> 标签：c#, asp.net, progress-bar

我有这个 javascript 代码：

```
<script>
$(document).ready(function() {
    var progValue1 = 100;
    var progValue2 = 30; 
    $("#progressbar").progressbar({ value: progValue1});
    $("#progressbar2").progressbar({ value: progValue2 });
});
</script> 
```

单击按钮时，我想从后面的代码中更改两个变量（`progValue1`和）的值.....`progValue2`

这是按钮的代码

```
<asp:Button ID="btnConfirm" CssClass="button" SkinID="Common" runat="server" Text=  "Confirm" OnClick="btnConfirm_Click" /> 
```

如何从该`btnConfirm`方法的 C# 代码更改这些值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T10:05:01.233

添加两个属性，即

```
private int _progValue1 = 100;
private int _progValue2 = 30;

protected int ProgValue1 { get { return this._progValue1; }}
protected int ProgValue2 { get { return this._progValue2; }} 
```

修改你的 JS：

```
<script>   
  $(document).ready(function() {   
    var progValue1 = <%=ProgValue1%>;   
    var progValue2 = <%=ProgValue2%>;    
    $("#progressbar").progressbar({ value: progValue1});   
    $("#progressbar2").progressbar({ value: progValue2 });   
  });   
</script> 
```

然后在 OnClick 事件处理程序中设置值：

```
this._progValue1 = 40;
this._progValue2 = 20; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:01:15.930

我从您的查询中假设您想从后面的代码中更改 Javascript 变量的值意味着，您想将后面的代码中的值发送到 javascript。您可以使用 ScriptManager.RegisterClientScriptBlock 来实现这一点。要详细了解，请参见下面的代码：

JS

```
function ChangeValue(value1)
{
   yourvariable = value1;
} 
```

代码背后

```
private void SomeMethod()
{
   string newvalue = "test value"; //need to pass this to JS var
   ScriptManager.RegisterClientScriptBlock(this,typeof(Page),"key","ChangeValue("+ newvalue +");",true);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-22T11:18:41.343

```
$(function () {
        var progValue1 = parseInt('<%=ProgValue1%>');
        $("#progressbar").progressbar({ value: progValue1 });
    });

private int _progValue1 = 1;

    protected int ProgValue1
    {
        get
        {
            return _progValue1;
        }
    } 
```

# c# - 如何退出 MVC 中的函数？

> ID：11756840
> 
> 赞同：0
> 
> 时间：2012-08-01T09:57:04.417
> 
> 标签：c#, asp.net-mvc

我想`Exit sub`在 MVC 应用程序中使用类似的操作，并且我正在使用 c# 语言。

当我只是键入`return`它显示一个错误。它要求强制`ActionResult`。

```
 [HttpPost]
    public ActionResult Create(Location location)
    {
        if (ModelState.IsValid)
        {
            Validations v = new Validations();
            Boolean ValidProperties = true;
            EmptyResult er;

            string sResult = v.Validate100CharLength(location.Name, location.Name);
            if (sResult == "Accept")
            {
                ValidProperties = true;
            }
            else
            {
    //What should I write here ? 
    //I wan to write return boolean prperty false 
            // When I write return it asks for the ActionResult
            }

             if (ValidProperties == true)
             {
                 db.Locations.Add(location);
                 db.SaveChanges();
                 return RedirectToAction("Index");
             }
        }

        ViewBag.OwnerId = new SelectList(
                            db.Employees, "Id", "FirstName", location.OwnerId);
        return View(location);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:21:20.797

如果我理解你在你的方法中做了什么，你可以试试：

```
[HttpPost]
public ActionResult Create(Location location)
{
    if (ModelState.IsValid)
    {
        Validations v = new Validations();
        Boolean ValidProperties = true;
        EmptyResult er;

        string sResult = v.Validate100CharLength(location.Name, location.Name);
        if (sResult == "Accept")
        {
            ValidProperties = true;
        }
        else
        {
            ValidProperties = false;
            ModelState.AddModelError("", "sResult is not accepted! Validation failed");
        }

         if (ValidProperties == true)
         {
             db.Locations.Add(location);
             db.SaveChanges();
             return RedirectToAction("Index");
         }
    }

    ViewBag.OwnerId = new SelectList(
                        db.Employees, "Id", "FirstName", location.OwnerId);
    return View(location);
} 
```

顺便说一句，这种方法有很多地方需要重构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:02:08.147

如果方法被声明为返回 void 以外的任何类型，则不能使用 return 指令退出它，并且必须提供返回类型。返回 null 通常是答案。然而，在 MVC 中，您可能希望返回一些内容，以向用户表明出现问题。

# objective-c - 游戏IOS内免费应用内支付

> ID：11756841
> 
> 赞同：0
> 
> 时间：2012-08-01T09:57:07.247
> 
> 标签：objective-c, ios, xamarin.ios

在我的游戏中，我想混合应用程序支付中的免费和 0.99 美元的应用程序支付。

我的意思是继续到第 2 级，用户需要使用应用内支付支付 0.99 美元。但是第 3 级和第 4 级是免费的，第 5 级的费用为 0.99 美元。

我需要从 IOS 服务器知道或保存在数据库中，如果用户获得 3 级或 4 级来恢复游戏，如果它被卸载。

我知道我可以在付款时从 IOS 服务器获得购买的物品，但我不知道是否有可能获得免费购买的物品，或者即使可以使用应用内付款免费购买物品。

也许我需要获取一些用户信息并保存到我的数据库中以跟踪其状态。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:24:43.420

消耗品和非消耗品应用内购买不能是免费的。您必须选择一个价格（最低 0.99 美元）

我认为您必须制作一个具有 2、3 和 4 级的 IAP。另一个具有 5 级（也许是 6 和 7）的 IAP。

# solr - 蒂卡安装

> ID：11756852
> 
> 赞同：1
> 
> 时间：2012-08-01T09:57:31.870
> 
> 标签：solr, nutch, apache-tika

[我按照此链接](http://www.abcseo.com/tech/search/integrating-solr-and-tika)中提供的说明将 Tika 与 Solr 集成

**如果我错了，请纠正我**，在我看来，它可以索引位于我自己系统上的文档文件（pdf、doc、audio）（给定存储这些文件的目录路径），但无法索引这些文件，位于互联网上，当我使用 nutch 抓取一些网站时。

我可以使用 Tika 索引位于 Web 上的文档文件（pdf、音频、doc、zip）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T11:22:27.493

基本上有两种方法可以在 Solr 中索引二进制文档，都使用 Tika：

1.  在客户端使用 Tika 从二进制文件中提取信息，然后在 Solr 中手动索引提取的文本
2.  使用[ExtractingRequestHandler](http://wiki.apache.org/solr/ExtractingRequestHandler)，您可以通过它将二进制文件上传到 Solr 服务器，以便 Solr 可以为您完成工作。这样客户端就不需要 tika。

在这两种情况下，您都需要在客户端拥有二进制文档。在爬行时，nutch 应该能够下载二进制文件，使用 Tika 从中生成文本内容，然后像通常处理文本文档一样在 Solr 中索引数据。Nutch 已经使用[Tika](https://issues.apache.org/jira/browse/NUTCH-766)，我想这只是配置要索引的文档类型的问题，通过从以下行中删除要索引的文件扩展名来更改 regex-urlfilter.txt nutch 配置文件。

```
# skip some suffixes
-\.(swf|SWF|doc|DOC|mp3|MP3|WMV|wmv|txt|TXT|rtf|RTF|avi|AVI|m3u|M3U|flv|FLV|WAV|wav|mp4|MP4|avi|AVI|rss|RSS|xml|XML|pdf|PDF|js|JS|gif|GIF|jpg|JPG|png|PNG|ico|ICO|css|sit|eps|wmf|zip|ppt|mpg|xls|gz|rpm|tgz|mov|MOV|exe|jpeg|JPEG|bmp|BMP)$ 
```

这样你就可以使用我提到的第一个选项。然后您需要在您的 nutch-site.xml 中启用 nutch 上的 Tika 插件，从 nutch 邮件列表中查看[此讨论。](http://lucene.472066.n3.nabble.com/Using-Tika-to-crawl-doc-pdf-etc-tt603220.html#a603223)

这理论上应该有效，如果没有，请告诉我。

# javascript - Javascript变量评估

> ID：11756855
> 
> 赞同：0
> 
> 时间：2012-08-01T09:57:41.707
> 
> 标签：javascript, variables

```
(function(){

   var commentList = $("#commentList");

}); 
```

鉴于上述上下文`commentList` 每次使用变量时都会被评估？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:59:03.963

不，该变量将存储对它的引用，因此每次使用`commentList`时都不会重新评估`$("#commentList")`（当然，第一次赋值除外）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T09:59:08.753

每次调用该函数时都会重新评估它。

一旦进入函数，它将被评估一次，而不是每次调用 var 时。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T10:01:19.653

不，您可以轻松检查

```
<script>
$(function(){

   var commentList = $("#commentList");
   console.log(commentList);
   $('#commentList').html('');
   console.log(commentList);

});
</script>

<div id="commentList">Test</div> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-01T10:02:48.600

它在分配发生时被评估一次。

演示：http: [//jsfiddle.net/PxRXF/](http://jsfiddle.net/PxRXF/)

# java - JSESSIONID 在 cookie 中获得两次

> ID：11756865
> 
> 赞同：2
> 
> 时间：2012-08-01T09:58:14.580
> 
> 标签：java, jakarta-ee, servlets, jboss, struts

我正在使用 jboss 5.1 服务器和 struts 框架。以下是用例

## 用例 1

1）清除浏览器缓存并使用我的应用程序网址加载浏览器
（例如/loadLogin.do）

2）在代码中`httpSession = request.getSession(false);`，当我检查 httpSession 它不为空并且有一些 jessionid 说 123

3）现在我使会话无效`httpSession.invalidate();`

4）我再次创建一个新会话`httpSession = request.getSession()`；现在这一次创建了一个新的 jessionid 说 456

5）最后，当我检查我的 cookie 时，它​​显示 2（两个）jessionid

```
Set-Cookie: JSESSIONID=123.node1; Path=/loadLogin  
Set-Cookie: JSESSIONID=456.node1; Path=/loadLogin 
```

## 用例 2

1）不清除缓存

2）假设浏览器已经有url（即登录到应用程序然后注销然后再次尝试登录，这次浏览器在其下拉列表中显示url）

3）这次我检查cookie时只有1个jessionid存在..

有人可以告诉我，是服务器的行为方式，还是与应用程序中处理会话的方式有关

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:17:48.833

半年前我也处理过这个问题。这是一个非常令人沮丧的问题。但我解决了。您首先取消新创建的会话，然后创建新会话。

```
if (getHttpRequest().getSession(false).isNew() == false) {
  getHttpRequest().getSession(false).invalidate();
  getHttpRequest().getSession(true);
} 
```

# windows - SHGetDriveMedia 和同步

> ID：11756868
> 
> 赞同：0
> 
> 时间：2012-08-01T09:58:17.463
> 
> 标签：windows, delphi, winapi, operating-system, delphi-xe2

识别我使用的媒体`SHGetDriveMedia`；在我传递的第二个参数上`pdwMediaContent`作为参考，api 插入内容的类型。但是，识别是异步完成的。我怎么知道api什么时候完成了识别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T16:39:22.963

它不是异步的。当您在将磁盘放入驱动器后立即调用它时，它处于“嗅探阶段”，试图确定应该使用哪种自动播放磁盘的方法。当函数返回时，可以在[ARCONTENT标志中返回几个检测阶段：](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761371%28v=vs.85%29.aspx)

```
ARCONTENT_PHASE_UNKNOWN (0x00000000)
  Introduced in Windows Vista. AutoPlay is searching the media. The phase of the 
  search (presniff, sniffing, or final) is unknown.

ARCONTENT_PHASE_PRESNIFF (0x10000000)
  Introduced in Windows Vista. The contents of the media are known before the 
  media is searched, due to the media type; for instance, audio CDs and DVD movies.

ARCONTENT_PHASE_SNIFFING (0x20000000)
  Introduced in Windows Vista. AutoPlay is currently searching the media. Any 
  results reported during this phase should be considered a partial list as more 
  content types might still be found.

ARCONTENT_PHASE_FINAL (0x40000000)
  Introduced in Windows Vista. AutoPlay has finished searching the media. Results 
  reported are final.

ARCONTENT_PHASE_MASK (0x70000000)
  Introduced in Windows Vista. A mask that denotes valid ARCONTENT_PHASE values. 
```

这似乎表明（基于上面的文本`ARCONTENT_PHASE_FINAL`）您应该期望需要多次调用此函数，直到您在返回的标志中收到该值，此时您可以检查磁盘标志中的其他值类型。

# java - 信息文件存储

> ID：11756875
> 
> 赞同：0
> 
> 时间：2012-08-01T09:58:45.507
> 
> 标签：java, file-io

我正在寻找创建文件存储的最佳方法。在这个文件存储中，我将存储联系方式等信息。我需要修改文本文件中的详细信息。我只是想获得一些关于什么是最好的方法的意见？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T10:04:42.760

这取决于项目的大小。

*   对于小型项目：您可以使用 XML、JSON 等简单的东西...
*   对于更大的项目：您应该使用 SQL 数据库，如 MySQL、SQLite（非常方便！）

使用 SQLite 总是很好！它是一个简单的 SQL 数据库库，将数据库存储在一个文件中。

* * *

由于您必须对基本文件 IO 使用简单的东西，我建议采用其中一种简单的格式，如 XML、JSON、CSV。或者为了获得更好的分数，使用 DataOutputStream 和 DataInputStream 编写自己的二进制文件。

您的文件格式可能是这样的：

*   任意字节数：固定标头（如：“PendoContactsFormat”）
*   4个字节（即：int），触点数
    *   （对于每个联系人：）
    *   2字节（即：短），此联系人中的字段数
        *   （对于此联系人中的每个字段：）
        *   2个字节：字段头的大小
        *   n 字节：字段头
        *   2个字节：字段值的大小
        *   n 个字节：字段值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:09:27.757

如果您希望能够手动编辑此文件并让非程序员编辑它，[CSV可能是正确的格式。](http://en.wikipedia.org/wiki/Comma-separated_values)

# c# - 风格的输入绑定

> ID：11756885
> 
> 赞同：0
> 
> 时间：2012-08-01T09:59:56.797
> 
> 标签：c#, wpf, xaml, binding, styles

我有一个样式，它应该有一个 MouseBinding 作为在我的 ViewModel 中执行命令的 InputBinding。

为此，我使用了 AttachedProperty：

```
public static readonly DependencyProperty InputBindingsProperty =
    DependencyProperty.RegisterAttached("InputBindings", typeof(InputBindingCollection),
    typeof(InputBindingAttached), 
    new FrameworkPropertyMetadata(new InputBindingCollection(),
    (s, e) =>
    {
        UIElement element = s as UIElement;
        if (element == null || !(e.NewValue is InputBindingCollection))
            return;

        element.InputBindings.Clear();
        element.InputBindings.AddRange(e.NewValue as InputBindingCollection);
    }));

public static void SetInputBindings(UIElement element, InputBindingCollection inputbindings)
{
    element.SetValue(InputBindingsProperty, inputbindings);
}

public static InputBindingCollection GetInputBindings(UIElement element)
{
    return (InputBindingCollection)element.GetValue(InputBindingsProperty);
} 
```

这是我的 XAML：

```
<dc:ColumnDefinition Header="Mapper" BindingMemberPath="Mapper" Width="*">
    <dc:ColumnDefinition.CellStyle>
        <Style TargetType="{x:Type dc:AdvGridCell}">
            <Setter Property="Attached:InputBindingAttached.InputBindings">
                <Setter.Value>
                    <InputBindingCollection>
                        <MouseBinding Gesture="LeftDoubleClick" 
                                      Command="{Binding Path=DataContext.EditMapperCommand, ElementName=parent}"/>
                    </InputBindingCollection>
                </Setter.Value>
            </Setter>
        </Style>
    </dc:ColumnDefinition.CellStyle>
</dc:ColumnDefinition> 
```

XAML 中的我的 Root 元素是从 UserControl 派生的自定义类。根元素的名称是

```
父母
```

. 在以前的项目中，我也使用了这个并且一切正常。但是现在我有一个奇怪的错误，一个名为“Value is null”的参数。如果我在 AttachdProperty 中设置断点，我可以看到它包含命令并且恰好是 AttachedProperty 设置的 2 倍。之后我没有 Stacktrace 没有 Innerexception 什么都没有......只是任何值为空的消息。

如果我在 Binding 中使用 RelativeSource 没有错误，但找不到命令。我真的不知道出了什么问题。

# intellij-idea - 配置intellij idea对话框最大化

> ID：11756887
> 
> 赞同：1
> 
> 时间：2012-08-01T10:00:02.397
> 
> 标签：intellij-idea

有什么方法可以配置intellij idea打开对话框最大化。每次打开一个对话框时，例如一个新的项目对话框，然后我必须最大化窗口（通过双击标题栏）才能看到按钮（下一步、取消、帮助）。这非常烦人。它到处都是我必须处理的一个对话框，变成了idea。我使用 ubuntu 12.04 64 位。
[创意项目创建](https://lh4.googleusercontent.com/-mOa2_q_UDTE/UBkhKNWypmI/AAAAAAAACbI/-iS-zN0RgUg/w1150-h647-k/create_new_project.png)

# ios - 两个表之间的Core Data Where子句？

> ID：11756895
> 
> 赞同：0
> 
> 时间：2012-08-01T10:00:20.137
> 
> 标签：ios, core-data

我有两个表，我想通过查看它们是否匹配特定属性来获取数据。

我想写一个谓词或类似的东西，但我似乎无法想出一个解决方案：`@"Data.item == Item.code"`.

我不使用关系的原因是因为我的数据库是从mysql导入的。因此，所有数据都来自应用程序外部，它是从下载的 mysql 表同步的。

- - - - - - - - - - - - - -编辑 - - - - - - - - - - - --- 到目前为止，我在这里尝试过的很多事情都是我现在这样做的糟糕方式，也许从这里你可以了解更多我正在尝试做的事情。

```
 NSPredicate * Newpredicate = [NSPredicate predicateWithFormat:@"hid == 2"];
    NSArray *row2 = [db DLook:Newpredicate table:@"Data"];
    for (NSManagedObject *data in row2) {
        NSLog(@"\n\n\n\nid\n\n\n\n: %@", [data valueForKey:@"id"]);
        NSString *itemToCode = [data valueForKey:@"item"];
        NSPredicate *itemPredicate = [NSPredicate predicateWithFormat:@"code == %@",itemToCode];
        NSArray *itemRow = [db DLook:itemPredicate table:@"Item"];
        for (NSManagedObject *item in itemRow) {
            NSLog(@"\n\n\n\ncode : %@\n\n\n\n",[item valueForKey:@"code"]);
        }
       // NSLog(@"id: %@", [data valueForKey:@"id"]);
        //NSManagedObject * itemhid= [data valueForKey:@"testRel"];
        //NSLog(@"code: %@",[itemhid valueForKey:@"code"]);
    }
    NSLog(@"\n\n\n\n%d\n\n\n\n",[row2 count]); 
```

DLook 是一种令人信服的方法，它只使用我传递的表上的谓词来获取数据。然后将返回的 NSmanaged 对象的区域遍历它们。

我希望我能建立一个神奇的关系，让我得到一个与 Data.items 匹配的所有 Item.data ！！！我不想这样做，我想建立一种可以这样工作的关系。

帮助 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:45:11.307

只有当两个对象实际上是同一个对象时，谓词中的相等性才会成立。你可以这样做：

```
[NSPredicate predicateWithFormat:@"item = %@", code]; 
```

但是，您应该在导入模型时真正尝试正确建立关系。然后你甚至不必从商店取货，只需使用

```
dataObject.item; 
```

因此，当您导入时，请执行以下操作：

```
// get one data object from your source
// get the corresponding item object from your source
Data *dataObject = [NSEntityDescription insertNewObjectForEntityForName:@"Data"
     inManagedObjectContext:self.managedObjectContext];
Item *itemObject = [NSEntityDescription insertNewObjectForEntityForName:@"Item"
     inManagedObjectContext:self.managedObjectContext];
[dataObject addItemObject:itemObject]; 
```

# android - Android：以编程方式设置样式时没有出现EditText

> ID：11756899
> 
> 赞同：2
> 
> 时间：2012-08-01T10:00:33.397
> 
> 标签：android, styles, android-edittext, tablelayout

我需要以编程方式创建 UI 控件，但我的 EditText 没有出现在屏幕上。

这是一种骨架 xml，我将在其中以编程方式添加表行。

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:orientation="vertical"
        android:paddingLeft="20dp"
        android:id="@+id/main_layout">

        <TableLayout android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="50dp"
            android:id="@+id/myTable" >

        </TableLayout>

    </LinearLayout>

</ScrollView> 
```

这是我活动中的java代码，

```
TableLayout mainTable = (TableLayout) findViewById(R.id.myTable);
TableRow row = new TableRow(this);

TextView textView = new TextView(this);
textView.setText("Text1");
row.addView(textView);

EditText editText = new EditText(this, null, R.style.editTextStyle);
row.addView(editText);

mainTable.addView(row); 
```

我的 editTextStyle 如下，

```
<style name="editTextStyle">
    <item name="android:paddingTop">10dp</item>
    <item name="android:paddingLeft">7dp</item>
    <item name="android:textSize">27sp</item>
    <item name="android:layout_width">150dp</item>
<item name="android:layout_height">50dp</item>
</style> 
```

textView 正常显示，但 editText 没有。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:52:09.080

如果您使用的是 Android 4.0.3，那么在您的 LinearLayout 中删除

```
android:focusable="true"
android:focusableInTouchMode="true" 
```

或者你可以为edittext设置任何背景颜色，即。

在你的风格中添加项目为

```
<item name="android:background">your required color </item> 
```

然后你就可以看到edittext了。

您也可以在活动中执行以下操作

```
EditText editText = new EditText(this);
editText.setBackgroundColor(R.color.BLUE);
editText.setTextColor(R.color.BLACK);
row.addView(editText); 
```

在 color.xml 中

```
<resources>
<color name="Black">#000000</color>
<color name="Blue">#FF006767</color>
</resources> 
```

# javascript - 输入分号或大括号时在 Eclipse 中自动格式化代码

> ID：11756907
> 
> 赞同：5
> 
> 时间：2012-08-01T10:00:51.720
> 
> 标签：javascript, eclipse

来自 Visual Studio，我习惯于在输入分号或右花括号时自动格式化代码。是否可以在 JavaScript 编辑器中对 Eclipse 做同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-23T09:20:08.970

使用`Ctrl`+`A` 选择您的代码，然后按`Ctrl`+ `i`，这将使 eclipse kepler 中的 javascript 代码正确缩进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:52:36.350

我没有 JavaScript 插件，但我假设它的工作原理相同，因此`Ctrl`+`I`将所选代码格式化为正确的缩进。我希望这就是你所说的格式化。对 JavaScript 不太熟悉，因此不确定最佳格式。

例如，在 Java 中：

```
public static void main(Strings[] args) {
boolean format = false;
if (format) {
for (int i = 0; i <10; i++) {
System.out.println("Hello World" + i);
}
}
} 
```

前往：

```
public static void main(Strings[] args) {
    boolean format = false;
    if (format) {
        for (int i = 0; i <10; i++) {
            System.out.println("Hello World" + i);
        }
    }
} 
```

您可以在 Window > Preferences > General > Keys > Correct Indentation 中更改 Eclipse 的键绑定

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-01T10:23:16.423

您可以获得 javascript 的自动格式化：

```
right click project > javascript > code style > formatter 
```

您可能必须确保它具有 javascript 的项目方面，我不记得是否有必要。

# android - 文字在模拟器和安卓手机中显示不同

> ID：11756908
> 
> 赞同：1
> 
> 时间：2012-08-01T10:00:52.673
> 
> 标签：android, android-layout

我的小部件程序在 android 模拟器中显示良好。当我用 android 手机（三星 Galaxy Y Pro）测试时显示文本不可读。我该如何解决这个问题？还附上主布局文件

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/full_widget"
android:layout_width="250dp"
android:background="@drawable/bkground"
android:padding="10dp"
android:layout_height="70dp">

<ImageView
    android:id="@+id/signal"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:adjustViewBounds="true"
    android:scaleType="fitXY"
    android:layout_alignParentLeft="true"
    android:layout_toRightOf="@id/signal"
    android:layout_centerHorizontal="true"
    android:maxWidth="45dp"
    android:minHeight="70dp"/>

<TextView
    android:id="@+id/network"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@id/signal"
    android:textStyle="bold"
    android:textColor="@android:color/white"
    android:textSize="10dp"/>

<TextView
    android:id="@+id/Status1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@id/signal"
    android:layout_below="@+id/network"
    android:textColor="@android:color/white"
    android:textSize="8dp"/>

<TextView
    android:id="@+id/Status2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@id/signal"
    android:layout_below="@id/Status1"
    android:textColor="@android:color/white"
    android:textSize="8dp"/>

<TextView
    android:id="@+id/Status3"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@id/signal"
    android:layout_below="@id/Status2"
    android:textColor="@android:color/white"
    android:textSize="8dp"
    android:textStyle="italic" /> 

   </RelativeLayout> 
```

谢谢

# iphone - 如何在objective-c中将2012-08-01T11:53:58+02:00之类的字符串转换为日期

> ID：11756912
> 
> 赞同：0
> 
> 时间：2012-08-01T10:01:11.940
> 
> 标签：iphone, objective-c, ios, nsdateformatter

我收到一个**JSON 编码**的日期字符串，如下所示：**2012-08-01T11:53:58+02:00**。我想将它转换为**NSDate**对象，**但是我的转换不起作用**。据我所知，它应该是 ISO 8601 格式，但我对最后的时区感到很困惑，因为它之间有一个冒号。

到目前为止，我的代码如下所示：

```
 /*
  * format the time
  */
 NSDateFormatter *isoDateFormatter = [NSDateFormatter new];
 [isoDateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ssZZZ"];
 NSDate *dateTmp = [isoDateFormatter dateFromString:[data objectForKey:@"datetimeServer"]];
 /*
  * log the output
  */
 [isoDateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss"];
 NSLog(@"Server time is %@", [isoDateFormatter stringFromDate:dateTmp]); 
```

**为了防止无法使用的答案，日期肯定在那里，我在日志中检查了:)。**但是服务器时间等于（null），所以转换不能正常工作。

谢谢您的回答。

再见，菲利普

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-01T11:27:14.277

根据您以 JSON 编码接收的日期字符串（如您所述），如下所示： 2012-08-01T11:53:58+02:00 我担心日期字符串的格式不正确，所以我建议你做一些字符串操作。

//NSMutableString *string=[[NSMutableString alloc]initWithString:@"2012-08-01T11:53:58+02:00"];

```
NSMutableString *string=[[NSMutableString alloc]initWithString:[data objectForKey:@"datetimeServer"]]; 
NSRange range = [string rangeOfString:@"+" options:NSBackwardsSearch]; 
[string insertString:@"GMT" atIndex:range.location];

NSDateFormatter *isoDateFormatter = [[NSDateFormatter alloc]init];
[isoDateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ssZZZ"];
NSDate *dateTmp = [isoDateFormatter dateFromString:string];
NSLog(@"Server time is %@", dateTmp);

[isoDateFormatter setDateFormat:@"yyyy-MM-dd 'T' HH:mm:ss"];    
NSLog(@"Server time is %@", [isoDateFormatter stringFromDate:dateTmp]); 
```

希望这可以帮助你

# apple-push-notifications - 如何颁发开发 MDM APNS 证书？

> ID：11756914
> 
> 赞同：3
> 
> 时间：2012-08-01T10:01:16.970
> 
> 标签：apple-push-notifications, mdm

关于[苹果文档](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/RemoteNotificationsPG/ProvisioningDevelopment/ProvisioningDevelopment.html)：

我们需要 2 个单独的证书，一个用于生产，一个用于开发。我们已经颁发了生产证书，它适用于生产 APNS，但当我们在 MDM 有效负载中设置开发 APNS 时，它不适用于开发。

知道如何颁发开发 APNS 证书吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:18:45.480

在 iOS 配置门户中，选择“应用 ID”。单击应用名称旁边的“配置”。一旦您的应用程序启用发送推送通知，您就可以配置和下载您的推送开发证书。

请记住，您的应用程序的包标识符中不能包含通配符 (*)。

本[教程](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)对我帮助很大。

另外，请记住在开发 APNS 和生产 APNS 之间切换。[我在这篇文章](https://stackoverflow.com/questions/11558177/verify-return-code-20-unable-to-get-local-issuer-certificate/13433687#13433687)中展示了如何做到这一点。

# java - 远程 XML 解析的 Http 请求

> ID：11756920
> 
> 赞同：0
> 
> 时间：2012-08-01T10:01:37.067
> 
> 标签：java, xml, xmlhttprequest, inputstream

我从两天开始就一直坚持这个过程，在发布之前我搜索了很多主题，看起来这是一个非常简单的问题。但我没有得到问题。

场景是基本的：我想通过 http 连接从远程计算机解析 XML：

```
 import java.io.*;
  import java.net.HttpURLConnection;
  import java.net.URL;
  try {
       URL url = new URL("http://host:port/file.xml");
       HttpURLConnection connection = (HttpURLConnection) url.openConnection();
       connection.setRequestMethod("GET");
       connection.setRequestProperty("Accept","application/xml");
       InputStream is = connection.getInputStream();
       BufferedReader br = new BufferedReader(new InputStreamReader(is));
       PrintWriter pw = new PrintWriter("localfile_pw.xml");
       FileOutputStream fos = new FileOutputStream("localfile_os.xml"); 
```

然后我尝试了三种不同的方式来读取 XML

读取字节流

```
 byte[] buffer = new byte[4 * 1024];
   int byteRead;
   while((byteRead= is.read(buffer)) != -1){
                fos.write(buffer, 0, byteRead);
    } 
```

每个字符读取字符

```
 char c;
   while((c = (char)br.read()) != -1){
          pw.print(c);
          System.out.print(c);
    } 
```

每行读取行

```
 String line = null; 
    while((line = br.readLine()) != null){
                pw.println(line);
                System.out.println(line);
    } 
```

**在所有情况下，我的 xml 读取在相同的字节数**之后停止在同一点。并且没有阅读并且没有给出任何例外就被卡住了。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:07:21.220

这个怎么样（参见Apache 的[IOUtils](http://commons.apache.org/io/apidocs/org/apache/commons/io/IOUtils.html)）：

```
URL url = new URL("http://host:port/file.xml");
HttpURLConnection connection = (HttpURLConnection) url.openConnection();
connection.setRequestMethod("GET");
connection.setRequestProperty("Accept","application/xml");
InputStream is = connection.getInputStream();
FileOutputStream fos = new FileOutputStream("localfile_os.xml");
IOUtils.copy(is, fos);
is.close();
fos.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T18:25:26.477

默认情况下，该类支持持久 HTTP 连接。如果在响应时知道响应的大小，则在发送您的数据后，服务器将等待另一个请求。有两种处理方法：

1.  阅读内容长度：

    ```
    InputStream is = connection.getInputStream();
    String contLen = connection.getHeaderField("Content-length");
    int numBytes = Integer.parse(contLen); 
    ```

    `numBytes`从输入流中读取字节。注意：`contLen`可能为空，在这种情况下，您应该阅读直到 EOF。

2.  禁用连接保持活动：

    ```
    connection.setRequestProperty("Connection","close");
    InputStream is = connection.getInputStream(); 
    ```

    发送完最后一个字节的数据后，服务器将关闭连接。

# c# - 在 ajax 工具包模式弹出扩展器上回发

> ID：11756923
> 
> 赞同：0
> 
> 时间：2012-08-01T10:01:51.417
> 
> 标签：c#, asp.net, modal-popup

我使用 Ajax Toolkit 模式弹出扩展器来弹出一个表单，用于从用户那里收集信息。我打算将从用户收集的数据发送到后面的代码，以便在单击该表单上的提交按钮时保存到数据库中。但是，我发现提交按钮根本没有发回保护程序。

我不想使用任何客户端编码或 Web 服务。

是否可以在模态弹出窗口上进行回发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:24:10.233

您的问题有两种解决方案：

1.  在 div 中使用 asp:button 创建表单，最初将其设置为不显示。在弹出窗口时，只需让它可见，您可以根据需要设置它的位置。然后单击提交按钮后，它将正常运行并重定向您的页面。

2.  它是通过使用 jQuery 和 Ajax 实现的。创建一个 html 表单并在提交时调用一个 JavaScript 函数 JavaScript 函数：-

    ```
     function on_submit(){
        var pageUrl = 'your_page_name.aspx'
         $.ajax({
           type: "POST",
           url: pageUrl + "/your_web_method",
           data: '{data1:value1, data2:value2}',
           contentType: "application/json; charset=utf-8",
           dataType: "json",
           success: function(msg) {
                    make your success code here
              }
        });

      in C# 
        [WebMethod]
        public static void your_web_method(data1, data2)
        {
            // your code to store value in database
        } 
    ```

# ios - iOS GLSL 片段着色器中的基本算法

> ID：11756926
> 
> 赞同：0
> 
> 时间：2012-08-01T10:01:59.700
> 
> 标签：ios, fragment-shader

这是我在 iPhone 3g 上的 iOS 5.1.1 上运行的片段着色器程序。

```
#ifdef GL_ES
precision lowp float;
#endif

varying vec2 v_texCoord;

void main()
{
    float offset = sin(v_texCoord.x * 10.0);
    // offset = offset * 1.0; // (!!!)
    gl_FragColor = vec4(offset, 0.0, 0.0, 1.0);
} 
```

这会产生美好的罪恶：

![片段着色器生成的罪孽](../Images/38c703dc00ce016c0dd9dc251ddc83de.png)

注意标有 (!!!) 的行。我想，将浮点值乘以 1.0 不会有任何改变。（在 Windows 操作系统下运行的同一着色器完全按预期工作。）因此，我取消注释该行并收到以下信息：

![哇？！](../Images/836e9755672e57526e6afd4e56466b05.png)

怎么回事？！

* * *

如何重现：

1.  从 xcode 中的标准模板创建 iOS 游戏项目。如果您运行该项目，那么您将看到两个浮动立方体。一红一蓝。
2.  将 Shader.vsh 的内容更改为以下内容。（我刚刚添加了一个可变参数 v_pos）。

    ```
    attribute vec4 position;
    attribute vec3 normal;

    varying lowp vec4 colorVarying;
    varying lowp vec4 v_pos;

    uniform mat4 modelViewProjectionMatrix;
    uniform mat3 normalMatrix;

    void main()
    {
        vec3 eyeNormal = normalize(normalMatrix * normal);
        vec3 lightPosition = vec3(0.0, 0.0, 1.0);
        vec4 diffuseColor = vec4(0.4, 0.4, 1.0, 1.0);

        float nDotVP = max(0.0, dot(eyeNormal, normalize(lightPosition)));

        colorVarying = diffuseColor * nDotVP;

        gl_Position = modelViewProjectionMatrix * position;
        v_pos = gl_Position;
    } 
    ```

3.  将 Shader.fsh 更改为以下内容。

    ```
    varying lowp vec4 colorVarying;
    varying lowp vec4 v_pos;

    void main()
    {
        gl_FragColor = colorVarying;
        lowp float a = sin(v_pos.x * 10.0);
        // a = a * 1.0; // (!!!)
        gl_FragColor = vec4(a, 0.0, 0.0, 1.0);
    } 
    ```

4.  在设备上运行程序并查看蓝色立方体上的酷条： ![酷酒吧](../Images/cf75563a9ed2c80c05ff492c722df4ae.png)

5.  取消注释由 (!!!) 标记的行 ( `a = a * 1.0;`) 并再次运行： ![呃？](../Images/bf075e815c422342eec36742969ea924.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:55:17.157

好吧，让我回答我自己的问题。问题在于着色器中使用的低精度限定符。将其更改为 mediump 着色器后开始按预期工作。

# c++ - 带有文件信息的 CaptureStackBackTrace

> ID：11756929
> 
> 赞同：3
> 
> 时间：2012-08-01T10:02:07.623
> 
> 标签：c++, winapi

我正在使用`CaptureStackBackTrace`并`SymFromAddr`识别调用堆栈中的函数。有没有办法用这个找到每个符号的源文件（我找不到任何文档）？或者我必须使用 StackWalk ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T12:13:45.680

解决方案是使用`SymGetLineFromAddr`它给出文件路径和行号。为此，您必须`SYMOPT_LOAD_LINES`在调用之前设置标志`SymInitialize`。的第三个参数也`SymGetLineFromAddr`不能为 NULL，否则会崩溃。

拉克斯万。

# php - MySQL 查询快，PHP 查询慢

> ID：11756932
> 
> 赞同：9
> 
> 时间：2012-08-01T10:02:19.550
> 
> 标签：php, mysql

我们的一个网站上有一个搜索引擎，速度非常慢。我打开了慢查询日志并记录了所有耗时超过 10 秒的查询。仅记录来自该搜索引擎的查询。这是日志的一个示例：

```
# Time: 120801  9:21:42
# User@Host: ********** @ localhost []
# Query_time: 22.156250  Lock_time: 0.000000 Rows_sent: 33  Rows_examined: 3385401
SET timestamp=1343805702;
SELECT *, IF(InSection OR InBranche, 1, 0) AS SorteerKolom FROM(SELECT DISTINCT Plant, Email, Nicename, Displayname, JobTitle, Department, Initials, Lastname, LastnameForSort, 
                                search_people.ForeignId, IsVennoot, 
                                (Zoekwoorden LIKE '%statutair%') AS SearchTerm, 
                                (Displayname LIKE '%statutair%') AS ByName, 
                                0 AS InSection, 0 AS InBranche, 1 AS ShowAll, 
                                (SELECT COUNT(*) FROM search_hasarticles WHERE UserId = search_people.ForeignId) > 0 AS HasWritten 
                             FROM search_people 
                             LEFT JOIN search_people_branches ON search_people.ForeignId = search_people_branches.UserId 
                             LEFT JOIN search_people_specialismen ON search_people.ForeignId = search_people_specialismen.UserId 
                             LEFT JOIN wp_usermeta AS wpu ON (wpu.user_id = search_people.ForeignId)
                             WHERE 
                             (
                                Firstname LIKE '%statutair%' 
                                OR Lastname LIKE '%statutair%' 
                                AND Displayname LIKE '%statutair%' 
                                OR Email LIKE '%statutair%' 
                                OR Address LIKE '%statutair%' 
                                OR Initials LIKE '%statutair%' 
                                OR Location LIKE '%statutair%' 
                                OR Givenname LIKE '%statutair%' 
                                OR Nickname LIKE '%statutair%' 
                                OR JobTitle LIKE '%statutair%' 
                                OR Login LIKE '%statutair%' 
                                OR Title LIKE '%statutair%' 
                                OR Phone LIKE '%statutair%' 
                                OR Fax LIKE '%statutair%' 
                                OR Plant LIKE '%statutair%' 
                                OR Displayname LIKE '%statutair%' 
                                OR Zoekwoorden LIKE '%statutair%'

                             )
                             AND (1=1) AND search_people.IsHidden = 0 AND search_people.Activated = 1 UNION SELECT DISTINCT Plant, Email, Nicename, Displayname, JobTitle, Department, Initials, Lastname, LastnameForSort, 
                                search_people.ForeignId, IsVennoot, 0 AS SearchTerm, 0 AS ByName, 0 AS InSection, 1 AS InBranche, 1 AS ShowAll, 
                                (SELECT COUNT(*) FROM search_hasarticles WHERE UserId = search_people.ForeignId) > 0 AS HasWritten 
                             FROM search_people 
                             LEFT JOIN search_people_branches ON search_people.ForeignId = search_people_branches.UserId 
                             LEFT JOIN search_branches ON search_branches.ForeignId  = search_people_branches.BrancheId 
                             LEFT JOIN search_people_specialismen ON search_people.ForeignId = search_people_specialismen.UserId  
                             WHERE Name LIKE '%statutair%' AND (1=1) AND search_people.IsHidden = 0 AND search_people.Activated = 1 UNION SELECT DISTINCT Plant, Email, Nicename, Displayname, JobTitle, Department, Initials, Lastname, LastnameForSort, search_people.ForeignId, IsVennoot, 0 AS SearchTerm, 0 AS ByName, 1 AS InSection, 0 AS InBranche, 1 AS ShowAll, (SELECT COUNT(*) FROM search_hasarticles WHERE UserId = search_people.ForeignId) > 0 AS HasWritten FROM search_people LEFT JOIN search_people_specialismen ON search_people.ForeignId=search_people_specialismen.UserId LEFT JOIN search_specialties ON search_specialties.ForeignId=search_people_specialismen.SpecialismeId LEFT JOIN search_people_branches ON search_people.ForeignId=search_people_branches.UserId WHERE (Name LIKE '%statutair%' OR SearchTerms LIKE '%statutair%') AND (1=1) AND search_people.IsHidden = 0 AND search_people.Activated = 1 UNION SELECT DISTINCT Plant, Email, Nicename, Displayname, JobTitle, Department, Initials, Lastname, LastnameForSort, search_people.ForeignId, IsVennoot, 0 AS SearchTerm, 0 AS ByName, 0 AS InSection, 0 AS InBranche, 0 AS ShowAll, 1 AS HasWritten FROM search_posts LEFT JOIN search_posts_branches ON search_posts.ForeignId=search_posts_branches.PostId LEFT JOIN search_branches ON search_posts_branches.BrancheId=search_branches.ForeignId LEFT JOIN search_people_specialismen ON search_posts.PostAuthor=search_people_specialismen.UserId LEFT JOIN search_specialties ON search_people_specialismen.SpecialismeId=search_specialties.ForeignId INNER JOIN search_people ON search_people.ForeignId=search_posts.PostAuthor WHERE (PostTitle LIKE '%statutair%' OR PostContent LIKE '%statutair%' OR search_branches.Name LIKE '%statutair%' OR search_specialties.Name LIKE '%statutair%') AND PostStatus='publish' AND PostType='post' AND (1=1) AND search_people.IsHidden = 0 AND search_people.Activated = 1) AS search_results ORDER BY SearchTerm DESC, ByName DESC, SorteerKolom DESC, IsVennoot DESC, InSection DESC, InBranche DESC, HasWritten DESC, LastnameForSort ASC, Initials ASC; 
```

如您所见，执行查询大约需要 22 秒，如果直接在 MySQL 中执行相同的查询，则大约需要 4 秒。

我对同一个查询做了一个解释，而 uotput 如下：

```
id                               select_type                      table                            type                             possible_keys                    key                              key_len                          ref                               rows                             Extra                                    
1                                PRIMARY                          <derived2>                       ALL                              NULL                             NULL                             NULL                             NULL                              33                               Using filesort                           
2                                DERIVED                          search_people                    ALL                              NULL                             NULL                             NULL                             NULL                              323                              Using where; Using temporary             
2                                DERIVED                          search_people_branches           ALL                              NULL                             NULL                             NULL                             NULL                              2013                             Distinct                                 
2                                DERIVED                          search_people_specialismen       ALL                              NULL                             NULL                             NULL                             NULL                              1013                             Distinct                                 
2                                DERIVED                          wpu                              ref                              user_id                          user_id                          8                                wordpress.search_people.ForeignId 84                               Using index; Distinct                    
3                                DEPENDENT SUBQUERY               search_hasarticles               ALL                              NULL                             NULL                             NULL                             NULL                              101                              Using where                              
4                                UNION                            search_branches                  ALL                              NULL                             NULL                             NULL                             NULL                              19                               Using where; Using temporary             
4                                UNION                            search_people                    ALL                              NULL                             NULL                             NULL                             NULL                              323                              Using where; Using join buffer           
4                                UNION                            search_people_specialismen       ALL                              NULL                             NULL                             NULL                             NULL                              1013                             Distinct                                 
4                                UNION                            search_people_branches           ALL                              NULL                             NULL                             NULL                             NULL                              2013                             Using where; Distinct; Using join buffer 
5                                DEPENDENT SUBQUERY               search_hasarticles               ALL                              NULL                             NULL                             NULL                             NULL                              101                              Using where                              
6                                UNION                            search_specialties               ALL                              NULL                             NULL                             NULL                             NULL                              73                               Using where; Using temporary             
6                                UNION                            search_people                    ALL                              NULL                             NULL                             NULL                             NULL                              323                              Using where; Using join buffer           
6                                UNION                            search_people_specialismen       ALL                              NULL                             NULL                             NULL                             NULL                              1013                             Using where; Distinct; Using join buffer 
6                                UNION                            search_people_branches           ALL                              NULL                             NULL                             NULL                             NULL                              2013                             Distinct                                 
7                                DEPENDENT SUBQUERY               search_hasarticles               ALL                              NULL                             NULL                             NULL                             NULL                              101                              Using where                              
8                                UNION                            search_posts                     ALL                              NULL                             NULL                             NULL                             NULL                              15860                            Using where; Using temporary             
8                                UNION                            search_posts_branches            ALL                              NULL                             NULL                             NULL                             NULL                              149                              Distinct                                 
8                                UNION                            search_branches                  ALL                              NULL                             NULL                             NULL                             NULL                              19                               Distinct                                 
8                                UNION                            search_people_specialismen       ALL                              NULL                             NULL                             NULL                             NULL                              1013                             Distinct                                 
8                                UNION                            search_specialties               ALL                              NULL                             NULL                             NULL                             NULL                              73                               Using where; Distinct                    
8                                UNION                            search_people                    ALL                              NULL                             NULL                             NULL                             NULL                              323                              Using where; Distinct; Using join buffer 
                                 UNION RESULT                     <union2,4,6,8>                   ALL                              NULL                             NULL                             NULL                             NULL                              NULL 
```

谁能解释为什么我的网站上的相同查询比直接在 MySQL 上要慢得多？或者更重要的是，有没有办法让这个网站上的查询更快？

如果您需要更多信息进行故障排除，请大声疾呼，我会尽力提供。

提前非常感谢，简。

这是查询的简介：

```
+----------------------+----------+
| Status               | Duration |
+----------------------+----------+
| starting             | 0.000431 |
| Opening tables       | 0.002004 |
| System lock          | 0.000012 |
| Table lock           | 0.000502 |
| optimizing           | 0.000033 |
| statistics           | 0.000042 |
| preparing            | 0.000034 |
| Creating tmp table   | 0.000085 |
| executing            | 0.000004 |
| Copying to tmp table | 0.001957 |
| Sending data         | 0.000006 |
| optimizing           | 0.000025 |
| statistics           | 0.000027 |
| preparing            | 0.000041 |
| Creating tmp table   | 0.000114 |
| executing            | 0.000001 |
| Copying to tmp table | 0.000058 |
| Sending data         | 0.000004 |
| optimizing           | 0.000021 |
| statistics           | 0.000027 |
| preparing            | 0.000037 |
| Creating tmp table   | 0.000095 |
| executing            | 0.000003 |
| Copying to tmp table | 0.007376 |
| optimizing           | 0.000013 |
| statistics           | 0.000017 |
| preparing            | 0.000011 |
| executing            | 0.000005 |
| Sending data         | 0.001248 |
| executing            | 0.000014 |
| Sending data         | 0.001894 |
| executing            | 0.000007 |
| Sending data         | 0.003249 |
| executing            | 0.000004 |
| Sending data         | 0.001487 |
| executing            | 0.000001 |
| Sending data         | 0.000433 |
| executing            | 0.000001 |
| Sending data         | 0.012100 |
| executing            | 0.000006 |
| Sending data         | 0.000713 |
| executing            | 0.000002 |
| Sending data         | 0.000681 |
| executing            | 0.000001 |
| Sending data         | 0.015382 |
| executing            | 0.000005 |
| Sending data         | 0.001048 |
| executing            | 0.000002 |
| Sending data         | 0.000916 |
| executing            | 0.000004 |
| Sending data         | 0.000421 |
| executing            | 0.000001 |
| Sending data         | 0.000561 |
| executing            | 0.000001 |
| Sending data         | 0.005126 |
| executing            | 0.000008 |
| Sending data         | 0.014534 |
| executing            | 0.000004 |
| Sending data         | 0.001666 |
| executing            | 0.000006 |
| Sending data         | 0.001641 |
| Sending data         | 0.000203 |
| optimizing           | 0.000045 |
| statistics           | 0.000050 |
| preparing            | 0.000049 |
| Creating tmp table   | 0.000182 |
| executing            | 0.000002 |
| Copying to tmp table | 5.101209 |
| Sending data         | 0.000226 |
| optimizing           | 0.000007 |
| statistics           | 0.000008 |
| preparing            | 0.000007 |
| executing            | 0.000001 |
| Sending data         | 0.000217 |
| removing tmp table   | 0.000044 |
| Sending data         | 0.000007 |
| removing tmp table   | 0.000012 |
| Sending data         | 0.000017 |
| removing tmp table   | 0.000011 |
| Sending data         | 0.000005 |
| removing tmp table   | 0.000033 |
| Sending data         | 0.000008 |
| removing tmp table   | 0.000030 |
| Sending data         | 0.000009 |
| init                 | 0.000044 |
| optimizing           | 0.000005 |
| statistics           | 0.000004 |
| preparing            | 0.000007 |
| executing            | 0.000002 |
| Sorting result       | 0.000074 |
| Sending data         | 0.000164 |
| end                  | 0.000003 |
| query end            | 0.000005 |
| freeing items        | 0.000210 |
| removing tmp table   | 0.000061 |
| closing tables       | 0.000051 |
| logging slow query   | 0.000003 |
| cleaning up          | 0.000026 |
+----------------------+----------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T10:18:33.980

我看到很多不可索引的条件，例如`Firstname LIKE '%statutair%'`. 一种可能是 MySQL 实际上正在使用其[结果缓存](http://dev.mysql.com/doc/refman/5.5/en/query-cache.html)，而 PHP 无法利用结果缓存。例如，如果您使用带有[ATTR_EMULATE_PREPARES 选项 disabled](https://stackoverflow.com/questions/5736492/support-server-side-prepared-statements-with-pdo/5751895#5751895)的 PDO，就会发生这种情况。

要找出答案，请在 MySQL 中进行测试时添加 SQL_NO_CACHE 子句，如下所示：

```
SELECT SQL_NO_CACHE id, name FROM customer; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:24:58.140

在我看来，您必须在很多列上设置索引。请阅读：[http](http://dev.mysql.com/doc/refman/5.0/en/explain-output.html) ://dev.mysql.com/doc/refman/5.0/en/explain-output.html 为了使查询更快，首先为您在 JOIN 语句中使用的每一列设置一个索引。如果这不能加快速度，请在您检查 WHERE 的列上设置索引。此外，OR 运算符很慢，在所有 OR 的块中还有一个 AND。也许您可以跳过其中的一些 OR，例如“姓名首字母”（但这当然是一个疯狂的猜测……）

# facebook - facebook graph API - 评论数限制为 999

> ID：11756935
> 
> 赞同：3
> 
> 时间：2012-08-01T10:02:45.253
> 
> 标签：facebook, facebook-graph-api

我正在尝试通过 FB Graph API 获取特定 Facebook 帖子的所有评论。

对帖子本身的呼吁：

`graph.facebook.com/129047777209815_279367092177882/?access_token=XXXXXXXXXXXXXXX|XXXXXXXXXXXXXXXXXXXXXXXXXXX`

产生有 5278 条评论。

查询 offset=900, limit=100 的评论：

`https://graph.facebook.com/129047777209815_279367092177882/comments?limit=100&offset=900&value=1&base_amount=1&access_token=XXXXXXXXXXXXXXX|XXXXXXXXXXXXXXXXXXXXXXXXXXX&__after_id=129047777209815_279367092177882_1122143`

产量

`"paging": { "next": "https://graph.facebook.com/129047777209815_279367092177882/comments?limit=100&offset=1000&value=1&base_amount=1&access_token=XXXXXXXXXXXXXXX|XXXXXXXXXXXXXXXXXXXXXXXXXXX&__after_id=129047777209815_279367092177882_1122270"}`

还在查询

`graph.facebook.com/129047777209815_279367092177882/comments?limit=100&offset=1000&value=1&base_amount=1&access_token=XXXXXXXXXXXXXXX|XXXXXXXXXXXXXXXXXXXXXXXXXXX&__after_id=129047777209815_279367092177882_1122270`

根本不给我任何评论。不仅仅是这篇文章，我一直注意到我永远无法检索超过 999 条评论。谁能告诉我如何获得超过 999 条评论？这是 Facebook 的限制吗？我在文档中找不到它。

谢谢，保罗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T10:12:52.397

你为什么使用`__after_id`令牌？以下似乎在 Graph API Explorer 中完美运行。

```
129047777209815_279367092177882/comments?limit=100&offset=5277&value=1&base_amount=1 
```

以上检索到第**5278 条**评论。[在Graph API Explorer](https://developers.facebook.com/tools/explorer/?method=GET&path=129047777209815_279367092177882/comments?limit=100&offset=5277&value=1&base_amount=1)中尝试一下。

999 的限制可能适用于该`__after_id`参数。它似乎没有很好的记录。[（相关错误）](http://developers.facebook.com/bugs/122972287842422?browse=search_501902014a7c80268618845)

# mysql - Mysql将2个计算字段连接成1列？

> ID：11756940
> 
> 赞同：0
> 
> 时间：2012-08-01T10:03:19.293
> 
> 标签：mysql

早上好，是否可以将 2 个计算字段连接成 1 列？对于一年中的每个月，我有 2 列，1 列输出销售额和每个月的其他销售额；

一月_£ | 一月
箱 £8,123.00 | 100

我想做的是将这些连接成 1 列；
100 年1 月
- £8,123.00

我尝试了很多方法并且可以连接 2 个标准字段，但似乎无法让计算字段的格式正确？目前查询中的列；

```
 Sum(If(Month(b.CaseDate) = 1, b.CaseCommission, 0)) As January_£,
  Sum(Month(b.CaseDate) = 1) As January, 
```

而我最近的努力不起作用但也不会出错！

```
CONCAT(Sum(If(Month(b.CaseDate) = 1, b.CaseCommission, 0)),Sum(Month(b.CaseDate) = 1)0 As January, 
```

如果有人能确认它有可能实现这一目标，我将不胜感激。

问候

加里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T10:11:00.120

这应该工作：

```
SELECT CONCAT(Sum(Month(b.CaseDate) = 1), '-',
       Sum(If(Month(b.CaseDate) = 1, b.CaseCommission, 0)) ) AS January; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:10:50.870

试试这个

```
CONCAT(Sum(If(Month(b.CaseDate) = 1, b.CaseCommission, 0)),'-',
       Sum(Month(b.CaseDate) = 1)) As January, 
```

# c# - 扩展器标题的宽度不正确，带有旋转文本

> ID：11756943
> 
> 赞同：3
> 
> 时间：2012-08-01T10:03:32.273
> 
> 标签：c#, wpf, xaml

我有一个（右向）扩展器，它应该在展开时隐藏标题，并在折叠时显示一些旋转为垂直向下的文本。我已经设法使用以下代码实现了这一点：

```
<Expander Grid.Column="1" ExpandDirection="Left" 
      IsExpanded="True" Name="rightHandExpander"
      MaxWidth="{Binding RelativeSource={RelativeSource PreviousData}}">
    <Expander.Header>
        <TextBlock Text="Header text" RenderTransformOrigin="0,0"
            Visibility="{Binding IsExpanded, RelativeSource={RelativeSource 
                         AncestorType={x:Type Expander}, Mode=FindAncestor}, 
                         Converter={StaticResource boolToVisibilityConverter}}">
            <TextBlock.LayoutTransform>
                <TransformGroup>
                    <RotateTransform CenterX="25" CenterY="25" Angle="90" />
                </TransformGroup>
            </TextBlock.LayoutTransform>
        </TextBlock>
    </Expander.Header>
    <!-- controls here -->
</Expander> 
```

但是，当展开器折叠时，标题会占用太多空间 - 文本会旋转，但标题的宽度似乎保持不变。

在代码隐藏中使用 VisualTreeHelper 我发现扩展器的标题、边框和停靠面板太大，但内部切换按钮的大小正确。我尝试将标题、边框和停靠面板的宽度设置为正确的大小，但它们没有改变。

任何人都可以帮忙吗？

编辑：扩展器包含在一个网格中，该网格有两列，一个网格拆分器，另一个扩展器位于第一列。另一个扩展器做同样的事情，但折叠到左侧 - 然而，这个扩展器似乎工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:50:21.843

我相信将“Horizo​​ntalAlignment”设置为“Right”可能会解决您遇到的问题，因为网格中大多数控件的默认行为将是填充其单元格中的所有可用空间。不过，您的左侧工作有点奇怪，除非它不是直接在网格中，或者将 Horizo​​ntalAlignment 设置为 Left？

# vba - VBA + 带有引号的打印行到 txt 文件

> ID：11756944
> 
> 赞同：1
> 
> 时间：2012-08-01T10:03:44.257
> 
> 标签：vba

我的目标是通过 VBA 将以下行准确写入 D:\file.txt

```
 """\\server1\pc1\targetG0\source-pc\pkgs.gz""" 
```

.

我写了下面的 VBA 代码，但是在我运行这个程序之后，我得到了只有两个引号的行来得到六个引号的行？

我的代码：

```
Dim suppname As String

Open "D:\file.txt" For Output As #1

suppname = """"\\server1\pc1\targetG0\source-pc\pkgs.gz""""

Print #1, suppname 
```

.

我得到的示例：

```
 "\\server1\pc1\targetG0\source-pc\pkgs.gz" 
```

请建议我需要在我的代码中修复什么以获得以下行：

```
 """\\server1\pc1\targetG0\source-pc\pkgs.gz""" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:06:14.830

双引号转义；

```
suppname = """""""\\server1\pc1\targetG0\source-pc\pkgs.gz""""""" 
```

# php - 如何为文件上传按钮设置值

> ID：11756946
> 
> 赞同：0
> 
> 时间：2012-08-01T10:03:56.287
> 
> 标签：php, upload

我有一个应用程序，我们可以在其中选择图像并将其存储，当用户需要更改图像的属性（例如高度、宽度、图像）时，他将去编辑页面并对其进行编辑。但是当用户不更改图像时，如果他只改变高度和宽度然后图像不会显示，因为图像值不会为文件获取/设置......那么我们如何动态设置文件上传按钮的路径......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:06:48.697

答案很简单；你**不能**。

只需检查图像是否已设置。如果是这样，请上传新图像。如果没有，请不要将图像替换为您已有的图像。这是一项安全措施，您不希望能够上传所选网站的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:06:26.827

如果您谈论的是 HTML 文件输入，那么您**不能**以编程方式操作它的内容。这是现代浏览器中的一项安全功能。出于所有意图和目的，您可以将其视为*read-only*。

[HTML 文件输入规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#file-upload-state-%28type=file%29)

# javascript - 使用 setInterval 在表重新加载后维护显示表的隐藏状态

> ID：11756949
> 
> 赞同：0
> 
> 时间：2012-08-01T10:04:07.880
> 
> 标签：javascript, jquery, html

我想要实现的是，使用 PHP 构建一系列表（表的数量是动态的），使用 setInterval 每 5 秒重新加载一次。然后可以单击其中一个表来显示或隐藏它。我已经完成了大部分工作，但我一直坚持维护表格的状态，无论它们是可见的还是隐藏的。每次重新加载表时，表状态都会重置为它返回到原始状态（我认为正在传递一个新的引用，实际上我几乎可以肯定这就是发生了什么）。我尝试将对 div 的引用复制到一个变量并将其与旧的进行比较（我将那部分代码取出，因为它不起作用），但我无法将旧设置放入新标签中。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
        var divStateArray;
        function random_number() {
                var random = Math.floor(Math.random()*110000);
                return random;
        }
        //console.log(divStateArray);
        function reload(state){ 
                 $(".responsecontainer").load('counter.php?randval=' + random_number(), function() {
                                var $rowelements = $(".divRow");
                                var $divRow = $('.divTable').find($rowelements);        
                                        //console.log($divRow);
                                //by copying $divRow it copies a reference/pointer into divStateArray. 
                                //so any changes made to the properties of the div divRow are reflected in
                                //the afore mentioned variable. 
                                divStateArray = $divRow;

                                //merge the old settings in divoldstate with the new references in divStateArray
                                if (state == 'all') {
                                        divStateArray.hide();
                                }

                        }); 
        }
        //refresh the page every x miliseconds 
        var refreshId = setInterval(function() {
                                                        reload();                         
                                                }, 5000);

        $(document).ready(function() {
        //show the spinning logo until the tables are loaded. 
        $(".responsecontainer").html('<img src="/lbadmin/images/ajax-loader.gif" width=32 height=32 />');
        //display the page as soon as possible, then begin reloading every x seconds

        reload('all');
$(document).on('click',".headRow",function(){
                var $divRow = $(this).nextAll(".divRow")
                //console.log($divRow);
                if ($divRow.is(":hidden")) {
                       $divRow.show('fast');

                }                               
                else {
                       $divRow.hide('fast');
                }
        });

});

</script>
</head>
<body>
<p>hello</p>
<div class="responsecontainer" id="time1">
</div>
</br>
</body>
</html> 
```

被加载的表是（暂时和测试它只是一个静态表，但最终这将变为多个动态表 -

```
<?php
echo date("l, F d, Y h:i:s" ,time());
?>
<link rel="stylesheet" type="text/css" href="test.css" />

<p>hello</p>
</br>
<div class="divTable">
        <div class="headRow">
                <div class="divCell">LABEL: vippoo</div>
                <div  class="divCell">IP: 192.168.67.505</div>
                <div  class="divCell">Ports: 80-81</div>
                <div  class="divCell">Method: Layer 4</div>
                <div  class="divCell">Mode: DR</div>
                <div  class="divCell">Protocol: TCP</div>
                <div  class="divCell">Graph: link</div>
        </div>

 <div class="divRow">
                        <div class="divCell">label1</div>
                        <div class="divCell">192.168.66.666</div>
                        <div class="divCell">1</div>
                        <div class="divCell">Drain</div>
                        <div class="divCell">Halt</div>
                        <div class="divCell">uparrow</div>
                        <div class="divCell">graphlink</div>
                </div>
 <div class="divRow">
                        <div class="divCell">label1</div>
                        <div class="divCell">192.168.66.666</div>
                        <div class="divCell">1</div>
                        <div class="divCell">Drain</div>
                        <div class="divCell">Halt</div>
                        <div class="divCell">uparrow</div>
                        <div class="divCell">graphlink</div>
                </div>
 <div class="divRow">
                        <div class="divCell">label1</div>
                        <div class="divCell">192.168.66.666</div>
                        <div class="divCell">1</div>
                        <div class="divCell">Drain</div>
                        <div class="divCell">Halt</div>
                        <div class="divCell">uparrow</div>
                        <div class="divCell">graphlink</div>
                </div>

</div>
</br> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:09:49.680

Why don't you put a `<div>` around the table and show / hide that `<div>`? That way, if you reload the table, the visibility of the table remains the same as that is defined in the `div` around the table.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:17:42.327

为什么不在尝试刷新/重新加载之前检查表的状态？

如果表被隐藏不执行刷新，那么表的状态不会改变。

您的 set-interval 方法可以继续循环，这就是您要添加支票的地方（内部）。

所以你`reload`变成了这样

```
function isTableHidden() { 
    var $divRow = $('.divTable').nextAll(".divRow")
    return ($divRow.is(":hidden"))
}

function reload(state) { 

    if (isTableHidden())
        return; // exit early and don't reload anything

    $(".responsecontainer").load(
        ... rest of your oringal reload code ...
    );
} 
```

# mysql - 嵌套查询出错

> ID：11756951
> 
> 赞同：0
> 
> 时间：2012-08-01T10:04:19.997
> 
> 标签：mysql

这是我的查询：

```
SELECT id, DeviceName, DeviceTypeId
FROM device
WHERE DeviceTypeId LIKE (SELECT DeviceId FROM net_backupdevice WHERE CustomerId = '1'); 
```

执行后显示以下错误。

> ERROR 1242 (21000)：子查询返回多于 1 行

此表 net_backupdevice 返回 2 条记录，我希望将记录信息 id、DeviceName、DeviceTypeId 都存储在设备表中。

所以请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:07:32.450

```
SELECT id, DeviceName, DeviceTypeId FROM device WHERE DeviceTypeId IN (select DeviceId from net_backupdevice where CustomerId = '1'); 
```

请注意 IN 而不是 Like

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:09:55.833

最简单的修复

```
SELECT id, DeviceName, DeviceTypeId 
FROM device 
WHERE DeviceTypeId IN (select DeviceId from net_backupdevice where CustomerId = '1'); 
```

可能这是一个正确的版本

```
SELECT id, DeviceName, DeviceTypeId 
FROM device d inner join net_backupdevice nb on d.DeviceTypeId = nb.DeviceId
WHERE nb.CustomerId = 1; 
```

# linux - 如何正确同时执行多个 f90 代码？

> ID：11756952
> 
> 赞同：0
> 
> 时间：2012-08-01T10:04:26.053
> 
> 标签：linux, bash, fortran90

我正在尝试这样，但肯定它是可以改进的，因为 bash 由于某种原因无法完成......

```
 #!/bash/bin

  cd directory
  gfortran -O3 code1.f90 -o a1.out
  gfortran -O3 code2.f90 -o a2.out
  gfortran -O3 code3.f90 -o a3.out
  gfortran -O3 code4.f90 -o a4.out
  gfortran -O3 code5.f90 -o a5.out
  gfortran -O3 code6.f90 -o a6.out

  ./a1.out & ./a2.out & ./a3.out & ./a4.out & ./a5.out & ./a6.out 

  echo fin 
```

非常感谢！

更新：

我试过这样：cd BC_EQ

```
 nohup sh -c "gfortran -O3 -fopenmp LBM_Re100_N150_Ma01_BC_Eq.f90  -o a1.out && ./a1.out " &
  nohup sh -c "gfortran -O3 -fopenmp LBM_Re100_N150_Ma015_BC_Eq.f90 -o a2.out && ./a2.out " &
  nohup sh -c "gfortran -O3 -fopenmp LBM_Re100_N150_Ma02_BC_Eq.f90  -o a3.out && ./a3.out " &
  nohup sh -c "gfortran -O3 -fopenmp LBM_Re125_N150_Ma01_BC_Eq.f90  -o a4.out && ./a4.out " &
  nohup sh -c "gfortran -O3 -fopenmp LBM_Re125_N150_Ma015_BC_Eq.f90 -o a5.out && ./a5.out " &
  nohup sh -c "gfortran -O3 -fopenmp LBM_Re125_N150_Ma02_BC_Eq.f90  -o a6.out && ./a6.out " & 
```

回声 ja està

但最终吐出：

nohup: 将输出附加到`nohup.out' nohup: nohup: appending output to`nohup.out' 将输出附加到 `nohup.out'

6 个代码中只有 4 个正在执行，并且它们没有像以前那样在屏幕上吐出任何东西.. 为什么？

那么如果我尝试：

```
 #!/bash/bin

   cd BC_EQ

   gfortran -O3 -fopenmp LBM_Re100_N150_Ma01_BC_Eq.f90  -o a1.out && ./a1.out &
   gfortran -O3 -fopenmp LBM_Re100_N150_Ma015_BC_Eq.f90 -o a2.out && ./a2.out &
   gfortran -O3 -fopenmp LBM_Re100_N150_Ma02_BC_Eq.f90  -o a3.out && ./a3.out &
   gfortran -O3 -fopenmp LBM_Re125_N150_Ma01_BC_Eq.f90  -o a4.out && ./a4.out &
   gfortran -O3 -fopenmp LBM_Re125_N150_Ma015_BC_Eq.f90 -o a5.out && ./a5.out &
   gfortran -O3 -fopenmp LBM_Re125_N150_Ma02_BC_Eq.f90  -o a6.out && ./a6.out 

   echo ja està 
```

它说一个错误：致命错误：无法删除临时模块文件'cellconst.mod0'：没有这样的文件或目录致命错误：无法删除临时模块文件'cellconst.mod0'：没有这样的文件或目录致命错误：无法删除临时模块文件'cellconst.mod0'：没有这样的文件或目录致命错误：无法删除临时模块文件'cellconst.mod0'：没有这样的文件或目录致命错误：无法删除临时模块文件' d2q9const.mod0'：没有这样的文件或目录

._·

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:06:44.907

问题在于，您必须在要在后台运行的每个命令之后添加 amersand。这意味着`a6`还：`./a6.out &`。

但我建议你使用`for`自动化这个过程一点点：

```
for i in {1..6}
do
  nohup ./a$i.out &
done 
```

您还可以并行编译：

```
for i in {1..6}
do
  nohup sh -c "gfortran -O3 code$i.f90 -o a$i.out && ./a$i.out" &
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:06:20.063

在最后一个 a6.out 之后添加一个 & 符号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T10:13:23.800

尝试这个 ：

```
 ./a1.out &
 PIDS=$!
 ./a2.out &
 PIDS="$PIDS "$!
 ./a3.out &
 PIDS="$PIDS "$!
 ./a4.out &
 PIDS="$PIDS "$!
 ./a5.out &
 PIDS="$PIDS "$!
 ./a6.out &
 PIDS="$PIDS "$!

 wait $PIDS 
```

更新：

美元！: `man bash` `/Special Parameters`: 扩展为最近执行的后台（异步）命令的进程 ID。

PIDS 是一个变量，它将包含由空格分隔的进程 ID，以便扩展给出等待的参数列表

# c++ - 如何使用多个 v8::Context 正确重用 global_object？

> ID：11756959
> 
> 赞同：6
> 
> 时间：2012-08-01T10:05:02.540
> 
> 标签：c++, v8, embedded-v8

我正在使用 OpenGL 实现重构我的 V8，但遇到了执行上下文的问题。

概念如下：

*   `V8GL::initialize()` 此方法初始化上下文和全局模板。它还使用 glut 的上下文，因为有几个循环也在运行，这些循环也暴露在 JS 上下文中。（例如`glut.mainLoop()`）

*   `V8GL::execute(context, source, url)` 此方法主要在给定上下文中执行字符串。我认为它必须是这种方式，以便以后使用间隔/超时来隔离使用。

**什么不起作用：**

`V8GL::initialize()`还附加内置的 JavaScript 文件并执行它们。这工作得很好。

**简化代码：**

```
V8GL::initialize(...) {
    v8::Persistent<v8::Context> context = v8::Context::New(NULL, globalTemplate);
    v8::Context::Scope context_scope(context);

    // cached for glut mainLoop etc.
    GlutFactory::context_ = v8::Persistent<v8::Context>::New(context);

    execute(context, v8::String::New(...script content...), v8::String::New(...script url path to show for exception stacktraces...);

    // after all the stuff was dispatched to the global context, I want to cache the global object for later usage.
    v8gl::global = v8::Persistent<v8::Object>::New(context->Global());
    context->DetachGlobal();
    context.Dispose();

}

V8GL::execute(context, source, filename) {

    v8::HandleScope scope;
    // Previously, I had v8::Context::Scope(context) in here.
    v8::Local<v8::Script> script = v8::Script::Compile(source, filename);

} 
```

**问题：**

那是初始化。这很好用，所以我自己的库中的东西可以在 JavaScript 执行中使用。但是我想执行另一个文件，该文件是通过参数传递的。所以 main.cpp`main()`看起来像这样。

```
int main(...) {

    v8gl::V8GL::initialize(&argc, argv); // argc and argv required for glut.

    v8::HandleScope scope;
    // This doesn't work:
    // v8::Local<v8::Context> context = v8::Context::GetCurrent();

    // You can't pass NULL as second parameter, so what then?
    v8::Context::New(NULL, v8::ObjectTemplate::New(), v8gl::global);

    // In here, all globals are lost. Why?
    v8gl::V8GL::execute(context, source, filepath);

} 
```

**问题：**

*   我是否必须缓存 global 的 objectTemplate 以供使用`v8::Context::New()`？
*   global_object 必须是持久的还是本地的？
*   我怎样才能重复使用它？`DetachGlobal()`and东西只适用于单一的`ReattachGlobal()`上下文，而不是多个上下文。我的案例需要多个上下文。

# asp.net-mvc - ASP MVC Sitemap 是否有 Image HTML Helper？

> ID：11756966
> 
> 赞同：1
> 
> 时间：2012-08-01T10:05:25.423
> 
> 标签：asp.net-mvc, sitemapprovider, asp.net-mvc-sitemap

我有一个看起来像这样的 ASP MVC 站点地图

```
<mvcSiteMapNode title="Home" imageUrl="home.png" controller="Home" action="Index">
        <mvcSiteMapNode title="Search" controller="Search" imageUrl="magnifying_glass.png" action="Index"> 
```

这些节点都有一个分配给它们的“imageUrl”属性，我想在我的视图中访问它。我知道库中包含一个 SiteMap 助手，它允许我通过

```
@Html.MvcSiteMap().SiteMapTitle() 
```

但是，我看不到任何获取 imgUrl 的方法。在我自己写之前，有人知道这是否已经存在吗？我四处搜索，但在现有库中找不到任何方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T10:30:27.203

好的，我刚刚自己写了一些东西。这很简单。

```
public static class MvcSiteMapImageUrlHelper
    {
        public static MvcHtmlString SiteMapImageUrl(this MvcSiteMapHtmlHelper helper)
        {
            var node = helper.Provider.CurrentNode;

            if (node != null)
            {
                return new MvcHtmlString(node["ImageUrl"]);
            }

            return new MvcHtmlString(string.Empty);
        }
    } 
```

# ios - 如何在 iOS 应用中访问 Google Docs？

> ID：11756970
> 
> 赞同：0
> 
> 时间：2012-08-01T10:05:36.440
> 
> 标签：ios, ios5, google-docs

您好，我想在我的应用程序中访问谷歌文档。任何人都可以帮助我。我使用了 google 数据客户端库，但它适用于 mac OS。我想要它的ios。请帮助

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:14:12.070

[用于 Objective-C](http://code.google.com/p/google-api-objectivec-client/)的Google API 客户端库支持 Google Drive API，并且是在 iOS 和 Mac OS X 应用程序中访问您的文档的推荐库。

该库还包括 Google Drive 的完整示例：

[http://code.google.com/p/google-api-objectivec-client/source/browse/#svn%2Ftrunk%2FExamples%2FDriveSample](http://code.google.com/p/google-api-objectivec-client/source/browse/#svn%2Ftrunk%2FExamples%2FDriveSample)

# php - 在 CakePHP 的 file_put_content() 中指定相对路径服务器

> ID：11756971
> 
> 赞同：2
> 
> 时间：2012-08-01T10:05:39.137
> 
> 标签：php, cakephp, curl, relative-path

我一直在寻找一种将相对路径放入`file_put_content()`PHP 函数的方法。基本上我想将一个文件复制到我的服务器目录之一。这是我到目前为止所做的：

```
function curl($url){
            $ch = curl_init();
            curl_setopt($ch, CURLOPT_URL, $url);
            curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
            $data = curl_exec($ch);
            curl_close($ch);
            return $data;
        }

        $image_new = curl($image);
        file_put_contents("/minimaled_server_path/app/webroot/logo_url",
                          $image_new); 
```

它向我抛出了以下错误：

```
file_put_contents(/minimal_server_path/app/webroot/logo_url)
  [function.file-put-contents]:
failed to open stream: No such file or directory
  [APP/Controller/AppsController.php, line 105] 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:12:29.917

尝试使用 realpath 函数从执行函数的文件中计算路径

```
file_put_contents(realpath("/../../minimaled_server_path/app/webroot/logo_url"), $image_new); 
```

# objective-c - 删除 mapkit 中的边框

> ID：11756973
> 
> 赞同：0
> 
> 时间：2012-08-01T10:05:51.727
> 
> 标签：objective-c, ios, cocoa-touch, mapkit

我正在将 Mapkit 用于 ios 应用程序，并且我想删除国家之间的边界。我找到了一个 javascript 代码，它允许本地使用 google maps api：

```
[
{
featureType: "administrative.country",
stylers: [
  { visibility: "off" }
]
}
] 
```

使用mapkit来做，请问有什么解决方案吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:49:04.870

简短的回答：不，不是真的（除非您设置`maptype`为`MKMapTypeSatellite`）。

长答案：

MapKit 中没有用于移除国家边界的公共 API。而且我想使用私有 API 也是不可能的，因为地图是从静态图像（图块）构建的。

在 iOS 6 中，Apple 构建了自己的地图后端（没有 google 地图），MapKit 现在有了动态渲染。有一个私有框架（VectorKit）用于在引擎盖下进行地图渲染。所以，也许有机会使用 VectorKit 的私有 API 来隐藏 iOS 6 中的边框线。

# java - 如何使用 SWTBot 获取向导描述？

> ID：11756974
> 
> 赞同：1
> 
> 时间：2012-08-01T10:05:54.460
> 
> 标签：java, eclipse, junit, eclipse-plugin, swtbot

如何使用 SWTBot 获取 Eclipse 向导的描述文本？该`wizard.shell.gettext()`方法给出了标题，但我找不到任何获取描述的方法。我需要它来验证描述和向导页面上显示的错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T05:54:38.980

作为一种解决方法，我使用了这段代码

```
public void verifyWizardMessage(String message) throws AssertionError{
    try{
       bot.text(" "+message);
    }catch(WidgetNotFoundException e){
        throw (new AssertionError("no matching message found"));
    }
} 
```

这里 bot 是方法可用的 SWTBot 实例。向导消息会自动在描述字段前添加一个空格，所以我使用`" "+message`. 希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-12T09:41:39.970

为了测试我们的 Eclipse 插件，与我合作的团队在 SWTBot 之上开发了一个自定义 DSL 来表示向导、对话框等。这是一个在我们的案例中运行良好的代码片段（**请注意，这可能与 eclipse 版本相关**，在 eclipse 3.6 和 4.2 中似乎没问题）

```
class Foo {

    /**
     * The shell of your dialog/wizard
     */
    private SWTBotShell shell;

    protected SWTBotShell getShell() {
        return shell;
    }

    protected <T extends Widget> T getTopLevelCompositeChild(final Class<T> clazz, final int index) {
        return UIThreadRunnable.syncExec(shell.display, new Result<T>() {

            @SuppressWarnings("unchecked")
            public T run() {
                Shell widget = getShell().widget;
                if (!widget.isDisposed()) {
                    for (Control control : widget.getChildren()) {
                        if (control instanceof Composite) {
                            Composite composite = (Composite) control;
                            int counter = 0;
                            for (Control child : composite.getChildren()) {
                                if (clazz.isInstance(child)) {
                                    if (counter == index) {
                                        return (T) child;
                                    }
                                    ++counter;
                                }
                            }
                        }
                    }
                }
                return null;
            }
        });
    }

    /**
     * Returns the wizard's description or message displayed in its title dialog
     * area.
     *
     * A wizard's description or message is stored in the very first Text widget
     * (cf. <tt>TitleAreaDialog.messageLabel</tt> initialization in
     * <tt>org.eclipse.jface.dialogs.TitleAreaDialog.createTitleArea(Composite)</tt>
     * ).
     *
     */
    public String getDescription() {
        final Text text = getTopLevelCompositeChild(Text.class, 0);
        return UIThreadRunnable.syncExec(getShell().display, new Result<String>() {

            public String run() {
                if (text != null && !text.isDisposed()) {
                    return text.getText();
                }
                return null;
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-15T18:10:31.693

在 WizardNewProjectCreationPage 的情况下，我使用：

```
bot.textWithLabel("Create Project"); // This title set by page.setTitle("Create Project");
bot.text("Description."); // this is description set by page.setDescription("Description."); 
```

# android - Android：打开数据库时出错

> ID：11756977
> 
> 赞同：0
> 
> 时间：2012-08-01T10:06:01.523
> 
> 标签：android, database, sqlite

我从资产文件夹中获取了这个数据库，但我无法在我的活动中打开它。我的数据库存储在 assets 文件夹中并命名为`MIO_DATABASE.db`：

数据库.java：

```
package it.mi.action.app;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import android.content.Context;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;

public class Database extends SQLiteOpenHelper{

//The Android's default system path of your application database.
private static final String DB_PATH = "/data/data/it.mi.action.app/databases/";
private static final String DB_NAME = "MIO_DATABASE.db";
private SQLiteDatabase myDataBase;
private final Context myContext;

public Database(Context context) {
    super(context, DB_NAME, null, 1);
    this.myContext = context;
}   

public void createDataBase() throws IOException{
    boolean dbExist = checkDataBase();
    if(dbExist){
        //do nothing - database already exist
    }else{

        //By calling this method and empty database will be created into the default system path
        //of your application so we are gonna be able to overwrite that database with our database.
        this.getReadableDatabase();
        try {
            copyDataBase();
        } catch (IOException e) {
            throw new Error("Error copying database");
        }
    }
}

/**
  * Check if the database already exist to avoid re-copying the file each time you open the application.
  * @return true if it exists, false if it doesn't
  */
private boolean checkDataBase(){
    SQLiteDatabase checkDB = null;
    try{
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
    }catch(SQLiteException e){
        //database does't exist yet.
    }
    if(checkDB != null){
        checkDB.close();
    }
    return checkDB != null ? true : false;
}

/**
  * Copies your database from your local assets-folder to the just created empty database in the
  * system folder, from where it can be accessed and handled.
  * This is done by transfering bytestream.
  * */
private void copyDataBase() throws IOException{
    //Open your local db as the input stream
    InputStream myInput = myContext.getAssets().open(DB_NAME);
    // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME;
    //Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);
    //transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer))>0){
        myOutput.write(buffer, 0, length);
    }
    //Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();
}

public void openDataBase() throws SQLException{
    //Open the database
    String myPath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
}

@Override
public synchronized void close() {
    if(myDataBase != null)
        myDataBase.close();
    super.close();
}

@Override
public void onCreate(SQLiteDatabase db) {
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) { }

// Add your public helper methods to access and get content from the database.
// You could return cursors by doing "return myDataBase.query(....)" so it'd be easy
// to you to create adapters for your views.

} 
```

我的活动（mia.java）：

```
package it.mi.action.app;

   import java.io.IOException;
   import android.app.Activity;
   import android.database.SQLException;
   import android.os.Bundle;

   public class mia extends Activity{
   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.mia);
      final Database info=new Database(this);
      try {
            info.createDataBase();
       } catch (IOException ioe) {
            throw new Error("Unable to create database");
       } 
       try {
            info.openDataBase();
       }catch(SQLException sqle){
            throw sqle;
       }
   }
} 
```

该应用程序有效，但在 LogCat 中我看到此错误：

```
08-01 09:37:32.772: E/Database(1774): sqlite3_open_v2("/data/data/it.mi.action.app/databases/MIO_DATABASE.db", &handle, 1, NULL) failed 
```

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:16:47.107

此错误在您第一次运行项目时发生，因为它创建了 sqlite 数据库。检查此链接和@David[在 Android 应用程序中使用您自己的 SQLite 数据库提出的问题](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

他和你有同样的错误：`sqlite3_open_v2(“/data/data/com.testapp/databases/database.db`

我也有同样的问题。但正如@David 所说： `I just realized the issue is not the loading of the database it is actually the first time it is read.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:13:49.983

您应该检查您的数据库是否存在于指定路径中。请参阅[此处](http://www.itsalif.info/content/check-if-database-exist-android-sqlite3openv2-failed)了解更多信息。

此外，请尝试将数据库存储在内部或外部存储器中，因为您只有应用程序`asset`文件夹中的读取权限。请参阅[此处](http://developer.android.com/guide/topics/data/data-storage.html)了解更多信息。

# hibernate - CacheKey.equals 方法中的 Hibernate-Infinispan NullPointerException

> ID：11756990
> 
> 赞同：0
> 
> 时间：2012-08-01T10:06:31.870
> 
> 标签：hibernate, jboss7.x, seam2, infinispan

我正在尝试在我的应用程序中使用 Infinispan 5.1.5 Final。我使用以下环境：

*   JBoss AS 7.1.1 最终版
*   休眠核心 4.1.5.SP1
*   Hibernate Search 4.1.1 最终版
*   Infinispan 5.1.5 决赛
*   JBoss Seam 2.3.0 Beta2

在应用程序启动时，我尝试查看管理员用户帐户是否存在，如果不存在，我会创建它们。如下：

```
private void initDefaultUsersAndRoles(){

        log.info("Initializing Default Roles And Passwords");

        Role adminRole = roleDAO.getByName("administrator");

        if (adminRole == null) {
           //create new admin role
        }

        User admin = userDAO.findByUsername("admin ");

        if (admin  == null) {
            //create new admin user
        }
} 
```

我在 userDAO.findByUsername 方法中遇到异常，如下所示：

```
public User findByUsername(String username) {
        User user;
        try{
          Query q = getEm().createQuery("SELECT e FROM "
                             + entityClass.getName() + " e WHERE username = :username");
                              q.setParameter("username", username );
                              q.setHint("org.hibernate.cacheable", "true" );

                              user = (User) q.getSingleResult();
         }
         catch( NoResultException e ){
             return null;
         }

         return user;
} 
```

执行时

```
user = (User) q.getSingleResult() 
```

我收到以下错误：

```
Caused by: java.lang.NullPointerException
    at org.hibernate.cache.spi.CacheKey.equals(CacheKey.java:81) [hibernate-core-4.1.5.SP1.jar:4.1.5.SP1]
    at org.infinispan.context.SingleKeyNonTxInvocationContext.lookupEntry(SingleKeyNonTxInvocationContext.java:93)
    at org.infinispan.container.EntryFactoryImpl.getFromContext(EntryFactoryImpl.java:204)
    at org.infinispan.container.EntryFactoryImpl.wrapEntryForReading(EntryFactoryImpl.java:80)
    at org.infinispan.interceptors.EntryWrappingInterceptor.visitGetKeyValueCommand(EntryWrappingInterceptor.java:112)
    at org.infinispan.commands.read.GetKeyValueCommand.acceptVisitor(GetKeyValueCommand.java:60)
    at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
    at org.infinispan.interceptors.locking.NonTransactionalLockingInterceptor.visitGetKeyValueCommand(NonTransactionalLockingInterceptor.java:57)
    at org.infinispan.commands.read.GetKeyValueCommand.acceptVisitor(GetKeyValueCommand.java:60)
    at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
    at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
    at org.infinispan.commands.AbstractVisitor.visitGetKeyValueCommand(AbstractVisitor.java:104)
    at org.infinispan.commands.read.GetKeyValueCommand.acceptVisitor(GetKeyValueCommand.java:60)
    at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
    at org.infinispan.interceptors.InvocationContextInterceptor.handleAll(InvocationContextInterceptor.java:132)
    at org.infinispan.interceptors.InvocationContextInterceptor.handleDefault(InvocationContextInterceptor.java:91)
    at org.infinispan.commands.AbstractVisitor.visitGetKeyValueCommand(AbstractVisitor.java:104)
    at org.infinispan.commands.read.GetKeyValueCommand.acceptVisitor(GetKeyValueCommand.java:60)
    at org.infinispan.interceptors.base.CommandInterceptor.invokeNextInterceptor(CommandInterceptor.java:116)
    at org.infinispan.interceptors.base.CommandInterceptor.handleDefault(CommandInterceptor.java:130)
    at org.jboss.as.clustering.infinispan.DefaultEmbeddedCacheManager$ClassLoaderAwareCommandInterceptor.handleDefault(DefaultEmbeddedCacheManager.java:410)
    at org.infinispan.commands.AbstractVisitor.visitGetKeyValueCommand(AbstractVisitor.java:104)
    at org.infinispan.commands.read.GetKeyValueCommand.acceptVisitor(GetKeyValueCommand.java:60)
    at org.infinispan.interceptors.InterceptorChain.invoke(InterceptorChain.java:345)
    at org.infinispan.CacheImpl.containsKey(CacheImpl.java:259)
    at org.infinispan.DecoratedCache.containsKey(DecoratedCache.java:309)
    at org.infinispan.AbstractDelegatingCache.containsKey(AbstractDelegatingCache.java:293)
    at org.hibernate.cache.infinispan.util.CacheAdapterImpl.containsKey(CacheAdapterImpl.java:214) [hibernate-infinispan-4.1.5.SP1.jar:4.1.5.SP1]
    at org.hibernate.cache.infinispan.access.TransactionalAccessDelegate.putFromLoad(TransactionalAccessDelegate.java:87) [hibernate-infinispan-4.1.5.SP1.jar:4.1.5.SP1]
    at org.hibernate.cache.infinispan.entity.TransactionalAccess.putFromLoad(TransactionalAccess.java:52) [hibernate-infinispan-4.1.5.SP1.jar:4.1.5.SP1]
    at org.hibernate.engine.internal.TwoPhaseLoad.doInitializeEntity(TwoPhaseLoad.java:224) [hibernate-core-4.1.5.SP1.jar:4.1.5.SP1]
    at org.hibernate.engine.internal.TwoPhaseLoad.initializeEntity(TwoPhaseLoad.java:134) [hibernate-core-4.1.5.SP1.jar:4.1.5.SP1]
    at org.hibernate.loader.Loader.initializeEntitiesAndCollections(Loader.java:998) [hibernate-core-4.1.5.SP1.jar:4.1.5.SP1]
    at org.hibernate.loader.Loader.doQuery(Loader.java:877) [hibernate-core-4.1.5.SP1.jar:4.1.5.SP1]
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:292) [hibernate-core-4.1.5.SP1.jar:4.1.5.SP1]
    at org.hibernate.loader.Loader.doList(Loader.java:2381) [hibernate-core-4.1.5.SP1.jar:4.1.5.SP1]
    at org.hibernate.loader.Loader.listUsingQueryCache(Loader.java:2226) [hibernate-core-4.1.5.SP1.jar:4.1.5.SP1]
    at org.hibernate.loader.Loader.list(Loader.java:2189) [hibernate-core-4.1.5.SP1.jar:4.1.5.SP1]
    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:470) [hibernate-core-4.1.5.SP1.jar:4.1.5.SP1]
    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:355) [hibernate-core-4.1.5.SP1.jar:4.1.5.SP1]
    at org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:195) [hibernate-core-4.1.5.SP1.jar:4.1.5.SP1]
    at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1248) [hibernate-core-4.1.5.SP1.jar:4.1.5.SP1]
    at org.hibernate.internal.QueryImpl.list(QueryImpl.java:101) [hibernate-core-4.1.5.SP1.jar:4.1.5.SP1]
    at org.hibernate.ejb.QueryImpl.getSingleResult(QueryImpl.java:285) [hibernate-entitymanager-4.1.5.SP1.jar:4.1.5.SP1]
    at com.cano.pxt.dao.UserDAO.findByUsername(UserDAO.java:35) [pxt-ejb.jar:]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_01]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [rt.jar:1.7.0_01]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_01]
    at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_01]
    at org.jboss.as.ee.component.ManagedReferenceMethodInterceptorFactory$ManagedReferenceMethodInterceptor.processInvocation(ManagedReferenceMethodInterceptorFactory.java:72) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:374) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.seam.intercept.EJBInvocationContext.proceed(EJBInvocationContext.java:44) [jboss-seam.jar:2.3.0.Beta2]
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:56) [jboss-seam.jar:2.3.0.Beta2]
    at org.jboss.seam.transaction.RollbackInterceptor.aroundInvoke(RollbackInterceptor.java:28) [jboss-seam.jar:2.3.0.Beta2]
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68) [jboss-seam.jar:2.3.0.Beta2]
    at org.jboss.seam.core.BijectionInterceptor.aroundInvoke(BijectionInterceptor.java:77) [jboss-seam.jar:2.3.0.Beta2]
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68) [jboss-seam.jar:2.3.0.Beta2]
    at org.jboss.seam.core.MethodContextInterceptor.aroundInvoke(MethodContextInterceptor.java:44) [jboss-seam.jar:2.3.0.Beta2]
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68) [jboss-seam.jar:2.3.0.Beta2]
    at org.jboss.seam.persistence.EntityManagerProxyInterceptor.aroundInvoke(EntityManagerProxyInterceptor.java:29) [jboss-seam.jar:2.3.0.Beta2]
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68) [jboss-seam.jar:2.3.0.Beta2]
    at org.jboss.seam.persistence.HibernateSessionProxyInterceptor.aroundInvoke(HibernateSessionProxyInterceptor.java:30) [jboss-seam.jar:2.3.0.Beta2]
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68) [jboss-seam.jar:2.3.0.Beta2]
    at org.jboss.seam.intercept.RootInterceptor.invoke(RootInterceptor.java:107) [jboss-seam.jar:2.3.0.Beta2]
    at org.jboss.seam.intercept.SessionBeanInterceptor.aroundInvoke(SessionBeanInterceptor.java:50) [jboss-seam.jar:2.3.0.Beta2]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_01]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [rt.jar:1.7.0_01]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_01]
    at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_01]
    at org.jboss.as.ee.component.ManagedReferenceLifecycleMethodInterceptorFactory$ManagedReferenceLifecycleMethodInterceptor.processInvocation(ManagedReferenceLifecycleMethodInterceptorFactory.java:123) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:36) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.jpa.interceptor.SBInvocationInterceptor.processInvocation(SBInvocationInterceptor.java:47) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.InitialInterceptor.processInvocation(InitialInterceptor.java:21) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.interceptors.ComponentDispatcherInterceptor.processInvocation(ComponentDispatcherInterceptor.java:53) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.pool.PooledInstanceInterceptor.processInvocation(PooledInstanceInterceptor.java:51) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInCallerTx(CMTTxInterceptor.java:202) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    ... 101 more 
```

我的 persistence.xml 包含以下几行用于休眠查询和二级缓存：

```
<property name="hibernate.cache.region.factory_class" value="org.jboss.as.jpa.hibernate4.infinispan.InfinispanRegionFactory" />
<property name="hibernate.cache.infinispan.cachemanager" value="java:jboss/infinispan/hibernate" /> 
```

我的 User 实体类实现了 equals 和 hashCode 方法。

有谁知道可能出了什么问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:03:49.810

交叉发布到[https://community.jboss.org/message/751304#751304](https://community.jboss.org/message/751304#751304)并解决（发现错误）。

# c - 如何在C中使用extern？

> ID：11756995
> 
> 赞同：1
> 
> 时间：2012-08-01T10:06:43.227
> 
> 标签：c, compilation, declaration, extern

我有这个代码：

```
#include <stdio.h>

extern int x;
void a() {
    int x = 100;
    printf("%d ",x );
    x += 5;
}

void b() {
    static int x = -10;
    printf("%d ", x);
    x += 5;
}

void c(){
    printf("%d ", x);
    x += 2;
}

int main() {
    int x = 10;
    a();
    b();
    c();
    a();
    b();
    c();
    printf("%d ", x);
    getchar();
    return 0;
}

int x = 0; 
```

我确信 extern 在这里声明的事实，我会有一个编译错误 - 但一切都过去了。另外，当 extern 在 C 文件本身内部时，它的含义是什么？它不应该在另一个文件中吗？有没有办法声明这个变量以便不编译？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T10:14:43.777

关键字声明了一个变量，并告诉编译器在`extern`别处有它的定义。在发布代码的情况下， 的定义`x`发生在`main()`. 如果删除`int x = 0;`之后`main()`代码将无法构建（它将编译但由于未定义的符号而无法链接`x`）。

`extern`通常用于在头文件中声明变量（或函数），并在单独的源 ( `.c`) 文件中定义，以使同一变量可用于多个翻译单元（并避免多个定义错误）：

```
/* my.h */
#ifndef MY_HEADER
#define MY_HEADER
extern int x;
#endif

/* my.c */
#include "my.h"
int x = 0; 
```

注意`x`in函数的声明`a()`，`b()`并`main()`隐藏全局变量`x`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T11:02:36.857

您在文件范围内有一个标识符的声明，因此如果在文件范围内不存在该标识符的其他声明，则该标识符将具有*外部链接。*但是，您已经在粘贴的代码中的最后一行的文件范围内定义了标识符。

所以，`extern int x;`

指的是全局定义的：`int x = 0;`在文件的底部。:)

如果您运行此代码，您应该将**x**的值作为 2 和随后的 4，因为外部 x 变量引用main() 之后的*int x=0 。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T10:09:24.967

extern 用于在编译单元中声明一个变量，该变量是在其他编译单元中定义的。

[定义和声明有什么区别？](https://stackoverflow.com/questions/1410563/what-is-the-difference-between-a-definition-and-a-declaration)

对于函数，它是可选的。

阅读：[http ://en.wikipedia.org/wiki/External_variable](http://en.wikipedia.org/wiki/External_variable)

在您的代码中，这三个函数中的每一个都使用另一个“i”。只有 c() 使用全局 x。

# machine-learning - 了解 LibSVM 中的 SVM 参数的好资源

> ID：11756998
> 
> 赞同：1
> 
> 时间：2012-08-01T10:06:48.860
> 
> 标签：machine-learning, artificial-intelligence, data-mining, svm

什么是了解 LibSVM 中的各种参数以及如何使用它们的好资源？我看过一些关于成本参数和伽玛参数、成本权重等的讨论。我无法掌握这些参数的窍门，因为我不知道它们的含义以及在各种情况下应该如何使用它们来改进我的分类器。

是否有全面的资源可以解释这些用于 SVM 分类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T02:06:21.717

libsvm[常见问题解答](http://www.csie.ntu.edu.tw/~cjlin/libsvm/faq.html)很有帮助。就 C 和 gamma 参数而言，C 参数是误差项的成本参数，用于软边距 SVM。伽马参数是高斯 RBF 中的单个参数。可以使用简单的[网格搜索找到两者的最佳值。](http://www.csie.ntu.edu.tw/~cjlin/libsvm/faq.html#/Q9%3a_MATLAB_interface)