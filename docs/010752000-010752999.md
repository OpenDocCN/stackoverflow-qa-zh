# StackOverflow 问答 10752000-10752999

# c++ - 为什么枚举与 Windows 中的位域不兼容？

> ID：10752002
> 
> 赞同：1
> 
> 时间：2012-05-25T09:38:07.603
> 
> 标签：c++, enums, bit-fields

我正在为 Windows 和 Linux 开发 EBDS 协议接口。我正在尝试将协议所需的所有数据打包到结构中，然后将结构本身和所有其他内容写入串行端口，并将其发送到设备。

协议的第一部分是数据打包，其中一个部分是符合这个描述的控制字节：

```
Bit 0: Acknowledgement bit (switchs between 0 and 1 in each send).
Bit 1 to 3: Device Type.
Bit 4 to 6: Message Type.
Bit 7: Unused. 
```

为了处理 tis 控制字节，我创建了两个枚举和一个结构：

```
enum E_DEVICE_TYPE
{
    E_BILL_ACCEPTOR_WITH_SINGLE_ESCROW = 0x0, // 000
    E_RESERVED_1 = 0x1, // 001
    E_RESERVED_2 = 0x2, // 010
    E_RESERVED_3 = 0x3, // 011
    E_RESERVED_4 = 0x4, // 100
    E_RESERVED_5 = 0x5, // 101
    E_RESERVED_6 = 0x6, // 110
    E_RESERVED_7 = 0x7,
};

enum E_MESSAGE_TYPE
{
    E_RESERVED = 0x0,
    E_STANDARD_OMNIBUS_COMMAND = 0x1,
    E_NOT_USED = 0x2,
    E_OMNIBUS_WITH_BOOKMARK_MODE = 0x3,
    E_CALIBRATE_REQUEST = 0x4,
    E_FIRMWARE_DOWNLOAD_REQUEST = 0x5,
    E_AUXILIARY_COMMAND_REQUEST = 0x6,
    E_EXTENDED_COMMANDS = 0x7,
};

#ifndef LINUX
#pragma pack(1)
#endif
struct sControlByte
{
    sControlByte(bool aAcknowledgeFlag, E_DEVICE_TYPE aDeviceType, E_MESSAGE_TYPE aMessageType);

    const bool mACK : 1;
    const E_DEVICE_TYPE mDevice : 3;
    const E_MESSAGE_TYPE mMessageType : 3;
    const bool mUnused : 1;
#ifdef LINUX
}__attribute__((packed));
#else
};
#endif 
```

当我询问 sControlByte 结构的大小时，在 Windows 编译（Visual Studio 2010）上该值等于 6，但在 Linux（使用 gcc 4.2.3）上，该结构的大小为 1，正如预期的那样。

我试图摆脱两个平台上所需属性的对齐，但我不知道我错过了什么¿为什么大小会根据平台而变化？¿我使用正确的属性来控制对齐？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T09:45:21.127

C++ 标准没有指定位域的精确布局。许多编译器将为每个位字段组件使用常规整数，这意味着更快的处理但更大的结构，除非您指定您在 Linux 中所做的不同首选项。

有关 VS2010 使用的算法，请参见[此处](http://msdn.microsoft.com/en-us/library/ewwyfdbe.aspx)。

**编辑**：您的代码有问题。请记住，对于带符号的基本类型，位字段的一位将被符号位消耗。并且您的枚举（像大多数人一样）可能已签名（无论它们是否是实现定义的），因此当您存储并立即发现*该值不存在*`E_EXTENDED_COMMANDS`时，您可能会看到惊喜。`mMessageType`

 *使用最近的编译器，您可以[强制枚举未签名](http://en.wikipedia.org/wiki/C++0x#Strongly_typed_enumerations)并避免此问题。*

# exception - 使用 smart-gwt 时出现 javascript 错误

> ID：10752007
> 
> 赞同：1
> 
> 时间：2012-05-25T09:38:17.367
> 
> 标签：exception, gwt, smartgwt

我正在使用 gwt 和 smart gwt 的组合。但是，每当我的页面加载时，我都会收到以下错误。请帮我解决这个问题。. 请找到随附的屏幕截图以获取相同的弹出错误图像

```
15:06:02.097 [ERROR] [detectfiles] 15:06:02.097:TMR5:WARN:Log:Error:
    'Object required'
    in /sc/modules/ISC_Core.js
    at line 1782
    [c]Element.getOffsetLeft(_1=&gt;[DIVElement]{ID:isc_0})
    [c]Element.getOffset(_1=&gt;&quot;left&quot;, _2=&gt;[ImgButton ID:isc_ImgButton_0], _3=&gt;undef, _4=&gt;false, _5=&gt;true)
    Canvas.getLeftOffset(_1=&gt;undef)
    Canvas.getPageLeft()
    Canvas.$414(null, undef)
    [c]Page.handleEvent(_1=&gt;null, _2=&gt;&quot;resize&quot;, _3=&gt;undef)
    [c]EventHandler.$78p(_1=&gt;&quot;landscape&quot;)
    [c]EventHandler.$hr(_1=&gt;undef)
    callback(undefined=&gt;undef)
        &quot;isc.EH.$hr()&quot;
    [c]Class.fireCallback(_1=&gt;&quot;isc.EH.$hr()&quot;, _2=&gt;undef, _3=&gt;Array[0], _4=&gt;Obj{length:2}, _5=&gt;true) on [Class Timer]
    [c]Timer.$in(_1=&gt;&quot;$ir28&quot;)
    anonymous()
        &quot;isc.Timer.$in('$ir28')&quot;

com.smartgwt.client.core.JsObject$SGWT_WARN: 15:06:02.097:TMR5:WARN:Log:Error:
    'Object required'
    in /sc/modules/ISC_Core.js
    at line 1782
    [c]Element.getOffsetLeft(_1=&gt;[DIVElement]{ID:isc_0})
    [c]Element.getOffset(_1=&gt;&quot;left&quot;, _2=&gt;[ImgButton ID:isc_ImgButton_0], _3=&gt;undef, _4=&gt;false, _5=&gt;true)
    Canvas.getLeftOffset(_1=&gt;undef)
    Canvas.getPageLeft()
    Canvas.$414(null, undef)
    [c]Page.handleEvent(_1=&gt;null, _2=&gt;&quot;resize&quot;, _3=&gt;undef)
    [c]EventHandler.$78p(_1=&gt;&quot;landscape&quot;)
    [c]EventHandler.$hr(_1=&gt;undef)
    callback(undefined=&gt;undef)
        &quot;isc.EH.$hr()&quot;
    [c]Class.fireCallback(_1=&gt;&quot;isc.EH.$hr()&quot;, _2=&gt;undef, _3=&gt;Array[0], _4=&gt;Obj{length:2}, _5=&gt;true) on [Class Timer]
    [c]Timer.$in(_1=&gt;&quot;$ir28&quot;)
    anonymous()
        &quot;isc.Timer.$in('$ir28')&quot;
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:105)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
    at java.lang.Thread.run(Thread.java:662) 
```

![请找到随附的屏幕截图以获取相同的弹出错误图像](../Images/c41e328638462a233eb6368907e17491.png)

![智能 gwt 错误](../Images/3c682826a252a02ef650ee5b20d65307.png)

这是一段代码，我在弹出窗口中使用 TreeGrid

```
private PopupPanel createConsoPopup() {
    final PopupPanel consoPopup = new PopupPanel();
    consoPopup.setAnimationEnabled(true);
    consoPopup.setAutoHideEnabled(true);
    VerticalPanel consoContent = new VerticalPanel();
    VEPConsoTree consoTree = new VEPConsoTree(lineTreeNode, vepConsoTree);
    vepConsoTree = consoTree.getCheckStationTree();
    vepConsoTree.addSelectionChangedHandler(new SelectionChangedHandler() {
        @Override
        public void onSelectionChanged(SelectionEvent event) {
            ((TextBox)flexTable.getWidget(selectedRowNum,         0)).setText(vepConsoTree.getSelectedRecord().getAttribute("vepAreaName")+"_"+vepConsoTree.getSelectedRecord().getAttribute("checkStationName"));
            consoPopup.hide();

        }
    });
    consoContent.add(consoTree);
    consoPopup.add(consoContent);
    return consoPopup;
} 
```

以下是我的 VEPConsoTree 类：

```
package com.renault.veppwrstats.client;

import com.google.gwt.user.client.ui.Composite;
import com.smartgwt.client.types.TreeModelType;
import com.smartgwt.client.widgets.events.DrawEvent;
import com.smartgwt.client.widgets.events.DrawHandler;
import com.smartgwt.client.widgets.tree.Tree;
import com.smartgwt.client.widgets.tree.TreeGrid;
import com.smartgwt.client.widgets.tree.TreeNode;

public class VEPConsoTree extends Composite {

private TreeNode[] lineTreeNode;
private TreeGrid vepConsoTree;
//private DFConstantsForLocale constants = GWT.create(DFConstantsForLocale.class);

/**
 * @param lineTreeNode
 * @param vepConsoTree
 */
public VEPConsoTree(TreeNode[] lineTreeNode, TreeGrid vepConsoTree) {
    super();
    this.lineTreeNode = lineTreeNode;
    this.vepConsoTree = vepConsoTree;
    //Grid grid = chckStatRestrictPanel();
    initWidget(vepConsoTree());
}

/**
 * This function creates checkStation Restriction Panel(tree) along with
 * Select/Unselect All button
 * 
 * @return
 */
private TreeGrid vepConsoTree() {
    return createTreeGrid();
}

/**
 * This function creates CheckStation Restriction Tree
 * 
 * @return {@link TreeGrid}
 */
private TreeGrid createTreeGrid() {
    final TreeGrid chckTreeGrid = new TreeGrid();
    chckTreeGrid.setHeight("269px");
    chckTreeGrid.setWidth("250px");
    chckTreeGrid.setData(createChkStationTree());
    //chckTreeGrid.setSelectionAppearance(SelectionAppearance.CHECKBOX);
    //chckTreeGrid.setShowPartialSelection(false);
    //chckTreeGrid.setCascadeSelection(true);
    chckTreeGrid.setFolderIcon(null);
    chckTreeGrid.setNodeIcon(null);
    chckTreeGrid.setShowConnectors(true);
    chckTreeGrid.setShowHeader(false);
    //addSelectionChangeHndler(chckTreeGrid);
    chckTreeGrid.addDrawHandler(new DrawHandler() {
        public void onDraw(DrawEvent event) {
            chckTreeGrid.getTree().openAll();
        }
    });
    vepConsoTree = chckTreeGrid;
    return chckTreeGrid;
}

/**
 * This function creates a basic tree
 */
private Tree createChkStationTree() {
    Tree chckStationTree = new Tree();
    chckStationTree.setModelType(TreeModelType.PARENT);
    chckStationTree.setRootValue(1);
    chckStationTree.setIdField("id");
    chckStationTree.setOpenProperty("isOpen");
    chckStationTree.setData(lineTreeNode);
    chckStationTree.setParentIdField("parent");
    return chckStationTree;

}

/**
 * @return the vepConsoTree
 */
public final TreeGrid getCheckStationTree() {
    return vepConsoTree;
}

/**
 * @param vepConsoTree the vepConsoTree to set
 */
public final void setCheckStationTree(TreeGrid checkStationTree) {
    this.vepConsoTree = checkStationTree;
}

/**
 * @return the lineTreeNode
 */
public final TreeNode[] getLineTreeNode() {
    return lineTreeNode;
}

/**
 * @param lineTreeNode the lineTreeNode to set
 */
public final void setLineTreeNode(TreeNode[] lineTreeNode) {
    this.lineTreeNode = lineTreeNode;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T22:14:42.140

**简短回答：尽可能不要混合 GWT 和 SmartGWT**

> *我可以混合使用 Smart GWT 和 GWT 小部件吗？*
> 
> 是的，有警告。
> 
> Smart GWT 具有互操作性支持，允许将 Smart GWT 小部件添加到 GWT 容器中，并允许将 GWT 小部件添加到 Smart GWT 容器中，它适用于：
> 
> 向 Smart GWT 的增量迁移，例如将单个、复杂的 Smart GWT 组件（如 Calendar 或 CubeGrid）引入现有 GWT 应用程序
> 
> 在 Smart GWT 中使用复杂的第三方 GWT 小部件，其中 Smart GWT 没有相应的内置功能
> 
> 但是，随意混合 Smart GWT 和 GWT（或其他）组件是没有意义的，也就是说，例如，您不应该将 GWT 小部件放置在 Smart GWT 容器中，而 Smart GWT 容器又位于 GWT 容器中。一般来说，不要混合小部件，除非您需要某个功能。
> 
> 这样做的原因是两个 Ajax 小部件工具包（包括 GWT）可以互操作的最大程度是有限的 - 在 tab 顺序管理、zIndex 管理、像素完美布局、部分等领域没有允许互操作性的标准508 可访问性和多级模式。
> 
> 请注意，在不恰当地混合 GWT 和 Smart GWT 时报告的“错误”（即与这些指南相矛盾）通常会被标记为 WONTFIX，尽管如果核心 GWT 开始支持能够更好地实现 API 的 API，我们将在未来重新审视这一点互操作性。

## 如果你真的需要混合 GWT 和 SmartGWT，这里是 Isomorphic 的指南

> 因为 Smart GWT 的像素完美布局和自动调整大小支持超出了简单 CSS 布局的能力，组件需要知道它们的父元素分配的实际像素宽度；它们不能“流入”未指定大小的 HTML 元素。
> 
> 这里的问题是 GWT 的容器没有提供类似于 Smart GWT 的 Canvas.getInnerWidth() 的 API，在 Smart GWT 中，子组件可以使用它来找出可用空间来绘制自己，从而递归地布置它们的自己的孩子。GWT 容器也不会在调整大小时触发事件，或者当可用宽度因各种原因发生变化时（例如引入滚动条，或 CSS 样式更改添加边框并因此减少空间）。
> 
> 要真正创建一个可扩展的像素完美布局系统，需要大量的父<->子协调和信号。Smart GWT/SmartClient 已经实现了所有必要的钩子，以允许第三方小部件嵌入到 Canvas 中并参与精确的布局，但 GWT 还没有。
> 
> 如果您绝对必须在 GWT 容器中放置 Smart GWT 接口并且希望它填充容器，那么最好的方法是监听窗口级别的调整大小事件并运行您自己的布局计算，最终在最顶层调用 resizeTo()智能 GWT 小部件。然后，嵌套在该最顶层小部件下的所有 Smart GWT 小部件将正常处理布局。
> 
> 注意：不要费心寻找一种方法将 width:100% 插入 Smart GWT 呈现的 HTML，这不会起作用。

来源：[http ://forums.smartclient.com/showthread.php?t=8159](http://forums.smartclient.com/showthread.php?t=8159)

# web-services - Perl/Soap lite：“服务器无法处理请求。对象引用未设置为对象的实例”

> ID：10752009
> 
> 赞同：8
> 
> 时间：2012-05-25T09:38:57.227
> 
> 标签：web-services, perl, soap, soaplite

我正在尝试使用已经存在并且运行良好的 Web 服务。在阅读了许多教程和示例之后，我终于设法从服务器获得了答案：

> 服务器无法处理请求。你调用的对象是空的

WS 只允许您从 NT 登录中获取 ID（一个字符串参数，一个字符串答案）。

这是我的 perl 脚本：

```
#!perl -w
use strict;
use warnings;

use LWP::UserAgent; 
use SOAP::Lite on_action => sub { "$_[0]$_[1]"; };
use LWP::Debug; LWP::Debug::level('+'); SOAP::Lite->import(+trace => 'all');
#use SOAP::Lite  +trace =>  'debug';
#sub SOAP::Transport::HTTP::Client::get_basic_credentials { return ('user' => 'pwd') };
use Data::Dumper;

my $var = SOAP::Data->new(name => 'NTLogin', value => "1234", type =>'s:string');

my $resultLogin = SOAP::Lite
  -> uri('http://xxxxx')
  -> proxy('http://yyyyy/zzzzz/directory.asmx')
  -> on_action( sub { join '/', @_ } )
  -> GetUIDFromNTLogin($var);

print "lets test it...\n\n";

  print $resultLogin;
  print "\nresult():\n";
  print $resultLogin->result(); 
```

这是输出：

```
Launching NT to UID conversion
SOAP::Data::new: ()
SOAP::Lite::new: ()
LWP::UserAgent::new: ()
SOAP::Transport::HTTP::Client::new: ()
SOAP::Lite::call: ()
SOAP::Serializer::envelope: ()
SOAP::Serializer::envelope: GetUIDFromNTLogin SOAP::Data=HASH(0x______)
SOAP::Data::new: ()
SOAP::Data::new: ()
SOAP::Data::new: ()
SOAP::Data::new: ()
SOAP::Data::new: ()
SOAP::Transport::HTTP::Client::send_receive: HTTP::Request=HASH(0x______)
SOAP::Transport::HTTP::Client::send_receive: POST http://yyyyy/zzzzz/directory.asmx
Accept: text/xml
Accept: multipart/*
Content-Length: 534
Content-Type: text/xml; charset=utf-8
SOAPAction: http://tempuri.org/GetUIDFromNTLogin

<?xml version="1.0" encoding="UTF-8"?><SOAP-ENV:Envelope xmlns:xsi="http://www.w
3.org/1999/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/e
ncoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="
http://www.w3.org/1999/XMLSchema" SOAP-ENV:encodingStyle="http://schemas.xmlsoap
.org/soap/encoding/"><SOAP-ENV:Body><namesp1:GetUIDFromNTLogin xmlns:namesp1="ht
tp://tempuri.org"><NTLogin xsi:type="s:string">1234</NTLogin></namesp1:
GetUIDFromNTLogin></SOAP-ENV:Body></SOAP-ENV:Envelope>
LWP::UserAgent::request: ()
LWP::UserAgent::send_request: POST http://yyyyy/zzzzz/directory.asmx
LWP::UserAgent::_need_proxy: Not proxied
LWP::Protocol::http::request: ()
LWP::Protocol::collect: read 441 bytes
LWP::UserAgent::request: Simple response: Internal Server Error
SOAP::Transport::HTTP::Client::send_receive: HTTP::Response=HASH(0x______)
SOAP::Transport::HTTP::Client::send_receive: HTTP/1.1 500 Internal Server Error
Cache-Control: private
Date: Mon, 04 Jun 2012 15:54:47 GMT
Server: Microsoft-IIS/6.0
Content-Length: 441
Content-Type: text/xml; charset=utf-8
Client-Date: Mon, 04 Jun 2012 15:54:47 GMT
Client-Peer: 10.94.61.146:80
Client-Response-Num: 1
Set-Cookie: BIGipServer_____________-http=_________________; path=/
X-AspNet-Version: 2.0.50727
X-Powered-By: ASP.NET

<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://schemas.
xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance
" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body><soap:Fault><faultcode
>soap:Server</faultcode><faultstring>Server was unable to process request. ---&g
t; Object reference not set to an instance of an object.</faultstring><detail />
</soap:Fault></soap:Body></soap:Envelope>
SOAP::Deserializer::deserialize: ()
SOAP::Parser::decode: ()
SOAP::SOM::new: ()
SOAP::Lite::DESTROY: ()
SOAP::Deserializer::DESTROY: ()
SOAP::Transport::DESTROY: ()
SOAP::Transport::HTTP::Client::DESTROY: ()
SOAP::Serializer::DESTROY: ()
SOAP::Data::DESTROY: ()
SOAP::Data::DESTROY: ()
SOAP::Data::DESTROY: ()
SOAP::Data::DESTROY: ()
SOAP::Data::DESTROY: ()
lets test it...

1
result():
SOAP::SOM::DESTROY: ()
SOAP::Data::DESTROY: ()
SOAP::Parser::DESTROY: ()
SOAP::Transport::DESTROY: ()
SOAP::Serializer::DESTROY: ()
SOAP::Deserializer::DESTROY: ()
SOAP::Lite::DESTROY: ()
Press any key to continue . . . 
```

经过一些研究后，我的印象是错误出在 WS 服务器端。然而 WS 似乎工作得很好，所以我猜我的 Perl 脚本有问题，但我不知道是什么......

任何帮助将不胜感激！

谢谢，

***[更新#1]***

以下是 WS 页面给出的示例：

**要求**

```
POST /zzzzz/directory.asmx HTTP/1.1
Host: yyyyy
Content-Type: text/xml; charset=utf-8
Content-Length: length
SOAPAction: "http://xxxxx/GetUIDFromNTLogin"

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <GetUIDFromNTLogin xmlns="http://xxxxx/">
      <NTLogin>string</NTLogin>
    </GetUIDFromNTLogin>
  </soap:Body>
</soap:Envelope> 
```

**回复**

```
HTTP/1.1 200 OK
Content-Type: text/xml; charset=utf-8
Content-Length: length

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <GetUIDFromNTLoginResponse xmlns="http://xxxxx/">
      <GetUIDFromNTLoginResult>string</GetUIDFromNTLoginResult>
    </GetUIDFromNTLoginResponse>
  </soap:Body>
</soap:Envelope> 
```

***[更新#2]***

这是 user1215106 建议的输出：

```
<HTML>
<HEAD><TITLE>An Error Occurred</TITLE></HEAD>
<BODY>
<H1>An Error Occurred</H1>
400 Bad Request
</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T19:48:09.323

请测试下面的代码，让我们知道你的经验和你得到的输出。

```
#!perl -w 

use strict; 
use warnings;
use LWP::UserAgent; 
use SOAP::Lite

use LWP::Debug; LWP::Debug::level('+'); SOAP::Lite->import(+trace => 'all');

print SOAP::Lite 
  -> uri('http://xxxxx') 
  -> proxy('http://yyyyy/zzzzz/directory.asmx') 
  -> on_action(sub { sprintf '"%s"', shift })
  -> on_fault(sub {
       my($soap, $res) = @_; 
       die ref $res ? $res->faultstring : $soap->transport->status, "\n";
     })
  -> GetUIDFromNTLogin(SOAP::Data->type('string')->name('NTLogin')->value(1234))
  -> result; 
```

* * *

**[更新]**

根据您发布的信息，我建议您执行直接`HTTP::Request`代码，而不使用 library `SOAP::Lite`。使用您拥有的确切信息修改以下代码：

```
#!perl -w          

use strict;          
use warnings;

use LWP::UserAgent;
use HTTP::Request;

my $message = '<SOAP-ENV:Envelope xmlns:xsi="http://www.w3.org/1999/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/1999/XMLSchema" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"><SOAP-ENV:Body><namesp1:GetUIDFromNTLogin xmlns:namesp1="http://tempuri.org"><NTLogin xsi:type="s:string">1234</NTLogin></namesp1: GetUIDFromNTLogin></SOAP-ENV:Body></SOAP-ENV:Envelope>';

my $userAgent = LWP::UserAgent->new();
my $request = HTTP::Request->new(POST => 'http://...');
$request->header(SOAPAction => '"http://tempuri.org/GetUIDFromNTLogin"');
$request->content($message);
$request->content_type("text/xml; charset=utf-8");

my $response = $userAgent->request($request);

if ($response->code == 200) {
  print $response->as_string;
}
else {
  print $response->error_as_HTML;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T01:02:35.473

我们都同意**HTTP 500 服务器错误**表明服务器端出现错误。

因此，第一个调用端口是*从 WebService 应用程序*中检索完整的调试日志，并将它们发送给该 WebService 的开发人员/供应商。将此报告为他们实施中的错误。这里不容忍废话。即使您的 Perl 客户端将错误（或丢失）的数据传递给 Web 服务，它们也不应响应 HTTP 500 服务器错误。那是一个错误。错误消息应该围绕有缺陷的客户端请求，并给出一条错误消息，应该是这样的：“啊，看这里。你给我发的是什么？我不是在我可爱的文档中告诉你的吗？ NTUser 必须存在于系统上吗？（或任何问题）再次发送该请求，但这次将它与我可以使用的真实数据一起发送给我。**HTTP 400 范围**。

[如果需要，为了进一步备份您的案例，即这是 Web 服务代码中的缺陷，通过使用SOAPUi](http://www.soapui.org/)重现错误来消除您的 Perl 客户端作为问题的根本原因

然后，您可以与 Web 服务开发人员共享 Soap UI 项目，它应该可以帮助他们轻松找到这个错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T07:03:17.300

> “服务器无法处理请求。对象引用未设置为对象的实例”</p>
> 
> 经过一些研究后，我的印象是错误出在 WS 服务器端。然而 WS 似乎工作得很好，所以我猜我的 Perl 脚本有问题，但我不知道是什么......

这绝对是服务器端错误。这是由于 .NET 服务器代码中的一个可以说是错误的原因。这是一个`System.NullReferenceException`，易于复制：

```
D:\temp :: more nr.cs
class Program {
        static void Main() {
                object o = null;
                string s = o.ToString();
        }
}

D:\temp :: csc /nologo nr.cs

D:\temp :: nr.exe

Unbehandelte Ausnahme: System.NullReferenceException:
Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.
   bei Program.Main() 
```

这与您的 SOAP 客户端没有任何关系，只是客户端通过引发错误消息来暴露错误。

在对另一条回复的评论中，您写道：

> 顺便说一句，xxxxx 是 tempuri.org，我猜它是您编写 .Net WS 时的默认地址。无论如何，这是我在官方示例中可以看到的，但也许我不应该使用它？

这是一个疯狂的猜测，但[另一个讨论中的用户得到了一个`NullReferenceException`，因为他没有为`SOAPAction`header](https://stackoverflow.com/a/5324680/269126)提供正确的 URL 。这是你可以检查的。找出`SOAPAction`标题应该是什么，并确保您进行了相应的设置。当然，如果您可以访问服务器端发生的事情，这将有助于调试，因为最终错误显然是服务器端的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T09:43:55.543

我发现了这个：[http ://www.perlmonks.org/?node_id=719987](http://www.perlmonks.org/?node_id=719987)

这家伙在他们的代码中添加了这一行：

```
sub SOAP::Transport::HTTP::Client::get_basic_credentials { 
    return ('user' => 'password') 
}; 
```

另外，请使用 use strict；使用警告；

移动顶部的 shebang 行 (#!perl)

启用调试：

```
use LWP::UserAgent;
use LWP::Debug;
LWP::Debug::level('+');
SOAP::Lite->import(+trace => 'all'); 
```

确保 LWP::Authen::Ntlm 已安装在您的系统中。

目前您收到“HTTP/1.1 500 Internal Server Error”错误。这意味着服务器代码死了，不能正常工作。它应该向您发送一些有意义的错误消息...

问候，

# c - 多线程下载程序中的段错误

> ID：10752013
> 
> 赞同：2
> 
> 时间：2012-05-25T09:39:08.770
> 
> 标签：c, multithreading, curl, pthreads, segmentation-fault

我正在尝试编写一个简单的程序。它应该从标准输入读取链接，并在单独的线程中下载这些链接。我写了以下代码，但我遇到了分段错误。谁能猜到为什么？

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h> /* memcpy */
#include <curl/curl.h>
#include <pthread.h>
#define NUMTHREADS 3

struct downloadfile {
    char *filename;
    FILE *stream;
};

pthread_mutex_t mutex;

/* writedata: custom fwrite for curl writefunction */
static size_t writedata(void *buffer, size_t size, size_t nmemb, void *stream)
{
    struct downloadfile *out = (struct downloadfile *) stream;
    if (out && !out->stream) {
        out->stream = fopen(out->filename, "w");
        if (!out->stream)
            return -1; /* can't open file to write */
    }
    return fwrite(buffer, size, nmemb, out->stream);
}

/* getfilename: gets a file's name from a link. */
char *getfilename(const char *link)
{
    const char *fnstart = NULL; /* start of filename*/
    size_t len = 0; /* length of filename*/

    for ( ; *link != '\0'; ++link) {
        if (*link == '/') {
            fnstart = link + 1;
            len = 0;
        } else {
            ++len;
        }
    }

    char *filename = malloc(len + 1);
    memcpy(filename, fnstart, len);
    filename[len] = '\0';
    return filename;
}

/* downloadthread: get a line from stdin, and try to donwload it.*/
void *downloadthread(void *ignored)
{

    puts("in a download thread");
    CURL *curl;
    curl = curl_easy_init();
    ssize_t read; /* number of characters read from a line */

    if (!curl) { /* couldn't get curl handle */
        fputs("Couldn't get curl handle", stderr);
        pthread_exit(NULL);
    }

    for (;;) { /* readline and download loop */
        size_t n; /* argument to getline */
        char *lineptr = NULL; /* argument to getline */
        struct downloadfile ofile;

            /* I think I need mutex protect the getline, but I am not sure */
        pthread_mutex_lock(&mutex);
        read = getline(&lineptr, &n, stdin);
        pthread_mutex_unlock(&mutex);

        if (read == EOF)
                    break;

        ofile.filename = getfilename(lineptr);
        curl_easy_setopt(curl, CURLOPT_URL,lineptr);

        /* follow http redirects */
        curl_easy_setopt(curl, CURLOPT_FOLLOWLOCATION ,1L);
        curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, writedata);
        curl_easy_setopt(curl, CURLOPT_WRITEDATA, &ofile);

        curl_easy_perform(curl);

        free(ofile.filename);
        free(lineptr);

        if (ofile.stream)
            fclose(ofile.stream);
    }
    curl_easy_cleanup(curl);
    pthread_exit(NULL);
}

int main()
{
    size_t i;
    int rc;
    pthread_t threads[NUMTHREADS];

    curl_global_init(CURL_GLOBAL_ALL);
    pthread_mutex_init(&mutex, NULL);

    /* fire up threads */
    for (i = 0; i < NUMTHREADS; i++) {
        rc = pthread_create(&threads[i], NULL, downloadthread, NULL);
        if (rc) {
            printf("Error, return code from pthread is %d\n", rc);
            exit(-1);
        }
    }

    /* join all threads before cleaning up */
    for (i = 0; i < NUMTHREADS; i++)
        pthread_join(threads[i], NULL);

    /* cleanup and exit */
    pthread_mutex_destroy(&mutex);
    pthread_exit(NULL);
} 
```

编辑：这是 gdb 的输出。它没有给我太多的想法。

```
[New Thread 0xb61feb40 (LWP 3778)]
[New Thread 0xb57ffb40 (LWP 3779)]
[New Thread 0xb4ffeb40 (LWP 3780)]
[Thread 0xb61feb40 (LWP 3778) exited]
[Thread 0xb57ffb40 (LWP 3779) exited]
[Thread 0xb4ffeb40 (LWP 3780) exited]

Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 0xb7b25b40 (LWP 3773)]
0xb7e02310 in fwrite () from /lib/libc.so.6
(gdb) bt
#0  0xb7e02310 in fwrite () from /lib/libc.so.6
#1  0xb7f6dd53 in ?? () from /usr/lib/libcurl.so.4
#2  0xb7f85a5e in ?? () from /usr/lib/libcurl.so.4
#3  0xb7f86bb5 in ?? () from /usr/lib/libcurl.so.4
#4  0xb7f87573 in curl_easy_perform () from /usr/lib/libcurl.so.4
#5  0x08048d99 in downloadthread (ignored=0x0) at downloader.c:91
#6  0xb7f47ce8 in start_thread () from /lib/libpthread.so.0
#7  0xb7e874de in clone () from /lib/libc.so.6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:50:12.787

当你声明 时`struct downloadfile ofile`，它的`stream`字段被垃圾填充，可能不是 0。当`ofile`被传递给`writedata`回调（作为调用的结果`curl_easy_perform`）时，条件`out && !out->stream`可能为假并导致`writedata`调用`fwrite`未打开的流。

所以只需将`ofile`声明替换为`struct downloadfile ofile = { 0, 0 };`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:56:23.057

```
for ( ; *link != '\0'; ++link) { 
```

如果路径不包含 '/' ：

```
for (fnstart=link ; *link != '\0'; ++link) { 
```

的（循环下方）`if (!fnstart) return BAD_STUFF;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T09:56:34.460

检查`char *getfilename(const char *link)`功能。如果作为参数传递的字符数组不包含任何`/`，则`const char *fnstart`变量将保持为 NULL，您最终将尝试`memcpy`从 NULL 中提取至少一个字节。

# windows-phone-7 - 如何在 Windows Phone 设备中测试 Windows Phone 应用程序

> ID：10752015
> 
> 赞同：2
> 
> 时间：2012-05-25T09:39:19.740
> 
> 标签：windows-phone-7

我开发了一个使用 mspn 服务的 windows phone 应用程序。它在 Windows 手机模拟器上运行良好。现在我想在 Windows Phone 设备中测试它。我有一个 Windows Phone 设备。在 Windows Phone 设备中测试我的应用程序的各个步骤是什么。在 Windows Phone 模拟器和真实设备中测试我的应用程序之间的主要区别是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T09:48:03.843

在模拟器和真实设备上测试的主要区别在于性能，我一直被这个咬住 - 它在强大的台式机上的模拟器上运行良好，但在真实设备上爬行。

要在真实设备上进行测试，您必须在 Microsoft AppHub (http://create.msdn.com) 注册为开发人员并支付 99 美元 - 然后您可以解锁您的手机，这样您就可以将您的应用程序加载到手机上使用 Visual Studio 和 Zune。

HTH - 鲁珀特。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T16:33:09.447

除了性能差距之外，在真实的 Windows Phone 设备中进行的测试还向您展示了您的应用程序在真实场景中的行为方式。

我发现，由于许多因素，互联网连接应用程序的可靠性在真实设备上大大降低。你会看到触发了很多你的模拟器看不到的与网络相关的异常、dns 和超时。在真实设备中进行测试是一种非常健康的做法。

首先，您需要将您的设备“解锁”。您可以通过注册 Microsoft App Hub 来实现。如果碰巧您所在的国家/地区未在 App Hub 开发人员计划中列出，那并不是世界末日。您可以注册一个全球发布商，让您在有限的权限下访问应用程序中心。我列举几个：

地区/名称/网站

亚太地区 **应用程序端口** [http://www.app-exchange.com](http://www.app-exchange.com)

中东欧 **APPA市场** [http://appamarket.com](http://appamarket.com)

中国 **移动电话** [http://wp.mtelnet.com](http://wp.mtelnet.com)

中国 **Device7** [http://www.device7.com](http://www.device7.com)

MEA **Yalla 应用程序** [http://www.yallaapps.com](http://www.yallaapps.com)

开发解锁设备后，您只需插入设备，Visual Studio 就会识别您的手机。

因此，在调试按钮旁边，您将能够在 Windows Phone Emulator 和 Windows Phone Device 之间进行选择。只需运行，Visual Studio 就会将您的应用程序部署到您的设备中。

最后但同样重要的是，确保 Zune 软件已打开。并且您的手机屏幕已解锁。

您会惊讶于进行设备内调试是多么容易。

# java - 在 gwt 中配置 servlet 而不使用 web.xml

> ID：10752016
> 
> 赞同：0
> 
> 时间：2012-05-25T09:39:20.613
> 
> 标签：java, gwt, servlets, configuration

通常，我们通常在 web.xml 文件中为 gwt 应用程序配置我们的 servlet。但是，我有一个问题，是否可以在没有 web.xml 或其他 xml 配置的情况下通过代码配置这些 servlet？

例如，我想在 web.xml 中配置的预热 servlet 中配置 servlet：

```
<listener>
    <listener-class>WarmupServlet</listener-class>
</listener> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T21:54:26.040

您可能想看看 guice 和 guice servlet api：[http ://code.google.com/p/google-guice/](http://code.google.com/p/google-guice/)

这是一个依赖注入框架，您可以在其中绑定任何内容而无需修改 web.xml。您唯一需要的是一个启动监听器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:52:27.563

Servlet 3.0 支持注解，可以从 web.xml 中移动这些配置。建议你看看。

# c# - 如何进行自动身份验证以自动登录网站？

> ID：10752017
> 
> 赞同：0
> 
> 时间：2012-05-25T09:39:21.737
> 
> 标签：c#, .net, cookies, forms-authentication

我需要从我的 Windows 应用程序自动登录到网站。我正在使用 HttpWebRequest 但我想要的是

1.  单击我的应用程序中的按钮。
2.  打开索引页面（登录后的页面）

**原因**：我不想输入用户名和密码，我只想点击按钮和任何浏览器（默认浏览器）打开索引页面（登录后的页面）

**普通示例：**

1.  我打开一个链接“ [http://mail.yahoo.com](http://mail.yahoo.com) ”，它会显示一个页面，询问我的电子邮件地址和密码。
2.  我输入电子邮件 ID 和密码，然后按登录。
3.  它会将我重定向到我的邮箱页面。

**该怎么办 ？**

1.  点击按钮
2.  自动将我的电子邮件 ID 或用户名和密码发送到网站
3.  打开我的邮箱页面。

**暗示 ：**

1.  从 HttpWebRequest 获取 cookie。
2.  将其设置为浏览器。
3.  打开浏览器并传递凭据以自动登录

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T02:41:20.153

我也需要解决同样的问题，问题是你列表中的提示点 2。IE。如何在浏览器中设置 cookie，而不限制自己使用特定的浏览器。我得出的结论是，我需要使用标准的“单点登录”逻辑，我们更新网络服务器以使用此处提到的短期令牌... [http://msdn.microsoft。 com/en-us/library/ms972971.aspx](http://msdn.microsoft.com/en-us/library/ms972971.aspx)

在这种情况下，步骤类似于：
1\. 在应用程序中 - 使用 HttpWebRequest 登录。
2.获取短期令牌（链接建议有效期仅为2秒）
3.用url打开浏览器 `http://MyWebsite>/SignNn?token=xxxxxxxxxxxxxxxxxxxxxxxxxxxx`
4.接下来我需要确认SignOn进程是否可以正确返回cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:56:03.850

我认为您无法以通用方式解决此问题。
在这种情况下通常发生的情况是网页中的表单被提交到 Web 服务器，Web 服务器从表单中读取用户名/密码值，并根据底层用户管理存储库对用户进行身份验证。
您可以为特定站点编写这样的解决方案，通过嗅探器分析身份验证页面中发布的表单，然后自己创建这样的 http 消息并将其发送到相关站点。

# express - 从 triggerio 上传图片到 express.js 失败

> ID：10752021
> 
> 赞同：2
> 
> 时间：2012-05-25T09:39:37.697
> 
> 标签：express, trigger.io

我正在尝试将文件从移动 triggerio 应用程序发布到 nodejs 服务。请求命中 post 方法，但由于请求 obj 中的表单对象为空而失败。（TypeError：无法调用未定义的方法“完成”）

我已经从这篇文章中接受的答案中修改了代码：[使用 Node.js、Express 和 Mongoose 上传图像](https://stackoverflow.com/questions/5149545/uploading-images-using-nodejs-express-and-mongo)

这是我当前的 nodejs 代码：

```
var express = require('express')
  , form = require('connect-form');

var app = express.createServer(
  form({ keepExtensions: true })
);

app.post('/fileupload', function(req, res, next){

  //req. form is nulL
  req.form.complete(function(err, fields, files){
    if (err) {
      next(err);
    } else {
      console.log('\nuploaded %s to %s'
        ,  files.image.filename
        , files.image.path);
      res.redirect('back');
    }
  });

  req.form.on('progress', function(bytesReceived, bytesExpected){
    var percent = (bytesReceived / bytesExpected * 100) | 0;
    process.stdout.write('Uploading: %' + percent + '\r');
  });
});

app.listen(process.env.PORT);
console.log("express started"); 
```

这是我在triggerio中的上传方法：

```
function uploadFile (file){
    forge.request.ajax({
        url: 'http://resttrigger.aykarsi.c9.io/fileupload',
        type: 'POST',
        files: [file],
        fileUploadMethod: 'raw',
        dataType: 'json',
        success: function (data) {
            forge.logging.log("success " + data);
        },
        error: function (e) {
            forge.logging.log("error " + e);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T16:18:23.383

Using `fileUploadMethod: 'raw'` might be the problem here: it means that the request body is just a binary blob, rather than the multipart-encoded form which your node code expects.

For reference, here is a minimal handler that will save uploaded files into `/tmp`:

```
exports.upload = function(req, res){
    var filename = '/tmp/' + new Date().getTime();

    console.log(JSON.stringify(req.files));

    // replace "test" with your actual form field name
    fs.readFile(req.files["test"].path, function (err, data) {
        fs.writeFile(filename, data, function (err) {
            res.send({filename: filename});
        });
    });
}; 
```

# iphone - 我可以使用配置文件配置我的应用程序吗？

> ID：10752025
> 
> 赞同：4
> 
> 时间：2012-05-25T09:39:53.920
> 
> 标签：iphone, ios, configuration

我发现配置文件是配置 iPhone 某些系统级设置的简单方法。我能否以某种方式扩展这些设置，以便使用相同的基础设施（XML 文件格式、配置文件签名、iPhone 上的 mime 类型/扩展识别器等）来配置我自己的应用程序的设置？

我知道 iPhone 的移动设备管理功能，并且它（可能）可以用于此，但与配置文件相比，它似乎过于复杂。

# windows-phone-7 - windows phone 7 中的跨线程访问无效？

> ID：10752026
> 
> 赞同：4
> 
> 时间：2012-05-25T09:39:55.307
> 
> 标签：windows-phone-7

```
void GetResponseCallback(IAsyncResult asynchronousResult)
        {

            try
            {
                HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;
                HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asynchronousResult);
                Stream streamResponse = response.GetResponseStream();
                StreamReader streamRead = new StreamReader(streamResponse);
                string responseString = streamRead.ReadToEnd();

                XmlReader xmlDoc = XmlReader.Create(new MemoryStream(System.Text.UTF8Encoding.UTF8.GetBytes(responseString)));

                while (xmlDoc.Read())
                {
                    if (xmlDoc.NodeType == XmlNodeType.Element)
                    {

                        if (xmlDoc.Name.Equals("ResponseCode"))
                        {
                            responseCode = xmlDoc.ReadInnerXml();

                        }

                    }

                }
                if (Convert.ToInt32(responseCode) == 200)
                {

                   MessageBox.Show("Success");
                }

                // Close the stream object
                streamResponse.Close();
                streamRead.Close();
                // Release the HttpWebResponse
                response.Close();

            }
            catch (WebException e)
            {
                // Error treatment
                // ...
            }
        } 
```

在上面的代码 Messagebox.show 中显示“无效的跨线程访问”。请告诉我如何解决这个问题......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-26T16:20:28.643

```
 Dispatcher.BeginInvoke(() =>
            MessageBox.Show("Your message")
    ); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-25T09:51:41.240

代码与 UI 的任何交互都需要在调度程序线程上进行，来自 HTTP 请求的回调将不会在此线程上运行，因此会出现错误。

你应该可以使用类似的东西

Deployment.Current.Dispatcher.BeginInvoke(() => MessageBox.SHow("Success") );

显示消息框

HTH - 鲁珀特。

# django - 带有 apache virtualhost 的 django 1.4 - 路径问题

> ID：10752031
> 
> 赞同：1
> 
> 时间：2012-05-25T09:40:19.300
> 
> 标签：django, apache, virtualhost

我正在尝试将我的应用程序从 django 1.2 升级到 1.4，我已经使用内置的网络服务器成功测试了它。

但是，我在将其部署为带有 Apache（在 Ubuntu 上）的 VirtualHost 时遇到了问题。

我的`sites-available/default`包含：

```
<VirtualHost *:80>
    ServerName myapplication

    WSGIScriptAlias / /usr/share/myapplication/wsgi.py
    WSGIDaemonProcess myapplication python-path=/usr/share/myapplication:/usr/lib/python2.6/dist-packages

    <Directory /usr/share/myapplication>
    <Files wsgi.py>
      Order deny,allow
      Allow from all
    </Files>
    </Directory>

</VirtualHost> 
```

该文件`/usr/share/myapplication/wsgi.py`包含标准：

```
import os
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "myapplication.settings")
from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

Apache 可以正常启动，但是当我转到`http://myapplication`“500：内部服务器错误”时，Apache 日志显示：

```
ImportError: Could not import settings 'WCReporter.settings' (Is it on sys.path?): No module named WCReporter.settings 
```

我正确使用 WSGIDaemonProcess 吗？django 文档不清楚。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T13:01:21.530

使用以下方法解决了这个问题，来自[http://rc98.net/django_wsgi](http://rc98.net/django_wsgi)。

网站可用/默认：

```
<VirtualHost *:80>
    ServerName myapplication

    WSGIDaemonProcess myapplication
    WSGIProcessGroup myapplication

    WSGIScriptAlias / /usr/share/myapplication/wsgi.py
    <Directory /usr/share/myapplication>
    <Files wsgi.py>
      Order deny,allow
      Allow from all
    </Files>
    </Directory>

</VirtualHost> 
```

和wsgi.py：

```
import os,sys

path = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
if path not in sys.path:
    sys.path.append(path)

path = '/usr/share/myapplication'
if path not in sys.path:
    sys.path.append(path)

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "myapplication.settings")

from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T10:22:30.983

Could you print your path at runtime:

```
#init.py

    import sys
    print sys.path 
```

1.  have you got an init file in the project base dir?
2.  does it work if you import settings instead of myapp.settings?

# c# - WPF ComboBox - 相同的代码不同的行为

> ID：10752034
> 
> 赞同：0
> 
> 时间：2012-05-25T09:40:25.730
> 
> 标签：c#, wpf, combobox

我对 WPF ComboBoxes 有一个非常奇怪的问题：

我有以下 XAML：

```
<ComboBox x:Name="cbSyncPriority">
    <ComboBoxItem Content="Initial" />
    <ComboBoxItem Content="Low"/>
    <ComboBoxItem Content="Medium" />
    <ComboBoxItem Content="High" />
</ComboBox>
<Button x:Name="btnSyncSynchronize" Content="Synchronize" Click="btnSyncSynchronize_Click"/> 
```

以及后面的代码：

```
private void btnSyncSynchronize_Click(object sender, RoutedEventArgs e)
{
    string priority = cbSyncPriority.SelectedItem as string;
    _synchronizationController.Synchronize(priority);
} 
```

现在我有 2 个项目具有完全相同的 XAML 和代码隐藏文件。但由于某种原因，行为有所不同：

项目一：
的值为`cbSyncPriority.SelectedItem`a `String`（等于选中的ComboBoxItem对象的Content值）
![调试器将 SelectedItem 显示为字符串](../Images/793144093fe4d28e2d1312720f12422d.png)

项目2：
的值为`cbSyncPriority.SelectedItem`a `ComboBoxItem`（等于选中的ComboBoxItem 对象）。
![调试器将 SelectedItem 显示为 ComboBoxItem](../Images/7b78cd65ff52ba25609b063a7ee32d5d.png)

为什么我有重复项目的一些背景信息：使用 TFS 我正在使用两个分支：

*   主要开发部门
    *   子开发分公司

“子开发分支”是“主开发分支”的副本，因此代码假设相同。

*   **完全相同的代码怎么可能有不同的行为？**

# javascript - 从 YouTube 嵌入代码中提取视频 ID

> ID：10752035
> 
> 赞同：1
> 
> 时间：2012-05-25T09:40:26.370
> 
> 标签：javascript, jquery, regex, preg-match

我正在尝试移植 PHP`preg_match`表达式以从 Javascript 中的 YouTube 嵌入代码中提取视频 ID。我目前在 PHP 中有这个：

```
$pattern = '%(?:https?://)?(?:www\.)?(?:youtu\.be/| youtube\.com(?:/embed/|/v/|/watch\?v=))([\w-]{10,12})[a-zA-Z0-9\<\>\"]%x';
$result = preg_match($pattern, $url, $matches); 
```

这有效并返回我一个视频ID。我尝试使用以下方法使其在 Javascript 中工作：

```
var reg = /(?:https?://)?(?:www\.)?(?:youtu\.be/|youtube\.com(?:/embed/|/v/|/watch\?v=))([\w-]{10,12})/g;
var matches = uploadVideoEmbedCode.match(reg); 
```

我使用的测试数据是：

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/1NMUDb3Ewhs" frameborder="0" allowfullscreen></iframe> 
```

当我尝试在 javascript 中使用上述正则表达式时，出现以下错误：

> Uncaught SyntaxError: Unexpected token ?

您一如既往的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T09:44:32.330

您需要转义`/`正则表达式中的斜杠，因为它们是分隔符。`\/`每当您想匹配文字时使用`/`：

```
var reg = /(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com(?:\/embed\/|\/v\/|\/watch\?v=))([\w-]{10,12})/g; 
```

另一种选择是使用`new RegExp('...', 'g')`而不是`/.../g`- 但是你需要转义每个反斜杠，这会更烦人：

```
var reg = new RegExp('(?:https?://)?(?:www\\.)?(?:youtu\\.be/|youtube\\.com(?:/embed/|/v/|/watch\\?v=))([\\w-]{10,12})', 'g'); 
```

要最终获得 ID，请使用`var id = reg.exec(yourString)[1]`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T09:43:21.327

您必须在正则表达式中转义正斜杠：`\/`.

# sql-server-2008 - 从 SQL Server 2008 迁移到 Azure

> ID：10752041
> 
> 赞同：0
> 
> 时间：2012-05-25T09:40:44.047
> 
> 标签：sql-server-2008, migration, azure-sql-database

我正在使用 SQLAzureMW v3.8.8，但在生成的脚本中出现很多错误。问题是我不知道每个错误是在哪一行生成的。

> 错误 #: 105 -- 字符串 'CREATE PROCEDURE [dbo].[spAdminParametrosGet] 后的未闭合引号
> 
> 错误 #: 156 - 关键字“ELSE”附近的语法不正确。
> 
> 错误 #：40512 - 此版本的 SQL Server 不支持已弃用的功能“更新或删除中的 NOLOCK 或 READUNCOMMITTED”。
> 
> ' 附近的语法不正确

TSQL 脚本将 sql 存储过程生成为字符串，并使用动态 SQL 创建。一些存储过程里面有注释。

这可能是快速将数据库迁移到 Azure 的原因或任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T20:11:10.997

您想要从 SQL Server 迁移到 SQL Azure 的某些 SP 和其他语句很可能不兼容。以下是支持和不支持的 TSQL 功能的列表：

[http://msdn.microsoft.com/en-us/library/windowsazure/ee336250.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee336250.aspx)

您还没有提到您的源 SQL Server 是什么？由于并非所有 SQL Server 都将支持 SAMQ（3.8 或 4.01）的全部功能

另外，请从下面不支持的列表中匹配您的 TSQL 语句，并检查下面列出的任何一个是否是您的 TSQL 语句的一部分：

[http://msdn.microsoft.com/en-us/library/windowsazure/ee336253.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee336253.aspx)

# windows - 使用目录和 EXE 文件参数的 Windows 命令行

> ID：10752042
> 
> 赞同：1
> 
> 时间：2012-05-25T09:40:44.513
> 
> 标签：windows, command-line

我一直在尝试运行我构建的应用程序并将其输出到文件中。但是，我遇到了执行此操作所需的命令行参数的问题。

这是我使用`ipconfig`.

以下命令有效：

```
ipconfig > output.txt 
```

而这将创建文件，但不会用`ipconfig`输出填充它：

```
start /D "C:\>WINDOWS\system32" ipconfig.exe > output.txt 
```

我认为这`start`是导致这个问题的原因，但我不确定。

**解决方案**

这是设法为我解决问题的代码：

```
 char path[500]; // Create character array
            strcpy (path, "cd "); // Copy 'cd' into the array
            strcat (path, toolLocation); // Copy the path of the tool into the array
            strcat (path, " & ip.exe > output.txt"); // Append on the name of the exe and output to a file
            system (path); // Run the built array 
```

我正在创建一个字符数组，然后附加到它。这里最重要的一点是`&`在系统调用中使用。`and`在执行 .exe 文件之前，这是对目录的第一次 cd'ing。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:53:50.790

在您的命令中，`>`是重定向的输出`start`而不是`ipconfig`. 这就解释了为什么你什么都看不到 -`start`根本没有输出任何东西。

根据对问题的评论，您可以通过以下方式实现目标`ShellExecute`：

```
ShellExecute(
    0, 
    "open", 
    "cmd.exe", 
    "/C ipconfig > output.txt", 
    NULL, 
    SW_HIDE
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T12:35:16.297

错误是这样的：

```
start /D "C:\>WINDOWS\system32" ipconfig.exe > output.txt 
```

应该

```
start /D "C:\WINDOWS\system32" ipconfig.exe > output.txt 
```

没有`>`在路径中。据我所知，尽管`C:\>`在提示中显示`cmd.exe`它*不是*路径名的一部分，并且`>`实际上对于该目的无效。

此外，我强烈建议您使用：

```
start /D "%SystemRoot%\system32" ipconfig.exe > output.txt 
```

* * *

此外，因为 start 创建了一个新的控制台（和新的`stderr`and `stdout`），所以您正在捕获`start`not of的输出`ipconfig`。所以你可能想使用：

```
pushd "%SystemRoot%\system32" & ipconfig.exe > output.txt & popd 
```

但这将尝试写入`output.txt`并且`%SystemRoot%\system32`在大多数系统上都会失败，除非您是管理员。所以给出一个绝对路径或者干脆忽略crud：

```
ipconfig.exe > output.txt 
```

`ipconfig.exe` *始终*在默认系统`PATH`变量中，因此除非管理员已“修复”系统，否则它将起作用，在这种情况下您仍然可以执行以下操作：

```
%SystemRoot%\system32\ipconfig.exe > output.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T11:07:21.290

而不是使用`start`我认为您可能想要使用`cd`来更改目录。

试试这个批处理文件：

```
cd "C:\Program Files\Tools\2012"
ip.exe >output.txt 
```

或者不使用批处理而只使用命令行：

```
"C:\Program Files\Tools\2012" ip.exe >output.txt" 
```

虽然`system32`在`PATH`所以我不确定你为什么要通过它的完整路径访问 ipconfig exe，但这应该可以。

# php - PHPWord 配置问题

> ID：10752043
> 
> 赞同：0
> 
> 时间：2012-05-25T09:40:45.997
> 
> 标签：php, html, ms-word, doc

我在运行 PHPWord 脚本时遇到问题。

我正在尝试运行示例示例。Text.php 运行后不显示任何内容。我检查它成功加载类。[文档](http://phpword.codeplex.com/documentation)。

我希望能够运行任何有此问题的脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:08:44.950

这就是我所做的-

1.  `PHPWord_0.6.2_Beta.zip`从下载[链接下载。](http://phpword.codeplex.com/releases/view/49543)
2.  在 htdocs/core/phpword 下提取 zip。
3.  创建并粘贴了[链接](http://phpword.codeplex.com/documentation)`swap.php`中提到的整个代码
4.  评论说，这是它显示错误。

> ```
> //$myTextElement->setBold();
> //$myTextElement->setName('Verdana');
> //$myTextElement->setSize(22); 
> ```

现在我运行 swap.php 文件并`helloWorld.docx`成功创建。如果需要，您可以在该文件中标记一条消息。如果您有任何疑问，请告诉我。

# html - 有不同的 HTML5 文档类型吗？

> ID：10752051
> 
> 赞同：4
> 
> 时间：2012-05-25T09:40:54.623
> 
> 标签：html, doctype

当我使用 XHTML 编写页面时。我有 3 种类型`doctype`-`strict`和.`transitional``frameset`

我们在 HTML5 中有它们吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T09:44:38.973

不，`HTML5 doctype`

```
<!DOCTYPE html> 
```

是独一无二的，因为它被选为能够[在标准模式下](http://en.wikipedia.org/wiki/Quirks_mode#Mode_differences_and_examples)打开所有当前浏览器（甚至 IE6、afaik）的最短文档类型（字符串） （并且可以用大写/混合大小写编写）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-25T11:25:11.483

html5 文档类型是

```
<!DOCTYPE html> 
```

当您使用新的**HTML5 DOCTYPE时，它会触发浏览器以****符合标准**的模式呈现页面。

**符合标准的模式**

*   在标准兼容模式下，Web 浏览器假定页面已根据声明的 Web 内容规范编写；不符合声明标准的代码可能无法显示，或者可能显示不正确。
*   要触发 Web 浏览器的标准兼容模式，网页必须具有完整的文档类型声明，包括文档类型定义 (DTD) 的 URI。
*   当触发标准兼容模式时，不同浏览器之间的网页显示差异通常较小，因为在创建 Web 浏览器软件时使用相同的集中式 W3C 规范作为参考。

礼貌这个[链接](http://www.motive.co.nz/glossary/quirks-mode.php)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-25T09:41:50.770

不，HTML5 只是 HTML5，没有子集。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-25T09:51:06.733

只有一个：

```
<!DOCTYPE html> 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-05-25T11:44:35.327

HTML 5 需要 doctype 以实现旧版兼容性。它有一个短文档类型`<!DOCTYPE html>`和一个长文档`<!DOCTYPE html SYSTEM "about:legacy-compat">`类型 长文档类型仅适用于无法生成短文档类型的系统。- [HTML 5 规范](http://www.w3.org/TR/2011/WD-html5-20110525/syntax.html#the-doctype)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-05-25T11:42:33.147

HTML5 的 HTML 序列化中的标准[要求的序言](http://dev.w3.org/html5/spec/syntax.html#the-doctype)（即当作为`text/html`）是

```
<!DOCTYPE html> 
```

一些 HTML 生成器，尤其是 XSLT，很难创建上述 doctype。他们可能会使用

```
<!DOCTYPE html SYSTEM "about:legacy-compat"> 
```

在 HTML5 的 XML 序列化中（即作为`application/xhtml+xml`.

请注意，这些变体不像严格的、过渡的或框架集。对于上述每种变体，HTML5 中的有效和无效都是相同的——撇开 HTML 和 XML 语法之间差异的正交问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-26T20:54:58.970

HTML5 只有一个，即：

```
<!DOCTYPE html> 
```

# javascript - “仅 HTTP 支持跨源请求。” 加载本地文件时出错

> ID：10752055
> 
> 赞同：927
> 
> 时间：2012-05-25T09:41:19.753
> 
> 标签：javascript, file, http, three.js, cors

我正在尝试使用 将 3D 模型加载到 Three.js 中`JSONLoader`，并且该 3D 模型与整个网站位于同一目录中。

我收到了`"Cross origin requests are only supported for HTTP."`错误，但我不知道是什么原因造成的，也不知道如何解决。

* * *

## 回答 #1

> 赞同：872
> 
> 时间：2012-05-25T09:42:55.293

我的水晶球说您正在使用`file://`or加载模型`C:/`，这与错误消息保持一致，因为它们不是`http://`

因此，您可以在本地 PC 上安装网络服务器，也可以将模型上传到其他地方，然后使用`jsonp`并将 url 更改为`http://example.com/path/to/model`

起源在[RFC-6454](https://www.rfc-editor.org/rfc/rfc6454)中定义为

```
 ...they have the same
   scheme, host, and port.  (See Section 4 for full details.) 
```

因此，即使您的文件来自同一主机 ( `localhost`)，但只要方案不同 ( `http`/ `file`)，它们就会被视为不同的来源。

* * *

## 回答 #2

> 赞同：691
> 
> 时间：2014-02-06T16:36:27.440

明确一点 - 是的，错误是说您不能将浏览器直接指向`file://some/path/some.html`

以下是一些快速启动本地 Web 服务器以让您的浏览器呈现本地文件的选项

## 蟒蛇2

如果你安装了 Python...

1.  `some.html`使用命令将目录更改为您的文件所在的文件夹`cd /path/to/your/folder`

2.  使用命令启动 Python Web 服务器`python -m SimpleHTTPServer`

这将启动一个 Web 服务器来托管您的整个目录列表`http://localhost:8000`

3.  您可以使用自定义端口 `python -m SimpleHTTPServer 9000`为您提供链接：`http://localhost:9000`

这种方法内置于任何 Python 安装中。

## 蟒蛇 3

执行相同的步骤，但改用以下命令`python3 -m http.server`

## 节点.js

或者，如果您需要更灵敏的设置并且已经使用 nodejs...

1.  `http-server`通过键入安装`npm install -g http-server`

2.  进入你的工作目录，你`some.html`生活的地方

3.  通过发出启动您的 http 服务器`http-server -c-1`

这会启动一个 Node.js httpd，它将目录中的文件作为静态文件提供，可从`http://localhost:8080`

## 红宝石

如果您的首选语言是 Ruby……Ruby 之神说这也可以：

```
ruby -run -e httpd . -p 8080 
```

## PHP

当然 PHP 也有它的解决方案。

```
php -S localhost:8000 
```

* * *

## 回答 #3

> 赞同：176
> 
> 时间：2014-05-20T11:36:24.070

在 Chrome 中，您可以使用此标志：

```
--allow-file-access-from-files 
```

[在这里阅读更多。](https://stackoverflow.com/q/18586921/669677)

* * *

## 回答 #4

> 赞同：72
> 
> 时间：2014-02-20T16:27:12.083

今天跑到这个了。

我写了一些看起来像这样的代码：

```
app.controller('ctrlr', function($scope, $http){
    $http.get('localhost:3000').success(function(data) {
        $scope.stuff = data;
    });
}); 
```

...但它应该看起来像这样：

```
app.controller('ctrlr', function($scope, $http){
    $http.get('http://localhost:3000').success(function(data) {
        $scope.stuff = data;
    });
}); 
```

`http://`唯一的区别是第二个代码片段中缺少。

只是想把它放在那里，以防其他人有类似的问题。

* * *

## 回答 #5

> 赞同：48
> 
> 时间：2016-12-16T03:01:06.907

只需将 url 更改为`http://localhost`而不是`localhost`. 如果您从本地打开 html 文件，您应该创建一个本地服务器来提供该 html 文件，最简单的方法是使用[`Web Server for Chrome`](https://chrome.google.com/webstore/detail/web-server-for-chrome/ofhbbkphhbklhfoeikjpcbhemlocgigb?hl=en). 这将解决问题。

* * *

## 回答 #6

> 赞同：30
> 
> 时间：2017-11-29T06:54:00.190

我将列出**3 种不同的方法**来解决这个问题：

1.  **使用非常轻量级`npm`**[的](https://www.npmjs.com/package/live-server)**包**：使用`npm install -g live-server`. 然后，转到该目录，打开终端并键入`live-server`并按 Enter，页面将在`localhost:8080`. 奖励：默认情况下它还支持热重载。
2.  **使用由 Google 开发的轻量级 Google Chrome[应用程序](https://chrome.google.com/webstore/detail/web-server-for-chrome/ofhbbkphhbklhfoeikjpcbhemlocgigb?hl=en)**：安装应用程序，然后转到 Chrome 中的应用程序选项卡并打开应用程序。在应用程序中将其指向正确的文件夹。您的页面将被提供！
3.  **在 windows 中修改 Chrome 快捷方式**：创建 Chrome 浏览器的快捷方式。右键单击图标并打开属性。在属性中，编辑`target`并`"C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" --disable-web-security --user-data-dir="C:/ChromeDevSession"`保存。然后使用 Chrome 打开页面`ctrl+o`。注意：请勿**使用**此快捷方式进行常规浏览。

**注意：**如果遇到错误，请使用`http://`like 。`http://localhost:8080`

* * *

## 回答 #7

> 赞同：21
> 
> 时间：2016-12-29T22:15:37.417

在 Android 应用程序中——例如，允许 JavaScript 访问资产——`file:///android_asset/`使用你从`setAllowFileAccessFromFileURLs(true)`调用.`WebSettings``getSettings()``WebView`

* * *

## 回答 #8

> 赞同：21
> 
> 时间：2018-10-12T03:11:54.010

使用`http://`or`https://`创建 url

**错误**：`localhost:8080`

**解决方案**：`http://localhost:8080`

* * *

## 回答 #9

> 赞同：16
> 
> 时间：2018-10-01T03:55:35.720

对我来说最快的方法是：对于 Windows 用户在 Firefox 上运行你的文件问题解决了，或者如果你想使用 chrome 对我来说最简单的方法是安装 Python 3 然后从命令提示符运行命令`python -m http.server` 然后转到[http://localhost:8000/](http://localhost:8000/) 然后导航到您的文件

```
python -m http.server 
```

* * *

## 回答 #10

> 赞同：13
> 
> 时间：2018-04-02T17:00:23.463

如果您使用 Mozilla Firefox，它将按预期工作，没有任何问题；

PS 令人惊讶的是，IntenetExplorer_Edge 工作得非常好！！！

* * *

## 回答 #11

> 赞同：12
> 
> 时间：2015-03-04T05:24:18.360

对于那些在 Windows 上没有 Python 或 Node.js 的人来说，仍然有一个轻量级的解决方案：**[Mongoose](http://cesanta.com/mongoose.shtml)**。

您所要做的就是将可执行文件拖到服务器根目录的任何位置，然后运行它。任务栏中将出现一个图标，它会在默认浏览器中导航到服务器。

此外，[Z-WAMP](http://zwamp.sourceforge.net/)是一个 100% 可移植的 WAMP，在单个文件夹中运行，非常棒。如果您需要快速的 PHP 和 MySQL 服务器，这是一个选择。虽然它自 2013 年以来一直没有更新。现代的替代品是[Laragon](https://laragon.org/)或[WinNMP](https://winnmp.wtriple.com/)。我没有测试过它们，但它们是便携的，值得一提。

此外，如果您只想要绝对基础知识 (HTML+JS)，这里有一个不需要安装或下载任何东西的小型 PowerShell 脚本：

```
$Srv = New-Object Net.HttpListener;
$Srv.Prefixes.Add("http://localhost:8080/");
$Srv.Start();
Start-Process "http://localhost:8080/index.html";
While($Srv.IsListening) {
    $Ctx = $Srv.GetContext();
    $Buf = [System.IO.File]::OpenRead((Join-Path $Pwd($Ctx.Request.RawUrl)));
    $Ctx.Response.ContentLength64 = $Buf.Length;
    $Ctx.Response.Headers.Add("Content-Type", "text/html");
    $Buf.CopyTo($Ctx.Response.OutputStream);
    $Buf.Close();
    $Ctx.Response.Close();
}; 
```

这种方法非常简单，它不能显示目录或其他花哨的东西。但它可以很好地处理这些 CORS 错误。

将脚本另存为`server.ps1`并在项目的根目录中运行。它将在它所在的目录中启动 index.html。

* * *

## 回答 #12

> 赞同：10
> 
> 时间：2019-10-09T21:16:17.690

**使用 VS Code 的简单解决方案**

我已经收到这个错误一段时间了。大多数答案都有效。但我找到了不同的解决方案。如果您不想`node.js`在这里处理或任何其他解决方案，并且您正在使用 HTML 文件（从另一个 js 文件调用函数或获取 json api's），请尝试使用[Live Server](https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer)扩展。

它使您可以轻松地打开实时服务器。因为它创建了`localhost`服务器，所以问题正在解决。您只需`localhost`打开一个 HTML 文件并右键单击编辑器并单击`Open with Live Server`.

`http://localhost/index.html`它基本上使用而不是使用加载文件`file://...`。

**编辑**

没有必要有一个`.html`文件。您可以使用快捷方式启动 Live Server。

> 点击`(alt+L, alt+O)`打开服务器并`(alt+L, alt+C)`停止服务器。[在 MAC 上，`cmd+L, cmd+O`并且`cmd+L, cmd+C`]

希望它会帮助某人:)

* * *

## 回答 #13

> 赞同：7
> 
> 时间：2018-08-28T16:07:05.170

我怀疑它已经在一些答案中提到过，但我会稍微修改一下以获得完整的工作答案（更容易找到和使用）。

1.  转到：[https](https://nodejs.org/en/download/) ://nodejs.org/en/download/ 。安装nodejs。

2.  通过从命令提示符运行命令来安装 http-server `npm install -g http-server`。

3.  `index.html`切换到/所在的工作目录`yoursome.html`。

4.  通过运行命令启动您的 http 服务器`http-server -c-1`

打开网络浏览器到`http://localhost:8080` 或`http://localhost:8080/yoursome.html` - 取决于您的 html 文件名。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2014-11-10T14:14:32.793

在使用本地目录中的 json 文件的浏览器上加载 HTML 文件时，我遇到了这个确切的错误。就我而言，我能够通过创建一个允许服务器静态内容的简单节点服务器来解决这个问题。我在[另一个答案](https://stackoverflow.com/a/26845720/267835)中留下了代码。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2016-10-13T16:06:33.730

它只是说应用程序应该在 Web 服务器上运行。我在使用 chrome 时遇到了同样的问题，我启动了 tomcat 并将我的应用程序移到了那里，并且它起作用了。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2017-08-21T11:15:56.977

我建议您使用迷你服务器在 localhost 上运行此类应用程序（如果您不使用某些内置服务器）。

这是一个非常易于设置和运行的程序：

```
https://www.npmjs.com/package/tiny-server 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2016-07-05T00:37:59.713

对于你们所有人`MacOS`...设置一个简单的*LaunchAgent*以在您自己的*Chrome*副本中启用这些迷人的功能...

保存一个`plist`, 命名为*任何*(`launch.chrome.dev.mode.plist`例如) 的`~/Library/LaunchAgents`内容相似的...

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>launch.chrome.dev.mode</string>
    <key>ProgramArguments</key>
    <array>
        <string>/Applications/Google Chrome.app/Contents/MacOS/Google Chrome</string>
        <string>-allow-file-access-from-files</string>
    </array>
    <key>RunAtLoad</key>
    <true/>
</dict>
</plist> 
```

它*应该*在启动时启动..但您可以随时使用终端命令强制它这样做

`launchctl load -w ~/Library/LaunchAgents/launch.chrome.dev.mode.plist`

**多田！**

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2018-06-26T05:54:06.090

没有服务器就无法加载静态本地文件（例如：svg）。如果你的机器上安装了 NPM /YARN，你可以使用“ [http-server](https://www.npmjs.com/package/http-server) ” 设置简单的 http 服务器

```
npm install http-server -g
http-server [path] [options] 
```

> 或者在该项目文件夹中打开终端并输入“hs”。它将自动启动 HTTP 实时服务器。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2020-05-04T15:38:37.013

如果您坚持在`.html`本地运行文件而不是通过网络服务器提供文件，您可以通过使有问题的资源内联可用来防止这些跨源请求的发生。

尝试`.js`通过`file://`. 我的解决方案是更新我的构建脚本以将`<script src="...">`标签替换为`<script>...</script>`. 这是一种`gulp`方法：

1.运行`npm install --save-dev`到包`gulp`，`gulp-inline`和`del`。

2.创建`gulpfile.js`到根目录后，添加以下代码（只需更改适合您的文件路径）：

```
let gulp = require('gulp');
let inline = require('gulp-inline');
let del = require('del');

gulp.task('inline', function (done) {
    gulp.src('dist/index.html')
    .pipe(inline({
        base: 'dist/',
        disabledTypes: 'css, svg, img'
    }))
    .pipe(gulp.dest('dist/').on('finish', function(){
        done()
    }));
});

gulp.task('clean', function (done) {
    del(['dist/*.js'])
    done()
});

gulp.task('bundle-for-local', gulp.series('inline', 'clean')) 
```

3.  运行`gulp bundle-for-local`或更新您的构建脚本以自动运行它。

[您可以在此处](https://stackoverflow.com/a/61595788/3367818)查看我的案例的详细问题和解决方案。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2015-09-07T10:08:20.177

呃。我刚刚找到了一些官方的说法“尝试加载使用dojo / text插件的未构建的远程AMD模块将由于跨域安全限制而失败。（构建版本的AMD模块不受影响，因为对dojo / text的调用被消除了构建系统。）” [https://dojotoolkit.org/documentation/tutorials/1.10/cdn/](https://dojotoolkit.org/documentation/tutorials/1.10/cdn/)

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2016-06-08T03:16:38.303

加载本地文件的一种方法是在项目文件夹中而不是在项目文件夹之外使用它们。在您的项目示例文件下创建一个文件夹，类似于我们为图像创建的方式，并替换使用项目路径以外的完整本地路径的部分，并使用项目文件夹下文件的相对 url。它对我有用

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2018-06-08T11:05:11.243

*   为 java 安装本地网络服务器，例如 Tomcat，对于 php，您可以使用 lamp 等
*   将 json 文件拖放到公共可访问的应用服务器目录中
*   [![项目清单](../Images/a38fc936703d595c11fc21f0da8571ff.png)](https://i.stack.imgur.com/ahzTi.png)

*   启动应用程序服务器，您应该可以从 localhost 访问该文件

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2020-05-04T13:51:26.720

对于 Linux Python 用户：

```
import webbrowser
browser = webbrowser.get('google-chrome --allow-file-access-from-files %s')
browser.open(url) 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2021-10-26T05:59:56.743

如果您正在寻找 Firebase 托管的解决方案，您可以运行

`firebase serve --only hosting`来自[Firebase CLI的命令](https://firebase.google.com/docs/cli#install-cli-windows)

这就是我来这里的目的，所以我想我会把它留在这里帮助喜欢的人。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2016-07-12T05:31:05.193

这有很多问题，我的问题是缺少'/'示例：jquery-1.10.2.js:8720 XMLHttpRequest 无法加载[http://localhost:xxxProduct/getList_tagLabels/](http://localhost:xxxProduct/getList_tagLabels/) 它必须是：[http://localhost:xxx/Product /getList_tagLabels/](http://localhost:xxx/Product/getList_tagLabels/)

我希望这对遇到此问题的人有所帮助。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2018-06-11T14:18:40.373

使用具有以下 href 的锚标记时，我还能够重新创建此错误消息：

```
<a href="javascript:">Example a tag</a>
```

在我的例子中，一个 a 标签被用来获取“指针光标”，并且该事件实际上是由一些 jQuery on click 事件控制的。我删除了 href 并添加了一个适用的类：

```
cursor:pointer;
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2020-04-12T07:31:03.533

当我下载一个页面以供离线查看时遇到了这种情况。

我只需要从所有and标签中删除`integrity="*****"`and`crossorigin="anonymous"`属性`<link>``<script>`

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2021-10-30T21:48:03.213

如果您使用 VS 代码只是尝试在其中加载实时服务器。立即解决了我的问题。

* * *

## 回答 #29

> 赞同：-1
> 
> 时间：2019-12-14T15:51:09.100

科尔多瓦实现了这一点。我仍然无法弄清楚科尔多瓦是如何做到的。它甚至不通过 shouldInterceptRequest。

后来我发现从本地加载任何文件的关键是：myWebView.getSettings().setAllowUniversalAccessFromFileURLs(true);

当你想访问任何http资源时，webview会使用OPTIONS方法进行检查，你可以通过WebViewClient.shouldInterceptRequest通过返回响应来授予访问权限，对于下面的GET/POST方法，你可以只返回null。

* * *

## 回答 #30

> 赞同：-1
> 
> 时间：2020-02-19T05:43:33.203

首先关闭所有chrome实例。

之后按照这个。

我在 mac 上使用了这个命令。

“/Applications/Google Chrome.app/Contents/MacOS/Google Chrome”--allow-file-access-from-files

对于窗户：

[如何在“--allow-file-access-from-files”模式下使用 Chrome 启动 html？](https://stackoverflow.com/questions/18586921/how-to-launch-html-using-chrome-at-allow-file-access-from-files-mode)

# opengl - Applying textures to only one object in opengl

> ID：10752058
> 
> 赞同：0
> 
> 时间：2012-05-25T09:41:34.590
> 
> 标签：opengl, object, textures, scene

I'm programming in c++ in opengl. I'm supposed to make a texture and I made the following code:

```
void makeCheckImage(void){
int i, j, c;

for (i = 0; i < checkImageHeight; i++) {
    for (j = 0; j < checkImageWidth; j++) {
        c = ((((i&0x8)==0)^((j&0x8))==0))*255;
        checkImage[i][j][0] = (GLubyte) c;
        checkImage[i][j][1] = (GLubyte) c;
        checkImage[i][j][2] = (GLubyte) c;
        checkImage[i][j][3] = (GLubyte) 255;
    }
}
}

void init(void){   
    glClearColor(0.0, 0.0, 0.0, 0.0);
    glShadeModel(GL_FLAT);
    glEnable(GL_DEPTH_TEST);

    makeCheckImage();
    glPixelStorei(GL_UNPACK_ALIGNMENT, 1);

    glGenTextures(1, &texName);
    glBindTexture(GL_TEXTURE_2D, texName);

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, 
                    GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, 
                    GL_NEAREST);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, checkImageWidth, 
                 checkImageHeight, 0, GL_RGBA, GL_UNSIGNED_BYTE, 
                 checkImage);
} 
```

my problem is that this beautiful piece of code (or maybe not) is applying textures to the whole scene! And I just want it to apply to one object... Can anybody help me?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:52:53.150

```
glEnable(GL_TEXTURE_2D);
//Draw object
glDisable(GL_TEXTURE_2D); 
```

# android - 用于建模表示多模式用户界面的状态图的可视化编程工具

> ID：10752060
> 
> 赞同：2
> 
> 时间：2012-05-25T09:41:39.553
> 
> 标签：android, microsoft-metro, statechart, scxml, apache-commons-scxml

是否有任何可视化编程工具来建模表示多模式用户界面的状态图？我想构建一个 android 和 windows metro 应用程序，它接收来自触摸和语音的输入。该应用程序通过问卷引导用户在医疗保健场景中进行筛查。用户可以在文本框中输入文本或通过触摸按钮或说话来生成事件。

我发现[状态图](http://www.wisdom.weizmann.ac.il/~harel/SCANNED.PAPERS/Statecharts.pdf)用于模拟反应系统行为，例如最初由其创建者 David Harel 使用的航空电子系统，其任务是为以色列飞机工业公司制造的 LAVI 战斗机设计软件；IAI 清晰准确地指定飞机控制行为。他想以一种直观清晰且数学严谨的方式来指定行为。从那时起，状态图就从单纯的规范语言发展成为[可执行](http://www.wisdom.weizmann.ac.il/~harel/SCANNED.PAPERS/OOStatecharts.pdf)、可编译和可分析的语言。

由于我要构建的应用程序具有复杂的医疗保健逻辑，并且由屏幕流的层次结构组成，该层次结构会根据交互用户的输入发生变化，将操作发送到外部 Web 服务并从外部 Web 服务接收异步事件——所有这些都在用户界面中保持响应性，我想到了用状态图对应用程序逻辑进行建模。但是，我找不到可以让我分别编写应用程序业务逻辑和 UI（不仅仅是屏幕界面组件）的编程工具。例如，如果我想在 html5/ [mxml](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf5f39f-7fff.html)中表示 UI和在[scxml](http://www.w3.org/TR/scxml)中的业务逻辑。

我找到了几个工具，但没有一个与我的应用程序要求相对应。主要是没有***这样一个应用程序的设计示例，将状态图中的行为和某种形式的标记语言的 UI 表示明确分离***。我的发现：

*   [IBM Rational Statemate](http://www.ibm.com/software/awdtools/statemate/)是一个图形化设计、模拟和原型设计工具，用于快速开发复杂的嵌入式系统
*   [IBM Rational Rhapsody](http://www.ibm.com/developerworks/rational/products/rhapsody/) - 基于 UML 的建模环境，是系统工程师的可视化开发环境，具有 UML 状态图
*   [Apache scxml 编辑器：仅用于建模scxml](http://commons.apache.org/sandbox/gsoc/2010/scxml-eclipse/)的 Gsoc 项目
*   [Qt 状态机框架](http://qt-project.org/doc/qt-4.8/statemachine-api.html)，但没有分离行为和用户界面的状态图
*   [W3C Multimodal Architecture](http://www.w3.org/TR/mmi-arch)也有一些设计理念，以及[scxml+xhtml](http://www.speechtek.com/East2006/Presentations/Wed/Uris_Shubert/11%20AM%20Session/larson01.pdf)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-06-16T09:48:32.990

你真的应该看看[http://www.statecharts.org](http://www.statecharts.org)。它带有一个编辑器、验证、几个不同目标语言的生成器和一个很好的工作模拟环境。

语义接近 David Harel 的理论工作，并且是开源的。

前段时间，基于 YAKINDU SCT 第 1 版（当前版本为 2.6.2），我完成了类似主题的学士论文。找到以下论文介绍：[https ://vimeo.com/13440814](https://vimeo.com/13440814)

进一步查找 YAKINDU SCT 第 2 版的以下视频以了解功能概述：[https](https://www.youtube.com/watch?v=uO6MASCBPrg) ://www.youtube.com/watch?v=uO6MASCBPrg 此外，您将在 youtube 上找到大量教程：https: [//www.youtube。 com/watch?v=bhru1n3ZsFo&list=PLmHMvhX5wK_aohX5sOeAMogFDwlc3gJYR](https://www.youtube.com/watch?v=bhru1n3ZsFo&list=PLmHMvhX5wK_aohX5sOeAMogFDwlc3gJYR)

从您的角度来看，缺点可能是 SCT 目前不支持 SCXML 并使用其自己的格式。但由于它是开源的并且基于 Eclipse 建模技术 (EMF)，因此替换序列化并保留为 SCXML 格式可能并不是什么大问题。

# c# - XNA、游戏时间和持续火力

> ID：10752061
> 
> 赞同：1
> 
> 时间：2012-05-25T09:41:42.953
> 
> 标签：c#, time, xna, controls

我正在尝试定义持续射击期间射击之间的时间跨度，但是通过以下尝试得到了奇怪的行为：

```
 public void Shoot(GameTime time)
    {
        bullets.Add(new Bullet("bullet", position, angle, content, this, bullets) );
        shotTimer = time.TotalGameTime.Milliseconds;
    }
    public void ShootContinuous(GameTime time)
    {
        if (time.TotalGameTime.Milliseconds - shotTimer > 50)
            this.Shoot(time);
    } 
```

上面是这样调用的：

```
if (newMouseState.LeftButton == ButtonState.Pressed)
{
    if (oldMouseState.LeftButton == ButtonState.Released)
    {
        player.Shoot(time);
        gui.ProcessClick(newMouseState);
    }
    else
    player.ShootContinuous(time);
} 
```

好吧，行为是这样的：按住按钮时，它会以 4-10 之间的随机子弹数进行齐射，然后什么都不做，直到我重新按下按钮，稍等片刻，然后再次射击。

有人知道这有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:45:28.003

如果我正确理解代码，您应该使用`TotalMilliseconds`, not 。`Milliseconds`

# android - 单击提交按钮后在另一个页面中显示表单数据

> ID：10752066
> 
> 赞同：2
> 
> 时间：2012-05-25T09:42:04.497
> 
> 标签：android, string, android-activity, textview

我对 android 很陌生，我创建了一个带有 3 个字段的表单。我想在下一个屏幕或 TextView 的同一屏幕中显示这些字段数据，但我失败了....以下是我的 xml 代码。

```
 <?xml version="1.0" encoding="utf-8"?>
    <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ScrollView01"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:scrollbars="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

     <TextView  
        android:id="@+id/TextViewTitle"  
        android:layout_width="wrap_content"  
        android:layout_height="wrap_content"  
        android:text="@string/feedbacktitle"  
        android:textSize="10pt"> 
    </TextView>  
    <EditText  
    android:id="@+id/EditTextName"  
    android:layout_height="wrap_content"  
    android:hint="@string/feedbackname"  
    android:inputType="textPersonName"  
    android:layout_width="fill_parent">  
   </EditText> 
    <EditText  
    android:id="@+id/EditTextEmail"  
    android:layout_height="wrap_content"  
    android:hint="@string/feedbackemail"  
    android:inputType="textEmailAddress"  
    android:layout_width="fill_parent">  
    </EditText> 

    <EditText  
    android:id="@+id/EditTextFeedbackBody"  
    android:layout_height="wrap_content"  
    android:hint="@string/feedbackbody"  
    android:inputType="textMultiLine"  
    android:lines="5"  
    android:layout_width="fill_parent">  
   </EditText> 

    <Button  
    android:id="@+id/ButtonSendFeedback"  
    android:layout_height="wrap_content"  
    android:text="@string/feedbackbutton" 
    android:onClick="sendfeedback" 
    android:layout_width="fill_parent">  
   </Button>  
    <TextView  
    android:id="@+id/TextViewResult"  
    android:layout_width="wrap_content"  
    android:layout_height="wrap_content"    
    android:textSize="10pt"> 
    </TextView>  
    </LinearLayout>  
    </ScrollView> 
```

以下是活动类代码

```
package com.Delegence.FormHandling;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class FormHandlingActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

}
TextView Text = (TextView)findViewById(R.id.TextViewResult);
public void sendFeedback(View button) { 

     EditText nameField = (EditText) findViewById(R.id.EditTextName);  
    String name = nameField.getText().toString();  

     EditText emailField = (EditText) findViewById(R.id.EditTextEmail);  
    String email = emailField.getText().toString();  

     EditText feedbackField = (EditText) findViewById(R.id.EditTextFeedbackBody);  
    String feedback = feedbackField.getText().toString();
    Text.setText(name);
} 
```

请指导我如何查看这些表单字段值。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:43:18.240

在相同的活动中显示它应该可以工作......

```
TextView text = (TextView)findViewById(R.id.TextViewResult);

EditText emailField = (EditText) findViewById(R.id.EditTextEmail);

String email = emailField.getText().toString();  

text.setText(email ); 
```

要显示在其他人中，`activity`您需要通过`String`类似的方式 传递`email`给另一个`activity`人`intent`并设置`textview`

1----------------

使用意图将数据发送到另一个`activity`.

```
Intent i = new Intent(this, ActivityTwo.class);

i.putExtra("Value1", "This value one for ActivityTwo ");

i.putExtra("Value2", "This value two ActivityTwo"); 
```

2------------------------------------------------

```
Bundle extras = getIntent().getExtras();
if (extras == null) {
        return;
        }
// Get data via the key
String value1 = extras.getString(Intent.EXTRA_TEXT);
if (value1 != null) {
    // Do something with the data
} 
```

[http://www.vogella.com/articles/AndroidIntent/article.html](http://www.vogella.com/articles/AndroidIntent/article.html)

# user-controls - 如何从 devexpress aspxpopupcontrol 打开模式 aspx 页面

> ID：10752069
> 
> 赞同：0
> 
> 时间：2012-05-25T09:42:20.160
> 
> 标签：user-controls, modal-dialog, devexpress

我有一个按钮，它应该在模式窗口中从我的项目中打开一个 Web 表单。如何使用 devexpress 弹出控件实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:46:52.423

使用[弹出控件 - 内容 URL](http://demos.devexpress.com/ASPxperienceDemos/PopupControl/ContentUrl.aspx)在控件中显示另一个 Web 表单。在按钮的客户端单击事件上打开弹出窗口。

例子：

```
<dx:ASPxPopupControl ID="popup" runat="server" ContentUrl="~/ContentPageWithTextBox.aspx"
        Top="100" ClientInstanceName="clientPopup" CloseAction="CloseButton">
        <ClientSideEvents Shown="OnShown" />
    </dx:ASPxPopupControl> 
```

检查此[搜索结果](http://search.devexpress.com/?q=ASPxPopupControl%20contenturl&p=T4%7CP5%7C35&d=16)
**参考：**
[如何使用指定的 ContentUrl 在 ASPxPopupControl 中操作客户端对象](http://www.devexpress.com/Support/Center/e/E3928.aspx)- 也检查示例。

希望这有助于...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T20:46:15.080

请参阅[ASPxPopupControl](http://demos.devexpress.com/ASPxperienceDemos/PopupControl/ModalWindow.aspx)在线演示和[代码中心示例](http://search.devexpress.com/?q=ASPxPopupControl&p=T4%7CP5%7C35&d=16)以了解有关如何完成此任务的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T10:50:37.380

这是示例代码：

```
<input id="openBtn" type="button" value="Open popup" 
       onclick="myPopup.SetContentUrl('http://www.google.com');myPopup.Show();" />                

<dx:ASPxPopupControl runat="server" ClientInstanceName="myPopup" Modal="True" 
                     CloseAction="CloseButton" Width="500px" Height="400px"/> 
```

[ASPxClientPopupControl 成员](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxPopupControlScriptsASPxClientPopupControlMembersTopicAll)
[ASPxPopupControl 成员](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxPopupControlASPxPopupControlMembersTopicAll)

# mysql - 选择内部插入语句 - MySQL 游标

> ID：10752071
> 
> 赞同：0
> 
> 时间：2012-05-25T09:42:27.460
> 
> 标签：mysql, stored-procedures, cursor, insert-select, select-insert

我尝试了一些，但我找不到解决方案，不知何故我设法得到了这个结果。

这是查询：

```
DELIMITER ##
CREATE PROCEDURE test1(start_date DATE,end_date DATE)
BEGIN
   DECLARE done INT DEFAULT FALSE;   
   DECLARE a INT;
   DECLARE present INT;
   DECLARE total INT;
   -- Declare the cursor
   DECLARE id CURSOR
   FOR
   SELECT staff_id FROM ost_staff;
   DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;
   -- Open the cursor
   DROP TEMPORARY TABLE IF EXISTS reports;
   CREATE TEMPORARY TABLE IF NOT EXISTS reports
   (
    staff_id INT(10),
    present INT(10),
total INT(10)
   );
   OPEN id;
   read_loop: LOOP
   FETCH id INTO a;
   IF done THEN
   LEAVE read_loop;
   END IF;
   INSERT INTO reports(staff_id,present,total)
   SELECT (COUNT(I.interval_start)) AS present, DATEDIFF(DATE_ADD(end_date,INTERVAL 1     DAY),start_date) AS total
    FROM effort_frequency E 
RIGHT OUTER JOIN time_intervals I ON I.interval_start = E.log_date 
AND E.staffid=a AND E.log_date BETWEEN start_date AND end_date
LEFT OUTER JOIN ost_holidays H ON H.holiday_date = I.interval_start
WHERE DATE_FORMAT(I.interval_start,'%a') = 'Sun' OR H.holiday_date = I.interval_start OR E.total_effortspent IS NOT NULL;

   -- Close the cursor   
   END LOOP;
   CLOSE id;
END ## 
```

我得到以下结果：

```
+----------+-----------------+
| staff_id | present | total |
+----------+---------+-------+
|  (NULL)  |   23    |  24   |
|  (NULL)  |   22    |  24   |
+----------+---------+-------+ 
```

我正在为 staff_id 获取（NULL），我怎样才能获得 staff_id？我尝试在插入语句中使用声明的变量'a'，但当时我只得到了staff_id，我没有得到其他2个字段，我无法从select inside insert语句中获取staff_id，因为有一些问题。

现在我需要将变量'a'中的staff_id插入到该临时表中。

注意：我对这个存储过程真的很陌生，但不知何故管理到这里，如果我能得到一些关于如何在插入中使用 Select 的详细信息，包括解决方案，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:49:27.347

尝试这个 -

```
SELECT a, (COUNT(I.interval_start)) AS present, DATEDIFF(DATE_ADD(end_date,INTERVAL 1     DAY),start_date) AS total 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:45:43.900

您`INSERT`需要三个字段，但您的`SELECT`语句仅选择两个：`present`和`total`.

尝试：

```
 SELECT E.staffid, (COUNT(I.interval_start)) 
 AS present, DATEDIFF(DATE_ADD(end_date,INTERVAL 1 DAY),start_date) AS total 
```

# node.js - Node.js 和解析协议缓冲区时出错

> ID：10752074
> 
> 赞同：1
> 
> 时间：2012-05-25T09:42:38.367
> 
> 标签：node.js, protocol-buffers

下面是我尝试从 node.js 解析协议缓冲区的代码。它在 python 中工作，但在 node.js 中我似乎遇到了问题。我最担心的是 1) 我得到的有效载荷是否正确？2）我是否使用协议缓冲区来正确解析有效负载。

当我登录到控制台时，有效负载是 sys 所以我假设这是请求中的 prot 缓冲区。然后我通过调用解析缓冲区：

```
 bid_request.parse(payload); 
```

这是代码片段和错误：

```
var buffertools = require('buffertools');
var Schema = require('protobuf').Schema; 
var schema = new Schema(fs.readFileSync('/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbNodejsServer/test.desc'));

app.post('/n/test', function(req, res){

      var payload = [];
      req.on('data', function (data) {
        payload.push(data);
      });
      console.log(payload);
      req.on('end', function () {
        var payload = buffertools.concat.apply(null, payload);
        console.log(payload);
        console.log('--------------');
        var bid_request = schema['BidRequest'];

        var brr_fu = bid_request.parse(payload);

        // rest of code here

      });

});

libprotobuf ERROR google/protobuf/message_lite.cc:123] Can't parse message of type "BidRequest" because it is missing required fields: id

undefined:1
urn f.call(self,
      ^
Error: Malformed message
    at Function.parse (unknown source)
    at IncomingMessage.<anonymous> (/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbNodejsServer/bidder.js:80:31)
    at IncomingMessage.emit (events.js:64:17)
    at HTTPParser.parserOnMessageComplete [as onMessageComplete] (http.js:130:23)
    at Socket.ondata (http.js:1506:22)
    at TCP.onread (net.js:374:27) 
```

我也很好奇为什么有效载荷是`<SlowBuffer>`

# postgresql - postgres 无法访问服务器配置文件：权限被拒绝

> ID：10752075
> 
> 赞同：3
> 
> 时间：2012-05-25T09:42:46.027
> 
> 标签：postgresql, osx-lion, postgresql-9.1

这让我感到困惑（试图在 MacOS Lion 上设置 postgres）：

```
delirium:$ sudo ls -al /usr/local/pgsql/data/
total 64
drwx------  15 postgres  postgres    510 25 May 10:36 .
drwxr-xr-x@ 13 103       103         442 25 May 10:35 ..
-rw-------   1 postgres  postgres      4 25 May 10:36 PG_VERSION
drwx------   5 postgres  postgres    170 25 May 10:36 base
drwx------  41 postgres  postgres   1394 25 May 10:36 global
drwx------   3 postgres  postgres    102 25 May 10:36 pg_clog
-rw-------   1 postgres  postgres   3652 25 May 10:36 pg_hba.conf
-rw-------   1 postgres  postgres   1631 25 May 10:36 pg_ident.conf
drwx------   4 postgres  postgres    136 25 May 10:36 pg_multixact
drwx------   2 postgres  postgres     68 25 May 10:36 pg_stat_tmp
drwx------   3 postgres  postgres    102 25 May 10:36 pg_subtrans
drwx------   2 postgres  postgres     68 25 May 10:36 pg_tblspc
drwx------   2 postgres  postgres     68 25 May 10:36 pg_twophase
drwx------   4 postgres  postgres    136 25 May 10:36 pg_xlog
-rwxr-xr-x   1 postgres  postgres  16879 25 May 10:36 postgresql.conf
delirium:$ /usr/local/pgsql/bin/postgres -D /usr/local/pgsql/data
postgres cannot access the server configuration file "/usr/local/pgsql/data/postgresql.conf": Permission denied 
```

输出不是显示 postgres 是 的所有者**吗**`postgresql.conf`？那么为什么它不能访问该文件呢？

我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T11:06:43.827

诊断权限被拒绝错误的最快方法是以该用户身份登录 (`su`或`sudo`) 并尝试访问`cat`该文件。

如果这是权限被拒绝并且未找到文件，我猜 postgres 用户没有对父目录之一获得执行权限，它可能是 3 个中的任何一个：`/usr/local/pgsql/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-23T23:56:33.490

```
sudo -u postgres /usr/local/pgsql/bin/postgres -D /usr/local/pgsql/data 
```

...假设 postgres 是使用默认用户设置的`postgres`

# ios - Facebook iOS 查询

> ID：10752076
> 
> 赞同：1
> 
> 时间：2012-05-25T09:42:52.123
> 
> 标签：ios, facebook

```
- (void)fbDidLogin {
    //some best practice boiler plate code for storing important stuff from fb
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:[facebook accessToken] forKey:@"FBAccessTokenKey"];
    [defaults setObject:[facebook expirationDate] forKey:@"FBExpirationDateKey"];
    [defaults synchronize];

    //now load all my friend's birthdays
    NSMutableDictionary * params = 
                         [NSMutableDictionary dictionaryWithObjectsAndKeys:
                         @"select birthday, name, uid, pic_square from user where uid in (select uid2 from friend where uid1=me()) order by name", 
                         @"query",
                         nil];

    [self.facebook requestWithMethodName: @"fql.query" andParams: params andHttpMethod: @"POST" andDelegate: self];
} 
```

这只会让我得到第一个朋友的详细信息。我如何获得所有朋友的详细信息。

# sql-server-2005 - MSSQL2005 TRIGGER 在 INSERT 上创建文件

> ID：10752079
> 
> 赞同：0
> 
> 时间：2012-05-25T09:42:56.730
> 
> 标签：sql-server-2005, csv, triggers, insert

我需要一个创建触发器的示例，该触发器将在将行插入表中时创建一个 CSV 文件。

我有一个“测试”表，其中包含“ID”、“B”和“C”字段。

我需要一个触发器，每次将一行插入表中时，都会创建带有 ID;B;C 内容的 ID.CSV。

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T11:45:38.373

这可以通过在 Sql server 集成服务中制作一个包然后在您的触发器中调用此包来实现。

检查这个链接

[http://cavemansblog.wordpress.com/2009/04/17/ssis-export-data-from-sql-server-2005-to-excel/](http://cavemansblog.wordpress.com/2009/04/17/ssis-export-data-from-sql-server-2005-to-excel/)

# java - Java 高内存使用率

> ID：10752080
> 
> 赞同：1
> 
> 时间：2012-05-25T09:42:57.710
> 
> 标签：java, memory-management, memory-leaks

我的 Java 应用程序有问题。昨天，当我部署它进行测试运行时，我们注意到我们的机器开始交换，即使这不是一个真正的怪物应用程序，如果你明白我的意思的话。无论如何，我检查了*top*的结果，发现它消耗了大约 100mb 的内存（顶部的 RES）我试图分析内存并检查是否存在内存泄漏，但我找不到。有一个未关闭的 PreparedStatement，我已修复，但意义不大。我尝试设置最小和最大堆大小（有人说不需要最小堆大小），但没有任何区别。

这就是我现在运行它的方式：

```
#!/bin/sh

$JAVA_HOME/bin/java -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=9025 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false -XX:MaxPermSize=40m -Xmx32M -cp ./jarName.jar uk.co.app.App app.properties 
```

这是*top*的结果：

```
PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+ COMMAND                                                                                                                                                                          
16703 root      20   0  316m 109m 6048 S  0.0 20.8   0:14.80 java 
```

我不明白的是我配置了最大 PermSize 和最大堆大小，它们加起来是 72mb。够了，应用程序运行良好。为什么它还在吃 109mb 的内存，是什么在吃掉它？这是一个 37mb 的差异，这是一个相当高的比例。（34%）。我不认为这是内存泄漏，因为设置了最大堆大小并且没有内存不足错误或任何东西。

一件有趣的事情可能是我用 VisualVM 做了一个堆转储，然后用 EclipseMAT 检查它，它说类加载器中可能存在泄漏。这就是它所说的：

> 类加载器/组件“sun.misc.Launcher$AppClassLoader @ 0x87efa40”占用 9,807,664 (64.90%) 个字节。内存在“”.Keywords sun.misc.Launcher$AppClassLoader @ 0x87efa40 加载的“short[][]”的一个实例中累积

我无法充分利用这一点，但可能会有用。

提前感谢您的帮助。

**编辑**

找到了这个，也许我无能为力... [Tomcat内存消耗超过heap + permgen空间](https://stackoverflow.com/questions/8037920/tomcat-memory-consumption-is-more-than-heap-permgen-space)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T10:23:03.837

Java的内存包括

*   堆空间。
*   烫发空间
*   线程堆栈区域。
*   共享库，包括 JVM 的库（将被共享）
*   直接内存大小。
*   内存映射文件大小（将被共享）

可能还有其他供内部使用。

鉴于 37 MB 的 PC 内存价值约 20 美分，我不会太担心。;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T10:08:12.147

您是否尝试使用 JConsole 来分析应用程序[http://docs.oracle.com/javase/1.5.0/docs/guide/management/jconsole.html](http://docs.oracle.com/javase/1.5.0/docs/guide/management/jconsole.html) 否则您也可以使用 JProfiler 试用版来分析应用程序 [http:// www.ej-technologies.com/products/jprofiler/overview.html?gclid=CKbk1p-Ym7ACFQ176wodgzy4YA](http://www.ej-technologies.com/products/jprofiler/overview.html?gclid=CKbk1p-Ym7ACFQ176wodgzy4YA)

然而，检查高内存使用的第一步应该是检查您是否在应用程序中使用对象集合，如数组、映射、集合、列表等。如果是，则检查它们是否保留对对象的引用（即使未使用）跟他们 ？

# crystal-reports - 如何将文本框值作为水晶报表中的参数？

> ID：10752081
> 
> 赞同：1
> 
> 时间：2012-05-25T09:43:02.513
> 
> 标签：crystal-reports, report, ext.net

如何在 asp.net C# 的水晶报表中将文本框值作为参数传递？

我想要显示传递参数步骤的示例我尝试了很多示例但没有输出。我想要如下链接 [http://csharp.net-informations.com/crystal-reports/csharp-crystal-reports-string-parameter。 htm](http://csharp.net-informations.com/crystal-reports/csharp-crystal-reports-string-parameter.htm) 但是没有数据显示

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:02:18.917

试试这个代码

```
 ReportDocument reportDocument = new ReportDocument();

    ParameterFields paramFields = new ParameterFields();

    ParameterField paramField = new ParameterField();
    ParameterDiscreteValue paramDiscreteValue = new ParameterDiscreteValue();
    paramField.Name = "@CustomerName";
    paramDiscreteValue.Value = TextBox1.Text.ToString();
    paramField.CurrentValues.Add(paramDiscreteValue);
    paramFields.Add(paramField);

    CrystalReportViewer1.ParameterFieldInfo = paramFields;
    reportDocument.Load(Server.MapPath("CrystalReport.rpt"));
    CrystalReportViewer1.ReportSource = reportDocument; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T06:34:56.590

我希望这个能帮上忙：

```
ReportDocument cryReportDocument = .......;
cryReportDocument.SetDatabaseLogon("userName", "password");
cryReportDocument.SetParameterValue("parameterName", yourTextBoxName.Text);
CrystalReportViewer1.ReportSource = cryReportDocument; 
```

# eclipse - 进入光标/行 Eclipse 调试器

> ID：10752082
> 
> 赞同：3
> 
> 时间：2012-05-25T09:43:12.003
> 
> 标签：eclipse, debugging

在 eclipse 中调试时是否有可能进入以下任何一行？

当我在方法开始处有断点时，它将有助于调试情况，我在那里检查了一些东西，下面有一个 for 循环，我想快速单步执行以查看它一次所做的所有更改。

目前在上述场景中，我在 for 循环下方放置了一个断点，按 F8，执行停止后删除断点，这非常麻烦。

上面有没有更好的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T09:45:48.877

1.  在函数开始处放置断点。
2.  检查 XYZ。来for循环。
3.  将光标放在 for 循环之后。
4.  按`CTRL`+ `R`。
5.  **欢呼！！！！！**我在调试中跳过了 for 循环。

# sql-server - SQL Server 集成安全性

> ID：10752084
> 
> 赞同：0
> 
> 时间：2012-05-25T09:43:17.067
> 
> 标签：sql-server, filestream, integrated-security

我一直在努力寻找 SQL Server 中与安全相关的问题。我们正在开发一个面向 SQL Server 2008 的 .NET 应用程序，并且我们希望使用 FileStream。

现在我发现如果您使用集成安全性，SQL Server 仅允许通过 Win32 API 进行 FileStream。问题是我们已经完成了大约 80% 的应用程序，但它完全基于 SQL 身份验证。所以我们在我们的应用程序中直接执行 INSERT，并且没有为每个 CRUD 操作使用存储过程。

这是相对安全的，因为我可以以加密形式存储 SQL 用户名和密码。我知道密码是以明文形式传输的，但我愿意接受。

我们希望最终用户能够通过 Crystal Reports 等工具连接到数据库，为此我们有一个额外的 SQL 登录名，该登录名仅授予 SELECT 权限。

现在，如果我们更改为集成安全性，我们将不得不授予个人用户（通过 AD 组等）执行应用程序可以执行的操作的权限。否则应用程序将无法完成它的工作。但是，当最终用户直接连接到数据库时，他也将拥有这些权利。

我看到有人说你应该对每个 CRUD 操作使用存储过程，并且只将 EXEC 权限授予 AD 组，但我该怎么做呢？当用户直接或通过应用程序连接时，我看不到用户将如何获得不同的授权......有人可以启发我吗？

一个额外的加分问题：据我了解，集成安全性不适用于工作组。那么人们如何让 FileStream 在工作组中工作呢？或者这被认为是不可能的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T10:27:22.183

1.  集成安全将在工作组中工作，使用传统机制，您在两台机器上都有匹配的用户名和密码。此外，如果服务器具有匹配的用户帐户，则域用户可以使用旧机制登录到非域服务器。

2.  集成的安全性甚至可以使用不匹配的用户名和密码。这可能会对您的情况有所帮助。

尝试这个：

```
NET USE \\DBSERVER /USER:DOMAIN\USERNAME 
```

系统将提示您输入密码。这将建立与数据库服务器的 NetBIOS 会话。完成后，您应该能够看到数据库服务器上的共享文件夹和共享打印机。

一旦在客户端计算机和数据库服务器之间建立了 netbios 会话，您就可以使用集成安全性，而不会提示您输入密码。

如果它不适用于 TCP（但我认为可以），您**可能必须将“命名管道”指定为要使用的网络协议。**Named Pipes 继承了您现有的 NetBIOS 会话，因此只要您可以列出您可能适合使用的共享。

您还可以使用包含密码`NetUseAdd`的（2 级）信息的 Windows API 函数建立登录会话。`USE_INFO_2`

我想简短的回答是，您可以为您的应用程序使用特殊的 Windows 登录，并让用户使用它登录。但是请注意，它们也不能使用自己的用户名和密码连接到同一台服务器。

# .net - Word到Excel使用.net c#

> ID：10752085
> 
> 赞同：1
> 
> 时间：2012-05-25T09:43:17.600
> 
> 标签：.net, c#-4.0

如何使用 .net 将数据从 MS word doc 转换为 MS Excel，实际上 word doc 有一些数据，如行和列，而不使用 table。我想使用 .NET 将其转换为 Excel 工作表。请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:53:26.410

恐怕在过去使用过 MS Word 对象模型，除非数据是可以依赖的结构，例如表格，否则您将很难专注于将数据拆分为一致且可靠的分隔符行和列。

不同文档中的任何细微差异都会对您磨练任何此类分隔符的能力产生令人眼花缭乱的影响。您可能会在一个或 10 个文档中得到一些工作，但您将来可能会遇到破坏最初实现的功能的文档。

我知道这没有多大帮助，但如果你追求它，这个会让你长期沮丧。我为我对这个问题的看法道歉 - 对不起！

# database - 在 Jersey REST webapp 中初始化数据库连接

> ID：10752088
> 
> 赞同：2
> 
> 时间：2012-05-25T09:43:20.920
> 
> 标签：database, jersey, initialization

我想在我的 Jersey REST webapp 中进行数据库查询。理想的情况是找到一种在第一次应用程序运行时初始化数据库连接的方法。之后我只在我的 REST 类中获取 DAOFactory 对象的实例并在方法中进行查询。我正在使用 mysql 连接器。有没有办法在泽西岛找到一种方法？在 JSF 中这是可能的——我在运行代码时只使用了一个应用程序范围的 bean。此外，如果我可以访问`ServletContext`此方法中的对象会很好，因为我想使用它的`getResourceAsStream()`方法从`WEB-INF/dao.properties`文件中读取数据库连接参数。但是“每个应用程序初始化只有一次”是这里的关键部分。

# c# - EnrichWith 不运行

> ID：10752091
> 
> 赞同：0
> 
> 时间：2012-05-25T09:43:29.210
> 
> 标签：c#, structuremap, decorator

我正在尝试使用 StructureMap 运行一个非常简单的装饰器模式版本，但我无法让它工作。这是我的代码（注意断点）：

```
public interface ITestClass { void DoSomething(); }

public class TestClass : ITestClass
{
    public void DoSomething()
    {
        Console.WriteLine("Doing something"); //Breakpoint
    }
}

public class LoggingTestClass : ITestClass
{
    private ITestClass originalClass;

    public LoggingTestClass(ITestClass original)
    {
        originalClass = original; //Breakpoint
    }
    public void DoSomething()
    {
        Console.WriteLine("Log start");
        originalClass.DoSomething();
        Console.WriteLine("Log finish");
    }
} 
```

在我的注册表中：

```
For<ITestClass>().Use<TestClass>().
EnrichWith(original => new LoggingTestClass(original)); 
```

最后是一个测试：

```
[TestMethod]
    public void DoSomeTesting()
    {
        using (IContainer container = new Container(new ApiRegistry()))
        {
            ITestClass testClass = container.GetInstance<TestClass>(); //Breakpoint
            testClass.DoSomething();
        }
    } 
```

当我调试测试时，我首先在测试中打断点，然后在 DoSomething() 方法中打断点。LoggingTestClass 的构造函数永远不会被执行。

我不确定如何进一步简化它，似乎根本没有调用 EnrichWith ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T13:14:48.887

啊哈，看来我是个大笨蛋！我正在使用`GetInstance<TestClass>`而不是`GetInstance<ITestClass>`. 那个小东西让我忙了几个小时！去谈谈你的生意人。

# mobile - 创建与 Yahoo Groups 交互的程序

> ID：10752096
> 
> 赞同：0
> 
> 时间：2012-05-25T09:43:43.560
> 
> 标签：mobile, yahoo-api

我有一个雅虎！出于各种原因拥有自己的数据库表的组。我想创建一个对此类表执行 CRUD 操作的移动应用程序（或 Web 应用程序）。有没有人知道我如何开始学习如何做到这一点（如果有的话？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T23:05:25.200

不幸的是，雅虎！组没有外部 API。但是，您也许可以使用导出表功能，它以 CSV 格式提供数据库记录。

# android - 使用listview时android中的IllegalStateException

> ID：10752097
> 
> 赞同：0
> 
> 时间：2012-05-25T05:02:00.780
> 
> 标签：android

我有一个`activity_A`包含listView，每次滚动到列表底部时，这个listView 的大小会动态增加10 个项目，同时`activity_A`我有一个editTextView 和一个go_button，它在editTextView 中搜索字符串。

搜索是我`activity_B`的，它有一个 listView，即使这个 listView 每次都会动态增加 10 个项目的大小。

我的问题是，当我想`activity_A`使用`activity_B`按钮单击（不是设备的后退按钮）返回时，它给了我这个异常。

```
java.lang.IllegalStateException: The content of the adapter has changed but ListView did not receive a notification. Make sure the content of your adapter is not modified from a background thread, but only from the UI thread. 
```

我的返回方式`activity_A`是`activity_B`：

```
public void onClick(View v) 
{
        Intent intent = new Intent(activity_B.this, activity_A.class);
        intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
        startActivity(intent);
} 
```

我什至尝试删除`intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);`线

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:46:29.270

尝试`requestLayout()`用于您的 ListView。

# swing - JavaFX 本机库

> ID：10752102
> 
> 赞同：0
> 
> 时间：2012-05-25T09:44:03.767
> 
> 标签：swing, javafx, jnlp, java-web-start

我在 JavaFX 中创建了一个简单的 Java 地图场景。我将 jfxrt.jar 放入项目中的 lib 文件夹中，但我还需要本地库来使用某些组件：例如 Windows 上的 glass.dll 和 MacOsX 上的 libglass.dylib。我有几个问题：

1.  我应该在哪里添加这些库？到 /rt/?
2.  它是 Swing 应用程序，客户端使用 Java WebStart 启动它。如何将依赖项添加到这些本机库？
3.  x32 / x64 Windows 版本呢？jfxrt.jar 对于 32 位和 64 位系统是不同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:19:14.707

> 我应该在哪里添加这些库？到 /rt/?

您可以将库放置在相对于您放置 jfxrt.jar 的位置的 ../bin 中。还没有尝试过，但我认为它会起作用，因为这是 JavaFX 发行版使用的目录结构。

将本机库嵌入到通过 webstart 包交付的 Swing 应用程序中并不是[记录在案的部署选项](http://docs.oracle.com/javafx/2/deployment/deployment_toolkit.htm)。我建议您不要这样做，而是检查您的 Swing 应用程序中是否存在 JavaFX，如果 JavaFX 不存在，则启动指向 JavaFX 运行时[下载和安装](http://www.java.com/en/javafx/)页面的浏览器 -[此处](http://www.java.com/en/javafx/javafx_install.jsp)的说明。例如：

```
try {
  new javafx.util.Pair("a","b"));
} catch (ClassNotFoundException e) {
  java.awt.Desktop.getDesktop().browse(new URI("http://www.java.com/en/javafx/"));
} 
```

> 它是 Swing 应用程序，客户端使用 Java WebStart 启动它。如何将依赖项添加到这些本机库？

如果您的应用程序仍在开发中，并且可以在几个月内针对 JavaFX 2.2 发布，那么您可以将应用程序所需的最低版本设置为 JDK7u6（其中将包括 JavaFX 2.2 运行时库），那么您不会不必担心它们的分布，并且部署场景要简单得多。

不确定在 Windows 之外是否支持（甚至可以工作）通过 WebStart 部署的 Swing 中嵌入的 JavaFX 2.1。您可能需要等待 2.2 版本来获得对 JavaFX 应用程序的 Mac 和 Linux webstart 支持。

> x32 / x64 Windows 版本呢？jfxrt.jar 对于 32 位和 64 位系统是不同的。

如果您的应用程序是从浏览器启动的，那么浏览器拥有的任何位都是 JavaFX 和 Java 所需的位。今天的大多数浏览器（至少在 Windows 下）都是 32 位的，即使用户使用的是 64 位操作系统 - 所以需要注意这一点。当您使用 WebStart 时，它可能不依赖于浏览器位匹配（在这种情况下，您至少应该匹配 JavaFX 和 Java 的位版本）。

# php - 如何计算去年同一周数中特定日期的日期？

> ID：10752103
> 
> 赞同：0
> 
> 时间：2012-05-25T09:44:03.983
> 
> 标签：php, date

我知道关于 SO 的大量日期问题，但我被这个问题难住了。

我需要运行一些报告，为此我需要制定一些日期。

报告将在周一运行，我需要计算出前一周的周日和下周六的日期。

例如，报告将在 5 月 28 日星期一运行，我需要的日期是 5 月 20 日星期日和 5 月 26 日星期六。

然后我需要相同的值，但前一周，所以 5 月 13 日星期日和 5 月 19 日星期六。

我认为这部分会很好，因为它只是在运行报告时获取星期一的当前日期并从那里进行操作的情况。

*那么*最后，我无法解决的部分是我提到的第一周，我需要去年的对应日期，所以周日和周六的日期来自上一年的同一周数。

我知道日期函数可以为您提供周数，但看不到如何根据该日期计算出该周的星期日和上一个星期六的日期。

这就是我所拥有的，请原谅 OTT 变量名：

```
$today     = date('Y/m/d');

// reports run on a Monday and use last Sunday and the following Saturday's date so get yesterday's date first
$yesterday = strtotime ('-1 day', strtotime($today));
$yesterday = date ('Y/m/d', $yesterday);

// start of week (last Sunday)
$start_of_last_week       = strtotime ('-1 week', strtotime($yesterday));
$start_of_last_week       = date ('Y/m/d', $start_of_last_week);

// end of last week (the following Saturday)
$end_of_last_week       = strtotime ('+ 6 days', strtotime($start_of_last_week));
$end_of_last_week       = date ('Y/m/d', $end_of_last_week;

// start of previous week
$start_of_previous_week       = strtotime ('-1 week', strtotime($start_of_last_week));
$start_of_previous_week       = date ('Y/m/d', $start_of_previous_week);

// end of previous week
$end_of_previous_week       = strtotime ('+ 6 days', strtotime($start_of_previous_week));
$end_of_previous_week       = date ('Y/m/d', previous;

// the start of the same week last year
$start_of_last_week_last_year = strtotime ('-1 year', strtotime($start_of_last_week )); 
```

但是上面的不正确，所以不知道下一步该怎么做。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:54:43.227

您可以像这样找出特定年份和周数的星期一的日期

```
date( 'Y-m-d', strtotime( '2012W21' )); //2011-05-23 
```

[复合日期格式](http://php.net/manual/en/datetime.formats.compound.php)

# ant - 在 ant 构建文件中添加第三方 jar 的类路径

> ID：10752104
> 
> 赞同：0
> 
> 时间：2012-05-25T09:44:05.027
> 
> 标签：ant, build, jar, classpath, jsoup

我想在我的 ant 项目中使用第三方 jar 文件。我想我应该在 build.xml 文件中添加一些东西。实际上我想在我的构建文件中添加 Jsoup 依赖项。我在谷歌搜索后读过一些东西，但我找不到。我已经尝试过

```
 <classloader loader="system">
    <classpath>
        <fileset dir="${basedir}" includes="jsoup-1.6.2.jar"/>
    </classpath>
</classloader> 
```

有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T11:55:50.527

Here is one way to add a jar to your javac classpath.

```
<javac srcdir="${src}" destdir="${classes}">
    <classpath>
        <pathelement location="jsoup-1.6.2.jar"/>
    </classpath>
</javac> 
```

You could also define the classpath outside the scope of javac (e.g. at top-level of your build file) and then refer to it by id in your javac task.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T04:26:34.037

感谢您的回复。但后来我设法解决了这个问题。因为这是蚂蚁项目。有一个 ivy.xml，所以只需在 ivy.xml 中添加 jsoup 的 ant 依赖项就可以了。

# styles - Playn 文本换行和样式问题

> ID：10752107
> 
> 赞同：1
> 
> 时间：2012-05-25T09:44:18.163
> 
> 标签：styles, playn

就像在 PlayN1.3 中不推荐使用 Effect.shadow() 一样。所以我之前有过这样的事情：

```
TextFormat textFormat = new TextFormat(myFont, textWidth, Alignment.LEFT, colorCode, Effect.shadow(-16777216, shadowX, shadowY)); 
```

所以我把它改成了这样：

```
TextFormat textFormat = new TextFormat();
textFormat.withFont(myFont);
textFormat.withWrapping(textWidth, Alignment.LEFT); 
```

我现在不想要阴影。没关系，但我没有得到以前的结果。等一下。现在不要想了。然后我把这段代码改成这样：

```
TextFormat textFormat = new TextFormat().withFont(myFont).withWrapping(textWidth, Alignment.LEFT); 
```

它给了我以前的结果，除了我现在不在乎的阴影。如果我没有错，这是上面代码的一行表示。不是吗？那么为什么它有效而上面的代码没有。有任何概念上的区别吗？任何人都可以解释一下！

//注意：不要担心变量（textWidth，myFont），它们与此无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T03:56:02.713

TextFormat 对象是不可变的。当您调用 textFormat.withFont(myFont) 返回一个*新*的TextFormat 实例时，上面的代码将丢弃该实例。如果你想让第一个代码工作，你需要这样写：

```
TextFormat format = new TextFormat();
format = format.withFont(myFont);
format = format.withWrapping(textWidth, Alignment.LEFT); 
```

# actionscript - 用于 stringOne 和 stringTwo 的 ActionScript

> ID：10752110
> 
> 赞同：0
> 
> 时间：2012-05-25T09:44:22.423
> 
> 标签：actionscript, for-loop

我有两个字符串。字符串一和字符串二

我有要为名为 TXT 的变量运行的代码

我怎么能喜欢...

```
for (stringOne and for stringTwo) {
TXT = stringOne (or) stringTwo;
...
stringOne or stringTwo = TXT;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:58:52.677

您必须将这两个字符串放在一个数组中，并使用 foreach 对字符串执行一些操作。

看到这个。

[http://www.barklund.org/blog/2009/05/21/for-each-in-loops-in-actionscript-3/](http://www.barklund.org/blog/2009/05/21/for-each-in-loops-in-actionscript-3/)

# mysql - 在其他表中分离更新列是否有助于优化（MySQL MyISAM 表）？

> ID：10752112
> 
> 赞同：4
> 
> 时间：2012-05-25T09:44:30.873
> 
> 标签：mysql, phpmyadmin, query-optimization, myisam

MySQL MyISAM " **Table1** " 有**70% 的 select**、**13% 的 update**和**0.67% 的 insert**语句。

有一个“ **count_column(int)** ”用于使用主键增加计数。（更新语句）

更新“ **count_column ”在****“Waiting for table level lock”**中进行表选择查询

 **那么在其他表中分离“ **count_column** ”会减少 **“等待表级锁”**吗？

我还需要在带有连接的选择语句中分隔列。

谢谢， 约格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T10:05:07.237

在另一个表中移动频繁更新的单元格将大大减少表上的锁数量并加快对其进行选择。将表转换为 InnoDB 也有帮助（如果您不使用全文索引，MySQL 5.5 InnoDB 仍然不支持它们），因为它使用行级锁而不是表级锁。如果你有很多疑问，看看[这篇关于实现高效计数器的文章](http://www.mysqlperformanceblog.com/2007/07/01/implementing-efficient-counters-with-mysql/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T03:07:47.880

AFAIK your locking problem is the COUNT with INSERT, not the UPDATE itself - but you must have a huge bunch of SELECTs. Your question is lacking quite some details...

COUNT is really optimized on MyISAM tables, if you encounter problems with that you maybe should consider a count estimate or memory tables holding this value:-\ But an exact row count is stored for MyISAM that is extremely quick to get by the storage engine, so you maybe even slowed down MySQL with your solution. "Slow" COUNT is valid for engines like InnoDB because of their transactional nature.

One other thing to consider is, that storing a count in a column in the table itself is an additional column for each row and quite bad.

And if you are using triggers to accomplish that you should be aware of [http://dev.mysql.com/doc/refman/5.0/en/faqs-triggers.html#qandaitem-B-5-1-12](http://dev.mysql.com/doc/refman/5.0/en/faqs-triggers.html#qandaitem-B-5-1-12) :)**

# excel - JasperReports 中每个工作表属性一页

> ID：10752117
> 
> 赞同：4
> 
> 时间：2012-05-25T09:44:46.013
> 
> 标签：excel, jasper-reports, xls

我有一个要求，我必须在 JasperReports 中设计一个报告。报告有 4 张。第一张纸有 5 页，类似地其他纸有一页或两页。我面临的问题是，如果我使用**net.sf.jasperreports.export.xls.one.page.per.sheet**属性并将其设置为***true***，然后所有页面都出现在不同的工作表中。我需要以这样的方式设计报告，即某些页面将出现在同一张表中，而某些页面将出现在不同的表中。

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-25T13:42:19.217

假设您有 4 个要批量导出的单独报告，那么在每个报告中您需要设置`Ignore Pagination`为`true`（它是 jrxml 文件开头的 jasperReport 标记中的一个属性，该属性看起来像`isIgnorePagination="true"`）。

要实际导出，它应该类似于以下内容：

```
List<JasperPrint> jasperPrintList = new ArrayList<JasperPrint>();
jasperPrintList.add(JasperFillManager.fillReport("report1.jasper", params1));
jasperPrintList.add(JasperFillManager.fillReport("report2.jasper", params2));
jasperPrintList.add(JasperFillManager.fillReport("report3.jasper", params3));
jasperPrintList.add(JasperFillManager.fillReport("report4.jasper", params4));

JRXlsExporter exporter = new JRXlsExporter();

exporter.setParameter(JRExporterParameter.JASPER_PRINT_LIST, jasperPrintList);
exporter.setParameter(JRExporterParameter.OUTPUT_FILE_NAME, "BatchExportReport.xls");
exporter.setParameter(JRXlsExporterParameter.IS_ONE_PAGE_PER_SHEET, Boolean.TRUE);

exporter.exportReport(); 
```

要设置工作表名称，请查看JasperForge上的[Dynamic Sheet Names示例。](http://jasperforge.org/uploads/publish/jasperreportswebsite/trunk/sample.reference/xlsfeatures/index.html#dynamicSheetNames)

* * *

根据您的评论，您希望使用相同的报告模板导出为多种格式。excel是唯一需要忽略分页的。您可以在运行时通过参数设置，而不是在报告中硬编码。因此，将以下内容添加到 params1、params2、params3 和 params4：

```
if(exportFormat == EXCEL) {
   params1.put(JRParameter.IS_IGNORE_PAGINATION, Boolean.TRUE);
   params2.put(JRParameter.IS_IGNORE_PAGINATION, Boolean.TRUE);
   params3.put(JRParameter.IS_IGNORE_PAGINATION, Boolean.TRUE);
   params4.put(JRParameter.IS_IGNORE_PAGINATION, Boolean.TRUE);
} 
```

# android - 带有动态 URL 地址的 adMob House 广告？

> ID：10752118
> 
> 赞同：0
> 
> 时间：2012-05-25T09:44:46.290
> 
> 标签：android, admob

有没有办法包含带有参数的 URL 地址的自家广告？我特别希望跟踪用户的屏幕大小和设备 ID 以进行统计（跟踪新应用安装等），因此 URL 将类似于 hi.php?w=720&h=1080&d=1234123412341234

不幸的是，adMob 似乎并不支持这一点。如果不是，是否更容易修改我的应用程序以手动应用轮换？我担心这种方法没有足够的灵活性。

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T21:10:34.793

我认为您不能动态插入 url 参数。最好的办法是[实现 AdMob 的 Ad Listener](https://developers.google.com/mobile-ads-sdk/docs/android/intermediate#adlistener)，并记录这些回调的相关信息。具体来说，`onReceiveAd`回调在广告被投放时被`onPresentScreen`调用，而回调在广告被点击时被调用。

# python - 如何使用 python 保存使用 selenium 生成的日志

> ID：10752122
> 
> 赞同：6
> 
> 时间：2012-05-25T09:45:06.397
> 
> 标签：python, selenium, webdriver

我正在使用 web-driver 2.20 并创建了自动化套装。与 selenium RC（get_log 函数）不同，我无法找出保存生成日志的命令。我试过了 ：

```
FirefoxProfile p = new FirefoxProfile();   
p.setPreference("webdriver.log .file", "/tmp/firefox_console"); 
WebDriver driver = new FirefoxDriver(p); 
```

但找不到对应的python。还有[http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/sel](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/sel) ...这也在java中。我还看到“导入日志”功能不知道如何使用它将日志保存在文件中。有什么建议么 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T10:05:37.080

以下将为您做同样的事情。python代码没有内部日志。

```
from selenium import webdriver

p = webdriver.FirefoxProfile()   
p.set_preference("webdriver.log.file", "/tmp/firefox_console")
driver = webdriver.Firefox(p) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T11:05:50.057

感谢它在设置后工作：

```
p.set_preference("webdriver.log.file", "/tmp/firefox_console") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-31T07:40:34.400

```
logfile = 'logs' + os.sep + ((__file__.upper())[(__file__.rfind(os.sep)+1):]).replace('.PY', '.log')
logging.basicConfig(format= '%(asctime)-12s [%(filename)-10s] %(levelname)s %(message)s',
datefmt='%Y-%m-%d %H:%M:%S', filename=logfile, filemode='w', level=logging.INFO) 
```

将在您的项目工作区创建一个日志文件，您可以使用它

# c# - 读取 XDocument 的单独部分

> ID：10752124
> 
> 赞同：0
> 
> 时间：2012-05-25T09:45:11.113
> 
> 标签：c#, asp.net, xml, visual-studio-2010

我正在尝试使用 asp.net 在网页上打印输出，只是 XDocument 文件的单独部分。

例如：我有一份简历（CV）文件，我只想打印“工作经历”部分。有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:53:47.377

如果您想访问 XDocument 中的节点/s，您可以通过以下方式获取它：

```
XDocument doc = XDocument.Load("path.xml");
var query = dox.Root.Descendants("Work experience"); 
```

这将为您提供名为“工作经验”的 0-n 个节点。

**遍历所有节点：**

```
foreach(var exp in query)
    // do something with the xml node 
```

# javascript - 如何在所有分辨率下将巨大图像上的文本保持在正确位置？

> ID：10752125
> 
> 赞同：4
> 
> 时间：2012-05-25T09:45:12.870
> 
> 标签：javascript, jquery, css

在我的介绍页面中，我有一个非常大的高度和宽度图像以适应所有分辨率（宽度超过 4000 像素），我将其设置如下：

```
#source-image {
    width: 100%;
    position: absolute;
    top: 0;
    left: 0;
} 
```

然后，我使用这些样式属性在该图像上添加了一些文本：

```
.description {
    position:absolute;
    top:510px;  
    left:23px;
    width:340px
} 
```

它在我的 15.6 英寸笔记本电脑上（分辨率为 1366x768）看起来很正常（我希望它显示出来）。

![在此处输入图像描述](../Images/2fb1ac0cd4ded6361704fd18c6c23ba4.png)

然而，当我的室友在他的高分辨率显示器上看到它时，描述并不在“正确”的位置。当然，我理解为什么会这样。

![在此处输入图像描述](../Images/685d90a9f8a1dee7ffd8479b3f6b5da3.png)

我的问题是如何在所有分辨率中动态保持描述文本的正确位置？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T09:47:27.417

设置与底部的距离，而不是与顶部的距离。或将其设置为 %。

**编辑**：我已经将我的一个实验改编成一个例子：[http](http://dabblet.com/gist/2787061) ://dabblet.com/gist/2787061 描述的位置是相对于图像容器的`bottom`和设置`left`的（图像填充了它的整个容器） .

在第一种情况下，到图像容器的距离`left`和距离`bottom`是固定的，以 px 为单位。

在第二种情况下，它们以 % 为单位，并在调整浏览器窗口大小时发生变化。

基本上，成功的规则是

```
figcaption {
    bottom: 5px;
    left: 23px;
        /* more rules here */
} 
```

在第一种情况下（固定距离，以 px 为单位）和

```
figcaption.perc {
    left: 10%;
    bottom: 17%;
} 
```

在第二种情况下（百分比）。

另外，请注意您不需要`position: absolute`或设置图像的`top`和`left`属性。但是，您确实需要`position:relative`在描述框的父级上进行设置。

* * *

要使图像*水平*填充屏幕，您需要在 body 元素和figure元素上具有`margin:0;`和。我编辑了我的示例以反映这些更改[http://dabblet.com/gist/2787061](http://dabblet.com/gist/2787061)`padding:0;``width: 100%;``margin: 0;`

要使图像*水平和垂直*填充屏幕，最简单的方法是甚至不使用 img 标签，而只需将图像设置为 body 的背景图像，并将 html 和 body 元素的高度都设置为 100 % - 示例[http://dabblet.com/gist/2792929](http://dabblet.com/gist/2792929)

请注意两个原因：第一，这会真正扭曲图像，并且在调整浏览器窗口大小时会使其看起来很难看；第二，如果您需要图像下方的一些内容，则需要提供外部元素`position: absolute`并设置其`top: 100%`. 这两个方面都可以在我链接到的示例中看到。如果不需要，您可以简单地删除图像下方的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T09:47:14.947

用于`position:relative;`包装图像的 div 和`position:absolute;`文本 div

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T09:53:02.427

请设置百分比

检查设置在水平中心的示例描述框，

首先设置相对于包装器 div 的位置

```
.description {
    position:absolute;
    top:510px;  
    left:50%;
    width:340px;
    margin:0 0 0 -170px
} 
```

# android - 滑动抽屉下方的按钮正在注册点击

> ID：10752126
> 
> 赞同：1
> 
> 时间：2012-05-25T09:45:15.540
> 
> 标签：android, button, android-linearlayout, slidingdrawer

我在屏幕底部有一个线性布局。它的宽度填满了屏幕，并且该布局有一个填充布局的按钮。在该布局上方，屏幕中间有一个滑动抽屉，是线性布局宽度的一半。我通过调用它以编程方式使滑动抽屉来到前面使用 bringtofront() 方法。我面临的问题是线性布局内的按钮在内容项之间的空间中单击。我需要它只在滑动抽屉外而不是在滑动抽屉的内容内点击，任何人都可以帮助我..提前谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:50:16.410

取一个保存滑块状态的*布尔值（打开/关闭）*

```
if(open)
//Disable button's click 
else
//Enable button's click 
```

# java - java 在“绝对”路径下运行良好，在指定的 CLASSPATH 下不运行

> ID：10752127
> 
> 赞同：0
> 
> 时间：2012-05-25T09:45:15.930
> 
> 标签：java

我的程序是`package pl.edu.uj.tcs.crazySocket;`由于一些要求。我在 crazySocket 目录中工作。为了编译程序，我使用命令

```
CLASSPATH=~/prog/colosseum/data javac tictactoe.java 
```

这成功了。我想运行程序。我将 javac 更改为 java 并删除了“.java”。我明白了

```
Exception in thread "main" java.lang.NoClassDefFoundError: tictactoe
Caused by: java.lang.ClassNotFoundException: tictactoe
        at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:266) 
```

当我在树目录中起床到 ~/prog/colosseum/data 并运行`java pl/edu/uj/tcs/crazySocket/tictactoe`一切正常。

CLASSPATH 有什么问题？它不应该同时适用于 javac 和 java 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:48:45.900

您的类路径没有任何问题，这是您的调用`java`错误。

您*需要*指定全限定类名`pl.edu.uj.tcs.crazySocket.tictactoe`。

# android - Android 上的 OpenSesame 存储 RDF 三元组

> ID：10752137
> 
> 赞同：2
> 
> 时间：2012-05-25T09:46:00.607
> 
> 标签：android, eclipse, rdf, sesame

我正在尝试在 android 上使用 OpenSesame。因此，我在我的项目中包含了 opensesame-onejar。

运行项目时抛出异常：java.lang.NoClassDefFoundError: javax.imageio.spi.ServiceRegistry throw in the info.aduna.lang.service.ServiceRegistry.(ServiceRegistry.java:37)。

在我的代码中，当我想添加一个 rdf 文件时，它会出现： con.add(file, baseURI, RDFFormat.NTRIPLES);

我正在创建我的存储库，如下所示： Repository myRepository = new SailRepository(new MemoryStore()); myRepository.initialize(); RepositoryConnection con = myRepository.getConnection();

你能解释一下我应该如何重写 ServiceRegistry 吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:51:45.823

[Sesame 使用的Java Image I/O API](http://docs.oracle.com/javase/6/docs/technotes/guides/imageio/index.html)似乎是自 1.4 以来 Sun/Oracle Java JDK 的一部分，但在 Android 的 JVM 上不可用。

不知道如何解决这个问题。也许不使用`onejar`，而仅使用您实际需要的单个 jar 可能会解决问题。

# android - 如何在 sencha touch 2.0 中的两个控制器之间传递数据

> ID：10752140
> 
> 赞同：1
> 
> 时间：2012-05-25T09:46:19.003
> 
> 标签：android, controller, sencha-touch-2

> **可能重复：**
> [从另一个控制器调用控制器的功能/在控制器之间共享数据](https://stackoverflow.com/questions/10669647/call-controllers-function-from-another-controller-share-data-between-controll)

我正在开发 sencha touch 2.0 MVC 应用程序，我的应用程序中有两个控制器。我想将数据从一个控制器发送到另一个控制器。我使用 push() 方法发送数据，但我想，这不是正确的方法。所以请帮我解决它。任何帮助将不胜感激。

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:52:47.003

一般来说，`push`这很好，但更简单的是你可以这样做：

假设您在**Controller 1**的函数中，并且想要将一些参数传递给**Controller 2**，那么可以就地调用**Controller 2中的方法：**

`Ext.getApplication().getController('controller_2').method(your_params)`

但是，如果您想保持数据持久性，最佳实践是为您的相应数据定义`Model`和`Store`。它确保您的数据在应用程序的所有组件中都可用，并且可以在您想要的任何地方进行更改。它有点像全局变量，但比纯 Javascript 的全局变量定义要好得多。

# javascript - 想要以对话框形式打开日期选择器日历

> ID：10752146
> 
> 赞同：2
> 
> 时间：2012-05-25T09:46:36.997
> 
> 标签：javascript, jquery, html, css, jquery-ui

我想将 datepicker 日历作为对话框打开，以便在打开日历时，所有其他表单元素都不会获得焦点。日期选择器是否有任何默认设置，可以通过它作为对话框打开？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:53:26.080

您可以使用花式框，它又可以包含文本输入和日历控件。在fancybox 关闭时，您可以将日期值传递给父页面上的任何文本输入或标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T10:09:39.227

你能试试这个

```
$(function() {
    $("#datepicker").datepicker({
        beforeShow: function(input, inst) {
            $('<div class="ui-widget-overlay" style="width: 2000px; height: 2000px; z-index: 1002; left:0; top:0; position :fixed"></div>').insertBefore('#ui-datepicker-div');
            setTimeout(function(){$('#ui-datepicker-div').css('z-index', 199999);},2);

        },
        onClose: function(dateText, inst) {

            $('.ui-widget-overlay').remove();
        }

    });
}); 
```

这是一个小技巧，这个想法基本上是在 datepicker 下放置一个覆盖（在 jquery 对话框模式上使用的一个）

# php - .htaccess QSA 标志被 $_GET 覆盖

> ID：10752150
> 
> 赞同：1
> 
> 时间：2012-05-25T09:46:47.230
> 
> 标签：php, .htaccess

这是我的重写规则

`RewriteRule ^(.+)$ index.php?uri=$1 [QSA,L]`

当我访问此网址时

`http://localhost/ub/ab?uri=cd`

`$_GET['uri']`返回`cd`，而不是`ab`。

如何获得`$_GET['uri']`回报`ab`？或者这是 QSA 的真实行为？

谢谢，

**编辑**

`.htaccess`文件在目录`ub`中，`ab`目录永远不存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T10:00:16.083

不要使用 $_GET 来检索 uri 参数 - .htaccess 规则不会覆盖呈现给脚本的 URI，因此您可以通过解析来检索 URI 的“ab”部分`$_SERVER['REQUEST_URI']`。

我见过几个 PHP 应用程序——比如 Joomla！和 Magento - 其 .htaccess 文件只是将所有内容重定向到“index.php”，并将其留给 PHP 路由代码以将 URI 转换为要显示的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:06:26.237

让您的 RewriteRule 像这样忽略/覆盖先前的查询字符串：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.+)$ index.php?uri=$1 [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T10:00:34.393

在您的情况下`$_GET['uri']`，确实是`cd`由于`?uri=cd`. `ab`是 URL 的一部分，而不是 GET 查询的一部分。

我认为发生这种情况是因为您已经在您访问的地址（）和地址`uri=`中定义了 GET 查询参数。它被第二个覆盖。`RewriteRule ^(.+)$ index.php?uri=$1 [QSA,L]``http://localhost/ub/ab?uri=cd`

看：

1.  您访问`http://localhost/ub/ab?uri=cd`（查询字符串是`?uri=cd`）
2.  mod_rewrite 将其发送到`index.php`并在`uri`GET 参数 ( > `index.php?uri=ub/ab`)中附加 URL
3.  然后 mod_rewrite (due to `QSA`) 追加查询字符串，所以我们得到`index.php?uri=ub/ab&uri=cd`

因此`uri=`在最终请求中放置了两次，并被第二次覆盖。

只需重命名您的 GET`uri`参数之一。

# javascript - 奇怪的 javascript/jquery 问题

> ID：10752154
> 
> 赞同：0
> 
> 时间：2012-05-25T09:47:03.993
> 
> 标签：javascript, jquery, asp.net-mvc-3

希望有人可以在这里帮助我。

我有一个在模式弹出窗口中显示用户列表的页面。可以通过两种方式访问​​此页面，一种方式是选择未经批准的用户，它将打开该页面，另一种方式是您选择用户帐户，一旦您完成后，将打开一个弹出窗口询问您是否有任何搜索条件，例如名称你搜索它会弹出用户页面。

我在表单上有一个按钮可以清除所有过滤器。当我在未经批准的用户页面上运行它时，它会很好地清除该框，但是如果我从其他方式在表单上执行此操作，则代码不会清空文本框，并且当我尝试发出警报时，它不会显示任何数据。警报在未经批准的路线上起作用的位置！

这是我正在使用的 jquery：

```
 clear: function () {
        //reset filters//
        $('.usersFilterList li').remove();
        $('.userFilterSelect option').show();

        $('#UserFilter_SearchTermIncluded').attr('value', ''); // This line doesn't seem to work properly

        alert($('#UserFilter_SearchTermIncluded').attr('value'));

        //hide filter options
        MSG.showNHide('', '#usersFilterBox');

        //reset modal control buttons
        $('#usersButSaveFilter,#usersButClearFilter').hide();
        $('#usersButFilter').fadeIn();

        usersFilter.refresh(0);
    } 
```

谁能看看我是不是在做傻事？正如我所说，它与从同一个 MVC 操作调用的表单完全相同，只是中间有另一个弹出窗口。

抱歉，如果这令人困惑，恐怕我不能再发布代码了。我可以向您保证，文本框的 ID 是正确的。

这里的任何建议都将不胜感激，因为我已经盯着它看了好几个小时了......

干杯，加雷斯

如果我右键单击第二个选项并在新选项卡中运行并运行第一个弹出的完整页面，则代码将起作用！所以问题似乎是有两个弹出窗口。

**解决了**

我找到了自己的解决方法，感谢您的所有帮助。

我只是分配了一个类并搜索该类的任何项目并像这样清除它：

```
 $('.jq-clearme').val(''); 
```

我会尽可能关闭它。由于我的代表太低，我还没有被允许。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:48:46.587

要更改元素的值（或检索它），访问*属性*是错误的方法 - 它不是双向同步的。你想要的是*财产*。虽然也通过`.prop('value'[, newvalue])`使用 jQuery 获取/设置它的正确方法公开了`.val([newvalue])`.

要清除元素的值，请使用以下命令：

```
$('#UserFilter_SearchTermIncluded').val(''); 
```

要检索/显示它，请使用

```
alert($('#UserFilter_SearchTermIncluded').val()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:49:25.010

您应该使用`val()`来获取/设置输入的值。

使用不带参数来获取值：

```
$('#UserFilter_SearchTermIncluded').val(); 
```

并使用参数设置值，在这种情况下将其设置为空：

```
$('#UserFilter_SearchTermIncluded').val(''); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T12:02:14.150

是否涉及 ajax 调用，它可能会加载您发布两次的 Javascript，因此当第二次调用时（在 ajax 调用之后）它会发现冲突？

正如其他人所提到的，最好使用`.val('')`来设置一个值并`.val()`获取该值。如果有任何 Javascript 错误，请检查 firebug。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T09:46:26.430

我找到了自己的解决方法，感谢您的所有帮助。

我只是分配了一个类并搜索该类的任何项目并像这样清除它：

```
$('.jq-clearme').val(''); 
```

我会尽可能关闭它。由于我的代表太低，我还没有被允许。

# design-patterns - 状态模式与 ENUM

> ID：10752157
> 
> 赞同：12
> 
> 时间：2012-05-25T09:47:18.180
> 
> 标签：design-patterns, state-pattern

有时需要为对象的状态提供支持。据我了解，有两种方法：

1.  枚举（简单）
2.  STATE模式（OC原理）

很明显，需要为此目的使用状态模式（我不确定）。

但是阅读我经常面对的其他代码只是枚举而不是状态模式。状态模式有权力吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-25T10:20:00.983

通常，ENUM 方法涉及某种状态和转换的表（数组）。而设计模式在对象上实现了相同的效果。

如果您不是指使用 ENUM 的表方法，那么解决方案将需要涉及一个大的 if/else if 块，这是非常难以管理的。参考下面的部分，我认为这个特殊的解决方案很明显是劣等的。

以下是我将列出的每个优点和缺点

**枚举表**

优点：

*   由于表是在一个地方定义的，因此更容易查看所有状态和转换

缺点：

*   状态和转换更加*硬编码*，需要更多代码更改来扩展

**设计模式**

优点：

*   通过添加新对象更容易扩展新状态。（开/关原则）
*   更容易确保所有信号都被状态处理，因为基类应该将信号定义为抽象函数。
*   通过从状态派生来更容易扩展特定状态的行为。状态模式应该将特定状态的行为放在一个对象中。

缺点：

*   通过查看代码更难看到所有状态及其关系，因为它们分散在几个不同的类中。
*   最终可能会创建数量难以管理的对象。但将此与相应 ENUM 解决方案所需的相应 if/else 块进行比较。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-25T11:51:34.813

为什么我们使用状态模式？去除条件逻辑重复，用多态替换条件代码。

我们什么时候有条件逻辑重复？当我们有许多依赖于状态的动作时，您必须在每个动作中复制条件逻辑。当您有许多状态时，它变得非常烦人。此外，代码重复意味着您应该在添加新状态时更新重复代码的每个副本。

因此，如果我没有重复的条件逻辑，我宁愿使用基于枚举的状态，而不是创建具有许多状态类的新类层次结构。有时我什至更喜欢条件逻辑重复：例如，当我有很多状态，但只有很少的状态相关动作时。在这种情况下，我更喜欢有两个 switch 块而不是创建十个新类。

# asp.net-mvc-3 - 使用 redirectAction 和 prg 模式在动作之间发送数据

> ID：10752160
> 
> 赞同：4
> 
> 时间：2012-05-25T09:47:44.250
> 
> 标签：asp.net-mvc-3

如何使用redirectAction 在动作之间发送数据？

我正在使用 PRG 模式。我想做那样的东西

```
[HttpGet]
    [ActionName("Success")]
    public ActionResult Success(PersonalDataViewModel model)
    {
        //model ko
        if (model == null)
            return RedirectToAction("Index", "Account");

        //model OK
        return View(model);
    }

    [HttpPost]
    [ExportModelStateToTempData]
    [ActionName("Success")]
    public ActionResult SuccessProcess(PersonalDataViewModel model)
    {

        if (!ModelState.IsValid)
        {
            ModelState.AddModelError("", "Error");
            return RedirectToAction("Index", "Account");
        }

        //model OK
        return RedirectToAction("Success", new PersonalDataViewModel() { BadgeData = this.GetBadgeData });
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-25T09:51:08.907

重定向时，您只能传递查询字符串值。不是整个复杂对象：

```
return RedirectToAction("Success", new {
    prop1 = model.Prop1,
    prop2 = model.Prop2,
    ...
}); 
```

这仅适用于标量值。因此，您需要确保在查询字符串中包含所需的每个属性，否则它将在重定向中丢失。

另一种可能性是将模型保存在服务器上的某个位置（例如数据库或其他东西），并且在重定向时仅传递允许检索模型的 id：

```
int id = StoreModel(model);
return RedirectToAction("Success", new { id = id }); 
```

并在 Success 操作中检索模型：

```
public ActionResult Success(int id)
{
    var model = GetModel(id);
    ...
} 
```

另一种可能性是使用`TempData`虽然我个人不推荐它：

```
TempData["model"] = model;
return RedirectToAction("Success"); 
```

并在`Success`动作内部从以下位置获取它`TempData`：

```
var model = TempData["model"] as PersonalDataViewModel; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T09:54:07.050

您不能使用对象在操作之间传递数据，正如 Darin 所提到的，您只能传递标量值。

如果您的数据太大，或者不仅包含标量值，则应该执行以下操作

```
[HttpGet]
public ActionResult Success(int? id)
{
    if (!(id.HasValue))
        return RedirectToAction("Index", "Account");

    //id OK
    model = LoadModelById(id.Value);
    return View(model);
} 
```

并`id`从`RedirectToAction`

```
 return RedirectToAction("Success", { id = Model.Id }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T09:53:24.970

RedirectToAction 方法向浏览器返回一个`HTTP 302`响应，从而使浏览器向`GET`指定的操作发出请求。因此，您不能像使用复杂对象调用其他方法那样传递复杂对象。

您可能的解决方案是使用 GET 操作传递一个 id 可以再次构建对象。像这样的东西

```
[HttpPost]
public ActionResult SuccessProcess(PersonViewModel model)
{
  //Some thing is Posted (P) 
  if(ModelState.IsValid)
  {
    //Save the data and Redirect (R)
    return RedirectToAction("Index",new { id=model.ID});
  }
  return View(model)
}

public ActionResult Index(int id)
{
  //Lets do a GET (G) request like browser requesting for any time with ID
  PersonViewModel model=GetPersonFromID(id);
  return View(id);
} 
```

}

您也可以使用 Session 在 This Post 和 GET 请求之间保留数据（复杂对象）（TempData 甚至在内部使用会话）。但我相信这会带走**PRG**模式的纯度。

# java - 如何创建包含图像超链接的 JTable 单元格？

> ID：10752161
> 
> 赞同：0
> 
> 时间：2012-05-25T09:47:45.680
> 
> 标签：java, swing, jtable, cell, event-listener

我试图找出如何创建一个`JTable`包含图像的单元格，它应该像超链接一样可以点击。我可以使用默认图像渲染器加载图像。

![我的表格在最后一列中包含预期的图像超链接](../Images/9f79e63b5b0732d31a46e168845269ab.png)

有人可以解释一下如何为表格最后一列中的每个图像（单元格）添加超链接（鼠标侦听器）吗？这样，当单击 jTable 单元格中的图像链接时，我希望它打开一个弹出窗口，其中包含一些显示错误消息的消息。

谢谢，钱德拉

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T09:54:09.280

在机器的默认浏览器中启动链接：

```
URI uri = null;
try {
    uri = new URI(urlToOpen);
} catch (URISyntaxException e1) {
    System.out.println("Malformed URI: " + uri);
}
Desktop desktop = Desktop.getDesktop();
try {
    desktop.browse(uri);
} catch (IOException e2) {
    // If the user default browser is not found, or it fails
    // to be launched, or the default handler application
    // failed to be launched
    JOptionPane.showMessageDialog(null,
        "The application could not find any compatible browser.");
} 
```

您可以通过单击图像来执行此操作。

* * *

根据评论编辑：

将侦听器添加到图像，然后您可以打开[`JOptionPane`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JOptionPane.html)或[`JDialog`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JDialog.html)单击图像。

# c# - 沿 Windows 应用程序部署 Postgresql

> ID：10752164
> 
> 赞同：10
> 
> 时间：2012-05-25T09:48:00.373
> 
> 标签：c#, postgresql, deployment, setup-deployment

我有使用 Postgresql 作为数据库引擎的 WPF 应用程序。我想安装 Postgresql 引擎并将 application-Db 恢复/附加到它。

该应用程序的用户是非技术人员，他们不能单独安装 Postgresql。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-25T13:12:41.897

> 该应用程序的用户是非技术人员，他们不能单独安装 Postgresql。

然后试试这个，静默安装 PostgreSQL，我们在软件部署中使用类似的代码

```
C:\Installer\postgresql-9.0.2-1-windows.exe  --serverport 5432 --servicename postgres_service --locale C --superaccount Myadmin --superpassword Mypassword --unattendedmodeui minimal --debuglevel 2 --mode unattended 
```

把这个作为bat文件运行，在后台安装

> 1.  **postgresql-9.0.2-1-windows.exe**

这是你的exe

> 1.  **服务器端口 5432**

这是您要安装 Postgres 的端口号

> 1.  **超级帐户 Myadmin**

您使用帐户名

> 1.  **超级密码 我的密码**

您的用户密码

保持其余相同。这将直接安装到`c:\Program Files`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T09:58:20.637

我假设你想在 Windows 上部署，所以你可以在你的应用程序安装程序中包含 PostgrSQL，你可以创建一个应用程序安装程序，例如使用[InnoSetup](http://www.jrsoftware.org/isinfo.php) ...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T10:03:12.940

[以下](https://www.enterprisedb.com/edb-docs/d/postgresql/installation-getting-started/installation-guide-installers/10/PostgreSQL_Installation_Guide.1.16.html#)是 Windows 上 Postgresql 静默安装的详细信息。安装程序可以从[这里](https://www.enterprisedb.com/downloads/postgres-postgresql-downloads)下载。安装后，您就可以运行您的 db 脚本了。

# iphone - iPhone Retina 设备是否支持 GIF 图片缩放？

> ID：10752166
> 
> 赞同：-1
> 
> 时间：2012-05-25T09:48:04.023
> 
> 标签：iphone, ios, ios5, retina-display

我有在*MSPaint*中创建的带有**单帧的****abc.gif**图像。我还保留了**单帧****abc@2x.gif**图像。

 *******但是我的 gif 图像在 iPhone Retina 设备和模拟器中没有正确缩放。

这有什么问题吗？？我在 Apple 上读到过任何图像资源都会被缩放。但是 gif 图像没有被缩放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:27:09.687

我尝试过使用单帧**1.gif**图像，并将**1@2x.gif**保存在资源文件夹中。它在 iPhone 4s 和 iPhone 3GS 中显示正确的图像。

我认为问题出在图像中。尝试使用 Photoshop 创建图像，然后进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T12:50:51.457

不，iPhone 设备不支持 GIF 图像缩放。请尝试上述讨论代码以获得答案。*******

# django - 我可以制作一个用于嵌入式系统的登录系统，以使用 Django 登录和上传数据吗？

> ID：10752168
> 
> 赞同：0
> 
> 时间：2012-05-25T09:48:17.203
> 
> 标签：django, web-services

我想尝试制作一个网络服务，用户可以将数据发布到数据库中，并且它还应该支持某些系统不使用我的某些用户的数据发布。最后，它应该有某种类型的 webAPI 以允许其他用户使用它包含在数据库中的任何数据来制作其他类型的 web 服务。

但我的主要问题是 Django 是否具有某种类型的 shell 交互功能，我可以使用它让嵌入式系统登录，然后与我的 Web 服务对话并发布数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:20:31.830

您可以使用此处列出的包之一构建 REST API：

[http://www.djangopackages.com/grids/g/api/](http://www.djangopackages.com/grids/g/api/)

# jquery - 在使用方法原型时将其传递给 jQuery 中的方法

> ID：10752174
> 
> 赞同：3
> 
> 时间：2012-05-25T09:48:40.330
> 
> 标签：jquery, binding, methods, this, prototyping

我正在使用如下代码

```
function Basket () {
  this.items = new Array();
}
Basket.prototype.addItem = function(item) {
  this.items.push(item);
  setTimeout(this.showItems, 1000);
};
Basket.prototype.showItems = function() {
  console.log('items in Basket: '+this.items.join(', '));
}

var b = new Basket()
b.addItem('bananas')
// -> Uncaught TypeError: Cannot call method 'join' of undefined 
```

调用 addItem 方法时，正确调用了 showItems 方法，但在 showItems 方法中，变量“this”没有引用 Basket 对象。使用原型框架我可以做类似的事情

```
setTimeout(this.showItems.bind(this), 1000) 
```

这会将变量“this”绑定到 showItems 方法中的 Basket 对象。

问题：如何在 jQuery 中实现这一点？有没有比像这样包装调用方法更优雅的方法（最佳实践）：

```
// ...
  $this = this
  setTimeout(function() {$this.showItems($this)}, 1000)

Basket.prototype.showItems = function ($this) {
  console.log('items in Basket: '+$this.items.join(', '));
} 
```

我也很高兴，如果有人可以发布一些有用的关键字，我可以如何搜索这类问题，我敢肯定，我不是唯一一个问这个的人。但是，当您没有想到框架时，自然很难搜索“原型”，而是对象的扩展（或您如何称呼它）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:04:20.230

幸运的是，jQuery 提供了一种与Prototype 提供的`$.proxy`功能相同的方法。`bind`

[http://api.jquery.com/jQuery.proxy/](http://api.jquery.com/jQuery.proxy/)上有一个文档页面。

希望有帮助，戴夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:03:18.683

为什么不简单地将方法添加到篮子？

```
function Basket () {
  var items = new Array();
  this.addItem = function(item) {
     items.push(item);
     setTimeout(this.showItems, 1000);
   };
   this.showItems = function() {
      console.log('items in Basket: '+ items.join(', '));
   };
}; 
```

# android - 为什么Android动态壁纸没有设置？它强行关闭。为什么？

> ID：10752179
> 
> 赞同：0
> 
> 时间：2012-05-25T09:48:56.060
> 
> 标签：android, live-wallpaper

我下载了水族馆动态壁纸，当我在 eclipse 上运行时它没有显示错误，但在控制台中它显示以下消息

```
 Android Launch!
  [2012-05-25 14:55:43 - LiveAquariumWallpaper] adb is running normally.
  [2012-05-25 14:55:43 - LiveAquariumWallpaper] **No Launcher activity found!**
  [2012-05-25 14:55:43 - LiveAquariumWallpaper] **The launch will only sync the application package on the device!**
  [2012-05-25 14:55:43 - LiveAquariumWallpaper] Performing sync
  [2012-05-25 14:55:43 - LiveAquariumWallpaper] Automatic Target Mode: Preferred AVD 'deepi-8' is available on emulator 'emulator-5556'
  [2012-05-25 14:55:45 - LiveAquariumWallpaper] Application already deployed. No need to reinstall.
  [2012-05-25 14:55:45 - LiveAquariumWallpaper] \LiveAquariumWallpaper\bin\LiveAquariumWallpaper.apk installed on device
  [2012-05-25 14:55:45 - LiveAquariumWallpaper] Done! 
```

为什么我会收到此消息，如果我尝试设置菜单-> 动态墙纸-> 水族馆-> 设置墙纸，而不是设置，不幸的是正在关闭。为什么？这是什么原因？在 Logcat 中：[这里](http://www.pastie.org/3965471)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:09:51.737

您正在使用导致您内存不足的大位图。正如你所看到的这条线，

```
05-25 15:21:04.276: E/AndroidRuntime(360):   at android.graphics.Bitmap.nativeCreate(Native Method)
05-25 15:21:04.276: E/AndroidRuntime(360):   at android.graphics.Bitmap.createBitmap(Bitmap.java:468)
05-25 15:21:04.276: E/AndroidRuntime(360):   at android.graphics.Bitmap.createBitmap(Bitmap.java:435)
05-25 15:21:04.276: E/AndroidRuntime(360):   at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:340) 
```

您必须找到通过缩放或使用较小的位图来减小位图大小的方法。

我们在这里有很多关于 OOM 的讨论。看看这些，找出重新爱上它的方法。

[https://stackoverflow.com/search?q=out+of+memory+android](https://stackoverflow.com/search?q=out%20of%20memory%20android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:09:02.597

您的 apk 已正确安装，但它不会像普通应用程序一样显示您的输出。所以您需要在真实设备中设置为 livewallper。如果您长按主屏幕，它将显示要设置的壁纸，通过选择这个您会找到您安装的壁纸 apk。通过选择该 apk，您将在屏幕上看到壁纸。

# android - 可绘制文件夹中图像的 dpi

> ID：10752183
> 
> 赞同：2
> 
> 时间：2012-05-25T09:49:19.517
> 
> 标签：android, image, drawable, resolution, dpi

我目前正在为 Android 应用程序设计四个不同维度（ldpi、mdpi、hdpi 和 xhdpi）的图像。我知道根据设备屏幕的 dpi 使用不同的可绘制文件夹。

但是 Photoshop 中保存 png 的最佳 dpi 是多少？

ldpi 的图像应该以 120dpi 保存，mdpi 以 160dpi 等保存吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:28:09.317

参考这个，

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

据此，

![在此处输入图像描述](../Images/68e72915ecf8f4dbcf46f70d4d7b5c25.png)

我要做的是在 300dpi 的卡瓦上进行设计。这样就不会损失质量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T11:07:15.640

// 检查这个[链接](http://coding.smashingmagazine.com/2011/06/30/designing-for-android/)

您可能会对将可交付成果设置为什么 PPI（每英寸像素数）感到困惑。只需将它们保留在标准**72 PPI**，并相应地缩放图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-12T10:51:40.827

图片的分辨率对屏幕来说并不重要，它只对打印很重要。

# iphone - 带有中心位置的 2 部分集标签的饼图

> ID：10752185
> 
> 赞同：0
> 
> 时间：2012-05-25T09:49:26.233
> 
> 标签：iphone, objective-c, xcode, ios5

我有关于在饼图圆圈的中间边缘设置 uilabel 的问题。

在我的饼图中有 2 部分。这两个部分都是动态变化的。我怎样才能在两个部分中获得中心位置，以便我可以将标签设置在特定部分的中心边缘。

谢谢你

问候， Keyur Bhalodiya

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:56:24.440

使用笛卡尔方程。

```
(x,y) = (rcos@,rsin@). 
```

R 是饼图的半径。@ 是您需要找到一个点的角度。在你的情况下，你的馅饼片中间。

# actionscript-3 - AS3 - 遇到文件结尾

> ID：10752186
> 
> 赞同：1
> 
> 时间：2012-05-25T09:49:26.450
> 
> 标签：actionscript-3

通过尝试从 ByteArray 创建位图，我收到此错误：

> 错误 #2030：遇到文件结尾。

这是我的动作脚本：

```
var myBitmapData_2:BitmapData = new BitmapData (50, 50, false, 0xFFFFFF);
        var rect_2:Rectangle = new Rectangle(0, 0, 50, 50);
        myBitmapData_2.setPixels(rect_2, savedImage[0]);
        var bm:Bitmap = new Bitmap(myBitmapData_2); 
```

如何解决？

# html - 如何设置输入滑块的宽度（以像素为单位）？

> ID：10752189
> 
> 赞同：10
> 
> 时间：2012-05-25T09:49:37.257
> 
> 标签：html, css, input, slider

对此 HTML 代码：

```
<div>
   <code>/range/1-3</code><br />
   <input type="range" value="0" min="0" max="100" onchange="send('/range/1', parseInt(this.value))" /><br />
   <input type="range" value="0" min="0" max="100" onchange="send('/range/2', parseInt(this.value))" /><br />
   <input type="range" value="0" min="0" max="100" onchange="send('/range/3', parseInt(this.value))" />
</div> 
```

我想在我的 HTML 文件的标题中添加一些 CSS 来设置某些类别的滑块的宽度。

这是整个文件的链接，其中包括 3 个 CSS 定义和一个用于将值传入和传出滑块的简短 JS。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <script type="text/javascript" charset="utf-8">

      var ws = null

      window.addEventListener('load', function() {
        if ('WebSocket' in window) {
          ws = new WebSocket('ws://localhost:60001')
          ws.onmessage = function(e) {
            var m = JSON.parse(e.data)
            if (m) {
              var e = document.getElementById(m[0])
              if (e)
                e.value = parseInt(m[1] * 100)
            }
          }
        }
      })

      function send(k, v) {
        var m = JSON.stringify([k, v])
        if (ws && ws.OPEN)
          ws.send(m)
        if (console)
          console.log(m)
      }

    </script>
        <style type="text/css" media="screen">

            div {
                margin-bottom: 1em;
            }

            code {
                color: gray;
            }
            .slider-width {
                width: 100px;
            }

    </style>
  </head>
  <body>

    <div>
      <code>/qc/lfo/1</code><br />
      <input id="/qc/lfo/1" type="range" />
    </div>

    <div>
      <code>/range/1-3</code><br />
      <input class="slider-width" type="range" value="0" min="0" max="100" onchange="send('/range/1', parseInt(this.value))" /><br />
      <input class="slider-width" type="range" value="0" min="0" max="100" onchange="send('/range/2', parseInt(this.value))" /><br />
      <input class="slider-width" type="range" value="0" min="0" max="100" onchange="send('/range/3', parseInt(this.value))" />
    </div>

    <div>
      <code>/checkbox/1-3</code><br />
      <input type="checkbox" onchange="send('/checkbox/1', this.checked)" />
      <input type="checkbox" onchange="send('/checkbox/2', this.checked)" />
      <input type="checkbox" onchange="send('/checkbox/3', this.checked)" />
    </div>

    <div>
      <code>/radio/1</code><br />
      <input type="radio" name="/radio/1" value="1" onchange="send('/radio/1', 1)" />
      <input type="radio" name="/radio/1" value="2" onchange="send('/radio/1', 2)" />
      <input type="radio" name="/radio/1" value="3" onchange="send('/radio/1', 3)" />
    </div>

    <div>
      <code>/text/1</code><br />
      <input type="text" name="/text/1" onkeyup="send(this.name, this.value)" />
    </div>

    <div>
      <code>/select/1</code><br />
      <select name="/select/1" onchange="send(this.name, this.value)">
        <option value="First">First</option>
        <option value="Second">Second</option>
        <option value="Third">Third</option>
      </select>
    </div>

    <div>
      <code>/button/1</code><br />
      <input type="button" name="/button/1" value="button" onmousedown="send(this.name, true)" onmouseup="send(this.name, false)" onmouseout="send(this.name, false)" />
    </div>

  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T09:56:43.537

```
.slider-width100
{
    width: 100px;
} 
```

上面的代码是您应该使用的宽度定义语法来设置宽度样式。这将在一个单独的 css 文件中，该文件应该链接到页面中。要使用它，您应该像这样设置标签的类属性：

```
class="slider-width100" 
```

如果您的规则被具有更高 css 优先级的其他规则覆盖，您可能会考虑在您的 css 规则定义中使用这个丑陋的 hack：

```
.slider-width100
{
    width: 100px !important;
} 
```

# android - 在 Android 中显示 Soap Web 服务响应？

> ID：10752194
> 
> 赞同：-2
> 
> 时间：2012-05-25T09:50:03.090
> 
> 标签：android, web-services, response, android-ksoap2

Hi Want 使用 ksoap2 在 Android 中显示肥皂网络服务。我正在使用以下代码。当我在 Soap Ui Pro 中进行测试时，它显示输出 xml 很好。

```
httpTransport.call(SOAP_ACTION, envelope);
Object result = (Object) envelope.getResponse();
System.out.println("The Result"+result); 
```

但我在我的 Eclipse Logcat 中遇到了异常，如何在 Android 中克服这个问题

例外 ：

```
05-25 15:13:15.105: WARN/System.err(1160): org.xmlpull.v1.XmlPullParserException: expected: START_TAG {http://www.w3.org/2001/12/soap-envelope}Envelope (position:START_TAG <{http://schemas.xmlsoap.org/wsdl/}wsdl:definitions targetNamespace='urn:sap-com:document:sap:soap:functions:mc-style'>@1:686 in java.io.InputStreamReader@40546438) 
05-25 15:13:15.115: WARN/System.err(1160):     at org.kxml2.io.KXmlParser.exception(KXmlParser.java:273) 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T11:04:13.350

使用以下代码：-

```
try {
    httpTransport.call(SOAP_ACTION, envelope);
    sb.append(httpTransport.requestDump);
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (XmlPullParserException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

InputSource inStream = new InputSource();
inStream.setCharacterStream(new StringReader(sb.toString())); 
```

如果您有任何疑问，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:00:21.297

您实际上得到了**InputStream**作为响应，您只需将其转换为字符串，然后您就可以显示它。

# vb.net - 在 Structure 中声明固定长度的可变数组

> ID：10752201
> 
> 赞同：2
> 
> 时间：2012-05-25T09:50:30.443
> 
> 标签：vb.net, arrays

如何声明一个固定长度的可变数组？我被卡住了，任何帮助将不胜感激：

```
Structure MyInformation
<VBFixedString(4)> Public ReturnStatus As String
Public VariableB(3) As String * 6  **Not sure how to declare**
End Structure 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T10:34:35.873

这是你如何声明一个固定大小的数组：

```
Dim n = 5
Dim test1(n) as String 
```

这是您重新初始化固定大小数组的方式：

```
Dim Test(10) as Integer
ReDim Test(25) as Integer 
```

您也可以使用如下函数：

```
function initArray(n as integer) as String()
Dim test(n) as String
return test
end function 
```

最后，您可以构建一个对象，该对象属于实现 IEnumerable 并使用其 ToArray 方法的类。

# asp.net-mvc - 使用 Ninject 进行集成测试

> ID：10752207
> 
> 赞同：5
> 
> 时间：2012-05-25T09:51:19.400
> 
> 标签：asp.net-mvc, unit-testing, ninject, integration-testing, t4

我熟悉这样一个事实，我不应该在单元测试中使用依赖注入，所以我可以独立地对每一层进行单元测试。

不过，我想为我的控制器创建集成测试。因此，我需要通过单元测试将我的存储库注入到控制器中。

我遵循使用 T4 脚本的通用方法，该方法为每个控制器创建一个测试类，其中包含每个 ActionResult 的测试方法。这个测试方法应该简单地调用该方法以确保没有异常被抛出。

由于使用了这个 T4 脚本，我无法手动将存储库提供给控制器。我需要使用依赖注入。

根据我以前的经验，这应该可行，但我不断收到错误消息：

```
Unable to get default constructor for class <<UnitTest>> 
```

我生成的类目前看起来像这样：

```
[TestClass]
public class TestControllersHomeController
{
    private EL.NET.Web.Controllers.HomeController c;
    //setup
    public TestControllersHomeController(Project.Controllers.HomeController c)
    {
        this.c = c;
    }
    [ClassInitialize]
    public void ClassInitialize()
    {

        var kernel = NinjectWebCommon.CreatePublicKernel();
        kernel.Bind<TestControllersHomeController>().ToSelf();
        kernel.Bind<Project.Controllers.HomeController>().ToSelf();
    }
    [TestMethod]
    public void TestIndex()
    {
        var result = c.Index();
        Assert.IsNotNull(result);
    } 
```

编辑：

我已经发现，可以借助 IKernel 的 GetService() 方法加载存储库。但是对于会员资格提供者来说，这是行不通的。同样，我不想模拟提供程序，我想执行集成测试，以便知道我的 Controller 方法是否抛出任何异常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T10:20:17.160

单元测试必须有一个默认构造函数：

```
[TestClass]
public class TestControllersHomeController
{
    private HomeController _sut;

    [TestInitialize]
    public void MyTestInitialize() 
    {
        var kernel = NinjectWebCommon.CreatePublicKernel();
        _sut = kernel.Resolve<HomeController>();
    }

    [TestMethod]
    public void TestIndex()
    {
        var result = _sut.Index();
        Assert.IsNotNull(result);
    }
} 
```

# android - 记录来电

> ID：10752209
> 
> 赞同：0
> 
> 时间：2012-05-25T09:51:21.677
> 
> 标签：android, mediarecorder

```
private void Record() {
    // TODO Auto-generated method stub

    Log.d("message","In Record function.................");

    if(recorder==null)
    {
        recorder = new MediaRecorder();
        try 
        {
            //File file = new File(Environment.getExternalStorageDirectory().getAbsolutePath(), "saw.wav");
            recorder.setAudioSource(MediaRecorder.AudioSource.DEFAULT);
            recorder.setOutputFormat(MediaRecorder.OutputFormat.DEFAULT);
            recorder.setOutputFile(Environment.getExternalStorageDirectory().getCanonicalPath() + "saw.ogg" );
            recorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);

            Log.d("message","Recording startedddd......");
             try {
                    recorder.prepare();
                    recorder.start();
                } catch (IllegalStateException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }

            Log.d("message","Recording completed......");

        } 
        catch (Exception e) 
        {
            e.printStackTrace();
            // TODO: handle exception
        }
    }
} 
```

它给出了以下问题：

```
05-25 09:50:00.117: W/System.err(8323): java.io.IOException: No valid output file
05-25 09:50:00.117: W/System.err(8323):     at android.media.MediaRecorder.prepare(MediaRecorder.java:603)
05-25 09:50:00.117: W/System.err(8323):     at com.android.CallRecord.Listener.Record(Listener.java:73)
05-25 09:50:00.117: W/System.err(8323):     at com.android.CallRecord.Listener.onCallStateChanged(Listener.java:35)
05-25 09:50:00.117: W/System.err(8323):     at android.telephony.PhoneStateListener$2.handleMessage(PhoneStateListener.java:319)
05-25 09:50:00.117: W/System.err(8323):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-25 09:50:00.117: W/System.err(8323):     at android.os.Looper.loop(Looper.java:130)
05-25 09:50:00.117: W/System.err(8323):     at android.app.ActivityThread.main(ActivityThread.java:3687)
05-25 09:50:00.117: W/System.err(8323):     at java.lang.reflect.Method.invokeNative(Native Method)
05-25 09:50:00.117: W/System.err(8323):     at java.lang.reflect.Method.invoke(Method.java:507)
05-25 09:50:00.117: W/System.err(8323):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
05-25 09:50:00.117: W/System.err(8323):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
05-25 09:50:00.117: W/System.err(8323):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:01:54.377

试用此代码。随着使用`MediaRecorder.AudioSource.VOICE_CALL`

```
folder = this.getFilesDir().toString();        
    String fname = "";        
    try        
    {   

        android.media.MediaRecorder mr = new MediaRecorder();
        mr.setAudioSource(MediaRecorder.AudioSource.VOICE_CALL); 
        mr.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
        mr.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);

        fname = folder + "/aa"+System.currentTimeMillis()+".mp4";
        mr.setOutputFile(fname); 
        mr.prepare();
        mr.start(); 

        /////////////////////////// 

        hold here and make call then release the execution. I tested by debug and add the bread point here. 
        Thread.sleep(1000); 

        ////////////////////////////

        mr.stop();          
        mr.reset();
        mr.release();

        MediaPlayer player = new MediaPlayer();

        FileInputStream fis = new FileInputStream(fname);
        FileDescriptor fd = fis.getFD();
        player.setDataSource(fd);

        player.prepare();
        player.start();         
    }
    catch(Exception ee)
    {
        Log.d(Utils.Tag_Log, ee.toString());
    } 
```

# java - 检查数组中的字符串

> ID：10752210
> 
> 赞同：-4
> 
> 时间：2012-05-25T09:51:21.950
> 
> 标签：java, string

> **可能重复：**
> [在 Java 中，如何测试数组是否包含某个值？](https://stackoverflow.com/questions/1128723/in-java-how-can-i-test-if-an-array-contains-a-certain-value)

我想检查一个字符串`S`是否存在`string array`。有什么直接的方法吗？

**编辑**

如果答案不包括使用`List`then 那会更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:53:21.090

有几种方法可以使用 Arrays 实用程序类来完成此操作。

如果数组未排序：

```
java.util.Arrays.asList(theArray).indexOf(o) 
```

如果数组已排序，则可以使用二进制搜索来提高性能：

```
java.util.Arrays.binarySearch(theArray, o) 
```

请参阅此处[Java 的数组 indexOf 在哪里？](https://stackoverflow.com/questions/4962361/where-is-javas-array-indexof)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:53:30.770

您可以将其转换为 List 并检查： Arrays.asList(arrayVariable).contains(S)

# jquery - jQuery 图像滑块按钮正在重新定位自己

> ID：10752211
> 
> 赞同：0
> 
> 时间：2012-05-25T09:51:26.913
> 
> 标签：jquery, anythingslider

我在[Connected Ventures](http://www.connected-ventures.com)有一个 AnythingSlider（jQuery 图像滑块） ，当页面加载时，两个中央导航按钮（活动和非活动幻灯片）在一秒钟后向上移动约 10 像素。我已经仔细检查了代码中是否存在任何冲突的边距或定位，但看不到任何错误。

AnySlider 在它正在使用的[其他站点](http://www.spiritdigital.co.uk/F8/index.html)上运行良好，我什至将代码从该页面的anythingslider.css 复制并粘贴到有问题的页面，但它没有解决它。

我没有想法，有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:25:36.150

您是否尝试过设置 div 的高度？例如？

`$('#slider').anythingSlider({height: 308});`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:27:28.093

尝试将任何滑块的高度更改为 308px，我猜这会很好。

```
 <div class="anythingSlider anythingSlider-default activeSlider" style="width: 620px; height: 308px;"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T15:38:29.803

我认为这是没有被清除的最高利润。尝试添加这个 css：

```
div.anythingSlider .anythingControls ul {
  padding: 0;
  margin: 25px 0 0 329px;
} 
```

# c++ - C ++程序神秘地冻结

> ID：10752212
> 
> 赞同：1
> 
> 时间：2012-05-25T09:51:31.233
> 
> 标签：c++, visual-c++, gcc, crash

我使用 MS VC++ 2010 和 GCC 4.2.1（在 Eclipse 中用于 Mac OS X 10.6 64 位）编写了一个 C++ CLI 程序。该程序在 GCC+OS X 下运行良好，大多数时候在 Windows 下运行。但有时它会默默地冻结。命令行光标一直闪烁，但程序拒绝继续工作。

以下配置运行良好：带有“Release”和“Debug”配置的 GCC。带有“调试”配置的 VC++

该错误仅发生在 Win 7 32 位和 64 位下的配置 'VC++ with 'Release' configuration' 中。不幸的是，这是我的客户想要使用的配置；-(

我已经检查了我的程序高低并修复了所有内存泄漏。但是这个错误仍然出现。您对我如何找到错误有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:07:57.917

`0xCD`调试版本通常初始化所有分配的内存（MSVC用调试配置填充它们）。也许你的类中有一些未初始化的值，使用 GCC 配置和 MSVC 调试配置它会获得一个“幸运”值，但在 MSVC Release 中它没有。

以下是[MSVC 使用的其他幻数](https://stackoverflow.com/a/127404/737620)。

所以寻找未初始化的变量、属性和分配的内存块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T10:27:05.577

*   使用日志记录来缩小程序崩溃时正在执行的代码部分。继续添加日志，直到您将其缩小到足以看到问题为止。
*   在发布版本中启用调试信息（编译器和链接器）；许多变量不会正确显示，但它至少应该给你合理的回溯（除非冻结是由于堆栈粉碎或堆栈溢出），如果你保持函数简短并且只做一件事，这通常就足够了。
*   内存*泄漏*不会导致冻结。然而，其他形式的内存滥用很可能发生。以我的经验，当释放缓冲区时，溢出缓冲区通常会导致冻结，因为自由函数遵循损坏的块链。还要注意任何其他类型的未定义行为。C/C++ 中有很多它，它通常在调试中表现得如你所愿，在优化时完全随机。
*   [尝试在DUMA](http://duma.sourceforge.net/)库下构建和运行程序以检查缓冲区溢出。但请注意：
    *   它需要**大量**内存。我的意思是很容易喜欢上千倍。所以你只能在简单的情况下进行测试。
    *   Microsoft 标头倾向于滥用其内部分配功能和不匹配，例如常规 malloc 和内部 __debug_free（或相反的方式）。因此，可能会遇到一些情况，您必须在重新定义功能之前通过将这些系统标头包含到 duma 中来仔细解决。
*   尝试为 Linux 构建程序并在[Valgrind](http://valgrind.org/)下运行它。除了缓冲区溢出之外，这将检查更多问题并且不会使用那么多内存（仅是正常的两倍，但速度较慢，大约为 20 倍）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T10:34:38.237

谢谢大家，尤其是 Cody Gray 和 MikMik，我找到了！正如你们中的一些人推荐的那样，我告诉 VS 在发布配置中生成调试信息并禁用优化。然后我启动程序并暂停它。或者，我远程连接到正在运行的进程。这帮助我找到了错误所在的区域。原因是无限循环，由数组边界后面的读取和无效案例的缺失排除引起。两者都导致在运行时无法达到停止条件。深奥的部分来自这样一个事实，即我的程序使用了一些随机值。这就是生活...

# php - 在 CodegIgniter PHP 中上传 facebook url 照片

> ID：10752213
> 
> 赞同：0
> 
> 时间：2012-05-25T09:51:31.397
> 
> 标签：php, facebook, codeigniter

我制作了一个可以使用 Facebook 帐户登录的网站。

我可以轻松放置基本用户信息，但照片根本不起作用。

这是我上传照片的代码。

```
$imageURL = 'https://graph.facebook.com/'.$fb_id.'/picture?type=large';

$config['upload_path'] = $_SERVER['DOCUMENT_ROOT'].'/'.$this->config->item('cf_dir_uphoto_temp');
$config['allowed_types'] = 'gif|png|jpg';
$config['file_name'] = $this->session->userdata(SESSION_USERID).time();
$config['max_filename'] = '70';
$config['overwrite'] = FALSE;
$config['remove_spaces'] = TRUE;

$this->load->library('upload', $config);

if($this->upload->do_upload('photo'))
{
$data = $this->upload->data();

$src_width = $src_height = ($data['image_width'] <= $data['image_height'])? $data['image_width'] : $data['image_height'];
$buffer_width = $buffer_height = 150;

$buffer_x = 0;
$buffer_y = 0;

$src_x = sprintf('%d', ($data['image_width'] - $src_width)/2);
$src_y = sprintf('%d', ($data['image_height'] - $src_height)/2);

$save_cropfile = $_SERVER['DOCUMENT_ROOT'].'/'.$this->config->item('cf_dir_uphoto_original').$data['file_name'];
$quality = 100;

if($data['file_type'] == 'image/jpeg')
{
    $src_img = imagecreatefromjpeg($data['full_path']);
    $buffer_img = ImageCreateTrueColor($buffer_width, $buffer_height);

    imagecopyresampled($buffer_img, $src_img,
                       $buffer_x, $buffer_y, $src_x, $src_y,
                       $buffer_width, $buffer_height, $src_width, $src_height
    );

    imagejpeg($buffer_img, $save_cropfile, $quality);
}else if($data['file_type'] == 'image/gif')
{
    $src_img = imagecreatefromgif($data['full_path']);
    $buffer_img = ImageCreateTrueColor($buffer_width, $buffer_height);

    imagecopyresampled($buffer_img, $src_img,
                       $buffer_x, $buffer_y, $src_x, $src_y,
                       $buffer_width, $buffer_height, $src_width, $src_height
    );

    imagegif($buffer_img, $save_cropfile);
}else if($data['file_type'] == 'image/png')
{
    $src_img = imagecreatefrompng($data['full_path']);
    $buffer_img = ImageCreateTrueColor($buffer_width, $buffer_height);

    imagecopyresampled($buffer_img, $src_img,
                       $buffer_x, $buffer_y, $src_x, $src_y,
                       $buffer_width, $buffer_height, $src_width, $src_height
    );
    imagepng($buffer_img, $save_cropfile);
}

$config['image_library'] = 'gd2';
$config['source_image'] = $save_cropfile;
$config['new_image'] = $_SERVER['DOCUMENT_ROOT'].'/'.$this->config->item('cf_dir_uphoto_thumb');
$config['width'] = 50;
$config['height'] = 50;

$this->load->library('image_lib', $config);
$this->image_lib->resize();

unlink($data['full_path']);

$p_data = $this->user->set_user_photo($data['file_name']);

}else
    echo $this->upload->display_errors(); 
```

这是非常错误的代码。

$imageURL 是将要转换为 jpg 地址的图片地址。

你能给我一个想法如何做到这一点吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T11:48:55.740

这不是进行 Facebook 登录的好方法。如果你想在你的应用中显示用户的照片，你应该使用 API，而不是把用户的照片下载到你的服务器上。只需做一些简单的事情，例如：

`<img src="https://graph.facebook.com/{$fb_id}/picture?type=large" alt="{$username}" />`

这将让您直接使用 Facebook 上的图片，并且当用户更改他们的个人资料图片时，它会自动更新。如果用户更新了他们的个人资料，您的代码将不会更新用户的图片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T14:25:18.480

如果您正在尝试下载 facebook 用户个人资料照片，请尝试使用此代码，但首先创建一个名为 image 的文件夹并确保它已启用写入权限。

```
<?php

$fullpath = 'image/image.jpg';
$url = "https://graph.facebook.com/{$user_id}/picture?type=large";

function save_image($img, $fullpath) {
    $rawdata = file_get_contents($img);
    $fp = fopen($fullpath, 'w+');
    chmod($fullpath, 0777);
    fwrite($fp, $rawdata);
    fclose($fp);
}

$headers = get_headers($url, 1);

if (isset($headers['Location'])) {
$url1 = $headers['Location']; // string
} else {
$url1 = false; // nothing there? .. weird, but okay!
}
save_image($url1, $fullpath);
?> 
```

# c++ - 使用引用比使用指针的优势是否证明偶尔的“空引用”是合理的？

> ID：10752218
> 
> 赞同：2
> 
> 时间：2012-05-25T09:51:52.900
> 
> 标签：c++, pointers, reference, null-pointer

我目前正在设计一个大致如下所示的类层次结构：

```
struct Protocol
{
    // Pass lower-layer protocol as a reference.
    Protocol(Protocol & inLLProtocol) :
        mLLProtocol(inLLProtocol)
    {
    }

    // A protocol "always" has a LLProtocol.
    Protocol & mLLProtocol; 
};

struct Layer1Protocol : Protocol
{
    // This is the "bottom" protocol, so I pass a fake reference.
    Layer1Protocol() : Protocol(*static_cast<Protocol*>(nullptr)) {}
}; 
```

`*nullptr`只要从不访问引用，IIRC 绑定引用是安全的。所以现在我有责任设计我的 Layer1Protocol 类以防止这种情况发生。

我喜欢这种方法，因为我确保所有用户协议实例*都会*引用它们各自的低层协议（Layer1Protocol 是例外，但它是核心库的一部分）。我认为这比使用指针更可取，因为一旦引入指针，就可以传递空指针，然后可能需要在运行时检查，结果是大量的指针检查代码和偶尔的错误。

你认为我的基于参考的方法是可以辩护的吗？还是使用空引用总是不好的做法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-25T09:55:06.900

> 只要从不访问引用，IIRC 绑定对 *nullptr 的引用是安全的。

不，取消引用`nullptr`始终是未定义的行为。在正确的程序中不能有“空引用”。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-25T09:55:00.277

写作`*static_cast<Protocol*>(nullptr)`是取消引用`nullptr`，这会调用*Undefined Behavior*。你绝不能这样做。结果可以是墨菲想要的任何东西。这*可能*是您所说的“空引用”，但也可能是您（男性，AFAIK）怀孕，而程序就像您取消引用了一个有效指针一样工作。

所以，严格来说，没有“空引用”。只有*未定义的行为*。

您的协议类*总是并且不可避免地*需要一个较低级别的协议，在这种情况下，您不能将它传递给它`nullptr`（甚至不能在引用中伪装）。或者它并不总是需要较低级别的协议，并且必须在访问它之前检查它是否有一个，在这种情况下，指针可以更好地实现您的设计约束。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T10:03:38.200

您的方法与使用指针的等效方法有何不同，除了语法以及指针方法与引用方法不同，它不调用 UB 的事实之外？

如果您正在使用引用以避免检查空指针，但您随后传递（非法）空引用，那么您就否定了引用的优势。现在，您的引用可能突然为空，因此您可能需要像使用指针一样检查该条件。

如果，如您所说，您可以保证这些空引用中的任何一个都不会被取消引用——那么，如果您使用指针，同样的保证也将成立。

长话短说：指针不是不惜一切代价避免的。如果您遇到可能出现空值的情况，则需要使用指针——句点。您似乎担心必须到处检查空指针（可能是通过断言），但在大多数架构上，MMU 无论如何都会阻止您取消引用空指针——这实际上几乎与断言一样好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T10:08:53.707

您可能想查看 boost 中的“可选”类模板（我相信）。它允许您传递一个对象，但也允许您指定您故意不提供任何数据，这种方式比原始指针更安全。

这不是我自己特别喜欢的东西，但您可能会发现它符合您的要求。

# php - 从用户输入中剥离 JavaScript 功能，即 onclick

> ID：10752219
> 
> 赞同：0
> 
> 时间：2012-05-25T09:52:01.510
> 
> 标签：php, forms, xss, user-input, code-injection

我有一个带有 CKEditor（所见即所得）的 textarea 设置，其中允许用户使用一些标记选项输入信息。但是，我需要阻止潜在的黑客利用此功能并输入恶意代码。

我可以使用 PHPs strip_tags() 使用允许的标签数组去除我不想要的标签：http: [//php.net/manual/en/function.strip-tags.php](http://php.net/manual/en/function.strip-tags.php)

然而，攻击者仍然有可能简单地将`onload`等添加`onclick`到允许列表中的任何 HTML 标记。

那么检查此类问题的最佳选择是什么？

我最初的想法是创建一个包含这些 JavaScript 函数的黑名单数组，然后查看它们中的任何一个是否出现在输入的数据中。

这听起来像是一个好方法还是有更好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:55:02.150

使用更强大的工具，例如[http://htmlpurifier.org/](http://htmlpurifier.org/)

它允许您清理输入、添加允许的属性、标签。你会有更多的控制权。

我强烈建议您创建白名单，而不是黑名单。使用黑名单，您可以跳过一些危险的属性，而使用白名单，您可以允许您想要的内容。

# c++ - 掌握实现网络播放器的技巧

> ID：10752223
> 
> 赞同：-1
> 
> 时间：2012-05-25T09:52:12.123
> 
> 标签：c++, mysql, qt, network-programming

这个学期我有一个关于数据库设计的期末项目。而我的老师给了我们很多任务，比如学生信息管理系统，航空公司预订系统等等。但是，我想设计这样一个播放器，它允许用户上传自己的作品并一起分享。当然它也提供下载服务。我今年大二。我熟悉c++编程，但对网络编程知之甚少。此外，我这学期学习了 T-SQL，还做了一些关于 Java 中的 MySQL 的工作（本学期也有课程）。我的想法在这里（我画了一张图片）：[http](http://tmjfzy.blog.163.com/blog/static/66447025201242553045/) ://tmjfzy.blog.163.com/blog/static/66447025201242553045/ 我需要一些关于网络编程的建议。你能给我一些来帮助我实现我的想象力吗？谢谢 ：-）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:58:40.980

那么，您基本上是在重塑 YouTube，但拥有专门的客户？

实际上它很容易在没有任何客户端或 C++ 的情况下启动：您所需要的只是一个带有 MySQL、Apache 和 PHP 的服务器。如果您在 Windows 上，我推荐 WAMP 服务器。FlowPlayer 是一个很容易集成的 Flash 视频播放器，但今天使用 HTML5 视频功能应该是一个更好的主意。我相信您可以在大约 3 到 6 天内启动并运行参考 Web 系统。（我也是一名 C++ 程序员，学习足够多的 HTML、PHP 和 JavaScript 来做非常相似的事情没有问题）。

一旦您的系统启动并运行（可能对视频文件格式有限制），您就可以设计和实现 API。从服务器端看，它只不过是 PHP 文件，只是以您选择的格式（例如 JSon、XML）返回数据，而不是生成 HTML。完成服务器端 API 后，您可以开始在客户端上工作。注册、登录、从文件上传和下载到文件应该先进行。一旦客户端可以获取视频文件，您就可以实现播放器。接下来是流媒体播放器。如果您在播放视频文件时遇到问题，这是打破与 Web 版本的兼容性并更改视频文件格式的好时机。现在您知道支持哪些播放格式，您可以在上传前实现转换。（如果您希望服务器上的所有文件都以一种格式保存，则转换是有意义的。否则它' s 不是很有用：如果客户端可以转换视频，它应该能够播放它。这意味着所有其他客户端也应该了解格式并能够播放它。）

此时可以考虑重写服务器。或者其他学生可以在您忙于客户端的同时编写服务器。一直有工作的 Apache-PHP 参考使这种并行性变得轻而易举。

以上所有都需要使用 HTTP 作为底层协议。我认为 Qt 已经内置了支持。如果没有，您可以使用一些库（如 cURL）或在套接字上从头开始实现它。最终流媒体，如 RTP+RTSP，可以添加播放。

如果你真的很喜欢冒险，你可以开始设计自己的协议，但这是最后一步，在让自己的客户端和自己的服务器在手动实现的 HTTP 上完美运行之后。

# c++ - NDK是否支持Objective c++

> ID：10752226
> 
> 赞同：2
> 
> 时间：2012-05-25T09:52:24.070
> 
> 标签：c++, objective-c, android-ndk

我想问一下Objective c ++代码是否适用于android，或者需要将其转换为C ++，以便android NDK支持它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T11:42:21.477

不，官方的 Android NDK 不支持 Obj-c，但有一些改进的 NDK ( [http://www.crystax.net/en/android/ndk/7](http://www.crystax.net/en/android/ndk/7%29) ) 支持许多额外的语言。

# c# - 'System.OutOfMemoryException'同时将大量数据发送到webservice c#

> ID：10752232
> 
> 赞同：2
> 
> 时间：2012-05-25T09:52:48.220
> 
> 标签：c#, asp.net, web-services

使用 Web 服务发送大数据时出现“内存不足异常”。它适用于少量数据。场景是这样的：这里我有一个名为 clsMovie 的实体类。在这里，用户上传了超过 250 MB 的大文件。此文件被转换为数组字节并分配给 clsMovie 类的 MovieData 成员。当此类的对象被传递给具有大量数据（大字节数组）的 Web 服务时，我得到“内存不足异常”。

代码是：

```
MovieResponse objM = service.SaveProductMovie(objMovieEnt);     // I get "Out of Memory Exception".

    [DataContract]
    [Serializable]
    public class clsMovie
    {
        [DataMember]
        public byte[] MovieData { get; set; }

        [DataMember]
        public string MovieType { get; set; }

        [DataMember]
        public int MovieSize { get; set; }

    } 
```

我尝试使用 WSE 3.0 工具，但它在 VS 2008 中不受支持，而且我搜索了很多，但都是徒劳的。有人有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:33:55.703

通过 web 服务发送一个 250 MB 的数组会消耗大量内存，您可能需要 3 倍于 250 MB 的可用内存来处理该数组。如果你有 10 个用户上传会发生什么？除此之外，250 MB 文件的大小大约是您制作肥皂消息的 10 倍，它是 xml，每个字节都转换为 char + xml 标签。

有比 webserices 更好的协议来发送大文件，例如，您可以使用 ftp 并在 ftp 上传完成后通过 webserices 发送上传文件的名称。或者制作 5 MB 卡盘并在最后一个卡盘存在时组合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T10:37:21.363

您应该考虑使用 Streaming 操作。看看这里：

[WCF 流式传输：通过 HTTP 上传/下载文件](http://www.codeproject.com/Articles/166763/WCF-Streaming-Upload-Download-Files-Over-HTTP)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T10:49:55.150

您可以检查配置文件中绑定的大小配额。

```
<basicHttpBinding>
   <binding name="BasicHttpBinding_ForgotPasswordService" closeTimeout="00:10:00"
       openTimeout="00:10:00" receiveTimeout="00:10:00" sendTimeout="00:10:00"
       allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
       maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
       messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
       useDefaultWebProxy="true">
    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
       maxBytesPerRead="4096" maxNameTableCharCount="16384" />
   </binding>
</basicHttpBinding> 
```

可以`maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"`根据您的需要进行调整。

但在**您的个人情况下**，我最好考虑 WCF 的流式传输功能，如下所示：“WCF[中的大数据和流](http://msdn.microsoft.com/en-us/library/ms733742.aspx)式传输”（MSDN）

**[编辑]**

想一想，如果您达到了配额限制，异常很可能会有所不同，并告诉您“已超出最大数组长度配额”或类似的内容。

一个`OutOfMemoryException`可能与至少一个通信系统的实际限制有关。一个可能的原因可能是一些**内存泄漏**将数据填充到 RAM 中并且没有正确清理（或足够快）。

# javascript - 在 HTML5 Canvas 中分层的最佳方式？

> ID：10752236
> 
> 赞同：6
> 
> 时间：2012-05-25T09:52:59.303
> 
> 标签：javascript, html, html5-canvas

如果您需要在 HTML5 画布上处理不同的图层，最好的方法是什么？我看到有些人决定使用 position: absolute 将许多画布堆叠在一起。这是最好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T10:56:24.773

就个人而言，我不会将画布堆叠在一起。画布实际上只是一个位图，显示您需要的所有像素，因此在大多数情况下您应该只需要一个。

我建议使用库来帮助您管理不同的对象。我发现使用 Grant Skinner 的[EaselJS](http://www.createjs.com/#!/EaselJS)是一件轻而易举的事。

这个库让您可以轻松地对对象进行分组并将它们添加到画布中，它还可以轻松添加鼠标侦听器以捕获对对象的点击等。这是在没有库的情况下使用画布时必须编写大量代码才能完成的事情.

[EaselJS](http://www.createjs.com/#!/EaselJS)上也有文档和示例。

**编辑 ：**

`container`这是有关用于对对象进行分组的文档的摘录。

> Container 是一个可嵌套的显示列表，允许您使用复合显示元素。例如，您可以将手臂、腿、躯干和头部位图组合到一个人容器中，并将它们转换为一个组，同时仍然能够相对于彼此移动各个部分。容器的子级具有与其父级容器连接的变换和 alpha 属性。例如，一个 x=100 和 alpha=0.5 的 Shape，放置在一个 x=50 和 alpha=0.7 的容器中，将在 x=150 和 alpha=0.35 处渲染到画布上。容器有一些开销，所以你通常不应该创建一个容器来容纳一个孩子。

# python - 阻止写入标准输出

> ID：10752238
> 
> 赞同：2
> 
> 时间：2012-05-25T09:53:09.263
> 
> 标签：python, ipc

我正在编写一个将使用子进程的 Python 脚本。主要思想是让一个父脚本运行专门的子脚本，例如运行其他程序或自己做一些事情。父脚本和子进程之间有管道。我使用它们通过定期发送一些字符并检查响应来控制子进程是否仍在响应。问题是当子进程在屏幕上打印任何东西（即写入标准输出或标准错误）时，管道被破坏并且一切都崩溃了。所以我的主要问题是是否可以在子进程中阻止写入 std* ，所以只有写入管道的合法响应是可能的？我已经尝试过[停止写入标准输出的函数，](https://stackoverflow.com/questions/10321671/stop-a-function-from-writing-to-stdout)但没有任何成功。

也欢迎其他关于父进程和子进程之间通信的想法（基于文件的管道除外）。但是，必须使用子流程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:00:01.343

我坚信您不仅必须接受*“当子进程在屏幕上打印任何内容（即写入 stdout 或 stderr）时，管道被破坏并且一切都崩溃了”*。你可以解决这个问题。然后，您不需要“阻止”子进程写入标准流。

正确使用 subprocess 模块的所有功能。首先，将 a 连接`subprocess.PIPE`到子流程的每个标准流：

```
p = subprocess.Popen(
        [executable, arg1, arg2],
        stdin=subprocess.PIPE,
        stdout=subprocess.PIPE,
        stderr=subprocess.PIPE) 
```

运行子进程并通过这些管道与之交互：

```
stdout, stderr = p.communicate(stdin="command") 
```

如果`communicate()`不够灵活（如果您需要同时监控多个子进程和/或某个子进程的标准输入数据取决于其响应先前命令的输出），您可以直接与`p.stdout`, `p.stderr`,`p.stdin`属性进行交互。在这种情况下，您可能必须构建自己的监控循环并使用`p.poll()`和/或`p.returncode`。控制子流程也可以通过`p.send_signal()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:06:59.417

您可以将一个函数传递给`subprocess.Popen`在执行请求的程序之前执行的函数：

```
def close_std():
    os.close(0)
    os.close(1)
    os.close(2)

p = subprocess.Popen(cmd, preexec_fn=close_std) 
```

注意低级的使用`os.close`；关闭`sys.std*`只会在分叉的 Python 进程中生效。另外，请注意，如果您的底层程序是 Python 脚本，它们可能会在尝试写入已关闭的文件描述符时因异常而死。

# sharepoint - 错误：通过 Power Shell 访问 Sharepoint 列表

> ID：10752243
> 
> 赞同：1
> 
> 时间：2012-05-25T09:53:20.710
> 
> 标签：sharepoint, powershell

我在“$spWeb.List”行中得到“无法索引到空数组”

我正在使用 Windows7 家庭高级版和 Sharepoint Foundation 2010

我尝试将用户添加到 shell Add-SPShellAdmin -username -database .. 失败通知错误是帐户名已作为登录名添加到数据库中，使用的用户名与帐户不同

请建议！

```
"============================================================================="
$PSSnapin = Remove-PSSnapin Microsoft.SharePoint.PowerShell -ErrorAction SilentlyContinue | Out-Null
 $PSSnapin = Add-PsSnapin Microsoft.SharePoint.PowerShell -ErrorAction SilentlyContinue |    Out-Null

$spWeb = Get-SPWeb http://krishna-hp:11944/sites/sh100/
$spList = $spWeb.List["products"] 

$newItem = $splist.Items.Add()

$newItem["Title"] = "this is title"
$newItem["product_id"] = 34
$newItem["product_desc"] = "this is from poershell"
$newItem["price"] = 123
$newItem.Update() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T11:40:19.430

很简单只要换行

$spList = $spWeb.List["产品"]

至

$spList = $spWeb.Lists["products"] 成功了！

# android - Android，如何将选定的自定义视图放在屏幕中间？

> ID：10752252
> 
> 赞同：0
> 
> 时间：2012-05-25T09:53:34.303
> 
> 标签：android, widget, custom-component

![在此处输入图像描述](../Images/216291ac9a6781ef061c04af833a9b65.png)

嗨，
如上图所示，我创建了一个自定义视图作为我的日历项目。在代码中，我重复了例如 50 次来创建日历。

服务器向我发送一个标志，显示应该选择哪些（在本例中选择 09 Jun）。

我的问题是当服务器发送一个不在屏幕上的日期（例如 6 月 25 日）时，该日期被选中（6 月 25 日的背景发生变化）但在屏幕上我看到上图（但现在 6 月 9 日的背景变为白色颜色和其他人一样）。

我正在寻找的东西是在屏幕中间显示 25 Jun 项目。我不知道它怎么可能。

任何建议将不胜感激。mu 自定义视图（小部件）的代码是这样的：

```
public class Calendar_Item extends RelativeLayout {

    private LayoutInflater mInflater;
    private RelativeLayout rlContainer;
    private TextView tvMonth;
    private TextView tvDay;
    private ImageView imDot;

    public Calendar_Item(Context context) {
        super(context);
        init(context);
    }

    public Calendar_Item(Context context, AttributeSet attrs) {
        super(context, attrs);
        init(context);
    }

    public Calendar_Item(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init(context);
    }

    private void init(Context context) {
        mInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        RelativeLayout calendarView = (RelativeLayout) mInflater.inflate(R.layout.calendar_item, null);
        addView(calendarView);

        rlContainer = (RelativeLayout)  calendarView.findViewById(R.id.cal_rlContainer);
        tvMonth     = (TextView)        calendarView.findViewById(R.id.cal_month);
        tvDay       = (TextView)        calendarView.findViewById(R.id.cal_date);
        imDot       = (ImageView)       calendarView.findViewById(R.id.cal_dot);
    }

    public void setMonth(String month) {
        tvMonth.setText(month);
    }

    public void setMonth(int resId) {
        tvMonth.setText(resId);
    }

    public CharSequence getMonth() {
        return tvMonth.getText();
    }

    public void setDay(String day) {
        tvDay.setText(day);
    }

    public void setDay(int resId) {
        tvDay.setText(resId);
    }

    public CharSequence getDay() {
        return tvDay.getText();
    }

    public void showDot() {
        imDot.setVisibility(View.VISIBLE);
    }

    public void hideDot() {
        imDot.setVisibility(View.INVISIBLE);
    }

    public void setTextColor(int color) {
        tvDay.setTextColor(color);
    }

    public void setBackgroundResource(int resid) {
        rlContainer.setBackgroundResource(resid);
    }

    public void setBackgroundDrawable(Drawable d) {
        rlContainer.setBackgroundDrawable(d);
    }

    public void setBackgroundColor(int color) {
        rlContainer.setBackgroundColor(color);
    }
} 
```

布局 XML 代码：

```
 <?xml version="1.0" encoding="utf-8"?>

<HorizontalScrollView 
   xmlns:android            = "http://schemas.android.com/apk/res/android"
   android:layout_width     = "fill_parent" 
   android:layout_height    = "wrap_content"
   android:layout_below     = "@id/header"
   android:fadingEdgeLength = "30dip"
   android:fadingEdge       = "horizontal"
   android:scrollbars       = "none" >

   <LinearLayout 
        android:id              = "@+id/llCalendarItems"
        android:layout_width    = "wrap_content" 
        android:layout_height   = "wrap_content"
        android:orientation     = "horizontal" >

    </LinearLayout>
</HorizontalScrollView> 
```

所有日历项目都位于 LinearLayout 内。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T19:16:42.770

最后我找到了使用延迟后方法的方法。

```
hsv = (HorizontalScrollView) findViewById(R.id.hsvCalendar);
hsv.postDelayed(new Runnable() {
    public void run() {
    hsv.scrollTo(selectedDay * 100, 0);
}
}, 100L); 
```

# blackberry - BlackBerry 中的 ObjectChoiceField 宽度和高度问题？

> ID：10752258
> 
> 赞同：0
> 
> 时间：2012-05-25T09:54:04.767
> 
> 标签：blackberry, drop-down-menu, alignment, positioning

我正在 BlackBerry 中使用基于 UI 的应用程序。用户界面如下所示：

> ```
> label-1 :   Oject choice field-1
> label-2 :   Oject choice field-2
> label-3 :   Oject choice field-3
> label-4 :   Oject choice field-4
> label-5 :   Oject choice field-5 
> ```

生成这个 UI 真的越来越难了。宽度和高度是我困难的主要问题。

```
public HomeScreen() {
    super(MainScreen.USE_ALL_WIDTH | USE_ALL_HEIGHT | VERTICAL_SCROLL);

    _dbOperations = new DBOperations();

    _mainVFM = new VerticalFieldManager(VerticalFieldManager.USE_ALL_WIDTH);
    _mainVFM.setMargin(10, 10, 40, 10);

    _menuFieldVFM = new VerticalFieldManager();
    _menuFieldVFM.setMargin(0, 5, 0, 0);
    _menuDropDownVFM = new VerticalFieldManager();

    ((VerticalFieldManager) getMainManager()).setBackground(BackgroundFactory.createSolidBackground(Constants.BgColorCode));

    XYEdges padding = new XYEdges(1, 1, 1, 1);
    Border roundedBorder = BorderFactory.createSimpleBorder(padding);

    // HEADING
    _headingHFM = new HorizontalFieldManager(HorizontalFieldManager.USE_ALL_WIDTH);
    _headingLabelField = new LabelField(Constants.Text_heading);
    _headingLabelField.setFont(ApplicationFont.labelFont);
    _headingHFM.add(_headingLabelField);
    _headingHFM.setMargin(0, 0, 20, 0);

    // _productLine LINE
    _productLineLabelField = new LabelField(Constants.Text_ProductLine);
    _productLineLabelField.setFont(ApplicationFont.explainationFont);
    _productLineLabelField.setMargin(8, 0, 0, 0);
    _menuFieldVFM.add(_productLineLabelField);

    int plSetTo1 = 0;
    _productLineOCF = new ObjectChoiceField("", _productLineArray, plSetTo1, Field.FIELD_RIGHT) {

        protected void layout(int width, int height) {
            setMinimalWidth(width - 60);
            super.layout(width, height);
        };
    };
    _productLineOCF.setFont(ApplicationFont.explainationFont);
    _productLineOCF.setChangeListener(this);
    _menuDropDownVFM.add(_productLineOCF);

    // HP
    _HPLabelField = new LabelField(Constants.Text_HP);
    _HPLabelField.setFont(ApplicationFont.explainationFont);
    _HPLabelField.setMargin(25, 0, 0, 0);
    _menuFieldVFM.add(_HPLabelField);

    int hpSetTo1 = 0;
    String data_HP[] = { "Select HP" };
    _HP_OCF = new ObjectChoiceField("", data_HP, hpSetTo1, Field.FIELD_RIGHT) {
        protected void layout(int width, int height) {
            setMinimalWidth(width - 60);
            super.layout(width, height);
        };
    };
    _HP_OCF.setFont(ApplicationFont.explainationFont);
    _HP_OCF.setChangeListener(this);
    _menuDropDownVFM.add(_HP_OCF);

    _RPMLabelField = new LabelField(Constants.Text_RPM);
    _RPMLabelField.setFont(ApplicationFont.explainationFont);
    _RPMLabelField.setMargin(25, 0, 0, 0);
    _menuFieldVFM.add(_RPMLabelField);

    int rpmSetTo1 = 0;
    String data_RPM[] = { "Select RPM" };
    _RPM_OCF = new ObjectChoiceField("", data_RPM, rpmSetTo1, Field.FIELD_RIGHT) {
        protected void layout(int width, int height) {
            setMinimalWidth(width - 60);
            super.layout(width, height);
        };
    };
    _RPM_OCF.setChangeListener(this);
    _menuDropDownVFM.add(_RPM_OCF);

    // VOLTAGE

    _voltageLabelField = new LabelField(Constants.Text_voltage);
    _voltageLabelField.setFont(ApplicationFont.explainationFont);
    _voltageLabelField.setMargin(25, 0, 0, 0);
    _menuFieldVFM.add(_voltageLabelField);

    int volSetTo1 = 0;
    String data_voltage[] = { "Select Voltage" };
    _voltageOCF = new ObjectChoiceField("", data_voltage, volSetTo1, Field.FIELD_RIGHT) {
        protected void layout(int width, int height) {
            setMinimalWidth(width - 60);
            super.layout(width, height);
        };
    };
    _voltageOCF.setChangeListener(this);
    _menuDropDownVFM.add(_voltageOCF);

    // FRAME SIZE
    _frameSizeLabelField = new LabelField(Constants.Text_frameSize);
    _frameSizeLabelField.setFont(ApplicationFont.explainationFont);
    _frameSizeLabelField.setMargin(25, 0, 0, 0);
    _menuFieldVFM.add(_frameSizeLabelField);

    // int iSetTo1 = 0;
    _frameSizeOCF = new ObjectChoiceField("", _frameArray, plSetTo1, Field.FIELD_RIGHT) {
        protected void layout(int width, int height) {
            setMinimalWidth(width - 60);
            super.layout(width, height);
        };
    };
    _frameSizeOCF.setChangeListener(this);
    _menuDropDownVFM.add(_frameSizeOCF);

    _menuMainHFM = new HorizontalFieldManager();

    _menuMainHFM.add(_menuFieldVFM);
    _menuMainHFM.add(_menuDropDownVFM);

    // -OR- LABEL
    _orLabelField = new LabelField(Constants.Text_or);
    _orLabelField.setMargin(20, 0, 0, 0);
    _orLabelField.setFont(ApplicationFont.labelFont);

    // SEARCH BY PART NUMBER
    _SearchByPartNumberField = new LabelField(Constants.Text_PartNoLabel);
    _SearchByPartNumberField.setMargin(20, 0, 0, 0);
    _SearchByPartNumberField.setFont(ApplicationFont.labelFont);

    // ENTER PART NUMBER
    _enterPartNoHFM = new HorizontalFieldManager();
    _enterPartNoLabelField = new LabelField("Enter Part Number: ");
    _partNumberEditField = new EditField();
    _partNumberEditField.setBorder(roundedBorder);
    _enterPartNoHFM.add(_enterPartNoLabelField);
    _enterPartNoHFM.add(_partNumberEditField);
    _enterPartNoHFM.setMargin(20, 0, 0, 0);

    // SAERCH BUTTON
    _searchButtonField = new ButtonField("   Search   ", ButtonField.CONSUME_CLICK | ButtonField.FIELD_HCENTER);
    _searchButtonField.setChangeListener(this);
    _searchButtonField.setMargin(20, 0, 0, 0);

    _checkForUpdates = new ButtonField(Constants.Button_checkForUpdates, ButtonField.CONSUME_CLICK | ButtonField.FIELD_HCENTER);
    _checkForUpdates.setMargin(10, 0, 0, 0);
    _checkForUpdates.setChangeListener(this);

    _mainVFM.add(_headingHFM);
    _mainVFM.add(_menuMainHFM);
    _mainVFM.add(_orLabelField);
    _mainVFM.add(_SearchByPartNumberField);
    _mainVFM.add(_enterPartNoHFM);
    _mainVFM.add(_searchButtonField);
    _mainVFM.add(_checkForUpdates);
    add(_mainVFM);
} 
```

现在我正在使用以下代码。但是没有进展，我也处于同一阶段。

```
public HomeScreen() {
    super(MainScreen.USE_ALL_WIDTH | USE_ALL_HEIGHT | VERTICAL_SCROLL);

    _dbOperations = new DBOperations();

    _mainVFM = new VerticalFieldManager(VerticalFieldManager.USE_ALL_WIDTH);
    _mainVFM.setMargin(10, 10, 40, 10);

    ((VerticalFieldManager) getMainManager()).setBackground(BackgroundFactory.createSolidBackground(Constants.BgColorCode));

    // HEADING
    _headingHFM = new HorizontalFieldManager(HorizontalFieldManager.USE_ALL_WIDTH);
    _headingLabelField = new LabelField(Constants.Text_heading);
    _headingLabelField.setFont(ApplicationFont.labelFont);
    _headingHFM.add(_headingLabelField);
    _headingHFM.setMargin(0, 0, 20, 0);

    // IMPORTANT CALCULATION
    String productLineString = Constants.Text_ProductLine;
    int charWidth = 0;

    for (int i = 0; i < productLineString.length(); i++) {
        charWidth = Font.getDefault().getAdvance(String.valueOf(productLineString.charAt(i)));
        totalWidth += charWidth;
        System.out.println(totalWidth + "===>>>>>>total width" + i);
    }
    System.out.println(totalWidth + "===>>>>>>total width");
    totalWidth = totalWidth + 10;

    // _productLine LINE
    _productLineLabelField = new LabelField(Constants.Text_ProductLine);
    _productLineLabelField.setFont(ApplicationFont.explainationFont);
    _productLineLabelField.setMargin(8, 0, 0, 0);

    int plSetTo1 = 0;
    _productLineOCF = new ObjectChoiceField("", _productLineArray, plSetTo1, Field.FIELD_RIGHT);

    _productLineOCF.setFont(ApplicationFont.explainationFont);
    _productLineOCF.setChangeListener(this);
    _productHFM = new HorizontalFieldManager(USE_ALL_WIDTH | FOCUSABLE);

    _productHFM.add(_productLineLabelField);
    _productHFM.add(_productLineOCF);

    // HP
    _hp1 = new VerticalFieldManager();

    _HPLabelField = new LabelField(Constants.Text_HP);
    _HPLabelField.setFont(ApplicationFont.explainationFont);
    _HPLabelField.setMargin(25, 0, 0, 0);
    _hp1.add(_HPLabelField);

    _hp2 = new VerticalFieldManager();

    int hpSetTo1 = 0;
    String data_HP[] = { "          Select HP" };
    _HP_OCF = new ObjectChoiceField("", data_HP, hpSetTo1, Field.FIELD_RIGHT | USE_ALL_WIDTH);
    _HP_OCF.setMinimalWidth(totalWidth + 50);
    _HP_OCF.setFont(ApplicationFont.explainationFont);
    _HP_OCF.setChangeListener(this);
    _hp2.add(_HP_OCF);

    _hpHFM = new HorizontalFieldManager(HorizontalFieldManager.USE_ALL_WIDTH) {
        protected void sublayout(int maxWidth, int maxHeight) {
            super.sublayout(maxWidth, maxHeight);
            int x = totalWidth;
            setPositionChild(_hp2, x, 0);
        }
    };

    _hpHFM.add(_hp1);
    _hpHFM.add(_hp2);

    _RPM_HFM = new HorizontalFieldManager();
    // RPM
    _RPMLabelField = new LabelField(Constants.Text_RPM);
    _RPMLabelField.setFont(ApplicationFont.explainationFont);
    _RPMLabelField.setMargin(25, 0, 0, 0);
    _RPM_HFM.add(_RPMLabelField);

    int rpmSetTo1 = 0;
    String data_RPM[] = { "Select RPM" };
    _RPM_OCF = new ObjectChoiceField("", data_RPM, rpmSetTo1, Field.FIELD_RIGHT);
    _RPM_OCF.setMinimalWidth(totalWidth + 50);
    _RPM_OCF.setChangeListener(this);
    _RPM_HFM.add(_RPM_OCF);

    _voltageHFM = new HorizontalFieldManager();
    // VOLTAGE
    _voltageLabelField = new LabelField(Constants.Text_voltage);
    _voltageLabelField.setFont(ApplicationFont.explainationFont);
    _voltageLabelField.setMargin(25, 0, 0, 0);
    _voltageHFM.add(_voltageLabelField);

    int volSetTo1 = 0;
    String data_voltage[] = { "Select Voltage" };
    _voltageOCF = new ObjectChoiceField("", data_voltage, volSetTo1, Field.FIELD_RIGHT);
    _voltageOCF.setMinimalWidth(totalWidth + 50);
    _voltageOCF.setChangeListener(this);
    _voltageHFM.add(_voltageOCF);

    _frameHFM = new HorizontalFieldManager();
    // FRAME SIZE
    _frameSizeLabelField = new LabelField(Constants.Text_frameSize);
    _frameSizeLabelField.setFont(ApplicationFont.explainationFont);
    _frameSizeLabelField.setMargin(25, 0, 0, 0);
    _frameHFM.add(_frameSizeLabelField);

    int fSetTo1 = 0;
    _frameSizeOCF = new ObjectChoiceField("", _frameArray, fSetTo1, Field.FIELD_RIGHT);
    _frameSizeOCF.setMinimalWidth(totalWidth + 50);
    _frameSizeOCF.setChangeListener(this);
    _frameHFM.add(_frameSizeOCF);

    // -OR- LABEL
    _orLabelField = new LabelField(Constants.Text_or);
    _orLabelField.setMargin(20, 0, 0, 0);
    _orLabelField.setFont(ApplicationFont.labelFont);

    // SEARCH BY PART NUMBER
    _SearchByPartNumberField = new LabelField(Constants.Text_PartNoLabel);
    _SearchByPartNumberField.setMargin(20, 0, 0, 0);
    _SearchByPartNumberField.setFont(ApplicationFont.labelFont);

    // ENTER PART NUMBER
    _enterPartNoHFM = new HorizontalFieldManager();
    _enterPartNoLabelField = new LabelField("Enter Part Number: ");
    _partNumberEditField = new EditField();
    _partNumberEditField.setBorder(roundedBorder);
    _enterPartNoHFM.add(_enterPartNoLabelField);
    _enterPartNoHFM.add(_partNumberEditField);
    _enterPartNoHFM.setMargin(20, 0, 0, 0);

    // SAERCH BUTTON
    _searchButtonField = new ButtonField("   Search   ", ButtonField.CONSUME_CLICK | ButtonField.FIELD_HCENTER);
    _searchButtonField.setChangeListener(this);
    _searchButtonField.setMargin(20, 0, 0, 0);

    _checkForUpdates = new ButtonField(Constants.Button_checkForUpdates, ButtonField.CONSUME_CLICK | ButtonField.FIELD_HCENTER);
    _checkForUpdates.setMargin(10, 0, 0, 0);
    _checkForUpdates.setChangeListener(this);

    add(_pageHeaderHFM);
    _mainVFM.add(_headingHFM);
    _mainVFM.add(_productHFM);
    _mainVFM.add(_hpHFM);
    _mainVFM.add(_RPM_HFM);
    _mainVFM.add(_voltageHFM);
    _mainVFM.add(_frameHFM);
    _mainVFM.add(_orLabelField);
    _mainVFM.add(_SearchByPartNumberField);
    _mainVFM.add(_enterPartNoHFM);
    _mainVFM.add(_searchButtonField);
    _mainVFM.add(_checkForUpdates);
    add(_mainVFM);
} 
```

我对 OCF 的宽度很好，但 OCF 的高度和位置必须根据需要确定。这是我使用此代码得到的输出。

![在此处输入图像描述](../Images/c7edb838a5c1789da34d3ae88407778d.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T12:24:14.673

该答案基于以下链接：

1.  [在 Horizo​​ntalFieldManager 中对齐字段。](http://supportforums.blackberry.com/t5/Java-Development/Align-Field-in-HorizontalFieldManager/m-p/815481#M145964)

2.  [BlackBerry Horizo​​ntalFieldManager 对齐。](https://stackoverflow.com/a/4184300/431639)

试试下面的代码：

```
class HomeScreen extends MainScreen {
    public HomeScreen() {
        super(Field.USE_ALL_WIDTH | Field.USE_ALL_HEIGHT | MainScreen.VERTICAL_SCROLL);

        VerticalFieldManager vfmMain = new VerticalFieldManager(Field.USE_ALL_WIDTH);

        // LabelField
        LabelField lblFOne = new LabelField("LabelField One", Field.FIELD_LEFT | Field.FIELD_VCENTER);

        // ObjectChoiceField
        VerticalFieldManager vfmChoiceFieldContainerOne = new VerticalFieldManager(Field.USE_ALL_WIDTH | Field.FIELD_RIGHT);
        final String[] options = new String[] { "Choice One - A very long string.", "Choice B", "Choice C" };
        ObjectChoiceField ocfOne = new ObjectChoiceField("", options, 0, Field.FIELD_RIGHT | ObjectChoiceField.FORCE_SINGLE_LINE);
        vfmChoiceFieldContainerOne.add(ocfOne);

        // Contain a row of LabelField and ObjectChoiceField
        HorizontalFieldManager hfmRowOne = new HorizontalFieldManager(Field.USE_ALL_WIDTH | Field.FOCUSABLE);
        hfmRowOne.setBackground(BackgroundFactory.createSolidBackground(Color.GREEN));
        hfmRowOne.add(lblFOne);     
        hfmRowOne.add(vfmChoiceFieldContainerOne);      

        vfmMain.add(hfmRowOne);

        add(vfmMain);
    }
} 
```

# c# - 在 C# 中禁用 AJAX 编辑器

> ID：10752259
> 
> 赞同：2
> 
> 时间：2012-05-25T09:54:05.783
> 
> 标签：c#, asp.net, ajax, asp.net-ajax

我有一个条件，我要求禁用 AJAX HTML 编辑器。此代码不起作用：

```
edNote.Enabled=false; //edNote is AJAX editor. 
```

请建议任何其他方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:58:56.407

不要禁用它，而是输出 a`<asp:literal>`代替整个编辑器。

```
<HTMLEditor:Editor runat="server" id="edNote" />
<asp:Literal runat="server" id="lit" /> 
```

在 C# 中

```
edNote.Visible = !condition;
lit.Visible = condition; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T11:58:14.913

我发现也可以制作自定义编辑器，我们可以根据需要在其中显示编辑器。代码和链接如下：

代码：

```
namespace TestControls
{
public class CustomEditor : Editor
{
    protected override void FillTopToolbar()
    {
        TopToolbar.Buttons.Add(new AjaxControlToolkit.HTMLEditor.ToolbarButton.Bold());
        TopToolbar.Buttons.Add(new AjaxControlToolkit.HTMLEditor.ToolbarButton.Italic());
    }
    protected override void FillBottomToolbar()
    {
        TopToolbar.Buttons.Add(new AjaxControlToolkit.HTMLEditor.ToolbarButton.DesignMode());
        TopToolbar.Buttons.Add(new AjaxControlToolkit.HTMLEditor.ToolbarButton.PreviewMode());
    }
}
} 
```

链接：[自定义编辑器](http://www.asp.net/web-forms/tutorials/ajax-control-toolkit/htmleditor/how-do-i-use-the-html-editor-control-vb)

# ios5 - iOS5 显示多个 RichText 段落的建议

> ID：10752262
> 
> 赞同：1
> 
> 时间：2012-05-25T09:54:12.007
> 
> 标签：ios5, uiwebview, uitextview

我正在构建一个需要显示某些 RichText 段落的 iPad 应用程序

```
Title1 (bold and big font)
Description1 (rich text may contain images)

Title2 (bold and big font)
Description2 (rich text may contain images)

Title3 (bold and big font)
Description3 (rich text may contain images)

and so on..... 
```

在 ViewController 中显示此信息的最佳方式是什么？

我查看了 UIWebView，从外观上看，它需要一个可以加载的 URL 或 HTML 字符串。然而，在我的场景中，我有多个 HTML 字符串需要放在屏幕上的不同位置。

任何想法什么是处理这个问题的最佳方法？我可以改用 UITextView 吗？

提前致谢。

# java - 餐饮哲学家任务。将我的概念转化为代码

> ID：10752263
> 
> 赞同：-1
> 
> 时间：2012-05-25T09:54:17.940
> 
> 标签：java, multithreading, illegalmonitorstateexcep

我对 Java 线程很陌生。尝试使用Java的同步概念来做死锁机制。这其中存在一些问题。我想知道我应该如何改进我的代码。**我的目标是避免死锁**。

```
package threading;

import java.util.logging.Level;
import java.util.logging.Logger;

public class DiningPhilospherProblem {

  public static void main(String[] args)
  {
      Chopstick cs[] = new Chopstick [5];
      for(int i=0;i<5;i++)
      {
          cs[i] = new Chopstick();
      }

      new Thread(new Philospher("One", cs[4],cs[0]) ).start();
      new Thread(new Philospher("Two", cs[0],cs[1]) ).start();
      new Thread(new Philospher("Three", cs[1],cs[2]) ).start();
      new Thread(new Philospher("Four", cs[2],cs[3]) ).start();
      new Thread(new Philospher("Five", cs[3],cs[4]) ).start();
  }
}

class Philospher implements Runnable
{
    private static final int EATING_TIME = 8000;
    private static final int THINKING_TIME  = 10000;

    public enum State {
        EATING, THINKING, WAITING
    }

    Chopstick left, right;
    String name;
    State state;
    public Philospher(String name, Chopstick left,Chopstick right)
    {
        System.out.println(" Philospher "  + name + " is ready");
        this.name = name;
        this.left =left;
        this.right = right;
    }
    public void run()
    {
       for(int i =0; i< 10;i++){

                eat();

        }

        System.out.println("Succesfully finished: " +name);
    }
    public void eat()  // EDITED THIS FUNCTION
    {
        synchronized(left){
        try{

                while(right.isBeingUsed()){
                    System.out.println("Philospher " + name + " :  is waiting");
                    setPhilosopherState(Philospher.State.WAITING);
                    left.wait();
                }

                synchronized(right)
                {
                    left.setChopStickUsed(true);
                    right.setChopStickUsed(true);

                    System.out.println("Philospher " + name + " :  is eaitng");
                    setPhilosopherState(Philospher.State.EATING);

                    Thread.sleep(EATING_TIME);
                }
            }

        catch(InterruptedException e){}
        finally
        {
            left.setChopStickUsed(false);
            right.setChopStickUsed(false);
            left.notify();

        }
        }
        think();

    }

    public void think()
    {
        System.out.println("Philospher " + name + " :  is thinking");
        try 
        {
            setPhilosopherState(State.THINKING);
            Thread.sleep(THINKING_TIME);
        } 
        catch (InterruptedException ex) {
            Logger.getLogger(Philospher.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
     private void setPhilosopherState(State state){
        this.state = state;

        System.out.println("Setting state :  "+ state +", "+ name+";");
    }
}

class Chopstick
{
    boolean state_chopstick;

    public synchronized void  setChopStickUsed(boolean value)
    {
        state_chopstick = value;

    }
    public synchronized boolean isBeingUsed ()
    {
        return state_chopstick;
    }
} 
```

**编辑：** `eat()`方法请查看

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:58:03.133

除了 assylias 对您的直接问题的回答之外，还有一些关于改进逻辑的建议：

检查之间`left.isBeingUsed()`可能`left.setChopStickUsed(true);`有人已经抓住了筷子（这称为*检查时间与使用时间的*问题）。为确保不会发生这种情况，您需要使用适当的机制以仅允许一位哲学家访问筷子对象并*原子地*进行检查+抓取，例如将吃的逻辑替换为

```
boolean isEating = false;
if (left.grab()) {
  if (right grab) {
    // managed to grab both chopsticks
    isEating = true;
  } else {
    // only grabbed the left one
    left.release();
  }
} else {
  // could not grab the left one
}

if (isEating) {
  // TODO: chew, swallow
  left.release();
  right.release();
} else {
  // contemplate the cruelty of life
  think();
} 
```

where`Chopstick`有以下方法：

```
public synchronized boolean grab()
{
  if (state_chopstick) {
    // already in use
    return false;
  }
  _state_chopstick = true;
  return true; // managed to grab it
}

public synchronized void release()
{
  state_chopstick = false;
} 
```

这个想法是`grab()`检查筷子是否在使用*，*如果不是同时抓住它*（*这避免了检查时间/使用时间问题）

*注意*：上面的实现可能会导致*活锁*，所有哲学家同时抓住左边的筷子，然后找到正在使用的右边的筷子，松开左边的，思考并重复；因此从不吃东西。为了解决这个问题，您可以动态（例如随机）决定首先抓取哪个分叉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:59:26.563

你得到一个`IllegalMonitorException`因为你没有持有对象`wait`的`eat`锁（`this`）。你应该看看[javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#wait%28%29)。

你也不打电话`notify`，`notifyAll`所以你会一直等。

您可能打算`think`代替`wait`?

# jsp - 如何重新加载一个jsp页面？

> ID：10752275
> 
> 赞同：0
> 
> 时间：2012-05-25T09:55:01.590
> 
> 标签：jsp, servlets

我正在对 servlet 进行一些操作并在会话中设置相同的值，当我重定向到某个页面时我使用该值。但是在重定向到页面时，值不会出现，

我知道这是非常基本的问题，但我仍然无法做到。

这是我的小服务程序：

```
protected void doPost(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
        String path = getServletContext().getRealPath("/accesscarddata/");

        doGet(request, response);
        readFile(request, response);
        prepareExcelEmployeeListToMap(request, response);
        classifyEmployeesMapEntries(request, response);
        prepareReport(request, response);
        generateLeaveReport(request,response);

        //request.getRequestDispatcher("upload.jsp").forward(request, response);
        response.sendRedirect("upload.jsp");

    } 
```

我尝试了这两种方法，但值没有出现在 jsp 中。

编辑：这就是我在jsp中从会话中读取的方式

```
<%@ page contentType="text/html"%>
<%@ page pageEncoding="UTF-8"%>
<%@ page import="java.util.*"%>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<%
        String leaveReport = "";
        if ((session.getAttribute("leaveReport") != null)) {
            leaveReport = (String) session.getAttribute("leaveReport");
        }
%>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Comparing access-card Data with leave manager Data</title>
    <link href="css/sling.css" rel="stylesheet" type="text/css" />
    <script language="JavaScript" src='script/cal.js'></script>
    <!-- Below imports for Blanket purpose-->
    <script src='script/blanket.js'></script>

%> 
```

这就是我在加载页面时尝试获取值的方式，第一次显示 javascript 警报，但从 servlet 重定向请求时未显示 alort。

```
bodyOnLoad();
    function bodyOnLoad(){
        alert("bodyOnLoad");
        var leaveReport = '<%=leaveReport%>';
        alert("leaveReport :"+leaveReport);
        if(leaveReport!=null && leaveReport!=""){
            displayLeaveReport(leaveReport);
        }
    } 
```

这就是我的 javascript 方法：

```
function displayLeaveReport(leaveReport){
            if(leaveReport == ""){
                document.getElementById("leaveReport").style.display = "none";
            } else{
                document.getElementById("leaveReport").style.display = "";
            }
        } 
```

JSP：

```
<tr>
                            <td width="100%" valign="top">
                                <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                    <tr>
                                        <td class="title_box" align="left">Leave to be availed Employees</td>
                                    </tr>
                                </table>
                                <table width="100%" align="center" border="0" cellspacing="0" cellpadding="0">
                                    <tr>
                                        <td width="100%" align="left" class="tableBorder" valign="top">
                                            <table width="100%"  border="0" cellspacing="0" cellpadding="0" bgcolor="#f9fae3" >
                                                <tr class="lightrow">
                                                    <td width="10%" class="title_sub" align="center">S.No</td>
                                                    <td width="35%" class="title_sub" align="center">Employee ID</td>
                                                    <td width="35%" class="title_sub" align="center">Employee Name</td>
                                                    <td width="20%" class="title_sub" align="center">Action</td>
                                                </tr>
                                            </table>
                                            <div id="leaveReport" align="right" style="display : none;height:100px; overflow:auto"></div>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:42:08.043

如果您使用 dwr 之类的 ajax 技术，则可以在 div 标签中设置值，如果不是，则无法在 div 标签中设置值，请在 jsp 中更改代码，如下所示，将显示 vlaues。

```
if(reportMap.size()>0){
     Iterator<Map.Entry<String, String>> entries = reportMap.entrySet().iterator();
     while (entries.hasNext()) {
        Map.Entry<String, String> entry = entries.next();
        employeeid = entry.getKey();
        employeename = entry.getValue();
        %>
        <tr class='<%=classname %>'>
        <td width="10%" class="title_sub" align="center"><%=sno %></td>
        <td width="35%" class="title_sub" align="center"><%=employeeid %></td>
        <td width="35%" class="title_sub" align="center"><%=employeename %></td>
        <td width="20%" class="title_sub" align="center">Action</td>
        </tr>
        <%
        style++;
        }
        } 
```

# javascript - Javascript setTimeout 和帧速率

> ID：10752276
> 
> 赞同：2
> 
> 时间：2012-05-25T09:55:02.260
> 
> 标签：javascript, loops, settimeout, frame-rate

我似乎在 javascript 中使用帧率计数器得到了一些意想不到的结果。直到最近计数器一直很好，我一直在以 30fps 的速度运行我的小 js 应用程序。

它使用 setTimeout() （通过时间调整来应对系统“落后”）。

```
window.requestAnimFrame = (function() 
{
    return function (callback) {
        time += FPS;
        Heartbeat._eTime = (new Date().getTime() - Heartbeat._start);
        var diff = Heartbeat._eTime - time;

        Heartbeat._delta = FPS - diff;
        Heartbeat._deltaS = Heartbeat._delta / 1000;

        window.setTimeout(callback, FPS - diff);
    };
})(); 
```

心跳只是一个包含帧率信息的对象。

**这是我的问题：**

```
_MainLoopHandler: function () {

    timer = new Date().getTime();
    counter = timer;

    while (this._messages.length > 0 && (counter - timer) < 5)
    {
        // process messages from _messages array
    }

    counter = new Date().getTime();
    // THE ABOVE IS HAPPY AT 30 FPS

    while ((counter - timer) < 6) {
        1 + 1;
    }
    // THE ABOVE WHILE IS VERY UNHAPPY :(

} 
```

所以上面的代码块是每 33.33 毫秒（30 fps）从 setTimeout 调用的函数。如果我在循环中取底部，FPS 计数器将愉快地保持在 30fps。但是，如果我把它留在里面，FPS 计数器就会发疯。它上升到 200FPS 300FPS 然后突然变为 -200FPS -10FPS 0.01FPS。它完全脱离了墙壁。while 循环每个“帧”只能运行 10 次。

另请注意，硬编码值 5 和 6 只是检查处理循环时是否经过了 5 或 6 毫秒（用于负载平衡）。

这仅仅是javascript无法处理大量信息还是其他人有类似的问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T16:33:02.863

我真的不知道发生了什么，但我认为你应该使用局部变量来控制你的时间，一次不断地重新评估`counter`和处理 1 条消息。另外，我不太了解最后一个循环（我还重命名了变量）：

```
_MainLoopHandler: function () {

  var start = new Date().getTime();
  var current;

  do {
    if (this._messages.length === 0) break;
    // process 1 message
    current = new Date().getTime();
  } while (current - start < 5);

} 
```

您还可以将*时序*问题封装在一个对象（未显示）中以简化代码：

```
_MainLoopHandler: function () {

  var timing = new Timing();

  do {
    if (this._messages.length === 0) break;
    // process 1 message
  } while (timing.elapsed() < 5);

} 
```

# c# - 从代码 C# 更改 Web.Config 中的 URL 重写规则

> ID：10752279
> 
> 赞同：9
> 
> 时间：2012-05-25T09:55:07.827
> 
> 标签：c#, asp.net, iis, url-rewriting, web-config

我想从 C# 代码修改重写规则。Url Rewrite 规则位于 web.config 文件中。

```
<system.webServer>
    <rewrite>
      <rules>
        <rule name="partners">
          <match url="^partners$" />
          <action type="Rewrite"
                  url="partners.aspx" />
        </rule>
        <rule name="news">
          <match url="^news$" />
          <action type="Rewrite"
                  url="news.aspx" />
        </rule>
        <rule name="projects">
          <match url="^projects$" />
          <action type="Rewrite"
                  url="projects.aspx" />
        </rule>
      </rules>
    </rewrite>
  </system.webServer> 
```

我想换前任。`<rule name="partners"> <match url="^partners$" />`至`<rule name="partners"> <match url="^friendship/partners$" />`,

如何找到节点规则并将匹配 url 更新为 name =“partners”的“new one”；？

这是我对动态 url 重写的想法。如果你有任何其他方式，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-25T06:39:23.350

我使用以下代码更改 web.config 网站中 connectionString 的值：

可能这个例子可以帮助你（只是改变值等等`connectionString`。请告诉我它是否适合你`system.webServer``add``rules`

```
XmlDocument myXmlDocument = new XmlDocument();
myXmlDocument.Load("../myPath/web.config");
foreach (XmlNode node in myXmlDocument["configuration"]["connectionStrings"])
{
    if (node.Name == "add")
    {
        if (node.Attributes.GetNamedItem("name").Value == "SCI2ConnectionString")
        {
            node.Attributes.GetNamedItem("connectionString").Value = "new value";
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T11:50:37.017

**step 1:-** download urlrewrite2.exe [Here](http://www.iis.net/downloads/microsoft/url-rewrite)

**Step 2:-** write you logic in web.config

```
<system.webServer>
  <rewrite>
    <providers>
      <provider name="FileMap" type="FileMapProvider, Microsoft.Web.Iis.Rewrite.Providers, Version=7.1.761.0, Culture=neutral, PublicKeyToken=0545b0627da60a5f">
        <settings>
          <add key="FilePath" value="D:\j\branches\JuzBuzz\App_Data\rewriteurl.txt" />
          <add key="IgnoreCase" value="1" />
          <add key="Separator" value="," />
        </settings>
      </provider>
    </providers>
    <rules>
      <rule name="FileMapProviderTest" stopProcessing="true">
        <match url="(.*)" ignoreCase="false" />
        <conditions logicalGrouping="MatchAll">
          <add input="{FileMap:{R:1}}" pattern="(.+)" ignoreCase="false" />
        </conditions>
        <action type="Rewrite" url="{C:1}" appendQueryString="false" />
      </rule>
    </rules>
  </rewrite>
</system.webServer> 
```

**step 3:-** Put you .txt file in App_Code folder or another place for which you have given the address in web.config , txt file will have data like

**technology,expert/search-expert.aspx?CatId=1

counselling-personal-growth,expert/search-expert.aspx?CatId=2** etc**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-17T15:57:08.423

微软有 Microsoft.Web.Administration.dll 可以帮助你，但它需要管理员权限才能执行，

[https://www.iis.net/learn/manage/scripting/how-to-use-microsoftwebadministration](https://www.iis.net/learn/manage/scripting/how-to-use-microsoftwebadministration)

它非常适合WinForms应用程序（如IIS Manager）来控制IIS服务器，但也可以用于其他类型的应用程序。

我确实有一个个人项目，它是一个自定义 MWA 实现，适用于一些非管理员案例。如果您对此感兴趣，请告诉我。

# c++ - 在范围锁定之前检查可选的互斥锁

> ID：10752280
> 
> 赞同：1
> 
> 时间：2012-05-25T09:55:15.003
> 
> 标签：c++, multithreading, mutex, critical-section, scoped-lock

我有一个构造函数，可以选择允许用户将 ponter 传递给 Boost 互斥体。如果未提供互斥锁，则成员指针`pMyMutex`设置为`NULL`。如果他们愿意，这使用户可以选择应用一些线程安全。但是，出于明显的原因，我不能将 a`scoped_lock`与这种检查一起使用:)

```
if (pMyMutex != NULL)
    const boost::mutex::scoped_lock l(*pMyMutex);

//The lock is already out of scope
processStuff(x, y, z); 
```

任何人都可以为这种要求提出一个简洁而简单的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T10:00:06.733

实现您自己的与 scoped_lock 类似的包装器以隐藏其中的决定：包装指向互斥锁的指针并检查指针是否为空（未应用锁定）或非空（应用锁定）。一些骨架：

```
class ScopedLockEx
{
public:
    ScopedLockEx( boost::mutex* pMutex)
       : pMutex_( pMutex)
    {
       if( pMutex_) pMutex_->lock();
    }

    ~ScopedLockEx()
    {
       if( pMutex_) pMutex_->unlock();
    }
private:
    boost::mutex* pMutex_;
}; 
```

# php - 在没有 iframe 的情况下打开 src 链接

> ID：10752281
> 
> 赞同：0
> 
> 时间：2012-05-25T09:55:15.537
> 
> 标签：php, iframe

有没有不使用 iframe 打开 src 链接的方法？

我有一个包含此代码的脚本：

```
<td><a target="_blank" style="margin-right:3px;" href="download/id/<?=$dl['id']?>"><?=$dl['title']?></a></td> 
```

当用户单击时，它使用以下代码打开链接：

```
<iframe  onLoad="calcHeight();" scrolling="yes" frameborder="1" width="100%" height="2000" name="resize" id="resize"  src="<?=$download['url'] ?>"  /> 
```

当用户单击时，如何允许在没有 iframe src 的情况下在整页中打开链接顶部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:20:12.497

`<iframe>`您可以简单地将用户重定向到目标 URL，而不是呈现包含目标站点的页面：

```
<?php
header('Location: '.$download['url']); ?> 
```

注意：必须没有其他输出发送到浏览器之前`header()`

# wordpress - 使用 GetText 使用变量而不是默认语言来翻译 wordpress

> ID：10752282
> 
> 赞同：0
> 
> 时间：2012-05-25T09:55:17.720
> 
> 标签：wordpress, gettext

我想让我的 wordpress 主题翻译准备好。

我正在考虑在 wordpress 中使用 GetText 函数，例如：`_e('sometext')`

但我在想，当我想更改默认的英文“sometext”时会发生什么，我必须去不同的 php 文件（我使用的地方`_e('sometext')`）找到所有实例并将其替换为`_e('sometext2')`？

或者在我的 PO 文件中，我只是制作英文栏，`_e('sometext')`在 wp php 文件中使用，但在 PO 文件中指定“sometext2”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T20:43:35.493

我会使用类似于常量概念的东西，例如：

```
<?php _e('TXT_ABOUT_INTO'); ?> 
```

TXT_ABOUT_INTO 就像一个占位符，您需要为英语和其他语言创建一个翻译文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-14T16:47:43.843

是的，如果您决定将“sometext”替换为“some other text”，则需要检查出现 _e('sometext') 的模板并将其替换为 _e('some other text')。

但是...假设您没有将文本包装在 gettext 调用中。然后，您将不得不通过您的模板将“sometext”替换为“some other text”。

差别不大，如果您要进行全局查找和替换，如果您的搜索词是“_e('sometext')”而不是“sometext”，那么意外更改某些内容的可能性要小得多。

我已经按照您的示例进行操作，但是在包装文本时应该包括文本域，例如 _e('sometext', 'my-theme')

# c++ - 快速 QPixmap 缩放

> ID：10752284
> 
> 赞同：2
> 
> 时间：2012-05-25T09:55:20.810
> 
> 标签：c++, qt, zooming, scaling, qpixmap

我开发了一个类似浏览器的应用程序，其中画布具有很大的高度和“普通”宽度，例如 1024x999999。我使用 512 个缓存的**QPixmap**块 (1024x128) 显示图片，重新使用它们来显示新的绘图区域。因此，如果用户在大图像的某个给定区域滚动，CPU 不忙，则使用缓存块。所以，这就是我的引擎的工作原理。

想要实现缩放。不知道 - 平滑或离散（x2、x3、x4...）。性能问题：

*   有没有任何有效的方法可以在不分配太多内存的情况下在**paintEvent()中动态缩放****QPixmap ？**
***   或者我应该考虑为不同的缩放因子缓存缩放图片的“缩放层”？但这使得平滑缩放变得不可能......**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T17:51:59.390

如果您查看文档，您会发现`paintEvent`事实上收到了一个`QPaintEvent`对象。该对象有一个名为的 getter 方法`region()`，该方法返回`QRect`详细说明要重新绘制的区域。

```
void QWidget::paintEvent ( QPaintEvent * event )
{
  QRect region = event->region();
  ...
} 
```

**所以...您只需要重新绘制恰好在**该矩形内的小部件部分。

对于您的应用程序，我建议计算矩形内的哪些图像或哪些图像，并相应地重绘它们，但仅是那些图像。

对于缩放部分，如果图像是对象，Qt 已经*优化*了图像在对象中绘制的方式。或者他们说...`QPainter``QPixmap`

因此，您可以在方法内部编写`paintEvent()`如下内容：

```
QPainter painter(this);
...
painter.drawPixmap(pos_x, pos_y, width, height, pixmap);
... 
```

希望有帮助！**

# ruby-on-rails - 炼油厂 CMS + devise_cas_authenticable

> ID：10752286
> 
> 赞同：0
> 
> 时间：2012-05-25T09:55:46.713
> 
> 标签：ruby-on-rails, devise, refinerycms

我试图弄清楚如何将 CAS 身份验证添加到炼油厂。到目前为止我发现的最好的安排是使用[`devise_cas_authenticatable`](https://github.com/nbudin/devise_cas_authenticatable).

我使用`rake refinery:override model=user`并更换了`:database_authenticatable`：

```
# /app/models/refinery/user.rb
if self.respond_to?(:devise)
  devise :cas_authenticatable, ...
end 
```

但我找不到在哪里设置 CAS 配置值，例如：

```
Devise.setup do |config|
  ...
  config.cas_base_url = "https://cas.myorganization.com"
  ...
end 
```

有谁知道它所属的现有初始化程序是否存在？此外，有关使 Refinery 与 CAS 合作的任务的任何想法都会有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T23:39:13.907

在 Rails 初始化程序中设置 CAS 配置值，例如

```
$ cat config/initializers/devise.rb

Devise.setup do |config|
  config.cas_base_url = "https://cas.myorganization.com"

  # you can override these if you need to, but cas_base_url is usually enough
  # config.cas_login_url = "https://cas.myorganization.com/login"
  # config.cas_logout_url = "https://cas.myorganization.com/logout"
  # config.cas_validate_url = "https://cas.myorganization.com/serviceValidate"

  # The CAS specification allows for the passing of a follow URL to be displayed when
  # a user logs out on the CAS server. RubyCAS-Server also supports redirecting to a
  # URL via the destination param. Set either of these urls and specify either nil,
  # 'destination' or 'follow' as the logout_url_param. If the urls are blank but
  # logout_url_param is set, a default will be detected for the service.
  # config.cas_destination_url = 'https://cas.myorganization.com'
  # config.cas_follow_url = 'https://cas.myorganization.com'
  # config.cas_logout_url_param = nil

  # By default, devise_cas_authenticatable will create users.  If you would rather
  # require user records to already exist locally before they can authenticate via
  # CAS, uncomment the following line.
  # config.cas_create_user = false  
end 
```

# java - Java RMI 简单的 Hello World 程序抛出 RemoteException

> ID：10752288
> 
> 赞同：0
> 
> 时间：2012-05-25T09:56:01.490
> 
> 标签：java, rmi, remoteexception

我有这个奇怪的问题。我正在尝试使用 RMI 编写一个简单的 Hello World java 程序。这是我的文件，都属于同一个包：

你好.java：

```
package com.something;
import java.rmi.Remote;
import java.rmi.RemoteException;

public interface Hello extends Remote{
    String hello() throws RemoteException;
} 
```

服务器.java

```
package com.something;
import com.something.Hello;
import java.rmi.RemoteException;
import java.rmi.registry.LocateRegistry;
import java.rmi.registry.Registry;
import java.rmi.server.UnicastRemoteObject;

public class Server implements Hello{

    @Override
    public String hello() throws RemoteException {
        return "hello world!!!!";
    }
public static void main (String args[]) throws RemoteException{

        //System.setProperty("java.rmi.server.hostname", "10.0.0.5");
                 if (System.getSecurityManager() == null) {
                        System.setSecurityManager(new SecurityManager());
                    }
                    try {
                        String name = "Hello";
                        Hello s = new Server();
                        Hello stub =
                            (Hello) UnicastRemoteObject.exportObject(s, 0);
                        Registry registry = LocateRegistry.getRegistry(8888);

                        registry.rebind(name, stub);
                        System.out.println("Hello bound");
                    } catch (Exception e) {
                        System.err.println("Hello exception:");
                        e.printStackTrace();
                    }
    }        

} 
```

客户端.java：

```
package com.something; 

import java.rmi.registry.LocateRegistry;
import java.rmi.registry.Registry;

public class Client {
    public static void main(String args[]) {
        if (System.getSecurityManager() == null) {
            System.setSecurityManager(new SecurityManager());
        }
        try {
            String name = "Hello";
            Registry registry = LocateRegistry.getRegistry("localhost"); 

            Hello h = (Hello) registry.lookup(name);
            System.out.println(h.hello());   
        } catch (Exception e) {
            System.err.println("My exception:");
            e.printStackTrace();
        }
    }    
} 
```

在运行代码之前，在终端中，我运行：

```
rmiregistry 8888 
```

我使用以下标志运行 java 代码：-Djava.security.policy=/Users/nataliazon/Documents/workspace/SiecioweRMI/src/server.policy

这是我的 server.policy 文件：

```
grant {
   permission java.security.AllPermission;
}; 
```

当我这样运行服务器程序时，会引发以下异常：

```
Hello exception:
java.rmi.ServerException: RemoteException occurred in server thread; nested exception is: 
    java.rmi.UnmarshalException: error unmarshalling arguments; nested exception is: 
    java.lang.ClassNotFoundException: com.something.Hello
    at sun.rmi.server.UnicastServerRef.oldDispatch(UnicastServerRef.java:400)
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:248)
    at sun.rmi.transport.Transport$1.run(Transport.java:159)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Transport.java:155)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
    at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(StreamRemoteCall.java:255)
    at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:233)
    at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:359)
    at sun.rmi.registry.RegistryImpl_Stub.rebind(Unknown Source)
    at com.something.Server.main(Server.java:30)
Caused by: java.rmi.UnmarshalException: error unmarshalling arguments; nested exception is: 
    java.lang.ClassNotFoundException: com.something.Hello
    at sun.rmi.registry.RegistryImpl_Skel.dispatch(Unknown Source)
    at sun.rmi.server.UnicastServerRef.oldDispatch(UnicastServerRef.java:390)
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:248)
    at sun.rmi.transport.Transport$1.run(Transport.java:159)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Transport.java:155)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.ClassNotFoundException: com.something.Hello
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:247)
    at sun.rmi.server.LoaderHandler.loadProxyInterfaces(LoaderHandler.java:709)
    at sun.rmi.server.LoaderHandler.loadProxyClass(LoaderHandler.java:653)
    at sun.rmi.server.LoaderHandler.loadProxyClass(LoaderHandler.java:590)
    at java.rmi.server.RMIClassLoader$2.loadProxyClass(RMIClassLoader.java:628)
    at java.rmi.server.RMIClassLoader.loadProxyClass(RMIClassLoader.java:294)
    at sun.rmi.server.MarshalInputStream.resolveProxyClass(MarshalInputStream.java:238)
    at java.io.ObjectInputStream.readProxyDesc(ObjectInputStream.java:1530)
    at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1492)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1731)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:350)
    ... 12 more 
```

客户端程序抛出这个：

```
My exception:
java.rmi.ConnectException: Connection refused to host: localhost; nested exception is: 
    java.net.ConnectException: Connection refused
    at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:601)
    at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:198)
    at sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:184)
    at sun.rmi.server.UnicastRef.newCall(UnicastRef.java:322)
    at sun.rmi.registry.RegistryImpl_Stub.lookup(Unknown Source)
    at com.something.Client.main(Client.java:18)
Caused by: java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:432)
    at java.net.Socket.connect(Socket.java:529)
    at java.net.Socket.connect(Socket.java:478)
    at java.net.Socket.<init>(Socket.java:375)
    at java.net.Socket.<init>(Socket.java:189)
    at sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(RMIDirectSocketFactory.java:22)
    at sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(RMIMasterSocketFactory.java:128)
    at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:595)
    ... 5 more 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T10:13:56.900

> java.lang.ClassNotFoundException: com.something.Hello

注册表和客户端的类路径中没有该类。

对于 Registry，最简单的解决方案是在服务器 JVM 中启动它。via `LocateRegistry.createRegistry()`: 或者以类在其类路径中的方式启动它；有几种方法可以做到这一点。

> java.rmi.ConnectException：连接拒绝主机：localhost

这是由于在调用时`Naming.lookup()`或在调用`LocateRegistry.getRegistry()`之前调用时指定“localhost”而不是服务器主机造成的`Registry.lookup()`。注册表不是无处不在的，它位于服务器主机上。

`SecurityManager`注意，除非您使用 RMI 代码库功能或者您有其他要求，否则您不需要。

# sql - 我可以用纯SQL做这种join操作吗？

> ID：10752290
> 
> 赞同：2
> 
> 时间：2012-05-25T09:56:05.053
> 
> 标签：sql, join

有一些数据是这样的：

```
name                            number

12_PAGE19901_CHN.DISPLAY_NT     n.115
12_PAGE19901_CHN.DISPLAY_NT     n.114
KAITEST123.DISPLAY_NT           n.110
KAITEST123.DISPLAY_NT           n.109
KAITEST123.DISPLAY_NT           n.108
KAITEST123.DISPLAY_NT           n.107
KAITEST33333.DISPLAY_NT         n.105 
```

我想检索一些这样的数据：

```
 name                            number

12_PAGE19901_CHN.DISPLAY_NT     n.115
KAITEST123.DISPLAY_NT           n.110
KAITEST33333.DISPLAY_NT         n.105 
```

我需要`first`每个特定名称的数字值，这可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T09:57:52.850

看来您只需要`number`每个特定的最大值`name`。

```
SELECT
  name,
  MAX(number) AS number
FROM
  yourTable
GROUP BY
  name 
```

请注意 as`number`是字母数字字段；`n.09`'高于' `n.011`。为了使这在*数字上更加一致*，您需要`n.009`代替`n.09`.

*（由于我不知道您的数字字段的行为，这只是一般说明，而不是关于您的示例数据。）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T10:00:26.030

如果你想要 max`number`和 group by `name`，试试这个。

```
select name, max(number) as number 
from TABLE
group by name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T10:01:46.267

```
SELECT name, 
       'n.' + Cast(Max(Cast(Substring([number], 3, Len([number]) - 2) AS INT)) 
                   AS 
                   VARCHAR(10)) 
FROM   table 
GROUP  BY name 
```

# cuda - 如何使用 CUDA Thrust 通过索引列表从矩阵中收集行

> ID：10752292
> 
> 赞同：2
> 
> 时间：2012-05-25T09:56:18.780
> 
> 标签：cuda, thrust

这似乎是一个简单的问题，但我就是想不出一个优雅的方式来用 CUDA Thrust 做到这一点。

我有一个二维矩阵 NxM 和一个大小为 L 的所需行索引的向量，它是所有行的子集（即 L < N）并且不规则（基本上是一个不规则列表，如 7,11,13,205，... ETC。）。该矩阵按行存储在推力装置向量中。索引数组也是一个设备向量。这是我的两个问题：

1.  从原始 NxM 矩阵复制所需行形成新矩阵 LxM 的最有效方法是什么？
2.  是否可以为原始 NxM 矩阵创建一个迭代器，该迭代器仅取消对属于所需行的元素的引用？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T13:13:34.277

您所问的问题似乎是一个非常直接的流压缩问题，并且使用推力没有任何特别的问题，但是有一些曲折。为了选择要复制的行，您需要有一个流压缩算法可以使用的模板或密钥。这需要使用要复制的行列表通过搜索或选择操作来构建。

执行此操作的一个示例过程如下所示：

1.  构造一个迭代器，它返回输入矩阵中任何条目的行号。推力有一个非常有用的`counting_iterator`，`transform_iterator`可以结合起来做到这一点
2.  执行对该行号迭代器的搜索，以查找哪些条目与要复制的行列表匹配。`thrust::binary search`可用于此。搜索产生流压缩操作的模板
3.  用于使用`thrust::copy_if`模板对输入矩阵执行流压缩。

这听起来像是很多工作和中间步骤，但计数和转换迭代器实际上并没有产生任何中间设备向量。唯一需要的中间存储是模板数组，它可以是一个布尔值（所以 m*n 字节）。

代码中的完整示例：

```
#include <thrust/copy.h>
#include <thrust/binary_search.h>
#include <thrust/iterator/counting_iterator.h>
#include <thrust/iterator/transform_iterator.h>
#include <thrust/device_vector.h>
#include <cstdio>

struct div_functor : public thrust::unary_function<int,int>
{
    int m;
    div_functor(int _m) : m(_m) {};

    __host__ __device__
    int operator()(int x) const
    {
        return x / m;
    }
};

struct is_true
{
    __host__ __device__
    bool operator()(bool x) { return x; }
};

int main(void)
{

    // dimensions of the problem
    const int m=20, n=5, l=4;

    // Counting iterator for generating sequential indices

    // Sample matrix containing 0...(m*n)
    thrust::counting_iterator<float> indices(0.f);
    thrust::device_vector<float> in_matrix(m*n);
    thrust::copy(indices, indices+(m*n), in_matrix.begin());

    // device vector contain rows to select
    thrust::device_vector<int> select(l);
    select[0] = 1;
    select[1] = 4;
    select[2] = 9;
    select[3] = 16;

    // construct device iterator supplying row numbers via a functor
    typedef thrust::counting_iterator<int> counter;
    typedef thrust::transform_iterator<div_functor, counter> rowIterator;
    rowIterator rows_begin = thrust::make_transform_iterator(thrust::make_counting_iterator(0), div_functor(n));
    rowIterator rows_end = rows_begin + (m*n);

    // constructor a stencil array which indicates which entries will be copied
    thrust::device_vector<bool> docopy(m*n);
    thrust::binary_search(select.begin(), select.end(), rows_begin, rows_end, docopy.begin());

    // use stream compaction on the matrix with the stencil array
    thrust::device_vector<float> out_matrix(l*n);
    thrust::copy_if(in_matrix.begin(), in_matrix.end(), docopy.begin(), out_matrix.begin(), is_true());

    for(int i=0; i<(l*n); i++) {
        float val = out_matrix[i];
        printf("%i %f\n", i, val);
    }
} 
```

（通常的免责声明：使用风险自负）

关于我要发表的唯一评论是，`copy_if`调用的谓词感觉有点多余，因为我们已经有一个可以直接使用的二进制模板，但似乎没有压缩算法的变体可以在二进制模板直接。同样，我想不出一种直接在流压缩调用中使用行列表的明智方法。很可能有一种更有效的方法可以通过推力来做到这一点，但这至少应该让你开始。

* * *

从您的评论来看，空间似乎很紧张，并且二进制搜索和模板创建的额外内存开销对于您的应用程序来说是禁止的。在这种情况下，我会遵循我在对 Roger Dahl 的回答的评论中提供的建议，并改用自定义复制内核。推力设备向量可以转换为可以直接传递给内核 ( `thrust::raw_pointer_cast`) 的指针，因此它不需要干扰现有的推力代码。我建议每行使用一个线程块来复制，这允许合并读取和写入，并且应该比使用`thrust::copy`每行更好。一个*非常*简单的实现可能看起来像这样（重用我的大部分推力示例）：

```
#include <thrust/copy.h>
#include <thrust/iterator/counting_iterator.h>
#include <thrust/device_vector.h>
#include <cstdio>

__global__ 
void rowcopykernel(const float *in, float *out, const int *list, const int m, const int n, const int l)
{
    __shared__ const float * inrowp; 
    __shared__ float * outrowp;

    if (threadIdx.x == 0) {
        inrowp = (blockIdx.x < l) ? in + (n*list[blockIdx.x]) : 0;
        outrowp = out + (n*blockIdx.x);
    }
    __syncthreads();

    for(int i=threadIdx.x; (inrowp != 0) && (i<n); i+=blockDim.x) {
        *(outrowp+i) = *(inrowp+i);
    }
}

int main(void)
{
    // dimensions of the problem
    const int m=20, n=5, l=4;

    // Sample matrix containing 0...(m*n)
    thrust::counting_iterator<float> indices(0.f);
    thrust::device_vector<float> in_matrix(m*n);
    thrust::copy(indices, indices+(m*n), in_matrix.begin());

    // device vector contain rows to select
    thrust::device_vector<int> select(l);
    select[0] = 1;
    select[1] = 4;
    select[2] = 9;
    select[3] = 16;

    // Output matrix
    thrust::device_vector<float> out_matrix(l*n);

    // raw pointer to thrust vectors
    int * selp = thrust::raw_pointer_cast(&select[0]);
    float * inp = thrust::raw_pointer_cast(&in_matrix[0]);
    float * outp = thrust::raw_pointer_cast(&out_matrix[0]);

    dim3 blockdim = dim3(128);
    dim3 griddim = dim3(l);
    rowcopykernel<<<griddim,blockdim>>>(inp, outp, selp, m, n, l);

    for(int i=0; i<(l*n); i++) {
        float val = out_matrix[i];
        printf("%i %f\n", i, val);
    }
} 
```

（标准免责声明：使用风险自负）。

执行参数的选择可以做得更漂亮，但除此之外，这应该是所需的全部。如果您的行非常小，您可能希望使用每行的*扭曲*而不是块进行调查（因此一个块复制几行）。如果您有超过 65535 个输出行，那么您将需要使用 2D 网格，或者修改代码以使每个块执行多行。但是，与基于推力的解决方案一样，这应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:39:28.030

如果您不固定推力，请查看[Arrafire](http://www.accelereyes.com/arrayfire/c/)：

令人惊讶的是，与推力不同的是，这个库对下标索引具有原生支持，因此只需几行代码即可解决您的问题：

```
const int N = 7, M = 5;

float L_host[] = {3, 6, 4, 1}; 
int szL = sizeof(L_host) / sizeof(float); 

// generate random NxM matrix with cuComplex data 
array A = randu(N, M, c32); 
// array used to index rows
array L(szL, 1, L_host);

print(A);
print(L);

array B = A(L,span); // copy selected rows of A
print(B); 
```

结果：

```
A =
       0.7402 +       0.9210i       0.6814 +       0.2920i       0.5786 +       0.5538i       0.2133 +       0.4131i       0.7305 +       0.9400i
       0.0390 +       0.9690i       0.3194 +       0.8109i       0.3557 +       0.7229i       0.0328 +       0.5360i       0.8432 +       0.6116i
       0.9251 +       0.4464i       0.1541 +       0.4452i       0.2783 +       0.6192i       0.7214 +       0.3546i       0.2674 +       0.0208i
       0.6673 +       0.1099i       0.2080 +       0.6110i       0.5876 +       0.3750i       0.2527 +       0.9847i       0.8331 +       0.7218i
       0.4702 +       0.5132i       0.3073 +       0.4156i       0.2405 +       0.4148i       0.9200 +       0.1872i       0.6087 +       0.6301i
       0.7762 +       0.2948i       0.2343 +       0.8793i       0.0937 +       0.6326i       0.1820 +       0.5984i       0.5298 +       0.8127i
       0.7140 +       0.3585i       0.6462 +       0.9264i       0.2849 +       0.7793i       0.7082 +       0.0421i       0.0593 +       0.4797i

L = (row indices)
       3.0000 
       6.0000 
       4.0000 
       1.0000

B =
       0.6673 +       0.1099i       0.2080 +       0.6110i       0.5876 +       0.3750i       0.2527 +       0.9847i       0.8331 +       0.7218i
       0.7140 +       0.3585i       0.6462 +       0.9264i       0.2849 +       0.7793i       0.7082 +       0.0421i       0.0593 +       0.4797i
       0.4702 +       0.5132i       0.3073 +       0.4156i       0.2405 +       0.4148i       0.9200 +       0.1872i       0.6087 +       0.6301i
       0.0390 +       0.9690i       0.3194 +       0.8109i       0.3557 +       0.7229i       0.0328 +       0.5360i       0.8432 +       0.6116i 
```

它的工作速度也很快。我使用以下代码使用大小为 2000 x 2000 的 cuComplex 数组对此进行了测试：

```
float *g_data = 0, *g_data2 = 0;
int g_N = 2000, g_M = 2000, // matrix of size g_N x g_M
       g_L = 400;          // copy g_L rows
void af_test() 
{   
  array A(g_N, g_M, (cuComplex *)g_data, afDevicePointer);
  array L(g_L, 1, g_data2, afDevicePointer);
  array B = (A(L, span));
  std::cout << "sz: " << B.elements() << "\n";
}

int main()
{
   // input matrix N x M of cuComplex
   array in = randu(g_N, g_M, c32);
   g_data = (float *)in.device< cuComplex >();
   // generate unique row indices
   array in2 = setunique(floor(randu(g_L) * g_N));
   print(in2);
   g_data2 = in2.device<float>();

   const int N_ITERS = 30;
   try {
     info();
     af::sync();
     timer::tic();

     for(int i = 0; i < N_ITERS; i++) {
       af_test();      
     }
     af::sync();
     printf("af:  %.5f seconds\n",  timer::toc() / N_ITERS);

   } catch (af::exception& e) {
     fprintf(stderr, "%s\n", e.what());
  }
  in.unlock();
  in2.unlock();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T20:54:35.187

我不认为有办法用 Thrust 做到这一点，但是，因为该操作将受内存限制，所以编写一个以最大可能性能执行此操作的内核应该很容易。只需创建与向量中的索引相同数量的线程。让每个线程计算一行的源地址和目标地址，然后用于`memcpy()`复制该行。

您可能还需要仔细考虑是否可以设置后续处理步骤来访问适当的行，从而避免整个、昂贵的“压缩”操作，它只会打乱内存。即使寻址行变得稍微复杂一些（可能需要额外的内存查找和乘法），整体性能可能会好得多。

# c# - 使用数据库打包 C# 应用程序

> ID：10752295
> 
> 赞同：1
> 
> 时间：2012-05-25T09:56:28.303
> 
> 标签：c#, database, mdf

我已经打包了一个使用数据库的 WPF C# 应用程序。

但是，当我安装打包的应用程序时，它使用的是我在开始时通过 Visual Studio (.mdf) 创建的数据库，而不是创建另一个数据库。

打包应用程序的全部目的是为了让我可以在其他计算机上共享它，所以我安装它我需要它来为应用程序的该实例创建一个新数据库。

有没有办法做到这一点？我需要设置一个属性来说明数据库是本地实例吗？或者强制软件包在安装时创建一个新的？

任何帮助将非常感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T11:14:44.027

我自己刚刚在做这件事，我建议的一件事是使用 SQL Compact Edition 使过程变得更容易，但如果现在过程中为时已晚，那么坚持使用当前数据库，但我不知道如果以下方法适用于 MDF 文件。

您如何在客户端计算机上部署应用程序？用户机器是否安装了sql？

您需要做的第一件事是转到 MDF 的属性并确保将复制到输出目录设置为如果更新和构建操作设置为内容的复制。

如果您使用安装项目来安装应用程序，那么您需要确保在项目、应用程序属性、发布、应用程序文件中您的 mdf 在列表中并且设置为数据文件自动、必需和包含。

并右键单击安装程序文件系统中的“应用程序文件夹”，然后添加，项目输出，文件内容

最后更改代码中的连接字符串，使其读取

```
using ( SqlCeConnection sqlCon = new SqlCeConnection( @"Data Source=|DataDirectory|\App.sdf;Persist Security Info=False;" ) 
```

或者如果您没有使用精简版

```
using ( SqlConnection sqlCon = new SqlConnection( @"Data Source=|DataDirectory|\App.mdf;Persist Security Info=False;" ) 
```

^使用“DataDirectory”意味着你不关心用户把应用程序放在哪里，你总是会得到正确的文件

在您运行并将数据库更改为紧凑之前，它不支持正确的 sql 数据库将支持的很多东西。

毕竟，您可能仍然会遇到权限错误，并且因为它很冗长，我可能错过了一步，所以如果您需要更多，请发表评论？

*编辑* 如果用户没有 sql server 或 sql Compact，您最简单的解决方案是要求他们安装 SQL CE，或者有一种使用 DLL 的方法来做同样的事情，但我无法让它工作

链接在这里[http://msdn.microsoft.com/en-us/library/aa983326.aspx](http://msdn.microsoft.com/en-us/library/aa983326.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T10:06:06.080

确保您的数据库部署在客户端，并将应用程序中的连接字符串更改为指向它。

# javascript - 如何使用会话创建登录页面 node.js

> ID：10752300
> 
> 赞同：0
> 
> 时间：2012-05-25T09:56:42.460
> 
> 标签：javascript

我刚刚听说了 node.js，我做了一些非常好的例子，现在我想创建一个带有会话功能的登录页面。暂时我更喜欢在我的代码中使用恒定的用户名和密码作为 var un ="admin"; 密码="123456";

请帮助我，我很新谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T16:19:14.170

Check out [Expressjs](http://expressjs.com) as a framework for building your web servers. In the "examples" folder of the [GitHub Repo](http://github.com/visionmedia/express) it shows an example of how to include session support and authorization.

# java - 泛型的泛型和更通用的赋值

> ID：10752303
> 
> 赞同：7
> 
> 时间：2012-05-25T09:56:49.293
> 
> 标签：java, generics

有时我只是没有得到泛型。我经常在代码中使用最通用的集合版本。例如，如果我需要一组任何东西，我会写如下内容：

```
Set<?> set1 = new HashSet<Object>(); 
```

它是编译器允许的，为什么不应该 -`Set<?>`与`Set<Object>`（甚至更通用..）一样通用。但是，如果我使用“泛型的泛型”使其“更通用”就行不通：

```
Set<Class<?>> singletonSet = new HashSet<Class<Object>>(); // type mismatch 
```

到底是怎么回事？为什么`Set<Object>`可分配给`Set<?>`和`Set<Class<Object>>`不可分配给`Set<Class<?>>`？

* * *

*我总能找到解决这类问题的方法，但在这种情况下，我真的很想知道为什么不允许这样做，而**不是**解决方法。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T20:09:59.343

鉴于这种：

```
Set<?> set1 = new HashSet<Great>(); 
```

如果您可视化无界通配符的含义，则可以将无界通配符上的开槽类型与 进行比较`extends`，因此如果您明确地这样做。

```
Set<? extends Object> set1 = new HashSet<Great>(); 
```

阅读，是伟大的扩展对象吗？是的，这样编译。

然后给出这个：

```
Set<Class<Great>> set3 = new HashSet<Class<Great>>(); 
```

至于它为什么起作用，如果你提取 Set 和 HashSet 的参数，它们是`Class<Great>`，这两个`Class<Great>`是完全相同的类型。

如果**没有**通配符，则直接逐字比较类型。

如果我们编写 set3 使其接受协变类型（编译）：

```
Set<? extends Class<Great>> set3a = new HashSet<Class<Great>>(); 
```

要阅读，HashSet 的`Class<Great>`类型与 Set 的类型兼容还是协变`Class<Great>`？是的。因此它编译。

尽管如果它们只是完全相同的类型，当然没有人会编写那种变量声明，但这是多余的。编译器使用通配符来确定赋值右侧的泛型的具体类或接口参数是否与左侧泛型的具体/接口兼容（理想情况下是接口，如下所示）。

```
List<? extends Set<Great>> b = new ArrayList<HashSet<Great>>(); 
```

阅读它，是`HashSet<Great>`协变的`Set<Great>`吗？是的。因此它编译

* * *

所以让我们回到你的代码场景：

```
Set<Class<?>> set3 = new HashSet<Class<Object>>(); 
```

在这种情况下，同样的规则适用，您从最里面开始阅读它，对象是否与通配符兼容？是的。然后，您转到下一个最外面的类型，它恰好没有通配符。因此，在没有通配符的情况下，编译器将在`Class<Object>`和之间进行逐字检查`Class<?>`，它们不相等，因此会出现编译错误。

如果它在最外面有通配符，那将编译。所以你可能的意思是这个，**它编译**：

```
Set<? extends Class<?>> singletonSet = new HashSet<Class<Object>>(); 
```

让我们做一个更有启发性的例子，让我们使用接口（类是具体类型），比如 Set。这编译：

```
List<? extends Set<?>> b = new ArrayList<HashSet<Object>>(); 
```

因此，从内到外阅读它以找出该代码编译的原因，并明确执行：

1.  最里面：`Object`兼容`? Extends Object`吗？是的。

2.  最外层：是否`HashSet<Object>`兼容`? extends Set<? extends Object>`？是的。

在数字 1 上，它是这个（编译）：

```
Set<? extends Object> hmm = new HashSet<Object>(); 
```

在数字 2 上，它是这个（编译）：

```
List<? extends Set<? extends Object>> b = new ArrayList<HashSet<Object>>(); 
```

现在让我们尝试删除最外面的通配符，编译器不会进行类型兼容/协变检查，现在将逐字比较。

所以你现在知道下面的答案了，这些可以编译吗？

```
List<Set<?>> b = new ArrayList<HashSet<Object>>();

// this is same as above:
List<Set<? extends Object>> b = new ArrayList<HashSet<Object>>(); 
```

所以你已经猜到了，正确的......这不会编译:-)

要更正上述问题，请执行以下任一操作：

```
List<? extends Set<? extends Object>> b = new ArrayList<HashSet<Object>>();

List<? extends Set<?>> b = new ArrayList<HashSet<Object>>(); 
```

然后，要更正您的代码，请执行以下任一操作：

```
Set<? extends Class<? extends Object>> singletonSet = 
                                       new HashSet<Class<Object>>();

Set<? extends Class<?>> singletonSet = new HashSet<Class<Object>>(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-25T10:06:48.883

泛型在 Java 中不是协变的。这个问题可以帮助你：

[java泛型协方差](https://stackoverflow.com/questions/2660827/java-generics-covariance)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T10:08:00.100

我在jdk1.6.0_22下的eclipse中尝试了以下：

```
Set<Class<?>> singletonSet = new HashSet<Class<Object>>(); 
```

编译器给了我以下信息：

```
Type mismatch: cannot convert from HashSet<Class<Object>> to Set<Class<?>> 
```

我把它改成了这个，它起作用了：

```
HashSet<Class<Object>> singletonSet = new HashSet<Class<Object>>(); 
```

似乎泛型的泛型必须具有相同的集合类和收集的对象的相同类。

这似乎是 java 中的一条规则，可能是因为运行时容易出错，这可能导致严重崩溃。所以以这种方式编写它也可以工作：

```
HashSet<Class<?>> singletonSet = new HashSet<Class<?>>(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T10:23:04.227

```
Set<Class<?>> 
```

这说：一组任何类型的类

```
HashSet<Class<Object>> 
```

这表示：必须是 Object 类型的类的 HashSet - 因此只允许 Object.class 对象 - 这没有多大意义，因为 Object 只有一个类对象。

我认为这个问题仍然有效，但也许您可以选择与使用 Class 不同的示例。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-25T10:08:38.187

这里的答案是它接受任何类型的 Object 类型。

因此，您必须在下面写

```
Set<Class<?>> val = new HashSet<Class<?>>(); 
```

在这里你可以存储任何类型`Object`的`Set`

# php - javascript onload重置时间戳循环问题

> ID：10752304
> 
> 赞同：2
> 
> 时间：2012-05-25T09:56:51.107
> 
> 标签：php, javascript, jquery, html, ajax

我通常使用 VBA 和 MySQL 进行开发，但我的任务是创建一个实时仪表板以放置在我办公室周围的屏幕上。为此，我使用 PHP 和 javascript。仪表板包含两个主要部分，一个通过谷歌分析 API 调用网站流量数据，另一个从我们的内部数据库调用销售数据。

我在单独的模块中用 PHP 编写了单独的两半，我使用仪表板网页下面的代码调用这些模块，使用循环每十秒独立刷新每个模块。问题是我想在屏幕上包含两个计时器，从最后一次加载每个模块开始以秒为单位向上计数，我正在使用以下代码尝试使用当前时间重置一个变量以促进这一点加载每个文档时。

```
var sales_string_unix = 0;
var sales_string_google = 0;

setInterval(function(){

    $(document).ready(function() {
        $('#google_data').load('fetch_google_data.php');
        sales_string_unix = new Date().getTime();   
    });

 }, 10000); 

setInterval(function(){

    $(document).ready(function() {
        $('#sales_data').load('fetch_sales_data.php');
        sales_string_google = new Date().getTime(); 
     });

}, 10000); 
```

我的问题是时间戳变量在循环执行时每十秒重置一次，而不是在模块刷新时重置。到目前为止，谷歌的 6 小时没有返回任何有用的东西，我希望我可能遗漏了一些超出我经验的简单内容。任何帮助将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T10:02:10.947

您需要将时间戳更新代码放在`load()`AJAX 调用完成时运行的回调函数中。您也不需要`document.ready`每个函数内的处理程序。试试这个：

```
var sales_string_unix = 0;
var sales_string_google = 0;

setInterval(function(){
    $('#google_data').load('fetch_google_data.php', function() {
        sales_string_unix = new Date().getTime();  
    });          
}, 10000); 

setInterval(function() {
    $('#sales_data').load('fetch_sales_data.php', function() {
        sales_string_google = new Date().getTime(););
    });
}, 10000); 
```

但是请注意，这些变量只有在 AJAX 调用完成后才会被填充，因此您不能在 AJAX 调用自身之后直接使用它们。您需要从回调函数本身运行或调用依赖于时间戳的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:59:25.940

您不需要函数中的 $(document).ready() ，只需将它放在外面一次

```
var sales_string_unix = 0;
var sales_string_google = 0;
$(document).ready(function() {
    setInterval(function(){
        $('#google_data').load('fetch_google_data.php');
        sales_string_unix = new Date().getTime();   
    }, 10000); 

    setInterval(function(){
        $('#sales_data').load('fetch_sales_data.php');
        sales_string_google = new Date().getTime(); 
    }, 10000);
}); 
```

# android - 如何使用 AchartEngine 同时滚动两个图表？

> ID：10752305
> 
> 赞同：0
> 
> 时间：2012-05-25T09:56:52.740
> 
> 标签：android, achartengine

我有一个使用 AchartEngine 来显示两个图形的 android 应用程序。一切都已启动并运行，我可以单独滚动每个图表。但是，我希望能够使两个图表同时滚动，这意味着如果滚动一个图表，另一个图表将滚动相同的量。有人对如何进行有任何指示吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:09:57.137

您可以在每个图表上添加一个监听器并相应地更改另一个图表，如下所示：

对于第一个图表 mChartView_1

```
mChartView_1.addPanListener(new PanListener() {
    public void panApplied() {
        mRenderer_2.setRange(new double[] { 
            mRenderer_1.getXAxisMin(), 
            mRenderer_1.getXAxisMax(), 
            mRenderer_1.getYAxisMin(), 
            mRenderer_1.getYAxisMax() 
        });
    }
  }); 
```

对于第二个图表 mChartView_2

```
mChartView_2.addPanListener(new PanListener() {
    public void panApplied() {
        mRenderer_1.setRange(new double[] { 
            mRenderer_2.getXAxisMin(), 
            mRenderer_2.getXAxisMax(), 
            mRenderer_2.getYAxisMin(), 
            mRenderer_2.getYAxisMax() 
        });
    }
  }); 
```

应该可以，但我自己没有尝试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T12:28:20.710

将 repaint() 函数添加到上述 2 个代码片段。只有当我们重新粉刷时它才会起作用。

```
mChartView_2.repaint();    // for mChartView_1 pan listener

mChartView_1.repaint();    // for mChartView_2 pan listener 
```

晚了。但是，希望它对未来的读者有所帮助。

# c# - 使用 FluentAssertions 将可空类型与其基础类型进行比较时，这是一个错误吗？

> ID：10752307
> 
> 赞同：6
> 
> 时间：2012-05-25T09:57:14.207
> 
> 标签：c#, comparison, nunit, nullable, fluent-assertions

当我遇到一个测试失败时，我正在为实用程序库编写一些单元测试，该测试实际上通过了。这个问题与比较两个`float`变量有关，而不是比较一个变量`float?`和一个`float`变量。

我正在使用 NUnit (2.6.0.12051) 和 FluentAssertions (1.7.1) 的最新版本，下面是一段小代码，说明了这个问题：

```
using FluentAssertions;
using FluentAssertions.Assertions;
using NUnit.Framework;

namespace CommonUtilities.UnitTests
{
    [TestFixture]
    public class FluentAssertionsFloatAssertionTest
    {
        [Test]
        public void TestFloatEquality()
        {
            float expected = 3.14f;
            float notExpected = 1.0f;
            float actual = 3.14f;

            actual.Should().BeApproximately(expected, 0.1f);
            actual.Should().BeApproximately(notExpected, 0.1f); // A: Correctly fails (Expected value 3,14 to approximate 1 +/- 0,1, but it differed by 2,14.)
            actual.Should().BeInRange(expected, expected);
            actual.Should().BeInRange(notExpected, notExpected); // B: Correctly fails (Expected value 3,14 to be between 1 and 1, but it was not.)
        }

        [Test]
        public void TestNullableFloatEquality()
        {
            float expected = 3.14f;
            float notExpected = 1.0f;
            float? actual = 3.14f;

            actual.Should().BeApproximately(expected, 0.1f);
            actual.Should().BeApproximately(notExpected, 0.1f); // C: Passes (I expected it to fail!)
            actual.Should().BeInRange(expected, expected);
            actual.Should().BeInRange(notExpected, notExpected); // D: Correctly fails (Expected value 3,14 to be between 1 and 1, but it was not.)
        }
    }
} 
```

正如您从我的评论中看到的那样，*A*和*B*`TestFloatEquality()`都正确失败（只需注释掉第一个失败的测试即可进入第二个）。

 **然而`TestNullableFloatEquality()`，*D*通过但*C*失败。我本来预计*C*也会在这里失败。顺便提一下，如果我使用 NUnit 添加断言：

```
Assert.AreEqual(expected, actual); // Passes
Assert.AreEqual(notExpected, actual); // Fails (Expected: 1.0f But was:  3.1400001f) 
```

那些按预期通过和失败。

所以，对于这个问题：这是 FluentAssertions 中的一个错误，还是我错过了可空比较方面的一些东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T11:23:20.363

这是一个错误。我在 1.7.x 发布分支和主干中都修复了这个问题。新的 2.0.0 的开发仍在进行中，所以我们可能最终决定发布 1.7.2。

有关确切状态，请参阅[http://fluentassertions.codeplex.com/workitem/12199](http://fluentassertions.codeplex.com/workitem/12199)。**

# html - 选择父母的兄弟姐妹

> ID：10752310
> 
> 赞同：1
> 
> 时间：2012-05-25T09:58:01.090
> 
> 标签：html, css, css-selectors

我有这个 HTML：

```
<font>
   <b>
      <a href="profile/user">user</a>
   </b>
   <font>message</font>
</font> 
```

我知道字体标签很烂，但他们想要字体标签，所以我放了字体标签。我可以选择用户名， `a[href*="user"]` 但我也希望能够选择包含消息的字体。这可能与 CSS 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T09:59:41.853

您不能使用 CSS 将级别提升到元素的父级。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T10:09:51.667

您不能使用 CSS 选择父级 - 您可能会发现这是本主题的有趣读物：[为什么我们没有父级选择器](http://snook.ca/archives/html_and_css/css-parent-selectors)。但是，您可以执行以下操作之一：

**1.**使用一点 JavaScript

**2.**将您的 HTML 更改为

```
<font>
   <a href="profile/user"><b>user</b></a>
   <font>message</font>
</font> 
```

你可以这样做：

```
a[href*="user"] + font { /* YOUR STYLES HERE */ } 
```

# ios5 - 如何在 iOS5/Ipad 上的 GLkit 视图上绘制视图

> ID：10752313
> 
> 赞同：1
> 
> 时间：2012-05-25T09:58:19.543
> 
> 标签：ios5, opengl-es, uistoryboard

我正在 iOS5 上创建一个 GLK 视图。

首先，我创建上下文。

```
GLKView *view = (GLKView *)self.view;
view.context = self.context;
view.drawableDepthFormat = GLKViewDrawableDepthFormat24;

[self setupGL]; 
```

其次，我画了一个三角形移动。

这行得通。

现在，我想在 GLKview 上创建一个视图。因此，我使用 Storyboard 绘制了一个背景为红色的视图（HUDView），并将其放在主视图上。当我运行应用程序时，只出现 openGL，我假设红色背景视图在 GLKView 后面绘制。为什么？

我曾尝试在 Hudview -> viewDidLoad 上使用

```
[self bringSubviewToFront:self]; 
```

但问题没有发生。

知道我该如何解决这个问题吗？？？？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:58:35.393

我找到了一个可以解决问题的样本。[Glfun](https://bitbucket.org/pyanfield/testios4/src/b92b03d3083c/GLFun/)是一个绘制 openGL 层的示例，您可以在其上添加一个 hud 视图。希望对人们有所帮助：D

# mercurial - 如何配置使用单个 ssh 帐户访问的 mercurial 服务器以根据正在使用的密钥选择用户名？

> ID：10752314
> 
> 赞同：1
> 
> 时间：2012-05-25T09:58:20.337
> 
> 标签：mercurial

我有几个 mercurial 服务器，人们正在使用单个用户推送更改`hg`，并且只使用 ssh 公钥身份验证，每个人都有自己的密钥。

**如何配置服务器，以便它根据正在使用的公钥选择用户名进行推送？**

可能吗？如果不是，为什么以及有什么替代方法，所以我不必`.hgrc`在我连接到的每个帐户 * 机器上配置用户名。

另外，考虑一下其他用例：你有一个由 root 在机器上克隆的 hg 存储库，两个不同的人正在连接这台机器（以 root 身份），进行更改并尝试提交和推送更改。

这两个使用相同的帐户，但它们使用不同的 ssh 密钥连接，所以你想看看是谁做的。目前，这些将显示为 .hgrc 中配置的用户

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T10:58:34.927

“用于推送的用户名”，即推送时用于*认证*的用户名和密码与显示的用户名**无关**`hg log`。

当您进行**提交**时，Mercurial 会记录正在运行的用户的名称`hg commit`。这通常是`~/.hgrc`为该用户配置的。此信息是变更集的一部分，以后无法更改。

`hg commit`对于您在登录时运行多个不同管理员的特定用例`root`，我建议*不要*在`~/.hgrc`. 当您提交时，Modern Mercurial 将中止。每次使用当然很烦人`hg commit -u`，所以幸运的是可以通过配置`HGUSER`环境变量来设置用户名。这样您就可以在每个会话的基础上配置用户名，而无需使用持久配置。

要`HGUSER`在执行 ssh 时通过，请参阅[Can I forward env variables over ssh?](https://stackoverflow.com/questions/4409951/can-i-forward-env-variables-over-ssh)

当我使用这个方案时，我只是在命令行历史记录中找到了正确的用户名，方法是按 Ctrl-r 并搜索`HGUSER`. 您可能还可以在 shell 启动脚本中设置一些东西，您可以在其中查看密钥`ssh-add -L`并在此基础上设置正确的用户名。

# c# - 使用 c# 和 xaml 在 Metro App 中显示 svg

> ID：10752316
> 
> 赞同：5
> 
> 时间：2012-05-25T09:58:22.913
> 
> 标签：c#, xaml, svg, windows-runtime

我正在使用 XAML 和 C# 处理 Windows 8 Metro 应用程序

我有一个 SVG 图像的 Uri，它确实有效，但我不知道如何获取该图像并将其显示在 XAML 中。

还是无法使用 SVG în .NET Core？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T14:26:36.887

一种方法是将 SVG 转换为 XAML 路径 - 您可以在任何 XAML 视图/控件中显示。我使用这种方法在我的应用程序中显示矢量图标。快速搜索 SVG 到 (http://benpittoors.wordpress.com/2009/03/17/convert-svg-to-xaml/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T12:40:01.213

> 还是无法使用 SVG în .NET Core？

.NET Metro 配置文件不是 .NET 4.5 完整配置文件，甚至不是 .NET 客户端配置文件。Metro 应用程序的要求或限制之一是无法链接到未使用 Metro Profile 编译的任何内容。

我建议您改用 WPF。

# php - 检查 cakephp 上的路由 url

> ID：10752318
> 
> 赞同：0
> 
> 时间：2012-05-25T09:58:26.047
> 
> 标签：php, cakephp, cakephp-2.0

大家好，我在 cakephp 2 网站上有这样的菜单：

```
<ul class="nav">
<li><?php echo $this->Html->link('Home', array('controller' => 'posts', 'action' => 'index')); ?></li>
<li><?php echo $this->Html->link('Add post', array('controller' => 'posts', 'action' => 'add')); ?></li>
<li><a href="#contact">Contact</a></li>
</ul> 
```

我必须检查我是否在页面上以在菜单链接上添加 class="selected"。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:08:56.983

在您的视图文件中，您还可以执行以下操作：

```
$this->request->params 
```

我建议您编写自己的助手，该助手将实现一个与 HtmlHelper::link 具有相同参数的方法，并在内部调用并返回 HtmlHelper，但在此之前它将 $this->request->params 与传递的第一个 arg 数组进行比较。如果匹配，您可以在第三个参数中注入类名。

像这样的东西，你自己实现它：

```
class MyHelper extends AppHelper {
    public $helpers = array('Html');
    public function link($title, $url, $options) {
    /** 
     * if ($this->View->request->params ...
     * do your matching logic here
     * and if it matches: $options['class'] = 'active';
     */
    return $this->Html->link($title, $url, $options
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:42:25.170

不久前我写了一个（CakePHP 1.2）助手，它会自动执行此操作：

[http://richardathome.com/blog/cakephp-smarter-links](http://richardathome.com/blog/cakephp-smarter-links)

将其移植到 2.0 应该很简单

# xml - 识别上下文节点在另一个节点集中的位置

> ID：10752319
> 
> 赞同：2
> 
> 时间：2012-05-25T09:58:27.877
> 
> 标签：xml, xslt, xpath

我有一个如下所示的 XML 文档：

```
<Root>
    <Cover>
        <Cover_Ref Val="1"/>
        <Cover_Code Val="Food in transit"/>
        <AdditionalCover>
            <AdditionalCover_Area Val="Sussex"/>
        </AdditionalCover>
    </Cover>
    <Cover>
        <Cover_Ref Val="2"/>
        <Cover_Code Val="Frozen goods"/>
    </Cover>
    <Cover>
        <Cover_Ref Val="3"/>
        <Cover_Code Val="Business equipment"/>
        <AdditionalCover>
            <AdditionalCover_Area Val="Sussex"/>
        </AdditionalCover>
    </Cover>
    <AdditionalCoverResult>
        <CoverArea Val="Sussex"/>
        <CoverExcluded Val="N"/>
    </AdditionalCoverResult>
    <AdditionalCoverResult>
        <CoverArea Val="Sussex"/>
        <CoverExcluded Val="Y"/>
    </AdditionalCoverResult>
</Root> 
```

我需要把它变成这样的东西：

```
<Insurances>
    <Insurance>
        <reference>1</reference>
        <CoverType>Food in transit</CoverType>
        <Region>Sussex</Region>
        <Excluded>N</Excluded>
    </Insurance>
    <Insurance>
        <reference>2</reference>
        <CoverType>Frozen goods</CoverType>
    </Insurance>
    <Insurance>
        <reference>3</reference>
        <CoverType>Business equipment</CoverType>
        <Region>Sussex</Region>
        <Excluded>Y</Excluded>
    </Insurance>
</Insurances> 
```

AdditionalCoverResult 元素指的是包含 AdditionalCover 元素的 Cover 元素——因此第一个 Cover 元素的封面不被排除，而第三个 Cover 元素的封面被排除。第二个封面元素没有 AdditionalCover，因此没有引用它的 AdditionalCoverResult 元素。

我的问题是，在一个`<xsl:for-each select="//Cover">`循环中，我想不出一种方法来识别我应该寻找哪个 AdditionalCoverResult 元素。在 for-each 中使用`position()`最终会导致我错误地为没有 AdditionalCover 的 Cover 元素输出 AdditionalCoverResult 信息。

我必须保留 Cover 的原始顺序，所以我不能做两个单独的循环，一个用于带有 AdditionalCover 的 Cover，一个用于不带 AdditionalCover 的 Cover。

在返回的节点集中，`//Cover`有没有一种方法可以识别上下文节点在返回的节点集中的位置`//Cover[AdditionalCover]`？

我有点猜测，对于 Cover 元素，我需要考虑“我在什么索引中，`//Cover[AdditionalCover]`以便我可以使用该索引来识别我相应的 AdditionalCoverResult 元素？”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T04:39:57.260

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
  <Insurances>
   <xsl:apply-templates select="Cover"/>
  </Insurances>
 </xsl:template>

 <xsl:template match="Cover">
  <Insurance>
   <xsl:apply-templates/>
  </Insurance>
 </xsl:template>

 <xsl:template match="Cover_Ref">
  <reference><xsl:value-of select="@Val"/></reference>
 </xsl:template>

 <xsl:template match="Cover_Code">
  <CoverType><xsl:value-of select="@Val"/></CoverType>
 </xsl:template>

 <xsl:template match="AdditionalCover_Area">
  <Region><xsl:value-of select="@Val"/></Region>

  <Excluded>
    <xsl:value-of select=
    "/*/AdditionalCoverResult[CoverArea/@Val=current()/@Val]
             [position()
             =
              1 +count(current()
                       /ancestor::Cover[1]
                          /preceding-sibling::Cover
                            [AdditionalCover
                              /AdditionalCover_Area/@Val
                            =
                             current()/@Val
                            ]
                      )
              ]
               /CoverExcluded/@Val
    "/>
  </Excluded>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<Root>
    <Cover>
        <Cover_Ref Val="1"/>
        <Cover_Code Val="Food in transit"/>
        <AdditionalCover>
            <AdditionalCover_Area Val="Sussex"/>
        </AdditionalCover>
    </Cover>
    <Cover>
        <Cover_Ref Val="2"/>
        <Cover_Code Val="Frozen goods"/>
    </Cover>
    <Cover>
        <Cover_Ref Val="3"/>
        <Cover_Code Val="Business equipment"/>
        <AdditionalCover>
            <AdditionalCover_Area Val="Sussex"/>
        </AdditionalCover>
    </Cover>
    <AdditionalCoverResult>
        <CoverArea Val="Sussex"/>
        <CoverExcluded Val="N"/>
    </AdditionalCoverResult>
    <AdditionalCoverResult>
        <CoverArea Val="Sussex"/>
        <CoverExcluded Val="Y"/>
    </AdditionalCoverResult>
</Root> 
```

**产生想要的正确结果**：

```
<Insurances>
   <Insurance>
      <reference>1</reference>
      <CoverType>Food in transit</CoverType>
      <Region>Sussex</Region>
      <Excluded>N</Excluded>
   </Insurance>
   <Insurance>
      <reference>2</reference>
      <CoverType>Frozen goods</CoverType>
   </Insurance>
   <Insurance>
      <reference>3</reference>
      <CoverType>Business equipment</CoverType>
      <Region>Sussex</Region>
      <Excluded>Y</Excluded>
   </Insurance>
</Insurances> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:11:28.693

您可以将您感兴趣的当前上下文的一部分存储在变量中 - 例如：

```
<xsl:for-each select="//Cover">

  ...

  <xsl:variable name="additional" select="AdditionalCover/AdditionalCover_Area/@Val"/>
  <xsl:if select="$additional">
    <Excluded>
      <xsl:value-of select="AdditionalCoverResult[CoverArea/@Val = $additional]/CoverExcluded/@Val"/>
    </Excluded>
  </xsl:if>
</xs:for-each> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T10:11:54.750

发布问题后，我在相关部分看到了一个链接 - [xpath/xslt 以确定上下文节点相对于所有同名节点的索引？](https://stackoverflow.com/questions/2527230/xpath-xslt-to-determine-index-of-context-node-relative-to-all-nodes-of-same-name)

Dimitre Novatchev 的回答指出，通过使用

```
count(preceding::question)+1 
```

您可以找到当前上下文节点相对于`question`文档中所有元素的索引。

对于我使用的问题`count(preceding::Cover[AdditionalCover])+1`并且它有效 - 我希望我已经正确理解它，但它似乎确实可以解决问题。

我不会立即选择此作为正确答案，因为如果有人有任何其他方法，我会非常感兴趣 - 我可能是 XSLT 的中级水平，这是了解更多信息的好机会！

# android - 如果我在 Google Play 上发布更新而不增加版本代码，新版本是否可用于新安装？

> ID：10752322
> 
> 赞同：5
> 
> 时间：2012-05-25T09:58:45.190
> 
> 标签：android, google-play

我在 Google Play 中发布了一个应用程序。

我的应用程序与某些屏幕尺寸不兼容（未向所有设备显示），因此我修复了该问题。

现在我想发布固定的应用程序，但不需要为已经安装了我的应用程序的人进行更新。

在不增加版本号和更新固定 APK 的情况下这是否可能？还是我必须做其他事情？

如果我发布更新，新版本需要多长时间才能上市？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-25T10:04:35.317

您**不能**`android:versionCode`在不增加值的情况下上传更新的 .apk 文件。Google Play 不允许您继续进行此类上传。

您的更新可能需要几个小时才会出现在 Google Play 中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-16T22:34:45.323

您必须更新`versionCode`，但`versionName`可以保持不变。

因此，虽然这可能是您第二次上传应用程序，但如果版本名称与以前相同，用户不会注意到任何差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T10:06:06.467

不，当您在不更改版本代码的情况下将新的 APK 文件上传到 Google Play 时会出现错误。

# linux - XMonad：按下生成键时具有焦点的 SpawnOn 工作区

> ID：10752325
> 
> 赞同：8
> 
> 时间：2012-05-25T09:58:54.183
> 
> 标签：linux, haskell, xmonad

我想让我的程序在按下键绑定时焦点所在的屏幕上生成，而不是在完成加载时当前焦点所在的屏幕上。

**原因：** 我当前的设置是 Arch Linux + XMonad，我让它在 6 台显示器上运行。我已经使用 XMonad 大约一年了，我唯一的问题是打开需要一点时间的程序。例如，我第一次启动 chromium 时需要 3 秒才能加载。我按下我的 chrome 键绑定，然后转到另一个屏幕做其他事情。但是，当 chrome 加载时，它会加载到我当前关注的屏幕上，而不是在按下 spawn 键绑定时关注的屏幕上。

我的haskell技能很好……不存在。我以前用 Lisp 编程过，并且在 C、python 和 JavaScript 上花了很多时间，所以我确信如果需要我可以把它捡起来（所以当涉及到答案中的 haskell 示例时，请清楚）。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-25T11:33:16.960

我找到了自己问题的答案。

首先，您必须添加到您的导入：

```
import XMonad.Actions.SpawnOn 
```

然后在你的主要功能下有类似的东西：

```
main = do
xmonad $ defaultConfig
    {    
         manageHook = myManageHooks <+> manageSpawn <+> manageDocks <+> manageHook defaultConfig
       , startupHook = myStartupHook
       , ETC..... 
```

这里的关键是`manageSpawn`在行中`manageHook`添加。

然后将您`spawn`的 s替换为`spawnHere`：

```
 , ((modMask, xK_w), spawn "chromium") 
```

变成：

```
 , ((modMask, xK_w), spawnHere "chromium") 
```

# wordpress - 动态创建 Wordpress 类别模板

> ID：10752327
> 
> 赞同：0
> 
> 时间：2012-05-25T09:58:57.987
> 
> 标签：wordpress, wordpress-theming, categories

我想创建一个插件，当我创建子类别时，它将使用类别 slug 名称动态创建类别模板。

就像我有一个类别新闻。为此，我有一个模板“category-news.php”。现在我在名为“最新消息”的新闻下创建一个新的子类别。因此，我想在我的主题文件夹中创建一个实用名为“category-latest-news.php”的文件，并将 category-news.php 模板代码放入其中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:06:37.810

您可以使用 php 的 fopen 和 fwrite 创建文件，然后以编程方式在文件顶部插入模板名称。

获取当前页面的父 ID：

```
$parents = get_post_ancestors( $post->ID );
$parentsid = $parents[count($parents)-1]; 
```

然后你可以使用[Make Wordpress subcategories use Category Template中的代码](https://stackoverflow.com/questions/3114934/make-wordpress-subcategories-use-category-template)

```
function myTemplateSelect() {
    if (is_category() && !is_feed()) {
        if (is_category(get_cat_id('projects')) || cat_is_ancestor_of(get_cat_id('projects'), get_query_var('cat'))) {
            load_template(TEMPLATEPATH . '/category-projects.php');
            exit;
        }
    }
}

add_action('template_redirect', 'myTemplateSelect'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:52:12.267

使用模板过滤器

```
add_filter( 'template_include', 'template_include', 10 ); 
```

并将模板更改为

```
function template_include($template)
{

    if(your condition here){
        $template = get_template_directory().'/your-template.php';
    }

    return $template;
} 
```

# iphone - 已加载 xib 但未加载先前的视图控制器？

> ID：10752330
> 
> 赞同：1
> 
> 时间：2012-05-25T09:59:21.417
> 
> 标签：iphone, ios, xcode, ios5, xcode4

我已经使用基于选项卡的应用程序创建了一个应用程序。通过在第二个视图控制器.xib 中的第一个视图控制器中选择一个按钮。xib 图像必须加载。我有第二个视图控制器.xib 但问题是如果我选择第一个选项卡它没有加载。这是我在 firstview.controller.h 中的代码

```
@property (unsafe_unretained, nonatomic) IBOutlet UIButton *aboutus;
- (IBAction)showabout:(id)sender; 
```

第一视图控制器.m

```
- (IBAction)showabout:(id)sender {
[[NSBundle mainBundle] loadNibNamed:@"SecondViewController" owner:self options:nil];} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:15:10.467

尝试这个：

```
- (IBAction)showabout:(id)sender 
{
 SecondViewController *scv = [[SecondViewController alloc]initWithNibName:@"SecondViewController" bundle:nil];
 [self.view addSubview:scv.view];
 [scv release];
} 
```

# objective-c - NSNotificationCenter 不工作，我做错了什么？

> ID：10752331
> 
> 赞同：0
> 
> 时间：2012-05-25T09:59:22.290
> 
> 标签：objective-c, xcode, exc-bad-access, nsnotificationcenter

我正在使用 cocos3D（但这没关系..）

```
@interface MyScene : CC3Scene
{
    MyObject *theObject;
    GameLogic *gLogic;
}
@implementation MyScene
-(void)initializeScene
{
    gLogic = [[[GameLogic alloc] init] autorelease];
    theObject = [[[MyObject alloc] init] autorelease];
    [self addChild:theObject];
    [[NSNotificationCenter defaultCenter] addObserver:gLogic 
                                             selector:@selector(testHandler:) 
                                                 name:@"objectMoved" 
                                               object:theObject];
} 
```

在 GameLogic 中，我有一个简单的通知处理程序（也在标题中声明）...

```
-(void)testHandler:(NSNotification*)notification
{
    NSLog(@"Notification: %@", [notification name]);
} 
```

在 MyObject 中，到了时候，我调用这个方法

```
-(void)dispatchEvent
{
    NSLog(@"SHOULD DISPATCH THE EVENT");
    [[NSNotificationCenter defaultCenter] postNotificationName:@"objectMoved" object:self];
    NSLog(@"EVENT DISPATCHED");
} 
```

但它崩溃突出显示 postNotificationName 行......错误是 EXC_BAD_ACCESS 意思（如果我理解正确）有一些对已释放对象的引用......

发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:07:14.123

似乎您有两个或更多实例`MyObject`，一个是您在其中创建的`initializeScene`，另一个是发布通知的。`nil`作为对象参数传递应该可以工作：

```
[[NSNotificationCenter defaultCenter] addObserver:gLogic 
                                         selector:@selector(testHandler:) 
                                             name:@"objectMoved" 
                                           object:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:07:52.167

最可能的原因是您实际上并未调用`addObserver:selector:name:object:`. 您那里没有日志记录线；你确定代码正在运行吗？

第二个最可能的原因是您在发布通知之前调用了 removeObserver:。这在 dealloc 中最常见（`removeObserver`如果您曾经观察到任何东西，应该总是调用它）。这里的错误是您的观察对象在通知之前已释放。

在您的代码对象中未正确设置`addObserver`

# sql - SQL-Server 2008：如何使用计数器更新字段？

> ID：10752334
> 
> 赞同：2
> 
> 时间：2012-05-25T09:59:33.287
> 
> 标签：sql, sql-server, sql-server-2008

在 PostgrSQL 上，我这样做没问题：

```
CREATE SEQUENCE serial_olw START 1;
update collections_elements set elementorder=(nextval('serial_olw')-1) WHERE collections_elements.collectionid=1;
drop sequence serial_olw; 
```

示例：1,2,3,4,5,6...

在 MS-SQL Server 2008 上没有函数 SEQUENCE... 所以我尝试了这个：

```
DECLARE @i int
SET @i = 0

WHILE @i<44
    BEGIN
    UPDATE collections_elements set elementorder=(@i) WHERE collections_elements.collectionid=1
        SET @i=@i+1
    END 
```

但我在那个循环中没有成功......

示例：43,43,43,43,43...

任何解决方案的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T10:04:54.360

```
Update t
Set t.elementorder = t.RowID
From
(
    Select ROW_NUMBER() Over(Order by collectionid) as RowID, * From collections_elements
)t 
```

**[SQL小提琴](http://sqlfiddle.com/#!3/e2350/3)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T10:51:33.667

```
update T
set elementorder = rn
from
  (
    select elementorder,
           row_number() over(order by (select 0)) as rn
    from collections_elements
    where collectionid = 1
  ) T 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/71125)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T10:11:05.110

尝试这样的事情 - 内联变量增量：

```
DECLARE @i int 
SET @i = 0

WHILE @i<44 
BEGIN
    UPDATE collections_elements 
    SET @i = elementorder = @i + 1 
    WHERE collections_elements.collectionid=1 
END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-08T11:45:27.300

此脚本是一个示例。尝试这样的事情 - 内联变量增量：

```
DECLARE @i int 
SET @i = 1 

BEGIN
    UPDATE Questionnaire 
    SET prioritize = @i 
    ,  @i = @i +1 
    WHERE documentTypeCode=2 and groupCode=02
END 
```

# php - 使用作者 ID 获取帖子信息

> ID：10752343
> 
> 赞同：0
> 
> 时间：2012-05-25T10:00:10.133
> 
> 标签：php, wordpress

我将帖子分配给作者。如何使用作者 ID 获取帖子信息？

wordpress有没有可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T18:30:04.163

你的观点不正确。特定作者有超过 1 个帖子。因此，通过提供作者 ID，您将不会获得特定帖子的信息。那不实用。

而不是通过提供作者的 ID，您可以列出该作者的所有帖子。为此，请使用以下代码：

```
<?php the_author_posts_link(); ?> 
```

干杯！！！

# android - 第二次从数据库读取图像时出现空指针异常

> ID：10752353
> 
> 赞同：1
> 
> 时间：2012-05-25T10:00:32.303
> 
> 标签：android, database, nullpointerexception, android-sdcard

我从我的 sdcard 读取图像并将路径存储在一个活动内的数组中，它工作正常，这个读数在一个方法内。第二次，我从另一个活动中调用相同的方法，但光标返回 null ......我可以说问题出在“this”，但不知道在哪里改变。下面是方法的代码。

```
 public void LoadImagesFromSDCard()
{
    try
    {
        String[] projection = {MediaStore.Images.Media.DATA};           

        ContentResolver cr = this.getContentResolver();

        cursor = cr.query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,projection,null,null,null);
        imageCount = cursor.getCount();
        imagePath = new String[imageCount + 1];
        cursor.moveToFirst();

        int cursor_index = 0;
        do
        {
                int id = cursor.getColumnIndex(MediaStore.Images.Media.DATA);
                imagePath[cursor_index++] = cursor.getString(id);

        }while(cursor.moveToPosition(cursor_index));

     ........ 
```

我第二次从像这样的另一个活动中调用它

```
 Camera.PictureCallback mPictureCallback = new Camera.PictureCallback() {
    public void onPictureTaken(byte[] imageData, Camera c) {

        if (imageData != null) {

            Intent mIntent = new Intent();

            StoreByteImage(mContext, imageData, 50,"ImageName");
            mCamera.startPreview();
            setResult(FOTO_MODE, mIntent);
            CameraTaken = true;

            IS.LoadImagesFromSDCard();
            finish();

        }
    }
}; 
```

实际上，这是信息的相机活动。在此先感谢您的帮助 ：）

这是日志猫

```
E/CameraTest(19169): onCreate
E/CameraTest(19169): onResume
E/CameraTest(19169): surfaceCreated
D/CameraHardwareStub(   34): initHeapLocked: preview size=320x240
E/CameraTest(19169): surfaceChanged
D/CameraHardwareStub(   34): initHeapLocked: preview size=320x240
I/ActivityManager(   59): Displayed activity com.android.print/.CameraActivity: 1013   ms (total 1013 ms)
D/AudioSink(   34): bufferCount (4) is too small and increased to 12
I/global  (19169): Default buffer size used in BufferedOutputStream constructor. It would be better to be explicit if an 8k buffer is required.
E/Error reading file(19169): java.lang.NullPointerException
E/CameraTest(19169): surfaceDestroyed
E/CameraTest(19169): onStop 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:20:17.943

好的，我想我已经解决了这个问题，因为我所做的是有效的。关键是我的第一个活动在后台，我从第一个调用相机活动，这使得第一个活动进入后台。所以我不得不为清单文件中的第一个活动添加 android:launchMode="singleTask" 。然后我明确调用在后台运行的第一个活动而不是**IS.LoadImagesFromSDCard();** . 这样做会在第一个活动中调用 onNewIntent() 而不是 onCreate()。在 onNewIntent() 中，我调用了我的 LoadFrom...() 方法。

```
 Camera.PictureCallback mPictureCallback = new Camera.PictureCallback() {
    public void onPictureTaken(byte[] imageData, Camera c) {

        if (imageData != null) {

            Intent mIntent = new Intent();
            Intent inent = new Intent();

            StoreByteImage(mContext, imageData, 50,"ImageName");
            mCamera.startPreview();
            setResult(FOTO_MODE, mIntent);
            CameraTaken = true;
            ImageSelectionIntent.setClassName("your package name", "your package name + class name");
            startActivity(intent);
            finish(); 
```

我的第一个活动有以下代码

```
 protected void onNewIntent(Intent intent) {
      super.onNewIntent(intent);
      setIntent(intent);        
      LoadImagesFromSDCard();
    }
        }
    }
}; 
```

参考下面的链接

[在两个活动之间进行通信，而一个调用另一个仍在后台运行](http://www.helloandroid.com/tutorials/communicating-between-running-activities)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T11:09:06.933

在此处参考源代码[http://www.codeproject.com/Articles/107270/Recording-and-Playing-Video-on-Android](http://www.codeproject.com/Articles/107270/Recording-and-Playing-Video-on-Android)

# spring - 使用 maven 和 tomcat 运行 spring mvc-basic 示例

> ID：10752356
> 
> 赞同：0
> 
> 时间：2012-05-25T10:00:57.893
> 
> 标签：spring, tomcat, maven

使用 Tomcat 6.0，Maven 3。我对这一切都很陌生，所以有人可以帮助我吗？

我以[https://src.springframework.org/svn/spring-samples/mvc-basic/trunk/](https://src.springframework.org/svn/spring-samples/mvc-basic/trunk/)为例。

我从 pom.xml 目录执行 mvn package 命令，将 mvc-basic.war 文件带到 Tomcat 的 webapps 目录，重新启动 tomcat 并转到 localhost:8080/mvc-basic/。

但我得到的只是某种tomcat错误500：

```
 exception

javax.servlet.ServletException: Servlet.init() for servlet Spring MVC Dispatcher Servlet threw exception
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:291)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    java.lang.Thread.run(Unknown Source)
root cause

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.validation.beanvalidation.LocalValidatorFactoryBean#0': Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: javax/xml/bind/JAXBException
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)
    org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:442)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:458)
    org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:339)
    org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:306)
    org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
    javax.servlet.GenericServlet.init(GenericServlet.java:212)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:291)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    java.lang.Thread.run(Unknown Source)
root cause

java.lang.NoClassDefFoundError: javax/xml/bind/JAXBException
    org.hibernate.validator.engine.ConfigurationImpl.parseValidationXml(ConfigurationImpl.java:252)
    org.hibernate.validator.engine.ConfigurationImpl.buildValidatorFactory(ConfigurationImpl.java:143)
    org.springframework.validation.beanvalidation.LocalValidatorFactoryBean.afterPropertiesSet(LocalValidatorFactoryBean.java:219)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)
    org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:442)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:458)
    org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:339)
    org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:306)
    org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
    javax.servlet.GenericServlet.init(GenericServlet.java:212)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:291)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    java.lang.Thread.run(Unknown Source) 
```

我下载了现成的战争，它运行良好。下载后我没有更改项目代码，但是在尝试生成自己的战争时它不起作用。

请帮助我，我哪里出错了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T10:16:38.393

ROO 也遇到过类似的问题，这是因为 Hibernate Validator。所以，我猜你在这里面临同样的问题。我希望您使用的是 Java 5。此[链接](https://jira.springsource.org/browse/ROO-224)会有所帮助。

**解决方案**是在您的 pom.xml 中添加以下依赖项。

```
<dependency>
   <groupId>javax.xml.bind</groupId>
   <artifactId>jaxb-api</artifactId>
   <version>2.1</version>
</dependency>

<dependency>
   <groupId>com.sun.xml.bind</groupId>
   <artifactId>jaxb-impl</artifactId>
   <version>2.1.3</version>
</dependency> 
```

# javascript - SPAN 标记组 TR 标记，但 SPAN 不是 TR 的父级

> ID：10752357
> 
> 赞同：0
> 
> 时间：2012-05-25T10:01:00.307
> 
> 标签：javascript, dom, google-chrome, html

我正在`TR`使用`SPAN`标签对标签进行分组。`TR`使用父节点从标签导航到`SPAN`标签是不可能的，尽管父标签实际上是`SPAN`标签。而是`TBODY`检测到 a （不是 html 中的标签）。为什么会这样？在 IE 中它可以正常工作，但在 chrome 中不行。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T10:13:59.943

即使您不添加`<tbody>`标签，DOM 仍然会添加它（您可以在 Google Chrome Dev tool 或 Firebug for Firefox 等开发人员工具中看到它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T10:12:20.187

W3C 建议使用（多个）TBODY 标签：
[http ://www.w3.org/TR/html4/struct/tables.html#h-11.2.3](http://www.w3.org/TR/html4/struct/tables.html#h-11.2.3)

您的 SPAN 不能在所有浏览器中工作并不奇怪，SPAN 不是 TABLE 的有效子元素。[通过W3C 验证器](http://validator.w3.org/)运行您的页面，您将看到

# macos - 如何使用qt在mac中使标签窗口从顶部滑动？

> ID：10752359
> 
> 赞同：0
> 
> 时间：2012-05-25T10:01:06.500
> 
> 标签：macos, qt, pyqt

我正在使用带有tabbuttons和qmaindwindow的qt在mac中设计一个设置窗口。

当单击 qmainwindow 工具栏中的相应选项卡按钮时，我想显示一个从顶部滑动的选项卡窗口。与 mac 系统首选项或 vlc 首选项滑动窗口操作相同。

希望有人知道实现它的方向吗？

提前致谢

滑动动作不起作用。事件我为 qmainwindow 中的每个选项卡尝试了 QDialog。

```
from PyQt4 import QtGui
from PyQt4 import QtCore

class Ui_windo(QtGui.QMainWindow):

    def __init__(self,parent=None):
        QtGui.QMainWindow.__init__(self, parent)

        self.setObjectName("windo")
        self.resize(400, 300)
        self.toolbuttonGroup = QtGui.QButtonGroup()
        self.toolbuttonGroup.setObjectName("toolbuttonGroup")
        self.toolbuttonGroup.setExclusive(True)
        self.button0 = QtGui.QToolButton()
        self.button1 = QtGui.QToolButton()
        self.button2 = QtGui.QToolButton()
        self.tabbutton(self.button0, 'button0')
        self.tabbutton(self.button1, 'button1')
        self.tabbutton(self.button2, 'button2')

        _toolBar = self.addToolBar('test')
        _toolBar.setToolButtonStyle(QtCore.Qt.ToolButtonTextUnderIcon)
        _toolBar.addWidget(self.button0)
        _toolBar.addWidget(self.button1)
        _toolBar.addWidget(self.button2)
        self.setUnifiedTitleAndToolBarOnMac(True);

        QtCore.QObject.connect(self.button0, QtCore.SIGNAL('clicked()'), self.dialog0)
        QtCore.QObject.connect(self.button1, QtCore.SIGNAL('clicked()'), self.dialog1)
        QtCore.QObject.connect(self.button2, QtCore.SIGNAL('clicked()'), self.dialog2)

    def dialog0(self):
        self._dialog0 = QtGui.QDialog()
        self._button0=QtGui.QPushButton(self._dialog0)
        self._button0.setText('Main dialog 0')
        self._dialog0.setModal(True)
        self.setCentralWidget(self._dialog0)

    def dialog1(self):
        self._dialog1 = QtGui.QDialog()
        self._button1=QtGui.QPushButton(self._dialog1)
        self._button1.setText('I m from dialog1')
        self._dialog1.setModal(True)
        self.setCentralWidget(self._dialog1)

    def dialog2(self):
        self._dialog2 = QtGui.QDialog()
        self._button2=QtGui.QPushButton(self._dialog2)
        self._button2.setText('I m from dialog2')
        self._dialog2.setModal(True)
        self.setCentralWidget(self._dialog2)

    def tabbutton(self, tabButton, text):
        self.toolbuttonGroup.addButton(tabButton)
        tabButton.setToolButtonStyle(QtCore.Qt.ToolButtonTextUnderIcon)
        tabButton.setText(text)
        tabButton.setObjectName(text)
        icon = QtGui.QIcon()
        icon.addPixmap(QtGui.QPixmap("icon.png"), QtGui.QIcon.Normal, QtGui.QIcon.Off)
        tabButton.setIcon(icon)
        tabButton.setCheckable(True)

if __name__ == "__main__":
    import sys
    app = QtGui.QApplication(sys.argv)
    ui = Ui_windo()
    ui.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:26:45.587

使用 QDialog 并将父设置为必须“向下滑动”的窗口。它会“自动”完成

# javascript - 函数对象的名称属性是什么？

> ID：10752360
> 
> 赞同：0
> 
> 时间：2012-05-25T10:01:07.627
> 
> 标签：javascript

```
<script>
    function obj1(){}
    alert(obj1.name);

    var obj2 = function(){}
    obj2.name = 'obj2';
    alert(obj2.name=='');

</script> 
```

我已经在 Chrome、ff、safari 中测试过代码

但是 IE9 没有这个属性。

问题是我在哪里可以阅读文件来找到所有这些情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:04:44.753

Mozilla 文档是这样说的：

```
name
  Non-standard 
  The name of the function. 
```

因此，这是一些浏览器实现的非标准功能。由于没有标准来规定它应该如何工作，因此浏览器之间的实现可能会有所不同。

参考：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function)

[Microsoft](http://msdn.microsoft.com)和[Mozilla](http://developer.mozilla.org)文档非常完整，您可以在其中找到任何标准功能。如果您发现这样的非标准属性，通常只会为支持它的浏览器记录它。

* * *

Javascript 语言的权威资源当然是[EcmaScript ECMA-262 标准](http://www.ecma-international.org/publications/standards/Ecma-262.htm)，但是它比实现文档要复杂得多。

对于 DOM 中的功能（HTML、CSS、Javscript 接口），是[W3C 组织](http://www.w3c.org)指定标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:06:27.313

您可以在此处找到 Microsoft 规范：http:
[//msdn.microsoft.com/en-us/library/x844tc74%28v=vs.94%29.aspx](http://msdn.microsoft.com/en-us/library/x844tc74%28v=vs.94%29.aspx)

但实际上，它是非标准的，MS这次选择遵循规范。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T10:09:02.753

使用语法 new Function(...) 或仅 Function(...) 创建的函数在 Firefox 和 Safari 上将其 name 属性设置为“匿名”，在 Chrome 和 Opera 上设置为空字符串。Internet Explorer 不支持此属性。

来源：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/Name](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/Name)

# c# - 状态为 EndRootElement 的令牌 StartElement 将导致无效的 XML 文档

> ID：10752363
> 
> 赞同：5
> 
> 时间：2012-05-25T10:01:25.873
> 
> 标签：c#, xml, powerpoint

我正在做一个项目，在该项目中，我从 c# 创建了一个 power point 文档。由于某种原因，在我的一种方法上，一切都很好，但我收到了这个错误：

“处于 EndRootElement 状态的令牌 StartElement 将导致无效的 XML 文档。”

这是我的方法：

```
 private static void slideLayout6XML()
    {
        FileStream slideLayout6Stream = new FileStream( slideLayout6, FileMode.Create, FileAccess.Write );
        XmlWriter slideLayout6Writer = null;

        try
        {
            XmlWriterSettings contentTypesSettings = new XmlWriterSettings();
            contentTypesSettings.Indent = true;
            slideLayout6Writer = XmlWriter.Create( slideLayout6Stream, contentTypesSettings );

            slideLayout6Writer.WriteStartDocument( true );
            slideLayout6Writer.WriteStartElement( "p", "sldLayout" );
            slideLayout6Writer.WriteAttributeString( "preserve", "1" );
            slideLayout6Writer.WriteAttributeString( "type", "titleOnly" );

            slideLayout6Writer.WriteStartElement( "p", "http://schemas.openxmlformats.org/drawingml/2006/main" );
            slideLayout6Writer.WriteStartElement( "r", "http://schemas.openxmlformats.org/officeDocument/2006/relationships" );
            slideLayout6Writer.WriteStartElement( "a", "http://schemas.openxmlformats.org/presentationml/2006/main" );

            slideLayout6Writer.WriteStartElement( "p", "cSld" );
            slideLayout6Writer.WriteAttributeString( "name", "Title Only" );

            slideLayout6Writer.WriteStartElement( "p", "spTree" );
            slideLayout6Writer.WriteStartElement( "p", "nvGrpSpPr" );
            slideLayout6Writer.WriteStartElement( "p", "cNvpr" );
            slideLayout6Writer.WriteAttributeString( "name", "" );
            slideLayout6Writer.WriteAttributeString( "id", "1" );
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteStartElement( "p", "cNvGrpSpPr" );
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteStartElement( "p", "nvPr" );
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();

            slideLayout6Writer.WriteStartElement( "p", "grpSpPr" );
            slideLayout6Writer.WriteStartElement( "a", "xfrm" );
            slideLayout6Writer.WriteStartElement( "a", "off" );
            slideLayout6Writer.WriteAttributeString( "y", "0" );
            slideLayout6Writer.WriteAttributeString( "x", "0" );
            slideLayout6Writer.WriteEndElement();

            slideLayout6Writer.WriteStartElement( "a", "ext" );
            slideLayout6Writer.WriteAttributeString( "y", "0" );
            slideLayout6Writer.WriteAttributeString( "x", "0" );
            slideLayout6Writer.WriteEndElement();

            slideLayout6Writer.WriteStartElement( "a", "chOff" );
            slideLayout6Writer.WriteAttributeString( "y", "0" );
            slideLayout6Writer.WriteAttributeString( "x", "0" );
            slideLayout6Writer.WriteEndElement();

            slideLayout6Writer.WriteStartElement( "a", "chExt" );
            slideLayout6Writer.WriteAttributeString( "y", "0" );
            slideLayout6Writer.WriteAttributeString( "x", "0" );
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();

            slideLayout6Writer.WriteStartElement( "p", "sp" );
            slideLayout6Writer.WriteStartElement( "p", "nvSpPr" );
            slideLayout6Writer.WriteStartElement( "p", "cNvPr" );
            slideLayout6Writer.WriteAttributeString( "name", "Title 1" );
            slideLayout6Writer.WriteAttributeString( "id", "2" );
            slideLayout6Writer.WriteEndElement();

            slideLayout6Writer.WriteStartElement( "p", "cNvSpPr" );
            slideLayout6Writer.WriteStartElement( "a", "spLocks" );
            slideLayout6Writer.WriteAttributeString( "noGrp", "1" );
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();

            slideLayout6Writer.WriteStartElement( "p", "nvPr" );
            slideLayout6Writer.WriteStartElement( "p", "ph" );
            slideLayout6Writer.WriteAttributeString( "type", "title" );
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();

            slideLayout6Writer.WriteStartElement( "p", "txBody" );
            slideLayout6Writer.WriteStartElement( "a", "bodyPr" );
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();

            slideLayout6Writer.WriteStartElement( "a", "lstStyle" );
            slideLayout6Writer.WriteEndElement();

            slideLayout6Writer.WriteStartElement( "a", "p" );
            slideLayout6Writer.WriteStartElement( "a", "r" );
            slideLayout6Writer.WriteStartElement( "a", "rPr" );
            slideLayout6Writer.WriteAttributeString( "lang", "en-US" );
            slideLayout6Writer.WriteAttributeString( "smtClean", "0" );
            slideLayout6Writer.WriteEndElement();

            slideLayout6Writer.WriteStartElement( "a", "t" );
            slideLayout6Writer.WriteRaw( "Click to edit Master title style" );
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();

            slideLayout6Writer.WriteStartElement( "a", "endParaRPr" );
            slideLayout6Writer.WriteAttributeString( "lang", "en-US" );
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();

            slideLayout6Writer.WriteStartElement( "p", "sp" );
            slideLayout6Writer.WriteStartElement( "p", "nvSpPr" );
            slideLayout6Writer.WriteStartElement( "p", "cNvPr" );
            slideLayout6Writer.WriteAttributeString( "name", "Date Placeholder 2" );
            slideLayout6Writer.WriteAttributeString( "id", "3" );
            slideLayout6Writer.WriteEndElement();

            slideLayout6Writer.WriteStartElement( "p", "cNvSpPr" );
            slideLayout6Writer.WriteStartElement( "a", "spLocks" );
            slideLayout6Writer.WriteAttributeString( "noGrp", "1" );
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();

            slideLayout6Writer.WriteStartElement( "p", "nvPr" );
            slideLayout6Writer.WriteStartElement( "p", "ph" );
            slideLayout6Writer.WriteAttributeString( "type", "dt" );
            slideLayout6Writer.WriteAttributeString( "idx", "10" );
            slideLayout6Writer.WriteAttributeString( "sz", "half" );
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();

            slideLayout6Writer.WriteStartElement( "p", "txBody" );
            slideLayout6Writer.WriteStartElement( "a", "bodyPr" );
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteStartElement( "a", "lstStyle" );
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteStartElement( "a", "p" );
            slideLayout6Writer.WriteStartElement( "a", "fld" );
            slideLayout6Writer.WriteAttributeString( "type", "datetime1" );
            slideLayout6Writer.WriteAttributeString( "id", "{32E0D616-E0F4-45FD-A59D-58900C81D413}" );

            slideLayout6Writer.WriteStartElement( "a", "rPr" );
            slideLayout6Writer.WriteAttributeString( "lang", "en-US" );
            slideLayout6Writer.WriteAttributeString( "smtClean", "0" );
            slideLayout6Writer.WriteEndElement();

            slideLayout6Writer.WriteStartElement( "a", "t" );
            slideLayout6Writer.WriteRaw( "5/17/2012" );
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();

            slideLayout6Writer.WriteStartElement( "a", "endParaRpR" );
            slideLayout6Writer.WriteAttributeString( "lang", "en-US" );
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();

            slideLayout6Writer.WriteStartElement( "p", "sp" );
            slideLayout6Writer.WriteStartElement( "p", "nvSpPr" );
            slideLayout6Writer.WriteStartElement( "p", "cNvPr" );
            slideLayout6Writer.WriteAttributeString( "name", "Footer Placeholder 3" );
            slideLayout6Writer.WriteAttributeString( "id", "4" );
            slideLayout6Writer.WriteEndElement();

            slideLayout6Writer.WriteStartElement( "p", "cNvSpPr" );
            slideLayout6Writer.WriteStartElement( "a", "spLocks" );
            slideLayout6Writer.WriteAttributeString( "noGrp", "1" );
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();

            slideLayout6Writer.WriteStartElement( "p", "nvPr" );
            slideLayout6Writer.WriteStartElement( "p", "ph" );
            slideLayout6Writer.WriteAttributeString( "type", "ftr" );
            slideLayout6Writer.WriteAttributeString( "idx", "11" );
            slideLayout6Writer.WriteAttributeString( "sz", "quarter" );
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();

            slideLayout6Writer.WriteStartElement( "a", "txBody" );
            slideLayout6Writer.WriteStartElement( "a", "bodyPr" );
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteStartElement( "a", "lstStyle" );
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteStartElement( "a", "p" );
            slideLayout6Writer.WriteStartElement( "a", "r" );
            slideLayout6Writer.WriteStartElement( "a", "rPr" );
            slideLayout6Writer.WriteAttributeString( "lang", "en-US" );
            slideLayout6Writer.WriteAttributeString( "smtClean", "0" );
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteStartElement( "a", "t" );
            slideLayout6Writer.WriteRaw( "Crowded Igloo Business System" );
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteStartElement( "a", "endParaRPr" );
            slideLayout6Writer.WriteAttributeString( "lang", "en-US" );
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();

            slideLayout6Writer.WriteStartElement( "p", "sp" );
            slideLayout6Writer.WriteStartElement( "p", "nvSpPr" );
            slideLayout6Writer.WriteStartElement( "p", "cNvPr" );
            slideLayout6Writer.WriteAttributeString( "name", "Slide Number Placeholder 4" );
            slideLayout6Writer.WriteAttributeString( "id", "5" );
            slideLayout6Writer.WriteEndElement();

            slideLayout6Writer.WriteStartElement( "p", "cNvSpPr" );
            slideLayout6Writer.WriteStartElement( "a", "spLocks" );
            slideLayout6Writer.WriteAttributeString( "noGrp", "1" );
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();

            slideLayout6Writer.WriteStartElement( "p", "nvPr" );
            slideLayout6Writer.WriteStartElement( "p", "ph" );
            slideLayout6Writer.WriteAttributeString( "type", "sldNum" );
            slideLayout6Writer.WriteAttributeString( "idx", "12" );
            slideLayout6Writer.WriteAttributeString( "sz", "quarter" );
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();

            slideLayout6Writer.WriteStartElement( "a", "txBody" );
            slideLayout6Writer.WriteStartElement( "a", "bodyPr" );
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteStartElement( "a", "lstStyle" );
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteStartElement( "a", "p" );
            slideLayout6Writer.WriteStartElement( "a", "fld" );
            slideLayout6Writer.WriteAttributeString( "type", "slidenum" );
            slideLayout6Writer.WriteAttributeString( "id", "{8B131516-2DB0-4AAA-89BA-2724DE07B6A2}" );

            slideLayout6Writer.WriteStartElement( "a", "rPr" );
            slideLayout6Writer.WriteAttributeString( "lang", "en-US" );
            slideLayout6Writer.WriteAttributeString( "smtClean", "0" );
            slideLayout6Writer.WriteEndElement();

            slideLayout6Writer.WriteStartElement( "a", "t" );
            slideLayout6Writer.WriteRaw( "<#>" );
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();

            slideLayout6Writer.WriteStartElement( "a", "endParaRPr" );
            slideLayout6Writer.WriteAttributeString( "lang", "en-US" );
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();

            slideLayout6Writer.WriteStartElement( "p", "extLst" );
            slideLayout6Writer.WriteStartElement( "p", "ext" );
            slideLayout6Writer.WriteAttributeString( "uri", "{BB962C8B-B14F-4D97-AF65-F5344CB8AC3E}" );
            slideLayout6Writer.WriteStartElement( "p14", "creationId", "http://schemas.microsoft.com/office/powerpoint/2010/main" );
            slideLayout6Writer.WriteAttributeString( "val", "3805825225" );
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();

            slideLayout6Writer.WriteStartElement( "p", "clrMapOvr" );
            slideLayout6Writer.WriteStartElement( "a", "masterClrMapping" );
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();
            slideLayout6Writer.WriteEndElement();

            slideLayout6Writer.WriteEndDocument();
        }
        finally
        {
            if (slideLayout6Writer != null)
                slideLayout6Writer.Flush();

            slideLayout6Writer.Close();
        }
    } 
```

对不起，大规模的方法，但在这种方法中，它会引发错误。任何帮助将不胜感激谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-25T13:50:45.733

我的猜测是你已经关闭了最外层的元素，所以你不能打开一个新的，因为 XML 只允许最外层的一个元素。

这种接口对于编写 XML 非常方便，我自己也使用它，但是如果你犯了任何嵌套错误，它可能会很麻烦。众所周知，我对接口使用自己的包装器，其中对 endElement 的调用必须指定匹配的标签名称；然后包装器可以检查调用的正确嵌套，这极大地有助于识别错误所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T10:14:18.413

你调用 startelement 81 次......猜猜看：你没有调用 endelement 81 次......

所以确保开始和结束正确匹配;）

# macports - 是否可以使用 MacPorts 分发自定义软件？

> ID：10752366
> 
> 赞同：0
> 
> 时间：2012-05-25T10:01:37.107
> 
> 标签：macports, software-distribution

我们有一些内部软件工具需要分发到我们的机器上。签出源存储库是一种选择，但这需要将二进制文件放入存储库中，对此我并不详述。

我认为改用现有的 MacPorts 基础设施会很好。我们都有 Mac 并且已经在使用 MacPorts，因此使用我们自己的工具安装另一个端口是有意义的。是否可以向 MacPorts 系统添加另一个包源？它相当容易吗？是否可以添加一些授权，以便其他人无法从我们的服务器上安装我们的软件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:09:12.660

是的，您应该能够将源代码添加到您的 macports 安装中`sources.conf`，编辑文件并添加自定义存储库的路径。看看[官方文档](http://guide.macports.org/chunked/development.local-repositories.html)。

# android - 哪个版本的安卓可以让我访问手机拍摄的照片？

> ID：10752377
> 
> 赞同：0
> 
> 时间：2012-05-25T10:02:18.420
> 
> 标签：android, photo-gallery

我正在开发一个应用程序，它允许用户将图片附加到应用程序本身的某些文本上，但用户需要访问手机图库才能将照片从中提取并放入应用程序。我的手机运行的是 2.3.5 这个版本可以吗？？网上好像找不到确切的答案！！多谢你们.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:24:29.030

它绝对能够从图库中检索图像。您可以发布您的代码，您如何尝试从图库中获取图像？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T11:32:43.900

要从图库中选择图像，

```
public class SelectPhotoActivity extends Activity {

private static final int SELECT_PICTURE = 1;
private String selectedImagePath="";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Intent intent = new Intent();
    intent.setType("image/*");
    intent.setAction(Intent.ACTION_GET_CONTENT);
    intent.addCategory(Intent.CATEGORY_OPENABLE);
    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    startActivityForResult(intent, SELECT_PICTURE); 
}

public String getPath(Uri uri) {
    String[] projection = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    int column_index = cursor
            .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data)
{
    if (resultCode == RESULT_OK) {
        if (requestCode == SELECT_PICTURE)
        {
            Uri selectedImageUri = data.getData();
            selectedImagePath = getPath(selectedImageUri);
           // here you can set the image
            }
    }
}

} 
```

# objective-c - 有没有办法缓冲 NSNotifications 直到观察者准备好？

> ID：10752379
> 
> 赞同：0
> 
> 时间：2012-05-25T10:02:23.770
> 
> 标签：objective-c, ios

我的程序的一部分以不规则的间隔发送`NSNotification`s。首先是一些关于初始设置的消息，然后是 GPS 触发的内容。应该观察这些通知的视图控制器需要一些时间才能启动，因此通常会错过前几个，尽管这些`addObserver:`东西在`viewDidLoad`. 那么，视图控制器有没有办法获取它错过的消息？

我知道我可以在每个通知中发送整个消息历史记录，但仍然要等到下一个触发事件才能发送任何内容，这太长了。

有没有标准的方法，我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:22:08.707

创建一些 NSObject 来存储消息。然后，如果需要监听通知的视图已加载，请检查存储在 NSObject 中的任何消息（因此您无需等待新的触发消息）。

您并没有遗漏任何东西，您只需要稍微改变处理数据的方式，它就会完美地工作:)

# algorithm - 如何用不相交的旋转矩形填充矩形区域？

> ID：10752380
> 
> 赞同：2
> 
> 时间：2012-05-25T10:02:27.670
> 
> 标签：algorithm, geometry, 2d

我尝试为物理模拟创建一个场景。该场景由漂浮在矩形池塘中的矩形漂浮物组成。像这样的东西：

![矩形浮体](../Images/c22f96f90228c69ba75c8542155b61c3.png)

所以我需要用宽度和高度在指定范围内的不相交的旋转矩形填充一个矩形区域。我不需要找到该区域的最佳覆盖范围。目标只是生成没有交叉点的不同大小的漂浮物。

我想得到一个没有任何动态的解决方案，只使用碰撞检测算法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T11:37:13.620

您可以考虑模拟一组盒子落入方形桶中，并在所有盒子静止后保存它们的位置。

[`box2d`](http://box2d.org)是一个开源的 2D 物理库，可以为您执行此操作 - 您可能会认为它是 Angry Birds 和数以百万计的 Flash 游戏背后的物理引擎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T11:42:21.150

要对实体（即不相交）对象建模，您可以使用**物理引擎**。碰巧的是，前几天我刚刚阅读[了面向绝对初学者的 Farseer 教程](http://weblogs.asp.net/bsimser/archive/2012/04/13/farseer-tutorial-for-the-absolute-beginners.aspx)，其中包括一个几乎完全符合您要求的视频。[Farseer](http://farseerphysics.codeplex.com/)是 box2d 的 .NET 版本，您可能听说过。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T13:43:11.697

我会做的是：

假设矩形的长度在 [MaxSize MinSize] 之间

```
r <- MaxSize

do{
  Trying adding non-intersecting circles to the area with radius r and random center (x,y). We use circle instead of rectangle because intersection detecting for circles are easier than rectangles. e.g. if distance(x,y,x',y')<r+r' then we are good.

  If adding circle failed{
    r--;
    if r< MinSize break;
  }
} 
```

现在您将拥有一个充满相交正方形的平面。因为我们使用圆圈作为交叉点检测，所以会有间隙。如果这对您来说还不够好，请将正方形变成矩形。您可以通过检查某个边界上的所有点并决定您可以增长多少来做到这一点。

# grails - 用于 Grails 插件的 Riak

> ID：10752381
> 
> 赞同：0
> 
> 时间：2012-05-25T10:02:28.330
> 
> 标签：grails, riak

我正在尝试使用 Grails Riak 插件，但没有成功。

也许我没有明白，但我希望插件让我将我的域对象存储在 riak 数据库中：[http ://springsource.github.com/grails-data-mapping/riak/manual/guide/3.% 20Object%20Mapping.html](http://springsource.github.com/grails-data-mapping/riak/manual/guide/3.%20Object%20Mapping.html)

但似乎由于仍然定义了一个数据源，Grails 只是将对象映射到普通的 SQL 数据库。

我究竟做错了什么？如何让插件工作？

**更新：**

卸载 Hibernate 插件似乎不适用于 Grails 2.0.x。卸载后好像会自动重装。

对于 Grails 1.3.8，它可以工作，但是

```
grails install-plugin riak 
```

在下载和安装它的工作时会导致错误：

```
grails install-plugin grails-riak-1.0.0.M4.zip 
```

我现在已经将我的 riak 配置为侦听端口 8091 (http://localhost:8091/buckets?buckets=true)，当我通过浏览器连接时，我会收到回复。但我的 Grails 应用程序抱怨`java.net.ConnectException: Connection Refused`

**更新 2：**

似乎 riak 插件忽略了我的配置 - 如果为端口 9098 配置了 riak 实例，则插件设法连接并工作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:39:39.220

如果你安装了 Riak 插件，你必须*卸载*Hibernate 插件。否则，它会对您实际想要在哪个数据存储中存储数据感到困惑。

# javascript - 幻灯片的Javascript

> ID：10752383
> 
> 赞同：0
> 
> 时间：2012-05-25T10:02:37.797
> 
> 标签：javascript

有人可以建议好的 javascript 代码来实现幻灯片，以便幻灯片的所有元素都在或数组中声明。我希望它使用纯 javascript 而不使用 jQuery

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T10:08:04.437

这可能对您有用。复制和替换图像。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>image slide show</title>
<style type="text/css">
body {
    background:#FFC;
}
input[type="button"] {
    background:#939907;
    color:#fff;
    border:1px solid #434603;
    -moz-border-radius:5px;
    -webkit-border-radius:5px;
    -ms-border-radius:5px;
    font-weight:bold;
    cursor:pointer;
    height:25px;
}
img {
    width:525px;
    height:200px;
    border:2px solid #CF3;
    -moz-border-radius:15px;
    -webkit-border-radius:15px;
    -ms-border-radius:15px;
}
</style>
<script type="text/javascript">
var images=new Array();
var i=0, t, f=false;

images[0] ="images/heli1.jpg";
images[1] ="images/heli2.JPG";
images[2] ="images/heli3.JPG";
images[3] ="images/heli4.JPG";
images[4] ="images/heli5.JPG";
images[5] ="images/heli6.JPG";
images[6] ="images/heli7.JPG";
images[7] ="images/heli2.JPG";
images[8] ="images/heli9.JPG";
images[9] ="images/heli1.jpg";
images[10] ="images/heli2.JPG";
images[11] ="images/heli3.JPG";
images[12] ="images/heli4.JPG";
images[13] ="images/heli5.JPG";
images[14] ="images/heli6.JPG";

    function start(){
        if(i>=images.length){
            i=0;
            document.getElementById('img').src=images[i];   
            i++;        
        }
        else{
            document.getElementById('img').src=images[i];
            i++;
        }
        t=setTimeout("start()", 1000);  
    }
    function play(){
        if(f==false){
            f=true;
            start();
        }
    }

    function Stop(){
        clearTimeout(t);
        f=false;
    }

    function next(){
        if(i>=images.length){
            i=0;
            document.getElementById('img').src=images[i];   
            i++;
        }
        else{
            document.getElementById('img').src=images[i];
            i++;
        }
    }

    function previous(){
        if(i>=images.lenght){
            i=images.length;
            document.getElementById('img').src=images[i];
            i--;
        }
        else if(i<=0){
            i=images.length;
            document.getElementById('img').src=images[i-1];
            i--;
        }
        else if(i>images.length){

            document.getElementById('img').src=images[images.length-i]; 
        }
        else if(i<=images.length || i>0){
            document.getElementById('img').src=images[i-1];
            i--;
        }
    }

</script>
</head>

<body>
<table width="50%" border="0" cellspacing="0" cellpadding="0" align="center">
  <tr>
    <td><input type="button" value="Previous" onclick="previous()" /></td>
    <td align="center"><a href="#"><img src="images/heli6.JPG" alt=""  id="img" /></a></td>
    <td><input type="button" value="Next" onclick="next()" /></td>
  </tr>
  <tr>
    <td colspan="3" align="center" height="50"><input type="button" value="Play" onclick="play()" />
      <input type="button" value="Stop" onclick="Stop()" /></td>
  </tr>
</table>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T10:08:34.173

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>

<script language="javascript">

loaded_img = 0;
no_of_img = 12;

img_name = new Array();
img_name.length = no_of_img - 1;

for ( var count = 0; count < no_of_img; count++)
{
   var file_num = count + 1;
   var filename = ("img" + file_num + ".jpg");
    img_name[count] = filename;
}

var whichlink=0

function slideit(){
if (!document.images)
return
document.images.myimage.src=img_name[loaded_img].src
whichlink=loaded_img
if (loaded_img<img_name.length-1)
loaded_img++
else
loaded_img=0
setTimeout("slideit()",1000)
}
slideit()

function changeImage(direction)
{
    loaded_img=loaded_img+direction;
    if (loaded_img < 0)
        loaded_img = no_of_img - 1;
    if (loaded_img == no_of_img)
        loaded_img = 0;
        document.myimage.src = img_name[loaded_img];
}

</script>

<script language="javascript">
//slideshowimages()=new Array()
//slideshowimages("img1.jpg")

var whichlink=0
var whichimage=0
function slideit(){
if (!document.images)
return
document.images.myimage.src=slideimages[whichimage].src
whichlink=whichimage
if (whichimage<slideimages.length-1)
whichimage++
else
whichimage=0
setTimeout("slideit()",1000)
}
slideit()

</script>

<form>

<a href="javascript:changeImage(-1)"><img src="left-disabled.gif" width="27" height="22" border="0"></a>

<img src="img1.jpg" name="myimage">

<a href="javascript:changeImage(1)"><img src="right-enabled.gif" width="27" height="22" border="0"></a>
</form>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-25T02:40:09.087

这个问题很老，但这里有一个更全面的纯 JavaScript 示例。它假定 index.html 和 slideshow.js 处于同一级别。它以自动播放的幻灯片开始（可以暂停和恢复），并且还具有上一个和下一个按钮。如果您只想要其中一组功能，则删除另一组应该相当简单。

HTML 非常简单，只要您介意 id，大部分情况下都可以根据需要进行更改。我没有提供任何样式，所以这就是你的全部。

```
<!-- index.html -->

<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>slideshow</title>
</head>
<body>

<section>
    <div>
        <img id="image">
    </div>
    <div>
        <button type="button" id="playBtn">Play</button>
        <button type="button" id="pauseBtn">Pause</button>
    </div>
    <div>
        <button type="button" id="prevBtn">Prev</button>
        <button type="button" id="nextBtn">Next</button>
    </div>
</section>

<script src="slideshow.js"></script>
</body>
</html> 
```

如果您想支持 IE8 和/或更低版本，则需要放弃 DOMContentLoaded 侦听器。本质上，您可以只提取 IIFE，然后将其最后一行替换`return beginSlideshow`为`beginSlideshow()`. 我希望这是有道理的，我希望这对您有所帮助。祝你好运。

```
// slideshow.js

document.addEventListener(
  // IE 9 and up. See http://caniuse.com/#feat=domcontentloaded
  'DOMContentLoaded'

, (function STRICT() {
    'use strict';

    // Avoid 'new' and stick to array literals where possible.
    var images =
          [ 'img/30.gif'
          , 'img/31.gif'
          , 'img/32.gif'
          , 'img/33.gif'
          , 'img/34.gif'
          ]

      , img = document.getElementById('image')
      , playBtn = document.getElementById('playBtn')
      , pauseBtn = document.getElementById('pauseBtn')
      , prevBtn = document.getElementById('prevBtn')
      , nextBtn = document.getElementById('nextBtn')

      , index = 0
      , indexOfLastImage = images.length - 1

      , play
      , playInterval
      , pause
      , goToPrevious
      , goToNext
      , beginSlideShow

    play = function() {
      playInterval = setInterval(
        function() {
          if (index === indexOfLastImage) { index = 0 }

          img.src = images[++index]
        }
      , 3000
      )
    }

    pause = function() {
      clearInterval(playInterval)
      playInterval = null
    }

    goToPrevious = function() {
      // if the slideshow was running
      if (playInterval) { pause() }
      // if we're at the beginning of the array
      if (index === 0) {
        index = indexOfLastImage + 1
      }
      img.src = images[--index]
    }

    goToNext = function() {
      // if the slideshow was running
      if (playInterval) { pause() }
      // if we're at the beginning of the array
      if (index === indexOfLastImage) {
        index = -1
      }
      img.src = images[++index]
    }

    beginSlideShow = function() {
      // add listeners
      playBtn.addEventListener('click', play)
      pauseBtn.addEventListener('click', pause)
      prevBtn.addEventListener('click', goToPrevious)
      nextBtn.addEventListener('click', goToNext)
      // set initial image for display prior to first interval
      img.src = images[index]
      // kick off auto play
      play()
    }

    // This is what's attached to and will fire on the DOMContentLoaded event
    return beginSlideShow

  }())
) 
```

# php - 使用 foreach 获取 $_POST 元素

> ID：10752385
> 
> 赞同：-1
> 
> 时间：2012-05-25T10:02:53.753
> 
> 标签：php, loops, foreach

我试图在一个 for 循环中获取我的表单日期，然后将数据放入数据库中。我的问题是我自己并没有用 PHP 做太多工作，我无法弄清楚如何将数据放入数据库。

这是代码

```
<?php
function get_post_information() {
  $inf[] = array();
  foreach($_POST as $field => $value) {             
   $inf[$field] = $value;
  }
  return $inf;
 } 
```

我执行这样的代码：

```
get_post_information(); 
```

但是然后呢？我如何将其放入我的数据库中？

希望任何人都可以提供帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:18:48.003

如果要将完整的数组存储在单个数据库列中，则应使用[serialize()](http://php.net/manual/en/function.serialize.php)函数从数组中创建一个字符串。还有一个`unserialize()`函数可以再次将其转换为数组。

# objective-c - MPMoviePlayerController 生成本地视频文件的缩略图并存储

> ID：10752387
> 
> 赞同：0
> 
> 时间：2012-05-25T10:03:11.913
> 
> 标签：objective-c, ios, ipad, mpmovieplayercontroller, thumbnails

我正在制作一个从服务器下载电影并将它们本地存储在 NSDocumentDirectory 中的应用程序。

这工作正常。

我想在每个单元格的名称前面添加从每部电影生成的缩略图。

**我的问题：**

下载电影后如何从电影中生成缩略图（如此即时，无需先播放电影）？我想将与电影同名的缩略图存储为 NSDocumentDirectory 中的 jpg。

**我猜**

- 下载电影并将其存储在 NSDocumentDirectory 中（作品）

- 以某种方式将电影加载到 MPMoviePlayerController 的内存中（不知道如何）

- 在内存中加载时，使用 thumbnailImageAtTime (MPMovieTimeOptionNearestKeyFrame) 生成缩略图（应该可以）

- 存储它（应该工作）

如果有人可以帮助我...

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T10:07:50.943

```
#import <MediaPlayer/MediaPlayer.h>   

-(UIImage*)getFirstFrameFromVideoFile:(NSString*)sourceFilePath {
NSURL *videoURL = [NSURL fileURLWithPath:sourceFilePath];

MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:videoURL];

UIImage *thumbnail = [player thumbnailImageAtTime:1.0 timeOption:MPMovieTimeOptionNearestKeyFrame];
//Player autoplays audio on init
[player stop];
[player release];
return thumbnail;
} 
```

您已经知道的其他任务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-18T16:45:17.753

是的，使用 MPMoviePlayer 是可行的……但您必须确保在您的应用程序的其他地方没有播放其他电影播放器​​（甚至是 UIWebView 插件……），否则您会遇到麻烦。我这样做：

```
UIImage *thumbnail = nil;
NSURL *url = [NSURL fileURLWithPath:pathname];
AVURLAsset *asset = [[AVURLAsset alloc] initWithURL:url options:nil];
AVAssetImageGenerator *generator = [[AVAssetImageGenerator alloc] initWithAsset:asset];
generator.appliesPreferredTrackTransform = YES;
NSError *error = nil;
CMTime time = CMTimeMake(3, 1); // 3/1 = 3 second(s)
CGImageRef imgRef = [generator copyCGImageAtTime:time actualTime:nil error:&error];
if (error != nil)
    NSLog(@"%@: %@", self, error);
thumbnail = [[UIImage alloc] initWithCGImage:imgRef];
CGImageRelease(imgRef); 
```

希望这可能会有所帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T11:03:58.813

这是我使用的应该生成缩略图的代码（添加了一个大的 uiimageview 用于测试，当我在其中加载本地图像时工作）

```
NSString *path;
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    path = [[paths objectAtIndex:0] stringByAppendingPathComponent:@"snijtechniekendir/videos"];
    path = [path stringByAppendingPathComponent:[videos objectAtIndex:indexPath.row]];

    NSURL *videoURL = [NSURL fileURLWithPath:path];

    NSLog(@"video url: %@", videoURL);

    MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:videoURL];

    UIImage *thumbnail = [player thumbnailImageAtTime:1 timeOption:MPMovieTimeOptionNearestKeyFrame];

    UIImageView *cellimage = [[UIImageView alloc] initWithFrame:CGRectMake(2, 2 , 400, 400)];

    [cell.contentView addSubview:cellimage];
    NSData *imgData = UIImagePNGRepresentation(thumbnail);
    NSLog(@"lenght of video thumb: %@", [imgData length]);
    [self.view addSubview:cellimage];
    [cellimage setImage:thumbnail]; 
```

这是一个视频文件的日志

```
video url: file://localhost/Users/Home/Library/Application%20Support/iPhone%20Simulator/5.1/Applications/78C165BB-75A9-46A2-A257-469F8652A665/Documents/snijtechniekendir/videos/snijtechniek%2520brunoise.mp4

lenght of video thumb: (null) 
```

# solr - solrnet spellcheck.collat ion 实现不支持多重排序规则

> ID：10752391
> 
> 赞同：1
> 
> 时间：2012-05-25T10:03:38.340
> 
> 标签：solr, spell-checking, solrnet

我正在使用 solrnet，我想使用 solr 的拼写检查整理功能。但似乎 solrnet 不支持多重排序规则。有解决方法吗？

```
var queryResult = solr.Query(finalQuery, queryOptions); 
```

`queryResult.SpellChecking.Collation`// 这个属性是一个字符串而不是一个集合

* * *

**详细解释**

我在 solr 中设置`<str name="spellcheck.maxCollations">5</str>`，这为一个查询返回了多个排序规则

对于这个查询： `/select/?spellcheck=true&spellcheck.q=draiving+AND+tess`我得到两个排序规则

```
<str name="collation">driving AND test</str>
<str name="collation">training AND test</str> 
```

在 solrnet 中，我只能访问第一个排序规则。

我认为这是 solrnet 中的一个错误，如果您也这样认为，我愿意修复这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T14:06:38.980

SolrNet Github 项目上有一个解决此问题的[未完成的拉取请求。](https://github.com/mausch/SolrNet/pull/24)不幸的是，该拉取请求的提交者没有回答 SolrNet 作者 - Mauricio Scheffer 的一些问题。由于您也愿意解决此问题，因此我建议您在[SolrNet Google Groups 论坛](https://groups.google.com/forum/?fromgroups#!forum/solrnet)上发帖，并与 Mauricio 讨论可能完成更改或开始您自己的更改。不幸的是，由于过去的审查问题，Mauricio 不再回复 StackOverflow 上的问题/帖子。

# android - smsManager.sendTextMessage 不工作

> ID：10752394
> 
> 赞同：9
> 
> 时间：2012-05-25T10:03:41.510
> 
> 标签：android, sms

我有以下事件以编程方式发送短信。但是似乎不起作用，弹出吐司并且在logcat中没有条目，只是没有创建消息。我还为清单文件添加了适当的权限。

有什么建议吗？

```
 private Runnable SMSRunnable = new Runnable()
 {
     public void run()
     {      
         smsManager = SmsManager.getDefault();

        smsNumber = edittextSmsNumber.getText().toString();
        smsText = edittextSmsText.getText().toString();

        smsManager.sendTextMessage(smsNumber, smsNumber, smsNumber , null, null);

     }
 }; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-25T10:15:39.130

尝试这个。

```
SmsManager sms = SmsManager.getDefault();
PendingIntent sentPI;
String SENT = "SMS_SENT";

sentPI = PendingIntent.getBroadcast(this, 0,new Intent(SENT), 0);

sms.sendTextMessage(phoneNumber, null, message, sentPI, null); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-02T15:47:31.157

我花了很多时间然后我发现我可以在前面加上国家代码。对我来说，在电话号码之前加上“+91”就像一个冠军。

```
String phnNumber="+91"+editText.getText().toString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T10:29:07.150

这对我有用：

```
PendingIntent pi = PendingIntent.getActivity(this, 0,
        new Intent(this, Next.class), 0); 
//Next is the class to move when message sent
SmsManager sms = SmsManager.getDefault();
sms.sendTextMessage("phno", null, "message", null, null); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T10:36:17.213

实际上这对我有用：

```
String messageText = "...YOUR TEXT HERE...";
SmsManager sm = SmsManager.getDefault();
sm.sendTextMessage("PHONE NUMBER HERE", null, messageText, null, null); 
```

可以肯定的是，有了这个，您将不会在您的消息历史记录中找到发送的消息。

# php - 尽管有 777 权限且没有 open_basedir 值，但无法使用 php 写入 /tmp

> ID：10752396
> 
> 赞同：40
> 
> 时间：2012-05-25T10:03:53.150
> 
> 标签：php, fopen, tmp, php-safe-mode

我正在尝试使用 php fopen 函数将文件写入我的 /tmp 目录（在 apache 服务器上），但它失败了：

```
<?php
$handle = fopen("/tmp/test.txt", "x");
if ($handle) 
   echo "Success!";
else 
    print_r(error_get_last()); 
```

这将返回错误消息：

> 无法打开流：没有这样的文件或目录。

该`/tmp`目录的权限设置为`drwxrwxrwt`，我可以看到 Web 用户正在向其写入其他文件。神秘的是，如果我将脚本指向另一个具有权限的文件夹`777`，它会返回成功。但我`open_basedir`的没有价值。我有`safe_mode=on`and `allow_url_fopen=off`，但我认为这不应该解释吗？

这是 Apache Httpd 2.0 上的 PHP 5.3.10。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2014-04-17T19:37:54.197

我有完全相同的问题。PHP 报告在 中打开文件没有问题`/tmp/myoutputfile`，但该路径中没有文件。然后我做了

```
find / -name "myoutputfile" 
```

并在`/tmp/systemd-…/myoutputfile`. 我在谷歌上找到[了这篇文章](http://blog.oddbit.com/2012/11/05/fedora-private-tmp/)。
所以，就我而言，它是 Systemd 和 Apache Httpd 的组合。我希望这会对某人有所帮助。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2019-11-21T09:57:51.327

您的问题可能是由 systemd 和 apache 的组合引起的。这是一个名为 PrivateTmp 的安全功能，显然它是一个选择退出。

如果你不想要它，你可以像这样禁用它：

1.  输出相应的开关 `/etc/systemd/system/multi-user.target.wants/apache2.service`： `#PrivateTmp=true`
2.  重启系统：`sudo systemctl daemon-reload`
3.  重启阿帕奇：`sudo systemctl restart apache2`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-16T09:34:57.337

尝试添加`/tmp`到`open_basedir`. 例如：

```
 php_admin_value open_basedir /some/path:/another/path:/tmp 
```

我不确定这是您实际面临的问题，但我在寻找此解决方案时发现了您的问题，所以我想这可能对其他人有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T10:12:28.400

根据显示的错误信息，没有文件夹`/tmp/`。也许 tmp 文件夹不是根目录？

如果文件实际上不存在，则不会显示此错误，因为它将尝试创建它。

如果文件已经存在，方法`x`也会返回警告。（文档：[http](http://www.php.net/manual/en/function.fopen.php) ://www.php.net/manual/en/function.fopen.php ）

我认为这也是另一个可能出错的原因，即执行 PHP 的用户没有在`/tmp/`文件夹中写入的权限。

# python - 使用 Python 字符串处理函数时出现 UnicodeDecodeError

> ID：10752398
> 
> 赞同：3
> 
> 时间：2012-05-25T10:03:59.607
> 
> 标签：python, unicode, internationalization

我正在这样做：

```
word.rstrip(s) 
```

其中 word 和 s 是包含 unicode 字符的字符串。

我得到这个：

```
UnicodeDecodeError: 'ascii' codec can't decode byte 0xe0 in position 0: ordinal not in range(128) 
```

有一个错误报告，在某些 Windows Django 系统上会发生此错误。但是，我的情况似乎与那个案子无关。

可能是什么问题呢？

* * *

编辑：代码是这样的：

```
def Strip(word):
    for s in suffixes:
        return word.rstrip(s) 
```

* * *

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T12:33:02.963

问题是这`s`是一个字节串，`word`而是一个 unicode 字符串 - 所以，Python 试图`s`变成一个 unicode 字符串，这样`rstrip`才有意义。问题是，它假设`s`是用 ASCII 编码的，但显然不是（因为它包含 ASCII 范围之外的字符）。

因此，由于您将其初始化为文字，因此很容易通过在其`u`前面放置 a 将其转换为 unicode 字符串：

```
suffixes = [u'ি'] 
```

将工作。当您添加更多后缀时，您需要`u`单独在所有后缀前面添加。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T12:01:00.497

我猜这是因为 python2 中的隐式转换。[本文档对此](http://nedbatchelder.com/text/unipain/unipain.html#24)进行了解释，但我建议您阅读有关在 python 2 和 3 中处理 unicode的[整个演示文稿（以及为什么 python3 更好;-)）](http://nedbatchelder.com/text/unipain.html)

因此，我认为解决您的问题的方法是在条带化之前强制将字符串解码为 utf8。

就像是 ：

```
def Strip(word):
    word = word.decode("utf8")
    for s in suffixes:
        return word.rstrip(s.decode("utf8") 
```

第二次尝试：

```
def Strip(word):
    if type(word) == str:
        word = word.decode("utf8")
    for s in suffixes:
        if type(s) == str:
            s = s.decode("utf8")
        return word.rstrip(s) 
```

# ext.net - 如何在 Ext.Net 中隐藏 Gridpanel GroupCommand

> ID：10752399
> 
> 赞同：0
> 
> 时间：2012-05-25T10:04:00.367
> 
> 标签：ext.net

我正在使用 Ext.Net1.0。我正在使用带有分组的网格面板在我设置了组命令我想隐藏组命令..

![在此处输入图像描述](../Images/ab9565ee325f3c97d002a78f78722b1a.png)

```
<ext:ImageCommandColumn Width="110">
                    <GroupCommands>
                        <ext:GroupImageCommand CommandName="Delete" Icon="Delete" Text="Delete" RightAlign="true">
                            <ToolTip Text="Delete" />
                        </ext:GroupImageCommand>
                        <ext:GroupImageCommand CommandName="Edit" Icon="TableEdit" Text="Edit" RightAlign="true">
                            <ToolTip Text="Edit" />
                        </ext:GroupImageCommand>
                    </GroupCommands>
                </ext:ImageCommandColumn> 
```

我怎样才能获得 GroupCommand？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:44:02.500

您可以查看此线程[http://forums.ext.net/showthread.php?11425-CLOSED-Reach-Command-coloumn-at-run-time-with-javascript&p=46416&viewfull=1#post46416](http://forums.ext.net/showthread.php?11425-CLOSED-Reach-Command-coloumn-at-run-time-with-javascript&p=46416&viewfull=1#post46416)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T07:13:22.113

在 ext:ImageCommandColumn 和 prepareGroupCommand 函数中完成，我们可以通过(command.command) 获取命令名称。

# android - 从 strings.xml 中提取值

> ID：10752405
> 
> 赞同：1
> 
> 时间：2012-05-25T10:04:22.117
> 
> 标签：android, autocompletetextview

我有一个疑问。我有一个包含 autocompletetextview 的活动。autocompletetextview 的内容已在 strings.xml 文件中声明为字符串数组。我的 strings.xml 文件中还有一个字符串数组。我想要的是当我从 autocompletetextview 中选择一个项目，它应该以 toast 的形式显示第二个字符串数组中的一个值。这可能吗。请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:06:32.900

**对于数组::**

```
String[] myarray =getResources().getStringArray(R.array.array); 
```

**对于字符串::**

```
String myString =getResources().getString(R.string.str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T11:01:01.477

检查这个，

```
package mytest.projects;

import android.app.ListActivity;
import android.os.Bundle;
import android.widget.ArrayAdapter;

public class example extends ListActivity {
String[] mTestArray;

/** Called when the activity is first created. */
@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    // Create an ArrayAdapter that will contain all list items
    ArrayAdapter<String> adapter;

    mTestArray =  = getResources().getStringArray(R.array.testArray);    

    /* Assign the name array to that adapter and 
    also choose a simple layout for the list items */ 
    adapter = new ArrayAdapter<String>(
    this,
    android.R.layout.simple_list_item_1,
    mTestArray);

    // Assign the adapter to this ListActivity
    setListAdapter(adapter);
    }
} 
```

# javascript - 未使用的 DOM 元素会发生什么？

> ID：10752415
> 
> 赞同：6
> 
> 时间：2012-05-25T10:05:19.713
> 
> 标签：javascript, html, dom

假设我创建了一个有自己的画布的类：

```
this.canvas = document.createElement("canvas"); 
```

我使用那个画布，画一些东西等等，但从不将画布添加到 DOM 树中。完成后，我将不再使用整个班级。

那么当我**删除**使用canvas的类时，canvas是否还占用内存呢？我必须以某种方式删除它吗？

或者，作为一个更普遍的问题：不再或从未出现在 DOM 树中的未使用元素会发生什么（在网站中不可见）？它们会被垃圾收集和/或您可以加快速度以提高性能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:10:49.753

正如您已经正确指出的那样，这与 DOM 树无关，更多的是关于对象引用和垃圾收集器。

当您通过基础对象删除/删除一个类时`null`，所有现代收集器都会照顾您。通过甚至不将节点插入 DOM，您也不必担心任何隐藏的引用。我见过几个人明确设置`<canvas>`引用`null`也，但我想这是纯粹的 IE8 偏执狂。

# google-apps-script - 取决于来自相邻单元格的值的条件格式

> ID：10752418
> 
> 赞同：0
> 
> 时间：2012-05-25T10:05:32.270
> 
> 标签：google-apps-script, google-sheets, gs-conditional-formatting

我在 Google 电子表格中设置了时间记录表。现在我正在尝试根据电子表格中其他单元格的值来实现单元格的条件格式：

如果单元格 G2 的值大于 06:30:00 (hh:mm:ss) AND 单元格 D2 的值小于 00:30:00 (hh:mm:ss) 或单元格 D2 为空白，则将背景颜色设置为单元格 D2 变为黄色。

如果单元格 G2 的值大于 08:45:00 (hh:mm:ss) AND 单元格 D2 的值小于 00:45:00 (hh:mm:ss) 或单元格 D2 为空白，则将背景颜色设置为单元格 D2 变为黄色。

如果不满足条件，则应将背景颜色重置为无。

我了解到使用公式是不可能的。在 Google Apps Script 中有没有办法做到这一点？我不是脚本编写者，但知道如何插入片段，如果有人愿意向我解释它，我可能能够阅读和理解。

在搜索类似用例时，我发现对 Google Apps 脚本的唯一引用[是这个链接](http://productforums.google.com/forum/#!searchin/apps-script/conditional%2420formatting%2420another%2420cell/apps-script/0EVIGvRYX6Y/6r0brNiPrCgJ)，这是对其功能的一般性讨论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T22:25:19.710

这应该可以通过为这样的函数创建 onEdit 触发器来实现：

```
function myOnEdit(e) {
  var nextColumnCell = e.range.offset(0, 1);
  if (e.range.getValue() == 'foo') {
    nextColumnCell.setFontWeight('bold');
  } else {
    nextColumnCell.setFontWeight('normal');
  }
} 
```

可以在[此处](https://developers.google.com/apps-script/guide_events)找到有关触发器的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T07:08:23.740

不知何故，我也找不到直接比较 Google 电子表格中时间的方法。但我可以从格式转换`time`为`number`格式。通过这样做，您将能够比较实体。

**格式中的**1**`number`等于格式中的**00:00:00**，`time`因为 1 代表 12:00am**

 ****格式中的**0.5**`number`等于格式中的**12:00:00**，`time`因为 0.5 代表下午 12:00**

 ****格式中的**0.25**`number`等于格式中的**6:00:00**，`time`因为 0.5 代表上午 6:00**

 **它没有回答主要问题，但我希望它有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-23T21:04:20.473

（现在）可以使用公式。

选择 ColumnD 并从中清除任何现有的 CF 规则。格式、条件格式...、如果...则格式化单元格`Custom formula is`和

```
=and(row()<>1,or(and(G1>6.5/24,D1<0.5/24),and(G1>8.75/24,D1<0.75/24))) 
```

用黄色填充和`Done`.******

# java - 安卓设备的 USB 检测代码崩溃

> ID：10752419
> 
> 赞同：0
> 
> 时间：2012-05-25T10:05:34.843
> 
> 标签：java, android, usb

我已经为android设备的usb检测编写了一个小代码，但是当我将设备电缆连接到计算机的CPU时它崩溃了

这是我的代码

```
public class IntentReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {

        // TODO Auto-generated method stub

        if(intent.getAction().equals(Intent.ACTION_UMS_CONNECTED))

        {

            Toast.makeText(context, "mounted", Toast.LENGTH_LONG).show();
            Log.i("ANDROID DEVICE IS","CONNECTED");
            System.out.println(" ANDROID DEVICE IS CONNECTED");
            // Intent myStarterIntent = new Intent(context, CarHome.class);
            //   myStarterIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            //   context.startActivity(myStarterIntent);
        }

        else if(intent.getAction().equals(Intent.ACTION_UMS_DISCONNECTED)){

            Toast.makeText(context, "Unmounted", Toast.LENGTH_LONG).show();
            Log.i("ANDROID DEVICE IS","DISCONNECTED");  
            System.out.println(" ANDROID DEVICE IS NOT CONNECTED");
        }
    }

} 
```

清单文件在这里

```
<receiver android:name=".IntentReceiver">
    <intent-filter>
      <action android:name="android.intent.action.ACTION_UMS_CONNECTED" />
      <action android:name="android.intent.action.ACTION_UMS_DISCONNECTED" />
      <action android:name="android.intent.action.ACTION_POWER_CONNECTED" />
    </intent-filter>
</receiver> 
```

Logcat 显示这些错误

```
05-25 15:30:08.350: E/AndroidRuntime(3457):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:1785)
05-25 15:30:08.350: E/AndroidRuntime(3457):     at android.app.ActivityThread.access$2400(ActivityThread.java:121)
05-25 15:30:08.350: E/AndroidRuntime(3457):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:993)
05-25 15:30:08.350: E/AndroidRuntime(3457):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-25 15:30:08.350: E/AndroidRuntime(3457):     at android.os.Looper.loop(Looper.java:130)
05-25 15:30:08.350: E/AndroidRuntime(3457):     at android.app.ActivityThread.main(ActivityThread.java:3701)
05-25 15:30:08.350: E/AndroidRuntime(3457):     at java.lang.reflect.Method.invokeNative(Native Method)
05-25 15:30:08.350: E/AndroidRuntime(3457):     at java.lang.reflect.Method.invoke(Method.java:507)
05-25 15:30:08.350: E/AndroidRuntime(3457):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
05-25 15:30:08.350: E/AndroidRuntime(3457):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
05-25 15:30:08.350: E/AndroidRuntime(3457):     at dalvik.system.NativeStart.main(Native Method)
05-25 15:30:08.350: E/AndroidRuntime(3457): Caused by: java.lang.ClassNotFoundException: com.kk88655.hello.IntentReceiver in loader dalvik.system.PathClassLoader[/data/app/com.kk88655.hello-2.apk]
05-25 15:30:08.350: E/AndroidRuntime(3457):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
05-25 15:30:08.350: E/AndroidRuntime(3457):     at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
05-25 15:30:08.350: E/AndroidRuntime(3457):     at  java.lang.ClassLoader.loadClass(ClassLoader.java:511) 
```

最新的 logcat 消息

```
05-25 17:51:32.878: E/AndroidRuntime(5602): FATAL EXCEPTION: main
05-25 17:51:32.878: E/AndroidRuntime(5602): java.lang.RuntimeException: Unable to instantiate receiver com.kk88655.hello.IntentReceiver: java.lang.ClassNotFoundException: com.kk88655.hello.IntentReceiver in loader dalvik.system.PathClassLoader[/data/app/com.kk88655.hello-1.apk]
05-25 17:51:32.878: E/AndroidRuntime(5602):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:1785)
05-25 17:51:32.878: E/AndroidRuntime(5602):     at android.app.ActivityThread.access$2400(ActivityThread.java:121)
05-25 17:51:32.878: E/AndroidRuntime(5602):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:993)
05-25 17:51:32.878: E/AndroidRuntime(5602):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-25 17:51:32.878: E/AndroidRuntime(5602):     at android.os.Looper.loop(Looper.java:130)
05-25 17:51:32.878: E/AndroidRuntime(5602):     at android.app.ActivityThread.main(ActivityThread.java:3701)
05-25 17:51:32.878: E/AndroidRuntime(5602):     at java.lang.reflect.Method.invokeNative(Native Method)
05-25 17:51:32.878: E/AndroidRuntime(5602):     at java.lang.reflect.Method.invoke(Method.java:507)
05-25 17:51:32.878: E/AndroidRuntime(5602):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
05-25 17:51:32.878: E/AndroidRuntime(5602):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
05-25 17:51:32.878: E/AndroidRuntime(5602):     at dalvik.system.NativeStart.main(Native Method)
05-25 17:51:32.878: E/AndroidRuntime(5602): Caused by: java.lang.ClassNotFoundException: com.kk88655.hello.IntentReceiver in loader dalvik.system.PathClassLoader[/data/app/com.kk88655.hello-1.apk]
05-25 17:51:32.878: E/AndroidRuntime(5602):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
05-25 17:51:32.878: E/AndroidRuntime(5602):     at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
05-25 17:51:32.878: E/AndroidRuntime(5602):     at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
05-25 17:51:32.878: E/AndroidRuntime(5602):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:1776)
05-25 17:51:32.878: E/AndroidRuntime(5602):     ... 10 more
05-25 17:51:32.878: W/ActivityManager(238):   Force finishing activity com.kk88655.hello/.CarHome 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:36:08.183

您应该阅读文档：

> ACTION_UMS_CONNECTED
> 
> **不推荐使用**此常量。取而代之 `android.os.storage.StorageEventListener`
> 
> 广播动作：设备已进入 USB 大容量存储模式。这**主要用于 USB 设置面板。应用程序应侦听 ACTION_MEDIA_MOUNTED 和 ACTION_MEDIA_UNMOUNTED 广播**，以便在挂载或卸载 SD 卡文件系统时收到通知

* * *

反对你的`ClassNotFoundException`：

在您的清单中，您在 BoradcastReceiver 的类名前面加上一个句点，这是一个快捷方式。它将采用您在`<manifest>`-tags `package`-attribute 中指定的包名并将给定的类名添加到其中。

因此，您应该确保您的完全限定的类路径是`com.kk88655.hello.IntentReceiver`，因为您似乎将`hello`-package 重命名为`hello2`（如 logcat: 中所示`/data/app/com.kk88655.hello-2.apk`）。

* * *

这里已经提出了一个类似的问题：[Android Broadcast Receiver Error: Class not found exception](https://stackoverflow.com/questions/3558977/android-broadcast-receiver-error-class-not-found-exception) with no accepted or up-voted answer so far。

另一个想法是在`<receiver>`-tags `android:name`-attribute 中指定完全限定的包名称，如下所示：[Unable to instantiate receiver in BroadcastReceiver SMS](https://stackoverflow.com/questions/4619049/unable-to-instantiate-receiver-in-broadcastreceiver-sms)

另一种解释可能是您的旧应用程序版本的更新问题，如下所述：[升级 Android 应用程序时的 ClassNotFoundException 错误报告](https://stackoverflow.com/questions/5769534/classnotfoundexception-error-reports-when-upgrading-android-app)阅读这个问题，它也可能是 App2SD 问题。

# c# - C# ASP .Net 中的静态数组

> ID：10752421
> 
> 赞同：0
> 
> 时间：2012-05-25T10:05:43.413
> 
> 标签：c#, asp.net

我遇到了一个奇怪的问题。

我有一个静态方法，它是常见的 DLL，并从数据库中返回一个国家的静态数组。

并使用这种常用方法，我正在尝试填写国家/地区的下拉列表。

所以代码如下。

共同点 - 帮助类 DLL 代码

```
public static string[] Countries()
    {

            string qry = "select * from Countries";

            Dataset result=SqlHelper.ExecDS(qry);
            countryArray = new string[100];
            //Filing country array
            return countryArray;
    } 
```

在当前项目中

```
countryOptions = new string[100];
countryOptions = Common.Helper.Countries(); 
```

我知道 Drop Down 应该只与 DS 绑定，但由于他是常见的 DLL，我无法更改它。

但现在我面临的唯一问题是，即使从国家表中删除一行，效果也不会出现在国家数组中。

Common.Helper.Countries() 仍然返回该行。我已经仔细检查了该行是否已被删除，但它的效果没有到来。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:18:34.290

> ```
> I know Drop Down should be bind with DS only 
> ```

如果您的意思是下拉列表只能与 绑定`DataSet`，那是不正确的。请参阅[在 ASP.NET 中使用列表集合、枚举和数据集绑定 DropDownList](http://www.codeproject.com/Tips/303564/Binding-DropDownList-Using-List-Collection-Enum-an)

> 如果我从国家/地区表中删除一行，则效果不会出现在国家/地区数组中

在下一行放置一个断点，看看数组是否被填充。

```
countryOptions = Common.Helper.Countries(); 
```

调用`dropDownList.DataBind();`刷新下拉列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:23:49.097

你如何填充数组？我认为这是发生错误的地方。

此外，您的数组不需要初始化两次：

```
// Creates a 100-item-array that is never actually used, so
// this line looks unnecessary
countryOptions = new string[100];

// Creates another array on the heap, leaving above array
// to GC
countryOptions = Common.Helper.Countries(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-31T12:03:57.267

实际上问题是由于数组是静态的，我必须重新启动 IIS，否则它将采用相同的值。

# delphi - 保持打开的连接 TCP/IP

> ID：10752422
> 
> 赞同：2
> 
> 时间：2012-05-25T10:05:44.660
> 
> 标签：delphi, sockets

我正在使用 TClientSocket 和 TServerSocket 与服务器通信，问题是有时连接丢失是由于服务器向我发出以下异常：WsaSend 上的错误、访问冲突等或客户端：异步套接字错误。

Witch 是从这些错误中恢复并保持连接打开的最佳方法，无论如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T12:20:09.210

没有“无论如何保持连接打开”这样的事情。如果电缆被切断怎么办？您可以做的最好的事情是在某个时间间隔发送一个心跳，让中间路由器知道您仍然有兴趣使用该连接，并仔细处理所有错误，并在必要时重新建立连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T23:40:51.593

好问题...您收到的是**WSAECONNABORTED**（*异步套接字错误 10053*）。

我如何防止它发生在我的代码中？嗯，有一个东西叫 Keepalive，如果你仔细看名字，Keep-Alive，它的意思是保持连接处于活动状态，只需向连接发送 Null 数据（可以是 One-way），仅此而已……

我做了一个计时器（命名为 TmrKeepAlive）并将其间隔设置为 5000 毫秒（5 秒），[有关 KeepAlive 的更多信息](http://en.wikipedia.org/wiki/Keepalive)。

编辑：另外，如果您不想编写自己的 KeepAlive 机制，请查看[此](https://stackoverflow.com/questions/15372281/how-to-use-so-keepalive-with-tserversocket)

# c# - 表达式的真值表（作为字符串）

> ID：10752423
> 
> 赞同：0
> 
> 时间：2012-05-25T10:05:46.113
> 
> 标签：c#, parsing, truthtable

我想计算用户作为字符串输入的表达式（有效逻辑表达式）的真值表。任何人都可以为此发布现有解决方案或指导我这样做吗？我正在考虑使用 BitArray（大小为 2^no。变量）作为输出（真值表）。但不知道如何开始。请帮我解决一下这个。

前任：-

```
 p or q or r 
```

结果应为

```
 False True True True True True True True 
```

和

```
 a and b 
```

结果应为

```
 False False False True 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:16:06.197

没有任何第三方库的一种方法是使用带有表达式的 DataTable。

您甚至可以评估其他结果值类型，而不仅仅是布尔值。

```
System.Data.DataTable table = new System.Data.DataTable();
table.Columns.Add("", typeof(Boolean));
table.Columns[0].Expression = "true and false or true";

System.Data.DataRow r = table.NewRow();
table.Rows.Add(r);
Boolean result = (Boolean)r[0]; 
```

表达式语法与您的示例不同，但它做同样的事情。一个优点是它的 100% .NET 框架包含 --> Microsoft 管理。错误处理也不错。缺少运算符等的例外情况...

[可用的运算符](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T10:16:18.473

首先，您需要*解析*字符串输入以查找变量和表达式的结构（即哪些操作应用于哪些子表达式）。

完成后，您可以将变量的状态表示为二进制整数。有了这种表示，您可以从 0 开始（意味着所有变量都是假的），并为真值表的每一行将整数表示增加 1。这样，您可以只计算一次所有可能的组合。

然后将变量的值应用于表达式（根据整数的位值替换为真/假）并计算表达式的值。

如果您想要结果的紧凑表示，您可以将每个输入组合的表达式值存储在线性集合（例如向量）中，其中输出的索引对应于变量值的上述整数表示。如果您知道哪个变量映射到输入的哪个位，您可以随时重新创建完整表（例如用于打印）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-06T09:46:44.787

我认为 CKen ( [http://cken.sourceforge.net/](http://cken.sourceforge.net/) ) (对你有好处)。

CKen 支持“大写”和“小写”，因此它支持 58 (= 2x29) 个单变量！

最重要的是，可以在其中使用多表达式（通过分隔符）：

例子：`a,b,c,d,e;(a+b)*c;d*e#a;`

另一方面，它非常快！

* * *

**在表达式中使用它（变量）之前，您必须定义变量。**

# asp.net-mvc-3 - ASP.NET MVC 3（Razor）表单提交不起作用

> ID：10752426
> 
> 赞同：0
> 
> 时间：2012-05-25T10:06:05.203
> 
> 标签：asp.net-mvc-3, razor

使用 Fiddler 我可以看到甚至没有发出请求，但我不明白为什么。

这是表格：

```
@using (Html.BeginForm("Index", "FileSystemChannelIndex", FormMethod.Post, new {
channelId = @Model.ChannelId }))
{
    @Html.HiddenFor(model => model.Id)
    @Html.HiddenFor(model => model.ChannelId)
    <div class="editor-label">
        Select File Source
    </div>
    <div class="editor-field">
        @Html.DropDownListFor(
            model => model.SelectedFileSourceValue,
            new SelectList(Model.AvailableFilesSources, "Id", "Name"),
            new { id = "selectFileSource" })
    </div>
    <p>
        <input class="t-button" type="submit" value="Save" />
    </p>
} 
```

视图最初来自：

```
public ViewResult Create(int channelId)
{   
    var channel = this.fullUOW.GetFileSystemChannelRepository().All.Where(c => c.Id == channelId);
    var vm = new FileSystemChannelIndexViewModel(channelId, new FileSystemChannelIndex());
    return View("Edit", vm);
} 
```

我尝试将“名称”属性添加到，但这没有任何区别。

有任何想法吗？

**编辑：**吉姆等人的更多信息......

领域：

```
public class FileSystemChannel
{
   public int Id {get; set; }
   public ICollection<FileSystemChannelIndex> ChannelIndexes { get; set; }
}

public class FileSystemChannelIndex
{
   public int Id { get; set; }
   public FileSystemChannel ParentChannel { get; set; }
} 
```

由于 0...* 关联，在 UI 中，我们必须先创建一个 FileSystemChannel，然后向它添加一个 FileSystemChannelIndex。这就是为什么我将 channelId 传递给 FileSystemChannelIndex 创建视图。提交新的 FileSystemChannelIndex 时，应调用以下操作：

```
[HttpPost]
public ActionResult Index(int channelId, FileSystemChannelIndexViewModel vm)
{
    //TODO: get the Channel, add the Index, save to db

    return View("Index");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T13:35:45.007

因此，感谢 Mark 的评论，这是由于 Select 客户端验证失败。使用 IE 开发工具检查元素：

```
<select name="SelectedFileSourceValue" class="input-validation-error" id="selectFileSource" data-val-required="The SelectedFileSourceValue field is required." data-val-number="The field SelectedFileSourceValue must be a number." data-val="true"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T10:31:28.387

恩波，

除了我上面的评论：

*empo - 您能否将这两种`public ActionResult Create(////)`方法（即`HttpPost`和`HttpGet`）都发布到问题中，因为这可能会突出问题是否与不明确的方法签名有关，我怀疑这很可能是因为您发回与 HttpGet actionresult 相同的签名*

尝试按照以下方式添加适当的 HttpPost actionresult：

```
[HttpPost]
public ActionResult Create(FileSystemChannelIndex domainModel)
{
    if (!ModelState.IsValid)
    {
        return View(PopulateEditViewModel(domainModel));
    }

    _serviceTasks.Insert(domainModel);
    _serviceTasks.SaveChanges();
    return this.RedirectToAction("Edit", new {id = domainModel.ChannelId});
} 
```

你原来的 HttpGet （我觉得“奇怪”）：

```
[HttpGet]
public ViewResult Create(int channelId) {   
    var channel = this.fullUOW.GetFileSystemChannelRepository().All
       .Where(c => c.Id == channelId);
    var vm = new FileSystemChannelIndexViewModel(channelId, 
        new FileSystemChannelIndex());
    return View("Edit", vm); 
} 
```

在您的 Edit actionresult 中，您将根据传入的 id 获取实体。可能会工作，可能不会。如果没有更全面地了解您的领域和逻辑，则不确定。

显然，您自己的管道会有所不同，但这应该可以让您了解预期的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T11:10:26.080

创建东西时如何拥有 Model.Id ？也许 Model.Id 为空，因为您无法发布

# python - 计算唯一数字一行（有效）

> ID：10752434
> 
> 赞同：0
> 
> 时间：2012-05-25T10:06:27.370
> 
> 标签：python

我正在寻找一种方法来有效地计算唯一数字与一个班轮。

例如：给定整数`623562`，返回值将是`4`。

我目前的做法是，给定整数`i`，我使用`len(set(str(i)))`. 创建一个集合非常耗时。我要处理很多数字，所以我需要一种有效的方法。

此外，如果有人可以找到一种方法来遍历所有带有数字的`x`数字而不使用 `range()`（并且在一个班轮中......），我会很高兴。使用时内存限制了我，`range`因为创建了一个列表（我假设）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-25T10:12:13.700

`set`s 已针对此创作进行了优化。除非您想推出自己的十进制到字符串的转换（这需要不止一行），否则这是要走的路。

`range`仅在 Python 2.x 中分配内存。对于像 623562 这样的小数字，内存应该不是问题。对于更大的数字，请`xrange`在 Python 2.x 中使用，或者直接切换到 Python 3.x，其中`range`会及时生成数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T10:38:11.630

我很难相信这`len(set(str(num)))`对你来说还不够快。这是`len(set(str()))`一个随机的非常大的数字 100,000 次的测试：

```
% python -m timeit -s 'import random' 'for i in range(100000): \
  len(set(str(random.randint(199123212312399956789, 1000000099999999123091230000000))))'
10 loops, best of 3: 456 msec per loop 
```

那段时间的很大一部分只是生成随机数！如果你真的需要比这更快，我认为你应该考虑另一种语言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T10:48:39.053

这是一种避免每次都创建集合的方法。除了最后一行之外的所有代码都是初始化代码，所以只发生一次：

```
>>> from operator import or_
>>> from collections import Counter
>>> from functools import reduce
>>> bits = {str(i):2**i for i in range(10)}
>>> counts = [Counter(format(i,'b'))['1'] for i in range(2**10)]

>>> counts[reduce(or_, (bits[c] for c in str(623562)))]
4 
```

但是，它比简单、清晰、明显要慢 3 倍左右`len(set(str(i)))`。像往常一样，在 Python 中让事情变得更复杂或试图变得过于聪明都会反过来影响你的性能。

# c# - 如何使相机跟随unity3d C#中的对象？

> ID：10752435
> 
> 赞同：7
> 
> 时间：2012-05-25T10:06:31.410
> 
> 标签：c#, object, camera, unity3d

我有一个名为 Ball 的对象，我向它添加了键盘交互性（WASD 移动球）我需要相机留在后面并跟随球，但我遇到了错误。

```
using UnityEngine;
using System.Collections;
public class ballmain : MonoBehaviour {
    public bool isMoving = false;
    public string direction;
    public float camX;
    public float camY;
    public float camZ;
    // Use this for initialization
    void Start () {
        Debug.Log("Can this run!!!");
    }

    // Update is called once per frame
    void Update () {
        camX = rigidbody.transform.position.x -=10;
        camY = rigidbody.transform.position.y -=10;
        camZ = rigidbody.transform.position.z;
        camera.transform.position = new Vector3(camX, camY, camZ);
            //followed by code that makes ball move
    }
} 
```

我收到错误“Assets/ballmain.cs(18,44): error CS1612: Cannot modify a value type return value of 'UnityEngine.Transform.position'。考虑将值存储在临时变量中”有人知道答案吗？如果我注释掉有关相机的代码，球可以四处移动。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-10T12:54:18.660

干得好 。完整的代码。

**简单跟随**

```
using UnityEngine;
using System.Collections;

public class Follow: MonoBehaviour {
public Transform target;
public float smooth= 5.0f;
void  Update (){
    transform.position = Vector3.Lerp (
        transform.position, target.position,
        Time.deltaTime * smooth);
} 

    } 
```

**高级跟随**

```
using UnityEngine;
using System.Collections;

public class SmoothFollowScript: MonoBehaviour {

// The target we are following
public  Transform target;
// The distance in the x-z plane to the target
public int distance = 10.0;
// the height we want the camera to be above the target
public int height = 10.0;
// How much we 
public heightDamping = 2.0;
public rotationDamping = 0.6;

void  LateUpdate (){
    // Early out if we don't have a target
    if (TargetScript.russ == true){
    if (!target)
        return;

    // Calculate the current rotation angles
    wantedRotationAngle = target.eulerAngles.y;
    wantedHeight = target.position.y + height;

    currentRotationAngle = transform.eulerAngles.y;
    currentHeight = transform.position.y;

    // Damp the rotation around the y-axis
    currentRotationAngle = Mathf.LerpAngle (currentRotationAngle, wantedRotationAngle, rotationDamping * Time.deltaTime);

    // Damp the height
    currentHeight = Mathf.Lerp (currentHeight, wantedHeight, heightDamping * Time.deltaTime);

    // Convert the angle into a rotation
    currentRotation = Quaternion.Euler (0, currentRotationAngle, 0);

    // Set the position of the camera on the x-z plane to:
    // distance meters behind the target
    transform.position = target.position;
    transform.position -= currentRotation * Vector3.forward * distance;

    // Set the height of the camera
    transform.position.y = currentHeight;

    // Always look at the target
    transform.LookAt (target);
}
}
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-21T15:21:50.687

如果您只是想跟随目标对象，请按照您想要的方式对齐相机的位置，并使相机成为目标对象的子对象，其余的就可以了

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-29T07:57:22.073

这是我在游戏开发过程中发现的一个有用的脚本。我没有创建它们，所以我感谢 wiki.unity3d.com 提供了这个惊人的脚本。

平滑跟随：

```
using UnityEngine;
using System.Collections;

        public class SmoothFollow2 : MonoBehaviour {
        public Transform target;
        public float distance = 3.0f;
        public float height = 3.0f;
        public float damping = 5.0f;
        public bool smoothRotation = true;
        public bool followBehind = true;
        public float rotationDamping = 10.0f;

        void Update () {
               Vector3 wantedPosition;
               if(followBehind)
                       wantedPosition = target.TransformPoint(0, height, -distance);
               else
                       wantedPosition = target.TransformPoint(0, height, distance);

               transform.position = Vector3.Lerp (transform.position, wantedPosition, Time.deltaTime * damping);

               if (smoothRotation) {
                       Quaternion wantedRotation = Quaternion.LookRotation(target.position - transform.position, target.up);
                       transform.rotation = Quaternion.Slerp (transform.rotation, wantedRotation, Time.deltaTime * rotationDamping);
               }
               else transform.LookAt (target, target.up);
         }
} 
```

[关于我的工作的更多信息](https://www.cleansourcecode.com/blog)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-10T06:45:15.657

将标准移动资产包含到您的项目中。它的脚本部分包含一个 SmoothFollow2D.js 代码。将此代码与游戏对象附加并初始化公共变量。这将为您完成这项工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-27T12:35:27.437

我发现这个简单而有用的统一 2d 相机跟随脚本。

```
using UnityEngine;
using System.Collections;

public class FollowCamera : MonoBehaviour {

public float interpVelocity;
public float minDistance;
public float followDistance;
public GameObject target;
public Vector3 offset;
Vector3 targetPos;
// Use this for initialization
void Start () {
    targetPos = transform.position;
}

// Update is called once per frame
void FixedUpdate () {
    if (target)
    {
        Vector3 posNoZ = transform.position;
        posNoZ.z = target.transform.position.z;

        Vector3 targetDirection = (target.transform.position - posNoZ);

        interpVelocity = targetDirection.magnitude * 5f;

        targetPos = transform.position + (targetDirection.normalized * interpVelocity * Time.deltaTime); 

        transform.position = Vector3.Lerp( transform.position, targetPos + offset, 0.25f);

    }
   }
} 
```

源[unity2d 相机跟随脚本](http://unity3diy.blogspot.com/2015/02/unity-2d-camera-follow-script.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-25T10:24:16.940

在`-=`这些行中：

```
 camX = rigidbody.transform.position.x -=10;
   camY = rigidbody.transform.position.y -=10; 
```

是错的。将`-=`尝试修改`rigidbody.transform.position`. 你只是想要`-`。

但是，就目前而言，相机不会跟踪目标 Z 位置的变化，如果相机旋转也不会正确跟踪。要获得您需要的正确位置（在向量中）：-

```
cam_pos = target_pos - dist_to_target * cam_look_at 
```

# java - 如何将 actionListener 应用于 TitledBorder 的标题？

> ID：10752438
> 
> 赞同：1
> 
> 时间：2012-05-25T10:06:43.223
> 
> 标签：java, swing, border, listener, actionlistener

我有一个关于将 actionListener 用于 TitledBorder 标题的问题：

```
borderPanel1 = BorderFactory.createTitledBorder(
                BorderFactory.createEtchedBorder(EtchedBorder.LOWERED),
                MainFrame.windowTitle); 
```

我的最终目标是能够按边框的标题来更改面板的标题。我怎样才能在这个边框的标题中添加某种 Listener？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T14:44:36.143

[`setBorder()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#setBorder%28javax.swing.border.Border%29)“建议您将组件放在 a 中`JPanel`并在 . 上设置边框”的作者`JPanel`。正如@Catalina Island 建议的那样，`MouseAdapter`您可以添加一个`JPanel`并让选择的处理程序弹出对话框。`Preferences`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T11:46:16.160

标题边框确实不是为此而设计的。它是一个`Border`，不是一个`Component`。如果标题是用户偏好，您可以将其添加到您的[`Preferences`](http://docs.oracle.com/javase/6/docs/api/java/util/prefs/Preferences.html)对话框中。

# c# - ASP MVC 中的多对多关系

> ID：10752439
> 
> 赞同：1
> 
> 时间：2012-05-25T10:06:46.123
> 
> 标签：c#, asp.net-mvc, entity-framework, razor

我将**MVC 3**与**Razor**和**实体框架**一起用于分配。

到目前为止，我一直在使用脚手架为我的所有模型创建一个基本的 CRUD 页面。

我拥有的两个模型是 Musicians 和 Sessions，这是一个多对多的关系（数据库中有它们的数据透视表，但模型中没有）。

基本上，我需要一些将音乐家分配到会话的方法，但我注意到我的所有属性都由 Razor 标签填充`@Html.EditorFor(model => model.SomeProperty)`，但是我怎样才能让它与集合一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:39:51.803

我建议你看这里：

[在多对多关系的情况下，坚持使用 asp.net mvc 3.0 脚手架](https://stackoverflow.com/questions/6813440/stuck-with-asp-net-mvc-3-0-scaffolding-in-case-of-many-to-many-relationship)

默认情况下，ASP.NET MVC 3 不构建多对多关系。如该链接中所述，您最好的选择是搭建您的 Session 或 Musician 脚手架，然后在每个视图中手动编码另一个模型的选择。

# web-services - 使用 Visual Studio 2008 访问 crm2011 Web 服务数据

> ID：10752444
> 
> 赞同：0
> 
> 时间：2012-05-25T10:07:09.587
> 
> 标签：web-services, sql-server-2008, reporting-services, dynamics-crm-2011

我正在使用 Visual Studio 2008 创建自定义报告。但我总是犯同样的错误......

> 根据验证程序，远程证书无效。---------------------------- 底层连接已关闭：无法为 SSL/TLS 安全通道建立信任关系。---------------------------- 元数据包含无法解析的引用：'https://srv-crm/myCompany/XRMServices/ 2011/Organization.svc?wsdl'。

我的网站有多个 IIS 绑定，所以我尝试了[以下](http://www.codewrecks.com/blog/index.php/2011/07/04/troubleshooting-microsoft-dynamic-crm-2011-connection-with-outlook/). 但仍然没有，我得到了一个 404 错误。

CRM2011 配置在两个单独的服务器（单独的 sql 服务器 + 客户端）上，我正在尝试从测试服务器访问该服务。

我还能检查什么？

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:44:03.100

对于那些在访问肥皂网络服务和使用 https 协议时遇到此类问题的人，我们通过使用基于声明的身份验证和 IFD 访问配置 RTM CRM 2011 部署来解决问题，这要感谢[本教程](http://www.youtube.com/watch?v=ZD5qaa-G99E)。

希望它会帮助你们中的一些人！

# iphone - 需要根据当前时间找到最近的时间基准

> ID：10752446
> 
> 赞同：2
> 
> 时间：2012-05-25T10:07:20.147
> 
> 标签：iphone

我想通过当前时间的比较从数组中找到最近的时间。（即）如果当前时间是上午 10:00，在这种情况下，有一个数组有上午 9:00、上午 9:50、上午 9:30。从这里我想得到上午 9 点 50 分。我怎样才能做到这一点？而且我不想更改数组中对象的索引值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T10:40:11.490

解析数组，将每个值与当前时间进行比较，存储数组中的时间与当前时间之间的秒数增量以及数组中值的索引。检查下一个是否具有较小的时间增量，并且是覆盖值和索引。在解析结束时，您将获得最近时间戳和时间增量的索引。

正在做

```
NSTimeInterval interval = 3600*24; // just a big number
NSUInteger indexOfDate;
// I didnt checked if the delta can be negative in this case think aboud absolute number

for (NSDate * date in dateArray) {

      if(abs([date timeIntervalSinceDate:[NSDate date]]) < interval) {
           interval = abs([date timeIntervalSinceDate:[NSDate date]]);
           indexOfDate = [dateArray indexOfObject:date];
            }
      } 
```

# wpf - 从模板绑定到视图模型的属性

> ID：10752448
> 
> 赞同：2
> 
> 时间：2012-05-25T10:07:25.250
> 
> 标签：wpf, templates, xaml, binding

我为我的 GameViewModel 做了一个视图

我有一些这样的xaml

```
<UserControl.Resources>
    <DataTemplate DataType="{x:Type ViewModels:PlayerViewModel}">
        <StackPanel>
                 <Button 
                    Content="{Binding ?????}"
                    Command="{Binding WrongAnswerCommand}" />
                <TextBlock 
                        Text="{Binding Name}" />
        </StackPanel>
    </DataTemplate>
</UserControl.Resources>
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition/>
    </Grid.RowDefinitions>
    <ListBox Grid.Row="0"
             ItemsSource="{Binding Players}"
             IsSynchronizedWithCurrentItem="True">
     </ListBox>
</Grid> 
```

所以，这里是一个可观察的集合 Players。

我需要将按钮内容绑定到 GameViewModel 的属性。

我应该使用什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T21:16:55.443

基本上，您需要更上一层楼才能获得完整的视图模型。

就像是

```
Content="{Binding DataContext.MyContentPropertyName, 
                  RelativeSource={RelativeSource FindAncestor, 
                                                 AncestorType={x:Type ListBox}}}" 
```

或者

```
Content="{Binding DataContext.MyContentPropertyName, 
                  RelativeSource={RelativeSource FindAncestor, 
                                             AncestorType={x:Type UserControl}}}" 
```

代表按钮内容`MyContentPropertyName`的属性在哪里。`GameViewModel`

注意：从片段看来，两个绑定都会产生相同的结果，将它们都添加以作为示例，您可以选择要查找正确上下文的高度。

# c# - 将注册表中的版本号转换为 System.Version？

> ID：10752450
> 
> 赞同：2
> 
> 时间：2012-05-25T10:07:28.073
> 
> 标签：c#, .net, registry, version

我正在从注册表中检索版本号，如下所示：

```
rKey.GetValue("Version") 
```

现在我想把它转换成一个`System.Version`对象。
我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T10:09:34.420

假设这是一个字符串...

```
string versionText = (string) rKey.GetValue("Version");
Version version = new Version(versionText); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-02T21:41:59.627

假设这是一个 REG_DWORD（通常作为卸载注册表项的一部分找到）......

[根据 MSDN，](https://msdn.microsoft.com/en-us/library/aa372105%28v=vs.85%29.aspx)此密钥是“派生自[ProductVersion](https://msdn.microsoft.com/en-us/library/aa370859%28v=vs.85%29.aspx)属性”。
它描述了 3 个字段：Major、Minor 和 Build。

DWORD 值（十六进制）可以通过以下方式分解：

> 0xMMmmBBBB
> 其中 MM = 主要版本，mm = 次要版本，BBBB = 构建。

这是我的[MCVE](https://stackoverflow.com/help/mcve)来做到这一点：

[![动作镜头](../Images/78c852f64915e034effcae4d64ecafe6.png)](https://i.stack.imgur.com/mbC8w.jpg)

主窗口：

```
<Window x:Class="RegVersionParse.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:l="clr-namespace:RegVersionParse"
        Height="150" Width="500"
        Title="Uninstall Registry Key ProductVersion Decoder">
    <Window.Resources>
        <l:VersionConverter x:Key="OutConvert"/>
    </Window.Resources>
    <StackPanel>
        <Label Margin="0,10,0,0" FontSize="10"
            Content="Computer\HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall
               &#x0a;    Input  REG_DWORD  Version  (as Decimal)"/>
        <StackPanel Orientation="Horizontal" Margin="20,15,0,5">
            <Label Content="Input: "/>
            <TextBox MinWidth="100" Text="{Binding MyInputVersion, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"/>
            <Label Content="Output: " Margin="40,0,0,0"/>
            <TextBox MinWidth="100" Text="{Binding MyOutput, Converter={StaticResource OutConvert}}" 
                     IsReadOnly="True" Background="{Binding StatusColor}"/>
        </StackPanel>
    </StackPanel>
</Window> 
```

主窗口.xaml.cs

```
using System;
using System.Windows;
using System.Windows.Data;
using System.Windows.Media;
using System.ComponentModel;
using System.Globalization;

namespace RegVersionParse
{
    [ValueConversion(typeof(Version), typeof(string))]
    public class VersionConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            if (value == null) { return "Not A Version"; }
            return value.ToString();
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            return DependencyProperty.UnsetValue;
        }
    }

    /// <summary>Interaction logic for MainWindow.xaml</summary>
    public partial class MainWindow : Window, INotifyPropertyChanged
    {
        string myInput;
        public string MyInputVersion
        {
            get { return myInput; }
            set
            {
                if (myInput != value)
                {
                    myInput = value;
                    MyOutput = RegDwordIntegerVersionParse(value);               
                    RaisePropertyChanged();
                }
            }
        }

        Version myOutput;
        public Version MyOutput
        {
            get { return myOutput; }
            set { if (myOutput != value) { myOutput = value; RaisePropertyChanged(); } }
        }

        Brush statusColor;
        public Brush StatusColor
        {
            get { return statusColor; }
            set { if (statusColor != value) { statusColor = value; RaisePropertyChanged(); } }
        }

        public MainWindow()
        {
            InitializeComponent();
            DataContext = this;
            StatusColor = new SolidColorBrush(Colors.Green);
        }

        /// <summary>
        /// This function is designed specifically for producing a 
        /// System.Version object from the Uninstall information
        /// ("Version" key) in the Windows registry for a given app.
        /// </summary>
        /// <param name="input">Using the Registry class to obtain a 
        /// REG_DWORD value for an installed application, 
        /// Input the integer value as a string.</param>
        /// <returns>System Version Object (Major, Minor, Build) </returns>
        public System.Version RegDwordIntegerVersionParse(string input)
        {
            string HexMajor = string.Empty;
            string HexMinor = string.Empty;
            string HexBuild = string.Empty;
            int Major = -1;
            int Minor = -1;
            int Build = -1;

            try
            {
                //int numVersion = int.Parse(input);
                Int64 numVersion = Int64.Parse(input); 

                string hexVersion = numVersion.ToString("X8");

                // Could also check for alphanumeric...
                if (!string.IsNullOrEmpty(hexVersion) && hexVersion.Length >= 5)
                {
                    HexMajor = hexVersion.Substring(0, 2);
                    HexMinor = hexVersion.Substring(2, 2);

                    // The Build number could be up to 4 characters, but might be less!
                    HexBuild = hexVersion.Substring(4, hexVersion.Length - 4);

                    Major = int.Parse(HexMajor, System.Globalization.NumberStyles.HexNumber);
                    Minor = int.Parse(HexMinor, System.Globalization.NumberStyles.HexNumber);
                    Build = int.Parse(HexBuild, System.Globalization.NumberStyles.HexNumber);

                    StatusColor = new SolidColorBrush(Colors.White);
                    return new Version(Major, Minor, Build);
                } 
                else 
                {
                    StatusColor = new SolidColorBrush(Colors.Orange);
                    return new Version();
                }
            }
            catch
            {
                StatusColor = new SolidColorBrush(Colors.Red);
                return new Version();
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;
        protected void RaisePropertyChanged([System.Runtime.CompilerServices.CallerMemberName] string propertyName = null) =>
            PropertyChanged?.Invoke(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

# objective-c - 我在使用 IBAction 调用的视图中没有导航栏？

> ID：10752451
> 
> 赞同：0
> 
> 时间：2012-05-25T10:07:30.270
> 
> 标签：objective-c, ios, uinavigationcontroller, ibaction

我的主菜单（一个 ViewController）嵌入在我在 Xcode4 的故事板中添加的 NavigationController 中。我的菜单中有一个按钮，显示一个新视图。为了显示它，我使用：

```
- (IBAction) display : (id) sender
{
    if(!anotherView) anotherView = [[AnotherView alloc] initWithNibName:@"AnotherView" bundle:nil];
    [self presentModalViewController:anotherView animated:NO];
} 
```

我的另一个视图正确显示了它的所有对象和元素。排除我的 NavigationController 的栏，它不会出现。为什么 ？

感谢您的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:12:10.330

您正在模态地展示您的 viewController。如果要使用导航控制器，则必须将视图推送到导航堆栈上。

代替

```
[self presentModalViewController:anotherView animated:NO]; 
```

和

```
[self.navigationController pushViewController:anotherViewController animated:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T10:12:30.117

您正在呈现视图`modally`您可能的意思是

```
[self.navigationController pushViewController:anotherView animated:YES] 
```

当然，您真正想要做的不是像这样不必要地混合和匹配故事板和非故事板流程，而是让故事板为您执行此操作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T19:36:19.273

您仍然可以在不丢失导航栏的情况下以模态方式展示您的视图。试试这个代码：

```
AnotherView *tempAnotherView = [[AnotherView alloc] initWithNibName:@"AnotherView" bundle:nil];
[self setAnotherView:tempAnotherView];
[tempAnotherView release];

UINavigationController *navController = [[[UINavigationController alloc] initWithRootViewController:self.anotherView] autorelease];
[self.navigationController presentModalViewController:navController animated:YES]; 
```

希望能帮助到你！:)

# visual-studio-2010 - 重新启用由于多个错误而被应用程序禁用的 VSTO 加载项

> ID：10752455
> 
> 赞同：5
> 
> 时间：2012-05-25T10:07:42.737
> 
> 标签：visual-studio-2010, vsto, excel-2010

我正在编写和调试 Excel VSTO 功能区插件，它有时会由于代码错误而崩溃。当 Excel 最终决定它太多并问我是否要永久禁用它时，我不小心点击了是。

现在无论我做什么，我都无法让插件在 Excel 启动时自动加载。我转到 COMs AddIn 对话框并设置复选框；手动删除注册表设置；在 Visual Studio 中清理项目并重建它——没用。

我应该在哪里配置以使其再次自动加载我的 VSTO？提前致谢。顺便说一句，它是我的开发机器上的 Excel 2010。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T16:13:36.790

您已禁用插件。重新启用它

选择文件 => 选项，然后选择加载项。在管理下拉列表中选择禁用项目，如果您的插件在此处列出，则启用它。

# ruby-on-rails - 如何在 Heroku Postgres 数据库上启用贡献模块

> ID：10752456
> 
> 赞同：13
> 
> 时间：2012-05-25T10:07:45.450
> 
> 标签：ruby-on-rails, postgresql, heroku

我正在尝试在 Heroku 上的新 Postgres 9 共享数据库中使用 contrib 模块。更具体地说，**pg_trgm**和**fuzzystrmatch**模块。在[文档](https://devcenter.heroku.com/articles/full-text-search)中它说

> 此外，还有许多免费的扩展可用，例如fuzzystrmatch、pg_trgm 和unaccent。

我似乎找不到任何关于如何在共享 Heroku 数据库上实际启用这些模块的文档。*请参阅下面的答案。*

**笔记：**

我尝试通过连接到数据库来添加它们

```
heroku pg:psql HEROKU_POSTGRESQL_BROWN 
```

并运行

```
create extension pg_trgm
create extension fuzzystrmatch 
```

但在尝试使用它之后

```
SELECT levenshtein('tests', 'test'); 
```

它仍然说

```
ERROR:  function levenshtein(unknown, unknown) does not existLINE 1: SELECT levenshtein('tests', 'test');
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts. 
```

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-25T10:17:53.700

在搜索 Stack Overflow 时[在这里](https://stackoverflow.com/questions/10648774/how-to-use-postgres-extensions-on-heroku-and-how-to-handle-their-migrations)找到了答案。不知道为什么它没有出现在我的任何 Google 搜索中。如果其他人使用相同的措辞来搜索这个问题，将把问题留在这里。

要启用模块，您需要将它们添加到迁移中，如下所示：

```
def up
  execute "create extension fuzzystrmatch"
  execute "create extension pg_trgm"
end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-05-06T03:06:52.800

在较新版本的 Rails 中，这样做就足够了：

```
def change
  enable_extension "fuzzystrmatch"
  enable_extension "pg_trgm"
end 
```

如果需要写`up`and`down`方法，对应的方法`enable_extension`就是`disable_extension`.

# javascript - EXTJS4 XML 存储 - 显示

> ID：10752457
> 
> 赞同：1
> 
> 时间：2012-05-25T10:07:46.250
> 
> 标签：javascript, xml, extjs, extjs4

我有一个 Perl 脚本，它向我的 EXTJS4 返回一个 XML 格式的 SOAP 请求。这是加载和显示 XML 的代码（这是我在 EXTJS 的第一次尝试）：

```
Ext.onReady(function() {  
Ext.Loader.setConfig({enabled:true});

    Ext.define('accounts', {     
        extend: 'Ext.data.Model',
        fields: [
            {name: 'name', type: 'string'},
            {name: 'origin', type: 'string'}
            ]
    }); 

    var myStore = Ext.create('Ext.data.Store', {
        model: 'accounts',
        proxy: {
            type: 'ajax',
            url: 'cgi-bin/runPerl.pl',
            reader: {
                type: 'xml',
                root: 'soap:Body'
            }
        },
        autoLoad: true
    });

     myStore.on('load', function(store, records, options) {

        var tpl = new Ext.XTemplate(
            '<tpl for="Accounts">',
            '<h1>{values.data.name}</h1>',
            '<h1>{values.data.origin}</h1>',
            '</tpl>'
        );

        //tpl.append(Ext.get("output"), store.getRange());

    }); 
```

这是 XML：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
<soap:Body>
<ns2:getAccountsResponse xmlns:ns2="http://services.nms.nimsoft.com/">
<Accounts>
<accountId>1</accountId>
<address></address>
<city></city>
<country></country>
<creationDate>2012-04-11T00:00:00+01:00</creationDate>
<description></description>
<fax></fax>
<name>Network</name>
<origin>Support_4</origin>
<phone></phone>
<postalCode></postalCode>
<state></state>
<webSite></webSite>
</Accounts>
</ns2:getAccountsResponse>
</soap:Body>
</soap:Envelope> 
```

Firebug 显示以下内容：

```
Ext.DomQuery.pseudos[name] is not a function
[Break On This Error] 
```

return Ext.DomQuery.pseudos[name](cs, value);

我已将其缩小到 tpl 部分，但我一生无法理解我得到的错误。

任何人都可以提供建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:07:05.643

尝试将您的读者定义更改为：

```
reader: {
    type: 'xml',
    // root: 'soap:Body',
    record: 'Accounts'
} 
```

# java - JList：按向上/向下按钮排序

> ID：10752463
> 
> 赞同：1
> 
> 时间：2012-05-25T10:08:04.750
> 
> 标签：java, swing, sorting, selection, jlist

问题：有没有一种简单的方法可以使用 jFrame 上的向上/向下按钮对 jList 进行排序？我的 JList 存储图像文件的路径并显示带有文件名的字符串。我想通过单击向下/向上按钮来向下/向上移动元素。

这就是我所做的 - 效果是移动选择（蓝色字段），而不是元素。Button2 是“向上”按钮。

```
private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
    int indexOfSelected = jList1.getSelectedIndex();
    File selectedFile = (File) jList1.getSelectedValue();
    indexOfSelected = indexOfSelected - 1;
    jList1.setSelectedIndex(indexOfSelected );
    jList1.updateUI();

} 
```

这就是 JList 的创建方式：

```
public void openButtonActionPerformed() {

        fc.setMultiSelectionEnabled(true);
        int returnVal = fc.showDialog(null, "Open");

         if (returnVal == JFileChooser.APPROVE_OPTION) { 
               file = fc.getSelectedFiles();
               len = file.length;
               System.out.println(len);   
         }    
         for (i=0; i<len; i++){ 
            listModel.add(i, file[i]);
         }
         jList1.setModel(listModel);
         jList1.updateUI();
} 
```

提前感谢您的帮助和耐心。我是初学者：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T10:13:57.463

如果您使用支持`set`操作的列表模型，您可以执行以下操作：

```
private void swapElements(int pos1, int pos2) {
    File tmp = (File) listModel.get(pos1);
    listModel.set(pos1, listModel.get(pos2));
    listModel.set(pos2, tmp);
}

private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
    int indexOfSelected = jList1.getSelectedIndex();
    swapElements(indexOfSelected, indesOfSelected - 1);
    indexOfSelected = indexOfSelected - 1;
    jList1.setSelectedIndex(indexOfSelected );
    jList1.updateUI();
} 
```

# ruby - state_machine ruby gem 中状态的human_name

> ID：10752464
> 
> 赞同：8
> 
> 时间：2012-05-25T10:08:07.213
> 
> 标签：ruby, ruby-on-rails-3

我使用 gem state_machine -[官方](https://github.com/pluginaweek/state_machine)

每个州都可以有“人名”。通过我尝试过的文档和 API：

在 my_model.rb

```
state_machine :initial => :new do
    state :new, :human_name => 'Added and not accepted'
    ... 
```

在 my_view.haml

```
%p= MyModel.human_state_name(@item.state_name)
%p= @item.human_state_name 
```

两种变体都只返回“新”而不是“已添加且未接受”。我该做什么？我在设置human_name 或获取human_name 时犯了错误？

**更新** 作品在：

```
en:
  activerecord:
    state_machines:
      mymodel: # model name
        states:
          new: 'Added and not accepted' # state name 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-25T10:39:27.220

您不需要将 :human_name 选项传递给状态机。只需为您的语言定义翻译：

```
en:
  activerecord:
    state_machines:
      mymodel: # model name
        state: # state name
          states:
            new: 'Added and not accepted'
          events: # you can also define translations for the events
            some_event: 'put custom translation here' 
```

# r - colnames intgroup 对 Biobase 的 arrayQualityMetrics 包的争论

> ID：10752468
> 
> 赞同：0
> 
> 时间：2012-05-25T10:08:32.083
> 
> 标签：r

我正在使用来自 Biobase 的包：arrayQualityMetrics 用于创建用于微阵列数据可视化的图。

我的数据存储在 ExpressionSet 中。phenoData(ExpressionSet) 的列名之一的名称为“Tissue”，但是当我运行以下命令时：

```
arrayQualityMetrics(ExpressionSet,intgroup = "Tissue") 
```

它给了我一个错误，说：

```
Error in prepdata(expressionset, intgroup = intgroup, do.logtransform = do.logtransform) : 
  all elements of 'intgroup' should match column names of 'pData(expressionset)'. 
```

我不明白为什么我会收到此错误，尽管我的 ExpressionSet 在其 phenoData 中包含一个名为“Tissue”的列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T23:40:44.493

您问这个问题已经有一段时间了，但这可能是由于 arrayQualityMetrics() 必须将 pData() 槽中的数据框缩减为有限数量的字段，以便在报告开头的元数据表中显示。

尝试类似：

```
tmp <- pData(ExpressionSet)
pData(ExpressionSet) <- tmp[,c("Tissue", "SomeOtherInterestingField")] # swap out
arrayQualityMetrics(ExpressionSet,intgroup="Tissue")
pData(ExpressionSet) <- tmp # replace with your original full pData() data frame 
```

# iphone - 删除使用 KeychainItemWrapper iphone-sdk 存储的用户名/密码

> ID：10752474
> 
> 赞同：0
> 
> 时间：2012-05-25T10:08:47.377
> 
> 标签：iphone, ios, security, ios4

我使用 KeychainItemWrapper 类将用户名密码存储在 iphone 应用程序中。但此信息在从设备中删除应用程序后存在。那么，当应用程序从设备中删除时，任何人都可以建议我如何从设备中删除此信息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T10:28:52.837

没有“回调”或任何其他方式可以知道应用程序何时从设备中删除。记录将保留在那里，直到设备被擦除或重置为出厂默认设置。

# spring - 离开向导页面时，Spring MVC 删除会话属性

> ID：10752476
> 
> 赞同：2
> 
> 时间：2012-05-25T10:08:55.313
> 
> 标签：spring, wizard

我有一个基于 Spring MVC 的向导。为了存储用户输入，我在会话中保存了一个 RegisterCustomerForm 对象。如果我通过单击“完成”或“取消”完成向导，一切正常。但是，如果用户通过单击其他链接离开向导，我也想删除会话属性。我想像对话范围之类的东西。

有什么好方法可以实现这种行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:17:28.660

如果您可以使用 Spring 3.1，则可以利用从[`RedirectAttributes`](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/new-in-3.1.html#d0e1605)该版本开始提供的版本。演示如何使用该功能[的示例。](http://www.tikalk.com/java/redirectattributes-new-feature-spring-mvc-31)

# maven - 在 Maven 中生成 Fortify 报告

> ID：10752483
> 
> 赞同：2
> 
> 时间：2012-05-25T10:09:14.127
> 
> 标签：maven, plugins

我正在尝试使用 maven 生成强化报告，我已经下载了插件 Fortify360 和 fortify-plugin-1.0，将其安装在我的存储库中，然后在我的配置文件中添加了依赖项，但我无法生成强化我的java源代码的报告（.fpr）文件。你能帮我看看我该怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-18T05:44:42.660

Fortify 提供了 maven 插件的源代码。你需要构建它

步骤 # 1 构建强化插件

打开命令提示符

```
cd %FORTIFY_INSTALLATION_DIRECTORY%\HP_FORTIFY\HP_Fortify_SCA_and_Apps_3.90\Samples\advanced\maven-plugin

mvn clean install 
```

成功构建后，fortify 插件将出现在您的本地存储库中

步骤 # 2 将 fortify 源代码分析器依赖项添加到项目 pom 文件中

```
<build>
        <plugins>
            <plugin>
                <groupId>com.fortify.ps.maven.plugin</groupId>
                <artifactId>sca-maven-plugin</artifactId>
                <version>3.90</version>

            </plugin>

        </plugins>

    </build> 
```

注意 - 确保您验证强化扫描插件版本

```
FORTIFY_INSTALLATION_DIRECTORY%\HP_FORTIFY\HP_Fortify_SCA_and_Apps_3.90\Samples\advanced\maven-plugin\pom.xml 
```

步骤 # 3 创建 .frp / 报告文件

```
mvn sca:translate
mvn sca:scan 
```

这将在目标目录中生成强化扫描报告文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:35:00.773

使用 maven-sca-plugin，并执行以下命令。

```
mvn sca:scan 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-02T11:53:51.690

对于单模块项目：

```
mvn clean
mvn sca:clean
mvn install sca:translate
mvn -Dfortify.sca.Xmx=800M sca:scan 
```

# java - 如何从文本文件中读取整数值

> ID：10752484
> 
> 赞同：10
> 
> 时间：2012-05-25T10:09:18.960
> 
> 标签：java

> **可能重复：**
> [Java：将整数从文件读入数组](https://stackoverflow.com/questions/303913/java-reading-integers-from-a-file-into-an-array)

我想从一个文本文件中读取整数值，比如contactids.txt。在文件中我有像

```
12345
3456778
234234234
34234324234 
```

我想从文本文件中读取它们...请帮助

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-25T10:13:33.000

您可能想做这样的事情（如果您使用的是 java 5 或更多）

```
Scanner scanner = new Scanner(new File("tall.txt"));
int [] tall = new int [100];
int i = 0;
while(scanner.hasNextInt())
{
     tall[i++] = scanner.nextInt();
} 
```

通过[Julian Grenier](https://stackoverflow.com/users/23051/julien-grenier)从[从数组中的文件中读取整数](https://stackoverflow.com/questions/303913/java-reading-integers-from-a-file-into-an-array/304061#304061)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T10:13:12.870

您可以使用 a[`Scanner`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html)及其[`nextInt()`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#nextInt%28%29)方法。
如果需要，扫描仪还可以[`nextLong()`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#nextLong%28%29)处理更大的整数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-25T10:17:19.563

试试这个：-

```
File file = new File("contactids.txt");
Scanner scanner = new Scanner(file);
while(scanner.hasNextLong())
{
  // Read values here like long input = scanner.nextLong();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T10:11:08.727

值有多大？Java 6 的 Scanner 类可以读取从 int（32 位）、long（64 位）到 BigInteger（任意大整数）的任何内容。

对于 Java 5 或 4，有 Scanner，但不支持 BigInteger。您必须逐行读取（使用 Scanner 类的 readLine）并从 String 创建 BigInteger 对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-25T10:11:29.100

使用**FileInputStream**的**readLine()**方法读取并使用**Integer.parseInt()**方法将返回的 String 解析为 int。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-23T17:57:34.787

我会使用几乎相同的方式，但使用列表作为读取整数的缓冲区：

```
static Object[] readFile(String fileName) {
    Scanner scanner = new Scanner(new File(fileName));
    List<Integer> tall = new ArrayList<Integer>();
    while (scanner.hasNextInt()) {
        tall.add(scanner.nextInt());
    }

    return tall.toArray();
} 
```

# c# - 如何测试控制器以确保授权过滤器以正确的角色应用于它？

> ID：10752485
> 
> 赞同：1
> 
> 时间：2012-05-25T10:09:19.553
> 
> 标签：c#, asp.net-mvc, fluent-assertions

我在站点的管理部分有一个控制器，它装饰有授权过滤器，角色设置为管理员。

```
[Authorize(Roles = "Admin")]
public class SubscriberController : Controller 
```

这很好用，但我想创建一个单元测试以确保不删除过滤器。到目前为止，我已经验证了 Authorize 过滤器是否存在。

```
 typeof(SubscriberController).Should()
            .BeDecoratedWith<AuthorizeAttribute>(
                "Subscriber controller users must be admins"); 
```

如何验证 Roles 参数？我正在使用 Fluent Assertion 1.7.1.1。

现在可以在 Fluent Assertion v2 中：

```
 typeof(SubscriberController).Should()
        .BeDecoratedWith<AuthorizeAttribute>(a => a.Roles.Contains("Admin"),
            "Subscriber controller users must be admins"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T10:33:38.023

看起来现在不可能 -[测试属性参数](http://fluentassertions.codeplex.com/discussions/279305)

你可以打开这个帖子并询问进度。

# c# - 使用 .net 在 txt 中的特定位置插入一行

> ID：10752487
> 
> 赞同：3
> 
> 时间：2012-05-25T10:09:26.153
> 
> 标签：c#, .net, vb.net, file

我目前用于将字符串插入文本文件的过程是读取文件并在我再次写出文件时对其进行修改，这似乎是每个人都在做的事情。

由于 .net 有如此多样化的库，我想知道是否有一个特定的命令可以在 txt 文件的特定行插入字符串。

我想它看起来像这样：

```
dim file as file
file.open("filePath")

file.insert(string, location) 'this isn't actually an option, I tried 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T10:12:03.843

不，在 .NET 中没有什么专门做这件事的。

如果您乐于阅读以下所有文本行，则可以非常*简单地做到这一点：*

```
var lines = File.ReadAllLines("file.txt").ToList();
lines.Insert(location, text);
File.WriteAllLines("file.txt", lines); 
```

编写代码以一次复制一行，在复制时在正确的位置插入新行，在内存方面会更有效，但这会更有效。如果你*知道*你的文件会很小，我会选择上面的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T10:17:00.690

您可以简单地将所有文本读入一个字符串，然后使用字符串[插入](http://msdn.microsoft.com/en-us/library/system.string.insert.aspx)方法，例如

```
File.WriteAllText("file.txt", File.ReadAllText("file.txt").Insert(startIndex, "value")); 
```

# entity-framework - 实体框架代码上的conflit key

> ID：10752488
> 
> 赞同：0
> 
> 时间：2012-05-25T10:09:33.780
> 
> 标签：entity-framework, code-first, foreign-key-relationship

嗨，我在 EF 上的键有问题，当我创建新的时间线项时，我有包含与其他类（消息）有关系（一对多）的类（时间线项）、buzztimelineitem 不能包含属性（messagid）和导航的属性（messag）并尝试这样做：

```
 timeline.BuzzMessageId = listid.BuzzMessageId 
```

我有异常告诉我与表消息有冲突，当我尝试这样做时：

```
 timeline.BuzzMessage = list_msg[i]; (list_msg list of messag ) 
```

我在表messag中有新行，具有相同的prpertie但不同的messagid，你能告诉我这是怎么回事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:24:22.377

您可以尝试将 附加`list_msg[i]`到可能解决在消息表中创建新行的问题的上下文：

```
context.Messages.Attach(list_msg[i]);
timeline.BuzzMessage = list_msg[i]; 
```

# background - 当应用程序在后台 Symbian 中时在 QML 中暂停应用程序

> ID：10752489
> 
> 赞同：1
> 
> 时间：2012-05-25T10:09:33.780
> 
> 标签：background, symbian, qml

我想知道任何纯 QML 方法来确定应用程序是否在后台，然后相应地停止或播放音乐。在 meego 中，另一种方法是通过 PlatformWindow 元素，但在 Symbian QML 中不存在。请需要帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:20:48.913

最后我让它工作了:)我通过Qt方式做到了......这里是步骤

1) 创建一个类 MyEventFilter

```
class myEventFilter : public QObject
{

bool eventFilter(QObject *obj, QEvent *event) {
    switch(event->type()) {
    case QEvent::WindowActivate:
        emit qmlvisiblechange(true);
        qDebug() << "Window activated";

        bis_foreground=true;
        return true;
    case QEvent::WindowDeactivate:
        emit qmlvisiblechange(false);
        qDebug() << "Window deactivated";

        bis_foreground=false;
        return true;
    default:
    return false;
    }
}

 void dosomething();

private:
   int something;
public:
   bool bis_foreground;
      Q_OBJECT
 public slots:
   Q_INVOKABLE QString checkvisibility() {
       if (bis_foreground==true) return "true";
       else return "false";
   }
signals:
    void qmlvisiblechange(bool is_foreground);

}; 
```

2）然后在 main.cpp 中包含这个文件，包括该类并像这样添加 setContext 属性

```
context->setContextProperty("myqmlobject", &ef); 
```

3）在qml文件中这样调用它：

```
 Item {
    id: name
    Connections
    {
        target:myqmlobject
        onQmlvisiblechange:
        {

            if(is_foreground)
            {
              //dont do anything...
            }
            else
            {

                playSound.stop()
            }
        }
    }
} 
```

享受 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T13:52:46.773

为什么需要纯 QML 方式？

您可以通过安装事件过滤器来检测应用程序是否已发送到后台。检查： http: [//www.developer.nokia.com/Community/Wiki/Detecting_when_a_Qt_application_has_been_switched_to_the_background_and_when_resumed](http://www.developer.nokia.com/Community/Wiki/Detecting_when_a_Qt_application_has_been_switched_to_the_background_and_when_resumed)

对于“纯”QML 方式，有`Symbian`QML 元素： [http ://doc.qt.nokia.com/qt-components-symbian/qml-symbian.html](http://doc.qt.nokia.com/qt-components-symbian/qml-symbian.html)

它有一个`foreground`属性，指示应用程序是在前台还是在后台。您可以尝试连接到`onForegroundChanged`.

从文档中，该`Symbian`元素不是“可创建的”。它作为名为 的上下文属性存在`symbian`。所以一个示例用法是：

```
import QtQuick 1.1
import com.nokia.symbian 1.1

    PageStackWindow {
        id: window
        initialPage: MainPage {tools: toolBarLayout}
        showStatusBar: true
        showToolBar: true

        function appForegroundChanged() {
             console.log("Foreground: " + symbian.foreground)
         }
        function appCurrentTimeChanged() {
             console.log("Current time: " + symbian.currentTime)
         }
        Component.onCompleted: {
            symbian.currentTimeChanged.connect(appCurrentTimeChanged)
            symbian.foregroundChanged.connect(appForegroundChanged)
        }

        ToolBarLayout {

      id: toolBarLayout
        ToolButton {
            flat: true
            iconSource: "toolbar-back"
            onClicked: window.pageStack.depth <= 1 ? Qt.quit() : window.pageStack.pop()
        }
    }
} 
```

# javascript - 从外部重置 jQuery AJAX 超时

> ID：10752490
> 
> 赞同：2
> 
> 时间：2012-05-25T10:09:34.360
> 
> 标签：javascript, ajax, jquery

我想知道是否有任何可能性可以通过“外部”控件重置 AJAX 请求的超时。例如，假设我有以下内容：

```
jQuery.fn.worker = function worker() {
    $.get('/home/GetData', function (data) {
        // Manipulate retrieved data
    });
    setTimeout(worker, 30000);
}; 
```

比方说，是否有可能有一个按钮，通过它我可以重置工作人员的超时时间？

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T10:11:54.797

假设您使计时器全局可用，您可以使用`clearTimeout(timer)`.

```
var timer = setTimeout(worker, 30000); // create
clearTimeout(timer);  // clear 
```

# java - 使用 jQuery 将参数发送到 Java 服务器页面 (JSP)

> ID：10752496
> 
> 赞同：2
> 
> 时间：2012-05-25T10:09:52.063
> 
> 标签：java, jquery, jsp, jakarta-ee, servlets

我想向 JSP 发送不同的参数。是否可以在 jQuery 中向 JSP 发送多个参数？因为 jQuery 是客户端，而 JSP 是服务器端。

让我知道！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T10:13:12.377

您可以发出ajax请求传递参数

例如：

```
$.ajax({
  type: "POST",
  url: "userNameCheck.jsp",
  data: { username: "John"}
}).done(function( msg ) {
  alert( msg );
  //do other processing
}); 
```

**看**

*   [jQuery.ajax](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:21:22.390

最简单的情况：你想用 javascript (jQuery) 打开一些页面。在这种情况下，您可以将请求中的参数发送到页面：

```
document.location.href = "http://yourdomain.com/yourpage.jsp?paramName=" + paramValue; 
```

如果您需要在不重新加载页面的情况下发送数据，请使用 Jigar 所说的 ajax。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T10:24:32.197

你可以这样做：

```
$.ajax({
                    type: "POST",
                    url: "yoursite.com",
                    contentType: "application/json; charset=utf-8",
                    data: {param1: value1 , param2: "value2", param3: "value3"},
                    dataType: "json",
                    success: Succeess,
                    error: Failed
                }); 
```

# php - 可数对象和空

> ID：10752499
> 
> 赞同：7
> 
> 时间：2012-05-25T10:10:00.787
> 
> 标签：php, count

如果你对一个没有元素的数组执行 empty() ，你会得到真实的。但是，如果你对一个计数为 0 的 Countable 对象执行 empty() ，那么你会得到错误。在我看来，一个 0 计数 Countable 应该被认为是空的。我错过了什么吗？

```
<?php

class Test implements Countable
{
    public $count = 0;

    public function count ()
    {
        return intval (abs ($this -> count));
    }
}

$test = new Test ();

var_dump (empty ($test));
var_dump (count ($test));

$test -> count = 10;

var_dump (empty ($test));
var_dump (count ($test)); 
```

我本来希望第一次调用 empty 会返回 true，但事实并非如此。

出现这种情况是否有合理的理由，或者它是一个错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T10:13:28.860

从[文档](http://php.net/empty)：

```
Returns FALSE if var has a non-empty and non-zero value.

The following things are considered to be empty:

* "" (an empty string)
* 0 (0 as an integer)
* 0.0 (0 as a float)
* "0" (0 as a string)
* NULL
* FALSE
* array() (an empty array)
* var $var; (a variable declared, but without a value in a class) 
```

我认为`$test`在你的情况下仍然被认为是一个`Object`，它不在什么空会返回的列表中`TRUE`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-11T18:37:33.340

如上所述，`empty()`不认为`count($obj) == 0`是“空的”。这不能按预期工作的原因是因为数组没有实现`Countable`ie

```
array() instanceof Countable // false 
```

可能是一个明显的解决方法，但我想我会在这里发布。

```
function is_empty ($val) {
  return empty($val) || ($val instanceof Countable && empty(count($val)));
} 
```

例子：

```
class Object implements Countable {

  protected $attributes = array();

  // ...

  public function count () {
    return count($this->attributes);
  }

}

$obj = new Object();
is_empty($obj) // TRUE 
```

*我应该注意到这个解决方案在我的情况下是有效的，因为我已经定义`is_empty()`了与其他`is_*`方法一起的漂亮。*

# javascript - 如何在 Iframe 内水平滚动表格

> ID：10752502
> 
> 赞同：0
> 
> 时间：2012-05-25T10:10:18.960
> 
> 标签：javascript, jquery, html, css

我的 aspx 页面中有一个 iframe。此框架包含一个包含动态列数的 html 表。

我不想在 iframe 中显示滚动，所以我在表格中使用了滚动，但是这种滚动没有显示表格的完整列。

这是html代码

```
Main Page Code
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage" %>

<style type="text/css">
    #mNav
    {
        background: url("../Content/bg_mNav.jpg") repeat-x scroll 0 100% transparent;
        border-bottom: 1px solid #025776;
        position: relative;
        z-index: 999;
    }

    #admxTitle
    {
        background: url("../Content/dashboard_title.png") no-repeat scroll 0 100% transparent;
        position: relative;
        z-index: 999;
    }
</style> 
```

```
$(document).ready(function () {

   // alert(screen.width+"X"+screen.height);

    //Populating Report list tree 
    var reportDir = <%=ViewData["ReportDirlist"] %>;
    if(reportDir){
       $('#reporting').empty();
       readDir(reportDir,1,'reporting','reporting');
    }
    $("#reporting").treeview();

    //Populating Analytics list tree 
    var analyticsDir = <%=ViewData["AnalyticsDirlist"] %>;
    if(analyticsDir){
       $('#analytics').empty();
       readDir(analyticsDir,1,'analytics','analytics');
    }
    $("#analytics").treeview();

    //Intiontiate 
    $("#tabs").tabs();
    // alert(json);
    //by default trigger click on first node
    //$('#node-1 span:first').trigger('click')

});

function readDir(obj,level,parentid,container) {

    var tagObj='' ;
    var filename;
    //console.log('DIRECTORY:'+obj.name + ':' + obj.state);

    var file = obj.file;
    if(file){
        if(file.length)
         {
            for (i = 0; i < file.length; i++) {

                tempid=parentid+'-F'+(i+1);
                filename=(file[i].name).replace(/-/gi, " ");
                // tagObj='<li id="li'+tempid+'" ><span class="file" onclick="clickHandler(\''+file[i].name+'\',\''+file[i].data+'\',\'li'+tempid+'\')">'+filename+'</span></li>'
                tagObj='<li id="li'+tempid+'" ><span class="file" onclick="clickHandler(\''+container+'\',\''+file[i].name+'\',\''+file[i].data+'\',\'li'+tempid+'\')">'+filename+'</span></li>'

                if( parentid==container)
                $('#'+container).append(tagObj);
                else
                $('#ul'+parentid).append(tagObj);

                //console.log('FILE :' + file[i].name + ':' + file[i].data);
            }
        }else{

                tempid=parentid+'-F1';
                filename=(file.name).replace(/-/gi, " ");
                tagObj='<li id="li'+tempid+'" ><span class="file" onclick="clickHandler(\''+container+'\',\''+file.name+'\',\''+file.data+'\',\'li'+tempid+'\')">'+filename+'</span></li>'

                if( parentid==container)
                $('#'+container).append(tagObj);
                else
                $('#ul'+parentid).append(tagObj);

            //console.log('FILE :' + file.name + ':' + file.data);
        }
    }

    var dir=obj.directory;
    if(dir){

        if(dir.length)
         {

           for (j = 0; j < dir.length; j++) {

                tempid=parentid+'-D'+(j+1);

                if(dir[j].state=='close')
                tagObj='<li id="li'+tempid+'" class="closed"><span class="folder">'+dir[j].name+'</span></li>'
                else
                tagObj='<li id="li'+tempid+'"><span class="folder">'+dir[j].name+'</span></li>'

                if( parentid==container)
                $('#'+container).append(tagObj);
                else
                $('#ul'+parentid).append(tagObj);

                $("#li"+tempid).append('<ul id="ul'+tempid+'"></ul>');

                readDir(dir[j],(level+1),tempid,container);
            }

        }else{

             tempid=parentid+'-D1'

             if(dir.state=='close')
              tagObj='<li id="li'+tempid+'" class="closed"><span class="folder">'+dir.name+'</span></li>'
             else
              tagObj='<li id="li'+tempid+'"><span class="folder">'+dir.name+'</span></li>'

             if( parentid==container)
                $('#'+container).append(tagObj);
             else
                $('#ul'+parentid).append(tagObj);

              $("#li"+tempid).append('<ul id="ul'+tempid+'"></ul>');

             readDir(dir,(level+1),tempid,container);

        }
    }

    return;

}

function clickHandler(container,name,data,curr_report_id) {

    $('.file').css('color','#4A4344');
    $('#'+curr_report_id+' .file').css('color','Blue');

    if(container=='reporting')
      $('#containerFrame').attr('src', './AdmxReportView?data='+data+'&name='+name);
    else
      $('#containerFrame').attr('src', './AdmxAnalyticsView?data='+data+'&name='+name);

}

</script>
<table style='width: 100%; height: 100%; position: absolute'>
    <tr style='width: 100%; height: 100%;'>
        <td style='width: 20%; height: 100%; vertical-align: top;'>
            <table style='width: 100%; height: 100%;'>
                <tr style='width: 100%; height: 10%;'>
                    <td>
                        <img src="../../Content/admx-dashboard-logo.gif" style="height: 100px; width: 250px;
                            margin-top: 2px; margin-bottom: 5px" alt="" />
                    </td>
                </tr>
                <tr style='width: 100%; height: 80%;'>
                    <td style="vertical-align: top">
                        <div id="tabs" style="height: 100%; width: 95%;">
                            <ul style="width: 95%;">
                                <li><a href="#tabs-reporting">Reporting</a></li>
                                <li><a href="#tabs-analytics">Analytics</a></li>
                            </ul>
                            <div id="tabs-reporting">
                                <div id='reporting_tree_block'>
                                    <!-- rendering directory list -->
                                    <ul id="reporting" class="filetree treeview-famfamfam">
                                    </ul>
                                </div>
                            </div>
                            <div id="tabs-analytics">
                                <div id='analytics_tree_block'>
                                    <!-- rendering directory list -->
                                    <ul id="analytics" class="filetree treeview-famfamfam">
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
            </table>
        </td>
        <td style='width: 80%; height: 100%;'>
            <iframe id='containerFrame' frameborder="0" scrolling="no" style="width: 99%; height: 100%;
                position: relative;" src='./AdmxIndexView' />
        </td>
    </tr>
</table> 
```

而这个 iframe src 的代码

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage" %>

<style type="text/css">
    .no_data
    {
        height: 440px;
        width: 705px;
    }
</style> 
```

```
var columnList;
$(document).ready(function () {

    var myDate = new Date();
    var toDate =(myDate.getMonth()+1) + '/' + myDate.getDate() + '/' +myDate.getFullYear();
    var fromDate =myDate.getMonth() + '/' + myDate.getDate() + '/' +myDate.getFullYear();

    $("#from_date").datepicker({
        showOn: "button",
        buttonImage: "content/calendar.gif",
        buttonImageOnly: true,

    }).val(fromDate);

    $("#to_date").datepicker({
        showOn: "button",
        buttonImage: "content/calendar.gif",
        buttonImageOnly: true,

    }).val(toDate);

    $("#tabs").tabs();

    //$('div[id^="tabs-"]').empty();
    var report='<%=Request.QueryString["data"]%>';
     $('span[id$="_bg"]').find('img').attr('src','/content/dashboard/images/'+report.toLowerCase()+'.png');

    initGridColumnList('<%=ViewData["colList"] %>');
    initChartReportListWidget('piechart');
    initChartReportListWidget('barchart');

});

 function initChartReportListWidget(chartType) {
  var report='<%=Request.QueryString["data"]%>';

         <%
            IList<string> reportNameList = ViewData["ReportList"] as IList<string>;
            int i=0;
            if (reportNameList.Count()>1) { %>

                    $('#td_'+chartType+'_result').append('<div id="'+chartType+'_accordion" />')
                    <%foreach (string title in reportNameList) {
                      string reporttitle=title.Split('|')[0];
                      i++;
                     %>
                    $('#'+chartType+'_accordion').append('<h3><a href="#"><% =reporttitle%></a></h3>') ; 
                    $('#'+chartType+'_accordion').append('<div style="width:706;height:441"><img id="img_'+chartType+'_result_<%=i %>" src="" alt="<% =reporttitle%>" height="440px" width="705px"/></div>'); 

                    <% }
            }else{ 
            foreach (string title in reportNameList) { 
                string reporttitle=title.Split('|')[0];
            %>
                    $('#td_'+chartType+'_result').append('<img id="img_'+chartType+'_result" src="" alt="<% =reporttitle%>" height="440px" width="705px"/>')

                   <%} 
            }%>

             $('#'+chartType+'_accordion').accordion();
             $('#td_'+chartType+'_result div div').css('height','440px');

 }

 function initGridColumnList(col_names) {
    var list = col_names.split('|');
    columnList= new Array();
    var obj;

    for (i = 0; i < list.length; i++) {
        obj=new Object();
        obj["sName"]=list[i];
        obj["bSearchable"]=true;
        obj["bSortable"]=true;
        columnList[i]=obj;
    }

    //reset grid headers
    $("#grid_view").empty();

    var header="<thead><tr>";

    for (i = 0; i < list.length; i++) 
         header=header+'<th'+(i==0?' style="min-width:60px"':'')+'>'+columnList[i].sName+'</th>';

    header=header+'</tr></thead>';
    $("#grid_view").append(header);
    $("#grid_view").append('<tbody></tbody>');
    $('#grid_view').css('width','90%'); 

 }

 var barchartcount=0;
 var piechartcount=0;

 //Event handler when All images loaded
function onLoadComplete(obj) {
    var reportCount=<%=reportNameList.Count() %>;

    if(obj=='pie'){

        piechartcount=piechartcount+1;
        if(piechartcount==reportCount){
            piechartcount=0;
            $('#span_pie_bg').css('display','none');
            $('#span_pie_wait').css('display','none');
            $('#span_pie_result').css('display','block');
        }

    }else if(obj=='bar'){
        barchartcount=barchartcount+1;
        if(barchartcount==reportCount){
            barchartcount=0;
            $('#span_bar_bg').css('display','none');
            $('#span_bar_wait').css('display','none');
            $('#span_bar_result').css('display','block');
        }
    }
}

function getReportData() {

       //Enable wait Icon & disable others
       $('#span_bar_bg').css('display','none');
       $('#span_bar_wait').css('display','block');
       $('#span_bar_result').css('display','none');
       $('#span_pie_bg').css('display','none');
       $('#span_pie_wait').css('display','block');
       $('#span_pie_result').css('display','none');

       var report='<%=Request.QueryString["data"]%>';
       var subreport='<%=Request.QueryString["name"]%>';

        if( report.toLowerCase()=='ctss' )
        {
         alert('Report is temporarily Un-available');
         return;
        }

        if ($("#from_date").val() == "" || $("#to_date").val() == "") {
            alert("Invalid Date Range !!!");
            return;
        }

        $("#span_grid_bg").css('display','none');
        $("#span_grid_view").css('display', 'block');

           // "sScrollX": "100%",
           // "sScrollXInner": "101%",
           // "bScrollCollapse": true,

        $('#grid_view').dataTable({
            "sScrollX": "100%",
            "bAutoWidth": true,
            "bServerSide": false,
            "sAjaxSource": "fetchGridReport?&from_date=" + $("#from_date").val() + "&to_date=" + $("#to_date").val() + "&report="+report+"&subreport="+subreport,
            "bProcessing": true,
            "bRetrieve": false,
            "bDestroy": true,
            "iDisplayLength": 17,
            "aoColumns": columnList
        });

         //$("#tabs-grid").css('width','90%');
         $('#grid_view').dataTable().fnAdjustColumnSizing();

        //Request for reports 
         <%
           foreach (string title in reportNameList) { 
           string reporttitle=title.Split('|')[0];
           string displayformat= title.Split('|')[1];

         %>
           $('#span_bar_result img[alt="<%=reporttitle%>"]').attr('src','/fetchChartReport?chartType=<%=System.Web.UI.DataVisualization.Charting.SeriesChartType.Bar %>&from_date=' + $("#from_date").val() + '&to_date=' + $("#to_date").val() +  '&report='+report+'&subreport='+subreport+'&reporttitle=<%=reporttitle %>&displayformat=<%=displayformat %>&filterParamList=no');
           $('#span_pie_result img[alt="<%=reporttitle%>"]').attr('src','/fetchChartReport?chartType=<%=System.Web.UI.DataVisualization.Charting.SeriesChartType.Pie %>&from_date=' + $("#from_date").val() + '&to_date=' + $("#to_date").val() +  '&report='+report+'&subreport='+subreport+'&reporttitle=<%=reporttitle %>&displayformat=<%=displayformat %>&filterParamList=no');
        <%} %>

        //register call back functionality invoked when result image response complete
         $('img[id^="img_barchart_result"]').bind('load',function(){
             onLoadComplete('bar');

         });

         $('img[id^="img_piechart_result"]').bind('load',function(){
              onLoadComplete('pie');
         });

    }

</script>
<table style="margin: 5px; height: 100%; width: 100%;">
    <tr style="height: 20%; width: 97%; font-size: large;">
        <td align="left">
            <table style="margin: 5px;">
                <tr>
                    <td style="padding-right: 5px;">
                        <p>
                            <label style="font-family: Verdana; font-size: small; font-weight: bold">
                                Date Range:
                            </label>
                            <input type="text" id="from_date" style="width: 70px" /></p>
                    </td>
                    <td style="padding-right: 5px;">
                        <strong>- </strong>
                    </td>
                    <td style="padding-right: 20px;">
                        <p>
                            <input type="text" id="to_date" style="width: 70px" /></p>
                    </td>
                    <td style="padding-right: 20px">
                        <div>
                            <label style="font-family: Verdana; font-size: small; font-weight: bold">
                                Report By :
                            </label>
                            <select id="reportby" onchange="changeOnReportBy()" disabled="disabled">
                                <option value="daily">Daily</option>
                                <option value="weekly">Weekly</option>
                                <option value="monthly">Monthly</option>
                                <option value="yearly">Yearly</option>
                            </select>
                        </div>
                    </td>
                    <td>
                        <input type="button" value="GO" onclick="getReportData();" />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
    <tr style="height: 80%; width: 97%; position: relative">
        <td align="left">
            <div id="tabs" style="height: 100%; width: 96%;">
                <span id="span_chart" style="height: 100%; width: 95%; display: block">
                    <ul style="width: 95%;">
                        <li><a href="#tabs-grid">Grid</a></li>
                        <li><a href="#tabs-bar">Bar</a></li>
                        <li><a href="#tabs-pie">Pie</a></li>
                    </ul>
                    <div id="tabs-grid" style="width: 95%;">
                        <span id="span_grid_bg" style="display: block; padding-top: 10px">
                            <p>
                                <img src='' style="height: 50%; width: 90%;" alt="" />
                            </p>
                        </span><span id="span_grid_view" style="display: none;">
                            <table id="grid_view" class="display" style="overflow-x: scroll; width: 90%;">
                            </table>
                        </span>
                    </div>
                    <div id="tabs-bar">
                        <span id="span_bar_bg" style="display: block">
                            <p>
                                <img src='' style="height: 50%; width: 90%;" alt="" />
                            </p>
                        </span><span id="span_bar_wait" style="display: none">
                            <p>
                                <img src='/content/dashboard/images/wait.gif' style="height: 80px; width: 200px;"
                                    alt="" />
                            </p>
                        </span><span id="span_bar_result" style="display: none">
                            <table>
                                <tr>
                                    <%if (!ViewData["filter"].Equals("none"))
                                      {%>
                                    <td style="vertical-align: top; padding-top: 30px">
                                        <a href="#" id="BarChart_filter">
                                            <img id="img_barchart_filter" src="/content/dashboard/images/filter_icon.png" style="width: 40px;
                                                height: 50px" title="Filter" alt=""></img>
                                        </a>
                                    </td>
                                    <%} %>
                                    <td style="vertical-align: top" id="td_barchart_result">
                                    </td>
                                </tr>
                            </table>
                        </span>
                    </div>
                    <div id="tabs-pie">
                        <span id="span_pie_bg" style="display: block">
                            <p>
                                <img src='' style="height: 50%; width: 90%;" alt="" />
                            </p>
                        </span><span id="span_pie_wait" style="display: none">
                            <p>
                                <img src='/content/dashboard/images/wait.gif' style="height: 80px; width: 200px;"
                                    alt="" />
                            </p>
                        </span><span id="span_pie_result" style="display: none">
                            <table>
                                <tr>
                                    <%if (!ViewData["filter"].Equals("none"))
                                      {%>
                                    <td style="vertical-align: top; padding-top: 30px">
                                        <a href="#" id="PieChart_filter">
                                            <img id="img_piechart_filter" src="/content/dashboard/images/filter_icon.png" style="width: 40px;
                                                height: 50px" title="Filter" alt=""></img>
                                        </a>
                                    </td>
                                    <%} %>
                                    <td style="vertical-align: top;" id="td_piechart_result">
                                    </td>
                                </tr>
                            </table>
                        </span>
                    </div>
                </span>
            </div>
        </td>
    </tr>
</table>
<!-- Advance Componant Block -->
<span id="span_bar_chart" style="display: none"></span><span id="span_pie_chart"
    style="display: none"></span>
<!-- Advance Componant Block -->
<%if (!ViewData["filter"].Equals("none"))
  {
      //Dynamic View Componants based on ViewData["filter"] argument
      Html.RenderPartial(ViewData["filter"].ToString(), "BarChart");
      Html.RenderPartial(ViewData["filter"].ToString(), "PieChart");
  }
%> 
```

提前致谢

# php - 单击超链接php时URL正在附加

> ID：10752507
> 
> 赞同：0
> 
> 时间：2012-05-25T10:10:38.850
> 
> 标签：php

我正在用 php 写一个小网页。单击超链接时，超链接正在附加

```
function get_url($ff) {
  $q = isset($_REQUEST['query']) ? $_REQUEST['query'] : NULL;
  return "http" . (($_SERVER['SERVER_PORT']==443) ? "s://" : "://") . $_SERVER['HTTP_HOST'] .'?query=' .$q. '&bw' . '=' . $ff ;
} 

 <li><a href="<?php print get_url('exampl');?>">example</a></li> 
```

这输出像

```
http://example.com/test/?query=search&bw=test. 
```

当我下次点击时

```
http://example.com/test/?query=search&bw=test?query=search&bw=test. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:25:13.400

改变这个

```
return "http" . (($_SERVER['SERVER_PORT']==443) ? "s://" : "://") . $_SERVER['HTTP_HOST'] .'?query=' .$q. '&bw' . '=' . $ff ; 
```

到

```
return "http" . (($_SERVER['SERVER_PORT']==443) ? "s://" : "://") . $_SERVER['SERVER_NAME'] .'?query=' .$q. '&bw' . '=' . $ff ; 
```

# reverse-engineering - 逆向工程二进制字典文件以提取字符串

> ID：10752508
> 
> 赞同：0
> 
> 时间：2012-05-25T10:10:43.440
> 
> 标签：reverse-engineering

我有一个约 600MB 的 .DAT 文件，其中包含一本意大利语词典（带有定义的重音词）。

我想从这个文件中提取所有字符串（只要我能阅读单词和定义，包含字符串和脏头/二进制数据的原始转储就可以了）。

所以我的问题是： **是否有软件可以自动执行此操作？**

我会告诉它：'我知道这个文件包含字符串“TREE”、“DOG”、“CAT”、“COLLISION”......现在使用一些蛮力、统计分析或任何方法来尝试找到这些字符串被编码'

我想提两件事：

*   我是软件开发人员，但在逆向工程、十六进制编辑等方面完全没有经验或知识......
*   我不想花几个小时阅读逆向工程教程和使用许多软件进行反复试验。如果我不能以简单的方式成功提取我需要的东西，我将放弃这项任务。

我意识到这个任务可能无法简单地执行（例如，如果文本是加密的），我只是想尝试使用可用的最佳工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:30:22.837

似乎不存在这样的自动化工具，即使存在，它也只适用于极少数的输入文件。

我终于找到了解决我的问题的方法。

我有一个 EXE 程序，它允许浏览字典并显示单词的定义。

使用 AutoHotkey，我编写了一个相对简单的脚本，它从 400k 单词的输入列表中搜索每个单词的定义，将其复制到剪贴板，然后将其粘贴到另一个输出文本文件中。

我必须`Sleep`在击键、窗口切换等之间插入一些语句以使脚本稳定。“解析”整个字典的预计时间：20 天 :)

# sql - 选择具有多个不同列值组合的行

> ID：10752510
> 
> 赞同：2
> 
> 时间：2012-05-25T10:10:51.317
> 
> 标签：sql, postgresql, select, postgresql-9.1

我有一个包含 3 列的表`id`：`val1`和`val2`。

对于 val2 的每个不同值，我想选择存在*多个*不同值 val1 的所有行。

例子：

```
| id | val1 | val2 |
|------------------|
| 1  | A1   |  a2  |
| 2  | A1   |  a2  |
| 3  | A1   |  b2  |
| 4  | B1   |  b2  |
| 5  | A1   |  c2  |
| 6  | A1   |  c2  |
| 7  | A1   |  c2  |
| 8  | A1   |  d2  |
| 9  | C1   |  d2  |
| 10 | A1   |  d2  | 
```

期望的结果：

```
| id | val1 | val2 |
|------------------|
| 3  | A1   |  b2  |
| 4  | B1   |  b2  |
| 8  | A1   |  d2  |
| 9  | C1   |  d2  |
| 10 | A1   |  d2  | 
```

我没有设法提出任何允许我这样做的查询，也许其他人对如何解决这个问题有想法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T10:27:14.523

您可以使用`having`子句搜索`val2`具有多个不同值的`val1`. 例如：

```
select  yt.*
from    YourTable yt
join    (
        select  val2
        from    YourTable
        group by
                val2
        having  count(distinct val1) > 1
        ) as filter
on      yt.val2 = filter.val2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T13:15:53.830

使用聚合窗口函数，您也可以这样做：

```
SELECT
  id,
  val1,
  val2
FROM (
  SELECT
    *,
    MIN(val1) OVER (PARTITION BY val2) AS minval1,
    MAX(val1) OVER (PARTITION BY val2) AS maxval1
  FROM atable
) s
WHERE minval1 <> maxval1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T11:02:45.537

试试这个查询：

```
SELECT * from tbl where val2 in (SELECT  val2 FROM `tbl`  group by val2 having  
 count(distinct(val1)) > 1) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-25T10:24:40.950

```
SELECT * 
FROM   TABLE_2 
WHERE  EXISTS (SELECT 1 
               FROM   (SELECT val2, 
                              val1, 
                              Count(*) AS Number 
                       FROM   TABLE_2 
                       GROUP  BY val2, 
                                 val1 
                       HAVING Count(*) = 1) a 
               WHERE  TABLE_2.val2 = a.val2) 
ORDER  BY ID 
```

# selenium - 获取 selenium 启动的浏览器的 PID

> ID：10752512
> 
> 赞同：31
> 
> 时间：2012-05-25T10:11:01.380
> 
> 标签：selenium, selenium-webdriver, webdriver, selenium-rc

我想获取 selenium 启动的浏览器的 PID。有什么办法可以完成吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-30T17:27:25.420

使用 Python API，它非常简单：

```
from selenium import webdriver
browser = webdriver.Firefox()
print browser.binary.process.pid
# browser.binary.process is a Popen object... 
```

如果您使用的是 Chrome，它会稍微复杂一些，您可以通过 chromedriver 进程进行操作：

```
c = webdriver.Chrome()
c.service.process # is a Popen instance for the chromedriver process
import psutil
p = psutil.Process(c.service.process.pid)
print p.get_children(recursive=True) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2018-12-21T15:56:14.437

hwjp 的解决方案对我来说不再适用了，但是 ABM 的解决方案也适用于其他浏览器，以防有人想知道，所以对于现在的 firefox：

```
from selenium import webdriver
driver = webdriver.Firefox()
print(driver.service.process.pid) 
```

由于声誉而无法发表评论，所以我将其作为单独的答案提交......

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-03-30T16:40:23.170

如果您使用的是 PhantomJS，那么您可以从进程 Popen 对象中获取 PID：

```
from selenium import webdriver
browser = webdriver.PhantomJS()
print browser.service.process.pid 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-05-23T10:49:40.377

在 Java 中，如果您使用 ChromeDriver，您可以找到驱动程序将使用的端口

```
port = chromeDriverService.getUrl().getPort(); 
```

然后，使用端口，您可以通过运行命令找到 chromedriver 进程 ID

```
netstat -anp | grep LISTEN | grep [port] (on linux) 
```

或者

```
netstat -aon | findstr LISTENING | findstr [port] (on windows) 
```

您可以更进一步，通过使用 chromedriver 进程 id（chrome 进程的父 id）找出 chrome 进程 id

```
ps -efj | grep google-chrome | grep [chromedriverprocessid] (on linux) 
```

或者

```
wmic process get processid,parentprocessid,executablepath | find \"chrome.exe\" |find \"chromeDriverProcessID\" 
```

代码如下所示：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;
import java.util.logging.Level;

import org.apache.commons.lang.SystemUtils;
import org.openqa.selenium.WebDriverException;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.chrome.ChromeDriverService;
import org.openqa.selenium.chrome.ChromeOptions;
import org.openqa.selenium.logging.LogType;
import org.openqa.selenium.logging.LoggingPreferences;
import org.openqa.selenium.remote.CapabilityType;
import org.openqa.selenium.remote.DesiredCapabilities;

public class WebdriverProcessID
{
  public static void main(String[] args) throws IOException, InterruptedException
  {
    ChromeDriver driver = null;

    ChromeOptions options = new ChromeOptions();
    List<String> listArguments = new ArrayList<String>();

    DesiredCapabilities cap = DesiredCapabilities.chrome();
    cap.setCapability(ChromeOptions.CAPABILITY, options);

    LoggingPreferences logPrefs = new LoggingPreferences();
    logPrefs.enable(LogType.PERFORMANCE, Level.ALL);
    cap.setCapability(CapabilityType.LOGGING_PREFS, logPrefs);

    ChromeDriverService chromeDriverService = ChromeDriverService.createDefaultService();
    int port = chromeDriverService.getUrl().getPort();

    driver = new ChromeDriver(chromeDriverService, cap);

    System.out.println("starting chromedriver on port " + port);
    int chromeDriverProcessID = GetChromeDriverProcessID(port);
    System.out.println("detected chromedriver process id " + chromeDriverProcessID);
    System.out.println("detected chrome process id " + GetChromeProcesID(chromeDriverProcessID));

    driver.navigate().to("https://www.test.com/");

    try
    {
      Thread.sleep(100000);
    }
    catch (InterruptedException e)
    {
    }

    try
    {
      driver.close();
    }
    catch (WebDriverException ex)
    {
      ex.printStackTrace();
    }

    try
    {
      driver.quit();
    }
    catch (WebDriverException ex)
    {
      ex.printStackTrace();
    }
  }

  private static int GetChromeDriverProcessID(int aPort) throws IOException, InterruptedException
  {
    String[] commandArray = new String[3];

    if (SystemUtils.IS_OS_LINUX)
    {
      commandArray[0] = "/bin/sh";
      commandArray[1] = "-c";
      commandArray[2] = "netstat -anp | grep LISTEN | grep " + aPort;
    }
    else if (SystemUtils.IS_OS_WINDOWS)
    {
      commandArray[0] = "cmd";
      commandArray[1] = "/c";
      commandArray[2] = "netstat -aon | findstr LISTENING | findstr " + aPort;
    }
    else
    {
      System.out.println("platform not supported");
      System.exit(-1);
    }

    System.out.println("running command " + commandArray[2]);

    Process p = Runtime.getRuntime().exec(commandArray);
    p.waitFor();

    BufferedReader reader = new BufferedReader(new InputStreamReader(p.getInputStream()));

    StringBuilder sb = new StringBuilder();
    String line = "";
    while ((line = reader.readLine()) != null)
    {
      sb.append(line + "\n");
    }

    String result = sb.toString().trim();

    System.out.println("parse command response line:");
    System.out.println(result);

    return SystemUtils.IS_OS_LINUX ? ParseChromeDriverLinux(result) : ParseChromeDriverWindows(result);
  }

  private static int GetChromeProcesID(int chromeDriverProcessID) throws IOException, InterruptedException
  {
    String[] commandArray = new String[3];

    if (SystemUtils.IS_OS_LINUX)
    {
      commandArray[0] = "/bin/sh";
      commandArray[1] = "-c";
      commandArray[2] = "ps -efj | grep google-chrome | grep " + chromeDriverProcessID;
    }
    else if (SystemUtils.IS_OS_WINDOWS)
    {
      commandArray[0] = "cmd";
      commandArray[1] = "/c";
      commandArray[2] = "wmic process get processid,parentprocessid,executablepath | find \"chrome.exe\" |find \"" + chromeDriverProcessID + "\"";
    }
    else
    {
      System.out.println("platform not supported");
      System.exit(-1);
    }

    System.out.println("running command " + commandArray[2]);

    Process p = Runtime.getRuntime().exec(commandArray);
    p.waitFor();

    BufferedReader reader = new BufferedReader(new InputStreamReader(p.getInputStream()));

    StringBuilder sb = new StringBuilder();
    String line = "";
    while ((line = reader.readLine()) != null)
    {
      if (SystemUtils.IS_OS_LINUX && line.contains("/bin/sh"))
      {
        continue;
      }

      sb.append(line + "\n");
    }

    String result = sb.toString().trim();

    System.out.println("parse command response line:");
    System.out.println(result);

    return SystemUtils.IS_OS_LINUX ? ParseChromeLinux(result) : ParseChromeWindows(result);
  }

  private static int ParseChromeLinux(String result)
  {
    String[] pieces = result.split("\\s+");
    // root 20780 20772 20759 15980  9 11:04 pts/1    00:00:00 /opt/google/chrome/google-chrome.........
    // the second one is the chrome process id
    return Integer.parseInt(pieces[1]);
  }

  private static int ParseChromeWindows(String result)
  {
    String[] pieces = result.split("\\s+");
    // C:\Program Files (x86)\Google\Chrome\Application\chrome.exe 14304 19960
    return Integer.parseInt(pieces[pieces.length - 1]);
  }

  private static int ParseChromeDriverLinux(String netstatResult)
  {
    String[] pieces = netstatResult.split("\\s+");
    String last = pieces[pieces.length - 1];
    // tcp 0 0 127.0.0.1:2391 0.0.0.0:* LISTEN 3333/chromedriver
    return Integer.parseInt(last.substring(0, last.indexOf('/')));
  }

  private static int ParseChromeDriverWindows(String netstatResult)
  {
    String[] pieces = netstatResult.split("\\s+");
    // TCP 127.0.0.1:26599 0.0.0.0:0 LISTENING 22828
    return Integer.parseInt(pieces[pieces.length - 1]);
  }
} 
```

输出将是，在 linux 上：

```
starting chromedriver on port 17132
running command netstat -anp | grep LISTEN | grep 17132
parse command response line:
tcp        0      0 127.0.0.1:17132         0.0.0.0:*               LISTEN      22197/chromedriver
detected chromedriver process id 22197
running command ps -efj | grep google-chrome | grep 22197
parse command response line:
root     22204 22197 22183 15980 26 11:17 pts/1    00:00:00 /opt/google/chrome/google-chrome ...
detected chrome process id 22204 
```

在窗户上：

```
starting chromedriver on port 34231
running command netstat -aon | findstr LISTENING | findstr 34231
parse command response line:
TCP    127.0.0.1:34231        0.0.0.0:0              LISTENING       10692
detected chromedriver process id 10692
running command wmic process get "processid,parentprocessid,executablepath" | findstr "chrome.exe" | findstr "10692"
parse command response line:
C:\Program Files (x86)\Google\Chrome\Application\chrome.exe  10692 12264
detected chrome process id 12264 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-09-04T22:31:09.687

您可以使用[python客户端以不同的方式检索](/questions/tagged/python "显示标记为“python”的问题")[Selenium](https://stackoverflow.com/questions/54459701/what-is-selenium-and-what-is-webdriver/54482491#54482491)启动的浏览器进程的 PID，如下所示：

* * *

## 火狐

使用以下解决方案访问返回[字典的](/questions/tagged/dictionary "显示标记为“字典”的问题")[*功能*](https://stackoverflow.com/questions/57507088/what-are-the-capabilities-of-the-browser-opened-by-selenium-webdriver/57521203#57521203)对象：

*   代码块：

    ```
    from selenium import webdriver
    from selenium.webdriver.firefox.options import Options

    options = Options()
    options.binary_location = r'C:\Program Files\Firefox Nightly\firefox.exe'
    driver = webdriver.Firefox(firefox_options=options, executable_path=r'C:\WebDrivers\geckodriver.exe')
    my_dict = driver.capabilities
    print("PID of the browser process is: " + str(my_dict['moz:processID'])) 
    ```

*   控制台输出：

    ```
    PID of the browser process is: 14240 
    ```

*   浏览器快照：

[![火狐PID](../Images/29e0fbb7a2a6e5dad9f6c402203e8d83.png)](https://i.stack.imgur.com/fCSUz.png)

* * *

## 铬合金

`psutil.process_iter()`使用where `process.cmdline()`contains遍历流程**`--test-type=webdriver`**，如下所示：

*   代码块：

    ```
    from selenium import webdriver
    from contextlib import suppress
    import psutil

    driver = webdriver.Chrome(executable_path=r'C:\Utility\BrowserDrivers\chromedriver.exe')
    driver.get('https://www.google.com/')
    for process in psutil.process_iter():
        if process.name() == 'chrome.exe' and '--test-type=webdriver' in process.cmdline():
        with suppress(psutil.NoSuchProcess):
            print(process.pid) 
    ```

*   控制台输出：

    ```
    1164
    1724
    4380
    5748 
    ```

*   浏览器快照：

[![Chrome_Process](../Images/a0257ecbf5e67881363ccd8f280d3c8e.png)](https://i.stack.imgur.com/aSq0r.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-17T08:19:20.160

如果你使用java和selenium，你可以简单地先找到JVM的PID，然后通过它的子进程，你可以得到chromedriver的PID，然后类似地得到chrome的PID。这是一个查找 chromedriver PID 的示例。

```
 final String jvmName = ManagementFactory.getRuntimeMXBean().getName();
    final int index = jvmName.indexOf('@');
    if(index > 1) {
        try {
            String processId = Long.toString(Long.parseLong(jvmName.substring(0, index)));
            Scanner scan = new Scanner(Runtime.getRuntime().exec("wmic process where (ParentProcessId="+ processId +") get Caption,ProcessId").getInputStream());
            scan.useDelimiter("\\A");
            String childProcessIds =  scan.hasNext() ? scan.next() : "";
            List<String> chromeDrivers = new ArrayList<String>();
            String[] splited = childProcessIds.split("\\s+");
            for(int i =0 ; i<splited.length; i = i+2){
                if("chromedriver.exe".equalsIgnoreCase(splited[i])){
                    chromeDrivers.add(splited[i+1]);
                }
            }
            /*              
            *
            *Do whatever you want to do with the chromedriver's PID here    
            *
            * */        
            scan.close();
        } catch (Exception e) {

        }
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-02T11:27:28.933

对于来这里寻找解决方案的人，就在这里，希望它对您有所帮助。

```
protected Integer getFirefoxPid(FirefoxBinary binary){
    try {
        final Field fieldCmdProcess = FirefoxBinary.class.getDeclaredField("process");
        fieldCmdProcess.setAccessible(true);
        final Object ObjCmdProcess = fieldCmdProcess.get(binary);

        final Field fieldInnerProcess = ObjCmdProcess.getClass().getDeclaredField("process");
        fieldInnerProcess.setAccessible(true);
        final Object objInnerProcess = fieldInnerProcess.get(ObjCmdProcess);

        final Field fieldWatchDog = objInnerProcess.getClass().getDeclaredField("executeWatchdog");
        fieldWatchDog.setAccessible(true);
        final Object objWatchDog = fieldWatchDog.get(objInnerProcess);

        final Field fieldReelProcess = objWatchDog.getClass().getDeclaredField("process");
        fieldReelProcess.setAccessible(true);
        final Process process = (Process) fieldReelProcess.get(objWatchDog);

        final Integer pid;

        if (Platform.getCurrent().is(WINDOWS)) {
            final Field f = process.getClass().getDeclaredField("handle");
            f.setAccessible(true);
            long hndl = f.getLong(process);

            final Kernel32 kernel = Kernel32.INSTANCE;
            final WinNT.HANDLE handle = new WinNT.HANDLE();
            handle.setPointer(Pointer.createConstant(hndl));
            pid = kernel.GetProcessId(handle);

        } else {
            final Field f = process.getClass().getDeclaredField("pid");
            f.setAccessible(true);
            pid = (Integer) f.get(process);
        }
        logger.info("firefox process id : " + pid + " on plateform : " + Platform.getCurrent());
        return pid;
    } catch (Exception e) {
        e.printStackTrace();
        logger.error("Cannot get firefox process id, exception is : {}", e);
    }
    return null;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-11T11:29:50.703

这是一个可用于 C# 和 Selenium 的示例。其他语言（如 Java）也会有相同的实现，但我只在 C# 中工作。

Chrome 允许您提供自己的用户定义的命令行参数。因此，您可以使用当前运行程序的 PID（Windows 进程 ID）添加一个名为“scriptpid-”的参数。ChromeDriver 在命令行中将您的参数传递给 Chrome。然后使用 Windows WMI 调用从正在运行的 Chrome 的命令行检索此 PID ...

```
public static IntPtr CurrentBrowserHwnd = IntPtr.Zero;
public static int CurrentBrowserPID = -1;

ChromeOptions options = new ChromeOptions();
options.AddArgument("scriptpid-" + System.Diagnostics.Process.GetCurrentProcess().Id);
IWebDriver driver = new ChromeDriver(options);

// Get the PID and HWND details for a chrome browser

System.Diagnostics.Process[] processes = System.Diagnostics.Process.GetProcessesByName("chrome");
for (int p = 0; p < processes.Length; p++)
{
    ManagementObjectSearcher commandLineSearcher = new ManagementObjectSearcher("SELECT CommandLine FROM Win32_Process WHERE ProcessId = " + processes[p].Id);
    String commandLine = "";
    foreach (ManagementObject commandLineObject in commandLineSearcher.Get())
    {
        commandLine += (String)commandLineObject["CommandLine"];
    }

    String script_pid_str = (new Regex("--scriptpid-(.+?) ")).Match(commandLine).Groups[1].Value;

    if (!script_pid_str.Equals("") && Convert.ToInt32(script_pid_str).Equals(System.Diagnostics.Process.GetCurrentProcess().Id))
    {
        CurrentBrowserPID = processes[p].Id;
        CurrentBrowserHwnd = processes[p].MainWindowHandle;
        break;
    }
} 
```

**CurrentBrowserHwnd**应该包含 Chrome 窗口的 HWND。

**CurrentBrowserPID**应该包含您的 Chrome 窗口的进程 ID。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-05-01T06:06:20.660

我是这样解决的：

我在使用**Python**检测**Firefox**内存使用情况的**Linux 操作系统上：**

 ****```
import psutil

# Get pid of geckodriver
webdriver_pid = driver.service.process.pid

# Get the process of geckodriver
process = psutil.Process(webdriver_pid)

# Get memory of geckodriver + firefox
# Since memory is in bytes divide by 1024*1024 to obtain result in MB
total_memory = sum([x.memory_info().rss/1048576 for x in process.children() + [process]]) 
```****

# c# - 访问被拒绝重定向

> ID：10752513
> 
> 赞同：0
> 
> 时间：2012-05-25T10:11:02.987
> 
> 标签：c#, asp.net, sitemap, roles

我正在使用角色/站点地图来限制用户对某些页面的访问，如下所示：

```
 <location path="Reporting.aspx">
    <system.web>
      <authorization>
        <allow roles="Admin, Manager" />
        <deny users="*" />
      </authorization>
    </system.web>
  </location> 
```

我只是想知道如何在不访问我自己的 aspx 页面而不是默认访问被拒绝页面的情况下重定向人们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:16:39.347

您甚至不需要为此编写解决方案。您可以从您的网站配置中更改由于 404 错误、拒绝错误（405？）等而被重定向到的页面。您只需编辑 htaccess 文件以指向您自己的页面。

似乎他们将编程到 IIS 中的那种东西，可能值得检查一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T10:51:31.533

您可以在 web.config 中进行配置，例如：

```
<customErrors defaultRedirect="ErrorPage.aspx" mode="On"> 
    <error statusCode="401" redirect="AccessDenied.aspx" />       
</customErrors> 
```

# android - 如何在最近的应用列表中显示我的应用和浏览器作为意图启动？

> ID：10752517
> 
> 赞同：1
> 
> 时间：2012-05-25T10:11:15.063
> 
> 标签：android, browser, android-intent

在我的应用程序中，我想启动一个 Web 浏览器来显示一些 Web 内容。由于内容足够长，我想让用户使用主页长按（最近的应用程序）在我的应用程序和浏览器之间切换。我试着像这样调用网址 -

```
Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.google.com"));
startActivity(browserIntent); 
```

它在 Nexus S 上运行良好，我可以在最近的应用程序中看到浏览器和我的应用程序，以便用户可以在它们之间切换。但在其他一些设备上（我也在 HTC Wildfire S 上尝试过）它不会在最近的应用程序列表中显示浏览器。

那么我们能否以某种方式让浏览器和应用程序显示在最近的应用程序列表中？一种方法是以编程方式将浏览器作为应用程序启动，但接下来的问题是如何将特定 URL 加载到该浏览器中？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-25T10:14:55.367

1.  创建一个URI Uri uriUrl = Uri.parse("http://blog.myprotocol.in/");

2.  浏览器 Intent 的 Crate Intent 启动浏览器 = new Intent(Intent.ACTION_VIEW, uriUrl);

3.  启动活动 startActivity(launchBrowser);

# coldfusion - 欧元货币格式

> ID：10752518
> 
> 赞同：2
> 
> 时间：2012-05-25T10:11:17.150
> 
> 标签：coldfusion

我在用

```
LSEuroCurrencyFormat(2500) 
```

格式化价格。输出就像

```
2.500,00 € 
```

但我想显示价格

```
 2.500,- € 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T10:23:36.383

```
replace(LSEuroCurrencyFormat(2500),",00",",-") 
```

# visual-studio-2010 - 如何仅为一个项目按类生成依赖关系图？

> ID：10752523
> 
> 赞同：6
> 
> 时间：2012-05-25T10:11:48.430
> 
> 标签：visual-studio-2010, dependency-graph

如果我使用：

> 架构 -> 生成依赖关系图 -> 按类

它为整个解决方案生成图形。

有没有办法让 VS 只为来自某个项目的类生成依赖关系图？

`Architecture Explorer -> Create a new graph document from all the selected nodes`我尝试使用（有和没有按下）只为某个项目`ctrl`生成，但它只生成它们之间没有连接的类或连接到命名空间的类。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-02T15:31:54.873

试试 Resharper 8 ( [http://www.jetbrains.com/resharper/](http://www.jetbrains.com/resharper/) ) 它有很多关于依赖图的特性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-06T13:28:59.657

卸载您不想包含的项目似乎在 VS2012 中工作。

试试VS2010？

# wordpress - 将用户帐户商务服务器集成到 wordpress

> ID：10752524
> 
> 赞同：3
> 
> 时间：2012-05-25T10:11:48.907
> 
> 标签：wordpress, e-commerce, blogs, microsoft-commerce-server, commerce

目前我的电子商务平台有以下建设：

*   肯蒂科CMS
*   微软商务服务器

我希望在这个结构中集成一个博客。Altough Kentico CMS 具有博客功能。Wordpress 会更符合我们的目标。

但是我想知道是否有任何可能性使用 wordpress 中商业服务器中定义的用户帐户进行评论？在网上商店注册的用户应该能够使用在网上商店注册的用户帐户对帖子发表评论。

感谢你的付出！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T01:09:04.113

简短的回答：**不**

长答案：

你不能。

两个系统使用完全不同的表结构来保存用户信息（ID、用户名、密码等）。您需要大量修改 wordpress 或 kentico 以同步表结构（这是毫无意义的）。

我看到的唯一可能的选择是：

编写一个迁移脚本，它将所有必要的数据从 kentico DB 迁移到 WPDB。

编写一个迭代脚本，它将根据用户名和电子邮件为 Wordpress 创建用户。这样您就可以向他们发送密码。

* * *

极其简单（但有效）的方法是进行评论 FFA 并使用带有 Akismet 的 Disqus 或 WP 原生评论系统。

# java - 为 Java 应用程序创建安装程序

> ID：10752531
> 
> 赞同：3
> 
> 时间：2012-05-25T10:12:13.593
> 
> 标签：java, deployment, installation

我在这里需要一个建议。

我需要为 Java 应用程序创建安装程序。在谷歌搜索了一下之后，我登陆了[这些](http://java-source.net/open-source/installer-generators) [页面](http://javabyexample.wisdomplug.com/java-concepts/34-core-java/63-make-an-installer-for-your-java-applications.html)。经过一番分析，我决定使用[IzPack](http://izpack.org/)。我发现[了这篇](http://sonalimendis.blogspot.in/2010/05/write-installer-with-izpack.html)不错的博客文章，使用它可以创建一个不错的安装程序存根。

但是，我现在坚持进一步的发展。我需要以多种方式自定义我的安装程序，并且我确信它们可以使用 IzPack，但我无法弄清楚如何做到这一点。IzPack 邮件列表及其 stackoverflow 标签的活跃度很低，文档也很差。

所以我放弃了 IzPack，开始手动编写我自己的安装程序。在只写了两帧之后，我意识到这将花费更多时间并且可能不可行。

您是否知道任何其他具有更好文档和社区支持的安装程序生成器？或者你知道 IzPack 上有什么好的资源和链接可以回答我的问题吗？还是您建议我坚持使用自定义安装程序方法？请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T10:16:14.200

你可以试试[install4j](http://www.ej-technologies.com/products/install4j/overview.html)，它有很好的文档和商业支持......

创建多平台安装程序的另一个有效替代方法是 BitRock 安装程序 ( [InstallBuilder](http://installbuilder.bitrock.com/) )。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T10:14:37.940

如果您在 Windows 上运行，请查看[iexpress](http://en.wikipedia.org/wiki/IExpress)

要试用它，请按*alt*并只需键入*iexpress*并按 enter

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T10:27:16.097

查看[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)。它是跨平台的并且有很好的支持（在 SO 上），以及来自制造商（Sun/Oracle）的良好支持。我不知道它是否符合此安装的其他要求，但当您指定这些要求时可能会知道更多。

# algorithm - 从数组 O(n) 中删除所有零，没有额外的内存

> ID：10752534
> 
> 赞同：4
> 
> 时间：2012-05-25T10:12:17.960
> 
> 标签：algorithm

您能否建议我在 O(n) 时间内从给定数组中删除所有零且无需外部存储器的最佳算法。例如，1 2 0 0 3 2 0 2 变为 1 2 3 2 2

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-25T10:15:25.630

使用两个指针 - 一个用于读取，一个用于写入。

*   使用数组上的读取器指针进行迭代 - 如果元素为零，则仅增加它。
*   如果元素不为零 - 写它并增加两个指针。

# actionscript-3 - 当脚本第一次在动作脚本中运行时如何禁用按钮

> ID：10752538
> 
> 赞同：1
> 
> 时间：2012-05-25T10:12:29.990
> 
> 标签：actionscript-3, flash

我有动作脚本装袋游戏，我希望在加载页面时禁用添加到当前袋子，当单击添加到新袋子时它应该会激活这里是我用于动作脚本中的装袋游戏的代码

![在此处输入图像描述](../Images/a4a4593adc4fad64f9197e5400c892cd.png)

如图所示，第一次添加到当前包应该在按下添加到新包后处于非活动状态，然后它应该变为活动状态

```
 package {
import com.greensock.loading.LoaderMax;
import com.greensock.loading.XMLLoader;
import com.greensock.loading.ImageLoader;

import com.greensock.TimelineLite;
import com.greensock.TweenMax;

import com.greensock.events.LoaderEvent;

import com.greensock.plugins.TweenPlugin;
import com.greensock.plugins.GlowFilterPlugin;
import com.greensock.plugins.BlurFilterPlugin;

import appkit.responders.NResponder;

import bdesignet.utilities.keepRatio;

import flash.display.MovieClip;
import flash.display.StageAlign;    
import flash.display.StageScaleMode;

import flash.display.BitmapData;
import flash.display.Bitmap;

import flash.net.URLRequest;
import flash.net.navigateToURL;

import flash.events.MouseEvent;
import flash.events.TimerEvent;

import flash.utils.Timer;

public class main extends MovieClip {
    private var _controlsTimeline:TimelineLite = new TimelineLite( { paused:true, onComplete:startGame } );
    private var _scoreTimeline:TimelineLite = new TimelineLite( { paused:true, onComplete:enableReplay, onReverseComplete:startGame } );

    private var _loadermainXML:XMLLoader = new XMLLoader("", { name:"mainXML", onComplete:onmainDataLoaded } );

    private var _files:LoaderMax;

    private var _glowCurrentBag:TweenMax;
    private var _glowNewBag:TweenMax;
    private var _glowReplay:TweenMax;

    private var _glowPicture:TweenMax;

    private var _xmlData:XML;

    private var _currentBagClicked:NResponder;
    private var _newBagClicked:NResponder;

    private var _replayOver:NResponder;
    private var _replayOut:NResponder;
    private var _replayClicked:NResponder;

    private var _currentItem:uint = 0;
    private var _currentBag:uint = 0;
    private var _currentBagItems:uint = 0;
    private var _currentBagType:String = "";
    private var _points:int = 0;

    private var _image:Bitmap = new Bitmap();

    private var _started:Boolean = false;

    private var _start:Date;
    private var _end:Date;

    private var _hours:Number = new Number;
    private var _minutes:Number = new Number;
    private var _seconds:Number = new Number;
    private var _totalTime:Number = new Number;

    private var _counterTimer:Timer = new Timer(1000);
    private var _counterTimerEvent:NResponder;

    TweenPlugin.activate([GlowFilterPlugin, BlurFilterPlugin]);

    public function main():void {
        score.alpha = 0;

        stage.align = StageAlign.TOP_LEFT;
        stage.scaleMode = StageScaleMode.NO_SCALE;

        _loadermainXML.url = "items.xml";

        _loadermainXML.load();
    }
    private function onmainDataLoaded(event:LoaderEvent):void {
        _xmlData = XML(_loadermainXML.content);

        _files = new LoaderMax( { name:"files", onComplete:onFilesLoaded, onProgress:onFilesProgress } );

        _glowCurrentBag = TweenMax.to(controls.addCurrentBag, 1, { glowFilter: { color:0xF7E9CF, alpha:.8, blurX:16, blurY:16 }, timeScale:2, paused:true } );
        _glowNewBag = TweenMax.to(controls.addNewBag, 1, { glowFilter: { color:0xF7E9CF, alpha:.8, blurX:16, blurY:16 }, timeScale:2, paused:true } );
        _glowReplay = TweenMax.to(score.replay, 1, { glowFilter: { color:0x695532, alpha:.8, blurX:16, blurY:16 }, timeScale:2, paused:true } );

        _glowPicture = TweenMax.to(_image, 1, { blurFilter: { blurX:20, blurY:20 }, alpha:0, timeScale:2, paused:true, onComplete:showItem, onReverseComplete:enableClicks } );

        for (var i:uint = 0; i < _xmlData.images.image.length(); i++ ) {
            _files.append( new ImageLoader(_xmlData.images.@folder + _xmlData.images.image[i].@url, { name:"image_" + i }) );
        }
        _files.load();

    }
    private function onFilesProgress(event:LoaderEvent):void {
        loader.value_txt.text = String(Math.round(event.target.progress * 100)) + " %";
    }
    private function onFilesLoaded(event:LoaderEvent):void {
        controls.numberBags.numberBags_txt.text = String(_currentBag);
        controls.remainingText.value_txt.text = String(_xmlData.images.image.length() - 1);

        _replayOver = NResponder.addNative(score.replay, MouseEvent.MOUSE_OVER, onOverReplay);
        _replayOut = NResponder.addNative(score.replay, MouseEvent.MOUSE_OUT, onOutReplay);
        _replayClicked = NResponder.addNative(score.replay, MouseEvent.CLICK, onClickedReplay);
        _replayClicked.paused = true;
        _replayOver.paused = true;
        _replayOut.paused = true;

        NResponder.addNative(controls.addCurrentBag, MouseEvent.MOUSE_OVER, onOverCurrentBag);
        NResponder.addNative(controls.addCurrentBag, MouseEvent.MOUSE_OUT, onOutCurrentBag);
        _currentBagClicked = NResponder.addNative(controls.addCurrentBag, MouseEvent.CLICK, onClickedCurrentBag);
        _currentBagClicked.paused = true;

        NResponder.addNative(controls.addNewBag, MouseEvent.MOUSE_OVER, onOverNewBag);
        NResponder.addNative(controls.addNewBag, MouseEvent.MOUSE_OUT, onOutNewBag);

        _newBagClicked = NResponder.addNative(controls.addNewBag, MouseEvent.CLICK, onClickedNewBag);
        _newBagClicked.paused = true;

        controls.addCurrentBag.buttonMode = true;
        controls.addNewBag.buttonMode = true;

        NResponder.addNative(score.emailLink, MouseEvent.CLICK, onLinkClick);
        score.emailLink.buttonMode = true;

        imageContainer.addChild(_image);

        _counterTimerEvent = NResponder.addNative(_counterTimer, TimerEvent.TIMER, onCounterTimer);
        _counterTimerEvent.paused = true;

        _controlsTimeline.append(TweenMax.to(loader, 1, { alpha:0, timeScale:2 } ));
        _controlsTimeline.append(TweenMax.to(controls.addCurrentBag, 1, { alpha:1, x:237, timeScale:2 } ));
        _controlsTimeline.append(TweenMax.to(controls.addNewBag, 1, { alpha:1, x:237, timeScale:2 } ), -0.5);
        _controlsTimeline.append(TweenMax.to(controls.currentBag, 1, { alpha:1, y:280, timeScale:2 } ));
        _controlsTimeline.append(TweenMax.to(controls.numberBags, 1, { alpha:1, y:280, timeScale:2 } ), -0.5);
        _controlsTimeline.append(TweenMax.to(controls.remainingText, 1, { alpha:1, timeScale:2 } ));
        _controlsTimeline.append(TweenMax.to(controls.timeText, 1, { alpha:1, timeScale:2 } ));

        _scoreTimeline.append(TweenMax.to(controls.timeText, 1, { alpha:0, timeScale:2 } ));
        _scoreTimeline.append(TweenMax.to(controls.remainingText, 1, { alpha:0, timeScale:2 } ));
        _scoreTimeline.append(TweenMax.to(controls.numberBags, 1, { alpha:0, y:416, timeScale:2 } ));
        _scoreTimeline.append(TweenMax.to(controls.currentBag, 1, { alpha:0, y:416, timeScale:2 } ), -0.5);
        _scoreTimeline.append(TweenMax.to(controls.addNewBag, 1, { alpha:0, x:467, timeScale:2 } ));
        _scoreTimeline.append(TweenMax.to(controls.addCurrentBag, 1, { alpha:0, x:467, timeScale:2 } ), -0.5);
        _scoreTimeline.append(TweenMax.from(score, 1, { blurFilter: { blurX:20, blurY:20 }, alpha:0, timeScale:2 } ));
        _scoreTimeline.append(TweenMax.to(score, 1, { alpha:1, timeScale:2 } ), -0.5);

        _controlsTimeline.play();
    }
    private function onLinkClick(e:MouseEvent):void {
        var request:URLRequest = new URLRequest("mailto:imran.husain@celeritas-solutions.com" + "?subject=Score&body=Score%20:%20" + _points + "\nDate%20:%20" + (_end.month + 1) + "/" + _end.date + "/" + _end.fullYear);
        //trace(request.url);
        navigateToURL(request, "_blank");
    }
    private function onCounterTimer(e:TimerEvent):void {
        _end = new Date();
        controls.timeText.value_txt.text = returnTimeString(Math.round((_end.time - _start.time) / 1000));
    }
    private function startGame():void {

        _start = new Date();

        _counterTimerEvent.paused = false;
        _counterTimer.start();

        _currentItem = 0;
        _points = 0;
        _currentBag = 0;
        _currentBagItems = 0;

        _currentBagType = _xmlData.images.image[0].@bag_type;

        showItem();

        !_started ? (TweenMax.from(_image, 1, { blurFilter: { blurX:20, blurY:20 }, alpha:0, onComplete:enableClicks } ), _started = true):void;
    }
    private function onOverReplay(e:MouseEvent):void {
        _glowReplay.play()
    }
    private function onOutReplay(e:MouseEvent):void {
        _glowReplay.reverse();
    }
    private function onClickedReplay(e:MouseEvent):void {
        _replayClicked.paused = false;
        _replayOver.paused = false;
        _replayOut.paused = false;

        controls.numberBags.numberBags_txt.text = 0;
        controls.remainingText.value_txt.text = String(_xmlData.images.image.length() - 1);
        controls.currentBag.currentItems_txt.text = "";

        controls.timeText.value_txt.text = "00:00";

        _scoreTimeline.reverse();
    }
    private function onOverCurrentBag(e:MouseEvent):void {
        _glowCurrentBag.play();
    }
    private function onOutCurrentBag(e:MouseEvent):void {
        _glowCurrentBag.reverse();
    }
    private function onClickedCurrentBag(e:MouseEvent):void {
        _xmlData.images.image[_currentItem].@bag_type != _currentBagType ? _points-=2 : _points+=2;

        _currentBagItems > 0 ? controls.currentBag.currentItems_txt.appendText(", ") : controls.currentBag.currentItems_txt.text = "";
        controls.currentBag.currentItems_txt.appendText(_xmlData.images.image[_currentItem].@name);
        _currentBagItems++;
        nextItem();
    }
    private function onOverNewBag(e:MouseEvent):void {
        _glowNewBag.play();
    }
    private function onOutNewBag(e:MouseEvent):void {
        _glowNewBag.reverse();
    }
    private function onClickedNewBag(e:MouseEvent):void {
        _xmlData.images.image[_currentItem].@bag_type != _currentBagType ? _points++ : _points--;

        _currentBagType = _xmlData.images.image[_currentItem].@bag_type;
        _currentBagItems = 1;
        _currentBag++;
        controls.numberBags.numberBags_txt.text = String(_currentBag);
        controls.currentBag.currentItems_txt.text = _xmlData.images.image[_currentItem].@name;

        nextItem();
    }
    private function nextItem():void {
        _currentItem++;

        _currentBagClicked.paused = true;
        _newBagClicked.paused = true;

        _glowPicture.restart();
    }
    private function enableReplay():void {
        _replayClicked.paused = false;
        _replayOver.paused = false;
        _replayOut.paused = false;

        score.replay.buttonMode = true;

    }
    private function enableClicks():void {
        _currentBagClicked.paused = false;
        _newBagClicked.paused = false;
    }
    private function showItem():void {
        if (_currentItem < _xmlData.images.image.length()) {
            controls.remainingText.value_txt.text = String(_xmlData.images.image.length() - (_currentItem + 1));

            _image.bitmapData = LoaderMax.getLoader("image_" + _currentItem).rawContent.bitmapData;

            keepRatio.findValues(_image.height, _image.width, 268, 390, true);

            _image.x = keepRatio.newX;
            _image.y = keepRatio.newY;
            _image.height = keepRatio.newHeight;
            _image.width = keepRatio.newWidth;
            _glowPicture.currentProgress == 1 ? _glowPicture.reverse() : null;
        }else {
            //_end = new Date();

            _counterTimerEvent.paused = true;
            _counterTimer.stop();

            score.text.total_txt.text = String(_xmlData.images.@total_score);
            score.text.value_txt.text = String(_points);
            score.timeText.value_txt.text = returnTimeString(Math.round((_end.time - _start.time) / 1000));

            _scoreTimeline.play();
        }
    }
    public function returnTimeString($val:Number):String{
        _hours = Math.floor($val/3600);
        _minutes = Math.floor($val/60);
        _seconds = Math.floor($val-(_minutes*60));
        return (_hours > 0 ? String(_hours) + ':' : '' ) + (_minutes > 9 ?       String(_minutes) : '0' + String(_minutes)) + ':' + (_seconds > 9 ? String(_seconds) : '0' + String(_seconds));
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:24:14.090

不要立即添加 eventListener 以添加到当前包。创建一个**布尔值**（即 newBagPressed = false）。当按下*Add to new bag*时，测试布尔值。如果为 false，则将其设置为 true，然后才将 eventListener*添加到当前包中。*

希望这可以帮助 ：）

# ruby-on-rails - RoR 投票系统在本地工作，但在 Heroku 上部署时不工作

> ID：10752541
> 
> 赞同：1
> 
> 时间：2012-05-25T10:12:44.620
> 
> 标签：ruby-on-rails, sqlite, postgresql, heroku

我的应用程序实现了用户可以投票和“取消投票”的“想法”。它在本地运行良好。当推送到 Heroku 时，用户可以投票，但“取消投票”操作不起作用并生成“我们很抱歉，但出了点问题”。来自 herokuapp.com 的页面。

我检查了heroku日志，错误如下：

```
2012-05-25T09:47:18+00:00 app[web.1]: Started POST "/ideas/remove_vote/1/1" for 88.171.195.199 at 2012-05-25 09:47:18 +0000
2012-05-25T09:47:18+00:00 app[web.1]: Processing by IdeasController#remove_vote as HTML
2012-05-25T09:47:18+00:00 app[web.1]:   Parameters: {"authenticity_token"=>"mJ5daJfBhf+823VTg9C1+YSBdqVFTFPuJWiO2cIx6iQ=", "u_id"=>"1", "i_id"=>"1"}
2012-05-25T09:47:18+00:00 app[web.1]: Completed 500 Internal Server Error in 8ms
2012-05-25T09:47:18+00:00 app[web.1]: : DELETE FROM "votes" WHERE "votes"."" = $1):
2012-05-25T09:47:18+00:00 app[web.1]:   app/controllers/ideas_controller.rb:85:in `remove_vote'
2012-05-25T09:47:18+00:00 app[web.1]: 
2012-05-25T09:47:18+00:00 app[web.1]: ActiveRecord::StatementInvalid (PG::Error: ERROR:  zero-length delimited identifier at or near """"
2012-05-25T09:47:18+00:00 app[web.1]:                                           ^
2012-05-25T09:47:18+00:00 app[web.1]: LINE 1: DELETE FROM "votes" WHERE "votes"."" = $1
2012-05-25T09:47:18+00:00 app[web.1]: 
2012-05-25T09:47:18+00:00 app[web.1]: cache: [POST /ideas/remove_vote/1/1] invalidate, pass
2012-05-25T09:47:18+00:00 app[web.1]: 
```

我`remove_vote`在ideas_controller.rb 中的方法如下：

```
def remove_vote
  @vote = Vote.find_by_user_id_and_idea_id(params[:u_id], params[:i_id])
  @vote.destroy
  redirect_to ideas_path
end 
```

你们中有人有解决这个问题的想法吗？我怀疑这与本地数据库是 SQLite 而 Heroku 上的生产数据库是 PostgreSQL 这一事实有关，但我觉得奇怪的是添加投票有效而删除投票无效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T11:48:04.200

查看该日志中发出的删除语句：`DELETE FROM "votes" WHERE "votes"."" = $1`

where 子句在说什么栏目？应该讲什么栏目？投票模型中是否有任何内容可以解释它不使用 id 列？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T12:40:43.847

当您遇到此类问题时，最好使用 postgres 在本地配置/运行您的应用程序。这将允许您在本地调试这些问题，而不是试图“猜测”Heroku 上的问题。

这是关于让 postgres 在本地运行的一个很好的 railscast。

[http://railscasts.com/episodes/342-migrating-to-postgresql](http://railscasts.com/episodes/342-migrating-to-postgresql)

# c# - 使用 C# 从 IntPtr 复制带有 Marshal.Copy 的字节数组不起作用

> ID：10752543
> 
> 赞同：5
> 
> 时间：2012-05-25T10:12:53.607
> 
> 标签：c#, .net, pinvoke, marshalling

我正在使用一个非托管库，它生成灰度图像（大约 100x200 像素，或多或少）。图像包含在结构中，在 C 中如下所示：

```
typedef struct abs_image {
    ABS_DWORD Width;
    ABS_DWORD Height;
    ABS_DWORD ColorCount;
    ABS_DWORD HorizontalDPI;
    ABS_DWORD VerticalDPI;
    ABS_BYTE ImageData[ABS_VARLEN];
} ABS_IMAGE 
```

```
typedef unsigned int     ABS_DWORD;
typedef unsigned char     ABS_BYTE; 
```

这里是我的 C# 包装器结构：

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
public struct ABS_IMAGE {
    public uint Width;
    public uint Height;
    public uint ColorCount;
    public uint HorizontalDPI;
    public uint VerticalDPI;
    public IntPtr ImageData;
} 
```

抓取图像并编组`ABS_IMAGE`结构工作得很好。在以前的版本中，我尝试对 ImageData 使用固定长度的字节数组，但有时会崩溃。这发生了，我认为，因为图像大小不固定。现在我尝试稍后读取图像字节数组，当我可以计算之前的实际数组长度时。这里是相关代码：

```
ABS_Type_Defs.ABS_IMAGE img =
    (ABS_Type_Defs.ABS_IMAGE)Marshal.PtrToStructure(
    pImage,
    typeof(ABS_Type_Defs.ABS_IMAGE));

int length = ((int)img.Height - 1) * ((int)img.Width - 1);
byte[] data = new byte[length];

Marshal.Copy(img.ImageData, data, 0, length); 
```

现在我的问题是：每次我想执行 Marshal.Copy 来读取图像字节时，我都会得到一个`AccessViolationException`.

有人有想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T10:20:01.780

这就是正在发生的事情。您的结构就是所谓的可变长度结构。像素数据包含在结构中的内联，从偏移量开始`ImageData`。

```
typedef struct abs_image {
    ABS_DWORD Width;
    ABS_DWORD Height;
    ABS_DWORD ColorCount;
    ABS_DWORD HorizontalDPI;
    ABS_DWORD VerticalDPI;
    ABS_BYTE ImageData[ABS_VARLEN];
} ABS_IMAGE 
```

您的 API 返回指向非托管数据类型的`pImage`一个。但是，如果您查看本机代码，您将看到等于. 这是因为必须在编译时静态定义。实际上，像素数据的长度由高度、宽度和颜色计数字段决定。`IntPtr``ABS_IMAGE``ABS_VARLEN``1``struct`

您可以继续使用`Marshal.PtrToStructure`以获取大多数字段。但是你不能那样去`ImageData`现场。这将需要更多的工作。

像这样声明结构：

```
[StructLayout(LayoutKind.Sequential)]
public struct ABS_IMAGE {
    public uint Width;
    public uint Height;
    public uint ColorCount;
    public uint HorizontalDPI;
    public uint VerticalDPI;
    public byte ImageData;
} 
```

当您需要获取图像数据时，请执行以下操作：

```
IntPtr ImageData = pImage + Marshal.OffsetOf(typeof(ABS_IMAGE), "ImageData");
Marshal.Copy(ImageData, data, 0, length); 
```

如果您还没有使用 .net 4，那么您需要进行强制转换以使算术编译：

```
IntPtr ImageData = (IntPtr) (pImage.ToInt64() + 
    Marshal.OffsetOf(typeof(ABS_IMAGE), "ImageData").ToInt64()); 
```

最后，我认为你计算`length`不正确。当然你需要使用`Height*Width`. 此外，您还没有考虑颜色深度。例如，32 位颜色将是每像素 4 个字节。

# c# - 如何在 linq 中使用 selectman？

> ID：10752544
> 
> 赞同：0
> 
> 时间：2012-05-25T10:12:54.667
> 
> 标签：c#, linq-to-objects, linq

以下是我的 linq 查询

```
 var meetingIndividualQuery = meetingsList.SelectMany(o => o.Attendies.Distinct().Where(x => x.CompanyId == company.CompanyId)); 
```

我有以下课程

```
public class Meetings
    {
        public string IndustryCouncil { get; set; }
        public string MeetingType { get; set; }
        public string MeetingDescription { get; set; }
        public string MeetingDate { get; set; }
        public string MeetingHours { get; set; }
        public string MeetingHourlyValue { get; set; }
        public string MeetingTotal { get; set; }
        public List<Individual> Attendies { get; set; }
    } 
```

通过上面的查询，我得到了正确的个人列表，但是我如何使用相同条件的相同查询来检索会议列表。你能给我任何代码吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T10:20:22.793

以下查询将返回会议列表，其中至少有一位与会者提供了公司 ID：

```
var query = meetingsList.Where(m => m.Attendies.Any(i => i.CompanyId == company.CompanyId)); 
```

您也可以`Distinct`在验证前申请参加者`Any`

# plugins - 所有未显示的社交共享模块-joomla 2.5 一定是做错了什么

> ID：10752545
> 
> 赞同：1
> 
> 时间：2012-05-25T10:12:59.397
> 
> 标签：plugins, joomla, module, social, sharing

嘿伙计们，我一直在尝试，但我无法在我的 joomla 代码中找到问题。我正在尝试使用此扩展程序： [http ://extensions.joomla.org/extensions/social-web/social-share/social-multi-share/10676/reviews3](http://extensions.joomla.org/extensions/social-web/social-share/social-multi-share/10676/reviews3)

我做了一个叫做社交的职位，我把这个模块放在那里。但由于某种原因，没有模块在那里工作。我不知道为什么。我尝试找到所有流行的社交分享扩展，但可以让它们正常工作。

```
 <div id="social">
             <jdoc:include type="modules" name="social" />
        </div> 
```

这就是它在 index.php 中的样子

知道什么可能是错的吗？为什么我创建的所有模块都会显示而不是这个？

# bash - bash 执行 svn 命令，其中 url 包含空格

> ID：10752547
> 
> 赞同：3
> 
> 时间：2012-05-25T10:13:07.073
> 
> 标签：bash, svn, whitespace

我是 linux 的新手，尤其是 bash 脚本。

基本上我想做的是（在一些混合的bash /伪代码中）

```
for entry in `svn list https://svn.xxx.../projects`
  if already checked out
  then
    svn up https://svn.xxx.../projects/$entry some/local/path
  else 
    svn co https://svn.xxx.../projects/$entry some/local/path
  fi

  ... other stuff ...
done 
```

我的问题是不幸的是，我们的一些项目名称中包含空格。我设法对“入口”部分进行了一些组装，但是在执行颠覆命令时，url中的空格被转义了。例如

```
svn co "https://svn.xxx.../projects/$myassembly" some/local/path 
```

变成

```
svn co https://svn.xxx.../projects/Project%20With%20Space some/local/path 
```

并且找不到该网址。

我将不胜感激有关如何解决此问题的任何帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T11:11:41.000

使用`while`循环而不是`for`循环并在变量展开的地方加上引号。使用重定向`while`到`done`.

```
while read -r entry
do
  if already checked out
  then
    svn up "https://svn.xxx.../projects/$entry" some/local/path
  else 
    svn co "https://svn.xxx.../projects/$entry" some/local/path
  fi

  ... other stuff ...
done < <(svn list https://svn.xxx.../projects) 
```

# debugging - 使用 sonar ant 任务调试基于 ant 的项目

> ID：10752551
> 
> 赞同：1
> 
> 时间：2012-05-25T10:13:23.617
> 
> 标签：debugging, ant, sonarqube

如何在 Eclipse 中调试声纳蚂蚁任务 ( **ant sonar ) 的执行。**基于 Maven 的项目可以使用**mvnDebug sonar**进行调试。基于蚂蚁的项目有类似的方法吗？我知道**java**任务存在**jvmarg**元素，但我未能通过声纳任务路由这些元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T11:10:53.650

事实证明，这个问题在[https://stackoverflow.com/a/3040047/1164553](https://stackoverflow.com/a/3040047/1164553)中是如何回答的。所以解决方案是这样的调用：

```
java -cp $ANT_HOME/lib/ant-launcher.jar 
 -Dant.home=$ANT_HOME 
 -Xdebug -Xnoagent 
 -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=8000
 org.apache.tools.ant.launch.Launcher 
 sonar 
```

# java - 尝试使用 Highgui.imread (OpenCV + Android) 加载图像

> ID：10752556
> 
> 赞同：3
> 
> 时间：2012-05-25T10:13:34.933
> 
> 标签：java, android, opencv, image-processing

我尝试加载图像：

```
 File root = Environment.getExternalStorageDirectory();
    File file = new File(root, "image.gif");
    Mat m = Highgui.imread(file.getAbsolutePath());
    if(file.exists()){
        showToast("Height: " + m.height() + " Width: " + m.width());
    } 
```

但是大小=0（高度/宽度）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T16:26:50.650

该文件存在的事实并不意味着 OpenCV 能够读取其内容。

你应该做的是：

```
Mat m = Highgui.imread(file.getAbsolutePath());
if (img.data)
{
     showToast("Height: " + m.height() + " Width: " + m.width());
}
else
{
     // print error and abort execution
} 
```

文档末尾有一个重要说明[`imread()`](http://opencv.itseez.com/modules/highgui/doc/reading_and_writing_images_and_video.html#Mat%20imread%28const%20string&%20filename,%20int%20flags%29)，说明如下：

> 该函数通过内容而不是文件扩展名确定图像的类型。

在继续之前，您应该检查文档。确保您可以编写一个简单的 OpenCV 应用程序，在尝试更复杂的东西之前从磁盘加载并显示图像。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-25T10:46:49.847

尝试使用

```
IplImage orgImage= cvLoadImage(fileName); 
```

它正在开发 JavaCV 包装器。但我不认为它会在纯 OpenCV 上工作。

# jquery - jQuery：当用户滚动过去一个点时滑动标题

> ID：10752559
> 
> 赞同：2
> 
> 时间：2012-05-25T10:13:39.647
> 
> 标签：jquery

我有以下 jQuery 代码：

```
if($(window).scrollTop()>=220) {
                    $('#header nav').slideUp('fast').removeClass('fixed');
                } else {
                    $('#header nav').addClass('fixed').slideDown('fast');
                } 
```

发生的情况是，当用户向下滚动页面超过 220 像素时，标题将获得固定类，然后向下滑动。当用户再次向上移动时，标题将向上滑动并移除其固定类。用户将永远不会看到标题移回其原始位置，因为它完成了大约 180 像素，因此不在屏幕上。

然而问题是，当用户滚动时，它会一遍又一遍地滑动，这不是我想要的。我已经查看了停止方法，但停止当前动画也不是我需要的。关于如何解决这个问题的任何想法？

上面的代码是一个这样调用的函数：

```
$(window).scroll(function() {
                    fixedHeader();
                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T14:13:18.640

此资源可能对您有所帮助：[*Scroll Activated slide Down*](http://return-true.com/2010/04/scroll-activated-slide-down-header-with-jquery/)

```
$(function() {
    var bar = $('#headerSlideContainer');
    var top = bar.css('top');
    $(window).scroll(function() {
        if($(this).scrollTop() > 50) {
            bar.stop().animate({'top' : '0px'}, 500);
        } else {
            bar.stop().animate({'top' : top}, 500);
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:27:57.347

您希望更改该`if($(window).scrollTop()>=220) {`行以检查用户是否已从 0-220 转换为 220+ 或反转，而不是使用每个滚轮。

可以[在此处找到包含大量评论的示例教程。](http://www.bennadel.com/blog/1810-Creating-A-Sometimes-Fixed-Position-Element-With-jQuery.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T10:40:38.387

这样做可以解决问题：

```
if(!$('#header nav').hasClass('fixed')) {
                        $('#header nav').addClass('fixed').slideDown('fast');
                    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-25T10:21:09.550

试试这样的东西，它对我有用。

```
<SCRIPT>
$(document).ready(function() {

var div = $('#header');
var start = $(div).offset().top;

$.event.add(window, "scroll", function() {
    var p = $(window).scrollTop();
    $(div).css('position',((p)>start) ? 'fixed' : 'static');
    $(div).css('top',((p)>start) ? '0px' : '');
});

});
</SCRIPT> 
```

取自 [固定页眉](http://viralpatel.net/blogs/2012/01/scroll-fix-header-jquery-facebook.html)

# paypal-sandbox - 我想在客户通过 pay pal 完成付款后显示订单详细信息

> ID：10752562
> 
> 赞同：1
> 
> 时间：2012-05-25T10:13:45.587
> 
> 标签：paypal-sandbox

我正在为购物车使用 PayPal

代码工作正常。付款后返回 URL，我想向客户显示订单摘要。

有人可以指导我获取 order_amt、transactionid 并在页面上显示它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:12:47.567

使用 PayPal 的 PDT 和 IPN 服务。

[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_IPNandPDTVariables](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_IPNandPDTVariables)

# c#-4.0 - 错误检测后如何退出代码块

> ID：10752565
> 
> 赞同：4
> 
> 时间：2012-05-25T10:13:53.827
> 
> 标签：c#-4.0, razor

在 VB/VB.NET 中，在代码块中随时随地退出代码块是使用 EXIT SUB/EXIT FUNCTION/EXIT LOOP 等处理的例程。它只是@{}。这让我很困惑。请问，这背后的技巧或标准是什么？例如

```
@{
if(Websecurity.isAuthenticated){
   //do something
}else{
   json.Write("<li>You must be authenticated</li>", writer);
   return false; //this is my line of question
}
   //remaining code block
} 
```

第 6 行是我退出剩余代码块的问题，就像 VB.NET 或 VB 中的 EXIT SUB 一样

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T13:54:37.900

试试吧`return;`，应该可以的。

# actionscript-3 - 如何在 Flash Professional 中为 Flash 阶段实例提供唯一属性以传递给 AS3 脚本？

> ID：10752566
> 
> 赞同：7
> 
> 时间：2012-05-25T10:13:55.153
> 
> 标签：actionscript-3, flash, components

我已经开始在 Flash Professional 中构建一个粗略的游戏引擎框架，我很好奇如何在 Flash 库中创建能够拖动到舞台上并分配可从 AS3 访问的属性的对象。

**示例：**
我想创建一个开关对象（例如电灯开关），以便当玩家与其交互时，它会触发代码中的特定内容，例如房间里的灯打开。

我知道 Flash 内置了 UI 组件，您可以在 Flash Professional 环境中定义属性（见下图），我想知道是否有一种方法可以创建我自己的自定义样式组件，以便我基本上可以拥有我的关卡文件在 flash (.fla) 中打开，然后从我的库中拖出一个开关组件，然后输入一些信息，例如它控制的灯光以及我想要的任何其他信息。

![闪存组件参数](../Images/8c6389975e440d13f0afad5eea7751c1.png)

（上面是我正在寻找的参数控制类型的示例）

我已经阅读了一些关于扩展 flash UIComponent 类的内容，但我觉得这不是正确的方法，因为它对我想要的东西来说太过分了。我想要的只是将一些基本参数从库阶段实例传递到 AS3。我不想通过实例名称传递数据，因为如果我想要进行更复杂的交互，这看起来很混乱。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T14:05:17.323

I think what people are trying to say is that you can have the whole thing is data driven, and so you can combine the IDE with the data to come up with your final game.

But consider this ... it might be what you want.

If you have, for instance, a `BaseSwitch` Class:

```
public Class BaseSwitch extends MovieClip {
   private var _lightName:String;
   private var _light:Light;
   public function get lightName():String {
      return lightName;
   }
   public function set lightName(value:String):void {
      if (value != _lightName) {
        _lightnName = value;
        //Note I don't advocate having children reach into their parents like this,
        //but you sound like you don't want the parent involved in the process, so
        //this is one way you could do it.
        if (parent.hasOwnProperty(lightName) && parent[lightName] is Light) {
           _light = parent[lightName];
        } else {
           trace('Could not find light', _lightName);
        }

      }
   }
   //other code to listen for gestures and operate the light
} 
```

Now, when you want a switch to operate a specific light name, create a library instance and set its **base class** to BaseSwitch. When you close the dialog where you set the base Class, you'll notice that it gives you a dialogue that it couldn't find the Class in the Class path and one will be generated. You're going to replace it with a Class that sets the lightName. Create a new AS3 Class in the root directory with the same name as your library instance. It should look something like this:

```
public class SpecificSwitch {
   public function SpecificSwitch() {
      super();
      lightName = 'theSwitch';
   }
} 
```

Other possible choices involve having the parent Class match up instances of switch with instances of light based on name, so if it finds a light1 and a light1Switch, it either gives a reference to the light to the switch or it simply sets up a mapping in its own event listening system.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-14T23:19:40.720

我会创建一个“切换”影片剪辑并将其导出到动作脚本，与“轻”影片剪辑相同。在主类 .as 文件中，我会将它们插入舞台，使用 addChild（剪辑），然后将点击侦听器添加到“切换”影片剪辑以控制“灯光”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-02T18:27:04.730

这很容易做到。

在我看来，组件是错误的方法。

首先，您需要设置 Actionscript 链接/标记您的库项目。在库面板中。- 右键单击​​“你的MC”>>单击“属性”。- 在属性对话框中勾选“导出动作脚本” - 然后命名你的类，例如“yourMC_Class”

现在 MC 已准备好在您的代码中被引用。

接下来，您需要将您的“yourMC”从库动态添加到舞台。可以这样做。

// 第一个引用库项

```
var yourMC_ref:yourMC_Class = new yourMC_Class(); 
```

// 然后将动态 mc 项加载到 var 中

```
var your_MC_OBJ = yourMC_ref; 
```

// 然后将你的 MC 添加到舞台。

```
this.addChild(your_MC_OBJ);
your_MC_OBJ.x = 200;
your_MC_OBJ.y = 100; 
```

简而言之，这就是我将图书馆项目添加到舞台的方式。

显然那是基本的功能/代码。

在一个项目中，我会将所有代码都放在一个外部类中，在这种情况下，您只需将 vars 设置为 public vars

```
public var yourMC_ref:yourMC_Class = new yourMC_Class();
public var your_MC_OBJ = yourMC_ref; 
```

并将最后 3 行代码放入公共函数中

```
public function ADD_First_MC()
{
       this.addChild(your_MC_OBJ);
       your_MC_OBJ.x = 200;
       your_MC_OBJ.y = 100;
} 
```

现在“your_MC_OBJ”可以以更复杂的方式使用。

例如。要创建电灯开关，有很多选项取决于您需要如何接近功能。例如。将不同的 MC 库项目应用于“your_MC_OBJ”播放 MC 中的特定帧。

但是，如果是我，我只会使用鼠标功能使用 addChild removeChild 来打开或关闭灯。例如。

```
public var LightON = 0;
public var yourMC_ref:yourMC_Class = new yourMC_Class();
public var your_MC_OBJ = yourMC_ref; 
```

然后创建一个处理开/关事件的公共函数

```
public function LightON_OFF()
     {
         if(LightON == 1)
            {
               this.addChild(your_MC_OBJ);
               your_MC_OBJ.x = 200;
               your_MC_OBJ.y = 100;
            }
         if(LightON == 0)
            {
               this.removeChild(your_MC_OBJ);
            }
     } 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-12T15:35:40.310

所以，对于你想要的，虽然它可能不是做你想做的最好的方式，但我知道这是你正在构建的经验。

使用组件，是的……按以下方式（最简单的一种）：

*   创建影片剪辑
*   在库中右键单击它
*   点击“组件定义”
*   添加一个属性，设置一个名称，一个变量名（var test，对于这个问题）和一个默认值
*   点击确定

*   打开您的影片剪辑

*   打开第一帧的代码并声明没有初始值的变量 (var test:String;)
*   追踪它的价值 (trace(test);)

*   回到舞台根目录

*   将项目从库拖放到舞台
*   测试它（Cmd/Ctrl + Enter）（也许它会打印空，不知道为什么，它有时会忽略默认值）

*   在舞台上选择您的组件

*   打开属性面板（Windows > 属性）
*   转到此面板上的组件参数并更改属性值

*   您应该在控制台上看到跟踪的值

而且，我认为，像这样，您可以使用组件中的属性来满足您的需求，例如使用字符串并通过其名称获取受控 mc。

祝你好运

# google-maps - 使用地理编码初始化 gmap3

> ID：10752570
> 
> 赞同：2
> 
> 时间：2012-05-25T10:14:09.630
> 
> 标签：google-maps, initialization, jquery-gmap3

我是 gmap3 的新手，是否可以使用地点地址来初始化 gmap3？我通常知道它是用纬度和经度完成的。我已经使用[这个](http://gmap3.net/api.html)例子用这个位置名称做了标记。我也已经完成了[这个](http://www.clementlevallois.net/nesshi/gmap3/demo/mixed.html)例子，但没有运气。而且我还需要缩放选择的地方，为此我使用自动完成。

我的代码如下

```
 $('#test').gmap3(
     { action:'init',
         options:{
             address: "kerala,india"
         }
     }

 ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T10:59:43.240

首次用于`getLatLng()`检索位置，成功设置中心后：

```
 $('#test1').gmap3(
    { action : 'getLatLng',
      address:'kerala,india',
      callback : function(result){
        if (result){
          $(this).gmap3({action: 'setCenter', args:[ result[0].geometry.location ]},
                        {action: 'setZoom', args:[ 12]});
      } else {
      alert('not found !');
      }}}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T06:33:50.233

```
var add="kerala,india";
var geocoder = new google.maps.Geocoder();

geocoder.geocode({ address: add, region: 'no' },
function (results, status) {
 if (status.toLowerCase() == 'ok') {
    // Get center
    var coords = new google.maps.LatLng(
        results[0]['geometry']['location'].lat(),
        results[0]['geometry']['location'].lng()
    );
    //alert(coords);
    $map.gmap3("get").setCenter(coords);
    $map.gmap3("get").setZoom(12);
    addMarker(coords);
 }
 else {
    alert("address not found");
 }
}    

function addMarker(marker) {
    $map = $('#googleMap');
    if (marker) {
        $map.gmap3(
            { action: 'init',
                options: {
                    center: eval(marker),
                    zoom: 12,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                }
            },
            { action: 'addMarker',
                latLng: eval(marker),
                options: {
                    draggable: true,
                    icon: new google.maps.MarkerImage('http://maps.google.com/mapfiles/marker.png')
                },
                events: {
                    dragend: function (mark) {
                        updateMarker(mark);
                    }
                }
            });
    }
} 
```

使用上面的代码，您还可以获得纬度/经度并拖动搜索到的位置标记。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T09:37:36.193

此功能将在下一个版本（5.0）中，当前未更新，

这是一个工作代码：

```
 $('#test1').gmap3({ 
    action : 'getLatLng',
    address:'kerala,india',
      callback : function(result){
        if (result){
          $(this).gmap3({
            action: "init",
            options:{
                center: result[0].geometry.location,
                zoom: 12
            } 
        });
      } else {
        alert('not found !');
      }
    }
}); 
```

注意，如果你的地图已经初始化，你可以在回调中使用

```
 $(this).gmap3("get").setCenter(result[0].geometry.location);
    $(this).gmap3("get").setZoom(12); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T13:33:53.187

您也可以使用以下代码：

```
var markerData = [];
markerData.push({ address: 'kerala,india', data: '' });
$('#test').gmap3({
   action: 'addMarkers',
   markers: markerData
   }
); 
```

# birt - ReferenceError：未定义“BarSeriesImpl”

> ID：10752576
> 
> 赞同：1
> 
> 时间：2012-05-25T10:14:40.520
> 
> 标签：birt

我的报告在 BIRT 中运行良好——它显示了一些条形图图形。但是当我在某个系统（IBM maximo）中导入时，我收到了这个错误，而不是显示条形图：

ReferenceError：未定义“BarSeriesImpl”。在图表脚本的第 8 行：''

我用这个脚本向我展示了条形图上的一些值。

```
importPackage( Packages.java.util );
importPackage( Packages.org.eclipse.birt.chart.model.type.impl );

function afterDataSetFilled(series, dataSet, icsc)
{

if( series.getClass() == BarSeriesImpl ){

var inv =
parseInt(icsc.getExternalContext().getScriptable().getPersistentGlobalVariable("IN"));
var outv =
parseInt(icsc.getExternalContext().getScriptable().getPersistentGlobalVariable("OUT"));
var canv =
parseInt(icsc.getExternalContext().getScriptable().getPersistentGlobalVariable("CANCELED"));

var narray1 = new ArrayList( );
narray1.add(inv);
narray1.add(outv);
narray1.add(canv);
dataSet.setValues(narray1);
}else{
var catArray = new ArrayList();
catArray.add("IN");
catArray.add("OUT");
catArray.add("CANCELED");
dataSet.setValues(catArray);
}

} 
```

如何解决这个问题？我是否必须以某种方式在我的系统中导入此类或..？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T16:31:48.447

我知道我正在复活一个老问题，但这引起了我的注意，因为它与我本周回答的[另一篇帖子相似。](http://www.birt-exchange.org/forum/index.php?/topic/29727-error-message-when-trying-to-use-birt-debugger/)我认为您可能在收到此错误消息的系统中缺少 org.eclipse.birt.chart.model.type.impl.BarSeriesImp。我认为如果您将 BIRT 运行时 jar 添加到 lib 路径，那么它应该可以解决该错误。

# c# - 在用户控件asp.net C#中公开OnclientClick函数

> ID：10752577
> 
> 赞同：4
> 
> 时间：2012-05-25T10:14:47.227
> 
> 标签：c#, asp.net

> **可能重复：**
> [在 c# 中的用户控件中公开和引发子控件的事件](https://stackoverflow.com/questions/943171/expose-and-raise-event-of-a-child-control-in-a-usercontrol-in-c-sharp)

我有一个 html 输入按钮的用户控制。

在页面上，我正在使用该用户控件。如何在用户控件内公开该输入按钮的 onclient 事件，以便如果该按钮客户端可以调用页面函数。

```
<uc2:UC_LayoutSelector ID="UC_LayoutSelector1" runat="server" OnClientLayoutSelect="UC_LayoutSelector1_MyPageFunction" />

 <script type="text/javascript">

        function UC_LayoutSelector1_MyPageFunction(e) {
            alert(e);
        }
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T03:59:45.377

根据您要实现的目标，您可能只想创建输入按钮的 onclient 属性的公共属性。如果您试图捕捉用户单击该按钮的时刻，您将需要使用 javascript 函数进行回发并以编程方式引发事件控件。这将允许您在父页面上捕获事件。

# javascript - 如何调试 Thunderbird 插件/扩展的 JavaScript

> ID：10752584
> 
> 赞同：6
> 
> 时间：2012-05-25T10:15:23.297
> 
> 标签：javascript, debugging, thunderbird, thunderbird-addon, javascript-debugger

我想开发一个 Thunderbird 12 插件。我写了一个简单的 JS 函数。（文件：“chrome\content\myApp.js”）。此文件由 xul-'onclick'-事件调用。我已将插件打包为 .xpi 文件，然后安装了它。（一切正常，它正在工作！）

现在我想调试我的 JS 函数。但我找不到工作的 JS 调试器。我试过这个插件：

*   “Javascript 调试器”(0.9.89)。不工作：线程不会在我的断点处停止。
*   Firebug(1.7.2) + Chromebug(1.7.2)。不工作：我无法启用 JS 调试选项卡。（**更新**：我也无法设置/更改“上下文”）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-25T03:56:26.373

令人高兴的是，我们再次为 Thunderbird 提供了调试器！您需要更新的/夜间版本，但是感谢 Philipp Kewisch 的夏季代码项目，我们可以使用 Firefox 调试器远程调试 Thunderbird。更多详情请访问以下链接： http: [//kewisch.wordpress.com/2013/09/22/thunderbird-developer-tools-wrapup/](http://kewisch.wordpress.com/2013/09/22/thunderbird-developer-tools-wrapup/) [http://kewisch.wordpress.com/2013/06/13/the-thunderbird -remote-debugger-is-alive/](http://kewisch.wordpress.com/2013/06/13/the-thunderbird-remote-debugger-is-alive/) [https://bugzilla.mozilla.org/show_bug.cgi?id=876636](https://bugzilla.mozilla.org/show_bug.cgi?id=876636)

如果你真的致力于 TB12，你可以在 nightly 上调试，然后在 TB12 上测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T18:47:07.250

不幸的是，没有像样的 chrome (addons) javascript 调试器这样的东西。Chromebug 早已被遗弃，venkman 不起作用，插件作者有点困在那里。Mozilla 正在开发一个名为 JSD2 的新调试 API，但从[wiki](https://wiki.mozilla.org/DevTools/Features/Debugger)看来，它主要针对内容（网页）javascript，而不是 chrome（插件）javascript，至少短期内不会。

幸运的是，最近的一项努力似乎得到了回报：现在有一种方法可以在一个体面的类似控制台的窗口中轻松执行 JavaScript 的小片段。有关详细信息，请参阅[http://mikeconley.ca/blog/2012/05/11/scratchpad-ported-to-thunderbird-kinda/](http://mikeconley.ca/blog/2012/05/11/scratchpad-ported-to-thunderbird-kinda/) :)。

# c# - 将查询字符串参数添加到 GridView ItemTemplate

> ID：10752585
> 
> 赞同：7
> 
> 时间：2012-05-25T10:15:24.013
> 
> 标签：c#, javascript, asp.net, .net

我在第一列有一个带有超链接的gridview。单击超链接后，用户将被重定向到 Vendor.aspx。现在，我需要将（单击的行的）消费者 ID 作为查询字符串传递给 Vendor.aspx。

实现它的最佳方法是什么？有没有一种方法可以只使用标记代码来处理它？

```
 <asp:GridView ID="grdConsumers" runat="server" AutoGenerateColumns="False" 
                EnableViewState="True" >
                <Columns>

                   <asp:TemplateField HeaderText="ConsumerID" SortExpression="ConsumerID" >
                    <ItemTemplate>
                        <asp:HyperLink ID="lnkConsumerID" href="Vendor.aspx" runat="server"><%# Eval("ConsumerID")%></asp:HyperLink>
                    </ItemTemplate>
                    </asp:TemplateField>

                    <asp:BoundField HeaderText="Status" DataField="Status" SortExpression="Status"></asp:BoundField>
                </Columns>
            </asp:GridView> 
```

**阅读：**

1.  [在用户控件（ASCX）中动态设置 Gridview DataNavigateUrlFormatString](https://stackoverflow.com/questions/6469155/set-gridview-datanavigateurlformatstring-dynamically-inside-user-controlascx)

2.  [如何将“&Source”添加到 DataNavigateUrlFormatString？](https://stackoverflow.com/questions/5949860/how-do-i-add-source-to-datanavigateurlformatstring)

3.  [使用 JavaScript 在 GridView 中选择行](https://stackoverflow.com/questions/5605637/select-row-in-gridview-with-javascript)

4.  [绑定值包含冒号时如何绑定GridView HyperLinkField的URL？](https://stackoverflow.com/questions/6539667/how-to-bind-the-url-of-a-gridview-hyperlinkfield-when-the-bound-value-contains-a)

5.  [来自 DataSource 的 asp.net gridview DataNavigateUrlFormatString](https://stackoverflow.com/questions/6804488/asp-net-gridview-datanavigateurlformatstring-from-datasource)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T10:22:59.127

尝试使用`DataNavigateUrlFormatString`

```
<ItemTemplate>
    <asp:HyperLinkField DataNavigateUrlFields="ConsumerID" DataTextField="ConsumerID" DataNavigateUrlFormatString="Vendor.aspx?id={0}" />
</ItemTemplate> 
```

...`Eval()`当你把它放在你的`href`.

您可以根据需要替换`DataTextField`- 我只是将*ConsumerID*放在那里以与您的示例保持一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T12:06:52.220

在 .aspx 文件中的 gridview 中重写您的超链接，如下所示：

```
<asp:HyperLink ID="lnkConsumerID" runat="server"  Text='<%# Eval("ConsumerID")%>' /> 
```

然后在代码隐藏中创建一个 RowDataBound 事件处理程序：

```
 protected void grdConsumers_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType != DataControlRowType.DataRow) return;
    var hlnkhlnk = (HyperLink)e.Row.FindControl("lnkConsumerID");
    if (hlnkhlnk != null)
    {
        hlnkhlnk.NavigateUrl = "Vendor.aspx" + "?Consumer   ID=" + hlnkhlnk.Text;
    }
} 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T10:39:52.753

您可以使用 at 做同样的事情`Grid view Item Data Bound Event`

```
 protected void grdConsumers_ItemDataBound(object sender,DataGridItemEventArgs e)
    {
        if(e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
        {
            // Get your consumerId here     
            ((HyperLink)e.Item.FindControl("Edit")).NavigateUrl = "Vendor.aspx?id=" + consumerId
        }
    } 
```

# php - Magento adminhtml 表单字段未添加到 POST

> ID：10752589
> 
> 赞同：2
> 
> 时间：2012-05-25T10:15:32.720
> 
> 标签：php, magento

我在 magento adminhtml 表单中有以下字段。

![我的表单中的字段](../Images/de2f9856fb65c471ff26a7cb54117f17.png)

在提交时，我希望抓住帖子，然后简单地转储其内容，这在我的 saveAction 中进行。

```
public function saveAction()
{
    if ($this->getRequest()->getPost())
    {
        try{
            $postData = $this->getRequest()->getPost();
            echo '<pre>';
            print_r($postData);
            exit; 
```

输出如下所示。

```
Array
(
    [form_key] => I6jK6swe1EMl0wER
    [carrier_code] => test
    [postcode] => tescode
    [sku] => 123445
) 
```

看到我的表格被定义为：

```
$form = new Varien_Data_Form();
$this->setForm($form);
$fieldset = $form->addFieldset('instance_form', array('legend'=>Mage::helper('instance')->__('Instance Filters')));

    $fieldset->addField('carrier_code', 'text', array(
            'label'     => Mage::helper('instance')->__('Carrier service'),
            'name'      => 'carrier_code',
            'after_element_html' => '<small>Leave blank for all Carriers.</small>',
    ));

    $fieldset->addField('postcode', 'text', array(
            'label'     => Mage::helper('instance')->__('Postcode'),
            'name'      => 'postcode',
            'after_element_html' => '<small>Leave blank for all Postcodes.</small>',
    ));

    $fieldset->addField('sku', 'text', array(
            'label'     => Mage::helper('instance')->__('Sku'),
            'name'      => 'sku',
            'after_element_html' => '<small>Leave blank for all Skus.</small>',
    ));

    $fieldset->addField('start_date', 'date', array(
            'label'     => Mage::helper('instance')->__('Start Date'),
            'after_element_html' => '<small>Comments</small>',
            'tabindex' => 1,
            'image' => $this->getSkinUrl('images/grid-cal.gif'),
            'format' => Mage::app()->getLocale()->getDateFormat(Mage_Core_Model_Locale::FORMAT_TYPE_SHORT)
    ));

    $fieldset->addField('aura', 'file', array(
            'label'     => Mage::helper('instance')->__('Upload'),
            'value'  => 'Uplaod',
            'disabled' => false,
            'readonly' => true,
            'after_element_html' => '<small>Comments</small>',
            'tabindex' => 1
    )); 
```

我期待看到这样的输出：

```
Array
(
    [form_key] => I6jK6swe1EMl0wER
    [carrier_code] => test
    [postcode] => tescode
    [sku] => 123445
    [start_date] => someValue
    [aura] => anotherValue

) 
```

我错过了什么吗？为什么会说日期字段，而不是像所有其他文本输入字段一样添加到帖子中？

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T10:57:39.063

您在通话中丢失了`name`密钥。`addField('start_date', ..)`

`Varien_Data_Form`您希望提交的每个字段都需要一个`name`键/值对。

您分配给字段`name`键的值`name`在`<input>`呈现`<form>`.

# c++ - 如何使用 wcstombs 代替 WideCharToMultiByte ？

> ID：10752591
> 
> 赞同：2
> 
> 时间：2012-05-25T10:15:50.500
> 
> 标签：c++

`wcstombs`有三个参数。

`WideCharToMultiByte`有八个args，</p>

如何更换？</p>

如何使用`wcstombs`这样的写法：

```
int kk = WideCharToMultiByte(936, 0, szBn, ccBn+1, 0, 0, 0, 0); 
```

如何使用`wcstombs`这样的写法：

```
int kk= WideCharToMultiByte(936,
                            0,
                            szBn,
                            ccBn+1,
                            kkburr,
                            (ccBn+1)*sizeof(wchar_t),
                            0,
                            0) 
```

一样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T10:20:37.567

[`WideCharToMultiByte`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374130%28v=vs.85%29.aspx)做的事情与 有**很大不同**，`wcstombs`所以至少有点怀疑¹这种替换是否会成功。

具体来说，WCTMB 从 UTF-16 转换为您选择的另一个字符集（和编码）。[`wcstombs`](http://www.cplusplus.com/reference/clibrary/cstdlib/wcstombs/)从“宽字符串”转换为“多字节字符串”，但标准将这些术语的确切定义留给实现者。

换句话说：WCTMB 从已知编码转换为另一种已知编码。`wcstombs`从未知编码转换为另一种未知编码。你不能用后者替换前者，特别是如果你想转换成中文编码（这不是936吗？）。

寻求进行此替换的原因是什么？不管它是什么，几乎可以肯定有更合适的方法来实现目标。

**更新：**如果您想要一个独立于平台的可靠解决方案，那么我推荐[ICU](http://site.icu-project.org/)。不要期望找到 WCTMB 的单行替代品，因为它根本不存在。

* * *

¹ 大量轻描淡写

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:24:03.677

*   转换为的结果编码`wcstombs`取决于当前的语言环境，而`WideCharToMultiByte`可以显式地给出一个代码页。
*   `wcstombs`从“宽字符串”转换而来，其编码取决于标准库的实现。`WideCharToMultiByte`从 UTF-16 中的字符串转换。`wcstombs`所依赖的宽字符可能不会以 UTF-16 编码，但在 Windows 中，宽字符是 UTF-16。
*   `wcstombs`是便携的，`WideCharToMultiByte`不是。如果您的目标平台仅是 Windows，那没关系。
*   `WideCharToMultiByte`允许指定将使用的“默认字符”，而不是无法在目标编码中表示的字符。

So`WideCharToMultiByte`功能更强大，可能用作`wcstombs`.

如果您当前的代码页不是 936，那么您询问的替换是不可能的。

# php - 在 Eclipse 中打开文件资源管理器的键盘快捷键是什么？

> ID：10752596
> 
> 赞同：5
> 
> 时间：2012-05-25T10:16:26.303
> 
> 标签：php, eclipse, keyboard-shortcuts, explorer

我一直在搜索，找不到在 Eclipse 中打开文件资源管理器的键盘快捷键（我主要使用 PHP 和 Java Eclipse）。我喜欢不时关闭文件资源管理器，以便给自己更多空间来查看我的代码，然后在需要导航到不同的文件夹/文件时重新打开它。

这将非常有用，并且可以节省很多不方便的手部动作！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T10:24:38.250

如果我理解正确：

`ALT`+ `SHIFT`+ `Q`( `OPTION`+ `SHIFT`+ `Q`- for mac) 然后按下`E`将打开 PHP 资源管理器

按`CTRL`+ `SHIFT`+ `L`( `COMMAND`+ `SHIFT`+ `L`- 对于 mac) 以获取可用热键的列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-30T06:15:58.057

要从 eclipse 中导航**系统**中的文件，文件实际*存储*在哪里：

Alt + Shift + W + X（在 Windows 操作系统中）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T10:22:59.937

您可以自己设置快捷方式。转到`window/general/preferences/keys`，搜索与您的资源管理器视图相关的命令并为其分配快捷方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-15T17:47:25.103

在 Windows 中尝试++ `ALT`。它将提示打开文件导出器。这样您就可以浏览和打开您想要的文件..`F``.`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T10:25:00.623

要打开任何视图（以及 Eclipse 中的一系列其他内容，例如首选项页面），您可以使用快速访问对话框。键入`Ctrl + 3`，然后键入要打开的视图的名称。

# mysql - 如何匹配MYSQL中1列中的两个值

> ID：10752601
> 
> 赞同：1
> 
> 时间：2012-05-25T10:16:54.433
> 
> 标签：mysql

情况。CS-Cart 具有以下选项/变量表结构。

**[variant_options]**表有一个**[combination]**列。
**[combination]**将**[option_id]**和**[variant_id]**存储为
**[option_id]**下划线**[variant_id]**即 1_2、1_3...
为了匹配正确的选项及其与每个产品的变体，我需要能够引用这些值。即 LEFT JOIN variant_name ON variant_name.variantid =（组合列中下划线后的值。）

我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:19:45.040

```
SELECT  *
FROM    combination c
LEFT JOIN
        option o
ON      o.id = SUBSTRING_INDEX(c.combination, '_', 1)
LEFT JOIN
        variant v
ON      v.id = SUBSTRING_INDEX(c.combination, '_', -1) 
```

# java - Spring Web App中没有JBoss的JsfUnit - maven依赖设置

> ID：10752604
> 
> 赞同：2
> 
> 时间：2012-05-25T10:17:05.993
> 
> 标签：java, jsf, maven, dependencies, jsfunit

我在任何地方都找不到适合我的 pom 的简单 JSFUnit 设置。我使用什么存储库以及哪些依赖项？我们有一个使用 JSF 和 Spring 运行的 Web 应用程序。让 JSFUnit 融入其中并不难......？！

此外，在 jenkins 上构建工件时，我们还想从 Eclipse（我想我在那里找到了一些东西）和通过 Maven 运行测试。

任何人都可以发布他们的依赖设置（以及 Maven 构建周期集成）吗？谢谢！

# windows-phone-7 - 提交后，应用程序中心需要多少天才能签署 Windows Phone 应用程序？

> ID：10752609
> 
> 赞同：2
> 
> 时间：2012-05-25T10:17:21.627
> 
> 标签：windows-phone-7, app-hub

提交后，应用程序中心需要多少天才能签署 Windows Phone 应用程序？有没有人对此有任何个人经验？最多需要多少天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:23:59.750

根据 MSDN，您的应用程序的[认证](http://msdn.microsoft.com/en-us/library/hh202928%28v=vs.92%29.aspx)通常需要“平均”5 个工作日

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:23:40.093

有许多因素决定了申请通过认证需要多长时间，例如：-

1.  复杂
2.  提交的地区和地区数量
3.  等待认证的其他应用程序数量

所以这不是一个容易回答的问题。

# javascript - Javascript/jQuery 未定义

> ID：10752610
> 
> 赞同：1
> 
> 时间：2012-05-25T10:17:22.497
> 
> 标签：javascript, jquery

标题命名为“jQuery / Javascript undefined”的原因并不是因为我认为 jQuery 是一种语言，我确实知道 jQuery 是一个 javascript 语言库，以防万一有些迂腐的读者读到这篇文章。我之所以写这个标题是因为我不知道代码有什么问题，jQuery或Javascript（所有jQuery的代码都编译）是错误的。

好的，回到问题，看看下面的代码，它们给了我一个未定义的值

```
//username validation
function username_val(){
    username_value = $("input[name='username']").val();
    span_error = "span[name='username_error']";
    $(span_error).load('ajax_signup_username', {php_username_error:username_value},  function(){
        return true;
    });
} 
```

我警告了这一点，然后返回“未定义”。我假设会返回一个 true 。

```
function final_val(){
        alert( username_val() );
} 
```

**编辑：**你们中的一些人说我只能在成功参数上返回 true，但我需要这个来进行验证，所以如果所有的验证方法都是 true，在 final_val 中将返回 true。关键是我需要 final_val() 中的真实值，或者如果你们有其他方法来验证它，请告诉我。注意：我很着急，所以如果我误解了你的答案，请原谅我。我会离开几个小时，在那之前我会检查你的答案。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T10:18:30.203

您需要制作`alert( username_val() );`成功内的功能。与`.load()`异步方法一样，因此它不能`return true`在立即调用后。所以你可以试试这个：

```
 $(span_error).load('ajax_signup_username', {php_username_error:username_value},  function(){
     alert('Something');
     var response = true;
     final_val(response);
 });

 function final_val(response){
     alert( response);
 } 
```

[这](http://api.jquery.com/load/)是医生

# mysql - 在 MySQL 的 Case 语句中使用 Sum

> ID：10752612
> 
> 赞同：0
> 
> 时间：2012-05-25T10:17:28.473
> 
> 标签：mysql, sum, case

我在 MySQL 添加三个值时遇到问题，这应该很简单吧？

我有根据第二列的值从列中选择值的代码，我使用这样的 case 语句：

```
Select
        Max(Case
            When Table1.costcode Like '%Costcode1%' 
            Then Table1.costs 
            Else Null End) As 'Costcode1',
        Max(Case
            When Table1.costcode Like '%Costcode2%' 
            Then Table1.costs
            Else Null End) As 'Costcode2',
        Max(Case
            When Table1.costcode Like '%Costcode3%' 
            Then Table1.costs 
            Else Null End) As 'Costcode3',
        (Case
            When Table1.costcode In ('%Costcode1%','%Costcode2%','%Costcode3%')
            Then Sum(Table1.costs)
            Else Null End) As 'Total Cost',

From Table1 
```

前三个 Case 语句工作正常并且所有返回值（这些值作为负数保存在数据库中，例如 -13624.00），但是 Total Cost Case 只返回 Null...

Table1.costcode 列还包含许多其他代码，因此我不能在不先将它们挑选出来的情况下将所有值相加。

对这些值求和一定很简单，但显然我遗漏了一些东西......请帮助:-)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:23:38.767

尝试这个 -

```
 SUM(Case Table1.costcode
        When LIKE ('%Costcode1%') Then Table1.costs
        When LIKE ('%Costcode2%') Then Table1.costs
        When LIKE ('%Costcode3%') Then Table1.costs
        Then Table1.costs
        Else 0.00 End) As 'Total Cost' 
```

# android - 通过 Rails API 使用 Facebook 进行身份验证

> ID：10752613
> 
> 赞同：7
> 
> 时间：2012-05-25T10:17:29.533
> 
> 标签：android, ruby-on-rails, ruby, facebook, omniauth

我的 Rails 应用程序的用户可以通过以下两种方式之一进行身份验证：

*   使用他们的 Facebook 帐户
*   使用我们自己的身份验证

我在 Android 和 Rails 上使用 Facebook `devise`SDK `omniauth`。

如何在 Android 上对我的 Rails 应用程序进行身份验证，以便从服务器获取我需要的信息？

**注意**：我注意到这个问题最近获得了相当多的意见。请不要太严格地遵循这个线程中给出的建议——网络移动得很快，它的历史可以追溯到 3 年前！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:33:54.770

这可以使用 fb_graph gem（不是 fbgraph！）来完成。

您可以将其添加到您的 gemfile 并执行

```
user = FbGraph::User.me(token).fetch 
```

`token`您通过使用例如 Android 上的 Facebook SDK 获得的 oauth 令牌 在哪里。`user.email`将是用户的电子邮件地址（如果您设置了必要的权限）。

您可以使用此 URL 进行测试：

```
https://www.facebook.com/dialog/oauth?client_id=YOUR_APP_ID&redirect_uri=https://www.facebook.com/connect/login_success.html&response_type=token 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T12:04:57.850

Niraj Shah 是完全正确的，尽管答案对您来说可能不够详细。要深入回答您的问题，请查看最近才发布[的 Ryan Bates 的 Securing an API railscast 。](http://railscasts.com/episodes/352-securing-an-api)它涵盖了 HTTP 基本身份验证。

您可能还想查看更高级的选项来保护您的 API/为注册用户提供对其数据的访问权限。这里也有一个关于这个的 railscast：[http](http://railscasts.com/episodes/353-oauth-with-doorkeeper) ://railscasts.com/episodes/353-oauth-with-doorkeeper - 虽然这是一个专业剧集，所以你需要注册才能观看它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T21:46:42.933

弗朗西斯科，我也有同样的需要。

使用 token_authenticable 的设计场景看起来很简单，应该不是问题，但我不确定处理 Facebook 场景的最佳方法。在网络端，对于 FB 身份验证，我使用了omniauth-facebook，如此处所述：[https](https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview) ://github.com/plataformatec/devise/wiki/OmniAuth:-Overview 。我认为这使用 OAuth 和 FB 作为提供者，所以最新的 RailsCast 关于门卫使用 OAuth 保护 API 的可能性很大。我还没有尝试过，但除非你打败我，否则很快就会尝试。这是链接：[http](http://railscasts.com/episodes/353-oauth-with-doorkeeper) ://railscasts.com/episodes/353-oauth-with-doorkeeper 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T11:44:44.017

这完全取决于您的身份验证系统如何工作。您需要在您的服务器上创建一个 API 来处理来自 Android 应用程序的通信并使用该 API 在两者之间传递信息。

# php - 密码盐存储

> ID：10752615
> 
> 赞同：2
> 
> 时间：2012-05-25T10:17:31.310
> 
> 标签：php, authentication, passwords, hash, salt

我想更新当前仅使用 MD5 的密码设置。

现在我想做的是使用更强大的东西（也许是 sha256），每个用户都有独特的盐。

问题是关于盐的储存。

我是否将盐存储在数据库中自己的列中？

然后哈希盐+密码，当涉及到登录时，从数据库中调用盐和密码，使其成为一个。

还是我通过使用用户名、电子邮件和时间戳来制作盐的方式，这也将为每个用户提供一个独特的盐？

我想知道，如果有人持有以盐为列的数据库，他们会知道每个用户的盐，然后他们就可以破解密码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T11:23:03.370

盐不是秘密，它可以与哈希一起存储明文。甚至不需要在数据库中有第二个字段。如果您查看 PHP 的`crypt()`函数，您可以看到，盐值将包含在哈希值本身中。

这是盐的工作，使已经存在的彩虹表无用，因为必须为一种特定的盐构建彩虹表。为每个散列使用不同的盐将防止彩虹表攻击，因为您必须为每个散列创建一个彩虹表。这就是为什么不需要对盐保密的原因。

我建议，如果你想改进你的密码哈希系统，你做对了，使用慢的哈希函数。[使用 bcrypt 的密码散列](http://www.martinstoeckli.ch/php/php.html#ssl_bcrypt)一文解释了为密码生成散列的要点。

*   每个密码生成一个盐，而不是每个用户。
*   使用随机（唯一）盐，而不是从其他参数派生的盐。
*   使用慢散列函数。

最后但同样重要的是，不要害怕正确地执行它，您的应用程序的代码可以像您当前使用 MD5 实现一样简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T12:27:26.117

忘记 MD5 或 SHA。使用 Bcrypt。(Blow Fish Crypt) 自带 PHP 5.3 及更高版本。（加密方法 2a）它更安全且处理速度更慢。

使用 Bcrypt 时，盐与哈希一起存储在同一个 feild 中。没有理由分开一个。

[http://php.net/manual/en/function.crypt.php](http://php.net/manual/en/function.crypt.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T10:23:43.293

刚刚阅读另一篇文章，有人说盐不是秘密，可以存储在数据库列中。所以这回答了我的问题

# objective-c - NSUbiquitousKeyValueStore 最大大小

> ID：10752617
> 
> 赞同：4
> 
> 时间：2012-05-25T10:17:40.313
> 
> 标签：objective-c, ios, cocoa, icloud

NSUbiquitousKeyValueStore 的最大大小是多少？

我看到了相互矛盾的报告，例如[当前的 iOS 文档说 1mb](https://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/UserDefaults/StoringPreferenceDatainiCloud/StoringPreferenceDatainiCloud.html)：

但是，如果您在 Google 上搜索，您会看到许多关于最大大小为 64kb 的引用：

*   [与 iCloud 同步偏好数据](http://useyourloaf.com/blog/2011/10/24/sync-preference-data-with-icloud.html)
*   [开始 IOS 5 应用程序开发](http://books.google.co.uk/books?id=YeTFvTeeEwAC&pg=PA289&lpg=PA289&dq=NSUbiquitousKeyValueStore+64kb)

我很确定答案是它曾经是 64kb 并且在某个时候增加了。有谁知道是否是这种情况，如果是这样，何时进行更改以及是否影响所有设备或仅影响特定 iOS 上的设备（例如 5.1 但不是 5.0？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:57:32.863

苹果说：

> 键值存储不适用于存储大量数据。它旨在存储配置数据、首选项和少量与应用程序相关的数据

这使我认为，如果您问这个问题，您可能不应该使用键值存储。

话虽如此，Apple 刚刚用更新、更高的限制[更新了他们的文档：](https://developer.apple.com/news/index.php?id=05302012a)

> 我们增加了 iCloud Key Value Store 的存储限制，以便您可以在您的应用程序中提供更好的体验。现在，每个应用的 Key Value Storage 总限制为 1 MB，单个 key 限制为 1 MB，总 key 限制为 1024。

我不确定它何时生效，但这可能解释了各种来源之间的差异。

# php - PHP 和 Javascript：欧元符号在 php 中的字符长度比 javascript 长

> ID：10752622
> 
> 赞同：0
> 
> 时间：2012-05-25T10:18:00.817
> 
> 标签：php, javascript

我的消息文本为

> 可于 2012 年 5 月 16 日 6:45 至 2012 年 5 月 26 日在科隆订购？支付 10 欧元每天

我认为欧元符号是恶棍

**检查欧元符号时：**

JavaScript 字符数 = 86 PHP 字符数 = 88

**无欧元符号检查时**

JavaScript 字符数 = 84 PHP 字符数 = 84

为什么会发生这种情况，有人可以解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:20:25.087

尝试使用`&euro;`.

此外，请尝试在通过转义函数运行字符串后输出字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:21:51.353

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T10:22:53.747

It has most probably something to do with your internal encoding, see [http://jsfiddle.net/e4phA/](http://jsfiddle.net/e4phA/) where it alerts the string length correctly as 3 for the string '10€'.

# rvm - 如何使用 Puppet 在 Vagrant (Ubuntu 12.04 LTS) 上安装 rvm？

> ID：10752631
> 
> 赞同：1
> 
> 时间：2012-05-25T10:18:39.017
> 
> 标签：rvm, puppet, vagrant, ubuntu-12.04

我有一个运行 Ubuntu 12.04 LTS（Precise Pangolin）的 Vagrant base box。我可以将 box ( `vagrant up`) 和 ssh ( `vagrant ssh`) 放入其中。

下一步：我想使用 Puppet 来配置 RVM 和 Ruby 1.9.3-p125。

我使用了来自以下网址的 puppet-rvm 模块：[https ://github.com/blt04/puppet-rvm](https://github.com/blt04/puppet-rvm)

我按照说明将以下内容添加到我的 Puppet 清单中：

```
include rvm
rvm_system_ruby {
  'ruby-1.9.3-p125':
    ensure => present,
    default_use => true;
} 
```

然后我销毁了我的 VM ( `vagrant destroy`) 并重新创建了它 ( `vagrant up`) 期望 Puppet 安装 RVM。

但是当我 ssh 进入虚拟机时，我没有 rvm :(

有什么想法我可能做错了吗？有什么我可以提供的信息可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T01:56:34.640

如果您使用的是[puppet-rvm 模块](https://github.com/blt04/puppet-rvm)，那么您可能会遇到问题，`default_use => true`因为您刚刚安装的 Ruby 可能无法使用 puppet。puppet-rvm 模块安装在系统范围内，因此您需要确保 root 的 Ruby 是系统 Ruby 以避免损坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T16:47:32.827

对于 vagrant，您可以构建一个已安装 RVM 的盒子，只需使用 veewee 和此定义： [https ://github.com/mpapis/rvm-test-vagrant/tree/master/definitions/rvm-ubuntu-12.04-amd64](https://github.com/mpapis/rvm-test-vagrant/tree/master/definitions/rvm-ubuntu-12.04-amd64)

我昨天正在建造它，一切都很好。

# linux - $FWDIR 不指向任何地方

> ID：10752633
> 
> 赞同：0
> 
> 时间：2012-05-25T10:18:54.320
> 
> 标签：linux, firewall, checkpoint

我已经安装了 Check Point R75.20 splat。可以使用 OPSEC LEA 直接访问 Check Point 防火墙日志。为此，我需要建立 LEA 连接。

现在要设置 LEA 连接，我需要执行以下步骤：

1) 在安装 Check Point 管理服务器的计算机上的 FWDIR\conf 目录中，编辑 fwopsec.conf 文件以包含以下行：lea_server port 18184

2)...

**我的问题**是我的**FWDIR**没有**指向任何地方**。此外，如果我做一个，

```
find / -name "fwopsec.conf" 
```

我没有得到任何结果。在寻找问题时，我发现，

```
FWDIR=/opt/cpfw1-r55 
```

但我在我的检查点平台中没有看到任何目录

我被困住了。我错过了什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T07:13:20.490

如果您在定位`object.c`、`object_5_o.c`和规则库文件时遇到任何问题，那么您可以尝试另一个必须在专家模式下运行的命令：

```
cd /opt/CPsuite-R65/fw1/conf 
```

然后输入

```
ls -l 
```

那么您将能够找到所有这些文件，我之前在虚拟机上安装的防火墙中也遇到了这个问题。

# android - NFC 服务具体何时停用？

> ID：10752636
> 
> 赞同：4
> 
> 时间：2012-05-25T10:18:56.710
> 
> 标签：android, locking, screen, nfc, unlock

我想知道 NFC 服务何时启动和停止。android 4.0.3 的源代码似乎表明轮询依赖于单个常量（位于 NfcService.java 中）

```
/** minimum screen state that enables NFC polling (discovery) */
static final int POLLING_MODE = SCREEN_STATE_ON_UNLOCKED; 
```

我将此解释为“屏幕灯亮，因此 nfc 服务处于活动状态”。但是当屏幕被锁定时，即使屏幕亮着，NFC 标签也不会被识别。

所以我很好奇：当锁屏出现时，NFC 服务是否已经停用，还是仍在运行但未处理标签？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T13:06:46.147

实际上，我不认为 N​​FC 服务已停用。当屏幕值较低时，`SCREEN_STATE_ON_UNLOCKED`设备会停止询问 NFC 标签。您可以从这段代码中看到这一点：

```
 // configure NFC-C polling
    if (mScreenState >= POLLING_MODE) {
        if (force || !mNfcPollingEnabled) {
            Log.d(TAG, "NFC-C ON");
            mNfcPollingEnabled = true;
            mDeviceHost.enableDiscovery();
        }
    } else {
        if (force || mNfcPollingEnabled) {
            Log.d(TAG, "NFC-C OFF");
            mNfcPollingEnabled = false;
            mDeviceHost.disableDiscovery();
        }
    } 
```

但是 NFC-EE 路由已启用，但屏幕状态更高`SCREEN_STATE_ON_LOCKED`：

```
 // configure NFC-EE routing
    if (mScreenState >= SCREEN_STATE_ON_LOCKED &&
            mEeRoutingState == ROUTE_ON_WHEN_SCREEN_ON) {
        if (force || !mNfceeRouteEnabled) {
            Log.d(TAG, "NFC-EE ON");
            mNfceeRouteEnabled = true;
            mDeviceHost.doSelectSecureElement();
        }
    } else {
        if (force ||  mNfceeRouteEnabled) {
            Log.d(TAG, "NFC-EE OFF");
            mNfceeRouteEnabled = false;
            mDeviceHost.doDeselectSecureElement();
        }
    } 
```

服务本身在此类的其他部分中启动和停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T14:56:28.277

见相关[http://forum.xda-developers.com/showthread.php?t=1712024&page=14](http://forum.xda-developers.com/showthread.php?t=1712024&page=14)

# ant - 您如何将嵌套工件元素用于 ivy 发布 ant 任务

> ID：10752637
> 
> 赞同：1
> 
> 时间：2012-05-25T10:19:06.583
> 
> 标签：ant, build, ivy

谁能给我一个提示，告诉我如何使用 ivy ant 任务使用嵌套工件（和工件）元素来发布模块。不幸的是，官方文档没有指定如何使用这些属性。 [http://ant.apache.org/ivy/history/latest-milestone/use/publish.html](http://ant.apache.org/ivy/history/latest-milestone/use/publish.html)

也许有一些我找不到的文档或示例？我知道 ivy.xml 文件中的工件元素。这不是这个问题的意义所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T01:06:46.910

这个问题的答案有帮助吗？

[使用常春藤的问题：发布任务](https://stackoverflow.com/questions/8304562/issues-using-ivypublish-task/8317109#8317109)

发布任务中嵌套的“工件”元素用于标识您指定要由模块发布的工件的位置。

因此，例如，假设您的模块发布了两个文件：

```
<ivy-module version="2.0">
    <info organisation="someorganisation" module="myapp"/>

    <publications>
        <artifact name="myapp" type="jar"/>
        <artifact name="license" type="txt"/>
    </publications>
    .. 
```

您的发布任务可能需要从构建工作区中的两个不同位置获取这些文件：

```
 <ivy:publish resolver="${publish.resolver}" pubrevision="${publish.revision}" status="${publish.status}">
        <artifacts pattern="${build.dir}/[artifact].[ext]"/>
        <artifacts pattern="${src.dir}/licenses/[organisation]/[artifact].[ext]"/>
    </ivy:publish> 
```

# c++ - 无法在所需目录中创建临时文件

> ID：10752639
> 
> 赞同：0
> 
> 时间：2012-05-25T10:19:18.707
> 
> 标签：c++, macos, file-permissions

我需要在 MAC 上的指定文件夹中创建一个临时文件。但是，我能够在正确的位置创建文件夹，但无法在其中创建文件。我收到一条错误消息，说它没有创建文件的权限，尽管我在创建文件夹时已通过 777 作为文件权限。请在下面找到我的代码。我想提一下这个问题只在MAC上。在 Windows 上，它按预期执行。请让我知道问题所在。

```
 wxString curDir = SeeWorkingDir() + wxT("Temp\\"); //Gets the working directory

    if(!wxFileName::DirExists(curDir)) //Checks if directory exists
    wxFileName::Mkdir( curDir, 0777, wxPATH_MKDIR_FULL ); // creates the directory

    wxString jobcopy = wxFileName::CreateTempFileName(curDir); // should create temp file 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:22:17.943

我完全不知道你的 " `SeeWorkingDir()`" 函数返回了什么，但如果它返回应用程序目录，那么你不应该在那里写任何东西。

为什么不将 " " 替换为 Macintosh 上*真正*可写`SeeWorkingDir()`的某个位置的路径，例如 " " 目录？*`/tmp/`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T12:49:14.703

您还没有解释您的函数 SeeWorkingDir() 的作用。

也许您应该使用`wxFileName::GetTempDir`来指定存储文件的目录。这应该与平台无关。

或者，在您的调用 wxFileName::CreateTempFileName(curDir) 中，您可以指定`fileTemp`参数以直接打开文件。

请参阅文档： [wxWidgets 2.8.12 - wxFileName](http://docs.wxwidgets.org/2.8/wx_wxfilename.html)*

# gwt - 在 playn 项目中使用 Window.alert()

> ID：10752646
> 
> 赞同：0
> 
> 时间：2012-05-25T10:20:00.797
> 
> 标签：gwt, client-side, playn

只是为了测试，我尝试在我的 playn 项目中使用 com.google.gwt.user.client.Window 包中的 Window.alert() 函数。但是当我尝试运行程序时，我收到如下错误消息：

“原因：java.lang.UnsupportedOperationException：错误：GWT.create() 只能在客户端代码中使用！例如，不能从服务器代码中调用它。如果您正在运行单元测试，请检查您的测试用例是否扩展GWTTestCase 并且 GWT.create() 不是从初始化程序或构造函数中调用的。”

我真的不明白。在我的 playn 项目中，只有客户端代码在使用。所以有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:01:14.423

GWT.create() 目前在 gwt trunk 中的纯 java 中受支持。我自己在一个 playn 项目中使用它{尽管有一点小故障：[强制 GWT 编译器停止修剪无效的 CompilationUnits](https://stackoverflow.com/questions/10836760/force-gwt-compiler-to-stop-pruning-invalid-compilationunits) }。

如果您下载并构建主干，您将能够通过为导致错误的任何类注册 ClassInstantiators 来规避 GWT.create() 问题。在这种情况下，Window 类有一个 WindowImpl 的静态实例，当 jvm 遇到 Window 类时会抛出此错误。如果为 WindowImpl 注册 ClassInstantiator，则不会发生这种情况。不幸的是，Window.alert 方法直接使用原生 js，所以它可能仍然会轰炸你。

如果您不知道如何/想要从主干构建 gwt，请给我发送电子邮件，我可以将罐子发送给您。如果您仍然对 .alert() 作为本机方法有疑问，请告诉我，我将创建一个自定义主干构建，将 .alert() 延迟到 WindowImpl 单例中，这样您就可以让它做一些有意义的事情，比如弹出一个警报消息；-}

如果您喜欢冒险，请下载 gwt trunk，进入 Window，将静态警报方法复制到 WindowImpl 上的实例级方法中，将原始方法委托给 WindowImpl，然后在您的 java 代码中调用 ServerGwtBridge.register(WindowImpl.class , new ClassInstantiator(){...})，并返回你想要的任何实现 .alert() 在 java 和 android 中。

# mysql - MySQL：案例评估不正确。我哪里做错了？

> ID：10752652
> 
> 赞同：0
> 
> 时间：2012-05-25T10:20:16.867
> 
> 标签：mysql, search-engine

这是我为搜索关键字“sector 2”的自动完成功能而执行的查询

```
SELECT display_text,token, relevancy , 
(CASE token 
    WHEN token = 'sector' THEN relevancy*1000 
    WHEN token = '2' THEN relevancy*1000 
    ELSE relevancy / 100 
END) as real_relevancy 
FROM location_search WHERE display_text LIKE '%sector%' AND display_text LIKE '%2%' 
ORDER BY real_relevancy DESC 
```

该表有五个字段：id、area_id、display_text、token 和 relevancy。显示文本是我想在自动完成搜索结果中显示的内容。并且 token 包含由空格分隔的显示文本。

就像显示文本“Sector 2 Noida”一样，表格中将有 3 个条目

```
id    |  area_id | display_text    | token  | relevancy
6     |   234    | Sector 2 Noida  | sector | 441
7     |   234    | Sector 2 Noida  | 2      | 986
8     |   234    | sector 2 Noida  | noida  | 660 
```

对于所有其他显示区域也是如此。查询我在这里尝试做什么非常清楚，那就是在顶部获得更多相关结果。

问题是第一种情况评估为真，并且在令牌既不是扇区也不是 2 的随机情况下被执行。

就像结果集中的第一个结果是

```
display_text                    |   token   |  relevancy   |  real_relevancy
Sector 29 - Powergrid , Gurgaon | Powergrid |  789         |  789000 
```

为什么会这样。我的查询哪里出错了？可能我犯了一些愚蠢的错误。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:43:16.747

我尝试了一些事情并将案例条件从 token = 'sector' 修改为 'sector' ......它现在可以工作了。

所以新的查询看起来像这样：

```
SELECT display_text,token, relevancy , 
(CASE token 
    WHEN 'sector' THEN relevancy*1000 
    WHEN '2' THEN relevancy*1000 
    ELSE relevancy / 100 
END) as real_relevancy 
FROM location_search WHERE display_text LIKE '%sector%' AND display_text LIKE '%2%' 
ORDER BY real_relevancy DESC 
```

真是愚蠢的错误。

# jdbc - DD异常，清理数据库资源：有干净的解决方案吗？

> ID：10752654
> 
> 赞同：6
> 
> 时间：2012-05-25T10:20:19.877
> 
> 标签：jdbc, findbugs, pmd, dataflow

这是我们都编写的一段代码：

```
    public CustomerTO getCustomerByCustDel(final String cust, final int del)
            抛出 SQLException {
        最终 PreparedStatement 查询 = getFetchByCustDel();
        结果集记录=空；
        尝试 {
            query.setString(1, cust);
            query.setInt(2, del);
            记录 = query.executeQuery();

            返回 this.getCustomer(records);
        } 最后 {
            如果（记录！= null）{
                记录.close();
            }
            查询.close();
        }
    }

```

如果省略“finally”块，那么数据库资源就会悬空，这显然是一个潜在问题。但是，如果您按照我在此处所做的操作 - 在 **try** 块外将 ResultSet 设置为 null，然后在块内将其设置为所需的值 - PMD 会报告“DD 异常”。在文档中，DD 异常描述如下：

> DataflowAnomalyAnalysis：数据流分析跟踪本地定义、未定义和对数据流不同路径上变量的引用。从这些信息中可以发现各种问题。[...] DD - 异常：重新定义了最近定义的变量。这是不祥之兆，但不一定是错误。

*如果您在块外声明 ResultSet 而不设置值，则在执行if (records != null)*测试时，您会正确地得到“变量可能尚未初始化”错误。

现在，在我看来，我在这里的使用不是错误。但是有没有一种干净地重写不会触发 PMD 警告的方法？我不是特别想禁用 PMD 的 DataFlowAnomalyAnalysis 规则，因为识别 UR 和 DU 异常实际上很有用；但是这些 DD 异常让我怀疑我可以做得更好——而且，如果没有更好的方法来做到这一点，它们就会变得混乱（我也许应该看看我是否可以重写 PMD 规则）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T23:26:36.413

我认为这更清楚：

```
PreparedStatement query = getFetchByCustDel();
try {
    query.setString(1, cust);
    query.setInt(2, del);
    ResultSet records = query.executeQuery();
    try {
        return this.getCustomer(records);
    } finally {
        records.close();
    }
} finally {
    query.close();
} 
```

此外，在您的版本中，如果 records.close() 抛出异常，查询不会关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-25T06:56:43.440

我认为 DD 异常注释更多的是错误，而不是功能
另外，您释放资源的方式有点不完整，例如

```
PreparedStatement pstmt = null;
Statement st = null; 

try {
    ...
} catch (final Exception e) {
    ...
} finally {
    try{
        if (pstmt != null) {
            pstmt.close();
        }
    } catch (final Exception e) {
        e.printStackTrace(System.err);
    } finally {
        try {
            if (st != null) {
                st.close();
            }
        } catch (final Exception e) {
            e.printStackTrace(System.err);
        }
    }
} 
```

而且这又不对了，因为你应该关闭这样的资源

```
PreparedStatement pstmt = null;
Throwable th = null;

try {
    ...
} catch (final Throwable e) {
    <something here>
    th = e;
    throw e;
} finally {
    if (th == null) {
        pstmt.close();
    } else {
        try {
            if (pstmt != null) {
                pstmt.close();
            }
        } catch (Throwable u) {
        }
    }
} 
```

# string - 如何将数字字符串转换为数字（十进制）和数字字符串

> ID：10752659
> 
> 赞同：16
> 
> 时间：2012-05-25T10:20:34.777
> 
> 标签：string, clojure, decimal

如何编写一个函数来将十进制数字符串转换为十进制数并将十进制数转换为字符串？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-25T15:13:03.713

有非常方便的 clojure 函数可以将任何内容转换为字符串，以及将类似数字的内容转换为 BigDecimal：

```
user=> (bigdec "1234")
1234M
user=> (str 1234M)
"1234" 
```

我想这是clojure规范的方式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T10:50:00.830

此示例将数字字符串转换为数字。

```
(defn String->Number [str]
  (let [n (read-string str)]
       (if (number? n) n nil))) 
```

样本：

```
user=> (String->Number "4.5")
4.5
user=> (str 4.5)
"4.5"
user=> (String->Number "abc")
nil 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T13:28:47.600

请注意，这`read-string`会给您一个浮点数，而不是小数：

```
user=> (.getClass (read-string "1.01"))
java.lang.Double 
```

你得到的数字打印出来就像你想要的一样，但事实并非如此。

```
user=> (new BigDecimal (read-string "1.01"))
1.0100000000000000088817841970012523233890533447265625M 
```

您可以`java.math.BigDecimal`改用并避免浮点并发症：

```
user=> (new BigDecimal "1.01")
1.01M
user=> (.toString (new BigDecimal "1.01"))
"1.01" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T13:10:22.367

根据您的问题，您似乎需要一个切换功能，即可以读取数字并转换为字符串，还可以读取字符串并返回数字，如果字符串包含数字，例如 123.0 或“123.0” .

这是一个例子：

```
(defn cvt-str-num [val]
    (if (try 
            (number? val)
            (catch Exception e (str "Invalid number: " (.getMessage e))))
        (str val)
        (let [n-val (read-string val)]
            (if (number? n-val)
                n-val
                nil)))) 
```

我看不到绕过 n-val 的 let 绑定的方法，因为需要一个临时位置来存储读取字符串返回值，因此可以将其作为数字进行测试。如果是数字则返回；否则返回零。

# connection - WSO2 BAM - ESB 同步

> ID：10752662
> 
> 赞同：0
> 
> 时间：2012-05-25T10:20:44.587
> 
> 标签：connection, wso2, wso2esb, esb, wso2bam

你好 Stackoverflow 和 WSO2 社区，

我要感谢您从我的架构建设之初就给予的持续支持。我不太擅长创建 SOA 解决方案，您的支持一直、现在和将来都非常重要。

在尝试解决 ESB 问题时，我尝试按照我在`wso2bam-1.3.2\samples\eventing-mode-mediation-monitoring`.

我的步骤是：

*   在 WSO2 ESB 中添加存储库；
*   添加“BAM 中介统计数据发布器”功能；
*   启用对简单服务的统计；
*   在 WSO2 BAM 中将 ESB 服务器添加为：`https://<ip-address>:9443/carbon/`或`https://<ip-address>:9443/carbon/services`，
    *   数据收集方法：赛事
    *   数据类型：调解；
*   从外部客户端（Netbeans java 应用程序）运行代理服务 - 请注意，统计信息已报告到 ESB 代理服务附近的图形中
*   检查 BAM - 但是，例如，服务调用小工具说：

> 未找到服务器的服务`https://<ip-address>:9443`

我推断出了点问题。

如果你能再次帮助我，我将开始考虑一种方法来给你一些有用的反馈！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T06:10:39.940

似乎 BAM 1.3.2 似乎与 ESB 有问题。你可以试试[BAM 1.3.0](http://dist.wso2.org/downloads/bam/1.3.0/wso2bam-1.3.0.zip)吗？它应该可以工作。

# hibernate - Primefaces 在另一个页面上更新组件

> ID：10752663
> 
> 赞同：0
> 
> 时间：2012-05-25T10:21:01.593
> 
> 标签：hibernate, jsf, primefaces

我向数据库添加了一个值，并且当前页面的组件通过 UPDATE="client_id_of_the_component" 成功更新现在，我想更新另一个页面上的某些组件以进行更新。就像，我有国家数据库表。现在在另一个页面上，我正在使用下拉列表中的所有国家/地区。现在，当有人添加一个新国家/地区时，我希望更新 primefaces 的 p:selectonemenu （在另一页上）。

怎么做 ？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:28:13.600

您可以使用 PrimeFaces Poll 组件每隔 X 秒执行一次 ajax 请求，以检查应应用于下拉列表的更改。

# jquery - 使用 JQuery 隐藏选定的 TR

> ID：10752667
> 
> 赞同：0
> 
> 时间：2012-05-25T10:21:10.157
> 
> 标签：jquery, mysql, ajax

我有下表，其中每一行都有一个唯一的 ID。现在我想，如果我单击删除链接，行 ID 将传递给 PHP 文件，从 MySQL 数据库中删除记录，然后选定的行将用 JQuery 魔法隐藏。

```
<table id="projects_rec">
  <tbody>
    <tr id="MjY=">
      <td>Dany</td>
      <td><a onClick="remove('MjY=')" class="actions">Remove</a></td>
    </tr>
    <tr id="MjU=">
      <td>King</td>
      <td><a onClick="remove('MjU=')" class="actions">Remove</a></td>
    </tr>
    <tr id="MjQ=">
      <td>Test 2</td>
      <td><a onClick="remove('MjQ=')" class="actions">Remove</a></td>
    </tr>   
  </tbody>
</table> 
```

我写

```
function remove(mid){
    document.getElementById(mid).style.display='none';
} 
```

但是如何将 ID 传递给 PHP 文件，然后以 SLOW 效果隐藏 TR？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:28:22.040

您可以使用 jquery 通过以下方式隐藏 ID：

`$('#'+id).hide('slow');`

假设您的 javascript 函数 remove 看起来与此类似。

```
remove(id)
{
  $.ajax({
    url: url here,
    type: "POST",
    data: {id : id },
    success: function(data)
    {
        var row_id = id.toString().replace(/=/g, "\\=");
        $('#'+row_id).hide('slow');    
    },
    error: function (xhr, textStatus, errorThrown)
    {
        alert("Error");
    }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:27:49.373

```
<tr id="MjQ=">
  <td>Test 2</td>
  <td><a onClick="remove('MjQ=',this)" class="actions">Remove</a></td>
</tr> 
```

在`remove`函数中

```
function remove(id,$this){
 //do the php stuff
 $.post('remove.php',{id:id},function(){
   $("#"+id).hide();
 });     
} 
```

在 php 端你可以得到 id 作为

```
$id=$_REQUEST['id']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T10:34:22.023

**工作演示** [http://jsfiddle.net/feake/](http://jsfiddle.net/feake/)

您需要转义`=`id 中的字符，在示例演示中，我将其替换为 escape`\\=`并且 Bingo 它可以工作。

这将帮助你！:)

**代码**

```
function remove(row_id){
    var foo = row_id.toString().replace(/=/g, "\\=");

    $("#"+foo).css('display','none');

  }​ 
```

# java - java中的日期时间

> ID：10752668
> 
> 赞同：10
> 
> 时间：2012-05-25T10:21:10.170
> 
> 标签：java, jdbc

我有一个 JDBC 当前**日期和时间**插入 Mysql 数据库。

它将当前日期和固定时间提交到 Mysql 日期类型字段中`2012/05/25 00:00:00`。日期部分工作得很好，但时间没有显示任何价值。

我使用以下代码插入值：

```
java.util.Date myDate = new java.util.Date();
java.sql.Date sqlDate = new java.sql.Date(myDate.getTime());
PreparedStatement PStmt = con.prepareStatement(Sql query);
PStmt.setDate(1,sqlDate); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-25T10:37:37.887

使用`java.sql.Timestamp`代替`java.util.Date`

例如，如果您`PreparedStatement`用于处理插入，则可以将日期传递为；

```
java.util.Date date = new Date();
pst.setTimestamp(columIndex, new java.sql.Timestamp(date.getTime())); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T10:24:14.133

我认为您需要将时间戳作为 mysql 中的列类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T10:26:07.537

`java.util.Date`我建议注意和之间的区别`java.sql.Date`

[java.util.Date 与 java.sql.Date](https://stackoverflow.com/questions/2305973/java-util-date-vs-java-sql-date)

**编辑**还确保您在数据库中具有正确的数据类型（DATE、DATETIME 或 TIMESTAMP）

[http://dev.mysql.com/doc/refman/5.1/en/datetime.html](http://dev.mysql.com/doc/refman/5.1/en/datetime.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-25T19:57:30.533

虽然是旧帖子，但答案很简单，取决于您的要求 - 根据您的要求使用 DATETIME 数据类型并使用以下

```
java.util.Date date = new Date();
pst.setTimestamp(columIndex, new java.sql.Timestamp(date.getTime()).getTime()); 
```

让我们从数据库和jdbc这两个方面来看看推理。

从数据库中的数据类型开始，选择合适的一种。完全适合您的情况的一个是 DATETIME，因为您想要日期和小时/分钟/秒。DATETIME 类型用于存储挂钟时间，而 TIMESTAMP 用于固定时间点（纪元后几毫秒）。两者在 MySQL 内部的存储方式也有所不同。

现在，当您来到 JDBC 端时，您拥有 Date（仅日期部分）、Timestamp（日期和时间）和 Time（仅时间）的 API 方法。这就是 JDBC 必须提供的全部内容。所以现在，适合您需要的 API 是 setTimestamp

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T10:34:12.867

1）`java.util.Date`在你的java类中使用。

2）`TIMESTAMP`在mysql中设置数据类型。

```
Date CreatedDate= new Date(System.currentTimeMillis()); 
```

对于 PreparedStatement：可能是这样的：

```
PreparedStatement PStmt = con.prepareStatement(Sql query);
PStmt.setDate(1,CreatedDate); 
```

# java - SwingUtilities.invokeAndWait 不等待？

> ID：10752672
> 
> 赞同：2
> 
> 时间：2012-05-25T10:21:28.473
> 
> 标签：java, multithreading, macos, swing

以下代码工作正常

```
abstract class FunctionRunnable<V> implements Runnable {
  protected abstract V calculate();
  private V result;
  private Throwable thr;

  public synchronized final void run() {
    try {
      result = calculate();
    }
    catch (Throwable thr) {
      this.thr = thr;
    }
  }

  public synchronized final V getResult() {
    if (thr != null) {
      throw new RuntimeException(thr);
    }
    return result;
  }
}

...
final FunctionRunnable<Boolean> runnable = new FunctionRunnable<Boolean>() {
  public Boolean calculate() {
    return doCalculation();
  }

  private boolean doCalculation() {
    ...
  }
});
SwingUtilities.invokeAndWait(runnable);
final Boolean resultObj = runnable.getResult();
final boolean result = resultObj.booleanValue(); 
```

直到 Apple 发布 1.6.0_31，我们应用程序的用户*有时*会在最后一行获得 NPE。

您是否在代码中看到错误，或者其他人是否发现此特定 Java 更新存在类似问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T10:31:05.327

我的SSCCE：

```
public abstract class FunctionRunnable<V> implements Runnable {
  private V result;
  private Throwable thr;

  protected abstract V calculate();

  public synchronized final void run() {
    try { result = calculate(); } catch (Throwable thr) { this.thr = thr; }
  }

  public synchronized final V getResult() {
    if (thr != null) throw new RuntimeException(thr);
    return result;
  }

  public static void main(String[] args) throws Exception {
    final FunctionRunnable<Boolean> runnable = new FunctionRunnable<Boolean>() {
      public Boolean calculate() { return doCalculation(); }
      private boolean doCalculation() {
        try { Thread.sleep(2000); } catch (InterruptedException e) {}
        return false;
      }};
    SwingUtilities.invokeAndWait(runnable);
    System.out.println(runnable.getResult().booleanValue());
  }
} 
```

我的Java版本：

```
$java -version
java version "1.6.0_31"
Java(TM) SE Runtime Environment (build 1.6.0_31-b04-415-11M3635)
Java HotSpot(TM) 64-Bit Server VM (build 20.6-b01-415, mixed mode) 
```

启动，运行 2 秒，打印`false`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T23:27:42.653

如果您查看 EventQueue.invokeAndWait 的实现，您会发现它没有正确处理虚假唤醒。它调用 lock.wait() 然后不检查 runnable 是否已经真正完成执行——这意味着 invokeAndWait 可以在你的 runnable 完成执行之前返回！

出于某种原因，在 mac os 的更新 31 中，虚假唤醒已经开始以合理的频率发生，暴露了 EventQueue 中这个长期存在的错误。我不确定发生了什么变化，它不会发生在任何其他版本的 Java 中。

我们通过实现我们自己的 invokeAndWait 方法来解决这个问题，该方法使用一个简单的布尔检查来检查可运行对象的完成情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T11:21:42.090

我有时会得到 NullPonterExeption.... 很奇怪

Java 版本“1.6.0_31”Java(TM) SE 运行时环境（构建 1.6.0_31-b04-415-11M3635）Java HotSpot(TM) 客户端 VM（构建 20.6-b01-415，混合模式）

# performance - 优化扫雷风格游戏 Silverlight 的性能

> ID：10752673
> 
> 赞同：6
> 
> 时间：2012-05-25T10:21:32.403
> 
> 标签：performance, silverlight, bezier

我正在为 Silverlight 中的游戏设计一种扫雷布局。目前，我在`square`控件上使用了用户`Canvas`控件。有分配给它的属性。我还想在稍后阶段添加一个功能。它是关于使用贝塞尔曲线弯曲并使用 x,y 坐标在曲线上绘制这些正方形，而不是循环。然后我想在 XML 文件中发送正方形的 x,y 位置。

我的问题是，在内存消耗最少、快速高效的性能以及易于实施方面，我应该使用哪种方式才是最佳优化组合。如果各位高手有其他想法，请告诉我。提前致谢。！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T06:46:41.640

好吧，这些天来，我自己整理了答案。我继续通过我的`Square`用户控件并在布局中使用它。

关于绘制 x/y 位置，我使用了这个：

```
Point point = myElement.TransformToVisual(App.Current.RootVisual as FrameworkElement)).Transform(new Point(0, 0)); 
```

保存 XML 文件时出现故障，因为 silverlight 4 没有为浏览器内应用程序提供提升的权限。但后来我在我的保存按钮点击事件中使用了这个：

```
 SaveFileDialog dlgSave = new SaveFileDialog();
        dlgSave.DefaultExt = "xml";
        dlgSave.Filter = "XML Files (XML)|*.xml;";
        dlgSave.FilterIndex = 1;
        strXML = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + myXML.ToString();//myXML is the XDocument I created globally and saved data in it
        try
        {
            bool check = (bool)dlgSave.ShowDialog();
            if (check)
            {
                using (Stream stream = dlgSave.OpenFile())
                {
                    StreamWriter sw = new StreamWriter(stream, System.Text.Encoding.UTF8);
                    sw.Write(strXML);
                    sw.Close();
                    stream.Close();
                }
                MessageBox.Show("XML Saved successfully");
            }
            catch (SecurityException)
            {
                MessageBox.Show("There seems to be an issue with saving XML file on the disk, please try again...", "Something's not right", MessageBoxButton.OK);
            }
            catch (UnauthorizedAccessException)
            {
                MessageBox.Show("Saving here requires authorised permissions", "Access Denied", MessageBoxButton.OK);
            } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T15:47:45.747

如果您可以将所有内容绘制为形状和图像（即矢量图形），您将能够利用图形元素的硬件加速。此外，如果您不将正方形定义为用户控件，您将获得更好的性能，您应该在代码中将它们动态创建为包含其他形状的形状，然后根据它们的位置链接到形状的对象模型（例如字典方块；字典 squareElements）。

在内存消耗和文件访问方面，您应该将正方形的 x,y 位置作为点结构保留在内存中，并仅在需要时（即当玩家离开游戏时）序列化为文件（XML 很好）。

# c# - 转换表达式 >> 到表达式 >

> ID：10752674
> 
> 赞同：0
> 
> 时间：2012-05-25T10:21:34.247
> 
> 标签：c#, .net, generics, expression, enumerable

我有一些方法：

```
public void Foo(Expression<Func<TModel, IEnumerable>> expression) {
  // foo
} 
```

我有变量：

```
Expression<Func<TModel, IList<TItem>>> expression; 
```

我如何将变量传递给`Foo`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T10:30:34.363

您必须转换您的表达式变量：

```
var exp = Expression.Lambda<Func<TModel, IEnumerable>>(expression.Body, expression.Parameters);
Foo(exp); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T10:45:37.493

用这个：

```
 public Expression<Func<TModel, IEnumerable>> ConvertExpression<TModel, TItem>(Expression<Func<TModel, IList<TItem>>> expression)
    {
        return (Expression<Func<TModel, IEnumerable>>)Expression
            .Lambda(Expression.Convert(expression.Body, typeof(IEnumerable)), expression.Parameters);
    } 
```

# c++ - Benefits of using fixed-point arithmetic in C++ for devices without FPU

> ID：10752677
> 
> 赞同：3
> 
> 时间：2012-05-25T10:21:58.160
> 
> 标签：c++, optimization, arm, fixed-point

I would like to optimize my C++ code for an ARM device, which lacks a floating point unit. Most of my functions use floats, and I am considering changing them to fixed-point.

Are there real benefits in the case of ARM devices, or are compilers smart enough to do this themselves?

For example, would this be more efficient on an ARM device

```
//unsigned char const* input
unsigned int a, b;
a= *input++ << 12; 
b= *input++ << 12; 
a*=1024;    //0.25 shifted 12 bits
b*=1024;    //0.25 shifted 12 bits
*output++ = (a+b) >> 24; 
```

than doing

```
float a,b;
a= *input++;
b= *input++;
a=a/4;
b=a/4;
*output++ = a+b; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T11:15:37.980

我在 gp2x 手持设备上做了一些编码，它有一个 200Mhz 的 ARM 处理器。我正在做 3D 图形，并且使用浮点数进行数学运算肯定会太慢。

即使仅对每个顶点计算使用浮点数学，性能也比使用定点慢得多。这是编译器使用浮点仿真库的“soft-fp”。当让内核处理浮点仿真时，性能更加糟糕。

我开发了一个 C++[定点](http://www.trenki.net/content/view/17/37/)库，它提供了一个带有重载运算符的类，人们可以使用它来代替浮点数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T11:28:56.130

不，编译器肯定不会将浮点数的操作转换为定点，因为语义有很大不同。浮点数具有更大的范围，它们支持 NaN 和无穷大，并且舍入行为完全不同。

因此，如果您的目标处理器没有 FPU，您肯定会看到使用定点的巨大好处（如果这些计算占您运行时间的很大一部分）。不过，您必须处理与定点相关的所有内务管理。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-25T10:51:02.903

我不能专门为 ARM 代码说话，但模拟浮点并不便宜。有前导 1 检测、动态移位、舍入和特殊情况处理（NaN、inf 等）。这与您在那里的定点代码完全不同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-25T11:56:31.947

Fixed point is typically more efficient in all cases where the floating point doesn't actually float, even on devices with FPUs. For, example if you are using long integers to represent a space to the nearest millimetre. Savings are typically realised in computational speed, space used where you'd need a double rather than a float to get the same millimetre range as you'd get out of a long, and output where you can avoid functions like sprintf etc...

So yes, fixed point does make sense for many contexts.

# html - How to stop elements moving around

> ID：10752678
> 
> 赞同：0
> 
> 时间：2012-05-25T10:22:07.597
> 
> 标签：html, css

I have a relativly straightforward setup in that I have a form with a label next to a text box. I also have an image that is hidden unless a validation check is failed. This is what it looks like before the validation check:

![enter image description here](../Images/61ac9f129f9e2bae704f5e918eff2325.png)

Here is what it looks like if the validation check is failed:

![enter image description here](../Images/dee3747738bed366159e7eefa83c5a35.png)

As you can see in the first image the label and text box are nicely aligned. However, in the second one the text box appears to get pushed down by around 10px.

This is where the problem lies. I have tried a whole host of fixes to sort this issue out but I just can get everything to stay where it is (and be in line).

Here is the HTML code:

```
<ol class="forms">
    <li>
        <label for="Name">Name*</label>
        <input type="text" name="name" id="Name" />
        <img src="/Graphics/Other/Name-Alert.png" class="validateImage" id="Name-Image-Validation">
    </li>
...
... 
```

Here is the corresponding CSS code:

```
form ol { list-style-type:none; }

form    { text-align:left; margin:0px;  }

label   { 
        float: left; width: 85px; margin-top:5px;
        text-align:left; display:block; background:none;
        }

input   { 
        width: 250px; margin:0 0 16px 10px;
        border:1px #bbb solid; padding:5px; background:none; color:#FFF;
        }

select { margin-bottom:20px; }

.clear  { clear:both; }

.validateImage  { display:none; } 
```

Finally here is the small piece of javascript that I use to validate the form:

```
var x=document.forms["email_form"]["name"].value;
if (x==null || x=="")
{
    document.getElementById('Name-Image-Validation').style.display='inline';
    return false;
}
else
{
    document.getElementById('Name-Image-Validation').style.display='none';
} 
```

Please can someone help me fix this issue?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T10:42:36.433

这是因为默认情况下 img 标签是顶部对齐的，试试这个：

```
.validateImage  { display:none; vertical-align: middle; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:32:28.820

只是为了让你有一些可以接受的东西：

您是否尝试过添加`#Name-Image-Validation { position:relative; top:10px }`

# c++ - 安卓 ndk 和 cygwin

> ID：10752686
> 
> 赞同：1
> 
> 时间：2012-05-25T10:22:54.370
> 
> 标签：c++, c, android-ndk, cygwin

我正在尝试使用 cgywin 安装 android ndk。我已经下载了android ndk并解压缩。我也安装了cygwin。

我想提一下，我是 Windows 用户。

我不知道如何安装 androidn ndk。在 cygwin 中，这是我运行 ./build-ndk 时的错误

```
Android NDK: Could not find application project directory !
Android NDK: Please define the NDK_PROJECT_PATH variable to point to it.
/cygdrive/c/android-ndk/build/core/build-local.mk:130: *** Android NDK: Aborting                                                        .  Stop. 
```

我错过了什么？需要一些帮助。

编辑：

我通过使用 Make 和 GCC 重新编译 CYGWIN 解决了​​这个问题。其次，我使用 ANDROID=NDK 构建项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T19:00:16.523

要正确使用 Android NDK，您将需要 cygwin（除了 SDK 要求之外）：[http](http://www.cygwin.com/) : //www.cygwin.com/ Cygwin 开箱即用与最新的 Android NDK 兼容（在撰写此答案时为 r8）。

此外，还存在替代 NDK，即基于 gcc 4.6 而不是 4.4 的 Crystax NDK (http://www.crystax.net/en/android/ndk)。

# ruby-on-rails - 在 ruby 1.9.2 中拆分字符串

> ID：10752687
> 
> 赞同：0
> 
> 时间：2012-05-25T10:22:56.290
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

我有一个这样的字符串

```
JINSAL0056(  1), JINSAL0057(  1), JINSAL0041(  1), 
```

我需要将 JINSAL0056、JINSAL0057、JINSAL0041 放在 () 内的字段和数字中。我已经写了几个代码，让我知道我是否朝着正确的方向前进。

```
s = "JINSAL0056(  1), JINSAL0057(  1), JINSAL0041(  1)"
ss = s.split(",")
sss = ss.split(" ( ") 
```

怎么写分割线。请帮我把

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T10:34:48.933

您也可以将正则表达式传递给拆分：

```
foo = "JINSAL0056(  1), JINSAL0057(  1), JINSAL0041(  1),"
foo.split(/[\(\),\s]+/) 
```

结果：

```
["JINSAL0056", "1", "JINSAL0057", "1", "JINSAL0041", "1"] 
```

并将其制成哈希：

```
Hash[*foo.split(/[\(\),\s]+/)] 
```

这会给你：

```
{"JINSAL0056"=>"1", "JINSAL0057"=>"1", "JINSAL0041"=>"1"} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T10:32:25.597

我觉得你可以试试。（当然不是最好的方法。）

```
yourstring = "JINSAL0056(  1), JINSAL0057(  1), JINSAL0041(  1),"
yourstring.split(/(\w+)\(\s*(\d)\)[,\s*]/) 
```

结果将是

```
["", "JINSAL0056", "1", " ", "JINSAL0057", "1", " ", "JINSAL0041", "1"] 
```

但我建议使用 scan(//)

```
yourstring.scan(/(\w+)\(\s*(\d)\)[,\s*]/) 
```

结果将是

```
[["JINSAL0056", "1"], ["JINSAL0057", "1"], ["JINSAL0041", "1"]] 
```

要分配变量，您可以像这样循环

```
yourstring.scan(/(\w+)\(\s*(\d)\)[,\s*]/).each do |a,b|
     puts "#{a} #{b}"
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T15:33:02.377

```
s = "JINSAL0056(  1), JINSAL0057(  1), JINSAL0041(  1)"
res = s.split(', ').map{|line| line.chop.split('(  ')}
p res # [["JINSAL0056", "1"], ["JINSAL0057", "1"], ["JINSAL0041", "1"]]

res.each do |jinsal, number|
  puts "Do something with #{jinsal} and #{number}"
end 
```

# magento - 如何在 Magento 1.6.2 的客户帐户中添加自定义属性

> ID：10752695
> 
> 赞同：1
> 
> 时间：2012-05-25T10:23:23.433
> 
> 标签：magento, custom-fields

我想在管理面板的客户帐户选项卡中添加自定义属性。我正在使用 magento 1.6.2。我已经阅读了很多博客，但无法实现它，因为文件 Mage/Customer/Model/Entity/Setup.php 在 CE 1.6.2 和 CE < 1.6.0 中是不同的。所以无法找到正确的答案。如果有人做到了，请帮助我实现它。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T10:26:37.517

使用它来创建一个执行此操作的模块：

[http://silksoftware.com/magento-module-creator/](http://silksoftware.com/magento-module-creator/)

然后转到“需要添加客户属性部分”。这是不言自明的。

玩它！这是一个**非常**有用的工具。您可以看到，除了制作一个提供新客户属性的模块之外，还有更多内容。在安装新模块之前还要阅读清除缓存/编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T11:06:17.857

Magento 中 CE1.5 和 CE1.6 之间的添加客户字段没有重大变化。

用户 phtml 文件位置的主要变化。检查下面的链接，它会帮助你。

[如何为客户创建新字段](https://stackoverflow.com/questions/8426242/how-to-create-new-fields-for-customer)

# .net - 如何使用 ASP.net Google analytic api Version 3(Google.Apis.Analytics.v3.dll) 发送 Google 分析报告查询？

> ID：10752697
> 
> 赞同：2
> 
> 时间：2012-05-25T10:23:26.910
> 
> 标签：.net, google-api, google-analytics-api

我目前正在使用 asp.net Google api V3（**Google.Apis.Analytics.v3.dll**）为我的公司开发 GA 报告网络应用程序。我知道有旧版本的 .net api 和一些示例，但是当有新版本时，我不妨使用它。以下代码片段是您发送查询以使用**Google.GData.Analytics.dll**检索 GA 数据的方式。但它是旧版本。

```
AnalyticsService _service = new AnalyticsService("GoogleAnalytics");
_service.setUserCredentials("YourUsername", "YourPassword");
DataQuery dataQuery = new DataQuery(Conststr_Url);
dataQuery.Ids = "ga:xxxxxx";
dataQuery.Dimensions = "ga:date";
dataQuery.Metrics = "ga:visits";
dataQuery.GAStartDate = "2012-05-10";
dataQuery.GAEndDate = "2012-05-24";
DataFeed visits = _service.Query(dataQuery);
foreach (DataEntry entry in visits.Entries)
{
      Response.Write("Date: " + entry.Title.Text.Replace("ga:date=", "") + " Visits: " +   entry.Metrics[0].Value + "<br />");
} 
```

使用 version3，我成功地使用他们提供的 Tasks.ASP.NET.SimpleOAuth2 示例应用程序完成了 oauth2 授权部分。但是当我尝试用谷歌分析服务替换任务服务时，我就是不知道从哪里开始。我所知道的只是声明分析服务，从那时起我就没有什么可做的了:)。任何人都可以帮助我提供一些代码片段或将我引导到一个示例站点。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T10:49:51.733

在 stackoverflow 和 google 上搜索了几天后，我发现了以下内容。与以前的版本不同，您需要使用 AnalyticService 创建一个“GetRequest”对象并使用该对象获取数据以获取“GaData”结果对象。这是代码：

```
var request = _analyticsService.Data.Ga.Get(ProfileID, StartDate, EndDate, Metrics);
request.Dimensions = Dimensions;
request.Segment = Segment;
request.Sort = Sort;
request.StartIndex = StartIndex;
request.MaxResults = MaxResult;
GaData results = request.Fetch(); 
```

# javascript - 如何将参数从几个子函数传递到一个主函数

> ID：10752698
> 
> 赞同：2
> 
> 时间：2012-05-25T10:23:26.987
> 
> 标签：javascript, jquery, ajax, function, variables

我需要你的帮助来解决以下问题：

使用以下名为 AddSub# 的函数，我想将名为 string# 的变量传递给主添加函数 (AddAll)

```
function AddSub1()
{       string11 = '11';
        string12= '12';
        string13= '13';
        AddAll(string11, string12, string13);
}

function AddSub2()
{       string21 = '21';
        string22= '22';
        string23= '23';
        AddAll(string21, string22, string23);
} 
```

但如果我这样做：

```
function AddAll(string11, string12, string13, string21, string22, string23){
    document.write(string11);
    document.write(string12);
    document.write(string13);
    document.write(string21);
    document.write(string22);
    document.write(string23);
} 
```

我调用函数 AddSub1 我得到： 11 12 13 undefined undefined undefined

然后，如果我调用 AddSub2 我得到： 21 22 23 undefined undefined undefined

如何正确地将变量传递给 AddAll 函数，以便获得 11 12 13 21 22 23？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T10:24:24.117

您应该使用参数，一个类似数组的对象，对应于传递给函数的参数。

```
function AddAll(){
    var args = arguments; // arguments will give you an array 
                          // of all passed arguments to this function

    // here I keep just a reference in args, 
    // you can also use argumetns itself directly                              

    // To retrieve those arguements use this

    document.write(args[0]);
    document.write(args[1]); // ...etc

    // You can also make a loop over arguments

    for (var i = 1; i < arguments.length; i++) {
      document.write(arguments[i]);
    }
} 
```

阅读有关[**参数的更多信息**](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope/arguments)

**笔记：**

*   不要不必要地使用全局变量
*   不需要将参数传递给`AddAll()`as `Array`，只需`comma(,)`分开

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:32:26.203

我会使用@thecodeparadox 答案的修改版本

```
function AddAll(){
var args = arguments; // arguments will give you an array 

for(var i=0,j=args.length;i<j;i++)
document.write(args[i]);

} 
```

这样，您传递给函数的字符串数量无关紧要，它们都将被写入。

从你的问题看来，这个函数将有多次迭代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T10:29:07.800

你可以改变你的函数，让它接受一个字符串数组。

```
function AddAll(strings) {
    for (var i = 0; i < strings.length; i++) {
        document.write(strings[i]);
    }
}

AddAll(["hello", "world"]); 
```

或使用您的示例中的代码：

```
function AddSub2() {       
    string21 = '21';
    string22= '22';
    string23= '23';
    AddAll([string21, string22, string23]);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-25T10:29:22.290

您可以使用全局变量：

```
var string11,string12,string13,string21,string22,string23;

function AddSub1()
{       
    string11= '11';
    string12= '12';
    string13= '13';
}

function AddSub2()
{   
    string21= '21';
    string22= '22';
    string23= '23';
}

function AddAll(){
    document.write(string11);
    document.write(string12);
    document.write(string13);
    document.write(string21);
    document.write(string22);
    document.write(string23);
} 
```

然后你打电话：

```
AddSub1();
AddSub2();
AddAll(); 
```

# java - org.apache.hadoop.io.SequenceFile$Reader.init 处的 EOFException（SequenceFile.java:1508）

> ID：10752708
> 
> 赞同：3
> 
> 时间：2012-05-25T10:23:50.000
> 
> 标签：java, hadoop, mapreduce

我试图运行 Norstadt 先生在以下链接[http://www.norstad.org/matrix-multiply/index.html](http://www.norstad.org/matrix-multiply/index.html)下提出的矩阵乘法示例。我可以使用 hadoop 0.20.2 成功运行它，但我尝试使用 hadoop 1.0.3 运行它，但出现以下错误。是我的hadoop配置问题还是作者在hadoop 0.20中编写的代码中的兼容性问题。另外请指导我如何在任何一种情况下修复此错误。这是我得到的错误。

```
in thread "main" java.io.EOFException
        at java.io.DataInputStream.readFully(DataInputStream.java:180)
        at java.io.DataInputStream.readFully(DataInputStream.java:152)
        at org.apache.hadoop.io.SequenceFile$Reader.init(SequenceFile.java:1508)
        at org.apache.hadoop.io.SequenceFile$Reader.<init>(SequenceFile.java:1486)
        at org.apache.hadoop.io.SequenceFile$Reader.<init>(SequenceFile.java:1475)
        at org.apache.hadoop.io.SequenceFile$Reader.<init>(SequenceFile.java:1470)
        at TestMatrixMultiply.fillMatrix(TestMatrixMultiply.java:60)
        at TestMatrixMultiply.readMatrix(TestMatrixMultiply.java:87)
        at TestMatrixMultiply.checkAnswer(TestMatrixMultiply.java:112)
        at TestMatrixMultiply.runOneTest(TestMatrixMultiply.java:150)
        at TestMatrixMultiply.testRandom(TestMatrixMultiply.java:278)
        at TestMatrixMultiply.main(TestMatrixMultiply.java:308)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.util.RunJar.main(RunJar.java:156) 
```

提前致谢

问候， waqas

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-30T02:10:34.933

我也遇到了同样的问题，在我的情况下它给出了异常，因为我没有关闭`SequenceFile.Writer`对象。`sequenceFileWriter.close()`当我在代码中添加语句时，问题得到了解决。

此外，如果 MapReduce 程序中的输入是一些以前的*MapReduce*程序的输出，那么您必须显式编写代码以忽略文​​件`_SUCCESS`。

PS：我正在使用 CHD4 Cloudera Hadoop 配置

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T15:27:33.737

我猜对了。事实上，它没有自动过滤 _SUCCESS 文件，并且由于读取问题中提到的这个日志文件异常正在发生。我过滤了文件，现在它工作正常。这是我如何过滤文件的链接[FileSystem.liststatus 中的过滤日志文件（_success 和 _log）](https://stackoverflow.com/questions/10817824/filter-log-files-success-and-log-in-filesystem-liststatus)

# nginx - 用于目录的 nginx @rewrites - 不起作用？

> ID：10752710
> 
> 赞同：0
> 
> 时间：2012-05-25T10:23:55.990
> 
> 标签：nginx, rewrite

我在玩 Nginx 并安装了一个需要重写的 cms 系统，正常的代码是：

```
location / { try_files $uri $uri/ @rewrites; }

location @rewrites {
        rewrite ^/([^/\.]+)/([^/]+)/([^/]+)/? /index.php?page=$1&id=$2&subpage=$3 last;
        rewrite ^/([^/\.]+)/([^/]+)/?$ /index.php?page=$1&id=$2 last;
        rewrite ^/([^/\.]+)/?$ /index.php?page=$1 last;
} 
```

但是这个 CMS 我安装在另一个名为 testcms 的目录中。所以我认为这会起作用：

```
location /testcms {

fastcgi_pass phpcgi;
fastcgi_index index.php;

try_files $uri $uri/ /testcms@rewrites;

}

location /testcms@rewrites {
        rewrite ^/([^/\.]+)/([^/]+)/([^/]+)/? /testcms/index.php?page=$1&id=$2&subpage=$3 last;
        rewrite ^/([^/\.]+)/([^/]+)/?$ /testcms/index.php?page=$1&id=$2 last;
        rewrite ^/([^/\.]+)/?$ /testcms/index.php?page=$1 last;
} 
```

但这会导致出现白页，并且 nginx 日志中没有错误。知道我可能做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:29:16.453

有语法错误。应该是这样的

```
try_files $uri $uri/ @rewrites;

}

location @rewrites { 
```

来自 Nginx[手册](http://wiki.nginx.org/HttpCoreModule#location)：

> 前缀“@”指定一个命名位置。在正常处理请求期间不使用此类位置，它们仅用于处理内部重定向的请求

# java-me - 除了使用 JSR-179 之外，还有哪些获取手机经纬度的方法？

> ID：10752713
> 
> 赞同：-1
> 
> 时间：2012-05-25T10:24:07.580
> 
> 标签：java-me, latitude-longitude, jsr179

`JSR-179`是一个可选包，因此它需要`permissions`和证书`signing`。那么还有其他方法可以通过`longitude`移动`latitude`设备`J2ME`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T11:01:16.500

您可以通过蓝牙将您的设备与外部 GPS 设备连接，并以`NMEA`字符串格式获取 GPS 详细信息。您可以使用类从字符串`StringTokenizer`中获取经纬度详细信息。`NMEA`

您可以[阅读文章](http://www.developer.nokia.com/Community/Wiki/How_to_read_Location_from_Bluetooth_GPS)以获取信息。

满足您要求的另一种方法是 fetch `Cell-Id`，并且基于 Google 的 Reverse API，您可以从`Cell-Id`.

# c# - 在 C# 中使用套接字传输颜色

> ID：10752714
> 
> 赞同：-1
> 
> 时间：2012-05-25T10:24:07.817
> 
> 标签：c#, sockets, colors

我正在编写一个像 DrawSomething 这样的程序。但我不知道如何转移颜色的drawpen的属性。

我有一个绘图客户端和一个猜测客户端。当绘图客户端更改笔颜色时，如何通知猜测客户端并以新颜色绘制图表。

我想知道客户端或表单如何使用套接字读取新颜色以及传输、字符串或 RGB 中的颜色类型？

我正在使用此代码。我认为它是字符串，然后我可以使用 ptp 协议进行传输，它将显示在客户端的另一端（猜测客户端）。

```
 public Color _drawPenColor = Color.Red;
    public int _drawPenWidth = 10;        
    ClientSendPtPPacket("DRAW-" + e.X.ToString() + "-" + e.Y.ToString() + "-" 
                                + _drawPenWidth.ToString() + "-" 
                                + _drawPenColor.ToString(),
                                opponentIP, opponentPort); 
```

我收到了数据包，其中一个数据包是“ **Draw-150-234(postion)-10(width)-Color [red]** ”。

如果我使用调色板更改颜色，它将是“ **Draw-150-234-10-Color [A=255, R=45, G=28, B=45]** ”。IP 和端口被忽略。

所以我的问题是如何获得新颜色。

PS:ClientSendPtPPacket 类

```
private void ClientSendPtPPacket(string content, IPAddress toIp, int toPort)
    {
        try
        {
            if (_socketClient != null && _socketClient.Connected == true)
            {
                string sendPacket = _localIP.ToString() + "-" + _localPort.ToString() + "-" +
                    toIp.ToString() + "-" + toPort.ToString() + "-" + content;
                Byte[] bytePacket = System.Text.Encoding.UTF8.GetBytes(sendPacket);
                _socketClient.Send(bytePacket);
            }

        }
        catch (Exception excep)
        {

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T09:45:03.270

我自己解决了这个问题。我使用[了 toAgrb()](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=ZH-CN&k=k%28SYSTEM.DRAWING.COLOR.TOARGB%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V3.5%22%29;k%28DevLang-CSHARP%29&rd=true)和[FromAgrb()](http://msdn.microsoft.com/zh-cn/library/system.drawing.color.fromargb%28v=vs.90%29)方法。

ToArgb() 用于显示颜色数量，FromArgb() 用于获取颜色数量。所以，我猜客户会知道绘图客户端一直使用的颜色，甚至绘图客户端已经改变了它的颜色。

但我可以在字符串类型中使用 ToAgrb() 和 FromArgb() 。

我的例子是：

```
 public Color ColorChange(string _color)
    {
        Color _newColor = new Color();
        switch (_color)
        {
            case "Red": _newColor = Color.FromArgb(Color.Red.ToArgb()); break;
            case "Orange": _newColor = Color.FromArgb(Color.Red.ToArgb()); break;
            case "Yellow": _newColor = Color.FromArgb(Color.Yellow.ToArgb()); break;
            case "GreenYellow": _newColor = Color.FromArgb(Color.GreenYellow.ToArgb()); break;
            case "DeepSkyBlue": _newColor = Color.FromArgb(Color.DeepSkyBlue.ToArgb()); break; 
            case "DarkBlue": _newColor = Color.FromArgb(Color.DarkBlue.ToArgb()); break;
            case "Purple": _newColor = Color.FromArgb(Color.Purple.ToArgb()); break;
            case "Black": _newColor = Color.FromArgb(Color.Black.ToArgb()); break;
            case "Gray": _newColor = Color.FromArgb(Color.Gray.ToArgb()); break;
            case "White": _newColor = Color.FromArgb(Color.White.ToArgb()); break;
        }
        return _newColor;
    } 
```

# c++ - 性能问题 C++ - 搜索数组

> ID：10752717
> 
> 赞同：8
> 
> 时间：2012-05-25T10:24:16.227
> 
> 标签：c++, performance

我有两个版本的通过 int 数组搜索特定值。

第一个版本是直截了当的

```
int FindWithoutBlock(int * Arr, int ArrLen, int Val)
{
    for ( int i = 0; i < ArrLen; i++ )
        if ( Arr[i] == Val )
          return i;
 return ArrLen;
} 
```

第二个版本应该更快。传递的数组需要比前一种情况大一个元素。假设一个有 5 个值的数组，分配 6 个整数，然后执行以下操作

```
int FindWithBlock(int * Arr, int LastCellIndex, int Val)
{
    Arr[LastCellIndex]  = Val;

    int i;
    for ( i = 0 ; Arr[i] != Val; i++ );
    return i;
} 
```

这个版本应该更快——你不需要通过 Arr 每次迭代检查数组边界。

现在是“问题”。在 Debug 中对 100K 元素的数组运行这些函数 100K 次时，第二个版本的速度大约快 2 倍。然而，在 Release 中，第一个版本快了大约 6000 倍。问题是为什么。

[可以在http://eubie.sweb.cz/main.cpp](http://eubie.sweb.cz/main.cpp)找到一个演示这一点的程序

非常感谢任何见解。丹尼尔

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T11:06:44.237

这是我使用 DevStudio 2005 的结果：

调试：

*   无块：25.109
*   带块：19.703

释放：

*   无块：0
*   有块：6.046

从命令行而不是从 DevStudio 中运行它非常重要，DevStudio 会影响应用程序的性能。

了解实际情况的唯一方法是查看汇编代码。这是发布中生成的汇编程序：-

```
FindWithoutBlock:
00401000  xor         eax,eax 
00401002  cmp         dword ptr [ecx+eax*4],0F4240h 
00401009  je          FindWithoutBlock+1Ah (40101Ah) 
0040100B  add         eax,1 
0040100E  cmp         eax,186A0h 
00401013  jl          FindWithoutBlock+2 (401002h) 
00401015  mov         eax,186A0h 
0040101A  ret 
```

请注意，编译器已删除 ArrLen 参数并将其替换为常量！它也将其保留为一项功能。

以下是编译器对另一个函数 (FindWithBlock) 所做的：-

```
004010E0  mov         dword ptr [esp+38h],186A0h 
004010E8  mov         ebx,0F4240h 
004010ED  mov         dword ptr [esi+61A80h],ebx 
004010F3  xor         eax,eax 
004010F5  cmp         dword ptr [esi],ebx 
004010F7  je          main+0EFh (40110Fh) 
004010F9  lea         esp,[esp] 
00401100  add         eax,1 
00401103  cmp         dword ptr [esi+eax*4],ebx 
00401106  jne         main+0E0h (401100h) 
00401108  cmp         eax,186A0h 
0040110D  je          main+0F5h (401115h) 
0040110F  call        dword ptr [__imp__getchar (4020D0h)] 
00401115  sub         dword ptr [esp+38h],1 
0040111A  jne         main+0CDh (4010EDh) 
```

在这里，该函数已被内联。这`lea esp,[esp]`只是一个 7 字节的 nop 来对齐下一条指令。该代码将索引 0 与所有其他索引分开检查，但主循环肯定比 FindWithoutBlock 版本更严格。

嗯。这是调用 FindWithoutBlock 的代码：-

```
0040106F  mov         ecx,edi 
00401071  mov         ebx,eax 
00401073  call        FindWithoutBlock (401000h) 
00401078  mov         ebp,eax 
0040107A  mov         edi,186A0h 
0040107F  cmp         ebp,186A0h 
00401085  je          main+6Dh (40108Dh) 
00401087  call        dword ptr [__imp__getchar (4020D0h)] 
0040108D  sub         edi,1 
00401090  jne         main+5Fh (40107Fh) 
```

啊哈！FindWitoutBlock 函数只被调用一次！编译器发现该函数每次都会返回相同的值，并将其优化为一次调用。在 FindWithBlock 中，编译器无法做出相同的假设，因为您在搜索之前写入数组，因此每次调用的数组（可能）不同。

要对此进行测试，请添加如下`volatile`关键字：-

```
int FindWithoutBlock(volatile int * Arr, int ArrLen, int Val)
{
    for ( int i = 0; i < ArrLen; i++ )
        if ( Arr[i] == Val )
            return i;

    return ArrLen;
}

int FindWithBlock(volatile int * Arr, int LastCellIndex, int Val)
{
    Arr[LastCellIndex]  = Val;

    int i;
    for ( i = 0 ; Arr[i] != Val; i++ );

    return i;
} 
```

这样做，两个版本的运行时间相似（6.040）。鉴于内存访问是主要瓶颈，FindWithoutBlock 的更复杂测试不会影响整体速度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T10:48:16.357

一、ewwwwww恶心的C垃圾。`std::find`和迭代器？

但其次，编写编译器的优化器是为了识别第一种形式——而不是第二种形式。例如，它可以是内联的、展开的或矢量化的，而第二个则不能。

在一般情况下，考虑缓存问题。您正在触摸数组的末尾，然后转到开头 - 这可能是缓存未命中。然而，在第一个块中，您只需要按顺序通过数组 - 更多缓存一致。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T12:33:50.263

这更像是一个扩展的评论而不是一个答案。*Skizz 已经用“啊哈！FindWithoutBlock 函数只被调用一次！* ”回答了这个问题。

**测试驱动程序**
我通常倾向于将测试驱动程序的代码和测试文章放在单独的文件中。一方面，您不会提供测试驱动程序。另一方面，像你做的那样组合它们可以让优化器做你真的不想做的事情，比如调用函数一次而不是 100,000 次。将它们分开可以让您对驱动程序和测试文章使用不同的优化级别。我倾向于编译未优化的驱动程序，以便真正执行 100K 次相同事情的循环执行 100K 次。另一方面，测试文章是使用预期发布的优化编译的。

**使用 getchar()**
在测试 CPU 利用率时，在测试循环中使用任何 I/O 通常是个坏主意。~~当要找到的项目不在数组中时，您的测试代码正在调用 getchar。~~[省略了其余的错误分析。]*更新：*`getchar`当要找到的项目在数组中时，您的测试代码会调用。即使您的测试代码确保不会找到该项目（因此`getchar`不会被调用），但进行该调用仍然不是一个好主意。相反，做一些快速而温和的事情。

**C 与 C++**
您的代码看起来更像 C± 而不是 C++。您正在使用`malloc`而不是`new`，您正在混合 C 和 C++ I/O，并且您没有使用 C++ 库，例如`std::find`. 这对于从 C 迁移到 C++ 的人来说是典型的。了解诸如`std::find`. 这使您可以完全消除您的`FindWithoutBlock`功能。

**过早的优化**
使用该`FindWithBlock`公式的唯一原因是因为这种搜索是一个瓶颈。那么这真的是瓶颈吗？`FindWithoutBlock`公式（甚至更好， ）可以说是一种更好的`std::find`方法，因为您不需要修改数组，因此可以将数组参数标记为`const`。`FindWithBlock`由于您正在修改数组，因此无法将数组标记为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T10:29:08.787

我观察到的是，在第一种情况下，编译器在运行时知道循环的大小（例如 < ArrLen）。在第二种情况下，编译器无法知道。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T10:35:02.920

在第一个示例中，每次迭代都会检查两个条件：`i < ArrLen`和`Arr[i] == Val`。在第二个示例中，只有一个条件需要检查。这就是为什么第一个循环慢两倍的原因。

我无法使用 GCC 观察到相同的行为：第一个循环仍然较慢。

与`-O0`：

```
Without block: 25.83
With block: 20.35 
```

与`-O3`：

```
Without block: 6.33
With block: 4.75 
```

我猜编译器以某种方式推断出数组中没有`SearchVal`数组，因此没有理由调用搜索它的函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-25T10:39:38.607

第一个 for .. 循环包含每个迭代的两个条件，而第二个 for 循环包含每个循环的一个迭代。对于大量迭代，应该显示这种差异，因为第二个条件和迭代器增量之间存在 RAW 依赖关系。但我仍然不认为加速应该这么高。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-25T13:07:59.857

你的编译器很聪明。

如果您使用[LLVM Try Out](http://llvm.org/demo/index.cgi)页面，您将获得以下 IR 生成：

```
define i32 @FindWithoutBlock(i32* nocapture %Arr, i32 %ArrLen, i32 %Val) nounwind uwtable readonly

define i32 @FindWithBlock(i32* nocapture %Arr, i32 %ArrLen, i32 %Val) nounwind uwtable 
```

唯一的区别是`readonly`第一个函数上存在属性：

从[语言参考](http://llvm.org/docs/LangRef.html)页面：

> **只读**
> 
> 该属性表明该函数不写入任何指针参数（包括 byval 参数）或以其他方式修改调用者函数可见的任何状态（例如内存、控制寄存器等）。它可以取消引用指针参数并读取可能在调用者中设置的状态。当使用相同的参数集和全局状态调用时，只读函数总是返回相同的值（或以相同的方式展开异常）。它不能通过调用 C++ 异常抛出方法来解除异常。

这意味着，优化器可能会意识到该函数将始终返回相同的计算（对于给定的循环）并将其提升到循环之外。

# java - 奇怪的刷新行为

> ID：10752726
> 
> 赞同：0
> 
> 时间：2012-05-25T10:24:42.637
> 
> 标签：java, user-interface

我做了一个网格，你可以在其中放置标记。我的问题是，当我调整窗口大小时，这些标记有时会出现，有时不会出现。此外，当我遮挡窗口的一部分时，我会丢失该区域的标记。

代码非常简单：

```
import javax.swing.*;
import java.lang.Math;
import java.awt.*;
import java.awt.event.*;

enum markerColor {
    red, green, none
};

public class tictactoe extends JFrame {
    private class Plansza extends JPanel {
    private int x0,y0,gridSize,step;
    private Graphics graph;
    private markerColor[][] grid;
    public Plansza() {
        grid = new markerColor[29][29];
        for(int i = 0; i<29;i++) {
        for(int j = 0; j<29;j++) {
            grid[i][j] = markerColor.none;
            }
        }

        addMouseListener(new MouseAdapter() {
            public void mouseClicked(MouseEvent e) {
            int x = e.getX(), y = e.getY();
            x-=x0; y-=y0;
            if(x>=gridSize || y>=gridSize) return;
            int X = x/step, Y = y/step;
            placeMarker(X,Y, markerColor.green);
            grid[X][Y] = markerColor.green;
            }
        });
    }
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        int width = getWidth();
        int height = getHeight();
        gridSize = Math.min(width,height);
        step = gridSize/29;
        gridSize = step*29;
        x0 = (width-gridSize)/2;
        y0 = (height-gridSize)/2;
        graph = getGraphics();

        g.setColor(Color.black);
        for(int i = 1, pointer=step; i<=28; i++, pointer+=step) {
        g.drawLine(x0+pointer,y0,x0+pointer,y0+gridSize);
        g.drawLine(x0,y0+pointer,x0+gridSize,y0+pointer);
        }

        for(int i = 0; i<29;i++) {
        for(int j = 0; j<29;j++) {
            if(grid[i][j] != markerColor.none) {
            placeMarker(i,j,grid[i][j]);
                }
            }
        }
        }
    public void placeMarker(int X, int Y, markerColor m) {
        int x = X*step+2*step/10, y = Y*step+2*step/10;
        switch(m) {
        case red:
        graph.setColor(Color.red);
        break;
        case green:
        graph.setColor(Color.green);
        break;
        }
        graph.fillOval(x0+x,y0+y, step*6/10, step*6/10);
    }
    }
    private Plansza plansza = new Plansza();
    public tictactoe() {
    add(plansza);
    }
    public static void main(String[] args) {
    tictactoe t = new tictactoe();
    t.setTitle("tictactoe");
    t.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    t.setSize(500,500);
    t.setVisible(true);
    }
} 
```

我`validate()`在paintComponent中尝试过，但没有成功。我该如何改进呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T11:03:24.583

我试图用它制作一个 SSCCE，它工作正常

```
public class SSCCE extends JPanel {

    enum markerColor {
        red, green, none
    };

    markerColor grid [][];
    int gridSize = 29;
    int x0 = 0;
    int y0=0;
    int step = 1;
    Graphics graph;
    public SSCCE() {
        grid = new markerColor[29][29];
        for(int i = 0; i<29;i++)
            for(int j = 0; j<29;j++)
                grid[i][j] = markerColor.none;

        addMouseListener(new MouseAdapter() {
            public void mouseClicked(MouseEvent e) {
                int x = e.getX(), y = e.getY();
                x-=x0; y-=y0;

                int X = x/step, Y = y/step;

                //Changed here
                if(X>=gridSize || Y>=gridSize || X < 0 || Y < 0) return;

                placeMarker(X,Y, markerColor.green);
                grid[X][Y] = markerColor.green;

                //Call repaint in the mouse click 
                repaint();
            }
        });
    }
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        int width = getWidth();
        int height = getHeight();
        int gridSize = Math.min(width,height);
        step = gridSize/29;
        gridSize = step*29;
        x0 = (width-gridSize)/2;
        y0 = (height-gridSize)/2;
        graph = g;

        graph.setPaintMode();
        g.setColor(Color.black);
        for(int i = 1, pointer=step; i<=28; i++, pointer+=step) {
            g.drawLine(x0+pointer,y0,x0+pointer,y0+gridSize);
            g.drawLine(x0,y0+pointer,x0+gridSize,y0+pointer);
        }

        g.fillOval(10, 10, 40, 50);
        for(int i = 0; i<29;i++)
            for(int j = 0; j<29;j++)
                if(grid[i][j] != markerColor.none)
                    placeMarker(i,j,grid[i][j]);
    }
    public void placeMarker(int X, int Y, markerColor m) {
        int x = X*step+2*step/10, y = Y*step+2*step/10;
        switch(m) {
        case red:
            graph.setColor(Color.red);
            break;
        case green:
            graph.setColor(Color.green);
            break;
        default :
            graph.setColor(Color.blue);
        }
        graph.fillOval(x0+x,y0+y, step*6/10, step*6/10);

    }

    public static void main(String arg[]){
        JFrame frame = new JFrame();
        frame.add(new SSCCE(), BorderLayout.CENTER);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);

    }
} 
```

2件事你不应该做

1.  不要检查鼠标单击以获取`(x,y)`组件，而是首先将您的 x,y 与您对齐`grid(X,Y)`
2.  不要`revalidate`因为你没有改变面板的结构而只是添加了新绘制的组件更好地使用`repaint`

# java - 如何从字节中获取枚举

> ID：10752728
> 
> 赞同：1
> 
> 时间：2012-05-25T10:25:03.417
> 
> 标签：java, enums, byte

我使用以下代码创建了一个枚举：

```
public enum Operation {
    a('0'), b('1');
} 
```

之后我有字节 0 或 1。

现在我需要这个枚举中的一个静态类来从一个字节中获取适当的枚举：

```
 public static Operation fromValue(byte value){ ...} 
```

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T10:36:12.613

除了像 aix 那样对开关进行硬编码之外，您还可以选择自动变体以确保一切保持同步。显然我们可以通过创建一个来优化它`HashMap<Byte, Operation>`（你可以在一个静态块或单个构造函数中初始化它）但是对于你通常的枚举应该做以下事情：

```
public static Operation fromValue(byte b) {
    for (Operation op : values()) {
        if (op.b == b) return op;
    }
    throw new IllegalArgumentException();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T10:27:57.063

像这样的东西？

```
public static Operation fromValue(byte value) {
  switch (value) {
  case 0:  return Operation.a;
  case 1:  return Operation.b;
  default: throw new IllegalArgumentException();
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T10:40:07.760

您可以在包含相反映射的枚举中定义一个静态字段：

```
static Hashtable<byte, Operation> byteToOperation = new Hashtable<byte, Operation>(); 
```

并将枚举的构造函数更改为`byteToOperation.put(byteValue, this)`

然后在您的枚举中创建一个静态函数以从此映射中获取操作：

```
public static Operation fromValue(byte value) {
    return byteToOperation.get(value);
} 
```

那样：

```
Operation.fromValue('0'); //returns Operation.a
Operation.fromValue('1'); //returns Operation.b 
```

并且每次在枚举中添加元素时，它都会自动添加到地图中。

# magento - Magento：从布局中删除了内容块，但在登录页面上仍然可见

> ID：10752731
> 
> 赞同：0
> 
> 时间：2012-05-25T10:25:17.873
> 
> 标签：magento, layout

我是一名使用 Magento 1.7 的新 Magento 开发人员。我已阅读设计指南，因此尝试从右侧边栏中删除产品比较内容块。我在 /blank_template/layout/catalog.xml 中注释了这个块（其中 'blank_template' 是我在管理员中启用的新空白模板的名称）。请参阅下面的代码片段。

```
<!--
Default layout, loads most of the pages
-->

    <default>

        <!-- Mage_Catalog -->
        <reference name="top.menu">
            <block type="catalog/navigation" name="catalog.topnav" template="catalog/navigation/top.phtml"/>
        </reference>
        <reference name="left">
            <block type="core/template" name="left.permanent.callout" template="callouts/left_col.phtml">
                <action method="setImgSrc"><src>images/media/col_left_callout.jpg</src></action>
                <action method="setImgAlt" translate="alt" module="catalog"><alt>Our customer service is available 24/7\. Call us at (800) DEMO-NUMBER.</alt></action>
                <action method="setLinkUrl"><url>checkout/cart</url></action>
            </block>
        </reference>
        <reference name="right">
        <!--
            <block type="core/template" before="cart_sidebar" name="catalog.compare.sidebar" template="catalog/product/compare/sidebar.phtml"/>
            <block type="core/template" name="right.permanent.callout" template="callouts/right_col.phtml"/>
        --> 
            <remove name="catalog.compare.sidebar"/>
        </reference>
        <reference name="footer_links">
            <action method="addLink" translate="label title" module="catalog" ifconfig="catalog/seo/site_map"><label>Site Map</label><url helper="catalog/map/getCategoryUrl" /><title>Site Map</title></action>
        </reference>

    </default> 
```

我不明白为什么我的目标网页上仍然可以看到产品比较块？您可以在此处查看登录页面：[http](http://rewards.duxter.net) ://rewards.duxter.net 。我已禁用所有 Magento 缓存。根据模板路径提示，这是要修改的正确文件。谁能解释为什么我的代码不起作用？太感谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T14:02:26.280

即使缓存已被禁用，进入 var/cache 并删除任何现有目录。我们经常在我们的开发和测试站点（两者都禁用缓存）上遇到类似的怪异 Magento 缓存行为。

# android - 在相对布局中添加按钮

> ID：10752732
> 
> 赞同：1
> 
> 时间：2012-05-25T10:25:19.280
> 
> 标签：android, android-layout, android-button, layout-inflater

我想在滑动抽屉的内容中添加一些按钮，它的内容是相对布局。按钮将在 Java 代码中定义，并且相对布局已经在 xml 布局中定义。所以，假设我想添加 4 个按钮：

```
for (int i=0; i<4; i++) {
     Button btn = new Button(this);
     btn.setId(i);
     btn.setText("some_text");
} 
```

然后我初始化相对布局：

```
RelativeLayout layout = (RelativeLayout)findViewById(R.id.slidingDrawerContent); 
```

现在如何将所有按钮添加到相对布局中？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T10:29:30.900

```
RelativeLayout layout = (RelativeLayout)findViewById(R.id.slidingDrawerContent);
for (int i=0; i<4; i++) {
     Button btn = new Button(this);
     btn.setId(i);
     btn.setText("some_text");
    layout.add(btn); 
} 
```

或者

有点提前

```
 RelativeLayout layout = (RelativeLayout)findViewById(R.id.slidingDrawerContent);
 RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(
        RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT );

    for (int i=0; i<4; i++) {
         Button btn = new Button(this);
         btn.setId(i);
         btn.setText("some_text");

        // lp.addRule(RelativeLayout.RIGHT_OF, <Id>);

         layout.addView(tv2, lp); 
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:27:33.680

只需这样做：

```
layout.addView(btn); 
```

# git - 新硬盘上的 Git 存储库

> ID：10752733
> 
> 赞同：-5
> 
> 时间：2012-05-25T10:25:24.650
> 
> 标签：git

我的旧驱动器坏了，我们搬到了一个新的驱动器上。

我以为我的 Git 存储库一切正常，但后来我意识到只有“Webapps”文件夹中的存储库在运行，而我在客户目录中创建的那些存储库没有运行。

这让我意识到，当我安装 Git 时，Customers 文件夹不存在，而 Webapps 文件夹存在。

（这是Win Vista）。

有我需要运行的命令吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:57:30.960

答案是 .git 文件夹丢失了。该问题与文件夹的复制时间无关，而是与复制方式无关。

git 在其中运行良好的各种文件夹通过 Windows 资源管理器从旧驱动器推送到新驱动器；.git 文件与他们一起推送。

然而，有问题的文件夹是通过 DOS Xcopy 将旧驱动器从旧驱动器拉到新驱动器上的，我认为它跳过了 .git 文件夹。

谢谢。

# c# - 类文件访问 WPF 控件，如代码背后

> ID：10752737
> 
> 赞同：-2
> 
> 时间：2012-05-25T10:25:42.530
> 
> 标签：c#, wpf-controls

我有三个文件，myfile.xaml、myfile.xaml.cs 和另一个类名：myclass.cs。

是否可以合并三个文件可以相互访问。

我想要的是，我希望 myclass.css 可以像后面的代码（myfile.xaml.cs）一样访问所有 WPF 控件，我花了 2 天时间，但仍然没用，所以我真的需要有人回答我的问题，如果你知道的话关于这个问题。

请帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:34:45.170

这是`myclass.cs`做什么的？也许它根本不应该直接访问那些 WPF 控件。在其中实现一些事件，然后将窗口绑定到这些事件可能是一种更好、更清洁、更易于维护的方法。

简单，可编译的例子：

`MyClass.cs`

```
namespace WpfApplication1
{
    // this class does not know anything about the window directly
    public class MyClass
    {
        public void DoSomething()
        {
            if (OnSendMessage != null) // is anybody listening?
            {
                OnSendMessage("I'm sending a message"); // i don't know and i don't care where it will go
            }
        }

        public event SendMessageDelegate OnSendMessage; // anyone can subscribe to this event
    }

    public delegate void SendMessageDelegate(string message); // what is the event handler method supposed to look like? 
    // it's supposed to return nothing (void) and to accept one string argument
} 
```

`Window1.xaml`

```
<Window x:Class="WpfApplication1.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Window1" Height="300" Width="300">
    <Grid>
        <TextBox Name="tbMessage" /> <!-- just a textbox -->
    </Grid>
</Window> 
```

`Window1.xaml.cs`（代码隐藏文件）

```
using System.Windows;

namespace WpfApplication1
{
    public partial class Window1 : Window
    {
        public Window1()
        {
            InitializeComponent();
            var myClass = new MyClass();
            myClass.OnSendMessage += new SendMessageDelegate(myClass_OnSendMessage); // subscribing to the event

            myClass.DoSomething(); // this will call the event handler and display the message in the textbox.

            // we subscribed to the event. MyClass doesn't need to know anything about the textbox.
        }

        // event handler
        void myClass_OnSendMessage(string message)
        {
            tbMessage.Text = message;
        }
    }
} 
```

# javascript - 如何在使用 nsIProcess 运行 .bat 文件时隐藏命令提示符窗口？

> ID：10752741
> 
> 赞同：0
> 
> 时间：2012-05-25T10:26:23.280
> 
> 标签：javascript, windows, batch-file, cmd, xul

**我的代码：**

```
var fpath="C:\\TVT_"+cur_date+"_"+cur_time+".avi";

Components.utils.import("resource://gre/modules/FileUtils.jsm");

var env = Components.classes["@mozilla.org/process/environment;1"]
                    .getService(Components.interfaces.nsIEnvironment);
var shell = new FileUtils.File(env.get("COMSPEC"));

var args = ["/c", "cd.. & cd.. & C: & cd C:/ffmpeg/bin & record.bat "+fpath];

var process = Components.classes["@mozilla.org/process/util;1"]
                     .createInstance(Components.interfaces.nsIProcess);
process.init(shell);
process.runAsync(args, args.length); 
```

当我通过此代码执行批处理文件时，总是会显示命令提示符窗口提示。

有什么方法可以隐藏该窗口并静默运行批处理？

***使用 Windows XP 和 Firefox 12.0***

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:57:11.547

我不认为 Firefox 可以在没有控制台窗口的情况下运行批处理文件。但是，这可以通过[`WshShell.Run()`](http://msdn.microsoft.com/en-us/library/d5fk67ky%28v=vs.84%29.aspx)（`intWindowStyle`参数必须为 0）使用 Windows 脚本主机。您需要一个 JScript 文件，例如`record.js`包含以下内容：

```
var dir = WScript.ScriptFullName.replace(/[\/\\]+[^\/\\]*$/, "");
var Shell = WScript.CreateObject("Wscript.Shell");
Shell.CurrentDirectory = dir;
Shell.Run("record.bat", 0, true); 
```

该脚本从它自己的路径推导出目录并`record.bat`在同一目录中运行。然后你可以像这样运行这个脚本：

```
var script = new FileUtils.File("c:\\ffmpeg\\bin\\record.js");

var process = Components.classes["@mozilla.org/process/util;1"]
                        .createInstance(Components.interfaces.nsIProcess);
process.init(script);
process.runAsync([], 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:49:15.907

要静默运行批处理`@echo off`，请在其第一行添加。

# android - 限制android listview中的重复条目

> ID：10752742
> 
> 赞同：0
> 
> 时间：2012-05-25T10:26:28.053
> 
> 标签：android

我的Android项目是我已经将联系人列表放入Spinner，然后我将我的联系人一一放入Listview。我希望我的spinner联系人不会在listview中重复。我想在listview执行之前放置一些检查点.我应该怎么做？？请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:31:34.590

使用`java.util.Set`.Set 集合不允许重复的元素。以及它的排序方式来照顾重复的联系人。

```
Set<String> myContactList = new HashSet<String>();
myContactList.add("Name"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:32:08.653

将联系人添加到设置。它将处理重复值。否则将联系人添加到 ArrayList 并在添加之前检查联系人是否已存在于列表中。如果存在则不要添加。

将联系人添加到列表后，拨打

适配器.notifyDataSetChanged();

# javascript - 简单的 Javascript 幻灯片功能不起作用

> ID：10752744
> 
> 赞同：0
> 
> 时间：2012-05-25T10:26:35.457
> 
> 标签：javascript, jquery, html

我是 Javascript 的新手，我正在尝试用图像制作一个简单的“幻灯片”。这是我的代码，它不起作用，它正常加载html代码，忽略“隐藏”功能：怎么办？

```
 <script type="text/javascript">
        $(function() {
            var tot = $(".slide").length,
            current = 1

            $(".slide").not(":first").hide()

            $("#next").click(function () {
            if (current+1 > tot) return false

            $(".slide:visible").hide().next().show()
            current++
            })

            $("#prev").click(function () {
            if (current-1 < 1) return false

            $(".slide:visible").hide().prev().show()
                current--
            })
        })​
    </script>

    <div id="slide_container">  
            <div class="slide">
                <p>Step 1 explained</p>
                <img src="images/android.png" border="none"/>
            </div>
            <div class="slide">
                <p>Step 2 Explained</p>
                <img src="images/apple.png" border="none"/>
            </div>
            <div class="slide">
                <p>Step 3 explained</p>
                <img src="images/windows.png" border="none"/>
            </div>
            <div>
                <button id="prev">Prev</button>
                <button id="next">Next</button> 
            </div>
    </div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:57:05.600

为了清楚起见，我重新格式化了您的代码并添加了几个分号`;`，并且我还更改了当前和总计的索引，一切似乎都可以正常工作我已经使用下面的 JavaScript 创建了一个[jsFiddle](http://jsfiddle.net/NL7EJ/)，一切似乎工作正常。试一试

```
$(function()
{
    var total = $(".slide").length;
    var current = 0

    $(".slide").not(":first").hide()

    $("#next").click(function ()
    {
        if (current + 1 >= total)
        {
            return false;
        }

        $(".slide:visible").hide().next().show();
        current++
    })

    $("#prev").click(function ()
    {
        if (current <= 0)
        {
            return false;
        }

        $(".slide:visible").hide().prev().show();
        current--;
    });
})​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T11:43:07.510

我希望您在此处提供的脚本块之前添加了 Jquery 参考。只是一个想法。

# sass - SASS 使用前缀简化 mixin

> ID：10752746
> 
> 赞同：2
> 
> 时间：2012-05-25T10:26:40.543
> 
> 标签：sass

有没有更清洁的方法来做到这一点？

```
@each $prefix in webkit moz ms o {

    -#{$prefix}-transition: all 1s linear;
}
transition: all 1s linear; 
```

我讨厌冗余，如果我能做得更简单，我更愿意

**编辑**：

只是要清楚。我不是在寻找实现转换的方法，我想要的是更简单的代码。在我给你的例子中，我写了 2 倍的销售属性。我想对此进行优化。这是我要查找的示例（但这**不是有效的 SCSS**）

```
@each $prefix in "-webkit-", "-moz-", "-ms-", "-o-", "" {

    #{$prefix}transition: all 1s linear;
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-27T19:23:59.900

转换不是唯一需要前缀的属性。随着供应商添加支持，您可以停止包含前缀。如果你对 mixin 的每个部分进行抽象，从长远来看，你的代码将更易于维护。

```
$default-prefixes: webkit moz ms o;

@mixin build-prefix-values($property, $value, $prefixes: $default-prefixes) {
    @each $prefix in $prefixes {
        -#{$prefix}-#{$property}: #{$value};
    }
    #{$property}: #{$value};
} 

@mixin transition($property: all, $delay: 1s, $timing: linear) {
    $value: $property $delay $timing;
    // use default prefixes
    @include build-prefix-values('transition', $value);
}

// using defaults of 'all' '1s' and 'linear'
p {
    @include transition();
}

// using custom values
.fast {
    @include transition('height', '.1s', 'ease', '0');
} 
```

现在假设您想为`border-radius`where`webkit`是您需要的唯一前缀编写一个 @mixin。

```
@mixin border-radius($radius) {
    $prefixes: webkit;
    @include build-prefix-values('border-radius', $radius, $prefixes);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-19T22:17:57.127

您可以使用`unquote` [sass 函数](http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html#unquote-instance_method)取消引用每个前缀。我是说：

```
@each $prefix in "-webkit-", "-moz-", "-ms-", "-o-", "" {
    #{unquote($prefix)}transition: all 1s linear;
} 
```

我认为这是实现它的更清洁的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T15:10:37.643

In Bourbon there are mixin like that you have (by the way, I recommend to use it when you need a lot of similar things): [http://thoughtbot.com/bourbon/#transitions](http://thoughtbot.com/bourbon/#transitions)

And its code: [https://github.com/thoughtbot/bourbon/blob/master/app/assets/stylesheets/functions/_transition-property-name.scss](https://github.com/thoughtbot/bourbon/blob/master/app/assets/stylesheets/functions/_transition-property-name.scss)

On this basis, you have more or less optimal solution.

# objective-c - 在 iOS 4.0 中包含 twitter+Oauth 会导致 HTTP 错误

> ID：10752747
> 
> 赞同：0
> 
> 时间：2012-05-25T10:26:41.340
> 
> 标签：objective-c, ios, xcode, twitter-oauth

在我的 iPhone 应用程序（针对 iOS 4.0）中，我需要集成 Twitter。我使用了 twitter + OAuth，并且能够成功发布一次。

之后，它给了我以下错误：

```
F622CF31-9D3F-4FAF-AE0A-50914C1FD0EF failed with error: Error Domain=HTTP Code=403 
"The operation couldn’t be completed. (HTTP error 403. 
```

这是我带有委托方法的简单 Twitter 代码。

按钮点击代码：

```
if(![_engine isAuthorized]){  
            UIViewController *controller = [SA_OAuthTwitterController controllerToEnterCredentialsWithTwitterEngine:_engine delegate:self];  

            if (controller){  
                [self presentModalViewController:controller animated:YES];
                }  
        } 
        else
        {
               [_engine sendUpdate:@"Hello"];
        } 
```

委托方法：

```
- (void)storeCachedTwitterOAuthData:(NSString *)data forUsername:(NSString *)username {  
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];  

    [defaults setObject:data forKey:@"authData"];  
    [defaults synchronize];  
}  

- (NSString *) cachedTwitterOAuthDataForUsername: (NSString *) username {  
    return [[NSUserDefaults standardUserDefaults] objectForKey: @"authData"];  
} 
```

我需要修改什么来扩展 OAuth 权限吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T11:23:45.480

我在这里找到了答案。

[https://github.com/bengottlieb/Twitter-OAuth-iPhone/issues/26](https://github.com/bengottlieb/Twitter-OAuth-iPhone/issues/26)

此链接表示您不能两次发布 Twitter 拒绝的相同推文。所以保重。

# jquery - 使用 jquery 验证后不能延迟提交表单以显示 div

> ID：10752751
> 
> 赞同：0
> 
> 时间：2012-05-25T10:26:46.440
> 
> 标签：jquery, validation

我想在验证表单数据后，将显示“谢谢”div，然后表单提交数据。在验证代码中，我添加：

```
 submitHandler: function(form) {
        $('#contact_form').fadeOut('slow', function() {
            $('#thanksDiv').fadeIn('fast', function() {
                form.delay(1000).submit();
            })
        });
    } 
```

但是，在ThanksDiv fadeIn 之后没有提交表单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:44:55.097

这有效：`$(form).unbind('submit').delay(5000).submit();`

# java - Java Set 保留顺序？

> ID：10752753
> 
> 赞同：205
> 
> 时间：2012-05-25T10:27:01.990
> 
> 标签：java, sorting, set

Java Set 是否保留顺序？一个方法正在向我返回一个 Set，据说数据是​​有序的，但在 Set 上迭代时，数据是无序的。有没有更好的方法来管理这个？是否需要更改方法以返回 Set 以外的内容？

* * *

## 回答 #1

> 赞同：298
> 
> 时间：2012-05-25T10:30:12.337

该[`Set`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)接口不提供任何排序​​保证。

它的子接口[`SortedSet`](http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html)表示一个根据某些标准排序的集合。在 Java 6 中，有两个标准容器实现了`SortedSet`. 它们是[`TreeSet`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)和[`ConcurrentSkipListSet`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentSkipListSet.html)。

除了`SortedSet`接口，还有[`LinkedHashSet`](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html)类。它记住元素插入集合的顺序，并按该顺序返回其元素。

* * *

## 回答 #2

> 赞同：123
> 
> 时间：2012-05-25T10:29:20.463

[LinkedHashSet](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html)是您所需要的。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-12-07T07:30:30.057

正如许多成员建议的那样，使用**LinkedHashSet**来保留集合的顺序。你可以使用这个实现来包装你的集合。

**SortedSet**实现可用于排序顺序，但出于您的目的使用**LinkedHashSet**。

同样来自文档，

“这种实现将其客户从 HashSet 提供的未指定的、通常混乱的排序中解脱出来，而不会增加与 TreeSet 相关的成本。它可用于生成与原始集合具有相同顺序的集合的副本，而不管原始集合如何集合的实现："

来源：[http ://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-05-25T10:29:45.257

Set只是一个接口。为了保持顺序，您必须使用该接口和子接口 SortedSet 的特定实现，例如 TreeSet 或 LinkedHashSet。你可以用这种方式包装你的 Set：

```
Set myOrderedSet = new LinkedHashSet(mySet); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-05-25T10:31:04.067

要保留订单，请使用`List`或`LinkedHashSet`.

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-05-25T10:36:00.710

`Set`以下是Java 中可用的标准实现的顺序特征的快速总结：

1.  保持插入顺序：[LinkedHashSet](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html)和[CopyOnWriteArraySet](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArraySet.html)（线程安全）
2.  保持项目在集合内排序：[TreeSet](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html)、[EnumSet](http://docs.oracle.com/javase/7/docs/api/java/util/EnumSet.html)（特定于枚举）和[ConcurrentSkipListSet](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentSkipListSet.html)（线程安全）
3.  不按任何特定顺序保留项目：[HashSet](http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html)（您尝试过的那个）

对于您的具体情况，您可以先对项目进行排序，然后使用 1 或 2 中的任何一个（最有可能是`LinkedHashSet`或`TreeSet`）。或者**更有效地**，您可以将未排序的数据添加到 a`TreeSet`中，它将自动为您处理排序。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2018-04-04T11:58:12.350

LinkedHashSet 是 HashSet 的有序版本，它在所有元素中维护一个双向链表。当您关心迭代顺序时，请使用此类而不是 HashSet。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-05-25T10:30:11.440

从 javadoc 为`Set.iterator()`：

> 返回此集合中元素的迭代器。返回的元素没有特定的顺序（除非这个集合是某个提供保证的类的实例）。

而且，正如[shuuchan](https://stackoverflow.com/users/1381767/shuuchan)已经说过的， a`TreeSet`是一个`Set`具有保证顺序的实现：

> 元素使用它们的自然顺序或在集合创建时提供的 Comparator 进行排序，具体取决于使用的构造函数。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-05-25T10:30:44.253

通常set是不保持顺序的，比如HashSet是为了快速找到一个元素，但是你可以试试LinkedHashSet它会保持你输入的顺序。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-10-02T15:44:18.663

有2个不同的东西。

1.  对集合中的元素进行排序。我们有 SortedSet 和类似的实现。
2.  保持一组中的插入顺序。可以使用 LinkedHashSet 和 CopyOnWriteArraySet（线程安全）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-05-25T10:30:58.030

Set 接口本身并没有规定任何特定的顺序。然而，[SortedSet](http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html)确实如此。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-05-25T10:31:46.750

Set 返回的迭代器不应该以有序的方式返回数据。看到这[两个 java.util.Iterators 到同一个集合：它们是否必须以相同的顺序返回元素？](https://stackoverflow.com/questions/10734953/two-java-util-iterators-to-the-same-collection-do-they-have-to-return-elements/10735036#10735036)

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2012-05-25T10:33:15.340

只能`SortedSet`下单`Set`

# c# - 获取最后一个活动窗口标题

> ID：10752764
> 
> 赞同：0
> 
> 时间：2012-05-25T10:27:45.003
> 
> 标签：c#, winforms, winapi

在我的工作中使用名为 Pivotal - eRelationships 的应用程序，它是一个 CRM 应用程序。

每个用户都可以在其中创建业务对象列表。

基本上这看起来像这样：

![在此处输入图像描述](../Images/d13abc1086711d7076f91b27c3431c85.png)

用户从菜单“静态列表”中选择，然后他会看到所有可用列表，当他选择一个列表时，会显示其内容。在此示例中，如果他选择“zzzz”，他将看到该列表中的所有元素。

我的工作是创建一个显示列表项详细信息的表单。因此，如果用户从“zzzz”列表中选择某些内容，我的自定义表单应该会显示出来。

我可以获得所选元素的 ID，但我需要的是具有该元素的列表的 ID。

由于应用程序架构，这无法正常完成。

自定义表单作为 dll 完成。简单的类实现接口。

所以我的想法是获得最后一个活动窗口标题，而不是拥有它，我将能够在数据库中搜索静态列表 ID - 这是我唯一的选择。

因此，出于测试目的，我想创建一个简单的应用程序来获取最后一个活动窗口标题。

我知道这不是最好的解决方案，但我认为这可能会奏效。

欢迎任何想法、建议和示例。

# php - OAuth 2.0 客户端 ID，我需要重定向 URI 在我的客户端 ID 中为“web-server”

> ID：10752765
> 
> 赞同：0
> 
> 时间：2012-05-25T10:27:46.740
> 
> 标签：php, url, oauth, google-analytics

创建客户端 ID 时出现问题，我需要部署一个将使用谷歌分析 api 的 Web 应用程序。此 Web 应用程序将位于这样的本地路径上

`http://web-server/example/example`

问题是客户端 ID 的重定向 URI 需要是 localhost 或 www。ETC

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:55:36.050

大多数 OAuth 2.0 提供程序将支持完全限定的主机名，即使它们不可公开访问。

因此，例如，您的本地机器名称可以是：

```
http://johny-smith/ 
```

但也可以通过以下方式访问：

```
http://johny-smith.corp.company.com 
```

或者

```
http://johny-smith.internal.company.com 
```

ETC

如果您使用的是 linux 机器，请尝试输入“主机名”以获取您的完全限定域名 (FQDN)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:43:02.033

您可以从 Dyna Dns 获得帮助。

[http://dyn.com/dns/](http://dyn.com/dns/)

这将为您的本地计算机提供可从任何地方访问的主机名。它甚至适用于非静态 IP。

# ruby - Ruby 最佳实践：使用类

> ID：10752768
> 
> 赞同：5
> 
> 时间：2012-05-25T10:27:54.677
> 
> 标签：ruby

请参见下面的示例，我想最好使用第二种方法，但第一种方法也可以。哪种方法最好，使用另一种方法的后果是什么？

```
class Test 
  def start 
    p "started"
  end
  test = Test.new 
  test.start 
end 

class Test2
  def start 
    p "started"
  end
end
test2 = Test2.new 
test2.start 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T11:43:27.963

我肯定会说第二种变体更有意义。第一个不会导致错误，但对象实例化完全过时且毫无意义。外部变量在类的范围内不可见：

```
var = "string"

class A
  var = A.new
end

puts var #=> string 
```

没有闭包，外部`var`与类内部不同。这意味着您的对象在创建后“丢失”并且将无法再访问，并最终受到 GC 的影响。

当您说第一个示例“有效”时，在此上下文中工作意味着*可以*在类范围内创建该对象后立即对该新创建的对象调用方法。但是不可能将该对象作为参考以供以后使用（不将其分配给类（实例）变量）。

如果您不需要参考以供以后使用，并且您确实想要执行这样的“一次性”操作，那么使用可以在不实例化对象的情况下调用的类方法或在`initialize`,如果这是必须在每次实例化时完成的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T11:01:54.677

您可以通过多种方式做到这一点，这取决于您。这是一个有趣的...

```
class Test 
  def start 
    p "started"
  end
  new 
end.start 
```

更严重的是，您的第一个示例将所有内容封装在一个类中。没关系，对于脚本；它将所有内容都放在您自己的名称空间中，并且主要避免了神秘的主要对象上下文。如果需要，您可以定义嵌套类。

然而，第二种方法更传统。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-25T11:13:19.960

定义一个在加载时创建自身对象的类不是一个好主意。该对象仅对其自身可用，而对其父范围不可用（当然您仍然可以通过 访问它[`ObjectSpace::each_object`](http://www.ruby-doc.org/core-1.9.3/ObjectSpace.html#method-c-each_object)）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-10T13:17:37.930

### Ruby 类的一些最佳实践

*   在类定义中使用一致的结构。
*   不要在类中嵌套多行类。尝试将这样的嵌套类分别放在它们自己的文件中，该文件夹的名称类似于包含类。
*   更喜欢模块而不是只有类方法的类。仅当使用类创建实例有意义时才应使用类。
*   当您想将模块的实例方法转换为类方法时，优先使用 module_function 而不是 extend self。
*   在设计类层次结构时，请确保它们符合 Liskov 替换原则。
*   尽量让你的课`SOLID`。
*   始终`to_s`为表示域对象的类提供适当的方法。
*   使用 attr 系列函数来定义平凡的访问器或修改器。
*   避免使用`attr`. 使用`attr_reader`and`attr_accessor`代替。
*   考虑使用`Struct.new`，它为您定义了简单的访问器、构造器和比较运算符。
*   不要扩展由`Struct.new`. 扩展它会引入一个多余的类级别，并且如果多次需要该文件也可能会引入奇怪的错误。
*   考虑添加工厂方法以提供其他合理的方法来创建特定类的实例。
*   喜欢鸭式打字而不是继承。
*   避免使用类`(@@)`变量，因为它们在继承中的“讨厌”行为。
*   根据预期用途为方法（私有、受保护）分配适当的可见性级别。不要将所有内容都公开（这是默认设置）。毕竟我们现在用 Ruby 编码，而不是用 Python。
*   缩进`public`、`protected`和`private`方法，就像它们适用的方法定义一样。在可见性修饰符上方留一个空行，在下面留一个空行，以强调它适用于它下面的所有方法。
*   使用 def self.method 定义类方法。这使得代码更容易重构，因为类名不重复。

这是 ruby​​ 最佳实践的最佳文档：[https ://github.com/bbatsov/ruby-style-guide](https://github.com/bbatsov/ruby-style-guide)

# c# - 使用 Windows Phone 登录 Facebook

> ID：10752774
> 
> 赞同：0
> 
> 时间：2012-05-25T10:28:16.080
> 
> 标签：c#, silverlight, windows-phone-7, silverlight-4.0, silverlight-3.0

在我的 Windows Phone 应用程序中，我使用 Facebook C# SDK - [http://facebooksdk.codeplex.com/](http://facebooksdk.codeplex.com/)

我在 Facebook 上注册了一个应用程序，第一次登录后我看到了这个屏幕（在 Windows Phone 上请求许可）：

![在此处输入图像描述](../Images/e7f45a74b85f3e9304213fa2810045db.png)

如果我在模拟器中单击应用，它会成功登录，但如果我在真实设备上单击应用，它会再次将我重定向到登录页面。为什么这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T11:51:17.237

您应该检查浏览器或系统中是否启用了 cookie（或类似的存储，facebook 在其中保存授权密钥）。我没有使用 WP7，这是第一个想法。

# ios - 在 iOS 中获取 Facebook 用户的所有生日

> ID：10752775
> 
> 赞同：0
> 
> 时间：2012-05-25T10:28:18.717
> 
> 标签：ios, facebook

```
`//now load all my friend's birthdays
    NSMutableDictionary * params = 
                         [NSMutableDictionary dictionaryWithObjectsAndKeys:
                         @"select birthday, name, uid, pic_square from user where uid in (select uid2 from friend where uid1=me()) order by name", 
                         @"query",
                         nil];'

    [self.facebook requestWithMethodName: @"fql.query" andParams: params andHttpMethod: @"POST" andDelegate: self]; 
```

这只会让我得到第一个朋友的名字。如何获取好友的所有详细信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T11:42:41.777

您需要征求用户的`friends_birthday`许可。否则，您将无法获得朋友的生日。它还受朋友的隐私设置的约束 - 只有当他们在他们的个人资料中显示 DOB 时，您才会看到它。

# android - Android播放器WOWZA服务器RTSP流问题

> ID：10752777
> 
> 赞同：1
> 
> 时间：2012-05-25T10:28:27.690
> 
> 标签：android, streaming, video-streaming, android-videoview, wowza

我正在从 wowza 服务器流式传输 rtsp 流。我的安卓播放器多次出错。播放几秒钟或几分钟后出现错误。

这是错误日志：

```
05-26 15:47:27.339: WARN/NEXTREAMING(1458): ERR0:2167 _iConfigLen 0,  pVDI-     >ebdq.nFilled 0
05-26 15:47:27.339: ERROR/QCvdec(1458): Omx Flush issued when vdec is not initialized yet.
05-26 15:47:27.339: ERROR/(1458): Flush VDL_stats_q: stats_ptr 0x27d88
05-26 15:47:27.339: ERROR/QCvdec(1458): Warning - previous ts > current ts. And both are non B-frames
05-26 15:47:27.349: WARN/NEXTREAMING(1458): ERR0:[Video 870] ==> Decoding failure. (0), CTS(263960)
05-26 15:47:27.349: WARN/NEXTREAMING(1458): ERR0:[Video 873] FIRE_ONERROR [NEXPLAYER_ERROR_CODEC]
05-26 15:47:27.349: WARN/NEXTREAMING(1458): ERR0:[VideoDecTask 874] Error(0xe)   Occurred! Stop[0], Async[2147483647]
05-26 15:47:27.349: WARN/NEXTREAMING(1458): ERR0:[CommonEvnets670] SEND   MEDIA_ERROR_UNKNOWN : NEXPLAYER_EVENT_ERROR(Error Code:0x0000000e)
05-26 15:47:27.349: ERROR/MediaPlayer(4923): error (1, 0)
05-26 15:47:27.359: ERROR/MediaPlayer(4923): <!>android.media.MediaPlayer$EventHandler 1340<!> Error (1,0)
05-26 15:47:27.359: DEBUG/VideoView(4923): <!>android.widget.VideoView$4 357<!> Error: 1,0
05-26 15:47:27.419: ERROR/QCvdec(1458): Omx Flush issued when vdec is not initialized yet.
05-26 15:47:27.419: ERROR/(1458): Flush VDL_stats_q: stats_ptr 0x0
05-26 15:47:27.429: WARN/QCvdec(1458):     ======================================================================
05-26 15:47:27.429: WARN/QCvdec(1458):                    Open Max   Statistics                                
05-26 15:47:27.429: WARN/QCvdec(1458):    ======================================================================
05-26 15:47:27.429: WARN/QCvdec(1458): empty this buffer rate = 11.547641
05-26 15:47:27.429: WARN/QCvdec(1458): empty this buffer total time = 28490667
05-26 15:47:27.429: WARN/QCvdec(1458): empty this buffer count = 329
05-26 15:47:27.429: WARN/QCvdec(1458): ======================================================================
05-26 15:47:27.429: WARN/(1458): ===========================================================
05-26 15:47:27.429: WARN/(1458):                      Arm  Statistics                        
05-26 15:47:27.429: WARN/(1458): ===========================================================
05-26 15:47:27.429: WARN/(1458): Total number of frames decoded = 322
05-26 15:47:27.429: WARN/(1458): Average Arm time/frame(ms)     = 0.488919
05-26 15:47:27.429: WARN/(1458): Frames Arm Decoded/sec         = 2045.327515
05-26 15:47:27.429: WARN/(1458): ===========================================================
05-26 15:47:27.429: WARN/(1458):                     Frame Done  Statistics                  
05-26 15:47:27.429: WARN/(1458):  ===========================================================
05-26 15:47:27.429: WARN/(1458): Frame done cumulative time     = 31283552
05-26 15:47:27.429: WARN/(1458): Frames Done per second         = 10.260983
05-26 15:47:27.429: WARN/(1458):   ===========================================================
05-26 15:47:27.439: WARN/(1458): ===========================================================
05-26 15:47:27.439: WARN/(1458):                       Dsp Statistics                       
05-26 15:47:27.439: WARN/(1458): ===========================================================
05-26 15:47:27.439: WARN/(1458): Total number of frames decoded = 322
05-26 15:47:27.439: WARN/(1458): Average Dsp time/frame(ms)     = 14.353993
05-26 15:47:27.439: WARN/(1458): Frames Dsp Decoded/sec)        = 69.667023
05-26 15:47:27.439: WARN/(1458): =========================================================== 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T10:42:38.120

从错误看来，wowza 为您生成的流无法被您正在测试的手机上的 OMX 解码器解码。尝试使用 wowza 更改设置。您可以查看 wowza 示例流：rtsp://184.72.239.149/vod/mp4:BigBuckBunny_175k.mov

如果可行，那么您的 wowza 设置可能是错误的。

亲切的问候，
博

# iphone - 从 tableviewcontroller 推送时为黑色背景

> ID：10752778
> 
> 赞同：1
> 
> 时间：2012-05-25T10:28:42.277
> 
> 标签：iphone, objective-c, ios, xcode, ios5

我有一个包含 tableview 控制器的选项卡视图控制器。当您按下表格行时，它会打开另一个 tableviewcontroller（如 detailtableviewcontroller）......我在右上角有一个导航按钮，如“add”或“+”。我想在按下 + 按钮时加载一个视图控制器，但每次按下它时，视图控制器只是一个黑色背景

```
AddSeasonViewController *stvc = [[AddSeasonViewController alloc] init];
//[self presentModalViewController:stvc animated:YES];
[self.navigationController pushViewController:stvc animated:YES];

[stvc release]; 
```

以上代码摘自 detailTableViewController

任何帮助表示赞赏，在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:39:56.060

看起来您没有正确初始化 viewController

```
AddSeasonViewController *viewController = [[AddSeasonViewController alloc] initWithNibName:@"AddSeasonViewController" bundle:nil]; 
```

> -->如果你在UItabBarController中分配了一个UINavigationController，你可以使用这个

```
[self.navigationController pushViewController:viewController animated:YES]; 
```

> -->我认为在您的情况下，您只是将 viewController 添加到 UITabBarController，然后 pushViewController 将不起作用

```
[self presentModalViewController:viewController animated:YES];
  [stvc release]; 
```

# c# - 构建正则表达式以查找字符串

> ID：10752784
> 
> 赞同：-2
> 
> 时间：2012-05-25T10:29:02.057
> 
> 标签：c#, regex

我需要通过以下方式找出子字符串

以分号或句号开头，在该整个子字符串中带有双引号的一个强制单词之后，最后子字符串以句号或分号结尾。任何建议建立一个正则表达式？

考虑以下输入我需要找到双引号单词的解释。查看我想要的输出。谢谢

输入：

“A Equity Members”指其姓名和地址列于 A 部分附表 1 的人员以及根据第 11 条的规定指定的任何其他人员；“法案”指不时修订的 2000 年有限责任合伙法案；任何人的“关联方”是指直接或间接通过一个或多个中间人控制、受其控制或与该人共同控制的任何人。“控制”一词是指直接或间接地拥有通过合同或其他方式拥有投票权证券的所有权，直接或间接地拥有指导或导致指导一个人的管理和政策的权力；

输出：

“A Equity Members”指其姓名和地址列于 A 部分附表 1 的人员以及根据第 11 条的规定指定的任何其他人员；

“法案”指不时修订的 2000 年有限责任合伙法案；

任何人的“关联方”是指直接或间接通过一个或多个中间人控制、受其控制或与该人共同控制的任何人。

“控制”一词是指直接或间接地拥有通过合同或其他方式拥有投票权证券的所有权，直接或间接地拥有指导或导致指导一个人的管理和政策的权力；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:27:36.943

你的答案是

```
Match resul = Regex.Match(input, "(;|.)([^;|^.])+(;|.)");

        while (resul.Success)
        {
            MessageBox.Show(resul.Value);
            resul= resul.NextMatch();
        } 
```

对你的一个请求。请不要从 stackoverflow 询问确切的答案。您可以在 stackoverflow 中看到询问标准。

# ms-word - 使用 WiX 进行 x64 Word 2010 插件注册

> ID：10752785
> 
> 赞同：3
> 
> 时间：2012-05-25T10:29:04.453
> 
> 标签：ms-word, wix, vsto, com-interop

我使用 WiX 部署 Word 插件，关于 x84 目标平台（至少 Office 安装必须是 x86，使用的操作系统平台越少）一切运行良好，我的 Word 插件的 COM 互操作注册工作和在我安装插件后第一次启动 word 时插件会自动启动。

我正在对注册表进行以下注册（从 heat.exe 的输出中删除）

我创建了一个中间文件，帮助我使用以下 heat 命令进行 COM 互操作注册：

```
"C:\Program Files\Windows Installer XML v3.5\bin\heat.exe" file MyAddin.dll -ag -template fragment -out MyAddin.wxs 
```

感兴趣的输出看起来像：（我知道以这种方式使用 RegistryValue 已被弃用）

```
<Class Id="{10BC65F1-32C0-3ED4-98A0-17661A8C4455}" Context="InprocServer32" Description="MyAddin.MyAddinClass" ThreadingModel="both" ForeignServer="mscoree.dll">
    <ProgId Id="MyAddin.MyAddinClass" Description="MyAddin.MyAddinClass" />
</Class>
<File Id="filCC4172BEC1312562EDEF49648E45AE0D" KeyPath="yes" Source="..\MyAddin\bin\Debug\MyAddin.dll" />
<RegistryValue Root="HKCR" Key="CLSID\{10BC65F1-32C0-3ED4-98A0-17661A8C4455}\Implemented Categories\{62C8FE65-4EBB-45e7-B440-6E39B2CDBF29}" Value="" Type="string" Action="write" />
<RegistryValue Root="HKCR" Key="CLSID\{10BC65F1-32C0-3ED4-98A0-17661A8C4455}\InprocServer32\1.0.0.0" Name="Class" Value="MyAddin.MyAddinClass" Type="string" Action="write" />
<RegistryValue Root="HKCR" Key="CLSID\{10BC65F1-32C0-3ED4-98A0-17661A8C4455}\InprocServer32\1.0.0.0" Name="Assembly" Value="MyAddin, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" Type="string" Action="write" />
<RegistryValue Root="HKCR" Key="CLSID\{10BC65F1-32C0-3ED4-98A0-17661A8C4455}\InprocServer32\1.0.0.0" Name="RuntimeVersion" Value="v4.0.30319" Type="string" Action="write" />
<RegistryValue Root="HKCR" Key="CLSID\{10BC65F1-32C0-3ED4-98A0-17661A8C4455}\InprocServer32\1.0.0.0" Name="CodeBase" Value="file:///[#filCC4172BEC1312562EDEF49648E45AE0D]" Type="string" Action="write" />
<RegistryValue Root="HKCR" Key="CLSID\{10BC65F1-32C0-3ED4-98A0-17661A8C4455}\InprocServer32" Name="Class" Value="MyAddin.MyAddinClass" Type="string"Action="write" />
<RegistryValue Root="HKCR" Key="CLSID\{10BC65F1-32C0-3ED4-98A0-17661A8C4455}\InprocServer32" Name="Assembly" Value="MyAddin, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" Type="string" Action="write" />
<RegistryValue Root="HKCR" Key="CLSID\{10BC65F1-32C0-3ED4-98A0-17661A8C4455}\InprocServer32" Name="RuntimeVersion" Value="v4.0.30319" Type="string" Action="write" />
<RegistryValue Root="HKCR" Key="CLSID\{10BC65F1-32C0-3ED4-98A0-17661A8C4455}\InprocServer32" Name="CodeBase" Value="file:///[#filCC4172BEC1312562EDEF49648E45AE0D]" Type="string" Action="write" /> 
```

包含这些内容的组件将 Win64Flag 标记设置为 yes。因此，我认为会将内容写入注册表的 x64 部分。在此之前，我阅读了以下有关[注册表反射](http://msdn.microsoft.com/en-us/library/aa384235%28v=vs.85%29.aspx)的文章，告诉您：

> 例如，32 位 InprocServer32 键与 64 位应用程序无关，因此 InprocServer32 键不会反映到 64 位注册表视图。

此外：

> 但是，64 位应用程序可以使用 32 位 LocalServer32 密钥，并且 LocalServer32 密钥会得到反映。

但是我已经尝试使用 LocalServer32 而不是 InprocServer32，但是这样做不会让我的插件在两个平台上都启动。

我是否必须调用[RegAsm 工具](http://msdn.microsoft.com/en-en/library/tzat5yw6%28v=vs.80%29.aspx)，或者我缺少 x64 平台的某个标签或互操作注册选项？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T16:55:28.770

使用 wix 您需要做两件事来禁用注册表反射：

1.  将您的组件标记为 64 位组件（属性 Win64="yes"）（就像您所做的那样）
2.  将您的包构建为 64 位包（平台 = x64）

这个包不能在 x86 系统上使用。因此，您将需要两个包，一个用于 x86，一个用于 x64。您可以对这两个包使用相同的源文件，因为 x86 包会忽略 Win64 属性。

# php - Magento 1.5.1.0 API - customer_address.list 返回错误

> ID：10752786
> 
> 赞同：1
> 
> 时间：2012-05-25T10:29:05.973
> 
> 标签：php, web-services, api, magento

我正在使用 http:// *** */api/soap/?wsdl （版本 1）调用 Magento 1.5.1.0 API

我可以登录到网络服务，我可以获取 customer.info、customer_address.info 等。但我无法让 customer_address.list 工作。

我正在使用以下代码：

```
$proxy = new SoapClient('http://***/api/soap/?wsdl');
$sessionId = $proxy->login('apiuser', 'apipass');
$newCustomerId = 178475;
// This works fine
var_dump($proxy->call($sessionId, 'customer.info', $newCustomerId));
// This should work according to the API doc. But doesn't?
var_dump($proxy->call($sessionId, 'customer_address.list', $newCustomerId)); 
```

第二个 var_dump 中的错误消息是：

> 在非对象上调用成员函数 getId()

关于什么可能是错误的任何想法？

问候，

拉斯汉森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T02:23:33.190

可能是您有一个自定义模块，getId() 函数出现/一些错误。

我的例子正在工作。

```
try {//customer.info
        $result = $cli->call($session_id,'customer.info',$_customerId);
        print_r($result);
    } catch (Exception $e) {
        print_r($e->faultstring."\n");
    }

    try {//customer_address.list
        $result = $cli->call($session_id,'customer_address.list',$_customerId);
        print_r($result);
    } catch (Exception $e) {
        print_r($e->faultstring."\n");
    } 
```

或者可能是您的 $newCustomerId 在您的 customer_entity 表中不存在；

**尝试**调试错误。

如我错了请纠正我

^^

# sql - postgres 批量数据类型更改

> ID：10752789
> 
> 赞同：1
> 
> 时间：2012-05-25T10:29:07.993
> 
> 标签：sql, postgresql, types, timestamp, database-migration

我需要将整个数据库中的所有表列从数据类型更改为. 所以我创建了这个函数： `timestamp`**`without`**`time zone``timestamp(0)`**`with`**`time zone`

```
CREATE OR REPLACE FUNCTION grd_replace_datetime_with_timezone()
  RETURNS character varying AS
$BODY$

DECLARE
  old_column RECORD;  
    s text;
BEGIN

FOR old_column IN (
    SELECT
        isc.table_schema as table_schema,
        isc.table_name as table_name,
        isc.column_name as column_name
    FROM 
        information_schema.columns  isc
    INNER JOIN 
        pg_tables pt
            ON (isc.table_schema = pt.schemaname and isc.table_name = pt.tablename)
    WHERE
        isc.column_name like '%date%' and 
        isc.table_schema in ('public') and 
        isc.data_type = 'timestamp without time zone'
    ORDER BY
        isc.table_name ASC
    ) 
LOOP
    RAISE NOTICE 'Schema: %',old_column.table_schema;
    RAISE NOTICE 'Table: %',old_column.table_name;
    RAISE NOTICE 'Column %',old_column.column_name;

    EXECUTE 'ALTER TABLE '||old_column.table_schema||'.'||old_column.table_name||'
                ALTER COLUMN '||old_column.column_name||' TYPE timestamp(0) with time zone';

    RAISE NOTICE '-------------------------------------------------------------------------------';
    RAISE NOTICE '';
END LOOP;

RETURN 'S';
END;
$BODY$
  LANGUAGE plpgsql VOLATILE; 
```

但是有些视图取决于受影响的列，我得到了错误：

> ```
> ERROR:  cannot alter type of a column used by a view or rule 
> ```

我也得到了关于索引的错误。

如何更改所有`timestamp without time zone`列的数据类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T11:18:43.030

据我所知，当数据类型发生变化时，没有内置的方法可以根据视图自动更改。
我看到两种可能性：

1.  **`DROP`**类型更改之前的所有依赖视图，然后**重新创建**它们。

2.  一种完全不同的方法：**转储**数据库，更改转储中的表定义并**恢复**它。只要您**在同一时区**这样做，就`timestamp without time zone`应该强制`timestamptz(0)`正确。请注意，施法要`timestamptz(0)` **四舍五入**到整秒。

如果您有多个对象，则转储和恢复是要走的路 - 如果您能承受停机时间。

### 演示

```
CREATE TEMP TABLE t  (id int, x timestamp);
CREATE TEMP TABLE t1 (id int, x timestamptz(0);

INSERT INTO t VALUES
 (1, '2019-05-25 13:23:03.123')  -- rounds down
 (1, '2019-05-25 13:23:03.987')  -- rounds up
,(2, '2019-05-25 23:23:03')
,(3, '2019-05-25 0:0:0');

COPY t  TO   '/var/lib/postgres/ts_test.sql';
COPY t1 FROM '/var/lib/postgres/ts_test.sql';

SELECT t.x, t.x::timestamptz(0), t1.x
FROM   t
JOIN   t1 USING (id); 
```

强制是自动且正确地发生的。

有关的：

*   [在 Rails 和 PostgreSQL 中完全忽略时区](https://stackoverflow.com/questions/9571392/ignoring-time-zones-altogether-in-rails-and-postgresql/9576170#9576170)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T11:23:38.303

你可以用 pg_dump 试试

首先使用 --format=plain --schema-only 进行转储

更改转储文件中的数据类型并将其还原到新数据库中。

比您使用 --data-only 进行转储并在新数据库中恢复它们。

# c# - jQuery ajax Post 中的 contentType 和 dataType 和 data 是什么？

> ID：10752795
> 
> 赞同：8
> 
> 时间：2012-05-25T10:29:34.833
> 
> 标签：c#, json

我刚刚开始学习 Json 并使用 Json 将数据绑定到 Gridview，但我无法理解 contentType 和 dataType 和 data 是什么？

我使用了以下代码............

```
<script type="text/javascript">
$(document).ready(function () {
    $.ajax({
        type: "POST",
        contentType: "application/json; charset=utf-8",
        url: "Gridview.aspx/BindDatatable",
        data: "{}",
        dataType: "json",
        success: function (data) {
            for (var i = 0; i < data.d.length; i++) {
                $("#gvDetails").append("<tr><td>" + data.d[i].OfficeName + "</td><td>" + data.d[i].City + "</td><td>" + data.d[i].Country + "</td></tr>");
            }
        },
        error: function (result) {
            alert("Error");
        }
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-25T10:35:21.507

contentType 指的是 mime 内容类型，它指定设置给服务器的内容类型。这可以识别 FORM-Encoded、XML、JSON 和大量其他内容类型。它帮助服务器确定如何处理内容。

dataType 在如何处理数据方面帮助 JQuery。如果指定 json 则返回的数据将被评估为 json 并且传递给成功处理程序的数据将是一个对象而不是字符串

data 属性用于传递给服务器的数据。如果你传入一个 Object 文字。JQuery 会将其作为请求正文的一部分（如果类型是 post）或作为查询字符串的一部分（如果类型是 get）传递

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-10T06:31:54.230

如果我们将数据类型指定为 Json 则返回的数据将被评估为 Json 并且传递给成功处理程序的数据将是一个对象而不是字符串，让我们看一下示例

```
 $.ajax({
        type: "POST",
        url: "ProductWebService.asmx/GetProductDetails",

    data: "{'productId':'" + productId + "'}",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (response) {
        var Product = response.d;
        $("#spnProductId").html(Product.Id);strong text
        $("#spnProductName").html(Product.Name);
        $("#spnPrice").html(Product.Price);
        $("#outputTable").show();
    },
    failure: function (msg) {
        alert(msg);
    }
}); 
```

# jquery - 选中 JQuery Check for Checkbox

> ID：10752797
> 
> 赞同：5
> 
> 时间：2012-05-25T10:29:52.290
> 
> 标签：jquery, gridview, checkbox

即使选中了复选框，该函数也始终返回 false。我真的无法打击我做错了什么。我正在使用复选框来启用和禁用 gridview 中的文本框。但是，它似乎不起作用。谢谢您的帮助。我已经在下面发布了 html 和 jq 代码。

HTML 代码：

```
<asp:GridView ID="grdFees" runat="server" AllowPaging="false" CssClass="Grid" AutoGenerateColumns="false" EmptyDataText="No Data Found" EmptyDataRowStyle-HorizontalAlign="Center" EmptyDataRowStyle-CssClass="gridItem" TabIndex="5">
<Columns>
<asp:TemplateField HeaderText="Select" HeaderStyle-HorizontalAlign="center"
                                ItemStyle-HorizontalAlign="center" ItemStyle-Width="2%">
                                <ItemTemplate>
                                    <asp:CheckBox ID="chkselect" runat="server" CssClass="checkbox" 
                                    Width="15px" Checked="false" />
                                </ItemTemplate>
                            </asp:TemplateField>

</Columns>
</asp:GridView> 
```

jQuery代码：

```
$(document).ready(function() 
    {
        $(".checkbox").click(function()
        {
        if ($(this).is(":checked")) 
        {
            alert("true");
        }else
        {
            alert("false");
        }
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-25T10:35:20.693

ASP.NET 可能不会将值应用于`CssClass`复选框本身，而是应用于生成的标签和/或容器元素。

尝试使用[:checkbox](http://api.jquery.com/checkbox-selector/)选择器：

```
$(document).ready(function() {
    $("input:checkbox").click(function() {
        if ($(this).is(":checked")) {
            alert("true");
        } else {
            alert("false");
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T10:38:02.300

由于 Grid 不会将该类应用于复选框，因此您可以执行类似的操作。

```
$(document).ready(function() {
    $(".checkbox :checkbox").click(function(){
        if (this.checked) {
            alert("true");
        } else {
            alert("false");
        }
    }); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T10:32:29.307

```
$(document).ready(function() {
    $("#chkselect").click(function(){
        if (this.checked) { // can also use $(this).is(':checked') as you do
            alert("true");
        } else {
            alert("false");
        }
    }); // you code miss "});" here
}); 
```

您也可以使用选择器

`$(':input:checkbox')`或者`$('input:checkbox')`

# c# - 从 SQL 表构建 C# dll

> ID：10752807
> 
> 赞同：1
> 
> 时间：2012-05-25T10:30:16.587
> 
> 标签：c#, sql, sql-server-2008, c#-4.0, dll

我有一个包含三列的 SQL 表：ID、英语和挪威语。Id 是主键。在我的应用程序中，我有一个标志 (EN/NO) 来决定标签使用哪种语言，GUI 中的按钮 ++。应用程序现在每次加载应用程序时都会执行 select *，并且应用程序正在运行时查找所有必需的值。但不是为每个实例加载整个数据集，我想导出这些值并创建一个 dll，以便我可以在本地存储这些值。

是否有可能在代码中创建此 dll，以便每次构建时 dll 都会自行更新？还是我必须运行一些外部程序来动态创建 ex. 一个.cs代码复制/粘贴到我的班级？（我需要能够重新运行该过程，因为每次需要新标签/文本时都会添加行）

到目前为止，我已经想到了三种关于如何构建导出的解决方案，但不知道如何导出数据：

1.  在静态上下文中保留 DataTable 的状态，并提供帮助方法来标准化获取值的方式。

2.  创建一个包含每个唯一 ID 作为方法名称的类，以及一个用于决定返回哪个值的参数：

    ```
    public static class Names
    {
      public static string 12345(string language)
      {
        switch (language)
        {
            case "EN":
                return "Hello";
            case "NO":
                return "Hei";
            default:
                return "Hello";
        }
      }
    } 
    ```

3.  创建一个包含每种语言的可搜索列表的类，其中 ID 作为键，值（作为值）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-25T10:35:43.283

为什么不为不同的语言创建不同的资源文件并根据您的设置加载适当的资源文件。您可以使用[`System.Resources.ResourceManager`](http://msdn.microsoft.com/en-us/library/system.resources.resourcemanager.aspx). [这篇文章在这里](http://www.codeproject.com/Articles/5208/MultiLanguage-Applications)详细解释了这一点。

编辑：遵循 SO 帖子还详细讨论[了在 C#/WinForms 中制作多语言应用程序的最佳实践？](https://stackoverflow.com/questions/119568/best-practice-to-make-a-multi-language-application-in-c-winforms)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T10:36:31.197

不，我不喜欢将国际化字符串放入类库的想法，为什么不直接使用框架中已经内置的[.NET 国际化功能？](http://www.codeproject.com/Articles/43360/Globalization-Internationalization-I18N-and-Locali)

资源文件是最好的解决方案，而不是此类工作的类库......

# java - TimingFramework 和系统时间

> ID：10752808
> 
> 赞同：1
> 
> 时间：2012-05-25T10:30:22.313
> 
> 标签：java, swing, animation, systemtime

我的应用程序中的动画有问题，而且系统时间可以更改。我以这种方式创建动画对象：

```
animator = new Animator(600, Animator.INFINITE, Animator.RepeatBehavior.REVERSE, setter); 
```

setter 是一个 alpha 属性，从 0.0 到 1.0 不等。问题是每当我更改系统时间时，动画都会停止/阻塞。它有时会在一段时间后重新启动，具体取决于我设置的系统时间。有没有办法解决这个问题？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T10:47:49.940

放入一个 Timer 并安排在动画师的同一时间段内工作（计时器的`run`方法将实例化动画师对象）。因此，每当动画师停止时，它将像以下方式重新实例化：
计时器方法检查动画师是否正在工作，当答案是否定的时，它将实例化另一个具有相同参数的动画师，但仅在一个period time 持续时间等于剩余时间。

代码示例：

```
public void execute() {
start();
timer_.scheduleRepeating(100);
}

public void start() {
    timer_ = new Timer() {
       public void run() {
        update();
        }
    };
}

public void update() {
    if (time > neededTime) {
        timer_.cancel();
    }else {
      if(!animator) {  //needs some optimization
        animator = new Animator( ....
      }
    }   
 } 
```

# java - 这个正确的查询是否要发送到 Oracle

> ID：10752809
> 
> 赞同：1
> 
> 时间：2012-05-25T10:30:32.087
> 
> 标签：java, sql, database, oracle, jdbc

`UPDATE MY_TABLE SET COL_1=?, COL_2=? where COL_3=? AND COL_4=?`

我将数组中确切数量的值发送到语句（在我的情况下：4）。这样做我得到异常：在索引处缺少 IN 或 OUT 参数:: 4

注意：我认为我们不能`SET COL_1=?,COL_2=?`做我们需要做的`SET COL_1='DESIRED_VALUE',COL_2='DESIRED_VALUE'`这是我的误解吗？

Java 代码

```
StringBuilder updateQuery=new StringBuilder("UPDATE MY_TABLE SET COL_1=?, COL_2=? where BOOKMARKID_ACT=? AND DIMID_ACT=?");         
ArrayList<Object> alObjectData=new ArrayList<Object>();
alObjectData.add("VALUE1");
alObjectData.add("VALUE2");
alObjectData.add("VALUE3");
alObjectData.add("VALUE4");
dpQuery.executeUpdate(connTemp, updateQuery.toString(), alObjectData); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-25T11:41:28.567

我想你想创建一个`PreparedStatement`. 它应该看起来像这样：

```
// con is your active connection

String sqlStatement = "UPDATE MY_TABLE SET COL_1=?, COL_2=? where BOOKMARKID_ACT=? AND DIMID_ACT=?";
PreparedStatement prest = con.prepareStatement(sqlStatement);
prest.setString(1, valueFirstParam);
prest.setString(2, valueSecondParam);
prest.setString(3, valueThirdParam);
prest.setString(4, valueFourthParam);
prest.executeUpdate(); 
```

你还应该在类的顶部添加这一行

```
import java.sql.*; 
```

*PreparedStatements 避免您的代码从 sql 注入。*

**[更多关于这个链接](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/PreparedStatement.html)**

# android - 单击时如何更改GridView中的图像

> ID：10752811
> 
> 赞同：2
> 
> 时间：2012-05-25T10:30:35.080
> 
> 标签：android, gridview, imageview

我的项目需要一些帮助。我在 GridView 中有一个 ImageView。单击图像时，我无法更改图像。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T10:35:19.727

请看这个

[Android：在 OnItemClick 之后替换 GridView 数组中的图像](https://stackoverflow.com/questions/6455681/android-replacing-images-in-gridview-array-after-onitemclick)

或者

```
 gridview.setOnItemClickListener(new OnItemClickListener() {
   public void onItemClick(AdapterView<?> parent, View imgView, int position, long id) {
    ImageView imageView = (ImageView) imgView;
    imageView.setImageResource(R.drawable.newImage);
        }
    }); 
```

# magento - Magento - 在 adminhtml 文件夹中编辑 phtml 文件无效

ID：10752814

赞同：0

时间：2012-05-25T10:30:45.533

标签：magento, admin, upgrade, php, adminhtml

# php - Mysqli get_result 替代方案

> ID：10752815
> 
> 赞同：13
> 
> 时间：2012-05-25T10:30:49.013
> 
> 标签：php, mysqli

我刚刚使用 mysqli 将所有 sql 查询更改为准备好的语句。为了加快这个过程，我创建了一个函数（称为`performQuery`）来替换`mysql_query`. 它接受查询、绑定（如“sdss”）和要传入的变量，然后执行所有 perpared 语句的内容。这意味着更改我所有的旧代码很容易。`mysqli_result`我的函数使用 mysqli返回一个对象`get_result()`。

这意味着我可以从以下位置更改我的旧代码：

```
$query = "SELECT x FROM y WHERE z = $var";
$result = mysql_query($query);
while ($row = mysql_fetch_assoc($result)){
    echo $row['x'];
} 
```

到

```
$query = "SELECT x FROM y WHERE z = ?";
$result = performQuery($query,"s",$var);
while ($row = mysql_fetch_assoc($result)){
    echo $row['x'];
} 
```

这在 localhost 上运行良好，但我的虚拟主机服务器没有可用的 mysqlnd，因此`get_result()`无法正常工作。安装 mysqlnd 不是一个选项。

从这里出发的最佳方式是什么？我可以创建一个替换 的函数`get_result()`，如何创建？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2015-05-30T21:17:55.937

这是一个基于与[lx answer](https://stackoverflow.com/questions/10752815/mysqli-get-result-alternative/13948854#13948854)相同原理的更简洁的解决方案：

```
function get_result( $Statement ) {
    $RESULT = array();
    $Statement->store_result();
    for ( $i = 0; $i < $Statement->num_rows; $i++ ) {
        $Metadata = $Statement->result_metadata();
        $PARAMS = array();
        while ( $Field = $Metadata->fetch_field() ) {
            $PARAMS[] = &$RESULT[ $i ][ $Field->name ];
        }
        call_user_func_array( array( $Statement, 'bind_result' ), $PARAMS );
        $Statement->fetch();
    }
    return $RESULT;
} 
```

**使用 mysqlnd**你通常会这样做：

```
$Statement = $Database->prepare( 'SELECT x FROM y WHERE z = ?' );
$Statement->bind_param( 's', $z );
$Statement->execute();
$Result = $Statement->get_result();
while ( $DATA = $Result->fetch_array() ) {
    // Do stuff with the data
} 
```

并且**没有 mysqlnd**：

```
$Statement = $Database->prepare( 'SELECT x FROM y WHERE z = ?' );
$Statement->bind_param( 's', $z );
$Statement->execute();
$RESULT = get_result( $Statement );
while ( $DATA = array_shift( $RESULT ) ) {
    // Do stuff with the data
} 
```

所以用法和语法几乎相同。主要区别在于替换函数返回一个结果数组，而不是一个结果对象。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-19T09:08:58.033

我遇到了同样的问题，并使用 [mysqli::get_result 有什么问题的答案中提供的代码解决了这个问题？](https://stackoverflow.com/questions/7133575/whats-wrong-with-mysqliget-result)

我的函数现在看起来像这样（为清楚起见，删除了错误处理）：

```
 function db_bind_array($stmt, &$row)
  {
    $md = $stmt->result_metadata();
    $params = array();
    while($field = $md->fetch_field()) {
        $params[] = &$row[$field->name];
    }
    return call_user_func_array(array($stmt, 'bind_result'), $params);
  }

  function db_query($db, $query, $types, $params)
  {
    $ret = FALSE;
    $stmt = $db->prepare($query);
    call_user_func_array(array($stmt,'bind_param'),
                         array_merge(array($types), $params));
    $stmt->execute();

    $result = array();
    if (db_bind_array($stmt, $result) !== FALSE) {
      $ret = array($stmt, $result);
    }

    $stmt->close();
    return $ret;
  } 
```

像这样的用法：

```
 $userId = $_GET['uid'];
  $sql = 'SELECT name, mail FROM users WHERE user_id = ?';
  if (($qryRes = db_query($db, $sql, 'd', array(&$userId))) !== FALSE) {
    $stmt = $qryRes[0];
    $row  = $qryRes[1];

    while ($stmt->fetch()) {
      echo '<p>Name: '.$row['name'].'<br>'
             .'Mail: '.$row['mail'].'</p>';
    }
    $stmt->close();
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-11T12:00:36.910

我发现在[mysqli_stmt::get_result](http://php.net/manual/en/mysqli-stmt.get-result.php)的 API 文档页面上[作为注释发布](http://php.net/manual/en/mysqli-stmt.get-result.php#113398)的匿名建议非常有用（我想不出比 eval 技巧更好的方法），因为我们经常希望 fetch_array() 得到我们的结果。然而，因为我想迎合通用数据库对象，我发现代码假定数字数组适用于所有调用点是一个问题，我需要专门使用 assoc 数组来迎合所有调用者。我想出了这个：

```
class IImysqli_result {
        public $stmt, $ncols;
}   

class DBObject {

    function iimysqli_get_result($stmt) {
      $metadata = $stmt->result_metadata();
      $ret = new IImysqli_result;
      if (!$ret || !$metadata) return NULL; //the latter because this gets called whether we are adding/updating as well as returning
      $ret->ncols = $metadata->field_count;
      $ret->stmt = $stmt;
      $metadata->free_result();
      return $ret;
   }

   //this mimics mysqli_fetch_array by returning a new row each time until exhausted
    function iimysqli_result_fetch_array(&$result) {
      $stmt = $result->stmt;
      $stmt->store_result();
      $resultkeys = array();
      $thisName = "";
      for ( $i = 0; $i < $stmt->num_rows; $i++ ) {
            $metadata = $stmt->result_metadata();
            while ( $field = $metadata->fetch_field() ) {
                $thisName = $field->name;
                $resultkeys[] = $thisName;
            }
      }

      $ret = array();
      $code = "return mysqli_stmt_bind_result(\$result->stmt ";
      for ($i=0; $i<$result->ncols; $i++) {
          $ret[$i] = NULL;
          $theValue = $resultkeys[$i];
          $code .= ", \$ret['$theValue']";
      }

      $code .= ");";
      if (!eval($code)) { 
        return NULL; 
      }

      // This should advance the "$stmt" cursor.
      if (!mysqli_stmt_fetch($result->stmt)) { 
        return NULL; 
      }

      // Return the array we built.
      return $ret;
    }
} 
```

# php - 如何在 POST 中获取相同的字段

> ID：10752828
> 
> 赞同：1
> 
> 时间：2012-05-25T10:31:51.757
> 
> 标签：php

```
<form action="form.php" id="form">
<input type="text" name="name_1"><input type="text" name="city_1"><input type="text" name="country_1">
<input type="text" name="name_2"><input type="text" name="city_2"><input type="text" name="country_2">
<input type="text" name="name_3"><input type="text" name="city_3"><input type="text" name="country_3">

    <input type="submit">
</form> 
```

在 form.php 文件中获取这些数据的最佳方法是什么？这是用 jQuery 生成的。可以是 3（现在）或 30。

在 form.php 我有：

```
$data = new Data();
$data->name = $_POST['name_1'];
$data->city = $_POST['city_1'];
$data->country = $_POST['country_1'];
$data->save();
$data = new Data();
$data->name = $_POST['name_2'];
$data->city = $_POST['city_2'];
$data->country = $_POST['country_2'];
$data->save();
$data = new Data();
$data->name = $_POST['name_3'];
$data->city = $_POST['city_3'];
$data->country = $_POST['country_3'];
$data->save(); 
```

但是如果超过3个呢？我想使用**foreach**，但是如何使用？我如何生成输入或获取此数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:36:44.110

使用`name[]`,`city[]`和`country[]`作为您的输入名称。然后它们将作为数组传入 PHP，您可以使用`foreach`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:34:28.573

您可以使用 for 循环：

```
for ($i = 1; $i <= 3; $i++) {
  $data = new Data();
  $data->name = $_POST['name_'.$i];
  $data->city = $_POST['city_'.$i];
  $data->country = $_POST['country_'.$i];
  $data->save();
} 
```

但是如果你可以改变你的 html 像：

```
<input type="text" name="name[]"><input type="text" name="city[]"><input type="text" name="country[]">
<input type="text" name="name[]"><input type="text" name="city[]"><input type="text" name="country[]">
<input type="text" name="name[]"><input type="text" name="city[]"><input type="text" name="country[]"> 
```

您不需要知道计数。（`name_1,name_2`最好是 id 而不是名称）

```
foreach ($_POST['name'] as $index => $name) {
  $data = new Data();
  $data->name = $name;
  $data->city = $_POST['city'][$index];
  $data->country = $_POST['country'][$index];
  $data->save();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T10:34:43.113

您可以将 for each 与“name_.$i”等按时构建的字符串一起使用，并将 $i 作为计数器

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T10:45:34.097

如果您可以更改输入元素的名称，您可以这样做：

```
<input type="text" name="items[1][name]"><input type="text" name="items[1][city]"><input type="text" name="items[1][country]">
<input type="text" name="items[2][name]"><input type="text" name="items[2][city]"><input type="text" name="items[2][country]">
<input type="text" name="items[3][name]"><input type="text" name="items[3][city]"><input type="text" name="items[3][country]"> 
```

这些数字不必相邻，但必须是唯一的。要将`$_POST`-data 转换为您的数据模型，则如下所示：

```
$items = $_POST['items'];

$dataList = array();
foreach($items as $item) {
    $data = new Data();
    $data->name = $item['name'];
    $data->city = $item['city'];
    $data->country = $item['country'];
    $dataList[] = $data;
} 
```

当然，您可以根据需要添加任意数量的项目。

如果您无法更改输入元素的名称，那么您可以使用其他解决方案之一。我只会修改它们，以便元素的数量不会像这样硬编码：

```
$dataList = array()
for($i = 1; isset($_POST["name_$i"]); ++$i) {
    $data = new Data();
    $data->name = $_POST["name_$i"];
    // ... and so on
    $dataList[] = $data;
} 
```

当然，使用该解决方案，数字必须是连续/相邻的。

# html - 如何允许 html5 数字输入类型的逗号和点分隔符

> ID：10752831
> 
> 赞同：5
> 
> 时间：2012-05-25T10:31:57.967
> 
> 标签：html, input

有没有办法使用 html5 数字输入类型同时允许逗号和点作为分隔符？我找到了小数分隔符属性，但它似乎只需要一个分隔符......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T11:17:47.960

No 两者都不能用于 html5 数字输入类型。事实上，它可以支持十进制或浮点数以及实数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-07T14:24:26.077

请参阅我的跨浏览器[InputKeyFilter](https://github.com/anhr/InputKeyFilter)代码示例，其中用户可以输入点或逗号作为小数分隔符，具体取决于用户的系统设置。

```
<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>Input Key Filter Test</title>
	<meta name="author" content="Andrej Hristoliubov anhr@mail.ru">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

	<!-- For compatibility of IE browser with audio element in the beep() function.
	https://www.modern.ie/en-us/performance/how-to-use-x-ua-compatible -->
	<meta http-equiv="X-UA-Compatible" content="IE=9"/>

	<link rel="stylesheet" href="https://rawgit.com/anhr/InputKeyFilter/master/InputKeyFilter.css" type="text/css">		
	<script type="text/javascript" src="https://rawgit.com/anhr/InputKeyFilter/master/Common.js"></script>
	<script type="text/javascript" src="https://rawgit.com/anhr/InputKeyFilter/master/InputKeyFilter.js"></script>

</head>
<body>
Float field: 
<input type="number" step="any" id="Float"
	onchange="javascript: onChangeFloat(this)"
	onblur="inputKeyFilter.isNaN(parseFloat(this.value), this);"
/>
<script>
	CreateFloatFilter("Float");

	function onChangeFloat(input){
		inputKeyFilter.RemoveMyTooltip();
		var elementNewFloat = document.getElementById("NewFloat");
		var float = inputKeyFilter.parseFloat(input.value);
		if(inputKeyFilter.isNaN(float, input)){
			elementNewFloat.innerHTML = "";
			return;
		}
		elementNewFloat.innerHTML = float + " or localized value: " + float.toLocaleString();
	}
</script>
 New float: <span id="NewFloat"></span>
</body>
</html>
```

感谢[Dr.Oblak](https://stackoverflow.com/users/4106812/dr-oblak)在 With a browser 中的回答[，我如何知道客户端使用哪个小数分隔符？](https://stackoverflow.com/questions/1074660/with-a-browser-how-do-i-know-which-decimal-separator-does-the-client-use)

另请参阅我[的输入键过滤器页面示例](https://anhr.github.io/InputKeyFilter/)。

# c# - 为什么不允许绑定变量

> ID：10752841
> 
> 赞同：0
> 
> 时间：2012-05-25T10:32:37.827
> 
> 标签：c#, wpf, language-concepts

我在谷歌上搜索为什么不允许本地或全局变量作为 WPF 数据绑定的源；只能绑定 wrapping 属性。

所以问题是属性是变量的包装器，那么为什么允许这些属性而不允许使用变量。

我需要了解幕后系统。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T10:41:42.503

用于绑定的机制（[PropertyDescriptor](http://msdn.microsoft.com/en-us/library/system.componentmodel.propertydescriptor.aspx)、[DependencyProperties](http://msdn.microsoft.com/en-us/library/ms752914.aspx)等）仅使用属性，这就是您无法绑定到字段的原因。属性可以提供验证、更改通知等，这是首选属性的另一个原因。字段不提供这些。

此外，使用公共字段通常是不好的做法，那么他们为什么要费心实现对字段的绑定呢？它只会促进那些不良做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T10:39:18.283

好吧，这并不完全正确。您*可以*将字段用于绑定，但首先您必须将其声明为资源，然后通过绑定声明中的资源键访问它。

当你要绑定到一个属性的代码绑定时，也可以同时`OnPorpertyChanged`发出通知。

# cordova - 本机浏览器上的 Phonegap 摄像头

> ID：10752843
> 
> 赞同：0
> 
> 时间：2012-05-25T10:32:42.490
> 
> 标签：cordova, camera

我知道如果与包装应用程序一起使用，Phonegap 中可以访问相机。如果我们从本机浏览器访问，它会工作吗？

让我澄清一下：如果我使用 Phonegap 以及相关的 JS 文件创建一个 HTML 页面，并从 iPhone 中的 Safari 浏览器访问它（通过在浏览器中手动输入 URL），该程序可以访问相机功能吗？我尝试使用[http://docs.phonegap.com/en/1.7.0/cordova_camera_camera.md.html#Camera](http://docs.phonegap.com/en/1.7.0/cordova_camera_camera.md.html#Camera)上的示例应用程序。但它不起作用。浏览器或相机操作无响应。想知道这是否可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T11:29:26.777

不，它不会工作，因为没有加载 Java 中的 Phonegap 核心。

# c++ - 信号和绑定参数

> ID：10752844
> 
> 赞同：1
> 
> 时间：2012-05-25T10:32:49.200
> 
> 标签：c++, boost, signals, bind

我正在使用`boost::signals2`库，这是简单的代码：

```
boost::signals2<void ()> sig;
class Foo {
   void Slot() {}
};

Foo obj;
sig.connect( boost.bind(&Foo::Slot, &obj) ); 
```

一切正常。但现在我希望我的信号在参数中传递一些数据：

```
boost::signals2<void (std::vector<float>)> sig2;
class Foo {
   void Slot2(std::vector<float>) {}
}; 
```

绑定 Slot2 再次发出信号的正确方法是什么？

这是错误：[http](http://dpaste.com/752076/) ://dpaste.com/752076/当我使用相同的连接和绑定代码时。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T10:34:42.600

您需要使用占位符：

```
sig.connect( boost::bind(&Foo::Slot, &obj, _1) ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T11:03:02.100

您需要阅读[Automatic Connection Management](http://www.boost.org/doc/libs/1_49_0/doc/html/signals2/tutorial.html#signals2.tutorial.connection-management)，其中存在一个类似示例，说明如何连接带参数的插槽。

在你的情况下，它是这样的：

```
#include <boost/signals2.hpp>
#include <vector>

struct Foo {
   void Slot1() {}
   void Slot2(std::vector<float>) {}
};

int main()
{
    typedef boost::signals2::signal<void ()> st1;
    typedef st1::slot_type sst1;
    typedef boost::signals2::signal<void (std::vector<float>)> st2;
    typedef st2::slot_type sst2;

    st1 sig1;
    st2 sig2;

    Foo foo;

    sig1.connect( sst1( &Foo::Slot1, foo ) );
    sig2.connect( sst2( &Foo::Slot2, foo, _1 ) );

    sig1();
    std::vector<float> v(5,2.2);
    sig2( v );
} 
```

# php - 正确读取 Cookie 值的问题 - php

> ID：10752846
> 
> 赞同：0
> 
> 时间：2012-05-25T10:33:11.203
> 
> 标签：php, cookies

我正在尝试根据通过读取 window.innerWidth 的 cookie 确定的 php 变量设置要更改的图像的路径（在文件头部设置）

问题是浏览器在第一次渲染时没有正确读取 cookie，我必须刷新浏览器 x 2 才能获得正确的图像。

有人能指出我正确的方向吗？php 中是否有一种方法可以让 cookie 始终在第一次被正确读取 - 目前看起来它正在被缓存，或者类似的东西。

谢谢

这里的例子：http: [//markaprice.co.uk/2012dev/r-img-set/image-test-ht.php](http://markaprice.co.uk/2012dev/r-img-set/image-test-ht.php)

html如下：

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script>document.cookie = "device_dimensions=" + window.innerWidth;</script>

<link rel="stylesheet" type="text/css" href="css/img-styles.css">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<title>Untitled Document</title>

</head>
<body>
<?php require_once('deliver-images.php'); ?>

<img class="ri" src="<?php echo $imgPath ?>the-landscape.jpg" alt="the landscape">

<img class="ri" src="<?php echo $imgPath ?>the-landscape-b.jpg" alt="the landscape"> 
```

php 脚本（deliver-images.php）如下：

```
<?php

$device_width = 0;
$imgPath='';

// Read the device viewport dimensions
    if (isset($_COOKIE['device_dimensions'])) {

        $device_width = $_COOKIE['device_dimensions'];
        echo($device_width);
    }

if ($device_width > 0) {

            // Low resolution image
      if ($device_width <= 480) {

        $imgPath = 'images/mobile/';

      } 

      // Medium resolution image
      else if ($device_width <= 1024 && $device_width > 480) {

        $imgPath = 'images/tablet/';
      }

      else {

        $imgPath = 'images/desktop/';  
      }
    } else {

    $imgPath = 'images/desktop/';   
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:58:49.810

您的以下行设置了 cookie。

```
<script>document.cookie = "device_dimensions=" + window.innerWidth;</script> 
```

这个 php 文件是您检查此 cookie 以决定您将从哪个文件夹提供图像的位置。

```
<?php require_once('deliver-images.php'); ?> 
```

查看您的代码，您似乎是这样想的。

1.  首先你的脚本标签运行并设置了cookie
2.  然后你的 PHP 使用上一步中设置的 cookie 进行一些处理

但这是错误的 PHP 首先在服务器上处理，然后将该页面发送到浏览器并运行您的脚本。

结论：当您第一次打开页面时，您的 cookie 没有设置，因为脚本将在 php 代码运行后运行。

# ruby-on-rails - 类似gmail的搜索引擎

> ID：10752847
> 
> 赞同：1
> 
> 时间：2012-05-25T10:33:12.930
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在寻找一个搜索引擎，它可以让我的用户使用类似于这个 gmail 的语法来搜索我的网站。

我的网站是一个基于地图的餐馆和商店目录，因此如果可以使用以下字符串进行搜索，那就太好了：

> 餐厅名称城市：波士顿饮食：素食
> 餐厅名称国家：比利时标签：快餐
> 餐厅名称国家：波兰饮食：素食标签：披萨
> 等...

你知道我可以用什么来实现这样的功能吗？我浏览了[ruby](https://www.ruby-toolbox.com/categories/rails_search) ​​-toolbox 中的所有解决方案，但其中大多数都需要设置某种特殊的搜索服务器。我可以在我的 VPS 上做到这一点，但起初我很想听听你的意见，哪个是最强大的、对开发人员友好的，哪个涵盖了上述功能。先感谢您！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T11:45:41.133

您可以尝试使用正则表达式从请求中提取搜索参数：

```
search_pairs = params[:search].scan(/([a-zA-Z]+):([a-zA-Z]+)/)
>> [ ['country', 'Poland'], ['diet', 'vegan'] ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-09T09:31:20.760

[https://github.com/makandra/dusen](https://github.com/makandra/dusen) gem 怎么样？

它支持类似gmail的令牌搜索！

# mysql - 在mysql select查询中使用相同的行排序和分组

> ID：10752849
> 
> 赞同：2
> 
> 时间：2012-05-25T10:33:21.080
> 
> 标签：mysql

我有这种结构的桌子

```
id |from_id |to_id |date

1  |1       |3     |25
2  |1       |3     |24
3  |2       |3     |28
4  |2       |3     |20
5  |2       |3     |30 
```

我想检索所有具有最大日期的 from_id（与具有最大日期的 id 不同）

IE，

```
id |from_id |to_id |date

1  |1       |3     |25
5  |2       |3     |30 
```

我用过这个查询

```
`select * from table where to_id=3 group by from_id order by date desc` 
```

但是我正在获取具有最小日期值的 from_id

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T10:39:43.110

尝试这个 -

```
SELECT tablename.*
FROM (SELECT from_id, MAX(date) dat
      FROM tablename 
      GROUP BY from_id) innerquery
  JOIN tablename
    ON  innerquery.from_id = from_id
    AND innerquery.dat = date 
```

# preg-replace - 正确的 preg_replace 格式

> ID：10752850
> 
> 赞同：0
> 
> 时间：2012-05-25T10:33:21.480
> 
> 标签：preg-replace

什么是正确的 preg_replace 格式来替换（xxxxxx）之间的所有内容（包括括号）。示例有字符串（不长）链接：AAAAABBBBB（AAAAABBBBB），我想要的只是 AAAAABBBBB。我需要使用 preg_replace 作为字符串，它的字符串长度会发生变化。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:44:00.757

不确定我是否正确理解了您的问题，但这应该返回括号内的字符串

```
$string = "CCCCC (AAAAABBBBB)";
return preg_replace("(.+\(|\))","",$string); 
```

这个正则表达式基本上会查找任何后跟（和单数“）”的字符串，并将它们替换为“”。

# android - Android 搜索栏--结果追加

> ID：10752851
> 
> 赞同：0
> 
> 时间：2012-05-25T10:33:22.990
> 
> 标签：android, searchbar

我的 Android 应用程序中有一个搜索选项，它使用 Web 服务（在搜索栏中搜索关键字时）并在我的屏幕上显示结果。下一次，当我搜索不同的关键字时，结果将附加到第一个结果并显示。我想要的是，擦除/清除第一个结果，然后显示第二个结果，而不是附加到第一个结果。请作为 Android 新手帮助。

```
public class Srch_Widget extends ListActivity {

ListView lv;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mysearchscreen);

//In the search box, i will be typing an alphabet and click on "GO button"

goButton.setOnClickListener(new View.OnClickListener() {

public void onClick(View v) {

//I'm using webservices to retrieve data(JSON String) and will get "EmpName", "EmpID",
"Salary" and the data will be in a single list called "searchlist" that I used below in
ser_listadapter.(if you want I can paste the entire webservices)

ser_listadapter();

}

});
}

public void ser_listadapter() {
ListAdapter adapter = new SimpleAdapter(this,searchlist,
            R.layout.searchmain, new String[] { "EmpName", "EmpID",
                    "Salary" }, new int[] {
                    R.id.eid, R.id.ename, R.id.sal});

//"searchmain" layout contains 3 textviews with id's: eid,ename,sal

setListAdapter(adapter);
lv = getListView();
lv.setTextFilterEnabled(true);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-17T22:04:45.067

确保在您的 onClick 中和调用您的网络服务之前清除您的 searchList：

```
public void onClick(View v) {
    searchlist.clear();
    callwebservice(searchlist);
    ser_listadapter();
} 
```

# c# - 替换字符串中的反斜杠

> ID：10752852
> 
> 赞同：26
> 
> 时间：2012-05-25T10:33:25.130
> 
> 标签：c#, .net, string

我在尝试替换 C# .net 上日期字符串中的反斜杠时遇到了一些问题。

到目前为止，我正在使用：

```
string.Replace(@"\","-") 
```

但它还没有完成更换。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-25T10:35:06.140

`string.Replace`不会修改字符串本身，而是返回一个新字符串，您很可能会将其丢弃。改为这样做：

```
myString= myString.Replace(@"\","-"); 
```

附带说明一下，这种操作通常出现在手动处理格式化日期字符串的代码中。大多数时候，有比这样的事情更好的方法来做你想做的事情（这是？）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T11:16:52.827

正如他们所有人所说，您需要在变量中取回价值。

所以应该是

```
 val1= val1.Replace(@"\","-"); 
```

或者

```
 val1= val1.Replace("\\","-"); 
```

但不仅..低于一个将不起作用

```
 val1.Replace(@"\","-"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T10:36:36.650

以这种方式使用它。

```
oldstring = oldstring.Replace(@"\","-"); 
```

寻找`String.Replace`返回类型。

它是一个返回正确字符串的函数。如果它只是简单地更改了旧字符串，那么它将有一个`void`返回类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T10:37:08.543

您还可以使用：

```
myString = myString.Replace('\\', '-')); 
```

但只是让您知道，日期斜杠通常是正斜杠`/`，而不是反斜杠`\`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T10:45:48.273

正如其他人所建议的那样， String.Replace 不会更新原始字符串对象，而是返回一个新字符串。

```
myString= myString.Replace(@"\","-"); 
```

值得您了解字符串在 C# 中是不可变的，基本上是为了使其成为线程安全的。有关字符串及其不可变原因的更多详细信息，请参阅[此处](http://msdn.microsoft.com/en-us/library/362314fe.aspx)和[此处的链接](https://stackoverflow.com/questions/2365272/why-net-string-is-immutable)

# php - PHP 邮件（发件人）西里尔编码

> ID：10752853
> 
> 赞同：0
> 
> 时间：2012-05-25T10:33:25.533
> 
> 标签：php, encoding

我在电子邮件的（发件人）部分使用西里尔字母有问题。我对这个主题有同样的问题，但我就这样解决了。

```
$subject = '=?UTF-8?B?'.base64_encode($subject).'?='; 
```

这些是我的牧民。

```
 $headers .= "MIME-Version: 1.0\r\n";
    $headers .= "Content-Type: text/html; charset=utf-8\r\n"; 
```

仍然当我通过西里尔字母时，我得到类似**РЇРІРѕСЂ**的东西。

```
$headers = "From: асдафсддс <email@test.test>\r\n"; 
```

我的 from 是这样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:43:28.807

尝试使用

```
$headers = "From: =?UTF-8?B?".base64_encode($fromname)."?= <email@test.test>\r\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:43:39.307

电子邮件标题只能包含 ASCII 字符。这就是您需要对主题进行编码的原因，也是您还需要对`From`标头进行编码的原因。为此，最好使用[`mb_encode_mimeheader`](http://php.net/mb_encode_mimeheader). 请参阅其文档中的示例。

# objective-c - 仅支持模态 UIViewController 的方向

> ID：10752854
> 
> 赞同：2
> 
> 时间：2012-05-25T10:33:25.950
> 
> 标签：objective-c, ios, uikit

我的应用有一个 UINavigationController，它不支持旋转。但是我想在应该支持旋转的导航控制器上显示一个模式视图控制器。这可能吗？我试图覆盖`shouldAutorotateToInterfaceOrientation`模态显示的视图控制器，但这似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:50:32.490

我认为除了`shouldAutorotateToInterfaceOrientation`显示模态返回的视图控制器之外`YES`，您的导航控制器`shouldAutorotateToInterfaceOrientation`应该被覆盖以`YES`在显示模态视图控制器时返回，`NO`否则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:57:58.657

您需要确保您的设备生成设备方向通知 (UIDeviceOrientationDidChangeNotification)：

确保：

[generateDeviceOrientationNotifications](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html)设置为 true

来自苹果文档：

“窗口对象完成了与更改当前方向相关的大部分工作。但是，它与根视图控制器一起工作以确定是否应该发生方向更改，如果是，应该调用哪些附加方法来响应到变化。如果这个控制器是一个容器，它可能依赖一个孩子来决定是否应该发生定向。

因此，如果您的根视图控制器（UINavigationController？）不支持旋转，那么当您的应用启动时，这可能会设置为 false。在这种情况下，您需要在适当的时候重新打开它：

```
UIDevice myDevice = [UIDevice currentDevice]; 
[myDevice beginGeneratingDeviceOrientationNotifications]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T07:45:20.907

我在另一篇文章中找到了答案：[根 ViewController 内的 UIViewController 不旋转](https://stackoverflow.com/questions/8925268/uiviewcontroller-inside-a-root-viewcontroller-not-rotating)

关键是

`- (void)addChildViewController:(UIViewController *)childController`

和

`- (BOOL)automaticallyForwardAppearanceAndRotationMethodsToChildViewControllers`

# java - 进行检查：如果第 0 列中已有字符串，则不要继续

> ID：10752857
> 
> 赞同：1
> 
> 时间：2012-05-25T10:33:47.170
> 
> 标签：java, string

通过以下代码，我希望将以相同名称开头的所有字母组合到一个数组列中，在第二列中，我想保留与字母相关的数字的总和。

例如 ：

```
array_1 = { {"bat","1"},
            {"rat","2"},
            {"ball","3"},
            {"run","4"},
            {"lizard","5"}
          }

into array_2 = { {"b","4"},
                 {"r","6"},
                 {"l",5}
                } 
```

以下代码给出了一半正确的结果。当*`ball`*它再次到达它时，问题会添加下一个以开头的字母`b`并将其存储为单独的值。问题是第 42 行。我已经标记了。我应该如何检查它是否添加了字母表的编号。

```
package keylogger;
import java.util.Arrays;
public class ArrayTester {

private static int finalLength=0;
private static String firstAlphabet[][];
private String data[][] = { 
                               {"Nokia" , "7"},
                               {"Blackberry" , "1"},
                               {"Nimbus","10"},
                               {"Apple","19"},
                               {"Ami","21"},
                               {"Bug","35"},
                               {"Native","200"},
                               {"zebra","100"},
                               {"Nine","9"}

                          };  

public void calculator() {
   try {  
    // traverse the whole array
    firstAlphabet = new String[data.length][data.length]; // set the length of firstAlphabet array

    for(int i=0;i<data.length;i++) {
        firstAlphabet[i][0] = data[i][0].substring( 0, 1); // get the first alphabet
        firstAlphabet[i][1] = data[i][1];
        int k = i+1;
        int v = k;
        int t=0;
        for(int j=0;j<data.length-v;j++) {
            System.out.println("Inner for loop" + j);
            String s = data[k][0];
// line 42:
            if(firstAlphabet[i][0].compareToIgnoreCase(s.substring(0, 1))==0) { 
               System.out.println("If statement");
               firstAlphabet[i][0] = s.substring(0, 1);
               Integer z = Integer.parseInt(data[k][1]) + Integer.parseInt(firstAlphabet[i][1]);
               firstAlphabet[i][1] = z.toString();                   
            }
            k++;
        }   
    }               
  }catch(Exception exc) {
     exc.printStackTrace();
   }
}

public static void main(String args[]) {
    ArrayTester o = new ArrayTester();
    o.calculator();
    for(String s[] : firstAlphabet) {
        for(String x : s) {
            System.out.println(x);
        }
    }
}
} 
```

## 输出

```
Inner for loop0

Inner for loop1

If statement

Inner for loop2

Inner for loop3

Inner for loop4

Inner for loop5

If statement

Inner for loop6

Inner for loop7

If statement

Inner for loop0

Inner for loop1

Inner for loop2

Inner for loop3

If statement

Inner for loop4

Inner for loop5

Inner for loop6

Inner for loop0

Inner for loop1

Inner for loop2

Inner for loop3

If statement

Inner for loop4

Inner for loop5

If statement

Inner for loop0

If statement

Inner for loop1

Inner for loop2

Inner for loop3

Inner for loop4

Inner for loop0

Inner for loop1

Inner for loop2

Inner for loop3

Inner for loop0

Inner for loop1

Inner for loop2

Inner for loop0

Inner for loop1

If statement

Inner for loop0

N

226

null

null

null

null

null

null

null

B

36

null

null

null

null

null

null

null

N

219

null

null

null

null

null

null

null

A

40

null

null

null

null

null

null

null

A

21

null

null

null

null

null

null

null

B

35

null

null

null

null

null

null

null

N

209

null

null

null

null

null

null

null

z

100

null

null

null

null

null

null

null

N

9

null

null

null

null

null

null

null 
```

如果我们注意到与字母相关的总和是正确的。唯一的问题是重复。即例如 N=219 即 200+19

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:45:23.593

重复是因为您没有将已选择的字母标记为脏。

因此，在第一个循环本身中，N 已经得到了最终计数，但是当 Nimbus 处于迭代状态时，使用当前逻辑，您将完成整个处理，因为您没有将 N 标记为脏。

```
public void calculator() {
        List<String> marked = new ArrayList<String>();
        try {
            // traverse the whole array
            firstAlphabet = new String[data.length][2]; // set the length of first Alphabet array
            for (int i = 0; i < data.length; i++) {
                String firstLetter = data[i][0].substring(0, 1);
                if(marked.contains(firstLetter)){
                    continue;
                }
                marked.add(firstLetter);
                firstAlphabet[i][0] = firstLetter; // get the first alphabet
                firstAlphabet[i][1] = data[i][1];
                int k = i + 1;
                int v = k;
                int t = 0;
                for (int j = 0; j < data.length - v; j++) {
                    System.out.println("Inner for loop" + j);
                    String s = data[k][0];
                    if (firstAlphabet[i][0].equalsIgnoreCase(s.substring(0,
                            1))) { // line 42
                        System.out.println("If statement");
                        firstAlphabet[i][0] = s.substring(0, 1);
                        Integer z = Integer.parseInt(data[k][1])
                                + Integer.parseInt(firstAlphabet[i][1]);
                        firstAlphabet[i][1] = z.toString();
                    }
                    k++;
                }
            }
        } catch (Exception exc) {
            exc.printStackTrace();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:45:11.207

基本上你可以做的是以下几点：

```
// words is an array of tuples (word, frequency); that should probably be a class in your java code
// sums is a HashMap<Character, Integer>
foreach word, frequency in words:
     letter = word[0]
     sums[letter] = sums[letter] + frequency 
```

用 Java 编写应该很简单——而且比您当前的代码更快、更简单。你唯一需要做的就是检查是否`sums[letter]`已经存在，如果没有初始化它`frequency`——太糟糕了，Java 没有为这些事情提供 DefaultDict。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T11:02:16.327

你可以：

1.  使用更方便的数据结构，例如`Map<Character, Integer>`.
2.  如果更改数据结构不适合您，您还可以在开始迭代之前对输入数组进行排序，使用自定义`Comparator`. 看[`Arrays.sort()`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28T%5b%5d,%20java.util.Comparator%29)

    ```
    Arrays.sort(data, new Comparator<String[]>() {
        public int compare(String[] o1, String[] o2) {
            Character letter1 = o1[0].charAt(0);
            Character letter2 = o2[0].charAt(0);
            return letter1.compareTo(letter2);
        }
    }); 
    ```

# android - 基本 Android 应用程序中的 setText

> ID：10752859
> 
> 赞同：0
> 
> 时间：2012-05-25T10:33:54.807
> 
> 标签：android, android-emulator

任何人都知道为什么这个程序不会显示“嘿”字符串（在模拟器中）？相反，它显示“大文本”。

```
package com.seba.numberShow;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class Main extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.second);

       TextView tv = (TextView) findViewById(R.id.textView1);
       tv.setText("hey");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-30T06:50:32.727

在您的 xml 中：您的 textView id 参数与 java 代码中的不同，这里：

`TextView tv = (TextView) findViewById(R.id.textView1);`

检查资源 ID

> R.id.textView1 这会有所不同

# php - PHP中的密码强度检查

> ID：10752862
> 
> 赞同：18
> 
> 时间：2012-05-25T10:34:03.537
> 
> 标签：php, validation, passwords

我正在尝试创建密码检查脚本。我已经检查了电子邮件（对于不允许的字符），如下所示：

```
 public function checkEmail($email)
  {
    if (filter_var($email, FILTER_VALIDATE_EMAIL))
      return true;
    else
      return false;   
  } 
```

所以我正在寻找一种密码验证功能，它可以检查密码至少有一个字母数字字符、一个数字字符和至少 8 个字符，并且还提供错误消息。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-05-25T10:47:11.647

```
public function checkPassword($pwd, &$errors) {
    $errors_init = $errors;

    if (strlen($pwd) < 8) {
        $errors[] = "Password too short!";
    }

    if (!preg_match("#[0-9]+#", $pwd)) {
        $errors[] = "Password must include at least one number!";
    }

    if (!preg_match("#[a-zA-Z]+#", $pwd)) {
        $errors[] = "Password must include at least one letter!";
    }     

    return ($errors == $errors_init);
} 
```

*编辑版本： http: [//www.cafewebmaster.com/check-password-strength-safety-php-and-regex](http://www.cafewebmaster.com/check-password-strength-safety-php-and-regex)*

# vim - Vim 记录历史

> ID：10752863
> 
> 赞同：50
> 
> 时间：2012-05-25T10:34:08.453
> 
> 标签：vim

Vim 存储我们使用 : 用于当前执行的命令列表。但是当我关闭 vim 并重新启动它时，vim 命令历史记录会丢失。我在 .vimrc 文件中试过`set history = 1000`，但没有帮助。
Vim 在哪里维护本地命令历史记录？
保留命令历史的命令是什么？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-05-25T13:26:38.230

只是前几天让我发现的一个问题，这可能是也可能不是你的问题：

在某些 Linux 系统（例如 Ubuntu）上，如果您第一次运行 VIM，您以超级用户身份运行它，那么 $HOME/.viminfo 文件将由 root 所有者创建，而您的本地用户没有写入权限给它。这解释了为什么我的 VIM 在正确配置时没有存储命令历史记录。

底线：在 *nix 系统上，找到您的 .viminfo 文件，并确保您对其具有读/写权限。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-05-25T11:43:35.030

要检查 Vim 是否支持该`'viminfo'`文件（存储历史记录）`:echo has('viminfo')`，. 对应的设置不能为空：`:set viminfo?`，并且`:set history?`应该大于一。

如果写入 viminfo 文件有问题（尽管在这种情况下 Vim 应该抱怨），你可以尝试通过`vim -i /tmp/viminfo`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-01-30T07:03:06.113

您应该检查`.viminfo`文件的权限。`chown`您可能需要使用或将文件的所有者更改为当前用户`sudo chown`。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-08-26T12:09:34.463

班特先生已经给出了答案。

*   转到`$HOME`目录。
*   给予`ls -l .viminfo`检查权限。
*   更改权限，以便组和所有者也可以具有写入权限。采用：

    ```
     sudo chown yourUserId $HOME/.viminfo 
    ```

它应该解决问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-25T11:39:21.993

您必须设置 viminfo 选项。在你的 $MYVIMRC 中设置它

**更新**要找出选项最后设置/更改的位置：

```
:verbose set viminfo? 
```

见[http://vimdoc.sourceforge.net/htmldoc/starting.html#viminfo-file](http://vimdoc.sourceforge.net/htmldoc/starting.html#viminfo-file)

> 如果你退出 Vim 之后又重新启动它，你通常会丢失很多信息。viminfo 文件可用于记住该信息，这使您能够从中断的地方继续。
> 
> 这在|21.3| 节中介绍。的用户手册。
> 
> viminfo 文件用于存储：
> 
> *   命令行历史。
> *   搜索字符串历史记录。
> *   输入行历史。
> *   非空寄存器的内容。
> *   标记几个文件。
> *   文件标记，指向文件中的位置。
> *   最后搜索/替换模式（用于“n”和“&”）。
> *   缓冲区列表。
> *   全局变量。
> 
> |+viminfo| 时不支持 viminfo 文件。功能已在编译时禁用。

你也可以使用[`Session`](http://vimdoc.sourceforge.net/htmldoc/starting.html#Session)文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-11T12:40:49.920

我在 Ubuntu 上绕了一圈，设置上面提出的 viminfo 解决方案导致错误。

我最终在命令模式下执行了命令“版本”，对于大多数内容，它以“-”返回，包括：-cmdline_hist -cmdline_info

我运行了以下命令，一切正常： sudo apt install vim

# variables - 在 awk 脚本中正确使用变量

> ID：10752864
> 
> 赞同：1
> 
> 时间：2012-05-25T10:34:09.667
> 
> 标签：variables, awk

我有一个包含很多行的文件，如下所示：

```
 one     3456    orange
 two     6690    grape
 three   5570    apple
 four    6683    pear
 five    8847    cherry
 six     9035    banana 
```

所以我写了一个 awk 脚本来捕捉这个输出：

```
apple banana cherry 
```

它看起来像这样：

```
awk '/three/ { a = $3}; /six/ { b = $3}; /five/ { c = $3} END {print  a" " b" "c}' <file 
```

但这看起来不是最好的方法，因为我一直在使用`$3`- 我如何捕获这个变量以重用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T11:06:43.470

以你的方式做这件事并没有什么特别的错。如果使用变量，则必须重复。但是，您可以使用数组来累积您的值。

以下是使用简单变量的示例：

```
awk '{var = $3} /three/ {a = var}; /six/ {b = var}; /five/ {c = var} END {print a, b, c}' file 
```

下面是一个使用数组的例子：

```
awk '$1 ~ /^(three|six|five)$/ {arr[++c] = $3} END {for (i = 1; i <= c; i++) {printf "%s%s", delim, arr[i]; delim = OFS}; printf "\n"}' file 
```

您不需要使用重定向。AWK 可以接受文件名作为参数。

在`print`语句中，逗号替换`OFS`（默认为空格）的值，因此您不需要使用`" "`.

在数组版本中，您可以轻松更改正则表达式，因为它都在一个地方。

# javascript - 使用 prettyPhoto 上传：未捕获的异常：调用 StartUpload 失败

> ID：10752866
> 
> 赞同：0
> 
> 时间：2012-05-25T10:34:14.363
> 
> 标签：javascript, jquery, jquery-plugins, uploadify, prettyphoto

在我们的 Rails 应用程序中，我们一直在使用[uploadify](http://www.uploadify.com/)来上传图片，并使用[prettyPhoto在灯箱上显示图片。](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)如果单独使用，两者都可以很好地工作。现在我们想像[dropbox](https://www.dropbox.com/)一样在灯箱上显示 uploadify 控件，但是如果与 prettyPhoto 一起使用，它就会开始尖叫。

这是使用uploadify 和prettyPhoto 的示例html。

```
<!DOCTYPE html>
<html>
<head>
    <title>My Uploadify Implementation</title>
    <link rel="stylesheet" type="text/css" href="uploadify.css">
    <link rel="stylesheet" type="text/css" href="prettyPhoto.css" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="jquery.uploadify-3.1.min.js"></script>
    <script src="jquery.prettyPhoto.js" type="text/javascript"></script>

    <script type="text/javascript">
    $(function() {
        $('#file_upload').uploadify({
            'swf'      : 'uploadify.swf',
            'uploader' : 'uploadify.php'
            // Your options here
        });

        $('#closeme').live('click', function() {
            $.prettyPhoto.close();
            return false;
        });

        $("a[rel^='prettyPhoto']").prettyPhoto();

    });
    </script>
</head>
<body>
<a href="#inline-1" rel="prettyPhoto" >popop</a>
    <div id="inline-1" style="display:none;">
        <p>This is inline content opened in prettyPhoto.</p>
        <input type="file" name="file_upload" id="file_upload" />
    </div>
</body>
</html> 
```

在这里，您将看到弹出窗口的链接，通过单击该链接，它会在灯箱上显示 uploadify 控件。然后你从磁盘中选择图像上传到服务器。选择图像后，我面临两个问题：

1)`Error: uncaught exception: Call to StartUpload failed`在 FF 和 Crome 上出现 javascript 错误

2) 所选图像未在灯箱上的 uploadify 控件中列出。如果您关闭小狗并再次单击弹出链接，它会显示文件列表。

如果我删除`$("a[rel^='prettyPhoto']").prettyPhoto();`行，Uploadify 工作正常。

您知道如何解决吗？

如果有人建议其他插件来实现这种 Dropbox 风格的上传器，我也将不胜感激。

谢谢，阿米特帕特尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T16:51:27.300

您需要在打开灯箱后而不是在页面加载时初始化 uploadify。这是因为如果元素被隐藏，Flash 将不会加载。

我查看了 prettyPhoto api，找不到在灯箱完成打开后调用的任何事件，但这就是您需要做的。

# asp.net - 超过用户名和密码的表单身份验证

> ID：10752867
> 
> 赞同：0
> 
> 时间：2012-05-25T10:34:14.533
> 
> 标签：asp.net, passwords, forms-authentication, credentials

ASP.NET Web 应用程序的客户（客户）是公司，每家公司可能有许多可以访问该站点的用户。

因此，例如 CompanyA 订阅该站点以使用该站点的服务。立即创建该公司的超级用户。然后，该超级用户有权创建更多有权访问该站点的 CompanyA 用户。

因此，一般来说，**每个用户都由 CompanyName 和 UserName 标识**。

典型的 ASP.NET 表单身份验证提供自动登录和注册功能，但仅使用用户名和密码字段。

.NET 框架是否提供了一种在 Login 和 Register 控件中包含**CompanyName**和**CompanyPassword字段的方法？**

公司和初始超级用户也可以由站点管理员在系统中注册。

实际上，我想要在提供的 .NET Login 控件中包含一个**CompanyName字段，而****不仅仅是 Username 和 Password**。

是否有 .NET 框架的方式来做到这一点，还是我必须自定义代码？在后一种情况下，最佳做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T10:43:17.667

您的方案根本不需要公司名称。只要用户名是唯一的列，您就应该能够查找该用户所属的公司。您所需要的只是一个 user_company 表，它将用户名链接到公司 ID。创建超级用户后，您就知道他所属的公司，当他创建用户时，您还知道该用户将属于哪个公司。在登录页面上，您仍然只需要询问用户名和密码；当然，如果您不想让来自不同公司的用户使用相同的用户名，我认为这是合理的，并且是简单的折衷方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T14:23:04.720

您可以将**任何**预先存在的或计划的身份验证方案用于 ASP.Net Forms 身份验证。

[请参阅MSDN](http://msdn.microsoft.com/en-us/library/xdt4thhy.aspx)中的这个（过度简化）示例，如果您愿意，您甚至可以对身份验证方案进行硬编码 -**不是**您应该这样做，但它为您提供了总体思路。

**如果**您想使用ASP.net Membership，Microsoft 会为您提供（您不必这样做）。*如果您使用它（包括您提到的数据库），它具有您需要的所有脚手架，并且默认情况下*由 Forms Authentication 使用（非排他性）。

# javascript - 复选框的javascript代码

> ID：10752872
> 
> 赞同：0
> 
> 时间：2012-05-25T10:34:34.360
> 
> 标签：javascript

我在使用 javascript 代码时遇到了一些问题....我有一个 jsp 页面，我在其中使用 Ajax 从数据库中检索数据并在页面中显示数据。当自动将新数据插入数据库时​​，页面会刷新并在页面中显示新数据以及旧数据。页面中显示的每个数据行都有一个复选框。当我在自动刷新页面后选中复选框时，复选框未选中，但我想保持该复选框保持选中状态（未更改）。谁能告诉我问题出在哪里？

# android - 重启安卓手机（模拟器）？

> ID：10752875
> 
> 赞同：1
> 
> 时间：2012-05-25T10:34:40.727
> 
> 标签：android, shell, android-emulator

我想在按下按钮时重新启动手机。为此我写了这些..

```
 PowerManager pm;
        public void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);
          setContentView(R.layout.main);        
           pm = (PowerManager) getSystemService(Context.POWER_SERVICE);        
           Button test = (Button) findViewById(R.id.button1);

           test.setOnClickListener(new OnClickListener() {          
        public void onClick(View v) {

            try {
                Process proc = Runtime.getRuntime().exec(new String[] {"su", "-c", "reboot" });

                            int result = proc.waitFor();
                Toast.makeText(ForTestActivity.this, "INt:"+result, Toast.LENGTH_SHORT).show();

            } catch (Exception ex) {
                Log.i("XXXXXXXXXXXX", "Could not reboot", ex);
            }

        }
    });

} 
```

这在模拟器中不起作用。我正在使用 android2.3.3 开发此应用程序。它没有给出任何错误，并且在我按下按钮后什么也没有发生。吐司显示结果为 1。

之后我也尝试了这段代码..

```
 Process p = Runtime.getRuntime().exec("su");
                DataOutputStream os = new DataOutputStream(p.getOutputStream());            
                os.writeBytes("reboot"+"\n");                             
                os.writeBytes("exit\n");  
                os.flush(); 
```

结果相同。我还添加了必要的权限。有人知道吗？

[不知何故，我想在按下按钮后重新启动（或关机）手机。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:58:19.233

[在这里](https://stackoverflow.com/questions/5659227/reboot-android-phone-through-code)提出并回答了一个类似的问题。在您拥有固件密钥对其进行签名之前，您无法重新启动无根电话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T11:05:52.697

您是否尝试过没有“su -c”的上述命令？

当我输入“adb shell reboot”时，我的手机会重新启动（但我的手机已**植根**，在这种情况下需要这样做），所以我认为如果你只是从代码中执行“rebo​​ot”，效果应该是相似的。我认为“su -c”是不必要的，因为您已经在 root 手机上拥有 root 权限（IIRC 模拟器默认为 root）。

正如其他人所提到的，这不适用于无根电话。

# mysql - MySQL：[Err] 1146 - 表“别名”不存在

> ID：10752876
> 
> 赞同：0
> 
> 时间：2012-05-25T10:34:42.430
> 
> 标签：mysql

我正在寻找类似的东西

```
SELECT
    `foo`.*,
    (SELECT MAX(`foo`.`bar`) FROM `foo`)
FROM
    (SELECT * FROM `fuz`) AS `foo`; 
```

但似乎`foo`在嵌套查询中无法识别，因为存在类似的错误

```
[Err] 1146 - Table 'foo' doesn't exist 
```

我尝试上面的查询，因为我认为它比类似的更快

```
SELECT
    `fuz`.*,
    (SELECT MAX(`bar`) FROM `fuz`) as max_bar_from_fuz
FROM `fuz` 
```

请给我一些建议。

编辑：我正在寻找性能比第二个查询更好的解决方案。请假设我的表`fuz`是一个非常非常大的表，因此运行一个额外的查询会`max_bar`花费我很多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:45:24.670

为了使第一个查询（经过一些修改）起作用，您想要的称为公共表表达式，而 MySQL 没有该功能。

如果您的第二个查询表现不佳，您可以使用这个：

```
SELECT
    fuz.*,
    fuz_grp.max_bar
FROM 
    fuz
  CROSS JOIN
    ( SELECT MAX(bar) AS max_bar
      FROM fuz
    ) AS fuz_grp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:45:27.477

在 SELECT 子句中创建的别名只能用于访问标量值，它们**不是**表的同义词。如果要为所有返回的行返回列的最大值，可以通过在之前运行查询来计算最大值到变量中，然后将此变量用作查询中的标量值来实现，例如：

```
-- create and populate a table to demonstrate concept
CREATE TABLE fuz (bar INT, col0 VARCHAR(20), col1 VARCHAR(20) );
INSERT INTO fuz(bar, col0, col1) VALUES (1, 'A', 'Airplane');
INSERT INTO fuz(bar, col0, col1) VALUES (2, 'B', 'Boat');
INSERT INTO fuz(bar, col0, col1) VALUES (3, 'C', 'Car');

-- create the scalar variable with the value of MAX(bar)
SELECT @max_foo:=MAX(bar) FROM fuz;

-- use the scalar variable into the query
SELECT *, @max_foo AS `MAX_FOO`
FROM fuz;

-- result:
-- | BAR | COL0 |     COL1 | MAX_FOO |
-- |-----|------|----------|---------|
-- |   1 |    A | Airplane |       3 |
-- |   2 |    B |     Boat |       3 |
-- |   3 |    C |      Car |       3 | 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-25T10:39:39.197

只需简单使用 MAX 函数：

```
SELECT
    `fuz`.*,
    MAX(`fuz`.`bar`)
FROM
    `fuz` 
```

或者如果你使用

```
SELECT
    `foo`.*,
    MAX(`foo`.`bar`)
FROM
    (SELECT * FROM `fuz` JOIN `loolse' ON (`fuz`.`field` = `loolse`.`smile`)) AS `foo`; 
```

# rest - 如何在 noir 中创建 REST API 来接收 ID 列表？

> ID：10752880
> 
> 赞同：2
> 
> 时间：2012-05-25T10:34:48.337
> 
> 标签：rest, clojure, noir

我如何拥有一个可以调用的 API`http://our.api.com/product/<id1>,<id2>`并使用 webnoir 接收 ID 列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T14:46:40.533

```
(defpage product-view "/product/:ids" {:keys [ids]}
  (str (into [] (map #(Integer/parseInt %) (.split ids "-"))))
  ) 
```

这里将一个参数（ids）传递给“-”分割，然后将每个元素解析为 url [http://our.api.com/product/11-222-3](http://our.api.com/product/11-222-3) 的 int 输出将是 [11 222 3 ]

您可以选择其他分隔符，然后选择“-”，但是,.; 不工作（我没有时间弄清楚它是什么：限制环或其他）

# sql - 适用于 Node.js SQL Azure 提供程序的 Windows Azure SDK

> ID：10752898
> 
> 赞同：3
> 
> 时间：2012-05-25T10:35:58.190
> 
> 标签：sql, node.js, azure

我想使用适用于 Windows Azure 的 Node.js SDK 连接到 SQL Azure，但没有关于如何设置它的教程。有人知道我如何使用 Node.js 与 SQL Azure DB 对话吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T17:21:38.970

上周，我们发布了 Microsoft Driver for Node.JS for SQL Server（和 Windows Azure SQL Database aka SQL Azure）的预览版！

你可以在 Github 上找到它： [https ://github.com/windowsazure/node-sqlserver/](https://github.com/windowsazure/node-sqlserver/)

谢谢，

乔纳森

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T11:15:58.820

[在这个 MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/ssdsgetstarted/thread/e138828e-9181-4b19-94d6-fb2058e6a5a6/)上有一个关于这个主题的讨论。根据 Nate Totten 的评论，没有官方驱动程序，但 Joyent 的[github repo](https://github.com/joyent/node/wiki/modules#wiki-db-mssql)上有一些社区驱动的驱动程序。我无法找到有关此的任何其他信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T17:11:39.677

根据我的经验，我建议如果你真的必须连接到 SQL Azure，下面的实现**比其他任何一个都更丰富**：

[https://github.com/cretz/node-tds](https://github.com/cretz/node-tds)

# c# - 如果 Dictionary 键是可为空的十进制，则 Mvc SelectList 不会绑定

> ID：10752904
> 
> 赞同：3
> 
> 时间：2012-05-25T10:36:26.297
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3, razor

为什么我的下拉列表没有绑定？使用 DropDownListFor Razor 辅助函数。

看法：

```
@Html.DropDownListFor(m => m.ModelObject.VatRate, Model.VatRatesList) 
```

视图模型：

```
 public SelectList VatRatesList
    {
        get
        {
            return new SelectList(
                new Dictionary<decimal, string>
                {
                    { 0m, string.Empty },
                    { 1.2m, "20%" },
                    { 1m, "0%" }
                }, "Key", "Value",
                ModelObject.VatRate ?? 0m);
        }
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T14:25:02.913

**更新**

在进一步调查中，我发现这与我试图绑定的模型属性有关。它是一个可以为空的小数。当我将其更改为小数时，会从列表中选择正确的值。

这就是事情开始变得奇怪的地方。如果我对字典键使用 4 个小数位，则它适用于可为空的十进制模型属性。换句话说，这有效：

```
 public SelectList VatRatesList
    {
        get
        {
            return new SelectList(
                new Dictionary<decimal, string>
                {
                    { 0.0000m, string.Empty },
                    { 1.2000m, "20%"},
                    { 1.0000m, "0%"}
                }, "Key", "Value");
        }
    } 
```

我不知道为什么。也许 html 助手在内部使用 ToString() 。我认为 ToString() 会给出十进制的 4dp 字符串表示。我必须查看 MVC 源代码才能找到答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T11:11:58.847

那个**确切的**代码对我有用（看不到你的模型/视图的其余部分，所以很难确定问题）。这是我使用的代码：

控制器：

```
 public ActionResult Index()
 {
        var model = new Model();
        model.ModelObject = new ModelObject();

        model.ModelObject.VatRatesList = new SelectList(
            new Dictionary<decimal, string>
            {
                { 0m, string.Empty },
                { 1.2m, "20%" },
                { 1m, "0%" }
            }, "Key", "Value",
            model.ModelObject.VatRate ?? 0m);

        return View(model);
 } 
```

看法：

```
@using (Html.BeginForm())
{
@Html.DropDownListFor(m => m.ModelObject.VatRate, Model.ModelObject.VatRatesList)
<input type="submit" value="Submit me"/>
} 
```

控制器发布方法：

```
[HttpPost]
public ActionResult Index(Model model)
{
    //Breakpointing on the below line, I can see model.ModelObject.VatRate
    return RedirectToAction("Index");
} 
```

我使用了这两个类：

```
public class Model
{
    public ModelObject ModelObject { get; set; }
}

public class ModelObject
{
    public decimal? VatRate { get; set; }
    public SelectList VatRatesList { get; set; }
} 
```

# macos - AXIsProcessTrusted 返回 false

> ID：10752906
> 
> 赞同：0
> 
> 时间：2012-05-25T10:36:36.617
> 
> 标签：macos, cocoa

`AXIsProcessTrusted()`可能返回的原因是什么`false`？

“启用辅助设备访问”已启用并`AXAPIEnabled()`返回`true`。

PS 如果有帮助，我有一个无窗口状态栏应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T19:35:22.307

如果您的进程未被信任，它将返回 false。

[这个 2009 年的邮件列表帖子](http://lists.apple.com/archives/accessibility-dev/2009/Apr/msg00006.html)解释了`AXMakeProcessTrusted`它的作用。如果您的应用程序没有以一种或另一种方式对其进行处理，那么它是不可信的。

请注意，这并不意味着您不能使用可访问性优势；[被信任的意思是您不受通常的限制，即必须在 System Preferences 中打开 Accessibility](http://lists.apple.com/archives/carbon-dev/2010/Feb/msg00043.html)。如果打开，您可以在不受信任的情况下使用辅助功能；相反，如果您受到信任，即使没有打开辅助功能，您也可以使用它。

# http-status-code-406 - 在此服务器上找不到请求资源 /page.php 的适当表示

> ID：10752910
> 
> 赞同：2
> 
> 时间：2012-05-25T10:36:51.147
> 
> 标签：http-status-code-406

在我网站的一个页面中，我有一个如下链接：

```
<a href="page.php?ref=selectquiz">Go to the page.php</a> 
```

当我单击链接时，我收到以下错误：

```
406 Not Acceptable
An appropriate representation of the requested resource /page.php could not be found on this server. 
```

这是我通过 Live HTTP 标头捕获的标头信息：
![在此处输入图像描述](../Images/4169721453458cda6a39ca312b5ad892.png)

**编辑：**
这真的很奇怪，因为当我将参数值从 selectquiz 转换为：
selectq selectqu ... selectquiz

它不起作用，但是当我键入时`selec`它就可以了！（在所有浏览器中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T10:36:13.410

我收到了相同的错误消息，但是当我尝试将图像添加到帖子/页面等时，这似乎是我的一个普遍问题，我可以上传图像但他们不会。我已经尝试重新上传图片，安装了新的 wordpress 下载，尝试了不同的主题，没有任何变化。

# json - 对象验证列表

> ID：10752912
> 
> 赞同：3
> 
> 时间：2012-05-25T10:36:56.187
> 
> 标签：json, validation, grails

您好我正在尝试使用其中的对象列表验证对象。根实例来自 JSON 客户端文件。

我创造了这样的东西

```
@Validateable
class Book {
    String title
    List authors
    static hasMany = [authors : Authors]

    static constraints = {
        authors(nullable:false,validator: { recipients ->
            recipients.every { it.validate() }
        } )     
    }
}

@Validateable
class Author {
    String name
    Integer property

        static constraints = {
        name(nullable:false)    
        property((nullable:false, blank: false))    
    }
} 
```

我正在尝试以这种方式在控制器中验证它：

```
class BookController {

def manageBook(Book book){
    if (book.validate()) {
        //Do my stuff
    }else{
        // return error
    }
}
} 
```

但它根本不起作用，我在控制台中看到了这个错误：

```
| Error 2012-05-25 11:26:34,014 [http-bio-8080-exec-1] ERROR errors.GrailsExceptionResolver  - MissingMethodException occurred when processing request: [POST] /BookApp/rest/bookApp/manageBook
No signature of method: org.codehaus.groovy.grails.web.json.JSONObject.validate() is applicable for argument types: () values: []
Possible solutions: wait(), values(). Stacktrace follows:
Message: No signature of method: org.codehaus.groovy.grails.web.json.JSONObject.validate() is applicable for argument types: () values: []
Possible solutions: wait(), values()
   Line | Method
->>  17 | doCall  in dataskaterserver.DeviceSeenWifiData$__clinit__closure1_closure2_closure3
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   886 | runTask in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run . . in     ''
^   680 | run     in java.lang.Thread 
```

任何人都可以帮助我，拜托..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:50:53.110

我找到了解决方案，它在文档中...... [http://grails.org/doc/latest/guide/validation.html#validationNonDomainAndCommandObjectClasses](http://grails.org/doc/latest/guide/validation.html#validationNonDomainAndCommandObjectClasses)

注册 Validateable 类 如果一个类没有用 Validateable 标记，它仍然可以被框架验证。执行此操作所需的步骤是在类中定义静态约束属性（如上所述），然后通过为 Config.groovy@ 中的 grails.validateable.classes 属性分配一个值来告诉框架该类：

```
grails.validateable.classes = [com.mycompany.myapp.User, com.mycompany.dto.Account] 
```

# c# - 为什么为 BitmapImage 对象设置 URISource 需要 Begin 和 End init？

> ID：10752914
> 
> 赞同：2
> 
> 时间：2012-05-25T10:37:00.650
> 
> 标签：c#, .net, wpf

我试图通过后面的代码设置 wpf 图像类的源属性，但由于未知原因，它不起作用。

这就是我的代码的样子

```
 1 BitmapImage img = new BitmapImage();
 2 img.UriSource = new Uri("C:\\data\\pictures\dkn.jpg");
 3 pict.Source = img; 
```

然后我做了一些谷歌搜索，我发现我需要更改我的代码，如下所示。

```
 1 BitmapImage img = new BitmapImage();
 2 img.BeginInit();
 3 img.UriSource = new Uri("C:\\data\\pictures\dkn.jpg");
 4 img.EndInit(); 
 5 pict.Source = img; 
```

但我无法理解的是上面的第 2 行和第 4 行。在设置 urisource 属性之前和之后开始和结束 init 的意义是什么。我期望 urisource 属性的行为与正常的 clr 属性一样。

请有任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T18:00:43.003

Begin and End init 指定对象支持一个简单的事务通知，用于属性的批量初始化 - MSDN

# c++ - c++外部变量不可见

> ID：10752916
> 
> 赞同：2
> 
> 时间：2012-05-25T10:37:06.093
> 
> 标签：c++, extern

我为我的应用程序类使用外部变量，因此我可以将类函数转发给 glutDisplayFunction(funcPtr)。

主.cpp：

```
#include "main.hpp"

int main(int argc, char** argv)
{
  gApp = new GameApp();
  return 0;
} 
```

主.hpp：

```
#ifndef MAIN_HPP
#define MAIN_HPP
  #include "GameApp.hpp"
#endif 
```

游戏应用程序.hpp：

```
#include <GL/gl.h>
#include <GL/freeglut.h>

class GameApp
{
  public:
  int running;

  GameApp();
  virtual ~GameApp();
  void resize(int width, int height);
  void init(int argc, char** argv, int width, int height);
  void draw();
  void update();
  void key_input(unsigned char key, int x, int y);
};

extern GameApp *gApp;

void display_clb()
{
  if (!gApp)
  {
    return;
  }

  gApp->draw();
} 
```

这是输出：

```
g++     -o dist/Debug/GNU-Linux-x86/gravity build/Debug/GNU-Linux-x86/main.o build/Debug/GNU-Linux-x86/GBody.o build/Debug/GNU-Linux-x86/GameApp.o build/Debug/GNU-Linux-x86/GBodyList.o -lm -lGL -lglfw -lGLU -lglut 
build/Debug/GNU-Linux-x86/main.o: In function `main':
/home/viktor/Documents/cpp/Gravity/main.cpp:6: undefined reference to `gApp'
/home/viktor/Documents/cpp/Gravity/main.cpp:7: undefined reference to `gApp'
/home/viktor/Documents/cpp/Gravity/GameApp.cpp:13: undefined reference to `gApp'
/home/viktor/Documents/cpp/Gravity/GameApp.cpp:18: undefined reference to `gApp'
build/Debug/GNU-Linux-x86/GameApp.o: In function `display_clb()':
/home/viktor/Documents/cpp/Gravity/GameApp.cpp:23: undefined reference to `gApp'
build/Debug/GNU-Linux-x86/GameApp.o:/home/viktor/Documents/cpp/Gravity/GameApp.cpp:28: more undefined references to `gApp' follow
collect2: ld returned 1 exit status
make[2]: *** [dist/Debug/GNU-Linux-x86/gravity] Error 1
make[2]: Leaving directory `/home/viktor/Documents/cpp/Gravity'
make[1]: *** [.build-conf] Error 2
make[1]: Leaving directory `/home/viktor/Documents/cpp/Gravity'
make: *** [.build-impl] Error 2 
```

我希望 gApp 在我的 main.cpp 和 GameApp 类中可见。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T10:40:28.387

这不是编译错误，而是链接错误。您的变量*声明*在 中可见`main.cpp`，但您没有在任何地方*定义*它 - 即您没有在任何地方为该变量分配空间。

您将需要一个（也正是一个）定义该变量的 C++ 文件。可能是你的`main.cpp`：

```
GameApp *gApp; 
```

（你也可以在那里初始化它，但在这种情况下没有必要。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T10:40:33.017

这告诉编译器有一个名为的变量`gApp`，但它是在其他地方定义的：

```
extern GameApp *gApp; 
```

因为该定义不存在，所以链接器失败。

将以下内容添加到另一个（并且只有一个）源文件中：

```
GameApp *gApp; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T10:41:35.403

使用`extern`，您告诉编译器该变量存在，但它位于其他位置。编译器认为您存在变量，并且

您所要做的就是在源代码的某处创建实际变量。你可以通过简单地添加类似`GameApp *gApp;`某处的东西来做到这一点。例如在您的 cpp 文件中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T10:56:35.243

和其他人之前的回答一样，你宣布了 gApp 的存在，但你实际上并没有提供它。

再补充一句：我建议你把gApp的定义放在一个“GameApp.cpp”文件中（不是GameApp.hpp），把它的声明放在一个“GameApp.h”文件里。

# objective-c - presentModalViewController 上的内存泄漏

> ID：10752917
> 
> 赞同：2
> 
> 时间：2012-05-25T10:37:06.730
> 
> 标签：objective-c, xcode, memory-leaks, instruments

我正在为用户打开相机拍照。当我拍照并按下“使用”时，我不断出现内存泄漏：[self presentModalViewController:imagePicker animated:YES],

完整代码：

```
imagePicker = [[UIImagePickerController alloc] init];
imagePicker.delegate = self;      
imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
imagePicker.mediaTypes = [NSArray arrayWithObjects:
                              (NSString *) kUTTypeImage,
                              (NSString *) kUTTypeMovie, nil];
imagePicker.allowsEditing = NO;

[self presentModalViewController:imagePicker animated:YES]; //This leaks 
```

在两者中`didFinishPickingMediaWithInfo`，`imagePickerControllerDidCancel`我都输入了这一行：

```
[imagePicker dismissModalViewControllerAnimated:YES]; 
```

我确实知道以前有人问过这个问题，但他们都没有看到对我的泄漏有任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:46:25.780

如果它不是 ARC 环境：

您的 `imagePicker = [[UIImagePickerController alloc] init];` 退货保留计数+1，

然后 `[self presentModalViewController:imagePicker animated:YES]` 保留你的控制器，所以保留计数+2，

它`[imagePicker dismissModalViewControllerAnimated:YES];` 是+1，所以你的控制器仍然挂在内存中。

之后释放您的控制器`presentModalViewController`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:46:12.180

原来这是iOS本身代码中的一个错误。

我下载了 Apple 开发者网站的示例代码，同样的漏洞也出现了。所以这将不是我自己能解决的问题，我希望这能很快得到纠正。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T12:50:10.650

如何创建一个`@property`for`imagePicker`并分配：

```
self.imagePicker = [[UIImagePickerController alloc] init]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T10:50:13.840

试试这个代码

```
imagePicker = [[[UIImagePickerController alloc] init] autorelease]; 
```

并确定你有什么

```
NSAutoreleasePool* pool = [[NSAutoreleasePool alloc] init];

// your code

[pool release]; 
```

# android - 如何在 Android SOAP Web 服务中将 InputStream 数据转换为字符串

> ID：10752919
> 
> 赞同：9
> 
> 时间：2012-05-25T10:37:09.680
> 
> 标签：android, string, web-services, response, inputstream

当我从 Android 使用肥皂网络服务时，我想在输出字符串中显示结果，如何将该输入流转换为 Sting？

```
 package com.venkattt.pack;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.SocketException;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.AndroidHttpTransport;
import org.ksoap2.transport.HttpTransportSE;
import org.xmlpull.v1.XmlPullParser;
import org.xmlpull.v1.XmlPullParserFactory;

import android.app.Activity;
import android.os.Bundle;

public class SoapWebservicesExampleActivity extends Activity {
    /** Called when the activity is first created. */
      final String NAMESPACE = "urn:sap-com:document:sap:soap:functions:mc-style";
     final String URL = "http://**********:8000/sap/bc/srt/wsdl/srvc_14DAE9C8D79F1EE196F1FC6C6518A345/wsdl11/allinone/ws_policy/document?sap-client=800&sap-user=************&sap-password=*********";
      final String METHOD_NAME = "Z_GET_CUST_GEN";
     final String SOAP_ACTION = "urn:sap-com:document:sap:soap:functions:mc-style/Z_GET_CUST_GEN";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
           SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); // set up
            request.addProperty("Input", "1460");
            request.addProperty("Langu", "d");
            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER12); // put all required data into a soap
            envelope.dotNet = true;
            envelope.setOutputSoapObject(request);
            HttpTransportSE httpTransport = new HttpTransportSE(URL);
            httpTransport.debug = true;

            try {

                 httpTransport.call(SOAP_ACTION, envelope);
                 SoapObject response = (SoapObject)envelope.getResponse();
                 String str = response.getProperty(0).toString();

                 System.out.println("theeeeeeeeeee"+str);

                }
            catch(SocketException ex){
                    ex.printStackTrace();

                } catch (Exception e) {
                   e.printStackTrace();
                }
        }

    } 
```

我的最终代码请看一下并告诉我

我在哪里可以在上面的代码中进行转换？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-25T10:38:45.437

```
 String  response = convertStreamToString(instream); 
```

**方法**

```
private String convertStreamToString(InputStream is) {
    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb = new StringBuilder();

    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            sb.append(line).append('\n');
        }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return sb.toString();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-16T20:34:10.167

阅读行（\n 和 \r；没有区别）可能会造成混乱。要从 InputStream 中获取字符串，我建议您复制/粘贴以下方法并在需要时调用它。

```
public static String getStringFromInputStream(InputStream stream, String charsetName) throws IOException
{
    int n = 0;
    char[] buffer = new char[1024 * 4];
    InputStreamReader reader = new InputStreamReader(stream, charsetName);
    StringWriter writer = new StringWriter();
    while (-1 != (n = reader.read(buffer))) writer.write(buffer, 0, n);
    return writer.toString();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-27T09:27:46.630

根据[Shane McC 文章](https://teamtreehouse.com/forum/convert-an-inputstream-to-a-string-value-in-java-android-app)，您可以使用此方法：

```
public String readFully(InputStream entityResponse) throws IOException {
ByteArrayOutputStream baos = new ByteArrayOutputStream();
byte[] buffer = new byte[1024];
int length = 0;
while ((length = entityResponse.read(buffer)) != -1) {
    baos.write(buffer, 0, length);
}
return baos.toString();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-09T20:28:47.937

```
import com.google.android.gms.common.util.IOUtils;

InputStream input = getInputStream();
String body = new String(IOUtils.toByteArray(input), "UTF-8");
input.close(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T10:43:38.917

你可以这样试试：

```
SoapObject response = (SoapObject)envelope.getResponse();
String str = response.getProperty(0).toString(); 
```

str 将保存内容，您需要根据需要进一步解析它。另外，请查看此链接以及如何解析它的链接。

[http://android-devblog.blogspot.com/2010/06/soap-on-android.html](http://android-devblog.blogspot.com/2010/06/soap-on-android.html)

尝试使用肥皂 VER11 而不是 VER12，因为这会出错。

```
SoapSerializationEnvelope envelope = new  SoapSerializationEnvelope(SoapEnvelope.VER11); 
```

// 将所有需要的数据放入一个soap中

可以从此链接获得更多信息： [http ://groups.google.com/group/android-developers/browse_thread/thread/b585862b6e939fd2](http://groups.google.com/group/android-developers/browse_thread/thread/b585862b6e939fd2)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-17T11:05:51.863

您可以使用：

```
String response = org.apache.commons.io.IOUtils.toString(instream, "UTF-8"); 
```

您需要将 org.apache.commons.io.jar 添加到构建路径。

# java - jvisualvm - 如何查看具有内存消耗的活动对象

> ID：10752924
> 
> 赞同：0
> 
> 时间：2012-05-25T10:37:29.593
> 
> 标签：java, profiling, jvisualvm

我正在尝试使用 JVisualVM 查看我的应用程序活动对象及其相应的内存计数（可能在包级别）

使用 jstad 连接时如何实现相同的效果

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-09-04T20:49:19.300

VisualVM 绝对支持通过堆转储查看和检查实时对象，以及实时采样分配。

对于堆转储，右键单击进程，选择堆转储。

这将打开堆转储视图。在摘要页面上，您可以按保留大小计算最大的 n 个对象，然后单击进入各种视图。

它提供了与上面建议的使用 jmap 和 mat 基本相同的功能，但工作流程和可用性要好得多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T11:14:49.587

我很确定你不能对正在运行的进程使用 VisualVM 来做到这一点。您需要做的是使用[jmap](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jmap.html)进行堆转储（例如 jmap -dump:format=b,file=heapdump.bin），然后使用[mat](http://www.eclipse.org/mat/)之类的工具来分析该转储。

请注意，堆转储会在相当长的时间内阻塞您的进程，尤其是在您有大堆的情况下。

要获得更一般级别的信息，您还可以对您的进程运行 jmap -histo:live 以查看每种类型的对象数量及其足迹。

# validation - 我可以在动作类执行方法中覆盖 struts 验证方法吗？

> ID：10752932
> 
> 赞同：0
> 
> 时间：2012-05-25T10:38:33.767
> 
> 标签：validation, struts, execute

我是 Struts 框架的新手，目前我正在使用 struts 框架开发一个基于 Web 的应用程序。

众所周知，在 Struts 应用程序中，我们可以覆盖`validate()`用户定义的 Formbean 类中的 以验证用户输入，同样，我可以在 Action 类的 execute() 中覆盖它吗？

如果可以，在将 ActionError 对象添加到 ActionErrors 对象之后，我需要做什么？只是帮我解释一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T10:44:16.530

你不能*覆盖*它，因为 Action 没有定义任何`validate()`方法。但是您可以在操作中执行验证，是的：

```
public ActionForward execute(ActionMapping mapping,
                             ActionForm form,
                             HttpServletRequest request,
                             HttpServletResponse response) {
    ...
    ActionMessages errors = doSomeValidation();
    if (!errors.isEmpty()) {
        saveErrors(request, errors);
        return mapping.getInputForward();
    }
    ...
} 
```

# c# - Silverlight 应用程序未与服务器上的 Web 服务通信

> ID：10752933
> 
> 赞同：0
> 
> 时间：2012-05-25T10:38:39.927
> 
> 标签：c#, silverlight, iis, asynchronous

我在笔记本电脑上本地开发了一个 Silverlight 应用程序。

一切正常，但是当我将它部署到服务器时，Web 服务运行良好，因为它与数据库通信并获得所需的结果。`SL`我的问题在于它引发此错误的前端应用程序：

```
Debugging resource strings are unavailable

   at System.ComponentModel.AsyncCompletedEventArgs.RaiseExceptionIfNecessary()
   at FrontEnd.WebService.UIDReturnCompletedEventArgs.get_Result()
   at FrontEnd.Views.Users.client_UIDReturnCompleted(Object sender, UIDReturnCompletedEventArgs e)
   at FrontEnd.WebService.Service1SoapClient.OnUIDReturnCompleted(Object state)
Caused by: [Async_ExceptionOccurred]
Arguments: 
Debugging resource strings are unavailable. Often the key and arguments provide sufficient information to diagnose the problem. See http://go.microsoft.com/fwlink/?linkid=106663&Version=4.1.10329.0&File=System.dll&Key=Async_ExceptionOccurred 
```

所以我去了给定的链接，它说这是一个`Async_ExceptionOccurred`错误。这是时间问题吗？这`UIDReturn`是一种从数据库中取回用户 ID 的 Web 方法，这是在 Silverlight 页面的页面加载时启动的，我认为该值可能没有及时返回，因此这就是它崩溃的原因，但是它可以在本地和上工作测试服务器，所以也许这是一个 IIS 问题？

这是调用 Web 服务的地方 -

```
 void OnLoadCompleted(object sender, RoutedEventArgs e)
    {
        string fullUserName = WebContext.Current.User.DisplayName;
        string userName = fullUserName.Substring(fullUserName.IndexOf('\\') + 1);

        WebService.Service1SoapClient client = new WebService.Service1SoapClient();

            client.UIDReturnCompleted += new EventHandler<UIDReturnCompletedEventArgs>(client_UIDReturnCompleted);
            client.UIDReturnAsync(userName);

    } 
```

来自`fullUserName`当前登录的用户，可能尚未加载此值，因此它正在中断连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T11:48:30.897

这似乎与我之前回答过的这篇文章有关：[Consume WCF library in Silverlight 4 application](https://stackoverflow.com/questions/10229516/consume-wcf-library-in-silverlight-4-application/10231280#10231280)

# android - 在 Android 中注入非英文字符

> ID：10752936
> 
> 赞同：7
> 
> 时间：2012-05-25T10:39:03.313
> 
> 标签：android, events, code-injection

我正在远程控制应用程序上编程。其中一项任务是注入角色。我目前使用的代码如下所示：

```
Instrumentation instr = new Instrumentation();

String str="a";

// basically the same like calling instr.sendStringSync(str);
char[] chars = str.toCharArray();
KeyCharacterMap keyCharacterMap = KeyCharacterMap.load(KeyCharacterMap.VIRTUAL_KEYBOARD);
KeyEvent[] keyEvents = keyCharacterMap.getEvents(chars);
if (keyEvents != null) {
    for (KeyEvent kev : keyEvents) {
        instr.sendKeySync(kev);
    }
} 
```

这对英文字符非常有效（字符显示在 EditText 框中）。但是，如果我尝试注入例如韩语字符，则会失败。即使我配置了韩语和键盘，函数 getEvents 也会返回 null。

我知道还有另一种直接注入字符串的方法：

```
KeyEvent event = new KeyEvent(SystemClock.uptimeMillis(), str, 0, 0);
instr.sendKeySync(event); 
```

这也不起作用 - EditText 框中没有显示任何字符，并且在我的测试活动中也没有调用 onKeyMultiple()。

这很奇怪，因为具有相同事件的 dispatchKeyEvent() 在我的测试活动中起作用：

```
KeyEvent event = new KeyEvent(SystemClock.uptimeMillis(), str, 0, 0);
dispatchKeyEvent(event); 
```

无论哪个活动，我的远程控制应用程序都需要注入事件。这可以使用 Instrumentation（带有`android.permission.INJECT_EVENTS`平台密钥的签名）来实现。

如何使用仪器注入非英文字符？还有另一种方法可以做到这一点吗？例如使用 dispatchKeyEvent （也必须适用于其他活动/应用程序）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:54:14.937

我将上面的部分作为额外信息。我找到了解决方案。它需要root，但是如果您可以使用应用程序密钥签名，我想这不是问题。您可以编辑文件 Virtual.kcm (/system/usr/keychars/Virtual.kcm)，它是默认的键字符映射 (kcm)。您可以添加任何您想要的字符，然后使用 Instrumentation.sendStringSync(String string) 方法，因为它将能够从新的 kcm 生成 KeyEvents。

我在手机上编辑 kcm 时遇到了一些问题，所以我所做的就是将其复制到计算机上，在那里进行编辑，然后将其复制回设备。

我希望这有帮助！

* * *

在此[链接](http://source.android.com/tech/input/key-character-map-files.html)中，出现以下内容。无论您在设置上选择什么，虚拟键盘都具有美国 keyCharacterMap 和布局。我一直无法找到解决此问题的方法。

```
Language Note

Android does not currently support multilingual keyboards. Moreover, the built-in generic key character map assumes a US English keyboard layout.

OEMs are encouraged to provide custom key character maps for their keyboards if they are designed for other languages.

Future versions of Android may provide better support for multilingual keyboards or user-selectable keyboard layouts. 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-23T21:46:14.240

您可以将此方法和 InputFilter 用于 EditText：

```
private boolean isLatinSymbolOrDigit(char c) 
{
    // Allow [a-zA-Z0-9]
    if ('0' <= c && c <= '9')
        return true;
    if ('a' <= c && c <= 'z')
        return true;
    if ('A' <= c && c <= 'Z')
        return true;
    return false;
}

InputFilter filter = new InputFilter() 
{
    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) 
    {
        for (int i = start; i < end; i++) 
        {
            if (isLatinSymbolOrDigit(source.charAt(i))) 
            {
            }                   
            else 
            {
                //wrong character
                return "";
            }
        }
        return null;
    }
};

editText.setFilters(new InputFilter[] {filter}); 
```

# c# - 使用 protobuf.net 反序列化缺失的类型

> ID：10752937
> 
> 赞同：2
> 
> 时间：2012-05-25T10:39:03.703
> 
> 标签：c#, protobuf-net

我有一个带有插件架构的应用程序。插件有自己的数据容器，它们都继承自基本接口 IPluginDataStorage。DataStorage 对象被序列化以保留状态，它包含这些子类的列表以及其他数据。DynamicType 标志设置为 true，因为直到运行时才知道正在使用哪些插件。

```
[Serializable]
[ProtoContract]
public class DataStorage
{
    [ProtoMember(200, DynamicType = true)]
    public List<IPluginDataContainer> PluginDataStorage { get; set; } 
```

序列化此设置时工作正常，但我在可靠地反序列化列表时遇到问题。如果我尝试反序列化对象而无法访问序列化时使用的所有插件，我自然会得到一个关于缺少类型的异常。

> 无法解析类型：NOSMemoryConsumptionPlugin.NOSMemoryConsumptionData，NOSMemoryConsumptionPlugin，Version=1.2.0.17249，Culture=neutral，PublicKeyToken=null（您可以使用 TypeModel.DynamicTypeFormatting 事件来提供自定义映射）

异常提示我可以通过事件提供格式，但我看不出这有什么帮助，因为问题是我没有可用的类型。在这些情况下，我想做的是完全忽略反序列化该对象。在这些情况下，列表项甚至可以默认为基类的虚拟实例。但是如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:27:59.650

那（选择跳过或默认）是一个有趣的用例，我认为我没有充分考虑过；但是，您可以*通过*以下方式自己执行此操作：

```
public class NilContainer : IPluginDataContainer {} 
```

然后订阅 `DynamicTypeFormatting`事件；如果您不认识类型，请提供`typeof(NilContainer)`.

IE

```
RuntimeTypeModel.Default.DynamicTypeFormatting += (sender, args) =>
{
    Type type;
    if(!yourTypeMap.TryGetValue(args.FormattedName, out type))
    {
        type = typeof (NilContainer);
    }
    args.Type = type;
}; 
```

（完全未经测试）

# image - 如何在opengl中加载图像

> ID：10752940
> 
> 赞同：0
> 
> 时间：2012-05-25T10:39:24.860
> 
> 标签：image, opengl, load

我需要将图像上传到我的背景中...有人知道该怎么做吗？我知道我必须执行以下步骤：

```
1) Load image data into system memory
2) Generate a texture name with glGenTextures
3) Bind the texture name with gBindTexture
4) Set wrapping and filtering mode with glTexParameter
5) call glTexImage2D with the right parameters depending on the image nature to load image data into video memory 
```

但我不知道如何将它们放入opengl

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T11:03:49.140

OpenGL 支持纹理和图像……但用户需要提供数据。所以你必须使用 sme 库或附加代码来加载数据。

我建议使用非常简单的 lib SOIL - [http://www.lonesock.net/soil.html](http://www.lonesock.net/soil.html) 或您的 SDK 提供的一些库

一般来说：

```
load texture bytes into pBytes;
glTexImage2D(..., ..., ..., pBytes); 
```

# teamcity - 是否可以授予 TeamCity 中域组的访问权限？

> ID：10752943
> 
> 赞同：4
> 
> 时间：2012-05-25T10:39:35.437
> 
> 标签：teamcity

我正在尝试使用 Windows 身份验证设置 TeamCity，但找不到任何有关将 TeamCity 配置为仅允许登录特定 AD 组的文档，这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T21:51:39.577

这对于 Windows 域身份验证是不可能的。改用 TeamCity LDAP 身份验证，它功能更强大且支持 AD。它仍然可能需要一些努力和试错方法才能正确配置。以下是仅允许单个 AD 组登录的[示例。](http://confluence.jetbrains.net/display/TCD7/Typical+LDAP+Configurations#TypicalLDAPConfigurations-BasicLDAPLoginforUsersinaSpecificLDAPGroupOnly)

# ruby-on-rails - 购物车数组麻烦，cart.total_price

> ID：10752946
> 
> 赞同：2
> 
> 时间：2012-05-25T10:39:40.443
> 
> 标签：ruby-on-rails, methods, sum, undefined, shopping-cart

我正在为 RoR 中的一个网站编写一个购物车系统，但我的购物车有一个奇怪的问题。

我已经用相同的购物车模型制作了另一个应用程序并且没有这个问题。

所以情况如下：

*   将产品添加到我的购物车，没关系。
*   写cart.total_item，没关系。
*   写 cart.total_price，这个失败。

我的应用程序告诉我我试图用来计算“ *cart.total_price* ”*的“**方法*”是“*未定义*”。

 ***这是记录：

显示*/var/rails/caveSACMS/app/views/catalogues/index.html.erb*其中第 196 行提出：

```
    #<Array:0x00000005ce09f0> 的未定义方法“prod_pxuttc”

```

提取的源代码（在 #196 行附近）：

```
    193：</tr>
    194：<tr 风格=“背景颜色：#2c2c2c;”>
    195: <th style="text-align:center;padding:2px;color:#a2a2a2;">
    196：总计：<%=@cart.total_price%>
    197：</th>
    198：</tr>
    199：<tr 风格=“背景颜色：#2c2c2c;”>

```

Rails.root：/var/rails/myApp

```
    app/models/cart.rb:15:in `block in total_price'
    activesupport (3.2.1) lib/active_support/core_ext/enumerable.rb:60:in `map'
    activesupport (3.2.1) lib/active_support/core_ext/enumerable.rb:60:in `sum'
    app/models/cart.rb:15:in `total_price'
    app/views/catalogues/index.html.erb:196:in `_app_views_catalogues_index_html_erb___2685208389527055012_43230480'
    actionpack (3.2.1) lib/action_view/template.rb:143:in `block in render'
    activesupport (3.2.1) lib/active_support/notifications.rb:125:in `instrument'
    actionpack (3.2.1) lib/action_view/template.rb:141:in `render'
    actionpack (3.2.1) lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
    actionpack (3.2.1) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
    activesupport (3.2.1) lib/active_support/notifications.rb:123:in `block in instrument'
    activesupport (3.2.1) lib/active_support/notifications/instrument.rb:20:in `instrument'
    activesupport (3.2.1) lib/active_support/notifications.rb:123:in `instrument'
    actionpack (3.2.1) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
    actionpack (3.2.1) lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
    actionpack (3.2.1) lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
    actionpack (3.2.1) lib/action_view/renderer/template_renderer.rb:39:in `render_template'
    actionpack (3.2.1) lib/action_view/renderer/template_renderer.rb:12:in `render'
    actionpack (3.2.1) lib/action_view/renderer/renderer.rb:36:in `render_template'
    actionpack (3.2.1) lib/action_view/renderer/renderer.rb:17:in `render'
    actionpack (3.2.1) lib/abstract_controller/rendering.rb:109:in `_render_template'
    actionpack (3.2.1) lib/action_controller/metal/streaming.rb:225:in `_render_template'
    actionpack (3.2.1) lib/abstract_controller/rendering.rb:103:in `render_to_body'
    actionpack (3.2.1) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
    actionpack (3.2.1) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
    actionpack (3.2.1) lib/abstract_controller/rendering.rb:88:in `render'
    actionpack (3.2.1) lib/action_controller/metal/rendering.rb:16:in `render'
    actionpack (3.2.1) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
    activesupport (3.2.1) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
    /usr/share/ruby-rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/benchmark.rb:310:in `realtime'
    activesupport (3.2.1) lib/active_support/core_ext/benchmark.rb:5:in `ms'
    actionpack (3.2.1) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
    actionpack (3.2.1) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
    activerecord (3.2.1) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
    actionpack (3.2.1) lib/action_controller/metal/instrumentation.rb:39:in `render'
    actionpack (3.2.1) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
    actionpack (3.2.1) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
    actionpack (3.2.1) lib/abstract_controller/base.rb:167:in `process_action'
    actionpack (3.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'
    actionpack (3.2.1) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
    activesupport (3.2.1) lib/active_support/callbacks.rb:414:in `_run__1902602080326961788__process_action__2511143183103068215__callbacks'
    activesupport (3.2.1) lib/active_support/callbacks.rb:405:in `__run_callback'
    activesupport (3.2.1) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
    activesupport (3.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
    actionpack (3.2.1) lib/abstract_controller/callbacks.rb:17:in `process_action'
    actionpack (3.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'
    actionpack (3.2.1) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
    activesupport (3.2.1) lib/active_support/notifications.rb:123:in `block in instrument'
    activesupport (3.2.1) lib/active_support/notifications/instrument.rb:20:in `instrument'
    activesupport (3.2.1) lib/active_support/notifications.rb:123:in `instrument'
    actionpack (3.2.1) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
    actionpack (3.2.1) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
    activerecord (3.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
    actionpack (3.2.1) lib/abstract_controller/base.rb:121:in `process'
    actionpack (3.2.1) lib/abstract_controller/rendering.rb:45:in `process'
    actionpack (3.2.1) lib/action_controller/metal.rb:203:in `dispatch'
    actionpack (3.2.1) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
    actionpack (3.2.1) lib/action_controller/metal.rb:246:in `block in action'
    actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:66:in `call'
    actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
    actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:30:in `call'
    旅程 (1.0.3) lib/journey/router.rb:68:in `block in call'
    旅程 (1.0.3) lib/journey/router.rb:56:in `each'
    旅程 (1.0.3) lib/journey/router.rb:56:in `call'
    actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:589:in `call'
    actionpack (3.2.1) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
    rack (1.4.1) lib/rack/etag.rb:23:in `call'
    rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
    actionpack (3.2.1) lib/action_dispatch/middleware/head.rb:14:in `call'
    actionpack (3.2.1) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
    actionpack (3.2.1) lib/action_dispatch/middleware/flash.rb:242:in `call'
    rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
    rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
    actionpack (3.2.1) lib/action_dispatch/middleware/cookies.rb:338:in `call'
    activerecord (3.2.1) lib/active_record/query_cache.rb:64:in `call'
    activerecord (3.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
    actionpack (3.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
    activesupport (3.2.1) lib/active_support/callbacks.rb:405:in `_run__2985483728309837116__call__1908674296767231568__callbacks'
    activesupport (3.2.1) lib/active_support/callbacks.rb:405:in `__run_callback'
    activesupport (3.2.1) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
    activesupport (3.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
    actionpack (3.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
    actionpack (3.2.1) lib/action_dispatch/middleware/reloader.rb:65:in `call'
    actionpack (3.2.1) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
    actionpack (3.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
    actionpack (3.2.1) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
    railties (3.2.1) lib/rails/rack/logger.rb:26:in `call_app'
    railties (3.2.1) lib/rails/rack/logger.rb:16:in `call'
    actionpack (3.2.1) lib/action_dispatch/middleware/request_id.rb:22:in `call'
    rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
    rack (1.4.1) lib/rack/runtime.rb:17:in `call'
    activesupport (3.2.1) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
    rack (1.4.1) lib/rack/lock.rb:15:in `call'
    actionpack (3.2.1) lib/action_dispatch/middleware/static.rb:53:in `call'
    railties (3.2.1) lib/rails/engine.rb:479:in `call'
    railties (3.2.1) lib/rails/application.rb:220:in `call'
    rack (1.4.1) lib/rack/content_length.rb:14:in `call'
    railties (3.2.1) lib/rails/rack/log_tailer.rb:14:in `call'
    机架 (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
    /usr/share/ruby-rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `服务'
    /usr/share/ruby-rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
    /usr/share/ruby-rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'

```

**要求**

参数：

```
    {"区域"=>"2",
     “类别”=>“-1”，
     "millsim"=>"-1",
     "price_from"=>"",
     "price_to"=>"-1",
     "cart_action"=>"-1",
     "to_add"=>"-1",
     “show_cart”=>“-1”}

```

**显示会话转储**

```
    _csrf_token: "kDD3qIZpvZInGWKclqSUQoyraIkcs20VKbhBMBZezJ4="
    购物车：#<购物车：0x00000005ce0a68 @items=[[#<CsaV3Prd prod_wid：6024，prod_cid：907509，prod_pxuttc：#<BigDecimal：5ce07e8，'0.36E2'，9（18）>>]]，@total_price=0>
    session_id：“7efaefcb7af5aa99d68c7466c1e7ee4c”

```

* * *

在我的控制器中，我根据需要有我的购物车“*初始化*”。

```
    类目录控制器 < 应用控制器
      定义索引
        @cart = find_cart
        @items = @cart.items
      结尾
    结尾

```

这是我的购物车模型：

```
    类购物车
      attr_reader ：项目

      定义初始化
        @项目 = []
        @total_price = 0
      结尾

      def add_product(产品)
        @项目 << 产品
        产品
      结尾

      def total_price
        @items.sum{ |项目| item.prod_pxuttc}
      结尾

      def total_items
        @items.length
      结尾
    结尾

```

我不明白为什么在这个应用程序上的操作“*总价**”*不起作用。我的其他应用程序在相同型号下工作正常。

这两个应用程序之间的唯一区别是：

*   在 Not-Working 应用程序中，商品价格的列是 ' *decimal(10,2)* ' 类型。
*   在工作应用程序上，商品价格列是“ *int(11)* ”类型。

最奇怪的是，我可以对表格中的“*prod_pxuttc*”列进行排序并将其呈现为列表。它呈现值。

这是从表中对相同值进行排序的两种不同顺序：

*   第一种方法（处理和呈现值）：（*此顺序对许多项目进行排序）*

```
    @prod = CsaV3Prd.find(:all,{:conditions=>["prod_cat = ?","#{params[:categorie]}"],:order=>"prod_cid DESC"})

```

*   第二种方法（购物车方法不起作用并调用错误）：（*此订单排序一个唯一项目）*

```
    product = CsaV3Prd.find(:all,{:select=>["prod_wid, prod_cid, prod_pxuttc"],:conditions=>["prod_cid = ?","#{params[:to_add]}"],:order= >“prod_cid DESC”}）

```

如果有人知道如何解决这个问题，或者如果已经有这个问题的线程*（我搜索并没有找到）*请告诉我。

谢谢。

*编辑 29-05-2012*

**解决**

所以问题是关于选择一个数组。

通过选择一件物品放入购物车，一切正常。

我将参数*':all'*替换为*':first'*。

感谢 Frederick Cheung 的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:13:46.620

```
product = CsaV3Prd.find(:all,{:select=>["prod_wid, prod_cid, prod_pxuttc"],:conditions=>["prod_cid = ?","#{params[:to_add]}"],:order=>"prod_cid DESC"}) 
```

返回一个数组（可能包含一个元素），而不是一个产品。`find :first`如果您只想要一个项目，请使用。

您还可以从您提供的会话转储中看到这一点，您可以在其中看到 @items 是一个数组数组（看看它是如何以 [[ ? 开头的）

与您的问题无关，但

```
:select=>["prod_wid, prod_cid, prod_pxuttc"] 
```

工作可能是一个意外（由于 Array#to_s 所做的），你可能应该做的是

```
:select=>"prod_wid, prod_cid, prod_pxuttc" 
```***

# c# - 在 asp.net 中的 gridview 内的 Modalpopupextender

> ID：10752949
> 
> 赞同：1
> 
> 时间：2012-05-25T10:39:44.530
> 
> 标签：c#, asp.net, .net, gridview, vb.net-2010

我有一个gridview，其中有一些列和查看详细信息链接按钮。我想打开一个弹出窗口，其中包含另一个包含一些详细信息的gridview。为此，我将商店编号作为命令参数从查看详细信息链接按钮传递。但是问题是弹出窗口正在打开，但服务器端事件 LinkViewDetail_Command 没有被调用，因为 gridview 没有显示任何内容。建议我对此代码进行一些修改或其他方式吗？

```
<asp:TemplateField HeaderText="View Detail" >
            <ItemTemplate>
             <asp:LinkButton ID="LinkButtonViewDetail" Text="View" runat="server"  CommandArgument='<%#Eval("StoreNumber").ToString()%>' OnCommand="LinkViewDetail_Command"/>
             <ajax:ModalPopupExtender runat ="server" ID="ModalPopupWarning" 
            TargetControlID="LinkButtonViewDetail"
            PopupControlID="PanelPopUp"  
            CancelControlID="ButtonCancel"
                            ></ajax:ModalPopupExtender>
            </ItemTemplate>
          </asp:TemplateField>

 Public Sub LinkViewDetail_Command(ByVal sender As Object, ByVal e As CommandEventArgs)
    Try

        GridViewViewNewStoreTransitionStore.DataSource = m_DataAccess.GetFinalStoreCloseAcquisition(CInt(e.CommandArgument))
        GridViewViewNewStoreTransitionStore.DataBind()

    Catch ex As Exception
        Common.WriteLog(ex)
        Response.Redirect("..\Errors.aspx", False)
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T11:26:50.593

将您的 ModalPopupExtender 放在网格视图之外并像这样初始化它

```
 <ajax:ModalPopupExtender runat ="server" ID="ModalPopupWarning" 
        TargetControlID="PanelPopUp" <!--dont use the LinkButtonViewDetail as a TargetControlID use the    id of any other control -->
        BehaviorID="PanelPopUpBI" 
        PopupControlID="PanelPopUp"  
        CancelControlID="ButtonCancel">
 </ajax:ModalPopupExtender> 
```

然后使用网格视图中的 OnRowCreated 事件将详细视图链接注册为异步触发器

```
protected void OnRowCreated(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
       foreach (Control cells in e.Row.Controls)
       {
         foreach (Control link in cells.Controls)
         {
            if (link.GetType() == typeof(LinkButton))
            {
               // here i suppose that you have a master page
               (this.Master.FindControl("ToolkitScriptManager") as ScriptManager).RegisterAsyncPostBackControl(link);
            }
          }
       }
    }

} 
```

在您的 aspx 文件中，使用此脚本在 ajax 请求完成时显示弹出窗口

```
 <script type="text/javascript">
  function pageLoad() { 
   Sys.WebForms.PageRequestManager.getInstance().add_endRequest(endRequestHandler);

        function endRequestHandler() {
            $find('PanelPopUpBI').show();
        }
    }
</script> 
```

# javascript - 更新javascript确认框的样式

> ID：10752954
> 
> 赞同：0
> 
> 时间：2012-05-25T10:39:58.273
> 
> 标签：javascript, jquery, confirm

如何在下面的例子中更新javascript确认框的样式，例如使用jquery？

```
<script type="text/javascript">
function deleteRow(tableName,colName,id, obj){ 
    var r=confirm("Delete row from table " + tableName + " having " + colName+ " " +id+ "?" );
    if (r==true) {
           $.ajax({
                   type: "POST",
                   url: "callpage.php?page=tables/delete.php",
                   data: "tableName=" + tableName + "&colName=" + colName + "&id=" + id,
                   success: function(msg){
                     if(msg === '1'){
                        obj = $(obj).parents('tr');
                        $(obj).slideUp().remove();
                     }
                     else
                         alert("Error.");
                   }
            });

    }
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:43:50.570

你不能。确认框由浏览器创建。

有许多可用的脚本，其中一些是 jQuery 插件，用于在页面中使用固定定位`<div>`的 s 创建模态对话。请注意，它们将异步返回用户的选择（在回调中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T10:44:15.203

你不能。显示的窗口由`prompt()`平台渲染。

您需要使用带有回调的自定义模式，因为您无法模拟浏览器中的阻塞性质并且仍然接收按钮事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T10:42:57.450

你不能为盒子本身设置样式，但是有很多很好的插件可以像普通的确认框一样工作。

[https://www.google.com/search?q=jquery+confirm+box+plugin](https://www.google.com/search?q=jquery+confirm+box+plugin)

我在 jConfirmAction (http://www.webappers.com/2010/05/10/jconfirmaction-a-jquery-plugin-for-confirmation-box/) 方面有一些很棒的经验

# iphone - 我可以在我的应用程序中列出 iPhone 应用程序吗？

> ID：10752955
> 
> 赞同：2
> 
> 时间：2012-05-25T10:39:58.663
> 
> 标签：iphone, ios, web-services, app-store

我想知道我可以列出并显示应用商店中的 iphone 应用吗？是否有任何网络服务或其他方式来获取应用商店的应用链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:52:53.217

一种方法是使用[iTunes Link Maker](http://itunes.apple.com/linkmaker/)并对其点击事件进行按钮操作，您可以打开从链接制造商获得的 URL。

例如，我有使用 Rovio 移动应用程序的 URL `iTunes Link Maker`，单击它您将获得 rovio 提供的所有应用程序的列表。这是链接[http://itunes.apple.com/us/artist/rovio-mobile-ltd./id298910979?ign-mpt=uo%3D4](http://itunes.apple.com/us/artist/rovio-mobile-ltd./id298910979?ign-mpt=uo%3D4)

```
-(void)yourButtonAction
{

 NSString*thePath=[NSString stringWithFormat:@"http://itunes.apple.com/us/artist/rovio-mobile-ltd./id298910979?ign-mpt=uo%3D4"];
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:thePath]];

} 
```

**注意**：这仅适用于设备，模拟器没有安装应用商店应用程序。您将在模拟器中收到“Safari 无法打开此网站”错误。

# windows-phone-7 - 应用程序中心“个人”和“公司”帐户类型之间的区别

> ID：10752959
> 
> 赞同：1
> 
> 时间：2012-05-25T10:40:13.440
> 
> 标签：windows-phone-7, app-hub

在应用程序中心，有两种帐户类型“个人”和“公司”。谁能告诉我们两者之间的区别 1\. 提交到市场的应用程序数量 2\. 解锁的设备数量 3\. 可以在每台设备上测试的应用程序数量 4\. 开发人员为每个应用程序共享

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T11:29:58.617

来自[MSDN](http://msdn.microsoft.com/en-us/library/hh202924%28v=vs.92%29.aspx)：

> 7) 我应该选择公司、个人还是学生？
> 
> 三种帐户类型中的每一种：公司、个人和学生，都可以发布和销售付费和免费应用程序。以下概述了您在创建帐户时应选择的帐户类型。
> 
> 注意：完成注册过程后，您无法更改帐户类型。
> 
> **公司：**如果您代表公司、有限责任公司 (LLC)、合伙企业或其他在当地政府合法注册的公司注册，请选择公司。如果您没有美国雇主识别号 (EIN)，则必须向 Microsoft 发送相应的 W-8 表格以接收 Windows Phone Marketplace 付款。
> 
> **个人：**如果您是个人开发者，请选择个人。您的应用程序销售将有助于您的个人收入。个人必须向 Microsoft 发送适当的 W-8 表格才能接收 Windows Phone Marketplace 付款。
> 
> **学生：**如果您是在 DreamSpark 注册的学生，请选择学生。学生帐户无需缴纳年费。学生必须向 Microsoft 发送适当的 W-8 表格才能接收 Windows Phone Marketplace 付款。

***您在个人和公司帐户类型之间提出的任何问题都没有区别。***

这意味着：
1\. 对于所有帐户类型，可以提交到市场的应用程序数量相同。唯一的限制适用于免费应用程序的提交（包括更新）。[每年 99 台]
2\. 每个帐户可以解锁的设备数量在个人和公司类型之间没有差异。两者都默认为三个，但您可以通过应用中心的支持链接请求更多。
3.每台设备可测试的应用数量与解锁设备的账号类型无关。我认为（从记忆中）两者都是12。
4\. 不论账号类型，每个app的开发者分享都是一样的。微软占 30%。

**唯一的区别是突出显示的那个。**

# android - 如何避免在android中发生ANR？

> ID：10752961
> 
> 赞同：1
> 
> 时间：2012-05-25T10:40:26.120
> 
> 标签：android

我在 Android 1.6 中制作应用程序，出现“应用程序无响应”（ANR）错误 - 请建议如何在活动中处理它？

我只根据条件调用 Web 服务，并使用了一个运行和调用特定 Web 服务的计时器。一项 web 服务获取显示在 gridview 上的用户，当我们单击 gridview 时很少发生 ANR，但并非每次都发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T10:56:42.633

您只需要 AsyncTask。查看这个简短的教程[www.vogella.com](http://www.vogella.com/articles/AndroidPerformance/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:42:37.577

任何类型的长时间运行的操作，包括 Web 服务访问，都应该在后台线程中完成。[阅读这篇文章](http://developer.android.com/resources/articles/painless-threading.html)。

# c# - 具有树状外观的 ASP.net 列表视图

> ID：10752964
> 
> 赞同：0
> 
> 时间：2012-05-25T10:40:36.143
> 
> 标签：c#, asp.net, listview, datagrid, outlook

我想制作一个显示列表的页面，类似于 Outlook 2003 中的收件箱。具体来说，我需要按天或周对消息进行分组，并为每天（或每周）显示一棵树。使用 asp.net。希望你能帮助我。以下图片显示了我需要的内容：按日期对邮件进行分组：

[http://www.omni-ts.com/crm-integration/images/riva-outlook-inbox.jpg](http://www.omni-ts.com/crm-integration/images/riva-outlook-inbox.jpg)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:47:58.260

你想做这个客户端吗？

如果是这样，可以看看一个名为 dynatree 的 javascript 库。

我用它来创建一个我可以浏览的文件夹结构，因此您可以自定义它以满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T12:59:13.673

查看本教程。如果您专注于 ListView 部分，而不是 LINQ to SQL 部分，我认为它准确地描述了您需要什么。从哪里获取数据并不重要。

[http://mattberseth.com/blog/2008/01/building_a_grouping_grid_with.html](http://mattberseth.com/blog/2008/01/building_a_grouping_grid_with.html)

问候，杰拉德

# matlab - 以八度为单位设置曲线颜色

> ID：10752969
> 
> 赞同：1
> 
> 时间：2012-05-25T10:40:53.897
> 
> 标签：matlab, plot, octave

我有两列数据，想使用八度进行绘图。我做了以下工作：

```
 f = load('rate.txt','r')
 plot(f(:,1) ,f(:,2));
 plot(f(:,1));
 hold on;
 plot(f(:,2)); 
```

我得到了各自的图表。但两者颜色相同。我想为不同的图表分配不同的颜色，并为它们命名，就像这个彩色图是这个，这个彩色图是那个。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T10:53:42.480

[您可以使用线条属性](http://www.mathworks.com/help/techdoc/ref/linespec.html)绘制下摆。并且[`legend`](http://www.mathworks.com/help/techdoc/ref/legend.html)用于说明哪个是什么。我想 Octave 使用与 MATLAB 相同的语法。这是一个示例代码片段：

```
x = 0:0.01:5; %# An example x grid

plot(x,sin(x),'r-');
hold on;
plot(x,cos(x),'b--');
legend('sin', 'cos') 
```

![在此处输入图像描述](../Images/11ac6d82820a9fc3a2f3badb756be69a.png)

# c# - excel第一个空白行

> ID：10752971
> 
> 赞同：7
> 
> 时间：2012-05-25T10:41:02.177
> 
> 标签：c#, excel, vsto

有没有办法使用 vsto 或 c# 在 excel 表中找到第一个可用的空白行？我一直在寻找几个小时，但找不到任何与之相关的东西。在这方面的任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T11:00:11.057

```
Excel.Worksheet xlWorkSheet1 = (Excel.Worksheet)excelbk.Worksheets["Sheet1"];
xlRange = (Excel.Range)xlWorkSheet1.Cells[xlWorkSheet1.Rows.Count, 1];
long lastRow = (long)xlRange.get_End(Excel.XlDirection.xlUp).Row;
Long newRow = lastRow + 1 
```

此链接中的代码：http: [//social.msdn.microsoft.com/Forums/pl/exceldev/thread/90384567-3338-4c56-bc6b-70db94d8cbcc](http://social.msdn.microsoft.com/Forums/pl/exceldev/thread/90384567-3338-4c56-bc6b-70db94d8cbcc)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T12:31:59.323

如果 App 是您的 excel 应用程序，您可以遍历从数字 1 开始的行并使用 CountA 函数查找第一个空（它返回范围的非空单元格的数量）：

```
int rowIdx = 0;
int notEmpty = 1;
while (notEmpty > 0)
{
    string aCellAddress = "A" + (++rowIdx).ToString();
    Range row = App.get_Range(aCellAddress, aCellAddress).EntireRow;
    notEmpty = _App.WorksheetFunction.CountA(row);
} 
```

当 while 循环退出时，rowIdx 是第一个空行的索引。

CountA 接收其他 29 个可选参数，因此对于早期版本的框架，您可能必须传递 Missing.Value 29 次。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T11:03:07.860

有一个 Range.End 属性或 Range.get_End 方法与方向相结合将为您提供范围中的第一个空白单元格。

看看这个问题以获得可能的解决方案：[如何使用 C# 以编程方式在 Excel 工作表中找到下一个空白行](http://social.msdn.microsoft.com/Forums/pl/exceldev/thread/90384567-3338-4c56-bc6b-70db94d8cbcc)
关键位是：

```
Excel.Worksheet xlWorkSheet1 = (Excel.Worksheet)excelbk.Worksheets["Sheet1"];
xlRange = (Excel.Range)xlWorkSheet1.Cells[xlWorkSheet1.Rows.Count, 1];
long lastRow = (long)xlRange.get_End(Excel.XlDirection.xlUp).Row;
Long newRow = lastRow + 1 
```

但是，如果您有一个列，并且您知道将始终填充每个单元格，直到最后一个单元格，那么您就可以在向下的方向结束。

# javascript - 在 javascript 中显示当前日期和时间

> ID：10752972
> 
> 赞同：0
> 
> 时间：2012-05-25T10:41:07.513
> 
> 标签：javascript, date

我有这个脚本可以在我的网页中显示当前日期和时间：

```
<script type = "text/javascript">

function startTime() {
var now = new Date();
var h=now.getHours();
var min=now.getMinutes();
var s=now.getSeconds();
var ampm=(now.getHours()>11)?"PM":"AM";
var d=now.getDay();
var y=now.getFullYear();
var mon=now.getMonth();
var da=now.getDate();
var endings=["st","nd","rd","th"];
var dayendings=[0,1,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,0,2,3,4,4,4,4,4,4,1];
var days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
var months=["January","February","March","April", "May", "June","July","August","September", "October", "Novemeber","Decemeber"];
if (h>12) {h-=12}
if (h==0) {h=12};
if (min<10) {min="0"+min}
if (s<10) {s="0"+s}
da+=endings[dayendings[da]];
if (da<10) {da="0"+da};
d=days[d];
mon=months[mon-1];
document.getElementById("time").innerHTML=d+", "+mon+" "+da+", "+y+" "+h+":"+min+":"+s+" "+ampm;
var tim = setTimeout("startTime()",1000);
}

</script> 
```

但结果是这样的：

```
Friday, April NaN, 2012 6:37:36 PM 
```

我怎样才能做`April NaN, 2012`对？必须是今天的日期`May 25,2012`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T10:44:41.470

至少你应该改变

```
da+=endings[dayendings[da]]; 
```

至

```
da+=endings[dayendings[da - 1]]; 
```

因为现在它有一个错误的错误（`da`是 1 到 31，但索引`dayendings`是 0 到 30）。

如果“今天”是本月的 31 日，这应该会立即解决您的问题。

中的值也需要修复`dayendings`，因为`4`那里没有意义。

顺便说一句，你真的应该放弃这个代码以获得[更好的东西](http://momentjs.com/)。你不喜欢这样吗？

```
function startTime() {
    document.getElementById("time").innerHTML =
        moment().format("dddd, MMMM Do, YYYY h:mm:ss A");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T10:47:44.437

您`var dayendings=[0,1,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,0,2,3,4,4,4,4,4,4,1];`包含一些`4`值。然而，`var endings=["st","nd","rd","th"];`它的长度只有 4，所以当你访问它时它会返回 undefined `endings[4]`。

此外，您可能会收到一个错误，因为`da`它在 to 的范围内`1`，`31`这不是您的`dayendings`数组的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T10:27:17.713

首先生成这个函数并保存为.js文件

```
function date_time(id) {
    date = new Date;
    year = date.getFullYear();
    month = date.getMonth();
    months = new Array('January', 'February', 'March', 'April', 'May', 'June', 'Jully', 'August', 'September', 'October', 'November', 'December');
    d = date.getDate();
    day = date.getDay();
    days = new Array('Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday');
    h = date.getHours();
    if (h < 10) {
        h = "0" + h;
    }
    m = date.getMinutes();
    if (m < 10) {
        m = "0" + m;
    }
    s = date.getSeconds();
    if (s < 10) {
        s = "0" + s;
    }
    result = '' + days[day] + ' ' + months[month] + ' ' + d + ' ' + year + ' ' + h + ':' + m + ':' + s;
    document.getElementById(id).innerHTML = result;
    setTimeout('date_time("' + id + '");', '1000');
    return true;
} 
```

然后在您的 html 页面上使用此代码来显示当前时间和日期

```
<script type="text/javascript"> window.onload = date_time('date_time'); </script> 
```

不要忘记页面头部的脚本标签：例如

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T11:14:57.040

看来您的计数器逻辑不正确。试试下面的代码：

```
function makeArray() {
for (i = 0; i<makeArray.arguments.length; i++)
this[i + 1] = makeArray.arguments[i];
}
var now = new Date();
var h=now.getHours();
var min=now.getMinutes();
var s=now.getSeconds();
var ampm=(now.getHours()>11)?"PM":"AM";
var months = new makeArray('January','February','March','April','May',
'June','July','August','September','October','November','December');
var date = new Date(); 
var day = date.getDate();
var month = date.getMonth() + 1;
var yy = date.getYear();
var year = (yy < 1000) ? yy + 1900 : yy;
var endings=["st","nd","rd","th"];
var dayendings=[0,1,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,0,2,3,4,4,4,4,4,4,1];
var days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];

document.write(days[date.getDay()] + " " + months[month]+ " " + day + ", " + year + " " + h + ":" + min + ":" + s + " " + ampm); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T11:24:42.440

我在[这个 jsfiddle](http://jsfiddle.net/Vwvtq/)中有一个相对简单的 DateTime 对象。可能有用吗？在您的情况下，使用此对象，此命令将以您想要的格式显示日期（除了 PM/AM 时间格式）

```
XDate({date:new Date,lang:'EN'}).format('WD, MM dd, yyyy, hh:mm:se0');
//=> Friday, May 25 2012, 13:05:03 
```

# android - Android：视图分页器中的标签页指示器

> ID：10752974
> 
> 赞同：2
> 
> 时间：2012-05-25T10:41:20.417
> 
> 标签：android, android-viewpager, tabpage, indicator

我正在制作一个应用程序，我必须实现“扫描标签”。我已阅读[**此**](http://www.pushing-pixels.org/2011/08/11/android-tips-and-tricks-swipey-tabs.html)内容，但找不到任何相关内容。我也试过了[**`ViewPagerIndicator`**](https://github.com/JakeWharton/Android-ViewPagerIndicator)。

下面是我的代码片段：

```
public class ViewPagerIndicatorActivity extends FragmentActivity {
PagerAdapter mPagerAdapter;
ViewPager  mViewPager;
ViewPagerIndicator mIndicator;
static ArrayList<String> readableDateFormat;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Create our custom adapter to supply pages to the viewpager.
    mPagerAdapter = new PagerAdapter(getSupportFragmentManager());
    mViewPager = (ViewPager)findViewById(R.id.pager);
    mViewPager.setAdapter(mPagerAdapter);

    // Start at a custom position
    mViewPager.setCurrentItem(3);

    // Find the indicator from the layout
    mIndicator = (ViewPagerIndicator)findViewById(R.id.indicator);

    // Set the indicator as the pageChangeListener
    mViewPager.setOnPageChangeListener(mIndicator);

    // Initialize the indicator. We need some information here:
    // * What page do we start on.
    // * How many pages are there in total
    // * A callback to get page titles
    mIndicator.init(5, mPagerAdapter.getCount(), mPagerAdapter);
    Resources res = getResources();
    Drawable prev = res.getDrawable(R.drawable.indicator_prev_arrow);
    Drawable next = res.getDrawable(R.drawable.indicator_next_arrow);
    mIndicator.setFocusedTextColor(new int[]{255, 0, 0});

    // Set images for previous and next arrows.
    mIndicator.setArrows(prev, next);

    mIndicator.setOnClickListener(new OnIndicatorClickListener());
}

class OnIndicatorClickListener implements ViewPagerIndicator.OnClickListener{
    @Override
    public void onCurrentClicked(View v) {
        Toast.makeText(ViewPagerIndicatorActivity.this, "Hello", Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onNextClicked(View v) {
        mViewPager.setCurrentItem(Math.min(mPagerAdapter.getCount() - 1, mIndicator.getCurrentPosition() + 1));
    }

    @Override
    public void onPreviousClicked(View v) {
        mViewPager.setCurrentItem(Math.max(0, mIndicator.getCurrentPosition() - 1));
    }

}

class PagerAdapter extends FragmentPagerAdapter implements ViewPagerIndicator.PageInfoProvider{
    public PagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int pos) {

        String list1[]={"Catagories","Latest","Most Downloaded","Top Paid"};

        Calendar cal = Calendar.getInstance();
        cal.add(Calendar.DAY_OF_MONTH, pos - getCount() / 2);
        //return ItemFragment.newInstance(cal.getTime());
        return ItemFragment.newInstance1(list1);
    }

    @Override
    public int getCount() {
        return 4;
    }

    @Override
    public String getTitle(int pos){
        String hello[]={"Catagories","Latest","Most Downloaded","Top Paid"};

        return hello.toString();
    }
}

public static class ItemFragment extends ListFragment{
    Date date;
    String[] hello1;

    static ItemFragment newInstance1(String[] hello) {
        ItemFragment f = new ItemFragment();

        // Supply num input as an argument.
        Bundle args = new Bundle();

        args.putStringArray("date", hello);
        f.setArguments(args);

        return f;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        try {
            this.hello1=list;
            System.out.println("hello:list -"+hello1);
        } catch (Exception e) {
            e.printStackTrace();

        }
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.date_fragment, container, false);
        View tv = v.findViewById(R.id.text);

        ((TextView)tv).setText(hello1.toString());

        System.out.println("text view :"+hello1.toString());

        return v;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(getActivity(),
        android.R.layout.simple_list_item_1, list));
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        Log.i("FragmentList", "Item clicked: " + id);
    }
}

public static final String[] list = new String[]{"France", "London", "Sweden", "Denmark", "Germany", "Finland", "Thailand", "Taiwan", "USA", "Norway", "Denmark (again)", "Lithuania", "Bosnia", "Russia", "Vietnam", "Australia"}; 
```

和其他的是：

```
public class ViewPagerIndicator extends RelativeLayout implements OnPageChangeListener {
private static final int PADDING = 5;

TextView mPrevious;
TextView mCurrent;
TextView mNext;
int mCurItem;
int mRestoreCurItem = -1;

LinearLayout mPreviousGroup;
LinearLayout mNextGroup;

int mArrowPadding;
int mSize;

ImageView mCurrentIndicator;
ImageView mPrevArrow;
ImageView mNextArrow;

int[] mFocusedTextColor;
int[] mUnfocusedTextColor;

OnClickListener mOnClickHandler;

public interface PageInfoProvider{
    String getTitle(int pos);
}

public interface OnClickListener{
    void onNextClicked(View v);
    void onPreviousClicked(View v);
    void onCurrentClicked(View v);
}

public void setOnClickListener(OnClickListener handler){
    this.mOnClickHandler = handler;
    mPreviousGroup.setOnClickListener(new OnPreviousClickedListener());
    mCurrent.setOnClickListener(new OnCurrentClickedListener());
    mNextGroup.setOnClickListener(new OnNextClickedListener());
}

public int getCurrentPosition(){
    return mCurItem;
}

PageInfoProvider mPageInfoProvider;
public void setPageInfoProvider(PageInfoProvider pageInfoProvider){
    this.mPageInfoProvider = pageInfoProvider;
}

public void setFocusedTextColor(int[] col){
    System.arraycopy(col, 0, mFocusedTextColor, 0, 3);
    updateColor(0);
}

public void setUnfocusedTextColor(int[] col){
    System.arraycopy(col, 0, mUnfocusedTextColor, 0, 3);
    mNext.setTextColor(Color.argb(255, col[0], col[1], col[2]));
    mPrevious.setTextColor(Color.argb(255, col[0], col[1], col[2]));
    updateColor(0);
}

@Override
protected Parcelable onSaveInstanceState() {
    Parcelable state = super.onSaveInstanceState();
    Bundle b = new Bundle();
    b.putInt("current", this.mCurItem);
    b.putParcelable("viewstate", state);
    return b;
}

@Override
protected void onRestoreInstanceState(Parcelable state) {
    super.onRestoreInstanceState(((Bundle)state).getParcelable("viewstate"));
    mCurItem = ((Bundle)state).getInt("current", mCurItem);
    this.setText(mCurItem - 1);
    this.updateArrows(mCurItem);
    this.invalidate();
}

/**
 * Initialization
 * 
 * @param startPos The initially selected element in the ViewPager
 * @param size Total amount of elements in the ViewPager
 * @param pageInfoProvider Interface that returns page titles
 */
public void init(int startPos, int size, PageInfoProvider pageInfoProvider){
    setPageInfoProvider(pageInfoProvider);
    this.mSize = size;
    setText(startPos - 1);
    mCurItem = startPos;
}

public ViewPagerIndicator(Context context, AttributeSet attrs) {
    super(context, attrs);
    addContent();
}

public ViewPagerIndicator(Context context, AttributeSet attrs, int defStyle){
    super(context, attrs, defStyle);
    addContent();
}

public ViewPagerIndicator(Context context) {
    super(context);
    addContent();
}

/**
 * Add drawables for arrows
 * 
 * @param prev Left pointing arrow
 * @param next Right pointing arrow
 */
public void setArrows(Drawable prev, Drawable next){
    this.mPrevArrow = new ImageView(getContext());
    this.mPrevArrow.setImageDrawable(prev);

    this.mNextArrow = new ImageView(getContext());
    this.mNextArrow.setImageDrawable(next);

    LinearLayout.LayoutParams arrowLayoutParams = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    arrowLayoutParams.gravity = Gravity.CENTER;

    mPreviousGroup.removeAllViews();
    mPreviousGroup.addView(mPrevArrow, arrowLayoutParams);
    mPreviousGroup.addView(mPrevious, arrowLayoutParams);

    mPrevious.setPadding(PADDING, 0, 0, 0);
    mNext.setPadding(0, 0, PADDING, 0);

    mArrowPadding = PADDING + prev.getIntrinsicWidth();

    mNextGroup.addView(mNextArrow, arrowLayoutParams);
    updateArrows(mCurItem);
}

/**
 * Create all views, build the layout
 */
private void addContent(){
    mFocusedTextColor = new int[]{0, 0, 0};
    mUnfocusedTextColor = new int[]{190, 190, 190};

    // Text views
    mPrevious = new TextView(getContext());
    mCurrent = new TextView(getContext());
    mNext = new TextView(getContext());

    RelativeLayout.LayoutParams previousParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    previousParams.addRule(RelativeLayout.ALIGN_LEFT);

    RelativeLayout.LayoutParams currentParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    currentParams.addRule(RelativeLayout.CENTER_HORIZONTAL);

    RelativeLayout.LayoutParams nextParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    nextParams.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);

    // Groups holding text and arrows
    mPreviousGroup = new LinearLayout(getContext());
    mPreviousGroup.setOrientation(LinearLayout.HORIZONTAL);
    mNextGroup = new LinearLayout(getContext());
    mNextGroup.setOrientation(LinearLayout.HORIZONTAL);

    mPreviousGroup.addView(mPrevious, new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    mNextGroup.addView(mNext, new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

    addView(mPreviousGroup, previousParams);
    addView(mCurrent, currentParams);
    addView(mNextGroup, nextParams);

    mPrevious.setSingleLine();
    mCurrent.setSingleLine();
    mNext.setSingleLine();

    mPrevious.setText("previous");
    mCurrent.setText("current");
    mNext.setText("next");

    mPrevious.setClickable(false);
    mNext.setClickable(false);
    mCurrent.setClickable(true);
    mPreviousGroup.setClickable(true);
    mNextGroup.setClickable(true);

    // Set colors
    mNext.setTextColor(Color.argb(255, mUnfocusedTextColor[0], mUnfocusedTextColor[1], mUnfocusedTextColor[2]));
    mPrevious.setTextColor(Color.argb(255, mUnfocusedTextColor[0], mUnfocusedTextColor[1], mUnfocusedTextColor[2]));
    updateColor(0);
}

@Override
public void onPageScrollStateChanged(int state) {

}

@Override
public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
    positionOffsetPixels = adjustOffset(positionOffsetPixels);
    position = updatePosition(position, positionOffsetPixels);
    setText(position - 1);
    updateColor(positionOffsetPixels);
    updateArrows(position);
    updatePositions(positionOffsetPixels);
    mCurItem = position;
}

void updatePositions(int positionOffsetPixels){
    int textWidth = mCurrent.getWidth() - mCurrent.getPaddingLeft() - mCurrent.getPaddingRight();
    int maxOffset = this.getWidth() / 2 - textWidth / 2 - mArrowPadding;
    if(positionOffsetPixels > 0){
        maxOffset -= this.getPaddingLeft();
        int offset = Math.min(positionOffsetPixels, maxOffset - 1);
        mCurrent.setPadding(0, 0, 2 * offset, 0);

        // Move previous text out of the way. Slightly buggy.
        /*
        int overlapLeft = mPreviousGroup.getRight() - mCurrent.getLeft() + mArrowPadding;
        mPreviousGroup.setPadding(0, 0, Math.max(0, overlapLeft), 0);
        mNextGroup.setPadding(0, 0, 0, 0);
        */
    }else{
        maxOffset -= this.getPaddingRight();
        int offset = Math.max(positionOffsetPixels, -maxOffset);
        mCurrent.setPadding(-2 * offset, 0, 0, 0);

        // Move next text out of the way. Slightly buggy.
        /*
        int overlapRight = mCurrent.getRight() - mNextGroup.getLeft() + mArrowPadding;
        mNextGroup.setPadding(Math.max(0, overlapRight), 0, 0, 0);
        mPreviousGroup.setPadding(0, 0, 0, 0);
        */
    }
}

/**
 * Hide arrows if we can't scroll further
 * 
 * @param position
 */
void updateArrows(int position){
    if(mPrevArrow != null){
        mPrevArrow.setVisibility(position == 0 ? View.INVISIBLE : View.VISIBLE);
        mNextArrow.setVisibility(position == mSize - 1 ? View.INVISIBLE : View.VISIBLE);
    }
}

/**
 * Adjust position to be the view that is showing the most.
 * 
 * @param givenPosition
 * @param offset
 * @return
 */
int updatePosition(int givenPosition, int offset){
    int pos;
    if(offset < 0){
        pos = givenPosition + 1;
    }else{
        pos = givenPosition;
    }
    return pos; 
}

/**
 * Fade "currently showing" color depending on it's position
 * 
 * @param offset
 */
void updateColor(int offset){
    offset = Math.abs(offset);
    // Initial condition: offset is always 0, this.getWidth is also 0! 0/0 = NaN
    int width = this.getWidth();
    float fraction = width == 0 ? 0 : offset / ((float)width / 4.0f);
    fraction = Math.min(1, fraction);
    int r = (int)(mUnfocusedTextColor[0] * fraction + mFocusedTextColor[0] * (1 - fraction));
    int g = (int)(mUnfocusedTextColor[1] * fraction + mFocusedTextColor[1] * (1 - fraction));
    int b = (int)(mUnfocusedTextColor[2] * fraction + mFocusedTextColor[2] * (1 - fraction));
    mCurrent.setTextColor(Color.argb(255, r, g, b));
}

/**
 * Update text depending on it's position
 * 
 * @param prevPos
 */
void setText(int prevPos){
    if(prevPos < 0){
        mPrevious.setText("");
    }else{
        mPrevious.setText(mPageInfoProvider.getTitle(prevPos));
    }
    mCurrent.setText(mPageInfoProvider.getTitle(prevPos + 1));
    String hellolo= ("current"+mPageInfoProvider.getTitle(prevPos + 1));
    if(prevPos + 2 == this.mSize){
        mNext.setText("");
    }else{
        mNext.setText(mPageInfoProvider.getTitle(prevPos + 2));
    }
}

// Original:
// 244, 245, 0, 1, 2
// New:
// -2, -1, 0, 1, 2
int adjustOffset(int positionOffsetPixels){
    // Move offset half width
    positionOffsetPixels += this.getWidth() / 2;
    // Clamp to width
    positionOffsetPixels %= this.getWidth();
    // Center around zero
    positionOffsetPixels -= this.getWidth() / 2;
    return positionOffsetPixels;
}

@Override
public void onPageSelected(int position) {
    // Reset padding when the page is finally selected (May not be necessary)
    mCurrent.setPadding(0, 0, 0, 0);
}

class OnPreviousClickedListener implements android.view.View.OnClickListener{
    @Override
    public void onClick(View v) {
        if(mOnClickHandler != null){
            mOnClickHandler.onPreviousClicked(ViewPagerIndicator.this);
        }
    }
}
class OnCurrentClickedListener implements android.view.View.OnClickListener{
    @Override
    public void onClick(View v) {
        if(mOnClickHandler != null){
            mOnClickHandler.onCurrentClicked(ViewPagerIndicator.this);
        }
    }
}
class OnNextClickedListener implements android.view.View.OnClickListener{
    @Override
    public void onClick(View v) {
        if(mOnClickHandler != null){
            mOnClickHandler.onNextClicked(ViewPagerIndicator.this);
        }
    }
} 
```

，而不是名称我得到 Ljava.lang.String@44daf8![在此处输入图像描述](../Images/a444802c4fde018dd6137de47f895239.png)

任何有关这方面的帮助都会有所帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T06:34:25.030

您所指的“扫描标签”实际上只是`ViewPager`每个页面都有相应的标题标签。默认情况下，这不包含在 Android SDK 中，但您可以使用 Jake Wharton`ViewPagerIndicator`为您的`ViewPager`.

Jake Wharton 在 GitHub 上提供了一堆[**示例代码**](https://github.com/JakeWharton/Android-ViewPagerIndicator/tree/master/sample/src/com/viewpagerindicator/sample)，你应该看看。如果您已经实现了您的`ViewPager`，那么更改您的代码以便它使用`TabPagerIndicator`（将为您的选项卡添加标题的类）根本不会太困难。您还可以参考Jake Wharton 网站上的[**使用部分。**](http://viewpagerindicator.com/#usage)

我觉得这足以确保您`ViewPager`正确实施，但如果出现问题，请随时提出任何问题。

# visual-studio-2010 - 信息路径：在用于 VS 工作流的 SharePoint 2010 自定义任务中使用时，组合框和下拉列表被禁用

> ID：10752976
> 
> 赞同：1
> 
> 时间：2012-05-25T10:41:42.493
> 
> 标签：visual-studio-2010, sharepoint-2010, workflow, infopath

我正在尝试将组合框填充表单辅助数据连接（SOAP 服务）添加到自定义 Infopath 任务表单。预览中一切正常，但是当我在 SP 上部署工作流时，我的组合框被禁用了？

数据连接文件在 SP 上集中管理。

我什至尝试在组合框属性中手动输入选项，但是当我发布表单时，这个组合（或下拉菜单）仍然被禁用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:32:41.080

我设法通过从[此处](http://www.infopathdev.com/forums/t/7384.aspx?PageIndex=1)应用步骤并将新字段设置为工作流代码中的默认值（Wf 序列化表单数据）来解决此问题。

# ruby - 删除反向数组中的数组元素，delete_at 不起作用

> ID：10752978
> 
> 赞同：1
> 
> 时间：2012-05-25T10:41:45.200
> 
> 标签：ruby, arrays, reverse

如果我键入`c.messages.reverse.delete_at(0)`没有任何反应，则消息是数组。如果我键入`c.messages.delete_at(0)`它会删除第一个元素。为什么这不适用于反向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T10:43:51.787

发生这种情况是因为[`reverse`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-reverse)返回一个新数组，您正在删除其中的最后一个成员。您*可以*使用[`reverse!`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-reverse)，它会改变原始数组。

如果要从数组中删除最后一个元素，最好的方法是使用[`pop`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-pop).

```
>> arr = ["a", "b", "c"]
=> ["a", "b", "c"]
>> arr.pop
=> "c"
>> arr
=> ["a", "b"] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T15:18:58.580

`delete_at`可以处理负索引，从数组末尾向后计数（-1 是最后一个元素）：

```
ar = [1,2,3,4,5]
ar.delete_at(-2)
p ar #=> [1, 2, 3, 5] 
```

# javascript - JS：从回调 fn 打开新标签（在新窗口中打开，没有标签）

> ID：10752980
> 
> 赞同：3
> 
> 时间：2012-05-25T10:41:58.367
> 
> 标签：javascript

```
window.open(window.location + 'pdf?' + Ext.urlEncode(params)); 
```

当我从计划代码中调用它时，它会在新选项卡中正常打开。当我想从回调（与服务器交互）打开它时，它想在新窗口（而不是标签）中打开它。如何解决？

我有一个 Api 课程。当我做

```
Api.getDetail( function (response) { ... }) 
```

它转到服务器，然后处理该回调。我需要从此回调中调用窗口。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T11:47:14.000

解决方案：我们需要在回调函数之前创建窗口：`var win = window.open`. 然后在回调中我们可以改变这个窗口的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T11:15:19.800

这是浏览器行为，您无法控制它。

*window.open*可能会在浏览器桌面上的新选项卡中打开，但不能保证它会为其他用户打开。

# ruby - 为 Chrome 运行 watir webdriver 脚本时出错

> ID：10752988
> 
> 赞同：2
> 
> 时间：2012-05-25T10:42:41.210
> 
> 标签：ruby, google-chrome, watir, watir-webdriver, firewatir

我在 Chrome 的脚本下运行，但它在运行脚本时显示错误

需要'watir-webdriver'

```
b = Watir::Browser.new:chrome
b.goto 'bit.ly/watir-webdriver-demo'
b.text_field(:id => 'entry_0').set 'your name'
b.select_list(:id => 'entry_1').select 'Ruby'
b.select_list(:id => 'entry_1').selected? 'Ruby'
b.button(:name => 'submit').click
b.text.include? 'Thank you' 
```

运行脚本时出现以下错误

```
C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.21.2/lib/selenium/webdr
iver/chrome/service.rb:19:in `executable_path': Unable to find the chromedriver
executable. Please download the server from http://code.google.com/p/chromedrive
r/downloads/list and place it somewhere on your PATH. More info at http://code.g
oogle.com/p/selenium/wiki/ChromeDriver. (Selenium::WebDriver::Error::WebDriverEr
ror) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T12:06:10.557

好吧，错误消息说明了一切。你必须安装chromedriver：

[https://github.com/watir/watirbook/blob/master/manuscript/installation/windows.md#chrome](https://github.com/watir/watirbook/blob/master/manuscript/installation/windows.md#chrome)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-13T12:00:25.173

您必须安装/配置 ChromeDriver。以下是步骤：

1.  如果您想使用 google chrome 进行测试（推荐），请从以下网址下载 chromedriver：[http](http://chromedriver.storage.googleapis.com/index.html) ://chromedriver.storage.googleapis.com/index.html （我下载了适用于 Windows7 的 2.13 版本）
2.  如下放置在您的 PATH 中：
    **Ubuntu：** usr/bin
    **Windows：** ruby 安装文件夹是一个好地方，（通常是 C:/ruby###）/bin

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T01:14:09.480

在 Mac 上，我发现并非所有 PATH 目录都有效。但是，将文件粘贴到此路径（文件夹）中确实对我有用（确保它称为“chromedriver”，而不是“chromedriver2”！（发生重复下载的 b/c）

/Users/[mac_account_name]/.rvm/gems/ruby-1.9.3-p286/bin/

显然，我使用 rvm。

（确保在添加后重新启动 shell 以获取更改）

# java - 动态切换语言环境？

> ID：10752989
> 
> 赞同：0
> 
> 时间：2012-05-25T10:42:46.683
> 
> 标签：java, gwt, internationalization, gxt

我正在使用 GWT/Spring/Hibernate 应用程序。我将实施国际化（i18n）。我的 appln 应该支持 5 种不同的语言。我可以在 gwt.xml 文件中配置适当的语言，并将所有属性外部化到特定于每种语言的单独属性文件中。但**我需要提供一个组合框，根据所选的语言环境显示所有语言环境，页面应该被刷新。**我怎样才能做到这一点？

```
<extend-property name="locale" values="en"/>//i have set for all 5 locales 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T11:26:38.537

我是 GWT 的新手，但以下内容会对您有所帮助：

1.  [GWT I18n 配置](https://stackoverflow.com/a/8561553/767881)
2.  [GWT 中的语言环境 - DevGuideI18nLocale](https://developers.google.com/web-toolkit/doc/latest/DevGuideI18nLocale)
3.  [将运行时语言环境添加到您的 moduleXML](https://developers.google.com/web-toolkit/doc/latest/DevGuideI18nLocale#RuntimeLocales)
4.  [以编程方式访问区域信息](https://developers.google.com/web-toolkit/doc/latest/DevGuideI18nLocale#LocaleInfo)

# silverlight - 使用 TwoWay“绑定”时，ComboBox Silverlight 5 自动搜索不起作用

> ID：10752990
> 
> 赞同：0
> 
> 时间：2012-05-25T10:42:47.793
> 
> 标签：silverlight, combobox, binding, silverlight-5.0, two-way-binding

当`ComboBox`数据绑定发生时，似乎面临一个问题。自动文本搜索不起作用。在这里需要帮助。不知道实际问题是什么，或者我是否错过了什么。

```
<ComboBox HorizontalAlignment="Left" Margin="121,84,0,0" Name="cbxDock"
  VerticalAlignment="Top" Width="281" SelectionChanged="cbxDock_SelectionChanged"
  Grid.Column="1" Grid.Row="1" DataContext ="delivery_dock_cde">
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="{Binding Path= delivery_dock_cde, Mode=TwoWay}" />
                <TextBlock Text=" - " />
                <TextBlock Text="{Binding delivery_dock_dsc,Mode=TwoWay}" />
            </StackPanel>
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:42:34.283

将此添加到组合框声明或代码项中：

```
TextSearch.TextPath="delivery_dock_dsc" 
```

在下拉组合框之前，它不会进行自动搜索。

# mongodb - 你如何在 NoSQL 中进行原子的、多记录的、相互依赖的操作？

> ID：10752993
> 
> 赞同：3
> 
> 时间：2012-05-25T10:42:58.977
> 
> 标签：mongodb, concurrency, transactions, couchdb, nosql

我最初熟悉关系型数据存储。我目前正在研究 NoSQL 并试图了解它的用例。这是最近一直困扰着我的事情。

您如何使用典型的 NoSQL 产品进行以下操作？

*   读取多个输入
*   为它们计算新值（每个输出取决于所有输入）
*   写回值

从过去处理其他问题的经验来看，这方面的一个例子如下。您有一个具有各种用户帐户的网页游戏。用户可以相互发起攻击，其中攻击公式是复杂的黑盒游戏逻辑，它根据输入和随机性来确定相互的结果。您需要强制攻击以原子方式发生，并且输入反映一致的时间点，就像输出一样，关于游戏中执行的攻击序列的某些序列化。

重要的是：

*   所有输出都以某种我们无法拆分的复杂方式依赖于所有输入（即，我们不能将其转换为教科书银行账户到交易分类账示例，我们不能仅使用预写日志记录等）
*   换句话说，我们没有做 P1 += $10, P2 -= $10
*   更像是，我们[为了争论]在做[本质上像复杂/不可约的事情] (P1, P2) = (sha1(P1+P2), sha1(P1-P2)) 我们想要一个一致的快照P1 和 P2 的值 [并不是说特定线是实际游戏的好例子]
*   输入将是小记录子集的任意选择，因此我们不能只使用复合记录
*   外部观察者在所有操作之前或之后看到统一/一致的状态，但不在两者之间

我的具体例子是我们遇到的一个问题。我们实际上使用的是关系数据库，但我们并没有像我们应该使用的那样使用它的事务特性。结果，在线玩家反复攻击对方往往会产生不正确的结果，并为双方攻击者产生幻影资源。

在关系模型中，我会使用事务来完成此操作。想一想，这可能是交易的教科书示例。

我将如何在 NoSQL 中实现这一目标？

以下是我在 SO 和其他地方看到的答案，我认为这些答案不适合这个特定实例：

*   忽略竞争条件的可能性
*   重新设计游戏，让这不是问题
*   使用数据存储手动实现2PC、烘焙算法等
*   使用外部锁定服务

...尽管如果您认为其中任何一个或全部是一个很好的解决方案，请让我知道如何以及为什么。

我会很感激一些关于如何在实践中实现这种事情的指示。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T16:14:59.070

关于此主题，您需要了解有关 MongoDB 的两件事：

*   原子性单位是单个文档。
*   没有交易，但您可以模拟它们。

记住这一点，这种事情不是 MongoDB 的强项，你自己指出这一点，它本质上是一个事务。

但是，如果您要尝试对此进行建模，您可以首先创建一个攻击集合，其中文档如下所示：

```
{
  attacker: {user_document},
  attackee: {user_document},
  in_progress:  boolean (true or false),
  outcomes: [array of results based on calculation]
} 
```

要开始攻击，您将使用 findAndModify 和 upsert 查询攻击集合，其中包含包含两个用户 ID 的查询文档。如果确实存在，则不会产生新的攻击。如果不存在，它将通过插入文档并将 in_progress 设置为 true 来开始攻击。将所有必要的用户详细信息放在那里。

然后，进行黑盒计算并将由于攻击而需要对两个用户文档进行的一系列更新推送到结果数组，并将 in_progress 设置为 false。

完成后，将结果一一应用于用户集合。

如果不存在更多结果，请删除攻击文档，以便可以开始新的攻击。

不确定根据您的要求这是否完全有意义，但希望这可以帮助您考虑如何完成。

# date - Crystal Report 在指定日期之间运行总计

> ID：10752999
> 
> 赞同：0
> 
> 时间：2012-05-25T10:43:27.463
> 
> 标签：date, crystal-reports, report

我正在为银行设计一个水晶报表，我需要在两个指定日期之间发布运行总计。现在我这里有个问题。看看我是否从 2012 年 1 月 5 日开始并想在之后发布所有内容，该计算的期初余额将从 1 月 4 日及之前开始。

我已经完成了一份报告，该报告可以从头到尾发布结果，但当用户指定特定日期的报告时不能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:40:19.210

假设您有两个指定日期范围的参数字段（开始日期和结束日期），请将其添加到运行总计的评估公式（“使用公式”单选按钮）：

```
{table.date_field} IN {?starting_date} TO {?ending_date} 
```