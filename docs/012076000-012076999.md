# StackOverflow 问答 12076000-12076999

# sql - 如何引用新插入行的PK

> ID：12076002
> 
> 赞同：0
> 
> 时间：2012-08-22T15:00:48.803
> 
> 标签：sql, tsql, stored-procedures

我有一个查询，其中一条记录被添加到表通道中。然后为每个记录分配一个 channelID，它是表的 PK，并自动递增。将记录添加到通道表后，我想将与该记录关联的字符串插入另一个称为通道关键字的表中。我的问题是我还需要传入在上一个查询中创建的 channelID 作为 channelskeywords 表的 insert 语句的参数，但我不太确定如何执行此操作。

```
 IF @matchBy ='title'
    BEGIN
    insert into channels
    (userID,matchTitle,matchTitleAbstract, fromMyPage)
    values
    (@userID,1,0,@fromMyPage)

    END 

    IF @matchBy ='TitleAbstract'
    insert into channels
    (userID,matchTitle,matchTitleAbstract, fromMyPage)
    values
    (@userID,0,1,@fromMyPage)
    BEGIN

    IF (NULLIF(@keyword1, '')) IS NOT NULL
    insert into channelsKeywords 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:04:54.270

您可以通过以下方式获取 id

```
Select Scope_Identity() 
```

IE：

```
insert into channels 
(userID,matchTitle,matchTitleAbstract, fromMyPage) 
values 
(@userID,1,0,@fromMyPage) 
select @ChannelID = Scope_Identity() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:06:47.890

尝试这样的事情

```
BEGIN
    -- be sure to declare this same scope as the one whol will be using the value
    DECLARE @CNT INT

    insert into channels (userID,matchTitle,matchTitleAbstract, fromMyPage)
    values (@userID,1,0,@fromMyPage)

    SET @CNT = Scope_Identity()  -- holds the value of the inserted ID

END 
```

附加信息：

*   `@@IDENTITY`返回在所有范围内为当前会话中的任何表生成的最后一个标识值。您需要在这里**小心**，因为它是跨范围的。您可以从触发器而不是当前语句中获取值。

*   `SCOPE_IDENTITY`返回为当前会话和当前范围中的任何表生成的最后一个标识值。一般你想用什么。

*   `IDENT_CURRENT`返回为任何会话和任何范围内的特定表生成的最后一个标识值。这使您可以指定要从哪个表中获取值，以防上述两个不是您所需要的（非常罕见）。

**[另请参阅此处](http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/)**

# ruby-on-rails - 我可以使用 Twitter gem 同时从多个 Twitter 名称中提取 Twitter .user 数据吗？

> ID：12076003
> 
> 赞同：1
> 
> 时间：2012-08-22T15:00:48.873
> 
> 标签：ruby-on-rails, ruby, twitter, gem

好的。我有一个 Ruby on Rails 应用程序并已成功获得身份验证（感谢此处的其他响应）。我可以让它发推文、从时间线读取、拉出经过身份验证的用户的关注者等。

但是，现在我要做的是提取已验证用户的关注者列表，确定这些帐户中的哪些（如果有）已验证，然后显示已验证的帐户。我可以提取每个关注者的昵称，但是，似乎我必须单独进行每个调用（.user(ID#1) 然后 .user(ID#2) 然后等等），这导致我达到了速率限制上限.

因此，我正在寻找一种在一次调用中传递多个 ID 并返回每个 ID 的用户信息的方法（或至少少于 1 个 ID：1 个 API 调用）。我觉得这必须是可能的（事实上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:06:17.437

是的，只需这样做：

```
Twitter.users(id1, id2, id3) 
```

文档：[http ://rdoc.info/github/jnunemaker/twitter/Twitter/Client#users-instance_method](http://rdoc.info/github/jnunemaker/twitter/Twitter/Client#users-instance_method)

# jquery - AjaxUpload 和修改的输入文件类型不能一起工作

> ID：12076010
> 
> 赞同：1
> 
> 时间：2012-08-22T15:01:08.687
> 
> 标签：jquery, html, css, file-upload, ajax-upload

从一些不错的教程开始，我尝试： 1) 使用**jQuery**（特别是**AjaxUpload**库）从输入文件按钮上传图像文件。2) 使用 s CSS 技巧将默认的 HTML5*输入文件*按钮替换为更漂亮的自定义按钮。3) 使用 HTML5 过滤器允许“仅特定图像”文件上传。

关键是当我使用修改后的输入文件按钮时，AjaxUpload 库似乎被破坏了（即没有任何反应）。

例如，[这个 JSFiddle](http://jsfiddle.net/JqApF/)是一个使用默认输入文件的测试。如果您尝试上传文件，加载 gif 会告诉您该文件当前正在上传中。 [这](http://jsfiddle.net/qMRvG/2/)与修改后的输入文件相同。没有开始加载 gif。

此外，我的 Chrome 浏览器上的 HTML5 文件过滤似乎被破坏了，但这是一个小问题。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:56:56.570

这可能是由于**AjaxUpload**的某些内部逻辑或浏览器的安全限制。用这个 CSS 试试（高度是 30px 而不是 0%）：

```
 .file-wrapper input {
         cursor: pointer;
         font-size: 100px;
         width:100%; height:30px;
         filter: alpha(opacity=1);
         -moz-opacity: 0.01;
         opacity: 0.01;
         position: absolute;
         right: 0;
         top: 0;
     } 
```

另外，关于接受。它必须是这样的（在 Chrome 中肯定有效）：

```
accept="image/jpg,image/jpeg,image/png,image/gif,image/bmp,image/tiff" 
```

看起来它不适用于 AjaxUpload。我已经在 J​​SFiddle 中尝试过，但结果我看不到接受属性。可能由于某种原因它被插件删除

# android - 如何在 android 应用程序中禁用特定视图的 Enter 键操作？

> ID：12076012
> 
> 赞同：0
> 
> 时间：2012-08-22T15:01:16.463
> 
> 标签：android, android-listview, android-view

我的应用中有一个包含 ListView 的视图。有时，当活动开始或恢复时，列表中的一行会突出显示，如果我按下 Enter 键（在我设备的物理键盘上），那么它会单击该行。我试图覆盖主视图或列表的 OnKeyListener 或将其设置为 null 但它没有改变任何东西。我怎样才能做到这一点？

编辑：对不起，如果不清楚。

我希望 ListView 对点击做出反应，但前提是我触摸屏幕，而不是当我按下回车键时。而且我不希望列表对物理箭头键做出反应。基本上，应该以除触摸屏幕之外的任何其他方式聚焦或单击一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:38:17.653

这不是 100% 正确的，但由于我的视图只有一个 ListView，所以下面的代码做了我想要的：

```
menuListView.setOnKeyListener(new View.OnKeyListener() {

        @Override
        public boolean onKey(View v, int keyCode, KeyEvent event) {

            switch (keyCode) {
            case KeyEvent.KEYCODE_ENTER:
                return true;
            }

            return false;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:05:28.950

尝试将焦点设置到屏幕上的另一个视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T15:08:10.347

这不是 100% 清楚，但我想你希望你的 ListView*不对*行的点击做​​出反应。最好在适配器上为 .areAllItemsEnabled() 返回 false ，为[.isEnabled()](http://developer.android.com/reference/android/widget/BaseAdapter.html#areAllItemsEnabled%28%29)[的](http://developer.android.com/reference/android/widget/BaseAdapter.html#isEnabled%28int%29)每一行返回 false 。这样，您可以关闭列表中行上不需要的交互。

# iphone - 一元表达式的无效参数类型无效

> ID：12076013
> 
> 赞同：3
> 
> 时间：2012-08-22T15:01:19.707
> 
> 标签：iphone, ios, xcode, alert, void

我目前正在制作一个应用程序并且遇到了一些困难，这里是代码：

```
-(void) alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)ButtonIndex {
              if (ButtonIndex == 1) {

                   - (void) reportScore: (int64_t) score forCategory: (NSString*) category
                   {
                       GKScore *scoreReporter = [[[GKScore alloc] initWithCategory:@"123"] autorelease];
                       scoreReporter.value = score;

                       [scoreReporter reportScoreWithCompletionHandler:^(NSError *error) {
                           if (error != nil)
                           {
                               // handle the reporting error
                           }
                       }];
                       else if (ButtonIndex==2){
                           - (void) showLeaderboard:
                           {
                               GKLeaderboardViewController *leaderboardController = [[GKLeaderboardViewController alloc] init];
                               if (leaderboardController != nil)
                               {
                                   leaderboardController.leaderboardDelegate = self;
                                   [self presentModalViewController: leaderboardController animated: YES];
                               }
                           }

                       }

                   }

                  -(void) leaderboardViewControllerDidFinish:(GKLeaderboardViewController *)viewController{

                      [self dismissModalViewControllerAnimated:YES];

                   }

                   }

              } 
```

我的问题是在线：-（void）reportScore：（int64_t）............它说“无效的参数类型无效到一元表达式”

请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T15:36:50.940

您在另一个方法中声明方法，这是您无法做到的。分别声明所有方法，并在适当的地方调用它们。

```
- (void) reportScore: (int64_t) score forCategory: (NSString*) category
 {
                   GKScore *scoreReporter = [[[GKScore alloc] initWithCategory:@"123"] autorelease];
                   scoreReporter.value = score;

                   [scoreReporter reportScoreWithCompletionHandler:^(NSError *error) {
                       if (error != nil)
                       {
                           // handle the reporting error
                       }
                   }];
}
- (void) showLeaderboard:
   {
                       GKLeaderboardViewController *leaderboardController = [[GKLeaderboardViewController alloc] init];
                       if (leaderboardController != nil)
                       {
                           leaderboardController.leaderboardDelegate = self;
                           [self presentModalViewController: leaderboardController animated: YES];
                       }
   }
-(void) leaderboardViewControllerDidFinish:(GKLeaderboardViewController *)viewController
{

              [self dismissModalViewControllerAnimated:YES];

}
-(void) alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)ButtonIndex {
          if (ButtonIndex == 1)
            {
                [self reportScore:score forCategory:cat];
             }
          else if (ButtonIndex==2)
            {
                 [self showLeaderboard];
            }

 } 
```

# ruby-on-rails-3 - 过期产品

> ID：12076014
> 
> 赞同：0
> 
> 时间：2012-08-22T15:01:21.517
> 
> 标签：ruby-on-rails-3

我要做的是能够创建具有过期日期的产品。

当当前日期与数据库中的过期日期匹配时，它将更改该产品上的布尔字段。（布尔值可见/隐藏）。

这还将发送一封电子邮件，说明该产品已过期。

这需要每天或每天两次自动发生。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:08:01.820

使用 cron 作业：

1.  每隔（小时|天|随便）运行一个作业，从产品表中选择 expiry_date > 当前日期（你没有说你使用的是哪个数据库，所以语法会有所不同）
2.  对于每个结果，发送一封电子邮件，将标志设置为 true 并提交更新。

# javascript - 如何使用 javascript 正则表达式进行清理 - 不区分大小写 + 空格 + 整个单词

> ID：12076018
> 
> 赞同：0
> 
> 时间：2012-08-22T15:01:23.820
> 
> 标签：javascript, regex

假设我有字符串变量：

```
var animals = "catdog caT dog cat"; 
```

我不想要猫、大猫和凌乱的空白。我试过使用：

```
var rep = "cat"
var nocats = animals.replace(new RegExp(rep, 'g'), ''); 
```

nocats 现在是*"dog catdog"*，而我需要*"catdog dog"*

我应该使用什么正则表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:04:00.573

用于`\b`单词边界和不区分大小写（`i`标志）的正则表达式：

```
var animals = "catdog caT dog cat",
    animal = "cat"

animals.replace(new RegExp("\\b" + animal + "\\b", "gi"), "");
// "catdog  dog " needs additional trimming 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:07:04.287

我注意到您的问题并不完全清楚您希望如何处理字符串中的空格。假设您想折叠源字符串中的空格，这应该可以：

```
// " catdog      caT  dog    cat" --> "catdog dog" 
animals.replace(new RegExp('\\s*\\b' + animal + '\\b\\s*|\\s+', 'gi'), ' ').trim(); 
```

还要确保您了解单词边界断言的语义——在这种情况下，“cat-dog”将被替换为“-dog”。另一种选择是

```
// " cat_dog cat-dog cat dog catdog catcatdog " --> "cat_dog cat-dog dog catcatdog" 
animals.replace(new RegExp('(^|\\s+)' + animal + '(\\s+|$)|\\s+', 'gi'), ' ').trim(); 
```

供参考：[正则表达式中的单词边界是什么？](https://stackoverflow.com/questions/1324676/what-is-a-word-boundary-in-regexes)

# android-layout - Android：定义自定义视图用于内容辅助的属性

> ID：12076021
> 
> 赞同：0
> 
> 时间：2012-08-22T15:01:31.653
> 
> 标签：android-layout, attributes, content-assist, graphical-layout-editor

我有一些自定义视图和自定义属性。我想定义我的视图使用哪些属性，以便 eclipse 可以将其用于内容辅助。

例如，我在 res/values 文件夹中声明了一个自定义 xml 属性：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="TagAttrs">
        <attr name="spColor" format="color" />
    </declare-styleable>
</resources> 
```

我的布局文件使用带有自定义属性的自定义视图：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res/com.twp"
    ...
    >

    <com.twp.TestView
        android:id="@+id/testView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        app:spColor="#FF00FF" >
       ...
   </com.twp.TestView>
</LinearLayout> 
```

如果我使用 android: 前缀，则 eclipse 会为 LinearLayout （从中派生 TestView）提供所有选项，但如果我使用 app: 前缀，它会在底部以红色显示“Element com.twp.TestView not可用的”。此外，如果我在 spColor 中尝试内容辅助，它会显示“内容辅助在当前位置不可用”。我想，既然我定义了“app”命名空间，它就能找到我的风格声明，并且至少知道 spColor 是一种颜色。

所以这只是 eclipse 的限制，还是我可以明确定义视图的自定义属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T23:20:30.923

我认为 declare-styleable 中的 name 属性的值需要匹配关联类的非限定名称或关联类的超类的非限定名称。所以如果TestView的直接超类是LinearLayout，那么关联的declare-styleable中name属性的值应该是TestView，而不是TagAttrs。

# alchemy - 如何动态加载 adobe Alchemy swf 构建

> ID：12076023
> 
> 赞同：0
> 
> 时间：2012-08-22T15:01:38.923
> 
> 标签：alchemy

对于 Alchemy，大多数构建都是静态 swc 构建。这些对于直接链接库非常有用，但是如果您尝试一次使用多个库，您通常（总是？）会遇到共享内存空间的问题。我读过的一种解决方案是构建 swf 并将它们动态加载到它们自己的 ApplicationDomain 中。这将为所有库提供自己的内存，并允许您加载多个 Alchemy 库。（如 adobe 论坛上的这些主题所述：http: [//forums.adobe.com/message/3665801](http://forums.adobe.com/message/3665801)和[http://forums.adobe.com/message/3927791](http://forums.adobe.com/message/3927791)）

我的问题是：如何加载这些 swf 并获取其中的代码？似乎没有关于这个问题的任何文档，虽然我知道如何加载 swf，但我不知道如何获取代码，因为我没有任何与 swf 的接口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:36:32.360

问题是我们想要动态加载 Alchemy 库，但如果我们将库构建为 SWF，它将无法工作（因为这会生成一个独立的应用程序）。但是我们不能动态加载 SWC——或者我们可以吗？

这是要做的事情（假设一个名为 的库`mylib`）：

1.  构建`mylib`为 SWC。
2.  解压`mylib.swc`并解压`library.swf`文件；将其重命名为`mylib.swf`
3.  嵌入`mylib.swf`为[二元资产](http://dispatchevent.org/roger/embed-almost-anything-in-your-swf/)
4.  在运行时，将资产实例化为`ByteArray`
5.  将资产传递`ByteArray`给[Loader#loadBytes](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html#loadBytes%28%29)
6.  当加载器触发 COMPLETE 时，使用[Loader#contentLoaderInfo](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html#contentLoaderInfo)获取加载的 SWF 的 ApplicationDomain
7.  使用[ApplicationDomain#getDefinition](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/ApplicationDomain.html#getDefinition%28%29)查找 Alchemy 初始化程序类。例如，`cmodule.mylib.CLibInit`
8.  [像往常](http://labs.adobe.com/wiki/index.php/Alchemy%3aDocumentation%3aDeveloping_with_Alchemy%3aAS3_API#CLibInit)一样使用初始化程序。例如，呼叫`init`等。
9.  ...利润！

您可以通过这种方式嵌入任意数量的 Alchemy 库，每个库都在自己的 ApplicationDomain 中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:51:06.350

我一直试图通过创建一个新的 ApplicationDomain 并将其传递给加载程序上下文来动态加载库。我做错的是存储对该 ApplicationDomain 的引用并尝试从该引用中获取定义。出于某种原因，它返回 null。通过实现paleozogt的答案并改变它以动态加载swf，我最终得到了正确的代码，它不使用对ApplicationDomain的存储引用，而是从加载器的contentLoaderInfo中获取它。

如果你想动态加载库，下面是代码：

```
package
{
    import flash.display.Loader;
    import flash.events.Event;
    import flash.net.URLRequest;
    import flash.system.ApplicationDomain;
    import flash.system.LoaderContext;

    public class AlchemyDynamicLoad
    {
        private var _library:Object;
        private var _loader:Loader;

        public function AlchemyDynamicLoad()
        {
            var loaderContext:LoaderContext = new LoaderContext(false, new ApplicationDomain());
            var request:URLRequest = new URLRequest("../assets/mylib.swf");
            _loader = new Loader();
            _loader.contentLoaderInfo.addEventListener(Event.COMPLETE, completeHandler);
            _loader.load(request, loaderContext);
        }

        private function completeHandler(event:Event):void
        {
            // NOTE: Storing a reference to the application domain you feed to the loaderContext and then trying to get the 
            // definition from that reference is not going to work for some reason. You have to get the applicationDomain
            // from the contentLoaderInfo, otherwise getDefinition returns null.
            var libClass:Class = Class(_loader.contentLoaderInfo.applicationDomain.getDefinition("cmodule.mylib.CLibInit"));
            _library = new libClass().init();
        }
    }        
} 
```

如果你想嵌入它，这里是代码（paleozogt's answer）：

```
package
{
    import flash.display.Loader;
    import flash.events.Event;

    public class AlchemyStaticLoad
    {
        [Embed(source="../assets/mylib.swf", mimeType="application/octet-stream")]
        private static var _libraryClass:Class;

        private var _library:Object;
        private var _loader:Loader;

        public function AlchemyStaticLoad()
        {
            _loader = new Loader();
            _loader.contentLoaderInfo.addEventListener(Event.COMPLETE, completeHandler);
            _loader.loadBytes(new _libraryClass());
        }

        private function completeHandler(event:Event):void
        {
            var libClass:Class = Class(_loader.contentLoaderInfo.applicationDomain.getDefinition("cmodule.mylib.CLibInit"));
            _library = new libClass().init();
        }
    }
} 
```

# function - 在 postgresql 函数中循环遍历数据库

> ID：12076027
> 
> 赞同：2
> 
> 时间：2012-08-22T15:01:51.660
> 
> 标签：function, postgresql

我想遍历 postgresql 数据库列表并从 postgresql 函数中对它们运行一些查询。这是一个代码示例...

```
 CREATE OR REPLACE FUNCTION my_function() 
    RETURNS VOID AS  
    $$
    DECLARE
        db VARCHAR(50); -- this declaration is where the confusion is
    BEGIN
        FOR db IN 
            SELECT datname FROM pg_catalog.pg_database WHERE datname ~ '^mydbname_'
        LOOP
            -- this is just an example
            SELECT * FROM db;
        END LOOP;
    END; 
    $$
    LANGUAGE 'plpgsql'; 
```

我知道我可以使用 postgresql`EXECUTE`将查询评估为字符串（例如，`EXECUTE 'SELECT * FROM ' || db || ';';`），但我的查询相当长且复杂。

有没有办法在 postgresql 中做到这一点？是否有“数据库”声明类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:32:22.353

您不能直接在查询中将变量用作对象名称（数据库、表、列）。您必须使用 EXECUTE。

这无论如何都行不通，因为您不能进行跨数据库查询。从客户端执行此操作或查看使用 dblink。有一个 SQL/MED（外国数据包装器）的实现，但奇怪的是我认为还没有[PostgreSQL 包装器](http://wiki.postgresql.org/wiki/Foreign_data_wrappers)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:08:58.800

pg_database 中的数据库名称不是名称类型吗？

尝试`DECLARE db_name NAME;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-12T22:55:43.303

我无法使用 Postgresql 函数来做到这一点。如果有帮助，这里有一个非常简单的 bash 脚本来遍历所有数据库：

```
#!/bin/bash

all="SELECT datname FROM pg_database WHERE datistemplate = false and datname != 'postgres'"
psql -h host -U user postgres --no-align -t -c "${all}" | while read -a bd ; do
    echo "Processing ${bd}..."
    psql -h host -U user "${bd}" -c "SELECT current_database()"
    # psql -h host -U user "${bd}" -f fix.sql 
done 
```

# php - 定义具有别名函数的好方法

> ID：12076028
> 
> 赞同：0
> 
> 时间：2012-08-22T15:01:52.547
> 
> 标签：php, function, optimization

由于向后兼容性问题，我需要有两个函数，一个是另一个的别名。

```
public function getMostPopularArticles(array $params = array())
{
    $this->getMostViewedArticles($params);
}

public function getMostViewedArticles(array $params = array())
{
    return $this->_response_request(".....");
} 
```

`getMostPopularArticles()`是旧函数的别名的新函数（及时将被删除）`getMostViewedArticles()`

是，我做对了吗？有改进的余地吗？

我不得不提到`getMostViewedArticles()`（旧函数）正在使用新参数来返回正确的数据，但我只需要一个具有正确名称的别名 ( `getMostPopularArticles()`) 以便用户有时间更新他们的代码和在未来的版本中，完全删除旧的命名函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:05:42.447

你为什么不这样做：

```
public function getMostViewedArticles(array $params = array())
{
    return getMostPopularArticles($params);
} 
```

这样，任何新的更改只需要在其中完成，`getMostPopularArticles`但`getMostViewedArticles`仍然可以被遗留代码使用。

还`getMostPopularArticles`应该具有您当前正在使用的任何业务逻辑，因为这是您要继续使用的较新功能

```
public function getMostPopularArticles(array $params = array())
{
    return $this->_response_request(".....");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:04:58.583

如果你有一个不推荐使用的函数，你应该在所有新代码中基本上避开它。删除该函数后，您的代码将（显然）中断。因此，您不应该调用已弃用的函数：您应该在新调用中复制并粘贴代码（或重写它）。

# azure - 只允许本地网络连接到 Windows Azure VM？

> ID：12076029
> 
> 赞同：4
> 
> 时间：2012-08-22T15:01:56.347
> 
> 标签：azure, azure-sql-database, azure-virtual-machine

我正在尝试锁定充当 Web 应用程序的应用服务器的虚拟机。我有两个 VM：一个用于应用程序服务器，另一个用于运行 Web 服务器。我必须打开大量端口以允许 Web 服务器与某些 wcf 服务通信，但我只想允许来自 Web 服务器的这些连接，并且不允许该网络之外的任何人。我必须添加端点才能让 Web 服务器访问 wcf 服务，但这也使它们可以访问公共 IP。我怎样才能只允许此流量在

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:04:26.467

对于虚拟机，从托管服务外部访问端口的唯一方法是定义输入端点（有或没有跨一组机器的负载平衡）。在您的情况下，您只需打开 80 和 443，专门用于您的 Web 服务器（例如，非负载平衡）。这被认为是*端口转发端点*，因为这两个端口上的流量会直接转发到您的 Web 服务器。[为了更清楚地了解端口转发的端点，我建议在这里](http://michaelwasham.com/2012/06/08/understanding-windows-azure-virtual-machines/)阅读 Michael Washam 的博客文章。

此时，您将打开应用服务器上的各种其他端口（通过其防火墙配置），现在您的 Web 服务器可以与应用服务器通信，但外部世界将无法访问应用服务器。**注意：**我假设您将 Web 服务器和应用服务器放在同一个托管服务中。否则，您需要找到一种不同的方式来连接 Web 和应用服务器，例如配置虚拟网络。

**编辑 6/5/2013**您现在可以在输入端点上启用 ACL，允许（或阻止）IP 范围。如今，ACL 只能通过 PowerShell 进行管理，并于 2013 年 6 月进行了更新。请参阅[此帖子](http://michaelwasham.com/2013/06/03/windows-azure-powershell-june-2013-update-for-iaas-and-paas/)以了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T19:40:39.840

只要本地防火墙对这些端口开放，存在于同一虚拟网络上的机器就可以相互通信。这个问题出在我的应用程序中的配置上，而不是因为这个。我也没有打开正确的端口。现在它就像一个魅力。

# c# - 具有递归函数的 BackgroundWorker

> ID：12076030
> 
> 赞同：0
> 
> 时间：2012-08-22T15:01:57.843
> 
> 标签：c#, .net-4.0, recursion, backgroundworker

[我对如何使用System.ComponentModel.BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)有很好的了解，基本上你有一个“DoWork”函数，通常有一些循环可以工作，每次迭代你检查`e.Cancel`以确定是否中断和停止循环结束`BackgroundWorker`“DoWork”（这一切都假设`WorkerSupportsCancellation`属性设置正确`true`）。

我不确定我是否有一个执行我的任务（而不是循环）的递归函数（确切的函数无关紧要，任何递归函数都可以说是经典的计算阶乘）我如何从内部调用它一个“DoWork”函数，在这种情况下我如何向上传播`e.Cancel`以摆脱递归？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T15:14:40.227

你的意思是这样的吗？一旦取消启动，递归循环将展开直到顶部并且您被停止。

```
void RecursiveLoop(BackGroundWorker worker)
{
  // ON entry check if we need to stop
  if (worker.CancellationPending) return;
  //
  // Normal code and the recursion
  if (morework) RecursiveLoop(worker);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T15:10:05.377

为取消后台工作人员的函数创建一个委托。

当后台工作人员的取消处于挂起状态时，创建一个返回 false 的函数委托。

将这些委托传递给递归函数，并确保它将这些委托传递给每个递归调用。

当您想取消后台工作人员时，在递归函数中调用第一个委托。

最后，在递归函数中使用第二个委托检查挂起的取消。

这样您就不必传递后台工作人员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T16:00:02.170

您是否考虑过编写展开的递归 while 循环？“展开的递归循环”的优点是：

*   Stack<> 对象可以用完所有可用内存，但不会导致 stackoverflow
*   无论工作队列有多深，都可以通过一次测试取消函数调用并返回
*   如果愿意，您可以报告进度（例如进度百分比 = num_items_processed / 堆栈大小 + num_items_processed）
*   您可以随时暂停执行并稍后恢复

这是展开递归的一种潜在实现：

```
void RecursiveLoop(WorkItem item)
{
    // Create a stack and push our item onto it
    Stack<WorkItem> recursion = new Stack<WorkItem>();
    recursion.Push(item);

    // Loop through all items in the stack
    while ((!cancel_flag_set) && (recursion.Count > 0)) {
        WorkItem current = recursion.Pop();

        // ... Do Work Here ...

        // Now, queue up all the child items
        foreach (WorkItem child in current.ChildItems) {
            recursion.Push(child);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T15:15:54.460

检查`e.Cancel`函数的开头，如果为真，则在类范围内设置一个成员变量。使用该变量来确定是否继续。

# wpf - prism mvvmlight 视图激活错误，尝试创建视图模型实例时发生异常

> ID：12076035
> 
> 赞同：0
> 
> 时间：2012-08-22T15:02:06.853
> 
> 标签：wpf, prism, mvvm-light

该解决方案仅使用 Prism 即可完美运行。

但是，我用Nuget安装MVVMLight后，就无法再激活视图了。异常快照中的 RootCauses 是关于创建我的视图模型类型的实例。

来源是关于 Microsoft.Practice.ServiceLocation

我已经卸载了 Prism 和 MVVMLight，然后重新安装它们。但仍然无法正常工作。

卸载 MVVMLight 似乎使解决方案再次起作用。

# c# - 如何读取资源 txt 文件的文本并将其放入 C# .net 4.0 WPF 中的 TextBox？

> ID：12076037
> 
> 赞同：0
> 
> 时间：2012-08-22T15:02:13.837
> 
> 标签：c#, .net, wpf

如何读取资源 txt 文件的文本并将其放入 C# .net 4.0 WPF 中的 TextBox？我的表单中有一个 TextBox，资源文件夹中有一个 TXT 文件，如何将 TXT 文件中的文本（包括换行符、双空格等）放入 TextBox？

请为我简化代码，因为我是 C# 的初学者...谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:06:26.437

无需提供代码，对于这个确切的问题，已经有一个非常简单的 WPF 示例，在[此处](http://msdn.microsoft.com/en-us/library/db5x7c0d.aspx)找到。

顺便说一句，不要问“嘿，你们能帮我解决这个问题吗！” 你应该问更多的问题，比如“嘿，我试过这个，那个。为什么这不起作用，有什么问题。我还在某处读到这被认为是不好的，为什么？”。表明你已经在问题上投入了工作，这将大大增加人们愿意为你的问题投入的时间和精力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:14:49.563

在 WinForms 或 WPF 中读取文件没有区别。只需添加到您的窗口 TextBox 并通过 System.IO.File 类加载文件。

例子 ：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="auto"/>
    </Grid.RowDefinitions>
    <TextBox x:Name="tb" Margin="4"/>
    <Button Grid.Row="1" Content="Load file" x:Name="btnLoad" Click="btnLoad_Click" Width="60" HorizontalAlignment="Left" Margin="4"/>

</Grid> 
```

和代码行为：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void btnLoad_Click(object sender, RoutedEventArgs e)
    {
        tb.Text = File.ReadAllText(@"*path to file*");
    }
} 
```

# windows-services - 服务未从 Debugger.Break c# windows service 开始

> ID：12076040
> 
> 赞同：2
> 
> 时间：2012-08-22T15:02:20.363
> 
> 标签：windows-services

使用以下代码，服务确实会启动，但是当我取消注释 Debugger.Break() 时，它不会。怎么了。

```
 protected override void OnStart(string[] args)
    {
        #if DEBUG
             //Debugger.Break();
        #endif
    } 
```

进一步更新，如果我将目标框架更改为 3.5 它可以工作但在框架 4.0 中不起作用！！！

# cocos2d-iphone - cocos2d 转换坐标

> ID：12076045
> 
> 赞同：0
> 
> 时间：2012-08-22T15:02:26.677
> 
> 标签：cocos2d-iphone, coordinates

我正在开发一个 cocos2d 游戏，我对坐标系有点困惑。我有另一个应用程序，我用它来构建关卡，但它有不同的坐标。坐标 (0,0) 在左上角，而不是在 cocos2d 中的左下角。将坐标转换为 cocos2d 空间的最简单方法是什么？我可以从水平高度中减去 Y 坐标吗？或者有没有更简单的方法？cocos2d坐标系是左手还是右手？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:35:14.250

我很确定 UIKit 在左上角也有它的原点 (0, 0)，所以你应该可以调用：

`[[CCDirector sharedDirector] convertToGL:yourpoint];`

这会将其转换为与 cocos2d 相同的坐标系。

# shell - 挂在邮件功能上的外壳脚本

> ID：12076046
> 
> 赞同：0
> 
> 时间：2012-08-22T15:02:26.230
> 
> 标签：shell

我很难让这个 shell 脚本运行。我决定开始在我的脚本中使用简单的函数，因为它更具可读性和可维护性。这是我的第一次尝试，一切运行良好，但邮件功能挂起。我知道邮件在等待 EOF，但我正在使用 echo 将我的身体放入其中。

我想我在我不完全理解的 shell 脚本中引用或传递参数的某些部分做错了。我已经尝试了我能想到的所有引号组合，但它仍然每次都挂起。

```
#!/bin/bash

if [ -f /tmp/imports ]
then
        echo "Script Off"
        exit
fi

OLDIFS=$IFS
IFS=$'\n'
IFS=$OLDIFS
LOGFILE="/var/log/file.log"

log(){
        DATE=`date "+%m-%d-%Y %H:%M"`
        MESSAGE="$DATE - $@"

        echo $MESSAGE
        echo $MESSAGE >>$LOGFILE
}

mail(){
        BODY="$1"
        SUBJECT="$2"

        echo "$BODY" |  mail -s "$SUBJECT" my@email.com
}

log "Script Started"

TodayFiles=`find /ftpfiles/incoming/ -type f -mmin +60`
Count=`find /ftpfiles/incoming/ -type f -mmin +60 | wc -l`

log "$Count Files Found"

if [ $Count -gt 4 ]; then
        log "Too Many Files!!!\n"
        mail "There were 5 or more files found by the script. I have not moved any files at this time. There is likely something very wrong. Please check things out immediately." "ATTN: TOO MANY FILES!"

fi

if [ $Count -gt 0 ]; then
        log "Scanning Files..."
        for Source in $TodayFiles
        do
                log "Found file: $Source"
                #mv "$Source" "/ftpfiles/rejected$Source"
                log "Moved file to: /ftpfiles/rejected$Source"
                mail "The file $Source has been moved to rejected. Please find out why and send the proper rejection. Thank You." "ATTN: Stranded Import file Found"
        done
fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:13:22.567

您的`mail()`函数与 mail 命令同名。重命名`mail()`为`mymailwrapper()`else 它只是递归地调用自己。

# facebook - Facebook 创建相册图 api

> ID：12076052
> 
> 赞同：1
> 
> 时间：2012-08-22T15:02:58.693
> 
> 标签：facebook, facebook-graph-api

我编写了一个 facebook 应用程序，它检查专辑是否存在，如果不存在，它会创建一个。

这一切都在 2 周前工作，现在我去检查它以向客户展示它不再工作。我在想这可能与 Facebook 有关，也许他们现在需要 SSL？但是，我在该网站上找不到任何证据。

我得到的错误是：

```
Warning: file_get_contents(https://graph.facebook.com/517578134925015/albums?access_token=AAAD5tUCp808BAIZBPk4eV11mlf9C92velLsDeZAm5mXhKZCkwpM3LNy7ax6BBmhuH4BVZBUN6Iycyt55NoXZAFSts9zHeCFNzT6FLJYucgT2SQG8fOYIP) [function.file-get-contents]: failed to open stream: HTTP request failed! HTTP/1.0 500 Internal Server Error in /var/www/vhosts/hidden/development/cms/backend/publishAlbum.php on line 59 
```

我目前的代码是：

```
 //If no album ID is set, create a new album.
            $graph_url = "https://graph.facebook.com/".$pageId."/albums?" . "access_token=". $pageAccessToken;
            $postdata = http_build_query(
                array(
                    'name' => $albumName
                )
            );
            $opts = array('http' =>
                array(
                    'method'=> 'POST',
                    'header'=>
                    'Content-type: application/x-www-form-urlencoded',
                    'content' => $postdata
                )
            );
            $context = stream_context_create($opts);
            $result = json_decode(file_get_contents($graph_url, false, $context)); 
```

任何帮助表示赞赏。

谢谢

编辑：

我尝试使用 API 的代码。

```
$params = array(
    'name' => 'testtest',
    'message' => 'test test'
);
try{
    $albumtResult = $facebook->api('/'.$pageId.'/albums', 'post', $params);
}
catch(FacebookApiException $e){
    error_log($e);
    $albumtResult = null;
}
$albumId = $albumtResult->id; 
```

这是捕获的异常： http: [//pastebin.com/pxeyRTDn](http://pastebin.com/pxeyRTDn)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:14:50.227

好吧，如果您使用 PHP SDK 进行 API 调用，而不是使用 file_get_contents 来“手动”进行，那么这个错误的原因会更容易弄清楚……因为使用 SDK，您会得到一个异常，应该指向错误原因，而 file_get_contents （默认情况下）只会在收到 2xx HTTP 状态代码以外的任何其他内容时抛出警告，并且不允许您访问响应正文（很可能包含人类可读的错误消息）。

我的建议：**使用 SDK！**

否则，即使状态代码发出错误信号，也要将您希望查看返回数据的上下文参数添加到该参数中。（详情 -> 见手册）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T11:33:25.327

经过大量搜索后，有人在 Facebook 上创建了一个与我的问题几乎相同的错误报告。

自创建以来，它已经有很多回购和其他人报告说他们也遇到了同样的问题。

facebook 上的优先级已更改为高，因此希望它很快得到修复。

Facebook 错误报告：[https ://developers.facebook.com/bugs/376442565760536?browse=search_50361119879b15494037772](https://developers.facebook.com/bugs/376442565760536?browse=search_50361119879b15494037772)

感谢大家的时间。

# regex - 需要 htaccess 301 重定向模式

> ID：12076053
> 
> 赞同：1
> 
> 时间：2012-08-22T15:02:59.533
> 
> 标签：regex, .htaccess, http-status-code-301

我需要创建一个重定向所有的 htaccess 301 重定向

www.mydomain.dk/40005/（其中 40005 可以是任何 5 位数字）到 www.mydomain.dk

有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:14:14.617

很简单 ：

```
RewriteEngine On
RewriteRule ^[0-9]{5}/?$ / [QSA,L,R=301] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:08:09.143

在您的文档根目录的 htaccess 文件中，或在您的虚拟主机配置中：

```
RedirectMatch 301 ^/[0-9]{5}/?$ / 
```

或者，您也可以使用 mod_rewrite：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?mydomain\.dk$ [NC]
RewriteRule ^/?[0-9]{5}/?$ / [L,R=301] 
```

# linq - 在 VB.NET 中使用 Linq 展平分层数据

> ID：12076060
> 
> 赞同：2
> 
> 时间：2012-08-22T15:03:54.990
> 
> 标签：linq

给定以下结构：

```
Public Class Vendor
    Public Property Accounts As Account()
End Class

Public Class Account
    Public Property Services As Service()
End Class

Public Class Service
    Public Property Name As String
End Class 
```

如何在给定一个供应商的所有帐户中获得所有包含服务的平面列表？这是我迄今为止尝试过的：

```
vendor.Accounts.Select(Function(acct) acct.Services) 'Returns a collection of services collections 
```

我知道我只是缺少一个明显的操作员。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T15:05:29.497

您正在寻找 SelectMany。

```
vendor.Accounts.SelectMany(Function(acct) acct.Services) 
```

如果您只想要独特的，请在最后打一个 .Distinct() 。

# file - 如何在 github 的 twitter bootstrap 存储库中搜索“.tab-focus()”

> ID：12076062
> 
> 赞同：0
> 
> 时间：2012-08-22T15:04:04.043
> 
> 标签：file, search, github, directory

这与我自己的问题
[有关](https://stackoverflow.com/questions/11722650/how-to-search-a-particular-word-or-entry-inside-a-sub-folder-in-a-repository-on)

这次我尝试应用相同的原理来搜索函数名称 - .tab-focus() 在引导 twitter 存储库中，条目位于文件 https://github.com/twitter/bootstrap/blob/master/less /reset.less 在第 51 行，但无法搜索它。

我发现的相同搜索词的另一个条目位于 https://github.com/twitter/bootstrap/blob/master/less/mixins.less 第 29 行

我只是无法使用 .less 扩展文件搜索任何内容，我不知道为什么 github 无法搜索 .less 或其他较少使用的扩展文件。我可以获得 .js 和 .css 文件的搜索结果，但同样不能获得 .html 和 .less

提前致谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:06:48.223

我建议在本地克隆项目并使用`git grep`.

```
git clone <repo>
git grep '.tab-focus' *.less 
```

# javascript - 选择所有复选框时出现问题

> ID：12076064
> 
> 赞同：0
> 
> 时间：2012-08-22T15:04:11.207
> 
> 标签：javascript

我有这段代码，它允许我一次检查所有复选框。

问题是，当我选择“全选”复选框时，它会选择所有其他复选框，但如果我在其他 2 个复选框之前选择了，它会选择除这两个复选框之外的所有复选框！

它不能正常工作..

你能看看吗？

功能：

```
function selectAll(x) {
for(var i=0,l=x.form.length; i<l; i++)
if(x.form[i].type == 'checkbox' && x.form[i].name != 'sAll')
x.form[i].checked=x.form[i].checked?false:true
} 
```

全选：

```
<input type="checkbox" name="sAll" onclick="selectAll(this)" /> 
```

以及我页面中的所有其他复选框：

```
<input type='checkbox' size='40' name='active[$i] ' ' ";?> <?php if($rows['img_active'] == 1) { echo 'checked'; }  ?> <? if("checked"){ echo 'value="1"';} else{ echo 'value="0"';}?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:10:41.663

```
function selectAll(x) {
    var checked = x.checked;
    for (var i = 0, l = x.form.length; i < l; i++) {
        var elem = x.form[i];
        if (elem !== x && elem.type === "checkbox") {
            elem.checked = checked;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:11:41.427

这将使所有复选框处于与全选复选框相同的状态。

```
x.form[i].checked = x.checked ? false : true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T15:05:11.797

更改此代码（切换选中状态）：

```
x.form[i].checked=x.form[i].checked?false:true 
```

对此（如果未选中则仅检查它）：

```
x.form[i].checked=true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T15:06:45.433

这条线

```
x.form[i].checked=x.form[i].checked?false:true 
```

切换复选框的状态，因此很自然地，任何被选中的都将被取消选中。

你要

```
x.form[i].checked = true; 
```

反而。

编辑：您是否希望所有复选框都根据复选框的状态运行`sAll`？

```
x.form[i].checked = document.getElementsByName('sAll')[0].checked; 
```

# ant - 常春藤、蚂蚁、詹金斯 - 这样做是个好主意吗？ 在 Jenkins 上构建？

> ID：12076067
> 
> 赞同：11
> 
> 时间：2012-08-22T15:04:18.450
> 
> 标签：ant, jenkins, ivy

我们将在 Ant 中使用 Ivy，并让 Jenkins 进行构建。我最初认为让 Jenkins`<ivy:cleancache/>`在运行构建之前做一个是个好主意。（这将是强制性“干净”目标的一部分）。

但是，我现在看到这`<ivy:cleancache>`并不仅仅是从 中清除内容`<ivy:cachepath>`，而是真正删除了整个`$HOME/.ivy/cache`目录。

我担心的是，如果 Jenkins`<ivy:cleancache>`在开始之前对所有构建进行了操作，它将干扰 Jenkins 可能正在执行的其他构建。

做`<ivy:cleancache>`一个好主意，特别是如果单个用户可能同时进行多个构建？

实际上，当您`<ivy:cachepath pathid="compile.path"/>`在多个项目中执行 a 时会发生什么？这也会影响像詹金斯这样的东西吗？如果多个构建同时构建，詹金斯会感到困惑`compile.cachepath`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T19:23:49.060

在我看来，每次构建都运行 ivy cleancache 任务是多余的，并且消除了使用 ivy 的主要好处之一，即智能下载 3rd 方依赖项。

话虽如此，如以下相关 Maven 问题中所述，所有缓存都可能变脏，应定期清除：

[什么时候可以安全地删除本地 Maven 存储库？](https://stackoverflow.com/questions/10049948/when-is-it-safe-to-delete-the-local-maven-repository/10050239#10050239)

几个建议：

# 使用专门的 Jenkins 作业清除 ivy 缓存

我的第一个建议是创建一个定期 Jenkins 作业，在您的构建中调用以下 clean-all 目标：

```
<target name="clean-all" depends="clean">
   <ivy:cleancache/>
</target> 
```

这可确保 Jenkins 决定何时清除缓存，并且您可以将其安排在正常构建时间之外（例如每月 1 日凌晨 2 点）

# 使用多个缓存隔离每个项目

我的第二个建议增加了项目构建之间的隔离。[使用caches](http://ant.apache.org/ivy/history/latest-milestone/settings/caches.html)指令将每个项目配置为拥有自己的私有缓存。在你的常春藤设置文件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T21:23:54.487

这是我决定做的事情：

我已修改我的`ivysettings.xml`文件以具有以下内容：

```
<ivysettings>
    <properties environment="env." override="false"/>
    <caches
        defaultCacheDir="${ivy.default.ivy.user.dir}/cache-${env.EXECUTOR_NUMBER}"
        resolutionCacheDir="${ivy.dir}/../target/ivy.cache"/>
    <settings defaultResolver="default"/>
    <include file="${ivy.dir}/ivysettings-public.xml"/>
    <include url="${ivy.default.settings.dir}/ivysettings-shared.xml"/>
    <include url="${ivy.default.settings.dir}/ivysettings-local.xml"/>
    <include url="${ivy.default.settings.dir}/ivysettings-main-chain.xml"/>
    <include url="${ivy.default.settings.dir}/ivysettings-default-chain.xml"/>
</ivysettings> 
```

这做了两件事：

*   它将 Ivy 本地缓存定义为Jenkins 执行程序的`$HOME/.ivy/cache-$EXECUTOR_NUMBER`位置。`$EXECUTOR_NUMBER`这意味着每个执行器都有自己的 Ivy 缓存。因此，如果 Jenkins 一次执行多个作业，则每个作业将由不同的执行器拾取，因此它将有自己的缓存。如果一个作业想要清理缓存，它可以直接进行。
*   我已将解析缓存定义为`${basedir}/target/ivy.cache`. 这为每个作业提供了自己的解析器缓存，该缓存非常小。但是，如果 Jenkins 正在构建同一个 Ivy 项目的多个修订版，则这种方式 ivy 解析不会干扰其他工作。

唯一的缺点是调用了用户的默认缓存目录，`$HOME/.ivy/cache-$env.EXECUTOR_NUMBER`这不是一个漂亮的站点。我想让它更合理`$HOME/.ivy/cache-0`，但我还没有弄清楚。但是，它在这一点上并没有真正影响任何事情。

现在，开发人员拥有一个 Ivy 缓存，其中包含他们下载的所有 jar。这样，可以在项目之间共享 jar，从而加快开发人员的速度。

同时，Jenkins 可以按照配置的频率清理 Ivy 缓存。这可以针对每项工作进行，或者每天或每月一次。但是，由于缓存是按执行程序完成的，因此当另一个作业（将在另一个执行程序上运行）取决于该缓存时，我不会遇到缓存被清理的问题。

这应该解决所有特定问题。我唯一想做的就是弄清楚如何设置一个默认的 EXECUTOR_NUMBER 变量（如果尚未设置）。我已经尝试过这样的各种事情：

```
<ivysettings>
    <property name="env.EXECUTOR_NUMBER" value="0" override="false"/>
    <properties environment="env." override="false"/>
    <caches
        defaultCacheDir="${ivy.default.ivy.user.dir}/cache-${env.EXECUTOR_NUMBER}"
        resolutionCacheDir="${ivy.dir}/../target/ivy.cache"/>
    <settings defaultResolver="default"/>
    <include file="${ivy.dir}/ivysettings-public.xml"/>
    <include url="${ivy.default.settings.dir}/ivysettings-shared.xml"/>
    <include url="${ivy.default.settings.dir}/ivysettings-local.xml"/>
    <include url="${ivy.default.settings.dir}/ivysettings-main-chain.xml"/>
    <include url="${ivy.default.settings.dir}/ivysettings-default-chain.xml"/>
</ivysettings> 
```

但是，无济于事。我确实以不同的方式更改了和文件`override`上的参数，但它并没有完全达到我想要的效果。`<property>``<properties>`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T06:34:06.290

只是我一直在做很多事情来解决你遇到的最后一个问题。

您可以将此添加到 Jenkins Ant Build Steps 的属性中

```
another.less.obtrusive.name=${EXECUTOR_NUMBER} 
```

并添加到 ivysettings.xml。

因此，除了 Jenkins 之外，每个人都将是“0”，因为它会将这个属性注入 ANT。

关于主要问题的一些事情：关于詹金斯，我总是从新开始。CI 构建应该是健壮的、彻底的。快速是受欢迎的副产品，但不是动力。

# php - 找不到您请求的页面 - CodeIgniter

> ID：12076068
> 
> 赞同：2
> 
> 时间：2012-08-22T15:04:25.433
> 
> 标签：php, codeigniter

我正在使用 CI 框架开发一个基本应用程序。

我有以下错误：

> 404页面不存在
> 
> 未找到您所请求的页面。

下面发布的是我的代码文件。

我的控制器代码：

```
class Contact extends CI_Controller{

  function _Contact(){
    parent::CI_Controller();
  }

  /*function main(){
    $this->load->model('contact_model');
    $data = $this->books_model->general();

    $this->load->view('books_main',$data);
  }*/

  function input(){

    $this->load->helper('form');  
    $this->load->helper('html');      
    $this->load->model('contact_model');

    if($this->input->post('mysubmit')==true){
        $this->contact_model->entry_insert();
    }   

    $data = $this->contact_model->general();

    $this->load->view('contact_input',$data);   
  }

} 
```

然后在模型中我有以下代码：

```
class contact_model extends CI_Model{

  function _contact_model(){
    parent::Model();
    $this->load->helper('url');               
  }

  function entry_insert(){
    $this->load->database();
    $data = array(
              'name'=>$this->input->post('title'),
          'address'=>$this->input->post('author'),

              'year'=>$this->input->post('year'),

            );
    $this->db->insert('contact',$data);
  }

  function general(){

    $data['base']       = $this->config->item('base_url');

    $data['name']      = 'Name';
    $data['address']     = 'Address';

    $data['year']       = 'Year';
    $data['years']      = array('2007'=>'2007',
                                '2008'=>'2008',
                                '2009'=>'2009'); 

    $data['forminput']  = 'Student Registration';

    $data['fname']     = array('name'=>'name',
                                'size'=>30
                          );
    $data['faddress']    = array('name'=>'address',
                                'size'=>30
                          );

    return $data;   
  }
} 
```

最后，我的观点：

```
<html>
<head>

</head>
<body>
<div id="header">
<?php $this->load->view('contact_header'); ?>
</div>

<?php echo heading($forminput,3) ?>
<?php echo form_open('books/input'); ?>
<?php echo $name       .' : '.
        form_input($fname).br(); ?>
<?php echo $address      .' : '.
        form_input($faddress).br(); ?>

<?php echo $year        .' : '.
        form_dropdown('year',$years).br(); ?>

<?php echo form_submit('mysubmit','Submit!');  ?>
<?php echo form_close(); ?>

<div id="footer">
<?php $this->load->view('contact_footer'); ?>
</div>

</body>
</html> 
```

谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:22:59.320

在您的联系人控制器中删除它：

```
function _Contact(){
  parent::CI_Controller();
} 
```

替换为：

```
function __construct(){
  parent::__construct();
} 
```

并在您的联系人模型中删除：

```
function _contact_model(){
  parent::Model();
  $this->load->helper('url');               
} 
```

用这个替换它：

```
function __construct(){
   parent::__construct();
   $this->load->helper('url');  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:15:59.127

> 嘿，
> 
> 我经常遇到类似的问题。通常我会检查以下内容：
> 
> 1.  如果设置了正确的站点根目录，请检查配置文件。我经常在那里有实时服务器的东西。
> 2.  如果 RewriteBase 设置为正确的目录，请检查 .htaccess。
> 3.  以确保其读取正确的值 echo base_url(); （如果这通常是 .htaccess 重写基础）。
> 
> 希望能帮助到你。
> 
> r n8m [在此处输入链接描述][1]
> 
> [1]：[http ://ellislab.com/forums/viewthread/105880/](http://ellislab.com/forums/viewthread/105880/)

hmc

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-01T08:34:58.863

如果您在 Windows 上开发应用程序，您可能没有将控制器和模型名称的第一个字符设置为大写字符。

像 /controllers/home.php 到 /controllers/Home.php

在 Linux 上，文件名区分大小写。

注意：- 这是一个可能的问题的解决方案。可能存在配置错误、服务器和路径变量的问题。

可能重复：[CodeIgniter“找不到您请求的页面。” 错误？](https://stackoverflow.com/questions/17633582/codeigniter-the-page-you-requested-was-not-found-error/44302412#44302412)

# jsf-2 - 数据表内 JSF 复合组件的唯一 ID

> ID：12076071
> 
> 赞同：2
> 
> 时间：2012-08-22T15:04:28.943
> 
> 标签：jsf-2, primefaces

我在 glassfish 3.1.2 中使用 PrimeFaces 3.2 和 JSF 2。

我有一个`<p:dataTable>`显示包含不同问题信息的搜索结果（问题分配给用户）。如果有人单击指定用户的图标，`<p:dialog>`则会弹出一个。用户图标和相应的对话框是使用复合实现的。在复合材料中，我使用了一些 jQuery 函数，这些函数需要为每个对话框组件提供唯一的 ID - 我无法找到解决此问题的方法。

到目前为止我的调查：

我需要设置 widgetVar 属性，只要列表中只有一个用户，它就可以正常工作，但似乎在 dataTable 内部，widgetVar 对于许多复合材料来说并不是唯一的。由于用户可以在搜索结果中多次显示，因此我无法像这样设置 widgetVar：

```
<ui:param name="myWidgetVar" value="widget_#{user.id}" /> 
```

并以这种方式使用它

```
<p:dialog widgetVar="#{myWidgetVar}"> 
```

同样使用 #{cc.id} 也不能解决问题，因为它只返回小部件的 id，而没有始终相同的命名容器部分。

我需要 html 中显示的完整 ID（例如：form:jdt123:dialog:456） - 我怎样才能得到这个？

有谁知道该怎么做？

谢谢皮特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:09:47.620

我的解决方案是使用`#{cc.clientId}`我还不知道的。
这给了我完整的 html 元素 id，它由一系列与 UINamingContainer#getSeparatorChar 粘合的标识符组成（例如：form:jdt123:dialog:jdt456）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T18:42:38.003

感谢你的回答。你解决了我不相关的问题，但我想我偶然发现了另一个解决你问题的方法。

来自 PrimeFaces 用户指南 ( [http://primefaces.org/documentation.html](http://primefaces.org/documentation.html) )：

# 8.2 EL 函数

PrimeFaces 提供了内置的 EL 扩展，这些扩展是常见用例的助手。

## 常用功能

![PrimeFaces UserGuide 8.2 EL 函数表](../Images/1e49dce70c14474b8133f60609b405bd.png)

零件

```
<h:form id="form1">
     <h:inputText id="name" />
</h:form>
//#{p:component(‘name’)} returns ‘form1:name’ 
```

小部件变量

```
<p:dialog id="dlg">
     //contents
</p:dialog>
<p:commandButton type="button" value="Show" onclick="#{p:widgetVar(‘dlg’)}.show()" /> 
```

看起来您对 WidgetVar 实现最感兴趣。

# c++ - 如何在 GoogleTest 中运行特定的测试用例

> ID：12076072
> 
> 赞同：160
> 
> 时间：2012-08-22T15:04:30.667
> 
> 标签：c++, visual-studio-2010, googletest

我正在尝试为我的项目编写一个函数/方法，它将询问用户您要运行哪些所有测试用例？它看起来像下面......，

```
Test_Cases_1
         |_TestNo1
         |_TestNo2....so on
Test_Cases_2
         |_TestNo1
         |_TestNo2....so on
....
....so on
Test_Cases_N
         |_TestNo1
         |_TestNo2....so on 
```

所以，现在的挑战是在运行项目时它应该提示我你想要执行的所有测试用例是什么？如果我选择`Test_Cases_1`和`Test_Cases_N`。然后它应该执行这两个测试用例，并且应该从`Test_Cases_2 to ....`. 在结果窗口中，我还想查看 和 的`Test_Cases_1`结果`Test_Cases_N`。

所以，如果我看到 GoogleTest，有一个方法叫做`test_case_to_run_count()`; 但是所有这些`test cases`都使用 Test_F() 方法注册。所以，我做了很多分析，但仍然没有找到任何解决方案。请帮我。

* * *

## 回答 #1

> 赞同：218
> 
> 时间：2012-08-22T15:10:00.813

您可以使用[高级选项](https://github.com/google/googletest/blob/master/docs/advanced.md#running-a-subset-of-the-tests)来运行 Google 测试。

要仅运行某些单元测试，您可以使用`--gtest_filter=Test_Cases1*`命令行选项，其值接受`*`和`?`通配符以匹配多个测试。我认为它会解决你的问题。

升级版：

好吧，问题是如何**运行**特定的测试用例。将 gtest 与您的 GUI 集成是另一回事，我无法对此发表评论，因为您没有提供方法的详细信息。但是我相信以下方法可能是一个好的开始：

1.  通过运行测试获取所有测试用例`--gtest_list_tests`
2.  将此数据解析到您的 GUI 中
3.  选择你想要运行的测试用例
4.  使用选项运行测试可执行文件`--gtest_filter`

* * *

## 回答 #2

> 赞同：116
> 
> 时间：2014-10-20T08:47:29.457

总结 Rasmi Ranjan Nayak 和 nogard 的答案并添加另一个选项：

### 在控制台上

你应该使用标志`--gtest_filter`，比如

```
--gtest_filter=Test_Cases1* 
```

（您也可以在属性|配置属性|调试|命令参数中执行此操作）

### 关于环境

`GTEST_FILTER`你应该像这样设置变量

```
export GTEST_FILTER = "Test_Cases1*" 
```

### 在代码上

你应该设置一个标志`filter`，比如

```
::testing::GTEST_FLAG(filter) = "Test_Cases1*"; 
```

这样你的主要功能就变成了

```
int main(int argc, char **argv) {
    ::testing::InitGoogleTest(&argc, argv);
    ::testing::GTEST_FLAG(filter) = "Test_Cases1*";
    return RUN_ALL_TESTS();
} 
```

有关可以使用的字符串语法的更多信息，请参阅[运行测试子集部分。](https://github.com/google/googletest/blob/master/docs/advanced.md#running-a-subset-of-the-tests)

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-08-23T12:27:37.990

最后我得到了一些答案， `::test::GTEST_FLAG(list_tests) = true;`//来自你的程序，而不是控制台。

如果您想使用`--gtest_filter =*;` `/* =*, =xyz*... etc*/`// 您需要在控制台中使用它们。

所以，我的要求是从程序而不是控制台中使用它们。

`Updated:-`

最后我得到了从程序中更新相同内容的答案。

```
 ::testing::GTEST_FLAG(filter) = "*Counter*:*IsPrime*:*ListenersTest.DoesNotLeak*";//":-:*Counter*";
      InitGoogleTest(&argc, argv);
RUN_ALL_TEST(); 
```

所以，感谢所有的答案。

你们这些人很棒。

# c# - C# XMLReader Strange 17th position 关闭 XMLReader bug

> ID：12076073
> 
> 赞同：0
> 
> 时间：2012-08-22T15:04:33.420
> 
> 标签：c#, xml, xmltextreader

我有一个包含一堆东西的 ListView。第 17 个位置的任何内容总是中断（ObjectDisposedException“无法从关闭的 TextReader 中读取”）。1 到 16 以及 18 到 24 工作正常。如果我将 x 从第 17 位移到第 16 位，它会再次起作用，但新的第 17 位会中断。我的代码没有具体提到任何地方。

XML 文件遵循以下格式

```
<Profiles>
  <Profile name="a" type="A">
    <ListOne>1,2,3,4,5,6,7,8</ListOne>
    <ListTwo>1,2,3,4,5,6,7,8</ListTwo>
  </Profile>
  <Profile name="b" type="B">
    ...
    ...
</Profiles> 
```

代码很简单。我有一种方法可以找到我感兴趣的配置文件并将其作为子树返回

```
string CurrentProfile = "";
using (StreamReader SR = new StreamReader(MyXMLFilePath))
{
  XmlTextReader TR = new XmlTextReader(SR);
  do
  {
    TR.ReadToFollowing("Profile");
    TR.MoveToFirstAttribute();
    CurrentName = TR.Value;
    TR.MoveToNextAttribute();
    string CurrentType = TR.Value;

    if (CurrentName == MyName && CurrentType == MyType)
    {
      TR.MoveToElement();
      XmlReader subtree = TR.ReadSubtree();
      return subtree;
    }
  }
  while (CurrentName != "");
} 
```

然后我有一个从子树中提取列表 1 和 2 的方法。

```
if(subtree != null)
{
  subtree.ReadToFollowing("ListOne");
  subtree.Read();
  string[] ListOneArray = subtree.Value.Split(',');

  subtree.ReadToFollowing("ListTwo");
  subtree.Read();
  string[] ListTwoArray = subtree.Value.Split(',');
} 
```

这就是问题发生的地方。ObjectDisposedException 无法从关闭的 TextReader 中读取。当我到达 subtree.ReadToFollowing("ListTwo") 时它总是会中断，但前提是我选择了 XML 列表中的第 17 个配置文件。我看不出我是如何关闭文本阅读器的。此外，这适用于配置文件 18、19、20 等以及 1 到 16，但不知何故总是在位置 17 处中断，无论那里有什么。我看不出第 17 个位置与其他位置有何不同。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:07:16.727

`ReadSubTree()`返回一个仍然从底层流中读取的读取器。
由于您在从该阅读器读取之前关闭了流，因此它不起作用。

通常，使用 XmlReader 的只进模型相当烦人。
除非您正在处理非常大的文件，否则您应该改用 LINQ to XML；它更容易使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:41:03.560

你在哪里关闭`subtree`？根据 MSDN 文档，只是想知道最佳实践是否可能是`subtree`在代码中的某处显式关闭 XmlReader。

[http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.readsubtree.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.readsubtree.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T15:38:29.670

我个人发现在使用 xmls 时使用 Linq2Xml 更容易

```
XDocument xDoc = XDocument.Load(...);
var profiles = xDoc.Descendants("Profile")
    .Where(x=>x.Attribute("name").Value=="a")
    .Select(p => new
    {
        List1 = p.Element("ListOne").Value.Split(','),
        List2 = p.Element("ListTwo").Value.Split(',')
    })
    .ToList(); 
```

# php - 脚本的 Python 部分不是从网页开始的

> ID：12076075
> 
> 赞同：0
> 
> 时间：2012-08-22T15:04:35.573
> 
> 标签：php, python, shell, webpage

我在 linux NAS 上有一个网页，运行着 webserver 和 php。我想从服务器启动一个脚本，将数据写入数据库。

当我在 new69.php （有问题的网站）上时，我有例如：

`$uptime = exec('uptime');echo $uptime;` （这有效）

所以我有联系。

然后我使用 if 语句：

```
if (isset($_POST['verzenden'])) {
 $output1 = exec('whoami');
 exec('/share/MD0_DATA/Qweb/sqlite/AllesNaardDB.sh');
 } else {

    echo "Nog lekker niets gedaan."; 
```

`Whoami`在 is statememt 中给出了用户名“httpdusr”，所以 if 语句被到达并起作用。

现在当我执行 exec 语句时：

它必须执行 AllesNaardDB.sh，其中包含：

```
cd /share/MD0_DATA/Qweb/sqlite
echo "Wasmachine"
python2.6 wasm_util_sql.py [param]
echo "alles gegeven"
exit 0 
```

没有显示或完成。

但是当我这样做时：

```
$output = exec('/share/MD0_DATA/Qweb/AllesNaardDB.sh');
echo "<pre> $output </pre>"; 
```

**我在变量 $output, "alles gegeven"**中得到脚本的 als 行 。

起初我认为这可能与权利有关。所以我（切换用户）su到“httpdusr”并且腻子中的脚本执行得很好。

我还用“ls -l”制作了另一个脚本 ff.sh 来执行，一切正常。我也使用 passthru()、system()、shell_exec。唯一的改进是使用 system() 和 passthru()，“echo”Wasmachine“”出现在网站上。

我不明白为什么 python 作业没有开始？

我工作得更进一步，但是否有一些 sqlite3 命令是用户依赖的？

像这样我可以以管理员身份对数据库执行一些写操作，但不能以 httpdusr 身份执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T20:01:05.037

尝试添加`#!/bin/sh`到脚本的顶部并确保它是`chmod a+x`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T18:51:28.650

这是一个在 python 脚本中带有路径的问题，它正在写入数据库。它从网页启动时使用不同的路径（MD0_DATA/Qweb/），然后从 shell 脚本启动（MD0_DATA/Qweb/sqlite）

*我还没有解决问题，但理解它。每个人都感谢您的努力。

# java - OpenGL 纹理四边形和无纹理四边形

> ID：12076076
> 
> 赞同：1
> 
> 时间：2012-08-22T15:04:40.410
> 
> 标签：java, opengl, lwjgl

我将如何同时渲染带纹理的四边形和无纹理的四边形。问题是，如果我绘制了带纹理的四边形，则未显示纹理的四边形是否在之后绘制，反之亦然。

我正在使用 LWJGL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:08:01.550

`glEnable(GL_TEXTURE_2D)`在带纹理的四边形之前和无纹理的四边形之前使用`glDisable(GL_TEXTURE_2D)`。

# php - php regex - 带有模式的错误

> ID：12076079
> 
> 赞同：-1
> 
> 时间：2012-08-22T15:04:47.430
> 
> 标签：php, regex

只是想知道是否有人可以帮助我理解为什么我的正则表达式匹配特定的行。这是输入数据：

```
 Array ( [0] => [24;1H [24;16H [24;1H [?25h [24;16H [24;16Hshow vlans [24;16H [?25h [24;26H [24;0H E [24;1H [24;26H [24;1H [2K [24;1H [?25h [24;1H [1;24r [24;1H [1] => Status and Counters - VLAN Information [2] => [3] => Maximum VLANs to support : 256 [4] => Primary VLAN : MANAGEMENT [5] => Management VLAN : [6] => [7] => VLAN ID Name | Status Voice Jumbo [8] => ------- -------------------------------- + ---------- ----- ----- [9] => 1 DEFAULT_VLAN | Port-based No No [10] => 3 MANAGEMENT | Port-based No No [11] => 8 SERVER_VLAN | Port-based No No [12] => 16 iLOSERS | Port-based No No [13] => 20 BACS_VLAN | Port-based No No [14] => 33 VLAN_33 | Port-based No No [15] => 64 ISM_VLAN | Port-based No No [16] => 65 DSLAM1 | Port-based No No [17] => 80 VOIP_VLAN | Port-based No No [18] => 96 DZONE | Port-based No No [19] => 128 BACNET_128 | Port-based No No [20] => 131 BACNET_131 | Port-based No No [21] => [22] => [23] => [1;24r [24;1H [24;1H [2K [24;1H [?25h [24;1H [24;11# ) 
```

这是我的代码：

```
 $vlandetailsArray = array();
  foreach ($data as $vlandetails) {

   $pattern = '/(\s+)([0-9]*)(\s+)([a-z_0-9]*)(\s*)(\|)(\s+)([a-z0-9_-]*)(\s*)(\w*)(\s*)(\w*)/i';
   if (preg_match($pattern, $vlandetails, $matches)) {
      echo 'raw data is: '.($vlandetails).'<br>';   
      echo 'results from print_r:';
      print_r($matches[2]);       
      echo '<br>VlanId is: '.$matches[2].'<br>';
      } //end if
    } //end for 
```

以下是 print / echo 语句的结果：

```
raw data is: VLAN ID Name | Status Voice Jumbo
results from print_r:
VlanId is:
raw data is: 1 DEFAULT_VLAN | Port-based No No
results from print_r:1
VlanId is: 1
raw data is: 3 MANAGEMENT | Port-based No No
results from print_r:3
VlanId is: 3
raw data is: 8 SERVER_VLAN | Port-based No No
results from print_r:8 
```

我的问题是为什么第一项不以数字开头时会匹配？您介意指出我的错误在哪里或我不理解的地方吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T15:08:43.590

`([0-9]*)`将正则表达式中的更改为`([0-9]+)`

# java - 关于多线程java应用程序的序列图

> ID：12076085
> 
> 赞同：1
> 
> 时间：2012-08-22T15:05:11.993
> 
> 标签：java, multithreading, sequence, diagram

我想为多线程 java 应用程序绘制序列图。您认为序列图对于多线程 java 应用程序是否可行（如果是这样，我现在不知道该怎么做，有教程吗？）？或者我应该为多线程绘制多图：一个序列图与一个线程相关联？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:08:49.200

这种图称为“ [Petri网](https://en.wikipedia.org/wiki/Petri_net)”。它描述了并发进程（线程）在哪里同步以及哪些部分并行运行。

然后，您可以使用序列图来解释 Petri 网中的每个节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:07:48.800

我想说为每个线程绘制一个序列图。

尝试将多个线程放入单个序列图中并没有多大意义，因为事件是并行发生的，而不是按顺序发生的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T00:31:54.350

可以选择通过工具为您创建序列图。我在一个名为[Diver: Dynamic Interactive Views For Reverse Engineering](http://eclipsediver.wordpress.com)的 Eclipse 插件上工作，它将在 Eclipse 中自动为 Java 程序的各个线程生成序列图。

它让您：

*   轻松跟踪您的 Java 程序
*   可视化程序的运行时功能
*   过滤您的跟踪和序列图以使其更紧凑
*   根据运行时调用的方法过滤 IDE
*   查看源代码编辑器中运行的代码

# python - 使用pickle在Python中导出

> ID：12076092
> 
> 赞同：0
> 
> 时间：2012-08-22T15:05:35.170
> 
> 标签：python, python-2.7

代码是：

```
import pickle
import random

guessesTaken = 0

print('Hello! What is your name?')
name = raw_input()

number = random.randint(1, 20)
print('Well, ' + name + ', I am thinking of a number between 1 and 20.')

while guessesTaken < 6:
    print('Take a guess.') # There are four spaces in front of print.
    guess = raw_input()
    guess = int(guess)

    guessesTaken = guessesTaken + 1

    if guess < number:
        print('Your guess is too low.') # There are eight spaces in front of print.

    if guess > number:
        print('Your guess is too high.')

    if guess == number:
        break

if guess == number:
    guessesTaken = str(guessesTaken)
    print('Good job, ' + name + '! You guessed my number in ' + guessesTaken + ' guesses!')

if guess != number:
    number = str(number)
    print('Nope. The number I was thinking of was ' + number)
clasament= 'clasament.data'
f=open(clasament, 'wb')
pickle.dump(name, f) 
```

我想做一个像这样的顶级：
nameguessesTaken
nameguessesTaken
....
我只能让名字出现，如果你再次玩游戏，名字会刷新。

* * *

我收到此错误。回溯（最近一次调用）：文件“/home/catalin/guessnumber.py”，第 44 行，名称，dct.items（）中的猜测：AttributeError：'str' 对象没有属性'项目'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:11:39.880

看起来您正试图保持高（低）分。这似乎是一本字典的工作，它`pickle`（或`json`）可以很好地处理。

```
try:
    with open('clasament.data') as f:
       dct = pickle.load(f)
except IOError:  #file doesn't exist, no high-scores registered.
    dct = {}

if dct:
    print "Low scores so far!"

    #you may want `sorted(dct.items()) to have a nice order...
    for name,guesses in dct.items(): 
        print(name,guesses)

#<snip>
#play game here
#</snip>

#keep low scores :-)
if name in dict and dct[name] > guessesTaken:
    dct[name] = guessesTaken

with open('clasament.data','w') as f:
    dct = pickle.dump(dct,f) 
```

# cryptography - NCryptOpenKey()

> ID：12076096
> 
> 赞同：0
> 
> 时间：2012-08-22T15:05:42.260
> 
> 标签：cryptography, cng

`NCryptOpenKey()`我正在尝试通过调用并使用证书的指纹作为密钥名称参数来创建 CNG（下一代 Windows 加密 API）密钥句柄：

```
LPCWSTR keyName = L"\0xe0\0xf5\0xdf\0x72\0x7f\0x81\0x92\0xfa\0xae\0x8a\0x4b\0xf1\0xd5\0x53\0xc1\0xbe\0x40\0x18\0x90\0xdc";
NCryptOpenKey( hProvider, &hKey, keyName, 0, 0 ); 
```

使用这个 keyName 找不到密钥，但是当我在 certmgr.msc 中查找它时，我可以看到带有该指纹的证书（“‎<code>e0 f5 df 72 7f 81 92 fa ae 8a 4b f1 d5 53 c1 be 40 18 90 直流")。这里可能是什么问题？

编辑：我基本上想要做的（正如我在堆栈溢出人员的帮助下发现的那样；））是从存储在 Windows 证书存储中的证书创建一个 NCRYPT_KEY_HANDLE 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:16:17.860

指纹和密钥名称通常没有关系。

要获取与证书关联的密钥的名称，请[`CertGetCertificateContextProperty`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376079)使用[`CERT_KEY_PROV_INFO_PROP_ID`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa381420).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:04:00.477

如果你想试试我的例子，这里有一个代码：

```
DATA_BLOB key;
FILE *fil = _wfopen(L"D:\\222.p8", L"rb");
if(fil)
{
    fseek(fil, 0 ,2);
    key.cbData = ftell(fil);
    fseek(fil, 0, 0);
    key.pbData = new BYTE[key.cbData];

    fread(key.pbData, 1, key.cbData, fil);
    fclose(fil);
} else {
    MessageBox(L"Cannot open file", L"Error", MB_ICONERROR);
    return;
}

BCryptBuffer nameBuf;
nameBuf.BufferType = NCRYPTBUFFER_PKCS_KEY_NAME;
nameBuf.pvBuffer = L"killme";
nameBuf.cbBuffer = 14;

NCryptBufferDesc parList;
parList.ulVersion = NCRYPTBUFFER_VERSION;
parList.cBuffers = 1;
parList.pBuffers = &nameBuf;

// No error handlers!!!
NCRYPT_PROV_HANDLE hProv;
NCRYPT_KEY_HANDLE hKey;
NCryptOpenStorageProvider( &hProv, L"Microsoft Software Key Storage Provider", 0 );
NCryptImportKey( hProv, NULL, NCRYPT_PKCS8_PRIVATE_KEY_BLOB, &parList, &hKey, key.pbData, key.cbData, 0 );
NCryptFreeObject( hKey );
NCryptFreeObject( hProv );
return;

And this is my file (in HEX):

30 82 02 78 02 01 00 30 0D 06 09 2A 86 48 86 F7 
0D 01 01 01 05 00 04 82 02 62 30 82 02 5E 02 01 
00 02 81 81 00 BB 13 C9 C6 4A 18 1F 11 1D D3 CB 
E4 6A E2 F4 46 8C 1D 67 7F F2 6E 16 67 C6 81 B9 
D9 93 56 45 0B D5 EA 0F EB 7F F3 1D 83 07 19 3B 
A7 1C 84 82 23 88 44 65 13 79 78 EA E0 B7 AD A8 
4D B6 3C 9B D4 74 48 51 0D E8 60 59 19 D8 28 2B 
49 FE BC 8D BF 62 0D 44 70 70 76 2D 83 5B 2E DE 
9E 97 40 D3 BE 23 36 BB 02 3B F0 17 F2 EA 9A 97 
28 41 39 7F A1 98 6E CB A3 9F 5B B3 81 D8 66 73 
D5 19 63 35 E9 02 03 01 00 01 02 81 80 02 BA 5C 
CF 35 C0 B8 F5 EB 45 18 61 B7 51 4C 95 EE C5 CA 
FE E9 A3 C3 53 36 13 7E DD F6 5B B9 5C 07 D2 DC 
47 E7 30 BE 0B 18 17 BD 1A 9D BC 2C ED A4 62 0D 
9B 45 6D 31 A2 49 EB 65 5B 3A 14 BE 2C F4 DC C8 
9B 94 2C 5A EF 1E 43 00 3E 88 00 D3 F1 0F 6A E3 
14 C1 4D C8 7E 77 BD C8 41 92 8B 7D 2A B5 36 1A 
61 81 9C 38 F1 34 C4 C3 73 57 67 25 4C 93 59 9B 
C7 1B 10 39 F2 B2 2F 85 ED 69 B4 43 01 02 41 00 
EC D9 DD B0 C8 F3 BC 39 77 9F 15 20 D5 80 C7 E3 
F5 36 DB F0 BF AC 27 9E 82 A1 CB 64 F0 26 5A 31 
97 C5 75 B0 CB 42 E3 0D AC F1 69 AF 02 1C 0F F5 
38 7A 75 5C 87 41 16 D7 57 E5 A5 78 BB A4 6E 89 
02 41 00 CA 33 BF CA 34 F6 17 F8 F8 1F 0C FF EE 
62 18 09 22 BD 45 DC 2E E7 5D 6C 0F 66 0E 21 3D 
74 61 35 79 19 56 91 1B 90 93 12 AD BA FA 31 23 
4D D2 AE F8 0F 00 46 DE 6B F4 31 62 E3 88 5F 80 
35 B4 61 02 41 00 C7 78 AC C6 28 57 6D 5C 10 AC 
7F C4 C9 4A CE 0D E4 04 B1 B2 CE 1A 14 BB E0 54 
96 D1 89 97 23 3A C5 11 5D 8E E9 80 89 6C 89 0C 
3F EF 4E 1D 88 2B 03 C7 CE 73 80 CD 86 89 11 D3 
AC 4A 43 ED B5 D1 02 41 00 A7 E7 E3 0A 31 82 6D 
93 B3 CE 6D 08 15 56 E5 A8 A8 6D 4D 96 B2 68 33 
9E A9 06 D1 12 EF 2A 36 12 A6 55 D1 19 BC 2F 08 
C2 08 FB EC 08 63 CD 9A F6 EA 4B E2 A9 F6 C6 E4 
47 22 5B D9 01 9C C0 7B E1 02 41 00 E1 94 F0 BB 
B8 7E E6 CF 38 E0 8D 6B F7 BB E2 47 A2 B6 E4 EB 
A5 C7 15 62 76 C4 BA B8 DC 81 06 24 EB B1 46 9B 
EE 5D AC A5 A6 EB 93 2E B4 E7 F8 A3 CD FB 40 C1 
C9 F9 27 DF 31 8B BB EE 29 4F 63 6D 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T09:16:52.980

证书不包含私钥。CERT_CONTEXT 可以有一个 CERT_KEY_PROV_INFO_PROP_ID 属性，它说明在哪里可以找到相关的私钥。它被系统函数 CryptAcquireCertificatePrivateKey 和其他高级加密函数使用。该属性是关于 CNG 中私钥位置的唯一信息。

此外，您可以循环打开每个存储的密钥，并将私钥 BLOB 与证书的密钥进行比较。

# asp.net - 编码 HTML 页面标题的正确方法

> ID：12076105
> 
> 赞同：4
> 
> 时间：2012-08-22T15:06:18.113
> 
> 标签：asp.net, html, webforms

我有一个 ASP.NET WebForms 应用程序。我正在根据我的数据库中的内容设置页面的标题。

因为此内容是由用户输入的，所以它可以包含任何字符，包括可以解释为 HTML 标记的字符。因此，我在设置标题之前对这个内容进行了 HTML 编码。

但我看到这会通过产生过度编码的结果而导致问题：

```
<title>Hoigaard&amp;#39;s Nordic Walking Tuesdays</title> 
```

安全编码用于设置标题标签的文本的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T15:18:06.650

我对此进行了测试，似乎设置`Page.Title` *已经*执行了编码。因此，您的额外编码会导致双重编码结果。直接设置就好了`Page.Title`：

```
Page.Title = "Test & Testing"; 
```

结果：

```
<title>Test &amp; Testing</title> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:16:40.977

使用一些类似于 PHP 函数的函数`htmlspecialchars()`：

```
<%
' Copyright (c) 2009, reusablecode.blogspot.com; some rights reserved.
' This work is licensed under the Creative Commons Attribution License.

' Convert special characters to HTML entities.
function htmlspecialchars(someString)
    ' Critical that ampersand is converted first, since all entities contain them.
    htmlspecialchars = replace(replace(replace(replace(someString, "&", "&amp;"), ">", "&gt;"), "<", "&lt;"), """", "&quot;")
end function
%> 
```

来源：[http ://snipplr.com/view/12207/htmlspecialchars/](http://snipplr.com/view/12207/htmlspecialchars/)

# sharepoint - SharePoint 2010 慢速搜索

> ID：12076106
> 
> 赞同：1
> 
> 时间：2012-08-22T15:06:22.467
> 
> 标签：sharepoint, sharepoint-2010

我知道这不是一个编码问题，但我想把它扔在那里，因为论坛的丰富经验很高。

当我们第一次执行搜索时，它很慢，之后就很好了。

有人知道这是为什么吗？

我认为这与清除缓存有关，并且想知道是否有人可以阐明如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:10:32.970

很可能是由第一次“命中”引起的，服务器正在执行大量后台处理。这与网页或数据库查询相同。由于最初必须处理的工作量，初始执行可能是最慢的，之后数据被缓存。

# c# - 如何检测是否按下了任何键

> ID：12076107
> 
> 赞同：9
> 
> 时间：2012-08-22T15:06:22.443
> 
> 标签：c#, wpf, c#-4.0

如何检测当前是否按下了任何键盘键？我对键是什么不感兴趣，我只想知道是否仍然按下任何键。

```
if (Keyboard.IsKeyDown(Key.ANYKEY??)
{

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-22T15:29:37.247

```
public static IEnumerable<Key> KeysDown()
{
    foreach (Key key in Enum.GetValues(typeof(Key)))
    {
        if (Keyboard.IsKeyDown(key))
            yield return key;
    }
} 
```

然后你可以这样做：

```
if(KeysDown().Any()) //... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T15:35:49.420

如果您只想检测在我们的应用程序中按下的键（当您的 WPF 窗口被激活时）添加`KeyDown`如下：

```
public MainWindow()
{
    InitializeComponent();
    this.KeyDown += new KeyEventHandler(MainWindow_KeyDown);
}

void MainWindow_KeyDown(object sender, KeyEventArgs e)
{
    MessageBox.Show("You pressed a keyboard key.");
} 
```

如果您想检测何时按下某个键，即使您的 WPF 窗口未处于活动状态，这也有点困难，但也是可行的。我推荐[`RegisterHotKey`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646309.aspx)（定义系统范围的热键）和[`UnregisterHotKey`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646327.aspx)Windows API。尝试在[pinvoke.net](http://www.pinvoke.net/default.aspx/user32/registerhotkey.html)或这些教程中的 C# 中使用这些：

*   [全局热键：注册一个即使在表单没有聚焦时也会触发的热键。](http://www.dreamincode.net/forums/topic/180436-global-hotkeys/)
*   [启用 Hotkey 和 ShortcutInput 用户控件的简单步骤](http://www.codeproject.com/Articles/5914/Simple-steps-to-enable-Hotkey-and-ShortcutInput-us)

[这是Microsoft 论坛](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/87d66b1c-330c-42fe-8a40-81f82012575c)中的一个示例。

您将使用[虚拟键代码](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731.aspx)。我希望我很清楚，你会理解我的回答。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T15:25:55.500

迭代`System.Windows.Input.Key`枚举值。

```
public static bool IsAnyKeyDown()
{
    var values = Enum.GetValues(typeof(Key));

    foreach (var v in values)
        if (((Key)v) != Key.None && Keyboard.IsKeyDown((Key)v)
            return true;

    return false;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T15:26:02.317

很好的答案......使用以下命令一次获取所有键状态的集合`GetKeyboardState()`：

*   [检测是否在 C# 中按下了任何键（不是 A、B，而是任何键）](https://stackoverflow.com/questions/1752494/detect-if-any-key-is-pressed-in-c-sharp-not-a-b-but-any)

以上是检查键盘的实时状态。

如果您依靠将事件与 KeyDown/KeyUp 事件挂钩来跟踪键盘的状态……那么这可能不那么准确。

那是因为您依靠消息泵来处理和发送这些 KeyDown/KeyUp 消息......它们可能会在真正的键盘状态再次改变后被传递。

还因为当您对键盘状态感兴趣的代码正在运行时（通常在 UI 线程上）...... KeyDown 或 KeyUp 不能打断你......因为它们也在 UI 线程上调度...... .这就是为什么使用`GetKeyBoardState()`或`Keyboard.IsKeyDown`应该使用的原因。

（以上假设您想要并关心实时状态）

# oracle - Sqldeveloper 2.* 有方便的数据建模器 - Sqldeveloper3.* 中是否有类似的东西

> ID：12076110
> 
> 赞同：2
> 
> 时间：2012-08-22T15:06:34.543
> 
> 标签：oracle, database-schema, oracle-sqldeveloper

Sqldeveloper 2.* 有一个非常好的工具来查看数据库模式。这是如何启动它的屏幕截图： ![SqlDeveloper 2.* 数据建模器](../Images/2810634398681e90d5cdeb71d34331a4.png)

这个工具是从 SqlDeveloper 3.* 中删除的吗？那里有类似的东西吗？

PS 当然，我尝试了一段时间的谷歌搜索和阅读手册。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:46:13.510

最新版本的 SQL Developer 仍然具有数据建模器。

[http://www.oracle.com/technetwork/developer-tools/datamodeler/overview/index.html](http://www.oracle.com/technetwork/developer-tools/datamodeler/overview/index.html)

这是一个向您展示的链接，我几乎每天都在最新版本的 sql developer 中使用它（或者我正在使用的至少 3.1.07 -->哇，他们已经更新到 3.2，我稍后再去获取）

您仍然可以转到工具-> 数据建模器，但您也可以通过文件-> 数据建模器上下文菜单打开和保存数据建模器（它似乎已与 SQL DEVELOPER“组合”到您独立保存它的地步）。

如果您转到 VIEW->Data Modeler->Browser，您可以创建模型等并通过前面提到的 SAVE 菜单项保存它们。

# javascript - 我的 Javascript Ajax 请求在 Phonegap index.html 中有效，但在任何其他页面中无效，我该如何解决这个问题？

> ID：12076111
> 
> 赞同：0
> 
> 时间：2012-08-22T15:06:37.790
> 
> 标签：javascript, jquery, jquery-mobile, cordova

我提出的请求在 index.html 文件中有效，但在任何其他文件中都无效，这非常令人沮丧。我认为这与 onDeviceReady 功能有关，但我不确定如何更改或解决此问题？

这是单独的页面（不是 index.html）代码：

```
<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0;" />
    <script src="cordova-1.8.1.js"></script>
    <script src="js/jquery-1.7.2.min.js"></script>
    <script src="js/load-whites.js"></script>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
</head>

<body>

    <div data-role="page" id="whites">

        <div data-role="header" data-position="fixed">
            <h1>White Wines</h1>
        </div>

        <div data-role="content">

            <div data-role="collapsible-set" data-theme="c" data-content-theme="d">
                <div id="whites"></div>
            </div>

        </div>
    </div>

</body> 
```

这是适用于 index.html 文件的请求，但不适用于我的 phonegap 项目（Cordova 1.8.1）中的任何其他 .html 文件。我怎样才能改变它以使其正常工作？下面的文件是 load-whites.js：

```
$(document).ready(function(){
              $(document).bind('deviceready', function(){
                               onDeviceReady();
                               });

              function yourCallback(button) {
              if (button == 2) {
              dataRequest();
              }
              }

              function dataRequest() {
              var output = $('#whites').text('Loading white wines and their deta1ils, please wait...');

              $.ajax({
                     url: 'http://localhost/whites.php',
                    dataType: 'jsonp',
                     jsonp: 'jsoncallback',
                     timeout: 5000,
                     success: function(data, status){
                     output.empty();

                $.each(data, function(i,item){

                       var whites =  '<div data-role="collapsible"><h3>'+item.Name+'</h3>'
                                    +'<b>Price:</b> £'+item.Price+'<br />'
                                    +'<b>Vintage:</b> '+item.Vintage+'<br />'
                                    +'<b>Country:</b> '+item.Country+'<br />'
                                    +'<b>Grape:</b> '+item.Grape+'<br />'
                                    +'<b>Alcohol:</b> '+item.Alcohol+'%<br /><br />'
                                    +item.Description+'</p></div>';

                       output.append(whites);

                  $('#whites').trigger('create');

                       });
                     },
                     error: function(){
                     output.text('The Wines could not be loaded at this time.');
                     navigator.notification.confirm(
                                'Please check your internet connection. Would you like to retry?',
                                yourCallback,
                                'Something went wrong',
                                'No,Yes'
                                    );
                     }
                     });
              }

              dataRequest();
              }); 
```

任何帮助将不胜感激。再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T16:11:14.460

我看到你正在使用 JQuery 移动。它可能类似于我今天遇到的问题，而 JQuery mobile 是罪魁祸首。[http://jquerymobile.com/demos/1.1.1/docs/pages/page-scripting.html](http://jquerymobile.com/demos/1.1.1/docs/pages/page-scripting.html)

如果您在页眉中声明 Javascript 文件，而不是索引，它将忽略它。如果这是您的问题，请在索引中声明 JS 文件 load-whites.js 然后..

```
$( document ).delegate("#PAGENAME", "pageinit", function() {
    //do work here
}); 
```

不确定这是否是您的问题，但可能是！

# google-apps-script - 使用 HtmlService 在 Google 协作平台中进行动态重定向

> ID：12076116
> 
> 赞同：0
> 
> 时间：2012-08-22T15:06:48.637
> 
> 标签：google-apps-script

我希望在嵌入在 Google 站点中的 Google Apps 脚本中进行重定向。我使用 HtmlService：当用户单击一个按钮时，它会启动一个包含`window.location = adress_I_want_to_redirect`.

不幸的是，它不起作用。我尝试使用 jQuery，`$('location').href(adress_I_want_to_redirect)`但它也不起作用（非常合乎逻辑的 ^^）。控制台显示`The property 'href' is not writable.`

你知道另一种在 GAS 中有效的重定向方法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:32:22.007

可能是 Caja 引擎阻止您进行这样的重定向。您可能需要改用常规锚标记。

# netbeans - 我可以编译 Netbeans 平台应用程序吗

> ID：12076120
> 
> 赞同：0
> 
> 时间：2012-08-22T15:07:16.377
> 
> 标签：netbeans, compilation, platform

我开始创建一个 NetBeans 平台 CRUD 应用程序，因为我需要在不同的计算机上运行它，我想知道我是否可以编译它以作为独立应用程序运行，以及是否有办法添加安装向导。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:31:55.060

在 NetBeans 7.3 中，它可以为 NetBeans 平台应用程序创建 Linux、OS X 和 Windows 安装程序。

要选择为哪些平台构建安装程序：

1.  在“项目”选项卡中右键单击您的应用程序
2.  选择列表底部的“属性”方式。
3.  在弹出的属性对话框中，使用“安装程序”类别中的复选框。

要构建安装程序：

1.  在“项目”选项卡中右键单击您的应用程序。
2.  选择“打包为”->“安装程序”。

# sql-server - 内联 SQL 与存储过程

> ID：12076121
> 
> 赞同：4
> 
> 时间：2012-08-22T15:07:17.780
> 
> 标签：sql-server, performance, tsql, optimization

我有一个简单的语句，在子句`SELECT`中引用了几列。`WHERE`通常我在 VB 代码中执行这些简单的操作（设置 Command 对象，将 Command Type 设置为文本，将 Command Text 设置为 Select 语句）。但是我看到了超时问题。我们已经对我们的表格等进行了优化。

我想知道是否会因为我以这种方式进行查询而对性能产生很大影响，而不是创建一个带有几个参数的简单存储过程。我在想也许内联代码会强制 SQL 进行额外的编译、创建查询计划等工作，如果我使用存储过程就不会发生这种情况。

正在运行的实际 SQL 的示例：

```
SELECT TOP 1 * FROM MyTable WHERE Field1 = @Field1 ORDER BY ID DESC 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T15:14:57.947

格式良好的“内联”或“临时”SQL 查询——如果与**参数**一起正确使用——与存储过程一样好。

但这**绝对是至关重要**的：您必须使用正确的参数化查询！如果你不这样做 - 如果你将每个请求的 SQL 连接在一起 - 那么你**就不会**从这些点中受益......

就像存储过程一样，在第一次执行时，必须找到一个查询执行计划 - 然后将该执行计划缓存在计划缓存中 - 就像存储过程一样。

如果您多次调用内联参数化 SQL 语句，则该查询计划会一遍又一遍地重用 - 并且“内联”SQL 查询计划受制于与存储过程的执行计划相同的缓存逐出策略。

从这个角度来看——如果你真的使用了正确的**参数化**查询——存储过程没有性能优势。

存储过程还有其他好处（比如作为“安全边界”等），但只是原始性能并不是它们的主要优点之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:13:15.817

确实，数据库必须做你提到的额外工作，但这不应该导致很大的性能损失（除非你非常非常频繁地运行查询......）

使用 sql profiler 查看实际发送到服务器的内容。使用活动监视器查看是否有其他查询阻止您的查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-30T13:04:24.127

您的查询再简单不过了。Field1 是否已编入索引？正如其他人所说，“临时”查询不会影响性能。

对于在哪里提出疑问，这是科技界最古老的辩论之一。我认为您的请求“属于”您的应用程序。它们将与您的应用程序一起进行版本控制，使用您的应用程序进行测试，并在您的应用程序消失时消失。将它们放在您的应用程序以外的任何地方都是一个痛苦的世界。但看在上帝的份上，请使用 .sql 文件，编译为嵌入式资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-06T11:46:34.607

作为任何其他语句的表单子句的一部分的选择语句称为内联查询。不能带参数。不是数据库对象

过程：可以带参数 如果需要执行相同的操作，可以全局使用数据库对象。

# c++ - Qt- 简单的信号和槽错误通信

> ID：12076123
> 
> 赞同：0
> 
> 时间：2012-08-22T15:07:32.833
> 
> 标签：c++, qt, signals, slots

我有一个派生自 QThread 的 Thread 类：

```
class Thread :
    public QThread
{
    Q_OBJECT
public:
    Thread(QObject* parent = NULL);
    ~Thread(void);

    virtual void run();
    void stop();

public slots:
    virtual void OnMessage(const char* msg);

protected:
    bool m_Done;
}; 
```

和一个派生类：

```
class DerivedThread: public Thread
{
    Q_OBJECT
public:
    virtual void run();

    ~DerivedThread();

public slots:
    virtual void OnMessage(const char* msg);

private:
    IQFeedSocket* m_Socket;
}; 
```

这很简单。然后我有一个 Socket 包装类，它在其构造函数中采用一个 Thread 对象：

```
class IQFeedSocket : public QObject
{
    Q_OBJECT

public:
    IQFeedSocket(Thread *parent);
    ~IQFeedSocket();

    bool Connect(int port);
    bool Write(const char* msg);

public slots:
    void OnMessage();

signals:
    void SendMessage(const char* msg);

private:
    QTcpSocket* m_Socket;
    char* m_ReceiveBuffer;
}; 
```

现在，我确实在我的 DerivedThread::run() 方法中调用了 exec()，它是成功的，因为我在线程中实例化的套接字对象中获得了 OnMessage() 调用。我要做的很简单：在 IQFeedSocket::OnMessage 中，我将检查消息接收是否完成（它必须以“\r\n”结尾），当收到完整的消息时，将其转发到我的在构造函数中注册的线程对象。所以，在我的 IQFeedSocket 构造函数中，我这样做：

```
IQFeedSocket::IQFeedSocket(Thread *parent)
    : QObject(parent)
{
    m_ReceiveBuffer = new char();
    connect(this,SIGNAL(SendMessage(const char*)), this->parent(), SLOT(OnMessage(const char*)));
} 
```

在 OnMessage() 方法中：

```
void IQFeedSocket::OnMessage()
{
    const char* msg;
    if(m_Socket->bytesAvailable() != 0) //More stuff needed
    {
        QByteArray msgArray = m_Socket->readAll();
        msg = msgArray;
        emit SendMessage(msg);
    }
} 
```

当我调试时，我到达了发射线，但是来自 DerivedThread 对象的 OnMessage(char*) 方法永远不会被调用。我确信这是一个非常简单的监督，但我似乎无法发现我哪里出错了。有任何想法吗？谢谢！

DerivedThread::OnMessage(char*):

```
void DerivedThread::OnMessage(const char* msg)
{
        //This never gets called :(
    printf(msg);
    char* f;
    strcpy(f,msg);
} 
```

编辑：我还尝试了 DerivedThread 端的 connect()：

```
m_Socket = new IQFeedSocket(this);
connect(m_Socket, SIGNAL(SendMessage(const char*)), this, SLOT(OnMessage(const char*)));
Thread::exec(); 
```

但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:13:05.027

信号/槽定义和连接调用中的参数必须完全匹配，包括`const`.

即使在一个中使用 typedef 而在另一个中使用全名也足以破坏它。

# xna-4.0 - 如何使用 2 个不同的移动设备连接 windows phone 7 应用程序？

> ID：12076126
> 
> 赞同：0
> 
> 时间：2012-08-22T15:07:42.013
> 
> 标签：xna-4.0

我目前正在创建一个 SL/XNA 应用程序。如果用户 A 想通过应用程序连接到用户 B，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:52:29.397

这里有两种方法可以做到这一点：

1.  创建两个手机都连接到的 Web 服务并构建逻辑以允许两者通过服务进行通信。

    例如：http: [//msdn.microsoft.com/en-us/gg241261.aspx](http://msdn.microsoft.com/en-us/gg241261.aspx)

2.  使用 SignalR 允许两部手机实时通话。您可以打开 SignalR WP7 解决方案并查看一下。

    示例：[http ://www.silverlightshow.net/items/Windows-Phone-SignalR-Awesome-Possibilities.aspx](http://www.silverlightshow.net/items/Windows-Phone-SignalR-Awesome-Possibilities.aspx)

    Github：[https ://github.com/SignalR/SignalR/](https://github.com/SignalR/SignalR/)

    维基：[https ://github.com/SignalR/SignalR/wiki](https://github.com/SignalR/SignalR/wiki)

希望这可以帮助！

# java - Java - 将方法更改为 for/while 循环

> ID：12076130
> 
> 赞同：-2
> 
> 时间：2012-08-22T15:07:55.293
> 
> 标签：java, for-loop, while-loop

我想将第一种方法更改为 while 和 for 循环。我在下面添加了代码。它是否正确？

```
public String extractWordFour(String text){
        if(text.length()==0 || text.charAt(0) == ''){
            return "";
        } else {
            return text.charAt(0) + extractWordFour(text.substring(1));
        }
    }

public String extractWordFour(String text){
    int i=0;
    while (i<=text.length){
        return text.charAt(0) + extractWordFour(text.substring(i));
        i++;
    }
}

public String extractWordFour(String text){
    for(int i=0;i<=text.length();i++){
        return text.charAt(0) + text.substring(1);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:16:46.910

我不打算回答这个问题，因为我认为它是一个硬件任务，但我将它放在一个答案中，因为我无法将它放在评论中，但我假设你想将递归解决方案转换为while 或 for 循环解决方案。

您的 while 解决方案首先是错误的，因为您将递归和 while 混合在一起。您不应该在 while 循环中调用该函数！

```
public String extractWordFour(String text){
    int i=0;
    while (i<=text.length){
        return text.charAt(0) + extractWordFour(text.substring(i));
        i++;
    }
} 
```

这个无法完成，因为您在它甚至不止一次循环之前返回它。

```
public String extractWordFour(String text){
    for(int i=0;i<=text.length();i++){
        return text.charAt(0) + text.substring(1);
    }
} 
```

无论如何希望这会有所帮助。最好的办法是完全理解第一个函数的作用，把它写下来，然后考虑如何用 while 或 for 循环让它做同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:25:13.783

首先，您不能拥有`String.charAt(0) == ''`，因为`''`它不是有效字符，`""`这与有效的空字符串不同。

您的第二种方法不起作用，因为当您在数组上调用它时，它应该`text.length()`代替which 方法，并且由于递归而无法访问。如果做不到这一点，方法签名声称它返回一个字符串，但没有返回语句。`text.length``i++`

您的第三种方法确实有一个 return 语句，但它仍然不起作用，因为它只会在第一次迭代时返回，因此只给您前 2 个字符（实际上您的编译器甚至不会允许它，因为它会没有意识到这一点）。

除了所有这些问题，如果方法名称`extractWordFour`是他们应该做什么的准确表示，它们都不会，因为逻辑没有意义。我建议您首先考虑一下：如何通过检查字符串来判断一个单词何时结束，以及您的程序需要知道什么才能删除第四个单词之前的所有内容，以及它之后的所有内容？

# numpy - 在numpy中交换多值的子集

> ID：12076134
> 
> 赞同：1
> 
> 时间：2012-08-22T15:08:00.783
> 
> 标签：numpy, swap, array-broadcasting

给定一个如下所示的起始 numpy 数组：

```
B = np.array( [1, 1, 1, 0, 2, 2, 1, 3, 3, 0, 4, 4, 4, 4] ) 
```

当有重复时，将一组值交换为另一组值的最有效方法是什么？例如，让

```
s1 = [1,2,4]
s2 = [4,1,2] 
```

一个低效的交换方法会迭代`s1`，`s2`因此：

```
B2 = B.copy()
for x,y in zip(s1,s2):
    B2[B==x] = y 
```

作为输出给予

```
B2 -> [4, 4, 4, 0, 1, 1, 4, 3, 3, 0, 2, 2, 2, 2] 
```

`zip`有没有办法在没有循环的情况下基本上就地执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:26:03.340

```
>>> B = np.array( [1, 1, 1, 0, 2, 2, 1, 3, 3, 0, 4, 4, 4, 4] )
>>> s1 = [1,2,4]
>>> s2 = [4,1,2]
>>> B2 = B.copy()
>>> c, d = np.where(B == np.array(s1)[:,np.newaxis])
>>> B2[d] = np.repeat(s2,np.bincount(c))
>>> B2
array([4, 4, 4, 0, 1, 1, 4, 3, 3, 0, 2, 2, 2, 2]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:58:55.477

如果您只有介于 0 和 n 之间的整数（如果没有问题，可以推广到任何整数范围，除非它非常稀疏），最有效的方法是使用 take/fancy 索引：

```
swap = np.arange(B.max() + 1) # all values in B
swap[s1] = s2 # replace the values you want to be replaced

B2 = swap.take(B) # or swap[B] 
```

对于此处给出的小 B，这似乎几乎是两倍快，但是对于较大的 B，将 B 重复到大约 100000 的长度已经得到了 8 倍的加速。这也避免了每个 s1 元素的 == 操作，因此随着 s1/s2 变大，可以更好地扩展。

编辑：您也可以使用 np.put （也在另一个答案中）为`swap[s1] = s2`. 对于这些一维问题，取/放的速度更快。

# c - 无法在 Windows 8 上使用 SetSystemTime 设置时钟

> ID：12076140
> 
> 赞同：5
> 
> 时间：2012-08-22T15:08:07.287
> 
> 标签：c, winapi, windows-8

我的应用程序用于`SetSystemTime()`从 GPS 源设置 PC 时钟。这在禁用用户帐户控制的 Windows 7 中可以正常工作，但在 Windows 8 中，即使禁用了 UAC，它也会失败。我回来的错误是`ERROR_PRIVILEGE_NOT_HELD`. 登录到机器的用户属于管理员组。如果我从资源管理器的文件上下文菜单中以“以管理员身份运行”运行应用程序，我只能让它工作 - 但登录用户是管理员。

那么......我需要在 Windows 8 上做些什么才能`SetSysytemTime()`开始工作？我是否需要比当前用户的管理员权限更高的权限？如果是这样，什么比管理员具有更高的权限？或者我是否需要以不同方式设置用户帐户以允许这些类型的调用在 Windows 8 上运行？

编辑：如评论中所述，手动尝试启用该`SE_SYSTEMTIME_NAME`权限不起作用。也不会尝试使用建议的 MSDN 方法添加权限`LsaAddAccountRights`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T12:40:34.023

如果您在“用户帐户控制设置”中将 UAC 滑块完全向下移动，则表示 UAC 不会显示任何提示，但仍处于启用状态。任何正常进程仍然在没有管理权限的情况下运行，但提升（通过“以管理员身份运行”或通过声明“requireAdministrator”）将在未经用户同意的情况下发生。

禁用安全策略“用户帐户控制：在管理员批准模式下运行所有​​管理员”或将注册表项“EnableLUA”设置为 0 将更改此行为，但会阻止*所有* ~~Metro~~ Modern UI 应用程序运行。

如果您的用户没有管理权限，则您无法在不使用服务的情况下更改系统时钟。

如果您希望您的应用程序为普通用户正常启动（但没有特殊权限）*并*为管理员（自动）提升，您可能需要在清单中声明“highestAvailable”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T10:56:29.430

我认为这可能与在 Windows 8 上禁用 UAC 的事实有关，进程（默认情况下）以中等完整性运行，而不是高完整性（请参阅[这篇文章](http://www.brianbondy.com/blog/id/140/)）。

我认为您需要`requireAdministrator`在[应用程序清单中请求](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756929.aspx)

# ruby-on-rails - 自己记录一个异常，就像 Rails

> ID：12076144
> 
> 赞同：0
> 
> 时间：2012-08-22T15:08:14.253
> 
> 标签：ruby-on-rails, exception, logging

如果您的应用程序引发了一个未被您的应用程序捕获的异常，那么 Rails 将使用它自己的规则来记录它，使用它自己的规则来记录何时记录、记录什么（回溯清理）、如何格式化日志等。然后会出现 500 错误信息。

我自己正在拯救一些异常，因为我可以通过比一般 500 错误更好的用户体验从它们中恢复。

然而，它们仍然代表着不应该出现的意外情况，我仍然想记录它们——我想像Rails 一样*记录它们。*

有人会认为 Rails 中有一种方法，我实际上可以调用自己来执行此操作。或者，如果需要，如果我可以在 Rails 中找到执行此操作的位置，我可以复制并粘贴重复的逻辑以以相同的方式执行此操作。

但是我很难找到 Rails 中关于这些东西的内容。代码令人困惑，分布在中间件以及 Rails 本身，不同的部分看起来会告诉我我需要什么，但似乎没有，等等。

有人有想法么？

# tomcat - Windows7 ApacheDS 安装 - 它是否也安装了 Tomcat？

> ID：12076146
> 
> 赞同：0
> 
> 时间：2012-08-22T15:08:31.270
> 
> 标签：tomcat, windows-7, telnet, cas, apacheds

我正在尝试设置 CAS，而我最近刚刚在 Windows 7 上下载并安装了 ApacheDS。

这是我正在遵循的说明的链接： [https ://wiki.jasig.org/display/CASUM/CAS+on+Windows+Quick+Setup+Guide](https://wiki.jasig.org/display/CASUM/CAS+on+Windows+Quick+Setup+Guide)

1.  CAS 的说明告诉我使用 telnet 控制台，然后键入以下内容：打开 localhost 10389。这告诉我连接失败。

2.  此外，CAS 安装要求我启动 Tomcat 服务器。这是否与 ApacheDS 一起安装？

现在我想知道这两个问题是否相关。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:28:14.330

这两个问题不相关：CAS 服务器在 Tomcat 中运行，ApacheDS 独立运行。使用 telnet 控制台的第一个测试是检查 ApacheDS 是否已启动并运行，其余配置用于 CAS 服务器及其自身配置以使用 ApacheDS。

# python - 使用 PyAudio 或类似工具播放单声道音频

> ID：12076161
> 
> 赞同：1
> 
> 时间：2012-08-22T15:09:24.170
> 
> 标签：python, pyaudio

我目前有一个 2 通道 wav 文件。我希望能够一次播放一个频道。使用 PyAudio 网站上的示例，您通过 wave 模块读取大量数据，然后写入流，我不确定是否需要以某种方式读取一个数据通道并写入一个通道流，或者是否有是其他一些解决方案。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:41:57.220

我建议您更改流并使用您想收听的频道中的数据覆盖您*不想*收听的频道。通常，通道是交错的，所以以下应该可以解决问题。

```
import pyaudio
import wave
import sys

chunk = 1024

def convert(data, sampleSize = 4, channel = 0):
    for i in range(0, len(data), 2*sampleSize):
        for j in range(0, sampleSize):
           data[i + j + sampleSize * channel] = data[i + j + sampleSize * (1 - channel)]

if len(sys.argv) < 2:
    print "Plays a wave file.\n\n" +\
          "Usage: %s filename.wav" % sys.argv[0]
    sys.exit(-1)

wf = wave.open(sys.argv[1], 'rb')

p = pyaudio.PyAudio()

# open stream
stream = p.open(format =
                p.get_format_from_width(wf.getsampwidth()),
                channels = wf.getnchannels(),
                rate = wf.getframerate(),
                output = True)

# read data
data = wf.readframes(chunk)
convert(data)

# play stream
while data != '':
    stream.write(data)
    data = wf.readframes(chunk)
    convert(data)

stream.close()
p.terminate() 
```

# java - 如何隐藏扫描仪输入文本？

> ID：12076165
> 
> 赞同：7
> 
> 时间：2012-08-22T15:09:47.277
> 
> 标签：java, passwords

> **可能重复：**
> [隐藏命令行上的输入](https://stackoverflow.com/questions/10819469/hide-input-on-command-line)

我正在制作一个密码安全检查程序，我的问题很奇怪，因为我的程序运行得很好。我想知道是否有任何方法可以使输入到控制台的文本像在密码字段中一样显示。即在用户按下返回键之前，输入的单词将显示为“****”。

我知道`JFrame`有一种`JPasswordField`方法，但我认为这对我仅使用`Scanner`.

这是我的代码：

```
import java.util.Scanner;

public class SecurityCheckerMain {

    static String enteredPassword;

    public static void main(String[] args) {

        Scanner input = new Scanner(System.in);
        System.out.println("Please enter your password: ");
        enteredPassword = input.nextLine();
        Checker tc = new Checker(enteredPassword);
        tc.checkSecurity();

    }

} 
```

```
public class Checker {

    //number of chars : the Higher the Better("password must be greater than 8 chars"){done}
    //combination of uppercase and lowercase{done}
    //contains numbers{done}
    //non repeated characters (every char is different ascii char){done}
    //is not a consecutive password ie 123456789 or 987654321{done}
    //is not blank ("[space]"){done} 

    int pLength;
    final int MAX_STRENGTH = 10;
    int pStrength = 0;
    String pass;

    public Checker(String pwd){
        pass = pwd;
        pLength = pwd.length();

    }

    public void checkSecurity(){
        if(pass.isEmpty()){
            System.out.println("Password Field is Empty! Password is Very Insecure.");
        }
        if(pLength >= 8){
            pStrength++;
            if(pLength >= 12){
                pStrength++;
                if(pLength >= 16){
                    pStrength++;
                }
            }
        }
        if(hasUpperCase(pass) && hasLowerCase(pass)){
            pStrength+=2;
        }
        if(containsNumbers(pass)){
            pStrength+=2;
        }
        if(hasNoRepeats(pass)){
            pStrength+=2;
        }
        if(!containsConsecutiveNums(pass)){
            pStrength++;
        }

        System.out.println("Your password strength is rated at " + pStrength +"/" + MAX_STRENGTH);

    }

    //Component Methods

    public boolean hasUpperCase(String str){
        for(int i = 0; i<pLength; i++){
            if(Character.isUpperCase(str.charAt(i))){
                return true;
            }
        }
        return false;

    }

    public boolean hasLowerCase(String str){
        for(int i  = 0; i<pLength; i++){
            if(Character.isUpperCase(str.charAt(i))){
                return true;
            }
        }
        return false;
    }

    public boolean containsNumbers(String str){
        for(int i = 0; i<pLength; i++){
            if(Character.isDigit(str.charAt(i))){
                return true;
            }
        }
        return false;
    }

    public boolean hasNoRepeats(String str){
        for(int i = 0; i<pLength; i++)
            if(containsChar(str, str.charAt(i))){
                return false;
            }
        return true;
    }

    public boolean containsChar(String s, char search) {
        if (s.length() == 0)
            return false;
        else
            return s.charAt(0) == search || containsChar(s.substring(1), search);
    }

    public boolean containsConsecutiveNums(String str){
        for(int i = 0; i<pLength; i++){
            if(Character.isDigit(str.charAt(i))){
                if(str.charAt(i)-1 == str.charAt(i-1) || str.charAt(i)+1 == str.charAt(i+1)){
                    return true;
                }
            }
        }
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-22T15:14:17.710

您可以改用[Console.readPassword](http://docs.oracle.com/javase/6/docs/api/java/io/Console.html)。

```
readPassword(String fmt, Object... args) 
```

> 提供格式化提示，然后从禁用回显的控制台读取密码或密码

```
public class SecurityCheckerMain {

    static String enteredPassword;

    public static void main(String[] args) {

        Console console = System.console();

        enteredPassword =
            new String(console.readPassword("Please enter your password: "));
        Checker tc = new Checker(enteredPassword);
        tc.checkSecurity();

    } 
```

# c# - FileVersionInfo.GetVersionInfo 显示替换文件的错误版本

> ID：12076167
> 
> 赞同：1
> 
> 时间：2012-08-22T15:10:00.307
> 
> 标签：c#, appdomain, system.reflection

为什么在加载 .NET DLL 时，从另一个应用程序域替换（DLL 更新为新版本），然后重新加载（使用`Assembly.LoadFrom`）版本信息仍然反映旧版本？

用`assembly.GetCustomAttributes(typeof(AssemblyFileVersionAttribute), false)`or观察到同样的情况`assembly.GetCustomAttributes(typeof(AssemblyVersionAttribute), false)`。

这是正常行为吗？如果我在资源管理器中检查文件，我会看到正确的版本。

有没有办法获得DLL的实际版本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T15:40:55.257

当您将程序集加载到 AppDomain 中时，您无法卸载它。因此，替换文件并在已经加载程序集的 AppDomain 中重新加载它根本不起作用（这是设计使然）。您需要一个新的 AppDomain 来加载替换的程序集。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T15:48:15.420

这不是很清楚，但“重新加载”这个词是你所看到的一个强有力的指标。CLR 不允许使用 Assembly.LoadFrom() 重新加载同一程序集的不同版本。这是一个强大的 DLL Hell 反制措施，可以避免很多讨厌的运行时异常。特别是说“不能将 Foo 转换为 Foo”的 InvalidCastExceptions。.NET 中的类型标识包括程序集的 [AssemblyVersion]。调用 Assembly.LoadFrom() 只会返回对先前加载的程序集的引用。

也没有办法从 AppDomain 中卸载程序集。您唯一能做的就是创建一个*新*的AppDomain。

我不应该提到 Assembly.LoadFile()，它不执行此检查，这是主要的痛苦。

# icefaces - Icefaces ace：autoCompleteEntry 不起作用

> ID：12076172
> 
> 赞同：0
> 
> 时间：2012-08-22T15:10:24.523
> 
> 标签：icefaces, icefaces-3

我正在尝试使用 ace:autoCompleteEntry 但它似乎不起作用。我只通过 af:selectItems 子项尽可能简单地使用它。如果我将组件更改为 h:selectOneMenu 则一切正常，因此 f:selectItems 没有任何问题。我的问题是是否有人使用过该组件并且可以确认它正在工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T17:10:14.747

根据我的实验，

只需`<ace:ajax execute="@this" />`在`f:selectItems`（内部`ace:autoCompleteEntry`）下添加

它将激活其下拉菜单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T11:29:06.753

我不知道它是否有任何帮助，但我遇到了同样的问题，我只是发现`ace:autoCompleteEntry`如果它在`ace:tabSet`. 那是你的情况吗？

`ice:panelTabSet`相反，它可以很好地工作。

# symfony - Doctrine2 批量插入

> ID：12076177
> 
> 赞同：5
> 
> 时间：2012-08-22T15:10:49.447
> 
> 标签：symfony, doctrine-orm

是否可以通过单个查询将多个实体插入数据库？当我使用[此处](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/batch-processing.html)的示例时，我可以在 Web 调试器中看到几个查询

2012 年 8 月 23 日更新

我找到了以下相关链接。我希望它有助于某人理解批处理：

1.  [http://www.doctrine-project.org/blog/doctrine2-batch-processing.html](http://www.doctrine-project.org/blog/doctrine2-batch-processing.html)
2.  [学说2 - 如何提高冲洗效率？](https://stackoverflow.com/questions/8707486/doctrine2-how-to-improve-flush-efficiency)
3.  [原则 2：批量处理引用其他实体的实体插入时的奇怪行为](https://stackoverflow.com/questions/7431794/doctrine-2-weird-behavior-while-batch-processing-inserts-of-entities-that-refer)

主要的事情：

> 有些人似乎想知道为什么 Doctrine 不使用多重插入（insert into (...) values (...), (...), (...), ...
> 
> 首先，这种语法仅在 mysql 和更新的 postgresql 版本上受支持。其次，当使用 AUTO_INCREMENT 或 SERIAL 时，没有简单的方法可以在这样的多插入中获取所有生成的标识符，并且 ORM 需要标识符来进行对象的身份管理。最后，插入性能很少是 ORM 的瓶颈。普通插入对于大多数情况来说已经足够快了，如果你真的想做快速批量插入，那么多插入无论如何都不是最好的方法，即 Postgres COPY 或 Mysql LOAD DATA INFILE 快几个数量级。
> 
> 这就是为什么不值得努力在 ORM 中实现对 mysql 和 postgresql 执行多插入的抽象的原因。我希望这可以消除一些问号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:51:34.250

我认为会有几个插入语句，但每次“刷新”调用只有一个对数据库的查询。

正如这里提到的 [http://doctrine-orm.readthedocs.org/en/2.0.x/reference/working-with-objects.html](http://doctrine-orm.readthedocs.org/en/2.0.x/reference/working-with-objects.html)

每个“持久化”都会向当前的 UnitOfWork 添加一个操作，然后是对 EntityManager#flush() 的调用，它将实际写入数据库（将 UnitOfWork 的所有操作封装在单个事务中）。

但是我没有检查我上面描述的行为是实际行为。

最好的问候，克里斯托夫

# django - django模板中的奇怪比较错误

> ID：12076179
> 
> 赞同：0
> 
> 时间：2012-08-22T15:11:02.770
> 
> 标签：django, django-templates

以下是我的模板中有问题的部分。

```
<select id="country" name="country_id">
        {% for country in countries%}
        {{country.id}} {{country_id}}
         {% if country.id==country_id %}
        <option value="{{ country.id }}"  selected="selected"  >
        {%else%}
        <option value="{{ country.id }}" >
         {%endif%}
            {{ country.name }}
        </option>
        {% endfor %}
    </select> 
```

它在这一行给出错误：`{% if country.id==country_id %}`。以下是显示的错误：

```
Could not parse the remainder: '==country_id' from 'country.id==country_id' 
```

对于过去遇到此问题的人来说，这似乎很容易理解，但对我来说，它在简单的比较语句上给出错误是很奇怪的。我也尝试过`ifequal`声明，但这也没有达到目的，所以我在这里知道为什么会出现这个问题以及如何解决它？

如果需要任何进一步的细节，请告诉我。多谢你们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T15:14:01.940

您只需要 周围的空格`==`，即：

```
{% if country.id == country_id %} 
```

# regex - Notepad ++：从包含一组圆括号的非常长的字符串中提取所有单词

> ID：12076182
> 
> 赞同：1
> 
> 时间：2012-08-22T15:11:16.293
> 
> 标签：regex, find, notepad++

我有一个用德语写的大 .txt 文件。它是许多人讲话的记录。当使用一个单词的缩写形式时，该单词的正确形式写在它周围或里面，用括号括起来。我想提取此 .txt 中存在的所有此类示例作为列表。我尝试了一些正则表达式，但我似乎无法让它突出整个“单词”。

有任何想法吗？

这是 .txt 的一部分，其中突出显示了我要提取的单词：

Ich **hab(e)** am Achtundzwanzigsten achten neunzehnhundertneunzig Geburtstag。还有 wenn ich mich beschreiben sollte、dann muss ich sagen freundlich、unkompliziert und bescheiden。你好 wie gehts **(geh es)**目录。Na was machst **(machst du)** den jetzt **heut(e)**。嗯，嗯，是noch吗？**Stör(e)** ich? Ja das **is(t)**，嗯，所以，**würd(e)** ich das so sagen....

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:32:15.520

如果我很了解您的需求，如何：

```
(\w+\(\w+\))| \([\w\s]+\) 
```

**解释：**

```
The regular expression:

(?-imsx:(\w+\(\w+\))| \([\w\s]+\))

matches as follows:

NODE                     EXPLANATION
----------------------------------------------------------------------
(?-imsx:                 group, but do not capture (case-sensitive)
                         (with ^ and $ matching normally) (with . not
                         matching \n) (matching whitespace and #
                         normally):
----------------------------------------------------------------------
  (                        group and capture to \1:
----------------------------------------------------------------------
    \w+                      word characters (a-z, A-Z, 0-9, _) (1 or
                             more times (matching the most amount
                             possible))
----------------------------------------------------------------------
    \(                       '('
----------------------------------------------------------------------
    \w+                      word characters (a-z, A-Z, 0-9, _) (1 or
                             more times (matching the most amount
                             possible))
----------------------------------------------------------------------
    \)                       ')'
----------------------------------------------------------------------
  )                        end of \1
----------------------------------------------------------------------
 |                        OR
----------------------------------------------------------------------
                           ' '
----------------------------------------------------------------------
  \(                       '('
----------------------------------------------------------------------
  [\w\s]+                  any character of: word characters (a-z, A-
                           Z, 0-9, _), whitespace (\n, \r, \t, \f,
                           and " ") (1 or more times (matching the
                           most amount possible))
----------------------------------------------------------------------
  \)                       ')'
----------------------------------------------------------------------
)                        end of grouping 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T18:01:02.207

Notepad++ uses a regex flavor that may not be POSIX compliant, hence does not support word boundaries. (Atleast v5.9.2 does not support it) Try this regular expression:

```
[^\s]*\([^)]*\)[^\s\.\,\;\?\!]* 
```

*   `[^\s]*` : detects beginning of a word by not matching any whitespace before a word (tab, space, etc..)
*   `\([^)]*\)` : matches the brackets and its content
*   `[^\s\.\,\;\?\!]*` : detects ending of a word by not matching any whitespace or possible punctuation symbols.

You can extend this by adding more punctuation marks before or after the word (like quotes).
Successfully tested this on Notepad++ v5.9.2 on your sample text.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T15:45:18.153

此正则表达式查找介于`(`和`)`包含的所有内容以及之前的所有内容`(`及其前面的空格字符：

```
[^ ]*\([^)]*\) 
```

现在将您的文本转换为一个不错的列表：

*   打开查找/替换对话框 (Ctrl-H)
*   找什么：`.*?([^ ]*\([^)]*\))`
*   用。。。来代替：`\1\n`
*   选中“匹配换行符”的“正则表达式”
*   用光标在文件开头按“全部替换”（Ctrl-Home）
*   忽略或删除最后一行

现在你有一个很好的列表，所有这些单词都在单独的行上。

# unix - tmux 一次杀死多个窗口

> ID：12076185
> 
> 赞同：4
> 
> 时间：2012-08-22T15:11:39.573
> 
> 标签：unix, tmux

我在 tmux 会话中打开了大量窗口，我想杀死 75% 的窗口。有没有办法一次杀死多个窗口，而不是去每个窗口单独杀死它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T16:27:07.867

我认为内部不`tmux`支持此功能，但您可以编写脚本。

首先创建一个测试会话来处理：

```
tmux new -s test
repeat 9;        do tmux new-window -t test; done    # in zsh
for i in {1..9}; do tmux new-window -t test; done    # in bash 
```

现在是窗口杀戮：

```
# number of windows in test session
nwin=$(tmux list-windows -t test | wc -l)

# number of windows to kill
nkill=$(echo "$nwin * .75" | bc -l | cut -d. -f1)

tmux list-windows -t test | cut -d: -f1 | head -n$nkill \
| while read; do
    tmux kill-window -t test:$REPLY
  done 
```

这是一种相当灵活的方法，您应该能够`grep -v`保留任何想要保留的窗口，或者相反地`grep`想要杀死的窗口。

# .net - 如何干净地将参数从函数传递到函数（如组合）

> ID：12076187
> 
> 赞同：1
> 
> 时间：2012-08-22T15:11:44.560
> 
> 标签：.net, f#, fold, function-composition

```
let myFunc x y =
    List.fold (&&) true [func1 x y; func2 x y] 
```

我不知道 F# 中所有不同的运算符和技术，但希望我可以用一些运算符代替 func1 和 func2 的“x y”，以向他们指示“只需使用我的参数”，就像组合如何具有隐式参数一样通过。

或者，如果有人能想到一种更直接、更简洁的方法来消除我的函数将其参数提交的需要，请告诉我。

另外，如果这似乎完全不可能，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T15:16:36.090

我不认为有一种很好的方法可以将 的参数线程化`myfunc`到`func1`and的参数`func2`。但是，您的示例可能有点过于简单，因为您可以只写：

```
let myfunc x y = 
  func1 x y && func2 x y 
```

我想实际上，你有更多的功能，然后使用`fold`是很有意义的。在这种情况下，您可以使用`fold`来组合*功能*，而不是使用它来组合*结果*。

如果我稍微简化问题并假设`func1`并将`func2`两个参数作为一个元组（而不是将它们作为两个单独的参数），那么您可以编写如下内容：

```
let func1 (a, b) = true
let func2 (a, b) = true

let myfunc = List.fold (fun f st a -> f a && st a) (fun _ -> true) [ func1; func2 ] 
```

现在您不需要显式地传递参数（to`func1`和`func2`），但是 的参数`fold`变得更复杂了。我认为这很好，因为您只需要编写一次（而且这种方式非常易读）。

但是，如果你是无点风格的粉丝（或者只是想看看你能走多远），你可以定义一些辅助函数，然后编写如下代码：

```
/// Given a value, returns a constant function that always returns that value
let constant a _ = a
/// Takes an operation 'a -> b -> c' and builds a function that
/// performs the operation on results of functions    
let lift2 op f g x = op (f x) (g x)

let myfunc2  = List.fold (lift2 (&&)) (constant true) [ ffunc1; ffunc2 ] 
```

如果您不需要任意数量的函数，那么我会简化代码并且根本不使用`fold`。如果您需要这样做，那么我认为您的版本非常可读且不会太长。我在此答案中编写的示例表明您可以避免手动传递参数，但这会使代码有点晦涩难懂。

# android - Android禁用屏幕元素但没有间隙

> ID：12076191
> 
> 赞同：0
> 
> 时间：2012-08-22T15:12:02.033
> 
> 标签：android, android-layout, layout

如果我将 Screen 元素设置为在“LinearLayout”中不可见，那么无论如何我都会有一个间隙而不是它。如何使间隙与元素一起消失？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T15:13:47.130

当您将视图设置为**不可见**时，您`View`仍然会在那里消失，但在您使用**消失**时会占用它的空间，这将删除您的视图

这将解决您的问题

```
view.setVisibility(View.GONE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:13:48.213

您是否尝试将“可见”属性设置为“消失”？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T15:14:26.183

使用[view.setVisibility(View.GONE)](http://developer.android.com/reference/android/view/View.html#GONE)

# php - 将 Googlemap 纬度和经度作为 javascript 传递给 HTML 表单

> ID：12076193
> 
> 赞同：1
> 
> 时间：2012-08-22T15:12:24.280
> 
> 标签：php, javascript, html, google-maps-api-3, google-geocoding-api

嗨，我目前正在使用 GoogleMaps API v3，我正在尝试获取纬度和经度的变量，并将它们作为 html 变量以隐藏形式放置，并通过表单将它们传递到 php 页面。纬度和经度作为跨度打印在我的页面上，但我无法让它们以表格形式打印。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"       
    <html xmlns="http://www.w3.org/1999/xhtml">

    <head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <title>Untitled 1</title>

   <!-- google maps -->
   <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">        </script>

    <!-- jquery -->
   <script type="text/javascript" src="js/jquery.min.js"></script>

   <!-- jquery UI -->
   <script type="text/javascript" src="js/jquery-ui.min.js"></script>

   <!-- our javascript -->
   <script type="text/javascript" src="gmaps.js"></script>

   <link rel="stylesheet" type="text/css" href="style4.css" />

   </head>

   <body>

      <input id='gmaps-input-address' type='text'/>

    <div id='gmaps-error'></div>

    <div id='gmaps-canvas'></div>

      <br/>
      <br/>
    Latitude: <span id='gmaps-output-latitude'></span>
      <br/>
      Longitude: <span id='gmaps-output-longitude'></span>
      <br/>     

    <script type="text/javascript">

    function doSomething()
    {
    var lat = document.getElementById('#gmaps-output-latitude');
    lat_element.value = google_maps_api_variable;
    var lon = document.getElementById('#gmaps-output-longitude');
    lon_element.value = google_maps_api_variable;
    document.getElementById("lat").value=lat;
    document.getElementById("lon").value=lon;
    }
    </script>

   <form action="join.php" method="post" onSubmit="doSomething">

   <input type="hidden" name="lat" id="lat"/>
   <input type="hidden" name="lon" id="lon"/>

   <input type="submit" value="Confirm Address"/>
   </form>
   </body>

   </html> 
```

在 Googlemaps API 中有一个 javascript 函数，它保存纬度和经度，如下所示：

```
function update_ui( address, latLng ) {
 $('#gmaps-input-address').autocomplete("close");
 $('#gmaps-input-address').val(address);
 $('#gmaps-output-latitude').html(latLng.lat());
 $('#gmaps-output-longitude').html(latLng.lng());
 } 
```

我对 Javascript 非常熟悉，非常感谢任何帮助，我已经搜索了其他问题以了解我目前的情况，但我被困在这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:20:54.703

只需在您已经拥有的代码之后添加它（在表单提交之前作为表单提交的点击处理程序或其他东西）：

```
$('#lat').val($('#gmaps-output-latitude').html());
$('#lon').val($('#gmaps-output-longitude').html()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:22:22.220

gmaps.js 是您的 js，它在您的 html 文件中填充 span。这应该通过我可能认为是 update_ui 的回调函数发生。此函数可能会在之后填充跨度，并且您用于填充隐藏字段的脚本可能已经执行。因此，将用于填充隐藏字段的代码放在回调函数调用之后，或者可能位于 update_ui 本身中。

所以编辑你的 update_ui 函数并添加

```
$('#lat').val(latLng.lat());
$('#lon').val(latLng.lng());

```

这些行在函数体中结束。

# select - 如何在 Dojo FilteringSelect 中显示进度微调器？

> ID：12076194
> 
> 赞同：0
> 
> 时间：2012-08-22T15:12:25.900
> 
> 标签：select, dojo, spinner, progress

当用户单击列表框中的箭头时，我有一个 Dojo FilteringSelect 大约需要 20 秒才能从 dB 加载其值。我想在等待从 dB 返回的数据时显示进度微调器。任何想法当从数据库中检索数据时我会使用什么事件来显示我的微调器以及在完成时隐藏微调器的事件是什么？谢谢...

```
new FilteringSelect({
    store: new dojo.data.ItemFileReadStore({ url: "some url here" }),
    autocomplete: true,
    maxHeight: "300",
    required: false,
    id: "country_select_id",
    onChange: function(data) {
        dojo.byId("case_info_status").innerHTML = "&nbsp;";
    }
}, "country_select_id"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:47:44.413

我敢打赌，您可以在 select._fetchHandle deferred 和 store._fetchItems 中走得更远。尝试这个

```
var select = new .... Your FilteringSelect Construct( {} );

select._fetchHandle.addCallback(function() {
 // success callback
 dojo.style(dojo.byId('spinner'), "display", "none");

});

dojo.connect(select.store._fetchItems, function() {
   if(select.store._loadFinished) return; // no-op
   dojo.style(dojo.byId('spinner'), "display", "block");
}); 
```

编辑：

select._fetchHandle 只会在实际下载过程中短暂出现（假设我们可以在调用 select onOpen 之后挂钩它）。相反，ItemFileReadStore 中的另一个私有方法会派上用场

```
dojo.connect(select.store._getItemsFromLoadedData, function() {
     dojo.style(dojo.byId('spinner'), "display", "none");
}); 
```

# actionscript-3 - LZMA 压缩来保护 .swf 文件？

> ID：12076203
> 
> 赞同：0
> 
> 时间：2012-08-22T15:13:15.917
> 
> 标签：actionscript-3, encryption, decompiler, lzma

我对 SWF 保护有点陌生，在谷歌搜索时，我发现*Sothink SWF Decompiler*用于轻松反编译，甚至可以对`.fla`文件进行短语处理，所以我得到了最新版本，发现如果我使用 LZMA 压缩，会出现一条消息：

> swf 文件“foo.swf”已损坏。

我去了保存的地方，发现双击它就完美了。我还添加了代码，以便`root.alpha`在本地测试时将等于零。

那么，这对 SWF 窃贼是否足够好，或者我应该去获取加密软件，如 toKaos、SWF Encrypt 等？

[编辑：在这里](http://www.veryinteractivepeople.com/?p=525)找到我要找的东西。希望它可以帮助其他可能偶然发现这个话题的人。

# visual-studio-2010 - VS2010 中没有关于 PIMAGE_NT_HEADERS 的文档

> ID：12076205
> 
> 赞同：0
> 
> 时间：2012-08-22T15:13:18.787
> 
> 标签：visual-studio-2010

我刚刚安装了visual studio 2010的文档，虽然在线安装，其中包括`Win32 & Com, DDK, and SDK 7.1`，但是当我查找时`PIMAGE_NT_HEADERS`，它没有结果，我错了吗？

所以我在网上尝试了MSDN，它有很多相关的页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:40:13.210

它只是一个小助手类型，P 使它成为指向 IMAGE_NT_HEADERS 结构的指针。换句话说，IMAGE_NT_HEADERS* 的别名。MSDN 库没有记录这些小文件。

改为查找 IMAGE_NT_HEADERS。

# javascript - 在 Javascript 中格式化日期而不转换为本地时区

> ID：12076212
> 
> 赞同：6
> 
> 时间：2012-08-22T15:13:34.220
> 
> 标签：javascript, firefox, google-chrome, date, timezone

在 SQL 数据库中，我有一个来自不同时区的时间列表，但我既没有也不关心相应的时区信息：

```
2012-01-01 01:02:03
2012-07-01 04:05:06 
```

对于输出，我想使用 Javascript 格式化它们。我试过：

```
var text = input.replace(' ','T'); // SQL -> ISO8601
var d = new Date(Date.parse(text));
hours = d.getHours(); 
```

问题是，在 Chrome 中，日期被解释为 UTC 并转换为我的本地时区，所以我得到：

```
2
6 
```

而在 Firefox 中，它被解释为当地时间，我得到了我想要的：

```
1
4 
```

*那么Date*对象是否有更好的解决方案，还是我坚持拆分字符串？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-21T07:47:15.440

我找到的唯一解决方案是替换`-`为`/`：

```
input = "2012-01-01 01:02:03";
var text = input.replace('-', '/');
var d = new Date(Date.parse(text));
hours = d.getHours(); 
```

就我而言，输入是这样的，`2013-05-22T16:45:00Z`所以我也替换了：`T``Z`

```
input = "2013-05-22T16:45:00Z";
var text = input.replace(/[TZ]/, '').replace('-', '/');
var d = new Date(Date.parse(text));
hours = d.getHours(); 
```

这样，Javascript 在不了解时区的情况下处理它并停止聪明地行动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:19:39.757

我认为与日期有关，您需要使用一些日期“框架”，如[Globalize jQuery 插件](https://github.com/jquery/globalize/)或[Datejs](http://www.datejs.com/)来获得跨浏览器行为。这样做，您将能够配置要在日期解析中使用的模式。

# php - 如何读取头文件中的函数？[WordPress]

> ID：12076215
> 
> 赞同：0
> 
> 时间：2012-08-22T15:13:40.850
> 
> 标签：php, wordpress, function, header

我正在编写一个 wordpress 插件，我想`<body>`在源代码的标签之后插入一个函数。

我的功能如下所示：

```
function skew() {
    ?>

    <?
}
add_action ('hook_name', 'skew'); 
```

我应该使用什么钩子让这个函数在 body 标记之后运行？或者有没有其他更简单的方法可以在打开body标签后让它运行？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:03:31.130

使用 add_action 和 do_action 函数如下：

do_action('after_body'); add_action('after_body', 'skew');

# ios - 如何将 UIImage 保存为文档目录中的 BMP 文件

> ID：12076216
> 
> 赞同：0
> 
> 时间：2012-08-22T15:13:44.737
> 
> 标签：ios, uiimage, core-graphics, bmp

有人问过类似的问题，但它们总是包含“使用 UIImagePNGRepresentation 或 UIImageJPEGRepresentation”的答案，但这对我不起作用，因为我必须将此文件发送到仅接受 BMP 图像的外部 Web 服务。

这是我迄今为止实施的

```
-(NSData*)getBitmapRepresentationFromUIImage:(UIImage*)img{

CGImageRef cgiImg =[img CGImage];
CGColorSpaceRef colorSpaceRef = CGImageGetColorSpace(cgiImg);    

size_t bitsPerComponent = CGImageGetBitsPerComponent(cgiImg);
size_t bytesPerRow      = CGImageGetBytesPerRow(cgiImg);
size_t dataSize         = bytesPerRow * CGImageGetHeight(cgiImg);

void* imgBuf = malloc(dataSize);

CGContextRef bmpContext = CGBitmapContextCreate(imgBuf,
                                                   CGImageGetWidth(cgiImg),
                                                   CGImageGetHeight(cgiImg),
                                                   bitsPerComponent,
                                                   bytesPerRow,
                                                   colorSpaceRef,
                                                   kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);

CGContextDrawImage(bmpContext, CGRectMake(0, 0, CGImageGetWidth(cgiImg), CGImageGetHeight(cgiImg)), cgiImg);

NSData* dataToReturn  = nil; 

if (imgBuf!=NULL) {

    dataToReturn = [[NSData alloc] initWithBytes:imgBuf length:dataSize];
    free(imgBuf);
    /*debug*/
    [self saveNSDataAsBitmap:dataToReturn fileName:@"signature"];
    /**/
}

return  dataToReturn;

}

-(void)saveNSDataAsBitmap:(NSData*)data fileName:(NSString*)name{    

NSString* fileName = [NSString stringWithFormat:@"%@%@",name,@".bmp"];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];    
NSString *completePath = [documentsDirectory stringByAppendingPathComponent:fileName];    
[data writeToFile:completePath atomically:YES];    
} 
```

这会将文件保存到文档目录，但我无法通过预览打开该文件。

我究竟做错了什么 ？有没有更简单的方法 ？

编辑

我现在已经为文件头添加了结构

```
#pragma pack(1)
typedef struct 
{
    UInt16 magic;  //specifies the file type "BM" 0x424d
    UInt32 bfSize;  //specifies the size in bytes of the bitmap file
    UInt16 bfReserved1;  //reserved; must be 0
    UInt16 bfReserved2;  //reserved; must be 0
    UInt32 bOffBits;  
} BmpFileHeaderStruct, *BmpFileHeaderStructRef;
#pragma pack(0)

#pragma pack(1)
typedef struct
{   UInt32 biSize;
    int32_t  biWidth;
    int32_t  biHeight;
    UInt16  biPlanes;
    UInt16  biBitCount;
    UInt32 biCompression;
    UInt32 biSizeImage;
    int32_t  biXPelsPerMeter;
    int32_t  biYPelsPerMeter;
    UInt32 biClrUsed;
    UInt32 biClrImportant;
} BmpFileInfoStruct,*BmpFileInfoStructRef;
#pragma pack(0) 
```

我还实现了一个将标头附加到 imgBuf 开头的函数

```
-(void*)attatchBmpFileHeaderFor:(void*)imgBuf sizeOfBuff:(size_t)buffSize forImage:(CGImageRef)img{

BmpFileHeaderStruct headerStruct = {0};
headerStruct.magic = 0x424d;
headerStruct.bfSize = buffSize;
headerStruct.bOffBits = (sizeof(BmpFileHeaderStruct)*8) + (sizeof(BmpFileInfoStruct)*8);//hmmm ? 

BmpFileInfoStruct infoStruct = {0};
infoStruct.biSize = sizeof(BmpFileInfoStruct);
infoStruct.biWidth = CGImageGetWidth(img);
infoStruct.biHeight = CGImageGetHeight(img);
infoStruct.biPlanes = 1;
infoStruct.biBitCount = CGImageGetBitsPerPixel(img);
infoStruct.biSizeImage = buffSize;

void * fileBmpBuf = malloc(sizeof(BmpFileInfoStruct)+sizeof(BmpFileHeaderStruct)+sizeof(buffSize));

void *pIter = fileBmpBuf;
memcpy(pIter, &headerStruct, sizeof(BmpFileHeaderStruct));
pIter += sizeof(BmpFileHeaderStruct);
memcpy(pIter, &infoStruct, sizeof(BmpFileInfoStruct));
pIter += sizeof(BmpFileInfoStruct);
memcpy(pIter, imgBuf, buffSize);

return fileBmpBuf;    
} 
```

这不起作用，有时它会崩溃，因为在最后一次 memcpy 调用上没有分配被释放的错误指针，这很奇怪，因为那时我实际上并没有释放任何数据。当它工作时，它会产生一个无法读取的文件。
我是否必须改为实现 bitmapv5header 结构？我在哪里可以找到关于如何用值填充这个结构的文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:18:48.980

您不能只保存必须添加特定标题和调色板的数据。看一下文件格式：[http ://en.wikipedia.org/wiki/BMP_file_format](http://en.wikipedia.org/wiki/BMP_file_format)

# ios - 如何以编程方式模拟 UIWebView 上的双击？

> ID：12076220
> 
> 赞同：3
> 
> 时间：2012-08-22T15:13:46.417
> 
> 标签：ios, uiwebview

我的应用程序有一个`UIWebView`显示 HTML 电子邮件的应用程序。如果我放大内容然后双击它几次，电子邮件内容最终会被调整大小，以便它再次适合屏幕。

我想以编程方式重现这种调整大小的行为（我希望能够调用一个重新缩放内容的函数，以使其全部适合屏幕）；调用`sizeToFit`web 视图似乎没有任何效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T15:17:41.770

如果您知道`CGRect`要将其缩放到，那么您可以使用，

```
- (void)zoomToRect:(CGRect)rect animated:(BOOL)animated 
```

由于`UIWebView`是可滚动的，所以我想你应该能够做到这一点。

显然你`UIWebView`应该有一个名为scrollView 的[iVar](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)。因此，如果您的`UIWebView`对象名称是`webView`. 只是做一些类似的事情，下面的代码在语法上可能不是 100% 正确的。但你一定有这个想法。

```
[webView.scrollView zoomToRect:CGMakeRect(0,0,0,0) animated:YES]; 
```

# xpath - Selenium 元素定位器 - 嵌套的 div 类

> ID：12076222
> 
> 赞同：1
> 
> 时间：2012-08-22T15:13:50.227
> 
> 标签：xpath, selenium, element

谁能帮我如何匹配这个元素，我想从国家列表中单击加拿大。Selenium (IDE/WebDriver) 未找到该元素。我在 Webdriver 中尝试过：

```
driver.FindElement(By.XPath(".//*[@class='slick-viewport']/*[@class='grid-canvas']/*[@class='ui-widget-content slick-row odd']/*[@class='slick-cell l1 r1 active selected']")).click(); 
```

Firepath 给出了这个 XPath：

```
.//*[@id='assetsTable']/div[5]/div/div[5]/div[2] 
```

这些都不起作用。显然，我做得不对。id 是动态生成的，并且是嵌套的，所以我发现很难解决。任何人都可以看看并告诉我定位器的正确方法吗？

非常感谢

PS：貌似我不允许上传图片。所以，复制粘贴下面的内容：

```
<!DOCTYPE html>
<html class="dj_gecko dj_contentbox">
<head>
<body id="bodyID">
<div id="pageDiv" class="page">
<div id="header">
<div id="main">
<ul id="mainMenu" class="menuTab">
<div id="partialHost" style="height: 345.117px;">
<div id="assetsBreadcrumbDiv">
<div id="assetsGridDiv">
<ul id="assetMenu" class="menuTab">
<div id="assetsTable" class="defaultGrid slickgrid_109601 ui-widget" style="overflow: hidden; outline: 0px none; position: relative; height: 269.117px; width: 1562px;">
<div style="position:fixed;width:0;height:0;top:0;left:0;outline:0;" hidefocus="" tabindex="0"></div>
<div class="slick-header ui-state-default" style="overflow:hidden;position:relative;">
<div class="slick-headerrow ui-state-default" style="overflow: hidden; position: relative; display: none;">
<div class="slick-top-panel-scroller ui-state-default" style="overflow: hidden; position: relative; display: none;">
<div class="slick-viewport" style="width: 100%; overflow: auto; outline: 0px none; position: relative; height: 242px;">
<div class="grid-canvas" style="width: 1545px; height: 5975px;">
<div class="ui-widget-content slick-row odd" style="top:775px">
<div class="ui-widget-content slick-row even" style="top:800px">
<div class="ui-widget-content slick-row odd" style="top:825px">
<div class="ui-widget-content slick-row even" style="top:850px">
<div class="ui-widget-content slick-row odd" style="top:875px">
<div class="slick-cell l0 r0 selected">CA</div>
<div class="slick-cell l1 r1 active selected">CANADA</div>
<div class="slick-cell l2 r2 selected">Y</div>
<div class="slick-cell l3 r3 selected"></div>
<div class="slick-cell l4 r4 selected">CA</div>
</div>
<div class="ui-widget-content slick-row even" style="top:900px">
<div class="ui-widget-content slick-row odd" style="top:925px">
<div class="ui-widget-content slick-row even" style="top:950px"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T18:04:21.117

//div[text()="CANADA"] 应该可以。如果你只想要那个特定的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:55:07.617

不要使用 * ，在 XPath 查询中要明确。

这有效：

```
//div[@class='slick-cell l1 r1 active selected'] 
```

当您直接在 FireBug 中尝试 XPath 查询时，您会得到什么？

# vim - 你可以为不同的 Vim 插件设置不同的本地领导者吗？

> ID：12076227
> 
> 赞同：5
> 
> 时间：2012-08-22T15:14:09.180
> 
> 标签：vim, plugins, vim-plugin

我开始使用与我现有地图冲突的插件，但我不想重新映射所有地图，我只想添加一个前缀。我想我可以用 LocalLeader 做到这一点。

Vimdoc 说：

> `<LocalLeader>`就像`<Leader>`，只是它使用“maplocalleader”而不是“mapleader”。 `<LocalLeader>`将用于缓冲区本地的映射。

似乎设置 localleader 的唯一方法是设置一个全局变量（文档没有提到这一点，但`b:maplocalleader`没有工作）：

```
let maplocalleader = '\\' 
```

而且我看不到我如何干净地取消设置该变量（设置插件后清除它的自动命令！？）

有没有办法做到这一点？还是 LocalLeader 只给出一个全局前缀和一个特定于文件类型的前缀？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T15:35:26.237

你最后的预感是正确的。如果插件使用`<Leader>`（除非它是文件类型插件，否则它应该使用），那么搞乱`maplocalleader`.

`<Plug>`重新映射是通过插件希望提供的映射规范地完成的。一些插件确实定义了很多类似的映射，其中一些定义了一个`g:pluginname_mappingprefix`（或左右）变量，以使您不必单独重新映射所有映射。如果你的插件没有，也许写一个建议/补丁给插件作者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T16:37:51.497

虽然@IngoKarkat 解决方案是首选解决方案，但有一个技巧可以让你做你想做的`SourcePre`事：事件：

```
autocmd SourcePre *               :let maplocalleader='\\'
autocmd SourcePre plugin-name.vim :let maplocalleader='_' 
```

. 这也适用`<Leader>`。但是，在很多情况下这不起作用。你也可以使用`SourceCmd`这项工作，使用类似的东西

```
function s:Source(newmll)
    try
        let oldmll=g:maplocalleader
        let g:maplocalleader=a:newmll
        source <amatch>
    finally
        let g:maplocalleader=oldmll
    endtry
endfunction
let maplocalleader='\\'
autocmd SourceCmd plugin-name.vim :call s:Source('_') 
```

in是我看到插件获取后`SourceCmd`恢复的唯一方法，但是这里的事件不会为任何来自内部的文件启动。对于一些写得不好的插件（我的意思是那些在源代码中发出错误的插件）放在一个块中会在错误发生的地方中断执行。不过大部分时间都不应该发生。您可能还想使用作为模式而不是.`maplocalleader``SourceCmd``plugin-name.vim``:source``:try``*/ftplugin/plugin-name.vim``plugin-name.vim`

# php - 会话变量不会改变

> ID：12076229
> 
> 赞同：0
> 
> 时间：2012-08-22T15:14:15.310
> 
> 标签：php, session

我想将一个会话变量传递给其他页面。在我的第一页上，我有：

```
<?php 
session_start();
?> 
```

然后：

```
<form class="form1" method="post" action="contact2.php" id="form1">
    <ul>
        <li>
            <label for="name">*Name:</label>
            <input type="text" name="name" placeholder="Black Nova"class="required" role="input"          aria-required="true"/>
        </li>
        <li>
            <input id="submit" class="submit .transparentButton" value="Next" type="submit" name="submit"/> 
        </li>
    </ul>
    <br/>
</form>

<?php
  $_SESSION['name'] = $_POST['name'];

  echo $_SESSION['name'];
?> 
```

在我`contact.php`的会话开始，但我无法获得会话变量。

如果在我的第一页中，我没有给出任何动作，我会得到正确的值，`$_SESSION['name']`但如果我给出一个动作，会话变量不会改变。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:25:22.873

如果您不采取行动，则表单将被提交到同一页面，因此`$_POST`具有价值，因此您可以将其分配给`$_SESSION`. 当您`contact2.php`在表单提交到不同页面时执行操作时，在`$_POST`具有表单的页面中将不可用，因此会话不会从中获得任何价值。

如果您已将操作设置为`contact2.php`，则可以`session_start()`在该页面中执行操作并移动代码

```
<?php
$_SESSION['name'] = $_POST['name'];
echo $_SESSION['name'];
?> 
```

进入该页面，您应该能够在`contact2.php`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:27:48.030

这是因为如果您不提供任何操作，表单将提交给自身（同一页面），并且因为您在第一页设置会话变量，它会很好地填充会话变量。当您将操作添加到第二页时，它永远不会填充会话变量，因为第一页没有收到 $_POST，第二页是。

如果您将表单数据提交到不同的页面，则需要在接收页面而不是发送页面上设置会话数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T20:17:50.883

当您在表单中单击提交时，表单将在 contact2.php (action="contact2.php") 中发送给您。创建contact2.php并在下面编写代码：

```
  session_start();

  session_regenerate_id();

  $_SESSION['name'] = $_POST['name'];

  回声 $_SESSION['name'];

```

# java - 无法启动 JBOSS

> ID：12076231
> 
> 赞同：1
> 
> 时间：2012-08-22T15:14:16.357
> 
> 标签：java, jboss

我最近在测试服务器上安装了 JBOSS 来做一些工作。一切似乎都设置正确，我的 java home 设置为：

```
JAVA_HOME = c:\Java\jdk1.6.0_16 
```

当我使用以下命令在命令提示符下本地启动它时：

```
run -b 0.0.0.0 -c sd 
```

它打印出来：

```
Calling C:\jboss-5.1.0.GA\bin\run.conf.bat 
```

然后返回光标。它似乎几乎立即崩溃，没有错误，日志中也没有报告任何内容。

如果我删除该`run.conf.bat`文件，则表明该文件丢失，但在没有它的情况下仍会尝试执行。因此，当`.bat`文件在那里时，它会立即崩溃。当它不存在时，它实际上会尝试运行并完成动作。有任何想法吗？

为了澄清，我没有收到任何错误消息。它只是崩溃。

# bash - 从一个文件夹中删除另一个文件夹中包含的文件

> ID：12076235
> 
> 赞同：0
> 
> 时间：2012-08-22T15:14:17.653
> 
> 标签：bash, shell, console

我正在尝试编写简单的脚本，该脚本将从一个文件夹中获取文件名并在另一个文件夹中搜索它们，如果在该文件夹中找到它们则将其删除。有两个文件夹

```
/home/install/lib

/home/install/bin

/home/install/include 
```

和

```
/usr/local/lib

/usr/local/bin

/usr/local/include 
```

我想从 /usr/local/lib{bin,include} 中删除 /home/install/lib{bin,include} 中包含的所有文件。例如有

```
/home/install/lib/test1

/usr/local/lib/test1 
```

scritp 将删除 /usr/local/lib/test1。我试图从每个单独的目录中做到这一点

/home/install/lib:ls -f -exec rm /usr/local/lib/{} \; 但什么都没有。你能帮我管理这个简单的脚本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:23:44.467

这里有一些简单的东西。在确保它正在执行您想要的操作后，`echo`从包含的行中删除以运行它：`rm`

```
#!/bin/bash

dirs[0]=lib
dirs[1]=bin
dirs[2]=include

pushd /home/install

for dir in "${dirs[@]}"
do
    for file in $(find $dir -type f)
    do
        # Remove 'echo' below once you're satisfied the correct files
        # are being removed
        echo rm /usr/local/$file
    done
done

popd 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:32:14.380

创建脚本`rmcomm`

```
#!/bin/bash
a="/home/install/$1"
b="/usr/local/$1"
comm -12 <(ls "$a") <(ls "$b") | while read file; do
  rm "$b/$file"
done 
```

然后为每一对调用这个脚本：

```
for dir in lib bin include; do rmcomm "$dir"; done 
```

# hibernate - 从 JPQL 查询中将 JPA 实体的子集作为映射数组返回？

> ID：12076238
> 
> 赞同：7
> 
> 时间：2012-08-22T15:14:26.170
> 
> 标签：hibernate, jpa, jpql

在 JPQL 中，可以使用构造函数表达式请求实体的子集，例如

```
SELECT NEW example.EmployeeDetails(e.name, e.salary, e.department.name) FROM Employee e 
```

它返回 EmployeeDetails 类型的对象列表

或使用投影选择，例如

```
SELECT e.name, e.salary FROM Employee e 
```

它返回一个`Object[] result`where result[0] is e.name and result[1] is e.salary

有没有办法让 JPA 返回一个包含实体子集的 Map 例如是否有一个 JPQL 查询可以返回 `List<Map<String,Object>> result`这样的`result.get(0).get("e.name")`返回`e.name`和`result.get(0).get('e.salary')`返回`e.salary`

如果 JPQL 做不到，HQL 能做到吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T08:34:02.123

[JPA为复合选择](http://www.objectdb.com/java/jpa/query/jpql/select#SELECT_in_Criteria_Queries_)提供了有限数量的返回类型：数组、元组和构造，而 Hibernate[为选择子句](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch16.html#queryhql-select)提供了更多的返回类型，其中包括 Map。

```
SELECT NEW map(e.name, e.salary, e.department.name) FROM Employee e 
```

此 HQL 查询将 a `Map`from 别名返回到选定值。

# cocos2d-iphone - CocosDension、Cocos 2d 中的循环音效

> ID：12076239
> 
> 赞同：1
> 
> 时间：2012-08-22T15:14:32.567
> 
> 标签：cocos2d-iphone

CocosDension 的 SimpleAudioEngine 提供了循环背景音乐的方法。但一次只能播放一个音乐文件。我需要循环多个声音文件。有没有一种简单的方法可以使用 Cocos 2d 的 CocosDension 来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:38:47.707

如果您使用 CDSoundSource，您可以设置是否要循环播放声音。是的，为每个声音定义一个 CDSoundSource 并独立播放。

检查 CocosDenshion 文件夹中的示例，特别是 FadeToGrey/TheAudioCode 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:21:04.943

您还可以使用

```
SimpleAudioEngine::playEffect(soundfile, true) 
```

这将循环播放效果

# php - 回显 Linux 发送到 Arduino 的数据

> ID：12076240
> 
> 赞同：0
> 
> 时间：2012-08-22T15:14:33.670
> 
> 标签：php, c, linux, arduino

我想将 Linux 发送到 Arduino 的数据回显，这是一个十六进制命令，因为我需要 PHP 读取回显的数据。问题是我不想使用换行符来打印完整的数据。当 Arduino 没有更多数据可以读取时，我想打印它。这是代码：

我要完成的工作：

1.  如果没有，如何发现读取序列的结尾`\n`
2.  如何以所需格式打印十六进制。

Arduino代码：

```
char printByte[100];
byte getByte;
int pos = 0;
void setup(){
    Serial.begin(9600);
}

void loop(){
    if(Serial.available() > 0){
        getByte = Serial.read();
        printByte[pos] = getByte;
        pos++;
        printByte[pos] = '\0';

        if(getByte == '\n'){
            Serial.print(printByte);
            for(int i=0; i<=sizeof(printByte);i++){
                printByte[i]=0;
            }
            pos = 0;
        }
    }
} 
```

发送十六进制的Linux示例代码..

```
unsigned char pCom[2][7]={{0xFF,0x01,0x00,0x10,0x2F,0x2F,0x6F},
                            {0xFF,0x01,0x00,0x08,0x2F,0x2F,0x67}};

write(fd,pCom[0],8); 
```

另外，我怎样才能在 Arduino 代码中精简，说它`0x`只会输出`FF 01 10`等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:19:06.713

您想要做的（几乎）可以通过替换来完成

```
Serial.print(printByte);
for(int i=0; i<=sizeof(printByte);i++){
   printByte[i]=0;
} 
```

和

```
Serial.print(printByte);

for(int i=0; i<=sizeof(printByte);i++){
   if (0 == printByte[i])
       break;
   printf("%02x", printByte[i]);
}
printf("\n"); // Newline after output

if (0 == strpos(printByte, "QUIT"))
{
    // The cycle ends.
}

for(int i=0; i<=sizeof(printByte);i++){
   printByte[i]=0;
} 
```

**更新**： Serial.print() 命令是输出 0xFF...：我不明白你想修改输出*Arduino 端*。那，我不知道如何实现，需要修改`Serial`包的来源。那里会有一个“0x%02x”或“0x02X”，必须从中删除0x。

关于读取序列的结束，您可能会输出一个双倍的 \n。然后，如果读取的字节为 \n*且*pos 为 0，这将意味着 Arduino 已写入空行并且序列已停止。

或者您可以使用几乎任何序列作为终止符：在上面的代码中，我添加了对字符串“QUIT”的检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:08:26.877

您的第一个问题是如何知道何时停止阅读，如果您不使用“\n”终止数据包/命令/任何内容。

答案是您必须建立*某种*方式来了解要读入协议的内容。串行通信中没有任何内在的东西可以告诉您序列何时结束。它只是一个字节流。

*   像 \n 这样的分隔符是一种常用的方法（如果您看到您已经阅读了分隔符，请停止）
*   固定长度的数据包（读取那么多字节然后停止）
*   包含“长度”字段的数据包（读取长度字段，然后使用它来决定要读取多少字节）

如果您的协议没有做这些事情，那么您的读者就无法知道何时停止。哦，也许有超时——但我不建议依赖这些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T20:20:51.500

从 Arduino 参考页面（[http://arduino.cc/en/Serial/Print](http://arduino.cc/en/Serial/Print)）：

```
Serial.print(78, HEX) gives "4E" 
```

所以：

```
Serial.print(printbyte, HEX); 
```

应该给你你想要的输出。

# r - 如何从线性模型 (lm) 预测 x 值

> ID：12076242
> 
> 赞同：10
> 
> 时间：2012-08-22T15:14:42.783
> 
> 标签：r, lm, predict

我有这个数据集：

```
x <- c(0, 40, 80, 120, 160, 200)
y <- c(6.52, 5.10, 4.43, 3.99, 3.75, 3.60) 
```

我使用以下方法计算了一个线性模型`lm()`：

```
model <- lm(y ~ x) 
```

`x`我想知道如果我有新值的预测值`y`，例如`ynew <- c(5.5, 4.5, 3.5)`，但是如果我使用该`predict()`函数，它只会计算新`y`值。

`x`如果我有新值，我如何预测新`y`值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T15:35:59.870

我认为你只需要使用代数来`y=a+b*x`反转`x=(y-a)/b`：

```
cc <- coef(model)
(xnew <- (ynew-cc[1])/cc[2])
# [1]  31.43007 104.76689 178.10372

plot(x,y
abline(model)
points(xnew,ynew,col=2) 
```

在这里查看您的“数据”，我认为非线性回归可能会更好...

![在此处输入图像描述](../Images/62acc50d9fcaaac878af4c6aba14904f.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T15:58:44.967

由于这是化学中的典型问题（从校准中预测值），因此软件包`chemCal`提供`inverse.predict`. 但是，此功能仅限于“具有模型公式 y ~ x 或 y ~ x - 1 的 lm 或 rlm 类的单变量模型对象[s]”。

```
x <- c(0, 40, 80, 120, 160, 200)
y <- c(6.52, 5.10, 4.43, 3.99, 3.75, 3.60)
plot(x,y)
model <- lm(y ~ x)
abline(model)
require(chemCal)
ynew <- c(5.5, 4.5, 3.5)
xpred<-t(sapply(ynew,function(y) inverse.predict(model,y)[1:2]))
#  Prediction Standard Error
#[1,] 31.43007   -38.97289     
#[2,] 104.7669   -36.45131     
#[3,] 178.1037   -39.69539
points(xpred[,1],ynew,col="red") 
```

警告：这个函数很慢而且不适合，如果你需要反演。预测大量的值。

如果我没记错的话，neg。发生 SE 是因为函数期望斜率始终为正。SE 的绝对值应该仍然是正确的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T19:40:16.517

如果您的关系是非单调的，或者您有多个预测变量值，那么给定 y 值可能有多个 x 值，您需要决定如何处理。

一个可能很慢的选项（并且可能是提到的其他包中使用的方法）是使用 uniroot 函数：

```
x <- runif(100, min=-1,max=2)
y <- exp(x) + rnorm(100,0,0.2)

fit <- lm( y ~ poly(x,3), x=TRUE )
(tmp <- uniroot( function(x) predict(fit, data.frame(x=x)) - 4, c(-1, 2) )$root)
library(TeachingDemos)
plot(x,y)
Predict.Plot(fit, 'x', data=data.frame(x=x), add=TRUE, ref.val=tmp) 
```

您可以使用包中的`TkPredict`功能`TeachingDemos`来观察解决方案。

或者，您可以通过生成大量预测点来获得相当快速的近似值，然后将它们提供给`approxfun`or`splinfun`函数以产生近似值：

```
tmpx <- seq(min(x), max(x), length.out=250)
tmpy <- predict(fit, data.frame(x=tmpx) )
tmpfun <- splinefun( tmpy, tmpx )
tmpfun(4) 
```

# rest - REST 服务基于 HTTP 动词的 XSD 限制

> ID：12076248
> 
> 赞同：0
> 
> 时间：2012-08-22T15:15:03.673
> 
> 标签：rest, xsd

我正在为我们的 REST 服务消息编写 XSD，但遇到了一个问题。根据使用的 HTTP 动词，我们的消息具有不同的限制。

例如，使用 POST 或 PUT 发送的一条消息需要填充两个字段之一，因此我使用选择元素。但是，从 GET 请求返回的同一消息将填充 BOTH，这违反了选择限制。

有什么解决办法吗？下面的示例消息：

```
<xsd:complexType name="MyMessage">
    <xsd:sequence>
        <xsd:choice>
            <xsd:group ref="GroupA" />
            <xsd:group ref="GroupB" />
        </xsd:choice>
        <xsd:element name="SomeString" type="xsd:string" />
    </xsd:sequence>
</xsd:complexType> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:42:18.223

一种简单的方法是将消息中的相关动词记录为元素，因此您的内容模型将类似于

```
( ((POST|PUT), (GroupA|GroupB))
| (GET, GroupA, GroupB)
| (HEAD|OPTIONS|DELETE|TRACE|CONNECT)
) 
```

或者，对不同的动词使用不同的模式，原则是模式的工作是定义一组消息，而您的设计是可接受的精确消息集因动词而异。

# adobe - Adobe Acrobat X Pro 10.1.4 总是重新启动。想法？

> ID：12076250
> 
> 赞同：1
> 
> 时间：2012-08-22T15:15:08.743
> 
> 标签：adobe, acrobat

我在装有 MacOS 10.8 (12A269) 的 Mac 上使用 Adob​​e Acrobat X Pro 10.1.4。我有一个有效的 Adob​​e Creative Cloud 订阅。到目前为止，我使用的所有 Adob​​e 程序都运行良好并且可以自行激活。Just Acrobat Pro 总是要求我接受许可协议。当我接受它时，我可以使用 Acrobat 几秒钟，直到它关闭并再次询问。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:44:24.353

好的，似乎访问权限被 Buggabill 所建议的搞砸了。重新安装 Acrobat 解决了这个问题。这很奇怪，因为它之前是一个全新的安装。

# javascript - 使用 javascript 检测浏览器版本以实现 google swiffy 兼容性

> ID：12076258
> 
> 赞同：0
> 
> 时间：2012-08-22T15:15:33.213
> 
> 标签：javascript, html, redirect, google-swiffy

您好我正在尝试找到一种方法来从基于 swiffy 的 html5 交互中重定向不受支持的浏览器。

不幸的是，我没有浏览器/功能检测的经验，所以我的代码只有一个基本框架：

```
// this line would confirm compatible browser is present and sends to a swiffy html5 page:

if(navigator.appName == "Chrome 18.0+" ||  "Firefox 4+" || "Safari 5.1+" || "Internet Explorer 9+" || "Opera 12+" || "Mobile Safari iOS 5+" || "Android 4.0.3+")
{
 window.location = "timeline_web.html"
}
else{

// this line sends other browsers to fallback .png based version:

window.location = "timeline_web_fallback.html"
} 
```

如果您知道如何设置它，我将非常感激！希望你能帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:10:14.880

功能检测通常比浏览器版本检测更好，因为功能可用性可能取决于其他因素，例如文档类型。您可以测试特定功能，或使用诸如[modernizr之类的库](http://modernizr.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:54:26.690

我的解决方案是在这里使用浏览器检测 jquery 插件：

[http://jquery.thewikies.com/browser/](http://jquery.thewikies.com/browser/)

检查每个浏览器版本。到目前为止似乎运行良好，代码很简单:-)

# python - 在同一数组中用python中的另一个列表替换一个列表

> ID：12076259
> 
> 赞同：1
> 
> 时间：2012-08-22T15:15:35.500
> 
> 标签：python

如果我没有将它们放在一个数组中，我总是可以更改 bwtween 列表...

如果我有一个包含多个列表的数组

```
 a = [[2,3,4,],[8,14,13],[12,54,98]] 
```

我该如何`a[2]`替换`a[0]`？？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:24:30.477

列表是可变的，因此您可能想要替换列表项，而不是列表本身：

```
a[2][:] = a[0] 
```

如果您想交换列表而不是替换它们，那么：

```
a[0], a[2] = a[2], a[0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:17:18.563

~~对于您的原始帖子：~~

 ~~```
a = [[2,3,4,],[8,14,13],[12,54,98]]
a[2] = a[0] 
```~~ 

那么`a`将是：

```
[[2, 3, 4], [8, 14, 13], [2, 3, 4]] 
```

 ~~**根据以下对 sdolan 的评论进行**更新：****

 **如果你想交换两者，你可以简单地这样做：

```
a[0], a[-1] = a[-1], a[0] 
```

给予

```
[[12, 54, 98], [8, 14, 13], [2, 3, 4]] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T15:17:22.957

您可以分配它：

```
>>> a = [[2,3,4,],[8,14,13],[12,54,98]]
>>> 
>>> a[2] = list(a[0]) # list() to create a new copy
>>> a
[[2, 3, 4], [8, 14, 13], [2, 3, 4]] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T15:18:55.280

你问这个的方式是将数组从更改 `a = [[2,3,4,],[8,14,13],[12,54,98]]` 为 `a = [[2,3,4,],[8,14,13],[2,3,4,]]`

所以你可以做`a[2] = a[0]`

但如果你想交换它们，你将需要类似的东西：

```
b = a[0]
a[0] = a[2]
a[2] = b 
```

编辑速记：

`a[0], a[2] = a[2], a[0]`**~~

# android - 从 Canvas 确定绘制的 Rect（确定 OverlayItem 的位置）

> ID：12076264
> 
> 赞同：0
> 
> 时间：2012-08-22T15:15:52.043
> 
> 标签：android, google-maps, canvas, overlay, itemizedoverlay

我正在尝试仅绘制可见的 OverlayItems，这就是为什么我确定地图可见矩形但我无法确定 Canvas 将在其中绘制 OverlayItem 的矩形。

这就是我到目前为止所做的（逐项叠加中的方法）.. 但是 getClipBounds() 没有返回正确的 Rect

```
@Override
    public void draw(Canvas canvas, MapView map, boolean shadow) {
        if (getMapBounds().intersect(canvas.getClipBounds())) {
            super.draw(canvas, map, false);
        }
    } 
```

我不想绘制其他 OverlayItems，我想知道我的画布是否在地图视图的可见矩形内绘制了一些东西因为如果不是我不绘制这个画布这样做是为了加快具有近 2000 个叠加层的地图视图项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:58:48.837

我现在通过迭代项目并检查它们是否在地图上来做到这一点就像这样：

```
@Override
    public void draw(Canvas canvas, MapView map, boolean shadow) {
        for (int i = 0; i < mOverlays.size(); i++) {
            if (isLocationVisible(mOverlays.get(i).getPoint())) {
                super.draw(canvas, map, false);
            }
        }       
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:43:26.827

如果您要绘制像这样的叠加层：![](../Images/0c622c54dfad136a94cae8b897e8775c.png)

所以基本上你要做的就是在画布的帮助下将 customImage 强加在背景框上。使用此实现，您可以有效地从画布创建 BitmapDrawable，然后您可以将其指定为“ItemizedOverlay”的标记。如果这是您要查找的逐项叠加类型，则无需覆盖逐项叠加类的绘制函数。您需要做的就是使用以下代码创建一个 BitmapDrawable，您可以在其构造函数中将其分配给 ItemizedOverlay。这是执行此操作的函数：

```
public BitmapDrawable imageOnDrawable(int drawableBackground, Bitmap customImage)
{
//The following line is optional but I'd advise you to minimize the size of 
//the size of the bitmap (using a thumbnail) in order to improve draw
//performance of the overlays (especially if you are creating a lot of overlays).

Bitmap customImageThumbnail = ThumbnailUtils.extractThumbnail(
                                                customImage, 100, 100); 

Bitmap bm = BitmapFactory.decodeResource(getResources(), drawableId);
bm = Bitmap.createScaledBitmap(bm, 112, 120, false);

Canvas canvas = new Canvas(bm);
canvas.drawBitmap(bm, 0, 0, null);
// The 6,6 in the below line refer to the offset of the customImage/Thumbnail
// from the top-left corner of the background box (or whatever you want to use
// as your background) 
canvas.drawBitmap(customImageThumbnail, 6, 6, null); 

return new BitmapDrawable(bm);

} 
```

# html - MediaWiki 显示 , ,

> ID：12076267
> 
> 赞同：0
> 
> 时间：2012-08-22T15:15:57.347
> 
> 标签：html, mediawiki

我使用**mediawiki** 1.19.1。我创建了一个机器人，它创建了一些包含 HTML 标签的页面`dd`，`dl`并且`dt`（这是一个格式良好的 XML 片段）

```
<dl>
<dt>Title1</dt>
<dd>Definition2</dd>
<dt>Title2</dt>
<dd>Definition2</dd>
</dl> 
```

[它在http://en.wikipedia.org/w/index.php?title=Wikipedia:Sandbox&oldid=508628268](http://en.wikipedia.org/w/index.php?title=Wikipedia:Sandbox&oldid=508628268)上看起来是正确的，但是，我的 MW 没有解释结束标签：

```
Title1</dt>

    Definition2</dd>

Title2</dt>

    Definition2</dd> 
```

我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:03:06.503

一个非常简单且丑陋的解决方法是不要放置`</dt>`和`</dd>`结束标签。我以前的解决方法是改用跨度...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:25:17.333

[$wgHtml5](https://www.mediawiki.org/wiki/Manual%3a%24wgHtml5)和[$wgWellFormedXml](https://www.mediawiki.org/wiki/Manual%3a%24wgWellFormedXml)的值是否会影响代码的解析方式？

# visual-c++ - 如何在使用 MFC 开发的 SDI App 的标题栏中添加图标？

> ID：12076268
> 
> 赞同：1
> 
> 时间：2012-08-22T15:16:00.367
> 
> 标签：visual-c++, mfc, sdi

我必须对使用 MFC 开发的现有应用程序进行更改。此应用程序使用带有 Document\View 架构的 SDI 模板。我需要在应用程序执行时显示的窗口上放置一个图标。目前它没有任何图标可显示（某些 MFC 应用程序默认显示 MFC 徽标）。有人可以帮帮我吗？我用谷歌搜索了很多，但没有成功。另外我想知道为什么我们对 resource.h 文件中的所有资源都使用 IDR_MAINFRAME（同名）。我观察到它的值固定在 128。这有什么具体原因吗？如果你以前遇到过，请推荐一些关于 MFC 的好链接或书籍？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-10T17:58:53.260

This is a known problem on Visual studio late versions. I tried everything I could, it still doesn't work. Finally I found a solution from somewhere else. You have to force the application to use the icon by code:

```
BOOL CMyApp::InitInstance()
{
    ...........
    CWinAppEx::InitInstance();
    ...........

    HICON hIcon = LoadIcon(IDR_MAINFRAME);
    HICON hPrev = pMainFrame->SetIcon(hIcon,FALSE);
    if (hPrev != NULL && hPrev != hIcon) 
        DestroyIcon(hPrev);

    return TRUE;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:50:04.220

我建议您创建一个新的 MFC 应用程序来查看默认设置。您应该看到在您的 .RC 文件中有一行看起来像这样：

```
IDR_MAINFRAME   ICON       "res\\app.ico" 
```

如果它不存在，您可以添加它。查看 MFC 文件 winfrm.cpp 你可以看到 MFC 试图在`CFrameWnd::GetIconWndClass()`

```
HICON hIcon = ::LoadIconW(hInst, ATL_MAKEINTRESOURCEW(nIDResource)); 
```

由于资源由它们的类型和 id 标识，因此您可以对不同类型的多个资源使用相同的 id。这在 MFC 框架代码需要加载工具栏、菜单和图标等时非常有用，而开发人员无需为每个项目指定不同的 id。

我在 MFC 上看到的最好的 MFC 书籍是 Mike Blaszczak 的“Professional MFC”。它没有一些新的“MFC 功能包”添加，但它很好地涵盖了旧的东西。我还建议您下载像[Agent Ransack](http://www.agentransack.com)这样的源搜索工具来搜索 MFC 源代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T11:02:44.413

1.  是的，该值必须是 128。它是为 MFC SDI/MDI 保留的。
2.  [IDR_](http://msdn.microsoft.com/en-us/library/t2zechd4.aspx)表示“用于多种资源类型（主要用于菜单、加速器和功能区）。”。通常，这些资源是特定于 MFC 的。
3.  该图标默认可见。确保你**不**调用`SetIcon`你的主窗口！

## 更多关于图标

As of Vista and later, icons may contain PNG images. I believe these icons might cause issues in XP or earlier. Try creating the icon using Visual Studio and see if the icon comes back. I'm assuming you are running Visual Studio 2008 or later. It might also be a good idea to update the Windows SDK in order to get this new PNG feature ([rc.exe](http://social.msdn.microsoft.com/forums/en-US/windowsuidevelopment/thread/3f13af3b-8aa0-4b12-bbe6-66d40039ef70/) was updated to handle these new icons).

# python - 获取前一个元素的最pythonic方式

> ID：12076270
> 
> 赞同：10
> 
> 时间：2012-08-22T15:16:09.177
> 
> 标签：python, iterator

我想`enumerate`在迭代器上使用类似函数，它会产生 pair `(previous_element, current_element)`。也就是说，鉴于这`iter`是

```
i0, i1, i1, ... 
```

我愿意`offset(iter)`屈服

```
(None, i0), (i0, i1), (i1, i2) ... 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-22T15:22:05.920

简单（明显）的解决方案呢？

```
def offset(iterable):
    prev = None
    for elem in iterable:
        yield prev, elem
        prev = elem 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-22T15:24:17.443

将更多的 itertools 放在桌面上：

```
from itertools import tee, izip, chain

def tee_zip(iterable):
   a, b = tee(iterable)
   return izip(chain([None], a), b) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T15:19:08.900

```
def pairwise(iterable):
    """s -> (s0,s1), (s1,s2), (s2, s3), ...
    see http://docs.python.org/library/itertools.html
    """
    a, b = itertools.tee(iterable)
    b.next()
    return itertools.izip(a, b) 
```

**编辑**将文档字符串移动到函数中

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T15:26:18.993

```
def offset(iter, n=1, pad=None):
    i1, i2 = itertools.tee(iter)
    i1_padded = itertools.chain(itertools.repeat(pad, n), i1)
    return itertools.izip(i1_padded, i2) 
```

@bpgergo + @user792036 = 这个。两全其美:)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T15:18:31.130

我拥有的最佳答案（这需要`itertools`）是

```
def offset(iter, n=1):
    # returns tuples (None, iter0), (iter0, iter1), (iter1, iter2) ...
    previous = chain([None] * n, iter)
    return izip(previous, iter) 
```

但我很想看看是否有人有一个单行（或者比这个函数的偏移更好的名字）！

# javascript - If 语句的简写成和 String

> ID：12076271
> 
> 赞同：-4
> 
> 时间：2012-08-22T15:16:10.030
> 
> 标签：javascript

嗨，我想知道如何用 Javascript 写这个：

```
var object {

    baseUrl: "js" <?php if (DEBUG_MODE) echo '/raw'; ?>"

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T15:18:41.130

```
var object = {
    baseUrl: "js" + ((DEBUG_MODE) ? '/raw' : '')
} 
```

注意添加的`+`和`=`。此外，假设在某处有一个`DEBUG_MODE`定义，并且假设我理解你真正想要的东西，这也是可行的。

编辑：

在 PHP 中，你只是在输出 HTML，所以你可以输出`"js"`，然后在`<?php ?>`块输出中`DEBUG_MODE`，它被连接起来。然而，在 JS 中，您将两个字符串作为语言对象处理，因此`+`需要将它们连接起来。

`=`应该是不言自明的。你**声明**了一个变量（幸运的是你使用了**小写**`object`字母并且没有与预建`Object`的.**`=``{}`**

# html - 如何在 Google Chrome 中使用 keygen 标签将私钥存储在令牌/智能卡中

> ID：12076273
> 
> 赞同：2
> 
> 时间：2012-08-22T15:16:21.940
> 
> 标签：html, google-chrome, private-key, pki, key-pair

我需要使用 keygen 标签指定私钥存储到智能卡/令牌的位置。使用 Mozilla Firefox，当提交包含 keygen 标签的表单并插入任何加密硬件设备时，浏览器会提示一个组合框，我可以在其中选择要放入我的私钥的存储设备。然而，当使用 Google Chrome ，它不会提示组合框并始终将私钥存储在磁盘中！有人已经面临同样的问题吗？任何替代解决方案？

谢谢！

# c# - “公共语言运行时检测到无效程序”需要解决方法。为通用方法引发的异常

> ID：12076274
> 
> 赞同：2
> 
> 时间：2012-08-22T15:16:27.253
> 
> 标签：c#, .net, generics, delegates, extension-methods

您能否建议解决导致*公共语言运行时检测到无效程序的***.NET 4.0** [缺陷。](https://connect.microsoft.com/VisualStudio/feedback/details/759078/common-language-runtime-detected-an-invalid-program-exception-thrown-for-polymorphic-generic-method-accepting-generic-extension-method-as-delegate#details)启动以下程序时出现异常（在 Visual Studio 2010 中）：

 ***注意：**当在 Visual Studion 2012 中编译相同的程序时，行为不会重现。

```
namespace Namespace1
{
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Windows.Forms;

    public class Tst1
    {
        public Action<DataType> Method1<DataType>(Func<DataType> param1) { return this.Method1<DataType>(param1, 0); }
        public Action<DataType> Method1<DataType>(Func<DataType> param1, int param2)
        {
            return param => System.Windows.Forms.MessageBox.Show(param1().ToString() + " " + param.ToString());
        }
    }

    public class TstBase { }

    public class Tst2 : TstBase { }

    public static class TstExtensions
    {
        public static string ExtensionMethod<TstType>(this TstType tst)
            where TstType : TstBase
        {
            return "From extension method";
        }
    }

    public class Application
    {
        public static void Main()
        {
            Tst1 tst1 = new Tst1();
            Tst2 tst2 = new Tst2();

            tst1.Method1<string>(tst2.ExtensionMethod)("From main");
        }
    }
} 
```

**注意：**构建项目需要引用.NET framework 4.0的Assembly *System.Windows.Forms.dll 。*

## 背景资料

我在 3-rd 方提供的低级测试自动化工具上开发了高抽象级脚本处理关键字驱动的测试自动化框架（自动化框架，它使用 3-rd 方工具执行高抽象级别的关键字驱动脚本访问较低级别的图形 UI）。上面列出的构造是实施统一值验证方法所必需的。

列出的代码的每个元素代表以下内容：

*   **Tst1** - 值验证类
*   **Method1** - 对从 UI（用户界面）检索的值执行验证的多态方法，并且可以接受超时以等待 UI 元素获取所需的值
*   **TstBase** - 用于从 3 方低级自动化工具 API 处理的所有 UI 控件的基类
*   **Tst2** - 用于处理来自 3-rd 方低级自动化工具 API 的某些类型的控件的类
*   **ExtensionMethod** - 使用来自 3-rd 方低级自动化工具 API 的任何控件处理程序类的实例从所有类型的控件中检索文本的通用方法

Method1 返回委托，该委托作为参数传递给从测试脚本步骤参数中检索值并立即使用它的其他方法。总而言之，它如下所示：

```
testStepParameters.MakeUseOf("Field1ExpectedValue", validation.Verify<string>(field1.GetValue)); 
```

where`validation.Verify<string>(field1.GetValue)`去而不是`tst1.Method1<string>(tst2.ExtensionMethod)`从第一个代码片段开始。

## 重要通知

我找到了一种解决该缺陷的方法，但我不喜欢它，因为它在代码中增加了一定程度的笨拙。我发现的解决方法是用*Lambda*表达式替换扩展方法的直接使用 - 即当行时错误不会重现：

```
tst1.Method1<string>(tst2.ExtensionMethod)("From main"); 
```

替换为行：

```
tst1.Method1<string>(() => tst2.ExtensionMethod())("From main"); 
```

在最终形式中，它看起来像：

```
testStepParameters.MakeUseOf("Field1ExpectedValue", validation.Verify<string>(() => field1.GetValue())); 
```

并且当使用复杂的调用而不是`field1`变量来检索控制（可能是委托返回控制）时，这种变通方法的使用变得完全不愉快（这对于随着时间的推移检查控制状态而不用担心如何检索控制特别有用）`GetValue`扩展方法的实现）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:36:07.407

您可以通过自己创建委托来修复它，而不是让 C# 为您完成。像这样：

```
 tst1.Method1<string>(new Func<string>(tst2.ExtensionMethod))("From main"); 
```*

# c# - 当每个索引都有一组项目时从 List 集合中检索项目

> ID：12076281
> 
> 赞同：3
> 
> 时间：2012-08-22T15:16:40.730
> 
> 标签：c#, asp.net

我正在尝试使用 asp.net C# 创建一个显示问题和提示的表单应用程序。我打算将这两者放在一个单独的列表集合中，但问题和提示可能会变得不连贯，所以我决定创建一个包含 ID、Q 和提示的类，然后将它们放在一个列表集合中一套。

这是 QHint.cs 文件中的代码：

```
public QHint (int ID, string Q, string Hint)
{
      this.ID = ID;
      this.Q = Q;
      this.Hint = Hint;
}

public int ID { get; set; }
public string Q { get; set; }
public string Hint { get; set; } 
```

这是 form1.cs 文件中的代码：

```
List<QHint> QHintList = new List<QHint>;
QHintList.add(new QHint(1, "quesiton1 blah blah?", "hint1 blah blah"));
QHintList.add(new QHint(2, "quesiton2 blah blah?", "hint2 blah blah"));
.... and so on.... 
```

我的问题是如何指定要从列表中检索的项目，例如仅提示 1？我试图用 QHintList[0] 检索一个集合（ID、Q 和提示），但我什至无法做到。但是，最终我希望能够显示 question1，然后当用户点击提示按钮时，我可以显示相应的提示 1。另外，使用类和列表是逻辑上实现我想要的最佳方式吗？

这可能是一些基础知识，我尝试查找它，例如如何使用列表、如何从列表中检索数据等等，但没有运气。

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T15:23:35.733

如果您可以跟踪哪些提示在哪些位置，那么您可以使用

```
var qHint = QHintList[i]; 
```

如果您无法跟踪，则可以使用 List 上的 find 方法，该方法采用谓词。我认为这会起作用（取决于您当时掌握的信息）

```
var qHint = QHintList.Find(q => q.Id == YourId); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:22:33.503

为什么不创建字典以提高性能

```
Dictionary<int, QHint> QHintList = new Dictionary<int, QHint>;
QHintList.add(1, new QHint(1, "quesiton1 blah blah?", "hint1 blah blah"));
QHintList.add(2, new QHint(2, "quesiton2 blah blah?", "hint2 blah blah")); 
```

然后你可以这样调用；

```
int questionId = 1;
QHintList[questionId].Hint 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T15:24:42.297

如果我的方向是正确的，那么您需要在属性提示中找到文本提示 1。多人的情况下

```
foreach QHint q in QHintList
{
   if(q.Hint.Contains("hint1"))
   {
     // then do something cool;
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T15:19:25.563

```
var hint = QHintList[0].Hint;
Console.WriteLine(hint); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T15:19:48.090

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Diagnostics;

namespace QuestHint
{
    class QHint
    {
        public QHint() { }
        public QHint(int ID, string Q, string Hint)
        {
            this.ID = ID;
            this.Q = Q;
            this.Hint = Hint;
        }

        public int ID { get; set; }
        public string Q { get; set; }
        public string Hint { get; set; }
        public List<QHint> QHintList = new List<QHint>();
    }

    class Program
    {
        static void Main(string[] args)
        {
            QHint q = new QHint();

            q.QHintList.Add(new QHint(1, "quesiton1 blah blah?", "hint1 blah blah"));
            q.QHintList.Add(new QHint(42, "quesiton2 blah blah?", "hint2 blah blah"));

            int magicNumber = 42;

            Debug.WriteLine(q.QHintList[0].Q); // output quesiton1 blah blah?
            Debug.WriteLine(q.QHintList.Find(obj => obj.ID == magicNumber).Hint); //hint2 blah blah
// you are saying like: find me the obj, where the ID of that obj is equals my magicNumber. And from that found object, give me the field Hint.
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T15:24:30.547

用 Linq 试试这个

```
 var hint = QHintList.First(p=>p.ID == inputId).Hint 
```

# iphone - iphone - 如何从自定义表格单元格（动态）中引用 UILabel？

> ID：12076282
> 
> 赞同：0
> 
> 时间：2012-08-22T15:16:40.560
> 
> 标签：iphone, uitableview, storyboard, uilabel

我在 Storyboard 中创建了一个 UITableView。

对于原型单元格，我使用自定义单元格并在其上添加了 3 个 UILabel。

问题是当我想更新 3 UILabel 的内容时，如何获取它们的引用？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:26:49.690

最简单的方法是将标签分配给情节提要中的标签。然后，当您拥有单元格并需要标签时 - 就像在 cellForRowAtIndexPath 中一样 - 您可以这样做：

```
UILabel *myLabel0 = (UILabel *)[cell viewWithTag:kMY_LABEL0_TAG];
UILabel *myLabel1 = (UILabel *)[cell viewWithTag:kMY_LABEL1_TAG]; 
```

依此类推，您已经在其中#定义了这些常量以匹配情节提要中的标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:29:24.103

制作一个自定义 UITableViewCell 并将 UILabels 设置为属性。然后，您可以通过表格视图访问单元格。

# virtualenv - 共享 Virtualenv 环境定义

> ID：12076292
> 
> 赞同：3
> 
> 时间：2012-08-22T15:17:06.307
> 
> 标签：virtualenv

我有一个 heroku 项目，我正试图与其他人分享。如[说明所述](https://devcenter.heroku.com/articles/django)，我使用 virtualenv 来管理环境和依赖项。有没有办法在新机器上从 requirements.txt 重新创建 virtualenv 配置？

我知道[这个问题](https://stackoverflow.com/questions/9506281/sharing-python-virtualenv-environments)，但它描述了在同一台机器上的用户帐户之间共享 virtualenv。我正在寻找一种跨机器共享它的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T20:01:05.613

没有一种方法可以轻松地在机器之间完全共享它。最方便的方法是创建 virtualenv 然后重新安装依赖项：

```
virtualenv --no-site-packages venv
source venv/bin/activate
pip install -r requirements.txt 
```

# php - 使用 ImageMagick (PHP) 将 2 个图像并排合并为 1 个

> ID：12076293
> 
> 赞同：11
> 
> 时间：2012-08-22T15:17:08.540
> 
> 标签：php, imagemagick

我认为这是一件容易的事。

我有 2 张图片/JPG，我希望它们合并成一张图片，其中 2 张并排。

所以我有图片 [A] 和图片 [B]，我想得到图片 [AB]（并排）。

两个图像具有相同的宽度和高度。在这种情况下，宽度 = 200 像素，高度 = 300 像素。*但是第二张图片应该出现在位置 200,0 .. 当 imagewidth 小于 200px （200px 是 maxwidth）*

这是我尝试过的（php）：

```
exec($IMAGEMAGICK_PATH."composite picA.jpg -geometry +200+0 picB.jpg picAB.jpg"); 
```

我也在“复合”之后尝试了“-size 400x300”，但没有任何反应。问题是图像 picA.jpg 移动了 200px 并合并到 picB.jpg 中，但 picAB.jpg 的宽度与 picB.jpg 相同。

我也不确定“-geometry”是否是正确的命令。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-22T15:23:40.050

`-geometry`如果两个文件大小相同，则无需使用。尝试

```
exec($IMAGEMAGICK_PATH."convert picA.jpg picB.jpg +append picAB.jpg"); 
```

`-append`如果要合并列中的图片，请使用。

如果您的图片大小不同**，**请添加`-background none`或`-background black`或或其他任何内容。在这种情况下，您可能还想添加or或一些类似的东西来控制两个图像的合并方式。然后需要出现在命令行上的之前：`-background white`**`-gravity center``-gravity south``-gravity``+-append`**

 **```
exec($IMAGEMAGICK_PATH."convert big.jpg small.jpg -gravity east -append 2x.jpg"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-10T17:41:09.167

这是我在 Kinoulink（一家法国初创公司）使用的 PHP 代码：

```
$im1 = new \Imagick($media1);
$im2 = new \Imagick($media2);
$imTotal = new \Imagick();

$im1->cropthumbnailimage(62, 128);
$im2->cropthumbnailimage(62, 128);

$imTotal->newimage(128, 128, '#ffffffff');

$imTotal->compositeimage($im1, \Imagick::COMPOSITE_DEFAULT, 0, 0);
$imTotal->compositeimage($im2, \Imagick::COMPOSITE_DEFAULT, 66, 0);

$imTotal->writeimage($albumCoverFilePath); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T17:29:23.077

也许您会发现该`montage`方法更易于理解（这可能是您尝试使用它时想到的方法`composite`-但该方法用于*重叠*图像，而不是用于并排蒙太奇...）

```
montage                 \
  -background '#FFF9E3' \
  -geometry 200\!x\>    \
  -gravity west         \
   right+narrow.jpg     \
   left+wider.jpg       \
   result.jpg 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-22T16:18:07.993

由于扩展要求，这是一个执行图像附加的命令行，其中右图应从左边缘偏移 200 像素，而不管左图像的（较小）宽度如何：

```
 convert                          \
   -background '#FFF9E3'          \
    xc:none -resize 200x1\!       \
    right+narrow.png -append      \
    left+wider.png                \
   -gravity south                 \
   +append                        \
   -crop '400x +0+1'              \
   +repage                        \
    result.png 
```

该部件`xc:none -resize 200x1\!`创建了一条 1 像素高、200 像素长的线，并将较小的（右侧）图像垂直附加到它上面。

对于这个中间结果，发生了更宽（左）图像的水平附加。我们现在将有一张 401x100 的图片，顶部可能有一条丑陋的透明像素线。

`-crop`这就是为什么我们用这个函数去掉这个顶部的像素线。

您应该能够自己将其翻译成 PHP ... :-)**

# ruby-on-rails-3 - 当我使用模板时，我的文字写错了方向

> ID：12076299
> 
> 赞同：5
> 
> 时间：2012-08-22T15:17:26.377
> 
> 标签：ruby-on-rails-3, pdf, pdf-generation, prawn

我想使用 Rails 在现有 PDF 上添加文本，所以我这样做了：

```
filename = "#{Rails.root}/app/assets/images/sample.pdf"
Prawn::Document.generate("#{Rails.root}/app/assets/images/full_template.pdf", :template => filename) do
  text "Test", :align => :center
end 
```

当我打开 full_template.pdf 时，我有我的模板 PDF + 我的文本“测试”，但是这个文本写的方向不好，就好像我的文本是用镜子写的一样。

您可以在此处找到两个 PDF 文档：

原文： [http ://www.sebfie.com/wp-content/uploads/sample.pdf](http://www.sebfie.com/wp-content/uploads/sample.pdf)

生成： [http ://www.sebfie.com/wp-content/uploads/full_template.pdf](http://www.sebfie.com/wp-content/uploads/full_template.pdf)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T10:06:10.757

让我们看看... *[切换到 PDF 调试模式]*。

首先，我在 的帮助下解压缩您的*full_template.pdf***[`qpdf`](http://qpdf.sf.net/)** ，这是一个命令行实用程序*“对 PDF 文件进行结构性、内容保留的转换”*（自我描述）：

```
qpdf --qdf full_template.pdf qdf---test.pdf 
```

结果，*qdf---test.pdf*现在更容易在普通文本编辑器中分析，因为所有流都已解包。

搜索字符串*“est”*会找到这一行：

```
[(T) 120 (est)] TJ 
```

再多打探一下（看看`qpdf`'s 非常有用的评论散布在它的输出中！）我们发现：在原始 PDF 中出现镜像字符串“Test”的 PDF 对象是数字 22。它是一个完全独立的对象文件的其余部分，它也是唯一一个使用非嵌入式 Helvetica 字体的文件。

因此，让我们将其与原始文件分开提取：

```
qpdf --show-object=22 --filtered-stream-data full_template.pdf 

 q
 /DeviceRGB cs
 0.000 0.000 0.000 scn
 /DeviceRGB CS
 0.000 0.000 0.000 SCN
 1 w
 0 J
 0 j
 [ ] 0 d

 BT
 286.55 797.384 Td
 /F3.0 12 Tf
 [<54> 120 <657374>] TJ
 ET

 Q 
```

好的，这里这件作品`[(T) 120 (est)] TJ`显示为`[<54> 120 <657374>] TJ`。我们在命令的帮助下验证了这一点，它为`ascii`我们打印了一个漂亮的 ASCII <-> Hex 表。该表证实：

```
T  54
e  65
s  73
t  74 
```

其他运营商是什么意思？我们在官方[ISO 32000 PDF-1.7 规范](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)附件 A“操作员摘要”中查找它们。在这里，我们找到以下信息：

```
 q   : gsave
 Q   : grestore
 cs  : setcolorspace for nonstroking ops
 CS  : setcolorspace for stroking ops
 scn : setcolor for nonstroking ops
 SCN : setcolor for stroking ops
 w   : setlinewidth
 j   : setlinejoin
 J   : setlinecap
 d   : setdash
 BT  : begin text object
 Td  : move text position
 Tf  : set text font and size
 TJ  : show text allowing individual glyph positioning
 Tj  : show text
 ET  : end text object 
```

目前没有什么可疑的...

但是，查看原始页面内容出现的另一个对象（对象编号 5），我们发现了一个不同之处。例如：

```
1 0 0 -1 -17.2308 -13.485 Tm
<0013001c001200130018001200140015> Tj 
```

`Tj`在这里，在（显示文本）的每个单个操作之前，`Tm`操作符（*这是什么？！？*）在起作用。让我们也查看一下`Tm`PDF 规范：

```
 Tm  : set text matrix and text line matrix 
```

然而奇怪的是，这个矩阵使用`1 0 0 -1`（而不是更常见的`1 0 0 1`）。这导致文本的上下镜像。

***等一下！？！***

*原文*本内容用镜像文本矩阵描边，但还是显示正常？？但是您*添加*的文本不使用自己的任何文本矩阵，而是出现镜像？到底是怎么回事？！

我现在不打算追查它了。然而，我的假设是，在原始 PDF 的内脏中，创作软件定义了一个*“扩展图形状态”*，默认情况下会镜像所有描边操作。

***看来你没有做错任何事，塞巴斯蒂安——你只是不走运地选择了一个测试对象，并且幸运地得到了一个相当奇怪的对象。试试吧，先用其他一些 PDF 继续你的“Prawn”实验......***

可以通过替换*qdf---test.pdf*中的这一行来“修复”您的*full_template.pdf*：

 *```
286.55 797.384 Td 
```

通过这个：

```
1 0 0 -1 286.55 797.384 Tm 
```

然后运行最后一个`qdf`命令来修复（现在被我们的编辑损坏）PDF交叉引用表和流长度：

qpdf qdf---test.pdf full_template---fixed.pdf

控制台输出将显示你想要它：

```
 WARNING: qdf---test.pdf: file is damaged
  WARNING: qdf---test.pdf (file position 151169): xref not found
  WARNING: qdf---test.pdf: Attempting to reconstruct cross-reference table
  WARNING: qdf---test.pdf (object 8 0, file position 9072): attempting to recover stream length
  qpdf: operation succeeded with warnings; resulting file may have some problems 
```

“固定”PDF 将显示未镜像的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-03T10:57:35.997

我的拉取请求[已合并](https://github.com/prawnpdf/prawn-templates/pull/20)，因此问题现在已在`prawn-templates`gem 中修复。修复是在向 PDF 添加任何内容之前重置图形状态。

发生这种情况是因为 Google Chrome 和 Google Docs 导出 PDF 时带有一个垂直翻转所有内容的转换矩阵。默认情况下，PDF 从左下角呈现。Google 的自定义转换意味着他们可以从 PDF 的左上角计算坐标，这对我来说确实更有意义。

PS 非常感谢@KurtPfeifle 非常有帮助的答案！如果没有这些信息，我不会走到这一步。*

# ruby-on-rails - Savon OpenSSL::SSL::SSLError

> ID：12076300
> 
> 赞同：3
> 
> 时间：2012-08-22T15:17:28.777
> 
> 标签：ruby-on-rails, wsdl, openssl, basic-authentication, savon

我正在使用带有 rails 2.3.11、savon 1.1.0、芥末 2.5.0、httpi 1.1.1 和 httpclient 2.2.7 的 ruby​​ 1.8.7

每当我运行我的脚本时：

```
#!/usr/bin/env ruby
require File.expand_path(File.join(File.dirname(__FILE__), '..', 'config', 'environment'))
require 'savon'

client = Savon::Client.new do |wdsl, http|
      wdsl.document = 'https://www.atmosfair.de:8443/service/AtmosfairEmissionService3?wsdl'
      http.auth.ssl.verify_mode = :none
      http.auth.basic "user", "password"
end

client.request :wdsl, "getFlightEmission" do
    soap.body = {
         :departure => "VIE",
         :arrival => "DUB"
    }
end 
```

我明白了：

> HTTPI 使用 httpclient 适配器执行 HTTP GET /usr/local/rvm/gems/ruby-1.8.7-p370/gems/httpclient-2.2.7/lib/httpclient/session.rb:300:in `connect': SSL_connect 返回=1 errno=0 state=SSLv2/v3 读取服务器问候 A：sslv3 警报意外消息 (OpenSSL::SSL::SSLError)
> 
> 来自 /usr/local/rvm/gems/ruby-1.8.7-p370/gems/httpclient-2.2.7/lib/httpclient/session.rb:300:in `ssl_connect' from /usr/local/rvm/gems/ruby-1.8.7-p370/gems/httpclient-2.2.7/lib/httpclient/session.rb:757:in`connect' 来自 /usr/local/rvm/gems/ruby -1.8.7-p370/gems/httpclient-2.2.7/lib/httpclient/timeout.rb:131:in `timeout' from /usr/local/rvm/gems/ruby-1.8.7-p370/gems/httpclient-2.2.7/lib/httpclient/session.rb:748:in`connect' 来自 /usr/local/rvm/gems/ruby-1.8.7-p370/gems/httpclient- 2.2.7/lib/httpclient/session.rb:606:in `query' from /usr/local/rvm/gems/ruby-1.8.7-p370/gems/httpclient-2.2.7/lib/httpclient/session.rb:161:in`query' 来自 /usr/local/rvm/gems/ruby-1.8.7-p370/gems/httpclient-2.2.7/lib/httpclient.rb:1070 :in `do_get_block' from /usr/local/rvm/gems/ruby-1.8.7-p370/gems/httpclient-2.2.7/lib/httpclient.rb:873:in`do_request' 来自 /usr/local/rvm/gems/ruby-1.8.7-p370/gems/httpclient-2.2.7/lib/httpclient.rb:966:in `protect_keep_alive_disconnected' from /usr/local/rvm/gems/ruby-1.8.7-p370/gems/httpclient-2.2.7/lib/httpclient.rb:872:in`do_request' 来自 /usr/local/rvm/gems /ruby-1.8.7-p370/gems/httpclient-2.2.7/lib/httpclient.rb:760:in `request' from /usr/local/rvm/gems/ruby-1.8.7-p370/gems/httpclient-2.2.7/lib/httpclient.rb:663:in`get' from /usr/local/rvm/gems/ruby-1.8.7-p370/gems/httpi- 1.1.1/lib/httpi/adapter/httpclient.rb:24:in`get' from /usr/local/rvm/gems/ruby-1.8.7-p370/gems/httpi-1.1.1/lib/httpi/adapter/httpclient.rb:64:in`do_request' 来自 /usr/local/rvm/gems/ruby-1.8.7-p370/gems/httpi-1.1.1/lib/httpi/adapter/httpclient.rb:23:in `get' from /usr/local/rvm/gems/ruby-1.8.7-p370/gems/httpi-1.1.1/lib/httpi.rb:86:in`get' 来自 /usr/local/rvm /gems/ruby-1.8.7-p370/gems/httpi-1.1.1/lib/httpi.rb:193:in `with_adapter' from /usr/local/rvm/gems/ruby-1.8.7-p370/gems/httpi-1.1.1/lib/httpi.rb:84:in`get' 从 /usr/local/rvm/gems/ruby-1.8.7-p370/gems/ savon-1.1.0/lib/savon/wasabi/document.rb:34:in `resolve_document' from /usr/local/rvm/gems/ruby-1.8.7-p370/gems/savon-1.1.0/lib/savon/wasabi/document.rb:15:in`xml' 来自 /usr/local/rvm/gems/ruby-1.8.7-p370/gems/wasabi-2.5.0/lib/wasabi /document.rb:131:in `parse' from /usr/local/rvm/gems/ruby-1.8.7-p370/gems/wasabi-2.5.0/lib/wasabi/document.rb:118:in`parser' 来自 /usr/local/rvm/gems/ruby-1.8.7-p370/gems/wasabi-2.5.0/lib/wasabi/document.rb:61:in `soap_actions'来自脚本/atmosfair.rb:28

而 SoapUI 给了我：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
   <soapenv:Body>
      <ns1:FlightEmission xsi:type="ns1:FlightEmissionData" xmlns:ns1="http://www.atmosfair.de/2009/07/travel" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
         <CO2>0.19</CO2>
         <offset>5.0</offset>
         <distance>1733</distance>
         <CO2PerPkm>0.0</CO2PerPkm>
         <CO2InCriticalAltitudes>0.13</CO2InCriticalAltitudes>
         <CO2RFI2>0.32</CO2RFI2>
         <CO2RFI27>0.41</CO2RFI27>
         <CO2RFI3>0.45</CO2RFI3>
         <CO2RFI4>0.59</CO2RFI4>
         <keroseneConsumption>0.06</keroseneConsumption>
         <keroseneConsumptionInCriticalAltitudes>0.04</keroseneConsumptionInCriticalAltitudes>
         <specificFuelConsumptionAverage>4.31</specificFuelConsumptionAverage>
         <offsetCO2RFI2>8.0</offsetCO2RFI2>
         <offsetCO2RFI27>11.0</offsetCO2RFI27>
         <offsetCO2RFI3>11.0</offsetCO2RFI3>
         <offsetCO2RFI4>15.0</offsetCO2RFI4>
      </ns1:FlightEmission>
   </soapenv:Body>
</soapenv:Envelope> 
```

任何想法，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:37:13.733

我通过使用遏制而不是httpclient解决了它：

```
#!/usr/bin/env ruby
require File.expand_path(File.join(File.dirname(__FILE__), '..', 'config', 'environment'))
require 'iconv'
require 'curb'
require 'savon'

HTTPI.adapter = :curb

   client = Savon::Client.new do |wdsl, http|
      http.headers = { "Content-Length" => "0", "Connection" => "Keep-Alive" }
      http.auth.basic "user", "password"
      wdsl.document = 'https://www.atmosfair.de:8443/services/AtmosfairEmissionService3?wsdl'
    end

    client.http.auth.ssl.verify_mode = :none

    response = client.request :wdsl, "getFlightEmission" do
       soap.body = {
         :departure => "VIE",
         :arrival => "DUB"
    }
end 
```

现在一切正常！

# asp.net - 是否有下载“活动”？

> ID：12076301
> 
> 赞同：1
> 
> 时间：2012-08-22T15:17:30.333
> 
> 标签：asp.net, vb.net, error-handling

我想知道有没有人知道这个。

我在我的 asp.net vb 网络应用程序上遇到了一个非常严重的错误。我告诉你，我的额头上差点被 qwerty 染上了颜色，因为我的头撞在了键盘上。但我想我找出了错误的原因：

我有以下代码：

```
 fileToDownload = createFileSet(fileToDownload, confirm)
                    HttpContext.Current.Response.ClearContent()
                    HttpContext.Current.Response.AddHeader("Content-Disposition", "attachment; filename=" + fileToDownload.Name)
                    HttpContext.Current.Response.AddHeader("Content-Length", fileToDownload.Length.ToString())
                    HttpContext.Current.Response.ContentType = ReturnExtension(fileToDownload.Extension.ToLower())
                    HttpContext.Current.Response.TransmitFile(fileToDownload.FullName)
                    HttpContext.Current.ApplicationInstance.CompleteRequest()
                    Directory.Delete("C:\temp_" & confirm, True)
                    'System.IO.File.Delete(fileToDownload.FullName) <--- Error here 
```

当我把最后一行的注释打勾时，我得到了一个非常丑陋的错误（我可以重做它并把它拼出来，什么样的错误，但这并不重要）。

我想我知道原因。用户正在下载文件，或正在下载文件，或其他内容，并且程序正在尝试删除它......导致错误。

有没有办法创建一些`on HttpContext.Current.Response.TransmitFile.complete`（代码组成），还是我求助于批处理文件和 Windows 调度程序来清理这些不再需要的文件？

你认为我的错误结论正确吗？我真的看不到创建“活动”的方法，但我在 asp.net 上太新了，无法确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:05:28.923

尝试使用 finally 块（从这里得到想法[http://forums.asp.net/t/1436818.aspx/1](http://forums.asp.net/t/1436818.aspx/1)）。简而言之，这样做...

```
try {
 fileToDownload = createFileSet(fileToDownload, confirm)
                    HttpContext.Current.Response.ClearContent()
                    HttpContext.Current.Response.AddHeader("Content-Disposition", "attachment; filename=" + fileToDownload.Name)
                    HttpContext.Current.Response.AddHeader("Content-Length", fileToDownload.Length.ToString())
                    HttpContext.Current.Response.ContentType = ReturnExtension(fileToDownload.Extension.ToLower())
                    HttpContext.Current.Response.TransmitFile(fileToDownload.FullName)
                    HttpContext.Current.ApplicationInstance.CompleteRequest()
                    Directory.Delete("C:\temp_" & confirm, True)
} finally {
    System.IO.File.Delete(fileToDownload.FullName)
} 
```

或者这样做：

您可以将 zip 文件内容读入内存流，删除文件然后将内存流推送到响应缓冲区。我能看到的唯一问题是下载失败并且他们想再次尝试获取它。无论如何，这里有一篇文章向您展示如何处理文件和内存流并将其推送到响应缓冲区[http://www.c-sharpcorner.com/UploadFile/jhblankenship/DownloadingFromMemStream11262005060834AM/DownloadingFromMemStream.aspx](http://www.c-sharpcorner.com/UploadFile/jhblankenship/DownloadingFromMemStream11262005060834AM/DownloadingFromMemStream.aspx)

# c++ - 操作模板？

> ID：12076306
> 
> 赞同：2
> 
> 时间：2012-08-22T15:17:41.807
> 
> 标签：c++

有没有办法做这样的伪代码（顺便说一句，我知道我不能使用模板来做到这一点，这只是为了说明）：

```
template<operator Op>
int operator Op (int a, number b) {
    return (a Op to_int(b));
} 
```

你的主旨是正确的。目前我使用了很多重载来做到这一点，但它太重复了。我尝试使用 void* 指针（用于函数 args）并最终传递运行时类型 ID 信息，但代码似乎过于复杂。任何其他解决方案....

谢谢你的想法

我正在尝试编写更少被覆盖的方法...我必须为 +,-,/,* 编写 12 ..更不用说我想覆盖的其余操作了。

让我给你更具体的例子，我想少重复：

```
scalar operator Op (scalar a, string b) {..Op..}
scalar operator Op (scalar a, number b) {..Op..}
scalar operator Op (scalar a, scalar b) {..Op..} 
```

处理方式不同，但是当我必须在其中进行计算时，除了操作员不同外，它是相同的。所以我不会做 12 个重载方法，而是做 3 个。里面的代码可能比我的第一个插图要长，抱歉。

我想我找到了一个解决方案： [http](http://en.wikipedia.org/wiki/Barton-Nackman_trick) ://en.wikipedia.org/wiki/Barton-Nackman_trick 或者 boost libs nevsan 指出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T15:44:42.277

我认为你可以用宏来帮助做到这一点：

```
#define DEFINE_NUMBER_OP(op) \
int operator op (int a, number b) { \
    return (a op to_int(b));\
}\
\
int operator op (number a, int b) { \
    return (to_int(a) op tb);\
}\
\
int operator op (number a, number b) { \
    return <generic code to do op on numbers>;\
}\
\ 
```

然后你使用它：DEFINE_NUMBER_OP(+);

但我会考虑重新考虑你的方法。*不要*自动让你的用户混合不同的类型，而是强制他们明确指出他们想要的数学。只支持`number OP number`运算符而不是隐式支持一堆 int 操作。

编辑：更详细一点，当您开始支持许多隐式运算符时，很容易犯错误并执行可能需要数小时或数天才能调试的不需要的操作，而不是一次编写代码并明确指示您的意图（记住你只需要写一次你的意图，人们每次阅读代码时都能清楚地看到你的意思，直到时间结束）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:47:44.593

这可能对您的情况有所帮助，也可能无济于事，但 checkout boost [operator](http://www.boost.org/doc/libs/1_51_0/libs/utility/operators.htm)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T15:48:07.813

这实际上可能是宏的任务：

```
#define DEFINE_OPERATOR_( op, res, lhs, rhs, ltr, rtr ) \
   res operator##op( lhs l, rhs r ) { return ltr op rtr; }
#define DEFINE_OPERATOR_L( op, res, lhs, rhs ) \
   DEFINE_OPERATOR_( op, res, lhs, rhs, to_int(lhs), rhs )
#define DEFINE_OPERATOR_R( op, res, lhs, rhs ) \
   DEFINE_OPERATOR_( op, res, lhs, rhs, lhs, to_int(rhs) )
#define DEFINE_OPERATOR_BOTH( op, mytype, othertype ) \
   DEFINE_OPERATOR_L( op, othertype, mytype, othertype ) \
   DEFINE_OPERATOR_R( op, othertype, othertype, mytype )

DEFINE_OPERATOR_BOTH( *, number, int );
DEFINE_OPERATOR_BOTH( /, number, int );
//...

#undef DEFINE_OPERATOR_BOTH
#undef DEFINE_OPERATOR_L
#undef DEFINE_OPERATOR_R
#undef DEFINE_OPERATOR_ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T15:24:05.103

最后，您定义了一个函数名。所以没有严格的语言方法来做到这一点。

不过，这可能可以通过使用预处理器来完成。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-22T15:28:51.740

### 免责声明 - 我反对这一点：

```
struct A
{
    operator int() {return 0;}
}; 
```

当您尝试执行诸如`1+a`(where `a`is an `A`) 之类的操作时，演员表将是隐式的。

另外，您不再需要该`to_int`功能。

## 不要这样做

# linux - 为什么 munmap 需要长度作为参数？

> ID：12076308
> 
> 赞同：12
> 
> 时间：2012-08-22T15:17:45.153
> 
> 标签：linux, kernel, mmap

我想知道，为什么映射内存的大小应该是一个传入的参数，因为从同一个地址开始的映射不能超过一个（可以吗？），为什么 linux 内核不会同时记录起始地址和长度，但让用户空间程序记住它们。

我的意思是，为什么不呢，只是使用起始地址作为主键来存储信息树。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T15:28:06.873

一个可以`map`，比如说，5 页，然后`unmap`是其中的一页。并且有关要取消映射的页面的信息作为地址和长度传递，其中长度是页面大小的倍数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-22T15:31:20.667

您可以`munmap`使用之前映射的内存地址子范围。例如：

```
#include <stdio.h>
#include <sys/mman.h>
#include <unistd.h>

int main()
{
    int pagesize = sysconf(_SC_PAGESIZE);
    char *addr = mmap(NULL, 4 * pagesize, PROT_READ | PROT_WRITE, MAP_PRIVATE | MAP_ANONYMOUS, -1, 0);
    addr[pagesize] = 'X';
    munmap(addr, pagesize);

    printf("%c\n", addr[pagesize]);
} 
```

# javascript - 在哪里放置资源特定的逻辑

> ID：12076309
> 
> 赞同：10
> 
> 时间：2012-08-22T15:17:45.717
> 
> 标签：javascript, rest, angularjs

你能帮我考虑一下在AngularJS中放置资源（服务）特定业务逻辑的位置吗？我觉得在我的资源上创建一些类似模型的抽象应该很棒，但我不确定如何。

接口调用：

```
> GET /customers/1
< {"first_name": "John", "last_name": "Doe", "created_at": '1342915200'} 
```

资源（在 CoffeScript 中）：

```
services = angular.module('billing.services', ['ngResource'])
services.factory('CustomerService', ['$resource', ($resource) ->
  $resource('http://virtualmaster.apiary.io/customers/:id', {}, {
    all: {method: 'GET', params: {}},
    find: {method: 'GET', params: {}, isArray: true}
  })
]) 
```

我想做类似的事情：

```
c = CustomerService.get(1)
c.full_name()
=> "John Doe"

c.months_since_creation()
=> '1 month' 
```

非常感谢您的任何想法。亚当

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-22T17:35:36.337

The best place for logic that needs to be invoked on an instance of a domain object would be a **prototype of this domain object**.

You could write something along those lines:

```
services.factory('CustomerService', ['$resource', function($resource) {

    var CustomerService = $resource('http://virtualmaster.apiary.io/customers/:id', {}, {
        all: {
            method: 'GET',
            params: {}
        }
        //more custom resources methods go here....
    });

    CustomerService.prototype.fullName = function(){
       return this.first_name + ' ' + this.last_name;
    };

    //more prototype methods go here....

    return CustomerService;    

}]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T13:54:55.033

您可能想看看我对相关主题的[这个 SO 问题的回答。](https://stackoverflow.com/a/17459956/540776)

使用这样的解决方案，特定领域的逻辑进入自定义领域实体类（特别是它的原型）。

# node.js - nodejs 的 spawn 和 exec 使用 pdf2swf

> ID：12076310
> 
> 赞同：1
> 
> 时间：2012-08-22T15:17:45.670
> 
> 标签：node.js, flash, exec, spawn, pdf2swf

我希望有人可以帮助解决这个问题，因为我自己没有得到它。

我编译了最新版本的 pdf2swf，一切正常，除了我想在 NodeJS 中将它用作衍生的 child_process 时。

当我使用与 exec 相同的命令时，它再次起作用。提供一些代码示例：

```
// convert a pdf to swf using exec (works)
var tmpSwfLocation = docsDir+'/Paper.pdf.swf';
var pdf2swf = cp.exec('pdf2swf '+tmpPDFLocation+' -o '+tmpSwfLocation+' -G -v -f -T 9 -t -j '+quality+' -s subpixels='+resolution+' -s storeallcharacters -s poly2bitmap', function(err, stdout, stderr){
  console.log(stdout);
  console.log(stderr);
  var end = Date.now();
  console.log('pdf2swf: SWF created in '+((end-start) /1000)+' seconds');
});

// convert a pdf to swf (does not work)
var tmpSwfLocation = docsDir+'/Paper.pdf.swf';
var pdf2swf = cp.spawn('pdf2swf', ['-G','-v','-f','-T 9', '-t', '-j '+quality,'-s subpixels='+resolution,'-s storeallcharacters', '-s poly2bitmap',tmpPDFLocation, '-o '+tmpSwfLocation],{setsid:true});
pdf2swf.stdout.on('data',function(output){
  console.log("pdf2swf:"+output)
});
pdf2swf.stderr.on('data',function(output){
  console.log("pdf2swf ERROR:"+output);
});
pdf2swf.stdout.on('end', function(output){
  var end = Date.now();
  console.log('pdf2swf: SWF created in '+((end-start) /1000)+' seconds');
}); 
```

当 child_process 试图将数据写入文件时，spawn 进程最终中断：

```
pdf2swf:NOTICE  Writing SWF file  /home/bitnami/flipdoc/ec2-instances/worker/pdf_test/test_directory/test-Testfile_31MB_26Pages.pdf_0/docs/Paper.pdf.swf
pdf2swf:FATAL   Could not create " /home/bitnami/flipdoc/ec2-instances/worker/pdf_test/test_directory/test-Testfile_31MB_26Pages.pdf_0/docs/Paper.pdf.swf". 
```

使用 exec，该过程成功完成

```
pdf2swf:NOTICE  Writing SWF file  /home/bitnami/flipdoc/ec2-instances/worker/pdf_test/test_directory/test-Testfile_31MB_26Pages.pdf_0/docs/Paper.pdf.swf 
```

和一个现有的文件。

附加信息：在整个过程之前，我在整个“test_directory”上执行递归 chmod 777。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T11:20:14.290

自己解决了......永远不要（甚至不考虑它......）在生成过程的参数中使用空格。如果您有一个 param=value 参数可以在两者之间使用空格，只需将它们与其他所有参数一起在数组中排列。

上面 spawn 的源代码现在看起来像这样：

```
var pdf2swf = cp.spawn('pdf2swf', [tmpPDFLocation, '-o',tmpSwfLocation,'-G','-vvv','-f','-T','9', '-t', '-j',quality,'-s','subpixels='+resolution,'-s','storeallcharacters', '-s','poly2bitmap']); 
```

# css - 一系列元素的 CSS nth-child

> ID：12076313
> 
> 赞同：6
> 
> 时间：2012-08-22T15:17:56.107
> 
> 标签：css, css-selectors

我对使用 nth-child() 有点陌生，因此将不胜感激任何帮助。我正在尝试在我的 css 文件中使用它，而不是直接在 html 中使用它。下面是我的代码 - 我想突出显示填充到此列表中的前四个项目。

```
 <div class="icdcode-selector row-fluid " icdcode="@icd.ICDCode" orderID="@x" icdID="@icd.ID">
            <div class="span2 icdcode-sortable-handle">
                <div class="row-fluid">
                    <div class="span6">
                        <i class="icon-align-justify"></i>
                    </div>
                    <div class="span6">
                        <span class="icd-name">@icd.ICDCode</span>
                    </div>
                </div>
            </div>
            <div class="span9">
                @Html.TextAreaFor(m => icd.UserText, new { @class = "span11", id = "icd_" + Model.Encounter.DictationID.ToString() + "_" + icd.ICDCode.Replace('.', '-'), icd = icd.ICDCode })
            </div>
            <div class="span1">
                <a href="#" class="btn btn-mini icd-remove"><i class="icon-remove"></i></a>
            </div>
        </div> 
```

我正在尝试使用这样的类：`.primary-billing .div:nth-child(-n+4)`，但它似乎无法正常工作。

请帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T17:06:15.057

了解 nth-child 的最佳指南是这个网站： http: [//nthmaster.com/](http://nthmaster.com/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-22T15:21:57.857

您只需将*.div*更改为*div*（它是一个元素，而不是一个类）。

见这里：http: [//jsfiddle.net/sQCCA/](http://jsfiddle.net/sQCCA/)

# jquery - Scrollorama 动画在相对定位的 div 中不起作用

> ID：12076316
> 
> 赞同：2
> 
> 时间：2012-08-22T15:18:00.787
> 
> 标签：jquery, html, css

我有一个使用 Scrollorama 脚本编写的基本 Parallax 网站的前两页，但是每个“页面”都位于其自己的 div 中，然后该 div 中的每个元素都是动画的。如果包含的 div 设置为绝对定位，所有内部元素都会像我告诉他们的那样移动，但是整个页面位于站点的左侧。

示例：[http ://bettondesignwork.co.uk/tim/Cayton2/](http://bettondesignwork.co.uk/tim/Cayton2/)

如果我通过使用使包含的 div 相对定位来使页面居中

```
$('#shop') .css({'position': relative}); 
```

然后内容站点在中心但不会动画。

示例：[http ://bettondesignwork.co.uk/tim/Cayton2-1/](http://bettondesignwork.co.uk/tim/Cayton2-1/)

有没有办法将绝对 div 定位在页面的中心，或者让所有元素在相对定位的 div 内保持动画？

对不起，有点啰嗦，我希望它有意义。

非常感谢！

# html - 为什么只有 firefox 在使用 PHP 时表现得像我想要的那样？

> ID：12076321
> 
> 赞同：0
> 
> 时间：2012-08-22T15:18:13.030
> 
> 标签：html, css, cross-browser, browser

## 已解决：编辑为编码 -> 使用 UTF-8 编码而不使用 BOM。

在我开始在我的网站上编码 php 之前，它在所有浏览器上看起来都很好。所以我犯了一个常见的初学者错误，只是在 mozilla firefox 中编写我所有的 php 内容......现在一切都一团糟。

如果我删除所有 php 代码，一切都会再次恢复正常，但这不是解决方案。

**在火狐中：**

![火狐](../Images/4b7eb08a98cd8e49eab4adbe0e229de1.png)

*一切看起来都应该如此，一切都很完美。*

**在谷歌浏览器中：**

![铬合金](../Images/77fdfbfb1e091e04847610aa6223c23c.png)

*   *顶部和导航 div(position:fixed) 之间的边距出现了。*

*   *带有帖子的内容已超出页脚*

**在 Safari 中：**

![苹果浏览器](../Images/5f4773d6a543f89e9a3f68e51e200f23.png)

*   *顶部和导航 div(position:fixed) 之间的边距出现了。*

*   *带有帖子的内容已超出页脚*

**在最糟糕的情况下，所有 IE：**

![在此处输入图像描述](../Images/fc0de8b98fc29ce62f3a9dcd6f7fa207.png)

*   *导航 div 不再像 position: fixed*

*   *Youtube div 位于页面底部*

*   *文字更粗*

*   *在一些 div 上添加了高度*

*   *jquery 滑块不起作用，上面有一个边距顶部和底部*

为什么浏览器之间的差异如此之大？有什么好的解释吗？这非常令人沮丧，因为我正要完成这项工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T15:24:21.093

错误出现在 PHP 脚本输出的 HTML 中，而不是 PHP 本身。因此，我会查看您网页的输出源代码，看看生成了什么以及它与您之前拥有的平面 HTML 网站有何不同。问题可能是标签丢失/损坏，因此通过 W3C 验证器运行整个内容（PHP 输出的 HTML 源代码），您可能会发现 PHP 脚本的哪一部分给您提供了错误/损坏的 HTML。

# mysql - 给定两个具有公共字段 F 的表 A 和 B，我如何有效地找到 A 中不存在于 B 中的所有 F？

> ID：12076323
> 
> 赞同：1
> 
> 时间：2012-08-22T15:18:19.760
> 
> 标签：mysql, sql

我有一个投票系统，我正在尝试为 MySQL 编写一个查询，该查询将检测哪些投票已完成，以便可以将电子邮件发送给投票的创建者。当（1）他们的时间用完（已经很容易解决）或（2）当所有选民都投票时，投票就完成了。

有两个表与此相关。第一个表是“votes”，其中描述了每个投票并具有唯一的“vote_id”。第二张表是“票”。在创建投票时，每个参与者都创建了一张票（其中包含一些身份验证信息）。每张票都有一个“vote_id”字段，对应于“votes”表中的字段。所以基本上，当人们投票时，他们相应的票就会从票表中删除。这意味着给定“vote_id”的“tickets”中的行数对应于未投票的人数。

起初我去做这样的事情：

```
SELECT votes.vote_id
FROM votes, tickets
WHERE votes.vote_id=tickets.vote_id
AND (votes.completion_timestamp < NOW())
HAVING (COUNT(tickets.vote_id) = 0) 
```

但后来我意识到......因为“votes.vote_id=tickets.vote_id”行......我想这意味着没有未完成票的投票将被忽略。我可以想到很多低效的方法来做到这一点，但我想在 MySQL 中有一种方法可以做到这一点？

问题的概括总结：给定两个具有公共字段 F 的表 A 和 B，我如何找到 A 中不存在于 B 中的所有 F？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T15:23:45.903

要在 MySQL 中*有效地*做到这一点，需要一个技巧：

```
select v.*
from votes v
where votes.completion_timestamp < NOW() and
      not exists (select 1 from tickets t where t.vote_id = v.vote_id) 
```

您拥有的 SQL 不太正确。以下版本应该可以工作：

```
SELECT distinct votes.vote_id
FROM votes left outer join
     tickets
     on votes.vote_id=tickets.vote_id
where votes.completion_timestamp < NOW()) and
      tickets.vote_id is null 
```

在 MySQL 文档 (http://dev.mysql.com/doc/refman/5.0/en/subquery-optimization-with-exists.html) 中广泛讨论了 EXISTS 与 IN 与子查询的使用。与左外连接的区别在于两件事。加入策略，增加 I/O。

我不知道 JOIN 策略是否与左外连接不同。我推测它不应该比 EXISTS 版本更糟。但是，第二点是左外连接创建了一个可能使行数成倍增加的输出集。EXISTS 版本无法做到这一点。

阅读文档后，以下内容可能会更有效：

```
select v.*
from votes v
where votes.completion_timestamp < NOW() and
      not exists (select 1 from tickets t where t.vote_id = v.vote_id limit 1) 
```

限制应该使超出遇到的第一行的任何评估短路。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T15:23:10.803

像这样的东西会返回你期望的结果：

```
select votes.vote_id
from votes
    left outer join tickets on votes.vote_id = tickets.vote_id
where tickets.ticket_id is null or votes.completion_timestamp < NOW() 
```

这假定这`tickets.ticket_id`是`tickets`表的主键并且不能为 NULL。
此查询通过执行从投票到票证的左外连接来利用这一事实，条件`tickets.ticket_id`必须为 NULL。`tickets`仅当该投票表中没有一张票时才会发生这种情况。

# c++ - 使用 qt 创建者的 SFML 解析错误

> ID：12076325
> 
> 赞同：0
> 
> 时间：2012-08-22T15:18:28.040
> 
> 标签：c++, qt, qt-creator, sfml

我正在尝试使用 qt creator 设置 SFML，这是我的 .pro 文件：

```
TEMPLATE = app
CONFIG += console
CONFIG -= qt

SOURCES += main.cpp

INCLUDEPATH += F:/SFML-1.6/include
  LIBS += "F:/SFML-1.6/lib/libsfml-graphics-s-d.a"
          "F:/SFML-1.6/lib/libsfml-window-d.a"
          "F:/SFML-1.6/lib/libsfml-system-s-d.a"
} 
```

我正在尝试运行以下代码，该代码经过测试并且在代码块上运行时没有错误或警告：

```
#include <SFML/System.hpp>
#include <SFML/Window.hpp>
#include <iostream>
using namespace std;
using namespace sf;

Window myWin(VideoMode(860, 600, 32), "Hello sfml!");
const Input& in1 = myWin.GetInput();

int main(int argc, char** argv)
{
    while(myWin.IsOpened()) {
        Event event1;
        while(myWin.GetEvent(event1)) {
            if(in1.IsKeyDown(Key::J)) {
                myWin.Close();
            }
        }
        myWin.Display();
    }
} 
```

但是我得到

```
c:\Documents and Settings\Stefan.MONA-H6H4KPUJNF\Desktop\C++\SfmlLearning\SfmlLearning.pro:9: error: Parse Error ('"F:/SFML-1.6/lib/libsfml-window-d.a"') 
```

我明白这意味着什么，但这没有任何意义，我在那个确切的目录中有文件，我仔细检查了。这是安装库的目录：

![在此处输入图像描述](../Images/e8fe8f45323a060486f44fe3ac8687cc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:44:16.117

You need to add line continuation marks at the end of lines 8 and 9 of your .pro-file. Qmake does expect all the statements to be in one line:-(

# linux - 如何在redhat linux上安装maven

> ID：12076326
> 
> 赞同：52
> 
> 时间：2012-08-22T15:18:29.897
> 
> 标签：linux, maven, redhat, yum

注意：最初发布时，我试图安装 maven2。由于主要答案是针对 maven3 我更新了标题。问题的其余部分保持原样。

我正在尝试使用以下命令在 redhat linux 机器上安装 maven2

```
 yum install maven2 
```

但是yum似乎找不到maven2。

```
No package maven2 available 
```

我遇到过有关此主题的其他帖子，但以下帖子的答案建议添加存储库。我添加了所说的存储库，但在添加它们后遇到了错误。

[如何将 Maven 安装到 Red Hat Enterprise Linux 6 中？](https://stackoverflow.com/questions/6298865/how-to-install-maven-into-red-hat-linux-enterprise-addition-6)

我只能通过命令行访问这个框，所以简单地从他们的网站下载 maven 对我来说很困难。

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-08-22T16:07:01.447

转到[mirror.olnevhost.net/pub/apache/maven/binaries/](http://mirror.olnevhost.net/pub/apache/maven/binaries/)并检查最新的 tar.gz 文件是什么

假设它是例如 apache-maven-3.2.1-bin.tar.gz，来自命令行；你应该能够简单地做：

```
wget http://mirror.olnevhost.net/pub/apache/maven/binaries/apache-maven-3.2.1-bin.tar.gz 
```

然后继续安装它。

**更新：**添加完整说明（从下面的评论中复制）

1.  从要将 maven 提取到的目录运行上面的命令（例如 /usr/local/apache-maven）
2.  运行以下命令来提取焦油：

    ```
    tar xvf apache-maven-3.2.1-bin.tar.gz 
    ```

3.  接下来添加环境变量，例如

    `export M2_HOME=/usr/local/apache-maven/apache-maven-3.2.1`

    `export M2=$M2_HOME/bin`

    `export PATH=$M2:$PATH`

4.  核实

    ```
    mvn -version 
    ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-04-02T07:50:07.667

我制作了以下脚本：

```
#!/bin/bash

# Target installation location
MAVEN_HOME="/your/path/here"

# Link to binary tar.gz archive
# See https://maven.apache.org/download.cgi?html_a_name#Files
MAVEN_BINARY_TAR_GZ_ARCHIVE="http://www.trieuvan.com/apache/maven/maven-3/3.3.9/binaries/apache-maven-3.3.9-bin.tar.gz"

# Configuration parameters used to start up the JVM running Maven, i.e. "-Xms256m -Xmx512m"
# See https://maven.apache.org/configure.html
MAVEN_OPTS="" # Optional (not needed)

if [[ ! -d $MAVEN_HOME ]]; then
  # Create nonexistent subdirectories recursively
  mkdir -p $MAVEN_HOME

  # Curl location of tar.gz archive & extract without first directory
  curl -L $MAVEN_BINARY_TAR_GZ_ARCHIVE | tar -xzf - -C $MAVEN_HOME --strip 1

  # Creating a symbolic/soft link to Maven in the primary directory of executable commands on the system
  ln -s $MAVEN_HOME/bin/mvn /usr/bin/mvn

  # Permanently set environmental variable (if not null)
  if [[ -n $MAVEN_OPTS ]]; then
    echo "export MAVEN_OPTS=$MAVEN_OPTS" >> ~/.bashrc
  fi

  # Using MAVEN_HOME, MVN_HOME, or M2 as your env var is irrelevant, what counts
  # is your $PATH environment.
  # See http://stackoverflow.com/questions/26609922/maven-home-mvn-home-or-m2-home
  echo "export PATH=$MAVEN_HOME/bin:$PATH" >> ~/.bashrc
else
  # Do nothing if target installation directory already exists
  echo "'$MAVEN_HOME' already exists, please uninstall existing maven first."
fi 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-07-26T16:47:49.543

几乎和其他人说的一样，但使用“~/.bash_profile”并一步一步（对于初学者）：

1.  移动到主文件夹并为 Maven 工件创建一个新文件夹：
    *   `cd ~ && mkdir installed-packages`
2.  转到[https://maven.apache.org/download.cgi](https://maven.apache.org/download.cgi)并 wget 最新的工件：
    *   如果您没有安装 wget：`sudo yum install -y wget`
    *   `cd ~/installed-packages`
    *   `wget http://www-eu.apache.org/dist/maven/maven-3/3.5.0/binaries/apache-maven-3.5.0-bin.tar.gz`
3.  解压下载的文件：
    *   `tar -xvf apache-maven-3.5.0-bin.tar.gz`
4.  创建未压缩文件的符号链接：
    *   `ln -s ~/installed-packages/apache-maven-3.5.0 /usr/local/apache-maven`
5.  编辑`~/.bash_profile`（这是环境变量通常存储的地方）：
    *   `vi ~/.bash_profile`
    *   添加变量：（`MVN_HOME=/usr/local/apache-maven` *在定义 PATH 变量之前执行此操作）*
        *   （不懂`vi`工具的朋友：`i`按键开启插入模式）
    *   转到定义 PATH 变量的行的末尾并附加以下内容：`:$MVN_HOME:$MVN_HOME/bin`
    *   保存更改
        *   （不懂`vi`工具的朋友：按`esc`键退出插入模式，`:wq!`保存退出文件）
6.  重新加载环境变量：
    *   `source ~/.bash_profile`
7.  确认 maven 命令现在可以正常工作：
    *   `mvn --help`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-07-25T09:50:51.047

在 Amazon Linux / redhat 中安装 maven

-->`sudo wget http://repos.fedorapeople.org/repos/dchen/apache-maven/epel-apache-maven.repo -O /etc/yum.repos.d/epel-apache-maven.repo`

-->`sudo sed -i s/\$releasever/6/g /etc/yum.repos.d/epel-apache-maven.repo`

-->`sudo yum install -y apache-maven`

--> `mvn --version`

输出看起来像

* * *

> Apache Maven 3.5.2 (138edd61fd100ec658bfa2d307c43b76940a5d7d; 2017-10-18T07:58:13Z) Maven 主页：/usr/share/apache-maven Java 版本：1.8.0_171，供应商：Oracle Corporation Java 主页：/usr/lib/jvm/ java-1.8.0-openjdk-1.8.0.171-8.b10.amzn2.x86_64/jre 默认语言环境：en_US，平台编码：UTF-8 操作系统名称：“linux”，版本：“4.14.47-64.38.amzn2。 x86_64”，拱：“amd64”，家庭：“unix”

***如果抛出与java相关的错误，请按照以下步骤更新java 8 ***

***在亚马逊 linux/redhat 中安装 java 8***

-->`yum search java | grep openjdk`

-->`yum install java-1.8.0-openjdk-headless.x86_64`

-->`yum install java-1.8.0-openjdk-devel.x86_64`

-->`update-alternatives --config java #pick java 1.8`然后按 1

-->`update-alternatives --config javac #pick java 1.8`然后按 2

**谢谢你**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-31T10:32:59.213

有时即使在正确设置 M2_HOME 和 PATH 参数后，您也可能会收到“线程“主”java.lang.NoClassDefFoundError：org/codehaus/classworlds/Launcher 中的异常”。

这个例外是因为您的 JDK/Java 版本需要更新/安装。

# sql - SQL 中的循环突然停止（退出内存）

> ID：12076328
> 
> 赞同：0
> 
> 时间：2012-08-22T15:18:39.960
> 
> 标签：sql, sql-server, tsql, while-loop

由于许多人问我要达到什么目标 - 这是一个解释。

我必须向 Benfits 运营商提供文件馈送。文件格式为 Member1 Record、Benefits1 记录、Benefits2 记录等。Member2 Record、Benefits1、Benefits2 等。

我这样做的方法是获取所有成员的记录并将其放入`@member table`. 然后我得到了所有成员的所有福利并放入`@Medical_nonHMO table`.

然后我循环遍历，获取第一条`@member`记录（只有一条记录）和相应的`@Medical_nonHMO`记录（**可能超过 1**条）。然后我从中获取第二个成员记录`@member`和相应的福利记录`@Medical_nonHMO`，依此类推。

是的，我已经检查了 的值`@count`。

```
 Select Max(idx) and select count(*) are returning the same value 
```

我不确定如何使用游标来实现这一点。

我有大约 300 条会员记录和大约 400 多条福利记录。它适用于大约 200 条记录，然后突然结束，有时会出现 -'Out of Memory' 错误。

我有以下循环。

`@member,@medical_nonHMO`是温度。填充有值的表。

`@tempcounttable`有 304 行，即`@count`

我正在遍历每个会员和会员福利

我面临的问题是，即使在执行查询之后，它也只循环了 174 次。

'Out of Loop' 不会被打印出来。

但这种情况只是偶尔发生。有时循环完全执行并打印“Out of Loop”

```
DECLARE @tempCounttable TABLE
(
idx smallint Primary Key IDENTITY(1,1),
SSN varchar(9),
SSN_dep varchar(9),
fname varchar(25)
)

INSERT into @tempCounttable 
select SubscriberSSN,   -- Employee SSN
   MemberSSN,   -- Dependent SSN
   FirstName
 from @member

select @count =  MAX(idx) from @tempCounttable
Set @i = 1
While(@i <= @count) 
Begin

  select * from @member
 where SubscriberSSN = (select SSN from @tempCounttable where idx = @i)
and MemberSSN = (select SSN_dep  from @tempCounttable  where idx = @i)
    and FirstName = (select fname from @tempCounttable  where idx = @i) 
```

* * *

```
 select * from @Medical_nonHMO
   where SSN = (select SSN from @tempCounttable where idx = @i)
    and SSN_dependent = (select SSN_dep from @tempCounttable where idx = @i)
     and fname = (select fname from @tempCounttable where idx = @i) 
```

* * *

```
Set @i = @i + 1
select @i           
end

 select 'OUT OF LOOP' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:34:17.453

我假设`@count`返回 174 行而不是您期望的 304 行，因此是 174 次迭代。表是否在其他地方被修改？`@count`此外，请尝试在每次运行查询之前打印出来，以便为您提供指标。

作为旁注，我个人不明白为什么这是一个while循环？由于您只是选择数据，因此您可以加入`@member`并一起：`@tempCounttable`

```
SELECT * FROM @member m
 INNER JOIN @tempCounttable t ON m.memberSSN = t.SSN_dep: 
```

您还可以过滤 fname 和 SSN。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T17:17:53.217

请使用以下内容验证您关于@count 是否正确的断言

```
select @count =  MAX(idx) from @tempCounttable
Set @i = 1
While(@i <= @count) 
Begin
  select SSN from @tempCounttable where idx = @i
  Set @i = @i + 1
  select @i           
end
select 'OUT OF LOOP' 
```

# sql-server-2008 - 在结果集中的单列中交错值

> ID：12076332
> 
> 赞同：1
> 
> 时间：2012-08-22T15:18:50.587
> 
> 标签：sql-server-2008, tsql

假设我们在 SQL 表的 2 列中有这样的值

```
HM        BOX_NO

A          1
A          2
B          2
B          3
C          3 
```

我想像下面这样输出这些表值我该怎么做？

```
A
1
2
B
2
3
C
3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:30:54.397

我假设您希望 HM 中的不同值与 BOX_NO 中的值出现在 HM 的每个值下方。

你可以这样做。可能比您预期的要复杂：

```
select val
from ((select distinct hm as val, 1 as ishm,
              dense_rank() over (order by HM) as ranking
       from t
      ) union all
      (select cast(box_no as varchar(255)), 0 as ishm,
              dense_rank() over (order by HM) as ranking
       from t
      )
     ) a
order by ranking, ishm desc, val 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T15:35:38.657

```
CREATE TABLE #t
    ([HM] varchar(1), [BOX_NO] int);

INSERT INTO #t
    ([HM], [BOX_NO])
VALUES
    ('A', 1),
    ('A', 2),
    ('B', 2),
    ('B', 3),
    ('C', 3);

SELECT  item
FROM (
    SELECT  DISTINCT HM as item, HM as display_order
    FROM    #t  
    UNION ALL
    SELECT  CAST([BOX_NO] AS VARCHAR(10)), HM + CAST([BOX_NO] AS VARCHAR(10))as display_order
    FROM    #t  
) a
ORDER BY display_order 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T16:42:27.630

```
SELECT
  Value = COALESCE(CAST(BOX_NO AS varchar(10)), HM)
FROM (
  SELECT          HM, BOX_NO FROM atable
  UNION ALL
  SELECT DISTINCT HM, NULL   FROM atable
) s
ORDER BY HM, BOX_NO
; 
```

[这是SQL Fiddle](http://sqlfiddle.com/#!3/682c1d/1)的演示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T17:03:40.973

试试这个

```
Declare @t Table([HM] varchar(1), [BOX_NO] int);

INSERT INTO @t([HM], [BOX_NO])
VALUES
    ('A', 1),
    ('A', 2),
    ('B', 2),
    ('B', 3),
    ('C', 3);

;With Cte As(
Select 
      Rn
     ,HM
    ,BOX_NO
    ,HM_Grouping = HM + Cast(Rn As Varchar(1))
From (Select Rn = Row_Number() Over(Partition By HM Order by HM),*
      From @t)x)
Select HM 
From
    (Select HM,Position = HM
    From Cte Where Rn = 1
    Union All
    Select Cast(BOX_NO As Varchar(1)),HM_Grouping
    From Cte)x
Order by Position 
```

**结果**

```
HM
A
1
2
B
2
3
C
3 
```

# internet-explorer - AngularJS IE8 问题

> ID：12076333
> 
> 赞同：0
> 
> 时间：2012-08-22T15:18:52.773
> 
> 标签：internet-explorer, internet-explorer-8, angularjs

我一直无法专门在 IE8 中呈现列表。所有其他浏览器都按预期执行以下代码，但是，IE8 完全忽略了该功能。非常感谢任何提示、建议和/或解决方案，干杯。

```
alert("workflow.js"+ " this call goes off in IE8");

$scope.makeAndGetList = function(list) {
    //todo: lj: IE8 doesn't make it here
    //alert("workflow.js"+ " no IE");
    var parts = list.split('.'),
        current = $scope.workflow;

    _.each(parts, function(part, index) {
        if (current[part] == undefined) {
            current[part] = (index == parts.length - 1) ? [] : {};
        }
        current = current[part];
        //todo: lj: IE8 doesn't make it in here
        // app.appAlert("workflow.js"+ " line 19");
    });

alert("workflow.js - this functions correctly executes in IE8"); 
```

这是所要求的 HTML：

```
<sa-list list="makeAndGetList('areas_of_need')" edit="true" model="areas_of_need" array-mode="true">
    <sa-lookup style="multiselect" override="false" list="areas_of_need.terms" model="areas_of_need" model-key="need" label="{{locale.iprc.areas_of_strengths_and_needs.needs}}"></sa-lookup>
</sa-list> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T02:11:28.507

不确定这是否是您的问题（您可以发布带有指令的 jsfiddle 吗？），但这是一种可能性。IE 8 只能将角度指令作为属性（而不是元素）来处理。幸运的是，将 angular 元素更改为属性很容易。例如，对于指令“saList”，其中 html 表示`<sa-list>`，将 html 重写为`<div sa-list>`（并确保您的指令具有属性`restrict: 'A'`，而不是`restrict: 'E'`）。在此处查看示例（适用于 IE 8）：http: [//jsfiddle.net/dannystaten/hQn9F/](http://jsfiddle.net/dannystaten/hQn9F/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T17:02:39.787

看看我为 angular-ui 项目编写的[ieshiv 。](http://angular-ui.github.com/)为您提供一种简单的合并方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T18:23:43.267

也尝试升级到 Angular UI Bootstrap 的 0.2.0 版本。我在“警报”控制方面遇到了类似的问题。将其升级到 0.2.0 并将其用作属性后解决了我的问题

# android - 从缓存（SQLITE）中获取详细信息并在 ANDROID 中显示

> ID：12076335
> 
> 赞同：0
> 
> 时间：2012-08-22T15:18:56.640
> 
> 标签：android, sqlite, caching, cursor, sqliteopenhelper

我的数据库中有两个表，我的代码具有通过检查任何表中的存在来获取任何表的详细信息的逻辑。这发生在两个班级。当我第一次启动应用程序时，它会从缓存中获取所有详细信息，直到某个时间然后停止。在另一个类中，相同的逻辑运行但工作正常。我几乎花了两天时间解决它，但没有运气。这里附上我的 Logcat 和代码。请有人可以帮忙。谢谢

SQLITEHELPER 类

```
public MysqliteHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
         //this.myDatabase = this.getWritableDatabase();
    }

    /*
     * public void SQLiteDatabase(){
     * 
     * }
     */
    @Override
    public void onCreate(SQLiteDatabase database) {
        database.execSQL(STORE_CACHE_BOOK_TABLE_CREATE);
        database.execSQL(STORE_CACHE_COMMENTS_TABLE_CREATE);
        database.execSQL(USER_LOGIN_CREDENTIALS_TABLE_CREATE);
        database.execSQL(USER_LIBRARY_DETAILS_TABLE_CREATE);
        database.execSQL(USER_STORE_DETAILS);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.w(MysqliteHelper.class.getName(),
                "Upgrading database from version " + oldVersion + " to "
                        + newVersion + ", which will destroy all old data");
        // database.execSQL("DROP TABLE IF EXISTS " + StoreBookCache);
        onCreate(db);
    }

    /* Insert Values for Book_DESCRIPTION_OF_STORE */

    public void insertStoreBookDetailsIntoCache(String prod_str_Id,
            String prod_str_desc, String prod_str_Name, String prod_str_author,
            String prod_str_price, String prod_str_currency)
            throws SQLException {
        myDatabase = this.getWritableDatabase();

        Log.d("INeer'", "INSERT METHOD" + myDatabase.getPageSize());

        ContentValues contentValues = new ContentValues();
        // Put the values for Store Table.
        contentValues.put(CONST_STR_BOOK_ID, prod_str_Id);
        contentValues.put(CONST_STR_PROD_DESCR, prod_str_desc);
        contentValues.put(CONST_STR_PROD_NAME, prod_str_Name);
        contentValues.put(CONST_STR_PROD_AUTHOR, prod_str_author);
        contentValues.put(CONST_STR_PROD_PRICE, prod_str_price);
        contentValues.put(CONST_STR_PROD_CUR, prod_str_currency);

        myDatabase
                .insertOrThrow(CONST_TABLE_STORE_DETAILS, null, contentValues);

    //myDatabase.close();

    }
    public static final String Book_STR_Id = "book_str_Id";
    public static final String Book_STR_des = "book_str_des";
    public static final String Book_STR_name = "book_str_name";
    public static final String Book_STR_author = "book_str_author";
    public static final String Book_STR_price = "book_str_price";
    public static final String Book_STR_curr = "book_str_curr";

    public  Map<String, String> getStoreItemsDetails_FromCache(String Bookstrid) {
        Map<String, String> storeItemsDetails = new HashMap<String, String>();
        myDatabase = this.getReadableDatabase();
        /*final String IS_BOOK_IN_STR_CACHE_DETAILS = "SELECT  * FROM  "
            + CONST_TABLE_STORE_DETAILS + " WHERE "+ CONST_STR_BOOK_ID + "="+ Bookstrid;*/

    /*  Cursor cur = myDatabase.query(IS_BOOK_IN_STR_CACHE_DETAILS,
                new String[] { CONST_STR_BOOK_ID, CONST_STR_PROD_DESCR,
                        CONST_STR_PROD_NAME, CONST_STR_PROD_AUTHOR,
                        CONST_STR_PROD_PRICE, CONST_STR_PROD_CUR }, null, null,
                null, null, null, null);*/

        Cursor cur = myDatabase.query(CONST_TABLE_STORE_DETAILS,
                new String[] { CONST_STR_BOOK_ID, CONST_STR_PROD_DESCR,
                        CONST_STR_PROD_NAME, CONST_STR_PROD_AUTHOR,
                        CONST_STR_PROD_PRICE, CONST_STR_PROD_CUR }, CONST_STR_BOOK_ID + "="+ Bookstrid, null,
                null, null, null, null);

        if (cur.getCount() <= 0)
            return storeItemsDetails;

        cur.moveToFirst();
        while (!cur.isAfterLast()) {
            String book_storeId = cur.getString(0);
            String book_storedesc = cur.getString(1);
            String book_storename = cur.getString(2);
            String book_storeauthor = cur.getString(3);
            String book_storeprice = cur.getString(4);
            String book_storecurr = cur.getString(5);

            Log.d(MysqliteHelper.class.getName(), String.format(
                    "Fetched Book : %s and its cover location on SD Card :%s",
                    book_storeId, book_storedesc, book_storename,
                    book_storeauthor, book_storeprice, book_storecurr));
            storeItemsDetails.put(Book_STR_Id, book_storeId);// ,
                                                                    // book_storedesc,book_storename,book_storeauthor,book_storeprice,book_storecurr
            storeItemsDetails.put(Book_STR_des, book_storedesc);
            storeItemsDetails.put(Book_STR_name, book_storename);
            storeItemsDetails.put(Book_STR_author, book_storeauthor);
            storeItemsDetails.put(Book_STR_price, book_storeprice);
            storeItemsDetails.put(Book_STR_curr, book_storecurr);

            cur.moveToNext();
        }

        cur.close();
        // myDatabase.close();
        return storeItemsDetails;
    }

    /* Insert Values for Book_DESCRIPTION_OF_LIBRARY */

    public void insertLibraryBookDetailsIntoCache(String prod_lib_Id,
            String prod_lib_desc, String prod_lib_Name, String prod_lib_author,
            String prod_lib_price, String prod_lib_currency)
            throws SQLException {
        myDatabase = this.getWritableDatabase();

        ContentValues contentValues = new ContentValues();
        // Put the values for Store Table.
        contentValues.put(CONST_LIB_BOOK_ID, prod_lib_Id);
        contentValues.put(CONST_LIB_PROD_DESCR, prod_lib_desc);
        contentValues.put(CONST_LIB_PROD_NAME, prod_lib_Name);
        contentValues.put(CONST_LIB_PROD_AUTHOR, prod_lib_author);
        contentValues.put(CONST_LIB_PROD_PRICE, prod_lib_price);
        contentValues.put(CONST_LIB_PROD_CUR, prod_lib_currency);

        myDatabase.insertOrThrow(CONST_TABLE_LIBRARY_DETAILS, null,
                contentValues);
        //myDatabase.close();
    }
    public static final String Book_LIB_Id = "book_lib_Id";
    public static final String Book_LIB_des = "book_lib_des";
    public static final String Book_LIB_name = "book_lib_name";
    public static final String Book_LIB_author = "book_lib_author";
    public static final String Book_LIB_price = "book_lib_price";
    public static final String Book_LIB_curr = "book_lib_curr";
    public Map<String, String> getLibraryItemsDetails_FromCache(String BooklibId) {
        Map<String, String> libraryItemsDetails = new HashMap<String, String>();
        myDatabase = this.getReadableDatabase();
    /*   String IS_BOOK_IN_LIB_CACHE_DETAILS = "SELECT  * FROM  "
            + CONST_TABLE_LIBRARY_DETAILS + " WHERE "+ CONST_LIB_BOOK_ID +"="+ BooklibId;*/

        Cursor cur = myDatabase.query(CONST_TABLE_LIBRARY_DETAILS,
                new String[] { CONST_LIB_BOOK_ID, CONST_LIB_PROD_DESCR,
                        CONST_LIB_PROD_NAME, CONST_LIB_PROD_AUTHOR,
                        CONST_LIB_PROD_PRICE, CONST_LIB_PROD_CUR }, CONST_LIB_BOOK_ID +"="+ BooklibId , null,
                null, null, null, null);
        if (cur.getCount() <= 0)
            return libraryItemsDetails;

        cur.moveToFirst();
        while (!cur.isAfterLast()) {
            String book_libraryId = cur.getString(0);
            String book_librarydesc = cur.getString(1);
            String book_libraryname = cur.getString(2);
            String book_libraryauthor = cur.getString(3);
            String book_libraryprice = cur.getString(4);
            String book_librarycurr = cur.getString(5);

            Log.d(MysqliteHelper.class.getName(), String.format(
                    "Fetched Book : %s and its cover location on SD Card :%s",
                    book_libraryId, book_librarydesc, book_libraryname,
                    book_libraryauthor, book_libraryprice, book_librarycurr));
            libraryItemsDetails.put("book_lib_Id", book_libraryId);// ,
                                                                        // book_storedesc,book_storename,book_storeauthor,book_storeprice,book_storecurr
            libraryItemsDetails.put(Book_LIB_des, book_librarydesc);
            libraryItemsDetails.put(Book_LIB_name, book_libraryname);
            libraryItemsDetails.put(Book_LIB_author, book_libraryauthor);
            libraryItemsDetails.put(Book_LIB_price, book_libraryprice);
            libraryItemsDetails.put(Book_LIB_curr, book_librarycurr);

            cur.moveToNext();
        }

        cur.close();
        //myDatabase.close();
        return libraryItemsDetails;
    }

    /*
     * public void updateStoreCacheWithDetails(String prod_str_Id, String
     * prod_str_desc, String prod_str_Name, String prod_str_author, String
     * prod_str_price, String prod_str_currency){ Log.d(
     * MysqliteHelper.class.getName(), String.format(
     * "Local Image Location: %s, URL :%s", prod_str_Id,
     * prod_str_desc,prod_str_Name,
     * prod_str_author,prod_str_price,prod_str_currency) ); myDatabase =
     * this.getWritableDatabase(); ContentValues contentValues = new
     * ContentValues(); contentValues.put(CONST_STR_BOOK_ID, prod_str_Id);
     * contentValues.put(CONST_STR_PROD_DESCR, prod_str_desc);
     * contentValues.put(CONST_STR_PROD_NAME, prod_str_Name);
     * contentValues.put(CONST_STR_PROD_AUTHOR, prod_str_author);
     * contentValues.put(CONST_STR_PROD_PRICE, prod_str_price);
     * contentValues.put(CONST_STR_PROD_CUR, prod_str_currency);
     * 
     * 
     * myDatabase.update( CONST_TABLE_STORE_CACHE , contentValues,
     * CONST_STR_BOOK_ID+"=?", new String[] { prod_str_Id });
     * //myDatabase.close(); }
     */

    public void updateStoreCacheWithLocalImageLocation(
            String localImageLocation, String imageURLOnServer) {
        Log.d(MysqliteHelper.class.getName(), String.format(
                "Local Image Location: %s, URL :%s", localImageLocation,
                imageURLOnServer));
        myDatabase = this.getWritableDatabase();
        //SQLiteDatabase.openDatabase(DATABASE_NAME, null, 0);

        ContentValues contentValues = new ContentValues();
        contentValues.put(CONST_LOCAL_IMAGE_PATH, localImageLocation);

        myDatabase.update(CONST_TABLE_STORE_CACHE, contentValues,
                CONST_IMAGE_URL + "=?", new String[] { imageURLOnServer });
    // myDatabase.close();
    }

    public void insertStoreBookIntoCache(String bookId, String bookName,
            String author, String publisher, String description,
            String priceValue, String priceCurrency, String averageRating,
            String imageUrl, String localImagePath) throws SQLException {
        myDatabase = this.getWritableDatabase();
        ContentValues contentValues = new ContentValues();

        // Put the values for Store Table.
        contentValues.put(CONST_BOOK_ID, bookId);
        contentValues.put(CONST_BOOK_NAME, bookName);
        contentValues.put(CONST_BOOK_DESCRIPTION, description);
        contentValues.put(CONST_AVERAGE_RATING, averageRating);
        contentValues.put(CONST_IMAGE_URL, imageUrl);
        Log.d(MysqliteHelper.class.getName(), "Image URL is :" + imageUrl);
        myDatabase.insertOrThrow(CONST_TABLE_STORE_CACHE, null, contentValues);
        //myDatabase.close();
    }

    public boolean isStoreCacheEmpty() {
        myDatabase =this. getReadableDatabase();
        Cursor cur = myDatabase.query(CONST_TABLE_STORE_CACHE,
                new String[] { CONST_BOOK_ID }, null, null, null, null, null);
        boolean isEmpty = cur.getCount() <= 0;
        cur.close();
    //  myDatabase.close();
        return isEmpty;
    }

    public void insertStoreBookCommentsIntoCache(String comment, String userId,
            String bookId) throws SQLException {
        myDatabase = this.getWritableDatabase();

        ContentValues contentValues = new ContentValues();

        // Put the values for Store Table.
        contentValues.put(CONST_COMMENT_BOOK_ID, bookId);
        contentValues.put(CONST_COMMENT_TEXT, comment);
        contentValues.put(CONST_COMMENT_USER_ID, userId);

        myDatabase
                .insertOrThrow(CONST_TABLE_BOOK_COMMENTS, null, contentValues);
        //myDatabase.close();
    }

    public int rollBackStoreBookCacheRecord(String bookId) {
        myDatabase = this.getWritableDatabase();

        int status = myDatabase.delete(CONST_TABLE_STORE_CACHE, CONST_BOOK_ID
                + "=?", new String[] { bookId });

        //myDatabase.close();

        return status;
    }

    public Map<String, String> getStoreItemsFromCache() {
        Map<String, String> storeItems = new HashMap<String, String>();
        myDatabase = this.getReadableDatabase();
        Cursor cur = myDatabase.query(CONST_TABLE_STORE_CACHE, new String[] {
                CONST_BOOK_ID, CONST_LOCAL_IMAGE_PATH }, null, null, null,
                null, null);
        if (cur.getCount() <= 0)
            return storeItems;

        cur.moveToFirst();
        while (!cur.isAfterLast()) {
            String bookId = cur.getString(0);
            String bookCoverLocationOnSDCard = cur.getString(1);

            Log.d(MysqliteHelper.class.getName(), String.format(
                    "Fetched Book : %s and its cover location on SD Card :%s",
                    bookId, bookCoverLocationOnSDCard));
            storeItems.put(bookId, bookCoverLocationOnSDCard);

            cur.moveToNext();

        }
        cur.close();

        //myDatabase.close();
        return storeItems;
    }

    /*
     * public ArrayList getStoreBooksInCache() { myDatabase =
     * this.getReadableDatabase(); ArrayList prodIDs = new ArrayList();
     * 
     * Cursor cur = myDatabase.query( CONST_TABLE_STORE_CACHE , new String[]
     * {CONST_BOOK_ID},null, null, null, null, null); if( cur.getCount() <= 0 )
     * return prodIDs;
     * 
     * cur.moveToFirst(); while( ! cur.isAfterLast() ) {
     * prodIDs.add(cur.getString(0)); cur.moveToNext(); } cur.close(); return
     * prodIDs; }
     */

    public void insertintoUserCredentialTable(String username, String password)
            throws SQLException {
        myDatabase = this.getWritableDatabase();

        ContentValues contentValues = new ContentValues();

        contentValues.put(CUR_USERNAME, username);
        contentValues.put(CUR_PASSWORD, password);
        String countQuery = "SELECT  * FROM " + USER_LOGIN_CREDENTIALS;
        int userCount = 0;
        Cursor  cur = myDatabase.rawQuery(countQuery, null);
        System.out.println("cursor count" + cur.getCount());
        if (cur.getCount() < 1)
            userCount = 1;
        cur.close();
        if (userCount == 1)
            myDatabase.insertOrThrow(USER_LOGIN_CREDENTIALS, null,
                    contentValues);
        else
            myDatabase
                    .update(USER_LOGIN_CREDENTIALS, contentValues, null, null);
        cur.close();
        //myDatabase.close();
    }

    public static final String CONST_USER_NAME_KEY = "cached_username";
    public static final String CONST_USER_PASSWORD_KEY = "cached_password";

    public Map<String, String> getUserCreds() {
        Map<String, String> userLogs = new HashMap<String, String>();
        myDatabase = this.getReadableDatabase();
        Cursor cur = myDatabase.query(USER_LOGIN_CREDENTIALS, new String[] {
                CUR_USERNAME, CUR_PASSWORD }, null, null, null, null, null,
                null);
        // System.out.println("cursor" +cur.toString());
        Log.d("cursorrrr", cur.toString());
        // startManagingCursor(cur);
        cur.moveToFirst();
        while (!cur.isAfterLast()) {
            String cachedUsername = cur.getString(0);
            String cachedPassword = cur.getString(1);
            Log.d(MysqliteHelper.class.getName(), String.format(
                    "Fetched credentials : %s and password :%s",
                    cachedUsername, cachedPassword));
            userLogs.put(CONST_USER_NAME_KEY, cachedUsername);
            userLogs.put(CONST_USER_PASSWORD_KEY, cachedPassword);

            cur.moveToNext();

        }
        cur.close();

        //myDatabase.close();
        // myDatabase.close();
        return userLogs;

    }

    public static final int BOOK_DETAILS_IN_STORE_CACHE = 2;
    public static final int BOOK_DETAILS_IN_LIBRARY_CACHE = 1;

    private static final String IS_BOOK_IN_LIBRARY_CACHE = "SELECT " +CONST_LIB_BOOK_ID + " FROM " 
            + CONST_TABLE_LIBRARY_DETAILS + " WHERE "+  CONST_LIB_BOOK_ID +"=?";
    private static final String IS_BOOK_IN_STORE_CACHE = "SELECT " +CONST_STR_BOOK_ID + " FROM " 
            + CONST_TABLE_STORE_DETAILS + " WHERE "  + CONST_STR_BOOK_ID + "=?";

    public int isBookInCache(String bookId) {
        myDatabase = this.getReadableDatabase();
        //myDatabase = this.getWritableDatabase();
        Cursor cur = myDatabase.rawQuery(IS_BOOK_IN_LIBRARY_CACHE,
                new String[] { bookId });
        if (cur.getCount() > 0) {
            return BOOK_DETAILS_IN_LIBRARY_CACHE;
        } else {
            cur = myDatabase.rawQuery(IS_BOOK_IN_STORE_CACHE,
                    new String[] { bookId });
            if (cur.getCount() > 0) {
                return BOOK_DETAILS_IN_STORE_CACHE;
            }
        }
        cur.close();
        //myDatabase.close();
        return -1;

    } 
```

活动 这里正在检查表中是否存在书籍

```
MysqliteHelper sqlhelpe = new MysqliteHelper(this);
         result = sqlhelpe.isBookInCache(Book_Id);
        Log.d("Book details are in :" + result,"");
        if (result == sqlhelpe.BOOK_DETAILS_IN_LIBRARY_CACHE) {
            BookDetailsScreen bkds=new BookDetailsScreen();
            System.out.println(Book_Id);
            // bkds.GetLibDetails(Book_Id);
            GetLibDetails(Book_Id);
            Log.d("Getting book details from Library cache","");
            // Get the details from Library cache
        } else if (result == sqlhelpe.BOOK_DETAILS_IN_STORE_CACHE) {
            GetStrDetails(Book_Id);
            Log.d("Getting book details from store cache","");
            // Get the details from Store cache
        } else {
            Log.d("Getting book details from the server","");
            new AsyncBookDetail_Store().execute("");

        } 
```

以下是 Activity 中的详细信息：

```
public String GetStrDetails(String book_Id){
        // HashMap<String, String> cachedProdLib = new HashMap<String, String>();

        Map<String, String> cachestr = sqlHelper.getStoreItemsDetails_FromCache(book_Id);
        //if (!cachestr.entrySet().isEmpty()) {     //Iterator<String> LibbookIds = cachedProdList.keySet().iterator();
             //String StrBook_Id=cachedProdList.get("book_lib_Id");
            StrBook_Id=cachestr.get(MysqliteHelper.Book_STR_Id);
             //Log.d(StrBook_Id, "Book Id Fom Data base");
              StrBook_Name=cachestr.get(MysqliteHelper.Book_STR_name);
              StrBook_Desc=cachestr.get(MysqliteHelper.Book_STR_des);
              StrBook_author=cachestr.get(MysqliteHelper.Book_STR_author);
              StrBook_Price=cachestr.get(MysqliteHelper.Book_STR_price);
              StrBook_Curr=cachestr.get(MysqliteHelper.Book_STR_curr);
             Message myMessage = new Message();
                Bundle resBundle = new Bundle();
                resBundle.putString("descripti",
                        StrBook_Desc);
                resBundle.putString("book_Name",
                        StrBook_Name);
                resBundle.putString("author", StrBook_author);
                resBundle.putString("price",StrBook_Price);
                resBundle.putString("currency",
                        StrBook_Curr);

                myMessage.setData(resBundle);
                handler.sendMessage(myMessage);
        //}

        return null;

    } 
```

场景是，最初，我将能够从缓存中查看所有详细信息，但有时它会停止从缓存中获取详细信息，即使它已被插入。LOG CAT 08-23 03:27:32.774: E/Database(1093): close() 从未在数据库'/data/data/com.pumpkynhead.ebookportal.ebook/databases/Books.db' 08-23 上显式调用03：27：32.774：E/Database（1093）：android.database.sqlite.DatabaseObjectNotClosedException：应用程序没有关闭在此处打开的游标或数据库对象 08-23 03：27：32.774：E/Database（1093）：在 android.database.sqlite.SQLiteDatabase.(SQLiteDatabase.java:1810) 08-23 03:27:32.774: E/Database(1093): 在 android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:817) 08 -23 03:27:32.774: E/Database(1093): 在 android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:35:32.353

通常，没有理由关闭数据库，尤其是当您需要不时在不同的地方访问它时。

此外，您需要确保使用 SQLiteOpenHelper 类的单个实例，因为不支持对同一数据库使用多个 SQLiteOpenHelper 实例，这会导致您面临的问题。

# wcf - 在 IIS 中托管 wcf 双工服务

> ID：12076343
> 
> 赞同：0
> 
> 时间：2012-08-22T15:19:13.537
> 
> 标签：wcf, iis, duplex

我可以使用 IIS 托管“普通”basichttp 服务并通过本地网络访问它。问题是，我正在尝试做一个双工服务并将其托管在 IIS 中。

我的网络配置：

```
<system.serviceModel>
<services>
  <service behaviorConfiguration="BaseBehavior" name="RegistrationService">
    <endpoint binding="wsDualHttpBinding" bindingConfiguration="wsDualHttpBind" name="RegistrationService" contract="Service" />
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="BaseBehavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<bindings>
  <wsDualHttpBinding>
    <binding name="wsDualHttpBind" sendTimeout="00:01:00">
      <security mode="None">
        <message clientCredentialType="None" />
      </security>
    </binding>
  </wsDualHttpBinding>
</bindings>
</system.serviceModel>
<system.webServer>
<modules runAllManagedModulesForAllRequests="true"/>
</system.webServer>
</configuration> 
```

我打开“http://localhost /Service/Service.svc”时收到的错误消息：

“合约要求‘双工’绑定‘BasicHttpBinding’不支持这个，并且支持配置不正确。”

我用谷歌搜索并找到了 web.config 的不同设置，但没有一个有效。我的猜测是，web.config 是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:11:36.470

首先，您应该有一个 Service.svc 指向您的服务的实现。然后，在服务条目中，如果它位于单独的项目中，请尝试在不包含程序集的情况下指定全名（您在 Service.svc 文件的服务属性中使用的名称）。最后，使用实现的服务契约的全名作为契约属性（这里也省略了汇编）。端点的名称不应该很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:48:01.030

感谢您的快速答复。我的配置完全错误^^

看完这篇文章后：

[http://www.dotnetconsult.co.uk/weblog2/PermaLink,guid,b891610a-6b78-4b54-b9a6-4ec81c82b7c0.aspx](http://www.dotnetconsult.co.uk/weblog2/PermaLink,guid,b891610a-6b78-4b54-b9a6-4ec81c82b7c0.aspx)

我从 wsDualHttpBinding 更改为 net.tcp。

我的新 web.config 如下所示：

```
<system.serviceModel>

<behaviors>
  <serviceBehaviors>
    <behavior name="MyBehaviour">
      <serviceMetadata />
    </behavior>
  </serviceBehaviors>
</behaviors>
<services>
<service name="Service" behaviorConfiguration="MyBehaviour">
  <endpoint address=""
            binding="netTcpBinding"
            bindingConfiguration="InsecureTcp"
            contract="IService" />
  <endpoint address="mextcp" binding="mexTcpBinding" contract="IMetadataExchange"/>
</service>
</services>
<bindings>
  <netTcpBinding>
    <binding name="InsecureTcp" portSharingEnabled="true">
      <security mode="None" />
    </binding>
  </netTcpBinding>
</bindings> 
```

在 IIS 中，我将 net.tcp 添加到网站。(http,net.tpc) 并且防火墙必须允许这些端口。

现在它正在工作。

# mysql - mySQL 表上的多个连接

> ID：12076345
> 
> 赞同：0
> 
> 时间：2012-08-22T15:19:25.513
> 
> 标签：mysql, codeigniter, join

我有 2 张桌子。第一个表包含大量用户数据。第二个表包含一个班级列表，以及职位是否已被填补。

我需要显示类，以及用户 ID 和用户名。

我试过做“加入”——但名字似乎只是互相覆盖，所以我每行只有一个名字。

**用户表：**

```
+----------+---------+
|  user_ID |  name   |
+----------+---------+
|        1 |   Smith | 
+----------+---------+
|        2 |   Jones |
+----------+---------+
|        3 |   Tim   |
+----------+---------+
etc 
```

**班级表：**

```
+-------------+--------+--------+--------+---+---------+
|  class_date | Spot 1 | Spot 2 | Spot 3 | . | Spot 16 |
+-------------+--------+--------+--------+---+---------+
|  2012/1/1   |   1    |    4   |   8    | . |   5     |
+-------------+--------+--------+--------+---+---------+
|  2012/2/1   |   2    |  NULL  |   1    | . |   3     |
+-------------+--------+--------+--------+---+---------+
|  2012/3/1   |   3    |    7   | NULL   | . |  NULL   |
+-------------+--------+--------+--------+---+---------+ 
```

**我想要达到的目标：**

```
+-------------+-------------+------------+--------------+---+------------+
|  class_date |   Spot 1    |   Spot 2   |    Spot 3    | . |  Spot 16   |
+-------------+-------------+------------+--------------+---+------------+
|  2012/1/1   |  1 - Smith  |  4 - Ben   |   8 - Drew   | . | 5 - Loz    |
+-------------+-------------+------------+--------------+---+------------+ 
|  2012/2/1   |  2 - Jones  |  NULL      |   1 - Smith  | . | 3 - Tim    |
+-------------+-------------+------------+--------------+---+------------+
|  2012/3/1   |  3 - Tim    |  7 - Dan   |   NULL       | . | NULL       |
+-------------+-------------+------------+--------------+---+------------+ 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:23:59.583

您需要为此使用`LEFT JOIN`。尝试，

```
SELECT  a.class_date,
        CONCAT(a.Spot1, ' - ', b.name) AS `SPOT 1`,
        CONCAT(a.Spot2, ' - ', c.name) AS `SPOT 2`,
        CONCAT(a.Spot3, ' - ', d.name) AS `SPOT 3`,
        ... -- keep doing until last column (i guess up to 16)
FROM    ClassTable a
            LEFT JOIN `UserTable` b
                ON a.Spot1 = b.user_ID
            LEFT JOIN `UserTable` c
                ON a.Spot2 = c.user_ID
            LEFT JOIN `UserTable` d
                ON a.Spot3 = d.user_ID
        ... ... -- keep doing until last column (i guess up to 16) 
```

# .net - 这个 Region.Exclude 行为是否正确？

> ID：12076351
> 
> 赞同：0
> 
> 时间：2012-08-22T15:19:47.967
> 
> 标签：.net, winforms, graphics, gdi

我有一个返回 GetBounds() 方法的 System.Drawing.Region 对象

> {X = 0.0 Y = 0.0 宽度 = 120.0 高度 = 120.0}

但是，当我使用矩形执行 Exclude() 方法时：

```
region.Exclude(New System.Drawing.Rectangle(60, -20, 100, 160)) 
```

我希望 Region.GetBounds 方法返回

> {X = 0.0 Y = 0.0 宽度 = 60.0 高度 = 120.0}

相反， Exclude() 调用似乎什么都不做。与 Intersect() 方法类似

```
region.Intersect(New System.Drawing.Rectangle(60, -20, 100, 160)) 
```

我希望看到

> {X = 60.0 Y = 0.0 宽度 = 60.0 高度 = 120.0}

但同样没有变化。这个对吗？

**编辑：**特定上下文

我正在一个更大的项目中使用 OnPaintBackground() 方法，朝着具有一般透明度的基本控件方向工作：[创建透明控件的一般解决方案是什么？](https://stackoverflow.com/questions/11971267/what-is-a-general-solution-to-creating-a-transparent-control)

```
Protected Overrides Sub OnPaintBackground(pevent As System.Windows.Forms.PaintEventArgs)
    Dim initialClip As Region = pevent.Graphics.Clip

    'Develop list of underlying controls'
    Dim submarinedControls As New List(Of Control)
    For Each control As Control In Parent.Controls.ToArray.Reverse
        If control IsNot Me AndAlso control.Visible AndAlso Me.ClientRectangle.IntersectsWith(control.RelativeClientRectangle(Me)) Then : submarinedControls.Add(control)
        Else : Exit For
        End If
    Next

    'Prepare clip for parent draw'
    pevent.Graphics.Clip = New Region(initialClip.GetRegionData)
    For Each control As Control In submarinedControls
        pevent.Graphics.Clip.Exclude(control.RelativeClientRectangle(Me))
    Next

    ...
End Sub 
```

在“为父级重绘准备剪辑”部分，重新​​创建初始剪辑后，其边界将按照指定的方式进行。下一步是排除任何底层控件，只绘制该控件直接与父控件背景交互的区域。我可以看到这里的 exclude 方法是接收较大的矩形作为其参数（作为 Watch），但是在 Exclude 发生之后，剪辑的边界没有任何变化。

**编辑：**可能的解决方案

看起来 Graphics.Clip 区域由 Graphics 对象管理并且是不可变的。用以下内容替换排除片段会产生所有预期结果：

```
 'Prepare clip for parent draw'
    Dim parentClip As System.Drawing.Region = New System.Drawing.Region(initialClip.GetRegionData)
    For Each Control As Control In submarinedControls
        parentClip.Exclude(Control.RelativeClientRectangle(Me))
    Next
    pevent.Graphics.Clip = parentClip 
```

* * *

相对客户端矩形（）：

```
<Runtime.CompilerServices.Extension()>
Public Function RelativeClientRectangle(control As System.Windows.Forms.Control, toControl As System.Windows.Forms.Control) As System.Drawing.Rectangle
    Return New System.Drawing.Rectangle(control.RelationTo(toControl), control.Size)
End Function 
```

关系到（）：

```
<Runtime.CompilerServices.Extension()>
Public Function RelationTo(control As System.Windows.Forms.Control, toControl As System.Windows.Forms.Control) As System.Drawing.Point
    Return control.PointToScreen(New Point(0, 0)) - toControl.PointToScreen(New Point(0, 0))
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T03:13:19.797

虽然我不能确定，但​​所有工作似乎都同意我的最终编辑，即 Graphics.Clip 的管理比孤立区域更严格。在准备离线区域进行修改时，观察到的行为完全解决了。

# jquery - .append 不适用于空格

> ID：12076355
> 
> 赞同：0
> 
> 时间：2012-08-22T15:19:56.747
> 
> 标签：jquery

我正在尝试使用类中的数据添加和删除`<li>`'s ，问题是当我有多个单词或单词之间有空格时，jQuery 不再识别它是同一个单词并添加相同的价值再次。`<ul>``add-to-favourites``<ul>`

你可以在这里看到问题：http: **[//jsfiddle.net/ZWxBb/](http://jsfiddle.net/ZWxBb/)**

尝试单击文本行，您将看到它们被添加和删除到`<ul>`除了类的第一个实例之外，它每次单击时都会添加。

如果您可以使用超过 2 个单词作为元素文本，再加上添加一个 div，单击该 div 从收藏夹中删除该项目，那也很棒

HTML：

```
<div class="add-to-favourites">Two Words</div>
<div class="add-to-favourites">OneWords</div>
<div class="add-to-favourites">NoSpaces</div>
<ul id="favourites"></ul> 
```

​ jQuery：

```
$(function () {
$('.add-to-favourites').click(function() {
   var num = $(this).text();
   var $fav = $('#favourites');
   var $fav_li = $fav.find('.' + num + '_li');

   if ($fav_li.length) {
      $fav_li.remove();
   } else {
      $('#favourites').append('<li class="' + num + '_li">' + num + '</li>');
   }
})
}); 
```

​<br /> 谢谢，本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:26:19.840

您可以使用`class`HTML 元素的属性来定义多个类，方法是用空格分隔它们。当您的元素文本包含一个或多个空格时，会发生两件事：

该行永远不会选择任何元素，因为您最终选择了错误的选择器。

```
var $fav_li = $fav.find('.' + num + '_li'); 
```

而这一行：

```
$('#favourites').append('<li class="' + num + '_li">' + num + '</li>'); 
```

将附加一个至少有两个类的元素。

我的建议是在将文本存储在之后用破折号替换空格`num`，并使用它来选择或分配您的单个类：

```
var num = $(this).text().replace(' ', '-'); 
```

[**更新了演示**](http://jsfiddle.net/ZWxBb/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:26:55.633

类名不能包含空格，因为在 CSS 选择器中，空格用于分隔每个选择器。因此，当您单击`Two Words`div 时，您最终会尝试选择 select `.Two Words_li`，这是具有类名称的`Two`元素和具有标签名称的子元素`Words_li`。

处理此问题的一种方法是将所有空格转换为不同的字符。

```
var num = $(this).text().replace( /\s+/g, "-" ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T15:28:54.137

正如 lzzey 所说，类名不能包含空格。尝试在你的类匹配上做一个 .replace(" ", "_" ) ：

```
$('.add-to-favourites').click(function() {
   var num = $(this).text();
   var numClass = num.replace(" ", "_" );
   var $fav = $('#favourites');
   var $fav_li = $fav.find('.' + numClass  + '_li');

   if ($fav_li.length) {
      $fav_li.remove();
   } else {
      $('#favourites').append('<li class="' + numClass  + '_li">' + num + '</li>');
   }
}) 
```

[http://jsfiddle.net/ZWxBb/2/](http://jsfiddle.net/ZWxBb/2/)

**更新：**

我建议使用文本以外的其他东西来识别 li 的

html:

```
<div class="add-to-favourites" data-item="1">Two Words</div>
<div class="add-to-favourites" data-item="2">One asd asd asd asd Words</div>
<div class="add-to-favourites" data-item="3">NoSpaces</div> 
```

然后js：

```
$('.add-to-favourites').click(function() {
   var num = $(this).data( "item" );
   var text = $(this).text();
   var $fav = $('#favourites');
   var $fav_li = $fav.find('.' + num + '_li');

   if ($fav_li.length) {
      $fav_li.remove();
   } else {
      $('#favourites').append('<li class="' + num + '_li">' + text + '</li>');
   }
}) 
```

[http://jsfiddle.net/ZWxBb/3/](http://jsfiddle.net/ZWxBb/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T15:26:49.993

那是因为您将 'num' var 添加为 CSS 类名。CSS 类名不能有空格。在将空格和特殊字符用作 CSS 类名之前，应将它们替换为空字符串。

# javascript - Android 4.0.3，window.openDatabase 不起作用

> ID：12076356
> 
> 赞同：4
> 
> 时间：2012-08-22T15:19:57.573
> 
> 标签：javascript, android, html, cordova, opendatabase

我正在开发一个移动应用程序，为此我将 html5/js 与 Phonegap 一起使用。我使用 window.openDatabase(...) 将一些数据存储在本地数据库中。

这适用于 Android 2.x 但是当我尝试使用 Android 4.0.3 时，我发现以下错误： `D/CordovaLog(698): Uncaught TypeError: Object [object DOMWindow] has no method 'openDatabase'`

我的代码是：

```
if (!window.openDatabase)
    alert("Error: can't open local database");
if (!localStorage)
    alert("Error: localstorage not usable");

var db = window.openDatabase("Database", "1.0", "DatabaseName", 200000); 
```

你知道这是从哪里来的吗？我该如何解决？提前致谢。

亲切的问候，维。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T04:57:27.793

根据[http://androidforums.com/application-development/103644-why-doesnt-work-javascript-opendatabase-android.html](http://androidforums.com/application-development/103644-why-doesnt-work-javascript-opendatabase-android.html)，Android`window.OpenDatabase()`从一开始就对方法的支持很不稳定。您可能希望看到这个 StackOverflow 线程：[Android 4.0.1 破坏 WebView HTML 5 本地存储？](https://stackoverflow.com/questions/8390985/android-4-0-1-breaks-webview-html-5-local-storage)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:50:34.993

我通过更新phonegap lib（到2.0版）解决了我的问题。我有 .jar 的 1.9 版，我总是使用 .js 文件的旧版本：1.4 版。

我在某些版本的 DroidGap.java 中发现，WebView 中的 WebSettings 配置不会激活数据库。但也许这只是因为我有一个非常旧的 .js lib 版本。

所以现在，似乎还可以。

谢谢你的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-15T11:21:07.520

我对此进行了调查，发现该问题是由于尝试打开（创建）估计大小较大的数据库引起的。

只需从 5kb (5*1024) 开始，然后移动到 5Mb (5*1024*1024)

`var db = window.openDatabase('mydb', '1.0', 'Test DB', 5 * 1024);`

# algorithm - 关于纯随机数系列的困惑

> ID：12076358
> 
> 赞同：2
> 
> 时间：2012-08-22T15:20:04.240
> 
> 标签：algorithm, random, numbers

这里有一个关于随机数的大问题：一系列随机数可以包含重复的数字吗？

我对所谓的纯随机数感到困惑？我想如果我们想在 0-9 范围内生成一系列 20 个随机数，那么显然必须有重复，但正因为如此，我们不能说这个序列是纯随机数，对吧？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T15:23:22.457

当然，一系列随机数可能包含重复的数字。当你掷一个纯粹随机的骰子时，它也可以连续两次落在同一个数字上！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T15:34:25.097

通常，我们不会说一个特定的序列是随机的。相反，我们谈论随机分布（许多可能的序列及其概率）。

当你掷硬币时，它可能正面朝上或反面朝上。正面不是随机的，反面也不是随机的。这是随机掷硬币的行为。

随机序列可以从许多不同的分布中抽取（或采样）。当我们选择一个分布时，我们经常试图对一些物理过程进行建模。例如，如果我们要按顺序对几个掷骰子进行建模，那么我们可能会绘制从 1 到 6 的几个整数。由于我们正在建模的掷骰子可能有重复，那么我们的绘制可能会有重复。序列 [1, 1, 1] 的出现概率与 [2, 5, 3] 相同。每种可能性具有相等概率的分布称为均匀分布。

如果我们想模拟洗牌，那么就不能有重复。当一副纸牌被洗牌时，每张牌只有一个位置；它不能重复。在这种情况下，序列 [1, 1, 1] 不会出现。洗牌的分布也是均匀的（每种可能性都有相同的概率），但它不会包含重复的序列。

用于从随机分布中选择序列的计算方法因分布而异。要从一个重复的生成器创建一个不重复的序列，我们可以简单地从生成器中收集一个样本，测试它是否是重复的，如果是重复的，则丢弃它并重试。这可行，但有更有效的方法来计算此类序列。

也有不等概率的分布，这种情况发生在诸如寻找分布的许多样本的平均值或客户到达时间的样本中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T15:54:10.517

随机数确实包含重复序列。您的直觉在这里不正确是非常合理的，因为区分真正随机序列和人类试图生成明显随机序列的最佳方法之一是在人类生成的序列中重复的次数更少。

随机生成数字的另一个重要特性是下一个数字出现的概率理想情况下应该与之前观察到的数字无关。例如，将 99 个硬币正面朝上，尽管这不太可能，但不会影响第 100 个硬币正面朝上的几率。你可能有一个很好的例子，你的硬币实际上并不平衡，但是......

编辑：为了回答这里提出的关于确定一系列数字是否随机的问题，我将感兴趣的读者引导至关于统计随机性的维基百科文章：[http ://en.wikipedia.org/wiki/Statistical_randomness](http://en.wikipedia.org/wiki/Statistical_randomness)

一串数字（以及这些数字的生成器）的成功或失败通常通过一系列随机测试来衡量。例如，如果您看到一大组数字的一位数过多，您会合理地得出结论，数字的分布不均匀。同样，如果您只计算随机数列表中 0 之后发生的所有数字，您应该期望这些也是均匀分布。您还希望您的发行版中也有一定数量的两位数（“00”或“11”）。这些测试的数量是无限的，你可以抛出一系列数字，并且可能它失败的测试越少（与相同测试的另一个随机源相比）“更好”

根据机器的状态确定随机数发生器的输出或使其可靠地根据输入产生输出的能力不会使其或多或少随机。只有输出的随机性很重要。然而，在随机性应用中，攻击者确定随机数通常是什么的能力对应用来说是极其不利的。（尤其是密码学和赌博应用程序。）

# java - IBM JSF PortletSession 为空

> ID：12076359
> 
> 赞同：7
> 
> 时间：2012-08-22T15:20:25.190
> 
> 标签：java, jsf, websphere, portal

我们将**IBM WebSphere Portal**与`JSF`. 一个*可怕*的组合，一次又一次地证明它的可怕。

最近我们遇到了一个问题，我们有一个带有下载 servlet 链接的 portlet （*包含**在*同*一个 war 中*）。此*servlet*尝试从*HttpSession中读取**某些属性*，这些属性应该由*portlet*中的*PortletSession*设置。*******`APPLICATION_SCOPE`*******

 ***但是，有时*servlet*无法*从**`HttpSession`*. 这是我进行*调查*的原因。经过一番搜索，我发现它只发生在第*一次**加载**portlet*时（没有重新加载任何页面）。

 **经过一些试验，我在`NullPointerException`调用. 是通过*faces context*从*外部上下文*中获得的。我发现实际上是 a 显然*应该包含*实际的. 这个包含的*会话*显然是**null**。然而，大多数使用空检查来防范*NPE*的方法都 没有（如果你问我，这是一个错误）。`getAttributeNames(scope)``PortletSession``PortletSession`**`PortletSession``com.ibm.faces.portlet.httpbridge.PortletSessionWrapper`*`PortletSession`***`PortletSessionWrapper`*`getAttributeNames(scope)`*******

 *******现在是一个大问题：**为什么在第*一次加载**portlet*时（真正的）`PortletSession` ***空值***？

 **提供包装器的*jsf-protletbrdige*`META-INF`的：

 *> 清单-版本：1.0
> Ant-版本：Apache Ant 1.7.1
> 创建者：IBM Corporation
> 规范-标题：Java Server Faces
> 实施-标题：JSF Widget Library (JWL) - Portlet Bridge
> 实施-版本：JWL v3_1_5
> 实施-供应商： IBM
> 构建版本：20100212_0941
> 构建日期：2010 年 2 月 12 日
> 版权所有信息：版权所有 (c) 2003,2008，International Business Machines Corporation。版权所有。

调用 getAttributeNames(scope) 方法时的堆栈跟踪：

```
[21-8-12 17:52:16:051 CEST] 00000041 servlet       E com.ibm.ws.webcontainer.servlet.ServletWrapper service SRVE0068E: Uncaught exception created in one of the service methods of the servlet Header in application PA_mytestportlet. Exception created : javax.servlet.ServletException: javax.portlet.PortletException: /MyPortletView.jsp(105,9) '#{MyPortletView.productId}' Error reading 'productId' on type mytest.portal.testportlet.view.MyPortletViewBean
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServlet.doDispatch(PortletServlet.java:361)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServletCollaboratorChainImpl.doCollaborator(PortletServletCollaboratorChainImpl.java:82)
    at com.ibm.isclite.container.collaborator.PortletServletCollaborator.doDispatch(PortletServletCollaborator.java:143)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServletCollaboratorChainImpl.doCollaborator(PortletServletCollaboratorChainImpl.java:74)
    at com.ibm.ws.portletcontainer.rrd.RRDServerPortletServletCollaborator.doDispatch(RRDServerPortletServletCollaborator.java:60)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServletCollaboratorChainImpl.doCollaborator(PortletServletCollaboratorChainImpl.java:74)
    at com.ibm.ws.portletcontainer.cache.CacheCollaborator.doDispatch(CacheCollaborator.java:74)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServletCollaboratorChainImpl.doCollaborator(PortletServletCollaboratorChainImpl.java:74)
    at com.ibm.wps.pe.pc.waspc.core.impl.PortletServletCollaboratorImpl.doDispatch(PortletServletCollaboratorImpl.java:121)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServletCollaboratorChainImpl.doCollaborator(PortletServletCollaboratorChainImpl.java:74)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServlet.dispatch(PortletServlet.java:208)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServlet.service(PortletServlet.java:165)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1597)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:104)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:908)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:934)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:179)
    at com.ibm.wsspi.webcontainer.servlet.GenericServletWrapper.handleRequest(GenericServletWrapper.java:121)
    at com.ibm.ws.portletcontainer.webextension.PortletExtensionProcessor.handleRequest(PortletExtensionProcessor.java:86)
    at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.include(WebAppRequestDispatcher.java:686)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletInvokerImpl.invoke(PortletInvokerImpl.java:214)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletInvokerCollaboratorChainImpl.doCollaborator(PortletInvokerCollaboratorChainImpl.java:78)
    at com.ibm.ws.portletcontainer.cache.PortletInvokerCacheCollaborator.doRender(PortletInvokerCacheCollaborator.java:58)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletInvokerCollaboratorChainImpl.doCollaborator(PortletInvokerCollaboratorChainImpl.java:67)
    at com.ibm.ws.portletcontainer.ext.PortletInvokerPerformanceCollaborator.invoke(PortletInvokerPerformanceCollaborator.java:313)
    at com.ibm.ws.portletcontainer.ext.PortletInvokerPerformanceCollaborator.doInvoke(PortletInvokerPerformanceCollaborator.java:101)
    at com.ibm.ws.portletcontainer.ext.PortletInvokerPerformanceCollaborator.invokePMI(PortletInvokerPerformanceCollaborator.java:163)
    at com.ibm.ws.portletcontainer.ext.PortletInvokerPerformanceCollaborator.doInvoke(PortletInvokerPerformanceCollaborator.java:91)
    at com.ibm.ws.portletcontainer.ext.PortletInvokerPerformanceCollaborator.doRender(PortletInvokerPerformanceCollaborator.java:74)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletInvokerCollaboratorChainImpl.doCollaborator(PortletInvokerCollaboratorChainImpl.java:67)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletInvokerImpl.render(PortletInvokerImpl.java:97)
    at com.ibm.ws.portletcontainer.PortletContainerImpl.doRender(PortletContainerImpl.java:121)
    at com.ibm.ws.portletcontainer.PortletContainerInvokerCollaboratorChainImpl.doCollaborator(PortletContainerInvokerCollaboratorChainImpl.java:80)
    at com.ibm.ws.portletcontainer.ext.ExtCollaborator.doRender(ExtCollaborator.java:74)
    at com.ibm.ws.portletcontainer.PortletContainerInvokerCollaboratorChainImpl.doCollaborator(PortletContainerInvokerCollaboratorChainImpl.java:67)
    at com.ibm.ws.portletcontainer.cache.CacheInvokerCollaborator.doRender(CacheInvokerCollaborator.java:66)
    at com.ibm.ws.portletcontainer.PortletContainerInvokerCollaboratorChainImpl.doCollaborator(PortletContainerInvokerCollaboratorChainImpl.java:67)
    at com.ibm.ws.portletcontainer.PortletContainerImpl.renderPortlet(PortletContainerImpl.java:91)
    at com.ibm.ws.portletcontainer.pcinvoker.PortletInvokerImpl$2.run(PortletInvokerImpl.java:100)
    at java.security.AccessController.doPrivileged(AccessController.java:251)
    at com.ibm.ws.portletcontainer.pcinvoker.PortletInvokerImpl.invokeRender(PortletInvokerImpl.java:96)
    at com.ibm.wps.pe.pc.waspc.core.impl.PortletInvokerImpl$1.invoke(PortletInvokerImpl.java:98)
    at com.ibm.wps.pe.pc.waspc.core.impl.PortletInvokerImpl.invoke(PortletInvokerImpl.java:181)
    at com.ibm.wps.pe.pc.waspc.core.impl.PortletInvokerImpl.invokeRender(PortletInvokerImpl.java:96)
    at com.ibm.wps.pe.pc.waspc.PortletContainerImpl.renderPortlet(PortletContainerImpl.java:116)
    at com.ibm.wps.pe.pc.PortletContainerImpl.doRenderPortlet(PortletContainerImpl.java:641)
    at com.ibm.wps.pe.ext.render.AbstractRenderManager.performService(AbstractRenderManager.java:264)
    at com.ibm.wps.pe.pc.PortletContainerImpl.renderPortlet(PortletContainerImpl.java:132)
    at com.ibm.wps.engine.tags.PortletRenderTag.doStartTag(PortletRenderTag.java:179)
    at com.ibm._jsp._Control._jspx_meth_portal$1skin_portletRender_0(_Control.java:276)
    at com.ibm._jsp._Control._jspx_meth_portal$1logic_if_1(_Control.java:315)
    at com.ibm._jsp._Control._jspService(_Control.java:168)
    at com.ibm.ws.jsp.runtime.HttpJspBase.service(HttpJspBase.java:99)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:939)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:179)
    at com.ibm.wsspi.webcontainer.servlet.GenericServletWrapper.handleRequest(GenericServletWrapper.java:121)
    at com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionServletWrapper.handleRequest(AbstractJSPExtensionServletWrapper.java:259)
    at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.include(WebAppRequestDispatcher.java:686)
    at com.ibm.wps.services.dispatcher.DispatcherServiceImpl.handleRequest(DispatcherServiceImpl.java:93)
    at com.ibm.wps.services.dispatcher.DispatcherServiceImpl.include(DispatcherServiceImpl.java:53)
    at com.ibm.wps.services.dispatcher.Dispatcher.include(Dispatcher.java:50)
    at com.ibm.wps.engine.templates.skins.Default.render(Default.java:154)
    at com.ibm.wps.engine.templates.SkinTemplate.render(SkinTemplate.java:68)
    at com.ibm.wps.composition.elements.Component.render(Component.java:638)
    at com.ibm.wps.composition.elements.Control.render(Control.java:159)
    at com.ibm.wps.composition.Composition.render(Composition.java:3102)
    at com.ibm.wps.composition.Composition.render(Composition.java:163)
    at com.ibm.websphere.personalization.transformation.PznTransformationLayoutModel.render(PznTransformationLayoutModel.java:90)
    at com.ibm.wps.model.wrappers.LayoutModelWrapperFactoryImpl$LayoutModelWrapperImpl.render(LayoutModelWrapperFactoryImpl.java:275)
    at com.ibm.wps.model.ModelUtil$WrappedCompositionModel.render(ModelUtil.java:1124)
    at com.ibm._jsp._UnlayeredContainer_2D_H._jspService(_UnlayeredContainer_2D_H.java:224)
    at com.ibm.ws.jsp.runtime.HttpJspBase.service(HttpJspBase.java:99)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:939)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:179)
    at com.ibm.wsspi.webcontainer.servlet.GenericServletWrapper.handleRequest(GenericServletWrapper.java:121)
    at com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionServletWrapper.handleRequest(AbstractJSPExtensionServletWrapper.java:259)
    at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.include(WebAppRequestDispatcher.java:686)
    at com.ibm.wps.services.dispatcher.DispatcherServiceImpl.handleRequest(DispatcherServiceImpl.java:93)
    at com.ibm.wps.services.dispatcher.DispatcherServiceImpl.include(DispatcherServiceImpl.java:53)
    at com.ibm.wps.services.dispatcher.Dispatcher.include(Dispatcher.java:50)
    at com.ibm.wps.engine.templates.skins.Default.render(Default.java:154)
    at com.ibm.wps.engine.templates.SkinTemplate.render(SkinTemplate.java:68)
    at com.ibm.wps.composition.elements.Component.render(Component.java:638)
    at com.ibm.wps.composition.Composition.render(Composition.java:3102)
    at com.ibm.wps.composition.Composition.render(Composition.java:163)
    at com.ibm.websphere.personalization.transformation.PznTransformationLayoutModel.render(PznTransformationLayoutModel.java:90)
    at com.ibm.wps.model.wrappers.LayoutModelWrapperFactoryImpl$LayoutModelWrapperImpl.render(LayoutModelWrapperFactoryImpl.java:275)
    at com.ibm.wps.model.ModelUtil$WrappedCompositionModel.render(ModelUtil.java:1124)
    at com.ibm._jsp._UnlayeredContainer_2D_V._jspService(_UnlayeredContainer_2D_V.java:215)
    at com.ibm.ws.jsp.runtime.HttpJspBase.service(HttpJspBase.java:99)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:939)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:179)
    at com.ibm.wsspi.webcontainer.servlet.GenericServletWrapper.handleRequest(GenericServletWrapper.java:121)
    at com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionServletWrapper.handleRequest(AbstractJSPExtensionServletWrapper.java:259)
    at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.include(WebAppRequestDispatcher.java:686)
    at com.ibm.wps.services.dispatcher.DispatcherServiceImpl.handleRequest(DispatcherServiceImpl.java:93)
    at com.ibm.wps.services.dispatcher.DispatcherServiceImpl.include(DispatcherServiceImpl.java:53)
    at com.ibm.wps.services.dispatcher.Dispatcher.include(Dispatcher.java:50)
    at com.ibm.wps.engine.templates.skins.Default.render(Default.java:154)
    at com.ibm.wps.engine.templates.SkinTemplate.render(SkinTemplate.java:68)
    at com.ibm.wps.composition.elements.Component.render(Component.java:638)
    at com.ibm.wps.composition.Composition.render(Composition.java:3102)
    at com.ibm.wps.composition.Composition.render(Composition.java:163)
    at com.ibm.websphere.personalization.transformation.PznTransformationLayoutModel.render(PznTransformationLayoutModel.java:90)
    at com.ibm.wps.model.wrappers.LayoutModelWrapperFactoryImpl$LayoutModelWrapperImpl.render(LayoutModelWrapperFactoryImpl.java:275)
    at com.ibm.wps.engine.tags2.PageRenderTag.doStartTag(PageRenderTag.java:534)
    at com.ibm._jsp._Home._jspService(_Home.java:104)
    at com.ibm.ws.jsp.runtime.HttpJspBase.service(HttpJspBase.java:99)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:939)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:179)
    at com.ibm.wsspi.webcontainer.servlet.GenericServletWrapper.handleRequest(GenericServletWrapper.java:121)
    at com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionServletWrapper.handleRequest(AbstractJSPExtensionServletWrapper.java:259)
    at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.include(WebAppRequestDispatcher.java:686)
    at com.ibm.wps.services.dispatcher.DispatcherServiceImpl.handleRequest(DispatcherServiceImpl.java:93)
    at com.ibm.wps.services.dispatcher.DispatcherServiceImpl.include(DispatcherServiceImpl.java:53)
    at com.ibm.wps.services.dispatcher.Dispatcher.include(Dispatcher.java:50)
    at com.ibm.wps.engine.templates.screens.Default.render(Default.java:133)
    at com.ibm.wps.engine.templates.ScreenTemplate.render(ScreenTemplate.java:59)
    at com.ibm.wps.engine.tags2.ScreenRenderTag.doStartTag(ScreenRenderTag.java:182)
    at com.ibm._jsp._Default._jspx_meth_portal$1core_screenRender_0(_Default.java:3623)
    at com.ibm._jsp._Default._jspService(_Default.java:1966)
    at com.ibm.ws.jsp.runtime.HttpJspBase.service(HttpJspBase.java:99)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:939)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:179)
    at com.ibm.wsspi.webcontainer.servlet.GenericServletWrapper.handleRequest(GenericServletWrapper.java:121)
    at com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionServletWrapper.handleRequest(AbstractJSPExtensionServletWrapper.java:259)
    at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.include(WebAppRequestDispatcher.java:686)
    at com.ibm.wps.services.dispatcher.DispatcherServiceImpl.handleRequest(DispatcherServiceImpl.java:93)
    at com.ibm.wps.services.dispatcher.DispatcherServiceImpl.include(DispatcherServiceImpl.java:53)
    at com.ibm.wps.services.dispatcher.Dispatcher.include(Dispatcher.java:50)
    at com.ibm.wps.engine.templates.themes.Default.doDispatch(Default.java:294)
    at com.ibm.wps.engine.templates.themes.Default.render(Default.java:247)
    at com.ibm.wps.engine.templates.ThemeTemplate.render(ThemeTemplate.java:65)
    at com.ibm.wps.engine.phases.WPRenderPhase.processRendering(WPRenderPhase.java:509)
    at com.ibm.wps.engine.phases.WPBaseRenderPhase.execute(WPBaseRenderPhase.java:194)
    at com.ibm.wps.state.phases.AbstractRenderPhase.next(AbstractRenderPhase.java:106)
    at com.ibm.wps.engine.phases.WPAbstractRenderPhase.next(WPAbstractRenderPhase.java:97)
    at com.ibm.wps.engine.Servlet.callPortal(Servlet.java:860)
    at com.ibm.wps.engine.Servlet.doGet(Servlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:718)
    at com.ibm.wps.engine.Servlet.doFilter(Servlet.java:1257)
    at com.ibm.wps.resolver.servlet.ContentHandlerCleanup.doFilter(ContentHandlerCleanup.java:648)
    at com.ibm.wps.resolver.servlet.AbstractFilter.doFilter(AbstractFilter.java:93)
    at com.ibm.wps.engine.Servlet.service(Servlet.java:1248)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1597)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:131)
    at com.ibm.wps.engine.ExtendedLocaleFilter.doFilter(ExtendedLocaleFilter.java:113)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
    at com.ibm.wps.resolver.friendly.servlet.FriendlySelectionFilter.doFilter(FriendlySelectionFilter.java:191)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
    at com.ibm.wps.mappingurl.impl.URLAnalyzer.doFilter(URLAnalyzer.java:381)
 . . .
Caused by: javax.portlet.PortletException: /MyPortletView.jsp(105,9) '#{MyPortletView.productId}' Error reading 'productId' on type mytest.portal.testportlet.view.MyPortletViewBean
    at com.ibm.faces.portlet.FacesPortlet.doRender(FacesPortlet.java:384)
    at com.ibm.faces.portlet.FacesPortlet.doView(FacesPortlet.java:413)
    at com.ibm.faces.portlet.FacesPortlet.doDispatch(FacesPortlet.java:301)
    at javax.portlet.GenericPortlet.render(GenericPortlet.java:233)
    at mytest.portal.testportlet.portlet.HeaderPortlet.render(HeaderPortlet.java:44)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletFilterChainImpl.doFilter(PortletFilterChainImpl.java:128)
    at com.ibm.wps.propertybroker.standard.filter.C2APortletFilter.doFilter(C2APortletFilter.java:183)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletFilterChainImpl.doFilter(PortletFilterChainImpl.java:120)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServlet.doDispatch(PortletServlet.java:573)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServletCollaboratorChainImpl.doCollaborator(PortletServletCollaboratorChainImpl.java:114)
    at com.ibm.isclite.container.collaborator.PortletServletCollaborator.doRender(PortletServletCollaborator.java:71)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServletCollaboratorChainImpl.doCollaborator(PortletServletCollaboratorChainImpl.java:105)
    at com.ibm.ws.portletcontainer.rrd.RRDServerPortletServletCollaborator.doRender(RRDServerPortletServletCollaborator.java:123)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServletCollaboratorChainImpl.doCollaborator(PortletServletCollaboratorChainImpl.java:105)
    at com.ibm.ws.portletcontainer.cache.CacheCollaborator.doRender(CacheCollaborator.java:92)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServletCollaboratorChainImpl.doCollaborator(PortletServletCollaboratorChainImpl.java:105)
    at com.ibm.wps.pe.pc.waspc.core.impl.PortletServletCollaboratorImpl.doRender(PortletServletCollaboratorImpl.java:156)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServletCollaboratorChainImpl.doCollaborator(PortletServletCollaboratorChainImpl.java:105)
    at com.ibm.ws.portletcontainer.invoker.impl.PortletServlet.doDispatch(PortletServlet.java:273)
    ... 203 more
Caused by: org.apache.jasper.el.JspELException: /MyPortletView.jsp(105,9) '#{MyPortletView.productId}' Error reading 'productId' on type mytest.portal.testportlet.view.MyPortletViewBean
    at org.apache.jasper.el.JspValueExpression.getValue(JspValueExpression.java:106)
    at javax.faces.component.UIParameter.getValue(UIParameter.java:167)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.getParamList(HtmlBasicRenderer.java:518)
    at com.sun.faces.renderkit.html_basic.OutputLinkRenderer.renderAsActive(OutputLinkRenderer.java:203)
    at com.sun.faces.renderkit.html_basic.OutputLinkRenderer.encodeBegin(OutputLinkRenderer.java:100)
    at com.ibm.faces.renderkit.DefaultAjaxRenderer.encodeBegin(DefaultAjaxRenderer.java:64)
    at javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.java:812)
    at mytest.jsf.util.ChildRendererUtil.renderChildren(ChildRendererUtil.java:45)
    at mytest.portal.ui.jsf.custom.component.htmltag.HtmlTagRenderer.encodeChildren(HtmlTagRenderer.java:110)
    at com.ibm.faces.renderkit.DefaultAjaxRenderer.encodeChildren(DefaultAjaxRenderer.java:73)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:836)
    at mytest.jsf.util.ChildRendererUtil.renderChildren(ChildRendererUtil.java:47)
    at mytest.portal.ui.jsf.custom.component.htmltag.HtmlTagRenderer.encodeChildren(HtmlTagRenderer.java:110)
    at com.ibm.faces.renderkit.DefaultAjaxRenderer.encodeChildren(DefaultAjaxRenderer.java:73)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:836)
    at mytest.jsf.util.ChildRendererUtil.renderChildren(ChildRendererUtil.java:47)
    at mytest.portal.ui.jsf.custom.component.htmltag.HtmlTagRenderer.encodeChildren(HtmlTagRenderer.java:110)
    at com.ibm.faces.renderkit.DefaultAjaxRenderer.encodeChildren(DefaultAjaxRenderer.java:73)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:836)
    at mytest.jsf.util.ChildRendererUtil.renderChildren(ChildRendererUtil.java:47)
    at mytest.portal.ui.jsf.custom.component.htmltag.HtmlTagRenderer.encodeChildren(HtmlTagRenderer.java:110)
    at com.ibm.faces.renderkit.DefaultAjaxRenderer.encodeChildren(DefaultAjaxRenderer.java:73)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:836)
    at mytest.jsf.util.ChildRendererUtil.renderChildren(ChildRendererUtil.java:47)
    at mytest.portal.ui.jsf.custom.component.htmltag.HtmlTagRenderer.encodeChildren(HtmlTagRenderer.java:110)
    at com.ibm.faces.renderkit.DefaultAjaxRenderer.encodeChildren(DefaultAjaxRenderer.java:73)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:836)
    at mytest.jsf.util.ChildRendererUtil.renderChildren(ChildRendererUtil.java:47)
    at mytest.portal.ui.jsf.custom.component.htmltag.HtmlTagRenderer.encodeChildren(HtmlTagRenderer.java:110)
    at com.ibm.faces.renderkit.DefaultAjaxRenderer.encodeChildren(DefaultAjaxRenderer.java:73)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:836)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:936)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:942)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:148)
    at com.ibm.faces.renderkit.DefaultAjaxRenderer.encodeChildren(DefaultAjaxRenderer.java:73)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:836)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:936)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:942)
    at com.sun.faces.application.ViewHandlerImpl.doRenderView(ViewHandlerImpl.java:292)
    at com.sun.faces.application.ViewHandlerImpl.renderView(ViewHandlerImpl.java:223)
    at com.ibm.faces.portlet.PortletViewHandlerImpl.renderView(PortletViewHandlerImpl.java:79)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:114)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:100)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at com.ibm.faces.portlet.FacesPortlet.doRender(FacesPortlet.java:372)
    ... 221 more
Caused by: java.lang.NullPointerException
    at com.ibm.faces.portlet.httpbridge.PortletSessionWrapper.getAttributeNames(PortletSessionWrapper.java:185)
    at mytest.portal.testportlet.view.MyPortletViewBean.getProductId(MyPortletViewBean.java:394)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:611)
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:64)
    at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:143)
    at com.sun.faces.el.FacesCompositeELResolver.getValue(FacesCompositeELResolver.java:73)
    at org.apache.el.parser.AstValue.getValue(AstValue.java:102)
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:263)
    at org.apache.jasper.el.JspValueExpression.getValue(JspValueExpression.java:100)
    ... 265 more 
```

使用以下代码获取会话范围：

```
FacesContext facesContext = getFacesContext();
if (facesContext != null) {
    return (PortletSession) facesContext.getExternalContext().getSession(createIfNotExist);
 }
 return null; 
```

哪里`createIfNotExist`是**假**的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:16:58.233

听起来像是 jsf-portletbridge.jar`PortletRequestWrapper`类型中的一个缺陷。JSF 参考实现被写入 servlet 规范。请求包装器实现`HttpServletRequest`. [`ExternalContext.getSession(boolean)`](http://docs.oracle.com/javaee/5/api/javax/faces/context/ExternalContext.html#getSession%28boolean%29)将调用[`HttpServletRequest.getSession(boolean)`](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpServletRequest.html#getSession%28boolean%29). `PortletSessionWrapper`这将返回一个同时实现 `HttpSession`和的装饰器对象`PortletSession`。听起来请求装饰器即使在底层`PortletSession`为空时也会返回会话装饰器。

我会尝试这种形式的代码：

```
 PortletRequest request = (PortletRequest) FacesContext.getCurrentInstance()
                                                          .getExternalContext()
                                                          .getRequest();
    PortletSession session = request.getPortletSession(false);
    if (session == null) {
        return null;
    }
    else {
        return session.getAttribute("foo", PortletSession.APPLICATION_SCOPE);
    } 
```*************

# mysql - 错误 1172 - 结果包含多于一行 - （简单更新，无子查询） - MySQL 5.1

> ID：12076360
> 
> 赞同：1
> 
> 时间：2012-08-22T15:20:30.790
> 
> 标签：mysql

有人能告诉我是什么引发了：**结果包含不止一行**错误吗？

![在此处输入图像描述](../Images/5fc49f14c0c6ff0c11d9a2c0402600e1.png)

**更新：**

2.第一次更新包含一个过时的链接

1.这里是表结构。我无法共享数据，因为它由私人电子邮件组成（目前）

[检查这里的表结构](http://pastebin.com/9adtM90q)

# ruby - 脚本中的 Tab 补全

> ID：12076362
> 
> 赞同：1
> 
> 时间：2012-08-22T15:20:34.653
> 
> 标签：ruby, tabs

我正在尝试使用 ruby​​ 实现一个 cli 脚本，该脚本可以完成有效命令。我有一个执行许多任务的脚本。我想将它滚动到一个 cli 中，用户可以在其中选择完整的命令。外面有宝石吗？如果没有，我怎么能自己滚动？像处理 std 输入和处理 TAB 一样简单？我看到的唯一问题是未按下 Enter 键时如何查看选项卡。

任何的意见都将会有帮助。

谢谢，

香港

例如：

```
cli> show [enter]
show version
show system state
show interface rate

cli> show interface [enter]
show interface rate
show interface state
show interface channel-groups

cli> show inter [tab]
cli> show interface chann [tab]
cli> show interface channel-groups 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:23:14.653

您将无法使用标准 io 执行此操作。我会推荐 ncurses，也许是[ncurses-ruby](http://ncurses-ruby.berlios.de/ "ncurses-红宝石")。

# javascript - 多维数组-document.write问题-javascript

> ID：12076368
> 
> 赞同：0
> 
> 时间：2012-08-22T15:20:50.897
> 
> 标签：javascript, google-visualization

当我为 javascript 变量执行 document.write 时，

```
 var abcd = [["165q",1],["160q",6],["161q",7],["162q",7],["163q",8],["164q",5]];
   document.write(abcd); 
```

我得到的结果为

```
165q,1,160q,6,161q,7,162q,7,163q,8,164q,5 
```

但是当我通过一个变量将一个类似的数据传递给 abcd 时，当我执行 document.write 时，结果就是下面的精确多维 array.code

```
function radar_avg_one(one_chart_result) {
var abcd = one_chart_result;
 document.write(abcd);
document.write(one_chart_result);
} 
```

document.write(one_chart_result) 的结果；

是`[["165q",1],["160q",6],["161q",7],["162q",7],["163q",8],["164q",5]]`

document.write(abcd) 的结果；

是`[["165q",1],["160q",6],["161q",7],["162q",7],["163q",8],["164q",5]]`

我无法理解它何时明确指定为什么它会给出不同的结果。主要问题是谷歌雷达图只有在我硬编码这样的值时才起作用:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:31:48.367

```
JSON.stringify([["165q",1],["160q",6],["161q",7],["162q",7],["163q",8],["164q",5]]); 
```

使用 JSON，您可以将 javascript 中的对象和数组与文本进行字符串化和解析，从而可以重用数据。

结果将是：

```
"[[\"165q\",1],[\"160q\",6],[\"161q\",7],[\"162q\",7],[\"163q\",8],[\"164q\",5]]" 
```

有了这个：

```
JSON.parse("[[\"165q\",1],[\"160q\",6],[\"161q\",7],[\"162q\",7],[\"163q\",8],[\"164q\",5]]"); 
```

结果将是：

```
[["165q",1],["160q",6],["161q",7],["162q",7],["163q",8],["164q",5]] 
```

这是一个真正的数组

对于没有本机 json 的浏览器中的 JSON 支持，您应将其添加到您的站点： [https ://github.com/douglascrockford/JSON-js/blob/master/json2.js](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)

和：

```
String([["165q",1],["160q",6],["161q",7],["162q",7],["163q",8],["164q",5]]); 
```

和：

```
[["165q",1],["160q",6],["161q",7],["162q",7],["163q",8],["164q",5]].toString(); 
```

你会得到这个结果：

```
"165q,1,160q,6,161q,7,162q,7,163q,8,164q,5" 
```

# javascript - 关于 JavaScript 中尾随逗号的问题

> ID：12076373
> 
> 赞同：16
> 
> 时间：2012-08-22T15:21:10.520
> 
> 标签：javascript, google-closure-compiler

> **可能重复：**
> [Internet Explorer、闭包编译器和尾随逗号](https://stackoverflow.com/questions/11823162/internet-explorer-closure-compiler-and-trailing-commas)

我尝试使用[Closure Compiler](http://closure-compiler.appspot.com/home)压缩我的 javascript 代码，并且代码的编译产生了这两个错误：

> JSC_TRAILING_COMMA：解析错误。IE8（及以下）将错误地解析数组和对象文字中的尾随逗号。如果您的目标是较新版本的 JS，请设置适当的 language_in 选项。在第 379 行字符 0 fontFamily : jqTextareaDiv.css("font-family").replace(/["']{1}/gi,""),
> 
> JSC_TRAILING_COMMA：解析错误。IE8（及以下）将错误地解析数组和对象文字中的尾随逗号。如果您的目标是较新版本的 JS，请设置适当的 language_in 选项。在第 932 行字符 0 fontFamily : jqDiv.css("font-family"),

这两个错误似乎是指这段代码：

```
var jqTextareaDiv = obj.target.parent().parent(),
                            style = {       // the current, relevant style rules for the DIV nesting the textarea
                                fontFamily     : jqTextareaDiv.css("font-family").replace(/["']{1}/gi,""),
                                fontSize       : jqTextareaDiv.css("font-size"),
                                fontStyle      : jqTextareaDiv.css("font-style"),
                                fontWeight     : jqTextareaDiv.css("font-weight"),
                                textDecoration : jqTextareaDiv.css("text-decoration"),
                                textAlign      : jqTextareaDiv.css("text-align"),
                                color          : jqTextareaDiv.css("color"),
                            },
                            jqToolbox = $('#text-edit-toolbox'),
                            jqIndicators = {
                                fontFamily                : $('#font-family-indicator'),
                                fontSize                  : $('#font-size-indicator'),
                                fontStyle                 : $('#font-format-indicators .font-style'),
                                fontWeight                : $('#font-format-indicators .font-weight'),
                                textDecorationUnderline   : $('#font-format-indicators .underline'),
                                textDecorationLineThrough : $('#font-format-indicators .line-through'),
                                textAlignLeft             : $('#text-alignment-indicators .align-left'),
                                textAlignCenter           : $('#text-alignment-indicators .align-center'),
                                textAlignRight            : $('#text-alignment-indicators .align-right'),
                                textAlignJustify          : $('#text-alignment-indicators .align-justify')
                            }; 
```

在这种情况下，究竟哪个是尾随逗号，如何在不破坏代码的情况下将其删除？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-22T15:24:34.640

尾随逗号是数组或对象字面量中最后一个元素之后的逗号。所以像这样：

```
['a', 'b', 'c',] // with trailing comma
['a', 'b', 'c']  // without trailing comma 
```

在这种情况下，尾随逗号跟随对象文字中的最后一个元素：

```
color          : jqTextareaDiv.css("color"), 
```

如果将其删除，则会发生预期的行为。有了它，IE<9 就不会喜欢它了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T15:24:27.180

这是结尾的逗号：

```
color          : jqTextareaDiv.css("color"), <<-- 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T15:24:19.833

您在 . 中有一个尾随逗号`color : jqTextareaDiv.css("color"),`。那将是第一个警告。第二个警告可能是代码中其他地方的类似定义。

# ios - 音频流服务无法识别文件类型

> ID：12076374
> 
> 赞同：2
> 
> 时间：2012-08-22T15:21:14.810
> 
> 标签：ios, audio-streaming

我正在使用 Audio Streaming Services 库（基于 Matt Ghallager 的[教程](http://cocoawithlove.com/2008/09/streaming-and-playing-live-mp3-stream.html)）进行实时流式传输音频，但我一直在这部分崩溃：

```
err = AudioQueueStart(audioQueue, NULL);
if (err)
{
    [self failWithErrorCode:AS_AUDIO_QUEUE_START_FAILED];
    return;
} 
```

错误代码是：[kAudioDeviceUnsupportedFormatError](http://darcs.brianweb.net/vendor/powerpc-apple-darwin/include/CoreAudio/AudioHardware.h) ..这家伙是在CoreAudio/AudioHardware.h中定义的，这似乎是硬件相关的问题。我在网上找不到有关此错误的很多有用信息。

有趣的是，早些时候我在尝试这个时遇到了类似的问题：

```
// create the audio 
err = AudioQueueNewOutput(&asbd, MyAudioQueueOutputCallback, self, NULL, NULL, 0, &
    if (err)
{
    [self failWithErrorCode:AS_AUDIO_QUEUE_CREATION_FAILED];
    return;
} 
```

[（在这篇](https://stackoverflow.com/questions/1459689/audioqueuestart-reporting-unsupported-format)文章中遇到了同样的问题，但是文章的作者错误地将他们的错误代码归因于*AudioQueueStart*而不是*AudioQueueNewOutput*）

我得到了这个错误代码：[kAudioFormatUnsupportedDataFormatError](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/AudioQueueReference/Reference/reference.html) .. 我的补救措施是手动添加这个代码：

```
asbd.mFormatID = kAudioFormatMPEGLayer3; 
```

自从我发现打电话

```
AudioFileStreamGetProperty(inAudioFileStream, kAudioFileStreamProperty_DataFormat, &asbdSize, &asbd); 
```

最初给我[kAudioFormatMPEGLayer1](https://developer.apple.com/library/ios/#documentation/MusicAudio/Reference/CoreAudioDataTypesRef/Reference/reference.html)作为 mFormatID 而不是[kAudioFormatMPEGLayer3](http://svn.scipy.org/svn/scikits/branches/audiolab-0.10.x/scikits/audiolab/soundio/macosx/AudioHardware.pxd)，它是 .mp3 ，这是我实际播放的音频文件。

最后.. 可能我第一次注意到有问题是在我最初调用这个函数时：

```
AudioFileStreamOpen((__bridge void*)streamer, ASPropertyListenerProc, ASPacketsProc, 
                                        0, &(streamer->audioFileStream)); 
```

我第一次没有将 inFileTypeHint 提供给它导致的[函数](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/AudioStreamReference/Reference/reference.html)

```
AudioFileStreamParseBytes(streamer->audioFileStream, inDataByteSize, inData, 0); 
```

调用以解析字节失败..（特别是..我得到了*Parse bytes failed.err: typ? 1954115647*错误消息，即 kAudioFileUnsupportedFileTypeError）..

我解决这个问题的方法是（你猜对了）手动添加文件类型提示：

```
 streamer->err = AudioFileStreamOpen((__bridge void*)streamer, ASPropertyListenerProc, ASPacketsProc, 
                                        kAudioFileMP3Type, &(streamer->audioFileStream)); 
```

所以你可以看到..我推到地毯下的一个问题终于来咬我了..但我不确定为什么解析器无法手动识别我的音频文件类型..以及为什么我必须保留硬编码该值..只是让它最终失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:06:31.670

事实证明，我的数据包没有按正确的顺序（也没有完成）..我想出来的方法是使用十六进制程序（hexFiend）打开有问题的mp3文件，然后我比较了关键数据包与实际发送的内容..我修复了这个差异，之后一切正常。

# memory-management - 静态推力自定义分配器？

> ID：12076377
> 
> 赞同：3
> 
> 时间：2012-08-22T15:21:20.710
> 
> 标签：memory-management, cuda, thrust

设置的几个事实：

*   Thrust 并非所有操作都在原地操作。
*   您可以将自定义分配器提供给`thrust::device_vectors`.

我查看`thrust::system`并`thrust::system::cuda`没有发现任何看起来像静态系统分配器的东西。我的意思是，我看不到替换推力在内部使用的分配器为异地算法分配额外内存的方法。

我也很难相信没有就地的函数使用分配器来分配给`thrust::device_vectors`分配器的工作内存。

问题：有`thrust`没有办法用用户定义的内部分配器替换内部分配器？

相关问题：

[意味着推力运行不正常](https://stackoverflow.com/questions/10979229/how-to-estimate-gpu-memory-requirements-for-thrust-based-implementation)

[自定义`thrust`分配器示例](https://stackoverflow.com/questions/9007343/mix-custom-memory-managment-and-thrust-in-cuda)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T17:45:13.867

Thrust 的[`custom_temporary_allocation`](https://github.com/thrust/thrust/blob/1.6.0/examples/cuda/custom_temporary_allocation.cu)示例演示了如何为 Thrust 算法内部使用的临时存储构建自己的自定义分配器。该示例使用缓存方案来执行分配，但原则上您可以使用您喜欢的任何策略。

基本上，这个想法是构建一个从 CUDA 后端派生的自定义后端，专门用于自定义分配。然后，当您想在自定义分配器中使用算法时，在调用算法时将 Thrust 指向自定义后端。

请注意，此功能需要 Thrust 1.6 或更高版本。

# python - python: 更改 setup.py 以在本地文件系统目录中搜索所需的依赖项

> ID：12076381
> 
> 赞同：5
> 
> 时间：2012-08-22T15:21:29.973
> 
> 标签：python, installation, setup.py, build-dependencies

我的项目依赖于很多包。有些列在 pypi 上，有些没有。

我现在有一个名为“external-packages”的文件夹，其中保存了我需要的不在 pypi 上的包的 .tar.gz 文件。

我想更改 setup.py 以便当它读取 install_requires 部分并找到尚未安装的包时，首先，它应该查看“external-packages”文件夹，然后如果失败，那么它应该去搜索在 pypi 上。

这可能吗？这个怎么做？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:02:32.367

看来您使用 setuptools/distribute （由`install_requires`选项指示）。您可以使用`dependency_links`设置，`setup.py`但它会限制您分发包的选项。例如，您可能使用一组依赖项进行开发，多组依赖项用于测试，另一组用于 debian 包，等等。

您可以在命令行中的配置文件中指定[`easy_install`](http://packages.python.org/distribute/easy_install.html#installing-on-un-networked-machines)这[`pip install`](http://www.pip-installer.org/en/latest/usage.html#install-packages)两个选项。它允许为每个特定案例使用正确的一组需求，而无需进行编辑。`--find-links``--index``setup.py`

您还可以使用[需求文件](http://www.pip-installer.org/en/latest/requirements.html#requirements-files)来指定应安装哪些版本以及从何处获取它们。

# eclipse - 如何使用 Eclipse 将 SimpleSwingApplication 导出为可执行 JAR？

> ID：12076385
> 
> 赞同：2
> 
> 时间：2012-08-22T15:21:58.120
> 
> 标签：eclipse, swing, scala, classpath, executable-jar

我正在尝试`SimpleSwingApplication`使用 Eclipse 将 a 作为可执行 JAR 导出：

```
package gui

import scala.swing._

object Startup extends SimpleSwingApplication {
  // ...
} 
```

但是，当我选择 Export.../Java/JAR 文件并进入我必须选择 Main 类的部分时，Eclipse 似乎无法找到一个。手动输入`gui.Startup`没有帮助。

我想这可能是因为`Startup`它是一个对象而不是一个类，或者它可能与继承`main`方法而不是自己提供一个方法有关。但即使是这个简单的代码也无法导出：

```
package gui

class Main {
  def main(args: Array[String]) {
    println("hello")
  }
} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:19:13.953

尝试创建自己的清单文件，并自己指定主类。当您导出 jar 文件时，eclipse 将出现一个屏幕，您可以在其中选择自己的清单文件而不是生成清单文件。

这个示例清单应该可以解决问题：

```
Manifest-Version: 1.0
Created-By: 1.6.0 (Sun Microsystems Inc.)
Main-Class: MyPackage.MyClass 
```

# grails - 在控制器 grails 中渲染

> ID：12076389
> 
> 赞同：0
> 
> 时间：2012-08-22T15:22:18.573
> 
> 标签：grails

一旦进行了控制器保存操作，我正在尝试重定向用户我正在使用这似乎不起作用：

```
 render(action:"index", controller:"public" ) 
```

我想去公共控制器中的索引操作。我在浏览器中得到的只是这样的：

```
 ['action':'index', 'controller':'public'] 
```

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:28:54.087

您正在调用“渲染”，但正在考虑“重定向”。渲染只能转到此控制器上的另一个视图。请参阅[http://grails.org/doc/latest/ref/Controllers/redirect.html](http://grails.org/doc/latest/ref/Controllers/redirect.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:27:54.360

我发现我需要使用重定向而不是渲染。

```
 redirect(controller: "public", action: "index") 
```

# objective-c - 如何从情节提要对笔尖进行转场

> ID：12076393
> 
> 赞同：2
> 
> 时间：2012-08-22T15:22:37.543
> 
> 标签：objective-c, ios, storyboard, nib

我当前项目的 90% 是在情节提要中完成的，但我也使用单个 xib 视图控制器来“输入您的 pin”视图，因为这是将它集成到我导入到我的项目中的 github 项目中的方式。我需要从 xib 回到故事板。使用 push 方法从情节提要到 xib 很容易，但现在我想模态到情节提要中的另一个视图。有什么建议么？首先，我尝试将 xib 转换为情节提要中的视图，但失败了，因为它旨在与 nib 一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:46:34.400

您可以通过调用它的实例化方法在情节提要上创建任何视图控制器的新实例。

所以做类似的事情：

```
[storyboard instantiateViewControllerWithIdentifier:@"identifier"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:19:53.970

首先从情节提要中获取所需的 ViewController（因此您需要在情节提要中为视图控制器设置标识符

```
ViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"identifier"]; 
```

然后继续到这个控制器

```
[self presentModalViewController:vc animated:YES]; 
```

# c++ - 在从不再加载的动态库实例化的对象上使用在主代码库中定义的模板类方法时出现分段错误

> ID：12076396
> 
> 赞同：4
> 
> 时间：2012-08-22T15:22:45.203
> 
> 标签：c++, linux, templates, dynamic, segmentation-fault

# 背景

我有一个多组件 C++ 代码库。有一个包含主要可执行文件的中央组件，并且有许多组件编译为动态模块（.so 文件）。中央可执行文件能够在运行时加载和卸载它们（如果愿意，可以热交换它们）。

有一个名为 Scheduler.h 的文件，它声明了一个`Scheduler`类，该类在特定时间或间隔提供同步事件，以及一些用于向调度程序发出请求的辅助类。有一个`Event`类，它保存计时数据，还有一个抽象`action`类，它有一个纯虚函数，`DoEvent`. 还有一个 Scheduler.cpp，它包含了 Scheduler.h 中大部分功能的定义（模板类除外，它们在头文件中声明和定义）。

An`Event`拥有一个指向 的子类的指针`action`，这就是调度程序的功能是如何控制的。Scheduler.h 本身提供了其中一些子类。

`action`声明如下：

```
class action
{
    action();
    virtual ~action();
    virtual DoEvent() = 0;
}; 
```

`FunctionCallAction`, 的子类`action`声明和定义如下：

```
template <class R, class T>
class FunctionCallAction : public action
{
public:
    FunctionCallAction(R (*f)(T), T arg) : argument(arg), callback(f) {}
    ~FunctionCallAction() {}
    void DoEvent() { function(argument); }
private:
    R (*callback)(T);
    T argument;
}; 
```

`HelloAction`，另一个子类，声明如下：

```
// In Scheduler.h
class HelloAction : public action
{
    ~HelloAction();
    void DoEvent();
};

// in Scheduler.cpp
HelloAction::~HelloAction() {}
void HelloAction::DoEvent() { cout << "Hello world" << endl; } 
```

`CloneWatch`我在 CloneWatch.h 中声明并在 CloneWatch.cpp 中定义的动态库之一使用此调度程序服务。在其构造函数中，它创建一个持久事件，计划每 300 秒运行一次。在它的析构函数中，它删除了这个事件。加载此模块时，它会获取对现有调度程序对象的引用。“加载”模块的过程需要使用`dlopen()`打开库，`dlsym()`搜索工厂方法（恰当地命名为`Factory`），并使用该工厂方法创建某个对象的实例（语义不相关）。为了关闭库，工厂方法创建的对象被删除，并被`dlclose()`调用以从进程的地址空间中删除库。

在运行时加载和卸载库由命令控制。

```
// relevant declarations
const float DB_CLEAN_FREQ = 300;
event_t cleanerevent; // event_t is a typedef to an integral type
void * RunDBCleaner(void *); // static function of CloneWatch
Scheduler& scheduler;

// in constructor:
Event e(DB_CLEAN_FREQ, -1, new FunctionCallAction<void *, void *>(CloneWatch::RunDBCleaner, (void *) this));
cleanerevent = scheduler.AddEvent(e);

// in destructor:
scheduler.RemoveEvent(cleanerevent); 
```

`Scheduler::RemoveEvent`是懒惰的。它不是遍历事件的整个优先级队列，而是维护一组“已取消的事件”。如果在其事件处理过程中，它从其队列中弹出一个 ID 与其已取消事件集中的 ID 匹配的事件，则该事件不会运行或重新安排并立即被清除。清理事件的过程需要删除`action`它拥有的对象。

# 问题

我遇到的问题是程序段错误。故障发生在调度器的事件循环内部，大致如下：

```
while (!eventqueue.empty() && e.Due())
{
    Event e = eventqueue.top();
    eventqueue.pop();
    if (cancelled.find(e.GetID()) != cancelled.end())
    {
        cancelled.erase(e.GetID());
        e.Cancel();
        continue;
    }

    QueueUnlock();
    e.DoEvent();
    QueueLock();

    e.Next();

    if (e.ShouldReschedule()) eventqueue.push(e);
} 
```

调用`e.Cancel`删除事件的操作。调用`e.Next` *可能会*删除事件的操作（仅当事件自行过期时。在这种情况下， e.ShouldReschedule 将返回 false 并且事件将被丢弃）。出于测试目的，我在动作类和子类的析构函数中添加了一些打印语句，以查看发生了什么。

# 踢球者

如果事件从 中删除`e.Next`，直到过期，一切都会正常进行。但是，当我卸载模块时，导致事件通过取消列表退出，一旦调用操作的析构函数，程序就会遇到分段错误。这会在模块卸载后的某个时间发生，因为调度程序对事件的延迟删除

它不会进入任何析构函数，而是立即出错。我已经尝试了事件操作的托管和非托管删除的各种组合，以及在不同的地方和不同的方式进行。我已经通过 valgrind 和 gdb 运行它，但它们都只是礼貌地告诉我发生了分段错误，而且对于我的生活，我无法找出原因（虽然我不知道如何很好地使用任何一个） .

如果我也调用`e.Cancel`循环的主体，强制删除，并注释掉重新安排事件的行，从而强制事件一执行就取消，则不会发生故障。

我也用 a 替换了这个动作`HelloAction`，但是这个没有错。关于析构函数的一些非常具体`FunctionCallAction`的问题显然在于问题所在。我或多或少地消除了语义错误，我怀疑这是编译器或动态链接器的一些模糊行为的结果。有没有人看到问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T15:22:45.203

# 这是编译器的行为。

问题是`FunctionCallAction`在其头文件中定义（不仅仅是声明）。这是作为模板类的必要副作用，但是**如果**在头文件中定义类，则声明具有 a 功能的常规类会`FunctionCallAction<void *, void *>`产生相同的结果。

 ****这是对在不寻常情况下具有意外副作用的模板类的普通限制。**

原因是如果一个类的定义在头文件中，它会被编译到每个使用它的文件中。因为我是从我的动态库的代码中使用它的，所以它正在被编译。因此，当库被卸载时，析构函数的代码以及整个类的其余部分不再存在。

我通过创建一个`FunctionCallAction`非模板类并在 Scheduler.h 中仅保留其声明并将其定义移至 Scheduler.cpp 来解决此问题。这样，功能由始终加载的核心可执行文件提供，而不是由动态模块单独提供。

对操作的析构函数的调用是段错误，因为析构函数本身不再是进程地址空间的一部分。**

# vb.net - 在 VB.NET 中创建字符串时保留小数点

> ID：12076401
> 
> 赞同：0
> 
> 时间：2012-08-22T15:23:08.857
> 
> 标签：vb.net

我需要一起创建一个各种变量的字符串，我需要用前导零填充它，如果小数点后的值为零，我还需要保留小数点。如果变量只是零，那么我想完全抑制它并用空格填充

例如：

如果我在变量中得到 0 并且它的大小是 3，我希望字符串是：“” 如果我在变量中得到 9 并且它的大小是 3，那么我想要字符串：“009”如果我在变量中得到 90.0 它是大小是 10，然后我想要字符串：“00000090.0”

我正在尝试使用：

```
public function PadField(byval field as object, byval size as int16) as string

   dim fieldstring as string = string.empty
   dim fieldDate as date

   '  here I want to check for a numeric variable
   if isnumeric(field) then

      '  if the variable is an integer with a value of zero...
      if cint(field) = 0 then
         stringField = string.empty.padleft(size,"0")

      '  else if the variable is an integer greater than zero...
      elseif cint(field) > 0 then
         stringField = field.toString.padLeft(size,"0")
      End If

   ' else if a date, I want date to look like MM/dd/yyyy...
   elseif IsDate(field) then
      fieldDate = field
      strigField = fieldDate.ToString("MM/dd/yyyy")

   '  else if a string, then I want to pad after with spaces
   else
      stringField = field.ToString.Trim.toUpper.PadRight(size," ")
   End If

   return stringField

end Function 
```

问题是当我传入一个像 1234.0 这样的变量时，我得到以下结果：

```
"0001234" 
```

但我想要：

```
"0001234.0" 
```

如果我发送 1234.1，那么它可以工作，如果我发送 1，我会得到“0001234.1”，如果我发送 90，我想得到“001”，如果我发送日期，我想得到“090”，我想要如果我发送一个字符串来获得“08/21/2012”，我想获得“NAME”

当小数为零时，任何人都可以帮助如何保留小数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T17:10:04.023

如果小数点的数量发生变化，您将不得不实现更复杂的东西，但如果您可以使用两个小数点，这将起作用：

```
 stringField = CDbl(field).ToString("0.00").PadLeft(size, "0") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T16:44:17.397

我无法重现该行为，您的字符串是否有可能在某处被转换为数字数据类型？如果我将“123.0”传递给下面的例程，我会得到 00000123.0。在我看来，问题出在其他地方。

```
Public Sub test(o As Object)
    If IsNumeric(o) Then
        If (CInt(o)) > 0 Then
            MessageBox.Show(o.ToString.PadLeft(10, CChar("0")))
        End If
    End If

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T18:13:45.780

正如 PatFromCanada 所说，如果你将它作为字符串传递，你就可以了。如果您将它作为整数传递，它将被推断为整数，而不是字符串。这不是你想要的。

# magento - Magento：如何从自定义选项的一组单选按钮中获取选定的值？

> ID：12076406
> 
> 赞同：0
> 
> 时间：2012-08-22T15:23:19.833
> 
> 标签：magento, prototypejs

我有一个自定义选项，其中包含 2 个选项。没有按钮组或 Magento 创建的东西，单选按钮和标签在 <ul> 中，那么我将如何获得选定的单选按钮？这是代码：

```
<ul id="options-22-list" class="options-list">
    <li>
        <input id="options_22_2" class="radio validate-one-required-by-name product-  custom-option" type="radio" price="6.8" value="40" name="options[22]" onclick="opConfig.reloadPrice()">
        <span class="label">
            <label for="options_22_2">
                option1 
                <span class="price-notice">
                    +
                    <span class="price">€6.80</span>
                    </span>
             </label>
            </span>
    </li>
    <li>
        same as above just with the other option and other ids
    </li>
</ul> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:40:33.747

我想它应该是某种形式。

在 PrototypeJS 中，您可以通过以下方式获取选中的单选按钮值：

```
var radioValue = Form.getInputs('myform','radio','options[22]').find(function(radio) { 
    return radio.checked; 
}).value; 
```

# tomcat - 跨域脚本启用

> ID：12076408
> 
> 赞同：0
> 
> 时间：2012-08-22T15:23:23.940
> 
> 标签：tomcat, servlets, cross-domain, servlet-filters

我正在使用 Tomcat，但我在使用 Access-Control-Allow-Origin 时遇到了一些问题。

据我了解，我可以修改我的 Web 服务的 web.xml 文件以向全世界开放该服务。（不确定如何确定，但我不想这样做。）

如何添加过滤器以允许特定网站与之交互？例如 my1.website.com、my2.website.com，当然还有它自己。

我认为应该修改的 web.xml 区域是这个......

```
<servlet>
    <description>My Description</description>
    <display-name>My Service's Display Name</display-name>
    <servlet-name>My Servlet's Name</servlet-name>
    <servlet-class>My Servlet's Class</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>My Servlet's Name</servlet-name>
    <url-pattern>/MyPattern</url-pattern>
</servlet-mapping> 
```

我是否使用CORS之类的东西并添加...

```
<servlet>
    .
    .
    .
    <filter>
        <filter-name>CORS</filter-name>
        <filter-class>com.thetransactioncompany.cors.CORSFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>CORS</filter-name>
        <url-pattern>/*</url-pattern>
        <url-pattern>my1.website.com</url-pattern>
        <url-pattern>my2.website.com</url-pattern>
    </filter-mapping>
</servlet> 
```

另外，有没有可能做类似...

```
<url-pattern>*.website.com</url-pattern> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:54:12.157

我不得不通过服务器所有者，因为他们已经运行了许多过滤器，我不想干扰其他过滤器。

但是，其他对此感兴趣的人我终于找到了一些不错的文档，主要是...

[http://software.dzhuvinov.com/cors-filter-installation.html](http://software.dzhuvinov.com/cors-filter-installation.html)

[http://software.dzhuvinov.com/cors-filter-configuration.html](http://software.dzhuvinov.com/cors-filter-configuration.html)

[http://software.dzhuvinov.com/files/cors/web.xml.txt](http://software.dzhuvinov.com/files/cors/web.xml.txt)

# ios - 向 iOS 应用程序添加正在运行的计数显示计时器，例如时钟秒表？

> ID：12076409
> 
> 赞同：14
> 
> 时间：2012-08-22T15:23:24.480
> 
> 标签：ios, objective-c, cocoa-touch, time, nstimer

我正在使用一个以 5 秒为增量处理设备运动事件和更新界面的应用程序。我想向应用程序添加一个指示器，以显示应用程序运行的总时间。看起来像秒表一样的计数器，如原生 iOS 时钟应用程序是一种计算应用程序运行时间并将其显示给用户的合理方式。

我不确定的是这种秒表的技术实现。这就是我的想法：

*   如果我知道界面更新之间的时间间隔，我可以将事件之间的秒数相加，并将秒数作为局部变量。或者，一个 0.5 秒间隔的预定定时器可以提供计数。

*   如果我知道应用程序的开始日期，我可以使用每次接口更新将局部变量转换为日期`[[NSDate dateWithTimeInterval:(NSTimeInterval) sinceDate:(NSDate *)]`

*   我可以使用具有短时间样式的 NSDateFormatter 使用`stringFromDate`方法将更新的日期转换为字符串

*   生成的字符串可以分配给界面中的标签。

*   结果是秒表会针对应用程序的每个“滴答”进行更新。

在我看来，这个实现有点太重了，不像秒表应用程序那么流畅。是否有更好、更具交互性的方式来计算应用程序运行的时间？也许iOS已经为此提供了一些东西？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-22T15:38:16.533

如果您在基本横幅项目中查看[Apple 的 iAd 示例代码，](https://developer.apple.com/library/ios/samplecode/iAdSuite_Storyboard/Listings/ContainerBanner_ContainerBanner_TextViewController_m.html)他们有一个简单的计时器：

```
NSTimer *_timer; 
_timer = [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(timerTick:) userInfo:nil repeats:YES]; 
```

以及他们的方法

```
- (void)timerTick:(NSTimer *)timer
{
    // Timers are not guaranteed to tick at the nominal rate specified, so this isn't technically accurate.
    // However, this is just an example to demonstrate how to stop some ongoing activity, so we can live with that inaccuracy.
    _ticks += 0.1;
    double seconds = fmod(_ticks, 60.0);
    double minutes = fmod(trunc(_ticks / 60.0), 60.0);
    double hours = trunc(_ticks / 3600.0);
    self.timerLabel.text = [NSString stringWithFormat:@"%02.0f:%02.0f:%04.1f", hours, minutes, seconds];
} 
```

它只是从启动开始运行，非常基本。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-08-22T15:45:25.267

几乎是@terry lewis 的建议，但经过算法调整：

1）安排一个计时器

```
NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(timerTick:) userInfo:nil repeats:YES]; 
```

2）当计时器触发时，获取当前时间（这是调整，不要计算滴答声，因为如果计时器有摆动，滴答声计数会累积错误），然后更新 UI。此外，NSDateFormatter 是一种更简单、更通用的格式化时间以进行显示的方法。

```
- (void)timerTick:(NSTimer *)timer {
    NSDate *now = [NSDate date];

    static NSDateFormatter *dateFormatter;
    if (!dateFormatter) {
        dateFormatter = [[NSDateFormatter alloc] init];
        dateFormatter.dateFormat = @"h:mm:ss a";  // very simple format  "8:47:22 AM"
    }
    self.myTimerLabel.text = [dateFormatter stringFromDate:now];
} 
```

# c# - 由于“Prblm 事件名称 CLR20r3，WinForms 停止工作

> ID：12076414
> 
> 赞同：0
> 
> 时间：2012-08-22T15:23:31.347
> 
> 标签：c#, visual-studio-2010, sql-server-2008

我在 C# 中创建了一个程序，并使用 SQL Server 2008 作为数据库和程序 .exe 包的 installshield

一切正常我的意思是程序可以正常安装并且数据库或设置中没有错误

但是当我尝试打开程序时，它给出了以下错误（程序签名），我截取了错误截图

我在我的项目中使用 dotNetBar.dll 并将其包含在 setup 文件夹中

我更改了安装路径和数据库文件夹，但仍然是同样的错误

错误截图第 1 部分：

![在此处输入图像描述](../Images/d785378e9491ddeff2915efcd4e3217c.png)

错误截图第 2 部分：

![在此处输入图像描述](../Images/81b2c3ff0bfd3fae1cafd52357d87bbe.png)

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:33:11.283

错误是`FileNotFoundException`，您的程序正在尝试打开一个不存在的文件并且您没有在代码中处理它。

你把所有东西都复制了吗？

# javascript - 使用 JavaScript 获取附加了 HTMLEditorExtendor 的 ASP 文本框元素的值

> ID：12076421
> 
> 赞同：0
> 
> 时间：2012-08-22T15:23:54.637
> 
> 标签：javascript, asp.net, html, textbox, ajaxcontroltoolkit

我有一个奇怪的问题。我有一个带有 ajaxToolkit HtmlEditorExtender 的文本框。我需要使用 javascript 获取放入此文本框中的文本。

我有一个简单的测试设置：

```
var element = document.getElementById('<%=txtUserInput.ClientID%>');
alert(element); 
```

这似乎报告该对象是一个 HTML textarea 元素，所以我使用 .value 来尝试获取里面的内容，然后我尝试了 .text 因为 .value 不起作用。

```
alert(element.Value);
alert(element.Text); 
```

这些都给了我一个带有“未定义”的弹出窗口。如何从此文本框中获取值？

我看过这个帖子：

[ASP.NET 控件的 JavaScript getElementById 返回 null？](https://stackoverflow.com/questions/1119018/javascript-getelementbyid-for-asp-net-control-returns-null)

还有这个：

[JavaScript 通过 .value 或 .innerHTML 获取 TextArea 输入？](https://stackoverflow.com/questions/5314186/javascript-get-textarea-input-via-value-or-innerhtml)

这是我的 HTML 元素

```
<asp:TextBox ID="txtUserInput" Height="100%" Rows="10" Width="100%" TextMode="MultiLine"
runat="server" />
        <ajaxToolkit:HtmlEditorExtender ID="HtmlEditorExtender_txtUserInput"
            TargetControlID="txtUserInput" DisplaySourceTab="false" runat="server">
            <Toolbar>
                <ajaxToolkit:Bold />
                <ajaxToolkit:ForeColorSelector />
                <ajaxToolkit:Italic />
                <ajaxToolkit:JustifyLeft />
                <ajaxToolkit:JustifyCenter />
                <ajaxToolkit:JustifyRight />
            </Toolbar>
        </ajaxToolkit:HtmlEditorExtender> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:25:23.263

".Value" and ".Text" are ASP.NET control properties, not Javascript element properties. You need to use ".value".

# java - OutOfMemoryError 创建位图

> ID：12076422
> 
> 赞同：6
> 
> 时间：2012-08-22T15:23:57.297
> 
> 标签：java, android

正如标题所说，我在加载布局时抛出了内存不足异常。有人会认为这是一个内存泄漏问题，但经过 2 天的斗争后，我不再那么确定了。该应用程序有 10 多个活动，其中大部分都有背景图像。

我所做的一些事实/发现：

*   到目前为止，问题仅出现在运行 Android 4.0.3 的 Galaxy Nexus 上。我无法在 Nexus S (4.1.1) 和 Galaxy S II (2.3.3) 上重现它。

*   屏幕方向不会改变。事实上，无论如何，我的大部分活动都锁定在肖像上。

*   只是为了笑，我在打开新活动时添加了调用`finish()`，因此当时内存中不会有多个活动。已验证`onDestroy`正在调用。

定义为：

```
@Override
public void onDestroy()
{
    super.onDestroy();
    cleanupDrawables(contentView);

    // null all the fields referencing views and drawables

    System.gc();
} 
```

哪里`cleanupDrawables()`是：

```
protected static void cleanupDrawables(View view)
{
    cleanupDrawable(view.getBackground());

    if (view instanceof ImageView)
        cleanupDrawable(((ImageView)view).getDrawable());
    else if (view instanceof TextView)
    {
        TextView tv = (TextView)view;
        Drawable[] compounds = tv.getCompoundDrawables();
        for (int i = 0; i < compounds.length; i++)
            cleanupDrawable(compounds[i]);
    }
    else if (view instanceof ViewGroup && !(view instanceof AdapterView))
    {
        ViewGroup vg = (ViewGroup)view;
        for (int i = 0; i < vg.getChildCount(); i++)
            cleanupDrawables(vg.getChildAt(i));
        vg.removeAllViews();
    }
}

protected static void cleanupDrawable(Drawable d)
{
    if (d == null)
        return;

    d.setCallback(null);

    if (d instanceof BitmapDrawable)
        ((BitmapDrawable)d).getBitmap().recycle();
    else if (d instanceof LayerDrawable)
    {
        LayerDrawable layers = (LayerDrawable)d;
        for (int i = 0; i < layers.getNumberOfLayers(); i++)
            cleanupDrawable(layers.getDrawable(i));
    }
} 
```

*   查看 Eclipse 堆检查器，内存似乎是稳定的，即某些活动比其他活动占用更多内存，但它在关闭时被释放，并且随着时间的推移它看起来很稳定。

*   根据有关 SO 图像的相关答案，图像存储在本机内存中，但是[这个](http://www.youtube.com/watch?v=_CruQY55HOk)家伙声称自 Android 3 以来它们应该在堆上，所以如果这确实是图像内存泄漏，我应该会看到内存增加。

我努力的最终结果是我仍然会出现内存不足错误，尽管没有以前那么快。在发生错误之前，我开始看到可见的位图损坏，而在我添加`cleanupDrawables()`代码之前情况并非如此。我推断调用`Bitmap.recycle()`会导致损坏，即使此代码仅被调用 on `onDestroy`。损坏出现在作为出现在许多活动上的常见样式的一部分的位图上以及仅在一个活动上显示的位图上。

总之，我的调查结果是相当不确定的。在这一点上，我不知道还能尝试什么。

错误堆栈跟踪供参考：

```
08-22 10:49:51.889: E/AndroidRuntime(31697): java.lang.RuntimeException: Unable to start activity ComponentInfo{klick.beatbleeds/klick.beatbleeds.Bleeds}: android.view.InflateException: Binary XML file line #67: Error inflating class <unknown>
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.app.ActivityThread.access$600(ActivityThread.java:122)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.os.Looper.loop(Looper.java:137)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.app.ActivityThread.main(ActivityThread.java:4340)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at java.lang.reflect.Method.invokeNative(Native Method)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at java.lang.reflect.Method.invoke(Method.java:511)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at dalvik.system.NativeStart.main(Native Method)
08-22 10:49:51.889: E/AndroidRuntime(31697): Caused by: android.view.InflateException: Binary XML file line #67: Error inflating class <unknown>
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.view.LayoutInflater.createView(LayoutInflater.java:606)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at klick.beatbleeds.ActivityBase.setContentView(ActivityBase.java:82)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at klick.beatbleeds.Bleeds.onCreate(Bleeds.java:40)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.app.Activity.performCreate(Activity.java:4465)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
08-22 10:49:51.889: E/AndroidRuntime(31697):    ... 11 more
08-22 10:49:51.889: E/AndroidRuntime(31697): Caused by: java.lang.reflect.InvocationTargetException
08-22 10:49:51.889: E/AndroidRuntime(31697):    at java.lang.reflect.Constructor.constructNative(Native Method)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.view.LayoutInflater.createView(LayoutInflater.java:586)
08-22 10:49:51.889: E/AndroidRuntime(31697):    ... 23 more
08-22 10:49:51.889: E/AndroidRuntime(31697): Caused by: java.lang.OutOfMemoryError
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.graphics.Bitmap.nativeCreate(Native Method)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:524)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:499)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.content.res.Resources.loadDrawable(Resources.java:1937)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.view.View.<init>(View.java:2780)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.view.ViewGroup.<init>(ViewGroup.java:385)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.widget.LinearLayout.<init>(LinearLayout.java:174)
08-22 10:49:51.889: E/AndroidRuntime(31697):    at android.widget.LinearLayout.<init>(LinearLayout.java:170)
08-22 10:49:51.889: E/AndroidRuntime(31697):    ... 26 more 
```

这是其中一个视图的屏幕截图，以了解此处使用了多少图像 ![在此处输入图像描述](../Images/ddbc0eb52d28326ae8941edba5693cb6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T17:27:11.673

使用这些静态方法找出确切的问题：

```
public static void showBitmapSize(Bitmap bitmap) {
    Log.d("test", "bitmap dimensions: w:" + bitmap.getWidth() + ", h:" + bitmap.getHeight() + " memory: " + (bitmap.getRowBytes() * bitmap.getHeight() / 1048576d));
} 
```

还有最重要的：

```
static double lastavail;
static double initavail;
static boolean first = true;

public static void showMemoryStats() {
    showMemoryStats("");
}

public static void showMemoryStats(String message) {
    Log.i("memory", message + "----------------------------------------------------------------------------------------");
    double nativeUsage = Debug.getNativeHeapAllocatedSize(); 
    Log.i("memory", "nativeUsage: " + (nativeUsage / 1048576d));
    //current heap size 
    double heapSize =  Runtime.getRuntime().totalMemory();
//      Log.i("memory", "heapSize: " + (heapSize / 1048576d));
    //amount available in heap 
    double heapRemaining = Runtime.getRuntime().freeMemory();
//      Log.i("memory", "heapRemaining: " + (heapRemaining / 1048576d)); 
    double memoryAvailable = Runtime.getRuntime().maxMemory() - (heapSize - heapRemaining) - nativeUsage;
    Log.i("memory", "memoryAvailable: " + (memoryAvailable / 1048576d));

    if (first) {
        initavail = memoryAvailable;
        first = false;
    }
    if (lastavail > 0) {
        Log.i("memory", "consumed since last: " + ((lastavail - memoryAvailable) / 1048576d));
    }
    Log.i("memory", "consumed total: " + ((initavail - memoryAvailable) / 1048576d));

    lastavail = memoryAvailable;

    Log.i("memory", "-----------------------------------------------------------------------------------------------");
} 
```

除以 1048576 只是为了得到以 MB 为单位的值（至少对我来说，以 MB 为单位更容易思考）。

在调用`showMemoryStats`之前用一些有意义的信息`setContentView()`打一个电话，在它之后再打一个。当你开始一项新的活动时，等等。最后你会知道你的问题的确切原因。

手动回收可能是必要的。我必须在我的应用程序的某些地方实现它。还使用位图密集型（许多背景和图片）并且在所有设备中都存在这种问题。通过这些方法，我能够找到所有问题并妥善处理。

啊。你的问题有一个可能的快速解决方案，你说它只出现在 Galaxy Nexus 中。这是您提到的唯一 xhdpi 设备。**您可能仅在文件夹 drawable 或 drawable-hdpi 中拥有所有位图。xhdpi 设备将从 drawable 或 drawable-hdpi 获取位图并放大（尽管它们可能已经具有正确的大小），这将消耗大量内存。解决方案：创建 drawable-xhdpi 文件夹，如果不存在，并将位图的副本放在那里。**

# sql - 是否可以同时更新 SQL Server 数据库和 Informix 数据库？

> ID：12076424
> 
> 赞同：3
> 
> 时间：2012-08-22T15:24:00.213
> 
> 标签：sql, sql-server, database-connection, informix, database-programming

我想知道是否可以同时添加/更新/删除 SQL Server 数据库表以及 Informix 数据库表。

两个数据库将具有相同的表（数据和所有），因此查询只会根据要访问的数据库而改变。出于某种原因，我们需要两个数据库中的数据并实时保持。

是否可以使用 SQL 触发器或 SProc 来执行此操作？

任何有关如何做到这一点的见解，或朝着正确方向的推动，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:44:05.897

进行同步更新，即。通过使用链接服务器的分布式事务，可能用于触发器，虽然在技术上是可行的，但我绝对不建议这样做。Aaron 提出了 XA 的可靠性问题，但我的观点不同：可用性。如果在 Informix 中无法连接和更新，您在 SQL Server 中的更新将失败。Informix 站点的停机时间（修补、维护，更不用说灾难）将意味着 SQL Server 站点的停机时间，从而使您的 5 个 9 向 9 个 5 快速推进……这就是为什么我强烈主张将更新应用程序解耦的原因。[事务复制](http://msdn.microsoft.com/en-us/library/ms151176.aspx)就是这样一个解耦示例，它支持异构环境（即下游的 Informix 客户端接受更改）。

您将延迟更新可见性（SQL Server 中的状态将在延迟后反映在 Informix 中，延迟可能是毫秒、秒、分钟，甚至是糟糕的一天中的几个小时）。更新是一种方式，没有任何东西从 Informix 流回 SQL Server。但是在异构环境中进行主-主复制是连 Chuck Norris 都不会尝试的，只是说。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T14:30:41.780

Maintaining two different DBMS with a single transaction requires a transaction monitor such as the XA system to coordinate the transactions. There are such systems. The XA specification is typically the underlying standard. Both Microsoft's SQL Server and IBM's Informix work with such systems, and it is possible to have SQL Server and Informix controlled by the same transaction monitor. I have fewer qualms about the technical competency of such systems than the others who've answered; I share their concerns about whether it is appropriate for you.

这样的系统非常重量级。如果您想要一致性，那么修改问题中描述的单个表的所有事务都需要使用相同的 XA 服务（复数；可能一个用于插入，一个用于更新，一个用于删除）来执行此操作。此外，如果相同的事务也需要管理任何其他表，那么您还需要为这些表添加和使用服务。正是这一方面往往使此类系统难以管理。

在站点一致之前使用可能延迟的复制系统可能比尝试绝对同步要好，除非对这种同步有令人信服的要求。

如果确实需要绝对同步，则使用事务监视器。

*   不要*自己*滚动。

他们很难做对。处理所有特殊情况很棘手。而且（在你需要绝对同步的假设下）做错代价高昂但很容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T15:37:53.833

这取决于您对“可能”的定义。从技术上讲，您可以使用一种称为“[两阶段提交](https://en.wikipedia.org/wiki/Two-phase_commit_protocol)”的技术。

这个想法是您将数据发送到两个数据库，然后执行“准备提交”命令，该命令执行提交数据所需的所有操作，但提交数据除外。如果准备失败，提交也会失败。如果准备成功，则提交必须成功。

绝妙的主意，在实践中行不通。一种常见的情况是，您将提交发送到两个数据库，其中一个在途中丢失（网络中断）。很少发生，但是当它发生时，您的状态不一致，并且由于此步骤不能失败，因此没有清理的好方法。

所以我的解决方案是这样的：

1.  您将数据加载到一个新表中，该表有两个额外的列，您可以在其中说“服务器 X 已看到此记录”

2.  您添加一个作业，它将服务器 X 的所有作业复制到服务器 X 并更新相应的列。以可以随时中止和重新启动的方式编写作业（即，它必须能够处理目标端已经存在数据的情况）。

这样，您可以以一致的容错方式将数据分发到任意数量的服务器。

# c# - 关于 System.Threading.Timer 和 Parallel 的一些问题

> ID：12076430
> 
> 赞同：0
> 
> 时间：2012-08-22T15:24:22.687
> 
> 标签：c#, .net, multithreading

我想每隔 x 秒启动一次我的一些功能。但我不想等待任何功能完成，然后再启动该功能。假设我将计时器设置为 5 秒并开始`functionX()`，但 5 秒后`functionX()`没有完成 => 我想`functionX()`在新线程中重新开始。我还希望一组功能同时启动。

这就是为什么我认为我必须使用`System.Threading.Timer`并且`Parallel`让我们写一个简短的例子，我认为它应该是这样的：

```
class Program
    {
        private static System.Threading.Timer timer;
        private static int interval = 2000;

        static void Main(string[] args)
        {
            Console.WriteLine("go");
            Run();
            Console.WriteLine("end");
            Console.ReadKey();
        }

        private static void Run()
        {
            timer = new System.Threading.Timer(TimerCallback, null, 0, interval);
        }

        private static void TimerCallback(Object o) {
            Parallel.Invoke(() => FunctionA(), () => FunctionB(), () => FunctionC());
        }

        private static void FunctionA()
        {
            Console.WriteLine("A");
        }

        private static void FunctionB()
        {
            Console.WriteLine("B");
        }

        private static void FunctionC()
        {
            Console.WriteLine("C");
        }
    } 
```

这可以吗？有什么建议么？即使这段代码有某种错误：我想问另一个关于我的输出的问题 - 如果我启动这段代码，我会得到类似这样的输出：

```
go
end
A
B
C
C
A
B
C
A
B
C
B
A 
```

嗯。第一个输出`go`很好，但为什么是第二个，`end`为什么不`A`，，？这正常吗，输出 A、B、C 在第一个输出随机之后以某种方式出现？`B``C`

下一个我不明白的问题：如果我删除该行 `Console.ReadKey();`，我看不到任何输出。

```
 static void Main(string[] args)
        {
            Console.WriteLine("go");
            Run();
            Console.WriteLine("end");
        } 
```

我的意思是控制台正在启动，但在几毫秒后它关闭并且不再打开。但它应该会出现，因为我一次又一次地调用 A，B，C，所以一个新的控制台应该一次又一次地出现。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:33:47.690

main 方法在计时器创建后立即返回。这就是为什么`end`写得这么早。您的所有其余代码都在其他线程中执行。

您的计时器方法将三个作业发送到 .NET 并行扩展，这些扩展也在后台线程中执行作业。这就是为什么您看不到像 ABC 这样的有序输出，而是看到 ACB、BCA CBA 等。

因此，您有一个主线程、一个计时器后台线程和最多三个用于输出的工作线程（取决于您的 CPU）。

使`Console.ReadKey()`邮件线程等待键盘输入。在此期间，其他线程可以处理它们的工作。当您删除`ReadKey`调用时，您的程序在写入后立即结束，`end`并且不会等待其他线程完成。

更改您的代码不仅要编写开始、结束和 ABC，还要添加`Thread.CurrentThread.ManagedThreadID`到输出。然后你可以看到哪个线程运行哪个方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:36:19.247

并行（和其他类似框架）不保证启动任务（线程）的执行顺序。如果你想保证执行顺序是''A，B，C''，你可以将它们放入一个函数中，并在线程中执行。

另一方面，从“Main”退出会中断正在运行的线程。典型的服务必须无限循环，直到达到退出条件（用户按下 ESC，接收信号，等等）。

由于您的线程在单个应用程序中运行，它们永远不会为它们的输出打开一个新的控制台窗口。

# c# - 编写字符和字节混合的简洁方法？

> ID：12076440
> 
> 赞同：1
> 
> 时间：2012-08-22T15:24:37.757
> 
> 标签：c#, c#-4.0

我正在尝试编写一个遵循预先存在的（和不可变的）文本文件格式的索引文件。

该文件是固定长度的，有 11 个字节的字符串（ASCII 格式），后跟 4 个字节的 long，每行总共 15 个字节。

也许我有点昏暗，但有没有一种简单的方法可以做到这一点？我觉得我需要打开两个流来写一行——一个用于字符串，一个用于字节——但这感觉不对。

有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T15:28:15.443

您可以使用在/和 s 数组`BitConverter`之间进行转换。这样，您将能够写入 11 个字节，后跟 4 个字节，然后再写入 11 个字节，依此类推。`int``long``byte`

```
byte[] intBytes = BitConverter.GetBytes(intValue); // returns 4-byte array 
```

转换为字节：[`BitConverter.GetBytes(int)`](http://msdn.microsoft.com/en-us/library/44xk6h48).

转换回`int`：[`BitConverter.ToInt32(byte\[\], int)`](http://msdn.microsoft.com/en-us/library/system.bitconverter.toint32)

如果您正在开发跨平台解决方案，请记住文档中的以下注释（感谢[`uriDium`](https://stackoverflow.com/users/62544/uridium)您的评论）：

> GetBytes 方法返回的数组中的字节顺序取决于计算机体系结构是 little-endian 还是 big-endian。

# xml - NuSoap 创建 JSON 响应

> ID：12076442
> 
> 赞同：0
> 
> 时间：2012-08-22T15:24:42.440
> 
> 标签：xml, json, web-services, response

今天，我使用“Nusoap”库创建了一个带有 SOAP 的简单 WebServices 服务器。响应数据当然是 XML 格式。

我的服务器代码：

```
<?php
require_once "nusoap.php";

function pLogin($username, $password) {
    if (($username == "admin")&&($password == md5("123456"))) {
        //return "AAAAAAAAAA Login OK";
        return (array("cmd" => "LOGIN","status" => "LOGINOK","fullname" => "John Smith", "phone" => "0987654321", "credit" => "5600", "session" => "ID24324343434"));
    }
    else {
            return "Login Fail";
    }
}

$server = new soap_server();
$server->register("pLogin");
$server->service($HTTP_RAW_POST_DATA);
?> 
```

HTTP响应为：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<SOAP-ENV:Envelope SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" 
    xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/">
    <SOAP-ENV:Body>
        <ns1:pLoginResponse xmlns:ns1="http://tempuri.org">
            <return>
                <cmd xsi:type="xsd:string">LOGIN</cmd>
                <status xsi:type="xsd:string">LOGINOK</status>
                <fullname xsi:type="xsd:string">John Smith</fullname>
                <phone xsi:type="xsd:string">0987654321</phone>
                <credit xsi:type="xsd:string">5600</credit>
                <session xsi:type="xsd:string">ID24324343434</session>
            </return>
        </ns1:pLoginResponse>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

但我想以 JSON 格式创建响应数据，例如 or ：

```
HTTP/1.1 200 OK
.... (HTTP header here)
Content-Type: text/json
{"cmd":"LOGIN","status":"LOGINOK","fullname":"John Smith","phone":"0987654321","credit":"5600","session":"ID24324343434"} 
```

请帮我修改 WebServices 服务器中的代码以创建 JSON 格式的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:50:48.763

代替

```
return (array("cmd" => "LOGIN","status" => "LOGINOK","fullname" => "John Smith", "phone" => "0987654321", "credit" => "5600", "session" => "ID24324343434")); 
```

写

```
return json_encode(array("cmd" => "LOGIN","status" => "LOGINOK","fullname" => "John Smith", "phone" => "0987654321", "credit" => "5600", "session" => "ID24324343434")); 
```

# sql - 将表连接到自身时，sql计数混乱

> ID：12076443
> 
> 赞同：-1
> 
> 时间：2012-08-22T15:24:52.507
> 
> 标签：sql, sql-server-2008

看到[这个小提琴](http://sqlfiddle.com/#!3/49008/1/0)。我有一个问题表，其中每个问题都属于一个类别，我必须找到每个类别的用户平均值。我认为它工作正常，但我想添加一个总数，显示每个用户的平均值中包含的答案总数。我不知道要在 where 子句中放入什么来实际返回每个用户的问题总数。无论我包含用户 ID、QID 还是选项，它都给了我天文数字。

查询 SQL：

```
DECLARE @tblTmpCatStats TABLE (userid NVARCHAR(10),cat1_mean FLOAT,cat2_mean FLOAT,cat3_mean FLOAT,cat4_mean FLOAT,N FLOAT)
INSERT INTO @tblTmpCatStats SELECT d.userid
    ,AVG(CAST(c1.choice AS FLOAT))
    ,AVG(CAST(c2.choice AS FLOAT))
    ,AVG(CAST(c3.choice AS FLOAT))
    ,AVG(CAST(c4.choice AS FLOAT))
    ,COUNT(d.userid)
FROM tblTmpDemographics d
JOIN tblTmpDemographics c1 ON d.userid = c1.userid
JOIN tblTmpDemographics c2 ON d.userid = c2.userid
JOIN tblTmpDemographics c3 ON d.userid = c3.userid
JOIN tblTmpDemographics c4 ON d.userid = c4.userid
WHERE c1.QID IN ('1','5')
AND c2.QID IN ('2','6')
AND c3.QID IN ('3','7')
AND c4.QID IN ('4','8')
GROUP BY d.userid
SELECT * FROM @tblTmpCatStats 
```

我正在尝试使 N 等于 AVG 中包含的选择总数

设置 SQL：

```
CREATE TABLE tblTmpDemographics (userid NVARCHAR(10),QID INT,choice NVARCHAR(1000))
INSERT INTO tblTmpDemographics (userid,QID,choice)
SELECT 'user1',1,'5' UNION ALL SELECT 'user1',2,'3' UNION ALL
SELECT 'user1',3,'4' UNION ALL SELECT 'user1',4,'5' UNION ALL
SELECT 'user1',5,'5' UNION ALL SELECT 'user1',6,'3' UNION ALL
SELECT 'user1',7,'4' UNION ALL SELECT 'user1',8,'5' UNION ALL

SELECT 'user2',1,'3' UNION ALL SELECT 'user2',2,'2' UNION ALL
SELECT 'user2',3,'3' UNION ALL SELECT 'user2',4,'5' UNION ALL
SELECT 'user2',5,'3' UNION ALL SELECT 'user2',6,'2' UNION ALL
SELECT 'user2',7,'3' UNION ALL SELECT 'user2',8,'5' UNION ALL

SELECT 'user3',1,'2' UNION ALL SELECT 'user3',2,'1' UNION ALL
SELECT 'user3',3,'5' UNION ALL SELECT 'user3',4,'5' UNION ALL
SELECT 'user3',5,'2' UNION ALL SELECT 'user3',6,'1' UNION ALL
SELECT 'user3',7,'5' UNION ALL SELECT 'user3',8,'5' UNION ALL

SELECT 'user4',1,'4' UNION ALL SELECT 'user4',2,'3' UNION ALL
SELECT 'user4',3,'3' UNION ALL SELECT 'user4',4,'5' UNION ALL
SELECT 'user4',5,'4' UNION ALL SELECT 'user4',6,'3' UNION ALL
SELECT 'user4',7,'3' UNION ALL SELECT 'user4',8,'5' GO 
```

为什么它返回 128 而不是 8？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:51:23.030

试试这个：

```
SELECT d.userid
    ,AVG(CAST(c1.choice AS FLOAT))
    ,AVG(CAST(c2.choice AS FLOAT))
    ,AVG(CAST(c3.choice AS FLOAT))
    ,AVG(CAST(c4.choice AS FLOAT))
    , d.cnt
FROM
(
  SELECT userid, count(*) cnt
  from tblTmpDemographics
  group by userid
) d
INNER JOIN tblTmpDemographics c1 
  ON d.userid = c1.userid
INNER JOIN tblTmpDemographics c2 
  ON d.userid = c2.userid
INNER JOIN tblTmpDemographics c3 
  ON d.userid = c3.userid
INNER JOIN tblTmpDemographics c4 
  ON d.userid = c4.userid
WHERE c1.QID IN ('1','5')
  AND c2.QID IN ('2','6')
  AND c3.QID IN ('3','7')
  AND c4.QID IN ('4','8')
GROUP BY d.userid,  d.cnt 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/49008/30)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T12:01:46.220

您选择获取结果的方法无法为您带来正确的计数，这仅仅是因为您的所有联接，即使它们被进一步过滤，也可能（其中一些最终会）导致每行有多个匹配项，并且反过来，在中间结果集中产生迷你[笛卡尔积](http://en.wikipedia.org/wiki/Cartesian_product "笛卡尔积（维基百科）")，最终被聚合。

@bluefeet 的建议有效，因为计数是单独计算的，但它仍然不能解决一般的笛卡尔积效应。您的平均值之所以正确，仅仅是因为它们是*平均值*，而不是*计数*或*总和*。本质上，它们当然是总和除以计数，并且由于两个操作数的因数相同，因此无论笛卡尔积的影响如何，您的平均值最终都是正确的。但是，如果您尝试对您的`choice`值进行 SUM 或 COUNT，您将再次看到不正确的结果。

您可以改为使用条件聚合，如下所示：

```
SELECT
  userid,
  cat1_mean = AVG(CASE WHEN QID IN (1, 5) THEN CAST(choice AS float) END),
  cat2_mean = AVG(CASE WHEN QID IN (2, 6) THEN CAST(choice AS float) END),
  cat3_mean = AVG(CASE WHEN QID IN (3, 7) THEN CAST(choice AS float) END),
  cat4_mean = AVG(CASE WHEN QID IN (4, 8) THEN CAST(choice AS float) END),
  N = COUNT(*)
FROM tblTmpDemographics
GROUP BY userid
; 
```

或者您可以使用 SQL Server 的[PIVOT](http://msdn.microsoft.com/en-us/library/ms177410.aspx "使用 PIVOT 和 UNPIVOT (SQL Server)")功能，如下所示：

```
SELECT
  userid,
  cat1_mean,
  cat2_mean,
  cat3_mean,
  cat4_mean,
  N
FROM (
  SELECT
    userid,
    choice = CAST(choice AS float),
    QuestionGroup = CASE
      WHEN QID IN (1, 5) THEN 'cat1_mean'
      WHEN QID IN (2, 6) THEN 'cat2_mean'
      WHEN QID IN (3, 7) THEN 'cat3_mean'
      WHEN QID IN (4, 8) THEN 'cat4_mean'
    END,
    N = COUNT(*) OVER (PARTITION BY userid)
  FROM tblTmpDemographics
) s
PIVOT (
  AVG(choice) FOR QuestionGroup IN (
    cat1_mean,
    cat2_mean,
    cat3_mean,
    cat4_mean
  )
) p
; 
```

或像这样（与以前相同，但使用公用表表达式）：

```
WITH marked AS (
  SELECT
    userid,
    choice = CAST(choice AS float),
    QuestionGroup = CASE
      WHEN QID IN (1, 5) THEN 'cat1_mean'
      WHEN QID IN (2, 6) THEN 'cat2_mean'
      WHEN QID IN (3, 7) THEN 'cat3_mean'
      WHEN QID IN (4, 8) THEN 'cat4_mean'
    END,
    N = COUNT(*) OVER (PARTITION BY userid)
  FROM tblTmpDemographics
)
SELECT
  userid,
  cat1_mean,
  cat2_mean,
  cat3_mean,
  cat4_mean,
  N
FROM marked
PIVOT (
  AVG(choice) FOR QuestionGroup IN (
    cat1_mean,
    cat2_mean,
    cat3_mean,
    cat4_mean
  )
) p
; 
```

这两种方法都可以在 SQL Fiddle 进行测试和使用：

*   [条件聚合](http://sqlfiddle.com/#!3/49008/38)

*   [PIVOT](http://sqlfiddle.com/#!3/49008/40)（[带 CTE](http://sqlfiddle.com/#!3/49008/42)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T15:30:02.400

这是实现它的一种略显粗糙的方式，但改变了

`COUNT(d.userID)`

到

`COUNT(distinct d.qid)`

为每个用户提供 8 个计数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T15:29:18.683

```
select userid, count(userid) cnt from tblTmpDemographics group by userid 
```

这显示 8 - 您必须运行两次插入。

# python - 用户定义的类是可变的

> ID：12076445
> 
> 赞同：29
> 
> 时间：2012-08-22T15:24:58.247
> 
> 标签：python, class, immutability, mutable

假设我想为 和 创建`car`一个`tractor`类`boat`。所有这些类都有一个实例，`engine`我想在一个列表中跟踪所有引擎。如果我理解正确，如果电机对象是可变的，我可以将其存储为`car`列表中的属性和相同的实例。

我无法找到任何关于用户定义的类是否可变的可靠信息，如果在定义它们时可以选择，任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-22T15:29:52.897

用户类被认为是可变的。Python 没有（绝对）私有属性，因此您始终可以通过进入内部来更改类。

为了将您的类用作 a 中的键 `dict`或将它们存储在 a 中`set`，您可以定义一个[`.__hash__()`方法](http://docs.python.org/reference/datamodel.html#object.__hash__)和一个[`.__eq__()`方法](http://docs.python.org/reference/datamodel.html#object.__eq__)，从而保证您的类是不可变的。在这种情况下，您通常会将您的类 API 设计为在创建后不改变内部状态。

例如，如果您的引擎由其 id 唯一定义，则可以将其用作哈希的基础：

```
class Engine(object):
    def __init__(self, id):
        self.id = id

    def __hash__(self):
        return hash(self.id)

    def __eq__(self, other):
        if isinstance(other, self.__class__):
            return self.id == other.id
        return NotImplemented 
```

现在您可以在集合中使用类 Engine 的实例：

```
>>> eng1 = Engine(1)
>>> eng2 = Engine(2)
>>> eng1 == eng2
False
>>> eng1 == eng1
True
>>> eng1 == Engine(1)
True
>>> engines = set([eng1, eng2])
>>> engines
set([<__main__.Engine object at 0x105ebef10>, <__main__.Engine object at 0x105ebef90>])
>>> engines.add(Engine(1))
>>> engines
set([<__main__.Engine object at 0x105ebef10>, <__main__.Engine object at 0x105ebef90>]) 
```

在上面的示例中，我`Engine(1)`向集合中添加了另一个实例，但它被识别为已经存在并且集合没有改变。

请注意，就列表而言，`.__eq__()`实现是重要的；列表不关心对象是否可变，但是使用适当的`.__eq__()`方法，您可以测试给定引擎是否已经在列表中：

```
>>> Engine(1) in [eng1, eng2]
True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:31:14.020

所有对象（除了标准库中的少数对象，一些使用描述符和装饰器等实现特殊访问机制的对象，或者一些在 C 中实现的对象）都是可变的。这包括用户定义类的实例、类本身，甚至是定义类的类型对象。您甚至可以在运行时改变一个类对象，并在修改之前创建的类的实例中显示修改。总的来说，如果你挖掘得足够深，事情在 Python 中只有按照惯例是不可变的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T16:04:36.680

我认为您将可变性与 python 如何保持引用混淆了——考虑一下：

```
class Foo(object):
    pass

t = (1,2,Foo())  # t is a tuple, :. t is immutable
b = a[2]  # b is an instance of Foo
b.foo = "Hello"  # b is mutable.  (I just changed it)
print (hash(b))  # b is hashable -- although the default hash isn't very useful
d = {b : 3}      # since b is hashable, it can be used as a key in a dictionary (or set).
c = t            # even though t is immutable, we can create multiple references to it.
a = [t]          # here we add another reference to t in a list. 
```

现在关于您在全球范围内获取/存储引擎列表的问题 - 有几种不同的方法可以做到这一点，这里有一个：

```
class Engine(object):
     def __init__(self, make, model):
        self.make = make
        self.model = model

class EngineFactory(object):
    def __init__(self,**kwargs):
        self._engines = kwargs

    def all_engines(self):
        return self._engines.values()

    def __call__(self,make, model):
    """ Return the same object every for each make,model combination requested """
       if (make,model) in _engines:
           return self._engines[(make,model)]
       else:
           a = self._engines[(make,model)] = Engine(make,model)
           return a   

 engine_factory = EngineFactory()

 engine1 = engine_factory('cool_engine',1.0)           
 engine2 = engine_factory('cool_engine',1.0)
 engine1 is engine2 #True !!!  They're the same engine.  Changing engine1 changes engine2 
```

通过让`EngineFactory._engines`dict 存储`weakref.ref`对象而不是实际存储对对象的真实引用，可以对上面的示例进行一些改进。在这种情况下，您将在返回对该对象的新引用之前检查以确保该引用仍然存在（尚未被垃圾回收）。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-22T15:32:42.333

编辑：这在概念上是错误的，[python 中的不可变对象](https://stackoverflow.com/questions/10151080/the-immutable-object-in-python)可以解释为什么。

```
class Engine():
    def __init__(self, sn):
        self.sn = sn

a = Engine(42)
b = a
print (a is b) 
```

打印`True`。

# wpf - 使用 HierarchicalDataTemplate 将数据绑定到 TreeView

> ID：12076450
> 
> 赞同：0
> 
> 时间：2012-08-22T15:25:20.197
> 
> 标签：wpf, data-binding, treeview, hierarchicaldatatemplate

我试图让我的应用程序中的 TreeView 控件通过设置它的`ItemsSource`和`DataContext`属性来正确绑定到对象树。树按预期可视化，但`TreeViewItem`s 数据上下文似乎包含不正确的值。

例如，我有一棵看起来像这样的树：

```
[-] Header
    [-] Contents
        [+] Item1
        [+] Item2
        properties
    [+] Dictionary
[-] MetaDictionary
    [+] TypeDef1
    [+] TypeDef2
properties 
```

项目绑定到对象的`Data.Name`值。但是，如果我单击任何子项`Header`并在事件处理程序中检查它，它会`DataContext.Data.Name`说`Header`（在适当的强制转换之后）。同样的事情`MetaDictionary`也发生在它的孩子身上。

这是我的课程的缩短版本：

```
 public class CFItemTreeNode
    {
        private CFItem data;
        public CFItem Data
        {
            get { return data; }
            set { data = value; }
        }
        private ObservableCollection<CFItemTreeNode> children;
        public ObservableCollection<CFItemTreeNode> Children
        {
            //set & get as above
        }
        private CFItemTreeNode parent;
        public CFItemTreeNode Parent
        {
            //set & get as above
        }
    } 
```

这是我的 XAML。几天来，我一直在搜索 SO 和网络，并将各种教程和问题的点点滴滴整合到我的这个科学怪人中。我相信这是分层模板的问题，但据我所知。

```
<Window x:Class="SSLowLevelBrowser.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:SSLowLevelBrowser"
        Title="MainWindow"
        Height="600"
        Width="800"
        MinHeight="100"
        MinWidth="200"
        Closing="MainWindowClosing">

    <Window.Resources>
        <Style x:Key="TreeViewItemStyle" TargetType="{x:Type TreeViewItem}">
            <!-- A margin of 0 px left and 2 px top -->
            <Setter Property="Margin" Value="0 2" />
            <Setter Property="AllowDrop" Value="true" />
            <EventSetter Event="TreeViewItem.PreviewMouseLeftButtonDown" Handler="TVI_PreviewMouseLeftButtonDown" />
            <EventSetter Event="TreeViewItem.PreviewMouseMove" Handler="TVI_PreviewMouseMove" />
            <EventSetter Event="TreeViewItem.PreviewDrop" Handler="TVI_PreviewDrop" />
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="25" />
            <RowDefinition Height="575*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="390*" />
            <ColumnDefinition Width="390*" />
        </Grid.ColumnDefinitions>

        <ToolBar Name="menuBar" Grid.ColumnSpan="2" ToolBarTray.IsLocked="True">
            <Button Name="buttonOpen" Click="OpenFile">Open file</Button>
        </ToolBar>
        <TreeView Grid.Row="1"
                  Grid.Column="0"
                  Name="treeView"
                  ItemContainerStyle="{StaticResource TreeViewItemStyle}"
                  ItemsSource="{Binding}">
            <TreeView.Resources>
                <HierarchicalDataTemplate DataType="{x:Type local:CFItemTreeNode}" ItemsSource="{Binding Children}">
                    <Grid>
                        <TextBlock Text="{Binding Path=Data.Name}"
                                   MouseLeftButtonDown="TBlock_PreviewMouseLeftButtonDown"/>
                        <TextBox Text="{Binding Path=Data.Name, Mode=TwoWay}"
                                 Visibility="Collapsed"
                                 LostFocus="TBox_LostFocus"/>
                    </Grid>
                </HierarchicalDataTemplate>
            </TreeView.Resources>
        </TreeView>
        <TextBox Grid.Row="1" Grid.Column="1" Name="textOutput" />
    </Grid>
</Window> 
```

我究竟做错了什么？

**更新 1.**这是我的事件处理程序：

```
private void TVI_PreviewMouseLeftButtonDown(object sender, MouseButtonEventArgs args)
{
    dragStartPosition = args.GetPosition(null);
    dragSource = args.OriginalSource;
} 
```

```
private void TVI_PreviewMouseMove(object sender, MouseEventArgs args)
{
    Point currentPosition = args.GetPosition(null);
    // If there is actual movement and a drag is starting
    if (dragInProgress == false &&
        dragStartPosition.X != -1 &&
        args.LeftButton == MouseButtonState.Pressed &&
        Math.Pow(currentPosition.X - dragStartPosition.X, 2) +
        Math.Pow(currentPosition.Y - dragStartPosition.Y, 2) > 25)
    {
        dragInProgress = true;
        DragDropEffects de = DragDrop.DoDragDrop(
            (TreeViewItem)sender,
            new DataObject(typeof(FrameworkElement), dragSource),
            DragDropEffects.Move);
    }
} 
```

```
private void TVI_PreviewDrop(object sender, DragEventArgs args)
{
    if (dragInProgress && args.Data.GetDataPresent(typeof(FrameworkElement)))
    {
        CFItemTreeNode dragSource =
            ((CFItemTreeNode)((FrameworkElement)args.Data.GetData(typeof(FrameworkElement))).DataContext);
        CFItemTreeNode dropTarget =
            ((CFItemTreeNode)((FrameworkElement)args.OriginalSource).DataContext);
        CFItemTreeNode sourceParent = dragSource.Parent;
        CFItemTreeNode targetParent = dropTarget.Parent;
        if (sourceParent != targetParent)
        {
            MessageBox.Show("Can only swap siblings.");
            dragInProgress = false;
            return;
        }
        int sourceIndex = sourceParent.Children.IndexOf(dragSource);
        int targetIndex = sourceParent.Children.IndexOf(dropTarget);

        if (sourceIndex != targetIndex)
        {
            if (sourceIndex < targetIndex)
            {
                sourceParent.Children.RemoveAt(targetIndex);
                sourceParent.Children.RemoveAt(sourceIndex);
                sourceParent.Children.Insert(sourceIndex, dropTarget);
                sourceParent.Children.Insert(targetIndex, dragSource);
            }
            else
            {
                sourceParent.Children.RemoveAt(sourceIndex);
                sourceParent.Children.RemoveAt(targetIndex);
                sourceParent.Children.Insert(targetIndex, dragSource);
                sourceParent.Children.Insert(sourceIndex, dropTarget);
            }
        }
        dragSource = null;
        dragInProgress = false;
        // Reset start position to invalid
        dragStartPosition = new Point(-1, -1);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-14T12:20:51.030

添加`RelativeSource={RelativeSource AncestorType=local:MainWindow}`到您的绑定中。

# java - Make JSON popup save or open dialog instead of actual content

> ID：12076454
> 
> 赞同：0
> 
> 时间：2012-08-03T04:49:04.400
> 
> 标签：java, jquery, json, struts2, struts

I just started using struts 2 last week, so the answer to my question may be obvious.

I have an opening form with submit that uses an action and executes method to get the data. Then, the only way I could get jQuery to work was to put an action and execute the method that just returns `success` and then I go onto my jQuery grid with a 3rd action.

*whenever I try to execute my program on a browser, the only problem I have is that the JSON string is returned as a file. So when I call the `getJSONResult` action, it gives me a file with the JSON string in it, which I can open or download . .*

**Examples:**
[example 1](http://www.google.co.in/imgres?q=JSON%20download%20as%20file&um=1&hl=en&client=firefox-a&sa=N&rls=org.mozilla%3aen-US%3aofficial&biw=1366&bih=575&tbm=isch&tbnid=KmaETq1pqGWqJM%3a&imgrefurl=http://www.mkyong.com/webservices/jax-rs/download-json-from-jax-rs-with-jaxb-resteasy/&docid=A9pzMEPWONMK7M&imgurl=http://www.mkyong.com/wp-content/uploads/2011/07/jaxb-json-resteasy.png)
[example 2](http://www.google.co.in/imgres?q=JSON%20download%20as%20file&um=1&hl=en&client=firefox-a&sa=N&rls=org.mozilla%3aen-US%3aofficial&biw=1366&bih=575&tbm=isch&tbnid=6dCGCGeSa7di_M%3a&imgrefurl=http://www.dotnetcurry.com/ShowArticle.aspx?ID=596&docid=ecziYCCdZg_cPM&imgurl=http://www.dotnetcurry.com/images/silverlight/26102010image_1.jpg)

So I think it’s a configuration problem, but I can’t find it. I would be very glad if somebody could help me, thanks guys!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:31:34.223

The problem is likely not on the struts side, but on the HTML/JQuery side.

If you click the submit button, the browser wants to do something with the result (open it...). You want to prevent that from happening, and just get the result and handle it yourself.

I managed to use jQuery with struts, and was inspired by this blogpost. The handling of the result is explained there pretty well. You do not have to follow it completely, but it will steer you in the right direction:

[http://mycodefixes.blogspot.be/2011/01/using-struts-2-with-json-and-jquery.html](http://mycodefixes.blogspot.be/2011/01/using-struts-2-with-json-and-jquery.html)

# c# - 使 TabPage 在事件上闪烁

> ID：12076455
> 
> 赞同：0
> 
> 时间：2012-08-22T15:25:30.553
> 
> 标签：c#, winforms, notifications, tabcontrol

我正在制作一个程序，当事件发生时需要一个标签页闪烁

我用谷歌搜索了一下，发现了这个：[Blink tab header on received event](https://stackoverflow.com/questions/689057/blink-tab-header-on-receiving-event)。这很相似，但使用 WPF，我使用的是 WinForms，我什至不确定它是否符合我的要求：L

我还发现了这个：[C#: Flash Window in Taskbar via Win32 FlashWindowEx](http://pietschsoft.com/post/2009/01/26/CSharp-Flash-Window-in-Taskbar-via-Win32-FlashWindowEx.aspx)。这就是我想要的，但对于整个表单和任务栏中，而不是“在表单中”是显而易见的

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:05:34.857

我并不是说这是实现这一目标的最佳方式，甚至是一种很好的方式，但它确实有效。当我需要类似的东西时，我使用了类似的代码。

tabControl1 有两个选项卡，我闪烁选项卡 1（第二个选项卡）。

对于我放在一起的示例，我将 tabControl1 的`DrawMode`属性设置为“OwnerDrawFixed”，然后设置几个按钮来启动/停止计时器。间隔大约是 750 毫秒，但您当然可以选择任何值。在一个`timer1_Tick`事件中，我换出当前颜色并告诉它`tabControl1`自己刷新。这将使`DrawItem`事件被引发，然后我将矩形绘制为当前颜色（如果它是标签页 1）或背景色（如果不是）。然后我绘制标签页的文本。

有用。可以肯定地使用一些调整。试一试！

```
public partial class Form1 : Form
{
    Color currentColor = Color.Green;

    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        timer1.Start();
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        if (currentColor == Color.Yellow)
            currentColor = Color.Green;
        else
            currentColor = Color.Yellow;
        tabControl1.Refresh();
    }

    private void button2_Click(object sender, EventArgs e)
    {
        timer1.Stop();

    }

    private void tabControl1_DrawItem(object sender, DrawItemEventArgs e)
    {
        if (timer1.Enabled && e.Index == 1)
        {
            e.Graphics.FillRectangle(new SolidBrush(currentColor), e.Bounds);
        }
        else
        {
            e.Graphics.FillRectangle(new SolidBrush(this.BackColor), e.Bounds);
        }
        Rectangle paddedBounds = e.Bounds;
        paddedBounds.Inflate(-2, -2);
        e.Graphics.DrawString(tabControl1.TabPages[e.Index].Text, this.Font, SystemBrushes.HighlightText, paddedBounds);
    }
} 
```

# salesforce - 重新渲染命令按钮

> ID：12076457
> 
> 赞同：2
> 
> 时间：2012-08-22T15:25:36.157
> 
> 标签：salesforce

我需要在保存页面时在我的 VF 页面上重新呈现命令按钮。

现在，我的 VF 页面上有 3 个按钮，保存、测试、取消。

我希望当用户打开这个 VF 页面时，在按钮单击联系人对象时，在这个 Vf 页面上，最初用户应该只看到保存和取消按钮。一旦用户单击 Save 按钮，就会出现 Test 按钮。

任何想法如何做到这一点？保存和取消按钮具有标准的 Salesforce 保存和取消功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T17:41:19.890

如果你只想显示按钮，我会用 jQuery 来做：

```
<apex:commantButton action="{!save}" id="saveButton" reRender="something" oncomplete="showTest()"/>

<apex:commantButton action="{!test}" id="testButton" style="display:none;/> 
```

```
function showTest(){
    jQuery("[id$=testButton]").css("display","block");
} 
```

# iphone - 过滤包含指定字符串的数组

> ID：12076459
> 
> 赞同：0
> 
> 时间：2012-08-22T15:25:40.090
> 
> 标签：iphone, objective-c, ios, filter

我正在尝试开发一个包含大量单词的数组的应用程序。我想从中创建一个新的过滤数组。过滤是基于我设法使用正则表达式创建的模式完成的。例如，我应该能够从带有单词的数组中过滤掉带有模式“ap_l_”的单词“apple”。谁能帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T16:28:36.347

使用下面的代码它将过滤数组

```
-(NSMutableArray *)searchByContains:(NSString *)containsString inputArray:(NSMutableArray *)inputArray
{
    NSLog(@"orginal Array count=%d",[inputArray count]);
    NSString *expression=[NSString stringWithFormat:@"SELF contains '%@'",containsString];
    NSLog(@"expression=%@",expression);
    NSPredicate *predicate = [NSPredicate predicateWithFormat:expression];    
    NSMutableArray *mArrayFiltered = [[inputArray filteredArrayUsingPredicate:predicate] mutableCopy];

    return mArrayFiltered;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T15:48:12.750

过滤数组的最佳方法是使用谓词。如果您有一个字符串数组，例如：

```
NSArray *stringsArray = [NSArray arrayWithObjects:@"Joe", @"Bill", @"David", @"Jeff", nil]; 
```

您可以使用 filtersArrayUsingPredicate: 轻松过滤它。例如，如果您想为所有 @"Bill" 实例过滤上述数组，您可以这样做：

```
NSArray *filteredArray = [stringsArray filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"SELF == 'Bill'"]]; 
```

如果你想过滤 OUT @"Bill"，那么你可以这样做：

```
filteredArray = [stringsArray filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"SELF != 'Bill'"]]; 
```

等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T15:31:47.733

如果所有元素都是字符串，您可以使用 .

```
for(NSString *str in arrayName)
  {
      if([str isEqualToString:@"searchString"])
         {

            //wirte own code here
         }

  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T15:34:36.853

如果我理解你的问题......试试这个

```
if([your_array containsObject: your_string]){
      do something
} 
```

希望这可以帮助

# asp.net - 有没有一种优雅的方式将 Default.aspx 重定向到 Home.aspx 或 Login.aspx？

> ID：12076467
> 
> 赞同：0
> 
> 时间：2012-08-22T15:25:56.447
> 
> 标签：asp.net

我现在拥有它的方式，Default.aspx 是空的，并且在 Default.aspx.cs 后面有一个代码，根据请求是否经过身份验证，它将它们重定向到 Login.aspx 或 Home.aspx。

Default.aspx 只是在那里什么都不做。似乎应该有一个更优雅的方法来解决这个问题。

任何想法都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:43:21.413

在我看来，最优雅的方法是使用 web.config。您可以在此处指定未经身份验证的用户将自动重定向到的登录页面：

```
<authentication mode="Forms">
  <forms loginUrl="~/Login/LogOn.aspx" />
</authentication>
<authorization>
  <deny users="?"/>
</authorization> 
```

除此之外，您还可以通过授权标签指定哪些用户可以访问当前文件夹中的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:29:11.537

不，IIS 需要该占位符才能知道它在那里用作默认文档。

编辑：虽然在技术上可以改变这些，但从长远来看是不值得的。更好地遵循约定并将 home.aspx 移动到 default.aspx。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T15:29:23.680

这应该是在 IIS 级别配置的；也就是说，您可以将`Default`应用的登录页面配置为`Home.aspx`. 如果用户未登录，`Home.aspx`则应自动重定向到。请参见 IIS 管理器的以下屏幕截图：`Login.aspx`

![在此处输入图像描述](../Images/e4e5d7746e8c6aeba054f5cb10802daf.png)

从列表中选择您的 WebApp --> 双击“默认文档”。

# php - 简单的php回显错误

> ID：12076471
> 
> 赞同：0
> 
> 时间：2012-08-22T15:26:16.220
> 
> 标签：php, html

我有这个代码

```
<html>
<head>
    <title></title>
</head>
<body>
<?php 
echo ("<h3 class='titulo_resultados'>No se han encontrado resultados.</h3>"); 
?>  
</body>
</html> 
```

它显示：没有 se han encontrado resultados。"); ?>

为什么？？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:31:15.967

我的猜测是您的网络主机不支持 php 或文件有 .html 而不是 .php。另外我想知道为什么你在 echo 之后使用 () 而不是：

```
echo "test"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:32:22.213

这是因为您使用 .html 扩展名保存了文件。使用 .php 扩展名再次保存文件。你会得到正确的结果。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-22T15:30:10.710

```
<html>
<head>
    <title></title>
</head>
<body>
<?php 
echo "<h3 class='titulo_resultados'>No se han encontrado resultados.</h3>"; 
?>  
</body>
</html> 
```

# haskell - 运算符重载

> ID：12076475
> 
> 赞同：18
> 
> 时间：2012-08-22T15:26:20.907
> 
> 标签：haskell, operator-overloading

我想定义一个`+-+`在此工作的运算符（称为它）：

```
if a,b are Char    => a +-+ b = [a][b]
if a,b are Integer => a +-+ b = a+b 
```

我试过：

```
class Summable a where
    (+-+)       :: a -> a -> b

instance Summable Integer where
    a +-+ b     = a + b

instance Summable Char where
    a +-+ b     = [a] ++ [b] 
```

但我得到了错误：

```
Couldn't match type `b' with `Integer'....
Couldn't match type `b' with `[Char]' .... 
```

是否有可能做到这一点？如何？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-22T15:41:00.593

问题是类型变量`b`不能从实例中确定，即使它是固定的。（有一个像这样的自由变量需要函数返回任何类型的东西，即`undefined`。）

你能给出`+-+`类型`a -> a -> a`吗？如果是这样，那就这样做。（但看起来这是不可能的。）

否则，您可以使用[功能依赖](http://www.haskell.org/haskellwiki/Functional_dependencies)项，以便实例指定结果类型或[类型系列](http://www.haskell.org/haskellwiki/TF)，以便实例化的属性之一是结果类型。

对于功能依赖，代码可能如下所示：

```
{-# LANGUAGE MultiParamTypeClasses, FunctionalDependencies #-}

class Summable a result | a -> result where
  (+-+) :: a -> a -> result

instance Summable Char String where
  a +-+ b = [a] ++ [b]

instance Summable Integer Integer where
  a +-+ b = a + b 
```

对于类型族，它会像：

```
{-# LANGUAGE TypeFamilies #-}

class Summable a where
  type Result a
  (+-+) :: a -> a -> Result a

instance Summable Char where
  type Result Char = String
  a +-+ b = [a] ++ [b]

instance Summable Integer where
  type Result Integer = Integer
  a +-+ b = a + b 
```

（感谢 Vitus 和 Vladimir Matveev 修复了我犯的各种错误！:)）

# internationalization - Playframework - 国际化和路线

> ID：12076476
> 
> 赞同：0
> 
> 时间：2012-08-22T15:26:22.647
> 
> 标签：internationalization, playframework, routes

我需要两种语言版本的网站，它们分别位于**domainname/lang1/somecontroller**和**domainname/lang2/somecontroller** url。什么样的路由文件架构允许我避免为每种语言重复控制器声明？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T18:18:18.687

```
*   /{language}/MyController         Application.MyController 
```

应该允许您访问两种语言，然后如果您愿意，您可以访问控制器中传入的语言。

# c# - 我的第一个 WCF 服务，我被卡住了

> ID：12076478
> 
> 赞同：0
> 
> 时间：2012-08-22T15:26:33.903
> 
> 标签：c#, asp.net, visual-studio-2010, wcf

经过反复试验，我终于能够在 IIS 中托管我的 WCF 服务。

我可以毫无问题地浏览到 WSDL，并查看所有不同的方法/属性。

怎么办？我需要在另一个 Web 应用程序中使用我的服务。我怎么做？

我能够使用 svcutil.exe 生成 *.cs 和 output.config 文件，将其添加到我的 Web 应用程序，并添加对 System.ServiceModel 的引用，效果很好。

但是，我需要弄清楚如何使用托管在 IIS 中的服务。

在我的 Web 应用程序中，我添加了对 WSDL 的 Web 引用，但我不知道如何公开方法/属性。

我不排除有更好的方法来做到这一点的可能性......所以我愿意接受建议。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:29:58.263

右键单击客户端项目，然后单击“添加服务引用”。然后输入您的 WCF 服务的地址，它将为您创建代理和管道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:39:19.340

您可以将服务引用添加到您的服务。通过这样做，您不需要 svcutil。或者，您可以使用 svcutil 为您生成的 .cs。

[http://msdn.microsoft.com/en-us/library/ms730144.aspx](http://msdn.microsoft.com/en-us/library/ms730144.aspx)

只需在 .cs 文件中使用该类即可。实例化它并调用 wcf 方法...

# pseudocode - 伪代码查找数组中最长的运行

> ID：12076481
> 
> 赞同：1
> 
> 时间：2012-08-22T15:26:51.727
> 
> 标签：pseudocode

我知道 A 运行是一系列相邻的重复值，你将如何编写伪代码来计算数组中最长运行的长度，例如

5 将是这个整数数组中最长的一次。

1 2 4 4 3 1 2 4 3 **5 5 5 5** 3 6 5 5 6 3 1

任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-22T15:36:45.863

```
def longest_run(array):
  result = None
  prev = None
  size = 0
  max_size = 0
  for element in array:
    if (element == prev):
      size += 1
      if size > max_size:
        result = element
        max_size = size
    else:
      size = 0
    prev = element
  return result 
```

**编辑**

哇。哇！这个伪代码实际上是有效的：

```
>>> longest_run([1,2,4,4,3,1,2,4,3,5,5,5,5,3,6,5,5,6,3,1])
5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T15:35:52.883

```
max_run_length = 0;
current_run_length = 0;
loop through the array storing the current index value, and the previous index's value 
  if the value is the same as the previous one, current_run_length++;
  otherwise {
    if current_run_length > max_run_length : max_run_length = current_run_length
    current_run_length = 1;
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-06T00:10:44.543

```
int main()
{
    int a[20] = {1, 2, 4, 4, 3, 1, 2, 4, 3, 5, 5, 5, 5, 3, 6, 5, 5, 6, 3, 1};
    int c=0;
    for (int i=0;i<19;i++)
    {
        if (a[i] == a[i+1])
        {
            if (i != (i+1))
            {
                c++;
            }
        }
    }
    cout << c-1;
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-21T11:13:14.357

这是 Python 中的一种不同的函数方法（Python 看起来像伪代码）。此代码仅适用于 Python 3.3+。否则，您必须将“return”替换为“raise StopIteration”。

我正在使用生成器来生成一个包含元素数量和元素本身的元组。它更具普遍性。您也可以将其用于无限序列。如果要从序列中得到最长的重复元素，它必须是一个有限序列。

```
def group_same(iterable):
    iterator = iter(iterable)
    last = next(iterator)
    counter = 1
    while True:
        try:
            element = next(iterator)
            if element is last:
                counter += 1
                continue
            else:
                yield (counter, last)
                counter = 1
                last = element
        except StopIteration:
            yield (counter, last)
            return 
```

如果你有这样的列表：

```
li = [0, 0, 2, 1, 1, 1, 1, 1, 5, 5, 6, 7, 7, 7, 12, 'Text', 'Text', 'Text2'] 
```

然后你可以创建一个新的列表：

```
list(group_same(li)) 
```

然后你会得到一个新的列表：

```
[(2, 0),
 (1, 2),
 (5, 1),
 (2, 5),
 (1, 6),
 (3, 7),
 (1, 12),
 (2, 'Text'),
 (1, 'Text2')] 
```

要获得最长的重复元素，可以使用 max 函数。

```
gen = group_same(li) # Generator, does nothing until iterating over it
grouped_elements = list(gen) # iterate over the generator until it's exhausted
longest = max(grouped_elements, key=lambda x: x[0]) 
```

或作为一个班轮：

```
max(list(group_same(li)), key=lambda x: x[0]) 
```

函数 max 为我们提供了列表中最大的元素。在这种情况下，列表有多个元素。参数键仅用于获取元组的第一个元素作为最大值，但您仍然会取回元组。

```
In : max(list(group_same(li)), key=lambda x: x[0])
Out: (5, 1) 
```

元素 1 重复出现 5 次。

# java - 有没有办法避免 Java 的 awkard 对象强制转换语法？

> ID：12076482
> 
> 赞同：3
> 
> 时间：2012-08-22T15:26:53.347
> 
> 标签：java, syntax, casting

例如，我有一个`Object`“假装” `String`：

```
Object o = new String("dsadsa"); 
```

如果我想使用该对象的字符串函数，首先我必须将它转换为这样的字符串：

```
((String)o).indexOf("sad"); 
```

当有这么多括号时，这变得非常烦人和不可读！尤其是当它必须在 IF 语句或函数中时！

```
if (((String)o).equals("dsadsa")) {} 
```

避免这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-22T15:28:47.563

一个解决方案是确保您的对象之前是一个精确的类，例如在您的方法的原型中。

这是最佳实践，因为它还有助于避免运行时错误。

使用参数化类（泛型）变得越来越容易。

否则说：如果您的代码中有很多演员表，则可能存在设计问题。但我们需要更多代码来提出解决方案。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-22T15:28:11.407

将对象投射在一行中。

在另一行中使用铸造对象。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-22T15:28:48.403

在实践中，正确使用泛型可以消除您过去在代码中看到的大多数类型转换。

但是如果由于某种原因你不能这样做（旧的 Java 版本，遗留库），请创建一个局部变量，尽早在其中进行转换。

一种特殊情况是当您将对象从接口类型转换为其实现时。这几乎总是错误的，意味着界面设计不当。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-22T15:30:21.747

标准做法是始终将您的对象捕获到更窄类型的变量中，在您的情况下是一个`String str`变量，然后使用它。

请注意，在您的第三个示例中，您不需要向下转换：`o.equals(o2)`也可以。

如果您决定学习 Java 泛型，您可能很快就会失望：它们通常只是将冗长的内容从向下转换转换为类型声明。当重写为泛型时，许多代码片段都一样长，有些**甚至更长。**

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-22T15:37:54.887

我假设你的意思是说你`String`的假装是`Object`.

您的句柄是 Object 类型的，它不必是。

1.  如果您使用的是 Object 类型，因为这是您的方法获取的参数，请考虑将参数类型更改为 String，如果您实际上需要一个 String。
2.  如果这来自一个集合，请考虑将集合更改为使用泛型，以便您可以将集合定义为字符串类型。
3.  如果由于某种原因您无法更改传入对象的类型，请验证它实际上是一个字符串，并将其转换为另一个字符串类型的变量。

对于第三个选项，这就是代码的样子。

```
String s;
if (o instanceof String) {
    s = (String) o;
} else {
    s = null;
    throw new IllegalArgumentException();
    // Or take some corrective action.
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-22T15:31:50.730

我不这么认为。您必须明确地将超类转换为子类。

```
String str;

if(o instanceOf String){
   str =(String)o;
   str.indexOf("sad");
   ...
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-22T15:36:51.213

你可以利用泛型做一些危险的事情，比如

```
public static <T> T cast(Object o){
    return (T) o;
} 
```

这使您可以执行以下操作

```
Object o="";
String s = cast(o); 
```

这真的很hacky，但你可以做类似的事情

```
public static String s(Object o){
    return (String) o;
} 
```

进而

```
 Object o = "";
    s(o).indexOf("sad"); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-22T16:28:35.657

我不推荐它，但你*可以*这样做：

```
String.class.cast(o).indexOf("sad"); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-22T23:18:20.770

似乎您不想进行编译时类型检查。然后只需使用脚本语言，例如 Groovy，它也可以在 JVM 上运行，但不需要静态类型。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-25T12:24:23.810

`"dsadsa".equals(someString)`它是如何完成的 - 有效消除了 NPE 的任何机会，并确保即使`someString`实际上被声明为对象也没有虚拟调用。

你也不需要 cast 来调用`equals()`.

除此之外，您可以使用泛型，但它们的语法过于冗长，尤其是在涉及到类似的东西时`<T extends Foo &Bar> T selectFooBared(List<java.lang.ref.Reference<T>> list, Comparator<? super T> c);`

# iphone - 滚动水平表视图时淡出动画

> ID：12076487
> 
> 赞同：-5
> 
> 时间：2012-08-22T15:27:33.543
> 
> 标签：iphone, ios, xcode, uitableview, uiviewanimation

我有一个水平表格视图，想每 5 秒更改一次图像。我想用淡入淡出动画改变图像，使旧图像淡出，新图像淡入。所以我称之为这个方法：

```
self.slideTimer = [NSTimer scheduledTimerWithTimeInterval:5
                                                   target:self
                                                 selector:@selector(slideToNextImage)
                                                 userInfo:nil
                                                  repeats:YES]; 
```

这是我的`slideToNextImage:`

```
 self.lastIndexPath = indexPath;
 [UIView beginAnimations:@"FadeAnimations" context:nil];
 [UIView setAnimationDuration:2];
 self.horizontalView.alpha = 0.1f;
 [self.horizontalView.tableView scrollToRowAtIndexPath:self.lastIndexPath
         atScrollPosition:UITableViewScrollPositionMiddle
              animated:NO];
 [UIView commitAnimations];
 [UIView beginAnimations:@"FadeAnimations" context:nil];    
 [UIView setAnimationDuration:2];
 self.horizontalView.alpha = 1.0f;
 [UIView commitAnimations]; 
```

当我意识到图像褪色太快时，我看到第二张图像滚动时没有褪色动画

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T16:10:19.773

第二个动画开始而不等待第一个动画结束。

尝试这样的事情：

```
[UIView animateWithDuration:2.0 animations:^{
    self.horizontalView.alpha = 0.1f;
    [self.horizontalView.tableView scrollToRowAtIndexPath:self.lastIndexPath
                                         atScrollPosition:UITableViewScrollPositionMiddle
                                                 animated:NO];

} completion:^(BOOL finished) {
    [UIView animateWithDuration:2 animations:^{
        self.horizontalView.alpha = 1.0f;
    }];
}]; 
```

# c# - 列出/下载 Http 文件夹文件而不解析 HTML

> ID：12076488
> 
> 赞同：0
> 
> 时间：2012-08-22T15:27:34.120
> 
> 标签：c#, http

我的 Windows 服务需要连接到特定的 HTTP 文件夹（IIS 7）并列出其中的文件，然后开始一一下载。有没有真正专业的方法，而不是解析 HTML 标签来获取文件名（这很可能会导致问题）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:36:05.457

除非您在 IIS 上设置了[目录浏览设置。](http://technet.microsoft.com/en-us/library/cc725840.aspx)

这是您的服务器还是您要抓取的第三方网站？如果您无法控制服务器，您可能别无选择。

# javascript - 如果 iframe 在 src 中有非 html 文档（pdf 或文本），则 iframe 中的 onload 不起作用

> ID：12076494
> 
> 赞同：13
> 
> 时间：2012-08-22T15:27:49.260
> 
> 标签：javascript, iframe, onload

我有带有 onload 处理程序的 iframe：

```
<iframe id="FrameForPrintVersion" src="" border="0" style="height:0; width:0; visibility:hidden;" onload = 'frameOnload()' > 
```

如果我使用 html-pages 作为 iframe 的来源，它可以正常工作，但当我将 src 设置为任何 pdf 文档时就不行。在这种情况下加载 PDF 文档时是否可以处理？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T06:05:17.797

根据 W3C，iframe 标签不支持任何事件属性。虽然主流浏览器都支持但不能依赖。如果您真的想要它，请尝试此解决方法。您可以尝试类似的方法。

```
setTimeout(function(){
    if($('#FrameForPrintVersion').contents().find('*')!='undefined') {
        alert('your frame loaded');
    }
},200) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T05:58:17.960

那是IE的问题。我正在使用以下作为解决方案。

```
function dodisable() {
    var b1=document.getElementById('B1'); 
    b1.value='Please Wait....'; 
    b1.disabled=true;
    document.getElementById("browse").src = "hhhh.pdf"; /*LINK TO YOUR PDF*/
    setTimeout( URLoader_Timeout, 100);
}

function doenable() {
    var b1=document.getElementById('B1'); 
    b1.value='Submit'; 
    b1.disabled=false;
}

function URLoader_Timeout() { 
    if ( document.getElementById("browse").readyState == "complete")
        doenable();
    else
        setTimeout( URLoader_Timeout ,100);
} 
```

HTML

```
<input type="button" name="B1" id="B1" value="Go" onclick="dodisable();" />
<iframe id="browse" onload="return  doenable();" style="width:100%;height:100%"></iframe> 
```

# sql - 休眠查询无法按预期工作

> ID：12076495
> 
> 赞同：-1
> 
> 时间：2012-08-22T15:27:50.717
> 
> 标签：sql, hibernate, nhibernate

您好我有以下查询：

```
 String hql = "UPDATE Raumreservierung as rr " +
              "set VON = :begin " +
              "where VON = :Von " +
              "and Raum_ID IN (SELECT r.ID FROM Raum r " +
              "inner join r.Panel as pl with pl.ID = " + clientId + "";

 IQuery query = CurrentSession.CreateQuery(hql);
                query.SetParameter("begin", DateTime.Now);
                query.SetParameter("Von", v.Von);
                int result = query.ExecuteUpdate(); 
```

查询对“VON”进行更新。这工作正常，但查询的其余部分不起作用。查询的其余部分似乎不起作用。但没有得到任何错误。

对于查询的其余部分，我的意思是查询的以下部分：

```
"and Raum_ID IN (SELECT r.ID FROM Raum r " +
"inner join r.Panel as pl with pl.ID = " + clientId + ""; 
```

因为它应该只在“VON”列上发生更新，例如当“clientId”为“AT2”时，但该部分不起作用。因为更新也发生在其他 clientId 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T18:42:06.247

你忘了关闭你的括号。

（另外，您也应该为 clientId 使用参数）

# java - 用于 ORM 的优秀 Java 应用服务器

> ID：12076496
> 
> 赞同：0
> 
> 时间：2012-08-22T15:27:50.777
> 
> 标签：java, jakarta-ee, jpa, orm, application-server

我刚刚与一位经验丰富且合格的同事就 JPA 和应用程序服务器进行了交谈。

现在，我正在将 JPA 与 Glassfish 一起使用，他说这是一个糟糕的应用程序服务器，因为开销很大。他还提到他正在使用 Tomcat，这是一个标准，它也有一个缺点，即不支持 Java EE 中的 JPA 等重量级。然后是一些名字，比如 Hibernate 和 Spring，我听说过但没有处理过。

所以我的问题是：对于支持 Java EE 和 JPA 且流行且快速的应用程序服务器，有哪些好的选择？

注意：我过去问过一个类似的问题，不知何故，它被认为是非建设性的。如果您认为这是一篇非建设性的帖子，请在关闭之前写下回复，详细说明原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T04:51:40.437

您有许多选项可以选择 Java EE 应用程序服务器。[这](http://en.wikipedia.org/wiki/Comparison_of_application_servers)是 Wiki 中流行的 Java EE 服务器的比较。它们都是很好的应用服务器。但最重要的不是服务器。使用对你的开发环境更方便的服务器更重要。选择对您更方便的服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:35:48.360

> 对于支持 Java EE 和 JPA 且流行且快速的应用程序服务器，有哪些不错的选择？

您选择什么服务器取决于您的需求。如果您的应用程序中不需要任何 EE 功能（EJB、事务等），那么使用重量级服务器没有多大意义，您可以选择兼容（部分符合规范）更轻的 Tomcat（没有您无论如何都不会使用的所有这些依赖项）并完成工作。

如果您想对所有应用程序服务器进行具体评论，那么您可能应该做一些研究，看看哪台服务器更适合*您的*要求。但这只是我的意见...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T15:31:10.823

按照我的说法：JBoss 是最流行和最稳定的开源应用程序服务器。

[Stack Trace](https://stackoverflow.com/questions/217827/which-is-the-best-open-source-application-server)上提供了一个很好的讨论

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T15:38:29.643

我正在使用带有 JPA Hibernate 实现的 Jetty，它工作得非常好。开箱即用，它只是 JavaEE 规范的一个子集，但它是轻量级的，可以使用外部库进行扩展，以添加缺少的 JavaEE 部分。

（我的基于码头的独立应用程序在嵌入式系统上使用 160MB 可用 RAM 运行）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-22T15:39:06.010

您可以在完整的 Java EE 服务器之外使用 JPA，但必须正确引导它。我相信 Spring 有办法做到这一点，并允许您在 tomcat、jetty 等中使用 JPA...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-22T18:49:48.197

我建议您首先了解您的应用程序需求，并了解您为什么需要 JPA。
我不反对 JPA，但在某些情况下，它可能会引入性能问题，您不希望您的应用程序有这个问题。
话虽如此，我还是建议您使用支持 EJB-Lite 的服务器。
您可以使用例如上面建议的 JBoss。
另一个有趣的选择是使用[TomEE](http://openejb.apache.org/apache-tomee.html)，它提供了完整的基于 tomcat 的 web-profile 堆栈。

# php - php包含来自子文件夹

> ID：12076499
> 
> 赞同：0
> 
> 时间：2012-08-22T15:27:53.830
> 
> 标签：php

我一直在使用来获取我的文件

```
<?php include 'example.html'; ?> 
```

但是，如果它们位于子文件夹中，您如何获取它们：例如

```
pictures/example.html 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T15:29:48.720

它应该像

```
<?php
include('pictures/face.jpg');
?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T15:30:44.880

最佳实践是定义一个`ABSOLUTE_PATH`常量，其中包含所有内容所在的目录。之后，您可以简单地复制和粘贴所有内容，因为它定义了“完整”路径，该路径不会因目录而异。

例如

`define("ABS_PATH", $_SERVER['DOCUMENT_ROOT']);`

或者

`define("ABS_PATH", dirname(__FILE__));` // 这将路径定义为文件所在的目录。然后在任何时候您都可以简单地执行此操作以包含文件

`include(ABS_PATH . "/path/to/file");`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T15:30:28.753

您需要做的就是像这样包含它：

```
<?php
  include('pictures/face.jpg');
?> 
```

但是**，您为什么要尝试包含图像？**这应该通过 HTML 来完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T15:35:37.890

如果它是一个源文件，你可以这样做：

```
include __DIR__ . '/pictures/src.php'; 
```

但是因为您正在处理二进制文件（原始数据、1 和 0），您可能需要使用图像库：

```
$resource = imagecreatefromjpeg( string $filename ); 
```

请参阅[http://www.php.net/manual/en/function.imagecreatefromjpeg.php](http://www.php.net/manual/en/function.imagecreatefromjpeg.php)

或者，如果您只想要字节，请使用：

```
$contents = file_get_contents(__DIR__ . '/pictures/src.php'); 
```

# javascript - Jquery $.get() RangeError 超出最大调用堆栈大小

> ID：12076501
> 
> 赞同：0
> 
> 时间：2012-08-22T15:28:01.810
> 
> 标签：javascript, jquery

我在调试另一个问题时检查了 Safari 中的错误控制台（该问题现已修复），我注意到它显示消息“RangeError Maximum Call Stack Size Exceeded”。通过注释掉代码，我能够查明导致问题的原因。但是，通过四处搜索，我没有找到其他任何有 Jquery $.get() 导致问题的人。我对 ajax 不是很熟悉，但是通过查看代码，我没有看到任何可能导致此问题的递归。此外，如果我注释掉成功函数中的代码，我仍然会收到错误消息。但是，如果我注释掉 $.get 调用，错误消息就会消失。该应用程序运行良好，从不显示任何警报错误消息，但我只是担心这可能会成为一个更大的问题。

```
function update_database(newLat, newLng) {
    if (navigator.onLine && connectStatus) {
        $.get(GREEN_CAB_URL + "updatedatabase/", {
            lat: newLat,
            lng: newLng
        }, function(data) {
            data = data.substring(0, data.length - 1);
            data = "{\"recs\":[" + data + "]}";
            var arr = $.parseJSON(data);
            var arrr = arr.recs;
            if (clientdb) {
                clientdb.transaction(function(tx) {
                    for (var i in arrr) {
                        tx.executeSql("INSERT OR REPLACE INTO ads (ad_id, sec_filename, filename, lng, lat, radius, first_img_url, second_img_url, days, was_removed, business, phone_number, start_time_everyday, end_time_everyday, is_vid) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) ", [arrr[i].id, arrr[i].second_filename, arrr[i].filename, arrr[i].lng, arrr[i].lat, arrr[i].radius, '<img src="' + GREEN_CAB_URL + arrr[i].filename + '" class="ads" />', '<img src="' + GREEN_CAB_URL + arrr[i].second_filename + '" class="secondad"/>', arrr[i].days, arrr[i].was_removed, arrr[i].business, arrr[i].phone_number, arrr[i].start_time_everyday, arrr[i].end_time_everyday, arrr[i].is_movie], insert_query_success, insert_error);
                    } // end of for(var i in arrr)
                }, function(err) {
                    alert("client.transaction error: " + err.message + "(code: " + err.code + ")")
                }, update_database_success);
            }
        }).error("updatedatabase ERROR");
    }
} 
```

# sql - 教授和系评价系统ERD

> ID：12076507
> 
> 赞同：-3
> 
> 时间：2012-08-22T15:28:16.403
> 
> 标签：sql, csv, erd

我创建了一个 ERD（不知道是否正确），但真正的问题在于 CSV 文件，因为您可以看到我有三个表，学生（左上角）、教师（左上角第三个）和课程表（上第二个） ) 现在我们的系统可以为教授和学生上传 CSV 文件，问题是我不知道如何为与表格（教授和螺柱）有关系的课程上传文件。

![不可读的手绘 ERD :(](../Images/118f7074d472d5fdfab997b48c263739.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:26:29.147

如果我理解正确，您希望将 CSV 文件批量加载到具有外键约束的表中。

看到这个问题并接受答案

[当行依赖于外键值时如何使用 BULK INSERT？](https://stackoverflow.com/questions/8380621/how-to-use-bulk-insert-when-rows-depend-on-foreign-keys-values)

# ios - 如何从 UIStoryboardPopoverSegue 获取由 UIPopoverController 包装的视图控制器？

> ID：12076509
> 
> 赞同：0
> 
> 时间：2012-08-22T15:28:25.453
> 
> 标签：ios, uistoryboard, xcode-storyboard

我有一个 UISplitViewController，主控器在 UINavigationController 中嵌入了一个 UIViewController。工具栏按钮负责通过 segue 启动 UIPopoverController。这样的弹出框控制器包装了一个 UIViewController，它也嵌入在 UINavigationController 中，称为 SettingsViewController。

我可以从 UIStoryboardPopoverSegue 获得指向 UIPopoverController 的指针：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(UITableViewCell *)sender
{
  if ([segue.identifier isEqualToString:@"Settings"]) {
    UIStoryboardPopoverSegue *popoverSegue = (UIStoryboardPopoverSegue*) segue;

    SettingsViewController *settingsViewController = ... // TODO
    settingsViewController.popoverController = popoverSegue.popoverController;
  }
} 
```

但我找不到获取对内部 SettingsViewController 的引用的方法。我不想使用可通过类方法访问的静态字段，这将是一个糟糕的解决方法。

我错过了什么才能让它正确？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T16:13:54.733

UIPopoverSegue 包含一个 UIPopoverController

```
UIPopoverController *popoverController = popoverSegue.popoverController; 
```

有了这个，您可以轻松获取 contentViewController（弹出窗口中显示的视图）

```
UINavigationController *contentNC = (UINavigationController *) popoverController.contentViewController; 
```

从内容导航控制器中，您可以获得实际的视图控制器：

```
SettingsViewController *settingsVC = [contentNC.viewControllers lastObject]; 
```

这能解决你的问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T02:41:09.327

如问题开头所述，我的应用程序中有一个非常相似的设置。

在我的`prepareForSegue`（以及我检查的内部`segue.identifier`）中，我抓取并在弹出框的视图控制器上设置了一些东西，如下所示：

```
settingsViewController *settingsPop = segue.destinationViewController;
settingsPop.someVar = self.var; 
```

`segue.destinationViewController`使它变得简单易行。

# spring-security - 部署在 Cloud Foundry 上的 Spring Security SSO

> ID：12076516
> 
> 赞同：0
> 
> 时间：2012-08-22T15:28:50.297
> 
> 标签：spring-security, cloud-foundry

寻找部署在 Cloud Foundry 配置上的 SSO 的 Spring Security 或示例。

我已经尝试过使用 CAS 的 Spring 安全性，Open Id 在本地运行良好，但在云代工厂上的部署失败。

有人可以帮助了解 Cloud Foundry 对 SSO 的支持吗？如果可能的话，请给我一个例子？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T00:31:46.880

Cloud Foundry 有一个专注于 SSO 的开源项目，该项目负责处理用户帐户和身份验证。

在这里您可以找到源代码和文档：

[https://github.com/cloudfoundry/uaa](https://github.com/cloudfoundry/uaa)

这是可与 UAA 一起使用的示例应用程序部分。您可以轻松地签出代码并让它在您的本地主机 tomcat（servlet 容器）上运行并尝试单点登录。

[https://github.com/cloudfoundry/uaa/tree/master/samples](https://github.com/cloudfoundry/uaa/tree/master/samples)

该技术在 Spring 中使用 OAuth 2 实现

这是 Syer 博士的精彩演讲，他现在是 Cloud Foundry 的一员，他演示了他在 UAA 上的早期作品。它当然会变得非常完整，您可以根据需要充分使用它。

[http://www.infoq.com/presentations/Identity-Management-with-Spring-Security?utm_source=twitterfeed&utm_medium=twitter&goback=%2Egde_41311_member_96261662](http://www.infoq.com/presentations/Identity-Management-with-Spring-Security?utm_source=twitterfeed&utm_medium=twitter&goback=%2Egde_41311_member_96261662)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T16:27:34.663

[http://static.springsource.org/spring-security/site/docs/3.1.x/reference/sample-apps.html](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/sample-apps.html) 这个应该涵盖spring security中的所有sso示例。如果你在 cloud Foundry 上部署有问题，你可以把详细的 err log 贴在这里，让我们看看。

谢谢，威廉

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T14:06:51.810

CAS 需要一些 Tomcat 配置。您是否更新了 CF tomcat 配置以支持 CAS 和 HTTPS？还提供您的 Spring SSO 配置以便进一步调查。

# jquery - ruby , ajax 中的搜索功能

> ID：12076518
> 
> 赞同：0
> 
> 时间：2012-08-22T15:28:52.270
> 
> 标签：jquery, ruby, ajax, erb

有搜索名字的搜索按钮，但是功能不起作用，下面是编码源：

_site_categories.html.erb

```
function find_category_by_name() {   
    $("img#loader").show();   
    $.ajax({  
        url: "<%= find_category_by_name_url %>",   
        type: "POST",   
        data: { code: $("input[type='text']#name").val() },   
        success: function(resp) {  
            if (resp) {  
                $("label#find_category_id").text(resp.category.id);   
                $("input[type='hidden']#name").val(resp.category.name);   
                enable_next_button();   
            } else {   
                $("label#find_category_id").text("Did not found.");   
                $("input[type='hidden']#name").val("");   
                disable_next_button();    
            }   
        },   
        complete: function() {   
            $("img#loader").hide();   
        }   
});   
} 
```

site_step_1.html.erb：

```
if (value2) {    
        $.ajax({    
            url: "<%= save_site_step_params_url %>",   
            type: "POST",   
            data: { site_category_name: value },  
            success: function(resp) {  
                window.location.href = "<%= site_step_2_url %>";  
            }  
        });     
    } else {     
        alert("Please select the type of website you are creating and the subcategory to activate the next step.");     
    } 
```

# php - 如何在 Symfony 2.1 中使用 Composer 安装自己的包？

> ID：12076521
> 
> 赞同：7
> 
> 时间：2012-08-22T15:29:00.077
> 
> 标签：php, symfony-2.1, composer-php

我刚刚迁移到 Symfony 2.1，但我不明白，如何使用 Composer 安装我自己的包？

在 2.0.x 中这很容易`deps`：

```
[MyOwnBundle]
  git=git@git.weboshin.ru:weboshin_cms_bundle.git
  target=/bundles/My/OwnBundle 
```

之后我就触发`bin/vendors update`了，就是这样！

但是现在没有`deps`文件了，我应该用 Composer 来做所有的事情。请给我任何提示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T01:14:59.370

我找到了答案。

```
// my_project/compose.json:
{
    "repositories": [
        {
            "type": "vcs",
            "url": "own_repository_url"
        }
    ],

    // ...

    "require": {
        // ...
        "own/bundle": "dev-master"
    }
}, 
```

```
// own_repository/own_bundle/compose.json:
{
    "name": "own/bundle"
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T16:03:20.530

将 composer.json 文件添加到您的包中。例如，我的其中一个捆绑包有这个：

```
{
    "name":        "cg/kint-bundle",
    "type":        "symfony-bundle",
    "description": "This bundle lets you use the Kint function in your Twig templates. Kint is a print_r() replacement which produces a structured, collapsible and escaped output",
    "keywords":    ["kint", "debug", "symfony", "bundle", "twig"],
    "homepage":    "http://github.com/barelon/CgKintBundle",
    "license":     "MIT",

    "authors": [
        {
            "name": "Carlos Granados",
            "homepage": "http://github.com/barelon"
        },
        {
            "name": "Symfony Community",
            "homepage": "http://github.com/barelon/CgKintBundle"
        }
    ],

    "require": {
        "php":                      ">=5.3.2",
        "symfony/framework-bundle": ">=2.0.0",
        "raveren/kint":             "dev-master"
    },

    "minimum-stability": "dev",

    "autoload": {
        "psr-0": {
            "Cg\\KintBundle": ""
        }
    },

    "target-dir": "Cg/KintBundle"
} 
```

然后将你的包添加到[packagist.org](http://packagist.org)。这很简单，基本上你只需要提供你的 git 地址，剩下的就交给它了。

一旦你的包在 packagist 中可用，那么只需将它作为依赖项添加到你的 symfony 项目的 composer.json 文件中。就我而言，我有：

```
"require": {
    ....
    "cg/kint-bundle": "*"
}, 
```

然后在你的 symfony 目录中运行“composer update”就可以了！您甚至不需要更新自动加载文件，composer 会为您完成。剩下的唯一事情就是在 appkernel.php 中加载包

# sql - SQL Server 中的表变量和空值检查

> ID：12076530
> 
> 赞同：0
> 
> 时间：2012-08-22T15:29:24.080
> 
> 标签：sql, sql-server

我有以下查询。

```
CREATE TYPE [dbo].[DeptIdList] AS TABLE(
    [DepartmentId] [smallint] NULL
)
GO
set nocount on

declare @department_ids DeptIdList
declare @tableContainsRecords int = 0

insert into @department_ids
values
(5), (6), (7), (8), (9)

select d.DepartmentID, d.Name, d.GroupName
  from HumanResources.Department as d
  right outer join @department_ids as di on
    d.DepartmentID = di.DepartmentID 
```

`@department_ids`如果包含行，我想选择特定部门；如果不是，`SELECT`则应返回部门表中的所有记录。

最简单和最佳的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:45:18.253

这应该有效：

```
SELECT d.DepartmentID, d.Name, d.GroupName
FROM HumanResources.Department d
WHERE DepartmentID IN (SELECT DepartmentID FROM @department_ids)
OR (SELECT COUNT(*) FROM @department_ids) = 0 
```

# cmake - Cmake脚本问题find_path

> ID：12076531
> 
> 赞同：1
> 
> 时间：2012-08-22T15:29:25.943
> 
> 标签：cmake, build-process

我已将这两行放在我的 Findglm.cmake 文件中以指向此头库的头文件。

```
find_path(glm_INCLUDE_DIR NAMES glm.hpp matrix_transform.hpp type_ptr.hpp PATHS
  ${CMAKE_SOURCE_DIR}/libs/glm-0.9.3.2/glm ${CMAKE_SOURCE_DIR}/libs/glm-0.9.3.2/glm/gtc
  ${CMAKE_SOURCE_DIR}/libs/glm-0.9.3.2/glm/gtx ${CMAKE_SOURCE_DIR}/libs/glm-0.9.3.2glm/core)
set(glm_INCLUDE_DIRS ${glm_INCLUDE_DIR}) 
```

但是，当我生成我的 Xcode 项目时，它说它找不到 matrix_transform.hpp 和 type_ptr.hpp

我已经玩过这个了，它似乎只找到了第一个参数我想知道我是否使用了错误的查找路径？

我正在使用 cmake 2.8.8 darwinports。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:41:04.227

该`find_path()`命令返回单个目录。在您的情况下，它是第一个目录，其中包含第一个文件。

如果此 glm 将始终位于您的源目录中，那么就足够了

```
include_directories(${CMAKE_SOURCE_DIR}/libs/glm-0.9.3.2/glm
  ${CMAKE_SOURCE_DIR}/libs/glm-0.9.3.2/glm/gtc
  ${CMAKE_SOURCE_DIR}/libs/glm-0.9.3.2/glm/gtx
  ${CMAKE_SOURCE_DIR}/libs/glm-0.9.3.2/glm/core) 
```

`find_path()`用于确定项目外部某处的目录。

# python - 将 fanstatic 与龙卷风网络集成？

> ID：12076533
> 
> 赞同：0
> 
> 时间：2012-08-22T15:29:31.590
> 
> 标签：python, tornado, fanstatic

我正在尝试将 fanstatic.org 与 tornadoweb 集成，并且很好奇是否有人有任何先验知识或任何代码可以反映这是如何完成的？我一直在阅读文档，我相信它可以完成，因为 tornado 确实提供了 wsgi 接口。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:10:05.063

```
import tornado.wsgi
from fanstatic import Fanstatic   

from your_tornado_app import MainHandler # tornado.web.RequestHandler

app = tornado.wsgi.WSGIApplication([
    (r"/", MainHandler),
])
app = Fantastic(app)

if __name__ == '__main__':
    from wsgiref.simple_server import make_server

    server = make_server('127.0.0.1', 8080, app)
    server.serve_forever() 
```

# javascript - Chrome：如何将两个连续的跨度插入可编辑的正文而不嵌套它们

> ID：12076538
> 
> 赞同：1
> 
> 时间：2012-08-22T15:29:51.460
> 
> 标签：javascript, range, collapse

我正在尝试将两个连续的跨度插入 Chrome 上的可编辑正文元素。我的问题是第二个跨度最终在第一个跨度内而不是在它旁边。

我已经简化了我的示例，但在现实生活中，最终用户可能已经移动了光标或在两个插入之间选择了一些文本。

```
<html>
<head>
<script>
function load(){
    insert("<span style='color:red'>hello</span>");
    insert("<span>goodbye</span>");
}

function insert(sHtml){

    var oSel = window.getSelection();
    var oRange = oSel.rangeCount > 0 ? oSel.getRangeAt(0) : void 0;

    if(!oRange){
        oRange = window.document.createRange();
        oRange.selectNodeContents(window.document.body);
    }

    var newFrag = oRange.createContextualFragment(sHtml);
    oRange.insertNode(newFrag);
    oRange.collapse(false);
    oSel.removeAllRanges()
    oSel.addRange(oRange);

}
</script>
</head>
<body onload="load()">
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T15:35:56.020

你正在做奇怪而复杂的事情来插入你的节点。为什么使用选择？

使用 jquery，您可以像这样定义插入函数：

```
function insert(html) {
   $("body").append(html);
} 
```

如果没有 jquery，您将不得不添加节点并在节点中设置文本：

```
var newNode = document.createElement("span");
newNode.setAttribute("style", "color:red");
newNode.appendChild(document.createTextNode("hello"));
document.body.append(newNode); 
```

# ios - 检查 MKPolyline 是否与 MKPolygon 相交

> ID：12076547
> 
> 赞同：0
> 
> 时间：2012-08-22T15:30:25.883
> 
> 标签：ios, mkmapview, mkoverlay

我试图弄清楚 a 是否与地图上的 a`MKPolyline`相交`MKPolygon`。目前我对此的唯一想法是通过该线并测试每个点是否位于多边形中。`MKPolygon`更确切地说，我正在尝试测试地图上是否没有`MKUserLocation`目标（因此`MKUserLocation`可以看到该目标）。

关于如何做到这一点的任何更实际的想法？如果不是，如何将 MKPolyLine 转换成很多点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:49:21.323

它们都符合 MKOverlay 协议。您可以使用在称为 boundingMapRect 的协议上定义的属性，并在称为 intersectsMapRect 的协议定义的方法上使用它。更多信息在这里：

[http://developer.apple.com/library/ios/#DOCUMENTATION/MapKit/Reference/MKOverlay_protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/MapKit/Reference/MKOverlay_protocol/Reference/Reference.html)

# java - GWT Autobean Codex 读取地图

> ID：12076550
> 
> 赞同：2
> 
> 时间：2012-08-22T15:30:42.567
> 
> 标签：java, json, gwt, gxt, autobean

我有一个 JSON 映射，例如：

```
{ "element":"value","element2":"value2",...} 
```

带有键和值字符串。我尝试用 autobean 阅读它，但我得到了奇怪的例外。它应该是直截了当的，不是吗？

我得到的错误是：

```
[ERROR] [project_name] - The java.util.Map parameterization is not simple, but the getConf method does not provide a delegate 
```

我是这样读地图的：

```
final String jsObject = GeneralContextNativeReader.read("globalConf");
GlobalConfFactory globalConfFactory = GWT.create(GlobalConfFactory.class);
Map<String, String> globalConf = AutoBeanCodex.decode(globalConfFactory, Map.class, jsObject).as(); 
```

工厂定义为：

```
public interface GlobalConfFactory extends AutoBeanFactory {
    AutoBean<Map<String, String>> globalConf();
} 
```

那有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:39:22.297

AFAIK`Maps`和`Lists`其他非简单对象只能是引用类型而不是值类型。有关更多详细信息，请参见[此处](http://code.google.com/p/google-web-toolkit/wiki/AutoBean#Property_types)。
将代码更改为此应该可以工作：

```
public interface Data {
   public Map<String,String>> getGlobalConf();
}

public interface DataFactory extends AutoBeanFactory {
   AutoBean<Data> getData();
}

final String jsObject = GeneralContextNativeReader.read("globalConf");
DataFactory dataFactory = GWT.create(DataFactory.class);
Data data = AutoBeanCodex.decode(dataFactory, Data.class, jsObject).as();
Map<String, String> globalConf = data.getGlobalConf(); 
```

您的 json 字符串必须看起来像这样：

```
{"globalConf":{ "element":"value","element2":"value2",...}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-25T18:11:16.380

如果您的 AutoBean 接口包含静态方法（Java 8 中的新方法），也会发生这种情况。

# mysql - Grails：使用 MISAM 方言时 SQL 语法错误

> ID：12076552
> 
> 赞同：2
> 
> 时间：2012-08-22T15:30:44.080
> 
> 标签：mysql, hibernate, grails

> **可能重复：**
> [Grails：更改休眠方言时 SQL 语法错误](https://stackoverflow.com/questions/12077148/grails-error-in-sql-syntax-when-changing-the-hibernate-dialect)

我正在将 Grails 与 mySQL 数据库一起使用，并且正在尝试更改数据库引擎。据我研究，这可以做到最好

```
 dialect = "org.hibernate.dialect.[MyDialect]" 
```

在 DataSource.groovy 配置中。但是当我将方言设置为 org.hibernate.dialect.MySQLMyISAMDialect 时，我的表的创建失败并出现错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'type=MyISAM' 附近使用正确的语法

稍后我还尝试使用以下方法更改表格：

sql.execute("ALTER TABLE book ENGINE = MISAM;")

这实际上有效，但是在创建后更改引擎时，表的所有外键都会被删除。

我应该如何避免错误并正常更换引擎？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:13:27.447

铺路，

我正在运行 MySQL 5.5.25、Grails 2.1.0 和 grails hibernate-2.1.0 插件，它在后台使用 hibernate-core 3.6.10.FINAL。

这可能是您的 Grails 版本（更具体地说，是 Grails 正在使用的 Hibernate 的底层版本）和您的 MySQL 版本的问题。

[这是在Hibernate JIRA](https://hibernate.onjira.com/browse/HHH-5988)上报告的一个错误：HHH-5988 。

我使用 InnoDB 作为我的引擎，我尝试在 MyISAM 中交换如下`DataSource.groovy`：

```
dataSource {
    pooled = true
    driverClassName = "com.mysql.jdbc.Driver"
    // dialect = "org.hibernate.dialect.MySQL5InnoDBDialect"
    dialect = "org.hibernate.dialect.MySQLMyISAMDialect"
    username = "study"
    password = "********"
} 
```

我在创建表时也遇到了错误。

这是我得到的错误之一的示例，它对应于 Hibernate JIRA 上报告的错误：

```
| Error 2012-08-22 13:15:12,739 [pool-4-thread-1] ERROR hbm2ddl.SchemaExport  
- Unsuccessful: create table user (id bigint not null auto_increment, 
version bigint not null, 
login varchar(255) not null unique, 
password varchar(255) not null, 
role varchar(5) not null, 
primary key (id)) type=MyISAM 
```

[对上述 Hibernate JIRA 错误的评论之一是一位用户正在为 MySQL 5 MyISAM](http://code.google.com/p/snofyre/source/browse/trunk/snomed-osgi/uk.nhs.cfh.dsp.snomed.persistence/src/main/java/uk/nhs/cfh/dsp/snomed/persistence/orm/MySQL5MyISAMDialect.java)创建自己的自定义方言。

# php - 使用 PHP 为 jqPlot 创建数据

> ID：12076555
> 
> 赞同：0
> 
> 时间：2012-08-22T15:30:56.953
> 
> 标签：php, jquery, jqplot

我正在使用[http://www.jqplot.com/tests/pie-donut-charts.php](http://www.jqplot.com/tests/pie-donut-charts.php)需要以下列格式提供数据：

```
//JavaScript
var data = [
  ['Heavy Industry', 12],['Retail', 9], ['Light Industry', 14],
  ['Out of home', 16],['Commuting', 7], ['Orientation', 9]
]; 
```

数据是使用 PHP 在服务器端生成的。我正在手动创建字符串，如下所示：

```
//PHP
$string.='["'.$row['name'].'",'.$row['count'].'],'; 
```

我宁愿只创建一个数组，并使用 json_encode() 或类似的东西来创建数据。有什么建议我会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:42:48.313

```
$array = array(
    array(
        "Heavy Industry",
        12
    ),
    array(
        "Retail",
        9
    )
);
$json = json_encode($array);
var_dump($json); // "[["Heavy Industry",12],["Retail",9]]" 
```

# jquery - YouTube 嵌入似乎干扰了 CSS 下拉悬停

> ID：12076556
> 
> 赞同：0
> 
> 时间：2012-08-22T15:31:06.573
> 
> 标签：jquery, css, google-chrome

在过去的几个月里没有代码更改，下拉菜单在[http://weldtite.co.uk/上开始表现得很奇怪](http://weldtite.co.uk/)

链接背景应在悬停时变为红色，如果有下拉菜单，则应出现下拉菜单。应用了在悬停时添加类的 jQuery（为了 IE6 用户的利益）。所以 CSS 看起来像这样：

```
.primary-item:hover a,
.active a,
.primary-item:hover span,
.active span {
    background-color: #ed1b2d;
    color: #FFF;
}

.primary-item:hover .secondary-nav,
.active .secondary-nav {
    opacity: 1;
    visibility: visible;
} 
```

这适用于所有内页。

然而，主页中嵌入了 YouTube 视频。如果我删除 YouTube 视频，菜单悬停状态将起作用。如果我把它们放回去，菜单悬停状态会再次失败。

**这似乎只是谷歌浏览器（21.0.1180.82）中的一个问题，而且它只是偶尔发生。**

我尝试过的事情：

*   在 iframe 上设置较低的 z-index。
*   将 iframe 包装在 div 中并向该 div 添加较低的 z-index。
*   将 ?wmode=transparent 和 opaque 添加到视频 UR1。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:38:25.747

出于某种奇怪的原因，拥有 CSS3“过渡：所有 .2s 缓入出局；” 在主要项目上，辅助导航下拉菜单破坏了它（但仅在带有 YouTube 视频的主页上。我已将它们更改为“过渡：不透明度 .2s 缓入出局；/过渡：背景色 .2s 缓入-进出；”，世界又一切安好。

奇怪。

# database - 如何将 wordpress sql/数据库从本地传输到 live

> ID：12076558
> 
> 赞同：0
> 
> 时间：2012-08-22T15:31:10.247
> 
> 标签：database, wordpress

因此，为了备份我的任何/所有 WordPress 网站，我使用了一个名为“BACKUP BUDDY”的工具，它是一个很棒的工具，但最近它确实出现了问题，今天终于开始了！

通常我的工作流程是我在本地机器上使用 WAMP/MAMP 开发网站。完成并准备好进行测试后，我使用该工具，将其移至我的个人测试服务器进行测试，当满意且工作得到批准时，我将移至真实服务器。

由于我的工具停止工作（上传了一半的内容），我决定先在真正的网络服务器上安装 Wordpress（完成），应用我的主题（完成），手动完成，

然后从本地服务器导出数据库 sql（完成），然后将其导入到真实服务器（完成），我完成它的 2xs 站点出现空白。（结果等于主要失败！）

我假设必须更改/完成某些事情才能使其正常工作，但不确定是什么。

与我可以正常与信息交谈的普通数据库不同，因为 WP 是一个 CMS，我假设它将信息与域联系起来，但同样，我不知道它 100% 是如何工作的......

关于我做错了什么的任何想法？因为到目前为止，如果我不能这样做，id 必须手动创建所有页面。另外，如果我打算将它从我的真实测试服务器移动到最终的真实目的地，那么我必须再次手动重做这一切......

先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:40:43.320

您可以使用 phpMyAdmin 导出它，然后使用 bigdump 导入它。从这里下载 bigdump 并确保您阅读了关于导出过程的第一个说明，在此处找到 [http://www.ozerov.de/bigdump/usage/](http://www.ozerov.de/bigdump/usage/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:44:53.137

你没有做错什么。听起来您的特定工作流程可能如下。

1.  通过以下方式上传网站内容`FTP`
2.  通过创建和导入数据库`PHPMyAdmin`，更改中的任何信息`wp-config.php`
3.  `wp-config.php`在[见下文]中定义站点 url
4.  [使用工具来查找和替换](http://interconnectit.com/124/search-and-replace-for-wordpress-databases/)wordpress 喜欢使用的任何硬编码站点 URL。[见下文]

示例代码：

定义网站网址

```
 define('WP_HOME','http://example.com');
    define('WP_SITEURL','http://example.com'); 
```

查找替换工具

代替

```
http://localhost/ 
```

和

```
http://www.your-new-site.com/ 
```

应该是这样的。这是活的！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-03T10:48:07.180

这是一个 bash 脚本，您可以使用它来为您自动执行整个过程：[https ://github.com/jplew/SyncDB](https://github.com/jplew/SyncDB)

# android - 安卓中的会话

> ID：12076581
> 
> 赞同：1
> 
> 时间：2012-08-22T15:32:21.207
> 
> 标签：android, session

我正在尝试创建一个确定对象的列表，所以我可以随时随地看到它。所以我想知道是否有任何方法可以在 Android 活动中获取一些信息，并在其他活动中看到它，就像 asp.net 中的 Session[] 一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T15:52:24.630

您可以使用[Android 共享首选项](http://developer.android.com/reference/android/content/SharedPreferences.html)

SharedPreferences 首选项 = getSharedPreferences("myPreferences",Context.MODE_PRIVATE);

```
SharedPreferences.Editor editor = prefs.edit();
editor.putString("email", "test@email.com");
editor.putString("name", "Test");
editor.commit(); 
```

要获取数据，请使用以下命令：

```
SharedPreferences prefs =
     getSharedPreferences("myPreferences",Context.MODE_PRIVATE);

String email= prefs.getString("email", "default_email@email.com"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T15:58:42.770

查看 Android[`Application`](http://developer.android.com/reference/android/app/Application.html)类。它本质上是一个具有应用程序生命周期的单例。

或者正如其他人所建议的那样，使用 Shared Preferences 来 a) 将事物持久化`Activities`和 b) 在“会话”之间持久化事物。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T15:37:33.147

[这个](https://stackoverflow.com/questions/4224913/android-session-management)或简单的[共享首选项](http://developer.android.com/reference/android/content/SharedPreferences.html)可能是您正在寻找的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T15:33:46.783

您可以将所有共享信息推送到静态对象中。

最好的方法是创建一个单例。这是一个示例： [http ://www.javaworld.com/javaworld/jw-04-2003/jw-0425-designpatterns.html](http://www.javaworld.com/javaworld/jw-04-2003/jw-0425-designpatterns.html)

# javascript - Javascript从包含日期的文件名创建图片库

> ID：12076585
> 
> 赞同：0
> 
> 时间：2012-08-22T15:32:26.660
> 
> 标签：javascript, jquery, image, html, date

伙计们，我为此发疯了，我知道使用 javascript 有很多限制，但我正在构建的网站只有 html 文件。我也可以使用 php，但它需要是一个可以引用但不包含在内的单独文件。最终扩展名必须是 .html

也就是说，我正在制作一张当天脚本的照片，以获取包含日期的图像名称的图像目录。例如，今天的图像是**20120822.jpg**，并且有一个巨大的图像目录，直到年底。明天的图片是**20120823.jpg**，昨天是**20120821.jpg**

好的，那部分有点简单.. 但现在我想创建一个由以前显示的所有图像组成的画廊.. 所以每个图像都会导致当前日期的文件名。所以我需要读取目录或只生成导致当前图像日期文件名的最后 20 张图像。我会满足于前 20 张图片或其他内容。

这是我用于当天照片的代码..知道我会怎么做吗？

```
 <script>

     //returns the current date in YYYYMMDDf_01.jpg format
     function getCurrentDateString(){

       //make a new date object set at the current date
       var currentDate = new Date();

       //get the four position year and
       //make it a string
       var currentYear = currentDate.getFullYear() + "";

       //get the zero-indexed month and add 1
       //for the real month and make it a strintg
       var currentMonth = (currentDate.getMonth() + 1) + "";

       //add a zero at the beginning if only one
       //digit month
       if (currentMonth.length == 1) {
         currentMonth = "0" + currentMonth;
       }

       //get the current day of the month and
       //make it a string
       var currentDayOfMonth = currentDate.getDate() + "";

       //add a zero if necessary
       if (currentDayOfMonth.length == 1) {
         currentDayOfMonth = "0" + currentDayOfMonth;
       }

       return(currentYear + currentMonth + currentDayOfMonth);
     }

     //preload image based upon currentDate
     var currentDateString = getCurrentDateString();

     var dailyImageObject = new Image();

      var dailyImageObjectURL = new Image();

     dailyImageObject.src = "http://perillotours.com/galleries/photo-of-the-day/images/" +         currentDateString + ".jpg";

     dailyImageObjectURL.href = "http://perillotours.com/galleries/photo-of-the-day/images/" + currentDateString + ".jpg";

     //called when the page loads to
     //set the actual HTML IMG element to have the same
     //SRC as our cached Image object
     function showDailyImage(){
       document.getElementById("dailyIMGElement").src = dailyImageObject.src;
     }
      function showDailyImageURL(){
       document.getElementById("dailyIMGElementURL").href = dailyImageObjectURL.href;
     }

     </script> 
```

这是我放置在 html 页面中以显示当天照片的代码。

```
 <a rel="prettyphoto" id="dailyIMGElementURL">
    <img width="523" style="background-color: #000000;" id="dailyIMGElement" height="335" border="0" /></a> 
```

所以基本上我想用最后 20 张图像循环上面的代码 20 次。任何想法我真的想不出该怎么做..

非常感谢您提供任何帮助或想法！

伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:02:34.057

您的代码没有引用任何 jQuery，因此假设您希望使用 jQuery：

1.  从循环开始 - 这样您就可以轻松定义所需的图像数量。通过使用日期对象，您不必担心减去多少天。（工作示例：http: [//jsfiddle.net/qH8xX/2/](http://jsfiddle.net/qH8xX/2/)）

    ```
    var html = "";
    for( i = 0; i < 20; i++ ) {
        html += "<li>" + i + "</li>";
    }

    $("#gallery").html( html ); 
    ```

2.  在循环中，从日期中减去 1，然后将其保存为日期。（工作示例：http: [//jsfiddle.net/qH8xX/3/](http://jsfiddle.net/qH8xX/3/)）

    ```
    var html = "";
    var date = new Date(); // store the current date

    for( i = 0; i < 20; i++ ) {
        // subtract 1 from date
        // more here: http://stackoverflow.com/questions/1187824/finding-date-by-subtracting-x-number-of-days-from-a-particular-date-in-javascrip
        date = new Date( date.setDate( date.getDate() - 1 ) );
        html += "<li>" + i + " = " + date.toDateString() + "</li>";
    }

    $("#gallery").html( html ); 
    ```

3\. 轮到你了：现在使用日期对象创建具有正确文件名的图像标签。使用它会有所帮助：[http ://www.w3schools.com/jsref/jsref_obj_date.asp](http://www.w3schools.com/jsref/jsref_obj_date.asp)

# java - 未使用拦截器绑定调用拦截器方法

> ID：12076586
> 
> 赞同：14
> 
> 时间：2012-08-22T15:32:36.230
> 
> 标签：java, ejb, java-ee-6, interceptor

我正在使用 Java EE 6 和 Jboss AS7.1 并尝试使用拦截器绑定（[来自 jboss 站点的示例](http://docs.jboss.org/cdi/spec/1.0/html/interceptors.html)）。

我有一个 InterceptorBinding 注释：

```
@InterceptorBinding
@Target({ ElementType.METHOD, ElementType.TYPE })
@Retention(RetentionPolicy.RUNTIME)
public @interface GeoRestrictedEquipment {
} 
```

拦截器：

```
@GeoRestrictedEquipment
@Interceptor
public class GeoRestrictedEquipmentInterceptor {

    @EJB EquipmentDao equipmenttDao;    
    @EJB SecurityService securityService;    

    @AroundInvoke
    public Object checker(InvocationContext ctx) throws Exception {
        Integer id = (Integer) ctx.getParameters()[0];
        Equipment equipment = equipmenttDao.findById(id);
        GeoChecker.check(equipment.getSite(), securityService.getUser());

        return ctx.proceed();
    }
} 
```

还有一个豆子：

```
@Stateless
@LocalBean
@SecurityDomain(Realm.NAME)
@RolesAllowed({ Roles.REGISTERED })
public class PumpService implements PumpServiceLocal {

    @Override
    @GeoRestrictedEquipment
    public PumpInfos getPumpInfos(Integer pumpId) {
        /* ... */
    }
} 
```

但是拦截器没有被调用......我从这个例子中错过了什么？

当我写这个时，拦截器被调用：

```
@Override
@Interceptors({GeoRestrictedEquipmentInterceptor.class})
public PumpInfos getPumpInfos(Integer pumpId) {
    /* ... */
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-11-19T10:07:15.623

根据文档，还有另一种方法，而不是使用 beans.xml：

> 使用@Priority 注解时，无需在 beans.xml 文件中指定拦截器。

```
@Logged
@Interceptor
@Priority(Interceptor.Priority.APPLICATION)
public class LoggedInterceptor implements Serializable { ... } 
```

它有效。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-22T21:23:19.013

您是否按照参考示例中的说明启用了拦截器？

> 默认情况下，bean 归档没有通过拦截器绑定绑定的已启用拦截器。必须通过在 bean 存档的 beans.xml 文件的元素下列出其类来显式启用拦截器。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-10T13:32:53.023

您可以使用任何优先级值 = Priority.Application 默认为 2000。

例如 =

```
@Interceptor 
@Loggable 
@Priority(100)
public class FileLogger {} 
```

优先类型：

*   PLATFORM_BEFORE [0-999] - 拦截器从第一个开始。它们由平台启动。
*   LIBRARY_BEFORE [1000-1999] - 由图书馆提供。
*   APPLICATION [2000-2999]-按申请
*   LIBRARY_AFTER,PLATFORM_AFTER [3000-4000]

您管理拦截器的主要加载。

# sphinx - Sphinx 搜索引擎，实时索引，如何将 sort_mode 设置为 SPH_SORT_TIME_SEGMENTS

> ID：12076590
> 
> 赞同：0
> 
> 时间：2012-08-22T15:32:43.337
> 
> 标签：sphinx

通过谷歌的所有文档和结果，我无法找到或弄清楚如何在使用实时索引时设置 sort_mode。

我只是将 SphinxQL 与 pdo_mysql 一起使用来连接到 sphinx 并运行如下查询： `SELECT item_id, item_type FROM my_index WHERE MATCH (:search_string) OPTION ...`

我可以设置 sort_mode 吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:03:49.393

排序模式不直接暴露。但是可以通过其他方式做它可以做的一切。

有关时间段，请参见

[http://sphinxsearch.com/blog/2010/06/27/doing-time-segments-geodistance-searches-and-overrides-in-sphinxql/](http://sphinxsearch.com/blog/2010/06/27/doing-time-segments-geodistance-searches-and-overrides-in-sphinxql/)

# android - 调整 EditText（或一般视图）的大小以填充屏幕的某些区域

> ID：12076591
> 
> 赞同：0
> 
> 时间：2012-08-22T15:32:47.080
> 
> 标签：android, resize, textview

在我当前的项目中，我有一个视图，上面三分之一有一些文本视图，中间有一个编辑文本，底部有一个按钮，所有这些都占用大致相同的空间。现在当我想在edittext中输入一些东西时，键盘弹出并且视图没有调整大小，所以键盘隐藏了一半的edittext，看起来很糟糕，或者视图被调整大小，缩小到它的一半大小，看起来......非常......糟糕。在我的应用程序的 iphone 版本中，我制作了它，所以当我点击编辑文本时，它会变大并放大，填满整个视图，因此只显示编辑文本和键盘。问题是，我完全不知道如何在 Android 中做到这一点。我已经重建了我的 xml 布局以使用 relativelayout 而不是 linearlayout，因为我认为它会更容易。然后我将更改放在 onFocusChange 方法中，如下所示：

```
et = (EditText)v.findViewById(R.id.etItems);
et.setOnFocusChangeListener(new OnFocusChangeListener() {

    @Override
    public void onFocusChange(View arg0, boolean arg1) {

        if(arg0==et) {
            if(arg1==true) {
                Log.i("EditText","got focus");
                enlargeEditText();
            } 
        } else {
            Log.i("EditText","lost focus");
        }

    }

});

private void enlargeEditText() {
   RelativeLayout.LayoutParams rllp = (LayoutParams) v.getLayoutParams();
   rllp.setMargins(0, 0, 0, 0);
   v.setLayoutParams(rllp);
} 
```

放大编辑文本方法不是最终的，我只是想看看是否有什么变化，但是……不是……而是我得到：

```
08-22 17:26:22.108: E/AndroidRuntime(20662):    at de.lochmann.einkaufsliste.FragCreateList$1.onFocusChange(FragCreateList.java:88)
08-22 17:26:22.108: E/AndroidRuntime(20662):    at android.view.View.onFocusChanged(View.java:3938)
08-22 17:26:22.108: E/AndroidRuntime(20662):    at android.widget.TextView.onFocusChanged(TextView.java:8465)
08-22 17:26:22.108: E/AndroidRuntime(20662):    at android.widget.EditText.onFocusChanged(EditText.java:136)
08-22 17:26:22.108: E/AndroidRuntime(20662):    at android.view.View.handleFocusGainInternal(View.java:3760)
08-22 17:26:22.108: E/AndroidRuntime(20662):    at android.view.View.requestFocus(View.java:5453)
08-22 17:26:22.108: E/AndroidRuntime(20662):    at android.view.View.requestFocus(View.java:5403)
08-22 17:26:22.108: E/AndroidRuntime(20662):    at android.view.View.requestFocus(View.java:5381) 
```

有什么问题？有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:37:59.233

错误是 ClassCastException。当您调整视图的布局参数时，您必须使用父视图的参数。您要操作的视图是RelativeLayout，但参数可能属于FrameLayout。我不确定，因为你只发布了你的 logcat 的*一部分*。

这是完整的 LogCat 跟踪：

```
08-22 12:23:41.879: E/AndroidRuntime(12603): FATAL EXCEPTION: main
08-22 12:23:41.879: E/AndroidRuntime(12603): java.lang.ClassCastException: android.widget.FrameLayout$LayoutParams
08-22 12:23:41.879: E/AndroidRuntime(12603):    at org.whatever.example.Example.resize(Example.java:80)
08-22 12:23:41.879: E/AndroidRuntime(12603):    at org.whatever.example.Example.access$0(Example.java:79)
08-22 12:23:41.879: E/AndroidRuntime(12603):    at org.whatever.example.Example$1.onFocusChange(Example.java:66)
08-22 12:23:41.879: E/AndroidRuntime(12603):    at android.view.View.onFocusChanged(View.java:2789)
08-22 12:23:41.879: E/AndroidRuntime(12603):    at android.widget.TextView.onFocusChanged(TextView.java:7198)
08-22 12:23:41.879: E/AndroidRuntime(12603):    at android.view.View.handleFocusGainInternal(View.java:2612)
08-22 12:23:41.879: E/AndroidRuntime(12603):    at android.view.View.requestFocus(View.java:3767)
08-22 12:23:41.879: E/AndroidRuntime(12603):    at android.view.ViewGroup.onRequestFocusInDescendants(ViewGroup.java:1152)
08-22 12:23:41.879: E/AndroidRuntime(12603):    at android.view.ViewGroup.requestFocus(ViewGroup.java:1108)
08-22 12:23:41.879: E/AndroidRuntime(12603):    at android.view.ViewGroup.onRequestFocusInDescendants(ViewGroup.java:1152)
08-22 12:23:41.879: E/AndroidRuntime(12603):    at android.view.ViewGroup.requestFocus(ViewGroup.java:1108)
08-22 12:23:41.879: E/AndroidRuntime(12603):    at android.view.ViewGroup.onRequestFocusInDescendants(ViewGroup.java:1152)
08-22 12:23:41.879: E/AndroidRuntime(12603):    at android.view.ViewGroup.requestFocus(ViewGroup.java:1108)
08-22 12:23:41.879: E/AndroidRuntime(12603):    at android.view.ViewGroup.onRequestFocusInDescendants(ViewGroup.java:1152)
08-22 12:23:41.879: E/AndroidRuntime(12603):    at android.view.ViewGroup.requestFocus(ViewGroup.java:1111)
08-22 12:23:41.879: E/AndroidRuntime(12603):    at android.view.View.requestFocus(View.java:3718)
08-22 12:23:41.879: E/AndroidRuntime(12603):    at android.view.ViewRoot.performTraversals(ViewRoot.java:1285)
08-22 12:23:41.879: E/AndroidRuntime(12603):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1957)
08-22 12:23:41.879: E/AndroidRuntime(12603):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-22 12:23:41.879: E/AndroidRuntime(12603):    at android.os.Looper.loop(Looper.java:150)
08-22 12:23:41.879: E/AndroidRuntime(12603):    at android.app.ActivityThread.main(ActivityThread.java:4263)
08-22 12:23:41.879: E/AndroidRuntime(12603):    at java.lang.reflect.Method.invokeNative(Native Method)
08-22 12:23:41.879: E/AndroidRuntime(12603):    at java.lang.reflect.Method.invoke(Method.java:507)
08-22 12:23:41.879: E/AndroidRuntime(12603):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-22 12:23:41.879: E/AndroidRuntime(12603):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-22 12:23:41.879: E/AndroidRuntime(12603):    at dalvik.system.NativeStart.main(Native Method) 
```

您应该注意到顶部有一个例外：问题的原因，LogCat 可以为您提供的最重要的信息。此外，您似乎跳过了几行，因为我不知道该行`enlargeEditText();`如何编译但抛出异常......

**反正**

只需更改 LayoutParameters：

```
FrameLayout.LayoutParams rllp = (FrameLayout.LayoutParams) v.getLayoutParams();
rllp.setMargins(0, 0, 0, 0);
v.setLayoutParams(rllp); 
```

很高兴看到`v`LayoutInflater 中的定义方式，但我猜 FrameLayout.LayoutParameters 是您想要的类。

# regex - htaccess 301 重定向，不确定正确的正则表达式

> ID：12076594
> 
> 赞同：2
> 
> 时间：2012-08-22T15:32:58.063
> 
> 标签：regex, .htaccess

谁能帮助我，我正在尝试使用 htaccess 整理一些重定向，但我面临一个棘手的问题。

我无法弄清楚的部分是：我有一个系统，它为以下模式的某些页面创建 2 个 url：

产品/类别（我们主要使用的和我们想要的，无论类别深度如何） 产品/子类别/类别（可能对 SEO 更好，但不是我们想要的）

如何编写 301 重定向以去除 /subcategory 的 url 部分并重定向到我们在 80 个子类别区域内的较短版本，所以我不想一一尝试。我正在尝试掌握正则表达式，但我完全不喜欢它，我假设匹配子类别并不太难，因为它总是跟随 /product 并且总是以 / 结尾，但我如何将它重定向到缩短的版本。

我想不出要添加的更多信息，但是如果我没有提供足够的详细信息，请告诉我，我希望对此有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:36:07.710

在您的 htaccess 文件中尝试这些行：

```
RewriteEngine on
RewriteRule ^products/[^/]+/(.+)$ /products/$1 [L,QSA,R=301] 
```

# jquery - “加载中”图片不显示

> ID：12076596
> 
> 赞同：1
> 
> 时间：2012-08-22T15:33:02.293
> 
> 标签：jquery, css, ajax

我的页面上有一个带有以下css的div：

```
.modal {
    display:    none;
    position:   fixed;
    z-index:    1000;
    top:        0;
    left:       0;
    height:     100%;
    width:      100%;
    background: rgba( 255, 255, 255, .35 ) 
                url('/NoAuth/cf/ajax-loader.gif')
                50% 50% 
                no-repeat;
}

/* Anytime the body has the loading class, our
   modal element will be visible */
body.loading .modal {
    display: block;
} 
```

当使用以下方法进行 .ajax 调用时，我会在主体上添加或删除“加载”类：

```
jQuery(document).ready(function () {
    jQuery('body').on({
      ajaxStart: function() {
        jQuery(this).addClass('loading');
      },
      ajaxStop: function() {
        jQuery(this).removeClass('loading');
      }
    });
}); 
```

但很多时候，我发现在 ajax 调用期间，背景会改变颜色，但 gif 不会出现。但是，如果我转到 Firebug 控制台并键入`jQuery('body').addClass('loading')`，图像*就会*显示出来。当我查看 Firebug 中的“Net”选项卡时，它显示在我输入 .addClass 命令之前它没有加载 gif。

我需要做些什么来预加载该背景以便它一直显示，或者我可以做些什么来防止这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:46:07.673

也许是因为`display:none`CSS 属性。文件准备好后，为什么不让它不可见？加载将在加载文档期间出现。只需删除中的`display`属性`.modal`

和 javascript ：

```
jQuery(document).ready(function () {
    jQuery('body .modal').hide();
    jQuery('body').on({
      ajaxStart: function() {
        jQuery(this).addClass('loading');
      },
      ajaxStop: function() {
        jQuery(this).removeClass('loading');
      }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T16:17:24.657

如果在引用的样式表中没有任何与样式规则匹配的 HTML 元素，我的经验是不会加载与样式规则相关的任何资源。避免这种情况的一种方法是使用[数据 URI](https://developer.mozilla.org/en-US/docs/data_URIs)，因为这意味着资源已经*在样式表中*可用。当然，如果您必须支持某些较旧的浏览器（IE7），那么这对您不起作用。

# java - 高效存储和检索许多位置点以在地图叠加中显示

> ID：12076598
> 
> 赞同：2
> 
> 时间：2012-08-22T15:33:04.390
> 
> 标签：java, android, sqlite, indexing

## 目标

记录安卓手机当前位置的信号强度。然后将它们全部显示在地图上。

## 正在存储什么

android上的sqlite数据库中<longitude, latitude, value>形式的记录。我使用 ORMLite 作为抽象层来存储和检索数据。

在我正在制作的应用程序（记录）中，它会创造很多点。实际上每 500 毫秒我必须创建一个日志条目

## 到目前为止我所做的

我查询范围之间的经度和纬度的日志点。但这确实是低效的 O(n) （如果我错了，请纠正我）

在我正在制作（记录）的应用程序中，它将

## 我的问题

我应该使用什么索引方法。还是我必须采取另一种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T20:59:28.137

我做过类似的事情。我每 5 分钟获取一次用户位置，但是当我获取位置时，我会在 1 分钟内每 500 毫秒捕获一次位置（我这样做是为了尝试获取最准确的位置）。这些位置存储在内存列表中。一分钟后，我通过降低准确性对它们进行排序，取出列表中的第一个并丢弃其余的。然后我从我的 SQLLite 数据库中检索最后一个位置并比较这两个位置 - 如果新位置与前一个位置相同（在 50 米的容差范围内），我丢弃了新位置；如果没有，则将其提交到数据库。我这样做是为了确保我得到最准确的读数，并确保我没有数百个要映射的位置，所有位置都在另一个之上。

# visual-studio-2008 - 模拟器上的 ERROR_DEVICE_NOT_CONNECTED 错误

> ID：12076599
> 
> 赞同：0
> 
> 时间：2012-08-22T15:33:08.553
> 
> 标签：visual-studio-2008, compact-framework, device-emulation

Pocket PC 2003 SE Emulator 已连接并安装好。

部署成功，但调试启动后：操作无法完成。设备未连接。

我也试过：

设备安全管理器 -> Windows CE 设备 ![在此处输入图像描述](../Images/f1cf6da0f4836606c604516cffceaa8d.png)

我也尝试删除 CoreCon\1.0 - 没有变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:42:42.027

听起来调试器正在启动，所以我将假设这是正确的。

另一个假设：这是一个表单应用程序（不是库或其他）。

*   **打开Form1**的代码窗口并在构造函数上放置一个断点。
*   运行代码 (F5)。
*   到达断点时，单步执行每一行 (F10)。

当您到达代码中导致问题的行时，请查看该行以了解它在做什么。听起来您正试图在构造函数中建立某种连接。

**更新：**

使用找到的信息[>> HERE <<](http://us.generation-nt.com/cant-get-c-app-debugging-working-wince-6-0-help-81613482.html)，尝试以下操作：

> 检查您的 PC 上是否启用了任何防火墙，并且设备对象存储上是否有足够的可用空间。如果您的操作系统映像不包含 .NET 紧凑框架，您可能需要在映像中添加对 CAB 安装程序的支持，以允许 Visual Studio 部署它。
> 
> 还要检查设备上安装的 ConManClient2、CMAccept 和其他可执行文件是否与您 PC 上的 .NET CF 和 VS2005 服务包版本相同。您应该在以下位置找到它们：
> 
> C:\Program Files\Common Files\Microsoft Shared\CoreCon\1.0\Target\wce400\ARMV4I
> 
> 尝试将这些文件从您的 PC 复制到设备的 \Windows 子目录，然后手动运行 ConnManClient2 和 CMAccept 并检查它是否有效。

# objective-c - Google Plus iOS SDK：如何登录用户电子邮件？

> ID：12076601
> 
> 赞同：3
> 
> 时间：2012-08-22T15:33:13.350
> 
> 标签：objective-c, ios, google-plus

目前正在使用具有范围的 GooglePlusSample：

```
@"https://www.googleapis.com/auth/plus.me", 
@"https://www.googleapis.com/auth/userinfo.email" and 
@"https://www.googleapis.com/auth/userinfo.profile". 
```

尝试`auth.userEmail`在回调方法中调用 auth.userData `finishedWithAuth:error:`，但两者都是空的......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-03-12T13:16:17.417

```
-(void)finishedWithAuth:(GTMOAuth2Authentication *)auth error:(NSError *)error{

    NSLog(@"Received Error %@  and auth object==%@",error,auth);

    if (error) {
        // Do some error handling here.
    } else {
    [self refreshInterfaceBasedOnSignIn];

    NSLog(@"email %@ ",[NSString stringWithFormat:@"Email: %@",[GPPSignIn sharedInstance].authentication.userEmail]);
    NSLog(@"Received error %@ and auth object %@",error, auth);

    // 1\. Create a |GTLServicePlus| instance to send a request to Google+.
    GTLServicePlus* plusService = [[GTLServicePlus alloc] init] ;
    plusService.retryEnabled = YES;

    // 2\. Set a valid |GTMOAuth2Authentication| object as the authorizer.
    [plusService setAuthorizer:[GPPSignIn sharedInstance].authentication];

    GTLQueryPlus *query = [GTLQueryPlus queryForPeopleGetWithUserId:@"me"];

    // *4\. Use the "v1" version of the Google+ API.*
    plusService.apiVersion = @"v1";

    [plusService executeQuery:query
            completionHandler:^(GTLServiceTicket *ticket,
                                GTLPlusPerson *person,
                                NSError *error) {
                if (error) {

                    //Handle Error

                } else
                {

                    NSLog(@"Email= %@",[GPPSignIn sharedInstance].authentication.userEmail);
                    NSLog(@"GoogleID=%@",person.identifier);
                    NSLog(@"User Name=%@",[person.name.givenName stringByAppendingFormat:@" %@",person.name.familyName]);
                    NSLog(@"Gender=%@",person.gender);

                }
            }];
    }

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-20T11:46:32.803

用户通过身份验证后，您可以调用`[[GPPSignIn sharedInstance] userEmail]`以获取经过身份验证的用户的电子邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T05:23:55.980

如果您在 google api 控制台中未配置 Access 错误检查服务。确保启用 google plus api 服务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T21:02:34.913

这对我有用：

首先使用 userinfo.email 范围：

```
signInButton.scope = [NSArray arrayWithObjects:
                      kGTLAuthScopePlusMe,
                      kGTLAuthScopePlusUserinfoEmail,
                      nil]; 
```

然后定义这些方法：

```
- (GTLServicePlus *)plusService {  
  static GTLServicePlus* service = nil;  
  if (!service) {
    service = [[GTLServicePlus alloc] init];
    // Have the service object set tickets to retry temporary error conditions
    // automatically
    service.retryEnabled = YES;
    // Have the service object set tickets to automatically fetch additional
    // pages of feeds when the feed's maxResult value is less than the number
    // of items in the feed
    service.shouldFetchNextPages = YES;
  }
  return service;
}

- (void)fetchUserProfile {
  // Make a batch for fetching both the user's profile and the activity feed
  GTLQueryPlus *profileQuery = [GTLQueryPlus queryForPeopleGetWithUserId:@"me"];
  profileQuery.fields = @"id,emails,image,name,displayName";
  profileQuery.completionBlock = ^(GTLServiceTicket *ticket, id object, NSError *error) {
    if (error == nil) {
      // Get the user profile
      GTLPlusPerson *userProfile = object;
      // Get what we want
      NSArray * userEmails = userProfile.emails;
      NSString * email = ((GTLPlusPersonEmailsItem *)[userEmails objectAtIndex:0]).value;
      NSString * name = userProfile.displayName;
      NSString * profileId = userProfile.identifier;
    } else {
      // Log the error
      NSLog(@"Error : %@", [error localizedDescription]);
    }
  };

  GTLBatchQuery *batchQuery = [GTLBatchQuery batchQuery];
  [batchQuery addQuery:profileQuery];
  GTLServicePlus *service = self.plusService;
  self.profileTicket = [service executeQuery:batchQuery
                           completionHandler:^(GTLServiceTicket *ticket,
                                               id result, NSError *error) {
                             self.profileTicket = nil;
                             // Update profile
                           }];
} 
```

最后在“finishedWithAuth”中调用“fetchUserProfile”方法：

```
- (void)finishedWithAuth: (GTMOAuth2Authentication *)auth
                   error: (NSError *) error
{
  // An error?
  if (error != nil) {
    // Log
  } else {
    // Set auth into the app delegate
    myAppDelegate *appDelegate = (myAppDelegate *)[[UIApplication sharedApplication] delegate];
    appDelegate.auth = auth;  
    // Get user profile
    self.plusService.authorizer = auth;
    [self fetchUserProfile];
  }
} 
```

请注意，这可能并不完美，因为它是“正在进行的工作”，特别是关于：当用户拥有多个电子邮件地址时获取正确的电子邮件地址，但这只是一个开始！

祝你好运。史蒂夫

# sql - jdbc语句连接

> ID：12076608
> 
> 赞同：0
> 
> 时间：2012-08-22T15:34:00.497
> 
> 标签：sql, jdbc, connection

问题：您可以使用多个语句和记录集，它们同时运行，在非多线程中使用相同的连接吗？

我只发现了我感兴趣的这个问题，但答案并不一致。

[每个连接的 JDBC 语句/PreparedStatement](https://stackoverflow.com/questions/5149135/jdbc-statement-preparedstatement-per-connection)

答案解释了我知道的记录集和语句之间的关系。

鉴于此，您不能有多个记录集用于声明

答案说您可以有多个记录集进行连接。但他们没有提到任何其他来源。

* * *

**我在问是否可以循环第一个记录集，然后使用相同的连接（用于生成第一个记录集）打开另一个记录集，使用它在迭代中循环。定义这种行为的文档在哪里？**

* * *

我感兴趣的情况是这样的，语句中同时执行任务

```
Connection con = Factory.getDBConn (user, pss, endpoint, etc);
Statement stmt = con.createStatement ();
ResultSet rs = stmt.executeQuery ("SELECT TEXT FROM dba");

while (rs.next ()) {
 rs.getInt (....
 rs.getInt (....
 rs.getInt (....
 rs.getInt (....

 Statement stmt2 con.createStatement = ();
 ResultSet rs2 = stmt2.executeQuery ("iSelect ......");
 while (rs2.next ()) {
 ....
 rs2.close ();
 stm2.close ();

 Statement stmt3 con.createStatement = ();
 ResultSet rs3 = stmt3.executeQuery ("Insert Into table xxx ......");
 ....
 rs3.close ();
 stm3.close ();
} 
```

* * *

再澄清一点：在 stmt3 中执行更新，您可能会收到如下错误：

java.sql.SQLException：当前连接上有一个打开的结果集，必须在执行查询之前关闭。

所以你不能在同一个连接中混合 SQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:45:52.587

如果我理解正确，您需要在一个方法中同时处理两个（或更多）结果集。

这是可能的，而且效果很好。但是你必须记住一些事情：

*   您在每个记录集上所做的一切都由单个 处理`Connection`，除非您为每个`Statement`（和`ResultSet`）声明新连接
*   如果你需要做一个多线程的进程，我建议你`Connection`为每个线程创建一个（或者使用一个连接池）；如果您在多线程进程中使用单个连接，您的程序将挂起或崩溃，因为每个 SQL 语句都通过单个连接，并且每个新语句都必须等到前一个语句完成。

除此之外，您的问题需要澄清一下。你真正需要做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:10:29.337

当生成它的 Statement 对象关闭、重新执行或用于从多个结果序列中检索下一个结果时，ResultSet 对象将自动关闭。

[http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-22T15:42:43.397

SQL Server 是一个支持多个记录集的数据库。因此，您可以在单个存储过程中执行几个查询，例如

```
SELECT * FROM employees
SELECT * FROM products
SELECT * FROM depts 
```

然后，您可以在每个记录集之间移动。至少我知道你可以在.Net中做到这一点，例如

```
using (var conn = new SqlConnection("connstring"))
using (var command = new SqlCommand("SPName", conn))
{
    conn.Open();
    command.CommandType = CommandType.StoredProcedure;
    var (reader = command.ExecuteReader())
    {
       while(reader.Read())
       {
           //Process all records from first result set
       }
       reader.Next();
       while(reader.Read())
       {
           //Process all records from 2nd result set
       }
       reader.Next();
       while(reader.Read())
       {
              //Process all records from 3rd result set
        }
     }
} 
```

我假设java会支持类似的机制

# javascript - 如何检查 {x} 中的“device.calendar.ongoing”中的内容？

> ID：12076609
> 
> 赞同：1
> 
> 时间：2012-08-22T15:34:05.013
> 
> 标签：javascript, android, onx

我想记录数据，`device.calendar.ongoing`以便调试脚本的问题。我努力了

```
if (device.calendar.ongoing.length > 0) {
    console.log("All items: " + JSON.stringify(device.calendar.ongoing));
} 
```

但那又回来了

> 所有项目： [{}]

当我这样做的时候

```
if (device.calendar.ongoing.length > 0) {
    console.log("All items: " + device.calendar.ongoing);
} 
```

但这又回来了

> 所有项目：0

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:53:08.680

由于未知原因 stringify 并不总是与 on{x} 一起使用。我用

```
var events = device.calendar.ongoing;
for(var i=0;i<events.length;i++) {
    console.log(events[i].title+": "+events[i].description);
} 
```

这适用于我的情况。

# objective-c - 构建自定义 UITableViewCell 的正确方法

> ID：12076610
> 
> 赞同：0
> 
> 时间：2012-08-22T15:34:07.667
> 
> 标签：objective-c, ios, uitableview, subclass

我一直想知道`UITableView`'s 和他们的细胞有一段时间了。`UITableView`是一个非常方便的 UIView 子类，但是`UITableViewCell`. 我想知道创建自定义`UIView`（最终将成为 a `UITableViewCell`）的最佳方法是什么`UITableView`？

单元格具有必须设置的特定样式，并且`UILabel`除了其内容之外，还有完全不可变的预定 s 和辅助视图。我发现这是一种很大的浪费，但是仅仅为单元格提供自定义内容视图（如果愿意，还可以提供背景视图）并不能阻止或删除这些进程或恢复内存。

有什么方法可以创建一个轻量级的`UITableViewCell`子类吗？或者有没有办法将 UIView 与选择方法一起使用（除了本质上`UITableView`使用创建自定义`UIScrollView`）？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T18:10:37.877

对此似乎没有答案。UITableViewCells 将始终自动添加 UILabel 和其他视图。不过，我不确定它们是否在您设置它们之前被分配。他们可能有自定义设置/分配方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:49:58.377

有几种方法：

来自 XIB 文件：

*   [ios 使用 xib 文件创建自定义 UITableViewCell 的步骤](https://stackoverflow.com/questions/4917027/ios-steps-to-create-custom-uitableviewcell-with-xib-file)
*   [http://www.icodeblog.com/2009/05/24/custom-uitableviewcell-using-interface-builder/](http://www.icodeblog.com/2009/05/24/custom-uitableviewcell-using-interface-builder/)

使用绘图：

*   [http://cocoawithlove.com/2009/04/easy-custom-uitableview-drawing.html](http://cocoawithlove.com/2009/04/easy-custom-uitableview-drawing.html)
*   [http://developer.apple.com/library/ios/#samplecode/TableViewSuite/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007318](http://developer.apple.com/library/ios/#samplecode/TableViewSuite/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007318)（第4个和第5个例子）

# java - 使用 Stripes，我可以将 ActionBean 的输出分辨率包含到 jsp 中吗？

> ID：12076617
> 
> 赞同：0
> 
> 时间：2012-08-22T15:34:28.907
> 
> 标签：java, jsp, jstl, stripes

我发现了一种情况，我想通过导入共享 ActionBean 的输出在许多页面上包含相同的内容。

我想做的是有一个 ActionBean，它接受一些参数并进行一些处理，然后将 ForwardResolution 返回给 JSP，JSP 使用标准 Stripes 构造（如`${actionBean.myValue`.

然后我想从其他 JSP 中“调用”这个 ActionBean。这会产生将第一个 ActionBean 的输出 HTML 放入第二个 JSP 的输出的效果。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T18:55:10.180

您可以使用`<jsp:include>`标签获得所需的结果。

**SharedContentBean.java**

```
@UrlBinding("/sharedContent")
public class SharedContentBean implements ActionBean {

    String contentParam;

    @DefaultHandler
    public Resolution view() {
        return new ForwardResolution("/sharedContent.jsp");
    }
} 
```

**在您的 JSP 中**

```
<!-- Import Registration Form here -->
<jsp:include page="/sharedContent">
    <jsp:param value="myValue" name="contentParam"/>
</jsp:include> 
```

**web.xml**

确保在 web.xml 中添加`INCLUDE`到您的`<filter-mapping>`标签：

```
<filter-mapping>
    <filter-name>StripesFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <servlet-name>StripesDispatcher</servlet-name>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>INCLUDE</dispatcher>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>ERROR</dispatcher>
</filter-mapping> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T16:47:57.187

让您希望包含相同内容的每个 ActionBean 扩展相同的 BaseAction 并将 getter/setter 放入其中。例如：

**BaseAction.class**

```
package com.foo.bar;

public class BaseAction implements ActionBean {

  private ActionBeanContext context;

  public ActionBeanContext getContext() { return context; }
  public void setContext(ActionBeanContext context) { this.context = context; }

  public String getSharedString() {
    return "Hello World!";
  }

} 
```

**索引.jsp**

```
<html>
  <jsp:useBean id="blah" scope="page" class="com.foo.bar.BaseAction"/>
  <body>
    ${blah.sharedString}
  </body>
</html> 
```

# dart - 在 dart 中显示音频或视频控制器

> ID：12076622
> 
> 赞同：2
> 
> 时间：2012-08-22T15:34:51.887
> 
> 标签：dart

我想创建一个音频或视频控制器，但我当前的代码只播放内容，在我的浏览器中没有显示任何内容来控制它

```
#import ('dart:html');
void main () {
  AudioElement audio = new AudioElement();
  audio.src="http://slides.html5rocks.com/src/rushus-modal_blues.mp3";
  audio.autoplay=true;
  window.document.body.nodes.add(audio);
} 
```

那么如何让 Dart 显示音频/视频控制器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T20:26:59.873

默认情况下禁用音频/视频控件。您需要启用它们

> 音频控制=真；

应该做的伎俩。

或者，您也可以从头开始构建音频源和控件设置，以下示例显示了这一点，并已使用 dart2js 成功测试

```
var audioSource = new SourceElement();
audioSource.src = "http://slides.html5rocks.com/src/rushus-modal_blues.mp3";
audioSource.type = "audio/mp3";

var audio = new AudioElement();
audio.attributes["controls"] = "controls";
audio.nodes.add(audioSource);
window.document.body.nodes.add(audio); 
```

[这里](http://www.w3schools.com/html5/tag_audio.asp)有更多关于控制音频和视频[的信息](http://www.w3schools.com/html5/tag_video.asp)

# vba - VBA 数据透视表向导对象

> ID：12076623
> 
> 赞同：0
> 
> 时间：2012-08-22T15:34:59.013
> 
> 标签：vba, excel

我根据 Microsoft 教程页面上的示例 VBA 代码创建了一个子例程：[LINK](http://msdn.microsoft.com/en-us/library/office/hh243933.aspx)

```
Sub WIP20Pivot()
'
' Pivot Macro

'Creates a PivotTable report from the table on Sheet1
'by using the PivotTableWizard method with the PivotFields
'method to specify the fields in the PivotTable.
 Dim objTable As PivotTable, objField As PivotField

' Select the sheet and first cell of the table that contains the data.
 ActiveWorkbook.Sheets("DATA").Select
 Range("A1").Select

' Create the PivotTable object based on the Employee data on Sheet1.
 Set objTable = Sheet1.PivotTableWizard 'ERROR OCCURS HERE
 ActiveSheet.Name = "PivotSheet" 

'There is more VBA code below to select fields for the pivot table, etc..

End Sub 
```

当我运行此代码时，我收到以下错误：

> 运行时错误“424”：“需要对象”。

奇怪的是，该子程序在微软教程页面上的可下载示例宏中运行良好。

提前感谢您的帮助！

谢谢， AME

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-28T13:43:14.097

设置 objTable = Sheet1.PivotTableWizard '错误发生在这里

您已指定 Shee1，但实际工作表名称会有所不同。您将删除一些工作表，并且可能将工作表命名为 sheet1。请在 vba 编辑器的项目窗口中检查您的实际工作表名称将显示为“Sheet9(Sheet1)”。在这种情况下，您需要提及

“设置 objTable = Sheet9.PivotTableWizard”

就这样解决了！！！:)

（注意你的代码应该在模块中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T06:33:46.413

你`Sub WIP20Pivot() => subroutine`必须在一个模块中，

不能嵌入到工作表中。

它也发生在我身上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-11T20:45:30.717

我想这有助于命名数据​​透视表？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-23T17:13:25.533

我也有同样的问题。经过一番研究，我找到了这个解决方案。希望它也能帮助到你。

```
 Set objTable = Worksheets("PivotTable").PivotTableWizard(SourceType:=xlDatabase, SourceData:=Range("PivotData!A1:C3918"), tabledestination:=Range("PivotTable!A1")) 
```

# java - 如何在 libGDX 中显示 Android Toast 消息（运行其他 Activity）？

> ID：12076627
> 
> 赞同：0
> 
> 时间：2012-08-22T15:35:08.257
> 
> 标签：java, android, libgdx

我阅读[了本](http://moldedbits.com/blog/2012/02/26/integrating-scoreloop-with-libgdx/)教程并使用其中的代码在我的游戏中实现 ScoreLoop 服务。并且提交分数工作正常，但显示其他 android 活动或简单的 Toast 消息是由于 NullPointer 错误而崩溃。

排队崩溃：

```
Intent intent = new Intent(mContext, EntryScreenActivity.class); 
```

并在：

```
Toast.makeText(mContext, "Refreshing scores", Toast.LENGTH_SHORT).show(); 
```

在调试模式下，我看到 mContext 不为空

错误在哪里以及如何解决？

日志猫：

```
08-22 17:54:27.329: E/AndroidRuntime(15468): java.lang.NullPointerException 08-22 17:54:27.329: E/AndroidRuntime(15468): at android.content.ContextWrapper.getResources(ContextWrapper.java:81) 08-22 17:54:27.329: E/AndroidRuntime(15468): at android.widget.Toast.<init>(Toast.java:92) 08-22 17:54:27.329: E/AndroidRuntime(15468): at android.widget.Toast.makeText(Toast.java:233) 08-22 17:54:27.329: E/AndroidRuntime(15468): at com.masterofcode.android.slingshot.ActionResolverAndroid$3.run(ActionResolverAndroid.java:46) 08-22 17:54:27.329: E/AndroidRuntime(15468): at android.os.Handler.handleCallback(Handler.java:605) 08-22 17:54:27.329: E/AndroidRuntime(15468): at android.os.Handler.dispatchMessage(Handler.java:92) 08-22 17:54:27.329: E/AndroidRuntime(15468): at android.os.Looper.loop(Looper.java:137) 08-22 17:54:27.329: E/AndroidRuntime(15468): at android.app.ActivityThread.main(ActivityThread.java:4424) 08-22 17:54:27.329: E/AndroidRuntime(15468): at java.lang.reflect.Method.invokeNative(Native Method) 08-22 17:54:27.329: E/AndroidRuntime(15468): at java.lang.reflect.Method.invoke(Method.java:511) 08-22 17:54:27.329: E/AndroidRuntime(15468): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 08-22 17:54:27.329: E/AndroidRuntime(15468): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 08-22 17:54:27.329: E/AndroidRuntime(15468): at dalvik.system.NativeStart.main(Native Method)

========================================================================

public class ActionResolverAndroid implements ActionResolver {
  Handler uiThread;
  BumbleAndroid mContext; //Your class here which extends AndroidApplication
  ScoreloopHandler handler;

  public ActionResolverAndroid(BumbleAndroid mContext) {
      uiThread = new Handler(); //This binds the handler to the "main" thread, see documentation of handler
      this.mContext = mContext;
      handler = new ScoreloopHandler(mContext);
  }
} 
```

这样我得到了 mContext

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:23:41.520

这个问题：[Null at android.content.ContextWrapper.getResources(ContextWrapper.java:80)](https://stackoverflow.com/questions/7997962/null-at-android-content-contextwrapper-getresourcescontextwrapper-java80)意味着 getResources 在错误的上下文中调用时将返回 null（看来您需要当前 Activity 的上下文来制作 Toast）。

这是另一个具有类似含义的：[Difference between Activity Context and Application Context](https://stackoverflow.com/questions/4128589/difference-between-activity-context-and-application-context)

很高兴找到一些关于此的更具体的文档，但我还没有找到它......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:47:28.743

问题出在错误的 mContext 中。

正确的代码是：

```
public class MyGameAndroidActivity extends AndroidApplication implements
        ActionResolver {
public void showScoreloop() {
        Intent intent = new Intent(this, EntryScreenActivity.class);
        this.startActivity(intent);
    }
} 
```

# sql - 如何在存储过程中使用删除级联？

> ID：12076632
> 
> 赞同：0
> 
> 时间：2012-08-22T15:35:27.947
> 
> 标签：sql, tsql, sql-server-2008-express

我只需要一些帮助来在我的存储过程中实现删除级联，因为我有`REFERENCE`约束错误

```
Create PROCEDURE [dbo].[DeleteProject]
    @ProjectID uniqueidentifier
AS
BEGIN
    -- Insert statements for procedure here
    DELETE FROM [TaskManagementSystem_DB].[dbo].[Projects]
    WHERE projectID = @ProjectID
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:42:18.230

您没有在 proc 中实现删除级联。

您可以在外键约束本身上实现删除大小写：

```
ALTER TABLE [ChildTable] WITH CHECK ADD CONSTRAINT [FK_ChildTable_Projects] FOREIGN KEY ([ProjectID})
REFERENCES [Project] ([ProjectID])
ON DELETE CASCADE 
```

或者您需要在删除主记录之前显式删除子记录。

```
Create PROCEDURE [dbo].[DeleteProject]
@ProjectID uniqueidentifier
AS
BEGIN

DELETE child
FROM [TaskManagementSystem_DB].[dbo].[Projects] proj
    JOIN [TaskManagementSystem_DB].[dbo].[ChildTable] child
        ON proj.ProjectID = child.ProjectID

DELETE FROM [TaskManagementSystem_DB].[dbo].[Projects]
    WHERE projectID = @ProjectID

END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:42:25.583

在这里，您可以找到一个实现，该实现删除指定的表中符合所选条件的所有行，同时还删除任何子/孙记录等。
它首先读取 sysforeignkeys 表以查找任何子表，然后使用对该过程的递归调用从中删除即将成为孤立记录的记录。一旦所有子记录都消失了，就会从选定的表中删除行：[Awesome SQL Delete Cascade Stored Procedure！](http://codepaste.net/5e7cjr)

这是代码，以防您在链接后遇到问题：

```
CREATE Procedure spDeleteRows
/* 
Recursive row delete procedure. 

It deletes all rows in the table specified that conform to the criteria selected, 
while also deleting any child/grandchild records and so on.  This is designed to do the 
same sort of thing as Access's cascade delete function. It first reads the sysforeignkeys 
table to find any child tables, then deletes the soon-to-be orphan records from them using 
recursive calls to this procedure. Once all child records are gone, the rows are deleted 
from the selected table.   It is designed at this time to be run at the command line. It could 
also be used in code, but the printed output will not be available.
*/
 (
 @cTableName varchar(50), /* name of the table where rows are to be deleted */
 @cCriteria nvarchar(1000), /* criteria used to delete the rows required */
 @iRowsAffected int OUTPUT /* number of records affected by the delete */
 )
As
set nocount on
declare  @cTab varchar(255), /* name of the child table */
 @cCol varchar(255), /* name of the linking field on the child table */
 @cRefTab varchar(255), /* name of the parent table */
 @cRefCol varchar(255), /* name of the linking field in the parent table */
 @cFKName varchar(255), /* name of the foreign key */
 @cSQL nvarchar(1000), /* query string passed to the sp_ExecuteSQL procedure */
 @cChildCriteria nvarchar(1000), /* criteria to be used to delete 
                                           records from the child table */
 @iChildRows int /* number of rows deleted from the child table */

/* declare the cursor containing the foreign key constraint information */
DECLARE cFKey CURSOR LOCAL FOR 
SELECT SO1.name AS Tab, 
       SC1.name AS Col, 
       SO2.name AS RefTab, 
       SC2.name AS RefCol, 
       FO.name AS FKName
FROM dbo.sysforeignkeys FK  
INNER JOIN dbo.syscolumns SC1 ON FK.fkeyid = SC1.id 
                              AND FK.fkey = SC1.colid 
INNER JOIN dbo.syscolumns SC2 ON FK.rkeyid = SC2.id 
                              AND FK.rkey = SC2.colid 
INNER JOIN dbo.sysobjects SO1 ON FK.fkeyid = SO1.id 
INNER JOIN dbo.sysobjects SO2 ON FK.rkeyid = SO2.id 
INNER JOIN dbo.sysobjects FO ON FK.constid = FO.id
WHERE SO2.Name = @cTableName

OPEN cFKey
FETCH NEXT FROM cFKey INTO @cTab, @cCol, @cRefTab, @cRefCol, @cFKName
WHILE @@FETCH_STATUS = 0
     BEGIN
 /* build the criteria to delete rows from the child table. As it uses the 
           criteria passed to this procedure, it gets progressively larger with 
           recursive calls */
 SET @cChildCriteria = @cCol + ' in (SELECT [' + @cRefCol + '] FROM [' + 
                              @cRefTab +'] WHERE ' + @cCriteria + ')'
 print 'Deleting records from table ' + @cTab
 /* call this procedure to delete the child rows */
 EXEC spDeleteRows @cTab, @cChildCriteria, @iChildRows OUTPUT
 FETCH NEXT FROM cFKey INTO @cTab, @cCol, @cRefTab, @cRefCol, @cFKName
     END
Close cFKey
DeAllocate cFKey
/* finally delete the rows from this table and display the rows affected  */
SET @cSQL = 'DELETE FROM [' + @cTableName + '] WHERE ' + @cCriteria
print @cSQL
EXEC sp_ExecuteSQL @cSQL
print 'Deleted ' + CONVERT(varchar, @@ROWCOUNT) + ' records from table ' + @cTableName 
```

# php - 调用未定义的函数 curl_init() - 使用 WAMP

> ID：12076641
> 
> 赞同：30
> 
> 时间：2012-08-22T15:35:49.513
> 
> 标签：php, wamp

我试图让 cUrl 工作，但我很难过。

我`extension=php_curl.dll`在`php.ini`文件中取消注释并检查它是否`php_curl.dll`存在于`extension_dir`指向的目录中。我还检查`php.ini`了 Apache 目录中的是否正确。

我已将`libcurl.dll`'s 复制到 Windows/System32、Windows/SysWOW64 和`wamp\bin\php\php5.4.3`

而且我每次都重新启动服务。

我仍然得到`Fatal error: Call to undefined function curl_init()`. 当我运行`phpInfo()`. 但是当我查看 WAMP 菜单 PHP->PHP extensions 时`php_curl`确实有一个复选标记。

有什么提示吗？

编辑：

@Daniel_M：加载的 ini 是 Apache 目录中的那个，并且`extension=php_curl.dll`已取消注释，并且`extension_dir`确实指向(and )`php/php5.4.3/ext`所在的目录。`php_curl.dll``libcurl.dll`

@ficuscr：我已经复制了`libcurl.dll v.7.27.0`所有的地方。我应该把它放在哪里？

一般来说： 当在`php_curl`中未选中时`PHP > PHP Extensions menu`，致命错误之前是： `SCREAM: Error suppression ignored for`。检查时不会发生这种情况`php_curl`。在任何一种情况下，致命错误消息都是相同的。线索？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-09-08T14:49:27.353

WAMP 2.2 带有错误的 cURL 扩展。您应该从以下链接下载固定文件：
[http](http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/) ://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/ 。然后将文件**php_curl.dll**替换为**/php5.4.3/ext/**。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-22T15:38:16.563

单击 WAMP 图标 > PHP > PHP 扩展 > 检查 php_curl。

如果已选中，请取消选中，再次选中，然后重新启动所有服务。应该管用。

如果它仍然无法正常工作，请重新安装 WAMP。很简单。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-07-08T15:22:47.697

对我来说，这成功了：[http ://www.phpmind.com/blog/2011/02/how-to-enable-curl-in-wamp/](http://www.phpmind.com/blog/2011/02/how-to-enable-curl-in-wamp/)

1）关闭 WAMP（如果正在运行）

2) 导航到 WAMP\bin\php（您的 php 版本）\

3) 编辑 php.ini

4）搜索curl，取消注释extension=php_curl.dll

5) 导航到 WAMP\bin\Apache（你的 apache 版本）\bin\

6) 编辑 php.ini

7）搜索curl，取消注释extension=php_curl.dll

8 ) 保存两者

9) 重启 WAMP

# sql - 在 sql 中使用 IN 和转换

> ID：12076646
> 
> 赞同：0
> 
> 时间：2012-08-22T15:36:01.747
> 
> 标签：sql, sql-server, sql-server-2008

我想使用该`IN`子句，但要使用该`convert`功能。基本上，我有一个表 ( `A`) 类型的列`int`。但在另一个表 ( `B`) 中，我有类型的值`varchar`。本质上，我正在寻找这样的东西

```
select *
from B
where myB_Column IN (select myA_Columng from A) 
```

但是，我不确定`int`from table是否会为in`A`正确映射/转换/评估。`varchar``B`

我正在使用 SQL Server 2008。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:52:50.367

您可以在这样的 where 子句中使用 CASE 语句，并且只有在其整数时才可以使用 CAST。else 0 或 NULL 取决于您的要求。

```
SELECT * 
FROM   B 
WHERE  CASE ISNUMERIC(myB_Column) WHEN 1 THEN CAST(myB_Column AS INT) ELSE 0 END
 IN (SELECT myA_Columng FROM A) 
```

对于 Decimal 值，ISNUMERIC 将为 1（真），因此理想情况下，您应该实现自己的**IsInteger** UDF。要做到这一点，请查看这个问题

[T-sql - 确定值是否为整数](https://stackoverflow.com/questions/10517777/t-sql-determine-if-value-is-integer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T17:32:23.603

你也可以使用`exists`caluse，

```
select *
from B
where EXISTS (select 1 from A WHERE CAST(myA_Column AS VARCHAR) = myB_Column) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T05:19:03.400

您可以使用以下查询：

```
select B.*
from  B
inner join (Select distinct MyA_Columng from A) AS X ON B.MyB_Column = CAST(x.MyA_Columng as NVARCHAR(50)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T16:55:50.547

## 选项1

```
Select * from B where myB_Column IN 
(
      Select Cast(myA_Columng As Int) from A Where ISNUMERIC(myA_Columng) = 1
) 
```

## 选项 #2

```
Select B.* from B 
Inner Join
(
    Select Cast(myA_Columng As Int) As myA_Columng from A 
    Where ISNUMERIC(myA_Columng) = 1
) T
On T.myA_Columng = B.myB_Column 
```

## 选项#3

```
Select B.* from B 
Left Join
(
    Select Cast(myA_Columng As Int) As myA_Columng from A 
    Where ISNUMERIC(myA_Columng) = 1
) T
On T.myA_Columng = B.myB_Column 
```

**我会选择第三个。原因如下。**

## IN谓词的缺点

假设我有两个列表对象。

```
List 1      List 2
  1           12
  2            7
  3            8
  4           98
  5            9
  6           10
  7            6 
```

**使用 Contains，它将搜索 List-2 中的每个 List-1 项目，这意味着迭代将发生 49 次！！！**

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-22T15:37:52.180

尝试使用`CAST()`

```
SELECT * 
FROM   B 
WHERE  CAST(myB_Column AS INT(11)) IN (
                                       SELECT myA_Columng
                                       FROM A
                                      ) 
```

# c++ - 有没有办法在 GTK3 应用程序中拥有 OpenGL 上下文？

> ID：12076648
> 
> 赞同：24
> 
> 时间：2012-08-22T15:36:04.740
> 
> 标签：c++, c, linux, opengl, gtk3

我看了一下 GtkGlExt，但它只适用于 GTK2。不幸的是，经过几个小时的搜索，似乎没有人关心拥有像 OpenGLDrawingArea 这样的东西......</p>

任何信息都将受到欢迎。即使它就像“现在不可能”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T16:07:47.210

看起来你在这里有几个选择。

1.  使用[gtklext 的开发中端口到 gtk3](https://github.com/tdz/gtkglext)
2.  `SDL_WINDOWID`通过设置环境变量，使用 SDL 绘制到您的 GTK 应用程序中
3.  自行管理 GLX 以为您的 GTK 应用程序创建 OpenGL 上下文。

我找到了一个应用程序[spectrum3d](http://spectrum3d.sourceforge.net/)，它实现了前两种选择。

第三种选择将非常复杂，可能不值得追求。

# ruby-on-rails-3 - Rails 3 使用 SASS/Compass 和 PIE.htc

> ID：12076651
> 
> 赞同：0
> 
> 时间：2012-08-22T15:36:16.167
> 
> 标签：ruby-on-rails-3, sass, compass-sass, css3pie

这是我的`scss`代码：

```
@import "compass";
@import "compass/css3/pie";
@import "compass/css3";
@import "compass/utilities";
@import "compass/utilities/general/hacks";

$pie-behavior: url("./PIE.htc");

.align-center {
    text-align: center;
    margin-bottom: 0 !important;
}

.btn {
    @include pie;
    @include border-radius(25px);
    text-align: center;
    @include box-shadow(rgba(black, .39) 0 2px 3px);
    font-size: 10px;
    @include text-shadow(rgba(black, .5) 0 1px 0);
    @include filter-gradient(#e6478b, #bf3b74);
    background: #bf3b74;
    @include background-image(linear-gradient(#e6478b, #bf3b74));
    vertical-align: middle;
    text-transform: uppercase;
    color: white;
    border: none;
    cursor: pointer;
    display: block;
    font-weight: bold;
    margin: 0 auto;
    letter-spacing: 1px;
    padding: 7px 20px;
    line-height: 18px;
    position: relative;

    &.grey {
        @include filter-gradient(#cfcfcf, #888888);
        background: #cfcfcf;
        @include background-image(linear-gradient(#cfcfcf, #888888));
    }
} 
```

由于某种原因，圆角在 IE 中没有被拾取。角落是方形的。我查看了大量的 Google 示例，我拥有它的方式就是其他人拥有它的方式。为什么这不起作用？

呈现的 CSS：

```
.btn {
  behavior: url("/stylesheets/PIE.htc");
  position: relative;
  -webkit-border-radius: 25px;
  -moz-border-radius: 25px;
  -ms-border-radius: 25px;
  -o-border-radius: 25px;
  border-radius: 25px;
  text-align: center;
  -webkit-box-shadow: rgba(0, 0, 0, 0.39) 0 2px 3px;
  -moz-box-shadow: rgba(0, 0, 0, 0.39) 0 2px 3px;
  box-shadow: rgba(0, 0, 0, 0.39) 0 2px 3px;
  font-size: 10px;
  text-shadow: rgba(0, 0, 0, 0.5) 0 1px 0;
  *zoom: 1;
  filter: progid:DXImageTransform.Microsoft.gradient(gradientType=0, startColorstr='#FFE6478B', endColorstr='#FFBF3B74');
  background: #bf3b74;
  background-image: -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #e6478b), color-stop(100%, #bf3b74));
  background-image: -webkit-linear-gradient(#e6478b, #bf3b74);
  background-image: -moz-linear-gradient(#e6478b, #bf3b74);
  background-image: -o-linear-gradient(#e6478b, #bf3b74);
  background-image: -ms-linear-gradient(#e6478b, #bf3b74);
  background-image: linear-gradient(#e6478b, #bf3b74);
  vertical-align: middle;
  text-transform: uppercase;
  color: white;
  border: none;
  cursor: pointer;
  display: block;
  font-weight: bold;
  margin: 0 auto;
  letter-spacing: 1px;
  padding: 7px 20px;
  line-height: 18px;
  position: relative;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T03:26:51.030

查看[http://compass-style.org/reference/compass/css3/pie/](http://compass-style.org/reference/compass/css3/pie/)

> 这将安装一个示例样式表和一个 PIE.htc 行为文件，必须将其加载到您的 IE 页面中。此文件必须使用以下 mime 类型交付：
> 
> 内容类型：文本/x 组件

# java - 使用 EL 将 Java 集分配给 Javascript 数组

> ID：12076654
> 
> 赞同：1
> 
> 时间：2012-08-22T15:36:20.077
> 
> 标签：java, javascript, jsp, el

因此，我尝试使用 Spring 和 JSP EL 将 Set 传递到 .jsp 页面，然后将集合的成员分配给 Javascript 数组，以便稍后在客户端脚本中使用。

例如，如果我有 Java Set exampleSet: { "A", "B", "C"}

我将它作为弹簧 ModelandView 对象的一部分传递给客户端。

在客户端 JSP 中，我可以使用 EL 将集合输出为 ${model.exampleSet} ，JSP 将其解析为 [A, B, C] 。

我想要做的是将 exampleSet 的内容分配给一个 javascript 字符串数组，所以你会得到类似的东西

```
var exampleSet = ["A", "B", "C"] 
```

我找不到直接的方法来做到这一点。另一个明显的方法是遍历 Set，但由于我无法在 javascript 中计算出 Set 的大小，我认为我也不能这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T15:44:07.083

JavaScript 在浏览器上执行。JSP 在服务器上呈现。您在这里错过了执行环境的生命周期。

你会做的是

```
<script>
var exampleSet = [
  <c:forEach var="item" items="${theSetVariable}" varStatus="loop">
    "${item}"
    <c:if test="${!loop.last}">,</c:if>
  </c:forEach>
]
<script> 
```

因此，您正在循环访问 JSP 中的 Set，以创建 HTML/JavaScript，当在浏览器上呈现时，它会创建代码来表示 Javascript 数组。

# asp.net - Ninject 拦截 MVC 3 控制器

> ID：12076658
> 
> 赞同：2
> 
> 时间：2012-08-22T15:36:31.120
> 
> 标签：asp.net, asp.net-mvc-3, ninject, interception

我使用 Ninject Interceptions Extensions 和 Dynamic Proxy v3.0 进行拦截。我正在尝试类代理拦截 MVC 3 控制器。控制器被拦截但行为不正确。拦截器仅拦截对 ControllerBase 和 Controller 类上的公共虚拟方法的调用。我的 HomeController 公共虚拟方法永远不会被拦截。这是我的代码。我正在考虑使用 MVC 的过滤器来完成此任务，而不是 Ninject 拦截。

```
public class AuditAttribute : InterceptAttribute
{
    public override IInterceptor CreateInterceptor(IProxyRequest request)
    {
        return request.Context.Kernel.Get<AuditInterceptor>();            
    }
}

    [Audit] //HomeController method not intercepted.
    public virtual ActionResult Index()
    {
     return View();
    }

 public class AuditInterceptor : SimpleInterceptor
{
    public AuditInterceptor(IAuditor auditor)
    {
        if (auditor == null)
            throw new ArgumentNullException("auditor");
        this.auditor = auditor;            
    }        

    protected override void OnError(IInvocation invocation, Exception exception)
    {
        stopWatch.Stop();
        AuditEvent auditEvent = new AuditEvent();
        auditEvent.ExceptionDescription = exception.Message;
        auditEvent.FormName = string.Format("class: {0}, method: {1}", invocation.Request.Method.DeclaringType, invocation.Request.Method.Name);
        auditEvent.AppName = appName;            
        this.auditor.WriteAudit(auditEvent);
        auditEvent.LengthOfMethodCall = stopWatch.Elapsed;
        base.OnError(invocation, exception);
    }

    protected override void AfterInvoke(IInvocation invocation)
    {
        stopWatch.Stop();
        AuditEvent auditEvent = new AuditEvent();
        auditEvent.ExceptionDescription = defaultExp;
        auditEvent.FormName = string.Format("class: {0}, method: {1}", invocation.Request.Method.DeclaringType, invocation.Request.Method.Name);
        auditEvent.AppName = appName;            
        auditEvent.LengthOfMethodCall = stopWatch.Elapsed;
        this.auditor.WriteAudit(auditEvent);            
    }

    protected override void BeforeInvoke(IInvocation invocation)
    {
        stopWatch.Start();           
    } 
```

}

# c# - 观察者设计模式的更新方法

> ID：12076660
> 
> 赞同：3
> 
> 时间：2012-08-22T15:36:40.050
> 
> 标签：c#, java, design-patterns

我见过几个观察者模式的例子。

为什么 Observer 接口中的 update 方法在某些情况下会包含对被观察对象的引用？观察者不知道它在观察什么物体吗？

请举例说明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:43:06.803

根据具体问题，它可能有也可能没有对主题的引用。

Subject 可能只调用 update() 函数并在 Observer 中设置一些值，因此 Observer 不需要引用。或者它可以通知观察者发生了变化，观察者将通过它拥有的引用联系主题并获取新的值。

如果观察者需要通知主题一些事情，也可以在实现中使用引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T16:31:51.193

具体到您的最后一个问题，考虑到 C# 和 Java 作为编程语言，一个对象如何“知道”另一个对象，除了通过引用？

观察者和主体之间的关系需要存储在某个地方，并且在 Java 和 C# 中，如果需要对主体或观察者调用任何操作，则只能通过引用存储。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T15:38:39.550

您好 Amandeep，您可以阅读这篇文章，非常有趣，您拥有 GOF 的所有设计模式

你有类图，示例代码

它解释了关于观察的所有概念：Subject, ConcreteSubject, Observer 和 ConcreteObserver

[http://www.dofactory.com/Patterns/PatternObserver.aspx](http://www.dofactory.com/Patterns/PatternObserver.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T15:50:21.793

人们`Observer`可以观察到很多`Observable`，因此当他收到通知时，它可以以特定方式处理更改。例如 ：

```
import java.util.Observable;
import java.util.Observer;

public class ObserverSample {
    static class ObservableExtension extends Observable {
        void doSomething() {
            setChanged();
            notifyObservers();
            clearChanged();
        }
    }

    public static void main(final String[] args) {
        final ObservableExtension observable1 = new ObservableExtension();
        final Observable observable2 = new ObservableExtension();
        final Observer observer = new Observer() {
            @Override
            public void update(final Observable o, final Object arg) {
                if (o == observable1)
                    System.out.println("This is the first observable");
                else if (o == observable1)
                    System.out.println("This is the second observable");
                else
                    System.out.println("This is another observable");
            }
        };
        observable1.addObserver(observer);
        observable2.addObserver(observer);
        observable1.doSomething();
    }
} 
```

但是，我不喜欢这种方法（唯一的优点是内存占用更小。），我更喜欢使用具有单一职责的不同观察者。

```
 observable1.addObserver(new Observer() {
        @Override
        public void update(Observable o, Object arg) {
            System.out.println("This is the first observable");
        }
    });
    observable2.addObserver(new Observer() {
        @Override
        public void update(Observable o, Object arg) {
            System.out.println("This is the second observable");
        }
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T17:03:19.150

快速简短的回答

观察者模式可以有多种变体。

其中之一只允许检测观察对象的变化，并可能显示它们的属性值。其他也允许执行操作。

# objective-c - Xcode 显示无效警告

> ID：12076661
> 
> 赞同：1
> 
> 时间：2012-08-22T15:36:42.610
> 
> 标签：objective-c, xcode, warnings, compiler-warnings

出于某种原因，尽管我正在返回一个值，但我还是从 Xcode 收到了许多“控制到达非空函数结束”警告。我在两个函数中收到警告（如下图所示）。在第一个函数中，我调用`return [super init]`并且返回类型是`id`，所以我不明白为什么会收到该警告。在第二个函数中，返回类型为 void，警告指定错误发生在**非 void**函数中。基本上，我想知道我是否犯了一些我不知道的错误，或者 Xcode 是否只是在表现错误。

![在此处输入图像描述](../Images/56507670b15d9edc70103572839144f0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:54:30.287

[按照问题作者的建议发布为答案，并提供更多信息]

在大多数情况下，仅运行项目会导致编译器重新生成自上次构建以来受到影响的链接器文件，有时它并不完美，这就是导致这些错误的原因。

要解决此问题，只需清理您的项目（Product -> Clean 或 Command-Shift-K），然后运行您的项目。这会导致任何先前生成的链接器文件被破坏（不是问题）并从头开始重新生成。构建将比仅仅运行项目花费更长的时间，因为它需要构建和链接每个类，而不是仅仅在运行时更改的类

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:44:57.193

我真的看不出有什么问题。尝试清理并再次构建。也`[super init]`应该始终保存在 self 中，如下所示：

```
self = [super init]; 
```

# vim - 在没有 , 的 Vim 中从 f 切换到 F

> ID：12076665
> 
> 赞同：2
> 
> 时间：2012-08-22T15:36:59.980
> 
> 标签：vim

使用该`f{char}`动作后，是否可以改变方向以`;`向后移动（就像您使用了一样`F{char}`）？（反之亦然`tT`。）

我将尝试使用`,`作为 LocalLeader 并且我有这个让我`,`再次访问：

```
let maplocalleader = ','
nnoremap <LocalLeader><LocalLeader> <LocalLeader> 
```

但我想知道我是否可以映射以在和之间`<LocalLeader>;`进行`;`切换。我没有看到存储字符的任何地方，所以我可以这样做吗？`;``,``f`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T16:05:37.340

不，这是无法做到的，除非您自己重新实现该`f`命令（这并不像听起来那么难；实际上也有插件可以增强它以在后续行中搜索）。不过，它可以为`n`/ `N`(via `v:searchforward`) 完成。

一般来说，我建议不要使用这种聪明的“技巧”；它们重新训练你的肌肉记忆，并在其他环境中使用类似 vi 的键绑定（Pentadactyl、Bash、readline、一些 IDE）引起问题。相反，重新考虑您的映射方法。

# javascript - 在包含流的 html 上用 javascript 替换动态 str

> ID：12076669
> 
> 赞同：0
> 
> 时间：2012-08-22T15:37:14.880
> 
> 标签：javascript, jquery, string, replace

我有一个看起来大致像这样的 html

```
<div id="wallPostTemplate">
    <li id='comment-content--oOo-id-oOo-' class='comment-content' comment_id='-oOo-id-oOo-'>
        <a class='comment-avatar' href='-oOo-link-oOo-'>
            <img class='small_avatar' src='<?="../" . MESTO_ZA_UPLOAD_FAJLOVA_KORISNIKA ?>-oOo-korisnikPodaci.Slika-oOo-'></a> 
            -oOo-text-oOo-
    </li>
</div> 
```

现在，我将 html 的内容放入一个字符串中`$('#wallPostTemplate').text()`，然后我想用`-oOo-id-oOo-` 我存储的任何数据动态替换字符串的出现，比如`-oOo-id-oOo-`，`-oOo-text-oOo-`等等......

现在我尝试了很多方法来解决这个问题，但我总是没有解决方案。这是我最近的尝试。帮助请Q_Q

```
var regex = new RegExp('{\-oOo\-'+index+'\-oOo\-}', "g");
post = post.replace(regex, value); 
```

我也尝试过`str.replace`，但它不起作用......似乎新线路是问题，但我不知道如何克服这个......

编辑：

为了更容易理解，我在 jsfiddle 上做了一个例子：http: [//jsfiddle.net/DdBFB/](http://jsfiddle.net/DdBFB/) 正如你所看到的，你什么也看不到....当你通过 html 获取内容时它不起作用功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:59:16.357

如果我理解您的问题，您的目标是制作类似帖子模板的内容，该模板将在运行时/客户端加载。因此，如果这真的是您的目标，您可以尝试使用[jQuery 模板插件](http://api.jquery.com/jquery.tmpl/)

您的案例样本：（尚未测试）

```
var tmlpPost = "<div id='${postId}'>" + 
                         "      <li id='comment-content-${postId}' class='comment-content' comment_id='${postId}'>" + 
                         "              <a class='comment-avatar' href='${link}'>" + 
                         "                  img class='small_avatar' src='<?="../" . MESTO_ZA_UPLOAD_FAJLOVA_KORISNIKA ?>${korisnikPodaciSlika}'>" + 
                         "              </a> " + 
                         "              ${postText}" + 
                         "      </li>" + 
                         "</div>";

$.tmpl( tmlpPost, { "postId" : "123" , "link" : "http://posturl.com", "korisnikPodaciSlika" : "something",  "postText" : "Post text goes here..."}).appendTo( "#yourPostWall" ); 
```

或使用`<script>`not a `var`：[请参阅此 Fiddle](http://jsfiddle.net/jJP6k/)

```
<script id="tmlpPost" type="text/x-jquery-tmpl">
    <div id='${postId}'>
          <li id='comment-content-${postId}' class='comment-content' comment_id='${postId}'>
                  <a class='comment-avatar' href='${link}'>
                      <img class='small_avatar' src='<?="../" . MESTO_ZA_UPLOAD_FAJLOVA_KORISNIKA ?>${korisnikPodaciSlika}'>
                  </a>
                  ${postText}
          </li>
    </div>
</script> 
```

现在在页面加载：

```
$("#tmlpPost").tmpl( { "postId" : "123" , "link" : "http://posturl.com", "korisnikPodaciSlika" : "something",  "postText" : "Post text goes here..."}).appendTo( "#output" );​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T05:34:51.893

好的，我想答案是我设置了正则表达式标志错误，所以我去了 jsfiddle 并摆弄它，你可以在那里看到答案:)

[http://jsfiddle.net/DdBFB/11/](http://jsfiddle.net/DdBFB/11/)

我错过了多行标志 Q_Q ....即使在 php 中也不用 js 说话，我也对正则表达式不好...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T15:56:06.453

尽管您的问题不是很清楚，但我已经提出了一个基于正则表达式替换值的示例。

```
var source = "-oOo-korisnikPodaci.Slika-oOo-";
var id = "korisnikPodaci.Slika";
var regex = new RegExp('\-oOo\-' + id + '\-oOo\-', "gmi");

// Match
source.replace(regex, "hello world"); // => "Hello World"

// Mismatch
source = "-oO!!!o-korisnikPodaci.Slika-oO!!!o-";
source.replace(regex, "hello world"); // => "-oO!!!o-korisnikPodaci.Slika-oO!!!o-" 
```

# javascript - 在javascript中的数字上调用构造函数

> ID：12076682
> 
> 赞同：5
> 
> 时间：2012-08-22T15:38:19.123
> 
> 标签：javascript

我一直在尝试围绕 javascript 原型继承，在阅读 John Resig 的书“Pro Javascript Techniques”时，我正在尝试这样的事情：

```
alert("me".constructor); //Correctly return String
alert(alert.constructor); //Correctly return Function 
```

然而，

```
alert(55.constructor);//I was expecting Number, but it returns error "SyntaxError: identifier starts immediately after numeric literal" in FF and in IE, it says it is expecting ")" 
```

我还尝试了其他应该对数字起作用的函数，例如`toFixed()` `toPrecision()`，甚至`toString()` 但没有任何作用！

有人可以解释这种行为吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T15:39:46.507

把`()`数字放在一边，像这样：

```
alert((55).constructor); 
```

* * *

**摘自评论：**

解析器需要一个十进制数，但失败了，因为它看到的是字母“c”。或者，`55..constructor`也可以工作（因为`55.`只是`55.0`or `55`）。

# c# - 尽管所有数据包都到达，但 C# UDP 数据包丢失 (WireShark)

> ID：12076686
> 
> 赞同：4
> 
> 时间：2012-08-22T15:38:32.123
> 
> 标签：c#, .net, networking, udp

正如标题所说，我在 C# 中遇到了 UDP 问题。我正在尝试为 DayZ 游戏的 rcon 协议构建一个库。

我的问题是我没有收到我应该收到的每个数据包。发送命令后，服务器回复一个拆分答案。数据包头包含总数据包计数和当前数据包的索引。现在，如果我应该得到 17 个数据包，我的应用程序中只会得到 8-15 个数据包。

在使用 WireShark 进行测试后，我现在知道所有包裹都到达了我的计算机上。他们只是没有得到我的应用程序或类似的东西的认可。

**我的实际问题是：** 是否可以防止丢失我的网卡和我的应用程序之间的包？或者为什么会这样？

这是我当前的代码。它很脏，因为我在没有按预期工作后把它撕开了：

```
 private Socket _udpClient;
    private Thread _receiverThread;
    private Thread _workerThread;
    private Queue<byte[]> _packetQueue;
    private PacketBuffer[] MessageBuffer;
    private byte SenderSequence = 0;
    private IPEndPoint connection;

    public RCon(IPAddress ip, int port)
    {
        connection = new IPEndPoint(ip, port);
        _udpClient = new Socket(connection.Address.AddressFamily, SocketType.Dgram, ProtocolType.Udp);
        _udpClient.Connect(connection);
        MessageBuffer = new PacketBuffer[256];
        _packetQueue = new Queue<byte[]>();

        _receiverThread = new Thread(new ThreadStart(ReceiveCallback));
        _receiverThread.IsBackground = true;
        _receiverThread.Priority = ThreadPriority.AboveNormal;
        _receiverThread.Start();
        _workerThread = new Thread(new ThreadStart(WorkerCallback));
        _workerThread.IsBackground = true;
        _workerThread.Start();
    }

    public void Login(string password)
    {
        LoginPacket packet = new LoginPacket(password);

        _udpClient.Send(packet.Bytes);
    }

    public void SendCommand(string command)
    {
        CommandPacket packet = new CommandPacket(SenderSequence, command);
        SenderSequence++;

        _udpClient.Send(packet.Bytes);
    }

    private void ReceiveCallback()
    {

        while (true)
        {
                byte[] buffer = new byte[1036];
                if (_udpClient.Receive(buffer) > 0)
                    _packetQueue.Enqueue(buffer);
        }
    }

    private void WorkerCallback()
    {
        while (true)
        {
            if (_packetQueue.Count > 0)
            {
                byte[] buffer = _packetQueue.Dequeue();

                if (buffer != null)
                {
                    try
                    {
                        Packet receivedPacket = Packet.ParseIncoming(buffer);

                        OnPacketReceived(new PacketReceivedEventArgs(receivedPacket));

                        switch (receivedPacket.Type)
                        {
                            case PacketType.Message:
                                OnMessageReceived(new MessageReceivedEventArgs(receivedPacket.Content));
                                MessageCallbackPacket packet = new MessageCallbackPacket(receivedPacket.SequenceNumber);
                                _udpClient.Send(packet.Bytes);
                                break;
                            case PacketType.CommandCallback:
                                if (MessageBuffer[receivedPacket.SequenceNumber] == null)
                                    MessageBuffer[receivedPacket.SequenceNumber] = new PacketBuffer(receivedPacket);
                                else
                                    MessageBuffer[receivedPacket.SequenceNumber].AddPacket(receivedPacket);

                                if (MessageBuffer[receivedPacket.SequenceNumber].IsComplete)
                                    OnCommandCallback(new CommandCallbackEventArgs(MessageBuffer[receivedPacket.SequenceNumber].GetContent()));
                                break;
                        }
                    }
                    catch (ArgumentException) { }
                    catch (OverflowException) { }
                    catch (FormatException) { }
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T15:45:42.823

这通常是因为您使用数据报的速度不够快，因此内核套接字缓冲区已满，网络堆栈开始丢弃新到达的数据包。几点：

*   增加套接字上的接收缓冲区，
*   不要在每次迭代时都获取锁——尽可能多地读取，然后将数据放入队列中，
*   考虑非阻塞方法而不是线程。

# html - JSP中的第四次嵌套引用

> ID：12076689
> 
> 赞同：0
> 
> 时间：2012-08-22T15:38:47.223
> 
> 标签：html, jsp, nested, liferay, quoting

我怎样才能让Tomcat吞下这条线？我尝试了所有引用组合！

```
 <liferay-ui:search-container-column-text name="howstheweather" 
   value="<liferay-ui:message key='<%=("Sun").equals(timeBean.today())?"sunny-day-msg":"take-umbrella-msg"%>'/>"
 /> 
```

询问是否有任何解决方案，而不是评估更改为 EL 和 JSLT

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:56:00.663

您不能在其他 jsp-tag 的值中使用 jsp-tag。但是`<liferay-ui:search-container-column-text .../>`-Tag 有一个`translate`属性。为您提供解决方案：

```
<liferay-ui:search-container-column-text name="howstheweather" 
  value='<%=("Sun").equals(timeBean.today())?"sunny-day-msg":"take-umbrella-msg"%>'
  translate='true'
/> 
```

# c - 嗨，有人能告诉我以下代码是做什么的吗

> ID：12076691
> 
> 赞同：1
> 
> 时间：2012-08-22T15:38:46.757
> 
> 标签：c, arrays, pointers

大家好，有人可以告诉我这行代码是做什么的

```
xdata.yarray[3] = *(ptr++);  
xdata.yarray[2] = *(ptr++);  
xdata.yarray[1] = *(ptr++);  
xdata.yarray[0] = *(ptr++); 
```

我正在尝试找出其他人的代码，因此如果有人能提供一些有用的指示来解释其他人的代码的最佳方法，那么遇到问题也会不胜感激。

谢谢

如果不是**xdata**它只是**数据，代码的含义会改变吗**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T15:42:43.680

设置`arr`为 的初始值，代码将值, , ,`ptr`填充到元素, ..., -- 即它以相反的顺序复制四个元素的范围。作为副作用，它会修改 的值，使其最终。`arr[0]``arr[1]``arr[2]``arr[3]``xdata.yarray[3]``xdata.yarray[0]``ptr``arr + 4`

请记住，`*ptr`它与 相同`ptr[0]`，并且表达式`*(ptr++)`的计算结果相同，但会`ptr`增加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T15:42:32.133

它基本上是将指向 by 的数组指针以相反的顺序复制`ptr`到 的`yarray`成员。`xdata`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T15:42:21.993

它分配数据并递增指针，以便下一个分配可以使用 指向的下一个值`ptr`。

它简单地等同于：

```
xdata.yarray[3] = *ptr;  
ptr++;
xdata.yarray[2] = *ptr;  
ptr++;
xdata.yarray[1] = *ptr;  
ptr++;
xdata.yarray[0] = *ptr;  
ptr++; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T16:03:59.577

关于这段代码的作用，你有很多答案。据推测，处理 ptr 指向的某个数组的内容并将其以相反的顺序存储到结构“xdata”中包含的另一个数组中。

你问你如何自己破解这个问题，这是一个很好的问题，最好的学习方法是自己做。这是我的建议：利用你所知道的，在此基础上创建你自己的小程序，然后查看输出。

例如，在没有看到所有代码的情况下，我知道您有一个包含 4 个元素的数组“yarray”，并且您正在将取消引用指针中的值存储到其中。您可以编写一个如下所示的小程序来查看代码的反应：

```
void main()
{
    int yarray[4] = {0, 0, 0, 0};
    int my_array[4] = {1, 2, 3, 4};
    int *ptr = my_array;
    int cntr;

    for(cntr = 0; cntr < 4; cntr++)
        printf("then: my_array = %d, and yarray = %d\n", my_array[cntr], yarray[cntr]);

    //Add the code that you're not sure what it does here...
    yarray[3] = *(ptr++);
    yarray[2] = *(ptr++);
    yarray[1] = *(ptr++);
    yarray[0] = *(ptr++);

    //Check out the results!
    for(cntr = 0; cntr < 4; cntr++)
        printf("now: my_array = %d, and yarray = %d\n", my_array[cntr], yarray[cntr]);
} 
```

现在您可以看到代码正在反转 ptr 指向的内容的顺序并将其存储在 yarray 中。

```
then: my_array= 1, and yarray = 0
then: my_array= 2, and yarray = 0
then: my_array= 3, and yarray = 0
then: my_array= 4, and yarray = 0

now:  my_array= 1, and yarray = 4
now:  my_array= 2, and yarray = 3
now:  my_array= 3, and yarray = 2
now:  my_array= 4, and yarray = 1 
```

# java - Java 语法混乱，为什么要把 () 放在一个类周围？

> ID：12076692
> 
> 赞同：-1
> 
> 时间：2012-08-22T15:38:47.250
> 
> 标签：java, syntax

我正在研究原型设计模式我无法理解下面的语法。你能给我解释一下吗？将一个类放在括号中并像这样初始化是什么意思：

```
Person person2 = (Person) person1.doSomthing(); 
```

上下文中的代码：

```
// code in  int main
Person person1 = new Person("Fred");// this is understood
    System.out.println("person 1:" + person1);// this is understood
    Person person2 = (Person) person1.doClone();//not understood
    System.out.println("person 2:" + person2);// this is understood 
```

java中的这种语法是否用于强制转换？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-22T15:40:08.407

这是一个演员表。换句话说，该`doSomething()`方法很可能没有声明为返回 a `Person`。因此，您需要先将返回的值转换为 a `Person`，然后再将其分配给`person2`.

如果`doSomething`确实返回 a `Person`，则不需要强制转换。

如果返回的对象的实际类型`doSomething`不可分配给 Person，则强制转换将`ClassCastException`在运行时抛出 a。

[JLS #15.16](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.16)中有关它的更多信息：

> 强制转换表达式在运行时将一种数值类型的值转换为另一种数值类型的相似值；或在编译时确认表达式的类型是布尔值；或在运行时检查引用值是否引用了其类与指定引用类型兼容的对象。
> 
> 括号和它们包含的类型有时称为强制转换运算符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T15:40:59.560

这称为[类型转换](http://en.wikipedia.org/wiki/Type_conversion)。您要说的是，您要确保 JVM 尝试强制该调用返回的任何类型的对象为`Person`.

assylias 没有提到的另一件事是它有两个附加功能：

1.  如果实际返回的对象是 的子类`Person`，它会将返回值更改为`Person`。当您想确保实际使用任何子类时，这可能很有用，希望它的行为就像`Person`.
2.  如果`Person`是一个接口，它将让您完全跳出该特定实现的继承层次结构并使用其他人的`Person`实现。这非常适合与像 Spring 这样的 API 一起使用，它允许您在构建时间之后配置类如何在安全配置等方面链接在一起。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T15:39:41.430

它只是用来将它 ( `person1.doSomthing()`) 转换为`Person`类型。因为它可能不是返回`Person`类型，而是可以转换为`Person`类型的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T15:40:20.343

您正在将结果`Person.doClone()`转换为 type `Person`。大概`Person.doClone()`返回一个`Object`或类似的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-22T15:43:12.133

```
Person person2 = (Person) person1.doSomthing(); 
```

它将类型转换为对象从 person1.doSomthing() 返回的 Person 类型。

```
Person person2 = (Person) person1.doClone(); 
```

在这里，它克隆了 person1 对象，将其转换为 person 对象。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-22T15:48:45.723

这是一个类型转换，以确保调用返回的对象类型是`person1.doClone()`type `Person`，以便可以将其分配给您的 person2 变量。

如果该`doClone()`方法是在`Person`类中定义的，我希望它返回一个类型为 的对象`Person`。在这种情况下，演员表是良性和不必要的。

但是，`doClone()`可以在 的超类中定义`Person`，并返回更通用的类型，因此可能需要缩小转换。

如果`doClone`不返回类型的实例`Person`（或 Person 继承层次结构中的某个其他类），则将`java.lang.ClassCastException`抛出 a 。

# sql-server - SQL Server 查询

> ID：12076693
> 
> 赞同：0
> 
> 时间：2012-08-22T15:38:48.927
> 
> 标签：sql-server, select

我有这个简单的（非实用）表

```
STUDENTID   SERVICE
1           a         
1           b         
1           c         
1           d         
1           e         
2           a         
2           b         
2           c         
2           d          
2           e         
3           a          
3           b         
3           c         
4           a         
4           f         
5           a         
5           d         
6           f         
6           g         
7           a         
7           b         
7           c         
7           d         
7           e         
8           a         
8           b         
8           c         
8           d         
8           e 
```

例如，我想将某些信息制成表格。

有多少学生单独注册了服务“a”和服务“b”。
有多少学生单独注册了服务“a”和服务“c”。
有多少学生单独注册了服务“a”和服务“d”。等等

或者

有多少学生注册了服务“a”和“a”以外的其他服务。
有多少学生注册了服务“b”和“b”以外的其他两项服​​务。

未来服务的数量可能会发生变化，但目前还可以。

这就是我现在所拥有的，但它不起作用。

--想要返回注册了 a 和 1 任何其他服务的学生人数

```
select COUNT(STUDENTID), service from table 
group by service where service = 'a' and studentid in 
(select studentid from table group by STUDENTID having COUNT(service) = 2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:55:47.663

以下是关于您的问题的一些提示。

**有多少学生单独注册了服务“a”和服务“b”。**

```
SELECT COUNT(*)
FROM
(
    SELECT studentID
    FROM   tableName
    WHERE  Service IN ('A', 'B')
    GROUP BY StudentID
    HAVING COUNT(studentID) = 2
) a 
```

**有多少学生单独注册了服务“a”和服务“c”。**

```
SELECT COUNT(*)
FROM
(
    SELECT studentID
    FROM   tableName
    WHERE  Service IN ('A', 'C')
    GROUP BY StudentID
    HAVING COUNT(studentID) = 2
) a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:42:32.053

关于什么：

```
select COUNT(t.STUDENTID)
from 
(select studentid, service  from table group by STUDENTID having COUNT(service) = 2) as t
WHERE t.service = 'a' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T15:46:20.477

您可以自行加入

```
SELECT COUNT(DISTINCT studentid) n
FROM      table t1
LEFT JOIN table t2 on (t1.studentid = t2.studentid)
WHERE t1.service = 'a' AND t2.service <> 'a' 
```

或者如果你想了解学生...

```
SELECT studentid, SUM(IF(service = 'a',1,0)) n_a, SUM(IF(service = 'a',0,1)) n_other
FROM table
GROUP BY studentid
HAVING n_a = 1 AND n_other >= 1 
```

# javascript - 在 Firefox Addon SDK 背景页面上使用 jQuery

> ID：12076694
> 
> 赞同：3
> 
> 时间：2012-08-22T15:38:52.030
> 
> 标签：javascript, firefox, firefox-addon, firefox-addon-sdk

我正在将一个扩展从 Google Chrome 移植到 Firefox 的 Addon SDK (v1.9)。由于它在后台页面（Firefox 上的 main.js）上使用 jQuery，我想在 Firefox 版本上也使用该库。但是，由于无法从插件代码本身访问 window 对象（并且 jQuery 广泛基于此），我想知道是否有更好的方法从插件代码实现 jQuery 库。也许有一种方法可以使用“require('jquery')”将 jQuery 作为模块导入。

澄清一下，我知道如何在内容脚本上实现 jQuery。我想要做的是在插件代码本身上使用 jQuery，例如“main.js”（或您给背景“主”模块提供的任何名称）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:13:29.320

结论是不可能（或很难）包括在内。

但是，如前所述，在大多数情况下它是没有意义的（因为我们无法从后台页面访问 window 对象）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-14T21:34:15.067

我还将一个扩展从 Chrome 移植到 Firefox，并设法想出了这个：

```
var {Cc, Ci} = require("chrome");
_window = Cc["@mozilla.org/appshell/appShellService;1"]
    .getService(Ci.nsIAppShellService).‌​hiddenDOMWindow;

$ = require('jquery')(_window); 
```

[这里](https://stackoverflow.com/questions/28932362/porting-chrome-extension-using-jquery-to-firefox-sdk-add-on/)有更多细节。

如今，jQuery 在非 DOM 上下文中有很多用途，尤其是 Deferreds 和 ajax 的东西，以及像 extend 之类的实用程序。必须将跨浏览器的 jQuery 代码重写为特定于 Firefox 的代码，例如请求模块，这将是令人沮丧的。

# rally - Rally Analytics 为查询设置 startindex

> ID：12076696
> 
> 赞同：1
> 
> 时间：2012-08-22T15:38:55.173
> 
> 标签：rally

我有一个对 Rally Analytics 的查询，它返回的数据集大于页面大小。所以我想做另一个查询来返回剩余数据集。我尝试设置一个 startindex 值，但这不起作用，StartIndex 保持在 0。

```
 this.query = {
                        find:Ext.encode(requestedQuery.find),
                        StartIndex:20000,
                        pagesize:20000 //MAX_PAGESIZE
                    };

                _queryAnalyticsApi:function () {
                    Ext.Ajax.request({
                        url:"https://rally1.rallydev.com/analytics/1.27/" + this.workspace + "/artifact/snapshot/query.js?" + Ext.Object.toQueryString(this.query) +
                            "&fields=" + JSON.stringify(this.requestedFields) + "&sort={_ValidFrom:1}",
                        method:"GET",
                        //need to change this to a POST
                        success:function (response) {
                            this._afterQueryReturned(JSON.parse(response.responseText));
                        },
                        scope:this
                    });
                }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:10:07.280

这行得通，因为结果集的属性称为 StartIndex，所以令人困惑。如果可以先在服务器上定义和处理粒度（即天、周），那就太好了，这样它就不必返回这么大的数据集了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:52:50.250

您要使用的参数称为 start。此外，在后续页面上，使用从第一页数据返回的 ETLDate 包含一个过滤器也很重要，这样您的结果在时间上是一致的。我们在 AppSDK 2.0 中创建了一个 SnapshotStore，可以为您处理所有这些复杂性。快来寻找吧！

# javascript - 添加/更改模型后重新绘制和渲染集合

> ID：12076698
> 
> 赞同：0
> 
> 时间：2012-08-22T15:38:59.747
> 
> 标签：javascript, backbone.js

我有一个“索引”视图和一个随附的“分页”视图。在初始化时，索引视图获取相关的集合。最初获取的集合限制为 100 个模型，并且包含集合中所有值的计数。计数被传递给分页视图，并相应地产生页码。在第 10 页之后（10 条记录/页）接下来的 100 个模型被提取，以此类推模式继续。

牢记上述内容，当我将一个或多个模型添加到集合中时，需要从服务器重新获取模型计数（因此可以重新计算页面），即使我这样做了：

`@collection.add [new_model]`

但是，如果更改模型中的值，我只想重新渲染集合。

使用以下初始化代码，我可以在更改后重新渲染集合。但是在“添加”的情况下，什么也没有发生。如何构建视图以从服务器重新获取新集合和计数？

注意：我正在使用`fetch(add: true)`

```
initialize: ->
    @collection = new MyApp.MyCollection()
    @collection.on('add', @render, @)
    @collection.on('change', @render, @)
    @collection.fetch(add: true) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:12:30.027

澄清事件逻辑：

*   **reset**：将在从服务器获取后触发。提取删除集合的所有内容，并仅插入来自服务器的集合中的所有内容
*   **add**：将在模型添加到集合后触发。**注意**：除非您使用 add:True 选项，否则 add 不会由 fetch 触发。
*   **change**：将在模型的内容/字段更改后触发。**注意**：更改不会由 fetch 或添加模型触发。

所以事件几乎不会重叠，但都服务于特定的用例。在将事件绑定到方法（尤其是渲染方法）时，请记住这一点。

# groovy - 记录器在关闭时不可用

> ID：12076700
> 
> 赞同：0
> 
> 时间：2012-08-22T15:39:06.550
> 
> 标签：groovy

一些奇怪的行为：记录器在关闭时不可用这里发生了什么？

```
Logger logger = Logger.getLogger("groovy.my.foo");

def printParameters() {
    if(logger.isDebugEnabled())
        logger.debug("print parameters")

    binding.variables.each { key, value ->
        logger.debug("Name=$key value= $value");
    }
} 
```

仅在提供记录器的情况下有效

```
 def printParameters(Logger logger) 
```

参数没问题....谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T15:35:51.383

Groovy 脚本中的变量是[作用域](http://groovy.codehaus.org/Scoping+and+the+Semantics+of+%22def%22)的。如果您使用类型或者`def`它被定义为局部变量并且在方法中不可访问。如果您声明一个没有类型的变量，或者`def`它被添加到脚本的绑定中并且可以在其他方法中使用。

这是一个例子：

```
test = 'output'

printParameters()

def printParameters() {
    binding.variables.each { key, value ->
        println "$test: key=$key, value=$value"
    }
} 
```

在您的情况下，定义记录器实例`logger = Logger.getLogger("groovy.my.foo")`应该可以解决您的问题。

# css - 报纸版面有两栏和一个引号框居中？

> ID：12076701
> 
> 赞同：10
> 
> 时间：2012-08-22T15:39:17.597
> 
> 标签：css, layout, css-multicolumn-layout

我正在寻找一种为网站创建报纸布局的方法，其中内容分为两列，但在列的中间有一个引号框。

我知道如何使用 CSS3 和

```
-moz-column-count: 2;
-moz-column-gap: 10px;
-webkit-column-count: 2;
-webkit-column-gap: 10px; 
```

但是我如何在中间创建引号框，有什么方法可以将内容“包裹”在中间框周围的列中？

我附上了我的意思的插图。
请想象在这个插图中，两列中的文本被包裹在中间的盒子周围。

![通讯布局](../Images/56ff55866946ad4c5e8340a27b22977b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:25:19.990

这是一个有效的解决方案：

[在这里演示](http://dabblet.com/gist/3427208)

这将为您的列提供灵活性。但是，您的报价区域必须是固定的高度/宽度。如果要调整引用区域，请更改每个列 div 开头的间隔 div 的宽度/高度。不是一个优雅的解决方案，但它有效。

CSS：

```
#one {
    float:left;
    width:48%;
    background-color:#f0f0f0;
    min-height:400px;
}
#two {
    float:right;
    width:48%;
    background-color:#f0f0f0;
    min-height:400px;
}
#three {
    position: absolute;
    left:50%;
    top:100px;
    margin-left:-300px;
    border:1px solid;
    width:600px;
    height:200px;
    background: maroon;
    color: white;
} 
```

HTML：

```
<div id="one">
    <div style="float: right; height: 80px; width: 10px;"></div>
    <div style="float: right; height: 210px; width: 300px; clear: both;"></div>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
</div>
<div id="three">Duis aute irure dolor in reprehenderit in voluptate velit 
esse cillum dolore eu fugiat nulla pariatur. </div>
<div id="two">
    <div style="float: left; height: 80px; width: 10px;"></div>
    <div style="float: left; height: 210px; width: 300px; clear: both;"></div>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
</div> 
```

注意：这建立在下面的 peteris 解决方案（没有环绕引用 div）之上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:04:14.217

它可以实现，但是......它不灵活，您必须调整位置以适应您对文本所做的几乎任何更改。

[**演示**](http://dabblet.com/gist/3427016)

HTML

```
<div class='newspaper'>
    <img src='http://img259.imageshack.us/img259/8049/birmancat.jpg'>
    <p><!-- paragraph text --></p>
        <!-- nine more paragraphs -->
</div> 
```

我添加的 CSS：

```
.newspaper {
    position: relative;
    width: 580px;
    padding: 10px;
    margin: 0 auto;
    box-shadow: 1px 1px 5px;
    column-count: 2;
    column-gap: 20px;
    font-size: 12px
}
p { margin: 0 0 10px; }
p:nth-child(3):before, p:nth-child(8):before {
    width: 145px;
    height: 200px;
    content: '';
}
p:nth-child(3):before {
    float: right;
}
p:nth-child(8):before {
    float: left;
}
.newspaper img {
    position: absolute;
    z-index: 2;
    top: 85px; left: 50%;
    margin: 0 -150px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T00:07:56.560

[http://jsfiddle.net/iansan5653/xbfYD/4/](http://jsfiddle.net/iansan5653/xbfYD/4/)

我通过添加一些 JavaScript 为您拆分列来修改 @sean_mcgee 的答案。只需将文本放在`newspaperArticle`div 中，然后将您的报价放在 JavaScript 字段中。它在小屏幕上效果不佳，因为单词比空格长，所以这里是一个全屏示例：http: [//jsfiddle.net/iansan5653/xbfYD/4/embedded/result/](http://jsfiddle.net/iansan5653/xbfYD/4/embedded/result/)。唯一的问题是它可能会拆分 HTML 标签，所以要小心。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T15:48:56.863

我想这是错误的，但是......：

```
<style>
#one {
    float:left;
    width:48%;
    background-color:#f0f0f0;
    min-height:400px;
}
#two {
    float:right;
    width:48%;
    background-color:#f0f0f0;
    min-height:400px;
}
#three {
    position:absolute;
    left:50%;
    top:50%;
    margin-top:-150px;
    margin-left:-100px;
    border:1px solid;
    width:200px;
    height:200px;
}
</style>
<div id="one">ONE</div>
<div id="three">3</div>
<div id="two">two</div> 
```

# python - Py.test 运行直到通过装饰器

> ID：12076703
> 
> 赞同：3
> 
> 时间：2012-08-22T15:39:21.483
> 
> 标签：python, pytest

我有一些测试上传不同的数据（音乐、视频）并从服务中获取元数据。

所以 time.sleep() 是一个非常糟糕的方法，因为不同的服务器和情况可能会使系统过载。

所以我正在寻找特殊的装饰器或参数来设置。像这样的东西

```
@fails(10)
def test_get_info(self):
    assert info == 1 
```

10 次尝试后，断言仍然失败 - 引发异常。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T15:53:22.063

你可以使用[`retry`装饰器](http://www.saltycrane.com/blog/2009/11/trying-out-retry-decorator-python/)：

```
@retry(AssertionError, tries=10)
def test_get_info(self):
    assert info == 1 
```

注意：它不考虑`setup`,`teardown`方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-15T13:19:44.210

为了完成，我还要添加以下插件： [https ://pypi.python.org/pypi/flaky](https://pypi.python.org/pypi/flaky)

它与 py.test 和nose 一起开箱即用，您所要做的就是装饰您的测试方法或类。我认为这是一个非常简洁的 API：

```
@flaky(max_runs=10)
def test_get_info(self):
    assert info == 1 
```

# wcf - Can WCF be configured to 'refactor' the XMLSchema-instance namespace on a Serialized message?

> ID：12076708
> 
> 赞同：3
> 
> 时间：2012-08-22T15:39:48.750
> 
> 标签：wcf, datacontractserializer

We have noted that WCF DataContractSerializer isn't very efficient when it comes to serializing `null` values during an SOAP call. For audit purposes, we also record the exact message as sent to disk, so this wastes storage. A typical message with more than one nil element is sent like so:

```
<MyMessage xmlns="myXmlns">
    <field0>1234567</field0>
    <field1 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" />
    <field2 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" />
    <field3 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" />
    // etc
</MyMessage> 
```

What would be an immeasurable improvement for bandwidth and disk considerations would be to generate a SOAP body such as:

```
<MyMessage xmlns="myXmlns" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <field0>1234567</field0>
    <field1 xsi:nil="true" />
    <field2 xsi:nil="true" />
    <field3 xsi:nil="true" />
    //etc 
</MyMessage> 
```

So my question is, how can I change my WCF client to consolidate the XSI namespace on the root element, to prevent it from being repeated on each nil element?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T17:32:55.973

You can't tweak the serializer, however if you implement a [message inspector](http://weblogs.asp.net/paolopia/archive/2007/08/23/writing-a-wcf-message-inspector.aspx) you can manipulate to your hearts content.

If you want to drop the nulls altogether though, and never see if it's not present you could decorate it

```
[DataMember(EmitDefaultValue=false)] 
```

# asp.net - 是创建一个标签并从代码隐藏更新其文本，还是创建多个标签并根据需要显示/隐藏标签？

> ID：12076718
> 
> 赞同：3
> 
> 时间：2012-08-22T15:40:33.527
> 
> 标签：asp.net, .net, label

重复问题：创建一个标签并从代码隐藏更新其文本，还是创建多个标签并根据需要显示/隐藏标签更好？

**案例：一个标签，从代码隐藏更新**

*   在 aspx 页面上只创建了一个标签，保持页面轻量级。
*   .aspx 页面以及代码隐藏页面上的代码保持干净。
*   将错误或多个文本/标签显示的可能性降至最低。

**案例：带有文本的多个标签，在代码隐藏中显示/隐藏标签**

*   .aspx 页面中已经可以看到所有可能的文本；更新不需要重新编译。

我看到这两种方法的优点和缺点。我只是无法决定采取哪种方法。也许，这取决于有多少不同的可能文本选择，但什么是好的一般经验法则？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:46:15.707

我从维护的角度考虑这个问题。如果你在屏幕上有很多标签并且隐藏/显示它们，那么代码会很混乱，我想杀了你。还要记住，ASP.Net webforms 必须以视图状态的形式泵送所有服务器端控件的状态。更多的视图状态意味着更慢的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:55:29.207

我会去一个控制。

Tim -> 当 visible 设置为 false 时，控件不会被渲染，但它们会在服务器端初始化。所以有一些区别。

# html - 自定义 404 看起来不像它应该的那样

> ID：12076719
> 
> 赞同：0
> 
> 时间：2012-08-22T15:40:34.580
> 
> 标签：html, css, http-status-code-404, customization, background-image

我设计了自己的 404 错误，您可以在这里找到： [http](http://www.ianbauters.be/errors/404.html) ://www.ianbauters.be/errors/404.html （这个有效）

但是当我通过访问[http://www.ianbauters.be/qsdfhj](http://www.ianbauters.be/qsdfhj)触发 404 时，除了我使用的橙色背景图像之外，一切都在那里。

任何人有任何想法我可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T15:43:34.743

在 CSS 中使用 URL 的相对路径是个问题。例如...

```
url('assets/images/opacity.png') 
```

试着让它绝对...

```
url('/errors/assets/images/opacity.png') 
```

**编辑**- 其他需要注意的事情......

`url`通过标签在 CSS 中使用时`<style>`，相对路径将始终相对于当前页面位置。通过标签和文件`url`在 CSS 中使用时，路径将相对于*文件的**位置*。`<link>``.css`*`.css`*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:43:47.140

因为您为背景图像添加了相对路径，所以将其转换为绝对路径，您将没有更多问题

```
.oh {
   ...
   background-image: url('/assets/images/opacity.png');
   ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T15:47:24.210

如果您使用 firebug 查看这两个页面，您会注意到第二页上的错误，它正在从[http://www.ianbauters.be/assets/images/opacity.png](http://www.ianbauters.be/assets/images/opacity.png)加载图像， 但正确的 url 是[http://www .ianbauters.be/errors/assets/images/opacity.png](http://www.ianbauters.be/errors/assets/images/opacity.png)，只需使用整个网址

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T15:46:06.380

利用

```
background-image: url('/errors/assets/images/opacity.png'); 
```

代替

```
background-image: url('assets/images/opacity.png'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T15:48:12.067

更改css中的url`.oh`

从

```
url("assets/images/opacity.png") 
```

至

```
url("/errors/assets/images/opacity.png"); 
```

# wpf - wpf xaml中的EventTrigger RoutedEvent amimation

> ID：12076720
> 
> 赞同：0
> 
> 时间：2012-08-22T15:40:35.360
> 
> 标签：wpf, xaml, animation, triggers, routed-events

`MyObject.IsGlowing = true`我希望在我这样做时启动动画（`<DataTemplate>`如果有帮助的话，我很乐意）

```
<Ellipse Width="100" Height="100" Name="MyEllipse">
    <Ellipse.Fill>
        <RadialGradientBrush >
            <GradientStop Offset="0" Color="Red" />
            <GradientStop Offset="0.5" Color="red" />
            <GradientStop Offset="1" Color="red"/>
        </RadialGradientBrush >
    </Ellipse.Fill>
    <Ellipse.Triggers>
        <DataTrigger Binding="{Binding Source=IsGlowing}" Value="True">
            <DataTrigger.EnterActions>
                <BeginStoryboard Name="MyBeginStoryBoard">
                    <Storyboard Name="MyStoryBoard" >
                        //Animation
                    </Storyboard>
                </BeginStoryboard>
            </DataTrigger.EnterActions>
        </DataTrigger>
    </Ellipse.Triggers>
</Ellipse> 
```

但我收到此错误*“触发器集合成员必须是 EventTrigger 类型”*所以我将其更改为

```
<Ellipse Width="100" Height="100" Name="MyEllipse">
    <Ellipse.Fill>
        <RadialGradientBrush >
            <GradientStop Offset="0" Color="Red" />
            <GradientStop Offset="0.5" Color="red" />
            <GradientStop Offset="1" Color="red"/>
        </RadialGradientBrush >
    </Ellipse.Fill>
    <Ellipse.Triggers>
        <EventTrigger RoutedEvent="?">
                <BeginStoryboard Name="MyBeginStoryBoard">
                    <Storyboard Name="MyStoryBoard" >
                        //Animation
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>
    </Ellipse.Triggers>
</Ellipse> 
```

但我不知道在RoutedEvent中放什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:29:55.050

不允许在元素触发器集合中直接使用/指定 DataTriggers。但是，您可以使用样式来应用样式。

*   [http://www.thejoyofcode.com/Help_Why_cant_I_use_DataTriggers_with_controls_in_WPF.aspx](http://www.thejoyofcode.com/Help_Why_cant_I_use_DataTriggers_with_controls_in_WPF.aspx)

# java - Jersey 无法解组 java.lang.Number

> ID：12076729
> 
> 赞同：0
> 
> 时间：2012-08-22T15:40:59.637
> 
> 标签：java, jaxb

我有一个通用（POJO-）容器来与客户共享统计数据：

```
@XmlRootElement
public class StatsSeries implements Serializable {

    private TreeMap<Date, Number> timeSeries;

    /* accessor methods */
} 
```

根据数据，服务器存储`Long`或`Integer`存储`Double`在其中，这就是我使用 abstract 的原因`java.lang.Number`。

编组工作正常，并且指示具体类的提示包含在数据中：

```
 "timeSeries": {
                "entry": [
                    {
                        "key": "2012-08-20T00:00:00Z", 
                        "value": {
                            "$": "24", 
                            "@type": "xs:long"
                        }
                    }, 
                    ....
                 ]
              } 
```

或者在 XML 表示中：

```
 <timeSeries>
      <entry>
        <key>2012-08-20T00:00:00Z</key>
        <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xs="http://www.w3.org/2001/XMLSchema" xsi:type="xs:long">24</value>
      </entry>
      ...
    </timeSeries> 
```

当试图解组这个时，我得到一个`javax.xml.bind.UnmarshalException: Unable to create an instance of java.lang.Number`.

我看到了[这个问题](https://stackoverflow.com/questions/2688878/java-web-services-jaxb-abstract-superclass)，但这对我没有帮助。我该如何注释`java.lang.Number`？还有其他建议吗？

**更新**：查看[JAXB-890](http://java.net/jira/browse/JAXB-890)，我知道它应该在 JDK 1.7 或使用中修复`com.sun.xml.bind:jaxb-impl:2.2.6`- 对我来说都不适用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:25:09.600

不确定这是否适用于类型擦除，但您可以尝试[使用`XmlElementRef`](http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/annotation/XmlElementRef.html)

```
 @XmlElementRef
    private TreeMap<Date, Number> timeSeries; 
```

> “使用此注解时，XML 元素名称是从运行时 JavaBean 属性类型的实例派生的”。

如果失败，请查看[此链接是否有帮助](https://stackoverflow.com/questions/3941479/jaxb-how-to-marshall-map-into-keyvalue-key)。

# javascript - 让 Javascript 在 SharePoint 2010 上运行时遇到问题

> ID：12076735
> 
> 赞同：1
> 
> 时间：2012-08-22T15:41:26.440
> 
> 标签：javascript, jquery, sharepoint, sharepoint-2010

上周我正在寻求帮助，以获得为 SharePoint 2007 制作的用于 SharePoint 2010 的简单 javascript 代码，但并没有真正得到明确的答案，不幸的是我可以在我工作的地方使用，所以我决定尝试自己制作。它应该是一个拍卖列表，并且在“剩余时间”字段中有一个倒计时，直到该项目过期，但我不知道出了什么问题。我对 javascript 和 sharepoint 非常不熟悉，但我是一位经验丰富的程序员。有人能帮忙吗？下面是代码：

```
<script type="text/javascript">
var context = new SP.ClientContext.get_current();
var web = context.get_web();
var lists = web.get_lists();
var listId = SP.ListOperation.Selection.getSelectedList();
var list = lists.getById(listId);
var item = getItemByName("End Date");
var end = Date.parse(item.text())/1000;
var todayNow = new Date();
todayNow = Date.parse(today)/1000;
var result = (end-todayNow);
var item2 = getItemByName("Time Left");
item2.text(result);
</script> 
```

结束日期是一个可能会被隐藏的字段，但仅用作占位符以查找从现在到项目过期的差异。

感谢大家的任何回复。

编辑：好的，谢谢罗伯特，你真的帮了很多忙。当我看到你最后的评论时，我正要发布这个。我现在非常接近，因为我一直在谷歌搜索和研究你在第一条评论中所说的话，我已经走到了这一步：

<

```
script type="text/javascript">
ExecuteOrDelayUntilScriptLoaded(getWebSiteData, "sp.js");
var context = null;
var web = null;
var lists = null;
var listId = null;
var list = null;
var item = null;
function getWebSiteData(){
context = new SP.ClientContext.get_current();
web = context.get_web();
lists = web.get_lists();
listId = SP.ListOperation.Selection.getSelectedList();
list = lists.getById(listId);
context.load(list, 'End Date');
context.executeQueryAsync(Function.createDelegate
(this, this.onSuccessMethod), Function.createDelegate
(this, this.onFailureMethod));
}
function onSuccessMethod(sender, args){
alert('web title:' + web.get_title() + '\n ID:' + web.get_id
());
}
function onFailureMethod(sender, args){
alert('request failed' + args.get_message
() + '\n' + args.get_stackTrace());
}
</script> 
```

我认为我唯一要做的就是弄清楚如何获取当前项目，以便我可以为该特定项目设置剩余时间。你知道怎么做吗？我和我想的一样接近吗？再次感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T21:06:39.603

当您使用 javascript 访问 SharePoint 时，您使用的是 ECMA 客户端对象模型。我没有使用 07 的客户端对象模型，但我使用了 '10，并且马上可以告诉你发布的代码在 sp10 中不起作用。至少在 sp10 com 中，每次获取 SharePoint 对象（列表、Web、listItem、列等）的新实例时，都需要将该项目设置到本地上下文中，然后通过异步将上下文加载到服务器上方法。只有在那之后，您才能访问您想要的引用对象中的字段。如果你不明白，请告诉我。这是一些示例代码： http: [//pastebin.com/3amgaEhv](http://pastebin.com/3amgaEhv)

编辑：至于更新列表项，我刚刚找到了这个链接，在这里：[http ://sprider.org/2011/12/13/sharepoint-ecmascript-to-adddeleteupdateget-list-items/](http://sprider.org/2011/12/13/sharepoint-ecmascript-to-adddeleteupdateget-list-items/)

# vb.net - 如何在 VB.NET 中绘制爆炸

> ID：12076736
> 
> 赞同：0
> 
> 时间：2012-08-22T15:41:27.610
> 
> 标签：vb.net, graphics, 2d

我正在尝试绘制爆炸。通过draw，我的意思是使用`e.graphics`函数而不是使用a `Picturebox`（就像我上次那样）。

现在我的问题是，我该怎么做呢？在我的脑海中，我正在考虑使用`e.graphics.fillrectangle(x,y,w,h)`和...改变位置和颜色来创建类似于爆炸的合成图像。但是，这个过程似乎有点失败，因为我必须尝试尝试这样做 - 有没有办法更有效地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:14:15.170

您可能会发现 FillPolygonPoint 方法更有用。

想象一下你爆炸的所有点：

![爆炸为多边形](../Images/2a161b1201994a983ecac94ab814d2b8.png)

然后绘制它的代码看起来类似于：

```
Public Sub FillPolygonPoint(ByVal e As PaintEventArgs)

  ' Create solid brush. 
  Dim blueBrush As New SolidBrush(Color.Blue)

  ' Create points that define polygon. 
  Dim point1 As New Point(50, 50)
  Dim point2 As New Point(100, 25)
  Dim point3 As New Point(200, 5)
  Dim point4 As New Point(250, 50)
  Dim point5 As New Point(300, 100)
  Dim point6 As New Point(350, 200)
  Dim point7 As New Point(250, 250)
  Dim curvePoints As Point() = {point1, point2, point3, point4, _
    point5, point6, point7}

  ' Draw polygon to screen.
  e.Graphics.FillPolygon(blueBrush, curvePoints)
End Sub 
```

如[Microsoft 提供的文档中所述](http://msdn.microsoft.com/en-us/library/0df9swbe%28v=vs.90%29#Y666)。

动态创建星点的算法（在 C# 中）可能如下所示：

```
using System;
using System.Drawing;
using System.Collections.Generic;

namespace Explosion
{
    class Program
    {
        static void Main(string[] args)
        {
            foreach (Point point in CreatePointsForStarShape(15, 200, 100))
            {
                Console.WriteLine(point);
            }
            Console.ReadLine();
        }

        public static IEnumerable<Point> CreatePointsForStarShape
                  (int numberOfPoints, int maxRadius, int minRadius)
        {
            List<Point> points = new List<Point>(numberOfPoints);

            for (
                 double angle = 0.0;
                 angle < 2* Math.PI;
                 angle += 2 * Math.PI / numberOfPoints
            )
            {
                // add outer point
                points.Add(CalculatePoint(angle, maxRadius));

                // add inner point
                points.Add(CalculatePoint
                    (angle + (Math.PI / numberOfPoints), minRadius));
            }

            return points;
        }

        public static Point CalculatePoint(double angle, int radius)
        {
            return new Point(
               (int)(Math.Sin(angle) * radius),
               (int)(Math.Cos(angle) * radius)
            );
        }
    }
} 
```

这是输出...

```
{X=0,Y=200}
{X=20,Y=97}
{X=81,Y=182}
{X=58,Y=80}
{X=148,Y=133}
{X=86,Y=50}
{X=190,Y=61}
{X=99,Y=10}
{X=198,Y=-20}
{X=95,Y=-30}
{X=173,Y=-99}
{X=74,Y=-66}
{X=117,Y=-161}
{X=40,Y=-91}
{X=41,Y=-195}
{X=0,Y=-100}
{X=-41,Y=-195}
{X=-40,Y=-91}
{X=-117,Y=-161}
{X=-74,Y=-66}
{X=-173,Y=-99}
{X=-95,Y=-30}
{X=-198,Y=-20}
{X=-99,Y=10}
{X=-190,Y=61}
{X=-86,Y=50}
{X=-148,Y=133}
{X=-58,Y=80}
{X=-81,Y=182}
{X=-20,Y=97}
{X=0,Y=200}
{X=20,Y=97} 
```

您必须将其转换为 Visual Basic 并添加一些随机化以使其具有爆炸性的外观。您可以通过矩阵乘法转置（移动）和缩放点。

# ruby-on-rails - ID 列的 Rails 迁移从 1,000 开始并从那里自动递增？

> ID：12076741
> 
> 赞同：13
> 
> 时间：2012-08-22T15:41:59.453
> 
> 标签：ruby-on-rails, rails-migrations

我希望我的 Order 模型的 ID 从 1000 开始，并从那里自动递增计数。

这可以通过迁移来完成吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-22T16:09:20.240

在您的迁移中，创建表后，使用以下内容更新序列：

```
create_table :products do |t|
  t.string  :name
  # other stuff
end

# for Postgres
execute "SELECT setval('products_id_seq', 1000)"

# and for mysql ...
execute "ALTER TABLE products AUTO_INCREMENT = 1000" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:54:44.510

这尚未经过测试，我不确定您使用的是什么数据库。

```
create_table(:order, :id => false) do |t|
   t.integer :id, :options => 'PRIMARY KEY', :default => 1000 
```

或者如果您已经有表，请尝试此迁移

```
def change
  execute "ALTER TABLE orders AUTO_INCREMENT = 1000"
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-02T11:11:14.683

如果您只需要从自定义数字（比如说 1001）开始表的 ID。

而且您不确定是否要为此编写迁移，您可以在以下位置运行以下命令`rails console`：

> ActiveRecord::Base.connection.execute("SELECT setval('table_name_id_seq', 1000)"

测试对我来说效果很好。希望有帮助。

# javascript - 当有另一个参数时访问Javascript事件

> ID：12076742
> 
> 赞同：0
> 
> 时间：2012-08-22T15:42:04.317
> 
> 标签：javascript, jquery, jquery-ui, javascript-events

我正在开发一项功能，如果您单击一个模糊链接，它将在预览窗口中显示完整的描述......很像搜索引擎中的搜索结果预览，如谷歌。

我需要将完整的描述文本和事件都传递给处理函数，以便该函数知道要显示什么以及在哪里显示（在简介下）。

我的问题是我应该将什么传递给函数。目前我有以下，它不工作。

```
<a href="javascript:DisplayFullDescription('blah blah description goes here');">blurb text here</a>

function javascript:DisplayFullDescription(e, fullText){
   //find out mouse click position
   //display a preview window (div) with description there

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:03:17.877

如果您个人不使用 HTML5，我会使用 为全文创建一个隐藏元素`display:none`，我会将其作为数据分配给每个适用的元素，并使用该信息`click`

```
<a class="clickable" href="#">blurb text here<span style="display:none">blah blah description goes here</span></a>

$('a.clickable').each(function() {
    $(this).data('fulltext',$(this).find('span').remove().text());
}).click(function(event) {
    event.preventDefault();
    $('body').append('<div>'+$(this).data('fulltext')+'</div>');
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:49:20.877

`data-*`使用 jQuery 绑定事件处理程序和使用 HTML5属性来存储全文比使用属性要容易得多`onclick`。

HTML：

```
<a href="#" data-fulltext="blah blah description goes here">blurb text here</a> 
```

jQuery/JavaScript：

```
$('a').click(function(e) {
    DisplayFullDescription(e, $(this).data('fulltext'));
    e.preventDefault();
});

function DisplayFullDescription(e, fullText){
    //find out mouse click position
    //display a preview window (div) with description there
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T15:51:55.460

```
<a id="someID" href="#" data-fulltext="blah blah description goes here">blurb text here</a>
<script>
var element = document.getElementById('someID'); // grab the element by id. (simple for this demo)
element.onclick = DisplayFullDescription; // attach the event handler to the onclick function

function DisplayFullDescription(e) { // because we attached the handler above the Event is passed as the first argument to the function (handler) 
    var description = this.getAttribute('data-fulltext'); // 'this' now references the element in which the onclick was invoked. 
    alert(description);
}
</script> 
```

您可以在上面尝试一下，看看它是否满足您的需求。

注意事项：
- 这不需要 jQuery 库来运行（仅使用它会过大）
- 这将跨浏览器（旧的和现代的）工作
- 这与 HTML5 无关（这很酷......但是再次，过度杀伤和限制）
- data-* 可以使用 getAttribute() 访问，并且不依赖于 element.dataset 可用。

但是，阅读更多有关[事件的信息会对您有所帮助](https://developer.mozilla.org/en-US/docs/DOM/event)

# cucumber - 您应该以 BDD 方式进行测试，还是以 Gui 测试方式进行测试？

> ID：12076758
> 
> 赞同：1
> 
> 时间：2012-08-22T15:43:03.320
> 
> 标签：cucumber, bdd, specflow, gui-testing

我试图了解您何时应该通过**BDD**（例如 cucumber/specflow）进行测试，以及何时应该直接测试您的**gui**。

例如，测试“ **AdminHelp**按钮只能由管理员看到”。

此管理按钮位于特定页面上。我是否应该以 BDD 方式对其进行测试（即：

1.  当管理员登录时
2.  然后他看到 AdminHelp 按钮

或者

编写一个单元测试，将 current_user 设置为管理员用户，并测试模板呈现的 html 是否包含 AdminHelp 按钮。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T23:48:50.483

Specflow 是一种自动化工具，但它的工作级别比 Selenium 或 Microsoft UI 自动化更高。您通常会使用它来描述用户使用应用程序的场景。例如：

```
Given Andy Admin is an administrator
When he logs in
Then he should be taken to the admin home page.

Given Andy Admin is on the admin home page
When he wants help
Then he should be directed to the admin manual. 
```

请注意，我没有在其中任何地方提到管理员帮助按钮。安迪可以很容易地向秘书寻求帮助！我们根据系统提供的功能以*声明*方式描述这些步骤。这就是 BDD 的风格。

然后，Specflow 将 Given、When 和 Then 短语映射到代码步骤。在代码中，您可以使用自动化工具来实际单击按钮。但是，使用业务用来描述系统功能的相同语言更易于维护；因为那样的话，如果 UI 发生变化，您只需要更改 1 个步骤而不是 15 多个场景。

此外，在场景中使用高级语言往往会保持业务兴趣，这意味着与他们就这些场景进行*对话要容易得多。*对话是 BDD 的核心，我建议从那里开始，然后再担心如何进行自动化部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-04T20:19:13.183

您应该这样做，因为这是 UI/UX 验收标准的一部分。你可以用 BDD 的方式来做。您可以在不同的抽象级别使用 cucumber/specflow。

# sql - CPanel：用户'root'@'localhost'的访问被拒绝（使用密码：否）

> ID：12076764
> 
> 赞同：0
> 
> 时间：2012-08-22T15:43:20.670
> 
> 标签：sql, cpanel

我一遍又一遍地遇到这个错误。我正在使用CPanel。

```
Connection failed: SQLSTATE[28000] [1045] Access denied for user 'root'@'localhost' (using password: NO) 
```

我在连接文件中的代码：

```
$dsn = 'mysql:dbname=mydomain_xxx;host=localhost';
$user = 'mydomain_yyy';
$password = 'password'; 
```

# javascript - 经典asp下拉列表中的选项值

> ID：12076766
> 
> 赞同：0
> 
> 时间：2012-08-22T15:43:24.660
> 
> 标签：javascript, asp-classic, vbscript

需要帮忙

我有以下带有经典asp的代码

```
<select name="state" id="state">
    <option value="NJ">New Jersey</option>
</select> 
```

现在我在输入数据库时​​只想要“NJ”而不是“New Jersey”，但它正在存储“New Jersey”。

在回发中的提交按钮上，我正在尝试使用

```
if gAspClassUtil.isSubmitted("submit") then
     Selectedstate = Request.form("state")
end if 
```

但此时“Selectedstate”中的值是“New Jersey”而不是“NJ”

请建议我如何从经典 asp 的下拉列表中读取选项“VALUE”而不是“TEXT”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:22:59.040

你所说的根本不会发生。

如果标签`value`中有属性`option`，则该值将以表单数据而不是文本形式发送。

该`Request.Form`集合仅包含发布到服务器的数据。只有值（如果存在）被发送到服务器，选项中的文本甚至不可能从表单数据中获取。

需要检查的一些事项：

*   元素是否`select`实际在`form`发布的元素内。
*   提交表单时没有 Javascript 会更改表单数据（例如，从所选选项中获取文本并放入表单中的隐藏字段）。
*   HTML 代码在浏览器中实际上看起来像这样。（使用查看源代码。）
*   您显示的代码实际上是运行的代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-27T10:58:50.130

在 asp.net 中，下拉列表在服务器上运行，
但标签是 html 标签，不在服务器中运行。所以不存在回发的情况。
因此，您可以在 html 标记中使用 onchange 属性，也可以使用提交按钮，您可以在提交后请求。

# c# - 在 WCF 4.5 中无法访问 ADFS 2.0 声明

> ID：12076767
> 
> 赞同：1
> 
> 时间：2012-08-22T15:43:26.130
> 
> 标签：c#, wcf, visual-studio-2012, wif, adfs2.0

我一直在为外部用户开发一个 POC，以使用带有用户名/密码的 ADFS 2.0 对 WCF 服务进行身份验证。

我将客户端配置为使用 https:///adfs/services/trust/13/username 和 TransportWithMessageCredentail 的安全模式。几天后，我的身份验证工作正常，STS 正在发布令牌。当颁发带有声明的令牌时，我能够在服务器上看到成功事件。但是，一旦我尝试从服务上下文中访问声明，它就会显示为空。我已打开所有跟踪，但没有看到跟踪文件中列出的任何错误。我在 Visual Studio 2012 中使用 ADFS 2.0 和 WIF 4.5。

我计划使用后端属性 SQL 存储来提取信息，因此我计划将所有内容都保留在内部，但我发现的每个示例都是集成 Azuer ACS。一旦我有了声明，我将在服务逻辑中决定如何处理呼叫。

有没有人看到我做错了什么或者有不同方法的建议。

**客户端应用程序.confg**

```
<bindings>
            <customBinding>
                <binding name="WS2007FederationHttpBinding_IDataServices">
                    <security defaultAlgorithmSuite="Default" authenticationMode="SecureConversation"
                        requireDerivedKeys="true" includeTimestamp="true" messageSecurityVersion="WSSecurity11WSTrust13WSSecureConversation13WSSecurityPolicy12BasicSecurityProfile10"
                        requireSignatureConfirmation="false" canRenewSecurityContextToken="true">
                        <secureConversationBootstrap defaultAlgorithmSuite="Default"
                            authenticationMode="IssuedTokenForSslNegotiated" requireDerivedKeys="true"
                            includeTimestamp="true" messageSecurityVersion="WSSecurity11WSTrust13WSSecureConversation13WSSecurityPolicy12BasicSecurityProfile10"
                            requireSignatureConfirmation="true">
                            <issuedTokenParameters keySize="256">
                                <additionalRequestParameters>
                                    <trust:SecondaryParameters xmlns:trust="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
                                        <trust:KeyType xmlns:trust="http://docs.oasis-open.org/ws-sx/ws-trust/200512">http://docs.oasis-open.org/ws-sx/ws-trust/200512/SymmetricKey</trust:KeyType>
                                        <trust:KeySize xmlns:trust="http://docs.oasis-open.org/ws-sx/ws-trust/200512">256</trust:KeySize>
                                        <trust:KeyWrapAlgorithm xmlns:trust="http://docs.oasis-open.org/ws-sx/ws-trust/200512">http://www.w3.org/2001/04/xmlenc#rsa-oaep-mgf1p</trust:KeyWrapAlgorithm>
                                        <trust:EncryptWith xmlns:trust="http://docs.oasis-open.org/ws-sx/ws-trust/200512">http://www.w3.org/2001/04/xmlenc#aes256-cbc</trust:EncryptWith>
                                        <trust:SignWith xmlns:trust="http://docs.oasis-open.org/ws-sx/ws-trust/200512">http://www.w3.org/2000/09/xmldsig#hmac-sha1</trust:SignWith>
                                        <trust:CanonicalizationAlgorithm xmlns:trust="http://docs.oasis-open.org/ws-sx/ws-trust/200512">http://www.w3.org/2001/10/xml-exc-c14n#</trust:CanonicalizationAlgorithm>
                                        <trust:EncryptionAlgorithm xmlns:trust="http://docs.oasis-open.org/ws-sx/ws-trust/200512">http://www.w3.org/2001/04/xmlenc#aes256-cbc</trust:EncryptionAlgorithm>
                                    </trust:SecondaryParameters>
                                </additionalRequestParameters>
                                <issuer address="https://<adfs>/adfs/services/trust/13/usernamemixed"
                                    binding="ws2007HttpBinding" bindingConfiguration="https://<adfs>/adfs/services/trust/13/usernamemixed" />
                            </issuedTokenParameters>
                            <localClientSettings detectReplays="true" />
                            <localServiceSettings detectReplays="true" />
                        </secureConversationBootstrap>
                        <localClientSettings detectReplays="true" />
                        <localServiceSettings detectReplays="true" />
                    </security>
                    <textMessageEncoding />
                    <httpTransport />
                </binding>
            </customBinding>
            <ws2007HttpBinding>
                <binding name="https://<adfs>/adfs/services/trust/13/usernamemixed">
                    <security mode="TransportWithMessageCredential">
                        <transport clientCredentialType="None" />
                        <message clientCredentialType="UserName" establishSecurityContext="false" />
                    </security>
                </binding>
            </ws2007HttpBinding>
        </bindings>
        <client>
            <endpoint address="http://localhost:62838/DataServices.svc" binding="customBinding"
                bindingConfiguration="WS2007FederationHttpBinding_IDataServices"
                contract="ServiceReference1.IDataServices" name="WS2007FederationHttpBinding_IDataServices">
                <identity>
                  <dns value="adfs.server"/>
                </identity>
            </endpoint>
        </client> 
```

**服务配置**

```
<configuration>
  <configSections>
    <section name="system.identityModel" type="System.IdentityModel.Configuration.SystemIdentityModelSection, System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
  </configSections>
  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
    <add key="ValidationSettings:UnobtrusiveValidationMode" value="WebForms" />
    <add key="ida:FederationMetadataLocation" value="https://<advs>/FederationMetadata/2007-06/FederationMetadata.xml" />
    <add key="ida:ProviderSelection" value="productionSTS" />
  </appSettings>
  <location path="FederationMetadata">
    <system.web>
      <authorization>
        <allow users="*" />
      </authorization>
    </system.web>
  </location>
  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime requestValidationMode="4.5" targetFramework="4.5" encoderType="System.Web.Security.AntiXss.AntiXssEncoder, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
    <pages controlRenderingCompatibilityVersion="4.5" />
    <machineKey compatibilityMode="Framework45" />

  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="">
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
          <serviceSecurityAudit auditLogLocation="Application" serviceAuthorizationAuditLevel="Failure" messageAuthenticationAuditLevel="Failure" suppressAuditFailure="true" />
          <serviceCredentials useIdentityConfiguration="true">
            <clientCertificate>
              <authentication certificateValidationMode="None" revocationMode="NoCheck" />
            </clientCertificate>
            <serviceCertificate findValue="8054B36FA61FB4AA53CD8C6F9575E1192C2B3151" storeLocation="LocalMachine" storeName="My" x509FindType="FindByThumbprint" />
          </serviceCredentials>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" minFreeMemoryPercentageToActivateService="0" />
    <protocolMapping>
      <add scheme="http" binding="ws2007FederationHttpBinding" />
    </protocolMapping>
    <bindings>
      <ws2007FederationHttpBinding>
        <binding name="">
          <security mode="Message">
            <message>
              <claimTypeRequirements>
                <add claimType="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name" isOptional="true" />
                <add claimType="http://schemas.microsoft.com/ws/2008/06/identity/claims/role" isOptional="true" />
              </claimTypeRequirements>
              <issuerMetadata address="https://<adfs>/adfs/services/trust/mex" />
            </message>
          </security>
        </binding>
      </ws2007FederationHttpBinding>
    </bindings>
  </system.serviceModel>
  <system.identityModel>
    <identityConfiguration>
      <audienceUris mode="Never">
      </audienceUris>
      <issuerNameRegistry type="System.IdentityModel.Tokens.ConfigurationBasedIssuerNameRegistry, System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
        <trustedIssuers>
          <add thumbprint="8054B36FA61FB4AA53CD8C6F9575E1192C2B3151" name="http://<adfs>/adfs/services/trust" />
        </trustedIssuers>
      </issuerNameRegistry>
    </identityConfiguration>
  </system.identityModel>
  <system.diagnostics>
    <sources>
      <source name="System.ServiceModel" switchValue="Information, ActivityTracing" propagateActivity="true">
        <listeners>
          <add name="xml" />
        </listeners>
      </source>
      <source name="System.ServiceModel.MessageLogging">
        <listeners>
          <add name="xml" />
        </listeners>
      </source>
      <source name="myUserTraceSource" switchValue="Information, ActivityTracing">
        <listeners>
          <add name="xml" />
        </listeners>
      </source>
    </sources>
    <sharedListeners>
      <add name="xml" type="System.Diagnostics.XmlWriterTraceListener" initializeData="Traces1.svclog" />
    </sharedListeners>
  </system.diagnostics>
</configuration> 
```

**服务逻辑**

```
IList<string> Names = new List<string>();

        Names.Add(Thread.CurrentPrincipal.Identity.Name.ToString());  //  returns ""         
        Names.Add(ServiceSecurityContext.Current.PrimaryIdentity.Name.ToString()); //  returns ""
        Names.Add(ServiceSecurityContext.Current.WindowsIdentity.Name.ToString()); //  returns ""

        var principal = ClaimsPrincipal.Current;

        foreach (var claim in principal.Claims)
        {
            Names.Add(claim.Subject.ToString());
        }

        return Names; 
```

**客户端逻辑**

```
static void Main(string[] args)
    {

        ServiceReference1.DataServicesClient client = new ServiceReference1.DataServicesClient();

        client.ClientCredentials.UserName.UserName = @"UserName";
        client.ClientCredentials.UserName.Password = @"Password";
        client.ChannelFactory.Credentials.SupportInteractive = false;

        var test = client.DoWork("Test");

        ............... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:29:13.130

好吧，经过大量摆弄和更改安全设置后，我让每个人都玩得很好。

我发现服务中缺少的主要设置`web.config`是：

```
serviceAuthorization principalPermissionMode="Always" 
```

大多数其他设置用于传输和消息安全。

# xquery - 如何使用 MarkLogic xquery 来判断文档是否在“内存中”

> ID：12076771
> 
> 赞同：2
> 
> 时间：2012-08-22T15:43:36.740
> 
> 标签：xquery, marklogic

我想知道一个 XML 文档是否已经构建（例如使用`xdmp:unquote`）或已从数据库中检索。我尝试过的一种方法是检查 document-uri 属性

```
declare variable $doc as document-node() external;

if (fn:exists(fn:document-uri($doc))) then
  'on database'
else
  'in memory' 
```

这似乎工作得很好，但我在 MarkLogic 文档中看不到任何保证这一点的东西。这种方法可靠吗？我应该使用其他一些技术吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T00:26:20.750

我认为这种行为已经稳定了一段时间。您也可以随时检查 URI，只要您希望它来自当前数据库：

```
xdmp:exists(fn:doc(fn:document-uri($doc))) 
```

或者，如果您在更新上下文中并且需要 ACID 保证，请使用`fn:exists`.

真正的测试是尝试调用`xdmp:node-replace`或类似的方法，并捕获预期的错误。那些节点级别的更新函数不适用于构造的节点。但这需要更新上下文，并且可能很难以稳健的方式实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-08T14:28:36.613

如果你的 XML 文档是`in-memeory`，你可以使用`in-mem-update`API

`import module namespace mem = "http://xqdev.com/in-mem-update" at "/MarkLogic/appservices/utils/in-mem-update.xqy";`

如果您的 XML 文档存在于您的数据库中，您可以使用`fn:exists()`或`fn:doc-available()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-23T12:45:42.670

In-memory 或 In-Db 的真正测试是**xdmp:node-replace**。

如果您能够替换、更新、删除一个节点，那么它在数据库中，否则如果它抛出异常，那么它不在数据库中。

现在有两种情况

**1.您的文档根本没有创建：** 您可以使用`fn:empty()`它来检查它是否已创建。

**2\. 您的文档已创建并在内存中：** 如果`fn:empty()`返回 false 并且 xdmp:node-replace 抛出异常，则它在内存中

# liferay - Open Cmis API 无法访问 Alfresco 的“继承父空间权限”

> ID：12076776
> 
> 赞同：2
> 
> 时间：2012-08-22T15:43:50.477
> 
> 标签：liferay, acl, alfresco, cmis

我正在开发一个类似于“文档和媒体”的 Liferay Portlet，它连接到一个 Alfresco 存储库，并使用 apache chemistry open cmis API 与存储库项进行交互。

我几乎完成了通过 ACE 应用权限的工作，但我遇到了一个主要问题，即处理 alfresco 的“继承父空间权限”功能，该功能将父文件夹的属性传播给所有子文件夹。cmis 似乎不支持此功能，但我必须找到一种方法从 liferay 编辑此属性。

尽管没有任何可用的高级 API 来编辑此属性，但我想我可以通过使用 Alfresco 的 REST API 来解决问题。也许做这样的事情[。](https://forums.alfresco.com/en/viewtopic.php?f=27&t=45182)

但在这样做之前，我想确保没有其他方法可以做到这一点。我的意思是，这是这里缺少的一个非常重要的功能。如果我理解正确，如果您无法访问该属性，您可以选择：

1.  禁用所有项目的继承，并失去继承和 ACL 传播的好处。

2.  或者为所有空间启用继承，并且由于 ACL 的工作方式类似于授予规则（而不是限制规则），因此当您在存储库中更深入地导航时，子资源的限制总是更少。这样，您最终将所有受限资源都非常接近“公司主页”空间，并将高可用性资源置于存储库空间结构的非常深处。

3.  或者启用继承，并且每次您想从子资源中删除单个权限时，从另一个较低级别的 API 调用 alfresco，禁用继承（并丢失所有传播的 ACE，无论是否需要），然后添加再次是必要的王牌。

这对我来说听起来不合理，所以我真的担心我在这里遗漏了一些东西，比如一个主要的高级 API 功能。有人可以告诉我我是否走在正确的轨道上，以及较低级别的 API 调用是否是唯一可用的选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:56:34.447

CMIS 不支持更改 ACL 继承设置。您可以确定继承了哪些 ACE，但不能打开和关闭继承。您必须编写自己的 Web 脚本并从您的 portlet 中调用它。

# mysql - 匹配“foo.bar”（句号/句号）

> ID：12076780
> 
> 赞同：2
> 
> 时间：2012-08-22T15:43:55.547
> 
> 标签：mysql, match-against

我可以在/`foo`中使用 match来搜索行：`bar``col1``col2`

```
SELECT col1, col2
FROM some_table
WHERE MATCH (col1,col2)
      AGAINST ('+foo +bar' IN BOOLEAN MODE); 
```

但是假设我想搜索确切的短语**“foo.bar”** *（中间有句号）*。在[Boolean Full-Text Searches 的文档页面上](http://dev.mysql.com/doc/refman/5.6/en/fulltext-boolean.html)，它没有提到句号是运算符，所以我想我可以使用：

```
AGAINST ('+foo.bar' IN BOOLEAN MODE); 
```

但是，这将返回与以下相同的结果：

```
AGAINST ('+foo.couldBeAnything' IN BOOLEAN MODE);
AGAINST ('+foo' IN BOOLEAN MODE);
AGAINST ('+foo.*' IN BOOLEAN MODE); #Note you would expect this to look for instances of foo. followed by something, rather than just the same as foo 
```

.

为什么这不像我预期的那样工作？我该如何匹配 for `foo.bar`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:48:25.603

我没有现成的全文表来测试这一点，但我相信这应该可行：

```
SELECT col1, col2
FROM some_table
WHERE MATCH (col1,col2)
    AGAINST ('+\"foo.bar\"' IN BOOLEAN MODE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T16:02:01.017

要完成这项工作，您需要用双引号将您的文字括起来：**"bar.foo"**，因为该点*可能等同*于**or**运算符。

# java - 使用 HttpResponseInterceptor 操作响应

> ID：12076783
> 
> 赞同：1
> 
> 时间：2012-08-22T15:44:05.530
> 
> 标签：java, httpclient, apache-httpclient-4.x

使用 Apache HttpClient，可以通过添加`HttpResponseIntercepter`. 有了这个，添加标题属性就很容易了。但是如何操作检索到的`HttpEntity`s的内容呢？

例如，我喜欢将所有文本转换为大写。

```
@Test
public void shoudConvertEverythingToUpperCase() throws ClientProtocolException, IOException
{
    final DefaultHttpClient defaultHttpClient = new DefaultHttpClient();

    defaultHttpClient.addResponseInterceptor(new HttpResponseInterceptor() {

        @Override
        public void process(final HttpResponse response, final HttpContext context) throws HttpException, IOException
        {
            final HttpEntity entity = response.getEntity();

            final HttpEntity upperCaseEntity = makeAllUppercase(entity);

            response.setEntity(upperCaseEntity);
        }

        private HttpEntity makeAllUppercase(final HttpEntity entity)
        {
            // how to uppercase everything and return the cloned HttpEntity
            return null;
        }
    });

    final HttpResponse httpResponse = defaultHttpClient.execute(new HttpGet("http://stackoverflow.com"));

    assertTrue(StringUtils.isAllUpperCase(EntityUtils.toString(httpResponse.getEntity())));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T15:44:14.440

```
private HttpEntity makeAllUppercase(final HttpEntity entity)
{
    Header h = entity.getContentType();
    ContentType contentType = h != null ? ContentType.parse(h.getValue()) : ContentType.DEFAULT_TEXT;
    String content = EntityUtils.toString(entity, contentType.getCharset());
    return new StringEntity(content.toUpperCase(Locale.US), contentType);
} 
```

由于内存中内容的中间缓冲，这不是最有效的，而是最简洁的实现。

# c - 如何从 C 代码中找到 kernel.shmmax 的值

> ID：12076785
> 
> 赞同：1
> 
> 时间：2012-08-22T15:44:07.207
> 
> 标签：c, ubuntu, centos, shared-memory, sysctl

我想在 C 代码中获取 kernel.shmmax 的值（我使用 shell 命令“$ sysctl -q kernel.shmmax”在 centos5.0、centos6.0 和 ubuntu10.04 上查询）。

我使用以下代码找到它：

```
#include <sys/sysctl.h>

const int SHM_ERROR=1;

main(){
    int name[] = {KERN_SHMMAX};
    int namelen = 1;
    int oldval[1];
    size_t oldlen = sizeof(oldval);
    int rv = sysctl(name, namelen, (void*) oldval, &oldlen, NULL, 0);
    if (rv!=0) {
        fprintf(stderr, "while quering for shared memory size, sysctl returned error: %s\n", strerror(errno));
        return SHM_ERROR;
    }
    else{
        return 0;
    }
} 
```

运行上面的代码后，我收到以下错误：

查询共享内存大小时，sysctl 返回错误：不是目录

我对为什么会收到此错误一无所知。我搜索了一下，发现库试图查看的路径存在一些问题。

我尝试使用 GDB 运行上述代码，但代码没有进入函数 sysctl，否则我可以为您提供更多信息。

数据点：我可以使用以下命令轻松地在所有提到的操作系统上从命令行设置和获取 kernel.shmmax：

$ sysctl -q kernel.shmmax

$ sysctl -w kernel.shmmax=1000000000

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T15:55:15.387

您不应该`sysctl`从用户空间代码调用。从`man`页面：

> Glibc 没有为这个系统调用提供包装器；使用 syscall(2) 调用它。
> 
> 或者更确切地说......不要调用它：长期以来一直不鼓励使用这个系统调用，而且它是如此不受欢迎，以至于**它很可能在未来的内核版本中消失**。立即将其从您的程序中删除；请改用 /proc/sys 接口。

所以试试这个：

```
#include <stdio.h>                                                                                                                  

#define SHMMAX_SYS_FILE "/proc/sys/kernel/shmmax"

int main(int argc, char **argv)
{
    unsigned int shmmax;
    FILE *f = fopen(SHMMAX_SYS_FILE, "r");

    if (!f) {
        fprintf(stderr, "Failed to open file: `%s'\n", SHMMAX_SYS_FILE);
        return 1;
    }

    if (fscanf(f, "%u", &shmmax) != 1) {
        fprintf(stderr, "Failed to read shmmax from file: `%s'\n", SHMMAX_SYS_FILE);
        fclose(f);
        return 1;
    }

    fclose(f);

    printf("shmmax: %u\n", shmmax);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T20:36:40.827

我安装 strace 并看到 sysctl 使用 open() 调用而不是 _sysctl() 调用或 syscall() 调用查看 /proc/sys/kernel/shmmax。

# windows - Visual Studio 2010 中的编程数据断点

> ID：12076786
> 
> 赞同：9
> 
> 时间：2012-08-22T15:44:09.063
> 
> 标签：windows, visual-studio-2010, x86-64, seh

我一直在尝试使用编程数据断点，[`CBreakpoint`](http://www.morearty.com/code/breakpoint/)例如示例，通过使用[`SetThreadContext`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680632.aspx)直接设置调试寄存器。我能找到的大多数参考资料表明，Visual Studio 在遇到数据断点时仍然会中断，即使它本身没有设置该数据断点。但是，这似乎不是 Visual Studio 2010 的工作方式。

我的情况是，当程序没有被调试时，我的数据断点工作得很好（它崩溃了`STATUS_SINGLE_STEP`，这是数据断点引发的异常）。如果我使用 WinDbg 进行调试，它也会正常中断。但是当在 Visual Studio 2010 下调试它时，它似乎只是继续运输并忽略断点。有没有人在 Windows 7 下的 Visual Studio 2010 下使用以编程方式设置的数据断点的经验？我需要对它们做些什么来破坏它们吗？（我尝试添加`STATUS_SINGLE_STEP`到“第一次机会例外”列表中，但行为没有改变。）

或者，我可能会做些什么来吞下`STATUS_SINGLE_STEP`调试器中的异常？结构化异常处理程序会在调试器看到异常之前吃掉它吗？这是一个 x86_64 程序这一事实有什么影响吗？在 Visual Studio 2010 设置中我需要做一些舞蹈吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:07:42.810

做了一些测试，在 win7 x64 上获得了 VS 2010 SP1 Ultimate，使用 32 位二进制文​​件在硬件断点上正确中断（有和没有 SEH）。然而，当使用 64 位二进制文​​件时，它不会捕获单个步骤（我必须更改一些类型才能让它编译）。

再深入一点，似乎 VS 表现得很奇怪，因为虽然它没有捕获单个步骤，但我无法让它正确地跨过一段将触发硬件断点的代码。

我感觉库没有正确设置 x64 下的 DR 寄存器，这可能是为了`SetThreadContext`对 x64 进行更改。

## 更新

再摆弄一下，我注意到您正在使用的库在设置或获取线程上下文之前不会暂停线程，[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679362%28v=vs.85%29.aspx)说这是一个很大的 NO-NO：

> 您无法获得正在运行的线程的有效上下文。在调用 GetThreadContext 之前，使用 SuspendThread 函数挂起线程。

但是，即使使用[另一个](http://www.codeproject.com/Articles/28071/Toggle-hardware-data-read-execute-breakpoints-prog)确实挂起目标线程并正确执行其所有调用而没有错误的库，仍然不会让 VS 捕获 BP，这让我认为不仅您使用的库有问题，而且 VS 的 x64 调试器也是越野车。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-09T20:31:41.143

您是否为您的项目启用了混合（本机和托管）调试？我去了项目属性->配置属性->调试器->调试类型设置为“混合”

在这里找到了这个答案： [https ://social.msdn.microsoft.com/Forums/windowsserver/en-US/47ebd835-e538-4ff6-8c91-df45bd46d548/vc-express-2012-x64-clr-breakpoint-not-hit -no-executable-associated-static-library?forum=windbg](https://social.msdn.microsoft.com/Forums/windowsserver/en-US/47ebd835-e538-4ff6-8c91-df45bd46d548/vc-express-2012-x64-clr-breakpoint-not-hit-no-executable-associated-static-library?forum=windbg)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-01T02:06:03.630

有一个名为的函数`DebugBreak()`，您可以使用它以编程方式中断您在 MSVC 2010 下的执行，但它会在`DebugBreak`（反汇编代码）内部停止。因此，如果您只想中断代码使用，`__asm int 3`这非常简单，并且可以在所有与英特尔兼容的 CPU 中使用。

还有一个注意在运行时使用`IsDebuggerPresent()`或`DebugBreak()`避免`__asm int 3`运行时错误（当然你已经知道了！:)）

# php - 如何使用 heatmap.js 保存由 canvas 标签生成的图像文件？

> ID：12076791
> 
> 赞同：7
> 
> 时间：2012-08-22T15:44:43.993
> 
> 标签：php, javascript, html, canvas, png

如何将生成的画布 heatmap.js 保存为图像？

我一直在用 toDataURL() 进行测试，但我不能。

保存在服务器上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:07:04.910

正如 garmur[在这里](https://stackoverflow.com/questions/12076791/how-i-can-save-the-image-file-generated-by-canvas-tag-with-heatmap-js#comment16159185_12080033)评论的那样，您可以将数据 URL 作为`img`元素的源，例如：

```
//assume you have the data URL in variable "url"
document.getElementById("myImage").src=url; 
```

使用这样的 HTML 标签：

```
<img id="myImage"></img> 
```

然后图像将包含一个（至少在 Chrome 中是这样的）PNG 版本`canvas`的数据 URL 生成时的内容。

附带说明：它们实际上被称为[data URI](http://en.wikipedia.org/wiki/Data_URI_scheme)而不是 URL，但 javascript 函数实际上是`.toDataURL()`. 奇怪的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:22:42.573

有什么问题？

```
var heatmap1 = h337.create({"element":document.getElementById("heatmapArea"), "radius":25, "visible":true});
var url = heatmap1.get("canvas").toDataURL(); 
```

似乎工作得很好

# c - C中的指针问题

> ID：12076800
> 
> 赞同：2
> 
> 时间：2012-08-21T20:37:23.320
> 
> 标签：c, pointers

在这段代码中，依赖于`gdb`，`p`从分配`0x602010`到`0x0` 何时更改`NULL`，（如我所料）

```
#include<stdio.h>
#include<stdlib.h>

int main()
{
    int a = 10;

                        // gdb output
    int *p = (int *) malloc(sizeof(int));   // p = (int *) 0x602010
    p = NULL;               // p = (int *) 0x0
    p = &a;                 // p = p = (int *) 0x7fffffffe15c           

    return 0;
} 
```

但是，当在 in`p`之外更改时，我想它不会更改为，我不知道为什么：`main()``task()``0x0`

```
#include<stdio.h>
#include<stdlib.h>

void tast(int *p);

void task(int *p)
{

/*
 before
 (gdb) p p
 $1 = (int *) 0x7fffffffe15c         (same as variable a)
 (gdb) p &p
 $2 = (int **) 0x7fffffffe128
*/

    p = NULL;

/*
 after
 (gdb) p p
 $3 = (int *) 0x7fffffffe15c        no change?
 (gdb) p &p
 $4 = (int **) 0x7fffffffe128
*/    
}

int main()
{
    int a = 10;

                        // gdb output
    int *p = (int *) malloc(sizeof(int));   // p = (int *) 0x602010
    p = NULL;               // p = (int *) 0x0
    p = &a;                 // p = p = (int *) 0x7fffffffe15c

    // it is possible to change what p points to 
    // after calling task()?
    task(p);

    // p will be NULL?          

    return 0;
} 
```

为什么 p 在 task() 中没有变为 0x0？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:50:34.240

指针是一个值，就像一个`int`. 可以这样想：如果你传入一个`int`in`task()`并在函数内部改变它`task`会期望它改变吗？不，因为变量是按值传递的。

当您调用时，`task`您将值的副本（在本例中为指针）传递给函数。您要做的是更改指针的值，这意味着您需要一个指向存储值的位置的指针。这是一个指向指针的指针，`int **`.

反而：

```
void task(int **p)
{
   *p = NULL;
} 
```

和

```
task(&p); 
```

传递的*位置*。`p *`

另一个例子，这次使用`int`，这可能会更清楚。

```
void makeTen(int *valuePointer)
{
    // Change the variable that valuePointer is pointing to. 
    *valuePointer = 10; 
}

void demoFunction()
{
    int x = 5;

    // x == 5

    // Call this with a pointer to the variable X.
    // We are passing the memory address of the variable x.
    makeTen(&x);

    // x == 10

} 
```

如果您了解这一点，请更改`int`为 be `int *`，您将了解您原来的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:51:44.823

在第一个片段中，当您将 NULL 分配给 malloc 的指针时，您正在泄漏内存。

在第二个片段中，您通过指针的值传递指针。所以这些变化不会反映在 main.js 中。[这说明了问题。](http://c-faq.com/ptrs/passptrinit.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T15:51:05.583

如果您`p == NULL`在传递指针后期望在 main 中，则需要将指针传递给该指针。例如

```
void task(int** p)
{
  *p = NULL;
} 
```

并通过

```
task(&p); 
```

此外，您应该注意此代码泄漏。你应该在调用`free(p)`之前设置。`p = NULL``malloc`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T15:51:17.180

因为你弄错了指针地址和它指向的对象。

```
void task(int *p)
{
    p = NULL; 
} 
```

此函数将采用指向 int 的指针，因此，您可以修改存储在其他位置的 int 值。不过，您的 int 值的变量地址是按值传递的。这意味着，地址存储在本地。将“NuLL”分配给局部变量不是您想要的。

如果你把它改成这样：

```
void task(int **p)
{
    *p = NULL; 
} 
```

您将获取指向 int 的指针的指针。现在地址也被指向了，你可以从你的代码中改变它。必须通过引用传递指向 int 的指针（这是您的情况）。

# android - 有没有办法验证功能和促销图片是否可以在 Google Play 上发布 Android 应用程序（通过开发人员控制台）

> ID：12076803
> 
> 赞同：0
> 
> 时间：2012-08-22T15:45:31.903
> 
> 标签：android, google-play

有没有一种方法可以在 Google Play 开发者控制台上预先验证（在实际上传 APK 之前）图像 - 促销图像、特色图像、屏幕截图符合其规范（无 alpha、无出血、32 位 png 或 jpeg 等）。我有由第 3 方创建的图像，我想确保 Google Play 在上传我的应用程序时会接受它。

目前它不会让我只上传图片，除非我上传 .apk 文件。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:49:52.000

1.  创建一个android apk，在发布时签名。（Android SDK提供的Hello World项目）
2.  将其上传到控制台并测试您的图像。
3.  之后删除。

# javascript - target="_blank" 带有自定义 javascript 生成的 html 页面

> ID：12076812
> 
> 赞同：0
> 
> 时间：2012-08-22T15:46:10.247
> 
> 标签：javascript, html

我有一个代码高亮块，我希望有一个选项，您可以单击一个按钮并打开一个新的 HTML 页面，在其中显示突出显示的“原始”内容。我已经准备好原始形式的代码和使用 target="_blank" 准备的链接，但我似乎无法打开一个新页面。

这是我的 HTML 的样子：

```
<a href="#" target="_blank">Click to view HTML</a> 
```

这是我的 javascript

```
//when clicked
link.href = 'javascript:document.write("...");';
//the click event should continue as normal 
```

这应该会打开一个以“...”为内容的新页面，但它不起作用（它只是打开现有页面）。

在不使用弹出窗口的情况下有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T15:52:45.707

```
function writeToWindow(content) {
    var newWin = window.open('','newWin','width=300,height=200');
    newWin.document.open();
    newWin.document.writeln("<html><head><title>Console</title></head><body>" + content + "</body></html>");
    newWin.document.close();
} 
```

称它为

```
onclick="writeToWindow('text to display');" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:56:08.793

您必须使用新窗口吗？我认为使用图层更容易。

```
<div id="toggleText" style="border:solid black 1px; display:none;height:100px;width:100px">
<span id="displayText"></span>
</div>

<script language="javascript"> 
func tion toggle() {
    var ele = document.getElementById("toggleText");
    var text = document.getElementById("displayText");
    if(ele.style.display == "block") {
            ele.style.display = "none";
        text.innerHTML = "show";
    }
    else {
        ele.style.display = "block";
        text.innerHTML = "hide";
    }
} 
    </script> 
```

# ios - iOS - 播放多个视频

> ID：12076815
> 
> 赞同：0
> 
> 时间：2012-08-22T15:46:17.767
> 
> 标签：ios, cocoa-touch, video, video-streaming

我正在将此代码与 MediaPlayer 框架一起使用来播放视频：

```
-(void)GrommeVideoExcerpt1
{
NSURL *url1 = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                     pathForResource:@"GrommeVideoExcerpt1" ofType:@"mp4"]];
grommePlayer1 =  [[MPMoviePlayerController alloc]
                  initWithContentURL:url1];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(moviePlayBackDidFinish:)
                                             name:MPMoviePlayerPlaybackDidFinishNotification
                                           object:grommePlayer1];

grommePlayer1.controlStyle = MPMovieControlStyleDefault;
grommePlayer1.shouldAutoplay = YES;
[self.view addSubview:grommePlayer1.view];
[grommePlayer1 setFullscreen:YES animated:YES];
} 
```

但是当我播放一个视频，然后导航到另一个视频并尝试播放时，应用程序崩溃了。它给了我这个错误：

[http://pastebin.com/nUGLXEAi](http://pastebin.com/nUGLXEAi)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:09:48.320

这里的问题是您正在添加视频播放结束时的通知，并且该通知会触发您没有的方法 ( `moviePlayBackDidFinish:`) 导致崩溃。

您可以实现此方法或删除通知，这取决于您在视频播放完毕后要执行的操作，即删除播放视频的 viewController 等。

```
//Register notification
[[NSNotificationCenter defaultCenter] addObserver:self
                                     selector:@selector(moviePlayBackDidFinish:)
                                         name:MPMoviePlayerPlaybackDidFinishNotification
                                       object:nil];
//Then the method ...
-(void) moviePlaybackDidFinish:(NSNotification *)aNotification{
  [grommePlayer1.view removeFromSuperview];
  grommePlayer1 = nil;
} 
```

# java - 使用 Spring MVC 上传文件

> ID：12076818
> 
> 赞同：1
> 
> 时间：2012-08-22T15:46:32.557
> 
> 标签：java, jquery, spring-mvc

我正在使用 spring MVC 和 jquery 上传文件。在我写的类方法里面

```
 @RequestMapping(value="attachFile", method=RequestMethod.POST)
public @ResponseBody List<FileAttachment> upload(
        @RequestParam("file") MultipartFile file,
        HttpServletRequest request,
        HttpSession session) {
    String fileName =  null;
    InputStream inputStream = null;
    OutputStream outputStream = null;

    //Save the file to a temporary location 

    ServletContext context = session.getServletContext();
    String realContextPath = context.getRealPath("/");

    fileName =  realContextPath +"/images/"+file.getOriginalFilename();

    //File dest = new File(fileName);

    try {

        //file.transferTo(dest);

        inputStream = file.getInputStream();
        outputStream = new FileOutputStream(fileName);

        inputStream.close();
        outputStream.close();

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

它正确上传文件我正在使用

```
 ServletContext context = session.getServletContext();
   String realContextPath = context.getRealPath("/"); 
```

获取路径。我的第一个问题是，这是获取路径的正确方法吗，它将文件存储在 workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/myproject/images 的某处

当我尝试使用以下代码在我的 jsp 页面上显示此图像时

```
<img src="<%=request.getRealPath("/") + "images/images.jpg" %>" alt="Upload Image" /> 
```

它不显示图像，它生成以下html

```
 <img src="/home/name/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/myproject/images/images.jpg" alt="Upload Image"> 
```

我做的事情对吗？在我的项目中，我必须每天上传大量文件。

如果您需要其他任何内容来理解我的问题，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:55:01.697

如果您通过绝对路径（例如`C:\images\`）而不是相对（您的方法）将文件上传到某个目录中会更好。通常，Web 应用程序在生产环境中运行在 linux mathines 上，最好让保存路径可配置。

创建一些应用程序属性，它将保存文件的保存路径（在 xml 或属性文件中）。

# jquery - css divs display:none 在调用函数时重置并显示 div

> ID：12076820
> 
> 赞同：0
> 
> 时间：2012-08-22T15:46:40.733
> 
> 标签：jquery, css, function, checkbox

大家好，我是这个网站的新手，所以不要对我太苛刻：P 基本上我已经创建了一个函数，其中 onclick 某些 div（其中包含“false”字样）被选中，css display:none 函数叫做。希望可以在这里看到：

```
...
if (tickbox.checked == false) {
    var unchecked = $("div:contains('true'):not(div:contains('false')").css("display", "none");    
}
... 
```

这链接到一个复选框，该复选框在每次单击复选框时调用该函数（它用于隐藏复选框被选中时显示的信息，当它未被选中时（抱歉很难理解）。问题是每当我检查另一个复选框似乎重置了此功能，导致所有未选中的复选框显示应隐藏的信息。

如果有人能告诉我如何解决这个问题，或者甚至编写一个完全摆脱信息 div 而不是仅仅隐藏它的新函数，因为我觉得这可以解决问题，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:57:38.210

这是我所写内容的[jsfiddle ，它将根据复选框值显示和隐藏带有文本“false”的 div。](http://jsfiddle.net/eK6gw/)

# c++ - 为什么在'|'时使用'+'运算符 非常好？

> ID：12076822
> 
> 赞同：1
> 
> 时间：2012-08-22T15:46:44.820
> 
> 标签：c++, add, bitwise-operators, bitwise-or

这更像是一个哲学问题，但我在代码库中看到过很多次，但并不真正理解这种编程方法是如何形成的。

假设您必须将位 2 和 3 设置为某个值 x 而不更改 uint 中的其他值。这样做非常简单，也是一项常见的任务，我倾向于这样做：

```
uint8_t someval = 0xFF; //some random previous value
uint8_t x = 0x2; //some random value to assign.
someval = (somval & ~0xC) | (x << 2); //Set the value to 0x2 for bits 2-3 
```

我已经看到代码改为使用“|” 使用“+”：

```
uint8_t someval = 0xFF; //some random previous value
uint8_t x = 0x2; //some random value to assign.
someval = (somval & ~0xC) + (x << 2); //Set the value to 0x2 for bits 2-3 
```

它们是等价的吗？
是的。

这个比那个好吗？
仅当您的硬件没有按位 OR 指令时，但我从未见过没有按位 OR 的处理器（即使是小型 PIC10 处理器也有 OR 指令）。

那么为什么有些程序员会倾向于使用'+'而不是'|'呢？我在这里错过了一些非常明显，超级强大的优化吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T15:51:07.487

*   如果要执行按位运算，请使用按位运算符。

*   如果要执行算术运算，请使用算术运算符。

确实，对于某些值，一些算术运算可以实现为简单的按位运算，但这本质上是一个实现细节，您永远不应该向读者展示。首先，代码的*逻辑*应该是清晰的，如果可能的话是不言自明的。编译器将为您选择适当的低级操作来实现您的愿望。

*这就是*慈善。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T15:53:54.603

> 它们是等价的吗？

是的，只要事先明确写入的位域。否则，他们会以稍微不同的方式出错。

> 这个比那个好吗？

不，尽管有些人会说按位运算更清楚地表达了意图。

> 那么为什么有些程序员会倾向于使用'+'而不是'|'呢？

因为它们是等价的，并且没有一个比另一个特别好。

> 我在这里错过了一些非常明显，超级强大的优化吗？

不。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T15:51:58.050

> 那么为什么有些程序员会倾向于使用'+'而不是'|'呢？

`+` *可以*更快地找出逻辑错误。`a | a`似乎可以工作，而简单的`a + a`绝对不会（当然，取决于逻辑，但`+`版本更容易出错）。

当然，你应该坚持标准的做事方式（当你想要按位运算时使用按位运算，当你想做数学时使用算术运算）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T15:52:05.217

这只是风格问题。任何现代 CPU 都将在相同的周期数（通常为 1）内完成这两项操作。就我个人而言，我更喜欢`|`这些情况，因为它更明确地向代码阅读器表明你正在做的是位旋转而不是算术。

如果您的代码中有错误，那么 using`+`可能会导致奇怪的行为，而 using`|`往往会掩盖错误。例如，如果您不小心包含了两次相同的位，则再次对它进行 ORing 是无操作的，但添加它将清除该位并进入下一个位（如果设置了更多位，可能会更远）。因此，这通常会导致故障快速行为，而不是通常更可取的故障掩蔽行为。

# math - 基本数学公式混淆

> ID：12076823
> 
> 赞同：0
> 
> 时间：2012-08-22T15:46:46.630
> 
> 标签：math, equality, bit, redundancy

我正在研究冗余位，我遇到了这个等式和表格。现在我不确定他们如何获得“最小数量”冗余位列。

![在此处输入图像描述](../Images/8cb407ae8cd4e2eba5c298202d0d1ee4.png)

那么他们如何获得`r`纠正`n`数据位所需的最大和最小冗余位数量

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:51:21.433

`r`根据定义：它是满足所述方程的最小整数值， `2ʳ ≥ n + r + 1`。

我没有看到任何关于“最大冗余位数”的信息。

# .net - MVC2 和 MVC4 之间的不同路由行为

> ID：12076828
> 
> 赞同：0
> 
> 时间：2012-08-22T15:47:14.150
> 
> 标签：.net, asp.net-mvc-2, asp.net-mvc-routing, asp.net-mvc-4

我正在将 ASP.NET MVC 2 应用程序升级到 MVC 4 以及我在 MVC2 应用程序中的这条路线：

```
routes.MapRoute(
"RenderContentPage",                          // Route name
"{*url}",                                      // URL with parameters
new { controller = "Home", action = "Index" } // Parameter defaults 
```

在 MVC 4 中没有相同的行为。

我希望`/s`在 url 中保留 url 参数，所以像`www.mydomain.com/a/b/c`MVC2 中的 url 将被上面的路由覆盖，但在 MVC4 中它不匹配。

MVC4 中是否有不同的方式`/s`来匹配参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:31:10.757

我的错误，它们在 MVC4 中的工作方式相同。

因为在初始页面加载后，请求似乎没有遇到断点，所以我得出了错误的结论。

# java - 哪里是开始学习编写服务器应用程序的好地方？

> ID：12076830
> 
> 赞同：-1
> 
> 时间：2012-08-22T15:47:37.300
> 
> 标签：java, python, apache, client-server

前几天我问过这个，但它已经关闭了，可能是因为我有闲逛的倾向，所以我会直接回答这个问题。

我以前写过程序，所以我不是在寻找关于编程的介绍。

我想知道是否有人有他们认为可以很好地介绍设计服务器应用程序的好站点/文章/书籍。

该服务器将是基于 linux 的带有 apache 的亚马逊 ec2 服务器。我更喜欢使用 python，我也知道 Java，但如果您认为这将是一种更好的服务器技术编程语言。它将通过网络浏览器通过互联网访问。

同样，是否有人知道他们认为可以很好地介绍设计服务器应用程序的好网站/文章/书籍？

**编辑

最终应用程序将与 Web 浏览器一起使用，以通过 ajax 访问以从数据库返回信息/维护数据库并从服务器添加/删除文件。现在虽然我只是想编写一个简单的应用程序，它将接受一个 ajax 调用，用它做一些简单的事情，并返回被操纵的数据。

**编辑

对于初学者，我只想与使用 javascript 来 ajax 和更新 HTML 的静态 HTML 页面集成。稍后，我将继续使用 ajax 调用根据数据库信息和模板动态创建页面，以便在我感觉更舒服时让服务器更新数据库。

**最终编辑

好的，对于所有投票关闭它的人。在您的脑海中，“哪里是开始学习编写服务器应用程序的好地方”不是一个简单或模糊的问题？说真的，它不是含糊不清或无法回答的。它过于宽泛的唯一方法是，如果您假设当我询问如何学习如何编写服务器应用程序时，您假设我已经掌握了服务器应用程序如何工作的实用知识，而只是忽略了您的精英应该假设的内容给定的黑客头脑。总而言之，您必须在某个地方了解服务器应用程序理论。我要问的是在哪里（校外）以及如何学习同样的东西。

除了这些人之外，感谢大家提供我正在寻找的信息。它改变了我对应用程序如何在服务器上运行的想法，并给了我一些见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:04:31.003

你到底在找什么。什么将包含您的服务器和主应用程序？只是网络？网页服务 ？克朗？你可以看看[谷歌应用引擎](https://developers.google.com/appengine/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T16:13:15.613

我认为您应该首先明确您想要构建的内容。Java 和 Python 在开发和执行方面都有自己的优势和劣势——它们也有大量的库和框架可供您使用。例如，在 Python 中，您可以使用 Tornado、Twisted、Pyramid、Django 和无数其他工具构建 Web 应用程序。Java有很多

Apache 在 webapp 堆栈中占有一席之地一直在下降。它是一个很棒的通用网络服务器，但你提到的技术完全不需要它。如果您正在部署 Java，则可以使用 Tomcat 和 Jetty。如果您正在部署 Python，则可以使用 nginx 之类的小工具将 http 代理到 python 应用程序或使用 uwsgi 协议。我认识的大多数人在端口 80 上都有 nginx 或 varnish 之类的东西，只需将所有内容代理回 python/java/php/apache/等。

一旦你准确地解释了你想学习如何构建的内容，你可能会有更好的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T15:51:02.253

这些天来，像 Udacity Coursera 等网站越来越受欢迎并且做得很好。我特别参加了 CS253 课程。[http://www.udacity.com/view#Course/cs253/CourseRev/apr2012/Unit/20006/Nugget/51001](http://www.udacity.com/view#Course/cs253/CourseRev/apr2012/Unit/20006/Nugget/51001)

我认为那是最好的资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T15:51:04.213

如果您已经了解 Java，请查看 Servlet 应用程序。这是引入 HTTP 服务器的一种相当简单的方法，并且 Tomcat 完成了足够的繁重工作，使您可以专注于以不严重关注套接字处理、协议解密等的方式实际处理请求。

如果你所追求的是底层服务器细节，Java 仍然是一个不错的选择，只需看看客户端/服务器套接字教程，然后开始添加特性/代码结构。

祝好运并玩得开心点

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T17:51:34.783

事实上，你想知道服务器是如何工作的。你有没有试过用谷歌搜索“服务器是如何工作的”？在请求和响应理论之后，您必须学习不同类型的服务器（web、ftp、smtp 等）

最后，[python提供了networks模块](http://docs.python.org/library/ipc.html)

# knockout.js - 在带有 knockoutjs 的单个元素上使用两个不同的数据绑定

> ID：12076831
> 
> 赞同：1
> 
> 时间：2012-08-22T15:47:39.490
> 
> 标签：knockout.js

是否可以将**点击**绑定和**可见**绑定附加到一个元素？

IE：

```
<button data-bind="click: function, visible: anotherFunction">Test</button> 
```

解决方法是将按钮包装在 div 中并将可见绑定设置到该元素，但是，如果可能的话，我想避免这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T15:49:49.177

是的。只需将它们括在花括号中：

```
<button data-bind="{click: function, visible: anotherFunction}">Test</button> 
```

编辑：实际上，我认为你甚至不需要大括号，只需用逗号分隔它们，你应该很好。

# visual-studio-2010 - 在 Microsoft Visual Studio 2010 中使用 Windows/Linux Makefile

> ID：12076833
> 
> 赞同：0
> 
> 时间：2012-08-22T15:47:44.400
> 
> 标签：visual-studio-2010, makefile, fortran, multiplatform

我有一个 Makefile，用于在 Windows 和 Linux 中构建我的应用程序。所有复杂的项目和平台相关的东西都已经在这个 Makefile 中处理了。

今天，我使用通用编辑器来编写代码并从命令行调用 GNU make。现在我正在考虑迁移到 Microsoft Visual Studio 2010。在使用未配置的英特尔 Visual Fortran 空项目和我的文件进行调试时，我已经使用了 MSVS2010。

我不想重复我配置新 Visual Studio 项目的工作，我想改用 Makefile。

有没有办法用 MSVS2010 做到这一点？或者，是否有任何其他更好的方法可以将配置保存在 Windows 和 Linux 的“可用”位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:30:00.440

在遥远的过去，我就是以这种方式使用 VC++2005。诀窍是创建一个*外部项目*（或*命令行项目*或类似的东西——我现在忘记了术语）。你给这个项目的命令行是`make -j4 target`（ymmv）。自然地，makefile 需要`cl`用作编译器，`link`用作链接器 &c。

现在一切都连接好了，您可以`f7`在 VC++ 中按下键来构建您的项目，并`f4`带您解决错误。[我使用了cygwin make，一切都很好。]

# crystal-reports - Crystal Reports 子报表 - 根据单击的列选择数据

> ID：12076834
> 
> 赞同：0
> 
> 时间：2012-08-22T15:47:58.970
> 
> 标签：crystal-reports, report

我有许多包含当前列和 ytd 列的报告（推销员汇总）。我希望能够根据单击的列选择子报告。我有一个选择当前的 sql 过程和一个选择 ytd 的 sql 过程。我想对当前和 ytd 使用相同的报告格式（无需复制和修改）。无论如何确定点击了哪一列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:51:14.147

Crystal Reports 几乎只是一个报告工具。它不是很有互动性。

我更熟悉旧版本的 Crystal Reports，但据我所知，没有任何`onClick`方法可以使用纯 Crystal Reports 捕获列。

根据您拥有的列数，您可以为每列创建一个子报表，但如果您有大量列要为其创建子报表，这可能会非常慢。

如果您使用 C# 或 VB.NET 生成报告，您可能有更多选择，但由于该问题未使用任何编程语言标记，我将假设这是纯 Crystal Reports。

# c - “true”（小写）已经是 Visual Studio 中的关键字了吗？它可以被覆盖吗？

> ID：12076835
> 
> 赞同：0
> 
> 时间：2012-08-22T15:48:03.900
> 
> 标签：c, visual-studio-2005, boolean, keyword, c89

我正在使用 Visual Studio 2005 C++ 编译器（但使用 C89 类型 ANSI C 进行编码）并且无法定义要使用的“true”和“false”关键字，如下所示：

```
#define true 1
#define false 0 
```

我已经使用 Green Hills C++ 编译器成功地使用了这个确切的代码，但是 Visual Studio 的行为就像“true”和“false”已经是关键字一样。这是真的？我可以用我自己的定义覆盖它们吗？如果可以，如何？

通过使用上面的行，我在编译过程中遇到 C2143 错误，例如：

```
someFuntion(someVar,otherVar,true); 
```

我已经确定其他类型与函数定义匹配，如果我将 true 更改为“1”或“0x1”，错误就会消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T18:54:56.693

首先，`true`并且`false`永远不是 C 关键字，即使在 C99/C11 中也是如此。C99 引入了本机布尔类型`_Bool`，但仍然只是宏`true`，分别定义在`false``1``0``stdbool.h`

没有参考 Visual Studio 定义宏`true`or `false`，但您始终可以使用它：

```
#ifndef true
#define true 1
#endif
#ifndef false
#define false 0
#endif 
```

# validation - 将validation-api-1.0.0.GA.jar 添加到类路径时出错

> ID：12076836
> 
> 赞同：0
> 
> 时间：2012-08-22T15:48:04.680
> 
> 标签：validation, spring-mvc

我尝试在 Spring MVC 项目中添加验证，但是当我添加 jar 时：

> 验证-api-1.0.0.GA.jar

我在创建 bean 异常 org.springframework.beans.factory.BeanCreationException 时收到此错误

```
 org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping#0': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'adminController': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.seprof.service.UserService com.seprof.web.controller.AdminController.userService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.seprof.dao.UserDAO com.seprof.service.UserServiceImpl.userDAO; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'myUserDAO' defined in ServletContext resource [/WEB-INF/dispatcher-servlet.xml]: Cannot resolve reference to bean 'myHibernateTemplate' while setting bean property 'hibernateTemplate'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'myHibernateTemplate' defined in ServletContext resource [/WEB-INF/dispatcher-servlet.xml]: Cannot resolve reference to bean 'mySessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mySessionFactory' defined in ServletContext resource [/WEB-INF/dispatcher-servlet.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Unable to get the default Bean Validation factory
org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
        at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4723)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
        at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1075)
        at org.springframework.web.servlet.handler.AbstractUrlHandlerMapping.registerHandler(AbstractUrlHandlerMapping.java:383)
        at org.springframework.web.servlet.handler.AbstractUrlHandlerMapping.registerHandler(AbstractUrlHandlerMapping.java:362)
        at org.springframework.web.servlet.handler.AbstractDetectingUrlHandlerMapping.detectHandlers(AbstractDetectingUrlHandlerMapping.java:82)
        at org.springframework.web.servlet.handler.AbstractDetectingUrlHandlerMapping.initApplicationContext(AbstractDetectingUrlHandlerMapping.java:58)
        at org.springframework.context.support.ApplicationObjectSupport.initApplicationContext(ApplicationObjectSupport.java:119)
        at org.springframework.web.context.support.WebApplicationObjectSupport.initApplicationContext(WebApplicationObjectSupport.java:72)
        at org.springframework.context.support.ApplicationObjectSupport.setApplicationContext(ApplicationObjectSupport.java:73)
        at org.springframework.context.support.ApplicationContextAwareProcessor.invokeAwareInterfaces(ApplicationContextAwareProcessor.java:106)
        at org.springframework.context.support.ApplicationContextAwareProcessor.postProcessBeforeInitialization(ApplicationContextAwareProcessor.java:85)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:394)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1413)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
        ... 19 more
    Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.seprof.service.UserService com.seprof.web.controller.AdminController.userService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.seprof.dao.UserDAO com.seprof.service.UserServiceImpl.userDAO; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'myUserDAO' defined in ServletContext resource [/WEB-INF/dispatcher-servlet.xml]: Cannot resolve reference to bean 'myHibernateTemplate' while setting bean property 'hibernateTemplate'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'myHibernateTemplate' defined in ServletContext resource [/WEB-INF/dispatcher-servlet.xml]: Cannot resolve reference to bean 'mySessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mySessionFactory' defined in ServletContext resource [/WEB-INF/dispatcher-servlet.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Unable to get the default Bean Validation factory
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:502)
        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:282)
        ... 39 more
    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.seprof.dao.UserDAO com.seprof.service.UserServiceImpl.userDAO; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'myUserDAO' defined in ServletContext resource [/WEB-INF/dispatcher-servlet.xml]: Cannot resolve reference to bean 'myHibernateTemplate' while setting bean property 'hibernateTemplate'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'myHibernateTemplate' defined in ServletContext resource [/WEB-INF/dispatcher-servlet.xml]: Cannot resolve reference to bean 'mySessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mySessionFactory' defined in ServletContext resource [/WEB-INF/dispatcher-servlet.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Unable to get the default Bean Validation factory
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:285)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1074)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:844)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:786)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:703)
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:474)
        ... 41 more
    Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.seprof.dao.UserDAO com.seprof.service.UserServiceImpl.userDAO; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'myUserDAO' defined in ServletContext resource [/WEB-INF/dispatcher-servlet.xml]: Cannot resolve reference to bean 'myHibernateTemplate' while setting bean property 'hibernateTemplate'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'myHibernateTemplate' defined in ServletContext resource [/WEB-INF/dispatcher-servlet.xml]: Cannot resolve reference to bean 'mySessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mySessionFactory' defined in ServletContext resource [/WEB-INF/dispatcher-servlet.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Unable to get the default Bean Validation factory
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:502)
        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:282)
        ... 52 more
    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'myUserDAO' defined in ServletContext resource [/WEB-INF/dispatcher-servlet.xml]: Cannot resolve reference to bean 'myHibernateTemplate' while setting bean property 'hibernateTemplate'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'myHibernateTemplate' defined in ServletContext resource [/WEB-INF/dispatcher-servlet.xml]: Cannot resolve reference to bean 'mySessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mySessionFactory' defined in ServletContext resource [/WEB-INF/dispatcher-servlet.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Unable to get the default Bean Validation factory
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1325)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:844)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:786)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:703)
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:474)
        ... 54 more
    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'myHibernateTemplate' defined in ServletContext resource [/WEB-INF/dispatcher-servlet.xml]: Cannot resolve reference to bean 'mySessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mySessionFactory' defined in ServletContext resource [/WEB-INF/dispatcher-servlet.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Unable to get the default Bean Validation factory
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1325)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
        ... 67 more
    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mySessionFactory' defined in ServletContext resource [/WEB-INF/dispatcher-servlet.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Unable to get the default Bean Validation factory
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
        ... 84 more
    Caused by: java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.hibernate.cfg.beanvalidation.BeanValidationActivator.applyDDL(BeanValidationActivator.java:118)
        ... 92 more
    Caused by: java.lang.NoClassDefFoundError: javax/validation/Validation
        at org.hibernate.cfg.beanvalidation.TypeSafeActivator.getValidatorFactory(TypeSafeActivator.java:380)
        at org.hibernate.cfg.beanvalidation.TypeSafeActivator.applyDDL(TypeSafeActivator.java:109)
        ... 97 more
    Caused by: java.lang.ClassNotFoundException: javax.validation.Validation
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        ... 99 more 
```

我不知道为什么，有帮助吗？

这是类路径：

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry including="**/*.java" kind="src" output="target/test-classes" path="src/test/java"/>
    <classpathentry excluding="**/*.java" kind="src" output="target/test-classes" path="src/test/resources"/>
    <classpathentry including="**/*.java" kind="src" path="src/main/java"/>
    <classpathentry excluding="**/*.java" kind="src" path="src/main/resources"/>
    <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/jre7">
        <attributes>
            <attribute name="owner.project.facets" value="java"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="con" path="org.eclipse.jst.server.core.container/org.eclipse.jst.server.tomcat.runtimeTarget/Apache Tomcat v7.0">
        <attributes>
            <attribute name="owner.project.facets" value="jst.web"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="con" path="org.eclipse.jst.j2ee.internal.module.container"/>
    <classpathentry kind="con" path="org.eclipse.jdt.junit.JUNIT_CONTAINER/4"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/antlr-2.7.7.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/aopalliance-1.0.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/commons-collections-3.2.1.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/commons-dbcp-1.2.2.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/commons-logging-1.1.1.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/commons-pool-1.3.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/dom4j-1.6.1.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/hibernate-jpa-2.0-api-1.0.0.Final.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/hibernate3.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/hsqldb-1.8.0.7.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/javassist-3.15.0-GA.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/jstl-1.2.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/jta-1.1.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/mysql-connector-java-5.0.5.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/org.springframework.aop-3.0.5.RELEASE.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/org.springframework.asm-3.0.5.RELEASE.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/org.springframework.aspects-3.0.5.RELEASE.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/org.springframework.beans-3.0.5.RELEASE.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/org.springframework.context-3.0.5.RELEASE.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/org.springframework.context.support-3.0.5.RELEASE.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/org.springframework.core-3.0.5.RELEASE.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/org.springframework.expression-3.0.5.RELEASE.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/org.springframework.instrument-3.0.5.RELEASE.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/org.springframework.instrument.tomcat-3.0.5.RELEASE.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/org.springframework.jdbc-3.0.5.RELEASE.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/org.springframework.jms-3.0.5.RELEASE.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/org.springframework.orm-3.0.5.RELEASE.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/org.springframework.oxm-3.0.5.RELEASE.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/org.springframework.test-3.0.5.RELEASE.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/org.springframework.transaction-3.0.5.RELEASE.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/org.springframework.web-3.0.5.RELEASE.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/org.springframework.web.portlet-3.0.5.RELEASE.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/org.springframework.web.servlet-3.0.5.RELEASE.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/org.springframework.web.struts-3.0.5.RELEASE.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/sitemesh-2.4.2.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/slf4j-api-1.6.1.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/spring-security-config-3.0.5.RELEASE.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/spring-security-core-3.0.5.RELEASE.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/spring-security-web-3.0.5.RELEASE.jar"/>
    <classpathentry kind="lib" path="src/main/webapp/WEB-INF/lib/standard-1.1.2.jar"/> 
```

这是应用程序上下文：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jdbc="http://www.springframework.org/schema/jdbc" xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:p="http://www.springframework.org/schema/p" xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
        http://www.springframework.orgA/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <mvc:annotation-driven />
    <!-- Auto-detect components -->
    <context:component-scan base-package="com.seprof.web.controller" />

    <bean id="messageSource"
        class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
        <property name="basename" value="classpath:messages" />
        <property name="defaultEncoding" value="UTF-8" />
    </bean>

    <bean id="propertyConfigurer"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
        p:location="/WEB-INF/jdbc.properties" />

    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver"
        p:prefix="/WEB-INF/jsp/" p:suffix=".jsp">
    </bean>

    <bean id="myDataSource" destroy-method="close"
        class="org.apache.commons.dbcp.BasicDataSource">
        <property name="driverClassName" value="${jdbc.driverClassName}" />
        <property name="url" value="${jdbc.databaseurl}" />
        <property name="username" value="${jdbc.username}" />
        <property name="password" value="${jdbc.password}" />
<!--        <property name="initialSize" value="20" /> -->
<!--        <property name="maxActive" value="30" /> -->

    </bean>

    <bean id="mySessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="myDataSource" />
        <property name="annotatedClasses">
            <list>
                <value>com.seprof.pojo.User</value>
                <value>com.seprof.pojo.Role</value>
                <value>com.seprof.pojo.Country</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">${jdbc.dialect}</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.hbm2ddl.auto">update</prop>
            </props>
        </property>
    </bean>

    <bean id="myHibernateTemplate" class="org.springframework.orm.hibernate3.HibernateTemplate">
        <property name="sessionFactory">
            <ref bean="mySessionFactory" />
        </property>
    </bean>
    <!-- DAO -->
    <bean id="myUserDAO" class="com.seprof.dao.UserDAOImpl">
        <property name="hibernateTemplate" ref="myHibernateTemplate" />
    </bean>
    <bean id="myCommonDAO" class="com.seprof.dao.CommonDAOImpl">
        <property name="hibernateTemplate" ref="myHibernateTemplate" />
    </bean>

    <!-- Service -->
    <bean id="userService" class="com.seprof.service.UserServiceImpl">
        <property name="userDAO" ref="myUserDAO" />
    </bean>
    <bean id="commonService" class="com.seprof.service.CommonServiceImpl">
        <property name="commonDAO" ref="myCommonDAO" />
    </bean>

    <bean id="userValidator" class="com.seprof.web.validator.UserValidator" />

    <!-- <tx:annotation-driven /> -->
    <!-- <bean id="transactionManager" -->
    <!-- class="org.springframework.orm.hibernate3.HibernateTransactionManager"> -->
    <!-- <property name="sessionFactory" ref="mySessionFactory" /> -->
    <!-- </bean> -->
</beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:38:48.820

检查您的类路径：-您确定validation-api-1.0.0.GA.jar 在里面吗？- 你的库没有冲突吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:44:47.100

看来您还没有定义 sessionFactory bean 使用的验证 bean。

> org.hibernate.HibernateException：无法获取默认的 Bean 验证工厂

通常，如果它在您的类路径中，它会自动加载，好的。但是，如果您在 Configuration 类或 XML application-dao.xml 中定义了一些验证 bean，它可能会引发类似这些错误。

也许看看您的 applicationContext*.xml 应该对我们有所帮助。
也许看看你的 pom.xml （如果你使用的是 maven）也应该有帮助。

# regex - .htaccess 文件中的这个重写规则有什么问题？

> ID：12076839
> 
> 赞同：1
> 
> 时间：2012-08-22T15:48:07.243
> 
> 标签：regex, mod-rewrite

```
RewriteEngine On

RewriteCond search.php
RewriteCond {$QUERYSTRING} category=restauran(.*)city=Montrea(.*)$ 
RewriteRule search.php.* http://www.mynewsite.fak/$1 [P] 
```

这个想法是将任何对 search.php 的调用重定向到带有`category=restaurant`和`city=Montreal`在查询字符串中的[http://www.mynewsite.fak](http://www.mynewsite.fak)并且路径完整，例如：

```
myoldsite.fak/folderA/folderB/search.php?blah=blah... 
```

去

```
mynewsite.fak/folderA/folderB/search.php?blah=blah... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:09:06.983

我注意到的三件事。

首先是，您在示例中拼错了查询字符串变量。应该是`{$QUERY_STRING}`。这可能足以解决问题，但还有其他一些建议。

第二个是您`RewriteCond`的查询字符串正在对每个值进行贪婪匹配。尝试更新以匹配可以专门进入字段的内容，`\w+`例如。

三是`RewriteRule`自身。您可以从当前页面名称中删除`.*`，并将规则更改为更合适的名称，例如`[R=301, L]`. 这将导致规则使用 HTTP 301（永久重定向）标头“重定向”，并`L`声明它是最后应用的规则。

总而言之，这应该（可能）起作用：

```
RewriteEngine On

RewriteCond {$QUERY_STRING} category=(\w+)&city=(\w+)$
RewriteRule ^search.php$ http://www.mynewsite.fak/$1 [R=301, L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T17:23:15.763

这似乎对我有用：

RewriteCond %{QUERY_STRING} category=restaurant(.*)&city=Montreal

RewriteRule ^search.php$ [http://www.fakesite/data/testing/search.php](http://www.fakesite/data/testing/search.php) [P,QSA]

谢谢新家具。

# java - Java 是否提供任何构造来找出对象的大小？

> ID：12076844
> 
> 赞同：2
> 
> 时间：2012-08-22T15:48:12.277
> 
> 标签：java, object

我正在研究这个问题，只是想知道 Java 是否提供了任何构造来找出对象的大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:54:52.493

不幸的是没有。它相对复杂。例如，如果我创建一个`String`对象，我必须考虑：

1.  对象字段的大小。对于原语等，这很简单
2.  所指对象的大小。每个成员对象都是一个*引用*，实际上并不完全包含在所讨论的对象中。例如`String`包含对 char 数组的引用，但该 char 数组可以在多个之间共享`Strings`（请参阅源`substring()`以了解如何 - 这称为享元模式）
3.  JVM中任何*本机实现细节的大小*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T06:58:05.453

实际上，我认为您可以借助 Instrumentation 类获得对象的大小，但与C++ 中的一种，您可以在其中使用 sizeof() 函数。

***一个缺点是您获得了对象的大小，但没有获得引用对象的大小（如果有的话）。***

另一种方法是，但这是基本的，将您的被测对象序列化并写入文件并具有文件的大小（使用 ObjectOutputStream 并获取其大小）。有关与此主题相关的进一步文档，不仅阅读一些关于 Java 代理和 Java 探测的一般知识。探测 JVM 是一种非常有用的技术，特别是如果您想对性能（对象大小、运行线程、内存泄漏等）进行分析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T15:48:55.350

不，它违背了语言的概念。在真正的面向对象编程语言中（而不是像 C++ 那样被破解的 OOP 支持），对象是抽象概念，而不是计算机上的位。除非您序列化对象，否则它将被视为实际对象而不是位序列。

# java - 覆盖 hashCode() 时使用更大的素数作为乘数

> ID：12076846
> 
> 赞同：13
> 
> 时间：2012-08-22T15:48:21.737
> 
> 标签：java, hash, hashcode, primes

在过去的几个小时里，我一直在阅读有关哈希码函数的内容，并且积累了一些关于在自定义哈希码实现中使用素数作为乘数的问题。如果我能对以下问题有所了解，我将不胜感激：

*   [在此处对@mattb 的回答](https://stackoverflow.com/a/299748/328725)的评论中， @hstoerr提倡使用更大的素数（例如 524287）而不是普通素数 31。我的问题是，考虑到一对或多个元素的哈希码函数的以下实现：

    ```
    @Override
    public int hashCode() {
        final int prime = 31;
        int hash1 = (pg1 == null) ? 0 : pg1.hashCode();
        int hash2 = (pg2 == null) ? 0 : pg2.hashCode();
        return prime * (hash1 ^ hash2);
    } 
    ```

`int`如果`prime`是一个大数，这不会导致返回的溢出吗？

*   假设溢出不是问题（JVM 进行自动转换）是不是更好地进行位移而不是转换？

*   我想哈希码函数的性能会根据哈希码的复杂性而有很大差异。素数乘数的大小不会影响性能吗？

*   在自定义哈希码函数中使用多个素数而不是单个乘数会更好/更智能/更快吗？如果没有，还有其他优势吗？请参阅@jinguy 对[相关问题的回答中的](https://stackoverflow.com/q/4442136/328725)以下示例：

    ```
    public int hashCode() {
        return a * 13 + b.hashCode() * 23 + (c? 31: 7);
    } 
    ```

哪里`a`是一个`int`，`b`是一个`String`和`c`是`boolean`。

*   `long lhash = prime * (hash1 ^ hash2);`那么使用类似的东西怎么样`(int)((lhash >> 32) ^ lhash)`？这是我在另一个问题上看到的，但是并没有真正解释为什么这样做是个好主意。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-22T18:44:18.100

*提前为小说道歉。随意提出建议或直接编辑。--切特*

有溢出，但也不例外。

危险不是来自失去准确性，而是失去范围。让我们用一个荒谬的例子，其中“素数”是 2 的大幂，为了简洁起见，是 8 位无符号数。并假设`(hash1 ^ hash2)`为 255：

```
 "prime": 1000 0000
(hash1 ^ hash2): 1111 1111 
```

在括号中显示截断的数字，我们的结果是：

```
 product: [0111 1111] 1000 0000 
```

但是乘以 128 相当于左移 7 位。所以我们知道，无论 的值是多少`(hash1 ^ hash2)`，乘积的最不重要的位置都会有七个零。因此，如果`(hash1 ^ hash2)`是奇数（最低有效位 = 1），则乘以 128 的结果将始终为 128（截断高位后）。如果`(hash1 ^ hash2)`是偶数（LSB 为 0，则乘积将始终为零。

这扩展到更大的位大小。一般的观点是，如果“”的低位`prime`为零，则您正在执行移位（或多次移位+总和）操作，该操作将在低位中为您提供零。乘积的范围将受到影响。

但是让我们尝试使“ `prime`”为奇数，以便最低有效位始终为 1。考虑将其分解为移位/加法操作。的未移位值`(hash1 ^ hash2)`将始终是加数之一。由偶数“”乘数转换为保证无用的最低有效位`prime`现在将至少基于原始`(hash1 ^ hash2)`值的位进行设置。

现在，让我们考虑一个`prime`实际上是素数的值。如果它大于 2，那么我们知道它很奇怪。所以较低的位没有被转移到无用状态。通过选择一个足够大的素数，与使用较小的素数相比，您可以在输出值范围内获得更好的分布。

`0010 0000 1111 1011`尝试一些使用 8443 ( ) 和 59 ( )的 16 位乘法练习`0000 0000 0011 1011`。它们都是素数，59 的低位匹配 65531 的低位。例如，如果 hash1 和 hash2 都是 ASCII 字符值 (0 .. 255)，那么 (hash1 ^ hash2) * 59 将 <= 15045。这意味着 16 位数字的散列值范围 (0..65535) 的大约 1/4 未使用。

但是到处`(hash1 ^ hash2) * 8443`都是。`(hash1 ^ hash2)`如果低至 8，它就会溢出。即使对于非常小的输入数字，它也会使用所有 16 位。即使输入数字在相对较小的范围内，整个范围内的散列值聚类也少得多。

> 假设溢出不是问题（JVM 进行自动转换）是不是更好地进行位移而不是转换？

很可能不是。无论如何，JVM 都应该转化为主机处理器上的高效实现。整数乘法应该在硬件中实现。如果没有，JVM 负责将操作转换为对 CPU 来说合理的操作。整数乘法的情况很可能已经高度优化。如果整数乘法在给定的 CPU 上以移位加法的方式更快地完成，那么 JVM 应该以这种方式实现它。但是编写 JVM 的人不太可能会注意观察多个移位和加法操作可以组合成单个整数乘法的情况。

> 我想哈希码函数的性能会根据哈希码的复杂性而有很大差异。素数乘数的大小不会影响性能吗？

不。无论大小、设置的位数等如何，在硬件中完成的操作都是相同的。这可能是几个时钟周期。它会因特定的 CPU 而异，但无论输入值如何，都应该是一个恒定时间的操作。

> 在自定义哈希码函数中使用多个素数而不是单个乘数会更好/更智能/更快吗？如果没有，还有其他优势吗？

仅当它减少了碰撞的可能性时，这取决于您使用的数字。如果您的哈希码取决于`A`并且`B`它们在同一范围内，您可能会考虑使用不同的素数或移动其中一个输入值以减少位之间的重叠。由于您依赖于他们各自的哈希码，而不是直接依赖于他们的值，因此可以合理地假设他们的哈希码提供了良好的分布等。

您是否希望哈希码`(x, y)`不同于`(y, x)`. 如果您的哈希函数以相同的方式处理`A`和`B`，则`hash(x, y) = hash(y, x)`. 如果这就是你想要的，那么一定要使用相同的乘数。不是，使用不同的乘数是有意义的。

> `long lhash = prime * (hash1 ^ hash2);`那么使用类似的东西怎么样`(int)((lhash >> 32) ^ lhash)`？这是我在另一个问题上看到的，但是并没有真正解释为什么这样做是个好主意。

有趣的问题。在 Java 中，long 是 64 位，int 是 32 位。因此，这会使用所需位数的两倍生成散列，然后从高位和低位的组合中得出结果。

如果将一个数乘以`n`一个素数`p`，并且 的最低`k`位`n`全为零，则`k`乘积的最低位`n * p`也将全为零。这很容易看出——如果你正在乘以`n = 0011 0000`和`p = 0011 1011`，那么乘积可以表示为两个移位操作的总和。或者，

```
00110000 * p = 00100000 * p + 00010000 * p
             = p << 5 + p << 4 
```

采用`p = 59`和使用无符号 8 位整数和 16 位长整数，这里有一些示例。

```
 64: 0011 1011 * 0100 0000 = [ 0000 1110 ] 1100 0000 (192)
128: 0011 1011 * 1000 0000 = [ 0001 1101 ] 1000 0000 (128)
192: 0011 1011 * 1100 0000 = [ 0010 1100 ] 0100 0000 (64) 
```

通过仅删除结果的高位，当非素数被乘数的低位全为零时，结果哈希值的范围受到限制。这是否是特定上下文中的问题是特定于上下文的。但是对于一般的散列函数，最好避免限制输出值的范围，即使输入数字中有模式也是如此。在安全应用程序中，避免任何会让人根据输出中的模式推断原始值的事情更为关键。仅取低位就可以揭示一些原始位的确切值。如果我们假设该操作涉及将输入数字与大素数相乘，那么我们知道原始数字在右侧的零与散列输出一样多（因为素数'

通过对高位与低位进行异或运算，输出的一致性会降低。更重要的是，根据这些信息猜测输入值要困难得多。根据 XOR 的工作原理，它可能意味着原始低位为 0，高位为 1，或者原始低位为 1，高位为 0。

```
 64: 0011 1011 * 0100 0000 = 0000 1110 1100 0000 => 1100 1110 (206)
128: 0011 1011 * 1000 0000 = 0001 1101 1000 0000 => 1001 1101 (157)
192: 0011 1011 * 1100 0000 = 0010 1100 0100 0000 => 0110 1100 (204) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T15:55:46.383

*   溢出不是问题。无论如何，哈希都被限制在一个狭窄的值集上。

*   您发布的第一个哈希函数不是很好。在大多数情况下，使用``return (prime * hash1) ^ hash2;` 会减少碰撞次数。

*   乘以单个单词 int 一般是非常快的，乘以不同的数字之间的差异可以忽略不计。加上执行时间与函数anyay中的其他所有内容相比相形见绌

*   对每个部分使用不同的素数乘数可以降低碰撞的风险。

# c - 如何在 C 中初始化 argv 数组

> ID：12076848
> 
> 赞同：4
> 
> 时间：2012-08-22T15:48:25.123
> 
> 标签：c

我正在尝试使用这些值初始化 *argv：test_file 模型结果 谁能帮助我如何直接初始化 argv 而不是使用命令行。我这样做是这样的：

```
*argv[]= {"test_file","model","output",NULL}; 
```

但它不工作。我知道它很简单，但我是编程新手。谁能帮我？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-22T16:10:50.850

```
char* dummy_args[] = { "dummyname", "arg1", "arg2 with spaces", "arg3", NULL };

int main( int argc, char** argv)
{
    argv = dummy_args;
    argc = sizeof(dummy_args)/sizeof(dummy_args[0]) - 1;

    // etc...

    return 0;
} 
```

要注意的一件事`argv`是允许修改标准字符串。这些替换的不能是（它们是文字）。如果您需要该功能（许多选项解析器可能需要），您将需要一些更智能的东西。也许是这样的：

```
int new_argv( char*** pargv, char** new_args) 
{
    int i = 0;
    int new_argc = 0;
    char** tmp = new_args;

    while (*tmp) {
        ++new_argc;
        ++tmp;
    }

    tmp = malloc( sizeof(char*) * (new_argc + 1));
    // if (!tmp) error_fail();

    for (i = 0; i < new_argc; ++i) {
        tmp[i] = strdup(new_args[i]);
    }
    tmp[i] = NULL;

    *pargv = tmp;

    return new_argc;
} 
```

像这样调用它：

```
argc = new_argv( &argv, dummy_args); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-03T10:06:34.623

或者简单地说，这行得通吗（抱歉晚了3年；））？

```
int argc ;
char * argv[3] ;

char  p1[16]  ;
char  p2[16]  ;
char  p3[16]  ;

memcpy ( p1, "mainwindow", 9 ) ;
memcpy ( p2, "–SizeHint5", 10 ) ;
memcpy ( p3, "120x240", 7 )  ;

argc = 3 ;
argv[0] = p1 ;
argv[1] = p2 ;
argv[2] = p3 ;

QApplication app(argc, argv); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T15:53:15.420

像这样的初始化仅在声明时可用，并且（大概）您已将 argv 声明为函数的参数（`main`我假设）。在这种情况下，您必须单独分配每个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-27T23:39:49.313

为了符合较新的编译器，我会这样做（只要您不想更改字符串）：

```
char* argv[] = {const_cast<char*> ("program_name"),
                const_cast<char*> ("-arg1"),
                const_cast<char*> ("string_to_arg1"),
                const_cast<char*> ("-arg2"),
                const_cast<char*>("-arg3"),
                NULL};
int argc = sizeof (argv) / sizeof (char*) - 1;

QApplication app(argc, argv); 
```

# java - 将 AES 加密从 Java 移植到 Objective-C

> ID：12076851
> 
> 赞同：0
> 
> 时间：2012-08-22T15:48:33.220
> 
> 标签：java, objective-c, encryption, aes

我的任务是将 AES 加密从 Java 移植到 Objective-C。我无权访问发生解密的服务器代码。使用[FBEncryptor](https://github.com/dev5tec/FBEncryptor)，我设法在 Objective-C 中对字符串进行简单的 AES 加密，并在 Java 中对其进行解密，反之亦然。

但是，当我尝试将 Objective-C 中的加密数据发送到服务器（同样，我无权访问）时，服务器向我发送了“DER 输入不是八位字节字符串”错误。我认为 Java 中的这段代码是我无法在 Objective-C 中复制的，它是我在任务中取得成功的道路。

```
Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
cipher.init(Cipher.ENCRYPT_MODE, sKey);
String ivBase64 = Base64.encodeBytes(cipher.getParameters().getEncoded()); 
```

与`ivBase64`加密字符串一起发送到服务器。

`cipher.getParameters().getEncoded()`非常感谢任何有关如何将这个小部分移植到 Objective-C 的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:53:41.147

正在发生的事情是`cipher.getParameters()`调用返回一个`AlgorithmParameters`. 此实例有一个[`getEncoded()`](http://docs.oracle.com/javase/6/docs/api/java/security/AlgorithmParameters.html#getEncoded%28%29)具有以下描述的方法：

> 以主要编码格式返回参数。如果存在针对此类参数的 ASN.1 规范，则参数的主要编码格式是 ASN.1。

现在，据我所知，IV 没有默认的 ASN.1 DER 编码，但由于 IV 基本上是一个字节数组，所以最符合逻辑的 ASN.1 编码是 OCTET STRING。当 DER 编码时，此 ASN.1 类型有一个带有值的标签，`04h`然后是长度。长度将始终是直接编码单个字节的 IV 的大小。IV 将始终具有基础密码块的大小，对于 AES，始终为 16 字节。

因此，最后，您应该可以通过将字节值`04h`和`10h`IV 前置来确定。

# iphone - NSMutableArray 内存泄漏

> ID：12076852
> 
> 赞同：0
> 
> 时间：2012-08-22T15:48:34.990
> 
> 标签：iphone, ios, cocoa-touch, cocoa, ipad

我正在使用以下代码创建 NSMutableArray。当我在“配置文件”模式下运行它时，它显示内存泄漏。

SampleArray.h

```
@interface SampleArray: NSObject {
}
@property (assign, retain) NSMutableArray *array;
@end 
```

样品阵列.m

```
#import "SampleArray.h"
@implementation SampleArray
@synthesize array;
-(void) viewDidLoad {
    self.array =[ [NSMutableArray alloc] init];
}

-(void) viewWillDisappear:(BOOL)animated {
    [self.array release];
}
@end 
```

当我使用自动释放时，我无法在其他函数或方法中访问相同的内容并返回空值。请帮我找出问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:56:03.537

在 viewWilLDisappear 中释放这个数组不是一个好主意，你应该在 dealloc 函数中释放。您应该担心过度释放此项目并导致程序崩溃，因为 viewWilLDisappear 可能会在此 ViewController 的生命周期内被多次调用。

无论如何，您要双重保留该项目，因为您的属性上有一个保留（并使其成为非原子的，而不是分配的），向您的 alloc/init 添加一个自动释放：

```
self.array =[[[NSMutableArray alloc] init] autorelease]; 
```

并移动

```
[array release]; 
```

到你的 dealloc 函数。或转换为 ARC，不要再担心了……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:03:19.360

首先我假设你正在使用

```
@property (nonatomic, retain) NSMutableArray *array; 
```

用这个

```
-(void) viewDidLoad {
    array =[[NSMutableArray alloc] init];
}

-(void) viewWillDisappear:(BOOL)animated {
    [array release];
} 
```

我会建议你使用 dealloc 而不是`viewWillDisappear`

```
-(void) dealloc {
    [array release];
    [super dealloc];
 } 
```

* * *

你的代码解释

```
 -(void) viewDidLoad {
        // here you are allocating a mutable array thus retain count becomes one
        // then you are assigning it to the property which is retain and thus retains it
        // making the retain count 2
        self.array =[ [NSMutableArray alloc] init];
    }

    -(void) viewWillDisappear:(BOOL)animated {
        // here you are releasing it so its retain count becomes 1 from 2
        // thus shows memory leak
        [self.array release];
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T16:04:40.190

最好在 -dealloc() 中处理内存取消分配并将数组设置为 nil 以在 -viewDidUnload() 中更安全

所以它将是：

```
-(void) viewDidUnload 
{
    self.array = nil;
}

-(void) dealloc
{
    [array release];

    [super dealloc];
} 
```

就像其他人说的那样，将您的财产声明为**（非原子，保留）**而不是（分配，保留）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T15:52:09.393

尝试将其设置为（非原子，保留），然后自动释放。

# c# - 从 asp.net 读取文本框值并将其传递给 c# 变量

> ID：12076853
> 
> 赞同：0
> 
> 时间：2012-08-22T15:48:40.127
> 
> 标签：c#, asp.net, visual-studio-2012

当我填写表单时，我有一个带有表单的页面，我想在我的 c# 代码隐藏文件中访问该表单数据。

**注册.aspx：**

```
<%@ Page Title="Home" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="True" CodeBehind="Register.aspx.cs" Inherits="Informito._Default" %>
<div>
    <table class="style1">
    <tr>
        <td>Utilizador:</td>
        <td><asp:TextBox ID="Utilizador" name="Utilizador" runat="server"></asp:TextBox></td>
    </tr>
    <tr>
        <td>Password:</td>
        <td><asp:TextBox ID="Password" runat="server" TextMode="Password"></asp:TextBox></td>
    </tr>
    </table>
</div>
<asp:Button ID="Button1" runat="server" Text="Registar" OnClick="Registar"/> 
```

**注册.aspx.cs：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using System.Web.Security;
using System.Data.SqlClient;
using Informito.Admins;

namespace Informito
{
    public partial class _Default : Page
    {

        protected void Page_Load(object sender, EventArgs e)
        {

        }

        public void Registar(object sender, EventArgs e)
        {
            string Username = Utilizador.Text; //Error here: Object reference not set to an instance of an object.
            string Password= Password.Text;
            RegisterUser(Username, Password, 1);
        }

    }
} 
```

**Register.aspx.designer.cs：**

```
namespace Informito {

    public partial class _Default {

        protected global::System.Web.UI.WebControls.LoginView LoginView1;
        protected global::System.Web.UI.WebControls.TextBox Utilizador;
        protected global::System.Web.UI.WebControls.TextBox Password;
    }
} 
```

我必须使用什么函数从 asp.net 文本框中读取并通过 c# 代码隐藏变量将其传递给？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T17:15:45.490

**更新：**

`<asp:Content></asp:Content>`由于您使用的是母版页，因此您需要将标记括在标签中。

* * *

如果您使用 Visual Studio 生成您的 Web 项目，那么您可以看到 Register.aspx.designer.cs 应该有如下代码。如果没有，则将其添加到类中（您可以将其添加到 Register.aspx.cs 或 Register.aspx.designer.cs 中）。

```
protected global::System.Web.UI.WebControls.TextBox Utilizador; 
```

然后你可以使用

```
string UserName = Utilizador.Text; 
```

* * *

**更新：**

我刚试过这个，似乎工作正常：

**注册.aspx.cs**

```
public void Registar(object sender, EventArgs e)
{
    string Username = Utilizador.Text; 
    string PassWd = Password.Text;
    RegisterUser(Username, PassWd, 1);
} 
```

**Register.aspx.designer.cs**

```
public partial class _Default {

        protected global::System.Web.UI.WebControls.TextBox Utilizador;
        protected global::System.Web.UI.WebControls.Button Button1;
        protected global::System.Web.UI.WebControls.TextBox Password;
    } 
```

**注册.aspx**

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeBehind="Register.aspx.cs" Inherits="Informito._Default" %>

<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
<div>
    <table class="style1">
    <tr>
        <td>Utilizador:</td>
        <td><asp:TextBox ID="Utilizador" name="Utilizador" runat="server"></asp:TextBox></td>
    </tr>
    <tr>
        <td>Password:</td>
        <td><asp:TextBox ID="Password" runat="server" TextMode="Password"></asp:TextBox></td>
    </tr>
    </table>
</div>
<asp:Button ID="Button1" runat="server" Text="Registar" OnClick="Registar"/>
</asp:Content> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:51:13.757

确保您的代码在`<form runat="server"></form>`标签内？

您的代码应如下所示：

```
<form runat='server' id="form1">
<div>
<table class="style1">

<tr>
<td>Utilizador:</td>
<td>
<asp:TextBox ID="Utilizador" name="Utilizador" runat="server"></asp:TextBox>
</td>
</tr>
<tr>
<td>Password:</td>
<td><asp:TextBox ID="Password" runat="server" TextMode="Password"></asp:TextBox></td>
</tr>
</table>
</div>
<asp:Button ID="Button1" runat="server" Text="Registar" OnClick="Registar"/>
</form> 
```

**编辑**

[引用母版页/内容占位符中的控件](http://msdn.microsoft.com/en-us/library/xxwa0ff0%28v=vs.100%29.aspx)

# c# - 如何在 c# 中为接口类型“ppp”获取“真实”NetworkInterfaceType（或 NetworkInterfaceSubType）？

> ID：12076856
> 
> 赞同：2
> 
> 时间：2012-08-22T15:48:47.770
> 
> 标签：c#, .net, networking

我知道，标题很奇怪，但我解释了我的问题：

在 windows phone 代码中，为了检测网络类型，我们可以使用

```
NetworkInterfaceInfo info = nrr.NetworkInterface;
if (info != null)
{
    switch (info.InterfaceType)
    {
        case NetworkInterfaceType.Ethernet:
            myInterface = NETWORK_TYPE_ETHERNET;
                break;
        case NetworkInterfaceType.MobileBroadbandCdma:
            myInterface = NETWORK_TYPE_CDMA;
            switch (info.InterfaceSubtype)
            {
                 case NetworkInterfaceSubType.Cellular_HSPA:
                     mySubInterface = NETWORK_TYPE_CDMA_HSPA;
                     break;
                 case NetworkInterfaceSubType.Cellular_EDGE:
                     mySubInterface = NETWORK_TYPE_CDMA_EDGE;
                     break;
                 case NetworkInterfaceSubType.Cellular_GPRS:
                     mySubInterface = NETWORK_TYPE_CDMA_GPRS;
                     break;
             }
             break;
     }
 } 
```

此代码有效，并且，对于示例，网络是 CDMA 类型，我可以访问 subType ；我知道 windowsPhone 是在 GPRS、EDGE 还是 HSPA 中...

在 C#4 中，我检测到何时在笔记本电脑中连接拨号键：

```
if( (NetworkInterfaceType.Ppp == networkCard.NetworkInterfaceType)
   ||(NetworkInterfaceType.GenericModem == networkCard.NetworkInterfaceType)
   ||(NetworkInterfaceType.Slip == networkCard.NetworkInterfaceType)
  ){
   // It's the Dialup Key interface Type.
   } 
```

但是，我没有“最终”子类型的信息...我想知道我的密钥是否连接到 GPRS、EDGE 或 HSPA...

您知道吗，当连接 3G 密钥时，必须继续检索“真实”网络信息类型（GPRS、EDGE、HSPA ...）吗？

非常感谢。

# entity-framework - Entity Framework Code First Migration 手动删除了导致迁移问题的列

> ID：12076858
> 
> 赞同：1
> 
> 时间：2012-08-22T15:48:52.557
> 
> 标签：entity-framework, entity-framework-migrations

我有一个带有 Admin 对象的 Blog 对象。我最初的设置错误，它错误地创建了我的列。我手动删除了“Admin_Id”外键字段和关系。现在，当我再次运行迁移时，它不会添加外键和关系。

我可以强制实体框架以某种方式再次更新数据库吗？

我的对象：

行政

```
public class Admin: WebPage, IWebPage
{
    public string Name { get; set; }
    public string Email { get; set; }
    public string About { get; set; }
    public string Image { get; set; }

    public List<Blog> Blogs { get; set; }
} 
```

博客

```
public class Blog : WebPage, IWebPage
{
    public string Title { get; set; }
    public string Summary { get; set; }
    public string ArticleBody { get; set; }
    public string Author { get; set; }
    public DateTime PostingDate { get; set; }

    public virtual Admin Admin { get; set; }
    public virtual BlogCategory BlogCategory { get; set; }
    public virtual List<Comment> Comments { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:46:01.830

实体框架将已应用于数据库的迁移存储在`__MigrationHistory`表中。如果您删除此表中表示特定迁移的行（该`MigrationId`列包含迁移类的名称），则该迁移将在您下次执行`update-database`.

也就是说，这将导致重新应用*整个*迁移，而不仅仅是数据库中恰好丢失的部分，包括所有表创建、删除等，所以如果你没有，请小心使用它t 之前手动取消了迁移已经进行的更改，因为如果数据库对象已经存在，其中一些操作可能并且将会导致错误。

# android - 如何在 Android 中更改菜单主题

> ID：12076863
> 
> 赞同：8
> 
> 时间：2012-08-22T15:49:05.233
> 
> 标签：android, android-theme, android-menu

我的 android 应用程序使用以下样式：

```
<style name="AppTheme"
parent="android:style/Theme.Holo" ></style> 
```

它在 AndroidManifest.xml 文件中分配给整个应用程序：

```
<application
    android:theme="@style/AppTheme"
    [...] 
```

使用这种风格，菜单看起来像这样：

![在此处输入图像描述](../Images/15b9a0da38c0c9ec94646456fc0bbdd6.png)

但是，如果我改用浅色主题：

```
<style name="AppTheme"
parent="android:style/Theme.Light" ></style> 
```

菜单将如下所示：

![在此处输入图像描述](../Images/ced0344f529f9e617ea4c247e934a3cf.png)

我的问题是：

**如何将 HOLO 主题应用于整个应用程序，而仅将 LIGHT 主题用于菜单？**

我只想应用 LIGHT 主题的对话框“样式”并将 HOLO 主题应用于其他所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T01:03:29.140

I believe you are looking for this:

```
<application
android:theme="@style/theme.holo.light> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-28T12:14:43.687

尝试使用“android:itemBackground”来改变菜单的背景颜色

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-26T03:50:19.320

您可以制作自己的白色风格。将其放入 style.xml 并在**AndroidManifest**文件中赋予主题此主题

```
 <style name="MyGow.Default.NoActionBar" parent="Theme.AppCompat.Light">
        <item name="colorControlNormal">@color/silver</item>
        <item name="android:actionModeBackground">@color/white</item>
    </style> 
```

# java - GWT RPC 未生成正确的 gwt.rpc 文件

> ID：12076866
> 
> 赞同：0
> 
> 时间：2012-08-22T15:49:18.773
> 
> 标签：java, gwt, serialization, gwt-rpc, gwt-platform

我正在将 gwt 与 gwt-platform 一起使用，并使用调度异步进行服务器调用。我遇到的问题是我正在使用的操作没有被标记为可序列化或被添加到 *.gwt.rpc 文件中。当我的代码运行时，我得到一个

> com.google.gwt.user.client.rpc.SerializationException 在 com.google.gwt.user.client.rpc.impl.SerializerBase.getTypeHandler(SerializerBase.java:153) 在 com.google.gwt.user.client.rpc .impl.SerializerBase.serialize(SerializerBase.java:125) 在 com.google.gwt.user.client.rpc.impl.ClientSerializationStreamWriter.serialize(ClientSerializationStreamWriter.java:183) 在 com.google.gwt.user.client.rpc .impl.AbstractSerializationStreamWriter.writeObject(AbstractSerializationStreamWriter.java:126) 在 com.gwtplatform.dispatch.shared.DispatchService_Proxy.execute(DispatchService_Proxy.java:33) 在 com.gwtplatform.dispatch.client.DefaultDispatchAsync.serviceExecute(DefaultDispatchAsync.java:126 ) 在 com.gwtplatform.dispatch.client.DefaultDispatchAsync.execute(DefaultDispatchAsync.java:...

那个行动：

```
public class FindCallsWithFilterAction extends UnsecuredActionImpl<FindCallsWithFilterResult> {

public FindCallsWithFilterAction() {

}

public Date getAfter() {
    return after;
}
public Date getBefore() {
    return before;
}
public Long getReferenceNumber() {
    return referenceNumber;
}
public String getUser() {
    return user;
}

public void setAfter(Date after) {
    this.after = after;
}
public void setBefore(Date before) {
    this.before = before;
}
public void setReferenceNumber(Long referenceNumber) {
    this.referenceNumber = referenceNumber;
}
public void setUser(String user) {
    this.user = user;
}

public boolean hasAfter(){
    return null != after;
}
public boolean hasBefore(){
    return null != before;
}
public boolean hasReferenceNumber(){
    return null != referenceNumber;
}
public boolean hasUser(){
    return null != user;
}

private Date after = null;
private Date before = null;
private Long referenceNumber = null;
private String user = null; 
```

}

动作有结果和处理程序，处理程序绑定在我的服务器模块中。当我调试代码并查看 gwt 生成此操作的序列化映射时，尽管它实现了 isSerializable 接口，但它的结果不存在事件（在超类中，如果我在此使用 Serializable 或 isSerializable 它仍然不起作用水平）。此外，当我查看我的 *.gwt.rpc 文件时，该类也不在其中。我只是被困住了，希望有人知道该做什么或出了什么问题。

更新：我不知道它是否相关，但我在服务器上使用 spring。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T12:41:42.617

我发现了我的问题。我忘记了 Result 对象中的无参数构造函数，而且我正在使用 Builder 来创建我的操作，并且由于某种原因，一旦我停止使用 Builder 模式，一切都会顺利运行。

# python - Python First Class 函数的后续应用：比嵌套更干净的方法吗？

> ID：12076871
> 
> 赞同：0
> 
> 时间：2012-08-22T15:49:27.230
> 
> 标签：python, function-pointers

我正在编写一个示例来帮助我学习如何在 Python 中使用一流的函数。总的来说，我对我提出的解决方案感到满意，除了一行代码对我来说是“un-Pythonic”。

所以我正在处理的问题在[这里](http://www.reddit.com/r/puzzles/comments/ymqi0/saw_this_math_puzzle_on_confoundry_seems/)定义。该谜题寻求六个简单函数的单一排列（在 720 种可能中），其中涉及最终返回 -3 的“2”。

这是我的解决方案，它简单地转储了所有可能的六函数排列及其结果。

```
def perform (fun, arg):
    return fun(arg)

def a(n):
    return n + 2

def d(n):
    return n / 2.

def m(n):
    return n * 2

def p(n):
    return n ** 2

def r(n):
    return n ** 0.5

def s(n):
    return n - 2

if __name__ == "__main__":
    from itertools import permutations

    for i, perm in enumerate(permutations([a, d, m, p, r, s])):
        try:
            k = perform(perm[5], perform(perm[4], perform(perm[3], perform(perm[2], perform(perm[1], perform(perm[0], 0))))))
        except ValueError:
            k = float('nan')

        print "%03d. %s: %8.8f" % (i + 1, ''.join([x.__name__ for x in perm]), k) 
```

对我来说似乎不正确的行是带有嵌套`perform`调用的行： `k = perform(...perform(...(`. 我需要做的是将排列元组中的第一个函数应用到 0，然后将该函数的结果应用到元组中的第二个函数，依此类推，直到我想出应用组件函数的最终结果.

有没有一种更简洁的方法可以将函数依次应用于`perm`相应的结果，从 0 作为参数开始？我玩过`map`递归，但我无法找到比上述更优雅的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T15:58:10.707

为什么不简单：

```
x = init value
for f in funclist:
    x = f(x) 
```

或者更花哨的方式：

```
value = reduce(lambda x, f: f(x), funclist, init_value) 
```

# sql - 从数据库 VB 2010 中提取 SQL 命令

> ID：12076872
> 
> 赞同：0
> 
> 时间：2012-08-22T15:49:33.217
> 
> 标签：sql, visual-studio-2010, sqlcommand

这可能是一个非常奇怪的问题，但我正在尝试“获取”SQL 命令以进行报告。

所以说我的 Microsoft Access 数据库有一个查询，在执行时会运行以下 SQL 语句：

```
SELECT Staff.SurName, Staff.ID, Staff.Salary, Staff.StartDate, Staff.JobTitle,
Manager.SurName AS [Manager Surname], Department.DeptName AS [Department Name]
FROM Employee AS Staff, Employee AS Manager, Department
WHERE (((Staff.ManagerID)=[Manager].[ID]) AND
           ((Staff.DeptID)=[Department].[DeptID])); 
```

我希望我的 Visual Basic 应用程序能够“获取”任何给定数据库的 SQL 语句，前提是要获取一条语句（即，如果数据库有任何查询，获取该语句并将其返回给应用程序），如果数据库没有查询，则通过消息通知用户。

这真的可能吗？

更新：

我正在尝试通过使用“GetSchema()”函数来完成此操作：

```
Dim schema As DataTable = con.GetSchema("PROCEDURES") 
```

但是“PROCEDURES”导致错误，有人熟悉 GetSchema() 函数吗？

我已经尝试了各种搜索工作，但我没有任何运气，所以我来到了这里。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:44:28.260

每个查询都有一个`.SQL`属性。

此代码将遍历当前数据库，并为您找到的每个查询提供 SQL：

```
Dim db As Database
Dim qr As QueryDef

Set db = CurrentDb

For Each qr In db.QueryDefs
    MsgBox qr.SQL
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:46:01.053

假设您有一个文本框`TextBox1`和一个名为 的命令按钮`Command2`，您可以使用：

```
私有子 Command2_Click()

    Me.TextBox1 = CurrentDB.QueryDefs("qryScores").Sql

结束子

```

# php - 使用 Jquery 在页面加载时测试 php 会话变量

> ID：12076880
> 
> 赞同：1
> 
> 时间：2012-08-22T15:50:05.993
> 
> 标签：php, javascript, jquery, ajax

我有一个会话变量，当用户提交选择了某个选项的表单时设置了该变量。当页面刷新时，我需要测试此会话变量，如果它存在，则将某些表单设为只读。到目前为止，这是我的代码，php：

```
<?php
require("header.php");

if(isset($_REQUEST['searching'])){ //check if form has been submitted

echo"<h2>Submitted</H2><p>";
    connect('final');//connect to DB

  $fName = $_POST['addFname']; 
  $lName = $_POST['addLname']; 
  $address = $_POST['address']

  $dropdown = $_POST['field']; // yes or no option 

    $fName = htmlspecialchars($fName); 
    $fName = mysql_real_escape_string($fName); 
    $lName = htmlspecialchars($lName); 
    $lName = mysql_real_escape_string($lName);
    $address = htmlspecialchars($line2); // stop HTML characters
    $address = mysql_real_escape_string($line2); //stop SQL injection

if($dropdown== "no"){
  $_SESSION['name'] = "$fName";    
}     
?> 
```

'field' 是我的下拉列表的名称，有 2 个选项是和否。

用于获取变量的我的 JS：

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type = "text/javascript">
var session;
function multi(){
    $.ajaxSetup({cache: false})
    $.get('getSession.php', {requested: 'foo'}, function (data) {
        session = data;
});
}
</script> 
```

我用它从会话中获取变量，getSession.php 具有以下内容：

```
 <?php
session_start();
if (isset($_GET['name'])) {
    // return requested value
    print $_SESSION[$_GET['name']];
} else {
    print json_encode($_SESSION);
}
?> 
```

最后我有这个功能来禁用文本字段

```
 <script language="JavaScript">
<!--
function enable_text2()
{
if (session !=""){
status = "true";
document.add.addFname.readonly=readonly;
document.add.addLname.readonly=readonly;
}
}
//-->
</script> 
```

我的 html 的其余部分只是一个表单，所有这些都在一个文档中，顶部是 php 代码，而 javascript 函数在 head 标记中。

我在body onload标签中调用一个包装函数，然后调用这两个函数，我认为第一个函数会从php文档中获取会话变量，然后第二个函数会测试它是否不为空，如果不是那时它会使字段只读。

但是，当我在下拉列表中选择否并提交表单时，页面刷新并且没有任何反应，这些字段不是只读的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:54:27.697

假设 PHP 正在生成您已启用此“必须禁用”表单的页面，则无需 ajax 调用 - PHP 可以在构建页面时输出 JS 变量，例如

```
<script type="text/javascsript">
var disableForm = <?php echo (($_SESSION['somevar'] == 'whatever' ? 'true' : 'false') ?>;
if (disableForm) {
   ...
}
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T16:05:29.220

为什么你使用javascript呢？

```
session_start();
if (isset($_GET['name'])) {
    $disable=true;
} else {
    $disable=false;
}

 <input type="text" name="addFname" <?php if($disable) { ?> readonly="readonly" <?php } ?> 
```

在这里，我采用了“addFname”。如果条件，您可以禁用该 php 中的任何元素

# c# - 如何从多个位图创建一个 System.Drawing.Icon？

> ID：12076884
> 
> 赞同：3
> 
> 时间：2012-08-22T15:50:16.507
> 
> 标签：c#, bitmap, icons

如何创建包含多种尺寸的 Icon 对象？我无法从资源中加载它，因为内容是从不同的叠加位图创建的。我无法创建 .ico 文件，因为位图是在运行时生成的。

我有 4 个位图对象（16x16、32x32、64x64 和 128x128）。我想将这 4 个位图组合成一个 Icon 对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T09:07:54.553

要创建具有多种大小的 Icon 对象，您需要一个 ico 文件或 ico 文件流。[IconFactory 的这个 C# 示例代码](http://ikvm.cvs.sourceforge.net/viewvc/ikvm/ikvm/awt/IconFactory.cs?view=markup)展示了如何在 C# 中从多个图像创建这样的流。将此示例更改为使用 Bitmap 对象而不是 BufferedImage 对象应该很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T20:36:34.937

> 如何从多个位图创建一个 System.Drawing.Icon？

你不能。System.Drawing.Icon 仅包含一个图像。

.ico 文件或图标组资源可以包含多个图像。但是当您加载到 System.Drawing.Icon 时，您只选择其中一个图像。

# javascript - 检测 observableArray 是否发生变化

> ID：12076886
> 
> 赞同：1
> 
> 时间：2012-08-22T15:50:22.673
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin, knockout-2.0

有谁知道，如果可以在使用 ko 映射时检测到 observableArray 内部发生的任何变化，这意味着无需手动创建模型？

```
self.items = ko.observableArray([])
var data = ko.mapping.fromJS(result)
self.items.push(data); 
```

我想记录我的对象数组中任何属性发生的任何更改。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T20:07:02.503

如果我没记错的话，您应该可以使用`subscribe`observable 来获取该信息。

有关更多信息，请参见本页底部：

[**显式订阅 observables**](http://knockoutjs.com/documentation/observables.html#explicitly_subscribing_to_observables)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2015-04-24T13:35:19.350

```
self.items = ko.observableArray([])   
self.item.subscribe(function(context){  
//Comment if there is any changes in the observable array this function will get trigger and changed date ma get in context   

}); 
```

# android - 不幸的是，应用程序显示 CustumMenuActivity 已停止

> ID：12076887
> 
> 赞同：-6
> 
> 时间：2012-08-22T15:50:23.513
> 
> 标签：android

```
08-22 15:28:41.848: E/Trace(678): error opening trace file: No such file or directory (2)
08-22 15:28:42.387: D/AndroidRuntime(678): Shutting down VM
08-22 15:28:42.387: W/dalvikvm(678): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
08-22 15:28:42.407: E/AndroidRuntime(678): FATAL EXCEPTION: main
08-22 15:28:42.407: E/AndroidRuntime(678): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.vikram.custummenuactivity/com.vikram.custummenuactivity.CustumMenuActivity}: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
08-22 15:28:42.407: E/AndroidRuntime(678):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
08-22 15:28:42.407: E/AndroidRuntime(678):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
08-22 15:28:42.407: E/AndroidRuntime(678):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
08-22 15:28:42.407: E/AndroidRuntime(678):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
08-22 15:28:42.407: E/AndroidRuntime(678):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-22 15:28:42.407: E/AndroidRuntime(678):  at android.os.Looper.loop(Looper.java:137)
08-22 15:28:42.407: E/AndroidRuntime(678):  at android.app.ActivityThread.main(ActivityThread.java:4745)
08-22 15:28:42.407: E/AndroidRuntime(678):  at java.lang.reflect.Method.invokeNative(Native Method)
08-22 15:28:42.407: E/AndroidRuntime(678):  at java.lang.reflect.Method.invoke(Method.java:511)
08-22 15:28:42.407: E/AndroidRuntime(678):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-22 15:28:42.407: E/AndroidRuntime(678):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-22 15:28:42.407: E/AndroidRuntime(678):  at dalvik.system.NativeStart.main(Native Method)
08-22 15:28:42.407: E/AndroidRuntime(678): Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
08-22 15:28:42.407: E/AndroidRuntime(678):  at android.app.ListActivity.onContentChanged(ListActivity.java:243)
08-22 15:28:42.407: E/AndroidRuntime(678):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:259)
08-22 15:28:42.407: E/AndroidRuntime(678):  at android.app.Activity.setContentView(Activity.java:1867)
08-22 15:28:42.407: E/AndroidRuntime(678):  at com.vikram.custummenuactivity.CustumMenuActivity.onCreate(CustumMenuActivity.java:24)
08-22 15:28:42.407: E/AndroidRuntime(678):  at android.app.Activity.performCreate(Activity.java:5008)
08-22 15:28:42.407: E/AndroidRuntime(678):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
08-22 15:28:42.407: E/AndroidRuntime(678):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
08-22 15:28:42.407: E/AndroidRuntime(678):  ... 11 more
08-22 15:33:42.558: I/Process(678): Sending signal. PID: 678 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:08:06.173

所以问题不应该是棘手的。你的问题是：

> 原因：java.lang.RuntimeException：您的内容必须有一个 id 属性为 'android.R.id.list' 的 ListView

这意味着你`ListView`应该有 id 属性`android.R.id.list`

```
<ListView
   android:id="@android:id/list"
   ...
/> 
```

类似主题：

*   [`runtime exception ListView whose id attribute is 'android.R.id.list'`](https://stackoverflow.com/questions/3040374/runtime-exception-listview-whose-id-attribute-is-android-r-id-list)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:59:56.387

从您的堆栈跟踪中：“您的内容必须有一个 id 属性为 'android.R.id.list”的 ListView。将此 id 添加到 XML 布局文件中的适当元素，例如：

# java - 蚂蚁嵌套更新

> ID：12076888
> 
> 赞同：1
> 
> 时间：2012-08-22T15:50:32.377
> 
> 标签：java, ant, jboss, war, ear

这是与我昨天的问题相关的后续问题： [Ant Ear Update without Full Exploding Ear](https://stackoverflow.com/questions/12059046/ant-ear-update-without-full-exploding-ear/12064022#12064022)

我正在使用 Ant 1.8.2 并且能够使用我在上面提供的链接中制作的示例在耳朵中更新文件。

我的ear 文件中有一个war 文件，我希望看看是否有办法进行嵌套更新（例如更新ear 中的war 文件）。

我的另一个选择是提取战争，更新战争，然后用更新的战争更新耳朵。如果有办法进行嵌套更新，我认为这会节省我的时间，因为我的战争文件非常大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:41:09.500

以下是我的替代方法 POC，以防有人感兴趣。如果我们找不到“嵌套”更新，我将使用它。

```
<property name="ear.file1"          value="file1.ear"/>
<property name="war.file1"          value="war1.war"/>
<property name="war.file"           value="war.war"/>
<property name="war.file.backup"    value="warBk.war"/>
<property name="text.file1"         value="1.txt"/>
<property name="text.file2"         value="2.txt"/>
<property name="xml.application1"   value="application.xml"/>

<target name="clean">
    <delete file="${ear.file1}"/>
    <delete file="${war.file}"/>
    <delete file="${war.file.backup}"/>
</target>

<target name="run">

    <!-- Our war file contains 1.txt, allows us add 2.txt and verify updates properly -->
    <copy file="${war.file1}" tofile="${war.file}"/>

    <!-- simple ear that will be updated -->
    <ear earfile="${ear.file1}" appxml="${xml.application1}">
        <fileset dir="." includes="${text.file1}"/>
        <fileset dir="." includes="${war.file}"/>
    </ear>  

    <!-- Backup war, for comparision purposes -->
    <move file="${war.file}" tofile="${war.file.backup}" overwrite="true" />

    <!-- Extact the war we just added -->
    <unzip dest="." src="${ear.file1}" overwrite="true" >
        <patternset>
            <include name="${war.file}" />
        </patternset>
    </unzip>

    <!-- Update the war by adding a file -->
    <war destfile="${war.file}" update="true">
        <fileset dir="." includes="${text.file2}"/>
    </war>

    <!-- Update the ear with our updated war -->
    <ear earfile="${ear.file1}" appxml="${xml.application1}" update="true">
        <fileset dir="." includes="${war.file}"/>
    </ear>  
</target>

<target name="main" depends="clean,run"/> 
```

# ios - 使用 stringWithContentOfUrl 处理 wifi 问题

> ID：12076890
> 
> 赞同：0
> 
> 时间：2012-08-22T15:50:34.183
> 
> 标签：ios, wifi

在测试我的应用程序时，我连接到需要身份验证才能访问互联网的 wifi 网络。`[NSString stringWithContentOfUrl:encoding:error:]`即使不是我要求的页面，我也希望失败或返回此身份验证页面的内容。但它一直在尝试下载，并且永远不会返回。您有任何解决方案来检测此类问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:13:58.027

我建议使用`NSURLConnection`. 当发生重定向时，它将调用[此处](https://stackoverflow.com/questions/7395817/get-url-after-redirect-with-stringwithcontentsofurl)提到的委托方法。此外，`NSURLConnection`当您添加其他功能和内容时，您将在未来拥有更大的控制权。或者如果路由器不进行重定向而只是强迫您访问某个页面，您将能够使用`NSURLConnection`下载内容并对其进行解析以确定它是否确实是您正在寻找的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:12:12.523

在这种情况下，您将不得不进行一些编码。通过 NSURLRequest -> NSURLConnection 下载 url 的内容。然后通过 NSURLConnection 的委托方法，您可以响应身份验证质询。

# c# - C#动态框数据读取

> ID：12076893
> 
> 赞同：-2
> 
> 时间：2012-08-22T15:50:46.350
> 
> 标签：c#, winforms, textbox

我在理解如何从文本框中读取数据时遇到问题，这是在运行时动态创建的。我收到一个错误，这是代码。我确定只需要添加一个小改动，但我找不到确切的内容。谢谢

```
 private void button2_Click(object sender, EventArgs e)
    {
        //*************************************TEXTBOX***********************************************//
        TextBox tbox1 = new TextBox();
        tbox1.Name = "textBox8";
        tbox1.Location = new System.Drawing.Point(54 + (0), 55);
        tbox1.Size = new System.Drawing.Size(53, 20);
        this.Controls.Add(tbox1);
        tbox1.BackColor = System.Drawing.SystemColors.InactiveCaption;
        tbox1.TextChanged += new EventHandler(tbox1_TextChanged);

        //*************************************BUTTON***********************************************//
        Button button3 = new Button();
        button3.BackColor = System.Drawing.SystemColors.Highlight;
        button3.Location = new System.Drawing.Point(470, 55);
        button3.Name = "button3";
        button3.Size = new System.Drawing.Size(139, 23);
        button3.TabIndex = 0;
        button3.Text = "Calculate";
        this.Controls.Add(button3);
        button3.UseVisualStyleBackColor = false;
        button3.Click += new System.EventHandler(button3_Click);

    }//button2_click

    //here i want to store into variable data that I enter into textbox
    double var8;
    private void tbox1_TextChanged(object sender, EventArgs e)
    {
        TextBox tbox = sender as TextBox;
        var8 = Convert.ToDouble(tbox.Text);
    }

    //once the button3 is clicked, i want to display calculated data into textbox
    double result2;
    private void button3_Click(object sender, EventArgs e)
    {

        result2 = var8 * 2;
        //get an error saying tbox does not exist in current context(what needs to be changed?)
        tbox.Text = result2.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:52:32.097

在您的内部`private void button3_Click(object sender, EventArgs e)`没有 tbox var 的定义！您可以选择定义一个全局变量并将动态创建的文本框分配给它，或者遍历您的 Controls 集合并找到相应的文本框！

所以第一个可能的解决方案是

```
TextBox tbox = null;
private void tbox1_TextChanged(object sender, EventArgs e)
{
    tbox = sender as TextBox;
    var8 = Convert.ToDouble(tbox.Text);
}
private void button3_Click(object sender, EventArgs e)
{
    result2 = var8 * 2;
    if (tbox!=null)
        tbox.Text = result2.ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:58:31.750

```
private void button3_Click(object sender, EventArgs e)
    {

        result2 = var8 * 2;
        //get an error saying tbox does not exist in current context(what needs to be changed?)
        TextBox tbox = this.Controls.Find("textboxid") as TextBox;
        //tbox.Text = result2.ToString(); tbox is out of context

    } 
```

# java - 对数字数组执行算术而不迭代

> ID：12076897
> 
> 赞同：2
> 
> 时间：2012-08-22T15:51:03.210
> 
> 标签：java, arrays, math

例如，我想在 java 中执行以下操作：

```
int[] numbers = {1,2,3,4,5};
int[] result = numbers*2;
//result now equals {2,4,6,8,10}; 
```

这可以在不遍历数组的情况下完成吗？我是否需要使用不同的数据类型，例如 ArrayList？当前的迭代步骤需要一些时间，我希望这样的事情会有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T15:53:19.720

不，您不能在不遍历整个数组的情况下将数组中的每个项目相乘。正如评论中所指出的，即使您可以`*`以这种方式使用运算符，实现仍然必须触及数组中的每个项目。

此外，不同的数据类型将不得不做同样的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T16:14:36.710

我认为与显而易见的不同答案可能对遇到相同问题并且不介意一层（或两层）复杂性的其他人有益。

在 Haskell 中，有一种称为“惰性求值”的东西，您可以在其中执行诸如将无限大的数组乘以 2 之类的操作，而 Haskell 会“执行”该操作。当您访问该数组时，它会尝试根据需要评估所有内容。在 Java 中，我们没有这种奢侈，但我们可以以可控的方式模拟这种行为。

您将需要创建或扩展您自己的`List`类并添加一些新功能。对于要支持的每个数学运算，您都需要函数。我有下面的例子。

```
LazyList ll = new LazyList();
// Add a couple million objects
ll.multiplyList(2); 
```

其内部实现将是创建一个存储您需要执行的所有原始操作的队列，以便保留操作顺序。现在，每次读取一个元素时，您都会在返回结果之前执行队列中的所有操作。这意味着读取非常慢（取决于执行的操作数量），但我们至少得到了想要的结果。

如果您发现自己每次都遍历整个数组，那么在最后出队而不是保留原始值可能会很有用。

如果您发现您正在进行随机访问，我会在调用时保留原始值并返回修改后的结果。

如果您需要更新条目，您需要确定这意味着什么。您是在那里替换一个值，还是在执行操作后替换一个值？根据您的回答，您可能需要在队列中倒退以获得“预操作”值来替换旧值。原因是在下一次读取同一对象时，将再次应用操作，然后将值恢复为您打算在列表中替换的值。

此解决方案可能还有其他细微差别，并且根据您的需求和访问方式（顺序或随机），您实现它的方式将完全不同，但这应该是一个好的开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-12T14:28:29.207

随着 Java 8 的引入，这项任务可以使用流来完成。

```
 private long tileSize(int[] sizes) {
    return IntStream.of(sizes).reduce(1, (x, y) -> x * y);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T16:48:25.173

不，不是。如果您的集合真的很大并且您想更快地做到这一点，您可以尝试在 2 个或更多线程中对元素进行操作，但您必须注意同步（使用同步集合）或将您的集合划分为 2 个（或更多）集合并在每个线程中对一个集合进行操作。我不确定它是否会比仅遍历数组更快 - 这取决于您的集合的大小以及您想要对每个元素执行的操作。如果你想使用这个解决方案，你会知道它在你的情况下是否更快 - 它可能会更慢，而且肯定会更复杂。一般来说 - 如果它不是代码的关键部分并且执行时间不是太长，我会保留它现在的样子。

# unix - AIX 无法在特定目录中运行应用程序

> ID：12076904
> 
> 赞同：0
> 
> 时间：2012-08-22T15:51:17.850
> 
> 标签：unix, directory, file-permissions, aix

这可能是一个简单的问题。但我已经坚持了好几个星期了。

我们有一个 AIX 服务器，我们在其中面临这个问题。我无法在特定目录及其子目录中运行程序。

我在 /opt/FileNet 目录中获得了命令 java 和 scp2 的正确输出。但是当我在 /opt/FileNet/RM 目录中时，这些命令停止工作。输出如下。

Java - JVMXM008：在线程“main”中初始化 System ClassException 时发生错误无法创建 Java 虚拟机。

SCP2 - 无法解析安装路径。

我不知道为什么会这样。请你的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:24:39.177

```
drwxr-xr-x   24 root     system         4096 Feb 21 2012  opt
drwxr-xr-x   17 jxadmin  wasadmin       4096 Aug 14 08:40 FileNet
drwxrwxr-x   17 jxadmin  wasadmin       4096 Aug 14 08:45 RM
drwxrwxr-x   37 jxadmin  wasadmin       4096 Feb 13 2012  AE (/opt/FileNet/AE, This directory is working as expected) 
```

找不到任何 ACL。

# powershell - Powershell 远程处理和页面文件

> ID：12076905
> 
> 赞同：3
> 
> 时间：2012-08-22T15:51:19.473
> 
> 标签：powershell, remoting, pagefile

我编写了一个连接到远程机器的 powershell 脚本，目的是在所述机器上执行软件部署。基本上，它连接、映射驱动器、将部署从映射驱动器复制到目标机器，然后执行 perl 脚本来安装部署。如果我手动执行这些步骤，一切正常。当我尝试使用我的脚本时，远程机器上的 perl 脚本失败，提示“页面文件太小，无法完成此操作”。

有人可以解释我在远程操作时需要考虑的注意事项吗？我尝试过监控内存使用情况，但没有发现任何异常。页面文件是操作系统范围还是我的脚本在连接时应该设置的某种类型的每个用户配置？

如果需要，我可以发布我的脚本片段，但该脚本有 426 行，所以我认为将其全部发布会让人不知所措。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T18:00:57.060

我发现远程 shell 的管理方式与登录到盒子并执行 powershell 会话不同。我必须使用以下命令之一来增加可用的最大内存量：

```
Set-Item WSMan:\localhost\Shell\MaxMemoryPerShellMB 1024

winrm set winrm/config @{MaxMemoryPerShellMB="1024"} 
```

默认值为 150MB，在我的情况下并没有削减它。我不能说我推荐1GB，我只是一个开发者。我试着提高它，直到我发现什么对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T20:45:08.040

我尝试使用此代码以管理员身份运行 puppet 客户端，但框架仍然抱怨“拒绝访问”

**Exe (C:\Users\lmo0\AppData\Local\Temp\Microsoft .NET Framework 4 Setup_4.0.30319\Windows6.1-KB958488-v6001-x64.msu) 失败，出现 0x5 - 访问被拒绝。.**

```
using System;
using System.Diagnostics;

namespace RunAsAdmin
{
    class Program
    {
        static void Main(string[] args)
        {
            Process proc = new Process();

            Process p = new Process();
            p.StartInfo.FileName = @"powershell.exe";
            p.StartInfo.Arguments = @"invoke-command -computername vavt-pmo-sbx24 -ScriptBlock {&'C:\Program Files (x86)\Puppet Labs\Puppet\bin\puppet.bat' agent --test --no-daemonize --verbose --logdest console}";
            p.StartInfo.Verb = "runas";
            p.StartInfo.UseShellExecute = false;
            p.StartInfo.RedirectStandardOutput = true;
            p.StartInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;

            p.Start();

            while (p.HasExited == false) {
               Console.WriteLine(p.StandardOutput.ReadLine());
            }
            Console.ReadLine();
            p.WaitForExit();
            p.Close();

        }
    }
} 
```

# ruby-on-rails - 如何为已使用 globalize3 gem (Rails) 翻译的模型播种（使用 seed-fu gem）

> ID：12076910
> 
> 赞同：0
> 
> 时间：2012-08-22T15:51:40.643
> 
> 标签：ruby-on-rails, ruby-on-rails-3, seed, globalize3

在 Ruby on Rails 应用程序中，如何播种已使用 globalize3 gem 翻译的模型（使用 seed-fu gem）？

我尝试使用下面的代码为表格和翻译的表格播种，但没有奏效。

固定装置：

**产品.rb**

```
 Product.seed(:id,
   { :id => 1 }
 ) 
```

**product_translation.rb**

```
 Product_translation.seed(:id,
   { :id => 1, :product_id => 1, :locale => "en", :name => "foo"},
   { :id => 2, :product_id => 1, :locale => "ja", :name => "bar"}
 ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:18:01.997

我从未使用过seed-fu，但我对globalize3 相当了解，而且`Product_translation`对我来说看起来不合适。不应该是`Product::Translation`（或`Product.translation_class`）吗？

也许这会起作用：

**product_translations.rb**

```
Product::Translation.seed(:id,
  { :id => 1, :product_id => 1, :locale => "en", :name => "foo"},
  { :id => 2, :product_id => 1, :locale => "en", :name => "bar"}
) 
```

# javascript - 拖放和交换无法顺利进行

> ID：12076911
> 
> 赞同：0
> 
> 时间：2012-08-22T15:51:42.370
> 
> 标签：javascript, jquery, html, drag-and-drop, draggable

我需要在 portlet 中实现拖放和交换功能，它们的排列将有点如图所示。

1 2
3 4

这是一个 Web 应用程序，也将在 iDevices 上运行。我尝试使用一个名为 redplugin [http://www.redplugin.com/index.php?mainmenu=11&submenu=18](http://www.redplugin.com/index.php?mainmenu=11&submenu=18)的插件来做这件事， 这对台式机很有用，但交换在我的 iPhone 上不起作用，因此我添加了 jquery ui touch punch这在一定程度上解决了我的问题。过渡不是那么平滑，当我将它们对角拖放时交换不起作用，并且不适用于所有可能的方式，仅当从左右或左右的一行拖放 portlet 时才有效（适用于拖动1-2,2-1,3-4,4-3 但不适用于 1-4,4-1,2-3,3-2，还有其他插件可以帮助我实现这个目的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T13:37:43.947

您可以在这里简单地使用 jquery `drag`& `drop`。看看这个[JQFAQ.com](http://jqfaq.com/how-to-drag-and-drop-replace-the-position/)，在那里讨论并解决了一个答案，还有更多的常见问题解答。希望，这可以帮助你。

# sharepoint - 为什么 Sharepoint 列表视图阈值不允许在生产中通过 lists.asmx 提交 CAML 查询，但在测试中不允许？

> ID：12076913
> 
> 赞同：2
> 
> 时间：2012-08-22T15:51:44.557
> 
> 标签：sharepoint, caml

我正在编写代码以通过对 lists.asmx 的 Web 服务调用将自定义应用程序中的数据与 Sharepoint 2010 文档库同步。作为此同步的一部分，我正在使用以下 CAML 查询通过其 GUID 在 Sharepoint 中查找先前同步的项目：

```
<query>
<Query xmlns="">

   <Where>
      <Eq>
         <FieldRef Name="GUID"/>
         <Value Type="Text">{C0BE0DBF-103B-4302-83C8-01BB0B0F6FDD}</Value>
      </Eq>
   </Where>

   <QueryOptions>
      <QueryThrottleMode>1</QueryThrottleMode>
      <RowLimit>1</RowLimit>
   </QueryOptions>

</Query>
</query> 
```

这正在查询的文档库超出了列表视图阈值。在我的测试环境中，这不是问题。但是，在生产中，此查询会受到 List View Threshold 强制执行器的限制：

> 尝试的操作被禁止，因为它超过了管理员强制执行的列表视图阈值。

此页面：[http](http://technet.microsoft.com/en-us/library/cc262813.aspx) ://technet.microsoft.com/en-us/library/cc262813.aspx说：

> 查询发起的前端 Web 服务器上的场管理员和本地计算机管理员不会被列表视图阈值阻止。

但我在测试环境中的用户不是本地计算机管理员。列表视图阈值是否适用于一种情况而不适用于另一种情况是否还有**其他原因？**请记住，我必须检查lists.asmx，还有其他方法可以绕过这个限制吗？

谢谢！

# php - 如何呈现和评估字符串

> ID：12076914
> 
> 赞同：-5
> 
> 时间：2012-08-22T15:51:46.850
> 
> 标签：php, html, json, encoding

使用时`strip_tags(str)`，str 中的任何 HTML 标记的行为都会被删除，但您仍然会看到 str 指定的字符串及其包含的任何 HTML 标记，反过来 JSON 也会发生同样的情况，如果使用 JSON 字符串将导致错误函数，除非在 HTML 字符串上使用了一些 JSON 编码函数。那么，魔法到底发生在哪里呢？这些可爱的小 HTML 标签和 JSON 标签在哪里渲染？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:55:42.623

> 当`strip_tags(str)`使用时，str 中任何 HTML 标记的行为都会被移除

HTML 标记本身已被删除。

> 一个字符串如果被 JSON 函数使用会导致错误，除非在 HTML 字符串上使用了一些 JSON 编码函数

JSON 是 JSON。HTML 是 HTML。不应期望尝试将 HTML 视为 JSON 来工作。

> 那么，魔法到底发生在哪里呢？

没有“魔法”。

`strip_tags`是一个从字符串中删除与特定模式匹配的文本块的函数。

`encode_json`是一个通过数据结构工作并以 JSON 形式表达的函数（`[`在数组的开头添加，在数组中的项目之后添加逗号等）。

[你可以在json2.js](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)中看到一个 JSON 序列化器的实现。

# visual-studio-2010 - 自定义 Visual Studio 2010 模板的图像大小是多少？

> ID：12076925
> 
> 赞同：3
> 
> 时间：2012-08-22T15:52:14.583
> 
> 标签：visual-studio-2010

我正在为 Visual Studio 2010 制作自定义模板。在 .vstemplate 文件中，我可以为`<Icon>`和指定图像`<PreviewImage>`。这些图像的尺寸是多少？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-07T14:45:56.933

分别有三种尺寸：

**图标图像**

*   如果选择了小图标选项来列出项目模板，则为 16x16 像素。
*   如果选择了中等图标选项，则为 32x32 像素。

**预览图像**

200x200 像素，无论您指定的图像大小如何。

有关更多信息，请参阅我的帖子：[https ://dolinkamark.wordpress.com/2015/03/10/how-to-create-a-visual-studio-2013-project-template/](https://dolinkamark.wordpress.com/2015/03/10/how-to-create-a-visual-studio-2013-project-template/)

我知道是关于 vs 2013 的，但是如果我没记错的话，它适用于以前的版本。不幸的是，正如您在评论中所写，这些关于图像大小和类型的结论来自反复试验，因为我在 MSDN 上没有找到任何关于此的规范。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-02T11:28:56.890

Visual Studio 2015 的默认模板图标（__TemplateIcon.ico）有以下模式（使用 Microangelo Studio 查找）：

*   256x256 32 位颜色 (XP)（包括 Alpha 通道），带 PNG 压缩
*   256x256 8 位颜色 (256)，带 PNG 压缩
*   64x64 32 位颜色 (XP)，无压缩
*   48x48 32 位颜色 (XP)，无压缩
*   48x48 8 位颜色 (256)，无压缩
*   32x32 32 位颜色 (XP)，无压缩
*   32x32 8 位颜色 (256)，无压缩
*   16x16 32 位颜色 (XP)，无压缩
*   16x16 8 位颜色 (256)，无压缩

默认颜色为：正面：66、66、66（十六进制：424242） 背景：246、246、246（十六进制：f6f6f6）

似乎“黑暗主题”以某种方式重新绘制了图标

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-25T09:44:27.630

以下是我对这个问题的经验方法：

*   项目模板选择向导中使用的图标大小为 32x32 像素（ICO 格式）。
*   如果图像保持在 200x380 像素（PNG 格式）以下，则 PreviewImage 会居中放置，不会进行裁剪或滚动。注意：垂直大小还取决于您输入多少文本作为描述。

大小在 VS2010 和 VS212 中似乎相似。

# c++ - 当来自外部库的线程意外地使我的应用程序崩溃时，我该怎么办？

> ID：12076927
> 
> 赞同：2
> 
> 时间：2012-08-22T15:52:15.230
> 
> 标签：c++, multithreading, exception, crash

我的应用程序使用了一个相机库，它会不断地向我的应用程序发送图像。不幸的是，这个库启​​动了一个抛出异常（或导致抛出异常）的线程并且不处理它。结果整个应用程序崩溃。有没有办法防止应用程序崩溃？我可以在外部线程上安装异常处理程序吗？

关于我的具体情况的一些细节：崩溃线程的调用堆栈中没有我可以控制的函数。我什至不知道线程到底是做什么用的。但是我用调试器停止程序，我可以知道它是哪个线程，那将崩溃。不幸的是，线程非常随机地崩溃，有时需要一个多小时才能发生某些事情。我正在使用 Visual Studio C++ 2010，调试器告诉我，它是一个 std::bad_alloc。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:08:38.710

我没有处理过 Windows，所以我无法为您提供执行此操作的具体方法，但这里有两个我认为适用于任何现代操作系统的想法。

### 将该库移出您的流程

您可以创建一个“帮助”应用程序，充当“主”应用程序和库之间的桥梁。这样，当“帮助”应用程序崩溃或开始出现故障（即使用太多内存等）时，您可以安全地反弹它而不会影响主应用程序。任何 IPC 方式都可用于在该“助手”和您的主应用程序之间建立通信。

### “坏”库的拦截和控制线程

您可以挂钩/拦截/重载进程的系统调用（在类似 POSIX 的操作系统中，这样做的方法很少，但最简单的是使用`LD_PRELOAD`变量和预加载代码共享对象。Windows 确实提供了类似的功能，我不要计算它叫什么）。

`CreateThread`然后，您可以通过拦截线程创建例程/系统调用 ( ?)注入自己的代码，该代码可以将第三方库的线程例程包装在 try-catch 块中。

这在技术上是可行的，但我担心的是，您无法真正告诉库在您捕获并抑制该异常后会继续正常运行。所以第一种方法更有可能运作良好。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T16:50:29.260

您可以通过使用 SetUnhandledExceptionFilter 安装回调来捕获异常。并在线程触发时杀死线程。

然而，例外是一个令人讨厌的例外。std::bad_alloc 的常见原因不仅是内存不足，还可能由损坏的堆触发。两者都是不可恢复的情况，杀死线程不会恢复泄漏的内存，也不会破坏堆。此外，您通过杀死线程泄漏了线程的堆栈。一般来说，你让相机运转的可能性非常小，它很可能会很快再次轰炸。仅当您的程序可以在没有相机的情况下继续有用时才考虑尝试此操作。

在进程外运行它以便您可以承受完全丢失状态是一种选择，但是进程互操作您将需要它痛苦且相对昂贵。

如果您无法从供应商处获得支持，那么您需要再次购物。

# webgl - 使用 WebGL 渲染体素动画的最佳方法？

> ID：12076932
> 
> 赞同：2
> 
> 时间：2012-08-22T15:52:41.950
> 
> 标签：webgl, three.js, voxel

我想使用 WebGL 和 Three.js 渲染一个动画体素场景，用于一个爱好项目（可视化来自服务器端流的实时点云数据）。

场景不是很大——应该是 128*128*128 体素（200 万点）左右。

所以我想我可以只加载一个包含所有体素数据的大静态文件，然后根据来自服务器的流中的事件逐步添加或删除单个体素。

然而，在看到这个演示后（它不是基于体积（带有“内部”细节）而是一个更简单的“XY坐标+高程+时间”模型）：

[webgl kinect 演示](http://mrdoob.github.com/three.js/examples/webgl_kinect.html)

我想知道：

**我可以使用相同的东西（视频、纹理、着色器..）来渲染我的体素动画吗？你将如何实现这一点？**

我没有那么多的“爱好时间”，所以我更愿意在之前问出来:) 目前我正在考虑为体素模型的每一层加载许多视频。

但我不确定three.js 是否会喜欢它。另一方面，体素总是消耗大量内存，所以也许我没有太多选择。

谢谢

* * *

更新1：

事实上，我不需要数据的实时可视化。我可以偶尔轮询一下服务器（在 GPU 上加载前一个快照后立即下载一个新快照）！

* * *

更新 2：

每个体素都有一个附加的材料（“颜色”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:38:05.993

有很多方法可以解决这个问题，但我会建议以下...

由于几乎只需要编写一个着色器，我会选择 [GLOW][1] 来支持 Three.js，但这完全取决于你 - 我认为两者都可以工作，但我认为 GLOW 会变得更干净。（实际上，不确定 Three.js 是否支持 drawArrays，这在我的建议中或多或少是必要的。请继续阅读。）

对于数据，我将使用 4 张图像（PNG，因为它是无损的），即...

*   128x128 像素
*   每个像素有 (RGBA) 4x8=32 位
*   每个位代表一个体素
*   您需要 128/32=4 128x128 图像来表示 128x128x128

您只需制作一个着色器，您可以在绘制调用之间切换纹理并向上/向下移动一个位置（添加到顶点）。

有几种方法可以为体素框创建顶点。有一个直接的方法：您为每个体素框创建顶点/法线属性，并使用 UVs+bit（基本上是 3D UV 坐标，如果您愿意）来采样正确的位。这将是巨大的，内存明智的，但可能相当快。

在不太直接的方法上：可能你可以只使用 3D UV 坐标属性加上某种顶点索引（存储在 vec4 属性中的 .w 中），并在顶点着色器中即时计算顶点/法线。我把它留在那里，因为它解释得太多了，你可能会自己弄清楚；）

着色器将需要顶点纹理，因为您需要在顶点着色器中对上述纹理进行采样。不幸的是，大多数计算机都支持这一点，但不是全部。

如果设置了该位，您只需像往常一样投影顶点。如果未设置，则将其放在近剪裁平面后面，WebGL 管道将为您移除它。

请注意，WebGL 中的位操作或多或少是一种痛苦（移位/和/或不可用），您应该避免使用整数，因为某些 Mac 驱动程序不支持这些整数。我以前成功过，所以非常可行。

...类似的东西可能会起作用；D

# entity-framework - EntityFunctions 绝对值

> ID：12076934
> 
> 赞同：3
> 
> 时间：2012-08-22T15:52:48.523
> 
> 标签：entity-framework

我在我的 LINQ 查询中使用 EntityFunctions 类：

```
var a = dbContext.Where(x=>EntityFunctions.DiffMinutes(dateA,dateB)<1) 
```

但是我想要一个绝对值的差异，这样我就不必担心哪个日期更大。

任何人都可以建议如何做到这一点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T15:58:17.223

尝试：

```
var a = dbContext.Where(x =>  Math.Abs(EntityFunctions.DiffMinutes(dateA,dateB)) < 1); 
```

# java - 如何在骆驼中正确记录消息/路由（流）？

> ID：12076936
> 
> 赞同：1
> 
> 时间：2012-08-22T15:53:03.747
> 
> 标签：java, logging, apache-camel

我正在使用 Apache camel 将一些 SOAP 消息从 A 路由到 B。

我想为某些特定路由添加日志记录，但问题是消息正文是一个流。

我的解决方案是将该流转换为字符串，然后将其发送到端点 B。

这似乎工作正常，但我不确定这种方法有多干净？

这就是我的路线现在的样子：

```
<route>
    <from uri="cxf:bean:ServiceA?dataFormat=MESSAGE" />
    <convertBodyTo type="java.lang.String"/>
    <to uri="log:my.company?level=WARN"/>
    <to ref="ServiceB" />
</route> 
```

问题是我是否应该使用wireTap 和流缓存来复制流、将其转换为字符串、记录它并将另一个未触及的流发送到ServiceB。我找不到正确执行此操作的方法。这是我的尝试：

```
<route streamCache="true">
    <from uri="cxf:bean:ServiceA?dataFormat=MESSAGE" />
    <wireTap uri="log:my.company?level=WARN" /> <!-- how to convert this stream to a string? -->
    <to ref="ServiceB" />
</route> 
```

你认为呢？WireTap还是上述解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T19:54:08.147

您可以在日志端点上启用 showStreams=true 选项。然后它也会记录流；并且您不需要在此之前转换身体。您仍然需要启用流缓存，以确保以后在继续处理消息时可以重新读取流。

从其文档中查看日志组件的选项：http: [//camel.apache.org/log](http://camel.apache.org/log)

# android - Android Market（Play 商店）如何“推送”安装到我的手机？

> ID：12076940
> 
> 赞同：0
> 
> 时间：2012-08-22T15:53:25.377
> 
> 标签：android, web-services, google-play

我注意到一种趋势，当您通过 Web 界面发起请求时，供应商将允许您将应用程序/音乐/书籍等安装到您的注册设备。

Google Play 商店就是一个例子。登录到与我的 Android 手机相同的帐户后，我可以在应用程序上单击“安装”，几秒钟后，我的手机正在安装该应用程序。

亚马逊的 Kindle 也做了类似的事情。

**我的问题**

用于执行此操作的机制是什么？设备是否在后台不断轮询这些类型的更新，或者是否有某种方法可以在设备不需要轮询的情况下推送这些类型的更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:58:01.720

我认为您正在搜索推送概念。维基百科可以为您提供更多详细信息：

[http://en.wikipedia.org/wiki/Push_technology](http://en.wikipedia.org/wiki/Push_technology)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:01:42.983

Google 开发了他的设备推送版本，称为 Google Cloud Messaging（从 C2DM 重命名）。

您可以在这里获得基础知识：http: [//developer.android.com/guide/google/gcm/index.html](http://developer.android.com/guide/google/gcm/index.html)

有关该技术的一般知识，请阅读@Aerilys 发布的维基百科文章。

# java - draw2d 导入未解决

> ID：12076943
> 
> 赞同：0
> 
> 时间：2012-08-22T15:53:51.370
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-gef, draw2d

我正在使用 gef 做一个 eclipse 插件。当我在安装插件后重新启动 eclipse 时，我遇到了很多关于 draw2d 导入的错误。例如，在我的一门课上，我有：

```
import org.eclipse.draw2d.ImageFigure;
import org.eclipse.draw2d.Label;
import org.eclipse.draw2d.MouseEvent;
import org.eclipse.draw2d.MouseMotionListener; 
```

最后的 3 个导入很好，但第一个“import org.eclipse.draw2d.ImageFigure”无法再解决。

我不知道出了什么问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:55:02.127

必需插件（plugin.xml -> Dependencies）中有 org.eclipse.draw2d 吗？如果否 - 添加并尝试重建插件，如果是 - ... 删除并再次添加？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:45:28.423

好的，我终于找到了解决方案。该插件使用自己的 draw2d.jar 文件版本。我用 eclipse GEF 插件中的 draw2d.jar 手动替换了该文件，一切都恢复正常了。

# performance - 为什么启用弧的应用程序运行缓慢

> ID：12076948
> 
> 赞同：-2
> 
> 时间：2012-08-22T15:54:13.293
> 
> 标签：performance, automatic-ref-counting

为什么启用弧的应用程序运行缓慢。我已对所有应用程序源文件 .h 和 .m 文件进行了更改。但是应用程序启动非常缓慢。

我已经为优化中的 Debug 选项提供了 -O0 值，并为发布提供了 -os 值。但是我的应用程序仍然无法正常运行。请告诉我如何快速启动应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:14:10.603

0) You need to profile your app to determine where it is spending its time, and to find what does not match your expectations. Instruments.app is awesome at helping you with this -- Learn to use it.

1) If this is a quick "I just converted my project to ARC, and now it is much slower with no other changes.", then you should begin with point#0 (above). …but you may also be interested in reading about the [performance and semantic differences in ARC and MRC programs](https://stackoverflow.com/questions/588866/atomic-vs-nonatomic-properties/12017579#12017579). "Switching on" ARC is certainly capable of introducing overhead. How that affects your program… well, you would have to measure and understand a good amount of how it works. MRC alone isn't a formula for a fast program -- you would need to understand a whole lot more.

# php - Zend 框架数据访问层 (DAL)

> ID：12076949
> 
> 赞同：2
> 
> 时间：2012-08-22T15:54:14.147
> 
> 标签：php, oop, zend-framework, data-access-layer, dao

查看有关 Zend Framework 中数据访问的几本教程和书籍，似乎大多数人在他们的模型（活动记录模式）甚至控制器中进行数据访问。我强烈不同意这一点。因此，我想要一个数据访问层（DAL），这样我的域层就可以通过没有任何“ZF 的东西”来保持可移植性。我四处寻找，但并没有真正找到我想要的东西。注意：我是采埃孚的新手。

**DAL结构**

所以，第一个问题是在哪里放置数据访问层。虽然它当然可以放在`library`文件夹中并向自动加载器添加命名空间，但这似乎不合逻辑，因为它特定于我的应用程序（因此该`applications`文件夹是合适的）。我正在使用模块化结构。我正在考虑使用以下结构：

`/application/modules/default/dal/`

但是，我不确定如何包含此文件夹，以便我可以访问控制器中的类（不使用包含/需要）。如果有人知道如何做到这一点，那就太棒了！当然也欢迎任何其他想法。

这个想法是让我的控制器与数据访问对象 (DAO) 交互。然后 DAO 使用可以返回给控制器的模型。通过这样做，我可以保持我的模型完好无损。

**执行**

在其他语言中，我之前已经为每个模型实现了 DAO，例如`DAL_User`. 这导致了大量的 DAO 类。有没有更聪明的方法来做到这一点（使用单个类似乎并不容易使用外键）？

我也很感激有关如何在 ZF 中实现我的 DAO 类的建议。我没有花太多时间阅读所有可用于数据库交互的组件，因此非常欢迎任何想法。我怀疑有比可用的标准 PDO 更智能的东西（不过，它可能在内部使用 PDO）。名字下降就足够了。

很抱歉有很多问题。我只需要朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T06:40:25.403

好吧，在处理 . 时首先要考虑的`Data Access Layer`是，这一层**也有子层**，在现代框架中找到名为“dal”的文件夹是不寻常的（我以 Zend Framework 和 Symfony 为基础） ）。

其次，关于`ActiveRecord`，您必须知道默认情况下 Zend Frameworks**没有实现它**。大多数教程采用最简单的方法来教授新概念。用简单的例子，**业务逻辑**的数量是最小的，所以不是增加另一层复杂性（数据库和模型对象之间的映射），而是`domain layer`用两个基本模式组成（模型）：[表数据网关](http://martinfowler.com/eaaCatalog/tableDataGateway.html)和[行数据网关](http://martinfowler.com/eaaCatalog/rowDataGateway.html)。对于初学者来说，这是足够的信息。

> **分析之后，您会发现ActiveRecord** 和**Row Data Gateway**模式之间存在一些相似之处。主要区别在于 ActiveRecord 对象（可持久实体）**承载业务逻辑**，而 Row Data Gateway**仅代表数据库中的一行**。如果您在表示数据库行的对象上添加业务逻辑，那么它将成为**ActiveRecord**对象。

此外，在 Zend Framework**快速入门**之后，[在域模型部分](http://framework.zend.com/manual/en/learning.quickstart.create-model.html)，您将意识到还有第三个组件，它使用[数据映射器模式](http://martinfowler.com/eaaCatalog/dataMapper.html)。

因此，如果您的主要目的`DAL`是在业务对象（模型）和您的存储之间映射数据，则此任务的责任**委托给 Data Mappers**，如下所示：

```
class Application_Model_GuestbookMapper
{

    public function save(Application_Model_Guestbook $guestbook);

    public function find($id);

    public function fetchAll();

} 
```

这些方法将与域对象交互`Database Abstraction Layer`并用数据填充域对象。沿着这条线的东西：

```
public function find($id, Application_Model_Guestbook $guestbook)
{

    $result = $this->getDbTable()->find($id);

    if (0 == count($result)) {

        return;

    }

    $row = $result->current();

    $guestbook->setId($row->id)

              ->setEmail($row->email)

              ->setComment($row->comment)

              ->setCreated($row->created);

} 
```

如您所见，与[Zend_Db_Table](http://framework.zend.com/manual/en/zend.db.table.html)实例`Data Mappers`交互，该实例使用**表数据网关模式**。另一方面，返回[Zend_Db_Table_Row](http://framework.zend.com/manual/en/zend.db.table.row.html)的实例，它实现了**行数据网关模式**（它是一个表示数据库行的对象）。**`$this->getDbTable->find()`**

 ****> 提示： 实体`domain object`本身**不是**由 DataMapper 上的 find() 方法创建的，其思想是**对象创建是工厂的任务，** 必须注入依赖才能实现所谓的 [依赖倒置原则(DIP)](http://en.wikipedia.org/wiki/Dependency_inversion_principle)（SOLID 原则的一部分）。但这是另一个主题，超出了问题的范围。我建议您访问以下链接[http://youtu.be/RlfLCWKxHJ0](http://youtu.be/RlfLCWKxHJ0)`guestbook`

 ****映射的东西从这里开始：

```
$guestbook->setId($row->id)
          ->setEmail($row->email)
          ->setComment($row->comment)
          ->setCreated($row->created); 
```

到目前为止，我想我已经回答了你的主要问题，你的结构如下：

```
application/models/DbTable/Guestbook.php
application/models/Guestbook.php
application/models/GuestbookMapper.php 
```

因此，就像 ZF 快速入门中一样：

```
class GuestbookController extends Zend_Controller_Action
{

    public function indexAction()

    {
        $guestbook = new Application_Model_GuestbookMapper();

        $this->view->entries = $guestbook->fetchAll();

    }

} 
```

也许您想为数据映射器创建一个单独的文件夹。只是改变：

```
application/models/GuestbookMapper.php 
```

到

```
application/models/DataMapper/GuestbookMapper.php 
```

班级名称将是

```
class Application_Model_DataMapper_GuestbookMapper 
```

我已经看到您想将您的`domain model objects`模块分成模块。也有可能，您只需要遵循 ZF 的[modules 目录和命名空间指南](http://framework.zend.com/manual/en/zend.controller.modular.html)即可。

> 最后提示：我花**了很多时间**编写自己的数据映射器，最终意识到当您的应用程序与大量相关实体一起增长时**，维护对象映射是一场噩梦。**（即包含对用户对象的引用的帐户对象、包含角色的用户等）此时编写映射的东西并不容易。因此，如果您真的想要一个真正的对象关系映射器，我强烈建议您首先研究遗留框架如何执行此类任务并可能使用它。因此，花点时间学习[Doctrine 2](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/index.html)，这是迄今为止使用**DataMapper 模式**的最佳方法之一（IMO） 。

That's it. You still can use your `/dal` directory for storing the DataMappers, just [register the namespace](http://framework.zend.com/manual/en/zend.loader.autoloader.html), so that the auto loader can find it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T17:14:13.607

在我看来，每个模型都*应该*有一个网关抽象（不仅仅是数据库访问）。一个 DAO 是不够的。如果您需要在某个时候从云端获取数据怎么办？这很快就会成为现实。如果您将网关逻辑抽象为通用的东西，然后使用数据库实现它，您可以两全其美。

如果您愿意，特定网关接口的实现可以使用通用数据映射器。我在一家小公司工作，并且总是使用 PDO 创建我的实现。这让我可以足够接近数据库来处理我可能需要但能够支持非常抽象的接口的任何有趣的 SQL 位。

* * *

我根本没有使用 Zend 框架。我不知道他们是否有可以帮助您实现网关接口的数据映射器工具。********

# c# - .FindControl 总是返回 null

> ID：12076952
> 
> 赞同：5
> 
> 时间：2012-08-22T15:54:21.377
> 
> 标签：c#, asp.net, findcontrol

我有两种方法。第一个动态创建一个表，然后将该表添加到 PlaceHolder 中。

```
private void generateData(){
    Table tbl = new Table();
    tbl.ID = "table1";
    holder_info.Controls.Add(tbl);
    // ...adding tr's and td's....
    // ...adding CheckBox in tds....
} 
```

如果我在此方法中执行 .FindControl("...") ，我可以使用以下方法找到控件：

```
CheckBox check = (CheckBox)holder_info.FindControl("checkbox1"); 
```

没关系，但不是我假装的。

在第二种方法中，我想检查用户是否选中了 checkBox 并做了什么，但是我找不到控件（它总是返回 null）。

```
protected void saveInfo_Click(object sender, ImageClickEventArgs e)
{
  CheckBox check = (CheckBox)holder_info.FindControl("checkbox1");
  if(check.checked){ ... }
} 
```

另外，如果我试图找到控件“table1”，我会得到空值。

为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T15:57:53.083

**这是因为您正在向**页面动态添加控件，并且当您单击按钮页面时会获得回发并删除动态添加的控件。这就是为什么它无法在按钮单击事件中找到复选框控件的原因。

对于动态控件，请查看文章*[Retaining State for Dynamically Created Controls in ASP.NET 应用程序](http://www.codeproject.com/Articles/3684/Retaining-State-for-Dynamically-Created-Controls-i)*（代码项目）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T15:58:53.777

`FindControl()`只找到直接的孩子，而不是那些孩子的孩子。

为了做你想做的事，你需要编写一个[递归查找子控件](http://www.blackbeltcoder.com/Articles/asp/recursively-finding-controls)的例程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T16:59:42.487

正如 Pranay 解释的那样，这是因为您正在动态添加控件。您需要像回发之前一样重建页面。此外，在记住之前显示的信息时，表格控件不是一个好的 web 控件。使用Repeater、DataList 或DataGrid 可能会更好。*[决定何时使用 DataGrid、DataList 或 Repeater](http://msdn.microsoft.com/en-us/library/aa479015.aspx)* (MSDN)中提供了一个比较。

为了演示，我可以展示一个简短的示例，说明如何实现中继器，因为这是 IMO 的简单控件之一。因此，不要在回发中添加表格（例如单击按钮），只需在标记中添加转发器，并在您想要显示数据时将其设置为可见。这样，您甚至不必担心动态控件，它会在您需要时出现。

因此，带有复选框的中继器的基本标记如下。

```
<asp:Repeater ID="myTable" runat="server">
    <HeaderTemplate>
        <table cellpadding="4" cellspacing="0">
        <thead>
            <tr>
                <th></th>
                <th>Name</th>
                <th>Company</th>
            </tr>
        </thead>
        <tbody>
    </HeaderTemplate>
    <ItemTemplate>
    <tr>
        <td>
            <asp:HiddenField ID="uidfield" Value='<%# Eval("Uid") %>' runat="server" />
            <asp:CheckBox ID="valuefield" Checked='<%# Eval("IsChecked") %>' runat="server" />
        </td>
        <td>
            <asp:Label Text='<%# Eval("Name") %>' runat="server" />
        </td>
        <td>
            <asp:Label Text='<%# Eval("Company") %>' runat="server" />
        </td>
    </tr>
    </ItemTemplate>
    <FooterTemplate>
    </tbody> </table>
    </FooterTemplate>
</asp:Repeater> 
```

如您所见，该表是手动构建的（如果您不想这样做，可以使用 DataGrid）。现在您可以拥有一个作为模型的类，例如：

```
public class Person {
  public Person() { }

  public Person(Guid id, string name, string company) {
    this.Uid = id;
    this.Name = name;
    this.Company = company;
  }

  public Guid Uid { get; set; }

  public string Name { get; set; }

  public string Company { get; set; }
} 
```

以及一个“满足需要”视图的视图模型类（如在您的网页控件中）。注意额外的属性 IsChecked，它不应该是模型的一部分（如何检查一个人？），但它非常适合 viewmodel 类。

```
public class PersonViewModel {
  private Person model;
  public PersonViewModel(Person model) {
      this.model = model;
  }

  public Guid Uid { get { return model.Uid; } }

  public string Name { get { return model.Name; } }

  public string Company { get { return model.Company; } }

  public bool IsChecked { get; set; }
} 
```

好的，等等后面的代码。使用中继器控件时，您需要将其绑定到列表。从 IEnumerable 继承的东西的实例就可以了，因此您需要将其连接起来。

在页面后面的代码中，添加这些方法。

```
protected override void OnInit(EventArgs e) {
    base.OnInit(e);
    mailinglists.DataBinding += bindMyTable;
}

protected override void OnLoad(EventArgs e) {
    base.OnLoad(e);
    if (!Page.IsPostBack) {
        DataBind();
    }
}

private void bindMyTable(object sender, EventArgs e) {
    // Are the conditions set for adding data to the table?
    if (conditionsMet()) {
        myTable.DataSource = getDataSource();
    }
}

private IEnumerable<PersonViewModel> getDataSource() {
     List<PersonViewModel> view = new List<PersonViewModel>();
     view.Add(new PersonViewModel(new Person() { Uid = Guid.NewGuid(), Name = "Example", Company = "Co" }));
     return view;
} 
```

现在你`myTable.DataBind()`只要满足条件就打电话，比如说当你点击一个按钮。当您单击一个按钮并需要检查哪些复选框被选中时，您可以使用该`repeater.Items`属性对其进行迭代，如下所示：

```
private void onValidatePage() {
    List<Guid> checks = new List<Guid>();
    foreach (RepeaterItem repeatitem in myTable.Items) {
        string uid = ((HiddenField)repeatitem.FindControl("uidfield")).Value;
        bool value = ((CheckBox)repeatitem.FindControl("valuefield")).Checked;
        if (value) {
            checks.Add(new Guid(uid));
        }
    }
    // Now "checks" hold all the id's of the checked items
} 
```

# windows - 如何让我的控制台窗口出现在不同的位置？

> ID：12076953
> 
> 赞同：1
> 
> 时间：2012-08-22T15:54:23.407
> 
> 标签：windows, powershell, console, command-prompt

当我打开任何控制台窗口时，无论是 PowerShell 还是命令提示符，它总是出现在我左侧显示器的最左侧。这离我的眼睛和我想要的地方太远了。将它拖到中心`exit`或关闭窗口都没有关系，它总是会重新出现在错误的位置。

有没有办法让它可靠地出现在我离开的地方？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T16:00:57.600

遵循这个：-

1.  打开`cmd.exe`或`Powershell.exe`
2.  右键单击顶部框架并选择`Properties`
3.  在`Layout`选项卡中，找到一个选项`Window Position`
4.  取消选中`Let system position window`；
5.  输入您的选择并....微笑:) .....

# rest - 如何在 ServiceStack REST 服务中使用任意 HTTP 动词？

> ID：12076957
> 
> 赞同：1
> 
> 时间：2012-08-22T15:54:28.327
> 
> 标签：rest, servicestack

使用 ServiceStack 创建 REST 服务时，如何处理任意 HTTP 动词？

最常见的动词有非常简单的方法。例如，要处理 GET 请求，我将执行以下操作：

```
public class MyService : RestServiceBase<MyRequest>
{
    public override object OnGet(MyRequest request){
        //do stuff and return HttpResult or object for serialization
    }
} 
```

PUT、POST、DELETE 和 PATCH 存在类似的覆盖。

如果我想使用 HEAD 或其他动词怎么办？

（我查看了文档和示例以及[其他 ServiceStack 问题](https://stackoverflow.com/questions/tagged/servicestack)，但没有找到任何表明正确方法的内容。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:13:53.187

ServiceStack 的[RestServiceBase](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/RestServiceBase.cs)类已经内置了对 GET、POST、PUSH、DELETE 和 PATCH 的支持。所以你只需像你的`OnGet()`方法一样覆盖它，例如你可以处理 DELETE 请求：

```
public override object OnDelete(MyRequest request){
    //do stuff and return HttpResult or object for serialization
} 
```

对于 HEAD 请求，您目前无法在 ServiceStack 服务中处理此问题，因此您需要在[RequestFilter](https://github.com/ServiceStack/ServiceStack/wiki/Request-and-response-filters)或[RequestFitler 属性](https://github.com/ServiceStack/ServiceStack/wiki/Filter-attributes)中处理它（确保关闭 httpRes 以终止请求）。

您还可以通过在 AppHost的[EndpointHostConfig.RawHttpHandlers](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/WebHost.EndPoints/EndpointHostConfig.cs#L362)配置中注册自己的自定义 IHttpHandler 来完全绕过 ServiceStack 管道。

# java - 更新 jpanel 内容

> ID：12076959
> 
> 赞同：0
> 
> 时间：2012-08-22T15:54:37.217
> 
> 标签：java, swing, jpanel

我有一个`JPanel`带有`JComboBox`. 这`JComboBox`从数据库中获取元素。我有另一个`JPanel`“插入”，我在其中插入数据库元素。

如果我插入一个新的数据库元素，我想`JPanel`用新插入的元素更新“演示”组合框。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:01:12.223

是的。使用模型填充您的演示文稿 JComboBox。从数据库中填充模型以开始您的流程。

当您插入一个新的数据库元素时，您也将该值插入到您的演示文稿 JComboBox 模型中。更新模型将更新 JComboBox。

这是一个从数据库加载 ComboBoxModel 的示例。

```
ResultSet results = aJBDCStatement.executeQuery(
        "Select columnName FROM tableName");
DefaultComboBoxModel model = new DefaultComboBoxModel();
while (result.next()) {
    model.addElement(results.getString(1));
}
JComboBox comboBox = new JComboBox(model); 
```

然后，你会

```
model.addElement(elementString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:04:12.767

我建议你使用一个**模型**，`presentation model`这将是一个好的开始，看看[这里](http://databinding.tornado.no/)

# jquery - TypeError: $ is not a function 当直接使用 Firebug 控制台时

> ID：12076962
> 
> 赞同：1
> 
> 时间：2012-08-22T15:54:47.850
> 
> 标签：jquery, firebug

我的页面引用了 jQuery，因为其他代码已经正常运行。但是我需要添加一些新代码，并决定在编写代码之前直接在 Firebug 中测试选择器。所以我去控制台并输入我的选择器：

```
$("h3:contains('Keynote')"); 
```

现在，这可能是也可能不是有效的选择器。我不在乎，在这一点上。当我按 Enter 键时，出现以下错误：

> 类型错误：$ 不是函数

现在我知道如果您在页面上实际运行的代码中遇到该错误，通常是因为未引用或运行 jquery（我们知道它是），或者因为与另一个库发生冲突。但是直接在控制台中运行的代码会受到影响吗？如果是这样，我如何绕过它进行测试？我是否必须在 Firebug 中以这种方式跳过测试，只需在我的文件中编写代码并从那里进行测试？

如果它有帮助，当我单击错误消息的链接时，这就是我得到的：

![在此处输入图像描述](../Images/3d3297d6549af012b3c7fd6474fadc5d.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T16:25:06.873

您是否尝试过用`$`替换`jQuery`？

```
jQuery("h3:contains('Keynote')"); 
```

我的第一个猜测是应该处理的冲突。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-19T13:38:31.880

当您使用多个 javascript 库时，您应该使用不同的别名。jQuery 通过使用以下代码解决了这个问题：

```
var myAlias = jQuery.noConflict(); 
```

然后你可以在任何你想要的地方使用新的别名“myAlias”。

# cordova - 如何在没有代理的情况下使用 Phonegap 从外部域加载 XML 文件

> ID：12076963
> 
> 赞同：1
> 
> 时间：2012-08-22T15:54:49.203
> 
> 标签：cordova

$.ajax 函数在我的开发系统上有效，但在加载到 ios 设备时无效。我还在 config.xml 文件中为外部域添加了一个“访问”条目。

我需要加载的数据是 XML 文件而不是 json，否则我会使用 json 加载选项。

我正在使用这段代码：

```
$.ajax({
type: "GET",
url: "http://external-domain.com/data.xml",
dataType: "xml",
success: parseXML,
error: ajaxError

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:33:03.070

对不起，这确实有效。不需要帮助。

# javascript - 在单个函数中使用 JavaScript 和 jQuery（节点和东西）

> ID：12076965
> 
> 赞同：4
> 
> 时间：2012-08-22T15:54:52.133
> 
> 标签：javascript, jquery, dom

我目前正在学习 jQuery。我知道 jQuery 是 JavaScript 的自定义库。

我在一本只使用 JavaScript 的书中做一些学习示例，为了进一步提高我的学习经验，我试图将 jQuery 用于任何可能更有效的事情。

所以，我有这个代码：

```
function addLetter(foo) {
    $(foo).unbind('click');
    var tileLetter = $(foo).attr('class').split(' ');
    var letter = tileLetter[2].charAt(1);
    if (document.getElementById('currentWord').childNodes.length > 0) {
        $('#currentWord p').append(letter);
    } else {
        var p = document.createElement('p');    
        var txt = document.createTextNode(letter);
        p.appendChild(txt);
        $('#currentWord').append(p);        
    }
} 
```

**问题一：**

如果我改成`document.getElementById('currentWord').childNodes.length`它`$('#currentWord').childNodes.length`不起作用。我认为 jQuery 选择器与 JS document.getElementById 是一样的，因为它让我回到了 DOM 元素。如果是这种情况，那么能够在其上使用 .childNodes.length 函数是有意义的；但它不起作用。我想这不是一回事吗？

**问题2：**

该代码是教科书代码。我已经添加了其中的所有 jQuery。我的 jQuery 知识有限，有没有更有效的方法来执行该功能？

**该函数的目的：**

如果这是第一次运行，该函数应该创建 ap 元素并用文本节点填充它。如果 p 元素已经被创建，它只是简单地将字符附加到其中。

这是一个单词生成游戏，所以你点击一个字母，它就会被添加到一个'currentWord' div 中。瓦片的字母嵌入在第三个 css 类中，因此 attr 分裂。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:59:44.087

```
document.getElementById('currentWord') 
```

返回一个 DOM 对象，而`$('#currentWord')`返回一个包裹在 jQuery 对象中的 DOM 对象。

要获取普通的 DOM 对象，您可以这样做

```
$('#currentWord').get(0) 
```

所以

```
$('#currentWord').get(0).childNodes.length 
```

应该管用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T16:03:53.623

**问题一：**

jQuery 返回一个 jQuery 对象。要将其返回给常规的 javascript 对象`$(object)[0]`，您可以将其视为普通的 javascript（或 DOM）对象。

**问题2：**

效率对我来说看起来不错。尽管您可能想使用跨度而不是`p`元素。

我想您可以做的一件事（即使您的看起来运行得非常快）是缓存 dom 元素：

```
function addLetter(foo) {
 $(foo).unbind('click');
 var tileLetter = $(foo).attr('class').split(' ');
 var letter = tileLetter[2].charAt(1);
 var currentWord = document.getElementById('currentWord');
 if (currentWord.childNodes.length > 0) {
    $(currentWord).find('p').append(letter);
 } else {
    var p = document.createElement('p');    
    p.innerHTML = letter;
    currentWord.appendChild(p);        
 }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T16:00:00.490

对`jQuery()`函数 ( `$()`) 的调用返回一个包含匹配元素的 jQuery 对象，而不是元素本身。

然后，调用`$('#some-id')`将返回一个 jQuery 对象，其中包含将通过执行选择的元素`document.getElementById('some-id')`。为了直接访问该元素，您可以使用[`.get()`](http://api.jquery.com/get/)函数或数组索引语法从该 jQuery 对象中获取它：（`$('#some-id')[0]`它是 0-indexed）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T16:01:48.053

1：使用`$.get(0)`or`$[0]`获取 DOM 元素。前`$('#currentWord')[0].childNodes.length`。

2：试试这个：

```
function addLetter(foo) {
    $(foo).unbind('click');
    var tileLetter = $(foo).attr('class').split(' ');
    var letter = tileLetter[2].charAt(1);
    if ($('#currentWord p').length > 0) {
        $('#currentWord p').append(letter);
    } else {
        $('#currentWord').append(
            $('<p />', { text: letter })
        );        
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T15:59:56.087

我认为您可以通过调用 text 函数来替换所有这些。

```
function addLetter(foo) {
    $(foo).unbind('click');
    var tileLetter = $(foo).attr('class').split(' ');
    var letter = tileLetter[2].charAt(1);
    var currentWordP = $('#currentWord p');
    if (currentWordP.size() > 0) {
        currentWordP.text(currentWordP.text() + letter);
    } else {
        $('#currentWord').append("<p>" + letter + "</p>");       
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T16:06:54.897

**问题一：**

document.getElementById 返回 DOM 对象。*[更多的](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)*

childNodes.length 是由 document.getElementById 返回的 Node 对象的属性。

jQuery 选择器返回 jQuery 对象*[more](http://api.jquery.com/id-selector/)*。[您可以使用.get](http://api.jquery.com/get/)从 jQuery 对象获取 DOM 对象

```
$('#IDselector').get(0) = document.getElementById('IDselector') 
```

**问题2：**

```
function addLetter(foo) {
    $(foo).unbind('click');
    var tileLetter = $(foo).attr('class').split(' ');
    var letter = tileLetter[2].charAt(1);
    if ($('currentWord p').length > 0) {
        $('#currentWord p').append(letter);
    } else {
        var p = $('<p />').text(letter);
        $('#currentWord').append(p);        
    }
} 
```

# objective-c - Cocos2d 2.0 绘制方法错误

> ID：12076966
> 
> 赞同：1
> 
> 时间：2012-08-22T15:54:57.720
> 
> 标签：objective-c, xcode, cocos2d-iphone

我使用 cocos2d 2.0。我收到一个错误：`property 'world' not found on object of type 'ColoredCircleSprite *'` **我在 draw 方法中写错了什么？**

```
-(void) draw
{
    [super draw];
    ccGLEnableVertexAttribs( kCCVertexAttribFlag_Position );
    kmGLPushMatrix();
    self.world->DrawDebugData();
    kmGLPopMatrix();
} 
```

我试着做如图所示：[Cocos2D 2.0 OpenGL 错误？](https://stackoverflow.com/questions/9914914/cocos2d-2-0-opengl-errors)

我还看到了另一种绘制方法的方法，我必须`self.`从`self.world->DrawDebugData();`行中删除，如果这样做，我会收到另一个错误：`Use undeclared identifier 'world'`.

那是`ColoredCircleSprite.h`代码：

```
#import "cocos2d.h"

@interface ColoredCircleSprite : CCNode <CCRGBAProtocol, CCBlendProtocol> {
    float       radius_;
    GLubyte     opacity_;
    ccColor3B   color_;

    NSUInteger numberOfSegments;
    GLfloat *circleVertices_;

    ccBlendFunc blendFunc_;
}

@property (nonatomic,readwrite) float radius;

/** Opacity: conforms to CCRGBAProtocol protocol */
@property (nonatomic,readonly) GLubyte opacity;
/** Opacity: conforms to CCRGBAProtocol protocol */
@property (nonatomic,readonly) ccColor3B color;
/** BlendFunction. Conforms to CCBlendProtocol protocol */
@property (nonatomic,readwrite) ccBlendFunc blendFunc;

/** creates a Circle with color and radius */
+ (id) circleWithColor: (ccColor4B)color radius:(GLfloat)r;

/** initializes a Circle with color and radius */
- (id) initWithColor:(ccColor4B)color radius:(GLfloat)r;

- (BOOL) containsPoint:(CGPoint)point;

@end 
```

我只是从 cocos2d-iphone.com 论坛复制并粘贴代码。**我真的不知道应该有什么变量以及是否应该有任何变量。**

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:24:12.987

```
@interface ColoredCircleSprite : CCSprite
{
    b2World         *mWorld;
}
@property(nonatomic,assign) b2World         *world;
@end

@implementation ColoredCircleSprite
@synthesize world = mWorld;

-(void)initBox2D
{    
    //create world in right place...
    self.world = new b2World(gravity);
}
@end 
```

# php - $_REQUEST 即使你清理它也很危险吗？

> ID：12076969
> 
> 赞同：0
> 
> 时间：2012-08-22T15:55:08.583
> 
> 标签：php, request

我知道`$_REQUEST`这很糟糕，因为它也包含 cookie 数据。

`$_REQUEST`如果我们对它使用某种干净的功能，它仍然不好用吗？有人可以详细说明吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T15:59:40.627

`$_REQUEST`不是特别危险。任何用户输入都可能是一种攻击，应该这样对待。对于任何输入媒介`$_GET`, `$_POST`, `$_COOKIE`, 使用适当的方法`intval()`, `preg_match()`, ... 来验证您收到的值是否符合您的预期。

例如，如果您需要一个文件名并打算将其发送给用户，请确保它不包含`..`，否则`/`用户将无法访问您的文件系统。

如果要在数据库中插入用户生成的值，请确保使用旧`mysql_real_escape_string`的或更好的 PDO 或 mysqli 准备语句转义值。

# c# - SetWindowPos 实现

> ID：12076972
> 
> 赞同：2
> 
> 时间：2012-08-22T15:55:13.660
> 
> 标签：c#, .net, multiple-monitors

我需要打开两个 Internet 浏览器实例，每个实例在控制台应用程序的不同监视器（有两个）中打开。我找到了 SetWindowPos 方法，但找不到使用它的方法。在我的情况下，它没有做任何事情......

请帮助我正确使用此方法...

这是我正在使用的代码：

```
[DllImport("user32.dll")]
public static extern IntPtr SetWindowPos(IntPtr hWnd, int hWndInsertAfter, int x, int Y, int cx, int cy, int wFlags);

    public static void Launch()
    {
        Process process = new Process();

        process.StartInfo.FileName = "iexplore.exe";
        process.StartInfo.Arguments = "microsoft.com";
        process.StartInfo.WindowStyle = ProcessWindowStyle.Maximized;

        process.Start();

        Rectangle monitor = Screen.AllScreens[1].WorkingArea;
        SetWindowPos(process.MainWindowHandle, 0, monitor.Left, monitor.Top, monitor.Width - 200, monitor.Height, 0);
    } 
```

谢谢大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T17:05:12.147

您传递给该方法的那个窗口句柄是空的，因为该进程没有时间打开它的主窗口。

在调用 SetWindowPos 之前尝试添加一个合理的超时时间，一两秒就足够了：

```
process.Start();

System.Threading.Thread.Sleep(1000);
process.WaitForInputIdle(); // just in case

SetWindowPos(...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T17:05:23.160

例如，此代码适用于 notepad.exe。使用 iexplore.exe 无法正常工作，因为`process.MainWindowHandle == IntPtr.Zero`, 和`process.HasExited == true`. 您需要找到找到窗口句柄的正确方法。

# facebook-apps - 状态页为空

> ID：12076973
> 
> 赞同：0
> 
> 时间：2012-08-22T15:55:14.443
> 
> 标签：facebook-apps, status

我正在尝试在我的个人网站上显示我的 Facebook 状态。我试过这个很棒的教程[http://johndoesdesign.com/blog/2011/php/adding-a-facebook-news-status-feed-to-a-website](http://johndoesdesign.com/blog/2011/php/adding-a-facebook-news-status-feed-to-a-website)

该代码适用于我拥有的几个 Facebook 页面。但是对于一个特定的 FB 页面，我会执行第 4 步，然后什么也得不到。

{ “数据”： [

] } 不知道我做错了什么？有什么想法吗

Facebook 页面是`http://facebook.com/KINGDOM.Gentlemans.Club` （删除 http:// 后的空格）

Facebook Page_ID 是 114357805248420

例子 `https://graph.facebook.com/114357805248420/feed?access_token=???????`

有人知道为什么我得到一个空白数据页吗？

谢谢马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:22:39.927

我在 Facebook 上找不到你的页面（超过 21 个来自美国），所以你的问题是两件事之一：

1.  您的 ID 和页面用户名错误。我应该可以在`facebook.com/USERNAME`或看到您的页面`facebook.com/PAGE_OR_USER_ID`。从您原始帖子中的信息中，我无​​法在其中任何一个上看到它。
2.  您的页面上有国家和/或年龄限制。如果是这种情况，您的通用应用程序访问令牌将不起作用。为了在网站上显示受限页面的提要，Facebook 要求您使用有权查看您的页面的用户的访问令牌。这可以防止您的受限内容显示给不应该查看的人。如果您的站点没有任何限制，则不需要访问令牌即可查看结果。

**顺便说一句，永远**不要在 SO 上发布真正的访问令牌。任何人都可以收获和使用它们。**您应该立即**重置您的 KingomFeed 应用访问令牌。

# puppet - 木偶迭代字符串/数组

> ID：12076976
> 
> 赞同：1
> 
> 时间：2012-08-22T15:55:24.277
> 
> 标签：puppet

你能想出在 Puppet 中解决这个问题的方法吗？

我有一个自定义事实，它会根据运行的域生成一串 IP 地址，它可以解析为具有 1 到 n 个地址。

```
"10.1.29.1"
"10.1.29.1,10.1.29.5"
"10.1.29.1,10.1.29.5,10.1.29.7"
etc 
```

例如，我想使用生成的服务器名称 servernameX 将这些添加到主机文件中；

```
10.1.29.1 myservername1
10.1.29.5 myservername2
10.1.29.7 myservername3 
```

那么你怎么能做到这一点，因为 puppet 没有像“for each”这样的数组迭代器呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T19:10:15.773

可悲的是，即使您在用逗号分割您的自定义事实时使用自定义“定义”来迭代数组，结果也将不是您所期望的，甚至不会接近“for each”循环——除了让你头疼之外，可能。

话虽如此，我不确定这是否是您想要实现的目标，但请看一下这种方法：

```
$fact = '1.1.1.1,2.2.2.2,3.3.3.3'

$servers = split($::fact, ',')
$count   = size($servers)

$names = bracket_expansion("host[01-${count}].address")

file { '/tmp/test.txt':
  content => inline_template('<%= @servers.each_with_index.map {|v,i| "#{v}\t\t#{@names[i]}\n" } %>'),
  ensure  => present
} 
```

我们有两个自定义函数：size() 和bracket_expansion()；然后我们使用它们在 hack 中提供的值，该 hack 利用 inline_template() 函数通过并行访问两个数组来呈现文件的内容——一个具有来自您的事实的 IP 地址，另一个具有应遵循的主机名。

结果如下：

```
matti@acrux ~ $ cat | puppet apply
$fact = '1.1.1.1,2.2.2.2,3.3.3.3'

$servers = split($::fact, ',')
$count   = size($servers)

$names = bracket_expansion("host[01-${count}].address")

file { '/tmp/test.txt':
  content => inline_template('<%= @servers.each_with_index.map {|v,i| "#{v}\t\t#{@names[i]}\n" } %>'),
  ensure  => present
}
notice: /Stage[main]//File[/tmp/test.txt]/ensure: created
notice: Finished catalog run in 0.07 seconds
matti@acrux ~ $ cat /tmp/test.txt 
1.1.1.1         host01.address
2.2.2.2         host02.address
3.3.3.3         host03.address
matti@acrux ~ $ 
```

size() 和 bracket_expansion() 函数都可以在这里找到：

[https://github.com/kwilczynski/puppet-functions/tree/master/lib/puppet/parser/functions/](https://github.com/kwilczynski/puppet-functions/tree/master/lib/puppet/parser/functions/)

希望这会有帮助 ：-）

# ruby-on-rails-3 - ActiveAdmin 急切加载不适用于名为“搜索”的模型（名称冲突）

> ID：12076983
> 
> 赞同：2
> 
> 时间：2012-08-22T15:55:51.860
> 
> 标签：ruby-on-rails-3, activeadmin

我几乎在所有模型中都使用了 ActiveAdmin 预加载。例如，这对我的 Coach 模型非常有用：

应用程序/管理员/coaches.rb

```
ActiveAdmin.register Coach do
  controller do
    def scoped_collection
      Coach.includes(:addresses, :user, :sport, {:user => :user_metric})
    end
  end
end 
```

然而，当我最近用我的搜索模型（我用它来记录用户所做的搜索）尝试同样的事情时：

应用程序/管理员/searches.rb

```
ActiveAdmin.register Search do
  controller do
    def scoped_collection
      Search.includes(:sport)
    end
  end
end 
```

当我尝试访问 /admin/searches 时出现以下错误

```
NoMethodError in Admin::SearchesController#index

undefined method `includes' for
ActiveAdmin::ResourceController::Collection::Search:Module

app/admin/searches.rb:5:in `scoped_collection' 
```

我相信这里可能发生的事情是`Search`我在急切加载中使用的常量是指一些内部 ActiveAdmin 模块而不是我的 ActiveRecord 模型。有没有办法防止这种名称冲突？也许 ActiveRecord::Search （或类似的东西）？或者可能这里完全发生了其他事情？

该常量`Search`在站点上的其他任何地方都有效，并且 ActiveAdmin 搜索页面在尝试实现预加载之前运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T02:23:18.133

正如@Fivell 推荐的那样，尝试`::Search`代替`Search`. 看起来您对`Search`in的引用`app/admin/searches.rb:5`实际上是在引用`ActiveAdmin::ResourceController::Collection::Search`.

如果这不能解决问题，并且可能不会，我建议将您的`Search`类重命名为其他名称，因为名称冲突往往会出现奇怪的错误......

祝你好运！

# objective-c - 主从情节提要：表格视图不显示单元格（Objective-C）

> ID：12076985
> 
> 赞同：0
> 
> 时间：2012-08-22T15:55:55.580
> 
> 标签：objective-c, storyboard

我在主视图控制器没有显示任何单元格时遇到问题。这是这种情况：

该应用程序使用情节提要。

当应用程序启动时，它会转到 navigationController

按下一个按钮并连接到表 ViewController 并设置为“推送”到它。

我已经添加了对象并制作了一个单元格/详细信息视图或其他任何内容。

由于某种原因，单元格不会出现！！！

这是文件：

MasterViewController.h：

```
#import <UIKit/UIKit.h>
#import "CraftingDetail.h"
#import "Crafting.h"

@class CraftingList;

@interface CraftingMaster : UITableViewController

@property (strong, nonatomic) CraftingDetail *detailViewController;
@property (strong, nonatomic) CraftingList *CL;

@end 
```

MasterViewController.m：

```
#import "CraftingMaster.h"
#import "CraftingList.h"

@interface CraftingMaster ()

@end

@implementation CraftingMaster

@synthesize detailViewController = _detailViewController;
@synthesize CL;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
        self.CL = [[CraftingList alloc] init];
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for     this view controller.
     self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return  self.CL.count;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return self.CL.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath: (NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...

    cell.textLabel.text = [self.CL craftingAtIndex:indexPath.row].Title;

    return cell;
}

/*
// Override to support conditional editing of the table view.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath   *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}
*/

/*
// Override to support editing the table view.
- (void)tableView:(UITableView *)tableView commitEditingStyle:      (UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
if (editingStyle == UITableViewCellEditingStyleDelete) {
       // Delete the row from the data source
       [tableView deleteRowsAtIndexPaths:@[indexPath]     withRowAnimation:UITableViewRowAnimationFade];
    }   
    else if (editingStyle == UITableViewCellEditingStyleInsert) {
       // Create a new instance of the appropriate class, insert it into the array, and  add a new row to the table view
    }   
}
*/

/*
// Override to support rearranging the table view.
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath   *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
}
*/

/*
// Override to support conditional rearranging of the table view.
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
     // Return NO if you do not want the item to be re-orderable.
    return YES;
}
*/

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc]   initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     */
}

@end 
```

DetailViewController.h：

```
#import <UIKit/UIKit.h>

@interface CraftingDetail : UIViewController

@property (strong, nonatomic) IBOutlet UIImageView *Image;
@property (strong, nonatomic) IBOutlet UITextView *Description;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:33:43.307

这是一个老问题，但是在开始使用表视图进行开发时，出现意外空的表视图是一个常见问题，因此希望这个答案对某人有用。

当您的表格视图没有单元格时，您需要检查以下几点：

*   您的数据源对象（`self.CL`在这种情况下）是否有效？（即。它们是否`!= nil`指向正确的对象？）
*   是否`numberOfSectionsInTableView:`返回大于零的整数值？
*   是否`tableView:numberOfRowsInSection`: 返回一个大于零的整数值？

以下是上面 MasterViewController.m 中需要注意的几个问题：

*   `InitWithStyle:`在情节提要中实例化视图控制器时不会执行。相反，`initWithCoder:`应该使用。我怀疑这是 JomanJi 痛苦的根源，因为这导致`self.CL`没有被实例化。（顺便说一句，数据源对象/属性：`CL`应该通过将值`_CL`直接分配给 ivar 而不是属性来实例化。请参阅“[初始化属性，点表示法](https://stackoverflow.com/questions/5932677/initializing-a-property-dot-notation/5932733#5932733)”以了解原因）。
*   由于返回（可能）与`numberOfSectionsInTableView:`as `tableView:numberOfRowsInSection:`（即“ `return self.CL.count;`”）相同的值，表格视图将显示与每个部分中的单元格相同数量的部分，每个部分的单元格包含与其他部分相同的数据. 我怀疑这种效果是开发人员想要的。（这当然是除非`count`访问器方法`CraftingList`做了一些非常奇怪的事情）。

如果不查看代码，`CraftingList`就无法准确确定问题所在。然而，考虑到问题的年龄，我怀疑 JomanJi 已经自己解决了。

# glob - glob()：仅按名称排序（也不按扩展名）

> ID：12076989
> 
> 赞同：1
> 
> 时间：2012-08-22T15:56:17.470
> 
> 标签：glob

glob() 对我的文件进行如下排序：

```
ABC_file.pdf
DEF_file.pdf
GHJ_file.pdf
ABC_file.zip 
```

*但我只想*按名称对它们进行排序（而不是按名称和扩展名）：

```
ABC_file.pdf
ABC_file.zip
DEF_file.pdf
GHJ_file.pdf 
```

怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:00:42.360

尝试这个：

```
glob($fileMask, GLOB_NOSORT); 
```

根据 PHP 手册：

> **`GLOB_NOSORT`**- 返回出现在目录中的文件（不排序）

# asp.net - 根据 Asp.net 中的条件更改 asp:Image ImageUrl 属性

> ID：12076992
> 
> 赞同：1
> 
> 时间：2012-08-22T15:56:33.690
> 
> 标签：asp.net, resx, asp.net-controls

我正在构建一个简单的报告应用程序，其中用户有通知我想检查通知是否未读我将显示一个已读图像图标，如果已读，我将显示已读图标

我创建了一个**TicketIsUnRead()**函数来检查票是否已读|未读

我在**aspx 页面**中使用了此代码，该代码将不同的资源附加到 asp:image 控件不同的资源负责更改**ImageUrl**属性

```
<asp:Image runat="server" id="ticketIcon"  meta:resourcekey='<% (TicketIsUnRead(ticketNumberField.ToString()))? "UnReadticketIconResource" :"ReadticketIconResource"%>' /> 
```

在**Resx 页面内**

```
UnReadticketIconResource.ImageUrl           images/UnReadMail.png
ReadticketIconResource.ImageUrl         images/ReadMail.png 
```

似乎 Meta:resourcekey 属性不允许 <% %> 代码

它返回解析错误异常

```
Parser Error Message: '<% (TicketIsUnRead(ticketNumberField.ToString()))? "UnReadticketIconResource" :"ReadticketIconResource"%>' is not a valid resource key. 
```

# database - 在标题中维护表格信息的 Filemaker 导出

> ID：12076994
> 
> 赞同：0
> 
> 时间：2012-08-22T15:56:50.660
> 
> 标签：database, export, filemaker

当我们使用 Filemaker 中的导出记录功能时，我们可以看到文件中的标题信息（即使用合并格式），但缺少表信息。有没有办法将表格信息保存在导出的文件中？

例如，我们有一个名为“T3”的表，但是当我们从该表中导出字段时，生成的 .csv 文件读取：

__Delirium_DRStotal_score

代替

T3::__Delirium_DRStotal_score

非常感谢任何帮助，

非常感谢史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:11:31.473

FileMaker can export related fields too and theese preserve their table name on export. At least this happens when you export into XML. So if you self-join the table to itself by a unique ID and export (identical) data from the *related* copy, it should give you the names you want. (Almost, because you'll have to name that other table differently.)

# database - 数据库 - 为什么不区分大小写？

> ID：12076995
> 
> 赞同：5
> 
> 时间：2012-08-22T15:56:52.967
> 
> 标签：database, case-sensitive, case-insensitive

我看到一两个线程在全球范围内谈论区分大小写，但我的问题更具体。

例如，我理解对文本值进行不区分大小写搜索的兴趣。

但是为什么我们要使用不区分大小写的数据库名称、表和列呢？

不会导致错误吗？使用数据库的脚本语言都是区分大小写的，因此例如，如果我们没有为字段使用正确的大小写，它将不会被找到......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T16:19:16.450

[SQL:2008](http://en.wikipedia.org/wiki/SQL:2008)和[SQL-99](http://en.wikipedia.org/wiki/SQL:1999)标准将数据库定义为对标识符不区分大小写，除非它们被引用。我发现大多数[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)都会在它们生成的 SQL 中引用标识符。

但是，您可能知道并非所有关系数据库都严格遵守标准。DB2 和 Oracle 100% 兼容。PostgreSQL 基本上是兼容的，除了它会自动将未引用的任何内容小写（我个人更喜欢。）

mySQL 有点奇怪，因为它将每个表作为文件存储在文件系统上。因此，它受文件系统区分大小写的影响。在 Windows 上：

```
CREATE TABLE FOO (a INTEGER);
CREATE TABLE 'Foo' (a INTEGER); -- Errors out, already exists 
```

在 Linux 上：

```
CREATE TABLE FOO (a INTEGER); -- Creates FOO table
CREATE TABLE 'Foo' (a INTEGER); -- Creates Foo table 
```

SQL Server 就更陌生了。它将在创建时保留大小写，但是让您在之后以任何方式引用它（即使您引用名称！）您不能创建两个唯一不同的是它们的大小写的表。注意：SQL Server 确实有控制这些东西的配置选项，因为标识符的大小写敏感性[将取决于](http://msdn.microsoft.com/en-us/library/ms188686%28SQL.90%29.aspx)数据库实例的默认排序规则。多么混乱！

虽然在大多数情况下我同意您的观点，即*计算机*（编程语言、数据库、文件系统、URL、密码等）应该区分大小写，但所有系统都是独立实施的，可能会或可能不会遵守可能或可能不遵守的标准存在。如果您了解特定数据库系统的来龙去脉以及它的行为方式，那么实现区分大小写的数据库绝对是可能的。

*以适合您*的方式实施系统确实是*您的*责任，而不是整个技术行业以一致的方式实施一切以使您的生活更轻松*。*

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:59:47.523

使用区分大小写的主要优点是，当我们在客户端站点上部署它时，无论客户端的 SQL Server 是否设置区分大小写，我们的数据库都可以工作，所以是的，这确实不是一个好主意，我不知道知道为什么有人会使用不区分大小写的数据库表/列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T16:36:14.587

如果您今天重做所有 IT 行业，凭借知识和技术，您可能会默认做所有区分大小写的事情，唯一的例外是特别要求不区分大小写的事情。

但是在我出生之前的日子里，甚至当我开始使用计算机工作（好吧，玩）时，许多计算机甚至无法区分大小写字母。我制作了一张可能很复杂的卡来插入我的假苹果 II 以使其了解其中的区别。

所以我想在这些日子里，大小写之间的区别就像现在的视网膜显示器一样。如果你有它很酷。10 年后，我们可能会问，为什么有人在创建应用程序时没有考虑到这种显示，但今天它已经不那么重要了。

数据库（和文件系统）也是如此，因为它们中的许多以及它们各自的标准至少可以追溯到 70 年代。**