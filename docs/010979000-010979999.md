# StackOverflow 问答 10979000-10979999

# android - VM 不会让我们在下载图像时分配...字节

> ID：10979011
> 
> 赞同：0
> 
> 时间：2012-06-11T11:13:58.700
> 
> 标签：android, android-asynctask

我正在构建一个新闻纸应用程序，我需要在画廊视图中显示新闻纸图像（电子纸）......我需要下载大约 100 张图像。为此，我使用 asyncTask 并为每个下载图像创建新的 AsyncTask 对象，当我尝试下载图像并设置到库中时，中间出现错误“VM 不会让我们分配......字节”并崩溃应用程序。

```
new AsyncTask<String, Void, Bitmap> () {

                @Override
                protected Bitmap doInBackground(String... params) {
                    HttpGet httpRequest;
                    try {
                        httpRequest = new HttpGet(new URL(params[0]).toURI());
                        HttpClient httpClient = new DefaultHttpClient();
                        HttpResponse response = (HttpResponse) httpClient.execute(httpRequest);
                        HttpEntity entity = response.getEntity();
                        BufferedHttpEntity bufHttpEntity = new BufferedHttpEntity(entity); 
                        InputStream is = bufHttpEntity.getContent();
                        return BitmapFactory.decodeStream(is);

                    } catch (MalformedURLException e) {
                        e.printStackTrace();
                    } catch (URISyntaxException e) {
                        e.printStackTrace();
                    } catch (ClientProtocolException e) {
                        e.printStackTrace();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }/* catch (Error e) {
                        e.printStackTrace();
                    }*/
                    return null;
                }

                @Override
                protected void onPostExecute(Bitmap result) {
                    if(result != null) {
                          img.setImageBitmap(ePaperInfo.getImgJpg1());
                        notifyDataSetChanged();
                    }
                }

            } 
```

在 logcat 中显示错误： ![在此处输入图像描述](../Images/cd0b8aafe5100f174a575b2b7841e159.png)

请帮我

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:22:38.093

您绝对不应该同时在内存中保留 100 个位图。您只需下载所需的位图，然后在下载新位图之前调用 recycle()。

看看这个例子，了解做你想做的事情的首选方式：[ImageDownloader](http://code.google.com/p/android-imagedownloader/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:08:31.290

我使用的另一个图像加载选项是[Prime](https://github.com/DHuckaby/Prime)，我在所有项目中都使用它，它非常简单高效。

# php - 如何使用 JSON 将空数组从 JS 发送到 PHP？

> ID：10979013
> 
> 赞同：2
> 
> 时间：2012-06-11T11:14:04.380
> 
> 标签：php, javascript, jquery, json

是否可以使用 JSON 从 JS 向 PHP 发送一个空数组？

```
<?
if ($_GET['test']) {
    $data = $_GET['data'];
    print_r($data);
    exit;
}
?>
<head>
    <script type="text/javascript" src="jquery-1.6.4.min.js"></script>
</head>
<script type="text/javascript">
    $.getJSON('temp.php', {
        "test": 1,
        "data": []
    })
</script> 
```

这是我正在尝试做的简化版本。基本上，我将数据发送到 PHP，以便它可以更新数据库。如果我发送一个空数组，它应该保存一个空数组。然而，在上面的例子中，只有“test”被通过，“data”被丢弃。我能想到的唯一解决方案是做一些草率的事情，像这样：

```
if (! isset($data = $_GET['data']))
    $data = array(); 
```

所以，我基本上只是在 JSON/JS 扔掉它之后创建一个空数组。除非有别的办法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:14:56.500

```
$.getJSON('temp.php', {
    "test": 1,
    "data": JSON.stringify([])
}) 
```

# ios - Xcode 在点击动态内容后打开一个 youtube 视频

> ID：10979014
> 
> 赞同：0
> 
> 时间：2012-06-11T11:14:05.110
> 
> 标签：ios, xcode, video, youtube

我想在用户点击动态生成的图像后打开 youtube 视频。用户搜索视频，并在屏幕上显示 10 个图像预览（该部分已完成），知道我想检测对该视图的点击并打开与该预览相对应的 youtube 视频。

你知道我是怎么做的吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:24:40.157

您可以使用图像标签后跟其网址。

# c# - 如何将 Lambda 表达式转换为 Sql？

> ID：10979017
> 
> 赞同：7
> 
> 时间：2012-06-11T11:14:12.740
> 
> 标签：c#, linq, lambda, asqueryable

我正在开发一个小框架来访问数据库。我想添加一个使用 lambda 表达式进行查询的功能。我该怎么做呢？

```
public class TestModel
{
    public int Id {get;set;}
    public string Name {get;set;}
}

public class Repository<T>
{
    // do something.
} 
```

例如：

```
var repo = new Repository<TestModel>();

var query = repo.AsQueryable().Where(x => x.Name == "test"); 
// This query must be like this:
// SELECT * FROM testmodel WHERE name = 'test'

var list = query.ToDataSet();
// When I call ToDataSet(), it will get the dataset after running the made query. 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-11T12:00:04.310

继续并创建一个[LINQ 提供程序](http://msdn.microsoft.com/en-us/library/bb546158.aspx)（我相信您无论如何都不想这样做）。

这是很多工作，所以也许您只想使用[NHibernate](https://www.nhforge.org/)或[实体框架](http://en.wikipedia.org/wiki/ADO.NET_Entity_Framework)或类似的东西。

如果您的查询相当简单，也许您不需要完整的 LINQ 提供程序。查看[表达式树](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/expression-trees/)（由 LINQ 提供程序使用）。

你可以*破解*这样的东西：

```
public static class QueryExtensions
{
    public static IEnumerable<TSource> Where<TSource>(this Repo<TSource> source, Expression<Func<TSource, bool>> predicate)
    {
        // hacks all the way
        dynamic operation = predicate.Body;
        dynamic left = operation.Left;
        dynamic right = operation.Right;

        var ops = new Dictionary<ExpressionType, String>();
        ops.Add(ExpressionType.Equal, "=");
        ops.Add(ExpressionType.GreaterThan, ">");
        // add all required operations here            

        // Instead of SELECT *, select all required fields, since you know the type
        var q = String.Format("SELECT * FROM {0} WHERE {1} {2} {3}", typeof(TSource), left.Member.Name, ops[operation.NodeType], right.Value);
        return source.RunQuery(q);
    }
}
public class Repo<T>
{
    internal IEnumerable<T> RunQuery(string query)
    {
        return new List<T>(); // run query here...
    }
}
public class TestModel
{
    public int Id { get; set; }
    public string Name { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        var repo = new Repo<TestModel>();
        var result = repo.Where(e => e.Name == "test");
        var result2 = repo.Where(e => e.Id > 200);
    }
} 
```

请不要按原样使用它。这只是一个快速而肮脏的示例，如何分析表达式树以创建 SQL 语句。

为什么不直接使用 Linq2Sql、NHibernate 或 EntityFramework...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T12:42:14.093

如果你想做类似的事情

```
db.Employee
.Where(e => e.Title == "Spectre")
.Set(e => e.Title, "Commander")
.Update(); 
```

或者

```
db
.Into(db.Employee)
    .Value(e => e.FirstName, "John")
    .Value(e => e.LastName,  "Shepard")
    .Value(e => e.Title,     "Spectre")
    .Value(e => e.HireDate,  () => Sql.CurrentTimestamp)
.Insert(); 
```

或者

```
db.Employee
.Where(e => e.Title == "Spectre")
.Delete(); 
```

然后看看这个，[BLToolkit](http://bltoolkit.net/Doc.Linq.ashx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T09:16:32.347

你可能想看看[http://iqtoolkit.codeplex.com/](http://iqtoolkit.codeplex.com/)这是非常复杂的，我不建议你从头开始构建一些东西。

我刚刚写了一些接近 dkons 答案的东西，无论如何我都会添加它。只是使用流畅的界面而已。

```
public class Query<T> where T : class
{
    private Dictionary<string, string> _dictionary;

    public Query()
    {
        _dictionary = new Dictionary<string, string>();
    } 

    public Query<T> Eq(Expression<Func<T, string>> property)
    {
        AddOperator("Eq", property.Name);
        return this;
    }

    public Query<T> StartsWith(Expression<Func<T, string>> property)
    {
        AddOperator("Sw", property.Name);
        return this;
    }

    public Query<T> Like(Expression<Func<T, string>> property)
    {
        AddOperator("Like", property.Name);
        return this;
    }

    private void AddOperator(string opName, string prop)
    {
        _dictionary.Add(opName,prop);
    }

    public void Run(T t )
    {
        //Extract props of T by reflection and Build query   
    }
} 
```

假设你有一个模型

```
class Model
    {
        public string Surname{ get; set; }
        public string Name{ get; set; }
    } 
```

您可以将其用作：

```
static void Main(string[] args)
        {

            Model m = new Model() {Name = "n", Surname = "s"};
            var q = new Query<Model>();
            q.Eq(x => x.Name).Like(x=>x.Surname).Run(m);

        } 
```

# android - 在 ActionBar 中使用广播接收器和选项卡开发 UI

> ID：10979023
> 
> 赞同：0
> 
> 时间：2012-06-11T11:15:07.963
> 
> 标签：android, broadcastreceiver, android-actionbar, android-4.0-ice-cream-sandwich

我正在使用`ActionBar Tabs`. `Android 4`我有 5 个`Broadcast receivers`，它们都更新了 UI 的一部分。我的应用程序中有两个选项卡，两个选项卡都有不同的 UI 关联（即两个选项卡都有不同的 xml 文件与之关联，这些文件将根据选项卡选择进行膨胀）。对于每个选项卡，我都在膨胀一个片段。

最初，我只显示一个选项卡。单击与该选项卡关联的 UI 中的按钮时，我添加了另一个选项卡，并收到 5 个广播接收器。我以任何顺序获得广播接收器。现在说有以下广播接收器：`A B C D E`

```
A, B, D and E updates the UI which is part of Tab 1\.   

C updates the UI which is part of Tab 2. 
```

每当创建一个新选项卡时，它的 UI 都会被前一个选项卡的 UI 替换，所以当比如说`A and B`被调用时，它们会更新来自 Tab 1 的 UI，但是当收到 C 时，UI 现在会替换为 Tab2 的 UI，并且它更新 UI，但是当`D and E`收到时，他们尝试更新选项卡 1 的 UI，但由于选项卡 2 现在已膨胀，我在`D and E`尝试进行更改的语句上出现空指针异常。

所以请告诉我，我应该如何根据广播公司更新我的 UI？

**更新：**现在，我在以下方面得到了 NPE：这是在我的一个接收器内，在这里我正在创建新选项卡并希望从广播接收器中插入一个表。

```
ActionBar actionbar = getActionBar();
actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
ActionBar.Tab bTab = actionbar.newTab().setText("B");
bFragment = new BFragment();
bTab.setTabListener(new MyTabsListener(bFragment));
actionbar.addTab(bTab, true);

final LinearLayout linearLayout = (LinearLayout) findViewById(R.id.mdsTable); // NPE linearLayout is not getting initialized. 
```

我不明白为什么会这样，因为我已将 MyTabsListener 实现为：

```
class MyTabsListener implements ActionBar.TabListener {
    public Fragment fragment;

    public MyTabsListener(Fragment fragment) {
        this.fragment = fragment;
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        Toast.makeText(StartActivity.appContext, "Reselected!",
                Toast.LENGTH_LONG).show();
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        ft.replace(R.id.fragment_container, fragment);
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        ft.remove(fragment);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:58:04.373

我在这里所做的是，首先，每当我收到时`Broadcast Receivers`，我不会在`onReceive()`方法中更新 UI，而是将收到的数据保存到持久存储中。

并且根据事件，我曾经创建一个新的选项卡。现在，当用户导航到新选项卡时，`onCreateView()`会为该选项卡调用 ，然后我在此方法中更新 UI。

所以没有问题：

```
Whenever a new tab is created, its UI gets replaced with previous tab's UI, so when, say A and B gets called, they update the UI which is from Tab 1, but when C is received, the UI is now replaced with Tab2's UI, and it updates the UI, but when D and E is received, they try to update the UI of tab 1, but since tab 2 is now inflated, I get null pointer exception on that statement on which D and E tried to make change. 
```

`onCreateView()`因为我在每个选项卡的每个方法中更新了 UI 。

# jquery - 如何防止多次加载jquery文件？

> ID：10979024
> 
> 赞同：1
> 
> 时间：2012-06-11T11:15:08.817
> 
> 标签：jquery, struts2

我有一个jsp，它链接到标签中的jquery 脚本文件。在此页面中，我有一个标签，当单击链接时，该标签必须从另一个 jsp 文件中加载。新页面中也有一定的jquery操作。但是当我加载页面时没有执行 jquery 操作，因此我也将 jquery 文件加载到新的 jsp 文件中。然后又出现了一个问题，即操作调用不止一次。请给出您宝贵的答复、建议和解决问题的方法...

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>Flyers</title>

<link href="css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="js/lib.js"></script>
<script type="text/javascript" src="js/scripts.js"></script>
<script type="text/javascript" src="js/jquery.json-2.3.min.js"></script>
</head>

   <div class="page_steps">
            <s:form method="post" action="flyers" name='ldm_form' id='ldm_form_flyers'>

                <!-- Question 1 -->
                <div class="questionstep">
                    <div class="stepno">STEP 1</div>
                    <h2>Enter the correct DEC:</h2>
                    <input type="text" id="dec" name="oci.dec" value="" class="inputbx numericonly"  maxlength="16" />

                    <div class="errbox">Please enter valid DEC</div>
                    <input type="button" value="" class="btn_continue"  />
                </div>

                <!-- Question 2-->
                <div class="questionstep">
                    <div class="stepno">STEP 2</div>
                    <h2>Select Your target program</h2>
                    <div class="errbox">Please select at lease one</div>
                    <s:iterator value="targetPrograms">
                    <input type="radio" name="tpId" value="<s:property value="tpId"/>"/><label id="<s:property value="tpId"/>"><s:property value="tpName"/></label><br/>
                    </s:iterator>
                    <input type="button" value="" class="btn_continue"  />
                </div>

                <!-- Question 3 -->
                <div class="questionstep">
                    <div class="stepno">STEP 3</div>
                    <h2>Select Your Mailing Materials</h2>
                    <div class="errbox">Please select at lease one</div>

                    <strong>Self Mailer</strong><br />
                    <div class="mailmaterials">
                        <ul class="questslider">
                            <s:iterator value="mailingmaterials" id="mailMat" begin="0" end="1">
                                <li>
                                <div class="quickpreview"><p>QUICK PREVIEW</p><div class="noshow">
                                    <s:iterator value="#mailMat.templatePath" id="tempPath" begin="0" end="1">
                                        <s:property value="#tempPath.ldmImgPath"/><s:property value="#tempPath.ldmImgName"/>,
                                    </s:iterator>
                                    </div></div>
                                <s:iterator value="#mailMat.templatePath" id="tempPath" begin="2">
                                <img src="<s:property value="#tempPath.ldmImgPath"/><s:property value="#tempPath.ldmImgName"/>" width="90" height="149" alt="" />
                                </s:iterator>
                                <br />
                                <label>
                                <input type="radio" name="mailMatId" value="<s:property value="#mailMat.mailMatId"/>"/><s:property value="#mailMat.mailMatName"/></label>
                                </li>
                            </s:iterator>

                        </ul>
                    </div> 
```

这是我的主要jsp页面，这里我只显示了必须动态更改的标题部分和标签，页面很大，上传我想这么多就足够了，

在我的第二个jsp页面中

```
<s:set name="tabNo" value="tabNo"/>
                <s:if test="%{#tabNo==0}">
                    <s:form method="post" action="flyers" name='ldm_form' id='ldm_form_flyers'>
                        <!-- Question 1 -->
                        <div class="questionstep">
                            <div class="stepno">STEP 1</div>
                            <h2>Enter the correct DEC:</h2>
                            <input type="text" id="dec" name="oci.dec" value="" class="inputbx numericonly"  maxlength="16" />

                            <div class="errbox">Please enter valid DEC</div>
                            <input type="button" value="" class="btn_continue"  />
                        </div>
                        <!-- Question 2-->
                        <div class="questionstep">
                            <div class="stepno">STEP 2</div>
                            <h2>Select Your target program</h2>
                            <div class="errbox">Please select at lease one</div>
                            <s:iterator value="ordCaptAct.targetPrograms">
                            <input type="radio" name="tpId" value="<s:property value="tpId"/>"/><label id="<s:property value="tpId"/>"><s:property value="tpName"/></label><br/>
                            </s:iterator>
                            <input type="button" value="" class="btn_continue"  />
                        </div>
                        <!-- Question 3 -->
                        <div class="questionstep">
                            <div class="stepno">STEP 3</div>
                            <h2>Select Your Mailing Materials</h2>
                            <div class="errbox">Please select at lease one</div>

                            <strong>Self Mailer</strong><br />
                            <div class="mailmaterials">
                                <ul class="questslider">
                                    <s:iterator value="ordCaptAct.mailingmaterials" id="mailMat" begin="0" end="1">
                                        <li>
                                        <div class="quickpreview"><p>QUICK PREVIEW</p><div class="noshow">
                                            <s:iterator value="#mailMat.templatePath" id="tempPath" begin="0" end="1">
                                                <s:property value="#tempPath.ldmImgPath"/><s:property value="#tempPath.ldmImgName"/>,
                                            </s:iterator>
                                            </div></div>
                                        <s:iterator value="#mailMat.templatePath" id="tempPath" begin="2">
                                        <img src="<s:property value="#tempPath.ldmImgPath"/><s:property value="#tempPath.ldmImgName"/>" width="90" height="149" alt="" />
                                        </s:iterator>
                                        <br />
                                        <label>
                                        <input type="radio" name="mailMatId" value="<s:property value="#mailMat.mailMatId"/>"/><s:property value="#mailMat.mailMatName"/></label>
                                        </li>
                                    </s:iterator>

                                </ul>
                            </div> 
```

在 jquery 文件中，我有这样的代码

```
$('.tab').click(function(){
      $('.tabmenu').children().removeClass('active');
      $(this).parent('li').addClass("active");
      var tabIndex=$(this).parent('li').index();
      alert(typeof jQuery);
      changeTabHtml("tabMenuAction_forms.action", "tabNo="+tabIndex, '.page_steps');
      changeTabHtml("tabMenuAction_steps.action", "tabNo="+tabIndex, '.orderprocess_steps');
      changeTabHtml("tabMenuAction_headerCaption.action", "tabNo="+tabIndex, ".headercaption");
  });

function changeTabHtml(urlLink, data, divClass){
      $.ajax({
          type: "POST",
          url: urlLink,
          data: data,
          cache: false,
          success: function(msg){
              $(divClass).html(msg);
          }
        });
} 
```

直到这里一切正常......第二页正在动态加载一切正常。但是当它加载时，“btn_continue”必须调用一些 jquery 函数，如下所示

```
 $('#ldm_form_flyers .btn_continue').click(function(){
     var getid = $('.btn_continue').index($(this));
     switch(getid){
         case 0:
            var getval = $.trim($("input[name='oci.dec']").val());
             if(getval=='' || getval.length!=16 || getval.match(/[^\d]/)){
                $("input[name='oci.dec']").addClass('err');
                $('.questionstep:eq('+getid+') .errbox').slideDown();
             }
             else{
                 $.getJSON("btn_continueAction?btn_continueId="+getid+"&oci.dec="+getval, function(data){
                     var isNext=data.savedInSession;
                $('.stepsanswer').eq(getid).find('span').html(getval);
                $("input[name='oci.dec']").removeClass('err');
                $('.decanswer').html(getval);
                if(isNext==true)
                    nextquestion(getid);
                else
                    $('.questionstep:eq('+getid+') .errbox').slideDown();
                 });
            }
            break; 
```

现在加载此功能后不起作用。因此，我也尝试在第二页中加载 jquery 文件，然后它工作正常，但它开始多次访问服务器，因为文件加载了两次，然后是 4 次，然后是 8 .. 最终我的应用程序变慢了向下。那么是否有任何方法可以防止文件的加载，或者任何解决方案为什么“btn_continue”在不加载第二个jsp中的jquery文件的情况下无法正常工作......？？？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T17:50:53.620

由于您在 DOM 中动态添加元素，因此您应该使用`.delegate()`方法访问它们。

代替

```
$('#ldm_form_flyers .btn_continue').click(function(){ 
```

用这个

```
 $('#ldm_form_flyers .btn_continue').delegate("click", function() { 
```

从 jquery 1.7 开始，您应该使用`.on()`而不是`.delegate()`

`live()`, `delegate()`,方法的基本优点`on()`是您可以使用它们来执行事件：`hover`,`click`等，在一个尚不存在的元素上，直到您稍后通过 AJAX、JavaScript 的 createElement 方法等添加该元素。

**注意**：`live`已弃用，`delegate`应用于 1.7.x 以外的 jQuery 版本。[在这里](http://api.jquery.com/live/)阅读更多

**此外**，当您基本上在原始页面中填充远程内容时，删除第二个 jsp 中额外添加的 javascript。

**编辑：：：**

这是因为您没有改变 .on 的工作方式。你只是不能从“live”变成“on”。api是不同的`.on()`

```
$(document).on('click', '#ldm_form_flyers .btn_continue', function(){
    //your code
}); 
```

它是这样工作的::

```
$(document).on(events, selector, data, handler); 
```

You should always consult the relevant documentation of different API's [here](http://api.jquery.com) before using them.

# java - How to assign unique numbers to the tree nodes so that from the tree leaf I can trace back the parents?

> ID：10979025
> 
> 赞同：0
> 
> 时间：2012-06-11T11:15:17.607
> 
> 标签：java, data-structures, tree

I have to structure certain data and tree data structure suited the requirement.
I have to assign certain number to each node in such a manner that I can trace back the parent from its number. I am planning to use hashtable to store these numbers as keys, so there cannot be any duplicate value.

e.g.

parent - 000001
  child1 - 000011
    innerchild1 - 000111 (level 2, get 2 bits from right and we can reach parent)
    innerchild2 - 000211
  child2 - 000021
    innerchild1 - 000121
    innerchild2 - 000221

Depending on the level, I can mask certain bits and I can uniquely identify the parent. But if my tree grows wider(i.e. more parents, numbers will duplicate) How to overcome this problem?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:29:34.720

我认为“定义明确”的数字作为键还不够好。

您需要根据您的要求设计一个树结构，或者至少设计一个 Node 类来更轻松地获取 parentId/parent Node。

例如

```
Node{
 id, #could be string, number, unique
 actualNode # you node value
 parentId (or Node parentNode )
} 
```

如果您出于某种原因坚持使用哈希表，您仍然可以使用 node.id 作为键。有多种方法可以生成唯一的字符串、数字。例如当前的纳秒...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:09:13.663

我建议您使用数字 1-9 的数字。

为什么没有-0？前导 0 的 9 位数字在没有前导 0 的情况下看起来像 8 位，会导致错误。

因此，直到任何父母最多有 9 个孩子，这个结构就足够了。

数字 0 - 共同根
1-9 - 第一个孩子
11-19 - 第一个孩子的第二代孩子......
等等

如果您的节点超过 9 位，请使用 100 基算术。（允许的数字为 10-99）。99个孩子够吗？如果没有，请使用 100-999。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T12:09:20.247

可以使用嵌套集树哟解决问题。请参考下面的书。这是一本了不起的书，其中还包含有关嵌套集树的文本。

[http://www.elsevier.com/wps/find/bookdescription.cws_home/702605/description](http://www.elsevier.com/wps/find/bookdescription.cws_home/702605/description)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T12:14:50.620

您为节点分配“特殊”数字的方法听起来很糟糕——可能会导致大量的工作、可扩展性限制以及最重要的是......错误。

如果您需要知道父节点是什么，请将对父节点的引用存储在节点的字段中！

# blackberry - Not able to set the focus on a HorizontalFieldManager

> ID：10979027
> 
> 赞同：1
> 
> 时间：2012-06-11T11:15:23.253
> 
> 标签：blackberry

I am not able to set the focus on the `HorizontalFieldManager` having two `LabelFields`. I want to highlight the `HorizontalFieldManager` when it gets focus. I am using the following code, but it is not working.

```
HorizontalFieldManager hrzMgrTimeLabel = new HorizontalFieldManager(
        Manager.USE_ALL_HEIGHT|Manager.FOCUSABLE) {

    protected void onFocus(int direction) {
        focussed = true;
        invalidate();
        super.onFocus(direction);
    }

    protected void onUnfocus() {
        focussed = false;
        invalidate();
        super.onUnfocus();
    }

    protected void paint(Graphics g) {
        g.setBackgroundColor(0x646060);
        if (focussed) {
            g.setColor(Color.BLUE);
        }
        g.clear();
        super.paint(g);
    }
};

hrzMgrTimeLabel.add(a);
hrzMgrTimeLabel.add(b);

horizontalFieldManager_left15.add(hrzMgrTimeLabel); 
```

Here is the LabelField implementation.

```
final LabelField a= new LabelField("") {
    protected void paint(Graphics graphics) {
        graphics.setColor(Color.WHITE);
        graphics.setBackgroundColor(0x646060);
        graphics.clear();
        super.paint(graphics);
    }
};

final LabelField b= new LabelField("") {
    protected void paint(Graphics graphics) {
        graphics.setColor(Color.WHITE);
        graphics.setBackgroundColor(0x646060);
        graphics.clear();
        super.paint(graphics);
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:57:40.027

该[`getFocusRect()`](http://www.blackberry.com/developers/docs/4.6.0api/net/rim/device/api/ui/Manager.html#getFocusRect%28net.rim.device.api.ui.XYRect%29)功能可能会给您答案。它给出了在 Manager 中应用焦点的程度，然后可以使用`Graphics.paint()`方法或类。`Border`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:37:12.327

如果您想关注您的标签字段，请使用`final LabelField a= new LabelField("".FOCUSABLE)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T11:56:44.780

您需要在`HorizontalFieldManager`. 以下行将执行此操作。

```
hrzMgrTimeLabel.add(new NullField(NullField.FOCUSABLE)); 
```

检查以下代码。

```
HorizontalFieldManager hrzMgrTimeLabel = new HorizontalFieldManager(Manager.USE_ALL_HEIGHT | Manager.FOCUSABLE) {
    protected void paint(Graphics g) {
        g.setBackgroundColor(isFocus() ? Color.BLUE : 0x646060);
        g.clear();
        super.paint(g);
    }

    protected void onFocus(int direction) {
        invalidate();
        super.onFocus(direction);
    }

    protected void onUnfocus() {
        invalidate();
        super.onUnfocus();
    }

    protected boolean navigationMovement(int dx, int dy, int status, int time) {
        invalidate();
        return super.navigationMovement(dx, dy, status, time);
    }

    protected boolean navigationClick(int status, int time) {
        invalidate();
        return super.navigationClick(status, time);
    }

    protected boolean navigationUnclick(int status, int time) {
        invalidate();
        return super.navigationUnclick(status, time);
    }
};

final LabelField a = new LabelField("First Label Field") {
    protected void paint(Graphics graphics) {
        graphics.setColor(Color.WHITE);
        super.paint(graphics);
    }
};

final LabelField b = new LabelField("Second Label Field") {
    protected void paint(Graphics graphics) {
        graphics.setColor(Color.WHITE);
        super.paint(graphics);
    }
};

hrzMgrTimeLabel.add(new NullField(NullField.FOCUSABLE));
hrzMgrTimeLabel.add(a);
hrzMgrTimeLabel.add(b); 
```

***笔记***

`onFocus(...)`, `onUnfocus()`, `navigationMovement(...)`, `navigationClick(...)`, `navigationUnclick(...)`- 这些方法只是为了刷新绘图而被覆盖。

# coldfusion - Is there a "ThisVisit" timestamp in ColdFusion?

> ID：10979028
> 
> 赞同：0
> 
> 时间：2012-06-11T11:15:26.060
> 
> 标签：coldfusion

Coldfusion has a system created client variable called lastvisit.

Is there a way to get the value of that variable during the request that it is actually set (i.e. client.thisvisit)?

The idea would be that I can store the "ThisVisit" timestamp in session and then compare it to lastvisit when the next request is made. This would tell me if another request was made in the session.

The purpose is that we have a page that we use an ajax record lock on which refreshes the lock every minute. After sixty minutes the ajax lock code will automatically log the user out of the website (due to inactivity). The issue arises where the user is executing tasks in other windows/tabs (indication of activity).

Sense all requests update LastVisit, I would like to have the ajax lock code save the save a "thisvisit" value so that the next time it runs it can compare it to the LastVisit client variable.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:38:47.127

几个要求：

*   设置为您的客户端变量使用数据库而不是注册表（相信我）。
*   客户端变量必须启用“全局变量”
*   您的 cfapplication 或 application.cfc 必须启用客户端管理。

如果您有这三件事，则可以选择如下查询：

```
<cfquery name="getLvisit" datasource="myClientVarsDB">
    SELECT lvist 
    FROM   cglobal
    WHERE  cfid = 
        <cfqueryparam type="CF_SQL_CHAR" value="#urltoken#"/>
</cfquery> 
```

urltoken 可能是错误的......它可能需要 jsessionID 或 CFID，但我的*记忆*告诉我 cftoken。我必须使用客户端数据库搜索一个站点才能给你一个明确的答案。

所以这会给你 lvisit 变量的*当前值*。您可以将其存储在会话中，然后将其与后续查询中的表中的值进行比较，然后*再次*覆盖它（如果有意义的话）。

注意 - 这个值在每个请求上都会更新 - 所以你的查询得到的是当前值（*在*它被更新之前）。我以前认为这是*先*更新的，但根据汤姆的说法，它实际上是*最后*更新的。

# c++ - C++, two classes with mutual needs

> ID：10979031
> 
> 赞同：13
> 
> 时间：2012-06-11T11:15:41.807
> 
> 标签：c++, circular-dependency

I have converted a scientific simulation platform from Java into C++. I have tried to keep the design as much as possible the same as previous implementation. In java because of the late binding, circular dependencies are resolved at the run time. However, circular dependencies have created a hell of a mess in C++.

1.  Is there an automated tool which analyses and lists the circular includes and references? (Visual Studio 2010 only issues a huge list of nonsense errors).

2.  I have tried to use forward references wherever possible. However **in some occasions both classes need functionality of the other class (i.e. call to methods which makes it impossible to use forward reference)**. These needs exist in Logic and if I radically change the design they will no more represent real world interactions.

    How could we implement two classes which need each other's methods and status? Is it possible to implement them in C++?

**Examples:**

*   Example 1: I have a class called "World" which creates Objects of the type "Agent". Agent needs to call World methods to get information of its environment. World also needs to iterate through Agents and execute their "run" method and get their status (status updates may possibly be done reverse to solve this section of the problem but not the run method).
*   Example 2: Agents create a collection of their "Intentions". Each Agent needs to iterate through its intentions and run/update/read intention status. Intentions also need to get information about the environment through Agent (if done directly through "World" it will create complex circles again) and also info of the Agent itself.

Below diagram shows a sub-set of classes, and some of their methods and properties:

![sub-set of classes, and some of their methods and properties](../Images/b99981a0d0234eee8c82d1335f7e0aa1.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-11T11:27:53.980

我没有看到前向声明对您不起作用。看起来你需要类似的东西：

世界.h：

```
#ifndef World_h
#define World_h

class Agent;

class World
{
    World();
    void AddAgent(Agent* agent) { agents.push_back(agent); }
    void RunAgents();
private:
    std::vector<Agent*> agents;
};

#endif 
```

代理.h：

```
#ifndef Agent_h
#define Agent_h

class World;
class Intention;

class Agent
{
    Agent(World& world_): world(world_) { world.AddAgent(this); }
    status_t Run();
private:
    World& world;
    std::vector<Intention*> intentions;
};

#endif 
```

世界.cc：

```
#include "World.h"
#include "Agent.h"

void World::RunAgents()
{
    for(std::vector<Agent*>::iterator i = agents.begin(); i != agents.end; ++i)
    {
        Agent& agent(**i);
        status_t stat = agent.Run();
        // do something with stat.
    }
}

// ... 
```

代理.cc：

```
#include "Agent.h"
#include "World.h"
#include "Intention.h"

// ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T11:19:44.987

您**可以**仅使用前向声明来解决问题，但您可能没有将实现与类的声明分开。

如果您需要从类中调用方法，则需要完整类型，这就是您需要包含该文件的原因。您可以将文件包含在`cpp`（实现文件）中，而不必担心循环依赖。

# c# - Deleting directory that contains items

> ID：10979033
> 
> 赞同：2
> 
> 时间：2012-06-11T11:15:47.593
> 
> 标签：c#, directory, cmd

I am trying to delete a directory using C#. The first method I tried was

```
Directory.Delete(@"C:\Program Files (x86)\Qmuzki32"); 
```

I get an exception stating that the directory is not empty. I then found a cmd command which I can use to delete the directory quietly regardless of the fact that the directory is empty or not. I ran the following command in cmd:

```
rmdir /s /q "C:/Program Files (x86)/Qmuzik32" 
```

This worked and did exactly what I wanted it to do. With my first attempt I tried building this command into a C# process like so:

```
if (Directory.Exists(@"C:\Program Files (x86)\Qmuzik32"))
   {
       string sQM32Folder = @"C:\Program Files (x86)\Qmuzik32";
       Process del = new Process();
       del.StartInfo.FileName = "cmd.exe";
       del.StartInfo.Arguments = string.Format("rmdir /s /q \"{0}\"", sQM32Folder);
       del.WaitForExit();
   } 
```

This did not work and then I tried it like this:

```
if (Directory.Exists(@"C:\Program Files (x86)\Qmuzik32"))
   {
       string sQM32Folder = @"C:\Program Files (x86)\Qmuzik32";
       Process del = new Process();
       del.StartInfo.FileName = "rmdir.exe";
       del.StartInfo.Arguments = string.Format("/s /q \"{0}\"", sQM32Folder);
       del.WaitForExit();
   } 
```

Same problem. I get the exception:

```
No process is associated with this object. 
```

I do think I am on the right track; maybe the code above just requires some tweaking.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T11:18:13.930

Just use [Directory.Delete(string, bool)](http://msdn.microsoft.com/en-us/library/fxeahc5f.aspx).

While the low-level filesystem APIs of course require you to make sure the directory is empty first, any half-decent framework abstracting them allows you do do a recursive delete. In fact, existence of such a method *would be the first thing I'd check before even trying to resort to external programs*.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-11T11:23:49.307

如果你想使用 cmd 方式，你可以使用这个：

```
ProcessStartInfo Info = new ProcessStartInfo(); 
Info.Arguments = "/C rd /s /q \"C:\\Program Files (x86)\\Qmuzik32\""; 
Info.WindowStyle = ProcessWindowStyle.Hidden; 
Info.CreateNoWindow = true; 
Info.FileName = "cmd.exe"; 
Process.Start(Info); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-11T11:19:57.827

```
del.Start();
del.WaitForExit(); 
```

你没有启动procces所以它没有PID所以它死了

# sql - Single default value in a table

> ID：10979035
> 
> 赞同：3
> 
> 时间：2012-06-11T11:15:54.553
> 
> 标签：sql, sql-server

I'm creating a table that'll have a single bit not null column `IsDefault`. I need to write a constraint that'll make sure there'll be only one default value per `UserId` (field in the same table). I can't use unique constraint on this because it is possible to have many non-default values.

What is the best approach to do this using MS SQL Server 2008?

Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T11:20:23.707

我看到的最简单的方法是使用 UDF（用户定义函数）的检查约束。

例如，看这里。 [http://sqljourney.wordpress.com/2010/06/25/check-constraint-with-user-defined-function-in-sql-server/](http://sqljourney.wordpress.com/2010/06/25/check-constraint-with-user-defined-function-in-sql-server/)

未经测试的例子

```
CREATE FUNCTION dbo.CheckDefaultUnicity(@UserId int)
RETURNS int
AS 
BEGIN
   DECLARE @retval int
   SELECT @retval = COUNT(*) FROM <your table> where UserId = @UserId and <columnwithDefault> = 1-- or whatever is your default value
   RETURN @retval 
END;
GO 
```

改变你的桌子

```
ALTER TABLE <yourTable> 
ADD CONSTRAINT Ck_UniqueDefaultForUser 
CHECK (dbo.CheckDefaultUnicity(UserId) <2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T11:37:42.260

Check Constraint 肯定会起作用，但在我看来，这不是一个好的设计选择。原因是您的 UDF 约束将类似于

```
SELECT @Count = COUNT(UserId) 
FROM   User
WHERE  IsDefault = 1
GROUP BY UserId
HAVING COUNT(UserId) > 1

IF @Count > 0 
  ....'FAIL 
```

由于这涉及 2 列，因此需要成为表级别约束，并且您拥有的记录越多，插入/更新/删除的速度就越慢。

更好的选择是只允许通过存储过程访问该表，因此在插入/更新之前，您可以非常快速地运行

```
IF EXISTS(SELECT UserId FROM User where UserId = @UserId and IsDefault = 1) 
```

在您的插入/更新/删除之前

但是，我可以理解您可能正在使用 ORM，并且可能不希望在您的系统中使用存储过程，因此您可以将表的设计更改为下面。这假设

tblUser：UserId、FirstName、Suraname 等

tblUserDefault：*UserId*（唯一约束）

我不确定 IsDefault 在您的系统中代表什么，所以我在上面假设用户是默认的或不是的。任何人都可以将其用作参考。它允许您在不使用 USP 或可怕的全表检查约束（或触发器）的情况下强制执行约束，并且可以在任何体面的 ORM 中映射

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T11:36:10.253

另一个相对简单的选择是使用`CLUSTERED INDEXED VIEW`. 这样做的要点是

*   从视图中`UserID`的表中选择所有的。`IsDefault=1`
*   添加唯一索引`UserID`

**聚集索引视图**

```
CREATE VIEW dbo.VIEW_Users_IsDefault WITH SCHEMABINDING AS 
  SELECT  UserID, IsDefault
  FROM    dbo.Users
  WHERE   IsDefault = 1
GO  

CREATE UNIQUE CLUSTERED INDEX UIX_VIEW_USERS_ISDEFAULT 
  ON dbo.VIEW_Users_IsDefault (UserID)
GO 
```

**测试脚本**

```
BEGIN TRAN

CREATE TABLE dbo.Users (UserID INT, IsDefault BIT)
GO

CREATE VIEW dbo.VIEW_Users_IsDefault WITH SCHEMABINDING AS 
  SELECT  UserID, IsDefault
  FROM    dbo.Users
  WHERE   IsDefault = 1
GO  

CREATE UNIQUE CLUSTERED INDEX UIX_VIEW_USERS_ISDEFAULT ON dbo.VIEW_Users_IsDefault (UserID)
GO

INSERT INTO dbo.Users VALUES (1, 0)
INSERT INTO dbo.Users VALUES (1, 1)
INSERT INTO dbo.Users VALUES (1, 1)  -- Fails because of clustered index

ROLLBACK TRAN 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T11:38:57.207

到目前为止，我认为任何答案都没有任何问题，`CHECK CONSTRAINTS`但是`TRIGGERS`，这对我来说似乎有点倒退。

我只能假设`UserID`您的表中是一个表的外键`User`，那么为什么不在您的用户表中添加一列来存储默认的 CardID，而不是将其标记为默认值呢？这使得用户不可能在没有代价高昂的触发器/约束的情况下拥有多个默认 CardID。如果您使该列不可为空，那么如果您愿意，用户也不可能没有默认 CardID。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T11:20:03.723

怎么样`CHECK Constraints`。见这里： http: [//msdn.microsoft.com/en-us/library/ms188258 (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms188258(v=sql.105).aspx)

```
ALTER TABLE yourtable
ADD CONSTRAINT IsDefaultChecked CHECK (IsDefault = T ); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-11T11:50:03.343

虽然我认为触发器和约束解决方案更好，但如果您通过存储过程控制插入/更新，一种更简单的方法是首先更新冲突的行（假设新的默认值总是获胜）：

```
ALTER PROCEDURE dbo.UserWhateverTable_<action>
  @UserID INT,
  @CardID INT
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE dbo.UserWhatever 
      SET IsDefault = 0 
      WHERE UserID = @UserID
        AND CardID = @CardID
        AND IsDefault = 1;

    -- insert or update here
END
GO 
```

事实上，这样做可能不是一个坏主意（因此业务逻辑在您的 DML 过程中是 100% 清晰的），除了使用触发器或约束来保护它（以捕获在您的过程之外进行更新的情况） .

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-11T11:31:40.910

在这种情况下，您可能需要使用触发器。当用户更改他们的默认值时，触发器可以自动将当前用户的当前默认值翻转为 false。

基本上，使用 AFTER insert/update 触发器将 IsDefault 列设置为 0，以便在 IsDefault 值设置为 1 的插入/更新中的任何用户。

```
CREATE TRIGGER dbo.tr_default
ON dbo.MyTable
AFTER INSERT, UPDATE 
AS

  if(exists(select * from inserted where IsDefault = 1)
  begin

      update dbo.MyTable
        set IsDefault = 0
      from inserted i
      join dbo.MyTable t on i.userid = t.userid
      where i.IsDefault = 1
        and i.TheValue != t.TheValue

  end 
```

# appfabric - AppFabric Error @ objCache.Get(key)

> ID：10979041
> 
> 赞同：0
> 
> 时间：2012-06-11T11:16:39.797
> 
> 标签：appfabric

I am able to put/add 70MB of data to AppFabric successfully. But I am getting following error when I try to retrieve the same thru `_cache.Get(key)` method.

1.  Please let me know what's wrong.
2.  Let me know if its good this huge data

**Error**

> "ErrorCode:SubStatus:The connection was terminated, possibly due to server or network problems or serialized Object size is greater than MaxBufferSize on server. Result of the request is unknown."

**Stack Trace**

```
at Microsoft.ApplicationServer.Caching.DataCache.ThrowException(ResponseBody respBody)
at Microsoft.ApplicationServer.Caching.DataCache.InternalGet(String key, DataCacheItemVersion& version, String region)   
at Microsoft.ApplicationServer.Caching.DataCache.Get(String key) 
```

**Web Config at client**

```
<dataCacheClient requestTimeout="150000" channelOpenTimeout="20000" maxConnectionsToServer="1">
    <localCache isEnabled="false" sync="TimeoutBased" ttlValue="300" objectCount="10000"/>
    <clientNotification pollInterval="300" maxQueueLength="10000"/>
    <hosts><host name="MachineName" cachePort="22233"/></hosts>
    <securityProperties mode="None" protectionLevel="None" />
    <transportProperties connectionBufferSize="131072" maxBufferPoolSize="2147483647" maxBufferSize="2147483647" maxOutputDelay="2" channelInitializationTimeout="60000" receiveTimeout="2147483647"/> 
</dataCacheClient> 
```

**Configuration at Server**

```
<transportProperties maxBufferPoolSize="2147483647" maxBufferSize="2147483647" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T02:02:40.517

您应该考虑另一种解决方案来放置一个 70MB 的对象。AppFabric 适用于非常频繁访问的易失性数据，理想情况下低于 256kB（查看他们的[基准测试结果](http://go.microsoft.com/fwlink/?LinkId=212272)，可[在此处](http://msdn.microsoft.com/en-us/library/gg186017%28v=azure.10%29.aspx)获得）。

注意：基准测试结果链接目前似乎已断开。

# google-maps-api-3 - How to insert data into fusion table using php

> ID：10979056
> 
> 赞同：0
> 
> 时间：2012-06-11T11:17:41.993
> 
> 标签：google-maps-api-3, google-fusion-tables

I am using fusion tables to generate pins over the map. now I want to insert more coordinates data into the table using php but couldn't get any exact idea how to do it?

Can anyone help me for that?

Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:18:24.887

我想恭敬地建议，仅将海报引用到 Fusion Table PHP 库的答案可能对许多人没有帮助，并且可能会让某些人彻底灰心。PHP 库是一组令人印象深刻的相互关联的脚本。它也很庞大，大部分没有注释，并且需要许多嵌套的“包含”和“需要”。整个事情必须超过 2000 行，甚至很难破译你需要哪些部分。

对于海报，起点需要是开发人员指南和 OAuth2 指南。这些在：

[https://developers.google.com/fusiontables/docs/articles/oauthfusiontables](https://developers.google.com/fusiontables/docs/articles/oauthfusiontables)

[https://developers.google.com/fusiontables/docs/developers_guide](https://developers.google.com/fusiontables/docs/developers_guide)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:16:07.690

请参阅[Fusion Table PHP 库](http://code.google.com/p/fusion-tables-client-php/)

# sas - 如何停止出现在企业指南中的表格？

> ID：10979058
> 
> 赞同：5
> 
> 时间：2012-06-11T11:17:50.413
> 
> 标签：sas, enterprise-guide

我正在编写程序供其他用户在基于 SAS 9.3 的企业指南中运行。它将各种信息位记录到表中。有什么办法可以阻止这个表出现在流程中？

注意 这几乎都是使用“用户编写的代码”步骤完成的。不幸的是，菜单中的设置（见下面 vasja 的回答）似乎不会影响 UWC 步骤。

（我见过这个：[告诉 SAS 不要在流程中添加新生成的表，](https://stackoverflow.com/questions/5720171/tell-sas-not-to-add-newly-generated-tables-on-the-process-flow)但我使用的是 9.3，所以它不起作用！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-03T17:01:48.240

一位同事 (twitter.com/binarytrain) 想出了一个解决方案。

在 9.3 中，如果在代码步骤结束时仍然分配了表所在的库，则表总是添加到 EG 项目中 (1)。因此，在上面的问题中，诀窍是在代码步骤结束时清除 libname。

这可以进一步用于“劝阻”——而不是阻止——用户干预临时表。

*   在 &sasworklocation 中创建一个名为 _work 的文件夹
*   将其注册为库
*   在这个新库中保存任何临时表
*   在代码步骤结束时清除此库

此时临时表无法访问，无需运行 libname 语句

*   再次需要表时重新注册库。

(1) 即使它是使用不同的名称分配的，所以这不适用于预先分配的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:40:29.513

在 EG 5.1 中：转到工具 - 选项，选择结果常规：取消选择自动将输出添加到项目树。

# castle-windsor - How can I do dependency injection into action filters in ASP.NET 4 RC WebAPI?

> ID：10979059
> 
> 赞同：7
> 
> 时间：2012-06-11T11:17:55.063
> 
> 标签：castle-windsor, asp.net-mvc-4, asp.net-web-api, action-filter

I'm using Windsor to manage IoC for my controllers in a WebAPI project. I've got a DependencyResolver working nicely to resolve controller dependencies, but now I'm looking to inject dependencies into a custom action filter I'm using to manage authentication.

I've looked into using a custom ActionInvoker but it's not clear from the interface that WebAPI is using how I would go about resolving property dependencies on the custom action filter attribute before it executes. Anyone have a good example of how to do this in the MVC 4 RC?

EDIT: I'm aware you can't do constructor injection on filters, because they're attributes and therefore instantiated by the .NET framework - but I'm hoping there's some point in the execution lifecycle that happens AFTER the filter is instantiated but BEFORE it gets executed, where I could run some custom code to enumerate across the filters' public properties and inject the necessary services.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-11T11:30:19.360

操作过滤器是属性。在 .NET 属性中，实例化过程由 .NET 运行时管理，您无法控制它。因此，一种可能性是使用[*Poor Man's Dependency Injection*](http://lostechies.com/jimmybogard/2009/07/03/how-not-to-do-dependency-injection-in-nerddinner/)，我个人建议您不要这样做。

另一种可能性是使用标记属性：

```
public class MyActionFilterAttribute : Attribute 
{ 

} 
```

然后使用构造函数注入操作过滤器：

```
public class MyActionFilter : ActionFilterAttribute
{
    private readonly IFoo _foo;
    public MyActionFilter(IFoo foo)
    {
        _foo = foo;
    }

    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        if (actionContext.ActionDescriptor.GetCustomAttributes<MyActionFilterAttribute>().Any())
        {
            // The action is decorated with the marker attribute => 
            // do something with _foo
        }
    }
} 
```

然后将其注册为全局操作过滤器`Application_Start`：

```
IFoo foo = ....
GlobalConfiguration.Configuration.Filters.Add(new MyActionFilter(foo)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T13:09:26.510

我遇到了同样的问题，但决定为此使用 ServiceLocator (DependencyResolver.GetService)，因为它在框架中似乎是一种有效的方法

```
public class RequiresSessionAttribute :
    ActionFilterAttribute
{
    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        var sessionService =
            (ISessionService) actionContext
                    .ControllerContext.Configuration.DependencyResolver
                    .GetService(typeof (ISessionService));

        var sessionId = HttpUtility
            .ParseQueryString(actionContext.Request.RequestUri.Query)
            .Get("sessionId");

        if (sessionId == null
            || !sessionService.IsValid(sessionId))
            throw new SessionException();

        base.OnActionExecuting(actionContext);
    }
} 
```

这是对这个属性的测试，有点痛苦但可能

```
public class requires_sessionId
{
    [Fact]
    void can_call_action_with_session_id()
    {
        var context = GetContext("http://example.com/?sessionId=blaa");

        var sut = new RequiresSessionAttribute();

        Assert.DoesNotThrow(
            () => sut.OnActionExecuting(context));
    }

    [Fact]
    void can_not_call_action_without_session_id()
    {
        var context = GetContext("http://example.com/");

        var sut = new RequiresSessionAttribute();

        Assert.Throws<SessionException>(
            () => sut.OnActionExecuting(context));
    }

    HttpActionContext GetContext(string url)
    {
        var sessionServiceMock = new Mock<ISessionService>();
        sessionServiceMock
            .Setup(x => x.IsValid(It.IsAny<string>()))
            .Returns(true);

        var dependancyResolverMock = new Mock<IDependencyResolver>();
        dependancyResolverMock
            .Setup(x => x.GetService(It.IsAny<Type>()))
            .Returns(sessionServiceMock.Object);

        var config = new HttpConfiguration
               {
                   DependencyResolver = dependancyResolverMock.Object
               };
        var controllerContext = new HttpControllerContext
               {
                    Configuration = config,
                    Request = new HttpRequestMessage(
                               HttpMethod.Get,
                               url)
                };

        return
            new HttpActionContext
                {
                    ControllerContext = controllerContext,
                };
    }
} 
```

# assembly - GNU 对带有全局标签的 jmp 来说很奇怪

> ID：10979060
> 
> 赞同：2
> 
> 时间：2012-06-11T11:17:56.860
> 
> 标签：assembly, gnu, gnu-assembler, binutils

我想了解 GNU 的以下行为。

OS X 上的以下测试程序（Apple cctools-822/GNU as 1.38）

```
 .globl foo
    jmp foo
foo:
    ret 
```

被编码为

```
 00000000    e900000000    jmp         0x00000005
foo:
    00000005    c3            ret 
```

而 GNU as on Linux (GNU as 2.22) 编码为

```
 .global foo
    0000        E9FCFFFF        jmp 0x35 # foo
                FF
foo:
    0005        C3              ret 
```

为什么后者会（对我）奇怪的跳跃？

此外，显然这个魔术`0xfcffffff`地址用于每次跳转到全局标签：

测试2.s

```
 .globl foo
    jmp foo
    .globl bar
    jmp bar
    .globl baz
    jmp baz
foo:
    push $1
    ret
bar:
    push $2
    ret
baz:
    push $3
    ret 
```

在 linux 上使用 GNU 生成（GNU 为 2.22）

```
 .globl foo
    0000    E9FCFFFF    jmp foo
            FF
                        .globl bar
    0005    E9FCFFFF    jmp bar
            FF
                        .globl baz
    000a    E9FCFFFF    jmp baz
            FF
foo:
    000f    6A01        push $1
    0011    C3          ret
bar:
    0012    6A02        push $2
    0014    C3          ret
baz:
    0015    6A03        push $3
    0017    C3          ret 
```

谁能解释这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:54:00.030

它只是一种不同类型的重定位条目 (R_386_PC32)。

您不必担心，链接器会插入正确的地址。

如果您添加`-r`选项，您可以看到重定位条目`objdump`，例如

```
objdump -Dr test2.o 
```

请注意，该值是`0xfffffffc = -4`因为 x86 是小端。

另请参阅[此问题](https://stackoverflow.com/questions/8367587/whats-the-difference-between-r-386-pc32-and-r-x86-64-pc32-in-linkgnu-ld-reloc)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:18:11.960

我假设您正在反汇编对象而不是可执行文件？这对于所有工具链，所有在喜欢之前编译为对象的语言都是非常典型的。链接器...链接...对象，将全局变量，函数名称，变量等链接在一起。在链接阶段之前，您无法知道您所在的地址空间以及变量名称，因此某些本地人取决于在链接时间之前无法解析指令集和到达长度以及全局变量，因此该对象将放置某种填充数据，而不是可能会以一种奇怪的方式反汇编的指令。

# c# - 如何在 Windows phone 中旋转相机查看器？

> ID：10979067
> 
> 赞同：2
> 
> 时间：2012-06-11T11:18:19.353
> 
> 标签：c#, xaml, camera, windows-phone-7.1

我使用`PhotoCamera`选项来拍摄快照。图像捕获完成后，我将其设置为`VideoBrush`xaml 中的 Canvas。但是视频查看器实际上比原来的旋转了......我不确定可能是什么问题......

我的代码..

```
myCamera = new PhotoCamera(CameraType.Primary);

myCamera.CaptureImageAvailable += new EventHandler<ContentReadyEventArgs>(CameraCaptureImageAvailable);

VideoBrush videobrush = new VideoBrush();
videobrush.SetSource(myCamera);
canvasCameraView.Background = videobrush; 
```

谁能帮我 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:41:50.640

我找到了我们可以通过 CompositeTransform 实现的解决方案......

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202956(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202956(v=vs.105).aspx)

# android - 来自 android eclipse 的数据集 Web 服务

> ID：10979069
> 
> 赞同：0
> 
> 时间：2012-06-11T11:18:27.563
> 
> 标签：android, eclipse, web-services, dataset

谁能告诉我如何通过在 android eclipse 中使用来显示来自 web 服务的数据集值？

到目前为止我已经尝试过这些东西

```
public class Demo_webserviceActivity extends Activity
{
/** Called when the activity is first created. */

   private static String NAMESPACE = "http://tempuri.org/";
   private static String METHOD_NAME = "GetName";
   private static String SOAP_ACTION = "http://tempuri.org/GetName";
   private static String URL = "http://122.248.240.105:234/Service1.asmx?WSDL";

   Button btnFar;
   EditText txtFar,txtCel;

   @Override
   public void onCreate(Bundle savedInstanceState)
   {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

       btnFar = (Button)findViewById(R.id.btnFar);

       txtFar = (EditText)findViewById(R.id.txtFar);
       txtCel = (EditText)findViewById(R.id.txtCel);

       btnFar.setOnClickListener(new View.OnClickListener()
       {

                  public void onClick(View v)
              {
                    //Initialize soap request + add parameters
              SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);       

              //Use this to add parameters
              request.addProperty("Fahrenheit",txtFar.getText().toString());

              //Declare the version of the SOAP request
              SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

              envelope.setOutputSoapObject(request);
              envelope.dotNet = true;

              try {
                    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

                    //this is the actual part that will call the webservice
                    androidHttpTransport.call(SOAP_ACTION, envelope);

                    // Get the SoapResult from the envelope body.
                    SoapObject result = (SoapObject)envelope.bodyIn;

                    if(result != null)
                    {
                          //Get the first property and change the label text
                          txtCel.setText(result.getProperty(0).toString());
                    }
                    else
                    {
                          Toast.makeText(getApplicationContext(), "No Response",Toast.LENGTH_LONG).show();
                    }
              } catch (Exception e) {
                    e.printStackTrace();
              }
              }
        }); 
```

**网络方法**

```
public class GetName 
{

public String GetName(String Fahrenheit){
    return(Fahrenheit);
}
} 
```

这是我的日志猫供参考

**日志猫**

```
06-11 17:03:57.760: D/AndroidRuntime(283): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
06-11 17:03:57.760: D/AndroidRuntime(283): CheckJNI is ON
06-11 17:03:57.890: D/AndroidRuntime(283): --- registering native functions ---
06-11 17:03:58.520: D/AndroidRuntime(283): Shutting down VM
06-11 17:03:58.530: D/dalvikvm(283): Debugger has detached; object registry had 1  entries
06-11 17:03:58.580: I/AndroidRuntime(283): NOTE: attach of thread 'Binder Thread #3' failed
06-11 17:03:58.980: D/AndroidRuntime(291): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
06-11 17:03:58.980: D/AndroidRuntime(291): CheckJNI is ON
06-11 17:03:59.150: D/AndroidRuntime(291): --- registering native functions ---
06-11 17:03:59.750: I/ActivityManager(58): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.demo.webser/.Demo_webserviceActivity }
06-11 17:03:59.820: D/AndroidRuntime(291): Shutting down VM
06-11 17:03:59.820: D/dalvikvm(291): Debugger has detached; object registry had 1 entries
06-11 17:03:59.865: I/AndroidRuntime(291): NOTE: attach of thread 'Binder Thread #3' failed
06-11 17:04:00.560: I/ActivityManager(58): Displayed activity com.demo.webser/.Demo_webserviceActivity: 780 ms (total 780 ms)
06-11 17:04:05.930: D/dalvikvm(115): GC_EXPLICIT freed 2114 objects / 95232 bytes in 117ms 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T04:51:39.780

我认为您正在用 Java 开发 Web 服务。不，没有数据类型作为 java 中的数据集，但是如果您愿意，您可以将响应作为字符串数组返回。这意味着在字符串的二维数组中获取响应（表）并返回该响应。

并为您在 java 中创建 web 服务的参考使用本教程[如何创建基于 java 的 web 服务](http://www.eclipse.org/webtools/community/tutorials/BottomUpAxis2WebService/bu_tutorial.html)。

如果您对此有任何疑问或任何其他疑问，可以写信给我。

# facebook - 我的 chrome 扩展中的 Facebook 墙贴

> ID：10979072
> 
> 赞同：0
> 
> 时间：2012-06-11T11:18:37.980
> 
> 标签：facebook, google-chrome-extension, google-chrome-devtools

如何将 Facebook 墙上的帖子添加到我的 chrome 扩展程序中？

我没有看到任何 API 可以做到这一点。我可以通过 XMLHttpRequest 获取 facebook 页面的 HTML 并解析它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:26:42.610

据我所知，您应该可以使用：

```
https://graph.facebook.com/USER_ID/feed?access_token=ACCESS_TOKEN 
```

# php - 不允许操作 - 在本地计算机上取消链接

> ID：10979077
> 
> 赞同：6
> 
> 时间：2012-06-11T11:19:01.100
> 
> 标签：php

我试图取消链接我网站本地版本上的文件夹。

我得到错误：

```
operation not permitted 
```

有什么想法可以取消链接以在本地计算机上工作吗？我正在使用 MAMP。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-11T11:21:55.230

请参阅[文档](http://php.net/unlink)：

> unlink — 删除**文件**

和

> 另请参阅：[rmdir](http://php.net/rmdir) () - 删除目录

你有一个目录。你需要使用`rmdir`，而不是`unlink`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T11:21:19.387

这意味着不允许脚本删除文件夹。这可能有多种原因 - 最可能的原因是您正在尝试[`unlink()`](http://php.net/unlink)使用文件夹而不是使用[`rmdir()`](http://php.net/rmdir)来删除它。

以下是手册页中“不允许操作”（EPERM）的可能原因`unlink(2)`：

> **EPERM** 系统不允许取消链接目录，或者取消链接目录需要调用进程没有的权限。（这是 POSIX 规定的错误返回~~；如上所述，Linux 针对这种情况返回 EISDIR。~~）
> 
> ~~**EPERM（仅限 Linux）** 文件系统不允许取消链接文件。~~
> 
> **EPERM 或 EACCES** 包含路径名的目录设置了粘性位 (S_ISVTX) 并且进程的有效 UID 既不是要删除的文件的 UID 也不是包含它的目录的 UID，并且该进程没有特权~~（Linux：没有CAP_FOWNER 能力）~~。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-11T11:21:47.620

这是一个权限问题。

尝试授予您想要取消链接权限的文件，例如 CHMOD 666。

您可能自己创建了文件并希望 PHP（然后是您自己的另一个用户，可能是 Apache 或 www-data，具体取决于 MAMP 的安装方式）为您删除文件 - 如果没有正确的权限，这是无法完成的。

# google-apps-script - Google 脚本 DocsList 服务查询字符串不起作用

> ID：10979078
> 
> 赞同：1
> 
> 时间：2012-06-11T11:19:08.967
> 
> 标签：google-apps-script

我正在制作一个小脚本来自动组织一些自动生成的电子表格。目标是根据电子表格的名称将电子表格存档在一个目录中（所有这些电子表格都以相同的名称开头，但以我用来组织它们的模式结束）。我遇到的问题是功能：

```
lstFile = DocsList.find('type:spreadsheet title:"PROG_GRAL_CENTRE"'); 
```

该函数没有[文档](https://developers.google.com/apps-script/class_docslist#find)中指定的查询选项，但我在另一个脚本上使用它并且工作正常！我也试过只放：

```
lstFile = DocsList.find('PROG_GRAL_CENTRE'); 
```

应该找到 200 个文档，但没有找到！实际上，如果我在我的 google Drive 的搜索框中输入 PROG_GRAL_CENTRE，所有的文档都找到了，所以我不知道我的搜索过滤器出了什么问题。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T16:05:28.240

方法 find(query) 在文件内容中查找一个字符串，而不仅仅是在文件名上......所以即使它正常工作（意思是没有你提到的问题）我不确定它是否适合你的使用情况下，因为可能会在另一个具有另一个名称的文档中找到某些文件名（例如，作为参考......）。

您为什么不尝试获取数组中的所有文件名并改为搜索该数组？这可以很容易地完成，并且会为您的问题带来优雅的解决方案，不是吗？

我现在正在处理同样类型的脚本；-) 这是获取我的文件的部分（如果您有兴趣，只是一个示例）：

```
var doclist=DocsList.getRootFolder().getFilesByType("document",0,2000);
var names = new Array();
  for (nn=0;nn<doclist.length;++nn){
    if(doclist[nn].getName().match("IMPRESSION_")=="IMPRESSION_"){
  names.push([doclist[nn].getName(),doclist[nn].getId()]);
  }
  } 
```

之后，我按照我想要的方式对数组进行排序，并在列表 UI 中显示结果。

# windows-xp - 是否可以在 windows xp 中显示“输入符号”？

> ID：10979079
> 
> 赞同：0
> 
> 时间：2012-06-11T11:19:14.677
> 
> 标签：windows-xp

我想在 windows xp 中显示 Enter 键的符号。是否有任何显示符号的组合键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:23:56.343

你的意思是像↲这样的东西吗？

那是 Unicode \u21B2

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T11:30:22.940

```
Windows Key Code    Alt+8626 
```

[Downwards_Arrow_With_Tip_Leftwards](http://www.marathon-studios.com/unicode/U21B2/Downwards_Arrow_With_Tip_Leftwards)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T11:45:43.367

**创建自定义键盘布局。**

这意味着您可以确定如何使用键盘上的按键，并且可以选择在多个键盘布局之间切换。

例如，您可以简单地将版权符号放在 ALT GR + C 上，或者为自己更改任何其他键或组合键。这节省了在字符表中搜索的大量时间，并且比学习大量代码更舒服。

您自己的键盘布局，您可以对程序感到满意 Microsoft Keyboard Layout Creator[点击这里下载](http://msdn.microsoft.com/en-US/goglobal/bb964665.aspx)

# function - QTP、VBScript、公共函数

> ID：10979082
> 
> 赞同：2
> 
> 时间：2012-06-11T11:19:40.197
> 
> 标签：function, vbscript, qtp

我只想知道“公共职能”和“职能”有什么区别

如果有人可以提供帮助，那将不胜感激..

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T12:41:36.137

使用类最好地解释公共与私有可访问性的概念：

```
Option Explicit

Class cPubPrivDemo
  Public   m_n1
  Dim      m_n2
  Private  m_n3
  Private Sub Class_Initialize()
    m_n1 = 1
    m_n2 = 2
    m_n3 = 3
  End Sub
  Sub s1()
    WScript.Echo "s1 (Public by default) called"
  End Sub
  Public Sub s2()
    WScript.Echo "s2 (Public by keyword) called"
  End Sub
  Private Sub s3()
    WScript.Echo "s3 (Private by keyword) called"
  End Sub
  Public Sub s4()
    WScript.Echo "(public) s4 can call (private) s3 from inside the class"
    s3
  End Sub
End Class

Dim oPPD : Set oPPD = New cPubPrivDemo

WScript.Echo "Can access public member variables of oPPD:", oPPD.m_n1, oPPD.m_n2

WScript.Echo "No access to oPPD's private parts:"
Dim n3
On Error Resume Next
n_3 = oPPD.m_n3
WScript.Echo Err.Description
On Error GoTo 0

WScript.Echo "Can call public subs:"
oPPD.s1
oPPD.s2

WScript.Echo "Can't call private sub .s3:"
On Error Resume Next
oPPD.s3
WScript.Echo Err.Description
On Error GoTo 0

WScript.Echo "private sub s3 can be called from inside the class:"
oPPD.s4 
```

从脚本的输出：

```
Can access public member variables of oPPD: 1 2
No access to oPPD's private parts:
Object doesn't support this property or method
Can call public subs:
s1 (Public by default) called
s2 (Public by keyword) called
Can't call private sub .s3:
Object doesn't support this property or method
private sub s3 can be called from inside the class:
(public) s4 can call (private) s3 from inside the class
s3 (Private by keyword) called 
```

你可以看到：

1.  可以从组件内部（这里：类）访问私有组件（变量、子；同样适用于函数和属性）
2.  可以从外部访问公共组件（未显示但可能是合理的：也可以从内部使用公共组件）
3.  未明确指定访问权限/模式 (?) (m_n2, s1) 默认为“公共”
4.  对您的问题的简短回答：无 - 因为 (3)

“公共声明”的 VBScript Docs 说

> 声明公共变量并分配存储空间。在 Class 块中声明一个公共变量。

和

> 公共语句变量可用于所有脚本中的所有过程。

因此，可以研究/测试可访问性规则是否以及如何应用于（组合）脚本（源代码文件）。由于我对 QTP 对多个源文件的处理一无所知，因此我无法为您提供帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T13:05:45.140

除了 Ekkehard.Horner 的回答之外，在 QTP 中还可以将 Qtp 函数库 (QFL) 加载为 .qfl 或 .vbs 文件。

A`function`或在私有的 QFL 中不能在另一个 QFL、模块或操作中使用，而公共的可以`const`。`variable`

默认情况下，函数、常量和变量是公共的：

```
' All public:
Dim MyVariable
Public MyOtherVariable
Const PI = 3.1415
Function GetHello
    GetHello = "Hello"
End Function
Sub SayHello
    MsgBox GetHello
End Sub

' All private:
Private myPrivates
Private Const HELLO = "HELLO!"
Private Function getHelloToo
    getHelloToo = HELLO
End Function
Private Sub sayHelloToo
    MsgBox getHelloToo
End Sub

Class Dog
    Public Function Bark
        Print "Bark! Bark! Bark!"
    End Function
End Class 
```

是的，类在模块中始终是私有的。您必须从函数中返回它以使它们公开可用：

```
' Placed in the same module as Class Dog
Public Function GiveMeADog
    Set GiveMeADog = new Dog
End Function 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T12:38:38.430

公共和私有的问题只有在类中使用时才有意义。在 VBScript 类中，函数默认是公共的，因此两者之间没有区别。使用 Private 使函数无法从类外部访问。

# symfony - Symfony2 + Doctrine2 编辑形式的四舍五入小数

> ID：10979090
> 
> 赞同：6
> 
> 时间：2012-06-11T11:20:05.173
> 
> 标签：symfony, doctrine-orm, decimal

如何在 symfony2 实体中设置小数精度和比例？我在我的实体中使用十进制数据类型在经度字段中定义了纬度，如下所示：

```
/**
 * @ORM\Column(type="decimal", precision="10", scale="6", nullable=true)
 */
protected $latitude; 
```

持久化新对象时，它会正确保存十进制（我可以在 phpMyAdmin 中看到 52.406374）。但是，当显示编辑表单时，数字会四舍五入为 52,406，更新后它会以**52.406000**的形式存储在 mysql 中。我的 Doctrine 配置可能有问题，但我不知道是什么。

为什么纬度和经度是四舍五入的？

**找到了解决方案：**

Symfony 的表单组件将十进制表单字段呈现为 type="text"。使用时：

```
->add('latitude', 'number', array(
    'precision' => 6,
)) 
```

它被正确渲染。评论中的线程没有描述我的问题。我猜他们已经修复了“转换为浮点”精度的错误。当我在树枝模板中显示纬度时，它显示的是正确的（不是四舍五入的）值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-20T21:23:42.863

**如何设置 symfony 十进制类型的精度和小数位数：**

将其设置在您的实体中，如下所示：

```
protected $mycolumn;
/**
* @ORM\Column(type="decimal", precision=14, scale=8, nullable=true)
*/ 
```

这将设置 MySQL 数据库中的数据类型：

```
mycolumn decimal(14,8) 
```

[在 Doctrine 2 中指定十进制字段类型时，比例和精度是什么意思？](https://stackoverflow.com/questions/14940574/what-do-scale-and-precision-mean-when-specifying-a-decimal-field-type-in-doctrin)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T11:37:34.537

也许问题不是由于您的学说映射。查看[NumberType](http://symfony.com/doc/current/reference/forms/types/number.html)的参考文档。

它是你用的吗？您可能必须更改精度。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-16T14:14:32.363

在 Symfony3.2 中，你应该使用 scale：

```
$builder->add('lat', NumberType::class, array('scale' => 8)); 
```

> 这指定在字段对提交的值进行四舍五入之前将允许多少个小数（通过 rounding_mode）。例如，如果 scale 设置为 2，则提交的值 20.123 将四舍五入为例如 20.12（取决于您的 rounding_mode）。

# google-app-engine - 使用 URL 部分创建多租户 AppEngine 应用程序

> ID：10979091
> 
> 赞同：0
> 
> 时间：2012-06-11T11:20:08.757
> 
> 标签：google-app-engine, multi-tenant

我正在尝试不同的方式来实现多租户 AppEngine Web RESTful 界面。其中之一是使用部分 URL 作为租户名称。问题是我正在使用 Jersey 作为 RESTful 接口的 JAX-RS 实现，我希望首先将诸如 /tenant1/res1 之类的 url 解析为 / **tenant1**部分，将命名空间设置为tenant1，然后将 URL 的其余部分传递给 Jerseys 的 servlet 进行常规处理。

可能是 ServletFilter 或 Servlet 或我想不到的东西**。**

我怎样才能实现这样的事情？这种实施可能出现的问题是什么？

谢谢你，伊多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:03:02.167

我正是这样做的，但使用的是 Restlet。命名空间唯一标识用户所属的客户。

第一个 URL 片段包含命名空间。我在 RESTLET 身份验证器（基本上是一个过滤器）中验证名称空间，当经过身份验证的用户不属于给定的名称空间/客户时，我拒绝继续。

我使用客户的主键作为命名空间。这还有一个额外的好处，即可以轻松（mem-）缓存有效的命名空间/客户，并且我拒绝任何包含无效命名空间的调用。

对此设置非常满意，并且没有遇到任何问题。

# javascript - 围绕一个点旋转对象

> ID：10979093
> 
> 赞同：0
> 
> 时间：2012-06-11T11:20:20.023
> 
> 标签：javascript, animation, 3d, rotation, geometry

我目前正在研究由一些 div 元素组成的 3d“云”。这些 div 元素应该围绕一个点旋转。这就像 x 轴上的魅力一样，但我也无法让它在 y 轴上工作。我已经把重要的东西放到了一个 jsfiddle 项目中：

[http://jsfiddle.net/Lggdq/19/](http://jsfiddle.net/Lggdq/19/)

如果您单击并用鼠标移动，则项目正在旋转。我怎样才能让它在 y 轴上工作（项目正在移动，但不是我想要的那样）？项目应该像在 x 轴上一样旋转。

提前致谢

# android - Android无限浏览器

> ID：10979097
> 
> 赞同：0
> 
> 时间：2012-06-11T11:20:45.770
> 
> 标签：android, android-viewpager

我有一个带有详细视图的应用程序。此详细视图包含一些 Web 视图 (3)。Web 视图插入到视图寻呼机中。我需要这样做：当我向左或向右滚动时，在视图寻呼机中重新排序网络视图。例如：当我向右滚动时：实际的 web 视图（中间）放在左边，右边的 web 视图（下一个）放在中间，右边的 web 视图（下一个）加载下一个细节。这对我来说很好，但我不知道，我怎样才能重新初始化视图寻呼机或制作一些更新视图寻呼机的东西......非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T03:08:55.177

我几乎有一个类似的问题（请参阅[Pattern for using dynamic loaders to load ListView pages in a ViewPager without ListFragments?](https://stackoverflow.com/questions/12023568/pattern-for-using-loaders-to-load-pages-in-a-viewpager)），我正在使用相同的模式。

我认为您必须做的是调用`yourViewPager.setOnPageChangeListener(this)`然后在`onPageChanged()`其中实现逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T22:46:22.960

我想你可能想看看[这个实现](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=6&cad=rja&sqi=2&ved=0CGwQFjAF&url=https://bitbucket.org/ayastrebov/android-infinite-viewpager/src/6db4e945fe66/ViewPager-Sample/src/com/stonerhawk/viewpager/ViewPagerSampleActivity.java&ei=AHbbUO3rE4rbigL8toDoDA&usg=AFQjCNGycr-fuOItQZDjuxK1CySyHnRQlw)。我相信您正在寻找一个`ViewPager`说有 3 页的内容，当您在第三页上并滑动到“下一页”时会返回到第一页。在这种情况下，我认为在该链接上找到的实现正是这样做的。`Bitmap`当添加少于 3 页时，它似乎有一个安全网（带有s）。它似乎也能够处理启用/禁用无限分页，尽管我没有看到动态设置它的方法。

# java - Gate设置：官方TestGate.java无法运行

> ID：10979098
> 
> 赞同：1
> 
> 时间：2012-06-11T11:20:48.950
> 
> 标签：java, gate

Gate 的新手，实际上对 Java 和 Eclipse 也不老；）并且想要运行第一个设置测试。

我做了什么：

1.  下载gate-7.0-build4195-ALL并解压到C:\

2.  将环境变量 CLASSPATH 更改为 ".;%JAVA_HOME%\lib;%JAVA_HOME%\lib\tools.jar;C:\gate-7.0-build4195-ALL\bin\gate.jar;C:\gate-7.0-build4195-全部\lib"

3.  在 Eclipse 中创建了一个新的 java 项目，并导航到 gate.jar\gate\TestGate.class 并运行它。

然后我收到以下错误：

```
Failed to invoke suite(): java.lang.NoClassDefFoundError: org/apache/log4j/Logger
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at     org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestLoader.getTest(JUnit3TestLoader.java:108)
    at     org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestLoader.loadTests(JUnit3TestLoader.java:59)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:452)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.NoClassDefFoundError: org/apache/log4j/Logger
    at gate.Gate.<clinit>(Gate.java:83)
    at gate.TestGate.suite(TestGate.java:126)
    ... 10 more
Caused by: java.lang.ClassNotFoundException: org.apache.log4j.Logger
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 12 more 
```

我错过了什么？
谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:39:57.070

你不应该设置你的 CLASSPATH 环境变量。如果您想在 Eclipse 项目中使用 JAR 文件，您应该将它们添加到项目的构建路径中。

特别是对于 GATE，您需要`bin/gate.jar`来自 的所有 JAR 文件`lib`，但您不需要`lib`构建路径上的目录本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:28:22.363

我在 java 中与 netbeans 一起使用 GATE API，当我将测试与 junit 集成时，我遇到了这个错误。诀窍是在不进行测试的情况下构建项目，一旦构建完成，您就可以像往常一样使用 GATE 运行测试。

例如，我在测试函数的开头就得到了这个：

```
@Test
public void test()
{
        if(false)
        {
            assertEquals(true, true);
            return;
        }

        ...
        Testing GATE 
```

要构建没有测试的jar，你只需要在那边设置为true。似乎与 GATE 使用的 jar 的类路径有关。

# android - 安卓 c2dm 限制

> ID：10979099
> 
> 赞同：0
> 
> 时间：2012-06-11T11:20:51.883
> 
> 标签：android, limit, android-c2dm

任何人都使用此服务，并且有很多用户知道我的应用程序上是否有注册设备的限制？

谷歌对此没有说什么，但我在一个论坛上读到 100 是限制:(

我想制作一个拥有数千名用户的大型应用程序，但我不知道我是否必须为此限制付费，或者是否没有限制。

在这里，他说 100 是设备注册的限制或我无法理解的东西。 [http://www.stack-es.com/stackoverflow/es/bad-sides-of-c2dm-6112711.html](http://www.stack-es.com/stackoverflow/es/bad-sides-of-c2dm-6112711.html)

请有人使用这个可以向我解释。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:25:09.120

检查[此链接](https://developers.google.com/android/c2dm/quotas)

"your sender account will be assigned the default quota, which currently corresponds to approximately **200,000** messages per day."

**Not 100..**

Thanks.

# mysql - 如何在 MySQL 中存储二进制数据

> ID：10979100
> 
> 赞同：3
> 
> 时间：2012-06-11T11:20:54.170
> 
> 标签：mysql, binary, data-storage

如何在 MySQL 数据库中存储二进制数据？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-11T11:28:25.093

这个问题并不像听起来那样直接回答：有很多不同的二进制数据使用模式，每种模式都有自己的警告和优缺点。让我试着总结一下：

*   通过简单地对它们进行 base64 编码并将生成的字符串存储为 VARCHAR 短片二进制数据（例如密码哈希）可以很好地工作
*   “非完全二进制”数据，例如带有偶尔不可打印的文档片段，可以转义并作为字符串排序
*   BLOB 数据类型允许您存储任意块的二进制数据，但我强烈建议不要使用它：将数据存储在文件中，然后将文件的路径存储为字符串类型。您从存储二进制数据中没有任何收获，因为 DB 无法在 DB 中“理解”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-07T01:08:08.433

我建议`LONGBLOB`将文件存储在`MySQL`. 这一切都取决于什么样的二进制文件和您的应用程序。

```
TINYBLOB - A BLOB column with a maximum length of 255 (2^8 - 1) characters.
BLOB - A BLOB column with a maximum length of 65,535 (2^16 - 1) characters.
MEDIUMBLOB - A BLOB column with a maximum length of 16,777,215 (2^24 - 1) characters.
LONGBLOB - A BLOB column with a maximum length of 4,294,967,295 (2^32 - 1) characters. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T11:24:46.140

二进制数据可以存储在 MySQL 数据库中的[BLOB](http://dev.mysql.com/doc/refman/5.5/en/blob.html)字段中。[BLOB](http://dev.mysql.com/doc/refman/5.5/en/blob.html)是一个二进制大对象，可以保存可变数量的数据。

# java - 访问 .class 文件中的符号表

> ID：10979102
> 
> 赞同：1
> 
> 时间：2012-06-11T11:21:03.460
> 
> 标签：java, bytecode, symbol-table

对于 Java 中的任意代码库，我想（从概念上）创建符号和类型之间的 USES 和 USED-BY 关系的表。符号表有我需要的信息。然而，编写前端似乎是一项艰巨的任务，并且有可能将我的项目变成一个更大的子项目。没有理由这样做，在我看来，因为字节码，Java .class 文件必须在其中包含每个类的这样一个符号表，以便它可以解析类型和引用。

我的问题是——

> 如何以编程方式访问一组 .class 文件中的符号表，以便创建所需的 USES / USED-BY 表？有没有人已经这样做了（肯定答案是肯定的）并且执行此操作的工具还不是库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:41:04.620

看看[ASM 字节码操作框架](http://asm.ow2.org)。本[教程](http://asm.ow2.org/doc/tutorial-asm-2.0.html)有一个从字节码中检索依赖项的示例。尽管如果您使用最近引入的[RemappingClassAdapter](http://asm.ow2.org/asm40/javadoc/user/org/objectweb/asm/commons/RemappingClassAdapter.html)可以大大简化它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:15:24.323

您可以拥有带有 的字节码[`javap`](http://www.herongyang.com/Java-Tools/javap-Disassemble-Java-Bytecode-Class-Files.html)，之后它只是文本解析。

# android - sharedpreferences 中的值未清除

> ID：10979103
> 
> 赞同：0
> 
> 时间：2012-06-11T11:21:08.213
> 
> 标签：android, sharedpreferences

我正在开发一个应用程序，我需要在其中管理用户会话，即当用户第一次登录时，他必须看到登录页面，一旦他通过身份验证，他就会被重定向到主屏幕，并且在 sharedpreferences 中设置了一个值。现在在主屏幕上，当用户单击注销按钮时，必须清除 shsredpreferences 中的值，并且下次用户打开应用程序时，他必须被定向到登录页面。除非并且直到用户单击注销，否则不得显示登录页面. 我能够将值存储在 sharedpreferences 中，但无法删除它们。

这是我的 loginpage.java 代码

```
package com.sess.eg;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class loginpage extends Activity {
    /** Called when the activity is first created. */

        EditText acc,user,pin;
        Button login;
        StringBuilder builder = new StringBuilder();
        String UserName;

        SharedPreferences.Editor prefs;
        @Override

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

//            SharedPreferences prefs1  = getPreferences(MODE_WORLD_READABLE);
//          UserName= prefs1.getString("User", "Abcdef");
//          
//          System.out.println(UserName);
//          
//          if(UserName.equals("Ad"))
//              
//            {
//              System.out.println(UserName);
//              Intent i=new Intent(loginpage.this,homepage.class);
//              startActivity(i);
//            }

            setContentView(R.layout.main);
            acc = (EditText) findViewById(R.id.ed_login_acc);
            user = (EditText) findViewById(R.id.ed_user_acc);
            pin = (EditText) findViewById(R.id.ed_pin_acc);
            login = (Button) findViewById(R.id.login_button);

            SharedPreferences prefs1  = getPreferences(MODE_WORLD_READABLE);

            login.setOnClickListener(new Button.OnClickListener(){

                public void onClick(View v) {

                    prefs.putString("User", "Ad");
                    prefs.commit();
                    //System.out.println(sendJson1());
                    //startService(new Intent(Login.this, MyService.class));
                    Intent i = new Intent(loginpage.this, homepage.class);
                    startActivity(i);
                    finish();

                    //System.out.println(UserName); 
                }

            });

        }
         @Override
        protected void onStart() {
            SharedPreferences prefs1  = getPreferences(MODE_WORLD_READABLE);
            UserName= prefs1.getString("User", "Abcdef");

            System.out.println(UserName);

            if(UserName.equals("Ad"))

             {
                System.out.println(UserName);
                Intent i=new Intent(loginpage.this,homepage.class);
                startActivity(i);
                finish();

             }
            super.onStart();
        }
    }

here is my code for homepage.java
package com.sess.eg;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class homepage extends Activity{

    Button logout;

     public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.home3);

            logout = (Button) findViewById(R.id.logout);

            logout.setOnClickListener(new Button.OnClickListener(){

            public void onClick(View v) {

            SharedPreferences.Editor prefs = getPreferences(MODE_WORLD_WRITEABLE).edit();

            prefs.clear();

//          prefs.commit();
            SharedPreferences prefs1 = getPreferences(MODE_WORLD_READABLE);
            String UserName= prefs1.getString("User", "Abcdef");
            System.out.println(UserName);
            finish();

                }
            });

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:23:14.550

您已注释掉对 的调用`prefs.commit()`。取消注释它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:24:42.987

在您的代码中：

```
//prefs.commit(); 
```

改变这个。从评论中删除它。

```
prefs.commit(); 
```

`commit()`调用以保存您的首选项更改。

"*将您的首选项更改从该编辑器提交回它正在编辑的 SharedPreferences 对象。这将自动执行请求的修改，替换当前在 SharedPreferences 中的任何内容。请注意，当两个编辑器同时修改首选项时，最后一个调用犯下胜利。* ”

[在这里](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#commit%28%29)阅读。

# c++ - 在成员函数中声明指向不同类的指针

> ID：10979109
> 
> 赞同：0
> 
> 时间：2012-06-11T11:21:27.913
> 
> 标签：c++

```
#include<iostream>
using namespace std;

class StudentClass{
friend class Oopclass;
public:
    StudentClass();
    void setStudentData();
    void printStudentScore();
    StudentClass* next;
    ~StudentClass();
private:
    string std_ID;
    int sID, sMid, sFin, sOP, hw[3];   
    double sTotal; 

};

class OopClass{
friend class StudentClass;
public:
    OopClass();
    void setOopData();
    void printOopScore();
    void queryOopScore();
    void findOopAverageScore();
    void addStudentData();
    void deleteStudentData();
    void updateStudentData();
    ~OopClass();
private:
    string professor, subject;
    int cSn;
    double cSAvg;
    StudentClass* cSAddr;
};

int main(int argc, char **argv){
OopClass Info[3];
Info[0].setOopData();
return 0;
}

StudentClass::StudentClass(){
}
void StudentClass(){
}
void StudentClass::setStudentData() {

}
StudentClass::~StudentClass(){
}
OopClass::OopClass(){
}
void OopClass::setOopData() {
cout << "Professor?" << endl;
cin >> professor;
cout << "Subject?" << endl;
cin >> subject; 
cout << "How many students do you want to input ?" << endl;
int number = 0;
cin >> number;
cSAddr = new StudentClass;
//for(int i = 0; i < number; i ++) setStudentData();

}
OopClass::~OopClass(){
} 
```

当我写累了“cSAddr = new StudentClass;” ，它达到

关于错误

> " C:\Users\lypan\Documents\final.cpp 在成员函数 'void OopClass::setOopData()' 中：
> 
> 63 14 C:\Users\lypan\Documents\final.cpp [错误] 'StudentClass' 之前的预期类型说明符
> 
> 63 14 C:\Users\lypan\Documents\final.cpp [错误] 从 'int*' 到 'int' 的无效转换 [-fpermissive]
> 
> 63 14 C:\Users\lypan\Documents\final.cpp [错误] 预期为 ',' 或 ';' 在‘学生班’之前”

而且我不知道为什么我做错了，请告诉我我犯了什么错误。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:24:21.880

这里唯一的错误是你没有为你的类**实现**构造函数。但这应该会产生链接器错误。

这可能不是您的代码，但可能是您`StudentClass.h`在`OopClass.h`定义`OopClass::setOopData()`.

编辑：

```
void StudentClass() 
```

`StudentClass`你在第 46 行声明了一个函数——http: [//codepad.org/9DP6zpHU——](http://codepad.org/9DP6zpHU)你可能忘了限定它。

```
StudentClass::StudentClass(){
}
//THIS!
void StudentClass(){
}
void StudentClass::setStudentData() {

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:35:38.610

错误是您定义了一个与类同名的函数`StudentClass`：

```
void StudentClass(){
} 
```

删除该功能，它应该会更好地工作。

# php - joomla 中的 JavaScript 和 CSS 编辑器

> ID：10979110
> 
> 赞同：0
> 
> 时间：2012-06-11T11:21:43.957
> 
> 标签：php, joomla

正如我们在 Joomla 2.5 中看到的，如果我们点击模板，我们就会看到 CSS 亮起。我想生成确切的 JS(Javascript) 文件列表。如果我们单击 Javascript，我可以对其进行编辑。现在，第二个问题我如何为 Joomla 管理面板创建上传程序。我的客户想上传他自己的 CSS 和 JS 文件。我检查了几个链接和扩展，但无法理解。上面的任何帮助我已经检查了以下链接以进行上传，但无法理解如何实现 [http://docs.joomla.org/Creating_a_file_uploader_in_your_component](http://docs.joomla.org/Creating_a_file_uploader_in_your_component)

谢谢，曼普里特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:54:06.610

CSS 和 JS 编辑器仅在某些模板中可用。它还能够编辑通过您的模板嵌入的 JS 和 CSS 文件。您可以在 index.php (/templates/your_templates/index.php ) 中查看这些文件

您发布的那个链接是关于创建一个组件（与模板无关），也无法通过媒体上传器上传 CSS 和 JS 文件，首先文件默认上传到 /images/ 文件夹中，其次我是不太确定如何工作。

但是您的问题可能有一个棘手的解决方案。每个组件、模块或插件都能够嵌入自己的样式和 Javascript 文件。看看你的模板源码，肯定有这样一行

```
<jdoc:include type="head" /> 
```

这向 joomla 核心提到，将在 HTML 文档的头部嵌入附加文件。我的方法将呈现四个通用步骤

a) 创建一个文件夹，您的客户端可以在其中上传多个 CSS 和 JS 文件 b) 创建一个插件以执行上传的内容 c) 在您的插件实现中添加一些用于编辑文件的功能（您可以使用[任何 jquery 的编辑器插件](http://www.queness.com/post/212/10-jquery-and-non-jquery-javascript-rich-text-editors)来显示弹出窗口甚至 joomla 默认编辑器中的代码 d) 允许用户选择要嵌入的文件

我可以想象这将是一项非常艰巨的任务，因为您必须面对很多问题（文件上传限制，文件权限等），但这并非不可能

祝你的项目好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T16:46:19.460

在回答了您之前关于基本相同问题的问题后，我再说一遍，您可以下载我为您提供链接的文件上传器组件，或者只需从 JED 下载文件管理扩展。

# javascript - 多个 Web Worker ajax 请求并且并非全部返回

> ID：10979112
> 
> 赞同：4
> 
> 时间：2012-06-11T11:21:46.327
> 
> 标签：javascript, ajax, web-worker

我在网络工作者中有以下代码：

```
self.addEventListener('message', function(e){ 
        try {
      var xhr=new XMLHttpRequest()

      for(var i = 0; i < e.data.urls.length;i++){
        xhr.open('GET', e.data.urls[i], true);
        xhr.setRequestHeader('Accept', 'application/json');
        xhr.send(null);
        xhr.onreadystatechange = function() {
                if (xhr.readyState == 4) {
                  if (xhr.status == 200 || xhr.status == 304 || xhr.status ==0) {
                    postMessage(xhr.responseText);
                  } else {
                    postMessage(xhr.status + xhr.responseText);
                    throw  xhr.status + xhr.responseText;
                  }
                }
        };
      } 
    } catch (e) {
     postMessage("ERROR:"+e.message);       
   }
}, false); 
```

e.data.urls 包含 16 个请求，这些请求在 UI 线程上处理，如下所示：

```
var replies = 0;

worker.addEventListener('message', function(e){
    replies += 1;
}); 
```

只完成了 10 个请求，这是因为 UI 线程在所有请求返回之前就停止了，还是我还缺少其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T12:46:26.003

这里发生的是您的`xhr`变量在循环中被覆盖。由于 的性质`XMLHttpRequest`，即默认是异步的，`xhr.send();`行执行后不等待所以`for`进入下一个循环，`xhr.[...]`行对上一个循环`xhr`中设置和触发的对象进行操作。根据前一个循环的请求是否返回（因此状态更改处理程序已执行）或没有（这是非常不可预测的），您覆盖“活动”或“完成”`xhr`对象。在完成之前被覆盖的那些将丢失。

你应该确保你没有覆盖。不要对同一个 XMLHttpRequest 对象进行操作，而是为每个请求实例化一个新对象。

我将处理函数的定义移到了循环之外。无需在每个循环中重新定义它。它在分配给它的 XMLHttpRequest 实例的上下文中被调用，因此`this`指向该实例。

另外，我交换了`xhr.send()`和`xhr.onreadystatechange = ...`线。应该在发送请求之前分配状态更改事件处理程序（从发送开始就触发了几个事件），尽管不太可能，但在添加事件处理程序的行之前，请求甚至可能返回就绪状态 4在代码中执行。

```
self.addEventListener('message', function(e){ 

    var xhrs = [];

    function handler() {
      if (this.readyState == 4) {
        if (this.status == 200 || this.status == 304 || this.status ==0) {
          postMessage(this.responseText);
        } else {
          postMessage(this.status + this.responseText);
          throw  this.status + this.responseText;
        }
      }
    };

    for(var i = 0; i < e.data.urls.length;i++) {
      xhrs[i] = new XMLHttpRequest();
      xhrs[i].open('GET', e.data.urls[i], true);
      xhrs[i].setRequestHeader('Accept', 'application/json');
      xhrs[i].onreadystatechange = handler;
      xhrs[i].send(null);
    } 

}, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T00:47:51.783

您的示例与[此 firefox 示例](https://developer.mozilla.org/En/Using_workers_in_extensions)类似，但工作人员内部的循环发出多个**ajax**请求。我很想知道是什么导致了失败。您可能会遇到单个工作人员可以处理的并发**ajax**连接数的限制。

您能否尝试将 url for 循环移动到主 gui 线程：

```
for(var i = 0; i < urls.length; i++){
    worker.postMessage(urls[i]);
} 
```

并改变你的工人一次只做一个**ajax**调用？

```
self.addEventListener('message', function(e){ 
    try {
        var xhr=new XMLHttpRequest()

        xhr.open('GET', e.data, true);
        xhr.setRequestHeader('Accept', 'application/json');
        xhr.send(null);
        xhr.onreadystatechange = function() {
                if (xhr.readyState == 4) {
                  if (xhr.status == 200 || xhr.status == 304 || xhr.status ==0) {
                    postMessage(xhr.responseText);
                  } else {
                    postMessage(xhr.status + xhr.responseText);
                    throw  xhr.status + xhr.responseText;
                  }
                }
        };
    } catch (e) {
      postMessage("ERROR:"+e.message);       
    }
}, false); 
```

看看这是否有效？

* * *

[Mozilla 示例](https://developer.mozilla.org/en/Using_web_workers)有一些错误处理程序可能会揭示问题。您可以尝试在主 GUI 线程中添加：

```
worker.onerror = function(error) {  
  dump("Worker error: " + error.message + "\n");  
  throw error;  
}; 
```

在工人内部：

```
function errorReceiver(event) {  
   throw event.data;  
} 
```

# java - sop 没有打印在 tomcat7 控制台上？

> ID：10979117
> 
> 赞同：0
> 
> 时间：2012-06-11T11:21:54.207
> 
> 标签：java, servlets, tomcat7

我在 sop 中打印了一些行，但是当应用程序启动时，sop 没有在 tomcat 控制台上打印。这是我的代码：

```
package org.slingemp.attendance;

import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Iterator;
import java.util.LinkedHashMap;
import java.util.List;
import java.util.Map;
import java.util.Properties;
import java.util.concurrent.ConcurrentHashMap;

import javax.servlet.ServletException;
import javax.servlet.annotation.MultipartConfig;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
import javax.servlet.http.Part;

import org.apache.log4j.Logger;
import org.apache.log4j.PropertyConfigurator;
import org.apache.poi.hssf.usermodel.HSSFCell;
import org.apache.poi.hssf.usermodel.HSSFRow;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.slingemp.common.Workindays;

/**
 * Servlet implementation class LeaveReportServlet
 */
@WebServlet(urlPatterns = "/ReadEmployeeAttendance")
@MultipartConfig
public class LeaveReportServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;
    public LeaveReportServlet() {
        super();
        // TODO Auto-generated constructor stub
    }

    protected void doGet(HttpServletRequest request,HttpServletResponse response) throws ServletException, IOException {

        HttpSession session = request.getSession(true);
        for (Part part : request.getParts()) {
            InputStream is = request.getPart(part.getName()).getInputStream();
            int i = is.available();
            byte[] b = new byte[i];
            is.read(b);
            String fileName = getFileName(part);
            session.setAttribute("accesscardDatafileNname", fileName);
            String uploadDir = getServletContext().getRealPath("/accesscarddata/");
            FileOutputStream os = new FileOutputStream(uploadDir + "/"+ fileName);
            os.write(b);
            is.close();
        }

    }

    private String getFileName(Part part) {
        String partHeader = part.getHeader("content-disposition");
        for (String cd : part.getHeader("content-disposition").split(";")) {
            if (cd.trim().startsWith("filename")) {
                return cd.substring(cd.indexOf('=') + 1).trim()
                        .replace("\"", "");
            }
        }
        return null;

    }

    protected void doPost(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
        String path = getServletContext().getRealPath("/accesscarddata/");

        doGet(request, response);
        readFile(request, response);
        prepareExcelToEmployeeListToMap(request, response);
        classifyEmployeesMapEntries(request, response);
        prepareReport(request, response);

        response.sendRedirect("upload.jsp");

    }
    protected void readFile(HttpServletRequest request,HttpServletResponse response) throws ServletException, IOException {
        String fileName = "", employeeAttendanceFilePath = "";
        String _uploadDir = getServletContext().getRealPath("/accesscarddata/");
        HttpSession session = request.getSession(true);
        if (session.getAttribute("accesscardDatafileNname") != null)
            fileName = (String) session.getAttribute("accesscardDatafileNname");

        employeeAttendanceFilePath = _uploadDir + "/" + fileName;
        List sheetData = new ArrayList();
        FileInputStream fis = null;
        try {
            fis = new FileInputStream(employeeAttendanceFilePath);
            HSSFWorkbook workbook = new HSSFWorkbook(fis);
            HSSFSheet sheet = workbook.getSheetAt(0);// gets the first sheet on workbook
            Iterator rows = sheet.rowIterator();
            while (rows.hasNext()) {
                HSSFRow row = (HSSFRow) rows.next();
                Iterator cells = row.cellIterator();
                // count=count+1;
                List data = new ArrayList();
                while (cells.hasNext()) {
                    HSSFCell cell = (HSSFCell) cells.next();
                    data.add(cell);
                }
                sheetData.add(data);
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            if (fis != null) {
                fis.close();
            }
        }
        session.setAttribute("sheetData", sheetData);

    }

    protected void prepareExcelToEmployeeListToMap(HttpServletRequest request,HttpServletResponse response) throws ServletException, IOException {

        String strdepartment = "";
        int j = 1;
        boolean isProceed=true;
        List sheetData = null;
        HttpSession session = request.getSession(true);
        if (session.getAttribute("sheetData") != null)
            sheetData = (ArrayList) session.getAttribute("sheetData");

        Map<String, String> employeeCollectionMap = new LinkedHashMap<String, String>();
        Map<String, String> employeeMap = new LinkedHashMap<String, String>();

        for (int i = 0; i < sheetData.size(); i++) {
            List list = (List) sheetData.get(i);
            HSSFCell employeeid = (HSSFCell) list.get(0);
             HSSFCell employeeName = (HSSFCell) list.get(1);
            HSSFCell department = (HSSFCell) list.get(3);
            HSSFCell date = (HSSFCell) list.get(5);

                strdepartment = department.getRichStringCellValue().getString();
                if (!(employeeid.getRichStringCellValue().getString().equals("EmpID")|| date.getRichStringCellValue().getString().equals("Date")|| department.getRichStringCellValue().getString().equals("Department"))) {
                        if (!(strdepartment.equals("Temporary Card") || strdepartment.equals("Contractor"))) {
                              employeeCollectionMap.put(employeeid.getRichStringCellValue().getString() + "_" + j, date.getRichStringCellValue().getString());
                              if(!employeeMap.containsKey(employeeid.getRichStringCellValue().getString()))
                                    employeeMap.put(employeeid.getRichStringCellValue().getString(),employeeName.getRichStringCellValue().getString());
                            j++;
                            }
                        }

        }
        session.setAttribute("employeeCollectionMap", employeeCollectionMap);
        session.setAttribute("employeeMap", employeeMap);
    }

    protected void classifyEmployeesMapEntries(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
        HttpSession session = request.getSession(true);
        Map<String, String> employeeCollectionMap = new LinkedHashMap<String, String>();
        if (session.getAttribute("employeeCollectionMap") != null)
            employeeCollectionMap = (Map) session.getAttribute("employeeCollectionMap");

        Map<String, Map<String, String>> employeeCollectionClassifiedMap = new HashMap<String, Map<String, String>>();
        List<String> employeeCollectionList = new ArrayList<String>();
        ;
        Iterator<String> oIterator = employeeCollectionMap.keySet().iterator();
        while (oIterator.hasNext()) {
            String sKey = oIterator.next();
            String sFirst = sKey.substring(0, sKey.indexOf("_"));
            if (!employeeCollectionList.contains(sFirst)) {
                employeeCollectionList.add(sFirst);
            }
        }
        for (String sKey : employeeCollectionList) {
            Map<String, String> oChildMap = new HashMap<String, String>();

            Iterator<String> oIterator2 = employeeCollectionMap.keySet().iterator();
            while (oIterator2.hasNext()) {
                String sChildKey = oIterator2.next();
                String sParentKey = sChildKey.substring(0,sChildKey.indexOf("_"));

                if (sKey.equals(sParentKey)) {
                    oChildMap.put(sChildKey,employeeCollectionMap.get(sChildKey));
                }
            }
            employeeCollectionClassifiedMap.put(sKey, oChildMap);
        }
        session.setAttribute("employeeCollectionClassifiedMap",employeeCollectionClassifiedMap);
        session.setAttribute("employeeCollectionList", employeeCollectionList);
    }

    @SuppressWarnings({ "static-access", "unused" })
    protected void prepareReport(HttpServletRequest request,HttpServletResponse response) throws ServletException, IOException {
        HttpSession session = request.getSession(true);

        String startDate="",endDate="",delimiter = null, dateValues[] = null;
        int totalworkingdays = 0, tempWorkingDays = 0,year = 0,month=0,day=0,lastdayofmonth;

        String employeeName=null;

        Workindays workingdays = new Workindays();

        Map<String, Map<String, String>> employeeCollectionClassifiedMap = new HashMap<String, Map<String, String>>();
        ConcurrentHashMap<String, String> workingdayMap = new ConcurrentHashMap<String, String>();
        Map<String, String> employeeNameMap = new LinkedHashMap<String, String>();
        Map<String, String> reportMap = new LinkedHashMap<String, String>();
        ConcurrentHashMap<String,String> tempworkingDaysMap = new ConcurrentHashMap<String, String>();
        Map<String,String> employeeAbsentDateMap ;
        Map<String, String> fixedHolidayMap = new LinkedHashMap<String, String>();
        Map<String, String> employeeCollectionMap = new LinkedHashMap<String, String>();
        Map<String,Map<String,String>> employeeDateSuggestionMap =new  LinkedHashMap<String, Map<String,String>>();

        //if(request.getParameter("startdate")!=null)startDate =(String) request.getParameter("startdate");
        //if(request.getParameter("enddate")!=null)endDate =(String) request.getParameter("enddate");
        //System.out.println("Start Date : "+startDate+" : End Date : "+endDate);

        List<String> employeeCollectionList = new ArrayList<String>();
        List<String> employeeIDList = new ArrayList<String>(); 

        if (session.getAttribute("employeeCollectionList") != null)
            employeeCollectionList = (List) session.getAttribute("employeeCollectionList");
        if (session.getAttribute("employeeCollectionList") != null)
            employeeCollectionClassifiedMap = (Map) session.getAttribute("employeeCollectionClassifiedMap");
        if (session.getAttribute("employeeMap") != null)
            employeeNameMap = (Map) session.getAttribute("employeeMap");

        if (session.getAttribute("employeeCollectionMap") != null)
            employeeCollectionMap = (Map) session.getAttribute("employeeCollectionMap");

        // to get date from excel sheet
         Iterator<Map.Entry<String,String>> employeeCollectionIterator = employeeCollectionMap.entrySet().iterator();
        int i=0;
        do {
                Map.Entry<String,String> employeeEntry = employeeCollectionIterator.next();
                startDate = employeeEntry.getValue();
            }while(i<0);

        delimiter = "/";
        dateValues = startDate.split(delimiter);

        year = Integer.parseInt(dateValues[2]);
        month = Integer.parseInt(dateValues[1]);
        day = Integer.parseInt(dateValues[0]);

        lastdayofmonth = workingdays.getLastDay(year, month, day);
        String daystr="";
        String monthStr="";

        if(day<10)daystr="0";
        if(month<10)monthStr="0";
        endDate = daystr+lastdayofmonth+"/"+monthStr+month+"/"+year;

        System.out.println("workingMap is called");
        tempworkingDaysMap = workingdays.getWorkingDaysMap(year, month, day);
        System.out.println("tempworkingDaysMap : "+tempworkingDaysMap);

        //call Holiyday map
        System.out.println("getHolidaysMap is called");
        fixedHolidayMap = workingdays.getHolidaysMap(startDate, endDate);
        System.out.println("fixedHolidayMap : "+fixedHolidayMap);
        // remove the holidays from working days map
        workingdayMap = workingdays.removeHoliday(tempworkingDaysMap, fixedHolidayMap);
        System.out.println("workingdayMap : "+workingdayMap);
        totalworkingdays = workingdayMap.size();

        /*below code is not used since the start and end date are not from user request*/

        /*workingdayMap = workingdays.getWorkingDaysMap(startDate,endDate);
        totalworkingdays = workingdayMap.size(); */

        for (String employeeID : employeeCollectionList) {
            Map<String, String> employeeMap = employeeCollectionClassifiedMap.get(employeeID);
             if (employeeMap.size() < totalworkingdays) {
                        employeeAbsentDateMap =new LinkedHashMap<String,String>();
                        Iterator<Map.Entry<String,String>> holyDayiterator = workingdayMap.entrySet().iterator();

                     while (holyDayiterator.hasNext()) {
                            Map.Entry<String,String> holiDayEntry = holyDayiterator.next();
                            if(!employeeMap.containsValue((holiDayEntry.getValue()))) employeeAbsentDateMap.put(holiDayEntry.getValue().toString(), holiDayEntry.getValue().toString());
                        }

                if(workingdays.isEmployee(employeeID))//check if the employee id exist 
                     {
                         if ( !employeeIDList.contains(employeeID))  employeeIDList.add(employeeID);

                                 ConcurrentHashMap<String, String> employeeLeaveReportDateDBMap= workingdays.getLeaveReportMap(employeeID,startDate,endDate); 
                                 if(employeeLeaveReportDateDBMap.size()==0)
                                     {
                                         employeeDateSuggestionMap.put(employeeID, employeeAbsentDateMap);
                                     }
                                 else{
                                         ConcurrentHashMap<String,String> employeeDatesFormatedMap = workingdays.changeLeaveDataMapFormat(employeeLeaveReportDateDBMap);
                                         Map<String,String> employeeDatesMap=workingdays.removeLeaveAppliedDate(employeeDatesFormatedMap,employeeAbsentDateMap);
                                         employeeDateSuggestionMap.put(employeeID, employeeDatesMap);
                                   } 
                     }
                }
        }
        if(reportMap.size()>0) session.setAttribute("message", "Comparing access-card data with leave manager data is done ");
        else session.setAttribute("message", "Comparing access-card data with leave manager data is done no data exists");

        session.setAttribute("leaveMap",employeeDateSuggestionMap);
        session.setAttribute("employeeIDList",employeeIDList);
        session.setAttribute("employeeNameMap",employeeNameMap);

    }

    /* this method is not used */
    @SuppressWarnings("unchecked")
    protected void generateLeaveReport(HttpServletRequest request,HttpServletResponse response) {
        HttpSession session = request.getSession(true);
        StringBuilder sb = new StringBuilder();
        String classname=null;
        int sno=1,style=0;
        Map<String, String> leavereportMap = new LinkedHashMap<String, String>();

        if (session.getAttribute("leaveMap") != null)
            leavereportMap = (Map) session.getAttribute("leaveMap");

        if (leavereportMap != null && leavereportMap.size() > 0) {
            Iterator<Map.Entry<String, String>> entries = leavereportMap.entrySet().iterator();
            sb.append("<TABLE ALIGN=\"CENTER\" border=\"0\" width=\"100%\" cellpadding=\"0\" cellspacing=\"5\" >");
            while (entries.hasNext()) {
                Map.Entry<String, String> entry = entries.next();
               // System.out.println("Key = " + entry.getKey() + ", Value = " + entry.getValue());
                if (style % 2 == 0) {
                    classname = "darkrow";
                } else {
                    classname = "lightrow";
                }
                    sb.append("<TR class=\"" + classname + "\">");
                        sb.append("<TD width=\"10%\" ALIGN=\"CENTER\" class='homelink'>"+sno+"</TD>");
                        sb.append("<TD width=\"35%\" ALIGN=\"CENTER\" class='homelink' style=\"line-height:15px;\">"+entry.getKey()+ "</TD>");
                        sb.append("<TD width=\"35%\" ALIGN=\"CENTER\" class='homelink' style=\"line-height:15px;\">"+entry.getValue()+ "</TD>");
                        sb.append("<TD width=\"35%\" ALIGN=\"CENTER\" class='homelink' style=\"line-height:15px;\">Send Mail</TD>");
                    sb.append("</TR>");
            sno++;
            style++;
             }
            sb.append("</TABLE>");
        }
        session.setAttribute("leaveReport",sb.toString());
    }
} 
```

以前是打印出来的，现在不打印了，请帮我找找。

问候托尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:45:17.567

重新启动服务器并检查是否不重新启动系统本身。这样做后，请检查 sop 将被打印。

# android - Android - 想要创建一个表单，比如在联系人应用程序中创建我的个人资料视图？

> ID：10979120
> 
> 赞同：2
> 
> 时间：2012-06-11T11:22:03.363
> 
> 标签：android

我想学习如何创建一个与 android 的联系人应用程序中给出的表单相同的表单。当您打开联系人应用程序并单击选项菜单中的创建我的个人资料图像时，您可以看到该表格。

如果您知道任何有示例代码来创建此类表单的教程，请给我这些链接。我也在寻找这样的教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:34:34.063

来自安卓：http: [//developer.android.com/resources/tutorials/views/hello-formstuff.html](http://developer.android.com/resources/tutorials/views/hello-formstuff.html)

其他：

[http://mobile.tutsplus.com/tutorials/android/android-sdk-creating-forms/](http://mobile.tutsplus.com/tutorials/android/android-sdk-creating-forms/)

[http://vimaltuts.com/android/finalize-your-login-form-part-3](http://vimaltuts.com/android/finalize-your-login-form-part-3)

还有更多。但我建议您从 Android 文档站点上的那个开始 -[这个](http://developer.android.com/resources/tutorials/views/hello-formstuff.html).

# c - 如何获取 SD 卡事件的通知？

> ID：10979123
> 
> 赞同：6
> 
> 时间：2012-06-11T11:22:55.907
> 
> 标签：c, linux, udev

我想检查 SD 卡的存在，并接收 SD 卡添加/删除的通知。

到目前为止，我已经使用`libudev`了，并且我已经制作了一个小应用程序来监听 SD 卡事件。

代码如下：

```
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <stddef.h>
#include <errno.h>
#include <sys/time.h> //debug -> remove me

#include <libudev.h>

#define ADD_FILTER "add"
#define REMOVE_FILTER "remove"
#define SUBSYSTEM_FILTER "block"
#define ATTR_FILTER "ID_MODEL"
#define SD_ATTR_VALUE "SD_MMC"
#define ATTR_ACTIVE_SD "ID_PART_TABLE_TYPE"

static bool isDeviceSD(struct udev_device *device);
static bool isDevPresent(struct udev *device);
static void print_device(struct udev_device *device, const char *source); //for debugging -> remove me
static bool s_bSD_present;

int main()
{
    struct udev *udev;
    struct udev_monitor *udev_monitor = NULL;
    fd_set readfds;
    s_bSD_present = false;

    udev = udev_new();
    if (udev == NULL)
    {
        printf("udev_new FAILED \n");
        return 1;
    }

    s_bSD_present = isDevPresent(udev);
    if(s_bSD_present)
    {
        printf("+++SD is plugged in \n");
    }
    else
    {
        printf("---SD is not plugged in \n");
    }

    udev_monitor = udev_monitor_new_from_netlink(udev, "udev");
    if (udev_monitor == NULL) {
        printf("udev_monitor_new_from_netlink FAILED \n");
        return 1;
    }

    //add some filters
    if( udev_monitor_filter_add_match_subsystem_devtype(udev_monitor, SUBSYSTEM_FILTER, NULL) < 0 )
    {
        printf("udev_monitor_filter_add_match_subsystem_devtype FAILED \n");
        return 1;
    }

    if (udev_monitor_enable_receiving(udev_monitor) < 0)
    {
        printf("udev_monitor_enable_receiving FAILED \n");
        return 1;
    }

    while (1) {
        printf("Polling for new data... \n");

        int fdcount = 0;

        FD_ZERO(&readfds);

        if (udev_monitor != NULL)
        {
            FD_SET(udev_monitor_get_fd(udev_monitor), &readfds);
        }

        fdcount = select(udev_monitor_get_fd(udev_monitor)+1, &readfds, NULL, NULL, NULL);
        if (fdcount < 0)
        {
            if (errno != EINTR)
                printf("Error receiving uevent message\n");
            continue;
        }

        if ((udev_monitor != NULL) && FD_ISSET(udev_monitor_get_fd(udev_monitor), &readfds))
        {
            struct udev_device *device;

            device = udev_monitor_receive_device(udev_monitor);
            if (device == NULL)
                continue;

            //check the action
            const char* szAction = udev_device_get_action(device);
            if( strcmp(szAction, ADD_FILTER) == 0)
            {
                if( !s_bSD_present && isDeviceSD(device) )
                {
                    s_bSD_present = true;
                    printf("+++SD has been plugged in \n");
                }
            }
            else if( strcmp(szAction, REMOVE_FILTER) == 0 )
            {
                if( s_bSD_present && isDeviceSD(device) )
                {
                    s_bSD_present = false;
                    printf("---SD has been removed \n");
                }
            }

            udev_device_unref(device);
        }
    }

    return 0;
}

static bool isDeviceSD(struct udev_device *device)
{
    bool retVal = false;
    struct udev_list_entry *list_entry = 0;
    struct udev_list_entry* model_entry = 0;
    struct udev_list_entry* active_sd_entry = 0;

    list_entry = udev_device_get_properties_list_entry(device);
    model_entry = udev_list_entry_get_by_name(list_entry, ATTR_FILTER);
    if( 0 != model_entry )
    {
        const char* szModelValue = udev_list_entry_get_value(model_entry);
        active_sd_entry = udev_list_entry_get_by_name(list_entry, ATTR_ACTIVE_SD);
        if(strcmp(szModelValue, SD_ATTR_VALUE) == 0 && active_sd_entry != 0)
        {
            printf("Device is SD \n");
            retVal = true;

            //print_device(device, "UDEV");
        }
    }
    return retVal;
}

static bool isDevPresent(struct udev *device)
{
    bool retVal = false;
    struct udev_enumerate *enumerate;
    struct udev_list_entry *devices, *dev_list_entry;

    enumerate = udev_enumerate_new(device);
    udev_enumerate_add_match_subsystem(enumerate, SUBSYSTEM_FILTER);
    udev_enumerate_scan_devices(enumerate);
    devices = udev_enumerate_get_list_entry(enumerate);

    udev_list_entry_foreach(dev_list_entry, devices)
    {
        struct udev_device *dev;
        const char* dev_path = udev_list_entry_get_name(dev_list_entry);
        dev = udev_device_new_from_syspath(device, dev_path);

        if( true == isDeviceSD(dev) )
        {
            retVal = true;
            udev_device_unref(dev);
            break;
        }

        udev_device_unref(dev);
    }
    udev_enumerate_unref(enumerate);

    return retVal;
}

static void print_device(struct udev_device *device, const char *source)
{
      struct timeval tv;
      struct timezone tz;

      gettimeofday(&tv, &tz);
      printf("%-6s[%llu.%06u] %-8s %s (%s)\n",
             source,
             (unsigned long long) tv.tv_sec, (unsigned int) tv.tv_usec,
             udev_device_get_action(device),
             udev_device_get_devpath(device),
             udev_device_get_subsystem(device));

            struct udev_list_entry *list_entry;

            udev_list_entry_foreach(list_entry, udev_device_get_properties_list_entry(device))
                  printf("%s=%s\n",
                         udev_list_entry_get_name(list_entry),
                         udev_list_entry_get_value(list_entry));
            printf("\n");

} 
```

此代码将收到有关 SD 卡添加/删除的通知（以及 SD 的初始状态 - 插入/拔出）。但是，它更像是一种 hack，并且并非在所有情况下都有效。

我目前使用`ID_MODEL`设备的属性并检查它是否是`SD_MMC`- 用于 SD 卡。我现在只需要这种卡，就够了。

插入 SD 卡时，会为子系统模块发送以下事件：2 个`change`事件，每个分区有 1 个`add`事件。事件属性如下所示：

```
<----- change event - subsystem block - disk type disk ----->

UDEV  [1339412734.522055] change   /devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb1/1-1/1-1:1.0/host11/target11:0:0/11:0:0:2/block/sdd (block)
UDEV_LOG=3
ACTION=change
DEVPATH=/devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb1/1-1/1-1:1.0/host11/target11:0:0/11:0:0:2/block/sdd
SUBSYSTEM=block
DEVNAME=/dev/sdd
DEVTYPE=disk
SEQNUM=3168
ID_VENDOR=Generic-
ID_VENDOR_ENC=Generic-
ID_VENDOR_ID=0bda
ID_MODEL=SD_MMC
ID_MODEL_ENC=SD\x2fMMC\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20
ID_MODEL_ID=0151
ID_REVISION=1.00
ID_SERIAL=Generic-_SD_MMC_20060413092100000-0:2
ID_SERIAL_SHORT=20060413092100000
ID_TYPE=disk
ID_INSTANCE=0:2
ID_BUS=usb
ID_USB_INTERFACES=:080650:
ID_USB_INTERFACE_NUM=00
ID_USB_DRIVER=usb-storage
ID_PATH=pci-0000:02:03.0-usb-0:1:1.0-scsi-0:0:0:2
ID_PART_TABLE_TYPE=dos
UDISKS_PRESENTATION_NOPOLICY=0
UDISKS_PARTITION_TABLE=1
UDISKS_PARTITION_TABLE_SCHEME=mbr
UDISKS_PARTITION_TABLE_COUNT=2
MAJOR=8
MINOR=48
DEVLINKS=/dev/block/8:48 /dev/disk/by-id/usb-Generic-_SD_MMC_20060413092100000-0:2 /dev/disk/by-path/pci-0000:02:03.0-usb-0:1:1.0-scsi-0:0:0:2

<----- add event partition 1 - subsystem block - disk type partition ----->

UDEV  [1339412734.719107] add      /devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb1/1-1/1-1:1.0/host11/target11:0:0/11:0:0:2/block/sdd/sdd1 (block)
UDEV_LOG=3
ACTION=add
DEVPATH=/devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb1/1-1/1-1:1.0/host11/target11:0:0/11:0:0:2/block/sdd/sdd1
SUBSYSTEM=block
DEVNAME=/dev/sdd1
DEVTYPE=partition
SEQNUM=3169
ID_VENDOR=Generic-
ID_VENDOR_ENC=Generic-
ID_VENDOR_ID=0bda
ID_MODEL=SD_MMC
ID_MODEL_ENC=SD\x2fMMC\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20
ID_MODEL_ID=0151
ID_REVISION=1.00
ID_SERIAL=Generic-_SD_MMC_20060413092100000-0:2
ID_SERIAL_SHORT=20060413092100000
ID_TYPE=disk
ID_INSTANCE=0:2
ID_BUS=usb
ID_USB_INTERFACES=:080650:
ID_USB_INTERFACE_NUM=00
ID_USB_DRIVER=usb-storage
ID_PATH=pci-0000:02:03.0-usb-0:1:1.0-scsi-0:0:0:2
ID_PART_TABLE_TYPE=dos
ID_FS_UUID=6343c7b9-92a9-4d8f-bdd8-893f1190f294
ID_FS_UUID_ENC=6343c7b9-92a9-4d8f-bdd8-893f1190f294
ID_FS_VERSION=1.0
ID_FS_TYPE=ext2
ID_FS_USAGE=filesystem
UDISKS_PRESENTATION_NOPOLICY=0
UDISKS_PARTITION=1
UDISKS_PARTITION_SCHEME=mbr
UDISKS_PARTITION_NUMBER=1
UDISKS_PARTITION_TYPE=0x83
UDISKS_PARTITION_SIZE=1006919680
UDISKS_PARTITION_SLAVE=/sys/devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb1/1-1/1-1:1.0/host11/target11:0:0/11:0:0:2/block/sdd
UDISKS_PARTITION_OFFSET=11618304
UDISKS_PARTITION_ALIGNMENT_OFFSET=0
MAJOR=8
MINOR=49
DEVLINKS=/dev/block/8:49 /dev/disk/by-id/usb-Generic-_SD_MMC_20060413092100000-0:2-part1 /dev/disk/by-path/pci-0000:02:03.0-usb-0:1:1.0-scsi-0:0:0:2-part1 /dev/disk/by-uuid/6343c7b9-92a9-4d8f-bdd8-893f1190f294

<----- add event partition 2 - subsystem block - disk type partition ----->

UDEV  [1339412734.731338] add      /devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb1/1-1/1-1:1.0/host11/target11:0:0/11:0:0:2/block/sdd/sdd2 (block)
UDEV_LOG=3
ACTION=add
DEVPATH=/devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb1/1-1/1-1:1.0/host11/target11:0:0/11:0:0:2/block/sdd/sdd2
SUBSYSTEM=block
DEVNAME=/dev/sdd2
DEVTYPE=partition
SEQNUM=3170
ID_VENDOR=Generic-
ID_VENDOR_ENC=Generic-
ID_VENDOR_ID=0bda
ID_MODEL=SD_MMC
ID_MODEL_ENC=SD\x2fMMC\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20
ID_MODEL_ID=0151
ID_REVISION=1.00
ID_SERIAL=Generic-_SD_MMC_20060413092100000-0:2
ID_SERIAL_SHORT=20060413092100000
ID_TYPE=disk
ID_INSTANCE=0:2
ID_BUS=usb
ID_USB_INTERFACES=:080650:
ID_USB_INTERFACE_NUM=00
ID_USB_DRIVER=usb-storage
ID_PATH=pci-0000:02:03.0-usb-0:1:1.0-scsi-0:0:0:2
ID_PART_TABLE_TYPE=dos
UDISKS_PRESENTATION_NOPOLICY=0
UDISKS_PARTITION=1
UDISKS_PARTITION_SCHEME=mbr
UDISKS_PARTITION_NUMBER=2
UDISKS_PARTITION_TYPE=0xda
UDISKS_PARTITION_SIZE=11618304
UDISKS_PARTITION_FLAGS=boot
UDISKS_PARTITION_SLAVE=/sys/devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb1/1-1/1-1:1.0/host11/target11:0:0/11:0:0:2/block/sdd
UDISKS_PARTITION_OFFSET=1022410752
UDISKS_PARTITION_ALIGNMENT_OFFSET=0
MAJOR=8
MINOR=50
DEVLINKS=/dev/block/8:50 /dev/disk/by-id/usb-Generic-_SD_MMC_20060413092100000-0:2-part2 /dev/disk/by-path/pci-0000:02:03.0-usb-0:1:1.0-scsi-0:0:0:2-part2 
```

从`change`事件中，我无法提取有关设备是添加还是删除的任何信息。我试图打开设备名称`\dev\sdd`，但我没有权限，所以该选项落...

现在我只是检查分区 ( `add`/ `remove`) 的操作属性。

这个版本的程序非常适合有分区的 SD 卡。当没有分区时，只`change`接收事件。

**所以我的问题是**：有什么方法可以检查媒体是否已从`change`活动中添加/删除？还是有其他方法可以检查设备是否可用（请记住分区问题）？

欢迎任何关于改进设备属性迭代或获取通知的方法的建议。

PS而且我不能使用`libusb`:)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:45:56.647

好的。所以我让它在没有分区的 SD 卡的 PC 上工作。

更新后的代码是这样的：

```
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <stddef.h>
#include <errno.h>
#include <sys/time.h> //debug -> remove me
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>

#include <libudev.h>

#define ADD_FILTER "add"
#define REMOVE_FILTER "remove"
#define SUBSYSTEM_FILTER "block"
#define DEVTYPE_FILTER "disk"
#define ATTR_FILTER "ID_MODEL"
#define SD_ATTR_VALUE "SD_MMC"
#define ATTR_ADDED_DISK "UDISKS_PARTITION_TABLE" // attribute is available for "change" event when SD card is added (n/a when removed)

static bool isDeviceSD(struct udev_device *device); //checks if device is SD card (MMC)
static bool isDevPresent(struct udev *device); //checks if device is present (SD + added)
static bool isDeviceAdded(struct udev_device *device); //checks if device is added (presence of attribute ATTR_ADDED_DISK)
static void print_device(struct udev_device *device, const char *source); //for debugging -> remove me
static bool s_bSD_present;

int main()
{
    struct udev *udev;
    struct udev_monitor *udev_monitor = NULL;
    fd_set readfds;
    s_bSD_present = false;

    udev = udev_new();
    if (udev == NULL)
    {
        printf("udev_new FAILED \n");
        return 1;
    }

    if( isDevPresent(udev) )
    {
        s_bSD_present = true;
        printf("+++SD is plugged in \n");
    }
    else
    {
        printf("---SD is not plugged in \n");
    }

    udev_monitor = udev_monitor_new_from_netlink(udev, "udev");
    if (udev_monitor == NULL) {
        printf("udev_monitor_new_from_netlink FAILED \n");
        return 1;
    }

    //add some filters
    if( udev_monitor_filter_add_match_subsystem_devtype(udev_monitor, SUBSYSTEM_FILTER, DEVTYPE_FILTER) < 0 )
    {
        printf("udev_monitor_filter_add_match_subsystem_devtype FAILED \n");
        return 1;
    }

    if (udev_monitor_enable_receiving(udev_monitor) < 0)
    {
        printf("udev_monitor_enable_receiving FAILED \n");
        return 1;
    }

    while (1) {
        printf("Polling for new data... \n");

        int fdcount = 0;

        FD_ZERO(&readfds);

        if (udev_monitor != NULL)
        {
            FD_SET(udev_monitor_get_fd(udev_monitor), &readfds);
        }

        fdcount = select(udev_monitor_get_fd(udev_monitor)+1, &readfds, NULL, NULL, NULL);
        if (fdcount < 0)
        {
            if (errno != EINTR)
                printf("Error receiving uevent message\n");
            continue;
        }

        if ((udev_monitor != NULL) && FD_ISSET(udev_monitor_get_fd(udev_monitor), &readfds))
        {
            struct udev_device *device;

            device = udev_monitor_receive_device(udev_monitor);
            if (device == NULL)
                continue;

            //check presence
            if( isDeviceSD(device) && isDeviceAdded(device) )
            {
                if(!s_bSD_present) //guard for double "change" events
                {
                    s_bSD_present = true;
                    printf("+++SD has been plugged in \n");
                }
            }
            else
            {
                if(s_bSD_present) //not needed -> just keeping consistency
                {
                    s_bSD_present = false;
                    printf("---SD has been removed \n");
                }
            }

            udev_device_unref(device);
        }
    }

    return 0;
}

static bool isDeviceSD(struct udev_device *device)
{
    bool retVal = false;
    struct udev_list_entry *list_entry = 0;
    struct udev_list_entry* model_entry = 0;

    list_entry = udev_device_get_properties_list_entry(device);
    model_entry = udev_list_entry_get_by_name(list_entry, ATTR_FILTER);
    if( 0 != model_entry )
    {
        const char* szModelValue = udev_list_entry_get_value(model_entry);
        if( strcmp( szModelValue, SD_ATTR_VALUE) == 0 )
        {
            //printf("Device is SD \n");
            retVal = true;

            //print_device(device, "UDEV");
        }
    }
    return retVal;
}

static bool isDeviceAdded(struct udev_device *device)
{
    bool retVal = false;
    struct udev_list_entry *list_entry = 0;
    struct udev_list_entry* added_disk_entry = 0;

    list_entry = udev_device_get_properties_list_entry(device);
    added_disk_entry = udev_list_entry_get_by_name(list_entry,/* "DEVNAME" */ ATTR_ADDED_DISK);
    if( 0 != added_disk_entry )
    {
        retVal = true;
    }
    return retVal;
}

static bool isDevPresent(struct udev *device)
{
    bool retVal = false;
    struct udev_enumerate *enumerate;
    struct udev_list_entry *devices, *dev_list_entry;

    enumerate = udev_enumerate_new(device);
    udev_enumerate_add_match_subsystem(enumerate, SUBSYSTEM_FILTER);
    udev_enumerate_scan_devices(enumerate);
    devices = udev_enumerate_get_list_entry(enumerate);

    udev_list_entry_foreach(dev_list_entry, devices)
    {
        struct udev_device *dev;
        const char* dev_path = udev_list_entry_get_name(dev_list_entry);
        dev = udev_device_new_from_syspath(device, dev_path);

        if( isDeviceSD(dev) && isDeviceAdded(dev) )
        {
            retVal = true;
            udev_device_unref(dev);
            break;
        }

        udev_device_unref(dev);
    }
    udev_enumerate_unref(enumerate);

    return retVal;
}

static void print_device(struct udev_device *device, const char *source)
{
      struct timeval tv;
      struct timezone tz;

      gettimeofday(&tv, &tz);
      printf("%-6s[%llu.%06u] %-8s %s (%s)\n",
             source,
             (unsigned long long) tv.tv_sec, (unsigned int) tv.tv_usec,
             udev_device_get_action(device),
             udev_device_get_devpath(device),
             udev_device_get_subsystem(device));

            struct udev_list_entry *list_entry;

            udev_list_entry_foreach(list_entry, udev_device_get_properties_list_entry(device))
                  printf("%s=%s\n",
                         udev_list_entry_get_name(list_entry),
                         udev_list_entry_get_value(list_entry));
            printf("\n");

} 
```

解决方案（仍然不是很亮）正在检查某些仅在添加 SD 卡时可用的属性（例如`UDISKS_PARTITION_TABLE`）。

这在 x86 上运行良好。

# javascript - 如何从 .cs 文件中调用 .aspx 的方法

> ID：10979124
> 
> 赞同：2
> 
> 时间：2012-06-11T11:23:10.853
> 
> 标签：javascript, asp.net

我在 .aspx 文件中使用了 javascript 创建了网页。

我有一个保存按钮，但在源代码中我使用 javascript 作为保存按钮，我在其中声明了一个名为的函数`OnClientClick="javascript : validateTextTest()"`，并且在源代码的头部我调用了这个函数`validateTextTest()`。

下面是源代码中的保存按钮：

```
<asp:Button ID="Save"  runat="server" 
   onclick="Save_Click" Text="Save" 
   OnClientClick="javascript : validateTextTest()" Width="63px" /> 
```

现在我需要`validateTextTest()`在 .cs 文件的保存按钮中调用一个函数。因为我有两到三个文本框，如果我在三个文本框中留下一个文本框，它不应该插入 DB。

所以请告诉我如何调用 .cs 文件中的函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:27:57.423

为了做这样的事情，你可以使用 asp.net 验证控件，为了你的目的，你需要为每个 TextBoxes 一个 RequieredFieldValidator，你可以像下面的代码一样使用它们：

```
<asp:TextBox ID="txtISBN" runat="server"></asp:TextBox>
<asp:RequiredFieldValidator ID="RQVISBN" runat="server" ErrorMessage="*" ControlToValidate="txtISBN"></asp:RequiredFieldValidator> 
```

这些控件很棒！他们会根据需要在客户端进行验证；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:34:04.680

您需要首先定义您正在使用的技术堆栈。是 ASP.NET 还是 MVC。

我假设您使用的是 ASP.NET。鉴于您已经开始编写此应用程序的方式。你需要做一些事情来让你的方法发挥作用。

```
<form name="myform"> 

<asp:HiddenField runat="server" id="validRequest"/>

    <script type="text/javascript"> 

function validateTextTest()  {       

//validation goes here    

var validRequest = document.getElementById(<%#validRequest.ClientID%>);

//set validation outcome to the validRequest etc

validRequest.value = 'true';
if(validRequest.value == 'true')
   return true;
return false;

    }  </script>  
</form> 
```

我忘记了它是哪一个，但请检查您的 Page_Load 等

```
protected void Page_Load(object sender, EventArgs e)
{
     if(validRequest.Value == "true")
         //Do whatever you need to
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T11:29:16.137

validateTextTest 是您的 javascript 函数，您可能会在提交到服务器之前将其用于某些客户端验证。所以我不认为你真的应该在你的服务器端代码（.cs 文件）中使用客户端函数来验证输入。您也应该在服务器端代码中进行相同的验证。像这样的东西

```
if((!String.IsNullOrEmpty(TextBox1.Text)) && 
               (!String.IsNullOrEmpty(TextBox1.Text)) && 
                          (!String.IsNullOrEmpty(TextBox1.Text)))
{
   // Insert to DB    
}
else
{
   //Show validation error message
} 
```

# architecture - 胖客户端还是独立应用程序？

> ID：10979130
> 
> 赞同：4
> 
> 时间：2012-06-11T11:23:25.437
> 
> 标签：architecture, thick-client

**我想知道胖客户端**和**独立应用程序**之间的确切区别是什么。

根据维基百科，胖客户端仍然需要应用服务器。

我有一个 .Net Windows Forms 应用程序，它不连接到应用程序服务器，但仍使用数据库服务器。此应用程序仅是 db 服务器的 SQL 提供程序，不会以相关方式处理数据。

此应用程序被认为是**独立**应用程序还是**胖**客户端？

编辑：例如，Microsoft SQL Server Management Studio 是独立应用程序还是胖客户端？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T11:27:50.160

一个独立的应用程序可以在没有任何网络连接的情况下工作，但是一个胖客户端需要定期的网络连接。

在您的情况下，您的应用程序需要通过网络连接到数据库服务器，因此它将被称为胖客户端。

这些术语使用松散，所以不要太担心。

# c++ - 在函数定义之前引用一个字段

> ID：10979132
> 
> 赞同：1
> 
> 时间：2012-06-11T11:23:33.130
> 
> 标签：c++, function

我正在浏览一个 c++ 代码库，在头文件（Executor.h）中有公共字段定义

```
typedef std::pair<ExecutionState*,ExecutionState*> StatePair; 
```

在cpp文件（Executor.cpp）里面有一行

```
Executor::StatePair 
Executor::fork(ExecutionState &current, ref<Expr> condition, bool isInternal) { /* function definition */ } 
```

其中该字段在成员函数定义之一之前被引用

在定义之前说明字段名称的目的是什么？是范围问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:26:26.247

是`StatePair`一个*类型*。它在函数定义前面的目的是说明函数的返回类型

注意 的`typedef`定义中的`StatePair`。它为类型引入了名称别名。在这种情况下`std::pair<ExecutionState*,ExecutionState*>`也会被调用`StatePair`，所以你不必写那个长类型名

函数的返回类型命名函数返回的值必须属于的类型。例如，在

```
int f(); 
```

该函数`f`必须返回一个整数 ( `int`)，因此我们可以编写如下定义：

```
int f() {return 0;} 
```

函数体中可能还有其他语句，但最后一个语句必须是 a`return`后面有一个整数值（在 bavode 示例中，值为`0`）

由于 C++ 不关心换行（将它们视为常规空格），因此格式

```
int
f() {...} 
```

与上述功能相同。

# forms - 使用获取数据来预填表单

> ID：10979135
> 
> 赞同：2
> 
> 时间：2012-06-11T11:23:46.047
> 
> 标签：forms, symfony

我想在 symfony2 中预填表单域。网址看起来像这样

```
http://localhost/Symfony/web/app_dev.php/clearance/new?projectId=6 
```

我现在想将表单中的 projectId 设置为 6。

这是我的控制器代码

```
 public function newclearanceAction(){
    $request = $this->getRequest();
    $id = $request->query->get('projectId');

    echo $id; //this works, but how to send it to the form?????

    $clearance = new Clearance();
    $form = $this->createForm(new ClearanceType(), $clearance);

    if ($request->getMethod() == 'POST'){
            $form->bindRequest($request);

            if($form->isValid()) {
                    $em = $this->getDoctrine()->getEntityManager();
                    $em->persist($clearance);
                    $em->flush();
                    return $this->redirect($this->generateUrl('MyReportBundle_project_list'));
            }
    }
    return $this->render('MyReportBundle:Clearance:new.html.twig',array('form'=>$form->createView())); 
```

这是表单视图的代码

```
<form action="{{ path('MyReportBundle_clearance_new') }}" method="post" >
        {{ form_errors(form) }}
        {{ form_rest(form) }}
    <input type="submit" />
</form> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T11:38:23.933

这取决于您的清关实体是否有与之相关的项目。如果是这样，您可以执行以下操作：

```
$request = $this->getRequest();
$id = $request->query->get('projectId');
$em = $this->getDoctrine()->getEntityManager();
$project = $em->getRepository("MyReportBundle:Project")->find($id)
$clearance = new Clearance();
$clearance->setProject($project);
$form = $this->createForm(new ClearanceType(), $clearance); 
```

这将在清除对象上设置项目并将其传递给表单。

目前，您无法在 Symfony2 中为实体创建隐藏字段，因此我目前的解决方法是创建一个查询构建器实例并将其传递给表单，这样当您拥有 100 个项目时，项目的表单选择不会变得荒谬。要在我添加的操作中执行此操作：

```
$request = $this->getRequest();
$id = $request->query->get('projectId');
$em = $this->getDoctrine()->getEntityManager();

$repo = $em->getRepository("MyReportBundle:Project");
$project = $repo->find($id)
//create the query builder
$query_builder = $repo->createQueryBuilder('p')
     ->where('p.id = :id')
     ->setParameter('id', $project->getId());

$clearance = new Clearance();
$clearance->setProject($project);
//pass it through
$form = $this->createForm(new ClearanceType($query_builder), $clearance); 
```

并在表单类中：

```
protected $query_builder;

public function __construct($query_builder)
{
    $this->query_builder = $query_builder;
}

public function buildForm(FormBuilder $builder, array $options)
{
    $builder
        ->add('Your field')
        // all other fields
        // Then below the query builder to limit to one project
        ->add('project', 'entity', array(
            'class' => 'MyReportBundle:Project',
            'query_builder' => $this->query_builder
        ))
    ;
} 
```

# php - php基于2个子键合并多任务数组

> ID：10979136
> 
> 赞同：0
> 
> 时间：2012-06-11T11:23:47.853
> 
> 标签：php, multidimensional-array

我有 2 个数组，想将它们合并在一起，并且在第二个数组中找不到该项目，插入一个具有空值的键。基本上在array1中添加来自array2的项目，匹配2个array1子键；Array2 不必与数组 1 的长度相同，它的长度总是更小。

数组1

```
[0][item] = 'aaaa'
   [type] = '1234'

[1][item] = 'aaaa'
   [type] = '6789'

[2][item] = 'bbbb'
   [type] = '1234'

[3][item] = 'bbbb'
   [type] = '6789' 
```

和数组2：

```
[0][item] = 'aaaa'
   [type] = '1234'
   [feature] = 'www'

[1][item] = 'aaaa'
   [type] = '6789'
   [feature] = 'www' 
```

结果：

```
[0][item] = 'aaaa'
   [type] = '1234'
   [feature] = 'www'

[1][item] = 'aaaa'
   [type] = '6789'
   [feature] = 'www'

[2][item] = 'bbbb'
   [type] = '1234'
   [feature] = ''

[3][item] = 'bbbb'
   [type] = '6789'
   [feature] = '' 
```

我在这里尝试了几个建议，它们都归结为一维数组或匹配索引。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:41:58.033

你可以使用这样的东西：

```
array_walk($array, function ($arr, $key) use ($array2) {
   if (array_key_exists($key, $array2) && is_array($array2[$key])) {
      $arr = array_merge($arr, $array2[$key]);
   }
});
print_r($array); // Will have all missed keys from $array2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:28:29.873

你有没有尝试过这样的事情？

```
foreach ($array1 as $key=>$value){
   if (isset($array2[$key]['feature'])){
      $array1[$key]['feature'] = $array2[$key]['feature'];
   } else {
      $array1[$key]['feature'] = '';
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T11:34:55.437

让 PHP 通过数组键为您进行匹配：

```
$result=array();
foreach ($array1 as $item) {
  $item['feature']='';
  $result[$item['item'].'-'.$item['type']]=$item;
}
foreach ($array2 as $item) {
  $result[$item['item'].'-'.$item['type']]['feature']=$item['feature'];
}
$result=array_values($result); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T11:56:40.427

'feature' 不需要空字符串，在以后的迭代中，您可以使用 isset 进行检查。保持简单，不要创建不需要或难以维护的结构。这将适用于 n 个子键并且不需要维护。

```
$ar1 = array(
        array('item' => 'aaaa', 'type' => '1234'),
        array('item' => 'aaaa', 'type' => '6789'),
        array('item' => 'bbbb', 'type' => '1234'),
        array('item' => 'bbbb', 'type' => '6789')
    );
    $ar2 = array(
        array('item' => 'aaaa', 'type' => '1234','feature' => 'www'),
        array('item' => 'aaaa', 'type' => '6789','feature' => 'www')
    );
    for ($i = 0;$i<count($ar1);$i++) {
        if (array_key_exists($i, $ar2)){
            $result[] = array_merge($ar2[$i], $ar1[$i]);
        } else {
            $result[] = $ar1[$i];
        }
    }

// result
Array
(
    [0] => Array
        (
        [item] => aaaa
        [type] => 1234
        [feature] => www
    )

    [1] => Array
    (
        [item] => aaaa
        [type] => 6789
        [feature] => www
    )

    [2] => Array
    (
        [item] => bbbb
        [type] => 1234
    )

    [3] => Array
    (
        [item] => bbbb
        [type] => 6789
    )

) 
```

# validation - 在 Kohana 3.2 ORM 模型中使用验证回调

> ID：10979139
> 
> 赞同：0
> 
> 时间：2012-06-11T11:24:08.853
> 
> 标签：validation, orm, callback, kohana

> 我正在尝试创建一个自定义函数来验证 kohana 3.2 orm 模型中的多个字段。
> 
> 我知道有很多示例展示了如何从控制器执行此操作，但我想在 orm 模型中进行设置。
> 
> 我正在尝试做这样的事情：

```
public function rules()
{
   return array(
       'my_field' => array(
           array(array($this, 'my_function')),
       ),
   );
}

public function my_function(Validation $validation, $my_field)
{
//Some calculation and then return error..
$validation->add_error($my_field, 'my_field_not_valid');

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:33:31.573

不要忘记为您的自定义回调定义参数：

```
public function rules()
{
   return array(
       'my_field' => array(
           array(array($this, 'my_function'), array(':validation', ':field')),
       ),
   );
} 
```

[http://kohanaframework.org/3.2/guide/kohana/security/validation#binding-variables](http://kohanaframework.org/3.2/guide/kohana/security/validation#binding-variables)

PS。请粘贴您的错误/异常文本。通常它已经包含正确的答案。

# python - 处理西里尔文（俄文）字母时如何解决 UnicodeEncodeError？

> ID：10979140
> 
> 赞同：2
> 
> 时间：2012-06-11T11:24:10.997
> 
> 标签：python, unicode, encode, non-unicode

我尝试使用提要解析器读取 RSS 提要。

```
import feedparser
url = 'http://example.com/news.xml'
d=feedparser.parse(url)
f = open('rss.dat','w')
for e in d.entries:
   title = e.title
   print >>f, address
f.close() 
```

它适用于英文 RSS 提要，但如果我尝试显示用西里尔字母书写的标题，则会收到 UnicodeEncodeError。它发生在我：

1.  尝试将标题写入文件。
2.  尝试在屏幕上显示标题。
3.  尝试在 URL 中使用它来访问网页。

我的问题是如何轻松解决这个问题。我很想有一个像这样简单的解决方案：

```
new_title = some_function(title) 
```

可能有办法用 HTML 代码替换每个西里尔符号吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T11:39:35.000

FeedParser 本身可以很好地处理编码，除非它被错误地声明。有关可能的解释，请参阅[http://code.google.com/p/feedparser/issues/detail?id=114](http://code.google.com/p/feedparser/issues/detail?id=114)。似乎 Python 2.5 使用 ascii 作为默认编码，并导致问题。您能否粘贴实际的提要 URL，以查看那里的编码是如何声明的。如果声明编码似乎是错误的 - 您必须找到一种方法来指示 FeedParser 覆盖默认值。

**编辑**：好的，似乎错误在打印语句中。利用

```
f.write(title.encode('utf-8')) 
```

# c# - 如何找出 ComboBox 是否包含任何项目？

> ID：10979145
> 
> 赞同：2
> 
> 时间：2012-06-11T11:24:35.480
> 
> 标签：c#, winforms, combobox

我在 C# 中有一个简单的 WinForms 应用程序，它有两个控件：`combobox1`和`button`. 我想知道 中是否有任何项目`combobox1`。

我试过这个，但它只告诉我是否有一个选定的项目：

```
if (combobox1.Text != ""))
{
    MessageBox.Show("Combo is not empty");
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T11:30:35.933

双击表单中的按钮并将此代码插入到单击事件处理程序中：`

```
 //this code should work
        if (comboBox1.Items.Count == 0)
        {
            MessageBox.Show("Your combo is empty");
        }

   ` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T11:58:56.717

我用

```
if (comboBox1.SelectedItem!=null)
{
    MessageBox.Show("Combo is not empty");
} 
```

确定是否选择了某物

我用它来确定组合框是否有任何项目。

```
if (comboBox1.Items.Count > 0)
{
    MessageBox.Show("Your combo is not empty");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T11:25:57.830

如果没有选择/存在项目，则 SelectedIndex 属性返回 -1。

```
 if (combobox1.SelectedIndex == -1) 
    //no item selected/present 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T16:04:04.380

好吧，我敢肯定，如果您查看 MSDN 上的 ComboBox 类：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.combobox_properties](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox_properties)，它会对您有所帮助。

此外，我个人不会倾向于使用`selectedIndex`or`selectedItem`属性，因为可能存在项目集合不为空但实际上没有选择任何项目的情况。使用`items.count`是确定项目集合是否为空的更好方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-05T08:34:04.097

```
if (ComboBox.Items!=null && ComboBox.Items.Count>0)
{
  //have some item 
} 
```

如果您需要知道有多少项目有使用

```
string Count = ComboBox.Items.Count; 
```

# windows - 如何在Windows上查询插件DLL的架构

> ID：10979146
> 
> 赞同：2
> 
> 时间：2012-06-11T11:24:35.953
> 
> 标签：windows, winapi, plugins

我的应用程序使用 LoadLibrary 在运行时加载插件，用户可能会不小心尝试在我的应用程序的 32 位版本中加载 64 位插件。

看起来从 LoadLibrary 返回的错误代码不是很具有描述性（说“%1 不是有效的 Win32 应用程序”）。

我正在寻找确定插件 dll 文件是 32 位还是 64 位构建的方法，以便我可以以用户友好的方式通知用户。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:32:58.037

要检索有关图像的信息，例如您要查找的图像，只需使用[ImageHelp API](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680349%28v=vs.85%29.aspx)

# mysql - 如何在 mySQL 查询中选择日期相等？

> ID：10979147
> 
> 赞同：-1
> 
> 时间：2012-06-11T11:24:35.843
> 
> 标签：mysql, sql

我想从给定mysql中特定记录日期的表中选择行

```
SELECT * from TABLENAME WHERE FROM_DATE='06/11/2012' 
```

我没有得到任何有用的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T11:27:33.953

首先，您应该使用标准日期格式`Y-m-d`- 否则您必须进行一些令人讨厌的查询，并且排序是一个真正的 b*tch。

使用标准日期格式，您可以轻松地执行以下操作：

`SELECT * FROM tablename WHERE from_date > '2012-06-11'`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T12:43:04.060

`DATE`比较很可能是您想要的。如果您的 from_date 列的数据类型为`DATE`，那么如果您这样做，您的代码应该是安全且健壮的：

```
WHERE from_date = STR_TO_DATE('06/11/2012', '%m/%d/%Y') 
```

@Repox 指出，您可以考虑将日期文字采用规范格式“2012-06-11”。这是真的，如果你能做到的话。但是如果您需要，STR_TO_DATE 会为您完成。这里有 %x 个转换项的列表。[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

如果您使用`DATETIME`数据类型，请注意：比较比看起来更复杂。 `DATETIME`项目就像浮点数：如果其中一个完全等于另一个，那只是巧合。那是因为它们代表时间上的片刻（毫秒），而不仅仅是几天。

假设您的 from_date 列具有`DATETIME`类型，您应该使用

```
WHERE from_date >= STR_TO_DATE('06/11/2012', '%m/%d/%Y')
  AND from_date < STR_TO_DATE('06/11/2012', '%m/%d/%Y') + INTERVAL 1 DAY 
```

这将在您想要的那一天及时捕捉所有时刻，直到但不包括第二天的第一时刻。

如果您的 from_date 项目表示为字符串，请不厌其烦地将它们转换为`DATE`或`DATETIME`数据类型。严重地。你的结果会好很多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T13:53:10.250

```
SELECT * from TABLENAME WHERE FROM_DATE='2012/06/13' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T11:34:12.093

如果你使用`DATE()`mysql的功能会更好

```
SELECT * FROM tablename WHERE DATE(from_date) > '2012-06-11' 
```

因为，如果您将 from_date 的数据类型设置为 TIMESTAMP 或 DATETIME，那么当您直接使用“>”符号时，有时它不会返回正确的结果

# c# - 页面重定向时会话对象未返回

> ID：10979150
> 
> 赞同：0
> 
> 时间：2012-06-11T11:24:41.677
> 
> 标签：c#, asp.net, vb.net, session

所以在 Default.master.cs PageLoad 我有以下内容：

```
contObj = Session["Contributor"] == null ? null : (Contributor)Session["Contributor"];
if (contObj == null)
{
    Session["Contributor"] = new Contributor
    {
        ID = id,
        Name = name,
        Email = email
    };
} 
```

在 Default.aspx.cs 我试图通过在按钮单击事件上执行此操作来获取对象：\

```
contObj = (Contributor)Session["Contributor"]; 
```

但是，这会导致以下异常！你调用的对象是空的。

我看不出我做错了什么。你能详细说明一下吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:26:52.967

确保您的 EnableSessionState="true" 在 default.aspx 的页面标记中

# imagemagick - identify: Postscript delegate failed `filename.pdf': rKkP.cache @ error/pdf.c/ReadPDFImage/638

> ID：10979158
> 
> 赞同：3
> 
> 时间：2012-06-11T11:25:17.070
> 
> 标签：imagemagick, paperclip

I am facing an issue in generating thumbnails from a pdf file. I am using paperclip for this. Output of the identify command is below:

identify: Postscript delegate failed `filename.pdf': rKkP.cache @ error/pdf.c/ReadPDFImage/638.

Any suggestions on this issue?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T09:07:53.143

ImageMagick only process *raster image* files, it cannot natively read and interprete PDF or PostScript files.

It needs [**`Ghostscript`**](http://downloads.ghostscript.com/public/) as its *delegate* to read and convert these formats to images.

Therefor you need to install Ghostscript, before the processing of PDF or PostScript files by ImageMagick and Paperclip can start to work.

# sencha-touch-2 - 如何绑定本地存储数据存储sencha touch 2

> ID：10979160
> 
> 赞同：3
> 
> 时间：2012-06-11T11:25:33.280
> 
> 标签：sencha-touch-2

```
//In view i have created one list with item tpl. below is the code
{
 xtype:'list',
 id:'userReviewList',
 title:'User Review',
 store:'UserReviewStore',
 height:300,
 itemTpl:'<div >{Comment}</div>' + '<div >{Rating}</div>' + '<div >{ReviewId}</div>'
} 
```

//下面我正在为**数据部分**中的硬编码值创建模型。

```
Ext.define('AppName.store.UserReviewStore',{
    extend:'Ext.data.Store',
    id:'reviewStore',
    config:{

        fileds:[
            {name:'Comment',type:'string'},
            {name:'Rating', type:'int'},
            {name:'ReviewId',tyep:'int'}
        ]
    },

    data: [
        { Comment: 'nice', Rating: 5, ReviewId: 1 },
        { Comment: 'cool', Rating: 4, ReviewId: 2 },
        { Comment: 'awesome', Rating: 3, ReviewId: 3 }
    ]

}) 
```

//我可以在列表视图中显示数据，但我需要使用本地存储数据才能在列表中显示。波纹管是我获取本地存储数据的代码，我的同事在应用程序启动时存储这些数据，所以现在我必须从本地存储中检索数据并需要绑定到存储

```
var retrievedObject = localStorage.getItem('testObject');//getting local storage
var jsonObj = Ext.decode(retrievedObject);//decoding 
```

在这个解码之后，我会得到一个值列表，比如

```
var list = jsonObj.userReviewList 
```

我需要绑定这个列表来存储如何做到这一点。我应该在哪里编写绑定到存储的逻辑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:11:25.393

当您的列表被激活、显示或初始化时，在控制器中。一些可以帮助您理解我的意思的代码：

```
 Ext.define('MyApp.controller.Main', {
      extend: 'Ext.app.Controller',  
      config: {
        refs: {
          myList: '#userReviewList'
        },
        control: {
          myList: {
            activate: 'onMyListActivate'
          },    
        }  
      },   
      onMyListActivate: function(me) {
        var retrievedObject = localStorage.getItem('testObject');//getting local storage
        var jsonObj = Ext.decode(retrievedObject);//decoding
        var list = jsonObj.userReviewList 
        me.getStore().setData(list);   
      }
  }); 
```

# actionscript-3 - Flex - 包含的 swc 库中缺少构造函数参数

> ID：10979162
> 
> 赞同：0
> 
> 时间：2012-06-11T11:25:42.643
> 
> 标签：actionscript-3, flash, apache-flex, swc

我已经使用 flash pro cs6 编写了一个 swc 库。其中，swc 包含“LPChat”类：

```
package {
import com.adobe.serialization.json.JSON;

import flash.display.Sprite;
import flash.net.URLRequestHeader;
import flash.utils.setInterval;

public class LPChat extends Sprite {
    private var _sessionKey:String;
    private var chatEvents:ChatEvents;
    private var links:Object;
    private var info:Object;

    public function LPChat(chatObj:Object) {
.....
    }
} 
```

当包含在 flash pro 项目中时，一切正常，但是当包含在 flex 项目中时，我收到以下错误：

错误 #1063：LPChat() 上的参数计数不匹配。预期为 0，得到 1。

这很奇怪，因为构造函数确实期望 1 而不是 0 参数。我可以在 flash builder IDEA 中看到相同的行为：

![在此处输入图像描述](../Images/6bdef84a384a10aabcaa73aa967d55ee.png)

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:05:42.717

似乎是默认包引起了问题。当我将其移至 com.lp 时，所有问题都已解决。

# javascript - 简单的 jQuery fadeIn fadeOut 动画 - 如何显示/隐藏 DIVS？

> ID：10979165
> 
> 赞同：0
> 
> 时间：2012-06-11T11:25:55.983
> 
> 标签：javascript, jquery, hover, mouseenter, mouseleave

场景：在 ul 列表中有 2 个链接，li：我的信息和登录 当在链接上使用 HOVER 时，一个链接必须显示一个框（带有淡入动画），其中包含一个表单。当您将鼠标悬停在链接上时，其他链接会在框内显示一个按钮（带有淡入动画）。

当用户鼠标退出链接“登录”或鼠标退出表单时，表单必须淡出。带有按钮的框，当用户鼠标移出“我的信息”链接或鼠标移出框时，必须淡出。

问题（两者相同）：当 MOUSEOUT 链接我的信息时，表单消失。当 MOUSEOUT 链接 LOG IN 时，div 内的按钮消失。

注意：1/当鼠标在链接上或在表单上时，表单必须可见 2/当鼠标在链接上或在带按钮的盒子上时，带按钮的框必须可见

参考：检查屏幕最顶部的 www.conforama.fr，链接是带有图标的“Compte”，它有一个类：“with-hover-menu”。当您将鼠标悬停在它上面时，将出现该表单。当您将鼠标移出链接或表单时，表单将消失。我需要同样的，但使用淡入淡出。

现在你可以在这个 jsfiddle 中查看下面的代码：http: [//jsfiddle.net/75HYL/19/](http://jsfiddle.net/75HYL/19/)但它根本不起作用。我不知道如何实现这一点。想了解和学习...！！

```
<ul class="links">
    <li class="classA"><a><span>My info</span></a></li>
    <li class="classB"><a><span>Log in</span></a></li>
</ul>

<div id="userInfo">USER MUST BE ABLE TO CLICK THE BUTTON BELOW, SO THIS BOX MUST STAY VISIBLE<br/>
    <input type ="button" value="OKAY"/>
    <div id="login" >
        <div class="form">
            <form>
                <input type="textfield" value="enter your email"></input>
                <input type="checkbox"><option>remember me? </option><input>
                <input type="button" value="Click me"/>
            </form>
        </div>
    </div>
</div>
<style>
    .links li { display:inline-block;cursor:pointer; }
    .links li { padding:0 4px 0 1px; }
    .links li.classA {width:147px; height:77px;background:url(../images/sprites01.png) no-repeat -226px 0px;}
    .links li.classB {width:147px; height:77px;background:url(../images/sprites01.png) no-repeat -226px 0px;}
    .links li.classA span {}
    .links li.classB span {}
    .links li.classA:hover {background:url(../images/sprites01.png) no-repeat -226px -80px;}
    .links li.classB:hover {background:url(../images/sprites01.png) no-repeat -226px -80px;}
    .links li.classA a {color:#fff;text-transform:uppercase;background:#00aaff;padding:5px 5px 0 20px;margin:5px 0 0;font-size:1em;height:50px;display:block;}
    .links li.classB a {color:#00aaff;text-transform:uppercase;background:orange;padding:5px 5px 0 20px;margin:5px 0 0;font-size:1em;height:50px;display:block;}
    #login {display:none;width:250px;height:250px; background:#bbb;color:#000;border:1px solid red;}
    #userInfo{display:none;width:250px;height:250px; background:#bbb;color:#000;border:1px solid red;}
</style>

<script>
    $("li.classA").hover(function() {
        $("#userInfo").fadeIn('fast').css('display', 'block');
    });
    $("#login, .classA").mouseleave(function() {
        $("#userInfo").fadeOut('fast').css('display', 'none');
    });

    $("li.classB").hover(function() {
        $("#login").fadeIn('fast').css('display', 'block');
    });
    $("#login, .classA").mouseleave(function() {
        $("#login").fadeOut('fast').css('display', 'none');
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:37:33.197

有点像[这样](http://jsfiddle.net/75HYL/23/)？清理了一些语法错误并稍微改变了逻辑

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T11:47:23.307

这就是你想要的？

[http://jsfiddle.net/WcUFe/3/](http://jsfiddle.net/WcUFe/3/)

我只更改了 js，以便更容易看到差异。为了更轻松的生活，应该更改 cssand/或 html，并且所有代码都可以放在一个单独的插件中，这将控制整个节目。

基本上我使用一个计时器来允许用户在大约 100 毫秒内将鼠标从 LI 元素移动到显示的容器....所有其余的都很难维持状态并确保我们在任何时候都不会看到 2 个容器.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T11:41:09.837

那么你的问题是鼠标当前必须离开你的链接才能进入盒子。因此，这些框必须消失才能使功能如您上述那样工作。

想到了一些解决方案（我对 jQuery 不是很好，所以可能有更好的选择）；1 是添加一个布尔值和一些逻辑来说明盒子是否已打开，然后只监听盒子上的 mouseout 事件（而不是链接和盒子）。另一个是对事件进行去抖动，以便在您侦听链接的 mouseout 事件之前有一点时间延迟。

*   看起来@AbstractChaos 现在已经解决了这个问题，因为我怀疑我的建议有更好的选择！

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T11:41:21.483

或者

```
$("li.classA").hover(function() {
    $("#login").css('display', 'none');
    $("#userInfo").fadeIn('fast');
});
$("#userInfo").mouseleave(function() {
    $("#userInfo").fadeOut('fast');
});

$("li.classB").hover(function() {
    $("#userInfo").css('display', 'none');
    $("#login").fadeIn('fast');
});
$("#login").mouseleave(function() {
    $("#login").fadeOut('fast');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-26T16:24:11.543

试试这个：http: [//jsfiddle.net/QR49h/](http://jsfiddle.net/QR49h/)

我将要隐藏/显示的 div 移动到`<li>`元素内部：

```
<ul class="links">
    <li class="classA"><a><span>My info</span></a>
        <div id="userInfo">USER MUST BE ABLE TO CLICK THE BUTTON BELOW, SO THIS BOX MUST STAY VISIBLE
            <br/>
            <input type="button" value="OKAY" />
        </div>
    </li>
    <li class="classB"><a><span>Log in</span></a>
        <div id="login">
            <div class="form">
                <form>
                    <input type="textfield" value="enter your email" />
                    <input type="checkbox" />
                    <option>remember me?</option>
                        <input />
                    <input type="button" value="Click me" />
                </form>
            </div>
        </div>
    </li>
</ul> 
```

我还修复了 js 中的一个错误（ClassA 与 ClassB）并稍微调整了 css，以便第二`<li>`项可以在第一项展开时保持其位置。哦，并修复了表单 div 中的一些元素关闭问题。

# qtp - 通过代码在 QTP 中运行恢复方案的问题

> ID：10979169
> 
> 赞同：0
> 
> 时间：2012-06-11T11:25:58.673
> 
> 标签：qtp

我编写了以下代码，用于在运行时将我的恢复场景与脚本连接起来。如下：

```
Dim App
Set App = CreateObject("QuickTest.Application")
App.Test.Settings.Recovery.Enabled = True
App.Test.Settings.Recovery.SetActivationMode "OnEveryStep"
App.Test.Settings.Recovery.Add "C:\QTP\Recovery\Navigation.qrs", "Navigation", 1
App.Test.Settings.Recovery.Item(1).Enabled = True
Recovery.Activate 
```

正在调用恢复方案，但报告中未显示已调用恢复方案。所以既然它不在报告中，恢复方案没有被调用吗？还是我在代码中遗漏了什么。还有什么要补充的吗？

**编辑：** 对不起，再次检查，不是恢复方案调用没有出现在报告中。我刚刚发现发生错误时没有调用恢复方案本身。但是如果我转到文件->设置并在恢复中查看，则会添加恢复方案文件，当我第二次运行它时，就会调用恢复方案。可能是什么问题。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:06:28.103

您可以写入报告以确保您的恢复方案已运行

```
 Reporter.ReportEvent micDone, "Recovery Scenario", "Has been run" 
```

# iphone - 如何从另一个类中删除地图视图注释

> ID：10979177
> 
> 赞同：0
> 
> 时间：2012-06-11T11:27:08.860
> 
> 标签：iphone, ios, mkmapview, mkannotation

我有`MKMapView`很多注释。当我点击注释时，`ABPersonViewController`会推送注释的联系方式（）。在这堂课中，我可以选择删除联系人。由于联系人已从通讯录中删除，同时我也需要从地图视图中删除注释。

当点击删除按钮时，联系人将从地址簿中删除，并且`ABPersonViewController`该类从导航堆栈中弹出。现在用户看到了地图视图。但它应该没有被删除的注释（联系人）。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:31:35.913

在可变数组中添加所有注释及其对应的地址，例如：

> NSMutablearray *array;
> 
> [数组添加对象：[NSDictionary dictionarywithobjectandkeys：@“你的对象和键”]；

现在，当用户删除地址时，其后续注释也将被删除。那应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:35:40.667

使用该`annotation`属性从地图视图中获取注释。然后遍历注释列表以获取特定注释，然后使用

```
- (void)removeAnnotation:(id < MKAnnotation >)annotation 
```

删除注释的方法。我希望它能解决你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-03T13:05:57.333

要删除所有注释，请使用以下代码；

```
[mapView removeAnnotations:mapView.annotations] 
```

# c++ - 是否可以将其重写为单行？

> ID：10979179
> 
> 赞同：2
> 
> 时间：2012-06-11T11:27:08.993
> 
> 标签：c++

这是实际代码。这里我调用 for_each 来执行 sum 中显示的函数。这可以简化为在 for_each 语句本身中编写函数吗？

```
int S;
struct sum
{
 sum(int& v): value(v){}
 void operator()(int data)const {value+=(int)((data+(data%S==0?0:S))/S)+2;}
 int& value;
};
int main()
{
  int cnt=0;
  S=5;
  for_each(flights.begin(),flights.end(),sum(cnt));
  cout<<cnt-2;
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T11:40:29.570

在 C++11 中，您可以使用带有捕获的 lambda：

```
int main()
{
  int cnt = 0;
  S = 5;
  for_each(
    flights.begin(), flights.end(),
    [&] (int data) {
        cnt += (data + (data % S == 0 ? 0 : S)) / S + 2;
    });
  cout << cnt - 2;
  return 0;
} 
```

它的读取方式是：你有一个匿名函数接受一个`int`参数，它通过引用捕获 ( `[&]`) 周围的上下文。请注意，这与您的解决方案*一样有效*，因为编译器有效地为您从 lambda 创建结构。

– 正如 Navaz 在评论中指出的那样，演员阵容实际上是不必要的。此外，C 风格的强制转换通常被视为已弃用——请改用 C++ 强制转换。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T11:47:02.957

您可以使用`std::accumulate`from `<numeric>`which 完美地表达您建立总和的意图。

```
int main()
{
    int flights[] = {1, 2, 3};
    int S = 5;
    std::cout << std::accumulate(
        begin(flights), end(flights), 0, 
        [S] (int sum, int data) { return sum + (int)((data+(data%S==0?0:S))/S)+2; })
        - 2;
} 
```

尽管您要求使用单行，但我更愿意给这个不平凡的 lambda 起一个名字以增加可读性。

```
int main()
{
    int flights[] = {1, 2, 3};
    auto theFooBarSum = [] (int sum, int data) 
        { return sum + (int)((data+(data%5==0?0:5))/5)+2; };
    int initialValue = 0;

    std::cout << std::accumulate(
        begin(flights), end(flights), initialValue , theFooBarSum) - 2;
} 
```

# android - Android 2.2 无法加载 SSL 证书

> ID：10979180
> 
> 赞同：0
> 
> 时间：2012-06-11T11:27:12.347
> 
> 标签：android, ssl

我最近注意到由于 SSL 证书警告，我正在构建的应用程序无法在 Android 2.2 上正确加载：

![在此处输入图像描述](../Images/0c39253e9747442aa3b28669d2b1fceb.png) ![在此处输入图像描述](../Images/3906f38f4cd9b0118c73d69a7e5f03b6.png)

但它在 Android 2.3 上运行良好。我还没有尝试任何其他版本。任何想法可能会发生什么？

我目前的假设是 Android 2.2 的浏览器不加载中间证书，有人可以确认或否认吗？

# jquery - 同位素问题：调整大小时图层卡住（响应式）

> ID：10979185
> 
> 赞同：2
> 
> 时间：2012-06-11T11:27:34.000
> 
> 标签：jquery, jquery-isotope, skeleton-css-boilerplate

我正在尝试将响应式 SKELETON 框架与 Isotope 结合起来，但到目前为止我遇到了一个问题：当我调整浏览器大小时（特别是如果我最小化，然后最大化浏览器），一些列会卡住。如果我将 webkit-animation 设置为 0.1 秒或更短，它就可以工作，但到目前为止，当我使用 0.8 秒时反应不正确。

这是我到目前为止所拥有的：http: [//www.paulbauer.net/development/animate.html](http://www.paulbauer.net/development/animate.html)

谁能帮忙？

最好的问候，保罗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T13:51:54.743

尝试为每个媒体查询给容器一个最大宽度和一个最小宽度。

例子：

```
@media only screen and (max-width: 479px) {

    #isotainer
    {
        max-width: 300px;
        width: 300px;
        min-width: 300px;
    }       
}

@media only screen and (max-width: 959px) {
    #isotainer
    {
        width: 768px;
        max-width: 768px;
        min-width: 768px;
    }

} 
```

# javascript - 在图像加载之前显示替代文本代替图像

> ID：10979186
> 
> 赞同：2
> 
> 时间：2012-06-11T11:27:48.533
> 
> 标签：javascript, html

如何在图像加载之前显示文本代替图像？

因为在一个 HTML 网站上，我有一个图像作为页面的标题，所以页面完全加载，标题图像稍后进来。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T11:46:00.287

```
<h1><img src="heading.png" alt="Some nice heading here"
         width="600" height="80"></h1> 
```

使用该`alt`属性并设置图像尺寸（在 HTML 或 CSS 中）以确保浏览器可以在获取图像之前分配适当的空间。您还可以将 CSS 样式应用于`img`元素，例如字体、大小和颜色；在现代浏览器上，当图像尚未（或曾经）获得时，样式将应用于替代文本。使用上面的代码，您可以设置元素的样式`h1`。

或者，最初仅使用（样式）文本作为标题，但使用 JavaScript 将其替换为图像：

```
<h1 style="width: 600px; height: 80px">Some nice heading here</h1>
<script>
new Image('heading.png'); // preloads the image
var h1 = document.getElementsByTagName('h1')[0];
h1.innerHTML = '<img src=heading.png alt="' + h1.innerHTML + '">';
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T11:50:27.213

这个怎么样-

```
<div id="img">some text</div>
<script>
 $(document).ready(function(){
   $("#img").innerHTML="<img src="myimg.jpg">"
  });
 });
 </script> 
```

jQuery 是一个很好的选择：-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T11:30:00.700

使用 Alt 标签，但即使这样也不能保证：

```
<img src="yourimagepath" alt="Title Text" title="Title Text" /> 
```

或者，您可以使用 JS hack：将页面的标题设置为文本，并在整个页面加载后使用 JS 将标题容器的内容替换为图像。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T11:33:59.860

只需很少的代码，您就可以在 jQuery 中动态加载图像。如果您喜欢这种方式，您可以做一些平滑的事情，例如放置“正在加载...”动画或 AJAX 微调器来代替您的内容。

来自对 j​​Query 文档的评论

```
var _url = "image.jpg";

// set up the node / element
_im =$("<img>");

// hide and bind to the load event
_im.hide();
_im.bind("load",function(){ $(this).fadeIn(); });

// append to target node / element
$('body div#target').append(_im);

// set the src attribute now, after insertion to the DOM
_im.attr('src',_url); 
```

在伪代码中，创建和隐藏图像元素，分配 onload 事件处理程序，设置 src 属性动态加载图像。处理程序平滑地淡入图像。

# iphone - iOS等待连接获取数据

> ID：10979194
> 
> 赞同：0
> 
> 时间：2012-06-11T11:28:26.597
> 
> 标签：iphone, objective-c, ios, nsurlconnection, synchronous

我有一个类，其方法名为：

```
-(NSData*)getSomeDataWithError:(NSError **)error; 
```

我正在使用同步 NSURLConnection，我的问题是在调用 getSomeDataWithError 时如何等待连接获取数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:44:34.600

如果您有同步请求，您的应用程序将等待请求完成，然后再继续执行更多代码。

另外，我不得不问你为什么将一个传递`NSError`给你的函数？这没有道理。

# ios5 - 如何在 RubyMotion 中进行滑动过渡？

> ID：10979195
> 
> 赞同：0
> 
> 时间：2012-06-11T11:28:27.123
> 
> 标签：ios5, rubymotion

我一直在查看加载屏幕的不同示例 - 有没有办法在检测到点击时插入过渡屏幕（滑动）？目前 UIImage.imageNamed 会立即加载下一个图形 - 如何让它滑动？

```
def viewDidLoad
  view.image = UIImage.imageNamed('welcome.png')

  view.userInteractionEnabled = true
  recognizer = UITapGestureRecognizer.alloc.initWithTarget(self, action:'nextScreen')
  view.addGestureRecognizer(recognizer)
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:46:44.330

这是一种`nextScreen`应该做你想做的事情的方法。通过动画设置，`view.image = ...`线条将从右侧滑入图像。

```
def nextScreen
  animation = CATransition.animation
  animation.duration = 0.5
  animation.type = KCATransitionMoveIn
  animation.subtype = KCATransitionFromRight
  view.layer.addAnimation(animation, forKey:'imageTransition')
  view.image = UIImage.imageNamed('pic2.png')
end 
```

来源：[https ://stackoverflow.com/a/5057691/424300](https://stackoverflow.com/a/5057691/424300)

# iphone - 设置导航栏标题的对齐方式

> ID：10979202
> 
> 赞同：3
> 
> 时间：2012-06-11T11:28:51.847
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我正在尝试将导航栏的标题与我的应用程序的中心对齐，但标题似乎停留在右侧（请找到屏幕截图）。我正在使用下面的代码：

```
-(void)viewDidLoad {
    UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithTitle:@"Home" style:UIBarButtonItemStylePlain target:self action:@selector(goToHomePage:)];
    [self.navigationController.navigationItem.rightBarButtonItem setTarget:self];
    self.navigationItem.rightBarButtonItem = addButton;
    [addButton release];
} 
```

在`viewWillAppear()`如下

```
[self.navigationItem setTitle:offertitle]; 
```

也试过了

```
UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(40, 0, 120, 40)];
label.backgroundColor = [UIColor clearColor];
label.font = [UIFont boldSystemFontOfSize:14.0];
label.shadowColor = [UIColor colorWithWhite:0.0 alpha:0.5];
label.textAlignment = UITextAlignmentLeft;
label.textColor =[UIColor whiteColor];
label.text=offertit;
self.navigationItem.titleView = label; 
```

当我隐藏后退按钮时，标题显示居中对齐的标题。有什么方法可以设置后退按钮的外观属性吗？

[图片链接在这里](http://imgur.com/1J2Dm)

谁能指导我哪里可能出错了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T03:43:43.263

您不必使用 UILabel。您可以直接使用此代码：

```
[self.navigationItem setTitle:@"Your Title"]; 
```

你可以走了！此代码将自动将其自身放置在导航栏的中心。

或者，如果您实际上有一个 UINavigationController 实例，请使用：

```
[self setTitle:@"Your Title"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-27T10:50:02.297

需要在上一个viewcontroller的viewWillDisappear方法中设置self.title = ""。

例如。ViewControllerB 从 ViewControllerA 打开然后在 ViewControllerA 的 "viewWillDisappear" 方法中设置 self.title = ""

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T11:34:16.897

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self)
    {
        // this will appear as the title in the navigation bar
        UILabel *label = [[[UILabel alloc] initWithFrame:CGRectZero] autorelease];
        label.backgroundColor = [UIColor clearColor];
        label.font = [UIFont boldSystemFontOfSize:20.0];
        label.shadowColor = [UIColor colorWithWhite:0.0 alpha:0.5];
        label.textAlignment = UITextAlignmentCenter;
        label.textColor = [UIColor yellowColor]; // change this color
        self.navigationItem.titleView = label;
        label.text = NSLocalizedString(@"PageThreeTitle", @"");
        [label sizeToFit];
    }

    return self;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T11:58:08.493

只需在 ViewDidLoad 中调用它

```
- (void)prepareNavigationTitle
{
    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(-50, 0.0, 240.0, 40.0)];
    label.backgroundColor = [UIColor clearColor];
    label.font = [UIFont boldSystemFontOfSize:14.0];
    label.shadowColor = [UIColor colorWithWhite:0.0 alpha:0.5];
    label.textAlignment = UITextAlignmentLeft;
    label.textColor =[UIColor whiteColor];
    label.text=offertit;
    self.navigationItem.titleView = label;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T12:26:04.883

如果您有导航控制器，则只需添加： self.title=@"Your Title";

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-11T12:33:41.237

尝试使用 self.navigationItem.title = @"YourTitle"; 此代码将标题放置在导航栏的中心。

# django - 使用表单集的 django 管理员

> ID：10979205
> 
> 赞同：3
> 
> 时间：2012-06-11T11:29:02.493
> 
> 标签：django, django-admin

模型.py：

```
class ExperienceSynopsis(Audit):
    user                    = models.ForeignKey(User, null = True, blank = True)
    area_skill              = models.CharField(max_length = 50, help_text = 'Example: Testing,Development,etc..')
    experience              = models.CharField(max_length = 50)

    def __unicode__(self):
        return self.area_skill 
```

表格.py：

```
class ExperienceSynopsisForm(forms.Form):
    area_skill           = fields.CharField(max_length=50, help_text = 'Example: Testing,Development,etc..')
    experience           = fields.CharField(max_length=50)
ExperienceFormset = formsets.formset_factory(ExperienceSynopsisForm, formset = RequiredFormSet, extra = 0) 
```

我想在 admin.py 中添加表单集。如何为此模型启用管理员。请帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T11:55:55.683

Django 文档和教程为它的工作原理提供了先机

[https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.StackedInline](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.StackedInline)

将你的 Formset 添加到你的 Inline 对象中，你就设置好了

```
class BookInline(admin.TabularInline):
    model = Book
    formset = # Yours

class AuthorAdmin(admin.ModelAdmin):
    inlines = [
        BookInline,
    ] 
```

如果`save_formset`需要，用于覆盖保存

# java - 如何使用键盘快捷键在 Eclipse 中编译我的代码

> ID：10979208
> 
> 赞同：18
> 
> 时间：2012-06-11T11:29:10.880
> 
> 标签：java, eclipse, keyboard-shortcuts

如何使用键盘快捷键在 Eclipse 中编译我的代码？我用谷歌搜索了这个，但找不到任何答案。

另外，如果您知道如何使用键盘快捷键在 Eclipse 中的不同选项卡之间移动，请告诉我。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-11T11:38:32.777

> 如何使用键盘快捷键在eclipse中的不同选项卡中移动

`Ctrl`+ `F6`，然后点击`F6`以浏览选项卡。

> 如何使用键盘快捷键在 Eclipse 中编译我的代码？

快捷键可以在相应的菜单项中找到。要获取所有 Eclipse 快捷键的列表，请使用`Ctrl`++`Shift``L`

* * *

参考：[Effective Eclipse: Shortcut keys](http://eclipse.dzone.com/news/effective-eclipse-shortcut-key)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T11:39:16.523

在 Eclipse 中查找现有的键盘快捷键或更改它们，转到`Window`菜单，单击`Preferences`，在左侧边栏中展开`General`并选择`Keys`。命令列表及其键盘关联将在右侧。您可以使用过滤器快速找到您要查找的内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-11T11:31:56.260

对于完整项目，它是`ctrl`+ `B`（全部构建），这将编译您的代码。对于单个 java 类，请使用`ALT`++然后，这将编译和运行 java 应用程序`SHIFT`。`X``J`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T11:37:16.543

**如何在打开的标签之间切换：**

`CTRL`+`F6`将为您提供可以滚动浏览的打开选项卡列表。

`Alt`+（向左或向右箭头）确实会切换标签，但它以一种非常奇怪的方式。

最好的方法是：`Ctrl`+ `Page Up`，`Ctrl`+`Page Down`

**如何编译：**

`Ctrl`+`B`是一般的方式。

**一些更有用的快捷方式：**

[http://javarevisited.blogspot.in/2010/10/eclipse-tutorial-most-useful-eclipse.html](http://javarevisited.blogspot.in/2010/10/eclipse-tutorial-most-useful-eclipse.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T11:42:08.110

`ctrl`+`b`将编译您的项目。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-29T11:21:21.883

On My Linux `CTRL`+`F11`将代码编译为`Eclipse`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-25T14:21:56.430

`alt`+ `p`+ `n`+`enter`清洁

`ctrl`+`b`建造

按此顺序使用两者来重建。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-01-06T07:22:36.283

要在 Eclipse 中运行代码，请使用以下快捷键

`Ctrl`+`f11`

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-09-07T07:36:47.790

在eclipse中使用`Ctrl`++获取快捷方式列表`Shift``L`

# junit - 如何在 JMeter 中运行参数化 JUnit 测试

> ID：10979212
> 
> 赞同：2
> 
> 时间：2012-06-11T11:29:37.540
> 
> 标签：junit, jmeter, load-testing

我已经创建了参数化的 JUnit 测试（参数化了用户名字段的文本）并且测试在 Eclipse 中成功运行。现在，我想在 JMeter 中使用相同的 Junit 测试进行负载测试。

当我尝试在用户名字段中使用 JMeter 运行测试时，输入以下文本而不是实际的参数化值：

**org.apache.jmeter.protocol.java.sampler.JUnitSampler**

有人请让我知道如何在 Jmeter 中使用参数化的 JUnit 测试吗？

# zend-framework - 创建多个模型

> ID：10979213
> 
> 赞同：0
> 
> 时间：2012-06-11T11:29:38.007
> 
> 标签：zend-framework, model, datamapper, domain-model

我正在使用 Zend 框架并实现域模型。我有模型、映射器和 DbTables。

假设我们应该从数据库中获取多行或获取表单数据，我们应该在其中创建多个模型并从数据库行或表单中填充这些模型。

我应该在 Mapper 中实现模型的获取和创建，然后从 Controller 调用该方法吗？或者我应该在模型中实现这个？

在Controller中初始化Mapper可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T04:28:57.070

简短的回答是肯定的！
如果您需要从数据库中获取任何东西，您几乎可以在某处使用映射器，因为理想情况下，域模型根本不*应该*知道数据库，或者映射器确实存在。
我确信有许多使用和访问域模型和映射器的策略和模式。我也相信每个人都会对如何最好地利用这些资源有不同的看法。底线是你必须使用你知道如何使用的东西，当你知道更多时你总是可以重构。

仅作为示例，我将包含一个基本映射器和一个基本实体（域）模型。

```
<?php
/**
 * Base mapper model to build concrete data mappers around.
 * Includes identity map functionallity.
 */
abstract class My_Application_Model_Mapper
{ 
    protected $_tableGateway = NULL;
    protected $_map = array();
    /**
     * Will accept a DbTable model passed or will instantiate
     * a Zend_Db_Table_Abstract object from table name.
     *
     * @param Zend_Db_Table_Abstract $tableGateway
     */
    public function __construct(Zend_Db_Table_Abstract $tableGateway = NULL) {
        if (is_null($tableGateway)) {

            $this->_tableGateway = new Zend_Db_Table($this->_tableName);
        } else {

            $this->_tableGateway = $tableGateway;
        }
    }
    /**
     * @return Zend_Db_Table_Abstract
     */
    protected function _getGateway() {

        return $this->_tableGateway;
    }
    /**
     * @param string $id
     * @param object $entity
     */
    protected function _setMap($id, $entity) {
        $this->_map[$id] = $entity;
    }
    /**
     * @param string $id
     * @return string
     */
    protected function _getMap($id) {
        if (array_key_exists($id, $this->_map)) {
            return $this->_map[$id];
        }
    }
    /**
     * findByColumn() returns an array of rows selected
     * by column name and column value.
     * Optional orderBy value.
     *
     * @param string $column
     * @param string $value
     * @param string $order
     * @return array
     */
    public function findByColumn($column, $value, $order = NULL) {
        $select = $this->_getGateway()->select();
        $select->where("$column = ?", $value);
        if (!is_null($order)) {
            $select->order($order);
        }
        $result = $this->_getGateway()->fetchAll($select);
        $entities = array();
        foreach ($result as $row) {
            $entity = $this->createEntity($row);
            $this->_setMap($row->id, $entity);
            $entities[] = $entity;
        }

        return $entities;
    }
    /**
     * findById() is proxy for find() method and returns
     * an entity object. Utilizes fetchRow() because it returns row object
     * instead of primary key as find() does.
     * @param string $id
     * @return object
     */
    public function findById($id) {
        //return identity map entry if present
        if ($this->_getMap($id)) {
            return $this->_getMap($id);
        }
        $select = $this->_getGateway()->select();
        $select->where('id = ?', $id);
        //result set, fetchRow returns a single row object
        $row = $this->_getGateway()->fetchRow($select);
        //create object
        $entity = $this->createEntity($row);
        //assign object to odentity map
        $this->_setMap($row->id, $entity);

        return $entity;
    }

    /**
     * findAll() is a proxy for the fetchAll() method and returns
     * an array of entity objects.
     * Optional Order parameter. Pass order as string ie. 'id ASC'
     * @param string $order
     * @return array
     */
    public function findAll($order = NULL) {

        $select = $this->_getGateway()->select();

        if (!is_null($order)) {
            $select->order($order);
        }
        $rowset = $this->_getGateway()->fetchAll($select);
        $entities = array();
        foreach ($rowset as $row) {
            $entity = $this->createEntity($row);
            $this->_setMap($row->id, $entity);
            $entities[] = $entity;
        }
        return $entities;
    }
    /**
     * Abstract method to be implemented by concrete mappers.
     */
    abstract protected function createEntity($row);
} 
```

这是基本域对象：

```
<?php
/**
 * Base domain object
 * includes lazy loading of foreign key objects.
 */
abstract class My_Application_Model_Entity_Abstract
{
    protected $_references = array();

    /**
     * Accepts an array to instantiate the object, else use
     * __set() when creating objects
     * @param array $options
     */
    public function __construct(array $options = NULL) {

        if (is_array($options)) {
            $this->setOptions($options);
        }
    }
    /**
     * @param array $options
     * @return \My_Application_Model_Entity_Abstract
     */
    public function setOptions(array $options) {
        $methods = get_class_methods($this);
        foreach ($options as $key => $value) {
            $method = 'set' . ucfirst($key);
            if (in_array($method, $methods)) {
                $this->$method($value);
            }
        }
        return $this;
    }
    /**
     * Map the setting of non-existing fields to a mutator when
     * possible, otherwise use the matching field
     */
    public function __set($name, $value) {
        $property = '_' . strtolower($name);
        if (!property_exists($this, $property)) {
            throw new \InvalidArgumentException("Setting the property '$property'
                    is not valid for this entity");
        }
        $mutator = 'set' . ucfirst(strtolower($name));
        if (method_exists($this, $mutator) && is_callable(array($this, $mutator))) {
            $this->$mutator($value);
        } else {
            $this->$property = $value;
        }
        return $this;
    }
    /**
     * Map the getting of non-existing properties to an accessor when
     * possible, otherwise use the matching field
     */
    public function __get($name) {
        $property = '_' . strtolower($name);
        if (!property_exists($this, $property)) {
            throw new \InvalidArgumentException(
                    "Getting the property '$property' is not valid for this entity");
        }
        $accessor = 'get' . ucfirst(strtolower($name));
        return (method_exists($this, $accessor) && is_callable(array(
                    $this, $accessor))) ? $this->$accessor() : $this->$property;
    }
    /**
     * Get the entity fields.
     */
    public function toArray() {

        //TODO
    }
    /**
     * set and get for _references array, allows the potential to lazy load
     * foreign objects.
     */
    public function setReferenceId($name, $id) {

        $this->_references[$name] = $id;
    }
    public function getReferenceId($name) {
        if (isset($this->_references[$name])) {
            return $this->_references[$name];
        }
    }
} 
```

我参考了许多教程和书籍，最终了解了这些概念和技术。
这些对象的使用是需要的，如果你需要从数据库中拉出一个对象你调用映射器，如果你需要用表单数据（或其他一些数据）构建一个对象你可以直接调用该对象。

我希望这会有所帮助。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T05:00:51.397

我在所有 ZF 工作中都使用相同的架构和设计模式。您的映射器应该是整个系统中*唯一可以访问数据库的类。*这确保了良好[的关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)。

我在我的模型中使用了瘦包装方法，例如：

```
class Application_Model_Foo {

    public function save() {
        $mapper = $this->_getMapper();
        $mapper->save($this);
    }

} 
```

这使我能够调用类似的东西：

```
$foo = new Application_Model_Foo();
$foo->setBar('baz-bum');

$foo->save(); 
```

但这使得测试变得更加复杂，并且在涉及 SoC 时使水变得混乱。最近我一直在从我的代码中删除此类事件，而只支持直接调用映射器，如下所示：

```
$foo = new Application_Model_Foo();
$foo->setBar('baz-bum');

$mapper = new Application_Model_FooMapper();
$mapper->save($foo); 
```

后一个示例意味着我的控制器方法中多了一行代码，但为了简化测试，我认为这是值得的。

# javascript - 如何在 UI 选择菜单中为每个选项指定选择功能

> ID：10979214
> 
> 赞同：0
> 
> 时间：2012-06-11T11:29:44.767
> 
> 标签：javascript, jquery, html, jquery-ui, select-menu

我在我的项目中使用[UI Selectmenu](http://filamentgroup.com/lab/jquery_ui_selectmenu_an_aria_accessible_plugin_for_styling_a_html_select/)

UI 选择菜单有一个选择选项来设置所有选择菜单选项的选择行为，例如：

```
$('.anything').
    selectmenu({
        select : function(event, options) { 
            spec_function('2')
        } 
    }); 
```

如何为**每个**选项或**特定**选项设置特定的选择行为而**不是全部**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:37:21.143

使用 switch-case 语句，正如 SurjithSM 所说，发送您选择的选项的 ID。像这样：

```
<script type="text/javascript">

$('.anything').
    selectmenu({
        select : function(event, options){ 
            switch(options['value']) { 
                case 'some_value_1': 
                    // anycode 1 ...
                    break;
                case 'some_value_2': 
                    // anycode 2 ...
                    break;
                case 'some_value_3': 
                    // anycode 3 ...
                    break;
                default:
                    // default anycode  ...
                    break;
            }
        }
    });

</script> 
```

# jquery - Chrome 扩展 API 访问

> ID：10979217
> 
> 赞同：0
> 
> 时间：2012-06-11T11:30:04.117
> 
> 标签：jquery, google-chrome-extension, xmlhttprequest

我正在开发一个 chrome 扩展，它可以访问具有 CSV（`someurl/api.php?op=get&op2=events&return_type=csv`）返回类型的外部（第 3 方）API。我找不到任何相关的访问方式。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:53:23.197

确保您的扩展程序具有足够的权限，然后发出 AJAX 请求，然后使用一些 JavaScript CSV 库或正则表达式处理 CSV。

一切都在[文档](http://code.google.com/chrome/extensions/xhr.html)中。您还可以[在此处](http://code.google.com/chrome/extensions/samples.html)找到相关示例。

# php - 如果使用 AJAX 请求 PHP 会变慢吗？

> ID：10979221
> 
> 赞同：0
> 
> 时间：2012-06-11T11:30:24.000
> 
> 标签：php, ajax, slowdown

我制作了一个带有空表单标签的简单网页。该标签由 AJAX 请求的响应填充。该请求向 PHP 脚本询问数据。该脚本返回其执行时间。现在有一些非常奇怪的事情。如果我手动输入地址，那么脚本会告诉我

`<!-- Duration: 0.8 milliseconds (~1242 pages per second) -->`

但是，如果我使用 Chrome 的内置网络请求记录器（用于查看已加载的内容），那么我得到了这个

`<!-- Duration: 52.7 milliseconds (~19 pages per second) -->`

任何想法为什么它慢 80 倍？我再说一遍：相同的脚本、相同的参数、相同的响应（但原因的持续时间）、相同的服务器、不同的请求类型：AJAX 和浏览器地址行。

 `````
<?php
class AbstractModule
{

    final function __construct(..)
    {
        // for measuring creation time
        $this->starttime = microtime(true); 
    }

    public final function return_duration()
    {
        $duration = (microtime(true) - $this->starttime) * 1000;
        return "\n<!-- Duration: " . number_format($duration, 1, '.', '') . " milliseconds (~" . number_format(1000 / $duration, 0, '.', '') . " pages per second) -->";
    }

}

$demo = new AbstractModule();
// doing very much :)<
echo $demo->return_duration();
?> 
````  `谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:36:13.153

你使用会话吗？不同之处可能在于 ajax 请求每次都会重新启动会话，因为您不发送任何 cookie。

否则，我建议你打开一个调试器并追查罪魁祸首。``

# opengl-es - 带纹理的三角形条带 - 超出第一行的行会产生乱码输出

> ID：10979225
> 
> 赞同：0
> 
> 时间：2012-06-11T11:30:47.803
> 
> 标签：opengl-es, textures, gl-triangle-strip

我正在使用 OpenGL ES、glDrawArrays 和 GL_TRIANGLE_STRIP 绘制一些“简单”的 2D 图形。

我正在编写一个函数，其目的是获取一个 13x13 点（或其他任意大小）的纹理并将其输出到指定数量的列和行中。因此，对于 2 行和 3 列，这意味着一个区域被 26x39 点上的 6 个图块覆盖。第一行适用于以下代码，但只要我指定 2 行或更多行，就会出现乱码输出。

```
for (int row = 0; row < heightInTiles; row++) {
    for (int col = 0; col < widthInTiles; col++) {
        vertexIndexOffset += 8;
        startX = (GLshort)(col * TEXTUREWIDTH);
        startY = (GLshort)(row * TEXTUREHEIGHT);

        // Vertices
        vertices[vertexIndexOffset] = startX; // 1
        vertices[vertexIndexOffset + 1] = startY; //0.0;

        vertices[vertexIndexOffset + 2] = startX; // 2
        vertices[vertexIndexOffset + 3] = startY + (GLshort)TEXTUREHEIGHT;

        vertices[vertexIndexOffset + 4] = (GLshort)(startX + TEXTUREWIDTH); // 3
        vertices[vertexIndexOffset + 5] = startY;

        vertices[vertexIndexOffset + 6] = (GLshort)(startX + TEXTUREWIDTH); // 4
        vertices[vertexIndexOffset + 7] = startY + (GLshort)TEXTUREHEIGHT;

        // Texture coords
        uvs[vertexIndexOffset] = WRESULT; // 1
        uvs[vertexIndexOffset + 1] = 0;
        uvs[vertexIndexOffset + 2] = WRESULT; // 2
        uvs[vertexIndexOffset + 3] = HRESULTNEXT;
        uvs[vertexIndexOffset + 4] = WRESULTNEXT; // 3
        uvs[vertexIndexOffset + 5] = 0;
        uvs[vertexIndexOffset + 6] = WRESULTNEXT; // 4
        uvs[vertexIndexOffset + 7] = HRESULTNEXT;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T17:18:00.523

假设`heightInTiles=1`和`widthInTiles=2`，代码首先生成两个“剥离”三角形1234；对于下一个单元，生成顶点 5678，其中 3=5 和 4=6。所以有两个*退化*三角形（面积为`0`）。但是，这行得通（好吧，在移动`vertexIndexOffset += 8;`到内部循环的末尾之后）

```
 2----------4/6----------8
 |           |           |          
 |           |           |          
 |           |           |          
 |           |           |          
 1----------3/5----------7 
```

假设`heightInTiles=2`和`widthInTiles=1`，图片看起来有些不同：

```
 6-----------8
 |           |
 |           |
 |           |
 |           |
 2/5--------4/7
 |           |
 |           |
 |           |
 |           |
 1-----------3 
```

现在，如果*条带*12345678 被绘制，会发生什么？123、234还可以，但是345呢？这重叠，并注意这些顶点的纹理坐标——顶点 2 和 5 具有不同的 UV！如上所述，有两个不需要的三角形，但这一次，它们不再有面积`0`。

当新行开始时，您需要插入两个虚拟顶点，实质上是在其他地方重新启动条带。如果三角形带包含 1234 `45`5678 怎么办？现在，123 和 234 画好了，然后 344、445、455 和 556 有面积`0`，接下来绘制的三角形是 567 和 678。

# cuda - 如何估计基于推力的实现的 GPU 内存需求？

> ID：10979229
> 
> 赞同：2
> 
> 时间：2012-06-11T11:31:10.507
> 
> 标签：cuda, thrust

我有 3 种不同的基于推力的实现来执行某些计算：第一个是最慢的，需要最少的 GPU 内存，第二个是最快的，需要最多的 GPU 内存，第三个介于两者之间。对于其中的每一个，我都知道使用的每个设备向量的大小和数据类型，因此我使用 vector.size()*sizeof(type) 来粗略估计存储所需的内存。

所以对于给定的输入，根据它的大小，我想决定使用哪个实现。换句话说，确定适合的最快实现是在可用的 GPU 内存中。

我认为对于我正在处理的非常长的向量，我正在计算的 vector.data() 的大小是一个相当好的估计，其余的开销（如果有的话）可以忽略不计。

但是我如何估计与推力算法实现相关的内存使用开销（如果有的话）？具体来说，我正在寻找有关转换、复制、减少、reduce_by_key 和收集的此类估计。我并不真正关心静态开销，并且不是算法输入和输出参数大小的函数，除非它非常重要。

我理解 GPU 内存碎片等的含义，但让我们暂时搁置一下。

非常感谢您花时间研究这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:05:52.720

Thrust 旨在像黑匣子一样使用，并且没有关于我所知道的各种算法的内存开销的文档。但是通过运行一些数值实验来凭经验推断它听起来并不是一个非常困难的问题。您可能期望特定算法的内存消耗近似为：

```
total number of words of memory consumed = a + (1 + b)*N 
```

`N`输入单词的问题。这`a`将是算法的固定开销和`1+b`最佳拟合内存与`N`线的斜率。`b`然后是每个输入单词的算法开销量。

所以问题就变成了如何监控给定算法的内存使用情况。Thrust 使用内部辅助函数`get_temporary_buffer`来分配内部内存。最好的想法是编写你自己的实现，`get_temporary_buffer`它会发出它被调用的大小，并且（也许）在调用`cudaGetMemInfo`函数时使用调用来获取上下文内存统计信息。[您可以在此处](https://github.com/thrust/thrust/wiki/Derived-Systems)查看有关如何拦截`get_temporary_buffer`呼叫的一些具体示例。

使用经过适当检测的分配器并在一些不同的问题大小下运行它，您应该能够拟合上面的模型并估计`b`给定算法的值。然后可以在您的代码中使用该模型来确定给定内存的安全最大问题大小。

我希望这是你问的...

# iphone - 应用关闭时如何处理推送有效负载？

> ID：10979239
> 
> 赞同：4
> 
> 时间：2012-06-11T11:31:55.433
> 
> 标签：iphone, ios, push-notification

我正在向我的用户发送推送有效负载，其中包含以下内容：

```
{"aps": {"alert": "Go To Google", "sound": "Default","url":"http://www.google.com"}} 
```

当 pp 在后台运行时一切顺利。如果我收到推送并且应用程序已关闭，我将打开它并且没有任何反应。我正在尝试重定向到有效负载中的这个 url。当应用程序从后台运行时，它再次运行良好。

这是迄今为止 AppDelegate.m 的实现：

```
-(void)Redirect:(NSString*)url{
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:url]]; 
    NSLog(@"%@",url);
}

- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {    
    RedirectedUri = [[userInfo objectForKey:@"aps"] objectForKey:@"url"];
    NSLog(@"%@",RedirectedUri);
    [self Redirect:RedirectedUri];    
  } 
```

需要一些帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-11T11:49:00.467

此外，将以下内容添加到您的代码中：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [self applicationDidFinishLaunching:application];

    if (launchOptions != nil)
    {
        NSDictionary* dictionary = [launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey];
        if (dictionary != nil)
        {
            RedirectedUri = [[dictionary objectForKey:@"aps"] objectForKey:@"url"];
            [self Redirect:RedirectedUri];
        }
    }
    return YES;
} 
```

# android - 用于定位的 Google Api

> ID：10979241
> 
> 赞同：1
> 
> 时间：2012-06-11T11:32:12.937
> 
> 标签：android, google-app-engine, google-places-api

我想做这样的应用程序，当用户输入特定地址（如城市名称）时说它是艾哈迈达巴德，而不是点击搜索按钮后结果应该是艾哈迈达巴德，古吉拉特邦，印度。我没有任何后端数据，它应该直接来自google api based.我不知道怎么做，有人可以帮我吗？在此先感谢 Aamirkhan I。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T12:42:10.130

试试这个[链接](http://maps.google.com/maps/api/geocode/json?address=%22ahmedabad%22&sensor=false)

您将获得 JSON 数据，您可以从 address_components[] 获得完整地址

# c++ - 在析构函数中使用“this”

> ID：10979250
> 
> 赞同：14
> 
> 时间：2012-06-11T11:33:06.070
> 
> 标签：c++, this, destructor

在带有参数的析构函数中调用某些函数是否有效`this`？函数不存储指针，而是假设全功能对象。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-11T11:35:13.393

`this`在析构函数中仍然有效。

但是，您需要记住，一旦对象被销毁，虚函数将不再像您预期的那样~~正常工作；~~参见例如[*在构造或破坏期间不要调用虚函数*](http://www.artima.com/cppsource/nevercall.html)。本质上，对象的动态类型随着每个析构函数的完成而被修改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T11:38:21.090

一言以蔽之：是的。在 D`TOR
中使用完全有效`this`

# iphone - 十进制风格改进目标 c 计算器

> ID：10979254
> 
> 赞同：0
> 
> 时间：2012-06-11T11:33:22.590
> 
> 标签：iphone, objective-c, ios, nsstring

我正在为 iOS 做计算器教程，并且我已经为做十进制样式做了一些研究。到目前为止，在我的研究中，我已经完成了下面的代码

```
- (IBAction)digitPressed:(UIButton *)sender {
    NSString *digit = sender.currentTitle;
    NSString *decimal = @".";
    BOOL decimalAlreadyEntered = [self.display.text rangeOfString:decimal].location == NSNotFound ? NO : YES;

    if (self.userIsInTheMiddleOfEnteringANumber) {
        if (([digit isEqual:decimal] && !decimalAlreadyEntered) || !([digit isEqual:decimal])) {
            [self.display setText:[[self.display text] stringByAppendingString:digit]];
        }
    }
    else if ([self.display.text isEqual:@"0"] && digit == decimal){
        [self.display setText:[[self.display text] stringByAppendingString:digit]];
        self.userIsInTheMiddleOfEnteringANumber = YES;
    }
    else {
        [self.display setText:digit];
        self.userIsInTheMiddleOfEnteringANumber = YES;
    }
} 
```

此代码帮助我防止用户按下多个小数点，并将其限制为一个（如 2.09 中）。凉爽的！但是，在应用程序启动期间，当我按下小数点并按下数字（例如 1）时，标签将仅显示 ( .1) 而不是 (0.1) 。非常感谢您对改进的任何帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:54:06.777

在 - (BOOL) textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 中，您可以检查第一个值是否为“。” 然后将文本值替换为“0。”，无论用户输入什么。并且仅当文本字段值为“.something”时才执行此检查。

```
- (BOOL) textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSString *symbol = [[NSLocale currentLocale] objectForKey:NSLocaleDecimalSeparator];
    if (range.location == 0 && [string isEqualToString:symbol]) {
     // decimalseparator is first
        textField.text = [NSString stringWithFormat:@"0%@",textField.text];
        return YES;
      }
} 
```

# wxpython - 从python中的文本字段在postgresql数据库中插入值

> ID：10979255
> 
> 赞同：0
> 
> 时间：2012-06-11T11:33:25.137
> 
> 标签：wxpython, postgresql-9.1

我正在尝试从 wxpyhton GUI 中的文本字段插入值。当我尝试通过 Textctrl 插入值时，它给了我一个错误“无法适应类型'TextCtrl'”

这是我的文本控件：

```
user=wx.TextCtrl(self,-1,value="Hello ") 
```

我使用插入语句作为：

```
cur.execute ('insert into users values(%s)' , (user)) 
```

将 textctrl 或其他控件（如复选框、下拉菜单等）中的值插入 postgresql 的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:21:00.233

您需要实际从文本控件中获取数据，而不是传递文本控件对象本身。通常的方法是：user.GetValue()。

我写了几篇关于 wxPython 和使用 SQLAlchemy 的数据库的文章。他们也可能会帮助您解决这些问题：

*   [http://www.blog.pythonlibrary.org/2011/11/10/wxpython-and-sqlalchemy-an-intro-to-mvc-and-crud/](http://www.blog.pythonlibrary.org/2011/11/10/wxpython-and-sqlalchemy-an-intro-to-mvc-and-crud/)
*   [http://www.blog.pythonlibrary.org/2012/06/04/wxpython-and-sqlalchemy-loading-random-sqlite-databases-for-viewing/](http://www.blog.pythonlibrary.org/2012/06/04/wxpython-and-sqlalchemy-loading-random-sqlite-databases-for-viewing/)

# java - Jsoup 和 parser 的 Tidy-fication

> ID：10979257
> 
> 赞同：0
> 
> 时间：2012-06-11T11:33:52.983
> 
> 标签：java, html, parsing, html-parsing, jsoup

阅读 Jsoup 的文档我不明白 Jsoup 在解析 html 文件之前是否应用了 Tidy。在这种情况下，可以禁用 tidy?

你知道其他没有页面源代码的 Java HTML5 解析器吗？
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T16:05:18.940

[这篇 Oracle 文章](http://docs.oracle.com/javase/tutorial/networking/urls/readingURL.html)可能会解决您的问题。它是本机 API，它可以满足您的需求。简单有效

# embedded - 如何交叉构建 GZIP？

> ID：10979264
> 
> 赞同：2
> 
> 时间：2012-06-11T11:34:13.577
> 
> 标签：embedded, gzip, cross-compiling

我正在尝试`gzip`在 Linux 机器上构建嵌入式平台。[我从这里](http://ftp.gnu.org/gnu/gzip/)下载了最新的 gzip 发行版。然后，`make`需要首先运行`configure`程序以便`Makefile`为特定的目标量身定制一个。

所以我运行`configure`并收到一些错误消息。问题似乎是几件事的结合。我们的编译器版本被称为`e-gcc`，所以我使用了以下行，并得到了这个错误：

```
~/Projects/gzip-1.4$ ./configure CC=e-gcc
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking for style of include used by make... GNU
checking for gcc... e-gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... configure: error: in `/home/xyz/Projects/gzip-1.4':
configure: error: cannot run C compiled programs.
If you meant to cross compile, use `--host'.
See `config.log' for more details. 
```

显然，C 编译的程序无法运行，b/c 是交叉编译器。消息说我必须使用该`--host`选项，但问题是我们在 gcc 中并没有真正定义的名称。但是，我尝试了：

```
./configure CC=e-gcc --host=epiphany 
```

收到的错误是：

```
configure: WARNING: If you wanted to set the --build type, don't use --host.
    If a cross compiler is detected then cross compile mode will be used.
checking for a BSD-compatible install... /usr/bin/install -c

blah blah blah

checking build system type... x86_64-unknown-linux-gnu
checking host system type... Invalid configuration `epiphany': machine `epiphany' not recognized
configure: error: /bin/bash build-aux/config.sub epiphany failed 
```

最后一件事，我尝试作弊并将主机设置`arm`为在精神上最接近我们的架构。配置更进一步，但最终也失败了，并显示以下消息：

```
checking for GNU libc compatible realloc... no
checking for rmdir... no
configure: error: in `/home/xyz/Projects/gzip-1.4':
configure: error: Your system lacks the rmdir function.
              Please report this, along with the output of "uname -a", to the
              bug-coreutils@gnu.org mailing list.  To continue past this point,
              rerun configure with SKIP_RMDIR_CHECK=yes.
              E.g., ./configure SKIP_RMDIR_CHECK=yes
See `config.log' for more details. 
```

我现在对如何继续一无所知。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T03:30:16.647

嵌入式平台是否有一个命令行 gzip 程序有意义的环境？如果您想从为嵌入式平台编写的软件中进行 gzip 压缩和解压缩，那么您应该考虑使用[zlib](http://zlib.net/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T05:34:07.803

您是否尝试使用 SKIP_RMDIR_CHECK=yes 指令运行？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-27T22:24:33.633

好的，谢谢，非常有帮助，它给了我需要的线索。我已经走得更远了，因为我现在有了一个更正确的 --host 字符串：

--host=eIII-平行-顿悟

所以我将配置称为：./configure CC=/cygdrive/[MYPATH]/Parallella/INSTALL/bin/e-gcc --host=eIII-parallella-epiphany

但是，您需要做一些其他的事情，包括将 config.sub 脚本从顿悟源复制到您自己的配置空间中。我还必须进行一些其他编辑，以便定义 MACHOS。 有关详细信息，请参阅：[http ://forums.parallella.org/viewtopic.php?f=13&t=337&p=2014#p2014。](http://forums.parallella.org/viewtopic.php?f=13&t=337&p=2014#p2014)

干杯，博韦伯

# asp.net-mvc-3 - 创建树视图

> ID：10979266
> 
> 赞同：-4
> 
> 时间：2012-06-11T11:34:19.817
> 
> 标签：asp.net-mvc-3, razor

我想使用 MVC3 控制工具包创建一个树视图，并将数据库中的数据动态绑定到递归列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:20:05.793

第 1 步：从 db 获取详细信息到 obj，如 List 或 ArrayList

第 2 步：将列表分配给控制器操作结果中的视图数据，例如

```
 viewdata["name"]=List; 
```

第 3 步：将 viewdata 分配给 cshtml treeview 中的另一个 List

```
ArrayList col = (ArrayList)ViewData["name"];
@if (col != null)
{
     Html.Telerik().TreeView()
    .Name("HierarchyTreeView")
    .Items(items =>
    {
        for (int i = 0; i < col.Count; i++)
        {
               items.Add()
                .Text(col[i].ToString())
                .Value().Selected(True)
                .Items((subItem) =>
                    {
                   subItem.Add()
                   .Text(Child.ToString()) //Here place child value
                   .Value();
                    });
          }
     }).ClientEvents(events => events
        .OnSelect("onSelect")
    ).Render();
} 
```

第 4 步：使用 List 使用嵌套的 for 循环将值分配给树视图节点

步骤 5：编写 onselect 客户端事件并从 Javascript 中获取选定的值并将其分配给 Grid 过滤器的 javascript 方法。

```
function onSelect(e) {
    var HNKey = treeView().getItemValue(e.item);
    var HNText = treeView().getItemText(e.item);
} 
```

希望这会给你一些想法来开始你的过程，然后你可以从这里提出问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T09:20:40.563

我终于为这个问题找到了更好的解决方案..

我使用 jquery 创建对我很有帮助的树。

找了很久，发现是这样的：

```
public class TreeView
    {
        public static List<Model> GetAllCategories()
        {
            string query="select * from tableName";
            string connString = "connectionString";
            var itemList = new List<Model>();

        using (var con = new SqlConnection(connString))
        {

            using (var cmd = new SqlCommand(qry, con))
            {
                con.Open();
                SqlDataReader reader = cmd.ExecuteReader();
                if (reader.HasRows)
                {
                    while (reader.Read())
                    {
                           //added my code here to get the data..
                        itemList.Add(
                             new Model(){
                                categoryId= reader.GetInt32(reader.GetOrdinal("categoryId"))
                             )};
                    }
                }
            }
        }
        return itemList;
    }        
} 
```

在控制器中，我将代码编写为：

```
 public ActionResult Index()
    {
        List<Model> itemList= new List<Model>();
        itemList = TreeView.GetAllCategories();

            var president = itemList.
                              Where(x => x.Model.PAId == 0).ToList(); //    
            foreach (var item in president)
            {
                SetChildren(item, itemList);
            }
            return View(president);
        }

    private void SetChildren(Model model, List<Model> itemList)
    {
        var childs = itemList.
            Where(x => (x.Model.PAId == model.categoryId)).ToList();
        if (childs.Count > 0)
        {
            foreach (var child in childs)
            {
                SetChildren(child, itemListList);
                model.Categories.Add(child);
            }
        }
    } 
```

索引.cshtml：

```
<div id="divtree">
    @foreach (var item in Model)
    {
        <ul id="tree" >
            <li>
                @Html.ActionLink(item.Model.categoryName, "Action")
                @Html.Partial("Childrens", item)
            </li>
        </ul>
    }
</div>

<script type="text/javascript">
    $(function () {
        $('#treeViewContent').load('@Url.Action("CreateCategory","Category")');

        $('#divtree').jstree({
            "plugins": ["themes", "html_data", "ui", "cookies"]
        })
        .bind('loaded.jstree', function () {
            $(this).jstree('open_all');
        });
    });
</script> 
```

Childrens.cshtml：

```
@foreach (var item in Model.Categories)
{ 
    <ul>
    @if (item != null)
    {        
        <li>
            @Html.ActionLink(item.Model.categoryName, "Action") 
            @if (item.Categories.Count > 0)
            {         
                @Html.Partial("Childrens", item)           
            }
        </li>
    }
    </ul> 
} 
```

最后得到了这样的树： ![在此处输入图像描述](../Images/e76e8f57b9156fa8dbe39c5550662259.png)

# qtp - 使用 QTP 工具实现自动化

> ID：10979267
> 
> 赞同：0
> 
> 时间：2012-06-11T11:34:22.293
> 
> 标签：qtp, ui-automation

我正在使用 QTP 工具在 wordaddin 上执行自动化。我想知道如何通过属性而不是坐标来识别对象。我在这里粘贴代码来描述我的要求 Window("Microsoft Word (Product").WinObject("ATL:0C2817D0").Click 346,250。

这是我们单击记录按钮时生成的代码。我想通过其属性而不是坐标来识别对象。它不应该使用静态坐标，因为对象可能会被调整大小或最大化或最小化。它应该独立于坐标。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-26T15:09:57.173

通常，您不会通过存储在 OR 中的对象来自动化 MSWord/Excel 等。就像你正在做的那样。

最好通过代码为 MSWord 创建对象，然后使用该对象对 MSWord 执行操作。

```
 Set ObjWord= CreateObject("word.application") 
```

然后将`ObjWord`其用于进一步操作

# extjs - 如何从 json 创建表列和字段？（动态网格）

> ID：10979269
> 
> 赞同：8
> 
> 时间：2012-06-11T11:34:32.607
> 
> 标签：extjs, extjs4

我有一个 json 文件，我假设我对内容一无所知。我不知道型号。然而，它在 json 文件中给出了模型、数据和有关网格的其他信息。我将如何以这种方式创建列等？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T21:31:39.480

Stackoverflow 充满了与此非常相似的问题。我研究了所有这些，但没有找到明确的解决方案。但是，提供的大多数答案都为我指明了正确的方向。我会尽我最大的努力将所有这些建议放在一起，并让其他人明白这一点：

**模型：（**仅显示所有 JSON 响应中的 2 个字段。仍将被覆盖）

```
Ext.define('RTS.model.TestsModel', {
    extend: 'Ext.data.Model',
    alias: 'model.TestsModel',

    fields: [
        {
            name: 'poll_date'
        },
        {
            name: 'poller'
        }
    ]
}); 
```

**店铺：**

```
Ext.define('RTS.store.TestsStore', {
    extend: 'Ext.data.Store',
    alias: 'store.TestsStore',

    model: 'RTS.model.TestsModel',

    constructor: function(cfg) {
        var me = this;

        cfg = cfg || {};

        me.callParent([Ext.apply({
            autoLoad: false,
            proxy       : {
                type    : 'ajax',
                url     : 'tests.php',
                reader  : {
                    type    : 'json',
                    root    : 'tests',
                    successProperty : 'success'
                }
            },            
            storeId: 'tests-store'
        }, cfg)]);
    }
}); 
```

**查看：（**列将在每个 JSON 响应中定义）

```
Ext.define('RTS.view.TestsView', {
    extend: 'Ext.grid.Panel',
    alias: 'widget.TestsView',

    id: 'tests-view',
    title: 'Tests',
    emptyText: '',
    store: 'TestsStore',

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            viewConfig: {

            },
            columns: [
            ]
        });

        me.callParent(arguments);
    }

}); 
```

**控制器：（**控制器根据 JSON 响应完成所有强制视图和模型更改的工作）。

```
Ext.define('RTS.controller.TestsController', {
    extend: 'Ext.app.Controller',
    alias: 'controller.TestsController',

    stores: [
        'TestsStore'
    ],
    models: [
        'TestsModel'
    ],
    views: [
        'TestsView'
    ],

    init: function(application) {

        // When store changes, trigger an event on grid
        // to be handled in 'this.control'.  

        // NOTE : Ext JS does not allow control of 
        // non-component events.

        // Ext JS 4.2 beta will allow the controller
        // to detect non-component changes and handle them
        var testsStore = this.getStore('TestsStore');
        testsStore.on("metachange", metaChanged, this);
        function metaChanged(store, meta) {
            var grid = Ext.ComponentQuery.query('TestsView')[0];
            grid.fireEvent('metaChanged', store, meta);
        };

        this.control({
            "TestsView": {
                metaChanged: this.handleStoreMetaChange
            }
        });
    },

    /**
     * Will update the model with the metaData and
     * will reconfigure the grid to use the
     * new model and columns.
     */
    handleStoreMetaChange: function(store, meta) {
        var testsGrids = Ext.ComponentQuery.query('TestsView')[0];
        testsGrids.reconfigure(store, meta.columns);
    }

}); 
```

**JSON 响应：** 您的 json 响应必须包含“元数据”属性。它应该像在静态模型和通常定义为显示字段的视图上一样定义字段。

```
{
    "success": true,
    "msg": "",
    "metaData": {
        "fields": [
            {
                "name": "poller"
            },
            {
                "name": "poll_date"
            },
            {
                "name": "PING",
                "type": "int"
            },
            {
                "name": "SNMP",
                "type": "int"
            },
            {
                "name": "TELNET",
                "type": "int"
            },
            {
                "name": "SSH",
                "type": "int"
            },
            {
                "name": "all_passed"
            }
        ],
        "columns": [
            {
                "dataIndex": "poller",
                "flex": 1,
                "sortable": false,
                "hideable": false,
                "text": "Poller"
            },
            {
                "dataIndex": "poll_date",
                "flex": 1,
                "sortable": false,
                "hideable": false,
                "text": "Poll Date"
            },
            {
                "dataIndex": "PING",
                "flex": 1,
                "sortable": false,
                "hideable": false,
                "text": "PING",
                "renderer": "RenderFailedTests"
            },
            {
                "dataIndex": "SNMP",
                "flex": 1,
                "sortable": false,
                "hideable": false,
                "text": "SNMP",
                "renderer": "RenderFailedTests"
            },
            {
                "dataIndex": "TELNET",
                "flex": 1,
                "sortable": false,
                "hideable": false,
                "text": "TELNET",
                "renderer": "RenderFailedTests"
            },
            {
                "dataIndex": "SSH",
                "flex": 1,
                "sortable": false,
                "hideable": false,
                "text": "SSH",
                "renderer": "RenderFailedTests"
            },
            {
                "dataIndex": "all_passed",
                "flex": 1,
                "sortable": false,
                "hideable": false,
                "text": "All Passed",
                "renderer": "RenderFailedTests"
            }
        ]
    },
    "tests": [
        {
            "poller": "CHI",
            "poll_date": "2013-03-06",
            "PING": "1",
            "SNMP": "0",
            "TELNET": "1",
            "SSH": "0",
            "all_passed": "0"
        },
        {
            "poller": "DAL",
            "poll_date": "2013-03-06",
            "PING": "1",
            "SNMP": "0",
            "TELNET": "1",
            "SSH": "0",
            "all_passed": "0"
        },
        {
            "poller": "CHI",
            "poll_date": "2013-03-04",
            "PING": "1",
            "SNMP": "0",
            "TELNET": "1",
            "SSH": "0",
            "all_passed": "0"
        },
        {
            "poller": "DAL",
            "poll_date": "2013-03-04",
            "PING": "1",
            "SNMP": "0",
            "TELNET": "1",
            "SSH": "0",
            "all_passed": "0"
        },
        {
            "poller": "CHI",
            "poll_date": "2013-03-01",
            "PING": "1",
            "SNMP": "0",
            "TELNET": "1",
            "SSH": "0",
            "all_passed": "0"
        }
    ]
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T08:29:31.067

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.reader.Json](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.reader.Json) -> 响应元数据部分

在网格中不要忘记`columns: [],`在 store 下添加这个`listeners: { 'metachange': function(store, meta) { myGrid.reconfigure(store, meta.columns); } }`，响应 json 文件应该有带有字段和列的元数据。阅读文档中的*响应元数据*部分以获取更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T12:05:49.020

您可以在运行时创建网格定义。看`reconfigure`方法：[http ://docs.sencha.com/ext-js/4-0/#!/api/Ext.grid.Panel-method-reconfigure](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.grid.Panel-method-reconfigure)

# linux - 如何使用 expect 来回复 SSH 登录提示？

> ID：10979276
> 
> 赞同：1
> 
> 时间：2012-06-11T11:35:08.550
> 
> 标签：linux, ssh, expect

我需要为我在 fstab 中创建的 ssh 挂载创建一个自动登录脚本。

我知道您应该使用安全密钥身份验证来执行此操作，但在这种情况下这是不可能的，因为服务器不允许这样做，所以我需要创建一个 bash 脚本以在出现提示时输入密码。

我试过了

```
spawn mount /media/SSH-MUSIC

expect "*?assword:*"

send "password\r" 
```

但我无法让它工作。

fstab条目如下

sshfs#user@xxx.xxx.xxx.xxx:/public/02.MUSIC /media/SSH-MUSIC fuse port=2223,noauto,users,allow_other,uid=1001,gid=1001,rw 0 0

有人可以提供一个允许我自动登录的工作脚本吗？我尝试了谷歌搜索的各种建议，但无法让它发挥作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:31:02.000

使用 时`ssh`，您可以使用密码，也可以使用公钥/私钥集。如果您使用公钥/私钥，则`ssh`无需输入密码即可用于另一台计算机：

*   您需要`ssh-keygen`在两个系统上运行。`$HOME/.ssh`这会在您的计算机上创建一个目录。里面会有两个文件：一个是公钥，一个是私钥。在我的，私钥被调用`id_rsa`，公钥被调用`id_rsa.pub`。这是 Linux 和 Mac OS X 的默认设置。

*   在两个系统上创建这些文件后，您需要获取您的*公钥*并将其粘贴到一个名为`$HOME/.ssh/authorized_keys`. 这将为远程计算机提供您的公钥，以便它可以识别您。

完成后，您应该能够在`ssh`不需要密码的情况下使用，这使得编写使用的脚本`ssh`变得更加容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T16:25:10.210

Expect*通常*需要 "\r" 作为预期输入的行终止符，而 "\r\n" 作为输出。但是，在这种情况下，您实际上并不需要扫描输入中的回车符。它也可以与更简单的正则表达式一起使用。

您可能可以将这项工作作为单线工作。例如：

```
expect -c 'spawn mount /media/SSH-MUSIC
           expect "assword:" {send "password\r\n"}
           interact' 
```

在脚本命令完成后，您需要**交互**命令将生成的进程的控制权返回给用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T11:59:18.587

您可以尝试 sshpass 实用程序。我认为这比 spawn 预期的要容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T12:54:37.573

我相信您在脚本中省略了行尾字符 (\n)，您的第三行应如下所示：

```
send "password\r\n" 
```

# c# - 冻结游戏

> ID：10979279
> 
> 赞同：1
> 
> 时间：2012-06-11T11:35:21.497
> 
> 标签：c#, xna

是否有任何功能可以冻结所有游戏或某个课程片刻？

我正在寻找像 Matlab 中的等待函数。

谢谢。

编辑：等待功能在给定时间内停止所有处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:53:12.773

如果您的游戏基于 GameComponents，您通常可以将 Enabled 标志设置为 false 以防止执行更新逻辑，这显然取决于其他因素（类更新逻辑之外的对象操作，在绘图中执行的更新逻辑或其他方法等..）

```
public class Car : GameComponent
{
    // This logic is only called if the Enabled property is set to true.
    public override void Update(GameTime gameTime)
    {
        base.Update(gameTime);
    }
} 
```

如果您没有使用游戏组件，那么在您的类中引入一个启用标志并在执行更新逻辑之前检查它会非常简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T18:01:41.923

单行破解方法是在主 Update() 中调用 Thread.Sleep(x)，但这会在指定的时间内*挂起游戏。*用户会认为您的应用程序已无响应，他可能会杀死它并重新启动它！这可能不是你想要的。

我构建游戏的方式是，每个主要组件都有自己的 Update()（或 Tick()）方法，每个逻辑更新都会调用该方法。您可以通过暂时不调用它们的 Update() 来选择性地冻结组件。有些事情你肯定不想冻结，比如刷新屏幕、响应用户输入或声音处理。

一些示例代码：

```
// To pause the game for x number of frames, set pauseDelay = to x
int pauseDelay;

public void Update() {
     if (pauseDelay > 0) {
         --pauseDelay;
     }
     else {
         physics.Update();
         ai.Update();
     }
     input.Update();
     sound.Update();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T17:44:23.287

如果您正在寻找一种非常简单的方法（安迪似乎更好，但这是一种快速的方法）

在您的更新方法类中，在顶部添加：

```
if (isPaused)
break; 
```

您可以使用 isActive 检查窗口是否也处于活动状态。

# mysql - mysql在phpmyadmin中显示用户定义的函数列表

> ID：10979285
> 
> 赞同：9
> 
> 时间：2012-06-11T11:35:40.813
> 
> 标签：mysql, function

如何使用 phpmyadmin 查看 mysql 数据库中的用户定义函数列表。

Mysql 数据库已从一台服务器迁移到另一台服务器，并且用户定义的自定义函数不起作用。我需要查看用户定义函数列表以检查它们是否存在于数据库中。

```
Fatal error: db::execute() Could not execute: FUNCTION database.xxx does not exist (SQL: SELECT Function(field) FROM users in file.php on line xx 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-11T11:40:36.950

以下 MySQL 查询将列出用户定义的例程。

```
select * from information_schema.routines; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-28T09:16:03.210

这将为您提供有关您的自定义功能/程序的所有信息：

```
select specific_name, definer from information_schema.routines where definer not like '%mysql%'; 
```

希望能帮助到你！

# plugins - Jenkins 与 JSLint 和 Violations 插件

> ID：10979286
> 
> 赞同：3
> 
> 时间：2012-06-11T11:35:47.320
> 
> 标签：plugins, jenkins, jslint

我目前配置了一个 jenkins 服务器，它使用 JSlint（使用 ant）验证我的项目是否存在 javascript 错误。现在我想显示违规插件的所有错误。我可以生成一个包含所有错误的 xml。但它没有在图表中显示这一点。

这是我的 build.xml：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
<taskdef name="jslint"
       classname="com.googlecode.jslint4java.ant.JSLintTask"
       classpath="jslint/jslint4java-2.0.2.jar" />

<property name="reports.dir" value="reports" />

<target name="clean" description="Removes output files created by other targets.">
    <delete dir="${reports.dir}" failonerror="true" />
</target>

<target name="jslint" depends="clean">
    <mkdir dir="reports" />
    <jslint options="white,undef,plusplus,newcap,vars,indent=4">
        <predef>jQuery, setTimeout, history, window, document</predef>
        <formatter type="xml" destfile="jslint_results.xml"/> 
        <fileset dir="" includes="**/*.js" excludes="lib/*.js" />
    </jslint>
</target> 
```

这是我的违规设置：

![违规设置](../Images/0a87800685af5b54276beb16f173937a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:45:16.830

该模式与您的工作区相关。因此，如果您的报告“生活”在`<WORKSPACE>/reports`模式中应该是`reports/jslint_results.xml`或`**/jslint_results.xml`

# codeigniter - 如何在codeigniter中显示特定时间段内的数据？

> ID：10979287
> 
> 赞同：0
> 
> 时间：2012-06-11T11:35:55.427
> 
> 标签：codeigniter, sorting, date, blogs, archive

我正在为我的博客创建存档视图。

我有一个如下所示的网址：

```
www.mydomain.com/blog/archive/2012-May 
```

如何从数据库中获取 2012 年 5 月创建的所有博客文章？？？

我正在使用 mysql datetime 来存储创建的日期。数据库中的格式：`2012-03-14 14:39:47`

到目前为止，这是我的代码：

```
 function get_archive_posts(){

    $data = '';

//NEED TO GROUP AND GET BY DATE AND YEAR IN URL

        $this->db->order_by('date','desc');
        $query = $this->db->get('blog'); 
        foreach ($query->result() as $row) {
            $data[] = array(
                'id' => $row->id,
                'date' => $row->date,
                'title' => $row->title,
                'content' => $row->content,
                'category' => $row->category,
                'author' => $row->author
            );
        }
        return $data;
    } 
```

如何按 url 中显示的月份和年份订购，只显示这些帖子？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:12:15.147

为了制作每月存档，我认为将帖子的月份和年份存储在表格的单独列中是个好主意，这样我们就可以轻松获取该月份和年份的数据。我认为使用当前日期格式将无法检查帖子的月份和年份，所以做一件事从帖子日期获取月份和年份并将它们存储在表格中，然后将月份和年份与存档月份和年份进行比较. 我认为以这种方式做到这一点会很容易。
希望这会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:59:44.317

遵循这个层次结构，

www.domain.com/blog/archieve/2012/may

并在您的`blog`控制器内部创建一个带有变量的函数。比如：

```
function archieve($year='A_DEFAULT_VALUE_FOR_HERE', $month='A_DEFAULT_VALUE_FOR_HERE_TOO') {

//You can here use 3rd and 4th segments (example: $year=$this->uri->segment(3); $month=$this->uri->segment(4); ) as variables.

} 
```

# vba - VBA 模块 - 子程序帮助 - 仅将数据值从表 2 复制到表 1

> ID：10979289
> 
> 赞同：1
> 
> 时间：2012-06-11T11:36:00.593
> 
> 标签：vba, excel

我目前面临的问题是我称之为“更新”（已经写好）的模块中的一个子过程，我想执行以下操作；

选择“Sheet2”表数据（一行，A4:KL4），按照上面已经记录的数据顺序复制到“主”表。

子程序还需要包含另一个功能，即在“主”表中搜索参考号的先前条目，如果参考号不存在，则仅复制“表 2”行数据。

如果参考号已经存在，那么它需要检查上一个条目的日期。如果是同一日期，那么我希望子过程覆盖已经保存的内容。如果日期不同，那么我希望子过程将“Sheet2”表添加到新行。

如果有人可以提供帮助，我将不胜感激。我检查了其他帖子，甚至尝试使用以前答案中的一些代码，但它似乎对我不起作用。

```
Sub update1()
    Sheets("loading").Select
    Application.ScreenUpdating = False

    Sheets("Current Audit").Select
    Range("J76").Select
    Selection.Copy
    Range("AG4").Select
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
    Range("J77").Select
    Application.CutCopyMode = False
    Selection.Copy
    Range("AF4").Select
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
         Range("B75").Select
    Selection.Copy
    Range("Q4").Select
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
    Range("B76").Select
    Selection.Copy
    Range("R4").Select
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
    Range("B77").Select
    Selection.Copy
    Range("S4").Select
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
    Range("B78").Select
    Selection.Copy
    Range("T4").Select
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
    Range("B79").Select
    Selection.Copy
    Range("U4").Select
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
    Range("B80").Select
    Selection.Copy
    Range("V4").Select
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
    Range("B81").Select
    Selection.Copy
    Range("W4").Select
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
            Application.CutCopyMode = False
    Range("B82").Select
    Selection.Copy
    Range("X4").Select
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
    Range("B83").Select
    Selection.Copy
    Range("Y4").Select
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
    Range("B84").Select
    Selection.Copy
    Range("Z4").Select
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
            Application.CutCopyMode = False
    Range("B85").Select
    Selection.Copy
    Range("AA4").Select
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
    Range("B86").Select
    Selection.Copy
    Range("AB4").Select
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
    Range("B87").Select
    Selection.Copy
    Range("AC4").Select
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
            Application.CutCopyMode = False
    Range("B88").Select
    Selection.Copy
    Range("AD4").Select
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
    Range("B89").Select
    Selection.Copy
    Range("AE4").Select
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False

    Range("AF5").Select
    ActiveCell.FormulaR1C1 = "=IF(R[-1]C=""N/A"",""N/A"",R[-1]C*100)"
    Range("AG5").Select
    ActiveCell.FormulaR1C1 = "=IF(R[-1]C=""N/A"",""N/A"",R[-1]C*100)"

        Range("Q5").Select
    ActiveCell.FormulaR1C1 = "=IF(R[-1]C=""N/A"",""N/A"",R[-1]C*100)"
        Range("R5").Select
    ActiveCell.FormulaR1C1 = "=IF(R[-1]C=""N/A"",""N/A"",R[-1]C*100)"
    Range("S5").Select
    ActiveCell.FormulaR1C1 = "=IF(R[-1]C=""N/A"",""N/A"",R[-1]C*100)"
        Range("T5").Select
    ActiveCell.FormulaR1C1 = "=IF(R[-1]C=""N/A"",""N/A"",R[-1]C*100)"
     Range("U5").Select
    ActiveCell.FormulaR1C1 = "=IF(R[-1]C=""N/A"",""N/A"",R[-1]C*100)"
        Range("V5").Select
    ActiveCell.FormulaR1C1 = "=IF(R[-1]C=""N/A"",""N/A"",R[-1]C*100)"
    Range("W5").Select
    ActiveCell.FormulaR1C1 = "=IF(R[-1]C=""N/A"",""N/A"",R[-1]C*100)"
        Range("X5").Select
    ActiveCell.FormulaR1C1 = "=IF(R[-1]C=""N/A"",""N/A"",R[-1]C*100)"
       Range("Y5").Select
    ActiveCell.FormulaR1C1 = "=IF(R[-1]C=""N/A"",""N/A"",R[-1]C*100)"
        Range("Z5").Select
    ActiveCell.FormulaR1C1 = "=IF(R[-1]C=""N/A"",""N/A"",R[-1]C*100)"
     Range("AA5").Select
    ActiveCell.FormulaR1C1 = "=IF(R[-1]C=""N/A"",""N/A"",R[-1]C*100)"
        Range("AB5").Select
    ActiveCell.FormulaR1C1 = "=IF(R[-1]C=""N/A"",""N/A"",R[-1]C*100)"
    Range("AC5").Select
    ActiveCell.FormulaR1C1 = "=IF(R[-1]C=""N/A"",""N/A"",R[-1]C*100)"
        Range("AD5").Select
    ActiveCell.FormulaR1C1 = "=IF(R[-1]C=""N/A"",""N/A"",R[-1]C*100)"
      Range("AE5").Select
    ActiveCell.FormulaR1C1 = "=IF(R[-1]C=""N/A"",""N/A"",R[-1]C*100)"

        Range("GA5").Select
    ActiveCell.FormulaR1C1 = "=IF(R[-1]C=""N/A"",""N/A"",R[-1]C*100)"
        Range("GE5").Select
    ActiveCell.FormulaR1C1 = "=IF(R[-1]C=""N/A"",""N/A"",R[-1]C*100)"
        Range("GI5").Select
    ActiveCell.FormulaR1C1 = "=IF(R[-1]C=""N/A"",""N/A"",R[-1]C*100)"
        Range("GM5").Select
    ActiveCell.FormulaR1C1 = "=IF(R[-1]C=""N/A"",""N/A"",R[-1]C*100)"
        Range("GP5").Select
    ActiveCell.FormulaR1C1 = "=IF(R[-1]C=""N/A"",""N/A"",R[-1]C*100)"
        Range("GR5").Select
    ActiveCell.FormulaR1C1 = "=IF(R[-1]C=""N/A"",""N/A"",R[-1]C*100)"
        Range("GU5").Select
    ActiveCell.FormulaR1C1 = "=IF(R[-1]C=""N/A"",""N/A"",R[-1]C*100)"
        Range("GW5").Select
    ActiveCell.FormulaR1C1 = "=IF(R[-1]C=""N/A"",""N/A"",R[-1]C*100)"
        Range("GZ5").Select
    ActiveCell.FormulaR1C1 = "=IF(R[-1]C=""N/A"",""N/A"",R[-1]C*100)"
        Range("HB5").Select
    ActiveCell.FormulaR1C1 = "=IF(R[-1]C=""N/A"",""N/A"",R[-1]C*100)"
        Range("HE5").Select
    ActiveCell.FormulaR1C1 = "=IF(R[-1]C=""N/A"",""N/A"",R[-1]C*100)"
        Range("HH5").Select
    ActiveCell.FormulaR1C1 = "=IF(R[-1]C=""N/A"",""N/A"",R[-1]C*100)"
        Range("HK5").Select
    ActiveCell.FormulaR1C1 = "=IF(R[-1]C=""N/A"",""N/A"",R[-1]C*100)"
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:15:05.343

我更喜欢先将数据保存到数组中，对其进行操作，然后将结果转储到新范围中。一般来说，数组更容易和更快地操作。此外，创建公式数组要容易得多（在您的情况下，数组是：“=IF(R[-1]C=""N/A""," "不适用"",R[-1]C*100)"

例如

```
Dim YourArrayContainingFormulas() As Variant
Redim YourArrayContainingFormulas(1 to 10)
For i = 1 To 10
  YourArrayContainingFormulas(i)="=YourFormula"
Next i 
```

并将其复制到这样的选定范围：

```
With ActiveCell
  Range(.Offest(0,0),.Offset(0,9)).Value=YourArrayContainingFormulas
End With 
```

# bash - 简单 bash 脚本中的语法错误

> ID：10979290
> 
> 赞同：0
> 
> 时间：2012-06-11T11:36:06.010
> 
> 标签：bash, shell, syntax

您好，我是 bash 脚本的新手，我有一个不适合我的简单程序。我认为它是一个语法错误。

```
#!/bin/bash
#example1.sh
read Age
if ["$Age" -lt "18"]; then
    echo "You must go to school"
fi 
```

当我输入一个 1 它说 [1: command not found

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T11:37:21.630

你需要空格：

```
if [ "$Age" -lt "18" ]; then 
```

（总结：Bash 语法规则令人震惊。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T04:55:09.143

```
#!/bin/bash
#example1.bash

read Age
if(($Age < 18)); then
echo "You must go to school"
fi 
```

此代码在 bash 中运行时有效。bash 和 sh 并不完全相同。

# python - 如何将参数列表传递给Python中的函数

> ID：10979292
> 
> 赞同：0
> 
> 时间：2012-06-11T11:36:10.470
> 
> 标签：python

我以这种方式扭曲了一个类：

```
import Queue
import threading

class MyThread():
    q = Queue.Queue()
    content = []
    result = {}
    t_num = 0
    t_func = None
    def __init__ (self, t_num, content, t_func):
        for item in content:
            self.q.put(item)
        self.t_num = t_num
        self.t_func = t_func

    def start(self):
        for i in range(self.t_num):
            t = threading.Thread(target=self.worker)
            t.daemon = True
            t.start()
        self.q.join()
        return self.result

    def worker(self):
        while True:
            item = self.q.get()
            value = self.t_func(item)
            self.result[item] = value
            self.q.task_done()

x = [5, 6, 7, 8, 9]
def func(i):
    return i + 1

m = MyThread(4, x, func)
print m.start() 
```

它运作良好。如果我设计带有2个或更多参数的函数func，并将这些参数以列表的形式传递给类，如何正确调用函数工作者中的func函数？

例如。

```
def __init__ (self, t_num, content, t_func, t_func_p):
            for item in content:
                self.q.put(item)
            self.t_num = t_num
            self.t_func = t_func
            self.t_func_p = t_func_p

def func(i, j, k):
m = MyThread(4, x, func, [j, k]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:00:45.887

您需要使用`*args`并将`**kwargs`任意数量的参数传递给函数。

这里有更多信息： http: [//www.saltycrane.com/blog/2008/01/how-to-use-args-and-kwargs-in-python/](http://www.saltycrane.com/blog/2008/01/how-to-use-args-and-kwargs-in-python/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:45:27.637

也许这可能会有所帮助：

```
def __init__(self, t_num, content, func, *params):
    func(*params) # params is a list here [param1, param2, param3....]

def func(param1, param2, param3):
# or 
def func(*params): # for arbitrary number of params

m = MyThread(4, x, func, param1, param2, param3....) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T05:58:06.820

作为一般规则，如果您要将许多参数传递给特定函数，您可以考虑将它们包装到一个简单的对象中，原因是

1.  如果您需要添加/删除参数，您只需要修改对象，函数本身，方法签名（及其所有引用）将保持不变
2.  使用对象时，您将始终知道您的函数正在接收什么（如果您在一个团队中工作，这特别有用，会有更多人使用该函数）。
3.  最后，由于您在其构造函数上控制对象的创建，因此可以确保与对象关联的值是正确的（例如，在构造函数中您可以确保没有空值，或者类型正确） ）。

如果您仍然想使用多个参数，请检查 *args 和 **kwargs，尽管我个人不喜欢这样，因为它最终可能会迫使人们阅读函数的源代码才能使用它。

祝你好运 ：）

# php - 数组映射在 php 中不起作用

> ID：10979299
> 
> 赞同：0
> 
> 时间：2012-06-11T11:36:35.633
> 
> 标签：php, mysql

我正在尝试使用此功能将丹麦语字符转换为 utf

```
private function process_elements($element){
   $element=  strtolower ( trim ( $element ) );
   $element=  mysql_real_escape_string($element);
    return utf8_encode($element);
} 
```

我的数组在没有这样的编码的情况下使用：

```
Array ( [0] => Desktop [1] => imlive [2] => dk [3] => Danish [4] => Denmark [5] => http://www.google.dk/search?ie=UTF-8&oe=UTF-8&hl=da&q=imlive&adtest=on&gl=DK&glp=1&ip=0.0.0.0&pws=0&noj=1&nomo=1 [6] => ImLive - Fr�kke cam-piger [7] => Tusindvis af rigtige amat�rer live! [8] => Fra private hjem og sovev�relser [9] => dk.imlive.com [10] => ImLive - Fr�kke cam-piger [11] => dk.imlive.com [12] => Tusindvis af rigtige amat�rer live! Fra private hjem og sovev�relser [13] => ImLive - Fr�kke cam-piger - Tusindvis af rigtige amat�rer live! [14] => dk.imlive.com [15] => Fra private hjem og sovev�relser [16] => ImLive - Fr�kke cam-piger [17] => Tusindvis af rigtige amat�rer live! Fra private hjem og sovev�relser [18] => dk.imlive.com ) 
```

这是我的实现：

```
array_map('self::process_elements', $data); 
```

该函数在一个类中......

后来我设置了这样的查询。例如：

```
 mysql_query("SET NAMES 'utf8'");
         $query="INSERT INTO advert
                 SET device='$device',
                 keyword='$keyword',
                 google_domain='$google_domain',
                 language='$language',
                 country='$country',
                 check_url='$check_url',
                 task_id=$this->task_id";

       mysql_query($query) or die(myql_error()); 
```

但它会抛出 a 字符错误的异常.. 因为在我输入 thtem 之前，它们不是 utf .. 为什么数组映射函数不起作用？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:44:46.060

看看这个线程：[将对象方法传递给 array_map()](https://stackoverflow.com/questions/4546614/passing-object-method-to-array-map)

尝试：

```
array_map(array($this, $this->process_elements), $data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T11:43:29.487

引用自 php.net

> 如果您需要从 array_map 调用静态方法，这将不起作用：
> 
> `<?PHP array_map('myclass::myMethod' , $value); ?>`
> 
> 相反，您需要这样做：
> 
> `<?PHP array_map( array('myclass','myMethod') , $value); ?>`
> 
> 请记住，这将适用于任何需要回调参数的 PHP 函数。

[http://php.net/manual/de/function.array-map.php](http://php.net/manual/de/function.array-map.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T11:47:02.703

您不能更改该数组中的初始值，因为 array_map() 返回一个具有更改值的新数组，它不是通过引用传递的。

```
$newArray = array_map('self::process_elements', $data); 
```

# c# - Nhibernate：非空属性在多对一关系中引用空值或瞬态值错误

> ID：10979302
> 
> 赞同：0
> 
> 时间：2012-06-11T11:36:43.167
> 
> 标签：c#, nhibernate, nhibernate-mapping, spring.net

我在 NHibernate 中的多对一关系中收到错误**非空属性引用空值或瞬态值。**

代码：

```
class MyData
{
    public string Name{get;set;}    
    public virtual UploadData UploadData { get; set; }
    public int UploadId{get;set;}
}

class UploadData
{
    public int UploadId{get;set;}
    public DateTime Date{get;set;}
} 
```

映射

```
<class name="MyData, NS" table="MyData" lazy="false">
    <id name="Identifier" type="Int32" unsaved-value="0">
      <column name="Identifier" sql-type="int" 
              not-null="true" unique="true" index="PK_dbo.MyData"/>
      <generator class="identity" />
    </id>
    <property name='Name' column='Name'/>
    <property name='UploadId' column='UploadId'/>      
    <many-to-one name="UploadData" class="UploadData, NS">
          <column name="UploadId" length="5" sql-type="int" not-null="true" index="UploadId"/>
    </many-to-one>
 </class> 
```

上传数据类

```
<class name="UploadData, NS" table="UploadData" lazy="false">
    <id name="UploadId" type="Int32" unsaved-value="0">
      <column name="UploadId" sql-type="int" 
              not-null="true" unique="true" index="PK_dbo.UploadData"/>
      <generator class="identity" />
    </id>
    <property name='Data' column='Date' />
</class> 
```

我正在使用以下代码删除记录。

```
foreach(MyData obj in myDataCollection)
repo.Delete(obj) // delete using repository.
repo.Delete(obj.UploadData) 
```

如果 myDataCollection 包含 2 个具有相同 UploadData 的实例，那么我将收到错误“非空属性引用空值或瞬态值”`repo.Delete(obj)`

我搜索了这个问题并找到了解决方案（例如，在映射中设置 not-null="false"）但没有解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:50:57.643

然后指定`cascade="all"`删除操作是级联的，NHibernate 应该处理重复的引用。

```
<many-to-one name="UploadData" class="UploadData, NS" cascade="all">

// then this is enough to delete mydata and associated UploadData
foreach(MyData obj in myDataCollection)
{
   repo.Delete(obj);
} 
```

我在这里也看到了几个问题

*   `public int UploadId{ get; set; }`是多余的，并且会导致 SQL 参数错误，因为该列被映射了两次。`UploadData.UploadId`会给同样的
*   `length="5"`被忽略，因为它仅与字符串列相关

# iphone - iPhone 上带有 youtube 视频的 HTML - “Youtube 不可用”

> ID：10979303
> 
> 赞同：0
> 
> 时间：2012-06-11T11:36:55.227
> 
> 标签：iphone, html, youtube

我有一个用于移动设备的小型网站。它只包含一个菜单、一些文本和一个嵌入的 youtube 视频。我使用此代码进行嵌入：http://learningtheworld.eu/2009/youtube-embed/[当](http://learningtheworld.eu/2009/youtube-embed/) 我点击 iPhone 上的视频时，youtube 应用程序启动（没关系），但我收到以下错误消息：“Youtube not可用的”。有人可以帮我吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:44:59.420

没有`embed`标签，试试这样的：

```
<object width="480" height="360">
  <param name="movie" value="http://www.youtube.com/v/VideoID"></param>
  <param name="autoplay" value="1">
  <param name="wmode" value="transparent"></param>
  <embed src="http://www.youtube.com/v/VideoID&autoplay=1" type="application/x-shockwave-flash" wmode="transparent" ></embed>
</object> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T08:24:54.377

我发现了问题。youtube 上出现权限错误。所以代码没问题。我写了这个问题，也许它很有用：如果您将视频上传到 youtube 并将其设置为私有并稍后发布，它将无法在 iPad 上运行（但它是公开的），因此您必须立即发布它。我不知道为什么，但我做了同样的事情，它奏效了。

# android - Android onTouch 刷新率

> ID：10979304
> 
> 赞同：1
> 
> 时间：2012-06-11T11:36:55.510
> 
> 标签：android

我 `onTouch(View arg0, MotionEvent arg1)` 用作游戏输入。它返回`false`所以它不被处理。在我运行 4.0.4 的 HTC HD2 上，这足以让玩家走得足够快（例如跳过障碍物）。然而，当我只触摸时，我的新 HTC One S 处理它的速度似乎很慢，当我滑动两个 onTouch-Events 之间的时间时要快得多。有没有办法设置 onTouch Listener 的刷新率？或者您有其他控制播放器的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:42:57.263

您可以不依赖刷新率，而是保存两次更新之间的时间差 (dt) 并根据经过的时间计算速度。

# android - 运行时擦除模拟器数据

> ID：10979320
> 
> 赞同：0
> 
> 时间：2012-06-11T11:38:11.177
> 
> 标签：android, testing, emulation

即使在运行时也可以获得干净的模拟器状态吗？我需要测试几个应用程序，并且在测试每个应用程序之前需要一个干净的状态。我可以通过删除所有创建的文件来轻松地做到这一点，`userdata.img`或者`cache.img`但是我需要重新启动模拟器，这在我的 TestVM 上大约需要 2 分钟......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:41:46.973

所有应用程序的可修改文件都位于众所周知的目录中，例如`getFilesDir()`. 只需在启动测试套件之前删除文件。

如果您不信任该方法，则可以在安装应用程序并运行测试套件之前卸载该应用程序。这不会摆脱外部存储上的文件，但会清除内部存储，所以这对你来说是否足够“干净”，我不能说。

如果这些（或它们的组合）不足，那么您别无选择，只能清除并重新启动模拟器。您总是可以购买更快的开发机器，或者看看在无头模式下运行模拟器是否会加快其启动速度。

# java - 调整 Jackrabbit 数据模型（VERSION_BUNDLE 表）

> ID：10979322
> 
> 赞同：2
> 
> 时间：2012-06-11T11:38:19.133
> 
> 标签：java, oracle, jackrabbit, jcr

作为我们应用程序的一部分，我们使用 Jackrabbit (1.6.4) 来存储文档。我们的应用程序检索到的每个文档都被放入 Jackrabbit 中的文件夹结构中，如果不存在则创建该文件夹结构。

我们的 DBA 注意到以下查询对持有 Jackrabbit 模式的 Oracle (11.2.0.2.0) 数据库执行了很多 - 每小时超过 50000 次，导致数据库上的大量 IO。事实上，它是经过时间的 IO（97% IO）方面排名前 5 位的 SQL 语句之一：

```
 select BUNDLE_DATA from VERSION_BUNDLE where NODE_ID = :1 
```

查看数据库，您会注意到该表最初只包含一条记录，包括`node_id`（数据类型 RAW）键和`DEADBEEFFACEBABECAFEBABECAFEBABE`值，然后是`bundle_data`BLOB 列中的几个字节。稍后，将添加更多记录以及其他数据。

该表的 SQL 如下所示：

```
CREATE TABLE "VERSION_BUNDLE"
(    
    "NODE_ID" RAW(16) NOT NULL ENABLE,
    "BUNDLE_DATA" BLOB NOT NULL ENABLE
); 
```

我有以下问题：

*   为什么 Jackrabbit 如此频繁地访问此表？
*   任何 Jackrabbit 调整选项可以使这更快吗？
*   Jackrabbit 是否完全更改了该`BUNDLE_DATA`值，还是仅在每次访问存储库时读取该值？
*   有没有办法调整数据库模式以使其更好地处理这种情况？

*更新：该表最初仅包含一条记录，随着时间的推移添加更多记录，由 Jackrabbit 内部决定。在大多数情况下，访问似乎仍然是只读的，因为插入或更新语句未报告为以高数量运行。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:03:39.970

这是物理 I/O 还是逻辑 I/O？随着数据被读取，如果块在缓存中的老化速度足够快以至于需要物理 i/o，我会感到惊讶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:02:39.473

> 为什么 Jackrabbit 如此频繁地访问此表？

这表明您正在存储库中创建版本。这是您的应用程序应该做的事情吗？

> 任何 Jackrabbit 调整选项可以使这更快吗？

不是我知道的；调查的一种选择是升级到更新的 Jackrabbit 版本。[2.4.2 版](http://www.apache.org/dist/jackrabbit/2.4.2/RELEASE-NOTES.txt)刚刚发布，1.6.4 版已经快两年了。这些版本之间可能存在性能改进。

> Jackrabbit 是否更改了 BUNDLE_DATA 值，还是只是在每次访问存储库时读取它？

从外观上看，它是根存储库节点的 GUID。

> 有没有办法调整数据库模式以使其更好地处理这种情况？

据我所知，模式是由 Jackrabbit 自动生成的，因此唯一的选择是在创建表定义后以兼容的方式修改表定义。但这是 DBA 的主题，而我不是。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-24T11:30:58.567

> 为什么 Jackrabbit 如此频繁地访问此表？

我们已经看到，即使您不要求版本，也经常访问此表。从 Jackrabbit 用户邮件列表中查看[此线程](http://mail-archives.apache.org/mod_mbox/jackrabbit-users/201812.mbox/%3cOF738F8905.72CC8783-ONC1258359.004AE815-C1258359.004BA3CA@hitachi-systems-cbt.com%3e)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-01T18:16:17.363

如果 JCR-Store 基于 Oracle 数据库，您可以重新组织基础表。

1.  构建该表的[哈希集群](https://docs.oracle.com/cd/B28359_01/server.111/b28310/hash003.htm)以防止索引访问
2.  检查您是否有使用[分区选项的许可](https://docs.oracle.com/cd/B19306_01/server.102/b14220/partconc.htm)
3.  通过删除应用程序行中不必要的版本将被删除（版本修剪）

如果您要存储图片、文档等二进制对象 - 只需查看 VERSION_BINVAL。

# ios - 新四方场地细节图

> ID：10979323
> 
> 赞同：17
> 
> 时间：2012-06-11T11:38:20.033
> 
> 标签：ios, xcode, uiscrollview, mkmapview, foursquare

我真的很喜欢foursquare设计场地细节视图的方式。特别是在视图的“标题”中带有场地位置的地图......它是如何完成的？细节显然是一些uiscrollview（也许是uitableview？），在它后面（在标题中）有一张地图，所以当你向上滚动时，地图会随着滚动视图的反弹而被发现......有没有人知道如何做到这一点？

![在此处输入图像描述](../Images/93d06249605379f296d2cd98dcac339e.png)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-27T19:32:57.980

这是我设法重现它的方式：-

你需要 a`UIViewController`作为`UIScrollView`它的视图。然后，`UIView`您添加到滚动视图的内容应如下所示：-

![在此处输入图像描述](../Images/eb2e624744493147a8e955755e9285b3.png) - 框架的**位置为`MKMapView`负`y`**。在这种情况下，我们只能看到默认状态下（拖动前）的 100pts 地图。
- 您需要在 MKMapView 实例上禁用缩放和滚动。

**然后，诀窍是`centerCoordinate`在`MKMapView`您向下拖动时将其向下移动，并调整其中心位置。**

为此，我们计算 1point 表示为 delta 纬度的多少，以便我们知道在屏幕上拖动 x 点时应该移动多少地图的中心坐标：-

```
- (void)viewDidLoad {
    [super viewDidLoad];
    UIScrollView* scrollView = (UIScrollView*)self.view;
    [scrollView addSubview:contentView];
    scrollView.contentSize = contentView.frame.size;
    scrollView.delegate = self;
    center = CLLocationCoordinate2DMake(43.6010, 7.0774);
    mapView.region = MKCoordinateRegionMakeWithDistance(center, 1000, 1000);
    mapView.centerCoordinate = center;
    //We compute how much latitude represent 1point.
    //so that we know how much the center coordinate of the map should be moved 
    //when being dragged.
    CLLocationCoordinate2D referencePosition = [mapView convertPoint:CGPointMake(0, 0) toCoordinateFromView:mapView];
    CLLocationCoordinate2D referencePosition2 = [mapView convertPoint:CGPointMake(0, 100) toCoordinateFromView:mapView];
    deltaLatFor1px = (referencePosition2.latitude - referencePosition.latitude)/100;
} 
```

一旦这些属性被初始化，我们就需要实现`UIScrollViewDelegate`. 当我们拖动时，我们将以点表示的移动转换为纬度。然后，我们使用该值的一半移动地图的中心。

```
- (void)scrollViewDidScroll:(UIScrollView *)theScrollView {
    CGFloat y = theScrollView.contentOffset.y;
    // did we drag ?
    if (y<0) {
        //we moved y pixels down, how much latitude is that ?
        double deltaLat = y*deltaLatFor1px;
        //Move the center coordinate accordingly 
        CLLocationCoordinate2D newCenter = CLLocationCoordinate2DMake(center.latitude-deltaLat/2, center.longitude);
        mapView.centerCoordinate = newCenter;
    }
} 
```

您将获得与foursquare 应用程序相同的行为（但更好：在foursquare 应用程序中，地图居中趋于跳跃，在这里，更改中心很顺利）。

![](../Images/636b3a2b5c0c722a8e3c0cf10a4e5f21.png) ![](../Images/1350c215b3f16f1534716936fb791c5b.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T17:02:29.650

上面的例子很好。如果您需要更多帮助，我认为他们正在使用与 RBParallaxTableViewController 非常相似的东西。[https://github.com/Rheeseyb/RBParallaxTableViewController](https://github.com/Rheeseyb/RBParallaxTableViewController)

这与 Path 用于其标题照片的效果基本相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-23T02:32:05.330

Yonel 的回答很好，但我发现了一个问题，因为我在地图的中心有一个大头针。因为负Y，所以点隐藏在我的UINavigationBar下。

然后，我没有设置负 Y，我根据滚动偏移量更正了我的 mapView.frame。

我的地图视图是 320 x 160

```
_mapView.frame = CGRectMake(0, 160, 320, -160+y); 
```

希望这可以帮助某人。

# php - PHP：Postgres 数组和 pg_insert

> ID：10979327
> 
> 赞同：1
> 
> 时间：2012-06-11T11:38:25.660
> 
> 标签：php, arrays, postgresql

我知道我可以将数组插入到 Postgres 数据库中`pg_query`。

```
INSERT into table (field) VALUES ('{{element, element},{}}') 
```

但是如何使用`pg_insert`呢？

```
$array["field"] = "{{element, element},{}}";
$result = pg_insert($con, "table", $array); 
```

字符串是否会作为**2D** Postgres 数组`{{element, element},{}}`实际插入？`field`

 ***我一直想测试一下，但目前我没有任何 PostgreSQL DB 可以测试..*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:11:22.883

我刚刚运行了您的具体示例。

(1) 在 Postgres 中：

```
CREATE TABLE atable (afield text[][]); 
```

(2) 在 PHP 中：

```
$array["afield"] = "{{'element', 'element'},{}}";
$result = pg_insert($this->conn, "atable", $array); 
```

我收到以下错误：

```
Notice: pg_insert(): Unknown or system data type '_text' for 'afield' in ... 
```

我尝试使用数组值：使其成为 2x2 数组、一维等，等等 - 结果相同。我什至将表格更改为将字段设置为一维数组：`text[]`并相应地更改了代码-我仍然得到相同的结果。

我开始进一步挖掘并在[PHP 文档](http://php.net/manual/en/function.pg-insert.php)中找到以下内容`pg_insert`：

> 此功能是实验性的。在 PHP 的未来版本中，此函数的行为、其名称和相关文档可能会更改，恕不另行通知。使用此功能应由您自担风险。

基本上，它有很多问题，不应该使用。有趣的是，使用

```
pg_query("INSERT INTO...") 
```

工作得很好。希望这能回答您的问题。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:55:01.743

任意多的维度，但两个就可以了。

```
=> CREATE SCHEMA ztest;
CREATE SCHEMA
=> CREATE TABLE tt (a int[3][3]);
CREATE TABLE
=> INSERT INTO tt VALUES (ARRAY[ARRAY[1,2,3], ARRAY[4,5,6], ARRAY[7,8,9]]), (ARRAY[ARRAY[11,12,13],ARRAY[14,15,16],ARRAY[17,18,19]]);
INSERT 0 2
=> SELECT * FROM tt;
                 a
------------------------------------
 {{1,2,3},{4,5,6},{7,8,9}}
 {{11,12,13},{14,15,16},{17,18,19}}
(2 rows)

=> INSERT INTO tt VALUES ('{{21,22,23},{24,25,26},{27,28,29}}');
INSERT 0 1
=> SELECT * FROM tt;
                 a
------------------------------------
 {{1,2,3},{4,5,6},{7,8,9}}
 {{11,12,13},{14,15,16},{17,18,19}}
 {{21,22,23},{24,25,26},{27,28,29}}
(3 rows)

=> SELECT a[2][3] FROM tt;
 a
----
  6
 16
 26
(3 rows) 
```**

# search - 如何设计全文索引系统？

> ID：10979330
> 
> 赞同：2
> 
> 时间：2012-06-11T11:38:34.573
> 
> 标签：search, lucene, indexing, information-retrieval

**Lucene**是一个很棒的开源索引库，我的问题不是如何使用这种索引工具，而是学习和理解它们是如何设计的。

也许我应该阅读**Lucene**的源代码，但我似乎找不到任何关于如何完成这项伟大工作的教程。

那么，有没有其他方法或书籍可以帮助我具体了解如何设计这样的索引系统？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:25:02.773

Lucene 背后的科学被称为信息检索。当您开始了解信息检索背后的算法和数据结构时，您就完成了，Lucene 或 Sphinx 只是解决您任务的工具。第一件事是你可以通过[倒排索引](http://en.wikipedia.org/wiki/Inverted_index)数据结构。

一本关于信息检索算法和数据结构的好书可以在这里找到：http: [//nlp.stanford.edu/IR-book/](http://nlp.stanford.edu/IR-book/)这个斯坦福文本是一个很好的资源，也是了解信息检索系统如何的一个很好的起点被设计

# javascript - 简单的用户 Web 界面，带有 Python 中的表格条目

> ID：10979332
> 
> 赞同：3
> 
> 时间：2012-06-11T11:38:37.973
> 
> 标签：javascript, python, user-interface

我有将表格数据（来自 Excel）作为输入并再次将输出数据生成为表格的脚本。我正在考虑学习一些 Python 网络框架来实现它作为一个小型网络界面。但是，我将需要类似 excel 的功能，例如选项卡中的多个表格、按行排序、过滤数据（多列）、更改具有可选值的单元格以及可能突出显示单元格。

如果我不需要任何其他功能，您能否建议实现这一点的最快方法，即可能仍然为*这种表提供有用类的*最基本的网络框架？

我可以自己找到资源，但如果有人能说出我必须注意的功能，这样我就可以跳过学习该特定任务不需要的信息，这会很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:57:35.170

为此，您将需要更多的 JS，然后是 Python。您可以使用最小的 python web 框架 - [Flask](http://flask.pocoo.org/)。

然后充分利用 YUI3 Javascript 框架的强大功能，该框架对开箱即用的表格（包括排序）具有出色的支持。

以下是 YUI3 数据表的文档：http: [//yuilibrary.com/yui/docs/datatable/](http://yuilibrary.com/yui/docs/datatable/)

关于多个类似 excel 的工作表 - 只需创建几个表并将它们放在[tabs](http://yuilibrary.com/yui/docs/tabview/)中。

# c# - c#格式化一串字符，所以数字之前的字母是大写，之后是小写

> ID：10979341
> 
> 赞同：2
> 
> 时间：2012-06-11T11:39:11.263
> 
> 标签：c#, regex

我正在尝试在 c# 中格式化一个字符串，我不确定我是否应该使用正则表达式或类似的东西，如果模型名称是 md234GH 和 Dgh321Hh 它们需要是 MD234gh 和 DGH321hh。

所以大写数字小写

我尝试执行以下操作：

```
TextInfo textInfo = new CultureInfo("en-GB", false).TextInfo;

foreach (var product in products)
{
    if (product.ModelName != null)
    {
        product.ModelName = product.ModelName.ToLower();
        product.ModelName = textInfo.ToTitleCase(product.ModelName);
    }
} 
```

但这只会使第一个字母大写。

任何建议表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:42:57.227

`ToTitleCase`只是意味着使每个单词的第一个字母大写。要执行您想要的操作，您需要拆分字符串并根据需要调用`.ToUpper`和调用`.ToLower`，例如：

```
Regex modelExpression = new Regex("^([A-Za-z]+)([0-9]+)([A-Za-z]+)$");

// Inside for loop...
Match m = modelExpression.Match(product.ModelName);
if (m.Success)
{
    product.ModelName = m.Groups[1].Value.ToUpper() 
         + m.Groups[2].Value 
         + m.Groups[3].Value.ToLower();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T11:41:03.573

`ToTitleCase`只会使每个单词的第一个字母大写。

您需要使用`ToUpper`使所有字母大写。

没有内置的东西可以做你想做的事，所以你需要自己做 - 解析数字之间的字符串并格式化每个部分。

正则表达式看起来是最好的选择：

```
^([A-Za-z]+)([0-9]+)([A-Za-z]+)$ 
```

用法：

```
var formatted = Regex.Replace(originalString,
                          @"^([A-Za-z]+)([0-9]+)([A-Za-z]+)$",
                          m => m.Groups[1].Value.ToUpper() +
                          m.Groups[2].Value +
                          m.Groups[3].Value.ToLower()); 
```

“md234GH”的结果是“MD234gh”，“Dgh321Hh”的结果是“DGH321hh”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T11:48:13.327

您可以使用正则表达式：

```
(?i)^([a-z]+)(\d+)([a-z]+)$ 
```

在替换中，类似于：

```
model = Regex.Replace(model, @"(?i)^([a-z]+)(\d+)([a-z]+)$", delegate(Match m)
{
    return m.Groups[1].Value.ToUpper() + m.Groups[2].Value + m.Groups[3].Value.ToLower();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T11:43:20.243

正则表达式是一个很好的匹配：

```
\b(\D+)(\d+)(\D+)\b 
```

现在所需要做的就是在 C# 中使用正则表达式 api 并给它一个执行替换的委托。我使用 lambda 作为委托：

```
var result = Regex.Replace("md234GH", @"\b(\D+)(\d+)(\D+)\b", x =>
    x.Groups[1].Value.ToUpper() 
    + x.Groups[2].Value 
    + x.Groups[3].Value.ToUpper() 
); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T11:47:28.650

```
using System.Text.RegularExpressions;

Match m=Regex.Match("md234GH","(\\w+?)(\\d+)(\\w+)");
Console.WriteLine("{0}{1}{2}",m.Groups[1].Value.ToUpper(),m.Groups[2].Value,m.Groups[3].Value.ToLower()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-11T12:25:45.950

这是纯 C 语言的解决方案。假设使用 8 位 ASCII 或 ANSI 字符集。

```
void convertModelName(char *name)
{
    char    *ptr;
    int     lcase = 0;

    for (ptr=name; *ptr; ptr++) {
        if (*ptr >= '0' && *ptr <= '9') {
            lcase = 1;
        } else {
            if (lcase) {
                *ptr |= 0x20;
            } else {
                *ptr &= 0xdf;
            }
        }
    }
} 
```

# java - 为什么这个 SCJP 程序输出 21 但我得到 20？

> ID：10979345
> 
> 赞同：0
> 
> 时间：2012-06-11T11:39:24.493
> 
> 标签：java, enums, scjp

```
public class Stepper 
{
enum Roman {I,V,X,L,C,M}
public static void main(String... args) 
{
    int x=7;
    int z=2;
    Roman r = Roman.X;
    do
    {
        switch(r)
        {
            case C : r = Roman.L;break;
            case X : r = Roman.C;
            case L : if(r.ordinal()>2) 
                        {
                            z += 5;//7,13,19
                        }
            case M : x++;//8,9,10
        }
        z++;//8,14,20
    }
    while (x<10);
    System.out.println(z); //
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T11:46:49.013

当 r = Roman.C 时，

```
case C : r = Roman.L;
break; 
```

在 case C 执行了 break 之后，在 break 之后有一个 z++。

你错过了那个。

# javascript - JavaScript，声明变量时语法混乱

> ID：10979347
> 
> 赞同：3
> 
> 时间：2012-06-11T11:39:34.417
> 
> 标签：javascript, variables, syntax

我最近在我正在阅读的一本 JavaScript 书籍中遇到以下代码行：

`var col = [], top, bottom;`

这是我第一次遇到一个看似被赋予三个变量的变量。有人可以解释这行代码中发生了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T11:41:29.663

它只是一个较短的版本：

```
var col = [];
var top;
var bottom; 
```

一种风格相对于另一种风格没有真正的优势/劣势，但[JSLint](http://www.jslint.com/)喜欢将`var`每个范围内的所有声明组合起来（正如您在问题中所提出的那样）：

> 在具有块范围的语言中，通常建议在第一次使用的地方声明变量。但是因为 JavaScript 没有块作用域，所以在函数顶部声明函数的所有变量更为明智。**建议每个函数使用单个 var 语句**。

* * *

有关为什么会这样的完整解释，您可以查看[ECMAScript 规范](http://es5.github.com/#x12.2)。这是语法的相关部分：

> *变量声明：`var`变量声明列表`;`*
> 
> *变量声明列表：变量声明变量声明列表`,`变量声明*
> 
> *变量声明：标识符初始化[器选择]*

还值得注意的是，这里使用*的*逗号与[逗号运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Comma_Operator)不同。它只是碰巧使用了相同的字符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T11:41:44.287

读为

```
var
    col = [],
    top,
    bottom; 
```

声明了三个变量，但只初始化了一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T11:45:16.237

这是在 中声明多个变量的一般语法`javascript`。它说你要声明三个变量，即`col`, `top`, `bottom`where `col`is of type `array`。
它与以下内容相同：

```
var col = [];
var top ;
var bottom; 
```

有用的链接：
[http ://docstore.mik.ua/orelly/webprog/jscript/ch04_02.htm](http://docstore.mik.ua/orelly/webprog/jscript/ch04_02.htm)
[http://freewebdesigntutorials.com/javaScriptTutorials/jsArrayObject/declareAnArray.htm](http://freewebdesigntutorials.com/javaScriptTutorials/jsArrayObject/declareAnArray.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T11:42:35.380

该语句没有为 col 分配三个值，它只是声明了三个变量，其中一个是数组。

# maven - 将依赖程序集资源复制到特定文件夹

> ID：10979350
> 
> 赞同：0
> 
> 时间：2012-06-11T11:40:00.217
> 
> 标签：maven

我有 ProjectA，它使用 Maven 程序集插件将模块中的一些资源打包到存储库中。

然后我有依赖于 ProjectA 的 ProjectB。在 ProjectB 中，我想使用 maven-dependency-plugin 将模块资源（由程序集插件打包）解压缩到我选择的某个目标文件夹中。

我将依赖插件配置如下，但是当我运行 maven 时，它只会复制模块的资源，而不会复制程序集资源。

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-dependency-plugin</artifactId>
    <version>2.1</version>
    <executions>
        <execution>
            <phase>initialize</phase>
            <goals>
                <goal>unpack</goal>
            </goals>
            <configuration>
                <artifactItems>
                    <artifactItem>
                        <groupId>path.to.projectA.groupId</groupId>
                        <artifactId>moduleA</artifactId>
                        <version>1.0</version>                  

                        <outputDirectory>some/path/here</outputDirectory>
                    </artifactItem>
                </artifactItems>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:01:45.293

您需要指定正确的`classifier`和`type`maven 以便它可以执行此操作。您的程序集应该在您的本地存储库中可用或可从存储库下载。

例如，假设您的程序集被命名为`moduleA-distribution-1.0.zip`，您将更改上面的代码片段如下：

```
 <artifactItem>
                    <groupId>path.to.projectA.groupId</groupId>
                    <artifactId>moduleA</artifactId>
                    <version>1.0</version>                  
                    <classifier>distribution</classifier>
                    <type>zip</type>
                    <outputDirectory>some/path/here</outputDirectory>
              </artifactItem> 
```

# sql-server - 创建表时的 SQL 错误疑难解答

> ID：10979351
> 
> 赞同：1
> 
> 时间：2012-06-11T11:40:03.607
> 
> 标签：sql-server

我有代码：

```
USE pricingdb
go
CREATE TABLE dbo.Fin_Options_Specs (
    column1 NVARCHAR(255),
    column2 NVARCHAR(255),
    column3 DOUBLE
    );
Go 
```

我正在尝试使用 SQL 创建一个 3 列表。列名稍后会更改，这不是问题。但是，我不断收到错误

> “')' 附近的语法不正确。”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T11:42:04.157

没有数据类型`DOUBLE`。您可能想要一个`Numeric(18, 5)`或另一个像`float`.

[MSDN 数据类型](http://msdn.microsoft.com/en-us/library/ms187752.aspx)

# c# - 如何增加整数数组的索引值

> ID：10979352
> 
> 赞同：0
> 
> 时间：2012-06-11T11:40:10.653
> 
> 标签：c#, arrays

我想将值从数据库表存储到数组。但是当我这样做时，异常“对象引用未设置对象实例”通过请查看我的代码。

**.cod 背后**

```
 public DataSet showoption1()
    {
        SqlCommand cmd = new SqlCommand("select * from assessmenttest",con);

        SqlDataAdapter adptr = new SqlDataAdapter(cmd);

        DataSet ds = new DataSet();
        adptr.Fill(ds,"test");

        int [] arr=new int[10];
        DataTable table=ds.Tables[0];
        for(int i=0;i<table.Rows.Count;i++  )
        {
test.Agree[i] =Convert.ToInt32(ds.Tables[0].Rows[i]["option1"]);

    } 
```

**业务逻辑层类代码：**

公开课测试{

public static int[] 同意；

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:42:17.870

`test.agree`是`null`。

您需要在该字段中放置一个新数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T11:44:16.960

你到底在哪里得到错误，在哪个阵列上？从外观上看，它必须在同意 [] 上，您永远不会实例化它。

尝试

```
public static int[] agree =new int[10]; 
```

但我认为你可能想要同意一份清单，因为你不知道你需要多少

```
public static List<int> agree = new List<int>; 
```

然后使用

```
agree.Add(Convert.ToInt32(ds.Tables[0].Rows[i]["option1"]); 
```

你可以像访问数组一样访问它

```
MessageBox.Show(agree[1].ToString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T12:14:06.990

在添加值之前实例化：

```
 SqlCommand cmd = new SqlCommand("select * from assessmenttest", con);

        SqlDataAdapter adptr = new SqlDataAdapter(cmd);

        DataSet ds = new DataSet();
        adptr.Fill(ds, "test");

        int[] arr = new int[10];
        DataTable table = ds.Tables[0];
        test.agree = new int[table.Rows.Count];
        for (int i = 0; i < table.Rows.Count; i++)
        {

            test.agree[i] = Convert.ToInt32(ds.Tables[0].Rows[i]["option1"]);
        } 
```

# android - Android文件未加载

> ID：10979353
> 
> 赞同：0
> 
> 时间：2012-06-11T11:40:29.367
> 
> 标签：android, android-assets

我感觉资产文件的路径是错误的，但我不确定要使用的正确路径。我仔细检查了文本文件实际上位于`assets`什么让我认为它错误的文件或目录是因为错误没有这样的文件或目录？

问题代码周围有条件代码，用于存储不同的字段。代码指定数组中是否有四个元素，然后用文件中的数据填充数组列表。如果不满足此条件，则日志将显示错误。该文件名为

*   测验1.txt
*   测验2.txt
*   测验3.txt

这是 LogCat

```
 06-11 11:29:02.526: I/global(317): Default buffer size used in BufferedReader constructor. It would be better to be explicit if an 8k-char buffer is required.
 06-11 11:29:02.526: E/path of text file(317): What is the output of: 
 06-11 11:29:02.526: E/path of text file(317): echo 6 % 4;<.>
 06-11 11:29:02.526: E/path of text file(317): 2<.>
 06-11 11:29:02.526: E/path of text file(317): 4<.>
 06-11 11:29:02.526: E/path of text file(317): 2<.>
 06-11 11:29:02.526: E/path of text file(317): 0<.>
 06-11 11:29:02.526: W/System.err(317): Error: read() /What is the output of: 
 06-11 11:29:02.526: W/System.err(317): echo 6 % 4;<.>
 06-11 11:29:02.526: W/System.err(317): 2<.>
 06-11 11:29:02.526: W/System.err(317): 4<.>
 06-11 11:29:02.526: W/System.err(317): 2<.>
 06-11 11:29:02.536: W/System.err(317): 0<.>
 06-11 11:29:02.536: W/System.err(317):  (No such file or directory)
 06-11 11:29:02.536: E/YourApp(317): 1
 06-11 11:29:02.536: E/YourApp(317): Data was not split from file correctly
 06-11 11:29:02.536: I/global(317): Default buffer size used in BufferedReader constructor. It would be better to be explicit if an 8k-char buffer is required.
 06-11 11:29:02.536: E/path of text file(317): Which of following is NOT a valid comment in PHP<.>
 06-11 11:29:02.536: E/path of text file(317): 3<.>
 06-11 11:29:02.536: E/path of text file(317): // comment<.>
 06-11 11:29:02.536: E/path of text file(317): # comment<.>
 06-11 11:29:02.536: E/path of text file(317): <!-- comment --><.>
 06-11 11:29:02.536: W/System.err(317): Error: read() /Which of following is NOT a valid comment in PHP<.>
 06-11 11:29:02.536: W/System.err(317): 3<.>
 06-11 11:29:02.536: W/System.err(317): / comment<.>
 06-11 11:29:02.536: W/System.err(317): # comment<.>
 06-11 11:29:02.536: W/System.err(317): <!-- comment --><.>
 06-11 11:29:02.536: W/System.err(317):  (No such file or directory)
 06-11 11:29:02.536: E/YourApp(317): 1
 06-11 11:29:02.536: E/YourApp(317): Data was not split from file correctly
 06-11 11:29:02.546: I/global(317): Default buffer size used in BufferedReader constructor. It would be better to be explicit if an 8k-char buffer is required.
 06-11 11:29:02.546: E/path of text file(317): Which of following is a valid function definition in PHP<.>
 06-11 11:29:02.546: E/path of text file(317): 3<.>
 06-11 11:29:02.546: E/path of text file(317): int f()<.>
 06-11 11:29:02.546: E/path of text file(317): private int f()<.>
 06-11 11:29:02.546: E/path of text file(317): function f()<.>
 06-11 11:29:02.546: W/System.err(317): Error: read() /Which of following is a valid function definition in PHP<.>
 06-11 11:29:02.546: W/System.err(317): 3<.>
 06-11 11:29:02.546: W/System.err(317): int f()<.>
 06-11 11:29:02.546: W/System.err(317): private int f()<.>
 06-11 11:29:02.546: W/System.err(317): function f()<.>
 06-11 11:29:02.546: W/System.err(317):  (No such file or directory)
 06-11 11:29:02.546: E/YourApp(317): 1
 06-11 11:29:02.546: E/YourApp(317): Data was not split from file correctly 
```

下面是源代码

```
class Question
{
    String question;
    int answer;
    String choice1;
    String choice2;
    String choice3;

}

public class Uploader extends Activity
{
    private static final String LOGS = null;
    Question q;
    String textfile;
    InputStream is;

    public void onCreate(Bundle b)
    {
        super.onCreate(b);
        setContentView(R.layout.basic);

        ArrayList<Question> list = new ArrayList<Question>();

        for (int i = 1; i <= 3; i++)
        {

            try {
            AssetManager assetManager = getAssets();
            // is =  getResources().getAssets().open("quiz"+i+".txt");
          //
        String quizes[] = assetManager.list("myquizfolder");
        for(String quiz : quizes) {
            InputStream in = assetManager.open("myquizfolder/" + quiz);
         textfile = convertStreamToString(in);
        }

                 catch (IOException e)
            {
                // TODO Auto-generated catch block
                Log.e("path of text file", textfile);
                e.printStackTrace();
            }

            ResultsReader reader = new ResultsReader(textfile);
            reader.read();

            String str = ((ResultsReader) reader).getInput();
            String data[] = str.split("<.>");

            String datainfo = Integer.toString(data.length);
            Log.e("YourApp", datainfo);
            Question q = new Question();
            if (data.length == 4)
            {
                q.question = data[0];

                q.answer = Integer.parseInt(data[1]);

                q.choice1 = data[2];
                q.choice2 = data[3];
                q.choice3 = data[4];
            } else
            {
                Log.e("YourApp", "Data was not split from file correctly");
            }
            list.add(q);

        }
    }
}

 public static String convertStreamToString(InputStream is)
            throws IOException {
            Writer writer = new StringWriter();

            char[] buffer = new char[2048];
            try {
                Reader reader = new BufferedReader(new InputStreamReader(is,
                        "UTF-8"));
                int n;
                while ((n = reader.read(buffer)) != -1) {
                    writer.write(buffer, 0, n);
                }
            } finally {
                is.close();
            }
            String text = writer.toString();
            return text;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:55:02.480

如果你使用它，你将确保路径是正确的。

```
AssetManager assetManager = getAssets();
String quizes[] = assetManager.list("myquizfolder");
for(String quiz : quizes) {
    InputStrem in = assetManager.open("myquizfolder/" + quiz);
} 
```

# linux - Mercurial ACL 防止拉取

> ID：10979355
> 
> 赞同：1
> 
> 时间：2012-06-11T11:40:29.663
> 
> 标签：linux, mercurial, acl

请帮助我了解 Mercurial 与 ACL 相结合的机制。

我们的团队使用 Mercurial 作为版本控制系统。设置非常简单：两个开发人员（一个 linux，一个 windows），远程 repo（linux）。每次，windows 用户**W**签入修改并且 linux 用户**L**想要在之后拉取，都会显示以下错误消息（取决于更改的文件）：

> ```
> pulling from ssh://user@domain.com
> searching for changes
> adding changesets
> transaction abort!
> rollback completed
> abort: stream ended unexpectedly (got 0 bytes, expected 4)
> remote: abort: Permission denied: /repopath/.hg/store/data/paper/tmp.txt.i 
> ```

这是因为文件访问是由 linux 的 ACL 列表处理的。使用命令更正 ACL 权限后`setfacl`，一切运行顺利，**L**能够拉取。即使**W**以正确的权限克隆 repo，目录中的（新的/修改的）文件`.hg`也具有错误的（默认）权限。repo 的父文件夹具有正确的权限集，所以我不知道这些权限是从哪里继承的。

有人遇到过类似的问题吗？先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:23:20.740

在我的 Linux 机器上，我必须为组权限设置粘性位。本质上，当您创建一个将成为您需要使用的 mercurial 存储库的目录时，`chmod g+s <repoDirectory>` 这将强制在该目录下创建的任何内容对组成员具有读/写/执行权限，而不管他们创建文件的默认设置是什么。我使用的是标准的 Unix 组而不是 ACL 列表，所以我不确定这对你会有什么影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:38:26.217

在 .hg/store 中创建新文件时，Mercurial 从`.hg/store`目录本身复制（经典）文件权限并使用写入用户的用户/组，除非被提到的粘性组位（如@Eric Y）覆盖。在修改其中一个文件时，如果您的用户允许，它会保留现有的所有权和权限`umask`。

据我所知，Mercurial 没有对文件系统级别的 ACL 进行特殊处理——几乎没有工具会这样做，这就是为什么 ACL 系统还包括继承规则的原因，其中目录有自己的 ACL，也有`default`由其中新创建的对象继承的 ACL目录 -`default ACL`除了设置其 ACL 之外，您可能还需要考虑设置存储库。

也就是说，您确定您真的要使用 ACL 吗？如果您已经在使用它们并且熟悉它们，那很好，但如果您打破它们只是为了让 2-user-access 在 Mercurial 中工作，那么您将使用专用组（如`developers`）和粘性组位或使用单个共享 ssh 帐户 dev@unixhost，每个帐户都有单独的 ssh 私钥（有关示例，请参见 Mercurial wiki 中的 SharedSSH 页面）。

ACL 非常强大，但很少需要。

**其他读者注意：**我们在这个问题中所说的与 Mercurial 的 ACL 扩展无关——它在 Mercurial 中，这是文件系统 ACL 级别的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T01:19:13.370

只有基于 Debian 的系统（如 Ubuntu）的版本，但您应该查看[mercurial-server](http://www.lshift.net/mercurial-server.html)。它以灵活的方式处理 Mercurial 存储库的访问控制，但在文件系统 ACL 之外。

# magento - 使用 href 切换商店视图

> ID：10979357
> 
> 赞同：0
> 
> 时间：2012-06-11T11:40:30.947
> 
> 标签：magento, view, switch-statement, store

我正在尝试通过 url/href 切换 magento 商店视图。

我创建了一个默认商店视图，其中包含一个加载块的 cms，其中包含一个登录页面，您应该在其中选择您的语言。选择后，它将语言代码附加到 url 并设置 cookie。

[我使用基本 URL http://myshop.dev/en/](http://myshop.dev/en/)创建了第二个商店视图。因此，如果用户选择了“英格兰”，他会被重定向到[http://myshop.dev/en/](http://myshop.dev/en/)，但不会调用英文商店。而是显示消息“没有配置或找到 404 CMS 页面”。

我对magento很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:09:38.593

措辞不是很好，但听起来您只想创建一个商店切换器下拉菜单。

如果是这样，请查看 app/design/frontend/base/default/template/page/switch/languages.phtml 作为示例。

# c# - 获取 LinkedList 的第一个元素

> ID：10979366
> 
> 赞同：3
> 
> 时间：2012-06-11T11:41:11.930
> 
> 标签：c#, linked-list

我是一个初学者程序员，我在 C# 中遇到了这个问题。解决方案可能很简单，但这不是我能决定的。

我有这个继承 LinkedList 的自定义类，我需要一个方法来返回第一个元素并将其从列表中删除。代码：

```
class CustomClass : LinkedList<CustomElement>
{
    public CustomElement getFirstElement(){
        //here is the problem and I don't know how to solve it
        CustomElement ce = this.First;
        this.RemoveFirst();
        return first;
    }
} 
```

问题是`this.First`返回 LinkedListNode。我试过这个：

```
LinkedListNode<CustomElement> first = this.First; 
```

但是随后 return 语句失败，因为方法的类型是`CustomElement`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-11T11:46:05.253

如[文档](http://msdn.microsoft.com/en-us/library/86397t7k.aspx)中所述， 的`Value`属性`LinkedListNode<T>`可用于访问存储在列表项中的值。因此，分配`CustomElement ce = this.First.Value;`.

# asp.net - 如何从多行文本框中删除可拉伸属性？

> ID：10979376
> 
> 赞同：2
> 
> 时间：2012-06-11T11:41:51.293
> 
> 标签：asp.net

我有一个多行文本框。

```
<asp:TextBox ID="tx" runat="server" TextMode="MultiLine"></asp:TextBox> 
```

如何从多行文本框中删除可拉伸属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:21:03.330

你可以通过 CSS 做到这一点：

```
textarea {
resize: none;
} 
```

# iphone - CoreData 连接实体进行排序

> ID：10979377
> 
> 赞同：0
> 
> 时间：2012-06-11T11:41:56.473
> 
> 标签：iphone, ios, sorting, core-data, entity

我在使用 CoreData 对“连接”实体进行排序时遇到问题。我做了一个这样的模型： ![在此处输入图像描述](../Images/6c54350f7c5bed0f8bb8e33c84ad8f4b.png)

逻辑是这样的：实体 A 有一个项目列表。用户可以从 A 中选择一个或多个项目并将它们放在实体 C 中。这很好。但是结果集变得未排序（逻辑上）。所以我实现了一个像这样的“加入”实体 B：

![在此处输入图像描述](../Images/b3317eedef483e267fbe0fe9a0136967.png)

因此，现在可以按实体 B 中的字段日期对结果进行排序，这是实体 A 和 B 之间的一种“连接”。

但在这里我感到困惑。当我在 B 中插入新项目时，是否需要将它们也添加到 C 和 A 中，或者它们会自动与关系一起插入？

**编辑**- 解决方案： ![在此处输入图像描述](../Images/21b1d55c3c947b097d4b4fb53bdbc2bf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:49:41.180

当您调用 CoreData 生成的`addXXXItemsObject`方法之一，或设置一个关系属性（如`b.c = myCInstance;`）时，将为您设置*一个*关系。

因此，您可以通过多种不同的方式设置您的 B 对象。首先建立`c <--> b`关系：

```
b.c = instanceOfC;
// or
[c addBItemsObject:b]; 
```

然后是`b <--> a`关系：

```
b.a = instanceOfA;
// or
[a addBItemsObject:b]; 
```

最简单的可能只是为每个使用第一个版本：

```
 b.c = instanceOfC;
    b.a = instanceOfA; 
```

此外，查看您的屏幕截图，您似乎需要像多对多一样结束您的关系。

**编辑**：编辑了大约 5 次以使其更加连贯。

# php - exec & shell_exec 不能与 vlc -I rc 命令一起使用

> ID：10979380
> 
> 赞同：0
> 
> 时间：2012-06-11T11:42:04.187
> 
> 标签：php, shell, drupal, command-line, vlc

我希望在服务器端录制实时 http 流。我可以通过 ssh 在服务器上进行录制，然后编写 vlc -I rc 命令但是当我在 exec 函数中编写相同的命令时：- exec("vlc -I rc REST_OF_THE_COMMAND"); IT 不起作用，但是 exec("ls -l") & exec("pwd") 有效

所以我的问题是 vlc 命令行不适用于 exec 或 shell_exec 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:53:15.367

请检查此答案（与从 PHP 执行命令有关）。一旦你知道了确切的问题，那么就更容易找到解决方案。

[从 PHP 执行 wkhtmltopdf 失败](https://stackoverflow.com/questions/10631605/executing-wkhtmltopdf-from-php-fails/10670682#10670682)

# c# - 如何加入两个实体并从一个实体中获取唯一行

> ID：10979381
> 
> 赞同：0
> 
> 时间：2012-06-11T11:42:06.333
> 
> 标签：c#, linq, entity-framework

我有 2 个实体`A`，`B`每个实体都有一个字段`Number`，我需要从不存在的实体`A`中获取所有行。`Number``B`

有任何想法吗？需要加盟吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T11:49:42.167

这会奏效吗？

```
 var result = entityA.Where(a => !entityB.Any(b => a.Number == b.Number)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:50:28.947

非常粗糙，但你可以在没有这样的连接的情况下做到这一点

```
var listB = b.Select(o => o.Number).Distinct();

var result = a.Where(o => !listB.Contains(o.Number)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T11:51:43.327

由于您没有提供太多信息，因此很难说。但也许你可以做这样的事情：

```
public class TestEntity
{
    public int Number { get; set; }
    public TestEntity(int num)
    {
        Number = num;
    }
}

public void WriteResult()
{
    List<TestEntity> lstA = new List<TestEntity>();
    List<TestEntity> lstB = new List<TestEntity>();
    for (int i = 0; i < 10; i++)
    {
         lstA.Add(new TestEntity(i));
         lstB.Add(new TestEntity(i+4));
    }

    List<TestEntity> result = lstA.FindAll(teA => !lstB.Any(teB => teA.Number == teB.Number)); //This will give you all entities in lstA that does not have any equals in lstB
    foreach (var item in result)
    {
         Console.WriteLine(item.Number);
    }
} 
```

# actionscript-3 - 如何使用按钮停止 Y 轴上的影片剪辑？

> ID：10979385
> 
> 赞同：0
> 
> 时间：2012-06-11T11:42:21.000
> 
> 标签：actionscript-3, boundary

我有两个按钮可以在 Y 轴上上下移动影片剪辑。如何让影片剪辑停止在某个高度，并且仍然能够向相反方向移动它？

我需要这样工作：

当您按下向下按钮时，影片剪辑会向下移动，但不会超过 Y=500。当您按下向上按钮时，影片剪辑会向上移动，但不会超过 Y=300。

我让movieclip停在正确的点（500），但是当它到达这个点时它被卡住了..所以如果我按下向上按钮它就不会再向上了。

有人能帮助我吗？：）

到目前为止，这是我的代码：

```
1) decrease = the down-button
2) increase = up-button
3) stempel = the movieclip I want to stop on the Y-axis

var moveStempel = 0;

decrease.addEventListener(MouseEvent.MOUSE_DOWN, decreasePressed);  
decrease.addEventListener(MouseEvent.MOUSE_UP, removeEnterFrame);

increase.addEventListener(MouseEvent.MOUSE_DOWN, increasePressed); 
increase.addEventListener(MouseEvent.MOUSE_UP, removeEnterFrame);

function decreasePressed(e:MouseEvent):void  
{   
    moveStempel = 2;
    addEnterFrame();
}

function increasePressed(e:MouseEvent):void  
{   
    moveStempel = -2;
    addEnterFrame();
}

// ADD ENTER FRAME 
function addEnterFrame():void 
{     
    this.addEventListener(Event.ENTER_FRAME, update); 
}  

function removeEnterFrame(e:MouseEvent):void 
{     
    this.removeEventListener(Event.ENTER_FRAME, update); 
}  

function update(e:Event):void 
{     
    if (stempel.y < 500)
    {
        stempel.y += moveStempel;
        trace("inside");
    }

    else if (stempel.y > 500)
    {
        stempel.stop();
        trace("outside");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:49:20.107

在您现在的代码中，一旦`stempel`值`y`大于 500，它将永远无法再次移动。

可以移动的条件有两种`stempel`：向下移动时不能在允许区域的底部，向上移动时不能在允许区域的顶部。

```
if ((stempel.y < 500 && moveStempel == 2) || (stempel.y > 300 && moveStempel == -2))
{
    stempel.y += moveStempel;
    trace("inside");
}
else
{
    stempel.stop();
    trace("outside");
} 
```

# html - html内容的缩放

> ID：10979389
> 
> 赞同：1
> 
> 时间：2012-06-11T11:42:32.777
> 
> 标签：html, css

我正在尝试制作一个 html 文件，我可以在其中设置正文中的内容应该缩放到任何特定值，例如 20%。类似于以下代码（只是一个概念）。是否可以通过 css 或类似方法创建 html 文件缩放，如果请让我知道如何并且它应该与 CHROME 和 MOZILLA 兼容？

```
<body zoom="20%">
CONTENT HERE
</body> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T11:56:14.970

你可以试试`zoomooz.js`插件。

[http://janne.aukia.com/zoomooz/](http://janne.aukia.com/zoomooz/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T11:46:34.193

直到 CSS3 的 CSS 中不支持跨浏览器缩放。您在 IE 中有缩放选项，它可能在其他一些浏览器中也可以使用，但我建议您不要乱用它...

编辑：但是您可以在 IE 和其他浏览器中使用放大

```
transform :scale(0.5); 
```

（带有相应的浏览器前缀）

# c# - 如何从数据表中过滤特定值

> ID：10979391
> 
> 赞同：0
> 
> 时间：2012-06-11T11:42:35.187
> 
> 标签：c#, .net

我的数据表中有五行（包含 AccountId、Name、Email、Address 列），我想根据 AccountId 获取特定行，因为所有五行都有不同的 AccountID。我想根据 AccountID 过滤它。我的意思是我只需要数据表中的一行来根据 AccountId 进行处理。

如何从包含我已传递的 AccountId 的数据表中获取特定行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:46:08.527

三个选项：

*   使用[`DataTable.Select`](http://msdn.microsoft.com/en-us/library/det4aw50), 提供过滤器表达式
*   自己迭代行
*   使用带有数据表扩展的 LINQ

我个人建议使用最后一个选项（LINQ）：

```
var row = table.AsEnumerable()
               .FirstOrDefault(r => r.Field<string>("AccountID") == accountID);
if (row != null)
{
    // Use the row
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:49:00.177

您是否查看过 DataTable.Select() 方法？

[http://msdn.microsoft.com/en-us/library/system.data.datatable.select(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.data.datatable.select(v=vs.100).aspx)

```
public class DataTableExample 
{     
    public static void Main()     
    {         
        //adding up a new datatable         
        DataTable dtEmployee = new DataTable("Employee");            
        //adding up 3 columns to datatable         
        dtEmployee.Columns.Add("ID", typeof(int));         
        dtEmployee.Columns.Add("Name", typeof(string));         
        dtEmployee.Columns.Add("Salary", typeof(double));           
        //adding up rows to the datatable         
        dtEmployee.Rows.Add(52, "Human1", 21000);         
        dtEmployee.Rows.Add(63, "Human2", 22000);         
        dtEmployee.Rows.Add(72, "Human3", 23000);         
        dtEmployee.Rows.Add(110,"Human4", 24000);           
        // sorting the datatable basedon salary in descending order        
        DataRow[] rows= dtEmployee.Select(string.Empty,"Salary desc");           
        //foreach datatable         
        foreach (DataRow row in rows)         
        { 
            Console.WriteLine(row["ID"].ToString() + ":" + row["Name"].ToString() + ":" + row["Salary"].ToString());         
        }           
        Console.ReadLine();     
    }   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T12:03:42.627

数组示例：http: [//msdn.microsoft.com/en-us/library/f6dh4x2h (VS.80).aspx](http://msdn.microsoft.com/en-us/library/f6dh4x2h(VS.80).aspx)

单个对象的示例：http: [//msdn.microsoft.com/en-us/library/ydd48eyk](http://msdn.microsoft.com/en-us/library/ydd48eyk)

只需使用这样的东西：

```
DataTable dt = new DataTable();
DataRow dr = dt.Rows.Find(accntID); 
```

希望这对您有所帮助。

# php - 我无法将 0123 存储在 PHP 变量中

> ID：10979395
> 
> 赞同：1
> 
> 时间：2012-06-11T11:42:54.710
> 
> 标签：php

> **可能重复：**
> [面试题：在php中，是123==0123吗？](https://stackoverflow.com/questions/1412712/interview-question-in-php-is-123-0123)

我是 PHP 新手。我在学习 PHP 时尝试将 0123 存储在 PHP 变量中，但是当我回显该变量时它显示 83 而不是 0123。谁能给我确切的技术原因。

提前致谢， 达瓦尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T11:44:49.933

因为当您应该将其存储为字符串时，您可能试图将其存储为整数。

```
// Incorrect
$var = 0123 // octal number (equivalent to 83 decimal)

// Correct
$var = '0123' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T11:47:04.777

你可能正在做这样的事情

```
$var = 0123; 
```

这是一个整数而不是字符串。旁注：“0123”*不是*`0`数字，因为除了`abs($var)<1`or之外，没有数字有前导`$var == 0`。但是当与整数一起使用时，前导`0`具有特殊含义：它被视为以 8 为底的整数，然后将其转换为以 10 为底的整数

```
 0123_8 = 83_10
1*8^2 + 2*8^1 + 3*8^0 = 8*10^1 + 3*10^0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T11:46:41.363

如果你这样做：

```
$a = 0123; 
```

然后，您确实在使用[八进制数](http://www.php.net/manual/en/language.types.integer.php)`0123 = 83`。

# php - Yii 中的 Ajax 提交

> ID：10979405
> 
> 赞同：2
> 
> 时间：2012-06-11T11:43:33.313
> 
> 标签：php, yii

我正在使用 CActive 表单，之前我有一个普通的提交按钮。然后我将其更改为 Ajax 按钮，如下所示，

```
CHtml::ajaxSubmitButton('Continue',CController::createUrl('//shop/order/create&store=true'),array('type'=>'POST')); 
```

当您刷新页面时，这将转到 url。但我希望它在不刷新页面的情况下进入页面。知道怎么做吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:29:54.460

试试这个，有一些 ajax 成功的功能......

```
echo CHtml::ajaxSubmitButton('BottonLabel',
                             Yii::app()->createUrl('your/url',array('calltype' => 'system')),
                             array('type' => 'POST',
                             'cache' => true or false,
                             'success' => 'js:function(data) {yourJSfunction(data)}'),
                             array('id' => 'the_id')); 
```

[或点击此链接到 yii ajaxSubmitButton](http://www.yiiframework.com/doc/api/1.1/CHtml/#ajaxSubmitButton-detail)的类参考

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:10:48.893

尝试这个..

```
array('contoller_name/action','ajax'=>'somevalue'));
//In your case
echo CHtml::ajaxSubmitButton('Continue',array('contoller_name/action','ajax'=>'yw0')); 
```

请记住，您显然将自动创建的小部件 ID 设置为参数 (yw0)。您应该将自己的 id 分配给小部件，否则另一个小部件可能具有相同的 id 并且可能难以调试..

# javascript - 平滑更改css

> ID：10979409
> 
> 赞同：2
> 
> 时间：2012-06-11T11:44:13.980
> 
> 标签：javascript, jquery, css, smooth

我的情况如下：

我有以下功能

```
var showHideMemberContent = function(){
if(isHidden === false){
    $("#showHideMemberContent").text("Member Content");
    $("#main").css("height","-=187");
    $('#mainBottom').hide('slow', function() {
        isHidden = true;
    });
} else {
    $("#showHideMemberContent").text("Verberg");
    $("#main").css("height","+=187");
    $('#mainBottom').show('slow', function() {
        isHidden = false;
    });
}
}; 
```

因此，当函数执行时，它会隐藏“mainBottom”div。“主” div 应该减少/增加它的高度。它确实如此，但我需要知道是否有办法顺利地做到这一点。

对此表示感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T12:00:06.200

您可以使用 CSS 来实现这一点。只需将此规则添加到您的 CSS 声明中即可`#main`：

```
#main {
    -khtml-transition: height 0.3s ease;
    -moz-transition: height 0.3s ease;
    -ms-transition: height 0.3s ease;
    -o-transition: height 0.3s ease;
    -webkit-transition: height 0.3s ease;
    transition: height 0.3s ease;
} 
```

这里的`height`部分定义了应用转换的属性，`0.3s`定义了从一种状态转换到另一种状态所需的时间，`ease`属性定义了转换的功能。Ease 将缓慢加速到 50% 过渡，然后减速到 100%。

使用 CSS 优于 jQuery 的 animate 函数的优点是 CSS 转换在支持时是硬件加速的，并且会更流畅和更高效。缺点是一些过时的浏览器版本不支持这种效果，但是它会简单地退回到非动画的高度变化，而不是破坏。

要了解有关 CSS 过渡的更多信息，请点击下面的链接到 Mozilla 的文章。它们是此类事情的绝佳参考，也是开始学习甚至复习知识的绝佳场所。我还在下面包含了这种技术的一个示例。

[MDN 关于转换的文章。](https://developer.mozilla.org/en/css/css_transitions "CSS 过渡 - MDN")

[这是一个jsfiddle示例。](http://jsfiddle.net/xnVqP/1/ "编辑这个小提琴 - jsFiddle")

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-11T11:46:04.343

是的，使用 jquerys`animate()`方法，[http:](http://api.jquery.com/animate/) //api.jquery.com/animate/ 。

如果您想使用“线性”或“摆动”以外的缓动类型，请包括 jquery ui。它作为第二个参数（字符串）传递给 animate 方法。[https://jqueryui.com/easing/](https://jqueryui.com/easing/)

示例（加载了 jquery ui）：

```
$(selector).animate({ height: '200px' }, 'easeInOutCubic', function(){ 
    /* animation comlete */ 
}); 
```

另外，努力提高你的接受率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T11:48:13.113

您可以为此使用动画：

```
var oldHeight = $("#main").height();
$("#main").animate({'height', oldHeight + 187}, { duration: 500, queue: false }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T11:48:37.643

如果你想使用 css 和类，而不是样式属性，你可以使用 jquery-ui 的`switchClass()`或`toggleClass()`方法[http://docs.jquery.com/UI/Effects/switchClass](http://docs.jquery.com/UI/Effects/switchClass) http://jqueryui.com/demos/toggleClass/

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T11:51:15.727

使用动画（）...

```
var showHideMemberContent = function(){
if(isHidden === false){
    $("#showHideMemberContent").text("Member Content");
    $("#main").animate({height:-=187}, 300);
    $('#mainBottom').hide('slow', function() {
        isHidden = true;
    });
} else {
    $("#showHideMemberContent").text("Verberg");
    $("#main").animate({height:+=187}, 300);
    $('#mainBottom').show('slow', function() {
        isHidden = false;
    });
}
    }; 
```

# regex - 匹配 cos(0) 或 sqrt(0) 的正则表达式

> ID：10979410
> 
> 赞同：0
> 
> 时间：2012-06-11T11:44:16.077
> 
> 标签：regex

我写这个正则表达式来匹配 cos(0) 或 sqrt(0) 类型的字符串为什么它不起作用

```
re.findall("cos|sqrt\([0-9]+\)",'cos(0)') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T11:53:21.887

啊，你忘了括号

```
(cos|sqrt)\([0-9]+\) 
```

管道在所有运算符中具有最低优先级。在[http://msdn.microsoft.com/en-us/library/ae5bf541.aspx](http://msdn.microsoft.com/en-us/library/ae5bf541.aspx)检查**优先顺序**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:47:06.253

试试这样：

```
re.findall("(cos|sqrt)\([\d]+\)", "cos(0)") 
```

# python - 如何将图标添加到 ubuntu 应用程序

> ID：10979412
> 
> 赞同：8
> 
> 时间：2012-06-11T11:44:21.793
> 
> 标签：python, ubuntu, gtk

我已经在 python 中快速开发了一个用于 ubuntu 的应用程序。我将它打包并且运行良好，但我找不到如何向我的应用程序添加图标，目前它就像一个空白图标。

我用过 Glade 和 gtk。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T14:18:28.500

最好的方法是安装一个“命名图标”。为此，您的安装脚本会将文件复制到特定位置，该位置取决于用户的系统，但通常`<datadir>/icons/hicolor/<size>/app/<app-name.png|svg>`是. 建议的最小图标大小通常是 SVG 格式的可缩放图标和 48x48 像素的 PNG 图标。`datadir``/usr/local/share`

将图标复制到正确的位置后，您可以使用 gtk-`update-icon-cache`命令更新 GTK 的缓存。

当您安装了“命名图标”时，您的应用程序可以通过名称引用它：

```
window = Gtk.Window
window.set_icon_name("myapp") 
```

现在，您需要做的另一件事是安装“destop entry”文件。这些告诉 Ubuntu（或 GNOME 或 KDE 或 Xfce）您的应用程序，以便它可以启动以及它的图标是什么。您根据[桌面条目规范](http://standards.freedesktop.org/desktop-entry-spec/latest/)创建文件并将其复制到`<datadir>/share/applicaions/`文件`.desktop`扩展名。`/usr/share/applications/`您可以在系统上安装的应用程序中查看示例。您还可以使用[桌面条目编辑器](https://github.com/Quixotix/desktop-entry-editor)来创建`.desktop`文件。在桌面文件中，图标也将设置为您的“命名图标”。

所以总而言之，要安装一个命名图标和一个桌面条目，你会看到类似的东西：

```
/usr/local/share/applications/myapp.desktop
/usr/local/share/icons/hicolor/scalable/apps/myapp.svg
/usr/local/share/icons/hicolor/48x48/apps/myapp.png 
```

# osgi - 在运行时获取已安装 OSGI 包的列表

> ID：10979415
> 
> 赞同：1
> 
> 时间：2012-06-11T11:44:31.283
> 
> 标签：osgi, equinox

我的应用程序从属性文件中获取类名。由这些类名表示的类可能驻留在预先未知的某些 OSGI 包中，因此为了实例化它们，我首先必须找到这些类属于哪个包。我正在考虑从 BundleContext#getBundles 获取所有已安装的捆绑包，这意味着我必须在 AbstractUIPlugin#start 中获取对 BundleContext 的引用。但我不确定持有对 BundleContext 的引用是否正确，因为它应该只在 start 方法中使用。因此，我需要 OSGI 专家在这里获得有关获取捆绑列表的替代方案的建议。

任何帮助将不胜感激。

问候，

塞提亚

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T12:29:41.903

这并不是 OSGi 的真正意图。如果一个包有一些东西要添加到“全局”上下文中，你应该注册一个服务。所以每个有东西要共享的包都可以在自己的 start 方法中做到这一点。

然后其他一些组件（DS、ServiceTracker、Blueprint 等）可以监听这些事件，并采取相应的行动。

这非常重要，如果您开始手动搜索所有捆绑包，您将完全失去 OSGi 的优势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T07:02:00.373

您的捆绑包在启动时通过捆绑激活器获得控制权，或者更好的是通过 DS。那时它可以向服务注册表注册服务，以便其他人可以找到/使用它们。

您计划走的路线（命名类的属性）是邪恶的，因为您无疑将在类加载地狱中运行。模块化就是隐藏你的实现细节，你的实现类的名字就是这样的细节。

在属性文件中公开实现类是非常糟糕的做法，它失去了模块化的优势。另一个类是否引用您的实现类或属性文件都没有关系，问题在于 impl. 类暴露。

不幸的是，这种模式在我们的行业中变得如此普遍，以至于许多开发人员认为这是正常的 :-(

OSGi 允许您以只允许在模块内部知道实现类的方式共享接口类型的实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T18:31:27.610

就像之前写的一样，你应该尝试使用服务来实现你想要的。我猜你有一个接口应该可以在运行时安装一个或多个实现。因此，如果您控制实现接口的包，那么只需让它们通过使用 Activator 或蓝图上下文将其实现安装为服务。您可以使用服务属性来描述您的实现。

然后，需要实现的包可以使用服务跟踪器或蓝图中的服务引用来查找服务。

如果这是不可能的，那么您可以使用包上下文来获取正在运行的包并实例化类，但这不是 OSGi 应该工作的方式。您将遇到类加载问题，因为尝试实例化类的包将无法直接访问它们。

# windbg - 强制 WinDbg 加载已卸载模块的符号

> ID：10979418
> 
> 赞同：20
> 
> 时间：2012-06-11T11:44:40.113
> 
> 标签：windbg

我正在调试一个只有 .exe 和 .pdb 没有私有符号的模块。
在调试会话期间，我需要检查一个内部结构。显然，这个结构不会出现在 PDB 中，因为它是私有的 - 但幸运的是，我有一个 .h 文件，其中定义了这个结构。因此，我可以构建一些使用此结构的虚拟模块并获取包含此结构的 PDB 文件。

现在我有一个带有结构符号的卸载模块，我想加载它的符号以便将一些内存转换为该结构。（当然，没有卸载我正在调试的原始 .exe）
问题：WinDbg 似乎只允许为加载的模块加载符号......

我的问题是：**有没有一种简单的方法可以从卸载的模块中加载我的符号？**

我试过了`.reload /i /f MyDll.dll`，但我总是得到`...MyDll.dll - unmatched`。
设置同情没有帮助。

有任何想法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-09-09T07:29:12.370

更好的方法是`.reload /unl MyDll.dll`

卸载的模块列表包含时间戳（用于图像/pdb 匹配）和图像基地址。Using`/unl`告诉 WinDBG 使用该信息。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-06-12T20:04:30.983

您可以强制 windbg 在特定地址加载符号，例如

```
0:000> .reload /f /i MyDll.dll=77777777
    c:\sym\MyDll.pdb - unmatched
0:000> lm
start             end                 module name
00000000`55555555 00000000`55555555   notepad    (no symbols)
00000000`77530000 00000000`7762a000   USER32     (deferred)
00000000`77777777 00000000`77777777   MyDll_77777777   (private pdb symbols)  c:\sym\MyDll.pdb 
```

这里的不匹配警告是因为 windbg 无法判断符号与模块的正确版本匹配，因为它找不到时间戳或校验和。

# php - 理解 OOP 并扩展父类，同时继承其由内部逻辑设置的属性

> ID：10979422
> 
> 赞同：1
> 
> 时间：2012-06-11T11:44:57.790
> 
> 标签：php, oop

我一直在修补 OOP 并了解如何去做。我有父类可以做一些事情并将值设置为它自己的属性。然后我想创建一个扩展父类的子类，同时“以某种方式”访问动态修改的属性。我想知道这是否可以通过某种代理来完成。我还在学习，所以我不能 100% 确定这里的 OOP 策略。

```
class Parent
{
    public $test;

    public function boot()
    {
        // boot stuff
        $this->internalStuff();
    }

    public function internalStuff()
    {
        $this->test = 'World!';
        $c = new Child();
        $c->cTest();
    }
}

$p = new Parent;
$p->boot();

class Child extends Parent
{
     public function __construct()
     {}

     public function cTest()
     {
         echo 'Hello ' . $this->test;
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:52:31.380

继承（类之间的父/子关系）仅扩展到类定义。即一个类有哪些方法和属性。它只定义了一个类的“蓝图”。实际*值*分配给类的*对象实例*。您不能修改实例化对象的继承。一个对象也不会神奇地接管另一个对象的值，无论它们的父/子关系如何。

所以不，它只是不那样工作。如果您希望一个`Child`对象具有某些值，您需要将它们分配给该对象的一个​​实例。无论您对另一个类的完全不同的对象实例做什么都没有关系。

# c# - 根据条件从列表中删除项目

> ID：10979426
> 
> 赞同：0
> 
> 时间：2012-06-11T11:45:04.057
> 
> 标签：c#, c#-4.0, c#-3.0

下面是我班的代码。该代码创建一个 ArrayList。然后它向 ArrayList 添加一些“PipesList”，在每个列表中添加管道。

我想编写一个方法 -RemoveTheSmallPipes 来摆脱所有长度小于 19 的管道。为此，我编写了一段我不知道是否有效的代码！由于代码引发错误：

> 编译器错误消息：CS0050：不一致的可访问性：返回类型“System.Collections.Generic.List”比方法“Program.RemoveTheSmallPipes(System.Collections.Generic.List)”更难访问

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

/// <summary>
/// Summary description for Class1
/// </summary>

   public class Program
    {
        static void Main(string[] args)
        {
            List<PipesList> lstPipeTypes = new List<PipesList>();

        lstPipeTypes.Add(new PipesList("PVC Pipes"));
        lstPipeTypes[0].Pipes.Add(new Pipe("The blue pipe", 12));
        lstPipeTypes[0].Pipes.Add(new Pipe("The red pipe", 15));
        lstPipeTypes[0].Pipes.Add(new Pipe("The silver pipe", 6));
        lstPipeTypes[0].Pipes.Add(new Pipe("The green pipe", 52));

        lstPipeTypes.Add(new PipesList("Iron Pipes"));
        lstPipeTypes[1].Pipes.Add(new Pipe("The gold pipe", 9));
        lstPipeTypes[1].Pipes.Add(new Pipe("The orange pipe", 115));
        lstPipeTypes[1].Pipes.Add(new Pipe("The pink pipe", 1));

        lstPipeTypes.Add(new PipesList("Chrome Pipes"));
        lstPipeTypes[2].Pipes.Add(new Pipe("The grey pipe", 12));
        lstPipeTypes[2].Pipes.Add(new Pipe("The black pipe", 15));
        lstPipeTypes[2].Pipes.Add(new Pipe("The white pipe", 19));
        lstPipeTypes[2].Pipes.Add(new Pipe("The brown pipe", 60));
        lstPipeTypes[2].Pipes.Add(new Pipe("The peach pipe", 16));

        lstPipeTypes = RemoveTheSmallPipes(lstPipeTypes);

        foreach (var pipeList in lstPipeTypes)
        {
            Console.WriteLine("PipesList: {0}", pipeList.pipeType);

            foreach (var pipe in pipeList.Pipes)
            {
                Console.WriteLine("{0}, length: {1}", pipe.name, pipe.length);
            }
            Console.WriteLine();
        }

        Console.WriteLine("Done, press return to exit");
        Console.ReadLine();
    }

    public static List<PipesList> RemoveTheSmallPipes(List<PipesList> lstPipeTypes)
    {

        //Place your code in here
        //It should remove all pipes that have lengths lower than 19.

        foreach (var pipeList in lstPipeTypes)
        {

            foreach (var pipe in pipeList.Pipes)
            {

                    lstPipeTypes.RemoveAll(i => pipe.length < 19);

            }

        }

        return lstPipeTypes;

    }
}

class PipesList
{
    public string pipeType;
    public List<Pipe> Pipes;

    public PipesList(string newBoxType)
    {
        pipeType = newBoxType;
        Pipes = new List<Pipe>();
    }
}

class Pipe
{
    public string name;
    public float length;

    public Pipe(string newName, float newLength)
    {
        this.name = newName;
        this.length = newLength;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T11:47:46.530

您的`PipesList`类是`internal`，因此它仅对同一程序集中的其他代码可见。您的`RemoveTheSmallPipes`方法是*public*`PipesList` ，但在其签名中引用。这是不允许的。

要么将`RemoveTheSmallPipes`方法设为内部，要么`PipesList`公开。

顺便说一句，您的实现也有些奇怪。不清楚为什么会有两个级别的循环*和*一个`RemoveAll`调用，但是您没有在 lambda 表达式`i`的主体中使用 lambda 表达式参数 ( ) 的事实非常可疑。目前尚不清楚您要做什么，但我认为您的代码目前没有达到您的预期......

编辑：根据你的描述，我怀疑身体应该是这样的：

```
foreach (var pipeList in lstPipeTypes)
{
    pipeList.Pipes.RemoveAll(pipe => pipe.length < 19);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:48:23.893

您的 Pipe 和 PipesList 类不是公共的，而是由公共方法返回的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T11:49:12.540

类 PipesList 是内部的（默认情况下），但 RemoveTheSmallPipes() 是公共的。

要么将类 PipesList 公开，要么将 RemoveTheSmallPipes() 设为内部。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T11:50:32.053

1.  编译器显示以下错误：

    “不一致的可访问性：返回类型`System.Collections.Generic.List`比方法更难访问`Program.RemoveTheSmallPipes(System.Collections.Generic.List)`”

    这是指各个类型的可见性：您的返回类型`List<PipesList>`是*内部*的（因为泛型参数`PipesList`是*内部*的），但您的方法是*公共*的（即比*内部*更明显）。使您的方法*internal*，然后此编译器错误消息应该消失。

2.  您的`RemoveTheSmallPipes`方法可能会引发异常；您不应该在迭代它们时更改集合。

# visual-studio-2010 - 在服务器资源管理器中连接到 SQL Azure 返回错误“未知属性 PrimaryFilePath”

> ID：10979427
> 
> 赞同：0
> 
> 时间：2012-06-11T11:45:06.240
> 
> 标签：visual-studio-2010, azure-sql-database

在 VS 2010（使用 Azure SDK）的服务器资源管理器中添加新的数据连接时，我可以成功地“测试连接”，但是在添加它时，我得到了这个警告框：

```
Unable to add data connection.
Failed to retrieve data for this request.
unknown property PrimaryFilePath 
```

（Azure SQL 服务器，即 xxxxxxxx.database.windows.net）

以前有人经历过吗？

谢谢！

**编辑：这似乎与整理有关......**

...当使用 SQL_Latin1_General_CP1_CI_AS 它工作正常但以下不起作用：

*   芬兰语_瑞典语_CS_AS
*   Finnish_Swedish_100_CI_AS
*   芬兰语_瑞典语_CI_AS

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-27T12:19:07.707

我在 VS 2015 中使用 SSDT 时遇到了同样的问题。我在“更改数据源”窗口中将数据提供程序更改为“用于 OLE DB 的 .NET Framework 数据提供程序”，它工作正常。 [![在此处输入图像描述](../Images/da7cc9269b39459cd706f8dae92bdceb.png)](https://i.stack.imgur.com/UJVgl.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T16:04:29.503

SQL Azure 数据库中字符数据的默认排序规则是 SQL_Latin1_General_CP1_CI_AS。服务器和数据库级别的排序规则在 SQL Azure 中是不可配置的。**但是，您可以在列和表达式级别使用您选择的排序规则。**

我相信您的问题在此博客中有所描述：[Working With Collat​​ions In SQL Azure](https://azure.microsoft.com/en-us/blog/working-with-collations-in-sql-azure/)。

这篇博客文章将向您展示如何。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-19T08:35:49.923

尝试从 VS 2015 连接到 Azure DB 时出现错误“未知属性 PrimaryFilePath”，但从 **VS 2019**连接时成功。

# asp.net-mvc-3 - 从 Post 方法返回视图

> ID：10979432
> 
> 赞同：0
> 
> 时间：2012-06-11T11:45:29.940
> 
> 标签：asp.net-mvc-3

我有这个发布方法：

```
 [HttpPost]
    [ValidateAntiForgeryToken]
    public ActionResult Invitations(SuperInvitationsEditModel model)
    {
        ...

        var newmodel = new SuperInvitationsEditModel();

        if (hasErrors)
        {
            SuperInvitationsErrorModel newErrorModel = new SuperInvitationsErrorModel();
            newErrorModel.Errors = model.Errors;
            return View(newErrorModel);
        }

        return View(newmodel);
        } 
```

当 if(hasErrors) 中的此代码执行时，我收到此错误。

```
The model item passed into the dictionary is of type 'MyProject.Models.SuperInvitationsErrorModel', but this dictionary requires a model item of type 'MyProject.Models.SuperInvitationsEditModel'. 
```

我想我可以做到这一点，因为该方法的返回值是一个通用的 ActionResult。谁能告诉我为什么这不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T11:55:09.070

因为您当前的视图是强类型的。将代码更改为

```
 return View("yourviewname",newErrorModel); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T11:54:03.390

*它与将ViewResult*转换为*ActionResult*无关。问题是，您拥有需要类型模型的强类型视图`SuperInvitationsEditModel`（请参阅*Invitations.cshtml*`@model`顶部），但您正在将类型模型传递给它。*`SuperInvitationsErrorModel`*

 *您应该将两个视图模型类（*SuperInvitationsEditModel*和*SuperInvitationsErrorModel*）合并为一个，或者为它们中的每一个创建一个独立的视图。*

# algorithm - 给定大量街道名称，测试文本是否包含该集合中的一个街道名称的最有效方法是什么？

> ID：10979434
> 
> 赞同：1
> 
> 时间：2012-06-11T11:45:42.050
> 
> 标签：algorithm, nlp

我有一个有趣的问题需要帮助。我目前正在研究我的程序的一个功能并偶然发现了这个问题

1.  我有一个巨大的印度尼西亚街道名称列表（> 100k 行）存储在数据库中，每个街道名称可能有超过 1 个单词。例如：“Sudirman”、“Gatot Subroto”或“Jalan Asia Afrika”都是合法的街道名称

2.  在数据库中有一堆文本（> 100 万行），我将它们分成句子。现在，我需要做的功能（确切地说是功能）是测试句子中是否有街道名称，所以只是一个真/假测试

    我试图通过执行以下步骤来解决它：

一个。将街道名称放入 Key,Value Hash

湾。将每个句子分成单词

C。测试单词是否在哈希中

这很快，但不适用于多个单词

我想到的另一种选择是执行以下步骤：

一个。将每个句子分成单词

湾。使用 LIKE 语句查询数据库（即 SELECT #### FROM street_table WHERE name like '%word%' ）

C。如果查询返回一行，则表示该句子包含街道名称

现在，这个解决方案将是一个非常密集的 IO。

所以我的问题是“做这个测试最有效的方法是什么”？与编程语言无关。我主要在 python 中执行此操作，但只要我能掌握概念，任何语言都可以

============编辑1 =================

这会是定期的吗？

是的，我会以 1 分钟的间隔调用这个特性/功能。每个调用至少需要 100 行文本，并根据街道名称数据库对其进行测试

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:00:21.083

一个简单的解决方案是使用第一个街道名称=>完整街道名称创建字典/多重映射。当您迭代句子中的每个单词时，您将查找潜在的街道名称，并检查您是否有匹配项（通过查看下一个单词）。

该算法应该相当容易实现，并且性能也应该相当不错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T11:53:10.787

使用 nlp，您可以确定句子中的专有名词。请参考以下链接。

[http://nlp.stanford.edu/software/lex-parser.shtml](http://nlp.stanford.edu/software/lex-parser.shtml)

斯坦福解析器的计算是准确的。一旦你有了专有名词，你就可以决定要遵循的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T11:51:42.227

因此，您有一个文档并想要搜索它是否包含您的任何街道名称列表？

Turbo Boyer-Moore 是一个很好的起点。

[这是有关涡轮增压器摩尔的更多信息](http://en.wikipedia.org/wiki/Turbo_Boyer%E2%80%93Moore_algorithm)

但是，我坚信，您将不得不对街道名称列表的组织做一些事情。应该有一些桶访问它，即您可以轻松过滤街道名称：

这里是一个例子：街道名称：Asia-Pacific-street

您可以通过以下方式访问您的列表： A（获取所有以 A 开头的起点） AS（获取所有以 AS 开头的起点）

等等...

我相信你应该有很多桶，至少 26（第一个字母）* 26（第二个字母）

[有关分桶的更多信息](http://en.wikipedia.org/wiki/Bucket_sort)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T22:09:00.627

Aho-Corasick 算法可能非常有用。它的优点之一是它的运行时间与您正在搜索的单词数量无关（仅与您搜索的文本时间无关）。如果您的街道名称列表不经常更改，它将特别有用。

[http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm](http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)

# c - linux 在哪里存储我的系统日志？

> ID：10979435
> 
> 赞同：87
> 
> 时间：2012-06-11T11:45:41.970
> 
> 标签：c, linux, logging

我编写了一个简单的测试应用程序来在日志文件中记录一些内容。我正在使用**linux mint**，在应用程序执行后，我尝试使用以下命令查看日志：

```
tail -n 100 /var/log/messages 
```

但文件消息不存在，既不测试也不存在。您可以在下面找到我的代码。也许我做错了什么，文件没有存储在那里，或者我需要在 linux mint 中启用登录。

```
#include <stdio.h>
#include <stdlib.h>
#include <syslog.h>

void init_log()
{
    setlogmask(LOG_UPTO(LOG_NOTICE));
    openlog("testd",LOG_CONS | LOG_PID | LOG_NDELAY, LOG_LOCAL1);
}

int main(void) {

    init_log();
    printf("Session started!");
    syslog(LOG_NOTICE, "Session started!!");
    closelog();

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-06-11T12:06:01.470

在我的 Ubuntu 机器上，我可以在`/var/log/syslog`.

在 RHEL/CentOS 机器上，输出位于`/var/log/messages`.

这是由`rsyslog`服务控制的，因此如果由于某种原因禁用它，您可能需要使用`systemctl start rsyslog`.

正如其他人所指出的，您的`syslog()`输出将由`/var/log/syslog`文件记录。
您可以在 中查看系统、用户和其他日志`/var/log`。

有关更多详细信息：这是一个[有趣的链接](http://www.cyberciti.biz/faq/linux-log-files-location-and-how-do-i-view-logs-files/)。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-11T12:01:14.560

除了接受的答案之外，了解以下内容很有用......

这些功能中的每一个都应该有与之关联的*手册页。*

如果您运行`man -k syslog`（手册页的关键字搜索），您将获得参考或关于**syslog的手册页列表**

```
$ man -k syslog
logger (1)           - a shell command interface to the syslog(3) system l...
rsyslog.conf (5)     - rsyslogd(8) configuration file
rsyslogd (8)         - reliable and extended syslogd
syslog (2)           - read and/or clear kernel message ring buffer; set c...
syslog (3)           - send messages to the system logger
vsyslog (3)          - send messages to the system logger 
```

您需要了解手册部分才能进一步深入研究。

这是 man 手册页的摘录，它解释了手册页部分：

```
The table below shows the section numbers of the manual followed  by
the types of pages they contain.

   1   Executable programs or shell commands
   2   System calls (functions provided by the kernel)
   3   Library calls (functions within program libraries)
   4   Special files (usually found in /dev)
   5   File formats and conventions eg /etc/passwd
   6   Games
   7   Miscellaneous  (including  macro  packages and conven‐
       tions), e.g. man(7), groff(7)
   8   System administration commands (usually only for root)
   9   Kernel routines [Non standard] 
```

阅读上面的运行

```
$man man 
```

因此，如果您运行，您将获得您在代码中调用的函数`man 3 syslog`的完整手册页。`syslog`

```
SYSLOG(3)                Linux Programmer's Manual                SYSLOG(3)

NAME
   closelog,  openlog,  syslog,  vsyslog  - send messages to the system
   logger

SYNOPSIS
   #include <syslog.h>

   void openlog(const char *ident, int option, int facility);
   void syslog(int priority, const char *format, ...);
   void closelog(void);

   #include <stdarg.h>

   void vsyslog(int priority, const char *format, va_list ap); 
```

不是一个直接的答案，但希望你会发现这很有用。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-06-11T12:00:51.443

默认日志位置 (rhel) 是

一般讯息：

```
/var/log/messages 
```

身份验证消息：

```
/var/log/secure 
```

邮件事件：

```
/var/log/maillog 
```

检查您的`/etc/syslog.conf`或`/etc/syslog-ng.conf`（这取决于您安装了哪个系统日志工具）

例子：

```
$ cat /etc/syslog.conf
# Log anything (except mail) of level info or higher.
# Don't log private authentication messages!
*.info;mail.none;authpriv.none         /var/log/messages

# The authpriv file has restricted access.
authpriv.*                             /var/log/secure

# Log all the mail messages in one place.
mail.*                                 /var/log/maillog

#For a start, use this simplified approach.
*.*                                     /var/log/messages 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-07-09T14:13:09.963

您必须告诉系统要记录哪些信息以及将信息放在哪里。在`/etc/rsyslog.conf`文件中配置日志记录，然后重新启动 rsyslog 以加载新配置。默认的日志记录规则通常在一个`/etc/rsyslog.d/50-default.conf`文件中。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-11T11:57:08.273

syslog() 生成一条日志消息，该消息将由 syslogd 分发。

配置 syslogd 的文件是 /etc/syslog.conf。该文件将告诉您记录消息的位置。

如何更改此文件中的选项？你去 [http://www.bo.infn.it/alice/alice-doc/mll-doc/duix/admgde/node74.html](http://www.bo.infn.it/alice/alice-doc/mll-doc/duix/admgde/node74.html)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-06-11T13:04:13.193

日志在 Linux 中是非常可配置的，您可能想查看您的`/etc/syslog.conf`（或可能在 下`/etc/rsyslog.d/`）。详细信息取决于日志记录子系统和分布。

还要查看下的文件`/var/log/`（并且可能运行`dmesg`内核日志）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-12-03T23:36:10.217

我在 WSL（Linux 的 Windows 子系统）下运行 Ubuntu，`systemctl start rsyslog`但对我不起作用。

所以我做的是这样的：

```
$ service rsyslog start 
```

现在`syslog`文件将出现在`/var/log/`

# java - 如何在发送前使用 gzip 压缩 Web 服务中的消息？

> ID：10979438
> 
> 赞同：0
> 
> 时间：2012-06-11T11:45:49.073
> 
> 标签：java, xml, web-services, gzip, wss4j

我知道Java编。但是，我是 Java EE 和 Web 服务、soap 等方面的完整初学者。我需要在发送之前压缩消息并使用 Apache wss4j 为其添加签名。我按照 Netbeans 网站上的教程创建了一个 Web 服务和一个使用相应服务的 Web 服务客户端。（一个数字添加服务和一个客户端）我正在阅读官方 Java EE 文档，但我无法理解和写一些东西。我正在搜索示例代码和项目，但找不到相关代码或无法理解我找到的代码。

这些是我找到的：

*   [http://www.devx.com/Java/Article/28816/1954](http://www.devx.com/Java/Article/28816/1954)
*   [http://ws.apache.org/wss4j/xref-test/org/apache/ws/security/message/SignatureTest.html](http://ws.apache.org/wss4j/xref-test/org/apache/ws/security/message/SignatureTest.html)

但是在我的项目中在哪里添加这些代码。如何添加签名和压缩？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T05:21:02.480

您可以使用 java.util.zip pkg 中的 GZip。

```
java.util.zip.GZIPInputStream;
java.util.zip.GZIPOutputStream; 
```

要压缩和解压缩，您需要使用`org.apache.axis.encoding.Base64`编码和解码。

# asp.net - 导出 PhoneGap 的 ASP.NET MVC 应用程序源代码

> ID：10979442
> 
> 赞同：9
> 
> 时间：2012-06-11T11:46:01.880
> 
> 标签：asp.net, asp.net-mvc, cordova, code-generation, html-generation

我和我的团队目前正在使用 ASP.NET MVC 4、HTML5 和 PhoneGap 开发适用于 Android 和 iOS 的应用程序。开发工作非常好；然而，一个问题仍未得到解答：**从我们的 MVC 解决方案****生成 PhoneGap 需要的三个文件**（一个 HTML 页面、一个 JavaScript 文件和一个 CSS 样式表）的推荐方法是什么？

 **你会推荐使用基于 Razor 模板的方法吗？或者您会在每次构建后简单地自动复制输出的 HTML 源代码？或者你会建议完全不同的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T13:45:57.830

今天早上，我们决定让 ASP.NET MVC 呈现一个视图，其中包含我们应用程序的所有 HTML，它引用了几个 JavaScript 文件和 CSS 样式表。然后我们自动抓取呈现的 HTML 源并将其复制`index.html`到本地机器上的某个导出文件夹中。该文件夹已准备好部署，因为它仅包含一个 HTML 文件和额外的 JavaScript 和 CSS 资源——这正是 PhoneGap 所期望的。**

# mysql - 从 MySQL 存储过程返回异常

> ID：10979443
> 
> 赞同：3
> 
> 时间：2012-06-11T11:46:02.370
> 
> 标签：mysql, stored-procedures, exception-handling

我在我的存储过程中使用以下异常处理程序。

```
DECLARE EXIT HANDLER FOR SQLEXCEPTION

Begin
      DROP TABLE temp_checkForDuplicate;
      SET outDone = -1;
End; 
```

在这里，我找到了一些特定的代码

> 异常“1062”
> 
> DECLARE EXIT handler for 1062 set o_error_status := "Duplicate entry in table";

如果我不知道异常编号怎么办：如何处理任何异常并抛出其编号及其消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:38:01.060

在 5.5 之前的 MySQL 版本中，您不能真正做到这一点。

5.5 版引入了信号，它提供了一种返回特定错误代码或条件的机制。

[http://dev.mysql.com/doc/refman/5.5/en/signal.html](http://dev.mysql.com/doc/refman/5.5/en/signal.html)

5.6 版添加了“获取诊断”，它提供了您需要的信息。

[http://dev.mysql.com/doc/refman/5.6/en/get-diagnostics.html](http://dev.mysql.com/doc/refman/5.6/en/get-diagnostics.html)

您还可以在这些 SO Questions 中找到相关信息。

[MySQL 存储过程错误处理](https://stackoverflow.com/questions/7764887/mysql-stored-procedure-error-handling)

[如何在 MySQL 函数中引发错误](https://stackoverflow.com/questions/465727/raise-error-within-mysql-function)

# tfsbuild - xcopy 在 TFS 构建服务器上失败

> ID：10979445
> 
> 赞同：1
> 
> 时间：2012-06-11T11:46:04.980
> 
> 标签：tfsbuild, xcopy

我有以下命令在构建后构建事件后执行：

```
xcopy /Y  $(TargetPath) $(SolutionDir)Binaries 
```

这在我的电脑上运行良好。但是当我将它签入到带有门控构建的 TFS 时，它以未指定的错误结束。在构建服务器上执行的命令是：

```
 xcopy /Y  "C:\Builds\1\MyProject\MyProject Gated Check-in\Binaries\Common.dll" "C:\Builds\1\MyProject\MyProject Gated Check-in\Sources\MyProject\Binaries" 
```

当我从命令行在构建服务器上运行此命令时，它工作正常。

你能告诉我这有什么问题吗？

谢谢

# c# - 可压缩的可保存图像库？

> ID：10979450
> 
> 赞同：4
> 
> 时间：2012-06-11T11:46:11.353
> 
> 标签：c#, image, compression, image-compression, imagelibrary

这可能是不可能的，或者更确切地说，不是很受欢迎，但我想知道如何为图像创建一个数据文件，实际上会压缩它们？假设我总共有 200MB 的图像文件，是否有一些系统可以将它们存储在一个文件中，将它们压缩到总大小为 150MB？（只是示例数字，比率并不重要）。

我知道我可以对图像进行编码`Base64`，然后将它们存储在`SQLite`数据库中，但我读到以编码形式存储图像实际上会导致比原始图像文件本身稍大的大小。

我也在考虑一个`ZIP`文件，但我不确定它是否可以用作“库”？

如果这样的东西不作为预定义的课程存在，有人可以带领我走上正确的道路吗？

这是对我正在寻找的东西的模拟：

```
class ImageLibrary {
  //this is where the code would go for the library?
}

class MyProgram{
  public MyProgram() 
  {
    ImageLibrary library = new ImageLibrary();
    library.Add(<Image object here, with an ID of sorts>);
    library.Add(<Another image object here, also with an ID>);
    Load += new FormLoadEventHandler(MyProgram_Load);
  }

  void MyProgram_Load(object sender, EventArgs e)
  {
    PictureBox.Image = library.Get(<image id here>);
  }
} 
```

我希望这是可能的。否则，我将忍受稍大的文件大小并对`Base64`它们进行编码。但是，因为目前我有将近 500 张图像要存储，所以节省的 KB 就是赚取的 KB。:) 另外，请不要评判我的代码示例的质量，这只是一个模型，我是即兴创作的。

干杯，并提前谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T12:00:06.337

如果将图像保存为二进制文件会有所帮助，这是我用来将它们转换为二进制然后保存到 SQLite 中的代码：

```
public byte[] ImageToByte(Image image, System.Drawing.Imaging.ImageFormat format){
        using (MemoryStream ms = new MemoryStream())
        {
            // Convert Image to byte[]
            image.Save(ms, format);
            byte[] imageBytes = ms.ToArray();
            return imageBytes;
        }
    }
    public Image ByteToImage(byte[] imageBytes)
    {
        // Convert byte[] to Image
        MemoryStream ms = new MemoryStream(imageBytes, 0, imageBytes.Length);
        ms.Write(imageBytes, 0, imageBytes.Length);
        Image image = new Bitmap(ms); 
        return image;
    } 
```

然后保存二进制文件：

```
void SaveImage(byte[] image){
        string conStringDatosUsuarios = @" Data Source = \Program Files\GPS___CAM\Data\DatosUsuarios.s3db ";            
        SQLiteConnection con = new SQLiteConnection(conStringDatosUsuarios); 
        SQLiteCommand cmd = con.CreateCommand();
        cmd.CommandText = String.Format("INSERT INTO Users (Foto) VALUES (@0);");
        SQLiteParameter p = new SQLiteParameter("@0", System.Data.DbType.Binary);
        p.Value = image;
        cmd.Parameters.Add(p);            
        con.Open(); 
        try
        {
            cmd.ExecuteNonQuery();
        }
        catch (Exception exc1)
        {
            MessageBox.Show(exc1.Message);
        }
        con.Close();
    } 
```

希望能帮助到你

**编辑**如您所问，我正在使用加载图像代码进行更新：（要将字节转换为图像，您必须使用该`ByteToImage`函数）

```
void LoadImage(string tag){
        string query = "SELECT Foto FROM Users;";
        string conString = @" conection to your database ";
        SQLiteConnection con = new SQLiteConnection(conString); 
        SQLiteCommand cmd = new SQLiteCommand(query, con);            
        con.Open();
        try
        {
            SQLiteDataReader rdr = cmd.ExecuteReader();
            try
            {
                while (rdr.Read())
                {
                    pictureBox1.Image = ByteToImage((System.Byte[])rdr[0]);
                }
            }
            catch (Exception exc) { MessageBox.Show(exc.Message); }
        }
        catch (Exception ex) { MessageBox.Show(ex.Message); }
        con.Close();
    } 
```

**编辑 2**试试这个看看你要加载哪种类型的数据：

```
System.Type checkType = rdr[0].GetType();
pictureBox1.Image = ByteToImage((System.Byte[])rdr[0]); 
```

在代码中添加第一行并在该行中放置一个断点。检查 checkType 的类型。可能它不是二进制的。让我知道结果来帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T11:53:10.100

查看这篇文章：http: [//msdn.microsoft.com/en-us/library/aa479502.aspx](http://msdn.microsoft.com/en-us/library/aa479502.aspx)

我希望它有所帮助。从 ZIP 访问文件的想法。它不是现成的解决方案，而是一个很好的概念解释。

# c# - 找不到格式错误

> ID：10979452
> 
> 赞同：0
> 
> 时间：2012-06-11T11:46:22.783
> 
> 标签：c#, json, google-chrome

这有什么问题：

```
String json = "{ \"id\" : \"1\",\"method\" : \"Page.navigate\",\"params\" : { \"url\" : \"http://gmail.com\" }}"; 
```

**更新**：

我正在尝试使用 google chrome 远程调试功能。我必须以 Json 格式发送消息，该行就是我要发送的内容，这是我得到的错误：

{"error":{"code":-32700,"message":"解析错误。","data":["消息应该是 JSON 格式。"]},"id":null}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:30:16.583

我在 C# 中遇到的关于 JSON 字符串的许多问题都是由于转义字符的格式不正确，为了安全起见，我这样做：

```
String json = @"{ \"id\" : \"1\",\"method\" : \"Page.navigate\",\"params\" : [{ \"url\" : \"http://gmail.com\" }]}"; 
```

这可能无法解决你所有的问题，但它对我帮助很大。

此外，在使用 JSON 时，我发现使用 fiddler2 有助于捕获数据包并查看您在该级别做错了什么。你可以从[这里](http://www.fiddler2.com/fiddler2/)得到它。您还可以使用 Fiddler2 的“Composer”功能在不使用 MVS 的情况下测试 JSON 帖子，如果您需要有关如何使用它的更多信息，请告诉我。希望这可以帮助。

# iphone - 正则表达式只允许字符串和数字

> ID：10979453
> 
> 赞同：0
> 
> 时间：2012-06-11T11:46:24.793
> 
> 标签：iphone, objective-c, xcode, ipad

我正在制作模式来检查用户只能输入数字和字符串。请任何人都可以帮助我或提供一些参考。以下是我的代码。提前谢谢。

```
NSString *regEx =
     @"(?:[a-z0-9!#$%\\&'*+/=?\\^_`{|}~-]+(?:\\.[a-z0-9!#$%\\&'*+/=?\\^_`{|}"
     @"~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\"
     @"x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-"
     @"z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5"
     @"]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-"
     @"9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21"
     @"-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])";

NSString *strRoadworthyGet=@"vinod123";
NSPredicate *matchPattern =[NSPredicate predicateWithFormat:@"SELF MATCHES %@",regEx];
BOOL resultMatch =[matchPattern evaluateWithObject:strRoadworthyGet];

if(!resultMatch)
  NSLog(@"invalid pattern"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T12:02:08.553

您可以使用 NSCharacterSet 的[字母数字](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nscharacterset_Class/Reference/Reference.html#//apple_ref/occ/clm/NSCharacterSet/alphanumericCharacterSet)方法返回对字母、标记和数字的检查。

如果你想使用正则表达式，你可以使用

```
NSString *regEx = @"^[a-zA-Z0-9]*$"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T12:02:24.737

[定义合法输入字符](http://blogs.oreilly.com/iphone/2009/01/defining-legal-input-character.html)

# r - 转换冗余频率的数据帧

> ID：10979457
> 
> 赞同：0
> 
> 时间：2012-06-11T11:46:36.120
> 
> 标签：r, lapply

我有一个这样的data.frame：

```
category count
A        11
B        1
C        45
A        1003
D        20
B        207
E        634
E        40
A        42
A        7
B        44
B        12 
```

每行代表一个具有类别类型和该元素计数的特定元素。我想生成每个类别的计数频率分布，但这些类别目前是多余的。

如何检索冗余类别计数表？即我想要一个看起来像这样的表：

```
category count
A        11234
B        4005
C        100023
D        65567
E        54654
...      ... 
```

我几乎使用 lapply 到达那里：

```
df.nrcounts <- lapply(unique(df.counts$category), 
  function(x) c(category=x, count=sum(subset(df.counts, category==x)$count))) 
```

但我似乎无法将输出强制转换为正确的数据帧。我无法完全理解使用该功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:56:16.200

```
aggregate(df.counts$count,by=list(df.counts$category),FUN=sum) 
```

或者

```
library(data.table)
setDT(df.counts)[, list(count=sum(count)), by = category] 
```

# jquery - 如何更改jquery中动态创建的html单选按钮的属性？

> ID：10979461
> 
> 赞同：0
> 
> 时间：2012-06-11T11:46:52.937
> 
> 标签：jquery

我正在尝试使用 jquery 更改 asp.net 中动态创建的 html 单选按钮的选中属性。我尝试了不同的方法，但我无法更改属性。

我的aspx页面和文件后面的代码如下，

```
 <%@ Page Title="" Language="C#" MasterPageFile="~/FormMaster.master" AutoEventWireup="true"
    CodeFile="ArabiaHRLetterSurveyForm.aspx.cs" Inherits="HRLetter_Arabia_ArabiaHRLetterSurveyForm" %>

<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" runat="Server">
    <div class="latest" style="width: 98%; margin-removed 10px; margin-removed 10px">
        <span class="corner-left"><span class="corner-right">
            <div class="actions">
                <a href="#" class="status" id="lnkHistory" style="color: #fff">History</a></div>
            HR Letter Survey Form </span></span>
    </div>
    <div style="width: 98%; margin-removed 10px; margin-removed 10px;">
        <div>
            <table cellpadding="0" cellspacing="0" width="100%" class="tableClass">
                <tr class="trClass" align="right">
                    <th class="full" colspan="5">
                        Header
                    </th>
                </tr>
                <tr class="trClass" style="width: 100%">
                    <td class="first" style="width: 20%">
                        Request No
                    </td>
                    <td class="last" style="width: 80%">
                        <a href="#" class="status" id="lnkRequestNo" style="color: Blue" target="_blank">
                            <%=Request["requestid"]%></a>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <div id="div_survey"  runat="server" style="width: 98%; margin-left: 10px; margin-right: 10px;">
    </div>
    <div>
        <table align="center">
            <tr>
                <td class="innerTd">
                    <a href="#" id="btnSubmit"  runat="server" class="button-small"  önserverclick="btnSubmit_Click">
                        <span class="corner-left-small"><span class="corner-right-small">Submit</span></span></a>
                </td>
            </tr>
        </table>
    </div>
    <asp:HiddenField ID="hUserIdEncrypted" runat="server" />
    <asp:HiddenField ID="hInitiatorUserId" runat="server" />
    <asp:HiddenField ID="hSurveyId" runat="server" />
    <script type="text/javascript">

        $("#lnkRequestNo").attr("href", "ArabiaHRLetterRequest.aspx?requestid=" + <%=Request["requestid"]%> +"&userId= " +  $("#<%=hUserIdEncrypted.ClientID %>").val());

        $("#lnkHistory").fancybox({
            'width': 700,
            'height': 400,
            'autoScale': true,
            'transitionIn': 'none',
            'transitionOut': 'none',
            'type': 'iframe'
        });

        $("#lnkHistory").attr("href", "ArabiaHRLetterSurveyFormHistory.aspx?surveyid=" + $("#<%=hSurveyId.ClientID %>").val());

        $("#<%=btnSubmit.ClientID %>").click(function(ev) {
            ev.preventDefault();
            var id;
            var selected;
            $("#<%=div_survey.ClientID %> tr:not(:has(th))").each(function() {
                $(this).find("td").each(function() {
                    var o = $(this);
                    var firstCol = o.parent().children().first();
                    id = firstCol.text();
                    selected = "N/A";
                    firstCol.next().next().find("input").each(function() {
                        if($(this).is("checked")) {
                            if($(this).val() == "YES")
                                selected = "YES";
                            else if($(this).val() == "NO")
                                selected = "NO";
                            else if($(this).val() == "N/A")
                                selected = "NA";
                        }
                    });
                    firstCol.next().next().find("textarea").each(function() {
                        selected = "TextArea";
                    });
                });
                alert(id);
                alert(selected);
            });
        });

        $("input").each(function() {
            $(this).click(function(ev) {
                alert($(this).val());
                if($(this).val() == "YES")
                {
                $("input[value='YES']").attr('checked', true);
                $("input[value='NO']").attr('checked', false);
                $("input[value='N/A']").attr('checked', false);
                }
                else if($(this).val() == "NO")
                {
                $("input[value='YES']").attr('checked', false);
                $("input[value='NO']").attr('checked', true);
                $("input[value='N/A']").attr('checked', false);
                }
                else if($(this).val() == "N/A")
                {
                $("input[value='YES']").attr('checked', false);
                $("input[value='NO']").attr('checked', false);
                $("input[value='N/A']").attr('checked', true);
                }
                //$('#Yes').attr("checked",false).checkboxradio("refresh");
                //$("input[type='radio']").attr("checked",true).checkboxradio("refresh");
                //$('input[name="yes_no_na0"]').attr('checked', false);
                //$(this).next().attr('checked', false);
                //$(this).next().next().attr('checked', false);

            });
        });

    </script>
</asp:Content>

My code behind file is as follows,

    using System;
using System.Data;
using System.Data.SqlClient;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using GWC.ToolKits;

using System.Data.Linq;
using System.Linq;
using System.Text;

using System.Windows;

public partial class HRLetter_Arabia_ArabiaHRLetterSurveyForm : System.Web.UI.Page
{

    protected void Page_PreInit(object sender, EventArgs e)
    {
    }

    protected void Page_Init(object sender, EventArgs e)
    {
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            BindQuestions();
            hInitiatorUserId.Value = EncryptDecrypt.EncryptDecrypt.GetDecryptedData(Request["userId"]);
            hUserIdEncrypted.Value = Request["userId"];
            var m1 = Database.GetSurveyId(Request["requestId"]);
            hSurveyId.Value = m1.survey_id.ToString();

            var m = Database.GetSurveyId(Request["requestid"]);            
        }
    }

    private void BindQuestions()
    {
        StringBuilder surveytable = new StringBuilder();
        var m = Database.GetQuestions();

        if (m.Count > 0)
        {
            surveytable.Append("<table cellpadding='0' cellspacing='0' width='100%' class='tableClass'>");
            surveytable.Append("<tr class='trClass' align='right'>");
            surveytable.Append("<th class='full'>Id</th><th class='full'>Questions</th><th class='full'>Answers</th>");
            surveytable.Append("</tr>");
            if (m.Count > 0)
            {
                for (int i = 0; i < m.Count; i++)
                {
                    surveytable.Append("<tr class='trClass' style='width:100%'>");
                    surveytable.Append("<td class='first' style='width:5%'>" + m[i].question_id + "</td>");
                    surveytable.Append("<td class='first' style='width:60%'>" + m[i].question_description + " </td>");
                    if (m[i].question_type_id == 1)
                    {
                        surveytable.Append("<td class='last' style='width:35%'>");
                        surveytable.Append("<input id=\"rdoYes" + i + "\" name=\"yes_no_na" + i + "\" value=\"YES\" checked=\"false\" type=\"radio\">YES</input>");
                        surveytable.Append("<input id=\"rdoNo" + i + "\" name=\"yes_no_na" + i + "\" value=\"NO\" checked=\"false\"  type=\"radio\">NO</input>");
                        surveytable.Append("<input id=\"rdoNa" + i + "\" name=\"yes_no_na" + i + "\" value=\"N/A\" checked=\"true\"  type=\"radio\">N/A</input>");
                        surveytable.Append("</td>");
                    }
                    else
                    {
                        surveytable.Append("<td class='last' style='width:35%'>");
                        surveytable.Append("<Textarea id=\"txtComment" + i + "\" type=\"text\" runat=\"server\" style='width:98%; height:100px'></Textarea>");
                        surveytable.Append("</td>");
                    }
                    surveytable.Append("</tr>");
                }
            }
            surveytable.Append("</table>");
            div_survey.InnerHtml = surveytable.ToString();
        }
        else
        {
        }
    }

    private void SendNotificationAll(string userId, string subject, string body, string cc, string bcc)
    {
        try
        {
            string approvalEmail;
            approvalEmail = EmployeeData.GetEmployeeEmailByUserId(userId);
            MailHelper mailHelper = new MailHelper();
            Utilities util = new Utilities();
            mailHelper.SendMailMessage(util.GetValueFromConfigFile("SupportEmail"), approvalEmail, bcc, cc, subject, body);
        }
        catch (Exception exp)
        {
            LogManager logHelper = new LogManager(Request.PhysicalApplicationPath.Trim(), "HR Letter Request");
            logHelper.LogError("[SendApproverNotification - ]" + exp.Message);
        }
    }

    private void AlertMessage(string message)
    {
        string strScript;
        strScript = "<script language=javascript>alert('" + message + "');</script>";
        Page.RegisterClientScriptBlock("key", strScript);
    }

    protected void btnSubmit_Click(object sender, EventArgs e)
    {
        DateTime datetime1, datetime2;
        datetime1 = DateTime.Now;
        datetime2 = datetime1.AddSeconds(1);

        string request_no = Request["requestid"];

        var m = Database.GetSurveyId(request_no);
        string survey_id = m.survey_id.ToString();        

        Database.UpdateHRLetterSurveyMasterData(request_no, "2");

        Database.RegisterHRLetterSurveyHistory(survey_id, hInitiatorUserId.Value, datetime1.ToString(), "C", datetime2.ToString(), "Survey Completed");

        string peoplelinkUserId = GeneralData.GetCountryPeoplelink("1");

        Database.RegisterHRLetterHistory(request_no, peoplelinkUserId, datetime1.ToString(), "E", datetime2.ToString(), "Survey Completed");

        string messageid;
        messageid = GeneralData.InsertMessage(request_no, peoplelinkUserId, "Survey Request[" + request_no + "]", "inbox", "0", "0", "HRLetter", DateTime.Now.ToString(), "1").ToString();
        GeneralData.InsertMessageHistory(messageid, "inbox", DateTime.Now.ToString());

        Utilities util = new Utilities();

        SendNotificationAll(peoplelinkUserId, "Survey Request[" + request_no + "]", "<span style=\"font-family: Arial; font-size:12px\">Dear PeopleLink, <br /><br />Survey Request is completed.<br /><br />Click the link below for more details:<a href='http://" + util.GetValueFromConfigFile("ServerIPAll").ToString() + "/ArabiaHRLetterSurveyForm.aspx?requestid=" + request_no + "&surveyid=" + survey_id + "<br /><br />Thank you<br/>", "", "");

        AlertMessage("Survey Request Completed");

        Response.Redirect(Page.ResolveUrl("~/HRLetter\\Arabia\\ArabiaHRLetterSurveyForm.aspx?userid=" + hUserIdEncrypted.Value + "&requestid=" + request_no));

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:50:50.210

使用道具：

```
$("input[value='YES']").prop('checked', false); 
```

链接：[http ://api.jquery.com/prop/](http://api.jquery.com/prop/)

也看看[.prop() 与 .attr()](https://stackoverflow.com/questions/5874652/prop-vs-attr)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:56:08.150

这将切换收音机，只需更换选择器：

```
$("button").click(function() {
    $("input[type=radio]").attr('checked', !$("input[type=radio]").attr('checked'));
}); 
```

[演示](http://jsfiddle.net/QHZfq/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T11:37:10.267

我自己得到了解决方案。我需要在属性之前添加一个冒号，即`:checked`在 attr 函数中。

# ios - 根据滑块值重新加载 UITableView 数据

> ID：10979462
> 
> 赞同：3
> 
> 时间：2012-06-11T11:46:58.913
> 
> 标签：ios, core-data, uitableview

我正在尝试实现一个表格视图，它应该根据 UISlider 的值显示单元格。

示例：该表是空的。用户快速将滑块拖动到 400 的值。现在表格应该包含 400 行。

单元格应显示的数据存储在核心数据中，大约有 400 个条目。我们试图在拖动滑块时获得一种很酷的效果，这样您就可以直观地看到每个被添加的单元格（当然，如果您正在查看单元格最终所在的表格视图部分）。使用时提供的内置动画`- (void) reloadSections:(NSIndexSet *)sections withRowAnimation:(UITableViewRowAnimation)animation`就足够了，在 1 到 10 行之间的效果看起来很酷。

问题：值达到 10 或更多后，它开始滞后太多而无法工作。我认为这是因为 reloadSections: 每次滑块更改值时都必须检查每个单元格，而我浪费了太多宝贵的时间。

所以，我正在寻找有关如何实现这一点的想法。我是否应该使用 NSFetchedResultsController 并在每次滑块更改值时更改获取请求（每秒可能发生 20 次）？我是否应该将所有数据加载到一个数组中并以标准方式重用单元格？

我已经尝试了两种方法，并且延迟几乎相同。我在想问题可能是 reloadSection: 太慢了。我认为这`- (void)insertRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation`将是一个更好的选择，但我正在寻找更多关于如何实现这一点的想法。

任何帮助，将不胜感激！

我在滑块更改值时测试的最后一个代码：

```
- (IBAction) sliderChangedValue:(UISlider *)slider
{
    // Make sure we only run this function on integer changes. It fires too often on float changes.
    if ((int)slider.value == lastSliderIntegerValue) {
        return;
    }

    if (slider.value > lastSliderIntegerValue) {

        [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:(int)slider.value inSection:0]] 
                              withRowAnimation:UITableViewRowAnimationAutomatic];
    }

    else {
        [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:(int)slider.value inSection:0]]
                              withRowAnimation:UITableViewRowAnimationAutomatic];
    }

    lastSliderIntegerValue = (int)slider.value; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T18:27:05.330

我对 iOS 开发的经验并不丰富，但我做过很多游戏开发。您的问题的根源似乎是您的程序必须渲染的动画量。既然你说你开发这个程序的动机是保持酷炫的效果，那么你应该尽可能地改变你的程序来优化你的程序，直到用户可以感知到的程度。我知道这不是很清楚，所以这是一个可能的解决方案：

您不应该为用户可以移动滑块的每种速度添加每一行的动画。相反，只需为体验流畅所需的数量设置动画即可。这可以通过计算滑块更改的速率来完成，然后在调用 reloadData 之前调整向表中添加的行数。仅对循环中最后一行的添加进行动画处理。

因为我不知道您正在为什么系统开发，或者根本不知道各种 iOS 平台的图形功能，所以我无法真正给您具体的值，但您应该尝试不同的设置，看看哪些有效.

# java - 从内部类中的本地内部类调用方法

> ID：10979468
> 
> 赞同：3
> 
> 时间：2012-06-11T11:47:06.493
> 
> 标签：java, inner-classes

我有这个代码：

```
class A{
    class B{
        public void foo(){
            class C{
                public void bar(){
                    baz();
                }
            }
        }
        public void baz(){}
    }
    public void baz(){}
} 
```

如果我在 C.bar() 中调用 baz()，它将调用 B.baz()。如果我从此在 A 中引用 (A aref = this;) 那么我可以通过它调用 A.baz() 。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T11:49:46.860

您可以使用`A.this.baz()`. `A.this`称为*合格的 this 表达式*。

# android - 更改 android listview 元素高度

> ID：10979474
> 
> 赞同：0
> 
> 时间：2012-06-11T11:47:43.950
> 
> 标签：android, android-layout, android-emulator, android-widget

**问题：**我想减少单个列表视图项的行高。我不知道这到底有没有可能。

这是我使用的代码

```
<ListView
  android:id="@+id/listView1"
  android:layout_width="match_parent"
  android:layout_height="338dp"
  android:padding="10dp"
  android:layout_y="22dp" >
</ListView> 
```

爪哇代码

```
ListView list = (ListView)findViewById(R.id.listView1);

ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,arrayTest);

list.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T12:28:22.050

由于您想减少 ListView 的每个项目的高度，您必须**为您的列表视图定义具有自定义布局的自定义适配器。**

检查这个：

1.  [使用自定义 ArrayAdapter 自定义 Android ListView 项](http://www.ezzylearning.com/tutorial.aspx?tid=1763429&q=customizing-android-listview-items-with-custom-arrayadapter)
2.  [Android ListView 和 ListActivity](http://www.vogella.com/articles/AndroidListView/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:53:47.190

如果您只想更改整个宽度的宽度，则只需更改值

```
android:layout_width="match_parent" 
```

例如你想要的任何东西

```
android:layout_width="100dp" 
```

否则请查看[本教程](http://www.ezzylearning.com/tutorial.aspx?tid=1763429&q=customizing-android-listview-items-with-custom-arrayadapter)，了解如何创建自定义适配器并为列表项创建自己的布局 xml

# asp.net - 网页aspx问题

> ID：10979478
> 
> 赞同：-3
> 
> 时间：2012-06-11T11:47:56.580
> 
> 标签：asp.net, html

我正在尝试访问下面的页面，但出现以下错误：

违规网址：[http ://www.mockcourt.org.uk/default.aspx](http://www.mockcourt.org.uk/default.aspx)

> 来源：App_Web_azvlqjha
> 
> 消息：对象引用未设置为对象的实例。堆栈跟踪：在 System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) 在 System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender) 的 _Default.Page_Load(Object sender, EventArgs e) , EventArgs e) 在 System.Web.UI.Control.OnLoad(EventArgs e) 在 System.Web.UI.Control.LoadRecursive() 在 System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)

有谁知道是什么原因造成的？

谢谢罗斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:52:16.110

没有足够的信息可以准确地说，但猜测在您的`Page_Load`方法中引用了一个不存在的对象。也许你有类似的东西：

```
Page.FindControl("ID_Here") 
```

ID 无法控制的地方：`ID_HERE`

# json - 如何在 CouchDB 中从巨大的 JSON 文件 (460 MB) 进行批量插入

> ID：10979479
> 
> 赞同：3
> 
> 时间：2012-06-11T11:48:09.853
> 
> 标签：json, couchdb, bulkinsert

我需要在我的 CouchDB 数据库中批量插入文档。我正在尝试在这里遵循手册： [http ://wiki.apache.org/couchdb/HTTP_Bulk_Document_API](http://wiki.apache.org/couchdb/HTTP_Bulk_Document_API)

这是我的脚本：

```
~$ DB="http://localhost:5984/employees"
~$ curl -H "Content-Type:application/json" -d @employees_selfContained.json -vX POST $DB/_bulk_docs 
```

文件 employees_selfContained.json 是一个巨大的文件 = 465 MB。我已经使用 JSONLint 对其进行了验证，并没有发现任何问题。

这是 curl 的详细输出：

```
* About to connect() to 127.0.0.1 port 5984 (#0)
* Trying 127.0.0.1... connected
* Connected to 127.0.0.1 (127.0.0.1) port 5984 (#0)
> POST /employees/_bulk_docs HTTP/1.1
> User-Agent: curl/7.19.7 (i486-pc-linux-gnu) libcurl/7.19.7 OpenSSL/0.9.8k zlib/1.2.3.3 libidn/1.15
> Host: 127.0.0.1:5984
> Accept: */*
> Content-Type:application/json
> Content-Length: 439203931
> Expect: 100-continue
>
< HTTP/1.1 100 Continue
* Empty reply from server
* Connection #0 to host 127.0.0.1 left intact
curl: (52) Empty reply from server
* Closing connection #0 
```

我怎样才能从那个巨大的单个文件中批量插入？如果可能的话，我不希望将文件拆分成更小的大小..

编辑：如果有人想知道，我正在尝试将此架构： [http](http://dev.mysql.com/doc/employee/en/sakila-structure.html) ://dev.mysql.com/doc/employee/en/sakila-structure.html 转换 为自包含文档数据库，其结构如下：

```
{
    "docs": [
        {
            "emp_no": ..,
            "birth_date": ..,
            "first_name": ..,
            "last_name" : ..,
            "gender": ..,
            "hire_date": .., 
            "titles": 
                [
                    {
                    "title": ..,
                    "from_date": .., 
                    "to_date": ..
                    },
                    {..}
                ], 
            "salaries" : 
                [
                    {
                    "salary": ..,
                    "from_date": ..,
                    "to_date": ..
                    },
                    {..}                
                ], 
            "dept_emp": 
                [ 
                    {
                    "dept_no": ..,
                    "from_date": ..,
                    "to_date":
                    },
                    {..}
                ], 
            "dept_manager": 
                [ 
                    {
                    "dept_no": ..,
                    "from_date": ..,
                    "to_date": ..
                    },
                    {..}
                ], 
            "departments":
                [
                    {
                    "dept_no": .., 
                    "dept_name": ..
                    },
                    {..}
                ]
        } ,
        .
        .
        {..}
    ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:02:14.107

遍历 JSON 并分批插入 10-50k 个文档。

# android - 安卓谷歌地图错误

> ID：10979480
> 
> 赞同：0
> 
> 时间：2012-06-11T11:48:11.993
> 
> 标签：android, google-maps, android-mapview, android-activity

在我的应用程序中，我想通过`MapActivity`单击按钮打开一个。但是在单击按钮时，它显示一个类未找到错误。

我也发布了我的错误日志，以便更正我......

```
06-11 17:16:53.854: WARN/dalvikvm(890): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
06-11 17:16:53.865: ERROR/AndroidRuntime(890): FATAL EXCEPTION: main
06-11 17:16:53.865: ERROR/AndroidRuntime(890): java.lang.NoClassDefFoundError: com.iqmobi.SampleMapPage
06-11 17:16:53.865: ERROR/AndroidRuntime(890):     at com.iqmobi.Login.onClick(Login.java:61)
06-11 17:16:53.865: ERROR/AndroidRuntime(890):     at android.view.View.performClick(View.java:2408)
06-11 17:16:53.865: ERROR/AndroidRuntime(890):     at android.view.View$PerformClick.run(View.java:8816)
06-11 17:16:53.865: ERROR/AndroidRuntime(890):     at android.os.Handler.handleCallback(Handler.java:587)
06-11 17:16:53.865: ERROR/AndroidRuntime(890):     at android.os.Handler.dispatchMessage(Handler.java:92)
06-11 17:16:53.865: ERROR/AndroidRuntime(890):     at android.os.Looper.loop(Looper.java:123)
06-11 17:16:53.865: ERROR/AndroidRuntime(890):     at android.app.ActivityThread.main(ActivityThread.java:4627)
06-11 17:16:53.865: ERROR/AndroidRuntime(890):     at java.lang.reflect.Method.invokeNative(Native Method)
06-11 17:16:53.865: ERROR/AndroidRuntime(890):     at java.lang.reflect.Method.invoke(Method.java:521)
06-11 17:16:53.865: ERROR/AndroidRuntime(890):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-11 17:16:53.865: ERROR/AndroidRuntime(890):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-11 17:16:53.865: ERROR/AndroidRuntime(890):     at dalvik.system.NativeStart.main(Native Method)
06-11 17:16:53.874: WARN/ActivityManager(60):   Force finishing activity com.iqmobi/.Login
06-11 17:16:54.384: WARN/ActivityManager(60): Activity pause timeout for HistoryRecord{4505c5d8 com.iqmobi/.Login} 
```

移至 MapActivity 的代码是

```
Intent successIntent=new Intent(Login.this,SampleMapPage.class);
startActivity(successIntent); 
```

我检查了一个附加信息，当我在上面的代码部分中 Toast 而不是 startActivity 时，它的工作......它与按钮单击有关，我认为......请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:55:31.270

将以下代码行写入清单文件的`<application>`标签。

```
<uses-library android:name="com.google.android.maps" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T11:56:38.763

添加`<uses-library android:name="com.google.android.maps" />`到您的清单并确保您使用的是 Android 的 Google API 版本。您的清单应该类似于[这个问题中的](https://stackoverflow.com/questions/10470220/mapview-and-error)清单。

# perl - Perl 不兼容问题与散列中的每个散列 - 5.14 → 5.8.8

> ID：10979486
> 
> 赞同：5
> 
> 时间：2012-06-11T11:48:25.013
> 
> 标签：perl

以下代码适用于 Active Perl 5.14.2：

```
my %hzones = ();
#%hzones= (
#    'zone1' =>  {
#                  'ns1' => 'ip1',
#                  'ns1' => 'ip2',
#                  },
#    'zone2' =>  {
#                  'ns1' => 'ip1',
#                  'ns2' => 'ip2'
#                  }
#);

foreach my $k1 ( keys %hzones ) {
    debug("# $k1",$d); 
    while ( my ($key, $value) = each($hzones{ $k1 }) ) { # Problem is here   217 
        while ( my ($nsname, $nsip) = each(%$value) ) { 
            debug("## $nsname , $nsip",$d);
    }
    # Creation de la zone et ajout dans infoblox
    $session->add(createZone($k1)) or error("Add zone for ".$k1." failed: ", 
        $session->status_code(). ":" .$session->status_detail());
    }
} 
```

现在，如果我尝试在 RedHat 5.3 和 Perl 5.8.8 上使用此代码，则会出现以下错误：

```
Type of arg 1 to each must be hash (not hash element) at
  ./migration-arpa.pl line 217, near "}) "
Execution of ./migration-arpa.pl aborted due to compilation
  errors. 
```

**问题**：如何解决此错误？如何遍历我的哈希表？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-11T11:54:34.477

昆汀说的，但你可以尝试替换

```
each($hzones{ $k1 }) 
```

和

```
each(%{$hzones{ $k1 }}) 
```

它取消引用哈希参考。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T18:09:38.090

`each`传递对( `each($hzones{ $k1 })`)的引用的能力是在 5.14.0中[引入的。](http://perldoc.perl.org/perl5140delta.html#Syntactical-Enhancements)在此之前，必须传递一个哈希 ( `each(%{ $hzones{ $k1 })`)。这仍然有效，并且将继续有效。

因此，要向后兼容，请使用

```
each(%{ $hzones{ $k1 }) 
```

代替

```
each($hzones{ $k1 }) 
```

注意：传递对的引用`each`被标记为实验性的，我认为它有问题，因为它不适用于所有哈希。

# c - 如何在主机端代码中使用 OpenCL 向量类型进行算术运算？

> ID：10979487
> 
> 赞同：5
> 
> 时间：2012-06-11T11:48:26.937
> 
> 标签：c, gcc, types, opencl

这是我的代码：

```
#include <stdio.h>
#include <CL/cl.h>
#include <CL/cl_platform.h>

int main(){    
    cl_float3 f3 =  (cl_float3){1, 1, 1};
    cl_float3 f31 = (cl_float3) {2, 2, 2};
    cl_float3 f32 = (cl_float3) {2, 2, 2};
    f3 = f31 + f32;
    printf("%g %g %g \n", f3.x, f3.y, f3.z);
    return  0;
} 
```

使用 gcc 4.6 编译时，会产生错误

```
test.c:14:11: error: invalid operands to binary + (have ‘cl_float3’ and ‘cl_float3’) 
```

对我来说很奇怪，因为[OpenCL 规范](http://www.khronos.org/registry/cl/specs/opencl-1.1.pdf#page=184)在第 6.4 节中证明了这一点，增加了两个`floatn`. 我需要包含任何其他标题吗？

但更奇怪的是，在编译时`-std=c99`出现错误，例如

```
test.c:16:26: error: ‘cl_float3’ has no member named ‘x’ 
```

..对于所有组件（x、y 和 z）...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T14:02:02.457

结构下标编译问题的原因可以在AMD SDK中标准的实现中看出。

如果您查看`<CL/cl_platform.h>`AMD 工具包中的标头，您可以看到结构是如何定义的。

```
 typedef  cl_float4  cl_float3;

 typedef union
 {
    cl_float  CL_ALIGNED(16) s[4];
 #if (defined( __GNUC__) ||  defined( __IBMC__ )) && ! defined( __STRICT_ANSI__ )
   __extension__ struct{ cl_float   x, y, z, w; };
 ....
 #endif
 }cl_float4; 
```

`#if`当使用 调用 gcc 时，该子句将被忽略`--std=c99`。

要使您的代码与 --std=c99 一起使用，您可以替换对`f3.x`with`f3.s[0]`等的引用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T12:51:22.730

OpenCL 程序由两部分组成。

1.  在主机上运行的程序。这通常是用 C 或 C++ 编写的，但它没有什么特别之处，只是它使用了 OpenCL 规范第 4 和第 5 节中描述的 API。
2.  在 OpenCL 设备（通常是 GPU）上运行的内核。这是用第 6 节中指定的语言编写的。这不是 C，但它很接近。它添加了诸如矢量操作之类的东西（就像您尝试使用的那样）。这是由主机程序编译的，它通过 API 将包含内核代码的字符串传递给 OpenCL。

您混淆了两者，并试图在主机代码中使用内核语言的特性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-22T09:27:07.370

# django - django django 有像 cakephp 这样的自动时间戳创建/更新字段吗？

> ID：10979488
> 
> 赞同：16
> 
> 时间：2012-06-11T11:48:30.813
> 
> 标签：django

过去使用过 cakephp，我喜欢它的一件事（也许是唯一的事情？）是它有一个可爱的“创建”和“更新”时间戳功能 - 简单地说，当你第一次添加一个项目时，“创建”日期已设置（假设您将其命名正确 - 我认为是 create_date）

此后的任何时候，如果执行了更新，“更新”字段将设置为当前时间。

django 也有这个吗？如果是这样，我该如何命名这些字段以获取它们？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2016-10-15T12:06:10.083

它不会添加到每个表中内置的模型中。您必须将其作为字段添加到您的模型中。

```
class Message(models.Model):

    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True) 
```

在这种情况下消息是您的表的名称。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-11T11:58:33.443

当然有！

检查`auto_now`并`auto_now_add`在[文档中](https://docs.djangoproject.com/en/dev/ref/models/fields/#datetimefield)

# ascii - Verilog中的ASCII到整数转换

> ID：10979491
> 
> 赞同：4
> 
> 时间：2012-06-11T11:48:44.937
> 
> 标签：ascii, verilog

我有一系列从 UART 依次到达的 ASCII 字符。我想从 ASCII 转换为表示的整数。例如，我收到`123`which is`{ 8'h31, 8'h32, 8'h33 }`并且我想将其转换为`8'h7B`. 任何人都可以提供帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:13:21.937

我假设您正在询问可合成 RTL 以将 ASCII 编码字符序列转换为相应的数字。如果是这样，通常有两种方法可以做到这一点 - 顺序处理流并将每个输入转换为二进制，乘以 10 的多个累加值，然后添加当前数字。但是，这种方法非常缓慢。如果您有所有输入，您可以简单地使用查找表将输入“字符串”转换为二进制数。下面是我一段时间前草拟的一个例子：

```
/*
 * An example of converting an ASCII string into binary using lookup tables.
 *
 * Copyright (C) 2012 Vlad Lazarenko <vlad@lazarenko.me>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */

// synopsys translate_off
`timescale 1 ns / 1 ps
// synopsys translate_on

/*
 * Using carefully chosen minimal size for registers effectively increases fMAX.
 * However, synthesis tool complain about result being truncated. It is possible
 * to use full 32-bit registers and provide false paths, but easier to just
 * disable the warning.
 */
// altera message_off 10230

/*
 * Convert unsigned 32-bit ASCII number representation into binary.
 *
 * Data bus width is 80 bit for value (up to 10 characters).
 * Empty flag is 4 bit wide.
 * Output latency is 4 cycles.
 * fMAX on Arria II device is a little above 300 MHz.
 * @ 300 MHz, the throughput is ~22.32 Gbps (or ~2.79 GBps).
 */
module ascii_to_binary(clk, reset_n, data, mod, result);

   input clk;
   input reset_n;

   input [79:0] data;
   input [3:0]  mod;

   output reg [31:0] result;

   // Convert a single ASCII digit into a corresponding
   // 4-bit binary number by subtracting 48.
   function [3:0] c2i;
      input [7:0] c;
      reg [7:0]   i;
      begin
         i = (c - 6'd48);
         c2i = i[3:0];
      end
   endfunction

   // Convert a single ASCII digit into a corresponding
   // 4-bit binary number by subtracting 48 and multiply
   // the result. Multiplication is used to normalize
   // a single digit number depending on its position
   // in the input data sequence. For example, this function
   // can be used to transform a sequence of ASCII digits
   // like this: '1', '2', '3' into a digits like 100, 20, 3.
   // This function can potentially use multipliers instead of
   // lookup table. However, using multipliers can reduce fMAX.
   function [31:0] c2d;
      input [7:0]    c;
      input integer  m;
      reg [31:0]     d;
      begin
         case (c2i(c))
           4'd0:  d = 0;     // "0" is always 0
           4'd1:  d = m;     // Multiplying 1 by "m" always yields "m"
           4'd2:  d = m * 2;
           4'd3:  d = m * 3;
           4'd4:  d = m * 4;
           4'd5:  d = m * 5;
           4'd6:  d = m * 6;
           4'd7:  d = m * 7;
           4'd8:  d = m * 8;
           4'd9:  d = m * 9;
           4'd10: d = 0;     // Don't care (false path)
           4'd11: d = 0;     // Don't care (false path)
           4'd12: d = 0;     // Don't care (false path)
           4'd13: d = 0;     // Don't care (false path)
           4'd14: d = 0;     // Don't care (false path)
           4'd15: d = 0;     // Don't care (false path)
         endcase
         c2d = d[31:0];
      end
   endfunction

   // Stage 1 registers. Each word holds a single converted
   // and adjusted/normalized digit.
   reg [31:0] m9;
   reg [31:0] m8;
   reg [26:0] m7;
   reg [23:0] m6;
   reg [19:0] m5;
   reg [16:0] m4;
   reg [13:0] m3;
   reg [9:0]  m2;
   reg [6:0]  m1;
   reg [3:0]  m0;

   // Stage 2 sum registers.
   reg [31:0] s0;
   reg [31:0] s1;
   reg [31:0] s2;
   reg [31:0] s3;

   // Stage 3 sum registers.
   reg [31:0] s4;
   reg [31:0] s5;

   always @ (posedge clk or negedge reset_n) begin
      if (!reset_n) begin
         m0 <= 0;
         m1 <= 0;
         m2 <= 0;
         m3 <= 0;
         m4 <= 0;
         m5 <= 0;
         m6 <= 0;
         m7 <= 0;
         m8 <= 0;
         m9 <= 0;
         s0 <= 0;
         s1 <= 0;
         s2 <= 0;
         s3 <= 0;
         s4 <= 0;
         s5 <= 0;
         result <= 0;
      end else begin
         /*
          * Pipeline stage #1: Convert every ASCII character into a binary
          * number, normalize every number depending on the word position
          * and valid input data length. For example:
          *    - '1', '2' turns into 10 and 2.
          *    - '1', '2', '3' turns into 100, 20 and 3.
          *    - '1', '2', '3', '4' turns into 1000, 200, 30 and 4
          */

         /*
          * Empty signal is 4 bit wide, but its valid range is from 0 to 9.
          * When MSB in empty signal is low, only 3 bits are compared using
          * a full case. Otherwise, LSB is checked to differentiate between
          * 8 and 9 (4'b1000 and 4'b0001).
          */
         if (mod[3:3] == 1'b0) begin
            case (mod[2:0])
              3'd0: begin
                 m9 <= c2d(data[79:72], 1000000000);
                 m8 <= c2d(data[71:64], 100000000);
                 m7 <= c2d(data[63:56], 10000000);
                 m6 <= c2d(data[55:48], 1000000);
                 m5 <= c2d(data[47:40], 100000);
                 m4 <= c2d(data[39:32], 10000);
                 m3 <= c2d(data[31:24], 1000);
                 m2 <= c2d(data[23:16], 100);
                 m1 <= c2d(data[15:8],  10);
                 m0 <= c2i(data[7:0]);
              end
              3'd1: begin
                 m9 <= c2d(data[79:72], 100000000);
                 m8 <= c2d(data[71:64], 10000000);
                 m7 <= c2d(data[63:56], 1000000);
                 m6 <= c2d(data[55:48], 100000);
                 m5 <= c2d(data[47:40], 10000);
                 m4 <= c2d(data[39:32], 1000);
                 m3 <= c2d(data[31:24], 100);
                 m2 <= c2d(data[23:16], 10);
                 m1 <= c2i(data[15:8]);
                 m0 <= 0;
              end
              3'd2: begin
                 m9 <= c2d(data[79:72], 10000000);
                 m8 <= c2d(data[71:64], 1000000);
                 m7 <= c2d(data[63:56], 100000);
                 m6 <= c2d(data[55:48], 10000);
                 m5 <= c2d(data[47:40], 1000);
                 m4 <= c2d(data[39:32], 100);
                 m3 <= c2d(data[31:24], 10);
                 m2 <= c2i(data[23:16]);
                 m1 <= 0;
                 m0 <= 0;
              end
              3'd3: begin
                 m9 <= c2d(data[79:72], 1000000);
                 m8 <= c2d(data[71:64], 100000);
                 m7 <= c2d(data[63:56], 10000);
                 m6 <= c2d(data[55:48], 1000);
                 m5 <= c2d(data[47:40], 100);
                 m4 <= c2d(data[39:32], 10);
                 m3 <= c2i(data[31:24]);
                 m2 <= 0;
                 m1 <= 0;
                 m0 <= 0;
              end
              3'd4: begin
                 m9 <= c2d(data[79:72], 100000);
                 m8 <= c2d(data[71:64], 10000);
                 m7 <= c2d(data[63:56], 1000);
                 m6 <= c2d(data[55:48], 100);
                 m5 <= c2d(data[47:40], 10);
                 m4 <= c2i(data[39:32]);
                 m3 <= 0;
                 m2 <= 0;
                 m1 <= 0;
                 m0 <= 0;
              end
              3'd5: begin
                 m9 <= c2d(data[79:72], 10000);
                 m8 <= c2d(data[71:64], 1000);
                 m7 <= c2d(data[63:56], 100);
                 m6 <= c2d(data[55:48], 10);
                 m5 <= c2i(data[47:40]);
                 m4 <= 0;
                 m3 <= 0;
                 m2 <= 0;
                 m1 <= 0;
                 m0 <= 0;
              end
              3'd6: begin
                 m9 <= c2d(data[79:72], 1000);
                 m8 <= c2d(data[71:64], 100);
                 m7 <= c2d(data[63:56], 10);
                 m6 <= c2i(data[55:48]);
                 m5 <= 0;
                 m4 <= 0;
                 m3 <= 0;
                 m2 <= 0;
                 m1 <= 0;
                 m0 <= 0;
              end
              3'd7: begin
                 m9 <= c2d(data[79:72], 100);
                 m8 <= c2d(data[71:64], 10);
                 m7 <= c2i(data[63:56]);
                 m6 <= 0;
                 m5 <= 0;
                 m4 <= 0;
                 m3 <= 0;
                 m2 <= 0;
                 m1 <= 0;
                 m0 <= 0;
              end
            endcase
         end else begin
            case (mod[0:0])
              1'b0: begin
                 m9 <= c2d(data[79:72], 10);
                 m8 <= c2i(data[71:64]);
              end
              1'b1: begin
                 m9 <= c2i(data[79:72]);
                 m8 <= 0;
              end
            endcase
            m7 <= 0;
            m6 <= 0;
            m5 <= 0;
            m4 <= 0;
            m3 <= 0;
            m2 <= 0;
            m1 <= 0;
            m0 <= 0;
         end

         // Pipeline stage #2: Sum up numbers from the previous step.
         s0 <= m9 + m0;
         s1 <= m8 + m1;
         s2 <= m7 + (m2 + m3);
         s3 <= m6 + (m4 + m5);

         // Pipeline stage #3: Sum previous partial sums.
         s4 <= (s0 + s1);
         s5 <= (s2 + s3);

         // Last pipeline stage #3: Sum previous partial sums.
         // This yields a 32-bit result.
         result <= (s4 + s5);
      end
   end

endmodule 
```

[您可以在我的ASCII Horror — String to Binary Conversion](http://lazarenko.me/2012/09/30/ascii-horror-string-to-binary-conversion/)文章中找到这两种方法的（可合成的）实现以及测试台、波形甚至一些软件示例的更多详细信息。

希望能帮助到你。祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T07:08:33.050

如果你的编译器支持 SystemVerilog，你可以使用 atoi 函数：

> str.atoi() 返回对应于 str 中的 ASCII 十进制表示的整数。例如：

```
string str = "123";
int  i = str.atoi(); // assigns 123 to i. 
```

否则，您需要使用类似于罗斯建议的方法编写自己的 atoi 函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-05T07:53:59.980

这是一个小代码示例：

首先，一个从字符串创建字节动态数组的示例。动态字节数组包含每个字符的 ASCII 代码数字表示。

优点是**字节的动态数组可以随机化**，但**字符串不能随机化**。

（创建做例如

```
stringvar ="This is a example text";
rand byte   byte_din_array[];
for(i=0;i<stringvar.len(); i++) begin 
   byte_din_array = {byte_din_array ,stringvar[i]}; 
   //stringvar[i] will return empty byte if  the index would be beyond the string length
   //The advantage of using stringvar[i] instead of stringvar.atoi(i) is that 
   //the string can have all ASCII characters and not just numbers.
   //Disadvantage is that the byte contains the ASCII CODE "number" 
   //representation of the character and that is not human readable
end 
```

）。

这是将动态字节数组转换回连接字符串的示例。您可能已经使用以前的动态数组在 xfer 中部分随机化（带有约束）或在 post_randomize 中更改。

```
function string convert_byte_array2string(byte stringdescriptionholder[]);
    automatic string temp_str="";
    automatic byte byte_temp;
    automatic string str_test;
    for ( int unsigned i = 0; i<stringdescriptionholder.size(); i++)  begin
        i=i;//debug breakpoint
        byte_temp = stringdescriptionholder[i];
        str_test = string'(byte_temp); //the "string cast" will convert the numeric ASCII representation in a string character
        temp_str = {temp_str,str_test};
    end
    return temp_str;
endfunction 
```

如果您想了解有关字符串的更多信息，我建议您阅读 SystemVerilog 3.1a 语言参考手册 (LRM) Accellera's Extensions to Verilog 的第 3.7 节。它是关于字符串数据类型的，并解释了用于字符串数据类型的内置方法。 [![LRM 语言参考手册](../Images/1735df479961bf7c5f61a87006392a4a.png)](https://i.stack.imgur.com/ds0dk.png)

您还可以在 IEEE SystemVerilog 标准 - 统一硬件设计、规范和验证语言/IEEE Std 1800™-2012 的第 6.16 节下找到信息。可能比 LRM 中的解释更详细。 [![IEEE 系统验证标准 IEEE Std 1800™-2012](../Images/0a022cf6563a1361f2e064fb33fe6a44.png)](https://i.stack.imgur.com/fMwgd.png)

# java - 如何使用 scala-maven-plugin 在 scaladoc 中记录私有元素？

> ID：10979497
> 
> 赞同：6
> 
> 时间：2012-06-11T11:49:16.340
> 
> 标签：java, scala, maven, scala-maven-plugin

我正在尝试使用 scala-maven-plugin 3.0.2（Scala 版本 2.9.2）为我的代码生成 Scaladoc。当我使用

```
mvn scala:doc 
```

那么我没有得到关于我的**Scala**代码的私有类型和元素的文档。我检查了插件文档，但我找不到那个选项。

**奇怪的是，scaladoc 插件确实为我的Java**代码的私有元素生成了文档。但是因为它不会为 Java 代码的 HTML 注释生成文档，所以这是非常无用的。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T12:12:18.450

不幸的是，你没有错过它。几周前我做过类似的研究，也没有找到。

# extjs - 将 sencha 1.x 转换为 sencha 2.x

> ID：10979508
> 
> 赞同：0
> 
> 时间：2012-06-11T11:49:55.630
> 
> 标签：extjs

我有以下代码在 sencha touch 2 上不起作用，我需要做些什么才能使其与 sencha touch 2 兼容

```
Ext.define("fb.view.Main", {
     onReady: function() {
        var topToolbar = new Ext.Toolbar({
            dock : 'top',
            ui: 'dark',
            title: 'Facebook Login'
        });        
        var FacebookPanel = Ext.create('Ext.Panel', {

    items: [
        {
            xtype: 'panel',
            flex: 1,
            html:'<div id="header"><h2>Facebook app for tweet keywords</h2></div><span>Login with facebook</span><fb:login-button autologoutlink="true" perms="email,user_birthday,status_update,publish_stream,user_about_me"></fb:login-button><div id="login" style ="display:none"></div><img id="image"/><div id="name"></div>'    
    }]});
var myPanel = new Ext.Panel({
            dockedItems: [topToolbar],
            items: [FacebookPanel],
            scroll: 'vertical',
            fullscreen : true
        });
    }
});
 window.fbAsyncInit = function() {
        FB.init({
          appId      : '<app id>',//Give your app id,
          status     : true, 
          cookie     : true,
          xfbml      : true,
          oauth      : true,
        });
         FB.Event.subscribe('auth.login', function(response) {        
         login();
             });
        FB.Event.subscribe('auth.logout', function(response){
        logout();
        });
        };

      function login(){
                FB.api('/me', function(response) {
                var image = document.getElementById('image');
              image.src = 'http://graph.facebook.com/' + response.id + '/picture';
                    document.getElementById('login').style.display = "block";
                    document.getElementById('login').innerHTML = response.name + " succsessfully logged in!";

                });
            }
            function logout(){
                document.getElementById('login').style.display = "none";
            }
       (function(d){
         var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;
         js.src = "//connect.facebook.net/en_US/all.js";
         d.getElementsByTagName('head')[0].appendChild(js);
       }(document)); 
```

我不是要完整的代码，而是要使其与 sencha touch 2 兼容的基本指南。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T07:51:47.973

[http://docs.sencha.com/touch/2-0/#!/guide/upgrade_1_to_2](http://docs.sencha.com/touch/2-0/#!/guide/upgrade_1_to_2)

Sencha 做了一个很好的升级指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T17:06:02.627

嘿，您正在使用任何服务器，例如 Apache、Xamp Server，因为这是我的代码，我对其进行了测试。它工作正常

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T11:23:19.653

sencha 2 提供了 MVC，有助于以一种很好的方式呈现代码......此外，您不能直接通过 sencha 2 文件更改 sencha 1 文件......它们有很大的不同......许多类在 sencha 2 中已被弃用....您必须更改代码...

# c - 指定 i 值的 C 中的 FOR 循环

> ID：10979513
> 
> 赞同：1
> 
> 时间：2012-06-11T11:50:09.630
> 
> 标签：c

我正在尝试用特定的 i 值在 c 中创建一个 FOR 循环，例如 i=2,6,8,12,16,20,22,26,34 .. 我只是不知道如何指定增量，因为它们不相等。这段代码对我不好。

```
for (i=2,i<=30,i++) {

} 
```

也许在 i 中使用指定的值数组，然后参考该数组运行 for 循环？

有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T11:53:22.787

您的`for`-loop 语法需要修复。

第一个选项是使用自定义函数：

```
 for (i=2; i <= 30; i = foo(i)) { ... } 
```

where`foo`是一个获取当前值`i`并返回下一个值的函数。你需要对`foo`自己做出正确的定义。

另一种方法是将所有这些值放在一个数组中并将该数组用作索引：

```
 int indices[ MAX_INDICES ] = { 2, 6, ... };
 for (size_t j = 0; j < MAX_INDICES; ++j) { 
      /* instead of using 'j' use indices[ j ] now on */
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T11:52:05.030

您要添加的数量似乎并不总是相同的。因此，我建议将值放入一个数组并使用索引循环遍历它。

伪代码：

```
int vals[10];

// fill the values
vals[0] = 2;
vals[1] = 6;
vals[2] = 8;
...
for(int i = 0; i < 10; ++i)
{
   // work
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T11:53:27.137

正确，您想将索引放入数组中：

```
static const int indices[] = { 2,6,8,12,16,20,22,26,34 };
for (int i = 0; i != sizeof(indices) / sizeof(indices[0]); ++i) {
    const int j = indices[i];
    ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T12:04:15.403

i 的值有什么模式吗？如果没有，并且您需要的可能值的数量足够小，则需要创建一个数组并遍历该数组，例如：

```
int myValue[9] = {2,6,8,12,16,20,22,26,34};
int i;
for(i=0; i < 9; i++)
{
    printf("myValue[%d] = %d\n", i, myValue[i]);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T11:52:46.797

对于 2 的步骤，您可以像这样。对于 (i=2,i<=30,i+=2) {

}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-11T11:53:56.963

确切的限制是什么？大多数情况下似乎增加了 4，但也有变化。

鉴于此，似乎最好的方法是将您需要的值放入一个数组并以这种方式使用它们，或者定义一个可以生成这些值然后以这种方式访问​​它们的函数（而不是通过您的值数组进行索引） ）。

另外，请注意`for`-loop 内的部分由`;`not分隔`,`

# asp.net - IIS 7.5 .aspx 页面上的混合 ASP.NET/MVC 应用程序未加载

> ID：10979522
> 
> 赞同：0
> 
> 时间：2012-06-11T11:50:38.670
> 
> 标签：asp.net, .net, asp.net-mvc-2, c#-3.0, iis-7.5

我有一个混合 ASP.NET/MVC 2 应用程序，目前托管在 II6 上。我需要将它迁移到 IIS 7.5，但我无法让它工作。

我得到的最远的是当应用程序池处于集成模式时，我使用 AppCmd.exe 迁移了 web.congig，但只有 MVC 部分工作并且 .aspx 页面不会加载。

我怀疑这是由于 somone 编写的名为 StaticFileHandler 的自定义处理程序所致。正如我在日志文件中看到的那样，我知道该代码正在被命中。并且还检查 IISLogs 我可以看到请求返回 200 http 代码

我一直在寻找答案，但我发现唯一接近的人是他们的 .aspx 页面工作而不是他们的 MVC 部分。

有人知道我可以尝试什么吗？我已经研究了好几天了，但没有提出任何问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:08:13.923

我想通了。问题是由于网站中的模块造成的。这些正在做压缩之类的事情，一旦将它们取出，并将它们从 web.config 中删除，我就很容易让它工作。

# windows-mobile - 设备连接，由于磁盘空间不足

> ID：10979523
> 
> 赞同：1
> 
> 时间：2012-06-11T11:50:48.710
> 
> 标签：windows-mobile, windows-mobile-6.5

在设备模拟器中运行应用程序时收到此错误消息。

错误信息 ：

`Deployment and/or registration failed with error: 0x8973190e. Error writing file '%csidl_program_files%' Error 0x80070070: There is not enough space on the disk. Device Connectivity Component`

请建议我如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:14:15.860

模拟器和设备的空间比 PC 小得多。卸载模拟器/设备上的某些应用程序或减小可执行文件的大小。

# django - Django 社交身份验证检查电子邮件结尾

> ID：10979528
> 
> 赞同：0
> 
> 时间：2012-06-11T11:51:04.727
> 
> 标签：django, django-socialauth

有一个问题，如何检查通过 django social auth 结束的电子邮件？例如，我希望我的网站可以将电子邮件与@example.com 结尾的人联系起来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T14:44:55.653

添加一个进行检查的[管道](http://django-social-auth.readthedocs.org/en/latest/pipeline.html)条目，这样的事情应该可以解决问题：

```
def check_email(details, *args, **kwargs):
    email = details['email']
    if not email.endswith('@example.com'):
        return HttpResponseRedirect('/invalid-email') 
```

把它放在`create_user`入口和之前。考虑到某些提供商不返回电子邮件（如 Twitter）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T00:39:00.313

如果您只使用谷歌后端，您可以使用 GOOGLE_WHITE_LISTED_DOMAINS 设置。

将其设置为域列表以限制用户。

```
GOOGLE_WHITE_LISTED_DOMAINS = ['somedomain.com', 'anotherdomain.com'] 
```

更多信息在这里：

[http://django-social-auth.readthedocs.org/en/latest/backends/google.html](http://django-social-auth.readthedocs.org/en/latest/backends/google.html)

# python - Sqlalchemy：一对多关系与多对多关系相结合

> ID：10979534
> 
> 赞同：0
> 
> 时间：2012-06-11T11:51:25.460
> 
> 标签：python, sqlalchemy, flask-sqlalchemy

我有一个具有多对多关系的用户和组表

```
_usergroup_table = db.Table('usergroup_table', db.metadata,
    db.Column('user_id',  db.Integer, db.ForeignKey('user.id')),
    db.Column('group_id', db.Integer, db.ForeignKey('group.id')))

class User(db.Model):
    """Handles the usernames, passwords and the login status"""
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(60), nullable=False, unique=True)

class Group(db.Model):
    """Used for unix-style access control."""
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(60), nullable=False)
    users = db.relationship('User', secondary=_usergroup_table,
                            backref='groups') 
```

现在我想向用户类添加一个主要组。当然，我可以只添加一个 group_id 列和与 Group 类的关系，但这有缺点。我想在调用 User.group 时获取所有组，包括 primary_group。主要组应始终是组关系的一部分。

# 编辑：

似乎要走的路是关联对象

```
class User(db.Model, UserMixin):
    """Handles the usernames, passwords and the login status"""
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(60), nullable=False, unique=True)

    primary_group = db.relationship(UserGroup,
        primaryjoin="and_(User.id==UserGroup.user_id,UserGroup.primary==True)")

class Group(db.Model):
    """Used for unix-style access control."""
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(60), nullable=False)

class UserGroup(db.Model):
    user_id = db.Column(db.Integer, db.ForeignKey('user.id'))
    group_id = db.Column(db.Integer, db.ForeignKey('group.id'))
    active = db.Column(db.Boolean, default=False)

    user = db.relationship(User, backref='groups', primaryjoin=(user_id==User.id))
    group = db.relationship(Group, backref='users', primaryjoin=(group_id==Group.id)) 
```

我可以使用 AssociationProxy 简化这一点，但是如何强制每个用户只使用一个主要组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:05:36.953

使用 GroupMemberships 模型而不是 _usergroup_table 来保存关联怎么样？一个用户可以通过 Group Memberships 拥有许多组，并且一个组成员可以包含其他属性，例如给定的 Group 是否是关联用户的主要组。

编辑

为了强制每个用户一个主要组的限制，我将在用户模型中使用验证，这样任何尝试分配多于（或少于）一个主要组的尝试都会在保存记录时导致错误。我不知道有一种方法可以完全依靠数据库的完整性系统来实现相同的结果。有许多编码验证检查的方法 -[文档](http://docs.sqlalchemy.org/en/rel_0_7/orm/mapper_config.html#simple-validators)显示了使用 validates() 装饰器的好方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T22:49:59.610

您最初想到的 group_id 方法与“布尔标志”方法相比有几个优点。

一方面，它自然受到限制，因此每个用户只有一个主要组。另一方面，加载 user.primary_group 意味着 ORM 可以通过它的主键来识别这个相关的行，并且可以在本地查看它的身份映射，或者通过主键发出一个简单的 SELECT，而不是发出一个具有硬性的查询to-index WHERE 子句，其中包含一个布尔值。另一个是不需要进入关联对象模式，它简化了关联表的使用，并允许 SQLAlchemy 更有效地处理来自/到这个表的加载和更新。

下面我们使用事件，包括捕获“删除”事件的 @validates 的新版本（从 0.7.7 开始），以确保对 User.groups 和 User.primary_group 的对象级修改保持同步。（如果在 0.7 的旧版本上，您可以使用属性“remove”事件或“AttributeExtension.remove”扩展方法，如果您仍在使用 0.6 或更早版本）。如果您想在数据库级别强制执行此操作，您可以使用触发器来验证您正在寻找的完整性：

```
from sqlalchemy import *
from sqlalchemy.orm import *
from sqlalchemy.ext.declarative import declarative_base

Base= declarative_base()

_usergroup_table = Table('usergroup_table', Base.metadata,
    Column('user_id',  Integer, ForeignKey('user.id')),
    Column('group_id', Integer, ForeignKey('group.id')))

class User(Base):
    __tablename__ = 'user'
    id = Column(Integer, primary_key=True)
    name = Column(String(60), nullable=False, unique=True)
    group_id = Column(Integer, ForeignKey('group.id'), nullable=False)
    primary_group = relationship("Group")

    @validates('primary_group')
    def _add_pg(self, key, target):
        self.groups.add(target)
        return target

    @validates('groups', include_removes=True)
    def _modify_groups(self, key, target, is_remove):
        if is_remove and target is self.primary_group:
            del self.primary_group
        return target

class Group(Base):
    __tablename__ = 'group'
    id = Column(Integer, primary_key=True)
    name = Column(String(60), nullable=False)
    users = relationship('User', secondary=_usergroup_table,
                            backref=backref('groups', collection_class=set))

e = create_engine("sqlite://", echo=True)
Base.metadata.create_all(e)

s = Session(e)

g1, g2, g3 = Group(name='g1'), Group(name='g2'), Group(name='g3')
u1 = User(name='u1', primary_group=g1)

u1.groups.update([g2, g3])

s.add_all([
    g1, g2, g3, u1
])
s.commit()

u1.groups.remove(g1)
assert u1.primary_group is None
u1.primary_group = g2
s.commit() 
```

# html - 圆形按钮 - 如何将其中的文本拉伸到全宽

> ID：10979535
> 
> 赞同：2
> 
> 时间：2012-06-11T11:51:28.187
> 
> 标签：html, css, styles

我创建了一个图像来说明我的问题：

![在此处输入图像描述](../Images/ab4a41af71fb8697444f10080f19f178.png)

如你看到的。我有一个大的圆形按钮。它由 3 张图像组成。一张图片在右侧，另一张在左侧，另一张在中间。

左右图像非常宽，因为按钮中有渐变，所以我不能让它们只有 5px 宽。现在的问题是，里面的文字仅限于中间区域。我希望它延伸到整个按钮。

以下是我的风格：

```
#index-navigation ul li a {
    height: 96px;
    line-height: 96px;
    text-decoration: none;
    font-weight: bold;
    font-size: 1em;
    color: #333;
    background: url('/images/btn_grey@2x-right.png') right center no-repeat;
    padding-right: 100px;
}
#index-navigation ul li a span.left {
    background: url('/images/btn_grey@2x-left.png') left center no-repeat;
    padding-left: 100px;
}
#index-navigation ul li a span.middle {
    background: url('/images/btn_grey@2x-middle.png') left center repeat-x;
} 
```

如何编辑样式以使锚点占据按钮的整个宽度？像这样：

![在此处输入图像描述](../Images/f3e2f3a7244ba98d02b37bfa819418d1.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T12:11:19.677

您必须将您的文本移动到一个单独`span`的，以便能够将它延伸到整个`a`. 只要给你`.left`和`.right`适当的背景，让`a`主bg - [http://jsfiddle.net/JutRB/3/](http://jsfiddle.net/JutRB/3/)

```
a {
    height: 96px;
    width: 350px;
    text-decoration: none;
    font-weight: bold;
    font-size: 1em;
    color: #333;
    background: beige;
    border: 2px solid #000;
    display: inline-block;
    position: relative;
}

a span.left, a span.right {
    float: left;
    background: yellow;
    height: 96px;
    width: 100px;
    display: inline-block;
}

a span.right {
    float: right;
    background: pink;
}

a span.text {
    position: absolute;
    display: block;
    text-align: center;
    top: 30px;
    width: 100%;
}
​ 
```

**更新**

或者，如果您想要一个 CSS3 解决方案并且不关心较旧的 IE-s，那么您可以使用带有更清晰标记的`:before`伪`:after`元素 - [http://jsfiddle.net/JutRB/4/](http://jsfiddle.net/JutRB/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:16:15.147

它是滑动门技术，如今随着边框半径和优雅的退化而失宠，旧浏览器在市场上获得了牵引力。

您的演示中的 a 标签确实占据了整个区域，因为它包裹了内部 2 个跨度，您要确保删除宽度声明，以便它与文本一起扩展。

如果您有演示，我们可以更具体地为您调试它。

# mahout - 什么描述了布尔推荐器的RecommendedItem 值

> ID：10979537
> 
> 赞同：0
> 
> 时间：2012-06-11T11:51:35.233
> 
> 标签：mahout

如果计算布尔数据模型的推荐值，那么 RecommendedItems 的值字段中有一些数字。它代表什么？（可以理解，它不可能是计算出来的偏好）。

GenericRecommendedItem-API 类只说：“表示对推荐项目的偏好强度的值。值的范围取决于实现。实现必须使用更大的值来表达更强的偏好。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:59:14.330

它是故意不透明的，因此您不依赖任何特定值。如果我没记错的话，它恰好是相似性的总和——用户的项目和那个项目之间的所有相似性。

# javascript - JavaScript 在 Iframe 加载时显示加载 gif

> ID：10979541
> 
> 赞同：3
> 
> 时间：2012-06-11T11:51:48.447
> 
> 标签：javascript, iframe, loading

我需要在 iframe 加载时显示加载 GIF。
这就是我想出的：

```
<div id="m-load" style="position:relative;top:45%;left:45%;">
<img src="images/loader.gif"/></div>
<iframe src="http://myserver.com/myfile.html" id="m-iframe"></iframe> 
```

在我输入的 iframe 源文件中：(myfile.html)

```
<head>
<script>
top.document.getElementById('m-load').style.display ="none";
</script>
</head> 
```

但这在 Firefox 中不起作用（权限被拒绝）。
还有其他方法可以实现吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T11:55:06.027

您需要使用在所有 iframe 加载后触发的事件在**同一**页面上执行此操作，如下所示：`onload`

```
// show loading image

window.onload = function(){
  // hide loading image
} 
```

* * *

```
<img id="img" src="images/loader.gif"/></div>

<script>
window.onload = function(){
   document.getElementById('img').style.display = "none";
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T11:57:00.697

`iframes`不允许随便访问父内容。假设黑客在您的页面中发现了一个漏洞（例如，您有一个评论表单，允许`iframe`s 用于任何目的。如果他们只能访问父级，他们就可以在您的网站上到处走动。

你可以改用`postMessage`. 因为页面和 iframe 现在都同意如何通信以及什么构成有效通信，所以您无法任意访问您的页面。[http://robertnyman.com/2010/03/18/postmessage-in-html5-to-send-messages-between-windows-and-iframes/](http://robertnyman.com/2010/03/18/postmessage-in-html5-to-send-messages-between-windows-and-iframes/)有一个很好的教程

# google-maps - 用于搜索陈列室的 Google Map API

> ID：10979542
> 
> 赞同：0
> 
> 时间：2012-06-11T11:51:51.020
> 
> 标签：google-maps, google-maps-api-3

我正在使用 Google Maps API 在特定位置查找陈列室（例如，奥迪汽车）。

我尝试了 Google Maps Places API

`https://maps.googleapis.com/maps/api/place/details/output?parameters`

但没有结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T05:10:47.930

您可以指定以下参数：`"output"`和`"parameters"`

```
output = {json, xml}

parameters = {location, radius, types, language, name, sensor, key} 
```

有关详细信息，请参阅文档：[https ://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)

# javascript - javascript - 在 URL 元素后附加文本

> ID：10979543
> 
> 赞同：0
> 
> 时间：2012-06-11T11:51:53.093
> 
> 标签：javascript, html

有没有办法使用 javascript 将某些内容附加到 URL？并删除前缀？

例如“http://www.google.com/”变成“google.com.local/”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:54:45.577

该`concat()`方法用于连接两个或多个字符串。

此方法不会更改现有字符串，而是返回一个包含连接字符串文本的新字符串。在你的情况下：

```
var mystring = concat("http://www.google.com",".local"); 
```

对于从字符串中删除部分 - 使用`split()`方法将字符串拆分为子字符串数组，并返回新数组。

提示：如果使用空字符串 ("") 作为分隔符，则字符串将在每个字符之间进行分割。

注意：该`split()`方法也不会更改原始字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:54:48.540

您可以使用 window-object 更改 URL，例如：

```
window.location.href = url + '/' + ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T11:57:04.017

那这个呢？

```
var url = "http://www.google.com/";
url.replace(/^(https?:\/\/)?(\w+\.)?(\w+\.\w+)/, "$3.local"); 
```

**演示：http:** [//jsfiddle.net/qn5h5/](http://jsfiddle.net/qn5h5/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-11T11:54:40.027

javascript 位置对象[http://www.w3schools.com/jsref/obj_location.asp](http://www.w3schools.com/jsref/obj_location.asp)使您可以访问 url 的主机名路径等。我不完全知道您在寻找什么，但这可以提供帮助。

# php - joomla 2.5 管理面板的文件上传器

> ID：10979545
> 
> 赞同：0
> 
> 时间：2012-06-11T11:51:58.203
> 
> 标签：php, joomla

我需要有关如何在 Joomla 管理面板组件中实现文件上传代码的帮助。我需要在 joomla CSS 编辑器页面上传文件，管理员可以从该页面上传新的 CSS。我检查了一些链接，如[http://docs.joomla.org/Creating_a_file_uploader_in_your_component](http://docs.joomla.org/Creating_a_file_uploader_in_your_component) 但无法理解。请提供任何帮助，我们将不胜感激。

谢谢，曼普里特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:14:53.087

你很幸运，因为我刚刚使用 SWFUpload 为文件上传器构建了一个免费组件。您可以从下面的链接下载它。

[http://joomjunk.co.uk/products/component-home/swfupload.html](http://joomjunk.co.uk/products/component-home/swfupload.html)

我为 Joomla 2.5 制作了尽可能简单的组件，以便人们可以轻松地将它集成到他们自己的组件中。我希望这是您正在寻找的，如果您需要帮助，请随时提出。

# sql-server - 如何从 SQL Server 数据库中获取 nvarchar 数据

> ID：10979549
> 
> 赞同：0
> 
> 时间：2012-06-11T11:52:14.533
> 
> 标签：sql-server, vb.net, getstring

我想从`nvarchar`列（SQL Server 数据库）中获取一些值。我的代码如下所示：

```
Dim value1 As String

Dim con2 As New System.Data.SqlClient.SqlConnection
con2.ConnectionString = "data source=AAA;initial catalog=DWH;integrated security=SSPI;"

con2.Open()

Dim retrieveGSFdata As New System.Data.SqlClient.SqlCommand
retrieveGSFdata.Connection = con2
retrieveGSFdata.CommandText = "SELECT * FROM table1"

Dim myGSFdataReader as System.Data.SqlClient.SqlDataReader
myGSFdataReader = retrieveGSFdata.ExecuteReader()

Dim iteratorGSF As Integer
iteratorGSF = 0

while(myGSFdataReader.read())

    Select Case iteratorGSF
      case 0:
        if myGSFdataReader.IsDBNull(4)
           value1 = 0
        else
           value1 = myGSFdataReader.GetString(4)
        end if
    End Select  

    iteratorGSF = iteratorGSF + 1

End while

myGSFdataReader.Close()
con2.Close() 
```

只有当列中有数值时它才能正常工作。但是在此列中存储了可变字符值，并且这种类型的值不会显示在页面上。我不知道是什么原因。

我尝试使用`getValue.ToString`而不是，`getString`但它也不起作用。

我会很感激你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:10:33.023

尝试

value1 = myGSFdataReader.GetValue(4)

或者

value1 = CStr(myGSFdataReader.GetValue(4))

# php - 使用 PHP 填充 Google 图表数据会破坏交互性

> ID：10979551
> 
> 赞同：0
> 
> 时间：2012-06-11T11:52:23.063
> 
> 标签：php, google-visualization

我目前正在使用带有 PHP 的 Google Charts 来填充数据，但图表的交互性停止工作，我不知道为什么。

代码如下：

```
<?php
// Connect to DB and execute while loop to get values
...
...

echo '<div id="chart_div"></div>';

?>

<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">

  // Load the Visualization API and the piechart package.
  google.load('visualization', '1.0', {'packages':['corechart']});

  // Set a callback to run when the Google Visualization API is loaded.
  google.setOnLoadCallback(drawChart);

  // Callback that creates and populates a data table,
  // instantiates the pie chart, passes in the data and
  // draws it.
  function drawChart() {

    // Create the data table.
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Review Score');
    data.addColumn('number', 'Number of Reviews');
    data.addRows([
      ['1 Star Reviews', <?php echo $one; ?>],
      ['2 Star Reviews', <?php echo $two; ?>],
      ['3 Star Reviews', <?php echo $three; ?>],
      ['4 Star Reviews', <?php echo $four; ?>],
      ['5 Star Reviews', <?php echo $five; ?>]
    ]);

    // Set chart options
    var options = {'title':'Breakdown of Review Scores',
                   'is3D':true,
                   'width':600,
                   'height':400};

    // Instantiate and draw our chart, passing in some options.
    var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  } 
```

即使我`chart_div`在 javascript 之后移动到它也不起作用。

万一有人问 js 不在`head`标签中，那是因为我还显示了一个填充了 sql 查询结果的表，并根据这些结果计算总计以在图表中使用。

我已经找到了这个页面，但不明白为什么会改变任何东西： [https ://developers.google.com/chart/interactive/docs/php_example](https://developers.google.com/chart/interactive/docs/php_example)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:20:05.227

我的意思是尽快更新，但问题出在其他地方 - 当使用 php 填充图表数据时，Google Charts 工作得非常好。

# flash - Flex mobile：如何禁用精灵/位图的缩放平滑

> ID：10979552
> 
> 赞同：2
> 
> 时间：2012-06-11T11:52:26.700
> 
> 标签：flash, apache-flex, mobile, air, smoothing

在我的 Flex 移动项目中，我需要用几条线和矩形绘制一个精灵，然后在不平滑边缘的情况下旋转/缩放它。问题是 - 第一次绘制精灵时，没有平滑，但是一旦旋转/缩放，线条和矩形边缘就会变得平滑（或抗锯齿？）。即使将旋转设置回 0 并将 scaleX scaleY 设置回 1，它们也会保持平滑。

我尝试像这样将我的精灵转换为位图：

```
stage.quality=StageQuality.LOW; // for performance reasons
.......
var tempSprite:Sprite=new Sprite();
// draw stuff on tempSprite

var b:BitmapData = new BitmapData(w, h, true, 0x0);
b.draw(tempSprite,null,null,null,null,false); // smoothing=false
var bitmap:Bitmap = new Bitmap(b,"auto",false); // smoothing=false
bitmap.smoothing=false; 
myUIComponent.addChild(bitmap); 
```

但这并没有帮助 - 旋转/缩放位图时仍然会变得平滑。

所以，我的问题是：当旋转和缩放值被重置时，是否可以完全禁用平滑或至少将精灵返回到未平滑状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T21:17:49.387

如果您使用 AIR for mobile 并启用 GPU 模式，那么您的位图将始终被平滑。您真正能做的就是通过不缩放/旋转位图来隐藏平滑，并确保绘制列表层次结构中的任何容器都不是。我遇到了和你类似的问题，我唯一的解决办法是重写我的显示缩放代码，所以我只能忍受模糊，直到我的下一个项目。

# jquery - 每次访问只运行一次 JQuery 函数

> ID：10979562
> 
> 赞同：1
> 
> 时间：2012-06-11T11:53:00.660
> 
> 标签：jquery, fadeout

我有一个简单的 JQuery 函数 - 只是在索引页面上淡出一个 div：

```
$('#startup').delay(1500).fadeOut(2000); 
```

这只是一个启动屏幕，其中包含用户第一次访问该站点时看到的消息。

我想知道是否有人知道每次访问只显示一次启动消息的方法。EG：如果用户从 aboutus 页面导航回索引页面，我不希望启动 div 再次出现。

有谁知道实现这一目标的方法？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T11:57:50.337

您可以将访问时间存储在 localStorage 中并检查它。

```
var now = (new Date()).getTime();
var lastTime = 0;
var lastTimeStr = localStorage['lastTime'];
if (lastTimeStr) lastTime = parseInt(lastTimeStr, 10);
if (now - lastTime > 24*60*60*1000) {
     // do animation
} 
localStorage['lastTime'] = ""+now; 
```

编辑：我做了一个小提琴来演示它：

[http://jsfiddle.net/dystroy/jAjLB/](http://jsfiddle.net/dystroy/jAjLB/)

您将在第一次看到动画，但不是第二次，除非您等待一分钟（您可以将其设置为您的站点的几个小时）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T11:55:42.423

您可以设置一个 cookie，可以检查这是否是第一次访问。

如果您希望它显示“每次访问”，可以将其设置为在会话结束时过期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T11:59:46.883

我会为此使用 localstorage... Cookie 与页面标题一起发送，如果服务器不关心此值，则无需使用它们。

```
 /* Here are some utility localStorage functions */
    function store_data(data, key) {
        if (!window.localStorage || !window.JSON) {
            return;
        }
        key = key || data_key;
        localStorage.setItem(key, JSON.stringify(data));
    }

    function get_data(key) {
        if (!window.localStorage || !window.JSON) {
            return;
        }
        key = key || data_key;
        var item = localStorage.getItem(key);

        if (!item) {
            return;
        }

        return JSON.parse( item );
    }

    function remove_data(key) {
        if (!window.localStorage || !window.JSON) {
            return;
        }
        key = key || data_key;
        localStorage.removeItem(key);
    }
   /* and the check */ 
   var now = (new Date()).getTime(),
       then = parseInt(get_data('last_visit'), 10) || 0,
       diff = now - then;
    if( diff > 24*60*60*1000 ) {
       $('#startup').delay(1500).fadeOut(2000);
       store_data('last_visit', (new Date()).getTime());
    } 
```

# asp.net - Gridview Row - 值和列名

> ID：10979563
> 
> 赞同：0
> 
> 时间：2012-06-11T11:53:06.370
> 
> 标签：asp.net, gridview

我想获取单击的列的名称和单击的行的值。

我找到了很好的例子，但我无法获得我想要的数据。

```
protected void GridView1_RowCreated(object sender, GridViewRowEventArgs e)
        {
            if (e.Row.RowType == DataControlRowType.DataRow)
            {
                e.Row.Attributes["onClick"] = "location.href='view.aspx?id_lekarza=" + DataBinder.Eval(e.Row.DataItem, "Id_lekarza") + " &klikniete=" + "sss" + " '";
            }
        } 
```

e.Row.RowIndex 一直为 0？

```
 protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
        {
            if (e.Row.RowType == DataControlRowType.DataRow)
            {
                e.Row.Attributes.Add("onclick", "javascript:alert('" + e.Row.RowIndex + "');");
                e.Row.Style.Add("cursor", "pointer");
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:02:22.173

在您的 GridView 中，您可以添加如下模板字段：

```
<asp:TemplateField ItemStyle-Width="44px" ItemStyle-HorizontalAlign="Center" ItemStyle-VerticalAlign="Middle"
                            HeaderStyle-Height="40px" ShowHeader="false">
                            <ItemTemplate>
                                <asp:ImageButton ID="btnSelect" runat="server" ImageUrl="~/Images/btnSelect.png"
                                    CommandName="Select" CommandArgument='<%# Eval("ID") %>'/></ItemTemplate>
                            <HeaderStyle Height="40px"></HeaderStyle>
                            <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" Width="44px"></ItemStyle>
</asp:TemplateField> 
```

在您的 C# 代码隐藏中，您应该创建 Gridview 的 RowCommand 事件，并访问该行的 CommandArgument，如下所示：

```
 protected void GV_RowCommand(object sender, GridViewCommandEventArgs e)
{
if (e.CommandName == "Select")
    {
     //You get the ID of that specific row that you have selected :
     string ID=e.CommandArgument.ToString();
     //Here you write your code !          For example a select query to get that row from database by the ID you have  gained in above line of code
    }
} 
```

# rss - 如何获取多站点 wordpress 博客的自定义字段 rss 提要

> ID：10979565
> 
> 赞同：0
> 
> 时间：2012-06-11T11:53:07.263
> 
> 标签：rss, wordpress

我有一个多站点 Wordpress 博客，其中包含三个自定义字段，其中包含微博的文本标题和两个图像字段。我想得到这些也在 RSS 提要中。我已经尝试过[这个堆栈溢出](https://stackoverflow.com/questions/1333228/custom-fields-in-wordpress-rss-feed)帖子，但它对我不起作用。是否有任何针对多站点的特定插件，或者我该怎么做？请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:26:11.907

我建议制作一个全新的 RSS。
只需制作一个主题模板：[http ://codex.wordpress.org/Theme_Development#Custom_Page_Templates](http://codex.wordpress.org/Theme_Development#Custom_Page_Templates)

只需将原始 RSS 提要中的代码粘贴到`/wp-includes/feed-rss.php`
并编辑这些循环。

之后制作一个页面并将其分配给这个新创建的模板。

# javascript - 在动态 div 中间插入文本

> ID：10979571
> 
> 赞同：1
> 
> 时间：2012-06-11T11:53:16.263
> 
> 标签：javascript, jquery, html

如何在文本中间插入文本？

这是我的代码：

```
<div class="MyText"> some content some dynamic dontent. my color is BLUE. some content </div> 
```

在这里，我需要通过 Jquery 将值“蓝色”更改为任何其他颜色。div中的其他内容是动态来的，所以除了html()，append()，还有什么办法可以像php一样填充吗？

在这里，我们可以像这样通过 php

```
 <div class="MyText"> some content some dynamic dontent. my color is <?php echo("blue") ?>. some content </div> 
```

我们可以用 Jquery/Javascript 来做吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T11:56:26.167

使用带有可以轻松检索的 id 的 SPAN 标签。然后，您可以安全地更改内容，而无需进行脆弱的操作。

```
<div class="MyText"> some content some dynamic dontent. my color is <span id="myColour">BLUE</span>. some content </div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T12:04:48.230

```
 <div class="MyText"> some content some dynamic dontent. my color is <span id="blue" style="display:none">BLUE</span>. some content </div>

 <button onclick="document.getElementById('blue').style.display='inline'">click me</button> 
```

对不起，但我不能给你一个 jsfiddle 但这会奏效。

# php - 不推荐使用：调用 exec() 函数时不推荐使用调用时传递引用

> ID：10979577
> 
> 赞同：2
> 
> 时间：2012-06-11T11:53:33.623
> 
> 标签：php

运行以下代码时：

```
<?php
    $output = array();
    exec("ping google.com", &$output);
    foreach ($output as $key => $value) {
        echo $value . "<br/>";
    }
?> 
```

**被弃用**：如下

```
 Call-time pass-by-reference has been deprecated in C:\xampp\htdocs\my_test\ajax_loop.php on line 3. 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:09:51.373

您需要从`&$output`确实删除参考运算符。

很少有教程提供如下函数的语法（本例中为 exec）。

```
string exec ( string $command [, array &$output [, int &$return_var ]] ) . 
```

'&' 不是引用运算符，它仅表示它们是输出变量，这意味着您可以期望这些变量的值在函数调用后用输出数据填充。在这种情况下*，在函数调用之后*，`$output`数组将被您尝试执行的命令的所有输出行填充。将`$return_var`具有返回状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:57:41.223

只需删除引用运算符，不需要它：

```
...
exec("ping google.com", $output);
... 
```

# c# - 使用 asp.net 进行电子邮件跟踪

> ID：10979580
> 
> 赞同：0
> 
> 时间：2012-06-11T11:53:52.693
> 
> 标签：c#

我想跟踪阅读过我邮件的用户。我正在这样做，但它不起作用我在 Outlook 中向自己发送邮件。这是我发送邮件的代码

```
 try
        {

        string emailTemplateBody = "Hy this is test mail";
        emailTemplateBody += "<tr><img src=''http://localhost:52583/HttpModule_using_beacon_images/images/<keyvalue>.aspx''  style=''opacity:0.0; filter:alpha(opacity=0);'' /></tr>";

        string templateName = txtTemplateName.Text;

                    string toEmail = mymailaddress

        //// Get unique Key after registring mail to be sent
        string key = bl_email_calls.RegisterSystemEmailAudit("1", templateName, DateTime.Now);
        emailTemplateBody = emailTemplateBody.Replace("<keyvalue>", key);
        //// sending e-mail
        bl_email_calls.SendMailMessage(toEmail, templateName, emailTemplateBody, key);
        using (var cn = new SqlConnection(ConfigurationManager.ConnectionStrings["webConnectionString"].ToString()))
        {
           //code to insert record in database;            }
        Response.Write("Mail sent");
        // return false;
    }
    catch (Exception ex)
    {

        throw;
    } 
```

这是我从 http://www.aspnetemail.com/samples/emailtracker/default.aspx[^] 使用的 HTTP 模块

```
public class HttpModuleClass : IHttpModule
{
    //public event EventHandler BeginRequest;

    public void Dispose()
    {

    }

    /// <summary>
    /// public varibles
    /// </summary>
    string footerFile = "~/images/footer.png";
    //string footerFile = "~/images/ajax-loader.gif";
    Email_Calls bl_email_calls = new Email_Calls();

    /// <summary>
    /// Init methoed
    /// </summary>
    /// <param name="context"></param>
    public void Init(HttpApplication context)
    {
        context.BeginRequest += new System.EventHandler(GetImage_BeginRequest);
    }

    /// <summary>
    /// handles requests made to server and call update email read time
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="args"></param>
    public void GetImage_BeginRequest(object sender, System.EventArgs args)
    {
        //cast the sender to a HttpApplication object
        System.Web.HttpApplication application = (System.Web.HttpApplication)sender;

        string url = application.Request.Path; //get the url path
        //string pattern = @"/HttpModule/images/(?<key>.*)\.aspx";
        //string pattern = @"/HttpModule_using_beacon_images/images/(?<key>.*)\.aspx";

        string pattern = @"/HttpModule_using_beacon_images/images/(?<key>.*)\.aspx";
        //string pattern = @"~/images/(?<key>.*)\.aspx";
        //create the regex to match for beacon images
        Regex r = new Regex(pattern, RegexOptions.Compiled | RegexOptions.IgnoreCase);
        if (r.IsMatch(url))
        {
            MatchCollection mc = r.Matches(url);
            if ((mc != null) && (mc.Count > 0))
            {
                string key = (mc[0].Groups["key"].Value);
                bl_email_calls.UpdateSystemEmailAuditReadDate(key);

            }

            //now send the REAL image to the client
            //application.Response.ContentType = "image/gif";
            application.Response.ContentType = "image/png";

            application.Response.WriteFile(application.Request.MapPath(footerFile));

            //end the response
            application.Response.End();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:59:55.247

要请求已读回执，我们需要添加`'Disposition-Notification-To'` 在此示例中命名的自定义标头，已读回执将返回到“someaddress@mydomain.com”。重要的是要注意，已读回执只会由那些支持它们的邮件客户端发送b) 启用它们。

//添加`"Disposition-Notification-To"`已读回执

```
 mail.Headers.Add("Disposition-Notification-To", "<mail@yahoo.com>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T03:52:29.683

我知道了。我犯了一些小错误。

实际上，我正在将电子邮件正文保存到数据库中，所以我不得不使用`''`而不是，`'`这很麻烦。当被删除''它工作正常。

# ruby - 为什么 \xF3 不被识别为 UTF-8

> ID：10979590
> 
> 赞同：2
> 
> 时间：2012-06-11T11:54:08.477
> 
> 标签：ruby, mongodb, mongoid, padrino

我有这个哈希：

```
a={"topic_id"=>60693, "urlkey"=>"innovacion", "name"=>"Innovaci\xF3n"} 
```

当我收到此错误时，我正在尝试使用 Mongoid 将其保存到 MongoDB：

```
BSON::InvalidStringEncoding: String not valid UTF-8 
```

然后我正在尝试`gsub`它：

```
a["name"].gsub(/\xF3/,"o") 
```

我得到：`SyntaxError: (pry):12: too short escaped multibyte character: /\xF3/`

我在模型文件的开头添加了一条神奇的注释：`# encoding: UTF-8`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T13:09:25.093

十六进制 0xF3 本身*不是*有效的 UTF-8。大于 0x7F 的值都是多字节字符。是什么让您认为它应该是 UTF-8？

您可以在此处阅读允许的序列：[http ://en.wikipedia.org/wiki/UTF-8#Description](http://en.wikipedia.org/wiki/UTF-8#Description)

如果您需要强制 ruby​​ 字符串采用允许任意字节序列的编码，您可以将其强制为二进制：

```
str.force_encoding("BINARY") 
```

使用二进制编码`#gsub`和其他依赖有效编码的字符串操作将在逐个字节的基础上工作，而不是在逐个字符的基础上工作。

# php - pdf2swf复制失败前的php检查

> ID：10979591
> 
> 赞同：2
> 
> 时间：2012-06-11T11:54:14.123
> 
> 标签：php, pdf, pdf2swf

我有个问题。我使用 pdf2swf 工具来转换 pdf，以便我可以在网站上显示它。大多数 PDF 将被转换。

但是今天我在网站上发现了一个 PDF，因为转换失败，所以无法显示。

它抛出此消息

```
FATAL   PDF disallows copying 
```

我知道这是因为 pdf 中的安全设置。但我想知道如果pdf有这样的限制，是否可以签入php。

如果无法转换 pdf，我可以显示一条消息。

谢谢

编辑：我找到了问题的解决方案.. pdf`s 被保护免受复制，因此 pdf2swf 没有复制或操作 pdf 的权限.. 就像其他人有同样问题的信息一样

# javascript - 将 UTC 日期格式转换为 javascript 格式

> ID：10979595
> 
> 赞同：0
> 
> 时间：2012-06-11T11:54:36.483
> 
> 标签：javascript, date, date-formatting

如何将日期从：转换
`Thu, 1 July 2011 22:30:00`为`'2011-07-01T13:51:50.417'`使用 javascript。

当我做一个新的日期时，我得到了 UTC 格式。

当我第一次创建日期对象时，IE 给我带来了问题，如下所示：`NaN`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:02:44.060

您可以生成一个新的日期对象，然后获取不同的部分：

```
var today = new Date();
var year = today.getFullYear(); // Returns 2012
var month = today.getMonth()+1; // Returns the month (zero-based)
... 
```

然后，您可以根据需要创建一个新字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:01:09.223

可能重复尝试搜索下次 [stackoverflow问题](https://stackoverflow.com/questions/498578/how-can-i-convert-a-date-value-in-utc-format-to-a-date-object-in-javascript?rq=1)
尝试[http://www.datejs.com/](http://www.datejs.com/)。它是一个 JavaScript 日期库，具有扩展的 Date.parse 方法和 Date.parseExact 方法，可让您指定格式字符串。请参阅 DateJS API 文档。

然后你可以随心所欲地操纵它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T12:04:43.767

d3.js 库有一些非常可靠的日期转换例程。请参阅[https://github.com/mbostock/d3/wiki/Time-Formatting#wiki-parse](https://github.com/mbostock/d3/wiki/Time-Formatting#wiki-parse)。

# html - 是否可以交替行跨度？

> ID：10979596
> 
> 赞同：6
> 
> 时间：2012-06-11T11:54:39.960
> 
> 标签：html

我想我正在尝试做的这个模式将比问题本身更具描述性。

```
+------------------------+-----------------------+
|                        |                       |
+                        +-----------------------+
|                        |                       |
+------------------------+                       +
|                        |                       |
+                        +-----------------------+
|                        |                       |
+------------------------+-----------------------+
|                        |                       |
+------------------------+-----------------------+ 
```

如您所见，我正在尝试创建一个 2 列的表，在该表中，它应该能够跨行其中一列，并最终跨越接下来的 2 行。

我是否错过了一些明显的方法，或者一些高级表格标签/属性？还是没有办法使用表格来做到这一点？

我知道可以使用其他方式来实现这一点，但表格是我感兴趣的，问题是什么。

供参考：有些事情我已经尝试过但没有成功 [http://jsfiddle.net/dbtYk/](http://jsfiddle.net/dbtYk/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T11:58:51.003

除非我错过了什么，[这是一个](http://jsfiddle.net/dbtYk/2/)基于你的 jsfiddle的例子

```
<table>
    <tr style="height:20px;">
        <td rowspan="2">left</td>   
        <td>right</td>
    </tr>
    <tr style="height:20px;">
        <td rowspan="2">right</td>   
    </tr>
    <tr style="height:20px;">
        <td rowspan="2">left</td>   
    </tr>
    <tr style="height:20px;">
        <td>right</td>   
    </tr>
    <tr>
        <td>left</td>   
        <td>right</td>   
    </tr>
</table> 
```

**更新**

正如 Cicada 所指出的，不幸的是，上述内容在 Chrome 中不起作用。

**更新 2**

正如 Alohci 所指出的，添加高度可以使其在 Chrome 中工作。上面已经修改以反映这一点，以及一个[新的 jsfiddle](http://jsfiddle.net/dbtYk/50/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:00:57.277

当然这是可能的:-)

```
<table border="yes">
    <tr>
        <td rowspan="2">1</td>
        <td>2</td>
    </tr>
    <tr>
        <td rowspan="2">3</td>
    </tr>
    <tr>
        <td rowspan="2">4</td>
    </tr>
    <tr>
        <td>5</td>
    </tr>
    <tr>
        <td>6</td>
        <td>7</td>
    </tr>
</table> 
```

只需跳过前一行中已被跨单元格覆盖的单元格。

# java - 如何在结果集中追加数据？

> ID：10979602
> 
> 赞同：0
> 
> 时间：2012-06-11T11:54:50.867
> 
> 标签：java, jakarta-ee, jdbc

我想在结果集中附加两个表的数据。我已经尝试了下面的代码，但没有得到想要的输出只有第一个结果集数据，即第一个表数据

```
 ResultSet rs=null;
            String sql_query="select * from exception_main;select * from m_roles"
            String query1=sql_query.toUpperCase();
                        String[] results=query1.split(";");
                for(int i=0;i<results.length;i++)
                    {
                        if(results[i].startsWith("SELECT"))
                        {
                            System.out.println("Inside select"+ results[i]);
                        ps = conn1.prepareStatement(results[i].toString());
                        rs = ps.executeQuery();

    ...
                   //writing to csv file
                    CSVWriter writer = new CSVWriter(new FileWriter(csv_file_path + csv_file_name), ',',CSVWriter.NO_QUOTE_CHARACTER);
                    System.out.println("Count..." + rs.getRow());
                    writer.writeAll(rs, true);
                    System.out.println("Count...2::::" + rs.getRow());
                    writer.close();
                     while(rs.next()){

                            rs.deleteRow();

                          }
                     System.out.println("Count...3:::::::" + rs1.getRow());
}
} 
```

我在所有三个地方都将计数为 0 请指导我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T11:57:51.307

`ResultSet`在使用相同的连接执行新查询之前，您应该从每个中提取所有数据。

在幕后，该`ResultSet`对象正在使用连接/语句来从数据库中提取数据。当您使用该连接执行新查询时，现有查询信息将被丢弃。

因此，在执行下一个查询之前，您应该遍历每个`ResultSet`并拉取数据（很可能是到自定义对象中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T04:15:47.027

在 for 循环之前打开文件并在之后关闭它，而不是每次循环打开和关闭它。

```
ResultSet rs=null;
                String sql_query="select * from exception_main;select * from m_roles"
                String query1=sql_query.toUpperCase();
                            String[] results=query1.split(";");
        CSVWriter writer = new CSVWriter(new FileWriter(csv_file_path + csv_file_name), ',',CSVWriter.NO_QUOTE_CHARACTER);
                    for(int i=0;i<results.length;i++)
                        {
                            if(results[i].startsWith("SELECT"))
                            {
                                System.out.println("Inside select"+ results[i]);
                            ps = conn1.prepareStatement(results[i].toString());
                            rs = ps.executeQuery();

        ...
                       //writing to csv file

                        System.out.println("Count..." + rs.getRow());
                        writer.writeAll(rs, true);
                        System.out.println("Count...2::::" + rs.getRow());
                                             while(rs.next()){

                                rs.deleteRow();

                              }
                         System.out.println("Count...3:::::::" + rs1.getRow());
    }
    }
    writer.close(); 
```

# sql - 如果字段已更改，则 SQL 插入行（高性能）

> ID：10979603
> 
> 赞同：1
> 
> 时间：2012-06-11T11:54:52.433
> 
> 标签：sql, postgresql

我的表有这些字段：

```
SENSOR_ID INTEGER, 
SENSOR_READING REAL, 
TIME_OF_READING TIMESTAMP, 
HASCHANGED BOOLEAN 
```

每个传感器每天触发 >10,000 个读数。我只想记录 SENSOR_READING 与上次记录的值不同的那些数据点。

或者，只要 SENSOR_READING 与上次记录的值不同，我可以记录所有内容，但将 HASCHANGED 设置为 true。

实现这一目标的最佳语法是什么（使用 PostgreSQL，没有 php 逻辑）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:02:32.000

您应该有一个包含传感器及其当前读数的表格，以及`UPDATE`传感器事件。如果新读数不同，则使用触发器写入日志表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T11:57:41.853

我想您必须在放置最后一个值的位置添加一列，然后在每次“读​​取”时，您可以在这两列之间进行比较。

这是一种“纯 sql”方法，但有更好的解决方案，比如回调（你告诉过 php，所以我建议 symfony 和教义可以为你做到这一点，如果你必须做一些步骤，这是一种有效的方法，如果值被改变或类似的东西......）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T12:04:25.740

你可以做这样的事情

```
insert into readings (sensor_id, sensor_reading, time_of_reading)
select 42, 1234.5678, current_timestamp
from readings
where not exists (select * 
                  from readings 
                  where sensor_reading = 1234.5678
                    and time_of_reading = (select max(time_of_reading)
                                           from readings
                                           where sensor_id = 42); 
```

这将需要对`sensor_reading`列进行索引，但我仍然怀疑它实际上会更快。

您不需要存储`haschanged`属性，因为您可以在检索数据时计算它：

```
select sensor_id,
       sensor_reading,
       time_of_reading,
       lag(sensor_reading) over (partition by sensor_id order by time_of_reading) = sensor_reading as has_changed
from readings; 
```

这假设它`sensor_id`实际上并不是唯一的，否则您不能为传感器存储多个读数

它进一步假设您将该`REAL`列更改为一`NUMERIC`列，因为`REAL`使用的值`=`不准确（实际上存储开始时不准确）

# r - 从 data.frame 中各列的每一行中随机选择值并在 R 中平均它们

> ID：10979604
> 
> 赞同：0
> 
> 时间：2012-06-11T11:54:53.937
> 
> 标签：r, random, dataframe, reliability, mean

这个问题与我在这里提出的前一个问题相似：[从行中随机求和值并将它们分配给 R 中的 2 列](https://stackoverflow.com/q/10956863/1383612)

由于我在使用 R 时遇到困难，所以这个问题既是关于编程的，也是关于统计的。我对两者都很陌生。

我有一列中有 219 个主题的 data.frame。其余的列是 7，在每一行中，我都有一个数字，代表该特定受试者在暴露于两种实验条件时的响应时间差异。

这是数据的样子（我使用的是 head 函数，否则会太长）：

```
 > head(RTsdiff)
      subject   block3diff   block4diff   block5diff   block6diff   block7diff
    1   40002  0.076961798  0.046067460 -0.027012048  0.017920261  0.002660317
    2   40004  0.037558511 -0.016535211 -0.044306743 -0.011541667  0.044422892
    3   40006 -0.017063123 -0.031156150 -0.084003876 -0.070227149 -0.113382784
    4   40008 -0.015204017 -0.009954545 -0.004082353  0.006327839  0.022335271
    5   40009  0.006055829 -0.045376437 -0.002725572  0.016443182  0.032848128
    6   40010 -0.003017857 -0.034398268 -0.034476491  0.014158824 -0.036592982
       block8diff    block9dif
    1  0.03652273  0.037306173
    2 -0.08032784 -0.150682051
    3 -0.09724864 -0.060338684
    4 -0.04783333  0.006539326 
    5 -0.01459465 -0.067916667
    6 -0.01868126 -0.034409584 
```

我需要的是一个代码，它将对每个主题（即每一行）采样 3 个或 4 个值，将它们平均，并将它们添加到一个新向量（称为 half1）中。向量 half2 应该具有在第一次尝试中未采样的值的平均值。

因此，假设我想要创建的 data.frame 被称为“RTshalves”，我需要第一列是 RTsdiff 中的同一列主题，第二列必须在第一行中包含随机选择的值的平均值对应于第一个主题，并且第二列必须具有第一个主题在第一次采样中未选择的值的平均值。第 2 列和第 3 列的第二行应该具有相同的信息，但这次是针对主题 2（即我的 data.frame 中的主题 40004）等，直到达到 219 个主题。

假设第一个样本随机选择了对象 1 的 3 个值（block3diff、block5diff 和 block9diff），因此 block4diff、block6diff、block7diff 和 block8diff 的值将自动对应另一半。然后，我希望看到的（仅考虑 219 行中的第一行）是：

```
 Subject     Half1       Half2 
    40002   0.02908531   0.02579269 
```

如果有人对此背后的统计数据感兴趣，我正在尝试进行拆分可靠性测试以检查测试的一致性。基本原理是，如果 RT 平均值的差异是效果的可靠估计量，那么一个参与者的一半块的差异应该与另一半块的差异相关。

非常感谢您的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:00:58.617

half1 很简单：编写你自己的函数来对每一行做你想做的事情（作为一个向量），然后`apply`它对行：

```
eachrow <- function(x) {
   mean(sample(x,2))
}
RTsdiff$half1 <- apply(eachrow,1,RTsdiff) 
```

要获得 half2，您可能需要同时进行。 `ddply`这可能是最简单的（让 by 参数成为您获取每一行的主题变量）。像这样：

```
RTsdiff <- data.frame(subject=seq(6))
RTsdiff <- cbind( RTsdiff, matrix(runif(6*8),ncol=8) )

library(plyr)
eachrow <- function(x,n=3) {
  x <- as.numeric(x[,2:ncol(x)]) # eliminate the ID column to make things easier, make a vector
  s <- seq(length(x))
  ones <- sample(s,n) # get ids for half1
  twos <- !(s %in% ones) # get ids for half2
  data.frame( half1=mean(x[ones]), half2=mean(x[twos]) )
}
ddply( RTsdiff, .(subject), eachrow)

  subject     half1     half2
1       1 0.4700982 0.5350610
2       2 0.6173469 0.5351995
3       3 0.2245246 0.6807482
4       4 0.6330649 0.6316353
5       5 0.6388060 0.6629077
6       6 0.4652086 0.5073034 
```

有很多更优雅的方法可以做到这一点。特别是，我使用`ddply`了它轻松输出 data.frames 的能力，以便我可以同时输出`half1`和`half2`从函数输出，并在最后将它们很好地组合起来，但`ddply`需要 data.frames 作为输入，所以需要一些小技巧来获得它首先输出一个向量。提供转置的data.frame`sapply`可能会更简单。

# concurrency - 是否可以将多个通道复用为一个？

> ID：10979608
> 
> 赞同：13
> 
> 时间：2012-06-11T11:55:19.203
> 
> 标签：concurrency, go, channel

这个想法是在一个切片中拥有可变数量的通道，将通过它们接收到的每个值推送到单个通道中，并在最后一个输入通道关闭后关闭此输出通道。像这样的东西，但对于两个以上的频道：

```
func multiplex(cin1, cin2, cout chan int) {
    n := 2
    for {
        select {
        case v, ok := <-cin1:
            if ok {
                cout <- v
            } else {
                n -= 1
            }

        case v, ok := <-cin2:
            if ok {
                cout <- v
            } else {
                n -= 1
            }
        }

        if n == 0 {
            close(cout)
            break
        }
    }
} 
```

上面的代码避免了繁忙的循环，因为没有`default`案例，这很好（编辑：看起来“，ok”的存在使得选择语句非阻塞并且循环毕竟是繁忙的。但是为了示例，把代码想象成它会阻塞）。是否也可以通过任意数量的输入通道来实现相同的功能？显然，这可以通过将切片成对地减少到单个通道来完成，但如果可能的话，我会对更简单的解决方案更感兴趣。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-11T18:12:57.260

我相信这个片段可以满足您的需求。我已经更改了签名，因此很明显输入和输出只能用于一个方向的通信。注意添加 a [`sync.WaitGroup`](https://golang.org/pkg/sync/#WaitGroup)，您需要某种方式让所有输入都表示它们已完成，这很容易。

```
func combine(inputs []<-chan int, output chan<- int) {
  var group sync.WaitGroup
  for i := range inputs {
    group.Add(1)
    go func(input <-chan int) {
      for val := range input {
        output <- val
      }
      group.Done()
    } (inputs[i])
  }
  go func() {
    group.Wait()
    close(output)
  } ()
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T16:29:54.727

编辑：添加了成对减少示例代码并重新排序了部分答案。

首选的解决方案是不回答“重组，使您没有渠道切片”。重构通常可以利用多个 goroutine 可以发送到单个通道的特性。因此，不必让每个源在单独的通道上发送，然后不得不处理从一堆通道接收，只需创建一个通道并让所有源在该通道上发送。

Go 不提供从通道切片接收的功能。这是一个经常被问到的问题，虽然刚刚给出的解决方案是首选的，但有一些方法可以对其进行编程。我认为您在原始问题中建议的解决方案是“成对减少切片”是二进制分而治之的解决方案。只要您有将两个通道多路复用为一个的解决方案，它就可以正常工作。您的示例代码非常接近工作。

你只是错过了一个让你的示例代码工作的小技巧。在减少 n 的地方，添加一行将通道变量设置为 nil。例如，我使代码读取

```
 case v, ok := <-cin1:
        if ok {
            cout <- v
        } else {
            n--
            cin1 = nil
        }
    case v, ok := <-cin2:
        if ok {
            cout <- v
        } else {
            n--
            cin2 = nil
        }
    } 
```

该解决方案可以满足您的需求，并且不会忙于等待。

那么，一个完整的例子将这个解决方案合并到一个多路复用切片的函数中：

```
package main

import (
    "fmt"
    "time"
)

func multiplex(cin []chan int, cout chan int) {
    var cin0, cin1 chan int
    switch len(cin) {
    case 2:
        cin1 = cin[1]
        fallthrough
    case 1:
        cin0 = cin[0]
    case 0:
    default:
        cin0 = make(chan int)
        cin1 = make(chan int)
        half := len(cin) / 2
        go multiplex(cin[:half], cin0)
        go multiplex(cin[half:], cin1)
    }
    for cin0 != nil || cin1 != nil {
        select {
        case v, ok := <-cin0:
            if ok {
                cout <- v
            } else {
                cin0 = nil
            }
        case v, ok := <-cin1:
            if ok {
                cout <- v
            } else {
                cin1 = nil
            }
        }
    }
    close(cout)
}

func main() {
    cin := []chan int{
        make(chan int),
        make(chan int),
        make(chan int),
    }
    cout := make(chan int)
    for i, c := range cin {
        go func(x int, cx chan int) {
            for i := 1; i <= 3; i++ {
                time.Sleep(100 * time.Millisecond)
                cx <- x*10 + i
            }
            close(cx)
        }(i, c)
    }
    go multiplex(cin, cout)
    for v := range cout {
        fmt.Println("main gets", v)
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T12:20:45.770

我使用 goroutines 制作了这个。是你想要的吗？

```
package main

import (
    "fmt"
)

func multiplex(cin []chan int, cout chan int) {
    n := len(cin)
    for _, ch := range cin {
        go func(src chan int) {
            for {
                v, ok := <-src
                if ok {
                    cout <- v
                } else {
                    n-- // a little dangerous. Maybe use a channel to avoid missed decrements
                    if n == 0 {
                        close(cout)
                    }
                    break
                }
            }
        }(ch)
    }
}

// a main to test the multiplex
func main() {
    cin := make([]chan int, 3)
    cin[0] = make(chan int, 2)
    cin[1] = make(chan int, 2)
    cin[2] = make(chan int, 2)
    cout := make(chan int, 2)
    multiplex(cin, cout)
    cin[1] <- 1
    cin[0] <- 2
    cin[2] <- 3
    cin[1] <- 4
    cin[0] <- 5
    close(cin[1])
    close(cin[0])
    close(cin[2])
    for {
        v, ok := <-cout
        if ok {
            fmt.Println(v)
        } else {
            break
        }
    }
} 
```

编辑：参考：

[http://golang.org/ref/spec#Receive_operator](http://golang.org/ref/spec#Receive_operator)

[http://golang.org/ref/spec#Close](http://golang.org/ref/spec#Close)

# java - 与 JMS 配置的 Spring 集成

> ID：10979622
> 
> 赞同：1
> 
> 时间：2012-06-11T11:56:29.477
> 
> 标签：java, spring, jms, spring-integration

我正在尝试使用 JMS 运行基本的 Spring Integration 配置。

问题是我似乎正在建立连接（根据日志），但我没有收到关于我的主题的任何消息。

这是我的配置：

```
<!-- Channels -->
<jms:channel id="inputChannel" queue-name="test.queue" connection-factory="connectionFactory"/>

<!-- Consumers -->    
<jms:inbound-channel-adapter id="jmsIn" destination="requestQueue" channel="inputChannel" extract-payload="true" connection-factory="connectionFactory">
    <integration:poller time-unit="SECONDS" fixed-rate="5"/>
</jms:inbound-channel-adapter>

<integration:service-activator id="testActivator" input-channel="inputChannel" ref="testServiceActivator" auto-startup="true" method="handle">
</integration:service-activator>

<!-- Bean definitions -->
<bean id="connectionFactory" class="org.springframework.jms.connection.CachingConnectionFactory">
    <property name="targetConnectionFactory">
        <bean class="org.apache.activemq.ActiveMQConnectionFactory">
            <property name="brokerURL" value="tcp://127.0.0.1:61616"/>             
        </bean>
    </property>
    <property name="sessionCacheSize" value="10"/>
    <property name="cacheProducers" value="false"/>
</bean>

<bean id="requestQueue" class="org.apache.activemq.command.ActiveMQQueue">
    <constructor-arg name="name" value="test.topic"/>
</bean>

<bean id="testServiceActivator" class="com.paddypower.financials.integration.PriceDistributionServiceActivator"/> 
```

我已经在根记录器上启用了 DEBUG 级别，它说它`jmsIn`已成功启动并且它已连接到 ActiveMQ 服务器，但我没有收到任何消息，无论是`service-activator`还是`inbound-channel-adapter`.

我还可以看到生产者正在通过 ActiveMQ Web 界面发送消息。

那么任何人都可以看到配置有什么问题或知道我可以进一步调试它的方法吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:10:41.510

将 requestQueue 的 bean 定义从 更改`ActiveMQQueue`为`ActiveMQTopic`应该可以修复它。

```
<bean id="requestQueue" class="org.apache.activemq.command.ActiveMQTopic">
    <constructor-arg name="name" value="test.topic"/>
</bean> 
```

# sdk - 需要有关 Ozeki（IP 语音）VoIP SIP SDK 的反馈

> ID：10979625
> 
> 赞同：4
> 
> 时间：2012-06-11T11:56:41.573
> 
> 标签：sdk, sip, voip

我在一家小公司工作，我的老板让我在市场上四处寻找语音/视频 SDK。我找到了一个叫做 Ozeki VoIP SIP SDK 的软件。

根据他们网站上的描述，它看起来很有希望。如果有人已经使用过这个SDK，请与我分享一些想法，以便我可以更好地向我的老板报告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-03T12:17:51.147

**更新**：在使用 Ozeki VoIP SDK 近一年后，我想修改：

*   我们发现了 Ozeki 通常会在几周内解决的几个问题
*   众所周知，Audio-API 的默认设置会导致音频质量不佳
*   更改音频 API 可能会导致扬声器根本不输出任何声音。
    *   在我们的案例中，这是一个 100% 可重现的问题*，但*Ozeki 在 6 个月的过程中既不愿意也无法解决它（[阅读更多](https://softwarerecs.stackexchange.com/a/9869/4800)）。

总而言之，我目前**强烈建议不要购买/使用 Ozeki VoIP SDK**。

## 原帖：

我的两分钱（我目前正在评估多个 VoIP 库）：

*   功能方面，它似乎很完整
*   有很多关于 VoIP 工作原理的在线文档，这很棒
*   当我尝试发送电子邮件两次时，他们的邮件服务器处于脱机状态。它似乎又开始工作了。
*   就不言自明/干净的代码而言，API 不是很好。以下是我为我们的内部审查文档写下的内容：
    *   API 文档主要是自动生成的，并且有一些但不是非常有用的信息。
    *   至少有很多例子（在线），遗憾的是其中有不少是不完整的。此外，文档有时需要大量有关 API 的知识。没有提及该技术诀窍。例如，请参阅[http://voip-sip-sdk.com/p_379-voip-peer-to-peer-call-voip.html](http://voip-sip-sdk.com/p_379-voip-peer-to-peer-call-voip.html) - 关于如何建立呼叫以及如何创建一些所需的对象（代码无法编译！）。
    *   on `IPhoneCall`，一个可以调用`.Start()`两次，从来没有例外。也一样`.HangUp()`。您不能重用一个`IPhoneCall`对象来发出另一个呼叫。
    *   API 对于异步/长时间运行的任务不是很好。每个电话都有一个状态更改事件，但如果通话失败，则无法自动生成异常等（p.Ex.`await phone.Call();`不支持开箱即用）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-24T11:18:28.227

我已经购买并测试了 OZEKI VOIP SDK 几个月，开发很简单，但是这个 SDK 存在严重的问题：

1- 它不可靠，工作几个小时后 CPU 会 100% 运行或发生内存损坏。2- 没有适当的文件可用。3- 有很多样本，但不完整，几乎都是一样的。4-支持不好，有时没有答案。

我推荐`VaxTele` `www.vaxvoip.com` 哪个更可靠并且有很好的支持

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T14:43:08.553

如果您正在寻找一种开发 VoIP SIP 应用程序的简单方法，那么 Ozeki 是您的最佳选择。该代码有很好的文档记录并提供了各种各样的示例，但如果您想从头开始，您最好开始寻找另一个 SDK。[这里](http://en.wikipedia.org/wiki/List_of_SIP_software)有一些。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-17T07:48:08.620

我使用 Ozeki VoIP SIP SDK 大约 3 个月，我正在使用这个 sdk 开发一个简单的自动拨号应用程序和语音到文本应用程序。

我开始使用 10.1.1 版本，它支持所有功能，经过大量研究，我成功实现了语音到文本的应用。

但是他们每一个/一个半月发布一次新版本。

现在他们发布了 10.1.5，他们告诉他们改进了语音到文本识别引擎，你可以自定义语音引擎。但是新版本没有适当的文档。

但是我用较新版本的 SDK 更改了我的旧代码，但它不能正确识别这个词。旧版本 10.1.1 及更高版本更好。

[http://www.voip-sip-sdk.com/p_21-download-ozeki-voip-sip-sdk-voip.html](http://www.voip-sip-sdk.com/p_21-download-ozeki-voip-sip-sdk-voip.html)

# php - 多个 PHP 标签

> ID：10979626
> 
> 赞同：11
> 
> 时间：2012-06-11T11:56:44.157
> 
> 标签：php, coding-style

这只是一个一般的 PHP 问题。`<?php CODE ?>`在我的脚本中有多个是有益还是有害？

我只是在查看我的一些脚本，并注意到其中一些脚本中有 3-4 个。不知道这是否会导致我的网站运行缓慢:)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-11T11:59:08.633

不，它不会导致任何缓慢或问题。在模板中有*几十个*或*几百个*单独的块是很常见的。`<?php ?>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T12:03:04.713

我猜你的意思是多个 PHP 开始和结束标签。

就像您想回显一大块 HTML 标记一样，最好关闭 php 标记 ?> 然后在需要时重新启动它。例如：

```
<?php
if($ok) {
    ?> A large
    block
    HTML MarkUp text
 <?php
} //End of if($ok)
?> 
```

它实际上提高了速度，因为控件不会解析上述所有大块，而只是跳到下一个 < ? php 标记或 If 端点，与回显所有这些行相比。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T12:03:09.117

[您可以在文档](http://www.php.net/manual/en/language.basic-syntax.phpmode.php)中阅读有关此内容的信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T12:01:39.677

如果您在 html 页面中使用它（如果您有多个 PHP 块，我认为您是这样），这是正常的，我认为没有办法避免它。

如果您有外部脚本，则没有理由拥有多个块。虽然我认为这不会影响性能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-11T12:01:04.627

不，它不会造成任何伤害，但如果你这样做，例如：

```
<div><?php echo $x; ?></div> 
```

您可以使用短标签（如果在您的 php 配置中启用）

```
<div><? echo $x; ?></div> 
```

如果您想尝试减少 php 标签的数量，那么您甚至可以像这样回显您的 html：

```
echo '<div>'.$x.'</div>'; 
```

# java - Eclipse RCP：操作与命令 - 想要更新

> ID：10979628
> 
> 赞同：3
> 
> 时间：2012-06-11T11:56:48.620
> 
> 标签：java, eclipse, eclipse-rcp

我知道以前有人问过[这个问题](https://stackoverflow.com/q/552435/462285)，但那是在 2009 年，我在网上也没有找到任何更新的内容。我想知道答案是否仍然有效或可以更新吗？

我刚刚开始在 RCP 上工作，但我无法在菜单项的操作和命令之间做出决定。我将使用 Eclipse 提供的许多菜单项，例如 Edit、File 和它们的一些子菜单项。由于 '09 问题中提供的答案已经将近两年了，我只是想确保没有其他任何东西可以左右我的决定，或者是否有一些我不知道的新发展.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T12:03:51.800

由于您从 RCP 开始，因此命令框架是要走的路。操作已弃用，您应该只在使用现有应用程序时使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:37:48.737

Commnads 框架是最好的。您可以使用命令轻松控制菜单的可见性。

# javascript - 使用 Javascript SDK 显示好友

> ID：10979630
> 
> 赞同：1
> 
> 时间：2012-06-11T11:57:01.020
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

在我的网站上，我想使用 Facebook Javascript SDK 显示用户 Facebook 朋友。加载异步脚本时，我使用以下代码：

```
window.fbAsyncInit = function() {               
  FB.init({appId: 'MYAPPID', status: true, cookie: true, xfbml: true});

  FB.api('/me/friends', function(response){
      var divTarget=document.getElementById("friends-list-container");
      var data=response.data;
      for (var friendIndex=0; friendIndex<data.length; friendIndex++)
    {
           var divContainer = document.createElement("div");
           divContainer.innerHTML="<b>" + data[friendIndex].name + "</b>";
           divTarget.appendChild(divContainer);
    }
  });  
}; 
```

我想我已经要求正确的烫发：'friends_about_me'，但它不起作用。

有没有人有任何想法？

最好的，纽本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:18:59.217

您不需要要求`friends_about_me`获得用户的朋友，但您肯定应该授权用户（这在您提供的代码中没有完成），同样由于`status`检索的异步性质，您必须确保用户已经登录在接他的朋友之前。

此外，在您的 : 中添加一些错误检查也没有什么坏处`callback`：

```
FB.getLoginStatus(function(response) {
  if (response.status === 'connected') {
    FB.api('/me/friends', function(response){
      if (response && response.data){
        // Handle response
      } else {
        console.log('Something goes wrong', response);
      }
    });
  }
}); 
```

# jquery - 带有计数器的 jQuery 循环动画

> ID：10979632
> 
> 赞同：0
> 
> 时间：2012-06-11T11:57:05.380
> 
> 标签：jquery, loops, jquery-animate, counter

我正在尝试在 div 上创建一个简单的颜色更改动画，其中有一个计数器，用于计算动画循环的次数。我认为这很简单，但实际上让我头疼。

```
function AttachGo() {
    $('a#GoButton').click(function() {
        for (i = 0; i < 5; i++) {
            $('div#Timer').animate({
                backgroundColor: "#FF0000"
            }, 1000, 'linear',
                $('div#Timer').css("backgroundColor", "#22FF22"),
                $('p#Count').text("Completed: " + i)
            );
        }
    });
} 
```

我有一个我在[这里](http://jsfiddle.net/PottyMonster/pG6us/)玩的例子。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:32:55.260

您需要将循环调用作为动画的回调：

[http://jsfiddle.net/acrashik/pG6us/2/](http://jsfiddle.net/acrashik/pG6us/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:02:34.587

看起来你需要的`step`功能`animate`。看这里：blog.gabrieleromanato.com/2011/03/jquery-animation-steps/

# java - Java 服务器从大量客户端接收文件

> ID：10979639
> 
> 赞同：0
> 
> 时间：2012-06-11T11:57:38.417
> 
> 标签：java, client-server, nio

我正在设计一个需要能够保持与大量客户端（可能数千个）的连接并从每个这些客户端接收单个 PDF 文件的 Java 服务器。这些 PDF 将相对较短（最多 10-15 页），但所有传输都将在很短的时间内完成。据我了解，套接字编程是要走的路。哪种技术最适合用于服务器？

到目前为止，似乎 java.nio，可能是 MINA 或 Netty，是最好的选择。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:44:16.860

您可以在此处使用[Java Servlet 技术](http://en.wikipedia.org/wiki/Java_Servlet)。通过这种方式，您将不会从头开始重写其多线程功能，因为应用程序服务器/servlet 容器将为您处理它。另外，您将处于方便的 TCP/IP 之上。

如果您没有接触过这项技术，只需覆盖 service 或 doPost 方法。读取传入的流，重建 PDF 数据，然后写入文件或将其保存在某处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:06:07.353

如果您要一次处理多个请求，您将需要多线程方法（这里是一个[教程](http://www.tutorialspoint.com/java/java_multithreading.htm)）对于文件处理，一个简单的 tcp/ip 服务器应该足够了，比如这个[例子](http://cs.au.dk/~amoeller/WWW/examples/FileServer.java)

# ruby-on-rails - 为什么 rake 路线不能更有帮助

> ID：10979648
> 
> 赞同：0
> 
> 时间：2012-06-11T11:58:02.133
> 
> 标签：ruby-on-rails, routes, link-to

当您在 shell 中键入 rake routes 时，它会显示一个不错的路由列表：

```
 new_edition GET    /editions/new(.:format)           editions#new
     edit_edition GET    /editions/:id/edit(.:format)      editions#edit
         edition GET    /editions/:id(.:format)           editions#show
                 PUT    /editions/:id(.:format)           editions#update
              DELETE /editions/:id(.:format)           editions#destroy 
```

这非常有帮助，但为什么不显示应用程序中需要使用的实际代码，例如

```
 edition GET    /editions/:id(.:format)  editions#show  edition_path() 
```

我猜这是因为它可能比这更多，但一般问题是当我查看为路线提供的示例时，我查找了一个如何明确编码以了解路线含义的示例......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T12:47:55.897

直接使用`xxx_path`不是您唯一的选择。

Rails 为您提供了通过方法构建 url 的足智多谋的方式`polymorpic_path/_url`。许多其他助手使用这些方法，例如：

```
link_to 'Edit', [:edit, @user]     # instead of edit_user_path(@user)
redirect_to Product                # instead of products_path
form_for [@order, @product] do |f| # instead of order_product_path(@order, @product)
visit url_for [:preview, @invoice] # instead of preview_invoice_path(@invoice) 
```

因此，通过查看`preview_invoice`前缀，您知道该怎么做，但具体方法取决于您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:06:12.107

你有所有需要的信息。第一列告诉您路由助手名称的前缀（例如 new_edition）。您需要做的就是添加`_path`或`_url`拥有完整的方法名称。

然后，您有一些路由没有指示相应的辅助方法名称：这是因为它与另一个路由匹配相同的 URL，只有 HTTP 动词（GET、POST）发生了变化。因此，您必须`method: 'delete'`例如添加到您的通话中。

# hibernate - 具有非空约束的休眠多对一映射

> ID：10979656
> 
> 赞同：3
> 
> 时间：2012-06-11T11:58:20.630
> 
> 标签：hibernate, constraints, many-to-one, notnull

我在列上有一个多对一映射而不是空约束。我在保存时收到异常列为 Null。谁能建议我在这种情况下如何使用级联和逆？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:40:37.680

默认情况下，具有 onetomany/collection 的实体将通过级联到首先插入而没有反向引用的子级来维护关联，然后更新 id。为了解决这个问题，onetomany/collection 映射必须设置反向属性，并且必须正确设置子项中的反向引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-02T18:23:25.510

用 代替`@NotNull`表示关联不是可选的`@ManyToOne(optional = false)`。`@NotNull`不是 Hibernate 特有的；这是一个通用 bean 注释，可以在保存实体之前强制执行。为了安全起见，我建议`@NotNull`主要用于`@Column`属性。

# python - 在 IPython/Jupyter Notebooks 中显示行号

> ID：10979667
> 
> 赞同：174
> 
> 时间：2012-06-11T11:59:15.590
> 
> 标签：python, ipython, jupyter

在 IPython/Jupyter Notebooks 中运行的大多数语言内核的错误报告会指示错误发生的行；但是（至少在默认情况下）笔记本中没有显示行号。

是否可以将行号添加到 IPython/Jupyter Notebooks？

* * *

## 回答 #1

> 赞同：200
> 
> 时间：2012-06-11T19:41:15.877

`CTRL`-`M``L`切换 CodeMirror 区域中的行号。有关其他键盘快捷键，请参阅 QuickHelp。

更详细地`CTRL`- `M`（或`ESC`）带您进入命令模式，然后按下`L`按键应切换当前细胞行号的可见性。在较新的笔记本版本`Shift-L`中，应该为所有单元格切换。

如果您不记得快捷方式，请调出命令面板`Ctrl-Shift+P`（`Cmd+Shift+P`在 Mac 上），然后搜索“行号”），它应该允许切换并显示快捷方式。

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2014-10-03T06:11:45.867

在 IPython 2.2.0 上，只需在命令模式下键入 l（小写 L）（通过键入 Esc 激活）即可。其他快捷键见【帮助】-【键盘快捷键】。

[此外，您可以通过编辑](https://stackoverflow.com/questions/20197471/how-to-display-line-numbers-in-ipython-notebook-code-cell-by-default)将默认行为设置为显示行号[。](https://stackoverflow.com/questions/20197471/how-to-display-line-numbers-in-ipython-notebook-code-cell-by-default)[`custom.js`](https://stackoverflow.com/questions/20197471/how-to-display-line-numbers-in-ipython-notebook-code-cell-by-default)

* * *

## 回答 #3

> 赞同：63
> 
> 时间：2018-01-15T06:54:43.637

`View`从->中选择切换行号选项 `Toggle Line Number`。

![菜单看起来像这样](../Images/68892d16cae50ba3f183c6fb27532ffe.png)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-03-17T20:05:14.907

要在启动时在所有单元格中默认打开行号，我推荐[这个链接](https://www.webucator.com/blog/2015/11/show-line-numbers-by-default-in-ipython-notebook/)。我引用：

> 1.  导航到您的 jupyter 配置目录，您可以通过在命令行中键入以下内容来找到该目录：
>     
>     
>     
>     ```
>     jupyter --config-dir 
>     ```
>     
>     
> 2.  从那里打开或创建`custom`文件夹。
>     
>     
> 3.  在该文件夹中，您应该找到一个`custom.js`文件。如果没有，您应该能够创建一个。在文本编辑器中打开它并添加以下代码：
>     
>     
>     
>     ```
>     define([
>         'base/js/namespace',
>         'base/js/events'
>         ],
>         function(IPython, events) {
>             events.on("app_initialized.NotebookApp",
>                 function () {
>                     IPython.Cell.options_default.cm_config.lineNumbers = true;
>                 }
>             );
>         }
>     ); 
>     ```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2017-02-28T21:52:27.727

这是了解活动快捷方式的方法（取决于您的操作系统和笔记本版本，它可能会改变）

`Help > Keyboard Shortcuts > toggle line numbers`

在运行 ipython3 的 OSX 上，它是`ESC L`

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-04-08T13:31:06.120

对我来说，`ctrl + m`用于将网页另存为 png，因此无法正常工作。但我找到了另一种方法。

在工具栏底部有一个名为**open 命令palette**，您可以单击它并输入该行，您可以在此处看到切换单元格的行号。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-09-13T06:45:11.790

在 Jupyter Lab 2.1.5 中，它是`View`-> `Show Line Numbers`。

[![在此处输入图像描述](../Images/1c29a627c5bd7962ed70ca46c2073a49.png)](https://i.stack.imgur.com/nZvno.png)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-12-17T11:19:22.043

添加到 ronnefeldt 接受的答案：切换*所有*`Shift` `L`单元格中的行号。这适用于 JupyterLab 1.0.0 和 Jupyter Notebooks。

 ** * *

## 回答 #9

> 赞同：3
> 
> 时间：2021-10-21T12:13:00.053

1.  按下`Escape`使左侧部分变为蓝色。

[![在此处输入图像描述](../Images/2205c6ee5257d8881687ea8e10e8664e.png)](https://i.stack.imgur.com/hdlv6.png)

2.  然后按`L`。有用！

3.  如果要隐藏它们，请使用相同的算法。

4.  如果要影响所有 Jupiter 行，请确保在最后一行执行，否则只有一行受到影响。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-08-10T13:37:47.600

您还可以`Toggle Line Numbers`在`View`浏览器的 Jupyter 笔记本顶部工具栏的下方找到。**这将添加/删除所有**笔记本单元格中的行号。

对我来说，`Esc`+`l`只添加/删除了活动单元格的行号。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-08-12T06:37:03.857

要在 Jupyter 实验室中默认显示行号，

*   单击菜单`Settings`→ `Advanced Settings Editor`（或使用快捷键`control`+ `,`）。将出现一个包含三列的环境：设置类别`System Defaults`、 和`User Preferences`。
*   选择类别`notebook`
*   在选项`"lineNumbers"`中设置键。`true``"codeCellConfig"`

例如，（假设没有其他用户配置设置），：

```
{
    "codeCellConfig": {
        "lineNumbers": true,
    }
} 
```

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2017-01-30T04:15:57.403

1.按esc进入命令模式 2.perss l(it L in lowcase)显示行号*

# mysql - MySQL中的SQL UNION两个表

> ID：10979669
> 
> 赞同：0
> 
> 时间：2012-06-11T11:59:17.730
> 
> 标签：mysql, union, union-all

我有两个要合并的表结果：

```
table1:
name 
product

table2:
name
product 
```

我可以

```
select * from table1 where product LIKE 'p%' limit 3 
```

并且：

```
select * from table2 where product LIKE 'p%' limit 3 
```

但是当我联合时，结果是：

```
(select * from table1 where product LIKE 'p%' limit 3)
UNION ALL
(select * from table2 where product LIKE 'p%' limit 3) 
```

我只得到第一个查询的结果。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:12:08.037

请注意，UNION 中的每个 SELECT 语句必须具有相同数量的列。这些列还必须具有相似的数据类型。此外，每个 SELECT 语句中的列的顺序必须相同。

“默认情况下，UNION 运算符仅选择不同的值。要允许重复值，请使用 UNION ALL。” 它真的对我有用：

SELECT column_name FROM table_name1 UNION ALL SELECT column_name FROM table_name2 。希望，它会帮助你。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T12:05:17.913

查询似乎没有问题。也`UNION ALL`不会删除重复项，因此最好的猜测是您的第二个表没有该`WHERE`条件的数据。

# php - 在 PHP 中寻找正则表达式

> ID：10979671
> 
> 赞同：1
> 
> 时间：2012-06-11T11:59:23.363
> 
> 标签：php, regex

我在 PHP 中使用 preg_match 函数来从 RSS 提要中提取一些值。在这个提要内容里面有这样的东西：

```
<li><strong>Something:</strong> A text with non alphanumeric characters (more text), more text with non alphanumeric characters (more text)</li> 
```

我需要获取那些“带有非字母数字字符的文本”和“更多带有非字母数字字符的文本”以将它们保存在数据库中。我不知道使用正则表达式是否是最好的方法。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:03:19.070

如果您想使用正则表达式（即快速而肮脏，不太容易维护），这将为您提供文本：

```
$input = '<li><strong>Something:</strong> A text with non alphanumeric characters (more text), more text with non alphanumeric characters (more text)</li>';

// Match between tags
preg_match("#</strong>(.*?)</li>#", $input, $matches);
// Remove the text inside brackets
echo trim(preg_replace("#\s*\(.*?\)\s*#", '', $matches[1])); 
```

但是，嵌套括号可能会失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:04:40.223

鉴于结构始终相同，您可以使用此正则表达式

```
</strong>([^,]*),([^<]*)</li> 
```

第 1 组将有第一个片段，第 2 组将有另一个

一旦您开始使用正则表达式解析 html/xml，很快就会发现一个成熟的解析器更适合。对于小型或一次性解决方案，您可以使用正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T12:06:58.173

```
$str = '<li><strong>Something:</strong> A text with non alphanumeric characters (more text), more text with non alphanumeric characters (more text)</li>';
$str = preg_replace('~^.*?</strong>~', '', $str); // Remove leading markup
$str = preg_replace('~</li>$~', '', $str); // Remove trailing markup
$str = preg_replace('~\([^)]++\)~', '', $str); // Remove text within parentheses
$str = trim($str); // Clean up whitespace
$arr = preg_split('~\s*,\s*~', $str); // Split on the comma 
```

# iphone - 数组中的复制/可变复制

> ID：10979686
> 
> 赞同：0
> 
> 时间：2012-06-11T12:00:29.050
> 
> 标签：iphone

我是 iPhone SKD 的新手。我想知道，如果我将所有对象从一个数组复制（我的意思是可变复制/复制）到另一个数组。这是我的代码：

```
NSSortDescriptor* DateSorter = [[NSSortDescriptor alloc] initWithKey:@"lounge_rating" ascending:NO];
NSMutableArray *temp = [appdelegate.LongeListArray mutableCopy];
[temp sortUsingDescriptors:[NSArray arrayWithObject:DateSorter]];
appdelegate.LongeListArray = temp;
[table reloadData];
[DateSorter release]; 
```

我想知道我应该释放临时数组吗？请帮助我。谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:03:35.980

您应该释放您复制或创建的任何对象（“alloc”），所以是的，您应该释放它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:07:04.377

当您调用 时`NSMutableArray *temp = [appdelegate.LongeListArray mutableCopy];`，这意味着您正在创建现有对象的副本，因此其保留计数将为 1。因此您有责任释放此对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T12:10:48.767

是的，Nuzhat 是对的，但如果你自动释放它而不是释放它会更好，否则它可能会产生内存泄漏。

```
NSMutableArray *temp = [[[NSMutableArray alloc]initWithArray:appdelegate.LongeListArray]autorelease]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T12:28:49.680

您需要释放您分配的任何对象。

# java - Arrays.asList(...).contains(...) 如何工作？

> ID：10979700
> 
> 赞同：5
> 
> 时间：2012-06-11T12:01:17.573
> 
> 标签：java, arrays, list, arraylist

**我有以下代码..**

```
 String[] weekEnds={"0","6"};

    for(int i=0;i<7;i++){

    if(Arrays.asList(weekEnds).contains(i)){

     System.out.println("I am in the array");       
    }    
  } 
```

但它不会进入 if 条件..我不知道我哪里出错了..在此先感谢..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-11T12:05:09.830

要么将`if`条件更改为

```
if(Arrays.asList(weekEnds).contains(String.valueOf(i))){ 
```

或将您的数组更改为

```
Integer[] weekEnds={0,6}; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-11T12:02:51.723

您正在比较字符串和整数。您的数组包含字符串 ( `"0"`, `"6"`)，但您将 int 传递给比较。

该 int 将被[装箱](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)为 Integer，但 an`Integer(1)`不等于`"1"`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-11T12:03:12.767

您正在比较苹果和橙子（在本例中为`String`s 和`Integer`s）。

您正在将数组`String`转换为`List`. 然后你`contains()`用一个`int`值调用它。因为该方法采用`Object`参数类型，所以`int`被自动装箱为`Integer`.

为了解决这个问题，写：

```
if(Arrays.asList(weekEnds).contains("" + i)) { 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-11T12:04:18.443

您需要有一个 int 数组才能进行这样的比较。

改变这个：

```
String[] weekEnds={"0","6"}; 
```

到

```
int[] weekEnds = {0,6}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T12:04:52.500

只需更改为`Integer[] weekEnds={0,6};`，我认为它会起作用。

# c# - c# AxWebBrowser Document OnClick 禁用浏览器

> ID：10979701
> 
> 赞同：0
> 
> 时间：2012-06-11T12:01:30.897
> 
> 标签：c#, events, onclick, dom, axwebbrowser

似乎有很多这样的问题，但找不到答案。

我已经像这个线程一样实现了 OnClick 事件：http: [//support.microsoft.com/](http://support.microsoft.com/?kbid=312777) ?kbid=312777 但结果是浏览器被完全禁用（滚动条、控件......）。

我搜索了互联网，找不到明确的解决方案。

有人说必须创建从 WsbBrowser 继承的新类，然后重载这些事件。其他人说答案在这里[http://www.experts-exchange.com/Programming/Languages/C_Sharp/Q_20661377.html](http://www.experts-exchange.com/Programming/Languages/C_Sharp/Q_20661377.html)但我没有帐户。

```
 private void FormBrowser_DocumentComplete(object sender, DWebBrowserEvents2_DocumentCompleteEvent e)
    {
        mshtml.HTMLDocument doc;
        doc = (mshtml.HTMLDocument)FormBrowser.Document;
        mshtml.HTMLDocumentEvents2_Event iEvent;
        iEvent = (mshtml.HTMLDocumentEvents2_Event)doc;
        iEvent.onclick += new HTMLDocumentEvents2_onclickEventHandler(ClickEventHandler);
    }

private bool ClickEventHandler(mshtml.IHTMLEventObj e)
    {
        return true;
    } 
```

谁知道解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:29:07.690

好吧，我找到了一种方法来处理 AxWebBrowser HTML 元素的 onclick 事件。这是您需要做的：

首先我们需要创建一个调度器类：

```
public class DispatcherSketchClass
    {
        public DispatcherSketchClass()
        {
        }
        [DispId(0)]
        public void DefaultMethod()
        {
        //this method will be called
        }
    } 
```

然后我们只需将此 dispather 附加到某个元素：

```
 void AddDispatcher(AxWebBrowser browser)
        {
            IHTMLDocument2 doc = (IHTMLDocument2)browser.Document;

            foreach (IHTMLElement VARIABLE in doc.all)
            {
                //find right element
                if (VARIABLE.title == "the name")
                {
                    // attach here               
                    DispatcherClass dp = new DispatcherClass();
                    VARIABLE.onclick = dp;
                }

            }
         } 
```

希望这可以帮助。

# django - py.test -n 与 Django TestCase url

> ID：10979703
> 
> 赞同：0
> 
> 时间：2012-06-11T12:01:32.643
> 
> 标签：django, unit-testing, pytest

要在 Django 测试中使用特定的 url-config，您只需指定它：

```
class MyTests(TestCase):
    urls = 'myproj.myapp.urls'

    def test_myurl(self):
        r = self.client.get('/foo/')  # looks up /foo/ in myproj/myapp/urls.py 
```

但是，它看起来不像实现是线程安全的：

```
def _urlconf_setup(self):
    if hasattr(self, 'urls'):
        self._old_root_urlconf = settings.ROOT_URLCONF
        settings.ROOT_URLCONF = self.urls
        clear_url_caches() 
```

在我使用 py.test -n8 运行测试套件（使用全部 8 个 CPU）后，我在测试日志中看到 404 错误。

有没有其他人看到/解决了这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:55:33.037

`py.test -n8`调用将启动 8 个子进程。启动 8 个 django 服务器并通过 访问它们是否可能存在问题`self.client(...)`，即它们每个人使用的固定默认端口？

更新：另外，您可能想安装[pytest-django 插件](http://pypi.python.org/pypi/pytest-django)，看看它是否有助于使用`-n 8`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T14:27:52.767

我想知道您使用的默认测试数据库是否已保存以一次与 N 个测试进程一起使用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T18:34:43.470

简短的回答：`urls`在你的`TestCase`子类上设置在调用时不是线程安全`from py.test -n`的，大概是因为不同的线程正在破坏`settings.ROOT_URLCONF`。

有代码`django/core/handlers/base.py:get_response()`（我也刚刚检查了最新版本），如果存在，它将从请求对象中获取 urlconf，而不是使用`settings.ROOT_URLCONF`.

那么解决方案是将 的值附加到传递给视图函数`self.urls`的`request`对象上。`Client.py`实施此修复后，我们没有看到任何问题，使用`-n8`.

（如果您已经拥有自己的`client.py`and副本`testcases.py`，则相对容易（~14 loc）从 Client 中删除当前的 urlconf 机器`_pre_setup`，而是`self.urls`通过 Client 以便 ClientHandler 可以`request`在调用之前将其附加到`self.get_response()`。）

# c# - 带有 javascript onclick 的 C# ASP.Net Image 属性在 IE9 中不起作用

> ID：10979710
> 
> 赞同：1
> 
> 时间：2012-06-11T12:02:05.447
> 
> 标签：c#, asp.net, visual-studio-2008

我正在使用 Datalist 将车辆的图像作为缩略图填充。当用户点击一个小图像时，onclick 事件需要从数据库中调用该图像并将其加载到上面更大的 Image 控件中。我正在使用 ImageHandler.ashx 从 SQL 检索图像二进制文件并将其呈现在图像控件中。

一切都在 Chrome 和 IE7 中完美运行，但在 IE9 中无法运行。如果我在 IE9 中单击小图像，它就像图像处理程序永远不会执行，更大的图像永远不会加载所选图像。在IE9中查看页面源码时，代码如下：

IE9页面来源：

```
<table id="table1" style="padding-left: 0px; padding-top: 0px; width: 108px; height: 73px;
        background-image: url('Images/smallimageframe.png'); background-repeat: no-repeat;
        background-color: #FFFFFF;">
        <tr>
            <td align="center">
                <img id="DataListVehicles_ctl00_imgVehicle" class="imgOpacity" onerror="this.src='Images/no_image.jpg'" onclick="imgBig.src='ImageHandler.ashx?ID=29';" src="ImageHandler.ashx?ID=29" alt="29" style="border-style:None;height:55px;width:90px;border-width:0px;" />
            </td>
        </tr>
    </table>
</td><td class="DataList">
    <table id="table1" style="padding-left: 0px; padding-top: 0px; width: 108px; height: 73px;
        background-image: url('Images/smallimageframe.png'); background-repeat: no-repeat;
        background-color: #FFFFFF;">
        <tr>
            <td align="center">
                <img id="DataListVehicles_ctl01_imgVehicle" class="imgOpacity" onerror="this.src='Images/no_image.jpg'" onclick="imgBig.src='ImageHandler.ashx?ID=30';" src="ImageHandler.ashx?ID=30" alt="30" style="border-style:None;height:55px;width:90px;border-width:0px;" />
            </td>
        </tr>
    </table>
</td><td class="DataList">
    <table id="table1" style="padding-left: 0px; padding-top: 0px; width: 108px; height: 73px;
        background-image: url('Images/smallimageframe.png'); background-repeat: no-repeat;
        background-color: #FFFFFF;">
        <tr>
            <td align="center">
                <img id="DataListVehicles_ctl02_imgVehicle" class="imgOpacity" onerror="this.src='Images/no_image.jpg'" onclick="imgBig.src='ImageHandler.ashx?ID=31';" src="ImageHandler.ashx?ID=31" alt="31" style="border-style:None;height:55px;width:90px;border-width:0px;" />
            </td>
        </tr>
</table> 
```

服务器端：

```
 protected void DataListVehicles_ItemDataBound(object sender, DataListItemEventArgs e)
    {
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
        {
            Image imgVehicle = e.Item.FindControl("imgVehicle") as Image;               
            imgVehicle.ImageUrl = "ImageHandler.ashx?ID=" + m_Vehicles.ListingPhotos[e.Item.ItemIndex].ID;

            imgVehicle.Attributes.Add("onclick", "imgBig.src='ImageHandler.ashx?ID=" + m_Vehicles.ListingPhotos[e.Item.ItemIndex].ID + "';"); 
        }
    } 
```

标记：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <meta http-equiv="Cache-Control" content="no-cache" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <link href="css/asp.css" rel="stylesheet" type="text/css" />

    <script src="Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>

    <script type="text/javascript">
        $(function() {
            $('.imgOpacity').each(function() {
                $(this).hover(
                    function() {
                        $(this).stop().animate({ opacity: 1.0 }, 500);
                    },
                   function() {
                       $(this).stop().animate({ opacity: 0.6 }, 500);
                   })
            });
        });
    </script>

    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <table style="width: 780px" class="OtherControl">
            <tr>
                <td style="padding-left: 8px; padding-top: 3px;">
                    <asp:Label ID="lblDescription" runat="server" Font-Bold="True" ForeColor="#FF9900"></asp:Label>
                </td>
            </tr>
            <tr>
                <td>
                    <table style="width: 100%">
                        <tr>
                            <td align="center">
                                <table style="padding-left: 0px; padding-top: 0px; width: 320px; height: 220px; background-image: url('Images/imageframe.png');
                                    background-repeat: no-repeat; background-color: #FFFFFF;">
                                    <tr>
                                        <td align="center">
                                            <asp:Image ID="imgBig" runat="server" Height="200px" Width="300px" onerror="this.src='Images/no_image.jpg'"/>
                                        </td>
                                    </tr>
                                </table>
                                <asp:DataList ID="DataListVehicles" runat="server" RepeatDirection="Horizontal" RepeatColumns="4"
                                    ShowFooter="False" ShowHeader="False" BorderStyle="None" OnItemDataBound="DataListVehicles_ItemDataBound"
                                    HorizontalAlign="Center">
                                    <ItemStyle CssClass="DataList" />
                                    <ItemTemplate>
                                        <table id="table1" style="padding-left: 0px; padding-top: 0px; width: 108px; height: 73px;
                                            background-image: url('Images/smallimageframe.png'); background-repeat: no-repeat;">
                                            <tr>
                                                <td align="center">
                                                    <asp:Image ID="imgVehicle" runat="server" CssClass="imgOpacity" Width="90px" Height="55px"
                                                        onerror="this.src='Images/no_image.jpg'" BorderStyle="None" />
                                                </td>
                                            </tr>
                                        </table>
                                    </ItemTemplate>
                                </asp:DataList>
                            </td>
                        </tr>            
                    </table>
                </td>
            </tr>
        </table>
    </div>
    </form>
</body>
</html> 
```

希望有人可以提供帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:09:31.937

代替

```
imgVehicle.Attributes.Add("onclick", "imgBig.src='ImageHandler.ashx?ID=" + m_Vehicles.ListingPhotos[e.Item.ItemIndex].ID + "';"); 
```

试试这个

```
imgVehicle.Attributes.Add("onclick", imgBig.ClientID + ".src='ImageHandler.ashx?ID=" + m_Vehicles.ListingPhotos[e.Item.ItemIndex].ID + "';"); 
```

在`DataListVehicles_ItemDataBound`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:13:17.487

这可能是您从 onClick JavaScript 中引用“imgBig”的方式，您可以尝试使用 document.getElementById('imgBig').src='.... 代替。当您单击图像时，您是否还打开了 IE 开发人员工具窗口并检查了 JavaScript 错误？

# android - 来自本机崩溃的非常短的堆栈跟踪

> ID：10979712
> 
> 赞同：1
> 
> 时间：2012-06-11T12:02:12.660
> 
> 标签：android, android-ndk, java-native-interface, libc

我正在将本机 C++ 库移植到 Android，我得到以下堆栈跟踪：

```
06-11 14:55:15.505: I/DEBUG(138): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
06-11 14:55:15.505: I/DEBUG(138): Build fingerprint: 'htc_asia_tw/htc_shooteru/shooteru:2.3.4/GRJ22/123848.4:user/release-keys'
06-11 14:55:15.515: I/DEBUG(138): pid: 5523, tid: 5535  >>> com.xxx <<<
06-11 14:55:15.515: I/DEBUG(138): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0128d1a8
06-11 14:55:15.515: I/DEBUG(138):  r0 0128d1a8  r1 45ba2577  r2 80808080  r3 00000000
06-11 14:55:15.515: I/DEBUG(138):  r4 45ba2ba8  r5 00000005  r6 00000000  r7 45ba24e4
06-11 14:55:15.515: I/DEBUG(138):  r8 45ba270c  r9 0128d1a8  10 00000001  fp 45ba2bac
06-11 14:55:15.515: I/DEBUG(138):  ip 00000073  sp 45ba2478  lr afd1b64b  pc afd151e8  cpsr 60000010
06-11 14:55:15.515: I/DEBUG(138):  d0  65526f666e496533  d1  6143646576656934
06-11 14:55:15.515: I/DEBUG(138):  d2  772f73746e656d34  d3  65636170736b7235
06-11 14:55:15.515: I/DEBUG(138):  d4  617262657a655a2f  d5  2f696e6a2f434f50
06-11 14:55:15.515: I/DEBUG(138):  d6  7262657a655a7451  d7  422f6e69616d2f61
06-11 14:55:15.515: I/DEBUG(138):  d8  0000000000000000  d9  0000000000000000
06-11 14:55:15.515: I/DEBUG(138):  d10 0000000000000000  d11 0000000000000000
06-11 14:55:15.515: I/DEBUG(138):  d12 0000000000000000  d13 0000000000000000
06-11 14:55:15.515: I/DEBUG(138):  d14 0000000000000000  d15 0000000000000000
06-11 14:55:15.515: I/DEBUG(138):  d16 0000000000000000  d17 41d3f57724c00000
06-11 14:55:15.515: I/DEBUG(138):  d18 3ff0000000000000  d19 0000000000000000
06-11 14:55:15.525: I/DEBUG(138):  d20 0000000000000000  d21 0000000000000000
06-11 14:55:15.525: I/DEBUG(138):  d22 3ff0000000000000  d23 0000000000000000
06-11 14:55:15.525: I/DEBUG(138):  d24 3ff0000000000000  d25 0000000000000000
06-11 14:55:15.525: I/DEBUG(138):  d26 0000000000000000  d27 0000000000000000
06-11 14:55:15.525: I/DEBUG(138):  d28 0000000000000000  d29 0000000000000000
06-11 14:55:15.525: I/DEBUG(138):  d30 0000000000000000  d31 0000000000000000
06-11 14:55:15.525: I/DEBUG(138):  scr 20000012
06-11 14:55:15.625: I/DEBUG(138):          #00  pc 000151e8  /system/lib/libc.so
06-11 14:55:15.625: I/DEBUG(138):          #01  pc 0001b648  /system/lib/libc.so
06-11 14:55:15.635: I/DEBUG(138): code around pc:
06-11 14:55:15.635: I/DEBUG(138): afd151c8 0a00003d e58d2004 e59d2004 e3120003 
06-11 14:55:15.635: I/DEBUG(138): afd151d8 1afffff6 e0800003 e3082080 e3482080 
06-11 14:55:15.635: I/DEBUG(138): afd151e8 e4901004 e0433000 f5d0f040 e041c3a2 
06-11 14:55:15.635: I/DEBUG(138): afd151f8 e00cc002 e1dcc001 04901004 1a000022 
06-11 14:55:15.635: I/DEBUG(138): afd15208 e041c3a2 e00cc002 e1dcc001 04901004 
06-11 14:55:15.635: I/DEBUG(138): code around lr:
06-11 14:55:15.635: I/DEBUG(138): afd1b628 b910c014 a018f8dd 9906e00e 0a00ebc9 
06-11 14:55:15.635: I/DEBUG(138): afd1b638 bfa8458a e007468a f8cd4648 f7f9c014 
06-11 14:55:15.635: I/DEBUG(138): afd1b648 f8ddeda0 4682c014 f10d2000 465c0ef8 
06-11 14:55:15.635: I/DEBUG(138): afd1b658 f80e4683 f8cd0c01 e14cb018 46d89709 
06-11 14:55:15.635: I/DEBUG(138): afd1b668 f0469f07 e00c0610 7ff00000 0002040d 
06-11 14:55:15.635: I/DEBUG(138): stack:
06-11 14:55:15.635: I/DEBUG(138):     45ba2438  00000000  
06-11 14:55:15.635: I/DEBUG(138):     45ba243c  00000022  
06-11 14:55:15.635: I/DEBUG(138):     45ba2440  45ba27f7  
06-11 14:55:15.635: I/DEBUG(138):     45ba2444  afd1965f  /system/lib/libc.so
06-11 14:55:15.635: I/DEBUG(138):     45ba2448  45ba270c  
06-11 14:55:15.635: I/DEBUG(138):     45ba244c  45ba253c  
06-11 14:55:15.635: I/DEBUG(138):     45ba2450  00000082  
06-11 14:55:15.635: I/DEBUG(138):     45ba2454  45ba253c  
06-11 14:55:15.635: I/DEBUG(138):     45ba2458  00000004  
06-11 14:55:15.635: I/DEBUG(138):     45ba245c  00000000  
06-11 14:55:15.635: I/DEBUG(138):     45ba2460  45ba24e4  
06-11 14:55:15.635: I/DEBUG(138):     45ba2464  45ba270c  
06-11 14:55:15.645: I/DEBUG(138):     45ba2468  45ba26cd  
06-11 14:55:15.645: I/DEBUG(138):     45ba246c  00000007  
06-11 14:55:15.645: I/DEBUG(138):     45ba2470  df002777  
06-11 14:55:15.645: I/DEBUG(138):     45ba2474  e3a070ad  
06-11 14:55:15.645: I/DEBUG(138): #00 45ba2478  45ba2ba8  
06-11 14:55:15.645: I/DEBUG(138):     45ba247c  afd1c17d  /system/lib/libc.so
06-11 14:55:15.645: I/DEBUG(138): #01 45ba2480  00000000  
06-11 14:55:15.645: I/DEBUG(138):     45ba2484  00000000  
06-11 14:55:15.645: I/DEBUG(138):     45ba2488  00000000  
06-11 14:55:15.645: I/DEBUG(138):     45ba248c  00000000  
06-11 14:55:15.645: I/DEBUG(138):     45ba2490  00000000  
06-11 14:55:15.645: I/DEBUG(138):     45ba2494  00000073  
06-11 14:55:15.645: I/DEBUG(138):     45ba2498  ffffffff  
06-11 14:55:15.645: I/DEBUG(138):     45ba249c  45ba24e4  
06-11 14:55:15.645: I/DEBUG(138):     45ba24a0  45ba251c  
06-11 14:55:15.645: I/DEBUG(138):     45ba24a4  80cbce76  /data/data/com.xxx/lib/libxxx.so
06-11 14:55:15.645: I/DEBUG(138):     45ba24a8  00000000  
06-11 14:55:15.645: I/DEBUG(138):     45ba24ac  00000000  
06-11 14:55:15.645: I/DEBUG(138):     45ba24b0  00000083  
06-11 14:55:15.645: I/DEBUG(138):     45ba24b4  45ba2577  
06-11 14:55:15.645: I/DEBUG(138):     45ba24b8  80cbce48  /data/data/com.xxx/lib/libxxx.so
06-11 14:55:15.645: I/DEBUG(138):     45ba24bc  afd42428  
06-11 14:55:15.645: I/DEBUG(138):     45ba24c0  00000000  
06-11 14:55:15.645: I/DEBUG(138):     45ba24c4  00000000 
```

如您所见，我在 libc.so 中只有 2 个堆栈级别。在 addr2line 之后，我知道它是 strlen 和 vprintf。我什至没有到达我的图书馆中它来自的地方。

您如何获得比这更长的堆栈跟踪？

（崩溃可能发生在与调用 JNI 函数的线程不同的线程上 - 我不知道这是否重要）。

# windows - (Win XP) 设置托盘应用程序在登录屏幕前运行

> ID：10979717
> 
> 赞同：0
> 
> 时间：2012-06-11T12:02:30.970
> 
> 标签：windows, authentication, windows-xp, screen

我想在windows登录屏幕之前运行一个软件，这个软件在任务栏系统时钟附近安装了一个小托盘图标。

该服务是使用 sc.exe 创建的，并且能够检查它是否处于活动状态并设置为在系统启动时自动运行。

该服务在那里，但是当我重新启动计算机时，由于某种原因它似乎没有处于活动状态。

我试图手动运行该服务，但它似乎超时，并且它不会运行。如果我手动登录并运行它，没问题：托盘图标出现。

这可能是因为在登录时没有托盘栏吗？

我用来创建服务的命令是这样的：

sc.exe create "KVMDevice" start="auto" binPath="c:...."

非常感谢，弗拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:29:19.087

1.  在“登录时刻”之前，没有与交互式用户（尚未登录）关联的桌面，因此没有托盘栏。

2.  创建应该向用户显示一些消息的服务时，请确保将服务配置为“[能够与桌面交互](http://lostechies.com/keithdahlby/2011/08/13/allowing-a-windows-service-to-interact-with-desktop-without-localsystem/)”

# joomla - Joomla保存更新使用前端和后端删除自定义表格数据

> ID：10979722
> 
> 赞同：1
> 
> 时间：2012-06-11T12:02:39.650
> 
> 标签：joomla, save, components

我在 Joomla 中有一个员工表，我的要求是，从前端每个员工编辑、更新、删除他们的信息以及从后端管理也一样。

我不知道该怎么做，可能我必须为此创建一个组件吗？请指导我。

我在内置组件中看到了 com_user 中的代码，但很难理解..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:17:48.980

您可以使用从 Joomla 组件创建器生成的代码来执行管理代码。然后你可以破解它来从前端编辑。[http://www.notwebdesign.com/joomla-component-creator/](http://www.notwebdesign.com/joomla-component-creator/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:24:06.360

您没有提到您使用的是什么版本的 Joomla，但 com_user 组件是一个核心 Joomla 组件，用于管理您的用户登录和凭据，不一定是员工表（尽管您可能会以这种方式使用它）。如果它不能满足您的需求，我建议您在破解之前查看 Joomla 在其[客户社区/用户管理扩展](http://extensions.joomla.org/extensions/clients-a-communities/user-management)中的许多扩展，看看其他人是否已经解决了同样的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T03:46:15.800

按照标准的 Joomla MVC 框架为此创建一个组件。Joomla Docs 中提供了一个非常好的教程，用于[开发基本组件](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Developing_a_Basic_Component)

简而言之：

1.  您需要为用户创建前端组件以访问/编辑内容
2.  创建后端组件供管理员使用

您可以使用 Joomla 的权限设置将某些操作限制为注册用户。您可以遵循以下文档： [向组件添加 ACL 规则](http://docs.joomla.org/Adding_ACL_rules_to_your_component)

# c++ - 基类类型的指针忘记了原始对象类型

> ID：10979726
> 
> 赞同：-1
> 
> 时间：2012-06-11T12:02:51.783
> 
> 标签：c++, class, pointers, abstract-class

我有一个指向从同一基类派生的对象的指针向量。问题是在调用函数（而不是方法）时忘记了原始对象的类型。

```
class Cat{
    //base class
public:
    virtual void growl() = 0;
};

class HouseCat : public Cat{
    //derived class
public:
    void growl(){};
};

class AlleyCat : public Cat{
    //derived class
public:
    void growl(){};
};

void function(HouseCat& a){};
void function(AlleyCat& a){};

int main(){
    vector<Cat*> cats;
    cats.push_back(new HouseCat);
    cats.push_back(new AlleyCat);
    function(*(cats[0])); //error: cannot convert parameter 1 from 'Cat' to 'HouseCat &'
    (cats[0])->growl(); //this works though

} 
```

有解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T12:07:01.943

*   将另一个虚函数添加到`Cat`as（[也添加虚拟析构函数](https://stackoverflow.com/questions/1123044/when-should-your-destructor-be-virtual)）：

    ```
    class Cat{
       //base class
        ~virtual Cat() {}  //add a virtual destructor as well
         virtual void growl() = 0;
         virtual void call_function() = 0;    
    }; 
    ```

    并将其实现为：

    ```
    class HouseCat : public Cat{
       //derived class
       virtual void growl(){};
       virtual void call_function() {  function(*this); }
    }; 
    ```

    然后你可以这样写：

    ```
    cats[0]->call_function(); 
    ```

    它最终会调用适当的重载`function()`。

*   或者只是`function`在类层次结构中实现为虚拟成员函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T12:04:53.577

你可以有一个`dynamic_cast`（我假设你被遗漏了`virtual`，那`growl`是虚拟的）。

或者您可以`function`将 a 作为参数`Cat&`，IMO 是最干净的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T12:12:38.217

每只家猫都是猫，但每只猫都不是家猫。因此，如果您打算学习多态性（从您的代码中看起来是这样），请记住允许转换为基类指针/引用，从基类指针/引用转换为子类并不容易。您必须明确使用 dynamic_cast。

但是，除此之外，您的代码还有许多其他问题。方法咆哮应该被声明为虚拟，你应该为它指定一个返回类型，你不能从外部调用私有成员函数（（cats [0]）->咆哮（）不会编译）。

# ruby - 在运行时扩展对象时，如何调用类方法？

> ID：10979727
> 
> 赞同：1
> 
> 时间：2012-06-11T12:02:53.857
> 
> 标签：ruby, ruby-on-rails-3

我想在运行时扩展一个对象（ActiveRecord::Base 的实例）并调用一个类方法（以添加`has_many`关联）。我理想的代码如下：

```
class User < ActiveRecord::Base
end

module Seller
  has_many :bookings, :foreign_key => :seller_id
end

module Buyer
  has_many :bookings, :foreign_key => :buyer_id
end

user = User.find(1)
user.extend Seller
user.bookings 
```

请注意，我不想将模块包含在`User`类中，我想扩展单个用户对象的行为，而不是所有用户对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:09:37.210

这是一个涉及`self.extended`钩子和特征类的技巧。

```
class User
  def self.haz_many name
    define_method name do 
      "value of #{name}"
    end
  end
end

module Seller
  def self.extended base
    base.singleton_class.instance_eval do
      haz_many :sellers
    end
  end
end

u1 = User.new
u1.extend Seller
u1.respond_to? :sellers # => true

u2 = User.new
u2.respond_to? :sellers # => false 
```

# sql-server-2008 - 为合并复制创建订阅

> ID：10979728
> 
> 赞同：0
> 
> 时间：2012-06-11T12:02:58.190
> 
> 标签：sql-server-2008, replication, subscription, merge-replication

我有 2 台服务器（Server1、Server2）。我想运行一个脚本来制作 Server2，Server1 的订阅者。使用向导非常简单。我已经使用向导生成了相关脚本，但它不起作用。脚本是：

```
EXEC sp_addmergesubscription 
    @publication = 'MergePub', 
    @subscriber = 'Server2', 
    @subscriber_db = 'MergeDB',
    @subscription_type = N'push', 
    @sync_type = 'Automatic', 
    @subscriber_type='Global';
EXEC sp_addmergepushsubscription_agent
    @publication = 'MergePub',
    @subscriber = 'Server2', 
    @subscriber_db = 'MergeDB'
    @subscriber_login = 'sa'
    @subscriber_password = '123' 
```

什么是错误的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T16:53:08.017

根据您的描述很难说什么是错误的，因为您没有提供错误消息。

我可以使用以下脚本创建合并推送订阅：

```
 -- Add a push subscription to a merge publication.
USE [AdventureWorks2008R2]
EXEC sp_addmergesubscription 
  @publication = @publication, 
  @subscriber = @subscriber, 
  @subscriber_db = @subscriptionDB, 
  @subscription_type = N'push';

--Add an agent job to synchronize the push subscription.
EXEC sp_addmergepushsubscription_agent 
  @publication = @publication, 
  @subscriber = @subscriber, 
  @subscriber_db = @subscriptionDB, 
  @job_login = $(Login), 
  @job_password = $(Password);
GO 
```

查看[如何：创建推送订阅](http://msdn.microsoft.com/en-us/library/ms146912.aspx)。

# text - 单击跨度标记中的部分文本

> ID：10979734
> 
> 赞同：2
> 
> 时间：2012-06-11T12:03:13.190
> 
> 标签：text, message, watir

我有这个 html 代码：

```
<tbody>
  <tr>
    <td class=message>
      <div class=div10l>Fill In All Fields With<IMG style="CURSOR: hand" border=0 alt="Not  Null" src="../img/re.gif">.</div>
      <span style="COLOR: red">
        <a href="../main/Error.jsp" target=_blank>
          <span style="COLOR: red">Exception: ERROR: duplicate key value</span>
        </a>
        <br>
      </span>
      <br>
    </td>
  </tr>
</tbody> 
```

如果页面上有错误，我会收到消息异常：错误：重复键值，这是详细说明的链接。如何仅使用部分文本单击此文本-异常？

我试过 ie1.span(:text => /Exception: ERROR:/).click，但链接没有打开。

如果我尝试 ie1.link(:href, "../main/Error.jsp").click - 我得到以下信息：

```
can't find the object - 
E:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/element.rb:66:in `assert_exists': Unable to locate element, using {:tag_name=>["a"], :href=>"../main/Error.jsp"} (Watir::Exception::UnknownObjectException)
    from E:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/element.rb:414:in `perform_action'
    from E:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/element.rb:269:in `click!'
    from E:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/element.rb:211:in `click'
    from file1.rb:53:in `<main>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:43:20.600

试试这个：

```
browser.link(:text => /Exception: ERROR:/).click 
```

这是根据其文本单击链接。锚标签内的跨度文本算作锚标签文本。

# android - 创建android帮助屏幕

> ID：10979738
> 
> 赞同：4
> 
> 时间：2012-06-11T12:03:30.610
> 
> 标签：android, android-layout, screen

我尝试在应用程序首次运行时制作覆盖主页的帮助屏幕。就像在这张图片中一样。任何人都可以帮助我完成这项任务

![例子](../Images/3514d51a9dd2175035674530b5ecb468.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:40:38.383

我认为最简单的方法可能是用黑色的标准视图覆盖您的主功能视图，然后使用 alpha 属性让您的主视图通过，然后在 alpha 混合的顶部再次使用 ImageView 或类似的东西看法。

当然还有其他潜在的方法可以做到这一点，但这可能是最简单的。

您也可以选择一个背景已经半透明的图像视图，然后您可能只需要一个图像视图而不是第二个视图（如上所述）。

根据您使用的布局类型，您可能必须将其作为弹出框执行，以便它可以真正布局在顶部而不是线性布局或相对布局等...

# java - Android：将对象上传到服务器的进度条

> ID：10979739
> 
> 赞同：0
> 
> 时间：2012-06-11T12:03:30.800
> 
> 标签：java, android, progress-bar

我想在将对象发送到服务器时放置进度条。但是我不知道我需要在**doInBackground()**方法中编写什么代码以及在**onProgressUpdate()**中编写什么代码 。

这里使用Client Socket程序将Object发送到Server。

代码（内部类）：

```
class DownloadFileAsync extends AsyncTask<String, String, String> {

@Override
protected void onPreExecute() {
dialog = new ProgressDialog(this);
    dialog.setMessage("Uploading...");
    dialog.setIndeterminate(false);
    dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
    dialog.setProgress(0);
    dialog.show();
}

@Override
protected String doInBackground(String... aurl) {
}

@Override
protected void onProgressUpdate(String... progress) {

}

@Override
protected void onPostExecute(String unused) {

}
} 
```

所以，这里我需要在**doInBackground()**和**onProgressUpdate()中写**

我有一个对象**serverObject**我需要发送到服务器。

目前我正在使用以下代码将对象发送到服务器而没有任何进度条：

```
Socket s = new Socket("xxx.xx.xx.xxx", xxx);

//to send object to the server
ObjectOutputStream oos = new ObjectOutputStream(s.getOutputStream());
oos.writeObject(serverObject);
oos.flush();
if (s != null) {s.close();}
if (oos != null) {oos.close();} 
```

我如何将此代码写入**doInBackground()**方法并跟踪发送的数据百分比。

如何获取对象的大小。在很多网站中，他们提到了文件的大小。但就我而言，这是一个对象。

还有一件事要执行，我需要写：

```
new DownloadFileAsync().execute(params); 
```

那么我如何得到这个参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:08:45.197

嗨，这是您问题的答案，请找到[链接](https://stackoverflow.com/questions/9501550/how-can-i-make-an-android-app-communicate-with-a-web-server-over-the-internet/9503995#9503995)

这是如何将文件上传到服务器的示例。

这是您可以添加进度条的示例。

```
ProgressDialog pd;
private final Handler handler = new Handler(){
    @Override
    public void handleMessage(Message msg) {
        switch(msg.what){
         case 1:
            pd = ProgressDialog.show(this, "uploading...", "Please Wait..", true,false);
            pd.setCancelable(false);

          break;
         case 2:
         pd.dismiss();
         break;
        }

}
};
 new Thread(new Runnable() {                
            @Override
            public void run() {                     
                try {                   
                         handler.sendEmptyMessage(1);
                         executeMultipartPost(bitmap,filename.jpg);
                         handler.sendEmptyMessage(2);
                    } catch (Exception e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }   

            }
        }).start(); 
```

# php - PHP - 静态方法名称中的变量

> ID：10979746
> 
> 赞同：1
> 
> 时间：2012-06-11T12:03:45.870
> 
> 标签：php

> **可能重复：**
> [PHP 在调用静态方法时使用变量](https://stackoverflow.com/questions/1626870/php-using-a-variable-when-calling-a-static-method)

尝试在静态函数上使用变量时，我已经阅读了这里的一些不同帖子（IE [PHP Using a variable when calling a static method](https://stackoverflow.com/questions/1626870/php-using-a-variable-when-calling-a-static-method?rq=1)），但我似乎无法让 call_user_func_array() 函数工作就像我能够直接在类名中调用变量一样。

PHP >= 5.3.0 方法：

```
$data = $factory_model::by_array(array(
    $form_fields['name_field']  => $value
)); 
```

PHP < 5.3.0 方法：

```
$data = call_user_func_array(array($factory_model, 'by_array'), array(  
    $form_fields['name_field']  => $value
)); 
```

这是我继承的一些代码，因此我无法对模型进行太多更改，但它*应该*提供以下输出：

```
initiative_forecast_type Object
(
    [id:initiative_forecast_type:private] => 0
    [forecast_type:initiative_forecast_type:private] => TRTR
    [tstamp] => 2012-06-11 12:52:07
) 
```

它使用标准 PHP 5.3 方法（我的用户输入/值是 'TRTR'）

但是，如果我使用 call_user_func_array 方法，我会得到：

```
initiative_forecast_type Object
(
    [id:initiative_forecast_type:private] => 0
    [forecast_type:initiative_forecast_type:private] => 
    [tstamp] => 2012-06-11 12:52:07
) 
```

所以它没有设置“forecast_type”字段。我在这里上传了模型 - [http://pastebin.ca/2160201](http://pastebin.ca/2160201)

供参考 - $factory_model = Initiative_forecast_type_factory

我认为 2 call_user_func_array() 函数应该与 5.3.0 方法一样工作，但它似乎不是 - 谁能指出我正确的方向？

谢谢！基督教

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T12:08:10.097

`call_user_func_array()`期望第二个参数是函数的实际参数的数组（数组中的键将被忽略）。你真正想要的是`call_user_func()`.

```
call_user_func_array('func', array('foo' => 'bar')) === func('bar')
call_user_func_array('func', array(array('foo' => 'bar'))) === func(array('foo' => 'bar'))
call_user_func('func', array('foo' => 'bar')) === func(array('foo' => 'bar')) 
```

# printing - 如何打印 CRM 2011 工作流程或对话流程的概述？

> ID：10979749
> 
> 赞同：1
> 
> 时间：2012-06-11T12:03:57.257
> 
> 标签：printing, workflow, dynamics-crm-2011

有时，Microsoft Dynamics CRM 2011 中的工作流和对话过程会有点长（我的意思是步骤数，而不是执行时间），并且在设计时尝试跟踪它们/查看它们在屏幕上可能会有些麻烦。

有没有人找到将工作流程和对话流程设计打印到硬拷贝的方法？**这不是我需要经常做的事情——也不是我的用户需要做的事情（所以我不在乎解决方案有多“丑陋”！）。**

*对话框屏幕上*有一个打印按钮（它会弹出一个可以打印的预览屏幕），但是在打印时它只会完整呈现“标题”信息。实际的工作流/流程定义位于 iFrame 中，并且只有一小部分会打印在最终输出中。

我尝试使用 Internet Explorer 开发工具手动强制 iFrame（以及它内部和外部的一些 div）更大（通过 CSS`height`属性） - 即足以移除滚动条。这在屏幕上看起来不错，因为承诺可以在硬拷贝中工作，但这仅证明完全停止 iFrame 中的所有输出渲染。

也许 CSS 是要走的路，但我的努力失败了，虽然我对 CSS 有很好的处理，但如果元素高度以外的其他东西在这里起作用，这几乎是猜测。

我想我可以复制/粘贴屏幕截图并将它们拼凑在一起，但我希望那里存在更复杂的东西！

* * *

## **更新：**

我在最初的问题中省略了如果可能的话我正在寻找一个免费的解决方案。已经有 2 个答案都可以用来实现我的战略目标。我特别喜欢@AdamV 建议使用 SnagIt，因为它很有效。我只是想先看看在授予“答案”状态之前是否有任何**免费选项。**

* * *

## **更新（2）：**

三个完全可行的答案，所以我也想将这三个都标记为“答案”。@Daryl 回答了好几次，Screen Hunter Pro 比 SnagIt 便宜。尽管投票并且尽管我要求免费的东西，但这些是我首选的解决方案：

*   [根据@Daryl， Screen Hunter Pro](http://wisdom-soft.com/products/screenhunter_pro.htm)进行屏幕抓取（29.99 美元）
*   根据@AdamV 的 SnagIt（约 55.00 美元）
*   根据@Daryl 复制和粘贴 HTML 源代码
*   根据@Daryl 从数据库重建

我认为 Screen Hunter Pro 的 20 英镑值得避免为其他选项付出额外的努力。

感谢@AdamV，对不起，我也不能像我希望的那样给你答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:24:36.233

您是否尝试过使用 Techsmith 的 Snagit 将所有可滚动网页捕获为单个屏幕截图？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T14:38:10.960

这将是更多的工作，并且可能容易被 CRM 更新破坏，所以我只推荐它作为最后的选择，但您可以通过 SSRS 报告或您认为的任何其他方法从 SQL 数据库本身提取数据更舒服。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T19:04:27.557

我刚刚做了一个快速测试，使用开发者工具 (F12) 并单击 (ctrl + t) 获取源和样式，将样式和标题复制到空白 html 文本文档，并将 wfWorkflowDefinitionContainer 表复制到正下方头。

你得到缩进，但没有图片，但搜索和替换也不会很难得到那些......

# .htaccess - 如何使用 .htaccess 在多个 RewriteCond 中获取反向引用变量

> ID：10979753
> 
> 赞同：1
> 
> 时间：2012-06-11T12:04:24.090
> 
> 标签：.htaccess, mod-rewrite

这些重写规则似乎不起作用。这是不可能的还是我错过了什么

有问题的规则是第二个，注意反向引用 %1

```
RewriteCond %{REQUEST_URI} ^/([a-zA-Z\.]+)/.*$ [NC]
RewriteCond %{HTTP_COOKIE} route_controller_%1=([^;]+) [NC]
RewriteRule ^(.*)$ http://example2.com/%1/_/$1 [L] 
```

这就是我期望发生的事情。给定网址

```
http://example.com/abc/home 
```

第一条规则应该将 abc 存储在 %1 我想要一个名为 route_controller_abc 的 cookie 的第二条规则，如果找到那么第三条规则将重写为

```
http://example2.com/thevalueofthecookie/_/home 
```

但是 seconf 规则似乎没有使用 %1 反向引用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:42:52.207

这样做的原因是字符串替换只发生在 cond 的第一个参数中，而不发生在它的 rexexp 上。您必须使用`\1`等来模拟正则表达式中的参数。

您也可以在规则正则表达式中选择目录，因为执行顺序是规则正则表达式、cond1、cond2、...规则替换。例如。`^(*.?)/.*$`for`abc/home`将设置`$1`为`abc`$0 为`abc/home`. 因此我会尝试类似的东西：

```
RewriteCond $1:%{HTTP_COOKIE} ^(.*?):.*\broute_controller_\1=([^;]+) [NC]
RewriteRule ^(*.?)/.*$        http://example2.com/%2/_/$0            [L] 
```

请注意，控制器现在位于 %2 中，因为 %1 用于在 cond 正则表达式中绑定目录。

希望这有助于并回答您的直接问题。但是，使用这样的未经验证的 cookie 进行重定向，我会有点紧张。如果我这样做，我会加强对参数的验证，`([^;]+)`或者将其移至一个小的 PHP 重定向器脚本并在那里进行验证:-)

# spring - Spring Security - 如何使用数据库动态定义拦截 URL？

> ID：10979756
> 
> 赞同：4
> 
> 时间：2012-06-11T12:04:26.540
> 
> 标签：spring, spring-security

我最近一直在研究 Spring Security，我需要知道如何使用数据库动态定义拦截 URL（在 Spring Security 中）。

我已经深入研究了整个互联网，但在这方面我找不到任何独特的（当然有用的）教程。

所以这就是我所做的：

* * *

首先我实现了 FilterInvocationSecurityMetadataSource 抽象类：

 ````
public class MyFilterSecurityMetadataSource implements FilterInvocationSecurityMetadataSource {

    public List<ConfigAttribute> getAttributes(Object object) {
        FilterInvocation fi = (FilterInvocation) object;
        String url = fi.getRequestUrl();
        List<ConfigAttribute> attributes = new ArrayList<ConfigAttribute>();

        attributes = getAttributesByURL(url);

        return attributes;
    }

    public Collection<ConfigAttribute> getAllConfigAttributes() {
        return null;
    }

    public boolean supports(Class<?> clazz) {
        return FilterInvocation.class.isAssignableFrom(clazz);
    }

    public List<ConfigAttribute> getAttributesByURL(String inputUrl)
    {
        List<ConfigAttribute> attributes = new ArrayList<ConfigAttribute>();

        Connection connection = null;
        String url = "jdbc:mysql://173.0.0.22:3306/";
        String dbName = "kheirkhahandb";
        String driverName = "com.mysql.jdbc.Driver";
        String userName = "kheirkhahan";
        String password = "kheirkhahan";
        try{
            Class.forName(driverName).newInstance();
            connection = DriverManager.getConnection(url+dbName, userName, password);
            try{
                Statement stmt = connection.createStatement();
                String selectquery = "select * from URL_ACCESS where URL = '" + inputUrl +"'";
                ResultSet rs = stmt.executeQuery(selectquery);
                while(rs.next()){
                    MyConfigAttribute temp = new MyConfigAttribute();
                    String attr = rs.getString("ACCESS").toString();
                    temp.setAttr(attr);
                    attributes.add(temp);
                }
            }
            catch(SQLException s){
                System.out.println(s);
            }
            connection.close();
        }
        catch (Exception e){
            e.printStackTrace();
        }
        return attributes;
    } 
```` 

* * *

`我将我的security.xml设置为：

 ````
<bean id="springSecurityFilterChain" class="org.springframework.security.web.FilterChainProxy">
        <sec:filter-chain-map path-type="ant">
            <sec:filter-chain pattern="/css/**" filters="none" />
            <sec:filter-chain pattern="/images/**" filters="none" />
            <sec:filter-chain pattern="/login.jsp*" filters="none" />
            <sec:filter-chain pattern="/**"
                filters="
            securityContextPersistenceFilter,
            logoutFilter,
            authenticationProcessingFilter,
            exceptionTranslationFilter,
            filterSecurityInterceptor" />
        </sec:filter-chain-map>
    </bean>

    <bean id="securityContextPersistenceFilter"
        class="org.springframework.security.web.context.SecurityContextPersistenceFilter">
    </bean>

    <bean id="exceptionTranslationFilter"
        class="org.springframework.security.web.access.ExceptionTranslationFilter">
        <property name="authenticationEntryPoint" ref="authenticationEntryPoint" />
        <property name="accessDeniedHandler" ref="accessDeniedHandler" />
    </bean>

    <bean id="authenticationEntryPoint"
        class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint">
        <property name="loginFormUrl" value="/login.jsp?error=entryPoint" />
    </bean>

    <bean id="accessDeniedHandler"
        class="org.springframework.security.web.access.AccessDeniedHandlerImpl">
        <property name="errorPage" value="/login.jsp?error=access_denied" />
    </bean>

    <bean id="authenticationProcessingFilter"
        class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter">
        <property name="authenticationManager" ref="authenticationManager" />
    </bean>

    <bean id="filterSecurityInterceptor"
        class="org.springframework.security.web.access.intercept.FilterSecurityInterceptor">
        <property name="authenticationManager" ref="authenticationManager" />
        <property name="accessDecisionManager" ref="accessDecisionManager" />
        <property name="securityMetadataSource" ref="myFilterInvocationSecurityMetadataSource" />
    </bean>

    <bean id="myFilterInvocationSecurityMetadataSource" class="com.datx.dao.MyFilterSecurityMetadataSource">
    </bean>

    <bean id="logoutFilter"
        class="org.springframework.security.web.authentication.logout.LogoutFilter">
        <constructor-arg value="/login.jsp?error=logout" />
        <constructor-arg ref="logoutHandler">
        </constructor-arg>
    </bean>

    <bean id="logoutHandler"
        class="org.springframework.security.web.authentication.logout.SecurityContextLogoutHandler"></bean>
<sec:authentication-manager alias="authenticationManager">
        <sec:authentication-provider>
            <sec:jdbc-user-service data-source-ref="dataSource"
                group-authorities-by-username-query="
                                        SELECT acg.ID, acg.GROUP_NAME, a.AUTHORITY_NAME AS AUTHORITY 
                                        FROM ACCESS_GROUPS acg, ACCESS_GROUP_MEMBERSHIP agm, GROUP_AUTHORITIES ga, AUTHORITIES a
                                        WHERE agm.USERNAME = ? and acg.ID = ga.GROUP_ID and acg.ID = agm.GROUP_ID and ga.AUTHORITY_ID = a.ID
                                    "
                users-by-username-query="SELECT USERNAME,PASSWORD,IS_ACTIVE FROM USER where USERNAME = ?"
                authorities-by-username-query="
                                        SELECT ua.USERNAME, a.AUTHORITY_NAME AS AUTHORITY 
                                        FROM USER_AUTHORITIES ua, AUTHORITIES a 
                                        WHERE ua.USERNAME = ? and ua.AUTHORITY_ID = a.ID
                                    " />
        </sec:authentication-provider>
    </sec:authentication-manager>

    <bean id="accessDecisionManager"
        class="org.springframework.security.access.vote.AffirmativeBased">
        <property name="decisionVoters">
            <list>
                <ref bean="roleVoter" />
            </list>
        </property>
    </bean>
    <bean id="roleVoter"
        class="org.springframework.security.access.vote.RoleHierarchyVoter">
        <property name="rolePrefix" value="" />
        <constructor-arg ref="roleHierarchy" />
    </bean>

<bean id="roleHierarchy" class="com.datx.dao.MyRoleHierarchyImpl">
        <property name="roleHierarchyEntryDaoJdbc" ref="RoleHierarchyEntryDaoJdbc" />
    </bean>

</beans> 
```` 

* * *

`有一些我找不到的问题：
1\. 我在 URL_ACCESS 数据库中插入了一些像 <"URL" ， "ROLE"> 的对。但我不确定 getAttributes 方法是否工作正常
2\. 我是否必须实现我在

3\. 当用户使用错误的用户名/密码或尝试访问不允许的页面而不是被重定向到 login.jsp 时，我收到异常。这是为什么？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T15:47:37.023

首先，我会确保您已经查阅了有关此问题的[常见问题解答](http://static.springsource.org/spring-security/site/faq.html#faq-dynamic-url-metadata)，以确保您确实想要这样做。正如[汤姆](https://stackoverflow.com/users/1223376/tom)所暗示的那样，通常不建议将此类信息放在数据库中。

就您当前的代码是否/为什么工作而言，如果没有更多细节，很难说。例如，您在日志中看到的错误是什么？#2 中的问题似乎并不完整。Spring Security 日志说什么？

如果要坚持这个计划，我将继续充分使用命名空间配置并[利用 BeanPostProcessor（如常见问题解答中所述）](http://static.springsource.org/spring-security/site/faq.html#faq-namespace-post-processor)来交换`FilterInvocationServiceSecurityMetadataSource`. 一个实现可能看起来像这样：

```
public class FilterInvocationServiceSecurityMetadataSourceBeanPostProcessor 
    implements BeanPostProcessor { 
    private FilterInvocationServiceSecurityMetadataSource metadataSource;

    public void setMetadataSource(FilterInvocationServiceSecurityMetadataSource metadataSource) {
        this.metadataSource = metadataSource;
    }

    public Object postProcessBeforeInitialization(Object bean, String beanName) { 
        if(bean instanceof FilterInvocationSecurityMetadataSource) { 
            return metadataSource; 
        } 
        return bean; 
    } 

    public Object postProcessAfterInitialization(Object bean, String beanName) { 
        return bean; 
    } 
} 
```

然后`FilterInvocationServiceSecurityMetadataSource`可以在 Spring 配置中指定您的自定义以及`FilterInvocationServiceSecurityMetadataSourceBeanPostProcessor`.

```
<bean id="fiMds" class="FilterInvocationServiceSecurityMetadataSourceBeanPostProcessor">
  <property name="metadataSource">
    <bean id="myFilterInvocationSecurityMetadataSource" class="com.datx.dao.MyFilterSecurityMetadataSource"/>
  </property>
</bean> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T07:36:18.980

感谢 Tom 和 Rob 的快速回复。

首先，我完全意识到“在数据库中存储 url 模式不是一个好主意”。但是，我们正在尝试动态管理所有内容。所以没有其他选择。

事实证明，我的代码存在一些小问题。在这里，我一一回答我的每一个问题。

1.  我的 getAttributes 方法工作得很好。但是有另一种加载 url-patterns 的方法。我可以先将所有 url 模式及其相应的角色分别加载到 HashedMap 中。而在 getAttributes 方法中，我可以只查找 HasehdMap 。简而言之，它会是这样的：

    *   HashedMap **url-access** = myDBManager.getAllUrlAccess();
        在我的 getAttributes 方法中，我使用了这个**url-access**东西。
2.  这个问题以某种方式被修剪了！我试图询问 springSecurityFilterChain bean 中使用的那些过滤器。

    ```
    <bean id="springSecurityFilterChain" class="org.springframework.security.web.FilterChainProxy">
            <security:filter-chain-map path-type="ant">
                <sec:filter-chain pattern="/css/**" filters="none" />
                <sec:filter-chain pattern="/images/**" filters="none" />
                <sec:filter-chain pattern="/login.jsp*" filters="none" />
                <sec:filter-chain pattern="/**"
                    filters="
                securityContextPersistenceFilter,
                logoutFilter,
                authenticationProcessingFilter,
                exceptionTranslationFilter,
                filterSecurityInterceptor" />
            </security:filter-chain-map>
    </bean> 
    ```

3.  我收到异常是因为在 authenticationProcessingFilter bean 中没有这样的属性。所以我像这样重写它：

    ```
    <bean id="authenticationProcessingFilter" class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter">
        <property name="authenticationFailureHandler" ref="authenticationFailureHandler" />
        <property name="filterProcessesUrl" value="/j_spring_security_check" />
        <property name="usernameParameter" value="j_username" />
        <property name="passwordParameter" value="j_password" />
        <property name="authenticationManager" ref="authenticationManager" />   
    </bean> 
    ```

当然，我还必须引入 authenticationFailureHandler bean：

```
<bean id="authenticationFailureHandler" class="org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler">
        <property name="defaultFailureUrl" value="/index.jsp" />
</bean> 
```

现在我没有收到任何异常。

但是这里出现了另一个问题：我无法理解用户名/密码是否不正确或用户名无权访问请求的页面。在这两种情况下，用户都会根据这个 bean 进行重定向：

```
<bean id="authenticationEntryPoint"
    class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint">
        <property name="loginFormUrl" value="/login.jsp?error=EntryPoint" />
</bean> 
```

为什么它控制这两种情况？``

# android - 如何在画布上画一个半椭圆

> ID：10979757
> 
> 赞同：1
> 
> 时间：2012-06-11T12:04:36.353
> 
> 标签：android, draw, paint, android-canvas

我正在尝试在画布上画一个笑脸。嘴巴需要看起来快乐或不快乐，取决于 0-100 之间的整数。以下代码绘制笑脸：

```
 paint.setStyle(Paint.Style.FILL);
    paint.setColor(getColorByIntesity(intesity));
    canvas.drawCircle(23, 23, 20, paint);

    paint.setColor(Color.BLACK);
    canvas.drawCircle(15, 15, 3, paint); //Left eye
    canvas.drawCircle(31, 15, 3, paint); //Right eye

    paint.setStyle(Paint.Style.STROKE); 
    canvas.drawCircle(23, 23, 20, paint);

    if(intesity >= 55)
        canvas.drawArc(getMouthDrawingByIntesity(intesity), 180, 180, false, paint); //Mouth
    else if(intesity < 55)
        canvas.drawArc(getMouthDrawingByIntesity(intesity), 0, 180, false, paint); //Mouth 
```

我画嘴的方法是这样的：

```
 final RectF oval = new RectF();
    if(intesity < 5){
        oval.set(11, 12, 35, 35);
    } etc.. 
```

但是嘴巴看起来真的很像素化。有谁知道绘制曲线（椭圆的一半）的更好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:09:38.543

尝试这个：

```
paint.setAntiAlias(true); 
```

如果这不起作用，请使用以下方法：

```
paint.setPathEffect(new CornerPathEffect(10)); 
```

希望这可以帮助

# asp.net - 转换为时的问题 在 ASPNET 中

> ID：10979761
> 
> 赞同：0
> 
> 时间：2012-06-11T12:04:45.080
> 
> 标签：asp.net, html

我正在将仅带有普通 html 4.01 控件的经典 asp 页面转换为 asp.net 2.0 web

页。虽然我可以用等效的 asp.net 控件替换大部分控件，

但是我面临控件样式的问题。即控件熄灭

对齐，即使它们使用相同的样式信息。

前任：

**旧代码**

```
<p class="menuitem" id="menu01">
<a target="" href="Category.aspx?ccat_id=152&amp;language=en-GB&amp;publication=3">
<img height="7" width="12" src="Webroot/visual/arrow-navi-right.gif" border="0" alt="">Item 1</a>
</p> 
```

**新的替代品**

```
<p class="menuitem" id="menu01">
<asp:LinkButton ID="LinkButtonManual" runat="server" PostBackUrl="~/Category.aspx?ccat_id=152&amp;language=en-GB&amp;publication=3">
  <asp:Image id="imgLinkManual" runat="server" Width="12" Height="7" ImageUrl="~/visual/arrow-navi-right.gif" ImageAlign="Left"/>
  <asp:Label ID="LblManual" runat="server" Text="Item 1"/>
</asp:LinkButton>
</p> 
```

在这种情况下，理想情况下，图像和标签应该看起来像

![必需的](../Images/97fa724e42f35735f9e21b0cb70f6c89.png)

但实际上它表现为

![问题](../Images/ce39099323c96024d5f2e8b608b71a9f.png)

由于没有对图像（因为它们只是图标）进行处理

服务器端。我是否应该限制使用旧方式，即使用旧的 html 控件。

非常感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:33:07.460

其实这行得通。在段落级别添加文本对齐的样式属性。 **style="text-align:left"**里面

堵塞

```
<p class="menuitem" id="menu01" style="text-align:left">

<asp:LinkButton ID="LinkButtonManual" runat="server" PostBackUrl="~/Category.aspx?ccat_id=152&amp;language=en-GB&amp;publication=3">
<img Width="12" Height="7" alt="" src="visual/arrow-navi-right.gif.gif">
<asp:Label ID="LblManual" runat="server" Text="Item 1"/>
</asp:LinkButton>

</p> 
```

那么，如果我遵循这种方法，你们会发现性能/编码风格有什么问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:10:37.040

ASP.NET 图像呈现为 HTML 图像，因此您应该检查 ASP.NET 图像的源代码，而不是 ASPX 代码。然后，您将能够比较 2 段代码，看看有什么不同。

但是，查看您的代码，我可以`ImageAlign`在您的 ASP.NET 图像上看到一个您在原始 HTML 图像上没有的属性。

同样在您的原始 HTML 代码中，您只需`Item 1`.，而在您的 ASP.NET 代码中，您有一个带有`Item 1`文本值的 ASP.NET 标签。A`label`呈现为`span`标签。相反，您应该使用`Literal`控件，因为它不会呈现任何 HTML 标记。

尝试更改为：

```
<asp:LinkButton ID="LinkButtonManual" runat="server" PostBackUrl="~/Category.aspx?ccat_id=152&amp;language=en-GB&amp;publication=3">
  <asp:Image id="imgLinkManual" runat="server" Width="12" Height="7" ImageUrl="~/visual/arrow-navi-right.gif" /><asp:Literal ID="LtlManual" runat="server" Text="Item 1" />
</asp:LinkButton> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T12:17:30.133

如果`ImageAlign="Left"`在 ASP 控件中使用，它与`align="left"`在普通 HTML`<img>`标记中使用相同。该标签的行为可以在这里找到：

[http://www.htmlcodetutorial.com/images/_IMG_ALIGN.html](http://www.htmlcodetutorial.com/images/_IMG_ALIGN.html)

我认为`<img>`当您不需要服务器端交互时最好使用 html 标签，但您也可以删除`ImageAlign="left"`并获得相同的结果。

# php - php数组多维索引

> ID：10979763
> 
> 赞同：2
> 
> 时间：2012-06-11T12:04:48.507
> 
> 标签：php, arrays, preg-match-all

我对 php 很陌生，所以这是一个我还没有找到答案的基本问题。

我通过如下进行正则表达式匹配从页面中提取重复信息。正则表达式有两个捕获组 (...)，因此`$matches`数组的索引范围从 0（完整的正则表达式值）到 2（1 和 2 是捕获组值）。

```
<?php
    $page = file_get_contents(url);
    preg_match_all(regex-with-two-capturing-groups, $page, $matches);
    $m1 = $matches[1];
    $m2 = $matches[2];
    for ($i=0; $i < sizeof($m1); $i++) {
        echo ("<tr><td>$m1[$i]</td><td>$m2[$i]</td></tr>");
    }
?> 
```

这很好用，但起初我尝试了一个较短的版本：

```
<?php
    $page = file_get_contents(url);
    preg_match_all(regex-with-two-capturing-groups, $page, $matches);
    for ($i=0; $i < sizeof($matches[0]); $i++) {
        echo ("<tr><td>$matches[1][$i]</td><td>$matches[2][$i]</td></tr>");
    }
?> 
```

但这导致

```
<tr><td>Array[0]</td><td>Array[0]</td></tr>
<tr><td>Array[1]</td><td>Array[1]</td></tr>
<tr><td>Array[2]</td><td>Array[2]</td></tr>
<tr><td>Array[3]</td><td>Array[3]</td></tr>
<tr><td>Array[4]</td><td>Array[4]</td></tr>
... 
```

为什么是这样？
有没有办法在一个表达式中进行二维索引，而不必定义中间数组 m1 和 m2？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:06:50.673

使用此代码：

```
<?php
    $page = file_get_contents(url);
    preg_match_all(regex-with-two-capturing-groups, $page, $matches);
    for ($i=0; $i < sizeof($matches[0]); $i++) {
        echo ("<tr><td>".$matches[1][$i]."</td><td>".$matches[2][$i]."</td></tr>");
    }
?> 
```

PHP 文档：[language.types.string.parsing](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing)

也看这里：[PHP：多维数组元素的连接](https://stackoverflow.com/questions/4886388/php-concatenation-of-multidimensional-array-elements)

# java - 使用 JNDI/Java 中的当前用户在 LDAP 上进行身份验证

> ID：10979766
> 
> 赞同：2
> 
> 时间：2012-06-11T12:05:06.200
> 
> 标签：java, authentication, active-directory, ldap, jndi

我以为我会找到更多关于这个主题的信息，但我没有。

我必须编写一个 java 应用程序来检查特定用户属于哪个用户。

但是要通过服务器进行身份验证，我不能要求用户名和密码，也不能将其存储在源（或其他文件）中。

JNDI 和 Java 有没有办法对当前登录的用户进行身份验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:16:55.927

您所能做的就是检查是否存在与当前登录 Java 应用程序的用户具有相同用户名的用户。没有密码，您将无法检查其他任何内容。为此，您需要一些有权列出其他用户的 ldap 用户的用户名和密码。然后您可以为您的用户查询 LDAP。

这是一个改编自我使用的示例的示例，它会检查活动目录，因此可能需要进行一些更改：

```
boolean userFound = user_exits("searchUser",
        "searchPassword",
        "(sAMAccountName={USERNAME})",
        "ldap://ldap.mydomain.com",
        "OU=MYOU,dc=mydomain,dc=com");

private boolean user_exits(String searchUser, String searchPassword,
        String filter, String url, String baseDn) throws NamingException {
DirContext ctx = null;
Hashtable<String, String> env = new Hashtable<String, String>();
env.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
env.put(Context.PROVIDER_URL, url);
env.put(Context.SECURITY_AUTHENTICATION, "simple");
env.put(Context.SECURITY_PRINCIPAL, searchUser);
env.put(Context.SECURITY_CREDENTIALS, searchPassword);

try {
    ctx = new InitialDirContext(env);
        String[] attributeFilter = {};
        SearchControls sc = new SearchControls();
        sc.setReturningAttributes(attributeFilter);
        sc.setSearchScope(SearchControls.SUBTREE_SCOPE);

        NamingEnumeration<SearchResult> results = ctx.search(baseDn, filter, sc);
        return results.hasMore();

    } catch (NamingException e) {
        throw e;
    } finally {
        if (ctx != null) {
            try {
                ctx.close();
            } catch (NamingException e) {}
        }
    }       
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:10:08.693

如果 LDAP 客户端具有现有连接，请使用`who am i?`扩展请求或`authorization identity request control`确定现有连接的 authID - 符合 LDAP 的服务器和[UnboundID LDAP SDK](http://www.unboundid.com/products/ldap-sdk/)将支持任一方法。`who am i?`扩展请求可以随时在连接上使用（假设身份验证身份有权使用扩展请求），但只能`authorization identity request control`附加到绑定请求。

`who am i?`扩展请求的使用`authorization identity request control`在[AuthDemo.java](https://code.google.com/p/ldap-sample-code/source/browse/trunk/src/main/java/samplecode/auth/AuthDemo.java)中进行了演示。

### 也可以看看

*   [目录数据库中的帐户状态](http://ff1959.wordpress.com/2011/06/10/status-of-user-accounts-in-a-directory-server-database/#authentication-id)
*   [授权身份请求控制](http://www.ietf.org/rfc/rfc3829.txt)
*   [我是谁？扩展请求](http://www.ietf.org/rfc/rfc4532.txt)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T06:46:50.420

由于似乎没有真正的解决方案，我现在在脚本/工具的开头请求登录信息并在需要时使用它。

# php - 无法在 PHP 中编码字符（字符串值不正确）

> ID：10979770
> 
> 赞同：4
> 
> 时间：2012-06-11T12:05:19.973
> 
> 标签：php, mysql

我想在将丹麦字符发送到数据库之前对其进行编码。

我尝试将此功能应用于他们：

```
private function process_array_elements(&$element){
   $element = utf8_encode($element);
   $element = strip_tags(  $element );
   $element = strtolower ( trim ( $element )  );
   $element = mysql_real_escape_string($element);
   return $element;
} 
```

像这样：

```
$this->check_line_two = $this->process_array_elements($e); 
```

现在，每当我尝试将字符串发送到数据库时：

```
mysql_query("SET NAMES 'utf8'");
$query="INSERT INTO  result_scanned
          SET line_one= '$this->check_line_one',
              line_two='$this->check_line_two',
              line_three='$this->check_line_three',
              advert_id='$this->advert_id',
              scanned='$this->scan_result'"; 
```

我明白了：

```
 Incorrect string value: '\xE3\x83\xE2\xB8r ...' for column 'line_three' at row 1 
```

表中字段的数据类型是 UTF-8 ( `utf8_unicode_ci`)，所以我必须使用相同的编码我的字符串

该线程与我的问题有关：[Detect encoding and make everything UTF-8](https://stackoverflow.com/questions/910793/detect-encoding-and-make-everything-utf-8)。

但是，在将任何字符插入数据库之前，我需要知道如何将其编码为 UTF-8，否则，我会收到上述错误。我想在将它们放入数据库之前，我需要先确定我收到的字符类型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T12:08:02.327

`utf8_unicode_ci`是排序规则，您还需要字符集`utf8`：

```
CREATE TABLE someTable DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_unicode_ci; 
```

为了更好地衡量，请确保在使用 PHP 连接到 MySQL 时一切都是 UTF-8：

```
mysql_connect ("localhost", "DB_USER", "DB_PASSWORD") or die (mysql_error());
mysql_select_db ("DATABASE_NAME") or die (mysql_error());

mysql_query("SET character_set_client=utf8"); 
mysql_query("SET character_set_connection=utf8"); 
mysql_query("SET character_set_database=utf8"); 
mysql_query("SET character_set_results=utf8"); 
mysql_query("SET character_set_server=utf8"); 
mysql_query("SET NAMES 'utf8'"); 
```

这就是我在运行的[希伯来语胡言乱语翻译](http://gibberish.co.il/)网站上的连接方式，它处理我自己或用户扔给它的所有内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T08:17:26.090

```
Incorrect string value: '\xE3\x83\xE2\xB8r ...' for column 
```

我只在使用时收到此错误`strtolower`

我的数据库和排序规则都是 UTF-8 并且所有字符都没有问题。我有一个语言数据库表，可以毫无问题地处理日语、俄语、中文等。此错误仅在我尝试时弹出`strtolower`

处理 uni-code 字符时需要使用 PHP 的[mb_strtolower](http://php.net/manual/en/function.mb-strtolower.php)

# objective-c - 使用消息样式语法访问子类中的属性

> ID：10979771
> 
> 赞同：0
> 
> 时间：2012-06-11T12:05:22.480
> 
> 标签：objective-c

我对objective-c完全陌生，我目前正在学习过程中，我有一个父类A，它有一个属性a，我试图访问子类B中的属性，当我访问属性并分配一个值时这个

```
[self a:3]; 
```

它确实抱怨 No visible @interface for B 声明选择器 a

但是如果我像 int something = [self a] 那样访问它来读取它；然后它不会抱怨。

我了解访问属性的推荐方法是使用 . 在对象和属性之间，但从技术上讲，它应该与消息样式调用一起使用。但事实并非如此，所以请就此向我提出建议。

我的代码是这样的

```
// Test class A
@interface A : NSObject

@property int a;

-(void) initMe; 

@end

@implementation A

@synthesize a;

-(void) initMe
{
 NSLog(@"I am in A");
}
@end

//-------------------------

@interface B : A

-(void) initEx; 

@end

@implementation B

-(void) initEx
{
    // This line gives a problem as I mentioned above
    [self a:3];
    NSLog(@"In child class B");
}

@end

///----------------------- 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T12:08:54.277

`[self a:3];`是错误的语法。如果要调用setter方法，应该是：

```
[self setA:3]; 
```

# java - JNI 内存管理

> ID：10979773
> 
> 赞同：1
> 
> 时间：2012-06-11T12:05:36.210
> 
> 标签：java, android, c++, c, java-native-interface

***问题1：***在下面的函数中，我想**在返回值之前****调用** 方法。在这种情况下，我如何做到这一点可能会导致应用程序崩溃。`ReleaseStringUTFChars`

 **```
String JNIXMLDOMDocument::GetXML() const
{
    String strXML;

    jmethodID method = m_JavaEnv->GetMethodID(m_XMLDomDocClass, "GetXML", "(Lorg/w3c/dom/Document;)Ljava/lang/String;");
    if(method == NULL) {
        return NULL;
    }

    jstring jstrXML = (jstring)m_JavaEnv->CallObjectMethod(m_XMLDomDocClassObject, method, m_XMLDomDocument);
    if (jstrXML == NULL) {
    return strXML;
    }

    strXML = m_JavaEnv->GetStringUTFChars(jstrXML, 0);

    /* Question 1:  **/
    m_JavaEnv->ReleaseStringUTFChars(jstrXML, strXML.c_str());

    return strXML;

} /* String GetXML() const **/ 
```

* * *

***问题2：***如果我的应用程序使用多线程，在构造函数中附加线程并在所有函数中使用它并在析构函数中分离是否正确？

```
JNIXMLDOMDocument::JNIXMLDOMDocument()
{
    /* Check If the current thread is attached to the virtual machine. **/
    int needToDetach;
    /* Question 2:  **/
    m_JavaEnv = AttachCurrentThread(&needToDetach);
    if (m_JavaEnv != NULL)
    {
        /* Try to find JAVA 'XMLDOMDocument' class. **/
    m_XMLDomDocClass = m_JavaEnv->FindClass("com/fido/android/framework/service/XMLDOMDocument");
    if (m_XMLDomDocClass != NULL) {
        jmethodID constructor = m_JavaEnv->GetMethodID(m_XMLDomDocClass, "<init>", "()V");
        if (constructor != NULL) {
            m_XMLDomDocClassObject = m_JavaEnv->NewObject(m_XMLDomDocClass, constructor);
        }
        else DBG_ERROR(DBG_CTX, ("Can't create object of 'XMLDOMDocument' class!\n"));
    }
    else DBG_ERROR(DBG_CTX, ("Can't find 'XMLDOMDocument' class!\n"));

    /* Try to find 'XMLDOMNode' class. **/
    jclass localXMLDomNodeClass = m_JavaEnv->FindClass("com/fido/android/framework/service/XMLDOMNode");
    if (localXMLDomNodeClass != NULL) {
        jmethodID constructor = m_JavaEnv->GetMethodID(localXMLDomNodeClass, "<init>", "()V");
        if (constructor != NULL) {
            m_XMLDomNodeClassObject = m_JavaEnv->NewObject(localXMLDomNodeClass, constructor);
        }
        else DBG_ERROR(DBG_CTX, ("Can't create object of 'XMLDOMNode' class!\n"));
    }
    else DBG_ERROR(DBG_CTX, ("Can't find 'XMLDOMNode' class!\n"));

    }

} /* JNIXMLDOMDocument() **/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T14:09:23.467

第一部分：我不知道你`String`是什么类型的。从它显然可以`const char*`分配并有`c_str()`方法的事实来看，我猜是一个`std::string`或类似的。进一步猜测，您`String`正在制作您提供给它的 cstring 的副本，因此它应该能够在释放原始 cstring 后继续存在。但是您正在释放您的内部的 cstring `String`，而不是您从中获得的 cstring `GetStringUTFChars`。所以你返回一个无效的`String`.

所以虽然答案是肯定的，但你确实必须调用 ReleaseStringUTFChars，正确的方法是

```
String strXML;
const char* tempStr = m_JavaEnv->GetStringUTFChars(jstrXML, 0);
strXML = tempStr;
m_JavaEnv->ReleaseStringUTFChars(jstrXML,tempStr);
return strXML; 
```

我不能自信地回答第二部分，我不喜欢 NDK。提出单独的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T00:27:32.273

要单独回答您的第二个问题，没有提供足够的信息，但一般来说，如果两者都由同一个线程调用，您可以通过构造函数/析构函数对进行附加和分离。**

# android - Android 应用程序与 HTC Desire S 不兼容

> ID：10979783
> 
> 赞同：1
> 
> 时间：2012-06-11T12:06:11.377
> 
> 标签：android, compatibility, htc-android

我在 android manifest.xml 文件中构建了一个最小 sdk 8 的应用程序。但是当我尝试从 Google Play 下载它时，它给了我以下错误。“此应用程序与您的 HTC Desire 不兼容。此项目与您的设备不兼容。” 我的 HTC 型号是：HTC A8181。Galaxy Tab 也一样。GTP7500 为什么会这样？

这些是我在清单文件中添加的以下行

```
 <uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.CALL_PHONE"/>
<uses-permission android:name="android.permission.READ_CONTACTS"/>
<uses-permission android:name="android.permission.WRITE_CONTACTS"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<supports-screens android:smallScreens="true"
 android:normalScreens="true"
 android:largeScreens="true"
 android:anyDensity="true" /> 
```

# java - 使用 SetError 在登录和注册表单中进行验证，

> ID：10979788
> 
> 赞同：-2
> 
> 时间：2012-06-11T12:06:28.450
> 
> 标签：java, android, validation, login, registration

我正在开发一个 android 应用程序：这是我正在制作的应用程序[的链接](https://stackoverflow.com/questions/10892398/android-app-force-closes-while-going-on-another-activity)**（忽略下面给出的链接中提出的问题，只需查看我在下面的链接中发布的代码）：**

我想使用 SetError 在登录和注册表单中进行验证。
有人可以使用上面链接中给出的代码以完整格式指导我吗？

这个应用程序是一个 GPS 跟踪应用程序，就像 LIFE360 应用程序一样。

我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T03:47:12.853

请参阅这些链接.. [SetError 方法示例](http://www.technotalkative.com/android-show-error-in-edittext/)

[SetError 方法示例2](http://blog.donnfelker.com/2011/11/23/android-validation-with-edittext)

# android - 使用 AChartEngine 在垂直中心制作 x 轴

> ID：10979790
> 
> 赞同：2
> 
> 时间：2012-06-11T12:06:42.703
> 
> 标签：android, android-view, achartengine

我将制作一个应用程序，我想在其中创建一个 xy 图形。AchartEngine API 看起来对我很有吸引力。我已经看过他们所有的示例和演示，搜索了他们的论坛，但无法弄清楚它是否能够满足我的要求。

所以这是我的问题：我想要一个 xy 图，其中：

1.  使图形不可滚动。（待办的）
2.  如图所示，使 x 轴垂直居中。（待办的）
3.  仅在 x 轴上显示标签。（待办的）

第二个问题对我来说最重要。一些冬青鞋底可以建议我 aChartengine 是否可以完成所需的工作。

[http://s16.postimage.org/bqcewws4l/graph.png](http://s16.postimage.org/bqcewws4l/graph.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T07:28:47.457

AChartEngine 一切皆有可能:)

问题一：

```
renderer.setPanEnabled(false, false);
renderer.setZoomEnabled(false, false); 
```

问题 #2：您可以通过设置 yaxis 最小值和最大值来控制它。它们必须以这样的方式选择，即 0 位于中间。例子：

```
renderer.setYAxisMin(-10); 
renderer.setYAxisMax(10); 
```

问题 3：

```
renderer.setYLabels(0); 
```

# ruby-on-rails - 什么是 PI 的类型，因为 Ruby 中的 cos

> ID：10979791
> 
> 赞同：9
> 
> 时间：2012-06-11T12:06:43.950
> 
> 标签：ruby-on-rails, ruby

我想问一下 Ruby 的 PI 和 cos 的类型。编写这些类型的约定是什么？

我可以这样写：`Math::sin`,`Math::PI`或`Math.sin`,`Math.PI`吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-11T12:24:31.287

```
puts Math::PI
#=> 3.141592653589793
include Math
puts PI.class
#=> Float
require "bigdecimal/math"
include BigMath
puts PI(50).class
#=> BigDecimal
puts PI(50)
#=> 0.3141592653589793238462643383279502884197169399375105820974944592309049629352442819E1 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-11T13:28:04.227

`PI`是属于模块的*常数。*`Math`常量通过`::`操作符访问：

```
Math::PI 
```

我相信它被称为*范围解析*运算符。它还可以解析为类方法，因此您绝对可以编写：

```
Math::sin 
```

点运算符向对象发送消息，这是一种称它调用方法的奇特方式。`PI`是一个常数，所以你不能那样访问它。`Math.PI`等价于`Math.send :PI`，它不起作用，因为`Math`not `respond_to? :PI`。当然，你*可以*解决这个问题：

```
def Math.PI
  Math::PI
end

Math.PI 
```

使用`method_missing`，您甚至可以使其与*任何*常量一起工作：

```
def Math.method_missing(method, *arguments, &block)
  Math.const_get method, *arguments, &block
end

Math.PI
Math.E 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T12:12:38.887

首先，没有`Math.PI`，它是`Math::PI`-- 在这种情况下，使用实际工作的那个。

```
[1] pry(main)> Math.PI
NoMethodError: undefined method `PI' for Math:Module
[2] pry(main)> Math::PI
=> 3.141592653589793 
```

`sin`等是函数，可以通过任何一种方式访问​​。我使用点表示法, `Math.sin(foo)`, 因为它看起来更容易（见仁见智），并且类似于其他 Rails 代码的规范编写方式（如 Rails 的 ActiveRecord `findAll`，例如`User.findAll`），以及我经常使用的大多数其他语言的方式。

*编辑*哦，我可能误解了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T12:14:58.940

如果我的问题是正确的，那么您是在询问 cos 返回的值的类型。与其告诉你它是什么，我更愿意向你展示一种自己检查它的方法。

```
irb(main):003:0>Math::cos(0.2).class
=> Float
irb(main):004:0> Math::PI.class
=> Float 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T12:56:09.947

如果你`include Math`在你的代码中，那么你可以写：

```
PI
cos(0.12) 
```

`Math`仅当`Math`不包括在内时才需要前缀。

您是否尝试过使用包裹在 Math 模块周围的 gem？查看 math_calculator gem。这将允许您正常编写表达式，例如。“4*pi*cos(0.12)”等

# firefox - Watir-webdriver 无法识别点击事件

> ID：10979793
> 
> 赞同：0
> 
> 时间：2012-06-11T12:06:54.153
> 
> 标签：firefox, webdriver, watir, watir-webdriver

我正在通过 Ruby 1.9.2 在 Windows 上使用 Firefox 13 和 Watir-webdriver，并将一些以前在 IE 中的 Watir 中工作的代码移植到 Watir-webdriver 以与 Firefox 一起使用，我在点击各种网站时出现了一些奇怪的行为.

当我让 Watir 单击按钮或链接时，即使页面重新加载正在发生，它似乎也无法识别事件已触发。

```
puts "Clicking button"
browser.button(:id,'search_button').click
puts "Button clicked" 
```

当上面的脚本运行时，我看到第一个输出，但没有看到第二个输出 - 尽管在页面重新加载时发生了点击，但就浏览器而言，脚本似乎继续运行，但是第二次循环命中此操作时，两个输出都不再显示 - 点击发生。

当我添加 when_present.click 时，点击发生，但脚本在 30 秒后超时，因为它仍在等待该行上的元素被调用（点击**已经发生**在浏览器方面，但看起来它没有认出来）

我尝试更新 gems，删除可能有冲突的 gems，并尝试将 Firefox 版本从 13 更改为 7，但行为相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T10:55:49.750

禁用默认启用的 Firefox 中的本机事件（在 Windows 上）

```
profile = Selenium::WebDriver::Firefox::Profile.new
profile.native_events = false
Watir::Browser.new WEB_DRIVER, :profile => profile 
```

完整的细节[在这里](http://watirmelon.com/2011/09/16/disabling-native-events-when-using-firefox-with-webdriver/)

# ios - iOS - 创建分页 pdf

> ID：10979798
> 
> 赞同：0
> 
> 时间：2012-06-11T12:07:25.963
> 
> 标签：ios, xcode, pdf

下面的代码来自 iOS 开发中心：http: [//developer.apple.com/library/ios/#documentation/2ddrawing/conceptual/drawingprintingios/GeneratingPDF/GeneratingPDF.html](http://developer.apple.com/library/ios/#documentation/2ddrawing/conceptual/drawingprintingios/GeneratingPDF/GeneratingPDF.html)

问题是，事情似乎一团糟。例如，它在声明此类参数之前引用“Context”和“currentRange”。任何人都可以从中得出正面或反面吗？也许我应该在其他地方声明那些，比如在“UIGraphicsBeginPDFPage”函数中？我知道您的 .m 文件中需要有“#import”。

```
- (CFRange)renderPage:(NSInteger)pageNum withTextRange:(CFRange)currentRangeandFramesetter:(CTFramesetterRef)framesetter
{
// Get the graphics context.
CGContextRef    currentContext = UIGraphicsGetCurrentContext();

// Put the text matrix into a known state. This ensures
// that no old scaling factors are left in place.
CGContextSetTextMatrix(Context, CGAffineTransformIdentity);

// Create a path object to enclose the text. Use 72 point
// margins all around the text.
CGRect    frameRect = CGRectMake(72, 72, 468, 648);
CGMutablePathRef framePath = CGPathCreateMutable();
CGPathAddRect(framePath, NULL, frameRect);

// Get the frame that will do the rendering.
// The currentRange variable specifies only the starting point. The framesetter
// lays out as much text as will fit into the frame.
CTFrameRef frameRef = CTFramesetterCreateFrame(framesetter, currentRange, framePath, NULL);
CGPathRelease(framePath);

// Core Text draws from the bottom-left corner up, so flip
// the current transform prior to drawing.
CGContextTranslateCTM(currentContext, 0, 792);
CGContextScaleCTM(currentContext, 1.0, -1.0);

// Draw the frame.
CTFrameDraw(frameRef, currentContext);

// Update the current range based on what was drawn.
currentRange = CTFrameGetVisibleStringRange(frameRef);
currentRange.location += currentRange.length;
currentRange.length = 0;
CFRelease(frameRef);

return currentRange;
}

- (void)drawPageNumber:(NSInteger)pageNum
{
NSString* pageString = [NSString stringWithFormat:@"Page %d", pageNum];
UIFont* theFont = [UIFont systemFontOfSize:12];
CGSize maxSize = CGSizeMake(612, 72);

CGSize pageStringSize = [pageString sizeWithFont:theFont
                               constrainedToSize:maxSize
                                   lineBreakMode:UILineBreakModeClip];
CGRect stringRect = CGRectMake(((612.0 - pageStringSize.width) / 2.0),
                               720.0 + ((72.0 - pageStringSize.height) / 2.0) ,
                               pageStringSize.width,
                               pageStringSize.height);

[pageString drawInRect:stringRect withFont:theFont];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:11:53.230

`currentRange`是方法的参数。看起来你在那里失去了一个空间：`currentRangeandFramesetter`应该是`currentRange andFramesetter`

`Context`是一个错字，应该是`currentContext`。除此之外，代码编译。

# android - 如何用android 4.0.4源代码制作android sdk 4.0.3？

> ID：10979799
> 
> 赞同：1
> 
> 时间：2012-06-11T12:07:42.140
> 
> 标签：android, makefile, android-source

我已经下载了 Android 源代码 4.0.4 并成功构建了 sdk 4.0.4 AOSP。当我使用我的自定义sdk时，eclipse告诉我必须在Manifest.xml中设置minSdkVersion="AOSP"，悲剧的是，我的设备版本是4.0.3，不能在上面运行apk。

我该怎么办？

我认为可能有两种解决方案：

1.构建一个NONE AOSP SDK并在4.0.3设备上运行4.0.4 sdk。

2.查看源码4.0.3，重新制作sdk。（也可能有“AOSP”问题）

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:04:06.810

在解决方案 1 中修复：

修改：build/core/version_defaults.mk PLATFORM_VERSION_CODENAME 为：</p>

如果这是最终发布版本，它只是“REL”。PLATFORM_VERSION_CODENAME := REL

这将构建的 sdk 标记为发布版本。

# asp.net-mvc-3 - 如何在mvc3中异步调用控制器中的方法

> ID：10979803
> 
> 赞同：0
> 
> 时间：2012-06-11T12:08:07.997
> 
> 标签：asp.net-mvc-3, razor

我必须从视图中调用控制器中的方法，但不使用任何点击，所以我正在考虑使用以下代码行来执行此操作：

```
@Html.RenderAction("Replies", new { id= item.ID}) 
```

我在控制器中的方法是这样的：

```
public post Replies(int Id)  
    {  
        post posts = new post();  
        posts = new Data_Access().Get_Replies(Id);   
        return posts;  
    } 
```

但这显示错误说“无法将类型 void 隐式转换为对象”
，任何人都可以帮助我.. 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:09:53.887

`RenderAction`将结果直接写入页面并返回`void`.
`@whatever`将结果写入`whatever`页面。

由于`RenderAction`不返回任何内容，因此不能在`@`块中使用。

相反，您应该编写`@Html.Action(...)`.
`Html.Action`将结果作为`HelperResult`对象返回。

# asp.net - 无法启动 Asp.Net 应用程序

> ID：10979806
> 
> 赞同：0
> 
> 时间：2012-06-11T12:08:14.387
> 
> 标签：asp.net

我有一个小的 asp.net 应用程序（只有一个 aspx 页面）。它以前可以工作，但现在当我尝试通过 Visual Studio (2010) 在本地运行它时，它不起作用：HTTP 错误 503。服务不可用。你能告诉我我能做些什么吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:12:17.800

将项目设置为使用 IIS Express 或 Visual Studio 开发服务器，而不是本地计算机上的那个。

[http://msdn.microsoft.com/en-us/library/58wxa9w5.aspx](http://msdn.microsoft.com/en-us/library/58wxa9w5.aspx)

# google-apps-script - 使用 replaceText 处理特殊字符的问题：[]

> ID：10979809
> 
> 赞同：1
> 
> 时间：2012-06-11T12:08:30.017
> 
> 标签：google-apps-script, google-docs

我想用“[1]”和倒过来替换“\cite{foo123a}”。到目前为止，我能够用以下命令替换文本

```
body.replaceText('.cite{foo}', '[1]'); 
```

但我没有设法使用

```
body.replaceText('\cite{foo}', '[1]');
body.replaceText('\\cite{foo}', '[1]'); 
```

为什么？

反向转换我根本无法工作

```
body.replaceText('[1]', '\\cite{foo}'); 
```

这将只替换“1”而不是 []，这意味着 [] 被解释为正则表达式字符集，转义它们将无济于事

```
body.replaceText('\[1\]', '\\cite{foo}');//no effect, still a char set
body.replaceText('/\[1\]/', '\\cite{foo}');//no matches 
```

该文件指出

> 不完全支持 JavaScript 正则表达式功能的子集，例如捕获组和模式修饰符。

我可以在某处找到支持什么和不支持什么的完整描述吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T13:07:00.177

我不熟悉 Google Apps Script，但这看起来像是普通的正则表达式问题。

您的第二次转换不起作用，因为字符串文字`'\[1\]'`与`'[1]'`. 您想将文本引用`\[1\]`为字符串文字，这意味着`'\\[1\\]'`. 字符串文字内的斜线没有相关含义；在这种情况下，您已经编写了与 text 匹配的模式`/1/`。

您的第一次转换不起作用，因为`{...}`表示量词，而不是文字大括号，所以您需要`\\\\cite\\{foo\\}`. （四个反斜杠是因为匹配`\`正则表达式中的文字 is `\\`，并使其成为字符串文字`\\\\`- 两个转义的反斜杠。）

# actionscript-3 - 当我说 arrayCollection.addItemAt(object,0); 时会发生什么

> ID：10979815
> 
> 赞同：1
> 
> 时间：2012-06-11T12:08:52.623
> 
> 标签：actionscript-3, apache-flex, arraycollection

假设我有一个 Array 集合，其中填充了一些元素。如果我说

```
myArrayCollection.addItemAt(object,0); 
```

这里到底发生了什么？所有元素都向右移动了吗？还是第 0 位的元素被替换为新元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T12:23:09.940

总而言之，之所以有两种不同的方法，addItemAt() 和 setItemAt()，是因为其中一个添加了一个新项（不替换任何现有项），另一个设置/覆盖现有索引。

有关更多信息，请查看[ArrayCollection 文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/collections/ArrayCollection.html#methodSummary)。

# javascript - 使用 jquery mobile 创建邮件警报

> ID：10979816
> 
> 赞同：0
> 
> 时间：2012-06-11T12:08:53.320
> 
> 标签：javascript, jquery, ajax, html, cordova

我想知道如何使用 jQuery mobile (javascript, html5) 创建邮件警报。此警报包括在添加新公告时提醒用户（该公告将添加到 joomla 的基础中，我有一个与应用程序 phonegap 同步的站点 joomla，在应用程序中客户将搜索属性，如果是不存在，他可以保存她的研究，当发布新公告时，他可以收到有关此添加的警报邮件）

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:59:23.527

您需要在您的服务器上安装一个监控系统，以查找发布公告的时间（我假设您已经使用 PHP 或类似工具处理这部分内容）。

完成后，您需要使用**服务器端代码**发送电子邮件。如果任何人都可以从 Javascript 发送电子邮件，那将是一个相当大的垃圾邮件问题。

PHP 为您提供以下功能：

```
mail($to, $subject, $message, $headers); 
```

您必须`From: me@example.com`在标题中使用，并通过 . 分隔标题属性`\r\n`。

-

**监控系统：**

你说你有[JEA Joomla 扩展](http://extensions.joomla.org/extensions/vertical-markets/real-estate/6755)，用于发布公告。我假设它有一个 PHP 文件来处理新公告的添加。

只需在那个 PHP 页面的底部添加你的函数，应该会发生的是，当调用 PHP 文件添加新公告时，你的函数也会被调用，并且会自动通知用户。

# android - 如何在运行时在android中使部分文本加粗？

> ID：10979821
> 
> 赞同：111
> 
> 时间：2012-06-11T12:09:23.437
> 
> 标签：android, android-listview

我的应用程序中的 A`ListView`有许多字符串元素，如`name`, `experience`,`date of joining`等。我只想`name`加粗。所有字符串元素都将位于一个`TextView`.

我的`XML`：

```
<ImageView
    android:id="@+id/logo"
    android:layout_width="55dp"
    android:layout_height="55dp"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp"
    android:layout_marginTop="15dp" >
</ImageView>

<TextView
    android:id="@+id/label"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@id/logo"
    android:padding="5dp"
    android:textSize="12dp" >
</TextView> 
```

我设置 ListView 项的 TextView 的代码：

```
holder.text.setText(name + "\n" + expirience + " " + dateOfJoininf); 
```

* * *

## 回答 #1

> 赞同：257
> 
> 时间：2012-06-11T12:11:13.400

假设您有一个`TextView`被调用的`etx`. 然后，您将使用以下代码：

```
final SpannableStringBuilder sb = new SpannableStringBuilder("HELLOO");

final StyleSpan bss = new StyleSpan(android.graphics.Typeface.BOLD); // Span to make text bold
final StyleSpan iss = new StyleSpan(android.graphics.Typeface.ITALIC); //Span to make text italic
sb.setSpan(bss, 0, 4, Spannable.SPAN_INCLUSIVE_INCLUSIVE); // make first 4 characters Bold 
sb.setSpan(iss, 4, 6, Spannable.SPAN_INCLUSIVE_INCLUSIVE); // make last 2 characters Italic

etx.setText(sb); 
```

* * *

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2016-01-14T14:16:09.753

根据 Imran Rana 的回答，如果您需要将`StyleSpan`s 应用于多个`TextView`s 并支持多种语言（其中索引是可变的），这是一种通用的、可重用的方法：

```
void setTextWithSpan(TextView textView, String text, String spanText, StyleSpan style) {
    SpannableStringBuilder sb = new SpannableStringBuilder(text);
    int start = text.indexOf(spanText);
    int end = start + spanText.length();
    sb.setSpan(style, start, end, Spannable.SPAN_INCLUSIVE_INCLUSIVE);
    textView.setText(sb);
} 
```

像这样使用它`Activity`：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // ...

    StyleSpan boldStyle = new StyleSpan(Typeface.BOLD);
    setTextWithSpan((TextView) findViewById(R.id.welcome_text),
        getString(R.string.welcome_text),
        getString(R.string.welcome_text_bold),
        boldStyle);

    // ...
} 
```

* * *

`strings.xml`

```
<string name="welcome_text">Welcome to CompanyName</string>
<string name="welcome_text_bold">CompanyName</string> 
```

* * *

结果：

欢迎来到**公司名**

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2019-10-11T17:00:44.207

您可以使用 Kotlin 和`buildSpannedString`扩展功能从`core-ktx`

```
 holder.textView.text = buildSpannedString {
        bold { append("$name\n") }
        append("$experience $dateOfJoining")
 } 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-11-04T00:43:30.357

此处提供的答案是正确的，但不能在循环中调用，因为该`StyleSpan`对象是单个连续跨度（不是可以应用于多个跨度的样式）。`setSpan`使用相同的粗体多次调用`StyleSpan`将创建*一个粗体跨度*并在父跨度中移动它。

就我而言（显示搜索结果），我需要使所有搜索关键字的所有实例都显示为粗体。这就是我所做的：

```
private static SpannableStringBuilder emboldenKeywords(final String text,
                                                       final String[] searchKeywords) {
    // searching in the lower case text to make sure we catch all cases
    final String loweredMasterText = text.toLowerCase(Locale.ENGLISH);
    final SpannableStringBuilder span = new SpannableStringBuilder(text);

    // for each keyword
    for (final String keyword : searchKeywords) {
        // lower the keyword to catch both lower and upper case chars
        final String loweredKeyword = keyword.toLowerCase(Locale.ENGLISH);

        // start at the beginning of the master text
        int offset = 0;
        int start;
        final int len = keyword.length(); // let's calculate this outside the 'while'

        while ((start = loweredMasterText.indexOf(loweredKeyword, offset)) >= 0) {
            // make it bold
            span.setSpan(new StyleSpan(Typeface.BOLD), start, start+len, SPAN_INCLUSIVE_INCLUSIVE);
            // move your offset pointer 
            offset = start + len;
        }
    }

    // put it in your TextView and smoke it!
    return span;
} 
```

请记住，如果一个关键字是另一个关键字的子字符串，则上面的代码不够聪明，无法跳过双粗体字。例如，如果您在*“Fishs in the Fisty Sea”中搜索**“Fish fi”* ，它会将*“fish”*加粗一次，然后是*“fi”*部分。好消息是，虽然效率低下且有点不受欢迎，但它不会有视觉缺陷，因为您显示的结果仍然看起来像

 *******大海**中的**鱼****

 *** * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-07-11T06:31:43.347

如果您不确切知道要加粗的文本部分之前的文本长度，或者甚至不知道要加粗的文本的长度，您可以轻松地使用如下 HTML 标记：

```
yourTextView.setText(Html.fromHtml("text before " + "<font><b>" + "text to be Bold" + "</b></font>" + " text after")); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-07T00:20:59.087

我建议使用带有 CDATA 的 strings.xml 文件

```
<string name="mystring"><![CDATA[ <b>Hello</b> <i>World</i> ]]></string> 
```

然后在java文件中：

```
TextView myTextView = (TextView) this.findViewById(R.id.myTextView);
myTextView.setText(Html.fromHtml( getResources().getString(R.string.mystring) )); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-12-04T20:30:22.740

```
<string name="My_Name">Given name is <b>Not Right</b>Please try again </string> 
```

在 string.xml 文件中使用“b”标签。
也适用于斜体“i”和下划线“u”。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-01-10T11:56:09.157

将 Frieder 的答案扩展到支持大小写和变音符号不敏感。

```
public static String stripDiacritics(String s) {
        s = Normalizer.normalize(s, Normalizer.Form.NFD);
        s = s.replaceAll("[\\p{InCombiningDiacriticalMarks}]", "");
        return s;
}

public static void setTextWithSpan(TextView textView, String text, String spanText, StyleSpan style, boolean caseDiacriticsInsensitive) {
        SpannableStringBuilder sb = new SpannableStringBuilder(text);
        int start;
        if (caseDiacriticsInsensitive) {
            start = stripDiacritics(text).toLowerCase(Locale.US).indexOf(stripDiacritics(spanText).toLowerCase(Locale.US));
        } else {
            start = text.indexOf(spanText);
        }
        int end = start + spanText.length();
        if (start > -1)
            sb.setSpan(style, start, end, Spannable.SPAN_INCLUSIVE_INCLUSIVE);
        textView.setText(sb);
    } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-01-31T21:04:46.217

如果您使用@srings / your_string 注释，请访问strings.xml 文件并`<b></b>`在您想要的文本部分中使用标签。

例子：

```
 <string><b>Bold Text</b><i>italic</i>Normal Text</string> 
```*****

# c# - 标识符预期 c#

> ID：10979827
> 
> 赞同：0
> 
> 时间：2012-06-11T12:09:39.607
> 
> 标签：c#, identifier

嘿，我是 C# 新手，我正在学习一个教程，但我的代码中出现错误......它在到达这里 (get;set;) 时显示“预期标识符”，并且还给出错误“无效令牌”;' 在类、结构或接口成员声明中”设置。

任何帮助都将不胜感激。

谢谢！！

```
public class Invoice
{
    public int ID ( get; set; )
    public string Description ( get; set; )
    public decimal Amount ( get; set; )
}

[TestClass]
public class ReferenceTypesAndValueTypes
{
    [TestMethod]
    public void IdentityTest()
    {
        Invoice firstInvoice = new Invoice();
        firstInvoice.ID = 1;
        firstInvoice.Description = "Test";
        firstInvoice.Amount = 0.0M;

        Invoice secondInvoice = new Invoice();
        secondInvoice.ID = 1;
        secondInvoice.Description = "Test";
        secondInvoice.Amount = 0.0M;

        Assert.IsFalse(object.ReferenceEquals(secondInvoice, firstInvoice));
        Assert.IsTrue(firstInvoice.ID == 1);

        secondInvoice.ID = 2;

        Assert.IsTrue(secondInvoice.ID == 2);
        Assert.IsTrue(firstInvoice.ID == 1);

        secondInvoice = firstInvoice;

        Assert.IsTrue(object.ReferenceEquals(secondInvoice,firstInvoice));

        secondInvoice.ID = 5;
        Assert.IsTrue(firstInvoice.ID == 5);

    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T12:10:22.147

您需要用大括号替换`()`括号`{}`

例如

```
public class Invoice
{
    public int ID { get; set; }
    public string Description { get; set; }
    public decimal Amount { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T12:16:23.760

在 auto 属性中，语法糖允许您放弃 getter/setter 的实现 - 所以您应该有这个：

```
SomeProperty { get; set; } 
```

这相当于去：

```
SomeProperty 
{ 
   get { return _somePropertyBackingField; }
   set { _somePropertyBackingField = value; }
} 
```

这些都不需要括号，因为这是结构符号 - 括号通常保留用于转换和方法调用

```
 SomeProperty ( get; set; ) 
```

对口译员意义不大

您知道 Visual Studio 中有一些代码片段可以为您执行此操作：

只需键入“prop”并按两次制表符。试试看:) - 没有更多的错别字

# jquery - fadeToggle() 有问题。制作加载点插件

> ID：10979828
> 
> 赞同：1
> 
> 时间：2012-06-11T12:09:41.133
> 
> 标签：jquery, jquery-plugins, fadeout, fadein

[这是我所做的链接。](http://jsbin.com/efunam/edit#preview)
为什么会出现看起来很愚蠢的动画？请帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:44:42.483

.hide() 将打破点之间的空间（显示：无）......所以动画看起来很奇怪。您可以改为使用不透明度或可见性。查看我的 jsbin 编辑[http://jsbin.com/efunam/3/edit#preview](http://jsbin.com/efunam/3/edit#preview)

# iphone - 有必要在dealloc中释放这个对象吗？

> ID：10979829
> 
> 赞同：0
> 
> 时间：2012-06-11T12:09:45.753
> 
> 标签：iphone, release, autorelease, dealloc

我有个问题。在我的 .h 中：

```
NSString *string;

@property(nonatomic, retain)NSString *string; 
```

在我的 .m 中：

```
string=[NSString stringWithFormat:@"%@", otherStringWithValue]; 
```

好的，“stringWithFormat”是一个自动释放方法。我需要在 dealloc 中释放“字符串”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:16:07.343

只有 self.string = .... 会保留你的 stringWithFormat。

所以你不需要释放它。但请注意，当您稍后尝试访问它时，您的字符串将被释放并且您的应用程序会崩溃。如果你想保留你的字符串，那么请

```
self.string = ..... 
```

并在 dealloc 上释放它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T16:18:58.237

而不是这个：

```
 string=[NSString stringWithFormat:@"%@", otherStringWithValue]; 
```

做这个：

```
 self.string=[NSString stringWithFormat:@"%@", otherStringWithValue]; 
```

现在，您需要释放您的 dealloc 中的字符串。虽然， +stringWithFormat 返回 autorelased 对象，但您已经声明了一个保留属性，因此您有责任释放它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T16:12:26.370

# 只需使用 ARC。

严重地。这意味着您不再需要担心保留/释放（尽管您确实必须担心引用周期，无论如何您都必须担心）。

如果您没有使用 ARC，那么上面的代码会崩溃，因为您没有获得字符串的“所有权”（通过保留它）。要么正确保留它：

```
[string release];
string=[[NSString stringWithFormat:@"%@", otherStringWithValue] retain]; 
```

或者使用setter，它（如果它是自动生成的）将正确地保留它：

```
self.string=[NSString stringWithFormat:@"%@", otherStringWithValue]; 
```

在`-dealloc`中，您必须释放 ivar，或者您可以只使用 setter（它将自动为您释放它）：

```
self.string = nil; 
```

在 ARC 之前，我的经验法则是*几乎总是*使用属性语法，因为它只是做正确的事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T12:13:02.013

如果您声明的字符串是上述代码中属性的一部分，那么是的，即使您必须对其进行初始化。所有权仍然由您负责。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T12:55:46.997

属性仅应用于属性。无法直接访问属性。可以通过“.”访问。只要。

所以，当你写作时，

```
string=[NSString stringWithFormat:@"%@", otherStringWithValue]; 
```

您正在访问变量。因此，不会调用任何保留。此外，`stringWithFormat`将返回自动释放的对象。所以，不需要在 dealloc 中释放它。但是，您不能在范围之外访问此变量，因为您不知道它何时会被释放。

如果你写，

```
self.string=[NSString stringWithFormat:@"%@", otherStringWithValue]; 
```

您正在访问财产，其价值将被保留。因此，您必须在 dealloc 方法中释放它。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-06-11T12:14:11.243

此代码将引入内存泄漏，因为 stringWithFormat 返回自动释放对象并且您有保留字符串，因此当您为字符串分配 stringWithFormat 的值时，它将提供新的自动释放对象。但是您为字符串保留的任何内存仍然存在，因为它的保留计数仍然存在1，所以它不会被释放。但是如果你试图释放字符串，它会崩溃，因为分配后它将包含自动释放对象。

# ruby-on-rails - 单击标记时，带有 OpenLayers 的 Gmaps4Rails 会给出 JS 错误：this.serviceObject 未定义

> ID：10979834
> 
> 赞同：1
> 
> 时间：2012-06-11T12:10:00.917
> 
> 标签：ruby-on-rails, ruby-on-rails-3, openlayers, gmaps4rails

我在 Gmaps4Rails（Gem 版本 1.5.2）中使用 OpenLayers 时遇到问题。当我单击标记时，我想显示典型的标注（信息框）。不幸的是，我收到以下 JavaScript 错误：

> this.serviceObject 未定义

Firebug 调用文件“gmaps4rails.openlayers.js”的第 195 行负责：

```
return this.serviceObject.addPopup(popup); 
```

如果我使用谷歌地图作为 API 提供者，一切正常。显示和隐藏信息框效果很好。这就是为什么我认为错误必须在“gmaps4rails.openlayers.js”中的某个地方

我在 Mac 上尝试了最新的 FF 和 Chrome。

为了重现简化示例中的错误，我在 Rails 3.2 应用程序的公共文件夹中创建了一个简单的 HTML 页面，并直接链接了所需的 JS 和 CSS 文件。为了创建 HTML 页面，我复制了损坏的 Rails 应用程序的 HTML 代码并减少了它。

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <link href="/assets/gmaps4rails.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="/assets/gmaps4rails/gmaps4rails.base.js" type="text/javascript"></script>
    <script src="/assets/gmaps4rails/gmaps4rails.openlayers.js" type="text/javascript"></script>
  </head>
  <body>
    <div class="map_container"> 
      <div id="map" class="gmaps4rails_map"></div>
    </div>
    <script src="http://www.openlayers.org/api/OpenLayers.js" type="text/javascript"></script>
    <script type="text/javascript" charset="utf-8">
      Gmaps.map = new Gmaps4RailsOpenlayers();
      Gmaps.load_map = function() {
        Gmaps.map.map_options.provider = "openlayers";
        Gmaps.map.initialize();
        Gmaps.map.markers = [
          {"description":"<p>This shall be in in the popup</p>",
          "id":117979030,
          "lat":39.5715,
          "lng":2.64694}
        ];
        Gmaps.map.create_markers();
        Gmaps.map.adjustMapToBounds();
        Gmaps.map.callback();
      };
      Gmaps.oldOnload = window.onload;
      window.onload = function() { 
        Gmaps.triggerOldOnload();
        Gmaps.loadMaps();
      };
    </script>
  </body>
</html> 
```

不幸的是，我在网络上找不到成功的 Gmap4Rails–Openlayers 集成的工作示例。我是否缺少强制参数？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T17:38:01.483

这是一个错误。

代替：

```
return this.serviceObject.addPopup(popup); 
```

和：

```
return this.map.addPopup(popup); 
```

我会尽快修复，谢谢+1

# sql - 编写查询以在日志文件中显示最近 15 分钟的会话记录

> ID：10979835
> 
> 赞同：0
> 
> 时间：2012-06-11T12:10:02.670
> 
> 标签：sql, sql-server, tsql

表（日志分析器）结构是：

![日志表](../Images/14a8e03b6415f5a233fe90eae42f5876.png)
我想绘制一个折线图，显示过去 15 分钟到当前时间（每分钟）的会话数。我想编写一个查询，它显示包含以下信息的两列：

1.  日期：时：分
2.  会话数

我试图编写一个显示每小时请求的示例查询：

```
select  convert(nvarchar(16), L.TimeLog, 120) requestTime ,(select Count(SessionID) from LogData where TimeLog <  convert(nvarchar(16), TimeLog, 120) and TimeLog >  DATEADD (mi , -15 , convert(nvarchar(16), TimeLog, 120) ) ) AS Sessions
from  LogData L
group by convert(nvarchar(16), TimeLog, 120) order by requestTime; 
```

我试图创建一个类似于上面的查询，但它显示错误的结果。它应该每 15 分钟显示一些会话。并且 group by 子句将保持不变（即每分钟） 例如：在 10:00:00 它应该代表过去 15 分钟到 10:00:00 的会话数（sessionID），即：9:45： 00 至 10:00:00 以此类推

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T16:31:15.210

这个有点复杂。首先，您需要创建一个 TimeSlot 表，将一天分成 15 分钟的块。

```
CREATE TABLE [TimeSlot](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [BeginTime] [datetime] NULL,
    [EndTime] [datetime] NULL
) ON [PRIMARY] 
```

填写表格：

```
DECLARE @Start DATETIME
SET @Start='00:00:00'

WHILE (@Start <'23:59:00')
BEGIN
    INSERT INTO TimeSlot(BeginTime, EndTime) values (@Start,dateadd(mi,15,@Start))
    SET @Start=dateadd(mi,15,@Start)
END 
```

然后，对于丑陋的 SQL：

```
SELECT  convert(nvarchar(8), L.TimeLog,112) + ' ' +  convert(nvarchar(8), S.BeginTime, 108) AS SlotBeginTime ,Count(LogID) AS Sessions
FROM  LogData L, TimeSlot S
WHERE (convert(nvarchar(8), L.TimeLog,112) +  convert(nvarchar(8), L.TimeLog, 108))  >= (convert(nvarchar(8), L.TimeLog,112)+ convert(nvarchar(8), S.BeginTime,108)) 
  AND (convert(nvarchar(8), L.TimeLog,112) +  convert(nvarchar(8), L.TimeLog, 108))  < (convert(nvarchar(8), L.TimeLog,112)+ convert(nvarchar(8), S.EndTime,108))
GROUP BY convert(nvarchar(8), L.TimeLog,112) + ' ' +  convert(nvarchar(8), S.BeginTime, 108) 
ORDER BY SlotBeginTime; 
```

试试看。我没有检查它在多个日期的效果如何，但它确实适用于单个日期。

# html - 从 Photoshop 或 InDesign 导出 HTML 和 CSS

> ID：10979836
> 
> 赞同：5
> 
> 时间：2012-06-11T12:10:03.107
> 
> 标签：html, css, dreamweaver, photoshop, adobe-indesign

我正在建立网站，我有网站应该是什么样子的 .psd 文件，我可以手动制作它，但这需要时间。我想知道是否有一种方法可以将 Photoshop 或 InDesign 文件导出为 HTML 而无需进行重大更正。有一种方法可以从 InDesign 导出到 Dreamweaver，但它会弄乱图片和文本。有其他选择吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T12:14:13.473

没有任何东西可以在图形程序中为您提供精确的设计副本，并将其转换为良好的语义和可用的 HTML / CSS。即 Photoshop 确实有切片工具，您可以使用它然后导出为 HTML，但生成的文件/图像不会被任何称职的 Web 开发人员/设计师认为是理想的。

为有经验的人手工编码设计不应该太耗时。手工编码还将确保您涵盖设计的所有场景/复杂性，例如响应能力、搜索引擎优化、可访问性等。

然而，有一些新工具，如[http://www.csshat.com](http://www.csshat.com)，获得了好评。

如果您时间紧迫并且不介意为完成好工作而付费，您可以随时在 Google 上搜索 PSD 到 HTML 服务提供商。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T12:14:14.597

您可以通过 Site Grinder 插件将 psd 文件导出为 html。

[通过http://www.medialab.com/](http://www.medialab.com/)下载此插件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-04T22:24:36.820

[PSD to WEB](http://www.psdtoweb.de/)很好地完成了这项工作。

# php - joomla 模块 include_once 问题

> ID：10979839
> 
> 赞同：2
> 
> 时间：2012-06-11T12:10:17.457
> 
> 标签：php, joomla, youtube, include

我正在为 joomla 创建一个 youtube 播放列表模块。

如果我将模块分配给页面，它将在以下点停止加载：

```
<div class="youtubeplayer">
    <div class="yt_holder">
            <!--Up and Down arrow -->
            <div class="you_up"><img src="modules/mod_youtube_playlist/css/up_arrow.png" alt="+ Slide" title="HIDE" /></div>
            <div class="you_down"><img src="modules/mod_youtube_playlist/css/down_arrow.png" alt="- Slide" title="SHOW" /></div>
            <!-- END  -->
        <div id="ytvideo3"></div>
            <div class="youplayer">
            <ul class="videoyou"> 
```

它似乎停止了我在以下代码中使用“包含一次”的位置（以下代码是我的模块“tmpl/default.php”文件） - 有什么想法吗？

```
<?php

defined('_JEXEC') or die;

JHtml::_('behavior.framework');

JHtml::script('modules/mod_youtube_playlist/js/jquery.youtubeplaylist.js');
JHtml::script('modules/mod_youtube_playlist/js/jquery.jquery.youtubeplaylist-min.js.js');
JHtml::script('modules/mod_youtube_playlist/js/youtubeplaylist.js');
JHtml::stylesheet('modules/mod_youtube_playlist/css/youtubeplaylist.css');
JHtml::stylesheet('modules/mod_youtube_playlist/css/indext.css');
?>

<div class="youtubeplayer">
    <div class="yt_holder">
            <!--Up and Down arrow -->
            <div class="you_up"><img src="modules/mod_youtube_playlist/css/up_arrow.png" alt="+ Slide" title="HIDE" /></div>
            <div class="you_down"><img src="modules/mod_youtube_playlist/css/down_arrow.png" alt="- Slide" title="SHOW" /></div>
            <!-- END  -->
        <div id="ytvideo3"></div>
            <div class="youplayer">
            <ul class="videoyou">
            <?php
            // Use like this.
            include_once('/modules/mod_youtube_playlist/class/class.youtubelist.php');
            //in this example a playlist
            $video = new youtubelist('playlist');
            //This is the link to the playlist.
            //http://www.youtube.com/playlist?list=PLC4FBCA46405A8BF8
            //REMOVE the PL from the string if there is an PL after list=
            $video->set_playlist('<?php echo $playlist; ?>');
            $video->set_max(50);
            $video->set_order('title');
            $video->set_cachexml(false);
            $video->set_cachelife(86400);
            $video->set_xmlpath('./cache/');
            $video->set_start(1);

            if ( $video->get_videos() !=null ) {
                foreach ($video->get_videos() as $yKey => $yValue) {
                    echo '<li><p>' . $yValue['title'] . '</p><span class="time">' . $yValue['time'] . '</span><a class="videoThumb3" href="http://www.youtube.com/watch?v=' . $yValue['videoid'] . '">' . $yValue['description'] . '</a></li>';
                }
            }else{
                echo '<li>Sorry, no video\'s found</li>';
            }
            ?>
            </ul>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:28:22.987

使用该路径`/modules/mod_youtube_playlist/....`将查看服务器的根目录，而不是您的站点根目录。

我怀疑你在那个包含上遇到了一个致命错误，因为它没有找到。

您可以使用作为`JPATH_BASE`站点根目录路径的常量：

```
include_once(JPATH_BASE . '/modules/mod_youtube_playlist/class/class.youtubelist.php'); 
```

对于将来的调试，您应该打开错误（或查看错误日志），如果在此处发布，请始终包含完整的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T16:54:35.667

而不是使用这个：

```
JHtml::script('modules/mod_youtube_playlist/js/jquery.youtubeplaylist.js');
JHtml::stylesheet('modules/mod_youtube_playlist/css/indext.css'); 
```

尝试这个：

```
$document =& JFactory::getDocument();
$document->addStyleSheet(JURI::root() . "modules/mod_youtube_playlist/css/indext.css");
$document->addScript(JURI::root() . "modules/mod_youtube_playlist/js/jquery.youtubeplaylist.js"); 
```

还建议在包含时使用 ROOT 而不是 BASE。

# mysql - 使查询更高效

> ID：10979844
> 
> 赞同：0
> 
> 时间：2012-06-11T12:10:34.963
> 
> 标签：mysql, sql, join, nested-queries

我想要的是一个事件的参与者（具有参与者角色的人），结合与参与者相同公司的人，但他们的角色是经理。

Person 的角色存储在 person_role_membership 中，但一个人的公司存储在 People 中。我制作了以下查询，我认为它做得很好。请忽略额外的连接和信息。我正在获取所有参与者，然后与所有经理联合，为此我再次获取所有参与者。现在麻烦的是整个查询，因为一小部分需要 9 秒。有没有办法让它更快？

```
select distinct * 
from 
(
SELECT 
 p.id as p_id, p.first_name as p_first_name, p.last_name as p_last_name,p_r.name as p_role, 
 p.job_title as p_job_title, 
 p_d.email as p_email, p_d.phone_1 as p_phone, p_d.phone_ext_1 as p_ext,
 c.name as p_company, p_c.name as p_parent_company

 FROM person_role_memberships as prm

 left join people as p on prm.person_id = p.id and prm.person_role_id between 32 and 35
 left join person_roles as p_r on p_r.id = prm.person_role_id
 left join person_details as p_d on p.id = p_d.person_id and p_d.type = 'BusinessDetail'
 left join companies as c on c.id = p.company_id
 left join companies as p_c on p_c.id = p.parent_company_id

 where 
 p.id is not null 

) as parts
union (

select p.id, p.first_name,p.last_name,prm.person_role_id, p.job_title,  'cp email', 'phone','ext',c.name, d.name

from people as p -- All those people

left join person_role_memberships as prm on prm.person_id = p.id -- whose roles are like this
left join companies as c on p.company_id = c.id
left join companies as d on c.parent_id = d.id
-- and whose companies are like those people whose roles are like this

where company_id = any
(
select company_id from people as p
left join person_role_memberships as prm on prm.person_id = p.id
where prm.person_role_id between 32 and 35-- and other conditions;
)

and (person_role_id = 14 or person_role_id = 15)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:59:05.543

我的猜测是您查询的“任何”部分正在减慢速度。从外观上看，我认为您甚至不需要它，因为您可以直接过滤 person_role_memberships：

```
select p.id, p.first_name,p.last_name,prm.person_role_id, p.job_title,  'cp email', 'phone','ext',c.name, d.name

from people as p -- All those people
    left join person_role_memberships as prm on prm.person_id = p.id -- whose roles are like this
    left join companies as c on p.company_id = c.id
    left join companies as d on c.parent_id = d.id

-- and whose companies are like those people whose roles are like this
where prm.person_role_id between 32 and 35 -- and other conditions;
    and (person_role_id = 14 or person_role_id = 15)) 
```

“any”语句导致数据库查看整个 PEOPLE 表中的每条记录。

# python - 如何使用python将文件的内容存储在数组中？

> ID：10979847
> 
> 赞同：2
> 
> 时间：2012-06-11T12:10:42.183
> 
> 标签：python, arrays, file

我有 5 个文本文件需要存储在数组中。我试过这样。

```
f=[]
f[0]=open('E:/cyg/home/Aiurea/workspace/nCompare5w5.txt','r')
f[1]=open('E:/cyg/home/Aiurea/workspace/nCompare5w10.txt','r')
f[2]=open('E:/cyg/home/Aiurea/workspace/nCompare5w20.txt','r')
f[3]=open('E:/cyg/home/Aiurea/workspace/nCompare5w50.txt','r')
f[4]=open('E:/cyg/home/Aiurea/workspace/nCompare5w80.txt','r')

for i in range(5):
    f[i].close() 
```

错误消息是“IndexError：列表分配索引超出范围”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T12:12:08.597

您需要使用[`append`](http://docs.python.org/tutorial/datastructures.html)：

```
f.append(open('E:/cyg/home/Aiurea/workspace/nCompare5w5.txt','r')) 
```

在您的代码中，您尝试分配给尚不存在的索引值。

'append()' 将一个项目添加到列表的末尾。最初你的列表`f`是空的，但每次你追加它都会将该项目添加到列表的末尾，你可以通过访问它的索引号来引用它（或更改它）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T12:16:40.357

您不必重复整个路径/文件名信息：

```
import os

path = 'E:/cyg/home/Aiurea/workspace'
fnames = [ 'nCompare5w{0}.txt'.format(i) for i in (5, 10, 20, 50, 80) ]

f = []
for fname in fnames:
    with open(os.path.join(path, fname), 'r') as fr:
        f.append(fr.readlines()) 
```

该`with`构造还可以使您在最后关闭文件。

# c# - 在“磁盘上”而不是“在内存中”填充 C# DataTable 以避免内存溢出

> ID：10979855
> 
> 赞同：1
> 
> 时间：2012-06-11T12:11:07.447
> 
> 标签：c#, datatable

我需要`DataTable`从两个不同的数据库中填充两个以进行一些比较和只读操作。这使我`"select *"`进入这两个`DataTable`。

但是，我需要检索的表在两个数据库中都包含大约 300 万行。我得到了`OutOfMemoryException`一段时间的填充。

是否有可能将这些`DataTable`放在磁盘上而不是内存中？您是否看到任何其他解决方案可以在如此庞大的集合上比较/执行只读？我需要做的事情使得通过成批的行子集进行处理变得非常复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:24:31.720

我的猜测是执行此操作的理想/有效方法是在数据库中执行此操作。不幸的是，您的两个表位于两个独立的数据库中，这可能会导致并发症。

这些表是在同一服务器上的两个不同数据库中（如在 SQL Server 实例中），还是在两个单独的服务器中？如果它们在同一个服务器/实例中，那么您可能可以在数据库服务器上执行比较逻辑。

否则，如果这些表位于不同的服务器上，那么是否有可能在数据库之间设置某种复制，以便您可以将两个数据集放入一个可以执行比较的数据库中？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T12:27:28.607

如何按键对它们进行排序。

IE

```
set1    A  A  A  B  C            E
                 |            
set2             B       D 
```

然后你可以继续 set1，更改为 set2，回到 set1... 使迭代更容易。

# c# - 从 ADO.NET 优雅地终止长时间运行的 SQL Server 查询

> ID：10979856
> 
> 赞同：5
> 
> 时间：2012-06-11T12:11:09.160
> 
> 标签：c#, sql-server, ado.net

我使用异步进程从长时间运行的 SQL 查询中检索数据。进程通过该[`SqlCommand.BeginExecuteReader()`](http://msdn.microsoft.com/en-us/library/7szdt0kc.aspx)方法调用存储过程。

有时，我想关闭我的进程并优雅地终止任何正在运行的查询。

经过一些测试，似乎调用[`SqlConnection.Close()`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.close.aspx)就足够了。为了更好地衡量，我还明确调用[`SqlConnection.Dispose()`](http://msdn.microsoft.com/en-us/library/3cc9y48w.aspx).

通过*SQL Server Profiler*运行跟踪时，看起来好像查询优雅地结束了，因为我看到 a`SQL:BatchStarting`后跟 a`SQL:BatchCompleted`调用`Close()`。

谁能确认是否只需要关闭连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:17:39.120

调用 Close 就足够了，只需几句话：

首先确保在 finally 块中编写 Close 方法，以确保正确处理异常。

此外，您不需要同时调用 SqlConnection.Close 和 SqlConnection.Dispose 方法，因为它们的作用相同。添加了 Dispose 方法来实现 IDisposable 模式，该方法内部调用 SqlConnection.Close 方法，该方法具有更自然的名称，因为我们关闭连接，但不释放它们:)

如果您使用的是 DataReader，那么每次您想将连接用于其他目的后，您都必须关闭它。

# asp.net - IE清除上传文件输入

> ID：10979860
> 
> 赞同：1
> 
> 时间：2012-06-11T12:11:22.053
> 
> 标签：asp.net, internet-explorer, file-upload

我们有一个用 .net 网络表单编写的系统，允许人们上传他们的简历以申请工作。我们平均每周收到几千份报告，每周大约有 10 份报告无法上传他们的简历。我们被告知他们填写表格，使用文件输入在他们的计算机上选择简历，当他们点击提交按钮时，文件输入被清除（这会导致验证错误，因为需要简历）。

似乎当人们用系统信息回复我们时，他们总是使用不同版本的 IE。我们无法重现该行为，在谷歌搜索问题后，我在这里找到了一个线程，有人说这是 IE 中的错误。

有谁知道这是否属实，如果是这样，我们作为开发人员能做些什么吗？我能想到的唯一选择是用 ajax iframe 上传器替换 asp.net 文件上传控件。有没有人遇到过这个问题并知道我们可以做些什么来重现问题或修复它？谢谢。

# python - 哪个 Python API 连接到 Oracle

> ID：10979864
> 
> 赞同：1
> 
> 时间：2012-06-11T12:11:30.083
> 
> 标签：python, oracle

很久没有用 Python 连接到 Oracle 了。我*想要*一个仅限 python 的解决方案，但我想这是不可行的，对吧？我将在 Linux 机器（64 位 Ubuntu 或 Debian）上使用它。

很久以前我用过`cxOracle`，后来听说了`mxOracle`。哪个库更新、维护更好、更安全等。或者我应该使用其他库吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T12:16:43.910

我最近一直很好地使用 cx_Oracle。

API 不需要像去年底发布的 db 和[cx_Oracle 5.1.1那样频繁更改。](http://cx-oracle.sourceforge.net/)

# jquery - 使用 Jquery off().on() 或仅 on()

> ID：10979865
> 
> 赞同：32
> 
> 时间：2012-06-11T12:11:29.877
> 
> 标签：jquery

我知道我们可以使用 jQuery`on()`函数附加事件并使用`off()`.

在现有项目中，我有时会遇到类似于以下的代码：

```
$("#SomeId").off("click").on("click"); 
```

或者有时在使用类似于此的命名空间时：

```
$("#SomeId").off("click.namespace").on("click.namespace"); 
```

~~据我所知，您只能将单个事件附加到事件的特定命名空间。~~

例如，如果我只是这样做`on("click")`，它将附加我指定的功能，~~覆盖当前分配的功能~~，添加到“点击”事件。

如果我这样做`on("click.namespace")`，它将附加我指定的函数，~~覆盖当前分配的函数~~，添加到`click.namespace`.

`off("click")`通过将 an 链接到`on("click)`if`on()`已经替换分配给指定 event/event.namespace 的任何函数来删除任何事件有什么意义？

它是我们代码中的冗余语法还是我错过了它的原因？

**编辑 - 谢谢`kapa`**
我现在感觉有点傻，我纠正了我上面的错误知识。执行`on("click.namespace1")`了几次，我现在观察到该`data("events")`对象不断添加到单击事件数组中。

我认为这回答了我自己的问题。这就是为什么人们会使用`off("event.namespace")`来确保没有其他任何东西附加到那个确切的 event/event.namespace。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-06-11T12:13:21.727

实际上，您可以将多个事件处理程序附加到同一个事件，而不仅仅是一个。即使使用了命名空间。看看[这个快速演示](http://jsfiddle.net/gEupv/)。

实际上，命名空间的一个优点是您可以标记一组事件处理程序，并在以后轻松删除它们以避免多次附加它们。这就是这条线的作用：

```
$("#SomeId").off("click.namespace").on("click.namespace"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-12-18T04:20:49.327

### 您可能想尝试`.one('click.namspace')`而不是`.on('click.namespace')`.

```
$('p')
  .off('click.namespace', clickCB)
  .one('click.namespace', clickCB); // note the .one() here 
```

这样可以确保 click 不会被多次调用**，**否则，`.on(...)`只会继续添加`click-event-handlers (clickCBs)`到元素上的`click.namespace`事件，并且会在触发`p`之前多次调用。`.off()`

祝你好运...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T12:15:19.887

如果有一个现有的处理程序（因为您可能有多个，在这种情况下，它们将链接），并且它调用[.stopPropagation()](http://api.jquery.com/event.stopPropagation/)，那么您的处理程序将不会被调用。编写上面的代码可以避免这个问题。

# javascript - 在 JavaScript 中更新原型属性

> ID：10979874
> 
> 赞同：0
> 
> 时间：2012-06-11T12:12:07.623
> 
> 标签：javascript, jquery, inheritance, prototype

我正在尝试实现原型继承，但我不理解它的行为。

考虑以下示例：

```
var config = {
  writable: true,
  enumerable: true,
  configurable: true
};

var defineProperty = function( obj, name, value ) {
  config.value = value;
  Object.defineProperty( obj, name, config );
}

var man = Object.create( null );
defineProperty( man, 'sex', 'male' );

var yehuda = Object.create( man );
defineProperty( yehuda, 'firstName', 'Yehuda' );
defineProperty( yehuda, 'lastName', 'Katz' ); 
```

当我访问正确的`yehuda.sex`返回`male`值时，但是当我尝试更新值时实际发生的是`sex`在`yehuda`.

一种可能的解决方案是直接访问原型属性 ( `Object.getPrototypeOf(yehuda).sex = 'female'`)，但这意味着我需要知道对象所属的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:41:15.243

使用原型的想法是，当您尝试访问对象上的属性时，解释器将首先尝试在给定对象上找到该属性。

如果在给定对象上找不到该属性，则解释器将尝试在对象的原型上找到它，依此类推，直到原型链以`null`.

如果未找到该属性，则解释器返回`undefined`. 否则返回属性值。

在您的情况下，当您访问该属性`sex`时，它不会在对象上找到，但可以在对象的原型上找到。因此它返回`male`。

然后，当您为其分配新值时`sex`，会在给定对象上创建一个新属性，而不是更改对象原型上的属性，因为 JavaScript 是一种动态语言。

这很好，因为新值会掩盖旧值。这就是原型继承的工作方式。

如果您明确想要更新原型上的属性而不是给定对象，我建议您在对象上创建属性，如下所示：

```
function defineProperty(object, name, value) {
    Object.defineProperty(object, name, {
        value: value,
        writable: true,
        enumerable: true
    });
}

function extendObject(object) {
    var extendedObject = Object.create(object);

    Object.keys(object).forEach(function (key) {
        Object.defineProperty(extendedObject, key, {
            set: function (value) {
                object[key] = value;
            },
            enumerable: true
        });
    });

    return extendedObject;
}

var man = Object.create(null);
defineProperty(man, "sex", "male");

var yehuda = extendObject(man);
defineProperty(yehuda, "firstName", "Yehuda");
defineProperty(yehuda, "lastName", "Katz"); 
```

这应该可以解决您的问题。要了解有关原型继承的更多信息，请阅读[此](https://stackoverflow.com/a/8096017/783743 "JavaScript 继承和构造函数属性")答案。

**编辑：**我建议您不要尝试更改原型的值。这是因为许多对象可能具有相同的原型。更改原型上的任何值意味着更改将反映在依赖它的所有对象上。除非这是您想要实现的目标，否则我建议您使用原型链上的阴影属性。

**注意：**您可以删除对象的属性。如果您删除的属性正在遮蔽另一个属性，那么它将在您下次访问相同的属性名称时使用被遮蔽的属性。

# django - 在 django 模板中获取文件类型

> ID：10979881
> 
> 赞同：0
> 
> 时间：2012-06-11T12:12:24.247
> 
> 标签：django, django-templates, django-file-upload

我需要在 django 模板中获取上传文件的文件类型。我已经编写了一个用于获取文件名的模板标签，但我也需要文件类型。

我可能能够获取文件的内容类型，但在调试时找不到它。

**doc_list.html**

```
{{ d.file|filename }}
{{ d.file|filetype }} 
```

**模板标签/helper.py**

```
register = template.Library()

@register.filter
def filename(value):
    return os.path.basename(value.file.name)

@register.filter
def filetype(value):
    return ??? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:07:33.577

[使用 mimetypes 模块](http://docs.python.org/library/mimetypes.html#mimetypes.guess_type)

```
import mimetypes    

>>> mimetypes.guess_type('a.py',strict = True)
('text/x-python', None) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:36:32.890

```
mime = magic.Magic(mime=True)
mime.from_file("testdata/test.pdf") 
```

返回：

```
'application/pdf' 
```

# xml - 如何在 XML 文档中合并相邻的 SPAN 标签？

> ID：10979882
> 
> 赞同：1
> 
> 时间：2012-06-11T12:12:26.523
> 
> 标签：xml, dom, powershell, html

我们有一些 XML 文档，其中包含一点点 XHTML。HTML 来自 MS Word 之类的，并且有很多相邻的 SPAN 标签完全相同，除了它们的内容。

我一直在将 XML 加载到 powershell 中并比较相邻节点等等，但这似乎很费力并且很有可能出错。有没有一种聪明的方法可以通过 XML DOM 或 HTML DOM 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:45:33.830

这是我想出的：

```
function removeNode($mynode){
    $parent = $mynode.get_parentNode()
    $parent.removeChild($mynode)
}

function parseStyles($mySpans){
    $global:finished = $true
    foreach($span in $mySpans){
        if($span.('#text') -eq $null -and !$span.haschildnodes){
            removeNode $span
        }
        elseif($span.get_NextSibling() -ne $null){
            if($span.get_NextSibling().style -eq $span.style){
                $span.get_innerText()+$span.get_NextSibling().get_InnerText()
                $span.'#text' = $span.get_innerText()+$span.get_NextSibling().get_InnerText()
                $span.('#text')
                removeNode $span.get_NextSibling()
                $global:finished = $false
            }
        }
    }
    return $mySpans
}
$global:finished = $true
$files = get-childitem -recurse -include "*.xml"

foreach($file in $files){

    [xml]$inputXML = Get-Content($file.directory.name+'\'+$file.name)
    do{
        $Spans = $inputXML.selectnodes('//span')
        parseStyles($Spans)
    }until($global:finished)
    $inputXML.save('./desktop/prometric/'+$file.directory.name+'/processed_'+$file.name)
} 
```

# sql - 替换sql注入脚本

> ID：10979883
> 
> 赞同：0
> 
> 时间：2012-06-11T12:12:28.347
> 
> 标签：sql, sql-injection

我有这个 sql 查询来尝试从我的数据库中删除一些 sql 注入脚本。当我执行此操作时，它运行良好并告诉我所有行都受到了影响，但我没有看到任何变化。我检查了表名和列名，我已将 varchar 值更改为列设置的值，但仍然没有。

我直接从数据库中复制了注入的脚本

```
UPDATE table_name
SET column_name = REPLACE(CAST(column_name AS VARCHAR(max)), '"></title><script src="http://www1.mainglobilisi.com/sl.php"></script><!--', '') 
```

有人可以解释为什么脚本运行良好但没有对数据库进行更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:19:02.623

该`REPLACE`函数可能找不到您要搜索的字符串。

尝试进行选择以查看是否有任何行：

```
select 
    column_name
from
    table_name
where 
    CAST(column_name AS VARCHAR(max)) like '%"></title><script src="http://www1[dot]mainglobilisi[dot]com/sl.php"></script><!--%' 
```

（我对 URL 进行了混淆，以防它是恶意的）。

# ios - UITableViewCell iOS中的HTML特殊字符

> ID：10979893
> 
> 赞同：0
> 
> 时间：2012-06-11T12:13:14.833
> 
> 标签：ios, uitableview

我在 JSON 中获取数据，它有 HTML 格式的文本（带有特殊字符）。我正在解析它，我需要将它作为行显示在 UITableView 中。

你能帮我怎么做吗？

任何指针将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:20:12.807

你能详细说明问题吗？一种简单的方法是：

[cell.textLabel setText: [responseString JSONValue]objectForKey:@"response"] ;

解析 json 值以获得所需的输出。

# c# - 如何在文本框中显示 Xml 文件的全部内容？

> ID：10979898
> 
> 赞同：0
> 
> 时间：2012-06-11T12:13:41.263
> 
> 标签：c#, asp.net, xmlreader, xmlwriter

我需要在文本框中显示 xml 文件的全部内容，以便用户可以看到并更改它，然后我必须更新 xml 文件。用户知道 xml 及其工作原理，我只需要显示全部内容页面上的文本框中的 xml 文件，单击按钮后，更新文件，任何人都可以帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:17:12.477

装载：

```
TextBox1.Text = File.ReadAllText(filePath); 
```

保存：

```
File.WriteAllText(filePath, TextBox1.Text); 
```

# c# - 为什么我不能在程序的两个实例之间拖动一个点？

> ID：10979900
> 
> 赞同：5
> 
> 时间：2012-06-11T12:13:48.317
> 
> 标签：c#, winforms, drag-and-drop

我有一个 DoDragDrop，我在其中将数据设置为`Point`.when 我在一个实例中拖动 - 一切正常。但是当我在程序的两个实例之间拖动时，Visual Studio 给了我这个错误：

> 指定的记录无法映射到托管值类。

为什么？

编辑：这是代码：

```
DataObject d = new DataObject();
d.SetData("ThePoint", MyPoint);
DragDropEffects e = DoDragDrop(d, DragDropEffects.Move); 
```

和：

```
Point e2 = (Point)e.Data.GetData("ThePoint"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T13:34:19.857

> 无法映射指定的**记录**

请注意“记录”一词的奇怪之处。它是“结构”的以 COM 为中心的词。你试图做的*几乎*可以工作，但并不完全。DoDragDrop() 方法将 Point 结构正确地编组为 COM 对象，这可能是因为 Point 具有 [ComVisible(true)] 属性。缺少的成分是 IRecordInfo 所需的信息，IRecordInfo 是一个描述结构布局的 COM 接口。必需，因为结构具有非常依赖于编译器的布局。

该接口通常通过从类型库中读取结构定义来实现。这实际上是可用的，Point 结构在 c:\windows\microsoft.net\framework\v2.0.50727\system.drawing.tlb 中进行了描述。您可以使用 OleView.exe 工具 File + View Typelib 查看它。

一切都很好，除了 COM 对象的接收者必须将其转换回托管对象的部分，即点。这需要找出包含对象定义的类型库，以便 IRecordInfo 可以完成其工作。其中记录在注册表中，HKCR\Record 键。其中不*包含*Point 的条目。卡布姆。

创建你自己的类（不是结构）来存储数据，给它 [Serializable] 属性，这样它就可以被简单地编组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:09:00.860

这看起来像一个黑客，但你可以做到这一点，我测试了它的工作原理。 **编辑** 猜猜它没有回答为什么？问题。

```
private void panel1_MouseDown(object sender, MouseEventArgs e)
    {
        Point MyPoint = new Point(100, 200);
        DoDragDrop(new string[] { MyPoint.X.ToString(), MyPoint.Y.ToString() }, DragDropEffects.Copy);
    }

    private void Form1_DragEnter(object sender, DragEventArgs e)
    {
        e.Effect = DragDropEffects.Copy;
    }

    private void Form1_DragDrop(object sender, DragEventArgs e)
    {
        if (e.Data.GetDataPresent(typeof(string[])))
        {
            string[] item = (string[])e.Data.GetData(typeof(string[]));
            Point e2 = new Point(Int32.Parse(item[0]), Int32.Parse(item[1]));

            MessageBox.Show(e2.X+":"+e2.Y);
        }

    } 
```

# testing - 如何验证可选字段？

> ID：10979902
> 
> 赞同：1
> 
> 时间：2012-06-11T12:14:01.623
> 
> 标签：testing, selenium, automated-tests, testng

根据要求，“XYZ”字段是必填字段，但在我正在测试的表单中，此字段是可选的。“XYZ”是一个文本字段。因此，当我自动化表单时，无论该字段是空的还是填充的，它都会通过。实际上，这个测试应该失败。我正在使用 TestNG 和硒。

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T16:10:19.120

将文本字段留空，单击`Submit`以提交表单。检查任何验证`"Please enter text here."`或`"1 missed field"`. 如果没有看到验证警报，则测试脚本将失败，这就是您将如何捕获它。

将 selenium 视为一种在网站上复制真实用户点击的方式。因此，当手动单击时，您单击提交表单并在您实际期望验证警报时转到下一页。

# ruby - ruby thrift 序列化压缩

> ID：10979907
> 
> 赞同：2
> 
> 时间：2012-06-11T12:14:15.917
> 
> 标签：ruby, serialization, thrift

我正在使用thrift ruby​​ gem，并且正在执行以下操作

```
serializer = Thrift::Serializer.new()
binary_string=serializer.serialize(my_thrift_obj) 
```

我将这个 binary_string 存储在一个文件中，但我注意到根本没有压缩。有什么方法可以在序列化时压缩 my_thrift_obj 吗？

此外，有没有办法将任意 ruby​​ 哈希序列化为节俭对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:57:26.100

我从节俭的作家 Mark Slee 那里得到了以下答复。

> compact 协议不进行压缩，compact 一词指的是它对结构和类型元数据进行编码的方式。
> 
> Thrift 旨在用于强类型结构化数据序列化，而不是压缩。一个文件已经被序列化了——听起来你真正想要的是压缩序列化的数据。建议为此使用 zlib 或 gzip。

# php - 带小数的PHP字符串到数字

> ID：10979909
> 
> 赞同：5
> 
> 时间：2012-06-11T12:14:16.923
> 
> 标签：php, variables, integer

因此，当我尝试以下操作时：

```
$a = '1.00';
$b = '1.01';

if($a < $b){
    print 'ok';
} 
```

这工作正常。但是当我从 xml 文件中检索这些变量时。字符串完全相同，但由于某种原因，if 函数无法正常工作。所以我假设我必须将字符串转换为数字。但是当我这样做时，小数会被删除。

我的假设正确吗？如果是这样，我该如何解决？

如果不是，有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-11T12:20:49.167

```
$a = (float) $a;
$b = (float) $b; 
```

相关阅读： http: [//php.net/manual/en/language.types.type-juggling.php](http://php.net/manual/en/language.types.type-juggling.php)

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-06-11T12:19:17.793

通过谷歌搜索找到了答案:)

```
floatval($string); 
```

# java - 为 FtpClient 设置连接超时

> ID：10979911
> 
> 赞同：9
> 
> 时间：2012-06-11T12:14:37.687
> 
> 标签：java, ftp-client, apache-commons-net

当`ftpClient.connect`与没有激活 ftp 服务的现有主机一起使用时，超时仅在 5 分钟后发生，这太长了。

我尝试设置不同的超时（setDefaultTimeout、setDataTimeout），但这并没有改变任何东西。

`FtpClient`继承自`SocketClient`其中有一个 setConnectTimeout 方法，但是当我使用它时，我`java.lang.NoSuchMethodError: org/apache/commons/net/ftp/FTPClient.setConnectTimeout`在运行它时得到一个。这似乎是因为某些 J2SW 1.2 兼容性，如 Commons-net FAQ 中所述：

问：如何设置连接超时？[http://wiki.apache.org/commons/Net/FrequentlyAskedQuestions](http://wiki.apache.org/commons/Net/FrequentlyAskedQuestions)

`SocketFactory`他们建议使用特定超时从扩展的 Socket 类实现自己的创建对象。但是，在尝试使用时，`ftpClient.setSocketFactory`我也得到了一个`java.lang.NoSuchMethodError`.

有什么帮助我可以减少连接超时吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2017-02-10T16:47:16.323

```
 FTPClient ftp = new FTPClient();

    ftp.setDefaultTimeout();
    ftp.setDataTimeout();
    ftp.setConnectTimeout();
    ftp.setSoTimeout();
    ftp.setControlKeepAliveTimeout();
    ftp.setControlKeepAliveReplyTimeout(); 
```

来自 Apache 文档：

```
 /**
     * Set the default timeout in milliseconds to use when opening a socket.
     * This value is only used previous to a call to
     * {@link #connect connect()}
     * and should not be confused with {@link #setSoTimeout setSoTimeout()}
     * which operates on an the currently opened socket.  _timeout_ contains
     * the new timeout value.
     * <p>
     * @param timeout  The timeout in milliseconds to use for the socket
     *                 connection.
     */
    void setDefaultTimeout(int timeout);

    /**
     * Sets the timeout in milliseconds to use when reading from the
     * data connection.  This timeout will be set immediately after
     * opening the data connection, provided that the value is &ge; 0.
     * <p>
     * <b>Note:</b> the timeout will also be applied when calling accept()
     * whilst establishing an active local data connection.
     * @param  timeout The default timeout in milliseconds that is used when
     *        opening a data connection socket. The value 0 means an infinite timeout.
     */
    void setDataTimeout(int timeout)
    /**
     * Sets the connection timeout in milliseconds, which will be passed to the {@link java.net.Socket} object's
     * connect() method.
     * @param connectTimeout The connection timeout to use (in ms)
     * @since 2.0
     */
    void setConnectTimeout(int connectTimeout);
    /**
     * Set the timeout in milliseconds of a currently open connection.
     * Only call this method after a connection has been opened
     * by {@link #connect connect()}.
     * <p>
     * To set the initial timeout, use {@link #setDefaultTimeout(int)} instead.
     *
     * @param timeout  The timeout in milliseconds to use for the currently
     *                 open socket connection.
     * @exception SocketException If the operation fails.
     * @throws NullPointerException if the socket is not currently open
     */
    void setSoTimeout(int timeout) throws SocketException;
    /**
     * Set the time to wait between sending control connection keepalive messages
     * when processing file upload or download.
     *
     * @param controlIdle the wait (in secs) between keepalive messages. Zero (or less) disables.
     * @since 3.0
     * @see #setControlKeepAliveReplyTimeout(int)
     */
    void setControlKeepAliveTimeout(long controlIdle);

    /**
     * Set how long to wait for control keep-alive message replies.
     *
     * @param timeout number of milliseconds to wait (defaults to 1000)
     * @since 3.0
     * @see #setControlKeepAliveTimeout(long)
     */
    void setControlKeepAliveReplyTimeout(int timeout) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T13:45:58.713

它必须以您调用 setConnectTimeout 的方式，因为它确实存在。setConnectTimeout 不是静态调用，您必须在分配 FTPClient 对象后调用它，并在连接之前进行设置。

```
FTPClient ftp = new FTPClient();
ftp.setConnectTimeout(5000); // 5000 Milliseconds (5 Seconds)
... 
ftp.connect(server, port); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-13T12:50:41.640

虽然对于旧版本的 Commons Net 库有可能的解决方案，但我建议弄清楚为什么使用了错误版本的 Commons Net。为此，您可以`FTPClient`在 webapp 中使用的位置包含以下代码：

```
FTPClient ftpClient = ...;
if(ftpClient.getClass().getClassLoader() instanceof java.net.URLClassLoader) {
    URL[] urls = ((java.net.URLClassLoader) ftpClient.getClass().getClassLoader()).getURLs();
    // log these urls somewhere and check - these are urls from where your FTPClient may be loaded from
} 
```

如果 if`FTPClient`没有被加载，`java.net.URLClassLoader`那么检查类路径可能会变得更加复杂，但这应该不是问题。

希望这可以帮助...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-05-06T14:29:44.280

只是为这些值添加一些说明（在手动测试了很多组合之后，并且只是提到这与`DefaultFtpSessionFactory`在 apache 下使用的 spring 有关`FTPClient`- 所以最后适用于那个）：

```
import org.springframework.integration.ftp.session.DefaultFtpSessionFactory;

DefaultFtpSessionFactory factory = new DefaultFtpSessionFactory();

/**
 * Controls 2 values:
 * 1\. protected abstract void connect(SocketAddress address, int timeout) throws IOException;
 * --> controls timeout when opening socket connection. this one is by default 0 in java-code,
 * but since OS is controlling this it has some default value - for me in win.
 * it was ~20 seconds. If set to lower value it will be respected. If set >20 in my case,
 * it always treats it as if 20 was set
 * 2\. _socket_.setSoTimeout(connectTimeout);
 * --> controls timeout after socket is open (so if FTP server is not responding after
 * socket is successfully connected). Default is unlimited so good to set to some sane value
 * otherwise if no response from FTP Server, connection will hang. Overwrites setDefaultTimeout
 * if already set - but only for this connection time (not after FTP server responds first time
 * with some data).
 */
factory.setConnectTimeout((int) Duration.ofMinutes(1).toMillis());

/**
 * Controls timeout after socket is open (so if FTP server is not responding after socket is
 * successfully connected).(IF NOT ALREADY SET IN setConnectTimeout),
 * but also controls timeout when reading data from socket after the connection has been made.
 * So if FTP client sends "LIST /" command, and there is no answer from FTP server, without
 * setting this it will hang (since default is 0). Set to some sane value
 * (since server can actually be busy with creating listing of folders for longer time etc.).
 */
factory.setDefaultTimeout((int) Duration.ofMinutes(1).toMillis());

/**
 * Controls how long to wait if there is a socket inactivity during FILE-related operations.
 * E.g. if we start to download some file from FTP server, this timeout is respected.
 * This is by default set to 0 (that is infinite wait). If set to 10 seconds, and there is at
 * least some activity in communication (eg. every 9 seconds something is received) then there
 * will be no timeout. Only if there is some delay/inactivity for longer than 10 seconds then
 * there will be socketRead0 timeout exception. Should be set, since this is not affected by
 * setConnectTimeout or setDefaultTimeout.
 */
factory.setDataTimeout((int) Duration.ofMinutes(1).toMillis()); 
```

# eclipse - 带有 _root_ 的包会破坏 eclipse 中的 scala 编译器

> ID：10979916
> 
> 赞同：1
> 
> 时间：2012-06-11T12:14:57.720
> 
> 标签：eclipse, scala

我正在使用 eclipse 重构 scala 项目中的包结构。在这中间我使用了一个包语句`_root_`，就像这样

```
package _root_.com.workday.foo.bar 
```

现在我的 Eclipse 项目将无法构建，尽管我仍然可以在命令行中构建所有内容。问题是我所有的`com.*`进口都坏了

```
import com.workday.some.thing.Else 
```

错误是：

```
Multiple markers at this line
    - object workday is not a member of package      com.workday.foo.bar.com
    - object workday is not a member of package      com.workday.foo.bar.com 
```

似乎它正在尝试查找与每个源文件顶部的 package 语句相关的所有导入。

我已从`_root_`我的包中删除并尝试清理我的项目和工作区。我还尝试将 scala 编译器从“sbt”更改为“refined”并返回，但无济于事

有谁知道如何让 eclipse scala 编译器回到正轨？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:16:21.643

很抱歉这么快回答我自己的问题，但我发现了问题。

我在包含各种模拟类的源文件中间定义了一个子包，这个子包已更改为，`com.workday.foo.bar.messaging`因此它制作`com`了一个子包，`com.workday.foo.bar`导致一个包`com.workday.foo.bar.com.workday.foo.bar.messaging`

# python - 如何使最新版本的 Python 成为默认或路径中的第一个

> ID：10979918
> 
> 赞同：1
> 
> 时间：2012-06-11T12:15:02.320
> 
> 标签：python, upgrade, pythonpath, system-variable

我已经安装了一个新版本的 Python，所以我想确保当 Python 被调用时，那个版本在我的路径中是第一个。所以，现在在我的“C”驱动器上，我有“Python27”和“Python32”（分别为旧版本和新版本）。

当我在命令行中键入“python”时，我得到“Python 2.7”。使用控制面板，我更改了“路径”和“pythonpath”用户变量（从“C:\Python27”到“C:\Python32”）并确保我已经重新加载了系统。它仍然不起作用。有谁知道如何强制系统使用新版本的 Python？

**添加**

可能这很重要。当我转到“Python32”目录并输入命令行“python”时，我确实得到了新版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:18:49.653

我知道你说你已经更新了`%PATH%`。但是，从症状的描述来看，几乎可以肯定的是，`c:\Python27`仍然出现在`%PATH%`而不是（或之前）`c:\Python32`上。

要诊断，启动`cmd.exe`并键入`set`. 然后定位`PATH`并查看它包含的 Python 目录以及顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:19:00.370

就我个人而言，我将所有已安装的 Python 版本的目录都放在了 中`%PATH%`，但更改了除“默认”版本之外的所有版本的可执行文件名称。例如，我有一个`C:\Python26\Python.exe`和`C:\Python27\Python27.exe`一个`C:\Python32\Python32.exe`。这样我就可以轻松地从命令行启动任何版本。

# php - php，一些有效的算法

> ID：10979920
> 
> 赞同：-3
> 
> 时间：2012-06-11T12:15:18.980
> 
> 标签：php, arrays, algorithm

我在php中有一个数组

```
$arr = array(
    array('id' => 1, 'par' => 5),
    array('id' => 2, 'par' => 5),
    array('id' => 3, 'par' => 5),
    array('id' => 4, 'par' => 7),
    array('id' => 5, 'par' => 7),
    array('id' => 6, 'par' => 7),
    array('id' => 7, 'par' => 9),
    array('id' => 8, 'par' => 9),
    ...
); 
```

任何人都可以知道一种有效的算法来获取具有属性 $arr[x]['par'] == 7 的元素的第一个索引。如何从包含 2000 个元素的数组中获取第一个 x？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:21:58.473

我不确定使用迭代器是否比“手动”更快，但你可以使用 RecursiveArrayIterator - [http://php.net/manual/en/class.recursivearrayiterator.php](http://php.net/manual/en/class.recursivearrayiterator.php)

```
$arr = array(
    array('id' => 1, 'par' => 5),
    array('id' => 2, 'par' => 5),
    array('id' => 3, 'par' => 5),
    array('id' => 4, 'par' => 7),
    array('id' => 5, 'par' => 7),
    array('id' => 6, 'par' => 7),
    array('id' => 7, 'par' => 9),
    array('id' => 8, 'par' => 9),
);

$arrayIterator = new RecursiveIteratorIterator(new RecursiveArrayIterator($arr));
foreach ($arrayIterator as $subKey=>$subValue) {
        if ($subKey == 'par' && $subValue == 9) {
                $validArray = iterator_to_array($arrayIterator->getSubIterator());
                $id = $validArray['id'];  // This is your return array
                break;
        }
} 
```

但是，老实说，手动操作可能更容易理解和调试，并且对于 2000 条记录 - 为什么要为比以下更复杂的事情烦恼：

```
foreach($arr as $subArray) {
    if ($subArray['par'] == 9) {
            $id = $subArray['id'];
            break;
    }
} 
```

如果您正在处理更多记录，或者拥有 Facebook 的普及，那么就开始认真起来。但有时保持简单是最好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:18:20.280

我使用了二进制搜索

```
$par = 7;
$a = 0;$i = -1;
$b = count($arr);
while(true) {
    if($par == $arr[$a]['par']) { $i = $a; break; }
    if($par == $arr[$m]['par']) { $i = $m; break; }
    if($par == $arr[$b]['par']) { $i = $b; break; }
    if($a == $m || $m == $b) break;
    if($arr[$a]['par'] < $par && $par < $arr[$m]['par']) {
        $b = $m; $m = floor(($a+$b)/2);
    }
    if($arr[$m]['par'] < $parent && $parent < $arr[$b]['par']) {
        $a = $m; $m = floor(($a+$b)/2);
    }
} 
```

该示例比 $i=0;while($i < $n && $arr[$i]['par'] != $par) $i++; 更慢。可以使用 array_search 代替吗？

# ios - iOS 和 SSL：无法验证自签名服务器证书

> ID：10979922
> 
> 赞同：2
> 
> 时间：2012-06-11T12:15:30.543
> 
> 标签：ios, ssl, nsurlconnection, ssl-certificate

    我对使用 SSL 通道使用 Web 服务还很陌生。经过相当好的搜索，我找到了一种使用 NSURLConnection 委托 API 执行 SSL/HTTPS 身份验证的方法。以下是执行实际身份验证的代码片段：

```
- (void)connection:(NSURLConnection *)connection willSendRequestForAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {
[self printLogToConsole:@"Authenticating...."];
[self printLogToConsole:[NSString stringWithFormat:@"\n%@\n", [challenge description]]];
NSLog(@"\n\nserverTrust: %@\n", [[challenge protectionSpace] serverTrust]);

/* Extract the server certificate for trust validation
 */
NSURLProtectionSpace *protectionSpace = [challenge protectionSpace];
assert(protectionSpace);
SecTrustRef trust = [protectionSpace serverTrust];    
assert(trust);
CFRetain(trust); // Make sure this thing stays around until we're done with it
NSURLCredential *credential = [NSURLCredential credentialForTrust:trust];

/* On iOS 
 * we need to convert it to 'der' certificate. It can be done easily through Terminal as follows:
 * $ openssl x509 -in certificate.pem -outform der -out rootcert.der
 */
NSString *path = [[NSBundle mainBundle] pathForResource:@"rootcert" ofType:@"der"];
assert(path);
NSData *data = [NSData dataWithContentsOfFile:path];
assert(data);

/* Set up the array of certificates, we will authenticate against and create credentials */
SecCertificateRef rtCertificate = SecCertificateCreateWithData(NULL, CFBridgingRetain(data));
const void *array[1] = { rtCertificate };
trustedCerts = CFArrayCreate(NULL, array, 1, &kCFTypeArrayCallBacks);
CFRelease(rtCertificate); // for completeness, really does not matter

/* Build up the trust anchor using our root cert */
int err;
SecTrustResultType trustResult = 0;
err = SecTrustSetAnchorCertificates(trust, trustedCerts);
if (err == noErr) {
    err = SecTrustEvaluate(trust, &trustResult);
}
CFRelease(trust); // OK, now we're done with it

[self printLogToConsole:[NSString stringWithFormat:@"trustResult: %d\n", trustResult]];

/* http://developer.apple.com/library/mac/#qa/qa1360/_index.html
 */
BOOL trusted = (err == noErr) && ((trustResult == kSecTrustResultProceed) || (trustResult == kSecTrustResultConfirm) || (trustResult == kSecTrustResultUnspecified));

// Return based on whether we decided to trust or not
if (trusted) {
    [[challenge sender] useCredential:credential forAuthenticationChallenge:challenge];
    [self printLogToConsole:@"Success! Trust validation successful."];
} else {
    [self printLogToConsole:@"Failed! Trust evaluation failed for service root certificate.\n"];
    [[challenge sender] cancelAuthenticationChallenge:challenge];
} 
```

}

但我收到以下错误：

```
2012-06-11 17:10:12.541 SecureLogin[3424:f803] Error during connection: Error Domain=NSURLErrorDomain Code=-1012 "The operation couldn’t be completed. (NSURLErrorDomain error -1012.)" UserInfo=0x682c790 {NSErrorFailingURLKey=https://staging.esecure.url/authentication/signin/merchants, NSErrorFailingURLStringKey=https://staging.esecure.url/authentication/signin/merchants} 
```

我正在使用从服务器获得的相同证书并将其转换为“der”格式。我正在为 iOS 5.x 构建应用程序。我不确定我是否错过了什么。让我知道你的建议。

谢谢。

**编辑** 在此处检查证书后，输出的外观如何： ![Portecle 应用程序考试](../Images/40d4bb7e9bb34f58bb76d93df08ce5e2.png)

让我知道是否有问题。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:24:06.933

我无法判断您的代码是否有效，因为我使用 RestKit 来使用 REST 接口，但是导致的最常见问题`NSURLErrorDomain Code=-1012`是自签名证书没有`subject alternative name`指向 Web 服务的扩展名。

要检查您的证书，请下载[Portecle 应用程序](http://sourceforge.net/projects/portecle/)，如果您需要查看 ssl 证书内部非常有用。运行它并从菜单中选择检查->检查证书并导航到您的证书。您将看到有关您的证书的基本信息，现在按检查按钮，然后按主题备用名称，并确保您的 Web 服务的正确 IP 地址在那里。如果没有，您需要使用此信息再次创建证书。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T08:15:14.927

我确实想出了如何解决这个问题。

我最终逐字节比较了客户端和服务器信任证书。虽然可能有另一种方法来解决自签名证书的此类问题，但对于此解决方案确实有效。下面是我如何使用它们的 CFData 对象逐字节比较客户端和服务器证书（您也可以参考 Apple 提供的“AdvancedURLConnections”示例代码）：

```
success = NO;
        pServerCert = SecTrustGetLeafCertificate(trust);
        if (clientCert != NULL) {
            CFDataRef       clientCertData;
            CFDataRef       serverCertData;

            clientCertData = SecCertificateCopyData(clientCert);
            serverCertData   = SecCertificateCopyData(pServerCert);

            assert(clientCertData != NULL);
            assert(serverCertData   != NULL);

            success = CFEqual(clientCertData, serverCertData);

            CFRelease(clientCertData);
            CFRelease(serverCertData);
        }
        if (success) {
            [[challenge sender] useCredential:credential forAuthenticationChallenge:challenge];
            [self printLogToConsole:@"Success! Trust validation successful."];
        } else {
            [self printLogToConsole:@"Failed! Trust evaluation failed for service root certificate.\n"];
            [[challenge sender] cancelAuthenticationChallenge:challenge];
        } 
```

希望这对正在寻找类似问题解决方案的人有所帮助，

谢谢。

# android - TWLauncher 在应用安装时崩溃

> ID：10979925
> 
> 赞同：0
> 
> 时间：2012-06-11T12:15:30.980
> 
> 标签：android, launcher

面对这个问题，在花了几个小时的时间之后，得到了解决方案。

问题是，每当我安装应用程序时，三星设备的 TWLauncher 就会进入崩溃循环，它总是崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:15:31.807

不知道为什么，但是当我用另一个图标替换图标时，它解决了这个问题。所以使用不同的图像并尝试，它会起作用！只是想我会与大家分享这个。

# android - 反编译安卓apk

> ID：10979928
> 
> 赞同：0
> 
> 时间：2012-06-11T12:15:54.413
> 
> 标签：android, reverse-engineering

我已经编译了 android 应用程序（.apk 文件）。我想改变它，在开始之前显示启动画面。我可以在没有任何源代码的情况下做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T12:40:44.197

并不真地。

反编译*不是*一个直接的过程。您会在编译过程中丢失大量信息（变量名被丢弃，注释被丢弃等......）。对于安卓：

*   APK 只是一个包含一组类和资源的 zip 文件。
*   这些类被编译成一个`.dex`文件。
*   该`.dex`文件包含的代码有点像 Java 虚拟机代码。
*   您可以使用该工具将 dex 转换为 jar `dex2jar`。
*   完成此操作后，您可以简单地使用 Java 反编译器。

但是，正如您最初的问题所问的那样，以这种方式修改代码基本上是不可能的，会产生一堆无法维护的可怕代码。你也需要很长时间才能做到这一点，部分理解反编译代码的工作原理（因为不会有任何注释或中间变量名），然后修改它......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:21:11.363

看[这个问题。](https://stackoverflow.com/questions/3122635/is-it-possible-to-decompile-an-android-apk-file)

> 首先，apk 文件只是一个修改后的 jar 文件。所以真正的问题是他们能不能反编译里面的dex文件。答案有点像。

因此，如果您只是修改了用于编译 .APK 的源代码，那将是最简单的

# python - 如何有效地处理频率分布计算的数据库查询？

> ID：10979930
> 
> 赞同：0
> 
> 时间：2012-06-11T12:15:56.720
> 
> 标签：python, sqlite, iteration, pysqlite, frequency-distribution

我已经为此工作了一段时间，试图创建一个频率分布数据库端：

```
from itertools import permutations
import sqlite3

def populate_character_probabilities(connection, table="freq_dist", alphabet='abcdefghijklmnopqrstuvwxyz'):
    c = connection.cursor()
    c.execute("DROP TABLE IF EXISTS tablename".replace('tablename', table))
    c.execute("create table tablename (char1 text, char2 text, freq integer);".replace("tablename", table))    
    char_freq_tuples = [x + (1,) for x in list(permutations(alphabet, 2)) + [(alpha, alpha) for alpha in alphabet + 'S' + 'E']]
    c.executemany("insert into tablename values (?,?,?);".replace("tablename", table), char_freq_tuples)
    connection.commit()
    c.close()

def populate_word_list(connection, table="word_list"):
    cursor = connection.cursor()
    cursor.execute("DROP TABLE IF EXISTS tablename".replace('tablename', table))
    cursor.execute("create table tablename (word text);".replace('tablename', table))
    cursor.executemany("insert into tablename values (?)".replace('tablename', table), [[u'nabisco'], [u'usa'], [u'sharp'], [u'rise']])
    connection.commit()

def update_freq_dist(connection, word_list="word_list", freq_dist="freq_dist"):
    cursor = connection.cursor()
    subset = cursor.execute("select * from tablename;".replace("tablename", word_list)).fetchmany(5)
    for elem in subset: # want to process e.g.: 5 at a time
        elem = 'S' + elem[0] + 'E' # Start and end delimiters
        for i in xrange(len(elem) - 1):
            freq = cursor.execute("SELECT freq FROM tablename WHERE char1=? and char2=?;".replace("tablename", freq_dist), (elem[i], elem[i + 1])).fetchone()
            cursor.execute("UPDATE tablename SET freq=? WHERE char1=? and char2=?;".replace("tablename", freq_dist), (freq + 1, elem[i], elem[i + 1]))
    connection.commit() # seems inefficient having two queries here^
    cursor.close()

if __name__ == '__main__':
    connection = sqlite3.connect('array.db')
    populate_word_list(connection)
    populate_character_probabilities(connection)
    update_freq_dist(connection)
    cursor = connection.cursor()
    print cursor.execute("SELECT * FROM freq_dist;").fetchmany(10) 
```

（哇，测试用例的 180 行代码库减少到 37 行！：D - 请注意，实际的单词列表是 2900 万而不是 4 ！！！）

我意识到：

*   **我不应该`update_freq_dist`在内循环中需要两个查询**
*   **有一种方法可以遍历数据库元素（行），例如：一次 5 个**

但是我不确定如何解决这两个问题。

你能想出解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:36:18.530

您只想用 + 1 更新频率吗？

```
UPDATE tablename
SET freq = freq + 1
WHERE char1=? and char2=?; 
```

或者，如果您从另一个表更新：

```
UPDATE tablename 
SET freq = t2.freq + 1 -- whatever your calc is
FROM tablename t1
JOIN othertable t2
ON t1.other_id = t2.id
WHERE t1.char1=? and t1.char2=? and t2.char1=? and t2.char2=? 
```

至于一次迭代 5 个 - 您可以使用[limit 和 offset](http://www.sqlite.org/lang_select.html)子句来接近。

# mysql - 以相反的方式对两列进行排序

> ID：10979932
> 
> 赞同：-3
> 
> 时间：2012-06-11T12:16:00.590
> 
> 标签：mysql, sql, sorting, sql-order-by

以下是我所拥有的

```
id    |  Total    | Area
  1   |    19     |  A
  2   |    20     |  B
  3   |    19     |  C
  4   |    20     |  A
  5   |    19     |  D 
```

我想要的是如下。

```
id    |  Total    | Area
  4   |    20     |  A
  2   |    20     |  B
  1   |    19     |  A
  3   |    19     |  C
  5   |    19     |  D 
```

我正在尝试

```
SELECT * FROM myTable
ORDER BY Total, Area DESC 
```

通过使用上面的代码，我可以按降序对 Total 进行排序，但是如何同时对 Area 列进行排序？任何的想法？

当我得到答案时，我正在结束这个问题

```
SELECT * FROM myTable
ORDER BY Total DESC, Area ASC 
```

## [演示](http://sqlfiddle.com/#!3/68d64/1)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T12:19:17.383

`ORDER BY`子句中的每个列/表达式都可以有*自己的*顺序（如果未指定`ASC/DESC`，`ASC`则为默认值）。你可以写：

```
SELECT * FROM myTable
ORDER BY Total DESC, Area /* ASC */ 
```

## [演示](http://sqlfiddle.com/#!3/68d64/1)

# php - Magento 管理网格问题

> ID：10979933
> 
> 赞同：1
> 
> 时间：2012-06-11T12:16:04.320
> 
> 标签：php, xml, magento

对我正在尝试编写的 adminhtml 模块感到非常困惑！

实际上，我已经编写并工作了 indexcontroller，并且我正在尝试调用网格块：

```
$<?php

class MyTuxedo_OutOfStock_Block_Adminhtml_Web_Grid extends Mage_Adminhtml_Block_Widget_Grid
{
   public function __construct()
 {
  parent::__construct();
  $this->setId('OOSGrid');
  $this->setDefaultSort('OOS_id');
  $this->setDefaultDir('ASC');
  $this->setSaveParametersInSession(true);
}

protected function _prepareCollection()
{
  $collection = Mage::getModel('MyTuxedo/OutOfStock')->getCollection();
  $this->setCollection($collection);
  return parent::_prepareCollection();
}

protected function _prepareColumns()
{
  $this->addColumn('category_name', array(
      'header'    => Mage::helper('OutOfStock')->__('Category'),
      'align'     =>'right',
      'width'     => '50px',
      'index'     => 'web_id',
  ));

  $this->addColumn('sku', array(
      'header'    => Mage::helper('OutOfStock')->__('SKU'),
      'align'     =>'left',
      'index'     => 'title',
  ));

/*
  $this->addColumn('quantity', array(
 'header'    => Mage::helper('OutOfStock')->__('Quantity Available'),
'width'     => '150px',
'index'     => 'content',
  ));
*/

  $this->addColumn('Backorder allowed', array(
      'header'    => Mage::helper('OutOfStock')->__('Status'),
      'align'     => 'left',
      'width'     => '80px',
      'index'     => 'status',
      'type'      => 'options',
      'options'   => array(
          1 => 'Enabled',
          2 => 'Disabled',
      ),
  ));

    $this->addColumn('action',
        array(
            'header'    =>  Mage::helper('OutOfStock')->__('Action'),
            'width'     => '100',
            'type'      => 'action',
            'getter'    => 'getId',
            'actions'   => array(
                array(
                    'caption'   => Mage::helper('OutOfStock')->__('Edit'),
                    'url'       => array('base'=> '*/*/edit'),
                    'field'     => 'id'
                )
            ),
            'filter'    => false,
            'sortable'  => false,
            'index'     => 'stores',
            'is_system' => true,
    ));

$this->addExportType('*/*/exportCsv', Mage::helper('OutOfStock')->__('CSV'));
$this->addExportType('*/*/exportXml', Mage::helper('OutOfStock')->__('XML'));

  return parent::_prepareColumns();
}

 public function getRowUrl($row)
{
  return $this->getUrl('*/*/edit', array('id' => $row->getId()));
} 
```

我正在使用控制器通过以下方式调用该方法：

```
<?php
class MyTuxedo_OutOfStock_IndexController extends Mage_Adminhtml_Controller_Action
{
public function indexAction()
{
    $this->loadLayout();
    $this->_addContent($this->getLayout()->createBlock('OutOfStock/adminhtml_OutOfStock'));
    $this->renderLayout();
    }
} 
```

布局文件包含以下内容：

```
<?xml version=“1.0??>
<layout version=“0.1.0?>
  <OutOfStock_index_index>
    <reference name=“content”&gt;
  <block type=“OutOfStock/adminhtml_OutOfStock“ name=“OutOfStock“ />
</reference>
</OutOfStock_index_index>
</layout> 
```

最后是块基础文件：

```
 <?php
class MyTuxedo_OutOfStock_Block_Adminhtml_OutOfStock extends Mage_Adminhtml_Block_Widget_Grid_Container
{
public function __construct()
{
 $this->_controller = ‘adminhtml_OutOfStock’;
 $this->_blockGroup = ‘OutOfStock’;
 $this->_headerText = Mage::helper(‘OutOfStock’)->__(‘Item Manager’);
     $this->_addButtonLabel = Mage::helper(‘OutOfStock’)->__(‘Add Item’);
 parent::__construct();
  }
} 
```

我已经尝试了一切以使网格在后端显示，但它绝对无法正常工作。在 indexcontroller 中运行 echo 工作正常，我什至在控制器内调用了一个 CMS 静态块，只是调用块本身拒绝工作。

有没有人有任何建议？如果需要，也可以发布 config.xml 只是不想让问题过于臃肿！

谢谢！！

配置文件

```
<?xml version="1.0"?>
<config>  
<modules> 
   <MyTuxedo_OutOfStock>    
    <version>0.1.0</version>
    </MyTuxedo_OutOfStock>   
 </modules>  
 <adminhtml>   
  <layout>    
    <updates>      
      <outofstock>        
        <file>OutOfStock.xml</file>      
      </outofstock>      
  </updates>   
 </layout>        
 <acl>        
 <resources>    
        <admin>     
         <children>      
              <outofstock>    
                    <title>Out of Stock Items</title>      
                  <children>                        
             <OutOfStock>     
                     <title>Out of Stock Items</title>                      
          </OutOfStock>                   
       </children>          
          </outofstock>             
     </children>      
      </admin> 
       </resources>  
  </acl>   
  </adminhtml>  
  <global>
  <models>
<outofstock>
    <class>MyTuxedo_OutOfStock_Model</class>
</outofstock> 
  </models>      
  <helpers>     
   <outofstock>   
         <class>MyTuxedo_OutOfStock_Helper</class>    
    </outofstock>   
  </helpers> 
<blocks>
<outofstock>
<class>MyTuxedo_OutOfStock_Block</class>
</outofstock>
</blocks> 
</global>
  <admin>
    <routers>
        <MyTuxedo_OutOfStock>
            <use>admin</use>
            <args>
                <module>MyTuxedo_OutOfStock</module>
                <frontName>OutOfStock</frontName>
            </args>
        </MyTuxedo_OutOfStock>
    </routers>
 </admin>
 </config> 
```

我实际上已经更改了配置范围，但是我仍然得到：

```
 2012-06-12T09:43:35+00:00 ERR (3): 
 exception 'Mage_Core_Exception' with message 'Invalid block type:       MyTuxedo_OutOfStock_Block_Adminhtml_Nostock' in /chroot/home/mytuxedo   /developer.mytuxedo.co.uk/html/app/Mage.php:550
 Stack trace:
 #0 /chroot/home/mytuxedo/developer.mytuxedo.co.uk/html/includes/src/__default.php(24835): Mage::throwException('Invalid block t...')
 #1 /chroot/home/mytuxedo/developer.mytuxedo.co.uk/html/includes/src/__default.php(24777): Mage_Core_Model_Layout->_getBlockInstance('OutOfStock/Admi...', Array)
 #2 /chroot/home/mytuxedo/developer.mytuxedo.co.uk/html/app/code/local/MyTuxedo/OutOfStock/controllers/Adminhtml/OutOfStockController.php(7): Mage_Core_Model_Layout->createBlock('OutOfStock/Admi...')
 #3 /chroot/home/mytuxedo/developer.mytuxedo.co.uk/html/includes/src/__default.php(12068): MyTuxedo_OutOfStock_Adminhtml_OutOfStockController->indexAction()
 #4 /chroot/home/mytuxedo/developer.mytuxedo.co.uk/html/includes/src/__default.php(16116): Mage_Core_Controller_Varien_Action->dispatch('index')
 #5 /chroot/home/mytuxedo/developer.mytuxedo.co.uk/html/includes/src/__default.php(15713): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
 #6 /chroot/home/mytuxedo/developer.mytuxedo.co.uk/html/includes/src/__default.php(17973): Mage_Core_Controller_Varien_Front->dispatch()
 #7 /chroot/home/mytuxedo/developer.mytuxedo.co.uk/html/app/Mage.php(596): Mage_Core_Model_App->run(Array)
 #8 /chroot/home/mytuxedo/developer.mytuxedo.co.uk/html/index.php(97): Mage::run('', 'store')
 #9 {main} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:12:02.623

想通了，没有注意到编译过程被打开了（不知道我为什么打开它？！）。- 浪费时间，对于那些找不到类的人，请确保在调试之前检查编译器！！！

# java - java.lang.ClassNotFoundException 在将 RIOT CMS 实现到 Spring Java Web 应用程序时

> ID：10979935
> 
> 赞同：0
> 
> 时间：2012-06-11T12:16:11.107
> 
> 标签：java, spring, content-management-system

我正在尝试使用 [http://www.riotfamily.org/docs/quickstart.html在我的 Spring-java Web 应用程序中实现 Riot CMS](http://www.riotfamily.org/docs/quickstart.html)

我得到了skeleton.zip和代码：

`wget http://riotfamily.org/setup.xml && ant -f setup.xml`

然后导入代码以在 eclipse 中实现相同...构建成功但 404 带有`java.lang.ClassNotFoundException`.

我的步骤有什么错误吗？

[编辑] 错误信息是：

```
 Error configuring application listener of class 
    org.springframework.web.context.ContextLoaderListener java.lang.ClassNotFoundException: 
    org.springframework.web.context.ContextLoaderListener at 
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:16‌​76) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:27:35.100

我认为您缺少`spring-web.jar`依赖项。这个 jar 包含您的应用程序抱怨的类。

# android - 在网页中嵌入 quicktime 播放器以在 android 中播放 rtsp 直播

> ID：10979938
> 
> 赞同：3
> 
> 时间：2012-06-11T12:16:25.893
> 
> 标签：android, quicktime

我有以下代码可以在网页本身的 quicktime 播放器中播放 rtsp 流，而无需打开外部视频播放器。

```
<OBJECT classid='clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B' width="320" height="240" codebase='http://www.apple.com/qtactivex/qtplugin.cab'>
        <param name='src' value="rtsp://184.72.239.149/vod/mp4:BigBuckBunny_115k.mov">
        <param name='autoplay' value="true">
        <param name='controller' value="false">
        <param name='loop' value="false">
        <EMBED src="rtsp://184.72.239.149/vod/mp4:BigBuckBunny_115k.mov" width="320" height="240" autoplay="true"
        controller="true" loop="false" bgcolor="#000000" pluginspage='http://www.apple.com/quicktime/download/'>
        </EMBED>
</OBJECT> 
```

这在桌面上运行良好，但在安卓设备上却不行。我只看到一个奇怪的图标并且没有设置播放器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T15:02:48.957

Android 设备可能有自己的原生播放器。因此，您只需要提供一个视频链接，该视频将自动打开并在本机播放器中播放视频。

# android - 通用文件浏览器的意图过滤器

> ID：10979939
> 
> 赞同：5
> 
> 时间：2012-06-11T12:16:38.297
> 
> 标签：android, intentfilter

我正在尝试将我的应用程序与扩展程序相关联。我已阅读[文档](http://developer.android.com/guide/topics/intents/intents-filters.html)和有关该问题的[一些](https://stackoverflow.com/questions/9518318/android-how-to-create-intent-filter-for-custom-file-extension-that-does-not-make) [问题](https://stackoverflow.com/questions/3760276/android-intent-filter-associate-app-with-file-extension)。但是主要的文件资源管理器（如 es 文件资源管理器、astro、Rhythm 软件的文件管理器）无法打开我的文件。

我的`manifest`文件：

```
<activity android:name="com.comapping.android.map.MapActivity" android:configChanges="orientation|keyboardHidden">
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.BROWSABLE" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:scheme="file" android:host="*" android:pathPattern=".*\\.comap" android:mimeType="*/*" />
    </intent-filter>
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.BROWSABLE" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:scheme="content" android:host="*" android:pathPattern=".*\\.comap" android:mimeType="*/*" />
    </intent-filter>
    <intent-filter>
        <action android:name="android.intent.action.SEARCH" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
    <meta-data android:name="android.app.searchable"
        android:resource="@xml/searchable" />
</activity>
```

如果我尝试使用下一个代码从我的应用程序中打开文件，一切正常（未显示选择器）：

```
String extension = "";
int dotIndex = downloadedFile.lastIndexOf('.');
if (dotIndex != -1) {
    extension = downloadedFile.substring(dotIndex + 1, downloadedFile.length());
}

// create an intent
Intent intent = new Intent(android.content.Intent.ACTION_VIEW);
Uri data = Uri.fromFile(new File(downloadedFile));
String type = MimeTypeMap.getSingleton().getMimeTypeFromExtension(extension);
if (type == null || type.length() == 0) {
    // if there is no acceptable mime type
    type = "application/octet-stream";
}
intent.setDataAndType(data, type);

// get the list of the activities which can open the file
List resolvers = context.getPackageManager().queryIntentActivities(intent, PackageManager.MATCH_DEFAULT_ONLY);
if (resolvers.isEmpty()) {
    (new AlertDialog.Builder(context)
            .setMessage(R.string.AttachmentUnknownFileType)
            .setNeutralButton(R.string.NeutralButtonText, null)
            .create()).show();
} else {
    context.startActivity(intent);
}
```

如果我尝试使用 OpenIntents 文件管理器打开它，一切正常 - 显示带有大量应用程序的长选择器和列表中的我的应用程序。

但是，如果我尝试使用 es 文件资源管理器或 Rhythm 文件资源管理器打开它 - 显示他们的自定义选择器（以文本/图像/视频/音频形式打开）。这不好。

如果我尝试用 Astro 打开它 - 它会打开 OpenIntent 的文件管理器。这也很糟糕。

有没有解决问题的办法？这种行为谁错了？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-04T23:05:38.523

这里的部分问题是人们包装共享意图的所有不同方式，例如，在 Android mime 标识符中解析为 text/plain 的文件。

我的方法是找出我想要的文件的 mime 类型。然后我将清单过滤器设置为这些类型。我使用两个过滤器。第一个只是过滤我想要的哑剧。第二个是第一个加计划的副本。

然后我通过像您所做的那样从应用程序发送共享来进行测试。当一个人不工作时，我会用烤面包来看看我为 STREAM 得到了什么，然后改变它以适应它。例如，如果我得到一个 OpenIntent STREAM，我必须删除

```
content://org.openintents.filemanager 
```

这给我留下了道路。大多数情况下，我只需要删除：

```
file:// 
```

但这总是一些事情，因为整个内容/Uri/Intent 方案是一个免费的集群whatsit。

之后。我只是偶然发现了这个：

```
Intent intent = getIntent();                
String name = intent.getData().getPath(); 
```

也许这对你有用。我很快就会自己尝试一下。

# c - C中的函数main可以返回一个指针吗？

> ID：10979942
> 
> 赞同：1
> 
> 时间：2012-06-11T12:16:49.073
> 
> 标签：c

如标题所示，主函数是否有可能返回一个指针？如果是，那么在哪里有用？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T12:19:19.717

只有返回类型 of`int`受到标准的祝福：

> ### 5.1.2.2.1 程序启动
> 
> 1 程序启动时调用的函数名为main。实现没有声明这个函数的原型。它应定义为返回类型为 int 且不带参数：
> 
> ```
> int main(void) { /* ... */ } 
> ```
> 
> 或者带有两个参数（这里称为 argc 和 argv，尽管可以使用任何名称，因为它们是声明它们的函数的局部变量）：
> 
> ```
> int main(int argc, char *argv[]) { /* ... */ } 
> ```
> 
> 或等价物；10) 或以其他一些实现定义的方式。
> 
> * * *
> 
> [C11 草案，2011 年 4 月 12 日]

其他一切都取决于您的编译器，因此不再是 C 问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T12:19:10.430

否。在标准 C 中`main()`返回一个`int`。此返回值的解释是周围运行时环境的问题。如果您确切地知道自己在做什么，在某种特殊情况下，您知道环境将以某种方式解释值，那么您可以将指针强制转换为 int。但这很讨厌。

并且请注意，在程序退出后，指向动态分配内存的指针（可能）毫无意义！只有返回指向固定地址的指针才有意义，例如某些嵌入式环境中的硬件寄存器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-11T12:30:51.247

完成phresnel的回答，并回答它是否有用：因为每个进程都有自己的地址空间，即使你`main()`返回一个整数值作为地址，因为返回的指针只是一致的，所以有什么意义到刚刚退出的进程的地址空间...

# excel - excel工作表中只显示一个选择查询

> ID：10979947
> 
> 赞同：1
> 
> 时间：2012-06-11T12:17:16.610
> 
> 标签：excel, sql-server-2005, excel-2007

我在 Excel 2007 中调用了一个存储过程（SQL Server 2005）。这个 SP 有两个选择语句，但是在 excel 工作表中，显示了第一个语句的结果。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:39:51.917

如果您的存储过程有两个 select 语句，您将返回两个记录集。确保将两者都写入工作表。您还应该验证两个 select 语句是否都返回行。

**注意：**如果您想使用 VBA 尝试此操作，[专业 Excel 开发](https://rads.stackoverflow.com/amzn/click/com/0321508793)一书的第 19 章专门介绍与 SQL Server 交互。本章将引导您连接到数据库、执行存储过程以及将结果写回您的工作簿。提供了您需要的所有代码，以及对其功能的良好解释。如果您是 VBA 新手，那么这本书就在您应该选择的短名单上。查看[好书，](https://stackoverflow.com/a/10777674/138938)为他人学习 Excel VBA。

下面是从存储过程返回 5 个记录集的 sub 的一部分示例：

```
 If Not rsData.EOF Then

        ' The first recordset contains prices
        Sheet39.Range("a1").CopyFromRecordset rsData
        Set rsData = rsData.NextRecordset

        ' The second recordset contains products
        Sheet39.Range("a20").CopyFromRecordset rsData
        Set rsData = rsData.NextRecordset

        ' The third recordset contains stores
        Sheet39.Range("a35").CopyFromRecordset rsData
        Set rsData = rsData.NextRecordset

        ' The fourth recordset contains payment types
        Sheet39.Range("j1").CopyFromRecordset rsData
        Set rsData = rsData.NextRecordset

        ' The fifth recordset contains customers
        Sheet39.Range("j8").CopyFromRecordset rsData
        Set rsData = rsData.NextRecordset

    Else
        MsgBox "No data located.", vbCritical, "Error!"
    End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T05:04:18.763

我使用 VBA 用结果集填充工作表，这解决了问题。我还必须编写代码来遍历所有结果集。

# android - 获取当前的蓝牙发现超时

> ID：10979951
> 
> 赞同：1
> 
> 时间：2012-06-11T12:17:28.233
> 
> 标签：android, bluetooth

我正在制作一个需要用户的蓝牙可发现性/可见性超时为“永不超时”的应用程序。

我使用以下代码要求用户更改当前设置。

```
Intent discoverableIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);
discoverableIntent.putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, 0);           
startActivity(discoverableIntent); 
```

但是，如果蓝牙可发现性已经开启，我不想打扰用户。

有没有办法获得设备当前的可发现性超时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:26:07.590

您可以使用以下内容：

```
BluetoothAdapter ba = BluetoothAdapter.getDefaultAdapter();
if (ba.getScanMode() != BluetoothAdapter.SCAN_MODE_CONNECTABLE_DISCOVERABLE)
{
    //Launch the intent to set timeout
} 
```

您还应该确保适配器已打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-26T16:01:06.343

有一个[隐藏`getDiscoverableTimeout`](https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/bluetooth/BluetoothAdapter.java#1519)函数`BluetoothAdapter`返回秒数作为超时。您可以通过反射访问它：

```
try {
    java.lang.reflect.Method method;
    method = bluetoothAdapter.getClass().getMethod("getDiscoverableTimeout");
    int value = (int) method.invoke(bluetoothAdapter);
    // ... use the value
}
catch (Exception ex) {
    // ... error handling
} 
```

请注意，这是一项隐藏功能，因此有一天可能会被禁止或删除。

# android - 后退按钮上未存储/记住 Android 按钮状态

> ID：10979953
> 
> 赞同：2
> 
> 时间：2012-06-11T12:17:31.153
> 
> 标签：android, button, state

我对 Android 的 Fragment 状态有疑问。我有一个片段，里面有 3 个搜索栏。在片段的底部有一个按钮，您可以使用该按钮进入下一个片段（使用片段事务）。现在，第一次创建片段时，这个“下一步”按钮被禁用。我希望用户在继续下一个片段之前先使用 3 个搜索栏。这一切都很好。但是，在某些情况下，用户可以通过使用后退按钮返回到上一个问题/片段。不幸的是，当我点击后退按钮时，“下一步”按钮的状态再次设置为禁用。对我来说这很奇怪，因为据我所知 Android 应该自动存储视图的状态。事实上：Android 确实存储了搜索栏的状态（位置）。

为什么 Android 会存储搜索栏的状态而不存储按钮的状态？该按钮在 XML 中被禁用，所以我不会在 onCreate 或类似的东西中以编程方式更改它。

任何人都知道为什么 Android 不记得按钮的状态（启用/禁用）？这几天让我发疯...

*顺便说一句：我确实尝试使用 onSaveInstanceState 方法并将按钮的状态存储在包中，但是甚至从未调用过 onSaveInstanceState() 方法（因此包在 onCreate 中始终为空！）*

**编辑：**

我的一些代码。首先，我启用按钮的方式（工作正常）：

```
public void onStartTrackingTouch(SeekBar seekBar) {
    seekBar.setTag(true);
}

public void onStopTrackingTouch(SeekBar seekBar) {      
    if (happyBar.getTag().equals(true) && relaxedBar.getTag().equals(true) && awakeBar.getTag().equals(true)) {
        nextButton.setEnabled(true);
    }
} 
```

这就是我过渡到下一个片段的方式：

```
FragmentTransaction ft = getFragmentManager().beginTransaction();
ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
ft.replace(R.id.fragmentcontainer, fragment);
ft.addToBackStack(null);
ft.commit(); 
```

按钮的初始状态在 XML 中设置为 enabled=false。我不得不说，根据 Eclipse，按钮的启用 XML 属性已被弃用，但我在互联网上读到这是一个错误，因为它根本没有被弃用。这就是我继续使用它的原因。

希望这可以帮助！

# android - 如何动态添加组件

> ID：10979958
> 
> 赞同：0
> 
> 时间：2012-06-11T12:17:53.290
> 
> 标签：android

我必须显示从数据库中获取的图片网格。根据用户的屏幕尺寸，我想显示更多或更少的图片。

1) 如何根据数据库中的图片数量动态改变图片显示的数量？

1a) 哪种布局合适？

2）如果图片的数量超过了单个屏幕的容量，显然它必须滚动。我如何定义页面明智滚动而不是一点一点滚动，这意味着每次滚动后，下一页都会有所有新成员（就像我们在 Android 中滚动应用程序一样）

目前，我有一个用于主 Activity 的 TabHost 布局和一个用于网格类型显示 Activity 的 LinearLayout。

我使用的是 API 版本 10，因此 GridLayout 不可用。

任何建议都会非常有帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:30:06.430

`1) How to change the number of pictures shown dynamically according to the number of pics from the database?`

就这部分而言，根据数据库中可用图片的数量使用 for 循环，您唯一需要的是知道数据库中存在的元素数量，然后像我在`numberOfElements`这里使用的那样使用它

```
 for(int i = 1; i <= numberOfElements ; i++) {

    LinearLayout lHor = new LinearLayout(this);
    lHor.setOrientation(LinearLayout.HORIZONTAL);
    //lHor.setBackgroundColor(Color.rgb(238,    233,    191));

    // Text View
    TextView tv = new TextView(this);
    tv.setText("FAULT "+i);
    tv.setTextSize(20);
    // tv.setGravity(Gravity.CENTER);
    tv.setTextColor(Color.rgb(255,255,255));
    tv.setPadding(12, 12, 12, 12);
    tv.setId(i);
    tv.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 1.0f));
    lHor.addView(tv);       // Adding the TextView to the LinearLayout

    //CheckBox
    CheckBox cb = new CheckBox(this);
    cb.setId(i);
    cb.setTag("CheckBox");
    cb.setClickable(false);
    //  cb.setChecked(true);
    cb.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 1.0f));
    cb.setGravity(Gravity.CENTER);
    checkBoxes.add(cb);
    lHor.addView(cb);
    l.addView(lHor);

} 
```

您可能已经知道如何获取数据库中的元素数量，如果没有，我使用了这个

```
 // Method 3: Getting total number of entries present in the database
    public int getTotalNumberOfEntries() {
        String[] columns = new String[]{ KEY_ROWID, KEY_TYPE, KEY_DATE};

        Cursor c = myDataBase.query(DATABASE_TABLE, columns, null, null, null, null, null);
        int count = 0;

        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
                count++;
            }
        c.close();
        return count;
    } 
```

========== 编辑 =================

您可以在活动的 onCreate() 方法中调用此方法

```
private void setDynamicContentViewOfThisPage() {

// Defining the Scroll View and the LinearLayout
ScrollView sv = new ScrollView(this);
LinearLayout l = new LinearLayout(this);
l.setOrientation(LinearLayout.VERTICAL);
sv.addView(l);

// You will need to collect data from the previous Intent :-)

    TextView introduction = new TextView(this);
    introduction.setText("Set Text Here");
    introduction.setGravity(Gravity.LEFT);
    introduction.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
    l.addView(introduction);

    Button instructionsButton = new Button(this);
    instructionsButton.setTag("Some Button");
    instructionsButton.setId(987654321);    // Random ID set to avoid conflicts :-D
    instructionsButton.setText("Click to read all the instructions");
    instructionsButton.setGravity(Gravity.CENTER);
    instructionsButton.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
    l.addView(instructionsButton);

    instructionsButton.setOnClickListener(this);

                     // Creates a line
                        TableLayout tl1 = new TableLayout(this);
                            View v1 = new View(this);
                            v1.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.FILL_PARENT, 1));
                            v1.setBackgroundColor(Color.rgb(51, 51, 51));
                            tl1.addView(v1);
                        l.addView(tl1);

                    // Version 2 (Creating Different Layouts)        
                            for(int i = 1; i <= 3 ; i++) {
                                // Creates a line
                                TableLayout tl2 = new TableLayout(this);
                                    View v2 = new View(this);
                                    v2.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.FILL_PARENT, 1));
                                    v2.setBackgroundColor(Color.rgb(51, 51, 51));
                                    tl2.addView(v2);
                                l.addView(tl2);

                                LinearLayout lHor = new LinearLayout(this);
                                lHor.setOrientation(LinearLayout.HORIZONTAL);
                                //lHor.setBackgroundColor(Color.rgb(238,    233,    191));

                                    LinearLayout lVer1 = new LinearLayout(this);
                                    lVer1.setOrientation(LinearLayout.VERTICAL);
                                    lVer1.setGravity(Gravity.RIGHT);
                                    lVer1.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 1.0f));

                                        // Text View
                                        TextView tv = new TextView(this);
                                        tv.setText("TV "+i);
                                        tv.setTextSize(20);
//                                          tv.setGravity(Gravity.CENTER);
                                        tv.setTextColor(Color.rgb(255,255,255));
                                        tv.setPadding(12, 12, 12, 12);
                                        tv.setId(i);
//                                          tv.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 1.0f));
                                        lVer1.addView(tv);      // Adding the TextView to the LinearLayout

                                        //CheckBox
                                        CheckBox cb = new CheckBox(this);
                                        cb.setClickable(false);
//                                          cb.setChecked(true);
                                        cb.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 1.0f));
                                        cb.setGravity(Gravity.CENTER);
                                        lVer1.addView(cb);

                                 lHor.addView(lVer1);

                                    LinearLayout lVer = new LinearLayout(this);
                                    lVer.setOrientation(LinearLayout.VERTICAL);
                                    lVer.setGravity(Gravity.RIGHT);
                                    lVer.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 1.0f));

                                        Button showsomeOtherButton = new Button(this);
                                        showsomeOtherButton.setTag("showSomeButton");
                                        showsomeOtherButton.setId(i);
                                        showsomeOtherButton.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 1.0f));
                                        showsomeOtherButton.setText("View Image");
//                                          showsomeOtherButton.setEnabled(false);
                                        lVer.addView(showsomeOtherButton);

                                        Button someOtherDataButton = new Button(this);
                                        someOtherDataButton.setId(i);
                                        someOtherDataButton.setTag("someOtherButton");
                                        someOtherDataButton.setText("Do this action " + i);
//                                          someOtherDataButton.setEnabled(false);
                                        someOtherDataButton.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 1.0f));
                                        lVer.addView(someOtherDataButton);

                                        showsomeOtherButton.setOnClickListener(this);
                                        someOtherDataButton.setOnClickListener(this);

                                lHor.addView(lVer);
                                l.addView(lHor);

                                // Creates a line
                                TableLayout tl3 = new TableLayout(this);
                                    View v3 = new View(this);
                                    v3.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.FILL_PARENT, 1));
                                    v3.setBackgroundColor(Color.rgb(51, 51, 51));
                                    tl3.addView(v3);
                                l.addView(tl3);

                               }

                            // Creates a line
                            TableLayout tl3 = new TableLayout(this);
                                View v3 = new View(this);
                                v3.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.FILL_PARENT, 1));
                                v3.setBackgroundColor(Color.rgb(51, 51, 51));
                                tl3.addView(v3);
                            l.addView(tl3);

        Button nextPageButton = new Button(this);
        nextPageButton.setTag("goToNExtPageButton");
        nextPageButton.setId(98765432);
        nextPageButton.setText("Go To Next Page");
        nextPageButton.setGravity(Gravity.CENTER);
        //nextPageButton.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        LinearLayout.LayoutParams layoutParams=new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        layoutParams.gravity=Gravity.CENTER;
        nextPageButton.setLayoutParams(layoutParams);

        l.addView(nextPageButton);

// Set the content View to this
    this.setContentView(sv);    
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T10:23:57.753

1.  我通过使用 LinearLayout 解决了这个问题。我使用以下方法动态添加视图：

    ```
    LinearLayout parentLayout = (LinearLayout) findViewById(R.id.parentLayout);
    TextView ChildView = new TextView(getApplicationContext());
    ChildView.setText("I am the child");
    parentLayout.addView(ChildView); 
    ```

    我按照 Sumit 的建议循环到可用的视图。

2.  我不得不将整个活动的布局封装到一个 ScrollView 中，它弥补了动态布局中不可见的子项

# android - 如何将图像添加到Android应用程序？我一直到 Imageview 课，但无法进一步了解

> ID：10979959
> 
> 赞同：-1
> 
> 时间：2012-06-11T12:17:55.080
> 
> 标签：android, imageview, uri

我对 Android 开发非常陌生。我正在尝试通过代码将图像添加到我的 Android 应用程序中。我找到[了这个](http://www.youtube.com/watch?v=nC_v0oKsnvU)，但它显示了一些拖放方式来做到这一点。
我想通过在我的`onCreate`方法中编码来做到这一点。
我设法做到了：

```
ImageView iv = new ImageView(this); 
```

但无法弄清楚如何设置 image-uri。
我尝试了以下方法：

```
iv.setImageURI(@"C:\Users\SONY\Downloads\slide.butcher.home.jpg"); 
```

有和没有，`@`但我认为我需要传递一个 URI。

我试图创建一个对象`android.net.Uri`，但似乎无法实例化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:25:11.483

查看您尝试过的 uri 是错误的，它位于您的**本地文件系统**上。而是尝试在 eclipse的**DDMS**的帮助下将图像推送到设备的 sdcard 上。

假设您已将其推**送到 /sdcard/your_image.jpg**。然后在您的代码中将您的图像路径设置为

> imageView.setImageUri(Uri.parse("/sdcard/your_image.jpg"));

我相信你会得到它...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:32:02.067

> iv.setImageURI(@"C:\Users\SONY\Downloads\slide.butcher.home.jpg");

您正在尝试传递存储在您计算机上的图像的 Uri！！！！

将该文件复制到您的设备 SD 卡上。假设您将其复制到`/sdcard/home.jpg`

然后使用下面的代码在 ImageView 中显示它。

```
imageView.setImageUri(Uri.parse("/sdcard/home.jpg")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T12:23:04.840

ImageView iv = (ImageView)findViewById(v); iv.setImageResource(R.drawable.image);

# javascript - 防止函数被过快触发

> ID：10979961
> 
> 赞同：2
> 
> 时间：2012-06-11T12:18:02.547
> 
> 标签：javascript, jquery

我有一个功能。它是由脚本中的许多其他函数触发的。有时非常迅速，可能几乎同时

如何防止它在短时间内过快触发？通过设置某种延迟或计时器？我想最小化函数正在进行的数据库调用

但是如果不需要，函数应该没有延迟。含义：第一次调用=没有延迟。所有其他呼叫 = 仅在先前呼叫少于 x 秒前时才延迟。如果延迟设置为 5 秒，如果上一次调用是在 4 秒前进行的，该函数应该只等待 1 秒。希望你明白我的意思；）

```
function checkusers() {

    $.ajax({
        url: '/checkusers_in_db.php',
        type: 'POST'
    });

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T15:10:38.833

我构建了自己的调整大小函数：

*   通过 Paul Irish使用[它](http://www.paulirish.com/2009/throttled-smartresize-jquery-event-handler/)来防止函数被过快触发
*   [可以使用这个](http://benalman.com/projects/jquery-resize-plugin/)bu Ben Alman绑定到所有选择器（不仅仅是 $(window)）

只需导入此代码：

```
/*
 * jQuery resize event - v1.1 - 3/14/2010
 * http://benalman.com/projects/jquery-resize-plugin/
 *
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,sr){

    // debouncing function from John Hann
    // http://unscriptable.com/index.php/2009/03/20/debouncing-javascript-methods/
    var debounce = function (func, threshold, execAsap) {
        var timeout;

        return function debounced () {
            var obj = this, args = arguments;
            function delayed () {
                if (!execAsap)
                    func.apply(obj, args);
                timeout = null;
            };

            if (timeout)
                clearTimeout(timeout);
            else if (execAsap)
                func.apply(obj, args);

            timeout = setTimeout(delayed, threshold || 500);
        };
    }
    // resize
    jQuery.fn[sr] = function(fn){  return fn ? this.bind('resize', debounce(fn)) : this.trigger(sr); };

})(jQuery,'resize'); 
```

然后导入 Ben Alman resize() 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:24:29.030

Underscore.js 有方法`debounce`，在这里可能会有所帮助

> debounce_.debounce(function, wait, [immediate]) 创建并返回传递函数的新去抖动版本，该版本将推迟其执行，直到自上次调用以来等待毫秒过去后。对于实现仅在输入停止到达后才应发生的行为很有用。例如：渲染 Markdown 注释的预览，在窗口停止调整大小后重新计算布局等等。

[http://underscorejs.org/#debounce](http://underscorejs.org/#debounce)

像这样使用：

```
checkusers_with_delay = _.debounce(checkusers, how_much_delay); 
```

然后`checkusers_with_delay`在所有其他众多功能中使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T12:24:32.813

您可以考虑 COMET 模式（长轮询）

重构 checkusers，使其查看您的用户缓存而不是通过 AJAX 调用。作为单独的一段代码，对 PHP 页面有一个 AJAX 调用，返回时会刷新您的用户缓存。

秘诀是 PHP 可以“保留”HTTP 请求，直到它有一些/足够的数据发送回您的页面。然后在收到响应后，您的页面会发出另一个 AJAX 请求，冲洗并重复。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-11T12:24:52.233

如果在过去 30 秒内没有运行，这将触发 ajax。

```
var last_checkuser_time = new Date();  

function checkusers() {

    var now = new Date();
    var timeout = now.setSeconds(now.getSeconds() - 30);
    if (last_checkuser_time < timeout) {

        $.ajax({
            url: '/checkusers_in_db.php',
            type: 'POST'
        });
        last_checkuser_time = new Date();
    }

}; 
```

# python - Python在二维数据上应用网格，在树中保存非空网格单元

> ID：10979966
> 
> 赞同：0
> 
> 时间：2012-06-11T12:18:22.127
> 
> 标签：python, tree

我有一个 2D 中约 500 个点的数据集，给定坐标（也意味着我可以用单个整数引用每个点）（x，y）在 0 到 10 之间。现在我正在尝试将该区域划分为常规通过应用网格来制作方形单元格。请注意，此过程正在算法中重复，并且在某些时候将有 >>>500 个正方形单元格。

我想要实现的目标：遍历所有点，为每个点找到该点所在的方形单元格并保存此信息。
几步之后：再次遍历所有点，为每个点识别其单元格和该单元格的相邻单元格。获取这些单元格的所有点并将它们添加到例如列表中，以供进一步使用。

我的思考过程：由于会有很多空单元格，我不想为它们浪费内存，所以使用树。
示例：在 cell_39_41 和 cell_39_42 中是一个点。第一级：具有子节点
39 的根节点 第二级：具有子节点 41,42 的 39 个节点
第三级：具有子点 1 的 41 个节点和具有子点 2 的 42 个节点
第四级：代表实际点的节点
如果我在 cell_39_41 或 cell_39_42 中找到更多点，他们将被添加为各自第三级节点的子级。

```
class Node(object):

def __init__(self, data):
    self.data = data
    self.children = []

def add_child(self, obj):
    self.children.append(obj) 
```

我遗漏了一个不相关的方法来返回单元格中的点。

此实现的问题：
1.如果我添加第二或第三级节点，我将不得不引用它才能添加子节点或在某个单元格及其相邻单元格中查找点。这意味着我必须进行大量昂贵的线性搜索，因为子列表没有排序。
2.我将添加数百个节点，但我需要能够通过唯一名称引用它们。这可能是一个很大的个人失败，但我想不出一种在循环中生成此类名称的方法。

所以我基本上很确定我的思维过程中有一些错误，或者树的使用实现可能不合适。我已经阅读了很多 b-trees 或类似的实现，但由于这个问题仅限于 2D，我觉得它们太多了，不适合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:45:43.713

这个怎么样 ...

```
def add_point(data_dict, row, column, point):
    # modifies source of data_dict in place, since dictionaries are mutable
    data_dict.setdefault(row, {}).setdefault(column, []).append(point)

def get_table(data):
    out_dict = {}
    for row, column, point in data:
        add_point(out_dict, row, column, point)
    return out_dict

if __name__ == "__main__":
    data = [(38, 41, 38411), (39, 41, 39411), (39, 42, 39421)]
    points = get_table(data)    
    print points    
    add_point(points, 39, 42, 39422)    
    print points 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T12:31:21.283

使用 dict 的 dict 作为树：

```
tree = {
    '_data': 123,
    'node1': {
        '_data': 456,
        'node11': {
           'node111': {}
        },
    'node2': {
    }
} 
```

在字典中搜索很快！

```
tree['node1']['node12']['node123']['_data'] = 123 # adding 
```

唯一名称：

```
shortcuts = {}
shortcuts['name'] = tree['node1']['node11']['node111']
print shortcuts['name']['_data'] 
```

# java - 声纳在使用 maven 进行分析时显示错误消息

> ID：10979967
> 
> 赞同：2
> 
> 时间：2012-06-11T12:18:27.360
> 
> 标签：java, php, security, static-analysis, sonarqube

我正在使用带有 maven 的声纳来分析项目（php 和 java）。最近在扫描一些项目时，Sonar 显示这样的错误消息

```
+ Error stacktraces are turned on.
[INFO] Scanning for projects...
[INFO] Searching repository for plugin with prefix: 'sonar'.
[INFO] Ignoring available plugin update: 2.0 as it requires Maven version 3.0
[INFO] Ignoring available plugin update: 2.0-beta-2 as it requires Maven version 3.0
[INFO] Ignoring available plugin update: 2.0-beta-1 as it requires Maven version 3.0
[INFO] ------------------------------------------------------------------------
[INFO] Building java
[INFO]    task-segment: [sonar:sonar] (aggregator-style)
[INFO] ------------------------------------------------------------------------
[INFO] [sonar:sonar {execution: default-cli}]
[INFO] Sonar host: http://localhost:9000
[INFO] Sonar version: 2.14
[INFO] Execute: org.codehaus.sonar:sonar-maven-plugin:2.14:sonar
[INFO] [sonar:sonar {execution: default-sonar}]
[WARN] [17:40:35.282] Derby database should be used for evaluation purpose only
[INFO] [17:40:35.298] Create JDBC datasource
[INFO] [17:40:36.757] Initializing Hibernate
[INFO] [17:40:41.233] -------------  Analyzing java
[INFO] [17:40:42.858] Selected quality profile : [name=Sonar way,language=java]
[INFO] [17:40:42.969] Configure maven plugins...
[INFO] [17:40:43.248] Compare to previous analysis (2012-06-06)
[INFO] [17:40:43.309] Compare over 5 days (2012-06-06, analysis of 2012-06-06 16:36:01.996)
[INFO] [17:40:43.336] Compare over 30 days (2012-05-12, analysis of 2012-05-30 17:05:04.248)
[INFO] [17:40:43.455] Initializer FindbugsMavenInitializer...
[INFO] [17:40:43.466] Initializer FindbugsMavenInitializer done: 11 ms
[INFO] [17:40:43.466] Initializer ProjectFileSystemLogger...
[INFO] [17:40:43.471] Source directories:
[INFO] [17:40:43.471]   /home/gamer/NetBeansProjects/QE
[INFO] [17:40:43.473] Initializer ProjectFileSystemLogger done: 7 ms
[INFO] [17:40:43.473] Initializer MavenInitializer...
[INFO] [17:40:43.476] Java source version: 1.5
[INFO] [17:40:43.476] Java target version: 1.5
[INFO] [17:40:43.476] Source encoding: null
[INFO] [17:40:43.476] Initializer MavenInitializer done: 3 ms
[INFO] [17:40:43.514] Sensor JavaSourceImporter...
[WARN] [17:40:43.552] SQL Error: -1, SQLState: 23505
[ERROR] [17:40:43.552] The statement was aborted because it would have caused a duplicate key value in a unique or primary key constraint or unique index identified by 'SQL110927104436930' defined on 'PROJECTS'.
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Can not execute Sonar

Embedded error: Unable to read and import the source file : '/home/gamer/NetBeansProjects/QE/src/QEmain/QE_main.java' with the charset : 'UTF-8'.
The statement was aborted because it would have caused a duplicate key value in a unique or primary key constraint or unique index identified by 'SQL110927104436930' defined on 'PROJECTS'.
[INFO] ------------------------------------------------------------------------
[INFO] Trace
org.apache.maven.lifecycle.LifecycleExecutionException: Can not execute Sonar
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:719)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneGoal(DefaultLifecycleExecutor.java:569)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:539)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:284)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
    at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
    at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
    at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
    at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: org.apache.maven.plugin.MojoExecutionException: Can not execute Sonar
    at org.codehaus.mojo.sonar.Bootstraper.executeMojo(Bootstraper.java:103)
    at org.codehaus.mojo.sonar.Bootstraper.start(Bootstraper.java:79)
    at org.codehaus.mojo.sonar.SonarMojo.execute(SonarMojo.java:88)
    at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
    ... 17 more
Caused by: org.sonar.api.utils.SonarException: Unable to read and import the source file : '/home/gamer/NetBeansProjects/QE/src/QEmain/QE_main.java' with the charset : 'UTF-8'.
    at org.sonar.plugins.squid.JavaSourceImporter.importSource(JavaSourceImporter.java:87)
    at org.sonar.plugins.squid.JavaSourceImporter.parseDirs(JavaSourceImporter.java:73)
    at org.sonar.plugins.squid.JavaSourceImporter.analyse(JavaSourceImporter.java:66)
    at org.sonar.plugins.squid.JavaSourceImporter.analyse(JavaSourceImporter.java:62)
    at org.sonar.batch.phases.SensorsExecutor.execute(SensorsExecutor.java:64)
    at org.sonar.batch.phases.Phases.execute(Phases.java:93)
    at org.sonar.batch.bootstrap.ProjectModule.doStart(ProjectModule.java:143)
    at org.sonar.batch.bootstrap.Module.start(Module.java:83)
    at org.sonar.batch.bootstrap.BatchModule.analyze(BatchModule.java:115)
    at org.sonar.batch.bootstrap.BatchModule.doStart(BatchModule.java:105)
    at org.sonar.batch.bootstrap.Module.start(Module.java:83)
    at org.sonar.batch.bootstrap.BootstrapModule.doStart(BootstrapModule.java:102)
    at org.sonar.batch.bootstrap.Module.start(Module.java:83)
    at org.sonar.batch.bootstrapper.Batch.startBatch(Batch.java:71)
    at org.sonar.batch.bootstrapper.Batch.execute(Batch.java:58)
    at org.sonar.maven.SonarMojo.execute(SonarMojo.java:151)
    at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)
    at org.codehaus.mojo.sonar.Bootstraper.executeMojo(Bootstraper.java:98)
    ... 21 more
Caused by: javax.persistence.PersistenceException: Unable to persist : org.sonar.api.database.model.ResourceModel@91a0c3[id=<null>,key=qb:artid:src.QEmain,scope=DIR,qualifier=PAC,name=src.QEmain,longName=src.QEmain,lang=java,enabled=true,rootId=1095,copyResourceId=<null>,personId=<null>]
    at org.sonar.jpa.session.JpaDatabaseSession.internalSave(JpaDatabaseSession.java:119)
    at org.sonar.jpa.session.JpaDatabaseSession.save(JpaDatabaseSession.java:89)
    at org.sonar.batch.index.DefaultResourcePersister.persistFileOrDirectory(DefaultResourcePersister.java:184)
    at org.sonar.batch.index.DefaultResourcePersister.persist(DefaultResourcePersister.java:132)
    at org.sonar.batch.index.DefaultResourcePersister.saveResource(DefaultResourcePersister.java:115)
    at org.sonar.batch.index.DefaultPersistenceManager.saveResource(DefaultPersistenceManager.java:72)
    at org.sonar.batch.index.DefaultIndex.doIndex(DefaultIndex.java:513)
    at org.sonar.batch.index.DefaultIndex.doIndex(DefaultIndex.java:479)
    at org.sonar.batch.index.DefaultIndex.doIndex(DefaultIndex.java:477)
    at org.sonar.batch.index.DefaultIndex.index(DefaultIndex.java:471)
    at org.sonar.batch.DefaultSensorContext.index(DefaultSensorContext.java:54)
    at org.sonar.plugins.squid.JavaSourceImporter.importSource(JavaSourceImporter.java:79)
    ... 38 more
Caused by: javax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: could not insert: [org.sonar.api.database.model.ResourceModel]
    at org.hibernate.ejb.AbstractEntityManagerImpl.throwPersistenceException(AbstractEntityManagerImpl.java:614)
    at org.hibernate.ejb.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:226)
    at org.sonar.jpa.session.JpaDatabaseSession.internalSave(JpaDatabaseSession.java:113)
    ... 49 more
Caused by: org.hibernate.exception.ConstraintViolationException: could not insert: [org.sonar.api.database.model.ResourceModel]
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:94)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.id.insert.AbstractSelectingDelegate.performInsert(AbstractSelectingDelegate.java:64)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2176)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2656)
    at org.hibernate.action.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:71)
    at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:279)
    at org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:321)
    at org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:204)
    at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:130)
    at org.hibernate.ejb.event.EJB3PersistEventListener.saveWithGeneratedId(EJB3PersistEventListener.java:49)
    at org.hibernate.event.def.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:154)
    at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:110)
    at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:61)
    at org.hibernate.impl.SessionImpl.firePersist(SessionImpl.java:646)
    at org.hibernate.impl.SessionImpl.persist(SessionImpl.java:620)
    at org.hibernate.impl.SessionImpl.persist(SessionImpl.java:624)
    at org.hibernate.ejb.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:220)
    ... 50 more
Caused by: java.sql.SQLIntegrityConstraintViolationException: The statement was aborted because it would have caused a duplicate key value in a unique or primary key constraint or unique index identified by 'SQL110927104436930' defined on 'PROJECTS'.
    at org.apache.derby.client.am.SQLExceptionFactory40.getSQLException(Unknown Source)
    at org.apache.derby.client.am.SqlException.getSQLException(Unknown Source)
    at org.apache.derby.client.am.PreparedStatement.executeUpdate(Unknown Source)
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)
    at org.hibernate.id.insert.AbstractSelectingDelegate.performInsert(AbstractSelectingDelegate.java:57)
    ... 65 more
Caused by: org.apache.derby.client.am.SqlException: The statement was aborted because it would have caused a duplicate key value in a unique or primary key constraint or unique index identified by 'SQL110927104436930' defined on 'PROJECTS'.
    at org.apache.derby.client.am.Statement.completeExecute(Unknown Source)
    at org.apache.derby.client.net.NetStatementReply.parseEXCSQLSTTreply(Unknown Source)
    at org.apache.derby.client.net.NetStatementReply.readExecute(Unknown Source)
    at org.apache.derby.client.net.StatementReply.readExecute(Unknown Source)
    at org.apache.derby.client.net.NetPreparedStatement.readExecute_(Unknown Source)
    at org.apache.derby.client.am.PreparedStatement.readExecute(Unknown Source)
    at org.apache.derby.client.am.PreparedStatement.flowExecute(Unknown Source)
    at org.apache.derby.client.am.PreparedStatement.executeUpdateX(Unknown Source)
    ... 69 more
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 13 seconds
[INFO] Finished at: Mon Jun 11 17:40:43 IST 2012
[INFO] Final Memory: 22M/178M
[INFO] ------------------------------------------------------------------------ 
```

有人可以帮我理解这个错误信息吗？我该如何纠正这个错误？谷歌没有返回任何结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:57:56.610

您的问题与项目的配置有关。该消息具有误导性（[Sonar 3.0 给出了更清晰的消息](http://jira.codehaus.org/browse/SONAR-3315)）。此问题的根本原因是 Sonar 尝试创建 2 个具有相同键的资源：“qb:artid:src.QEmain”。所以这可能意味着您有多个具有相同“src/QEmain”文件夹的源目录。

# spring - 手动向resources.groovy注册AMQP/RabbitMQ消息监听器？

> ID：10979971
> 
> 赞同：0
> 
> 时间：2012-06-11T12:18:52.163
> 
> 标签：spring, grails, rabbitmq

在使用 RabbitMQ 插件时，我似乎一直遇到麻烦，所以我想回退到使用 Spring RabbitMQ 处理它。我正在寻找一种方法来将消息侦听器注册到我的 grails 应用程序以及如何通过 resources.groovy 进行配置。关于如何实现这一目标的任何指示或示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T22:43:20.267

这是一篇关于使用 spring 和 rabbitmq 的很好的博客文章。您将不想使用云标签。

[http://support.cloudfoundry.com/entries/20322602-getting-started-with-the-rabbitmq-service-from-a-spring-application](http://support.cloudfoundry.com/entries/20322602-getting-started-with-the-rabbitmq-service-from-a-spring-application)

这是 spring rabbitmq 的源代码库

[https://github.com/momania/spring-rabbitmq](https://github.com/momania/spring-rabbitmq)

[https://github.com/momania/spring-rabbitmq/blob/master/src/test/resources/spring-examples.xml](https://github.com/momania/spring-rabbitmq/blob/master/src/test/resources/spring-examples.xml)

如果添加 grails-app/conf/spring/resources.xml 文件，则可以使用基于 xml 的 spring beans 而不是 groovy。对你来说可能更容易。

也看看

[Spring 与 RabbitMQ 的集成](https://stackoverflow.com/questions/2878526/spring-integration-with-rabbitmq)

# java - 需要防止 Chrome 浏览器上出现“此页面包含不安全内容”消息？

> ID：10979976
> 
> 赞同：3
> 
> 时间：2012-06-11T12:19:14.413
> 
> 标签：java, javascript, jquery, security

> **可能重复：**
> [如何使用 SSL 使我的网站有效？](https://stackoverflow.com/questions/10756940/how-to-make-my-site-valid-using-ssl)

一旦我的门户网站登陆主页，“此页面包含不安全的内容”消息仅出现在 Chrome 浏览器上。该站点已启用 SSL，并且没有证书配置问题。在 jsp 页面中包含一些使用 URL 的 javascript 文件，例如[http://www.site.com/js/script.js](http://www.site.com/js/script.js)。这些不是启用 SSL 的站点。现在，我无法在启用 SSL 的站点上托管这些 JS 文件，因为它超出了我的控制范围。我无权访问那些 JS 文件。客户说我们需要解决这个问题。有人可以建议应该采用什么方法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T12:21:37.070

我建议您将 JS 文件复制到您的安全服务器，以便它们可以安全地托管。

如果您的页面`http://`上有内容`https://`，您将始终收到此警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T13:41:31.603

如果您的站点很敏感并且需要 HTTPS，那么您真正想做的最后一件事就是从其他人的服务器加载不受信任的 Javascript，无论是通过 HTTP**还是**HTTPS。即使它是从远程服务器加载的，该脚本也会以完全本地权限运行，就像您在应用程序中托管的任何 JS 一样。- 您基本上有一个内置的设计跨站点脚本漏洞。

如果托管该 javascript 文件的第三方站点被黑客入侵并且 JS 被更改为恶意软件，会发生什么情况？您的用户和他们的数据受到威胁！另外，你永远不会知道。（除非您定期测试远程文件的完整性）

如果您有权这样做，请自己托管 JS。如果您不这样做，请自行重新开发功能，或找到您有权托管的类似库。

# javascript - 如何使用jquery比较两个文本输入类型框的值

> ID：10979977
> 
> 赞同：2
> 
> 时间：2012-06-11T12:19:15.750
> 
> 标签：javascript, jquery, asp.net

我有两个文本框`t1`和`t2`. 我想弄清楚如果`t1`和`t2`中的值相同，我如何在 jquery 中显示警报消息。如果用户不更改我想阻止提交表单的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:29:24.953

尝试这样的事情

```
$('form').submit(function(evt) {
   if ($('#textbox1').val() === $('#textbox2').val()) {
     alert('values match');
     evt.preventDefault();
   }
} 
```

使用[.submit()](http://api.jquery.com/submit/)方法绑定到`submit`表单的事件，然后比较文本框中的 2 个值 - 如果它们相同，则会显示警报，然后使用[event.preventDefault() 阻止默认操作（表单提交）](http://api.jquery.com/event.preventDefault/)

**[这里的工作示例](http://jsfiddle.net/AYrud/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-29T11:58:29.387

```
$("form").submit(function() {
  var _txt1 = $('#txt1').val();
  var _txt2 = $('#txt2').val();

  if (_txt1 == _txt2)
  {
     alert('Matching!');
     return true;
  }
  else
  {
    alert('Not matching!');
    return false;
  }
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<form action="#" method="post" name="form_name" id="form_id">
  <input type="text" id="txt1" name="txt1" />
  <input type="text" id="txt2" name="txt2"/>
  <input type="submit" value="Submit">
</form>
```

[示例链接](https://jsfiddle.net/anjankant/870k4Ldw/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-05T04:59:00.183

这是代码

```
if(!$("#t1").val() && !$("#t2").val() && $("#t1").val() === $("#t2").val()){
   alert("Both values are same");
}else{
   return false;
} 
```

我正在通过 === 对输入值进行严格的类型检查。

希望这对您的要求有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-05T04:52:34.107

*jQuery*

```
$(document).ready(function() {
    var _t1 = $("#t1");
    var _t2 = $("#t2");
    $(_t2).focusout(function() {
    if(_t1.val() === _t2.val()){
        return alert('Match');
    }
    return alert('No match');
  });
}); 
```

*HTML*

```
<input id="t1">
<input id="t2"> 
```

*小提琴* [https://jsfiddle.net/ptda108k/1](https://jsfiddle.net/ptda108k/1)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-12-17T21:12:41.213

```
<script>
function myfunction(){
var val1=document.getElementById('pwd').value;
var val2=document.getElementById('cpwd').value;
if(val1!=val2){
document.getElementById('match').innerHTML="Your password is unmatch";
return false;
}
return true;
}
</script>
```

# asp.net-mvc-3 - 使用 Asp.Net MVC 并传递搜索/过滤条件时异步重新加载 JQGrid

> ID：10979981
> 
> 赞同：1
> 
> 时间：2012-06-11T12:19:20.807
> 
> 标签：asp.net-mvc-3, jqgrid, jqgrid-asp.net

我正在使用 JQSuite 的 Trirand.Web.MVC dll 将 JQGrid 集成到我的 MVC 3 应用程序中。

我正在使用 JQGrid 的 HTML 助手，所以在我的视图中我有以下内容：

```
@Html.Trirand().JQGrid(Model.MyGrid, "Grid") 
```

我知道我可以使用以下代码在单击按钮时重新加载网格：

```
$("#Grid").trigger("reloadGrid"); 
```

这将重新加载网格，调用我在控制器代码中指定的 Action 方法来设置 JQGrid。

我在用于搜索/过滤的页面上有其他控件，这些控件可以很好地传递给操作方法。

我找到了 setGridParam 方法，这似乎表明您可以执行以下操作：

```
$("#Grid").setGridParam({ someParam: 'blah' }).trigger("reloadGrid"); 
```

或这个：

```
$("#Grid").jqGrid('setGridParam', { postData: { someParam: 'somevalue'} }).trigger("reloadGrid"); 
```

但是我的操作方法上的 someParam 参数没有填充任何一种方法

如何在 JQGrid 上设置这些，以便在重新加载时被 Action 方法拾取？

**更新**：我现在已经为另一个参数尝试了这种方法，它确实有效！

所以现在我有：

```
$("#Grid").jqGrid('setGridParam', { postData: {
            someParam: 'somevalue', 
            paramTwo: ' some value',
            paramThree: 'some other value'
        } }).trigger("reloadGrid"); 
```

someParam 不起作用，但 paramTwo 和 ParamThree 确实起作用。

奇怪的！

什么可以阻止一个参数工作？

**UPDATE2：** 使用奥列格的建议如下：

```
var myGrid = jQuery("#Grid").jqGrid({                
                postData: {
                    someParam: function () { return $("#txtBox1").val(); },
                    paramTwo: function () { return $("#txtBox2").val(); },
                    paramThree: function () { return $("#txtBox3").val(); }
                }
            });

        myGrid.trigger('reloadGrid'); 
```

...没有任何值通过。我已经验证了 JQuery 在重新加载之前返回了正确的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:45:15.217

如果我理解你是正确的，你可以使用`postData`参数向服务器发送额外的参数。最简单的方法是使用`postData`具有方法（属性作为函数）：

```
postData: {
    myCustomParam: function () { return $("#myInputFiled").val(); }
} 
```

[您可以在此处](https://stackoverflow.com/a/2928819/315935)找到更多信息。在这种情况下，将在对操作的*任何请求*时读取*当前*值，并且该值将作为带有 name 的附加参数发送。*`myCustomParam`*

 *如果您需要从表单中获取所有控件的值，您可以使用[$.serializeArray](http://api.jquery.com/serializeArray/)函数并将所有结果作为一个附加参数发送。

您可以使用和设置/更改新的附加属性来引用`postData`参数。`getGridParam`因为`getGridParam`如果您要求对象参数，则返回对其内部参数的引用，您将不需要使用`setGridParam`.

**更新**：我不知道您的代码在创建网格之前或之后执行的位置。你可以试试下面的代码

```
<script type="text/javascript">
    $(function () {
        var $grid = $("#<%= JQGrid1.ClientID %>");
        if ($grid.length > 0 && $grid[0].grid !== undefined) {
            var postData = $grid.jqGrid("getGridParam", "postData");
            postData.myParam = function () {
                return "test data";
            };
        } else {
            $.extend($.jgrid.defaults, {
                postData: {
                    myParam: function () {
                        return "test data";
                    }
                }
            });
        }
    });
</script> 
```

我希望它在这两种情况下都有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:27:47.750

是的，非常感谢 OLEG 的帮助，因为它让我得到了答案！

问题是帖子数据中已经指定了“SomeParam”，因此我不得不使用此表单扩展现有数据：

```
('#grid').jqGrid({                 
                serializeGridData: function(postData) { 
                  var newPostData = $.extend(postData, {
                      someParam: return $("#txtBox1").val(), 
                      paramTwo: return $("#txtBox1").val(),
                      paramThree: return $("#txtBox1").val(),
                  }); 

                  return $.param(newPostData); 
                } 
            }).trigger("reloadGrid"); 
```

这篇[文章](https://stackoverflow.com/questions/8612800/jquery-jqgrid-postdata-overriding-default-values)帮助我解决了这个问题，奥列格也在那边发帖。*

# birt - 在 BIRT 中绘制多个时间序列

> ID：10979982
> 
> 赞同：0
> 
> 时间：2012-06-11T12:19:22.537
> 
> 标签：birt

作为一个新的 Birt 用户，我现在面临着挑战：我有一组温度测量值 T1 T2 T3 和 T4。数据就像*T1: [(datetime1, temperature1), (datetime2, temperature2), ...], T2: ...*等等。我想将 x 轴作为时间，将 y 轴作为度数，并绘制对应温度测量值的 4 条曲线。

问题是 1\. 是否可以将四个数据集的所有日期时间组合成一个 x 轴？2\. 如果要挤入数千个温度样本，Birt 是否能够绘制这样的曲线？

感谢您提供有用的答案。

# image - Seaside：服务器上图像的 URL

> ID：10979983
> 
> 赞同：4
> 
> 时间：2012-06-11T12:19:28.683
> 
> 标签：image, file-upload, seaside

我为图像创建了一个上传表单，它可以正常工作并将文件保存在 Contents/Resources/uploads 中。

我现在想在我的网络应用程序中显示这些图像：如何检索 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:39:30.657

要显示 Seaside 图像，您可以使用...

```
html url: <some image resource> 
```

...如果该图像在您的 Seaside 图像中，则图像资源可以编码为...

```
html url: WAFileLibrary / #myNewImagePng 
```

...翻译为...

```
html url: '/files/WAFileLibrary/myNewImage.png' 
```

通常，您的应用程序会使用 WAFileLibrary 的子类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T09:28:28.937

这不是 Seaside 的问题，而是您使用的 Web 服务器的问题。

如果您使用 Apache 来提供静态文件，您会发现这里描述的机制： [Mapping URLs to Filesystem Locations](http://httpd.apache.org/docs/2.2/urlmapping.html)

如果你在 Pharo 上工作，在开发过程中你可以使用 Zinc 网络服务器来提供静态文件：

```
ZnZincStaticServerAdaptor startOn: 8080 andServeFilesFrom: '/Path/to/the/images' 
```

在这种情况下，“/Path/to/the/images”中 upload.jpg 的 URL 将是例如`http://localhost:8080/upload.jpg`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T17:59:30.013

您需要配置服务器以提供上传目录中的文件。Apache 或您的 Smalltalk Web 服务器。然后你可能想要使用`#resourceUrl:`

查看 Seaside 书中的以下章节

*   [服务文件 > 图像](http://book.seaside.st/book/in-action/serving-files/images)
*   [使用 Apache 提供文件](http://book.seaside.st/book/advanced/deployment/deployment-apache/serving-files)

# c++ - 在函数内定义结构是否有任何“惩罚”？

> ID：10979984
> 
> 赞同：28
> 
> 时间：2012-06-11T12:19:34.153
> 
> 标签：c++, c, function, struct

只是出于好奇。。

正如标题所说：**在函数内部定义结构是否有任何“惩罚”？**（如*性能、内存、不良编程习惯*等）

* * *

PS我知道，在函数内部定义（非模板）函子是一种常见的做法，但仍然......）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-11T12:24:29.147

在 C++11 中，没有 - 没有惩罚。我什至认为它是一种很好的风格，不会用你的实现细节污染任何“更可见”的范围，当然，除非你想在其他地方重用那个仿函数。然而，**lambda**本质上是这个想法的一种浓缩形式，如果你只是将结构用作函子，**通常应该首选。**对于所有类型的数据，它都非常好，尽管它通常在这方面`std::pair`与之竞争。`std::tuple`

在 C++03 中，您不能将这样的结构用作模板参数，因为这些参数需要具有外部链接（尽管 Visual Studio 允许您这样做）。将这种结构与多态接口一起使用仍然很有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T12:21:57.763

由于这纯粹是一个可见性问题，我无法想象会出现性能或内存损失的合理场景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T12:24:31.547

如果您使用的是 C++03，那么从技术上讲，您不能使用本地定义的结构作为模板参数，但某些编译器（即 MSVC）允许这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T12:25:01.990

我知道您询问了性能，但我想知道另一个问题。您是要求 C 和 C++ 还是其中一种语言？我猜测您想在函数中定义结构以用于范围或隐藏结构。

对于 C，您可以通过在单独的模块中定义和声明结构并使它们成为静态来隐藏事物。然后，您可以提供访问函数，就像您为 C++ 类的成员提供的一样。对于需要访问结构的那些模块，您可以在 .h 文件中包含函数声明。

如果这是针对 C++ 的，那么创建一个类并将结构设为私有或受保护，同时编写适当的 get/set/manipulate 方法来处理其余的工作。

如果您编辑了原始帖子并扩展了您提出此问题的原因，那么您提出了一个很好的问题。

# spring - 休眠第二个 id

> ID：10979985
> 
> 赞同：-1
> 
> 时间：2012-06-11T12:19:38.320
> 
> 标签：spring, hibernate, primary-key

是否可以在休眠中定义两个键，所以我可以用两个键命中一级缓存？

```
@Entity
class User {
  @Id
  int id;

  @Id
  String username;
} 
```

所以 session.get(User.class, 'harry') 和 session.get(User.class, 1) 一样

是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:51:42.727

您可能对4.1的[这个功能感兴趣](http://relation.to/22795.lace)

实际上，您可以使用@Id 或@NaturalId 访问一级缓存。只要确保您使用的是 4.1.x。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T12:35:35.607

简短的回答：**没有**

长答案：有一点作用的@NaturalId 注释，[**请参见此处**](http://ayende.com/blog/4061/nhibernate-natural-id)，但只有一个用于休眠的 id。您可以使用字典实现自己的。

# android - wrap_content 创建问题

> ID：10979986
> 
> 赞同：-2
> 
> 时间：2012-06-11T12:19:48.327
> 
> 标签：android, image, android-layout

有一个奇怪的问题，下面给出的图片大小为 136x166

![在此处输入图像描述](../Images/78738d23a4737dc8828455c649edfded.png)

当我在 ImageView/Button 中设置它时，`wrap_content`这个图像变大了

```
<Button
  android:id="@+id/btn_reports"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:background="@drawable/report_image" /> 
```

输出：带有 wrap_content

![在此处输入图像描述](../Images/b83ab54d8eee6ad963ca8faba16db410.png)

```
<Button
      android:id="@+id/btn_reports"
      android:layout_width="136px"
      android:layout_height="166px"
      android:background="@drawable/report_image" /> 
```

输出：具有固定大小的图像大小（原始 136x166）

![在此处输入图像描述](../Images/8fd3f48d27ec75f8d1f358b14ce51ecf.png)

为什么是这样，有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:42:24.000

这是因为我创建了图标`hdpi`并将图标放入`drawable`文件夹而不是`drawable-hdpi`

[我在研究应用程序支持多](https://stackoverflow.com/questions/12242111/application-skeleton-to-support-multiple-screen)屏时自己得到了解决方案，您可以在[**这里找到答案**](https://stackoverflow.com/a/12258061/739270)

# java - 如何解决此警告？

> ID：10979987
> 
> 赞同：0
> 
> 时间：2012-06-11T12:19:52.413
> 
> 标签：java, model-view-controller, model, game-engine

我正在为 Persons 开发一门课程，对此我有一两个问题。

```
/**
 * ADT for persons which is completed which subclasses
 * to creating actors with specific properties
*/
public class Person {

    /**
     * Name of the Person.
     */
  public String name;

    /**
     * The World which this Person is associated with.
     */
  public World world;

    /**
     * Tells where this Person is at the moment.
     */
  public Place where;

    /**
     * The inventory, contains Things.
     */
  public Collection<Thing> inventory;

    /**
     * Shows how the Person looks like
     */
  public Image appearance;

    /**
     * Create Person named `name' in world `world'.
     * 
     * @param world The world where the Person is created.
     * @param name Name of the Person.
     * @param app An image used to display the Person.
     */
  public Person( World world, String name, Image app ) {
    this.world = world;
    this.name = name;
    this.appearance = app;

    where = world.defaultPlace();
    where.enter( this );

    inventory = Collections.synchronizedCollection( new LinkedList() );
  } 
```

...

1.  Person 类应该是公共的还是默认访问更好？*一个人，一个私人*的人应该是*公共*的，即使这里的含义并不完全相同，这不是有点奇怪。

2.  当我的 IDE 发出警告时，我应该如何处理`inventory = Collections.synchronizedCollection( new LinkedList() );`？它警告我的类型安全。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T12:23:01.603

1.  如果 Person 只会在一个包中使用，您可以将其设为默认值。否则`public`是有道理的。

2.  尝试给出泛型类型。

    ```
    List<Person> people = Collections.synchronizedList(new LinkedList<Person>()); 
    ```

顺便说一句：大多数 IDE 将自动/快速修复这些问题中的任何一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T12:26:53.223

对于警告，您需要指定元素的类型`LinkedList`：

```
inventory = Collections.synchronizedCollection( new LinkedList<Thing>()); 
```

至于`private`/ `public`for `Person`：如果*该类* `Person`被标记`public`，则意味着其他代码（其包的另一端）可以根据需要引用/使用它。当你声明一个as类型的*成员变量*时，意味着其他代码不能直接访问该成员变量。两者互不影响`Person``private`

# c# - 在尝试通过“联系我们”表单联系公司时识别发件人电子邮件 ID

> ID：10979988
> 
> 赞同：1
> 
> 时间：2012-06-11T12:19:53.557
> 
> 标签：c#, asp.net, email

我正在`Contact Us`为我们公司的网站建立一个表格。我的要求是，当用户通过我们的`Contact Us`页面发送任何查询时，应该将其发送到我们公司的电子邮件 id。可以说`sales@mycompany.in`。我已提供`SMTP`详细信息`smtp.mycompany.in`。我早些时候尝试从 gmail 发送邮件，它正在工作。这是我的代码。

```
MailMessage mail = new MailMessage();
mail.From = new MailAddress(txtEmail.Text);
mail.To.Add("sales@mycompany.in");
mail.Subject = "Mail from www.mycompany.in";
mail.Body =  emailbody.ToString();
mail.IsBodyHtml = true;
SmtpClient smtp = new SmtpClient();
smtp.Host = "smtp.gmail.com"; //Or Your SMTP Server Address
smtp.Credentials = new System.Net.NetworkCredential
("mycompany@gmail.com", "xxxxxx");
//Or your Smtp Email ID and Password
// smtp.Port=80; 
smtp.EnableSsl = true;
smtp.Send(mail); 
```

这段代码的问题是，当我发送邮件时，它会收到，`sales@mycompany.in`但它总是说邮件来自`mycompany@gmail.com`而不是键入的电子邮件地址`txtEmail.Text`。我知道这是因为我提供的 gmail 凭据。所以我对你们的问题我怎样才能让它工作，以便我知道发件人或与我们联系的人的电子邮件 ID。欢迎提出任何建议。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:26:12.833

### 理论上

如果您使用的是 Gmail SMTP，则不能“代表”其他人发送邮件。
它也不允许您设置自定义回复地址。

如果您推出自己的 SMTP 服务器，那么您应该会很好。

### 在实践中

减少客户和支持人员的痛苦的一种方法是建立票务系统。
如果愿意，您可以自己编写代码，也可以使用[大量现有](http://google.com?search?q=email+support+ticket+system+open+source)代码中的任何一种。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T12:26:27.417

你不能这样做，因为有些是 abc@yahoo.com，有些是 xyz@hotmail.com，你不能发送它以从其他人的帐户中出现。

我的建议是在电子邮件正文中添加发件人的电子邮件地址，该电子邮件的人正在与我们联系，但我认为您尝试做的解决方案是不可能的。

# c# - 在 Debug 中排除正在构建的文件

> ID：10979993
> 
> 赞同：5
> 
> 时间：2012-06-11T12:20:13.710
> 
> 标签：c#, .net, msbuild

我的 WP7 解决方案有一个类库，其中包含三个大型嵌入式资源。生成 XAP 文件时，压缩这三个文件需要相当长的时间，我想加快在调试模式下（但不是发布）时构建所需的时间。

如果我正在构建 Debug，如何在 CSProj 中指定我不希望构建文件 2 和 3？

```
 <ItemGroup>
    <EmbeddedResource Include="Data\my-big-file-1.txt" />
    <EmbeddedResource Include="Data\my-big-file-2.txt" />
    <EmbeddedResource Include="Data\my-big-file-3.txt" />    
  </ItemGroup> 
```

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-11T12:25:42.863

您可以在项目定义文件中使用条件。

[http://msdn.microsoft.com/en-us/library/ms171455.aspx](http://msdn.microsoft.com/en-us/library/ms171455.aspx)

```
<EmbeddedResource Include="Data\my-big-file-2.txt"  Condition=" '$(Configuration)' == 'Release' "/> 
```

# wmi-query - 如何在 python 中使用 Win32_Tpm 模块

> ID：10979996
> 
> 赞同：0
> 
> 时间：2012-06-11T12:20:36.077
> 
> 标签：wmi-query

我已经为 python 和 pywin32 扩展安装了 WMI，以便能够从我的 python 脚本中使用 win32 api。虽然我可以从 Win32_Battery、Win32_Processor 等其他分类中获取所有信息，但我在 Win32_Tpm 类上遇到了困难。

我想在 python 中使用 Win32_Tpm 模块来玩转各种 tpm 功能，但是我对 win32_tpm 的所有引用都返回 null。

有没有人能够毫无问题地使用它。任何帮助将不胜感激。

我的代码很简单：

```
import wmi,sys,os

c = wmi.WMI()

for tpm in c.Win32_Tpm():
    pass

if tpm.IsActivated():
    print 'Version %s' %(tpm.SpecVersion)
    print 'Physical presence %s' %(tpm.PhysicalPresenceVersionInfo) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:39:49.997

感谢蒂姆·戈尔登。我找到了答案。

请参考线程

[http://mail.python.org/pipermail/python-win32/2012-June/012381.html](http://mail.python.org/pipermail/python-win32/2012-June/012381.html)

如果上面的链接无法访问，这是我们需要做的，因为 Win32_Tpm() 属于单独的命名空间，我们需要指定命名空间的完整路径。希望这可以帮助。

```
import os
import wmi
import win32api
import _winreg

c = wmi.WMI(namespace="root/cimv2/security/microsofttpm")
for t in c.Win32_Tpm():
  pass

print t.IsActivated()

if t.IsActivated():
  print 'Activated %s' %(t.IsActivated_InitialValue)
  print 'Enabled %s' %(t.IsEnabled_InitialValue)
  print 'Owned %s' %(t.IsOwned_InitialValue)
  print 'Version %s' %(t.SpecVersion)
  print 'Manufaturer %s' % (t.ManufacturerVersion)
  print 'Manufaturer %s' % (t.ManufacturerVersionInfo) 
  print 'Physical presence %s' %(t.PhysicalPresenceVersionInfo)
  print 'prashant' 
```

# android - 在 Android 应用程序中使用 Intent

> ID：10979998
> 
> 赞同：0
> 
> 时间：2012-06-11T12:20:49.410
> 
> 标签：android, android-intent

在我的 Android 应用程序中，我有两个活动类。我在第一个按钮上有一个按钮，我想在单击它时显示第二个按钮，但出现错误。以下是课程：

```
public class SplashActivity extends Activity {
    Button b;

    @Override
    public void onCreate(Bundle bun) {
        // TODO Auto-generated method stub
        super.onCreate(bun);
        setContentView(R.layout.splash);

        b=(Button)findViewById(R.id.skipp);

        b.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View view) {
                // TODO Auto-generated method stub
                startActivity (new Intent(SplashActivity.this, MCActivity.class));
            }
        });
    }

    @Override
    protected void onPause() 
        {
        // TODO Auto-generated method stub

        finish();
    }

} 
```

二等：

```
public class MCActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

我已经添加了

```
<activity android:name=".MCActivity" /> 
```

在清单中，在`<application>`标签内......

当我单击按钮 b 时，运行时错误活动仍然**意外停止。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:35:17.087

在下面写 onPause() 代码

```
@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    finish();
} 
```

而不是你的 onPause 代码。