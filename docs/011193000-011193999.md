# StackOverflow 问答 11193000-11193999

# jquery - 延迟恢复 jquery 周期

> ID：11193000
> 
> 赞同：2
> 
> 时间：2012-06-25T16:08:32.067
> 
> 标签：jquery, slideshow, cycle

我正在尝试恢复 Jquery 循环插件幻灯片，但仅在延迟 X 毫秒之后。设置是让幻灯片在悬停时播放，并在不暂停时暂停（而其他内容基本上在其上滚动）以下代码在恢复之前没有注册延迟

非常感谢任何帮助

```
<script type="text/javascript">
$(document).ready(function() {
// configure the cycle plugin
$('.slideshowtwo').cycle({
     fx:     'scrollUp',
     speed:   1000,
     timeout: 1200,
     pause:   0
});
$('.slideshowtwo').cycle('pause'); // pause it right away.

$('.slideshowtwo').hover(
    function() {
            $(this).delay(5000).cycle('resume'); // start playing after delay
    },
    function(){
        $(this).cycle('pause'); // pause the slideshow.
    }
).trigger('hover');

});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:29:21.617

尝试将要在延迟后运行的代码放入 setTimeout 函数中。我现在已经编辑了您的代码以将暂停也包含在 setTimeout 中。此外，我已将 slideshowtwo 类存储到一个变量中，因此您不会经常调用选择器。这应该会提高性能。但是，如果由于某种原因该类被删除并添加到元素中，您应该返回动态搜索它。下面的代码应该很适合你。

```
<script type="text/javascript">
$(document).ready(function() {
// configure the cycle plugin
var showTwo = $('.slideshowtwo');
showTwo.cycle({
     fx:     'scrollUp',
     speed:   1000,
     timeout: 1200,
     pause:   0
});
showTwo.cycle('pause'); // pause it right away.

showTwo.hover(
    setTimeout(function(){
        function() {
                showTwo.cycle('resume'); // start playing after delay
        },
        function(){
            showTwo.cycle('pause'); // pause the slideshow.
        }
    }, 5000)
).trigger('hover');

});
</script> 
```

# jquery - jQuery - 动态隐藏/显示对话框上的按钮

> ID：11193002
> 
> 赞同：0
> 
> 时间：2012-06-25T16:08:47.237
> 
> 标签：jquery, css, jquery-dialog

我有一个对话框 -

```
<div data-role="dialog" id="msg-popup">
  <div data-role="header">
      <h1>Notification</h1>
  </div>

  <div data-role="content" id> 
    <b id="notif-subject"></b>  
    <a href="#notif-details1" id:"show-notif" data-role="button">Show notification</a>
    <a href="#" data-rel="back" data-role="button">Cancel</a>
  </div> 
</div> 
```

我想使用 jquery 代码动态隐藏和显示 show-notif 按钮。我该怎么做？

我试过了

```
$("#show-notif").hide(); 
```

这对我不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:10:17.113

似乎有小的语法错误：

```
<a href="#notif-details1" id:"show-notif" data-role="button">Show notification</a> 
```

它应该是（替换`:`为`=`）：

```
<a href="#notif-details1" id="show-notif" data-role="button">Show notification</a> 
```

这些功能应该起作用：

```
$('#show-notif').hide();
$('#show-notif').show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:12:05.247

HTML 代码中的这一行替换为

```
<a href="#notif-details1" id:"show-notif" data-role="button">Show notification</a> 
```

这

```
<a href="#notif-details1" id="show-notif" data-role="button">Show notification</a> 
```

因为你需要使用

```
id="show-notif" 
```

jsfiddle 演示：http: [//jsfiddle.net/MfQeF/](http://jsfiddle.net/MfQeF/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T16:14:03.563

id:"show-notif" 不是有效语句。

它应该是 id="show-notif"

将 Firefox（或 Chrome）与 html 验证器或 Web 开发者等插件一起使用。它可以显示您的语法错误。

# java - 换行符不同于系统换行符

> ID：11193005
> 
> 赞同：3
> 
> 时间：2012-06-25T16:08:53.467
> 
> 标签：java, string, newline, inputstream

**我的问题：**如何强制输入流将行分隔符处理为系统标准行分隔符？

我将文件读入字符串，换行符被转换为`\n`但我`System.getProperty("line.separator");`的是`\r\n`. 我希望它是可[移植](http://www.javapractices.com/topic/TopicAction.do?Id=38)的，所以我希望我的文件阅读器将换行符作为系统标准换行符读取（无论是什么）。我怎么能强迫它？这是我从[Java Helper](http://www.github.com/kentcdodds/Java-Helper) Library 中读取文件作为字符串的方法。

```
/**
* Takes the file and returns it in a string. Uses UTF-8 encoding
*
* @param fileLocation
* @return the file in String form
* @throws IOException when trying to read from the file
*/
public static String fileToString(String fileLocation) throws IOException {
  InputStreamReader streamReader = new InputStreamReader(new FileInputStream(fileLocation), "UTF-8");
  return readerToString(streamReader);
}

/**
* Returns all the lines in the Reader's stream as a String
*
* @param reader
* @return
* @throws IOException when trying to read from the file
*/
public static String readerToString(Reader reader) throws IOException {
  StringWriter stringWriter = new StringWriter();
  char[] buffer = new char[1024];
  int length;
  while ((length = reader.read(buffer)) > 0) {
    stringWriter.write(buffer, 0, length);
  }
  reader.close();
  stringWriter.close();
  return stringWriter.toString();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:12:58.017

建议以[`BufferedReader`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html)可移植的方式逐行读取文件，然后您可以使用读取的每一行使用您选择的行分隔符写入所需的输出

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T16:17:01.737

您的方法对行尾`readerToString`没有*任何作用。*它只是复制字符数据——仅此而已。完全不清楚您是如何诊断问题的，但该代码确实*不会*更改`\n`为`\r\n`. 它必须`\r\n`在文件中 - 您应该在十六进制编辑器中查看。首先是什么创建了文件？您应该在那里查看如何表示任何换行符。

如果您想阅读行，请使用`BufferedReader.readLine()`which will 处理`\r`,`\n`或`\r\n`.

请注意，[Guava](http://guava-libraries.googlecode.com)有很多有用的方法可以从 reader 读取所有数据，以及将 reader 拆分为行等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T16:14:08.520

使用[Scanner#useDelimiter](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#useDelimiter%28java.lang.String%29)方法，您可以指定从 a `File`or`InputStream`或其他内容读取时要使用的分隔符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T16:27:00.333

您可以使用 BufferedReader 逐行读取文件并转换行分隔符，例如：

```
public static String readerToString(Reader reader) throws IOException {
    BufferedReader bufReader = new BufferedReader(reader);
    StringBuffer stringBuf = new StringBuffer();
    String separator = System.getProperty("line.separator");
    String line = null;

    while ((line = bufReader.readLine()) != null) {
      stringBuf.append(line).append(separator);
    }
    bufReader.close();
    return stringBuf.toString();
} 
```

# three.js - 使用 Three.js 从 2D 投影到 3D

> ID：11193007
> 
> 赞同：3
> 
> 时间：2012-06-25T16:09:01.270
> 
> 标签：three.js

我如何将 2D 坐标投影到 3D 上？

例如，我有一个 256px 宽的图像（表示为粒子）。如果我假设此图像以 2D 空间中的原点 (0,0) 为中心，则正方形的垂直边位于 x = 128 和 x = -128。

因此，当此图像（粒子）放置在原点（0,0）的 Three.js 场景中并且相机与原点的距离为 CamZ 时，我如何将原始 2D 坐标投影到 3D，这在 tern 会告诉我图像（粒子！）以三个.js 为单位出现在屏幕上的宽度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T21:01:35.673

一种易于理解的方法是创建一个具有 、 和 中的`-128, 128, 0`顶点的`128, 128, 0`几何图形。然后用于使用相机投影该几何图形。它将为您提供应该从 -1 到 1 的投影点数组。然后您需要将其乘以视口大小。`-128, -128, 0``128, -128, 0``Projector`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T03:19:59.343

还有另一种方法可以做到这一点。可以启发式地近似 2D 和 3D 之间的精确转换。通常比使用 three.js 来投影矢量更难实现，但是通过指数平移，您可以映射许多 2D/3D 平移。

这里的想法是使用指数缓动函数来计算平移。大多数库（例如 jQuery UI）使用的缓动函数是[Robert Penner Easing functions](http://www.robertpenner.com/easing/)。

easeOutExpo 函数在逼近 2D/3D 平移时效果出奇的好。通常它看起来像这样：

```
// easeOutExpo(time, base, change, duration)
var xPosition3D = xPosition2D * expo(xPosition2D, 0, coefficient, xMax2D); 
```

它需要一个系数，确切的数字将取决于 3D 相机的纵横比和焦距。通常，像 -.2 这样的东西效果很好。

我知道这是一个不充分的解释，但希望它能为您指明正确的方向。

# apache - 使用 Apache Ant 将子目录与通配符匹配？

> ID：11193017
> 
> 赞同：0
> 
> 时间：2012-06-25T16:09:36.123
> 
> 标签：apache, ant, phpunit

我正在尝试设置一个构建文件，我很好奇您是否可以在属性中使用通配符来表示文件路径？或者有什么更好的方法来解决这个问题？

正如您在下面看到的，我希望`${dirtwo}`解析以“foo-”开头的所有文件或目录，而不是手动将每个目录/文件包含为属性。

```
<?xml version="1.0" encoding="UTF-8"?>

<project name="core" default="build" basedir=".">
  <property name="dirone" value="path/to/dir/one" />
  <property name="dirtwo" location="path/to/dir/two/foo-*" />

  <target name="phpmd" description="Generate pmd.xml using PHPMD">
    <exec executable="phpmd">
      <arg line="${dirone},${dirtwo}
                 xml
                 codesize,design,naming,unusedcode
                 --reportfile ${basedir}/build/logs/pmd.xml" />
    </exec>
  </target>
  ...
</project> 
```

目前，无论我如何尝试使用通配符或转义通配符，我得到的都是错误。

```
Buildfile: /var/www/server/project/build.xml

phpmd:
     [exec] The given file "/var/www/server/project/path/to/dir/two/foo-*" does not exist.
     [exec] Result: 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:49:46.103

Ant [DirSet](http://ant.apache.org/manual/Types/dirset.html)将目录与包含/排除模式匹配。您可以将其与[Pathconvert](http://ant.apache.org/manual/Tasks/pathconvert.html)结合使用，如下所示。

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="core" default="build" basedir=".">
  <property name="mybase.dir" location="/path/to/your/base/dir" />
  <dirset dir="${mybase.dir}" includes="**/foo-*" id="directories" />
  <pathconvert pathsep=", " property="directory-list" refid="directories" />

  <target name="phpmd" description="Generate pmd.xml using PHPMD">
    <exec executable="phpmd">
    <arg line="${directory-list} 
               xml
               codesize,design,naming,unusedcode
               --reportfile ${basedir}/build/logs/pmd.xml" />
    </exec>
  </target>
</project> 
```

要测试 和 的结果`dirset`，`pathconvert`您可以使用：

```
<echo message="${directory-list}" /> 
```

# c++ - Doxygen 体内评论

> ID：11193019
> 
> 赞同：10
> 
> 时间：2012-06-25T16:09:39.903
> 
> 标签：c++, doxygen

我有一些代码要记录在正文中，如下所示：

```
/*! \file best.cpp
 *  \brief The best
 *
 *  I am the best
 */

/*! \fn void theBestFunction(int)
 * I'm the best blah blah blah
 */
void theBestFunction(int ever)
{
    doThings();
    /*!
     * Does some more things
     */
    doMoreThings();
    /*!
     * Checks that the things it does are the best
     */
    checkBest();
} 
```

但是当我运行它时`doxygen`，它似乎将内部块格式化为代码片段，就好像使用了`@code`or`\code`命令（它们不是）。我希望正文评论的格式与普通文本一样。

有没有人遇到过这个？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T14:08:51.453

我设法解决了这个问题。事实证明，Doxygen 以某种方式将这些块处理为相对于彼此缩进，并且 Markdown 中的缩进（很像 StackOverflow 上的缩进）表示代码块（http://en.wikipedia.org/wiki/Markdown#Code） . 我只是关闭了 Markdown 并解决了这个问题。

对于将来阅读此问题的任何人，如果您仍然需要 Markdown 支持，请注意不要在第 2 行开始评论块——立即开始评论。

将我的最小示例更改为：

```
/*! \fn void theBestFunction(int)
 * I'm the best blah blah blah
 */
void theBestFunction(int ever)
{
    doThings();
    /*! Does some more things
     */
    doMoreThings();
    /*! Checks that the things it does are the best
     */
    checkBest();
} 
```

（请立即注意正文内注释的开头，而不是先空行）解决了这个问题。

# java - 将数据显示为列表视图并出现错误 NullPointerException

> ID：11193024
> 
> 赞同：0
> 
> 时间：2012-06-25T16:09:44.087
> 
> 标签：java, android, database, android-listview, nullpointerexception

我的问题是我不知道如何准确地显示数据库中的数据。

这是我的 DatabaseHelper 活动（我已经删除了不需要的代码），它打开/关闭数据库并创建表。

```
final static String PN_TABLE = "Tablica_Poniedzialek";
    static final String PN_KEY_ID = "_id";
    final static String PN_KEY_TYPE_OF_SESSION ="type_of_session";
    final static String PN_KEY_START_TIME ="start_time";
    final static String PN_KEY_END_TIME ="end_time";
    final static String PN_KEY_NAME ="name";                         
    final static String PN_KEY_ROOM ="room"; 
```

创建和添加数据到数据库工作正常。问题是我不知道应该如何准确地显示插入数据库的数据。我尝试过使用游标和列表适配器，但似乎我搞砸了一些事情，因为每次我在模拟器中启动它时都会强制关闭应用程序。

这是我的活动，负责从数据库中获取数据然后显示它。我不知道如何将数据显示为列表视图。我不确定哪种方法会更好，一种是创建列表（我相信它确实如此），还是一种只是从数据库中获取数据。但是，假设第一个是正确的，那么问题是我如何才能真正显示所有数据？

```
 package com.projekt;

import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.app.ListActivity;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;

public class PoniedzialekActivity extends ListActivity implements OnClickListener{

    private Button butPnAdd;
    private DatabaseHelper dbhelper;
    private SQLiteDatabase db; 
    Cursor cursor;

    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout_poniedzialek);

        butPnAdd = (Button) findViewById(R.id.butPnAdd);
        butPnAdd.setOnClickListener(this);

        List<Poniedzialek> lista_poniedzialek = getAllPnSession();
        this.setListAdapter(new ArrayAdapter(this, android.R.layout.simple_list_item_1, lista_poniedzialek)); 

    @Override
    public void onClick(View v) {
        if(v.getId()==R.id.butPnAdd){
        Intent i = new Intent(PoniedzialekActivity.this,dodawaniePoniedzialek.class);
        startActivity(i);
        }
    }
    public List<Poniedzialek> getAllPnSession() {
        List<Poniedzialek> pnsessionList = new ArrayList<Poniedzialek>();
        // Wybierz cale Query
        String selectQuery = "SELECT  * FROM " + DatabaseHelper.PN_TABLE;
        dbhelper.getWritableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);
        // petla po wszystkich rzedach & dodawanie ich do listy
        if (cursor.moveToFirst()) {
            do {
                Poniedzialek pn = new Poniedzialek();

                pn.setID(Integer.parseInt(cursor.getString(0)));
                pn.setTypeOfSession(cursor.getString(1));
                pn.setName(cursor.getString(2));
                pn.setStartTime(cursor.getString(3));
                pn.setEndTime(cursor.getString(4));
                pn.setRoom(cursor.getString(5));

                // Dodawanie sesji do listy
                pnsessionList.add(pn);
            } while (cursor.moveToNext());
        }
        cursor.close();
        // return contact list
        return pnsessionList;
    }
    public Cursor fetchPn() {
        SQLiteDatabase db = dbhelper.getWritableDatabase(); 
        return db.query(DatabaseHelper.PN_TABLE, new String[] {DatabaseHelper.PN_KEY_TYPE_OF_SESSION, DatabaseHelper.PN_KEY_START_TIME,
                DatabaseHelper.PN_KEY_END_TIME, DatabaseHelper.PN_KEY_NAME, DatabaseHelper.PN_KEY_ROOM}, null, null, null, null, null);
    }

} // end PoniedzialekActivity 
```

这是 layout_poniedzialek：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/butPnAdd"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/add_pn"
        />
    <TextView  
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" 
        android:text="@string/tab1"
        />

    <ListView
        android:id="@+id/pnListView"
        android:layout_width="304dp"
        android:layout_height="380dp"
        android:layout_gravity="center_horizontal" >

    </ListView>

</LinearLayout> 
```

**编辑** 现在我不断收到错误：NullPointerException。这是我在 poniedzialekActivity 中实现的（请注意，DatabaseHelper 是我保持打开/关闭和静态最终字符串属性的类的名称 - 我在这里创建 5 个平板电脑）

**PoniedzialekActivity**类：

```
public class PoniedzialekActivity extends ListActivity implements OnClickListener{

    private Button butPnAdd;
    private DatabaseHelper dbhelper;
    private SQLiteDatabase db; 
    Cursor c;

    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout_poniedzialek);

        butPnAdd = (Button) findViewById(R.id.butPnAdd);
        butPnAdd.setOnClickListener(this);

        dbhelper = new DatabaseHelper(this);
        dbhelper.open();
        c = dbhelper.fetchPn();
        String[] columns = new String[] { DatabaseHelper.PN_KEY_TYPE_OF_SESSION, DatabaseHelper.PN_KEY_START_TIME, DatabaseHelper.PN_KEY_END_TIME,
                DatabaseHelper.PN_KEY_NAME, DatabaseHelper.PN_KEY_ROOM};
        int[] to = new int[] { R.id.textSession, R.id.textStartTime, R.id.textEndTime, R.id.textName, R.id.textRoom };
        new SimpleCursorAdapter(PoniedzialekActivity.this, R.layout.entry, c, columns, to);
        ListView list = getListView();
        list.setAdapter(new SimpleCursorAdapter(PoniedzialekActivity.this, R.layout.entry, c, columns, to));

    }
    @Override
    public void onClick(View v) {
        if(v.getId()==R.id.butPnAdd){
        Intent i = new Intent(PoniedzialekActivity.this,dodawaniePoniedzialek.class);
        startActivity(i);
        }
    }
} 
```

**DatabaseHelper.class**

```
public class DatabaseHelper extends SQLiteOpenHelper {
    private static final String DATABASE_NAME = "database.db";
    private static final int DATABASE_VERSION = 1;
    public static final String TAG = "ProjectDatabase";

    static final String PN_TABLE = "Tablica_Poniedzialek";
    static final String PN_KEY_ID = "_id";
    static final String PN_KEY_TYPE_OF_SESSION ="type_of_session";
    static final String PN_KEY_START_TIME ="start_time";
    static final String PN_KEY_END_TIME ="end_time";
    static final String PN_KEY_NAME ="name";                         
    static final String PN_KEY_ROOM ="room";

    static final String WT_TABLE = "Tablica_Wtorek";
    static final String WT_KEY_ID = "_id";
    static final String WT_KEY_TYPE_OF_SESSION ="type_of_session";
    static final String WT_KEY_START_TIME ="start_time";
    static final String WT_KEY_END_TIME ="end_time";
    static final String WT_KEY_NAME ="name";
    static final String WT_KEY_ROOM ="room";

    static final String SR_TABLE = "Tablica_Sroda";
    static final String SR_KEY_ID = "_id";
    static final String SR_KEY_TYPE_OF_SESSION ="type_of_session";
    static final String SR_KEY_START_TIME ="start_time";
    static final String SR_KEY_END_TIME ="end_time";
    static final String SR_KEY_NAME ="name";
    static final String SR_KEY_ROOM ="room";

    static final String CZ_TABLE = "Tablica_Czwartek";
    static final String CZ_KEY_ID = "_id";
    static final String CZ_KEY_TYPE_OF_SESSION ="type_of_session";
    static final String CZ_KEY_START_TIME ="start_time";
    static final String CZ_KEY_END_TIME ="end_time";
    static final String CZ_KEY_NAME ="name";
    static final String CZ_KEY_ROOM ="room";

    static final String PT_TABLE = "Tablica_Piatek";
    static final String PT_KEY_ID = "_id";
    static final String PT_KEY_TYPE_OF_SESSION ="type_of_session";
    static final String PT_KEY_START_TIME ="start_time";
    static final String PT_KEY_END_TIME ="end_time";
    static final String PT_KEY_NAME ="name";
    static final String PT_KEY_ROOM ="room";

    public DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }           
    private DatabaseHelper dbhelper; 
    private SQLiteDatabase db; 

    @Override
    public void onCreate(SQLiteDatabase db) {

        String pn_sql = "CREATE TABLE " + PN_TABLE +
                        "(" + PN_KEY_ID + " integer primary key autoincrement, " +
                        PN_KEY_TYPE_OF_SESSION + " text, " +
                        PN_KEY_NAME + " text, " +
                        PN_KEY_START_TIME + " text, " +
                        PN_KEY_END_TIME + " text, " +
                        PN_KEY_ROOM + " text);";
        String wt_sql = "CREATE TABLE " + WT_TABLE +
                        "(" + WT_KEY_ID + " integer primary key autoincrement, " +
                        WT_KEY_TYPE_OF_SESSION + " text, " +
                        WT_KEY_NAME + " text, " +
                        WT_KEY_START_TIME + " text, " +
                        WT_KEY_END_TIME + " text, " +
                        WT_KEY_ROOM + " text);";
        String sr_sql = "CREATE TABLE " + SR_TABLE +
                        "(" + SR_KEY_ID + " integer primary key autoincrement, " +
                        SR_KEY_TYPE_OF_SESSION + " text, " +
                        SR_KEY_NAME + " text, " +
                        SR_KEY_START_TIME + " text, " +
                        SR_KEY_END_TIME + " text, " +
                        SR_KEY_ROOM + " text);";
        String cz_sql = "CREATE TABLE " + CZ_TABLE +
                        "(" + CZ_KEY_ID + " integer primary key autoincrement, " +
                        CZ_KEY_TYPE_OF_SESSION + " text, " +
                        CZ_KEY_NAME + " text, " +
                        CZ_KEY_START_TIME + " text, " +
                        CZ_KEY_END_TIME + " text, " +
                        CZ_KEY_ROOM + " text);";
        String pt_sql = "CREATE TABLE " + PT_TABLE +
                        "(" + PT_KEY_ID + " integer primary key autoincrement, " +
                        PT_KEY_TYPE_OF_SESSION + " text, " +
                        PT_KEY_NAME + " text, " +
                        PT_KEY_START_TIME + " text, " +
                        PT_KEY_END_TIME + " text, " +
                        PT_KEY_ROOM + " text);";

        db.execSQL(pn_sql);
        db.execSQL(wt_sql);
        db.execSQL(sr_sql);
        db.execSQL(cz_sql);
        db.execSQL(pt_sql);
    }
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.w("Projekt", "aktualizacja z wersji " + oldVersion
              + " do wersji " + newVersion + " ( stare dane ulegna usunieciu ) ");
                 db.execSQL("DROP TABLE IF EXISTS" + PN_TABLE);
                 db.execSQL("DROP TABLE IF EXISTS" + WT_TABLE);
                 db.execSQL("DROP TABLE IF EXISTS" + SR_TABLE);
                 db.execSQL("DROP TABLE IF EXISTS" + CZ_TABLE);
                 db.execSQL("DROP TABLE IF EXISTS" + PT_TABLE);
        onCreate(db);
    }
    public void open() 
    {
            dbhelper.open();
    }
    public void close()
        {
            dbhelper.close();
        }
    public Cursor fetchPn() {
        return db.query(PN_TABLE, new String[] {PN_KEY_TYPE_OF_SESSION, PN_KEY_START_TIME, 
                PN_KEY_END_TIME, PN_KEY_NAME, PN_KEY_ROOM}, null, null, null, null, null);
    }
} 
```

这是我的**MainActivity**类，它包含 TabHost：

```
public class MainActivity extends TabActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        //--- TABHOST ---//
        Resources res = getResources(); // Resource object to get Drawables
        TabHost tabHost = getTabHost();  // The activity TabHost
        TabHost.TabSpec spec;  // Resusable TabSpec for each tab
        Intent intent;  // Reusable Intent for each tab

        // Create an Intent to launch an Activity for the tab (to be reused)
        intent = new Intent().setClass(this, PoniedzialekActivity.class);
        // Initialize a TabSpec for each tab and add it to the TabHost
        spec = tabHost.newTabSpec("Pn").setIndicator("Pn",
                          res.getDrawable(R.drawable.ic_launcher))
                      .setContent(intent);
        tabHost.addTab(spec);

        // Do the same for the other tabs
        intent = new Intent().setClass(this, WtorekActivity.class);
        spec = tabHost.newTabSpec("Wt").setIndicator("Wt",
                          res.getDrawable(R.drawable.ic_launcher))
                      .setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, SrodaActivity.class);
        spec = tabHost.newTabSpec("Sr").setIndicator("Sr",
                          res.getDrawable(R.drawable.ic_launcher))
                      .setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, CzwartekActivity.class);
        spec = tabHost.newTabSpec("Cz").setIndicator("Cz",
                          res.getDrawable(R.drawable.ic_launcher))
                      .setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, PiatekActivity.class);
        spec = tabHost.newTabSpec("Pt").setIndicator("Pt",
                          res.getDrawable(R.drawable.ic_launcher))
                      .setContent(intent);
        tabHost.addTab(spec);

        tabHost.setCurrentTab(1);
        //--- END OF TABHOST ---//

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T21:55:51.877

`setListAdapter()`不是为`Activity`...定义的，所以我不确定你的代码是如何编译的。

您需要扩充您的布局，找到`ListView`using `findViewById`，然后设置其适配器。

```
ListView lv = (ListView) findViewById(R.id.pnListView);
lv.setAdapter(...); 
```

# php - 客户端和服务端存在时间差

> ID：11193025
> 
> 赞同：2
> 
> 时间：2012-06-25T16:09:55.640
> 
> 标签：php, javascript

Javascript：

```
function setinvitexpire(){

var ee = new Date ();
ee.setTime(ee.getTime() + (365 * 24 * 3600 * 1000));

var bb = Math.round(new Date().getTime() / 1000) + (24 * 3600); // remove milliseconds

document.cookie="visit=" + bb + ";expires=" + ee.toGMTString();

}
setinvitexpire(); 
```

PHP：

```
<?php 
if(isset($_COOKIE['visit'])){ 
echo date('m/d/Y g:i A', $_COOKIE['visit']); 
echo "<br>";
} 
?> 
```

我得到：

```
06/26/2012 11:57 AM 
```

代替：

```
06/26/2012 18:07 AM 
```

因为我国现在的时间是**06/25/2012 18:07 AM**

我该如何解决这个问题并简单地将当前时间 + 24 小时保存在 cookie 中？

编辑：我以这种方式解决：

```
document.cookie="visit=" + <?php echo time() + (24 * 3600); ?> + ";expires=" + ExpireC.toGMTString(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:14:13.423

您正在获取 GMT (~ UTC) 时间，您必须保存 UTC 时间**和**时区。请参阅`getTimezoneOffset()`：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/getTimezoneOffset](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/getTimezoneOffset)

附带说明：

[toGMTString](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/toGMTString)已弃用，您应该使用`toUTCString`.

# dependency-injection - Zend Framework 2 Di 创建没有参数的类

> ID：11193042
> 
> 赞同：1
> 
> 时间：2012-06-25T16:10:44.423
> 
> 标签：dependency-injection, zend-framework2

我在配置中有以下代码：

```
<?php
return array(
    'di' => array(
        'instance' => array(
            'alias' => array(
                'sms_message' => 'Sms\Message',
            ),
            'sms_message' => array(
                'parameters' => array(
                    'from' => 'SENDER',
                ),
            ),
        ),
    ),
); 
```

在 Message.php 类中，我有一个设置器（我不想使用构造器）：

```
/**
 * From
 * @var string
 */
protected $from;

/**
* @param string $from
*/
public function setFrom($from)
{
    $this->from = $from;
} 
```

但是当我尝试加载它时，我得到了未配置的对象：

```
var_dump($this->getLocator()->get('Sms\Message'));exit;

object(Sms\Message)[596]
    protected 'to' => null
    protected 'from' => null
    protected 'body' => null 
```

我怎样才能使它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T22:38:48.983

对于 setter 注入，您必须使用`injections`关键字：

```
array(        
    'di' => array(
        'instance' => array(
            'alias' => array(
                'sms_message' => 'Sms\Message'
            ),
            'Sms\Message' => array(
                'injections' => array(
                    'setFrom' => array(
                        'from' => 'SENDER'
                    ),
                ),
            ),
        ),
    ),
); 
```

我不确定实例配置是否应该使用别名。最好改用 FQCN。

我还发现，在复制您的示例时请求别名时当前未执行注入：

```
// The will call setFrom(...)
$di->get('Sms\Message);
// This will not call setFrom(...)
$di->get('sms_message'); 
```

我不知道这种行为是否有意。（我会报告这个目前[失败的](http://travis-ci.org/#!/fritz-gerneth/zf2/builds/1753053)[测试](https://github.com/fritz-gerneth/zf2/compare/test/di-alias-injection)）

# java - NIO连接断开时没有准备好Key

> ID：11193045
> 
> 赞同：2
> 
> 时间：2012-06-25T16:10:58.707
> 
> 标签：java, networking, nio

我得到一个非常奇怪的 NIO 行为，在非常罕见的情况下，当我调用 select() 时，我没有在断开连接时选择 readyKey（由于 VM 杀死），如下所示：

```
while (selector.isOpen()){
    selector.select(SELECT_TIMEOUT);
    Set<SelectionKey> readyKeys = selector.selectedKeys();
    if(!readyKeys.isEmpty()){
        System.out.println("Selected...");
    }
} 
```

密钥注册如下：

```
key.interestOps(SelectionKey.OP_READ); 
```

操作系统：CentOS 6.2

虚拟机：XEN

Java：JDK_1.6u17

Keep_ALIVE 设置为每 1 秒运行一次

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:29:06.880

如果连接因为keepalive失败而终止，它会被重置，不会正常关闭，所以没有FIN下发，所以没有'可读'事件。在这种情况下，发现断开连接的唯一方法是在写入时通过 IOException，或者通过*没有*读取事件，即本质上是读取超时。

不要将keepalive设置为每秒运行一次。这是非常浪费的。

# android - ListView Android，如何始终显示完整的元素

> ID：11193048
> 
> 赞同：0
> 
> 时间：2012-06-25T16:11:11.853
> 
> 标签：android, listview

有没有办法配置 ListView 以使其始终在屏幕上完整显示列表的顶部元素？换句话说，每当列表停止滚动时，它应该继续向上或向下滚动，直到顶部的元素完全显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:35:40.413

这解决了这个问题。

```
 setOnScrollListener(new OnScrollListener() {

        boolean touched = false;

        @Override
        public void onScrollStateChanged(AbsListView view, int scrollState) {           
            if(scrollState == SCROLL_STATE_TOUCH_SCROLL){
                touched = true;
            }else if(scrollState == SCROLL_STATE_IDLE && touched){
                touched = false;
                ListViewWithSwipe.this.post(new Runnable() {
                    @Override
                    public void run() {
                        smoothScrollToPosition(getFirstVisiblePosition());  
                    }
                });
            }
        }

        @Override
        public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {

        }
    }); 
```

# jquery - 没有数据时如何防止jquery dataTable插件添加行和消息

> ID：11193051
> 
> 赞同：8
> 
> 时间：2012-06-25T16:11:27.807
> 
> 标签：jquery, datatable

我们的产品负责人希望我们的空表在表中没有数据时仅显示表头。我似乎无法阻止 dataTable 创建带有“空...”消息的行。

这是我用来初始化数据表的代码。我知道这里有些事情是错误的。我一直在做实验。:)

```
$('#InBox').dataTable({
    "bFilter": false,
    "bPaginate": false,
    "bLengthChange": false,
    "bInfo": false,
    "oLanguage": {
        "sEmptyTable": '',
        "sInfoEmpty": ''
    }
}); 
```

这是我尝试将一些代码放入 dataTable 的 init 函数中，但我不知道如何让它工作。

```
/* Table is empty - create a row with an empty message in it */
            var anRows[0] = document.createElement('tr');

            if (typeof oSettings.asStripClasses[0] != 'undefined') {
                anRows[0].className = oSettings.asStripClasses[0];
            }

            var nTd = document.createElement('td');
            nTd.setAttribute('valign', "top");
            nTd.colSpan = oSettings.aoColumns.length;
            nTd.className = oSettings.oClasses.sRowEmpty;
            if (oSettings.fnRecordsTotal() > 0) {
                if (oSettings.oLanguage.sZeroFilterRecords.indexOf("_MAX_") != -1)
                    oSettings.oLanguage.sZeroFilterRecords = oSettings.oLanguage.sZeroFilterRecords.replace("_MAX_", oSettings.fnRecordsTotal());
                nTd.innerHTML = oSettings.oLanguage.sZeroFilterRecords;
            } else {
                nTd.innerHTML = oSettings.oLanguage.sZeroRecords;
            }

            anRows[iRowCount].appendChild(nTd); 
```

担

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T16:16:23.620

试试这个

```
$('#InBox').dataTable({
  "bFilter": false,
   "bPaginate": false,
   "bLengthChange": false,
   "bInfo": false,
   "oLanguage": {
    "sEmptyTable": '',
    "sInfoEmpty": ''
   },
   "sEmptyTable": "There are no records",
 }); 
```

否则你可以试试这个

```
$('#InBox').dataTable({
  "bFilter": false,
   "bPaginate": false,
   "bLengthChange": false,
   "bInfo": false,
   "oLanguage": {
    "sEmptyTable": '',
    "sInfoEmpty": ''
   }
 });
$('.dataTables_empty').html("No record found."); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-10-15T18:20:58.373

如果要从数据表插件中删除附加的 tbody，可以尝试以下解决方法：

```
$('.dataTables_empty').parent().parent().remove(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T03:46:39.513

旧帖子，但为了人们使用搜索引擎寻找正确答案，我就是这样做的。

从 dataTables 源中删除或注释掉以下行：

```
anRows[iRowCount].appendChild(nTd); 
```

在缩小版中，搜索并删除：

```
b[i].appendChild(c); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-05T01:23:17.787

您可以使用 oLangunge 自定义 DataTable 插件：

```
"oLanguage": { "sZeroRecords": "-Put customized text-", "sEmptyTable": "-Put customized text-" }

And if you want to remove those, just put these components into null:
"oLanguage": { "sZeroRecords": '', "sEmptyTable": '' } 
```

希望能帮助到你！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-10-21T14:32:31.083

隐藏消息的最新方法是使用[语言选项](https://datatables.net/reference/option/language)

```
$('#loggedMessages').DataTable({
    "language": {
       "emptyTable": ' ',
       "zeroRecords": ' '
     }
 }); 
```

# ios - Titanium TableViewRow 选择时删除子视图的背景颜色

> ID：11193052
> 
> 赞同：0
> 
> 时间：2012-06-25T16:11:36.497
> 
> 标签：ios, uitableview, titanium

我有一个带有图像子视图的自定义 TableViewRow。imageView 在容器内，因此我可以将图像显示为正方形。容器具有白色背景，图像可能无法填充容器视图。我从容器中删除了图像以更好地解释问题。请看下面的图片。

[![](../Images/3d4672b0f7474dd8de0d252059569134.png)](https://i.stack.imgur.com/0CiZX.png) [![](../Images/10f0516730b6e89c856ec08825badc20.png)](https://i.stack.imgur.com/VxO8w.png)

As you can see, when the bottom row is selected the background of the white square disappears. 在我的情况下，当图像在容器内时，填充正方形的白色被删除，我有一个正方形边框，里面有一个较小的图像。

以前有没有人处理过这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-23T23:26:57.487

这是任何表格的正常行为——它改变了所有子视图的背景颜色，因此它可以显示选择突出显示。

有关更多详细信息和解决方法，请参阅[此问题](https://stackoverflow.com/questions/6745919/uitableviewcell-subview-disappears-when-cell-is-selected)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T02:09:22.580

我的建议是自己处理 selectionHighlighting，这样您就可以管理视图的呈现方式。

选择一行后，创建您自己的方法来设置各个视图的背景颜色，以提供您想要的视觉体验。请记住设置 tableView 以便在选择时不突出显示

# php - 每次处理完变量后，我应该使用 PHP 的 unset 函数吗？

> ID：11193053
> 
> 赞同：1
> 
> 时间：2012-06-25T16:11:39.193
> 
> 标签：php

我的问题很简单，我从数据库中获取数据并将它们存储为变量以备将来使用。处理完变量后，使用 PHP 的 unset 函数来释放内存是否划算？我所说的“成本效益”是指是否值得多次调用该函数以希望清除内存以减少页面加载时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:14:58.553

[如未设置](http://us2.php.net/manual/en/function.unset.php#86347)中所述

从[这里](https://stackoverflow.com/questions/584960/whats-better-at-freeing-memory-with-php-unset-or-var-null)

“unset() 就像它的名字所说的那样 - 取消设置一个变量。它不会强制立即释放内存。PHP 的垃圾收集器会在它认为合适时执行它 - 有意尽快，因为无论如何都不需要这些 CPU 周期，或者直到脚本内存不足，无论先发生什么。

如果你正在做 $whatever = null; 那么你正在重写变量的数据。您可能会更快地释放/缩小内存，但它可能会更快地从真正需要它们的代码中窃取 CPU 周期，从而导致更长的整体执行时间。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:16:36.760

在处理大量数据（例如处理数组）时使用 unset。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T16:17:26.790

除非您对不同的值使用相同的变量名，否则您实际上并不需要多次调用该函数——我不建议这样做。

未设置（$variable1，$variable2，$variable3）

我在循环末尾使用 unset 并在代码末尾取消设置数组。

我真的不需要使用 unset ，除非我真的必须 - 在这里再次循环以获取已知的 php 怪异 - 或者我有非常大的数组。

# android - 在 android 上自由拖动形状

> ID：11193060
> 
> 赞同：0
> 
> 时间：2012-06-25T16:11:56.300
> 
> 标签：android

我尝试通过 2 种方式在 android 上实现拖动：

1.  画布上绘制。
2.  触摸时具有边距变化的相对布局。

即使在强大的设备上，它也不够流畅。

我怎样才能使拖动更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:25:51.607

最简单的方法（也是响应速度最快的）是在视图中处理触摸，当您处理 a 时`MotionEvent.ACTION_MOVE`，只需`View`从事件的原始坐标设置您的 'sx 和 y 点并调用`view.invalidate()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:34:55.940

如果您需要更高性能的替代方法来简单地调用`invalidate()`和重绘视图内容，请使用 a`SurfaceView`为您提供可以从任何线程绘制的绘图表面。您仍然`Canvas`可以使用，您只需获得访问权限并使用以下代码随时使用它：

```
SurfaceView mSurface; //In your view hierarchy
SurfaceHolder = mSurface.getHolder();
Canvas c = mHolder.lockCanvas();

c.drawBitmap(...);
c.drawColor(...);
//...etc...etc...

mHolder.unlockCanvasAndPost(c); 
```

而不是等待`draw()`调用您的视图。正如我所提到的，由于您获得了对 的锁定`Canvas`，因此可以在后台线程上完成此绘图。

高温高压

# jquery - Jquery 动态点击

> ID：11193061
> 
> 赞同：0
> 
> 时间：2012-06-25T16:12:01.723
> 
> 标签：jquery, syntax, concatenation, each

我想在页面的加载时动态地使用 Jquery 进行一些点击。我发现如何：

```
$("#pdt1").trigger("click"); 
```

我有一部分 id 进入我的会话显示成一个像“1,3,7”这样的字符串，我想产生一些这样的点击：

```
$("#pdt1").trigger("click");
$("#pdt3").trigger("click");
$("#pdt7").trigger("click"); 
```

所以我在 Jquery 中写了：

```
 $(document).ready(function () {
        //Getting my string of Ids
        var mesId = $('#<%= selectedID.ClientID %>').val();
        //Cut my string into an array
        var subId = mesId.split(',');
        //Send a click for each id
        $(subId).each(function (event) {
            $('#pdt'+ this).trigger("click");
        });
    }); 
```

显然，这行不通。我确信我得到了我的身份证并正确切割它们。我不确定的是每个函数和连接。有谁知道如何使它工作？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:13:58.103

尝试使用`.each`如下，

```
$.each(subId, function (index, value) {
    $('#pdt'+ value ).trigger("click");
}); 
```

# django - Django - 反向外键选择相关

> ID：11193062
> 
> 赞同：1
> 
> 时间：2012-06-25T16:12:03.360
> 
> 标签：django, foreign-keys

所以，以前也有人问过类似的问题，但我一直无法找到一个确定的答案。

给定以下模型：

```
class Parent(models.Model):
    name = models.CharField(max_length=250)

class ChildA(models.Model):
    parent = models.ForeignKey('Parent')

class ChildB(models.Model):
    parent = models.ForeignKey('Parent') 
```

我怎样才能得到给定父母的所有孩子？Select related 只会继续前进，因此据我所知，这不起作用。与预取相关的似乎仅在父级中有实际字段引用时才起作用（即，如果父级有一个带有子级的 m2m 字段），所以我看不出它是如何工作的。

我确信这是我刚刚在文档中忽略的东西，因为这类问题是多么初级和普遍。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T16:18:18.290

`select_related`这与or无关`prefetch_related`。要使用您的结构获取父级的所有子级，您将始终需要执行两个查询：

```
my_children = list(my_parent.childa_set.all()) + list(my_parent.childb_set.all()) 
```

# android - 如何处理点击通知？

> ID：11193068
> 
> 赞同：0
> 
> 时间：2012-06-25T16:12:17.320
> 
> 标签：android, notifications

我有这个有效的通知代码，但是每当我点击通知时，应用程序就会关闭，我不知道为什么。我想当我点击通知时取消它，如果可能的话，我也想让它定时，你能帮我吗？

这是代码：

```
package egypt.interfaceAct;

import android.app.Activity;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Intent;
import android.os.Bundle;
import android.widget.Toast;

public class Notifications extends Activity {

    NotificationManager nm;
    int uniqueID = 13393;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        Bundle programNum = getIntent().getExtras();
        final String body = programNum.getString("Activity");
        final String startTime = programNum.getString("Start");
        final String endTime = programNum.getString("End");
        nm = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
        nm.cancel(uniqueID);
        String notify = body + "Start at: " + startTime + " to: " + endTime;
        Intent intent = new Intent(this,ProgramsList2.class);
        PendingIntent pi = PendingIntent.getActivity(this, 1, intent, 0);
        //String body = (String) ((TextView)parent.getChildAt(position)).getText();
        String title = "Egypt On The Go";
        //String time = body + "\n start at:" + startTime+ "\n end at:" + endTime.get(position);
        Notification n = new Notification(R.drawable.egypt, notify, System.currentTimeMillis());
        n.setLatestEventInfo(this, title, notify, pi);
        n.defaults = Notification.DEFAULT_ALL;
        nm.notify(uniqueID, n);
        n.flags = Notification.FLAG_AUTO_CANCEL;
        //Intent i = new Intent(this, ProgramsList2.class);
        //startActivity(i);
        finish();
    }
} 
```

这是 logCat 也许它会有所帮助：

```
06-25 19:06:19.818: E/AndroidRuntime(883): Uncaught handler: thread main exiting due to uncaught exception
06-25 19:06:19.824: E/AndroidRuntime(883): java.lang.RuntimeException: Unable to start activity ComponentInfo{egypt.interfaceAct/egypt.interfaceAct.ProgramsList2}: java.lang.NullPointerException
06-25 19:06:19.824: E/AndroidRuntime(883):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
06-25 19:06:19.824: E/AndroidRuntime(883):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
06-25 19:06:19.824: E/AndroidRuntime(883):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
06-25 19:06:19.824: E/AndroidRuntime(883):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
06-25 19:06:19.824: E/AndroidRuntime(883):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-25 19:06:19.824: E/AndroidRuntime(883):  at android.os.Looper.loop(Looper.java:123)
06-25 19:06:19.824: E/AndroidRuntime(883):  at android.app.ActivityThread.main(ActivityThread.java:4363)
06-25 19:06:19.824: E/AndroidRuntime(883):  at java.lang.reflect.Method.invokeNative(Native Method)
06-25 19:06:19.824: E/AndroidRuntime(883):  at java.lang.reflect.Method.invoke(Method.java:521)
06-25 19:06:19.824: E/AndroidRuntime(883):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
06-25 19:06:19.824: E/AndroidRuntime(883):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
06-25 19:06:19.824: E/AndroidRuntime(883):  at dalvik.system.NativeStart.main(Native Method)
06-25 19:06:19.824: E/AndroidRuntime(883): Caused by: java.lang.NullPointerException
06-25 19:06:19.824: E/AndroidRuntime(883):  at egypt.interfaceAct.ProgramsList2.onCreate(ProgramsList2.java:68)
06-25 19:06:19.824: E/AndroidRuntime(883):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-25 19:06:19.824: E/AndroidRuntime(883):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
06-25 19:06:19.824: E/AndroidRuntime(883):  ... 11 more 
```

这是 ProgramsList2 的代码

```
package egypt.interfaceAct;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import egypt.database.EgyptDataSource;
import egypt.database.Hotel;
import egypt.database.MySQLiteHelper;
import egypt.database.TA;
import egypt.database.TouringPrograms;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.ListActivity;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.DialogInterface;
import android.content.Intent;
import android.os.Bundle;
import android.text.TextUtils;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;
import android.widget.Toast;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.AdapterView.OnItemLongClickListener;

public class ProgramsList2 extends Activity{

    EgyptDataSource datasource;
    MySQLiteHelper sqlHelper;
    NotificationManager nm;
    static final int uniqueID = 13992;

    //ArrayAdapter<TouringPrograms> touringProgramAdapter;
    final String ACTIVITY_KEY = "activity";
    final String STIME_KEY = "Stime";
    final String ETIME_KEY = "Etime";
    ListView list;
    ArrayList<Map<String, String>> al;
    Map<String, String> map;
    SimpleAdapter sa;
    String[] from = {ACTIVITY_KEY, STIME_KEY, ETIME_KEY};
    int[] to = {R.id.tableTextID, R.id.tableText2ID, R.id.tableText3ID};

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.programsmain);
        datasource = new EgyptDataSource(this);
        datasource.open();
        list = (ListView) findViewById(R.id.programsMainList);
        al = new ArrayList<Map<String,String>>();

        nm = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
        nm.cancel(uniqueID);
        Bundle programNum = getIntent().getExtras();
        final String progNum = programNum.getString("ProgNum");
        final String dayNum = programNum.getString("DayNum");

        List<TouringPrograms> Activityvalues = datasource.getTouringPrograms(progNum, dayNum);
        final List<TouringPrograms> STimevalues = datasource.getTouringProgramsStartTime(progNum, dayNum);
        final List<TouringPrograms> ETimevalues = datasource.getTouringProgramsEndTime(progNum, dayNum);
        Object[] ActivityArray = Activityvalues.toArray();
        Object[] STimeArray = STimevalues.toArray();
        Object[] ETimeArray = ETimevalues.toArray();
        for (int i = 0; i < Activityvalues.size(); i++) {
            map = new HashMap<String, String>();
            map.put(ACTIVITY_KEY, ActivityArray[i].toString());
            map.put(STIME_KEY, STimeArray[i].toString());
            map.put(ETIME_KEY, ETimeArray[i].toString());
            al.add(map);
        }

        final List<TouringPrograms> Activityvalues2 = datasource.getTouringPrograms(progNum, dayNum);
        sa = new SimpleAdapter(this, al, R.layout.programstable, from, to);
        list.setAdapter(sa);
        //list.setTextFilterEnabled(true);

        //ListView lv = getApplication()

        list.setOnItemLongClickListener(new OnItemLongClickListener(){

            public boolean onItemLongClick(AdapterView<?> parent, View view, int position,
                    long id) {
                // TODO Auto-generated method stub
                final String taName = Activityvalues2.get(position).toString();
                List<TA> HI = datasource.getTAHistoricalInfo(taName);
                if (HI.size()==0)
                {

                }
                else
                {
                String historical = "Historical Info: " + TextUtils.join(", ", HI);
                List<TA> location = datasource.getTALocation(taName);
                String loc = "Location: " + TextUtils.join(", ", location);
                List<TA> tatype = datasource.getTAType(taName);
                String type = "Type: " + TextUtils.join(", ", tatype);
                List<TA> photo = datasource.getTAPhoto(taName);
                final String pho = photo.get(0).toString();
                List<TA> latitude = datasource.getTALat(taName);
                final String lat = latitude.get(0).toString();
                List<TA> longitude = datasource.getTALong(taName);
                final String lon = longitude.get(0).toString();
                final String startTime = STimevalues.get(position).toString();
                final String endTime = ETimevalues.get(position).toString();
                //Toast.makeText(hotelSearchList.this, "The hotel clicked is " + hotelName, Toast.LENGTH_LONG).show();
                AlertDialog.Builder builder = new AlertDialog.Builder(ProgramsList2.this);
                builder.setTitle("Information About " + taName);
                builder.setMessage(loc + "\n" + type + "\n" + historical + "\n");
                builder.setPositiveButton("View Photo", new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {
                        // TODO Auto-generated method stub
                        Intent i = new Intent(ProgramsList2.this, imageV.class);
                        i.putExtra("photo", pho);
                        i.putExtra("name", taName);
                        startActivity(i);
                    }
                });
                builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {
                        // TODO Auto-generated method stub
                        //dialog.dismiss();
                        Intent i = new Intent(ProgramsList2.this, Notifications.class);
                        i.putExtra("Activity", taName);
                        i.putExtra("Start", startTime);
                        i.putExtra("End", endTime);
                        startActivity(i);
                    }
                });
                builder.setNeutralButton("Map it", new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface arg0, int arg1) {
                        // TODO Auto-generated method stub
                        Intent i = new Intent(ProgramsList2.this, mapActivity.class);
                        i.putExtra("latitude", lat);
                        i.putExtra("longitude", lon);
                        startActivity(i);
                    }
                });
                builder.setCancelable(true);
                builder.show();
                }
                return false;

            }});
        //list.setOnItemClickListener((OnItemClickListener) this);

    }

} 
```

太感谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:25:17.490

从堆栈跟踪来看，看起来这是有问题的代码：

```
 Bundle programNum = getIntent().getExtras();
 final String progNum = programNum.getString("ProgNum"); 
```

您需要将所需的额外内容传递到您在通知中设置的 Intent 中。

# c# - .Equals、IComparable 和 IComparer 之间的区别

> ID：11193069
> 
> 赞同：-1
> 
> 时间：2012-06-25T16:12:25.070
> 
> 标签：c#, .net

有人可以用我可以理解的例子来解释.Equals、IComparable和IComparer之间的区别。

我在一次采访中被问到这个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T16:18:40.763

首先，从表面上看，`Equals`是一种方法（存在于每个对象中），而`IComparable`和`IComparer`是接口。

`Equals`存在于任何类中，并且可以被覆盖以根据类的上下文提供相等性测试（覆盖也是一个好习惯`GetHashCode`）。默认情况下，它只是测试对象在内存中是否相等，这不是很有用。`Equals`(and `GetHashCode`) 通常在搜索或散列的上下文中被赋予不同的实现。

实现`IComparable`是一种更细粒度的比较方式，因为它提供了`CompareTo`一种大于/小于比较的方法，而不是`Equals`简单的等于或不比较。例如，二叉搜索树结构可以从这种方法中受益。

`IComparer`类似于`IComparable`，除了它是从外部工作的。它允许您定义一个“中性”对象，用于比较其他两个对象而无需直接修改它们，您需要使用`IComparable`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:19:03.903

`Equals`是一种方法，当其他 2 个是接口时。所以看起来最大的不同。

更严重的是 - @ChrisSinclair 在评论中给了你答案......

如果两个对象相等（或相同的引用，取决于您的实现），Equals 返回 true/false IComparable/IComparer：[IComparable 和 IComparer 之间的区别](https://stackoverflow.com/questions/5980780/difference-between-icomparable-and-icomparer)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T16:23:08.680

.Equals() 为您的类提供了一种测试所有其他可能对象是否相等的方法。这可以被认为是对象相等的后备。所以这回答了我是否等同于作为参数传入的对象的问题。

IComparable 提供了一种比较可以排序的对象的方法，可能的用途包括排序。实现此接口会将排序逻辑放入您的类中。

IComparer 与 IComparable 几乎相同，只是逻辑包含在单独的类中。

# maven - Maven 版本插件跳过更新检查

> ID：11193070
> 
> 赞同：6
> 
> 时间：2012-06-25T16:12:25.557
> 
> 标签：maven, maven-3, nexus

当我尝试使用`versions:use-releases`我的发布存储库时，它被标记为“已禁用”，这意味着快照依赖项不会解析为发布。我不明白为什么该存储库被视为已禁用。

这是构建的简短调试输出：

```
[DEBUG]   (f) remoteArtifactRepositories = [       id: snapshots
      url: http://maven.live.hostname.net/content/repositories/snapshots/
   layout: default
snapshots: [enabled => true, update => daily]
 releases: [enabled => true, update => daily]
,        id: company-nexus
      url: http://maven.live.hostname.net/content/groups/public/
   layout: default
snapshots: [enabled => false, update => daily]
 releases: [enabled => true, update => daily]
]
[...]
[DEBUG] Looking for a release of promotion-test-central:promotion-test-central:jar:1.6.0-SNAPSHOT
[INFO] artifact promotion-test-central:promotion-test-central: checking for updates from snapshots
[DEBUG] Reading resolution-state from: /home/tester/.m2/repository/promotion-test-central/promotion-test-central/resolver-status.properties
[DEBUG] Writing resolution-state to: /home/tester/.m2/repository/promotion-test-central/promotion-test-central/resolver-status.properties
[DEBUG] Skipping update check for artifact promotion-test-central:promotion-test-central (/home/tester/.m2/repository/promotion-test-central/promotion-test-central/maven-metadata-company-nexus.xml) from disabled repository company-nexus (http://hostname/content/groups/public/) 
```

我运行一个将请求镜像`central`到我们的 Nexus 实例的设置，并且还指定了一个全局快照存储库：

```
 <mirrors>
        <mirror>
            <id>mendeley-nexus</id>
            <mirrorOf>central</mirrorOf>
            <url>http://maven.live.chonp.net/content/groups/public/</url>
        </mirror>
    </mirrors>
    <profiles>
        <profile>
            <id>default</id>
            <repositories>
                <repository>
                    <id>snapshots</id>
                    <url>http://maven.live.chonp.net/content/repositories/snapshots/</url>
                    <snapshots>
                        <enabled>true</enabled>
                    </snapshots>
                </repository>
            </repositories>
        </profile>
    </profiles>
    <activeProfiles>
        <activeProfile>default</activeProfile>
    </activeProfiles> 
```

存在相关依赖项的发布和快照版本，并且存储库在所有其他方面都按预期工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T17:08:03.167

您的 settings.xml 文件应按照[Nexus book 中的说明](http://sonatype.com/books/nexus-book/reference/config.html)进行配置。您的配置将不起作用，因为它仅部分覆盖了 Maven 的超级 pom。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-01T22:16:05.347

我也遇到了这个。我能够通过这样做来克服它：

```
 <repository>
        <id>my-snapshots</id>
        <url>https://nexus.corp.company.com/nexus/content/repositories/snapshots</url>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
        <releases>
            <enabled>true</enabled>
        </releases>
    </repository> 
```

这与以前的不同：

```
 <releases>
            <enabled>false</enabled>
        </releases> 
```

当 Maven 查找您*当前*工件的元数据并将其搜索限制为仅可能包含该工件的存储库时，这似乎会发生。

# haskell - Haskell：难以将上下文（Eq a）嵌入到数据声明中

> ID：11193078
> 
> 赞同：5
> 
> 时间：2012-06-25T16:12:46.547
> 
> 标签：haskell

我正在以下程序中编写一个简单的哈希树结构`hash_lookup.hs`：

```
module Main where

    data (Eq a) => HashTable a b = HashChildren (a, [HashTable a b]) | Hash (a, b) deriving (Show)

    getKey :: HashTable a b -> a

    getKey (HashChildren (k, hs)) = k
    getKey (Hash (k, h)) = k

    lookUp :: [a] -> HashTable a b -> Maybe (HashTable a b)

    lookUp [] table = return table
    lookUp _ (Hash _) = Nothing
    lookUp (p:path) (HashChildren (_, ts) ) = lookUp path ( head ( dropWhile (\x -> (getKey x) /= p) ts ) ) 
```

getKey 旨在检索给定 HashTable 的根键，lookUp 采用字符串列表，并旨在遵循它找到的第一个路径，直到它到达完整路径或失败（我知道这不是自然的树的行为，但这是我的教程想要的）。

我有两个问题：1）为什么我会收到一条错误消息，告诉我`a /= a`（从最后一行）不允许`No instance for (Eq a)`（终端中的错误消息），尽管`(Eq a)`在数据声明中？

2）除了我得到的错误和查找函数看似奇怪的行为之外，这是*好的*还是*惯用*的Haskell？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T16:30:37.500

Haskell 中常见的“陷阱”之一是，如果您将类约束放在`data`声明中，则使用该类型的**每个**函数也必须具有类约束。出于这个原因，您的`data`声明在 Haskell 中不是惯用的，您应该消除它的类约束。`data`无论如何，在声明中声明类约束对您没有任何好处。

基本上，函数类型**必须**重复类约束。该函数的用户如何知道他们必须使用相关类的实例？请注意，您可以根据根据您的类型定义的函数定义的函数定义`f`函数，这样根本没有提及您的类型，但是由于类型依赖性，它需要一个类型的参数间接并最终用作您类型的第一个参数。 的类型**必须**具有类约束，Haskell 正确地推断出来，如果缺少类型注释，它将拒绝您的类型注释。`g``h``HashTable a b``f``HashTable``a``HashTable``f`

# iphone - Cocos2d-iphone : 手柄按钮按下和释放

> ID：11193082
> 
> 赞同：0
> 
> 时间：2012-06-25T16:12:52.237
> 
> 标签：iphone, ios, cocos2d-iphone

实际上，只要按下按钮，我就需要移动我的精灵，释放按钮时精灵应该停止。

我的代码如下：

```
 CCMenuItemFont *item1 = [CCMenuItemFont itemFromString: @"icon.png" target:self selector:@selector(doit)];
        CCMenu * taskMenu = [CCMenu menuWithItems:item1,  nil];
        [self addChild:taskMenu];

-void()doit
{
        spritevelocity = 80;
} 
```

上面的代码使我的精灵在点击按钮时继续移动，但我需要在按钮释放后立即停止我的精灵。

我尝试了下面的代码但没有成功：

```
-void()doit
{
    buttonpressed = YES;
    if (buttonpressed) {
        spritevelocity = 80;
    }
}

- (void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
         buttonpressed = NO;
} 
```

注意：我只是想让 spritevelocity = 0 来停止我的精灵，也就是说我希望 spritevelocity = 0 释放按钮时

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:18:28.663

您需要继承 CCMenuItem 以防覆盖`selected`,`unselected`和`activate`方法。在那里，您可以强制您的按钮按照您的意愿行事。在这种情况下，不仅要对新闻采取行动，还要在发布时采取行动。这是覆盖 CCMenu 的一个很好的例子：http: [//johnehartzog.com/2009/10/easy-to-create-buttons-with-cocos2d/](http://johnehartzog.com/2009/10/easy-to-create-buttons-with-cocos2d/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:27:00.153

为什么不直接设置速度？

```
- (void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
     buttonpressed = NO;
     spritevelocity = 0;
 } 
```

你能解释一下什么时候被`doIt`调用吗？

# classification - SVM 中的大 C 但它泛化得很好？

> ID：11193087
> 
> 赞同：0
> 
> 时间：2012-06-25T16:13:16.300
> 
> 标签：classification, svm, libsvm

我正在使用 SVM 进行多类分类。我将我的特征缩放到 [0,1] 并按照 LIBSVM 指南的建议使用网格搜索找到参数 C 和 gamma。我为此使用了 10 倍交叉验证。

但是，我得到的参数很奇怪。C 非常大 (2^15)。

起初我怀疑模型可能过拟合。我在训练/验证/测试之间绘制图表，看起来很奇怪。C越大，我得到的错误越低（这是预期的）。但是，无论 C 不同，训练/验证/测试之间的差异一直很小（假设 C 较小时它很小，而随着 C 增加而变大，不是吗？）。

所以，我不确定发生了什么？欠拟合？过拟合？还是我的数据有问题？有什么想法吗？

感谢你们！

露西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:44:24.710

用于网格搜索的 libsvm 代码使用 log2。您确定您的 C 参数 2^15 不是真正的 log2(2^15) = 15？

# templates - Wicket：是否可以根据面板添加到的页面显示面板的组件？

> ID：11193088
> 
> 赞同：1
> 
> 时间：2012-06-25T16:13:16.683
> 
> 标签：templates, wicket, panel, wicket-1.5, webpage-rendering

我对 Wicket 很陌生，所以如果这是一个简单的任务，请原谅。我试图寻找例子，但空无一物。

这是场景。假设我有一个包含 25 个数据点（姓名、出生日期、地址、电话等）的客户信息面板。我想在网站的许多不同页面中重用这个面板。现在假设我在面板出现的 3 个不同页面上有以下标准：

*   第 1 页 - 所有字段均可见且可编辑
*   第 2 页 - 出生日期、性别、客户姓名可见但不可编辑，所有其他字段可见且可编辑
*   第 3 页 - 出生日期和性别不可见，地址可见且可编辑，所有其他字段可见但不可编辑。

有没有办法使用相同的面板（以减少代码重复），但根据面板加载到的当前页面控制其组件？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T20:27:02.443

我建议不要像这样隐式更改可见性和可编辑性。而是考虑根据组件的构造函数参数或自定义组件上的其他方法使其显式化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T20:17:58.140

在您的面板中，您可以调用该`getPage()`方法。您可以检查页面是否是某个类的实例，您可以通过调用来获取页面类`getPageClass()`。

`setVisible()`可以通过调用方法或重写方法来设置面板内组件的可见性`isVisible()`。如果组件应该是可编辑的，可以通过使用`isEnabled()`方法（或覆盖`setEnabled()`）来控制。

```
class YourPanel extends Panel {
    public YourPanel() {
        add(new TextField("name") {
                @Override
                boolean isVisible() {
                    return getPage().getPageClass().equals(Page2.class);
                }
        }
        TextField genderTextField = new TextField("gender");
        genderTextField.setVisible(!getPage().getPageClass().equals(Page3.class));
        add(genderTextField);
    }
} 
```

如您所见，对于许多组件和许多情况，检查代码将非常复杂。如果您创建自定义面板，根据其可见性和可编辑性规则添加组件并控制整个面板（如果它们可见和/或可编辑），也许您可​​以获得更清晰的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T20:26:58.813

根据另一个答案，您可以调用`setVisible()`等来自定义外观。

但是，我不建议您将面板与显示页面耦合；这将引入循环依赖，并且每次您想在新类型的页面上重用面板时，您都必须为新页面添加另一个检查。相反，只需使面板可配置（最好在构建时通过传递参数来做到这一点，例如`boolean addressVisible`）。

# javascript - Javascript 添加的行不响应点击事件

> ID：11193089
> 
> 赞同：0
> 
> 时间：2012-06-25T16:13:16.813
> 
> 标签：javascript, jquery, event-handling

我有一个我一直在处理的表单，它使用 javascript 动态添加和删除表行。我也在尝试对每一行和每一行的文本框进行编号。假设我添加了四行。如果我删除第 3 行，剩余的行标记为 1、2、4。我的 jquery 应该重新编号行，1、2、3。我的代码发布在下面。我有一种预感，一旦添加了这些行，它们就不会被识别。谁能帮我解决这个问题？

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
    function deleteRow(row) {
        var x = document.getElementById('bom_table');
        if (x.rows.length > 4) {
            var i = row.parentNode.parentNode.rowIndex;
            document.getElementById('bom_table').deleteRow(i);

        }
    }

    function insRow() {

        var x = document.getElementById('bom_table');
        var len = x.rows.length;
        // deep clone the targeted row
        var new_row = x.rows[len - 2].cloneNode(true);
        // get the total number of rows

        // set the innerHTML of the first row 
        //            new_row.cells[0].innerHTML = len - 2;

        // grab the input from the first cell and update its ID and value
        var inp1 = new_row.cells[1].getElementsByTagName('input')[0];
        inp1.id += len;
        inp1.value = '';

        // grab the input from the first cell and update its ID and value
        var inp2 = new_row.cells[2].getElementsByTagName('input')[0];
        inp2.id += len;
        inp2.value = '';

        // grab the input from the first cell and update its ID and value
        var inp3 = new_row.cells[3].getElementsByTagName('input')[0];
        inp3.id += len;
        inp3.value = '';

        // grab the input from the first cell and update its ID and value
        var inp4 = new_row.cells[4].getElementsByTagName('input')[0];
        inp4.id += len;
        inp4.value = '';

        // grab the input from the first cell and update its ID and value
        var inp5 = new_row.cells[5].getElementsByTagName('input')[0];
        inp5.id += len;
        inp5.value = '';

        // append the new row to the table
        var tbody = document.getElementById('bom_table').getElementsByTagName("tbody")[0];
        tbody.appendChild(new_row);

    }

    function deleteRow2(row) {
        var x = document.getElementById('ro_table');
        if (x.rows.length > 4) {
            var i = row.parentNode.parentNode.rowIndex;
            document.getElementById('ro_table').deleteRow(i);
        }

    }

    function insRow2() {

        var x = document.getElementById('ro_table');
        var len = x.rows.length;
        // deep clone the targeted row
        var new_row = x.rows[len - 2].cloneNode(true);
        // get the total number of rows

        // set the innerHTML of the first row 
        //            new_row.cells[0].innerHTML = len - 2;

        //          if (len = 3)
        //              new_row = x.rows[2].cloneNode(true);
        //          else
        //              ;

        // grab the input from the first cell and update its ID and value
        var inp1 = new_row.cells[1].getElementsByTagName('input')[0];
        inp1.id += len;
        inp1.value = '';

        // grab the input from the first cell and update its ID and value
        var inp2 = new_row.cells[2].getElementsByTagName('input')[0];
        inp2.id += len;
        inp2.value = '';

        // grab the input from the first cell and update its ID and value
        var inp3 = new_row.cells[3].getElementsByTagName('input')[0];
        inp3.id += len;
        inp3.value = '';

        // grab the input from the first cell and update its ID and value
        var inp4 = new_row.cells[4].getElementsByTagName('input')[0];
        inp4.id += len;
        inp4.value = '';

        // grab the input from the first cell and update its ID and value
        var inp5 = new_row.cells[5].getElementsByTagName('input')[0];
        inp5.id += len;
        inp5.value = '';

        // append the new row to the table
        var tbody = document.getElementById('ro_table').getElementsByTagName("tbody")[0];
        tbody.appendChild(new_row);
        //            x.appendChild(new_row);

    }

</script>
<script type="text/javascript">
    $(document).ready(function () {
        var i = 0
        var j = 1
        var k = 1
        $('input').each(function (i) {

            $(this).attr("id", "text_" + i++);

        })
        $('.bom_rowcount').each(function (j) {
            $(this).attr("innerHTML", 1 + j++);

        })
        $('.ro_rowcount').each(function (k) {
            $(this).attr("innerHTML", 1 + k++);

        })
        $(".remove").click(removefunction());

        function removefunction() {
            $('input').each(function (i) {

                $(this).attr("id", "text_" + i++);
            })
            $('.bom_rowcount').each(function (j) {
                $(this).attr("innerHTML", 1 + j++);

            })
            $('.ro_rowcount').each(function (k) {

                $(this).attr("innerHTML", 1 + k++);

            })
        };

        $(".add").click(function () {
            $('input').each(function (i) {
                $(this).attr("id", "text_" + i++);
            })
            $('.bom_rowcount').each(function (j) {
                $(this).attr("innerHTML", 1 + j++);
            })
            $('.ro_rowcount').each(function (k) {
                $(this).attr("innerHTML", 1 + k++);
            })

        });

    });
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T16:17:28.480

您的代码是这样编写的，它会将事件处理程序添加到页面准备就绪后存在的节点。

这不包括您随后添加的任何节点。

您需要做的是使用[`on`](http://api.jquery.com/on/). 事件委托将处理程序放在文档上，然后检查每个冒泡的事件，以查看其目标是否与您的选择器匹配。

阅读文档并尝试一下。如果您仍然无法解决您的问题，您可以更新此问题（可能不是正确的做法）或提出另一个 SO 问题，解释您尝试了什么以及什么不起作用。

# java - 在 Java 中，据说 PermGen 空间“扩大了 30%”。这是否意味着不再需要 max ？

> ID：11193090
> 
> 赞同：0
> 
> 时间：2012-06-25T16:13:22.610
> 
> 标签：java, permgen, jvm-arguments

我最近有理由查看有关JVM 参数的[文档。](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html#PerformanceTuning)`-XX:MaxPermSize`

它的文档部分说：

> 5.0 及更高版本：64 位 VM 扩展 30%

这是否意味着`MaxPermSize`Java 1.5 和更高版本的虚拟机已经过时了？或者，正如我怀疑的那样，这个缩放信息是否只是描述*了*最大的情况？

（实际上，想想看，30% 是*什么*？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:21:48.430

由于更大的指针，64 位 JVM 倾向于使用更多内存。为了缓解这种增长，增加了 64 位 JVM 中所有内存区域的*默认大小。*您仍然可以覆盖默认值并使用您想要的任何值。

而且，如果你已经在使用`-XX:MaxPermSize`，这个改变与你完全无关。

# c - 在整个程序的头文件中共享变量和结构

> ID：11193098
> 
> 赞同：2
> 
> 时间：2012-06-25T16:14:08.600
> 
> 标签：c, variables, global-variables, header-files, structure

我在我的程序的整个 c 文件中共享全局变量和 3 个结构时遇到了很大的问题。我知道使用全局变量可能不是最好的方法，但这似乎适合我现在。

出现的 2 个常见错误是：

variable_name 的未定义引用

在 variable_name 之前应出现错误 '='、','、'%3b'、'asm' 或 '<strong>attribute'

我想做的是：

在 variables.h 和 variables.c 定义我的全局变量

定义函数为file1.h、file2.h等。

喜欢 ：

文件1.h：

```
#ifndef FILE1_H
#define FILE1_H

void function_file1(void);

#endif 
```

文件1.c：

```
#include "file1.h"

void function_file1(void) {
//do sth
} 
```

我在 variables.h 中将全局变量和结构定义为 extern，然后在 variables.c 中再次不使用 extern 关键字

但是，在一遍又一遍地这样做之后，我不断收到上述 2 个错误。我有什么遗漏吗？

以下是有关我所做工作的更多信息：

变量.h：

```
#ifndef VARIABLES_H
#define VARIABLES_H

extern int x;
extern int y;
extern int foo = 3; // i have set value to 3 variables with extern like the foo one

    /*Tooltips  */
struct test_struct {
/* variables 
*/

} test;

extern struct test_struct test;

#endif 
```

函数.h：

```
#ifndef FUNCTIONS_H
#define FUNCTIONS_H

#include "variables.h"

void do_sth(void) { 
//do sth
}

#endif 
```

主程序

```
/* including libraries before including variables.h and functions.h */
#include "variables.h"
#include "functions.h"

........ 
```

这是程序的基本结构。有一个包含全局变量的 variables.h 文件。大约有 7 个 functions.h 类文件，其中包含程序的几个函数。使用这种结构，编译器不会显示任何错误。

问题是：如何为程序中的每个 .h 文件制作一个 .c 文件？像 variables.h 和 variables.c 以及 functions.h 和 functions.c 一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:22:19.730

首先重新考虑将变量和函数本身分开是否真的有意义。

一般来说，一些变量和一些函数之间是有关系的。按照这样的关系进行分组可能更有意义。

将变量和一起处理它们的函数分组。

无论如何，回到您的问题，定义和声明变量的可能方法如下：

变量.h：

```
#ifndef VARIABLES_H
#define VARIABLES_H

extern int x;
extern int y;
extern int foo;

struct test_struct {
/* variables 
*/

};

extern struct test_struct test;

#endif 
```

变量.c：

```
#include "variables.h"    

int x;
int y;
int foo = 3; // i have set value to 3 variables with extern like the foo one

struct test_struct test;

... 
```

包含`variables.h`到任何使用外部的模块中，然后让链接器添加`variables.o`编译出来的`variables.c`.

# php - 具有动态行的 Foreach PHP

> ID：11193102
> 
> 赞同：0
> 
> 时间：2012-06-25T16:14:24.513
> 
> 标签：php, dynamic, foreach, row, message

我使用下面的脚本在表单中添加动态行。

```
<TITLE> Add/Remove dynamic rows in HTML table </TITLE>
<SCRIPT language="javascript">
    function addRow(tableID) {

        var table = document.getElementById(tableID);

        var rowCount = table.rows.length;
        var row = table.insertRow(rowCount);

        var colCount = table.rows[0].cells.length;

        for(var i=0; i<colCount; i++) {

            var newcell = row.insertCell(i);

            newcell.innerHTML = table.rows[0].cells[i].innerHTML;
            //alert(newcell.childNodes);
            switch(newcell.childNodes[0].type) {
                case "text":
                        newcell.childNodes[0].value = "";
                        break;
                case "checkbox":
                        newcell.childNodes[0].checked = false;
                        break;
                case "select-one":
                        newcell.childNodes[0].selectedIndex = 0;
                        break;
            }
        }
    }

    function deleteRow(tableID) {
        try {
        var table = document.getElementById(tableID);
        var rowCount = table.rows.length;

        for(var i=0; i<rowCount; i++) {
            var row = table.rows[i];
            var chkbox = row.cells[0].childNodes[0];
            if(null != chkbox && true == chkbox.checked) {
                if(rowCount <= 1) {
                    alert("Cannot delete all the rows.");
                    break;
                }
                table.deleteRow(i);
                rowCount--;
                i--;
            }

        }
        }catch(e) {
            alert(e);
        }
    }

</SCRIPT>

<INPUT type="button" value="Add Row" onclick="addRow('dataTable')" />

<INPUT type="button" value="Delete Row" onclick="deleteRow('dataTable')" />

<TABLE id="dataTable" width="350px" border="1">
    <TR>
        <TD><INPUT type="checkbox" name="chk[]"/></TD>
        <TD><INPUT type="text" name="txt[]"/></TD>
        <TD>
            <SELECT name="country[]">
                <OPTION value="in">India</OPTION>
                <OPTION value="de">Germany</OPTION>
                <OPTION value="fr">France</OPTION>
                <OPTION value="us">United States</OPTION>
                <OPTION value="ch">Switzerland</OPTION>
            </SELECT>
        </TD>
        <TD><INPUT type="text" name="passport[]"/></TD>
    </TR>
</TABLE> 
```

### 使用以下php：

> $chkbox = $_POST['chk'];
> $txtbox = $_POST['txt'];
> $country = $_POST['country'];
> $passport= $_POST['护照'];
> foreach($txtbox as $a => $b)
> echo "$chkbox[$a] - $txtbox[$a] - $country[$a] - $passport[$a]";

效果很好，让它显示在我的屏幕上。然后我想将它全部集成到我的扩展表单中，我需要将其发送到我的邮件地址......请参阅下面的 php 示例（所有 $_POST 都有附加）。“foreach”代码能够将上述动态行中的所有信息发送到我的邮件地址是什么？我必须在我的 $message 中添加什么才能使其可见？谢谢你的帮助。

> `$TripType = $_POST['TripType'];
> $DepartureDay = $_POST['DepartureDay'];
> $DepartureMonth = $_POST['DepartureMonth'];
> $DepartureYear = $_POST['DepartureYear'];
> $ReturnDay = $_POST['ReturnDay'];
> $ReturnMonth = $_POST['ReturnMonth'];
> $ReturnYear = $_POST['ReturnYear'];
> $Adults = $_POST['Adults'];
> $Children411 = $_POST['Children411'];
> $Children03 = $_POST['Children03'];
> foreach ($_POST['Check'] as $value) {$check_msg .= $value\n";}
> $Comments = $_POST['Comments'];
> $mail = $_POST['mail'];
> $telephone = $_POST['telephone'];
> $message = "Booking\n\nTripType: $TripType\n\nDepartureDay: $DepartureDay\nDepartureMonth: $DepartureMonth\nDepartureYear: $DepartureYear\n\nReturnDay: $ReturnDay\nReturnMonth: $ReturnMonth\nReturnYear: $ReturnYear\n\nAdults: $Adults\nChildren411: $Children411\nChildren03: $Children03\n $check_msg\nComments: $Comments\nmail: $mail\ntelephone: $telephone";
> $xHeaders = "From: $mail\nX-Mailer: PHP/" . phpversion(); mail ("mymail@gmail.com", internet booking", $message, $xHeaders);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:26:59.467

这应该做你想要的。您的 HTML 不包含 FORM 或 INPUT/submit，所以我猜它们在那里并且正在工作。

```
foreach($_POST['chk'] as $num => $value) {
        $check_msg .= "$num = $value \n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:27:57.373

尝试：

```
$message = '';
foreach ($_POST as $k => $v) {
    $message .= $k.': '.$v.'\n';
} 
```

# c# - 获取2个html标签之间的文本c#

> ID：11193105
> 
> 赞同：5
> 
> 时间：2012-06-25T16:14:33.777
> 
> 标签：c#, html, string, tags

我正在尝试获取提供的 html（跨度）之间的数据（在本例中为 31）

这是原始代码（来自 chrome 中的检查元素）

> ```
> <span id="point_total" class="tooltip" oldtitle="Note: If the number is black, your points are actually a little bit negative.  Don't worry, this just means you need to start subbing again." aria-describedby="ui-tooltip-0">31</span> 
> ```

我有一个包含页面源的富文本框，这里是相同的代码，但在富文本框的第 51 行：

> ```
> <DIV id=point_display>You have<BR><SPAN id=point_total class=tooltip jQuery16207621750175125325="23" oldtitle="Note: If the number is black, your points are actually a little bit negative.  Don't worry, this just means you need to start subbing again.">17</SPAN><BR>Points </DIV><IMG style="FLOAT: right" title="Gain subscribers" border=0 alt="When people subscribe to you, you lose a point" src="http://static.subxcess.com/images/page/decoration/remove-1-point.png"> </DIV> 
> ```

我该怎么做呢？我已经尝试了几种方法，但它们似乎都不适合我。

我正在尝试从此页面检索点值：http: [//www.subxcess.com/sub4sub.php](http://www.subxcess.com/sub4sub.php) 该数字会根据您的订阅者而变化。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-25T16:22:48.397

您可能对此非常具体：

```
var regex = new Regex(@"<span id=""point_total"" class=""tooltip"" oldtitle="".*?"" aria-describedby=""ui-tooltip-0"">(.*?)</span>");

var match = regex.Match(@"<span id=""point_total"" class=""tooltip"" oldtitle=""Note: If the number is black, your points are actually a little bit negative.  Don't worry, this just means you need to start subbing again."" aria-describedby=""ui-tooltip-0"">31</span>");

var result = match.Groups[1].Value; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-25T16:39:58.130

您需要使用[HtmlAgilityPack](http://html-agility-pack.net/?z=codeplex)来执行此操作，这非常简单：

```
HtmlDocument doc = new HtmlDocument();
doc.Load("filepath");

HtmlNode node = doc.DocumentNode.SelectSingleNode("//span"); //Here, you can also do something like (".//span[@id='point_total' class='tooltip' jQuery16207621750175125325='23' oldtitle='Note: If the number is black, your points are actually a little bit negative.  Don't worry, this just means you need to start subbing again.']"); to select specific spans, etc...

string value = node.InnerText; //this string will contain the value of span, i.e. <span>***value***</span> 
```

正则表达式虽然是一个可行的选择，但如果可能的话，您通常希望避免用于解析 html（请参阅[此处](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)）

在可持续性方面，您需要确保您了解页面源（即刷新几次并查看每次刷新后您的目标跨度是否嵌套在相同的父级中，确保页面位于相同的通用格式等...，然后使用上述原则导航到跨度）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T16:20:24.873

有多种可能性。

1.  [正则表达式](http://www.regular-expressions.info/examples.html)
2.  让 HTML 被解析为 XML 并通过[XPath获取值](http://de.wikipedia.org/wiki/XPath)
3.  遍历所有元素。如果您使用跨度标记，请跳过所有字符，直到找到结束的“>”。那么你需要的值就是下一个开 '<' 之前的一切

另请查看[System.Windows.Forms.HtmlDocument](http://msdn.microsoft.com/en-us/library/system.windows.forms.htmldocument.aspx)

# iphone - 如何使用 NSNotificationCenter 将通知从一个 UIButton 发送到另一个 UIButton

> ID：11193106
> 
> 赞同：0
> 
> 时间：2012-06-25T16:14:47.157
> 
> 标签：iphone

当单击快退按钮时，此 UIButton rewind 如何向 UIButton play 发送通知以执行 playpauseaction 方法。

```
-(void)rewind:(id)sender{
[timer invalidate]; 
audioPlayer.currentTime = 0;
MainViewController *viewController = [[MainViewController alloc] init];
viewController.view.frame = CGRectMake(0, 0, 320, 480);
[self.view addSubview:viewController.view];
[self.view addSubview:toolbar];
[viewController release];
} 

 -(void)playpauseAction:(id)sender {    
if([audioPlayer isPlaying])
{
    [sender setImage:[UIImage imageNamed:@"Play Icon.png"] forState:UIControlStateSelected];
    [audioPlayer pause];
    [self pauseTimer];
    [self pauseLayer:self.view.layer];
}
else
{
    [sender setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateNormal];
    [audioPlayer play];
    [self resumeTimer];
    [self resumeLayer:self.view.layer];

    if(isFirstTime == YES)
    {
        self.timer = [NSTimer scheduledTimerWithTimeInterval:11.0
                                                      target:self
                                                    selector:@selector(displayviewsAction:)
                                                    userInfo:nil
                                                     repeats:NO];
        isFirstTime = NO;
    }
    }
    } 
```

单击时倒带按钮执行倒带方法，并向播放按钮发送通知以执行 playpauseAction 方法。

感谢帮助。

**编辑** 已宣布

```
 @property (nonatomic, retain) UIButton *playButton;
    @synthesize playButton = _playButton; 
   [self playpauseAction:_playButton]; 
```

发生的事情是当单击倒带按钮时，它执行播放暂停操作方法，但没有根据 playpauseaction 方法切换播放按钮暂停。这是为什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:26:17.207

在您看来确实加载了这个；

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(playpauseAction) name:@"ButtonPressed" object:nil]; 
```

按下按钮时添加此代码；

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"ButtonPressed" object:nil]; 
```

它应该调用你的 playpauseAction。

不要忘记在你的 dealloc 中写；

```
[[NSNotificationCenter defaultCenter] removeObserver:self name:@"ButtonPressed" object:nil]; 
```

否则你的代码会崩溃，因为即使你的类的实例不再存在，该方法仍然会尝试被调用。

希望这可以帮助，

乔纳森

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:24:56.620

如果您有对播放暂停按钮的引用（您希望让这种事情变得更容易），您可以在您的`rewind`方法中写下这一行

```
[self playpauseAction:playpauseButton]; 
```

你根本不需要使用通知中心

# python - Python删除CSV文件末尾的空格

> ID：11193109
> 
> 赞同：1
> 
> 时间：2012-06-25T16:14:48.880
> 
> 标签：python, django, csv

我有一个 Django 视图，它读取 CSV 文件并将其保存到模型中。

**视图.py**：

```
def csv_upload(request):
    ...
    file = request.FILES['attach']
    reader = csv.reader(file, delimiter=';') 
    next(reader) # skip headers

    for line in reader:
        ... # process and save 
```

**编辑**

追溯：

```
File "/home/sam/django-projects/datazone/local/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/sam/django-projects/datazone/bin/datazone/climate/views.py" in climate_upload
258\.                 report.year = line[1]

Exception Type: IndexError at /climate/upload/
Exception Value: list index out of range 
```

**结束编辑**

在使用文件变体进行测试时，我注意到如果文件中有尾随空格（例如，由于保存表单 Excel 导致空行），我会收到`Index out of range`错误消息。

我的问题是，我怎样才能从文件的末尾（并且可能只是为了确定）的开头去掉空格。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:04:37.383

`line`将是一个列表。你不能剥离它。如果它是一个空列表，则意味着它是文件中的空行。只需检查行中是否包含元素。空行将没有任何列表元素。

而不是剥离线，您只需检查该线是否有效`if line:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:39:33.503

如果我的理解是正确的，您想处理文件末尾的一些空白行，对吗？

```
for line in reader:
    if line:
        ... # process and save 
```

感谢@dm03514 指出我原始答案中的错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T16:30:07.303

你试过了`line.strip()`吗？

[http://docs.python.org/library/stdtypes.html](http://docs.python.org/library/stdtypes.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T17:04:36.597

Line 是一个列表，而不是一个字符串。如果您将整个列表作为参数传递，您可以创建一个 strip_list 函数。

```
def strip_list(my_list):
    for index, string in enumerate(my_list):
         try: my_list[index] = string.strip()
         # In case it's not a string
         except AttributeError: pass
    return my_list

for line in reader:
    line = strip_list(line) 
```

或者，您可以在使用时剥离每个项目。

```
line[0].strip() 
```

# haskell - 矩阵除法的问题

> ID：11193110
> 
> 赞同：-1
> 
> 时间：2012-06-25T16:14:54.050
> 
> 标签：haskell

我有想法在 Haskell 中编写一个矩阵除法作为`Muliply A* Inverse B`.

我写了一些代码来做到这一点，但编译器有阻止我的想法。它显示以下错误：

```
Invalid type signature :MatrixDivision :: Matrix-> Matrix-> Matrix at line 86:1
Should be of (variable)::(Type) 
```

我错了什么？这是代码：

```
import List

type Vector = [Int]
type Matrix = [Vector]

--basic constructions for vectors

zeroVector :: Int -> Vector
zeroVector n = replicate n 0

--basic operations for vectors

dotProduct :: Vector -> Vector -> Int
dotProduct v w = sum ( zipWith (*) v w )

vectorSum :: Vector -> Vector -> Vector
vectorSum = zipWith (+)

vectorScalarProduct :: Int -> Vector -> Vector
vectorScalarProduct n vec = [ n * x | x <- vec ]

--basic constructions for matrices

-- elemMatrix n i j v   is the n-by-n elementary matrix with
-- entry  v  in the (i,j) place
elemMatrix :: Int -> Int -> Int -> Int -> Matrix
elemMatrix n i j v =
  [ [ entry row column | column <- [1..n] ] | row <- [1..n] ]
  where
    entry x y
    | x == y           = 1
    | x == i && y == j = v
    | otherwise        = 0

idMatrix :: Int -> Matrix
idMatrix n = elemMatrix n 1 1 1

zeroMatrix :: Int -> Int -> Matrix
zeroMatrix i j = replicate i (zeroVector j)

--basic operations for matrices

matrixSum :: Matrix -> Matrix -> Matrix
matrixSum = zipWith vectorSum

matrixScalarProduct :: Int -> Matrix -> Matrix
matrixScalarProduct n m = [ vectorScalarProduct n row | row <- m ]

matrixProduct :: Matrix -> Matrix -> Matrix
matrixProduct m n = [ map (dotProduct r) (transpose n) | r <- m ]

{- The determinant and inverse functions given here are only for examples
of Haskell syntax.  Efficient versions using row operations are implemented
in RowOperations.hs .-}

--determinant using cofactors

remove :: Matrix -> Int -> Int -> Matrix
remove m i j 
  | m == [] || i < 1 || i > numRows m || j < 1 || j > numColumns m =
    error "(i,j) out of range"
  | otherwise = transpose ( cut (transpose ( cut m i ) ) j )

determinant :: Matrix -> Int
determinant [] = error "determinant: 0-by-0 matrix"
determinant [[n]] = n
determinant m = sum [ (-1)^(j+1) * (head m)!!(j-1) * determinant (remove m 1    j) | j <- [1..(numColumns m) ] ]

--inverse

cofactor :: Matrix -> Int -> Int -> Int
cofactor m i j = (-1)^(i+j) * determinant (remove m i j)

cofactorMatrix :: Matrix -> Matrix
cofactorMatrix m = [ [ (cofactor m i j) | j <- [1..n] ] | i <- [1..n] ]
  where
    n = length m

inverse :: Matrix -> Matrix
inverse m = transpose [ [ quot x ( determinant m) |
  x <- row ] | row <- (cofactorMatrix m) ]

--Matrix Division

MatrixDivision :: Matrix -> Matrix -> Matrix 
MatrixDivision  m n = matrixProduct m inverse(n) 
```

我编写了完整的代码以提供更多信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T16:31:19.410

在表达式级别，以大写字母开头的名称保留给数据构造函数。

你`MatrixDivision`应该被称为`matrixDivision`

请参阅Haskell 报告的[第 2.4 节。](http://www.haskell.org/onlinereport/haskell2010/haskellch2.html#x7-180002.4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:33:00.013

`MatrixDivision`不是有效的函数名，因为它是大写的。改为调用它`matrixDivision`。

# jquery - 成功的 Ajax 将字段的值设置为空

> ID：11193119
> 
> 赞同：0
> 
> 时间：2012-06-25T16:15:28.127
> 
> 标签：jquery, ajax, post

我想在成功时清空列出的字段值以清空。在下面的代码中，一个 url 被调用并将值传递给页面，在该页面上，值被获取并插入到 mysql 中，所以在 succees 函数上，我希望从中获取值的字段变为空。

```
$('#datacouform').click(function() {
    var couname = $('#namecoun').attr('value');
    var coucode = $('#codecoun').attr('value');
    if ((couname === '') || (coucode === '')) {
        $('p#errorcou').show(200);
        return false;
    }
    else if ((!couname.match(/^[a-zA-Z]+$/)) || (!coucode.match(/^[a-zA-Z]+$/))) {
        $('p#errorcou').hide(20);
        $('p#errorcou').show(50);
        return false;
    } else {
        $('a#counloader').show();
        $.ajax({
            type: 'POST',
            url: 'adddata.php',
            data: 'counname=' + couname + '&councode=' + coucode,
            success: function() {
                $('a#counloader').hide();
                $('#addcountryform').hide(400);
                $('#addcountry').show(400);
            }
        });
        return false;
    }
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:51:31.047

呼应其他人已经说过的内容，获取元素的值 - 你真的应该使用 val() 函数。

```
$('#namecoun').val();  //get the value of the element 
```

然后，如果您提供 .val() 参数，它将设置元素的值（而不是获取它）。

```
$('#namecoun').val(''); // set (empty) the value of the element 
```

在 jQuery 中也有更好的 POST 方法；IE

```
$.post({
    url: "adddata.php",
    data: { counname : counname,
            councode : coucode },
    success: function(){
        $('#namecoun').val('');
        /* and so on... */
    }
}); 
```

这只是您所做工作的捷径，但是，以这种方式传递数据可以节省字符串操作。或者，使用序列化函数。

另外，不要返回false。这是一种不好的做法，会做很多事情，而且当您维护别人的代码并且您所看到的只是“返回 false”时，这可能会让人感到困惑；即使发生正确的事件。您正在寻找的是 preventdefault 。像这样..

```
$('#example').click( function(e){
    /* code here */
    e.preventDefault();
}); 
```

[这里](http://fuelyourcoding.com/jquery-events-stop-misusing-return-false/)有更多关于不返回 false 的原因的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:19:19.680

您可以使用以下命令清除文本输入值：

```
$('#inputId').val(''); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T16:19:50.710

这更好地获得价值

```
var couname = $('#namecoun').val();
var coucode = $('#codecoun').val(); 
```

要清空这些输入，请将这些行放在`success`回调函数中。

```
$('#namecoun').val('');
$('#codecoun').val(''); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T16:20:04.173

你应该使用

```
var couname = $('#namecoun').val(); 
```

在获取输入元素的值时获得一致的结果。然后，如果要设置值，只需使用

```
$('#namecoun').val('') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T16:26:54.477

假设 '#namecoun' 和 '#codecoun' 只是输入，我对您提供的代码片段进行了一些调整。尝试以下操作：

```
$('#datacouform').click(function() {
    var couname = $('#namecoun').val();
    var coucode = $('#codecoun').val();
    if ((couname.length == 0) || (coucode.length == 0)) {
        $('p#errorcou').show(200);
    } else if ((!couname.match(/^[a-zA-Z]+$/)) || (!coucode.match(/^[a-zA-Z]+$/))) {
        $('p#errorcou').hide(20);
        $('p#errorcou').show(50);
    } else {
        $('a#counloader').show();
        $.ajax({
            type: 'POST',
            url: 'adddata.php',
            data: 'counname=' + couname + '&councode=' + coucode,
            success: function() {
                //RESET VALUES TO EMPTY
                $('#namecoun').val('');
                $('#codecoun').val('');
                $('a#counloader').hide();
                $('#addcountryform').hide(400);
                $('#addcountry').show(400);
            }
        });
    }
}); 
```

我没有使用“.attr('value')”来获取输入的值，而是使用了 jQuery .val()，它将值作为字符串返回。然后我使用“.length”来查看这些值是否为空。我删除了隐含的退货。使用相同的 .val() 函数，您可以通过在 .val('value') 等参数中放置一个字符串来为这些输入分配值。在这种情况下，我们希望字段为空，所以我给了它一个空字符串 .val('')

希望有帮助。

# libgit2sharp - 标记为“已删除”的文件在 LibGit2Sharp 中报告为“缺失”

> ID：11193123
> 
> 赞同：3
> 
> 时间：2012-06-25T16:15:57.667
> 
> 标签：libgit2sharp, git-status

使用 Git Bash 查看我的存储库状态时，我可以看到许多标记为“已删除”的文件。LibGit2Sharp RepositoryStatus 将这些文件报告为“丢失”。RepositoryStatus 对象也有一个集合“Removed”。

这两者有什么区别？删除的文件不应该标记为“已删除”吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T18:17:59.210

> 那么这两者有什么区别呢？

**Missing**和**Removed**是**[FileStatus](https://github.com/libgit2/libgit2sharp/blob/vNext/LibGit2Sharp/FileStatus.cs#L9)**枚举的条目。

如xml文档所述

*   *Missing*表示*“该文件已从工作目录中删除。索引中存在以前的版本。”*

*   *Removed*表示*“删除的文件已从工作目录提升到 Index。Head 中存在以前的版本。”*

它们可以被视为文件生命周期的特定状态。让我们考虑一个存在于工作目录、索引和 Head 中的文件。其状态为未**更改**。

当从工作目录中被抑制（即从文件系统中删除）时，文件的状态变为***Missing***

如果现在，一个阶段的文件抑制，它从索引中消失，状态变为已**删除**

> 不应该将已删除的文件标记为“已删除”吗？

Git 使用**删除**的同一个词来描述这两种状态。但是，有一些视觉线索可以让您消除它们的歧义。

跑步时`git status`

*   **该部分下列出了丢失**的文件，`Changes not staged for commit:`并且删除的单词以**红色显示**

*   **删除**的文件列在该`Changes to be committed:`部分下，删除的单词显示为**绿色**

# c# - 将用户给定的字符串与 C# 中的答案进行比较

> ID：11193125
> 
> 赞同：2
> 
> 时间：2012-06-25T16:16:22.317
> 
> 标签：c#, string

考虑一个询问您问题的程序，例如“您访问的最后一个站点是什么？” 答案是“stackoverflow”。用户被问到这个问题并给出答案“stakovervlow”或“overflowstack”。我仍然需要程序将其视为正确答案。

为了比较普通字符串，我会使用 StringCompare 类，但在这种情况下这不起作用。我在网上搜索了一些关于 SOUNDEX 的文章和一些算法来比较字符串中的每个字符并计算相似度百分比（如 damerau levenshtein 距离），但我真的不知道什么是最好的。

任何人都知道.net 中是否有一个类来完成此操作，或者将用户答案与正确答案进行比较的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:21:14.343

从[文档](http://msdn.microsoft.com/en-us/library/system.windows.controls.spellcheck.aspx)中有 SpellCheck 类。您还可以为字典中没有的单词添加自定义字典，例如“StackOverflow”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:21:46.603

你想做的事情是相当困难的。简单但乏味的方法是在数据库中创建一个字典或一个表，列出常见的拼写错误。

困难的方法是尝试编写一些代码来进行自然语言处理。在这方面最成功的两个尝试是谷歌和 IBM 的沃森超级计算机的语义搜索。我猜你不会很快复制他们的方法。

# ruby - Hpricot 去除单个元素

> ID：11193130
> 
> 赞同：3
> 
> 时间：2012-06-25T16:16:41.703
> 
> 标签：ruby, hpricot

我正在使用 Ruby 的 Hpricot gem 来解析 html。我想从文档中删除一个节点以在其他地方使用，但我找不到方法。

我看到我可以使用 Hpricot::Elements ( `x = (doc/"div").remove`) 的实例删除整个元素列表，但我只想删除给定标记的*第一个实例*。

四处寻找，我看到我只是用注释节点或空格 ( `x.inner_html = ''`) 替换元素的内部文本的建议，但这阻止了我在其他地方使用该节点。

我能做些什么？

规格：Ruby 1.8.7，Hpricot 0.8.4

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T18:50:46.107

试试这个！

```
x = (doc/"div").first
x.parent.children.delete(x) unless x.nil? 
```

# c# - DataTable 上的 LINQ 查询 - 找不到查询模式的实现

> ID：11193137
> 
> 赞同：4
> 
> 时间：2012-06-25T16:17:20.693
> 
> 标签：c#, linq

谁能告诉我为什么这不能编译？错误是：

> 找不到源类型的查询模式的实现`System.Data.DataTable`。 `Where`未找到。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.SqlClient;
using System.Data;

namespace caLINQ
{
    class Program
    {
        static void Main(string[] args)
        {
            string connectionString = "Data Source=STEVEN-PC\\SQLEXPRESS;Initial Catalog=linqtest;Integrated Security=True;Pooling=False";
            using (System.Data.SqlClient.SqlConnection connection = new System.Data.SqlClient.SqlConnection(connectionString))
            {
                 connection.Open();
                 String cmdText = "select * from customers";
                 System.Data.SqlClient.SqlCommand cmd = new System.Data.SqlClient.SqlCommand(cmdText, connection);
                 System.Data.SqlClient.SqlDataReader dr;
                 dr = cmd.ExecuteReader();
                 DataSet ds = new DataSet();
                 ds.Load(dr, LoadOption.OverwriteChanges, "tab1");
                 DataTable dt = ds.Tables[0];
                 var qy = from c in dt // error is here
                          where c.country == "Italy"
                          select c.name;
            }
            Console.ReadKey();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-25T16:26:53.563

尝试：

```
var qy = from c in dt.AsEnumerable()
         where c.Field<string>("country") == "Italy"
         select c.Field<string>("name"); 
```

`AsEnumerable()`将返回一个`IEnumerable<DataRow>`可以与 LINQ 一起使用的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T17:47:37.933

将您的代码调整为（我假设您的数据库列是“国家”和“名称”）：

```
var qy = from DataRow c in dt.Rows
         where c.Field<string>("country") == "Italy"
         select c.Field<string>("name"); 
```

或者

```
var qy = (from DataRow c in dt.Rows
         where c.Field<string>("country") == "Italy"
         select c.Field<string>("name")).ToList() 
```

有关这些“名称”的列表。

# asp.net - asp.net中的文本框控件

> ID：11193138
> 
> 赞同：0
> 
> 时间：2012-06-25T16:17:21.653
> 
> 标签：asp.net

我的小项目 asp.net 有问题。

我有一个变量：

```
String pr_name; 
```

和一个文本框控件。

我得到数据表单文本框并设置为变量：

```
String pr_name = Textbox1.Text; 
```

但我收到了价值：

```
System.Web.UI.WebControls.TextBox

or null. 
```

为什么 ？

# ios - performSegueWithIdentifier 随机崩溃

> ID：11193139
> 
> 赞同：2
> 
> 时间：2012-06-25T16:17:21.970
> 
> 标签：ios, ipad, xcode4.3, segue, master-detail

我以前从未遇到过这个问题，也没有听说过它发生过。我正在为 ipad 使用主从应用程序（拆分视图）。我的 MVC 有一个动态表格视图，并试图将每个单元格转换为自定义视图控制器。

目前我的桌子上只有两个项目。当程序启动时，我可以选择其中任何一个，它会毫无问题地转换到正确的视图控制器。但大多数情况下，当我第二次点击某个东西时，程序就会崩溃。有时需要点击四五次，但最终总是崩溃。

这是代码片段：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *segueName = [self.tableObjects objectAtIndex:indexPath.row];
    [self performSegueWithIdentifier:segueName sender:self];
} 
```

tableObjects 是我用来创建表项的 NSArray。如果我在 segue 调用之前抛出一个 print 语句，它会打印正确的 segue 名称。

在实际的 performSegueWithIdentifier 调用中总是会抛出错误。我用调试器检查了它。我不断得到的例外是：**EXC_BAD_ACCESS**。

同样，这两个segues最初都有效，所以我认为这不是问题。这个方法有时会被随机调用吗？有没有办法仔细检查方法调用是否安全？我是否需要覆盖 performSegueWithIdentifier 并在那里做些什么？

我试图把它放到一个 try catch 中：

```
@try {
    [self performSegueWithIdentifier:segueName sender:self];
}
@catch (NSException *exception) {
    NSLog(@"%@", exception);
}
@finally {
    NSLog(@"finally");
} 
```

它仍然指向@try 内部的方法调用。它似乎不会像异常一样抛出错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T00:24:29.807

仅供参考，我遇到了同样的问题，我在另一个 SO 线程上找到了答案：[iOS - UISplitViewController with storyboard - multiple master views and multiple detail views](https://stackoverflow.com/questions/10538231/ios-uisplitviewcontroller-with-storyboard-multiple-master-views-and-multiple)

基本上，在进行 segue 时需要再次设置 uisplitviewcontroller 委托。希望这对将来的某人有所帮助。

# c# - 确定神经网络的适当数量的神经元

> ID：11193147
> 
> 赞同：5
> 
> 时间：2012-06-25T16:17:47.040
> 
> 标签：c#, neural-network

我一直在对神经网络进行一些研究，整个概念和理论对我来说很有意义。尽管我一直无法找到答案的一个问题是在神经网络中应该使用多少个神经元。以达到适当/有效的结果。包括隐藏层、每个隐藏层的神经元等。更多的神经元是否一定会获得更准确的结果（同时对系统造成更多负担）或者更少的神经元仍然足够？是否有某种管理规则来帮助确定这些数字？它是否取决于正在实施到神经网络中的训练/学习算法的类型。它是否取决于呈现给网络的数据/输入的类型？

如果它更容易回答问题，我很可能会使用前馈和反向传播作为训练和预测的主要方法。

附带说明一下，是否有预测算法/触发规则或学习算法通常被重新归类为“最佳/最实用”，或者这也取决于呈现给网络的数据类型？

感谢任何有任何意见的人，我们总是很感激！

编辑：关于 C# 标签，这就是我将我的神经网络放在一起的语言。如果这些信息有帮助的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T17:11:55.227

我在大学专攻 AI / NN，并且有一些在游戏方面的工作经验，这是我发现的*入门指南*。然而，要意识到每个 NN 都需要进行一些调整才能在您选择的环境中发挥最佳效果。（一个潜在的解决方案是将您的程序暴露给 1000 多个不同的 NN，设置可测试的性能标准，然后使用遗传算法来传播更有用的 NN 并剔除不太有用的 NN - 但这是另一个非常大的帖子...... )

我发现 - 一般来说

*   输入层 - 每个输入向量一个 AN + 1 个偏差（始终为 1）
*   内层 - 输入层的两倍
*   输出层 - 每个动作或结果一个 AN

示例：字符识别

*   如果您正在检查 10x10 网格以进行字符识别；
*   从 101 Input AN 开始（每个像素一个，加上一个偏差）
*   202 内安
*   和 26 输出 AN（每个字母一个）

示例：二十一点

*   如果您正在构建 NN 以“赢得二十一点”；
*   从 16 输入 AN 开始（13 用于计算每次出现的牌，1 用于玩家手牌价值，1 用于庄家“上牌”，以及 1 偏差）
*   32 内安
*   和6个输出AN（一个用于“Hit”“Stay”“Split”“Double”“Surrender”和“Insurrance”）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-08T08:26:37.277

基于本文的一些**一般规则**如下： Saurabh Karsoliya 的“*多隐藏层 BPNN 架构中隐藏层神经元的近似数量”。*来源[在这里](http://www.ijettjournal.org/volume-3/issue-6/IJETT-V3I6P206.pdf)

*   隐藏层神经元的数量是输入层大小的 2/3（或 70% 到 90%）。如果这还不够，那么可以稍后添加输出层神经元的数量。
*   隐藏层神经元数量应小于输入层神经元数量的两倍。
*   隐藏层神经元的大小介于输入层大小和输出层大小之间。

# php - preg_replace 输出错误

> ID：11193152
> 
> 赞同：1
> 
> 时间：2012-06-25T16:18:21.623
> 
> 标签：php, regex, encoding

您好遇到以下问题

首先：如果 ÄÖÜ 提供了正则表达式，则商标符号替换会产生额外的字符 ...：

第二：如果我对结果进行字符串循环，所有特殊字符都是�。

问题是，为什么会发生这种情况，我该怎么做呢？（第二个问题不是那么必要，但很有趣）

```
header('Content-Type: text/html; charset=utf-8');
$testtxt = 'MicrÖsüft W!ndows® is a trÄdemark of Microfrost™ ©2012!';

$r =  preg_replace('#[^\w\s\däöüß%\!\?\.,\:\-_\[\]ÄÖÜ]#is', 'X', $testtxt);
echo $testtxt, '<br>', $r;
echo '<hr>';
for($i = 0, $size = strlen($r); $i < $size; ++$i) {
    echo $r[$i], '=', ord($r[$i]), '<br>';
} 
```

结果：

```
MicrÖsüft W!ndows® is a trÄdemark of Microfrost™ ©2012!
MicrÖsüft W!ndowsXX is a trÄdemark of MicrofrostX�X XX2012!
M=77
i=105
c=99
r=114
�=195
�=150.... 
```

预期的：

```
MicrÖsüft W!ndows® is a trÄdemark of Microfrost™ ©2012!
MicrÖsüft W!ndowsXX is a trÄdemark of MicrofrostXX XX2012!
M=77
i=105
c=99
r=114
Ö=195
s=150.... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:34:36.283

您正在使用与多字节字符不兼容的 strlen 和 ord 函数。以下代码应显示每个字符的字节数：

```
for($i = 0, $size = mb_strlen($r); $i < $size; ++$i) {
    echo $r[$i], '=', strlen($r[$i]), '<br>';
} 
```

其次，您应该将 UTF-8 修饰符添加到您的正则表达式中：

```
$r =  preg_replace('#[^\w\s\däöüß%\!\?\.,\:\-_\[\]ÄÖÜ]#isu', 'X', $testtxt) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:15:44.500

我不太确定，但您可以尝试将“u”修饰符添加到 preg_replace() 中的正则表达式。或尝试使用[mb_eregi_replace()](http://ie.php.net/manual/en/function.mb-eregi-replace.php)。

另外，您确定可以使用 ord() 吗？手册中写到它返回*ASCII*值（我强烈怀疑，这意味着对于多字节字符，它将返回第一个字节的值）。

# java - 在 Java 图形中绘制平滑曲线

> ID：11193155
> 
> 赞同：3
> 
> 时间：2012-06-25T16:18:29.987
> 
> 标签：java, graphics

我正在尝试绘制平滑的贝塞尔曲线以适合我拥有的一组数据，以便将其绘制在 java 图形绘图中。下面是我目前用来绘图的代码。它绘制的点很好，除了曲线有锋利的边缘，有时还有小裂缝。有没有更好的方法可以使用 java 图形制作平滑、拟合的曲线？

```
int numProfiles = speedList.size();
        int lenOfList;
        System.out.println();
        System.out.println("Creating a new general path");

        //BasicStroke boldStroke = new BasicStroke(.3f);
        //((Graphics2D)g).setStroke(boldStroke);
        for (int i=0; i<numProfiles; i++){
            GeneralPath gp = new GeneralPath();
            g.setColor(colors[i]);
            lenOfList = speedList.get(i).length;
            if (lenOfList < 3) {
                double xPlotVal1 = xMarginLeft + (((speedList.get(i)[0].getVal() - xMin) / (xMax - xMin)) * width);
                double yPlotVal1 = yMarginTopAxisTop + (((depthList.get(i)[0].getVal() - yMin) / (yMax - yMin)) * height);

                double xPlotVal2 = xMarginLeft + (((speedList.get(i)[1].getVal() - xMin) / (xMax - xMin)) * width);
                double yPlotVal2 = yMarginTopAxisTop + (((depthList.get(i)[1].getVal() - yMin) / (yMax - yMin)) * height);

                g.drawLine((int) xPlotVal1, (int) yPlotVal1, (int) xPlotVal2, (int) yPlotVal2);

            } else {
                System.out.println("More than 2 pts");
                for (int j = 0; j < (lenOfList - 2); j++) {

                    double xPlotVal1 = xMarginLeft + (((speedList.get(i)[j].getVal() - xMin) / (xMax - xMin)) * width);
                    double yPlotVal1 = yMarginTopAxisTop + (((depthList.get(i)[j].getVal() - yMin) / (yMax - yMin)) * height);

                    double xPlotVal2 = xMarginLeft + (((speedList.get(i)[j + 1].getVal() - xMin) / (xMax - xMin)) * width);
                    double yPlotVal2 = yMarginTopAxisTop + (((depthList.get(i)[j + 1].getVal() - yMin) / (yMax - yMin)) * height);

                    double xPlotVal3 = xMarginLeft + (((speedList.get(i)[j + 2].getVal() - xMin) / (xMax - xMin)) * width);
                    double yPlotVal3 = yMarginTopAxisTop + (((depthList.get(i)[j + 2].getVal() - yMin) / (yMax - yMin)) * height);
                    gp.moveTo(xPlotVal1, yPlotVal1);

                    if (j==0) gp.moveTo(xPlotVal1, yPlotVal1);
                    //  gp.moveTo(xPlotVal1, yPlotVal1);
                    gp.curveTo(xPlotVal1, yPlotVal1, xPlotVal2, yPlotVal2,
                            xPlotVal3, yPlotVal3);

                }
                ((Graphics2D) g).draw(gp);
            }
        } 
```

这是它正在绘制的图片：
![在此处输入图像描述](../Images/87bdcc99de920a41ee75bf0020dd3903.png)

//2012 年 6 月 26 日上午 7:34 //这是我添加渲染提示后的更新代码

```
 // the profiles
    Graphics2D g2d = (Graphics2D)g;
    int numProfiles = speedList.size();
    int lenOfList;
    for (int i=0; i<numProfiles; i++){
        GeneralPath gp = new GeneralPath();
        g2d.setColor(colors[i]);

        lenOfList = speedList.get(i).length;
        if (lenOfList < 3) {
            double xPlotVal1 = xMarginLeft + (((speedList.get(i)[0].getVal() - xMin) / (xMax - xMin)) * width);
            double yPlotVal1 = yMarginTopAxisTop + (((depthList.get(i)[0].getVal() - yMin) / (yMax - yMin)) * height);

            double xPlotVal2 = xMarginLeft + (((speedList.get(i)[1].getVal() - xMin) / (xMax - xMin)) * width);
            double yPlotVal2 = yMarginTopAxisTop + (((depthList.get(i)[1].getVal() - yMin) / (yMax - yMin)) * height);

            g2d.drawLine((int) xPlotVal1, (int) yPlotVal1, (int) xPlotVal2, (int) yPlotVal2);

        } else {
            for (int j = 0; j < (lenOfList - 2); j++) {

                double xPlotVal1 = xMarginLeft + (((speedList.get(i)[j].getVal() - xMin) / (xMax - xMin)) * width);
                double yPlotVal1 = yMarginTopAxisTop + (((depthList.get(i)[j].getVal() - yMin) / (yMax - yMin)) * height);

                double xPlotVal2 = xMarginLeft + (((speedList.get(i)[j + 1].getVal() - xMin) / (xMax - xMin)) * width);
                double yPlotVal2 = yMarginTopAxisTop + (((depthList.get(i)[j + 1].getVal() - yMin) / (yMax - yMin)) * height);

                double xPlotVal3 = xMarginLeft + (((speedList.get(i)[j + 2].getVal() - xMin) / (xMax - xMin)) * width);
                double yPlotVal3 = yMarginTopAxisTop + (((depthList.get(i)[j + 2].getVal() - yMin) / (yMax - yMin)) * height);
                gp.moveTo(xPlotVal1, yPlotVal1);

                if (j==0) gp.moveTo(xPlotVal1, yPlotVal1);      //only move at the begining of the curve drawing
                //  gp.moveTo(xPlotVal1, yPlotVal1);
                gp.curveTo(xPlotVal1, yPlotVal1, xPlotVal2, yPlotVal2,
                        xPlotVal3, yPlotVal3);

            }
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
             g2d.draw(gp);
        }
    } 
```

这是最新的图片。我不确定为什么它会让我的背景网格线消失。在绘制彩色轮廓后绘制网格线。 ![在此处输入图像描述](../Images/d60f035027aceba9ca12af4a174a81b5.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T16:25:56.987

您需要为 Graphics2D 对象启用抗锯齿。

像这样做

```
Graphics graphics = ...
Graphics2D g2d = (Graphics2D) graphics;

g2d.setRenderingHint(
    RenderingHints.KEY_ANTIALIASING,
    RenderingHints.VALUE_ANTIALIAS_ON);

// You can also enable antialiasing for text:

g2d.setRenderingHint(
    RenderingHints.KEY_TEXT_ANTIALIASING,
    RenderingHints.VALUE_TEXT_ANTIALIAS_ON); 
```

`graphics`在使用对象绘制任何东西之前执行此操作。

另请参阅[RenderingHints javadoc](http://docs.oracle.com/javase/6/docs/api/java/awt/RenderingHints.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T16:23:45.653

与抗锯齿一起使用`Graphics2D`：

```
 Graphics2D g2 = (Graphics2D)g;
 g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
     RenderingHints.VALUE_ANTIALIAS_ON);
 //...
 g2.draw(gp); 
```

# installation - 尝试将命令行参数执行添加到 NSIS 安装程序

> ID：11193156
> 
> 赞同：1
> 
> 时间：2012-06-25T16:18:37.013
> 
> 标签：installation, command-line-arguments, nsis

我正在尝试自定义 NSIS 安装程序。根据用户的选项，我希望程序使用不同的选项运行，我将使用命令行选项进行设置。

（我保存了一些我在最后删除的文件，如果用户不想继续安装，那么我想使用仅删除临时文件的选项 -d 运行该实用程序。）

我找到了这篇文章：[Accessing command line arguments in NSIS](https://stackoverflow.com/questions/6185982/accessing-command-line-arguments-in-nsis)，但我不知道如何设置它来运行带有命令行参数的程序。

这就是我正在尝试的：我尝试过：

```
SetOutPath "$TEMP"
!define MY_FILE "file.exe -d"
File /nonfatal "${MY_FILE}"
ExecWait '"$TEMP\${MY_FILE}" 
Delete /REBOOTOK "$TEMP\${MY_FILE}" 
```

我收到一个警告，它没有找到`file.exe -d`。

所以我正在尝试类似的东西

```
$(GetOptions) $CMDLINE "/d" $Trying_This
;Not sure what to put to get the program 
```

我还在试验 NSIS，这是一个巨大的挑战，找不到一个例子来指导我。

注意：我正在运行没有选项的文件，然后我希望 NSIS 插入选项 -d （或其他选项，如 -f 文件名）

**编辑：**我在帖子中有不完整的代码......我在现实生活中有 ExecWait......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:13:02.253

```
Outfile test.exe
requestexecutionlevel user
InstallDir "$Temp\Test" ;Default $InstDir
!include FileFunc.nsh
!include LogicLib.nsh

page directory
page instfiles

section 
StrCpy $1 "/Foo"
ClearErrors
${GetOptions} $CMDLINE "-d" $0
${IfNot} ${Errors} 
    StrCpy $1 "/Bar"
${EndIF}
SetOutPath $InstDir
File "File.exe" ;Extracting to $InstDir
ExecWait '"$InstDir\File.exe" $1' ;Calling with /Foo or if installer was started with -d; /Bar 
sectionend 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:59:08.483

该`File`语句使 NSIS 将给定文件包含到压缩数据中，并在运行时将其放入当前工作目录（您可以使用 更改`SetOutPath`）。它不会让您执行带有或不带参数的可执行文件。

如果您想在安装期间运行可执行文件，您必须 1) 包含 exe 和 2) 在运行时执行它，并可能更改为临时目录，例如，如果可执行文件是安装程序。

```
!define MY_FILE "file.exe"
!define MY_ARGS "-d"
SetOutPath "$TEMP" 
File "${MY_FILE}"
ExecWait '$TEMP\${MY_FILE} ${MY_ARGS}' $0   ;$0 will get the return code
${if} $0 <> 0
    MessageBox MB_OK|MB_ICONEXCLAMATION "Sorry, but the installation returned the code $0.$\n \
         Cannot continue the installation." /SD IDOK
    Abort
${endif}
Delete "$TEMP\${MY_FILE}" 
```

当然如果你需要保留exe之后不要去临时目录，也不要在最后删除可执行文件。

# android - 从外部 OnCreateView 方法访问 Fragments 视图

> ID：11193159
> 
> 赞同：5
> 
> 时间：2012-06-25T16:18:46.930
> 
> 标签：android, android-fragments

已经搜索过这个，但他们每个人都是 onCreateView() 方法，您可以通过充气器访问 Fragments 视图。

```
public View onCreateView(LayoutInflater inflater, ViewGroup group, Bundle saved)
{
    super.onCreateView(inflater, group, saved);
    View view = inflater.inflate(R.layout.photosfrag, group, false); 
```

我想知道的是如何动态地做到这一点。例如说我正在使用一个活动来显示一个片段并在片段中调用一个方法，例如：

```
public void setTitleText(String title) {
    TextView nameView = (TextView)getView().findViewById(R.id.titleTxtView);
    nameView.setText(title);
} 
```

仅仅因为片段已经被创建并且它是一种动态改变它的方式。

任何帮助都会很重要。我可能做错了。

**编辑**

这是崩溃日志

```
06-25 17:31:37.343: D/AndroidRuntime(1009): Shutting down VM
06-25 17:31:37.353: W/dalvikvm(1009): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
06-25 17:31:37.383: E/AndroidRuntime(1009): FATAL EXCEPTION: main
06-25 17:31:37.383: E/AndroidRuntime(1009): java.lang.NullPointerException
06-25 17:31:37.383: E/AndroidRuntime(1009):     at com.corecoders.stuart.MainActivity.onTrackSelected(MainActivity.java:81)
06-25 17:31:37.383: E/AndroidRuntime(1009):     at com.corecoders.stuart.HistoryFragment.onListItemClick(HistoryFragment.java:51)
06-25 17:31:37.383: E/AndroidRuntime(1009):     at android.app.ListFragment$2.onItemClick(ListFragment.java:160)
06-25 17:31:37.383: E/AndroidRuntime(1009):     at android.widget.AdapterView.performItemClick(AdapterView.java:292)
06-25 17:31:37.383: E/AndroidRuntime(1009):     at android.widget.AbsListView.performItemClick(AbsListView.java:1058)
06-25 17:31:37.383: E/AndroidRuntime(1009):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:2514)
06-25 17:31:37.383: E/AndroidRuntime(1009):     at android.widget.AbsListView$1.run(AbsListView.java:3168)
06-25 17:31:37.383: E/AndroidRuntime(1009):     at android.os.Handler.handleCallback(Handler.java:605)
06-25 17:31:37.383: E/AndroidRuntime(1009):     at android.os.Handler.dispatchMessage(Handler.java:92)
06-25 17:31:37.383: E/AndroidRuntime(1009):     at android.os.Looper.loop(Looper.java:137)
06-25 17:31:37.383: E/AndroidRuntime(1009):     at android.app.ActivityThread.main(ActivityThread.java:4424)
06-25 17:31:37.383: E/AndroidRuntime(1009):     at java.lang.reflect.Method.invokeNative(Native Method)
06-25 17:31:37.383: E/AndroidRuntime(1009):     at java.lang.reflect.Method.invoke(Method.java:511)
06-25 17:31:37.383: E/AndroidRuntime(1009):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-25 17:31:37.383: E/AndroidRuntime(1009):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-25 17:31:37.383: E/AndroidRuntime(1009):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T16:56:45.833

你这样做的方式应该可以工作。崩溃日志向我们展示了*NPE*与片段更新其小部件的方式无关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T16:41:40.003

改为这样做：

```
//Define reference globally
TextView nameView;

public View onCreateView(LayoutInflater inflater, ViewGroup group, Bundle saved){
    super.onCreateView(inflater, group, saved);
    View view = inflater.inflate(R.layout.photosfrag, group, false);
    //do this here!
    nameView = view.findViewByID(R.id.titleTxtView);
    ...

}

public void setTitle(String t){
    nameView.setText(t);
} 
```

不同之处在于这种方法不会延迟加载`TextView`引用——它会在视图膨胀时加载它，而不是在需要时加载它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-20T06:53:32.240

如果有人试图从 onCreateView 之外的 Fragment 类中的 Fragment 布局访问任何视图，那么您可以在类级别声明膨胀视图并在膨胀语句后链接它，并使用该视图引用在 Fragment 类中的任何位置查找视图：例如。 …………

```
 public class FragmentA extends Fragment implements onClickListener{

//This will hold the inflated fragment layout

    private View view;

public FragmentA() {
    // Required empty public constructor
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // Inflate the layout for this fragment

    View view = inflater.inflate(R.layout.fragmenta, container, false);
    this.view= view;// link this 'view'  to our  'view' which we declared in class               

    setTextViewNow();
    // or from a button click 
          Button button = view.findViewById(R.id.button);
          button.setOnClickListener(this)

    return view;

}

private void setTextViewNow() {

    //use 'view' to find the id of textview using findviewById();   
     if(view !=null){
    TextView myView = (TextView)view.findViewById(R.id.textViewMyView);
    myView.setText("THis is set from outside oncreateView");           
        }
   }

    @Override
    public void  onClick(View view){
       setTextViewNow();
     }
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-29T06:30:20.493

我遇到了类似的问题，原来我正在覆盖`getItem(int)`Fragment 的方法并每次都返回一个新的 Fragment 实例，在你的情况下，我不知道你是否也在覆盖它，但是，你应该检查一下`HistoryFragment.onListItemClick`你是否正在调用该`getItem`方法并返回一个新的 Fragment 实例，该实例与您在屏幕上显示的不同。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-25T19:11:36.880

或者使用`getActivity`方法。来自文档的示例： `View listView = getActivity().findViewById(R.id.list);`

# jquery - iframe/ Youtube 滚动顶部位置已修复

> ID：11193161
> 
> 赞同：1
> 
> 时间：2012-06-25T16:18:52.500
> 
> 标签：jquery, html, wordpress, embed, scrolltop

嗨，大家都看过了，但找不到有同样问题的人，或者我正在搜索错误的描述。归结为这一点。我正在这个网站上工作[http://lennyryan.com/test/](http://lennyryan.com/test/)它在顶部的标题下有一个菜单。所有这一切都很好，除了当我嵌入一个 youtube 视频时。它搞砸了，它似乎改变了所有位置：将 div 固定为相对。老实说，我不确定它的作用。如果有人可以帮助我为什么它搞砸了，那将是非常有帮助的......

您可以在这里查看网站[http://lennyryan.com/test/](http://lennyryan.com/test/)

*编辑它在 Firefox 中确实有效，但在 Safari 和 Chrome 中存在问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:22:15.237

在网上看到有人问同样的问题，我自己找到了答案，所以我想我会发布它。这是一件非常愚蠢但出乎意料的事情，很难找到。当嵌入 youtube 视频时，您的 css 中有一个负 z-index 会出现各种渲染问题。所以从我的角度来看，这仍然是一个非常奇怪的结果，它会复制 div 等。

# c# - 将修改后的列表返回到数据库

> ID：11193166
> 
> 赞同：0
> 
> 时间：2012-06-25T16:19:05.073
> 
> 标签：c#, linq, entity-framework

从实体框架获取的修改列表返回到我们的数据库的最佳方法是什么？

**问题以更简单的形式：**

如何向数据库返回自定义列表，例如大约 100,000 条记录的列表，这些是我们实体的修改版本，以离线线程安全的方式。

**编码 ：**

```
 var query = From context.Products
                    select p;

        var listQuery = query.ToList(); 
```

**编辑：**似乎所有附加到实体的列表都会导致线程安全错误。因此，我们必须制作列表的克隆版本，例如列表，然后在编辑后以常规耗时或速记的方式插入所有项目，有 ***什么想法吗？***

**示例步骤：**

1.  **从实体DataContext**创建并填充我们定义类型的自定义列表数组
***   遍历列表（大约 100,000 个项目）*   编辑列表*   最后返回数据库**

 **如何将 listQuery 传递给数据库？

遍历它们中的每一个并通过 Entity/Linq 找到等效的实体或记录并更改项目？？这可能是最好的主意，还是我们有任何速记或最佳做法？有什么建议或想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:27:57.710

首先，您的代码示例中有一个小错误。您需要添加 'from p in context.Products' 而不是 'from context.Products'

如果我理解正确，我通常编辑记录列表的方式是：

```
 var products = dbContext.Products.ToList(); // Gets As List
            foreach (var product in products)
            {
                // edit the value, EF manages what is changed
                product.someField = "some new value";
            }
            dbContext.SaveChanges(); // Saves All Changes 
```

我更喜欢使用方法语法。如果您更喜欢使用查询语法，可以将第一行替换为：

```
var products = (from p in products
                select p).ToList(); 
```**

# firebase - 拦截数据更改并从服务器更改/验证

> ID：11193167
> 
> 赞同：0
> 
> 时间：2012-06-25T16:19:10.690
> 
> 标签：firebase

我正在研究一种解决方案，以拦截来自我们的 node.js 服务器的数据更改，并在它们存储/同步到其他客户端之前验证/更改它们。

有关如何使用当前代码库解决此问题的任何策略或建议？

目前，似乎唯一的选择是在同步操作后重写它。这意味着每个客户端可能会收到同步（包括服务器），然后服务器将重写数据并触发第二次同步。

为了帮助理解问题的背景，这似乎是满足我需求的理想策略：

*   服务器获得客户端不可用的特殊令牌/密钥（当安全出现时）
*   服务器注册一个依赖注入，如`firebase.child('widgets').beforeSync(myCallback)`
*   客户端同步数据
*   通知服务器回调
*   服务器修改或验证数据
*   如果有效，它会将其返回到 firebase 以进行同步操作
*   如果无效，则中止同步并返回给客户端的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:25:29.290

感谢您分享您的想法！

我们已经考虑过这种方法。您实际上可以通过构造数据来模拟这种行为，以便有一个“未验证”树和一个“验证”树。

“未验证”树将可由客户端写入，服务器将监视它的更改。当发生更改时，它将验证数据，如果通过，它将复制到“已验证”树中，该树只能由服务器写入。当验证失败时，您也可以通过 Firebase 数据将错误传递回客户端。

可以将此行为打包到提供您描述的行为的库中。我们也可以将其添加为核心功能，但我们仍在研究各种选项。

# android - 将我的 ZTE warp 添加到机器以进行 android 开发

> ID：11193179
> 
> 赞同：2
> 
> 时间：2012-06-25T16:19:55.583
> 
> 标签：android

我无法将我的 ZTE warp 添加到我的台式机以进行 android 开发。

我一直在编辑`51-android.rules`文件，但没有运气。我目前正在为我的手机添加这条线路：

`SUBSYSTEM=="usb", ATTR{idVendor}=="19d2", MODE="0666", GROUP="plugdev"`

但是在输入命令后：

`adb devices`

我得到以下输出：

“附加设备列表
??????????没有权限”

有没有人可以建议一种方法来编辑我的 .rules 文件以使其运行？谢谢你的帮助！

ps 好像其他人在[这里](https://stackoverflow.com/questions/8909011/zte-v9-not-detected-by-adb)遇到了这个问题，但没有解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:27:08.470

您是否已将自己添加到 plugdev 组？

```
sudo usermod user_id -G plugdev -a 
```

将 user_id 替换为您自己用于登录的 Linux id。

另外，我有这个：

```
SUBSYSTEMS=="usb", ATTRS{idVendor}=="19d2", ATTRS{idProduct}=="1351", MODE="0666" GROUP="androiddev", SYMLINK+="android%n" 
```

并注销并再次登录以使其他组加入。如果不起作用，请重新启动或重新启动 udev :)

***编辑：***事实证明，OP 的组 id 被替换为 plugdev 并最终不在 sudoers 列表中——我的错！我遗漏了关键开关**-a**！我只能说哎呀！:)

# mysql - MySql中如何求和除法

> ID：11193180
> 
> 赞同：8
> 
> 时间：2012-06-25T12:59:19.253
> 
> 标签：mysql, syntax

好的，所以我有一个用户表，并希望获得最高分数除以分数的用户的最大值。以下是我正在寻找的*粗略想法：*

```
SELECT MAX(SUM(points)/SUM(score)) FROM users 
```

我对将两列相加并进行划分不感兴趣，而是对划分每个用户的分数和得分并从批次中检索最高值感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T14:22:32.233

也许你可以用一个子查询来做到这一点：

```
Select max(points_over_Score)
from 
    (Select points/score AS points_over_score
    from users); 
```

正如评论中提到的那样，这可能可以缩短为

```
SELECT MAX(points/score) FROM users; 
```

您对您正在尝试做的事情的书面描述并不清楚为什么您的示例包含`SUM`在其中，所以我没有使用它。

此外，像这样的代码问题更适合[stackoverflow.com](https://workplace.stackexchange.com/questions)。您可以标记自己的问题，要求版主迁移它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:44:36.057

如果您需要将所有分数相加，然后将所有分数相加，然后将两者相除，FrustratedWithFormsDesigner 的答案将不起作用。该答案将每个点除以分数，然后返回最高答案。

这应该有效：

```
SELECT MAX(sum_points / sum_score) from 
(SELECT SUM(points) as sum_points, SUM(score) as sum_score FROM users) 
```

顺便说一句，这会返回一个“不寻常”的百分比。您可能希望将分数除以分数。例如，如果您在 100 分中获得 70 分，即为 70%，或得分 (70) / 分 (100)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-23T20:03:47.293

我不确定这是否是由于这篇文章的年龄或当时的 MySQL 版本，但是当我尝试上述解决方案时，抛出了以下错误：

> ERROR 1248 (42000) : 每个派生表都必须有自己的别名

我能够使用以下方法解决此问题：

`SELECT MAX(sum_points / sum_score) from (SELECT SUM(points) as sum_points, SUM(score) as sum_score FROM users) as max_value;`

# backbone.js - 在backbone.js 中自动更新视图

> ID：11193183
> 
> 赞同：5
> 
> 时间：2012-06-25T16:20:01.123
> 
> 标签：backbone.js

我使用backbone.js 并且有一个没有集合的模型。在视图中，我使用回调调用模型上的 fetch 来呈现视图。

```
this.user.fetch({success: function(d) { self.randomUserView.render() }}) 
```

如何在模型更改时自动更新视图？例如，我不想在每次调用 fetch 时都指定上述回调。我试图在初始化时将视图绑定到许多模型事件，但这不起作用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-25T16:32:14.267

在视图上，将事件处理程序添加到视图的模型中：

```
initialize: function() {
  this.model.on('change',this.render,this);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:35:44.843

Backbone 是事件驱动的，而不是回调驱动的框架（尽管从技术上讲它们是回调）。而且您的方法似乎不是 Backbone 的原生方法。当您执行 fetch() 时，用户模型将自动触发“添加”事件。您需要做的就是在相应的视图中将其添加到初始化中：

```
initialize: function() {
  ... your code...
  this.model.bind('add', this.render);
} 
```

这样，您甚至只在视图初始化中订阅一次，并且不必传递显式回调。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:06:28.917

实际上，如果您想在集合上获取视图刷新，您需要绑定 RESET！

```
this.model.bind('reset', this.render, this); 
```

仅当编辑当前集合时才会触发更新。

ps bindAll 既危险又懒惰。（并且可能会给您带来麻烦）

# ms-access - MS Access 表单加载

> ID：11193186
> 
> 赞同：0
> 
> 时间：2012-06-25T16:20:05.977
> 
> 标签：ms-access, vba, ms-access-2003

我有一个带有两个组合框和几个按钮的表单。其中一个按钮（称为“翻转”）用于翻转上一年的数据。单击时，它应该能够获取上一年的数据并插入到下一年的表单中。

我已经编写了代码，但是在单击按钮时它不会插入数据，而是在表单打开一次后插入数据。

例如：我点击“翻转”，然后点击一个表格，表格打开但没有数据。我关闭表格。再次单击“翻转”。我再次打开表单，数据已插入。

我不知道为什么它不允许我在没有打开表单至少一次的情况下插入数据。

这是我的代码的样子：

```
Form_1_Test.Text10 = DLookup("Legal_Name", "1_Test", "[Program_Name] = '" & Replace([Combo2], "'", "''") & "' And [BudgetYear] = " & ([Combo0] - 1)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:33:52.767

您可能需要在插入数据后重新查询表单。在代码末尾添加以下行`MyButton_Click()`（即，在插入新记录的代码之后）：

```
Me.Requery 
```

* * *

请记住，您没有将记录“插入表单”，这可能会有所帮助。而是将记录插入表单所基于的基础表中。

虽然 Access 表单会自动刷新已加载记录的更改数据*，但它们不会轮询是否存在新创建的记录。您必须通过表单的`Requery`方法强制表单执行此操作。

*[假设您没有从“动态集”更改默认记录集类型属性]

# javascript - 无法将 .swf 文件垂直对齐到中间

> ID：11193189
> 
> 赞同：1
> 
> 时间：2012-06-25T16:20:43.383
> 
> 标签：javascript, html, css, flash, dreamweaver

我在 div 内的页面中插入了一个 .swf 文件，并尝试使其与该 div 的中间垂直对齐，但它不起作用，只是水平方向，但这不是我想要的。我试图将此文件放在主 div 内的另一个 div 中，并更改此 div 的对齐方式。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T16:27:35.643

这是我用来水平和垂直居中元素的好方法：

```
<div style="position:fixed; top:0; left:0; width:100%; height:100%;">  
  <div style="height:100%; display:table; margin:0 auto;">  
    <div style="vertical-align:middle; display:table-cell;">

    <div><p>This is a fully-centered div!</p></div>

    </div>
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:24:09.140

嗯......如果没有代码片段，这有点难以回答。

这是一篇关于围绕 Flash 内容创建包装器的文章：http: //livedocs.adobe.com/flex/3/html/help.html?content= [wrapper_13.html](http://livedocs.adobe.com/flex/3/html/help.html?content=wrapper_13.html)

向下滚动到表格，他们开始谈论“对齐”，或者只是在页面上搜索“对齐”这个词，看看他们要说什么。

这也是一个快速的想法，我不知道它是否有效，只是思考：

```
div.SWFContainer object, div.SWFContainer embed {
    display: inline-block;
    margin: auto 0px auto 0px;
    width: auto;
    vertical-align: middle;
} 
```

# php - 如何使用 PHP 获取最后 7 天

> ID：11193191
> 
> 赞同：6
> 
> 时间：2012-06-25T16:21:00.113
> 
> 标签：php, mysql, arrays

> **可能重复：**
> [使用 PHP 创建最近 30 天的数组](https://stackoverflow.com/questions/337760/create-an-array-of-the-last-30-days-using-php)

我正在尝试创建一个具有“最近 7 天销售”的数组，即今天加上前 6 天。到目前为止，我正在使用它：

```
$rightnow = time(); 
$time_window = $rightnow - (60*60*24*6); // 6 days ago + today = 7 days

$tw_time = date('M d', $time_window);
$tw_time = strtotime($tw_time); // 6 days ago starting at 00:00:00

$valid_sales = mysql_query("SELECT amt, created FROM sales WHERE created > $tw_time");

$sale_data = array();

foreach ($valid_sales as $sale) {

    $display_date = date('M d', $sale['created']);

    if (array_key_exists($display_date,$sale_data)) { // If date is in array

        $sale_data[$display_date] = $sale_data[$display_date] + $sale['amt']; // Add amount to date's sales

    } else { // If date is not in array

        $sale_data[$display_date] = $sale['amt']; // Create key with this amount

    }

} // End foreach valid_sales 
```

这将给我一个数组，其中键是日期，值是该日期的销售额。IE：

```
Array ( [Jun 19] => 19.00 [Jun 20] => 52.50 [Jun 22] => 2.00 ) 
```

我遇到的问题是，即使那天没有销售，我也需要将每一天添加到数组中（使用 MySQL 查询没有找到结果）。所以，我想得到一个这样的数组：

```
Array ( [Jun 19] => 19.00 [Jun 20] => 52.50 [Jun 21] => 0.00 [Jun 22] => 2.00 [Jun 23] => 0.00 [Jun 24] => 0.00 [Jun 25] => 0.00 ) 
```

这样，过去 7 天的每一天都在数组中，即使日期没有出现在 MySQL 查询中。

关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T16:30:24.800

解决此问题的最可靠方法是使用`DateTime`而不是`strtotime`：

```
$now = new DateTime( "7 days ago", new DateTimeZone('America/New_York'));
$interval = new DateInterval( 'P1D'); // 1 Day interval
$period = new DatePeriod( $now, $interval, 7); // 7 Days 
```

现在，您可以像这样形成日期数组：

```
$sale_data = array();
foreach( $period as $day) {
    $key = $day->format( 'M d');
    $sale_data[ $key ] = 0;
} 
```

这[会将您的数组初始化](http://codepad.viper-7.com/MDpsY8)为：

```
array(8) {
 ["Jun 18"]=>      int(0)
  ["Jun 19"]=>      int(0)
  ["Jun 20"]=>      int(0)
  ["Jun 21"]=>      int(0)
  ["Jun 22"]=>      int(0)
  ["Jun 23"]=>      int(0)
  ["Jun 24"]=>      int(0)
  ["Jun 25"]=>      int(0)
} 
```

现在您有一个包含过去 7 天内所有可能日期的数组，您可以在循环中执行此操作：

```
$display_date = date('M d', $sale['created']);
$sale_data[$display_date] += $sale['amt']; 
```

您不需要检查数组键是否存在，因为它保证存在。

最后，我建议查看`DATETIME`或其他相关的日期/时间列类型，因为它们在这里比存储 UNIX 时间戳更有用。您可以使用 MySQL 日期/时间函数来正确选择要查找的行，而不必在每次要根据时间查询数据时创建 UNIX 时间戳。

# wpf - 基于 WPF 组合框的数据绑定文本框

> ID：11193192
> 
> 赞同：1
> 
> 时间：2012-06-25T16:21:02.923
> 
> 标签：wpf, data-binding, combobox, textbox, conditional

我一直在尝试找到解决方案，但无法在线找到相关答案。

我有一堆需要用数据填充的文本框，例如在我的案例地址中。我有一个绑定到枚举的组合框，并有一个可供选择的值列表

家庭、办公室、MainOffice、实验室。等等当我在组合框上进行选择时，我需要在下面的文本框中填充它的地址。我可以从对象 X 中获取家庭地址，从对象 Y 中获取办公室地址，从 Z 中获取 MainOffice。如何使用组合框选择进行此条件数据绑定。请指教。

这些是我可以选择的选项

```
public enum MailToOptions
{
    Home,
    Office,
    CorporateOffice,
    Laboratory,
}

    <!-- Row 1 -->
    <Label Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="5" Content="Mail To:" />
    <ComboBox Grid.Column="0" Grid.Row="1"  Grid.ColumnSpan="5" Name="MailToComboBox" 

     ItemsSource="{Binding Source={StaticResource odp}}"    
     SelectionChanged="HandleMailToSelectionChangedEvent" >

    </ComboBox>
    <!-- Agency ID -->

    <!-- Name -->
    <Label Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="5" Content="Name" />
    <TextBox Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="5">
        <TextBox.Text>
            <Binding Path="Order.Agency.PartyFullName" Mode="TwoWay" />
        </TextBox.Text>
    </TextBox>

    <!-- Row 2 -->

    <!-- Address Line 1 -->
    <Label Grid.Row="6" Grid.Column="0" Grid.ColumnSpan="5" Content="Address 1" />
    <TextBox Grid.Row="7" Grid.Column="0" Grid.ColumnSpan="5">
        <TextBox.Text>
            <Binding Path="Order.Agency.AddressLine1" Mode="TwoWay"     />
        </TextBox.Text>
    </TextBox> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T16:34:26.300

最好的方法是在您的`ComboBox`对象中制作项目，并将您的文本字段绑定到`ComboBox.SelectedItem`

例如，

```
<ComboBox x:Name="AddressList" ItemsSource="{Binding Addresses}" DisplayMemberPath="Name" />

<TextBox Text="{Binding SelectedItem.Street, ElementName=AddressList}" ... />
<TextBox Text="{Binding SelectedItem.City, ElementName=AddressList}" ... />
<TextBox Text="{Binding SelectedItem.State, ElementName=AddressList}" ... />
<TextBox Text="{Binding SelectedItem.ZipCode, ElementName=AddressList}" ... /> 
```

一种更简洁的方法是设置`DataContext`包含 TextBoxes 的任何面板的

```
<ComboBox x:Name="AddressList" ItemsSource="{Binding Addresses}" DisplayMemberPath="Name" />

<Grid DataContext="{Binding SelectedItem, ElementName=AddressList}">
    <TextBox Text="{Binding Street}" ... />
    <TextBox Text="{Binding City}" ... />
    <TextBox Text="{Binding State}" ... />
    <TextBox Text="{Binding ZipCode}" ... />
</Grid> 
```

您可以将 ComboBox 绑定到类似的东西`ObservableCollection<Address>`，或者`ItemsSource`在后面的代码中手动设置。

我建议绑定，但是在它后面的代码中手动设置它看起来像这样：

```
var addresses = new List<Addresses>();
addresses.Add(new Address { Name = "Home", Street = "1234 Some Road", ... });
addresses.Add(new Address { Name = "Office", Street = "1234 Main Street", ... });
...
AddressList.ItemsSource = addresses; 
```

# javascript - 一个 div 在滚动时接触另一个 div 时返回的 jQuery 函数

> ID：11193193
> 
> 赞同：2
> 
> 时间：2012-06-25T16:21:07.040
> 
> 标签：javascript, jquery, scroll, dom-events, offset

当一个 div 在滚动时悬停在另一个 div 上时，如何发出警报？这是一个工作示例， [http://jsfiddle.net/uprosoft/Ek5Gy/267/](http://jsfiddle.net/uprosoft/Ek5Gy/267/)

虽然为了发出警报，但我找不到要跟踪的 jQuery 代码。

### 代码：

**HTML**

```
<div id="container">
<div id="div1">test</div>
<br>
<div id="div2"> another test</div>
</div> 
```

**CSS**

```
#div1{
background: green;
position: fixed;
        width: 100%;
}
#div2{
background: yellow;
position: relative;
width: 100%;
margin-top: 100px;
}
#container{

height: 1000px;

} 
```

**查询 ???**

```
/* what jquery code goes here? to alert when the yellow div touches the green div upon scroll? */ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T16:30:36.047

像这样的东西应该工作：

```
$(window).scroll(function() {
    var div1 = $("#div1");
    var div2 = $("#div2");
    var div1_top = div1.offset().top;
    var div2_top = div2.offset().top;
    var div1_bottom = div1_top + div1.height();
    var div2_bottom = div2_top + div2.height();

    if (div1_bottom >= div2_top && div1_top < div2_bottom) {
        // overlapped
    }
});​ 
```

**演示：http:** [//jsfiddle.net/Ek5Gy/280/](http://jsfiddle.net/Ek5Gy/280/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-29T19:33:04.980

我知道问题是针对 Jquery 的，但不管怎样，vanilla JS 也是如此

```
function didDiv1TouchedDiv2() {
    var div1 = document.getElementById("div1"); 
    var div2 = document.getElementById("div2"); 
    // Guard
    if (div1 === undefined || div2 === undefined) return;
    var div1Rect = div1.getBoundingClientRect();
    var div2Rect = div2.getBoundingClientRect();
    // We need to add the offsetHeight in order to include padding and border of element and get excact position
    return div1Rect.top >= div2Rect.top + div2.offsetHeight;  
}
window.addEventListener("scroll", didDiv1TouchedDiv2); 
```

# c# - 多重绑定上的 DataGridColumn SortMemberPath

> ID：11193203
> 
> 赞同：7
> 
> 时间：2012-06-25T16:22:07.050
> 
> 标签：c#, wpf, xaml, binding, multibinding

我正在尝试对数字内容进行列排序。多绑定转换器工作正常。此解决方案将 SortMemberPath 设置为 null

我尝试了各种方法，并大量搜索了互联网。

出于安全目的，代码已从原始版本进行了修改。

```
<DataGridTemplateColumn x:Name="avgPriceColumn">
<DataGridTemplateColumn.CellTemplate>
    <DataTemplate>
        <TextBlock>
            <TextBlock.Text>
                <MultiBinding Converter="{StaticResource avgPriceConverter}">
                    <Binding Path="NumberToDivideBy" />
                    <Binding Path="TotalDollars" />
                </MultiBinding>
            </TextBlock.Text>
        </TextBlock>
    </DataTemplate>
</DataGridTemplateColumn.CellTemplate>
<DataGridTemplateColumn.SortMemberPath>
    <MultiBinding Converter="{StaticResource avgPriceConverter}">
        <Binding Path="NumberToDivideBy" />
        <Binding Path="TotalDollars" />
    </MultiBinding>
</DataGridTemplateColumn.SortMemberPath>
</DataGridTemplateColumn> 
```

编辑：我找到了一种无需多重绑定即可使数据绑定工作的方法，但排序仍然不起作用。由于 DataGrid 绑定到自定义类，因此我采用整个值并从中进行转换，从而减少了对 MultiBinding 的需求。

```
<DataGridTextColumn x:Name="avgPriceColumn" Binding="{Binding Converter={StaticResource avgPriceConverter}}" SortMemberPath="{Binding Converter={StaticResource avgPriceConverter}}" /> 
```

在这两个选项中，SortMemberPath 默认设置为 Binding，所以我不需要像我一样显式定义它

但是，这最终会将 SortMemberPath 值设置为 null，这与适用于我的代码环境的自定义约束冲突，并且不会排序。所以我仍然对更好的解决方案感兴趣。

编辑：

更改了其他地方的冲突代码以允许重复的 SortMemberPath，不支持对某些列进行排序，以及对某些邻列值进行排序

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T10:43:41.530

[SortMemberPath](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridcolumn.sortmemberpath%28v=vs.110%29.aspx)期望属性的名称（例如“TotalDollars”）而不是单个计算的行值。把它想象成标题，你为整列设置一次。您的转换器将返回一个类似 15 的数字，其中 SortMemberPath 需要一个绑定路径字符串。

想到的两个选项：

1.  在您的支持对象上提供一个计算属性（例如“AveragePrice”）并绑定到它。不需要转换器或排序成员路径。

    ```
    public double AveragePrice
    {
        get { return TotalDollars / NumberToDivideBy; }
    } 
    ```

2.  [像在这个问题](https://stackoverflow.com/questions/2129601/how-can-i-apply-a-custom-sort-rule-to-a-wpf-datagrid)中一样指定一个[OnSorting](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.onsorting.aspx)事件处理程序。

希望能帮助到你。:)

# php - 使PHP更安全后无法登录？

> ID：11193204
> 
> 赞同：0
> 
> 时间：2012-06-25T16:22:07.333
> 
> 标签：php, security, login

我遵循了手册上的教程，以使我的登录代码更安全，这在遵循[http://www.w3schools.com/php/func_mysql_real_escape_string.asp](http://www.w3schools.com/php/func_mysql_real_escape_string.asp)上的教程后现在无法正常工作， 它显示以下错误

> 警告：mysql_num_rows() 期望参数 1 是资源，布尔值在第 32 行的 /home/content/58/9508458/html/pabrowser/checklogin.php 中给出
> 
> 警告：无法修改标头信息 - 标头已由 /home/content/58/9508458/html/pabrowser/checklogin 中的（输出开始于 /home/content/58/9508458/html/pabrowser/checklogin.php:32）发送。第 46 行的 php

并且没有登录

```
<?php
function check_input($value)
{
// Stripslashes
if (get_magic_quotes_gpc())
  {
  $value = stripslashes($value);
  }
// Quote if not a number
if (!is_numeric($value))
  {
  $value = "'" . mysql_real_escape_string($value) . "'";
  }
return $value;
}

$link = mysql_connect('xxxxxxx');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db("brainoidultrafb", $link);

// username and password sent from form 
$myusername=check_input($_POST['myusername']); 
$mypassword=check_input($_POST['mypassword']); 

 $sql="SELECT * FROM logintbl WHERE stu_email='$myusername' and password='$mypassword'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){

// Register $myusername, $mypassword and redirect to file "login_success.php"

session_start();
$_SESSION['username'] = $myusername;
$_SESSION['password'] = $mypassword;

header("location:login_success.php");
}
else {
header('Location: http://www.xxxxxx.com/pabrowser/index.php?succmsg1=INVALID.RETRY');
}
?> 
```

有什么建议可以让它更安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:27:52.587

问题是您的`check_input`函数已经引用了字符串，因此插入结果而不包含引号：

```
$sql = "SELECT * FROM logintbl
        WHERE stu_email = $myusername AND password = $mypassword"; 
```

至于使其更安全的建议：

1.  `mysql_`如评论中所述，删除并使用参数化查询。它可以帮助您避免胡说八道，这些胡说八道很容易被意外遗漏。
2.  不要将用户的密码以明文形式存储在数据库中。对它们进行散列，最好使用盐，最好使用独特的盐，最好使用像 bcrypt 这样的慢速散列。

# javascript - 如何将 FixedTableHeader jQuery 插件更改为也具有固定的第一列？

> ID：11193207
> 
> 赞同：5
> 
> 时间：2012-06-25T16:22:15.370
> 
> 标签：javascript, jquery, html, css, jquery-plugins

我正在使用来自[http://www.tablefixedheader.com/](http://www.tablefixedheader.com/)的 jQuery 插件来制作具有固定标题、排序和其他很酷功能的时髦表格。现在，我还查看了 jqGrid，它看起来非常棒，但是我们正在用我们的数据源做一些时髦的事情，我认为它还不能很好地与 jqGrid 一起使用。

无论如何，我的老板希望我创建的表格的第一列是固定的，所以他们可以在 x 轴上滚动，但仍然可以看到第一列。如何修改此插件以提供此功能？

任何帮助是极大的赞赏

谢谢

编辑：

我尝试添加：

```
th:first-child
{
    position        : relative; 
}
td:first-child
{
    position        : relative; 
} 
```

以及“固定”，但它似乎比这个简单的解决方案更复杂......

这样做确实有效果，只是不是那么令人愉快。进行此更改会使其在左侧保持静态，但我无法真正向下滚动，并且 th 似乎并没有真正起作用。

编辑2：

我已经开始实施下面给出的解决方案，尽管我对自己修改这个插件的能力并不完全有信心。无论如何，这是修补的当前状态：

我会继续更新，因为我去......

我收到一条错误消息，提示 this.offset.top 为 null 或不是对象...等等，

这段代码在 document.ready 中：

```
 var currentTop = 0;
         var currentLeft = 0;
         var currentWidth = 0;
         var currentHeight = 0;
         var currentContent = "";
         var currentDiv = "";
         var currentID = "";
         $('td:first-child').each(function (index) {
             currentTop = $(this).offset.top;
             currentLeft = $(this).offset.left;
             currentWidth = $(this).width;
             currentHeight = $(this).height;
             currentContent = $(this).html();
             currentID = "fixed_column_cell" + index;
             currentDiv = "<div class=\"fixed_column_cells\" id=\"" + currentID + "\">" + currentContent + "</div>";
             $('body').append(currentDiv);
             $('#' + currentID).offset({ top: currentTop, left: currentLeft });
             $('#' + currentID).width(currentWidth);
             $('#' + currentID).width(currentHeight);
         });
         $('fixed_column_cells').css('position', 'fixed'); 
```

目前卡住了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:33:58.987

有趣的问题。我认为您不会发现表格单元格 (TD) 元素会以这种方式为您服务。要做的事情可能是遍历所有 td:first-childs 并将它们的内容复制到与 TD 重叠的相同大小的 div 中。这些 div 将让您正确定位它们。

我认为您遇到了固有表格单元格行为的限制。

伪代码：

*   对于第一列中的每个表格单元格
*   获取左上角位置
*   获取宽度和高度
*   在相同位置创建相同大小的新 div
*   将内容复制到新的 div
*   将 div 设置为固定位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:29:37.413

我知道您说过您已经获得了固定标头的 jquery 库。然而，有一些用于固定列和标题的库。我使用的一个是[固定表](http://www.novasoftware.com/download/jquery_fixedtable/jquery_fixedtable.aspx)，它允许您设置左列以及要固定的标题。希望对你有帮助

# powershell - 在 Azure VMRole 上公开端口

> ID：11193208
> 
> 赞同：1
> 
> 时间：2012-06-25T16:22:17.303
> 
> 标签：powershell, azure, azure-vm-role

将项目发布到 Azure 后，我们可以在 Azure VMRole 上公开端口吗？可能使用 Azure Powershell cmdlet 或其他方式。

目前，我正在删除 VMRole 并在我的项目（Visual Studio Azure 项目）上添加新的端点并重新发布它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:57:09.473

我很确定云应用的答案是否定的。（VM 角色是云应用程序的一种角色。）必须在发布之前声明端点。

# php - 使用 Drupal 6 的表单 ahah 让一个下拉字段更新第二个下拉字段的值

> ID：11193210
> 
> 赞同：0
> 
> 时间：2012-06-25T16:22:22.110
> 
> 标签：php, javascript, drupal, drupal-6, drupal-modules

我正在研究一对直接相互影响的表单域。具体来说，我正在处理的问题是我们有成千上万的用户可以加入这个我一直在努力的网站上。我们正在为该站点创建一些管理分析表单。这些表单的一部分是按组过滤。

问题是大多数人不知道他们头顶上的一个组的名称，只知道它的开头。因此，我们没有使用自动完成功能，而是提出了两个下拉菜单。第一个包含选项 A 到 Z，即组名开头的字母。第二个下拉列表包含以所选字母开头的所有组。

这个概念很简单，我们可以很容易地用 jQuery 实现 AJAX。但这会导致验证错误。经过一些研究，我发现这与 Drupal 表单缓存有关。解决方案是使用 ahah 函数。

问题在于，到目前为止，我发现的所有指令都是针对指定字段更新本身而不是另一个字段的啊哈动作。因此，我试图弄清楚如何获取字母列表以使用 ahah 更新组列表并将新值注册到表单缓存中。

我发现的一种解决方案是简单地将页面上的所有值加载到隐藏的下拉列表中，然后根据需要将集合中的值加载到可见的下拉列表中。但这会产生很多问题，因为客户端几乎只使用 IE，而且我们已经看到 IE 在给定如此庞大的列表时会阻塞。尤其是存储在 JavaScript 中的列表。所以我们需要一个轻量级的解决方案。

有什么想法吗？想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:04:57.570

简而言之，AHAH 是这样工作的：

*   表单生成为空`$form_state`
*   当具有该`#ahah`属性的元素发生更改时，将对属性中指定为路径的 url 进行 ajax 调用`#ahah`。
*   该网址的回调执行以下操作：
    *   从表单缓存中检索表单
    *   处理表格
    *   用电流重建表单，`$form_state`以便它可以基于它添加/更改元素
    *   将表单放入表单缓存以避免验证错误
    *   表单以 JSON 格式呈现并返回
*   Drupal 将包装器 div 的内容替换为新表单。

在您的情况下，您需要让表单生成函数知道在 $form_state 中选择的值。它必须：

*   生成字母下拉菜单
*   查看 $form_state 并查看是否选择了一个字母。如果是这样，请根据所选值生成第二个下拉列表。

回调函数将实现表单缓存和重建。

回调函数的代码在这里有很好的解释：

*   [http://drupal.org/node/348475](http://drupal.org/node/348475)
*   [http://drupal.org/node/331941](http://drupal.org/node/331941)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T21:58:17.510

我实际上在另一个 StackExchange 网站上得到了答案。他使用示例模块提出解决方案的建议非常有效。

解决方案在这里找到：[https ://drupal.stackexchange.com/questions/35048/using-drupal-6s-form-ahah-to-have-one-dropdown-field-update-the-values-of-a-sec](https://drupal.stackexchange.com/questions/35048/using-drupal-6s-form-ahah-to-have-one-dropdown-field-update-the-values-of-a-sec)

# json - 主干.js 中的假模型响应

> ID：11193211
> 
> 赞同：6
> 
> 时间：2012-06-25T16:22:32.730
> 
> 标签：json, backbone.js

如何在我的模型 st 中伪造一个 REST 响应，它并没有真正进入服务，而是返回一个固定的 json？

如果可能的话，给我展示一个覆盖sync()的版本和一个覆盖fetch()的版本。我两者都失败了，所以这将是一个很好的教育，因为它们之间的区别。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T08:01:56.490

```
Backbone.Model.extend({
  fetch: function(){
    var model = this;
    model.set({yourStatic: "Json Here"});
  }
} 
```

这应该有效。从骨干文档：

> `fetch()`：通过委托给 Backbone.sync 从服务器重置模型的状态

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T16:44:44.543

如果您的问题与不需要实时 API 的单元测试代码有关，请查看[Sinon.JS](http://sinonjs.org)。它有助于模拟整个 API 服务器响应以进行测试。

下面是一个来自 Sinon 文档的示例，它模拟了 jQuery 的 $.ajax 函数：

```
{
    setUp: function () {
        sinon.spy(jQuery, "ajax");
    },

    tearDown: function () {
        jQuery.ajax.restore(); // Unwraps the spy
    },

    "test should inspect jQuery.getJSON's usage of jQuery.ajax": function () {
        jQuery.getJSON("/some/resource");

        assert(jQuery.ajax.calledOnce);
        assertEquals("/some/resource", jQuery.ajax.getCall(0).args[0].url);
        assertEquals("json", jQuery.ajax.getCall(0).args[0].dataType);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-10T01:54:34.723

看一下[主干-人造服务器](https://github.com/biril/backbone-faux-server)。它将允许您处理（和“伪造”响应）*每个*模型（或集合）的*任何*同步操作（获取、保存等）。

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-14T06:57:01.140

Sinon.js 是一个很好的候选者，虽然如果你想模拟多个响应，设置标题、处理写入逻辑等可能会成为很多工作。

FakeRest 在 Sinon.js[的](https://github.com/marmelab/FakeRest)基础上更进一步，模拟了一个基于 JSON 对象的完整 REST API - 所有客户端。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-23T05:26:08.643

我的代码是这样的

```
// config
const TEST_JSON = require('./test.json')

const API_MAP = {
    testA: 'someroot'
}
const FAKE_API_MAP = {
    testA: TEST_JSON
}

// here's model
let BaseModel = Backbone.Model.extend({
    url: function() {
        return `${HOST}${API_MAP[this.resourceName]}/`
    }
})
let FakeModel = Backbone.Model.extend({
    fetch: function(options) {
        return this.sync('', this, _.extend({}, options));
    },
    sync: function(method, model, options) {
        this.set(FAKE_API_MAP[this.resourceName], this.options)
        this.trigger('sync', this);
    },
});

// now it's easy for switch them 
let modelA = new BaseModel({
    resourceName: 'testA'
})
modelA.fetch()

let fakeModelA = new FakeModel({
    resourceName: 'testA'
})
fakeModelA.fetch() 
```*

# python - Pandas 更改了默认的 numpy 数组格式

> ID：11193212
> 
> 赞同：3
> 
> 时间：2012-06-25T16:22:35.137
> 
> 标签：python, numpy, pandas

有什么方法可以防止更改数组`pandas`的默认打印格式？`numpy`

使用 plain `numpy`，我得到：

```
>>> numpy.array([123.45, 0.06])
array([  1.23450000e+02,   6.00000000e-02]) 
```

导入后`pandas`，我得到：

```
>>> numpy.array([123.45, 0.06])
array([ 123.45,    0.06]) 
```

我可以阻止它作为配置设置吗？我不想用“foo=np.get_printoptions(); import pandas; np.set_printoptions(**foo)”来包装每个“import pandas”，但这是我能想到的最好的方法。

事实上，如果我在一个地方导入熊猫，我会从另一个地方得到 doctest 错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T05:28:27.630

你应该只需要用 np.set_printoptions(foo) 包装第一个 import pandas，因为 python 会缓存它。见下文：

```
import numpy
>>> numpy.array([123.45, 0.06])
array([  1.23450000e+02,   6.00000000e-02])
>>> import pandas
>>> numpy.array([123.45, 0.06])
array([ 123.45,    0.06])
>>> numpy.set_printoptions(edgeitems=3,infstr='inf', linewidth=75, nanstr='nan', precision=8, suppress=False, threshold=1000)
>>> numpy.array([123.45, 0.06])
array([  1.23450000e+02,   6.00000000e-02])
>>> import pandas
>>> numpy.array([123.45, 0.06])
array([  1.23450000e+02,   6.00000000e-02]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T23:02:53.693

这有点烦人，因为我认为 NumPy 应该`suppress=True`作为默认设置。我正在改变熊猫而不是改变它。

# c++ - 继承中使用了哪个受保护的变量？

> ID：11193218
> 
> 赞同：0
> 
> 时间：2012-06-25T16:23:07.053
> 
> 标签：c++, inheritance

假设我有一个 Base 类及其派生类 Derived，如下所示：

```
class Base{
    private:
        _privateVar;

    protected:
        protectedVar;

    public:
        publicVar;

    void publicMethod(someValue, anotherValue)
    {
        protectedVar = someValue;
        publicVar = anotherValue;
    }
};

class Dervied: public Base{

    protected:
        protectedVar:
};

int main(void)
{
    Dervied d;
    d.publicMethod(valueA, valueB);
} 
```

我的问题-

当我调用`d.publicMethod(...)`时，Derived 中的 protectedVar 是设置还是 Base 类中的设置？

谢谢

- 一个

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T16:25:21.733

它是`Base`一流的。基类不能访问派生类成员。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T16:24:15.543

> **当我打电话`d.publicMethod(...)`时，是`protectedVar`在 Derived 中设置还是在 Base 类中设置？**

该方法是基类的成员，因此它只能访问基类的成员。

如果该方法属于您的派生类，那么它将访问派生类成员。
因为派生类数据成员在访问它们自己的成员函数时总是隐藏基类数据成员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T16:53:11.023

您不能*覆盖*成员变量，您可以在层次结构的不同级别创建另一个具有相同名称的不同变量，但它们将是两个不相关的变量。在*使用*变量的上下文中，查找将找到一个或另一个，这就是将被拾取和使用的那个。

多态性只适用于`virtual`成员函数，不适用于非虚函数，也不适用于成员变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T16:27:04.943

由于 publicMethod 是 Base 类的方法，因此设置了基类的 protectedVar。

我不知道这是否是您想要或期望的，但即使这是您想要的，我认为不建议这样做。PC-LINT 之类的工具也可能会警告您这种结构。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T16:34:05.257

**基**类中的成员被修改。数据成员从不表现得好像它们是虚拟的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-25T16:36:11.303

当编译器达到 的定义时`Base::publicMethod`，它必须*静态*解析它使用的所有名称。此时，这些名称的唯一可能解析是 的成员`Base`，因此生成的代码将访问这些成员。

以后的子类`Base`化不会也不可能返回并更改为`Base::publicMethod`. 派生类可以在不同的翻译单元中，或者在动态加载的库中。

* * *

如果您想要*动态*查找，请`protectedVar`通过受保护的虚拟访问器函数访问：这将允许派生类插入自己的变量存储。

如果`Base::protectedVar`和`Derived::protectedVar`无论如何都具有相同的类型，则很难看到您期望获得什么，但它看起来像：

```
class Base
{
    Type protectedVarImpl;

protected:
    virtual Type & protectedVar();
    virtual Type const & protectedVar() const;

public:
    void publicMethod(someValue, anotherValue)
    {
        protectedVar() = someValue; // Note the method call
        publicVar = anotherValue;
    } 
};

Type& Base::protectedVar() { return protectedVarImpl; } 
```

# haskell - Haskell 类型错误：无法从上下文 (Num a) 中推断出 (Show a) 使用“show”引起的

> ID：11193219
> 
> 赞同：7
> 
> 时间：2012-06-25T16:23:07.220
> 
> 标签：haskell, types, compiler-errors, typeclass, xmonad

我正在配置 xmonad，因为我必须启动几个 dzen 实例，所以我决定最好使用一个函数来获取 x 和 y 位置、宽度、高度和文本对齐的参数：

```
-- mydzen.hs

import Data.List

-- | Return a string that launches dzen with the given configuration.
myDzen :: Num a  => a -> a -> a -> Char -> String -> String

myDzen y x w ta e =
        intercalate " "
            [ "dzen2"
            , "-x"  , show x
            , "-w"  , show w
            , "-y"  , show y
            , "-h"  , myHeight
            , "-fn" , quote myFont
            , "-bg" , quote myDBGColor
            , "-fg" , quote myFFGColor
            , "-ta" , [ta]
            , "-e"  , quote e
            ]

quote :: String -> String
quote x = "'" x "'"

-- dummy values
myHeigth = "20"
myFont = "bitstream"
myDBGColor = "#ffffff"
myFFGColor = "#000000"

Could not deduce (Show a) arising from a use of `show'
from the context (Num a)
  bound by the type signature for
             myDzen :: Num a => a -> a -> a -> Char -> String -> String
  at mydzen.hs:(5,1)-(17,13)
Possible fix:
  add (Show a) to the context of
    the type signature for
      myDzen :: Num a => a -> a -> a -> Char -> String -> String
In the expression: show x
In the second argument of `intercalate', namely
  `["dzen2", "-x", show x, "-w", ....]'
In the expression:
  intercalate " " ["dzen2", "-x", show x, "-w", ....] 
```

显然，删除签名或更改`Num a`for`Show a`可以解决问题，但我不明白为什么。'arguments' `x`,`w`并且*应该*`y`是几乎任何类型的数字（, , ecc ）。*`100``550.2``1366 * 0.7`*

 *我是 haskell 的新手，直到现在我还无法（清楚地）理解错误或找出问题所在。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-25T18:15:00.587

以前，`Show`和`Eq`是超类，`Num`并且代码可以编译。

在新的 GHC 中，从 7.4 版开始，这已经改变，现在`Num`不依赖于`Show`and `Eq`，因此您需要将它们添加到签名中。

原因是关注点分离 - 存在没有合理相等和显示函数的数字类型（可计算实数，函数环）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-25T16:28:00.537

并非所有数字都是可显示的（标准类型如`Int`or `Integer`are，但您可以定义自己的类型；编译器怎么知道？）您`show x`在函数中使用 - 因此，`a`必须属于`Show`typeclass。您可以将签名更改为`myDzen :: (Num a, Show a) => a -> a -> a -> Char -> String -> String`并消除错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-25T16:28:07.270

`show`不是`Num`类型类的一部分——为了能够使用它，你必须在它`Show`旁边添加约束`Num`：

```
myDzen :: (Num a, Show a) => a -> a -> a -> Char -> String -> String 
```*

# spring - 在 Spring Integration 中使用 @Header 注释的服务激活器方法映射

> ID：11193223
> 
> 赞同：0
> 
> 时间：2012-06-25T16:23:21.043
> 
> 标签：spring, annotations, messaging, spring-integration

我正在使用 Spring Integration 开发 Web 应用程序来路由我的消息，但是我在传递我的标头值时遇到了一些问题。我的消息通过路由器和服务激活器。

标头值在我的路由器的路由方法中可用，所以它似乎没问题。让我们假设这不是问题（我通过禁用我的服务激活器来检查这一点）。

当涉及到我的服务激活器方法时，会引发以下错误：“无法在目标类 MyService 上找到任何名为***process的有效消息处理方法。”***

**我的弹簧集成.xml**

```
<channel id="route" />
<service-activator method="process" input-channel="route" ref="myService" output-channel="myOutputChannel" /> 
```

**MyRouter.java**

```
@Component
public class MyRouter {

   public String router(String message, @Header("isValid") boolean isValid) {
      // isValid is "true"
      return "route";
   } 

} 
```

**我的服务.java**

```
@MessageEndpoint
@Transactional
public class MyService {

   public void process(String message, @Header("isValid") boolean isValid) {
      ...
   }

} 
```

这是为什么？路由后是否会删除标头值？还是我的配置不对？我尝试将@ServiceActivator 注释添加到我的流程方法中，但没有帮助。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T02:17:01.117

我猜这是由于`@Transactional`在不实现任何接口的 Service 上有注释引起的。

Spring 将使用 JDK 动态代理来实现事务逻辑，这些代理依赖于实现合适接口的代理类。[这里](http://blog.springsource.org/2012/05/23/understanding-proxy-usage-in-spring/)有一个关于这个的 Spring 博客。

为了解决这个问题，我建议您使用一个名为 process 的方法创建一个名为 MyService 的接口。然后让你服务实现这个接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:49:11.627

我正在使用遗留代码，它可能是由旧的 spring 集成版本引起的。我的应用程序支持“@Headers”，但不支持“@Header”注释。@Header 注释在我的接口路由器中被接受，而不是在我没有实现任何接口的服务激活器中。我怀疑它是由旧版本的 spring 集成或 cglib 引起的。

# sharepoint - 如何强制用户为会议工作区使用特定的自定义模板？

> ID：11193224
> 
> 赞同：0
> 
> 时间：2012-06-25T16:23:23.200
> 
> 标签：sharepoint, sharepoint-2010, calendar, workspace, user-permissions

我在 SharePoint 2010 网站上有一个日历，并且基于标准会议工作区创建了一个自定义网站模板。我想强制用户只能使用我的自定义模板。

一种选择是`Hidden="TRUE"`为所有其他会议工作区模板添加 webtemp.xml - 这将使我成为唯一的选择。但是，这适用于农场级别，我希望保留模板可用于其他 Web 应用程序。如果我可以在 Web 应用程序或更低级别上做到这一点，它就会成功。

更好的解决方案 - 如果我可以让新的事件对话完全跳过这一步并使用我的模板而无需询问。

背景：我的自定义模板仅包含安全自定义，没有 UI 或内容更改。我想强加它，因为我对与父站点不同的会议工作区的权限有要求 - 所以必须打破继承。但是除了使用工作区的站点模板之外，我想不出另一种方法来提供默认权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T22:45:28.430

站点设置 > 外观 > 页面布局和站点模板

选择要在站点中使用的站点模板，这可以沿站点集合一直继承，也可以从子网站开始。

# c# - 在 C# 中获取域中所有打印服务器的列表

> ID：11193231
> 
> 赞同：5
> 
> 时间：2012-06-25T16:23:59.130
> 
> 标签：c#, .net, network-printers

我在一个大型环境中为技术支持团队编写实用程序。我需要提供域中所有打印服务器的列表并让他们选择一个。一旦他们选择了打印服务器，我将列出该打印服务器上的所有打印队列并让他们选择一个。我找到了很多关于如何从打印服务器中提取打印队列列表的示例，但没有关于如何获取打印服务器列表的示例。

如何获取域 (C#) 中所有打印服务器的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:35:11.890

您可以使用 System.Management 命名空间。

请参考这个线程：
[Is there a .NET way to enumerate all available network printers?](https://stackoverflow.com/questions/1018001/is-there-a-net-way-to-enumerate-all-available-network-printers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-05T09:38:18.273

我不确定这是否有帮助，但您可以查找网络中的所有计算机并检查它们的名称。

像这样：

```
// Reference System.DirectoryServices is needed

DirectoryEntry root = new DirectoryEntry("WinNT:");
foreach (DirectoryEntry computers in root.Children)
{
    foreach (DirectoryEntry computer in computers.Children)
    {
        if (computer.SchemaClassName == "Computer") {
            if (computer.Name.IndexOf("printer-prefix-or-so")==-1)
                Console.WriteLine(computer.Name);
        }                            
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-21T20:35:04.367

在 PowerShell 中，您可以执行以下操作：

> Import-Module ActiveDirectory Get-ADObject -LDAPFilter "(&(&(&(uncName=*)(objectCategory=printQueue))))" -properties *|Sort-Object -Unique -Property servername |select servername

# html - 使用 CSS 将特定样式应用于列表项

> ID：11193233
> 
> 赞同：2
> 
> 时间：2012-06-25T16:24:10.293
> 
> 标签：html, css

我有一个简单的列表，我设法排成一行，并为所有项目提供背景图像。但是我想让一些列表项（列表项 3）具有不同的背景图像。有没有办法在不使用 !important 的情况下做到这一点？我的代码在下面。

**CSS**

```
.my-list li {
    list-style: none;
    display: inline;
    background-image: url(../images/butn-bg.png);   
}
.different-bg {
        background-image: url(../images/butn-bg-1.png);
} 
```

**的HTML**

```
<div class="my-list">
  <ul>
    <li>List item 1</li>
    <li>List item 2</li>
    <li class="different-bg">List item 3</li>
    <li>List item 4</li>
  </ul>
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T16:26:49.843

您只需要增加选择器的特异性：

```
.my-list li {
    list-style: none;
    display: inline;
    background-image: url(../images/butn-bg.png);   
}
.my-list li.different-bg {
        background-image: url(../images/butn-bg-1.png);
} 
```

请参阅[计算选择器的特异性](http://www.w3.org/TR/selectors/#specificity)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:29:41.597

看我的例子：[jsfiddle](http://jsfiddle.net/8ePTv/)

一切正常。尝试制作更常见的样式，并将它们写为补充更改。将此添加到您的CSS：

```
.my-list .different-bg {
    background-image: url(http://placekitten.com/g/200/300);
}​ 
```

如果您有兴趣，可以在这里找到更多详细信息：[获取特定的 css 样式](http://www.sitepoint.com/get-specific-css-styles/)

# django - 为什么詹金斯工作结束时Django应用程序退出？

> ID：11193234
> 
> 赞同：0
> 
> 时间：2012-06-25T16:24:11.167
> 
> 标签：django, jenkins

我使用 bash 运行以下命令来启动 Django 应用程序，即使我从该 shell 退出也没有任何问题。

```
python manage.py runfcgi daemonize=true ... 
```

当 Jenkins 运行上面相同的命令时，Django 应用程序运行以及使用 bash 运行。但是为什么在作业结束时应用程序会被杀死？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:37:07.893

我猜 Jenkins 会为每个作业启动一个新的 shell 会话，然后在作业完成时关闭它。这将终止在该会话中启动的任何进程。

如果您希望进程在关闭会话后继续存在，您可以使用以下命令启动它`nohup`：

```
nohup python manage.py runfcgi daemonize=true ... 
```

过去我在使用fabric 时遇到过类似的问题——即使我将daemonize 标志设置为true，服务也会终止。我曾经`nohup`解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T04:46:56.400

我在这里找到了一个解决方案，它适用于我 [https://wiki.jenkins-ci.org/display/JENKINS/ProcessTreeKiller](https://wiki.jenkins-ci.org/display/JENKINS/ProcessTreeKiller)

# ios - MVC——弥合我的模型和它在屏幕上的表现之间的差距

> ID：11193236
> 
> 赞同：2
> 
> 时间：2012-06-25T16:24:20.640
> 
> 标签：ios, model-view-controller, core-data

我正在构建一个 Settlers of Catan 游戏，希望能够理解正确的 MVC 设计模式。

我创建了名为 的核心数据实体`Tiles`，`Corners`它们代表游戏板，每个图块与其 (6) 角具有一对多的关系。这些代表我的“模型”。

我还创建了相应的“视图控制器”类，它们代表屏幕上绘制的瓷砖和角的这些物理表示。我将这些 Cocos2D 类`BoardTiles`和`BoardCorners`.

**如何通过视图控制器有效地探索我在模型中创建的关系？**

我试过了：

1) 为 VC 提供对其相应核心数据实体的引用

2）查询实体的角点（boardTile.tile.corners）

3) 获取生成的 CoreData 角并通过唯一 ID 查找查询其 VC“所有者”。

有没有更好的方法来构建它，以便视图控制器能够更轻松地访问模型的关系数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T09:21:45.190

游戏是理解 MVC 的一种非常糟糕的方式，纯粹是因为它们往往具有如此小的模型域。

模型和视图是对象的类别/集合/域。这些对象是完全独立的。

> 我创建了名为 Tiles 和 Corners 的 Core Data 实体，它们代表游戏板，每个 tile 与其 (6) 个角具有一对多的关系。这些代表我的“模型”。

瓷砖和角落属于您的视图域（视觉对象）。

模型中可能存在的一个例子是某种形式的卫生系统或货币系统。虽然您的主角有健康，但他（通常）不代表此信息，您会有某种进度条或百分比数字。

进度条是一个 View 对象，与健康系统相关的统计信息存储在一个 Model 对象中。您的 Health System 域将具有规则/策略和其他类/对象。

# php - 用 eclipse 更新 cvs 和文件

> ID：11193238
> 
> 赞同：0
> 
> 时间：2012-06-25T16:24:32.667
> 
> 标签：php, eclipse, cvs, sftp

过去，使用 Eclipse 和 PHP 服务器/系统，我进行了设置，以便当我提交对 CVS 存储库的更改时，它还将实际的 php 文件保存在服务器上。过去我在另一台计算机上拥有此功能（我无法检查这台计算机）。存储库的文件似乎已保存在不同的文件夹中。所以 cvs 位于 var/cvs 之类的文件夹结构中，而我面向客户端的系统文件/PHP 文件位于 var/www/html/ 之类的目录中。如何设置这样的东西？我现在使用 sftp 通过 Filezilla 更改文件。在能够提交更改并检查网络以确保更改有效之前非常方便。现在我必须提交更改，然后使用 ftp 保存文件以查看更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:14:46.777

您可以使用 CVS 服务器上的提交后挂钩脚本来更新（刷新）`var/www/html/`. 因此，每次提交时，钩子脚本都会获取服务器上文件的最新版本并将它们放入`var/www/html/`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:11:55.540

在我看来，您正在实时网站上测试您的最新更改，这是个坏主意，因为如果您无意中编辑了文件中的某些错误，您的网站可能会将其暴露给公众。

我目前的工作流程如下：

我在本地项目上使用 Netbeans，这也是 SVN 结帐。在大多数项目中，我使用 Netbeans 选项“将文件从源文件夹复制到另一个位置”将“保存时”编辑的文件复制到本地测试网络服务器目录。如果更改在本地网络服务器上有效，我会将它们提交到 SVN 存储库并通过 SSH 登录到实时网络服务器并从 SVN 签出最新版本。

所以实际上我有每个文件的四个副本：

1.  工作副本（Netbeans 项目和 SVN 结帐）
    `/home/feeela/projects/xyz/`（仅在此处编辑）
2.  测试服务器副本；Netbeans 在每次保存时都会在其中存储一个副本；
    `/var/www/vhosts/xyz/`(127.0.0.1/xyz/)
3.  SVN 存储库；在本地网络服务器上测试后，我将手动提交文件；
    `/var/svn/xyz/`( `svn commit -m "my last change"`)
4.  实时服务器上的 SVN 结帐，这是实际的网站；
    `/var/www/vhosts/xyz/`( `svn update`@xyz.com/)

我不知道如何使用 Eclipse 设置“本地复制”功能（也可以指其他机器）。如果有人知道使用 Eclipse 重现上述工作流的方法，并且不需要手动将文件同步到测试服务器，我会很高兴在这里阅读...</p>

# android - 使用 audioSessionId 值来实例化 AudioFx 类？

> ID：11193239
> 
> 赞同：17
> 
> 时间：2012-06-25T16:24:34.530
> 
> 标签：android, audio

我已经阅读了 Android API 并尝试在互联网上搜索有关声明自定义的信息`audioSessionId`，然后使用它`audioSessionId`来初始化 AudioFx 类并为我的 MediaPlayer 或 AudioTrack 分配硬编码的`audioSessionId`.

这种方法将允许我先创建一个 AudioFx，然后将一个新的 MediaPlayer 或 AudioTrack 附加到这个`audioSessionId`.

我目前能够在 Android 2.3.6 上使用此方法，但在 Android 4.x 上，我遇到了初始化失败的错误问题，或者在其他 ICS/JellyBean 设备上，此错误是无声的，但调用函数会导致异常。

**三星 Galaxy S II [Android 4.0.3]：** *[Android 4.0.4 不再出现问题]*

```
 E/AudioEffect(13250): set(): AudioFlinger could not create effect, status: -38
 E/AudioEffects-JNI(13250): AudioEffect initCheck failed -5
 E/AudioEffect-JAVA(13250): Error code -5 when initializing AudioEffect.
 W/WrapEqualizer(13250): createEqualizer() -> Effect library not loaded 
```

**摩托罗拉 Xoom [Android 4.1.2]**
在构造函数之后似乎无声无息地失败了。然后调用 getProperties() 它崩溃。

```
java.lang.RuntimeException: AudioEffect: set/get parameter error
    at android.media.audiofx.AudioEffect.checkStatus(AudioEffect.java:1247)
    at android.media.audiofx.Equalizer.getProperties(Equalizer.java:532) 
```

**Nexus 4 [Android 4.2.1]**
使用 audioSessionId=0 一切正常，但使用任何其他数字时，每次我尝试将预设、频段级别、低音增强更改为 ON 或 Virtualizer 更改为 ON 时，设备都会报告以下静音错误。报告的效果 ID 因我尝试修改的 FX 而异。

```
W/AudioPolicyManagerBase(165): unregisterEffect() unknown effect ID 1381 
```

**2012 年8 月 11 日更新：**
我可以`audioSessionId`用作 0。我知道它已被弃用，但它可以使用权限。`<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />`我应该使用音频会话 id 为 0 的 AudioFx 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T13:08:05.420

你应该看看：[这个](http://code.google.com/p/android/issues/detail?id=33669)

显然这是 ICS 中出现的一个未解决的问题，并且可能在 JB 中也没有解决。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T18:07:46.933

> 我应该使用音频会话 id 为 0 的 AudioFx 吗？

在某些情况下它可能会起作用，但不要指望它在未来的 Android 版本上继续这样做。您已经在损害您的应用程序与 Jellybean 上的其他应用程序之间的互操作性。看看[启用效果时 AudioFlinger 的作用](https://www.codeaurora.org/gitweb/quic/la/?p=platform/frameworks/av.git;a=blob;f=services/audioflinger/AudioFlinger.cpp;h=1b6b9507713469bbfe66fc3b1039f23b95d255b4;hb=refs/heads/jb_2.2_rb2_5.2#l1832)：

```
// suspend all effects in AUDIO_SESSION_OUTPUT_MIX when enabling any effect on
// another session. This gives the priority to well behaved effect control panels
// and applications not using global effects.
// Enabling post processing in AUDIO_SESSION_OUTPUT_STAGE session does not affect
// global effects
if ((sessionId != AUDIO_SESSION_OUTPUT_MIX) && (sessionId != AUDIO_SESSION_OUTPUT_STAGE)) {
    setEffectSuspended_l(NULL, enabled, AUDIO_SESSION_OUTPUT_MIX);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T10:13:40.187

如果有人想尝试，我知道这个问题

做这个

```
 Equalizer eq=null;
 .
 .
 .
 .
 .
 //in any function before initialization do this
 if(eq!=null)
      eq.release();
 eq=new Equalizer(0, audiosessionid); 
```

试一次

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-01T23:39:36.397

Other than session 0 which is the "deprecated global session", my understanding of the AudioFlinger code shows that sessions are only created for classes which actually do audio IO, that is, AudioRecord, AudioTrack, MediaPlayer etc. You should create these classes, and then get their session ID, and then attach the effect.

Any other value you supply for session ID will correspond to an audio session that does not exist, and so will fail.

# php - 正则表达式匹配具有多个括号的表达式，一个在彼此内

> ID：11193240
> 
> 赞同：1
> 
> 时间：2012-06-25T16:24:36.193
> 
> 标签：php, regex, parentheses

我正在构建一个任务（在 PHP 中），它读取我项目的所有文件以搜索 i18n 消息。我想检测这样的消息：

```
// Basic example
__('Show in English')  => Show in English
// Get the message and the name of the i18n file 
__("Show in English", array(), 'page') => Show in English, page
// Be careful of quotes
__("View Mary's Car", array()) => View Mary's Car
// Be careful of strings after the __() expression
__('at').' '.function($param) => at 
```

适用于这些情况的正则表达式（考虑到其他一些情况）是：

```
__\(.*?['|\"](.*?)(?:['|\"][\.|,|\)])(?: *?array\(.*?\),.*?['|\"](.*?)['|\"]\)[^\)])? 
```

但是，如果表达式在多行中，则它不起作用。我必须包括 dotail `/s`，但它破坏了以前的正则表达式，因为它不能很好地控制何时停止向前看：

```
// Detect with multiple lines
echo __('title_in_place', array(
    '%title%' => $place['title']
  ), 'welcome-user'); ?> 
```

有一件事可以解决问题并简化匹配开闭括号的正则表达式。因此，无论里面有什么`__()`或有多少括号，它都会“计算”打开的数量并期望关闭的数量。

可能吗？如何？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T00:38:28.673

是的。首先，这是简单嵌套括号（括号）的经典示例：

## `\(([^()]|(?R))*\)`

或使用所有格量词的更快版本：

`\(([^()]++|(?R))*\)`

或（等效）原子分组：

`\((?>[^()]+|(?R))*\)`

但是你不能在这里使用：`(?R)` *“匹配整个表达式”*表达式，因为最外面的括号是特殊的（有两个前导下划线）。这是一个经过测试的脚本，它匹配（我认为）你想要的......

## 解决方案：使用组`$1`（递归）子程序调用：`(?1)`

```
<?php // test.php Rev:20120625_2200
$re_message = '/
    # match __(...(...)...) message lines (having arbitrary nesting depth).
    __\(                     # Outermost opening bracket (with leading __().
    (                        # Group $1: Bracket contents (subroutine).
      (?:                    # Group of bracket contents alternatives.
        [^()"\']++           # Either one or more non-brackets, non-quotes,
      | "[^"\\\\]*(?:\\\\[\S\s][^"\\\\]*)*"      # or a double quoted string,
      | \'[^\'\\\\]*(?:\\\\[\S\s][^\'\\\\]*)*\'  # or a single quoted string,
      | \( (?1) \)          # or a nested bracket (repeat group 1 here!).
      )*                    # Zero or more bracket contents alternatives.
    )                       # End $1: recursed subroutine.
    \)                      # Outermost closing bracket.
    .*                      # Match remainder of line following __()
    /mx';
$data = file_get_contents('testdata.txt');
$count = preg_match_all($re_message, $data, $matches);
printf("There were %d __(...) messages found.\n", $count);
for ($i = 0; $i < $count; ++$i) {
    printf("  message[%d]: %s\n", $i + 1, $matches[0][$i]);
}
?> 
```

请注意，此解决方案将平衡括号（在 " `__(...)`" 构造内）处理到任意深度（仅受主机内存限制）。它还正确处理 " `__(...)`" 中的引用字符串，并忽略可能出现在这些引用字符串中的任何括号。祝你好运。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:28:57.650

正则表达式无法匹配平衡括号（除非您使用具有非标准非正则扩展名的引擎，但即便如此，这仍然是一个坏主意，并且难以维护）。

您可以使用正则表达式来查找包含潜在匹配项的行，然后逐个字符地遍历字符串，计算开括号和右括号的数量，直到找到匹配的右括号的索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-12T13:43:24.127

对我来说使用这样的表达

```
(\(([^()]+)\)) 
```

我试着找到它

```
 * 1) (1+2)
 * 2) (1+2)+(3+2)
 * 3) (IF 1 THEN 1 ELSE 0) > (IF 2 THEN 1 ELSE 1)
 * 4) (1+2) -(4+ (3+2))
 * 5) (1+2) -((4+ (3+2)-(6-7))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T16:34:39.353

我知道实现这一点的唯一方法是使用平衡的组定义。[这是 .NET 风格的正则表达式的一个特性，在这篇文章](http://weblogs.asp.net/whaggard/archive/2005/02/20/377025.aspx)中有很好的解释。

正如 Qtax 所指出的，这可以在 PCRE 中完成，`(?R)`如[他们的文档](http://www.pcre.org/pcre.txt)中所述。

或者这也可以通过编写自定义解析器来完成。基本上，这个想法是在`ParenthesesCount`从左到右解析时维护一个名为的变量。每次看到都会增加，`ParenthesesCount`每次看到`(`都会减少`)`。我最近编写了一个以这种方式处理嵌套括号的解析器。

# java - 当其他线程可以访问时从数据库更新静态地图

> ID：11193242
> 
> 赞同：1
> 
> 时间：2012-06-25T16:24:39.203
> 
> 标签：java, concurrency, static

```
class A {
static Map<String,ColA> mapA;
static const int a = 12;
static Map<String,colB> mapB;
} 
```

Q1> 现在我需要每 10 分钟从数据库更新一次地图。可以有多个线程可以访问 mapA。因此，如果我在其中一个线程中使用同步更新，那么在更新进行时线程可能会中断的任何实例。如果是这样如何解决这个问题？

Q2> 我也有不同的班级成员。其中一些是常量，其中一些是从内存中加载的。然而，它们都有一个共同的属性。对于所有实例（静态），它们总是相同的。那么将所有东西都放在一个类中是否有意义，或者我们应该有两个单独的类？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T16:28:59.863

> 现在我需要每 10 分钟从数据库中更新一次地图。可以有多个线程可以访问mapA。因此，如果我使用同步化的线程在其中一个线程中进行更新，那么当更新进行时，线程可能会中断的任何实例。如果是这样如何解决这个问题？

这听起来像是值得使用的地方`AtomicReference`。从数据库中获取数据，将其放入地图中，然后以原子方式将其与“旧”地图交换。这样，任何客户端代码都可以获取地图并知道它实际上是一个快照，在它们之下不会改变。

> 我也有不同的班级成员。其中有些是常量，有些是从内存中加载的。然而，它们都有一个共同的属性。对于所有实例（静态），它们总是相同的。那么将所有东西都放在一个班级中是否有意义，或者我们应该有两个单独的班级。

这是一个相当模糊的描述。您指定的所有属性（有些是常量，有些是从内存中加载的，都具有一个公共属性，都是静态的）与它们是否应该在同一个类中没有任何关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:35:10.007

`1\. If synchronization is used on the group of statement or the method which is responsible` 对于改变 MapA 的关键状态，我认为不会有问题。

`2\. I am not getting a clear understanding of your 2nd question, but still you can divide` `them in to classes using cohesive principle.`

**内聚类意味着，具有反映其名称的方法的类。**

例如：

```
 `class Animal with methods like Sound, Movements, etc...` 
```

# jquery - 使用 javascript 应用 jQuery“突出显示”主题样式？

> ID：11193243
> 
> 赞同：2
> 
> 时间：2012-06-25T16:24:39.487
> 
> 标签：jquery, jquery-ui, jquery-ui-theme

我将[jQuery UI 主题](http://jqueryui.com/themeroller/)与我的一个 Web 应用程序一起使用。

如果我想应用按钮样式，我添加以下 jquery 代码：

```
$(".button").button(); 
```

`.button`我希望使用 jquery 主题设置样式的按钮上的类在哪里。

![在此处输入图像描述](../Images/e4509ecfe69614c80a18dc3416f49c5e.png)

* * *

我怎样才能做类似的事情来将主题样式应用到我想将样式设置为“突出显示”的元素？

![在此处输入图像描述](../Images/d3bd2854ff5fa0181ab552d8e989b377.png)

我试过`.highlight();`了，但这没有奏效。

**注意：**我知道我可以手动将 CSS 类添加到我的元素中，但我希望将其与 jQuery 一起应用，因为这样可以节省我添加`span`显示图标的元素的时间。

因此，我希望能够拥有以下 HTML 代码：

```
<div class="highlight">
   <strong>Warning!</strong> Lorem Ipsum
</div> 
```

然后使用 jQuery 将其转换为：

```
<div class="highlight ui-state-highlight ui-corner-all" style="margin-bottom:20px">
   <p><span class="ui-icon ui-icon-info" style="float: left; margin-right: .3em;"></span>
   <strong>Warning!</strong> Lorem Ipsum</p>
</div> 
```

* * *

或者，我是否误解了主题滚轮页面上“突出显示”示例的用途？我假设这是一个警告框，考虑到它旁边是一个错误示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:40:16.560

[http://jsfiddle.net/mTu2R/3/](http://jsfiddle.net/mTu2R/3/)

```
$.fn.highlight = function() {
    return this.each(function() {

        var elem = $(this), p = $("<p>", {
            html: '<span class="ui-icon ui-icon-info" style="float: left; margin-right: .3em;"></span>' + 
                  elem.html()
        });

        elem.empty().addClass("ui-state-highlight ui-corner-all").append(p);

    });
};

$(".highlight").highlight(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:44:15.973

我觉得我可能错过了这里的重点，但你说过你想“用 jQuery”做这个，所以：

```
$(".highlight").each(function() {
    var elm, p;

    elm = $(this);
    // Create the new paragraph and span
    p = $('<p><span class="ui-icon ui-icon-info" style="float: left; margin-right: .3em;"></span></p>');
    // Add the classes to the element
    elm.addClass("ui-state-highlight ui-corner-all");
    // Move the element's children into the paragraph
    p.append(elm.contents());
    // Append the paragraph
    elm.append(p);
}); 
```

[实例](http://jsbin.com/ifonat)| [资源](http://jsbin.com/ifonat/edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T16:27:20.300

插件保留现有的 ID 和类

```
(function($){
$.fn.highlight=function(){
     return this.each(function(){                              
            var text=$(this).text();
            var id=this.id;
            var thisClass=$(this).attr('class');
            var $el=$('<div class="highlight ui-state-highlight ui-corner-all" style="margin-bottom:20px">\
                   <p><span class="ui-icon ui-icon-info" style="float: left; margin-right: .3em;"></span>\
                   <strong>'+text+'</strong> Lorem Ipsum</p>\
                </div>').attr(id, id).addClass( thisClass);

             $(this).replaceWith($el);
        });

};
})(jQuery);

$(anyElement).highlight(); 
```

# javascript - Firefox HTTP 表单操作不会触发

> ID：11193257
> 
> 赞同：0
> 
> 时间：2012-06-25T16:25:14.617
> 
> 标签：javascript, forms, firefox, asp-classic

在 Chrome 和 IE 中，下面的代码，当点击 Anchor 标签时，会弹出表单（模态框 ID 为“modalContent”，表单 ID 为“DL”）并在表单中添加一个“OnSubmit”。提交表单后，它将通过 Javascript 导航到请求的 PDF，并运行一些 ASP 以发送附有详细信息的电子邮件。

```
<script language="javascript">
            function downloadAnyway(link) {
                    $('#DL')[0].setAttribute('ONSUBMIT', 'return checkform("' + link + '")'); 
                    $('#modalContent').modal();
            }

            function checkform(navName) {
                    window.open(navName);
                    $.modal.close();
            }
</script>    

<!-- link to download a product guide -->    
<a href='javascript:downloadAnyway("downloads/ProductGuide.pdf")');">Product Guide</a>

<div id="modalContent">           
            <form id="DL" action="contactusprocessNew2.asp" method="post" name="contact" >
                <div align="center">
                     <input type="image" src="templates/default/images/submit_download.gif" class="imagebutton" value="submit" />
                </div>
            </form>
</div> 
```

这在 IE 和 Chrome 中工作正常，在 Firefox 中，Javascript onsubmit 工作，但 asp 的操作永远不会触发。如果我删除 javascript，asp 会按预期触发。

因此，在动态添加“onsubmit”之后，FireFox 中的最终表单如下所示：

```
<form id="DL" action="contactusprocessNew2.asp" method="post" name="contact" onsubmit="return checkform("downloads/ProductGuide.pdf")"> 
```

onsubmit 触发，在另一个选项卡中打开产品指南，但是，ASP 操作永远不会触发。这里还有更多内容，比如我们编写了一个 cookie，以确保我们不会在客户每次使用我们的下载时都要求他们下载，但是，我已经删除了我认为超出问题域的任何内容。

在 asp 中，我已经摆脱了所有代码并放置了一个简单的 response.redirect 以查看它是否触发并确保 ASP 中没有发生任何事情。

知道如何让它在 FireFox 中运行吗？

**更新：**

我已经用“正确的”jquery submit wireup 替换了 onsubmit 事件 wireup，将下面的第一行替换为第二行。窗体上的 asp 仍然不起作用。

```
 //$('#DL')[0].setAttribute('ONSUBMIT', 'return checkform(\'' + link + '\')');

    $('#DL').submit(function checkform() {
        $.modal.close();
        window.open(link);
        return true;
    }); 
```

**更新 2**

对，这是因为在 ASP 触发之前模态弹出窗口关闭。如果我们注释掉 $.modal.close(); 然后asp按预期触发。在 Chrome 和 IE 中，javascript 和 ASP 必须同时触发，在 Firefox 中，javascript 触发“隐藏”带有“modelContent”的 div 并且 asp 不能再触发。所以这是真正的问题......现在如何解决......

# django - Django 模型字段元数据

> ID：11193258
> 
> 赞同：2
> 
> 时间：2012-06-25T16:25:15.600
> 
> 标签：django, django-models, django-forms

我有一个 Django 模型，我希望指出一些模型字段是私有的，这样当我显示基于此模型的 ModelForm 时，我可以显示这些标记为这样的字段。

我希望在模型上而不是在表单上指定它，因为我认为那是它所属的地方。

我想知道最好的方法是什么。我可以写一个装饰器@private 来做到这一点吗？谁能给我举个例子？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T23:22:35.160

没有一个功能可以完美解决您的问题，但这里有一些建议：

*   将信息添加到模型的 Meta 类中，然后您可以通过模型上的 _meta 属性从表单中访问它
*   在您的模型字段上使用 help_text 选项（显然这不会帮助您“以编程方式决定我应该向其他用户显示哪些字段”）

我同意这是否属于模型层值得商榷。这对我来说似乎是业务逻辑。

# c# - 录制颜色和深度视频 KINECT C#

> ID：11193262
> 
> 赞同：3
> 
> 时间：2012-06-25T16:25:36.237
> 
> 标签：c#, wpf, kinect, video-recording

我想从我的 KINECT 录制颜色和深度帧的视频，一个用于颜色帧的视频，另一个用于深度帧。我想在 C# WPF 应用程序中执行此操作..

关于如何做到这一点的任何想法？

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:47:21.940

你想达到什么目的？您是否需要将其存储为原始/无损，或者您可以使用通常的视频编解码器吗？rgb 流是一个普通的视频序列，可以用编解码器很好地编码。但是，深度流每个像素存储 11 位深度信息。如果您不介意信息丢失，您可以将其减少为 8 位灰度图像流。这一切都取决于你想在之后的录音中做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:07:41.507

您应该使用[AForge.NET](http://www.aforgenet.com/)库。它能够将 Kinect 用于颜色和深度。查看[此](http://www.aforgenet.com/framework/samples/video.html)示例（页面底部）。Kinect 命名空间在[这里](http://www.aforgenet.com/framework/docs/html/5b555f97-4a0c-0d7d-13ff-814998336930.htm)。它包括 KinectVideoCamera（颜色）和 KinectDepthCamera。

AForge 很容易与 WPF 集成。如果您需要将 AForge 与 WPF 结合使用的示例，[这里](http://www.kclbot.com/academic/tutorial-wpf-c-kinect-sdk-aforge-net-gratf-glyph-tracking/)有一个，或者只是搜索网络。

当然，总是可以选择使用[Emgu cv](http://www.emgu.com/wiki/index.php/Main_Page)。[这](http://www.geek-press.com/?p=23)是 kinect 的一个例子。

# matlab - 使用matlab读取密码保护的excel文件

> ID：11193266
> 
> 赞同：0
> 
> 时间：2012-06-25T16:25:47.453
> 
> 标签：matlab

我正在尝试读取受密码保护的 excel 文件，以下代码遇到的问题是它不处理密码，而是打开了 excel 应用程序，但用户必须转到任务栏并单击 excel 应用程序才能查看密码查询.

```
path = fullfile(pwd,'tests.xls')

e=actxserver('excel.application');
eW = e.Workbooks;
eF = eW.Open(file3,'GSL');

[num,txt,raw]  = xlsread(file3, 1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:07:32.263

我可以想到两种方法来解决这个问题。我无权访问 Windows 机器，因此您必须自己弄清楚详细信息：

1.  使用 Matlab 的 GUI 函数向用户询问密码。然后，将该密码`Open`连同文件名一起提供给方法（[Excel 打开方法文档](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.workbooks.open%28v=office.11%29.aspx#Y310)）。

2.  调用后`actxserver`尝试使 Excel 窗口成为焦点，以便在打开文件时可以看到密码对话框。像[这里](http://www.mathworks.com/support/solutions/en/data/1-33DJ6K/index.html?product=ML&solution=1-33DJ6K)描述的东西应该可以工作。

# sockets - 非阻塞连接期间的POLLHUP？

> ID：11193270
> 
> 赞同：5
> 
> 时间：2012-06-25T16:26:08.160
> 
> 标签：sockets, connect, nonblocking, epoll

我打开一个套接字并尝试 connect() 到不存在的对等方。connect() 是非阻塞的。

然后我在套接字上进行 epoll。

有时我收到 EPOLLERR|EPOLLHUP 事件，随后的 getsockopt(SO_ERROR) 返回 ECONNREFUSED。这是我所期望的。

但是，有时我单独得到 EPOLLHUP，随后的 getsockopt(SO_ERROR) 返回 0。

有人知道后一种情况应该是什么意思吗？

# php - 根据另一个结果的总数对 MySQL 结果进行排序

> ID：11193272
> 
> 赞同：0
> 
> 时间：2012-06-25T16:26:32.203
> 
> 标签：php, mysql

我有表`tbl_posts`和`tbl_comments`主键`post_id`，`comment_id`分别。我试过这段代码：

```
$allPosts=mysql_query("
    select c.comment_id, post_id, count(*)
    from post u,
    comments c
    where u.comment_id = c.comment_id
    group by comment_id, post_id
    LIMIT 10
"); 
```

但我不知道它做了什么。如何组合两个表格，以便总评论确定列出的帖子的顺序`tbl_posts`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:30:19.770

试试这个，如果你每行分开并使用连接，它会更具可读性

```
select c.comment_id, post_id, count(*) 
from post u join comments c 
on u.comment_id = c.comment_id 
group by comment_id, post_id LIMIT 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:32:48.877

看起来您有名为**tbl_comment**和**tbl_post**的表，但您的查询仅将它们列为**comment 和 post**。

```
select c.comment_id, post_id, count(*) 
from tbl_post u, tbl_comments c 
where u.comment_id = c.comment_id 
group by comment_id, post_id LIMIT 10

$allPosts=mysql_query("select c.comment_id, post_id, count(*) from tbl_post u, tbl_comments c where u.comment_id = c.comment_id group by comment_id, post_id LIMIT 10"); 
```

这只是修复了查询以便它运行，并没有解决您可能遇到的任何内容问题，即两者上的 group by （我猜）都是主键。

** 编辑 ** 要修复排序尝试：

```
SELECT tbl_post.comment_id, count(*)  
FROM tbl_post, tbl_comments
WHERE tbl_post.comment_id = tbl_comment.comment_id  
GROUP BY comment_id LIMIT 10
ORDER BY count(*) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T16:38:57.050

您的 SQL 说明：

您正在使用内部连接从表**comments中选择列****comment_id** ，从表**post**中选择列**post_id ，按****comment_id**、**post_id**分组，结果限制为 10 个。

 ******我会尝试：

```
$allPosts = mysql_query("SELECT * FROM 
(SELECT c.comment_id, u.post_id, COUNT(*) AS 'count' FROM post u 
LEFT JOIN comments c ON c.comment_id = u.comment_id 
GROUP BY c.comment_id, u.post_id)
ORDER BY count DESC LIMIT 10"); 
```******

# html - HTML 强制 img 尺寸需要阻止？

> ID：11193273
> 
> 赞同：6
> 
> 时间：2012-06-25T16:26:33.430
> 
> 标签：html, css

我有一种情况，我希望`img`尚未加载的 HTML 具有预设高度。原因是此高度将用于计算，该计算可能在图像完全加载之前触发并且需要保持准确。我尝试了以下方法：

```
<div>hello<img src='http://example.com/invalid.gif' class="testimage"> there</div> 
```

并放入一些CSS

```
.testimage {
    height: 200px;
    width: 200px;
}
​ 
```

并且至少在 Firefox 5 中，不会渲染额外的空间（奇怪的是，损坏的图像也不会显示，只是一个空白空间）。也就是说，直到我添加`display: inline-block`. 至少在其他一些浏览器中，默认显示`inline`会产生所需的结果。这是预期的吗？如果是这样，为什么？

这里也是一个 jsFiddle：http: [//jsfiddle.net/uYXD4/](http://jsfiddle.net/uYXD4/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T16:59:02.680

它在这里说图像是*内联*元素 - [http://htmlhelp.com/reference/html40/special/img.html](http://htmlhelp.com/reference/html40/special/img.html)

另一方面看看这里 - [<img> 元素是块级还是内联级？](https://stackoverflow.com/q/2402761/981134)

看起来该`<img>`元素既是内联的又是块的。没有定义它的严格规则，因此浏览器供应商可能会自行决定默认设置。所以你最好的选择是将他们的假设重新设置为`display: inline-block`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T20:04:37.860

图像被[替换元素](http://www.w3.org/TR/CSS2/conform.html#replaced-element)：

> 其内容超出 CSS 格式化模型范围的元素，例如图像、嵌入文档或小程序。例如，HTML IMG 元素的内容经常被其“src”属性指定的图像所替代。

对于替换的元素，`display: inline-block`应该[具有与默认相同](http://www.w3.org/TR/CSS2/visudet.html#inlineblock-replaced-width)的效果`display: inline`。

所以这可能是对某些浏览器中这种奇怪行为的可能解释*：

它们仅将*完全加载*的图像视为*替换元素*，否则将它们视为*非替换元素*。毕竟这是有道理的，标准并没有明确禁止这样做。因此，有 3 种可能的情况：

1.  替换元素，内联或内联块无关紧要，`height`属性有效
2.  内联非替换元素，`height`属性[无效](http://www.w3.org/TR/CSS2/visudet.html#inline-non-replaced)
3.  内联块非替换元素，`height`属性有效

加载的图像始终符合 1\. 的条件，损坏/加载的图像可能符合 1\. 或 2\. 的条件（或 3\. 如果您明确设置 display: inline-block）

*不确定这是否是实际工作的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T17:04:07.443

为什么不使用类似的东西

```
<img src="..." width=400 height=200> 
```

我正在做同样的事情，而且效果很好。另一种选择是...

```
$('.myimg').load( function() { /* ops */ } ); 
```

虽然我不知道是否等待在所有浏览器中加载图像

# solr - Alfresco Solr 自定义搜索

> ID：11193275
> 
> 赞同：5
> 
> 时间：2012-06-25T16:26:41.137
> 
> 标签：solr, alfresco

使用 Alfresco 4.0.1，我们添加了许多新实体并将它们链接到 cm:content。当我们搜索时，我们不仅希望能够通过内容标准进行搜索，还希望能够为我们提供与具有这些属性的库链接的所有内容（例如）。

我们希望我们需要添加一个新的 Solr 核心（索引）并填充它。

有人做过吗？有人可以提供一两个提示，或者链接到解释它的帖子。

谢谢--MB

附加 1：链接意味着内容与使用 Alfresco 的对等（非儿童）关联的其他实体“链接”。

附加 2：例如，如果我们的模型是内容和库（但它比那要复杂得多），它们使用对等（非子）关联进行链接，因为由于其他原因我们无法使用父子关联。所以我们要搜索的是名称为“document”的所有内容，但这些内容与位置为“Texas”的库相关联。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T16:39:45.007

最重要的是，Alfresco 不是关系型的。您可以设置关联，并通过 API 向给定节点询问其关联，但您不能像在关系数据库中连接时那样跨关联运行查询。

也许您应该向内容节点添加位置属性，并在该节点上创建、更新或删除关联时使用行为更新其值。然后，您可以通过将位置与节点上的其他条件进行 AND 运算来运行查询。

显然，如果你有许多这样的属性需要保持同步，你的行为可能会开始对性能产生负面影响，但如果你只有少数几个，你应该没问题。

# jquery - JQuery 验证未验证

> ID：11193289
> 
> 赞同：2
> 
> 时间：2012-06-25T16:27:19.483
> 
> 标签：jquery, jquery-plugins, jquery-validate

我正在尝试使用 JQuery 验证器插件来验证 Rails 应用程序，但它既不会引发任何错误，也不会验证任何东西。我不知道我的代码还有什么问题 - 任何帮助将不胜感激！

```
$(document).ready(function() {
$(".theform").validate({
    rules: {
        name: {
            required:true,
            minlength:2,
            maxlength:50
        },
        email: {
            required: true,
            email: true,
            minlength:2,
            maxlength:50
        },
        phone_number: {
            required: true,
            phoneUS: true,
            minlength:9,
            maxlength:20
        }
    },
    messages: {
        name: {
            required: "Please provide your name",
            minlength: "Too few characters!",
            maxlength: "Too many characters!"
        },
        email: {
            required: "Please provide your email",
            email: "Your email address must be in the format of name@domain.com",
            minlength: "Too few characters!",
            maxlength: "Too many characters!"
        },
        phone_number: {
            required: "Please provide your phone number",
            phoneUS: "Please provide a valid US phone number",
            minlength: "Too few characters!",
            maxlength: "Too many characters!"
        }
    }
});
$("input#ajax").click(function() {
    $.ajax({
        type: "POST",
        url: "/create_user",
        data: {name: $('#name').val(), email: $('#email').val(), number: $('#phone_number').val(), ajax:"true"},
        success: function(msg){
            //console.log(msg.name);
            $("div#n").html(msg.name);
            $("div#e").html(msg.email);
            $("div#p").html(msg.phone_number);
        }
    });
});
}); 
```

编辑：这是我要验证的表格：

```
<div id="theform">
<form name="form" action="create" method="post">

    Name: <input type="text" name="name" id="name"/><br/>
    Email: <input type="text" name="email" id="email"/><br/>
    Phone Number: <input type="text" name="phone_number" id="phone_number" /><br/>
    <input type="submit" value="Normal Submit" id="normal">
    <input type="button" value="Ajax Submit" id="ajax">

</form>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:04:38.767

您的选择器错误：

```
$(".theform").validate({ ... }); 
```

选择所有带有 class 的元素`theform`，而你的元素都没有。您需要选择`form`元素本身：

```
$("#theform > form").validate({ ... }); 
```

或者

```
$("form[name='form']").validate({ ... }); 
```

**示例：http:** [//jsfiddle.net/nQq6t/](http://jsfiddle.net/nQq6t/)

# html - Aptana 抱怨空脚本

> ID：11193292
> 
> 赞同：1
> 
> 时间：2012-06-25T16:27:27.650
> 
> 标签：html, xhtml, aptana, aptana3

**我在Aptana**中有以下代码行：

```
<script type="text/javascript" charset="utf-8" src="js/jquery-1.7.2.js"></script> 
```

或者以下内容：

```
<script type="text/javascript" charset="utf-8" src="js/jquery-1.7.2.js" /> 
```

这是同一件事。
然而，Aptana 抱怨以下警告：

`should trim empty <script>`

这是没有意义的，因为脚本是在外部文件中提供的，而不是内联的。
以下内容在没有警告错误的情况下被接受，但会浪费一行空间：

```
<script type="text/javascript" charset="utf-8" src="js/jquery-1.7.2.js">
</script> 
```

任何人都知道为什么 Aptana 错误地报告警告以及是否有办法确保 Aptana 只显示*合理*的错误消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:31:10.670

在 html.erb 文件的 head 部分尝试以下代码：

```
<%= javascript_include_tag "jquery-1.7.2.min.js" %> 
```

希望这可以帮助。

*   科里克斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T04:16:48.137

这个问题有一张[票](https://jira.appcelerator.org/browse/APSTUD-4724)，它将在下一个（3.2.0）版本中修复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-08T13:06:07.043

对于 Aptana Studio 用户：

Windows：转到 Window > Preferences > Aptana Studio > Validation

（Mac：转到 Aptana Studio > 首选项 > Aptana Studio > 验证）

选择 HTML Tidy Validator 然后会出现一些可折叠的选项。选择元素，它将显示选项列表。

现在转到列表底部，您将看到“修剪空元素”：将其从 更改`warning`为`ignore`。

# php - Codeigniter 抽象基础模型

> ID：11193296
> 
> 赞同：4
> 
> 时间：2012-06-25T16:27:36.270
> 
> 标签：php, codeigniter, model, abstract

是否可以在 Codeigniter 中实现抽象基础模型？我创建了一个具有基本 CRUD 功能的抽象类，但我收到“无法实例化抽象类”错误。

抽象模型位于 /application/core/my_model.php 并且很简单

```
abstract class MY_Model extends CI_Model
{ 
```

无法实例化抽象类”位于 /system/core/Common.php 的第 174 行

看起来 Codeigniter 在加载时尝试实例化 my_model.php，我猜这是因为 /core 文件夹中的文件被用作扩展核心系统文件（如控制器和模型）的地方。有没有办法阻止这种情况？我试图使用[Phil Sturgeon 的本机自动加载](http://philsturgeon.co.uk/blog/2010/02/CodeIgniter-base-Classes-Keeping-it-DRY)来自动加载模型，但它没有帮助。

```
/*
| -------------------------------------------------------------------
|  Native Auto-load
| -------------------------------------------------------------------
| 
| Nothing to do with cnfig/autoload.php, this allows PHP autoload to work
| for base controllers and some third-party libraries.
|
*/

function __autoload($class)
{
    if(strpos($class, 'CI_') !== 0)
    {
        @include_once( APPPATH . 'core/'. $class . EXT );
    }
} 
```

我意识到一个简单的方法就是将文件包含在我想要使用它的每个模型的顶部，但显然这不是最佳的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T09:48:01.527

为什么要使 MY_Model 抽象？您只需将所有 CRUD 函数放入 MY_Model 中，并从 MY_Model 而不是 CI_Model 扩展您的模型。无需使用自动加载，因为 CodeIgniter 允许您使用 MY_Model 扩展 CI_Model，只要您放入 core 文件夹即可。

一个很好的 MY_Model 示例是 Jamie Rumbelow 的示例。你在这里找到它：[https ://github.com/jamierumbelow/codeigniter-base-model/](https://github.com/jamierumbelow/codeigniter-base-model/)

祝你好运！

干杯

巴特

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T01:47:41.667

我正在尝试将 Loader 类调整为接受抽象和接口。

首先，我将所有编辑都放入我的 /application/core/MY_Loader.php：

```
 <?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');
/**
 * CodeIgniter
 *
 * An open source application development framework for PHP 5.1.6 or newer
 *
 * @package     CodeIgniter
 * @author      ExpressionEngine Dev Team
 * @copyright   Copyright (c) 2008 - 2011, EllisLab, Inc.
 * @license     http://codeigniter.com/user_guide/license.html
 * @link        http://codeigniter.com
 * @since       Version 1.0
 * @filesource
 */

// ------------------------------------------------------------------------
// Joseff Betancourt - 11/14/2012 modified code by adding a autoloader and interface loader copied from model loader.

/**
 * Loader Class
 *
 * Loads views and files
 *
 * @package     CodeIgniter
 * @subpackage  Libraries
 * @author      ExpressionEngine Dev Team
 * @category    Loader
 * @link        http://codeigniter.com/user_guide/libraries/loader.html
 */
class MY_Loader extends CI_Loader {

    // All these are set automatically. Don't mess with them.
    /**
     * Nesting level of the output buffering mechanism
     *
     * @var int
     * @access protected
     */

    protected $_ci_abstracts_paths      = array();
    /**
     * List of paths to load models from
     *
     * @var array
     * @access protected
     */
    protected $_ci_interfaces_paths     = array();
    /**
     * List of paths to load helpers from
     *
     * @var array
     * @access protected
     */

    protected $_ci_abstracts            = array();
    /**
     * List of loaded interfaces
     *
     * @var array
     * @access protected
     */
    protected $_ci_interfaces           = array();
    /**
     * List of loaded helpers
     *
     * @var array
     * @access protected
     */

    /**
     * Constructor
     *
     * Sets the path to the view files and gets the initial output buffering level
     */

    function __construct()
    {
        parent::__construct();
        $this->_ci_abstracts_paths = array(APPPATH);
        $this->_ci_interfaces_paths = array(APPPATH);
        log_message('debug', "Loader Class Initialized");
    }

    // --------------------------------------------------------------------

    /**
     * Initialize the Loader
     *
     * This method is called once in CI_Controller.
     *
     * @param   array
     * @return  object
     */
    public function initialize()
    {

        $this->_ci_abstracts = array();
        $this->_ci_interfaces = array();
        $this->_ci_autoloader();

        return $this;
    }

    // --------------------------------------------------------------------

    /**
     * Abstracts Loader
     *
     * This function lets users load and instantiate models.
     *
     * 11/14/2012 - Joseff Betancourt - Cloned from Models
     *
     * @param   string  the name of the class
     * @param   string  name for the abstract
     * @param   bool    database connection
     * @return  void
     */
    public function abstracts($abstracts, $name = '', $db_conn = FALSE)
    {
        if (is_array($abstracts))
        {
            foreach ($abstracts as $babe)
            {
                $this->abstracts($babe);
            }
            return;
        }

        if ($abstracts == '')
        {
            return;
        }

        $path = '';

        // Is the abstracts in a sub-folder? If so, parse out the filename and path.
        if (($last_slash = strrpos($abstracts, '/')) !== FALSE)
        {
            // The path is in front of the last slash
            $path = substr($abstracts, 0, $last_slash + 1);

            // And the model name behind it
            $abstracts = substr($abstracts, $last_slash + 1);
        }

        if ($name == '')
        {
            $name = $abstracts;
        }

        if (in_array($name, $this->_ci_abstracts, TRUE))
        {
            return;
        }

        $CI =& get_instance();
        if (isset($CI->$name))
        {
            show_error('The model name you are loading is the name of a resource that is already being used: '.$name);
        }

        $abstracts = strtolower($abstracts);

        foreach ($this->_ci_abstracts_paths as $mod_path)
        {
            if ( ! file_exists($mod_path.'abstracts/'.$path.$abstracts.'.php'))
            {
                continue;
            }

            if ($db_conn !== FALSE AND ! class_exists('CI_DB'))
            {
                if ($db_conn === TRUE)
                {
                    $db_conn = '';
                }

                $CI->load->database($db_conn, FALSE, TRUE);
            }

            if ( ! class_exists('CI_Abstracts'))
            {
                load_class('Abstracts', 'core');
            }

            require_once($mod_path.'abstracts/'.$path.$abstracts.'.php');

            $abstracts = ucfirst($abstracts);

            $CI->$name = new $abstracts();

            $this->_ci_abstracts[] = $name;
            return;
        }

        // couldn't find the abstracts
        show_error('Unable to locate the abstracts you have specified: '.$abstracts);
    }

    // --------------------------------------------------------------------

    /**
     * Interface Loader
     *
     * This function lets users load and instantiate interfaces.
     *
     * 11/14/2012 - Joseff Betancourt - Cloned from Models
     *
     * @param   string  the name of the class
     * @param   string  name for the interface
     * @param   bool    database connection
     * @return  void
     */
    public function interfaces($interfaces, $name = '', $db_conn = FALSE)
    {
        if (is_array($interfaces))
        {
            foreach ($interfaces as $babe)
            {
                $this->interfaces($babe);
            }
            return;
        }

        if ($interfaces == '')
        {
            return;
        }

        $path = '';

        // Is the abstracts in a sub-folder? If so, parse out the filename and path.
        if (($last_slash = strrpos($interfaces, '/')) !== FALSE)
        {
            // The path is in front of the last slash
            $path = substr($interfaces, 0, $last_slash + 1);

            // And the model name behind it
            $interfaces = substr($interfaces, $last_slash + 1);
        }

        if ($name == '')
        {
            $name = $interfaces;
        }

        if (in_array($name, $this->_ci_interfaces, TRUE))
        {
            return;
        }

        $CI =& get_instance();
        if (isset($CI->$name))
        {
            show_error('The interface name you are loading is the name of a resource that is already being used: '.$name);
        }

        $interfaces = strtolower($interfaces);

        foreach ($this->_ci_interfaces_paths as $mod_path)
        {
            if ( ! file_exists($mod_path.'interfaces/'.$path.$interfaces.'.php'))
            {
                continue;
            }

            if ($db_conn !== FALSE AND ! class_exists('CI_DB'))
            {
                if ($db_conn === TRUE)
                {
                    $db_conn = '';
                }

                $CI->load->database($db_conn, FALSE, TRUE);
            }

            if ( ! class_exists('CI_Interfaces'))
            {
                load_class('Interfaces', 'core');
            }

            require_once($mod_path.'interfaces/'.$path.$interfaces.'.php');

            $interfaces = ucfirst($interfaces);

            $CI->$name = new $interfaces();

            $this->_ci_interfaces[] = $name;
            return;
        }

        // couldn't find the interfaces
        show_error('Unable to locate the interfaces you have specified: '.$interfaces);
    }

    // --------------------------------------------------------------------

    /**
     * Autoloader
     *
     * The config/autoload.php file contains an array that permits sub-systems,
     * libraries, and helpers to be loaded automatically.
     *
     * @param   array
     * @return  void
     */
    private function _ci_autoloader()
    {
        // Abstracts models
        if (isset($autoload['abstracts']))
        {
            $this->model($autoload['abstracts']);
        }

        // Interfaces models
        if (isset($autoload['interfaces']))
        {
            $this->model($autoload['interfaces']);
        }

    }

    // --------------------------------------------------------------------

}

/* End of file Loader.php */
/* Location: ./system/core/Loader.php */ 
```

然后我将核心 Model.php 复制到 Abstracts.php 和 Interfaces.php（用 or 替换单词 Model）并将它们放在 application/core/ 文件夹中。

在自动加载中我添加了

```
/*
| -------------------------------------------------------------------
|  Auto-load Interfaces
| -------------------------------------------------------------------
| Prototype:
|
|   $autoload['interfaces'] = array('interface1', 'interface2');
|
*/

$autoload['interfaces'] = array();

/*
| -------------------------------------------------------------------
|  Auto-load Abstracts
| -------------------------------------------------------------------
| Prototype:
|
|   $autoload['abstracts'] = array('abstract1', 'abstract2');
|
*/

$autoload['abstracts'] = array(); 
```

最后，我在 app 文件夹中添加了一个目录，用于存放摘要和接口。尚未完全证明，但我认为这是一种更全面的方法，允许人们在需要引用时加载摘要。

您还可以在抽象文件夹中创建一个摘要，如下所示：

```
abstract class MY_Model extends CI_Model
{

blah 

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-25T06:33:32.073

将文件保存在 /application/core/MY_model.php 中：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class MY_model extends CI_Model
{
    public function __construct()
    {
        parent::__construct();
    }

    // Return all records in the table
    public function get_all($table)
    {
        $q = $this->db->get($table);
        if($q->num_rows() > 0)
        {
            return $q->result();
        }
        return array();
    }

    // Return only one row
    public function get_row($table,$primaryfield,$id)
    {
        $this->db->where($primaryfield,$id);
        $q = $this->db->get($table);
        if($q->num_rows() > 0)
        {
            return $q->row();
        }
        return false;
    }

    // Return one only field value
    public function get_data($table,$primaryfield,$fieldname,$id)
    {
        $this->db->select($fieldname);
        $this->db->where($primaryfield,$id);
        $q = $this->db->get($table);
        if($q->num_rows() > 0)
        {
            return $q->result();
        }
        return array();
    }

    // Insert into table
    public function add($table,$data)
    {
        return $this->db->insert($table, $data);
    }

    // Update data to table
    public function update($table,$data,$primaryfield,$id)
    {
        $this->db->where($primaryfield, $id);
        $q = $this->db->update($table, $data);
        return $q;
    }

    // Delete record from table
    public function delete($table,$primaryfield,$id)
    {
        $this->db->where($primaryfield,$id);
        $this->db->delete($table);
    }

    // Check whether a value has duplicates in the database
    public function has_duplicate($value, $tabletocheck, $fieldtocheck)
    {
        $this->db->select($fieldtocheck);
        $this->db->where($fieldtocheck,$value);
        $result = $this->db->get($tabletocheck);

        if($result->num_rows() > 0) {
            return true;
        }
        else {
            return false;
        }
    }

    // Check whether the field has any reference from other table
    // Normally to check before delete a value that is a foreign key in another table
    public function has_child($value, $tabletocheck, $fieldtocheck)
    {
        $this->db->select($fieldtocheck);
        $this->db->where($fieldtocheck,$value);
        $result = $this->db->get($tabletocheck);

        if($result->num_rows() > 0) {
            return true;
        }
        else {
            return false;
        }
    }

    // Return an array to use as reference or dropdown selection
    public function get_ref($table,$key,$value,$dropdown=false)
    {
        $this->db->from($table);
        $this->db->order_by($value);
        $result = $this->db->get();

        $array = array();
        if ($dropdown)
            $array = array("" => "Please Select");

        if($result->num_rows() > 0) {
            foreach($result->result_array() as $row) {
            $array[$row[$key]] = $row[$value];
            }
        }
        return $array;
    }
} 
```

然后像这样扩展

```
class any_model extends MY_Model
{
    public function __construct()
    {
        parent::__construct();
    }
} 
```

# hibernate - 具有 PostGIS 地理类型的休眠空间

> ID：11193299
> 
> 赞同：5
> 
> 时间：2012-06-25T16:27:51.893
> 
> 标签：hibernate, postgis

我刚刚在 Postgres 数据库中添加了一个地理类型的列，该数据库由使用休眠和休眠空间的应用程序访问。每当我使用 hibernate 访问该列时，我都会收到一条错误消息，提示“无法转换 org.postgresql.util.PGobject 类型的对象”。我使用的是旧版本的休眠空间，但似乎即使是最新版本也不支持地理数据类型。真的是这样吗，还是我只是错过了什么。有没有办法解决这个限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:09:12.617

我在使用 Glassfish 3.1.2 + Toplink 时遇到了类似的问题。我通过实现 SessionCustomizer 解决了它。我相信您可以对 Geograph 数据类型使用相同的方法。

**PostGISJPACustomizer.java**

```
public class PostGISJPACustomizer implements SessionCustomizer {

    @Override
    public void customize(Session s) throws Exception {
        RelationalDescriptor desc01 = (RelationalDescriptor) s.getDescriptor(SentenceGPS.class);
        DirectToFieldMapping mapping01 = (DirectToFieldMapping) desc01.getMappingForAttributeName("geom");
        mapping01.setConverter(null);

        RelationalDescriptor desc02 = (RelationalDescriptor) s.getDescriptor(SentenceLine.class);
        DirectToFieldMapping mapping02 = (DirectToFieldMapping) desc02.getMappingForAttributeName("geom");
        mapping02.setConverter(null);

        RelationalDescriptor desc03 = (RelationalDescriptor) s.getDescriptor(SentencePolygon.class);
        DirectToFieldMapping mapping03 = (DirectToFieldMapping) desc03.getMappingForAttributeName("geom");
        mapping03.setConverter(null);
    }
} 
```

**持久性.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="onet-ejbPU" transaction-type="JTA">
    <jta-data-source>jdbc/onet</jta-data-source>
       <exclude-unlisted-classes>false</exclude-unlisted-classes>
       <properties>
           <property name="eclipselink.session.customizer" value="com.util.PostGISJPACustomizer"/>
       </properties>
    </persistence-unit>
</persistence> 
```

**SentenceGPS.java（部分）**

```
@Entity
public class SentenceGPS implements Serializable {

    @Column
    private PGgeometry geom;

    public void setGeom(LineString geom) {
        this.geom = GeoUtils.getPGeo(geom);
    }

    public LineString getGeom() {
        return (LineString) GeoUtils.getJTS(geom);
    }
} 
```

**GeoUtils.java**

```
public class GeoUtils {

    public static PGgeometry getPGeo(Geometry g) throws SQLException {
        String PGgeometryStr = "SRID=" + g.getSRID() + ";" + g.toString();
        PGgeometry pg = new PGgeometry(PGgeometry.geomFromString(PGgeometryStr));
        return pg;
    }

    // This function needs improvements due peformance issues
    public static Geometry getJTS(PGgeometry g) throws ParseException, SQLException {
        WKTReader reader = new WKTReader(new GeometryFactory(new PrecisionModel(PrecisionModel.FLOATING), g.getGeometry().getSrid()));
        String geometryString = g.getGeometry().toString();

        Geometry geom;
        if (geometryString.indexOf(';') != -1) {
            String[] temp = PGgeometry.splitSRID(geometryString);
            int srid = Integer.parseInt(temp[0].substring(5));
            geom = (Geometry) reader.read(temp[1]);
            geom.setSRID(srid);
        } else {
            geom = (Geometry) reader.read(geometryString);
        }
        return geom;
    }
} 
```

# php - php登录表单隐藏站点的其余部分

> ID：11193302
> 
> 赞同：0
> 
> 时间：2012-06-25T16:27:54.570
> 
> 标签：php, html

我正在尝试在我的免费数学帮助网站上添加一个登录表单，但是每当我在我的索引页面中包含该表单时，它就会隐藏该站点的其余部分。这是 Codex-m 的源代码：

```
<?php
session_start(); 

//require user configuration and database connection parameters
require('config.php');

if (($_SESSION['logged_in'])==TRUE) {
//valid user has logged-in to the website

//Check for unauthorized use of user sessions

$iprecreate= $_SERVER['REMOTE_ADDR'];
$useragentrecreate=$_SERVER["HTTP_USER_AGENT"];
$signaturerecreate=$_SESSION['signature'];

//Extract original salt from authorized signature

$saltrecreate = substr($signaturerecreate, 0, $length_salt);

//Extract original hash from authorized signature

$originalhash = substr($signaturerecreate, $length_salt, 40);

//Re-create the hash based on the user IP and user agent
//then check if it is authorized or not

$hashrecreate= sha1($saltrecreate.$iprecreate.$useragentrecreate);

if (!($hashrecreate==$originalhash)) {

//Signature submitted by the user does not matched with the
//authorized signature
//This is unauthorized access
//Block it

header(sprintf("Location: %s", $forbidden_url));    
exit;    
}

//Session Lifetime control for inactivity
//Credits: http://stackoverflow.com/questions/520237/how-do-i-expire-a-php-session-after-30-minutes

if ((isset($_SESSION['LAST_ACTIVITY']) && (time() - $_SESSION['LAST_ACTIVITY'] > $sessiontimeout)))  {

session_destroy();   
session_unset();  

//redirect the user back to login page for re-authentication

$redirectback=$domain.'securelogin/';
header(sprintf("Location: %s", $redirectback));
}
$_SESSION['LAST_ACTIVITY'] = time(); 

}

//Pre-define validation
$validationresults=TRUE;
$registered=TRUE;
$recaptchavalidation=TRUE;

//Trapped brute force attackers and give them more hard work by providing a captcha-protected page

$iptocheck= $_SERVER['REMOTE_ADDR'];
$iptocheck= mysql_real_escape_string($iptocheck);

if ($fetch = mysql_fetch_array( mysql_query("SELECT `loggedip` FROM `ipcheck` WHERE `loggedip`='$iptocheck'"))) {

//Already has some IP address records in the database
//Get the total failed login attempts associated with this IP address

$resultx = mysql_query("SELECT `failedattempts` FROM `ipcheck` WHERE `loggedip`='$iptocheck'");
$rowx = mysql_fetch_array($resultx);
$loginattempts_total = $rowx['failedattempts'];

If ($loginattempts_total>$maxfailedattempt) {

//too many failed attempts allowed, redirect and give 403 forbidden.

header(sprintf("Location: %s", $forbidden_url));    
exit;
}
}

//Check if a user has logged-in

if (!isset($_SESSION['logged_in'])) {
    $_SESSION['logged_in'] = FALSE;
}

//Check if the form is submitted

if ((isset($_POST["pass"])) && (isset($_POST["user"])) && ($_SESSION['LAST_ACTIVITY']==FALSE)) {

//Username and password has been submitted by the user
//Receive and sanitize the submitted information

function sanitize($data){
$data=trim($data);
$data=htmlspecialchars($data);
$data=mysql_real_escape_string($data);
return $data;
}

$user=sanitize($_POST["user"]);
$pass= sanitize($_POST["pass"]);

//validate username
if (!($fetch = mysql_fetch_array( mysql_query("SELECT `username` FROM `authentication` WHERE `username`='$user'")))) {

//no records of username in database
//user is not yet registered

$registered=FALSE;
}

if ($registered==TRUE) {

//Grab login attempts from MySQL database for a corresponding username
$result1 = mysql_query("SELECT `loginattempt` FROM `authentication` WHERE `username`='$user'");
$row = mysql_fetch_array($result1);
$loginattempts_username = $row['loginattempt'];

}

if(($loginattempts_username>2) || ($registered==FALSE) || ($loginattempts_total>2)) {

//Require those user with login attempts failed records to 
//submit captcha and validate recaptcha

require_once('recaptchalib.php');
$resp = recaptcha_check_answer ($privatekey, $_SERVER["REMOTE_ADDR"], $_POST["recaptcha_challenge_field"], $_POST["recaptcha_response_field"]);
if (!$resp->is_valid) {

//captcha validation fails

$recaptchavalidation=FALSE;
} else {
$recaptchavalidation=TRUE;  
}
}

//Get correct hashed password based on given username stored in MySQL database

if ($registered==TRUE) {

//username is registered in database, now get the hashed password

$result = mysql_query("SELECT `password` FROM `authentication` WHERE `username`='$user'");
$row = mysql_fetch_array($result);
$correctpassword = $row['password'];
$salt = substr($correctpassword, 0, 64);
$correcthash = substr($correctpassword, 64, 64);
$userhash = hash("sha256", $salt . $pass);
}
if ((!($userhash == $correcthash)) || ($registered==FALSE) || ($recaptchavalidation==FALSE)) {

//user login validation fails

$validationresults=FALSE;

//log login failed attempts to database

if ($registered==TRUE) {
$loginattempts_username= $loginattempts_username + 1;
$loginattempts_username=intval($loginattempts_username);

//update login attempt records

mysql_query("UPDATE `authentication` SET `loginattempt` = '$loginattempts_username' WHERE `username` = '$user'");

//Possible brute force attacker is targeting registered usernames
//check if has some IP address records

if (!($fetch = mysql_fetch_array( mysql_query("SELECT `loggedip` FROM `ipcheck` WHERE `loggedip`='$iptocheck'")))) {

//no records
//insert failed attempts

$loginattempts_total=1;
$loginattempts_total=intval($loginattempts_total);
mysql_query("INSERT INTO `ipcheck` (`loggedip`, `failedattempts`) VALUES ('$iptocheck', '$loginattempts_total')");  
} else {

//has some records, increment attempts

$loginattempts_total= $loginattempts_total + 1;
mysql_query("UPDATE `ipcheck` SET `failedattempts` = '$loginattempts_total' WHERE `loggedip` = '$iptocheck'");
}
}

//Possible brute force attacker is targeting randomly

if ($registered==FALSE) {
if (!($fetch = mysql_fetch_array( mysql_query("SELECT `loggedip` FROM `ipcheck` WHERE `loggedip`='$iptocheck'")))) {

//no records
//insert failed attempts

$loginattempts_total=1;
$loginattempts_total=intval($loginattempts_total);
mysql_query("INSERT INTO `ipcheck` (`loggedip`, `failedattempts`) VALUES ('$iptocheck', '$loginattempts_total')");  
} else {

//has some records, increment attempts

$loginattempts_total= $loginattempts_total + 1;
mysql_query("UPDATE `ipcheck` SET `failedattempts` = '$loginattempts_total' WHERE `loggedip` = '$iptocheck'");
}
}
} else {

//user successfully authenticates with the provided username and password

//Reset login attempts for a specific username to 0 as well as the ip address

$loginattempts_username=0;
$loginattempts_total=0;
$loginattempts_username=intval($loginattempts_username);
$loginattempts_total=intval($loginattempts_total);
mysql_query("UPDATE `authentication` SET `loginattempt` = '$loginattempts_username' WHERE `username` = '$user'");
mysql_query("UPDATE `ipcheck` SET `failedattempts` = '$loginattempts_total' WHERE `loggedip` = '$iptocheck'");

//Generate unique signature of the user based on IP address
//and the browser then append it to session
//This will be used to authenticate the user session 
//To make sure it belongs to an authorized user and not to anyone else.
//generate random salt
function genRandomString() {
//credits: http://bit.ly/a9rDYd
    $length = 50;
    $characters = "0123456789abcdef";      
    for ($p = 0; $p < $length ; $p++) {
        $string .= $characters[mt_rand(0, strlen($characters))];
    }

    return $string;
}
$random=genRandomString();
$salt_ip= substr($random, 0, $length_salt);

//hash the ip address, user-agent and the salt
$useragent=$_SERVER["HTTP_USER_AGENT"];
$hash_user= sha1($salt_ip.$iptocheck.$useragent);

//concatenate the salt and the hash to form a signature
$signature= $salt_ip.$hash_user;

//Regenerate session id prior to setting any session variable
//to mitigate session fixation attacks

session_regenerate_id();

//Finally store user unique signature in the session
//and set logged_in to TRUE as well as start activity time

$_SESSION['signature'] = $signature;
$_SESSION['logged_in'] = TRUE;
$_SESSION['LAST_ACTIVITY'] = time(); 
}
} 

if (!$_SESSION['logged_in']): 

?>

<!-- START OF LOGIN FORM -->
<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="POST">
Username:  <input type="text" class="<?php if ($validationresults==FALSE) echo "invalid"; ?>" id="user" name="user">
Password: <input name="pass" type="password" class="<?php if ($validationresults==FALSE) echo "invalid"; ?>" id="pass" >
<?php if (($loginattempts_username > 5) || ($registered==FALSE) || ($loginattempts_total> 5)) { ?>
Type the captcha below:
<?php
require_once('recaptchalib.php');
echo recaptcha_get_html($publickey);
?>
<?php } ?>
<?php if ($validationresults==FALSE) echo '<font color="red">Please enter valid username, password or captcha (if required).</font>'; ?>
<input type="submit" value="Login">                   
</form>
<!-- END OF LOGIN FORM -->
<a href="register.php">Register</a>.
<?php
exit();
endif;
?> 
```

它是什么样子的：http: [//i.imgur.com/bReQl.jpg](http://i.imgur.com/bReQl.jpg)应该是什么样子的：http: [//imgur.com/I0BsE.jpg](http://imgur.com/I0BsE.jpg)（这只是用户登录后，它应该看起来像这样在用户登录之前使用顶部的登录内容）基本上它隐藏了登录名下的所有代码，一旦它被嵌入，提前感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:42:49.013

对倒数第三行的调用`exit();`导致页面在该点之后停止打印。删除该行以解决您的问题。

# notepad++ - Notepad++ 可以直接在活动选项卡中的文本上运行 Ruby（或其他）脚本吗？

> ID：11193308
> 
> 赞同：6
> 
> 时间：2012-06-25T16:28:07.580
> 
> 标签：notepad++

我知道我可以使用以下命令在活动选项卡中运行 Ruby 脚本

```
cmd /K ruby “$(FULL_CURRENT_PATH)” 
```

但是，我想在我的 Windows 系统上使用 Notepad++，就像我在 Mac 上的 BBEdit 中经常做的那样：打开一个文本文件，然后从菜单中调用一个 Ruby 脚本，并让该脚本作用于我的活动窗口中的文本*无需实际输入文件名*。那可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T16:32:36.667

要在 Notepad++ 中运行 Ruby 脚本，首先安装[NppExec 插件](http://sourceforge.net/projects/npp-plugins/files/NppExec/)（如果尚未安装）。然后在 Notepad++ 中按 F6 或转到 Plugins > NppExec > Execute。在“执行命令”对话框中键入以下内容：

```
ruby "$(FULL_CURRENT_PATH)" 
```

有关其他命令行选项，[请参阅此内容](http://www.tutorialspoint.com/ruby/ruby_command_line_options.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-02T19:33:03.567

这`$(FULL_CURRENT_PATH)`是当前活动选项卡中文件的完整路径，其中包含当前选项卡的文本。

所以你可以保存当前文件然后执行

```
ruby /path/to/your/script.rb "$(FULL_CURRENT_PATH)" 
```

我不知道为什么你必须不断输入文件名，但你可以`Ctrl+F6`在第一次运行后按 直接重新运行上一个命令。

# visual-studio-2010 - webrole dev fabric 浏览器启动 url 而不是 IP

> ID：11193309
> 
> 赞同：0
> 
> 时间：2012-06-25T16:28:17.743
> 
> 标签：visual-studio-2010, azure, azure-web-roles, azure-compute-emulator

当我在开发结构中调试/运行 webrole 时，它​​会启动一个浏览器实例，该实例会转到环回地址 (http://127.0.0.1/)。这是调试 webrole/云项目的正常 Visual Studio 行为。

有没有办法在 Visual Studio 中获取调试/运行命令，让它使用 dev.whatever.com 这样的实际主机名启动 webrole，而不是 127.0.0.1

（我将 dev.whatever.com 作为我的 hosts 文件中的本地条目。当我手动将其粘贴到浏览器中时，它工作正常，并且我可以毫无问题地调试我的 webrole 项目。只是想看看我是否可以削减一些点击我的代码/调试周期）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:22:59.720

当 Windows Azure 应用程序在计算模拟器中运行时，架构是启动应用程序并将应用程序端点映射到 IP 地址和端口（如果有多个实例）以模拟负载均衡器行为。

![在此处输入图像描述](../Images/e98a39e82f5789c2ee756d4780fe4013.png)

由于您能够将映射的 IP 地址更改为所需的 IP 地址，但是我认为不可能将端点映射到计算模拟器中的特定主机名。

# tomcat - 将 Tomcat 5.5 连接到 SQL 2008 时出现 JDBC 错误：我缺少什么？

> ID：11193311
> 
> 赞同：0
> 
> 时间：2012-06-25T16:28:24.020
> 
> 标签：tomcat, jdbc, database-connection, jndi, connection-pooling

我正在尝试将我的工作站上的 Tomcat 5.5 实例（使用 Eclipse 运行）连接到我的工作站上的 SQL Express 实例，但我遇到了一些连接问题。

我得到了这个例外：

```
Cannot create JDBC driver of class '' for connect URL 'null' 
```

这是我的 META-INF/context.xml：

```
<Context>
  <Resource name="jdbc/SQLDB" auth="Container"
  type="javax.sql.DataSource" username="AppUser" password="password"
  driverClassName="com.microsoft.sqlserver.jdbc.SQLServerDriver" 
  url="jdbc:sqlserver://localhost;DatabaseName=AppUser;SelectMethod=cursor;"
  maxActive="8"/>
</Context> 
```

还有我的 WEB-INF/web.xml：

```
<resource-ref>
  <description>SQL Database Connection</description>
  <res-ref-name>jdbc/SQLDB</res-ref-name>
  <res-type>javax.sql.DataSource</res-type>
  <res-auth>Container</res-auth>
</resource-ref> 
```

我的消息来源：

```
InitialContext ic = new InitialContext();
DataSource ds = (DataSource) ic.lookup("java:comp/env/jdbc/SQLDB");
Connection conn = ds.getConnection(); 
```

我还将 sqljdbc4.jar 文件放入 Tomcat 的 common/lib 文件夹中。

一些 Tomcat 文档参考了将项目添加到 server.xml 文件，而另一些则没有；我认为没有必要，因为只有一个 webapp 会使用数据库。我在这里错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:42:12.257

这是人们将jar放入tomcat的lib中的常见错误。**请记住始终将所有外部 jars 放在您的应用程序库中，**即 YourAppDir>WebContent>WEB-INF>lib

第二件事是在eclipse中识别jar。这样做如下：

1.  在 Eclipse 中右键单击您的项目
2.  点击属性。
3.  在属性窗口上单击 JavaBuildPath
4.  选择库选项卡
5.  单击 AddJARs 按钮并从项目的库中添加外部 jar

# documentation - 普通 lisp 的 Man 或 javadoc 样式的文档

> ID：11193313
> 
> 赞同：2
> 
> 时间：2012-06-25T16:28:40.077
> 
> 标签：documentation, lisp, javadoc, slime, manpage

是否有任何常见的 lisp 文档，如 javadoc、man 甚至类似智能感知的弹出窗口？我刚开始学习普通的口齿不清，手部记忆力还不够。

我正在使用 emacs 和 slime——它具有 tab 补全功能，但似乎信息量不大。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:50:04.810

以防万一这个问题是为了询问参考在哪里 - 网上有几个 Hyperspecs 可用。如果您在 Google 上搜索“hyperspec function-name”之类的内容，您很有可能会找到其中一个。

[http://clhs.lisp.se/Front/index.htm](http://clhs.lisp.se/Front/index.htm)

[http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/FrontMatter/index.html](http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/FrontMatter/index.html)

例如。

根据您的编辑器，您通常可以将其配置为也显示超规范内容。在 Emacs 中使用 SLIME 你可以做到`M-x slime-hyperspec-lookup RET symbol-to-look-for`

另一个方便的工具是`apropos`- 通过运行`(apropos "substring-in-the-symbol-name")`，您将获得与“substring-in-the-symbol-name”匹配的所有符号的列表。

SLIME 本身提供了很好的自动补全功能。可能会让您感到不安的是，默认键可能绑定到您的系统未发送到 Emacs 的东西（如 M-TAB），以便将其重新绑定到您可以执行的其他操作（在您的 .emacs 文件中）：

```
(define-key lisp-mode-map (kbd "C-x .")
  'slime-complete-symbol)
(define-key lisp-mode-map (kbd "C-x /")
  'slime-complete-form)
(define-key lisp-mode-map (kbd "C-x ,")
  'slime-fuzzy-complete-symbol) 
```

此外，Emacs 自己提供“词法”补全——如果你按 M-/ 这将尝试将单词补全为具有相同后缀的单词——它的效果出奇的好，尤其是当你必须输入长变量/函数名时:)

此外，SLIME 绑定`C-c C-d f`到`slime-describe-function-at-point`和`C-c C-d d`到`slime-describe-symbol-at-point`和`C-c C-v d`到`slime-describe-presentation-at-point`。

此外......经过一段时间后对我的启示......如果你在包含错误堆栈跟踪的缓冲区中按RET，指向堆栈条目，它将显示局部变量的值该堆栈级别的函数。如果当点位于其中任何一个变量上时按 RET，它将打开一个描述该变量的缓冲区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:54:53.050

查看[清单](https://github.com/gigamonkey/manifest)以获取基于包的文档。请记住，Common Lisp 旨在用作动态系统，并将可选的文档字符串槽合并到它拥有的每个声明原语中。AFAIK，获取有关给定函数的文档的标准方法是仅`(describe #'function-name-here)`在 repl 上运行（`#`如果您正在寻找有关符号的文档）。

这将使您可以访问文档字符串和参数列表（在方法的情况下，您可以获得通用函数文档以及每个特定方法的汇编）。

查看[`autocomplete-mode`](http://emacswiki.org/emacs/AutoComplete), 并可能[yasnippet](https://github.com/capitaomorte/yasnippet)完成。

# c# - 在图像中找到调整大小的子图像

> ID：11193314
> 
> 赞同：0
> 
> 时间：2012-06-25T16:28:41.353
> 
> 标签：c#, image-processing, emgucv

我在一个项目中工作，每个用户都有一个大头像和这个头像的缩略图。头像为 150x215，缩略图为 50x50。为了生成缩略图，用户在头像内部选择一个正方形区域，系统裁剪并调整头像的大小以生成缩略图。

现在我需要一个 70x70 的缩略图。我无法调整 50x50 缩略图的大小，因为它看起来不太好。我的想法是创建一个工具来查找头像内的缩略图，并使用缩略图位置生成新的 70x70 图像。它运行良好，直到我注意到一些缩略图不仅被裁剪，而且被调整大小。调整图像大小时，它会丢失像素，这使得无法进行逐像素比较（因此我无法检测到头像内的缩略图位置）。

有什么方法可以识别缩略图的位置（即使它已调整大小）？我正在使用[EMGU](http://www.emgu.com/wiki/index.php/Main_Page)来处理图像。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:34:44.323

**[编辑1]**

看到您的注释，如果您将缩放因子应用于原始头像，那么您可以创建一个应用了相同缩放因子的临时缩略图，然后针对已缩放的头像执行缩略图的统计等效性检查。这看起来像是针对缩略图可能位于化身内的每个位置的缩放化身图像找到缩略图的“差异图像”。对于这些“差异图像”中的每一个，将所有基于像素的差异添加到一个组合的单个数字差异中，并将其存储到一个 2D 数组中，该数组的大小为 x 和 y 位置的维度，缩略图可以放置在缩放的头像图像中（这将小于总头像图像大小，事实上它将是宽度 = avatarWidth - thumbWidth 和高度 = avatarHeight - thumbHeight）。在您计算了此二维数组的所有单个差异实例后，只需找到数组中的最小值，即要使用的缩放化身中左上角的像素位置。当从这个计算的左上角抓取 70 x 70 时，您当然必须考虑 50 x 50 拇指的新缩放尺寸。

您不必（顺便说一句）存储这个 2D 差异值数组，您可以简单地保存一个使用第一个测试位置的值初始化的最小位置，并且仅在当前位置小于当前位置时更新。这将避免增加阵列的存储空间。

**[原创]** 一旦头像图像被调整大小，它也被插值，这对于所有密集目的来说意味着原始像素信息已经在数学上发生了不可逆转的变化。

您可能会更幸运地进入原始缩略图代码，并更改缩略图代码以获取 70 x 70 px 的子图像，然后通过从每一侧再裁剪 10 px 来创建 50 x 50 ！！！这是假设您仍然需要 50 x 50 和 70 x 70 的缩略图。

# r - R中的频率比

> ID：11193315
> 
> 赞同：2
> 
> 时间：2012-06-25T16:28:55.840
> 
> 标签：r, histogram

我有两个文件中的数据。我想绘制它们频率的比率图。

例如，在我的文件中，从 1 到 5 的数字出现了 20 次。在我的文件 B 中，从 1 到 5 的数字出现 10 次（直方图的条形宽度为 5）。这两者的比率是 20/10 = 2。我想在图表中绘制这个比率。可以使用 R 完成吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T16:36:58.753

假设您阅读了变量中的 2 个文件，`data1`您`data2`可以执行以下操作：

```
bins <- seq(0, 100, 5) # Change this to whatever range your data encopasses
h1 <- hist(data1, bins, plot=0)
h2 <- hist(data2, bins, plot=0)

ratio <- h1$counts/h2$counts
# Remove NaNs and Infs due to 0 counts
ratio[is.na(ratio)] <- 0
ratio[is.inf(ratio)] <- 0
barplot(ratio) 
```

或者，您可以创建第三个 hist 对象，其优点是正确绘制 x 轴

```
h3 <- h1
h3$counts <- ratio
plot(h3, col="black") 
```

# regex - 提取每一级括号的内容

> ID：11193317
> 
> 赞同：2
> 
> 时间：2012-06-25T16:28:57.663
> 
> 标签：regex, perl, grammar, speech, parentheses

我正在将[SMAPI](http://www.wizzardsoftware.com/docs/smapi%20developers%20guide.pdf)语法转换为[JSGF](http://www.w3.org/TR/jsgf/#16460)。它们是在不同语音识别系统中使用的非常相似的语法。SMAPI 像世界其他地方一样使用问号，表示前一件事的 0 或 1。JSGF 为此使用方括号。因此，我需要将字符串转换为`stuff?`to `[stuff]`，并将带括号的字符串转换为`((((stuff)? that)? I)? like)?`to `[[[[stuff] that] I] like]`。我必须不理会像`((((stuff) that) I) hate)`. 正如 Qtax 指出的那样，一个更复杂的示例将`(foo ((bar)? (baz))?)`被替换为`(foo [[bar] (baz)])`.

因此，我必须提取括号表达式的每一层，看看它是否以问号结尾，如果是，则用方括号替换括号和问号。我认为 Eric Strom 对[这个](https://stackoverflow.com/questions/2700613/how-can-i-extract-a-string-between-matching-braces-in-perl)问题的回答几乎就是我所需要的。问题是当我使用它时，它返回最大的匹配分组，而我需要对每个单独的分组进行操作。

这是我到目前为止所拥有的：`s/( \( (?: [^()?]* | (?0) )* \) ) \?/[$1]/xg`。然而，当与 匹配时`((((stuff)? that)? I)? like)?`，它只产生`[((((stuff)? that)? I)? like)]`. 关于如何做到这一点的任何想法？

一世

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T17:29:19.577

您还需要查看[ysth 对该问题的解决方案](https://stackoverflow.com/a/2700668/168657)，并使用已经可用的工具来解决此问题：

```
use Text::Balanced qw(extract_bracketed);
$text = '((((stuff)? that)? I)? like)?';

for ($i=0; $i<length($text); $i++) {
    ($match,$remainder) = extract_bracketed( substr($text,$i), '()' );
    if ($match && $remainder =~ /^\?/) {
        substr($text,$i) =
            '[' . substr($match,1,-1) . ']' . substr($remainder,1);
        $i=-1; # fixed
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T18:23:15.263

在较旧的 Perl 版本（5.10 之前）中，可以为此使用代码断言和动态正则表达式：

```
 ...
 my $s = '((((stuff)? that)? I)? like)?';

 # recursive dynamic regex, we need
 # to pre-declare lexical variables
 my $rg;

 # use a dynamically generated regex (??{..})
 # and a code assertion (?{..})
 $rg = qr{
          (?:                       # start expression
           (?> [^)(]+)              # (a) we don't see any (..) => atomic!
            |                       # OR 
           (                        # (b) start capturing group for level
            \( (??{$rg}) \) \?      # oops, we found parentheses \(,\) w/sth 
           )                        # in between and the \? at the end
           (?{ print "[ $^N ]\n" }) # if we got here, print the captured text $^N
          )*                        # done, repeat expression if possible
         }xs;

 $s =~ /$rg/;
 ... 
```

在匹配期间，代码断言打印所有匹配项，它们是：

```
 [ (stuff)? ]
 [ ((stuff)? that)? ]
 [ (((stuff)? that)? I)? ]
 [ ((((stuff)? that)? I)? like)? ] 
```

要根据您的要求使用它，您可以稍微更改代码断言，将捕获括号放在正确的位置，并将匹配项保存在数组中：

```
 ...
 my @result;
 my $rg;
 $rg = qr{
          (?:                      
           (?> [^)(]+)             
            |                      
            \( ( (??{$rg}) ) \) \?  (?{ push @result, $^N })
          )*                     
         }xs;

 $s =~ /$rg/ && print map "[$_]\n", @result;
 ... 
```

其中说：

```
 [stuff]
 [(stuff)? that]
 [((stuff)? that)? I]
 [(((stuff)? that)? I)? like] 
```

问候

rbo

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T17:18:03.327

您可以通过多种方式解决它，最简单的方法是执行您的表达式，直到不再进行替换。例如：

```
1 while s/( \( (?: [^()?]* | (?0) )* \) ) \?/[$1]/xg; 
```

但这是非常低效的（对于深度嵌套的字符串）。

您可以像这样一次性完成：

```
s{
  (?(DEFINE)
    (?<r>   \( (?: [^()]++ | (?&r) )*+ \)   )
  )

  ( \( )
  (?=   (?: [^()]++ | (?&r) )*+ \) \?   )

  |

  \) \?
}{
  $2? '[': ']'
}gex; 
```

# android - 新创建的图像未显示在图库中

> ID：11193321
> 
> 赞同：3
> 
> 时间：2012-06-25T16:29:05.553
> 
> 标签：android, image-gallery

我正在使用 API 创建一个图像（另一个图库图像的某种副本），并且该图像未显示在图库中。

我知道新文件在那里，因为我可以使用 adb shell 看到它，并且它与原始文件放在同一个文件夹中。

我可能是错的，但我记得阅读过有关指定您在创建时创建的文件类型的信息，但我再也找不到它了。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:49:20.003

创建文件后，请尝试按照此[帖子](https://stackoverflow.com/a/5815005/614231)手动通知媒体扫描程序有关该文件的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-13T11:16:55.190

添加文件/文件夹后，只需触发此广播。这会调用库来扫描所有媒体文件

```
sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE,<file-path>)); 
```

# css - 使用 CSS 为 GridView 的行和单元格设置样式

> ID：11193323
> 
> 赞同：0
> 
> 时间：2012-06-25T16:29:13.770
> 
> 标签：css, gridview, webforms

我想使用 CSS 来格式化我的 GridView 行。

我已经在 aspx 中设置了我的 GridView，如下所示：

```
<asp:GridView ID="GridView1" runat="server">
</asp:GridView> 
```

我通过调用一个方法从数据访问层获取我的数据集，在代码隐藏中设置和绑定数据源。

但是，因为我以编程方式设置数据源，所以行和单元格没有 id 属性。

如何使用 CSS 设置这些行和单元格的样式和格式？

这是当前生成的 HTML：

```
<div>
    <table cellspacing="0" rules="all" border="1" id="ContentPlaceHolderHome_GridView1" style="border-collapse:collapse;">
        <tr>
            <th scope="col">Date</th><th scope="col">Project</th><th scope="col">Amount</th>
        </tr><tr>
            <td>1/1/2011 12:00:00 AM</td><td>MY COMPANY</td><td>1000.99</td>
        </tr><tr>
            <td>2/1/2011 12:00:00 AM</td><td>ABC Company</td><td>1001.99</td>
        </tr><tr>
            <td>1/3/2011 12:00:00 AM</td><td>MY COMPANY</td><td>1002.99</td>
        </tr><tr>
            <td>4/1/2011 12:00:00 AM</td><td>MY COMPANY</td><td>1003.99</td>
        </tr>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T16:38:20.897

像这样使用选择器

```
 <style>
    #ContentPlaceHolderHome_GridView1 td {
     background : #ccc;
   }
  </style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T16:43:34.993

有几种方法可以将行样式应用于网格视图。

[1）在后面的代码中，您可以在RowDatabound](https://stackoverflow.com/questions/208038/selectively-apply-css-to-a-row-in-a-gridview)上应用样式等。

2）在gridview标签之间，您可以使用：

```
<asp:GridView ID="GridView1" runat="server"> 
<rowstyle CssClass="myClass" />
<alternatingrowstyle CssClass="myClass" />
</asp:GridView> 
```

有关更多详细信息，请参阅此[页面](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowstyle.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T16:41:09.913

修改您的网格以包含每一列。应用`ItemStyle-CssClass`属性。

```
<asp:GridView runat="server" AutoGenerateColumns="false" ID="fooGrid" >
    <Columns> 
     <asp:BoundField  ItemStyle-CssClass="fooBarBat"  
                      DataField="MyDataFieldName" HeaderText="Bar" />     
    </Columns>
</asp:GridView> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T16:41:32.213

您可以使用属性窗口将 CssClass 属性设置为使用 CSS 中的类。或者您可以简单地设置字体和颜色，而不是使用相同的属性窗口。

![GridView 属性](../Images/d9190206512e9ba92067f756202da476.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T16:34:49.580

在 gridview 中，您可以设置名为 HeaderCSSClass 和 CSSClass 的属性（不确定名称，可能是错误的。谷歌他们）。

# c# - 初始化函数 作为扩展方法

> ID：11193327
> 
> 赞同：6
> 
> 时间：2012-06-25T16:29:36.330
> 
> 标签：c#, lambda, extension-methods

是否可以将 Func 委托作为扩展方法？例如，就像您可以创建函数一样

```
bool isSet(this string x) {return x.Length > 0;} 
```

我希望能够写出类似的东西

```
Func<string, bool> isSet = (this x => x.Length > 0); 
```

当然，以上在语法上是不正确的。有什么东西吗？如果不是，那是语法或编译的限制吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-25T16:30:35.613

简短的回答：不，那不可能。

扩展方法是语法糖，只能在某些情况下定义（静态类中的静态方法）。lambda 函数没有与此等价的功能。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-25T16:31:58.723

> 是否可以将 Func 委托作为扩展方法？

不可以。扩展方法必须在顶级（非嵌套）非泛型静态类中声明为普通静态方法。

看起来您将尝试仅为该方法的范围创建扩展方法 - C# 中没有类似的概念。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-25T16:51:47.570

To answer the question in comments on why this is wanted you coudl define the isSet func normally and just use that as a method call which will have the same effect as your extension method but with different syntax.

The syntax difference in use is purely that you'll be passing the string in as a parameter rather than calling it as a method on that string.

A working example:

```
public void Method()
{
    Func<string, bool> isSet = (x => x.Length > 0);

    List<string> testlist = new List<string>() {"", "fasfas", "","asdalsdkjasdl", "asdasd"};
    foreach (string val in testlist)
    {
        string text = String.Format("Value is {0}, Is Longer than 0 length: {1}", val, isSet(val));
        Console.WriteLine(text);
    }
} 
```

This method defines isSet as you have above (but without the this syntax). It then defines a list of test values and iterates over them generating some output, part of which is just calling `isSet(val)`. `Func`s can be used like this quite happily and should do what you want I'd think.

# ruby-on-rails - 寻找正确的 RoR 方法来正确验证记录的状态

> ID：11193333
> 
> 赞同：0
> 
> 时间：2012-06-25T16:30:11.313
> 
> 标签：ruby-on-rails

我有一个模型，这个模型的一列代表一个状态。它是数值，可以是 1,2,3。

我有两个担忧：

a) 根据业务逻辑，状态只能从 1 到 2 和从 2 到 3。不能从高数回到低数，也不能一步一步从 1 到 3。

b）我不想将这些数字暴露给控制器（不喜欢到处乱飞的神奇数字）。

我做了以下

*   我创建了 stateX?、stateY?、stateZ? 等方法。允许控制器检查当前状态。这有助于我担心 b)。

*   如果控制器进行了不可接受的状态切换，我在其中创建了方法 setStateX、setStateY、stateZ 和 raise。这有助于我关注 a) 和 b)。

但是，我觉得这更像是 Java/C++ 方式（这是我的背景）——6 种方法来做一件事。

在 RoR 中是否有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:33:08.950

不确定这是否仍然是最好的方法（我的 Rails 有点生锈），但有一个名为[acts_as_state_machine](https://github.com/omghax/acts_as_state_machine)的gem ，我认为它可以完全满足您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T14:04:51.213

这个怎么样：

```
class Something < ActiveRecord::Base
  before_create :check_state

  private

  def check_state
    if state_changed?
      if state_was == 1 && state != 2
        self.errors.add(:state, "some message")
      elsif state_was == 2 && state != 3
        self.errors.add(:state, "some message")
      else
        self.errors.add(:state, "some message")
      end
    end
  end

end 
```

# asp.net-mvc - MVC3 URL 替代品

> ID：11193336
> 
> 赞同：0
> 
> 时间：2012-06-25T16:30:20.337
> 
> 标签：asp.net-mvc, url-rewriting, url-routing

在查看了很多问题和 Internet 数据后，我解决了我的一个问题，即正确地从 MVC3 应用程序获取 URL 参数。问题是编码没有错误，但在路由方面（我对路由不太擅长......）。这是当前的问题。

```
http://localhost:51561/Report/Details/1 
```

这是我的应用程序呈现报告详细信息的方式，这很好。但是当它这样做时，我无法从 URL 参数中获取值，就像这样

```
Request.QueryString["id"] 
```

但是，当我手动输入 URL 时`http://localhost:51561/Report/Details?id=1`，它可以工作......事情是我喜欢第一个 URL 类型，但我不知道如何从中获取参数......

请帮忙...

更新：

我的控制器操作：

```
public ViewResult Details(int id)
    {
        Report report = db.Reports.Find(id);
        ViewBag.TestID = Request.QueryString["id"].ToString();
        return View(report);
    }

    public ActionResult Show(int id)
    {
        Report report = db.Reports.Find(id);
        var imageData = report.Image;
        return (File(imageData, "image/jpg"));
    } 
```

我的观点：

```
<div class="display-label">Picture</div>
<div class="display-field">
   <img alt="image" src="<%=Url.Action("Show", "Report", new { id = ViewBag.TestID })%>" width="200px" />
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:32:16.360

你不应该`Request.QueryString["id"]`在 MVC中使用

只需`id`在您的操作中添加参数`ReportController.Details`：

`public ActionResult Details (int id)`

以上假设您在 Global.asax 中有一个默认路由设置：

```
 routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
    ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:36:20.483

首先，你不应该`Request.QueryString`在你的应用程序中使用。除此之外，在第一个 URL 中，您没有查询字符串，因此您无法访问它（另请阅读msdn 上的[这篇文章](http://msdn.microsoft.com/en-us/library/ms524784%28v=vs.90%29.aspx)`Request.QueryString`about ）。

我还想建议您阅读 ASP.NET MVC3 的基本教程，可在[**此处**](http://www.asp.net/mvc)找到。像你的问题这样的许多事情都在那里得到了彻底的解释。

现在回答您的问题，在您的第一个 URL 示例中， `1`URL 中的 是您的操作（详细信息操作）的参数。您必须将此参数添加到您的方法（操作）中：

```
public ActionResult Details(int id) 
```

更新：你显然有正确的行动（方法）声明。现在，您可以只使用参数`id`。因此，`Request.QueryString["id"]`只需通过变量 (parameter)更改`id`。

```
public ViewResult Details(int id)
{
    Report report = db.Reports.Find(id);
    ViewBag.TestID = id;
    return View(report);
} 
```

没有必要申请`ToString()`id，你不应该在不需要的时候申请（你可能在其他地方需要它，稍后左右）。只需将其`ViewBag`作为原始类型放入即可。

你的`Show()`方法很好:)。您现在拥有`id`所需的参数。（尽量避免使用过多的括号，这会使它看起来很乱，现在又很清楚。）

```
public ActionResult Show(int id)
{
    Report report = db.Reports.Find(id);
    var imageData = report.Image;
    return File(imageData, "image/jpg");
} 
```

# asp.net - 如何在 ASP.Image 控件上显示 ASP.NET ImageButton

> ID：11193338
> 
> 赞同：0
> 
> 时间：2012-06-25T16:30:34.230
> 
> 标签：asp.net, css

我正在使用 ASP.NET 2.0。

我像这样并排放置 Image 和 ImageButton。

```
 <div style="width:80px">
    <asp:Image ID="innerImgDesk1" runat="server"  ImageUrl="~/images/advlefttop.png"  Width ="60px"/> 
    <asp:ImageButton ID="ImgDeskIndicator1" runat="server" Width="20px" ImageUrl="~/images/Indicators/blue.png"/>
</div> 
```

我想要图像顶部的 ASP.NET Imagebutton。我应该看到图像按钮类型的指示器，其中 Imagebutton 颜色将发生变化。但图像颜色保持不变。

当前使用上面的代码，它显示如下。

![当前显示像这样](../Images/d063d45fa1a3c99b454bdb90c36be909.png)

我希望它显示如下，

![在此处输入图像描述](../Images/38e93851de3e3c5757a4f1b80051d0cc.png)

谁能告诉我我应该怎么做才能在 Image 上显示 ImageButton。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:37:52.480

尝试将图像设置为 div 标签的背景图像，如下面的代码：

```
<div style="width:80px; background: url(images/advlefttop.png)">
    <asp:ImageButton ID="ImgDeskIndicator1" runat="server" Width="20px" ImageUrl="~/images/Indicators/blue.png"/>
</div> 
```

希望这可以帮助！

*   科里克斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:36:45.557

如果您只是担心在图像按钮上显示按钮，则可以通过使用 div 绝对位置来做到这一点，例如

```
<div style="position:relative">
<div style="position:absolute">image button</div>
<div style="position:absolute> button</div>
</div> 
```

# php - 图像大小调整 Codeigniter

> ID：11193346
> 
> 赞同：1
> 
> 时间：2012-06-25T16:30:48.190
> 
> 标签：php, codeigniter, image-processing

我正在使用`image_lib`CodeIgniter 中的类来重新调整图像大小，它工作正常；这是我的代码：

```
function resizeImage($source_image,$new_image,$width=100,$height=100){
       $config['image_library'] = 'gd2';
       $config['source_image']  = $source_image;
       $config['new_image'] = $new_image;
       $config['maintain_ratio'] = TRUE;
       $config['width']  = $width;
       $config['height']    = $height;
       $this->image_lib->initialize($config);

       if($this->image_lib->resize()) return true;
       else return false;
} 
```

但是，我想要实现的目标，无论是什么图像，风景或肖像。大小。裁剪图像以设置尺寸。

目前，以这种方式裁剪后，图像会显示为不同大小的拇指，主要是横向或纵向。[然而，如果你进入这样](http://www.bbc.co.uk/)的网站，你会发现所有拇指的比例、宽度和高度都完全相同。

我怎样才能做到这一点？

干杯。

编辑

出色的教程可以做到这一点，可以在这里找到：

[CodeIgniter.tv](http://codeigniter.tv/a-8/Create-multiple-aspect-ratio-thumbnails)

* * *

我正在尝试在 CI 中裁剪并按比例调整拇指大小，如下所示：

> 好的，那么您可以先将图像裁剪为方形图像，然后调整大小。看看这里：stackoverflow.com/a/3327424/844726 – swatkins 6 月 26 日 13:33

```
function resizeImg(){
   $source_image = base_url().'pic2.jpg';
   $config['image_library'] = 'gd2';
   $config['source_image']  = $source_image;
   $config['new_image'] = $new_image;
   $config['maintain_ratio'] = TRUE;
   $config['x_axis'] = '10';
   $config['y_axis'] = '10';
   $config['width']  = $width;
   $config['height']    = $height;
   $this->image_lib->initialize($config);
} 
```

当我像这样运行脚本时：

```
http://localhost/test/index.php/cronJobs/resizeImg 
```

我收到服务器错误，我猜脚本没有执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:35:14.530

你的问题是`$config['maintain_ratio'] = TRUE;`陈述。这告诉系统将宽度与高度的比例保持为与新宽度或高度的比率（基于哪个是较大的值）。

因此，如果图像是纵向的，它将调整为 100px 高，但宽度将与原始图像比例成比例。

如果您希望图像为 100px X 100px，则需要设置：

```
$config['maintain_ratio'] = FALSE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-26T03:17:07.823

我认为对于像 BBC 这样的大型网站，他们必须自己手动裁剪/调整图像大小。使用 CodeIgniter，我们可以这样设置：

```
$config_resize['maintain_ratio'] = TRUE;
$config_resize['master_dim'] = 'height';
$config_resize['quality'] = "100%";
$config_resize['source_image'] = './' . $user_upload_path . $file_name;

$config_resize['height'] = 64;
$config_resize['width'] = 1; 
```

为了修复拇指高度并保持纵横比，[这篇文章](http://4rapiddev.com/php/codeigniter-upload-and-resize-image-maintain-ratio/)展示了调整大小的示例和演示。

# java - Java ArrayList 填充

> ID：11193353
> 
> 赞同：0
> 
> 时间：2012-06-25T16:31:26.687
> 
> 标签：java, multidimensional-array, arraylist

因此，我正在创建一种对一组数字进行洗牌的方法，其想法是创建这些数字的总体。所以我创建了一个循环，它对数字进行洗牌，然后将其添加到数组列表中，但是经过一些调试语句后，我发现它确实对数字进行了洗牌，但只将最后一次洗牌添加到了数组列表中。谁能帮我弄清楚为什么？

solutionList 是一个数组列表，如果有人想知道的话

```
for(int k =0;k <100; k++){
        Collections.shuffle(solutionList);
        population2.add(new Object[]{solutionList}) ;
        System.out.println("In the loop  " + solutionList);

    }

    for(Object[] row : population2){
        System.out.println("Row = " + Arrays.toString(row));
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T16:33:04.620

的每个元素`population2`都是一个引用*相同* `ArrayList`的数组。如果您想要不同的列表，则需要为每次迭代创建一个新列表。

例如，为了避免每次都使用正确的数字填充列表，您可以只是随机播放`solutionList`，然后添加对*副本*的引用：

```
for (int k = 0; k < 100; k++) {
    Collections.shuffle(solutionList);
    List<Integer> copy = new ArrayList<Integer>(solutionList);
    population2.add(new Object[]{ copy });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T16:33:15.720

```
population2.add(new Object[]{solutionList}) ; 
```

创建一个包含单个元素的 Object 数组。该元素恰好是一个列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T16:35:25.560

您正在创建 100 个数组，每个数组都包含对同一列表的引用。我认为您想要的是创建 100 个数组，每个数组都包含列表元素的副本：

```
for(int k =0;k <100; k++){
    Collections.shuffle(solutionList);
    population2.add(solutionList.toArray()) ;
} 
```

但我建议完全避免使用数组，并始终使用集合：

```
for(int k =0;k <100; k++){
    Collections.shuffle(solutionList);
    population2.add(new ArrayList<Something>(solutionList));
} 
```

# wcf - 处理传递给 WCF 服务的无效 URI

> ID：11193356
> 
> 赞同：0
> 
> 时间：2012-06-25T16:31:41.590
> 
> 标签：wcf, rest

我有描述我的合同的 WebGet 和 WebInvoke 属性，但处理无效 URI 的最佳方法是什么？现在，如果用户传递的 URI 与我当前的操作不匹配，他们会得到“找不到端点”。信息。我想回传一个更具描述性的信息。

例如，我的 URI 模板如下所示：

```
/Stuff/{ID}/subStuff 
```

但说他们打字

```
/Stuff/{ID}/OtherStuff 
```

没有其他东西这样的东西，我也没有模板。

有没有办法用一个合同覆盖所有非映射的 URI？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:39:05.877

如果您想在 WCF REST 中在全局级别捕获所有未处理的请求，那么您必须按照本文所述创建自定义[和](https://stackoverflow.com/questions/6371856/handling-404-in-wcf-rest-service)自`WebHttpBehavior`定义。`IOperationInvoker`

如果您想返回带有自定义状态代码（404）的自定义错误文本，您还可以查看[此处](https://stackoverflow.com/questions/140104/how-can-i-return-a-custom-http-status-code-from-a-wcf-rest-method)`WebOperationContext.OutgoingResponse`描述的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T22:21:46.970

虽然我确实遵循了提供的链接标记，但它们确实暗示了我需要什么。链接的答案实际上并没有回答我原来的问题。

我能够按照这些步骤进行操作，并且我也想在此问题上列出解决此问题的步骤。

为了创建我自己对未映射到合同中方法的任何 URI 的响应，我创建了以下内容：

*   自定义 ServiceHostFactory
*   我在自定义 ServiceHostFactory 中映射到我的端点的行为
*   一个调度程序，它将处理提供给服务的所有未映射的 uri。

以下是我创建的对象的完整定义：

```
using System.ServiceModel;
using System.ServiceModel.Activation;

namespace your.namespace.here
{
    public class CustomServiceHostFactory : WebServiceHostFactory
    {
        protected override ServiceHost CreateServiceHost(Type serviceType, Uri[] baseAddresses)
        {
            ServiceHost host = base.CreateServiceHost(serviceType, baseAddresses);
            //note: these endpoints will not exist yet, if you are relying on the svc system to generate your endpoints for you
            // calling host.AddDefaultEndpoints provides you the endpoints you need to add the behavior we need.
            var endpoints = host.AddDefaultEndpoints();
            foreach (var endpoint in endpoints)
            {
                endpoint.Behaviors.Add(new WcfUnkownUriBehavior());
            }

            return host;
        }
    }
} 
```

正如您在上面看到的，我们正在添加一个新行为：WcfUnknownUriBehavior。这个新的自定义行为的核心职责是替换 UnknownDispatcher。下面是那个实现：

```
using System.ServiceModel.Dispatcher;
using System.ServiceModel.Channels;
using System.ServiceModel.Web;
namespace your.namespace.here
{
    public class UnknownUriDispatcher : IOperationInvoker
    {
        public object[] AllocateInputs()
        {
            //no inputs are really going to come in,
            //but we want to provide an array anyways
            return new object[1]; 
        }

        public object Invoke(object instance, object[] inputs, out object[] outputs)
        {
            var responeObject = new YourResponseObject()
            {
                Message = "Invalid Uri",
                Code = "Error",
            };
            Message result = Message.CreateMessage(MessageVersion.None, null, responeObject);
            WebOperationContext.Current.OutgoingResponse.ContentType = "text/html";
            outputs = new object[1]{responeObject};
            return result;
        }

        public System.IAsyncResult InvokeBegin(object instance, object[] inputs, System.AsyncCallback callback, object state)
        {
            throw new System.NotImplementedException();
        }

        public object InvokeEnd(object instance, out object[] outputs, System.IAsyncResult result)
        {
            throw new System.NotImplementedException();
        }

        public bool IsSynchronous
        {
            get { return true; }
        }
    }
} 
```

指定这些对象后，您现在可以在 svc 的“标记”中使用新工厂：

```
<%@ ServiceHost Language="C#" Debug="true" Service="your.service.namespace.here" CodeBehind="myservice.svc.cs"
                Factory="your.namespace.here.CustomServiceHostFactory" %> 
```

应该就是这样。只要您的对象“YourResponseObject”可以被序列化，它的序列化表示就会被发送回客户端。

# emacs - Emacs/ibuffer：如何使用增量搜索切换缓冲区

> ID：11193367
> 
> 赞同：1
> 
> 时间：2012-06-25T16:32:31.900
> 
> 标签：emacs

我正在使用 ibuffer 并发现它在 Emacs 中的缓冲区之间切换非常强大。有一件事我找不到怎么做 - 如何通过部分增量搜索来搜索特定的缓冲区。

像动态文件管理器之类的东西？

我知道 ido 中提供了该功能 - 但我更喜欢使用一种工具进行缓冲区切换（即在 ibuffer 中）。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:55:04.457

您可以在缓冲区列表中使用常规增量搜索 (Cs)，因为它是一个文本缓冲区。

# sql - 如何将动态数据透视表结果添加到 SSRS 报告？

> ID：11193375
> 
> 赞同：5
> 
> 时间：2012-06-25T16:32:58.467
> 
> 标签：sql, tsql, reporting-services, pivot

我是 Pivot & SSRS 的新手，我需要创建一个类似于 Pivot Table 的报告。

报告布局如下：

```
 Area_1  Area_2  Area_3  Area_4  ...  Area_N
A_Percent
B_Percent
C_Percent
D_Percent 
```

由于“Area_N”是动态的，因此我的表格布局如下：

```
Area   A_Percent   B_Percent   C_Percent   D_Percent
----   ---------   ---------   ---------   ---------
Area_1    45           55         66           77
Area_2    22           33         11           55 
Area_3    12           45         88           36
Area_4    67           23         37           28
...
Area_N    76           67         35           28 
```

所以我的问题是：

1.  如何根据上述结构创建数据透视表？
2.  我的 SSRS 报表可以从数据透视表中读取数据吗？

欢迎各位高手评论。非常感谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-25T16:51:32.123

首先 - 您可以使用 SSRS 2005 中的 Matrix（或更高版本中的 Tablix），这将为您提供您想要的。但是，您遇到的问题是矩阵更适用于垂直格式的内容。因此，在您的情况下，您需要像这样查询：

```
SELECT Area, 'A_Percent' as Type, A_Percent as Val FROM YourTable
UNION ALL
SELECT Area, 'B_Percent' as Type, B_Percent as Val FROM YourTable
UNION ALL
SELECT Area, 'C_Percent' as Type, C_Percent as Val FROM YourTable
UNION ALL
SELECT Area, 'D_Percent' as Type, D_Percent as Val FROM YourTable 
```

然后你应该有一个看起来更像这样的结果集：

```
Area    Type       Value
Area_1    A_Percent  50
Area_2    A_Percent  42
Area_3    A_Percent  20
Area_1    B_Percent  12
Area_2    B_Percent  28
Area_3    B_Percent  16 
```

现在您可以在 Matrix 控件中使用它。将区域字段拖放到“列”组中。将类型字段放入“行”组并将值放入中间（这将变成 SUM() 表达式）

![设计师](../Images/0acc4fd327268e6c73ead504ce410b2e.png)

![例子...](../Images/7e181d2bad8d5d31b232068c62b36060.png)

全部做完 ：）

# ios - 如何打开 UIWebview 并全屏播放视频并强制横向？

> ID：11193379
> 
> 赞同：3
> 
> 时间：2012-06-25T16:33:12.787
> 
> 标签：ios, uiwebview, mpmovieplayercontroller

我正在尝试启动一个 webview 来全屏和横向播放 youtube 视频。关于这方面的大多数其他帖子都是错误和笨重的，有没有一种简单而干净的方法可以实现这个，还是我必须使用类似 MPMoviePlayerController 的东西来获得这种效果？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:52:33.840

*在UIWebViews*中显示视频的最佳方式是 HTML5*视频*标签。[YouTube 使用 iframe](http://apiblog.youtube.com/2010/07/new-way-to-embed-youtube-videos.html)嵌入其 HTML5 视频：

```
<iframe 
  class="youtube-player" type="text/html" width="640" height="385" 
  src="http://www.youtube.com/embed/VIDEO_ID" frameborder="0">
</iframe> 
```

我在强制定向问题上没有真正的经验，所以我跳过这一部分。

# php - PHP类在文件夹外扩展另一个类

> ID：11193380
> 
> 赞同：2
> 
> 时间：2012-06-25T16:33:14.347
> 
> 标签：php, class, extending-classes

我有一个普通类，我喜欢让它被其他类扩展。

例如，我的目录在这些文件夹中设置了文件夹和类文件

类/用户/users.class.php 类/general/general.class.php

我有扩展通用类的用户类，但由于它们位于不同的文件夹中，我猜找不到通用类。

类用户扩展一般{

}

有人可以帮我解决这个问题。

我还应该提到我正在使用 autload 功能

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T16:35:50.107

当您没有自动加载器时，请在之前包含该类。

然后该类是已知的，您可以使用它。

```
require_once(__DIR__.'/../general/general.class.php'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T16:39:57.757

您需要确保加载这两个类或任何其他所需的类。例如：

在您的引导程序中...：

```
// Set up the include path so that we can easily access the class files
set_include_path('/absolute/path/to/classes'. PATH_SEPARATOR . get_include_path());
require_once('users/users.class.php'); 
```

在 users.class.php 中：

```
require_once('general/general.class.php');
class User {
  // you class definition
} 
```

至于获取类文件夹的绝对路径，您需要根据引导位置进行配置。例如：

```
// bootstrap lives in $_SERVER['DOCUMENT_ROOT'] and classes is one level up outside the doc root
// this code is in the bootstrap...
$path = realpath(dirname(__FILE__).'/../classes');
set_include_path($path . PATH_SEPARATOR . get_include_path()); 
```

# perl - 如何从远程 url 图片中提取创建日期？

> ID：11193382
> 
> 赞同：0
> 
> 时间：2012-06-25T16:33:24.943
> 
> 标签：perl, image-processing, scrapy

如果我有这样的图片链接：

```
http://www.google.com/images/srpr/logo3w.png 
```

不下载可以找回这张图片的原始创建日期吗？实际上**，我尝试**使用[Image::Grab](http://search.cpan.org/~mahex/Image-Grab-1.4.2/)下载它，但我得到的是“本地分配时间”而不是原始时间。同样使用 ctime(stat) 方式。

谁能告诉我是否可以这样做？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T16:46:43.937

HTTP 资源不是文件。

不，如果不下载，您只能检查[Last-Modified HTTP 标头](https://www.rfc-editor.org/rfc/rfc2616#section-14.29)：

```
use LWP::UserAgent qw();
my $ua = LWP::UserAgent->new;
my $res = $ua->head('http://www.google.com/images/srpr/logo3w.png');
print $res->header('Last-Modified'); # 'Mon, 02 Apr 2012 02:13:37 GMT' 
```

有时图像包含元数据，但您必须下载才能检查。

```
use LWP::UserAgent qw();
use Image::ExifTool qw(ImageInfo);
my $ua = LWP::UserAgent->new;
$ua->mirror('http://www.google.com/images/srpr/logo3w.png', 'logo3w.png');
print ImageInfo('logo3w.png')->{CreateDate}; # undef 
```

# c# - 从 datagridview 中删除行

> ID：11193385
> 
> 赞同：1
> 
> 时间：2012-06-25T16:33:35.270
> 
> 标签：c#, datagridview, ms-access-2007

我在删除搜索查询返回的一行数据时遇到问题。我希望用户可以选择任何一行数据并单击删除按钮 [button1_click] 将其从数据库中删除。这是一个窗体应用程序。

希望你能给我建议。非常感谢。下面是我的代码

```
public partial class Search : Form
{
    public Search()
    {
        InitializeComponent();
        string strConn = @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=D:\Project\DB_Booking.mdb;";
        DataTable ds = new DataTable();
        using (var cn = new OleDbConnection(strConn))
        {
            cn.Open();
            using (var cmd = new OleDbCommand("SELECT * FROM staff", cn))
            {
                using (OleDbDataAdapter adp = new OleDbDataAdapter(cmd))
                    adp.Fill(ds);

                comboBox1.DataSource = ds;
                comboBox1.ValueMember = "sname";
                comboBox1.SelectedIndex = 0;

            }
        }

    }

    private void btn_search_bystaffname_Click(object sender, EventArgs e)
    {
        string strConn = @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=D:\Project\DB_Booking.mdb;";

        DataTable dt = new DataTable();

           using (var cn = new OleDbConnection(strConn))
            {
                cn.Open();
                using (var cmd = new OleDbCommand("SELECT * FROM booking WHERE sname = @sname", cn))
                {
                    //cmd.Parameters.AddWithValue("@bdate", dtp_search_date.Value.Date);
                    cmd.Parameters.AddWithValue("@sname", comboBox1.SelectedValue);

                    using (OleDbDataAdapter oda = new OleDbDataAdapter(cmd))
                        oda.Fill(dt);
                    GridView1.DataSource = dt;

                    GridView1.Columns[0].HeaderCell.Style.Alignment = DataGridViewContentAlignment.TopCenter;
                    GridView1.Columns[1].HeaderCell.Style.Alignment = DataGridViewContentAlignment.TopCenter;
                    GridView1.Columns[2].HeaderCell.Style.Alignment = DataGridViewContentAlignment.TopCenter;
                    GridView1.Columns[3].HeaderCell.Style.Alignment = DataGridViewContentAlignment.TopCenter;
                    GridView1.Columns[4].HeaderCell.Style.Alignment = DataGridViewContentAlignment.TopCenter;
                    GridView1.Columns[5].HeaderCell.Style.Alignment = DataGridViewContentAlignment.TopCenter;

                    GridView1.Columns[0].HeaderText = "Booking ID";
                    GridView1.Columns[1].HeaderText = "Client Name";
                    GridView1.Columns[2].HeaderText = "Booking Date";
                    GridView1.Columns[3].HeaderText = "Booking Time";
                    GridView1.Columns[4].HeaderText = "Client Contact";
                    GridView1.Columns[5].HeaderText = "Staff Name";

                    this.GridView1.DefaultCellStyle.Font = new Font("Times New Roman", 12);
                    this.GridView1.DefaultCellStyle.ForeColor = Color.Blue;
                    this.GridView1.DefaultCellStyle.BackColor = Color.Beige;
                    this.GridView1.DefaultCellStyle.SelectionForeColor = Color.Yellow;
                    this.GridView1.DefaultCellStyle.SelectionBackColor = Color.Black;

                    this.GridView1.Columns[0].DefaultCellStyle.Alignment = DataGridViewContentAlignment.TopCenter;
                    this.GridView1.Columns[1].DefaultCellStyle.Alignment = DataGridViewContentAlignment.TopCenter;
                    this.GridView1.Columns[2].DefaultCellStyle.Alignment = DataGridViewContentAlignment.TopCenter;
                    this.GridView1.Columns[3].DefaultCellStyle.Alignment = DataGridViewContentAlignment.TopCenter;
                    this.GridView1.Columns[4].DefaultCellStyle.Alignment = DataGridViewContentAlignment.TopCenter;
                    this.GridView1.Columns[5].DefaultCellStyle.Alignment = DataGridViewContentAlignment.TopCenter;

                }

            }
        }

    private void btn_search_bydate_Click(object sender, EventArgs e)
    {
        string strConn = @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=D:\Project\DB_Booking.mdb;";

        DataTable dt = new DataTable();

        using (var cn = new OleDbConnection(strConn))
        {
            cn.Open();
            using (var cmd = new OleDbCommand("SELECT * FROM booking WHERE bdate = @bdate", cn))
            {
                cmd.Parameters.AddWithValue("@bdate", dtp_search_date.Value.Date);
                cmd.Parameters.AddWithValue("@sname", comboBox1.SelectedValue);

                using (OleDbDataAdapter oda = new OleDbDataAdapter(cmd))
                    oda.Fill(dt);
                GridView1.DataSource = dt;

                GridView1.Columns[0].HeaderCell.Style.Alignment = DataGridViewContentAlignment.TopCenter;
                GridView1.Columns[1].HeaderCell.Style.Alignment = DataGridViewContentAlignment.TopCenter;
                GridView1.Columns[2].HeaderCell.Style.Alignment = DataGridViewContentAlignment.TopCenter;
                GridView1.Columns[3].HeaderCell.Style.Alignment = DataGridViewContentAlignment.TopCenter;
                GridView1.Columns[4].HeaderCell.Style.Alignment = DataGridViewContentAlignment.TopCenter;
                GridView1.Columns[5].HeaderCell.Style.Alignment = DataGridViewContentAlignment.TopCenter;

                GridView1.Columns[0].HeaderText = "Booking ID";
                GridView1.Columns[1].HeaderText = "Client Name";
                GridView1.Columns[2].HeaderText = "Booking Date";
                GridView1.Columns[3].HeaderText = "Booking Time";
                GridView1.Columns[4].HeaderText = "Client Contact";
                GridView1.Columns[5].HeaderText = "Staff Name";

                this.GridView1.DefaultCellStyle.Font = new Font("Times New Roman", 12);
                this.GridView1.DefaultCellStyle.ForeColor = Color.Blue;
                this.GridView1.DefaultCellStyle.BackColor = Color.Beige;
                this.GridView1.DefaultCellStyle.SelectionForeColor = Color.Yellow;
                this.GridView1.DefaultCellStyle.SelectionBackColor = Color.Black;

                this.GridView1.Columns[0].DefaultCellStyle.Alignment = DataGridViewContentAlignment.TopCenter;
                this.GridView1.Columns[1].DefaultCellStyle.Alignment = DataGridViewContentAlignment.TopCenter;
                this.GridView1.Columns[2].DefaultCellStyle.Alignment = DataGridViewContentAlignment.TopCenter;
                this.GridView1.Columns[3].DefaultCellStyle.Alignment = DataGridViewContentAlignment.TopCenter;
                this.GridView1.Columns[4].DefaultCellStyle.Alignment = DataGridViewContentAlignment.TopCenter;
                this.GridView1.Columns[5].DefaultCellStyle.Alignment = DataGridViewContentAlignment.TopCenter;

            }

        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        GridView1.SelectionMode = DataGridViewSelectionMode.FullRowSelect;
        DataGridViewRow row = GridView1.SelectedRows[0];
        GridView1.Rows.Remove(row);

    }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:46:53.920

我假设这是您要更改的方法

```
private void button1_Click(object sender, EventArgs e)
{
    GridView1.SelectionMode = DataGridViewSelectionMode.FullRowSelect;
    DataGridViewRow row = GridView1.SelectedRows[0];
    GridView1.Rows.Remove(row);

} 
```

这`GridView1.Rows.Remove(row);`只会从 DaDataGridViewRowCollection 中删除该项目，而不会从数据库中删除它。

要从数据库中删除它，您可以执行以下操作之一

1.  从 `DataTable' 中删除它，然后使用 DataAdapter 并调用更新。

2.  通过 OleDbCommand 使用 DELETE SQL 语句直接将其从数据库中删除。

`dt`如果您选择选项一，您会在表单上填写一个字段，这样您会得到很好的服务。这是因为您现在只能通过button1_Click 事件`((DataRow)row.DataBoundItem).Table`或`GridView1.DataSource`在 button1_Click 事件中访问它。也使 DataAdapter 成为一个字段会使这更容易

例如

```
GridView1.SelectionMode = DataGridViewSelectionMode.FullRowSelect;
DataGridViewRow row = GridView1.SelectedRows[0];
DataRow dRow = (DataRow)row.DataBoundItem;
dt.Rows.Remove(dRow);
Adapter.Update(dt); 
```

顺便说一句，您可以选择仅`dt.Rows.Remove(dRow);`在 button1_Click 中执行并推迟`Adapter.Update(dt)`到稍后在 Save 按钮中执行。

如果您使用选项二，则需要将其从 DataTable 中删除或刷新 DataTable

例如

```
GridView1.SelectionMode = DataGridViewSelectionMode.FullRowSelect;
DataGridViewRow row = GridView1.SelectedRows[0];

OleDbCommand cmd = new OleDbCommand(   

using (var cn = new OleDbConnection(strConn))
{
   cn.Open();
   // not 100% this delete syntax is correct for Access
   using (var cmd = new OleDbCommand("DELETE booking WHERE [Booking ID] = @BookingId", cn)) 
   {
       cmd.Parameters.AddWithValue("@BookingId", dRow["Booking Id"]);
       cmd.ExecuteNonQuery();     
   }
}

// Do this to update the in-memory representation of the Data
DataRow dRow = (DataRow)row.DataBoundItem;
dt.Rows.Remove(dRow);

// Or just refresh the datatable using code similar as your search methods 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:42:09.473

以下是我在我的应用程序中的做法（我的 mysql 表的唯一标识符在单元格零中）：

哦，dtcommand 是我用于常见数据库内容的数据库命令类的类实例。

```
 int userDeleteIndex;
        if (int.TryParse(datagridview.Rows[rowIndex].Cells[0].Value.ToString(), out userDeleteIndex))
        {
            if (MessageBox.Show("Delete " + recordidentifyingdata + "? ", "Delete " + userDeleteIndex.ToString(), MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                try
                {
                    string updateUserSql = "DELETE FROM table WHERE user_id = " + userDeleteIndex.ToString() + "; ";
                    dtCommand.UpdateTable(updateUserSql);
                    InitializeUserDataView();
                    // Initalize userdataview refreshes the datagridview with the updated info
                }
                catch (Exception err)
                {
                   Error trapping goes here
                } 
```

这是我班上的数据库更新部分：

```
public int UpdateTable(string updateString, string MySqlConnectionString)
{
    int returnValue = 0;
    MySqlConnection connection = new MySqlConnection(MySqlConnectionString);
    MySqlCommand command = new MySqlCommand(updateString, connection);
    try
    {
        connection.Open();
        command.ExecuteNonQuery();
    }
    catch (Exception err)
    {
        WriteErrorLog("Unable to update table: " + err.ToString() +
            " - Using SQL string: " + updateString + ".");
        //MessageBox.Show("An error has occured while updating the database.\n" +
        //"It has been written to the file: " + errorFile + ".", "Database Error");
        returnValue = -1;
    }
    finally
    {
        connection.Close();
    }
    return (returnValue);
} 
```

# sql-server - 为什么我的实体不会返回更新的值？

> ID：11193391
> 
> 赞同：0
> 
> 时间：2012-06-25T16:33:59.953
> 
> 标签：sql-server, entity-framework, ef-code-first

我在 EF Code First 中定义了一个带有 AccountNumber 属性的客户实体。我可以毫无问题地使用他们的 AccountNumber 获取和更新单个客户。但是，当我获得所有客户时，AccountNumber 已经旧了一段时间，然后最终在更改后更新。数据库始终返回正确的 AccountNumber 值。

我分析了 SQLServer，发现获取所有客户的调用确实进入了数据库，它返回了最新的值，但是来自 DbContext 的响应给出了一个旧的 AccountNumber。所以看起来 EFCF 正在缓存我的数据。

请帮忙。

更新：代码示例 -

```
 public IQueryable<Customer> GetCustomers()
    {
        return this.acmeDbContext.Customer
            .Include(x => x.IpAddressRange)
            ;
    }

    public Customer GetCustomer(Guid id)
    {
        var Customer = this.acmeDbContext.Customer
            .Include(x => x.Contacts)
            .Include(x => x.IpAddressRange)
            .OrderByDescending(x => x.Id)
            .FirstOrDefault(x => x.CustomerId == id);
        return Customer;
    }
    public void SaveCustomer(Customer Customer)
    {
        this.acmeDbContext.SaveChanges();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:09:36.450

我最终使用 Reload 方法重新加载每个客户：

```
 if (noCache)
            customers.ToList().ForEach(x => acmeDbContext.Entry(x).Reload()); 
```

# wpf - 旋转矩形会产生非常混乱的结果

> ID：11193394
> 
> 赞同：-2
> 
> 时间：2012-06-25T16:34:05.470
> 
> 标签：wpf, vb.net, math, .net-4.0, rotation

我使用此过程将 4 个边框的矩形旋转为 wpf 中的角：

```
 'find the center
    Dim center As New Point(((topRight.Margin.Left - topLeft.Margin.Left) / 2) + topLeft.Margin.Left,
                            ((topLeft.Margin.Top - bottomLeft.Margin.Top) / 2) + bottomLeft.Margin.Top)

    'shift the points to center and calculate the rotation
    Dim tl As Point = getRotatedPoint(New Point(topLeft.Margin.Left - center.X,
                                                topLeft.Margin.Top - center.Y), 1)
    Dim tr As Point = getRotatedPoint(New Point(topRight.Margin.Left - center.X,
                                                topRight.Margin.Top - center.Y), 1)
    Dim bl As Point = getRotatedPoint(New Point(bottomLeft.Margin.Left - center.X,
                                                bottomLeft.Margin.Top - center.Y), 1)
    Dim br As Point = getRotatedPoint(New Point(bottomRight.Margin.Left - center.X,
                                                bottomRight.Margin.Top - center.Y), 1)

    'shift the points back from center and move
    topLeft.Margin = New Thickness(tl.X + center.X, tl.Y + center.Y, 0, 0)
    topRight.Margin = New Thickness(tr.X + center.X, tr.Y + center.Y, 0, 0)
    bottomLeft.Margin = New Thickness(bl.X + center.X, bl.Y + center.Y, 0, 0)
    bottomRight.Margin = New Thickness(br.X + center.X, +br.Y + center.Y, 0, 0) 
```

getRotatedPoint 函数是：

```
'rotating the borders
Private Function getRotatedPoint(ByVal pnt As Point, ByVal degrees As Double)
    Dim rAngle As Double = degrees * (Math.PI / 180)
    Dim x As Double = pnt.X * Math.Cos(rAngle) - pnt.Y * Math.Sin(rAngle)
    Dim y As Double = pnt.X * Math.Sin(rAngle) + pnt.Y * Math.Cos(rAngle)
    Return New Point(x, y)
End Function 
```

但我得到非常混乱的结果，我不知道，任何想法都会受到欢迎:)

**edit1**：我将 getRotatedPoint 函数更改为双精度，并添加了弧度到度数的转换。

**edit2**：修正弧度转换函数。

**edit3**：更正了中心坐标，但仍然会发生一些偏移。

**edit4**：这里是测试人员的示例项目：http: [//dl.dropbox.com/u/33417300/testapp.zip](http://dl.dropbox.com/u/33417300/testapp.zip)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:41:44.807

如前所述，不清楚您所说的“混乱结果”是什么意思，因此我想到了几种解释：

如果您的旋转不正确，可能是因为您以度为单位传递角度，而 SIN 和 COS 函数需要弧度。这似乎很可能，因为您将角度作为整数而不是浮点表示形式传递。如果要将它们作为度数传递，请在将它们传递给三角函数之前转换为弧度。

其次，如果杂乱的结果意味着代码很复杂，您可能希望将[仿射变换](http://en.wikipedia.org/wiki/Affine_transformation)表示为矩阵。对于 2-D 情况，您可以通过添加 1 作为第三个元素来将 2-D 向量扩展为 3-D。您的转换是 3x3 矩阵，您可以将它们相乘以创建旋转、缩放、倾斜、平移等序列。生成的转换可以用作向量 - 矩阵乘法。

**更新：**

这个函数有一些问题：

```
Private Function getRotatedPoint(ByVal pnt As Point, ByVal angle As Integer)
    Dim x As Integer = pnt.X * Math.Cos(angle) - pnt.Y * Math.Sin(angle)
    Dim y As Integer = pnt.X * Math.Sin(angle) + pnt.Y * Math.Cos(angle)
    Return New Point(x, y)
End Function
```

除了度数/弧度混淆的问题外，整数和浮点之间的类型转换留给编译器和 .Net 框架，这可能与您的意图不一致。我将重写如下：

```
Private Function getRotatedPoint(ByVal pnt As Point, ByVal radians As Double)
    Dim x As Double = CDbl(pnt.X) * Math.Cos(radians) - CDbl(pnt.Y) * Math.Sin(radians)
    Dim y As Double = CDbl(pnt.X) * Math.Sin(radians) + CDbl(pnt.Y) * Math.Cos(radians)
    Return New Point(CInt(x), CInt(y))
End Function
```

不过，我仍然建议使用矩阵库来执行此操作。它将让您专注于开发程序的核心功能，而不是调试和排除已被多次编写和重写的内容。

**更新 2：**

这也是有问题的：

```
Dim center As New Point((topLeft.Margin.Left + topRight.Margin.Left) / 2,
                            (topLeft.Margin.Left + bottomLeft.Margin.Left) / 2)
```

这不应该是：

```
Dim center As New Point((topLeft.Margin.Left + topRight.Margin.**Right**) / 2,
                            (topLeft.Margin.**Top** + bottomLeft.Margin.**Bottom**) / 2)
```

如果我错了，那么您将需要详细解释您的 topLeft、topRight、bottomLeft 和 bottomRight 值所代表的内容，足以让任何人帮助您……请参阅 Kendall Frey 对[SSCCE](http://sscce.org/)的评论。

# reporting-services - 如何将基本身份验证质询转发到报告管理器 url

> ID：11193396
> 
> 赞同：24
> 
> 时间：2012-06-25T16:34:08.553
> 
> 标签：reporting-services, sql-server-2008-r2, ssrs-2008

*环境的细节在底部描述。

我正在尝试为报告服务构建身份验证解决方案。

在线客户应该使用我们现有的客户数据库进行身份验证，而本地管理用户可以使用简单的基本身份验证。

我已经对`SSRS`使用 codeplex 示例进行了安全扩展，我用来发出基本挑战的方式如下

```
public void GetUserInfo(out IIdentity userIdentity, out IntPtr userId)
{
    if (HttpContext.Current != null && HttpContext.Current.User != null)
        userIdentity = HttpContext.Current.User.Identity;
    else
    {
        HttpContext.Current.Response
            .AddHeader("WWW-Authenticate", "Basic realm=\"ReportServer\"");
        HttpContext.Current.Response.Status = "401 Unauthorized";
        HttpContext.Current.Response.Flush();
        HttpContext.Current.Response.Close();
        userIdentity = new GenericIdentity("not authorized");
    }

    userId = IntPtr.Zero;
} 
```

这样，当未通过该`LogonUser`方法的用户（即直接 url 访问、投标报告部署，而不是常规用户应用程序）受到基本登录/密码弹出窗口的挑战时。为了支持这一点，我制作了一个 httpmodule 如下

```
void IHttpModule.Init(HttpApplication context)
{
    context.AuthenticateRequest += CustomAuthenticateRequest;
}

void CustomAuthenticateRequest(object sender, EventArgs e)
{
    var app = sender as HttpApplication;

    if (app == null) return;

    var basicAuth = app.Context.Request.Headers["Authorization"];

    if (!string.IsNullOrEmpty(basicAuth))
    {
        var loginpass = Encoding.Default.GetString(
           Convert.FromBase64String(basicAuth.Replace("Basic ", ""))).Split(':');
        if (loginpass.Length == 2 
            && loginpass[0] == adminUser 
            && loginpass[1] == adminPass)
        {
            app.Context.User = new GenericPrincipal(
                new GenericIdentity(adminUser), null);
        }
    }
} 
```

这在访问`/ReportServer`URL 时工作正常，我受到挑战，输入硬编码的管理员登录名/密码并登录。

问题是访问时`/Reports`我得到

> System.Net.WebException：请求失败，HTTP 状态 401：未经授权

**我想知道如何将登录/通过挑战一直传递到`/Reports`**

我正在运行 SqlServer 2012 和 Reporting Services 2012，但内部工作并没有从`SSRS 2008-R2`

在我的`web.config`我有

```
<authentication mode="None" />
<identity impersonate="false" />, and the entry for the httpmodule 
```

在`rssrvpolicy.config`我的 httpmodule 的代码组中使用 FullTrust

我`rsreportserver.config`有

```
 <AuthenticationTypes>
        <Custom/>
    </AuthenticationTypes>, and the entry for the security extension 
```

我还没有`SSL`配置，绑定是默认的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-04T05:00:07.877

从错误消息来看，似乎是在呈现报表管理器的 UI 时发生了身份验证错误。请转到文件夹 c:\Program Files\Microsoft SQL Server\MSRS11.MSSQLSERVER\Reporting Services\ReportManager\，找到 web.config 文件，并应用以下更改。

```
<authentication mode="None" />
<identity impersonate="false" />, and the entry for the httpmodule 
```

# database - 在 MCR 和 Matlab studio 中运行 matlab 代码时 cursor.data 的 Matlab 数据类型不一致

> ID：11193398
> 
> 赞同：0
> 
> 时间：2012-06-25T16:34:21.523
> 
> 标签：database, matlab, cursor

我在下面有一段 matlab 代码，它从表中读取数据。当我在 Matlab Studio 中运行此代码时，cursor.data 类型是元胞数组。但是当我使用我的 Java 代码在 MCR 中运行这段代码时，`cursor.data`类型是双精度的。我的 Matlab Studio 版本是 2012a。我现在的 MCR 版本是 2011b。我正在尝试将我的 MCR 版本升级到 2012a。除了可能的版本问题，有人知道导致此问题的其他可能原因吗？谢谢！

```
cur = exec(conn, ['SELECT CAST(Customer_Key AS NUMERIC(38,6)), ...
           CAST(Product_Key AS NUMERIC(38,6)), Spend FROM ' inputTable]);
cursor = fetch(cur); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:39:50.867

这听起来像一个配置问题。检查[setdbrefs](http://www.mathworks.com/help/toolbox/database/ug/setdbprefs.html)的文档以查看选项。

```
setdbprefs('datareturnformat','cellarray') 
```

您可能需要像这样显式设置配置选项。

# css - yui3 网格不适用于 Firefox

> ID：11193401
> 
> 赞同：-1
> 
> 时间：2012-06-25T16:34:33.580
> 
> 标签：css, yui3

我正在尝试使用 3 列 YUI3 网格

1/2 | 3/8 | 1/8

这在 Chrome 和 Safari 上运行良好，但在 Firefox 上，1/8 列包裹在 1/2 列下。

我错过了什么？

[这是网站](http://zmgc.net/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:26:11.883

我的 yui3-g 设置错误，http: [//yuilibrary.com/yui/docs/cssgrids/](http://yuilibrary.com/yui/docs/cssgrids/)

# php - 插入时出错

> ID：11193405
> 
> 赞同：0
> 
> 时间：2012-06-25T16:34:45.343
> 
> 标签：php, mysql

我需要插入数据库，但它给了我错误，我只是在这里看到了类似的例子，但我的不工作请告诉我问题是什么：

```
<?php
$con = mysql_connect("localhost","****","****");
if (!$con)
 {
 die('Could not connect: '. mysql_error());
 }
mysql_select_db("properties", $con);

// array for JSON response
$response = array();

    $result = mysql_query("INSERT INTO property( Pname, P_Price,P_Desc,P_City, P_Size,P_Rooms, P_garage, P_Address, P_Long, P_Lat,  Provinces_idProvinces)
    VALUES
        ('$_POST[Pname]','$_POST[P_Price]','$_POST[P_Price]','$_POST[P_Desc]','$_POST[P_City]','$_POST[P_Size]','$_POST[P_Rooms]','$_POST[P_garage]','$_POST[P_Address]','$_POST[P_Long]','$_POST[P_Lat]','$_POST[Provinces_idProvinces]')");   

 if ($result) {
        // successfully inserted into database
        $response["success"] = 1;
        $response["message"] = $result ;

        // echoing JSON response
        echo json_encode($response);
    } else {
        // failed to insert row
        $response["success"] = 0;
        $response["message"] = "Oops! An error occurred.";

        echo $response["success"];

        // echoing JSON response
        echo json_encode($response);
    }

 mysql_close();

?> 
```

我需要这样的网址：localhost/php/add.php，它必须显示 {"success":1,"message":true} ，但它不请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:38:38.160

尝试这个

```
INSERT INTO property( Pname, P_Price,P_Desc,P_City, P_Size,P_Rooms, P_garage, P_Address, P_Long, P_Lat,  Provinces_idProvinces)
    VALUES
        ('$_POST[Pname]','$_POST[P_Price]','$_POST[P_Desc]','$_POST[P_City]','$_POST[P_Size]','$_POST[P_Rooms]','$_POST[P_garage]','$_POST[P_Address]','$_POST[P_Long]','$_POST[P_Lat]','$_POST[Provinces_idProvinces]')"); 
```

你有，'$_POST[P_Price]'，重复了两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:03:40.233

您必须注意 sql 语句中的名称和列数以及名称和相应值的数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T16:56:17.253

如果这与您的其他问题有关：[PHP 不会插入 mysql](https://stackoverflow.com/questions/11190839/php-does-not-insert-into-mysql/11191456#11191456)

三个问题：

1.  您的 mysql 创建表模式中有 P_Siz 而不是 P_Size
2.  所有非字符串字段都不应有单引号。这告诉 MySQL 将它们转换为字符串。如果该字段在一个 int 字段中，它将无法插入。

我已经纠正了这个**[DEMO](http://sqlfiddle.com/#!2/fae55/1)**中的问题（删除了外键关联）

尝试以下插入：

```
INSERT INTO property( Pname, P_Price,P_Desc,P_City, P_Size,P_Rooms, P_garage, P_Address, P_Long, P_Lat,  Provinces_idProvinces)
VALUES ('$_POST[Pname]',$_POST[P_Price],'$_POST[P_Desc]','$_POST[P_City]','$_POST[P_Size]','$_POST[P_Rooms]',$_POST[P_garage],'$_POST[P_Address]',$_POST[P_Long],$_POST[P_Lat],$_POST[Provinces_idProvinces])"); 
```

# ios - 在 iOS 中使用 setRegion:animated: 绘制地图区域后调用方法

> ID：11193407
> 
> 赞同：0
> 
> 时间：2012-06-25T16:34:54.787
> 
> 标签：ios, callback, drawing, mkmapview, hud

调用方法后是否可以知道何时`mapView`完成绘制地图`setRegion`？

我展示了`HUD`在计算区域参数之前：

```
[SVProgressHUD showWithStatus:@"Finding"];

MKCoordinateRegion newRegion;

newRegion.center.latitude     = (maxLat + minLat) / 2;
newRegion.center.longitude    = (maxLon + minLon) / 2;
newRegion.span.latitudeDelta  = maxLat - minLat;
newRegion.span.longitudeDelta = maxLon - minLon; 
```

然后设置一个新区域并隐藏`HUD`：

```
[self.mapView setRegion:newRegion animated:NO];
[SVProgressHUD dismiss]; 
```

但是 HUD 解散的速度比地图上出现的新区域要快。`HUD`绘制后如何关闭？是否有任何回调`setRegion`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:11:24.757

`– mapViewDidFinishLoadingMap:`of`MKMapViewDelegate`可用于在地图加载完成后执行代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T02:38:46.413

MKMapViewDelegate 具有 mapView:regionDidChangeAnimated: 当您的 MKMapView 移动到指定区域时将调用它。

参考：http: [//developer.apple.com/library/ios/#DOCUMENTATION/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html](http://developer.apple.com/library/ios/#DOCUMENTATION/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-25T16:38:41.130

[SVProgressHUD performSelector:@selector(dismiss) withObject:nil afterDelay:0.5]; [文档中的](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html)详细信息

# asp.net - Azure - Web 服务角色可以支持多少用户？

> ID：11193409
> 
> 赞同：0
> 
> 时间：2012-06-25T16:34:56.030
> 
> 标签：asp.net, web-services, azure

我看到了这个问题：

[在我遇到性能问题之前，一个 Azure 实例上有多少用户？](https://stackoverflow.com/questions/3528698/how-many-users-on-one-azure-instance-before-i-hit-performance-issues)

其中讨论了 azure 实例可以为网页支持多少用户。我想知道这对于调用客户端应用程序（例如手机）以获取数据的网页与网络服务器是否有任何不同。例如，如果您正在运行一个暴露 REST 端点的 azure webrole，那么在它开始在压力下崩溃之前，有多少设备可以调用该服务？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T17:00:48.567

一根弦有多长？:-)

如果您的应用程序在每个 Web 请求上计算一百万位数的 pi，那么与使用“hello world”回复每个 Web 请求的应用程序相比，它可能会处理更少的并发 Web 请求。

（这是大卫回答的另一个更直率的版本。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T16:40:07.363

Web 角色实例只是一个给定大小（1-8 核、1.75-14GB 可用 RAM、100-800Mbps 网络）的 Windows 2008 Server R2（或 SP2）虚拟机。您可以运行网站、不同的 Web 服务器（例如 tomcat）、WCF 服务（通过 IIS 或独立的 ServiceHost）等。

扩展将在很大程度上取决于应用程序本身：它是否受 CPU 限制？网络受限？您是否有基于队列的工作负载并且您的队列积压正在增长？

*有时，扩展*至更大的 VM至关重要，只是为了处理上述限制之一。选择最小的 VM 大小以在基线模式下运行（例如 1 或 2 个用户）总是明智的，然后根据需要横向扩展至*更多*实例。

确定应用的关键性能指标 (KPI) 很重要。然后，您可以使用自动缩放应用程序[块](http://msdn.microsoft.com/en-us/library/hh680892%28v=pandp.50%29.aspx)(WASABi) 之类的东西来自动化缩放。

这是一个包含所有 VM 大小的[参考页面](http://msdn.microsoft.com/en-us/library/windowsazure/ee814754.aspx)，其中包含有关 CPU、本地磁盘、网络带宽和 RAM 的详细信息。

# symfony - Symfony 2：一起使用 Translatable 和 Loggable

> ID：11193413
> 
> 赞同：3
> 
> 时间：2012-06-25T16:35:02.547
> 
> 标签：symfony, doctrine-orm

我正在使用 symfony2 中的多语言新闻发布者使用学说扩展：-

可翻译和可记录

虽然我让他们都使用默认的英文帖子（即更新日志），但我无法记录编辑过的翻译......记录被插入到'ext_log_entries'表中，但我只得到一个空的序列化数组。

有没有人有任何想法或例子？对于这两个扩展，我几乎都遵循了 git-hub 指南。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-18T17:20:12.240

我之前尝试做同样的事情。我不得不发现不可能将这两个东西一起使用，你必须自己实现它。

我是这样做的：Text.php

```
use Gedmo\Mapping\Annotation as Gedmo;
use Doctrine\ORM\Mapping as ORM;
/**
 * @ORM\Table(name="text")
 * @ORM\Entity
 * @Gedmo\Loggable
 */
class Text
{
    /** @ORM\Id @ORM\GeneratedValue @ORM\Column(type="integer") */
    private $id;

    /** @ORM\Column(name="class", type="string") */
    private $class;

    /** @ORM\Column(name="field", type="string") */
    private $field;

    /** @ORM\Column(name="key_id", type="integer") */
    private $key_id;

    /**
    * @ORM\ManyToOne(targetEntity="Language")
    * @ORM\JoinColumns({
    *   @ORM\JoinColumn(name="lang_id", referencedColumnName="id")
    * })
    */
    private $lang;

    /**
     * @Gedmo\Versioned
     * @ORM\Column(name="text", type="text")
     */
    private $text;

    ...getter setter...
} 
```

语言.php

```
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Table(name="language")
 * @ORM\Entity
 */
class Language {

    /** @ORM\Id @ORM\GeneratedValue @ORM\Column(type="integer") */
    private $id;

    /** @var  @ORM\Column(name="language", type="string") */
    private $language;
... getter setter .... 
```

现在我写了一个服务来管理这些：TextManager.php

```
/**
 * @param $object
 * @param $field
 * @param $langKey
 * @return Text
 *
 * gets the existing text for the object
 * if it does not exist, it creates a new one
 */
public function setupText($object, $field, $langKey){
    $lang = $this->langRepo->findOneBy(array("language" => $langKey));

    $txt = $this->textRepo->findOneBy(array(
        'class' => get_class($object), 'field' => $field,
        'lang' => $lang, 'key_id' => $object->getId()
    ));
    if($txt != null){
        return $txt;
    }

    $txt = new Text();
    $txt->setClass(get_class($object));
    $txt->setField($field);
    $txt->setKeyId($object->getId());
    $txt->setLang($lang);

    return $txt;
}

/**
 * @param $object
 * @param $field
 * @param $langKey
 * @return mixed
 * gives you the text object or false if not found
 */
public function getText($object, $field, $langKey){
    $lang = $this->langRepo->findOneBy(array("language" => $langKey));

    $txt = $this->textRepo->findOneBy(array(
        'class' => get_class($object), 'field' => $field,
        'lang' => $lang, 'key_id' => $object->getId()
    ));

    if ($txt == null){
        return false;
    }

    return $txt;
} 
```

在您的控制器中，您现在可以执行以下操作：获取其他版本的文本对象

```
$logRepo = $em->getRepository('Gedmo\Loggable\Entity\LogEntry'); // we use default log entry class
$text = $textManager->setupText($object, 'abouttext', 'de');
$logRepo->revert($text, 1); //1 is the version you would like to have
$text->getText(); //version 1 text 
```

创建一个新的文本对象

```
$text = $textManager->setupText($object, 'otherfield', 'fr');
$text->setText("your super text");
$em->persist($text);
$em->flush(); 
```

希望对您有所帮助，如果您有任何问题，请不要介意。

# iphone - 获取 int 类型的 touchJson 数据

> ID：11193416
> 
> 赞同：1
> 
> 时间：2012-06-25T16:35:16.597
> 
> 标签：iphone, ios, touchjson

我正在使用 touchJson 从服务器反序列化我的 json。我的json如下：

```
{"text":"abc", "user_id":12345} 
```

反序列化后，我使用下面的代码来获取 Json 值：

```
NSString *text = [dict objectForKey:@"text"]; 
```

这很简单，因为数据是字符串，但是对于“user_id”我应该使用什么类型来解码，是否正确？：

```
NSInteger *user_id = [dict objectForKey:@"user_id"]; 
```

如果不是，那么保存整数 json 类型的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:55:54.550

TouchJSON 会将数字解码为`NSNumber`不`NSInteger`

```
NSNumber *user_id = [dict objectForKey:@"user_id"]; 
```

# heroku - 是否可以在 Heroku 上使用 SQLAlchemy？

> ID：11193417
> 
> 赞同：1
> 
> 时间：2012-06-25T16:35:16.803
> 
> 标签：heroku, sqlalchemy

试图找出是否可以在 Heroku 上使用 SQLAlchemy。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T14:58:44.567

是的，这是可能的。heroku 提供的`DATABASE_URL`环境变量非常适合作为`create_engine`. 在幕后，它是一个 postgresql 数据库，由 sqlalchemy 完美处理。

执行此操作的方法可能会因您使用的框架而异，但应该没有任何困难。

# javascript - Javascript中的堆栈与堆？（超出最大调用堆栈大小）

> ID：11193421
> 
> 赞同：29
> 
> 时间：2012-06-25T16:35:21.710
> 
> 标签：javascript, memory-management, heap-memory, stack-memory

我正在尝试构建一个网页，我需要在 JavaScript 中铲出大约 100MB 的数据。使用不同的浏览器，我在不同的数据量下遇到“超出最大调用堆栈大小”错误。

我可以通过查看我的代码并尝试将函数内的局部变量移动到更全局的范围来尝试将它们分配在堆而不是堆栈上来解决这个问题吗？还是这些概念在 JavaScript 中不存在？（据我所知，我的数据中没有任何主要的递归循环，所以确实是几个巨大的字符串/数字数组似乎导致了错误）

如果这是不可能的，有没有办法让浏览器保留更多的内存？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-26T16:19:39.257

好的，找出问题所在。我的代码中确实没有递归。如果 JavaScript 函数是“varargs”函数，例如[`<array>.splice(...)`](http://www.w3schools.com/jsref/jsref_splice.asp)，这是我的罪魁祸首，那么确实可以调用具有数百个参数的 JavaScript 函数。

*另外：[GWT](http://www.gwtproject.org/)[`System.arraycopy(...)`](https://docs.oracle.com/javase/8/docs/api/java/lang/System.html#arraycopy-java.lang.Object-int-java.lang.Object-int-int-)使用 JavaScript 拼接函数以或多或少的巧妙方式实现了 Java 函数。*

splice 接受任意数量的输入元素以插入到目标数组中。可以使用以下构造从另一个数组传递这些输入元素：

```
var arguments = [index, howmany].concat(elements);
Arrays.prototype.splice.apply(targetarray, arguments); 
```

这相当于调用：

```
targetarray.splice(index, howmany, elements[0], elements[1], elements[2], ...); 
```

如果*元素*变大（有关“大”对于不同浏览器的含义，请参见下文），您**可能会在****没有**递归的情况下收到“超出最大调用堆栈大小”错误，因为它的内容将被加载到函数调用的堆栈中。

这是一个演示此问题的简短脚本：

```
var elements = new Array();
for (i=0; i<126000; i++) elements[i] = 1;
try {
    var arguments = [0, 0].concat(elements);
    Array.prototype.splice.apply(elements, arguments);
    alert("OK");
} catch (err) {
    alert(err.message);
} 
```

使用此脚本，“大”意味着以下内容：

*   Chrome 19：元素包含约 125,000 个数字
*   Safari 5.1（在 Windows 上）：元素包含约 65,000 个数字
*   Firefox 12：元素包含约 500,000 个数字
*   Opera 11.61：元素包含约 1,000,000 个数字

赢家是：Internet Explorer 8 的改变！在此函数调用失败之前，它可以耗尽所有系统内存。

附注：Firefox 和 Opera 实际上会抛出不同的（更有用的）错误消息：Function.prototype.apply: argArray is too large

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-25T16:52:18.567

Javascript 中没有将内存分离为堆栈/堆。您看到的可能是以下之一：

1.  递归太深了。在这种情况下，您需要检查您的算法以使其更具迭代性并使用更少的递归，这样您就不会达到浏览器施加的**调用堆栈**限制。
2.  如果您的算法没有深度递归，考虑到您的代码已生成，这可能仍然只是一个足够深的调用。
3.  最后，一些引擎可能会在某种内部堆栈上分配函数参数和作用域命名变量，以便快速查找。如果您（或自动生成的代码）碰巧在函数中使用了数千个局部变量或参数，这也可能会溢出引擎特定的限制。

# c - 寄存器上的 ptrace 观察点

> ID：11193422
> 
> 赞同：0
> 
> 时间：2012-06-25T16:35:23.263
> 
> 标签：c, ptrace

我正在编写一个带有一些调试功能的 C 程序。我需要在 ptraced 进程的寄存器访问上设置断点。最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-30T08:38:27.793

试试看嘛

```
watch $rax 
```

在 gdb 控制台中。希望能帮助到你。

# json - JSON 提取 - 发现无效字符

> ID：11193424
> 
> 赞同：0
> 
> 时间：2012-06-25T16:35:36.577
> 
> 标签：json

我从 MySQL 数据库中导出了一个表，选择了 JSON 导出选项。

当我尝试通过在线格式化程序验证文件时，我发现了一些无效字符的问题。此处提取 JSON 文件：http: [//pastie.org/4149200](http://pastie.org/4149200)。

我使用[http://jsonformatter.curiousconcept.com/](http://jsonformatter.curiousconcept.com/)来验证文件。错误发生在 product_desc 上。

任何帮助，将不胜感激。

问候，斯蒂芬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:40:38.957

那是因为您的字符串值内有换行符。将它们编码为`\n`.

# python - 在 trac 上使用 mercurial 时，在 demandimport 中出现“DLL 加载失败”或 python 异常，这次是在 Windows 2008 R2，64 位

> ID：11193430
> 
> 赞同：1
> 
> 时间：2012-06-25T16:35:51.787
> 
> 标签：python, apache, mercurial, mod-wsgi

[这个问题](https://stackoverflow.com/questions/5158523/dll-load-failed-when-using-mercurial-on-trac)是在 2011 年提出的，在不同的操作系统（XP 而不是 WSRV2008R2）上有人有一个非常相似的问题，但公认的解决方案是回到现在古老的 mercurial 版本 1.8。我认为这在 2012 年不是一个好的答案。

我想知道是否有办法让 Apache 2.2 和 Trac 0.12 以及 Mercurial 2.2.2 在 Windows 上运行，并且都在 Apache 下运行。我遇到的问题似乎与 Python 编程相关，并且与 Python 的使用以及 Mercurial 对各种压缩和解压缩模块格式的使用有关。

1.  似乎要让这一切正常工作，可能需要您从源代码、Windows 上构建 mercurial，或者使用 Mercurial 的“纯 python”版本。我想知道 Python 或 Mercurial 的哪些情况会导致这些问题，这些问题可能需要我运行“纯 Python”。也许一个公认的答案是 Mercurial 是一种古怪的野兽，在 mod_wsgi 下，应该只使用纯 python 版本的 mercurial。底层 Python 和 mercurial 实现的原因也很高兴知道。

2.  似乎涉及到 Mercurial 看起来阴暗的需求加载功能，这是 mercurial 源代码中的源代码级功能，这让我感到困惑，我希望有人能解释一下。

3.  在安装了“library.zip”的mercurial版本中使用似乎也在创建一个运行时情况，当我从命令行运行python.exe时mercurial将导入（Windows中的命令提示符，环境和路径设置为它）将被设置，如果我在 apache 内部），但是 Mercurial 的主要 python 单元不会从 apache 内部导入 mod_wsgi。

这是我使用的测试脚本，它在命令提示符下运行良好，并显示此 python 2.6 实例在以下位置具有一组可用的 Mercurial 内容`site-packages`：

```
from mercurial import ui, hg
path = 'D:/MyHgRepo'
repo = hg.repository(ui.ui(), path)
print path,"Repository info:"
print repr(repo), "object len: ",len(repo) 
```

但是，当从`Trac`托管在 inside`Apache`的内部运行时，尝试加载 mercurial 模块失败，首先出现一个奇怪的`demandimport`故障，然后当它被修复时，在 Trac 中没有给出任何理由的情况下静默地进行调试（我将不得不在 trac 源代码中调试以解决最后一点，也许）。`Demandimport.py`是 site-packages/Mercurial 文件夹中的一个模块。此异常回溯来自 trac.log：

在这两种情况下，它都说`Look in the Trac log for more information.`——这里的错误信息似乎是问题所在：

```
Traceback (most recent call last):
  File "build\bdist.win32\egg\trac\loader.py", line 68, in _load_eggs
    entry.load(require=True)
  File "build/bdist.linux-i686/egg/pkg_resources.py", line 1954, in load
    entry = __import__(self.module_name, globals(),globals(), ['__name__'])
  File "C:\Program Files\BitNami Trac Stack\python\lib\site-packages\mercurial\demandimport.py", line 114, in _demandimport
    mod = _origimport(name, globals, locals)
  File "build\bdist.win32\egg\trac\mimeview\rst.py", line 155, in <module>
  File "C:\Program Files\BitNami Trac Stack\python\lib\site-packages\mercurial\demandimport.py", line 87, in __getattribute__
    return getattr(self._module, attr)
AttributeError: 'module' object has no attribute 'directives' 
```

可以通过“注释掉”整个需求导入单元来修复上述异常。这是我的空“通过”实现：

```
# demandimport.py - disabled by warren.

'''
demandimport - disabled in code by warren.
'''

def enable():
    "does nothing"
    pass

def disable():
    "does nothing"
    pass 
```

上面的 hack 清除了上面可见的异常，使 trac.log 没有错误，但是，在 Trac 中仍然没有可见的 Hg 插件。

通过在互联网上疯狂搜索，我发现：

1.  安装到 \Python2.6 系统文件夹中的 Windows 的 Mercurial 安装程序会提供一个“Library.zip”，其中不仅包含 .pyc 文件，还包含 .pyd 文件。这似乎对某些人有效，而对某些人则失败，`mod_wsgi`在 apache 下使用时，而不是在交互式使用 Python 时，或通过独立的 http`hg serve`操作。我看到 Trac Mercurial Plugin 的作者建议解压缩 library.zip。这是我的第一个问题；Library.zip 发生了什么，这是我的问题。

2.  很多人很难让 Python 2.6 或 2.7、mod_wsgi、Trac 和 Mercurial 都在 Windows 上的 Apache 内部运行。他们所面临的潜在问题似乎远远超出了软件用户和安装人员的解决能力，并且需要一些晦涩难懂的，或者至少是基本的 Python 编程知识来解决。

这就是我在编程答案网站上问这个问题的原因。我想了解流行的开源软件包 Mercurial、Trac 等使用的 Python 及其库和模块以及站点包架构，以便我可以理解、诊断和调试 Mercurial 2.2 的损坏的 Python 代码库，其中在 mod_wsgi/apache2.2 环境中使用时，在我的系统上不起作用。

我使用的是 Python 2.6 和 Trac 0.12，它们都是由 Bitnami Trac Stack 安装程序安装的。我正在使用通过 mercurial 网站上的 mercurial-2.2-for-x86-for-Python2.6 安装程序安装的 Mercurial 2.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:33:41.370

发生这种情况是因为安装了包含一些 CPython 扩展的二进制文件的 Mercurial 版本无法导入到 Web 服务器 WSGI 或 CGI 或其他 Python-in-apache 技术中使用的 Python 版本。

解决方案：

A. 查找并安装正确版本的 Mercurial 二进制文件（包括 Mercurial 使用的 library.zip 和 CPython 二进制扩展）

B. 选择纯 100%-python（无 CPython 二进制扩展）版本的 Mercurial，例如 hackable mercurial：

[https://www.mercurial-scm.org/wiki/HackableMercurial](https://www.mercurial-scm.org/wiki/HackableMercurial)

# css - CSS中的背景图像

> ID：11193433
> 
> 赞同：-3
> 
> 时间：2012-06-25T16:36:13.267
> 
> 标签：css, asp.net-mvc, visual-studio-2010

您好我正在尝试在 Visual Basic 2010 ASP.Net MVC 中的 css 文件中添加背景图像我的代码是：

```
#page-container {
    width: 100%;
    height:100%;
    margin: auto;
    background-image:url ('../Content/homepage.jpg');
    background:cover;
    background-repeat:no-repeat;
} 
```

我的背景图片没有出现。可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:03:37.700

多个问题：

1.  url 和第一个冒号之间有一个空格，所以：

    ```
    background-image:url ('../Content/homepage.jpg') 
    ```

    应该是这样的：

    ```
    background-image:url('../Content/homepage.jpg') 
    ```

2.  `background:cover`不是正确的 CSS 规则。

    我想你想要做的是`background-size:cover`。请注意这是 CSS3，因此您可能需要添加供应商前缀：

    ```
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:44:13.120

使用网络工具（如 Firefox 中的 Firebug 或 Chrome 的开发人员工具栏）查看 CSS 请求背景图像实际生成的 URL。您将看到对图像的请求（并且很可能正在注册 404）并将其与您期望的进行比较。

很可能，您没有在 CSS 中定义正确的 URL，但是如果不知道您的站点结构，这很难说。

# macos - Foreach SQLite 行，在终端下载文件

> ID：11193435
> 
> 赞同：0
> 
> 时间：2012-06-25T16:36:17.030
> 
> 标签：macos, sqlite, download, terminal

我有一个充满产品图像 URL 的 SQLite 数据库，我想做的是将云中的所有图像下载到我的桌​​面上以供本地使用。

是否可以运行 SQLite 选择，然后在 Mac OS X 的终端中，为每个具有图像的产品下载它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:46:56.923

这是在 Bash 中使用`sqlite3`and的方法`wget`：

```
for f in sqlite3 database.sqlite3 "SELECT image_column FROM image_table"
do
wget $f
done 
```

Bash 似乎是 Mac OS X 的“终端”使用的东西，所以它应该适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:57:41.053

BlaXpirit 是正确的，但结果是这样的..

```
LIST=`sqlite3 database.db "SELECT image_column FROM image_table"`
for ROW in $LIST
do
wget $ROW
done 
```

我认为问题要么是 BlaXpirit 的答案中缺少反引号，要么是我需要为连接定义一个变量，然后我可以循环遍历该变量。

为了检查 LIST 是否已被填充，我只是`echo $LIST;`在执行 for 循环以下载所有图像之前使用它来回显它。

# javascript - 获取矩形的旋转中心

> ID：11193442
> 
> 赞同：0
> 
> 时间：2012-06-25T16:36:40.727
> 
> 标签：javascript, html5-canvas, trigonometry

给定矩形的边界框、相对旋转中心和旋转角度，我需要找到矩形的绝对旋转中心。这是一张图片（我不介意有人改进它）： ![](../Images/6ea9a7fe03f4250847fff76b38733fa3.png) 我希望这足够清楚。我需要红点的 x 和 y 坐标。我已经为此工作了一段时间，但我对三角学的琐碎知识迷失了方向。：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T17:13:50.707

如果上面显示的旋转角度为`a`负，那么红点的坐标为：

```
rx = x + rcx*COS(a) - rcy*SIN(a)
ry = y - (w-rcx)*SIN(a) + rcy*COS(a) 
```

`SIN()`并记住在使用or之前将度数转换为弧度`COS()`。

示例：`(x,y)=(80,60)`,`(w,h)=(20,60)`和`a=-15°`, 与`(rcx,rcy)=(15,30)`

```
rx = 80 + 15*COS(-15°)-30*SIN(-15°)      = 102.25
ry = 60 - (20-15)*SIN(-15°)+30*COS(-15°) = 90.27 
```

这是 GeoGebra 的计算输出（带有负`y`轴）

![GeoGebra 输出](../Images/fb07be6a527f7d6a4feb9adc8f2ef4db.png)

# xml - 通过 XSLT 插入和删除元素的最佳实践

> ID：11193443
> 
> 赞同：3
> 
> 时间：2012-06-25T16:36:44.330
> 
> 标签：xml, xslt

我是 XSLT 的新手，现在我有一个相当复杂的问题......我的输入文件看起来像

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<doc>
  <outerElement>
    <first>
      <textElement>Some Text</textElement>
    </first>
    <second>
      <textElement>Some Text</textElement>
    </second>
    <third>
      <textElement>Some Text</textElement>
    </third>
  </outerElement>
</doc> 
```

“第二个”元素出现问题。在输入文件中，它可以是 3 种形式之一：

```
MISSING

<second>
  <textElement>Some Text</textElement>
</second>

<second missingCause="" /> 
```

在输出文件中，它应该像第二种形式一样插入。如果在 textElement 应该指示它是由模板插入之前它丢失了，这里重要的是它必须位于第二个位置，因为我想根据 xsd 模式验证它......

这是我当前的 XSL：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output indent="yes"/>
  <xsl:strip-space elements="*"/>

  <!-- COPY ALL ELEMENTS -->
  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <!-- remove Elements with attribute deleteme -->
  <xsl:template match="outerElement/second[@missingCause='*']" />

  <!-- look if second is there. If not insert -->
  <xsl:template match="outerElement">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
      <xsl:if test="not(second)">
        <second>
        </second>
      </xsl:if>
    </xsl:copy>    
  </xsl:template>

  <!-- Insert Element second -->
  <xsl:template match="outerElement/second">
    <xsl:apply-templates select="node()|@*"/>
    <xsl:copy>
      <xsl:if test="not(textElement)">
        <textElement>Inserted by Template</textElement>
      </xsl:if>
    </xsl:copy>    
  </xsl:template>

</xsl:stylesheet> 
```

如果缺少“第二个”，我的输出文件只会获得一个元素“”，但它是空的，并且最后一个转换不会被应用。当我在文档中收到警告时，其他一切看起来都很好...

有人可以帮我将元素移动到它必须在的位置，以便它验证到模式并使其在所有三种情况下都能正常工作吗？

我认为我的方式似乎不是很好，最终会变得混乱，因为我有几个类似的元素要像这样插入/删除。

谢谢阅读 ;）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T03:16:46.857

**这是一个通用解决方案，适用于任意数量的不同名称的子代`outerElement`以及它们之间的任何首选顺序**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common" exclude-result-prefixes="ext">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pUncertainElName" select="'second'"/>

 <xsl:param name="pOrderedNames" select="'|first|second|third|'"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="outerElement">
  <xsl:variable name="vrtfFirstPass">
      <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
       <xsl:apply-templates select=
         "self::*[not(*[name() = $pUncertainElName])
                or
                 *[name()=$pUncertainElName and @missing-cause]]"
         mode="missing"/>
      </xsl:copy>
  </xsl:variable>

  <xsl:apply-templates select="ext:node-set($vrtfFirstPass)/*" mode="pass2"/>
 </xsl:template>

 <xsl:template match="*[@missing-cause]"/>

 <xsl:template match="*" mode="missing">
    <xsl:element name="{$pUncertainElName}">
        <textElement>Some Text</textElement>
    </xsl:element>
 </xsl:template>

 <xsl:template match="outerElement" mode="pass2">
  <xsl:copy>
   <xsl:apply-templates>
     <xsl:sort data-type="number" select=
     "string-length(substring-before($pOrderedNames,
                                     concat('|', name(), '|')
                                     )
                   )"/>
   </xsl:apply-templates>
  </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<doc>
    <outerElement>
        <first>
            <textElement>Some Text</textElement>
        </first>
        <second missing-cause="">
            <textElement>Some Text</textElement>
        </second>
        <third>
            <textElement>Some Text</textElement>
        </third>
    </outerElement>
</doc> 
```

**产生了想要的正确结果：**

```
<doc>
   <outerElement>
      <first>
         <textElement>Some Text</textElement>
      </first>
      <second>
         <textElement>Some Text</textElement>
      </second>
      <third>
         <textElement>Some Text</textElement>
      </third>
   </outerElement>
</doc> 
```

**当它应用于此 XML 文档时**：

```
<doc>
    <outerElement>
        <first>
            <textElement>Some Text</textElement>
        </first>
        <third>
            <textElement>Some Text</textElement>
        </third>
    </outerElement>
</doc> 
```

**再次产生所需的正确结果**：

```
<doc>
   <outerElement>
      <first>
         <textElement>Some Text</textElement>
      </first>
      <second>
         <textElement>Some Text</textElement>
      </second>
      <third>
         <textElement>Some Text</textElement>
      </third>
   </outerElement>
</doc> 
```

**最后，当对这个 XML 文档应用相同的转换时：**

```
<doc>
    <outerElement>
        <first>
            <textElement>Some Text</textElement>
        </first>
        <second>
            <textElement>Some Text</textElement>
        </second>
        <third>
            <textElement>Some Text</textElement>
        </third>
    </outerElement>
</doc> 
```

**再次产生同样想要的正确结果：**

```
<doc>
   <outerElement>
      <first>
         <textElement>Some Text</textElement>
      </first>
      <second>
         <textElement>Some Text</textElement>
      </second>
      <third>
         <textElement>Some Text</textElement>
      </third>
   </outerElement>
</doc> 
```

**请注意**：

可以有任意数量的不同命名的孩子`outerElement`（不仅仅是三个），并且他们的顺序可能无法提前知道。

**例如**：

**鉴于此 XML 文档**：

```
<doc>
    <outerElement>
        <first>
            <textElement>Some Text</textElement>
        </first>
        <second missing-cause="">
            <textElement>Some Text</textElement>
        </second>
        <third>
            <textElement>Some Text</textElement>
        </third>
        <fourth>
            <textElement>Some Text</textElement>
        </fourth>
    </outerElement>
</doc> 
```

**这个顺序**：第四，第二，第三，第一

**我们只需要替换**：

```
 <xsl:param name="pOrderedNames" select="'|first|second|third|'"/> 
```

**与**：

```
 <xsl:param name="pOrderedNames" select="'|fourth|second|third|first|'"/> 
```

**现在产生了新的想要的结果**：

```
<doc>
   <outerElement>
      <fourth>
         <textElement>Some Text</textElement>
      </fourth>
      <second>
         <textElement>Some Text</textElement>
      </second>
      <third>
         <textElement>Some Text</textElement>
      </third>
      <first>
         <textElement>Some Text</textElement>
      </first>
   </outerElement>
</doc> 
```

**说明**：

1.  这是一个两遍转换。

2.  可能存在或不存在的元素的名称在外部/全局参数中指定`$pUncertainElName`。为了便于解释，我们将此元素称为`second`。

3.  On the first pass, all children of `outerElement` with the exception of `second` that has the `missing-cause` attribute, are copied "as-is". If the `second` element was absent or had the `missing-cause` attribute, we output a new child of `outerElement` -- the exactly wanted `second` element.

4.  In the second pass we sort the children of the `outerElement` produced in the first pass, according to their priority, as specified in another external/global parameter, named `$pOrderedNames` (a name that is left of another name in this string, has higher priority)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T17:29:38.593

我认为您误解了模板的工作原理。对于您需要完成的事情，似乎只需要一个模板（加上身份模板）。试用并反馈：

```
<xsl:template match="outerElement[not(second) or second[@missingCause='']]">
    <xsl:apply-templates select="@*|first"/>
    <second>
        <textElement>Inserted by Template</textElement>
    </second>
    <xsl:apply-templates select="third"/>
</xsl:template> 
```

# vba - 以编程方式形成对象名称

> ID：11193445
> 
> 赞同：3
> 
> 时间：2012-06-25T16:36:52.007
> 
> 标签：vba

假设我有几个 VBA 表单中的文本框，称为 Text1、Text2、Text3。我正在寻找一种方法来做类似的事情：

```
For i = 1 To 4 
 (Text&i).Text=i
Next 
```

这只是我想做的一个非常简单的例子。我希望能够在运行时以编程方式形成对象名称，然后对对象执行某些操作。在这个简单的例子中，我想要 Text1.Text=1，Text2.Text=2，Text3.Text=3。

有没有办法做这样的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T16:40:38.470

```
Me.Controls("Text" & i).Text 
```

# dll - Putty 中缺少 Cygint-2.dll 错误

> ID：11193447
> 
> 赞同：-1
> 
> 时间：2012-06-25T16:37:02.673
> 
> 标签：dll, cygwin, putty

我使用的是 Putty，而不是 Cygwin。我正在尝试与服务器建立无密码连接。我创建了一个公钥和私钥。当我尝试授予文件夹权限时，我收到以下消息：

```
$chmod 700 $Home /Users/Name/.ssh 
the program cannot start because cygintl-2.dll is missing 
```

我应该如何授予文件夹和文件以进行无密码自动身份验证的权限？

我需要这个功能吗？我把腻子和cygwin的知识混在一起了。我发现 cygwin 的设置非常复杂，并且害怕损坏我的系统。Putty 看起来很简单，但缺乏功能（即易用性）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:02:54.407

PuTTY 仅提供 SSH 连接的客户端。它不处理以下命令`chmod`：它只是接受您输入该命令的击键并将它们发送到服务器端，服务器端处理它们并通过 SSH 通道将输出发送回 SSH 客户端，在这种情况下是 PuTTY。

显然，您的 SSH 服务器是 Cygwin 的，并且您以某种方式破坏了您的 Cygwin 安装。在 Cygwin`setup.exe`中，完成设置顺序，直到进入“选择包”屏幕，然后在“搜索”框中键入“intl”。打开 Libs 部分，然后单击“libintl2”行上的第三列，直到显示重新安装。继续。

这应该可以解决这个特殊问题，但是如果你丢失了那个库，那么你也破坏了其他东西。可能需要完整的 Cygwin 重新安装。

# mysql - 如何确定mysql分区的数量

> ID：11193450
> 
> 赞同：3
> 
> 时间：2012-06-25T16:37:09.860
> 
> 标签：mysql, database, partitioning, mysql-management, database-performance

我有一个巨大的 mysql 表（用于记录）。就像是：

记录器（sha1）时间戳操作

所以预计会有大约 10 万个记录器。每个日志记录平均说 100 行。这将使表很快达到大约 1 亿行。

我需要快速完成插入（实际上是附加），因为许多记录器一次写入条目。

通常查询将是“给我所有来自记录器'x'的日志，按日期排序”。

所以我打算使用mysql分区：[http ://dev.mysql.com/doc/refman/5.1/en/partitioning.html](http://dev.mysql.com/doc/refman/5.1/en/partitioning.html)

我的问题是，如何找到分区数量和分区大小之间的平衡？

由于记录器是一个 UUID 并且是一个 sha1 编号，我想让 mysql 只为每个 sha1 值创建一个分区，所以基本上每个记录器都有自己的数据库表文件。

任何其他建议表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:56:56.690

将某物拆分为指定数字的一种简单方法是使用模数函数。

因此，也许如果您获取 SHA1 哈希的前 4 个十六进制字符，将它们转换为整数（最高为 65,025）和 mod 1024，如下所示：

```
aa00 % 1024 = 512 
```

十进制

```
43520 % 1024 = 512 
```

所有返回 512 的数字都可以放在同一个分区中。计算将产生从 0 到 1023 的值。

# javascript - 在没有jQuery的情况下查找滚动条的垂直位置

> ID：11193453
> 
> 赞同：23
> 
> 时间：2012-06-25T16:37:20.810
> 
> 标签：javascript

我试图找到滚动条的垂直位置一个类似于 jQuery 的 scrollTop() 但没有 jQuery 的函数。有没有其他选择？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-06-25T16:48:39.983

跨浏览器解决方案：

```
var supportPageOffset = window.pageXOffset !== undefined;
var isCSS1Compat = ((document.compatMode || "") === "CSS1Compat");

var scrollLeft = supportPageOffset ? window.pageXOffset : isCSS1Compat ? document.documentElement.scrollLeft : document.body.scrollLeft;
var scrollTop = supportPageOffset ? window.pageYOffset : isCSS1Compat ? document.documentElement.scrollTop : document.body.scrollTop; 
```

^([**来源**](https://developer.mozilla.org/en/DOM/window.scrollY#Notes))

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-25T16:40:22.057

是的，滚动位置存在于 DOM 中：

```
window.scrollY;  //for vertical scroll. 
```

我是怎么发现的：

> 1.  在 Chrome 中，右键单击并选择检查元素。
> 2.  找到并单击“显示控制台”按钮（左下角）
> 3.  在控制台中键入 window.scroll 以查看选项。

- 这是一个解决大量 JavaScript 问题的特殊工作流程。

**我将 window.scrollTo(0) 视为滚动到顶部的选项。**

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-25T16:39:55.267

scrollX 和 scrollY.... scrollY 相当于 jquery`scrollTop()`

# jquery - 设置对话框的最大高度，然后允许滚动

> ID：11193455
> 
> 赞同：5
> 
> 时间：2012-06-25T16:37:29.567
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我似乎无法理解如何为 jquery ui 对话框正确设置高度。

我希望它显示存在多少内容的高度，但如果它超过 400 像素，那么我想要一个滚动条。

因此，如果内容的高度为 200 像素，则对话框的高度应为 200 像素。

如果内容的高度大于 400 像素，则对话框不应扩展超过 400 像素，并且应该可以看到滚动条。

到目前为止我有这个：

```
$("#popup").dialog({
            modal: true,
            autoOpen: false

}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T16:42:54.267

```
$("#popup").dialog({
            modal: true,
            autoOpen: false
}); 
```

css

```
#popup {
 border: 1px solid #ccc;
 border-radius: 4px;
 padding: 10px;
 overflow: auto;
 max-height: 300px;   
}​ 
```

[工作小提琴](http://jsfiddle.net/JNKPB/1/)

**编辑**更新了小提琴并调整了代码，使其可以正常工作。不知道为什么，jQuery UI 对话框`maxHeight`似乎没有做它应该做的事情。我刚刚将最大高度部分添加到 CSS 中，一切都很好。

# javascript - 在数组中的一组标识符中组合 2 个值

> ID：11193462
> 
> 赞同：0
> 
> 时间：2012-06-25T16:37:55.763
> 
> 标签：javascript, arrays

我知道如何在 PHP 中做到这一点，但我正在处理一个 javascript 数组，这给我带来了很多麻烦。

我有一个总是这样设置的数组：

```
array[0] => Keyword
array[1] => String 1
array[2] => String 2
array[3] => String 3
array[4] => Keyword
array[5] => String 4
array[6] => String 5
array[7] => Keyword 
```

现在这可以持续一段时间，所以我的问题是如何自动解析这个数组，使其不再包含关键字并组合关键字中的值，即：字符串 1+2+3 是 1 个整个字符串，而字符串 4 +5 是一整串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:54:09.820

如果字符串中不存在关键字，则可以使用

```
array.join("").split("Keyword") 
```

（也必须去掉可能的空的第一个和最后一个元素）否则，如果你能找到字符串或关键字中不存在的两个字符，例如`#`and `%`，你可以这样做：

```
array.join("#").replace(/(^|#)Keyword(#|$)/g, "%").replace(/#/g, "").split("%") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:17:18.560

```
function transformArr(inputArr) {
    var resultArr = [];
    var buildString = "";
    for (i = 0; i < inputArr.length; i++) {
        if (inputArr[i] == 'Keyword') {
            if (buildString != "") {
                resultArr.push(buildString);
                buildString = "";
            }
        } else {
            buildString += inputArr[i];
        }
    }
    if (buildString != "") {
        resultArr.push(buildString);
    }
    return resultArr;
}
array = [];
array[0] = 'Keyword';
array[1] = 'String 1';
array[2] = 'String 2';
array[3] = 'String 3';
array[4] = 'Keyword';
array[5] = 'String 4';
array[6] = 'String 5';
array[7] = 'Keyword';

var result = transformArr(array);
console.log(result); 
```

# c - 通过蓝牙向提供串行端口配置文件的设备发送命令

> ID：11193464
> 
> 赞同：-1
> 
> 时间：2012-06-25T16:38:03.793
> 
> 标签：c, bluetooth

我正在尝试用 C 开发一个应用程序，它应该向设备发送一些命令，以使其通过蓝牙发送一些以前存储的数据。我从 windows SDK 得到了一个例子，并试图改变它。

例如要关闭设备，命令应该是这样的：

```
 const char Cmd_Shutdown[]=  {0xFC,00,0xFF,00,0xcf,0x63,0xFD}; 
```

我不知道为什么，但它不起作用。这些十六进制数中的每一个都必须是一个字节。

我试着这样发送：

```
 SOCKET_ERROR == send(LocalSocket,
                      Cmd_Shutdown,
                      sizeof(Cmd_Shutdown),
                      0) ) 
```

FC 和 FD 是开始和停止字节，cf63 是 crc 结果。

请问谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:59:08.063

难道是你有错误的字节顺序？尝试以反向字节序发送命令。

# ruby - 在 Sinatra 上本地测试 HTTPS

> ID：11193465
> 
> 赞同：7
> 
> 时间：2012-06-25T16:38:05.237
> 
> 标签：ruby, sinatra, thin

当我通过 HTTPS 访问页面时，我需要测试页面上某些元素的行为 - 我想知道如何使用 HTTPS 在本地测试这个 sinatra 应用程序。如果我的问题甚至没有意义，我深表歉意，但我想通过我的网络浏览器通过 HTTPS 连接到 localhost。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T17:28:09.920

简短回答：您可以为本地开发创建自签名证书。[Heroku 有一篇关于如何创建自签名 SSL 证书](https://devcenter.heroku.com/articles/ssl-certificate-self)的简短文章。

创建证书和密钥后，使用 Thin 非常简单：

```
SSL options:
    --ssl                        Enables SSL
    --ssl-key-file PATH          Path to private key
    --ssl-cert-file PATH         Path to certificate
    --ssl-verify                 Enables SSL certificate verification 
```

# sh - "echo -n" 打印 "-n"

> ID：11193466
> 
> 赞同：623
> 
> 时间：2012-06-25T16:38:14.947
> 
> 标签：sh

`echo`我的脚本有问题：

```
echo -n "Some string..." 
```

印刷

```
-n Some string... 
```

并移动到下一行。在控制台中，它可以在没有换行符的情况下正常工作：

```
Some string... 
```

* * *

## 回答 #1

> 赞同：670
> 
> 时间：2012-06-25T16:42:33.530

该命令有多个版本`echo`，具有不同的行为。显然，用于您的脚本的 shell 使用了无法识别的版本`-n`。

该`printf`命令具有更加一致的行为。`echo`适合简单的事情，例如`echo hello`，但我建议`printf`用于更复杂的事情。

你在什么系统上，你的脚本使用什么外壳？

* * *

## 回答 #2

> 赞同：180
> 
> 时间：2012-06-28T18:28:40.983

`bash`有一个名为“echo”的“内置”命令：

```
$ type echo
echo is a shell builtin 
```

此外，还有一个“echo”命令是一个正确的可执行文件（即 shell forks 和 execs `/bin/echo`，而不是解释`echo`和执行它）：

```
$ ls -l /bin/echo
-rwxr-xr-x 1 root root 22856 Jul 21  2011 /bin/echo 
```

任何一个 的行为`echo`相对于`\c`和`-n`变化。您最好的选择是使用`printf`，它可用于我查看的四种不同的 *NIX 风格：

```
$ printf "a line without trailing linefeed"
$ printf "a line with trailing linefeed\n" 
```

* * *

## 回答 #3

> 赞同：101
> 
> 时间：2012-06-25T16:44:52.953

尝试

```
echo -e "Some string...\c" 
```

它按预期对我有用（正如我从你的问题中理解的那样）。

请注意，我从`man`页面中获得了此信息。该`man`页面还指出外壳可能有自己的版本`echo`，我不确定是否`bash`有自己的版本。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2019-11-25T19:19:46.573

为了实现这一点，我经常使用两种方法：

**1.**使用***光标***转义字符 ( `\c`)`echo -e`

*示例*：

```
for i in {0..10..2}; do
  echo -e "$i \c"              
done
# 0 2 4 6 8 10 
```

*   `-e`flag 启用字符串中的**E**转义字符。
*   `\c`使**光标**回到当前行。

***或者***

**2.**使用`printf`命令

*示例*：

```
for ((i = 0; i < 5; ++i)); do
  printf "$i "
done
# 0 1 2 3 4 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-08-07T20:20:03.700

如果您在*if中使用**echo*和其他命令，例如“read”，它可能会忽略该设置，并且无论如何它都会跳转到新行。

 ** * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-05-22T01:45:07.920

仅针对[最流行的 Linux 发行](https://www.zdnet.com/article/whats-the-most-popular-linux-of-them-all/)版[Ubuntu](https://en.wikipedia.org/wiki/Ubuntu_%28operating_system%29)及其 Bash：

1.  检查您使用的是哪个外壳。大多数情况下，以下工作，否则[请参见](https://stackoverflow.com/questions/3349370/how-to-tell-which-unix-shell-i-am-using)：

    `echo $0`

2.  如果上面打印`bash`，那么以下将起作用：

    `printf "hello with no new line printed at end"`

    或者

    `echo -n "hello with no new line printed at end"`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-03-16T09:29:01.583

```
enable -n echo
echo -n "Some string..." 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-06-18T17:15:33.440

请注意，[AIX](https://en.wikipedia.org/wiki/IBM_AIX)上的*/usr/bin/echo*和*/bin/echo*不支持任何参数，因此如果使用 sh 或[KornShell](https://en.wikipedia.org/wiki/KornShell) ( ) shell ， *-n*和*-e都不起作用。***`ksh`**

 ***[C shell](https://en.wikipedia.org/wiki/C_shell)*和[Bash](https://en.wikipedia.org/wiki/Bash_%28Unix_shell%29)有自己的内置*echo*支持*-n*。
这是相关的，因为许多 shell 脚本明确使用*sh*或 KornShell。

AIX 确实有*/usr/bin/printf*，因此正如一些较早的答案中所建议的，

```
$ printf "whatever" 
```

相当于支持*-n*`echo -n "whatever"`的地方。

 ** * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-11-25T09:26:18.433

我相信现在您的输出打印如下

```
~ echo -e "String1\nString2"
String1
String2 
```

您可以使用[xargs](https://en.wikipedia.org/wiki/Xargs)将多行标准输出放入同一行。

```
 ~ echo -e "String1\nString2" | xargs
String1 String2

 ~ 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-05-24T12:09:02.040

当你去编写你的 shell 脚本时，总是使用`#!/usr/bin/env bash`作为第一行。

该外壳不会省略或操作转义序列。

例子：

```
echo "This is first \\n line" 
```

印刷

```
This is first \n line. 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-07-26T17:07:24.213

我在 IBM [z/OS](https://en.wikipedia.org/wiki/Z/OS)中遇到了同样的问题，所以我使用***print***而不是***echo***，并且它有效。

```
print -n "Some string ...." 
```

*[print — 从 shell 返回参数](https://www.ibm.com/docs/en/zos/2.2.0?topic=descriptions-print-return-arguments-from-shell)*****

# git - Git + Smart HTTP 问题（不能推/拉）

> ID：11193479
> 
> 赞同：3
> 
> 时间：2012-06-25T16:39:03.390
> 
> 标签：git

我已经使用 SVN 多年，但我想第一次测试 Git。

我尝试使用 HTTP 协议来保留我以前的凭据（使用`htpasswd`）。

我在我的服务器上遵循了这个过程：

```
$ aptitude install git-core apache2
$ mkdir -p /var/git/repositories
$ htpasswd -c /var/git/passwd my_account
$ cat > /etc/apache2/sites-available/git << EOF
<VirtualHost *:80>
    ServerName git.mydomain.com

    SetEnv GIT_PROJECT_ROOT /var/git/repositories
    SetEnv GIT_HTTP_EXPORT_ALL
    SetEnv REMOTE_USER=$REDIRECT_REMOTE_USER

    ScriptAlias / /usr/lib/git-core/git-http-backend/

    DocumentRoot /var/git/repositories

    <Directory /var/git/repositories>
        Options +ExecCGI +SymLinksIfOwnerMatch -MultiViews
        AllowOverride None
        Order allow,deny
        allow from all
    </Directory>

    <Location />
        AuthType Basic
        AuthName "Git Access"
        AuthUserFile /var/git/passwd
        Require valid-user
    </Location>
</VirtualHost>
EOF 
```

* * *

```
$ a2ensite git
$ service apache2 reload

$ cd /var/git/repositories
$ git init --bare my_project.git
$ git update-server-info 
```

在我的客户上，我这样做：

```
$ git clone http://git.mydomain.com/my_project.git
$ cd my_project
$ cat > test-file.txt << EOF
This is a test
EOF
$ git add test-file.txt
$ git commit -m "My first commit" 
```

目前一切似乎都还好。

因为我希望我的内容由我的远程存储库更新，所以我这样做了`git pull`，但这不起作用。Git 返回以下消息：

> 您的配置指定与远程的 ref 'master' 合并，但没有获取这样的 ref。

无论如何，我一个人在我的代码上。我稍后会尝试修复它。让我们尝试推送到服务器。

所以我愿意`git push`。

> 没有共同的参考文献，也没有指定；什么也不做。
> 也许您应该指定一个分支，例如“master”。
> 一切都是最新的

好吧...... *“什么都不做”*但*“一切都是最新的”*？

经过一番检查，我找到并执行了以下命令：`git push origin master` 这次我有以下消息：

> error: unpack failed: unpack-objects 异常退出
> 到[http://git.mydomain.com/my_project.git](http://git.mydomain.com/my_project.git)
> ！[远程拒绝] master -> master (n/a (unpacker error))
> 错误：未能将一些参考推送到“http://git.mydomain.com/my_project.git”

我尝试在网上遵循许多教程。

我认为我的配置很简单，所以我不明白为什么它不起作用。

感谢任何可以帮助我的人。

**编辑 ：**

[我按照http://www.kernel.org/pub/software/scm/git/docs/git-http-backend.html](http://www.kernel.org/pub/software/scm/git/docs/git-http-backend.html)从头开始

我不需要 gitweb。我只想在 Git 客户端上使用 HTTP 协议。

所以我的虚拟主机是：

```
<VirtualHost *:80>
    ServerName git.mydomain.com

    SetEnv GIT_PROJECT_ROOT /var/git/repositories
    SetEnv GIT_HTTP_EXPORT_ALL
    SetEnv REMOTE_USER=$REDIRECT_REMOTE_USER

    ScriptAlias / /usr/lib/git-core/git-http-backend/

    DocumentRoot /var/git/repositories

    <Location />
        AuthType Basic
        AuthName "Git Access"
        AuthUserFile /var/git/passwd
        Require valid-user
    </Location>

</VirtualHost> 
```

我有完全相同的错误。

`git pull`返回：

> 您的配置指定与远程的 ref 'master' 合并，但没有获取这样的 ref。

并`git push origin master`返回：

> error: unpack failed: unpack-objects 异常退出到[http://git.mydomain.com/my_project.git](http://git.mydomain.com/my_project.git) ！[远程拒绝] master -> master (n/a (unpacker error)) 错误：未能将一些参考推送到“http://git.mydomain.com/my_project.git”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T05:19:58.720

我不知道这是否是答案，但我记得我有类似的问题，因为我没有安装 cgi。所以我会以 root 或 sudo 的身份安装依赖项。（我知道我用这个建议打败了一匹死马。）在 debian 堆栈上的前：

```
#!/bin/sh

apt-get install git-core
apt-get install curl-ssl
a2enmod cgi
a2enmod alias
a2enmod env 
```

您可能缺少 apache cgi 模块。从理论上讲，您的 apache cfg 文件看起来不错，但我也会尝试将这些脚本别名更改为实际名称，而不是使用 root 来确保服务器没有做任何疯狂的事情。但我和你在一起。我正在尝试让 Smart GIT HTTP 在 ubuntu 服务器上工作。我在 Debian 上运行它，但以前的 Apache 重写规则正在重定向 url。

我也不会使用`git init --bare`. 我至少会创建一个 README 文件，以便 git 可以创建一个 HEAD。然后使用`git init`，因为 GIT 已经标准化放置一个 .git/ 文件夹来保存信息。git init --bare 不这样做。使用 git log 查看更改。例如这样做：

```
#!/bin/sh

echo >> '' README
git init
git add .
git commit
git log --oneline --decorate --graph 
```

# php - Python从与gmail地址不同的地址发送电子邮件

> ID：11193482
> 
> 赞同：7
> 
> 时间：2012-06-25T16:39:23.117
> 
> 标签：php, python, email, smtp

我试图让一封电子邮件看起来像是来自我们公司内的特定用户，用于自动发送客户跟进电子邮件。出于某种原因，我无法将“FROM”更改为看起来像任何人，但我登录 gmail 的帐户除外。

我知道 PHP 邮件程序库可以毫无问题地从任何人那里生成 FROM 地址 - 但由于某种原因我不能在 python 中。如果有帮助，我们有一个企业 gmail 帐户。

这是我正在使用的代码

```
import smtplib
from email.mime.multipart import MIMEMultipart
from email.mime.text import MIMEText
from email.MIMEImage import MIMEImage

def sendFollowupEmail(html):
  msg = MimeText('body')
  msg['Subject'] = 'subject'
  msg['From'] = "THIS IS THE EMAIL I WANT TO CHANGE@domain.com"
  msg['To'] = "client@client.com"

  username = 'accessaccount@gmail.com'
  password = 'password'
  server = smtplib.SMTP('smtp.gmail.com:587')
  server.starttls()
  server.login(username,password)  
  server.sendmail(me, you, msg.as_string())
  server.quit()    

  if __name__ == '__main__':
    sendFollowupEmail("test123") 
```

这是允许您从地址更改为您想要的任何内容的 PHP

```
function sendFollowUpEmail($options) {

        /*
         * Send an email to a person or group.
         * Dependencies: PHPMailer
         * options: {
         *      'to' -> who to send the email to,
         *      'from'-> who the email was sent from,
         *      'subject'-> subject of the email,
         *      'body' -> the body of the email
         * }
         */
        $host = 'smtp.gmail.com';
        $username = "accessaccount@gmail.com";
        $password = "password";
        $port = 465;
        echo error_reporting(E_STRICT);

        require_once('PHPMailer/class.phpmailer.php');
        $mail = new PHPMailer();
        $body = $options['body'];

        $mail->IsSMTP();
        $mail->IsHTML(true);

        $mail->SMTPAuth = true;
        $mail->SMTPSecure = "ssl"; 
        $mail->Host = $host; 
        $mail->Port = $port;
        $mail->Username = $username; 
        $mail->Password = $password;
        $mail->SetFrom($options['from'], $options['from']);

        if($options['bcc']!='') {
            $mail->AddBCC($options['bcc'], $options['bcc']);
        }

        //$mail->AddReplyTo("name@yourdomain.com","First Last");
        $mail->Subject = $options['subject'];
        $mail->AltBody = "To view the message, please use an HTML compatible email viewer!";
        $mail->MsgHTML($body);
        $address = $options['to'];
        $mail->AddAddress($address);
        $mail->send(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T17:02:37.173

添加到味精

```
msg['Reply-To'] = "THIS IS THE EMAIL I WANT TO CHANGE@domain.com" 
```

**编辑**

您可以做的一件事是在您的***帐户中添加返回电子邮件并***在 gmail 中导入。并选择它不作为别名。这将允许您从您的主帐户作为另一个帐户发送电子邮件。使用另一个帐户的发件人地址

# java - SimpleDateFormat 总是返回相同的结果

> ID：11193484
> 
> 赞同：0
> 
> 时间：2012-06-25T16:39:28.953
> 
> 标签：java, date, simpledateformat

我有一个奇怪的问题。我有这个方法，它应该从目录的名称中生成一个日期。

```
private Date getSubfolderDate(File file) {
    String name = file.getName();
    SimpleDateFormat parser = new SimpleDateFormat("dd-MM-YY");
    Date date;
    try {
        date = parser.parse(name);
    } catch (ParseException e) {
        return null;
    }
    return date;
} 
```

它返回 String name = "17-06-12": "Mon Jan 02 00:00:00 CET 2012"

对于字符串名称 = "18-06-12": "Mon Jan 02 00:00:00 CET 2012"

为什么？

后来我将这些与 compareTo(Date xy) 进行比较，它返回 0，所以它必须相同.....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T16:40:52.853

您的格式也应该是不正确`dd-MM-yy`的（对于 17-06-12），要追查问题，请检查 catch 块`printStackTrace()`

**还**

`SimpleDateFormat`从字符串中解析日期，结果日期将调用具有固定格式的 toString()

因此，如果您希望再次打印格式化日期，则需要使用`simpleDateFormat.format(dateInstance)`

`Date`类没有任何属性来保存要打印的格式`toString()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T16:48:26.307

我试过这段代码：

```
static Date getSubfolderDate(File file) {
  String name = file.getName();
  SimpleDateFormat parser = new SimpleDateFormat("dd-MM-yy");
  Date date;
  try {
    date = parser.parse(name);
  } catch (ParseException e) {
    return null;
  }
  return date;
}
public static void main(String[] args) {
  System.out.println(getSubfolderDate(new File("17-06-12")));
  System.out.println(getSubfolderDate(new File("18-06-12")));
} 
```

它打印

```
Sun Jun 17 00:00:00 CEST 2012
Mon Jun 18 00:00:00 CEST 2012 
```

# iphone - 在 CVPixelBufferGetBaseAddress() 读取缓冲区时，我得到以前的渲染图像（不是当前图像）

> ID：11193488
> 
> 赞同：0
> 
> 时间：2012-06-25T16:39:38.590
> 
> 标签：iphone, ios5, opengl-es-2.0

现在我正在开发针对 iOS4.1 或更高版本的图像处理应用程序。

我想在 iOS5 上运行应用程序时使用 CVOpenGLESTextureCache。

我通过以下代码创建纹理缓存

```
NSDictionary *empty = [NSDictionary dictionary];
NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                        [NSNumber numberWithBool:NO], kCVPixelBufferCGImageCompatibilityKey,
                        [NSNumber numberWithBool:NO], kCVPixelBufferCGBitmapContextCompatibilityKey,
                        empty, kCVPixelBufferIOSurfacePropertiesKey,
                        nil];
CVPixelBufferCreate(kCFAllocatorDefault, texSize_.width, texSize_.height, kCVPixelFormatType_32BGRA, (CFDictionaryRef)options, &renderTarget);
CVOpenGLESTextureCacheCreateTextureFromImage (kCFAllocatorDefault,
                                   filterTextureCache, renderTarget,
                                   NULL, // texture attributes
                                   GL_TEXTURE_2D,
                                   GL_RGBA, // opengl format
                                   (int)texSize_.width, 
                                   (int)texSize_.height,
                                   GL_BGRA, // native iOS format
                                   GL_UNSIGNED_BYTE,
                                   0,
                                   &renderTexture);
texID_ = CVOpenGLESTextureGetName(renderTexture); 
```

并通过标准方法（glFrameBufferTexture2D 和 glDrawArray）将一些元素渲染到创建的纹理。

之后，我尝试读取 CVPixelBuffer 并创建图像。

```
- (UIImage *)imageFromTextureCache {
    if (renderTarget) {
        if (kCVReturnSuccess == CVPixelBufferLockBaseAddress(renderTarget,
                                                             kCVPixelBufferLock_ReadOnly)) {
            uint8_t* pixels=(uint8_t*)CVPixelBufferGetBaseAddress(renderTarget);

            CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, pixels, CVPixelBufferGetDataSize(renderTarget), bufferFree);
            CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB();
            CGImageRef imageRef = CGImageCreate(texSize_.width, texSize_.height, 8, 32, 4 * texSize_.width, colorSpaceRef, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst, provider, NULL, NO, kCGRenderingIntentDefault);
            CGImageRef cloppedImageRef = imageRef;
            if (!CGSizeEqualToSize(CGSizeMake(1.0, 1.0), contentRatio_)) {
                cloppedImageRef = CGImageCreateWithImageInRect(imageRef, CGRectMake(0, 0, texSize_.width * contentRatio_.width, texSize_.height * contentRatio_.height));
            }

            UIImage *image = [UIImage imageWithCGImage:cloppedImageRef];

            if (!CGSizeEqualToSize(CGSizeMake(1.0, 1.0), contentRatio_)) {
                CGImageRelease(cloppedImageRef);
            }
            CGColorSpaceRelease(colorSpaceRef);
            CGDataProviderRelease(provider);
            CVPixelBufferUnlockBaseAddress(renderTarget, kCVPixelBufferLock_ReadOnly);
            return image;
        }
        return nil;
    }
    return nil;
} 
```

和

```
UIImage *image = [outputTexture_ imageFromTextureCache]; 
```

然后我得到了以前的渲染图像。不是当前的。

但我修改了如下代码以获得当前渲染图像。

```
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, texID, 0);
GLubyte *buffer = (GLubyte *)calloc(sizeof(GLubyte), 1);
glReadPixels(0, 0, 1, 1, GL_RGBA, GL_UNSIGNED_BYTE, buffer);

UIImage *image = [outputTexture_ imageFromTextureCache]; 
```

我不明白会发生什么。而且我找不到任何有关这方面的文件。

有人帮助我吗？

对不起我的廉价英语......谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:04:44.460

直接从与纹理缓存关联的纹理读取时，不能保证您对该纹理执行的任何 OpenGL ES 渲染在您读取这些字节时都已完成。使用时看到正确的当前帧的原因`glReadPixels()`是它会阻塞直到渲染完成。

为保证在读取纹理之前所有渲染都已完成，您可以`glFinish()`在读取纹理数据之前进行调用。这将阻塞，直到所有渲染完成。对于视频，您可以使用一些技巧来实现惊人的效果，`glFlush()`并`glFinish()`要求性能稍好一些，但在您的情况下，一个简单`glFinish()`的技巧应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T06:03:11.433

是的，在访问缓冲区之前使用 glFlush，在访问之后使用 glFinish。我有同样的问题

[http://www.khronos.org/opengles/sdk/1.1/docs/man/glFlush.xml](http://www.khronos.org/opengles/sdk/1.1/docs/man/glFlush.xml)

# c# - 将单击事件添加到多个链接按钮

> ID：11193489
> 
> 赞同：0
> 
> 时间：2012-06-25T16:39:39.133
> 
> 标签：c#, asp.net

我看过其他帖子，但没有任何解释我想做的很好。

在运行时，我有 x 数量的 LinkBut​​tons 通过转发器添加到表单中，具体取决于它从数据库中检索到的数据：

```
<asp:Repeater ID="variantRepeat" runat="server" 
    onitemcommand="variantRepeat_ItemCommand">
    <HeaderTemplate><ul></HeaderTemplate>
    <ItemTemplate><li><asp:LinkButton ID="varLink" runat="server" CommandName="Click" CommandArgument='<%# Eval("variantID") %>'><%# Eval ("variant_name") %></asp:LinkButton></li></ItemTemplate>
    <FooterTemplate></ul></FooterTemplate>
</asp:Repeater> 
```

应该是，当点击后台事件的火时

```
 protected void varLink_Click(object sender, EventArgs e)
    {
        ViewCollection views = prodView.Views;
    } 
```

然后设置一些视图。但是，我需要通过 CommandArgument，因为它拥有在`prodView.Views`.

不一定要`variantID`通过，但可以是和 Int 取决于哪个，只需要一些关于要显示什么视图的指示！

我在页面初始化时创建了所有视图，并在初始化时动态添加到页面中。

我使用实体框架通过几个视图查询数据库！（发现从关系数据库中获取复杂数据更容易！）

我不知道如何链接所有这些 LinkBut​​ton，以便我可以以编程方式切换视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:44:18.390

下面是更详细的代码：

ASPX：

```
<asp:TextBox runat="server" ID="txtVariant" /> 

<asp:Repeater ID="variantRepeat" runat="server" 
    OnItemCommand="variantRepeat_ItemCommand">
    <HeaderTemplate><ul></HeaderTemplate>
    <ItemTemplate>
        <li>
            <asp:LinkButton ID="varLink" runat="server" CommandName="Click" 
                CommandArgument='<%# Eval("variantID") %>'>
                <%# Eval ("variant_name") %></asp:LinkButton>
            </li>
        </ItemTemplate>
    <FooterTemplate></ul></FooterTemplate>
</asp:Repeater> 
```

后面的代码：

```
[Serializable]
public class Variant
{
    public Variant() { }
    public int variantID { get; set; }
    public string variant_name { get; set; }
}

public partial class _Default : System.Web.UI.Page
{

    public Variant[] Variants
    {
        get
        {
            if (ViewState["Variants"] == null)
                return new Variant[] { };
            return (Variant[])ViewState["Variants"];
        }
        set { ViewState["Variants"] = value; }
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            Variants = new Variant[] { 
                new Variant() { variantID = 1, variant_name = "T1" },
                new Variant() { variantID = 2, variant_name = "T2" }
            };
            variantRepeat.DataSource = Variants;
            variantRepeat.DataBind();
        }
    }

    protected void variantRepeat_ItemCommand(object source, RepeaterCommandEventArgs e)
    {
        switch (e.CommandName)
        {
            case "Click":
                var variant = Variants.FirstOrDefault(v => v.variantID.ToString() == e.CommandArgument.ToString());
                if (variant != null)
                {
                    txtVariant.Text = variant.variantID.ToString();
                    // show the right view
                }
                break;
        }
    }
} 
```

该代码使用 ViewState 作为存储容器，但您也可以使用 Session。

# c# - 如何在gridview中启用和禁用超链接？

> ID：11193490
> 
> 赞同：1
> 
> 时间：2012-06-25T16:39:40.010
> 
> 标签：c#, asp.net, gridview, itemtemplate, templatefield

我在模板字段中有一个超链接。我想根据其值启用和禁用超链接。假设我`Id`是否`"ABC"`要禁用超链接。我尝试了下面的代码，但它对我不起作用。

```
Enabled='<%# Convert.ToString(Eval("Id"))!= "ABC" ? true: false %>' 
```

我在后面的代码中尝试了以下内容：

```
protected void gridResult_RowDataBound(object sender, GridViewRowEventArgs e) { 
    if (e.Row.RowType == DataControlRowType.DataRow)
    {  
        HyperLink status = (HyperLink)e.Row.Cells[2].Controls[0];
        if (status != null && status.Text == "ABC") {
            status.Enabled = false; 
        }
    }
} 
```

但它`null`每次都回来了。

```
 <asp:TemplateField HeaderText="Id">
                        <ItemTemplate>
                            <% if ( WebApp.Common.Auth.Admin() ) { %>
                                <a href="../../Edit/Default.aspx?<%= WebApp.Edit.Default.P_ID %>=<%# DataBinder.Eval(Container.DataItem, "Id") %>&amp;r=<%= buildPostBackPortion() %>"><%# DataBinder.Eval(Container.DataItem, "Id") %> Enabled='<%# Convert.ToString(Eval("Id"))!= "ABC" ? true: false %>'
</a>
                            <% } else { %>
                                <%# DataBinder.Eval(Container.DataItem, "Id") %>
                            <% } %>
                        </ItemTemplate>
                        </asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:17:03.273

当我需要按照您的描述做某事时，我使用以下内容：

ASPX：

```
<asp:TemplateField HeaderStyle-CssClass="cell-action"  ItemStyle-CssClass="cell-action">
    <ItemTemplate>
        <asp:HyperLink ID="viewHyperLink" runat="server" Text="View" />
        <asp:Label ID="messageLabel" runat="server" />
    </ItemTemplate>
</asp:TemplateField> 
```

C＃：

```
protected void reportedIssuesGridView_RowDataBound(object sender, System.Web.UI.WebControls.GridViewRowEventArgs e)
{
    RowDataType row;
    HyperLink viewHyperLink;
    Label messageLabel;

    if (e.Row.RowType == DataControlRowType.DataRow && e.Row.DataItem is RowDataType) {
        row = (RowDataType)e.Row.DataItem;
        viewHyperLink = (HyperLink)e.Row.FindControl("viewHyperLink");  //Gets the HyperLink
        messageLabel = (Label)e.Row.FindControl("messageLabel");    //Gets the Label
        if (row.Id != "ABC")
        {
            viewHyperLink.Visible = true;
            viewHyperLink.NavigateUrl = "~/Edit/Default.aspx?P_ID" + row.Id;

            messageLabel.Visible = false;

        }
        else
        {
            viewHyperLink.Visible = true;

            messageLabel.Visible = true;
            messageLabel.Text = row.Id;
        }
    }
} 
```

where`RowDataType`是行数据类型的名称。

如果您需要更多帮助或有更多问题，请询问。如果这解决了您的问题，请接受。
仅供参考：25% 的接受率真的很糟糕。您应该尝试通过接受答案来解决这个问题。

**更新**：更改代码以使用 messageLabel。

# java - 如何在flex中使用自定义java异常？

> ID：11193497
> 
> 赞同：0
> 
> 时间：2012-06-25T16:40:02.547
> 
> 标签：java, apache-flex, exception, blazeds

我有几个用 Java 创建的自定义异常。我已经使用 BlazeDs 将 java 与 Flex 连接起来。现在我需要在 Flex 中使用这些自定义异常。我怎样才能做到这一点？事实上，我正在尝试调用 java 中的方法，在 Flex 中抛出那些自定义异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T02:47:01.987

如果您在 Java 中创建的自定义异常扩展了 RunTimeException 类，那么您可以简单地从您的 java 端代码中抛出它们。他们将点击相关的故障处理程序。您可以查看以下内容：[Link1](http://cornelcreanga.com/2010/05/java-exceptions-and-flex/)和[Link2](http://sujitreddyg.wordpress.com/2008/02/12/handling-java-exceptions-in-flex-application/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:55:59.970

通常在进行远程调用时，您会侦听`ResultEvent`s，其中包含服务发送的数据。但是，如果服务器抛出一个错误，这将导致一个[FaultEvent](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/rpc/events/FaultEvent.html)被调度。该事件包含原始 Java 异常的信息。

例如，我们可以这样调用服务：

```
var token:AsyncToken = myRemoteObject.myMethod();
token.addResponder(new Responder(handleResult, handleFault));

private function handleFault(event:FaultEvent):Function {
    trace(event.fault.rootCause);
} 
```

# python - 类外的 Python 调用方法

> ID：11193498
> 
> 赞同：0
> 
> 时间：2012-06-25T16:40:06.207
> 
> 标签：python, quantlib

我来自 ruby​​/C#，是 Python 的新手。

我正在查看以下代码：

```
def raiseFlag():
    global flag
    flag = 1

class TermStructureTest():

    def testImpliedObs(self):
        global flag
        flag = None
        h = RelinkableYieldTermStructureHandle()
        settlement = self.termStructure.referenceDate()
        new_settlement = self.calendar.advance(settlement,3,Years)
        implied = ImpliedTermStructure(h,new_settlement)
        obs = Observer(raiseFlag)
        obs.registerWith(implied)
        h.linkTo(self.termStructure)
        if not flag:
            self.fail("Observer was not notified of term structure change") 
```

为什么在 TermStructureTest() 类中调用“raiseFlag”有效？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T16:42:31.847

在顶层定义的函数被称为在模块（文件）级别定义。因此，如果您在同一个文件中，则它可以全局访问。

如果您在其他文件中，则需要

```
import foo #then use foo.raiseFlag() 
```

或者

```
from foo import raiseFlag #use raiseFlag() 
```

# css - div 标签不会居中？

> ID：11193503
> 
> 赞同：0
> 
> 时间：2012-06-25T16:40:21.713
> 
> 标签：css, center

在进行编码时，我试图在屏幕滚动并居中时修复我的 div“保持”。我在其中有 div，其中是徽标和导航，当它滚动时它们都将在页面下方显示。

出于某种原因，在尝试了一切之后，我无法让 div“保持”在页面上居中。

```
#hold {
width: 900px;
height: 100px;
margin: 0 auto;
position:fixed;
} 
```

这是网站的实时视图，如果您想查看其余代码， [http](http://fuse.orgfree.com/Portfolio%202012/) ://fuse.orgfree.com/Portfolio%202012/ 带有徽标的 div 应该离中心更远，但它不会去.

任何和所有的帮助表示赞赏！非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:44:21.310

这`position: fixed`就是导致您的保持 div 无法正确居中的原因。删除该行，div 将移动到页面的中心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T16:46:27.233

将此 CSS 添加到您的保持 div：

```
#hold {
left: 50%;
margin-left: -450px;
} 
```

margin-left 属性应该是 div 宽度的一半。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T16:47:19.007

的一个例子`div`，

```
<div class="center"></div> 
```

它完全以以下样式居中并固定：

```
.center{
    position: fixed;
    top: 50%;
    left: 50%;
    width: 200px;
    height: 200px;
    margin: -100px 0 0 -100px;
    background-color: blue;
}​ 
```

[您可以在此处](http://jsfiddle.net/n6gUj/)找到演示。

仅水平居中：

```
.center{
    position: fixed;
    left: 50%;
    width: 200px;
    height: 200px;
    margin-left:-100px;
    background-color: blue;
}​ 
```

使 div 的内容也[居中](http://jsfiddle.net/n6gUj/1/)或使其[流畅](http://jsfiddle.net/n6gUj/2/)。

# javascript - 调整外部 JavaScript 的大小

> ID：11193513
> 
> 赞同：0
> 
> 时间：2012-06-25T16:40:53.467
> 
> 标签：javascript, jquery

可以`div`调整以下外部 javascript 添加的大小吗？

下面我尝试将它包装在一个 div 中并设置 div 的宽度，但它没有调整大小。

```
<div width = "100"><script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/23232.js"></script>
<noscript><a href="http://polldaddy.com/poll/23232/">Test</a></noscript>
</div> 
```

js`div`向页面添加了一个，我想调整它的大小。

请注意，此民意调查实际上并不存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:50:05.323

# `<script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/23232.js"></script>`

But serious as [Pointy](https://stackoverflow.com/questions/11193513/resize-external-javascript/11193641#comment14691539_11193513) already stated. Javascript shouldn't be visible on the page.

# c# - BindToMoniker 打开一个新的 excel 会话

> ID：11193514
> 
> 赞同：2
> 
> 时间：2012-06-25T16:40:54.990
> 
> 标签：c#, excel, interop, office-interop

以下代码尝试附加到已打开 C:\test 文件的 excel 会话。如果这样的会话不存在，则返回 null 或引发异常。

```
 var myExcelWorkbook = Marshal.BindToMoniker(@"C:\test") as Excel.Workbook; 
```

当文件没有扩展名时，这非常有效。但是，如果我尝试使用具有扩展名的文件（例如 C:\test.xlsb）使用完全相同的代码，则调用会在返回之前尝试使用 excel 打开该文件。如果一个实例已经在运行，它将尝试在该实例中打开文件（就像有人在 Windows 资源管理器中双击该文件一样）。

```
 var myExcelWorkbook = Marshal.BindToMoniker(@"C:\test.xlsb") as Excel.Workbook; 
```

这肯定与扩展名有关（否则 BindToMoniker 怎么知道如何打开 Excel？），但很烦人，因为我不想附加到尚未打开该文件的现有 excel 会话。

有没有办法禁用该“功能”？我希望 BindToMoniker 方法永远不会尝试打开文件，让我决定在各种情况下要做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:47:20.100

问题很可能与 Excel 文档在“运行对象表”中的命名方式有关，而不是存在扩展名。

阅读 IRunningObjectTable... [IRunningObjectTable.EnumRunning](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.comtypes.irunningobjecttable.enumrunning)可能有用。

# sql - 从一系列日期时间中获取十分钟的间隔

> ID：11193520
> 
> 赞同：6
> 
> 时间：2012-06-25T16:41:15.333
> 
> 标签：sql, sql-server, sql-server-2008

我有一个包含日期时间值范围的日期时间列。我想用所有这些日期时间值创建另一列，但要四舍五入到十分钟。

所以，像这样：

```
datetimesent              |     ten_minute_column

2012-06-11 18:27:58.000   |     2012-06-11 18:20:00.000
2012-06-15 15:19:08.000   |     2012-06-15 15:10:00.000
...                       | 
```

我得到的最远的东西是在分钟的桶槽中得到它。我通过这样做得到了这个：

```
SELECT DatetimeSent,
    DATEADD(Minute, DATEDIFF(Minute, 0, DatetimeSent), 0) AS Minute_bucket
FROM allrequests 
```

但我需要十分钟的桶槽。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T18:04:35.220

试试这个：

```
select dateadd(minute, datepart(minute, datetimesent) / 10 * 10, 
dateadd(hour, datediff(hour, 0,datetimesent), 0)) ten_minute_column
from 
(select cast('2012-06-11 18:27:58.000' as datetime) datetimesent
union all
 select cast('2012-06-15 15:19:08.000' as datetime)) a 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T17:01:43.897

您可以使用许多功能来做到这一点：

```
WITH D AS
(   SELECT  CURRENT_TIMESTAMP [DateField]
    UNION ALL
    SELECT  DATEADD(MINUTE, 5, CURRENT_TIMESTAMP)
)
SELECT  DATEADD(MINUTE, (10 * FLOOR(DATEPART(MINUTE, DateField) / 10.0)) - DATEPART(MINUTE, DateField), DATEADD(MINUTE, DATEDIFF(MINUTE, 0, DateField), 0)) AS RoundedDate
FROM    D 
```

其要点是去除 10 分钟间隔后的分钟数，并从实际分钟数中减去（删除秒数）。

这可以通过将一些函数移动到连接来稍微整理一下。但是，我认为这不会提供任何性能提升（根本没有进行任何测试）

```
;WITH T AS
(   SELECT  Number,
            (10 * FLOOR(Number / 10.0)) - Number [RoundedDifference]
    FROM    (   SELECT  ROW_NUMBER() OVER(ORDER BY Object_ID) - 1 [Number]
                FROM    sys.All_Objects
            ) n
    WHERE   Number < 60
), D AS
(   SELECT  CURRENT_TIMESTAMP [DateField]
    UNION ALL
    SELECT  DATEADD(MINUTE, 5, CURRENT_TIMESTAMP)
)
SELECT  DateField,
        DATEADD(MINUTE, RoundedDifference, DATEADD(MINUTE, DATEDIFF(MINUTE, 0, DateField), 0)) [RoundedDate]
FROM    D
        INNER JOIN T
            ON DATEPART(MINUTE, DateField) = Number 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T16:54:29.503

假设从不存在毫秒，您可以通过这种方式去除分钟和秒，并对结果进行分组：

```
SELECT DATEADD(SECOND, -(CONVERT(INT, RIGHT(CONVERT(CHAR(2),
  DATEPART(MINUTE, GETDATE())),1))*60)-(DATEPART(SECOND,GETDATE())), GETDATE()); 
```

这是一个查询，它根据表（或表的子集）中的最小和最大日期获取正确的时隙数：

```
DECLARE @x TABLE(datetimesent DATETIME);
INSERT @x SELECT '2012-06-11 18:27:58.000'
UNION ALL SELECT '2012-06-15 15:19:08.000';

DECLARE @start SMALLDATETIME, @end SMALLDATETIME, @i INT;

SELECT @start = CONVERT(DATE, MIN(datetimesent)), @end = CONVERT(DATE,
MAX(datetimesent))
FROM @x
-- WHERE ...;

SELECT @i = DATEDIFF(DAY, @start, @end) * 144;

;WITH slots(ten_minute_column) AS
(
   SELECT TOP (@i * 144) DATEADD(MINUTE, 10 * (ROW_NUMBER() OVER
   (ORDER BY s1.[object_id])-1), @start)
   FROM sys.all_columns AS s1
   -- you may need to cross join to another table if this doesn't
   -- provide enough rows. Depends on overall datediff...
)
SELECT x.datetimesent, slots.ten_minute_column
 FROM @x AS x
 INNER JOIN slots
 ON x.datetimesent >= slots.ten_minute_column
 AND x.datetimesent < DATEADD(MINUTE, 10, slots.ten_minute_column)
 -- WHERE ...; 
```

结果：

```
datetimesent              ten_minute_column
-----------------------   -------------------
2012-06-11 18:27:58.000   2012-06-11 18:20:00
2012-06-15 15:19:08.000   2012-06-15 15:10:00 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T17:07:05.593

```
SELECT  DatetimeSent,
        Dateadd(ms, -Datepart(ms, Dateadd(minute, Datediff(minute, 0, 
                                                    Dateadd(minute, 
                                                    -Datepart(minute, 
                                                     datetimesent) 
                                                    %10, 
                                                    datetimesent)), 0 
                                                ) 
                ), Dateadd(minute, Datediff(minute, 0, Dateadd(minute, 
                                                       - 
                                   Datepart( 
                                   minute, 
                                                   datetimesent 
                                   )% 
                                   10, 
                                     datetimesent 
                                                   )), 0)) AS Minute_bucket
FROM   allrequests 
```

# eclipse - 如何在等待服务器响应时阻止 SWT UI 线程

> ID：11193523
> 
> 赞同：2
> 
> 时间：2012-06-25T16:41:23.860
> 
> 标签：eclipse, swt

我有一个带有 OK 和 Cancel 按钮的 SWT UI。当我在 UI 上按 OK 时，将进行服务器调用，根据服务器响应，我想继续。如何阻止 UI 线程继续前进并等待服务器响应。

我在这里看到过类似的帖子：[eclipse rcp : how to block ui while running a job in background](https://stackoverflow.com/questions/6660574/eclipse-rcp-how-to-block-ui-while-running-a-job-in-background) 但答案中的链接不起作用。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:45:21.063

当我有很长的任务要做并且我希望我的用户等待时，我使用这个构造：

```
BusyIndicator.showWhile(Display.getCurrent(), new Runnable() {
    @Override
    public void run() {
           // long operation, for example fetch a distant resource
    }
}); 
```

这会阻止 UI 并将光标设置为沙漏。

# opengl - 在OpenGL中沿折线路径创建管

> ID：11193524
> 
> 赞同：3
> 
> 时间：2012-06-25T16:41:27.940
> 
> 标签：opengl, math, 3d, geometry

我想沿着由点列表定义的路径绘制一个管子。

我的想法是，我基本上可以围绕我的每个点画圈，然后使用 GL_QUAD_STRIP 将这些圈（或者更确切地说，圈上的点）连接在一起。

所以，我在圆圈上创建点的代码是这样的：

```
 point_of_circle[0] = pathVertices[i][0] + TUBE_RADIUS * cos(j/TUBE_SEGMENTS * 2*M_PI));
        point_of_circle[1] = pathVertices[i][1] + TUBE_RADIUS * sin(j/TUBE_SEGMENTS * 2*M_PI));
        point_of_circle[2] = pathVertices[i][2]; 
```

其中`i`是路径顶点的索引（即我希望绘制管子的原始点之一），并且`j`是正在创建的圆的当前点的索引（从 0 到`TUBE_SEGMENTS`）。

现在，问题是，如果我以这种方式创建圆圈，它们总是以相同的方式定向（这些圆圈都是“平行”的，就像我一直做的那样`point_of_circle[2] = pathVertices[i][2]`），这不是我想要的，因为那时这个结构看起来不像一个合适的管子。

我想我能做的是计算与我正在绘制的路径相切的向量。然后，我需要根据计算的切线以某种方式使圆圈朝向正确的方向。

例如，如果计算的切线为`0,0,1`，则代码应保持原样。但是，如果切线被计算为其他任何值，则应旋转圆。

例如，如果计算出的切线是`0,1,0`，则整个圆的 y 坐标应该相同，如果您沿着 z 轴看，您应该只看到圆的水平线段。

如果切线是`1,0,0`，则如果沿 z 轴看，您应该会看到圆的垂直线段。

我如何编写代码来根据计算的切线正确创建圆？我希望我的解释足够清楚，我是 OpenGL 和大部分 3D 数学的初学者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T23:27:45.883

如果您不重新发明轮子，总有[GLE 管材和挤压库。](http://www.linas.org/gle/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T06:46:24.093

我已经实现了类似的东西，可以为您提供一些建议：

让 P_0、P1 等成为路径上的点。Tube 由分段 S_i = (P_i, Pi+1) 组成

您的方法是正确的 - 您可以围绕 P_i 生成圆圈，然后将它们连接为每个段的四边形。对于段 S_0 到 S_N-2，每个将有 1 个圆，对于最后一个段 S_N-1，有 2 个要生成的圆。

要为线段 S_i = (P_i, P_i+1) 生成圆，请计算线段方向 D = P_i+1 - P_i。现在，您需要在 Normal = D 的平面上生成一个圆。这可以通过多种方式完成。也许你在 XY 平面上有一个预先计算好的圆点，你可以变换这些点。

这里的主要问题是，当你从一个段到另一个段时，管子会开始扭曲，因为随着段矢量的变化，圆圈上的“原点”将不匹配。如果您对管子进行纹理处理，这一点尤其重要。解决此问题的一种方法是根据“顶部”标准选择生成的圆中的第一个点。想象一个 3D 的管子——从视觉上看，很容易在管子上画一条 3D 线，这样它就始终保持在管子的顶部。这个“顶侧”矢量取决于管段的方向，并且对于管的垂直截面是未定义的。对于非垂直部分，它由下式给出：

T = DX (ZXD)

X 是叉积，Z 是向上方向。

根据我的经验，这很难做到。不幸的是，我无法共享代码。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T06:10:57.187

找到切线后，可以得到旋转quat，如下所示。（参考：Ogre3D Vector3.cpp）

```
 public static Quaternion getRotationTo(Vector3 src, Vector3 dest)
    {
        Quaternion q = new Quaternion();

        src.Normalize();
        dest.Normalize();

        double d = Vector3.Dot(src, dest);

        if (d >= 1.0f)
        {
            return Quaternion.Identity;
        }

        if (d < (1e-6f - 1.0f))
        {
            //                   // Generate an axis
            //                   Vector3 axis = Vector3::UNIT_X.crossProduct(*this);
            //                   if (axis.isZeroLength()) // pick another if colinear
            //                       axis = Vector3::UNIT_Y.crossProduct(*this);
            //                   axis.normalise();
            //                   q.FromAngleAxis(Radian(Math::PI), axis);

            // Generate an axis
            Vector3 axis = Vector3.Cross(Vector3.UnitX, src);

            if (axis.Length() == 0.0f)
            {
                axis = Vector3.Cross(Vector3.UnitY, src);
            }

            axis.Normalize();

            q = Quaternion.CreateFromAxisAngle(axis, MathHelper.ToRadians(180));
        }
        else
        {
            //               Real s = Math::Sqrt( (1+d)*2 );
            //               Real invs = 1 / s;

            //               Vector3 c = v0.crossProduct(v1);

            //               q.x = c.x * invs;
            //               q.y = c.y * invs;
            //               q.z = c.z * invs;
            //               q.w = s * 0.5;
            //               q.normalise();

            Double s = Math.Sqrt((1 + d) * 2);
            Double invs = 1 / s;

            Vector3 c = Vector3.Cross(src, dest);

            q.X = (float)(c.X * invs);
            q.Y = (float)(c.Y * invs);
            q.Z = (float)(c.Z * invs);
            q.W = (float)(s * 0.5);
            q.Normalize();

        }

        return q;
    } 
```

# jquery-ui - 带有隐藏输入的 jqueryui datepicker

> ID：11193530
> 
> 赞同：9
> 
> 时间：2012-06-25T16:42:19.893
> 
> 标签：jquery-ui, datepicker, jquery-ui-datepicker

我有一个按钮和一个隐藏的输入。

我希望日期选择器在我单击它的按钮下方打开。并且选择的日期被插入到隐藏的输入中。

我不想创建一个新按钮（使用 datepicker 选项），也不想显示输入。

```
<button type="button" class="btn" id="date_button">Select Date...</button>

<input type="hidden" name="date" id="date_field" />

<script>
    $('#date_button').datepicker({
        showOn: "button",
        onSelect: function( dateText ) {
            $('#date_field').val( dateText );
            $('#date_button').text( dateText );
        }
    })
</script> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-06-18T14:14:56.050

我通过执行 .show().focus().hide() 来做到这一点 - 虽然有点不干净，但效果很好：

```
$(document).ready(function() {
    $('input').datepicker();
        $('#mybutton').click(function() {
        $('input').show().focus().hide();
    });
}); 
```

[http://jsfiddle.net/JKLBn/](http://jsfiddle.net/JKLBn/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T00:54:41.237

这有点hacky，但它似乎工作正常：

1.  将日期选择器附加到`input`而不是按钮。
2.  当它打开时，将日期选择器重新定位到按钮下方。

```
var $button = $("#date_button"),
    left = $button.offset().left,
    top = $button.offset().top + $button.height();

$('#date_field').datepicker({
    onSelect: function(dateText) {
        $('#date_field').val(dateText);
        $button.text(dateText);
    },
    beforeShow: function (event, ui) {
        setTimeout(function () {
            ui.dpDiv.css({ left: left, top: top });      
        }, 5);               
    }
});

$button.on("click", function() {
    $("#date_field").datepicker("show");
}); 
```

**示例：http:** [//jsfiddle.net/StUsH/](http://jsfiddle.net/StUsH/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-25T15:44:23.313

我以不同的方式做到了。我隐藏了带有样式的按钮的普通文本输入：

```
style="outline: none; color:white; margin-top:-20px; border:none;" 
```

所以它不会出现在页面上。它是可聚焦的，而且效果很好。

# iphone - 滚动时防止按下 UIButton

> ID：11193538
> 
> 赞同：2
> 
> 时间：2012-06-25T16:43:06.107
> 
> 标签：iphone, ios, uiscrollview, uibutton

我在表格单元格中有两个 UIButtons，滚动时不方便按下。我怎样才能防止这种情况？

是否有一些属性或发送事件我可以设置，以便仅在用户释放按下时按下按钮，而不是在按下按钮时按下？

我尝试了不同的触摸事件（Touch Up Inside 和 Touch Down），但似乎都没有解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T16:49:11.610

You can listen for the tableview's scrolling delegate callbacks and turn off your buttons they are being scrolled

```
- (void)scrollViewWillBeginDragging:(UIScrollView *)activeScrollView {

    //I assume the buttons are within your cells so you will have to enable them within your cells so you will probably have to handle this by sending a custom message to your cells or accessing them with properties.
    [yourButton setEnabled: NO];
} 
```

and listen for

```
- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate
{
   // do the same to enable them back
   [yourButton setEnabled: YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:17:45.133

在界面生成器中，将按钮的标记值更改为大于 10 的数字（或某个值）。子类 UIScrollView 并覆盖：

```
-(BOOL) touchesShouldCancelInContentView:(UIView *)view {

if(view.tag>10) {
    NSLog(@"should A");
    return YES;
} else return NO; 
```

}

您的 scrollView 应该将属性`canCancelContentTouches`设置为 YES 并`delaysContentTouches`设置为 NO

# javascript - 这个ajax帖子正确吗？

> ID：11193540
> 
> 赞同：0
> 
> 时间：2012-06-25T16:43:12.360
> 
> 标签：javascript, ajax, cakephp

我正在尝试向我的 CakePHP 操作发布一组变量，以便我可以编辑它们。该数组是根据表行的 ID 构建的。这是我的 index.ctp 文件中的 javascript 代码。

```
<script type="text/javascript">
$('.edit_selected').click(function()
{
    var selected = new Array();
    alert('Edit Selected Has Been Clicked');
    $("#[id*=LocalClocks]").each(function()
    {
        if(false != $(this).is(':checked'))
        {
            selected.push($(this).attr('id').replace('LocalClocks', ''));
            $.ajax({
            type: 'POST',
            url: "/localhost/LocalClocks/editSelected/",
            data: JSON.stringify(selected),
            dataType: "json",
            success: function(data){ alert(data); alert('Edit Success'); }
            });
        }
    });
});
</script> 
```

我在这里做的是抓取所有以 开头的 id `'LocalClocks'`，然后我修剪`'LocalClock'`字符串，所以我最终只得到数字，然后我将该 id 号添加到选定的数组中。我想将此数组发布到我的`editSelected()`函数中。

我对发布数据一点也不熟悉，所以我有几个问题。到目前为止我的当前代码是否正确？对于我的`editSelected()`函数，它是否需要我试图传递它的数组的参数，或者发布的数据是否被放入`$this->request->data`？

这是我的`editSelected`行动：

```
public function editSelected()
{
    $this->set('isEditSelValid', false);
    $this->set('editSelValidationErrors', false);
    if ($this->request->is('post'))
    {
        $localClocksEntries = $this->LocalClock->find('all');
        foreach($localClocksEntries as $LocalClock)
        {
            $this->LocalClock->id = $LocalClock['LocalClock']['id'];
            $this->LocalClock->save($this->request->data);
            $this->set('isEditSelValid', true);
            $this->set('editSelValidationErrors', false);
        }
    }
} 
```

我尝试发布数据的原因是因为我需要能够获取我想要编辑的行的 ID。我在上面的 javascript 能够获取并放入数组的每一行中都有复选框。我需要能够循环该数组并将用户输入保存给它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:11:50.163

如果您的服务器端代码接受 JSON，您将需要添加`contentType: "application/json"`到传递给`ajax`方法的文字对象。现在它正在与 default 一起发送`application/x-www-form-urlencoded`。除此之外，您的代码看起来不错。

`datatType`用于返回数据，`contentType`是传递请求数据的方式。

# mysql-error-1005 - 在服务器执行 SQL 脚本 ERROR: Error 1005: Can't create table (errno: 150)

> ID：11193546
> 
> 赞同：1
> 
> 时间：2012-06-25T16:43:38.890
> 
> 标签：mysql-error-1005

此错误的原因可能是什么？

```
 CREATE  TABLE IF NOT EXISTS `myhotel`.`roomer` (
      `id` INT NOT NULL ,
      `name` VARCHAR(45) NOT NULL ,
      `start` DATE NOT NULL ,
      `finish` DATE NOT NULL ,
      `day` INT NOT NULL ,
      PRIMARY KEY (`id`) ,
      INDEX `fk_id` (`id` ASC) ,
      CONSTRAINT `fk_id`
        FOREIGN KEY (`id` )
        REFERENCES `myhotel`.`all_roomers` (`id_roomer` )
        ON DELETE NO ACTION
        ON UPDATE NO ACTION)
    ENGINE = InnoDB;

CREATE  TABLE IF NOT EXISTS `myhotel`.`all_roomers` (
  `id_roomer` INT NOT NULL ,
  `id_room` INT NOT NULL ,
  `status` TINYINT(1) NOT NULL ,
  INDEX `fk_id_room` (`id_room` ASC) ,
  PRIMARY KEY (`id_roomer`, `id_room`) ,
  CONSTRAINT `fk_id_room`
    FOREIGN KEY (`id_room` )
    REFERENCES `myhotel`.`room` (`id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE  TABLE IF NOT EXISTS `myhotel`.`room` (
  `id` INT NOT NULL AUTO_INCREMENT ,
  `number` INT NOT NULL ,
  `price` INT NOT NULL ,
  `capacity` INT NOT NULL ,
  `stars` INT NOT NULL ,
  `status` TINYINT(1) NOT NULL ,
  PRIMARY KEY (`id`) )
ENGINE = InnoDB; 
```

我得到的错误是：在服务器中执行 SQL 脚本

错误：错误 1005：无法创建表“myhotel.roomer”（错误号：150）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T03:22:19.743

根据 MySQL Docs（[见这里](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)）：

> 如果 MySQL 从 CREATE TABLE 语句中报告错误号 1005，并且错误消息引用错误 150，则表创建失败，因为未正确形成外键约束。

我会说从您的脚本的外观来看，这可能是因为`CREATE TABLE`您使用的语句在`myhotel.all_roomers`创建表之前引用了它。我敢打赌，您需要先创建该表，然后再创建对其的外键引用。

Also, I'm not sure but it also looks as if you're using the `id` column as both a primary key as well as a foriegn key. I'm not sure this is allowed either but can't find anywhere in the documentation that says it's incorrect.

# visual-sourcesafe - 源代码控制搁置

> ID：11193547
> 
> 赞同：0
> 
> 时间：2012-06-25T16:43:39.863
> 
> 标签：visual-sourcesafe

我们有一些有 TFS 经验的新人，他们总是提到“搁置”。不幸的是，我们远远落后于曲线，仍然使用 Source Safe。我已经在源代码安全中搜索了这样的功能，但找不到它。

我能想到的最接近的事情是当一个文件还没有准备好在晚上签入时从解决方案中排除它，但我可以想到一些可能会出错的事情，尤其是当你第二天得到最新的时候。

有没有人有任何关于使用源安全搁置的网络参考资料？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:04:50.390

那是因为它不存在。

最接近的事情是您在自己的机器上对代码库进行一些更改，然后在本地进行演示/测试。如果你得到一个好的，那么你检查他们。

如果你想要搁架，你应该这样做，因为它有很多用途，恐怕你会用到本世纪发明的东西。:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T19:05:59.097

虽然这不是 TFS 意义上的真正搁置，但您可以在签入之前在 SS 中添加标签。然后检查您的更改（搁置）。然后在 SS 中，查看历史记录（仅限标签）并获取您标记的旧版本。

# android - ActionBarSherlock + ListView + Details：如何隐藏布局？

> ID：11193548
> 
> 赞同：0
> 
> 时间：2012-06-25T16:43:49.613
> 
> 标签：android, tabs, actionbarsherlock

我正在使用 ActionBarSherlock 4.1，我的目标是在一个屏幕中有两个片段：一个 ListView 和一个详细信息片段。[在此处](https://stackoverflow.com/questions/8432228/actionbar-tabs-pager-detail-fragments-inside-viewpager-container)的帮助下，我扩展了在 ABS 网站上找到的 FragmentTabsPager 示例。

该异常似乎与使用 ViewPager 有关。如果我想要滑动到想要隐藏布局的屏幕，应用程序会崩溃。如果我使用选项卡切换到同一屏幕，它可以工作。

我使用以下布局：

**肖像布局：**

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.v4.view.ViewPager xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/pager"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" /> 
```

**景观布局：**

```
<FrameLayout
    android:id="@+id/main_container"
    android:layout_width="0px"
    android:layout_height="match_parent"
    android:layout_weight="1" >

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />
</FrameLayout>

<FrameLayout
    android:id="@+id/details_container"
    android:layout_width="0px"
    android:layout_height="match_parent"
    android:layout_weight="1" /> 
```

魔法：

```
 @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        if (mContext.getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {
            if (tab.getText().equals("Simple")) {
                countingFragment = new FragmentStackSupport.CountingFragment();
                detailsFragment = new FragmentStackSupport.DetailsFragment();
                ft.add(R.id.main_container, countingFragment, "frag1");
                ft.add(R.id.details_container, detailsFragment, "frag2");
            } else {
                // if it's not the first tab
                mViewPager.setCurrentItem(mContext.getSupportActionBar()
                        .getSelectedNavigationIndex());

                if (countingFragment != null) {
                    ft.detach(countingFragment);
                }
                if (detailsFragment != null) {
                    ft.detach(detailsFragment);
                }
                FrameLayout detailsFragmentLayout = (FrameLayout) mContext.findViewById(R.id.details_container);
                detailsFragmentLayout.setVisibility(View.GONE); 
            }
        } else {
            //Portrait mode is being used
            mViewPager.setCurrentItem(mContext.getSupportActionBar().getSelectedNavigationIndex());             
        } 
```

这个想法是为景观布局提供两个容器，并将片段附加到它们上，效果很好。

两个容器（内容和细节）都占屏幕的一半（它们的权重相等）。当我退出使用详细信息片段的屏幕时，我想确保内容容器使用所有宽度，并且我需要以某种方式隐藏详细信息容器。

不幸的是，上面的代码（detailsFragmentLayout.setVisibility(View.GONE)）产生了一个异常：

```
FATAL EXCEPTION: main
java.lang.NullPointerException
    at android.widget.FrameLayout.onMeasure(FrameLayout.java:244)
    at android.view.View.measure(View.java:8171)
    at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:678)
    at android.widget.LinearLayout.onMeasure(LinearLayout.java:306)
    at android.view.View.measure(View.java:8171)
    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
    at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
    at android.view.View.measure(View.java:8171)
    at android.widget.LinearLayout.measureVertical(LinearLayout.java:526)
    at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
    at android.view.View.measure(View.java:8171)
    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
    at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
    at android.view.View.measure(View.java:8171)
    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
    at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
    at android.view.View.measure(View.java:8171)
    at android.view.ViewRoot.performTraversals(ViewRoot.java:801)
    at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:4627)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:521)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
    at dalvik.system.NativeStart.main(Native Method) 
```

有什么关于隐藏 LinearLayout 的建议或其他关于到达我想要的地方的提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:07:47.857

这在使用 ViewPager 时是不可能实现的，因为屏幕在实际显示之前就已经加载了。默认情况下，ViewPager 总是加载接下来的 X 页。将 X 值设置为 0 无效，因为它会恢复为 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:05:48.520

将其插入到其他布局中，例如 LinearLayout 并将其设置为 INVISIBLE ： `ll.setVisibility(LinearLayout.INVISIBLE);`

# java - Hibernate 存储空字符串会在 DB 中创建空白。

> ID：11193550
> 
> 赞同：0
> 
> 时间：2012-06-25T16:43:54.913
> 
> 标签：java, hibernate, sybase

我正在使用 sybase db 和 hibernate 作为 ORM 工具，我正在处理 Person 对象，它包含名称作为 String 变量，当我创建 Person 对象时，我在 db 端使用了 varchar 数据类型

```
Person p=new Person();
p.setName(null);    
session.saveOrUpdate(p); 
```

这很好用

但是当我在名称中放入空字符串时，它会在数据库中创建空白。

```
Person p=new Person();
p.setName("");
session.saveOrUpdate(p); 
```

为什么会这样？

任何建议将不胜感激..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T16:50:51.167

它是添加空白的数据库填充，与休眠无关。

指的是

[手动链接](http://manuals.sybase.com/onlinebook...190;pt=16190#X)，

“Adaptive Server 将条目截断到指定的列长度而不会发出警告或错误，除非您将 string_rtruncation 设置为 on。有关详细信息，请参阅参考手册中的 set 命令。空字符串“”或“”存储为单个空格，而不是比 NULL。因此，“abc”+“”+“def”等价于“abc def”，而不是“abcdef”。

你可以做两件事：

*   让您的应用程序显式插入 NULL（这是应该做的，因为空字符串不等于 NULL）
*   在该表（或表）上放置一个插入/更新触发器，该触发器拦截空字符串并将其转换为 NULL

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:50:13.140

Empty 是一个字符串值，hibernate 认为它是一个值为空的字符串，所以它会创建它。您可以检查 "".equals(..) 这意味着 java 将 "" 视为一个值。

# android - 从桌面查看网站作为移动设备

> ID：11193554
> 
> 赞同：2
> 
> 时间：2012-06-25T16:44:16.427
> 
> 标签：android, iphone, web-applications, mobile, mobile-website

我正在开发我的网站的移动版本，但我没有随身携带手机来查看我的更改。如何在桌面上模仿移动视图进行开发？我试过[http://iphone-emulator.org/](http://iphone-emulator.org/)，但它不会将我的 User-Agent 更改为移动设备。我在 Mac 上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T16:46:17.553

如果您使用的是 Mac，则可以下载嵌入模拟器的 iOS SDK。您还可以在 Android SDK 中找到一个模拟器。

编辑：伪造用户代理是一种错误的解决方案，因为您没有确切的渲染引擎而不是只有一台设备。

EDIT2：如果您正在开始移动设备开发一个建议：提防黑莓（旧版本的操作系统嵌入了移动设备的 IE6）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T16:46:38.357

您可以使用 Android 提供的[模拟器](http://developer.android.com/tools/help/emulator.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T00:58:07.490

了解您的移动网络应用程序的最简单、最快捷的方法是使用 Chrome：

**设置 -> 工具 -> 开发人员工具 -> 设置（站点右下角） -> 用户代理（在选项卡菜单中）-> “覆盖用户代理”**

请记住：任何模拟器的结果都应定期通过真实的移动设备进行验证。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T14:46:26.460

如果您想同时查看多个用户代理的效果，可以尝试[http://prism.mobiforge.com](http://prism.mobiforge.com)。它为每个移动设备显示一个 iframe，为每个移动设备使用正确的用户代理字符串。正如 AsTeR 所指出的，这是一种方便的检查，但不是测试真实设备上实际渲染的方法。

它还显示了每种情况下的整体页面权重，这很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T16:46:54.083

为 Firefox 使用“用户代理更改器”...

在 Safari 下设置开发者选项。开发->更改用户代理

# objective-c - uint8_t 到二进制补码函数

> ID：11193560
> 
> 赞同：2
> 
> 时间：2012-06-25T16:44:35.403
> 
> 标签：objective-c, c, xcode4.3, twos-complement

我在xcode中使用objective-c。如何将 uint8_t 数据转换为十进制二进制补码？范围是 -127 到 127，对吗？

如果我有：

```
uint8_t test = 0xF2 
```

我可以使用内置的功能或方法吗？有人有简单的功能吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T17:01:23.680

这是做你想做的吗？

```
int8_t twosComplement = (int8_t)test; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T21:11:38.170

这个问题似乎有点混乱。它要求转换为十进制 2 的补码，但 2 的补码**仅**在二进制中有意义，而不是十进制。

如果您想将 unit9_t 值转换为有符号值，您可以 - 将其转换为某种有符号类型，如下所示： (int16_t)unsigned8variable - 将其分配给具有有符号类型的变量

但是，请注意溢出。您的 uint8_t 值可以是 0 到 255 之间的任何值。如果分配给 8 位有符号类型，则表示值从 -128 到 +127，任何大于 127 的原始值都会突然出现负数。选择一个足够大的类型来保存您可能实际看到的任何值。int16_t 会是安全的，因为它会上升到 32767。

# git - 使用 Git 的存储库特定自定义命令

> ID：11193562
> 
> 赞同：0
> 
> 时间：2012-06-25T16:44:36.800
> 
> 标签：git, version-control

由于我采用了敏捷开发方法，我发现自己更频繁地发布源代码。这也涉及更多重复的任务，手工完成不会导致......“敏捷”。

我确实有 2 个永久分支：master（稳定软件）、develop（开发版本）以及每个功能的所有其他分支，它们将合并到 develop。

更具体地说，发布过程（develop->master）包括以下步骤（假设我们发布的是 1.0.5 版本）：

首先，我确实创建了一个新分支，我可以在其中进行一些特定于版本的自定义

```
git checkout -b release1.0.5 develop 
```

然后（在这种情况下）我在 rails 应用程序中编辑修订部分视图（用于在应用程序页脚上显示 rev #）

```
vim app/views/layouts/_revision.html.haml 
```

然后我提交更改`release1.0.5`（通常使用消息“更新的 rev #”），，，，，将源上传到生产`checkout master`，，最后。`git merge --no-ff release1.0.5``git tag v1.0.5``git checkout develop``git merge --no-ff release1.0.5``git branch -d release1.0.5`

当一天完成 3/4 次时，这是非常乏味的（也许要硬修复仅在生产服务器上识别的错误）。当然，最好有一个命令——比如“make-release”来自动完成所有这些，也许将发布号作为参数。

我已经阅读了有关自定义 git 命令的信息，但是您知道，它是特定于项目的（在另一个项目上我不需要执行此类操作），因此将命令与当前存储库相关会很好，避免出现有大量命令，每个项目一个全局共享。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:49:25.230

[`git flow`](https://github.com/nvie/gitflow/) sounds like a good match for you.

# ruby - Ruby/Builder API：不使用块创建 XML

> ID：11193565
> 
> 赞同：2
> 
> 时间：2012-06-25T16:44:45.317
> 
> 标签：ruby, xml, builder

我想使用[Builder](http://builder.rubyforge.org/)来构建一组基于 ActiveRecord 模型表的 XML 文件。我有将近一百万行，所以我需要使用它`find_each(batch_size: 5000)`来迭代记录并为每批记录编写一个 XML 文件，直到记录用尽。类似于以下内容：

```
filecount = 1
count = 0
xml = ""
Person.find_each(batch_size: 5000) do |person|
  xml += person.to_xml  # pretend .to_xml() exists 
  count += 1       

  if count == MAX_PER_FILE
    File.open("#{filecount}.xml", 'w') {|f| f.write(xml) }
    xml = ""
    filecount += 1
    count = 0
  end
end 
```

这不适用于 Builder 的界面，因为它希望在块中工作，如下所示：

```
xml = builder.person { |p| p.name("Jim") } 
```

块结束后，Builder 关闭其当前节；您不能保留对 p 的引用并在块之外使用它（我尝试过）。基本上，Builder 想要“拥有”迭代。

因此，要使这项工作与 builder 一起工作，我必须执行以下操作：

```
 filecount = 0
  offset = 0
  while offset < Person.count do
    count = 0
    builder = Builder::XmlMarkup.new(indent: 5)
    xml = builder.people do |people|
      Person.limit(MAX_PER_FILE).offset(offset).each do |person|
        people.person { |p| p.name(person.name) }
        count += 1
      end
    end

    File.open("#output@file_count.xml", 'w') {|f| f.write(xml) }
    filecount += 1
    offset += count
  end 
```

有没有办法在没有块语法的情况下使用 Builder？有没有办法以编程方式告诉它“关闭当前节”而不是依赖一个块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:14:32.393

根据 Larry K 的建议，我最终手动生成了 XML。Ruby 的内置 XML 编码使这变得轻而易举。我不确定为什么这个功能没有得到更广泛的宣传......`to_xs`在偶然发现内置的`"foo".encode(xml: :text)`.

我的代码现在看起来像：

```
 def run
    count = 0
    Person.find_each(batch_size: 5000) do |person|
      open_new_file if @current_file.nil?

      # simplified- I actually have many more fields and elements
      #
      @current_file.puts "     <person>#{person.name.encode(xml: :text)}</person>"

      count += 1

      if count == MAX_PER_FILE
        close_current_file
        count = 0
      end
    end

    close_current_file
  end

  def open_new_file
    @file_count += 1
    @current_file = File.open("people#{@file_count}.xml", 'w')
    @current_file.puts "<?xml version='1.0' encoding='UTF-8'?>"
    @current_file.puts "     <people>"
  end

  def close_current_file
    unless @current_file.nil?
      @current_file.puts "     </people>"
      @current_file.close
      @current_file = nil
    end
  end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T02:20:03.637

我的建议：不要使用生成器。

只要您正确转义 xml 实体，XML 就是一种简单的格式。

批处理您的数据库检索，然后将批处理作为 xml 写入文件句柄。如您的示例所示，不要通过字符串缓冲。只需写入文件句柄。让操作系统处理缓冲。文件可以是任意大小，为什么有限制？

另外，不要包括缩进空间，百万行，它们会加起来。

**添加** 了在编写xml文件时，我还在文件顶部包含了xml注释：

*   生成 xml 文件的软件名称和版本
*   写入文件的日期/时间戳
*   其他有用的信息。例如，在这种情况下，您可以说该文件是原始数据集的批次 #x。

# maven - 为 Maven 生成依赖关系图

> ID：11193567
> 
> 赞同：1
> 
> 时间：2012-06-25T16:44:59.560
> 
> 标签：maven, dependency-management

是否有任何好的工具可以将多个级别扫描到 maven 项目/子项目中，并生成有关所有依赖项、不同项目中相同包之间的版本差异等的报告或图表？

是否有其他一些聪明的方法来管理大型 Maven 项目，这些项目有几层子项目，每一层都有大量的依赖关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:16:07.953

获取像 Nexus 这样的存储库管理器，使用 Maven 依赖插件，使用 Sonar，使用 Hudson/Jenkins，查看 Sonatype Insight 和 Insight for CI 插件，在 Eclipse 中使用依赖查看器，为您的组织使用父 pom 来集中依赖版本等等。有很多事要为你做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:53:16.380

最简单的解决方案是使用[maven-dependency-plugin](http://maven.apache.org/plugins/maven-dependency-plugin/tree-mojo.html)，它可以生成[ASCII 或不同格式的](http://maven.apache.org/plugins/maven-dependency-plugin/tree-mojo.html#outputType)报告。或者，您使用 IDE（m2e 插件 Eclipse）中的依赖层次结构来查看依赖关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T17:03:45.820

你可以使用[詹金斯](http://jenkins-ci.org/)。它已经完成了 Maven 项目所需的一切。

Jenkins 与 sonar 是管理大型 maven 项目的最佳组合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T17:33:47.703

根据您想要的“深度”，maven 站点构建可以使用报告插件来生成您想要的大部分内容。如果您想要更多信息，那么像 Sonar 这样的东西可能更符合您的需求。

# ios - iPhone布局（由IB创建）在模拟器中搞砸了

> ID：11193568
> 
> 赞同：1
> 
> 时间：2012-06-25T16:45:00.723
> 
> 标签：ios, interface-builder

我调整了我的应用程序的布局，一个问题困扰着我看下面
![在此处输入图像描述](../Images/180d0640b782141db295c9168a15ed7d.png)
的截图：（请忽略汉字）

图像包含在设置在位置 (0, 0)
的滚动视图中，红色区域是 UIVivew，它是滚动视图的超级视图

为什么滚动视图和 UIView 之间存在差距？也许一些无形的元素占据了这个位置？
TW，所有这些在 IB 编辑器中都很好。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:52:06.147

以防万一您能够将最低操作系统要求设置为 5.x 或更高版本，那么您可以使用[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html)来做这个。

# sms - 要在不同环境中使用和测试 twilio，我需要使用不同的数字和应用程序吗？

> ID：11193571
> 
> 赞同：2
> 
> 时间：2012-06-25T16:45:14.807
> 
> 标签：sms, twilio

这是场景：在生产中，我想发送和接收短信。在 qa 中，我想将可以发送到的号码列入白名单，并在特定于 qa 的 url 处接收短信。在测试中，我想将可以发送到的号码列入白名单，并在特定于测试的 url 处接收短信。

据我所知，在 twilio 中执行此操作的唯一/最佳方法是设置三个不同的电话号码和三个不同的 TwiML 应用程序，以使 URL 都指向传入消息的正确位置。

我错过了什么吗？有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:49:30.403

Twilio must send all inbound SMS to a phone number to the same URL, so if you only had one number, you could only use one endpoint for inbound SMS. However, at that endpoint you could have specific handling logic for messages based on the number that is sending an inbound SMS. So if you are sending all of your test messages from +12345, at your URL endpoint you could check for a From address matching +12345 and handle that specially, otherwise use your regular production logic.

Otherwise yes, I believe you'd have to register separate numbers to do what you want :(

# python - Opencv munmap 错误

> ID：11193577
> 
> 赞同：0
> 
> 时间：2012-06-25T16:45:42.017
> 
> 标签：python, opencv

我正在尝试实现以下代码：

```
#coding=utf8

from opencv.cv import *
from opencv.highgui import *

# Avame kaamera
capture = cvCreateCameraCapture(0)

while True:
    frame = cvQueryFrame(capture)
    cvShowImage("Aken", frame)
    char = cvWaitKey(33) 
```

但我得到了某种 munmap 错误。谁能指出我的编码中可能出现的问题的方向？

> mmap：无效参数 munmap：无效参数 munmap：无效参数 munmap：无效参数 munmap：无效参数 无法停止流。：错误的文件描述符 munmap：无效参数 munmap：无效参数 munmap：无效参数 munmap：无效参数
> 
> (Aken:2782): Gtk-WARNING **: Unable to locate theme engine in module_path: "pixmap",
> 
> (Aken:2782): Gtk-WARNING **: Unable to locate theme engine in module_path: "pixmap",
> 
> (Aken:2782): Gtk-WARNING **: Unable to locate theme engine in module_path: "pixmap",
> 
> (Aken:2782): Gtk-WARNING **: Unable to locate theme engine in module_path: "pixmap",

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:38:27.987

捕获过程可能失败，因此最好检查调用的返回：

```
capture = cvCreateCameraCapture(0)
if not capture :
    print "Error loading camera"
    # Should exit the application 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:19:13.917

您可以使用更新的界面尝试此代码，这样您就不必担心发布和可能的其他细节？我假设你有一个足够新的版本来使用 cv2。下面的代码来自[我所做的另一个 SO 答案](https://stackoverflow.com/questions/6657743/problem-with-opencv-and-python/11133856#11133856)。

```
import cv2

capture = cv2.VideoCapture()
cv2.namedWindow("Aken",1)
capture.open(0)
while True:
    frame = capture.read()[1]
    cv2.imshow("Aken", frame)
    if cv2.waitKey(30) == 27: break #`escape` key to stop capture
cv2.destroyWindow("Aken") 
```

# google-app-engine - 'self' 未定义，jinja2，appengine

> ID：11193579
> 
> 赞同：2
> 
> 时间：2012-06-25T16:45:51.110
> 
> 标签：google-app-engine, jinja2

错误：

> self.response.out.write(template.render(template_values)) NameError: name 'self' is not defined

与标记为 # ERROR 的行有关，还有其他注释：

```
#!/usr/bin/env python27

import cgi
import webapp2
import jinja2
import time
import datetime 
import urllib
#import cgitb; cgitb.enable()
import os
from google.appengine.ext import db
from google.appengine.api import users
from google.appengine.api import memcache

jinja_environment = jinja2.Environment(autoescape=True,
    loader=jinja2.FileSystemLoader(os.path.join(os.path.dirname(__file__), 'templates')))

class Visitor(db.Model): # I still need this with jinja2, yes? 
    name = db.StringProperty(required=1)
    mood = db.StringProperty(choices=["good","bad","fair"])
    date = db.DateTimeProperty(auto_now_add=True)

class MainPage(webapp2.RequestHandler):
    def get(self): # ERROR HERE
        visitor_query = Visitor.all().order('-date') #not sure about query...need to get curent visitor's submitted form values (name, mood). no log-in in app. 
        visitor = visitor_query.fetch(1)

        template_values = {
            'visitor': visitor,
            'url': url, #not sure how this applies, just following tutorial
            'url_linktext': url_linktext,
        }

    localtime = time.localtime(time.time())
    mon = localtime[1] # MONTH
    h = localtime[3] # HOUR
    span = "morning" if h == range(5,14) else "afternoon" if h == range(17,7) else "evening" 
    if mon <= 3:
        var1 = "winter"
       # more variables in if/elif statement here...I call these variables from index.html...

#    name = self.request.get("name") # not sure if I need to define these variables here using jinja2...tutorial does not define entity properties in example. 
#    name = name.capitalize()
#   mood = self.request.get("mood")

    template = jinja_environment.get_template('index.html')
    self.response.out.write(template.render(template_values)) # ERROR HERE

class Process(webapp2.RequestHandler): 
    def post(self):
        name = self.request.get("name")
        name = name.capitalize()
        mood = self.request.get("mood")
        message = Visitor(name=name, mood=mood)
        if users.get_current_user():
            message.name = users.get_current_user() #not sure if I need users.get_current...no log-in required
        message.mood = self.request.get("mood")
        message.put()

        self.redirect("/")

app = webapp2.WSGIApplication([('/', MainPage)],
                              debug=True) 
```

应用程序.yaml：

```
application: emot
version: 1
runtime: python27
api_version: 1
threadsafe: true 

handlers:
#-   url: /stylesheets/ # I read no static files allowed with jinja2...not sure how I'll handle CSS...
#    static_dir: stylesheets
-   url: /.*
    script: main.app

libraries:
-   name: jinja2 
    version: latest 
```

index.yaml（所有这些都可以在没有 jinja2 的情况下工作......）

```
indexes:

-   kind: Visitor 
    ancestor: yes
    properties:
    -   name: name
    -   name: mood
    -   name: date
        direction: desc 
```

另外，我已经将 jinja2 文件夹从 g00gle_appengine/lib 目录交替复制（未剪切）到我的应用程序目录文件夹，包括仅复制“jinja”文件夹（与使用 gdata atom 和 src 的类似方法一样......）我还安装了 python -jinja2，位于：`/usr/share/doc/python-jinja2`

我的 index.html 位于我的应用程序目录的“模板”目录中。提前感谢您让我继续前进。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T16:51:18.173

From the code you've posted, it looks like the erroring line of code (and the preceding few) aren't indented far enough.

The get method should be aligned as follows:

```
def get(self): # ERROR HERE
    visitor_query = Visitor.all().order('-date') #not sure about query...need to get curent visitor's submitted form values (name, mood). no log-in in app. 
    visitor = visitor_query.fetch(1)

    template_values = {
        'visitor': visitor,
        'url': url, #not sure how this applies, just following tutorial
        'url_linktext': url_linktext,
    }

    localtime = time.localtime(time.time())
    mon = localtime[1] # MONTH
    h = localtime[3] # HOUR
    span = "morning" if h == range(5,14) else "afternoon" if h == range(17,7) else "evening" 
    if mon <= 3:
        var1 = "winter"
    # more variables in if/elif statement here...I call these variables from index.html...

    #    name = self.request.get("name") # not sure if I need to define these variables here using jinja2...tutorial does not define entity properties in example. 
    #    name = name.capitalize()
    #   mood = self.request.get("mood")

    template = jinja_environment.get_template('index.html')
    self.response.out.write(template.render(template_values)) # ERROR HERE 
```

# java - 可扩展枚举

> ID：11193581
> 
> 赞同：0
> 
> 时间：2012-06-25T16:45:54.337
> 
> 标签：java, enums

我正在考虑如何编写一种可扩展的节点类方法。目前，树结构中的每个节点都必须实现一个返回节点类型的方法（当前是一个枚举，它定义了如何根据节点的类型对磁盘上的节点进行序列化和反序列化）。如果用户想要使用框架并定义和实现其他节点类型，我们需要一些可扩展性。

我考虑过添加一个接口（可扩展枚举模式）并使用 somethink like

`public interface IKind`并在节点界面中使用类似`public <E extends Enum<E> & IKind> E getKind() {...}`. 但是我什至不确定这是否可以：

```
@Override
public <T extends Enum<T> & IKind> T getKind() {
  return (T)ENode.ELEMENT_KIND;
} 
```

用于实现 IKind 的 ElementNode (XML) 和枚举 ENode。此外，它不允许打开那种似乎是一个杀手论点的节点，因为人们可能不想每次都编写访问者实现。

当前的实现很简单：

```
@Override
public ENode getKind() {
  return ENode.ELEMENT_KIND;
} 
```

我目前正在编写树结构的简单 PathSynopsis，因此使用我不想添加到核心节点的 PathNodes。

顺便说一句：是否有可能以某种方式返回任何类型的枚举（值）以与 switch 语句一起使用？...因为无法打开枚举。

也许返回一个用于序列化/反序列化的简单字节值也可以使用，但它有点难看：

`switch (ENode.getKind(pNewRtx.getNode().getKind()))`

和

```
public enum ENode implements IKind {
  ELEMENT((byte) 0, ElementNode.class) {
    serialize(...) {...}
    deserialize(...) {...}
  }
  ...
  /** Mapping of keys -> nodes. */
  private static final Map<Byte, ENode> INSTANCEFORID = new HashMap<>();

  /** Mapping of class -> nodes. */
  private static final Map<Class<? extends INode>, ENode> INSTANCEFORCLASS = new HashMap<>();

  static {
    for (final ENode node : values()) {
      INSTANCEFORID.put(node.mId, node);
      INSTANCEFORCLASS.put(node.mClass, node);
    }
  }
  ...
  /**
   * Get the related node based on the identifier.
   * 
   * @param pId
   *          the identifier for the node
   * @return the related node value
   */
   public static ENode getKind(final byte pId) {
     return INSTANCEFORID.get(pId);
   } 
```

和

```
public interface IKind {
  /**
   * Deserializing a node using a {@link ITTSource}.
   * 
   * @param pSource
   *          input source
   * @return a {@link INode} instance
   */
  INode deserialize(final ITTSource pSource);

  /**
   * Serializing a node from a {@link ITTSink}.
   * 
   * @param pSink
   *          where the data should be serialized to
   * @param pToSerialize
   *          the node to serialize
   */
  void serialize(final ITTSink pSink, final INode pToSerialize);

  /**
   * Get the nodeKind.
   * 
   * @return the unique kind
   */
  byte getKind();
} 
```

然而，这甚至会引入 NPE 的可能性，并且实现者必须确保在实现之间没有字节值是相同的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T16:48:59.933

When I write enums, they usually constitute a closed set. I wouldn't go that route if they had to be dynamic. I'd be more likely to think in terms of a common interface and polymorphism.

# xpages - 应用布局控件标题栏中的容器节点是如何工作的？（添加代码）

> ID：11193582
> 
> 赞同：1
> 
> 时间：2012-06-25T16:45:54.503
> 
> 标签：xpages, xpages-ssjs, xpages-extlib

我创建了一个使用 ExtLib 应用程序布局控件的布局控件。我有几个标题栏项目，其中一个是容器节点。容器节点有几个孩子。问题是当我将它放在 XPage 上并运行它时，子节点不显示。事实上，光标在容器节点上时也不会变为指向手指。我究竟做错了什么？还有什么要配置的吗？

```
<xe:basicContainerNode
label="Information Centers">
<xe:this.children>
    <xe:basicLeafNode
    label="Account Requirements"
    href="https://Server.xxx.com/Support and Info/acctreq.nsf?OpenDatabase">
        </xe:basicLeafNode>
</xe:this.children>
</xe:basicContainerNode> 
```

乔丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:53:46.817

好的，在我看来，横幅栏容器的工作方式与标题栏容器不同。我可以让横幅栏容器正常工作，但标题栏容器不能正常工作。有没有人不知道为什么会这样？

乔丹

# intellij-idea - 在 IntelliJ IDEA 中将代码块移动到 4 个缩进的快捷方式

> ID：11193586
> 
> 赞同：41
> 
> 时间：2012-06-25T16:46:24.443
> 
> 标签：intellij-idea, tabs, codeblocks

有谁知道将 IntelliJ 中的代码块移动几个缩进的快捷方式？

（对于 CSS 编辑器 Coda，我曾经选择一个或多个代码块，并使用 shift 和左或右胡萝卜符号来左右移动代码。）

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-06-25T17:06:39.713

这些是常见的**缩进**和**取消缩进**动作，默认快捷键：`Tab`和`Shift`+ `Tab`。

# wpf - 数据绑定排序的组合框

> ID：11193590
> 
> 赞同：0
> 
> 时间：2012-06-25T16:46:39.547
> 
> 标签：wpf, data-binding, combobox, observablecollection

我有一个带有许多组合框的 WPF 应用程序。每个 ComboBox 都绑定到一个 SortedList，我们称之为数据源。我为数据源选择这种类型的原因仅仅是因为我将获得对 TValues 的更新以及新项目和可能的删除，尽管它们不太可能。当数据事件（添加、更新、删除发生）时，我想要一种更快、更简单的方法来查找项目。然后我绑定到 IList 类型的属性并在 getter 中返回 _mySortedList.Values。

但是我很快意识到这不会起作用，因为我没有像使用 ObservableCollection 那样收到通过 UI 发送的更改通知。

所以我想知道对我的所有项目进行排序的最佳方法是什么（排序条件永远不会改变，但可能基于对象的多个属性）并具有 ObservableCollection 的自动通知。

非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:09:09.720

最简单的方法是创建一个实现 INotifyCollectionChanged 并且还具有排序功能的子类。如果您已经在使用 SortedList，那么您可以简单地创建一个派生自 SortedList、实现 INotifyCollectionChanged 并覆盖 Add/Remove/etc 的类。引发 NotifyCollectedChanged 事件的方法。

它可能看起来像这样（不完整）：

```
public class SortedObservableList : SortedList, INotifyCollectionChanged
{
    public override void Add(object key, object value)
    {
        base.Add(key, value);
        RaiseCollectionChanged(NotifyCollectionChangedAction.Add);
    }

    public override void Remove(object key)
    {
        base.Remove(key);
        RaiseCollectionChanged(NotifyCollectionChangedAction.Remove);
    }

    #region INotifyCollectionChanged Members

    protected void RaiseCollectionChanged(NotifyCollectionChangedAction action)
    {
        if (CollectionChanged != null)
            CollectionChanged(this, new NotifyCollectionChangedEventArgs(action));
    }

    public event NotifyCollectionChangedEventHandler CollectionChanged;

    #endregion
} 
```

或者，您可以创建一个派生自 ObservableCollection 并实现排序功能的类，但如果您已经在使用 SortedList，这可能没有意义。

编辑：您在下面的评论和对问题的进一步审查表明您正在使用 SortedList (SortedList) 的通用版本。在这种情况下，您可以让 SortableObservableList 实现 IDictionary 接口（和/或 ICollection、IEnumerable），并在内部使用 SortedList 来存储项目。这是您可以使用的代码片段（不包括所有已实现的方法，因为它们只是传递给您的内部排序列表。）

```
public class SortedObservableList<TKey, TValue> : IDictionary<TKey, TValue>, INotifyCollectionChanged
{
    private SortedList<TKey, TValue> _list;

    public SortedObservableList()
    {
        _list = new SortedList<TKey, TValue>();
    }

    #region INotifyCollectionChanged Members

    protected void RaiseCollectionChanged(NotifyCollectionChangedAction action)
    {
        if (CollectionChanged != null)
            CollectionChanged(this, new NotifyCollectionChangedEventArgs(action));
    }

    public event NotifyCollectionChangedEventHandler CollectionChanged;

    #endregion

    #region IDictionary<TKey,TValue> Members

    public void Add(TKey key, TValue value)
    {
        _list.Add(key, value);
        this.RaiseCollectionChanged(NotifyCollectionChangedAction.Add);
    }

    public bool ContainsKey(TKey key)
    {
        return _list.ContainsKey(key);
    }

    public ICollection<TKey> Keys
    {
        get { return _list.Keys; }
    }

    public bool Remove(TKey key)
    {
        bool result = _list.Remove(key);
        this.RaiseCollectionChanged(NotifyCollectionChangedAction.Remove);
        return result;
    }

    //etc...

    #endregion
} 
```

# javascript - KnockoutJS - 无容器控制流绑定初始值

> ID：11193591
> 
> 赞同：0
> 
> 时间：2012-06-25T16:46:42.687
> 
> 标签：javascript, jquery, knockout.js

我有一个选择控件，我需要在其中使用 ko:foreach 而不是通常的绑定。尽管选择控件设置为选项 1，但下面的“specialProperty”的初始值设置为未知，这一切都很完美。当您从列表中手动选择一个选项时，它的行为与预期一样。在这里小提琴：http: [//jsfiddle.net/aCS7D/1/](http://jsfiddle.net/aCS7D/1/)

```
 <select data-bind="value: selectedOption">
    <!-- ko foreach:groups -->
    <optgroup data-bind="attr: {label: label}, foreach: children">
        <option data-bind="text: label, option: $data"></option>
    </optgroup>
    <!-- /ko -->
</select>
<div data-bind="text: specialProperty"></div>

ko.bindingHandlers.option = {
    update: function(element, valueAccessor) {
       var value = ko.utils.unwrapObservable(valueAccessor());
       ko.selectExtensions.writeValue(element, value);   
    }        
};

function Group(label, children) {
    this.label = ko.observable(label);
    this.children = ko.observableArray(children);
}

function Option(label, property) {
    this.label = ko.observable(label);
    this.someOtherProperty = ko.observable(property);
}

var ViewModel = function() {
    this.groups = ko.observableArray([
        new Group("Group 1", [
            new Option("Option 1", "A"),
            new Option("Option 2", "B"),
            new Option("Option 3", "C")
        ]),
        new Group("Group 2", [
            new Option("Option 4", "D"),
            new Option("Option 5", "E"),
            new Option("Option 6", "F")
        ])
    ]);

    this.selectedOption = ko.observable();

    this.specialProperty = ko.computed(function(){
        var selected = this.selectedOption();
        return selected ? selected.someOtherProperty() : 'unknown';
    }, this);
};

ko.applyBindings(new ViewModel());​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:57:13.850

这是因为`select`已初始化并设置`value`了绑定，但仅当`change`事件在 select 上触发时才触发绑定。解决此问题的简单方法是添加

```
$('select').trigger('change'); 
```

应用绑定后。

# soap - 在 SOAP 请求中输入数组

> ID：11193592
> 
> 赞同：1
> 
> 时间：2012-06-25T16:46:42.983
> 
> 标签：soap, wsdl

我有一个从 SOAP UI 生成的 SOAP 请求，并查看如何指定字符串和整数，但我不确定如何为 testAddress 字段输入数组。这是wsdl，下面是soap请求。知道我怎么说一个或两个电子邮件地址。tim@tim.com 和 tom@tim.com。谢谢！

[http://api.stormpost.datranmedia.com/services/SoapRequestProcessor?wsdl](http://api.stormpost.datranmedia.com/services/SoapRequestProcessor?wsdl)

```
<soapenv:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ser="http://services.web.stormpost.skylist.com">
   <soapenv:Header>
      <authInfo xsi:type="soap:authentication" xmlns:soap="http://skylist.com/services/SoapRequestProcessor">
         <!--You may enter the following 2 items in any order-->
         <username xsi:type="xsd:string">username</username>
         <password xsi:type="xsd:string">password</password>
      </authInfo>
   </soapenv:Header>
   <soapenv:Body>
      <ser:sendTestMessage soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
         <mailingID xsi:type="xsd:int">#trim(mailingID)#</mailingID>
         <testAddresses xsi:type="soap:ArrayOf_soapenc_string" soapenc:arrayType="soapenc:string[]" xmlns:soap="http://skylist.com/services/SoapRequestProcessor" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/"/>
         <part xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">html</part>
      </ser:sendTestMessage>
   </soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:35:35.740

```
 <ser:sendTestMessage soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
        <cfoutput> <mailingID xsi:type="xsd:int">#trim(mailingID)#</mailingID></cfoutput>
         <testAddresses xsi:type="soap:ArrayOf_soapenc_string" soapenc:arrayType="soapenc:string[1]" xmlns:soap="http://skylist.com/services/SoapRequestProcessor" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">
            <testAddresses xsi:type="xsd:string">tim@tim.com</testAddresses>
        </testAddresses>
         <part xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">HTML</part>
      </ser:sendTestMessage> 
```

# android - 我应该如何更正代码以消除这些“未使用的值”警告？

> ID：11193599
> 
> 赞同：0
> 
> 时间：2012-06-25T16:47:03.653
> 
> 标签：android, eclipse, location

这些是我收到的错误消息，请告知。

未使用字段 LocationListActivity.adapter 的值

未使用字段 LocationListActivity.lv1 的值

未使用字段 LocationListActivity.titleString 的值

```
public class LocationListActivity extends ExpandableListActivity {

private ArrayAdapter<String> adapter = null;
private String name;
private ArrayList<List<LocationData>> locations; //Array list of all locations
private ArrayList<LocationData> locationList; // locations for each group
private ListView lv1;
private ArrayList<String> locationSection = new ArrayList<String>();
private ArrayList<String> sectionLocations = new ArrayList<String>();
private ArrayList<ArrayList<String>> allLocations = new ArrayList<ArrayList<String>>();
private String titleString;
private ExpandableListAdapter mAdapter;
private Button search;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState); 
    setContentView(R.layout.location_list_activity);

    search = (Button)findViewById(R.id.search_button);
    search.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            startActivity(new Intent(LocationListActivity.this, LocationListSearchActivity.class));
        }
    });

    //PARSE locations.xml
    try { 
        this.locations = new ArrayList<List<LocationData>>();
        this.locationList = new ArrayList<LocationData>();

        XmlResourceParser xrp = this.getResources().getXml(R.xml.locations);

        LocationData currentLocation = null;
        while(xrp.getEventType() != XmlResourceParser.END_DOCUMENT) {
            currentLocation = new LocationData();
            if(xrp.getEventType() == XmlResourceParser.START_TAG) {
                if(xrp.getName().equals("section")) {
                    locationSection.add(xrp.getAttributeValue(null, "title"));

                } 
                else if(xrp.getName().equals("location")) {
                    currentLocation.setBuilding((xrp.getAttributeValue(null, "building")));
                    name = xrp.getAttributeValue(null, "name");

                    sectionLocations.add(name);
                    currentLocation.setName(name);
                    currentLocation.setDetailName((xrp.getAttributeValue(null, "detailName")));
                    currentLocation.setLat(Double.parseDouble(xrp.getAttributeValue(null, "lat")));
                    currentLocation.setLng(Double.parseDouble(xrp.getAttributeValue(null, "lng")));
                    currentLocation.setPhone(xrp.getAttributeValue(null, "phone"));
                    locationList.add(currentLocation);
                }
            }
            else if(xrp.getEventType() == XmlResourceParser.END_TAG) {
                if(xrp.getName().equals("section")) {
                    allLocations.add(new ArrayList<String>(sectionLocations));
                    sectionLocations.clear();
                    locations.add(new ArrayList<LocationData>(locationList));
                    locationList.clear();
                }
            }
            xrp.next();
        }   
        xrp.close();}
        catch (XmlPullParserException  xppe) {} 
        catch (IOException e) {}

     // Set up our adapter
        mAdapter = new MyExpandableListAdapter();
        setListAdapter(mAdapter);

}

public class MyExpandableListAdapter extends BaseExpandableListAdapter {

    public Object getChild(int groupPosition, int childPosition) {
        return allLocations.get(groupPosition).get(childPosition);
    }

    public long getChildId(int groupPosition, int childPosition) {
        return childPosition;
    }

    public int getChildrenCount(int groupPosition) {
        return allLocations.get(groupPosition).size();
    }

    public TextView getGenericView() {
        // Layout parameters for the ExpandableListView
        AbsListView.LayoutParams lp = new AbsListView.LayoutParams(
                ViewGroup.LayoutParams.FILL_PARENT, 80);

        TextView textView = new TextView(LocationListActivity.this);
        textView.setLayoutParams(lp);
        // Center the text vertically
        textView.setGravity(Gravity.CENTER_VERTICAL | Gravity.LEFT);
        // Set the text starting position
        textView.setBackgroundResource(R.drawable.button_click);
        textView.setTypeface(null, android.graphics.Typeface.BOLD);
        textView.setTextColor(0xFF000000);
        textView.setPadding(55, 0, 0, 0);
        return textView;
    }

    public View getChildView(int groupPosition, int childPosition, boolean isLastChild,
            View convertView, ViewGroup parent) {
        TextView textView = getGenericView();
        textView.setText(getChild(groupPosition, childPosition).toString());
        textView.setTypeface(null, android.graphics.Typeface.NORMAL);
        return textView;
    }

    public Object getGroup(int groupPosition) {
        return locationSection.get(groupPosition);
    }

    public int getGroupCount() {
        return locationSection.size();
    }

    public long getGroupId(int groupPosition) {
        return groupPosition;
    }

    public View getGroupView(int groupPosition, boolean isExpanded, View convertView,
            ViewGroup parent) {
        TextView textView = getGenericView();
        textView.setText(getGroup(groupPosition).toString());
        return textView;
    }

    public boolean isChildSelectable(int groupPosition, int childPosition) {
        return true;
    }

    public boolean hasStableIds() {
        return true;
    }

}

  public boolean onChildClick (ExpandableListView parent, View v, int groupPosition, int childPosition, long id) {
    Intent i = new Intent( LocationListActivity.this, LocationInfoActivity.class );

        i.putExtra("name", locations.get(groupPosition).get(childPosition).getName());
        i.putExtra("building", locations.get(groupPosition).get(childPosition).getBuilding());
        i.putExtra("detailName", locations.get(groupPosition).get(childPosition).getDetailName());
        i.putExtra("lat", locations.get(groupPosition).get(childPosition).getLat());
        i.putExtra("lng", locations.get(groupPosition).get(childPosition).getLng());
        i.putExtra("phone", locations.get(groupPosition).get(childPosition).getPhone());
        startActivity(i);
    return false;
  }

@Override
public boolean onCreateOptionsMenu(Menu menu){
    MenuInflater inflater = this.getMenuInflater();
    inflater.inflate(R.menu.menu_home, menu);
    return true;
}

 //Called when user selects a menu item;
@Override
public boolean onOptionsItemSelected( MenuItem item ){

    switch(item.getItemId()) {
    case R.id.menu_search:
        startActivity(new Intent(this, LocationListSearchActivity.class));
        finish();
    break;  
    case R.id.menu_about:
        startActivity(new Intent(this, AboutActivity.class));
        finish();
    break;              
    }   
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T16:49:27.617

You can use

```
@SuppressWarnings("unused") 
```

**Note:** Similar thing happened to me. I had variables that all was used but warning still appeared. So in this case this approach is very good.

But if you have variables which you already not using nowhere, i recommend to remove them or comment them.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:49:47.140

You could remove or comment out those variables. If you don't want to do that you can also change the warnings within Eclipse.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T17:39:22.990

有时我知道使用了变量，但我无法弄清楚为什么它一直说它们不是。出于某种原因，程序其他部分中的某些错误可能会导致这种情况发生。或者，如果您不打算使用它突出显示的内容，那么我会删除它。

# excel - excel中的嵌套循环太多

> ID：11193607
> 
> 赞同：0
> 
> 时间：2012-06-25T16:48:03.333
> 
> 标签：excel, loops, nested

我有一个包含太多嵌套语句的代码

基本上我有82个县，需要按区划分县（1-7）我正在搜索的列表超过6000。有什么建议吗？

谢谢！

霍瓦

`=IF(C2=1,7,IF(C2=2,1,IF(C2=3,7, IF(C2=2,4,2, IF(C2=2,5,2 ,IF(C2=2,6,3, IF(C2=2,7,2,IF(C2=2,8,2,IF(C2=2,9,1,IF(C2=2,10,1,IF(C2=2,11,3,IF(C2=2,12,6,IF(C2=2,13,1,IF(C2=2,14,2,IF(C2=2,15,3,IF(C2=2,16,7,IF(C2=2,17,2,IF(C2=2,18,6,IF(C2=2,19,7,IF(C2=2,20,6,IF(C2=2,21,6,IF(C2=2,22,2,IF(C2=2,23,6,IF(C2=2,24,6,IF(C2=2,25,5,IF(C2=2,26,3,IF(C2=2,27,3,IF(C2=2,28,3,IF(C2=2,29,1,IF(C2=2,30,6,IF(C2=2,31,6,IF(C2=2,32,3,IF(C2=2,33,7,IF(C2=2,34,6,IF(C2=2,35,5,IF(C2=2,36,2,IF(C2=2,37,6,IF(C2=2,38,5,IF(C2=2,39,7,IF(C2=2,40,5,IF(C2=2,41,1,IF(C2=2,42,2,IF(C2=2,43,7,IF(C2=2,44,1,IF(C2=2,45,5,IF(C2=2,46,7,IF(C2=2,47,2,IF(C2=2,48,1,IF(C2=2,49,2,IF(C2=2,50,5,IF(C2=2,51,5,IF(C2=2,52,5,IF(C2=2,53,1,IF(C2=2,54,2,IF(C2=2,55,6,IF(C2=2,57,7,IF(C2=2,58,1,IF(C2=2,59,1,IF(C2=2,60,2,IF(C2=2,61,5,IF(C2=2,62,5,IF(C2=2,63,3,IF(C2=2,64,7,IF(C2=2,65,7,IF(C2=2,66,6,IF(C2=2,67,3,IF(C2=2,68,2,IF(C2=2,69,2,IF(C2=2,70,1,IF(C2=2,71,1,IF(C2=2,72,2,IF(C2=2,73,1,IF(C2=2,74,7,IF(C2=2,75,3,IF(C2=2,75,3,IF(C2=2,76,3,IF(C2=2,77,6,IF(C2=2,78,1,IF(C2=2,79,7,IF(C2=2,80,1,IF(C2=2,81,2,IF(C2=2,82,3,0))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T17:07:57.553

[http://office.microsoft.com/en-us/excel-help/vlookup-HP005209335.aspx](http://office.microsoft.com/en-us/excel-help/vlookup-HP005209335.aspx)

```
=vlookup(lookupValue, tableArray, column#inTableToReturn, rangelookup?) 
```

范围查找在哪里？如果您需要完全匹配，则应为 false

tableArray 应该是某个范围（可能是它自己的工作表），其中包含每个国家/地区的一列，下一列是您要返回的地区。

如果您有两列（国家和地区），那么 column# 将为 2。

# jquery - Vertical aligning and fading out correctly, order of operations in jQuery?

> ID：11193608
> 
> 赞同：0
> 
> 时间：2012-06-25T16:48:09.980
> 
> 标签：jquery

So I'm designing my portfolio and learning jQuery along the way. The problem I'm having is with the order of things, to get images to fade, align themselves, and fade back in nicely. If you go to my site: [http://graysonearle.com/newtest/](http://graysonearle.com/newtest/) and click on the first box "Frog Utopia" it should open up a little gallery. If you click on a thumbnail on the side, it swaps the image and posts a description. The problem is, you have to click on the first one twice to get it to go. In addition to this, if you switch between image sizes (some are long, some are fat) it holds the previous image's properties, so the description doesn't line up. Visit the site if you're willing to help and you'll see what I mean. Here is the relevant code:

```
$(document).ready(function() {
    // declare photo width variable
    var photo_width = 0;
    $('.chImg').click(function() {
        // get img src and chop it up       
        var srcv = $(this).attr('src');
        var sliced = srcv.slice(6);
        // return the base number of the image for correspdonding div
        // corresponding div is "d#"
        var divnum = sliced.substring(0, sliced.length - 4);
        // fade out active description div
        $(".activeDescript").each(function() {
            $(this).removeClass("activeDescript");
            $(this).fadeOut(110);
        });
        // change picture
        $("#chBox").fadeOut(110, function() {
            $("#chBox").html("<center><img src='" + sliced + "'/></center>");
        });
        // vertical align
        $("#chBox").vAlign();
        $('#chBox').waitForImages(function() {
            // wait for images before grabbing img width
            $("#chBox img").each(function() {
                photo_width = $(this).width();
                $(".description").width(photo_width);
                $("#d" + divnum).fadeIn(300);
                // make this descript active
                $("#d" + divnum).addClass("activeDescript");
            });
            $("#chBox").fadeIn(200);
        });
    });
});​ 
```

and vAlign.js:

```
 (function ($) {
    // VERTICALLY ALIGN FUNCTION
    $.fn.vAlign = function() {
        return this.each(function(i){
            var ah = $(this).height();
            var ph = $(this).parent().height();
            var mh = (ph - ah) / 2;
            $(this).css('margin-top', mh);
        });
    };
})(jQuery); 
```

# objective-c - 从 NSString 获取 char 并转换为 int

> ID：11193611
> 
> 赞同：1
> 
> 时间：2012-06-25T16:48:28.770
> 
> 标签：objective-c, nsstring, nsnumber, foundation

在 C# 中，我可以通过以下方式将字符串中的任何字符转换为整数

```
intS="123123";
int i = 3;
Convert.ToInt32( intS[i].ToString()); 
```

Objective-C 中这段代码的最短等价物是什么？

我见过的最短的一行代码是

```
[NSNumber numberWithChar:[intS characterAtIndex:(i)]] 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-25T17:04:23.010

许多有趣的建议，在这里。

这就是我认为最接近原始代码段的实现：

```
NSString *string = @"123123";
NSUInteger i = 3;
NSString *singleCharSubstring = [string substringWithRange:NSMakeRange(i, 1)];
NSInteger result = [singleCharSubstring integerValue];
NSLog(@"Result: %ld", (long)result); 
```

自然，获得你想要的东西的方法不止一种。

但是，正如您自己注意到的那样，Objective-C 也有其缺点。其中之一是它不尝试复制 C 功能，原因很简单，Objective-C 已经*是*C。所以也许你最好用纯 C 做你想做的事情：

```
NSString *string = @"123123";

char *cstring = [string UTF8String];
int i = 3;
int result = cstring[i] - '0';
NSLog(@"Result: %d", result); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T16:53:01.423

它不必明确地是一个`char`. 这是一种方法:)

```
NSString *test = @"12345";
NSString *number = [test substringToIndex:1];
int num = [number intValue];

NSLog(@"%d", num); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T16:57:06.270

只是为了提供第三种选择，您也可以使用[NSScanner](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html)：

```
NSString *string = @"12345";
NSScanner *scanner = [NSScanner scannerWithString:string];
int result = 0;
if ([scanner scanInt:&result]) {
    NSLog(@"String contains %i", result);
} else {
    // Unable to scan an integer from the string
} 
```

# ruby-on-rails - Rails has_many 到 has_many 有多个模型

> ID：11193615
> 
> 赞同：2
> 
> 时间：2012-06-25T16:48:46.343
> 
> 标签：ruby-on-rails, database, relational-database, has-many

模拟以下情况的最佳方法是什么：

```
Word
  belongs_to :wordable, :polymorphic => true

Phrase
  has_many :words, :as => :workable
  belongs_to :story

Line
  has_many :words, :as => :wordable    
  belongs_to :story

Story
 has_many :lines      
 has_many :phrases
 has_many :words, :through => :phrases
 has_many :words, :through => :lines 
```

我希望能够做到

```
 @story.words 
```

获取通过线条或短语链接到故事的所有单词的列表...

那可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T17:51:33.180

试试这个：

```
class Story

  has_many :lines      
  has_many :phrases

  def words(reload=false)
    @words = nil if reload
    @words ||= Word.where("(wordable_type = ? AND wordable_id IN (?)) OR
                            (wordable_type = ? AND wordable_id IN (?))", 
                           "Phrase", phrase_ids, "Line", line_ids)    
  end
end 
```

现在

```
story.words # returns line and phrase words
story.words.limit(5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:19:59.287

您可以`has_many :words, :through => XXX`从类中删除 2 个关系，并改为`Story`定义一个方法：`words`

```
def words 
  ([] << lines.collect {|line| line.words} << phrases.collect {|phrase| phrase.words}).flatten
end 
```

# c# - 如何根据 C# 中的签名获取方法的唯一 ID？

> ID：11193616
> 
> 赞同：3
> 
> 时间：2012-06-25T16:48:48.053
> 
> 标签：c#, .net, reflection

无论如何，我可以使用基于其签名的反射为特定类中的每个方法获取一个 uniqueId 吗？我知道 GetHashCode 方法，但我希望保证唯一性。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T16:52:46.133

Type.FullName + MemberInfo.Name + 方法的参数类型，任何较短的都不会是唯一的。

如果您想将其限定为特定类型 - 不需要类型的 FullName。如果您只在运行时需要它 - MemberInfo 对象本身可能是最好的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T16:52:48.443

它必须有多独特？什么尺寸？

如果您只是使用逗号连接返回类型和每个参数类型，您将拥有一个唯一标识此签名的字符串。它也恰好对签名进行了完全编码，但这并不一定是坏事。

如果你想要更短的东西，你可以：

*   使用加密散列函数对其进行散列。慢，哈希长，但极有可能是唯一的
*   使用简单的散列函数对其进行散列。可能会发生冲突，但 Id 更短。
*   将它们存储在某种查找表或数据库中。然后，您的 ID 只是顺序整数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T16:54:56.590

使用 System.Reflection 命名空间：http:
[//msdn.microsoft.com/en-us/library/system.reflection.aspx](http://msdn.microsoft.com/en-us/library/system.reflection.aspx)

**方法名称：**
System.Reflection.MethodBase.GetCurrentMethod().Name

**方法类型：**
System.Reflection.MethodBase.GetCurrentMethod().DeclaringType

**方法参数：**
System.Reflection.MethodBase.GetCurrentMethod().GetParameters()。

# routes - Ember.js 中的状态不使用路由？

> ID：11193619
> 
> 赞同：8
> 
> 时间：2012-06-25T16:48:52.897
> 
> 标签：routes, ember.js, statechart

我试图了解 Ember.js 中的状态是否仅设计/假定为在路由管理器中定义，以及路由是否是 Ember 不可或缺的。我见过的几乎所有[指南似乎都假设您希望状态和路线完全匹配。](http://emberjs.com/guides/outlets/)

我想创建不依赖于路由的状态，而只依赖于应用程序的状态。例如，在电子邮件客户端中，我可能有一个状态“userHasSpecifiedRecipient”。只有当此状态为真时，我才能启用表单的消息框。但显然我不希望网址是：

`myEmailClient.com#composingMessage_userHasSpecifiedRecipient_userIs...`等等

有这方面的例子吗？

第二个问题：我可以混合与路由耦合的状态和不耦合的状态吗？

最后：我看到一些建议，如果人们想要并发状态之类的东西，建议他们使用 Ember 的[sproutcore-statechart插件。](https://github.com/emberjs-addons/sproutcore-statechart)这仍然是真的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T00:03:49.763

在 EmberJS 中，有一个[有限状态机](http://en.wikipedia.org/wiki/Finite_state_machine)Ember.StateManager 的实现。StateManager 使用 Ember.State 来表示状态机中的状态，有`enter`和`exit`功能等。看看[Class: Ember.StateManager](http://docs.emberjs.com/#doc=Ember.StateManager&src=false)。

对于使用 StateManager 的示例，Ember.View 使用它来管理视图的不同状态。另一个例子是 Ember-Data，它使用状态管理器来跟踪记录可能具有的不同状态。

为了让生活更轻松并避免样板代码，`Router`在最新版本的 EmberJS 中有一个实现，这仍然是一个正在进行中的工作，每周更新一到两次。[您可以在GitHub 下载](https://github.com/emberjs/ember.js/downloads)上找到最新的。

`Ember.Router`是`Ember.StateManager`负责提供基于 URL 的应用程序状态检测的子类。应用程序实例在`Ember.Router`应用程序加载时检测浏览器 URL，并尝试将其与特定应用程序状态匹配。此外，路由器将更新 URL 以反映应用程序的状态随时间的变化。（[Ember 源中的 JSDoc](https://github.com/emberjs/ember.js/blob/master/packages/ember-routing/lib/router.js)）

此外，由于`Ember.Router`extends`Ember.StateManager`和`Ember.Route`extends `Ember.State`，它们是可以互换的。事实上，仅仅一天，就为支持状态和路由的混合提供了更多支持，请参阅[Support basic States inside of Routes](https://github.com/emberjs/ember.js/commit/8fd57b354c0e46f2f732a1ff1d75a078200a6fb1)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T18:47:29.820

您可以将路由器位置实现更改为“无”以禁用此功能。其他方法是“哈希”或“历史”（使用 github 上的当前 ember-latest.js）。

[https://github.com/joliss/ember.js/blob/50aff86ef5b6847108bc8c32364171815c230d36/packages/ember-application/lib/system/location.js](https://github.com/joliss/ember.js/blob/50aff86ef5b6847108bc8c32364171815c230d36/packages/ember-application/lib/system/location.js)

```
App.Router = Ember.Router.extend({
    location : Ember.Location.create({
        implementation : 'none'
    })
}); 
```

# c++ - storage allocated on class definiton

> ID：11193621
> 
> 赞同：1
> 
> 时间：2012-06-25T16:49:11.627
> 
> 标签：c++

Given the following definition:

```
 class C{}; 
```

How much space gets allocated? What are the methods created at this stage? Now I thought space is not allocated until instantiation but I guess this is only partly true. Edit: I checked in my compiler sizeof(C) but it is 1 byte though i am not creating any object of the class.

Try this link [http://www.informit.com/guides/content.aspx?g=cplusplus&seqNum=319](http://www.informit.com/guides/content.aspx?g=cplusplus&seqNum=319)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T16:52:43.190

最有可能的大小是`1`，但仅当您创建类的实例时。对象的大小不能是`0`。如果您不创建实例，则添加的唯一空间应该是默认成员函数使用的空间，应该优化掉。

生成了编译器生成的默认构造函数、复制构造函数、移动构造函数、析构函数、赋值运算符和移动赋值运算符，尽管它们什么都不做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:54:43.783

C++ 标准唯一保证的是大小将非零。

它的实现定义了确切的大小。大多数实现的大小都`1`为空类。

请注意，只有在某些代码需要这些函数时，才会合成默认成员函数。此外，这些函数不会增加类实例的大小。它们不是为每个对象分配的。

好读，用 Bjarne 自己的话来说：
[为什么一个空类的大小不为零？](http://www2.research.att.com/~bs/bs_faq2.html#sizeof-empty)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T17:03:01.230

（以下答案已在 GCC 4.4 上得到验证。）

像您这样简单的非多态类型的简单定义`C`既不会使可执行文件变大，也不会占用堆栈（或堆或其他任何地方）上的任何空间。它会在编译时临时扩大编译器的符号表，如果你要求编译器这样做，它可能会发出一个调试符号，但我不认为这是你问题的重点。否则，在实例化`C`类型的实际对象之前，您不会占用空间`C`，如

```
C your_c;
C my_c; 
```

为了能够唯一寻址，每个类型的对象都`C`占用一个未使用的字节。

现在，要完整：有一个隐藏的中间问题。您的工具链可能会或可能不会发出未使用类型的符号作为预链接对象文件的一部分——名称以“.o”或“.obj”结尾的文件。我的编译器没有（我刚试过），但你的可能。

如果所有这些看起来都太技术化，那么答案的一个公平近似或总结是：您的代码不占用空间。

# python - How do I collect up logs for an App Engine request using Python logging?

> ID：11193627
> 
> 赞同：2
> 
> 时间：2012-06-25T16:49:30.160
> 
> 标签：python, google-app-engine, logging, python-2.7, webapp2

Using Google App Engine, Python 2.7, `threadsafe:true`, webapp2.

I would like to include all `logging.XXX()` messages in my API responses, so I need an efficient way to collect up all the log messages that occur during the scope of a request. I also want to operate in `threadsafe:true`, so I need to be careful to get only the right log messages.

Currently, my strategy is to add a `logging.Handler` at the start of my webapp2 dispatch method, and then remove it at the end. To collect logs only for my thread, I instantiate the `logging.Handler` with the name of the current thread; the handler will simply throw out log records that are from a different thread. I am using thread name and not thread ID because I was getting some unexpected results on `dev_appserver` when using the ID.

Questions:

1.  Is it efficient to constantly be adding/removing `logging.Handler` objects in this fashion? I.e., every request will add, then remove, a `Handler`. Is this "cheap"?

2.  Is this the best way to get only the logging messages for my request? My big assumption is that each request gets its own thread, and that thread name will actually select the right items.

3.  Am I fundamentally misunderstanding Python logging? Perhaps I should only have a single additional Handler added once at the "module-level" statically, and my dispatch should do something lighter.

Any advice is appreciated. I don't have a good understanding of what Python (and specifically App Engine Python) does under the hood with respect to logging. Obviously, this is eminently possible because the App Engine Log Viewer does exactly the same thing: it displays all the log messages for that request. In fact, if I could piggyback on that somehow, that would be even better. It absolutely needs to be super-cheap though - i.e., an RPC call is not going to cut it.

I can add some code if that will help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T14:40:09.280

我在这里发现了很多好处：

```
from google.appengine.api import logservice
entries = logservice.logs_buffer().parse_logs() 
```

# javascript - Javascript - 寻找 prependTo 的替代方案，这样它就不会添加多个项目

> ID：11193631
> 
> 赞同：1
> 
> 时间：2012-06-25T16:49:37.113
> 
> 标签：javascript, jquery

我有一些代码。当它正确运行时，我会创建一条成功消息并使用 prependTo 将其显示在屏幕上。问题是，当用户成功执行两次操作时，我最终会收到两条成功消息。

有没有办法覆盖我的成功信息。这是我目前在代码中处理它的方式：

```
 $((is_error ? "<p class=' alert alert-error'>"+message+"</p>)" : "<p class=' alert alert-success'>"+message+"</p>")).prependTo("#feedback-container"); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T16:51:14.503

而不是`prependTo`你可以使用`html`，所以你不会预先而是替换你的消息容器的内容：

```
$("#feedback-container").html(is_error ? "<p class=' alert alert-error'>"+message+"</p>" : "<p class=' alert alert-success'>"+message+"</p>"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T16:51:24.603

你可以简单地使用这个：

```
$("#feedback-container").html((is_error ? "<p class=' alert alert-error'>"+message+"</p>)" : "<p class=' alert alert-success'>"+message+"</p>")); 
```

所以你的容器的全部内容都被替换了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T16:52:33.637

```
$("#feedback-container").children(".alert:first-child").remove().end().prepend( "stuff" ); 
```

工作演示[http://jsfiddle.net/uVVYN/](http://jsfiddle.net/uVVYN/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T16:57:48.787

根据定义 prependTo 将“插入到此参数指定的元素的开头”。换句话说，它将**插入**但不会**替换**。

您正在寻找的很可能是使用给定内容设置匹配元素的 innerHTML 的**html方法：http:** [//api.jquery.com/html/](http://api.jquery.com/html/)

**html()**的用法与**prependTo()**略有不同，但概念上相同：

```
 $("#feedback-container").html((is_error ? "<p class=' alert alert-error'>"+message+"</p>)" : "<p class=' alert alert-success'>"+message+"</p>")); 
```

# sql - 从多列中选择不同的列到一列

> ID：11193639
> 
> 赞同：1
> 
> 时间：2012-06-25T16:50:04.080
> 
> 标签：sql, select

我有这个：

```
ColumnA    ColumnB    ColumnC
Dog        Soda       Book
CatIce     Juice      Notebook      
Bird       Water      Pencil
Dog        Water      Notebook 
```

通过使用此选择：

```
select ColumnA, ColumnB, ColumnC from table 
```

我想要一个这样的清单：

```
ColumnD
Bird
Book
Cat
Dog
Ice
Juice
Notebook      
Pencil
Soda
Water 
```

我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:52:30.890

使用 UNION

```
SELECT ColumnA
FROM table

UNION

SELECT ColumnB
FROM table

UNION

SELECT columnC
FROM table 
```

# python - TypeError：Python 3.2 中的“int”对象不可调用？

> ID：11193640
> 
> 赞同：3
> 
> 时间：2012-06-25T16:50:04.470
> 
> 标签：python, input, pygame, typeerror, tic-tac-toe

所以我正在用python 3.2编写一个井字游戏，我花了很多时间试图解决这个问题并检查我的代码、脚本或任何你想要调用它的东西，很多次但仍然找不到它. 我用谷歌搜索了它，所有的答案都令人困惑，或者这个人正在编写与我的井字游戏不同的脚本。请注意，我只是python的初学者。当我尝试运行它时出现错误：

```
Traceback (most recent call last):
  File "/Users/user/Desktop/tic tac toe game.py", line 41, in <module>
    input = input("Select a spot:")
TypeError: 'int' object is not callable" 
```

这意味着什么？这是它说它有问题的代码：

```
while True:

    input = input("Select a spot:")
    input = int(input) 
```

如果你能帮助我，那就太重要了。这太烦人了，我一直在努力解决它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-25T16:51:50.803

[input()](http://docs.python.org/release/3.1.5/library/functions.html#input)是一个 Python 函数，您将它*用作*函数和标识符。

第一次使用`input`作为变量名将起作用，但第二次通过循环*将不再有`input()`函数*，因为该名称现在与整数变量相关联。

`input()`因此，您只有一个名为 的变量，而不是函数`input`，因此会出现错误（@poke 和 @DSM 在评论中也提到过）

使用`answer`作为你的变量名将是一个更好的主意：

```
while True:
    answer = input("Select a spot:")
    answer = int(answer) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-25T16:52:18.537

您正在使用`input`结果的名称，它替换了`input`您尝试调用的函数。使用不同的名称。

编辑：当您循环遍历时，到第二次迭代滚动时，您已经将变量重新绑定`input`到您的用户输入，因此它不再是内置函数，而是您刚刚将用户输入转换为的整数。该名称`input`不能同时指代两个不同的事物。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-25T17:00:14.087

第一次打电话

```
input("Select a spot:") 
```

它工作正常 - 返回一个字符串，您将其转换为 int 并将其存储到`input`.

第二次调用 时`input`，它会获取您刚刚存储的整数并尝试将其作为函数运行。这失败了，您看到了错误消息。

# jquery - 默认情况下在 iframe 中打开传出链接？

> ID：11193643
> 
> 赞同：0
> 
> 时间：2012-06-25T16:50:06.983
> 
> 标签：jquery, html, iframe, anchor

我的网页上有许多传出链接，我想在浏览器的新选项卡中打开，但在`iframe`我自己的网站内。

目前我正在使用以下代码：

```
<a href="www.example.com" target="_blank" onclick="this.href='http://mysite.com/article.php?link=www.example.com'">Example.com</a> 
```

这似乎不是一个有效的解决方案（当我用谷歌结果读出一些东西时），我也必须在每个链接中手动执行此操作。

有没有其他方法可以做到这一点？JQuerysh 方式对我也有好处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:06:49.667

我假设您希望所有链接自动重定向到 iFrame，而无需修改现有代码。在这种情况下，您可以创建一个函数来重定向到 iFrame，然后使用 jQuery 选择所有 a 元素并添加一个 onlick 事件。

```
$("a").one("click", function () {
  this.href = 'http://mysite.com/article.php?link=' + this.href;
}); 
```

您可以编写一些额外的代码来删除“http://”并对其进行 URL 编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:02:02.053

**如果您想要一个带有点击 url 的 iframe 的网站框架，试试这个...**

您必须创建一个新页面来充当代理。看来您已经通过“http://mysite.com/article.php?link=www.example.com”了解了这一点。您将链接到代理页面，并且代理页面将保存 iframe。像这样的东西：

关联： `<a href="article.php?link=example.com" target="_blank">Example.com</a>`

article.php 包含： `<iframe src="<?php echo $_GET['link']; ?>" />`

解决方案没有错误处理并且不对 URL 进行编码。

**或者，如果您只想打开当前 iframe 中的链接，请使用此..**

关联： `<a href="http://example.com" target="myframe">Example.com</a>`

框架： `<iframe id="myframe" />`

# regex - 使用 Oracle REGEXP_SUBSTR 提取字符串

> ID：11193646
> 
> 赞同：1
> 
> 时间：2012-06-25T16:50:25.843
> 
> 标签：regex, oracle, oracle11g, regexp-substr

我在 Oracle 11g 中使用 REGEXP_SUBSTR，我在尝试提取以下字符串时遇到了困难。

我的查询是：

```
SELECT regexp_substr('CN=aTIGERAdmin-Admin, CN=D0902498, CN=ea90045052, CN=aTIGERCall-Admin,', '[^CN=]*\,', 1, rownum) line
 FROM dual
 CONNECT BY LEVEL <= length('CN=aTIGERAdmin-Admin, CN=D0902498, CN=ea90045052, CN=aTIGERCall-Admin,') - 
                     length(REPLACE('CN=aTIGERAdmin-Admin, CN=D0902498, CN=ea90045052, CN=aTIGERCall-Admin,', ',', '')) 
```

在此查询中，我在尝试匹配来自此查询的确切字符串 'CN=' 时遇到问题，我需要输出如下所示：

```
CN=aTIGERAdmin-Admin,
CN=D0902498,
CN=ea90045052,
CN=aTIGERCall-Admin, 
```

并以这种格式，以逗号结尾。

我现在这样做的方式是砍掉“CN =”，但我实际上需要这部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T18:24:41.380

我认为这将返回您正在寻找的结果集：

```
SELECT REGEXP_SUBSTR(d.s,'CN=.*?,', 1, ROWNUM) line
  FROM (SELECT 'CN=aTIGERAdmin-Admin, CN=D0902498, CN=ea90045052, CN=aTIGERCall-Admin,'
        AS s FROM dual) d
CONNECT BY LEVEL <= LENGTH(d.s) - LENGTH(REPLACE(d.s,',','')) 
```

这里使用的正则表达式技巧是指定`?`修饰符（在 之后`.*`）以使匹配“非贪婪”。默认匹配（没有`?`修饰符）是“贪婪的”，因为它将匹配尽可能多的字符串。在您的情况下，您希望匹配在找到的第一个逗号处结束。此处的目的是匹配文字字符串 'CN=' 后跟任意数量的字符（零、一个或多个），直到遇到的第一个逗号。

这将适用于 Oracle 10g 和 11g。

在 11g 中，REGEXP_COUNT 函数可以代替您的“命令计数”计算出现次数。

```
CONNECT BY LEVEL <= REGEXP_COUNT(d.s,'CN=.*?,') 
```

（顺便说一句......通过使用子查询来返回文字字符串，文字字符串只需指定一次。这使得更改字符串进行测试变得更加容易，而不必在多个地方进行更改。）

* * *

附录：

我可以确认返回值中包含逗号。样本输出：

```
LINE
-----------------------
CN=aTIGERAdmin-Admin,                                                 
CN=D0902498,                                                          
CN=ea90045052,                                                        
CN=aTIGERCall-Admin, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:02:03.027

我不是 LDAP 大师，但正则表达式`CN=[^,]+`( `C`, then `N`, then 等号，贪婪地后跟多个非逗号) 对你有用吗？

另外，您知道`REGEXP_COUNT`11g 中的新功能吗？

```
SQL> SELECT REGEXP_SUBSTR('CN=aTIGERAdmin-Admin, CN=D0902498, CN=ea90045052, CN=aTIGERCall-Admin,', 'CN=[^,]+', 1, ROWNUM) line
  2   FROM dual
  3   CONNECT BY LEVEL <= REGEXP_COUNT('CN=aTIGERAdmin-Admin, CN=D0902498, CN=ea90045052, CN=aTIGERCall-Admin,', 'CN=[^,]+')
  4  /

LINE
----------------------------------------------------------------------------------------------------
CN=aTIGERAdmin-Admin
CN=D0902498
CN=ea90045052
CN=aTIGERCall-Admin

SQL> 
```

# c - 在内核模块中执行 shell 命令

> ID：11193648
> 
> 赞同：5
> 
> 时间：2012-06-25T16:50:41.280
> 
> 标签：c, linux, linux-kernel, driver

是否可以在内核模块中执行 shell 命令。我知道我们可以使用`system`子程序在用户空间 C 代码中做到这一点。
我正在调试一个有内存泄漏问题的内核模块。在无限循环中执行 insmod 和 rmmod module.ko 后，系统会在几分钟内用 8G RAM 耗尽内存。
在调用负责释放内存的 API 之前和之后使用命令了解内存状态会很有帮助，`free`这样我就可以知道 API 是否正常工作。
这就是我调试的方式。如果有任何其他方法，请分享。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T20:48:57.543

你可以使用`call_usermodehelper`函数。请参阅如何在[LXR#1](http://lxr.linux.no/linux+v3.4.4/lib/kobject_uevent.c#L296)或[LXR#2](http://lxr.linux.no/linux+v3.4.4/fs/nfs/objlayout/objlayout.c#L674)上使用它的示例。

升级版：

```
argv[0] = "/bin/bash";
argv[1] = "-c";
argv[2] = "/usr/bin/free";
argv[3] = NULL;

envp[0] = "HOME=/";
envp[1] = "TERM=linux";
envp[2] = "PATH=/sbin:/usr/sbin:/bin:/usr/bin";
envp[3] = NULL;

call_usermodehelper(argv[0], argv, envp, UMH_WAIT_EXEC); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-25T18:02:57.153

您不能**在**内核模块中运行 shell 命令。内核模块中的代码可以使命令运行，但它会在普通用户进程中运行。

`free`对内核内存泄漏几乎没有帮助。
最好将所有分配和释放包装在内核代码中，并维护分配内存的计数器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T22:58:12.897

无法从内核内部运行 shell 命令。您可以改为通过调用合适的 procfs API 来读取 /proc/meminfo 文件来读取 /proc/meminfo 文件。该虚拟文件具有有关系统内存的有用内存统计信息。

# assembly - 使用视觉工作室手臂组装器

> ID：11193653
> 
> 赞同：1
> 
> 时间：2012-06-25T16:51:13.480
> 
> 标签：assembly, windows-mobile, arm

我有一个适用于 Windows Mobile 6 TI OMAP 3430 平台的 Visual Studio 2008 C++03 项目，我想在其中使用 ARM Cortex A8 NEON 指令优化一些功能。Visual Studio 2008 包括 Microsoft ARM Assembler v15.00.20720 (armasm.exe)

我在 test.h 中声明了一个函数

```
extern "C" unsigned __int32 Test(); 
```

并在 test.asm 中实现为

```
ALIGN
Test FUNCTION
    EXPORT Test
    ldr r0, [r15]   ; load the PC value in to r0
    mov pc, lr      ; return the value of r0
ENDFUNC 
```

我在预链接事件中执行 arm 汇编程序：

```
armasm.exe -32 -CPU ARM8 test.asm test.obj 
```

但是，我从工具中得到了这些错误

```
test.asm(4) : error A0064: code inside data section
1>    ldr r0, [r14]   ; load the PC value in to r0
test.asm(5) : error A0064: code inside data section
1>    mov pc, lr      ; return the value of r0
test.asm(7) warning : A0063: missing END directive
1>ENDFUNC 
```

使用 Visual Studio ARM 汇编程序的正确语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T22:25:35.990

ARMASM 使用起来非常简单，因为许多选项默认为合理的值。这是您可以使用的代码版本：

```
 AREA my_test, CODE, READONLY  ; name this block of code
  EXPORT test

test proc      ; start of a procedure
     ldr r0,[r15]
     mov pc,lr
     endp      ; end of a procedure

     end       ; end of the file 
```

**更新：**忘记包含“区域”

# vb.net - CRM 2011 sdk - quickest/most efficient way to get contact info + associated list IDs

> ID：11193657
> 
> 赞同：2
> 
> 时间：2012-06-25T16:51:21.850
> 
> 标签：vb.net, linq, dynamics-crm-2011

Our CRM 2011 database contains approx. 20000 contacts, and I need to loop through all of them using the SDK. Currently I'm finding the following linq query takes a very long time to execute:

```
Dim contactList = From c In orgService.ContactSet 
  Select New With {
    Key .ContactId = c.ContactId,
    Key .EMailAddress1 = c.EMailAddress1,
    Key .ListIds = From l In c.listcontact_association Select l.ListId
  } 
```

As you can see, I just need a couple of fields from each Contact, and a list of associated Marketing List IDs. Perhaps it's taking a long time because it's doing an additional query (to get the list IDs) within each contact result?

I'm fairly new to Linq, so not sure how the above translates to actual FetchXML communication. Is there a more efficient way of getting that info which would result in shorter query run time?

**More Info:** I'm writing code to sync a CRM database with a CreateSend database. So I do need to go through *all* contact records, not only adding to the CS database, but also reflecting changes in list membership and updating activity or other info for each contact where needed. The sync process will eventually run nightly on the CRM server itself, so it's expected to take time to run, but of course I want to make it as efficient as possible.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:36:37.797

在没有更多信息的情况下，看起来您的查询实际上是两个 - 一个查询用于获取联系人列表，然后另一个查询用于获取列表 ID 列表。这意味着 SQL Server 将返回 20,000 个联系人的完整列表，然后*对于每个*联系人，您的代码会向 SQL Server 询问相关列表 ID 的列表。

这意味着您要对 SQL Server 进行***20,000 + 1***次单独调用（尽管这实际上是一个抽象的总数 - CRM SQL 翻译器实际上做的不止这些，但它不会增加显着的开销）。

因此，您真正想要做的只是进行**1 个**查询来获取您的*所有*数据，*然后*开始使用它。我对 VB.NET 的熟练程度不足以进行翻译，但下面的 C# 代码应该可以让你大部分时间到达那里。

```
// Gets all contacts and list ids in a flat result set
var contacts = from c in orgService.ContactSet
               join lms in orgService.ListMemberSet on c.ContactId equals lms.EntityId.Id into leftJoinedContact
               from ljc in leftJoinedContact.DefaultIfEmpty()
               where ljc.EntityType == Xrm.Contact.EntityLogicalName
               select new
               {
                   c.ContactId,
                   c.EMailAddress1,
                   ljc.ListId
               };

// Calls .ToList() to put the result set in memory
var contactList = contacts.ToList();

// Manipulates the result set in memory, grouping by contact info
var newContactList = contactList.GroupBy(x => new {x.ContactId, x.EMailAddress1})
    .Select(x => new {x.Key.ContactId, x.Key.EMailAddress1, Ids = x.Select(y => y.ListId).ToList()})
    .ToList();

// var contactsWithListIds = newContactList.Where(x => x.Ids.Where(y => y != null).Any()).ToList();
// var contactsWithoutListIds = newContactList.Where(x => x.Ids.Where(y => y != null).Any()).ToList();

foreach (var contact in newContactList)
{
    throw new NotImplementedException();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:12:49.760

是的！

但我们需要更多信息。最快的方法是使用直接的 SQL（即过滤视图）。

第二种最快的方法是直接使用 FetchXML（尽管有些人可能会争论 linq 在性能方面与此相当）。

如果您可以过滤查询以将 20,000 条记录减少到只需要的记录，那么您将节省最多的时间。所以我的第一个问题是你为什么要遍历 20,000 条记录？您是否需要全部处理它们，或者您是否需要根据某些标准检查它们，然后根据它们是否符合标准来做一些事情？

# highcharts - 如何更改高图中选定点的样式？

> ID：11193658
> 
> 赞同：4
> 
> 时间：2012-06-25T16:51:22.577
> 
> 标签：highcharts

我想改变选定点的风格。当我选择点时，它是灰色的。我希望我选择的所有点都是红色的。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-25T17:20:25.207

您将样式设置`markers.state.select`为：

```
 plotOptions: {
        series: {
            allowPointSelect: true,
            marker: {
                states: {
                    select: {
                        fillColor: 'red',
                        lineWidth: 0
                    }
                }
            }
        }
    } 
```

示例：http: [//jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-marker-states-select-fillcolor/](http://jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-marker-states-select-fillcolor/)

参考：[http ://www.highcharts.com/ref/#plotOptions-scatter-marker-states-select](http://www.highcharts.com/ref/#plotOptions-scatter-marker-states-select)

**更新：**对于条形图，配置应该略有不同（不知道为什么）：

```
plotOptions: {
    series: {
        allowPointSelect: true,
        states: {
            select: {
                color: 'red'
            }
        }
    }
} 
```

示例：http: [//jsfiddle.net/8truG/](http://jsfiddle.net/8truG/)

# jquery - jquery horizontal slide like marquee

> ID：11193664
> 
> 赞同：0
> 
> 时间：2012-06-25T16:51:53.550
> 
> 标签：jquery, marquee

JQUERY

```
 $(document).ready(function(){
            var wi = 0;
            window.setInterval(function() {
                wi += 15;
             $(".students-holder").animate({"position": "relative","left": wi});
            }, 1);
        }) 
```

CSS

```
.students{
background: #262525;
width: 860px;
height: 54px;
padding: 0 5px;
position:relative;
overflow:hidden;}

.students-holder{
min-width:2000px;
position:absolute;
left:-50px;}

.inline-image{
display:inline-block;} 
```

HTML

```
<div class="students">
<div class="students-holder">
    <img class="inline-image" src="https://graph.facebook.com/mardhagz/picture"/>
    <img class="inline-image" src="https://graph.facebook.com/mardhagz/picture"/>
    <img class="inline-image" src="https://graph.facebook.com/mardhagz/picture"/>
    <img class="inline-image" src="https://graph.facebook.com/mardhagz/picture"/>
</div></div> 
```

DEMO LINK [http://jsfiddle.net/2vCNR/](http://jsfiddle.net/2vCNR/)

There :/ anyone know like marquee direction to left? if mouseover will stop(); mouseout run(); :/ please help...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:12:28.880

使用这个 JQuery ：

```
 $(document).ready(function(){
        var wi = 0;
        window.setInterval(function() {
            wi -= 5;
         $(".students-holder").animate({"position": "relative","left": wi});
        }, 1);
    }) 
```

# javascript - Javascript 正则表达式无法正常工作

> ID：11193665
> 
> 赞同：0
> 
> 时间：2012-06-25T16:51:56.727
> 
> 标签：javascript, jquery, ajax

我正在尝试使用 javascript 验证电子邮件，但由于某种原因它无法正常工作。
**问题**：当我输入***有效***的电子邮件地址时，它仍然会提醒我的地址有***问题***......
我在这里缺少什么？这是代码：

```
 $(document).ready(function(){

    $('.info').hide();
    $('#button').click(function(){

    var name = encodeURIComponent($('#name').val());
    var email = encodeURIComponent($('#email').val());
    var message = encodeURIComponent($('#message').val());
    var reg = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;

    //if name is empty
    if($('#name').val() == 0){

    $('.info').html('<p style="font-weight:bold;text-align:center;font-size:20px;"> Molimo unesite Vaše ime!</p>').fadeIn(1000);
    }
    //if name is less than three characters
    else if(name.length < 3){
    $('.info').html('<p style="font-weight:bold;text-align:center;font-size:20px;"> Molimo unesite ime duže od tri slova!</p>').fadeIn(1000);

    }
     // if email is empty
     if ($('#email').val() == 0){
    $('.info').html('<p style="font-weight:bold;text-align:center;font-size:20px;"> Molimo unesite Email!</p>').fadeIn(1000);

    }
    // if email AND name are empty
    if($('#email').val() == 0 && $('#name').val() == 0 ){
    $('.info').html('<p style="font-weight:bold;text-align:center;font-size:20px;"> Molimo unesite Email!<br/>Molimo unesite ime!</p>').fadeIn(1000);

    }
    //if mail adress is NOT valid
    if(reg.test(email)==false){
    //alert('please enter valid mail!');
    $('.info').html('<p style="font-weight:bold;text-align:center;font-size:20px;">Molimo unesite ispravan Mail!</p>').fadeIn(1000);
    }

            //if mail adress IS VALID (this is not working...)
    if($('#name')!= '' && reg.test(email) !=false ){

            //alert(data);
    var data = 'name=' + name + '&email=' + email + '&message=' + message;

           $.ajax({
           type:"POST",
           url:'kontakt2.php',
           cache:'false',//IE FIX
           data: data,

           success: function(){
           //alert('THX for your mail!');
           } //end sucess 
           });
           } //end if statment for VALID mail
           //return false prevent Redirection
           return false;
           });

           }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:55:44.207

线

```
if($('#name')!= '' && reg.test(email) !=false ) 
```

应该是

```
if($('#name').val()!= '' && reg.test(email) !=false ) 
```

（或只是`if (name != '' && reg.test(email) != false )`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:03:58.940

在此语句中，您正在检查输入值是否为 0。这不是检查空字段的方法：

```
if ( $('#name').val() == 0 ) 
```

稍微好一点的方法是：

```
if ( !$('#name').val() ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T19:22:08.273

我设法通过修改此代码解决了这个问题：

```
if($('#name').val()!= '' && reg.test(email) !=false ) 
```

进入这个：

```
if(reg.test($('#email').val()) && $('#name').val()!='') 
```

我很确定**reg.test(email)**部分上面的代码不起作用，因为**encodeURIComponent**。感谢 Rodolfo 和 Pointy 的回答：）

# php - php strtotime function (2)

> ID：11193668
> 
> 赞同：1
> 
> 时间：2012-06-25T16:52:10.790
> 
> 标签：php, date, strtotime

I started to learn PHP and have to find a mistake (maybe in this code):

```
if($newvalues["year"] != null)
   $newvalues["year"] = date("Y-m-d", strtotime($newvalues["year"]."-01-01")); 
```

The new date has to be saved in the array "$newvalues", but when I press the save button, it doesn't save anything. Only if the textfield "year" is empty, the other items can be saved.

Can anyone help me, please? Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:54:01.327

你基本上在做：

```
100 * 80 / 80 
```

只需将其保存为

```
if($newvalues["year"] != null)
   $newvalues["year"] .= "-01-01"; 
```

或者更好的是，将其表示为一个`DateTime`对象：

```
$newvalues = array("year" => 2012);
if ($newvalues["year"] != null) {
    $newvalues["year"] = new DateTime("{$newvalues["year"]}-01-01");
}
var_dump($newvalues["year"]); 
```

使用 DateTime 对象（以及 DateTime 系列）可以让您更好、更灵活地控制日期/时间。

# javascript - 计时器显示解析时间c#

> ID：11193669
> 
> 赞同：1
> 
> 时间：2012-06-25T16:52:12.683
> 
> 标签：javascript, asp.net

我的 aspx 页面中有一个提交按钮。按钮的“单击”事件执行“.txt”文件的解析，并将结果存储在表格中并将页面重定向到另一个页面。现在的问题是解析大约需要 1.5 分钟。我需要实现一个进度条和一个计时器，它会显示完成操作还剩下多少时间。这包括计算完成数据库操作所需的时间并将此值分配给计时器。谁能帮我实现这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:58:31.127

你可以试试这段代码（Ajax：UpdatePanel + UpdateProgress）

```
<form id="form1" runat="server">
        <asp:ScriptManager ID="ScriptManager1" runat="server" />
        <asp:UpdateProgress runat="server" id="PageUpdateProgress">
            <ProgressTemplate>
                Loading...
            </ProgressTemplate>
        </asp:UpdateProgress>
        <asp:UpdatePanel runat="server" id="Panel">
            <ContentTemplate>
                <asp:Button runat="server" id="UpdateButton" onclick="UpdateButton_Click" text="Update" />
            </ContentTemplate>
        </asp:UpdatePanel>
    </form>

protected void UpdateButton_Click(object sender, EventArgs e)
{
    System.Threading.Thread.Sleep(5000); //Your treatment
} 
```

# pixel-shader - 像素着色器实际上是做什么的？

> ID：11193670
> 
> 赞同：8
> 
> 时间：2012-06-25T16:52:16.757
> 
> 标签：pixel-shader, direct3d11

我对图形编程比较陌生，而且我刚刚阅读了一些书籍并且一直在浏览教程，所以如果这似乎是一个愚蠢的问题，请原谅我。

我已经掌握了directx11 的基础知识并开始运行，现在我想找点乐子。所以很自然地，我一直在大量阅读着色器管道，我已经着迷了。编写一段简单、微小的代码，它必须足够高效，以每 60 秒运行数万次而不浪费资源，这让我急于掌握这个概念，然后再继续下去，可能会弄得一团糟东西的。我遇到的问题是掌握像素着色器实际在做什么。

顶点着色器很容易理解，你将一个对象的顶点组织在统一的数据结构中，这些数据结构与它相关的信息，比如位置和纹理坐标，然后将每个顶点传递给着色器，通过变换矩阵从 3d 转换为 2d . 只要我理解它，我就可以弄清楚如何编码。

但我没有像素着色器。我得到的是顶点着色器的输出是像素着色器的输入。那么这不就是将多边形顶点的二维坐标交给像素着色器吗？我所理解的是像素着色器接收单个像素并对它们执行计算以确定颜色和照明等内容。但如果这是真的，那么哪些像素呢？整个屏幕还是仅位于转换后的 2d 多边形内的像素？

还是我完全误解了某些东西？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T17:34:21.200

> 顶点着色器很容易理解，你将一个对象的顶点组织在统一的数据结构中，这些数据结构与它相关的信息，比如位置和纹理坐标，然后将每个顶点传递给着色器，通过变换矩阵从 3d 转换为 2d .

在此之后，生成并裁剪图元（三角形或三角形的倍数）（在 Direct3D 11 中，由于变换反馈、几何着色器、曲面细分等等，它实际上要复杂一些……但不管它是什么，在最后你有*三角形*）。

现在，片段被“生成”了，即将一个三角形分割成一个规则网格的小单元，顶点着色器的输出属性根据每个网格单元与三个顶点的相对位置进行插值，并设置一个“任务”为每个小网格单元。这些单元中的每一个都是一个“片段”（如果使用多重采样，一个像素¹可能存在多个片段）。

最后，在所有这些“任务”上执行一个小程序，*这就是像素着色器*（或片段着色器）。

它采用插值的顶点属性，并可选择读取统一值或纹理，并产生一个输出（它*也可以*选择产生多个输出）。像素着色器的此输出引用一个片段，然后被丢弃（例如由于深度测试）或与帧缓冲区混合。通常，同一像素着色器的许多实例会同时并行运行。这是因为像这样运行 GPU 会更高效、更节能。一个像素着色器不知道同时运行的任何其他像素着色器。
像素着色器通常在一组中运行（也称为“扭曲”或“波前”），并且一组中的所有像素着色器同时执行完全相同的指令（在不同的数据上）。同样，这允许构建更强大的芯片，消耗更少的能源，更便宜。

* * *

¹请注意，在这种情况下，片段着色器*仍然只*为每个“单元格”运行一次。多重采样仅根据（更高分辨率）深度测试决定是否将计算值存储在更高分辨率的额外“槽”（子样本）之一中。对于屏幕上的大多数像素，所有子样本都是相同的。然而，在边缘上，只有一些子样本会被特写几何体填充，而有些子样本会保持它们的值不受更远的“背景”几何体的影响。当多采样图像被解析（即转换为“正常”图像）时，显卡会生成这些子样本的“混合”（在最简单的情况下，只是算术平均值），这会导致除边缘之外的所有内容都出现和往常一样，边缘是“

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T17:32:37.890

您对像素着色器的理解是正确的，因为它“接收单个像素并对其执行计算以确定颜色和照明等内容”。

着色器接收的像素是在变换后的 2d 多边形（具体为三角形）的光栅化过程中计算的单个像素。因此，顶点着色器处理三角形的 3 个点，而像素着色器处理“填充”三角形的像素，一次一个。

# ruby-on-rails - 如何在 Rails 应用程序中配置多个数据库源

> ID：11193673
> 
> 赞同：0
> 
> 时间：2012-06-25T16:52:19.430
> 
> 标签：ruby-on-rails

我想为某个环境（例如登台或生产）配置 2 个数据库实例。默认的 rails new 应用程序只提供一个数据库实例，我该如何配置 2 个数据库实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:22:27.227

您可以复制并粘贴现有配置之一，例如开发。并根据需要在 database.yml 中重命名它：

```
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: 
  pool: 5
  username: root
  password: 
  host: localhost

new_database:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: 
  pool: 5
  username: root
  password: 
  host: localhost 
```

然后在您为此新连接创建的模型中，将以下方法添加到模型中，例如：

```
class Document < ActiveRecord::Base
  self.table_name = "document"   # this allows you to hide a non comforming table name behind the rails model it is NOT necessary for establish_connection to work
  self.establish_connection "new_database"  # notice there is no = when setting this value, strange, I know.
end 
```

# javascript - 提交时暂时禁用功能

> ID：11193674
> 
> 赞同：1
> 
> 时间：2012-06-25T16:52:19.520
> 
> 标签：javascript, forms

我有一个提交按钮触发功能的表单。让我们称之为`myFunction()`。我需要在提交后禁用此功能 30 秒，但我需要提交按钮才能继续工作。我不想禁用整个按钮，只想禁用它触发的功能。（如果用户在 30 秒之前再次点击该按钮，我需要它再次提交，但不执行`myFunction`第二次。）我尝试了一百万种不同的东西，但无济于事。我什至不知道要发布哪个代码作为示例。

```
<FORM ID="myform">
    <INPUT ID="mysubmit" TYPE="SUBMIT" ONCLICK="myFunction();">
</FORM> 
```

使用 JavaScript 最简单、最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:54:43.377

你的意思：

```
setTimeout(myFuction, 30000) // wait for 30 seconds and then call function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:57:26.753

```
<FORM ID="myform">
<INPUT ID="mysubmit" TYPE="SUBMIT" onClick="myFuction2();">
</FORM>

function myFuction() {
    ...
}

function myFuction2() {
    toggleSubmit();
    setTimeout("toggleSubmit", 30000);
    myFuction();
}

function toggleSubmit() {
    if (document.getElementById('mysubmit').onclick == null) {
        document.getElementById('mysubmit').onclick = myFuction2;
    } else {
        document.getElementById('mysubmit').onclick = null;
    } 
} 
```

# java - 如何将视图放入 Bundle

> ID：11193675
> 
> 赞同：11
> 
> 时间：2012-06-25T16:52:26.567
> 
> 标签：java, android, bundle

我正在将动态创建的 EditTexts 添加到布局中（onClick 按钮方法）。当我旋转屏幕时，添加的编辑文本消失了。如何将它们添加到包中以将它们放入 onSavedInstanceState 方法中？或者，还有其他方法可以做到这一点吗？我知道我可以保存文本，但是当我旋转它时有没有办法保持屏幕布局？如果用户按下按钮并添加五个 EditTexts（有或没有输入任何内容）我需要在屏幕旋转时保存此布局（我基本上需要对我的应用程序进行虚拟验证:)）。

提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-25T17:02:52.837

您不能将视图添加到包中，因为它们不可打包/可序列化。您可以并且应该保存到包中的唯一内容是活动的当前状态。

您可以维护一个列表数据结构或一个计数器变量来跟踪动态创建的视图。同时保存 EditTexts 的字符串值。在 onCreate 中，您应该解释该信息以重新创建视图及其状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T17:01:32.497

您无法保存视图。bundle 只是一对名称-值。当然，您可以保存文本，然后再次渲染。方法就是你说的。

onsaveInsatnceState(bundle save) 将文本保存为 save.putString('text1','bla bla') 当然你需要一个循环来保存所有的编辑文本。

然后在oncreated（捆绑保存）

您可以通过 save.getString('text1') 获取您添加的内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T16:57:25.320

视图本身并不代表您需要保存的信息。相反，您应该保存它们的坐标、宽度、高度、值等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-26T10:38:13.067

您可以将视图数据保存到类或数组列表中。当您的片段活动将重新启动时，您将在 oncreate 函数中从 saveinstance 状态中获取数据。

使用此函数 setRetainInstance(true)。使用事物功能后，您的片段活动不会破坏。

# mysql - MySQL 是否严格等于运算符？

> ID：11193676
> 
> 赞同：6
> 
> 时间：2012-06-25T16:52:30.360
> 
> 标签：mysql, sql, operators, equals

在许多编程语言中，有一个基本的等号运算符，它将查看两个字符串的文本是否相等：

```
if ("Hi" == "hi") {
  //this code runs
} 
```

但也有严格的等于运算符：

```
if ("Hi" === "hi") {
  //this code will never run
} 
```

MySQL 中的上述代码片段是否有等效的运算符？`=`操作员只是不削减它。如果我运行：

```
SELECT * FROM users WHERE name = 'john'; 
```

MySQL 将返回带有`John`、 大写“J”的行。

感谢您的时间。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-25T16:55:44.750

您可以使用`COLLATE`运算符将​​列转换为区分大小写的排序规则：

```
SELECT * FROM users WHERE name LIKE 'john' COLLATE utf8_bin 
```

关于区分大小写的MySQL[文档。](http://dev.mysql.com/doc/refman/5.0/en/case-sensitivity.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T16:55:55.213

您可以使用`STRCMP`：

```
SELECT * FROM users WHERE STRCMP(name, 'john') = 0; 
```

笔记 ：

*   0 = 相同
*   -1 = 第一个元素更小
*   1 = 第一个元素更大

如果您使用的是 MySQL 4.0+，则**必须**使用 COLLATES **（STRCMP 不再区分大小写）**：

*   `COLLATE utf8_general_ci`= 不区分大小写 (ci)
*   `COLLATE utf8_general_cs`= 区分大小写 (cs)

# jquery - 如何使用 jQuery validate 验证选择？

> ID：11193679
> 
> 赞同：2
> 
> 时间：2012-06-25T16:52:34.790
> 
> 标签：jquery, jquery-validate

以下选择应该是强制性的：

```
<select id="area" class="input-xlarge">
  <option value="0" selected="selected"></option>
  <option value="A">A</option>
  <option value="B">B</option>
  <option value="C">C</option>
  <option value="D">D</option>
</select>

<select multiple="multiple" id="reason" class="input-xlarge">
  <option value="001">reason001</option>
  <option value="002">reason002</option>
  <option value="003">reason003</option>
</select> 
```

但是下面的代码不起作用：

```
$("#form").validate({
  rules: {
    "area": {
      required: true
    },
    "reason": {
      required: true
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:58:51.503

您的选择标签没有`name`属性，这是验证规则所基于的属性，因为它们是提交以及任何服务器端验证所必需的

# file - 在 Visual C++ 中覆盖文件中的行

> ID：11193681
> 
> 赞同：0
> 
> 时间：2012-06-25T16:52:38.083
> 
> 标签：file, visual-c++, lines, overwrite

我需要一种方法来覆盖特定文件中的行。就目前而言，我基本上是写入一个文件，然后我需要做的是重新打开文件，回到该文件中的特定行，然后从那里继续写入，覆盖之前的任何内容。任何有关如何执行此操作的信息将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:55:55.490

终于想通了。我发现执行此操作的最简单方法是将文件的行读入缓冲区，并在您点击要查找的特定标记后停止读取它们。从那里，您擦除文件并将缓冲区中的行重新写入它。从那里，您可以从中断的地方继续写作。对于较小的文件，这只是一个好主意。

# sql - Rails：查看 ActiveRecord 的结果查询

> ID：11193687
> 
> 赞同：2
> 
> 时间：2012-06-25T16:52:47.240
> 
> 标签：sql, ruby-on-rails, activerecord

ActiveRecord 的查询界面在我看来有时非常复杂且不直观。是否有可能查看我编写的 Rails 构造中的哪些 SQL 查询结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T16:54:36.987

如果您在运行 Web 服务器的情况下查看控制台，您将看到 ActiveRecord 查询被编译成什么。此外，您可以打开 Rails 控制台 ( `rails console`) 并手动检查它们。

# bash - 将 tty 输出推送到节点

> ID：11193690
> 
> 赞同：0
> 
> 时间：2012-06-25T16:52:54.163
> 
> 标签：bash, node.js, tty

为了满足我的好奇心基因，我想玩 bash/node 组合。我不知道如何让这两个一起说话。[发现TTY.JS](http://thechangelog.com/post/17152659182/tty-js-terminal-in-your-browser-using-node-js-and-socket)时，我脸上露出灿烂的笑容;-)

如何将终端的输出（sdtout？）提供给节点？我考虑将流重定向到文件并通过'fs'模块使用节点读取它。但我打赌一定有更漂亮的方式

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:54:53.737

像这样的东西应该将终端输出发送到节点

```
var app = require('express').createServer(),
    io = require('socket.io').listen(app),
    sys = require('util'),
    exec = require('child_process').exec;

app.listen(4990);

io.sockets.on('connection', function(socket) {
    socket.on('console', function(command, callBack) {
        // client sends {command: 'ls -al'}
        function puts(error, stdout, stderr) {
            socket.emit('commandresult', stdout);
        }
        exec(command.command, puts);
    });
});​ 
```

希望这可以帮助

# batch-file - 批处理：用插入符号转义

> ID：11193691
> 
> 赞同：12
> 
> 时间：2012-06-25T16:52:54.883
> 
> 标签：batch-file, cmd, piping

我一直讨厌批处理，我仍然讨厌批处理，即使对于最简单的事情我更喜欢 C 或 PHP/Perl。但这一次我不能没有它，****叹气****。

我想将 echo 命令重定向到另一个命令。例如：

```
echo example | more 
```

但我也希望能够在管道的 echo 部分使用特殊字符：

```
echo & | more 
```

这当然没有用。所以我尝试了：

```
echo ^& | more 
```

这也不起作用。然后通过反复试验，我发现：

```
echo ^^^& | more 
```

那行得通。但作为感兴趣的程序员，我想知道为什么。为什么没有`^&`工作并`^^^&`做到了？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-25T17:17:02.437

原因与 Windows 如何实现管道有关 - 管道的每一侧都在其自己的 CMD shell 中执行。您的命令`echo ^& | more`实际上试图执行

```
C:\Windows\system32\cmd.exe /S /D /c" echo & " 
```

在左边和

```
C:\Windows\system32\cmd.exe /S /D /c" more " 
```

在右侧。您可以看到为什么左侧失败 - 试图回显未转义的`&`. 在执行实际左侧之前，初始解析阶段消耗了转义。

也很容易看出您的解决方案为何有效。的左侧`echo ^^^& | more`变成

```
C:\Windows\system32\cmd.exe /S /D /c" echo ^& " 
```

使用 Windows 管道时有许多微妙的复杂性。请参阅[为什么在管道代码块内延迟扩展失败？](https://stackoverflow.com/q/8192318/1012053)了解更多信息。所选答案具有最佳信息，但我建议阅读问题和所有答案以获取所选答案的上下文。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T17:16:07.017

第一个`^`是转义`^`字符本身（第二个`^`），第三个`^`是转义`&`.

当您运行类似的命令时`ECHO ^& | MORE`，在将输出通过管道传输到 之前，shell 会将`^&`替换为。`&``MORE`

因此，当您运行时`ECHO ^^^& | MORE`，shell 将替换`^^`为`^`和`^&`，`&`然后将输出通过管道传输到`MORE`.

# grails - 在spring security core中为grails配置requestmap时出错

> ID：11193694
> 
> 赞同：0
> 
> 时间：2012-06-25T16:53:10.913
> 
> 标签：grails, spring-security, grails-plugin

在我的系统中，我为用户分配了许多角色（现在假设为 3 个`ROLE_ADMIN, ROLE_USER, ROLE_SERVICES`）。在我的一个控制器中（假设`SearchController`我们有三个操作`serviceIndex{}, userIndex{} and adminIndex{}`），我希望任何角色的用户都能够访问其中两个操作（前两个）。对于最后的操作，我想限制针对单一角色类型的用户（比如说 ROLE_USER）的操作，但允许访问其他角色的用户（即`ROLE_ADMIN, ROLE_SERVICE`。我的 requestmap 表中有类似以下内容的内容。

config_attribute ------------------------------------------------- ----------> url
ROLE_ADMIN,ROLE_SERVICE,ROLE_USER ------------------------------> /search /serviceIndex
ROLE_ADMIN,ROLE_SERVICE,ROLE_USER-------------------------------------------> /search/userIndex
ROLE_ADMIN,ROLE_SERVICE ---- -------------------------------------> /search/adminIndex

由于第三条规则规定 ROLE_USER 无法访问 url '/search/adminIndex'，因此具有该角色的用户应该被拒绝访问该 url 的授权。但是，用户仍然可以访问该网址。什么是正确的配置。我确实尝试过类似的东西`/search/adminIndex/**`，但这也不起作用。附带说明一下，所有网址都没有后缀，但如果用户像添加后缀一样操纵网址，我仍然想阻止访问，以防`/search/userIndex/56a`万一。

问候，迪普斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:09:25.070

由于插件会遍历规则并应用与当前 URL 匹配的第一个规则，因此我会先设置 adminIndex，然后再设置其他任何内容。

```
ROLE_ADMIN,ROLE_SERVICE            /search/adminIndex
ROLE_ADMIN,ROLE_SERVICE,ROLE_USER  /search/** 
```

# jquery - Twitter Bootstrap JS 文件上的 jQuery 语法

> ID：11193701
> 
> 赞同：1
> 
> 时间：2012-06-25T16:53:33.957
> 
> 标签：jquery, twitter-bootstrap

我对 Twitter Bootstrap 的 JS 文件中的语法有疑问。这是一个示例文件（bootstrap-dropdown.js）：

```
!function ($) {

/*  ...    */

  /* APPLY TO STANDARD DROPDOWN ELEMENTS -- QUESTION CODE
   * =================================== */
  $(function () {
    $('html').on('click.dropdown.data-api', clearMenus)
    $('body')
      .on('click.dropdown', '.dropdown form', function (e) { e.stopPropagation() })
      .on('click.dropdown.data-api', toggle, Dropdown.prototype.toggle)
  })

}(window.jQuery); 
```

为什么他们在 jQuery 函数**$(function(){})**中有一个代码块？我认为它可以在没有 jQuery 函数的情况下工作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:02:06.223

```
!function ($) {
    ...
}(window.jQuery); 
```

这用于创建一个变量不会污染全局命名空间的范围（想想命名空间）。

如果不使用该`toggle`变量，例如，该变量将污染全局命名空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:02:35.190

> 这个函数的行为就像 $(document).ready()，因为它应该用于包装页面上依赖于准备好的 DOM 的其他 $() 操作。

检查[文档](http://api.jquery.com/jquery/#jQuery3)。

# sql - 在 Rails 中从 has_many 中选择单个关联

> ID：11193707
> 
> 赞同：0
> 
> 时间：2012-06-25T16:54:01.777
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, associations, has-many-through

使用 has_many through 关联时，是否有任何（干净的）方法可以访问单个关联？

例如，要获取食谱的所有成分，我可以这样写：

`@ingredients = @recipe.ingredients`

但是，如果我已经选择了一种成分，并且我想将数据添加到配方/成分的连接表中，我无法找出添加数据的干净方法。

我无法使用访问单一成分协会的数量

```
ingredient = Ingredient.find(an_id)  

amount = @recipe.ingredient.amount 
```

选择存储在连接表中的单个成分信息的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:42:54.220

在这种情况下，选项`:select`非常有用。例如

```
class Recipe
  has_many :ingredients, through: ingredients_recipes, select: "ingredinets.*, ingredients_recipes.some_additional_column as some_additional_column"
  .... 
```

然后打电话

```
Recipe.first.ingredients.first.some_additional_column # => profit! 
```

你也可以在你的范围内使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T21:42:18.600

连接表对您很重要，因此它应该有一个名称。你可以称它为recipe_ingredient，但一个真实的名字有助于在精神上不混淆事物。（它帮助我们讨论这个问题）

假设连接表被称为例如`slot`。

```
class Recipe
  has_many :slots
  has_many :ingredients, :through => :slots
  ..
class Slot
  belongs_to :recipe
  belongs_to :ingredient
  ... 
```

您通过调用获得定义的插槽

```
@slot = @recipe.slots.where(:ingredients_id => @ingredient).first 
@slot.amount = 20 
```

为了提高效率并确保每个组合只存在一次，您可以为 slot 定义一个唯一的复合索引以跨越 recipe_id 和 ingredients_id

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T17:14:24.827

你可以`@ingredient = @recipe.ingredients.first`（如果它真的是唯一的，不知道你怎么能确定这一点。）

假设您已经选择了成分，就像在变量中一样，您可以像设置任何其他 ActiveRecord 对象一样设置它们。

```
@ingredient = @recipe.ingredients.first
@ingredient.amount = 15 #or @ingredient.amount = params[:amount] (if you get the new value from POST)
@ingredient.unit = "Ounces"
@ingredient.save 
```

如果您只想检索食谱的每种成分的属性并对其进行处理，例如在视图中的某些 html 标记中显示它们，您可以尝试这样做。

```
@ingredients = @recipe.ingredients
   @ingredients.each do |ingr|
    info = %w[amount, brand, id, recipe_id , unit].map do |attr|
      ingr.send(attr)
    end 
```

在每个内部循环的末尾，数组“信息”将是一种成分的所有属性。（假设您将它们包含在信息数组中）

这是您可能用于存储关联的表的示例，它应该与 rails`:through => :recipe_ingedient`方法一起使用：

```
CREATE TABLE `recipe_ingredient` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `recipe_id` int(11) NOT NULL,
  `ingedient_id` int(11) NOT NULL,
  `created_at` datetime DEFAULT NULL,
  `updated_at` datetime DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=59 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci$$ 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-25T17:04:36.133

我不明白这样的事情怎么可能存在。如果您有*许多*关联对象，则需要指定*您*想要的对象。这与其说是 Rails 的限制，不如说是……我不知道，集合论？逻辑？`.first`您可以使用( )获取关联对象之一`ingredient = @recipe.ingredients.first`，但除非您还指定了顺序，否则无法确定它将是哪一个。

# ruby - 案例陈述未按预期工作

> ID：11193710
> 
> 赞同：1
> 
> 时间：2012-06-25T16:54:28.853
> 
> 标签：ruby, switch-statement

我有一个名为`Exercises.rb`

```
def ask(prompt)
  print prompt, ' '
  $stdout.flush
  s = gets
  return s
end

def myreverse(s)
  aux=""
  for i in 0..s.length-1
    aux=s[i] + aux
  end
  return aux
end

def mywordreverse(s)
  aux=[]
  s=s.split(" ")
  for i in 0..s.length-1
    aux.unshift(s[i])
  end
  return aux.join(" ")
end

def choose(s,option)
  case option
    when 1 then print myreverse(s)
    when 2 then print mywordreverse(s)
    when 3 then print "hello"
    else print "You gave me #{option} -- I have no idea what to do with that."
  end
end

s=ask("Write a string to reverse: ")
option=ask("Choose an option. 1 - Reverse string. 2 - Reverse String words : ")

choose(s,option) 
```

我总是得到`You gave MYCHOSENOPTION -- I have no idea what to do with that.`，无论我选择什么选项。如果我`if`在比较 1 之前放一个`case`，它似乎与我的字符串不匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:55:44.417

试试这个：

```
 case option.to_i
    # rest of your code... 
```

在 Ruby 中`1 == "1"`（或者更具体地说，在`case`语句的情况下，`1 === "1"`）总是计算为`false`. 在进行比较之前，您需要将其中一个转换为相同的类型。您传入的值`option`可能是 a `String`，因此对于与整数的任何比较都将失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:12:11.083

FWIW，这是我编写这个程序的方式：

```
def ask(prompt)
  print "#{prompt} "
  gets.chomp
end

def myreverse(s)
  s.reverse
end

def mywordreverse(s)
  s.split(' ').reverse.join(' ')
end

def choose(s,option)
  case option
    when 1 then puts myreverse(s)
    when 2 then puts mywordreverse(s)
    when 3 then puts "hello"
    else        puts "You gave me #{option}; I don't know what to do with that."
  end
end

$stdout.sync
str    = ask("Write a string to reverse: ")
option = ask("Choose an option:\n1: Reverse string\n2: Reverse String words\n>")
choose(str,option.to_i) 
```

笔记：

1.  方法中的最后一个表达式*是*返回值；using`return`在 Ruby 中几乎从不需要或不需要。
2.  存在用于反转字符串和数组的内置方法。（我知道你这样做是为了锻炼。）
3.  在 Ruby 中使用`for`. 相反，您应该使用

    ```
    my_str.each_char do |char|
      # use the single-character string `char` here
    end

    my_array.each do |item|
      # use the item here
    end 
    ```

4.  您可以使用`$stdout.sync`强制输出始终被刷新。

5.  您需要`chomp`在字符串上使用以删除用户按 Enter 时始终包含的尾随换行符。
6.  正如@robbrit 所指出的，您的问题的核心是 的返回值`gets`是一个字符串，并且您正在将它与一个 Fixnum 进行比较。我`to_i`在上面的代码中使用了将字符串转换为整数进行比较。
7.  我使用`puts`而不是`print`输出，以便在最后得到一个换行符，并且不要让用户将下一个命令提示符留在与输出相同的行上。

# c++ - 使用带有自定义释放器的 std::unique_ptr 来包装原始指针

> ID：11193720
> 
> 赞同：4
> 
> 时间：2012-06-25T16:55:15.750
> 
> 标签：c++, c, pointers, libsvm, unique-ptr

我正在尝试将[libsvm](http://www.csie.ntu.edu.tw/~cjlin/libsvm/)用于某个复杂的应用程序，并且由于 libsvm 主要是一个 C 库，因此在加载某些数据后，必须使用自定义 API 函数来释放内存。这就是我的意思：

```
struct svm_model *model;
model = svm_load_model("path to model file");

//do some processing

svm_free_and_destroy_model(&this->model); 
```

这些是我使用的 libsvm API 函数的定义：

```
struct svm_model *svm_load_model(const char *model_file_name);
void svm_free_and_destroy_model(struct svm_model **model_ptr_ptr); 
```

虽然这工作得很好，但如果在我处理模型数据时发生异常，那么我最终会出现内存泄漏。为了防止这种情况，我将上面的代码包装在一个类中，我`svm_load_model`在其中调用构造函数和`svm_free_and_destroy_model`析构函数。

现在，由于我们处于**智能指针**时代，我正在考虑获得更多创意，并且以某种方式将模型变量声明为`std::unique_ptr`，将指向的指针设置`svm_free_and_destroy_model`为自定义解除分配器，但不幸的是，我不是能够弄清楚这样的事情是否可行。目前，我什至无法编译它，我只是在黑暗中拍摄。以下是我认为它应该如何工作：

```
std::unique_ptr<struct svm_model *, /* what should I add here? */ > model (svm_load_model("path to model file"), svm_free_and_destroy_model); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T17:04:44.207

的类型参数`std::unique_ptr`需要是`T`，不是`T *`。使用 lambda 调用删除函数。

```
std::unique_ptr<svm_model, void(*)(svm_model *)> 
  p( svm_load_model( "path_to_model" ), 
     []( svm_model *mdl ) { 
       svm_free_and_detroy_model( &mdl ); 
     } 
   ); 
```

由于 VS2010 没有实现无状态 lambda 到函数指针的转换，因此您必须使用`std::function`它才能使其工作。

```
std::unique_ptr<svm_model, std::function<void(svm_model*)>>
  p( svm_load_model("path_to_model"), 
     []( svm_model *mdl ) {
       svm_free_and_destroy_model( &mdl );
     }
   ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:59:55.037

的*删除*器`unique_ptr`应该是一个只接受一个指针的函数，而不是一个指向指针的指针。你可以试试：

```
void svm_deleter(svm_model*& model)
{
    svm_free_and_detroy_model(&model);
}

....

std::unique_ptr< svm_model, void(*)(svm_model*&) >(
    svm_load_model("path to model file")
  , &svm_deleter
); 
```

# ios - 如何在 UIView 中绘制 opengl es

> ID：11193723
> 
> 赞同：1
> 
> 时间：2012-06-25T16:55:27.433
> 
> 标签：ios, opengl-es, uiview, core-animation, drawrect

我想在自定义的 UIView 中绘制我的 opengl es 动画，我该怎么做。我发现我需要重写 drawRect 方法。在下面。

```
#import "myView.h"

@implementation myView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
    // Initialization code
    }
    return self;
}

/*
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code
}
*/

@end 
```

我已经使用界面生成器绘制了一个视图，如何链接到该视图并绘制（调用）我的 opengl 动画类。任何人都可以请写一点具体。我是初学者。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T18:13:32.140

正如另一张海报所说，您不要使用 drawRect 在视图中实现 OpenGL。您将 OpenGL 层附加到视图。

EAGLView 是一种方式。如果您愿意将您的应用程序限制在 iOS 5 或更高版本，您可能需要查看 GLKit。这为你做了很多设置。

不过要小心。OpenGL 绝不是、塑造或形成初学者的 API。它庞大、复杂且难以使用。有一个巨大的学习曲线。我已经编程了大约 30 年，当我第一次开始学习它时，它简直让我头疼。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:04:54.380

您拥有的一种可能性是让您的视图管理一个`CAEAGLLayer`（与普通的`CALayer`）。然后`CAEAGLLayer`将呈现您的 GL 绘图代码。

`UIView`我建议您查看`EAGLView`Apple 在一些 SDK 示例中提供的类，而不是尝试对自己进行子类化。看看[这个来自 Apple 的示例，](http://developer.apple.com/library/ios/#samplecode/GLImageProcessing/Listings/Classes_EAGLView_m.html)展示了如何`EAGLView`定义以及如何使用它。

# mysql - 获取重复行 MySQL

> ID：11193724
> 
> 赞同：0
> 
> 时间：2012-06-25T16:55:34.987
> 
> 标签：mysql, sql, database, rows

表格1：

```
id  - name
1   - john
2   - david
3   - dilio 
```

表2：

```
id  - name
3   - dilio
7   - juan
1   - john 
```

我想要这个结果：

```
id  - name
1   - john
3   - dilio 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:58:51.637

```
Select a.id, a.name
From Table1 a
JOIN Table2 b ON b.id = a.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:09:06.060

只需使用[INNER JOIN](http://www.w3schools.com/sql/sql_join_inner.asp)

```
Select a.id, a.name
From Table1 t1
INNER JOIN Table2 t2 ON t2.id = t1.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T16:59:11.883

使用连接：

```
SELECT * FROM Table1 NATURAL JOIN Table2 
```

自然连接使用两个表中存在的所有列名来匹配这些表中的一对行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T16:59:31.680

```
SELECT Table1.id, Table1.name
FROM Table1
JOIN Table2
ON Table2.name = Table1.name 
```

# javascript - Zend 框架：通过 Ajax 的 init 调用操作导致重定向。后续调用成功

> ID：11193727
> 
> 赞同：0
> 
> 时间：2012-06-25T16:55:44.767
> 
> 标签：javascript, ajax, zend-framework, jquery

所以我有一个有趣的问题，我希望其他人之前已经偶然发现（并解决了）。

我已经为这个特定应用程序上的用户设置了一个“更改我的密码”选项，如果用户忘记了他们的密码，他们可以请求更改它。我向他们发送一封电子邮件，其中包含嵌入在链接中的哈希，该链接将他们引导至简单的“更改密码”屏幕。 ![在此处输入图像描述](../Images/82345f85638c0a946ebf9d5d42e4f69d.png)

![在此处输入图像描述](../Images/4a9d5d77aaa053ac5ae9a14ccbbce2f8.png)

一旦用户单击更新按钮 - 我通过 ajax 调用适当的控制器操作，服务器会处理各种事情，例如更新密码、删除令牌和重定向用户。

这是与更新按钮相关的ajax：

```
updatePassword: function() {
        $.ajax({
            url: '/side-panel/update-password',
            dataType: 'json',
            type: 'post',
            data: {
                token: $('input[name=token]').val(),
                id: $('input[name=id]').val(),
                new_password: $('input[name=new-password]').val()
            },
            beforeSend: function() {
                kts.show_loader('show');
            },
            success: function(data) {
                kts.show_loader('hide');
                console.log(data);
            }
        });
    } 
```

用户第一次单击按钮时 - 控制台显示如下：

![在此处输入图像描述](../Images/2d265bfb7835b318965a4eb131a706f4.png)

请注意下面的 URL 和左上角的网络条目：

`"http://code.kenstowell.local/".`

它调用适当的操作，但返回 302，然后重定向到站点的基本 URL。

用户第二次单击按钮时，它会调用控制器动作。

![在此处输入图像描述](../Images/e759c6f117761e85523c5d83f6c538c5.png)

请注意此处的 URL：`"http://code.kenstowell.local/index/update-password"`

这里真正的问题是，在第一次调用/按钮单击时 - 服务器端代码实际上得到了处理，但 XHR 对象返回失败。

如果这是信息过载，我深表歉意。如果您需要提供更多代码/示例，请告诉我。任何帮助表示赞赏。

肯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:12:42.547

我偶然发现了这个小宝石：

[在 JavaScript 中捕获 302 FOUND](https://stackoverflow.com/questions/373087/catching-302-found-in-javascript)

显然，ajax 不能很好地处理服务器端重定向。

# xml - 在 ASP Classic 中使用空格解析 XML 标记

> ID：11193729
> 
> 赞同：0
> 
> 时间：2012-06-25T16:55:45.923
> 
> 标签：xml, asp-classic, xml-parsing, space

我知道这不符合标准，但是合作伙伴正在将 XML 传递给我们的应用程序，其中包含标签中的空格，如下所示：

```
<RESPONSE>
  <XYZZYS>
    <XYZZY TAG="INFO">123abc</FIELD>
    <XYZZY TAG="MOAR_INFO">123456abcdef</FIELD>
    <XYZZY TAG="EVEN_MOAR_INFO">1</FIELD> 
```

通常我会通过 getElementsByTagName("*") 将 XML 加载到对象中，并使用 item(index).nodeName 获取标签名称。问题是，由于不应该存在空格，因此 item(index).nodeName 最终只是简单的 XYZZY。这当然是一个问题，因为他们每个人都是从 XYZZY 开始的。

*   为了踢球，我尝试替换（） item(index).nodeName 中的“XYZZY”，但可以预见的是，这会产生 500 错误。
*   ResponseXML.preserveWhiteSpace 没有帮助。
*   我考虑过将 XML 操作为字符串来进行替换，但不确定是否可以将其加载回 MSXML 对象中......而且它似乎有点不必要地复杂......
*   ...就像简单的文本字符串解析一样。

有没有我一直找不到的简单解决方案？非常感谢资源链接！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:34:41.743

根据[AnthonyWJones](https://stackoverflow.com/users/17516/anthonywjones)指向正确方向的指针后的[这个 StackOverflow 问题](https://stackoverflow.com/questions/94689/asp-xml-parsing)，这里是解析这个的适当方法：

```
Set oXML = Server.CreateObject("MSXML2.DomDocument.6.0") 'creating the parser object
oXML.LoadXML(responseXML.responseText) 'Loading the XML from the response

For Each oNode In oXML.SelectNodes("/RESPONSE/XYZZYS/XYZZY")
  sKey = oNode.GetAttribute("KEY")
  sValue = oNode.Text
  'Printing for proof of retrieval.
  response.write("<br>sKey: " & sKey)
  response.write(" sValue: " & sValue)
Next

Set oXML = Nothing 
```

请注意，我只是从链接的问题中复制并根据需要进行了编辑。

# javascript - youtube api 上的 getDuration() 不是函数吗？

> ID：11193736
> 
> 赞同：4
> 
> 时间：2012-06-25T16:56:02.037
> 
> 标签：javascript, youtube-api

我一直在我的网站中实现 youtube API，`playVideo()`例如工作正常，所以我想实现没有问题.. 但是 getDuration() 出错（不是这样的函数错误）

这就是我尝试这样做的方式：

```
function GetDuration() {
    var duration;
    if (ytplayer) {
        duration = ytplayer.getDuration();
    }
    $(".optionVideo").append("<p>" + duration + "</p>")
} 
```

它的错误是没有这样的功能。有人能知道我在做什么错吗？

jsfiddle：http: [//jsfiddle.net/V36cL/6/](http://jsfiddle.net/V36cL/6/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T17:36:43.527

您需要`GetDuration`从您的电话`onYouTubePlayerReady`，而不是从`$(document).ready`. YouTube 视频可能会在DOM*完成后准备就绪。*

此外，您的`onYouTubePlayerReady`函数需要是全局的（jsFiddle 将其包装在匿名函数中）。

```
window.onYouTubePlayerReady = function(playerId) {
    window.ytplayer = document.getElementById("ytPlayer");
    GetDuration();
} 
```

演示：http: [//jsfiddle.net/V36cL/7/](http://jsfiddle.net/V36cL/7/)

# cakephp - CakePHP 2.0：通过 hasMany 和 HABTM 使用分页

> ID：11193737
> 
> 赞同：0
> 
> 时间：2012-06-25T16:56:03.747
> 
> 标签：cakephp, has-and-belongs-to-many, pagination

我有以下关系：

发表有很多评论

帖子属于类别

发布 HABTM 标签

我想使用具有这些属性的分页方法：

```
public $paginate = array(
    'published',
    'limit' => 3,
    'fields' => array(
        'Post.title',
        'Post.date_published',
        'Post.abstract',
        'Post.slug',
        'Category.value',
        'Category.slug'
    )
); 
```

'published' 是一个自定义的查找查询，但在这里应该无关紧要。除了有关帖子及其类别的信息（见上文）之外，我还想获取帖子的评论数以及所有标签的名称。即，我希望能够以方便的方式访问 View 端的数据，例如 $data['Post']['comment_count'] 和 $data['Post']['Tag'][0] ['姓名']。

有没有足够优雅的解决方案？我知道 HABTM 可能有点复杂，但我什至不知道如何在同一个查询中获取评论，即使它只是一个 hasMany 关系。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:28:36.317

我发现在 Comment 模型中使用 counterCache 参数如下

```
public $belongsTo = array('Post' => array('counterCache' => true)); 
```

并且在帖子表中添加一个comments_count 字段是获取帖子评论数的最简单的解决方案。每当添加或删除新评论时，这将更新表格。

关于标签，我使用包含数组，它也可以用于分页。我这样使用它：

```
$this -> paginate = array(
        'published',
        'limit' => 3,
        'contain' => array(
            'Category',
            'Tag' => array('fields' => array(
                    'value',
                    'slug'
                ))
        ),
        'fields' => array(
            'Post.title',
            'Post.date_published',
            'Post.abstract',
            'Post.slug',
            'Post.comment_count',
            'Category.value',
            'Category.slug'
        ),
        'conditions' => $conditions,
        'joins' => $joins
    ); 
```

这样做，每个 Post 请求只获取类别和标签模型的字段值和 slug。

有一种特殊情况，当我想获取具有特定标签的所有帖子时。请记住，这是一个 HABTM 关系。我遇到[了 Geoff Garbers 的这个有用的模型方法](http://garbers.co.za/2011/05/03/easy-way-to-generate-cakephp-habtm-joins-for-use-in-pagination/)

将它添加到 AppModel，它允许调用 hasAndBelongsToMany，并自动执行为分页方法定义连接的繁琐过程。正如您在上面看到的，它们是通过 $joins 数组添加的，该数组是使用上述方法生成的：

```
$joins = $this -> Post -> generateHabtmJoin('Tag'); 
```

现在可以轻松定义条件，例如：

```
$conditions = array('Tag.slug' => $this -> request -> params['tag']); 
```

这只会获取具有特定 Tag.slug 的帖子。

希望这可以帮助某人。

# django - 夹层过度扩展标签返回空模板

> ID：11193738
> 
> 赞同：1
> 
> 时间：2012-06-25T16:56:05.927
> 
> 标签：django, mezzanine

我正在尝试使用夹层的过度扩展标签来覆盖和扩展夹层附带的现有模板。

它的基本作用是通过在查找可用模板的同时从模板列表中删除自身来删除当前模板本身，这样人们就可以通过使用相同的名称来*过度*扩展模板而无需`circular reference`.

我知道还有其他方法可以解决该问题，但是当我只想更改模板中的新标签 时，我不想编写呈现不同模板*（具有不同名称）的视图。*`block`

在文档中它说我可以像使用`extends`标签一样使用它，但是当我这样做时，它只会返回一个空模板。

这是我的项目结构：

```
project_dir
-|blog
--|__init___.py
--|templates
---|blog_post_detail.html
---|blog_post_list.html
-|override
--|__init__.py
--|admin.py
--|templatetags
---|__init__.py
---|extensive_tags.py 
```

这是不起作用的示例模板：

```
{% overextends "blog/blog_post_list.html" %}
{% load mezzanine_tags extensive_tags i18n %}
{% block right_panel %}
{% get_best_posts_for_category blog_post 3 as best_posts %}
{%if best_posts %}
<ul class="nav nav-list">
    <li class="nav-header">BU KATEGORİDEKİ EN İYİ POSTLAR</li>
    {% for best_post in best_posts %}
    <li>
        <a href="{{ best_post.get_absolute_url }}">{{ best_post.title }} ({{ best_post.rating_average }})</a>
    </li>
{% endfor %}
</ul>
{% endif %}
{% endblock %} 
```

这是`INSTALLED_APPS`在`settings.py`：

```
INSTALLED_APPS = (
    "blog",
    "django.contrib.admin",
    "django.contrib.auth",
    "django.contrib.contenttypes",
    "django.contrib.redirects",
    "django.contrib.sessions",
    "django.contrib.sites",
    "django.contrib.sitemaps",
    "django.contrib.staticfiles",
    "mezzanine.boot",
    "mezzanine.conf",
    "mezzanine.core",
    "mezzanine.generic",
    "mezzanine.blog",
    "mezzanine.forms",
    "mezzanine.pages",
    "mezzanine.galleries",
    "mezzanine.accounts",
    "override",
) 
```

并`TEMPLATE_DIRS`在`settings.py`：

```
TEMPLATE_DIRS = (os.path.join(PROJECT_ROOT, "templates"),) 
```

你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:39:01.590

这已在 dev 分支中修复，但尚未发布。我刚刚发布了包含修复的 1.1.3，所以如果你升级它应该可以工作。

# c# - 读取 app.config 部分名称

> ID：11193739
> 
> 赞同：1
> 
> 时间：2012-06-25T16:56:10.890
> 
> 标签：c#, app-config, configurationsection

在控制台应用程序中，我试图获取`section`键值对，但我做不到。有两种方法可以做到这一点：

1.  [配置部分](http://msdn.microsoft.com/tr-tr/library/system.configuration.configurationsection.aspx)
2.  [IConfigurationSectionHandler](http://msdn.microsoft.com/tr-tr/library/system.configuration.iconfigurationsectionhandler.aspx)

但是下面的代码会产生这个错误：`Configuration system failed to initialize` 我在哪里犯错了？

这是代码： `app.config`

```
<?xml version="1.0"?>
<configuration>
  <configSections>
    <sectionGroup name="testGroupName">
      <section name="secName" type="TestAssemblyConfigReader.TestConfigReader"/>
    </sectionGroup>
  </configSections>

  <testGrupAdi>
    <secName anahtar="deger" />
  </testGrupAdi>
</configuration> 
```

配置阅读器类：

```
using System.Configuration;

namespace TestAssemblyConfigReader
{
    public class TestConfigReader : ConfigurationSection
    {
        public TestConfigReader()
        {

        }

        [ConfigurationProperty("secName")]
        public string SecName
        {
            get
            {
                return (string)this["secName"];
            }
            set
            {
                this["secName"] = value;
            }
        }
    }
} 
```

控制台应用程序：

```
using System.Configuration;
using TestAssemblyConfigReader;

namespace ca_FMC.Turkiye.Lib.SVN
{
    class Program
    {
        static void Main(string[] args)
        {
            TestConfigReader serviceConfigSection = ConfigurationManager.GetSection("testGroupName") as TestConfigReader;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:08:24.863

你好删除和之间`testGroupName`的不匹配`testGrupAdi`

用这个

```
<configuration>
  <configSections>
    <sectionGroup name="testGroupName">
      <section name="secName" type="TestAssemblyConfigReader.TestConfigReader"/>
    </sectionGroup>
  </configSections>

  <testGroupName>
    <secName anahtar="deger" />
  </testGroupName>
</configuration> 
```

# sql - 如何有效地创建具有可变数量行中的字段的大型 SQLite 数据库？

> ID：11193743
> 
> 赞同：0
> 
> 时间：2012-06-25T16:56:24.177
> 
> 标签：sql, sqlite, database-management

我启动了 SQLite 数据库浏览器并找到了 Blob、Int 和 Text 数据类型。还有一个框可以命名您自己的类型，但我希望这些不会在 SQLite 中得到广泛支持。

如果我的记录具有可变数量的字段（每个字段本身都是字段的组合，例如 int 和 text），我将如何将它们放在表中？我猜我需要为这些制作另一张桌子。没有更优雅的解决方案吗？特别是关于使用 SQLite 数据库管理器手动创建数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:21:48.713

您可以在两个表设置中存储动态字段名称。

创建两个表...标题和详细信息。标题将保存主 ID 以及记录的所有行共有的任何信息。详细信息将保存标题中的 ID、“列名”和列值。

```
Create table header (id int, desc character varying)

Create table details (id int, header_id int, column_name character varying, column_value character varying) 
```

了解结构的想法？它被称为名称值对关系（实体/属性），可以为单个标题记录存储任意数量的“列”......然后您需要旋转（或构建）详细信息表以读取其中的信息（可以作为视图完成）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:59:15.513

这将是典型的一对多关系。是的，为这些字段创建另一个表，其中包含一个附加列，即它所依赖的记录的 ID。

如果这些字段不包含太多数据（它们是数字或标签），那么在 SQLite 中，有时最好将它们作为逗号（或其他符号）分隔的值存储在 TEXT 列中。

# gwt - 只读和编辑模式的 GWT 编辑器

> ID：11193751
> 
> 赞同：3
> 
> 时间：2012-06-25T16:57:21.377
> 
> 标签：gwt, requestfactory, gwt-editors

GWT 的 Editor 框架非常方便，它不仅可以用于编辑**POJO**，还可以用于只读显示。

但是，我不完全确定进行**内联编辑**的最佳做法是什么。

假设我有一个`PersonProxy`，我有一`Presenter-View`对用于显示和编辑`PersonProxy`. 默认情况下，此 Presenter-View 应该以`PersonProxy`只读模式显示，如果用户按下**编辑**按钮，它应该允许用户编辑`PersonProxy`对象。

我想出的解决方案是创建两个编辑器（`PersonEditEditor`和`PersonDisplayEditor`），它们都通过添加`UiBinder`到`View`. `PersonEditEditor`contains `ValueBoxEditorDecorator`s 和contains `PersonDisplayEditor`normal `Labels`。
最初我显示`PersonDisplayEditor`和隐藏`PersonEditEditor`。

在`View`我为每个编辑器创建两个`RequestFactoryEditorDriver`并使其可以`Presenter`通过`View`界面访问。我还在接口中定义了一个`setState()` 方法`View`。

当`Presenter`我第一次调用时显示`PersonDisplayDriver.display()`和`setState(DISPLAYING)`。

当用户单击**编辑**按钮时，我会调用`PersonEditDriver.edit()`并`setState(EDITING)`从我的`Presenter`.
`setState(EDITING)`将隐藏`PersonDisplayEditor`并使其`PersonEditEditor`可见。

我不确定这是否是最好的方法。如果不是，推荐的内联编辑方法是什么？在编辑器上进行单元测试的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:36:10.230

是的，Presenter-View 对应该是。但是，如果您愿意，这里有两种方法可以实现此功能：

**1) 在一个ui.xml**中集成Edit/View 代码设计，即EditHorizo ​​natlPanel 中的Edit 代码和**ViewHorizo** **​​ntalPanel**中的View 代码。面板具有不同的id。通过使用 id，使用显示方法显示/隐藏面板。如果然后显示**ViewHorizo​​ntalPanel**，如果然后显示**EditHorizo​​ntalPanel**。**`getView().setState() ==Displaying`**`getView().setState()==Editing`****

 ******2) 不使用标签，只使用文本框。当您在查看模式下需要它时，设置 Enable 属性为 false，否则为 true

您已经创建了两个演示者/视图，但我认为如果编辑/视图功能具有相似的代码，则无需为了视图目的一次又一次地重写相似的代码。

如果一个大项目有这么多的编辑/查看功能，并且您将创建这种类型的多个视图/演示者，那么您的项目规模就变得如此庞大，这是不必要的。

我认为无论我提出什么建议，这可能都不是好方法，但应该找出有助于避免代码复制的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T09:45:07.033

如果你有能力开发 2 个不同的视图，那就去吧，它会给你最大的灵活性。

我们在我们的应用程序中所做的，我们负担不起开发和维护两个视图的成本，将这两个状态烘焙到我们的编辑器中，例如，可以是标签或文本框的自定义组件（在大多数情况下）在这种情况下，我们只需将文本框设置为只读并应用一些样式来隐藏框边框）。
为了检测我们处于哪种模式，因为我们使用`RequestFactoryEditorDriver`（像你一样），我们让我们的编辑器实现`HasRequestContext`：在这里接收一个`null`值意味着使用了驱动程序的`display()`方法，所以我们处于只读模式。另一种方法是使用一个接口`EditorVisitor`和一些`HasReadOnly`接口（顺便说一句，这正是`RequestFactoryEditorDriver`传递`RequestContext`给`HasRequestContext`编辑的方法）。******

# android - 使用 Eclipse 调试 Android 应用内计费

> ID：11193754
> 
> 赞同：2
> 
> 时间：2012-06-25T16:57:35.710
> 
> 标签：android, eclipse, in-app-billing

现在，我设法签署了 apk（使用 Eclipse Android 工具）并`adb install ..`在设备上进行了测试。

但这删除了调试功能，例如“越过”，这使问题跟踪变得更加困难。

是否可以使用 Eclipse 调试应用内计费？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T18:10:37.730

不幸的是，我认为没有任何方法可以逐步调试，我一直在使用打印输出。这是因为您必须使用发布密钥签署您的应用程序，以便它与计费服务正确通信。很烦人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T19:58:47.103

当您浏览应用内计费文档时，您会意识到理解这项复杂的技术可能需要大量时间。大多数开发人员都觉得需要一个可以工作的 HelloWorld，然后再尝试构建。

# 我上传了 2 个项目

1.  安卓示例项目。您可以下载此项目，并立即运行示例。这将帮助您快速调试/跟踪并了解应用内计费的工作方式。

2.  一个清理过的项目，可帮助您快速集成您的应用程序。这可以像图书馆一样提供帮助。只需在“结帐”按钮操作中集成“购买请求”即可。

**请注意：我没有纳入安全建议。在应用计费文档中阅读 android。在此之前，您将自担风险。**

## 为 1

*   下载“<a href="http://www.4shared.com/file/f5wH3qke/InAppBilling1.html" rel="nofollow">http://www.4shared.com/file/f5wH3qke/InAppBilling1.html”< /li>
*   为所有通信创建一个新的 gmail 帐户（为什么，我将在下面解释）
*   支付 25 美元并购买一个“市场”帐户。
*   将项目导入你的eclipse环境
*   创建一个签名的应用程序apk，文件-导出-选择您的项目-创建或使用密钥库，从今天起应该有效期为25年。
*   将签名的 apk 作为“草稿应用程序”上传到市场，请勿发布。
*   对于上传的 apk，您需要添加“In App Products”。您将在您上传的 apk 的主页上找到此链接。
*   在 Security.java 中不要忘记从您的市场帐户“编辑个人资料”页面添加您的“公钥”。
*   在“In App Product List”中，需要一一添加以下产品
    *   以下文本应用作“应用内产品 ID”</li>
    *   Sword_001 作为托管
    *   potions_001 作为非托管
    *   标题和描述无关紧要（用于测试目的）。在此处添加您需要的内容。
    *   成本加 1 美元（最低）
*   点击自动填充
*   节省

发布应用内项目（这里不要混淆，您只需要发布应用内产品，而不是应用程序）

*   在测试帐户中，在此处添加您的个人 gmail id。现在，需要将此 gmail 帐户配置为您手机上的第一个 gmail 帐户。
*   是的，这不会在你的模拟器上工作
*   现在示例应用程序应该可以工作了。

## 为 2

下载“<a href="http://www.4shared.com/file/h8YnJyf_/InAppBillingIntegration.html" rel="nofollow">http://www.4shared.com/file/h8YnJyf_/InAppBillingIntegration.html”< /p>

要集成，请在您的调用活动中初始化结帐代码

```
Handler handler = new Handler() ;
CheckoutPurchaseObserver checkout = new CheckoutPurchaseObserver(this, handler); 
```

发送您的产品的结帐请求

```
checkout.sendCheckoutRequest(purchaseUri.toString(),null); 
```

**重要的提示 ：**

*   此 purchaseUri 是您在“<strong>ma​​rket.android.com/publish-->创建新的应用内产品”选项中的资源的“<strong>应用内产品 ID”。此字符串应设置为“<strong>in app product”id。
*   这就是为什么“<strong>id”是最重要的。“<strong>应用内产品 ID”是您引用该特定产品的方式。
*   此外，在 Security.java 中不要忘记从您的市场帐户“<strong>编辑个人资料”页面添加您的“<strong>公钥”。**

# 调试说明

*   LogCat 将所有错误显示为 InAppBilling 标签
*   这个项目创建了一个名为“inappbilling”的shared_preferences并且debug设置为true
*   由于该项目没有主屏幕，因此可能不需要 androidmanifest.xml。

## 为什么我们需要创建一个新的 gmail 帐户？

简单的。您购买市场帐户的帐户不能用于“测试”您的应用内计费。因为您不能为自己购买产品。并且您设备上的主要帐户应设置为市场帐户上的“测试帐户”。鸡蛋问题在这里。希望它清楚。

我来自“<a href="http://crazyviraj.blogspot.com/2011/06/some-notes-on-implementing-in-app.html" rel="nofollow">http:// 的一个有趣的博客crazyviraj.blogspot.com/2011/06/some-notes-on-implementing-in-app.html“（不是我的）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-25T19:14:38.157

在我的应用程序中，我使用了测试产品 ID，`android.test.purchased`它将模拟实际的购买过程（即，将显示应用程序内对话框，您将能够购买并获得可由您的应用程序处理的响应）。使用该产品 ID，您可以通过 Eclipse 通过 USB 连接在设备上运行应用内代码（未签名）。您可能仍然需要解决一些测试问题（即，考虑到您使用的是测试产品 ID 而不是您的真实 ID），但我发现使用该产品 ID 确实对我有很大帮助。

请参阅应用内计费指南的[测试](http://developer.android.com/guide/google/play/billing/billing_testing.html)部分

# css - 更改 div 悬停时的链接颜色

> ID：11193762
> 
> 赞同：11
> 
> 时间：2012-06-25T16:58:15.207
> 
> 标签：css

悬停 div 时如何更改链接颜色？

我尝试使用：

```
#voltarTEST {
    width: 80px;
    height: 62px;
    padding-top: 16px;
    background-image: url(../img/multiLangImage/Seta11.png);
    background-repeat: no-repeat;
}
#seguinteBtn {
    width: 80px;
    height: 62px;
    padding-top: 16px;
    background-image: url(../img/multiLangImage/Seta21.png);
    background-repeat: no-repeat;
    text-decoration: none;
    color: #777;
}
#seguinteBtn:hover {
    background-image: url(../img/multiLangImage/Seta22.png);
    background-repeat: no-repeat;
    text-decoration: none;
    color: #FFF;
}
#voltarText {
/*  padding-right: 10px;*/
    padding-left: 30px;
}
#voltarNEText {
/*  padding-right: 10px;*/
    padding-left: 30px;
}
#voltarTEST:hover {
    background-image: url(../img/multiLangImage/Seta12.png);
    background-repeat: no-repeat;
}
#voltarTEST a {
    text-decoration: none;
    font-size: x-small;
    font-family: Verdana;
    text-decoration: none;
    color: #999;
}
#voltarTEST a:hover {
    text-decoration: none;
    font-size: x-small;
    font-family: Verdana;
    text-decoration: none;
    color: #FFF;
}
#dataUltimaSincMSG {
    margin-bottom: 0;
}
#estadoSinc {
    margin-bottom: 0;
} 
```

但这不起作用，只有当我将鼠标悬停在链接上时才会改变颜色。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-25T17:00:47.283

添加这个：

```
#voltarTEST:hover a{
    text-decoration: none;
    font-size: x-small;
    font-family: Verdana;
    text-decoration: none;
    color:#FFF;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-25T17:01:44.150

您想在 div 上设置悬停事件，而不是链接..

`#voltarTEST a:hover`应该`#voltarTEST:hover a`

第一个（你有它的方式）说当`voltarTEST`div 内的链接悬停时。第二个说在悬停`voltarTEST`时将此样式应用于内部链接。`voltarTEST`

这是一个[**演示**](http://jsfiddle.net/aG5fK/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T17:00:56.537

使用`:hover`on`div`代替`a`：

```
#voltarTEST:hover a{
    text-decoration: none;
    font-size: x-small;
    font-family: Verdana;

    text-decoration: none;
    color:#FFF;
} 
```

# java - web.xml 与编程方法

> ID：11193763
> 
> 赞同：2
> 
> 时间：2012-06-25T16:58:29.193
> 
> 标签：java, servlets, configuration, jetty, web.xml

向我的**servlet 容器**（在我的例子中为**Embedded Jetty** ）添加越来越多的**配置**我开始怀疑是否应该将所有内容都放入**web.xml**或在 Java 代码中保持配置**程序化。**

 ******是否有理由选择 web.xml 而不是编程方法，反之亦然？是否有**安全原因**，或者这只是装饰性的？

对我来说，似乎 web.xml 更好，因为您专门使用 DSL 来完成这项工作，而不是将所有内容都压入代码中。另一方面，当我在代码中时，我可以快速查找配置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:43:45.297

这取决于您要配置的内容和您的便利性。

Servlet 3.0 允许您以三种不同的方式定义元数据：

**web.xml**，通常在不同环境下部署时会发生变化的配置应该在这里配置。这些属性包括数据库属性、属性文件、管理员用户属性等。

在web.xml中定义的好处是，所有的配置都集中在一个地方，便于文档编制等。只在一个地方定义，分布式开发时维护困难。是的，Servlet 3.0 再次允许 web-fragments.xml，您应该为其定义库，每个库可以再次具有单个描述符。

**注释**，任何可以在开发过程中定义但也可以在部署过程中被覆盖的东西都被定义为注释。

优点是无需在部署描述符中进行配置，除非它必须被覆盖。注释可以给出默认值。缺点是容器必须处理所有类的注释。我不认为这是很大的缺点。

**以编程方式**，您知道不会更改的任何内容都可以以编程方式进行配置。优点是开发人员可以确定任何人都不会随时更改配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:03:32.607

要使用 web.config 应用新设置，您只需更改配置文件并重新启动应用程序。如果在代码中保留配置，您将需要重建项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-17T08:42:08.823

根据我的经验，您可以将 web.xml 用于一些很少更改的配置，例如（如果您使用 Jersey）：

```
<servlet>
<servlet-name>Jersey REST Service</servlet-name>
<servlet-class>org.glassfish.jersey.servlet.ServletContainer</servlet-class>
 <!-- Register resources and providers under com.vogella.jersey.first package. -->
<init-param>
    <param-name>jersey.config.server.provider.packages</param-name>
    <param-value>com.vogella.jersey.first</param-value>
</init-param>
<load-on-startup>1</load-on-startup> 
```

[（我从http://www.vogella.com/tutorials/REST/article.html](http://www.vogella.com/tutorials/REST/article.html)复制这些代码）

如果配置会定期更改和更新（您可以查看 Netflix Archaius），则程序化配置会很好。
例如：服务超时、线程池大小或指标跟踪等...******

# xml - 为什么在 XML::XPath 中出现“找不到路径”错误？

> ID：11193765
> 
> 赞同：0
> 
> 时间：2012-06-25T16:58:31.863
> 
> 标签：xml, perl

我正在尝试运行我创建的 Perl 文件。

```
use XML::XPath;
use XML::XPath::XMLParser;

# create an object to parse the file and field XPath queries
my $xpath = XML::XPath->new( filename => shift @ARGV );

# apply the path from the command line and get back a list matches
my $nodeset = $xpath->find( shift @ARGV );

# print each node in the list
foreach my $node ( $nodeset->get_nodelist ) {
  print XML::XPath::XMLParser::as_string( $node ) . "\n";
} 
```

当我运行时`perl xmlfile.pl`出现此错误

```
"No path to find at /usr/lib/per5/site_perl/5.8.8/XML/XPath.pm line 65" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:18:09.537

它在期待

```
perl xmlfile.pl file.xml /some/xpath 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:18:29.287

该程序需要命令行参数，首先是文件名，然后是 XPath 表达式。[`@ARGV`](http://p3rl.org/var#%40ARGV)是提示。尝试：

```
perl xmlfile.pl ex07_xpathdata.xml '//item' 
```

# javascript - Javascript日期自动更新意外

> ID：11193770
> 
> 赞同：1
> 
> 时间：2012-06-25T16:58:53.093
> 
> 标签：javascript, html, date, session-storage

我很困惑。我有一个来自 jQuery 的“就绪”函数，它将 HTML5 sessionStorage 变量设置为新日期的 .valueOf() 结果（如下所示）。但是，不知何故，当我的页面打开时，变量会不断刷新和更新时间。sessionStorage 变量甚至不知道它是一个日期，它只存储毫秒，并且“就绪”函数只在开始时调用一次（我已经使用警报窗口进行了检查）。我的代码中没有逻辑可以实现这一点，但页面上的值会实时保持最新。有任何想法吗？

```
// Initialize default date range
if (sessionStorage.minDate == null) {
    d = new Date();
    sessionStorage.minDate = (d.valueOf() - 172800000);
    delete d;
}
if (sessionStorage.maxDate == null) {
    d = new Date();
    sessionStorage.maxDate = d.valueOf();
    delete d;
} 
```

更新：仍然没有修复，但我尝试将毫秒作为文字给出，它仍然做同样的事情。所以它一定与我稍后使用毫秒计数创建一个新日期的事实有关。

任何想法都非常感谢。我真的必须让这个工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:10:43.333

显然我将毫秒数存储为一个字符串，并没有将它解析回一个整数，所以当我尝试用它创建一个新的 Date 时，javascript 不知道该怎么做，只是创建了一个 Date不带参数：当前日期和时间。

# iphone - 如果我的应用程序使用“铝制外观”作为其图标，它会被拒绝吗？

> ID：11193780
> 
> 赞同：0
> 
> 时间：2012-06-25T16:59:13.233
> 
> 标签：iphone, ios, app-store

我为我的应用程序创建了一个漂亮的图标，它非常准确地再现了 Apple 铝制徽标的风格（例如 iCloud 等）

在阅读应用审查指南时，我注意到了这一点：

> ## 8 - 商标和商业外观
> 
> 8.1 应用程序必须遵守 Apple 商标和版权使用指南以及 Apple 商标列表中解释的所有条款和条件。
> 
> 8.2 暗示或推断 Apple 是应用程序的来源或供应商，或 Apple 认可有关质量或功能的任何特定陈述的应用程序将被拒绝
> 
> 8.3 与现有 Apple 产品或广告主题混淆地相似的应用程序将被拒绝
> 
> 8.4 在其应用名称中拼错 Apple 产品名称的应用（即 Iphone 的 GPS、iTunz）将被拒绝
> 
> 8.5 使用受保护的第 3 方材料（商标、版权、商业机密或其他专有内容）需要进行书面权利检查，必须根据要求提供
> 
> 8.6 如果原始内容的所有品牌特征保持不变且完全可见，则可以在应用程序中使用通过 Google 地图 API 获得的 Google 地图和 Google 地球图像。掩盖或修改 Google 徽标或版权所有者标识的应用将被拒绝

特别是 8.3 似乎说你不能看起来太像苹果产品。

我的应用程序会被拒绝吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T17:03:44.553

有很多应用程序都有铝制图标。你可能会没事的。但它是苹果。你永远不会知道。如果他们不喜欢改变图标，这没什么大不了的。走着瞧吧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T17:04:17.363

在您提交应用程序以供审核之前，无法确定。除了在 Apple 进行评论的人之外，没有人能告诉你会发生什么，而且在你提交之前你不会发现。我会提交它，看看会发生什么。

# python - 如何在python中将两个变量与一个字符串进行比较？

> ID：11193782
> 
> 赞同：4
> 
> 时间：2012-06-25T16:59:14.650
> 
> 标签：python, operators

如果 a 或 b 为空，我想打印一条消息。

这是我的尝试

```
a = ""
b = "string"

if (a or b) == "":
    print "Either a or b is empty" 
```

但只有当两个变量都包含空字符串时才会打印消息。

仅当 a 或 b 为空字符串时，如何执行打印语句？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T17:01:42.880

更明确的解决方案是：

```
if a == '' or b == '':
    print('Either a or b is empty') 
```

在这种情况下，您还可以检查元组中的包含：

```
if '' in (a, b):
    print('Either a or b is empty') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T17:04:28.503

```
if not (a and b):
    print "Either a or b is empty" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-25T17:03:07.087

你可以这样做：

```
if ((not a) or (not b)):
   print ("either a or b is empty") 
```

因为`bool('')`是假的。

当然，这相当于：

```
if not (a and b):
   print ("either a or b is empty") 
```

请注意，如果要检查**两者**是否为空，可以使用运算符链接：

```
if a == b == '':
   print ("both a and b are empty") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-25T17:02:42.403

```
if a == "" and b == "":
    print "a and b are empty"
if a == "" or b == "":
    print "a or b is empty" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-25T17:04:56.160

或者您可以使用：

```
if not any([a, b]):
    print "a and/or b is empty" 
```

# string - OCAML - 字符串和子字符串

> ID：11193783
> 
> 赞同：2
> 
> 时间：2012-06-25T16:59:14.593
> 
> 标签：string, ocaml, substring

有人可以帮我写一个函数来检查一个字符串是否是另一个字符串的子字符串吗？

（可以有不止 2 个字符串）

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T08:15:05.137

带`String`模块：

```
let contains s1 s2 =
  try
    let len = String.length s2 in
    for i = 0 to String.length s1 - len do
      if String.sub s1 i len = s2 then raise Exit
    done;
    false
  with Exit -> true 
```

使用`Str`模块，就像@barti_ddu 说的检查[这个主题](https://stackoverflow.com/q/8373460/520394)：

```
let contains s1 s2 =
    let re = Str.regexp_string s2 in
    try 
       ignore (Str.search_forward re s1 0); 
       true
    with Not_found -> false 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T11:21:23.973

使用电池，您可以使用[String.exists](http://ocaml-batteries-team.github.com/batteries-included/hdoc/BatString.html#VALexists)。它也存在于 ExtLib: [String.exists](http://ocaml-extlib.googlecode.com/svn/doc/apiref/ExtString.String.html#VALexists)中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T12:56:34.073

基于cago`String`的答案的替代方案，可能具有更好的性能和更低的内存使用量：

```
let is_substring string substring = 
  let ssl = String.length substring and sl = String.length string in 
  if ssl = 0 || ssl > sl then false else 
    let max = sl - ssl and clone = String.create ssl in
    let rec check pos = 
      pos <= max && (
        String.blit string pos clone 0 ssl ; clone = substring 
        || check (String.index_from string (succ pos) substring.[0])
      )
    in             
    try check (String.index string substring.[0])
    with Not_found -> false 
```

* * *

## 回答 #4

> 赞同：-10
> 
> 时间：2013-04-24T17:45:21.180

```
String str="hello world";

System.out.println(str.contains("world"));//true

System.out.println(str.contains("world1"));//false 
```

# objective-c - UITextViews 隐藏键盘按钮不起作用

> ID：11193785
> 
> 赞同：0
> 
> 时间：2012-06-25T16:59:23.820
> 
> 标签：objective-c, ios

当我单击输入键盘上的“隐藏键盘”按钮时，我的应用程序上的所有 UITextViews 都不会隐藏键盘。

这很奇怪，因为 UITextFields 行为正常，并且绝对没有与 TextViews 链接的委托类，所以这种行为绝对没有理由。

有谁遇到过这个问题并解决了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:06:06.023

将返回键设置为“完成”之类的内容，然后使用委托方法查看是否发生换行：

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
    if ( [text isEqualToString: @"\n"] ) {
        [textView resignFirstResponder];
        return NO;
    }
    return YES;
} 
```

# android - 在 Eclipse Android 中实现 Dropbox

> ID：11193786
> 
> 赞同：0
> 
> 时间：2012-06-25T16:59:31.150
> 
> 标签：android, eclipse

我已经添加了 sdk 文件，如 dropbox 网站所说，但我不知道如何实现该包。在 Xcode 中，对于 iOS，实现方式是这样的：

```
#import <DropboxSDK/DropboxSDK.h> 
```

...但在 android 中我不明白该怎么做（我是 android 新手）。我试过这个：

```
package com.dropbox; 
```

……甚至这个……

```
package com.dropbox.android.sample; 
```

...来自 DBRoulette，但没有办法：它给出了一个错误，说我必须将 .json 文件移动到 lib 文件夹中。当我这样做时，错误消失了，但应用程序没有启动。

感谢您的任何回答

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-26T08:19:49.027

在您的项目 libs 文件夹中，您需要添加 jar 文件

```
dropbox-android-sdk-1.3.jar 
```

并且在您的项目中，您需要在您想要 dropbox.jar 类文件的位置添加导入功能，如下所示

```
import com.dropbox.client2.DropboxAPI;
import com.dropbox.client2.session.AccessTokenPair;
import com.dropbox.client2.session.AppKeyPair;
import com.dropbox.client2.session.Session.AccessType; 
```

**注意：**您的包可能是您可以拥有的任何东西，但您需要将包导入为`com.dropbox....`

# java - spring mvc - 带有帖子的空 json

> ID：11193787
> 
> 赞同：0
> 
> 时间：2012-06-25T16:59:31.310
> 
> 标签：java, jquery, ajax, spring-mvc

我对 Spring MVC 有一个小问题。基本上我要做的是使用 AJAX 将 JSON 对象发送到服务器。

简而言之，**JS**代码如下所示：

```
var newUser = { "userId":-1, "userName":name };
var notifRecip = {
  "emailNotification":jQuery( this ).find( "td:nth-child(3) input[type='checkbox']" ).is( ":checked" ),
  "smsNotification":jQuery( this ).find( "td:nth-child(4) input[type='checkbox']" ).is( ":checked" ),
  "webNotification":jQuery( this ).find( "td:nth-child(5) input[type='checkbox']" ).is( ":checked" ),
  "user":newUser
}; 
```

如果我是对的，它会为我提供一个有效的 JSON 对象，其中包含来自我的表单的数据是吗？现在我正在做ajax帖子：

```
jQuery.ajax( "/notifications/saveNewUsers/" + notId, {
       dataType:'json',
      contentType:"application/json",
     type:"POST",
    data:( notifRecip )
} )
.success( function ( response )
{
    console.log( response )
} ); 
```

到目前为止一切顺利，我的控制器接收到具有适当`notId`值的请求：

```
@RequestMapping(value = "saveNewUsers/{notificationId}", method = RequestMethod.POST, headers = {"content-type=application/json"})
public
@ResponseBody
boolean saveNewUsers( @RequestBody NotificationRecipient notificationRecipient, @PathVariable Integer notificationId )
{
    System.out.println( notificationId + " " + notificationRecipient );
    return false;
} 
```

但是控制台输出是这样的：

```
18:45:10,947 INFO  [stdout] (ajp--127.0.0.1-8009-1) 0 null 
```

我不知道为什么。我对spring mvc很陌生，所以任何帮助都将不胜感激。我确实有`Jackson`依赖性。

`NotificationRecipient`对象：

```
public class NotificationRecipient
{
private User user; 
private boolean emailNotification;
private boolean smsNotification;
private boolean webNotification;

//with getters and setters
} 
```

和`User`：

```
public class User
{
private Integer userId;
private String userName;

//with getters and setters
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:41:43.497

经过一段时间的谷歌搜索：

你需要打电话`data: JSON.stringify( notifRecip )`。当我在没有它的情况下进行 POST 时，来自我的 JSON 对象的参数被解析为 GET 参数（... webNotificaiton=false&smsNotification=false...）

# twitter - 无法使用 RestSharp 将图像上传到 Twitter

> ID：11193792
> 
> 赞同：1
> 
> 时间：2012-06-25T16:59:41.463
> 
> 标签：twitter, windows-runtime, twitter-oauth, restsharp

我正在尝试使用 RestSharp 将 WinRT 应用程序中的图像上传到 twitter 代码在这里：

```
RestClient twClient = new RestClient("https://upload.twitter.com");
twClient.Authenticator = OAuth1Authenticator.ForProtectedResource(........);
var postTweet = new RestRequest("/1/statuses/update_with_media.json", Method.POST);
postTweet.AddParameter("status", TweetBox.Text);
byte[] img = await GetDataAsync(imageFile);
postTweet.AddFile("media[]", img, imageFile.Name, "multipart/form-data");            
twClient.ExecuteAsync(postTweet, (response =>
{
     try
     {
          if (response.StatusCode == HttpStatusCode.OK) 
          {
              .... 
```

这是我的 GetDataAsync，它从独立存储中的文件中获取字节数组

```
 public static async Task<byte[]> GetDataAsync(StorageFile file)
    {
        IRandomAccessStream stream = await file.OpenAsync(FileAccessMode.Read);
        DataReader reader = new DataReader(stream.GetInputStreamAt(0));

        uint streamSize = (uint)stream.Size;
        await reader.LoadAsync(streamSize);
        byte[] buffer = new byte[streamSize];
        reader.ReadBytes(buffer);
        return buffer;
    } 
```

服务器响应：

```
Expectation Failed
The expectation given in the Expect request-header field could not be met by this server.
The client sent
Expect: 100-continue
but we only allow the 100-continue expectation. 
```

# c++ - 线程退出时，dll中的mfc无模式对话框被破坏

> ID：11193794
> 
> 赞同：0
> 
> 时间：2012-06-25T16:59:49.163
> 
> 标签：c++, dll, mfc, dialog, modeless

我想从注入另一个进程的 MFC dll 打开一个 MFC 无模式对话框，该 dll 的工作是挂钩 winsock send & recv，该对话框将是与 dll 通信的接口。dll 应该能够在对话框运行时运行挂钩。

```
BOOL CDriverApp::InitInstance()
{
    CWinApp::InitInstance();

    if (!AfxSocketInit())
    {
        AfxMessageBox(IDP_SOCKETS_INIT_FAILED);
        return FALSE;
    }

    AfxMessageBox("I'm In!");

    DetourTransactionBegin();
    DetourUpdateThread( GetCurrentThread() );
    DetourAttach( &(PVOID &)RealSend, MySend );
    DetourAttach( &(PVOID &)RealRecv, MyRecv );
    if ((DetourTransactionCommit()) == NO_ERROR)
    {
        AfxMessageBox("Winsock hooked");
    }
    dlg = new ControlDlg();
    m_pMainWnd = dlg;
    if(dlg->Create(IDD_CONTROL_DLG))
    {
        dlg->ShowWindow(SW_SHOW);
    }

    //ExitThread(0);
    return TRUE; <--- 
} 
```

`dlg`是属于的对话框`CDriverApp`

根据我的观察，对话框被破坏，因为线程已经退出并且保存对话框的内存被删除。

```
The thread '_DllMainCRTStartup' (0x418) has exited with code 1657602048 (0x62cd0000). 
```

我已经阅读了[MFC 无模式对话框立即关闭](https://stackoverflow.com/questions/8853756/mfc-modeless-dialog-close-immediately "MFC 无模式对话框立即关闭")线程，但我`InitInstance()`已经`true`从一开始就返回了，所以这是一个不同的问题（我认为）

所以，我的问题是如何防止对话框被破坏？或者也许阻止线程退出？还是可以使用模态对话框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:29:02.330

这可能是你的问题：

> 常规 DLL 必须具有 CWinApp 派生类和该应用程序类的单个对象，就像 MFC 应用程序一样。但是，DLL 的 CWinApp 对象没有主消息泵，应用程序的 CWinApp 对象也没有。
> 
> 请注意，CWinApp::Run 机制不适用于 DLL，因为应用程序拥有主消息泵。**如果 DLL 打开无模式对话框或拥有自己的主框架窗口，则应用程序的主消息泵必须调用由 DLL 导出的例程，该例程又调用 DLL 应用程序对象的 CWinApp::PreTranslateMessage 成员函数。**

[http://msdn.microsoft.com/en-US/library/f22wcbea(v=vs.80](http://msdn.microsoft.com/en-US/library/f22wcbea(v=vs.80) )

编辑：

这显示了如何使用 cWnd 而不是 CDialog 来执行您正在执行的操作。我个人认为这是一个更好的方法。

[http://codinganswer.com/c/cwnd-in-a-new-thread-in-a-dll.html](http://codinganswer.com/c/cwnd-in-a-new-thread-in-a-dll.html)

这是将消息挂钩附加到无模式的示例。

[http://support.microsoft.com/kb/q187988/](http://support.microsoft.com/kb/q187988/)

# ajax - 从 menubar primefaces 3 和 jsf 2 ajax 更新内容页面

> ID：11193795
> 
> 赞同：1
> 
> 时间：2012-06-25T16:59:51.203
> 
> 标签：ajax, jsf-2, primefaces

好吧，首先我要解释一下我要做什么，我有一个 index.xhtml 页面，我在其中包含带有 primefaces 菜单栏的 menu.xhtml，在 menu.xhtml 中有一个面板 id=contenido 我想根据单击的菜单项进行更新，我已经更新了该面板，但问题是当我更新到另一个页面时，例如默认是 home.xhtml 并且我更新到 enviarsol.xhtml 然后来自 enviarsol.xhtml 的命令按钮不起作用，我是新手，我已经尝试了一些不同的更新面板的方法，我认为问题是enviarsol.xhtml的bean没有被管理或类似的东西，我这样做是因为我只想刷新那个面板而不是所有页面，请有人帮助我。

索引.xhtml：

```
<h:form>
    <img src="resources/homeheader.jpg" width="300" height="113" alt="homeheader"/>
    <div style="background-color: white">
    <img src="resources/Logos.jpg" width="1024" height="166" alt="homeheader"/>
    </div>
     <p:panel id="centerpage" >
        <ui:include src="WEB-INF/menu.xhtml"/>
    </p:panel>
</h:form>` 
```

菜单.xhtml：

```
<p:menuitem value="Contactos" icon="ui-icon-arrowreturnthick-1-w" actionListener="#{bnmenu.btnEditarContacto(e)}" update="contenido"/>  
<p:panel id="contenido" >
    <ui:include  src="#{bnmenu.url}"/>
</p:panel> 
```

bnmenu.java：

```
private String url;

public bnmenu() {
    url="home.xhtml";
}

 public void btnEditarContacto(ActionEvent e)
{
  url="enviarsol.xhtml";
} 
```

主页.xhtml：

```
<p:panelGrid columns="2" style="border-width: 0px">
        <p:commandButton  value="Consultar" actionListener="#{bnhome.btnlogin(e)}" update="txt1"/>
    <p:inputText id="txt1" value="#{bnhome.txtUsuario}"/>
    </p:panelGrid> 
```

enviarsol.xhtml:

```
<p:panelGrid columns="2" style="border-width: 0px">
        <p:outputLabel for="txtcorreo" value="Correo: "/>
        <p:inputText id="txtcorreo" value="#{bnSolicitud.correo}"/>
         <p:outputLabel for="txtmensaje" value="Mensaje: "/>
         <p:inputText id="txtmensaje" value="#{bnSolicitud.mensaje}"/>
         <p:commandButton  value="Enviar" actionListener="#{bnSolicitud.btnSolicitar(e)}" update="messages"/>        
</p:panelGrid>` 
```

我包括了这个：

```
<context-param> 
    <param-name>javax.faces.PARTIAL_STATE_SAVING</param-name> 
    <param-value>false</param-value> 
</context-param> 
```

现在它正在工作，但我不知道这会产生什么更多的影响现在它可以正常工作，但只有一次当我从 enviarsol.xhtml 中单击命令按钮时，最后它看起来工作正常，我在 bnmenu 中通过 @SessionScoped 更改了 @RequestScoped

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:07:47.943

你确定你真的想要ajax导航吗？对于无法使用浏览器 urlfield 或导航按钮的用户来说，这是非常令人沮丧的，而且您也将更难编写代码。考虑将 index.xhtml 转换为模板文件，如[http://www.mkyong.com/jsf2/jsf-2-templating-with-facelets-example](http://www.mkyong.com/jsf2/jsf-2-templating-with-facelets-example)所述并使用正常导航。

# android - NullPointerException 与自定义视图

> ID：11193796
> 
> 赞同：-1
> 
> 时间：2012-06-25T16:59:53.010
> 
> 标签：android

首先对不起我的英语，我是西班牙语，现在，我在制作扩展 View 的自定义类时遇到问题。Theese 是我的课程和我的 xml 文件：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:background="@android:color/white" >

        <ImageButton
            android:id="@+id/paleta"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/paleta" />
    </LinearLayout>

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/pizarra"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

    </LinearLayout>

</LinearLayout> 
```

* * *

```
public class Pintar extends View {
    private Bitmap mBitmap = null;
    private Canvas mCanvas = null;
    private Path mPath = null;
    private float mX, mY;
    private static final float TOLERANCE = 4;
    private LinearLayout pizarra;

    public Pintar(Context context) {
        super(context);
        // obtener pantalla
        pizarra= (LinearLayout) findViewById (R.id.pizarra);
        mBitmap = Bitmap.createBitmap(pizarra.getWidth(),
                pizarra.getHeight(), Bitmap.Config.ARGB_8888);
        mCanvas = new Canvas(mBitmap);
        mPath = new Path();
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        float x = event.getX();
        float y = event.getY();
        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            touchStart(x, y);
            invalidate();
            break;
        case MotionEvent.ACTION_MOVE:
            touchMove(x, y);
            invalidate();
            break;
        case MotionEvent.ACTION_UP:
            touchUp();
            invalidate();
            break;
        }
        return true;
    }

    private void touchStart(float x, float y) {
        mPath.reset();
        mPath.moveTo(x, y);
        mX = x;
        mY = y;
    }

    private void touchMove(float x, float y) {
        if (Math.abs(x - mX) >= TOLERANCE || Math.abs(y - mY) >= TOLERANCE) {
            mPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
            mX = x;
            mY = y;
        }
    }

    private void touchUp() {
        mPath.lineTo(mX, mY);
        mCanvas.drawPath(mPath, Blackboard.mPaint);
        mPath.reset();
    }

    @Override
    protected void onDraw(Canvas canvas) {
        // fondo
        canvas.drawColor(0XFFBBBBBB);
        // lo ya pintado
        canvas.drawBitmap(mBitmap, 0, 0, null);
        // el trazo actual
        canvas.drawPath(mPath, Blackboard.mPaint);
    }

public class Blackboard extends Activity {

    public static Paint mPaint = null;
    protected Pintar board;
    private LinearLayout pizarra;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        board = new Pintar(this);
        pizarra= (LinearLayout) findViewById (R.id.pizarra);
        pizarra.addView(board);
        setContentView(R.layout.main);
        // preparamos el pincel
        mPaint = new Paint();
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setAntiAlias(true);
        mPaint.setDither(true);
        mPaint.setColor(0XFF00E1FF);
        mPaint.setStrokeWidth(10);
    } 
```

我想在顶部的 LinearLayout 中显示一个 ImageButton，在底部的 LinearLayout 中我想用我的自定义类进行绘制，但我有这个错误：

```
06-25 18:43:07.578: E/AndroidRuntime(19822): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.acme.blackboard/com.acme.blackboard.Blackboard}: java.lang.NullPointerException 
```

感谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:04:32.630

您的自定义视图`Pintar`从不放置任何内容，因此没有任何内容可*查找*并且`findViewById`将始终返回`null`。解决它的一种简单方法是从`FrameLayout`（或其他`ViewGroup`）派生：

```
public class Pintar extends FrameLayout {

public Pintar(Context context) {
    super(context);

    final LayoutInflater layoutInflater = LayoutInflater.from(context);
    layoutInflater.inflate(R.layout.whatever_your_layout_id_is, this, true);

    pizarra= (LinearLayout) findViewById (R.id.pizarra); // << now this will have something to find
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:08:01.307

调用后将代码移动`findViewbyId`到行`setContentView`..

```
public class Blackboard extends Activity {
...

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    board = new Pintar(this);
    pizarra= (LinearLayout) findViewById (R.id.pizarra);
    pizarra.addView(board);

    // preparamos el pincel
    mPaint = new Paint();
    mPaint.setStyle(Paint.Style.STROKE);
    ....
    ....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T17:12:28.463

在访问它之前，您需要在 HTML 中包含您的自定义视图：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:background="@android:color/white" >

        <ImageButton
            android:id="@+id/paleta"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/paleta" />
    </LinearLayout>

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/pizarra"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

       <com.yourpackage.Pintar android:id="@+id/pintar" ... />

   </LinearLayout>

</LinearLayout> 
```

然后在您的代码中，您可以简单地`findViewById`而不是创建一个新实例：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    board = (Pintar)this.findViewById(R.id.pintar);
    pizarra= (LinearLayout) findViewById (R.id.pizarra);

    ...
} 
```

# c - C位操作/将一位从一个字节复制到另一个字节

> ID：11193800
> 
> 赞同：14
> 
> 时间：2012-06-25T17:00:02.360
> 
> 标签：c, bit-manipulation

我知道如何设置位、清除位、切换位以及检查是否设置了位。

但是，我如何将位，例如 byte_1 的 nr 7 复制到 byte_2 的位 nr 7 ？

没有 if 语句是可能的（不检查位的值）？

```
#include <stdio.h>
#include <stdint.h>
int main(){
  int byte_1 = 0b00001111;
  int byte_2 = 0b01010101;

  byte_2 = // what's next ?

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-25T17:06:21.290

```
byte_2 = (byte_2 & 0b01111111) | (byte_1 & 0b10000000); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-25T17:04:28.950

您需要先从 读取该位`byte1`，清除该位`byte2`和`or`您之前读取的位：

```
read_from = 3;  // read bit 3
write_to = 5;   // write to bit 5

the_bit = ((byte1 >> read_from) & 1) << write_to;
byte2 &= ~(1 << write_to);
byte2 |= the_bit; 
```

请注意，另一个答案中的公式（如果您将其扩展到使用变量，而不仅仅是第 7 位）适用于`read_from`和`write_to`是相同值的情况。

# cocoa - Cocoa：如何将布尔属性绑定到 NSCellStateValue？

> ID：11193804
> 
> 赞同：5
> 
> 时间：2012-06-25T17:00:22.107
> 
> 标签：cocoa, state, cocoa-bindings, nstextfield, nsvaluetransformer

我想将 an 的布尔`enabled`属性绑定到 an`NSTextField`的状态`NSButton`。我已经尝试添加一个自定义`NSValueTransformer`，将状态转换`NSButton`为`NSNumber`. 但是，在这种情况下，由于某种原因，文本字段一直被禁用。我的第二种方法：糟糕也失败了，因为`NSValueTransformer`不提供返回原语类型，例如`BOOL`.

**示例：**
屏幕截图显示了一个示例，其中文本字段被禁用，因为复选框的状态为`NSOnState`。我也想将标签绑定到这个状态。

![禁用的文本字段](../Images/2538fab7dbe1c772a63aa5ec92209f79.png)

此外，如果我可以**在 Interface Builder 中设置“禁用文本”** ，那将很方便。在上面的示例中，我在关联类中设置了文本。

* * *

**编辑：**

我将帐户文本字段的*启用*`self.anonymousLoginCheckbox.state`属性设置为*模型键路径。*密码文本字段类似。但是，它**不起作用**。

 ***![界面生成器绑定](../Images/36d8150b43bd11a4af2ceed2c99e2337.png)

* * *

**更新：**

我[在 GitHub 上创建了一个示例项目，展示了](https://github.com/johnjohndoe/CustomTextField)Nicolas Bachschmidt 所描述的实现。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-02T18:30:41.883

`NSButton`不符合 KVO 的 key `state`。Cocoa 绑定要求被观察对象在被观察属性发生变化时发出通知。As `NSButton`'s`state`只是其单元格的包装器，`state`当`-[NSButton setState:]`用户单击按钮时，不会调用方法（和自动 KVO 通知）（但是`-[NSCell setState:]`是）。如果将模型密钥路径设置为`self.anonymousLoginCheckbox.cell.state`，它将起作用。***

# sql-server - 带条件的 SQL 左连接查询

> ID：11193805
> 
> 赞同：0
> 
> 时间：2012-06-25T17:00:28.767
> 
> 标签：sql-server, left-join

我的程序中有这两张表来管理库存：

> **文章（项目）：**
> 
> id_articulo (id_item), nombre (名字), tipo (种类)
> 
> **Salidas（装运）：**
> 
> id_articulo (id_item), cant_sale (出货量), imp_total (总成本), almacen_destino (shipemt 库存命运), 日期

我被要求做一个静态的产品列表，这样他们总是会以相同的顺序显示相同的项目，其中项目类型 (tipo) =something

当我想在日期之间搜索特定的装运库存设计（almacen_destino）时，我无法获得所有具有相同类型（tipo）的物品，因为它们没有发货

这是我到目前为止的查询：

```
select a.id_articulo, sum(s.cant_sale) as Cant_sale, sum(s.imp_total) as Imp_total
from articulos a left join salidas s
on a.id_articulo=s.id_articulo
WHERE a.tipo='EMPAQUES'
and FECHA BETWEEN '06/06/2012' AND '12/06/2012'
and s.almacen_destino like 'CERRO COLORADO'
group by a.id_articulo 
```

它仅显示运送到该库存命运的物品，其中tipo（种类）=这些日期之间的Empaques，不喜欢显示相同的信息以及所有其他具有相同种类（tipo）的物品，即使装运量和总额也不发货成本为空。

提前，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T17:25:21.763

将过滤条件放在外部表上会将您的外部联接转换为内部联接。你试过了吗：

```
SELECT 
  a.id_articulo, 
  SUM(s.cant_sale) AS Cant_sale, 
  SUM(s.imp_total) AS Imp_total
FROM
  dbo.articulos AS a 
LEFT OUTER JOIN
  dbo.salidas AS s
  ON a.id_articulo = s.id_articulo
  AND s.almacen_destino = 'CERRO COLORADO'
  AND s.FECHA BETWEEN '20120606' AND '20120612'
WHERE a.tipo = 'EMPAQUES'
GROUP BY a.id_articulo; 
```

我在这里猜测了几件事：

*   `FECHA`在`salidas`- 如果不是，则将该 AND 移至 WHERE 子句。
*   你的日期是 d/m/y。请始终使用明确的日期格式 - 您可能在英国或加拿大，但并非您的听众中的每个人都是，我们无法读懂您的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:13:39.873

您必须在`WHERE`子句中包含与`LEFT JOIN`ed 表相关的任何子句块`ON`。

# java - 当外部事务标记为回滚时回滚所有嵌套事务

> ID：11193806
> 
> 赞同：4
> 
> 时间：2012-06-25T17:00:33.540
> 
> 标签：java, spring, transactions, rollback, propagation

我有两种方法用[`@Transactional`](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/transaction/annotation/Transactional.html). 第二种方法被称为嵌套在第一种方法中的某个地方。

现在我希望发生以下行为：

*   每次进入第二个嵌套方法时，都应该创建一个新的嵌套事务。当那个事务被标记为回滚时，只有那个事务应该被回滚。
*   但是当外部方法的事务被标记为回滚时，内部的每个嵌套事务——无论它是否被标记为回滚——都应该被回滚。

我如何设置[`Propagation`](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/transaction/annotation/Propagation.html)值才能实现这样的功能？

* * *

PS：我正在使用[HibernateTransactionManager](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/orm/hibernate3/HibernateTransactionManager.html)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T17:06:13.960

您需要使用[NESTED](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/transaction/annotation/Propagation.html#NESTED)。请注意，此传播模式使用 JDBC SavePoints 来实现此行为，因此嵌套行为仅在事务只是 JDBC 连接的包装器时才有效。它不适用于 JTA 事务。有关更多详细信息，请参阅[Spring 文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#tx-propagation-nested)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-14T17:20:22.003

One should clarify the default behaviour in Java Transactions. All nested transaction will not commit unless the parent commits. Read about it here [http://en.wikibooks.org/wiki/Java_Persistence/Transactions](http://en.wikibooks.org/wiki/Java_Persistence/Transactions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-15T18:23:58.067

我建议在单独的线程中实现此类功能，即您希望在嵌套事务中启动的方法 - 只需在单独的线程中启动它们。它可能看起来像下面的伪代码：

```
//SomeService 
// Here we start an external transaction
@Transactional
    int processAllInTransaction() {
        List<Integer> jobIds = jobService.getJobs();
        if (!jobIds.isEmpty()) {
            new Thread(new Runnable() {
                @Override
                public void run() {
                    jobIds.forEach(jobId ->
                            //Execute eveything in external transaction   
                            threadPool.execute(jobId)
                    );
                }
            }).start();

        } 
        return jobIds.size();
    }

//Method of Executor Service
void execute(final int jobId) {
    tasks.add(taskExecutor.submit(new Runnable() {
        void run() {
            someProcessor.processJob(jobId);
        }
    }));
}

//Method of another Service
@Transactional
public void processJob(int jobId) {
    //this will work in separate thransaction since was executed in another Theread
    someDao.doWorkInExternalTransaction(jobId);
} 
```

如果您确实需要控制外部事务 - 在 new Theread 中的单个外部事务中执行嵌套事务工作，只需等待 Thread 的返回结果并在需要时抛出异常

# android - VideoView 丢失回栈

> ID：11193807
> 
> 赞同：1
> 
> 时间：2012-06-25T17:00:45.507
> 
> 标签：android, android-videoview

我必须重构一些旧代码，目前正碰壁。显然，这段代码用于加载不同类型的视频格式，但现在它引入了 .MP4，这意味着它曾经调用的 WebView 无法再播放视频。鉴于我的时间非常有限，我试图在 VideoView 中播放视频。视频加载并播放，但启动 VideoView 时活动堆栈丢失。

我已经覆盖了 MediaController 类，至少能够捕获返回键事件。我的问题是：如何加载此 VideoView 并保留活动堆栈？

感谢您的时间和耐心。

下面是调用 VideoView 的代码：

```
public void onListItemClick(ListView l, View v, int position, long id) {
    Video video =  (Video) this.getListAdapter().getItem(position);
    track("Video", "VOD", video.title);
    String url = video.link.substring(29);
    if(DEBUG_MODE)
        Log.d("TDF", url);
    url = Kriptonic.getEncryptedURL(url);

    videoView = new VideoView(_myActivity);
    _myActivity.setContentView(videoView);

    Uri uri = Uri.parse(url);
    mc = new CustomMediaController(_myActivity);
    videoView.setMediaController(mc);

    videoView.setVideoURI(uri);
    videoView.start();

} 
```

编辑：

我通过不偷懒解决了这个问题。只是创建这样的视频而不将其附加到自己的活动中只是糟糕的编码。我创建了一个简单的活动，在上面的片段中启动了一个意图来调用该活动，一切都很好。

...对于除 ICS 之外的所有内容。它不会在 ICS 中运行。但这将是一个不同的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:28:54.110

将前一个视图缓存在一个临时变量中，并在按下返回时将 contentView 恢复到它。

```
mainView = _myActivity.getContentView();
videoView = new VideoView(_myActivity);
_myActivity.setContentView(videoView); 
```

按下返回按钮时

```
@Override
public void onBackPressed() {
    if (mainView != null) {
        _myActivity.setContentView(mainView);
        mainView = null;
    } else {
        super.onBackPressed();
    }
} 
```

# installation - 如何更改小向导图像的大小并在 inno 设置中具有自定义字段

> ID：11193811
> 
> 赞同：4
> 
> 时间：2012-06-25T17:00:55.597
> 
> 标签：installation, inno-setup

我希望我所有的 inno 设置页面如下所示：

![客户许可页面](../Images/805b2ef77b858a1716f29a1ed114f247.png)

![选项页面](../Images/7e86ea9903e2de90e73240a7f320cfd9.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T08:14:22.763

可以使用[`WizardForm.WizardSmallBitmapImage`](http://www.jrsoftware.org/ishelp/index.php?topic=scriptclasses&anchor=TWizardForm)类型访问小向导图像[`TBitmapImage`](http://www.jrsoftware.org/ishelp/index.php?topic=scriptclasses&anchor=TBitmapImage)。您可以更改此控件的大小和位置以适合您的设计（在顶部面板中）。您还可以以相同的方式隐藏/重新定位标签 (`WizardForm.PageNameLabel`和`WizardForm.PageDescriptiontLabel`)。

至于额外的字段，请参阅[这个问题](https://stackoverflow.com/questions/8068544/how-can-i-create-my-own-form-or-page-an-inno-setup-based-installer)。

# html - 选框垂直对齐

> ID：11193813
> 
> 赞同：1
> 
> 时间：2012-06-25T17:00:58.937
> 
> 标签：html, alignment, vertical-alignment, marquee

我有一个关于选框对齐的问题。你可以在这里看到它：www.vrobal.com 它不是中间的并且太靠近 div 的边缘。 ![选框问题](../Images/91fe5e3298985b64e9d5bdb73e27023e.png)

我尝试对 div 使用 vertical-align:middle，我尝试使用 margin-top:-10px 和其他一些方法，但它们不能正常工作。有什么建议吗？

```
<div style=" padding:0px;">
<marquee direction="left" style="padding:0px; background:#2c74a6; height:40px; marging:0px;"><h2><span style="color:#000000">INNOVATION | IMPROVISATION | IMPLEMENTATION&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VICTORY TO GLOBAL RECYLING</span></h2></marquee></div> 
```

PS：“ ”是用来隔开两个句子的，因为当另一个句子出现在同一个选框上时，我需要显示两个不同的句子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:07:30.827

在您的 styles.css 中，您有一个规则`<h2>`（第 55 行）。该`<h2>`元素有一个边距 - 那是你的问题。像这样改变它：

```
h2 {
    font-size: 24px;
    line-height: 40px; /* height of your marquee */
    margin: 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:07:54.943

这里可以这样

**HTML：**

```
<div style=" padding:0px;">
<marquee direction="left" style="padding:0px; background:#2c74a6; height:40px; marging:0px;">
<span class="text">INNOVATION | IMPROVISATION | IMPLEMENTATION | VICTORY TO GLOBAL RECYLING</span></marquee></div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**CSS：**

```
.text {
   display: inline-block;
   margin-top: 8px;
   color: #000000;
}​ 
```

我建议您删除`<h2>`并将您的设置`<span>`为`display: inline-block`，然后您可以使用边距将其居中。

# c++ - 如何使用 C++ 捕获 Windows 关闭/重新启动消息

> ID：11193814
> 
> 赞同：0
> 
> 时间：2012-06-25T17:01:21.900
> 
> 标签：c++, qt, winapi

如果用户关闭/重新启动/注销计算机，我想以编程方式检查我的应用程序。我试图实现下面的代码，它给出了编译错误

```
error: invalid conversion from 'bool (*)(DWORD)' to 'BOOL (*)(DWORD)'
error: initializing argument 1 of 'BOOL SetConsoleCtrlHandler(BOOL (*)(DWORD), BOOL)'

void TestApp:: OnQuit()
{
    SetConsoleCtrlHandler(HandlerRoutine, TRUE);
}

//Windows Call Back function implementation
bool WINAPI HandlerRoutine(DWORD dwCtrlType)
{
   bool ret = false;    
   if (dwCtrlType == CTRL_LOGOFF_EVENT || dwCtrlType == CTRL_SHUTDOWN_EVENT)
      //Graceful Quit

   return ret;
} 
```

我的开发环境是 QT Creator QT SDK 和 C++。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:20:44.937

正如其他人所说， a`BOOL`是 a `int`，而不是 a `bool`。A`bool`的标称值为`true`和`false`，`1`并且`0`。A`BOOL`使用`FALSE == 0`和`TRUE == !FALSE`。在这里几乎没有关系，因为它们基本上以相同的方式工作。

`BOOL`来自`C`没有内置`bool`类型的 WinAPI的旧遗产。

所以，你真正需要做的就是改变`bool`你`BOOL`的处理程序：

```
BOOL WINAPI HandlerRoutine(DWORD dwCtrlType)
^^^^
{
   BOOL ret = false;    
   ^^^^
   if (dwCtrlType == CTRL_LOGOFF_EVENT || dwCtrlType == CTRL_SHUTDOWN_EVENT)
      //Graceful Quit

   return ret;
} 
```

# silverlight-4.0 - 如何使用 wcf ria 服务重新加载复合对象数据？

> ID：11193821
> 
> 赞同：0
> 
> 时间：2012-06-25T17:01:48.270
> 
> 标签：silverlight-4.0, wcf-ria-services

假设我有 2 个表：
Person(personid, ...)
PersonPhone(ppid, persond, phoneid, ...)

在元数据中将 PersonPhone 定义为复合：

```
[Include]
[Composition]
public EntityCollection<PersonPhone> PersonPhonees { get; set; } 
```

然后我尝试重新加载人员数据以实现刷新功能。我所做的是在调用 wcf ria 服务以在视图模型中再次加载人员数据之前分离人员：

```
Context.Persons.Detach(this.Person); 
```

它适用于从表 Person 加载的所有数据。然后我对 PersonPhone 进行测试：假设 personid=1，这个人有 3 部电话：PhoneID: 1,2,3

然后在代码中，我从 PersonPhone 中删除了一行： this.Person.PersonPhonees.Remove(Phone(1));

为了测试，我没有提交更改，然后我重新加载了 Person 数据。Person 数据从 DB 重新加载，但 PersonPhone 仍然只有 2 行：phone(2)、Phone(3)，但所有电话应该有 3 行：1,2 和 3。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:42:11.983

您必须自己管理刷新。WCF RIA 不会替换（或删除）您在 Silverlight 客户端中缓存的任何数据。

在你的情况下，你打电话给`Remove(...)`. WCF RIA 尊重对数据的修改。当您`Person`再次加载时，WCF RIA 不应添加`Phone(1)`，因为您已将其删除。

也许您想`RevertChanges()`在加载整个上下文之前调用：

```
_domainContext.RejectChanges(); 
```

或者只是`Person`实体：

```
_domainContext.EntityContainer.GetEntitySet<Person>().RejectChanges(); 
```

这将撤消`Remove(Phone(1))`更改并允许查询将电话重新添加到上下文中。

# wcf - 无法更改 wcf 合同的方法返回值

> ID：11193822
> 
> 赞同：0
> 
> 时间：2012-06-25T17:01:54.040
> 
> 标签：wcf

我正在构建 WCF 服务，我已经在 IService 文件中编写了合同并在服务文件中实现了它，当我尝试更改我声明的方法的任何返回值时出现问题，这是因为它们是被保存在CustomersService命名空间的代码中，特别是在CustomersServiceClient类中，该类被锁定并且无法访问以进行更改。

这是我在 ICustomersService 文件中的代码：

```
 [ServiceContract]
    public interface ICustomersService
    {
        [OperationContract]
        CustomerDetails GetCustomerDetails(string customerid);
        [OperationContract]
        bool VerifyId(string customerid);
    } 
```

以及 CustomersService 文件中的代码：

```
public CustomerDetails GetCustomerDetails(string customerid)
{
....
}
public bool VerifyId(string customerid)
{
...
} 
```

在 CustomerService1 命名空间中，我有这个代码已经生成并锁定，所以任何修改我在 IService 中的方法的尝试都失败了，因为它被锁定在这里并且无法更改！

```
public class CustomersServiceClient : ClientBase<ICustomersService>, ICustomersService
    {
        public CustomersServiceClient();
        public CustomersServiceClient(string endpointConfigurationName);
        public CustomersServiceClient(Binding binding, EndpointAddress remoteAddress);
        public CustomersServiceClient(string endpointConfigurationName, EndpointAddress remoteAddress);
        public CustomersServiceClient(string endpointConfigurationName, string remoteAddress);

        public CustomerDetails GetCustomerDetails(string customerid);
        public bool VerifyId(string customerid);
    } 
```

这对我来说是个严重的问题，我希望你能找到我的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T00:59:33.837

Web 服务比仅引用程序集稍微复杂一些。如果您更改服务接口，代理类代码不会自动更新。每次更改合同时都需要手动更新。

试试这个：

1.  客户项目 -> 服务参考
2.  选择您的参考 -> 鼠标右键单击
3.  更新服务参考

如果您引用该程序集，WCF 还可以重用您的合同类型。在这种情况下，数据合同的更改将立即在客户端中看到。您可能会在该答案中找到实现步骤： [How to use a custom type object at the client](https://stackoverflow.com/questions/10954198/c-sharp-wcf-how-to-use-a-custom-type-object-at-the-client/10956079#10956079)

# ios - iOS - 如何使用钥匙串/核心数据创建登录过程？

> ID：11193827
> 
> 赞同：3
> 
> 时间：2012-06-25T17:02:12.907
> 
> 标签：ios, core-data, keychain, nsfetchrequest, nsentitydescription

我正在创建一个多用户 iPhone 应用程序，并且正在尝试完成用户登录过程中的编码。我可以成功创建一个帐户，并将用户输入的数据存储到 Core Data DB 中，并将 pin（密码）存储到 Keychain 中，所以现在我正在尝试完成登录过程。下面列出的以下代码是我到目前为止所拥有的，我想知道我需要做什么才能完成登录过程。

```
- (IBAction)processLogin:(id)sender {

// hide keyboard
[_textFieldUsername resignFirstResponder];
[_textFieldPin resignFirstResponder];

// First - make activity indicator visible, then start animating, then turn of wrong user / pin label
_welcomeActivityIndicator.hidden = FALSE;
[_welcomeActivityIndicator startAnimating];
[_wrongUserPin setHidden:YES];

// check if username and pin text fields are populated
if ([_textFieldUsername.text length ] == 0 &&  [_textFieldPin.text length ] == 0)
{
    [_welcomeActivityIndicator stopAnimating];
    [_wrongUserPin setHidden:NO];   
}

// CORE DATA    
NSFetchRequest *request= [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Account" inManagedObjectContext:_managedObjectContext];
NSPredicate *predicate =[NSPredicate predicateWithFormat:@"username=%@",self.textFieldUsername.text];

//check pin
Account *pinAccount = [[Account alloc] init];
[pinAccount.password isEqualToString:_textFieldPin.text];

[request setEntity:entity];
[request setPredicate:predicate];

NSError *error = nil;

NSArray *array = [_managedObjectContext executeFetchRequest:request error:&error];
if (array != nil) {
    NSUInteger count = [array count]; // may be 0 if the object has been deleted.
    NSLog(@"Username may exist, %@",count);
}

else {
    NSLog(@"Username does not exist.");
}

// TODO - put this in proper place - play audio bell if user logs in correctly
CFBundleRef mainBundle = CFBundleGetMainBundle();
CFURLRef soundFileURLRef;
soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"Glass", CFSTR("aiff"), NULL);
UInt32 soundID;
AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
AudioServicesPlaySystemSound(soundID);

// TODO - put this in proper place - Load ViewControllerHome
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
ViewControllerHome *home = (ViewControllerHome *)[storyboard instantiateViewControllerWithIdentifier:@"Home"];
[self presentModalViewController:home animated:YES];

} 
```

*Account*和*AccountBase*类文件**m**和**h**如下所示：

**Account.h** [http://pastie.org/4149299](http://pastie.org/4149299)

**Account.m** [http://pastie.org/4149296](http://pastie.org/4149296)

**AccountBase.h** [http://pastie.org/4149301](http://pastie.org/4149301)

**AccountBase.m** [http://pastie.org/4149302](http://pastie.org/4149302)

我将不胜感激任何想法或想法，并感谢您的阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T02:19:26.910

我能够使用以下代码完成登录过程。

```
- (IBAction)processLogin:(id)sender {

// hide keyboard
[_textFieldUsername resignFirstResponder];
[_textFieldPin resignFirstResponder];

// First - make activity indicator visible, then start animating, then turn of wrong user / pin label
_welcomeActivityIndicator.hidden = FALSE;
[_welcomeActivityIndicator startAnimating];
[_wrongUserPin setHidden:YES];

// check if username and pin text fields are populated
if ([_textFieldUsername.text length ] == 0 &&  [_textFieldPin.text length ] == 0)
{
    [_welcomeActivityIndicator stopAnimating];
    [_wrongUserPin setHidden:NO];   
}

// CORE DATA
NSFetchRequest *request = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Account" inManagedObjectContext:_managedObjectContext];

// set entity for request
[request setEntity:entity];

// filter results using a predicate
NSPredicate *pred =[NSPredicate predicateWithFormat:(@"username = %@"), _textFieldUsername.text];

// set predicate for the request
[request setPredicate:pred];

NSError *error = nil;

// store DB usernames in results array
NSArray *results = [_managedObjectContext executeFetchRequest:request error:&error];

NSLog(@"The returned results are %@",results);

// check text field against results stored in DB
for (Account *anAccount in results) {
    if ([anAccount.username isEqualToString:_textFieldUsername.text]){
        NSLog(@"Your username exists");
        if ([anAccount.password isEqualToString:_textFieldPin.text]){
            NSLog(@"Your pin is correct");

            // TODO - put this in proper place - play audio bell if user logs in correctly
            CFBundleRef mainBundle = CFBundleGetMainBundle();
            CFURLRef soundFileURLRef;
            soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"Glass", CFSTR("aiff"), NULL);
            UInt32 soundID;
            AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
            AudioServicesPlaySystemSound(soundID);

            // TODO - put this in proper place - Load ViewController(Root)Home
            if([anAccount.username isEqualToString:@"root"])
            {
                UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
                ViewControllerRootHome *roothome = (ViewControllerRootHome *)[storyboard instantiateViewControllerWithIdentifier:@"rootHome"];
                [self presentModalViewController:roothome animated:YES];
            }
            else {
                UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
                ViewControllerHome *home = (ViewControllerHome *)[storyboard instantiateViewControllerWithIdentifier:@"Home"];
                [self presentModalViewController:home animated:YES];
            }
        }
        else {
            NSLog(@"Your pin is wrong");
            [_welcomeActivityIndicator stopAnimating];
            [_wrongUserPin setHidden:NO];
            }
        }
    else {
        NSLog(@"Your username was not found");
        [_welcomeActivityIndicator stopAnimating];
        [_wrongUserPin setHidden:NO];
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T00:54:55.893

我相信您滥用核心数据。它并不像 sqlite 那样使用，始终运行始终可查询。(http://cocoawithlove.com/2010/02/differences-between-core-data-and.html)

您正在尝试保留用户数据库，但也过于复杂。在内存中，应用程序可以使用`NSMutableArray`您自己的对象来跟踪用户名、标签

所以你会有你的课：

```
interface Alcoholic : NSObject

@property(nonatomic,retain)NSString * username;
@property(nonatomic,retain)NSString * pin;
@property(nonatomic,retain)NSString * tab;
@end 
```

在添加这些的代码部分中，它将有一个可变数组

```
 NSMutableArray * alcoholics = [[NSMutableArray alloc]init];

- (IBAction)processLogin:(id)sender {

int i = 0;
while (i<alcoholics.count)
{
 Aloholic = [alcoholics objectAtIndex:i];
if(self.textFieldUsername.text == Aloholic.username)
   NSLog(@"Username may exist, %@",count);
}

else {
    NSLog(@"Username does not exist.");
}
} 
```

ETC...

因为我确定您的下一个问题是如何使其持久化，这就是核心数据发挥作用的地方。

在您的应用程序委托中获取酗酒者数组并在应用程序打开和关闭时将其保存到核心数据

```
-(void)save
{
     //use core data to save needed data persitently

     self.Values = [NSEntityDescription
                       insertNewObjectForEntityForName:@"processLoginClass" 
                       inManagedObjectContext:[self managedObjectContext]];

          self.Values.alcoholics =  self.processLoginClass.alcoholics;

     }

     NSError *error;
     if (![[self managedObjectContext] save:&error]) 
     {
          NSLog(@"Couldn't save state information: %@", [error localizedDescription]);
     }
}

-(void)load
{
     //use core data to load needed data 

     NSError *error;
     NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
     NSEntityDescription *entity = [NSEntityDescription entityForName:@"Values" 
                                               inManagedObjectContext:[self managedObjectContext]];
     [fetchRequest setEntity:entity];

     NSArray *fetchedObjects = [[self managedObjectContext] executeFetchRequest:fetchRequest error:&error];
     for (processLoginClass *info in fetchedObjects) 
     {
          [self.processLoginClass setAlcholics:info.alcholics];
     }      
} 
```

# iphone - 是否有可能在不越狱的情况下测试 iPhone 应用程序？

> ID：11193828
> 
> 赞同：2
> 
> 时间：2012-06-25T17:02:16.737
> 
> 标签：iphone, objective-c, xcode

我想在我的 iPhone 上测试一个自行创建的应用程序，而无需购买 Xcode 开发者帐户。我到处搜索，但没有发现任何有用的东西。我不会为 acc 支付 79 欧元。只是为了测试我的应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T17:09:26.880

如果您只想学习 Objective-C 和 Cocoa，您可以在模拟器上测试您的应用程序。但是，如果您想在真实设备上进行实际测试（如果您实际上是在应用商店中发布应用程序，这一点很重要），那么您别无选择，只能加入开发者计划。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:04:55.100

没有其他办法。您必须支付 99 美元的费用才能在真实设备上测试您的应用程序。或者你可以越狱你的手机。但是没有越狱或支付费用，不，这是不可能的，对不起。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T17:07:50.390

有些分发程序不需要越狱，但是这些程序往往是供公司内部使用的，因此可能不会为您节省任何钱。也许你可以找到一个试用版。

附带说明一下，如果您运行的是 iOS 5，则[苦艾酒越狱](http://greenpois0n.com/)非常稳定且“安全”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T17:08:30.187

从技术上讲，@DrummerB 所说的并不完全正确。如果您能找到愿意的、获得许可的 iPhone 开发人员，他们会将您安排到他们的开发团队中，那么您可以使用他们的配置文件和证书进行操作，直到您付费升级为止。

但是我只想指出，这不是我亲自为您做的事情，您应该自己花 99 美元购买证书。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T20:25:47.363

如果您是学生，您可以查看[Apple Developer University Program](https://developer.apple.com/programs/ios/university/)。该程序对学生免费，并允许您在真实设备上测试您的应用程序。但是，使用此会员级别，您将无法向 App Store 提交应用程序。为此，您仍然需要付费会员资格。

# ruby-on-rails - 使用rails将引号添加到json中的ID

> ID：11193829
> 
> 赞同：1
> 
> 时间：2012-06-25T17:02:17.420
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, json

我当前的 json 输出是“id”：3，“name”：“test”，我需要 3 为“3”。

我将如何在 Rails 中执行此操作？

```
 def search
    @tags = Tag.where("name like ?", "%#{params[:q]}%")
    respond_to do |format|
      format.json { render :json => @tags.to_json(:only => [:id, :name]) }
    end
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:12:35.653

Sergio 的解决方案会奏效。但是，如果您在多个地方这样做，我建议您覆盖 Rails 的内置函数`as_json`。

在您的`Tag`模型中：

```
def as_json(options={})
  options[:id] = @id.to_s
  super(options)
end 
```

您的控制器方法将保持不变。这是未经测试的，但应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:05:27.673

像这样的东西：

```
format.json do
  tags = @tags.to_json(:only => [:id, :name])
  render :json => tags.map{|t| t['id'] = t['id'].to_s; t}
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T19:58:38.040

这是唯一对我有用的解决方案：

```
 def search
    @tags = Tag.where("name like ?", "%#{params[:q]}%")
    respond_to do |format|
      format.json { render :json => @tags.map {|t| {:id => t.id.to_s, :name => t.name }} }
    end
  end 
```

# sockets - 在 Node 中使用 Sockets.io 共享子进程的终端输出

> ID：11193830
> 
> 赞同：0
> 
> 时间：2012-06-25T17:02:23.613
> 
> 标签：sockets, node.js

我对 Node.JS 和异步编程非常陌生，并且有一个具有挑战性的问题。我想从 Node 分叉一个进程，然后使用 Websockets 将输出返回到浏览器，特别是 Sockets.io 库。处理此问题的最佳和最可靠的方法是什么？

数据不是关键任务，它只是用于更新用户的状态。因此，如果他们离开页面，套接字可以关闭，子进程可以继续运行。如果有某种方法可以通过 Express 中的特定 URL 访问套接字并稍后返回它（但这可能是另一天的工作），那也很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:03:12.263

使用 socket.io 的 Redis Store 支持：

```
var RedisStore = require('socket.io').RedisStore;
var io = require('socket.io').listen(app);

io.set('store', new RedisStore()); 
```

socket.io 库使用 redis 服务器来存储数据和事件。

# django - 为什么 django manage.py syncdb 无法在我的开发服务器上创建新列？

> ID：11193835
> 
> 赞同：2
> 
> 时间：2012-06-25T17:02:40.980
> 
> 标签：django, django-models, django-manage.py

我正在尝试从生产服务器创建一个开发服务器，我可以从中测试新的想法。

我通过使用 Postgres 转储它创建了生产服务器数据库的副本，`db_dump`然后将转储导入新数据库。

然后我复制了我的生产 django 目录并更改了所有`.py`文件以引用`server_debug.`而不是`server`在我的`import`语句中。

使用管理界面更改某些数据的工作原理是只有开发服务器更改了其数据。

但是，当我尝试`models.py`在我的开发服务器中添加一个新字段时，`manage.py syncdb`无法创建它。

有没有我忽略的东西可能导致`manage.py`引用我的生产服务器而不是我的开发服务器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T17:06:38.750

`syncdb`不会触及已经存在的表。您需要重置应用程序（如果您不关心数据，最简单），手动修改表（更多的是快速破解）或使用迁移应用程序和版本您的模型 -例如[South 。](http://south.aeracode.org/)

# emacs - 非 ascii 远程文件名在 Emacs dired 中显示不正确

> ID：11193837
> 
> 赞同：2
> 
> 时间：2012-06-25T17:02:46.600
> 
> 标签：emacs, character-encoding, remote-access, tramp, dired

在列出远程目录（例如 /scpc:myhost:/home/myuser）时，Dired 似乎无法正确显示文件名中的“ç”或“í”等字符。它显示“??” 对于每个非 ASCII 字符。我怎样才能解决这个问题？这是一个可怕的限制吗？

最糟糕的是，许多基于 dired 的命令不适用于这些文件（例如文件重命名）。

相反，ibuffer、eshell 和其他命令适用于任何远程文件名（并正确显示它们）。

问题出现在不同机器上的远程 ext3 和 ext4 文件系统，没有尝试过其他文件系统。我在我安装的两个 Emacs 版本中都发现了这个问题：24.1.50.1 和 23.3。我也尝试过使用dired+，结果相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T19:18:09.110

您可以使用：

```
(setq tramp-remote-process-environment ())
(add-to-list 'tramp-remote-process-environment "LC_ALL=en_US.utf8" 'append) 
```

有关 UTF-8 的 Tramp 问题的更多信息 -[请参阅我的问题](https://stackoverflow.com/questions/14002123/emacs-diredtramp-wrong-filenames-with-utf8/15063599)

# html - 如何从外部的内框打开链接？

> ID：11193839
> 
> 赞同：0
> 
> 时间：2012-06-25T17:02:51.390
> 
> 标签：html, iframe, lightbox

好吧，我有这个问题，我使用了一个灯箱脚本并在其中打开了一个 iframe，所以它只是 iframe。有没有办法在这个 iframe 中放置一个链接并在普通窗口中打开这个链接（在 iframe 之外）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:07:58.433

用于`<a href="..." target="_top">My Link</a>`将其置于所有其他框架之上（突围）。

_blank 将放入一个新窗口或标签

_parent 会将链接放在当前框架之上的框架中（如果只有一级框架，则与 _top 相同）

使用框架的名称（不是 id）将打开该框架中的链接。

[http://www.w3schools.com/tags/att_a_target.asp](http://www.w3schools.com/tags/att_a_target.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:05:05.743

尝试添加`target="_parent"`到链接标记，以在包含 IFrame 的父页面中`target="_blank`打开链接，或者在新的浏览器窗口中打开链接。

```
target="_blank"       New window
target="_self"        Current window
target="_parent"      Parent frame
target="_top"         Full browser window 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T17:06:10.933

如果要在新窗口/选项卡中打开链接，请使用`_blank`目标：

```
<a href="someurl..." target="_blank"> 
```

如果要打开链接以替换 iframe 所在的页面，请使用`_top`目标：

```
<a href="someurl..." target="_top"> 
```

# jquery - iPhone 方向/phonegap

> ID：11193860
> 
> 赞同：2
> 
> 时间：2012-06-25T17:03:55.350
> 
> 标签：jquery, iphone, ios, cordova

我有一个为 ios 制作的 phonegap 应用程序。我想做的是将我的方向锁定在垂直模式，除非我在本机 ios 播放器中启动 vimeo 视频。目前，当我锁定到垂直模式时，播放器也会垂直播放并且不会旋转。关于我如何做到这一点的任何想法？

ios 5 phonegap (cordova) 1.8.1 Jquery Jquery Mobile

# javascript - 如何将新附加的元素存储到变量中？

> ID：11193863
> 
> 赞同：3
> 
> 时间：2012-06-25T17:04:08.137
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何在附加节点后直接获取对节点的引用？](https://stackoverflow.com/questions/1162677/how-can-i-get-a-reference-to-a-node-directly-after-it-is-appended)

举个例子：

```
$(document).append('<div class="new-elem" />'); 
```

我现在如何将上述新创建的元素存储到一个变量中，以便我可以像这样使用它：

```
newElem.append('div class="another-new-element" />'); 
```

newElem 是我最初附加到文档的元素在哪里？

我假设它不能像这样完成：

```
var newElem = $(document).append('<div class="new-elem" />'); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T17:05:38.200

你可以做相反的事情[`appendTo`](http://api.jquery.com/appendTo/)：

```
var newElem = $('<div class="new-elem" />').appendTo(document); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:06:09.073

你应该使用[`appendTo`](http://api.jquery.com/appendTo/)：

```
var newElem = $('<div class="new-elem"></div>').appendTo(document); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T17:08:31.357

如果我理解正确，您正在寻找对您首先附加的内容的变量引用，您不妨这样做：

```
var el = $('<div class="blah">');
$(document).append(el);
el.append('<span>test</span>'); 
```

# c# - MVC 模型验证中的变量

> ID：11193867
> 
> 赞同：4
> 
> 时间：2012-06-25T17:04:26.473
> 
> 标签：c#, asp.net-mvc, validation, membership-provider

所以在 MVC 中使用 .NET Membership 系统时，密码策略是在 web.config 文件中定义的。例如 minPasswordLength 在membership->profiles 中定义。

使用视图时，可以使用`@Membership`组件访问

```
Passwords must be at least @Membership.MinRequiredPasswordLength characters long. 
```

但是，如果您查看示例 MVC 应用程序中的默认模型，它会说

```
 [Required]
 [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
 [DataType(DataType.Password)]
 [Display(Name = "New Password")]
 public string NewPassword { get; set; } 
```

我很好奇的部分是，`MinimumLength = 6`因为这是硬编码的，这意味着如果我想更新密码长度，我不仅需要编辑 web.config（就像微软建议的那样），还要搜索对它在源代码中并到处更改（可能不是最佳编程实践）。

有什么方法可以在属性中使用变量。我怀疑不会，因为这可能发生在编译时而不是运行时。如果没有人知道更好的模式来阻止我将来必须找到替换所有引用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T17:12:47.340

[这是一篇](http://timjames.me/mvc-3-password-length-dataannotation)可以帮助您回答问题的文章。基本上，创建您自己的 DataAnnotation，从 web.config 中提取最小长度。

对于后代，这是引用站点中使用的代码：

```
[AttributeUsage(AttributeTargets.Property | AttributeTargets.Field | AttributeTargets.Parameter , AllowMultiple = false, Inherited = true)]
public sealed class MinRequiredPasswordLengthAttribute : ValidationAttribute, IClientValidatable
{                        
    private readonly int _minimumLength = Membership.MinRequiredPasswordLength;        
    public override string FormatErrorMessage(string name)
    {
        return String.Format(CultureInfo.CurrentCulture, ErrorMessageString, name, _minimumLength);
    } 
    public override bool IsValid(object value)
    {           
        string password = value.ToString();
        return password.Length >= this._minimumLength;            
    }        
    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        return new[]{
            new ModelClientValidationStringLengthRule(FormatErrorMessage(metadata.GetDisplayName()), _minimumLength, int.MaxValue)
        };
    } 
} 
```

在你的 ViewModel 上

```
[Required]        
[MinRequiredPasswordLength(ErrorMessage = "The {0} must be at least {1} character(s) long.")]           
[DataType(DataType.Password)]
[Display(Name = "Password")]
public string Password { get; set; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:12:41.327

如果您想要为您的验证属性提供可变参数，您将需要[开发自己的属性](https://stackoverflow.com/questions/3413715/how-to-create-custom-data-annotation-validators)并应用它。

也许称它为“MinLengthFromConfigFile”？

# django - 高效的 webapp 开发

> ID：11193871
> 
> 赞同：0
> 
> 时间：2012-06-25T17:04:35.240
> 
> 标签：django, workflow

效率不高:)。

我正在尝试通过构建一个简单的应用程序来学习 django。我在 webfaction 上购买了一个托管计划，在我的 Windows 机器上设置了 github 帐户和一个 putty。我正在我的 Windows 上编写“代码”，将其推送到 github repo，然后通过 putty 连接到我的 webfaction 帐户以从 github 中提取。

这是一个非常乏味和无聊的过程，我不禁想知道我做错了什么。即使修正一个简单的错字也需要很多时间。开发人员是否使用 vim 在服务器端编写所有内容？这听起来更不令人鼓舞。我可以做些什么来改善我的工作流程吗？专业人士是怎么做的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:09:48.700

总结 Kit Sunde 的回答：在实际部署站点之前，您不应该部署到服务器。正常的开发和测试是在本地完成的，使用`manage.py runserver`本地数据库。这在 Windows 上运行良好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:36:57.437

如果您在服务器上编辑代码，您需要停止浪费自己的时间。您不应该以这种方式部署代码的原因有很多，最重要的是您会浪费时间，而且重要的是您会在用户查看站点时破坏事物。

在本地设置开发服务器，这就是 django`manage.py runserver` [存在](https://docs.djangoproject.com/en/dev/ref/django-admin/)的原因。如果您由于某种原因无法在 Windows 上运行它，则在 virtualbox 中安装服务器，将文件夹安装在您的代码所在的 Windows 中并运行它（这是我们为设计师所做的，尽管我们有很多依赖项）。

有 IDE 可以让你通过一个你可能会觉得更舒服的 GUI 运行 Django，我使用[PyCharm](http://www.jetbrains.com/pycharm/)，我听说过[eclipse](/questions/tagged/eclipse "显示标记为“日食”的问题")的好消息。

如果您了解了[Fabric](http://docs.fabfile.org/en/1.4.2/index.html)的工作原理，那么您将节省时间，以便您可以自动化您的部署过程。我不确定织物在 Windows 上的效果如何，但我相信你可以使用[cygwin](/questions/tagged/cygwin "显示标记为“cygwin”的问题")或类似工具来让它工作。

一个相当基本的例子是这个：

```
from fabric.api import *

env.hosts = ['ubuntu@example.org']

def deploy():
    pid_file = "~/myproject/process.pid"
    with cd('~/myproject/'):
        run('git pull')
        run('src/city_nomads/manage.py collectstatic --noinput')
        # If the process isn't up we don't want the thing to exit.
        with settings(warn_only=True):
            run("cat {} | xargs kill -TERM".format(pid_file))
        run("src/myproject/manage.py runfcgi "
                "method=threaded "
                "host=127.0.0.1 "
                "port=8000 "
                "pidfile={} "
                "--settings=myproject.settings_release".format(pid_file)) 
```

它会通过 SSH 连接到我的服务器，拉取源代码，收集静态数据，如果进程存在则终止该进程，然后将 django 作为 fastcgi 运行。我假设您已设置[nginx](/questions/tagged/nginx "显示标记为“nginx”的问题")或[apache](/questions/tagged/apache "显示标记为“apache”的问题")以在端口 8000 上连接到 Django。

# jquery - 在 jquery 中擦除和重新创建元素

> ID：11193875
> 
> 赞同：0
> 
> 时间：2012-06-25T17:04:37.497
> 
> 标签：jquery, boilerplate

我正在使用 jquery 插件样板（[可在此处获得](http://stefangabos.ro/jquery/jquery-plugin-boilerplate-revisited/)）来创建 div 元素的扩展。该插件旨在在原始 div 中添加其他 div 或元素。我的问题是我希望能够销毁并重新创建 div 内的元素。

这是插件代码的简化示例：

```
(function($) {

$.extension = function(element, options) {

    var defaults = {
        foo: 'bar',
        onFoo: function() {}
    }

    var plugin = this;

    plugin.settings = {}

    var $element = $(element),
         element = element;

    plugin.init = function() {
        plugin.settings = $.extend({}, defaults, options);
        // code goes here

        var newDiv = $(document.createElement("div"));
        newDiv.html("hello world");

        $element.append(newDiv);
    }

    plugin.foo_public_method = function() {
        // code goes here
    }

    var foo_private_method = function() {
        // code goes here
    }

            plugin.destroy = function () {
        $element.empty();
    }

    plugin.init();

}

$.fn.extension = function(options) {

    return this.each(function() {
        if (undefined == $(this).data('extension')) {
            var plugin = new $.extension(this, options);
            $(this).data('extension', plugin);
        }
    });

}

})(jQuery); 
```

如您所见，我使用 jquery empty() 方法来擦除 div 的子项。它可以很好地擦除，但是我无法重新创建它们。

这是用于调用插件的html代码：

```
<!DOCTYPE html>
<html lang="en">
<head>
<script type="text/javascript" src="js/jquery1.7.2.min.js"> </script>
<script type="text/javascript" src="js/extension.js"> </script>
</head>

<body>
<button type="button" id="destroy">Destroy</button>
<button type="button" id="create">Create</button>
<div id="random" ></div>

<script>
$('#random').extension();
$('#destroy').click(function(){
$('#random').data('extension').destroy();
});

$('#create').click(function(){
alert("hey");
$('#random').extension();
 });

 </script>

 </body>
 </html> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:09:48.857

您没有删除旧数据，因此不会重新创建插件，因为它不会`== undefined`

尝试

```
plugin.destroy = function () {
    $element.empty().removeData("extension");
}; 
```

# assembly - 缓冲区溢出填充？

> ID：11193883
> 
> 赞同：1
> 
> 时间：2012-06-25T17:04:59.957
> 
> 标签：assembly, stack, buffer, overflow, frame

我正在练习非常基本的缓冲区溢出，我注意到一些奇怪的事情。

我的有效载荷是这样的：

```
[JUNKBYTES]+[EIP(jmp esp)]+[SHELLCODE] 
```

现在，应用程序的“流程”转到我在漏洞利用中指定的 EIP，然后它应该跳转`[SHELLCODE]`到. 我解决了修改我的有效载荷的问题：`[SHELLCODE]``[SHELLCODE]`

```
[JUNKBYTES]+[EIP(jmp esp)]+[PADDING(4 bytes)]+[SHELLCODE] 
```

但我当然想了解为什么会这样。先感谢您。

# c++ - 图标在另一台计算机上消失

> ID：11193889
> 
> 赞同：3
> 
> 时间：2012-06-25T17:05:34.240
> 
> 标签：c++, qt, qt4, icons, release

我用 Qt Creator 创建了一个程序，并用发布模式编译了它。我已经添加了所有必要的 DLL，并且一切都在我的计算机上运行良好。

问题是当我从另一台计算机启动程序时，我包含的所有图标都没有显示，而在我的计算机上一切看起来都很好。

这可以从哪里来？

编辑：图标加载在一个 qrc 文件中......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T19:53:46.613

Qt 对文件格式的大部分支持依赖于插件。为确保您的应用程序在非开发机器上部署时按预期工作，您必须确保您还部署了相关插件。如果你没有，文件的加载（在这种情况下是 ICO 图标）将简单地失败。

在这种情况下，重要的插件是 qico4.dll（如果您在 Windows 上）。

官方 Qt 文档包含有关[Windows](http://qt-project.org/doc/qt-4.8/deployment-windows.html)和[Mac的](http://qt-project.org/doc/qt-4.8/deployment-mac.html)[Qt 部署](http://qt-project.org/doc/qt-4.8/deployment.html)的所有相关信息。向下滚动到 Qt 插件的相关信息。

作为一种快速解决方案，您可以创建一个目录，命名`imageformats`为包含可执行文件的文件夹的子目录，将 qico4.dll 复制到该目录中。

（注意：用户[@smerlin](https://stackoverflow.com/users/231717/smerlin)说这必须`plugins/imageformats`与您的可执行目录相关。我似乎记得我的应用程序不需要额外的`plugins`目录，但如果我发现确实如此，我会更新我的答案）。

# sql - 在 Oracle 中选择 DISTINCT 或 UNIQUE 记录或行

> ID：11193896
> 
> 赞同：1
> 
> 时间：2012-06-25T17:06:07.720
> 
> 标签：sql, unique, distinct

我想从我正在查询的数据库中选择不同或唯一的记录。我怎样才能做到这一点，但同时选择整个记录，而不仅仅是我区分为唯一的列？我必须做不守规矩的加入吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T17:29:48.633

根据您使用的数据库，您可以使用窗口函数。如果您只想要永不重复的行：

```
select t.*
from (select t.*,
             count(*) over (partition by <id>) as numdups
      from t
     ) t
where numdups = 1 
```

如果您想要每一行的一个示例：

```
select t.*
from (select t.*,
             row_number(*) over (partition by <id> order by <id>) as seqnum
      from t
     ) t
where seqnum = 1 
```

如果你没有窗口函数，你可以用“unruly joins”来完成同样的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T17:10:07.800

如果您只希望多列中的一列是唯一的并且您有可能包含多条记录的连接，那么您必须确定您希望查询提供的两个或多个值中的哪一个。这可以通过聚合函数、相关子查询或派生表或 CTE（在 SQL Server 中不确定 Oracle 是否有这些）来完成。

但是您必须在编写查询之前确定您想要的值。一旦你知道了，那么你可能知道如何得到它。

下面是一些简单的示例（我使用了 SQL Server 编码约定，但其中大部分在 Oracle 中应该是有意义的，因为它都是基本 SQL，Oracle 可能有不同的声明参数的方式）：

```
select a.a_id, max (b.test) , min (c.test2)
from tablea a 
join tableb b on a.a_id = b.a_id
join tablec c on a.a_id = c.a_id
group by a.a_id
order by b.test, c.test2

Select a.a_id, (select top 1 b.test from tableb b where a.a_id = b.a_id order by test2),
(select top 1 b.test2 from tableb b where a.a_id = b.a_id order by test2),
(select top 1 c.test3 from tablec c where a.a_id = c.a_id order by test4)
from tablea a   

declare @a_id int
set @a_id = 189
select a.a_id , b.test, b.test4
from tablea a 
join tableb b on a.a_id = b.a_id
join (select min(b.b_id) from tableb b where b.a_id = @a_id order by b.test3) c on c.b_id = b.b_id
where a.a_id = @a_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-19T14:26:47.623

在第二个例子中

```
 select t.*
from (select t.*,
             row_number() over (partition by id order by id ) as seqnum
      from t
     ) t
where seqnum = 1 
```

row_number() 必须在大括号中**没有星号。**

# r - 将两个直方图绘制在一起

> ID：11193901
> 
> 赞同：-1
> 
> 时间：2012-06-25T17:06:17.333
> 
> 标签：r, histogram

> **可能重复：**
> [如何在 R 中同时绘制两个直方图？](https://stackoverflow.com/questions/3541713/how-to-plot-two-histograms-together-in-r)

我想一起绘制两个直方图，它们都具有相同的 x 轴单位和 y 轴单位。两个直方图取自两个文件，inp1 和 inp2。我已经尝试了以下代码，但它不起作用：

```
x1<-hist(inp1, 120, plot = 0)  
x2<-hist(inp2, 120, plot = 0)  
hist(x1, x2, 240, plot = 1) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T18:30:58.597

你想要的那种情节严格来说不是直方图。`barplot()`不过，您可以使用with创建类似的东西`beside=TRUE`：

```
## Example data
d1 <- rnorm(1000)
d2 <- rnorm(1000, mean=1)

## Prepare data for input to barplot
breaks <- pretty(range(c(d1, d2)), n=20)
D1 <- hist(d1, breaks=breaks, plot=FALSE)$counts
D2 <- hist(d2, breaks=breaks, plot=FALSE)$counts
dat <- rbind(D1, D2)
colnames(dat) <- paste(breaks[-length(breaks)], breaks[-1], sep="-")

## Plot it
barplot(dat, beside=TRUE, space=c(0, 0.1), las=2) 
```

# php - 扩展 PHP 中的单例类

> ID：11193902
> 
> 赞同：2
> 
> 时间：2012-06-25T17:06:18.717
> 
> 标签：php, singleton

```
<?php
class LoveBase
{
    protected static $_instance = NULL;
    protected function __construct() {}
    public static function app()
    {
        if(self::$_instance == NULL) {
            self::$_instance = new self();
        }
        return self::$_instance;
    }

    public function get()
    {
        return 'LoveBase';
    }

}

class Love extends LoveBase
{
    public static function app()
    {
        if(self::$_instance == NULL) {
            self::$_instance = new self();
        }
        return self::$_instance;
    }
    public function get()
    {
        return 'Love';
    }
}

// Print "LoveLove" in this case(first case)
echo Love::app()->get(); 
echo LoveBase::app()->get();

// Print "LoveBaseLoveBase" in this case(second case)
// echo LoveBase::app()->get();
// echo Love::app()->get(); 
```

1.  为什么两种不同的方法得出相同的结果？

2.  比较这两种情况，当它的类首先实例化时，该方法将起作用。

（对不起，我英语不好，希望你能说得通）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T17:16:52.760

您定义了两个静态函数，它们都使用相同的静态变量 ($_instance) - 基类的静态成员也可以通过子类访问（只要它不是私有的）。请记住，静态的东西（方法和变量）会被继承，但不会被克隆。

解决方案：将成员变量设为私有，并为每个类创建一个。

```
class LoveBase
{
    private static $_instance = NULL;
    // ...

class Love extends LoveBase
{
    private static $_instance = NULL;
    // ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:16:39.337

```
// Print "LoveLove" in this case(first case)

//Set self::$_instance to Love object id
echo Love::app()->get(); 

//Static property $_instance is now already set, so LoveBase::app() won't create new self(), it will just return created and saved Love object
echo LoveBase::app()->get();

// Print "LoveBaseLoveBase" in this case(second case)

// Here is the same case, but static property $_instance filled with new self() in LoveBase class
// echo LoveBase::app()->get();
// echo Love::app()->get(); 
```

# python - 在 windows7 上使用 virtualenv 设置 django

> ID：11193905
> 
> 赞同：4
> 
> 时间：2012-06-25T17:06:23.510
> 
> 标签：python, django, path, virtualenv

我无法在 virtualenv 中启动新项目。这就是我到目前为止所做的：（全新的 Windows 安装）

[1）从http://python.org/download/](http://python.org/download/)安装python 2.7 （不是64的）

2) 使用 "set path=%path%;C:\python27" 似乎只适用于一个 cmd 会话，所以我添加了 C:\Python27; 在高级系统设置下的我的环境变量中，在 cmd 中键入 python 返回

```
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win32 
```

[3) 从http://pypi.python.org/pypi/virtualenv/](http://pypi.python.org/pypi/virtualenv/)下载 virtualenv.py运行它：

```
C:\Users\Maciej\Dropbox\VIRTUALENV_ENVS>python virtualenv.py testenv 
New python executable in testenv\Scripts\python.exe
Installing setuptools....................................done.
Installing pip.........................done. 
```

4）激活它并安装一些模块

```
C:\Users\Maciej\Dropbox\VIRTUALENV_ENVS\testenv\Scripts>activate
(testenv) C:\Users\Maciej\Dropbox\VIRTUALENV_ENVS\testenv\Scripts>
...
(testenv) C:\Users\Maciej\Dropbox\VIRTUALENV_ENVS>pip install -r requirements.txt 
...
Successfully installed... 
```

5）测试它是否有效：

```
testenv) C:\Users\Maciej\Dropbox\VIRTUALENV_ENVS\testenv>python
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win
32
Type "help", "copyright", "credits" or "license" for more information.
>>> import django
>>> print(django.get_version())
1.4
>>> 
```

6）试图建立一个项目：

```
(testenv) C:\Users\Maciej\Dropbox\VIRTUALENV_ENVS\testenv>django-admin.py startproject testproject
Traceback (most recent call last):
  File "C:\Users\Maciej\Dropbox\VIRTUALENV_ENVS\testenv\Scripts\django-admin.py"
, line 2, in <module>
    from django.core import management
ImportError: No module named django.core 
```

来自 virtualenv 的路径：

```
(testenv) C:\Users\Maciej\Dropbox\VIRTUALENV_ENVS\testenv>python
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win
32
Type "help", "copyright", "credits" or "license" for more information.
>>> import sys
>>> print sys.path
['','C:\\Users\\Maciej\\Dropbox\\VIRTUALENV_ENVS\\testenv\\lib\\site-packages\\setuptools-0.6c11-py2.7.egg', 
'C:\\Users\\Maciej\\Dropbox\\VIRTUALENV_ENVS\\testenv\\lib\\site-packages\\pip-1.1-py2.7.egg',
'C:\\Windows\\system32\\python27.zip',
'C:\\Users\\Maciej\\Dropbox\\VIRTUALENV_ENVS\\testenv\\DLLs',
'C:\\Users\\Maciej\\Dropbox\\VIRTUALENV_ENVS\\testenv\\lib',
'C:\\Users\\Maciej\\Dropbox\\VIRTUALENV_ENVS\\testenv\\lib\\plat-win',
'C:\\Users\\Maciej\\Dropbox\\VIRTUALENV_ENVS\\testenv\\lib\\lib-tk',
'C:\\Users\\Maciej\\Dropbox\\VIRTUALENV_ENVS\\testenv\\Scripts',
'C:\\Python27\\Lib',
'C:\\Python27\\DLLs',
'C:\\Python27\\Lib\\lib-tk',
'C:\\Users\\Maciej\\Dropbox\\VIRTUALENV_ENVS\\testenv',
'C:\\Users\\Maciej\\Dropbox\\VIRTUALENV_ENVS\\testenv\\lib\\site-packages'] 
```

我不知道是什么问题，以及如何解决它，还有另一个问题，来自 c:\python27 的那些文件应该在我的 virtualenv 路径中吗？我应该附上任何其他日志吗？如果是这样戳我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T04:53:51.543

第 6 步是事情开始出错的地方

您的 Windows 已绑定 .py(w) 文件以使用来自 c:\python27 目录的 Python，而不是来自您的 virtualenv。

我写过关于 virtualenv 和 win7 的博客文章：http: [//djangonautlostinspace.wordpress.com/2012/04/16/django-and-windows/](http://djangonautlostinspace.wordpress.com/2012/04/16/django-and-windows/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T14:22:37.907

我同意 jtiai，第 6 步出现问题，因为 Windows 绑定了特定的 Python。如果你这样做`python path/to/django-admin.py startproject`了，它应该工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T17:54:50.073

请通过下面给出的教程链接..

[http://aarshabeer.com/post/50973941605/install-multiple-django-version-using-virtualenvwrapper](http://ayarshabeer.com/post/50973941605/install-multiple-django-version-using-virtualenvwrapper)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-27T18:30:16.940

Instead of using virtualenv, on Windows I prefer to use Portable Python : [http://www.portablepython.com/](http://www.portablepython.com/). You can have several installations on the same machine and switch between them just by setting the path:

```
set path=d:\python\app\scripts;d:\python\app;%path% 
```

Moreover, it already contains Django. Once you have set up your python environment, you can copy your python directory over to your production server.

# c# - 如何将字符串的值设置为null

> ID：11193906
> 
> 赞同：12
> 
> 时间：2012-06-25T17:06:32.927
> 
> 标签：c#, c#-4.0

我知道我可以设置 null 像

```
string val = null; 
```

但我想知道我可以将其设置为空的其他方法。有没有`String.null`我可以使用的功能。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-25T17:09:19.090

我觉得你看得很远`String.Empty`

```
string val = String.Empty; 
```

**更新：** [TheFuzzyGiggler](https://stackoverflow.com/users/883352/thefuzzygiggler)评论值得一提：

> 设置 a `string`to`empty`而不是`null`. 避免以后出现异常。如果您必须读取和写入大量字符串，那么您将到处都有`null`值异常。或者你会有很多`if(!string.isNullorEmpty(string))`烦人的东西

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-25T17:09:16.717

您也可以使用默认关键字。

```
string val = default(string); 
```

这是关于默认关键字的另一个 SO 问题： [在 C# 中，`default` 关键字的用途是什么？](https://stackoverflow.com/questions/1727346/c-sharp-default-keyword)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-25T17:08:56.943

`null`不是特殊的字符串值（有`String.Empty`for `""`），而是空引用的通用对象文字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T17:18:22.550

显然，将某些内容设置为 null 的另一种方法是分配返回 null 的函数的结果：

```
string SomeFunctionThatReturnsNullString() {return null;}

string val = SomeFunctionThatReturnsNullString(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-16T11:33:22.263

将其分配给该值将使其为空，（选择正确的 sql 数据类型，此处为双精度）

```
 System.Data.SqlTypes.SqlDouble.Null 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-25T17:09:49.523

根据您的应用程序，您可以使用`string.Empty`. 我总是对初始化持怀疑态度，`null`因为垃圾收集器很棒，但并不完美，如果以某种垃圾收集器无法检测到的方式使用，可能会将您的字符串标记为垃圾收集（尽管这不太可能）。

# regex - 需要正则表达式模式匹配 'Mr.G@rr!s0n'

> ID：11193909
> 
> 赞同：0
> 
> 时间：2012-06-25T17:06:41.183
> 
> 标签：regex, perl

我的字符串是：（**一些文本后跟）用户 'Mr.G@rr!s0n' 是 admin**。我正在使用这个正则表达式模式：`/user\s'(.*)'\sis/i` 但是，我得到的输出是**Mr.G!s0n**

我究竟需要在我的正则表达式模式中进行哪些更改？

* * *

这是代码片段：

```
$text1 = "user 'Mr.G@rr!s0n' is the admin";

if($text1 =~ /user\s'(.*)'\sis/i)
{
    print "\n"; 
    print "Password: ".$1;
    print "\n";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:44:22.537

你在使用 Perl 吗？如果是这样，`@rr`子字符串的一部分可以被插入一个空字符串（假设你没有名为“rr”的数组）。你需要以某种方式逃避@吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T18:24:30.377

我猜你的代码（由于某种原因你不会显示）是这样的：

```
my $str = "(some text followed by) User 'Mr.G@rr!s0n' is the admin";
if ($str =~ /user\s'(.*)'\sis/i) {
    print "$1\n";
} 
```

这里的问题`@rr`是插值，因为您使用的是双引号字符串。由于您显然没有使用：

```
use strict;
use warnings; 
```

..这个错误是沉默的。如果你使用过它们，你会得到：

```
Possible unintended interpolation of @rr in string at
Global symbol "@rr" requires explicit package name at 
```

要解决此问题，请使用`''`或单引号您的字符串`q()`：

```
my $str = q#(some text followed by) User 'Mr.G@rr!s0n' is the admin#; 
```

正如您所注意到的，我将`#`其用作分隔符`q()`，因为单引号和括号都已经在字符串中。

另一种可能性是您在某种评估中使用您的匹配项，但这很愚蠢。所以我不会在那里做猜测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T17:22:45.627

如果您的正则表达式引擎支持积极的lookbehinds，您可以尝试这样的事情：

正则表达式`(?<=User ').*(?=')`

火柴`Mr.G@rr!s0n`

在字符串中`User 'Mr.G@rr!s0n' is the admin`

# drupal - Drupal 7如何覆盖特定内容类型的page.tpl？

> ID：11193910
> 
> 赞同：15
> 
> 时间：2012-06-25T17:06:43.490
> 
> 标签：drupal, drupal-7, drupal-theming

我想为特定的内容类型覆盖 page.tpl.php。我已经尝试过这些东西，对我没有任何作用。

1.  `page--article.tpl.php`
2.  `page--node--article.tpl.php`
3.  `page--node--type--article.tpl.php`
4.  `page--node-type--article.tpl.php`
5.  `page--type--article.tpl.php`

但是当我按数字定位特定节点时，`page--node--8.tpl.php`它工作正常。我认为`page--article.tpl.php`应该工作，但我不知道为什么它不工作。

如果我命名错误，请告诉我。以及如何调试这些东西。我听说我可以使用 Devel 模块，但对此一无所知。对正确方向的轻微提示将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-24T16:57:48.990

你必须确保你的模板可以处理这个......我在这里得到了一个对我有用的代码片段：

[http://drupal.org/node/1089656#comment-4426790](http://drupal.org/node/1089656#comment-4426790)

```
<?php
function themeName_preprocess_page(&$vars, $hook) {
  if (isset($vars['node'])) {
    // If the node type is "blog_madness" the template suggestion will be "page--blog-madness.tpl.php".
    $vars['theme_hook_suggestions'][] = 'page__'. $vars['node']->type;
  }
}
?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T17:24:53.917

您是否记得清除缓存（在“管理”>“站点配置”>“性能”下），以便 Drupal “知道”您的新文件并使用此文件而不是默认文件。

请参阅此处的[清除缓存数据](http://drupal.org/node/173880#theme-registry)

此外，您可能需要添加一个预处理钩子（我自己没有使用 D7，只是 5/6 - 认为这已经略有变化。）[Drupal Stack Exchange 上的这篇文章](https://drupal.stackexchange.com/a/1512)似乎提供了更多细节

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-09T02:58:21.577

我刚刚遇到了同样的问题。

### 节点--recipe.tpl.php

***不是***

页面--recipe.tpl.php

当然，这是一种名为“recipe”的内容类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-30T22:02:09.750

始终清除缓存...

转到 /admin/config/development/performance 并单击清除缓存按钮。如果您对后端结构进行了更改并且它们没有按预期显示，那么这应该是您做的第一件事。

否则你几乎做对了

1.  page--content-type-name.tpl.php

将允许您为内容类型模板设置主题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T20:27:46.567

我知道这是一个老问题，但如果其他人来到这里，我在 drupal 7 中覆盖内容类型的方式是这样的

节点——内容*类型*.tpl

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T18:43:44.130

如果内容类型与基本页面不同，您将需要覆盖该内容类型的特定节点模板。请检查一下：

[http://api.drupal.org/node/19080](http://api.drupal.org/node/19080)

在此页面下复制/粘贴 node.tpl.php 页面中的项目，并根据需要覆盖它。您可以通过 $node 专门访问该节点

您的文章模板将是：

节点--article.tpl.php

创建完成后，请确保清除缓存以确保其正常工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-04T00:11:34.710

因此，根据您要完成的工作，可能会有一些 CSS 技巧可以帮助您。

例如，要覆盖特定节点类型的任何 CSS 规则，只需记住该节点类型的页面将有一个主体类`"node-type-[TYPE]"`（即`.node-type-article`：）

然后，您可以按如下方式覆盖 CSS：

```
body.node-type-article #selector {} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-07T06:50:37.317

Step 1.create a content type 例如：我的内容类型是“fullwidthpage”

步骤 2\. 复制**page.tpl.php** 并 在模板文件夹中重命名为**page--fullwidthpage.tpl 。**

步骤 3\. 将此代码添加到**template.php**

```
function <strong>YOUR_THEME_NAME_HERE</strong>_preprocess_page(&$variables) {
  if (isset($variables['node']->type)) {
    // If the content type's machine name is "my_machine_name" the file
    // name will be "page--my-machine-name.tpl.php".
    $variables['theme_hook_suggestions'][] = 'page__' . $variables['node']->type;
  }
} 
```

> 不要忘记更改**YOUR_THEME_NAME_HERE**

# java - Android倒计时不起作用

> ID：11193911
> 
> 赞同：1
> 
> 时间：2012-06-25T17:06:45.880
> 
> 标签：java, android, datetime, countdown, android-sdk-2.3

试图在我的应用程序中制作一个小的倒数计时器，但它不起作用。

想法是倒计时到特定的时间。首先是几天，然后是几小时。

以下方法在我的 Fragmentclass.java 中（所以它是一个片段）

```
@Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onViewCreated(view, savedInstanceState);

        Calendar cal = Calendar.getInstance();
        cal.set(2012, 8, 29, 10, 0);
        long endTime = cal.getTimeInMillis(); 
        long currentTime = System.currentTimeMillis();
        long remaining = currentTime - endTime;                 
        long seconds = remaining / 1000 % 60;               

         new CountDownTimer(seconds, 1000) {
             TextView tv = (TextView)getActivity().findViewById(R.id.introTimeLeft);
             public void onTick(long millisUntilFinished) {

                 Calendar cal = Calendar.getInstance();
                 cal.set(2012, 8, 29, 10, 0);
                long endTime = cal.getTimeInMillis(); 
                long currentTime = System.currentTimeMillis();
                long remaining = currentTime - endTime;                 
                long hours = remaining / 3600000;
                long mins = remaining / 60000 % 60;
                long seconds = remaining / 1000 % 60;
                long days = hours / 24;
                String remainingText = String.valueOf(days) + " days";

                Log.i("countdown",String.valueOf(days));
                 tv.setText("Days left: " + days);
             }

             public void onFinish() {
                 Log.i("countdown","CD Finished");
                 tv.setText("CD Finished!");
             }
          }.start();
    } 
```

请注意，文本框值现在仅用于测试，但我似乎无法让它显示倒计时。

这也是最好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:30:30.087

如果我运行您的代码，以下是变量的值：

```
endTime     = 1348902045437
currentTime = 1340645325437
remaining   = -8256720000
seconds     = 0 
```

如您所见`seconds == 0`，这就是原因。

另请注意，`CountDownTimer(long millisInFuture, long countDownInterval)` [构造](http://developer.android.com/intl/zh-CN/reference/android/os/CountDownTimer.html#CountDownTimer%28long,%20long%29)函数中的第一个参数是

> 从调用 start() 到倒计时完成并调用 onFinish() 的未来毫秒数。

所以一个固定的代码是：

```
Calendar cal = Calendar.getInstance();
cal.set(2012, 8, 29, 10, 0);
long endTime = cal.getTimeInMillis(); 
long currentTime = System.currentTimeMillis();
long remaining = endTime - currentTime;

new CountDownTimer(remaining, 1000) {
... 
```

**更新：**

奇怪的是它不更新文本视图。我能提出的唯一想法是在主 UI 线程上运行更新调用。它应该是这样的：

```
public void onTick(long millisUntilFinished) {
    final String days = .. // some code to generate days
    getActivity().runOnUiThread(new Runnable() {
        public void run() {
            tv.setText("Days left: " + days);
        }
    });
}

public void onFinish() {
    Log.i("countdown","CD Finished");
    getActivity().runOnUiThread(new Runnable() {
        public void run() {
            tv.setText("CD Finished!");
        }
    });
} 
```

如果这没有帮助 - 那么我没有想法。

# php - 改变 isset 的值

> ID：11193916
> 
> 赞同：0
> 
> 时间：2012-06-25T17:07:03.117
> 
> 标签：php, forms, session

我想知道是否可以手动更改 isset 值的值。也就是说，要做这样的事情：

```
isset($_POST['search_user']) = true; 
```

为什么我要这样做：我在一页上有两个不同的“提交”表单。当提交一个表单时，我想将该表单的所有值捕获到 SESSION 变量中。但是，当提交另一个表单时，SESSION 变量将被清除（因为从技术上讲，第一个表单不再提交）。

我的想法是，如果提交了第二个表单，则自动将第一个表单的值设置为 true

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:10:22.513

如果我正确理解您的问题，如果提交了第二个表单，为什么不直接销毁当前会话并使用从新表单发布的变量开始新会话？

[http://php.net/manual/en/function.session-destroy.php](http://php.net/manual/en/function.session-destroy.php)

```
session_destroy(); 
```

...或者，如果提交了第二个表单，您可以设置另一个会话变量：

```
if (isset($_POST['search_user'])) {

    $_SESSION['search_user'] = "true";

}

if ($_SESSION['search_user'] == "true") {

    // Second form was submitted

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:55:08.220

您可以尝试为每个提交按钮定义一个名称和一个值，以便在 PHP 文件中检索它并根据需要执行您想要的操作。例如：

**第一种形式的 HTML：**

```
<form name="form1" action="page2.php" method="post">
    <input type="submit" value="1" name="button01">
</form> 
```

**HTML 到第二种形式：**

```
<form name="form2" action="page2.php" method="post">
    <input type="submit" value="1" name="button02">
</form> 
```

然后你可以检测到提​​交的表单`page2.php`：

```
if($_POST['button01'] == "1")
{
     // Do what you need based on form1 submit
}
elseif($_POST['button02'] == "1")
{
     // Do what you need based on form2 submit
} 
```

试试这个，然后留下一些评论告诉你它是否对你有帮助。

# objective-c - 将两个字节组合/合并为一个......？

> ID：11193918
> 
> 赞同：9
> 
> 时间：2012-06-25T17:07:03.803
> 
> 标签：objective-c, bit-manipulation

我使用串行帧。我收到一个 16 位值作为两个单独的 8 位值。如何将缓冲区 [0] 与缓冲区 [1] 合并？我不想要 0b01+0b10 = 12（以 10 为底）。我希望它等于 258。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-25T17:10:28.447

```
uint16_t value = (highByte << 8) | lowByte ; 
```

# wordpress - Wordpress 循环和向 HTML5 画布元素添加图像

> ID：11193920
> 
> 赞同：0
> 
> 时间：2012-06-25T17:07:09.493
> 
> 标签：wordpress, html, loops, canvas, while-loop

所以我试图使用“循环”传回的信息来创建画布元素。以下是我的代码。它有效，但仅在循环创建的最后一个画布上有效。

```
<?php 
query_posts(array('number_posts'=>5, 'orderby'=>'rand'));
while ( have_posts() ) : the_post(); ?>
    <canvas class="post" id="<?=the_ID()?>">
        <script type="text/javascript">
            window.onload = function () {
                var cur_post = document.getElementById('<?PHP echo $post->ID; ?>');

                if (cur_post && cur_post.getContext) {
                    var context = cur_post.getContext('2d');
                    if (context) {
                        var img = new Image();
                        (function(img) {
                            img.src = "<?php 
                                $args = array(
                                   'post_type' => 'attachment',
                                   'numberposts' => -1,
                                   'post_status' => null,
                                   'post_parent' => $post->ID
                                 );

                                 $attachments = get_posts( $args );
                                 if ( $attachments ) {
                                    $image_src_array = wp_get_attachment_image_src( $attachments[0]->ID, 'large' );
                                    $image_src = $image_src_array[0];
                                    echo $image_src;
                                 }; ?>";
                            img.onload = function() {
                                img.width = parseInt(cur_post.offsetWidth);
                                var resize_quotient = img.width/img.naturalWidth;
                                img.height = img.naturalHeight*resize_quotient;
                                context.drawImage(img, 0, -(img.naturalHeight/2), img.width, img.height);
                            };
                        })(img);
                    };
                };
            };
        </script>
        <div class="post" style="background: url(<?php 
            $args = array(
                       'post_type' => 'attachment',
                       'numberposts' => -1,
                       'post_status' => null,
                       'post_parent' => $post->ID
                  );

                  $attachments = get_posts( $args );
                     if ( $attachments ) {
                        $image_src_array = wp_get_attachment_image_src( $attachments[0]->ID, 'large' );
                        $image_src = $image_src_array[0];
                        echo $image_src;
                     } ?>
         ) no-repeat center center;">
            <p class="post_excerpt" style="clear: both"><?PHP the_excerpt() ?></p>
            <div class="post_content">
                <h2 class="post_title"><a href="<?php the_permalink() ?>"><?PHP the_title(); ?></a></h2>
                <h3 class="post_category"><?php the_category() ?></h3>
            </div>
        </div>
    </canvas>
<?php endwhile; 
```

?>

我错过了一些明显的东西吗？我已经尝试记录我能想到的所有内容，并且我为每个项目获得了唯一的值，但只有最后一个画布上绘制了任何东西。我什至尝试使用自引用匿名函数，因为我看到这是另一个相关页面上的修复。此外，即使它确实将图像放在最后一个画布上，它在绘制图像时根本不会调整图像大小。

帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T14:49:16.130

我需要将 cur_post 之后的整个第一个 if 语句包装在一个自引用匿名函数中。我在代码中有更深的内容，它只需要向上移动，以便它引用每个单独的画布，而不仅仅是最后一个：

```
(function(cur_post){
if (cur_post && cur_post.getContext) {
    var context = cur_post.getContext('2d');
    if (context) {
        var img = new Image();
        img.src = "<?php 
            $args = array(
               'post_type' => 'attachment',
               'numberposts' => -1,
               'post_status' => null,
               'post_parent' => $post->ID
             );

             $attachments = get_posts( $args );
             if ( $attachments ) {
                $image_src_array = wp_get_attachment_image_src( $attachments[0]->ID, 'large' );
                $image_src = $image_src_array[0];
                echo $image_src;
             }; ?>";
        img.onload = function() {
            img.width = parseInt(cur_post.offsetWidth);
            var resize_quotient = img.width/img.naturalWidth;
            img.height = img.naturalHeight*resize_quotient;
            console.log(img);
            context.drawImage(img, 0, -(img.naturalHeight/2), img.height, img.width);
        };
    };
};
})(cur_post); 
```

# python - SL4A 导入失败

> ID：11193922
> 
> 赞同：0
> 
> 时间：2012-06-25T17:07:22.200
> 
> 标签：python, sl4a

在 Python 终端，我可以运行：

```
import random
random.randint(1,6) 
```

正如预期的那样，它给出了一个数字。但是，我将此脚本保存为 random.py 并且它无法运行：

```
import random
print random.randint(1,3) 
```

它说“AttributeError：'module'对象没有属性'randint'”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:13:21.200

尝试将脚本另存为 random.py 以外的其他内容。它可能是自己进口的。在重试之前删除 CWD 中的 random.py 的旧副本。

# mysql - MySQL 基于 DISTINCT 有条件地填充第 3 列，其中涉及一个表中的 2 个其他列

> ID：11193924
> 
> 赞同：1
> 
> 时间：2012-06-25T17:07:28.373
> 
> 标签：mysql

很好地阅读了类似的主题，但我不能完全 a) 找到一个与我的场景相匹配的主题，或者 b) 足够了解其他主题以适应/定制/调整我的情况。

我有一张桌子，重要的领域是；

```
+------+------+--------+--------+
| ID   | Name | Price  |Status  |
+------+------+--------+--------+
|    1 | Fred |   4.50 |        |
|    2 | Fred |   4.50 |        |
|    3 | Fred |   5.00 |        |
|    4 | John |   7.20 |        |
|    5 | John |   7.20 |        |
|    6 | John |   7.20 |        |
|    7 | Max  |   2.38 |        |
|    8 | Max  |   2.38 |        |
|    9 | Sam  |  21.00 |        |
+------+------+--------+--------+ 
```

ID 是一个自动递增的值，因为记录会在一天中添加。NAME 是一个主键字段，可以在整个表中重复 1 到 3 次。每个 NAME 都有一个 PRICE 值，每个 NAME 可能相同也可能不同。

还有一个 STATUS 字段需要根据以下内容进行填充，这实际上是我卡住的部分。

如果每个 DISTINCT 名称仅附加一个价格，则状态 = 'Y'。如果每个 DISTINCT 名称都附加了多个价格，则 Status = 'N'。

使用上表，ID 的 1、2 和 3 应为“N”，而 4、5、6、7、8 和 9 应为“Y”。

我认为这很可能涉及某种形式的 JOIN、GROUP 和 DISTINCT 组合，但我不知道如何将其放入 SQL 的正确顺序中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:16:14.990

为了获得`Price`每个名称的不同值的计数，我们必须`GROUP BY`在`Name`字段上使用 a ，但是由于您还希望显示所有未分组但带有附加字段的名称，我们必须首先在按名称分组的子句中`Status`创建子选择`FROM`并确定名称是否具有多个价格值。

当我们`GROUP BY Name`在子选择中时，`COUNT(DISTINCT price)`将计算每个特定名称的***不同***价格值的数量。如果没有`DISTINCT`关键字，它只会计算价格不为空的行数。

与此相结合，如果特定名称有多个不同的值，我们使用`CASE`表达式插入`N`列，否则，它将插入。`Status``Price``Y`

子选择每只返回一行`Name`，因此为了使所有名称未分组，我们将该子选择连接到主表，条件是子选择`Name`= 主表`Name`：

```
SELECT
    b.ID,
    b.Name,
    b.Price,
    a.Status
FROM
    (
        SELECT Name, CASE WHEN COUNT(DISTINCT Price) > 1 THEN 'N' ELSE 'Y' END AS Status
        FROM tbl
        GROUP BY Name
    ) a
INNER JOIN
    tbl b ON a.Name = b.Name 
```

**编辑：**为了方便更新，您可以使用`JOIN`s合并此查询，`UPDATE`如下所示：

```
UPDATE 
    tbl a
INNER JOIN
    (
        SELECT Name, CASE WHEN COUNT(DISTINCT Price) > 1 THEN 'N' ELSE 'Y' END AS Status
        FROM tbl
        GROUP BY Name
    ) b ON a.Name = b.Name
SET 
    a.Status = b.Status 
```

假设您的表格中有一个未填充的`Status`列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:44:18.950

如果要更新状态列，可以执行以下操作：

```
UPDATE mytable s 
SET status = (
    SELECT IF(COUNT(DISTINCT price)=1, 'Y', 'N') c 
    FROM   (
            SELECT * 
            FROM mytable
           ) s1 
    WHERE  s1.name = s.name 
    GROUP BY name
    ); 
```

从技术上讲，没有必要这样做：

```
 FROM (
            SELECT * 
            FROM mytable
           ) s1 
```

但是有一个 mysql 限制，阻止您从要更新的表中进行选择。通过将其包裹在括号中，我们强制mysql创建一个临时表，然后它突然成为可能。

# python - 替换文件中的单词

> ID：11193926
> 
> 赞同：-1
> 
> 时间：2012-06-25T17:07:36.060
> 
> 标签：python

它确实有效，但不能代替字母。首先，我打开一个文件，然后将内容写入另一个文件。然后到第二个文件，我替换了一些特定的字母，但它不起作用，有什么想法吗？编码：

```
def  copy_file():

    f=open("cartas.txt","r")
    g=open("copiar.txt","r+")
    g.writelines(f)
    f.close()

    for line in g:
       line = line.replace("s","ch")
       g.write(line) 
    g.close()

copy_file() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:09:55.880

调用后`g.writelines(f)`，读取指针`g`位于文件末尾，因此`for line in g:`之后没有任何可迭代的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:10:36.013

您正在尝试遍历 in 中的行`g`并将修改后的行写入`g`. 在此之前，您实际上将内容从复制`f`到`g`.

您应该做的是在直接转换它们的同时迭代`f`并写入它们：`g`

```
f = open('cartas.txt', 'r')
g = open('copiar.txt', 'r+')

for line in f:
    line = line.replace('s', 'ch')
    g.write(line)

f.close()
g.close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T17:10:21.473

这个 Python 示例将执行您需要的替换，因为替换是全局的，您不需要逐行替换：

```
f = open("cartas.txt","r")
g = open("copiar.txt","w")
g.write(f.read().replace('s','ch'))
g.close()
f.close() 
```

# .net - HTTP Post 到 Restful Web 服务的 tcp_error

> ID：11193927
> 
> 赞同：0
> 
> 时间：2012-06-25T17:07:40.140
> 
> 标签：.net, ios, wcf, tcp, windows-server-2008

我正在通过 HTTP 发布二进制流上传将视频从移动客户端上传到宁静的 Web 服务。我能够成功上传 3-4 秒长的视频。但是比那个更大的视频或大视频让我从服务器收到这个错误。

发生通信错误：“操作超时”
Web 服务器可能已关闭、太忙或遇到其他问题，使其无法响应请求。您可能希望稍后再试一次。
如需帮助，请联系客户支持

我认为应用程序运行没有任何问题，因为我成功上传了小视频。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T19:29:50.803

为了不重复相同的答案，请检查stackoverflow上的以下链接：[wcf tcp async streamed is possible？](https://stackoverflow.com/questions/11206201/wcf-tcp-async-streamed-is-possible/11213674#11213674).

我会指出一些明显的事情：当你想上传大文件时，你必须使用流模式，你必须增加你的超时值。

请查看[大数据和流媒体](http://msdn.microsoft.com/en-us/library/ms733742.aspx) 以及[如何：启用流媒体](http://msdn.microsoft.com/en-us/library/ms789010.aspx)

您会在那里找到您需要的所有详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T17:00:56.903

添加 `<system.web> <httpRuntime executionTimeout="4800" maxRequestLength="500000000"/> </system.web>`解决了问题！–

# jquery - 动态替换对话框按钮文本

> ID：11193928
> 
> 赞同：0
> 
> 时间：2012-06-25T17:07:40.313
> 
> 标签：jquery, css, jquery-dialog

我有一个jQuery对话框如下 -

```
<div data-role="dialog" id="msg-popup">
  <div data-role="header">
      <h1>Notification</h1>
  </div>

  <div data-role="content" id> 
    <b id="notif-subject"></b>
    <p id="notif-popup-content">Test</p>
    <a href="#notif-details1" id="show-notif" data-role="button">abc</a>
    <a href="#" data-rel="back" data-role="button">Cancel</a>
  </div> 
</div> 
```

我想动态地将“abc”更改为“pqr”。我该怎么做？我试着做 -

```
$("#show-notif").text = "pqr"; 
```

但它不起作用。我可能做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T17:08:28.670

`.text`是一个函数，因此要设置您应该使用的元素的文本，如下所示，

`$("#show-notif").text("pqr");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:11:40.913

```
$("#show-notif").html("pqr"); 
```

另一种方法：http: [//jsfiddle.net/whNdd/](http://jsfiddle.net/whNdd/)

# ruby-on-rails - Rails Googlemaps 绘制和保存多边形

> ID：11193931
> 
> 赞同：0
> 
> 时间：2012-06-25T17:07:53.433
> 
> 标签：ruby-on-rails, postgresql, google-maps, heroku

使用 Rails 和 Googlemaps V3，我正在寻找一些建议（在我走错路之前），以获得构建功能的最佳方法：

1）绘制一个描述地理区域的多边形 2）捕获多边形数据并将其保存到数据库（postgres）3）进行查询，告诉我一个点是否在多边形内

据我从那里的示例中可以看出 - 多边形绘图位是相当可行的，但我不清楚如何捕获该数据，以及我应该以哪种格式保存它（我看到 postgres 有一个多边形数据类型。 ..)。同样对于查询，我不确定如何实现这一点 - postgres 是否有任何魔法可以实现这一点（我们正在使用 heroku）。

任何建议或指示将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:41:32.100

一般来说，您的选择部分取决于规模。如果这是一个平面地图，最好的方法是多边形和点方法。这对于城市地图之类的东西最有效。

对于全球地图，您可能希望使用 PostGIS 的几何和地理类型，因为它们更灵活。

# maven - maven-deploy-plugin 忽略版本号？

> ID：11193948
> 
> 赞同：1
> 
> 时间：2012-06-25T17:08:44.223
> 
> 标签：maven, plugins, jar

我是 Maven 新手，我正在尝试将我的项目部署为战争和 jar。我很想拆分项目来做同样的事情，但是对于简单的我来说，它太大了，无法在合理的时间内完成。

我发现[maven deploy additional jar file](https://stackoverflow.com/questions/754216/maven-deploy-additional-jar-file)，这建议我添加一些插件。

安装插件很好用

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-install-plugin</artifactId>
    <executions>
        <execution>
            <phase>install</phase>
            <goals>
                <goal>install-file</goal>
            </goals>
            <configuration>
                <packaging>jar</packaging>
                <artifactId>${project.artifactId}</artifactId>
                <groupId>${project.groupId}</groupId>
                <version>SNAPSHOT</version>
                <file>
                    ${project.build.directory}/${project.artifactId}-SNAPSHOT.jar
                </file>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

这是输出：

```
[INFO] [install:install-file {execution: default}]
[INFO] Installing C:\Server\example\code\server\my-project\target\my-project-SNAPSHOT.jar to C:\Users\Kyle\.m2\repository\com\example\main-project\my-project\SNAPSHOT\my-project-SNAPSHOT.jar 
```

问题出在 maven-deploy-plugin 上。它似乎忽略了我强迫它使用的 SNAPSHOT 版本：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-deploy-plugin</artifactId>
    <executions>
        <execution>
            <phase>deploy</phase>
            <goals>
                <goal>deploy-file</goal>
            </goals>
            <configuration>
                <packaging>jar</packaging>
                <generatePom>true</generatePom>
                <url>${project.distributionManagement.snapshotRepository.url}</url>
                <artifactId>${project.artifactId}</artifactId>
                <groupId>${project.groupId}</groupId>
                <version>SNAPSHOT</version>
                <!--${project.version}!="SNAPSHOT" for some reason-->
                <file>${project.build.directory}/${project.artifactId}-SNAPSHOT.jar</file>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

似乎使用了其他版本号（YYYYMMDD.HHmmSS-#）

```
[INFO] [deploy:deploy-file {execution: default}]
[INFO] Retrieving previous build number from remote-repository
Uploading: http://build.example.biz:8081/artifactory/libs-snapshots-local/com/example/main-project/my-project/SNAPSHOT/my-project-20120625.161551-2.jar
42993K uploaded  (my-project-20120625.161551-2.jar) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:00:24.940

我观察到的一件事是，您使用的版本 SNAPSHOT 没有任何前面的数字，例如：

```
1.0.0-SNAPSHOT 
```

或者至少：

```
1-SNAPSHOT 
```

您只是在使用 SNAPSHOT，这[没有意义，](http://mojo.codehaus.org/versions-maven-plugin/version-rules.html)因为在这种情况下您正在谈论哪个开发线。

另一件事是 Maven 中的 SNAPSHOT（假设您以正确的方式使用它）是一个工件，其中将放置时间戳而不是 SNAPSHOT。这是使发布多个 SNAPSHOT 成为可能但使它们可区分的方法。

因此，您在输出中显示的内容正是 Maven 从 SNAPSHOT 中得到的：

```
[INFO] [deploy:deploy-file {execution: default}]
[INFO] Retrieving previous build number from remote-repository
Uploading: http://build.example.biz:8081/artifactory/libs-snapshots-local/com/example/main-project/my-project/SNAPSHOT/my-project-20120625.161551-2.jar
42993K uploaded  (my-project-20120625.161551-2.jar) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T23:00:15.083

在相应的远程存储库中有一个`http://build.example.biz:8081/artifactory/libs-snapshots-local/com/example/main-project/my-project/SNAPSHOT/maven-metadata.xml`. 如果您查看它，您会看到最新的时间戳映射到您各自的`SNAPSHOT`. 这是 Maven 2 和 3 下的典型行为。我相信使用带时间戳的`SNAPSHOT`-s 是 Maven 3 下的默认行为。

当您尝试通过 Maven 下载工件时，我相信它会为您正确解决它，因此您不必担心。

# jquery - 未知级别的jQuery Selector nth-child（n）？

> ID：11193949
> 
> 赞同：1
> 
> 时间：2012-06-25T17:08:46.380
> 
> 标签：jquery, html, jquery-selectors, css-selectors

对于`<h3>World!</h3>`此示例场景中的第二个（**请注意`<..>`元素是所有级别的未知元素**）：

```
<div></div>
<div class="class1">
    <..>
        <h3>Hello!</h3>
        <..>
            <h3>World!</h3>
        </..>
    </..>
</div> 
```

假设**我们只知道**：

*   `Top Parent <div class="class1">`和`Target Child Elements <h3>`
*   中层是`unknowns`。可以是`<p>`或`<div>`什么`<ul>`的。

所以我想使用`nth-child(n)`选择器。但我不能这样使用：

```
$("div.class1 h3:nth-child(2)").html(); 
```

现在我意识到`nth-child(n)`选择器只能选择`Direct Child`父元素的，仪式？

`nth-child(n)`我可以使用选择器使其工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T17:12:53.580

```
$("div.class1 h3:eq(1)").html(); 
```

首先选择 all`h3`的 under `div.class1`depth，然后再选择第二个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:11:42.533

我认为您正在寻找[.eq()](http://api.jquery.com/eq/)。

```
$('h3').eq(1).html(); 
```

在此示例中，jQuery 返回一个`h3`元素数组，并且您正在选择数组中的第二项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T17:12:18.803

`$("div.class1 h3")`将为您提供两个 h3 的数组。所以你可以`$("div.class1 h3")[1]`用来获取第二个匹配元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T17:20:28.747

查找包含 h3 的类中的所有元素，隔离每个元素的最后一个

DEMO：（嵌套版） [http://jsfiddle.net/3daHU/1/](http://jsfiddle.net/3daHU/1/)

```
$("div.class1 *:has(h3)").each(function(){   
    $(this).children('h3:last').css('color','red')
}) 
```

# java - 解组 Dozer 映射文件以提供映射库

> ID：11193953
> 
> 赞同：1
> 
> 时间：2012-06-25T17:09:00.610
> 
> 标签：java, xml, jaxb, mapping, dozer

我正在尝试解组一些推土机映射文件，以便为许多应用程序提供映射可用性库。但我无法让 JaxB 注释正常工作。我们解组为 null 或空的映射列表

从映射文件中，我感兴趣的是。

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<mappings>
    <mapping>
        <class-a>package.MySourceClass</class-a>
        <class-b>other.package.DestinationClass</class-b>
    </mapping>
</mappings> 
```

我有一个映射类

```
@XmlRootElement(name="mappings")
@XmlAccessorType(XmlAccessType.FIELD)
public class Mappings {

    @XmlElementWrapper(name="mappings")
    private List<Mapping> mappingEntries = null;

//Getters and setters omitted 
```

和一个映射类

```
@XmlRootElement(name="mapping")
@XmlAccessorType(XmlAccessType.FIELD)
public class Mapping {

    @XmlElement(name ="class-a")
    private String classA;

    @XmlElement(name = "class-b")
    private String classB; 
```

我已经尝试了许多注释组合，但我无法弄清楚我做错了什么。

有人可以指出我正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:27:16.343

您可以执行以下操作：

**映射**

```
package forum11193953;

import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement(name="mappings") // Match the root element "mappings"
@XmlAccessorType(XmlAccessType.FIELD)
public class Mappings {

    @XmlElement(name="mapping") // There will be a "mapping" element for each item.
    private List<Mapping> mappingEntries = null;

} 
```

**映射**

```
package forum11193953;

import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class Mapping {

    @XmlElement(name ="class-a")
    private String classA;

    @XmlElement(name = "class-b")
    private String classB;

} 
```

**演示**

```
package forum11193953;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Mappings.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml= new File("src/forum11193953/input.xml");
        Mappings mappings = (Mappings) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(mappings, System.out);
    }

} 
```

**输入.xml/输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<mappings>
    <mapping>
        <class-a>package.MySourceClass</class-a>
        <class-b>other.package.DestinationClass</class-b>
    </mapping>
</mappings> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:12:56.993

尝试 JMapper 框架：[http ://code.google.com/p/jmapper-framework/](http://code.google.com/p/jmapper-framework/)

使用 JMapper，您将拥有动态映射的所有优势以及静态代码的性能等等。

# java - Android 使用短信网关

> ID：11193954
> 
> 赞同：2
> 
> 时间：2012-06-25T17:09:00.967
> 
> 标签：java, android, sms, sms-gateway

我需要在我的android应用程序中放入一个使用免费服务通过互联网发送免费短信的工具......

我看到许多应用程序都能够集成这些服务.. 我尝试了很多，但我没有发现任何有用的..

所以我问你......我如何使用`uthsms.net`（例如）网关通过我的Android应用程序发送短信？

很抱歉这个通用问题..但我没有找到解决这个问题的任何起点。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:13:44.950

使用 Firebug 等工具查看单击网站上的按钮时发送的内容。我看到使用一些参数对 uthsms.net 进行了 POST-Request。您应该能够对您的应用程序执行相同的 POST。

这些是参数：

```
button: Send SMS
country: (some integer)
gateway: 0
hyderabad: your message
remLen: remaining length??
sindh: number to send sms to (without the +)
x: some integer
y: some integer 
```

* * *

要在 Android 中发送此 POST 请求，请使用以下代码：

```
URL url = new URL("http://uthsms.net");
HttpURLConnection conn = (HttpURLConnection) url.openConnection();

String data = URLEncoder.encode("button", "UTF-8") + "="
        + URLEncoder.encode("Send SMS", "UTF-8");
data += "&" + URLEncoder.encode("country", "UTF-8") + "="
        + URLEncoder.encode(country, "UTF-8");
data += "&" + URLEncoder.encode("gateway", "UTF-8") + "="
        + URLEncoder.encode("0", "UTF-8");
data += "&" + URLEncoder.encode("hyderabad", "UTF-8") + "="
        + URLEncoder.encode(message, "UTF-8");
data += "&" + URLEncoder.encode("remLen", "UTF-8") + "="
        + URLEncoder.encode(remLen, "UTF-8");
data += "&" + URLEncoder.encode("sindh", "UTF-8") + "="
        + URLEncoder.encode(number, "UTF-8");
data += "&" + URLEncoder.encode("x", "UTF-8") + "="
        + URLEncoder.encode("0", "UTF-8");
data += "&" + URLEncoder.encode("y", "UTF-8") + "="
        + URLEncoder.encode("0", "UTF-8");
conn.setDoOutput(true);

OutputStreamWriter wr = new OutputStreamWriter(
        conn.getOutputStream());
wr.write(data);
wr.flush();

BufferedReader inStream = new BufferedReader(new InputStreamReader((conn.getInputStream())));

result = inStream.readLine();

inStream.close(); 
```

结果似乎是一个 html 文档。你应该在里面的某个地方找到成功消息，或者可能的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:12:42.550

试试`GoogleVoice API`。它有文档，可以帮助您入门。

这是一个链接：[https ://code.google.com/p/google-voice-java/](https://code.google.com/p/google-voice-java/)

# c# - 如何期待异常并仍然通过测试？

> ID：11193955
> 
> 赞同：0
> 
> 时间：2012-06-25T17:09:01.753
> 
> 标签：c#, unit-testing, .net-2.0, nmock

我有这个：

```
 Expect.Once.On( someObj ).Method( "SomeMethod" )
    .With(1) // correct value is 2, I want this to fail
    .Will( Throw.Exception( new Exception() ) ); 
```

当 nmock 检测到我输入 1 而不是 2 时，会引发异常。但是，测试失败（红色）而不是通过。即使我期待一个例外，如何使这个测试通过？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T17:12:48.980

如果您使用的是 NUnit，那么您可以执行以下操作：

```
Assert.Throws<Exception>(() => { someObj.SomeMethod(1); }); 
```

您还可以使用`ExpectedException`属性装饰测试，尽管如果抛出任何属性，这将导致测试通过`Exception`，而不仅仅是您要测试的语句。

编辑：如果您使用的是 MSTest，据我所知，您只能使用属性来预期异常，即

```
[ExpectedException(typeof(Exception)]
public void TestMethod() { ... } 
```

您应该考虑从您的模拟中抛出更具体的异常类型，并期待该类型而不是普通的`Exception`.

您还可以定义自己的方法来复制 NUnit 功能：

```
public static class ExceptionAssert
{
    public static void Throws<T>(Action act) where T : Exception
    {
        try
        {
            act();
        }
        catch (T ex)
        {
            return;
        }
        catch (Exception ex)
        {
            Assert.Fail(string.Format("Unexpected exception of type {0} thrown", ex.GetType().Name));
        }

        Assert.Fail(string.Format("Expected exception of type {0}", typeof(T).Name));
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T17:10:59.937

```
[ExpectedException (typeof(Exception))] 
```

编辑：谢谢，现在没有工作室，也不是 100% 确定语法。

# php - 将帖子标题翻译成 url-firendly

> ID：11193967
> 
> 赞同：0
> 
> 时间：2012-06-25T17:09:35.077
> 
> 标签：php

我有一个人们发布故事的网站，我希望每个故事标题的一部分都包含在指向故事的 url 中。

例如，如果发帖者发布了一个标题为“这是示例帖子”的故事，我正在寻找一种将其翻译为“这是示例帖子”的方法。

此外，由于标题将在 URL 中使用，我需要过滤掉所有保留或潜在危险的字符。

有没有一种方法（函数库）可以做到这一点，或者我必须自己写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:12:49.843

用于制作友好网址的小 php 函数。

```
public function friendly_url($string) {
        $table = array(
            'Š' => 'S',         'š' => 's',
            'Ŀ' => 'Dj',
            'đ' => 'dj',
            'Ž' => 'Z',
            'ž' => 'z',
            'Č' => 'C',
            'Ŀ' => 'c',
            'Ć' => 'C',
            'ć' => 'c',
            'À' => 'A',
            'ÿ' => 'A',
            'Â' => 'A',
            'Ã' => 'A',
            'Ä' => 'A',
            'Å' => 'A',
            'Æ' => 'A',
            'Ç' => 'C',
            'È' => 'E',
            'É' => 'E',
            'Ê' => 'E',
            'Ë' => 'E',
            'Ì' => 'I',
            'ÿ' => 'I',
            'Î' => 'I',
            'ÿ' => 'I',
            'Ñ' => 'N',
            'Ò' => 'O',
            'Ó' => 'O',
            'Ô' => 'O',
            'Õ' => 'O',
            'Ö' => 'O',
            'Ø' => 'O',
            'Ù' => 'U',
            'Ú' => 'U',
            'Û' => 'U',
            'Ü' => 'U',
            'ÿ' => 'Y',
            'Þ' => 'B',
            'ß' => 'Ss',
            'à' => 'a',
            'á' => 'a',
            'â' => 'a',
            'ã' => 'a',
            'ä' => 'a',
            'å' => 'a',
            'æ' => 'a',
            'ç' => 'c',
            'è' => 'e',
            'é' => 'e',
            'ê' => 'e',
            'ë' => 'e',
            'ì' => 'i',
            'í' => 'i',
            'î' => 'i',
            'ï' => 'i',
            'ð' => 'o',
            'ñ' => 'n',
            'ò' => 'o',
            'ó' => 'o',
            'ô' => 'o',
            'õ' => 'o',
            'ö' => 'o',
            'ø' => 'o',
            'ù' => 'u',
            'ú' => 'u',
            'û' => 'u',
            'ý' => 'y',
            'ý' => 'y',
            'þ' => 'b',
            'ÿ' => 'y',
            'Ŕ' => 'R',
            'ŕ' => 'r',
            ' ' => '-'
        );
        $string = strtr($string, $table);
        $string = strtolower($string);
        $string = preg_replace("/[^a-zA-Z0-9_.-]/", "", $string);

        return $string;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:16:35.690

为什么不尝试类似的东西：

```
$title = "this is an example post";
$url = str_replace(' ', '-', $title); 
```

然后查看 PHP 手册的[urlencode](http://php.net/manual/en/function.urlencode.php)部分，以获取注释中的许多示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T18:58:13.013

我刚刚在类似的主题上找到[了这个问题。](https://stackoverflow.com/questions/2103797/url-friendly-username-in-php)

第一个答案中给出的函数足以将所有非 url 友好的字符转换为“-”。

然后我使用了 Oswaldo 在他的回答中建议的数组，并使用 strtr 将我想要的字符（希腊语）翻译成英文。

最终产品是这样的：

```
function titleToUrlFriendlyTitle($string){
        $table = array('Α'=>'a','Ά'=>'a','ά'=>'a', 'α'=>'a', 'Β'=>'b', 'β'=>'b', 'γ'=>'g', 'Γ'=>'g', 'Δ'=>'d', 'δ'=>'d', 'έ'=>'e', 'ε'=>'e', 'Ε'=>'e', 'Έ'=>'e', 'ζ'=>'z', 'Ζ'=>'z', 'η'=>'i', 'Η'=>'i', 'ή'=>'i', 'Ή'=>'i', 'θ'=>'th', 'Θ'=>'th', 'ι'=>'i', 'Ι'=>'i', 'ί'=>'i', 'Ί'=>'i', 'ϊ'=>'i', 'Ϊ'=>'i', 'ΐ'=>'i', 'κ'=>'k', 'Κ'=>'k', 'λ'=>'l', 'Λ'=>'l', 'μ'=>'m', 'Μ'=>'m', 'ν'=>'n', 'Ν'=>'n', 'ξ'=>'ks', 'Ξ'=>'ks', 'ο'=>'o', 'Ο'=>'o', 'Ό'=>'o', 'ό'=>'o', 'π'=>'p', 'Π'=>'p', 'ρ'=>'r', 'Ρ'=>'r', 'σ'=>'s', 'Σ'=>'s', 'τ'=>'t', 'Τ'=>'t', 'Υ'=>'u', 'υ'=>'u', 'Ύ'=>'u', 'ύ'=>'u', 'ϋ'=>'u', 'Ϋ'=>'u', 'ΰ'=>'u', 'φ'=>'f', 'Φ'=>'f', 'χ'=>'x', 'Χ'=>'x', 'Ψ'=>'ps', 'ψ'=>'ps', 'ω'=>'o', 'Ω'=>'o', 'ώ'=>'o', 'Ώ'=>'o');
        $string = strtr( $string , $table );
        return strtolower(trim(preg_replace('~[^0-9a-z]+~i', '-', html_entity_decode(preg_replace('~&([a-z]{1,2})(?:acute|cedil|circ|grave|lig|orn|ring|slash|th|tilde|uml);~i', '$1', htmlentities($string, ENT_QUOTES, 'UTF-8')), ENT_QUOTES, 'UTF-8')), '-'));
        } 
```

# c# - 如何使用 LibTiff.Net 2.3 库编写像 200/1 这样的有理标签

> ID：11193972
> 
> 赞同：2
> 
> 时间：2012-06-25T17:09:53.877
> 
> 标签：c#, tags, tiff, libtiff.net

我不知道为什么这很难做到，但我无法让 LibTiff.Net 2.3 正确设置合理值......多年来，我一直在 tiff 标签号 282（XRESOLUTION）中使用像“200/1”这样的值) 和 283（Y 分辨率）。但是当使用 LibTiff.Net 库时，似乎不可能得到这样的结果。我总是得到像“419430400/2097152”这样的东西。有谁知道我该如何解决这个问题？

关于我的问题的注释：

这是 libtiff 库（.Net 之前），它看起来像第一个 else if 确实占了 200/1 之类的东西。

```
TIFFWriteDirectoryTagCheckedRationalArray(TIFF* tif, uint32* ndir, TIFFDirEntry* dir, uint16 tag, uint32 count, float* value)
{
    static const char module[] = "TIFFWriteDirectoryTagCheckedRationalArray";
    uint32* m;
    float* na;
    uint32* nb;
    uint32 nc;
    int o;
    assert(sizeof(uint32)==4);
    m=_TIFFmalloc(count*2*sizeof(uint32));
    if (m==NULL)
    {
        TIFFErrorExt(tif->tif_clientdata,module,"Out of memory");
        return(0);
    }
    for (na=value, nb=m, nc=0; nc<count; na++, nb+=2, nc++)
    {
        if (*na<=0.0)
        {
            nb[0]=0;
            nb[1]=1;
        }
        else if (*na==(float)(uint32)(*na))
        {
            nb[0]=(uint32)(*na);
            nb[1]=1;
        }
        else if (*na<1.0)
        {
            nb[0]=(uint32)((*na)*0xFFFFFFFF);
            nb[1]=0xFFFFFFFF;
        }
        else
        {
            nb[0]=0xFFFFFFFF;
            nb[1]=(uint32)(0xFFFFFFFF/(*na));
        }
    }
    if (tif->tif_flags&TIFF_SWAB)
        TIFFSwabArrayOfLong(m,count*2);
    o=TIFFWriteDirectoryTagData(tif,ndir,dir,tag,TIFF_RATIONAL,count,count*8,&m[0]);
    _TIFFfree(m);
    return(o);
} 
```

这是新的 .Net 版本...

```
private bool writeRationalArray(ref TiffDirEntry dir, float[] v)
{
    int[] t = new int [2 * dir.tdir_count];
    for (int i = 0; i < dir.tdir_count; i++)
    {
        int sign = 1;
        float fv = v[i];
        if (fv < 0)
        {
            if (dir.tdir_type == TiffType.RATIONAL)
            {
                WarningExt(this, m_clientdata, m_name,
                "\"{0}\": Information lost writing value ({1:G}) as (unsigned) RATIONAL",
                FieldWithTag(dir.tdir_tag).Name, fv);
                fv = 0;
            }
            else
            {
                fv = -fv;
                sign = -1;
            }
        }

        int den = 1;
        if (fv > 0)
        {
            while (fv < (1L << (31 - 3)) && den < (1L << (31 - 3)))
            {
                fv *= 1 << 3;
                den *= 1 << 3;
            }
        }

        t[2 * i + 0] = (int)(sign * (fv + 0.5));
        t[2 * i + 1] = den;
    }

    return writeData(ref dir, t, 2 * dir.tdir_count);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T21:25:19.793

如果这对您有帮助，请务必给我一个 1UP。谢谢！

好的，所以我决定着手编辑库以考虑减少的分数。下面是我在 .Net 库中更改以使其工作的代码。它确实有效！

我希望 Bobrovsky 在他的下一个版本中包含这个。我相信除了我之外，还有其他人会感激不尽！;)

如果您对如何在此处编辑库有点不确定，我会尽可能详细地使用这些步骤...

1) 下载位于[此处](http://bitmiracle.com/libtiff.net_src.zip)的库源。

2) 打开项目文件。我使用**LibTiff.NET_NoSilverlight.sln**解决方案文件打开项目。

3) 展开**LibTiff**项目节点。

4) 展开**内部**节点。

5) 找到**Tiff_DirWrite.cs**类文件并打开它。

6）在该类文件中，我找到了名为**writeRationalArray**的函数，这就是它的样子......

```
/// <summary>
/// Setup a directory entry of an array of RATIONAL or SRATIONAL and
/// write the associated indirect values.
/// </summary>
private bool writeRationalArray(ref TiffDirEntry dir, float[] v)
{
    int[] t = new int [2 * dir.tdir_count];
    for (int i = 0; i < dir.tdir_count; i++)
    {
        int sign = 1;
        float fv = v[i];
        if (fv < 0)
        {
            if (dir.tdir_type == TiffType.RATIONAL)
            {
                WarningExt(this, m_clientdata, m_name,
                    "\"{0}\": Information lost writing value ({1:G}) as (unsigned) RATIONAL",
                    FieldWithTag(dir.tdir_tag).Name, fv);
                fv = 0;
            }
            else
            {
                fv = -fv;
                sign = -1;
            }
        }

        int den = 1;
        if (fv > 0)
        {
            while (fv < (1L << (31 - 3)) && den < (1L << (31 - 3)))
            {
                fv *= 1 << 3;
                den *= 1 << 3;
            }
        }

        t[2 * i + 0] = (int)(sign * (fv + 0.5));
        t[2 * i + 1] = den;
    }

    return writeData(ref dir, t, 2 * dir.tdir_count);
} 
```

7) 编辑**writeRationalArray**函数，如下所示...

```
/// <summary>
/// Setup a directory entry of an array of RATIONAL or SRATIONAL and
/// write the associated indirect values.
/// </summary>
private bool writeRationalArray(ref TiffDirEntry dir, float[] v)
{
    int[] t = new int [2 * dir.tdir_count];
    for (int i = 0; i < dir.tdir_count; i++)
    {
        int sign = 1;
        float fv = v[i];
        if (fv < 0)
        {
            if (dir.tdir_type == TiffType.RATIONAL)
            {
                WarningExt(this, m_clientdata, m_name,
                    "\"{0}\": Information lost writing value ({1:G}) as (unsigned) RATIONAL",
                    FieldWithTag(dir.tdir_tag).Name, fv);
                fv = 0;
            }
            else
            {
                fv = -fv;
                sign = -1;
            }
        }

        int den = 1;
        if (fv > 0)
        {
            while (fv < (1L << (31 - 3)) && den < (1L << (31 - 3)))
            {
                fv *= 1 << 3;
                den *= 1 << 3;
            }
        }

        t[2 * i + 0] = (int)(sign * (fv + 0.5));
        t[2 * i + 1] = den;

        //Reduce the fraction
        int a = t[2 * i + 0];
        int b = t[2 * i + 1];
        while (b > 0) { int rem = a % b; a = b; b = rem; }
        for (int ind = 0; ind < 2; ind++) { t[2 * i + ind] /= a; }
    }

    return writeData(ref dir, t, 2 * dir.tdir_count);
} 
```

我所做的只是添加三行代码来减少最后的分数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T18:08:29.253

使用 LibTiff.Net 时，您应该设置如下理性值：

```
image.SetField(TiffTag.XRESOLUTION, 150.0);
image.SetField(TiffTag.YRESOLUTION, 150.0); 
```

该库将在 TIFF 中写入一个有理值作为整数值对（除数和除数）。你不需要帮助它。

# java - 管理多个 SOAP 存根版本

> ID：11193977
> 
> 赞同：1
> 
> 时间：2012-06-25T17:10:28.157
> 
> 标签：java, soap, stub

我有一堆生成的 SOAP 客户端存根，它们在 WSDL 版本之间有所不同。发生这种情况是因为 SOAP 服务器具有不同版本的 Web 服务。

Web 服务版本 1 的存根打包在 soap.stubs.version1 中，版本 2 的存根打包在 soap.stubs.version2 下。

这意味着 WSDL 版本 1 中的 MyStub 可能与版本 2 中的 MyStub 不同。因此，如果我调用返回 MyStub 版本 2 的 SOAP 方法并保存 MyStub 版本 1 中的值，它将“中断”，因为xml 响应无法正确映射到存根的属性。

因此，我需要将类类型与 SOAP 服务器相关联。

为每个版本复制逻辑是不可能的：

```
if(SoapServer.version==1)
{
   soap.subts.version1.MyStub result = SoapServer.getFoo();
   /* rest of the logic using result of type soap.subts.version1.MyStub */ 
}
else if(SoapServer.version==2)
{
   soap.subts.version2.MyStub result = SoapServer.getFoo();
   /* rest of the logic using result of type soap.subts.version2.MyStub */
} 
```

每次我为较新版本生成存根时，我都需要复制所有逻辑以使用新存根。有时唯一改变的是一个属性。

因此，如何根据 SOAP 服务器使用正确的存根，而不必重新实现该“类”的所有逻辑？

我考虑过使用 Object ，但这需要分配 if instanceof 和 casts。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:31:15.393

我已经设法通过错误的 Java 反射和 URLClassLoader 解决了这个问题。我基本上做的是：

*   根据服务器版本，我定义了从哪里获取 subts 的包名称
*   使用 URLClassLoader 我加载正确的 .class 文件
*   使用反射我调用正确的方法

This has the great advantage of Plug And Play SOAP Servers even with different stub versions. The only thing that must be constant between versions are the methods names so it's possible to fetch them through Class.getMethod.

# clojure - 你能保存你的 Clojure REPL 的状态吗（或者，你能有效地使用 REPL 编写复杂的程序吗？）

> ID：11193980
> 
> 赞同：5
> 
> 时间：2012-06-25T17:10:36.257
> 
> 标签：clojure, save, read-eval-print-loop

在定义了变量、函数等之后，你能否将你在 REPL 上所做的事情也保存为一个文本 .clj 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T17:26:31.240

大多数人通过诸如 Eclipse/Emacs/vim 之类的编辑器使用 repl，并且该编辑器能够保存 repl，尽管如果开发人员没有尽职尽责，这可能是对所发生事情的不完整记录。repl 的某些状态可能来自加载文件等，这些文件将处于不同的状态。

所以简短的回答通常不是。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-21T12:55:38.753

在 Linux（我的 = Ubuntu 16.04.2 LTS）中，如果您使用 lein，则检查 .lein（隐藏目录）并查找 repl-history。您应该会找到已键入或粘贴到 REPL 中的命令。这可以作为以后编辑的来源 - 我使用 geany ...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T17:35:20.417

我正在回答你问题的括号部分。对我来说，Clojure REPL 对于测试函数和证明不超过几行代码的概念非常有用。我经常将钩子放在一个不是主模块的模块中，这样我就可以加载一个文件并通过几个函数运行它。我也可以使用相同的心态从 main 开始执行此操作；那就是写一个调试函数。

我发现 Eclipse 插件非常有用，但这些天我用得不多，主要是 Vim 并运行具有一个或多个特殊功能的模块并运行 main.js 插件。我不知道有什么方法可以保存 REPL 状态。

# codeigniter - 错误：HTTP/1.1 401 未经授权

> ID：11193981
> 
> 赞同：0
> 
> 时间：2012-06-25T17:10:40.927
> 
> 标签：codeigniter, csv, upload, error-handling, fopen

我制作了一个上传系统，用户上传一个文件，该文件被保存，然后由 php 读取。这些值被插入到数据库中。整个事情在开发服务器上运行良好，但在实时服务器上却不行。

我在现场网站上有另一个工作正常的上传系统。我尝试将其上传到不同的文件夹，但也没有用。

只是让你知道前几天我对 mime 类型有问题。例如，我上传了一个 csv 文件，但服务器将其作为文本/纯文档读取。我配置了配置的codeigniter以允许csv的，所以这不应该是问题。只是觉得值得一提。

错误：

遇到 PHP 错误

严重性：警告

消息：fopen（http://144.119.190.87/designUploads/testing.csv）：打开流失败：HTTP 请求失败！HTTP/1.1 401 未经授权

文件名：controllers/headquarters.php

行号：682

==================================================== PHP：

```
 public function importDesign () {
    //  setting config options
    $config['upload_path'] = './designUploads/';        
    $config['allowed_types'] = 'csv';       
    $config['overwrite'] = 'true';      

    //  loading upload library
    $this->load->library('upload', $config);

    //  write errors to view file
    $error = '';
    if (!$this->upload->do_upload('userfile')) {
        $this->upload->delete($lastId);
    } else {
        $data = array('upload_data' => $this->upload->data());      
    }

    $fileData = $this->upload->data();
    $name = $fileData['file_name'];

    Line 680 ---> if (($handle = fopen(base_url('designUploads/'. $name), "r")) !== FALSE) {
        while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
            $query = $this->db->query('
                UPDATE rollout_systems 
                SET Mig_type = "'. $data[2] .'",
                    hardw_destination = "'. $data[3] .'",
                    new_model = "'. $data[4] .'",
                    new_system = "'. $data[5] .'",
                    Mig_Class = "'. $data[6] .'"
                WHERE sys_name = "'. $data[0] .'"
                AND EAM_User = "'. $data[1] .'"
            ');

            if ($query) {
                redirect('headquarters/migrationDetails');
            }
        }
        fclose($handle);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:34:00.230

感谢你们两个试图提供帮助。在比较我有代码的两个上传时发现了问题。事实证明 fopen() 不支持 base_url()。一旦我摆脱了它，它就起作用了。

# azure - 创建 Azure 包时包含/排除文件

> ID：11193982
> 
> 赞同：5
> 
> 时间：2012-06-25T17:10:50.960
> 
> 标签：azure

我正在使用 Visual Studio 创建一个 azure 包（右键单击 azure 项目 -> 包）。我想在包中包含和排除一些文件，类似于：[How do you include additional files using VS2010 web deployment packages？](https://stackoverflow.com/questions/2747081/how-do-you-include-additional-files-using-vs2010-web-deployment-packages)我需要做些什么才能使其适用于 azure 包功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:15:22.437

即使 CSPKG 文件实际上是一个 zip 文件，Windows Azure 部署包 (CSPKG) 文件也不同于常规的 VS 发布包。您可以将 CSPKG 重命名为 zip 并查看里面的内容，但是您不能以这种方式添加或删除文件，因为您的包会损坏。

将文件添加到 CSPKG 的最佳方法是将这些文件添加到 VS 项目中，然后在这些文件属性中设置“将本地复制为 true”意味着将这些文件添加到最终输出。这样，当您构建 CSPKG 时，文件就会在那里。

# android - 安卓保存列表

> ID：11193983
> 
> 赞同：15
> 
> 时间：2012-06-25T17:10:56.340
> 
> 标签：android, list, save

无论如何，我可以将 List 变量保存到 Android 手机的内部或外部存储器吗？我知道我可以保存原始数据，但不确定这个。

提前致谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-25T17:25:16.190

是的，你只能保存原语，所以你可以这样：

```
List<String> list = new ArrayList<String>();
list.add("one");
list.add("two");
list.add("three");

StringBuilder csvList = new StringBuilder();
for(String s : list){
      csvList.append(s);
      csvList.append(",");
}

sharedPreferencesEditor.put("myList", csvList.toString()); 
```

然后再次创建你的`list`，你会：

```
String csvList = sharedPreferences.getString("myList");
String[] items = csvList.split(",");
List<String> list = new ArrayList<String>();
for(int i=0; i < items.length; i++){
     list.add(items[i]);     
} 
```

您可以将这个“序列化”封装到您自己的类中，包装一个列表以保持它的整洁。你也可以看看将你的转换`list`为`JSON`.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-04-03T13:07:42.140

如果你想在你的程序中存储/检索/删除一些字符串值，那么`List`比`Array`. 下面我将向您展示如何使用它。

```
 // Declaring List Variable
 List<String> Mylist = new ArrayList<String>();

 // Adding item to List
 Mylist.add(list.size(), "MyStringValue");   //this will add string at the next index

 // Removing element form list
 Mylist.remove(list.size()-1);   //this will remove the top most element from List 
```

# javascript - JavaScript 私有方法，异步访问

> ID：11193993
> 
> 赞同：1
> 
> 时间：2012-06-25T17:11:34.213
> 
> 标签：javascript

我正在使用如下所示的模式来创建一个具有私有和公共方法的 javascript 库。这个想法是包含此库的页面将调用 MYLIB.login() 并为用户单击“确定”或“取消”提供两个函数。

```
var MYLIB = function() {
    //  private data and functions
    var showForm = function() {
        //  create and show the form
    };
    var onOK = function() {
        //  hide the form, do some internal stuff, then…
        okFunction();
    };
    var onCancel = function() {
        //  hide the form, do some internal stuff, then...
        cancelFunction();
    };

    var okFunction = null;
var cancelFunction = null;

    //  public functions 
    return {
        login : function(okf, cancelf) {
           okFunction = okf;
           calcelFunction = cancelf;
           showForm();
        },
    };  
}(); 
```

我的问题是关于获取表单中的按钮以调用私有的内部函数 onOK 和 onCancel。按钮如下所示：

```
<button onclick="onOK();">OK</button>
<button onclick="onCancel();">Cancel</button> 
```

如果我将功能公开，我可以让它工作，但我也可以公开所有内容。我怎样才能做我想做的事？来自 C++/Java 背景，努力成为一个优秀的 OO 人。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:28:06.690

有很多方法可以解决这个问题，但据我所知，onOK 和 onCancel 必须是公开的，因为您需要从课堂外访问它们。您可以创建一个公共函数来处理这些操作，例如：

```
this.setStatus = function(status){
  // check if the conection is on before calling the functions and stuff like that
  if(status) onCancel();
  else onOK();
} 
```

它实际上取决于您想在日志运行中使用它的位置。Javascript 提供了很多 OOP 的东西，但与 C++/Java 有很大不同。

提示：如果您想使用私有函数，我鼓励您使用 priviledgiat 函数来处理私有方法 (http://cuzztuts.blogspot.ro/search/label/oop)，还要记住顺序很重要在女巫中，您声明了您的变量。

# wordpress - 使用自定义帖子类型从其附件 ID 返回图像 url

> ID：11193997
> 
> 赞同：0
> 
> 时间：2012-06-25T17:11:41.193
> 
> 标签：wordpress

我正在使用自定义帖子类型插件，该插件返回上传文件的附件 ID 而不是其 url。我已经能够使用 wp_get_attachment_image_src 来显示图像，如[http://codex.wordpress.org/Function_Reference/wp_get_attachment_image_src](http://codex.wordpress.org/Function_Reference/wp_get_attachment_image_src)中所述，但我的问题是让它与模板页面上的代码很好地配合使用从自定义帖子类型调用信息。

将其剥离为基础，这就是从模板页面调用自定义帖子类型信息的内容：

```
<?php 
    $slideshowplatform = get_post_meta($post->ID, 'slideshowplatform', true);
    foreach($slideshowplatform as $slide) {
        echo '<img src="' . $slide['slide'] . '" />';
    }
?> 
```

我很难将其与法典提供的内容相协调：

```
<?php 
    $attachment_id = 8; // attachment ID
    $image_attributes = wp_get_attachment_image_src( $attachment_id ); // returns an array
?>

<img src="<?php echo $image_attributes[0]; ?>"> 
```

看起来像下面这样的东西应该可以工作，但我显然错过了 php 语法的一些东西

```
<?php 
    $slideshowplatform = get_post_meta($post->ID, 'slideshowplatform', true);
    foreach($slideshowplatform as $slide) {
        $image_attributes = wp_get_attachment_image_src( $slide['slide'] );
        echo '<img src="<?php echo $image_attributes[0]; ?>" />';
    }
 ?> 
```

任何想法将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:27:32.387

我想这就是你想要的

```
if ( $post->post_type == 'slideshowplatform' && $post->post_status == 'publish' )
{
    $attachments = get_posts(array(
        'post_type' => 'attachment',
        'posts_per_page' => -1,
        'post_parent' => $post->ID,
        'exclude'     => get_post_thumbnail_id()
    ));

    if ($attachments) {
        foreach ($attachments as $attachment) {
            $thumbimg = wp_get_attachment_link( $attachment->ID, 'thumbnail-size', true );
            echo $thumbimg;
            //$image_attributes = wp_get_attachment_image_src( $slide['slide'] ); 
            //echo '<img src="' . $image_attributes[0] . '" />';
        }

    }
} 
```