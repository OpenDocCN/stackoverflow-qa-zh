# StackOverflow 问答 10771000-10771999

# javascript - JavaScript 表单在 Chrome 中有效，但在 Firefox 中无效

> ID：10771001
> 
> 赞同：0
> 
> 时间：2012-05-27T01:24:51.840
> 
> 标签：javascript, html, firefox, google-chrome

我刚刚完成了一项任务，该任务要求我构建一个汇总订单详细信息等的小表格。它在 Chrome 中运行良好，但我在 Firefox 中进行了测试（因为评估员将使用它）但它无法工作一点也不。关于为什么的任何提示或解决方案将不胜感激。谢谢

JavaScript

```
function list(theform){

  var mem = theform.elements["mem"].value;
  var cov = theform.elements["cover"].value;
  var cha = theform.elements["charger"].value;
  var scr = theform.elements["screen"].value;
  var del = theform.elements["delivery"].value;
  var qty = theform.elements["qty"].value;

  acc = (parseInt(mem) + parseInt(cov) + parseInt(cha) + parseFloat(scr) + parseInt(del)) * qty;

  total.value = "$" + Math.round(acc*100)/100;
  return false;
} 
```

HTML

```
<form id="accform" onsubmit="return list(this)">

        <label class="third column" for="memory">Memory</label>
        <label class="third column" for="case">Case</label>
        <label class="third column" for="memory">Charger</label>

        <select  class="third column" id="mem" name="mem">
          <option value="0">2GB : No charge</option>
          <option value="5">4GB : $5.00</option>
          <option value="12">8GB : $12.00</option>
          <option value="24">16GB : $24.00</option>
        </select>

        <select  class="third column" id="cover" name="cover">
          <option value="0">No case </option>
          <option value="4">Leather case : $4.00 </option>
          <option value="4">Silicon case : $4.00 </option>
        </select>

        <select  class="third column" id="charger" name="charger">
          <option value="0">No charger </option>
          <option value="5">Car charger : $5.00 </option>
          <option value="6">Car charger holder : $6.00 </option>
        </select> 

        <label class="third column" for="memory">Screen protector</label>
        <label class="third column" for="case">Shipping</label>
        <div class="full column"></div>

        <select  class="third column" id="screen" name="screen">
          <option value="0">None</option>
          <option value="0.99">x1 : $0.99</option>
          <option value="1.79">x2 : $1.79</option>
          <option value="2.39">x3 : $2.39</option>
          <option value="3.40">x5 : $3.40 </option>
        </select>
        <select  class="third column" id="delivery" name="delivery">
          <option value="0">Normal shipping : No charge </option>
          <option value="35">Expedited Delivery (Fedox) : $35.00</option>
        </select>
        <div class="full column">
        </div>

        <label class="third column" for="qty">Quantity</label>
        <label class="third column" for="total">Total</label>
        <div class="full column">
        </div>

        <div class="third column">
        <input  id="qty"/>
      </div>
        <input class="third column "id="total"/>

        <button class="submit">Calculate</button>
        <div class="full column">
        </div>

      </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T01:35:06.570

您的脚本在我的 Firefox 上运行良好，即使它在控制台中发出警告：

> ID/NAME 在全局范围内引用的元素。请改用 W3C 标准 document.getElementById()。

那是因为`total`没有在您的函数中定义，请尝试：

```
document.getElementById('total').value = "$" + Math.round(acc*100)/100; 
```

**[JSFiddle](http://jsfiddle.net/Curyn/)** <-- 在 Nightly 15a 上测试

检查它是否有帮助以及小提琴在您的 Firefox 中是否有效。

此外，正如@dibs 所述，您可以通过在其前面`acc`添加来定义：`var`

```
var acc = (parseInt(mem) + parseInt(cov) + parseInt(cha) + parseFloat(scr) + parseInt(del)) * qty; 
```

但这不太可能给您带来任何麻烦，除了可能会意外创建全局范围变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T01:28:15.737

尝试在[jslint.com](http://jslint.com)上检查你的脚本，看看你有什么错误。

```
'acc' was used before it was defined. 
```

# node.js - 与 node.js 同步文件：unision== tcp==node-----[http]-----node==tcp==unison

> ID：10771003
> 
> 赞同：5
> 
> 时间：2012-05-27T01:25:28.377
> 
> 标签：node.js, tcp, synchronization, unison

如果您正在运行节点，而我正在运行节点，有没有人看到一个解决方案，可以让我们保持一组文件同步。

同步很复杂，所以我认为可以将其留给[unison](http://www.cis.upenn.edu/~bcpierce/unison/)（类似于 rsync）之类的工具，然后所有节点所要做的就是在经过身份验证的用户之间连接 TCP 管道。

```
filesystem1---unision==tcp==node.js------[http]----node.js==tcp====unison---filesystem2 
```

它大概有 12 行 JavaScript，但目前它超出了我的范围，或者到目前为止我能找到的任何示例。

我查看了一大堆其他文件同步选项（例如 Git、veracity、fossil，包括尝试在 Linux 上安装 Simias iFolder 服务器的一周，失败〜看起来很有希望，因为它为每个主要操作系统都包含一个文件监视客户端）但现在我在想，可能会更简单得多。

如果有人见过这样做的 Node.js 项目，或者处于连接两个 TCP 管道不太难的水平，那么我将不胜感激您的来信

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-17T20:55:58.163

我对这个问题采取的基本方法是使用stream2。
我的基本方法是这样的。

从第一个 tcp 获取数据

```
var gulp = require('gulp')
, thr = require('through2')
;

gulp.watch('rootDirectory/**/*', function(evt) {

  if ('deleted' === evt.type) {
    // do stuff if file is deleted
    return
  }

  // file got changed, moved or added.
  gulp.src(evt.path).pipe(thr(chunk, enc, next){
    // chunk is a vinyl filesytem object, 
    // so better fix chunk before sending to tcp server
    next(null, fixedChunk)

  }).pipe(toYourTcpServer)

}) 
```

然后在你的节点

```
var net = require('net')
, http = require('http')
;

var clientTcp = net.connect({port: 'toYourTcpServerPort'})

var server = http.createServer(function(req, res){
  clientTcp.pipe(res)
}).listen('somePort') 
```

然后在另一端，你
在节点做相反的事情

```
var clientTcp2 = net.connect({port: 'toYourTcpServerPort2'})

var server2 = http.createServer(function(req, res){
  // fix response or something else.
  req.pipe(clientTcp2)
}).listen('somePort') 
```

来自第二个 tcp

```
gutil = require('gulp-util')

clientTcp2.pipe(thr(function(chunk, enc, next){
  // You must create a vinyl filesystem before
  // sending down stream. Use new gutil.File()
  next(null, fixedChunk)

})).pipe(gulp.dest('finalDirectoy')) 
```

`through2`创建转换流并`gulp`帮助您使用流创建任务。乙烯基文件只是 gulp 使用的一种抽象。

我希望这能让您了解如何使用流来解决您的问题，祝您好运

# css - CSS高度根据屏幕分辨率

> ID：10771005
> 
> 赞同：0
> 
> 时间：2012-05-27T01:25:46.967
> 
> 标签：css, height

我正在创建一个中心区域为 800px 的网页。如果分辨率更大，“侧边栏”将以另一种颜色呈现。我有这个代码：

```
body {
  width: 800px;
  height: auto;
  ...
} 
```

我希望当内容非常小时，中心区域一直延伸到页面的末尾。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T03:31:10.470

你唯一能做的就是这样的：

```
<style type="text/css">
  html, body, .container {
    height: 100%;
    width: 800px;
    margin: 0 auto;
  }
  .container {
    background: yellow;
  }
</style> 
```

和...

```
<body>
  <div class="container">
    dewdewd
  </div>
</body> 
```

# php - 从mysql中选择多个数组

> ID：10771008
> 
> 赞同：1
> 
> 时间：2012-05-27T01:26:41.600
> 
> 标签：php, mysql

我正在尝试搜索我正在为朋友开发的房地产网站。在数据库中，属性类型由 id 编号命名，即：house = 30、flat = 8、t Terrad = 1，依此类推。

当一些是价值为 2 且房屋价值为 30 等的独立式住宅时，我如何从数据库中检索所有属性 :) 它让我陷入困境..lol 这是我到目前为止所拥有的，但它不起作用......

```
$bedrooms = $_GET['bedrooms'];
$pricefrom = $_GET['pricefrom'];
$priceto = $_GET['priceto'];
$proptype = $_GET['proptype'];

if($proptype == 'house'){
$search_propsubid = array('1,2,3,4,5,6,21,22,23,24,26,27,30');
}elseif($proptype == 'flat'){
$search_propsubid = array('7,8,9,10,11,28,29,44');
}elseif($proptype == 'bungalow'){
$search_propsubid = array('');
}

$sql = mysql_query("SELECT * FROM `properties` WHERE `PROP_SUB_ID`='$search_propsubid' AND `BEDROOMS`='$bedrooms' AND `TRANS_TYPE_ID`='1' HAVING `PRICE` BETWEEN '$pricefrom' AND '$priceto' ORDER BY `UPDATE_DATE` DESC"); 
```

谢谢你的时间，我希望有人能指出我正确的方向.. 问候史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T01:31:17.137

您可以尝试内[爆](http://php.net/manual/en/function.implode.php)数组：

```
$search_propsubid = array('1,2,3,4,5,6,21,22,23,24,26,27,30');
$comma_separated = implode(",", $search_propsubid);
$sql = mysql_query("SELECT * FROM `properties` WHERE `PROP_SUB_ID` in ($comma_separated) ... 
```

如果这对您不起作用，请返回新闻。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T01:33:55.823

您可以使用[MySql IN()](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_in)比较运算符来选择与值列表匹配的所有值：

```
$sql = mysql_query("
  SELECT * 
  FROM `properties` 
  WHERE `PROP_SUB_ID` IN (" .implode(",", $search_propsubid). ")
  AND `BEDROOMS`='$bedrooms' 
  AND `TRANS_TYPE_ID`='1' 
  HAVING `PRICE` BETWEEN '$pricefrom' AND '$priceto' 
  ORDER BY `UPDATE_DATE` DESC
"); 
```

假设`$proptype == 'flat'`，输出将是：

```
SELECT *
FROM `properties` 
WHERE `PROP_SUB_ID` IN (7,8,9,10,11,28,29,44) 
... 
```

# python - 使用元类覆盖复杂的内置方法

> ID：10771010
> 
> 赞同：10
> 
> 时间：2012-05-27T01:27:18.197
> 
> 标签：python, metaprogramming, metaclass, complex-numbers

作为一个学习练习，我正在尝试实现一个类，它将模拟 python 的`complex`内置行为，但具有不同的行为`__str__`和`__repr__`方法：我希望它们以格式打印......

```
(1.0,2.0) 
```

...代替：

```
(1+2j) 
```

我首先尝试简单地继承`complex`和重新定义`__str__`and `__repr__`，但这有一个问题，即当调用非覆盖方法时，`complex`会返回一个标准，并以标准格式打印：

```
>>> a = ComplexWrapper(1.0,1.0)
>>> a
(1.0,1.0)
>>> b = ComplexWrapper(2.0,3.0)
>>> b
(2.0,3.0)
>>> a + b
(3+4j) 
```

当所需的输出是`(3.0,4.0)`.

我正在阅读有关元类的信息，并认为它们可以解决我的问题。从[Python Class Decorator](https://stackoverflow.com/questions/681953/python-class-decorator)中的答案开始，我目前的实现如下：

```
def complex_str(z):
    return '(' + str(z.real) + ',' + str(z.imag) + ')'
def complex_repr(z):
    return '(' + repr(z.real) + ',' + repr(z.imag) + ')'

class CmplxMeta(type):
    def __new__(cls, name, bases, attrs):
        attrs['__str__'] = complex_str
        attrs['__repr__'] = complex_repr
        return super(CmplxMeta, cls).__new__(cls, name, bases, attrs)

class ComplexWrapper(complex):
    __metaclass__ = CmplxMeta 
```

不幸的是，这似乎与之前的解决方案具有相同的行为（例如，当两个`ComplexWrapper`实例相互添加时）。

我承认，我并不完全理解元类。也许我的问题可以用不同的方式解决？

当然，我可以手动重新定义相关的方法，例如`__add__`，`__subtract__`等。但这会非常重复，所以我更喜欢更优雅的解决方案。

任何帮助表示赞赏。

* * *

## 编辑：对 agf 的回答：

所以我对你的代码有很多不明白的地方：

1.  元类的`__new__`方法`ReturnTypeWrapper`从哪里得到它的参数？如果它们是自动通过的，我希望在这种情况下`name = "Complex", bases = (complex), dict = {}`. 那是对的吗？这种自动传递类数据的方法是否特定于元类？

2.  你为什么使用 `cls = type.__new__(mcs, name, bases, dct)`而不是 `cls = type(mcs, name, bases, dct)`？是否只是为了避免与 的“其他含义”混淆`type()`？

3.  `__str__`我复制了你的代码，并`__repr__`在你的`ComplexWrapper`类中添加了我的特殊实现。但它不起作用；打印任何类型的对象`Complex`只会以标准 Python 格式打印。我不明白这一点，因为这两种方法应该在元类的 for 循环中被选中，但之后应该被我的定义覆盖。

我的代码的相关部分：

```
class Complex(complex):
    __metaclass__ = ReturnTypeWrapper
    wrapped_base = complex
    def __str__(self):
        return '(' + str(self.real) + ',' + str(self.imag) + ')'
    def __repr__(self):
        return '(' + repr(self.real) + ',' + repr(self.imag) + ')' 
```

及其行为：

```
>>> type(a)
<class 'Cmplx2.Complex'>
>>> a.__str__
<bound method Complex.wrapper of (1+1j)>
>>> a.__str__()
'(1+1j)'
>>> 
```

再次感谢您的回答，如果您在回答中提到它们，请随时编辑/删除以上内容！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-27T02:47:03.013

你目前的方法行不通。你如何定义你的类不是问题——方法是在你调用它们时`complex`创建新实例`complex`，而不是使用`type`输入对象的。您将始终获取`complex`而不是的实例`ComplexWrapper`，因此不会调用您的自定义方法：

```
>>> type(ComplexWrapper(1.0,1.0) + ComplexWrapper(2.0,3.0))
<type 'complex'> 
```

* * *

相反，您需要将`complex`的方法返回的新对象转换`complex`为派生类的返回对象。

这个元类包装了指定基类的所有方法，并将包装的方法附加到该类。包装器检查要返回的值是否是基类的实例（但不包括子类的实例），如果是，则将其转换为派生类的实例。

```
class ReturnTypeWrapper(type):
    def __new__(mcs, name, bases, dct):
        cls = type.__new__(mcs, name, bases, dct)
        for attr, obj in cls.wrapped_base.__dict__.items():
            # skip 'member descriptor's and overridden methods
            if type(obj) == type(complex.real) or attr in dct:
                continue
            if getattr(obj, '__objclass__', None) is cls.wrapped_base:
                setattr(cls, attr, cls.return_wrapper(obj))
        return cls

    def return_wrapper(cls, obj):
        def convert(value):
            return cls(value) if type(value) is cls.wrapped_base else value
        def wrapper(*args, **kwargs):
            return convert(obj(*args, **kwargs))
        wrapper.__name__ = obj.__name__
        return wrapper

class Complex(complex):
    __metaclass__ = ReturnTypeWrapper
    wrapped_base = complex
    def __str__(self):
        return '({0}, {1})'.format(self.real, self.imag)
    def __repr__(self):
        return '{0}({1!r}, {2!r})'.format(self.__class__.__name__, 
                                          self.real, self.imag)

a = Complex(1+1j)
b = Complex(2+2j)

print type(a + b) 
```

请注意，这不会包装`__coerce__`特殊方法，因为它返回 a `tuple`of `complex`s; 如果需要，包装器可以很容易地转换为查看内部序列。

未绑定方法的`__objclass__`属性似乎没有记录，但它指向定义该方法的类，所以我用它来过滤掉定义在我们要转换的类以外的类上的方法。我在这里也使用它来过滤掉不是未绑定方法的属性。

# javascript - jQuery 用动画调整大小

> ID：10771011
> 
> 赞同：0
> 
> 时间：2012-05-27T01:27:26.747
> 
> 标签：javascript, jquery, jquery-ui, jquery-animate

我有一张图片，完整的图片尺寸是`1920x1080`. 当它显示在屏幕上的一个地方时`128x128`，您可以将其移动到屏幕的另一部分，并使用 jQuery 的函数将其大小调整为 50% ，`.animate()`然后调用到达调整大小的句柄。`$(el).resizable()``1920x1080`

`1920x1080`我创建了一个自定义函数来动画图像的放大并“破坏”调整大小，然后在放大图像后它会调用调整大小，并且无论屏幕上的图像有多大，句柄仍然是。我什至尝试在图像上调用 resizable 后，直接操作 CSS`ui-wrapper`以匹配图像的大小，但它总是重置为`1920x1080`. 下面是我用来尝试直接操作包装器的代码片段......不成功。

任何人都知道如何`resizable()`将手柄放在图像的边缘，无论图像有多大或多小，而不是把它们放在全尺寸图像的边缘。谢谢！

```
 el.resizable('destroy');
 var myHeight = el.height(),
     myWidth = el.width();
 el.resizable({
      aspectRatio: that.calculateAR(el)
 })
 el.parent('.ui-wrapper').css({
      width: myWidth + "px",
      height: myHeight + "px"
 }) 
```

# ruby-on-rails-3 - 为什么我在 Rails 3.2.1 上的 `rake test:units` 的“启动时间”这么慢？

> ID：10771013
> 
> 赞同：6
> 
> 时间：2012-05-27T01:27:51.737
> 
> 标签：ruby-on-rails-3, unit-testing, rake, testunit

我们正在 Ruby 1.9.3 和 Rails 3.2.1 上开发应用程序。

最近，我们的单元测试开始变得迟缓。调用和执行大约需要 15 秒。一旦我看到“Execute test:units”，我又需要 10 秒钟才能看到任何输出。最后，任务完成，测试只需 3 秒即可自行执行。

单元测试 3 秒是可以接受的。25 秒的加载时间对于 BDD/TDD 来说是不现实的。

这是我运行时发生的情况`rake test:units --trace`：

```
** Invoke test:units (first_time)
** Invoke test:prepare (first_time)
** Invoke db:test:prepare (first_time)
** Invoke db:abort_if_pending_migrations (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute db:abort_if_pending_migrations
** Execute db:test:prepare
** Invoke db:test:load (first_time)
** Invoke db:test:purge (first_time)
** Invoke environment 
** Execute db:test:purge
** Execute db:test:load
** Invoke db:test:load_schema (first_time)
** Invoke db:test:purge 
** Execute db:test:load_schema
** Invoke db:schema:load (first_time)
** Invoke environment 
** Execute db:schema:load
** Execute test:prepare
** Execute test:units 
```

我不会怀疑正在加载然后重新加载的数据库模式可能是缓慢的关键来源。但是，我没有对我们`Rakefile`与单元测试相关的任何事情做任何事情。我在哪里可以窥视引擎盖下到底发生了什么？

这是顶部的内容`test/test_helper.rb`：

```
require 'simplecov'
ENV["RAILS_ENV"] = "test"
require File.expand_path('../../config/environment', __FILE__)
require 'rails/test_help' 
```

我试过的：

1.  注释掉`simplecov`，因为我们只将它用于我们的 CI 服务器，而不是在开发期间（在执行时间上没有区别）
2.  注释掉其他东西，但这甚至破坏了测试的执行。我不完全确定为什么还有其他项目，因为我认为 Rails 环境会自动加载到“测试”中。

关于我可以在哪里/如何探出头来查看的任何想法？

Rails 是否有机会运行迁移而不是仅仅运行迁移`schema:load`？随着我们的发展，我们有大量的迁移（~30）。

*编辑：*

我使用的是 2011 年型号的 Macbook Pro，配备 8G RAM 和 Core i7 - 不要认为这是我的机器。我[在这个问题](https://stackoverflow.com/questions/323363/why-do-testunit-testcases-start-up-so-slowly)中看到，在 Windows 上，`require`可能会导致问题。

我也认为夹具可能是问题，但如果夹具是问题，测试*本身*，而不是测试的加载时间，会很慢，对吧？

*编辑2：*

感谢 pchap10k 的回答，我认为这与 rake 无关——它与我们的`Gemfile`. 也许我应该在那个区域搜索......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T02:06:39.837

可能是您的宝石加载缓慢。有关 Rails 3.x 中慢速 rake 加载时间的类似投诉，请参阅此线程 >[慢轨堆栈](https://stackoverflow.com/questions/4461346/slow-rails-stack)

# ruby-on-rails - twitter bootstrap 上的列内空间

> ID：10771014
> 
> 赞同：1
> 
> 时间：2012-05-27T01:28:04.570
> 
> 标签：ruby-on-rails, facebook-graph-api, twitter-bootstrap

我正在通过 Facebook API 提取图片，并尝试使用 twitter bootstrap 和 rails koala gem 将图片分成三列。

图片可以分成几列，但列内的间距非常不均匀。有时图片之间的列内会有很大的差距。似乎是因为在其他列之一中有更长的图片。

有没有办法确保图片显示得更流畅？

这是我的代码。谢谢

```
<div class = "row-fluid">
<div class ="span16">
<% @album = @graph.get_connections("me", "albums") %>
<% @album.each do |result| %>
  <% @photos = @graph.get_connections("#{result['id']}", "photos") %>
    <% @photos.each do |result| %>
    <div class ="span3">
        <img src="<%= result["source"] %>">
    </div>
    <% end %>
<% end %>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T14:21:00.557

如果您`span16`的网格系统是 16 列`span3`（`span3*5=span15`

# eclipse - 关于 Java EE 的 persistence.xml 的 property 属性的混淆

> ID：10771021
> 
> 赞同：0
> 
> 时间：2012-05-27T01:30:25.857
> 
> 标签：eclipse, jakarta-ee, eclipselink, persistence.xml

在 Java EE 中，当使用 JPA 持久化类时，我的 persistence.xml 文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence     http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="JMonks_Crud">
        <jta-data-source>jdbc/example</jta-data-source>
        <class>models.Class1</class>
        <class>models.Class2</class>
        <properties>
            <property name="eclipselink.ddl-generation" value="drop-and-create-tables"/>
            <property name="eclipselink.ddl-generation.output-mode" value="both"/>
        </properties>
    </persistence-unit>
</persistence> 
```

到目前为止，我对 JPA 的唯一经验来自一个应该清除数据库中所有值的示例，然后有 servlet 的 post 方法将一些值硬编码到使用的值中。为此，该示例使用：

```
<property name="eclipselink.ddl-generation" value="drop-and-create-tables"/> 
```

但是，我想在会话之间将数据保存在数据库中（就像任何好的动态站点一样），我不知道在 value 属性中放入什么来完成此操作。wikia 站点 (http://wiki.eclipse.org/Using_EclipseLink_JPA_Extensions_(ELUG)#Using_EclipseLink_JPA_Extensions_for_Schema_Generation) 说，它可以在这个值中放置三个不同的值：

*   none – EclipseLink 不生成 DDL；没有生成模式。
*   create-tables – EclipseLink 将尝试为每个表执行 CREATE TABLE SQL。如果表已经存在，EclipseLink 将遵循特定数据库和 JDBC 驱动程序组合的默认行为（当为已经存在的表发出 CREATE TABLE SQL 时）。在大多数情况下，会引发异常并且不会创建表。然后 EclipseLink 将继续执行下一条语句。（另请参见 eclipselink.create-ddl-jdbc-file-name。）
*   drop-and-create-tables – EclipseLink 将尝试删除所有表，然后创建所有表。如果遇到任何问题，EclipseLink 将遵循特定数据库和 JDBC 驱动程序组合的默认行为，然后继续执行下一条语句。（另请参见 eclipselink.create-ddl-jdbc-file-name 和 eclipselink.drop-ddl-jdbc-file-name。）

如果我使用 none 属性，它会抓取包含填充数据的现有表吗？还是没有人根本不做桌子，也无济于事？如果我使用创建表，我不会抛出异常吗？因为我尝试使用的表已经存在。

谢谢你的时间 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:49:58.123

如果您使用 create-tables，EclipseLink 将在部署发生时创建您的实体定义的表。如果您使用 drop-and-create-tables，您可能会遇到问题，因为它会首先尝试删除每个实体的表，然后重新创建它们。如果您重新部署应用程序或重新启动应用程序，这可能会导致您丢失数据。这主要用于开发和测试，因为每次启动时测试都会填充数据库。

如果使用 EclipseLink 2.4（每晚构建），您还可以使用 create-or-extend-tables，如果您在重新部署时向实体添加字段，它将在现有表上使用 alter table 语句。

# vcl - C++ Builder XE2，TXMLDocument 'DTD 被禁止'

> ID：10771022
> 
> 赞同：6
> 
> 时间：2012-05-27T01:30:55.587
> 
> 标签：vcl, c++builder-xe2, dtd, txmldocument, xml

当我尝试使用 DTD 读取 XML 文档（eagle 文件）时，出现错误：

> 项目 xx 引发异常类 EDOMParserError 并带有消息“禁止 DTD”

XML 标头如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE eagle SYSTEM "eagle.dtd"> 
```

如果我删除第二行...

```
<!DOCTYPE eagle SYSTEM "eagle.dtd"> 
```

...一切正常。

经过一番谷歌搜索后，似乎 MSXML 解析器有一个名为“prohibitDTD”的选项默认设置为**true**（在早期版本中为 false）。

但是，似乎无法从 TXMLDocument 类将此选项设置为 false。一种解决方案似乎是重新编译 .pas 库或使用 CoCreateInstance() 自己创建接口。

我在那里看到的所有示例都在 Delphi 中，我很难将这些示例转换为 C++ Builder。

有谁知道如何使用 C++ Builder XE2 读取 DTD XML 文档？

我的示例代码...

```
#include <xmldoc.hpp>

_di_IXMLNode XMLObject;

TXMLDocument *XMLDocument = new TXMLDocument(this);
XMLDocument->LoadFromFile(fileName); // <----- Exception EDOMParserError
XMLObject = XMLDocument->DocumentElement; 
```

谢谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T01:03:45.217

XE2 为这个问题引入了一个本地解决方案：有一个名为声明的全局`bool`变量。您可以在将数据加载到之前将其设置为：[`MSXML6_ProhibitDTD`](http://docwiki.embarcadero.com/Libraries/en/Xml.Win.msxmldom.MSXML6_ProhibitDTD)`Xml.Win.msxmldom.hpp``false``TXMLDocument`

```
#include <xmldoc.hpp>
#include <msxmldom.hpp>

MSXML6_ProhibitDTD = false;
TXMLDocument *XMLDocument = new TXMLDocument(this):
XMLDocument->LoadFromFile(fileName);
_di_IXMLNode XMLObject = XMLDocument->DocumentElement; 
```

`TXMLDocument`附带说明：像这样动态创建实例通常不是一个好主意。最好改用`IXMLDocument`接口：

```
#include <xmldoc.hpp>
#include <msxmldom.hpp>

MSXML6_ProhibitDTD = false;
_di_IXMLDocument XMLDocument = LoadXMLDocument(fileName);
_di_IXMLNode XMLObject = XMLDocument->DocumentElement; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-24T07:22:24.903

由于不推荐使用全局变量的解决方法，`MSXML6_ProhibitDTD`并且我也无法使其与 XE5 一起使用，因此这是另一种解决方案：

如[文档](http://docwiki.embarcadero.com/Libraries/XE5/en/Xml.Win.msxmldom.TMSXMLDOMDocumentFactory.AddDOMProperty)中所述，有这种方法可以更改 DOM 属性

```
Xml.Win.Msxmldom.MSXMLDOMDocumentFactory.AddDOMProperty 
```

不幸的是，使用它并不是那么简单......

包括此命名空间的标头：

```
#include <Xml.Win.msxmldom.hpp>

Foo::Foo()
{
     //change the dom property in your constructor.
    ((TMSXMLDOMDocumentFactory*)Xml::Win::Msxmldom::MSXMLDOMDocumentFactory)->AddDOMProperty("ProhibitDTD", False, true);
} 
```

并访问此方法。（强制转换是必要的，因为它`MSXMLDOMDocumentFactory`本身是从元类接口继承的。我不明白背后的概念。）

灵感来自德尔福博客：[https ://bobsotherblog.wordpress.com/2013/09/19/fixing-dtd-is-prohibited-error-in-delphi/](https://bobsotherblog.wordpress.com/2013/09/19/fixing-dtd-is-prohibited-error-in-delphi/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T03:52:22.263

您需要将 MSXMLDOM.pas 复制到您的项目文件夹中，并对其进行修改以解决此问题。

将实现更改为`function TMSDOMDocument.GetMSDocument`以下内容，然后重新构建您的项目。

请注意，您必须使用`IXMLDOMDocument2.setProperty`而不是直接访问`ProhibitDTD`，因为`IXMLDOMDocument2`不会发布`ProhibitDTD`.

```
function TMSDOMDocument.GetMSDocument: IXMLDOMDocument;
var
  Doc2: IXMLDOMDocument2;
begin
  Result := MSNode as IXMLDOMDocument;
  if Supports(Result, IXMLDOMDocument2, Doc2) then
      Doc2.setProperty('ProhibitDTD', False);
end; 
```

请注意，这仅在您*不*使用运行时包构建时才有效！

该解决方案来自 TeamB 成员发布的 Embarcadero 论坛帖子；我记得读过它，并在通过[CodeNewsFast](http://codenewsfast.com)搜索这些论坛时找到了它——EMBT 论坛上的搜索功能一直没有很好地工作，最近的重建或重新索引或其他事情使它比以前更糟。:-)

# d - D：保证销毁

> ID：10771030
> 
> 赞同：10
> 
> 时间：2012-05-27T01:32:18.000
> 
> 标签：d, destructor

我正在阅读 Andrei Alexandrescu 的*The D Programming Language*并在拆解序列中找到了这个块：

> ...D 假设退出的应用程序将*事实上*释放与其关联的所有资源，因此它不会调用任何析构函数。

这对内存资源很有效，但是网络套接字、自定义硬件、文件句柄等呢？有没有办法保证我的析构函数*总是*被调用？或者：D 是否提供了一种更好的方式来处理这些事情（并且我陷入了 C++ 思维模式）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T03:15:43.520

您可以使用在线程终止时调用的静态析构函数和在（正常）应用程序关闭时调用的[共享](http://dlang.org/class.html#StaticDestructor)静态[析构函数](http://dlang.org/class.html#SharedStaticDestructor)

（现在如果我们有弱引用，那么我们就不需要另一个级别的间接......）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T14:53:20.800

其他人提到了模块级析构函数，但这并不实用，因为它需要太多的手动维护，而且 D 有一个令人讨厌的怪癖，即具有静态构造函数/析构函数的模块不能循环导入。例如：

**模块 A**

```
module A;
import B;
static ~this() {}
void main() {} 
```

**模块 B**

```
module B;
import A;
static ~this() {} 
```

**试着跑...**

```
% dmd A.d B.d
% ./A
Cycle detected between modules with ctors/dtors:
A -> B -> A
object.Exception@src/rt/minfo.d(331): Aborting! 
```

D 这样做是为了以防你的析构函数碰巧相互依赖，即使它们不依赖。这迫使您对代码进行奇怪的“重构”以解决这个非问题。没有办法告诉 D 实际上没有依赖关系。

处理资源破坏的更好解决方案是尽可能多地尝试和范围。没有需要销毁的全局资源，也不要依赖类终结器来处理任何事情，因为它们不能保证*永远*运行（Java 也有同样的问题）。

或者，只需像在 C 中那样执行操作：手动关闭。这有点多工作，但真的不是一个大问题。这肯定比与循环进口搏斗要容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T06:10:15.217

*   杀死进程会清理进程内部的所有内容。
*   没有办法阻止操作系统在有时间清理进程外部的东西之前杀死进程（如果有的话，断电甚至会覆盖）。

在这两者之间，一切都被涵盖了，所以假设你对事情如何关闭有发言权是毫无意义的。

# c# - 扩展 C# 语言，付出多少努力/收获？

> ID：10771043
> 
> 赞同：8
> 
> 时间：2012-05-27T01:36:57.897
> 
> 标签：c#

# 介绍

作为一名开发人员，我每天都参与编写大量数学代码，我想在 C# 语言中添加很少的语法糖以简化代码编写和审查。

我已经阅读了这个[线程](https://stackoverflow.com/q/3969198/684399)和另一个[线程](https://stackoverflow.com/q/3981825/684399)以获取可能的解决方案，并且只想知道最好的方向以及仅解决以下三个语法问题可能需要付出多少努力*。

*：我可以在没有描述的语法糖的情况下生存，但如果不是太多的工作和简单的编译过程的*Rube-Goldberg*设计，进一步研究可能会很有趣。

# 1\. 多个输出参数

我想写：

```
 [double x, int i] = foo(z); 
```

代替：

```
 double x;
 int i;
 foo(out x, out i, z); 
```

注意：`out`首先放置参数并`foo`像往常一样声明（或使用相同的语法）。

# 2\. 附加运算符

我想要一些新的一元/二元运算符。不太了解如何为这些定义（并且在解析源时不引入歧义似乎很复杂），无论如何都希望有类似的东西：

```
namespace Foo
{
    using binary operator "\" as "MyMath.LeftDivide";
    using unary operator "'" as "MyMath.ConjugateTranspose";

    public class Test
    {
         public void Example()
         {
             var y = x';
             var z = x \ y;
         }
    }
} 
```

代替：

```
namespace Foo
{
    public class Test
    {
         public void Example()
         {
             var y = MyMath.ConjugateTranspose(x);
             var z = MyMath.LeftDivide(x, y);
         }
    }
} 
```

# 3\. 静态类的自动名称插入

在计算代码中无休止地重复**Math** .BlaBlaBla() 而不是直接简单地编写 BlaBlaBla*是*非常不吸引人的。

当然，这可以通过添加本地方法将**Math** .BlaBlaBla 包装在计算类中来解决。无论如何，当完全没有歧义时，或者当歧义可以用某种`implicit`关键字解决时，在需要时自动插入类名会更好。

例如：

```
using System; 
using implicit MySystem; // Definying for 'MyMaths.Math.Bessel'

public class Example
{
    public Foo()
    {
        var y = 3.0 * Cos(12.0); 
        var z = 3.0 * Bessel(42);
    }

    // Local definition of 'Bessel' function again
    public static double Bessel(double x)
    {
        ...
    }
} 
```

会成为：

```
using System; 
using MySystem; // Definying for 'Math.Bessel'

public class Example
{
    public Foo()
    {
        var y = 3.0 * System.Math.Cos(12.0); // No ambiguity at all 
        var z = 3.0 * MySystem.Math.Bessel(42); // Solved from `implicit` keyword 
    }

    // Local definition of 'Bessel' function again
    public static double Bessel(double x)
    {
        ...
    }
} 
```

* 编译器可能会简单地生成一个警告，表明它解决了歧义，因为`implicit`已经定义了一个解决方案。

注意：3) 足以满足解决 2) 的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T05:10:40.437

您是否考虑过使用 F# 而不是 C#？根据我的经验，我发现 F# 比 C# 更适合面向科学/数学的代码。

Your first scenario is covered with tuples; you can write a function like `let f a b = (a+b, a-b)`, which returns a tuple of 2 values directly, you can fairly easily [overload operators](http://msdn.microsoft.com/en-us/library/dd233204.aspx) or add your own, and modules may help you with the 3rd. And F# interoperates fairly smoothly with C#, so you can even pick F# for the parts where it's practical, and keep the rest of your code in C#. There are other niceties which work great for scientific code ([units of measure](http://msdn.microsoft.com/en-us/library/dd233243.aspx) for instance) as well...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T01:43:37.993

我将成为第一批支持可由用户扩展的主流 C# 的人之一。但是 - 由于几个原因（设计、时间或成本效益），我看不到 C# 可以像您（[或我](http://ananthonline.net/2011/08/04/quenya-beyond-syntax/)）想要的那样可扩展。我发现 AC# 派生语言非常适合元编程和扩展功能/语法是[Nemerle](http://nemerle.org/About/)。

[Boo](http://boo.codehaus.org/)是另一种具有良好元编程特性的 .NET 语言。但是，它与 C# 相去甚远，以至于我认为它不是这个问题的适当答案（但为了完整性而添加它，无论如何）。

# ruby-on-rails - Rails - 如何使用字符串访问模型中的同名属性？

> ID：10771045
> 
> 赞同：0
> 
> 时间：2012-05-27T01:37:18.260
> 
> 标签：ruby-on-rails

为了 DRY，我将索引页面模板化为部分页面。被传递到部分的 :locals 的一部分如下：

```
:locals => { :data_set => @accounts # @accounts is set in the controller as @accounts = Account.find(:all)
             :attr_1 => "name" } 
```

我希望能够在部分中做的是：

```
<% data_set.each do |d| %>
  <%= d.:attr_1 %>
<% end %> 
```

我之前的尝试都以打印“名称”而不是 d.name 的内容而告终，这正是我想要的。

有没有办法实现这一点，或者可能是一种更好的方法来做我正在尝试的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T01:40:54.780

您正在为键 attr_1 分配值“名称”。它永远是名字。

如果 data_set 中的对象有一个名为 name 的属性，则根本不需要第二个变量。你只需要做

```
<% data_set.each do |d| %>
  <%= d.name %>
<% end <%> 
```

否则，如果您想搞砸并且确实想将 name 作为方法调用传递，因为，比如说，您在数据集中有几种不同类型的对象，您可以改为这样做

```
<%= d.send attr_1 %> 
```

它将向对象发送“名称” d。

# c# - 如何在 C# 中定义一个文本框数组？

> ID：10771048
> 
> 赞同：6
> 
> 时间：2012-05-27T01:38:23.233
> 
> 标签：c#, arrays, loops, textbox, naming

嗨，当我在 Windows 应用程序表单上创建文本框时，我无法将其命名为框 [0]、框 [1] 等。我这样做的目的是因为我想循环使用它们。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-27T01:47:52.180

创建它们后如何列出它们？在您的表单初始化函数中，您可以执行以下操作：

```
List<TextBox> myTextboxList = new List<TextBox>();
myTextBoxList.Add(TextBox1);
myTextBoxList.Add(TextBox2);
mytextBoxList.Add(TextBox3); 
```

现在您可以使用“myTextboxList”进行迭代，如下所示：

```
Foreach (TextBox singleItem in myTextboxList) {
    // Do something to your textboxes here, for example:
    singleItem.Text = "Type in Entry Here";
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-27T02:45:51.007

其实我也找到`TextBox[] array = { firstTextBox, secondTextBox };`作品了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T01:48:24.150

您可以在运行时创建文本框并将它们放在一个数组中......

如果您想在设计时执行此操作，则必须对整个`this.Controls`数组执行一些控制过滤逻辑，以便仅访问所需的文本框。考虑`if (currControl is TextBox)`表单中的所有文本框是否都是您想要在数组中的文本框。

设计时的另一种选择是将所有想要的文本框放在将成为其父级的面板中，然后遍历面板的子级（控件）并将它们转换为 TextBox。

运行时解决方案类似于：

```
var arr = new TextBox[10];

for (var i = 0; i < 10; i++)
{
    var tbox = new TextBox();

    // tbox.Text = i.ToString();

    // Other properties sets for tbox

    this.Controls.Add(tbox);
    arr[i] = tbox;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T01:53:14.490

我个人不会为此使用数组。我会使用某种形式的通用集合，比如 List。

```
 List<TextBox> textBoxList = new List<TextBox>();

    //Example insert method
    public void InsertTextBox(TextBox tb)
    {
        textBoxList.Add(tb);
    }

    //Example contains method
    public bool CheckIfTextBoxExists(TextBox tb)
    {
        if (textBoxList.Contains(tb))
            return true;
        else
            return false;
    } 
```

您不一定必须使用 Contains 方法，也可以使用 Any()，或者甚至可能找到另一种方法 - 这一切都取决于您在做什么。我只是认为在这种情况下，使用泛型集合比简单数组更灵活。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-22T09:34:15.330

只用它来`C#`创建一个文本框数组

```
public Text [] "YourName" = new Text ["how long you want the array"]; 
```

然后将文本框单独添加到数组中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-05T04:06:14.953

[使用 C# 的文本框数组](http://www.c-sharpcorner.com/blogs/textbox-array-using-c-sharp1)

```
 // Declaring array of TextBox
private System.Windows.Forms.TextBox[] txtArray;

private void AddControls(int cNumber)
{

            // assign number of controls

            txtArray = new System.Windows.Forms.TextBox[cNumber + 1]; 

            for (int i = 0; i < cNumber + 1; i++)

            {

                        // Initialize one variable

                        txtArray[i] = new System.Windows.Forms.TextBox();

            }
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-27T01:52:44.840

```
TextBox[] t = new TextBox[10];
for(int i=0;i<required;i++)
{ 
   t[i]=new TextBox();
   this.Controls.Add(t[]);
} 
```

# python - python中带参数的函数指针？

> ID：10771052
> 
> 赞同：0
> 
> 时间：2012-05-27T01:38:56.090
> 
> 标签：python, api, function-pointers, cron-task

我正在阅读来自 pythons [Cron-job](http://packages.python.org/APScheduler/cronschedule.html#example-1)的文档（示例 1）：

```
from apscheduler.scheduler import Scheduler

# Start the scheduler
sched = Scheduler()
sched.start()

def job_function():
    print "Hello World"

# Schedules job_function to be run on the third Friday
# of June, July, August, November and December at 00:00, 01:00, 02:00 and 03:00
sched.add_cron_job(job_function, month='6-8,11-12', day='3rd fri', hour='0-3') 
```

是否可以向其中添加参数`job_function`以及如何将它们传递给`add_cron_job`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T01:43:48.447

使用`args`关键字参数：

```
# call job_function with arguments 'hello' and 'world'
sched.add_cron_job(job_function, args=('hello', 'world'), month='1', day='1st fri', hour='0') 
```

见[的定义`add_cron_job`](https://bitbucket.org/agronholm/apscheduler/src/4aa5683f5d82/apscheduler/scheduler.py#cl-329)。

# objective-c - 从具有条件objective-c的NSMutable数组中获取对象

> ID：10771054
> 
> 赞同：0
> 
> 时间：2012-05-27T01:40:01.373
> 
> 标签：objective-c, arrays, nsmutablearray

我想从数组中获取一些对象，其中包含对象属性之一满足条件的对象

就像在c#中一样

例子 ：

```
NSMutablearray * coursesinfo ; 
```

该数组包含 30 多个课程

course 是其属性的对象是 finalgrade

我想获得所有课程`where final grade < 100`

我可以像 c# 一样在 Objective-c 中做到这一点吗？如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T03:27:09.443

where 语句就像在 cocoa/cocoa touch 中使用谓词一样。这是一个示例，其中我有一个目录中的图像文件名数组，并且我正在寻找基本文件名。indexOfObjectsWithOptions: 方法返回一组通过特定测试的索引。NSEnumerationConcurrent 利用并发队列来利用多个内核（如果存在）。

```
NSIndexSet *indexSet=[allImageURLs indexesOfObjectsWithOptions:NSEnumerationConcurrent passingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop) {
    BOOL match=NO;
    NSRange twoXRange=[((NSURL *)obj).absoluteString rangeOfString:@"@2x"];
    NSRange iPhoneRange=[((NSURL *)obj).absoluteString rangeOfString:@"~ipad"];
    if (twoXRange.location==NSNotFound && iPhoneRange.location==NSNotFound) {
        match=YES;
    }
    return  match;
}];

self.imageURLs=[allImageURLs objectsAtIndexes: indexSet]; 
```

对于您的特殊情况，我会执行以下操作：

```
NSIndexSet *theSet=[coursesinfo indexesOfObjectsWithOptions:NSEnumerationConcurrent passingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop) {
    BOOL match=NO;

    if( obj.finalGrade<100 ){
       match=YES;
    }
    return match;
}];

NSArray *courses=[coursesinfo objectsAtIndexes: theSet]; 
```

祝你好运！

吨

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T01:54:09.607

最接近的是使用`- (NSArray *)filteredArrayUsingPredicate:(NSPredicate *)predicate`NSArray 的函数。

链接到[NSPredicate 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPredicate_Class/Reference/NSPredicate.html#//apple_ref/doc/c_ref/NSPredicate)。

# php - 来自 php 页面的 xhr 返回值

> ID：10771056
> 
> 赞同：1
> 
> 时间：2012-05-27T01:40:49.253
> 
> 标签：php, xmlhttprequest

好吧，伙计们我有点卡在这里。我通常使用 jquery 来做到这一点，但我发现它不能用 jquery 来完成，所以我这样做是好的，所以这是我的代码

```
var url = ("upload.php?loc="+uplocation);   
    var xhr = new XMLHttpRequest();     
        if(xhr.upload){ // check if upload property exists
            xhr.open("POST", url, true);
            xhr.setRequestHeader("X_FILENAME", file.name);          
            xhr.send(file); 

        } 
```

它所做的只是将文件发送到 php 页面，但是 php 页面没有上传我不想要的图像，所以他们无论如何都会返回页面上显示的所有内容

如果是 jquery 我会做这样的事情

```
$.ajax({
                type: "POST",
                url: 'json/submitsongs.php',
                data: loca,
            success: function(data){
                                alert(data);
                            }

            }); 
```

所以我的问题是如何返回在 php 页面上回显的内容并提醒它（出于调试原因）。

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:31:46.840

您可以为所需的任何事件（加载、错误、进度等）添加事件侦听器。因此，在您的情况下，您将使用表示文件已完成加载的“加载”事件：

```
xhr.addEventListener('load', onComplete, false); 
```

onComplete 是将事件作为参数的回调函数。此事件包含响应文本：

```
function onComplete(event) {
    alert(event.target.responseText);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T02:42:52.957

截至今天，您无法使用 Ajax 上传异步。
使用 iframe（如 Google）或一些漂亮的 Flash（或 Java）上传应用程序。
不确定，但可能 HTML5 对此有解决方案，但它不会跨浏览器。

# css - Compass/Sinatra 加载模块

> ID：10771059
> 
> 赞同：2
> 
> 时间：2012-05-27T01:40:58.383
> 
> 标签：css, ruby, sinatra, sass, compass-sass

我正在尝试在我的 SCSS 文件中加载 CSS3 和重置模块，但在尝试导入任何 Compass 特定模块时出现错误。

西纳特拉应用程序：

```
require 'rubygems'
require 'sinatra'
require 'sass'
require 'compass'

configure do
  set :scss, {:style => :compact, :debug_info => false}
  Compass.add_project_configuration(File.join(Sinatra::Application.root, 'config',     'compass.rb'))
end

get '/css/:name.css' do
  content_type 'text/css', :charset => 'utf-8'
  scss(:"stylesheets/#{params[:name]}" )
end 
```

样式.scss：

```
@import "compass/reset";
@import "compass/css3"; 
```

错误信息：

```
Sass::SyntaxError at /css/style.css
File to import not found or unreadable: compass/reset. Load path: /Users/work/repos/mysite 
```

我可以安装一个 gem 来自动提取这些模块，还是我必须将 Compass 文件移动到我的 Sinatra 应用程序中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T05:13:40.887

在您的 compass.rb 中正确配置后，通常足以添加以下内容：

```
 get '/stylesheets/:name.css' do
    content_type 'text/css', :charset => 'utf-8'
    sass params[:name].to_sym, Compass.sass_engine_options
   end 
```

到您的路线。 [Sinatra 集成](https://github.com/chriseppstein/compass/wiki/Sinatra-Integration)、[示例项目](https://github.com/chriseppstein/compass-sinatra)或您认为有用的东西：[Better Compass integration for Sinatra（从 BigBand 中提取）](https://github.com/rkh/sinatra-compass)

在模块化[模块化应用程序](http://www.sinatrarb.com/intro#Sinatra%3a%3aBase%20-%20Middleware,%20Libraries,%20and%20Modular%20Apps)中，我使用类似的东西：

```
module Assets
  # #Sass/Compass Handler
  class Stylesheets < Sinatra::Base
    register  CompassInitializer
    get '/stylesheets/:name.css' do
      content_type 'text/css', :charset => 'utf-8'
      sass params[:name].to_sym, Compass.sass_engine_options
    end
  end
end 
```

我`lib`的文件夹中有一个文件`compass_plugin.rb`

```
module CompassInitializer
  def self.registered(app)
require 'sass/plugin/rack'
Compass.configuration do |config|
  config.project_path = Padrino.root
  config.sass_dir = "app/stylesheets"
  config.project_type = :stand_alone
  config.http_path = "/"
  config.css_dir = "public/stylesheets"
  config.images_dir = "public/images"
  config.javascripts_dir = "public/javascripts"
  config.output_style = :compressed
end
Compass.configure_sass_plugin!
Compass.handle_configuration_change!
app.use Sass::Plugin::Rack
  end
end 
```

[这是从Padrino](http://www.padrinorb.com/)框架中无耻地窃取的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T05:16:04.827

我认为你应该：

```
$ gem install compass
$ compass create 
```

# c# - 改变背景颜色

> ID：10771060
> 
> 赞同：0
> 
> 时间：2012-05-27T01:41:19.393
> 
> 标签：c#, wpf, background, sleep, wait

所以我正在做一个非常简单的游戏，你必须输入一个显示在窗口上的单词。我的想法是，当用户正确输入时，矩形的背景会反复改变颜色。我现在拥有的是：

```
PalabraUsuario.BorderBrush = Brushes.Green;
Thread.Sleep(300);
PalabraUsuario.BorderBrush = Brushes.Blue;
Thread.Sleep(300);
PalabraUsuario.BorderBrush = Brushes.Green;
Thread.Sleep(300);
PalabraUsuario.BorderBrush = Brushes.Blue; 
```

问题是用户没有视觉上的变化，但是如果我只放其中一条线，颜色确实会改变。我正在寻找的是一种“缓慢”阅读这些行的方法（如阅读一行，然后稍等一下）以产生我正在寻找的视觉效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T01:46:46.130

创建一个设置为 300 毫秒的计时器，并在每次滴答声时更改背景。

# php - （PHP帮助）如果文件中存在特定数字，请执行此操作

> ID：10771061
> 
> 赞同：4
> 
> 时间：2012-05-27T01:41:21.580
> 
> 标签：php, find, exact-match

这是一个与 PHP 相关的问题。

我已经广泛搜索了以下问题的解决方案，但没有找到适合我的解决方案。如果有人可以帮助我，将不胜感激。

我的想法是创建一个登录页面，如果将“特定”预定注册号提供/发送给用户，则访问登录页面并且文件中存在该号码，以执行 /允许登录权限。

例如，如果一个用户的注册号是12345，而另一个是123，想先搜索一下用户的号码是否存在，然后执行something()。

因此，如果“123”已经存在，则搜索“12345”与搜索“234”不同，因此它必须找到一个或多个特定数字。

如果有所不同，则在数字之前和/或之后会有一个“空格”。

这将在现有文件中。

代码：

```
<?php 
$filename = 'datafile.txt'; 

// Data file may contain the following number(s) or any other 
// 123 (no) 
// 1234 (match) 
// 12345 (no) 
// 123456 (no) 
// exact match needed to proceed to page fopen($filename); 
$searchfor = '1234'; 

// this needs to be a variable 
// I don't know what the number will be used. 
$file = file_get_contents($filename); 

if (preg_match($file, $searchfor)) {
  echo "Match found. Proceed to the page."; 
} else { 
  echo "Match not found. Try again."; 
} 

fclose($filename); 
?> 
```

谢谢你。任何帮助表示赞赏，欢呼。

弗雷德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T03:04:23.707

将这些存储在平面文件中可能不是我这样做的方式，但如果我要使用平面文件，以下示例应该可以正常工作：

```
$nums = "12345 34 45 12345 23"; # use file_get_contents to load from file
$uNum = 34;

if ( preg_match( "/[^0-9]{$uNum}[^0-9]/", $nums ) ) {
  echo "Access";
} else {
  echo "Denied";
} 
```

至于填充`$nums`字符串，您可以使用`file_get_contents()`拉入包含所有数字的文件内容。

```
/ 表示模式的开始
[^0-9] 模式中的空格不能被任何数字占用
{$uNum} 用户编号 - 上例中为 34
[^0-9] 模式中的空格不能被任何数字占用
/ 表示模式结束

```

本质上，如果我们的数字在它的任一侧都有一个数字而不是一个空格，或者根本没有，我们的数字将不会被找到。

# jquery - 提交表单时jquery无法识别动态类更改

> ID：10771065
> 
> 赞同：0
> 
> 时间：2012-05-27T01:42:47.417
> 
> 标签：jquery, forms, addclass

我有一个带有“.disable”类的锚标记和将其切换为“.enable”的脚本。

```
if((counter.text() < 140) && (counter.text() >= 0)) {
  $('#tweet').addClass("enable");
  $('#tweet').removeClass("disable");
} else {
  $('#tweet').addClass("disable");
  $('#tweet').removeClass("enable");
} 
```

锚点用于提交表单，但仅当类设置为“.enable”时。

```
$(document).ready( function(){
  $(".enable").click( function(e){
    (e).preventDefault();
    $("#myform").submit();
  });
}); 
```

但是，这行不通。第二个脚本似乎无法识别动态 .class 更改。如果我将上面代码中的类更改为“.disable”，它就可以工作。

知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T01:51:46.213

试试这个：

```
$(document).ready( function(){
  $("#tweet").click( function(e){
    (e).preventDefault();
    if ($(this).hasClass("enable")) {
       $("#myform").submit();
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T01:56:16.537

您的代码无法正常工作的原因是您的代码**仅**`enable`将事件附加到在页面加载时具有该类的元素，而这很可能没有。因此，永远不会附加任何事件处理程序，并且您的代码将永远不会运行。为了让您的处理程序更新您的类添加/删除，您应该使用[`.on()`](http://api.jquery.com/on/)（如果您使用的是 jQuery 1.7+）或[`.delegate()`](http://api.jquery.com/delegate/)（如果您使用的是早于 1.7 的 jQuery）：

要使用[`on()`](http://api.jquery.com/on/)：

```
$(function() {
    $("body").on("click", ".enable", function(e) {
        e.preventDefault();
        $("#myform").submit();
    });
}); 
```

要使用[`delegate()`](http://api.jquery.com/delegate/)：

```
$(function() {
    $("body").delegate(".enable", "click", function(e) {
        e.preventDefault();
        $("#myform").submit();
    });
}); 
```

# php - MySQL 查询优化 - Fetch PHP

> ID：10771066
> 
> 赞同：0
> 
> 时间：2012-05-27T01:43:02.463
> 
> 标签：php, mysql, optimization, fetch

```
<?php function ss($s1, $s2, $s3, $s4, $s5, $s6) {
  $sonucArray = array("alti" => 0, "bes" => 0, "dort" => 0, "uc" => 0, "iki" => 0);
  $sayiArray = array($s1, $s2, $s3, $s4, $s5, $s6);
  $sayiArraySql = join(',',$sayiArray);  
  $query = mysql_query("select * from loto where 
                                  s1 in ($sayiArraySql) or
                                  s2 in ($sayiArraySql) or
                                  s3 in ($sayiArraySql) or
                                  s4 in ($sayiArraySql) or
                                  s5 in ($sayiArraySql) or
                                  s6 in ($sayiArraySql)");

  while ($record = mysql_fetch_array($query)) {
      $controlArray = array($record["s1"],$record["s2"],$record["s3"],$record["s4"],$record["s5"],$record["s6"]);
      $diffArray = array_diff($sayiArray,$controlArray);

      if (count($diffArray) == 0)
          $sonucArray["alti"]++;
      else if (count($diffArray) == 1)
          $sonucArray["bes"]++;
      else if (count($diffArray) == 2)
          $sonucArray["dort"]++;
      else if (count($diffArray) == 3)
          $sonucArray["uc"]++;
      else if (count($diffArray) == 4)
          $sonucArray["iki"]++;      
  }

  return $sonucArray;
} 
```

mysql_fetch_array; 使用过多的 CPU 且速度不快！

**“s1-s2-s3-s4-s5-s6”是整数。**

相反，什么应该是代码？我知道php不足。有人建议我使用“mysql_fetch_row”，但我无法通过调整来写入它

我应该怎么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-05T11:03:03.810

您使用 mysql_fetch_row 的函数：

```
<?php 
function ss($s1, $s2, $s3, $s4, $s5, $s6) 
{
    $sonucArray = array("alti" => 0, "bes" => 0, "dort" => 0, "uc" => 0, "iki" => 0);
    $sayiArray = array($s1, $s2, $s3, $s4, $s5, $s6);
    $sayiArraySql = join(',',$sayiArray);  
    $query = mysql_query("select s1, s2, s3, s4, s5, s6 from loto where 
                              s1 in ($sayiArraySql) or
                              s2 in ($sayiArraySql) or
                              s3 in ($sayiArraySql) or
                              s4 in ($sayiArraySql) or
                              s5 in ($sayiArraySql) or
                              s6 in ($sayiArraySql)");

    while ($record = mysql_fetch_row($query)) 
    {
        $controlArray = array($record[0],$record[1],$record[2],$record[3],$record[4],$record[5]);
        $diffArray = array_diff($sayiArray,$controlArray);

        if (count($diffArray) == 0)
            $sonucArray["alti"]++;
        else if (count($diffArray) == 1)
            $sonucArray["bes"]++;
        else if (count($diffArray) == 2)
            $sonucArray["dort"]++;
        else if (count($diffArray) == 3)
            $sonucArray["uc"]++;
        else if (count($diffArray) == 4)
            $sonucArray["iki"]++;      
    }
    return $sonucArray;
} 
```

mysql_fetch_row 只是使用整数而不是字段名称作为返回数组中的索引。根据您的 sql 请求，$record[0] 将是该行中的第一个字段。这就是为什么我在请求中写下每个字段名称而不仅仅是 *，以确保顺序对应。

希望有帮助。

# actionscript-3 - 在 Adob e AIR Actionscript 3 中将鼠标事件分派到 HTMLLoader

> ID：10771067
> 
> 赞同：0
> 
> 时间：2012-05-27T01:43:05.743
> 
> 标签：actionscript-3

这是我在这里的第一篇文章，因为我真的需要帮助来理解 Actionscript 事件和 HTML 事件之间的基本通信。我目前正在使用放置在 HTMLLoader 对象顶部的清晰 MovieClip。这个movieclip 共享相同的x、y、w、h，目前允许我通过拖动屏幕上的任意位置来滚动HTMLLoader 对象（我正在为触摸屏应用程序制作浏览器）。如何将鼠标事件分派给 HTMLLoader 对象。我非常擅长将 javascript 注入 HTMLLoader 中的 HTML 内容，而且我很熟悉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T04:18:16.443

好吧，看来您的问题最终在那里飘散了。此外，我不确定您是否以“正确”的方式进行此操作，如果您使用 AIR 导出到移动设备，它通常会根据框架 UI 组件处理交互性和控件大小的变化。无论如何，如果你有一个 id 为 htmlLoader 的对象，你可以调用 htmlLoader.dispatchEvent(new Event("doSomething")) 任何实现 IEventDispatcher 的 UIComponent 可以调用它的 dispatchEvent。

# python - Python包的C等价物是什么（“ 我不太了解python，但从文档中我可以看出代码： str = "AAAA" str += pack(" <i", 0="" 1="" 2="" 3="" 4="" 0)="" 会将pack函数的结果附加到str，这将是little-endian风格的整数值0。我的问题是="" c="" 等价物是什么。会不会是：="" char="" str[20]="
问问题
问问题 2012-05-27T01:44:03.683
373 次
This question shows research effort; it is useful and clear
2
This question does not show any research effort; it is unclear or not useful
Bookmark this question.
Show activity on this post.
我不太了解python，但从文档中我可以看出代码：
str = " aaaa"="" str="" +="pack(&quot;<I&quot;," ;="" strcat(str,="" "\x00");="" ?...="" strcat()停在第一个="" nul，所以没有。="" int="" val="0;" nval="htole32(val);" memcpy(str="" 4,="" (char*)&nval,="" 4);="" pythoncendianness="" 回答="" this="" answer="" is="" useful="" 于="" 2012-05-27t01:59:43.833="" related="" android="" -="" 如何在="" androidplot="" 中删除图表周围的所有空间？="" java="" 二维数组列表错误="" netty="" 对="" jdk="" 1.6="" 的主机名验证支持="" python="" 为什么="" 不再等待="" os.system="" 完成？="" mfc="" cwnd="" 中显示="" cimg="" 图像="" javascript="" jquery="" ui="" 可选择丢失区域缩放动画="" 完成后如何使这个倒数计时器自动重置？="" 在不使用标签的情况下设置正文加载="" django="" 无法创建超级用户="" 我正在将图像文件从服务器端传输到客户端，在读取图像文件时我遇到了这个问题="" reference="" php × 1429865="" c++ × 756500="" nginx × 49975="" mongodb × 159057="" mybatis × 3233="" anaconda × 13410="" pycharm × 14671="" python × 1902243="" vscode × 56040="" docker × 110988="" github × 49000="" flask × 49129="" ffmpeg × 24037="" jmeter × 16910="" matplotlib × 63493="" bootstrap × 54641<="" h1="">> ID：10771070
> 
> 赞同：2
> 
> 时间：
> 
> 标签：python, c, endianness

我不太了解python，但从文档中我可以看出代码：

```
 str = "AAAA"
   str += pack("<I", 0) 
```

会将pack函数的结果附加到str，这将是little-endian风格的整数值0。我的问题是 C 等价物是什么。会不会是：

```
 char str[20] = "AAAA";
   strcat(str, "\x00"); 
```

?...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T01:59:43.833

`strcat()`停在第一个 NUL，所以没有。

```
char str[20] = "AAAA";
int val = 0;
int nval = htole32(val);
memcpy(str + 4, (char*)&nval, 4); 
```</i",>

# php - 使用 PHP 显示 MongoDB 收集结果

> ID：10771074
> 
> 赞同：0
> 
> 时间：2012-05-27T01:45:06.120
> 
> 标签：php, mongodb

我正在关注一本书：“PHP 和 MongoDB Web 开发”

他们在这里创建了一个 dbconnection.php 脚本：

```
<?php

class DBConnection
{
    const HOST   = 'localhost';
    const PORT   = 27017;
    const DBNAME = 'myblogsite';

    private static $instance;

    public $connection;    
    public $database;

    private function __construct()
    {
        $connectionString = sprintf('mongodb://%s:%d', DBConnection::HOST, DBConnection::PORT);

        try {

            $this->connection = new Mongo($connectionString);
            $this->database = $this->connection->selectDB(DBConnection::DBNAME);

        } catch (MongoConnectionException $e) {
            throw $e;
        }
    }

    static public function instantiate()
    {
        if (!isset(self::$instance)) {
            $class = __CLASS__;
            self::$instance = new $class;
        }

        return self::$instance;
    }

    public function getCollection($name)
    {
        return $this->database->selectCollection($name);
    }
} 
```

我想使用这个脚本通过一个名为 blogs.php 的文件列出博客文章：

```
<?php

require_once('dbconnection.php');

class Blogs
{
    const COLLECTION = 'articles';

    private $_mongo;
    private $_collection;
    private $_blogs;

    public function __construct()
    {
        $this->_mongo = DBConnection::instantiate();
        $this->_collection = $this->_mongo->getCollection(Blogs::COLLECTION);
    }

}

$blogs = new Blogs();

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="style.css" /> 
    <title>My Blog Site</title>
    </head>

          <body>
              <div id="contentarea">
                  <div id="innercontentarea">
                      <h1>My Blogs</h1>

                      <?php while ($blogs->hasNext()):
                        $article = $blogs->getNext(); ?>
                        <h2><?php echo $article['title']; ?></h2>
                        <p><?php echo substr($article['content'], 0, 200).'...'; ?></p>
                        <a href="blog.php?id=<?php echo $article['_id']; ?>">Read more</a>
                      <?php endwhile; ?>
                  </div>
              </div>
          </body>
</html> 
```

我不确定如何从这里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T02:01:31.163

你有一个博客集合的引用；下一步是查询它：

```
public function __construct()
{
    $this->_mongo = DBConnection::instantiate();
    $this->_collection = $this->_mongo->getCollection(Blogs::COLLECTION);
    $this->_blogs = $this->_collection->find();
} 
```

这将为您提供对结果集的引用，您可以对其进行迭代并获取各个博客文档。然后，您必须弄清楚您希望如何使这些文章可以访问您的 php/html。

（将其用作视觉参考[http://devzone.zend.com/1730/getting-started-with-mongodb-and-php/](http://devzone.zend.com/1730/getting-started-with-mongodb-and-php/)）

# javascript - 在某些操作后检查 Javascript 变量的内容

> ID：10771081
> 
> 赞同：0
> 
> 时间：2012-05-27T01:47:39.717
> 
> 标签：javascript, xml, html, file, xml-parsing

我有一个应该从文件读取到变量的函数

我想知道读取的有效性，并且想知道在执行上传操作后是否有任何方法可以检查变量的内容。

```
function handleFileSelect(evt) {
    var files = evt.target.files; // FileList object
    // Loop through the FileList
    for (var i = 0, f; f = files[i]; i++) {

        var reader = new FileReader();
        parser=new DOMParser();
        // Closure to capture the file information.
        reader.onload = (function(theFile) {
            return function(e) {
                // Print the contents of the file
                //  var span = document.createElement('span');
                xmlDoc=parser.parseFromString(e.target.result,"text/xml");
                try{
                    DistributomeXML_Objects=xmlDoc.documentElement.childNodes;
                }catch(error){
                DistributomeXML_Objects=xmlDoc.childNodes;
                }
                //document.getElementById('list').insertBefore(span, null);
            };
        })(f);

        // Read in the file
        //reader.readAsDataText(f,UTF-8);
        reader.readAsText(f);
    }
    //xmlDoc.getElementsByTagName("distributome").item(0).appendChild(node);

    traverseXML(false, null, DistributomeXML_Objects, distributome.nodes, distributome.edges, distributome.references, distributomeNodes, referenceNodes);
} 
```

我想检查 xmlDoc 是否有效。什么是不使用打印语句的好方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T01:55:10.143

您可以使用控制台和日志变量内容

```
console.log("my variable content",variable); 
```

你可以在浏览器控制台中使用firebug或chrome或opera的本机控制台看到它...

# java - java.sql.SQLException: ORA-06550

> ID：10771089
> 
> 赞同：0
> 
> 时间：2012-05-27T01:49:43.063
> 
> 标签：java, ora-06550

当我尝试执行此 sql 语句时，我收到异常 -

```
java.sql.SQLException: ORA-06550: line 1, column 429:
PLS-00103: Encountered the symbol "/" The symbol "/" was ignored. 
```

**这是我正在执行的下面的 sql 字符串**- 这个 sql 有什么问题吗？它将检查表是否存在，如果存在则不会创建表，如果不存在则将创建表。

```
 public static final String CREATE1 = "DECLARE " +
"t_count INTEGER; " +
"v_sql VARCHAR2(1000) := 'create table " +DATABASE_TABLE + " ( " +
"(ID number(10,0), " +
"CGUID VARCHAR(255), " + 
"PGUID VARCHAR(255), " + 
"SGUID VARCHAR(255), " + 
"USERID VARCHAR(255), " +
"ULOC VARCHAR(255), " +
"SLOC VARCHAR(255), " +
"PLOC VARCHAR(255), " +
"ALOC VARCHAR(255), " +
"SITEID VARCHAR(255), " +
"PRIMARY KEY ( ID ))'; " +
"BEGIN " +
"SELECT COUNT(*) " +
"INTO t_count " +
"FROM user_tables " +
"WHERE table_name = '" +DATABASE_TABLE + "'; " +

"IF t_count = 0 THEN " +
"EXECUTE IMMEDIATE v_sql; " +
"END IF; " +
"END; "; 
```

它正在控制台上打印为-

```
DECLARE t_count INTEGER; v_sql VARCHAR2(1000) := 'create table LnPData((ID number(10,0), CGUID VARCHAR(255), PGUID VARCHAR(255), SGUID VARCHAR(255), USERID VARCHAR(255), ULOC VARCHAR(255), SLOC VARCHAR(255), PLOC VARCHAR(255), ALOC VARCHAR(255), SITEID VARCHAR(255), PRIMARY KEY ( ID ))'; BEGIN SELECT COUNT(*) INTO t_count FROM user_tables WHERE table_name = 'LnPData'; IF t_count = 0 THEN EXECUTE IMMEDIATE v_sql; END IF; END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T02:08:25.137

消除 ';' 在您的 END IF 语句之后并再次运行它。

# objective-c - UIActivityView 没有动画

> ID：10771091
> 
> 赞同：1
> 
> 时间：2012-05-27T01:50:03.340
> 
> 标签：objective-c, user-interface

我在 iPhone 界面上有一个执行功能的按钮。功能是这样的：

```
-(IBAction)courses:(id)sender {
[loading startAnimating];
[connection getCourses];
[outlet setText:connection.lastResponseData];
} 
```

我的问题是动画只在`[outlet setText:connection.lastResponseData`. 在此之前如何让加载开始动画？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T03:19:53.513

看起来像是`getCourses`阻塞了主线程；您开始的任何动画都将被删除，直到`courses:`返回之后。修改您的代码以使用后台线程：

```
-(IBAction)courses:(id)sender {
[loading startAnimating];
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        [connection getCourses];
        dispatch_async(dispatch_get_main_queue(), ^{
            [outlet setText:connection.lastResponseData];       
            [loading stopAnimating];
        });
    });
} 
```

这会将您的阻塞网络访问置于系统提供的后台 GCD 队列中，该队列包含后台线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T03:10:18.940

似乎您的连接阻塞了也负责 UI 的主线程。尝试在`connection`启动但未完成时与 UI 交互，如果它没有响应 - 使连接在另一个线程中运行。

* * *

例如，异步[NSURLConnection](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)不会阻塞你的 UI。

# java - 初始化超类成员的正确方法是什么？

> ID：10771092
> 
> 赞同：1
> 
> 时间：2012-05-27T01:50:34.040
> 
> 标签：java, subclassing, super

如果我有一个类，例如在构造函数中初始化的 HashMap 像这样......

```
public class MySuper{
   HashMap<String,String> foo;

   public MySuper(){
      foo = new HashMap<String,String>();
   }
} 
```

我的印象（这是不正确的）是我只需要在子类中调用 super 并且会发生相同的初始化，但是 Eclipse 对以下语法不满意......

```
 public class MySub extends MySuper{
      public MySub(){
         super.MySuper()
      }
   } 
```

所以，我很好奇这样做的正确方法是什么。我是否必须在 MySuper 中创建一个单独的方法来进行初始化并调用 super ？（我知道这会起作用），但我的印象是有一种方法可以在我要扩展的类上调用 super 并让它执行它通常在其构造函数中执行的任何操作。

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T01:54:42.763

超类的无参数构造函数是从子类中自动调用的。

但是如果你想在你的代码中强调它，你可以使用：

```
 public class MySub extends MySuper{
      public MySub(){
         super();
      }
   } 
```

super() 必须是构造函数主体的第一条语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T01:54:22.030

您可以只调用 super() - 另外，仅供参考，在您的特定示例中，您甚至不必在子类中编写构造函数，它会隐式调用超类默认构造函数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T01:55:04.990

默认情况下，子类的默认构造函数会调用超类的默认构造函数，所以你可以写

```
public MySub(){
    // super(); is automatically called at first line, so you no need call it
    // child init
} 
```

或者你可以在子构造函数的第一行调用超类的构造函数

```
public MySub(){
    super();
    // child init
} 
```

如果超类有`public MySuper(int i)`你想调用的构造函数，你可以写

```
public MySub(){
    super(100);
    // child init
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T01:56:33.863

你通常不需要做任何事情。

当调用子类构造函数时，会自动调用超类无参数构造函数。

如果您在超类中没有无参数构造函数，或者您想调用另一个重载版本，那么您必须显式调用 via `super`（否则您的代码将无法编译，因为必须调用超类构造函数，并且如果默认的无参数构造函数不可用，VM 不知道要调用哪个重载）。

你这样做：

`super()` 或者

```
 public class MySub extends MySuper{
      public MySub(){
         super();
      }
   } 
```

或者

```
 public class MySub extends MySuper{
      public MySub(int a, int b){
         super(a, b);
      }
   } 
```

请参阅[使用超级。](http://docs.oracle.com/javase/tutorial/java/IandI/super.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-27T01:57:17.783

```
You have no need to call super.MySuper() because super classe's default constructor always invoke implicitly because the first line of child class's constructor is super() by default.

public class MySuper{
   HashMap<String,String> foo;

   public MySuper(){
      foo = new HashMap<String,String>();
   }
}

public class MySub extends MySuper{

} 
```

# powershell - 使用外部参数调用 [ADSI]

> ID：10771093
> 
> 赞同：0
> 
> 时间：2012-05-27T01:51:03.720
> 
> 标签：powershell, active-directory

我对powershell脚本不是很熟悉，我被这个问题困住了——我需要对检索到的对象进行一些操作，如下所示：

```
$object = [ADSI]'LDAP://CN=Test User,OU=Dept,OU=Users,DC=example,DC=org'
...
$object.Commit() 
```

这工作正常，但我必须使用存储在变量中的专有名称 - 我的测试脚本看起来像这样，但它不起作用：

```
$object = [ADSI]'LDAP://$variable'
...
$object.Commit() 
```

第一次调用 [ADSI] 本身不会导致错误，但任何以下操作都会崩溃并显示消息：

```
The following exception occurred while retrieving member "commit": "The server is not operational.
"
At line:1 char:10
+ $object.commit <<<< ()
+ CategoryInfo          : NotSpecified: (:) [], ExtendedTypeSystemException
+ FullyQualifiedErrorId : CatchFromBaseGetMember 
```

我很确定，参数是以某种错误的方式发送的，但我不知道如何解决它，有人可以帮忙吗？

坦克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T02:26:51.090

尝试：

```
$object = [ADSI]"LDAP://$variable" 
```

单引号不会扩展变量。

# objective-c - NSMutableArray 版本使我的程序崩溃——为什么？

> ID：10771096
> 
> 赞同：0
> 
> 时间：2012-05-27T01:51:14.113
> 
> 标签：objective-c, cocoa, memory-management

在这个问题发生之前，我认为我对内存管理的理解已经足够好了（Mac OS X 10.6）：我有一个带有 NSMutableArray 实例变量的自定义 NSView 子类，但是当我解除分配视图并尝试释放该实例变量时，*有时会*发生 BOOM、EXC_BAD_ACCESS . 当我尝试在不退出程序的情况下关闭文档窗口时会发生这种情况，但由于某种原因，即使在相同的条件下，有时它也可以正常工作。谁能帮我理解这里发生了什么？我的 NSView 子类中的相关代码位：

```
- (id)initWithFrame:(NSRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        rainbow = [[NSMutableArray alloc] initWithObjects:
            // some objects go here, followed by the nil sentinel
            ]
        return self;
    }
    return nil;
} 
```

和 dealloc 方法：

```
- (void)dealloc {
    [super dealloc];
    NSLog(@"Release the rainbow!");
    if (rainbow) {
        [rainbow removeAllObjects]; // EXC_BAD_ACCESS happens here
        [rainbow release];
    }
} 
```

即使我检查了彩虹是否仍然存在，向它发送消息也会导致该段错误。有一个地方使用它：它作为 *info 参数传递给 CGShading 回调函数。以下是该功能的相关位（通常可以正常工作而不会崩溃）：

```
NSMutableArray *colorStops = (NSMutableArray *)info;
[colorStops retain];
/*
    ...
*/
[colorStops release]; 
```

我猜这里有一些关于线程的东西，但我真的不知道。有人有想法么？非常感谢！我重读了内存管理指南；再把这个放在头顶上，我的玻璃桌面就会在我脸上碎裂。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T01:53:02.023

总是做

```
[super dealloc] 
```

在您的 dealloc 方法结束时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T02:49:14.043

除了 Terry 的点 about 之外`[super dealloc]`，该`-removeAllObjects`调用还将向数组中的所有对象发送消息（以释放它们）。如果您过度释放了这些对象中的任何一个，则数组所具有的指针现在可能指向已释放或其他无效空间。

因此，您必须检查数组中所有对象的内存管理。在 Zombies 仪器下运行您的应用程序。进行构建和分析并解决已识别的问题。

# android - 随机音频文件表单资产文件夹

> ID：10771097
> 
> 赞同：1
> 
> 时间：2012-05-27T01:51:39.483
> 
> 标签：android, media-player, random-access

有人可以指出我正确的方向吗？我需要获取随机请求的音频文件。我想我可以通过使用 AssetManager 来做到这一点，然后使用字符串数组作为随机长度的位置。我在 OnClickMethod 处遇到错误。这是带有 LogCat 的代码。

```
public class RandomSoundFormAssetsFolder extends Activity implements
    OnClickListener {
/** Called when the activity is first created. */
MediaPlayer RandomAudioPlayer;
AssetFileDescriptor descriptor;
Button playSound;
String[] filelist;
AssetManager Agetlist;
String MediaFileL;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    try {
        Initialization();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

private void Initialization() throws IOException {
    // TODO Auto-generated method stub
    setContentView(R.layout.main);
    playSound = (Button) findViewById(R.id.myButton);
    playSound.setOnClickListener(this);
    RandomAudioPlayer = new MediaPlayer();
    Agetlist = this.getAssets();
            filelist = Agetlist.list("");

}

public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.myButton:
        OnClickMethod();
        break;

    default:
        break;
    }

}

public class AudioRanActivity extends Activity implements OnClickListener {
/** Called when the activity is first created. */
MediaPlayer RandomAudioPlayer;
AssetFileDescriptor descriptor;
Button playSound;
String[] filelist;
AssetManager Agetlist;
String MediaFileL;
int randomInt;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Initialization();

}

private void Initialization() {
    // TODO Auto-generated method stub
    setContentView(R.layout.main);
    playSound = (Button) findViewById(R.id.button1);
    playSound.setOnClickListener(this);
    RandomAudioPlayer = new MediaPlayer();
    Log.d("In Initialization Method", "Constructor For mp");

    Agetlist = this.getAssets();
    try {
        filelist = Agetlist.list("audio");
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.button1:
        OnClickMethod();
        break;

    default:
        break;
    }

}

private void OnClickMethod() {
    // TODO Auto-generated method stub
    Random randomGenerator = new Random();
    randomInt = randomGenerator.nextInt(filelist.length);
    Log.i("Length: ", String.valueOf(filelist.length));
    Log.i("RanInt: ", String.valueOf(randomInt));

    try {
        MediaFileL = filelist[randomInt];
        Log.i("LengtD: ", MediaFileL);

        descriptor = getAssets().openFd(MediaFileL);
        RandomAudioPlayer.setDataSource(descriptor.getFileDescriptor(),
                descriptor.getStartOffset(), descriptor.getLength());
        descriptor.close();
        RandomAudioPlayer.prepare();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } finally {
        RandomAudioPlayer.start();
        Log.d("In OnClickMethod", "Start mp");
    }
} 
```

}

崩溃日志：

```
05-26 17:52:51.191: W/dalvikvm(1982): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
05-26 17:52:51.282: E/AndroidRuntime(1982): FATAL EXCEPTION: main
05-26 17:52:51.282: E/AndroidRuntime(1982): java.lang.NullPointerException
05-26 17:52:51.282: E/AndroidRuntime(1982):     at sound.stuff.RandomSoundFormAssetsFolder.OnClickMethod(RandomSoundFormAssetsFolder.java:68)
05-26 17:52:51.282: E/AndroidRuntime(1982):     at sound.stuff.RandomSoundFormAssetsFolder.onClick(RandomSoundFormAssetsFolder.java:51)
05-26 17:52:51.282: E/AndroidRuntime(1982):     at android.view.View.performClick(View.java:3511)
05-26 17:52:51.282: E/AndroidRuntime(1982):     at android.view.View$PerformClick.run(View.java:14105)
05-26 17:52:51.282: E/AndroidRuntime(1982):     at android.os.Handler.handleCallback(Handler.java:605)
05-26 17:52:51.282: E/AndroidRuntime(1982):     at android.os.Handler.dispatchMessage(Handler.java:92)
05-26 17:52:51.282: E/AndroidRuntime(1982):     at android.os.Looper.loop(Looper.java:137)
05-26 17:52:51.282: E/AndroidRuntime(1982):     at android.app.ActivityThread.main(ActivityThread.java:4424)
05-26 17:52:51.282: E/AndroidRuntime(1982):     at java.lang.reflect.Method.invokeNative(Native Method)
05-26 17:52:51.282: E/AndroidRuntime(1982):     at java.lang.reflect.Method.invoke(Method.java:511)
05-26 17:52:51.282: E/AndroidRuntime(1982):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-26 17:52:51.282: E/AndroidRuntime(1982):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-26 17:52:51.282: E/AndroidRuntime(1982):     at dalvik.system.NativeStart.main(Native Method) 
```

崩溃日志：

```
05-27 11:50:48.378: W/System.err(2512): java.io.FileNotFoundException: sounds
05-27 11:50:48.418: W/System.err(2512):     at android.content.res.AssetManager.openAssetFd(Native Method)
05-27 11:50:48.418: W/System.err(2512):     at android.content.res.AssetManager.openFd(AssetManager.java:331)
05-27 11:50:48.438: W/System.err(2512):     at sound.stuff.RandomSoundFormAssetsFolder.OnClickMethod(RandomSoundFormAssetsFolder.java:69)
05-27 11:50:48.438: W/System.err(2512):     at sound.stuff.RandomSoundFormAssetsFolder.onClick(RandomSoundFormAssetsFolder.java:53)
05-27 11:50:48.468: W/System.err(2512):     at android.view.View.performClick(View.java:3511)
05-27 11:50:48.468: W/System.err(2512):     at android.view.View.onKeyUp(View.java:6073)
05-27 11:50:48.468: W/System.err(2512):     at android.widget.TextView.onKeyUp(TextView.java:5532)
05-27 11:50:48.488: W/System.err(2512):     at android.view.KeyEvent.dispatch(KeyEvent.java:2575)
05-27 11:50:48.488: W/System.err(2512):     at android.view.View.dispatchKeyEvent(View.java:5500)
05-27 11:50:48.498: W/System.err(2512):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1246)
05-27 11:50:48.498: W/System.err(2512):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1246)
05-27 11:50:48.498: W/System.err(2512):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1246)
05-27 11:50:48.508: W/System.err(2512):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1246)
05-27 11:50:48.518: W/System.err(2512):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchKeyEvent(PhoneWindow.java:1879)
05-27 11:50:48.518: W/System.err(2512):     at com.android.internal.policy.impl.PhoneWindow.superDispatchKeyEvent(PhoneWindow.java:1361)
05-27 11:50:48.518: W/System.err(2512):     at android.app.Activity.dispatchKeyEvent(Activity.java:2324)
05-27 11:50:48.530: W/System.err(2512):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1806)
05-27 11:50:48.538: W/System.err(2512):     at android.view.ViewRootImpl.deliverKeyEventPostIme(ViewRootImpl.java:3327)
05-27 11:50:48.538: W/System.err(2512):     at android.view.ViewRootImpl.handleFinishedEvent(ViewRootImpl.java:3300)
05-27 11:50:48.558: W/System.err(2512):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2460)
05-27 11:50:48.558: W/System.err(2512):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-27 11:50:48.568: W/System.err(2512):     at android.os.Looper.loop(Looper.java:137)
05-27 11:50:48.568: W/System.err(2512):     at android.app.ActivityThread.main(ActivityThread.java:4424)
05-27 11:50:48.578: W/System.err(2512):     at java.lang.reflect.Method.invokeNative(Native Method)
05-27 11:50:48.578: W/System.err(2512):     at java.lang.reflect.Method.invoke(Method.java:511)
05-27 11:50:48.588: W/System.err(2512):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-27 11:50:48.600: W/System.err(2512):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-27 11:50:48.608: W/System.err(2512):     at dalvik.system.NativeStart.main(Native Method)
05-27 11:50:48.608: E/MediaPlayer(2512): start called in state 1
05-27 11:50:48.608: E/MediaPlayer(2512): error (-38, 0)
05-27 11:50:48.648: E/MediaPlayer(2512): Error (-38,0) 
```

我一直在努力尝试调试这个。我一直在更改我的代码并放入一些 Log-Method。字符串数组正在工作，我的长度始终为 14，并且我得到随机位置。所以这一切都有效。她是日志“FileNotFoundException”中的问题，所以文件没有加载，但是当我记录 MediaFileL 时，我得到了一个音频文件名。我使用错了 MediaPlayer 还是 AssetFileDescriptor？这是带有 LogCat 的代码。

```
public class AudioRanActivity extends Activity implements OnClickListener {
/** Called when the activity is first created. */
MediaPlayer RandomAudioPlayer;
AssetFileDescriptor descriptor;
Button playSound;
String[] filelist;
AssetManager Agetlist;
String MediaFileL;
int randomInt;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Initialization();

}

private void Initialization() {
    // TODO Auto-generated method stub
    setContentView(R.layout.main);
    playSound = (Button) findViewById(R.id.button1);
    playSound.setOnClickListener(this);

    RandomAudioPlayer = new MediaPlayer();
    Log.d("In Initialization method", "RandomAudioPlayer");

    Agetlist = this.getAssets();
    Log.d("TAGAgetlist", "Agetlist");
    try {
        filelist = Agetlist.list("audio");
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.button1:
        OnClickMethod();
        break;

    default:
        break;
    }

}

private void OnClickMethod() {
    // TODO Auto-generated method stub
    Random randomGenerator = new Random();
    randomInt = randomGenerator.nextInt(filelist.length);
    Log.i("Lengt: ", String.valueOf(filelist.length));
    Log.i("RanInt: ", String.valueOf(randomInt));

    try {
        MediaFileL = filelist[randomInt];
        Log.i("LengtD: ", MediaFileL);

        descriptor = getAssets().openFd(MediaFileL);
        RandomAudioPlayer.setDataSource(descriptor.getFileDescriptor(),
                descriptor.getStartOffset(), descriptor.getLength());
        descriptor.close();
        RandomAudioPlayer.prepare();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } finally {
        RandomAudioPlayer.start();
        Log.d("RanPlaystart", "RandomAudio");
    }
    Initialization();
} 
```

}

日志：

```
05-28 10:12:31.175: D/In Initialization Method(792): Constructor For mp
05-28 10:13:07.606: I/Lengt:(792): 14
05-28 10:13:07.606: I/RanInt:(792): 3
05-28 10:13:07.634: I/LengtD:(792): good_job.mp3
05-28 10:13:07.655: W/System.err(792): java.io.FileNotFoundException: good_job.mp3
05-28 10:13:07.664: W/System.err(792):  at  android.content.res.AssetManager.openAssetFd(Native Method)
05-28 10:13:07.664: W/System.err(792):  at android.content.res.AssetManager.openFd(AssetManager.java:331)
05-28 10:13:07.675: W/System.err(792):  at Audio.stuff.AudioRanActivity.OnClickMethod(AudioRanActivity.java:75)
05-28 10:13:07.675: W/System.err(792):  at Audio.stuff.AudioRanActivity.onClick(AudioRanActivity.java:55)
05-28 10:13:07.684: W/System.err(792):  at android.view.View.performClick(View.java:3511)
05-28 10:13:07.684: W/System.err(792):  at android.view.View$PerformClick.run(View.java:14105)
05-28 10:13:07.684: W/System.err(792):  at android.os.Handler.handleCallback(Handler.java:605)
05-28 10:13:07.695: W/System.err(792):  at android.os.Handler.dispatchMessage(Handler.java:92)
05-28 10:13:07.704: W/System.err(792):  at android.os.Looper.loop(Looper.java:137)
05-28 10:13:07.716: W/System.err(792):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-28 10:13:07.716: W/System.err(792):  at java.lang.reflect.Method.invokeNative(Native Method)
05-28 10:13:07.716: W/System.err(792):  at java.lang.reflect.Method.invoke(Method.java:511)
05-28 10:13:07.724: W/System.err(792):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-28 10:13:07.724: W/System.err(792):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-28 10:13:07.734: W/System.err(792):  at dalvik.system.NativeStart.main(Native Method)
05-28 10:13:07.734: E/MediaPlayer(792): start called in state 1
05-28 10:13:07.734: E/MediaPlayer(792): error (-38, 0)
05-28 10:13:07.745: D/In OnClickMethod(792): Start mp
05-28 10:13:07.754: E/MediaPlayer(792): Error (-38,0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-11T09:15:11.890

这是一个清晰而通用的方法：

```
private static String getRandomMediaFilePath(Context context, String assetSpecificFolderPath)
{
    AssetManager assetManager;
    String[] fileList;
    String mediaFileName;
    String mediaFilePath;

    try
    {
        assetManager = context.getAssets();
        fileList = assetManager.list(assetSpecificFolderPath);
        mediaFileName = fileList[getRandomNumber(0,fileList.length - 1)];
        mediaFilePath = assetSpecificFolderPath + "/" + mediaFileName;
    }
    catch (IOException e)
    {
        e.printStackTrace();
    }

    return mediaFilePath;
}

private static int getRandomNumber(int min, int max)
{
    // Usually this should be a field rather than a method variable so
    // that it is not re-seeded every call.
    Random random = new Random();

    // nextInt is normally exclusive of the top value,
    // so add 1 to make it inclusive
    int randomNum = random.nextInt((max - min) + 1) + min;

    return randomNum;
} 
```

用法：

```
getRandomMediaFilePath(context, "MediaResources/Sounds") 
```

虽然资产文件夹包含文件夹“MediaResources/Sounds”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T03:04:57.433

采用

```
RandomAudioPlayer = new MediaPlayer();
 Agetlist = this.getAssets();
filelist = Agetlist.list(""); 
```

因为你的 String[] 文件列表；是空的。所以首先从资产中获取文件列表中的所有文件列表，然后在您的 OnClickMethod() 中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T17:51:11.430

对于那些可能有帮助的人。它是这样工作的。我需要它来添加我的子文件夹字符串“audio/”+RandomAudio

这是我的错误：

```
descriptor = getAssets().openFd("audio/" + MediaFileL);

public class AudioRanActivity extends Activity implements OnClickListener {
MediaPlayer RandomAudioPlayer;
AssetFileDescriptor descriptor;
Button playSound;
String[] filelist;
AssetManager Agetlist;
String MediaFileL;
int randomInt;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Initialization();

}

private void Initialization() {
    setContentView(R.layout.main);
    // Geting audio-files
    Agetlist = this.getAssets();
    try {
        // Constructs string-arry from assets/audio folder
        filelist = Agetlist.list("audio");
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    playSound = (Button) findViewById(R.id.button1);
    playSound.setOnClickListener(this);

    // MediaPlayer Constructor
    RandomAudioPlayer = new MediaPlayer();
    Log.d("In OnClickMethod Method TagLog", "Constructor For mp");

}

public void onClick(View v) {
    switch (v.getId()) {
    case R.id.button1:
        OnClickMethod();
        break;

    default:
        break;
    }

}

private void OnClickMethod() {
    // Random-factory
    Random randomGenerator = new Random();

    // Gets int file-list length
    randomInt = randomGenerator.nextInt(filelist.length);
    Log.i("Length Log: ", String.valueOf(filelist.length));
    Log.i("RanInt Log: ", String.valueOf(randomInt));
    try {

        // One Audio-file putIn string
        // InputRaw = openFileInput(name)
        MediaFileL = filelist[randomInt];
        Log.i("What file is it? Log: ", MediaFileL);

        // AssetFileDescriptor open audio-file
        descriptor = getAssets().openFd("audio/" + MediaFileL);
        /*
         * Parameters fd: the FileDescriptor for the file you want to play
         * offset: the offset into the file where the data to be played
         * starts, in bytes length: the length in bytes of the data to be
         * played
         */
        RandomAudioPlayer.setDataSource(descriptor.getFileDescriptor(),
                descriptor.getStartOffset(), descriptor.getLength());
        descriptor.close();
        RandomAudioPlayer.prepare();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    RandomAudioPlayer.start();
    Log.d("In OnClickMethod TagLog", "Start mp");
} 
```

}

# java - 在新行上显示每个元素的数组列表？

> ID：10771106
> 
> 赞同：0
> 
> 时间：2012-05-27T01:53:43.077
> 
> 标签：java, swing, arraylist, jtextarea

代码：

```
ArrayList <Integer> marks = new ArrayList();

private void addButtonActionPerformed(java.awt.event.ActionEvent evt) {
    Collections.addAll(marks, (Integer.parseInt(markInput.getText())));
    marks.add(Integer.parseInt(markInput.getText()));
    for (int j =0; j < marks.size(); j++) {
        markdisplayTextArea.setText(Integer.toString(marks.get(j)));
} 
```

当用户键入并按下“添加”按钮时，该程序应该在 JTextArea 的新行中显示每个数字。

它显示每个数字，但一次只显示一个。我希望输入的每个数字都以升序显示在新行上。因此，如果用户输入了 4 个数字，例如 78、92、54 和 21，我希望它们显示如下：

21
54
78
92

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T01:59:38.293

您正在重置代码最后一个循环中每个循环中的文本。

只需编写一个循环将数字连接成一个字符串（`\n`在每个数字后添加），然后将文本设置`JTextArea`为连接结果。由于`JTextArea`支持多行文本，它应该正确显示。

```
StringBuffer text = new StringBuffer();
for (Integer mark: marks) {
  text.append(mark.toString()).append('\n');
}
markdisplayTextArea.setText(text.toString()); 
```

# list - Lisp：列表与 S 表达式

> ID：10771107
> 
> 赞同：33
> 
> 时间：2012-05-27T01:54:06.867
> 
> 标签：list, lisp, s-expression

我是 Lisp 的新手。我遇到了 2 个术语“列表”和“S 表达式”。我只是无法区分它们。它们只是 Lisp 中的同义词吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-27T02:09:09.047

首先，不是所有的 S 表达式都代表列表；表示一个裸原子的表达式，例如`foobar`，也被认为是一个 S 表达式。与“cons cell”语法一样，`(car . cons)`当“cons”部分本身不是另一个列表（或nil）时使用。更熟悉的列表表达式，例如`(a b c d)`，只是嵌套 cons 单元链的语法糖；该示例扩展为`(a . (b . (c . (d . nil))))`.

其次，术语“S-表达式”指的是*语法*- `(items like this (possibly nested))`。这样的 S 表达式是列表在 Lisp 源代码中的*表示*，但从技术上讲，它本身并不是列表。这种区别与十进制数字序列与其数值之间的区别，或者引号内的字符序列与结果字符串之间的区别相同。

这可能是一个过于技术性的区别。程序员经常引用值的文字表示，就好像它们就是值本身一样。但是对于 Lisp 和列表，事情变得有点棘手，因为Lisp 程序中的*所有内容*在技术上都是一个列表。

例如，考虑这个表达式：

`(+ 1 2)`

上面是一个简单的 S 表达式，它表示一个平面列表，由原子`+`、`1`和组成`2`。

然而，在 Lisp 程序中，这样的列表将被解释为`+`以 1 和 2 作为参数的函数调用。（请注意，如此解释的是*list*，而不是*S-expression*；评估者是已由读者预先解析的列表，而不是源代码文本。）

因此，虽然上面的 S 表达式表示一个列表，但在 Lisp 程序的上下文中它很少被*称为*“列表”。除非讨论宏，或者读者的内部工作，或者因为其他代码生成或解析上下文而进行元语法讨论，否则典型的 Lisp 程序员会将上述内容视为数字表达式。

另一方面，以下任何 S 表达式都可能*被*称为“列表”，因为将它们评估为 Lisp 代码会生成由上述文字 S 表达式表示的列表作为运行时值：

```
'(+ 1 2)
(quote (+ 1 2))
(list '+ 1 2) 
```

当然，代码和数据的等价性是 Lisp 最酷的事情之一，所以区别是流动的。但我的观点是，虽然以上所有都是 S 表达式和列表，但在随意的 Lisp 语言中，只有一些会被称为“列表”。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-27T04:55:14.573

**S-表达式是数据的一种*表示法*。**

从历史上看，*s 表达式*（*符号表达式*的缩写）被描述为：

*   *像`FOO`和这样的*符号*`BAR`*
**   *以 s 表达式作为其第一个和第二个元素的*cons 单元格：*`(` *表达式-1* `.` *表达式-2* `)`***   列表终止符号`NIL`*   以及编写列表的约定：`(` `A` `.` `(` `B` `.` `NIL` `)` `)`更简单地写为列表`(A B)`**

 **另请注意，历史上程序文本的编写方式不同。函数的一个例子`ASSOC`。

```
assoc[x;y] =
   eq[caar[y];x] -> cadar[y];
   T -> assoc[x;cdr[y]] 
```

历史上还存在从这些 m 表达式（*元表达式*的缩写）到 s 表达式的映射。今天，大多数 Lisp 程序代码都是使用 s 表达式编写的。

此处对此进行了描述：[McCarthy, Recursive Functions of Symbolic Expressions](http://www-formal.stanford.edu/jmc/recursive/node3.html)

如今，在像 Common Lisp 这样的 Lisp 编程语言中，*s 表达式*有更多的语法并且可以编码更多的数据类型：

*   符号：`symbol123`,`|This is a symbol with spaces|`
*   数字：`123`, `1.0`, `1/3`, ...
*   字符串：`"This is a string"`
*   人物：`#\a`,`#\space`
*   矢量图：`#(a b c)`
*   缺点和列表：`( a . b )`,`(a b c)`
*   评论： `; this is a comment`,`#| this is a comment |#`

和更多。

**列表**

列表是一种*数据结构*。它由 cons 单元格和列表结束标记组成。列表在 Lisp 中具有作为 s 表达式中的列表的*符号。*您可以对列表使用其他一些表示法，但在 Lisp 中，人们已经决定使用 s-expression 语法来编写它们。

**旁注：程序和表格**

在像 Common Lisp 这样的编程语言中，编程语言的表达式不是文本，而是数据！这与许多其他编程语言不同。编程语言 Common Lisp 中的表达式称为`Lisp forms`.

例如，函数调用是 Lisp 数据，其中调用是一个列表，其中函数符号作为它的第一个元素，下一个元素是它的参数。

我们可以把它写成`(sin 3.0)`。但它确实是数据。我们也可以构建数据。

评估 Lisp 表单的函数被调用`EVAL`，它接受 Lisp 数据，而不是程序文本或程序文本字符串。因此，您可以使用返回 Lisp 数据的 Lisp 函数构建程序：`(EVAL (LIST 'SIN 3.0))`计算结果为`0.14112`.

由于 Lisp 表单具有数据表示，它们通常使用 Lisp 的外部数据表示来编写 - 这是什么？- s 表达式！

它是 s 表达式。作为 Lisp 数据的 Lisp 形式作为 s 表达式在外部写入。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-27T02:19:35.497

您应该首先了解 Lisp 的主要功能 - 程序可以作为数据进行操作。与其他语言（如 C 或 Java）不同，您使用特殊语法（`{`、、、、`}`等）编写程序`class`，`define`在 Lisp 中，您将代码编写为（嵌套）列表（顺便说一句，这允许直接表达[抽象语法树](http://en.wikipedia.org/wiki/Abstract_syntax_tree)）。再说一遍：你编写的程序看起来就像语言的数据结构。

当你**把它说成数据**时，你称之为**“列表”**，但当你**谈到程序代码**时，你最好使用术语**“s-expression”**。因此，从技术上讲，它们是相似的，但在不同的上下文中使用。混合这些术语的唯一真正地方是元编程（通常与宏一起使用）。

另请注意，s 表达式也可能包含唯一的**原子**（如数字、字符串等）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-03-15T21:34:14.087

S 表达式的简单定义是

```
(define S-expression?
    (λ (object)
        (or (atom? object) (list? object))))

;; Where atom? is:

(define atom?
  (λ (object) 
    (and (not (pair? object)) (not (null? object)))))

;; And list? is:

(define list? (λ (object)
  (let loop ((l1 object) (l2 object))
    (if (pair? l1)
        (let ((l1 (cdr l1)))
          (cond ((eq? l1 l2) #f)
                ((pair? l1) (loop (cdr l1) (cdr l2)))
                (else (null? l1))))
        (null? l1))))) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T16:05:11.010

两者的写法类似：（blah blah blah），可能是嵌套的。有一个区别 - 列表以撇号为前缀。

关于评价：

*   S 表达式返回一些结果（可能是原子或列表或 nil 或其他）
*   列表返回列表

如果需要，我们可以将列表转换为 s-exp，反之亦然。

*   (eval '(blah blah blah)) => list 被视为 s-exp 并返回结果。
*   (quote (blah blah blah)) => sexp 被转换为列表并且列表返回而不评估

**国际会计准则：**

*   如果将 List 视为数据，则称为 List，如果将其视为代码，则称为 s-exp。**

# apache - 使用 mod_rewrite 重写两级 url

> ID：10771113
> 
> 赞同：-1
> 
> 时间：2012-05-27T01:55:21.387
> 
> 标签：apache, .htaccess, mod-rewrite

我需要这样`index.php?page=home`的东西`/home`

和

`index.php?page=products&cat=chairs`成为`/products/chairs`

实现此目的的 mod_rewrite 规则是什么？

## 已编辑

除了主页，我还有其他页面，所以我的 .htaccess 文件的全部内容现在是

```
RewriteEngine On
RewriteRule ^([^/\.]+)/?$ index.php?page=$1 [L]
RewriteRule   ^/products(:/([^/]+))?   /index.php?page=products&cat=$1 [L] 
```

但是当我导航到`/products/chairs`我得到一个“找不到对象”错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T02:58:22.993

```
RewriteEngine on
RewriteRule   ^/home/?$                /index.php?page=home [L]
RewriteRule   ^/products(:/([^/]+))?   /index.php?page=products&cat=$1 [L] 
```

它重写了`/home`and `/home/`，两者`/products`and `/products/`（您没有指定您的预期行为）；请注意，`cat`在这些情况下您将获得一个空参数。

编辑：这是一个经过测试的 .htaccess，留下 R=301 以查看重写结果，.htaccess 和 index.php 在同一目录中（在我的情况下为 webroot）：

```
RewriteEngine on
RewriteRule ^([^/\.]+)/?$          index.php?page=$1 [R=301,L]
RewriteRule ^products/([^/]+)?/?   index.php?page=products&cat=$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T04:04:06.083

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+index\.php\?page=(products)&cat=([^\s]+) [NC]
RewriteRule ^ %1/%2 [R=302,L]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+index\.php\?page=(home)\s [NC]
RewriteRule ^ %1 [R=302,L]

RewriteRule   ^(products)/([^/]+)/?$ index.php?page=(products)&cat=$1 [L,QSA,NC]

RewriteRule   ^(home)/?$ index.php?page=$1 [L,QSA,NC] 
```

在您确认它对您正常工作后更改`R=302`为。`R=301`

# iphone - 默认 iPhone HTML5 音频播放器覆盖移动主题宽度

> ID：10771114
> 
> 赞同：1
> 
> 时间：2012-05-27T01:55:47.793
> 
> 标签：iphone, css, html5-audio

我正在为我写的音乐建立一个静态博客。我的音乐使用 HTML5 音频和每个浏览器的默认音频控件播放。这在桌面上运行良好，但是当在 iPhone 浏览器上显示时，移动主题被覆盖并且宽度被增加以使页面比 CSS 更宽。音频播放器元素也未对齐。

![iPhone 屏幕宽度过大](../Images/cf1424d76a48be825a70b8ca368b3e2e.png)

如果我查看没有音频播放器的博客文章，那么它看起来是正确的，如下所示：

![iPhone屏幕宽度正确](../Images/46e7f7f58e941ba619cb7386f53c2a6a.png)

该网站位于，`http://108.171.179.41/`因为我还没有从我的旧博客迁移 DNS 记录。将来它将在 danielcompton.net

有谁知道为什么我的网站在 iPhone 上查看时显示奇怪？

# javascript - JavaScript 变量少于 4 个字符

> ID：10771117
> 
> 赞同：4
> 
> 时间：2012-05-27T01:56:19.993
> 
> 标签：javascript, variables

我有“名称”JavaScript 变量。如果变量“名称”包含少于 4 个字符，我想执行行：`msg('name','Your name must contain minimum 4 characters.')';` 我尝试过类似的方法，但它解释为数学。任何的想法？谢谢你。

```
if(name < 4 ) {
  msg('name','Your name must contain minimum 4 characters.');
  return false;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-27T01:58:37.577

```
if (name.length < 4) {
   ...
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-27T01:58:29.733

您可能想检查*`length`*字符串的，而不是字符串本身的数值：

```
if(name.length < 4) {
    // ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-27T02:19:13.490

```
if(name.length < 4) {
    //Do something
} 
```

您必须检查`length`变量的。

## ![有趣的事实：](../Images/b12bc08d69df4fafee6590bb15bab5ca.png)

*   `length`也可以用来检查一个长度`Array`
*   `\n`（新行）也算作一个字符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T13:05:50.690

# java - FileOutputStream 循环写入字节，但没有数据写入？

> ID：10771118
> 
> 赞同：0
> 
> 时间：2012-05-27T01:56:23.497
> 
> 标签：java, file-io, fileoutputstream

列出我的程序片段如下

```
public class InStream {

    static FileOutputStream file=null;
    static {
        try {
            file = new FileOutputStream("deo.txt");
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }
    }

    public static void main(String[] args) {

        try {
                   //when i try to replace below infinite loop, 
                   //it is also not able to output my String
                    //while(ture)
                        or
                     //for(;;)

            for(int i=0;i<100000;i++){
                file.write("AB ".getBytes());
            }

                 //file.flush(); 

            file.close();

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

} 
```

运行这个程序 -> 打开 deo.txt -> 这个文件中没有数据

但是当我评论for循环时，只测试下面的片段代码：

```
 try {
            file.write("AB ".getBytes());
            file.close();
        } catch (Exception e) {
            e.printStackTrace();
        } 
```

现在我可以在文件中看到“AB”字符串。这么奇怪....

任何人都可以帮我一个忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T02:28:29.903

我测试了你的代码。它有效。但是对于 deo.txt。如果它大约是 293k，您可以检查它的大小。如果您使用 Eclipse 文本编辑器打开它，它不会显示任何内容。但您可以使用其他系统编辑器查看它，例如notepad++。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T02:07:16.150

您的代码中没有错误。必须生成包含 AB AB 的文件“deo.txt”......

# ruby-on-rails - 翻译 Rails 设计错误消息

> ID：10771129
> 
> 赞同：2
> 
> 时间：2012-05-27T01:58:39.057
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, devise

我正在使用 devise gem 在我的 Ruby On Rails 应用程序中实现身份验证。有时会显示错误消息，例如：

> 禁止从该用户保存健康错误：密码太短（最少 6 个字符）

将这些信息翻译成另一种语言的最佳方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T03:39:20.007

转到`config/locales`并复制`devise.en.yml`，为文件命名，如 devise.other_language_initials.yml。然后添加您自己的翻译。

有关如何翻译您的申请的更多信息，请访问[此处](http://guides.rubyonrails.org/i18n.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-26T22:22:52.833

最快的方法是将翻译文件下载为您想要的语言。[**您可以在此链接**](https://github.com/plataformatec/devise/wiki/I18n)中找到更多信息。

你会发现有一堆不同语言的文件，用于设计 Flash 通知，你可以在**config/locales**下下载并添加到你的应用程序中。

希望对你有帮助！:)

# jquery - Firefox 中的 JQuery 动画口吃

> ID：10771131
> 
> 赞同：3
> 
> 时间：2012-05-27T01:58:49.063
> 
> 标签：jquery, firefox, animation

我目前正在制作我的第一个网站，并且正在使用 JQuery 制作动画。动画在 IE 中非常流畅，但在 Firefox 中则严重卡顿。网址是[www.chiahaoyang.com](http://www.chiahaoyang.com)。我花了无数个小时试图将其修复为不可用。谢谢！

**UPDATE1**：JQuery 加载/动画代码是：

```
 function ajaxLoad(input){
        contentBox.fadeIn();
        content.fadeOut("medium",function() {
            content.load("ajax_pages/"+input+".html", function(){
                var contentHeight = content.height();
                if(contentHeight > screen.height*0.66){
                    contentBox.animate({height: screen.height*0.66},"slow",function(){
                        content.delay(500).fadeIn("slow");
                    });
                } else {
                    contentBox.animate({height: contentHeight},"slow",function(){
                        content.delay(500).fadeIn("slow");
                    });             
                }
            });
        });
    }; 
```

content 是我加载 ajax 页面的 div。contentBox 是包含内容的 div

**更新 2**： 不稳定的来源是一些 css3 属性：

```
-webkit-box-shadow: 0 0 4px rgba(0, 0, 0, 0.2), inset 0 0 50px rgba(0, 0, 0, 0.15);  
-moz-box-shadow: 0 0 4px rgba(0, 0, 0, 0.2), inset 0 0 50px rgba(0, 0, 0, 0.15);
box-shadow: 0 0 5px rgba(0, 0, 0, 0.2), inset 0 0 50px rgba(0, 0, 0, 0.15); 
```

这些增强功能给浏览器带来了更多负载是有道理的，但是有没有办法绕过它让 Firefox 像 IE 一样流畅地呈现它？

**更新 3**：好的，我刚刚将上面的代码替换为：

```
-webkit-box-shadow: 0 3px 3px rgba(0, 0, 0, 0.1), inset 0 0 5px rgba(0, 0, 0, 0.15); 
-moz-box-shadow: 0 3px 3px rgba(0, 0, 0, 0.1), inset 0 0 5px rgba(0, 0, 0, 0.15); 
box-shadow: 0 3px 3px rgba(0, 0, 0, 0.1), inset 0 0 5px rgba(0, 0, 0, 0.15); 
```

现在流畅了很多...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:05:20.473

这个问题对我来说很烦人，我也在设计我的网站，我必须降低 box-shadow 效果才能让 firefox 正常运行，更不用说 jquery 元素了......如果有这些元素甚至无法运行太多的盒子阴影效果。如果我使用 IE，我不明白为什么这不会发生，我的网站在上面运行流畅。显然这里发生了一些事情，请有人给我们一些帮助:) 谢谢。

# c++ - 拦截应用程序对 DLL 的函数调用

> ID：10771134
> 
> 赞同：3
> 
> 时间：2012-05-27T01:58:54.470
> 
> 标签：c++, function, dll

场景如下：

假设我有这个依赖于这个库“library.dll”的应用程序“App”。我想知道“App”在运行时调用的函数。假设我无权访问“App”或“library.dll”的源代码，但我知道存在的每个函数的名称和参数都是“library.dll”。有什么办法可以找出“App”正在调用“library.dll”中的哪些函数？

我在stackoverflow中看到了类似的问题： [How to intercept dll method calls?](https://stackoverflow.com/questions/220515/how-to-intercept-dll-method-calls)

我的 Ates Goral 先生的回答让我很感兴趣，他提到编写一个 wrapperDLL 将函数调用转发到真正的 DLL。我希望有人可以为我提供一些关于如何实现这一点的见解，或者指出我可以在哪里获得有关此事的信息。

我最感兴趣的两部分是让我的应用程序加载我的 .dll 以及如何将函数实际转发到原始的“library.dll”

谢谢你

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-27T02:23:14.643

包装 DLL 完美运行 - 以下是它的工作原理：

让我们假设，`library.dll`导出`int somefunct(int i, void* o)`- 您现在创建自己的 DLL，类似于

```
#include <windows.h>

//Declare this for every function prototype
typedef int (*int_f_int_pvoid)(int,void*);

//Declare this for every function
int_f_int_pvoid lib_somefunct

//this snipplet goes into dllmain
...
HINSTANCE hlibdll = LoadLibrary("X:\PATH\TO\renamed_library.dll");
//For every function
lib_somefunct=(int_f_int_pvoid)GetProcAddress(hlibdll,"somefunct");
...

//Again for every function    
int somefunct(int i, void* o)
{
    //Log the function call and parameters
    //...

    //Call library.dll
    int result=lib_somefunct(i, o);

    //Log the result 
    //...

    return result;
} 
```

导出您的函数，`library.dll`在将原始文件重命名为后命名生成的 DLL`renamed_library.dll`

现在目标 EXE 将加载 (your) `library.dll`，而后者又将加载（原始的，但已重命名）`renamed_library.dll`- 每当目标程序调用一个函数时，它都会运行您的登录代码。

警告：您的 traget EXE 可能是多线程的，因此请准备好拥有线程安全的日志记录机制。

我已成功使用此方法调试了一个奇怪的 MAPI 问题。

# http - 为静态资产设置无 cookie 域

> ID：10771140
> 
> 赞同：1
> 
> 时间：2012-05-27T02:00:29.700
> 
> 标签：http, cookies, subdomain, assets

我有一个网络应用程序，它使用了几个 cookie，每个 cookie 都具有域属性：“.vibecompass.com”

cookie 在多个子域之间共享（de.vibe.... & es.vibe... 等）

我正在从这个子域加载我的所有静态资产：“www.vibecompass.com” 我这样做主要是因为我使用 cloudflare 来自动缩小和 gzip（加上充当 CDN）我的 js 和 css 文件。但是，当然，我的会话 cookie 会随每个效率低下的请求一起发送。

将具有以下域的 cookie：“.vibecompass.com”

由浏览器发送 http 请求到：“staticassets.www.vibecompass.com”

这比在我的情况下使用不同的顶级域名要方便得多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T20:51:54.987

正如[这里](http://en.wikipedia.org/wiki/HTTP_cookie#Domain_and_Path)所解释的，cookie 的域属性也适用于其子域，因此`'.vibecompass.com'`将适用于“ **www** .vibecompass.com”以及“ **staticassets.www** .vibecompass.com”。

我知道您说您没有新顶级域的选项，但是您可以为静态内容设置“**静态**.vibecompass.com”吗？然后，您可以仅将 cookie 应用于“ **www** .vibecompass.com”子域。

如果这不是一个选项，您可以尝试使用路径字段。您必须将所有动态内容（网页）放在他们自己的目录中，例如“www.vibecompass.com/site/ **”**，然后您可以让您的 cookie 仅应用于该目录（域：`'www.vibecompass.com'`、路径：）`'/site'`。

# android - Android 年龄验证活动

> ID：10771141
> 
> 赞同：-2
> 
> 时间：2012-05-27T02:00:30.477
> 
> 标签：android, android-activity

年龄验证活动将使用什么？我该怎么做？我从来没有想过这个想法，我不知道从哪里开始......任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T04:00:43.070

询问并检查信用卡号码。

# iphone - iOS：Segues vs IBAction？

> ID：10771142
> 
> 赞同：0
> 
> 时间：2012-05-27T02:00:50.793
> 
> 标签：iphone, ios

我刚刚开始学习 iPhone 开发，而且使用 Story Boards 的资源似乎很少。

我有两个视图控制器，ActionViewController 和 ActionDetailViewController。AVC 列出用户已提交的操作，而 ADVC 显示该特定操作的详细信息。

AVC 有一个“+”按钮来添加一个新的动作，而 AVDC 有一个“完成”和“取消”按钮。

我真的很喜欢使用故事板，因为它们是可视化应用程序的绝佳方式。但是，我发现使用 segues 在两个屏幕之间快速转换会在视觉上变得复杂。![在此处输入图像描述](../Images/80a0c21ce73279ba5bc2165e62f73f7b.png)

有人可以启发我这样做的“典型”方式是什么吗？我真的对每个动作都有一个新的转场吗？

我也尝试过使用 IBActions。但是，在 AVDC，我无法通过

[self.presentingViewControllerdismissViewControllerAnimated:YES 完成:nil];

有任何想法吗/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T11:26:38.747

我要做的是设置一个从 AVC ViewController 到 ADVC 的 Segue。然后当你想要执行 segue 调用时

```
[self performSegueWithIdentifier:@"nameOfSegueIdentifier" sender:self]; 
```

然后重写下面的委托方法来设置ADVC

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
```

请注意，您可以使用

```
[segue destinationViewController] 
```

获取指向 ADVC 的指针，以便在将其推送到屏幕之前对其进行操作。

希望这可以帮助

# macos - NSOutlineView 的子类 NSTableRowView

> ID：10771144
> 
> 赞同：4
> 
> 时间：2012-05-27T02:00:58.637
> 
> 标签：macos, nstableview, nsoutlineview

如果你有一个 tableView 并且想使用 NSTableRowView 的子类，你可以使用委托函数 - (NSTableRowView *)tableView:(NSTableView *)tableView rowViewForRow:(NSInteger)row。关于如何使用 NSOutlineView（没有子类化 NSOutlineView）的任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-27T03:03:58.467

NSOutlineView 有这个委托方法：

*   (NSTableRowView *)outlineView:(NSOutlineView *)outlineView rowViewForItem:(id)item

这对于大纲视图具有相同的目的。我在 Xcode 的文档中没有看到这种方法，但它是在 MacOSX10.7.sdk 的 NSOutlineView.h 中声明的

# jquery - 无法绑定到 Rails 3.1 和 JQuery 中 select_tag 上的 ajax 事件

> ID：10771150
> 
> 赞同：1
> 
> 时间：2012-05-27T02:02:38.573
> 
> 标签：jquery, ruby-on-rails, ajax, events

Rails UJS 遇到问题并绑定到 ajax 事件

我有一些 JQuery：

```
$(document).ready(function() {  
    $("#MySelect").bind('ajax:beforeSend', function() { 
      alert('bread crumb');
   });       
 }); 
```

和视图中的选择标签：

```
< % = select_tag "MySelect", options_for_select(controller.get_Mylist), "data-remote" => true, "data-url" => "/update_my_list", "data-type" => :json % > 
```

我无法弄清楚为什么我的 ajax 事件没有被捕获。如果我只是将绑定项从“ajax:beforeSend”更改为“更改”，我可以捕获此选择标记的更改事件。

我知道 ajax 请求被触发了，因为我可以在日志中看到它。表示它对 update_my_list 方法的响应为 200，效果很好。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T10:07:57.867

请见谅。。

我相信我与大家分享的代码片段很好。正是我没有展示的东西干扰了我希望它的工作方式。

我想在迁移到 Rails 3.1 之后，我把它留在了周围：

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript" charset="utf-8"></script>

原来删除它解决了这个问题。一定是冲突:)

# c++ - C++ 映射迭代和堆栈损坏

> ID：10771152
> 
> 赞同：2
> 
> 时间：2012-05-27T02:03:44.550
> 
> 标签：c++, visual-c++, memory, map, corruption

我正在尝试使用地图系统来存储和更新聊天服务器的数据。该应用程序是多线程的，并使用锁定系统来防止多个线程访问数据。

问题是这样的：当从地图中单独删除客户端时，没关系。但是，当我尝试调用多个关闭时，它会在内存中留下一些。如果我在地图上的任何时候调用 ::clear() ，它会导致调试断言错误，出现“迭代器不兼容”或类似错误。该代码将在第一次工作（使用 80 多个连接的控制台作为测试进行测试），但由于它留下了块，将无法再次工作。我已经尝试过研究方法，并且我编写了系统来停止代码执行，直到每个进程完成。到目前为止，我感谢任何帮助，并附上了相关的代码片段。

```
//portion of server code that handles shutting down
DWORD WINAPI runserver(void *params) {  
    runserverPARAMS *p = (runserverPARAMS*)params;  
    /*Server stuff*/                            

    serverquit = 0; 
    //client based cleanup
    vector<int> tokill;
    map<int,int>::iterator it = clientsockets.begin();

    while(it != clientsockets.end()) {      
        tokill.push_back(it->first);
        ++it;
    }
    for(;;) {
        for each (int x in tokill) {
            clientquit[x] = 1;
            while(clientoffline[x] != 1) {
                //haulting execution until thread has terminated
            }
            destoryclient(x);
        }
    }
    //client thread based cleanup complete.
    return 0;
}

//clientioprelim
DWORD WINAPI clientioprelim(void* params) {
    CLIENTthreadparams *inparams = (CLIENTthreadparams *)params;
    /*Socket stuff*/
    for(;;) {       
        /**/
        }
        else {
            if(clientquit[inparams->clientid] == 1)
                break;
        }
    }
    clientoffline[inparams->clientid] = 1;
    return 0;
}

int LOCKED; //exported as extern via libraries.h so it's visible to other source files

void destoryclient(int clientid) {
    for(;;) {
        if(LOCKED == 0) {
            LOCKED = 1;         
            shutdown(clientsockets[clientid], 2);
            closesocket(clientsockets[clientid]);
            if((clientsockets.count(clientid) != 0) && (clientsockets.find(clientid) != clientsockets.end()))
                clientsockets.erase(clientsockets.find(clientid));                  
            if((clientname.count(clientid) != 0) && (clientname.find(clientid) != clientname.end()))
                clientname.erase(clientname.find(clientid));
            if((clientusername.count(clientid) != 0) && (clientusername.find(clientid) != clientusername.end()))
                clientusername.erase(clientusername.find(clientid));
            if((clientaddr.count(clientid) != 0) && (clientaddr.find(clientid) != clientaddr.end()))
                clientaddr.erase(clientusername.find(clientid));
            if((clientcontacts.count(clientid) != 0) && (clientcontacts.find(clientid) != clientcontacts.end())) 
                clientcontacts.erase(clientcontacts.find(clientid));
            if((clientquit.count(clientid) != 0) && (clientquit.find(clientid) != clientquit.end()))
                clientquit.erase(clientquit.find(clientid));    
            if((clientthreads.count(clientid) != 0) && (clientthreads.find(clientid) != clientthreads.end())) 
                clientthreads.erase(clientthreads.find(clientid));
            LOCKED = 0;
            break;          
        }
    }
    return;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T02:28:58.647

你真的使用`int`for 锁定还是只是代码的简化？如果您真的使用`int`: 这将不起作用，并且可以同时输入两次（或更多）关键部分，如果两个线程在一个分配给它之前检查变量（简化）。请参阅[Wikipedia 中的互斥锁以](http://en.wikipedia.org/wiki/Mutual_exclusion)供参考。您可以使用 windows 提供的某种互斥锁，也可以使用[boost 线程](http://www.boost.org/doc/libs/1_49_0/doc/html/thread/synchronization.html)而不是`int`.

# java - Solaris 依赖行者？

> ID：10771153
> 
> 赞同：0
> 
> 时间：2012-05-27T02:04:23.100
> 
> 标签：java, c++, solaris, jna

Solaris 中是否有 Dependency Walker 之类的工具。

我的目标是验证这些：-

1.  从 Java native(c++) 函数调用会发生吗？
2.  从 Java 传递的所有参数都是在 native(c++) 上接收的而没有损坏？
3.  记录从 java 到 c++ 的调用。

感谢和问候斯里尼瓦桑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T08:22:13.323

Solaris 有一个依赖遍历器。它被称为`ldd`。

你像这样运行它：

```
ldd your-executable 
```

它将列出您的可执行文件使用的所有共享库。

但是根据您的描述，您正在寻找我不会称之为*依赖 walker*的东西。我怀疑它的存在。

# php - 通过 AJAX 调试执行 Javascript

> ID：10771158
> 
> 赞同：1
> 
> 时间：2012-05-27T02:06:10.773
> 
> 标签：php, javascript, html, ajax

此代码有什么问题或可能导致此问题的原因是什么？它没有提醒“你好”，但它正在用 Hello 和 Bye World 表填充 div。我希望它提醒“你好”。我也不知道jquery。谢谢你

**文件1**

```
var xmlhttp;
if (window.XMLHttpRequest){// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }else{// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function(){
  if (xmlhttp.readyState==4 && xmlhttp.status==200){
     var reScript = /\<script.*?>(.*)<\/script>/mg;
     response = xmlhttp.responseText.replace(reScript, function(m,m1) {
     eval(m1);
     return "";
     });
    document.getElementById("div").innerHTML=response;
    }
  }
xmlhttp.open('GET','file2.php',true);
xmlhttp.setRequestHeader('Content-type','application/x-www-form-urlencoded');
xmlhttp.send(); 
```

**文件2**

```
 <table><tr><td>Hello World</td></tr></table>
  <script type="text/javascript">
  alert('hello');
  </script>
  <table><tr><td>Bye World</td></tr></table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T02:15:07.347

~~尝试不使用`eval()`：~~

 ~~```
var xmlhttp;
if (window.XMLHttpRequest){// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }else{// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function(){
  if (xmlhttp.readyState==4 && xmlhttp.status==200){
     /*var reScript = /\<script.*?>(.*)<\/script>/mg;
     response = xmlhttp.responseText.replace(reScript, function(m,m1) {
     eval(m1);
     return "";
     });*/
    document.getElementById("div").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open('GET','file2.php',true);
//xmlhttp.setRequestHeader('Content-type','application/x-www-form-urlencoded'); //unnecessary for GET calls
xmlhttp.send(null); 
```~~ 

~~`Eval`使用您的代码`<script...></script>`是不必要的，javascript 代码将在添加到 DOM 后立即执行。~~

**新编辑：**

您必须消除`\n\r`reponseText 中的换行符才能`eval`正确使用您的脚本。`\`此外，在第一个转义字符之前还有一个额外的转义字符，`<`它破坏了您的代码。尝试：

```
var xmlhttp;
if (window.XMLHttpRequest){// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }else{// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function(){
  if (xmlhttp.readyState==4 && xmlhttp.status==200){
     var reScript = /<script.*?>(.*)<\/script>/mg;
     response = xmlhttp.responseText.replace(/\n|\r/g, " ").replace(reScript, function(m,m1) {
     eval(m1);
     return "";
     });
    document.getElementById("div").innerHTML=response;
    }
  }
xmlhttp.open('GET','file2.php',true);
//xmlhttp.setRequestHeader('Content-type','application/x-www-form-urlencoded');
xmlhttp.send(null); 
```

I've added a `.replace(/\n|\r/g, " ")` to replace all line breaks by an white space in your `responseText`, which will allow for your JS to be evaluated properly and cause no visible change to the end-user. You may also replace the white space `" "` by an empty string `""` if all of your JS is properly semi-colon'd.

The above should work fine for simple scripts, now if you'd include the JQuery lib in your page's `head`:

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

Your AJAX call would be as simple as:

```
<script type="text/javascript">
$(document).ready(function(){
    $('#div').load('file2.php');
});
</script> 
```

JQuery automatically parses scripts from your responseText, as noted in your linked answer.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T02:33:49.087

Give this a try:

```
xmlhttp.onreadystatechange=function(){
  if (xmlhttp.readyState==4 && xmlhttp.status==200){
    var reScript = /<script.*?\>(.*)<\/script\>/mg.exec(xmlhttp.responseText)[1];
    var scriptElement = document.createElement('script');
    scriptElement.innerHTML = reScript;
    document.body.appendChild(scriptElement);
  }
} 
```

Placing the code into a script element, and then appending that element to the body should cause it to execute.

# java - 从 Java 更新 DNS（类似于 DUC NO - IP）。[原为：Actualizar DNS desde Java（类似于 DUC No-Ip）]

> ID：10771159
> 
> 赞同：1
> 
> 时间：2012-05-27T02:06:17.730
> 
> 标签：java, dns, urlconnection

几天前，我尝试在 java 中创建一个类似于 No-IP DUC（动态 DNS 更新客户端）的应用程序，但我提出了一个问题，而不是如何解决......现在我可以检索我使用以下行注册的域代码：

```
URLConnection conexion = new URL( "http://dynupdate.no-ip.com/list-hosts.php?email="+USER+"&pass="+PASSWORD ).openConnection(); 
```

[但是当我使用您在页面http://www.no-ip.com/integrate/request](http://www.no-ip.com/integrate/request)上推荐的以下 URL 进行更新时，我得到了一个例外......

```
URLConnection conexion = new URL( "http://"+USER+":"+PASSWORD+"@dynupdate.no-ip.com/nic/update?hostname="+DOMAIN+"&myip="+IP ).openConnection(); 
```

奇怪的是手动复制地址中的URL，更新完成没有问题......如果有人可以帮助我，我很感激......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T02:52:46.693

好吧，我也遇到了这种情况。发现此错误的原因是我们使用电子邮件地址作为用户名。其中的“@”与生成的 url 冲突。尝试使用 URLEncode 对用户名和密码部分进行编码。

```
String username = URLEncoder.encode("abc@xyz.com", "UTF-8");
String password = URLEncoder.encode("password", "UTF-8");
URL url = new URL( "http://"+username+":"+password+"@dynupdate.no-ip.com/nic/update?hostname="+hostname+"&myip="+ip);           
URLConnection urlConnection = url.openConnection(); 
```

# java - 性能改进（生成任意长度的随机字符串）

> ID：10771160
> 
> 赞同：4
> 
> 时间：2012-05-27T02:06:28.920
> 
> 标签：java, string, random

生成任意特定长度的随机字符串。我知道这个问题已经被问过很多次了，我在下面写了这段代码，我只是想知道有没有比我写的下面的代码更好的方法？或者我们可以让下面的代码更高效？

```
public static void main(String[] args) {
    String s = randomString(25);
    System.out.println(s);
}

public static String randomString(final int length) {
    StringBuilder sb = new StringBuilder();
    Random r = new Random();
    String subset = "0123456789abcdefghijklmnopqrstuvwxyz";
    for (int i = 0; i < length; i++) {
        int index = r.nextInt(subset.length());
        char c = subset.charAt( index );
        sb.append( c );
    }
    return sb.toString();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T02:52:45.210

由于您提前知道长度，因此使用容量设置 StringBuilder：

StringBuilder sb = new StringBuilder(length);

仅此一项就消除了在 StringBuilder 中不必要地调整内部数组的大小。

话虽如此，您最好使用 char[] 数组而不是 StringBuilder，并且也将子集表示为 char[]。

```
private static final char [] subset = "0123456789abcdefghijklmnopqrstuvwxyz".toCharArray();

char buf[] = new char[length];
for (int i=0;i<buf.length;i++) {
  int index = r.nextInt(subset.length);
  buf[i] = subset[index];
}

return new String(buf); 
```

通过避免对“charAt”和“append”的一些函数调用开销，这里可以获得一些微妙的收益。以及消除 StringBuilder 的一些内存和分配时间开销。一般来说，如果您知道要构建的字符串的大小，那么直接使用 char 数组会更有效率。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T03:03:50.510

首先，您可能*不需要*提高此方法的性能。该方法的调用频率可能不够高，以至于对其进行优化会对应用程序的整体性能产生显着影响。您应该在此级别进行优化之前**分析**您的应用程序，否则您可能会浪费时间在没有任何区别的东西上。

其次，即使这是一个值得的优化，您仍然需要分析您的应用程序以确定哪些优化效果最好……以及优化工作是否真的产生了任何影响。

* * *

如果（假设地）我试图让这个过程尽可能快，我会试试这个：

```
private static final char[] subset = 
        "0123456789abcdefghijklmnopqrstuvwxyz".toCharArray();
private static final Random prng = new Random();
...
public static String randomString(final int length) {
    char[] chars = new char[length];
    final int subsetLength = subsetLength;
    for (int i = 0; i < length; i++) {
        int index = prng.nextInt(subsetLength);
        chars[i] = subset[index];
    }
    return new String(chars);
} 
```

总之：

1.  不要`Random`每次都创建一个新实例。这可能是最大的优化，因为创建实例通常涉及获取随机种子的系统调用。
2.  `StringBuilder`当 a工作正常时不要使用 a `char[]`。
3.  避免`charAt`.
4.  在可能的情况下，将一次性任务从循环和方法调用中提升出来。

（请注意，第 3 点和第 4 点可能会变得不值得；即 JIT 编译器可能足够聪明，可以为您进行相同的优化……如果您允许的话。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T09:30:43.830

仅使用指定的字符串和长度创建一个随机字符串。你使用[RandomStringUtils](http://commons.apache.org/lang/api-release/org/apache/commons/lang3/RandomStringUtils.html)。如果要生成随机字符串[RandomStringUtils#random](http://commons.apache.org/lang/api-release/org/apache/commons/lang3/RandomStringUtils.html#random%28int,%20int,%20int,%20boolean,%20boolean,%20char%5B%5D,%20java.util.Random%29) 例如：指定字符串，长度为 25

```
private static final SecureRandom RANDOM = new SecureRandom();
private static final char[] PASSWORD_CHARS=("0123456789abcdefghijklmnopqrstuvwxyz").toCharArray();
String passwd=RandomStringUtils.random(25, 0, PASSWORD_CHARS.length, false, false, PASSWORD_CHARS, RANDOM); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T02:18:56.667

您可以直接转换为并使用它，而不是使用`String`s 。`int``char`

```
// 36 total alpha-numeric characters
int size = 36;

for (int i=0; i<length; i++) {
    // num is an integer from 0-35
    int num = r.nextInt(size);

    if (num < 26) {
        // Then we add a lowercase character
        sb.append((char)('a'+num));
    } else {
        // then we add a digit 0-9
        sb.append((char)('0'+(num-26)));
    }
} 
```

其他可能的优化：

1.  使用固定大小的 a`char[]`而不是`StringBuilder`.
2.  将您的字符串定义`subset`为`static`and `final`。

当然，这些优化非常微不足道，在这个问题的上下文中不会对您的程序产生太大影响。

* * *

## 编辑：

如果您需要生成`String`具有固定字符集的随机数，那么我上面提到的方法将不起作用。您必须`String`像在帖子中那样使用包含字符的字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-27T03:36:56.013

如果您想最小化对随机生成器的调用，您可以从每个随机整数中生成 5 个字符。但此实现仅适用于您的精确 36 字符集：（`0123456789abcdefghijklmnopqrstuvwxyz`请参阅[Integer.toString() Javadoc](http://goo.gl/dFVB7)）。而且这种实现的模糊性不可能补偿性能增益。

```
private static final int range = 36 * 36 * 36 * 36 * 36; // 36^5 is less than 2^31
private static Random rand = new Random();
private static String zeroes="00000";

public static String generate(int length) {
    StringBuilder sb = new StringBuilder(length+5);
    while (sb.length() < length) {
        String x = Integer.toString(rand.nextInt(range), 36);
        if(x.length()<5)
            sb.append(zeroes.substring(0, 5-x.length()));
        sb.append(x);
    }
    return sb.substring(0, length);
} 
```

零附加保证了字符是均匀随机的（没有它，字符`0`出现的频率会比其他字符略低）。

# php - 不能使用 php 字符串变量代替 html 纯文本

> ID：10771162
> 
> 赞同：2
> 
> 时间：2012-05-27T02:06:53.857
> 
> 标签：php, javascript, html

我对这些代码行有疑问：

```
<a class="button" href="javascript:unhide('<?php  $a; ?>')">Expand / Hide</a>
<?php echo substr($f2, 0, 400);?><div id="<?php $a; ?>" class = "hidden"><?php echo substr($f2, 400, 5000);?></div> 
```

如果变量 $a 被替换为纯文本，那么代码可以工作，但是当它链接到字符串变量时，它不会。

下面的示例显示了代码的工作版本（但是由于代码的目的，我需要使用变量）：

```
<a class="button" href="javascript:unhide('exampleword')">Expand / Hide</a>
<?php echo substr($f2, 0, 400);?><div id="exampleword" class = "hidden"><?php echo substr($f2, 400, 5000);?> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-27T02:09:24.673

代替

```
<?php  $a; ?> 
```

和

```
<?php echo $a; ?> 
```

# python - Python 从 yaml 配置文件中解释正则表达式

> ID：10771163
> 
> 赞同：3
> 
> 时间：2012-05-27T02:07:15.157
> 
> 标签：python, regex, pyyaml

所以我有一个 yaml 文件用作配置文件。我正在尝试使用正则表达式进行一些字符串匹配，但我无法将正则表达式从 yaml 解释为 python。有问题的正则表达式如下所示：

```
regex:
    - [A-Za-z0-9] 
```

当我尝试使用该`re.match`功能时，出现此错误：

```
Traceback (most recent call last):
  File "./dirpylint.py", line 132, in <module>
    sys.exit(main())
  File "./dirpylint.py", line 32, in main
    LevelScan(level)
  File "./dirpylint.py", line 50, in LevelScan
    regex_match(level)
  File "./dirpylint.py", line 65, in regex_match
    if re.match(expression, item) == None:
  File "/usr/lib/python2.7/re.py", line 137, in match
    return _compile(pattern, flags).match(string)
  File "/usr/lib/python2.7/re.py", line 229, in _compile
    p = _cache.get(cachekey)
TypeError: unhashable type: 'list' 
```

我知道它将正则表达式解释为列表，但我将如何使用 yaml 文件中定义的正则表达式来搜索字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-22T21:16:17.183

我在我的 YAML 解析“引擎”中做到了这一点。

```
In [1]: from StringIO import StringIO
In [2]: import re, yaml
In [3]: yaml.add_constructor('!regexp', lambda l, n: re.compile(l.construct_scalar(n)))
In [4]: yaml.load(StringIO("pattern: !regexp '^(Yes|No)$'"))
Out[4]: {'pattern': re.compile(ur'^(Yes|No)$')} 
```

如果您想使用 safe_load 和 !!python/regexp（类似于 ruby​​ 和 nodejs 的实现），这也可以工作：

```
In [5]: yaml.SafeLoader.add_constructor(u'tag:yaml.org,2002:python/regexp', lambda l, n: re.compile(l.construct_scalar(n)))
In [6]: yaml.safe_load(StringIO("pattern: !!python/regexp '^(Yes|No)$'"))
Out[6]: {'pattern': re.compile(ur'^(Yes|No)$')} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T02:14:57.767

问题是 YAML，而不是 Python。
如果要在 YAML 文件中存储包含文字方括号的字符串值，则必须引用它：

```
regex:
  - '[A-Za-z0-9]' 
```

使用“单引号”意味着 YAML 不会解释正则表达式中的任何反斜杠转义序列。例如`\b`

另外，请注意，在此 YAML 中，值`regex`是一个包含一个字符串的*列表*，而不是一个简单的字符串。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-27T02:17:22.183

您在`YAML`文件中使用了两个列表结构。加载`YAML`文件时：

```
>>> d = yaml.load(open('config.yaml')) 
```

你得到这个：

```
>>> d
{'regex': [['A-Za-z0-9']]} 
```

请注意，正则表达式中的方括号实际上正在消失，因为它们被识别为列表分隔符。你可以引用它们：

正则表达式：-“[A-Za-z0-9]”

要得到这个：

```
>>> yaml.load(open('config.yaml'))
{'regex': ['[A-Za-z0-9]']} 
```

所以正则表达式是`d['regex'][0]`。但你也可以在你的`yaml`文件中这样做：

```
regex: "[A-Za-z0-9]" 
```

这让你：

```
>>> d = yaml.load(open('config.yaml'))
>>> d
{'regex': '[A-Za-z0-9]'} 
```

因此，可以使用类似的字典查找来检索正则表达式：

```
>>> d['regex']
'[A-Za-z0-9]' 
```

...可以说要简单得多。

# actionscript-3 - 使用 RequestURL 访问不同的文件夹

> ID：10771166
> 
> 赞同：1
> 
> 时间：2012-05-27T02:07:53.533
> 
> 标签：actionscript-3, flash, audio

我正在使用 AS3 制作游戏。我使用 RequestURL( filename ) 来获取我想要播放的音乐。但是，这意味着音乐文件必须与 .fla 文件位于同一文件夹中。如何使用它从不同的文件夹中获取音乐文件？我真的不喜欢将我的音乐放在音乐文件夹之外或以某种方式妥善组织......

编辑：应该在前面提到这一点。我试图简单地使用诸如“whatever/filename”之类的东西，但我收到了这个安全错误：

SecurityError：错误 #2000：没有活动的安全上下文。

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T02:38:45.620

您是否尝试过使用[flash.media.Sound.load()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Sound.html#load%28%29)方法？

```
//Make a new sound object
var s:Sound = new Sound();

//Load it
s.load(new URLRequest("someDifferentMusicFolder/loop.mp3"));

//Play it
s.play() 
```

如果您通过其他方法加载它，例如 URLLoader + URLRequest，请发布您的代码，我们应该能够提供更好的帮助。

一般来说，虽然 URLRequests 应该允许您指定不同的文件夹，但您的问题可能不在您使用的方法中，而可能在您的实现中？也许您遇到了安全错误？不管它是什么，如果您发布您的代码，我们可以帮助您缩小范围。

# c# - 如何在 D3 (DynamicDataDisplay) 绘图仪中隐藏 X 轴？

> ID：10771173
> 
> 赞同：0
> 
> 时间：2012-05-27T02:11:17.093
> 
> 标签：c#, wpf, dynamic-data-display

我希望能够在 D3（DynamicDataDisplay）的 ChartPlotter 中隐藏 X 轴（标签、刻度等）。可用于 D3 的文档数量基本上是不存在的。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T07:07:07.180

据我[在源代码](http://dynamicdatadisplay.codeplex.com/SourceControl/changeset/view/31108#1509251)中看到的，AxisBase 是一个 ContentControl，因此您应该能够使其不可见。

这可能太粗略了，所以您也可以查看[默认样式/模板](http://dynamicdatadisplay.codeplex.com/SourceControl/changeset/view/31108#1509253)，复制并更改它以隐藏/删除您想要隐藏的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T08:44:00.773

```
plotter.HorizontalAxis.Remove(); 
```

在代码隐藏中。刚刚在我的 WPF 应用程序中完成。

# django - 什么不能 Django 解码我的模板？

> ID：10771175
> 
> 赞同：0
> 
> 时间：2012-05-27T02:12:57.207
> 
> 标签：django

我将 Microsoft Word 文档保存为 HTML 文档。然后我将生成的 HTML 复制并粘贴到 Django 模板“document.html”中。

然后，我将 URL 映射到加载此模板的简单视图。

```
def viewDocument(request):
    return render_to_response('document.html') 
```

之后，我在访问该视图的页面时收到此错误。

```
UnicodeDecodeError at /viewDocument/
'utf8' codec can't decode byte 0xd2 in position 67600: invalid continuation byte 
```

奇怪的是，当我在笔记本电脑上的 Google Chrome 中打开从 Microsoft Word 生成的页面时，document.html 中的 HTML 显示正常。为什么它不能作为 Django 模板工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T02:15:24.570

因为该文件未以 UTF-8 编码。

# omniauth - SessionsController 中的 Omniauth NoMethodError

> ID：10771176
> 
> 赞同：0
> 
> 时间：2012-05-27T02:13:39.050
> 
> 标签：omniauth

嗨，我正在尝试运行 Railscast 的 #241 - 将 Omniauth 用于 twitter - 最终使用 facebook。我正在尝试制作的应用程序需要 Facebook 的登录，但由于有一个关于如何使用 twitter 登录的视频，不妨首先遵循它，但我遇到了问题。

登录 Twitter 后，我不断收到此错误。“SessionController#create 中的 NoMethodError” - nil:NilClass 的未定义方法“[]”。这是相关的代码。

```
class SessionsController < ApplicationController
    def create
        auth = request.env["omniauth.auth"]
        user = User.find_by_provider_and_uid(auth["provider"], auth["uid"]) || User.create_with_omniauth(auth)
        session[:user_id] = user.id
        redirect_to root_url, :notice => "Signed in!"
    end
end 
```

我还通过 dev.twitter.com 设置了网站和回调链接，如下所示：网站：“http://127.0.0.1:3000”回调：“http://127.0.0.1:3000/auth/twitter/callback”

配置/初始化程序中的 Omniauth.rb：

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :twitter, 'CONSUMER_KEY', 'CONSUMER_SECRET'
end 
```

（我已经提供了消费者密钥和秘密）

应用程序.html.erb

```
<div id="user_nav">
  <%= link_to "Sign in with Twitter", "/auth/twitter" %>
</div> 
```

在 routes.rb 中添加了这一行

```
match "/auth/:provider/callback" => "sessions#create" 
```

用户.rb

```
class User < ActiveRecord::Base
  attr_accessible :name, :provider, :uid

  def self.create_with_omniauth(auth)
    create! do |user|
      user.provider = auth["provider"]
      user.uid = auth["uid"]
      user.name = auth["user_info"]["name"]

  end
end 
```

我不知道我哪里出错了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T15:35:36.477

好的，我发现了问题。花了我一段时间。

Twitter将他们的“user_info”元素更改为“info”所以而不是

```
user.name = auth["user_info"]["name"] 
```

这是

```
user.name = auth["info"]["name"] 
```

接下来要更改的是会话控制器中的

```
session[:user_id] = user.id 
```

至

```
session[:user_id] = user.uid 
```

# java - 向 LAN 网络上的特定客户端发送字符串

> ID：10771177
> 
> 赞同：0
> 
> 时间：2012-05-27T02:13:40.023
> 
> 标签：java, android, sockets, serversocket

> **可能重复：**
> [从基本服务器向特定客户端发送消息](https://stackoverflow.com/questions/10777678/send-message-from-a-basic-server-to-a-specific-client)

这是场景。我有两个 wifi 模块，说 M1 和 M2 连接到我的接入点（路由器）。我的安卓智能手机也连接到同一个接入点。现在，如果我想向模块 M1 发送字符串消息而不向 M2 发送任何内容，那么使用 java 甚至可能吗？我正在我的手机上创建一个 SocketServer，这两个模块通过我的接入点作为客户端连接到服务器。请帮忙

谢谢。

**更新**

// 创建服务器

```
ServerSocket serverSocket = new ServerSocket(8000, 0, IPaddress); 
```

// 处理新客户端连接的线程

```
Thread AcceptThread = new Thread(new ClientAccept()); AcceptThread.start(); 
```

// 接受传入的客户端

```
Socket clientSocket = serverSocket.accept(); 
```

// 接收数据的输入流（字符串）

```
BufferedReader input = new BufferedReader(new InputStreamReader(socket.getInputStream())); 
```

// 输出流发送数据（字符串）

```
PrintWriter output = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())),true); 
```

我不确定如何在每个客户端连接上创建一个新线程。另外我想知道如果有 5 个客户端连接到我的服务器，如何从服务器中选择一个特定的客户端来发送消息

# sql - 在 SQL Server2008 中运行 Access2003 的相同 SQL 时出现 SQL 错误

> ID：10771179
> 
> 赞同：0
> 
> 时间：2012-05-27T02:14:21.357
> 
> 标签：sql, sql-server-2008

我有以下用 Access 2003 编写的 SQL。现在，我必须使用 SQL Server2008 开发 prj，并在 SQL Server2008 上运行此 SQL 时出现错误，因为 Access 的 First() 函数无法在 SQL Server 2008 中识别。在 SQL Server 2008 年，我尝试了 TOP() 函数，但我仍然无法解决它。请帮我。

```
 SELECT DISTINCTROW TableA.TCode,                  
  TableA.DCode,                 
  TableA.DepCode,                   
  TableA.ShouhinCode,                   
  First(TableB.TName) AS TNameFirstRecord,                  
  First(TableC.LDepName) AS LDepNameFirstRecord,                    
  First(TableD.ThingType) AS ThingTypeFirstRecord,                  
  First(TableA.GoodsName) AS GoodsNameFirstRecord,                  
  Sum(TableA.Amount) AS AmountData,                 
  Sum(TableA.MoneyAmount) AS MoneyAmountData,                   
  Sum(TableA.DetailedMoneyAmount) AS DetailedMoneyAmounData,                    
  Sum(TableA.SummaryMoneyAmount) AS SummaryMoneyAmountData,                 
  TableA.POSNo                  
 FROM (                 
 (TableA INNER JOIN TableC ON TableA.DCode = TableC.DCode)                  
 INNER JOIN TableB ON TableA.TCode = TableB.TCode                   
 )                  
  INNER JOIN TableD ON TableA.DepCode = TableD.DepCode                  
 GROUP BY TableA.TCode,                 
  TableA.DCode,                 
  TableA.DepCode,                   
  TableA.ShouhinCode,                   
  TableA.POSNo                  
 ORDER BY TableA.TCode,                 
  TableA.DCode,                 
  TableA.DepCode,                   
  TableA.ShouhinCode 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T02:45:34.713

我认为您需要使用[窗口功能](http://www.simple-talk.com/sql/learn-sql-server/window-functions-in-sql-server/)

您将表替换为具有行号的版本

```
SELECT TableA.TCode,                  
    A.DCode,                 
    A.DepCode,                   
    A.ShouhinCode,                   
    B.TName AS TNameFirstRecord,                  
    C.LDepNamee AS LDepNameFirstRecord,                    
    D.ThingType AS ThingTypeFirstRecord,                  
    A.GoodsNameAS GoodsNameFirstRecord,                  
    Sum(A.Amount) AS AmountData,                 
    Sum(A.MoneyAmount) AS MoneyAmountData,                   
    Sum(A.DetailedMoneyAmount) AS DetailedMoneyAmounData,                    
    Sum(A.SummaryMoneyAmount) AS SummaryMoneyAmountData,                 
    A.POSNo                  
FROM 
    INNER JOIN (select row_number() over (partition by object_id ORDER BY Name DESC) as RowNumber, * from TableA) A                 
    INNER JOIN (select row_number() over (partition by object_id ORDER BY Name DESC) as RowNumber, * from TableC) C ON A.DCode = C.DCode                
    INNER JOIN (select row_number() over (partition by object_id ORDER BY Name DESC) as RowNumber, * from TableB) B ON A.TCode = B.TCode                   
    INNER JOIN (select row_number() over (partition by object_id ORDER BY Name DESC) as RowNumber, * from TableD) D ON A.DepCode = D.DepCode    

WHERE 
  A.RowNumber = 1 AND B.RowNumber = 1 AND C.RowNumber = 1 AND D.RowNumber = 1

GROUP BY A.TCode,                 
    A.DCode,                 
    A.DepCode,                   
    A.ShouhinCode,                   
    A.POSNo                  
ORDER BY A.TCode,                 
    A.DCode,                 
    A.DepCode,                   
    A.ShouhinCode 
```

# android - 在 Android 上使用网络收获

> ID：10771182
> 
> 赞同：1
> 
> 时间：2012-05-27T02:15:12.137
> 
> 标签：android, webharvest

我正在构建一个移动应用程序，该应用程序使用网络收获 api 从网站中提取数据并将其存储在文件中。然后应用程序将使用数据来操作它并显示它。我的问题是，当为 java 使用 webharvest 时，配置文件和输出文件的路径是相对于本地磁盘的，例如“C:/config.xml”和“C:/docs”，但是在 Android 项目上使用它时在 Eclipse 上，配置文件应该在项目中，输出文件应该在项目或缓存中。谁能告诉我应该把读取网络收获配置的路径和写入输出 xml 文件的路径放在什么位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:58:40.170

我有同样的问题，遗憾的是我无法让它工作。我考虑了以下解决方案，但它引发了异常。

```
InputStream in_s = context.getResources().openRawResource(R.raw.webharvestconfig);
InputSource inputSource = new InputSource(in_s);
ScraperConfiguration config = new ScraperConfiguration(inputSource); 
```

例外：

```
04-25 16:47:26.835: W/System.err(1057): org.webharvest.exception.ParserException: asset
04-25 16:47:26.835: W/System.err(1057): at org.webharvest.definition.XmlParser.parse(Unknown Source)
04-25 16:47:26.846: W/System.err(1057): at org.webharvest.definition.XmlNode.getInstance(Unknown Source)
04-25 16:47:26.846: W/System.err(1057): at org.webharvest.definition.ScraperConfiguration.createFromInputStream(Unknown Source)
04-25 16:47:26.846: W/System.err(1057): at org.webharvest.definition.ScraperConfiguration.<init>(Unknown Source) 
```

我还尝试将 xml 字符串直接写入 InputStream，如下所示：

```
InputStream in = new ByteArrayInputStream("<?xml version=\"1.0\" encoding=\"UTF-8\"?><config charset=\"UTF-8\"><html-to-xml> <http url=\"http://www.google.com\"/> </html-to-xml></config>".getBytes()); 
```

但是没有更好的运气（尽管例外情况不同）。

我不知道，理论上，它应该有效。在研究我刚刚展示的异常时，我什至发现了[以下示例](http://www.massapi.com/source/wso2esb-4.0.0-src/components/mashup/org.wso2.carbon.mashup.javascript-hostobjects.scraper/3.2.0/src/main/java/org/wso2/carbon/mashup/javascript/hostobjects/scraper/ScraperHostObject.java.html)，它以与我相同的方式使用 ScraperConfiguration 但是......

只是为了完整性和提供更多信息，我提供了 ScrapeConfiguration 类的[源代码](http://code.google.com/p/webharvestruan8/source/browse/trunk/+webharvestruan8+--username+zhb1208/Webharvest_soft/src/org/webharvest/definition/ScraperConfiguration.java?r=4)。

如果我能让它工作，我会编辑这篇文章。

# android - 在 Android 中反编译 .apk

> ID：10771186
> 
> 赞同：5
> 
> 时间：2012-05-27T02:16:49.893
> 
> 标签：android, apk

我想在 Android 中反编译和重新编译一个 .apk（我想获得对某些应用程序的 Android Manifest 的访问权限）。我知道 APKTool，但我想知道是否可以在 Android 中反编译 apk（作为 Android 应用程序的反编译器）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-27T02:31:57.493

获取清单很容易。将扩展名从 .apk 更改为 .zip 并提取清单。大多数时候，它保持完整且可解析。如果不是，您可以使用大量免费的开源工具。APKTool 也是一个很好用的工具。查看[源代码](http://code.google.com/p/android-apktool/)可以让您更好地了解如何实现这一点，然后您可以在 Android 环境中实现它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T18:07:15.860

[无耻插件，我刚刚在https://github.com/lxdvs/apk2gold](https://github.com/lxdvs/apk2gold)创建了一个管理 APK 反编译过程的开源包。

apktool 反编译为 Smali；我的包 apk2gold 将反编译为 Java。

# android - 获取未接来电列表并将其从android的通话记录中删除

> ID：10771188
> 
> 赞同：1
> 
> 时间：2012-05-27T02:17:26.147
> 
> 标签：android

我想单独获取特定的呼叫类型并将其从 android 的呼叫日志中删除。

```
while (cursor.moveToNext()) { 
  String queryString1= "CallType=’" + CallLog.Calls.MISSED_TYPE + "‘"; 
  Log.v("CallType", queryString1); 
  if(CallLog.Calls.TYPE.equals("missed")) {
    sb.append("Number "+CallLog.Calls.NUMBER+"\nName "+CallLog.Calls.CACHED_NAME);
  }
}
getContentResolver().delete(UriCalls, CallLog.Calls.MISSED_TYPE, null); 
```

这是我为未接来电尝试过的代码，因为 Missed_type 是 int，我收到错误“ContentResolver 类型中的方法 delete(Uri, String, String[]) 不适用于参数（Uri, int, null )"

给我一些提示以从日志中删除特定的呼叫类型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T03:15:38.810

您可以使用以下代码获取**未接来电**警报

```
final String[] projection = null;
final String selection = null;
final String[] selectionArgs = null;
final String sortOrder = android.provider.CallLog.Calls.DATE + " DESC";
Cursor cursor = null;
try{
    cursor = context.getContentResolver().query(
         Uri.parse("content://call_log/calls"),
         projection,
         selection,
         selectionArgs,
         sortOrder);
 while (cursor.moveToNext()) { 
     String callLogID =           cursor.getString(cursor.getColumnIndex(android.provider.CallLog.Calls._ID));
    String callNumber = cursor.getString(cursor.getColumnIndex(android.provider.CallLog.Calls.NUMBER));
    String callDate = cursor.getString(cursor.getColumnIndex(android.provider.CallLog.Calls.DATE));
    String callType = cursor.getString(cursor.getColumnIndex(android.provider.CallLog.Calls.TYPE));
    String isCallNew = cursor.getString(cursor.getColumnIndex(android.provider.CallLog.Calls.NEW));
    if(Integer.parseInt(callType) == MISSED_CALL_TYPE && Integer.parseInt(isCallNew) > 0){
        if (_debug) Log.v("Missed Call Found: " + callNumber);
    }
 }
} catch(Exception ex){
 if (_debug) Log.e("ERROR: " + ex.toString());
}finally{
 cursor.close();
} 
```

您也可以使用此链接[http://android2011dev.blogspot.in/2011/08/get-android-phone-call-historylog.html](http://android2011dev.blogspot.in/2011/08/get-android-phone-call-historylog.html)

`<uses-permission android:name="android.permission.READ_LOGS"></uses-permission>`

**在androidmanifest.xml**中给予以上权限

 **使用以下链接删除未接来电列表，您只需要传递您从上面的代码中获得的号码

[http://www.mobisoftinfotech.com/blog/android/androidcalllogdeletion/](http://www.mobisoftinfotech.com/blog/android/androidcalllogdeletion/)**

# java - java.sql.SQLException: ORA-00904

> ID：10771189
> 
> 赞同：2
> 
> 时间：2012-05-27T02:17:35.850
> 
> 标签：java, oracle, jdbc, sqlexception

我得到这个例外 -

```
java.sql.SQLException: ORA-00904: : invalid identifier
ORA-06512: at line 1 
```

以下是我要执行的查询-

```
public static final String DATABASE_TABLE = "LnPData";

public static final String CREATE_SQL = "DECLARE " +
"t_count INTEGER; " +
"v_sql VARCHAR2(1000) := 'create table " +DATABASE_TABLE + "(" +
"(ID number(10,0), " +
"CGUID VARCHAR(255), " + 
"PGUID VARCHAR(255), " + 
"SGUID VARCHAR(255), " + 
"USERID VARCHAR(255), " +
"ULOC VARCHAR(255), " +
"SLOC VARCHAR(255), " +
"PLOC VARCHAR(255), " +
"ALOC VARCHAR(255), " +
"SITEID VARCHAR(255), " +
"PRIMARY KEY ( ID ))'; " +
"BEGIN " +
"SELECT COUNT(*) " +
"INTO t_count " +
"FROM user_tables " +
"WHERE table_name = '" +DATABASE_TABLE + "'; " +

"IF t_count = 0 THEN " +
"EXECUTE IMMEDIATE v_sql; " +
"END IF; " +
"END; "; 
```

在控制台上它被打印为 -

```
DECLARE t_count INTEGER; v_sql VARCHAR2(1000) := 'create table LnPData((ID number(10,0), CGUID VARCHAR(255), PGUID VARCHAR(255), SGUID VARCHAR(255), USERID VARCHAR(255), ULOC VARCHAR(255), SLOC VARCHAR(255), PLOC VARCHAR(255), ALOC VARCHAR(255), SITEID VARCHAR(255), PRIMARY KEY ( ID ))'; BEGIN SELECT COUNT(*) INTO t_count FROM user_tables WHERE table_name = 'LnPData'; IF t_count = 0 THEN EXECUTE IMMEDIATE v_sql; END IF; END; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T09:06:14.807

改变

```
"v_sql VARCHAR2(1000) := 'create table " +DATABASE_TABLE + "(" +
"(ID number(10,0), " + 
```

进入

```
"v_sql VARCHAR2(1000) := 'create table " +DATABASE_TABLE +
"(ID number(10,0), " + 
```

它正在工作。你只是有一个不正确的括号。

# pdf - 预览在 OS X Lion 上的哪里存储 PDF 注释？

> ID：10771193
> 
> 赞同：2
> 
> 时间：2012-05-27T02:20:25.643
> 
> 标签：pdf, osx-lion

我正在使用 Python 开发一个工具来从 PDF 文件中提取突出显示的段落。我经常在 OS X Lion 上的 Preview 中突出显示 PDF，但还没有找到提取这些段落的好工具。存在其他允许您突出显示和导出的应用程序，例如 Skim，但我认为必须有一种方法来提取我在预览中添加的应用程序。

我认为突出显示将存储在 PDF 文件的 HFS+ 扩展属性中，但在使用 xattr 查看它们之后，它们似乎存储在其他地方。我还查看了 PDFKit，但我只看到了如何创建注释而不是找到它们。

如果有人能告诉我在哪里可以找到亮点/注释或指向一些解释这一点的文档，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T02:45:53.107

使用 PDFKit 时，您可以从任何 PDFPage 实例中获取注释。

`[myPDFPage annotations]`将返回该特定页面的注释数组。

有关更多信息，请参阅[文档](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/QuartzFramework/Classes/PDFPage_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40003875)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T11:30:13.667

从技术上讲，突出显示 PDF 的某些部分就是在文件中添加注释。这些注释是 PDF 规范中定义的 PDF 对象。它们存储在 PDF 文件本身中，即它们确实修改了原始文件！这就是为什么在 HFS+ 扩展属性中找不到亮点的原因...

因此，标题行问题的答案是：**预览将 PDF 文件中的亮点存储为完全兼容的 PDF 对象。**

sosborn 很好地回答了您的文本中暗示的真正问题的答案（*“我想提取突出显示的段落” ）。*

# database - Corona 移动应用存储解决方案

> ID：10771194
> 
> 赞同：0
> 
> 时间：2012-05-27T02:21:27.097
> 
> 标签：database, sqlite, lua, coronasdk

我目前正在使用 Corona SDK 和 Lua 开发一个移动应用程序。我需要存储有关每个用户的信息，并在当前用户加载应用程序时加载他们的信息。为每个用户存储此信息的最佳方法是什么，以及如何在应用程序加载时获取此数据。我正在考虑使用 sqlLite 并为每个用户设置一行。但是，当用户重新加载应用程序时，我将无法访问当前用户的数据，因为当应用程序加载时，我需要一些东西来索引数据库。有什么方法可以从移动设备获取有关应用程序加载的一些信息以索引数据库？有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T09:32:37.513

看看亚马逊的服务。像 S3、simpleDB、dynamoDB ..

代码交换中已经提供了一些实现

[http://developer.anscamobile.com/code/amazon-simpledb-api](http://developer.anscamobile.com/code/amazon-simpledb-api) http://developer.anscamobile.com/code/amazon-s3-rest-api-implementation-corona

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T11:58:11.203

我不清楚数据库的存储位置。如果它在服务器上是远程的，只需使用设备 ID

system.getInfo("设备ID")

如果它是本地的并且您有多个本地用户，则使用登录名。您可以对任一实例使用注册过程并存储注册密钥，以便在启动应用程序时自动访问。

# jquery - jQuery，如何修改 [href] 值？

> ID：10771195
> 
> 赞同：3
> 
> 时间：2012-05-27T02:21:31.357
> 
> 标签：jquery

例如，想要修改从 yahoo.com 到 google.com 的所有 href 值

我试过：

```
$("[href='http://yahoo.com']").val('http://google.com'); 
```

它不起作用，正确的方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T02:26:36.500

如果您想`href`用“google.com”替换任何的“yahoo.com”部分：

```
$("[href*='yahoo.com']").attr("href", function(i,v){
  return v.replace("yahoo.com", "google.com");
}); 
```

这通过循环遍历其`href`属性中任何位置具有“yahoo.com”的所有元素，并将该字符串替换为“google.com”来实现。

```
​&lt;a href="http://yahoo.com">Yahoo</a>
<a href="http://www.yahoo.com">www.yahoo.com</a>
<a href="http://yahoo.com?foo">Yahoo?</a>​​​​​​​​​​​​​​​​​ 
```

变成

```
​&lt;a href="http://google.com">Yahoo</a>
<a href="http://www.google.com">www.yahoo.com</a>
<a href="http://google.com?foo">Yahoo?</a>​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T02:23:34.403

您正在尝试在没有的元素上设置 value 属性。相反，您想设置[href 属性](http://api.jquery.com/attr/)，如下所示：

```
$("[href='http://yahoo.com']").attr("href","http://google.com"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-27T02:24:30.730

**像这个工作演示**的另一个选项：http : [//jsfiddle.net/CFpeU/](http://jsfiddle.net/CFpeU/) (http://jsfiddle.net/CFpeU/show)**或** [http://jsfiddle.net/CFpeU/2/](http://jsfiddle.net/CFpeU/2/) (http://jsfiddle.净/CFpeU/2/show/)

道具 API：[http ://api.jquery.com/prop/](http://api.jquery.com/prop/)

代码：

```
$(".foo").prop("href","http://www.google.com");​ 
```

**或者**

```
$("[href='www.yahoo.com']").prop("href","http://google.com"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T02:27:24.140

要更改包含 yahoo.com 的**所有** `href`值，您可以：

```
$("a[href*='yahoo.com']").prop("href", "http://www.google.com");​ 
```

**这将适用于：**

*   [http://www.yahoo.com](http://www.yahoo.com)
*   www.yahoo.com
*   雅虎网
*   ETC...

一个有效的[小提琴示例](http://jsfiddle.net/zuul/qMx4G/)，以更好地说明解决方案！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-27T02:25:33.177

您可以尝试多种方法

```
$("a[href='http://www.google.com/']").attr('href', 'http://www.live.com/') 
```

# serialization - 序列化 Lua 表，包括纯 Lua 函数？

> ID：10771197
> 
> 赞同：2
> 
> 时间：2012-05-27T02:21:58.643
> 
> 标签：serialization, lua

我们需要序列化一个包含字符串、数字、表和函数的 Lua 表。Programming Lua 书中有代码可以序列化由字符串、数字和表格组成的表格。我们试图调整这个函数来增加序列化函数的能力。具体来说，我们为 type == 'function' 添加了一个案例，并在函数上调用了 string.dump：

```
if type(o) == "number" then
    return tostring(o)
elseif type(o) == "function" then
    return "loadstring("..string.dump(o)..")"
else
    -- assume it is a string
    return string.format("%q", o)
end 
```

这将 Lua 字节码注入到明文表表示的其余部分中。这是我们能想到的最接近的东西。

我们不在乎他的序列化结果是否是人类可读的，它只需要能够像这样工作：

```
mytable = [some complicated lua table with functions]
dump = dump_t(mytable)

...

loaded_table = load_t(dump) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T02:31:10.097

有关许多实现，请参阅[wiki 页面](http://lua-users.org/wiki/TableSerialization)。

[托尼芬奇的版本](http://lua-users.org/lists/lua-l/2009-11/msg00533.html)可能适合你。

# ruby-on-rails-3 - 将旧的 md5 密码迁移到 bcrypt 密码

> ID：10771198
> 
> 赞同：16
> 
> 时间：2012-05-27T02:22:16.103
> 
> 标签：ruby-on-rails-3, hash, devise, md5, password-hash

我正在使用 Devise 对 Rails 中的网站进行身份验证。以前的网站使用具有 md5 密码的用户数据库，因此我想将此密码迁移到 Devise 使用的加密。我该如何解决？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-27T17:10:18.523

Oleksi 和 josnidhin 在回答您的问题方面做得很好。我只是想补充一些想法，在过渡阶段要做什么：

将数据库迁移到拥有两个“密码哈希”列，一个包含现有的旧 MD5 哈希，另一个用于新的 bcrypt 哈希，最初全部填充为 NULL。下次用户登录时，您执行以下步骤：

1) 检查 bcrypt 列中是否已有值。如果是，请继续 3.，否则请继续 2。

2) 使用 MD5 列中的值使用旧的 MD5 机制对用户进行身份验证。如果成功，则另外计算新的 bcrypt 哈希并将其存储在新列中。完毕。

3) 使用 brypt 值对用户进行身份验证。只需忽略 MD5 值。

然后时不时地检查一下新的bcrypt列是否被填满。如果是这样，请丢弃 MD5 列并更新您的应用程序以仅使用新机制。

但那是一厢情愿，总是有一些用户在此期间没有登录。给他们发一封邮件，告诉他们你在做什么，这是为了他们最好的，并请他们尽快登录。

几周后，再次检查 bcrypt 状态。如果仍然缺少一些密码（会有:)），您可以做的就是重置这些用户的密码，生成一个随机密码并通过邮件通知他们，就像他们忘记密码时您会做的那样。

然后，您最终可以清除 MD5 列，丢弃相应的代码并升级您的应用程序以仅使用新的身份验证。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-21T11:23:28.900

我有一个替代解决方案：

1.  添加 bcrypt 列。
2.  通过 bcrypt 算法运行 MD5 哈希来填充 bcrypt 列。
3.  将登录更改为**始终**使用 bcrypt 列和散列函数即`plain text->md5->bcrypt`.

这样，所有密码都可以一次迁移，并且 MD5 哈希值被永久丢弃。考虑自己这样做，不能对这个想法挑任何毛病。有接盘侠吗？我错过了一些明显的东西吗？

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-27T02:25:17.957

没有办法将 md5 散列转换为另一种散列。您必须让用户使用旧系统登录，然后使用新方法对他们提供的密码进行哈希处理。获得新哈希后，您可以删除旧的 md5 哈希。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-27T02:26:18.423

您必须要求用户使用旧密码登录，然后更改它，例如显示强制更改密码页面，该页面将使用 bcrypt 存储密码。提供新密码后，您可以禁用/删除系统中的旧密码。

# c# - 跨线程属性行为

> ID：10771204
> 
> 赞同：2
> 
> 时间：2012-05-27T02:24:38.857
> 
> 标签：c#, multithreading

我有一个带有文本框的 windows 窗体`txtOutput`。我有一些内容。我已经编写了一个属性来`txtOutput.Text`从同一个线程内和跨线程获取和设置两者，如下所示：

```
public string OutputString
{
    get
    {
        string text = string.Empty;
        if (txtOutput.InvokeRequired)
        {
            txtOutput.BeginInvoke(new MethodInvoker(delegate
                {
                    text = txtOutput.Text;
                }));
        }
        else
        {
            text = txtOutput.Text;
        }
        return text;
    }
    set
    {
        if (txtOutput.InvokeRequired)
        {
            txtOutput.BeginInvoke(new MethodInvoker(delegate
                {
                    txtOutput.Text = value;
                }));
        }
        else
        {
            txtOutput.Text = value;
        }
    }
} 
```

如果我从同一个线程设置/获取属性，则在调用以下函数（如`PrintMessage()`.

```
public void PrintMessage()
{
    MessageBox.Show(OutputString);
} 
```

但是当我这样打电话时`new Thread(PrintMessage).Start()`。`get`不检索文本框中的值（即显示`MessageBox`空字符串）。当我通过在行上保持断点来做同样的事情时：

```
txtOutput.BeginInvoke(new MethodInvoker(delegate
{
    text = txtOutput.Text;
})); 
```

调试时，检索值（即`MessageBox`显示`txtOutput`内容）

我应该`sleep`在某个地方吗？我在哪里犯错？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T02:56:58.060

问题是在 UI 线程可以处理您向调度程序发出的请求之前，您正在调用 MessageBox.Show() 并引用文本变量。我会避免使用 Thread.Sleep() ，因为您最终可能会产生一些令人讨厌的副作用。理想情况下，您应该重构代码以摆脱同步的属性，转而采用更异步的解决方案。类似于下面的代码的东西应该会给你你正在寻找的结果：

```
public void PrintMessage(Action<string> displayAction)
{
    string text = string.Empty;
    if (txtOutput.InvokeRequired)
    {
        txtOutput.BeginInvoke(new MethodInvoker(delegate
        {
            displayAction.Invoke(txtOutput.Text);
        }));
    }
    else
    {
        displayAction.Invoke(txtOutput.Text);
    }
} 
```

并调用它：

```
// Get the text asynchronously
PrintMessage(s => MessageBox.Show(s)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T09:14:04.057

您可以将 Tasks 与[TaskScheduler 表单 UI 线程](http://msdn.microsoft.com/en-us/library/dd997394.aspx)一起使用。当您将调度程序表单 UI 线程传递给任务工厂时，此任务在 UI 线程中执行并将结果返回到创建此任务的线程。

```
namespace WpfTest {
using System.Threading;
using System.Threading.Tasks;
using System.Windows;

public partial class MainWindow : Window {
    private readonly TaskScheduler _taskScheduler;

    public MainWindow() {
        InitializeComponent();

        _taskScheduler = TaskScheduler.FromCurrentSynchronizationContext();
        button.Click += ButtonOnClick;
    }

    public string Text {
        get {
            if (text.CheckAccess()) {
                return text.Text;
            }
            return Task.Factory.StartNew(
                () => text.Text, CancellationToken.None, TaskCreationOptions.None, _taskScheduler).Result;
        }
        set {
            if (text.CheckAccess()) {
                text.Text = value;
            } else {
                Task.Factory.StartNew(
                    () => { text.Text = value; }, CancellationToken.None, TaskCreationOptions.None, _taskScheduler);
            }
        }
    }

    private void ButtonOnClick(object sender, RoutedEventArgs routedEventArgs) {
        Text += "Test1";
        new Thread(() => { Text += "Test2"; }).Start();
    }
}
} 
```

# pdf - 为什么当 HPDF_LoadPngImageFromFile 使用 libhpdf 时内存分配失败？

> ID：10771205
> 
> 赞同：0
> 
> 时间：2012-05-27T02:25:04.977
> 
> 标签：pdf, png, libpng, libharu

我得到一个异常 ERROR: error_no=1015, detail_no=0 using HPDF_LoadPngImageFromFile to load a png file with a jpeg file extension.我安装了 libpng 和 libpng-dev。我无法弄清楚为什么会发生此异常。有人帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:17:16.183

大声笑，我已经编译了 libaru 演示......感谢 stackoverflow..和 libharu 开发人员。

错误：error_no=1015，detail_no=0

一般来说，您必须检查您的图像文件天气或当前目录中不存在。

表明你的 c 程序想要加载的东西不存在。

祝你好运。

# iphone - Yahoo Axis 浏览器是否支持 iPhone 中的 HTML 5、CSS 3 和 Flash？

> ID：10771215
> 
> 赞同：0
> 
> 时间：2012-05-27T02:26:51.253
> 
> 标签：iphone, yahoo

最近，雅虎发布了苹果手机的浏览器以及 chrome 和 mozilla 等浏览器的扩展。Axis可以播放flash和html css动画？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T04:21:57.617

YouTube 视频使用 HTML5 (QuickTime) 显示，不，浏览器不显示 flash，它使用 safari 显示相同的消息（下载 flash 播放器）。

# jquery - 在同一页面jQuery中加载链接

> ID：10771217
> 
> 赞同：2
> 
> 时间：2012-05-27T02:27:11.320
> 
> 标签：jquery, load, window

此代码用于可过滤的投资组合。最初我为下一个和上一个链接使用 PHP，但是当过滤投资组合时，它找不到下一个过滤的对象。我发现过滤器在 DOM 中将列表项彼此相邻放置，因此我使用 next() 来获取结果。但是，链接没有正确加载。它是加载thickbox的同一页面上的链接。我已经成功地让它在新窗口中打开并附加到窗口 url，但没有骰子试图让它工作。这是所述投资组合的地址。

[http://blurosemedia.com/portfolio](http://blurosemedia.com/portfolio)

```
$(document).ready(function(){
    $(".portfolio-next").click(function(e) {
    var $this = $(this);
    if($this.data('clicked', true)) {
    var namer = $(this).attr('value');
    var url = $(this).parents('body').children('#wrap').children('#inner').children('#content-sidebar-wrap').children('#content').children('ul#portfolio-list').children().next('.portfolio-item-' + namer).nextAll('.portfolio-item:not(:.isotope-hidden)').attr('id');
        window.location.load(url);
        e.preventDefault();
   }
        });
}); 
```

我不得不一直爬到 Dow 树上，因为厚框代码会自动显示在页面底部。我认为一种可能的解决方案是为了让厚盒加载，你必须有 class="thickbox"。如果我能以某种方式说 load(url).withClass('thickbox') 它可能会起作用，但我确定语法应该如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T01:36:41.620

谢谢你的详细回复。这是我第一次真正深入了解 jQuery。这就是我想出的：

```
<?php echo '<a href="#TB_inline?height=450&amp;width=900&amp;inlineId=id-" class="thickbox     
portfolio-previous" value="'; echo $portnum; echo '">Previous</a>';echo '<a 
href="#TB_inline?height=450&amp;width=900&amp;inlineId=id-" class="thickbox portfolio-
next" value="'; echo $portnum; echo '">Next</a>';?>

    //Next Portfolio Button
$(".portfolio-next").hover(function(e) {
e.preventDefault();
var $this = $(this);
//Get the value of the link which is the same value as the current list item
var namer = parseInt($this.attr('value'));
//Find the current div in the dom and find the list item id next to it
var falcon = $('ul#portfolio-list').children('.portfolio-item-' +    
namer).nextAll('.portfolio-item:not(:.isotope-hidden)').attr('id');

//Find the href tag  id and add the value from falcon
var url   = $this.attr("href");
url   = url.substring(0, url.indexOf('=id'));
if(falcon === undefined) {
var falcon2 = $('ul#portfolio-list').children('.portfolio-item-' +   
namer).prevAll('.portfolio-item:not(:.isotope-hidden):first').attr('id');
$(this).attr('href', url+"=id-"+falcon2);
}else{
$(this).attr('href', url+"=id-"+falcon);
return;
}
});

//Previous Portfolio Button

$(".portfolio-previous").hover(function(e) {
e.preventDefault();
var $this = $(this);
//Get the value of the link which is the same value as the current list item
var namer = parseInt($this.attr('value'));
//Find the current div in the dom and find the list item id next to it
var falcon = $('ul#portfolio-list').children('.portfolio-item-' +     
namer).prevAll('.portfolio-item:not(:.isotope-hidden)').attr('id');

//Find the href tag  id and add the value from falcon
var url   = $this.attr("href");
  url   = url.substring(0, url.indexOf('=id'));
  if(falcon === undefined) {
  var falcon2 = $('ul#portfolio-list').children('.portfolio-item-' +   
namer).nextAll('.portfolio-item:not(:.isotope-hidden):last').attr('id');
  $(this).attr('href', url+"=id-"+falcon2);
}else{
$(this).attr('href', url+"=id-"+falcon);
return;
}
}); 
```

它可以工作，但任何关于如何优化的建议都将不胜感激。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T04:08:04.270

您有很多事情要解决，但这里有一些信息可以帮助您走上正确的道路：

# 1)

**window.location.load**不退出，您正在寻找的是`window.location.href`：

[请参阅MDN](https://developer.mozilla.org/en/DOM/window.location)的文档

[请参阅MSDN](http://msdn.microsoft.com/en-us/library/ms952653.aspx)的文档

**例如，** `window.location.href = url;`

* * *

# 2)

**此外，**

> ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

您正在使用以 开头的 ID 设置 li `#`。

有关更多信息，请参阅[此链接](https://stackoverflow.com/a/79022/352449)！

**解决方法：**

```
<li id="#TB_inline?height=450&width=900&inlineId=id-3" class="portfolio-item design portfolio-item-3 isotope-item">...</li> 
```

**可：**

```
<li class="portfolio-item design portfolio-item-3 isotope-item">
 <span style="display:none;">#TB_inline?height=450&width=900&inlineId=id-3</span>
</li> 
```

* * *

# 3)

您无缘无故地在 DOM 中上下移动。由于您的物品包装器上有一个 ID ( `#portfolio-list`)，因此您可以定位它并从那里开始！

**还，**

```
('.portfolio-item:not(:.isotope-hidden)') 
```

**应该：**

```
('.portfolio-item:not(.isotope-hidden)') 
```

**使用** `:not(:something)`, 用于定位具有特定状态的元素，例如`:checked`

请参阅[此链接](http://api.jquery.com/not-selector/)了解更多信息！

* * *

# 4)

由于变量`namer`获取已打开项目的当前 id，并且您想传递给下一个，因此**您的代码变为：**

```
$(document).ready(function(){
  $(".portfolio-next").click(function(e) {
    e.preventDefault();

    var $this = $(this);

    var namer = parseInt($this.attr('value'))+1;
    var url   = $this.attr("href");
        url   = url.substring(0, url.indexOf('=id'));

   window.location.href(url+"=id"+namer);
  });
}); 
```

请参阅此[小提琴示例](http://jsfiddle.net/zuul/dBwbf/)！

请注意，该标签`a`没有任何属性`value`，因此它是无效标记。

有关详细信息，请参阅[此链接](http://www.w3schools.com/tags/tag_a.asp)。

# java - 如何使用 JAVA 从 html 页面获取表格

> ID：10771218
> 
> 赞同：6
> 
> 时间：2012-05-27T02:27:15.010
> 
> 标签：java, arrays, jsoup, html-parsing

我正在做一个项目，我试图从互联网上获取财务报表并在 JAVA 应用程序中使用它们来自动创建比率和图表。

我正在使用的网站使用登录名和密码来访问表格。
标签是 TBODY，但 html 中还有 2 个其他 TBODY。

如何使用 java 将我的表格打印到一个 txt 文件中，然后我可以在我的应用程序中使用？解决此问题的最佳方法是什么，我应该阅读什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-27T02:28:59.243

如果这是我的项目，我会考虑使用 HTML 解析器，比如[jsoup](http://jsoup.org/)（尽管其他可用）。jsoup 站点有一个教程，在玩了一段时间之后，您可能会发现它非常易于使用。

例如，对于这样的 HTML 表格：

![在此处输入图像描述](../Images/7151cd3187dcd0b7efb5f2220710d2e5.png)

jsoup 可以像这样解析它：

```
import java.io.IOException;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

public class TableEg {
   public static void main(String[] args) {
      String html = "http://publib.boulder.ibm.com/infocenter/iadthelp/v7r1/topic/" +
            "com.ibm.etools.iseries.toolbox.doc/htmtblex.htm";
      try {
         Document doc = Jsoup.connect(html).get();
         Elements tableElements = doc.select("table");

         Elements tableHeaderEles = tableElements.select("thead tr th");
         System.out.println("headers");
         for (int i = 0; i < tableHeaderEles.size(); i++) {
            System.out.println(tableHeaderEles.get(i).text());
         }
         System.out.println();

         Elements tableRowElements = tableElements.select(":not(thead) tr");

         for (int i = 0; i < tableRowElements.size(); i++) {
            Element row = tableRowElements.get(i);
            System.out.println("row");
            Elements rowItems = row.select("td");
            for (int j = 0; j < rowItems.size(); j++) {
               System.out.println(rowItems.get(j).text());
            }
            System.out.println();
         }

      } catch (IOException e) {
         e.printStackTrace();
      }
   }
} 
```

导致以下输出：

```
headers
ACCOUNT
NAME
BALANCE

row
0000001
Customer1
100.00

row
0000002
Customer2
200.00

row
0000003
Customer3
550.00 
```

# nsmanagedobject - NSManagedObject 类中的实例变量就像一个类变量？

> ID：10771233
> 
> 赞同：1
> 
> 时间：2012-05-27T02:32:45.697
> 
> 标签：nsmanagedobject, ivar

仅限 IOS 5，带有 ARC。在我的核心数据模型类中：

```
//  Planet.h //

#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@interface Planet : NSManagedObject

@property (nonatomic, retain) NSString *name;
@property (nonatomic, retain) NSNumber *diameter_km;
@property (nonatomic, retain) NSNumber *mass_kg;

-(void) setVisited:(BOOL)flag;
-(BOOL) isVisited;

@end

// Planet.m //

//#import "Planet.h"

@implementation Planet

@dynamic name;
@dynamic diameter_km;
@dynamic mass_kg;

BOOL visitedByHumans;       // not a core data entity; just an ivar

-(void)setVisited:(BOOL)flag {
    visitedByHumans = flag;
}
-(BOOL)isVisited {
    return visitedByHumans;
}

@end 
```

我使用 MagicalRecord 创建“Venus”和“Mars”。在我的视图控制器中，我使用标签和按钮来测试上述内容。测试表明，当我“访问”火星时，金星也会被访问。如果我将 ivarvisitedByHumans 切换为非核心数据属性，它会按预期工作。所以我不再“卡住”，但我想了解 ivar 的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T06:41:19.803

`vistedByHumans`实际上不是 ivar，而是子类的全局变量`Planet`。因此，无论实际访问哪个实例，似乎都会访问任何和每个“行星”实例。如果你想让它成为一个真正的 ivar，你需要在`@property`你`@interface`喜欢`name`的 、`diameter_km`和中添加一个`mass_kg`（尽管这三个当然是为你的模型生成的）。例如：

```
@property (nonatomic,assign,getter=isVisited) BOOL visited; 
```

并在您的实施中：

```
@synthesize visited=visitedByHumans; 
```

要不就

```
@synthensize visited; 
```

由于您似乎无论如何都在使用这些方法（`visited`和），而不是真正直接访问.`setVisited:``visitedByHumans`

另外，请务必删除代码行

```
BOOL visitedByHumans; 
```

以及两个方法定义`isVisited`和`setVisited:`。当您创建它们时，它们将为您生成`@synthesize`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-28T04:31:12.327

根据您提供的信息无法确定。您的描述与代码不匹配——尽管您说了什么，`visitedByHumans`但绝对不是该代码中的实例变量。这让我想知道在您将其从使用 Core Data 转换为`visitedByHumans`. 基本上，您解释说当您使用 Core Data 时代码无法正常工作，但随后呈现完全不同的代码，实际上并没有使用 Core Data。我不知道当您尝试将 Core Data 用于此属性时您在做什么，所以我无法判断您可能做错了什么。如果那个声明`visitedByHumans`当时在代码中，那几乎可以肯定你把事情搞砸了。同样地，`super`的实施，你会得到不好的结果。但是，如果您想知道为什么您的 Core Data 代码不起作用，请*粘贴**该**代码*，而不是一些完全不同的代码。当你寻求帮助时，不要让人们猜测你在做什么。

# python - 用于在python中对多维数组进行排序的适当数据结构？

> ID：10771234
> 
> 赞同：3
> 
> 时间：2012-05-27T02:32:49.740
> 
> 标签：python, data-structures

对于我想组织成一个多维数组然后排序的各种字符串（单词），我有三个数值（权重、计数、贡献）。为此，我在字典中创建了列表，其中数值在列表中，字符串是键：

```
print_dictionary[word] = [weight,count,contribution] 
```

如何按“贡献”（列表中的第三个值）先按升序然后按降序排序，并显示排序列表的前 10 个项目。我怎样才能做到这一点？

例如，对于以下 print_dictionary：

```
print_dictionary[sam] = [2,7,1]
print_dictionary[sun] = [4,1,3]
print_dictionary[dog] = [1,3,2] 
```

我希望他们能够按升序对贡献进行排序：

```
Word:   Weight:   Count:    Contribution:
sam     2         7         1
dog     1         3         2
sun     4         1         3 
```

我看不出如何使用 itemegetter：

```
sorted(print_dictionary, key=itemgetter(2)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T03:17:31.787

您可以将匿名函数作为键传递给`sorted`. 这使用多维字典的第三个成员作为键：

```
>>> d = {'a': [1, 4, 7], 'b': [2, 3, 9], 'c': [3, 2, 8]}
>>> for key in sorted(d, key=lambda x: d[x][2]):
...    print key, d[key]
a [1, 4, 7]
c [3, 2, 8]
b [2, 3, 9] 
```

对于降序，使用`reverse=True`. 要限制结果，请添加`[:N]`：

```
sorted(d, key=lambda x: d[x][2], reverse=True)[:2]

# b [2, 3, 9]
# c [3, 2, 8] 
```

[更多关于`sorted`Python 和排序的](http://wiki.python.org/moin/HowTo/Sorting)信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T03:17:22.187

您无法真正对字典进行排序。当您尝试时，您实际上只是对字典中的键列表进行排序。您可以使用查看值中的第三项的自定义排序比较来做到这一点。

```
sorted(print_dictionary, key=lambda word: print_dictionary[word][2]) 
```

所以要生成你的报告，这样的事情会起作用：

```
sorted_keys = sorted(print_dictionary, key=lambda word: print_dictionary[word][2])

print "Word:\tWeight:\tCount:\tContribution"      
for i in range(10): # or however many you want
    word = sorted_keys[i]
    values = print_dictionary[word]
    print "\t".join([word]+[str(n) for n in values]) 
```

# php - 为什么我在此 PHP 代码中收到解析错误？

> ID：10771237
> 
> 赞同：0
> 
> 时间：2012-05-27T02:33:42.880
> 
> 标签：php

这是我的错误：

> 解析错误：语法错误，意外的 T_ENCAPSED_AND_WHITESPACE，在第 19 行的 /home/socia125/public_html/poke.php 中需要 T_STRING 或 T_VARIABLE 或 T_NUM_STRING

这是我的代码的第 19 行：

```
$sql="INSERT INTO feed (user_id, feed_text, time) VALUES($user,'You'.mysql_real_escape_string($_POST['kiss_option']).'yourself',UNIX_TIMESTAMP())"; 
```

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T02:37:32.253

```
$sql = "INSERT INTO feed (user_id, feed_text, time)
        VALUES($user, 'You ".mysql_real_escape_string($_POST['kiss_option'])." yourself', UNIX_TIMESTAMP())"; 
```

# ios - 检查 Apple 是否退还了不可续订的订阅？

> ID：10771240
> 
> 赞同：4
> 
> 时间：2012-05-27T02:34:05.440
> 
> 标签：ios, in-app-purchase, subscription, storekit

我正准备在我的 iOS 应用中包含订阅功能的应用内购买。根据我所阅读的内容，我需要使用不可更新的订阅类型（不是自动更新的）。一些客户欺骗系统并从 Apple 获得退款，但他们仍然可以使用他们的应用程序。由于不可更新订阅必须由外部服务器（我们）处理，我们显然会记录订阅购买、收据等。

收据验证中有没有办法确定订阅是否仍然有效？我不确定不可更新订阅类型验证是否只是测试收据是否有效或订阅是否仍然有效。

例如，您进行购买，收据验证。如果您通过 iTunes 投诉取消您向 Apple 购买的产品，而 Apple 给予您退款，如果我稍后再次验证该收据，它会返回无效吗？我想知道我们是否应该建立一个频繁的验证程序来捕获任何已退款的订阅。我们有一些条款将持续两年，因此我们必须按照既定的时间表验证这些条款。我们最初计划在确实存在这种情况的情况下使用自动续订订阅，因为它是确定订阅是否续订的方式，但现在学习同步订阅将需要不可续订订阅类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T10:08:15.947

看到这个关于[退款](https://stackoverflow.com/questions/6439482/how-does-apple-notify-ios-apps-of-refunds-of-in-app-purchases-iap)的问题。

Apple 没有为您提供确定交易是否已退款的方法。由于官方不支持退款，因此他们希望您继续将商品交付给退款的用户。

# javascript - 根据视口的高度多页

> ID：10771242
> 
> 赞同：2
> 
> 时间：2012-05-27T02:34:25.333
> 
> 标签：javascript, jquery, jquery-mobile

我有一个项目，我需要根据视口的高度设置自动分页。

不应该出现垂直滚动。如果内容超过高度应该开始自动分页。

内容将是 div 标签内的几个段落（50 到 100）。这些段落应该适合分页。

有没有 jQuery 插件可以做到这一点？

或者其他一些适应不同屏幕尺寸的解决方案......

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-27T08:38:01.960

我希望这些插件中的任何一个都可能有用。

*   [jQuery 滚动分页](http://andersonferminiano.com/jqueryscrollpagination/)
*   [螺丝 - 一个 jQuery 插件](http://jasonlau.biz/home/jquery/screw-a-jquery-plugin)
*   [滚动扩展插件](http://contextllc.com/tools/jQuery-infinite-scroll-live-scroll)
*   [无限滚动插件](http://www.webdeveloperjuice.com/2010/02/24/create-infinte-scroll-effect-using-jquery-with-demo/)
*   [无尽滚动插件](http://www.webresourcesdepot.com/load-content-while-scrolling-with-jquery/)
*   [触发无限滚动](http://www.infinite-scroll.com/infinite-scroll-jquery-plugin/)
*   [Infinite Ajax Scroll，一个 jQuery 插件](http://www.fieg.nl/infinite-ajax-scroll-a-jquery-plugin)

[参考](http://designbeep.com/2011/08/12/12-jquery-infinite-scrollingscroll-read-plugins-for-content-navigation/)

# perl - DBIx::Class 抽象父 ResultSet

> ID：10771244
> 
> 赞同：2
> 
> 时间：2012-05-27T02:35:09.110
> 
> 标签：perl, dbix-class

我正在尝试找出一种干净的 OO 方法来实现我在使用 DBIx::Class 时遇到的问题。我有一个 User 表，其中包含所有用户共有的信息。每个用户还可以有许多不同的类别，每个类别都有自己独特的所需信息。因此，例如，用户可能是管理员和作者。admin 和 author 类有单独的表。

我想要做的是创建一个通用基类来访问用户对象中的所有类。因此，一个名为 Schema::UserClass 的基类和两个名为 Schema::UserClass::Admin 和 Schema::UserClass::Author 的子类。我希望能够做的事情是：

```
# Get current user
my $user = MyApp->get_user();

# Get user classes
my @classes = $user->classes->all();
for my $class (@classes) {
    # Print class name
    print $class->name;
} 
```

这里提出了一个类似的问题：http: [//dbix-class.35028.n2.nabble.com/OO-advice-do-a-subclass-do-something-else-td5614176.html](http://dbix-class.35028.n2.nabble.com/OO-advice-do-a-subclass-do-something-else-td5614176.html)。但我认为该解决方案是子部分，因为它需要为每个类添加一个新关系。

我看不出如何在了解所有子类的情况下与基类建立关系。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T16:23:24.593

我发现的解决方案也不是很好，但它确实有效。如果我有时间，我可能会将这段代码合并到一个 CPAN 模块中，让它更漂亮一些。

```
package ParentSchema::Result::Class;

use strict;
use warnings;

use parent 'DBIx::Class::Core';

__PACKAGE__->add_columns(
  "user_id",
  {
    data_type => "integer",
    size => 32,
    is_foreign_key => 1,
    is_auto_increment => 0,
    is_nullable => 0,
    default_value => '',
  },
);

# stuff common to all schemas

__PACKAGE__->belongs_to(
  "user",
  "Schema::Result::User",
  { 'foreign.id' => "self.user_id" },
  { is_deferrable => 1, on_delete => "CASCADE", on_update => "CASCADE" },
);

1;

package Schema::Result::Class::Author

use strict;
use warnings;

use parent 'ParentSchema::Class';

__PACKAGE__->table('class_author');

# class spesific stuff

__PACKAGE__->meta->make_immutable;

1;

package Schema::Result::User;

use strict;
use warnings;

use parent 'DBIx::Class::Core';

use Module::Pluggable::Object;
use String::CamelCase qw(decamelize);

__PACKAGE__->add_columns(
  "id",
  {
    data_type => "integer",
    size => 32,
    is_auto_increment => 1,
    is_nullable => 0,
    default_value => '',
  },
);

my $class_path = 'Schema::Result::Class';

my $mp = Module::Pluggable::Object->new(
    search_path => [ $class_path ]
);
my @class_plugins = $mp->plugins;

foreach my $class (@class_plugins) {
  (my $name = $class) =~ s/^\Q${class_path}\E//;
  __PACKAGE__->might_have(
    decamelize($name),
    $class,
    { "foreign.user_id" => "self.id" },
    { cascade_copy => 0, cascade_delete => 0 },
  );
}

__PACKAGE__->meta->make_immutable;

1; 
```

# iphone - 应用程序进入后台时运行后台线程

> ID：10771245
> 
> 赞同：2
> 
> 时间：2012-05-27T02:35:28.430
> 
> 标签：iphone, ios, background-process, nsthread

当应用程序进入后台状态时，我需要在后台安排任务。我必须这样做才能每次调用远程服务，然后在远程服务发生某些事件时显示本地通知。（我知道它看起来像 RPN，是的，但由于某种原因我无法使用 PRM）

我试过这段代码：

```
- (void)applicationDidEnterBackground:(UIApplication *)application{

   [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:^(void){
        remoteServiceCallThread = [[NSThread alloc] initWithTarget:self selector:@selector(doRemoteCall:) object:nil];
        [remoteServiceCallThread start];
   }];
}

- (void)applicationWillEnterForeground:(UIApplication *)application{
    [remoteServiceCallThread cancel];   
} 
```

我在 doRemoteCall 选择器中放置了断点，放置不起作用。

也许我的方法不是最好的。如果您有任何其他技巧可以像我描述的那样执行此操作，我会接受。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T03:02:05.263

您没有启动线程，它的初始化代码位于过期处理程序块中，它将在应用程序因超时关闭之前被调用：

> 在应用程序的剩余后台时间达到 0 之前不久将调用的处理程序。您应该使用此处理程序来清理并标记后台任务的结束。未能明确结束任务将导致应用程序终止。处理程序在主线程上同步调用，因此在通知应用程序时会暂时阻止应用程序的挂起。

如果您的应用程序不支持其中一种后台模式（gps、音频、voip），则该任务应仅活动 10 分钟（由 iOS 驱动）。

`UIBackgroundTaskIdentifier`如果用户将应用程序带到前台或任务时间即将结束（即调用处理程序块时），您还需要保留返回的引用以便能够将其标记为已结束。

# php - 如何使用 PHP 从字符串中删除子字符串？

> ID：10771248
> 
> 赞同：15
> 
> 时间：2012-05-27T02:35:59.063
> 
> 标签：php, string

给定以下字符串

```
http://thedude.com/05/simons-cat-and-frog-100x100.jpg 
```

我想用`substr`or `trim`（或任何你觉得更合适的）来返回这个

```
http://thedude.com/05/simons-cat-and-frog.jpg 
```

也就是说，要删除`-100x100`. 我需要的所有图像都将其标记到文件名的末尾，紧接在扩展名之前。

在 SO re Ruby 和 Python 上似乎有对此的回应，但不是 PHP/特定于我的需求。

[如何删除字符串的左侧部分？](https://stackoverflow.com/questions/599953/how-to-remove-left-part-of-a-string-in-python)

[从字符串的开头删除 n 个字符](https://stackoverflow.com/questions/2782318/remove-substring-from-a-string)

[从字符串中删除子字符串](https://stackoverflow.com/questions/5367164/remove-substring-from-the-string)

有什么建议么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-27T02:41:41.987

如果要匹配任何宽度/高度值：

```
 $path = "http://thedude.com/05/simons-cat-and-frog-100x100.jpg";

  // http://thedude.com/05/simons-cat-and-frog.jpg
  echo preg_replace( "/-\d+x\d+/", "", $path ); 
```

演示：[http ://codepad.org/cnKum1kd](http://codepad.org/cnKum1kd)

使用的模式非常基本：

```
/ 表示模式的开始
- 字面 - 字符
\d+ 一个数字，1 次或多次
x 字面量 x 字符
\d+ 一个数字，1 次或多次
/ 表示模式的结束
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-05-27T02:38:00.650

```
$url = "http://thedude.com/05/simons-cat-and-frog-100x100.jpg";
$new_url = str_replace("-100x100","",$url); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-27T02:46:31.203

```
$url = str_replace("-100x100.jpg", '.jpg', $url); 
```

用于`-100x100.jpg`防弹解决方案。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-27T02:38:00.643

如果`-100x100`是您尝试从所有字符串中删除的唯一字符，为什么不使用`str_replace`？

```
$url = "http://thedude.com/05/simons-cat-and-frog-100x100.jpg";
str_replace("-100x100", "", $url); 
```

# objective-c - 在 segue 推送之前测试

> ID：10771258
> 
> 赞同：3
> 
> 时间：2012-05-27T02:39:20.230
> 
> 标签：objective-c, storyboard, segue

在执行 segue 推送之前，我正在尝试在我的多视图应用程序中进行一些测试。

当用户按下按钮时，它会执行测试，如果没问题：加载下一个视图，如果不是，我不想加载下一个视图（停留在第一个视图或加载另一个视图）

有没有办法做到这一点 ？

Xcode 4.3.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T03:19:10.083

如果测试正常，您可以使用 performSegueWithIdentifier:sender: 触发 segue，如果不正常，则什么也不做或推送另一个视图控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T03:16:16.963

使您的方法根据其成功返回一个布尔值，这样您就可以在 if-else 块中对其进行测试。

例如

```
-(BOOL)myMethodThatDoesStuff:(NSStuff*)stuff {

    //run the tests and return true
    [self.myView doTrueStuff];
    if (trueStuff) {
        return YES;
    }
    return NO;

}

-(void)conditionalPush
    if ([self myMethodThatDoesStuff:stuff])
         //true
    else {
        //false
    } 
```

# ruby-on-rails - Ruby 模型 - 在初始化时设置值

> ID：10771259
> 
> 赞同：1
> 
> 时间：2012-05-27T02:40:08.223
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我从 ruby​​ on rails 开始。我有一个简单的脚手架。

这是我的模型：

```
class Pet < ActiveRecord::Base
  belongs_to :user
  belongs_to :petRace
  attr_accessible :birth, :exactAge, :nick
  def initialize
    birth = DateTime.now.in_time_zone.midnight
  end
end 
```

html代码

```
<%= form_for @pet, :html => { :class => 'form-horizontal' } do |f| %>
  <div class="control-group">
    <%= f.label :nick, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :nick, :class => 'text_field' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :birth, :class => 'control-label' %>
    <div class="controls">
    <div class="input-append date datepicker" data-date="<%=@pet.birth.strftime("%d/%m/%Y") %>" data-date-format="dd/mm/yyyy">
        <%= f.text_field :birth, :class => 'input-append', :value => @pet.birth.strftime("%d/%m/%Y") %>
    <span class="add-on"><i class="icon-th"></i></span>
    </div>
  </div>

  <div class="form-actions">
    <%= f.submit nil, :class => 'btn btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                pets_path, :class => 'btn' %>
  </div>
<% end %> 
```

控制器：

```
 def new
    @pet = Pet.new   
    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @pet }
    end
  end 
```

我只是替换了 :birth 属性的原始代码，如下所示：

```
<%= f.text_field :birth, :class => 'input-append', :value => @pet.birth.strftime("%d/%m/%Y") %> 
```

当我选择新选项时，出生属性似乎没有价值，我得到了这个执行

```
undefined method `[]' for nil:NilClass

Extracted source (around line #11):

8:      
9:  </script>
10: <%end%>
11: <%= form_for @pet, :html => { :class => 'form-horizontal' } do |f| %>
12:   <div class="control-group">
13:     <%= f.label :nick, :class => 'control-label' %>
14:     <div class="controls">

 app/views/pets/_form.html.erb:11:in `_app_views_pets__form_html_erb__3291519358612565784_70159905628180'
app/views/pets/new.html.erb:4:in `_app_views_pets_new_html_erb__1494749415896629355_70159907398120'
app/controllers/pets_controller.rb:28:in `new' 
```

据我了解，出生值是用实际日期和时间设置的（在初始化方法中）。我错了还是错过了什么？当我编辑记录时，我没有问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T04:20:43.823

正如@Rob 在他的评论中提到的那样，有多种方法可以设置默认值。

@Dave 在他的评论中提到的回调也是一个不错的主意。

`after_initialize`我怀疑该方法对您不起作用的主要原因是您需要明确使用`self`as in`self.birth =`而不是`birth =`. Ruby 认为您正在定义一个名为的局部变量，而不是为通过内部实现`birth`的 ActiveRecord 的属性分配一个值。这就是为什么即使您似乎为它分配了一个值。`birth``method_missing``@pet.birth``nil`

另请注意，当您通过从数据库加载它们来实例化它们时，即使对于持久化对象也会调用 after_initialize 回调。`initialize`在为新记录分配属性后也会调用它。因此，为了防止用户指定的值被默认值践踏（对于持久记录和新记录），请务必执行以下操作：

```
self.birth = value if birth.nil? 
```

强调`if birth.nil?`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T04:32:54.537

那么这里是解决方案。首先，没有执行 after_initialize 方法。但是在这个修改之后它起作用了：

```
class Pet < ActiveRecord::Base
  belongs_to :user
  belongs_to :petRace
  attr_accessible :birth, :exactAge, :nick
  after_initialize :init
  protected
    def init
      self.birth = DateTime.now.in_time_zone.midnight
    end
end 
```

# c++ - 为什么长整数在某些系统上占用超过 4 个字节？

> ID：10771260
> 
> 赞同：0
> 
> 时间：2012-05-27T02:40:32.123
> 
> 标签：c++, long-integer

我知道标准说 a 的大小`long integer`取决于实现，但我不知道为什么。

它需要做的就是能够存储 -2147483647 到 2147483647 或 0 到 4294967295。

假设 1 个字节是 8 位，那么这永远不需要超过 4 个字节。那么，是否可以肯定地说，只有一个字节少于 8 位时，一个长整数才会占用超过 4 个字节？或者还有其他可能吗？就像效率低下的实现浪费空间一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T02:45:53.593

大于 32 位的一个明显用途`long`是提供更大的可用范围。

例如，在`long long int`（和公司）加入标准之前，DEC 销售 64 位 (Alpha) 处理器和 64 位操作系统。他们建立了一个（符合）系统：

```
char = 1 byte
short = 2 bytes
int = 4 bytes
long = 8 bytes 
```

至于他们为什么这样做：嗯，一个明显的原因是他们的客户可以访问 64 位类型并利用他们的 64 位硬件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T02:45:16.640

额外的字节不会浪费空间。更大的范围非常有用。该标准指定了*最小*范围，而不是精确范围本身；拥有更广泛的类型并没有错。

当标准最初规定 an`int`至少应为 16 位时，普通处理器的寄存器不会大于该值。代表一个`long`拿了两个寄存器和特殊操作！

但后来 32 位成为标准，现在`int`s 到处都是 32 位，`long`s 是 64。现在大多数处理器都有 64 位指令，并且 a`long`通常可以存储在单个寄存器中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T02:45:36.463

你假设了很多事情：

*   一个字节是`CHAR_BIT`位宽

PDP-10 的字节范围为 1 到 36 位。DEC VAX 支持对 128 位整数类型的操作。因此，有充分的理由超越标准的要求。

*   数据类型的限制在 §3.9.1/8 中给出

> 标准模板 std::numeric_limits (18.3) 的特化应指定实现的每种算术类型的最大值和最小值。

查找`<limits>`标题。

[您可能会对 Jack Klein 的这篇](http://www.bandwidthco.com/whitepapers/programming/c-c++/Integer%20Types%20in%20C%20and%20C++.pdf)文章感兴趣！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T04:01:47.533

如果您想要一个特定大小的整数，那么您想要使用具有指定大小的类型：

int8_t int16_t int32_t int64_t int128_t ...

这些在一些随机头文件中可用（它取决于您使用的操作系统，尽管在 C++ 中它似乎是 <stdint>）

您在开头使用 au 的未签名版本（uint32_t）。

其他人已经回答了为什么大小会这样那样。

请注意，最新的 Intel 处理器也支持 256 位。多么浪费，嘿？！8-)

哦！time_t 也开始使用 64 位。在 2068 年，32 位的 time_t 将变为负数，并为您提供 1800 年末的日期......这是在一些事情上采用 64 位的一个很好的理由。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-11T19:18:26.683

使用 8 字节整数的原因之一是能够处理超过 4 GB 的内存。IE。2^32 = 4 GB。2^64 = 嗯，很多！

就个人而言，我使用 8 字节整数在双浮点数上实现基数排序（将浮点数转换为整数，然后用它做一些不值得在这里描述的神奇事情。:)）

# naming-conventions - 什么时候给 ADT 一个名称数据成员是个好主意？

> ID：10771261
> 
> 赞同：1
> 
> 时间：2012-05-27T02:41:00.833
> 
> 标签：naming-conventions

如果我有`Store`课，我可以写

```
Store starbucks; 
```

这里，变量名是对象本身的名称。

或者，我可以写

```
Store shop( "starbucks" ); 
```

其中`name`内部变量`Store`用 初始化`"starbucks"`。在这里，变量名称是通用的，但对象包含特定的商店名称。

哪个更可取，什么时候？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T03:21:01.107

我想不出在现实世界中用于`Store starbucks;`. 任何时候你想添加一个新的商店，你都必须编写所有新代码并重新编译。在测试数据之外，对于单元测试等等，永远不应该使用它。

出于类似的原因，硬编码`Store shop( "starbucks" );`也是一个坏主意。同样，更改实例数据不应导致您重新编译代码。

我编写的大多数代码都使用用户输入和数据存储的组合来创建实例。这是做的类似`Store shop; shop.load();`或更可能的事情`Store shop = storeFactory.getStore();`

另外，我更喜欢使用对象的类型作为对象的名称。这将使示例`Store store = storeFactory.getStore();`。它降低了读者的认知负担，因为他们不必记住 shop 是 Store 类型。

# java - 使用 Eclipse 的 Maven 项目无法编译

> ID：10771265
> 
> 赞同：1
> 
> 时间：2012-05-27T02:41:42.613
> 
> 标签：java, eclipse, maven

我一直在尝试使用 Eclipse 和 Maven 制作一个简单的 Spring 项目，但我遇到了问题。我要解决的第一个问题是我的代码似乎无法编译。

例如，如果在我键入的类`Strrrring test = new String();`中，Eclipse 根本没有显示错误。我检查了项目的属性，在 Java 编译器下，一切似乎都很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T02:45:56.433

**命令行**

如果您安装了 maven，您可以通过`mvn`命令使 maven 项目在 Eclipse 中工作。在项目的根目录运行：

```
mvn eclipse:eclipse 
```

如果要查看项目中使用的工件的源代码/文档，可以运行以下命令：

```
mvn eclipse:eclipse -DdownloadSources=true 
```

**Eclipse 插件**

或者如果您更喜欢使用 Eclipse 插件，您可以安装[m2eclipse](http://www.eclipse.org/m2e/download/)插件并重新导入项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-27T13:59:09.023

右键单击该项目并以`maven clean`和运行`maven install`。它会正常工作。

# c++ - 使用渲染到纹理的多通道着色

> ID：10771266
> 
> 赞同：1
> 
> 时间：2012-05-27T02:42:10.100
> 
> 标签：c++, glsl, render-to-texture, openscenegraph, multipass

我正在尝试使用 OpenSceneGraph 实现多通道渲染方法。但是，我不完全确定我的问题是理论上的还是由于缺乏对 OSG 的应用知识。到目前为止，我已经通过使用正交投影渲染到纹理成功地实现了多通道着色，但我似乎无法使透视投影工作。

可能是我不太明白如何实现多通道着色。当然，我必须使用多通道着色器将整个场景预渲染为纹理，然后在最终渲染中使用该纹理。但是，我不是在谈论为场景中的每个对象创建单独的纹理，而是有效地捕获整个预渲染场景的屏幕截图。然后，仅从该纹理，将渲染效果应用于各个几何图形。

我假设这意味着我必须对顶点着色器中的每个几何图形进行额外的顶点坐标转换。也就是说，经过计算：

```
gl_Position = ModelViewProjectionMatrix * Vertex; 
```

我需要更进一步并计算顶点的屏幕坐标，以便正确映射顶点（再次，假设纹理由场景的整个屏幕截图组成）。

如果我是正确的，那么我必须能够在与最终渲染中使用的视图相同的透视图中预渲染场景，而不是正交视图。这就是我遇到麻烦的地方。我可以让正交视图做我想做的事，但不是透视图。

我的方法正确吗？我能想象的唯一其他方法是将所有内容渲染到屏幕填充四边形（实际上，与转换为屏幕坐标相同），但这并不能减轻在预渲染阶段使用透视投影的需要.

想法？链接？？

编辑：我还应该指出，在我成功的尝试中，我只使用了片段着色器。透视投影有效，但是，当然，我使用的屏幕对齐四边形是偏移而不是居中的。我添加了一个直通顶点着色器，一切都变成了空白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T01:20:17.627

事实证明，我的方法是正确的。它特别好，因为它避免了在我的场景图中添加另一个相机来渲染最终输出——我可以简单地使用主相机。不幸的是，这意味着我所有的输出纹理都以屏幕分辨率渲染，而不是适合对象大小的分辨率。也就是说，如果我的屏幕是 1024 x 1024，那么输出纹理也是如此，图中每个预渲染相机都有一个。效率不高，但现在可以了。

# javascript - AJAX 重载方法？

> ID：10771267
> 
> 赞同：1
> 
> 时间：2012-05-27T02:42:32.003
> 
> 标签：javascript, ajax

我尝试在不刷新 [AJAX ...] 的情况下重新加载页面，但似乎没有工作：/

```
function refresh() {
   link = document.location;
   xmlhttp=new XMLHttpRequest();
   xmlhttp.onreadystatechange=function() {
      if (xmlhttp.readyState==4 && xmlhttp.status==200) {
         document.getElementsByTagName('table').innerHTML=xmlHttp.responseText;
      }
   }
   xmlhttp.open("GET",link,true);
   xmlhttp.send();
} 
```

有谁知道怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:01:17.263

不要使用innerHTML，它是一种专有的Microsoft Jscript 方法，不能正确注册DOM。例如，如果你用它来导入一个带有 ID 的元素，它不像把王冠戴在王后的头上，更像是把尸体扔在桥上，你可能见过也可能没见过，很可能没有。坚持将重要节点与 AJAX 一起使用，您的 AJAX 加载内容将可靠地工作。另外代码不是文本，不要使用 responseText，使用 responseXML。然后不必重新请求相同的内容，您可以简单地取消隐藏已经在 DOM 中的图层，除非您希望内容在过去 X 秒内已更新，在这种情况下，您可以删除元素并重做AJAX 请求。请参阅我的视频以进行视觉演示...

[http://www.youtube.com/watch?v=-iVebYrrz9U](http://www.youtube.com/watch?v=-iVebYrrz9U)

# javascript - 一位或两位数字正则表达式

> ID：10771269
> 
> 赞同：17
> 
> 时间：2012-05-27T02:42:53.390
> 
> 标签：javascript, regex, numbers, digits

我有下面的代码。它仅在我有 2 位数字时才有效。如果我有 1 位数字不起作用。我想在这两种情况下工作：一位或两位数。
`var numberRegex = /^[1-9][0-9]$/;`
我已经尝试过这样的事情，但不幸的是不起作用：
`var numberRegex = /^[1-9]?[1-9][0-9]$/;`
感谢您的支持。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-27T02:44:12.440

试试这个：

```
/^\d{1,2}$/; 
```

阅读您所拥有的内容，您似乎不想接受`01`.

```
/^\d{1}|[1-9]\d{1}$/; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-28T16:58:21.353

试试这个。

```
/^[0-9]|[0-9][0-9]$/ 
```

这应该可以完成这项工作。使用 Or 运算符可以做到这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-01T16:00:57.050

这有效：

```
/^([0-9]{0,1}([1-9][0-9]){0,2})$/ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T03:52:20.853

试试这个正则表达式：`/^[1-9]\d{0,1}$/`

# python - 正在生成多少查询？

> ID：10771270
> 
> 赞同：1
> 
> 时间：2012-05-27T02:43:25.873
> 
> 标签：python, django, django-models

我有以下模型：

```
class JobApplication(models.Model):
    profile = models.ForeignKey(UserProfile)
    job = models.ForeignKey(JobPost)

    def __unicode__(self):
        return "%s - %s" % (self.profile.full_name, self.job.get_job_name())

# in JobPost model
    def get_job_name(self):
        if self.name:
            return self.name
        name = "%s - %s" % (self.production.name, self.position.position)
        return name 
```

我如何确定生成查询集时生成了多少查询`JobApplication`？通常我会`print Model.objects.filter().query`。在这种情况下我该怎么做才能看到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:13:40.970

您可以使用内置的日志记录工具将每个生成的查询输出到开发服务器上的终端。将此添加到您的 settings.py 文件中：

```
# settings.py
LOG_LEVEL = 'DEBUG' if DEBUG else 'WARNING'
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'formatters': {
        'simple': {
            'format': '\n%(thread)d: %(levelname)s %(message)s'
        },
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'class': 'django.utils.log.AdminEmailHandler'
        },
        'console': {
            'level': 'DEBUG',
            'class': 'logging.StreamHandler',
            'formatter': 'simple'
        },
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
        'multiprocessing': {
            'handlers': ['console'],
            'level': LOG_LEVEL,
            'propagate': False,
        },
        'django': {
            'handlers': ['console'],
            'propagate': True,
            'level': LOG_LEVEL,
        },
        'cache_logger': {
            'handlers': ['console'],
            'propagate': True,
            'level': LOG_LEVEL,
        }
    }
} 
```

这样，只要 DEBUG 为 True，您就可以加载视图或调用函数或任何内容，并查看生成的查询和完成所需的时间：

```
4072: DEBUG (0.016) SELECT "django_content_type"."id", "django_content_type"."name", "django_content_type"."app_label", "django_content_type"."model"
FROM "django_content_type" WHERE "django_content_type"."id" = 9 ; args=(9,) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:43:37.983

从文档中，

```
>>> from django.db import connection
>>> connection.queries
[{'sql': 'SELECT polls_polls.id,polls_polls.question,polls_polls.pub_date FROM         polls_polls',
'time': '0.002'}] 
```

参考链接：[点击这里查看文档](https://docs.djangoproject.com/en/dev/faq/models/#how-can-i-see-the-raw-sql-queries-django-is-running)

# extjs4 - 在 ExtJs 4 中更改 TreeGrid 样式

> ID：10771271
> 
> 赞同：2
> 
> 时间：2012-05-27T02:43:47.957
> 
> 标签：extjs4, treegrid

我正在尝试使用具有不同颜色的示例 treegrid 的交替行来更改样式：[http](http://docs.sencha.com/ext-js/4-0/#!/example/tree/treegrid.html) ://docs.sencha.com/ext-js/4-0/#!/example/tree/treegrid.html 。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:35:32.070

您是否尝试过使用`getRowClass`配置？

```
viewConfig: {
    getRowClass: function(record) {
        if(!record) return '';
        if(record.data.id == user.id) return 'bg-yellow';
    }
}, 
```

# c++ - == 为 std::map 定义的运算符

> ID：10771277
> 
> 赞同：2
> 
> 时间：2012-05-27T02:44:51.593
> 
> 标签：c++, map

`std::map`http://www.cplusplus.com/reference/stl/map/上的引用 没有提到任何操作员[。](http://www.cplusplus.com/reference/stl/map/)`==`但是我的代码包含`m1==m2`编译（其中 m1 和 m2 属于类型`map<,>`）。地图的作用是什么`==`？我在看一个过时的参考吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T02:47:38.690

是的，您正在查看一个过时的参考。它可以满足您的期望：[http ://en.cppreference.com/w/cpp/container/map/operator_cmp](http://en.cppreference.com/w/cpp/container/map/operator_cmp)

# android - 格式化日历日期

> ID：10771279
> 
> 赞同：42
> 
> 时间：2012-05-27T02:45:13.730
> 
> 标签：android, date, formatting, calendar

我只希望日期显示如下：

`Saturday, May 26, 2012 at 10:42 PM`

到目前为止，这是我的代码：

```
Calendar calendar = Calendar.getInstance();
String theDate = calendar.get(Calendar.MONTH) + " " + calendar.get(Calendar.DAY_OF_MONTH) + " " + calendar.get(Calendar.YEAR);

lastclick.setText(getString(R.string.lastclick) + " " + theDate); 
```

这显示了月、日和年的数字，但是必须有更好的方法来做到这一点？是不是有一些简单的方法可以做到这一点，比如使用 PHP 的`date()`函数？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-05-27T02:50:41.727

```
Calendar calendar = Calendar.getInstance();
SimpleDateFormat format = new SimpleDateFormat("EEEE, MMMM d, yyyy 'at' h:mm a");
System.out.println(format.format(calendar.getTime())); 
```

运行上述代码会输出当前时间（例如，`Saturday, May 26, 2012 at 11:03 PM`）。

有关详细信息，请参阅[Android 文档`SimpleDateFormat`](http://developer.android.com/reference/java/text/SimpleDateFormat.html)。

的格式规范与PHP的函数`SimpleDateFormat`类似：[`date`](http://php.net/manual/en/function.date.php)

```
echo date("l, M j, Y \a\\t g:i A"); 
```

你是对的。与 Java 代码相比，PHP 代码要简洁得多。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-27T02:51:39.110

根据需要使用以下格式设置日期。参考这个[链接](http://developer.android.com/reference/java/util/Formatter.html)

```
 Calendar calendar = Calendar.getInstance();
 lastclick.setText(getString(R.string.lastclick) + " " + String.format("%1$tA %1$tb %1$td %1$tY at %1$tI:%1$tM %1$Tp", calendar)); 
```

其中 %1$tA 代表 staurday，%1$tb 代表 5 月，

等等...

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-02-20T19:24:44.820

这实际上是一个相当微妙的问题，而且我还没有在 SO 上看到另一个解决这两个问题的答案：

*   的`Calendar`时区（这意味着它可能显示与本地不同的日期）
*   设备的`Locale`（影响格式化日期的“正确”方式）

该问题的先前答案忽略了语言环境，以及其他涉及转换为`Date`忽略时区的答案。所以这里有一个更完整、更通用的解决方案：

```
Calendar cal = Calendar.getInstance(); // the value to be formatted
java.text.DateFormat formatter = java.text.DateFormat.getDateInstance(
        java.text.DateFormat.LONG); // one of SHORT, MEDIUM, LONG, FULL, or DEFAULT
formatter.setTimeZone(cal.getTimeZone());
String formatted = formatter.format(cal.getTime()); 
```

注意这里需要使用`java.text.DateFormat`，而不是Android自己的(confusingly-named) `android.text.format.DateFormat`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-17T12:34:51.957

对我来说，这非常有效：

```
val cal = Calendar.getInstance()

val pattern = "EEEE, MMMM d, yyyy 'at' h:mm a"
val primaryLocale = getLocales(resources.configuration).get(0)
val dateFormat = SimpleDateFormat(dateFormatPattern, primaryLocale)

val formatedDate: String = dateFormat.format(cal.time) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-11T12:37:35.000

更简单的答案：

```
SimpleDateFormat.getDateTimeInstance().format(cal.getTime()) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-02T23:01:35.580

我使用这个解决方案，它混合了其他答案，还包括时间

您可以将`DateFormat.SHORT`部件自定义为其他常量以显示更多/不同的细节

在我的设备上导致了这一点：`17/07/2021 04:11`

您可以简单地通过`Calendar.getInstance()`以获取当前时间

```
fun formatDateTime(calendar: Calendar):String{
    val formatter = DateFormat.getDateTimeInstance(DateFormat.SHORT,DateFormat.SHORT)
    formatter.timeZone = calendar.timeZone
    return formatter.format(calendar.time)
} 
```

# tidy - php tidy 将脚本标签移动到头部

> ID：10771288
> 
> 赞同：2
> 
> 时间：2012-05-27T02:46:23.547
> 
> 标签：tidy

我正在尝试使用`show-body-only`as运行 html tidy `true`，并且它将内联脚本标签移动到 中`<head>`，因此它有效地删除了所有脚本。这是我的过程：

```
$tidy = new tidy;
$tidy->parseString($str, array('show-body-only'=>true));
$tidy->cleanRepair();
echo $tidy; 
```

哪里`$str`是：

```
<div id="main">
    <script src="foo.js"></script>
</div> 
```

这输出：

`<div id="main"></div>`

如果我关闭“仅显示正文”，您会看到脚本在头部：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
  <head>

    <script src="foo.js" type=
    "text/javascript">
</script>
    <title></title>
  </head>
  <body>
     <div id="main"></div>
  </body>
</html> 
```

当我这样做时，我将如何防止 tidy 移动脚本标签`show-body-only`？

# javascript - 无法提醒href val？

> ID：10771294
> 
> 赞同：2
> 
> 时间：2012-05-27T02:47:09.533
> 
> 标签：javascript, jquery, xcode, jquery-mobile, href

下面的代码给了我一个警报，里面只有一个 # 符号。为什么？

编辑：我应该注意代码在 jQuery .click 事件中......如果我把它放在外面，它可以正常工作。这是更完整的代码：

```
 $('#continue').click(function(){
                                 var _href = $("#continue").attr("href");
                                 alert(_href);                                
            });

<a href="selectRadius.html" data-icon="arrow-r" id="continue" style="float:right;" data-role="button" data-inline="true">Continue</a> 
```

EDIT2：这在 jsfiddle 中一切正常。但在 xcode iphone 模拟器中，我只得到#。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T02:56:45.033

仅从您键入的代码来看，可能代码运行得太早了。尝试将JS包装在

```
$(function() {
    // your code here
}); 
```

或者

```
$(document).ready(function(){ 
    // your code here
}); 
```

**更新：**

好吧，因为它是一个 iPhone 模拟器，所以它改变了一切。请记住，除非您提供问题的所有细节，否则没有人可以帮助您，无论他们有多少经验。

您是否尝试过 touchstart / touchend / tap 事件而不是点击？据我所知，Apple 在点击事件方面一直存在问题。此外，移动设备上的点击事件的响应速度会较慢（如果我没记错的话，延迟大约 300 毫秒）所以你最好只使用触摸特定的事件。

你在建什么？它是移动网络应用程序还是？它会在标准的移动浏览器或PhoneGap之类的东西中运行吗？

**更新2：**

行。只要没有在 Click 上调用代码，它就可以工作。这消除了另一段代码用另一个值替换您的“href”的可能性，因为该代码必须在您的`$('#continue').click(function(){ });`块内。

点击事件是在触摸手机上模拟的，这就是为什么触摸事件更快（它们是原生的）并且不太可能导致问题的原因。您还应该确保您在此处返回 false 而不是点击链接，这可能会取代您的“href”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T03:15:53.980

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script>
$(document).ready(function(){ 
    $('#continue').click(function(e) {
        var _href = $(this).attr('href');
        alert(_href);

        e.preventDefault();
        return(false);
        /*
           the return is legacy code, used by some
           browsers to detect if current event handler
           is braking default behaviour

           the e.preventDefault() function is the jQuery
           way to do it
        */
    });
});
</script>

<a href="selectRadius.html" data-icon="arrow-r" id="continue" style="float:right;" data-role="button" data-inline="true">Continue</a> 
```

如果没有此行，则链接将被跟踪，并且会发生刷新以终止当前脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T03:43:34.577

[https://github.com/jquery/jquery-mobile/issues/3777](https://github.com/jquery/jquery-mobile/issues/3777)

# c# - ReadOnlyObservableCollection 和 ObservableCollection 之间的区别

> ID：10771298
> 
> 赞同：1
> 
> 时间：2012-05-27T02:48:00.410
> 
> 标签：c#, observablecollection

`ReadOnlyObservableCollection`和 和有什么不一样`ObservableCollection`？

我有以下代码片段：

```
private ObservableCollection<FeedData> _Feeds = new ObservableCollection<FeedData>();
public ObservableCollection<FeedData> Feeds
{
    get
    {
        return this._Feeds;
    }
} 
```

我可以用 替换`ObservableCollection`吗`ReadOnlyObservableCollection`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T02:55:37.453

**当它是只读**集合时，尝试添加到 _Feeds 。

它是一个包装器，可防止您更改集合。当然它只是一个包装器，所以如果你引用了底层集合，你可以通过**ReadOnly**

线索就在名字里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T03:03:46.530

`ReadOnlyObservableCollection`是一个只读包装器`ObservableCollection`。

不能通过这个只读包装器进行任何更改，但对底层 ObservableCollection 的所有更改都会反映到 ReadOnlyObservableCollection。

如果 ObservableCollection 未公开为 ReadOnly（不是 readonly 属性，而是作为 ReadOnlyObservableCollection），则底层集合将被修改。

> > 属性返回的数组不受写保护，即使该属性是只读的。为了保持数组防篡改，该属性必须返回数组的副本。通常，用户不会理解调用此类属性对性能的不利影响。具体来说，他们可能将该属性用作索引属性。

[CA1819: 属性不应返回数组](http://msdn.microsoft.com/en-us/library/0fss9skc.aspx)

# validation - 为什么 cakephp 抛出错误？

> ID：10771299
> 
> 赞同：1
> 
> 时间：2012-05-27T02:48:47.943
> 
> 标签：validation, cakephp

我正在尝试在控制器中创建验证，以在关系表中检查他们发送账单的人的用户名，并且在站点将发票保存在数据库中之前，姓名是否存在于活动字段中

关系表是`id, partyone, partytwo, active, expirydate`. 验证抛出此错误解析错误：语法错误，意外的 T_OBJECT_OPERATOR

```
 public function add(){

 if($this->request->is('post')){
 $this->Invoice->set($this->request->data);
 if(this->Invoice->validates(array('fieldList'=>array('Relationship.partyone','Relationship.active')){
  $this->Invoice->create(); 
 if ($this->Invoice->saveAll($this->request->data,array('validate'=>false))) 
 { 
  $this->Session->setFlash('The invoice has been saved');  
} else { 
      $this->Session->setFlash('The invoice could not be saved. Please, try again.');
      $errors=$this->Invoice->validationErrors;
    }

  } 

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T07:04:45.153

看来您之前忘记了美元符号`this`。

```
if(this->Invoice->validates(array('fieldList'=>array('Relationship.partyone','Relationship.active')){ 
```

应该

```
if($this->Invoice->validates(array('fieldList'=>array('Relationship.partyone','Relationship.active')){ 
```

# c# - Bitmap.Lockbits 混淆

> ID：10771300
> 
> 赞同：7
> 
> 时间：2012-05-27T02:49:02.330
> 
> 标签：c#, gdi+

MSDN 参考：[1] [http://msdn.microsoft.com/en-us/library/5ey6h79d.aspx#Y1178](http://msdn.microsoft.com/en-us/library/5ey6h79d.aspx#Y1178)

从链接中它说第一个参数将“指定要锁定的位图部分”，我将其设置为位图的较小部分（位图是 500x500，我的矩形是（0,0,50,50））但是返回的 BitmapData 的步幅为 1500 (=500*3)，因此基本上每次扫描仍将水平扫描整个图片。但是，我想要的只是位图的左上角 50x50 部分。

这是怎么回事？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-27T03:02:13.053

步幅将始终为完整位图，但 Scan0 属性将根据锁定矩形的起点以及 BitmapData 的高度和宽度而有所不同。

原因是您仍然需要知道位图的实际位宽，以便遍历行（将步幅添加到地址）。

一个简单的方法是：

```
var bitmap = new Bitmap(100, 100);

var data = bitmap.LockBits(new Rectangle(0, 0, 10, 10),
                           ImageLockMode.ReadWrite,
                           bitmap.PixelFormat);

var pt = (byte*)data.Scan0;
var bpp = data.Stride / bitmap.Width;

for (var y = 0; y < data.Height; y++)
{
    // This is why real scan-width is important to have!
    var row = pt + (y * data.Stride);

    for (var x = 0; x < data.Width; x++)
    {
        var pixel = row + x * bpp;

        for (var bit = 0; bit < bpp; bit++)
        {
            var pixelComponent = pixel[bit];
        }
    }
}

bitmap.UnlockBits(data); 
```

所以它基本上只是锁定整个位图，但给你一个指向位图中矩形左上角像素的指针，并适当地设置扫描的宽度和高度。

# oauth - 用户推送 API 是如何工作的

> ID：10771302
> 
> 赞同：1
> 
> 时间：2012-05-27T02:50:05.993
> 
> 标签：oauth, foursquare

Foursquare 用户推送 API 状态

> 每次有权访问您的 OAuth 消费者的用户签入时，用户推送 API 都会推送到您的应用程序。

我已经创建了一个消费者并设置了一个 webapp 来处理推送的通知，但是我不明白用户将如何以及在何处授予对我的消费者的访问权限？因此，例如，如果用户签到商店，只有当用户授予我的消费者访问权限时，我才会收到通知，但用户怎么会知道我的消费者呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T07:39:07.287

您需要让用户在foursquare 上授权您的应用。这与它与 Facebook 的工作方式**非常相似。**

尝试在这里寻找一些帮助：[https ://developer.foursquare.com/overview/auth](https://developer.foursquare.com/overview/auth)

在您的用户授权您的应用程序（消费者）后，您可以查看[Realtime API 文档](https://developer.foursquare.com/overview/realtime)，了解如何使其工作并处理由foursquare 完成的帖子。

# java - 尝试运行 Google 应用引擎时出错 - 用法： [选项]

> ID：10771303
> 
> 赞同：2
> 
> 时间：2012-05-27T02:50:08.660
> 
> 标签：java, google-app-engine

> **可能重复：**
> [Eclipse Google 插件没有为 Web 应用程序启动服务器](https://stackoverflow.com/questions/6712270/eclipse-google-plug-in-doesnt-start-server-for-web-application)

尝试运行 GAE 时收到此错误消息

用法：[选项]

选项：--help、-h 显示此帮助信息并退出。--server=SERVER 用于确定最新 -s SERVER SDK 版本的服务器。--address=ADDRESS 本地机器上接口的地址 -a ADDRESS 绑定到（或 0.0.0.0 对于所有接口）。--port=PORT 本地机器上绑定的端口号。-p PORT --sdk_root=root 覆盖 SDK 所在的位置。--disable_update_check 禁用对较新 SDK 版本的检查。--generated_dir=dir 设置创建生成文件的目录。

这意味着什么？我正在尝试在默认配置上运行，如何配置启动？

我试图删除启动配置，现在我收到一条新的错误消息：

当我删除启动配置时，调试时收到一条新的错误消息：

缺少必需的参数 'module[s]' Google Web Toolkit 2.4.0 DevMode [-noserver] [-port port-number | "auto"] [-whitelist whitelist-string] [-blacklist blacklist-string] [-logdir 目录] [-logLevel 级别] [-gen dir] [-bindAddress 主机名或地址] [-codeServerPort 端口号| “自动”] [-server servletContainerLauncher[:args]] [-startupUrl url] [-war dir] [-deploy dir] [-extra dir] [-workDir dir] 模块[s]

其中 -noserver 阻止嵌入式 Web 服务器运行 -port 指定嵌入式 Web 服务器的 TCP 端口（默认为 8888） -whitelist 允许用户浏览与指定正则表达式匹配的 URL（逗号或空格分隔） -blacklist 阻止用户浏览与指定正则表达式匹配的 URL（逗号或空格分隔） -logdir 以图形方式记录到给定目录中的文件 -logLevel 记录详细信息的级别：ERROR、WARN、INFO、TRACE、DEBUG、SPAM 或 ALL -gen 调试：将通常瞬态生成的类型保存在指定目录中 -bindAddress 指定代码服务器和 Web 服务器的绑定地址（默认为 127.0.0.1) -codeServerPort 指定代码服务器的 TCP 端口（默认为 9997） -server 指定不同的嵌入式 Web 服务器运行（必须实现 ServletContainerLauncher） -startupUrl 自动启动指定的 URL -war 可部署的输出文件所在的目录已写入（默认为 'war'） -deploy 将写入可部署但不可服务的输出文件的目录（默认为 -war 目录/jar 下的 'WEB-INF/deploy'，可能与 -extra 相同directory/jar) -extra 将写入不用于部署的额外文件的目录 -workDir 供内部使用的编译器工作目录（必须是可写的；默认为系统临时目录）和模块[s] 指定要托管的模块的名称

# android - OpenGL ES Android 混淆

> ID：10771309
> 
> 赞同：1
> 
> 时间：2012-05-27T02:52:29.547
> 
> 标签：android, opengl-es, opengl-es-2.0, bytebuffer, floatbuffer

我正在通过这个网站学习适用于 Android 的 OpenGL ES：http: [//www.learnopengles.com/android-lesson-one-getting-started/](http://www.learnopengles.com/android-lesson-one-getting-started/)

有两点没看懂。。。

这段代码究竟做了什么：

```
mTriangle1Vertices = ByteBuffer.allocateDirect(triangle1VerticesData.length * mBytesPerFloat)
    .order(ByteOrder.nativeOrder()).asFloatBuffer();
    mTriangle2Vertices = ByteBuffer.allocateDirect(triangle2VerticesData.length * mBytesPerFloat)
    .order(ByteOrder.nativeOrder()).asFloatBuffer();
    mTriangle3Vertices = ByteBuffer.allocateDirect(triangle3VerticesData.length * mBytesPerFloat)
    .order(ByteOrder.nativeOrder()).asFloatBuffer();

    mTriangle1Vertices.put(triangle1VerticesData).position(0);
    mTriangle2Vertices.put(triangle2VerticesData).position(0);
    mTriangle3Vertices.put(triangle3VerticesData).position(0); 
```

这些“缓冲”的东西是什么，浮点数总是有四个字节吗？我不太确定为什么需要上面的代码。作者解释了它，但我不确定他的意思。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T02:31:48.637

为什么我们甚至需要这样做呢？

如果我们用 C 编写代码，我们就不需要上面的代码——我们只需跳过整个 ByteBuffer.allocateDirect 的内容，并在调用 drawArrays 或 drawElements 时将指针传递给我们的数组。但是，我们不能这样做，因为在 Android 中运行的 Java 虚拟机 Dalvik 有一个垃圾收集器，它可能会在我们身上移动数据。它甚至可能会废弃记忆，错误地认为我们不再需要它。安全的方法是使用 ByteBuffer.allocateDirect 在本机内存中创建一块内存，将数据复制到那里，然后 OpenGL 可以直接使用它，而无需担心虚拟机。

每个缓冲区都需要足够大以容纳我们要复制的数据；当我们创建缓冲区时，它需要一个以字节为单位的大小。我们的 Java 数组由浮点数组成，因此要计算字节大小，我们将数组长度乘以 4。浮点值是 32 位，字节是 8 位值，所以有始终是浮点数的 4 个字节。

希望这会有所帮助。:)

# bash - 有什么方法可以在 ./bash_history 之前获取 bash 命令历史记录？

> ID：10771313
> 
> 赞同：2
> 
> 时间：2012-05-27T02:53:14.840
> 
> 标签：bash, history

我想尽可能多地获取我的 bash 命令历史记录，我发现 ./bash_history 只包含最近的两千行，这是否意味着之前的那些永远丢失了？有没有办法找回来。

非常感谢。罗伊987

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T03:13:14.310

恐怕你过去的历史永远消失了。但是您可以在将来保留它。增加`$HISTSIZE`和`$HISTFILESIZE`帮助，但如果您真的想永远保留所有命令，请查看[此提示](http://www.debian-administration.org/articles/543)。

# php - 剥离标签，删除其他字符和 mysql_real_escape_string 就足够了吗？

> ID：10771314
> 
> 赞同：0
> 
> 时间：2012-05-27T02:53:26.687
> 
> 标签：php, strip-tags

我正在处理几个页面来管理来自文本区域的数据，用户可以使用这些数据通过基本编辑器所见即所得来编写一些内容。在这个 textarea 中，我有几个标签。我想知道以下过程是否足以保护自己免受垃圾邮件和其他与 sql 查询注入等相关的隐患。

我的脚步

```
function string_db ($value) 
{ 
   $value = (get_magic_quotes_gpc()) ? stripslashes($value) : $value; 
   return mysql_real_escape_string($value); 
} 

$content = string_db(trim($_POST['conten']));
$content = strip_tags($content, '<p><a><b><u><i>'); // The 5 tags allowed
$content = str_replace("&lt;", "", $content);
$content = str_replace("&gt;", "", $content); //In case someone try to type html entities instead of html code

//INSERT DATA IN DB 
```

在我显示以前保存在我使用的数据库中的数据的页面上：

```
echo html_entity_decode($contentFromDb); 
```

这够了吗？为了证明有效性，是否有一系列测试要做？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T03:06:46.087

您应该改用 PHP 的[PDO](http://php.net/manual/en/book.pdo.php)功能。使用它可以创建准备好的语句，这将有助于消除 SQL 注入漏洞。

```
$DBH = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass); 
$STH = $DBH->("INSERT INTO table (col1, col2, col3) values (?, ?, ?);");

# assign variables to each place holder, indexed 1-3  
$STH->bindParam(1, $col1var);  
$STH->bindParam(2, $col2var);  
$STH->bindParam(3, $col3var);  

# insert one row  
$col1var = "My first value"  
$col2var = "Value 2";  
$col3var = "Someone's 3rd value";  
$STH->execute();  

# insert another row with different values  
$col1var = "My first value; Query 2"  
$col2var = "Value 2 -- of the second query";  
$col3var = "Someone's 3rd value;#This one has weird characters";  
$STH->execute(); 
```

在上面的示例中，我们连接到数据库并将数据库句柄设置为`$DBH`. 然后我们准备查询并使用未命名的占位符（`?`s）。接下来，我们将 PHP 变量绑定到未命名的占位符。最后，我们设置变量并执行查询。这可以用新值重复，只需更改 PHP 变量中的数据即可。

# asp.net - 如何在单击按钮时刷新 ASP.NET 页面？

> ID：10771315
> 
> 赞同：0
> 
> 时间：2012-05-27T02:54:37.643
> 
> 标签：asp.net

在网格视图上，我添加了一个按钮。当我单击按钮时，我将状态从 0 更改为 1，然后我想在单击按钮时刷新页面。请告诉我我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-06-08T11:19:46.857

```
 public ActionResult Index()
        {
            string odabir = Request.Form["unos"];
            TempData["odabir"] = odabir;
            return View();
        }
        public ActionResult prikaz() {
            string putanja = TempData["odabir"].ToString();
            string xmlPutanja = @"C:\Users\BAJAGA\Documents\Visual Studio 2012\Projects\mvc\andrijamvc\" + putanja + ".xml";
            List <raspored> raspored = new List<raspored>();
            XmlDocument doc = new XmlDocument();
            doc.Load(xmlPutanja);
            foreach (XmlNode cvor in doc.SelectNodes("/skola/Raspored"))
            {
                raspored.Add(new raspored
                {
                    rb = cvor["Rbr"].InnerText,
                    dan = cvor["DanUNedelji"].InnerText,
                    predmets = cvor["Predmet"].InnerText
                }
                );
            }
            return View(raspored);
        }

    }
}
@*@{
    ViewBag.Title = "prikaz";
}
@Html.ActionLink("nesto","Index","Home")
<h2>prikaz</h2>
<table border="20">
    <tr>
        <th>Redni br</th>
        <th>Ponedeljak</th>
        <th>Utorak</th>
        <th>Sreda</th>
    </tr>
    @foreach (andrijamvc.Models.raspored rp in Model)
    {
        <tr>
            <td>@rp.rb</td>
           <td>@rp.predmets</td> 
        </tr>
    }

</table>*@
@*@{
    ViewBag.Title = "Index";
}
@Html.ActionLink("Prikaz", "prikaz", "home");
@using(Html.BeginForm("Index","home")){
<h2>Index</h2>
<form>
Unesi ime fajla:<input type="text" name="unos" />
    <input type="submit" />
    </form>
}*@
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-27T05:54:21.943

在网格属性中添加这个

```
OnDataBound ="Gridview_Bond" 
```

在后面的代码中 -

```
protected void Gridview_Bond(object sender, EventArgs e)
    {
       Gridview.DataBind();
       Page.DataBind()

    } 
```

# asp.net-mvc-3 - 我应该如何为这个应用程序设计我的模型/视图模型？

> ID：10771316
> 
> 赞同：1
> 
> 时间：2012-05-27T02:55:31.930
> 
> 标签：asp.net-mvc-3, database-design, model, viewmodel, database-schema

我正在使用带有 SQL Server 2008 的 II6 上的 ASP.Net-MVC3 开发一个 Web 应用程序。我无法提供有关该项目的详细信息，所以就这个问题而言，它是一个库。有书籍，人们可以查看这些书籍。我们希望保留过去结帐 CheckOuts 的记录。所以这里是数据模式：

```
Books                   Checkouts
-------------------     ----------------------------
| ID   (PK)        |    | ID(PK)                   |
| Title varchar(50)|    | BookId (FK Books.ID)     |
|                  |    | CheckoutDate (DateTime)  |
|  ...             |    | ExpirationDate (DateTime)|
|                  |    | Username (varchar(50)    |
|                  |    | ...                      |
-------------------     ---------------------------- 
```

这个想法是 Check Out 和 Books 之间的关系是多对一的，但只有一个 CheckOut 将永远是“活动”或“未过期”，即每本书最多有一个 CheckOut 的到期日期大于当前时间。应用程序将强制执行此操作。

我的第一个问题是：您认为对于上述要求，这是一个好的数据库设计吗？或者我应该在 Check Outs 表中包含一个“Expired”布尔列吗？其他想法？

我们的 MVC 模型如下所示：

```
public class Book {
    public int ID { get; set; }
    public string Title{ get; set; }

    ...

}

public class Checkout {
    public int ID { get; set; }
    public int BookID { get; set; }
    public sting Username { get; set; }
    public DateTime CheckOutDate{ get; set; }
    public DateTime ExpirationDate { get; set; }

    ...

} 
```

对于我们的数据访问层，我们只是使用诸如 SqlCommand 和 SqlDataReader 之类的 System.Data 类，因此没有 EF、LinqToSql 等诸如关系和延迟加载之类的好处。

现在我的问题是我们要搜索这些书并显示如下表格：

```
Title     Checked Out  Checked Out By  Check Out Expiration
--------  -----------  --------------  ----------------------
Book1          Yes         Username        01/01/1970 
```

获取此信息的查询看起来像

```
SELECT *
FROM Books
LEFT JOIN Checkouts ON Checkouts.BookID = Book.Id
WHERE Checkouts.ExpirationDate <= GETDATE() 
```

我该怎么做？

我会做这样的模型吗

```
public class BookSearchTableRow {
    public string Title { get; set;}
    public bool CheckedOut { get; set;}
    public string CheckedOutBy { get; set;}
    public DateTime CheckOutExpiration { get; set;}
} 
```

并让我的视图成为一个列表？

或者我应该将 CheckOut 属性添加到我的 Book 模型中吗？

```
public class Book {
    public int ID { get; set; }
    public string Title{ get; set; }

    ... Other Book Fields ...

    public Checkout ActiveCheckout { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:58:18.153

您设计视图模型的方式不应影响您设计模型的方式，反之亦然。您的模型通常代表您的领域，而您的视图模型（通常）是这些模型的转换，适合显示特定部分。

如果我是你，我会向你的视图发送一个类似于 BookSearchTableRow 类的 IEnumerable。这类似于您要显示的内容。如果你的模型正确地代表了你的领域，你不应该因为视图需要而修改它们。这就是视图模型的用途。

# html - 如何构建 HTML5 液体混合动画？

> ID：10771318
> 
> 赞同：0
> 
> 时间：2012-05-27T02:55:46.010
> 
> 标签：html, animation, cordova, html5-canvas, webgl

几年前，我构建了一个小型 OpenGL 项目，在其中模拟了混合液体的动画；可以在[此处](http://www.youtube.com/watch?v=Jx2blmfmAgo)或[此处](http://www.youtube.com/watch?v=FwgujC3LkMs&feature=related)看到类似的项目（这是 2 个显示一些液体动画的 youtube 视频）。

我的主要目的是使用 webGL、JS、CSS 或 HTML5 模拟这些动画，以便将它们与 Phonegap 一起使用。

在我的项目中，我设置了 2 种不同密度和不同颜色的主要液体，以测试混合过程。我的主要目标是动画两种液体的流动，并在用户开始摇晃他的智能手机时开始混合（或者当用户单击按钮时，如果我们在基于 Web 的应用程序中）。

在我的研究过程中，我收集了几篇解释这个过程的物理论文。我也见过几个库，比如[Raphael.js](http://raphaeljs.com/)或[Processing.js](http://processingjs.org/)，但我不太确定哪个更好，或者从哪里开始，以及哪个与 Phonegap 兼容。任何建议、链接或参考都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T03:00:21.653

有一个优秀的 Javascript 库封装了该`webgl`功能，称为[three.js](https://github.com/mrdoob/three.js/)。

# excel - 如何在另一张工作表的列和行之间创建引用，反之亦然 - Excel VBA？

> ID：10771319
> 
> 赞同：0
> 
> 时间：2012-05-27T02:55:48.467
> 
> 标签：excel, vba

我已经提出并提供了我自己的答案，虽然它不好但它有效。 [上一个问题](https://stackoverflow.com/questions/10467639/transform-single-row-to-single-column-with-reference-excel-vba)

但是，现在我想链接另一张工作表中的单元格。但是，我编写的程序无法在一张纸到另一张纸的单元格之间进行引用。

**例子**

Sheet1，A 列

Sheet2，第 1 行

我希望有

```
Sheet1!A1 = Sheet2!A1
Sheet1!A2 = Sheet2!B2 
```

![在此处输入图像描述](../Images/689317fb4dc8b9a395210a54e425eeec.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T17:29:57.360

这是你正在尝试的任何机会吗？

```
Option Explicit

Sub Sample()
    Dim cRange As Range, rrange As Range
    Dim i As Long, j As Long
    Dim cPrompt As String, cTitle As String
    Dim rPrompt As String, rTitle As String

    On Error GoTo Whoa

    cPrompt = "Please Choose a Column without Header"
    cTitle = "Specify Column Range"

    rPrompt = "Please Choose Starting cell"
    rTitle = "Specify row Range"

    Set cRange = Application.InputBox(cPrompt, cTitle, Type:=8)
    Set rrange = Application.InputBox(rPrompt, rTitle, Type:=8)

    For i = 1 To cRange.Count
        rrange.Offset(j).Formula = "=" & cRange.Parent.Name & _
        "!" & cRange.Cells(1, i).Address

        j = j + 1
    Next i

    Exit Sub
Whoa:
    MsgBox Err.Description
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:17:25.180

您可以使用 INDIRECT 函数以更简单的方式执行此操作，如下所示：

```
=INDIRECT("Sheet1!R1C"&ROW()+4,FALSE) 
```

这使用当前行加上偏移值将当前行与您要引用的第一列对齐。当您向下复制公式时，行号将增加，但将用于增加列引用。

# ios - 如何为 Core Data 模型对象自动生成默认 UITableView？

> ID：10771325
> 
> 赞同：0
> 
> 时间：2012-05-27T02:57:22.670
> 
> 标签：ios, uitableview, core-data

我怀念 Rails 基于检查模式为模型对象自动生成的视图。

对于带有 Core Data 的 iOS 应用程序是否有这样的事情，大概是使用 UITableView？我不想要最后的东西，只想要一个足够好的 (TM) UI 来开始并从那里开始工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T05:36:54.290

如果您正在寻找“足够好”，那么只需使用 UITableView Xcode 模板，然后在您的 cellForRowAtIndexPath 方法中，只需执行以下操作：

```
cell.textField.text = [NSString stringFromFormat @"%@ %@ ..."
                                 object.attribute1, object,attribute2, ...]; 
```

对于单元格中使用的对象的核心数据模型中的每个属性。

此外，您确实可以选择检查核心数据属性和关系。您可以雄心勃勃地设计一个 CoreDataGoodEnoughCell，它将给定 NSEntityDescription 的所有属性和关系连接起来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T05:54:47.823

Rails 中没有自动生成的视图，至少没有内置到 iOS SDK 中。

为此目的的任何解决方案肯定需要相当多的工作，但绝对可以通过通用的 UITableViewDelegate 和 UITableViewDataSource 实现，并通过子类化 UITableViewCell 以使用视图标签映射数据。

# java - 将数据传递给 showOptionsDialog 的正确方法

> ID：10771326
> 
> 赞同：0
> 
> 时间：2012-05-27T02:57:39.590
> 
> 标签：java, android, android-alertdialog

我目前正在尝试将数据从 onItemLongClick 方法传递到 AlertDialog ，并且我正在尝试找到关于如何执行此操作的最佳/正确做法。

虽然我目前正在做的事情有效，但感觉不对，我希望这里的人能够为我提供正确的解决方案并解释为什么它是正确的解决方案。

我的代码如下，目前在长 onItemLongClick 中，我正在为已单击的列表视图中的行项目设置一个属性，然后从 AlertDialog.Builder 中访问该属性。

```
public class ListViewExample {

    private long clickedRowId;
    ....

    mListView.setOnItemLongClickListener(new ListView.OnItemLongClickListener () {
        @Override
        public boolean onItemLongClick(AdapterView<?> arg0, View arg1, int arg2, long rowId) {
            clickedRowId = rowId;
            /* here is my issue, surely it is better to pass rowId into showOptionsDialog as an argument? */
            showOptionsDialog();
            return true;
        }
    });

    private void showOptionsDialog() {

        new AlertDialog.Builder(this.context)
            .setTitle(R.string.stack_dialog_title)
            .setItems(R.array.stack_options, new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int selected) {

                    switch (selected) {
                    case 0:
                        //perform selection #1
                        break;
                    case 1:
                        //perform selection #2
                        break;
                    case 2:
                        deleteRowItem(clickedRowId);
                        break;
                    }

                }

        }).show();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T04:04:56.910

```
public class ListViewExample {

....

mListView.setOnItemLongClickListener(new ListView.OnItemLongClickListener () {
    @Override
    public boolean onItemLongClick(AdapterView<?> arg0, View arg1, int arg2, long rowId) {
        /* here is my issue, surely it is better to pass rowId into showOptionsDialog as an argument? */
        showOptionsDialog(rowId);
        return true;
    }
});

private void showOptionsDialog(long rowId) {
   AlertDialog.Builder builder = new AlertDialog.Builder(YourActivity.this);
   builder.setTitle(R.string.stack_dialog_title);
   builder.setItems(R.array.stack_options, new DialogInterface.OnClickListener() {
   public void onClick(DialogInterface dialog, int selected) {
        //Toast.makeText(getApplicationContext(), items[item], Toast.LENGTH_SHORT).show();
        switch (selected) {
            case 0:
                //perform selection #1
                break;
            case 1:
                //perform selection #2
                break;
            case 2:
                deleteRowItem(rowId);
                break;
            }
         }
     });
      AlertDialog alert = builder.create();
       alert.show():

     }

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T04:07:21.367

我想你可以这样做。希望它可以帮助你

公共类 ListViewExample {

```
 private long clickedRowId;
    ....

    mListView.setOnItemLongClickListener(new ListView.OnItemLongClickListener () {
        @Override
        public boolean onItemLongClick(AdapterView<YourObj> list, View arg1, int position, long rowId) {
            clickedRowId = rowId;
            YourObj clickObj list.getItemAtPosition(position)
            /* here is my issue, surely it is better to pass rowId into showOptionsDialog as an argument? */

            showOptionsDialog(clickObj );
            return true;
        }
    });

    private void showOptionsDialog(YourObj clickedObj) {

        new AlertDialog.Builder(this.context)
            .setTitle(R.string.stack_dialog_title)
            .setItems(R.array.stack_options, new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int selected) {

                    switch (selected) {
                    case 0:
                        //perform selection #1
                         //do some thing about clickedObj
                        break;
                    case 1:
                        //perform selection #2
                        //do some thing about clickedObj
                        break;
                    case 2:
                        deleteRowItem(clickedRowId);
                        break;
                    }

                }

        }).show();
    }

} 
```

# asp.net - 如何从 MVC3 中的控制器名称中删除“控制器”？

> ID：10771330
> 
> 赞同：4
> 
> 时间：2012-05-27T02:58:51.213
> 
> 标签：asp.net, asp.net-mvc-3

因此，MCV3 的工作方式是您定义通过路由调用的控制器。该控制器是“myControllerName”+“控制器”。

现在该类已经在一个名为控制器的文件夹中。我不希望我的班级名称末尾有那种装饰。它并没有真正做出任何贡献。

我想知道如何改变它并了解更多关于 MVC3 内部发生的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T03:19:50.190

简短的回答是：不要打扰。这是*按约定配置*（也称为*约定优于配置*，CoC），如果您顺其自然，让 MVC 为所欲为，您将过上更快乐、更健康、无压力的生活。

更长的答案是您将自定义控制器工厂注入 MVC 管道以覆盖默认控制器工厂。可以[在本文](http://keyvan.io/custom-controller-factory-in-asp-net-mvc)中找到该过程的完整描述，但本质上，您：

1.  实施[`IControllerFactory`](http://msdn.microsoft.com/en-us/library/system.web.mvc.icontrollerfactory.aspx)以做任何你想做的事。
2.  在您的`Application_Start`事件中，调用[`ControllerBuilder.Current.SetControllerFactory`](http://msdn.microsoft.com/en-us/library/system.web.mvc.controllerbuilder.setcontrollerfactory.aspx)以用您自己的控制器工厂替换默认控制器工厂。

MVC 是一个高度可扩展的框架；尽管大多数组件的默认行为可能满足您的需求，但您几乎总是可以将内置对象替换为您自己的。对于您可以覆盖的其他内容，请参阅[MVC3 的 13 个可扩展点的](http://codeclimber.net.nz/archive/2009/04/08/13-asp.net-mvc-extensibility-points-you-have-to-know.aspx)列表。

另外，我一开始忘了提，但如果你真的对 MVC 的内容感兴趣，整个框架都是开源的（它在 APL 下），你可以[在 codeplex 上找到它。](http://aspnetwebstack.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T03:12:14.347

控制器后缀被认为是 MVC 的约定（有关约定优于配置方法的一些详细信息，请参见此处[http://en.wikipedia.org/wiki/Convention_over_configuration](http://en.wikipedia.org/wiki/Convention_over_configuration)），它具有价值，因为它为所有 MVC 项目提供了一致的结构。此外，它还描述了 MVC 模式中类的功能。

MVC 非常注重约定，如果你想要更多关于配置的东西，可以看看 ASP.Net webforms

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T04:20:51.033

文件夹名称仅对作为人类的您有用。编译器不在乎，它们都被编译成一个 DLL，并且文件夹是无关紧要的（尽管默认情况下它确实被放入带有“控制器”的命名空间中）。该文件夹根本不会上传到最终站点。

Because the folder doesn't exist on the server, you can't make the framework assume that because it's in the Controllers folder it's a controller. It just doesn't work that way, nor is there any way to make it work that way (again, because the Controllers folder does not exist on the server).

The convention of naming things xxxController is to make things easier. If you don't want to follow the conventsion MVC dictates, then perhaps MVC isn't the right framework for you. It will only make your life more difficult if you want to fight the flow.

It's like complaining that you don't like naming your C Sharp files with a .cs extension, or that you don't like naming your Webforms forms with an .aspx.

# sdk - dynamodb 教程

> ID：10771332
> 
> 赞同：2
> 
> 时间：2012-05-27T03:00:10.167
> 
> 标签：sdk, amazon-ec2, lamp, amazon-dynamodb

任何人都可以推荐一个关于如何在 Amazon EC2 环境中设置环境的好教程，我可以在其中测试和玩 dynamoDB？

我想从已经在 dynamo DB 中设置的香草 64 位 Amazon EC2 ami 表开始，没有导入数据

我想最终得到：在 64 位 Amazon EC2 开发工具包上安装并配置了完全配置的 LAMP 环境，能够读取和写入 DynamomDB 表

我已尝试按照设置 SDK 的步骤进行操作，但我一无所获，并且对我遇到的错误没有任何解释。我觉得我正在从一个教程追到另一个教程，而 google 今晚不是我的朋友，希望 stackoverflow 能再次出现。再次感谢您提前帮助我避免成为先生。狂怒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T12:40:30.593

首先，我建议使用 Java AWS 开发工具包 ( [http://aws.amazon.com/sdkforjava/](http://aws.amazon.com/sdkforjava/) ) 从您的桌面制作一个使用 DynamoDB 的简单应用程序。SDK 有一些简单的示例用于访问 DynamoDB ( [https://github.com/amazonwebservices/aws-sdk-for-java/tree/master/src/samples/AmazonDynamoDB](https://github.com/amazonwebservices/aws-sdk-for-java/tree/master/src/samples/AmazonDynamoDB) )。

然后，一旦您以您想要的方式获得您的应用程序，您就可以启动一个 EC2 实例并着手将您的应用程序部署到该实例。让 EC2 实例访问 DynamoDB 确实没有什么特别的要求。

# javascript - 是否有一个内联运算符仅在值为 true 时才执行某些操作？

> ID：10771335
> 
> 赞同：3
> 
> 时间：2012-05-27T03:00:53.820
> 
> 标签：javascript, operators

我发现自己写了很多类似的代码：

```
$('.selector').addClass(condition ? 'class' : ''); 
```

我知道这可能很愚蠢和发牢骚，但我只是好奇是否有一种方法可以在没有 Javascript 中的错误条件的情况下做到这一点。我环顾四周，并没有真正找到任何可以做到这一点的运营商，但我可能（并且希望我是）错了。

我不一定要优化我的代码，这只是好奇:)

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-27T03:03:56.140

JavaScript 的`&&`运算符[短路](https://en.wikipedia.org/wiki/Short-circuit_evaluation)。您会看到在许多脚本和库中常用的类似内容：

```
condition && $('.selector').addClass('class'); 
```

或者正如 mgibsonbr 的评论所述，您可以简单地`&&`在方法本身内：

```
$('.selector').addClass(condition && 'class'); 
```

但是，它的直观性要低得多，因为当两个值都为真时，这并不是一个众所周知的事实，它`a && b`会导致`b`JavaScript，并且`true`与其他语言没有什么不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T03:05:35.140

```
!condition || func();  // launch func only if condition holds 
```

如果`condition`为假，`!condition`则为真。由于第一个操作数`||`为真，整个表达式为真。被`func()`短路并且不被调用。

如果`condition`为真，`!condition`则为假，因此`func()`必须调用以便评估析取。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T03:21:27.690

您可以编写自己的 jQuery monadic 操作。尽管应该非常谨慎地使用它（以减少 $.* 命名空间的混乱），但如果您经常这样做，这仍然是最优雅的方式。

```
(function($) {
    $.fn.addClassIf = function() {  
        var args = Array.prototype.slice.call(arguments, 0, -1);
        var condition = Array.prototype.slice.call(arguments, -1)[0];

        return condition ? this.addClass.apply(this,args) : this;
    };
})(jQuery); 
```

演示：

```
> $('body')
[<body class=​"question-page">​…​&lt;/body>​]

> $('body').addClassIf('test1', true)
[<body class=​"question-page test1">​…​&lt;/body>​]

> $('body').addClassIf('test2', false)
[<body class=​"question-page test1">​…​&lt;/body>​]

> $('body').addClassIf('test3', true)
[<body class=​"question-page test1 test3">​…​&lt;/body>​] 
```

# php - PHP中用于检查记录是否存在的SQL查询

> ID：10771336
> 
> 赞同：0
> 
> 时间：2012-05-27T03:01:40.153
> 
> 标签：php, sql

在添加记录之前，我在进行预检查时遇到了一些奇怪的行为。

工作原理：用户可以将记录添加为 MBI000000128 或 MBI128。因为这指的是我正在检查的同一记录。目前，如果 MBI128 已经存在并且用户尝试添加 MBI000000128 它应该返回“记录已存在消息”。

这是我的问题：我将字符串中的所有零从 MBI000000128 剥离到 MBI128 很好。我什至附和以确保这是正确的。前后没有空格。我用单引号来仔细检查。

当我打印变量时：`'MBI28'`

表中的记录存在为`'MBI128'`

这是我的 SQL 查询：

```
$query = "SELECT * FROM tickets WHERE pbi='$mbi_no_zeroes' "; 
```

它继续将票添加到表中，我不知道为什么：/

有人可以就我可以做的更多检查或我可能做错的事情提出建议吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T04:20:34.213

尝试：

```
$mbi_no_zeroes = str_replace("0", "", $mbi_no_zeroes);
$query = "SELECT * FROM tickets WHERE pbi='$mbi_no_zeroes' "; 
```

查看更多关于[str-replace](http://php.net/manual/es/function.str-replace.php)

# node.js - 在 Socket.IO 上添加 cookie 值

> ID：10771337
> 
> 赞同：9
> 
> 时间：2012-05-27T03:01:46.237
> 
> 标签：node.js, cookies, express, socket.io

如何在 Socket.IO 上添加 cookie 值？

```
io.sockets.on('connection', function (client)
{ 
    console.log(client.id); 
    client.handshake.headers.cookie.socketID = client.id;   // not work
 // client.handshake.headers.cookie("socketID",client.id);  //crash

    console.log(client.handshake.headers.cookie);
// The current output is:
//connect.sid=tI21xumy3u2n4QXO1GljmPAf.pzFQ1Xu%2B6bz36secu4VSCdSNU8PT1L44gQZ4kFUFQqQ
//this is express session id, and I also want to add client.id of Socket.IO. 

//...........
} 
```

我已经阅读了 [http://www.danielbaulig.de/socket-ioexpress/](http://www.danielbaulig.de/socket-ioexpress/) ，但我不需要 node.js 上的会话管理，而只需要像 connect.sid 一样在 cookie 中添加一个 socket.io 客户端 ID 值。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-27T14:53:35.993

看看使用 Socket.io进行[授权。](https://github.com/LearnBoost/socket.io/wiki/Authorizing)这是它处理初始连接请求的地方，您可以在其中设置响应标头。

我不确定`cookie(name,value)`速记是否有效，但您可以尝试手动设置：

```
 var date = new Date();
    date.setTime(date.getTime()+(days*24*60*60*1000)); // set day value to expiry
    var expires = "; expires="+date.toGMTString();

    handshake.headers.cookie = name+"="+value+expires+"; path=/"; 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2015-06-21T19:23:27.990

可能看起来很老套，我尝试了各种方法来设置 cookie 以响应握手获取请求，但没有成功。但是，我设法通过自行调整 socket.io 原型代码使其工作。

在 socket.io 版本 1.3.4 中，

在 \node_modules\socket.io\node_modules\engine.io\lib\server.js

将第 249 行从：

```
headers['Set-Cookie'] = self.cookie + '=' + id; 
```

到

```
headers['Set-Cookie'] = req.headers.cookie; 
```

请求中的所有 cookie 都会在响应中返回

# java - 运营商 | 未定义参数类型 boolean, void

> ID：10771340
> 
> 赞同：0
> 
> 时间：2012-05-27T03:02:24.880
> 
> 标签：java, android

嗨，我只是不断收到那个错误，我是个新手，不知道发生了什么。我在这里先向您的帮助表示感谢

```
 if(txtvi1.getText().toString().equals("") | txtvi2.getText().toString().equals("") | txtvi3.getText().toString().equals("") | txtvi4.getText().toString().equals("")| txtvi5.getText().toString().equals("") | txtvi6.getText().toString().equals("") | txtvi7.getText().toString().equals("") | txtvi8.getText().toString().equals("") |  checkbx1.setChecked(false)) {
                    Toast.makeText(getApplicationContext(),  string, 5000).show();

                } else {
                    Toast.makeText(getApplicationContext(), string2, 5000).show();
                } 
```

所以错误出现在复选框中，如果任何文本视图为空或未选中复选框，我只想显示吐司。如果有可能我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T03:11:22.020

你写了一个管道符号 | 对于 OR 条件，这是错误的。

当您需要在条件中使用`AND`或`OR`条件运算符时`if`，它们应该像`AND`=`&&`和`OR`=`||`

所以你的代码需要更新如下，

```
if( txtvi1.getText().toString().equals("") || txtvi2.getText().toString().equals("") || txtvi3.getText().toString().equals("") || txtvi4.getText().toString().equals("") || txtvi5.getText().toString().equals("") || txtvi6.getText().toString().equals("") || txtvi7.getText().toString().equals("") || txtvi8.getText().toString().equals("") ||  !checkbx1.isChecked() ) 
                {
                    Toast.makeText(getApplicationContext(),  string, 5000).show();
                } 
                else 
                {
                    Toast.makeText(getApplicationContext(), string2, 5000).show();
                } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T03:04:16.977

您必须使用 isChecked() 函数来检查它是否被选中。

```
 if(txtvi1.getText().toString().equals("") || txtvi2.getText().toString().equals("") || txtvi3.getText().toString().equals("") || txtvi4.getText().toString().equals("")|| txtvi5.getText().toString().equals("") || txtvi6.getText().toString().equals("") || txtvi7.getText().toString().equals("") || txtvi8.getText().toString().equals("") ||  !checkbx1.isChecked()) {
                    Toast.makeText(getApplicationContext(),  string, 5000).show();

                } else {
                    Toast.makeText(getApplicationContext(), string2, 5000).show();
                } 
```

# mysql - 加入 3 个表，其中 2 个是 SELECT *

> ID：10771341
> 
> 赞同：2
> 
> 时间：2012-05-27T03:02:28.080
> 
> 标签：mysql, join

我正在通过重新测试进行研究。我有三张桌子。一张表用于 Demographics，我只需要从中获取有限数量的数据。其他两个表各有 235 个字段，唯一的区别是表名。我试过这样的陈述：

```
SELECT * FROM research_statement_answers, statement_answers, demographic_answers
WHERE (( research_statement_answers.id_Questions = demographic_answers.id_Demographic)
and (statement_answers.id_Questions = demographic_answers.id_Demographic)
and (demographic_answers.Research_Completed = 1)) 
```

但这不起作用。我见过的所有示例都要求我命名两个表中的所有 235 个字段。我可以做到，但我不敢相信这是最好的方法。因此，建议最受欢迎。谢谢你。瑞克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T03:05:05.863

```
SELECT
    research_statement_answers.*,
    statement_answers.*,
    demographic_answers.*
FROM ... 
```

由于这些表仅在名称上有所不同，在它们上使用 UNION JOIN 不是更好吗？

结果将是您拥有所有表记录的重聚。

使用普通连接，结果是每条记录有 235*3 列，记录的子集表示三个表之间的交集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T03:12:44.927

您可以通过执行以下操作从多个表中选择 * 并仅包含第三个表的特定列：

```
SELECT
    research_statement_answers.*,
    statement_answers.*,
    demographic_answers.id,
    demographic_answers.title,
    demographic_answers.etc
FROM ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T04:02:17.297

```
 SELECT 
    research_statement_answers.*, 
    statement_answers.*,
    demographic_answers.*
 FROM research_statement_answers
    JOIN demographic_answers ON demographic_answers.id_Demographic = research_statement_answers.id_Questions
    JOIN statement_answers ON demographic_answers.id_Demographic = statement_answers.id_Questions
    WHERE demographic_answers.Research_Completed = 1 
```

# ruby-on-rails - Rails 中 facebook/twitter 的应用程序配置设置

> ID：10771343
> 
> 赞同：1
> 
> 时间：2012-05-27T03:02:43.573
> 
> 标签：ruby-on-rails, facebook, omniauth

我一直在关注上一个问题中提供的解决方案：

[从 Controller 中的 application.rb 访问配置（Rails 3）](https://stackoverflow.com/questions/4143638/accessing-config-from-application-rb-in-controller-rails-3/4145499#4145499)

但首先将其应用于 Facebook 设置。

我首先创建了 facebook 配置文件：

```
#lib/facebook_config.rb
module FacebookConfig
  def self.config
    @@config ||= {}
  end

  def self.config=(hash)
    @@config = hash
  end 
```

结尾

并定义了我的 YAML 文件，然后对其进行了初始化。

```
#config/facebook.yml
development:
  app_id = "id"
  app_secret = "secret"

test:
  app_id = "id"
  app_secret = "secret"

production:
  app_id = "id"
  app_secret = "secret" 
```

和

```
#config/intializers/01.facebook_config.rb
require './lib/facebook_config'

FacebookConfig.config = YAML.load_file("config/facebook.yml")[Rails.env] 
```

并像这样定义omniauth配置：

```
#config/initializers/omniauth.rb
Rails.application.config.middleware.use OmniAuth::Builder do
  # The following is for facebook
  provider :facebook, FacebookConfig.config[:app_id], FacebookConfig.config[:app_secret], {:scope => 'email, read_stream, read_friendlists, friends_likes, friends_status, offline_access'}
end 
```

但是，当我在开发模式下进行测试时，在启动 webrick 服务器时出现以下错误：

config/initializers/omniauth.rb:3:in `[]': can't convert Symbol into Integer (TypeError)

我想在访问配置文件时它应该是一个字符串而不是一个符号？

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T04:54:42.660

可能的原因可能是因为您的 facebook.yml 文件格式。

您可以在此处阅读有关 Yaml 的信息：[http ://en.wikipedia.org/wiki/YAML](http://en.wikipedia.org/wiki/YAML)

# 已编辑

我已经在虚拟应用程序中测试了您的代码 - 同样的错误，因为您当前拥有的 YAML 文件将返回字符串。

```
1.9.3p0 :014 > YAML.load_file("config/facebook.yml")[Rails.env]
 => "app_id = \"id\" app_secret = \"secret\"" 
```

所以你不能通过访问`symbol`，因为 Ruby 认为你在传递`Numeric Index`值`String`。

将你的 facebook.yml 更新为这个（设置你的变量）：

```
#config/facebook.yml
development:
  app_id: id
  app_secret: secret

test:
  app_id: id
  app_secret: secret

production:
  app_id: id
  app_secret: secret 
```

facebook.yml 更新后，结果你会得到哈希：

```
YAML.load_file("config/facebook.yml")[Rails.env]
 => {"app_id"=>"id", "app_secret"=>"secret"} 
```

符号化您的配置哈希键：

```
 def self.config=(hash)
    @@config = hash
    @@config.symbolize_keys!
  end 
```

它会起作用的！

# oop - Corona OOP 多个实例共享属性

> ID：10771344
> 
> 赞同：0
> 
> 时间：2012-05-27T03:02:55.373
> 
> 标签：oop, lua, coronasdk

我对将 OOP 应用于 Corona 有一点心理障碍。我创建了一个时间选择器类，我希望在我的应用程序中多次重复使用它。我尝试将它的两个实例放在同一个故事板场景中，但第一个选择器上的按钮控制数据并在第二个选择器上显示。所以他们正在共享数据、功能等。我想知道是否有人能告诉我哪里出错了？这是我的时间选择器类（timepicker2.lua）：

```
module(..., package.seeall)

-- include Corona's "widget" library
local widget = require "widget"

--decorator--------------------
function decorate(obj, hr, min) --object to decorate
print("--init new timepicker--")

theHour = 0
theMin = 0
am = true

function incHr(event)
    print("inc")
    if theHour < 12 then
        theHour = theHour + 1
    else 
        theHour = 1
    end

    if theHour < 10 then
        hrText.text = "0"..theHour
    else
        hrText.text = theHour
    end
end

increaseHrBtn = widget.newButton{
    default="gfx/up_regular.png",
    over="gfx/up_press.png",
    width=40, height=40,
    onRelease = incHr
}

hrText = display.newText("0", 10, 41, native.systemFont, 24)
hrText:setTextColor(0, 0, 0)

local decHr = function (event)
    print("inc")
    if theHour > 1 then
        theHour = theHour - 1
    else 
        theHour = 12
    end
    if theHour < 10 then
        hrText.text = "0"..theHour
    else
        hrText.text = theHour
    end 
end

decreaseHrBtn = widget.newButton{
    default="gfx/down_regular.png",
    over="gfx/down_press.png",
    width=40, height=40,
    onRelease = decHr
}
decreaseHrBtn.y = 100

dotsText = display.newText(":", 55, 39, native.systemFont, 24)
dotsText:setTextColor(0, 0, 0)

local incMin = function (event)
    print("inc")
    if theMin < 59 then
        theMin = theMin + 1
    else 
        theMin = 0
    end

    if theMin < 10 then
        minText.text = "0"..theMin
    else
        minText.text = theMin
    end
end

increaseMinBtn = widget.newButton{
    default="gfx/up_regular.png",
    over="gfx/up_press.png",
    width=40, height=40,
    onRelease = incMin
}
increaseMinBtn.x = 100

minText = display.newText("0", 90, 41, native.systemFont, 24)
minText:setTextColor(0, 0, 0)

local decMin = function (event)
    print("dec")
    if theMin > 0 then
        theMin = theMin - 1
    else 
        theMin = 59
    end
    if theMin < 10 then
        minText.text = "0"..theMin
    else
        minText.text = theMin
    end 
end

decreaseMinBtn = widget.newButton{
    default="gfx/down_regular.png",
    over="gfx/down_press.png",
    width=40, height=40,
    onRelease = decMin
}
decreaseMinBtn.y = 100
decreaseMinBtn.x = 100

local toggleAmPm = function (event)
    if am == true then
        am = false
        ampmBtn:setLabel( "PM" )
    else
        am = true
        ampmBtn:setLabel( "AM" )
    end
end

ampmBtn = widget.newButton{
    default="gfx/blank_normal.png",
    over="gfx/blank_press.png",
    label = "AM",
    font = "Korean Calligraphy",
    fontSize = 25,
    width=58, height=58,
    onRelease = toggleAmPm
}

ampmBtn.x = 160
ampmBtn.y = 58

if hr > 12 then
    if #hr < 2 then
        hrText.text = "0"..hr
    else
        hrText.text = hr
    end
    theHour = hr-12
    am = false
    ampmBtn:setLabel( "PM" )
else 
    if hr < 10 then
        hrText.text = "0"..hr
    else
        hrText.text = hr
    end
    theHour = hr
    if hr == 12 then
        am = false
        ampmBtn:setLabel( "PM" )
    else
        am = true
        ampmBtn:setLabel( "AM" )
    end
end

if min < 10 then
    minText.text = "0"..min
else
    minText.text = min
end
theMin = min

obj:insert(increaseHrBtn.view)
obj:insert(decreaseHrBtn.view)
obj:insert(increaseMinBtn.view)
obj:insert(decreaseMinBtn.view)
obj:insert(hrText)
obj:insert(dotsText)
obj:insert(minText)
obj:insert(ampmBtn.view)

end 
```

这是我使用它的地方：

```
local reminder1Group = display.newGroup()
TimePicker.decorate(reminder1Group, 0, 50)
scrollView:insert(reminder1Group) 
```

我有一种感觉，我需要将函数与 obj 联系起来，但我正在为如何做到这一点而苦苦挣扎。希望有人能指出我正确的方向吗？非常感谢！

编辑！

到目前为止修改（和简化）的类：

```
module(..., package.seeall)

local widget = require "widget"

picker = {}
picker.__index = picker

function picker.new()
    local picker_object = {}
    setmetatable(picker_object,picker)

    pickerGroup = display.newGroup()

    picker_object.theHour = 0
    picker_object.theMin = 0
    picker_object.am = true

    picker_object.increaseHrBtn = widget.newButton{
        default="gfx/up_regular.png",
        over="gfx/up_press.png",
        width=40, height=40,
        onRelease = picker.incHr
    }

    picker_object.decreaseHrBtn = widget.newButton{
        default="gfx/down_regular.png",
        over="gfx/down_press.png",
        width=40, height=40,
        onRelease = picker.decHr
    }

    picker_object.decreaseHrBtn.y = 100

    pickerGroup:insert(picker_object.increaseHrBtn.view)
    pickerGroup:insert(picker_object.decreaseHrBtn.view)

    return picker_object
end

function picker:incHr(event)
    print("inc")
end

function picker:decHr(event)
    print("dec")
end 
```

我称之为：

```
local TimePicker = require("timepicker2")
local reminderPicker1 = TimePicker.picker.new() 
```

...现在想知道如何将这个时间选择器的物理方面放入滚动视图中！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T09:05:33.220

您还没有在这里使用 OOP！根本！你在这里所做的是你已经声明了一个函数（尽管在一个单独的模块中）并调用了它。

在这里阅读[http://lua-users.org/wiki/SimpleLuaClasses](http://lua-users.org/wiki/SimpleLuaClasses) 和这里[http://lua-users.org/wiki/ObjectOrientationTutorial](http://lua-users.org/wiki/ObjectOrientationTutorial)

这是您如何在 lua（以及 Corona）中使用 OOP 的要点

```
local animals = {}
animals.__index = animals

function animals.new(params)
  local animal_object = {}
  setmetatable(animal_object,animals)

  animal_object.name = params.name

  return animal_object
end

function animals:getName()
   return self.name
end 
```

这就是你使用课程的方式

```
local dog = animals.new{name="dog"}
local cat = animals.new{name="cat"}

local name = dog:getName()
print(name)   -- prints "dog"

local name = cat:getName()
print(name)   -- prints "cat 
```

您需要注意的是，当您调用函数 cat:getName 而不是 cat.getName（使用分号而不是点）时，您将“self”作为参数传递。
那个自我是“动物”类的“对象”

'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T08:38:02.513

我对Corona一无所知，更不用说它是OOP系统了，但是您在函数中使用全局变量这一事实引起了怀疑……

```
theHour = 0
theMin = 0
am = true 
```

这些都是全局变量，Lua 使用默认的全局范式。因此，除非您在它们之前放置`local`关键字，否则它们将由您的整个应用程序共享。

# java - 如果 Oracle 中不存在表，则创建一个表（使用 Java）

> ID：10771346
> 
> 赞同：0
> 
> 时间：2012-05-27T03:03:03.007
> 
> 标签：java, sql, oracle, if-statement

我需要创建一个 oracle 表，如果它在 Oracle 数据库中不存在，并且如果该表存在则不做任何事情，因此我编写了一个匿名块，如果我触发该查询两次或三次，该块在 SQL Developer 中工作我在 sql developer 中没有任何异常。这是我写的以下查询-

```
public static final String DATABASE_TABLE = "LnPData";

public static final String CREATE_SQL = "DECLARE " +
"t_count INTEGER; " +
"v_sql VARCHAR2(1000) := 'create table " +DATABASE_TABLE +
"(ID number(10,0), " +
"CGUID VARCHAR(255), " + 
"PGUID VARCHAR(255), " + 
"SGUID VARCHAR(255), " + 
"USERID VARCHAR(255), " +
"ULOC VARCHAR(255), " +
"SLOC VARCHAR(255), " +
"PLOC VARCHAR(255), " +
"ALOC VARCHAR(255), " +
"SITEID VARCHAR(255), " +
"PRIMARY KEY ( ID ))'; " +
"BEGIN " +
"SELECT COUNT(*) " +
"INTO t_count " +
"FROM user_tables " +
"WHERE table_name = '" +DATABASE_TABLE + "'; " +

"IF t_count = 0 THEN " +
"EXECUTE IMMEDIATE v_sql; " +
"END IF; " +
"END; "; 
```

我在我的java代码中像这样执行上面的sql查询 - 第一次运行我的程序时，表被创建，但是当我第二次尝试运行同一个程序时，我总是得到以下异常。

```
// get the connection
LnPDataConstants.DB_CONNECTION = getDBConnection();
LnPDataConstants.STATEMENT = LnPDataConstants.DB_CONNECTION.createStatement();
LnPDataConstants.STATEMENT.executeUpdate(LnPDataConstants.CREATE_SQL); 
```

而且我总是得到sql异常-

```
SQL Error: ORA-00955: name is already used by an existing object
00955\. 00000 -  "name is already used by an existing object" 
```

有什么建议为什么会在 Java 代码中发生？

**PS我不想掉表**

更新代码：-

```
public static final String CREATE_SQL = "CREATE TABLE IF NOT EXISTS " +DATABASE_TABLE +
    "(ID number(10,0), " +
    " CGUID VARCHAR(255), " + 
    " PGUID VARCHAR(255), " + 
    " SGUID VARCHAR(255), " + 
    " USERID VARCHAR(255), " +
    " ULOC VARCHAR(255), " +
    " SLOC VARCHAR(255), " +
    " PLOC VARCHAR(255), " +
    " ALOC VARCHAR(255), " +
    " SITEID VARCHAR(255), " +
    " PRIMARY KEY ( ID ))"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T03:06:55.380

在 PL/SQL 中使用此脚本：

```
DECLARE cnt NUMBER;
BEGIN
  SELECT count(*) INTO cnt FROM all_tables WHERE table_name = '<TABLE-NAME>';
  IF cnt = 0 THEN 
    EXECUTE IMMEDIATE 'CREATE TABLE <TABLE-NAME>(<COLUMN-DEFINITIONS>)'; 
  END IF;
END; 
```

用适当的值替换`<TABLE-NAME>`和。`<COLUMN-DEFINITIONS>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T09:37:50.287

我也回答了你的另一个帖子。好像在这里你已经发现你的查询中有一个括号。

您的问题很容易解决：

如果你检查 user_tables 你会看到不是用双引号创建的表总是大写的——如果你想要一个区分大小写的表的话`CREATE TABLE "tAbLeNamE"(test number)`。您将表选择为“LnPData”，并且该表包含一个条目，即 LNPDATA。

解决方案是将 LnPData 更改为大写或仅更改查询的 where 子句：

```
"WHERE table_name = UPPER('" +DATABASE_TABLE + "'); " + 
```

答案也属于您的其他问题[java.sql.SQLException: ORA-00904](https://stackoverflow.com/questions/10771189/java-sql-sqlexception-ora-00904/10772817#10772817)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-27T10:58:11.940

首先，您为什么需要这样做？您的代码意味着您正在创建多个名称不同的相同表。这听起来像是我最糟糕的噩梦。

如果我错了，而您只创建一个表，请不要在代码中执行此操作。先在数据库中做，然后你就完成了。如果我是正确的，那么规范化表格。添加一个额外的列`username`（你已经有`userid`？）或类似的东西，并将所有具有这种格式的数据插入到一个表中。同样，该表已经可以创建，无需动态创建。

如果您进行标准化，您可能需要更多索引，但看起来好像您可能会丢失一些索引，`id`当您从该表中选择时，您真的总是会有吗？

* * *

如果您觉得确实*必须*在应用程序代码中执行此操作，那么正如[Matt 建议](https://stackoverflow.com/questions/10771346/create-a-table-if-doesnt-exists-in-the-oracle-using-java/10771372#comment14005142_10771372)的那样，请不要在您的应用程序代码中执行此操作。您需要向您正在操作的架构授予创建表权限。

创建一个具有这些权限的用户并添加一个存储过程来为该用户执行此操作。然后授予您的应用程序架构对该架构的执行权限。

您还应该使用该[`dbms_assert`包](http://www.oracle-base.com/articles/10g/dbms_assert_10gR2.php)来清理输入。

最后，[Eggi 是正确的](https://stackoverflow.com/a/10772995/458741)，您需要将对象名称大写，但`dbms_assert`默认情况下会这样做。

您还应该注意，调用`user_tables`or`all_tables`将对性能产生影响。另一个不在应用程序中执行此操作的原因。

把这一切放在一起，你会得到一个看起来像这样的存储过程：

```
create or replace procedure create_the_table
           ( pTableName varchar2 ) is

declare

   -- Sanitize the input.
   l_table_name := dbms_assert.simple_sql_name(pTableName);
   l_exists number;

begin

   select count(*)
     into l_exists
     from all_tables
    where owner = 'MY_APPLICATION_SCHEMA'
      and table_name = l_table_name
          ;

   if l_exists = 0 then
       execute immediate 'create table ' || l_table_name ||
                             ' ( ID number(10,0),
                                 CGUID VARCHAR(255),
                                 PGUID VARCHAR(255), 
                                 SGUID VARCHAR(255), 
                                 USERID VARCHAR(255),
                                 ULOC VARCHAR(255),
                                 SLOC VARCHAR(255),
                                 PLOC VARCHAR(255),
                                 ALOC VARCHAR(255),
                                 SITEID VARCHAR(255),
                                 PRIMARY KEY ( ID )
                               )';
      -- need to grant permissions so that we can check if this
      -- is run again.
      execute immediate 'grant select on ' || l_table_name || 
                            ' to my_application_user';
   end if;

end;
/ 
```

然后

```
grant execute on create_the_table to my_application_user; 
```

并打电话给...

```
begin
   my_create_table_user.create_the_table(table_name);
end; 
```

* * *

基本上我的建议是：

1.  完全不要这样做
2.  如果您必须这样做，请在数据库中进行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-26T23:17:01.397

如果有人遇到类似问题，这应该会有所帮助：

甲骨文版本：

```
DECLARE
    NCOUNT NUMBER;
    V_SQL  LONG;
  BEGIN
    SELECT COUNT(*)
      INTO NCOUNT
      FROM USER_OBJECTS
     WHERE OBJECT_NAME = 'tableName';
    IF (NCOUNT <= 0) THEN
      V_SQL := ' CREATE TABLE tableName(      
      column1,       
      column2,       
      column3,       
      column4,       
      column5,            
      column6 VARCHAR2(2))';
      EXECUTE IMMEDIATE V_SQL;
    END IF;
  END; 
```

爪哇版：

```
String sqlStanging = "DECLARE "
    +"NCOUNT NUMBER; "
    +"V_SQL LONG; "
    +"BEGIN "
    +"SELECT COUNT(*) INTO NCOUNT FROM USER_OBJECTS WHERE OBJECT_NAME = 'tableName' ;"
        +"IF(NCOUNT <= 0) "
        +"THEN "
        +"V_SQL:=' "
        +"CREATE TABLE tableName"
        +"("
        +"      column1, "
        +"      column2, "
        +"      column3, "
        +"      column4, "
        +"      column5, "
        +"      column6 VARCHAR2(2))';"       
        +"EXECUTE IMMEDIATE V_SQL ;"
        +"END IF; "
        +"END; "; 
```

# android - 执行新的 SQLite 查询是否安全，同时仍在为先前的查询迭代游标？（安卓）

> ID：10771348
> 
> 赞同：4
> 
> 时间：2012-05-27T03:03:12.013
> 
> 标签：android, sqlite

我调用 SQLiteDatabase.query 并获得一个光标。虽然我仍在迭代该游标，但从同一线程发出其他查询是否安全？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T03:20:57.053

**没有两个查询同时在同一张表上执行**。它是内置的同步方法，因此一次只会执行一个查询。您的第二个查询将处于等待位置，直到第一个完成执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T03:52:51.647

是的。您可以在同一个线程中拥有多个未完成的查询并独立访问每个游标。

我将以下代码添加到测试活动中，它按预期运行：

```
SQLiteDatabase connection = getApplicationContext().openOrCreateDatabase("foo.db", MODE_PRIVATE, null);
try {
    connection.execSQL("drop table if exists person");
    connection.execSQL("create table person (id integer, name string)");
    ContentValues cv = new ContentValues();
    cv.put("id", 1);
    cv.put("name", "leo");
    connection.insert("person", null, cv);
    cv = new ContentValues();
    cv.put("id", 2);
    cv.put("name", "yui");
    connection.insert("person", null, cv);

    Cursor rs = connection.query("person", new String[] {"id", "name" }, null, null, null, null, null);

    while(rs.moveToNext())
    {
        System.out.println("name = " + rs.getString(1));
        System.out.println("id = " + rs.getString(0));

        Cursor rs2 = connection.query("person", new String[] {"id", "name" }, null, null, null, null, null);
        while (rs2.moveToNext()) {
            System.out.println("name = " + rs2.getString(1));
            System.out.println("id = " + rs2.getString(0));
        }
    }
} catch (Exception e) {
    System.out.println("Exception " + e);
} 
```

# html - 减少 html tr 标签之间的默认间距

> ID：10771350
> 
> 赞同：0
> 
> 时间：2012-05-27T03:03:18.670
> 
> 标签：html, css, html-table

如何减少`<tr>`表格标签之间的间距？我想低于 0 的单元格间距。换句话说，我希望行几乎相互接触。

我有：

```
<table class="table">
  <tr class="row"><td>One</td></tr>
  <tr><td>Two</td></tr>
</table> 
```

我尝试了类似于以下的 CSS：

```
.table{ font-size: 12px; padding: 0;  margin:0;    }
.row{    height: 30px    }  / *tried playing with this to no avail */ 
```

没有成功 - 表行没有比默认值更接近。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T04:21:08.100

```
.table{
    border-collapse:collapse;
} 

.table tr td{
     height: 30px;
     padding: 0;
} 
```

不确定标准，但我注意到只有我用于 TD 的规则才有效，而不是 TR！

# java - 如何使用 SWT 创建带有按钮的单元格？

> ID：10771351
> 
> 赞同：2
> 
> 时间：2012-05-27T03:03:40.647
> 
> 标签：java, swt

我想使用 SWT 创建一个表，该表将包含一个带有按钮的列，如以下 UI： [https ://developers.google.com/java-dev-tools/wbpro/features/swt/data_binding /images/data_binding_property_pane1.gif](https://developers.google.com/java-dev-tools/wbpro/features/swt/data_binding/images/data_binding_property_pane1.gif)

问题是：如何向单元格添加按钮？谁能给我一个教程？非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T20:04:23.527

我相信您正在寻找不同类型的[编辑支持](http://www.vogella.com/articles/EclipseJFaceTableAdvanced/article.html#jfacetable_editor)。更准确地说[是 DialogCellEditor](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/viewers/DialogCellEditor.html)

# css - 在哪里可以找到用于 CSS 的“易于输入”的十六进制颜色代码列表？

> ID：10771365
> 
> 赞同：1
> 
> 时间：2012-05-27T03:05:21.603
> 
> 标签：css, colors, color-picker

让我举几个例子：

*   谷歌使用`#609, #15C, #12C, #093`...

*   Adobe 使用`#ECECEC, #D9D9D9, #B0B0B0, #737373`...

*   雅虎使用`#f9fafa, #93B9D9, #fefefe`...

如果您查看大多数此类网站的 CSS，他们使用的十六进制颜色代码非常容易记住，*我认为这根本不是无意的*。

如果我不清楚“易于输入”的十六进制颜色代码的确切含​​义，我的意思是像这样的颜色代码 -- `#FFFFFF (#FFF), #15C (#1155CC), #DBDBDB`，而不是像这样的十六进制颜色`#F9FAFA`（这也很容易记住）。

我在 Gimp、Photoshop 和各种在线工具中尝试过颜色选择器。对于我选择的颜色，我永远无法以上述“易于输入”的十六进制格式获得更接近的颜色。

所以，问题是，你是怎么做到的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T03:26:23.290

我这样做的方法是在颜色选择器中获取我想要的颜色，查看它们生成的十六进制值，然后尝试四舍五入到最接近的双倍对。所以让我们假设我选择了以下颜色（我基本上是随机输入的，所以只需要您自担风险生成实际颜色）：

`#82AC37` `#B8AB29` `#194645`

在第一种情况下，`82`接近`88`，`AC`接近`AA`，`37`接近`33`。这样一个就变成了`#88AA33`，或`#8A3`。通过类似的方式，我得到`#BA3`和`#244`。

如果我发现图案四舍五入的颜色与原来的距离太远，那么我会寻找具有简单图案的东西，例如 (在第一种情况下)`#82AA33`或 (在第二种情况下) `#B8A828`。它变成了一种艺术，真的。而且您肯定必须对 base-16 感到满意，这样您才能判断何时向上舍入与向下舍入更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T03:09:23.790

您可能正在寻找 X11 颜色名称：

[http://en.wikipedia.org/wiki/Web_colors#X11_color_names](http://en.wikipedia.org/wiki/Web_colors#X11_color_names)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T03:08:15.920

通过稍微向上或向下调整数字来做一些粗略的近似，以使十六进制表示看起来不错，而不会过多地改变颜色。

例如 `#225E9B --> #269 or #206099`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-15T18:34:26.333

另一种方法是简单地记住[十六进制单词](http://www.paulirish.com/2009/memorable-hex-colors/)

```
#BADA55 /* is always a fun one! */ 
```

# c# - 为什么字符串的功能不同

> ID：10771368
> 
> 赞同：7
> 
> 时间：2012-05-27T03:05:57.930
> 
> 标签：c#, .net

我有以下代码

```
 char ptr=new char();

 int counter = 1;
 string s = new System.String(ptr, counter);

 // does not show something
 MessageBox.Show(s+"Something");

 //shows something
 MessageBox.Show("Something" + s); 
```

第一个消息框什么都不显示![在此处输入图像描述](../Images/c64bb4c96b8b335b3c59ff9a71ecf6d5.png)

第二个消息框显示了一些东西![在此处输入图像描述](../Images/6ccd9e40b5de0e229ebb770c3e036f45.png)

如果计数器值为 0，则两个消息框显示相同的结果，但如果计数器大于 0，则出现问题。

我认为问题在于`new string(ptr, counter)`初始化

. 但我想知道为什么会发生这种情况的内部机制。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-27T03:09:01.810

ptr 内部为空。因此，当您连接时，它将打印到空字符。因此，在运行时，`MessageBox.Show(s + "Something");`评估为，`MessageBox.Show("\0Something");`而您的另一个评估为`MessageBox.Show("Something\0");`.

这就是为什么`Something`没有印在第一个上。它超过了空字符。[在Wikipedia](http://en.wikipedia.org/wiki/Null-terminated_string)上阅读更多关于 Null-Terminated Strings (ASCIIZ) 的信息。

在内部，.NET 中的字符串只是一个`struct`包含长度的`int`eger 和一个`char[]`数组。但是，在将其传递给 时`MessageBox.Show`，它会传递给 Win32 API 函数[`MessageBox`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645505.aspx)，该函数基于 C，使用以空字符结尾的字符串。

最有可能的是，至少对于处于`optimize`( `Release`) 模式的现代编译器，编译器会看到您在字符串中添加了一个空字符，然后删除它之后的所有内容。在这种情况下，它只是`\0`为字符串分配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T03:45:13.817

`new char()`返回一个空字符（包含两个零字节）`ptr`，`'\0'`.

当您使用`s = new System.String(ptr, 0);`时，构造函数将`'\0'`字符连接**零**次，从而产生一个空字符串 ( `""`)。将空字符串添加到另一个字符串没有效果，因此`s+"Something"`等于`"Something"+s`which is `"Something"`。

以另一种方式， using`s = new System.String(ptr, 1);`创建一个包含单个`'\0'`字符的字符串。然后在结果之前添加此字符串，在`"Something"`结果`"\0Something"`之后添加`"Something\0"`。

在 C# 中，字符串**不会**作为以 NULL 结尾的字符串进行操作，因此当您创建 时`"\0Something"`，您确实拥有它（您可以通过取`Length`字符串的 10 来确定），但是`MessageBox.Show`会转换为[`MessageBox`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645505.aspx)windows user32 库的 Win32 函数。并且该函数需要一个以 null 结尾的字符串（当遇到 unicode 字符串的零字节或两个零字节时它会停止）。

# fstream - 从文件中读取（ifstream）并排序

> ID：10771369
> 
> 赞同：0
> 
> 时间：2012-05-27T03:06:06.957
> 
> 标签：fstream, getline

我需要从文件中读取，然后将行分成 3 个字符串。格式是：A **first_Secod_Third**（三个下划线）这是作业，他们建议我们使用getline和忽略。所以我有：

```
 main()
    ifstream inf("file.txt")
    while(inf)
    {inf >> class1;
    cout << class1;
    }
    class THECLASS
    {string a, b, c;
    public:
    friend void operator>>(ifstream &inf, THECLASS &class1)
    {getline(inf, class1.a, '_');
    inf.ignore();
    inf.ignore();
    [if I put getline class1.b, the whole line will go into it, overwriting .a]
    }

and in operator<<, I have

    os << class1.a << class1.b;
    return os; 
```

但是当我 cout << class1 得到的只是输入文件的所有三个字段，没有*_*，每个字段都在一个新行上。当我尝试使用 get() 函数时，即使我声明了 fstream，编译器也无法识别它。这样做的一般算法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T04:16:31.300

希望这可以帮助你。

```
// assume the content of infile : 
//First1_xxSecond1_xxThird1
//Firts2_xxSecond2_xxThird2
//First3_xxSecond3_xxThird3
#include <iostream>
#include <string>
#include <fstream>
using namespace std;
class MyClass
{   
public:
    string a, b, c;
};
ifstream& operator>>(ifstream &inf, MyClass& class1)
{
    getline(inf, class1.a, '_');    //"First" into class1.a
    inf.ignore(2,EOF);              //skip "xx"
    getline(inf, class1.b, '_');
    inf.ignore(2, EOF);
    getline(inf, class1.c);
    return inf;
}
ostream&  operator<<(ostream& out, const MyClass& class1)
{
    out<< class1.a << "_"<< class1.b<< "_" << class1.c;
    return out;  
}
int main () { 
    MyClass class1;
    ifstream  stream("test.txt");
    while(stream.rdstate()  != ifstream::eofbit)
    {
        stream >> class1;
        cout << class1 <<"\n";  //First1_Second1_Third1 for the first loop.ect
    }
    return 0;
} 
```

# javascript - 如何在 jQuery 中编码特殊字符（>、<、%）

> ID：10771374
> 
> 赞同：0
> 
> 时间：2012-05-27T03:08:18.727
> 
> 标签：javascript, jquery

谁能给我一个示例脚本来在 jQuery 中对特殊字符（>、<、%）进行编码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T03:14:22.503

`escape(string)`是一个不推荐使用的功能。

您可以使用`encodeURI(string)`URL 安全字符串，也`encodeURIComponent(string)`可以转义其他字符： , / ? : @ & = + $ #

`encodeURI("<>?")`返回`"%3C%3E?"`

`encodeURIComponent("<>?")`返回`"%3C%3E%3F"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T03:10:21.127

```
escape("how to encode special characters(>,<,%) in jQuery")

"how%20to%20encode%20special%20characters%28%3E%2C%3C%2C%25%29%20in%20jQuery" 
```

# java - 按日期对 Arraylist 进行排序仅对日期进行排序，而不是对月份和年份进行排序？

> ID：10771375
> 
> 赞同：-1
> 
> 时间：2012-05-27T03:08:49.610
> 
> 标签：java, sorting, arraylist, date-sorting

我正在尝试按（类型日期） MyObject.getDate() 对 ArrayList 进行排序

我的格式由 dd-mm-yyyy 的 SimpleDateFormat 格式化；我正在使用自定义比较器对列表进行排序。我正在使用 Collections.sort(productList, new CustomComparator())

问题我的排序列表仅按 dd 而不是 dd-mm-yyyy。

有任何想法吗？

```
public class Product
{
    private String productName; 
    private Date boughtOn;
    private Date useBy; 
    private double boughtAt; 
    private long quantity; 
    private static DateFormat dateFormat;

    public Date getUseBy()
    {
        return useBy;
    }
    public void setUseBy(Date useBy)
    {
        this.useBy = useBy;
    }
}

public static Date rtnDate(String dateStr, int currentLineCount)
    {
        SimpleDateFormat df = new SimpleDateFormat("dd-mm-yyyy");
        try
        {   
            Date date = df.parse(dateStr);
            return date;
        }
        catch (ParseException e)
        {
            productParsingErrorMessages.add("Date parse exception: " + e + "on line " + currentLineCount);
            return null;
        }

//      DateFormat formatter = new SimpleDateFormat("dd-mm-yyyy");
//      Date date2 = (Date)formatter.parse(dateStr);
    } 
```

> ```
> System.out.println("Product list - BEFORE sorting by UseBy");
> printInventory(produuctList);
> 
> Collections.sort(produuctList, new CustomComparator());
> 
> System.out.println("Product list - AFTER sorting by UseBy");
> printInventory(produuctList); 
> ```

```
public class CustomComparator implements Comparator<Product>
{
    @Override
    public int compare(Product o1, Product o2)
    {
        return o1.getUseBy().compareTo(o2.getUseBy());
    }
} 
```

产品列表 - 在按 UseBy 排序之前

产品名称：糖 UseBy : 12-12-2012
产品名称： Sugar UseBy : 01-10-2012
产品名称： Sugar UseBy : 16-04-2012
产品名称： Sugar UseBy : 30-01-2012
产品名称： Sugar UseBy : 25-04-2012
产品名称：糖 UseBy : 03-04-2012
产品名称： Sugar UseBy : 08-04-2012

产品列表 - 按 UseBy 排序后

产品名称：糖 UseBy : 01-10-2012
产品名称： Sugar UseBy : 03-04-2012
产品名称： Sugar UseBy : 08-04-2012 产品名称：
Sugar UseBy : 12-12-2012
产品名称： Sugar UseBy : 16-04-2012
产品名称：糖 UseBy : 25-04-2012 产品名称：
Sugar UseBy : 30-01-2012

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T03:36:01.833

如果您的格式字符串已正确复制，则您的 SimpleDateFormat 是错误的。应该`dd-MM-yyyy`不是`dd-mm-yyyy`，因为您感兴趣的是**几个月**，而不是**几分钟**。

你有：

```
public static Date rtnDate(String dateStr, int currentLineCount)
{
    SimpleDateFormat df = new SimpleDateFormat("dd-mm-yyyy"); 
```

当你应该使用：

```
public static Date rtnDate(String dateStr, int currentLineCount)
{
    SimpleDateFormat df = new SimpleDateFormat("dd-MM-yyyy"); 
```

这将解释一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T03:23:01.377

我大约 90% 确定您在比较`java.lang.String`s 而不是`java.util.Date`s。鉴于您提到的日期格式，它显然会首先将所有日期排序在一起。例如，一整年，您的清单将开始：

```
01-01-2012 (1 Jan)
01-02-2012 (1 Feb)
01-03-2012 (1 Mar) 
```

使用 Date 对象进行比较，而不是它的 String 表示。

PS图片不是代码。将您的代码放入您的问题中。

**更新：**证明您发布的代码按预期工作：

```
import java.text.DateFormat;
import java.util.*;

public class DateComparators {
    public static void main(String[] args) {
        List<Product> productList = Arrays.asList(
                new Product(new Date(2012 - 1900, 5, 1)), // 1 Jun 2012
                new Product(new Date(2012 - 1900, 1, 1)), // 1 Feb 2012
                new Product(new Date(2012 - 1900, 2, 15)), // 15 Mar 2012
                new Product(new Date(2012 - 1900, 0, 2)), // 2 Jan 2012
                new Product(new Date(2012 - 1900, 1, 2)), // 2 Feb 2012
                new Product(new Date(2012 - 1900, 0, 1)) // 1 Jan 2012
        );
        Collections.sort(productList, new CustomComparator());
        System.out.println(productList);
    }

    static class CustomComparator implements Comparator<Product> {
        @Override
        public int compare(Product o1, Product o2) {
            return o1.getUseBy().compareTo(o2.getUseBy());
        }
    }

    static class Product {
        private String productName; // sauce pan
        private Date boughtOn; // 4-5-2012
        private Date useBy; // 4-5-2012
        private double boughtAt; // $4.05
        private long quantity; // 9
        private static DateFormat dateFormat;

        Product(Date useBy) {
            this.useBy = useBy;
        }

        public Date getUseBy() {
            return useBy;
        }

        public void setUseBy(Date useBy) {
            this.useBy = useBy;
        }

        @Override
        public String toString() {
            return "\nuseBy=" + useBy;
        }
    }
} 
```

输出：

```
[
useBy=Sun Jan 01 00:00:00 CST 2012, 
useBy=Mon Jan 02 00:00:00 CST 2012, 
useBy=Wed Feb 01 00:00:00 CST 2012, 
useBy=Thu Feb 02 00:00:00 CST 2012, 
useBy=Thu Mar 15 00:00:00 CDT 2012, 
useBy=Fri Jun 01 00:00:00 CDT 2012] 
```

因此，您还没有向我们展示一切。问题出在你遗漏的东西上。

# java - Java中数组的抽象维数

> ID：10771380
> 
> 赞同：10
> 
> 时间：2012-05-27T03:09:48.143
> 
> 标签：java, arrays, multidimensional-array

在Java中，不同维度的数组有不同的类型。因此，`int[]`作为参数的方法不能采用`int[][]`or `int[][][]`。我有很多代码，我在其中创建了非常相似但针对数组维度的方法。有没有办法处理任意维度的数组，从而抽象出这个通用功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T03:13:50.393

我想说你能做的最接近的事情是制作一些重载方法，它们采用数组的所有可用维度，并让它们中的每一个都调用一个具有大部分逻辑的通用方法。

```
public void method ( int [] i ) {  //1-d array
    //logic 
}

public void method ( int [][] i) {  //2-d array
     for (int [] j : i) {
         method(j);
     }
}

public void method ( int [][][] i) {   // 3-d array
    for ( int [][] j : i ) {
        method(j);
    }
} 
```

...ETC

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T12:23:23.477

如果你愿意放弃类型安全，你可以通过一点递归（这并不奇怪，对吧？）和反思来做到这一点。

这个想法是以一种向下递归的方式编写您的方法，直到数组只有一个维度。一旦你处于单维级别，就开始工作；否则，递归调用自己，并在必要时汇总先前级别的发现。

这是一个快速演示：

```
import java.util.*;
import java.lang.*;
import java.lang.reflect.Array;

class Main {
    public static int sumArray(Object array) {
            Class type = array.getClass();
            if (!type.isArray()) {
                    throw new IllegalArgumentException("array");
            }
            Class ct = type.getComponentType();
            int res = 0;
            int len = Array.getLength(array);
            if (ct.isArray()) {
                    for (int i = 0 ; i != len ; i++) {
                            res += sumArray(Array.get(array, i));
                    }
            } else {
                    for (int i = 0 ; i != len ; i++) {
                            res += Array.getInt(array, i);
                    }
            }
            return res;
    }
    public static void main (String[] args) throws java.lang.Exception
    {
            int[] a = new int[] {1,2,3,4,5,6,7,8,9,10};
            int aa[][] = new int[][] {{1,2},{3,4},{5,6}};
            int aaa[][][] = new int[][][]{{{1,2},{3,4},{5,6}},{{7,8},{9,10},{11,12}}};
            System.out.println(sumArray(a));
            System.out.println(sumArray(aa));
            System.out.println(sumArray(aaa));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T03:13:36.827

最简洁的答案是不。长答案很抱歉，但没有。由于 Java 处理数组的方式，两者是根本不同的类型，实际上并没有什么好的方法可以用一段代码来处理任何维度的数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T03:22:23.453

答案是不！但是你可以用线性数组做任何你想做的事情……想想看

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-27T03:39:15.140

您可以通过将其实现隐藏在类中来实现多维数组（请原谅或纠正我的 Java 语法，我不是 Java 编码器）：

```
class MultidimensionalArray<Type> {

   // Implement N-dimensional 0-origin array of <Type>

   int[] dimensions;

   Type[] body;

   MultidimensionalArray(index1: int)
   {  dimensions=new int[1];
      dimensions[0]=index1;
      body=new Type[index1];
   }

   MultidimensionalArray(index1: int, index2: int)
   {  dimensions=new int[2];
      dimensions[0]=index1;
      dimensions[1]=index2;
      body=new Type[index1*index2];
   }

   MultidimensionalArray(int[] indexes)
   {  size=1;
      dimensions=indexes;
      for(int i=0;i<indexes.size();i++) size*=indexes[i];
      body=new Type[size];
   }

   Type Get(int index1) {
      assert dimensions.size()==1;
      return body[index1];
   }

   Type Get(int index1, int index2) {
      assert dimensions.size()==2;
      return body[index1*dimensions[0]+index2];
   }

   Type Get(int[] indexes) {
      int index=indexes[0];
      assert dimensions.size()==indexes.size();
      for (int i=0;i<indexes.size();i++) index=index*dimensions[i]+indexes[i+1];
      return body[index];
   }

   void Put(int index1, Type v) {
      assert dimensions.size()==1;
      body[index1]=v;
   }

   void Put(int index1, int index2, Type v) {
      assert dimensions.size()==2;
      body[index1*dimensions[0]+index2]=v;
   }

   void Put(int[] indexes, Type v) {
      int index=indexes[0];
      assert dimensions.size()==indexes.size();
      for (int i=0;i<indexes.size();i++) index=index*dimensions[i]+indexes[i+1];
      body[index]=v;
   }

} 
```

您可以通过调用它的构造函数来初始化它，并通过传入一个整数数组作为索引集来访问一个元素。有点笨拙但有效：

```
int[] mydimensions={2,3,5};
MyArray MultidimensionalArray<int>=new MultidimensionalArray(mydimensions);
... 
int[] indexset={1,2,4};
MyArray.Put(indexset,22);
...
indexset = {0,1,3};
...  MyArray.Get(indexset) ... 
```

我为 1D 和 2D 数组添加了方便函数，它们不需要索引集，而是使用单个参数作为索引。轻松推广到维度 K 的数组。您还可以添加函数来创建不同大小的索引集。

所有这些都是以一些开销为代价的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-27T04:50:00.430

答案是“可能不会”。正如其他答案所指出的那样，具有不同维度的数组类型与分配不兼容。但是，有一个可能的出路。

类型`int[]` `int[][]`和`int[][][]`都是 的子类型`Object`。并且（例如）an`int[][]`实际上是一个`int[]`实例数组。因此*，对于某些计算*，可能会执行以下操作：

```
public void calc(Object array) {
    if (array instanceof int[]) {
        calc((int[]) array);
    } else if (array instanceof int[][]) {
        for (a int[] : (int[][]) array) {
            calc(a);
        }
    } else if (array instanceof int[][][]) {
        for (a int[][] : (int[][][]) array) {
            for (a2 int[] : a) {
                calc(a2);
            }
        }
    } else {
        throw new ClassCastException(...);  // or something more appropriate
    }
}

public void calc (int[] array) {
    // do the calculation
} 
```

注意事项：

*   这仅在计算以这种方式进行时才有效，

*   您必须为每种方法重复这个丑陋的样板，并且

*   样板文件实际上可能比使用三种不同的方法更糟糕。

现在，根据计算（和性能要求），您可以通过在可以传递给通用“应用于所有元素”方法的对象中进行计算来概括代码；例如

```
public interface Calc {
    public void calc(int i);
}

... 

public void doCalc(Object array, Calc calculator) {
    // as above
}

public void doCalc(int[] array, Calc calculator) {
    for (int i : array) {
        calculator.calc(i);
    }
} 
```

......但仍然有很多样板......你会受到性能影响。

# javascript - 如何将变量从列表传递到 Sencha Touch 2 中的新视图

> ID：10771382
> 
> 赞同：3
> 
> 时间：2012-05-27T03:10:19.133
> 
> 标签：javascript, variables, views, touch, extjs

我尝试了 2 天来在 Sencha 2 中的列表和新视图之间建立链接。

> 我在卡片布局中有我的列表：

```
Ext.define("BNC.view.Categorii", {
    extend: 'Ext.Panel',

    config: {
        layout: 'card',
        styleHtmlContent: true,
        scrollable: false,
        items: [{
            xtype: 'list',
            itemTpl: '<div class="itemCategorii" id="{id}"><div style="float:left;">{nume}</div><div style="float:right;">{id}</div></div>',
            listeners: {
                select: function(view, record) {
                    console.log(record.raw.id);
                    Ext.Viewport.setActiveItem(showDetails);
                    // How can I pass record.raw.id or record.raw.nume to showDetails view ?
                }
            },
            store: 'categoriiDB'

        }]
    }
}); 
```

> 我的 showDetails 是：

```
var showDetails = Ext.create('BNC.view.Detalis'); 
```

> 我的详细信息视图是：

```
Ext.define("BNC.view.Bancuri", {
    extend: 'Ext.Panel',
    config: {
        layout: 'card',
        styleHtmlContent: true,
        scrollable: false,
        items: [{
            docked: 'top',
            xtype: 'toolbar',
            title: '**Here I need the var sended by list select**'
        }]
    }
}); 
```

我需要将 id 从列表项传递到由创建的下一个视图

```
Ext.Viewport.setActiveItem(showDetails); 
```

并在我的工具栏标题中打印 id？

我是 Sencha Touch 的新手，这个问题让我放弃了:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T17:19:21.147

我建议您使用[http://docs.sencha.com/touch/2-0/#!/video/list](http://docs.sencha.com/touch/2-0/#!/video/list)示例。非常有用，您可以举个例子在列表和详细视图之间传递变量。控制器中的函数，如 shoDetail() 等...

# c++ - 为什么C++中的消息框显示中文消息

> ID：10771388
> 
> 赞同：1
> 
> 时间：2012-05-27T03:12:07.940
> 
> 标签：c++, visual-studio-2010, winapi

> **可能重复：**
> [为什么我的简单 C++ GUI 应用程序显示中文消息框？](https://stackoverflow.com/questions/2079828/why-does-my-simple-c-gui-application-show-a-message-box-in-chinese)

我在 Visual C++ 中实现了如下代码块：

```
int nResult=MessageBox(NULL,
                       (LPCWSTR)"An example of Cancel,Retry,Continue",
                       (LPCWSTR)"Message Box!",
                        MB_ICONWARNING|MB_ABORTRETRYIGNORE); 
```

但是，无论我尝试什么，它总是显示一个中文消息框！因此，我只想为我的问题寻求任何解决方案以及为什么这里有中文信息。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-27T03:14:14.743

您忘记在字符串文字之前放置“L”。修改如下：

```
int nResult=MessageBox(NULL,
                   L"An example of Cancel,Retry,Continue",
                   L"Message Box!",
                   MB_ICONWARNING|MB_ABORTRETRYIGNORE); 
```

在 C++ 中，unicode 字符串文字以`L`. 如果您不添加前缀，则强制转换为“unicode string constant”将无济于事，并会导致对内存位置的错误解释。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-27T03:13:22.437

您期望将指针从一种类型转换为另一种类型以更改指向的值。这不是 C++ 强制转换所做的。他们只是告诉编译器假设指针指向新类型。要指定[宽文本](http://msdn.microsoft.com/en-US/library/69ze775t%28v=vs.80%29)，`L`请在引号之前使用（如果您的编译器支持，则使用[新的字符串文本）。](http://en.wikipedia.org/wiki/C%2B%2B0x#New_string_literals)并摆脱演员表，它只是掩盖了错误。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-27T03:15:26.230

正如大卫所说，您已将 ASCII 字符串转换为 UNICODE 字符串。请改用 _TEXT("Your string") 宏。

您不能只将 ASCII 字节解释为 UNICODE 字符串，否则会发生不好的事情。

编辑：此外，如果您想要 ASCII 字符串，您可以显式调用 MessageBoxA() 或在项目设置中更改为多字节字符设置。

# jquery - 使用地图限制jquery ui自动完成结果的正确方法

> ID：10771390
> 
> 赞同：1
> 
> 时间：2012-05-27T03:12:24.110
> 
> 标签：jquery

与地图一起使用时限制 ui.autocomplete 结果的正确方法是什么？

我在这里发现了适用于简单数组的解决方案的类似问题：[Limit results in jQuery UI Autocomplete](https://stackoverflow.com/questions/7617373/limit-results-in-jquery-ui-autocomplete) 但是我的数组有点嵌套，除了源是外部的。

我还在这里测试了另一个未定义错误的解决方案：[jquery autocomplete limit results](https://stackoverflow.com/questions/8921269/jquery-autocomplete-limit-results)

以下是我从链接中改编的内容，但没有成功。

**我的测试：**

```
var sourceUrl = '/path/to/products.json';
$("#auto").autocomplete({
        source: function (request, response) {        
          $.getJSON(sourceUrl, {term: request.term}, function (result) {
                response($.map(result.products, function (item) {
                   var myarray = item.product;
                   console.log(myarray); // the returns look expected (Product One, Product Two, etc)
                   var results = $.ui.autocomplete.filter(myarray, request.term);
                   results.slice(0, 10);
                }));                
          });
        }
}); 
```

**产品.json：**

```
{"products": [{"label": "Product One", "product": "Product One", "sku": "12345"},    ... 
```

简单地输出所有产品会更容易，但它们只是很多/很重的下拉菜单。这就是为什么我需要限制结果。

非常感谢任何提示。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T03:21:28.710

从文档中，[$.map()](http://api.jquery.com/jQuery.map/)

该函数可以返回：

*   翻译后的值，将映射到结果数组
*   **null 或未定义，删除项目**
*   一组值，将被展平为完整的数组

如果你想坚持使用地图，你可以添加一个条件来限制你的结果。

```
$.map(result.products, function (item, i) {
    if(i>9){
        return null
    }
} 
```

在这里要清楚的重要一点是，当您处理整个数组以及仅接触一个元素时。`var myarray = item.product;`让我担心。为什么每个结果都是一个数组？您可以发布来自 sourceUrl 的 JSON 响应吗？

理想情况下，sourceUrl 返回一个数组，`$.map`用于将每个元素转换为所需的形式。通常这些元素是对象，而不是数组。因此，在您提供给映射的回调内部不应该谈论数组或过滤事物。这需要在循环之外完成。

**编辑评论：**

如果您的源是静态文件，我建议只将其引入一次，而不是让用户每次在自动完成字段中键入内容时都重新下载它。像下面这样的东西可能是一个更好的主意。

```
var sourceData;
$.getJSON('/path/to/products.json', function (result) {
    sourceData = $.map(result.products,function(product){
        return product.product;
    });
});

$("#auto").autocomplete({
        source: sourceData
}); 
```

当然，此时您必须问自己文件是单独文件是否有特定原因，或者为什么它不是 JS 包含。

# c# - 如何使用 Linq 执行动态查询

> ID：10771400
> 
> 赞同：0
> 
> 时间：2012-05-27T03:14:31.753
> 
> 标签：c#, linq-to-sql, linq-to-entities

我正在尝试执行动态 OR。例如：

```
test = test.Where(z => z.Id > 1);
test = test.Where(x => x.Name == "Admin"); //or name equals admin 
```

我将通过一个方法传递第一个查询，然后需要执行 and OR 而不是 and。我如何用 Linq 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T03:17:24.733

您可以将[联合](http://msdn.microsoft.com/en-us/library/bb341731.aspx)用于 OR 效果。

```
 test1 = test.Where(z => z.Id > 1);
    test2 = test.Where(x => x.Name == "Admin"); //or name equals admin

    test = test1.Union(test2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T04:03:20.763

试试这个：

```
test = test.Where(z => z.Id > 1 || z.Name == "Admin"); 
```

# for-loop - 我如何使 bash 数组在我遍历它们时表现出来？

> ID：10771401
> 
> 赞同：0
> 
> 时间：2012-05-27T03:15:07.047
> 
> 标签：for-loop

我有一个包含许多字符串的数组，并且想对每个字符串做一些工作。我原以为简单的 for 循环会起作用，但这会导致严重的问题：

```
for list in $valarr
do

    for word in ${valarr[j]}
    do
    #echo word: $word
    if [ $i -ge $f ] && [ $i -le $t ]; then
        echo -e -n "$word\t"
    fi
    i=`expr $i + 1`
    done
    echo $j ${#valarr[@]}
    i=0
    j=`expr $j + 1`
done 
```

如您所见，我有两个循环。嵌套在里面的那个完成了我需要完成的工作（并且工作正常），但外部 for 循环认为它拥有的元素*数是它的第一个元素 (string) 中的单词数*。从结构上讲，我真正想做的是这样的：

```
for each string in an array:
    for each word in the string:
        do some work
    done
done 
```

为什么 bash 会有这样的行为，我该如何完成我需要做的事情？（抱歉，顺便说一句，对于清晰度或格式方面的任何问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T04:06:33.787

你遍历一个这样的数组：

```
for var in "${valarr[@]}" 
```

[@] 很重要；裸露`$arrayName`是一样的`${arrayName[0]}`。这就是为什么您的循环遍历第一个元素中的单词的原因。

# c++ - 为什么不将有理数实现并存储为零丢失信息的分数？

> ID：10771425
> 
> 赞同：31
> 
> 时间：2012-05-27T03:21:43.400
> 
> 标签：c++, floating-point, numbers

我知道这有点假设，但我想知道为什么我所知道的语言都没有。

例如，您要存储 1/3。给程序员一个选项，将其指定为 1/3，并存储 1 和 3。类似于

```
struct float {
    int numerator;
    int denominator;
}; 
```

有理数算术变得非常简单而且更加准确！

这将解决许多与浮点数的精度和存储限制相关的问题，而且我认为它不会引入任何新问题！

因此我的问题是：**为什么没有实现有理数并将其存储为零丢失信息的分数？**

* * *

正如乔所问的那样，其他人也可能会指出，我并不是说要替换现有系统，而是要补充它。

问：你们是怎么储存的`pi`？

A：很多时候，我只是存储`1/3`而不是`pi`。`pi`可以以旧方式存储，也可以以`1/3`新方式存储。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-27T03:49:05.327

默认情况下它们不以这种方式存储的原因是可以适合固定位集的有效值范围更小。您的`float`班级可以存储 1/MAXINT 和 MAXINT（正负）之间的数字。AC/C++`float`可以表示 1E+37 和 1E-37（加号或减号）之间的数字。换句话说，一个标准`float`可以表示比你的值大 26 个数量级和小 26 个数量级的值，尽管它占用了一半的位数。通常，能够表示非常大和非常小的值比非常精确更方便。尤其如此，因为四舍五入往往会给我们提供像 1/3 这样的小分数的正确答案。在 g++ 中，以下给出 1：

```
std::cout << ((1.0/3.0) * 3.0) << std::endl; 
```

请记住，C++ 中的类型具有固定的位大小。因此，32 位数据类型最多具有 MAX_UINT 值。如果你改变它的表示方式，你只是改变了可以精确表示的值，而不是增加它们。你不能塞得更多，因此不能“更精确”。你可以用能够精确表示 1/3 来换取不能精确表示其他值，例如 5.4235E+25。

确实，您`float`可以更精确地表示 1E-9 和 1E+9 之间的值（假设为 32 位整数），但代价是完全无法表示超出此范围的值。更糟糕的是，虽然标准`float`始终具有 6 位精度，但您的精度`float`会根据值接近零的程度而有所不同。（请注意，您使用的是两倍的位`float`。）

（我假设 32 bit `int`s。同样的论点适用于 64 bit `int`s。）

**编辑**：另请注意，人们使用的大多数数据`float`s 无论如何都不精确。如果您正在从传感器读取数据，那么您已经获得了不精确性，因此即将“完美”地表示该值是没有意义的。如果您`float`在任何类型的计算环境中使用 a ，那都没关系。如果您的目的是在屏幕的 1/3 处显示一些文本，那么完美地描述“1/3”是没有意义的。

唯一真正需要完美精确度的人是数学家，他们通常有软件可以做到这一点。很少有人需要超出`double`给定范围的精度。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-27T03:28:06.850

> 实数算术变得非常简单并且更加准确！

不，它没有。您描述的结构仅处理*有理数*，即可以表示为分数的那些。实数集包括有理数和无理数。大多数现实世界的计算都是使用实数完成的，所以你不能只局限于有理数并期望一切都好。

> 我想知道为什么没有我知道的语言可以做到这一点。

我能想到的大多数语言都可以完全按照您的描述进行。在 C 中，您可以创建一个包含分子和分母的结构，并且您可以定义一堆对此类结构进行操作的函数。C++ 通过让你定义一个类和对该类的操作使事情变得更容易——同样的想法，更好的语法等等。事实上，不同的数字集经常在 OO 语言中用作示例：你可以从定义一个有理类，然后将其扩展为包括虚数，依此类推。

我猜想没有更多内置支持精确类型的语言的原因可能与处理器不直接支持此类操作的事实有关。现代处理器包含实现浮点类型算术运算的指令，因此很容易将这些指令包含在任何语言中。支持精确类型意味着将数学库构建到语言中，并且在多个级别上将数学库从语言中移除并让需要它的人将其构建到他们的软件中可能会更好。

如果您要不遗余力地产生准确的结果，您可能不想将自己限制在有理数上，因此您作为示例给出的结构不会削减它。如果您在第一次出现无理数时退回到不精确的结果，那么能够对有理数进行精确计算并不是很有帮助。幸运的是，那里有复杂的数学系统。[Mathematica](http://www.wolfram.com/mathematica/)是一个著名的例子。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-27T05:38:45.787

C++ 至少包含一个编译时有理算术库。这是一个例子：

```
#include <ratio>
#include <iostream>

int main() {
    using a = std::ratio<3,5>;
    using b = std::ratio<7,6>;

    using c = std::ratio_multiply<a,b>::type;

    std::cout << c::num << '/' << c::den << '\n'; // prints 7/10
} 
```

在这里，我们将 3/5 乘以 7/6 得到 7/10。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-27T03:55:46.870

戴上你的头盔，因为我们要在这里开始理论了。

任何数学本科生都可以给你一个关于康托尔证明实数不可数基数的电梯解释。如需更长的解释，请转到[此处。](http://en.wikipedia.org/wiki/Cantor%27s_diagonal_argument)

但正如 Caleb 指出的那样，实数域包含有理数和无理数。这意味着实数字段的某些子集将永远无法表示为分子/分母对。这个子集有多大？事实证明，*大多数*实数都是无理数，因为有理数的集合是可数的。

这是妙语：以这种方式存储数字将非常愚蠢，因为实值函数的*大多数*输出​​不能存储为分子和分母。

这似乎令人难以置信，但想想常见的超越函数，例如 sin、cos、log。这些函数的大多数输出​​都是不合理的，编写 IEEE 754 和其他早期 FP 东西的人都知道这一点。他们认为，处理少量错误以换取表示（有一些截断）实数字段的更大部分的可能性是一个很好的设计折衷。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-05-27T03:38:21.473

许多 CPU 对浮点有特殊处理（[参见 Wikipedia](http://en.wikipedia.org/wiki/Floating-point_unit)），`float`语言中的数据类型确保程序可以轻松地利用 FPU。另一方面，我不知道有任何 CPU 可以使用特殊的汇编指令处理分数，因此分数可以轻松有效地在库中实现，而不必是语言功能。如果你想在 C++ 中使用分数，你可以使用[Boost.Rational](http://en.wikipedia.org/wiki/Floating-point_unit)。

现代 CPU 实现浮点运算而不是处理分数的原因是浮点可以更容易地实现。要实现基本`float`操作，您基本上需要能够加减乘除整数并进行一些位移。另一方面，要与分数进行比较，您需要找到两个整数的最大公约数，这在硬件中实现起来要困难得多。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-05-27T07:03:35.933

与您得到的许多答案相反，您的想法适用于多种问题。尤其是[像这样的问题，你知道会有很多取消，并且想要一个准确的答案。](https://stats.stackexchange.com/questions/27884/odds-of-x-occurrences-in-a-row-given-y-trials-a-coin-flip-problem/28001#28001) 出于这个原因，Python 有`fractions`模块，正如@bames53 指出的那样，C++ 有`<ratio>`.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-27T03:52:21.150

> “因此我的问题是：为什么没有实现有理数并将其存储为零丢失信息的分数？”

C++ 标准库缺少其他语言和库提供的许​​多实际必需的类型。Boost 库已经提供了一个[有理数实现](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2006/n1977.html)。而且它[似乎](http://lists.boost.org/Archives/boost/2012/04/192500.php)很快也会提供[建议的小数类型](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2006/n1977.html)，例如用于处理货币金额。

至于为什么缺少这些类型，C++ 标准库通常只提供基本的通用构建块，而不是使用这些块构建的更实用的东西。即它是简约的。Boost 库只是少了一点简约，然后例如 Poco 库更像其他语言的功能更丰富的标准库。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-27T03:52:31.327

有几个原因：
- 没有来自通用架构的支持。这是可以理解的，因为分数必须总是伴随着简化。这在硬件级别实现并非易事，或者更确切地说，它将是一条没有太多应用程序的指令。
- 无法处理非常大或非常小的数字。或者 BigInteger 必须涉及。对于非常大或非常小的数字，我们通常不需要提供的大部分精度。
- 如果这是语言级别支持的类型，它必须支持与其他数字类型的转换。如果内部表示具有固定精度（在乘法的情况下），它必须决定何时返回浮点类型。

在一种语言中，支持某事的决定通常取决于其应用（或语言的基本原理）。如果应用程序较小，则支持的机会较小。

# python - 当我进入 django shell 时，为什么它会“冻结”数据库

> ID：10771430
> 
> 赞同：0
> 
> 时间：2012-05-27T03:22:15.963
> 
> 标签：python, django

当用户通过 django shell 进入时，为什么数据库保持静态`python manage.py runserver`？例如：

```
>>> from userprofile.models import UserProfile
>>> up=UserProfile.objects.get(id=4)
>>> up.get_jobs_applied_for()
[<JobApplication: david - Editor>, <JobApplication: david - Assistant Director>]
# delete entries in the mysql database
>>> up.get_jobs_applied_for()
[<JobApplication: david - Editor>, <JobApplication: david - Assistant Director>]
# but the results do not reflect that 
```

被调用的方法：

```
# in `UserProfile` class
def get_jobs_applied_for(self):
    jobs_applied_for = self.jobapplication_set.order_by('-timestamp')
    return jobs_applied_for 
```

为什么它不实时查询数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T06:02:23.623

正如 Matthew Schinckel 所问，删除发生在何时何地？如果它发生在第二个之前的另一个进程中`>>> up.get_jobs_applied_for()`，并且您正在使用隔离级别设置为[`REPEATABLE READ`](http://dev.mysql.com/doc/refman/5.0/en/set-transaction.html)的 MySQL，则 MySQL DB 会在删除之前为您提供较早的快照。（假设您问题中的代码在整个事务中运行，例如在托管事务中或在某些 MySQL 连接池中）

此外，您可以在行`django.db.connection.queries`间使用来确认 Django 是否实际上尝试从 DB 查询。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-27T04:02:46.457

Django 仅在您第一次执行需要执行查询的操作时填充 QuerySet；之后，它将相同的结果集保存在内存中。order_by() 不会强制对数据库执行另一个查询。

# ios - 创建数据表

> ID：10771432
> 
> 赞同：0
> 
> 时间：2012-05-27T03:22:50.033
> 
> 标签：ios, objective-c, xcode

首先，我有一个应用程序，可以根据用户的输入向用户提供有关他们飞行里程数的信息。此信息在 上以许多不同的转换形式显示`UITableView`，例如，它显示您已行驶的厘米数和已行驶的公里数。所有的值都是`double`，现在我想用这些数据做的是分享它。我决定选择 Facebook、应用内电子邮件、SMS 和 Twitter。我**可以**像这样显示/共享数据：

```
Kilometres      2000.28

Miles          1400.33

Centimetres     20000000.238 

Yards            100039.02 
```

（值是组成的）

但这不切实际，而且非常丑陋，尤其是对于 Twitter。所以我有一个想法，将其显示为数据表模板，如下所示。（当然除了文本！）我怎么能这样做？我会显示它并将其附加为图像还是文本？是否有任何 API 可以做到这一点？

视觉表现：

![数据表](../Images/a882c2d5bc13036f104748bedbb71879.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T03:42:40.940

我将使用您想要的布局动态创建一个 UIView 并通过`UIGraphicsGetImageFromCurrentImageContext()`下面的示例类方法将其转换为图像。生成 UIImage 后发布到 Facebook..

```
+ (UIImage *) imageWithView:(UIView *)view {
UIGraphicsBeginImageContextWithOptions(view.bounds.size, view.opaque, 0.0);
[view.layer renderInContext:UIGraphicsGetCurrentContext()];

UIImage * img = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext();

return img;
} 
```

# java - 在 Google+ 的 Android 应用程序中复制 Slinging 效果

> ID：10771436
> 
> 赞同：1
> 
> 时间：2012-05-27T03:23:50.200
> 
> 标签：java, android, android-viewpager, viewpagerindicator

我正在开发一个简单的应用程序，但我有点太空迷。我注意到 Google+ 在他们的移动方法中使用了一种非常有趣的方法来做到这一点。我只是很好奇人们将如何实施这样的事情。

免责声明：我通常是一名 C++ 程序员，但我正在尝试为 Android 开发 Java。欢迎任何和各种帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T03:27:32.873

我相信您所指的“吊索效应”是由[`ViewPager`](http://developer.android.com/reference/android/support/v4/view/ViewPager.html). 这是一个有用的[教程](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizontal-view-paging/)，可以帮助您入门。

要实现您`ViewPager`的标题，您需要使用第三方库，因为默认情况下 Android 不实现此功能。我会推荐使用 Jake Wharton 的[`ViewPagerIndicator`](http://viewpagerindicator.com/)图书馆。它易于使用且维护良好。

# bison - 如何解决减少减少冲突：

> ID：10771437
> 
> 赞同：3
> 
> 时间：2012-05-27T03:23:57.580
> 
> 标签：bison, yacc, lalr, lr

以下（简化的）Bison 语法会产生减少减少冲突：

```
expr
    :    '(' expr ')'
    |    ID
    |    fn
    ;

arg_list
    :    ID
    |    arg_list ID
    ;

fn
    :    '(' ')' fnbody
    |    '(' arg_list ')' fnbody
    ;

fnbody
    :    '{' '}'
    ; 
```

我看到了这个问题——只有一个前瞻标记，无法判断`(an_id`是 an`'(' expr ')'`还是 a `fn`。但是我该如何解决呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T06:23:44.170

好吧，最简单的答案是在解析器中使用更多的前瞻——要么使用[btyacc](http://www.siber.com/btyacc/)之类的东西，要么使用 bison 的`%glr-parser`选项。

第二个选择是在词法分析器中添加前瞻——在这种情况下，在返回一个`')'`标记之前，查看下一个标记是否是 a`'{'`并返回一个特殊标记，告诉你这是一个 arg_list 你即将结束而不是 a括号表达式，或者只是将两者作为单个标记返回并根据需要修改您的语法。

第三个选择是考虑语法。这并不总是那么容易，并且可能会破坏语法的大小。基本思想是识别冲突的规则并将它们组合成一个可以被解析器识别的规则，并推迟选择最终构造是什么，直到你看够了。

对于此示例，您为冲突案例添加新规则：

```
expr_or_fnhead:  '(' ID ')'  ; 
```

这可能是一个表达式或 a 的开头`fn`，然后修改其他规则以使用它。`fn`规则变为：

```
fn :  '(' ')' fnbody               /* 0 arg function */
   |  expr_or_fnhead fnbody        /* 1 arg function */
   |  '(' ID arg_list ')' fnbody   /* 2+ arg function */
   ; 
```

`expr`规则更复杂：

```
expr       : ID
           | non_ID_expr
           ;
non_ID_expr: '(' non_ID_expr ')'
           | expr_or_fnhead
           | fn
           ; 
```

# java - 如何从数据库服务器插入带有时间戳的 MongoDB 文档

> ID：10771439
> 
> 赞同：8
> 
> 时间：2012-05-27T03:24:28.427
> 
> 标签：java, mongodb

在 Oracle 中，我可以简单地这样做：

```
INSERT INTO myTable VALUES ('someValue',SYSTIMESTAMP); 
```

这将在 myTable 中插入两个值，其中之一是基于数据库服务器时间的时间戳。

对于 MongoDB（通过 Java 驱动程序），我试过这个：

```
myDoc.put("value","someValue");
myDoc.put("timestamp", new Date());
myCollection.insert(myDoc); 
```

但这会根据客户端机器的时间而不是数据库服务器的时间创建时间戳。

有没有办法让 MongoDB 根据数据库服务器时间将时间戳应用于文档？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-02-18T11:06:56.290

游戏有点晚了 - 但最近发布的 mongodb 有 $currentDate。

请参阅[http://docs.mongodb.org/manual/reference/operator/update/currentDate/](http://docs.mongodb.org/manual/reference/operator/update/currentDate/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-14T18:00:11.883

看起来您可以让服务器在插入时生成时间戳`db.test.insertOne( { ts: new Timestamp() } );`。[https://docs.mongodb.com/manual/reference/bson-types/#timestamps](https://docs.mongodb.com/manual/reference/bson-types/#timestamps)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-27T06:12:11.640

为 MongoDB使用[Morphia](http://code.google.com/p/morphia/) ORM 工具

对于您的问题，希望生命周期方法对您[有所](http://code.google.com/p/morphia/wiki/LifecycleMethods)帮助。

我通过使用**@Prepersist**方法得到了结果

# c# - Java 相当于 C# system.beep？

> ID：10771441
> 
> 赞同：32
> 
> 时间：2012-05-27T03:24:53.653
> 
> 标签：c#, java, audio, frequency, beep

我正在做一个Java程序，我确实需要能够以一定的频率和持续时间播放声音，类似于c#方法System.Beep，我知道如何在C#中使用它，但我找不到一种在 Java 中执行此操作的方法。有没有等效的方法或其他方法来做到这一点？

```
using System;

class Program
{
    static void Main()
    {
    // The official music of Dot Net Perls.
    for (int i = 37; i <= 32767; i += 200)
    {
        Console.Beep(i, 100);
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-05-27T03:29:13.903

你可以使用这个：

```
java.awt.Toolkit.getDefaultToolkit().beep(); 
```

**编辑**

如果您尝试播放任何持续时间和不同声音的东西，您应该真正查看 Java MIDI 库。默认哔声将无法满足您的需求，因为您无法更改哔声的长度。

[http://www.oracle.com/technetwork/java/index-139508.html](http://www.oracle.com/technetwork/java/index-139508.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-19T23:15:47.250

只需打印它：

```
System.out.println("\007") 
```

适用于 Windows 和 MacOS。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-17T23:01:15.870

我已经组合了一个对我有用的功能。它使用了一堆来自`javax.sound.sampled`. 我已将其设置为使用我的系统自动提供新剪辑的音频格式`AudioSystem.getClip()`。可能有各种各样的方法可以使它更健壮和更高效。

```
/**
 * Beeps.  Currently half-assumes that the format the system expects is
 * "PCM_SIGNED unknown sample rate, 16 bit, stereo, 4 bytes/frame, big-endian"
 * I don't know what to do about the sample rate.  Using 11025, since that
 * seems to be right, by testing against A440\.  I also can't figure out why
 * I had to *4 the duration.  Also, there's up to about a 100 ms delay before
 * the sound starts playing.
 * @param freq
 * @param millis 
 */
public static void beep(double freq, final double millis) {
    try {
        final Clip clip = AudioSystem.getClip();
        AudioFormat af = clip.getFormat();

        if (af.getSampleSizeInBits() != 16) {
            System.err.println("Weird sample size.  Dunno what to do with it.");
            return;
        }

        //System.out.println("format " + af);

        int bytesPerFrame = af.getFrameSize();
        double fps = 11025;
        int frames = (int)(fps * (millis / 1000));
        frames *= 4; // No idea why it wasn't lasting as long as it should.

        byte[] data = new byte[frames * bytesPerFrame];

        double freqFactor = (Math.PI / 2) * freq / fps;
        double ampFactor = (1 << af.getSampleSizeInBits()) - 1;

        for (int frame = 0; frame < frames; frame++) {
            short sample = (short)(0.5 * ampFactor * Math.sin(frame * freqFactor));
            data[(frame * bytesPerFrame) + 0] = (byte)((sample >> (1 * 8)) & 0xFF);
            data[(frame * bytesPerFrame) + 1] = (byte)((sample >> (0 * 8)) & 0xFF);
            data[(frame * bytesPerFrame) + 2] = (byte)((sample >> (1 * 8)) & 0xFF);
            data[(frame * bytesPerFrame) + 3] = (byte)((sample >> (0 * 8)) & 0xFF);
        }
        clip.open(af, data, 0, data.length);

        // This is so Clip releases its data line when done.  Otherwise at 32 clips it breaks.
        clip.addLineListener(new LineListener() {                
            @Override
            public void update(LineEvent event) {
                if (event.getType() == Type.START) {
                    Timer t = new Timer((int)millis + 1, new ActionListener() {
                        @Override
                        public void actionPerformed(ActionEvent e) {
                            clip.close();
                        }
                    });
                    t.setRepeats(false);
                    t.start();
                }
            }
        });
        clip.start();
    } catch (LineUnavailableException ex) {
        System.err.println(ex);
    }
} 
```

编辑：显然有人改进了我的代码。我还没有尝试过，但试一试： [https ://gist.github.com/jbzdak/61398b8ad795d22724dd](https://gist.github.com/jbzdak/61398b8ad795d22724dd)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-27T03:36:52.507

我认为在便携式² Java中没有办法用“哔”声播放曲调^(1 。)你需要使用我认为的 API……除非你能找到一个可以为你简化事情的第三方库。^(`javax.sound.*`)

如果你想走这条路，那么[这个页面](http://onjava.com/onjava/excerpt/jenut3_ch17/index1.html)可能会给你一些想法。

* * *

^(1 - 除非您的用户都是音盲。当然，你可以做一些事情，比如在摩尔斯电码中发出哔哔声……但这不是一首曲子。)

^(2 - 显然，您可以对 Windows 蜂鸣功能进行本机调用。但这不是便携式的。)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-02-15T09:16:55.910

另一个依赖于 Windows 的解决方案是使用 JNA 并直接调用 Windows [Beep 函数](https://msdn.microsoft.com/en-us/library/windows/desktop/ms679277(v=vs.85).aspx)，在 kernel32 中可用。不幸的是，JNA 中的 Kernel32 在 4.2.1 中没有提供此方法，但您可以轻松扩展它。

```
public interface Kernel32 extends com.sun.jna.platform.win32.Kernel32 {

        /**
         * Generates simple tones on the speaker. The function is synchronous; 
         * it performs an alertable wait and does not return control to its caller until the sound finishes.
         * 
         * @param dwFreq : The frequency of the sound, in hertz. This parameter must be in the range 37 through 32,767 (0x25 through 0x7FFF).
         * @param dwDuration : The duration of the sound, in milliseconds.
         */
        public abstract void Beep(int dwFreq, int dwDuration);
} 
```

要使用它：

```
static public void main(String... args) throws Exception {
    Kernel32 kernel32 = (Kernel32) Native.loadLibrary("kernel32", Kernel32.class);
    kernel32.Beep(800, 3000);
} 
```

如果使用 maven，则必须添加以下依赖项：

```
<dependency>
    <groupId>net.java.dev.jna</groupId>
    <artifactId>jna</artifactId>
    <version>4.2.1</version>
</dependency>
<dependency>
    <groupId>net.java.dev.jna</groupId>
    <artifactId>jna-platform</artifactId>
    <version>4.2.1</version>
</dependency> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-27T03:31:20.483

您可以在[此处](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Toolkit.html#beep%28)获取 Toolkit 类的引用，其中`beep()`定义了方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-24T07:53:48.453

[改为使用](https://stackoverflow.com/a/3780445/453673) `Applet`。您必须将哔声音频文件作为`wav`文件提供，但它可以工作。我在 Ubuntu 上试过这个：

```
package javaapplication2;

import java.applet.Applet;
import java.applet.AudioClip;
import java.io.File;
import java.net.MalformedURLException;
import java.net.URL;

public class JavaApplication2 {

    public static void main(String[] args) throws MalformedURLException {
        File file = new File("/path/to/your/sounds/beep3.wav");
        URL url = null;
        if (file.canRead()) {url = file.toURI().toURL();}
        System.out.println(url);
        AudioClip clip = Applet.newAudioClip(url);
        clip.play();
        System.out.println("should've played by now");
    }
}
//beep3.wav was available from: http://www.pacdv.com/sounds/interface_sound_effects/beep-3.wav 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-11-15T03:57:20.110

如果您正在使用 SWT 小部件，您可以这样做（系统声音！）

```
org.eclipse.swt.widgets.Display.getCurrent().beep(); 
```

如果你想要 NATIVE JAVA，这里有一个类：[https ://github.com/marcolopes/dma/blob/master/org.dma.java/src/org/dma/java/util/SoundUtils.java](https://github.com/marcolopes/dma/blob/master/org.dma.java/src/org/dma/java/util/SoundUtils.java)

# vb.net - 从动态目录 VB.Net 打开 Word 文档

> ID：10771442
> 
> 赞同：0
> 
> 时间：2012-05-27T03:25:23.263
> 
> 标签：vb.net, ms-word

我有一个程序，我为此开发了用户指南。我已将此用户指南放在项目目录中。我创建了一个 MenuStrip 项，通过它可以在用户机器上的 Word 中打开用户指南。我成功地使用以下代码做到了这一点：

```
Try
        userGuide = MSWord.Documents.Open("C:Users\administrator\Documents\VisualStudio2010\Project3\UserGuide.doc")

        MSWord.WindowState = Word.WdWindowState.wdWindowStateNormal
        MSWord.Visible = True
    Catch ex As Exception
        MsgBox("An error has prevented the document from opening. The document may not be available." & vbCrLf & vbCrLf & _
               "Please try one of the following options:" & vbCrLf & _
               "- Check to see if the document is already open" & vbCrLf & _
               "- Restart the program")
    End Try 
```

问题是，用于打开文件的路径在用户机器上不存在。这是一个独立的系统，因此无法创建用于放置文档的文件共享，因此无法编码公共路径。

有没有办法编写动态路径？也许是这样的：

```
userGuide = MSWord.Documents.Open("%windir%\UserGuide.doc") 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T04:05:23.667

如果文档将相对于应用程序可执行文件的安装路径存储，则从[exe 的路径](http://msdn.microsoft.com/en-us/library/aa457089.aspx)开始：

```
Dim path As String
path = System.IO.Path.GetDirectoryName( _
      System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase)

Dim docPath as String;

docPath = Path.Combine(path,"UserGuide.doc"); 
```

# c - 通过签名搜索函数时如何知道地址范围？

> ID：10771444
> 
> 赞同：-1
> 
> 时间：2012-05-27T03:26:36.707
> 
> 标签：c, assembly, reverse-engineering

我正在尝试通过其“签名”来搜索功能。

但是我不知道我应该搜索什么地址范围？

我看过 VirtualQuery() 和 GetNativeSystemInfo() 但我不是在正确的道路上。

编辑：问题重新尝试。

使用 Win32 API，我试图找出如何获取我的代码正在执行的进程的可执行页面的开始和结束地址。

这是我尝试过的：

```
 SYSTEM_INFO info;
    ZeroMemory( &info, sizeof( SYSTEM_INFO ) );
    GetNativeSystemInfo( &info ); // GetSystemInfo() might be wrong on WOW64.

    info.lpMinimumApplicationAddress;
    info.lpMaximumApplicationAddress;

    HANDLE thisProcess = GetCurrentProcess();

    MEMORY_BASIC_INFORMATION memInfo;
    ZeroMemory( &memInfo, sizeof( memInfo )  );
    DWORD addr = (DWORD)info.lpMinimumApplicationAddress;
    do
    {
        if ( VirtualQueryEx( thisProcess, (LPVOID)addr, &memInfo, sizeof( memInfo ) ) == 0 )
        {
            DWORD gle = GetLastError();
            if ( gle != ERROR_INVALID_PARAMETER )
            {
                std::stringstream str;
                str << "VirtualQueryEx failed with: " << gle;
                MessageBoxA( NULL, str.str().c_str(), "Error", MB_OK );
            }
            break;
        }

        if ( memInfo.Type == MEM_IMAGE  )
        {
            // TODO: Scan this memory block for the the sigature
        }

        addr += info.dwPageSize;
    }
    while ( addr < (DWORD)info.lpMaximumApplicationAddress ); 
```

这样做的原因是我正在寻找一个未导出的函数，如下所示：

[在 Windows DLL 中通过它的签名查找函数](https://stackoverflow.com/questions/9644717/find-a-function-by-it-signature-in-windows-dll)

请参阅有关“代码签名扫描”的答案。

While this is enumerating an address range I don't know if this is correct or not since I don't know what the expected range should be. Its just the best I could come up with from looking around MSDN.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T08:37:43.827

the address range when signature scanning a module is from the start of the code section to the start + the section size. the start of the code section and its size are in the PE. most tools take the lazy route and scan the entire module (again using the PE to get the size, but with the module handle as the start address).

# jquery - .slideToggle() 后输入丢失占位符和一些样式

> ID：10771453
> 
> 赞同：2
> 
> 时间：2012-05-27T03:30:22.450
> 
> 标签：jquery, html

当我调用`.slideToggle()`jQuery 1.7.2 的方法时，输入元素丢失了它的占位符并且它的位置被破坏了。它已经到了屏幕的顶部。

CSS：

```
$("#go").click(function(){
    $("#second").slideToggle("slow");
}); 
```

的HTML：

```
<input type="text" id="first" placeholder="first" />
<input type="text" id="second" placeholder="second" style="display: none;" />
<button id="go">Go</button> 
```

当我尝试在谷歌浏览器中检查这个元素时，占位符会返回并且样式被规范化。

为什么会这样？

# jquery - 代码中的CSS修改

> ID：10771460
> 
> 赞同：0
> 
> 时间：2012-05-27T03:32:11.967
> 
> 标签：jquery, html, css

很抱歉，这听起来有点愚蠢，但是没有其他人可以解决我的问题，这就是我在这里问的原因。

我编写了以下代码，当我将鼠标悬停在移动文本框上时，它会显示工具提示。但目前的问题是工具提示出现在左侧，相对低于位置。但是我希望它有所不同，工具提示应该出现在我悬停文本的正上方。有人可以修改我的 CSS 吗？

```
<!-- CSS Part Start -->
<style type="text/css">
#NT_copy {
background-color: #333333;
color: #FFFFFF;
font-weight: bold;
font-size: 13px;
font-family: "Trebuchet MS";
width: 300px;
left: 10px;
top: 20px;
padding: 4px;
position: relative;
text-align: left;
z-index: 20;
-moz-border-radius: 0 10px 10px 10px;
filter: progid:DXImageTransform.Microsoft.Alpha(opacity=87);
-moz-opacity: .87;
-khtml-opacity: .87;
opacity: .87;
}
</style>
<!-- CSS Part End -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
jQuery.fn.tooltip= function(options) {
  this.each(function(){
    var settings = {
      tooltipcontentclass:"searchTipcontent",
      width:200,
      position:"absolute",
      zindex:100 
    };
    if(options) {
      jQuery.extend(settings, options);
    }
    jQuery(this).children("."+settings.tooltipcontentclass).hide();
    jQuery(this).hover(function() {
      var de = document.documentElement;
      var w = self.innerWidth || (de&&de.clientWidth) || document.body.clientWidth;
      var hasArea = w - jQuery.fn.getAbsoluteLeftObject(this);
      var clickElementy = jQuery.fn.getAbsoluteTopObject(this) - 3; //set y position
      var title="&nbsp;";
      jQuery("body").append("<div id='NT'><div id='NT_copy'><div >"+jQuery(this).children("."+settings.tooltipcontentclass).html()+"</div></div></div>");//right side
      var arrowOffset =  this.offsetWidth + 11;
      var clickElementx = jQuery.fn.getAbsoluteLeftObject(this) + arrowOffset;
      jQuery('#NT').css({left: clickElementx+"px", top: clickElementy+"px"});
      jQuery('#NT').css({width: settings.width+"px"});
      jQuery('#NT').css({position: settings.postion});
      jQuery('#NT').css("z-index",settings.zindex);
      jQuery('#NT').show();
    } ,
    function() {
      jQuery("#NT").remove();
  })

  });
}
jQuery.fn.getAbsoluteLeftObject=function(o) {
  // Get an object left position from the upper left viewport corner
  oLeft = o.offsetLeft            // Get left position from the parent object
  while(o.offsetParent!=null) {   // Parse the parent hierarchy up to the document element
    oParent = o.offsetParent    // Get parent object reference
    oLeft += oParent.offsetLeft // Add parent left position
    o = oParent
  }
  return oLeft
}

jQuery.fn.getAbsoluteTopObject=function (o) {
  // Get an object top position from the upper left viewport corner
  oTop = o.offsetTop            // Get top position from the parent object
  while(o.offsetParent!=null) { // Parse the parent hierarchy up to the document element
    oParent = o.offsetParent  // Get parent object reference
    oTop += oParent.offsetTop // Add parent top position
    o = oParent
  }
  return oTop
}
</script>

<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />

<div id="fixedfooter">
<marquee class="smooth_m" behavior="scroll" direction="left" onmouseout="this.start()" onmouseover="this.stop()" scrollamount="3">
<div id="demo">
    <span style="color: #ff0000;" class="formInfo">
    <div class="mycontent" style="color: #000000;display:none;">
        test Successful for HTML Tooltip on marquee
    </div>
    <a href="#"></a>Testing HTML Tooltip on marquee using jQuery and css</span>
</div>
</marquee>
</div>

<script type="text/javascript">
$(document).ready(function() {
    $(".formInfo").tooltip({
        tooltipcontentclass: "mycontent"
    })
});;
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T15:55:33.167

通常，当您遇到困难时，将事情搁置一旁并重新开始，即使这只是一种练习。你必须理清思路，最好从简单的开始。

我创建了一个非常简单的工具提示功能，它可以按照我相信您想要的方式工作。请注意，我只包含了演示所需的内容，因此请注意，除了 中的红色文本之外`marquee`，它完全没有样式。另请注意，该`position`函数需要考虑页面宽度和工具提示的宽度，因此它不会“滚动到屏幕外”。不过，我会让你把它当作练习来解决。

**HTML**

我已经将`this.start()`and移到了`this.stop()`处理程序中。此外，我将元素放在 中，因为它需要位于元素的上下文中，而不是嵌套在更下方的另一个元素中。`marquee``mousemove``#tooltip``body``position: absolute``body`

```
<div id="fixedfooter">
    <marquee behavior="scroll" direction="left" scrollamount="3">
        <span id="marquee-text">
            Testing HTML Tooltip on marquee using jQuery and css
        </span>
    </marquee>
</div>
<div id="tooltip">
    Successful for HTML Tooltip on marquee
</div> 
```

**CSS**

```
#fixedfooter {
    position: absolute;
    top: 50%;
    width: 100%;
    color: #ff0000;
}
#marquee-text {
    cursor: pointer;
}
#tooltip {
    display: none;
    position: absolute;
    top: 0;
    left: 0;
} 
```

**Javascript**

和它下面`var $tooltip = $('#tooltip')`的行是 jQuery*缓存*。如果您重复访问一个元素，请始终尝试缓存它的引用，而不是一遍又一遍地从 jQuery 选择器中调用它；这是一个很大的性能问题。

```
jQuery(document).ready(function($){
    var $tooltip = $('#tooltip'),
        $marquee = $('#marquee-text');

    var show = function(e){
        $marquee.parent('marquee')[0].stop();
        position.call(this, e);
        $tooltip.show();
    };

    var hide = function(e){
        $marquee.parent('marquee')[0].start();
        $tooltip.hide();
    };

    var position = function(e){
        $tooltip.css({top: e.pageY + 20, left: e.pageX + 20});
    };

    $marquee
        .hover(show, hide)
        .mousemove(position);
}); 
```

[http://jsfiddle.net/6jTd6/](http://jsfiddle.net/6jTd6/)

# ruby - Ruby：覆盖别名

> ID：10771461
> 
> 赞同：0
> 
> 时间：2012-05-27T03:32:37.287
> 
> 标签：ruby

```
def a_method
  p“遇险”
结尾

别名：英雄：a_method
def a_method
  英雄
  p“被英雄拯救”
结尾

```

这是一种陷入困境的方法，它已被英雄拯救。但是其他人不喜欢故事的结局，并决定覆盖英雄所做的事情。

```
别名：克星？
定义？
   #调用哪个方法？
   p《被克星俘虏》
结尾

```

克星是否有可能覆盖英雄所做的事情并得到最终结果

```
“遇险”
“被克星俘虏”

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T03:49:14.607

看起来这将在没有任何别名的情况下工作：

```
def a_method
  hero
  p "Captured by the nemesis"
end 
```

然而，在英雄出现之前，克星无法“取消别名”并确定 :a_method 的旧值。事实上，Ruby 不会像那样保留历史记录，这就是在这种覆盖情况下首先需要别名的原因。

# javascript - 什么是节点中的输出缓冲？

> ID：10771462
> 
> 赞同：2
> 
> 时间：2012-05-27T03:32:50.870
> 
> 标签：javascript, node.js, express, template-engine, pug

我正在使用 express 框架在 node.js 中编程。express 中默认的模板引擎是 Jade。在 Jade 规范中提到了一个称为[输出缓冲](https://github.com/visionmedia/jade/blob/master/jade.md#code)的概念。当我使用它时到底发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T04:12:52.757

这是指`=`在 Jade 中执行 JavaScript 代码时会将该 JavaScript 的结果添加到缓冲区中，即解析 Jade 模板后返回的文本。`-`也执行 JavaScript 代码，但不将其输出添加到缓冲区。

# visual-studio-2010 - 如何在 VS2010 Watch 窗口中重新排列（或排序）变量？

> ID：10771463
> 
> 赞同：13
> 
> 时间：2012-05-27T03:33:25.550
> 
> 标签：visual-studio-2010, debugging, visual-studio-debugging

我想重新排列我在 Watch 窗口中输入的变量，但拖放不起作用，我找不到名称列上的排序。除了删除和重新输入之外，有没有办法重新排列您正在观看的变量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T07:19:44.350

拖放确实有效，但它的作用是在列表末尾创建变量的副本。因此，排列监视变量的最佳方法是按照需要的顺序一一拖动变量，然后删除重复的变量。

# javascript - 使用 javascript [NO jQuery] 获取 div

> ID：10771464
> 
> 赞同：1
> 
> 时间：2012-05-27T03:35:44.020
> 
> 标签：javascript, dom

如何使用传统的 javascript 访问 div.id = "columns" 中的 div，请不要使用 jQuery

```
<div id="columns">
   <div>DiV A</div>
   <div>DiV B</div>
   <div>DiV C</div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T03:40:07.000

[Mark Reed 的答案](https://stackoverflow.com/a/10771475/139010)适用于[较新的浏览器](http://caniuse.com/#feat=queryselector)。这几乎适用于任何东西：

```
var divs = document.getElementById('columns').getElementsByTagName('div'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T03:39:12.537

```
var columns = document.querySelectorAll('#columns > div'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T03:44:48.277

如果您正在寻找更多手工解决方案（根传统），您可以试试这个：

```
var col = document.getElementById('columns');
for (var i =0; i < col.childNodes.length; i++) {
    var node = col.childNodes[i];
    if (node.nodeType == 1) {
        // do something with the node here
    }
} 
```

# python - PS3 控制器驱动程序-> uinput-> python？不知何故？

> ID：10771470
> 
> 赞同：6
> 
> 时间：2012-05-27T03:37:04.307
> 
> 标签：python, ps3

我正在尝试从 Ubuntu 上的 Python 中的 PS3 控制器读取数据，但运气不佳。我从 Willow Garage (http://www.ros.org/wiki/ps3joy) 的 ps3joy 驱动程序开始，据说它会将 PS3 控制器的所有重要部分发布到我从未听说过的称为“uinput”的东西上。显然，这是一个允许用户空间驱动程序提供系统事件的 linux 功能。...考虑到它应该是用户空间驱动程序，为什么 WG 驱动程序需要 root 访问权限超出了我的范围，但这不是我的问题。

无论如何，我试图让它工作的当前状态是我已经让驱动程序工作，并且我已经验证它可以响应控制器上的按钮按下，但我不知道如何拉任何一个数据出来，所以我可以使用它。

我的第一个猜测是使用 pygame （希望）从 /dev/uinput 读取（我很确定驱动程序发送数据的位置）：

```
from pygame import joystick
if not joystick.get_init():
  joystick.init()
js = joystick.Joystick(0)  # there is only one joystick... even if the driver isn't running(!)
js.init()
print js.get_numbuttons()  # perhaps coincidentally correctly prints 17 which is the number of buttons on a PS3 controller
for i in range(js.get_numaxes()):
  print js.get_axis(i)   # always prints 0, no matter what I'm doing with the controller 
```

但它没有用。问题中最有说服力的部分是，如果我根本没有运行 WG 驱动程序，它会做同样的事情。

我确信这很容易，我只是没有阅读正确的信息，但是谷歌搜索并没有帮助我找到正确的信息，我感到疲倦和绝望。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T03:43:14.173

你不需要司机。假设控制器将自身暴露为 HID，您可以使用[事件子系统](http://www.linuxjournal.com/article/6429)直接从设备读取控制器事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-26T18:23:50.013

我知道为时已晚，但如果有人需要该代码或正在努力使用它，您可以使用我的。我在 python 中编写了一个脚本，它从 USB 获取 ps3 数据并通过 PC 的蓝牙将其发送到特定的 MAC 地址（您只能将 ps3controller.py 用于数据）。这是为我的四轴飞行器项目制作的。

[https://github.com/urbanzrim/ps3controller](https://github.com/urbanzrim/ps3controller)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T17:37:25.260

我相信您至少需要以下内容：

```
from pygame import joystick, event, display
display.init()
joystick.init()
js=joystick.Joystick(0)
js.init()
...
for foo in bar:
    event.pump()
    ...

if foo:
    event.pump()
    ...

while bar:
    event.pump()
    ... 
```

我相信 display.init() 必须在那里，因为它是事件处理所必需的......

此外，您可以跳过很多内容

```
import pygame
pygame.init()
js=pygame.joystick.Joystick(0)
js.init()
...
for foo in bar:
    pygame.event.pump()
    ...
if foo:
    pygame.event.pump()
    ...

while bar:
    pygame.event.pump()
    .... 
```

我可能是错的，但我认为您的问题是：A）您的 if/while/for 子句中没有 event.pump B）没有 display.init()

资料来源： [http](http://webcache.googleusercontent.com/search?q=cache:I56GyE7I4CkJ:iamtherockstar.com/archive/making-hid-devices-easier-using-pygame-joysticks/+&cd=1&hl=en&ct=clnk&gl=us) ://webcache.googleusercontent.com/search?q=cache:I56GyE7I4CkJ:iamtherockstar.com/archive/making-hid-devices-easier-using-pygame-joysticks/+&cd=1&hl=en&ct=clnk&gl=us 和 [http://www.pygame.org/docs/ref/event.html](http://www.pygame.org/docs/ref/event.html)

“输入队列严重依赖 pygame 显示模块。”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T17:16:40.483

尝试

pygame.event.pump()

在阅读操纵杆之前。我需要它与 360 控制器一起使用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T10:49:47.833

现在解决类似的问题：在 GNU/Linux 中使用 python 从 PS3 蓝牙遥控器通信/接收数据。

我发现有帮助：

1.  调试 PS3 控制器[http://www.pabr.org/sixlinux/sixlinux.en.html](http://www.pabr.org/sixlinux/sixlinux.en.html)
2.  看起来像工作项目，PS3 Remote [http://kitlaan.twinaxis.com/projects/bluez-ps3remote/](http://kitlaan.twinaxis.com/projects/bluez-ps3remote/)（它需要修补 bluez 1st）尚未测试。
3.  pybluez BT 包装[http://code.google.com/p/pybluez/](http://code.google.com/p/pybluez/) （现在检查）

# jquery - jQuery 无法抓取 html contenteditable val

> ID：10771479
> 
> 赞同：6
> 
> 时间：2012-05-27T03:39:32.457
> 
> 标签：jquery, html

我有一个 div 与`contenteditable="true"`我使用代替`textarea`
使用 jQuery，我似乎无法捕捉它的`val()`
[继承人我的小提琴](http://jsfiddle.net/nalagg/jPD7y/2/)
谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-28T05:12:57.840

即使您得到了答案，也有一些一般提示

.val() = 从文本、文本区域、选择、复选框等元素中获取值

.text() =从文本、文本区域、选择、复选框等元素中获取文本值（**不包括 html 标签）**

.html() =从 span、div p table..etc 等元素中获取**html内容。**

例子

```
<input type="text" id="someid" value="1234" />
$('#someid').val(); //1234
<p>bla bla bla<span>hello</span></p>
$('p').text(); //bla bla bla
$('p').html(); //bla bla bla<span>hello</span> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-27T03:42:10.630

有了它`div`，你就会抓住`.text()`.

小提琴：http: [//jsfiddle.net/jPD7y/4/](http://jsfiddle.net/jPD7y/4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T03:42:24.973

这不是`textarea`，但`div`因此不能用`val()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-08T06:00:18.517

换行从....

```
var mypost = $('#myTextArea').val(); 
```

到

```
var mypost = $('#myTextArea').text(); 
```

# css - CSS背景图像适合div

> ID：10771481
> 
> 赞同：7
> 
> 时间：2012-05-27T03:39:54.093
> 
> 标签：css, image, html, background

> **可能重复：**
> [拉伸和缩放 CSS 图像背景 - 仅使用 CSS](https://stackoverflow.com/questions/1150163/stretch-and-scale-a-css-image-background-with-css-only)

我想设置 div 背景图像 div(width: 1000, min-height: 710) 并且图像大小为 753 x 308，但我试图设置它图像不适合 div 大小我该怎么办？

```
.Invitation {
    background-color: transparent;
    background-image: url('../images/form.png');
    background-repeat: no-repeat;
    background-position: left top;
    background-attachment: scroll;
    background-size: 100%;
    width: 1000px;
    height: 710px;
    margin-left: 43px;
} 
```

div类是

```
.content {  
   clear:both;  
   width:1000px;    
   background:#e7e8e9;
   background-image:url('../images/content.jpg');
   background-repeat:no-repeat;
   background-position:left top;
   min-height:710px;
} 
```

代码是

```
<div class="content"><div class="Invitation">form goes here....</div></div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T04:02:08.910

尝试这样的事情：

**CSS**

```
<style type="text/css">
  img.adjusted {
    position: absolute;
    z-index: -1;
    width: 100%;
    top: 0;
    left: 0;
  }
  .Invitation {
    position: relative;
    width: 1000px;
    height: 710px;
    margin-left: 43px;
  }
</style> 
```

**HTML**

```
<div class="Invitation">
  This is an example
  <img src="http://files.myopera.com/arshamr/albums/612249/Nature%20(3).jpg" alt="" class="adjusted">
</div> 
```

我希望这有帮助！

# java - 尝试从压缩的 xml 转储导入时出现 java.io.IOException

> ID：10771484
> 
> 赞同：0
> 
> 时间：2012-05-27T03:40:44.677
> 
> 标签：java, exception, wiki, mediawiki, wikipedia

我正在尝试将一个 bzipped wiki XML 转储导入我的本地 wiki 数据库。我正在使用一个名为[MWDumper](http://www.mediawiki.org/wiki/Manual%3aMWDumper)的工具来导入庞大的英文维基百科 XML 转储。在我真正尝试导入之前，一切似乎都运行顺利（似乎 MWdumper 已成功构建，等等）。我启动了我的服务器，然后运行了以下命令（这似乎是上面链接中 MWDumper 页面上建议的方法）：

```
java -jar mwdumper-1.16.jar --format=sql:1.5 enwiki-latest-pages-articles.xml.bz2 |
    mysql -u root -p my_wiki 
```

然后我收到以下错误消息：

```
Exception in thread "main" java.io.IOException: Stream is not in the BZip2 format
at org.apache.commons.compress.compressors.bzip2.BZip2CompressorInputStream.init(BZip2CompressorInputStream.java:255)
at org.apache.commons.compress.compressors.bzip2.BZip2CompressorInputStream.<init>(BZip2CompressorInputStream.java:138)
at org.apache.commons.compress.compressors.bzip2.BZip2CompressorInputStream.<init>(BZip2CompressorInputStream.java:111)
at org.mediawiki.dumper.Tools.openBZip2Stream(Tools.java:42)
at org.mediawiki.dumper.Tools.openInputFile(Tools.java:28)
at org.mediawiki.dumper.Dumper.main(Dumper.java:124) 
```

这似乎没有意义，因为我的文件 enwiki-latest-pages-articles.xml.bz2 似乎是正确的 bzip2 格式。（我不确定我的 Apache commons 压缩包是否正确导入，尽管我假设它是正确的，因为我认为否则我不会收到此错误消息。）

**编辑：这个问题已经解决。我在 MWDumper wiki 页面上下载了 MWDumper 的第三方版本。建议：不要尝试从源代码构建 MWDumper——它缺少 2005 年以来大量分散的源文件；只需使用第三方 mwdumper.jar。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-12T07:33:17.093

OP的解决方案：此问题已解决。我在 MWDumper wiki 页面上下载了 MWDumper 的第三方版本。建议：不要尝试从源代码构建 MWDumper——它缺少 2005 年以来大量分散的源文件；只需使用第三方 mwdumper.jar。

# android - 为什么我的 ListView 从 xml 添加所有项目？

> ID：10771488
> 
> 赞同：0
> 
> 时间：2012-05-27T03:41:26.237
> 
> 标签：android, android-listview

我找不到我的问题的答案，我有一个带有一些 TextViews 和 1 个 ListView 的 Main XML，问题是当我的 List 出现在我的 Main xml 上时，它添加了 listview 之外的 Texviews，所以我进入了每个 Item一个 TOTAL textview 和列表进入所有 XML 布局，而不是在底部，所以我不确定做错了什么

thx 提前为您提供帮助

问候

这是我的文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >
<TableLayout
    android:id="@+id/TableLayout01"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:stretchColumns="1" >
    <TableRow>
        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Total Expenses $"
            android:textColor="@android:color/white"
            android:textSize="25sp"
            android:textStyle="bold" />
        <TextView
            android:id="@+id/tvTotalGastos"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="0"
            android:textColor="@android:color/white"
            android:textSize="25sp"
            android:textStyle="bold" />
    </TableRow>
</TableLayout>
<TableLayout
    android:id="@+id/TableLayout02"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/TableLayout01"
    android=""
    android:orientation="horizontal" >
    <TableRow>
        <TextView
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_margin="4dip"
            android:layout_weight="1"
            android:padding="10dip"
            android:text="Date"
            android:textColor="@android:color/white" />
        <TextView
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_margin="4dip"
            android:layout_weight="1"
            android:padding="10dip"
            android:text="Description"
            android:textColor="@android:color/white" />
        <TextView
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_margin="4dip"
            android:layout_weight="1"
            android:padding="10dip"
            android:text="Amount"
            android:textColor="@android:color/white" />
    </TableRow>
</TableLayout>
<ListView
    android:id="@+id/listview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
</ListView> 
```

我的行 xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal"
android:paddingBottom="6dip"
android:paddingTop="4dip" >

  <TextView
        android:id="@+id/tvDate"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_margin="4dip"
        android:layout_weight="1"
        android:padding="10dip"
        android:text="Date" />

    <TextView
        android:id="@+id/tvDescription"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_margin="4dip"
        android:layout_weight="1"
        android:padding="10dip"
        android:text="Description" />

    <TextView
        android:id="@+id/tvAmount"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_margin="4dip"
        android:layout_weight="1"
        android:padding="10dip"
        android:text="Amount" />

</LinearLayout> 
```

和我的 Java 类

```
public class GastosListActivity extends ListActivity {

private DatabaseHandler dbh;
private List<Datos> datos;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.gastoslist);

    //ListView list2= (ListView) findViewById(R.id.listview);

    // new obj databasehandler
    dbh = new DatabaseHandler(this);
    datos = dbh.getAllData();

    ArrayList<Map<String, String>> list = buildData();
    String[] from = { "Date", "Description","Amount" };
    int[] to = { R.id.tvDate, R.id.tvDescription,R.id.tvAmount };

    SimpleAdapter adapter = new SimpleAdapter(this, list,
            R.layout.gastoslist, from, to);
    setListAdapter(adapter);

}
private ArrayList<Map<String, String>> buildData() {

    ArrayList<Map<String, String>> list = new ArrayList<Map<String, String>>();
    for (Datos dn : datos) {            
        list.add(putData(dn.get_fecha(), dn.get_concepto(),     dn.get_cantidad()));

    }
    return list;    

}

private HashMap<String, String> putData(String date, String description, String amount) {
    HashMap<String, String> item = new HashMap<String, String>();
    item.put("Date", date);
    item.put("Description", description);
    item.put("Amount", amount);
    return item;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T15:26:17.790

问题解决，我使用 Cursor 而不是 arraylist 更改代码

```
dbh = new DatabaseHandler(this);

        Cursor cursor = dbh.obtenerDatos();
        String[] from = new String[] { dbh.COLUMN_FECHA,
                dbh.COLUMN_CONCEPTO, dbh.COLUMN_CANTIDAD };
        int[] to = new int[] { R.id.tvDate, R.id.tvDescription,
                R.id.tvAmount };

        cursorAdapter = new SimpleCursorAdapter(this, R.layout.row, cursor,
                from, to);

        listContent.setAdapter(cursorAdapter); 
```

# javascript - 制作一个简单的 XSS 易受攻击站点

> ID：10771489
> 
> 赞同：2
> 
> 时间：2012-05-27T03:41:43.287
> 
> 标签：javascript, html, xss

我整晚都在试图解决这个问题，我到处搜索，但我仍然很困惑。我要做的就是创建一个非常简单的网站，该网站容易受到 XSS 攻击，例如：

```
'<script>alert('xss')</script>'. 
```

谁能给我一个表单的小代码片段以及如何使用它，这样它就容易受到 XSS 的攻击？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T03:44:25.983

Rails casts 最近有一集展示了 XSS 的安全性，你可以试试[http://railscasts.com/episodes/178-seven-security-tips](http://railscasts.com/episodes/178-seven-security-tips)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T05:54:33.773

用什么编程语言？

如果您只需要一个易受攻击的应用程序，那么在 http://www.insecurelabs.org 上有一个故意易受攻击的应用程序，并且您可以在[http://www.insecurelabs.org/task](http://www.insecurelabs.org/task)[找到](http://www.insecurelabs.org)一些基于上下文的 xss 您可以总是看看 hacmebank 或像 OWASP live CD 或 SamiraiWTF 这样的 live CD 之一。

# c# - 以字符串形式返回部分视图

> ID：10771493
> 
> 赞同：0
> 
> 时间：2012-05-27T03:42:42.080
> 
> 标签：c#, javascript, jquery

我正在尝试减少对服务器发出的获取请求的数量。我想将部分视图`$.get`作为字符串返回给我的方法，这样我就可以一次返回其中的 3 个，而不是有 3 个单独的服务器回调。有没有办法做到这一点。到目前为止我有

到目前为止它只返回 System.Web.Mvc.PartialViewResult

```
function updateChat() {

/** I want to make this work so I only have 1 callback */
$.get("Home/refreshChatParts", {}, function (response) {
    var html = response.split(",");
    $("#chatWindow").replaceWith(html[0]);
    $("#chatHeader").replaceWith(html[1]);
    $("#playerList").replaceWith(html[2]);
});

/**  this stuff works, but is a lot of call backs */
$.get("Home/refreshChatText", {}, function (html) {
    $("#chatWindow").replaceWith(html);
});

$.get("Home/refreshChatHeader", {}, function (html) {
    $("#chatHeader").replaceWith(html);
});

$.get("Home/refreshPlayerList", {}, function (html) {
    $("#playerList").replaceWith(html);
});
*/
$.get("Home/getRequest", {}, function (requestUser) {
    if (requestUser.toString() != "failed") {
        pause = true;
        var join = confirm(requestUser + " would like to play a game with you");
        if (join) {
            startGame(requestUser);
        } else
            pause = false;
        resetRequestUser(requestUser);
    }
});

//$.get("Home/checkForGameStart", {}, function (response) { /*alert(response);*/ });

scrollChatDown();

setTimeout('updateChat()', 20000);
}

 public String refreshChatParts() {

        //refresh chat text
        ViewData["ChatText"] = getFormatedChatText();

        //refresh usercount
        try {
            userCount = getUserCount();
            ViewData["numberOfUsers"] = "There are " + userCount + " players online";
        } catch (Exception e) { ViewData["numberOfUsers"] = e.Message; }

        //refresh player list
        ViewData["listOfPlayers"] = getFormatedPlayerList();

        checkForGameStart();

        return PartialView("ChatText") + "," + PartialView("ChatHeader") + "," + PartialView("playerList");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T04:01:41.127

方法“PartialView”返回类型“System.Web.Mvc.PartialViewResult”，因此当您尝试连接该方法的返回结果时，它将调用对象的 ToString，如果未重写，则仅返回类型名称。

因此，由于这个原因，这种方法将不起作用。您要做的是将您的操作返回类型标记为 PartialViewResult。

然后定义一个局部视图，简单地写出您想要返回的三个局部视图。

如果你像这样定义一个新的部分：

```
@{ Html.RenderPartial("ChatText"); } ,
@{ Html.RenderPartial("ChatHeader"); } ,
@{ Html.RenderPartial("playerList"); } 
```

并返回那个部分，你应该得到你所追求的。

# facebook - 活动提要中的操作格式没有意义

> ID：10771496
> 
> 赞同：1
> 
> 时间：2012-05-27T03:43:36.080
> 
> 标签：facebook, action

我有一个动作表明用户已下订单。类似于`user_name has placed an order on app_name`。这在活动中显示完美，但在最近的活动中显示`user_name placed og:title on app_name`。

我的行动是`Place`，我的对象是`order`。

```
 <meta property="fb:app_id" content="app id" />
  <meta property="og:type" content="joestakeaways:order" />
  <meta property="og:image" content="http://server.com/path/to/icon.jpg" />
  <meta property="og:title" content="Joe takeaway" />
  <meta property="og:url" content="http://server.com" />
  <meta property="og:description" content="For the best fish and chips in town try Joe&#039;s Takeaways!" /> 
```

使最近的活动显示与实际活动相同的任何方式。我可以将其更改为`og:title`，`an order`但在其他提要上看起来有点奇怪。

![正确的](../Images/c1d2e108b5e2773c847d299f5ba8f549.png)

![不正确](../Images/514874b1f41c0247ee85e030fb73ce73.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T05:20:02.580

您并没有真正按照预期使用它。您实际上想要一个地方或任意顺序。但是 Open Graph 是为您的对象的特定实例而设计的。

您的操作是订购（下订单）。
您的对象*类型*是订单。
一个特定的订单实例是“一份鱼薯条”

IE`<meta property="og:title" content="Joe takeaway" />`

因此，如果您想保持对象任意，您应该更改标题以反映类型顺序的实际对象。

```
<meta property="og:title" content="An order on Joe takeaway" /> 
```

这将导致

> 用户于16 分钟前在 Joe's Takeaways 上下
> 单

而对于活动

> 用户在 Joe's Takeaways 上下了 Joe's Takeaways 的订单。

它仍然是重复的，显示大写 A（因为它应该是一个对象的实际名称）但它是一个更好的匹配（在我看来）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T21:44:48.033

此操作的执行未按预期方式执行。虽然我想出了更好的方法，但我已将其更改`title`为在线订单并添加了

```
 <meta property="og:determiner" content="an" /> 
```

不是很好但更好

# php - PHP - 定义对象的静态数组

> ID：10771502
> 
> 赞同：28
> 
> 时间：2012-05-27T03:45:00.677
> 
> 标签：php, arrays, object

你能在 PHP 的一个类中初始化一个静态对象数组吗？就像你可以做的那样

```
class myclass {
    public static $blah = array("test1", "test2", "test3");
} 
```

但是当我这样做时

```
class myclass {
    public static $blah2 = array(
        &new myotherclass(),
        &new myotherclass(),
        &new myotherclass()
    );
} 
```

其中 myotherclass 定义在 myclass 的正上方。然而，这会引发错误；有没有办法实现它？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-27T04:01:52.667

没有。来自[http://php.net/manual/en/language.oop5.static.php](http://php.net/manual/en/language.oop5.static.php)：

> 与任何其他 PHP 静态变量一样，静态属性只能使用文字或常量进行初始化；不允许表达。因此，虽然您可以将静态属性初始化为整数或数组（例如），但您不能将其初始化为另一个变量、函数返回值或对象。

我会将属性初始化为`null`，使用访问器方法将其设为私有，并让访问器在第一次调用它时进行“真正的”初始化。这是一个例子：

```
 class myclass {

        private static $blah2 = null;

        public static function blah2() {
            if (self::$blah2 == null) {
               self::$blah2 = array( new myotherclass(),
                 new myotherclass(),
                 new myotherclass());
            }
            return self::$blah2;
        }
    }

    print_r(myclass::blah2()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T04:09:48.543

虽然您无法将其初始化为具有这些值，但您可以调用静态方法将它们推送到其自己的内部集合中，如下所示。这可能与您将得到的一样接近。

```
class foo {
  public $bar = "fizzbuzz";
}

class myClass {
  static public $array = array();
  static public function init() {
    while ( count( self::$array ) < 3 )
      array_push( self::$array, new foo() );
  }
}

myClass::init();
print_r( myClass::$array ); 
```

演示：[http ://codepad.org/InTPdUCT](http://codepad.org/InTPdUCT)

这导致以下输出：

```
大批
(
  [0] => foo 对象
    (
      [酒吧] => 嘶嘶声
    )
  [1] => foo 对象
    (
      [酒吧] => 嘶嘶声
    )
  [2] => foo 对象
    (
      [酒吧] => 嘶嘶声
    )
)
```

# c# - 在当前关注的任何元素周围放置一个明亮的红色框的可重复使用方法？

> ID：10771504
> 
> 赞同：1
> 
> 时间：2012-05-27T03:45:40.383
> 
> 标签：c#, wpf

我有一些主要包含组合框、文本框和复选框的窗口。当您单击一个以获得焦点时，我需要一种方法让它们用彩色框（老板的命令）进行概述。有没有比覆盖所有这些控件的默认样式更容易做到这一点的方法？我以前从来没有这样做过，所以我需要花很多时间才能弄清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T04:08:42.450

您可以尝试将[FocusVisualStyle](http://msdn.microsoft.com/en-us/library/bb613567.aspx)添加到需要不同焦点矩形样式的控件中。

从上面的链接

> 第二种机制是提供一个单独的样式作为[FocusVisualStyle](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.focusvisualstyle.aspx)属性的值；“焦点视觉样式”为在控件顶部绘制的装饰器创建单独的视觉树，而不是通过替换来更改控件或其他 UI 元素的视觉树。

Window 的 Xaml 中的类似内容

```
<Window.Resources>
    <Style x:Key="NewFocusVisual">
        <Setter Property="Control.Template">
            <Setter.Value>
                <ControlTemplate>
                    <Border>
                        <Rectangle Stroke="Red"  Margin="2" StrokeThickness="1"  StrokeDashArray="1 2" />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources> 
```

或您的 Application.Xaml 文件。

```
<Application.Resources>
    <Style x:Key="NewFocusVisual">
        <Setter Property="Control.Template">
            <Setter.Value>
                <ControlTemplate>
                    <Border>
                        <Rectangle Stroke="Red"  Margin="2" StrokeThickness="1"  StrokeDashArray="1 2" />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Application.Resources> 
```

**用法：**

```
<ComboBox FocusVisualStyle="{StaticResource NewFocusVisual}"  Height="23" HorizontalAlignment="Left" Margin="238,102,0,0" Name="ComboBox1" VerticalAlignment="Top" Width="120" />
<CheckBox FocusVisualStyle="{StaticResource NewFocusVisual}" Content="CheckBox" Height="16" HorizontalAlignment="Left" Margin="238,71,0,0" Name="CheckBox2" VerticalAlignment="Top" />
<TextBox FocusVisualStyle="{StaticResource NewFocusVisual}" Height="23" HorizontalAlignment="Left" Margin="238,144,0,0" Name="TextBox1" VerticalAlignment="Top" Width="120" /> 
```

* * *

如果您希望针对每种类型的焦点事件更改焦点矩形，Microsoft 声明：

> 来自 Microsoft：焦点视觉样式专门用于键盘焦点。因此，焦点视觉样式是一种可访问性功能。如果您希望通过鼠标、键盘或以编程方式对任何类型的焦点进行 UI 更改，则不应使用焦点视觉样式，而应在样式或模板中使用设置器和触发器，这些样式或模板根据一般焦点属性的值工作例如 IsFocused 或 IsFocusWithin。

* * *

试一试，它适用于 TextBox 尚未检查您的其他控件

```
<Application.Resources>
    <Style TargetType="TextBox" >
        <Style.Triggers>
            <Trigger Property="IsFocused" Value="True">
                <Setter Property="Control.BorderBrush" Value="Red"  />
                <Setter Property="Control.BorderThickness" Value="3" />
            </Trigger>
        </Style.Triggers>
    </Style>

</Application.Resources> 
```

# dynamic - 在 D3 中添加多个元素

> ID：10771505
> 
> 赞同：3
> 
> 时间：2012-05-27T03:45:59.227
> 
> 标签：dynamic, append, d3.js

谁能解释为什么 selectAll + data + enter + append 最初可以正常工作，但是当我再次调用它时它只附加一个元素？

[http://jsfiddle.net/scottieb/wQJen/](http://jsfiddle.net/scottieb/wQJen/)

当我跑

```
vis.selectAll("circle")
   .data(datafiltered).enter().append("svg:circle")
   .attr("cx", function(d) { return x(d.x)})
   .attr("cy", function(d) { return y(d.y)})
   .attr("fill", "red").attr("r", 15); 
```

我得到四分（对应于'datafiltered'中的四对数据）。但是在按钮单击时，我运行

```
vis.selectAll("circle")
    .data(datafiltered2)
    .enter().append("svg:circle")
    .attr("cx", function(d) {
        return x(d.x)
    }).attr("cy", function(d) {
        return y(d.y)
    }).attr("fill", "black").attr("r", 5); 
```

并且只添加“datafiltered2”的最后一个元素（这一对中的五对）。所以，数据是不同的，第二个发生在按钮单击时，但不知道为什么我只添加了一个点！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T04:13:38.200

这里的问题是您要绑定的数据没有关键功能，因此 D3 使用索引来代替 - 因此前四个（预先存在的）元素与新数据绑定，并添加了第 5 个元素。

有关关键功能的详细信息，请参阅最近的教程：http: [//bost.ocks.org/mike/constancy/](http://bost.ocks.org/mike/constancy/)

可能您真的只想添加单个元素，但也更改现有元素以表示它们新绑定的数据，如：http: [//jsfiddle.net/jsl6906/wQJen/2/](http://jsfiddle.net/jsl6906/wQJen/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-09T15:21:13.747

调用该`.enter()`方法的结果是一个*新*元素的集合。对现有元素使用原始选择。请参阅D3 站点上的[进入和退出。](http://d3js.org/#enter-exit)

```
// Update…
var p = d3.select("body").selectAll("p")
    .data([4, 8, 15, 16, 23, 42])
    .text(String);

// Enter…
p.enter().append("p")
    .text(String);

// Exit…
p.exit().remove(); 
```

# sql - 在 SQL Server 2008 中根据时间检索行

> ID：10771506
> 
> 赞同：0
> 
> 时间：2012-05-27T03:46:09.690
> 
> 标签：sql, sql-server, sql-server-2008

我有一个表，其中包括两列`StartTime`和除其他列之外`EndTime`的类型`Time`。我想检索`StartTime`与`EndTime`某个输入时间范围冲突的行。

假设该表包含以下行：

```
ID Status StartTime EndTime
-- ------ --------- --------
0     0   08:00:00  08:50:00
1     1   08:50:00  09:40:00 
```

而且我想与范围冲突`08:00:00`- `08:40:00`。它应该返回第一行。

我正在尝试这样做：

```
SELECT *
FROM MyTable
WHERE
StartTime BETWEEN '08:00:00' AND '08:40:00'
OR
EndTime BETWEEN '08:40:00' AND '08:40:00' 
```

如果有人解决我的这个问题，我将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T09:11:46.927

同意[@John Dewey](https://stackoverflow.com/a/10771810/297408)，如果您想找到与特定范围冲突的范围，您的条件似乎不完整，因为正如约翰正确指出的那样，如果指定范围完全落在表中某个范围的边界之间，则相应的行将不符合您的条件。

但是，与其让你的情况变得更复杂，你实际上可以让它变得更简单，就像这样：

```
SELECT *
FROM MyTable
WHERE **StartTime <= '08:40:00'
  AND EndTime   >= '08:00:00'** 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T05:10:50.290

也许这实际上从未发生过，但为了彻底，我还将检查范围“08:00:00”和“08:40:00”完全介于 StartTime 和 EndTime 之间的冲突，例如 StartTime = 07:30： 00 和结束时间 = 09:00:00：

```
SELECT *
FROM MyTable
WHERE (
    StartTime BETWEEN '08:00:00' AND '08:40:00'
    OR
    EndTime BETWEEN '08:00:00' AND '08:40:00'
    OR
    '08:00:00' BETWEEN StartTime AND EndTime
    OR
    '08:40:00' BETWEEN StartTime AND EndTime
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T03:58:00.717

```
SELECT * 
FROM MyTable 
WHERE 
   StartTime BETWEEN '08:00:00' AND '08:40:00' 
OR EndTime BETWEEN '08:00:00' AND '08:40:00' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T03:58:31.433

你的第二个子句应该是`EndTime BETWEEN '08:00:00' AND '08:40:00'`. 否则，你所拥有的应该工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-27T04:34:39.930

**要仅返回第一条记录**，请使用`TOP`并**确保**`ORDER BY`在使用时包含`TOP` *来确定什么是“第一条”*记录。这`union`是因为我假设“第一个”值可以由开始时间或结束时间确定。注意`ORDER BY`必须在子查询中使用，任何时候使用`TOP`，否则会得到意想不到的结果。

```
SELECT TOP(1)[Status],StartTime,EndTime 
FROM (
      SELECT TOP(1) [Status],StartTime,EndTime,StartTime AS TEST
      FROM dbo.MyTable
      WHERE StartTime BETWEEN '08:00:00' AND '08:40:00'
      ORDER BY StartTime DESC 
      UNION ALL
      SELECT TOP(1) [Status],StartTime,EndTime,EndTime AS TEST
      FROM dbo.MyTable
      WHERE
      EndTime BETWEEN '08:00:00' AND '08:40:00'
      ORDER BY EndTime DESC 
) x
ORDER BY TEST DESC 
```

**如果“第一条”记录只能由一个值确定，例如开始时间，只需执行以下操作：**

```
SELECT TOP(1) [Status],StartTime,EndTime 
FROM dbo.MyTable
WHERE StartTime BETWEEN '08:00:00' AND '08:40:00'
OR EndTime BETWEEN '08:00:00' AND '08:40:00'
ORDER BY StartTime DESC 
```

# flash - 如何将 WMV 转换为 FLA？

> ID：10771509
> 
> 赞同：0
> 
> 时间：2012-05-27T03:46:59.943
> 
> 标签：flash, wmv, fla

我想将 WMV 文件（Windows 电影制作器）转换为 FLA（闪存）。

我有 Adob​​e Encore 和 Adob​​e Premier，可以使用其中的任何一个（如果可以，比如何使用？）。

或者有没有我可以使用的免费软件？不会在框架中添加任何徽标等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T04:44:43.813

[FFMpeg](http://ffmpeg.org/)非常适合这类事情（几乎所有进行自动转换的人都使用它，显然[包括 youtube](http://multimedia.cx/eggs/googles-youtube-uses-ffmpeg/)。

更新：您确定要将“FLA”作为输出吗？除非您的目标是真正旧版本的闪存，否则最好编码为 H.264。

我还想补充一点，对于单个视频，使用它并获得良好的效果需要一些工作，但如果你要一遍又一遍地使用它，它很容易，因为它很容易自动化。即使您在进行测试，也很容易制作一个小脚本/程序来使用各种选项对您的测试视频进行编码并查看结果。

# javascript - 消除 HTML 表格中显示的十进制字符串（通过 poshytip 鼠标悬停）

> ID：10771510
> 
> 赞同：1
> 
> 时间：2012-05-27T03:47:13.387
> 
> 标签：javascript, jquery, mouseover, d3.js

我的页面上有路径元素，它们有一个属性“title”，它是一个 html 信息表。这是一个例子：

```
<table>
<tr>
    <td>
        <b><u>California</u></b>
    </td>
</tr>
<tr>
    <td>
        <u>University</u>
    </td>
    <td>
        <u>Percent</u>
    </td>
</tr>
<tr>
    <td>
        California 1:
    </td>
    <td>
        6.6%
    </td>
</tr>
<tr>
    <td>
        California 2:
    </td>
    <td>
        1.2%
    </td>
</tr>
<tr>
    <td>
        California 3:
    </td>
    <td>
        0.5%
    </td>
</tr>
<tr>
    <td>
        California 4:
    </td>
    <td>
        10.1%
    </td>
</tr>
<tr>
    <td>
        California 5:
    </td>
    <td>
        3.6%
    </td>
</tr>
</table> 
```

当我最初加载页面时，poshytips 看起来不错，但是当我更新滑块（更新表格）时，一些提示会得到长的十进制字符串。上表来自 console.log 更新时应显示的内容。但是，值“1.2%”显示为“1.20000000000000002%。”从 csv 读取的输入值最初是精确到小数点后一位的字符串值。这就是我使用 d3 更新提示的方式（“maketip”函数只返回上面显示的表格）：

```
state_path.transition()
  .duration(1000)
  .attr('title', function(d) {
    return maketip(d,y);
  })
  .each("end", function(d) {
    var $this = $(this);
    $this.poshytip("update", $this.attr('title') );
  }); 
```

有没有办法防止这种情况，或者有办法将此表指定为对象的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T22:52:47.613

这是我找到的答案-感谢您的评论：尝试为 poshytip 提供该功能，而不是将其保存到标题 attr。

```
$('.county_path').poshytip({
        content:    function() { 
            return maketip(this.__data__.id, this.__data__.properties.name); 
        },
        className: 'tip-ihme',
        slide:      false,
        followCursor:   true,
        alignTo:    'cursor',
        alignX:     'center'
    }); 
```

# php - Opencart 模块包含自定义 php 文件问题？

> ID：10771513
> 
> 赞同：1
> 
> 时间：2012-05-27T03:47:54.543
> 
> 标签：php, opencart, php-include

我正在尝试创建一个 OpenCart 1.5.1.3 模块。我遇到的问题是包含自定义 php 脚本。

当我在控制器中执行此操作时：

```
include('module/simple_html_dom.php'); 
```

或者

```
include('simple_html_dom.php'); 
```

我收到以下错误：

> **注意**：错误：无法加载语言模块/simple_html_dom！在第**26**行的**D:\xampp\htdocs\store\system\library\language.php**

 **我怀疑有一个简单的解释，但无法解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T08:30:26.547

我找到了一种方法来包含我想要的文件。我不确定这是否是正确的方法，但我使用了以下代码 - OpenCart 的文档如此之少，因此调试和/或开发它并不容易。

```
require_once(DIR_SYSTEM . 'simple_html_dom.php'); 
```

DIR_SYSTEM 是 OpenCart 的 /system 文件夹，所以我将我的 simple_html_dom.php 文件放在那里，瞧，它起作用了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T13:34:48.100

原因是理论上你仍然在从 index.php 文件调用，所以需要使用相对路径，或者使用定义的变量，你可以在 config.php 文件中找到所有相关的OpenCart 使用的路径

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-18T13:22:57.643

我在opencart中有同样的问题。我必须安装文件我有类似的东西

```
<?php include 'i_header.tpl';?> 
```

我将其替换为

```
<?php include (DIR_TEMPLATE. '/module/---your module name ---/i_header.tpl');?> 
```

它有效。您可以在配置文件下选择正确的路径名。

```
ROOT/config.php

ROOT/admin/config.php 
```

我希望这有帮助。**

# google-app-engine - 为 AppEngine 添加自己的身份验证到 UserService

> ID：10771518
> 
> 赞同：1
> 
> 时间：2012-05-27T03:50:26.053
> 
> 标签：google-app-engine, openid

我正在使用 UserService 来允许我的用户注册和登录。

我们发现用户出于某种原因希望在我们自己的网站上创建登录而不使用他们现有的凭据。

我知道 UserService 支持 Google Friend Authentication，我们可以使用 Yahoo 和其他 openids。但是，我想知道我们是否可以添加我们的身份验证机制而无需实现为开放 ID 提供者/生产者。

如果成为 openid 提供者是唯一可行的选择，是否有任何推荐的 AppEngine 库。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T06:46:05.547

你如何做到这一点完全取决于你如何建立你的授权系统。直接使用用户 API，您唯一的选择是使用 OpenID 或 Google 帐户（每个应用程序只能使用一个，在任何时候，不能同时使用两者）。如果您想要更大的灵活性，您将需要构建自己的授权子系统，或使用现有的授权子系统，它抽象出不同的身份验证提供程序。例如，参见[webapp2 的 auth 模块](http://webapp-improved.appspot.com/api/webapp2_extras/auth.html)。

# java - JMenuBar 不显示

> ID：10771520
> 
> 赞同：1
> 
> 时间：2012-05-27T03:51:13.663
> 
> 标签：java, swing, jmenu, jmenuitem, jmenubar

我试图让我的 JMenuBar 显示在 GUI 中，但它只是在顶部显示为 1 像素线。

这是我的代码...

```
public LibraryView() {
    setBounds(100,100,640,480);
    setVisible(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setLayout(new BorderLayout());

    JMenuBar b1 = new JMenuBar();
    JMenu m1 = new JMenu("Test");
    JMenuItem i1 = new JMenuItem("Item1");

    this.setJMenuBar(b1);
} 
```

有人可以帮我理解什么是错的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T03:54:09.353

您需要将`JMenu`and添加`JMenuItem`到`JMenuBar`. 您还需要在方法结束时`pack()`，`setVisible(true);`就在显示 GUI 之前...

```
public LibraryView() {
    setBounds(100,100,640,480);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setLayout(new BorderLayout());

    JMenuBar b1 = new JMenuBar();
    JMenu m1 = new JMenu("Test");
    JMenuItem i1 = new JMenuItem("Item1");

    m1.add(i1); // ADDED
    b1.add(m1); // ADDED

    this.setJMenuBar(b1);

    pack(); // ADDED
    setVisible(true); // MOVED
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T03:54:19.860

您应该`setVisible(true)`仅***在***将所有组件添加到顶级窗口后调用。另外不要忘记使用布局管理器，让这些管理器和你的组件的preferredSize 设置组件的大小，不要忘记调用`pack()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-06T17:43:43.133

在调用 set visible(true) 之前调用 repaint() 永远不会失败。

```
 setJMenuBar(menuBar);
 menuBar.add(jMenuItem);
 repaint(); //then
 setVisible(true); //Assured NEVER FAILS 
```

# android - IOS/Android人脸匹配开源

> ID：10771523
> 
> 赞同：1
> 
> 时间：2012-05-27T03:51:50.317
> 
> 标签：android, ios, open-source, face-recognition

我想制作一个这样的iOS/Android应用程序：拍摄用户面部照片，然后在数据库中搜索通过比较面部特征、肤色等来找到最相似的面部。

我想通过特征匹配来进行比较。它通过比较面部的结构、形状和比例来做到这一点；眼睛、鼻子、嘴巴和下巴之间的距离；眼窝的上部轮廓；嘴的两侧；鼻子和眼睛的位置；以及检查骨骼周围的区域。我怎样才能做到这一点 ？

是否有任何开源解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T03:59:01.467

您可能想结帐

[http://opencv.willowgarage.com/wiki/](http://opencv.willowgarage.com/wiki/)

OpenCV 具有构建它的元素，并且可以在 Android 和 iOS 上运行。其他选项：

[Android中的人脸检测？](https://stackoverflow.com/questions/4125821/face-detection-in-android)

# mysql - MySQL 单表扫描更新

> ID：10771524
> 
> 赞同：0
> 
> 时间：2012-05-27T03:51:57.540
> 
> 标签：mysql

有没有办法在 MySQL 中使用 UPDATE 完成单表扫描？**以下是一个标准示例：**

```
IF EXISTS (SELECT * FROM Table1 WHERE Column1='SomeValue')
    UPDATE Table1 SET (...) WHERE Column1='SomeValue'
ELSE
    INSERT INTO Table1 VALUES (...) 
```

**这是我希望在 MySQL 中发生的理想情况（但这是 MsSQL）：**

```
UPDATE user SET (name = 'jesse') WHERE userid ='10001'
IF @@ROWCOUNT=0
    INSERT INTO user (name) VALUES('jeeeeee') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T03:54:49.477

它在 MySQL 中有点相反。您执行插入，如果键已经存在，则更新该行：

```
INSERT INTO Table1 (col1,col2,col3) VALUES (val1,val2,val3)
ON DUPLICATE KEY UPDATE col1 = val1, col2 = val2, col3 = val3; 
```

这取决于您拥有表的唯一键（您这样做，对吗？）

# ipad - CoreBluetooth 只支持蓝牙 4.0？

> ID：10771530
> 
> 赞同：2
> 
> 时间：2012-05-27T03:52:34.353
> 
> 标签：ipad, bluetooth

CoreBluetooth 只支持蓝牙 4.0？

使用 CoreBlutooth，我无法从 Mac Mini 中找到我的 iPod3。谁能告诉我是否可以在旧的苹果设备（如 iPod3）上开发蓝牙程序？

```
NSDictionary * options = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:FALSE], CBCentralManagerScanOptionAllowDuplicatesKey, nil];
[manager scanForPeripheralsWithServices:[NSArray arrayWithObject:[CBUUID UUIDWithString:@"180A"]] options:options]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T03:57:41.137

看一下[框架](https://developer.apple.com/library/ios/documentation/CoreBluetooth/Reference/CoreBluetooth_Framework/CoreBluetooth_Framework.pdf)参考：

> CoreBluetooth 框架提供对蓝牙 4.0 低功耗设备的访问。

所以是的，CoreBluetooth 仅适用于 iPhone 4S 和新 iPad。

要在旧设备上使用蓝牙进行开发，请使用[IOBluetoothUserLib](https://developer.apple.com/library/mac/#documentation/DeviceDrivers/Reference/IOBluetooth/IOBluetoothUserLib_h/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:11:45.233

还要记住，蓝牙 LE 设备的发现仅在应用程序中可用，即您无法通过标准的 iOS 蓝牙设置找到 LE 设备，您必须为其编写一个应用程序。

# python - Python NLTK FreqDist() 通过将 k,v 写入磁盘来减少内存使用？

> ID：10771538
> 
> 赞同：2
> 
> 时间：2012-05-27T03:55:23.290
> 
> 标签：python, key, nltk, frequency-distribution

我有一个小程序，它使用 NLTK 来获取相当大的数据集的频率分布。问题是，几百万字之后，我开始耗尽系统上的所有 RAM。这是我认为相关的代码行：

```
freq_distribution = nltk.FreqDist(filtered_words)               # get the frequency distribution of all the words
top_words = freq_distribution.keys()[:10]                       # get the top used words
bottom_words = freq_distribution.keys()[-10:]                   # get the least used words 
```

必须有一种方法可以将密钥、值存储写入磁盘，我只是不确定如何。我试图远离像 MongoDB 这样的文档存储并保持纯粹的 Python 风格。如果有人有一些建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T13:28:45.790

巧合的是，我在过去的一个月里遇到了同样的问题。我试图使用 NLTK 和 FreqDist 从大型数据集（例如英语维基百科和古腾堡数据集）创建 n-gram 频率表。我的 8GB 机器可以在内存中存储一​​元模型，但不能存储二元模型。

我的解决方案是使用 BerkeleyDB，它将 ak,v 数据库存储到磁盘；而且还存储了一个内存表缓存以提高速度。对于频率分布，这非常慢，所以我还使用 FreqDist 在内存中创建了自己的子表，然后定期将它们保存到 BerkeleyDB（通常每 1000 个左右的输入文件）。这大大减少了 BerkeleyDB 的写入，因为它删除了很多重复 - 例如。一元模型中的“the”只写一次，而不是几十万次。我在这里写了：

[https://www.winwaed.com/blog/2012/05/17/using-berkeleydb-to-create-a-large-n-gram-table/](https://www.winwaed.com/blog/2012/05/17/using-berkeleydb-to-create-a-large-n-gram-table/)

使用 pickle 的问题是您必须将整个分布存储在内存中。纯pythonic的唯一方法是编写你自己的实现，它有自己的k，v磁盘数据库，可能还有你自己的内存缓存。使用 BerkeleyDB 变得非常简单和高效！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T05:51:29.977

在这种情况下，我使用[JSON](http://docs.python.org/library/json.html)模块来存储大型字典（或其他数据结构）。我认为[pickle](http://docs.python.org/library/pickle.html)或[cpickle](http://docs.python.org/library/pickle.html#module-cPickle)可能更有效，除非您想以人类可读的形式存储数据（通常对 nlp 有用）。

这是我的做法：

```
import json
d = {'key': 'val'}
with open('file.txt', 'w') as f:
    json.dump(d, f) 
```

然后检索，

```
with open('file.txt', 'r') as f:
    d = json.loads(f.read()) 
```

# c# - ashx 方法调用 - 使可重用

> ID：10771542
> 
> 赞同：0
> 
> 时间：2012-05-27T03:57:11.533
> 
> 标签：c#

我有一个 ashx 文件，它为我创建了一个二进制 csv 文件。我希望能够将任何通用列表传递给它。

我知道我可以将列表放入会话中，然后在通用处理程序中提取它，但在重负载下可以接受吗？

```
 byte[] csvData = Utility.ToCsv(",", DAL.GetProducts());

    context.Response.OutputStream.Write(csvData, 0, csvData.Length); 
```

如果我可以在处理程序中运行任何查询（而不是硬编码 DAL.GetProducts()），那就太好了。有什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:09:38.927

如果数据集高于可以序列化为 QueryString 数据的阈值，我将简单地创建一个 HttpHandler，它将列表作为序列化的 POST 数据接受。这样，您的 ToCsv() 处理程序所需要做的就是从发布数据中获取列表，然后对其进行反序列化。

如果您需要我详细说明其中的任何内容，请告诉我。

# php - HTML：启用多次提交而不刷新

> ID：10771549
> 
> 赞同：1
> 
> 时间：2012-05-27T03:59:06.907
> 
> 标签：php, javascript, jquery, html, wamp

我想增强我的工具页面，一旦使用单击按钮。请求转到服务器并根据返回类型（失败/通过）我更改按钮的颜色。没有刷新/页面重新加载

页面有多个按钮：一些如下所示。

```
Name       9-11  -  11-2      2-5

Resource1 - Button - Button - Button 

Resource2 - Button - Button - Button 

Resource1 - Button - Button - Button 
```

我是一名 C++ 程序员，所以你可能会觉得我问了一个简单的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T04:04:31.013

这是一个 jQuery Ajax 发布的示例`Form`。就个人而言，我不熟悉 PHP，但无论如何 Ajax 都是一样的。您只需要发布到可以返回的内容`Success = true`或`false`. `success:`此 POST 异步发生，因此除非您在该部分中执行特定操作，否则您不会刷新页面。

```
$("document").ready(function () {

    $('form').submit(function () {
        if ($(this).valid()) {
            $.ajax({
                url: yourUrlHere,
                dataType: "json",
                cache: false,
                type: 'POST',
                data: $(this).serialize(),
                success: function (result) {
                    if(result.Success) {
                        // do nothing
                    }                           
                }
            });
        }
        return false;
    });
}); 
```

当然你也不必这样做`POST`，它可以是`GET`

```
type: 'GET', 
```

如果您不需要传递任何数据，只需保留`data:`部分即可。但是如果你想指定你可以使用的数据`data: { paramName: yourValue },`

`cache: false,`如果要缓存页面，可以省略该行。鉴于您不会显示任何更改，您可以删除该行。jQuery 将一个唯一值附加到 Url 以防止它被缓存。指定`type: "json",`或任何您的特定类型始终是一个好主意，但不是必需的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T04:03:09.093

尝试在 jquery 中使用 $.post 或 $.get 函数

```
$.post("url",$("#myform").serialize()); 
```

按照 Fabrício Matté 的建议添加回调函数

```
$.post("url",$("#myform").serialize(),function(data){alert(data);$("#myform").hide()//?Do something with the returned data here}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T05:12:43.990

干得好。你会发现一个表单的例子，一个按钮一个必要的ajax处理php页面。试试看，让我们知道它是怎么回事：

```
<form action="" method="post" name="my_form" id="my_form">
  <input type="submit" name="my_button" id="my_button" value="Submit">
</form>

<script type="text/javascript">
$("document").ready(function () {

    $('#my_form').submit(function () {

        $.ajax({
                url: "ajaxpage.php",
                dataType: "json",
                type: "POST",
                data: $(this).serialize(),
                success: function (result) 
                    {
                        //THere was an error
                        if(result.error) 
                        {
                            //So apply 'red' color to button
                            $("#my_button").addClass('red');
                        }
                        else
                        {
                            //there was no error. So apply 'green' color
                            $("#my_button").addClass('green');  
                        }
                    }                           
            });

        return false;
    });
});
</script>

<?php 
//ajaxpage.php
//Do your processing here

if ( $processed )
{
    $error = false;
}
else
{
    $error = true;  
}

print json_encode(array('error' => $error));
die();

?> 
```

# python - 将打印的所有内容记录到文件中

> ID：10771550
> 
> 赞同：1
> 
> 时间：2012-05-27T03:59:13.147
> 
> 标签：python, logging

我想创建一个函数来记录每个`print`命令，将每个命令的字符串存储到文件中的新行中。

```
def log(line):
    with open('file.txt', "a") as f:
        f.write('\n' + line) 
```

这就是我所拥有的，但是有什么方法可以使用 Python 完成我所说的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T04:11:23.290

尝试用`stdout`自定义类替换：

```
import sys
class LoggedStdout():
    def __init__(self, filename = None):
        self.filename = filename
    def write(self, text):
        sys.__stdout__.write(text)
        if not self.filename is None:
            self.log(text)
    def log(self, line):
        with open(self.filename, "a") as f:
            f.write('\n' + line)

sys.stdout = LoggedStdout('file.txt')

print 'Hello world!' 
```

这不仅会影响`print`，还会影响打印到 的任何其他功能`stdout`，但它通常会更好。

对于生产模式日志，最好使用类似[`logging`module](http://docs.python.org/library/logging.html)的东西，而不是标准 IO 流上的自制钩子。

# c++ - 简单的 Windows C++ 不可见

> ID：10771551
> 
> 赞同：0
> 
> 时间：2012-05-27T03:59:40.233
> 
> 标签：c++, windows, file

```
case WM_CREATE:
    {
    int randomsize=0;
    //std::string lineofquote;
    char lineofquote[255];
    std::ifstream infile;
    infile.open("quotes.txt",std::ios::in);
    if (infile)
    {
        MessageBox(NULL,"infile failed","Error reading file", MB_OK);
        return 0;
    }
    newhandler = CreateWindow(TEXT("static"),TEXT("Quote here") ,WS_CHILD | WS_VISIBLE , 0,0,550,150,hWnd,NULL,NULL,NULL);

    while(!infile.eof())//get file size
    {
        infile.getline(lineofquote,255,'\n');
        SetWindowText(newhandler,lineofquote);
        randomsize++;
    }
    infile.close();
    //std::cout<<randomsize;

    break;
    } 
```

当我运行这个程序时，我似乎根本看不到我的窗口。这里可能有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T04:23:38.490

这不是您创建窗口的方式。`CreateWindow` [您使用API](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632679%28v=vs.85%29.aspx)创建一个窗口。你需要做几件事。可能这个[MSDN 教程](http://msdn.microsoft.com/en-us/library/bb384843.aspx)可以提供帮助。

`WM_CREATE`是创建窗口时触发的事件，通常使用上述 API。

始终正确阅读文档。只要您在处理 Win32 API，MSDN 就是您的圣经。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T15:36:00.020

检查你的`ShowWindow()`功能。您可以设置`CmdShow parameter to 0`这意味着您的窗口将不可见，或者只是您忘记调用此函数。此外，您可以检查是否`RegisterClassEx(...)`正常工作。

# java - 如何将两组weka Instances合并在一起

> ID：10771558
> 
> 赞同：2
> 
> 时间：2012-05-27T04:01:48.987
> 
> 标签：java, merge, set, weka

目前，我一次将一个实例从一个数据集复制到另一个数据集。有没有办法做到这一点，使字符串映射保持不变？mergeInstances 水平工作，是否有等效的垂直合并？

这是我用来从多个 arff 文件中将相同结构的数据集读取到一个大型数据集的循环的一个步骤。必须有一个更简单的方法。

```
Instances iNew = new ConverterUtils.DataSource(name).getDataSet();
for (int i = 0; i < iNew.numInstances(); i++) {
    Instance nInst = iNew.instance(i);
    inst.add(nInst);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T21:32:01.180

如果您想要一个完全自动化的方法，也可以正确复制字符串和名义属性，您可以使用以下函数：

```
public static Instances merge(Instances data1, Instances data2)
    throws Exception
{
    // Check where are the string attributes
    int asize = data1.numAttributes();
    boolean strings_pos[] = new boolean[asize];
    for(int i=0; i<asize; i++)
    {
        Attribute att = data1.attribute(i);
        strings_pos[i] = ((att.type() == Attribute.STRING) ||
                          (att.type() == Attribute.NOMINAL));
    }

    // Create a new dataset
    Instances dest = new Instances(data1);
    dest.setRelationName(data1.relationName() + "+" + data2.relationName());

    DataSource source = new DataSource(data2);
    Instances instances = source.getStructure();
    Instance instance = null;
    while (source.hasMoreElements(instances)) {
        instance = source.nextElement(instances);
        dest.add(instance);

        // Copy string attributes
        for(int i=0; i<asize; i++) {
            if(strings_pos[i]) {
                dest.instance(dest.numInstances()-1)
                    .setValue(i,instance.stringValue(i));
            }
        }
    }

    return dest;
} 
```

请注意，以下条件应成立（函数中未勾选）：

*   数据集必须具有相同的属性结构（属性数量、属性类型）
*   类索引必须相同
*   标称值必须完全对应

要动态修改 data2 的标称属性的值以匹配 data1 的值，您可以使用：

```
data2.renameAttributeValue(
    data2.attribute("att_name_in_data2"),
    "att_value_in_data2",
    "att_value_in_data1"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T21:58:40.483

为什么不制作一个包含两个原始数据的新 ARFF 文件？一个简单的

```
cat 1.arff > tmp.arff
tail -n+20 2.arff >> tmp.arff 
```

where`20`被您的 arff 标头的长度所取代。然后，这将生成一个包含所有所需实例的新 arff 文件，您可以使用现有代码读取这个新文件：

```
Instances iNew = new ConverterUtils.DataSource(name).getDataSet(); 
```

您还可以使用以下文档在命令行上调用 weka：http: [//old.nabble.com/how-to-merge-two-data-file-a.arff-and-b.arff-into-one-data -list--td22890856.html](http://old.nabble.com/how-to-merge-two-data-file-a.arff-and-b.arff-into-one-data-list--td22890856.html)

```
java weka.core.Instances append filename1 filename2 > output-file 
```

但是，文档[http://weka.sourceforge.net/doc.dev/weka/core/Instances.html#main%28java.lang.String](http://weka.sourceforge.net/doc.dev/weka/core/Instances.html#main%28java.lang.String)中没有允许您在本地附加多个 arff 文件的功能爪哇代码。从 Weka 3.7.6 开始，附加两个 arff 文件的代码如下：

```
 // read two files, append them and print result to stdout
  else if ((args.length == 3) && (args[0].toLowerCase().equals("append"))) {
DataSource source1 = new DataSource(args[1]);
DataSource source2 = new DataSource(args[2]);
String msg = source1.getStructure().equalHeadersMsg(source2.getStructure());
if (msg != null)
  throw new Exception("The two datasets have different headers:\n" + msg);
Instances structure = source1.getStructure();
System.out.println(source1.getStructure());
while (source1.hasMoreElements(structure))
  System.out.println(source1.nextElement(structure));
structure = source2.getStructure();
while (source2.hasMoreElements(structure))
  System.out.println(source2.nextElement(structure));
  } 
```

因此，看起来 Weka 本身只是简单地遍历数据集中的所有实例并打印它们，这与您的代码使用的过程相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-16T20:35:09.240

另一种可能的解决方案是使用 java.util.AbstractCollection 中的 addAll，因为实例实现了它。

```
instances1.addAll(instances2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-09T10:14:30.463

我刚刚共享了一个扩展`weka.core.Instaces`类，其中包含`innerJoin`、`leftJoin`、和.`fullJoin``update``union`

```
table1.makeIndex(table1.attribute("Continent_ID");
table2.makeIndex(table2.attribute("Continent_ID");
Instances result = table1.leftJoin(table2); 
```

实例可以具有不同数量的属性、级别`NOMINAL`和`STRING`变量，如有必要，可以将它们合并在一起。

来源和一些示例在 GitHub 上：[weka.join](https://github.com/btaranta/weka.join/)。

# iphone - UITableView 显示的行数超过 numberOfRowsInSection 中指定的行数：

> ID：10771563
> 
> 赞同：32
> 
> 时间：2012-05-27T04:03:02.353
> 
> 标签：iphone, objective-c, ios, uitableview

我希望我的 tableView 显示 6 行，其中包含文本，在本例中为“示例”。据我所知，我的`numberOfSectionsInTableView:`设置`numberOfRowsInSection:`正确。请参见下面的示例代码：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
   // Return the number of sections.
   return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
  // Return the number of rows in the section.
  return 6;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath{

  static NSString *CellIdentifier = @"Cell";

  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
  if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
  }

  cell.textLabel.text = @"Example";

  return cell;
} 
```

问题是当您看到下面的图像显示不应该/不存在的行的行时。

![在此处输入图像描述](../Images/771ab5de5f7bccb802d71c4edee6c9a3.png)

如何摆脱显示过去第 6 行的线条？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-05-27T04:53:59.140

[普遍接受的方法](https://stackoverflow.com/questions/1633966/can-i-force-a-uitableview-to-hide-the-separator-between-empty-cells)是添加一个帧大小为 CGRectZero 的页脚视图，如下所示：

```
[tableView setTableFooterView:[[UIView alloc] initWithFrame:CGRectZero]] 
```

这样做是告诉表格有一个页脚，因此它停止显示分隔线。然而，由于页脚有一个 CGRectZero 作为它的框架，所以没有显示任何内容，因此视觉效果是分隔符简单地停止。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-12-13T22:28:27.577

**斯威夫特**版本

最简单的方法是设置 tableFooterView 属性：

```
override func viewDidLoad() {
    super.viewDidLoad()
    // This will remove extra separators from tableview
    self.tableView.tableFooterView = UIView(frame: CGRect.zero)
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-27T05:08:27.410

这是因为您的表视图高度。你的天气写

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{ 
```

// 返回节中的行数。返回 6；}

但它根据表格视图大小显示行。如果您不想显示这些额外的行，则将**UITableView 样式设为普通到分组。**

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-08-07T06:52:01.413

简短而简单的答案..

```
self.tableView.tableFooterView = [UIView new]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-27T04:22:55.423

您可以按照以下方式做一些事情：

```
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:7 inSection:0];
[self.mytableView cellForRowAtIndexPath:indexPath].hidden = YES; 
```

我相信有一些更好的方法，但这是我想到的第一件事。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-27T04:41:31.697

如果您指的是出现在最后一行下方的浅灰色线条，那只是 a`UITableView`绘制行分隔符的默认方式。

您可以尝试更改 Interface Builder 中的 Separator 样式（请参见下图），看看其中一个是否更符合您的喜好。

![在此处输入图像描述](../Images/5fb3856cc32136fa4ec35f092328c10d.png) ![在此处输入图像描述](../Images/3472e0dd03ed0fa265e12ffcf66ad20e.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-27T04:55:37.417

你没有说你想在最后一行看到什么。如果您只想查看窗口背景，则只需将表格视图嵌入到 UIView 中，该 UIView 的高度足以显示您想要查看的行数。如果您想在不滚动的情况下查看更多行，则必须根据行数调整包含视图的大小。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-02-04T08:19:42.757

要以编程方式删除它，请使用以下命令： `[yourTableView setSeparatorStyle:UITableViewCellSeparatorStyleNone];`

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-06-24T14:41:30.670

更容易：

1.  返回 numberOfSections + 1
2.  在最后一部分返回 0 行

这让它变得简单！

# php - 将 mysql 数据库与 Android 应用程序连接

> ID：10771566
> 
> 赞同：3
> 
> 时间：2012-05-27T04:03:21.507
> 
> 标签：php, android, mysql

我在将数据库与 Android 应用程序连接时遇到问题。我正在尝试实施[本](http://webdesignergeeks.com/mobile/android/android-login-authentication-with-remote-db/)教程。一切似乎都很好，但我既没有成功也没有错误。

有一个按钮侦听器，单击它会发布到 PHP 文件并获取结果。这是它的代码：-

```
 ok.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
            postParameters.add(new BasicNameValuePair("username", un.getText().toString()));
            postParameters.add(new BasicNameValuePair("password", pw.getText().toString()));
            //String valid = "1";
            String response = null;
            try {
                response = CustomHttpClient.executeHttpPost("http://10.0.2.2/check.php", postParameters);
                String res=response.toString();
                Log.d("res:", res);

               // res = res.trim();
                res= res.replaceAll("\\s+","");                              
                //error.setText(res);

               if(res.equals("1"))
                    error.setText("Correct Username or Password");
                else
                    error.setText("Sorry!! Incorrect Username or Password"); 
            } catch (Exception e) {
                un.setText(e.toString());
            }

        }
    }); 
```

这是http post方法：-

```
public static String executeHttpPost(String url, ArrayList<NameValuePair> postParameters) throws Exception {
    BufferedReader in = null;
    try {
        HttpClient client = getHttpClient();
        HttpPost request = new HttpPost(url);
        UrlEncodedFormEntity formEntity = new UrlEncodedFormEntity(postParameters);
        request.setEntity(formEntity);
        HttpResponse response = client.execute(request);
        in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));

        StringBuffer sb = new StringBuffer("");
        String line = "";
        String NL = System.getProperty("line.separator");
        while ((line = in.readLine()) != null) {
            sb.append(line + NL);
        }
        in.close();

        String result = sb.toString();
        Log.d("postMethodReturn", result);
        return result;
    } finally {
        if (in != null) {
            try {
                in.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

PHP代码如下：-

```
<?php
$un=$_POST['username'];
$pw=$_POST['password'];
//connect to the db
$user = "xyz";
$pswd = "xyz";
$db = "mydb";
$host = "localhost";
$conn = mysql_connect($host, $user, $pswd);
mysql_select_db($db);
//run the query to search for the username and password the match  
$query = "SELECT * FROM mytable WHERE user = '$un' AND pass = '$pw'";
$result = mysql_query($query) or die("Unable to verify user because : " . mysql_error());
//this is where the actual verification happens  
if(mysql_num_rows($result) --> 0)  
echo 1;  // for correct login response  
else  
echo 0; // for incorrect login response  
?> 
```

程序中是否有任何错误？我尝试在活动代码中记录 res（http 响应）的中间值并导致执行 post 方法，但没有记录任何内容。尝试将“localhost”更改为“127.0.0.1”，并更改为具有所有数据库环境的公开可用的虚拟主机，但没有成功。所有这些都在模拟器和公共主机上，也在真实设备上尝试过。从浏览器检查时，服务器似乎正在运行。数据库与值一起存在。正在运行的所有服务（apache、mysql）。

主要问题是没有错误！有什么建议吗？找不到有同样问题的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T08:41:29.723

问题`-->`出在 PHP 代码中。将其更改为`==`or`>`一切正常！

# ruby-on-rails - 在 mac 上创建新用户帐户时是否需要重新安装 rvm、git、rails 等？

> ID：10771574
> 
> 赞同：0
> 
> 时间：2012-05-27T04:05:00.843
> 
> 标签：ruby-on-rails, macos

我已经在我的 mac 上设置了一个新的用户帐户，这样我就可以让一对程序员 ssh 进入我的计算机，这是否意味着我必须重新安装 rvm 和 rails 并配置我的 bash 文件和终端窗口以及所有这些乱七八糟的东西将所有内容按原样转移到新用户帐户的神奇方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T04:41:51.103

这取决于东西是如何安装的。如果 git 和其他实用程序已安装在 /opt 或 /usr/local 下，新用户只需将相关的 'bin' 目录添加到他们的 PATH 并“免费”选择这些目录。

对于 rvm，我认为部分设计目标是在必要时将每个用户和应用程序完全沙箱化到他们自己的环境中。因此，共享您的 rvm 安装可能不是一个好主意。

# mysql - 访问 Joomla 数据库

> ID：10771583
> 
> 赞同：0
> 
> 时间：2012-05-27T04:07:28.847
> 
> 标签：mysql, database, joomla

我正在尝试将 joomla 网站从一个人的托管帐户移动到另一个人的托管帐户。因此，我在拥有哪些工具方面真的很有限。

我不得不尝试访问 mysql 数据库的问题。我无权访问 ssh、cpanel、phpmyadmin 或任何其他性质的东西，只有 joomla 管理员和 ftp 访问权限。

但是 joomla 给了我一些数据库设置。但是当我尝试连接到给定的主机名时，什么也没有发生。我正在尝试类似的东西，但它只是挂起

```
mysql -u myusername -h thegivendomain.db.3456321.hostedresource.com jos_giventable name 
```

我什至尝试挖掘主机名并尝试使用 ip 作为主机名。

和想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T04:54:40.247

可以合理地假设他们的防火墙只是阻止对 MySQL 服务的远程访问，因此您的连接尝试不会到达他们的目的地。

看看你对 shell 的熟悉程度，你可以尝试一个 PHP shell 包装器，比如[我为自己制作的这个](https://github.com/DCoderLT/Misc_Tools/blob/master/sh/sh.php)- 如果托管公司对他们的安全性不太严格，这个脚本将能够运行 shell 命令，例如`mysqldump -uusername -ppassword db > backup.sql`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T21:17:47.680

安装[免费的 Akeeba Backup](http://akeebabackup.com/)，它将制作您可以下载的网站的完整副本。将其上传到新服务器并使用[他们的 Kickstart 脚本](https://www.akeebabackup.com/products/akeeba-kickstart.html)进行安装。

从新主机上的任何浏览器运行 Kickstart 并按照步骤操作。

# javascript - 3 个按钮，我希望其他 2 个在单击的 1 个处于活动状态时保持不活动状态

> ID：10771584
> 
> 赞同：0
> 
> 时间：2012-05-27T04:08:03.940
> 
> 标签：javascript, jquery, html

```
function toggleSlideBox(x) {
        $("#"+x).slideToggle(300);

  } 
```

好的，所以我在每个按钮上使用这个 javscript 功能来创建一个包含表单、文本等的下拉菜单，当我单击一个（例如第一个）然后当它下降时，其他两个按钮下降到它下面. 如果我单击最后一个，那么前两个按钮将保持在顶部。

两件事：我只希望一个按钮能够一次处于活动状态。我希望所有 3 个按钮都保持在顶部

这是其余的帮助代码：

```
<a href="#" onclick="return false" onmousedown="javascript:toggleSlideBox('three');"><input name="#" type="button" id="#" value="Ask"></input></a>
<div id="three" style="background-color:#06A1F1; border:#999 1px solid; padding:12px; display:none; margin-top:8px;">
                <textarea name="#" cols="80px" rows="3" style="resize: none;" onfocus="if(this.value==this.defaultValue) this.value='';">Content</textarea>
                <br />
                <input style="float:right; margin-right:80px;" type="button" value="Post!"></input>
                <br />
</div>
                <a href="#" onclick="return false" onmousedown="javascript:toggleSlideBox('two');"><input name="#" type="button" id="#" value="Post!"></input></a>
<div id="two" style="background-color:#06A1F1; border:#999 1px solid; padding:12px; display:none; margin-top:8px;">
                <textarea name="#" cols="15px" rows="1" style="resize: none;" onfocus="if(this.value==this.defaultValue) this.value='';">Title</textarea>
                <textarea name="#" cols="80px" rows="3" style="resize: none;" onfocus="if(this.value==this.defaultValue) this.value='';">Content</textarea>
                <br />
                <input style="float:right; margin-right:80px;" type="button" value="Post!"></input>
                <br />
</div>
                <a href="#" onclick="return false" onmousedown="javascript:toggleSlideBox('one');"><input name="#" type="button" id="#" value="Write!"></input></a>
<div id="one" style="background-color:#06A1F1; border:#999 1px solid; padding:12px; display:none; margin-top:8px;">
                <textarea name="#" cols="15px" rows="1" style="resize: none;" onfocus="if(this.value==this.defaultValue) this.value='';">Title</textarea>
                <textarea name="#" cols="80px" rows="3" style="resize: none;" onfocus="if(this.value==this.defaultValue) this.value='';">Content</textarea>
                <br />
                <input style="float:right; margin-right:80px;" type="button" value="Post!"></input>
                <br /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T04:15:45.357

重新排序元素可以帮助：

```
<a href="#" onclick="return false" onmousedown="javascript:toggleSlideBox('three');"><input name="#" type="button" id="#" value="Ask"></input></a>
<a href="#" onclick="return false" onmousedown="javascript:toggleSlideBox('two');"><input name="#" type="button" id="#" value="Post!"></input></a>
<a href="#" onclick="return false" onmousedown="javascript:toggleSlideBox('one');"><input name="#" type="button" id="#" value="Write!"></input></a>
<div id="three" style="background-color:#06A1F1; border:#999 1px solid; padding:12px; display:none; margin-top:8px;">
                <textarea name="#" cols="80px" rows="3" style="resize: none;" onfocus="if(this.value==this.defaultValue) this.value='';">Content</textarea>
                <br />
                <input style="float:right; margin-right:80px;" type="button" value="Post!"></input>
                <br />
</div>
<div id="two" style="background-color:#06A1F1; border:#999 1px solid; padding:12px; display:none; margin-top:8px;">
                <textarea name="#" cols="15px" rows="1" style="resize: none;" onfocus="if(this.value==this.defaultValue) this.value='';">Title</textarea>
                <textarea name="#" cols="80px" rows="3" style="resize: none;" onfocus="if(this.value==this.defaultValue) this.value='';">Content</textarea>
                <br />
                <input style="float:right; margin-right:80px;" type="button" value="Post!"></input>
                <br />
</div>
<div id="one" style="background-color:#06A1F1; border:#999 1px solid; padding:12px; display:none; margin-top:8px;">
                <textarea name="#" cols="15px" rows="1" style="resize: none;" onfocus="if(this.value==this.defaultValue) this.value='';">Title</textarea>
                <textarea name="#" cols="80px" rows="3" style="resize: none;" onfocus="if(this.value==this.defaultValue) this.value='';">Content</textarea>
                <br />
                <input style="float:right; margin-right:80px;" type="button" value="Post!"></input>
                <br /> 
```

*   请尽量将 UI 与 JS 逻辑分开。也许您可以将所有 JS 放在一个单独的文件中。
*   将样式保存在不同的 CSS 文件中。这将帮助您轻松操作 UI，而无需通过混合的 HTML 行。

# visual-studio-2010 - Visual Studio 2010 F5 调试 C++ 未重建

> ID：10771588
> 
> 赞同：1
> 
> 时间：2012-05-27T04:08:58.937
> 
> 标签：visual-studio-2010, visual-studio, visual-c++, visual-studio-debugging, building

我有一个 Visual Studio 2010 Ultimate C++ 项目（*非*托管或 .NET）。当我按 F5（即开始调试）时，我*希望*它保存所有文件，重建那些更改的文件，链接整个文件，然后运行。相反，它似乎使用了最后一个版本。因此，当我尝试进入某个函数或其他内容时，会出现以下错误：

![Visual Studio 更改错误](../Images/67961c59fafa8ebedccbb87e1318a73c.png)

根据我的研究，我已经验证了这些选项，其中前三个位于“选项”对话框中（可以在“调试->选项和设置”下访问）：

*   勾选“Projects and Solutions->Build and Run->Only build startup projects and dependencies on Run”。一些研究表明应该取消选中它，但在我的情况下，我实际上*只*希望它重建启动项目。对于它的价值，我尝试取消选中它，但没有任何效果。
*   “项目和解决方案->构建和运行->运行时，当项目过期时：”设置为“始终构建”。
*   “Debugging->Edit and Continue->Enable Edit and Continue”被选中，虽然它是灰色的。
*   在配置管理器（“构建->配置管理器”）中，所有解决方案配置和平台都选中了“构建”复选框。

我还尝试删除所有 Debug 和 Release 目录以及 .sdf 和 ipch 目录。

为了完整起见，我想我应该提到我正在使用预编译的标头，尽管我有点怀疑它是否重要。

谢谢，
伊恩

[编辑：我应该注意，它似乎只是一个文件（一个 .h 文件）正在这样做。我尝试重命名并重新编译，并将其从解决方案中删除并将其重新添加，但它不起作用。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T03:20:17.990

I was able to bring my solution back into the right state after deleting all .suo and .csproj.user files. Answer led to this solution. Hope this saves someone time.

I fell into this state after installing Ultimate over Professional and running profiling tools.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T04:37:03.317

一旦我的 C# 项目遇到了类似的问题，我想我已经尝试了互联网上所有可能的建议，但没有一个可行，然后这就是我所做的：

1.  创建了一个空项目
2.  添加启动功能以验证它没有显示任何错误
3.  手动一一导入我所有的源代码

所以，是的，这就是解决方案。你已经做了很多，所以我想说你可以在这里和那里尝试，但是拥有一个新项目并导入你的个人源文件会更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T20:31:55.157

另一种解决方案可能是切换平台。我注意到当我投影属性时，我刚刚创建的新项目有一个“win32”平台，而我在同一解决方案中的其他项目将它设置为 x64。在我将项目切换到 x64 后，一切正常。这适用于我的互操作（C、C+、C#）项目，希望也适用于其他项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-13T22:58:02.327

我已经成功解决了，试试以下方法：

1.  删除所有临时和智能文件
2.  从解决方案中删除所有项目，然后将它们添加回来（最重要的）
3.  检查项目“框架和参考”以确保它们有效

# android - 图形布局调色板中缺少小部件（Eclipse 上的 android）

> ID：10771589
> 
> 赞同：4
> 
> 时间：2012-05-27T04:09:19.433
> 
> 标签：android, eclipse, layout, palette

我不确定到底发生了什么，但是当我启动 eclipse 时，图形布局面板中没有小部件，因为文件夹中没有显示任何内容。它以前工作过。有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T20:06:54.483

遇到同样的问题，只需放大您的图形布局即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T18:00:29.587

将您的计算机系统语言从您的国家语言切换为英语！调色板中的小部件文件夹无法读取您的国家/地区语言；只能说英语。

这为我修好了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T18:05:10.553

我遇到了类似的问题，其中一些小部件（例如 TextView 和 EditText）从调色板中丢失。这是我所做的 - 从调色板中，单击向下的箭头并选择“刷新预览”，这是我正在谈论的图片：

![在此处输入图像描述](../Images/15cc59feedcf7f2c6586d33678b67719.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-10T13:47:48.400

如果由于某种原因屏幕上没有足够的空间，它不会显示。您需要最小化一个窗口以打开您的工作空间，它会显示出来。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-18T02:42:58.140

右键单击调色板然后选择 DOCK ON 然后选择左

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-09T06:15:47.363

这样的事情我也经历过。

在尝试了一切之后，我**改变了**项目的主题。奇怪的是，这些小部件又出现了。

可以在设计窗口的顶部栏中更改主题。

# delphi - 自动换行 - Rave 报告中的文本对象

> ID：10771590
> 
> 赞同：0
> 
> 时间：2012-05-27T04:09:44.143
> 
> 标签：delphi, delphi-xe2, word-wrap, rave-reports

我是新手，最近我在 Delphi XE2 上使用 rave report 10.0BE，预览报告时遇到问题。

我有一个文本字段太长，当打印丢失一些字符时，因为字段的长度比报告上的宽度列，我不想要额外的宽度列，因为在报告这么多列上，我希望文本字段设置可以增长并且当数据从数据库来的时间太长，它会增长到下一行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T21:25:13.353

如果您使用的是 Rave 设计器，请使用 Truncate 设置为 False 的备忘录控件，而不是文本控件。

如果您使用代码编写报告（我的偏好），请使用[TMemoBuf](http://www.nevrona.com/rave/tips/rvtip23.html)。

# r - 在函数中使用“粘贴”名称

> ID：10771604
> 
> 赞同：3
> 
> 时间：2012-05-27T04:14:36.190
> 
> 标签：r

我有一个计算一些东西然后将其分配给矩阵的函数。该矩阵的名称来自粘贴语句（基于其他一些当前值）。然后我想将 dimnames 分配给矩阵，但不知道如何理解粘贴的名称。

这是发生了什么：

```
function <- someComputations(labs) {
  ### bunch of computations, leading to X, Y, and Z:
  matName <- paste("rhoMat_", X, sep = "") # this yields rhoMat_15 if X equals 15
  assign(matName, Y %*% Z)
  assign(dimnames(matName), labs) # labs is a list of row labels and column labels
  return(matName)
} 
```

这很好用，包括第一个 assign 语句，然后它就崩溃了。我尝试了各种方法，例如 eval(parse(text = matNum))、as.name(matNum)、substitute(matNum)，但无济于事。因为我不知道矩阵的实际名称（因为没有给出 matNum），所以我不能将名称硬编码到函数中——所以我被它的字符名称 matName 卡住了。如何让 R 理解我想设置矩阵 rhoMat_15 的暗名，而不是 matName？

谢谢，彼得

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T04:33:27.070

```
dimnames(get(matName)) <- labs 
```

# wpf - 混淆或加密 Wpf App.config

> ID：10771609
> 
> 赞同：0
> 
> 时间：2012-05-27T04:16:08.833
> 
> 标签：wpf, encryption, config

我目前有一个分布式的 C# 应用程序，并且有多个人拥有。我想知道我可以采用哪种方法来隐藏构建后生成的 app.config 文件 (.exe.config) 文件，以便用户无法看到我到远程服务器的连接字符串。我在某处读到如果我加密文件，它只能在机器上解密它是加密的，这意味着它不适用于应用程序所在的其他计算机，它只能在我的 PC 上运行。我可以采用哪种方法来隐藏/混淆/加密配置文件，或者保护配置文件的任何方法，但是如果它不只针对我的计算机，那么它实际上可以为任何其他拥有分布式版本的人工作？任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T04:25:12.997

如果您不希望他们能够使用它，则永远不要向他们提供凭证。真的就是这么简单。您不能既向同一实体提供证书，又不向同一实体提供证书。无论您需要做什么安全检查，都可以在您的机器上进行。这样，即使是拥有连接字符串的人也无法绕过您关心的任何安全检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T08:43:39.647

如果您担心暴露其他机器的地址，您可能需要考虑将这些机器放在路由器机器后面。

这样，客户端机器及其用户只知道代理，而远程机器只需要对代理开放并信任它。

即使您加密了配置文件：

*   机器将需要解密文件以使用连接信息，因此秘密会以任何方式泄露

*   使用网络嗅探器，用户总是可以看到他的机器正在连接哪些机器。

# java - Android SQLite 排序表列不同

> ID：10771610
> 
> 赞同：2
> 
> 时间：2012-05-27T04:16:24.263
> 
> 标签：java, android, database, sqlite

我正在建立一个 SQLite 数据库，并且我已经按照我的想法设置了大多数东西。主要错误必须与列不在应有的位置有关。我在字符串中初始化数据库列名，如下所示：

```
public static final String KEY_ROWID = "_id";
public static final String KEY_SPORT = "given_sport";
public static final String KEY_NAME = "given_name";
public static final String KEY_DATE = "given_date";
public static final String KEY_TIME = "given_time";
public static final String KEY_PERIOD = "given_period";
public static final String KEY_LOCATION = "given_location"; 
```

何时需要使用列名创建表：

```
db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" + 
                KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " + 
                KEY_SPORT + " TEXT NOT NULL, " + 
                KEY_NAME + " TEXT NOT NULL, " + 
                KEY_DATE + " TEXT NOT NULL, " + 
                KEY_TIME + " TEXT NOT NULL, " + 
                KEY_PERIOD + " TEXT NOT NULL, " + 
                KEY_LOCATION + "TEXT NOT NULL);"
); 
```

现在的问题是我收到以下错误：

`05-27 04:13:01.448: E/Database(273): android.database.sqlite.SQLiteException: table groupTable has no column named given_location: , while compiling: INSERT INTO groupTable(given_location, given_time, given_date, given_period, given_sport, given_name) VALUES(?, ?, ?, ?, ?, ?);`

似乎表名正在重新排序，这就是导致插入错误的原因。虽然我一无所知，但我真的很感激这方面的一些帮助。

**编辑：这是 INSERT 命令**

```
 ContentValues cv = new ContentValues();
    cv.put(KEY_SPORT, sportInput);
    cv.put(KEY_NAME, nameInput);
    cv.put(KEY_DATE, dateInput);
    cv.put(KEY_TIME, timeInput);
    cv.put(KEY_PERIOD, periodInput);
    cv.put(KEY_LOCATION, locationInput);
    return dbSQL.insert(DATABASE_TABLE, null, cv); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T04:27:52.420

问题可能是您更改了数据库结构而不是数据库版本。这是一个奇怪的问题，我第一次不得不花很多时间弄清楚。

在您的 DatabaseHelper 类中应该有一个版本号，只要您更改任何表架构等，只需将其增加一即可。

编辑

您在 SQL 表创建中的“TEXT”之前缺少一个空格。

它应该是：

... + KEY_LOCATION+ “文本” ...

一旦你解决了这个问题，再次增加版本号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T04:21:11.530

表列的顺序不会产生“无列”错误。如果您在运行应用程序至少一次后将该列添加到表中但没有增加*数据库版本*，这是导致此错误的一种方法。

这些列的顺序：

```
INSERT INTO groupTable(given_location, given_time, given_date, given_period, given_sport, given_name) ... 
```

取决于您编写`INSERT`语句时列的顺序，它不是基于`CREATE`命令的固定顺序。

# amazon-web-services - AWS 访问密钥可以包含逗号吗？

> ID：10771612
> 
> 赞同：3
> 
> 时间：2012-05-27T04:16:41.270
> 
> 标签：amazon-web-services

我正在构建一个使用 AWS 的原型。在我的原型中，我传递了纯文本字符串中的项目列表，其中两个项目是 AWS 访问密钥。我知道这将代表一个安全漏洞，所以我将重新审视这种方法，但这让我开始思考......

Access Key ID 和 Secret Access Key 中可以显示哪些值？我用逗号分隔列表，但如果我的键包含逗号，这将不会很好。如果它们可以包含逗号，但不能包含换行符，也许我会使用换行符。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T08:38:31.143

访问密钥 ID 是 20 个字母数字字符，例如 022QF06E7MXBSH9DHM02。

秘密访问密钥是 40 个字母数字斜杠加字符，例如 kWcrlUX5JEDGM/LtmEENI/aVmYvHNif5zB+d9+ct。

资料来源：[http ://alestic.com/2009/11/ec2-credentials](http://alestic.com/2009/11/ec2-credentials)

所以......您的密钥中不会接受逗号或换行符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T05:43:46.007

这是 AWS 提供的关于安全最佳实践的白皮书。[http://media.amazonwebservices.com/Whitepaper_Security_Best_Practices_2010.pdf](http://media.amazonwebservices.com/Whitepaper_Security_Best_Practices_2010.pdf)

此外，如果您需要在 EC2 虚拟机上获取安全凭证，最安全的处理方式是：

1.  使用 IAM 服务创建一个“用户”，其凭证仅限于*您*需要实例能够执行的任务。（这将防止被盗凭证危及您的整个 AWS 账户。）

2.  使用 EC2“实例配置文件”，这将使您的 EC2 实例能够通过[实例元数据](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/AESDG-chapter-instancedata.html)向其提供您的凭证。

3.  如果您出于某种原因无法使用实例配置文件，那么最好的办法是将包含您的凭证的文件通过[SCP传送到实例。](https://secure.wikimedia.org/wikipedia/en/wiki/Secure_copy)由于 SCP 利用 SSH，因此可以确保您的凭证在传输到实例的过程中受到保护。

我希望这有帮助！:)

# jquery - 如何编写检查代码以查看元素是父元素的第一个还是最后一个？

> ID：10771614
> 
> 赞同：7
> 
> 时间：2012-05-27T04:16:44.857
> 
> 标签：jquery

我有以下菜单，其中最多可以包含大约 50 个项目和两个链接，用户可以使用它们导航到上一个或下一个城市。在此示例中，我只显示了四个地址链接。

```
<ul id="menu">
   <li><a href="/City/0101004H">1</a></li>
   <li><a href="/City/0101004I">2</a></li>
   <li><a href="/City/0101004J">3</a></li>
   <li><a href="/City/0101004K">4</a></li>
</ul>

<a id="prev" href="#"><img width="16" height="16" src="/images/prev.png">Prev</a>
<a id="next" href="#"><img width="16" height="16" src="/images/next.png">Next</a> 
```

我对堆栈溢出有一些帮助，并提出了以下代码：

[小提琴](http://jsfiddle.net/MX94J/)

```
$("#menu").on('click', 'a[href^="/City"]', function(event) {
   event.preventDefault();
      var prev = $(this).parent().prev().find('a');
      var next = $(this).parent().next().find('a');
      $('#prev').prop('href', jQuery(prev).prop('href')).prop('title', 'City ' + jQuery(prev).text());
      $('#next').prop('href', jQuery(next).prop('href')).prop('title', 'City ' + jQuery(next).text())
}); 
```

当我单击其中一个菜单项时，这会将上一个和下一个的 href 设置为适当的值。它适用，但不适用于列表中的第一个和最后一个项目。我需要的是这个：

a）单击第一项时，我希望#prev 更改为：

```
<a id="prev" href="#"><img src="/images/noentry.png"></a> 
```

b）单击最后一项时，我希望#next 更改为：

```
<a id="next" href="#"><img src="/images/noentry.png"></a> 
```

有没有一种简单的方法可以在不添加太多额外代码的情况下做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-27T04:22:57.320

您可以使用以下方法测试元素是第一个子元素还是最后一个子元素：

```
$(this).parent().is(":first-child");
$(this).parent().is(":last-child"); 
```

如果`this`引用`a`被点击的对象，我们将通过测试其父项是否是第一个子项或最后一个子项，或两者都不是，来测试它是第一个链接还是列表中的最后一个链接。

此外，您可以根据这些值构建属性对象：

```
$("#menu").on('click', 'a', function(event) {

   // Prevent link from taking us anywhere
   event.preventDefault();

   // We'll be referencing the parent numerous times
   var parent = $(this).parent();

   // Determine the new properties of the PREV link
   var prev = parent.is(":first-child") 
       ? { html: '<img src="/images/noentry.png" />', 
           title: null } 
       : { html: '<img src="/images/prev.png" /> Prev', 
           title: 'City ' + parent.prev().text() } ;

   // Determine the new properties of the NEXT link
   var next = parent.is(":last-child") 
       ? { html: '<img src="/images/noentry.png" />', 
           title: null } 
       : { html: '<img src="/images/next.png" /> Next', 
           title: 'City ' + parent.next().text() } ;

    // Set new attribtes of both PREV and NEXT
    $("#prev").attr( prev );
    $("#next").attr( next );

});​ 
```

您可以根据需要进一步构建`#prev`和`#next`元素的属性。

演示：http: [//jsfiddle.net/MX94J/1/](http://jsfiddle.net/MX94J/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T04:21:22.160

如果一个元素`elt`是其兄弟元素中的第一个，`$(elt).prev().length`则为`0`.
如果一个元素`elt`是其兄弟元素中的最后一个，`$(elt).next().length`则为`0`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T04:26:35.663

您可以检查 jQuery 对象长度是否为零并采取相应措施：

```
$("#menu").on('click', 'a[href^="/City"]', function(event) {
      event.preventDefault();
      var pHref, nHref, pTitle, nTitle;
      var prev = $(this).parent().prev().find('a');
      var next = $(this).parent().next().find('a');
      if (prev.length == 0) {
          pHref = "#";
          pTitle = "";
      } else {
          pHref = prev.prop('href');
          pTitle = prev.prop('City' prev.text());
      }
      if (next.length == 0) {
          nHref = "#";
          nTitle = "";
      } else {
          nHref = next.prop('href');
          nTitle = next.prop('City' prev.text());
      }

      $('#prev').prop('href', pHref).prop('title', pTitle);
      $('#next').prop('href', nHref).prop('title', nTitle)
}); 
```

或具有本地功能的清洁工来完成工作：

```
("#menu").on('click', 'a[href^="/City"]', function(event) {

      function setProps(targetSelector, srcObject) {
          var href, title;
          if (srcObject.length) {
              href = srcObject.prop('href');
              title = srcObject.prop('title');
          } else {
              href = "#";
              title = "";
          }
          $(targetSelector).prop('href', href).prop('title', title);
      }

      event.preventDefault();
      var p = $(this).parent();
      setProps('#prev', p.prev().find('a'));
      setProps('#next', p.next().find('a'));
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T04:31:57.507

执行此操作的另一种方法是使用索引而不是属性：

[http://jsfiddle.net/QrE6u/1/](http://jsfiddle.net/QrE6u/1/)

```
var index = 0;
var nElements = $('#menu a').length;

$('#menu a').click(function(e) {
    e.preventDefault();
    index = $(this).parents('ul').find('a').index(this);
    if (index==0) {
       $('#prev img').attr('src', '/images/noentry.png');
    } 
    if (index==nElements-1) {
      $('#next img').attr('src', '/images/noentry.png');

    }
    alert(index);
});

    $('#prev').click(function() {
      index = (index - 1) % nElements;
      $('#menu a').eq(index).click();
    }); 
    $('#next').click(function() {
      index = (index + 1)% nElements;
      $('#menu a').eq(index).click();
    });
​ 
```

# ruby-on-rails - rails, 允许在路由 globbing 中出现异常

> ID：10771615
> 
> 赞同：1
> 
> 时间：2012-05-27T04:16:50.817
> 
> 标签：ruby-on-rails, routes, glob

我想知道是否可以在 Rails 中添加一个例外来路由 globbing。在我的 routes.rb 我有

```
 unless params[:not_found].eql? 'admin_data'
         match '*not_found', to: 'errors#error_404'
    end 
```

我试图强制执行自定义错误页面，除非用户访问

```
myapp.heroku.com/admin_data 
```

似乎无法获取 :not_found 作为参数。有没有办法在 routes.rb 中添加异常？

如果它有帮助，在我的errors_controller中我有..

```
 def error_404
        @not_found_path = params[:not_found]
  end 
```

谢谢你

**更新**。

我试着做

```
puts :not_found
puts %{not_found} 
```

但似乎也不起作用嗯......我试图看看我是否可以从用户那里检索参数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T06:20:51.597

在 routes.rb 中定义允许的路由并在应用程序控制器中为路由错误添加异常处理会更方便：

```
class ApplicationController < ActionController::Base
  rescue_from ActionController::RoutingError, :with => :render_not_found

  private
    def render_not_found 
      render_error_page_for(404)
    end

    def render_error_page_for(code)
      respond_to do |format|
      format.html { render :file => "#{Rails.root}/public/#{code}.html", :status => code, :layout => false }
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T06:31:35.290

我确实在我的应用程序控制器中捕获了我的异常处理，但不幸的是对于 admin_data，我没有在 routes.rb 中明确设置它。它在 gem 中的某个地方配置了命名空间或其他东西（我不太确定）

但从积极的方面来说……我终于修好了！我改变了我的glob并做了......

```
match '*not_found', to: 'errors#error_404', :constraints => {:subdomain => "!(admin_data.)"} 
```

忽略使用 admin_data 的所有内容。

# java - Java中的ServerSocket IP分配

> ID：10771617
> 
> 赞同：0
> 
> 时间：2012-05-27T04:16:59.337
> 
> 标签：java, serversocket

当您像这样在 Java 中创建 ServerSocket 时：

```
ServerSocket s = new ServerSocket(8888); 
```

主机IP是否自动绑定到它。还是必须使用三参数构造函数并指定IP？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T04:25:34.910

它没有必要，也许如果 PC 有多个网卡。 [服务器套接字](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/ServerSocket.html#ServerSocket%28int,%20int,%20java.net.InetAddress%29)

# networking - 连接到访客机器

> ID：10771618
> 
> 赞同：0
> 
> 时间：2012-05-27T04:17:23.703
> 
> 标签：networking, virtualbox

我一直在寻找一段时间，我似乎无法在任何地方找到答案，所以这里有问题。我有一个运行 Ubuntu 10.04 的 VirtualBox，目前路由为 Nat。我希望能够从我的 LAN 网络访问此服务器，但此时设置已关闭。我在 Ubuntu 中的 IP 显示为 10.0.2.0，这很奇怪，原因之一是我希望 192.168.1.X 数字显示为它的内部 IP 地址。第二个问题是，如果我尝试连接到 10.0.2.0 上的 SQL 或 Apache 服务器，它不会连接到它；在这一点上，我已经在互联网上搜索了大约 3 1/2 小时，但还没有接近解决方案，如果有人能发现问题或需要更多信息，请帮助我；在这一点上感到沮丧。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T05:46:12.727

我相信您需要使用“桥接网络”而不是 NAT 设置 VM，以便它出现并可以从您的 LAN 访问

[https://askubuntu.com/questions/52147/how-can-i-access-apache-on-virtualbox-guest-from-host](https://askubuntu.com/questions/52147/how-can-i-access-apache-on-virtualbox-guest-from-host)

# css - 流体布局中像素大小元素的精确中心 Twitter Bootstrap

> ID：10771619
> 
> 赞同：1
> 
> 时间：2012-05-27T04:17:34.017
> 
> 标签：css, twitter-bootstrap, fluid-layout

我对流体设计还比较陌生，所以希望我在经过一番摸索后不会错过这里的明显内容......

如何让一个 512x512 的 div 元素在容器流动的 Twitter Bootstrap 布局中水平居中。（顶部有可根据屏幕大小调整的流体元素。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T20:24:35.173

创建一个`fluid-row`容器来包装居中的元素。这将在您的`container-fluid`Apply auto 左右边距和 512px 的固定宽度内的某个位置为您的 div。

HTML：

```
 <div class="row-fluid">
    <div class="span12">
      <div class="centered512px">
         <h2>512 px Centered DIV</h2>
         <p>Donec id elit non mi porta gravida at eget metus.</p>
      </div>
    </div>
  </div> 
```

CSS：

```
.centered512px {
    width: 512px;
    margin: 10px auto;
    background-color: red;
} 
```

# android - 如何在 viewflipper 布局中的多个 TextView 中获取相同的内容？

> ID：10771620
> 
> 赞同：0
> 
> 时间：2012-05-27T04:18:07.510
> 
> 标签：android, android-layout, viewflipper, textview

这是视图鳍状肢xml

```
<ViewFlipper xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/flipper"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<include android:id="@+id/first"  layout="@layout/simp2" />
<include android:id="@+id/second"  layout="@layout/simp2adv" />
</ViewFlipper> 
```

simp2.xml 和 simp2adv.xml 都有一个文本视图。如何确保它们都显示相同的内容？我尝试为两个 textview 提供相同的 id，但只有一个被编辑。另一个被忽略。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T01:12:02.460

我通过在我的活动类中创建 switch 语句来解决它。例如：

```
switch (flipper.getDisplayedChild()) {
    case 0:
        focusEquationBox(R.id.equation2);
        var.dataBox.setText("");
        break;
    case 1:
        focusEquationBox(R.id.equation3);
        var.dataBox.setText("");
        break;
    case 2:
        focusEquationBox(R.id.equation4);
        var.dataBox.setText("");
        break;
    case 3:
        focusEquationBox(R.id.equation);
        var.dataBox.setText("");
        break;
    } 
```

和

```
void focusEquationBox(int id) {
    var.dataBox = (EditText) findViewById(id);
} 
```

这样做允许我只修改可见的 textView。当我翻转视图时，我将可见 textView 的内容保存到 String 变量中，然后加载到下一个可见 textView 中。

# api - 如何隐藏 SOAP Web 服务上的字段

> ID：10771631
> 
> 赞同：-1
> 
> 时间：2012-05-27T04:22:01.850
> 
> 标签：api, rest, soap

如何制作一个 API，以确保客户端不会显示与我的应用程序无关的用户字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T04:26:09.500

您不能将其隐藏在 WSDL 中。发现的全部意义在于确定这一点。

但是，您可以通过提供仅公开您想要的功能的客户端库来锁定您支持的 API。

您需要为您支持的每个平台创建一个。

# iphone - UIImageView 在其超级 UIView 中的当前位置

> ID：10771632
> 
> 赞同：1
> 
> 时间：2012-05-27T04:22:14.040
> 
> 标签：iphone, uiview, uiimageview

我已经动态地将 UIImageView 添加到 UIview，并通过触摸更改其位置，现在我想找到 UIImageView 的当前位置......有什么建议吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T04:24:22.000

使用视图的框架属性。

# css - 具有响应式布局的表单

> ID：10771653
> 
> 赞同：1
> 
> 时间：2012-05-27T04:27:54.123
> 
> 标签：css, twitter-bootstrap, responsive-design

为什么文本字段不遵守`.span1`规则？我能做些什么来修复它？

[http://jsfiddle.net/aurorius/aNRBn/](http://jsfiddle.net/aurorius/aNRBn/)

```
<html>
<head>
  <title></title>
</head>
<body>
  <div class="container-fluid">
    <div class="row-fluid">
      <div class="span12">
        <form class="form-horizontal">
          <fieldset>
            <div class="control-group">
              <label class="control-label" for="focusedInput">Focused input</label>
              <div class="controls">
                <input class="focused span1" id="focusedInput" type="text"
                value="This is focused" />
              </div>
            </div>
            <div class="control-group">
              <label class="control-label">Uneditable input</label>
              <div class="controls">
                <span class="span1 uneditable-input">Some value here</span>
              </div>
            </div>
          </fieldset>
        </form>
      </div>
    </div>
  </div>
</body>
</html>
​ 
```

解决它的一种快速方法是更改`row-fluid`​​为`row`. 但是如何在仍然使用`row-fluid`标签的同时修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T04:47:07.120

为什么不尝试使用输入而不是跨度？

```
<input class="uneditable-input span1" value="Some value here" /> 
```

[http://jsfiddle.net/uWbe9/](http://jsfiddle.net/uWbe9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T20:22:18.587

我认为这是一个 CSS 优先级问题 - 你的 width:100%; 正在被其他样式覆盖。要解决此问题，请向其添加另一个类以重新获得最高优先级，即：

```
.container-fluid .row-fluid [class*="span"] {
width: 100%;
[.. rest of styles here]
}​ 
```

在前面添加“.container-fluid”再次赋予它优先权。

演示：http: [//jsfiddle.net/lukem/HA26E/1/](http://jsfiddle.net/lukem/HA26E/1/)

CSS优先规则：http://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/

# asp.net-mvc - 什么是我的任务的最佳选择（wcf、web-service、win 服务）

> ID：10771658
> 
> 赞同：1
> 
> 时间：2012-05-27T04:29:10.703
> 
> 标签：asp.net-mvc, wcf, web-services, windows-services

现在，我有一个 ASP.NET MVC 应用程序。我在 ASP.NET MVC 应用程序中有几种方法，它们从外部 Windows 桌面（不是我的）应用程序（通过 tcp/ip）检索数据。现在我想将此方法移至外部服务（程序）以及其他方法（发送电子邮件和其他现在在单独线程中运行的进程）。这是我第一次使用 Web 服务/wcf。而且，有什么更好的方法来做到这一点：wcf、Web 服务、win 服务？
谢谢

**更多详细信息：**
在 ASP.NET MVC 应用程序中，我从外部桌面（不是我的）应用程序（通过 TCP/IP）获取各种信息。例如在这个程序中创建事件：电影、体育、剧院和他们的时间表。此外，还有多少座位留给特定的会议等等。
可以通过各种方式获得不同类型的信息。有时，我每分钟检查一次是否有更新（事件列表、时间表）。有时我需要每一分钟来获取其他信息以进行 cahcing（还有多少座位可供会议使用）。因此，我有许多任务是在单独的线程中执行的，方法如下所述。

对于来自外部 win 程序的更新，我使用以下方法：

```
protected void Application_Start()
{
    AddTask("UpdateFromExternalProgram", "60", 60);
}

private static CacheItemRemovedCallback _onCacheRemove = null;
public static void AddTask(string name, string value,int seconds)
{
    _onCacheRemove = new CacheItemRemovedCallback(CacheItemRemoved);
    HttpRuntime.Cache.Insert(name, value, null,
                       DateTime.Now.AddSeconds(seconds), Cache.NoSlidingExpiration,
                       CacheItemPriority.NotRemovable, _onCacheRemove);
}

    private static  void CacheItemRemoved(string key, object value, CacheItemRemovedReason reason)
   {
        if (reason == CacheItemRemovedReason.Expired)
        {               
               AddTask(key, value.ToString(), Convert.ToInt32(value));
               GetUpdatesFromExternalProgram();               
        }
   }
private static void GetUpdatesFromPremiera()
{
    //creates TCP/IP client, send request, and parse response
} 
```

此外，在一个单独的线程中发送站点上的所有电子邮件（注册、反馈、其他信息）：

```
ThreadPool.QueueUserWorkItem(new WaitCallback(SendEmailInSeparateThread), senderInfo); 
```

而且，我想将此功能移至其他应用程序：wcf、web 服务或 win 服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T06:41:44.587

您应该[避免](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)在 ASP.NET 应用程序中实现重复的后台任务。Windows 服务是实现此功能的更好选择。

# javascript - 使用 javascript 访问 class=column

> ID：10771660
> 
> 赞同：0
> 
> 时间：2012-05-27T04:29:28.317
> 
> 标签：javascript, dom

如何使用 javascript 而不是使用 jquery 访问 class=column

```
<div id="columns">
   <div class="column"><header>A</header></div>
   <div class="column"><header>B</header></div>
   <div class="column"><header>C</header></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T04:40:40.997

可能是这样的。你会想把它放在一个`window.onLoad`or`onclick`或其他一些函数中以使其工作，但你明白了吗？

```
divs = document.getElementsByTagName("div"); 
for( var i = 0; i < divs.length; i++ ) 
{
    if( divs[i].className == "column" ||
        divs[i].className == "another-class" )  {
    //Do something here
    }
} 
```

要搜索可能有多个类的元素，请尝试：

[这里的例子](http://jsfiddle.net/leereichardt/nrakE/)

```
divs = document.getElementsByTagName("div"); 
for( var i = 0; i < divs.length; i++ ) 
{
    var classes=divs[i].className.split(" ");
    if( searchStringInArray( classes, "column") ||
        searchStringInArray( classes, "test2") )  {
            divs[i].innerHTML="Changing";
    }
}

function searchStringInArray (stringArray, search) {
    for (var j=0; j<stringArray.length; j++) {
        if (stringArray[j].match ("(^|\s)"+search+"(?=\s|$)")) return true;
    }
    return false;
}
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T04:43:48.497

在除旧版 Internet Explorer 之外的几乎所有浏览器中，您都可以使用

```
document.getElementById('columns').getElementsByClassName('column'); 
```

由于 IE<9 浏览器没有`getElementsByClassName`，您可以遍历子节点并测试它们是否

```
function getColumnDivs() {
    var results = new Array();
    var nodes = document.getElementById('columns').children;

    for (var i = 0; i < nodes.length; i++)
       if (typeof nodes[i].tagName != "undefined" &&
           nodes[i].tagName.toLowerCase() == "div" &&
           nodes[i].className.className == "column") {

           results.push(nodes[i]);
       }

    return results;
} 
```

测试的三个条件是

*   它有标签名吗？（-> 它甚至是一个元素吗？）
*   是`<div>`吗？
*   它有`column`课吗？

虽然最后一个条件只有在它**只有**那个类时才有效，但这可能仍然适用于你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T04:38:43.647

有几种方法。最简单的是使用 querySelectorAll('.column') 但它是新的，所以它只能在现代浏览器中工作。当然，其他人会发布一个答案，解释如何以更兼容的方式进行操作。

# ruby-on-rails-3 - 如何为 Simple Form Bootstrap gem 使用 input-append 类？

> ID：10771661
> 
> 赞同：4
> 
> 时间：2012-05-27T04:30:05.203
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, simple-form

我想我错过了。[simple_form-b​​ootstrap](https://github.com/rafaelfranca/simple_form-bootstrap)[的示例应用](http://simple-form-bootstrap.plataformatec.com.br/)程序从未展示过如何使用. 我尝试了其他几种方法，但没有奏效。`input-append`

```
<div class="controls">
 <div class="input-append">
  <input type="text" size="16" id="appendedInput" class="span2">
   <span class="add-on">.00</span>
 </div>
   <span class="help-inline">Here's more help text</span>
</div> 
```

我需要这个，以便显示与 Bootstrap 一起使用的错误消息，并且我能够以某种方式设计我的表单。我将如何在[水平形式上](http://twitter.github.com/bootstrap/base-css.html#forms)`add-on`使用and ？`help-inline`

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T11:09:57.700

好的，简单形式的引导程序确实支持它。我应该看着`append`就像`prepend`。例如：

```
<%= simple_form_for(@article, :html => { :class => 'form-horizontal' }) do |f| %>
  <%= f.input :name, :wrapper => :append, :class => "inline" do %>
   <%= f.input_field :name %>
    <%= content_tag :span, "?", :class => "add-on abbn" %>
   <% end %>
   <div class="form-actions">
    <%= f.button :submit, :class => 'btn-primary' %>
   </div>
<% end %> 
```

# javascript - 要求推荐在 Web 浏览器上渲染网格的起点？

> ID：10771662
> 
> 赞同：0
> 
> 时间：2012-05-27T04:30:07.020
> 
> 标签：javascript, browser, rendering, mesh

我正在研究计算流体动力学 (CFD)，其中网格是任何 CFD 分析的第一步。您可以在 Google 上搜索 CFD 网格并大致了解 CFD 网格的外观。

我正在考虑如何在传统上仅在本地计算机/工作站上完成的 Web 浏览器上呈现此网格。

你有什么建议我可以从哪些 javascript 开始并添加功能来处理这个问题？（我不确定 Google 图表 API 是否是一个不错的起点。）或者如果我已经有一个可以生成网格文件（包括它的点面等）的 C++ 代码，那么它可以在什么时候完成后端，javascripts 可以读取这个网格文件并在网络浏览器上呈现它？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T04:56:30.263

如果您正在寻找使用 javascript 的 3D 渲染，您可以在网络上搜索各种引擎，例如[three.js](https://github.com/mrdoob/three.js/)。

请注意，在某些硬件中，高度复杂的网格渲染速度可能会很慢，甚至是不可能的。

# amazon-ec2 - 将 32 位 EC2 实例升级为 64 位实例

> ID：10771663
> 
> 赞同：-1
> 
> 时间：2012-05-27T04:30:29.487
> 
> 标签：amazon-ec2, amazon-web-services

我们可以使用 32 位实例的 AMI 进行这种升级吗？我在包括 stackoverflow 在内的网站上看到过这样的讨论，但现在有可能吗？

到目前为止，我认为我们将不得不再次做所有事情（创建一个新的大型实例（64 位）并再次安装所有应用程序）？当架构发生变化时不是这种情况吗？

编辑 ：

例如，我想将我的 32 位 t1.micro 实例升级到大型（64 位）。我的操作系统是 Linux，上面有 LAMP 和 Tomcat/Java。我的意思是，我有一个微型实例的 AMI，所以可以使用它创建/启动一个大型实例吗？还是有其他方法可以做到（这样我就可以避免再次进行所有的 LAMP、Tomcat/Java 设置）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T04:32:49.190

这似乎没有多大意义。EC2 是一个按需环境，如果需要，只需生成一个 64 位服务器。您是否在问如何将 32 位操作系统安装升级到 64 位？这将取决于您使用的操作系统。如果是 Linux，宽泛的答案是“可以完成，但不能自动完成”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T20:15:28.970

据我所知，您将不得不在新的 64 位实例上重新安装/重新配置您的应用程序……没有任何从 32 位架构到 64 位架构的迁移路径……

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T04:38:11.833

我遇到了与您类似的问题，尽管我可能怀疑它们是否容易浪费您的时间。我最终只是再次重新配置了我的新服务器，但有一个很大的好处，因为我非常懒惰，这次复制了我使用的所有命令并将它们保存在安装脚本中。

现在由于这个安装脚本，我使用 32 位还是 64 位都没有关系，我只需启动选择的 linux 发行版并复制我的脚本并运行它，因为所有包都是同名的。

这可能不是您要寻找的答案，但您的简单选择是从一开始就坚持使用 64 位操作系统或保存所有命令（如果它不是太多运行`history`并查看它们）然后通过脚本运行它们。

# ruby - 在中间人中，如何设置变量？

> ID：10771664
> 
> 赞同：0
> 
> 时间：2012-05-27T04:30:30.317
> 
> 标签：ruby, middleman

我已经开始尝试使用中间人和红宝石。

示例布局具有以下字符串：

```
<body class="<%= page_classes %> 
```

在任何给定页面上，如何设置“page_class”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T01:28:50.040

`<%= page_classes %>`是 Middleman 的默认视图助手之一，并根据当前页面的文件名和目录返回一个字符串，例如

*   因为`/index.html`它返回`index`
*   因为`/folder1/index.html`它返回`folder1 folder1_index`
*   因为`/folder1/folder2/page.html`它返回`folder1 folder1_folder2 folder1_folder2_page`

依此类推（以上示例改编自[Middleman 的 'page_classes' 文档](https://www.relishapp.com/middleman/middleman-core/docs/built-in-page-classes-view-helper)）。

使用您发布的示例布局中的片段，您可以设置页面样式或[通过 CSS 突出显示相应的导航项](http://hicksdesign.co.uk/journal/highlighting-current-page-with-css)。

*编辑：*要为 Marek 提供的答案添加更多选项，您可以使用

*   “[本地 YAML 数据](http://middlemanapp.com/metadata/local-data/)”或
*   “[单个页面配置（YAML Frontmatter）](http://middlemanapp.com/metadata/yaml-frontmatter/) ”

两者都在 Middleman 的网站/文档中进行了描述。
请注意，通过 YAML Frontmatter 设置的变量也可以在您的[布局](http://middlemanapp.com/templates/templates-layouts-partials/)中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T21:48:26.210

您可以在 config.rb 中使用 @ 符号定义变量，例如：

```
@var = ["something", "here", ...] 
```

并通过在 config.rb 中添加使其对模板可见：

```
set :var, @var 
```

如果它是一个方法，你应该在 config.rb 的 helper 部分下定义它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-19T15:06:41.000

您可以在 config.rb 中定义变量

```
set :var, ["something", "here"] 
```

在您的模板中，您将可以使用

```
config[:var] 
```

# c# - 并行线程和控制？

> ID：10771667
> 
> 赞同：0
> 
> 时间：2012-05-27T04:30:45.310
> 
> 标签：c#, winforms, multithreading, .net-4.0, thread-safety

我有这样的功能：

```
private void GetRSS(int start, int end)
{
    for (int i = start; i < end; i++)
    {
        string content = string.Empty;
        using (WebClient client = new WebClient())
        {
            //some code here get html content
        }
        // some code here parse content
    }
} 
```

为了最大限度地减少运行以获取所有需要的数据的时间，我想同时以不同的范围运行该函数 4 次，然后合并结果或使用线程安全列表或字典。

我的问题是，我怎样才能在 4 个单独的线程中运行此函数，并且仍然能够控制其中一个线程是否仍在工作或不知道它何时结束？

我的第一个想法是声明每个线程：

```
private Thread _controler;
private Thread _worker1;
private Thread _worker2;
private Thread _worker3;
private Thread _worker4;
private bool _isRunning = false; 
```

然后我将启动控制器并从控制器内部调用每个线程来执行上面的函数并跟踪来自控制器的每个线程，例如：

```
private void _ControlerStart()
{
    _worker1 = new Thread(GetRSS);
    try
    {
        _worker1.Start(1, 7711);
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.ToString());
    }
    // repeat the above to all the 4 threads
    _isRunning = true;
    while (_isRunning)
    {
        if (_worker1.ThreadState != ThreadState.Running && _worker2.ThreadState != ThreadState.Running && _worker3.ThreadState != ThreadState.Running && _worker4.ThreadState != ThreadState.Running)
            _isRunning = false;
    }
    MessageBox.Show("Done");
} 
```

在思考上面的所有这些混乱时，我意识到这不是做我想做的事情的最佳方式，我在这里;)。

**如何管理超过 1 个线程来运行相同的功能，同时又能够知道每个线程何时结束关闭或保存或合并数据或执行我在主线程中剩下的任何事情？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T04:47:20.650

```
private static void GetRSS(int start, int end)
{
    var bunchSize = (end - start) / 4 + 1;

    var threads = new List<Thread>();

    for (int i = 0; i < 4; i++)
    {
        var currStart = start + i * bunchSize;
        var currEnd = currStart + bunchSize;

        if (currEnd > end)
        {
            currEnd = end;
        }

        var thread = new Thread(() =>
                                    {
                                        // thread logic using currStart and currEnd

                                        string content = string.Empty;
                                        using (WebClient client = new WebClient())
                                        {
                                            //some code here get html content
                                        }
                                        // some code here parse content
                                    });

        threads.Add(thread);
        thread.Start();
    }

    foreach (var thread in threads)
    {
        thread.Join();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T04:35:18.640

是否有不使用 TPL 的特定理由？[http://msdn.microsoft.com/en-us/library/dd460717.aspx](http://msdn.microsoft.com/en-us/library/dd460717.aspx)

您可能已经注意到，提供的代码的问题在于它不是声明性的。你是在告诉机器如何去做，而不是你想要做什么。

*编辑*在我的评论中，我建议使用[以下代码。](https://stackoverflow.com/questions/4431743/map-reduce-with-f-agents/4438256#4438256)

在OP的评论中，我看到

> 我有 30k 页要检索，每页有 10 条记录，所以我想将 30k 页沿着 4 个线程拆分，每个页面在下载成字符串后需要解析

第一部分定义了要执行的动作，第二部分清楚地描述了 PC 的手持操作。我的建议是停止握 PC 的手，并考虑要执行的高级操作。

1.  要求 N 页
2.  当任何一页可用时，使用结果
3.  当所有 N 个页面都可用并被使用时，整理该结果

这需要异步编程。在 .NET 4.0 中，它主要在 F# 2.0 下可用。C# 4.0 可以使用带有延续的 APM，但我不推荐它。

C# vNext 对此提供支持，请参阅 VS 2012。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T09:36:49.200

在任务方式中，您可以使用[TaskFactory.ContinueWhenAll 方法](http://msdn.microsoft.com/en-us/library/Dd321258%28v=vs.100%29.aspx)在所有任务完成后执行某些操作。

```
 private void ButtonOnClick(object sender, RoutedEventArgs routedEventArgs) {
        const int n = 15;
        var tasks = new Task<int>[n];
        for (int i = 0; i < n; i++) {
            tasks[i] = Task.Factory.StartNew(
                () => {
                    Thread.Sleep(500);
                    return 100;
                });
        }

        Task.Factory.ContinueWhenAll(
            tasks,
            ts => { text.Text = string.Format("Sum: {0}", ts.Sum(task => task.Result)); },
            CancellationToken.None,
            TaskContinuationOptions.None,
            TaskScheduler.FromCurrentSynchronizationContext());
    } 
```

在这里，我使用[TaskScheduler.FromCurrentSynchronizationContext()](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.fromcurrentsynchronizationcontext.aspx)来在 UI 线程中执行延续任务。

# ios - ios - 如何以编程方式设置图层？

> ID：10771668
> 
> 赞同：0
> 
> 时间：2012-05-27T04:31:12.967
> 
> 标签：ios, interface-builder

.

你好，

在界面生成器中，设置项目的顺序非常容易，就像在图层中一样，通过将它们一层一层地拖动。

我没有成功在代码中复制它。

我需要添加什么线才能产生类似的效果？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T04:45:19.310

引用[另一篇文章](https://stackoverflow.com/a/4663526/1388247)，有很多有用的方法可以达到这个目的：

```
@property(nonatomic,readonly) UIView *superview;
@property(nonatomic,readonly,copy) NSArray *subviews;

- (void)removeFromSuperview;
- (void)insertSubview:(UIView *)view atIndex:(NSInteger)index;
- (void)exchangeSubviewAtIndex:(NSInteger)index1 withSubviewAtIndex:(NSInteger)index2;

- (void)addSubview:(UIView *)view;
- (void)insertSubview:(UIView *)view belowSubview:(UIView *)siblingSubview;
- (void)insertSubview:(UIView *)view aboveSubview:(UIView *)siblingSubview;

- (void)bringSubviewToFront:(UIView *)view;
- (void)sendSubviewToBack:(UIView *)view; 
```

他们的名字是相当不言自明的。您特别感兴趣的可能是 insertSubview:AtIndex、insertSubview:belowSubview（或更高版本）以及bringSubviewToFront 和sendSubviewToBack。这些将允许您构建视图，而无需以任何特定顺序添加它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T04:33:41.777

只需以相反的顺序子查看它们（如果你想在顶部，子视图最后）。还有一些功能可以在参考子视图之前或之后插入子视图。

# android - Android - 移动视图

> ID：10771669
> 
> 赞同：0
> 
> 时间：2012-05-27T04:31:49.023
> 
> 标签：android, android-animation

我正在尝试使用 TranslateAnimation 将充当背景的视图从当前位置移动到指定位置（单击按钮的位置），但是，它开始从某个随机位置移动框。请参阅下面的代码。

布局 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ScrollView
    android:layout_width="match_parent"
    android:layout_height="100dp"
  >

    <FrameLayout
        android:id="@+id/frame1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:id="@+id/linearLayout_test"
            android:layout_width="100dp"
            android:layout_height="100dp"
            android:background="#E02111" >
        </LinearLayout>

        <TableLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <TableRow
                android:id="@+id/tableRow1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >

                <Button
                    android:id="@+id/button1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Button 1" />

                <Button
                    android:id="@+id/button2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Button 2" />
            </TableRow>

            <TableRow
                android:id="@+id/tableRow2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <Button
                    android:id="@+id/button3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Button 3" />

                <Button
                    android:id="@+id/button4"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Button 4" />
            </TableRow>

            <TableRow
                android:id="@+id/tableRow3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <Button
                    android:id="@+id/button5"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Button 5" />

                <Button
                    android:id="@+id/button6"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Button 6" />
            </TableRow>
        </TableLayout>
    </FrameLayout>
</ScrollView>

</LinearLayout> 
```

Java 代码：

```
import android.app.Activity;
import android.os.Bundle;
import android.view.*;
import android.view.View.OnClickListener;
import android.view.animation.Animation;
import android.view.animation.TranslateAnimation;
import android.widget.*;

public class TestAnimation extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.overlapping_views);
    }

    @Override
    public void onWindowFocusChanged(boolean hasFocus) {
        super.onWindowFocusChanged(hasFocus);

        //the red box
        View box = findViewById(R.id.linearLayout_test);

        //Initially move the background box to button 1 
        Button button1 = (Button) findViewById(R.id.button1);
        int[] button1Loc = new int[2]; 
        button1.getLocationOnScreen(button1Loc);
        int[] boxLocation = new int[2];
        box.getLocationInWindow(boxLocation);
        box.setLayoutParams(new FrameLayout.LayoutParams(button1.getWidth() + 1,button1.getHeight() + 1));
        TranslateAnimation animation = new TranslateAnimation( 0, boxLocation[0] - button1Loc[0] , 0,boxLocation[1] - button1Loc[1]);
        animation.setFillAfter(true);
        animation.setDuration(400);
        box.startAnimation(animation);  

        //add click handler on all buttons
       Button button = (Button)findViewById(R.id.button1);
       button.setOnClickListener(buttonClick);
       button = (Button)findViewById(R.id.button1);
       button.setOnClickListener(buttonClick);     
       button = (Button)findViewById(R.id.button2);
       button.setOnClickListener(buttonClick);
       button = (Button)findViewById(R.id.button3);
       button.setOnClickListener(buttonClick);
       button = (Button)findViewById(R.id.button4);
       button.setOnClickListener(buttonClick);
       button = (Button)findViewById(R.id.button5);
       button.setOnClickListener(buttonClick);
       button = (Button)findViewById(R.id.button6);
       button.setOnClickListener(buttonClick);

    }
    // This is the problem - it should start moving the box from its current location to the clicked button's location
    // right now it starts moving it from somewhere random :)
    private OnClickListener buttonClick = new OnClickListener() {
        public void onClick(View v) {
            View box = findViewById(R.id.linearLayout_test);
            int[] buttonLoc = new int[2];
            v.getLocationOnScreen(buttonLoc);

            int[] boxLocation = new int[2];
            box.getLocationOnScreen(boxLocation);

             TranslateAnimation animation = new TranslateAnimation(
                        Animation.ABSOLUTE, 0,Animation.ABSOLUTE, buttonLoc[0] - boxLocation[0],
                        Animation.ABSOLUTE, 0,Animation.ABSOLUTE, buttonLoc[1] - boxLocation[1]
                        );
            animation.setFillAfter(true);
            animation.setDuration(400);
            box.startAnimation(animation);

        }

    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T06:22:31.833

这很简单。您正在传递一些平移向量 insted 初始位置和最终位置。请注意，参数名称是 xValue 而不是 xDelta 就像在 TranslateAnimation 的其他构造函数中一样，并且您使用的不是本地的绝对坐标。

使固定：

```
TranslateAnimation animation = new TranslateAnimation( 
    Animation.ABSOLUTE, boxLocation[0], Animation.ABSOLUTE, buttonLoc[0] , 
    Animation.ABSOLUTE, boxLocation[1], Animation.ABSOLUTE, buttonLoc[1]); 
```

编辑：

```
private int[] oldPos = new int[2];
private OnClickListener buttonClick = new OnClickListener() {
    public void onClick(View v) {
    View box = findViewById(R.id.linearLayout_test);

    int[] newPos = new int[2];
    v.getLocationInWindow(newPos);
    newPos[1] -= box.getTop();
    TranslateAnimation animation = new TranslateAnimation(
            Animation.ABSOLUTE, oldPos[0], 
            Animation.ABSOLUTE, newPos[0], 
            Animation.ABSOLUTE, oldPos[1],
            Animation.ABSOLUTE, newPos[1]);

    oldPos = newPos;

    animation.setFillAfter(true);
    animation.setDuration(400);
    box.startAnimation(animation);
} 
```

android中存在不连贯性。Animation.ABSOLUTE 不考虑状态栏高度，但 getLocationInWindow 和 getLocationOnScreen 考虑。尝试自己修复它。

请记住，此动画不会移动 View 而是更新 Matrix，因此 linearLayout_test 始终返回相同的位置。

# macos - 在 OSX 上编译自动天赋插件

> ID：10771671
> 
> 赞同：0
> 
> 时间：2012-05-27T04:32:37.440
> 
> 标签：macos, makefile, audacity

我正在尝试编译自动天赋插件 (http://tombaran.info/autotalent.html) 以用作 Mac 上的 LADSPA Audacity 插件。我在 linux 上正确地遵循了指示，但我想知道如何为 Mac 构建一个版本，如果可能的话。

我下载了 0.2 源代码，然后运行“make”。但是我收到以下错误：

```
gcc -I. -O3 -Wall -fomit-frame-pointer -fstrength-reduce -funroll-loops -ffast-math -c -fPIC -DPIC autotalent.c mayer_fft.c
gcc -nostartfiles -shared -Wl,-Bsymbolic -lc -lm -lrt -o autotalent.so autotalent.o mayer_fft.o
ld: unknown option: -Bsymbolic
collect2: ld returned 1 exit status
make: *** [autotalent.so] Error 1 
```

因此没有生成 .so 文件，但已生成 .o 文件。这是一个容易解决的问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T11:59:24.727

OSX has a different form of shared library to Linux. See [Apple's Dynamic Library Programming Topics](https://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/DynamicLibraries/100-Articles/CreatingDynamicLibraries.html#//apple_ref/doc/uid/TP40002073-SW1).

To create a shared library the command is like

```
gcc -dynamiclib  autotalent.c mayer_fft.c -current_version 1.0 -compatibility_version 1.0 -fvisibility=hidden -o lib autotalent.A.dylib 
```

# php - PHP 我怎么能回显这个 html？

> ID：10771680
> 
> 赞同：3
> 
> 时间：2012-05-27T04:35:22.383
> 
> 标签：php, html, echo

```
<option value="Bob's Weekend">Bob's Weekend</option> 
```

我难住了。撇号混淆了脚本和我自己。我怎么能在 PHP 中回显这个？

```
echo '<option value="Bob's Weekend">Bob's Weekend</option>'; //syntax error
echo '?><option value="Bob's Weekend">Bob's Weekend</option><?php ';?> //syntax error 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-27T04:38:46.440

首先，您可以退出 PHP 并放入文字 HTML：

```
?><option value="Bob's Weekend">Bob's Weekend</option><?php 
```

其次，您可以使用反斜杠：

```
echo '<option value="Bob\'s Weekend">Bob\'s Weekend</option>'; 
```

或者

```
echo "<option value=\"Bob's Weekend\">Bob's Weekend</option>"; 
```

最后，您可以使用此处的文档：

```
echo <<<END
<option value="Bob's Weekend">Bob's Weekend</option>
END; 
```

我会选择第一个选项，我自己。在 PHP 代码中执行 's 似乎有点愚蠢，因为`echo`您所要做的就是退出 PHP 并且所有内容都会自动回显。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T04:38:07.247

使用双引号并转义文字：

```
echo "<option value=\"Bob's Weekend\">Bob's Weekend</option>"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-27T04:38:13.540

```
<?php

echo '<option value="Bob\'s Weekend">Bob\'s Weekend</option>'; 
```

为我工作。您所需要的只是一个额外的转义字符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T04:37:48.597

尝试这个

```
echo '<option value="Bob\'s Weekend">Bob\'s Weekend</option>'; 
```

# javascript - 如何从事件中获取原始元素？

> ID：10771681
> 
> 赞同：4
> 
> 时间：2012-05-27T04:35:31.550
> 
> 标签：javascript, events, addeventlistener

我目前正在`addEventListener`使用`select`：

```
<select>
    <option value="Apple">Mac</option>
    <option value="Microsoft">Windows</option>
</select>

document.querySelector("select").addEventListener("change",function(ev){
    //do something here...
}, false); 
```

但我不知道如何从`event`.

PS：我不想这样做：

```
<select onchange="func(event,this)"> 
```

这只会弄乱HTML ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T04:37:22.537

导致事件的元素`this`在事件处理程序中自动分配。它也在传递给`addEventListener()`回调的事件数据结构中，在您的示例中是`ev.target`.

```
document.querySelector("select").addEventListener("change",function(ev){
    //do something here...
    // you can use the value of this to access the object that 
    //    is responding to the event
    // you can also look in the event data structure for 
    //    other items like ev.target
}, false); 
```

[您可以在此处查看](https://developer.mozilla.org/en/DOM/event)事件对象的所有成员。

# javascript - 自定义 jQuery 插件，有时想在 DOM 对象上运行，有时不

> ID：10771684
> 
> 赞同：0
> 
> 时间：2012-05-27T04:36:57.703
> 
> 标签：javascript, jquery, jquery-plugins

在我们正在创建的网站上，我们希望将一些通用的 javascript 功能封装到我们自己的 util jQuery 插件中。我对创建自定义 jQuery 插件还很陌生，所以我发现[这个页面](http://docs.jquery.com/Plugins/Authoring)是一个很好的资源。我基本上复制了那里的示例（当然是我们自己的功能），但我发现我们有一些不需要在任何特定 DOM 对象上运行的方法。所以，我发现自己只是在这样的文档上进行选择：

```
$(document).myPlugin("myFunction", "my", "params"); 
```

我不喜欢我只是选择了在我的函数中根本没有使用的任何随机元素，所以我搜索了一些并找到[了这个问题](https://stackoverflow.com/questions/5764217/creating-custom-jquery-function-without-selector-prerequisite)。这是很好的信息，但这是一个永远不需要 DOM 元素来运行函数的情况。我想也许我可以把两者结合起来。所以，我最初有这个：

```
(function($) {
var methods = {
//... all my methods
}

$.fn.myPlugin = function(method) {
    // Method calling logic
    if (methods[method])
    {
        return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
    }
    else if (typeof method === 'object' || !method)
    {
        return methods.init.apply(this, arguments);
    }
    else
    {
        $.error('Method ' + method + ' does not exist on jQuery.myPlugin');
    }
};
})(jQuery); 
```

我只是将其更改为：

```
(function($) {
var methods = {
//... all my methods
}

$.myPlugin = $.fn.myPlugin = function(method) {
    // Method calling logic
    if (methods[method])
    {
        return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
    }
    else if (typeof method === 'object' || !method)
    {
        return methods.init.apply(this, arguments);
    }
    else
    {
        $.error('Method ' + method + ' does not exist on jQuery.myPlugin');
    }
};
 })(jQuery); 
```

它似乎按我想要的方式工作。当我想调用不需要 DOM 元素的函数时，我只需调用`$.myPlugin("myFunction1", "my", "params");`，而当我确实想调用特定 DOM 元素上的函数时，我会调用`$("#elementId").myPlugin("myFunction2", "my", "params");`

在这个冗长的解释之后，我的问题是，这样做时是否有任何潜在的陷阱或问题需要关注？就像我说的那样，它对我很有用，但我想知道这样做是否有任何问题或任何潜在问题？如果有更好的方法来完成同样的事情，请分享。谢谢！

# c# - 如何定位 Outlook 2007/2010 VSTO 上下文菜单按钮？

> ID：10771686
> 
> 赞同：4
> 
> 时间：2012-05-27T04:37:04.190
> 
> 标签：c#, outlook, ms-office, vsto

我有一个 Outlook 2007/2010 加载项，已成功将上下文菜单按钮添加到资源管理器。按钮本身显示正确且工作正常，但是我无法将其放置在上下文菜单上的内置控件上方，它始终添加到底部。我使用 VSTO 3.0 为 Outlook 2003 加载项创建了相同的按钮，并且相同的代码在上下文菜单顶部的“打开”按钮上方创建了一个按钮。

我的代码如下

```
 void Application_ItemContextMenuDisplay(CommandBar CommandBar, Selection Selection)
    {
        if (Selection.Count != 1) return;

        CommandBarControl rootButton = CommandBar.Controls.Add(MsoControlType.msoControlButton, Type.Missing, "Create Heat Call", 1, Type.Missing);

        CommandBarButton button = (CommandBarButton)rootButton;

        button.BeginGroup = true;
        button.Tag = "CreateHeatCall";
        button.Caption = "Create Heat Call";
        button.Style = MsoButtonStyle.msoButtonIconAndCaption;
        button.Visible = true;

        button.Picture = GetImage();
        button.Mask = GetImageMask();

        selection = Selection;

        ((CommandBarButton)rootButton).Click += new _CommandBarButtonEvents_ClickEventHandler(ThisAddIn_Click);

    } 
```

我尝试过使用 CommandBar.Controls.Add() 方法的“Before”参数，但无济于事。我怀疑问题在于 ItemContextMenuDisplay 事件是在其他内置控件添加到上下文菜单之前触发的，而 Outlook 2003 加载项按钮是在由 Explorer.CommandBars 触发的方法中创建的。 VSTO 4.0 Explorer 对象中不存在的 OnUpdate 事件。

是否可以在 VSTO 4.0 for Outlook 07/10 中添加不在上下文菜单底部的按钮？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T09:11:19.093

在 Outlook 2003 和 2007 中，上下文菜单基于 CommandBar，并使用您在上面提供的代码创建。在 Outlook 2010 中，上下文菜单现在基于功能区，并且通常使用 XML 声明。

从[自定义 Office 2010 中的上下文菜单](http://msdn.microsoft.com/en-us/library/ee691832.aspx)：

> 在 Microsoft Office 2010 之前，在 Microsoft Office Fluent Ribbon 用户界面 (UI) 中自定义上下文（右键单击）菜单的唯一方法是使用 CommandBars 解决方案。在 Office 2010 中，您可以自定义内置上下文菜单，就像您可以自定义功能区 UI 的其他组件一样。这种基于 XML 的上下文菜单可扩展性模型基于熟悉的功能区可扩展性模型。这意味着您可以使用当前用于自定义功能区 UI 的相同 XML 标记和回调。此外，通过功能区 UI 可扩展性启用上下文菜单自定义不会“破坏”以前编写的命令栏解决方案。

Outlook 2010 支持向后兼容基于 CommandBar 的控件，但有一些注意事项；无法定位控件可能是其中之一。

我的建议是让您的加载项检测正在运行的 Outlook 版本是 2003/2007 还是 2010，如果是后者，请创建基于功能区的控件而不是基于 CommandBar 的控件。您将需要研究如何相应地调整您的代码；例如，可以通过在元素中声明`insertBeforeMso`属性来执行定位。`<button>`

PS 我鼓励您考虑切换到商业第三方产品[Add-in Express for Microsoft Office 和 .NET](http://www.add-in-express.com/add-in-net/index.php)以扩展 Office 应用程序的 UI；它大大简化了 VSTO 的过程。您仍然需要创建一个单独`ADXContextMenu`的（基于 CommandBar）和`AdxRibbonContextMenu`（基于 Ribbon），但该过程几乎可以完全使用直观的视觉设计器来完成。

# playframework-1.x - 使用 play 1.2.4 框架发送电子邮件

> ID：10771697
> 
> 赞同：0
> 
> 时间：2012-05-27T04:39:05.657
> 
> 标签：playframework-1.x

我正在尝试在 play 1.2.4 框架上使用 gmail smtp 服务器发送电子邮件，但电子邮件仅在顾问中打印。有人可以请告诉如何使它工作。

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T10:25:07.410

您没有指定，但您很可能在`DEV`模式下对其进行测试。在这种情况下`smtp.host`in`application.conf`设置为`mock`，您需要更改它。

这[在文档中有所描述](http://www.playframework.org/documentation/1.2.4/emails#smtp)

# ruby - Ruby：从以某个索引为中心的数组中切出 n 个元素

> ID：10771700
> 
> 赞同：3
> 
> 时间：2012-05-27T04:40:19.313
> 
> 标签：ruby

这是一个数组、一个索引和一个数字 n，表示我要切出多少项目

```
a = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
指数 = 5
n = 3

```

上述参数转换为`give me 3 elements centered around index 5`，即`[4,5,6]`

如果数字是偶数，那么只需随意选择左侧或右侧的额外元素。例如： Given`n = 2`和`[4, 5]`都`[5,6]`同样有效。

但是我们必须考虑边界情况。假设`index = 1`和`n = 5`，它应该返回`[0,1,2,3,4]`，因为我们已经到达了左侧的边界。

同样，假设`index = 8`和`n = 5`，它应该返回，`[5,6,7,8,9]`因为我们碰到了右侧的边界。

有什么好方法来写这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T04:49:34.110

您可以使用[`Array#[]`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-5B-5D)

因此，类似以下的内容应该可以正常工作：

```
arr[offset - (count / 2), count] 
```

如果 offset 和 count 是 Fixnums，ruby 将正确处理除法和舍入以满足您给出的要求。

编辑 | 您可能也应该清理算术，因为负偏移量对`#slice`. 然后你还想清理最终值以允许整个计数适合：

```
arr[
  [[offset - (count / 2), 0].max, arr.size - count].min,
  count
] 
```

现在有点毛茸茸的，但就是这样。

# java - 正则表达式中的双正斜杠句点

> ID：10771703
> 
> 赞同：3
> 
> 时间：2012-05-27T04:41:10.680
> 
> 标签：java, regex

我最近开始在 Java 中使用正则表达式，但遇到了一个奇怪的表达式。

该问题要求找到仅由字母和至多一个结束句组成的“单词”。例如，如果我输入字符串：

```
one two. wr7ng not1 three. nope.. 
```

引擎将找到一、二和三作为匹配词。该问题的给定解决方案是这种模式：

```
for (String tok : s.split(" ")) {
  if (tok.matches("[a-zA-Z]+//.?")) {
    // code done to record successful match
  }
} 
```

两个正斜杠是什么意思？我将此表达式与此表达式进行了比较：

```
[a-zA-Z]+.? 
```

并且在最后一个插槽（句点）中只发现了后者错误接受的数字。这是唯一的区别吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T04:53:25.260

你确定不是*反斜杠*吗？

```
 "[a-zA-Z]+\\.?" 
```

文字字符串中的两个反斜杠被解释为“在文字字符串中插入一个反斜杠”。（作为惯例，在许多语言中，反斜杠 anychar 的意思是“插入 anychar”）。

当文字字符串被解释为正则表达式时，实际文本

```
 \. 
```

意思是，“将‘句点’匹配为文字字符”。

如果您没有反斜杠“转义字符”，则大多数 Regexp 引擎中的意思是“匹配任何字符”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T04:54:43.060

看起来你那里有一个错字。应该是`"[a-zA-Z]+\\."`。

该字符串值成为正则表达式值`[a-zA-Z]+\.`。反斜杠表示`.`应将其视为文字句点。没有它，`.`是匹配*任何*单个字符（包括数字）的特殊正则表达式元字符。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-27T05:15:21.157

确切的 RE 是：

```
[a-zA-Z]+\.? 
```

并使用 Java 编译它，您需要一个反斜杠 \，这意味着 Java 字符串中的转义字符：

```
"[a-zA-Z]+\\.?" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T04:53:51.973

正斜杠在正则表达式中没有特殊含义，因此“//”表示匹配两个正斜杠。

如果这没有意义，这要么是一个错字，要么是您误读或错误转录了正则表达式。用反斜杠替换正斜杠的明显“更正”给出了这个：

```
 tok.matches("[a-zA-Z]+\\.?") 
```

这意味着“匹配罗马字母后跟可选的`'.'`”。在上下文中，这*可能*意味着一个英文单词后跟一个句号/句号。

* * *

作为记录，`"[a-zA-Z]+.?"`匹配​​ 1 个或多个罗马字母，后跟（可选）一个字符。操作员的“急切”`+`意味着可选字符将是一个非字母......如果有的话。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-27T05:11:29.700

使用`.`（点）将被解释为表示“任何字符”的正则表达式元字符。

使用`\.`将给出编译器错误，即。非法转义字符

using`\\.`将被解释为一个简单的`.`（点）字符，这是您需要使用的。

因此，对于仅包含字母的单词，您使用`[a-zA-Z]+`的`+`（加号）是量词，表示“一个或多个”。

对于您使用的单个`.`（点）字符`\\.`。`.`现在对于（点）字符的“最多一次”部分，您将使用`?`表示“一个或多个”的量词。您对`.`零件的表达变为`\\.?`。

因此，您的正则表达式将是`[a-zA-Z]+\\.?`.

# mysql - 从字段数据中的标记中提取/替换 src 参数的 mySQL 查询

> ID：10771704
> 
> 赞同：0
> 
> 时间：2012-05-27T04:41:21.887
> 
> 标签：mysql, replace, image, src

我有一种情况，我升级了一个基于 CMS 的网站，多年来在如何处理某些字段类型方面发生了一些重大变化。特别是图像。最初，文本字段中的标签用于存储和图像。现在我们已经转移到一种更加动态的方法，我们使用预设文件目录和图像文件名。

目前在我的“exp_weblog_table”中，我有一个字段“field_id_8”，它是一个包含以下内容的文本字段：

```
<img src="{filedir_2}V55-Kaos-Chrome.jpg" width="400" height="400" /> 
```

现在我的 SQL 查询技能几乎不存在，所以需要帮助去除字段中的所有内容，除了 img 标记的 src 参数的内容。所以基于上面现有数据的例子，我理想情况下需要在字段数据中留下以下内容：

```
{filedir_2}V55-Kaos-Chrome.jpg 
```

还有许多其他领域使用相同的方法，但是一旦我有工作要做，我应该能够弄清楚。

我将使用 phpMyAdmin 对 DB 表字段进行这些更新。

提前致谢

布伦丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T09:23:14.000

There are no regexp replace function in Mysql. Instead, export the table, do the replace on the .sql-file, truncate the table and finally execute the sql again.

The regexp (that you can run in various texteditors such as Textwrangler (Mac) or Notepad++ (PC)) :

search for:

```
<img.+?src=[\"'](.+?)[\"'].+?> 
```

replace

```
 \1 
```

or

```
 $1 
```

depending on your editor.

# database - 为什么 django 可能不会创建由 manage.py sql 指定的数据库列

> ID：10771709
> 
> 赞同：1
> 
> 时间：2012-05-27T04:42:24.210
> 
> 标签：database, django

我正在尝试创建一个应用程序，其中所有数据仅属于一个用户，并且用户只使用自己的数据（例如电子邮件）。我在我的 models.py 文件中对此进行建模，如下所示：

```
from django.contrib.auth.models import User
from django.db import models
...

class Foo(models.Model):
    owner=ForeignKey(User, related_name='foos') 
```

这似乎工作正常。

```
python manage.py sql appFoo 
```

显示 sql 包括

```
CREATE TABLE "appFoo_foo" (
    "id" integer NOT NULL PRIMARY KEY,
    "owner_id" integer NOT NULL REFERENCES "auth_user" ("id")
    ... 
```

但是，当我尝试删除为测试目的创建的用户时，就会出现问题，两者都使用

```
User.objects.exclude(username='root').delete() 
```

并使用内置的 django 管理应用程序。在任何一种情况下，我都会收到一个数据库错误，指出表 appFoo_foo 没有名为 owner_id 的列。这是在运行 syncdb 之后。关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T04:50:13.253

我发誓我在问这个问题之前寻找了相关的问题，但我没有看到[Database error : no such column: connect_connect.reciever_id](https://stackoverflow.com/questions/6913782/database-error-no-such-column-connect-connect-reciever-id)直到我问了这个问题。我的问题是一样的。基本上，我在我的模型中添加了一个字段，并期望 syncdb 相应地修改数据库，但显然它没有。我不得不跑

```
manage.py reset appFoo 
```

其次是syncdb，它就像一个魅力。

编辑：我刚刚读到 reset 已被弃用，您可以使用 flush 代替。

# codeigniter - CodeIgniter : 设置 jQuery 并使用 jQuery 将数据发布到控制器

> ID：10771710
> 
> 赞同：0
> 
> 时间：2012-05-27T04:42:26.410
> 
> 标签：codeigniter

我添加了

```
<script type="text/javasript" src="<?=base_url()?>js/jquery-1.7.2.min.js"></script> 
```

在**application/views/templatess/header.php**并使用我写的 jQuery将数据发布到**Controller**

```
<script>

$(document).ready(function(){

    $('#submit').click(function() {
        $.ajax({
            type : 'POST',
            url : '/projects/create',
            data: {
                pro_name : $('#pro_name').val()
            },
            success:function (data) {
                $("#log_msg").html(data);
            }          
        });
    });

});
</script> 
```

在我的视图文件中：**application/views/project/create.php**并且控制器存在于**application/controllers/projects.php**

在我看来，名为**create.php**的完整代码是：

```
<label for="pro_name">Project Name</label>
<input type="input" id="pro_name" name="pro_name" />
<br />
<input type="submit" id="submit" name="submit" value="Create" />

<script>

$(document).ready(function(){

    $('#submit').click(function() {
        $.ajax({
            type : 'POST',
            url : '/projects/create',
            data: {
                email : $('#pro_name').val()
            },
            success:function (data) {
                $("#log_msg").html(data);
            }          
        });
    });

});
</script> 
```

我的控制器名为项目包含

```
class Projects extends CI_Controller {
    public function __construct()
    {
        parent::__construct();
        $this->load->model('projects_model');
        $this->load->helper('url');
        $this->load->helper('html');

        $this->load->helper('form');
        $this->load->library('form_validation');
    }

    public function create()
    {
        echo $this->input->post('pro_name');

        $data['title'] = 'SPARCS | Create Project';

        $this->form_validation->set_rules('pro_name', 'Name', 'required');
        $this->form_validation->set_rules('pro_client', 'Client', 'required');
        $this->form_validation->set_rules('pro_loc_city', 'City', 'required');
        $this->form_validation->set_rules('pro_loc_state', 'State', 'required');
        $this->form_validation->set_rules('pro_size', 'Project Size', 'required');      
        $this->form_validation->set_rules('pro_desc', 'Description', 'required');

        if ($this->form_validation->run() === FALSE)
        {
            $this->load->view('templates/header', $data);   
            $this->load->view('projects/create');
            $this->load->view('templates/footer');

        }
        else
        {
            // If project name already exists?

            $query = $this->projects_model->if_exists($this->input->post('pro_name'));

            if ( sizeof($query) == 0) {

                //$this->projects_model->set_project();             
                $data['message'] = 'Add successfully';

            } else {

                $data['message'] = 'Project name already exists';
            }

            $this->load->view('projects/log_message', $data);
        }
    }
} 
```

但是浏览器说`$ is not defined`

现在请让我知道如何在**CodeIgniter**中设置 jQuery，以及将数据传递给**控制器**​​并显示从**控制器发回的响应的正确方法是什么**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T05:19:31.910

是否有可能在您的代码中某处将 jQuery 设置为“[安全模式](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)”？

尝试将您的逻辑包装在匿名函数中，如下所示：

```
​(function($) {
    // insert logic here
})(jQuery)​ 
```

保证此函数中的任何内容都可以`$`用作`jQuery`.

# mysql - 一个sql查询中的三个计数

> ID：10771711
> 
> 赞同：2
> 
> 时间：2012-05-27T04:42:54.830
> 
> 标签：mysql, select, count

```
ID    FRUIT

1     Apple
2     Orange
3     Apple
4     Pear
5     Apple
6     Pear
7     Pear 
```

* * *

我想计算一张桌子上的每种水果。只有三个水果，我只需要总数。

我知道如何执行 SELECT COUNT(*) 但不是所有三合一查询

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T04:45:29.583

我想你想要这样的东西：

```
select fruit, count(id) from table group by fruit 
```

# windows-phone-7 - 如何在 wp7 代理中更新警报开始日期？

> ID：10771712
> 
> 赞同：0
> 
> 时间：2012-05-27T04:43:06.380
> 
> 标签：windows-phone-7, alarm, scheduledactionservice

我想在 ScheduledAgent 中更新警报开始时间，是否可以在 wp7 中执行此操作？

```
 protected override void OnInvoke(ScheduledTask task)
    {
        var schedule = Find("AlarmName")

        if (schedule != null)
        {
            var alarm = schedule as Alarm;
            ReplaceAlarm(alarm);
        }

        NotifyComplete();
    }

    private void ReplaceAlarm(Alarm alarm)
    {
        alarm.BeginTime = NewDateTime;
        alarm.ExpirationTime = NewExpirationTime;
        alarm.Content = "new Text";

        try
        {
            ScheduledActionService.Replace(alarm as ScheduledAction);
        }
        catch
        {
        }
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T09:42:40.543

这是不可能的，因为BackgroundAgent 不支持***ScheduledActionService.Replace方法。***

[http://msdn.microsoft.com/en-us/library/hh202962(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh202962(v=vs.92).aspx)

# css - Twitter Bootstrap - 流体柱的高度相同

> ID：10771713
> 
> 赞同：16
> 
> 时间：2012-05-27T04:43:38.560
> 
> 标签：css, twitter-bootstrap

是否可以让两个列数据长度不均匀的流体柱井高度相同？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-22T17:21:40.660

这是一个响应式 CSS 解决方案，基于为每列添加大填充和同样大的负边距，然后将整行包装在一个隐藏溢出的类中。

```
.col{
margin-bottom: -99999px;
padding-bottom: 99999px;
background-color:#ffc;
}

.col-wrap{  
overflow: hidden;   
} 
```

你可以看到它在[jsFiddle工作](http://jsfiddle.net/panchroma/teFYS/)

编辑

如果您想要等高的井或带有圆角的柱子，则可以使用一种变体：http:
[//jsfiddle.net/panchroma/4Pyhj/](http://jsfiddle.net/panchroma/4Pyhj/)

编辑

另一种具有等高孔或圆角柱的变体，这次是 Bootstrap 3
[http://jsfiddle.net/panchroma/D4xdE/](http://jsfiddle.net/panchroma/D4xdE/)

它或多或少与 Bootstap 2 相同，但进行了一些改进以适应现在 BS 如何分隔列网格的变化。

# grails - 如何更改 gsp g:field 大小

> ID：10771718
> 
> 赞同：0
> 
> 时间：2012-05-27T04:45:23.163
> 
> 标签：grails, size, gsp

我尝试在 g:field 标记中设置“大小”属性并在域类中设置“大小”约束，但都失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T05:32:18.550

`size`应该在 a 上工作，`g:textField`因为它只是一个 html 输入 - 确保你的 css 没有限制显示的大小。

# c# - 当 DataSource 是 List 时，如何使用 DisplayMember 获取 string[] 的第一个元素 ?

> ID：10771726
> 
> 赞同：1
> 
> 时间：2012-05-27T04:47:32.190
> 
> 标签：c#, .net-4.0, windows-forms-designer

我是 C# 和 GUI 编程的新手，所以我觉得这很简单，但是 DisplayMember 上的文档让我感到困惑。

```
List<string[]> serverInfo = new List<string[]>();
serverInfo.Add(new string[] { "server one", "1.2.3.4", "12345" });
serverInfo.Add(new string[] { "server two", "1.2.3.4", "12346" });
serverInfo.Add(new string[] { "server three", "1.2.3.5", "12343" });

ComboBox serverPickList = new ComboBox();
serverPickList.DataSource = serverInfo;
serverPickList.DisplayMember = "???"; 
```

ComboBox 的选项应该是“服务器一”、“服务器二”和“服务器三”，但我仍然希望绑定字符串 [] 数组，因为我将处理它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T05:10:26.703

```
serverPickList.DataSource = serverInfo.Select(x => new { ColA = x[0], ColB =x[1], ColC=x[2] }).ToList();
serverPickList.DisplayMember = "ColA"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T05:07:00.657

你为什么不开个课呢？

```
class ServerInfo
{
    public string Name { get; set; }
    public string OtherStuff { get; set; }
    public string OtherStuff2 { get; set; }

    public ServerInfo(string name, string otherStuff, string otherStuff2)
    {
        this.Name = name;
        this.OtherStuff = otherStuff;
        this.OtherStuff2 = otherStuff2;
    }
} 
```

进而：

```
List<ServerInfo> serverInfo = new List<ServerInfo>();
serverInfo.Add(new ServerInfo("server one", "1.2.3.4", "12345"));
serverInfo.Add(new ServerInfo("server two", "1.2.3.4", "12346"));
serverInfo.Add(new ServerInfo("server three", "1.2.3.5", "12343"));

ComboBox serverPickList = new ComboBox();
serverPickList.DataSource = serverInfo;
serverPickList.DisplayMemeber = "Name"; 
```

# c# - 我正在用 C# 编写自定义 Web 服务器应用程序，但不确定如何集成 PHP 服务器端脚本？

> ID：10771727
> 
> 赞同：0
> 
> 时间：2012-05-27T04:47:51.257
> 
> 标签：c#, php, cgi

我已经让我的程序正确地发送标题、MIME 类型、文件本身等......基本上所有简单的东西。我想为我的服务器软件添加服务器端语言功能，我选择了 PHP，因为这是我最了解的语言。查看二进制文件，看起来最有前途的两个是 php.exe 和 php-cgi.exe，尽管据我所知 php.exe 只接受要执行的 php 文件和存储（在 php 端）的参数$argv 变量，或类似的东西。这适用于基本用途，但我希望完全集成。这个基本解决方案无法设置最重要的 $_GET 和 $_POST 变量。

任何提示将不胜感激，谢谢！

# php - 为 Twitter 分享 URL 编码 get_the_title()

> ID：10771728
> 
> 赞同：13
> 
> 时间：2012-05-27T04:48:26.890
> 
> 标签：php, wordpress, twitter

我在 Twitter 上使用带有弹出式共享按钮的直接链接： `<a href="https://twitter.com/intent/tweet?url=<?php echo urlencode(get_permalink());?>&amp;text=<?php echo get_the_title(); ?>&amp;via=username" target="_blank"`

有了所有疯狂的社交媒体插件，这是我实现分享按钮的最简单、最直接的方式。

但是，当标题中有一个`&`时，标题会破坏应该为状态显示的文本。我知道您需要`urlencode()`标题，但是当我这样做时，它会在状态消息中显示特殊字符。

由于您现在在 Twitter 共享中不需要 a `+`，`[space]`因此我需要将任何`&`'s替换为`&amp;`. 但是，它似乎不适用于`str_replace()`. 由于某些原因，它会输出 HTML 特殊字符。做类似的事情`<?php echo str_replace('&', '&amp;', urldecode(get_the_title())); ?>`也行不通。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-05-27T05:00:53.727

`&`在 URL 中具有特殊含义，用于分隔多个参数。如果您的 URL 是`...a&b...`，那不代表文本“a&b”，它代表两个单独的参数。为避免这种情况，您需要`urlencode`将文本`&`转换为`%26`.

编码`&`to`&amp;`仅对`&`HTML 中的字符是必需的，文本中不应包含这些字符，因为所有`&`s 都替换为`%26`.

我不知道 Wordpress 的复杂性，但我认为`get_the_title()`返回一个已经被 HTML 转义的值。意思是，它包含`&amp;`而不是`&`，因此如果您像这样发送它，这就是发送到 Twitter 的值。您想要的是获得没有 HTML 实体的文本，即您需要对其进行 HTML 解码以`&amp;`返回实际值`&`。然后需要对 HTML 解码的值进行 URL 编码，因此它不会破坏您的 URL 语法。

把它们放在一起，这应该可以做到：

```
echo urlencode(html_entity_decode(get_the_title(), ENT_COMPAT, 'UTF-8')); 
```

可能还有其他方法可以直接从 Wordpress 获取没有 HTML 实体的原始标题，而无需进行复杂的操作`html_entity_decode`，但同样，我对 Wordpress 了解不多。

* * *

PS：由于您将该 URL 输出到 HTML 上下文中，您*应该*再次对 URL 进行 HTML 编码，以确保它不会破坏您的 HTML 语法。不过，这主要是为了学术完整性，`urlencode()` *不应*返回任何可能破坏 HTML 语法的内容。但只是为了迂腐的完整性，在这里：

```
echo htmlspecialchars(urlencode(html_entity_decode(get_the_title(), ENT_COMPAT, 'UTF-8')), ENT_COMPAT, 'UTF-8'); 
```

# objective-c - App 的 App Store 链接

> ID：10771730
> 
> 赞同：3
> 
> 时间：2012-05-27T04:49:26.700
> 
> 标签：objective-c, ios, xcode, hyperlink, app-store

我有一个应用程序可以记录您旅行的里程数。我想通过使用不同的社交网络共享数据，例如我使用了 Facebook SDK，用户可以发布状态更新。我想在整个帖子中宣传我的应用程序（当然），并展示数据，但我想将该帖子的查看者引导到商店中的应用程序。所以，即使我还没有发布应用程序，我怎样才能找到/检索应用程序链接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T02:08:52.107

如果您有自己的域，您始终可以做的是在您最终提交时将您网站上的页面重定向到应用程序页面。这就是我一直在做的事情，如果我以后想更改它以使用真实的，我可以自由地这样做。例如：

```
www.yourwebsite.com/myapp --> http://someituneslink.com/myappslink 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T06:36:31.930

使用[iTunes 链接制作工具](http://itunes.apple.com/linkmaker/)。这是一个非常好的网站：为您提供应用程序/音乐/电影/书籍的链接和 HTML。

# php - 用php发送大邮件

> ID：10771732
> 
> 赞同：0
> 
> 时间：2012-05-27T04:49:59.327
> 
> 标签：php, email

我需要用 PHP 发送邮件，我使用这样的邮件功能：

```
$subject = "test";
$message = "Large message";
$headers = "Content-type: text/html; charset=iso-8859-1; \n".
mail('someone@example.com', $subject, $message, $headers); 
```

当 $message 很大时，此代码不起作用（仅作为主题）。当我编写这样的代码时它会起作用：

```
$subject = "test";
$headers = "Content-type: text/html; charset=iso-8859-1; \n".
mail('someone@example.com', $subject, "large message", $headers); 
```

请帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T05:00:07.753

```
$headers = "Content-type: text/html; charset=iso-8859-1; \n".
                                                            ^----
mail('someone@example.com', $subject, $message, $headers); 
```

两个代码块中的指定句点将这两行转换为字符串连接操作，这可能是您不想要的。

同样，不要自己构建 mime 电子邮件，甚至不要使用内置的 mail() 函数。它对调试完全没用，只给你真/假诊断。使用[Swiftmailer](http://swiftmailer.org)或[PHPMailer](http://phpmailer.worxware.com)，它们都可以为您提供更好的错误消息，并使 mime 电子邮件易于生成。

# iphone - iPhone 显示旧版本的应用程序

> ID：10771735
> 
> 赞同：0
> 
> 时间：2012-05-27T04:50:32.770
> 
> 标签：iphone, ios, caching

当我尝试通过 Xcode 在我的 iPhone 上运行一个应用程序时，它显示的是一个旧版本，然后是我正在处理的 - 我已经更改了图像和布局等。

如何清除缓存或仅用于开发应用程序的东西？

这在我以前没有发生过。使用模拟器很容易重置它:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T04:53:24.873

删除您的应用程序，其捆绑包中的所有内容（.app、文档、缓存等）都将被删除。

如果您有一个过时的视图布局 - 最好检查源代码，您很可能正在启动一个过时的版本。

# python - 在 Ubuntu 12.04 上使用 SQLAlchemy 查询的 TypeError 但在 Windows 上没有

> ID：10771740
> 
> 赞同：2
> 
> 时间：2012-05-27T04:52:58.530
> 
> 标签：python, windows, ubuntu, sqlalchemy

我有一个我在 windows 盒子上为 python 2.7 编写的脚本。我让它在几台不同的机器上工作，所以我知道它“移动”正常。

我现在正在设置一个 ubuntu 盒子（v12.04）。

相同的代码在 ubuntu 中失败：

```
instance = session.query(formats_table).\
filter(formats_table.c.formatid==FormatID, 
       formats_table.c.puid==PUID, 
       formats_table.c.formatversion==FormatVersion, 
       formats_table.c.formatmimetype==FormatMIMEType).all() 
```

在 Windows 中它运行良好并且没有问题

在ubuntu中它失败了：

```
TypeError: <lamba>() takes exactly 2 arguments (5 given) 
```

我该怎么做才能找出问题所在？

我假设这条线被解析为 5 个不同的参数，而不是两个 (session.query) 和 (filter)，这表明括号没有被正确解析？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T06:01:03.863

你有两个不同版本的 SQLAlchemy。

[SQLAlchemy 的`filter`方法：](http://docs.sqlalchemy.org/en/rel_0_7/orm/query.html#sqlalchemy.orm.query.Query.filter)

> `filter(*criterion)`
> 
> > 使用 SQL 表达式将给定的过滤条件应用于此查询的副本。
> > 
> > 例如： `session.query(MyClass).filter(MyClass.name == 'some name')`
> > 
> > 多个条件由 AND 连接在一起**（0.7.5 中的新功能）**：
> > 
> > `session.query(MyClass).filter(MyClass.name == 'some name', MyClass.id > 5)`

请注意，在 0.7.5 之前，您不能在一次`filter`调用中拥有多个标准——您必须链接多个`filter`调用才能获得相同的效果。在你的情况下，这看起来像：

```
instance = session.query(formats_table).\
filter(formats_table.c.formatid==FormatID).\
filter(formats_table.c.puid==PUID).\
filter(formats_table.c.formatversion==FormatVersion).\
filter(formats_table.c.formatmimetype==FormatMIMEType) 
```

因此，所引用的“参数”是传递给的关键字参数`filter`——在你的 Ubuntu 版本附带的 SQLAlchemy 版本中只能有一个，而你提供了四个。您看不到的另一个参数是`self`调用实例方法时自动传递的实例对象（通常称为 ）。

# multithreading - 使用多核提高并行性能

> ID：10771741
> 
> 赞同：2
> 
> 时间：2012-05-27T04:53:06.140
> 
> 标签：multithreading, compiler-construction, multiprocessing

我认为拥有一台四核计算机的意义在于不断增加。但我想知道这究竟发生在正常日常计算的哪个阶段。

如果我编写 C 代码来执行矩阵乘法（并行计算的“Hello World”），我系统上的编译器会自动知道如何针对所有 4 个内核进行优化吗？或者我是否必须在我的程序中显式创建多个线程才能利用所有 4 个内核？

基本上我想知道的是有多少程序是自动并行的，而程序员可以通过使调度程序发送到不同内核的多个线程来优化多少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T04:55:43.653

如果您用纯 C 编写，则必须自己创建多个线程，或者使用 OpenMP（非常适合矩阵乘法；您可以编写代码以使用 OpenMP 将循环中的工作拆分为多个线程）为您生成线程代码。

但是，负载平衡必须由您完成。

一个程序必须有多个线程才能在不同的内核上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T04:55:45.773

几乎如果你用任何你知道的语言编写程序，它就不会并行运行。

要在此类语言中获得并行性，您必须求助于内置语言功能（“fork”或“do parallel”）或以某种方式使用线程的外部库。

函数式语言的人声称其主要价值之一是没有副作用，因此实际上您的整个函数式程序可以并行执行。我发现令人惊讶的是，Haskell 人员随后继续为您提供（据我所知，坚持使用）您想要的显式并行原语。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T04:56:53.060

系统不**知道**如何在内核之间分配工作。由您来编写程序来分配工作量。只有当你有很多工作要做时，这才是值得的。这是线程的重要用途之一。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T05:04:00.487

越来越多的框架和语言集成特性使声明式并行计算变得更加容易。但是，它仍然需要您对代码进行一些更改。更改量可以很小（几行）或很大（完全重写），这取决于代码的性质以及您的代码和框架之间是否有很好的契合。

有一些不需要你管理线程的并行化方法。这些通常被称为任务并行、数据并行、参与者、代理等。

# python - 使用索引+行匹配从数据框中删除重复项

> ID：10771745
> 
> 赞同：0
> 
> 时间：2012-05-27T04:53:45.260
> 
> 标签：python, pandas

我有两个`pandas` `DataFrame`s，我想将它们连接在一起，这样我就可以在外部连接中删除重复项。我的问题是`.drop_duplicates()`在查找重复项时忽略索引。如果索引不同，则不应重复。如果行索引和列重复，如何删除重复项？我唯一能想到的就是使用`df.to_dict()`然后创建一个新的 DataFrame（非常低效）。

**更新：**

根据要求，这里是我的数据示例：

```
from pandas import *
index1 = ['2012-05-2' + str(i) for i in range(0,6)]
data1 = {'rate': range(0,6)}
a = DataFrame(data1, index1)

index2 = ['2012-05-2' + str(i) for i in range(3,9)]
data2 = {'rate': range(3,9)}
b = DataFrame(data2, index2) 
```

格伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T04:43:14.060

**解决方案：**

```
a.combine_first(b) 
```

谢谢韦斯。

# javascript - 使用 jQuery 检查多个提交按钮的问题

> ID：10771750
> 
> 赞同：1
> 
> 时间：2012-05-27T04:54:40.497
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery 1.7.2 检查四个提交按钮中的哪一个被点击 如果单击其中三个按钮中的任何一个，我想显示一个带有按钮值的警报框。这是html代码：

```
<body>
    <table>
        <tr>
            <td>
                <input type="submit" id="cancel" value="Cancel">
            </td>
        </tr>

        <tr>
            <td>
                <input type="submit" id="find" value="Find">
            </td>
        </tr>

        <tr>
            <td>
                <input type="submit" id="save" value="Save">
            </td>
        </tr>

        <tr>
            <td>
                <input type="submit" id="update" value="Update">
            </td>
        </tr>
    </table>
</body> 
```

这是jQuery函数代码：

```
<script>
        $(function(){
            $(':submit').click(function(){
                var value = $(this).val();
                //alert(value);

                if($(this).val() == "Save" || "Find" || "Clear") {
                //if($(this).val() == "Update") {
                    alert('The value is: ' + value);
                }
            });
        });
    </script> 
```

如果我单击三个按钮中的任何一个，我会显示值，但如果我然后单击更新按钮，它也会显示。我以为我的 if 块会阻止这种情况发生？

如果我注释掉该行并改用此代码：

```
if($(this).val() == "Update") {
                        alert('The value is: ' + value);
                    } 
```

然后只有当我点击更新按钮时才会触发警报。当我检查多个提交按钮时，这里的代码有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T05:02:23.417

您的 if 语句不正确：

```
if( $(this).val() == "Save" || "Find" || "Clear" ) 
```

尽管通常假设操作员是这样工作的，但这并不是它的工作方式。如果您想测试该值是否等于这些字符串之一，您可能应该`$.inArray`改用：

```
if ( $.inArray( $(this).val(), [ "Save", "Find", "Clear" ] ) > -1 ); 
```

### 额外学分

作为额外的功劳，`||`运算符计算两个表达式（一个在它的左边，一个在它的右边）并计算`true`两个表达式中的一个是否为*真值*。

```
if ( true || false ) // Evalutes to true, since one of the two was true 
```

在您的尝试中，您想查看该值是否等于这些字符串中的任何一个。如果您想使用`||`，则必须创建几个比较：

```
var myVal = $(this).val();
if ( ( myVal == "Save" ) || ( myVal == "Find" ) || ( myVal == "Clear" ) ) 
```

此条件将评估`true`是否满足任何条件。您可以看到这将很快变得相当冗长。

# iphone - 访问可以更新的罐装应用程序资源的正确方法是什么？

> ID：10771753
> 
> 赞同：2
> 
> 时间：2012-05-27T04:55:10.953
> 
> 标签：iphone, ios, ios5, appstore-approval

我们有一个使用核心数据的 iOS 应用程序，我们正在使用初始数据库填充应用程序数据。（SQLite）。稍后它将从互联网下载数据并更新数据库。我们将 SQLite 数据库复制到 Documents 文件夹。Apple 表示这是不正确的，因为 Documents 文件夹中的文件会自动备份到 iCloud。他们不允许这样做，除非这些文件是用户创建的。

他们提到的解决方案。

1.  为文件（在我们的案例数据库中）设置一个标志，它不会备份到 iCloud。但这仅适用于 iOS 5.1，我们不能这样做。我们需要支持 iOS 4 及更高版本。（[https://developer.apple.com/library/ios/#qa/qa1719/_index.html](https://developer.apple.com/library/ios/#qa/qa1719/_index.html)）

2.  维护临时文件夹中的文件（我们的例子是它的数据库）。但是他们提到要删除我们在应用退出时放在临时文件夹中的所有内容。同样，这不是解决方案。

但我的问题是，如果我们不删除那有什么问题？当用户从 AppStore 更新到下一个应用程序版本时，临时文件夹会发生什么？它会删除内容还是会在应用程序更新时保留临时文件夹中的任何内容？

或者任何人有任何其他解决这个问题的方法？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T05:06:53.573

我实际上看到了两种解决您问题的方法。

1.  仅在 iOS 5.1+ 上为您的文件设置标志，如果操作系统低于 5.1，请不要这样做。

2.  阅读有关将文件保存到磁盘的文档，临时和文档不是您可以存储信息的唯一两个地方。在所述文档文件中，它应该说明每个文件夹的内容何时被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T06:12:29.767

为什么不尝试从 Documents 文件夹中读取数据库？如果它在那里，太好了，你在做生意。如果它不存在，那么您一定没有下载比应用程序附带的版本更新的版本，因此请打开应用程序包中的数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T10:33:18.977

在阅读了一些文档后，我觉得解决方案是正确的。

--> iCloud 和 iTunes 不备份以下目录的内容：

/AppName.app

/图书馆/缓存

/tmp

--> 以下目录中的文件保证在更新过程中被保留：

/文件

/图书馆

所以我将我的初始数据库复制到库/缓存中。并在该数据库之上进行任何更新。但我觉得如果设备在低磁盘空间上运行，它可能会删除缓存文件夹的内容。在这种情况下，我检查数据库是否存在，如果它不存在，我会再次复制。（作为预防措施）。但在这种情况下，用户可能会丢失一些数据。但苹果仍然没有为此提供适当的指南。

# php - 连接到本地主机工作正常，但我无法连接到本地主机上的大多数子目录。怎么了？

> ID：10771758
> 
> 赞同：1
> 
> 时间：2012-05-27T04:56:00.020
> 
> 标签：php, mysql, apache, mamp

我最近根据此处的说明安装和配置了 Apache、PHP 和 MySQL：http: [//danilo.ariadoss.com/how-to-setup-apache-php-mysql-on-mac-os-x-105-豹/](http://danilo.ariadoss.com/how-to-setup-apache-php-mysql-on-mac-os-x-105-leopard/)

除了我按照此处的说明安装了 MySQL（包括 StartupItem 和 PreferencePane）：http: [//dev.mysql.com/doc/refman/5.5/en/macosx-installation-pkg.html](http://dev.mysql.com/doc/refman/5.5/en/macosx-installation-pkg.html)

当我打开浏览器并导航到 localhost 时，`~/Sites/index.html`会显示我的页面。

但是，当我尝试通过 导航到我的任何`~/Sites`子目录`localhost/subdir`时，出现以下错误：

> HTTP 错误 500（内部服务器错误）：> 服务器尝试完成请求时遇到了意外情况。

`~/Sites`在我配置 Apache、PHP 和 MySQL 之前，这些子目录都在里面。

在配置 Apache、PHP 和 MySQL 之后，我在`~/Sites`( `~/Sites/test`) 中创建了另一个目录，我似乎可以通过它连接到`localhost/test`该目录（其中 index.php 文件的内容`~/Sites/test`在将浏览器定向到 时显示`localhost/test`）。

换句话说，我无法连接到旧的`~/Sites`子目录，但由于某种原因，我可以连接到新的`~/Sites`子目录。我将旧子目录的所有内容移动到新的（空）子目录，然后尝试连接到新的子目录，但得到了同样的错误。

在根据上述说明配置 Apache、PHP 和 MySQL 之前，我使用 MAMP 运行我的站点子目录。这可能与此错误消息有关吗？

我正在运行 Mac OS X 10.6.8。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T05:16:56.447

这看起来像文件权限问题。也许 MAMP 下的文件具有不同的权限，您的新安装的 Apache 不允许访问。

500 错误通常也是由错误配置的`.htaccess`文件引起的。这些是隐藏的配置文件，即使您清空了一个目录，它们也可能仍然存在。尝试在 Finder 中启用隐藏文件的视图，然后在有问题的子目录中浏览。如果你看到任何东西，请告诉我。

如果不是，我们必须检查您的旧子目录权限并将它们与新的权限进行比较，看看是否有区别。如果权限不同，它解释了为什么您的系统不允许 Apache 访问这些文件。这可以通过终端使用`ls -l`命令来完成。我在 Linux 上并且有一段时间没有接触过 Mac，但我认为您还可以通过右键单击并选择属性来查看文件的权限（它属于哪个用户等）。

让我知道这是否有意义。

# jquery - HTML5 交互式信息图

> ID：10771763
> 
> 赞同：0
> 
> 时间：2012-05-27T04:57:00.080
> 
> 标签：jquery, html, responsive-design

我还没有在下面的链接中找到任何关于如何做某事的例子，所以如果你有任何一步一步的教程或代码项目，它将对我有用。

链接： [WEB的进化](http://evolutionofweb.appspot.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T06:52:30.680

有 using , jquery , raphael , galleria 等……看源码就知道了。

# javascript - 从 JQuery 加载的页面调用动态创建的 iFrame 时为空

> ID：10771769
> 
> 赞同：0
> 
> 时间：2012-05-27T04:58:52.543
> 
> 标签：javascript, jquery, html

我有一个使用常规 javascript 动态创建的 iframe。当它通过常规方式从静态页面调用时效果很好，但是当从 Jquery 加载的页面调用时，我得到一个“myIframe 为空”错误。

```
var link = 'http://www.blah.com'
var iframe='<iframe class="adframe" id="randomnumberhere" name="widget" src="#" width="300" height="250" marginheight="0" marginwidth="0" frameborder="no" scrolling="no"></iframe>';

document.write(iframe);
var myIframe=parent.document.getElementById("randomnumberhere");
myIframe.height=250;
myIframe.width=300;
myIframe.src=link;
myIframe.style.border="0px";
myIframe.style.padding="0px"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:49:42.313

我通过添加一个具有唯一 id 的 div 然后将 iFrame 附加到该 div 来解决这个问题。似乎 document.write 可以创建对象，但附加到该元素并没有发生。工作代码如下。

为 html 中的 div 动态创建随机数：

```
<div id="randomid"></div> 
```

然后我创建了一个函数来附加到具有该特定 ID 的那个 div

```
function makeFrame(){
var link = 'http://blah.com'
ifrm = document.createElement("IFRAME");
ifrm.setAttribute("src", link);
ifrm.style.width="300px";
ifrm.style.height="250px";
ifrm.style.border="0px";
ifrm.style.padding="0px";
document.getElementById('randomid').appendChild(ifrm);
}
makeFrame(); 
```

这仅在 div 已经在页面上时才有效。我想不出一种方法来动态制作 div，然后将 iFrame 附加到该 div。Document.write 创建了 div，但无法将 iFrame 附加到该元素。也许延迟会使它起作用？以下是我尝试过的，但没有奏效。

```
var iDiv='<div id="randomid"></div>';
document.write(iDiv); 
```

# android - 如何从不同的类中调用 getWriteableDatabase？

> ID：10771770
> 
> 赞同：0
> 
> 时间：2012-05-27T04:58:55.133
> 
> 标签：android, sqlite, android-activity

我想从我的 Activity 类中调用 getWriteableDatabase

我知道您可以在 SQLiteOpenHelper 中使用 this.getWriteableDatabase

但我如何从我的活动中做到这一点？假设我的 SQLite 助手名为“DatabaseHandler”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T05:38:43.680

您需要声明一个实例，然后您可以使用关联的方法。

```
myDbHandler = new DatabaseHandler();
db= myDbHandler.getWritableDatabase 
```

# django - 如何在 Django 中创建用于编辑的填充表单

> ID：10771773
> 
> 赞同：1
> 
> 时间：2012-05-27T04:59:13.293
> 
> 标签：django, django-forms, django-templates

我有一个表单，我想用对象自动填充以进行编辑。

我的表单片段如下：

```
{% for field in form %}
    <div class="form_block">
        {{ field.label_tag }}
        {% if field.help_text %}
            <p class="help_text">{{ field.help_text }}</p>
        {% endif %}
        {{ field }}
        {% for error in field.errors %}
            <p class="error">{{ error }}</p>
        {% endfor %}
    </div>
{% endfor %} 
```

有没有一种简单的方法来创建这样的片段，当它可用于表单时添加对象内容？或者，我是否需要使用明确描述的值重新创建编辑表单？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T05:40:01.557

使用[`initial`](https://docs.djangoproject.com/en/dev/ref/forms/api/#dynamic-initial-values)或`ModelForm`

```
>>> from django import forms
>>> from django.contrib.auth.models import *

>>> class UserForm(forms.Form):
>>>     username = forms.CharField()
>>> print unicode(UserForm(initial={'username':'foo'}))
<tr><th><label for="id_username">Username:</label></th><td><input type="text" name="username" value="foo" id="id_username" /></td></tr>

>>> class UserModelForm(forms.ModelForm):
>>>     class Meta:
>>>         model = User
>>>         fields = ['username']
>>> print unicode(UserModelForm(instance=User(username='foo')))
<tr><th><label for="id_username">Username:</label></th><td><input id="id_username" type="text" name="username" value="foo" maxlength="30" /><br /><span class="helptext">Required. 30 characters or fewer. Letters, numbers and @/./+/-/_ characters</span></td></tr> 
```

# webdriver - 如何使用 Selenium WebDriver 打开太多浏览器？

> ID：10771784
> 
> 赞同：1
> 
> 时间：2012-05-27T05:03:42.743
> 
> 标签：webdriver, selenium-webdriver, testng

我需要一次打开 50 到 100 个 URL 并验证每个 URL 的登录名。所有 URL 都属于同一个应用程序，但托管给不同的客户？我如何使用 Selenium WebDriver 打开多个浏览器，比如 20 到 50 个具有不同 URL 的浏览器？我尝试了将 Parallel 属性设置为“Tests”并在 @BeforeTest 中实例化驱动程序对象的 TestNG，但是在打开 2 个浏览器后，由于浏览器关闭或第三个浏览器死亡，因此出现硒异常。

下面找到代码。

```
@Test
@Parameters({ "url" })
public void testParallel(String url) throws Exception {

    try {
        driver.get(url);

        int i = 0;
        i++;
        System.out.println("Browser Count" + i);

    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T13:45:36.433

我认为不可能使用 Java 绑定在同一台机器上并行使用多个 IEDriver 实例。（记得在某处阅读。.NET 绑定支持并行 IE 实例）

根据 IEDriver 的官方文档，“与其他 WebDriver 类不同，对于某些语言绑定，一次应该只有一个 InternetExplorerDriver 实例。如果您需要一次运行多个 InternetExplorerDriver 实例，请考虑使用 RemoteWebDriver和虚拟机。”。参考[这里](http://code.google.com/p/selenium/wiki/InternetExplorerDriver#Multiple_instances_of)。

如果您的 testng xml 正确，这应该适用于 FirefoxDriver。或者如果你想在 IE 上使用它，那么你应该考虑设置一个网格并在不同的机器上启动 IE 节点，以便可以发生并行运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T10:46:17.897

为什么你需要一次打开它们？Selenium 不是为负载测试而设计的。如果你想检查你的应用程序或服务器在负载下的表现，你最好看看[JMeter](http://jmeter.apache.org/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T23:09:43.553

对于这样的测试，我建议不要使用浏览器本身，而是使用 HTMLUnit 驱动程序（类似于无头浏览器）。此外，还有一个叫做 GhostDriver 的东西也可以完成类似的工作。不过，您可能应该使用远程 Grid 节点+集线器，但您不需要为了实现您的目标。

Selenium 可以在这方面进行负载测试。另外，我不会使用 TestNG：相反，我会使用 Gradle 或 Maven，因为它们本身具有 JUnit 分叉多线程功能。在 Gradle 或 Maven 中，创建一个过滤和识别特定测试类的任务，然后分叉进程以多线程运行它们。 [我在这里创建了一个示例。](https://github.com/djangofan/WebDriverTestingTemplate/tree/master/multiwindowtest)

# jquery-mobile - jquery mobile如何删除图标上的灰色圆圈

> ID：10771785
> 
> 赞同：8
> 
> 时间：2012-05-27T05:03:48.393
> 
> 标签：jquery-mobile, icons

我构建了我的第一个 phonegap Jquery Appl 我正在使用此类更改我的图标

```
.ui-icon-myapp-email {
    background-image: url("app-icon-email.png");
} 
```

此自定义图标用于列表视图，我尝试删除圆形灰色背景负载此外，我的图片对于我正在使用 .ui-icon 玩的形状有点大，但不起作用找不到类

我只是想要我的自定义箭头图片全尺寸在白色背景列表上没有圆形没有圆形框形状也许有一个属性或通过 css 来制作谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-02-07T18:46:57.487

如果您使用的是 jQuery v 1.4.0 +，那么您只需将该类添加`.ui-nodisc-icon`到您的链接元素中即可移除那个烦人的圆圈。您无需编辑任何 CSS 或编写任何覆盖。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-07T12:10:03.940

在这里聚会迟到了，但一个简单的答案是添加

```
background-color: transparent;
box-shadow: none; 
```

到您的自定义类名，所以：

```
.ui-icon-myapp-email {
    background-color: transparent;
    box-shadow: none;
} 
```

是你所需要的全部。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-14T08:50:12.303

使用 JQuery Mobile 1.3，现在您所要做的就是**添加类 "ui-nodisc-icon"**，无需乱用 CSS。

来自[JQuery 网站](http://blog.jquerymobile.com/page/2/)：

“如果您不需要图标后面的黑圈，只需**将 ui-nodisc-icon 添加到元素或其容器中**即可移除图标背景。”

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-27T05:19:09.973

这应该有效。

```
.ui-icon-myapp-email {
    background:transparent; /* or none */
    background-image: url("app-icon-email.png");
    /* The following border radius rules will override the circle around your icon */
    -moz-border-radius: 0px;
    -webkit-border-radius:0px;
    border-radius:0px;
}
/* To fix the size issue override the .ui-icon height */
.ui-icon{
    width:14px;
    height:20px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-27T05:21:19.303

将图标光盘颜色覆盖为白色。

```
.ui-icon,
.ui-icon-searchfield:after {
    background: #fff /*{global-icon-color}*/;
    background: rgba(255,255,255,1) /*{global-icon-disc}*/;
    background-image: url(images/icons-18-white.png) /*{global-icon-set}*/;
    background-repeat: no-repeat;
    -moz-border-radius: 9px;
    -webkit-border-radius: 9px;
    border-radius: 9px;
} 
```

图标大小在`ui-icon`类中指定，默认为`18px`.

```
.ui-icon {
    width: 19px;
    height: 19px;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-13T03:00:06.883

对于那些只想拥有按钮图标的人 - 我发现这篇文章非常有用！我按照“重置按钮主题”和“仅图标按钮”部分来获得我需要的效果。

[http://appcropolis.com/blog/advanced-customization-jquery-mobile-buttons/](http://appcropolis.com/blog/advanced-customization-jquery-mobile-buttons/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-20T11:00:50.117

我解决了这个问题，使用：

```
background-color:transparent; 
```

如果要在背景中添加颜色，可以使用：

```
background: url(yourimage.png) repeat; 
```

# python - 我已经为 Python 2.7 安装了 Bottle，但是如何从 Python 3.2 访问 ir？

> ID：10771787
> 
> 赞同：0
> 
> 时间：2012-05-27T05:04:15.147
> 
> 标签：python, pip, bottle

我已经在我的 Ubuntu Linux 服务器上安装了瓶子，使用

```
sudo pip install bottle 
```

它被安装到：`/usr/local/lib/python2.7/dist-packages`

但我的系统上也安装了 Python 3.2，我想从 Python 3.2 访问瓶子。Python 3.2 似乎无法识别该瓶已安装。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T05:19:40.513

您必须为 Python 3.2 单独安装它（例如`sudo pip-3.2 install bottle`）。

它目前在 中`python2.7/dist-packages`，这意味着只有 2.7 会加载它。您可以尝试将其添加到您的 PYTHONPATH 或类似文件中，但这在 Python 2 和 3 之间很少起作用，因为源文件不太兼容。（任何 C 扩展也肯定不会工作，尽管瓶子没有这些。）

不幸的是，尽管该命令有效，但即使通过 pip-3.2 安装，pypi 中的 bottle 版本似乎也不兼容 Python 3：

```
In [1]: import bottle
  File "/Library/Frameworks/Python.framework/Versions/3.2/bin/bottle.py", line 373
    except re.error, e:
                   ^
SyntaxError: invalid syntax 
```

[主页声称](http://bottlepy.org/docs/dev/)它适用于 3.x，但我在使用 pip 和 easy_install 安装时遇到了错误。不过，最新的开发版本（只是[从主页链接的单个文件](https://github.com/defnull/bottle/raw/master/bottle.py)）似乎可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T05:31:57.273

你没有做错任何事。Pip 默认使用 /usr/bin/python 并且只安装在那里。除非您想设置 virtualenv-s，否则最好将当前 pip 复制到 pip3.2 并对其进行编辑以调用 python 3.2：

```
sudo -s -H
p=$(which pip)
cat $p | sed "1s|/usr/bin/python|$(which python3.2)|" > $p"3.2"
chmod 755 $p"3.2"
exit 
```

你现在有一个`pip3.2`可以安装瓶子的东西，所以 python3.2 可以使用它。如果您在运行 pip3.2 时遇到关于找不到 pkg_resources 的错误，请查看[No module named pkg_resources](https://stackoverflow.com/questions/7446187/no-module-named-pkg-resources)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T07:20:10.203

我会自己回答这个问题。原来 pip 的最新版本不包括 pip-3.2。您需要下载开发版本并使用它，其中包括 pip-3.2。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T08:36:31.747

只需从异地手动下载即可。它只是一个文件。将其放入 lib/site-packages 文件夹并赋予文件适当的权限。

# java - 托管 Jar 文件

> ID：10771791
> 
> 赞同：2
> 
> 时间：2012-05-27T05:06:43.413
> 
> 标签：java, jar, war

我有一个包含两个 Java 类的 jar 文件。使用 javamail API，我开发了这些类来阅读和编辑我的邮件，然后发送到另一个邮件 ID。

我可以通过 Eclipse 通过我的独立系统执行此操作。现在我想将这个 jar 文件远程托管在某个地方，以便它可以实时获取数据并定期执行作业。我已经联系了几个托管站点，他们说他们需要一个战争文件。

有人对这个问题有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T08:31:47.393

为了给您另一个观点并具有建设性，我会将您的 jar 嵌入到一个战争应用程序中，您可以免费获得一些东西，我认为最重要的是您获得了托管应用程序生命周期，因此使用标准 Web 应用程序上下文侦听器，您可以以托管方式启动和停止程序。此外，您还有更多托管选项，而且工作量更少。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T06:12:51.683

由于我不知道任何专门用于简单执行可执行文件的服务，因此您最好的选择可能是获得便宜的 VPS。通过一些搜索，您可能会找到一个价格约为 5 美元/月的产品。对于一个简单的应用程序，您只需要大约 128MB 的内存。

选择一个，安装 Java（无论你得到的 Linux 发行版可能在存储库中都有 OpenJDK），复制你的文件，并设置一个 cron 作业以按设定的时间间隔运行可执行文件。

为了便于管理，请安装[webmin](http://www.webmin.com/)之类的东西并使用它来配置 cron 作业。该命令可能只是`java -jar /path/to/my/App.jar`，您可以使用 Web 界面来配置要执行的命令的时间间隔。

对于这样的应用程序，我会避免与战争文件相关的任何事情。您没有使用 Web 界面（如 PHP 应用程序或类似应用程序）制作应用程序，因此它确实不合适。您必须编写一些额外的代码以使其与[Tomcat](http://tomcat.apache.org/)之类的容器兼容，除此之外，运行应用程序服务器的内存要求会高得多。

# java - 具有等于 比较的 Java if 语句始终计算为 true

> ID：10771792
> 
> 赞同：-2
> 
> 时间：2012-05-27T05:06:52.763
> 
> 标签：java, if-statement, comparison, integer, equals

我对 Java 相当陌生，每次尝试将输入与 temp 进行比较时，我都会在数组中得到所有结果，即使 input 和 temp 不一样。

代码：

```
if (jRadioButton1.isSelected()) 
{ 
    String temp; 
    try
    {
        for (int i = 0; i < 500; i++)
        { 
            temp = Integer.toString(Read.tempHigh[i]);

            if ( input.equals(temp) );
            {   
                j.TextArea3.append(temp);
                j.TextArea3.append(input);
            }
        }
    }
    catch (NumberFormatException e)
    {   
        jTextArea3.append("Please enter a number");
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T05:18:48.530

你的线...

```
if ( input.equals(temp) ); 
```

不应该`;`在它的末尾。该`;`符号正在关闭 if 语句，因此`j.TextArea3.append()`无论`input`and的值是什么，它都会始终运行这些行`temp`。

因此，您上面的代码应如下所示...

```
if (jRadioButton1.isSelected()){ 
    String temp; 
    try {
        for (int i = 0; i < 500; i++){ 
            temp = Integer.toString(Read.tempHigh[i]);

            if ( input.equals(temp) ) {   
                j.TextArea3.append(temp);
                j.TextArea3.append(input)
            }
        }
    }
    catch (NumberFormatException e){   
        jTextArea3.append("Please enter a number");
    }
} 
```

# iphone - 从远程服务器获取图像

> ID：10771794
> 
> 赞同：1
> 
> 时间：2012-05-27T05:07:00.197
> 
> 标签：iphone, objective-c, uiview, uiimageview

在我的 iPhone 应用程序中，我必须显示缩略图的预览。该预览图像实际上是我们将从远程服务器获取的。在屏幕上加载那个大图像之前，我必须显示预加载视图，但实际上这个预加载视图并没有出现在屏幕上。

我使用的代码是：

```
zoomview=[[UIView alloc]initWithFrame:CGRectMake(0,0,320,460)];
imageloadview.backgroundColor=[UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:0.5];
[self.view addSubview:imageloadview];
[activity startAnimating];
[self loadimageview]; 
```

这里不是在屏幕上加载缩放视图，而是在执行这个加载视图方法，但我想在从服务器获取大图像之前显示预加载视图。

```
-(void)loadimageview
{
    imageloader.image=[UIImage imageNamed:@""];

    [self loadimage];
}

-(void)loadimage
{
    NSData *data=[NSData dataWithContentsOfURL:[NSURL URLWithString:[picfullarray objectAtIndex:0]]];

    if([data length]==0)
    {
        NSLog(@"data");
    } 
    else
    {
        UIImage *image1=[UIImage imageWithData:data];
        imageloader.image=image1;

        [activity stopAnimating];
        [loadlabel1 setText:@""];
    }
} 
```

在从服务器获取大图像之前，如何在 iPhone 屏幕上显示预加载视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T05:13:38.700

您必须使用[NSURLRequest](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)异步加载图像。

使类实现`NSURLRequestDelegate`协议。在 的函数`- (void)connectionDidFinishLoading:(NSURLConnection *)connection`中`NSURLRequestDelegate`，添加加载完成时更新视图的代码。

```
// You must declare NSMutableData somewhere to write received data in delegate method
// - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
// I assume the instance of NSMutableData is named data

// If you want to load multiple images, it is a bit tricky, but doable.
// I'll post the code if that is what you need.

- (void) connectionDidFinishLoading: (NSURLConnection *) connection {
    // You may want to declare a instance member to store the image (UIImage*), so that you can restore the view if the view is unloaded due to memory warning.
    UIImage* image = [UIImage imageWithData: data];

    data = nil; // Important. You should clean the data, or it will take up space.
    // You may want to check whether image != nil, since the incoming data may not be image
    [self displayImage: image];
}

- (void) displayImage: (UIImage*) aImage {
    imageloader.image = aImage;
    // Depending on how UIImageView is initialized, you may need to call sizeToFit.
    // Or set the frame accordingly

    [activity stopAnimating];
    [loadlabel1 setText: @""];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T04:12:15.980

我建议使用[SDWebImage](https://github.com/rs/SDWebImage)框架。它已经具有异步图像加载功能，并且非常易于使用。

```
[imageView.image setImageWithURL:[NSURL URLWithString:@"http://www.domain.com/path/to/image.jpg"]
               placeholderImage:[UIImage imageNamed:@"placeholder.png"]]; 
```

您不必担心弄乱`NSURLConnection`，维护`NSData`等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T04:18:17.210

还有 AFNetworking 可以轻松做到这一点。

[https://github.com/AFNetworking/AFNetworking/wiki/Getting-Started-with-AFNetworking](https://github.com/AFNetworking/AFNetworking/wiki/Getting-Started-with-AFNetworking)

查看“下载和显示图像”部分。

# php - 谷歌电视问题

> ID：10771796
> 
> 赞同：-1
> 
> 时间：2012-05-27T05:07:16.597
> 
> 标签：php, mysql, zend-framework, google-tv

根据模板测试脚本：http: [//gtv-resources.googlecode.com/svn/trunk/templates/html-02/index.html](http://gtv-resources.googlecode.com/svn/trunk/templates/html-02/index.html)

我看到有些东西不能正常工作。

事实上......如果我点击两次相同的缩略图（我们知道观众可以这样做）**，视频播放器就会停止工作**。就像......如果服务器停留在前一个请求而不处理新请求。因为没有视觉电影预加载器，我不知道服务器端发生了什么。

我真的希望有人可以在这个问题上帮助我。非常感谢毛里齐奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:48:49.827

这似乎是 html UI 模板中的一个错误。请在问题跟踪器中归档，并附上逐步说明以重现此问题：

[http://code.google.com/p/googletv-issues/](http://code.google.com/p/googletv-issues/)

# android - 在片段中重新创建视图时强制关闭（重复片段）

> ID：10771805
> 
> 赞同：0
> 
> 时间：2012-05-27T05:10:13.617
> 
> 标签：android, android-fragments, android-actionbar

我按照这里的教程[Android Action Bar](http://developer.android.com/guide/topics/ui/actionbar.html)

并且在`ArtistFragment.class`

```
public class ArtistFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        View fragView = inflater.inflate(R.layout.main_fragment, container, false);
        return fragView;
    }
} 
```

首先，我选择 Tab`Artist`它显示视图，但是当我切换到另一个选项卡时，然后再次切换回`Artist`Tab，它会导致强制关闭。

`main_fragment.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    android:padding="10dp"
    android:id="@+id/frags" >

    <fragment 
        android:name="com.android.custom.FragmentLeft"
        android:id="@+id/fragment_left"
        android:layout_weight="0.25"
        android:layout_width="0dp"
        android:layout_height="match_parent"/>
    <fragment 
        android:name="com.android.custom.FragmentRight"
        android:id="@+id/fragment_right"
        android:layout_weight="0.75"
        android:layout_width="0dp"
        android:layout_height="match_parent"/>

</LinearLayout> 
```

**日志猫**

```
05-27 11:58:36.398: E/AndroidRuntime(4216): FATAL EXCEPTION: main
05-27 11:58:36.398: E/AndroidRuntime(4216): android.view.InflateException: Binary XML file line #9: Error inflating class fragment
05-27 11:58:36.398: E/AndroidRuntime(4216):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:688)
05-27 11:58:36.398: E/AndroidRuntime(4216):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:724)
05-27 11:58:36.398: E/AndroidRuntime(4216):     at android.view.LayoutInflater.inflate(LayoutInflater.java:479)
05-27 11:58:36.398: E/AndroidRuntime(4216):     at android.view.LayoutInflater.inflate(LayoutInflater.java:391)
05-27 11:58:36.398: E/AndroidRuntime(4216):     at com.android.custom.ArtistFragment.onCreateView(ArtistFragment.java:20)
05-27 11:58:36.398: E/AndroidRuntime(4216):     at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:776)
05-27 11:58:36.398: E/AndroidRuntime(4216):     at android.app.FragmentManagerImpl.attachFragment(FragmentManager.java:1133)
05-27 11:58:36.398: E/AndroidRuntime(4216):     at android.app.BackStackRecord.run(BackStackRecord.java:628)
05-27 11:58:36.398: E/AndroidRuntime(4216):     at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1309)
05-27 11:58:36.398: E/AndroidRuntime(4216):     at android.app.FragmentManagerImpl$1.run(FragmentManager.java:398)
05-27 11:58:36.398: E/AndroidRuntime(4216):     at android.os.Handler.handleCallback(Handler.java:587)
05-27 11:58:36.398: E/AndroidRuntime(4216):     at android.os.Handler.dispatchMessage(Handler.java:92)
05-27 11:58:36.398: E/AndroidRuntime(4216):     at android.os.Looper.loop(Looper.java:132)
05-27 11:58:36.398: E/AndroidRuntime(4216):     at android.app.ActivityThread.main(ActivityThread.java:4123)
05-27 11:58:36.398: E/AndroidRuntime(4216):     at java.lang.reflect.Method.invokeNative(Native Method)
05-27 11:58:36.398: E/AndroidRuntime(4216):     at java.lang.reflect.Method.invoke(Method.java:491)
05-27 11:58:36.398: E/AndroidRuntime(4216):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
05-27 11:58:36.398: E/AndroidRuntime(4216):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
05-27 11:58:36.398: E/AndroidRuntime(4216):     at dalvik.system.NativeStart.main(Native Method)
05-27 11:58:36.398: E/AndroidRuntime(4216): Caused by: java.lang.IllegalArgumentException: Binary XML file line #9: Duplicate id 0x7f080011, tag null, or parent id 0x7f080010 with another fragment for com.android.custom.FragmentLeft
05-27 11:58:36.398: E/AndroidRuntime(4216):     at android.app.Activity.onCreateView(Activity.java:4182)
05-27 11:58:36.398: E/AndroidRuntime(4216):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:664)
05-27 11:58:36.398: E/AndroidRuntime(4216):     ... 18 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T05:46:18.500

为什么`R.layout.main_fragment`里面有两个碎片？A里面`Fragment`不能有另一个`Fragment`...它必须在`Activity`. 有没有`artist_fragment.xml`你打算充气的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T05:54:41.440

`onCreate`将方法中的代码包装在

```
if(savesInstanceState == null) {
    // your code here
} 
```

这将阻止框架尝试在方向或活动更改时重新创建所有内容（我认为这是正在发生的事情）。你应该（在大多数情况下）在每个活动中都有这个，这样框架就可以像大多数人期望的那样运行。

# core-data - 有核心数据回调方法吗？

> ID：10771811
> 
> 赞同：2
> 
> 时间：2012-05-27T05:11:07.830
> 
> 标签：core-data, ios4, notifications

我想知道当核心数据实体中发生某些事情时是否有任何特殊的方式来采取行动。

这就是我在本案中的意思。我有一个文件名作为属性存储在核心数据实体中。

在应用程序运行时，可能会从核心数据中删除具有此文件名的项目。

在这种情况下，我想要发生的是文件从文件系统中删除。这是我的问题：我是否需要编写自己的代码来执行此删除操作？或者有没有一种方法，我可以使用，所以当从核心数据中删除项目时会自动触发删除过程？

换句话说，是否有一个回调方法，如：

```
-(void) objectWillBeRemoved:((NSManagedObject*))object 
```

或者：

```
-(void) objectHasBeenRemoved:((NSManagedObject*))object 
```

感谢您提供任何相关提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T09:21:45.450

Check out `NSManagedObjectContextObjectsDidChangeNotification`. You can read about it in [NSManagedObjectContext Class Reference](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/NSManagedObjectContext.html).

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-30T08:13:47.497

`NSManagedObject#willSave`并且`NSManagedObject#didSave`应该做你想做的事。[见苹果文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObject_Class/Reference/NSManagedObject.html#//apple_ref/occ/instm/NSManagedObject/willSave)

# java - 使用 Java Long 包装器与原始 long 相加数字

> ID：10771813
> 
> 赞同：6
> 
> 时间：2012-05-27T05:11:31.563
> 
> 标签：java, performance, object, profiling, primitive

我正在运行此代码并得到意想不到的结果。我希望添加原语的循环执行得更快，但结果不一致。

```
import java.util.*;

public class Main {
    public static void main(String[] args) {
        StringBuilder output = new StringBuilder();
        long start = System.currentTimeMillis();
        long limit = 1000000000; //10^9
        long value = 0;
        for(long i = 0; i < limit; ++i){}
        long i;
        output.append("Base time\n");
        output.append(System.currentTimeMillis() - start + "ms\n");
        start = System.currentTimeMillis();
        for(long j = 0; j < limit; ++j) {
            value = value + j;
        }
        output.append("Using longs\n");
        output.append(System.currentTimeMillis() - start + "ms\n");
        start = System.currentTimeMillis();
        value = 0;
        for(long k = 0; k < limit; ++k) {
            value = value + (new Long(k));
        }
        output.append("Using Longs\n");
        output.append(System.currentTimeMillis() - start + "ms\n");
        System.out.print(output);
    }
} 
```

输出：

**基准时间 359ms 使用 longs 1842ms 使用 Longs 614ms**

我尝试在它自己的 java 程序中运行每个单独的测试，但结果是一样的。什么可能导致这种情况？

小细节：运行java 1.6

编辑：我让另外 2 个人试用此代码，其中一个得到了与我得到的完全相同的奇怪结果。另一个得到真正有意义的结果！我请那个获得正常结果的人给我们他的班级二进制文件。我们运行它，我们仍然得到奇怪的结果。问题不在编译时（我认为）。我正在运行 1.6.0_31，获得正常结果的人在 1.6.0_16，像我一样获得奇怪结果的人在 1.7.0_04。

编辑：在程序开始时使用 Thread.sleep(5000) 获得相同的结果。在整个程序中使用while循环也可以获得相同的结果（查看在java完全启动后时间是否会收敛到正常时间）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T05:27:23.580

我怀疑这是 JVM 预热效应。具体来说，代码在某个时候被 JIT 编译，这会扭曲您所看到的时间。

将整个批次放在一个循环中，并忽略报告的时间，直到它们稳定下来。（但请注意，它们不会完全稳定。垃圾正在生成，因此 GC 需要偶尔启动。这可能会扭曲时间，至少有点。处理这个问题的最好方法是运行外循环的大量迭代，并计算/显示平均次数。）

另一个问题是，某些 Java 版本上的 JIT 编译器*可能*会优化掉您尝试测试的内容：

*   它可以计算出`Long`可以优化对象的创建和立即拆箱。（谢谢路易斯！）

*   它可以找出循环正在做“忙碌的工作”......并完全优化它们。（`value`一旦每个循环结束，就不使用 的值。）

* * *

FWIW，一般建议你使用，`Long.valueOf(long)`而不是`new Long(long)`因为前者可以使用缓存`Long`实例。但是，在这种情况下，我们可以预测除了前几次循环迭代之外的所有循环中都会出现缓存未命中，因此该建议将无济于事。如果有的话，它可能会使有问题的循环变慢。

* * *

**更新**

我自己做了一些调查，结果如下：

```
import java.util.*;

public class Main {
    public static void main(String[] args) {
        while (true) {
        test();
        }
    }

    private static void test() {
        long start = System.currentTimeMillis();
        long limit = 10000000; //10^9
        long value = 0;
        for(long i = 0; i < limit; ++i){}
        long t1 = System.currentTimeMillis() - start;
        start = System.currentTimeMillis();
        for(long j = 0; j < limit; ++j) {
            value = value + j;
        }
        long t2 = System.currentTimeMillis() - start;
        start = System.currentTimeMillis();
        for(long k = 0; k < limit; ++k) {
            value = value + (new Long(k));
        }
        long t3 = System.currentTimeMillis() - start;
        System.out.print(t1 + " " + t2 + " " + t3 + " " + value + "\n");
    }
} 
```

这给了我以下输出。

```
28 58 2220 99999990000000
40 58 2182 99999990000000
36 49 157 99999990000000
34 51 157 99999990000000
37 49 158 99999990000000
33 52 158 99999990000000
33 50 159 99999990000000
33 54 159 99999990000000
35 52 159 99999990000000
33 52 159 99999990000000
31 50 157 99999990000000
34 51 156 99999990000000
33 50 159 99999990000000 
```

请注意，前两列非常稳定，但第三列在第 3 次迭代中显示出显着的加速……可能表明 JIT 编译已经发生。

有趣的是，在我将测试分离到一个单独的方法之前，我没有看到第三次迭代的加速。这些数字看起来都像前两行。这似乎是说 JVM（我正在使用的）不会 JIT 编译当前正在执行的方法......或类似的东西。

无论如何，这表明（对我而言）应该有一个热身效果。如果您没有看到预热效果，那么您的基准测试正在做一些抑制 JIT 编译的事情......因此对于实际应用程序没有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T05:20:07.790

我也很惊讶。

我的第一个猜测是无意的“[自动装箱](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)”，但这显然不是您的示例代码中的问题。

此链接可能会提供线索：

> [http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Long.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Long.html)
> 
> public static Long valueOf(long l)
> 
> 返回一个 Long 实例，表示指定的 long 值。如果不需要新的 Long 实例，则通常应优先使用此方法而不是构造函数 Long(long)，因为此方法可能会通过缓存频繁请求的值来显着提高空间和时间性能。
> 
> ```
> Parameters:
>     l - a long value. 
> 
> Returns:
>     a Long instance representing l.
> 
> Since:
>     1.5 
> ```

但是，是的，我希望使用包装器（例如“Long”）花费更多时间和更多空间。我*不希望使用包装器会**快*三倍！

==================================================== ===============================

附录：

我用你的代码得到了这些结果：

```
Base time     6878ms
Using longs  10515ms
Using Longs 428022ms 
```

我在 pokey 32 位单核 CPU 上运行 JDK 1.6.0_16。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T06:20:35.157

好的 - 这是一个稍微不同的版本，以及我的结果（运行 JDK 1.6.0_16 pokey 32 位单代码 CPU）：

```
import java.util.*;

/*
Test      Base   longs  Longs/new  Longs/valueOf
----      ----   -----  ---------  -------------
   0       343     896       3431           6025
   1       342     957       3401           5796
   2       342     881       3379           5742
*/

public class LongTest {

    private static int limit = 100000000;
    private static int ntimes = 3;
    private static final long[] base = new long[ntimes];
    private static final long[] primitives = new long[ntimes];
    private static final long[] wrappers1 = new long[ntimes];
    private static final long[] wrappers2 = new long[ntimes];

    private static void test_base (int idx) {
       long start = System.currentTimeMillis();
       for (int i = 0; i < limit; ++i){}
       base[idx] = System.currentTimeMillis() - start;
    }

    private static void test_primitive (int idx) {
       long value = 0;
       long start = System.currentTimeMillis();
       for (int i = 0; i < limit; ++i){
         value = value + i;
       }
       primitives[idx] = System.currentTimeMillis() - start;
    }

    private static void test_wrappers1 (int idx) {
       long value = 0;
       long start = System.currentTimeMillis();
       for (int i = 0; i < limit; ++i){
         value = value + new Long(i);
       }
       wrappers1[idx] = System.currentTimeMillis() - start;
    }

    private static void test_wrappers2 (int idx) {
       long value = 0;
       long start = System.currentTimeMillis();
       for (int i = 0; i < limit; ++i){
         value = value + Long.valueOf(i);
       }
       wrappers2[idx] = System.currentTimeMillis() - start;
    }

    public static void main(String[] args) {

      for (int i=0; i < ntimes; i++) {
         test_base (i);
            test_primitive(i);
            test_wrappers1 (i);
            test_wrappers2 (i);
      }

      System.out.println ("Test      Base   longs  Longs/new  Longs/valueOf");
      System.out.println ("----      ----   -----  ---------  -------------");
      for (int i=0; i < ntimes; i++) {
         System.out.printf ("  %2d    %6d  %6d     %6d         %6d\n",
            i, base[i], primitives[i], wrappers1[i], wrappers2[i]);
       }
    }
} 
```

==================================================== ======================

2012 年 5 月 28 日：

以下是一些额外的时间，来自运行 Windows 7/64 并运行相同 JDK 修订版 1.6.0_16 的更快（但仍然适中）的双核 CPU：

```
/*
PC 1: limit = 100,000,000, ntimes = 3, JDK 1.6.0_16 (32-bit):
Test      Base   longs  Longs/new  Longs/valueOf
----      ----   -----  ---------  -------------
   0       343     896       3431           6025
   1       342     957       3401           5796
   2       342     881       3379           5742

PC 2: limit = 1,000,000,000, ntimes = 5,JDK 1.6.0_16 (64-bit):
Test      Base   longs  Longs/new  Longs/valueOf
----      ----   -----  ---------  -------------
   0         3       2       5627           5573
   1         0       0       5494           5537
   2         0       0       5475           5530
   3         0       0       5477           5505
   4         0       0       5487           5508

PC 2: "for loop" counters => long; limit = 10,000,000,000, ntimes = 5:
Test      Base   longs  Longs/new  Longs/valueOf
----      ----   -----  ---------  -------------
   0      6278    6302      53713          54064
   1      6273    6286      53547          53999
   2      6273    6294      53606          53986
   3      6274    6325      53593          53938
   4      6274    6279      53566          53974
*/ 
```

你会注意到：

1.  我没有使用 StringBuilder，我将所有的 I/O 分离出来，直到程序结束。

2.  “long”原语始终等同于“no-op”

3.  “长”包装器始终慢得多

4.  "new Long()" 比 "Long.valueOf()" 稍快

5.  将循环计数器从“int”更改为“long”会使前两列（“base”和“longs”慢得多*。*

6.  在前几次迭代之后，“JIT 预热”可以忽略不计......

7.  ... *provided* I/O (like System.out) and potentially memory-intensive activities (like StringBuilder) are moved *outside* of the actual test sections.

# android - Android — 流式传输广播元数据已删除音频

> ID：10771815
> 
> 赞同：1
> 
> 时间：2012-05-27T05:11:54.717
> 
> 标签：android, streaming, audio-streaming

对于 Android ICS，我编写了一个获取 Shoutcast 流的程序，然后它会删除元数据并将其保存到 sdcard，完美运行。

我现在想将“流”发送到媒体播放器。

我尝试使用 npr streamproxy 时没有任何乐趣。

是否可以“读取”我保存的音频文件？

# java - 将 PrintStream 转换为 PrintWriter

> ID：10771816
> 
> 赞同：11
> 
> 时间：2012-05-27T05:12:22.763
> 
> 标签：java, stream

除了使用apache 常见的转换之外，还有什么可能的转换`PrintStream`方式`PrintWriter`（反之亦然） ？`WriterOutputStream`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-27T05:18:05.583

要转换`PrintStream`为`PrintWriter`，请使用构造函数：[`PrintWriter(OutputStream out)`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintWriter.html#PrintWriter(java.io.OutputStream))

使用该构造函数，您可能会得到不正确的编码，因为`PrintStream`有一个编码但使用[`PrintWriter(OutputStream out)`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintWriter.html#PrintWriter(java.io.OutputStream))会忽略它并且只使用系统的默认字符集。如果您不想要系统默认值，则必须将编码保存在单独的字段或变量中并使用：

```
pw = new PrintWriter(new OutputStreamWriter(myPrintStream, encoding)); 
```

哪里`encoding`可以是（例如）`"UTF-8"`或[`Charset`](http://docs.oracle.com/javase/7/docs/api/java/nio/charset/Charset.html).

# css - 粘性页脚和内容

> ID：10771820
> 
> 赞同：0
> 
> 时间：2012-05-27T05:12:39.140
> 
> 标签：css, sticky-footer

我在这里使用粘性页脚：[http ://ryanfait.com/sticky-footer/](http://ryanfait.com/sticky-footer/)

CSS 看起来像这样：

```
* {
margin: 0;
}
html, body {
height: 100%;
}
.wrapper {
min-height: 100%;
height: auto !important;
height: 100%;
margin: 0 auto -4em;
}
.footer, .push {
height: 4em;
} 
```

像这样的HTML：

```
<html>
    <head>
        <link rel="stylesheet" href="layout.css" ... />
    </head>
    <body>
        <div class="wrapper">
            <p>Your website content here.</p>
            <div class="push"></div>
        </div>
        <div class="footer">
            <p>Copyright (c) 2008</p>
        </div>
    </body>
</html> 
```

如果我在包装器中添加另一个 div 是否可以以某种方式设置其高度以填充包装器？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T05:52:55.263

只需添加`height: 100%;`到要添加到包装器的 div

# sql - SQL Server 松散耦合表 - 性能注意事项？

> ID：10771823
> 
> 赞同：0
> 
> 时间：2012-05-27T05:13:00.260
> 
> 标签：sql, sql-server, database-design, relational-database, database-performance

我正在从头开始为新应用程序构建数据库模式，我的两个目标是松散耦合（可扩展性）和性能（但性能是最重要的）。我不确定在中央表中包含外键列是否是个好主意。使用示例可能会最好地理解我的问题（请记住，此示例纯属假设）：

我们有一张桌子，我们称这张桌子为“动物”。在这个表中，我们有几个条目，它们将为存储在数据库中的各种类型的“动物”定义属性。我们还有另一个名为“AnimalName”的表，其目的是将每个动物的名称与语言 ID 一起存储在“动物”表中（因此我们有一个表，将每个动物的名称存储在“每种语言的动物”表）。

我有两种实现上述表格的方法：

## 第一种方式

Animal 表：AnimalID (PK)
AnimalName 表：AnimalNameID (PK)、AnimalID (FK)、LanguageID (FK)、Name

查询看起来像这样：

`SELECT * FROM Animal a JOIN AnimalName an ON an.AnimalID = a.AnimalID and an.LanguageID = ? WHERE a.AnimalID = ?`

## 第二种方式

Animal 表：AnimalID (PK)、AnimalNameID (FK)
AnimalName 表：AnimalNameID (PK)、LanguageID (FK)、Name

查询看起来像这样：

`SELECT * FROM Animal a JOIN AnimalName an ON an.AnimalNameID = a.AnimalNameID and an.LanguageID = ? WHERE a.AnimalID = ?`

对于第二种方式，如果我要在 AnimalName 表中添加一个“AnimalID”FK 列，那么它也将支持第一种方式表示的查询。

以上哪一种方法将提供最快的性能（这是至关重要的！）？根据您的经验，您通常会推荐上述哪种方法？

非常感谢所有回答的人！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T08:50:36.823

只有第一种方法可以正确地模拟您描述的问题：*一种动物有很多名字，每种语言都有一个*。第二种方式模仿*动物的方式有**一个**名称，恰好是语言 foo*，与您的问题描述完全不同。

对于您所描述的这种查询，AnimalNames 表必须唯一地聚集在一起，`(AnimalId, LanguageId)`并将主键作为非聚集约束，或者甚至更好地`AnimalLanguageID`完全处理 PK 并为`(AnimalID, LanguageID)`.

您还必须阅读[设计索引](http://msdn.microsoft.com/en-us/library/ms190804%28v=sql.105%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T05:24:40.253

第一种方法在 Animals 和 AnimalName 之间提供标准的一对多关系，允许每个 Animal 有多个名称，这是有道理的。

第二种方式，每个Animal只得到一个名字，一个名字可以分配给许多动物，这是没有意义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T05:19:44.940

第二种方法更好。AnimalName 和 Animal 将具有一对多的关系，这在这里更有意义。

# iphone - NSXMLParser foundCDATA 用于特定元素

> ID：10771829
> 
> 赞同：2
> 
> 时间：2012-05-27T05:15:11.923
> 
> 标签：iphone, nsxmlparser

我有这个 XML 文件：

```
<item>
<title>App1</title>
<link><![CDATA[SomeLink]]></link>
<description><![CDATA[SomeText]]></description>
</item> 
```

如何获取每个元素的 CDATA 并将其保存到每个 NSMutableDictionary？foundCDATA 委托中没有要比较的 elementName。

我在 foundCharacters 中尝试了这一行：

```
if ([currentElement isEqualToString:@"link"]) [currentLink appendString:string]; 
```

但是我得到了 nil，并且我无法删除 foundCDATA 委托，因为我将它用于同一视图控制器中的另一个解析器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T06:07:55.947

> foundCDATA 委托中没有要比较的 elementName。

您的解析器委托之前将收到`-parser:didStartElement:namespaceURI:qualifiedName:attributes:`该元素。它应该使用它来更新其状态，以便在下一条消息进入时*知道*正在解析的元素。无论消息是什么`-foundCDATA:`或`-foundCharacters:`其他什么，都是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T06:06:54.927

您可以将实例变量（例如 NSString *currentElement）添加到委托类，然后通过将以下代码添加到委托来设置该变量的值：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {
    currentElement = elementName;
} 
```

然后，您将可以访问 foundCDATA 中当前元素的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T06:22:36.153

最好的（更准确地说是最通用的）方法是以某种方式从嵌套元素构建堆栈；实际上，这将使您能够在解析期间从上到下查看 XML 文档的整个结构。看看我在构建 RSS 解析器时如何做到这一点：[https ://github.com/H2CO3/RSSKit/blob/master/RSSParser.m](https://github.com/H2CO3/RSSKit/blob/master/RSSParser.m)

基本上，你要做的就是实现`parser:didStartElement:`等等`parser:didEndElement:`（为了简单起见，我没有输入完整的选择器名称）。然后维护一串类 Unix 文件路径（这就是我正在做的）在前一种方法中添加一个组件并在后一种方法中删除它，或者您可以构建一个 NSMutableArray 甚至一个自定义堆栈对象来推送必要的XML 元素的参数。

# ios - ios忽略viewWillDisappear

> ID：10771833
> 
> 赞同：0
> 
> 时间：2012-05-27T05:16:55.590
> 
> 标签：ios, uiview

我在标签视图上有一个表格；我将任何字段的表单标记为已更改，如果表单已更改（代替“保存”按钮），我想弹出一个带有“保存”/“取消”的 ActionSheet。在用户响应正在处理的 ActionSheet 之前，有什么方法可以阻止视图消失（或从视图堆栈中删除）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T14:49:19.810

几个想法：

1.  值得注意的是，Apple 的[人机界面指南](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/UEBestPractices/UEBestPractices.html#//apple_ref/doc/uid/TP40006556-CH20-SW23)(HIG) 明确不鼓励这种做法。他们建议应用程序应该“仅在必要时要求人们保存”，因为人们“应该相信他们的工作总是被保留，除非他们明确取消或删除它。” 也许在您的情况下，拥有此功能很重要，但通常不鼓励这样做。

2.  另一种方法是，如果您想让用户有机会恢复到旧设置，请提供一个“撤消”按钮，这样，您可以尊重 HIG 并有效地自动保存，但您也可以让用户明确恢复到先前的值如果他们真的需要。

3.  正如其他人所指出的，提示保存或丢弃的概念`viewWillDisappear`并不完全有效。在这个过程中逻辑上为时已晚。`viewWillDisappear`可能由于太多原因而被调用，其中许多原因不在您的控制范围内，并且未能及时返回该方法、引入新的用户界面元素等并不是无稽之谈。

4.  如果您真的，真的需要“保存”与“取消”用户界面，那么它更适合于模式界面（或推送一个新的视图控制器，您必须弹出它才能返回到您的标签栏视图控制器）带有保存和取消按钮，而不是标签栏界面。例如，您的标签栏视图可以显示当前值，您点击“编辑”按钮，该按钮会通过保存和取消按钮推送新视图。我们对您的应用了解不足，无法就您的情况给出建议是否合乎逻辑。（有关另一种方法，请参阅[在视图控制器中启用编辑模式](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/EnablingEditModeinaViewController/EnablingEditModeinaViewController.html)。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T05:23:14.737

`viewWillDisappear:`一旦应用程序进展到被调用的位置，您就无法阻止视图消失。要做的事情是创建一个函数，如：

```
- (void)saveAndClose {
    //Display sheet asking user what they want to do
}

- (void)dismissWithClickedButtonIndex:(NSInteger)buttonIndex animated:(BOOL)animated
{
    if (buttonIndex == 0) // 0 or whatever the index of your save button is
    {
        // Perform save functions
    }

    [self dismissModalViewControllerAnimated:YES]; // or pop the view controller if appropriate
} 
```

# java - 如何使用android提供的消息服务唤醒远程PC？

> ID：10771835
> 
> 赞同：0
> 
> 时间：2012-05-27T05:17:45.177
> 
> 标签：java, android, networking, android-asynctask, wake-on-lan

是否可以创建一个始终在后台运行并不断收听来自特定手机号码和特定格式的消息并采取必要措施的 android 应用程序？这是我必须唤醒远程电脑的一个想法（请参阅上一个问题）。为此，我需要使用 2 部安卓手机，手机 A 和手机 B。B 在偏远的地方，并且始终通过 wifi 连接到无线网络。它一直在收听来自 A 的消息（来自 A 的 SMS）。现在如果 A 向 B 发送类似“WAKE ON PC EE:00:B3:2F:56:12 密码”的消息，那么 B 应该在后台解析此消息并将魔术包发送到具有特定 mac 地址的 pc。这只是一个想法。是否可以创建这种应用程序？

```
initial setup:

        wired               wired    
modem------------router--------------PC(mac:EE:00:B3:2F:56:12)
                   |
                   |
                   |
                 wireless
                   |
                   |
                   |
                   ------------------android phone(B) 
```

嗨，是否可以在android中的2个应用程序之间发送消息（即在上述问题中，不是A向B的收件箱发送消息，A是否可以向B中运行的特定应用程序发送消息而不是收件箱？） ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T09:18:36.443

对于 SMS 侦听器的一部分，您可以使用 BroadcastReceiver 并像这样从您的 Pdus 中读取：

```
public class SmsController extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
    this.c=context;
    SmsMessage msgs[] = null;
    Bundle bundle = intent.getExtras();
    try {
        Object pdus[] = (Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];
        for (int n = 0; n < pdus.length; n++) {
            byte[] byteData = (byte[]) pdus[n];
            msgs[n] = SmsMessage.createFromPdu(byteData);
        }
    } catch (Exception e) {

    }
    for (int i = 0; i < msgs.length; i++) {
        String message = msgs[i].getDisplayMessageBody();
        if (message != null && message.length() > 0) {
            String from = msgs[i].getOriginatingAddress();
            if(message.contains("your code")){
                if(message.contains("MAC ADRESSE")){
                    controlRemotePC();
                } 
            }
        }
    }
    abortBroadcast();
}
} 
```

manifest.xml ：添加了这些权限和接收者。

```
 <uses-permission android:name="android.permission.WRITE_SMS" />
 <uses-permission android:name="android.permission.READ_SMS" />
 <uses-permission android:name="android.permission.RECEIVE_SMS" />

 <receiver android:name=".SmsController" >
        <intent-filter android:priority="999" >
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter>
 </receiver> 
```

# c++ - C++：为什么我不能用 sprintf 打印 const char*？

> ID：10771836
> 
> 赞同：5
> 
> 时间：2012-05-27T05:17:49.790
> 
> 标签：c++, string, pointers, constants, printf

我在这里想念什么？它快把我逼疯了！

我有一个返回**const char*的函数**

```
const char* Notation() const
{
    char s[10];
    int x=5;
    sprintf(s, "%d", x);
    return s;
} 
```

现在在代码的另一部分我正在这样做：

```
.....
.....
char str[50];       
sprintf(str, "%s", Notation());
.....
..... 
```

但**str**保持不变。

如果相反，我这样做：

```
.....
.....
char str[50];
str[0]=0;
strcat(str, Notation());
.....
..... 
```

**str**设置正确。

我想知道为什么**sprintf**不能按预期工作......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-27T05:21:24.843

您试图返回分配在堆栈上的数组，但其行为未定义。

```
const char* Notation() const
{
    char s[10];
    int x=5;
    sprintf(s, "%d", x);
    return s;
} 
```

从函数返回后，这里`s`就不存在了`Notation()`。如果您不关心线程安全，则可以将其`s`设为静态。

```
const char* Notation() const
{
    static char s[10];
    .... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-27T05:22:11.033

在这两种情况下，它都会调用未定义的行为，因为`Notation()`返回一个本地数组，该数组在返回时被销毁。你很*不幸*它在一种情况下有效，让你*觉得*它是正确的。

解决方案是`std::string`用作：

```
std::string Notation() const
{
    char s[10];
    int x=5;
    sprintf(s, "%d", x);
    return s; //it is okay now, s gets converted into std::string
} 
```

或使用 C++ 流作为：

```
std::string Notation() const
{
    int x=5;
    std::ostringstream oss;
    oss << x;
    return oss.str(); 
} 
```

进而：

```
char str[50];       
sprintf(str, "%s", Notation().c_str()); 
```

`std::ostringstream`(and) 的好处（和美）`std::string`是您不必事先知道输出的大小，这意味着您不必使用诸如`10`数组声明之类的幻数`char s[10]`。从这个意义上说，这些类是安全的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T05:24:19.163

`char s[10]`in`Notation`被放置在堆栈上，因此它在退出`Notation`函数后被销毁。此类变量称为[自动](http://en.wikipedia.org/wiki/Automatic_variable)。您需要使用以下命令将字符串保存在堆中`new`：

```
char *s = new char[10]; 
```

但是您必须手动释放此内存：

```
char str[50];
const char *nt = Notation();
sprintf(str, "%s", nt);
printf("%s", str);
delete[] nt; 
```

[如果您真的使用 C++，那么请使用Nawaz](https://stackoverflow.com/a/10771858/458723)建议的内置`string`类。如果您以某种方式限制为原始指针，则在外部分配缓冲区并将其作为*destanation*参数传递，例如 in或。`Notation`*`sprintf``strcat`*

# python - 在 Windows 7 上安装 hg-git，使用 MinGW 编译

> ID：10771845
> 
> 赞同：3
> 
> 时间：2012-05-27T05:19:19.200
> 
> 标签：python, git, mercurial, mingw, hg-git

我正在尝试按照[https://gist.github.com/1059280#comments](https://gist.github.com/1059280#comments)上的说明在 Win7 上安装 hg-git 并使用 MinGW 进行编译（通过阅读 StackOverflow 和其他地方，似乎唯一需要被编译的是 dulwich 包 [git for Python bindings of some sort, I collect.])

我正在使用 Python27，即使该站点上的指示指向 Python26，我认为这可能是问题所在。

我不愿意仅仅为了这个问题下载 Visual C++。

我到达以下方向：

```
Create an import library for MinGW gcc (http://mercurial.selenic.com/wiki/BuildingOnWindows)

> cd c:\python27\libs
> pexports c:\windows\system32\python27.dll > python26.def 
```

并获得以下回溯：

```
PS C:\python27\libs> pexports c:\windows\system32\python27.dll > python27.def
stat: No such file or directory
c:\mingw\bin\pexports.exe: c:\windows\system32\python27.dll: could not load PE image 
```

Python27.dll 存在。“stat”命令没有。

任何想法都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T01:31:59.787

如果您的主要目标是在 Windows 上拥有一个工作的 Hg-Git，我推荐的安装过程是：

1.  安装 dulwich 预编译的 TortoiseHg
2.  使用 TortoiseHg（GUI 或命令行）将[https://bitbucket.org/durin42/hg-git](https://bitbucket.org/durin42/hg-git)克隆到一个目录（现在，我将其称为 c:\hg-git）并更新为标记版本（例如对于 TortoiseHg 2.6 的 Hg-Git 0.3.4）。
3.  编辑 Mercurial.ini/.hgrc 文件（或每个存储库的 hgrc 文件）以启用扩展

所需的配置块如下所示：

```
[extensions]
hggit=c:\hg-git\hggit 
```

如果您使用的是 TortoiseHg 1.xx，您还需要在配置文件中或使用 GUI（TortoiseHG - 全局设置 - 扩展）启用书签扩展。

最近在 Hg-Git 邮件列表上讨论了这个主题： [https ://groups.google.com/d/topic/hg-git/lLHsYbxcTzI/discussion](https://groups.google.com/d/topic/hg-git/lLHsYbxcTzI/discussion)

关于如何安装 Hg-Git 的 TortoiseHg 文档（重要的部分是捆绑的 dulwich）： [https ://tortoisehg.bitbucket.io/manual/2.5/nonhg.html#hg-git-git](https://tortoisehg.bitbucket.io/manual/2.5/nonhg.html#hg-git-git)

TortoiseHg 中包含的 dulwich 版本可以从 TortoiseHg 安装目录下的 extension-versions.txt 的内容中导出。它标识了已发布的 Bitbucket 存储库中的修订。例如，TortoiseHg 2.6 附带 dulwich 哈希 71b73697d24b，从[这里](https://bitbucket.org/abderrahim/dulwich/changesets/tip/71b73697d24b)标记为 dulwich 0.8.5。

# ruby-on-rails - 如何禁用自动登录ruby

> ID：10771852
> 
> 赞同：2
> 
> 时间：2012-05-27T05:20:52.737
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在使用记录器记录变量的值以进行调试。因为自动调试日志很难找到值

如何静默自动记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T05:27:11.940

*如果您的*日志消息仍然进入日志，则无法完全关闭，但我可以想到几个解决方案：

1.  将日志记录设置为非常高的级别（如`:fatal`），然后在该级别记录您的消息。该日志级别的日志中不应有太多噪音。

2.  使用唯一标识符为您的日志消息添加前缀，例如`MYSTUFF`，然后在您跟踪日志时使用 grep ：`tail -f log/production.log | grep MYSTUFF`。这样做意味着您不必更改日志配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T05:29:49.930

您可以在`config/application.rb`. `config.log_level`定义 Rails 记录器的详细程度。可用的日志级别是：`:debug, :info, :warn, :error, :fatal`。

例子：

```
config.log_level = :warn 
```

另请阅读有关 Logger 的信息：http: [//guides.rubyonrails.org/debugging_rails_applications.html#the-logger](http://guides.rubyonrails.org/debugging_rails_applications.html#the-logger)

# objective-c - 如何格式化 Objective-C 中计算的最终结果数字？

> ID：10771856
> 
> 赞同：0
> 
> 时间：2012-05-27T05:21:35.457
> 
> 标签：objective-c

我有这个代码：

```
double s = [year.text doubleValue]*31536000;
second.text=[[NSString alloc] initWithFormat:@"%2g", s]; 
```

当我尝试计算最终结果时`3.1536e+07`

我如何在`31536000`没有的情况下做出结果`e+07`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T05:31:19.557

如果指数小于 -4 或大于或等于精度，则and`%g`转换以or`%G`的样式打印参数；否则他们会使用这种风格。 你应该使用. `%e``%E``%f`
`%f`

```
double s = [year.text doubleValue]*31536000;
second.text=[[NSString alloc] initWithFormat:@"%f", s]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T05:38:28.200

你应该试试：

```
double s = [year.text doubleValue]*31536000;
second.text=[[NSString alloc] initWithFormat:@"%lf", s]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T05:26:57.887

简单使用 %f。

```
NSString *str = [[NSString alloc] initWithFormat:@"%f", s];
second.text = str; 
```

`second`可能导致字符串没有“e+07 ”

这`f`是因为我们正在使用[浮点数](http://en.wikipedia.org/wiki/Floating_point)。

# php - 使用 Jquery 防止页面重新加载按下锚点

> ID：10771861
> 
> 赞同：0
> 
> 时间：2012-05-27T05:24:11.583
> 
> 标签：php, jquery, process, reload

我正在尝试使用 jquery 来防止页面重新加载。我已经完成了整个代码 php ......并且可以正常工作。如果可以，请访问[http://www.jonathansconstruction.com/gallery3.php](http://www.jonathansconstruction.com/gallery3.php)并单击不同的画廊子菜单查看所有类别、厨房等...我正在使用 get 作为变量。但是，我想使用 jquery 来处理 php，因此我不必将其包含到 gallery.php 中，并且还可以防止页面重新加载，因为它会使页面重新启动，这可能会造成混淆。任何帮助将不胜感激谢谢

更新，感谢所有帮助的人：

到目前为止，我在网站上取得了进展，已在帖子顶部编辑了更正的 URL

流沙效果一切正常。但是，放置流沙效果时，Lytebox 不加载。，一开始它加载得很好，但是在按下其中一个菜单以获得流沙效果之后。它停止工作。另外，我想按照[http://www.jonathansconstruction.com/gallery.php](http://www.jonathansconstruction.com/gallery.php)中的方式设置菜单按钮的样式。我看到 jquery 没有添加和

*   与我下载的样本。还有那个说“画廊图片”在流沙演示中消失了。

    任何帮助表示赞赏。下面是我目前修改的 script.js 代码

    ```
    $(document).ready(function(){

    var items = $('.photo_show figure'),
        itemsByTags = {};

    // Looping though all the li items:

    items.each(function(i){
        var elem = $(this),
            tags = elem.data('tags').split(',');

        // Adding a data-id attribute. Required by the Quicksand plugin:
        elem.attr('data-id',i);

        $.each(tags,function(key,value){

            // Removing extra whitespace:
            value = $.trim(value);

            if(!(value in itemsByTags)){
                // Create an empty array to hold this item:
                itemsByTags[value] = [];
            }

            // Each item is added to one array per tag:
            itemsByTags[value].push(elem);
        });

    });

    // Creating the "Everything" option in the menu:
    createList('View All',items);

    // Looping though the arrays in itemsByTags:
    $.each(itemsByTags,function(k,v){
        createList(k,v);
    });

    $('#gallery_menu nav a').live('click',function(e){
        var link = $(this);

        link.addClass('current').siblings().removeClass('current');

        // Using the Quicksand plugin to animate the li items.
        // It uses data('list') defined by our createList function:

        $('.photo_show').quicksand(link.data('list').find('figure'), {adjustHeight: 'dynamic'} );
        e.preventDefault();
    });

    $('#gallery_menu nav a:first').click();

    function createList(text,items){

        // This is a helper function that takes the
        // text of a menu button and array of li items

        // Creating an empty unordered list:
        var ul = $('<ul>',{'class':'hidden'});

        $.each(items,function(){
            // Creating a copy of each li item
            // and adding it to the list:

            $(this).clone().appendTo(ul);
        });

        ul.appendTo('.photo_show');

        // Creating a menu item. The unordered list is added
        // as a data parameter (available via .data('list'):

        var a = $('<a>',{
            html: text,
            href:'#',
            data: {list:ul}
        }).appendTo('#gallery_menu nav');
    }
      }); 
    ```

    另一个编辑：

    到目前为止一切看起来都很好解决了很多问题，但是，由于某种原因，我在静态 html 上的跨度在加载 jquery 流沙代码时从显示甚至 html 代码中消失了..?? 这是我在网站的 html 部分拥有的代码，由于某种原因没有出现在实时网站上。

    ```
    <div id="portfolio">
                    <div class="photo_show"><span>Gallery Pictures</span> 
    ```

    跨度部分没有出现，不知道为什么

    我已经解决了最重要的部分。只是移动了 photo_show div 的顶部并编辑了定位...希望最后编辑流沙的 jquery 使我的日历消失，检查，是的，它是一些 jquery 冲突，但不知道是什么导致它..表单验证也不起作用以及......任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T06:29:28.100

在更正word 的 URL 中的**错字**后，我访问了您的网页链接`construction`。

我还看到了当单击 View All 、 Kitchen 和 Miscellaneous 时页面重新加载**的****问题**，**这**是**您**想要防止的。`sorting filter`

 ******不幸的是，这些按钮使用通过查询字符串`URL Links` *请求*重新加载带有过滤选项的网页。这种过滤方法无能为力，您只需重新加载网页，因为过滤是在页面加载时完成的。

也许这个[DEMO](http://demo.tutorialzine.com/2011/06/beautiful-portfolio-html5-jquery/)显示了您想要完成的任务，因为它不会重新加载网页。该演示具有易于创建和维护的标记，它是使用**[Quicksand](http://razorjack.net/quicksand/) jQuery 插件**构建的。使用右下角的链接可以访问该演示的教程，但是查看源 HTML 文件可以看出它是多么简单。

我使用**Quicksand 和 Shadowbox**制作了一个可下载的演示，这是一个灯箱替代品[HERE](http://shadowbox.1309102.n2.nabble.com/Quicksand-Demo-featuring-Shadowbox-tp7303500.html)，您可能会感兴趣，因为您的网页将过滤后的图标结果链接到一个名为[Lytebox](http://lytebox.com/index.php)的灯箱替代品。

由于您的编辑反映了您对**Lytebox**的兴趣，因此在 Quicksand 发生过滤事件后，以下标记将**重新初始化该灯箱替代方案。**相应地更新您的**script.js**文件。

```
$('.photo_show').quicksand(link.data('list').find('figure'), function(){

    adjustHeight = 'dynamic';
    initLytebox();

}); 
```

我还对您现有的**adjustHeight**进行了更正，因为它使用的是分号而不是等号，但正确的位置和使用是用于不相关的东西。

您没有看到**子弹**的原因是因为您没有使用`ul/li tags`演示正在使用的。******

# c++ - 将 nullptr 分配给 std::string 是否安全？

> ID：10771864
> 
> 赞同：35
> 
> 时间：2012-05-27T05:25:29.940
> 
> 标签：c++, string, c++-standard-library

我正在做一个小项目，并遇到了以下情况：

```
std::string myString;
#GetValue() returns a char*
myString = myObject.GetValue(); 
```

我的问题是如果`GetValue()` 返回 NULL`myString`变成一个空字符串？它是未定义的吗？还是会出现段错误？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-05-27T05:48:21.823

有趣的小问题。根据 C++11 标准，第 11 节。21.4.2.9,

```
basic_string(const charT* s, const Allocator& a = Allocator()); 
```

*要求： s 不得为空指针。*

由于标准不要求库在不满足此特定要求时抛出异常，因此传递空指针似乎会引发未定义的行为。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-27T05:46:35.920

这是运行时错误。

你应该做这个：

```
myString = ValueOrEmpty(myObject.GetValue()); 
```

其中`ValueOrEmpty`定义为：

```
std::string ValueOrEmpty(const char* s)
{
    return s == nullptr ? std::string() : s;
} 
```

或者你可以返回`const char*`（这更有意义）：

```
const char* ValueOrEmpty(const char* s)
{
    return s == nullptr ? "" : s; 
} 
```

如果您返回`const char*`，那么在调用站点，它将转换为`std::string`.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-27T05:51:06.393

> 我的问题是如果 GetValue() 返回 NULL myString 变成一个空字符串？它是未定义的吗？还是会出现段错误？

这是未定义的行为。编译器和运行时可以做任何它想做的事情并且仍然是合规的。

# python - 使用 python CSV 阅读器和 Geopy 解压的值太多

> ID：10771865
> 
> 赞同：0
> 
> 时间：2012-05-27T05:25:42.300
> 
> 标签：python, csv, geopy

```
import csv
from geopy import geocoders

g = geocoders.Google()

spamReader = csv.reader(open('locations.csv', 'rb'), delimiter='\t', quotechar='|')

for row in spamReader:
    a = ', '.join(row)
    #print a
    place, (lat, lng) = g.geocode(a, exactly_one=False)
    print "%s: %.5f, %.5f" % (place, lat, lng) 
```

location.csv 中的数据如下所示：

```
6943     Australia
6944     Australia
6945     Australia
6946     Australia
6947     Australia
6951     Australia 
```

出于某种原因，我留下了“太多值无法解包”错误。如果我使用带注释的打印语句，这些值会打印出来。有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T05:33:15.000

问题`exactly_one`在于`g.geocode`. 当我在 shell 中运行它时，我得到：

```
 >>> g.geocode('6943, Australia', exactly_one=False)
 [(u'Australia 6943, Villafontana, Tijuana Municipality, Baja California, Mexico',
  (32.4988788, -116.8620506)),
 (u'Australia 6943, Castelar, Buenos Aires Province, Argentina',
  (-34.7036339, -58.6423071)),
 (u'Australia 6943, Rosario, Santa Fe Province, Argentina',
  (-32.9913482, -60.6398934)),
 (u'Australia, Lebanon', (33.8879118, 35.4749439)),
 (u'Australia, Juliaca, Peru', (-15.4897806, -70.146677)),
 (u'Australia, Lima District 15007, Peru', (-12.0397296, -76.9944836)),
 (u'Australia, Manila, Philippines', (14.48538, 121.0394822)),
 (u'Australia, Conchal\xed, Santiago Metropolitan Region, Chile',
  (-33.3929606, -70.6780826)),
 (u'Australia, Chiguayante, Biob\xedo Region, Chile',
  (-36.9556346, -73.0145556)),
 (u'Australia, Copiap\xf3, Atacama Region, Chile', (-27.3978776, -70.2934656))] 
```

现在，您正试图将这个大列表分解为 just `place, (lat, lng)`，而实际上它是那些列表；`too many values`该列表中只有`to unpack`两个（`place`和`(lat, lng)`），因为实际上有10个。你可以做类似的事情

```
for place, (lat, lng) in g.geocode(a, exactly_one=False):
     print place, lat, lng 
```

或做一些其他类型的列表操作或其他。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T06:24:18.577

`g.geocode()`返回嵌套元组的**列表**`(place, (lat, lng))`。只需使用列表推导将其展平在单级元组**列表**`(place, lat, lng)`中，以便像这样进行操作：

```
data = ((place, lat, lng) for place, (lat, lng) in g.geocode(a, exactly_one=False))
print "\n".join("%s: %.5f, %.5f" % t for t in data) 
```

# asp.net - 如何将数据传递到 Google Charts？

> ID：10771867
> 
> 赞同：2
> 
> 时间：2012-05-27T05:26:42.973
> 
> 标签：asp.net, vb.net, visual-studio-2008, google-visualization

我正在尝试将 Google Charts 用于我的 ASP.NET 网站。我想将其包含在加载和计算 addrows 函数数据的页面上。

在计算出图表所需的计数后，如何将它们从后面的代码传递给页面上的脚本。我在 Visual Studio 2008 中使用 VB.NET。

将计数数据传递到图表的最佳方法是什么？

```
 // Load the Visualization API and the piechart package.
  google.load('visualization', '1.0', {'packages':['corechart']});

  // Set a callback to run when the Google Visualization API is loaded.
  google.setOnLoadCallback(drawChart);

  // Callback that creates and populates a data table,
  // instantiates the pie chart, passes in the data and
  // draws it.
  function drawChart() {

    // Create the data table.
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Topping');
    data.addColumn('number', 'Slices');
    data.addRows([
      ['Mushrooms', 3],
      ['Onions', 1],
      ['Olives', 1],
      ['Zucchini', 1],
      ['Pepperoni', 2]
    ]);

    // Set chart options
    var options = {'title':'How Much Pizza I Ate Last Night',
                   'width':400,
                   'height':300};

    // Instantiate and draw our chart, passing in some options.
    var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T08:15:38.303

您应该在服务器端创建 Google DataTable 类，用数据初始化它的实例，然后将其存储到 JSON 字符串，然后将该字符串分配给客户端的 Google DataTable，如下所示：

C＃

```
public string GoogleDataTableJson { get; private set; }

protected void Page_Load(object sender, EventArgs e)
{
  GoogleDataTable table = CreateAndFillGoogleDataTable();
  Serializer ser = new Serializer(typeof(GoogleDataTable);
  this.GoogleDataTableJson = ser.Serialize(table);
} 
```

然后在 JavaScript 中：

```
var data = new google.visualization.DataTable(<%= GoogleDataTableJson %>); 
```

或者您可以使用 .NET 助手，它可以使用 .NET DataTable 类来填充 Google 可视化：

[http://code.google.com/p/bortosky-google-visualization/](http://code.google.com/p/bortosky-google-visualization/)

# c - C 浮点文字 - 在 EBNF 中定义

> ID：10771872
> 
> 赞同：2
> 
> 时间：2012-05-27T05:28:00.083
> 
> 标签：c, floating-point, literals, ebnf

我试图找出为 C 浮点文字编写 EBNF 描述的正确方法。

这是我坚持的一个问题。我不知道怎么写，因为 float 不只是一种类型吗？到目前为止，我认为它可能只是

`float < literal >`

但这似乎太简单了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T05:40:26.363

是的，从解析器的角度来看，浮点数通常只是另一个标记。

确定输入字符的特定序列是浮点文字通常由词法分析器完成。它并不像您想的那么简单，但仍然几乎是使用正则表达式的单行代码。

# python - 使用 sys.settrace() 时，代码对象在导入期间具有意外的文件名

> ID：10771873
> 
> 赞同：2
> 
> 时间：2012-05-27T05:28:00.863
> 
> 标签：python, debugging, trace

我正在尝试编写一个程序，该程序将跟踪 Python 代码并打印本地变量值更改的报告。我可以很好地处理简单的赋值、循环和函数调用，但是当我使用`import`语句时遇到了问题。

我只想跟踪主模块中的代码，我想在它调用导入的模块时立即停止跟踪。当我导入一个我编写的简单模块时，我可以做到这一点，当框架的代码对象指向不同的文件时，我就停止跟踪。

`decimal`但是，当我尝试导入模块时，这不起作用。我可以消除模块中运行的大部分代码`decimal`，但是我调用了一个名为的代码块，该代码块`DecimalTuple`声称在主模块中运行。但是，这没有任何意义，因为该模块中不存在行号。

框架或代码对象上是否还有其他一些属性可以用来判断它们`DecimalTuple`不在主模块中？显然，我可以为 . 添加一个特殊情况`DecimalTuple`，但如果其他模块有同样的问题，这对我没有帮助。

这是我的例子。它执行引用的代码并使用 跟踪调用[`settrace()`](http://docs.python.org/library/sys.html#sys.settrace)。如果您注释掉它的前两行，`global_trace()`它还将显示在其他模块中执行的所有代码。

```
import sys

class tracer:

    count = 0

    def __init__(self):
        self.index = tracer.count = tracer.count + 1

    def global_trace(self, frame, event, arg):
        if frame.f_code.co_filename != '<string>':
            return
        print 'global %d, line %d: %s, %s' % (self.index,
                                         frame.f_lineno,
                                         event,
                                         frame.f_code)
        return tracer().local_trace

    def local_trace(self, frame, event, arg):
        print 'local %d, line %d: %s, %s' % (self.index,
                                         frame.f_lineno,
                                         event,
                                         frame.f_code)
        return self.local_trace

code = """\
def foo(r):
    return r + 3

y = foo(2)

import decimal

x = decimal.Decimal('10')
"""

sys.settrace(tracer().global_trace)

exec code in dict() 
```

这是跟踪输出。可以看到，调用`foo()`和执行都在`<string>`代表我作为主模块传入的代码串的模块中。然而，当它到达第 6 行的 import 语句时，它开始调用不可能在`<string>`模块中的代码。

```
global 1, line 1: call, <code object <module> at 0x266a030, file "<string>", line 1>
local 2, line 1: line, <code object <module> at 0x266a030, file "<string>", line 1>
local 2, line 4: line, <code object <module> at 0x266a030, file "<string>", line 1>
global 1, line 1: call, <code object foo at 0x266a730, file "<string>", line 1>
local 3, line 2: line, <code object foo at 0x266a730, file "<string>", line 1>
local 3, line 2: return, <code object foo at 0x266a730, file "<string>", line 1>
local 2, line 6: line, <code object <module> at 0x266a030, file "<string>", line 1>
global 1, line 1: call, <code object <module> at 0x27c2130, file "<string>", line 1>
local 4, line 1: line, <code object <module> at 0x27c2130, file "<string>", line 1>
global 1, line 1: call, <code object DecimalTuple at 0x27c21b0, file "<string>", line 1>
local 5, line 1: line, <code object DecimalTuple at 0x27c21b0, file "<string>", line 1>
local 5, line 2: line, <code object DecimalTuple at 0x27c21b0, file "<string>", line 1>
local 5, line 4: line, <code object DecimalTuple at 0x27c21b0, file "<string>", line 1>
local 5, line 6: line, <code object DecimalTuple at 0x27c21b0, file "<string>", line 1>
local 5, line 8: line, <code object DecimalTuple at 0x27c21b0, file "<string>", line 1>
local 5, line 12: line, <code object DecimalTuple at 0x27c21b0, file "<string>", line 1>
local 5, line 13: line, <code object DecimalTuple at 0x27c21b0, file "<string>", line 1>
local 5, line 20: line, <code object DecimalTuple at 0x27c21b0, file "<string>", line 1>
local 5, line 24: line, <code object DecimalTuple at 0x27c21b0, file "<string>", line 1>
local 5, line 28: line, <code object DecimalTuple at 0x27c21b0, file "<string>", line 1>
local 5, line 30: line, <code object DecimalTuple at 0x27c21b0, file "<string>", line 1>
local 5, line 37: line, <code object DecimalTuple at 0x27c21b0, file "<string>", line 1>
local 5, line 41: line, <code object DecimalTuple at 0x27c21b0, file "<string>", line 1>
local 5, line 42: line, <code object DecimalTuple at 0x27c21b0, file "<string>", line 1>
local 5, line 43: line, <code object DecimalTuple at 0x27c21b0, file "<string>", line 1>
local 5, line 43: return, <code object DecimalTuple at 0x27c21b0, file "<string>", line 1>
local 4, line 1: return, <code object <module> at 0x27c2130, file "<string>", line 1>
local 2, line 8: line, <code object <module> at 0x266a030, file "<string>", line 1>
local 2, line 8: return, <code object <module> at 0x266a030, file "<string>", line 1> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T06:49:11.903

事实证明，发生这种情况是因为`collections.namedtuple`做了一些非常奇怪的事情（并且`DecimalTuple`是 a `namedtuple`，因此您`import decimal`随后调用此代码的调用）。碰巧的是，在第 300 行左右`collections.py`（至少在 Python 2.7 中 - 您的行号可能在不同版本中有所不同），您将看到一条评论：

```
# Execute the template string in a temporary namespace and
# support tracing utilities by setting a value for frame.f_globals['__name__'] 
```

之后的代码会导致您的跟踪器误解它正在观察的内容 - 因为创建类的模板是使用`exec`自身完成的，所以在`<string>`“文件”中执行了更多代码，而不是*您的* `<string>`.

# node.js - Node.js Https 请求错误

> ID：10771875
> 
> 赞同：8
> 
> 时间：2012-05-27T05:28:39.380
> 
> 标签：node.js, https

我已经尝试过[文档中的示例，](//nodejs.org/api/https.html#https_https_request_options_callback)效果很好。

但是当我将 URL 更改为 时`https://api.mercadolibre.com/sites/`，请求会挂起。我唯一得到的是：

```
{ [Error: socket hang up] code: 'ECONNRESET' } 
```

这是我的代码：

```
var https = require('https');

this.dispatch = function(req, res) {
  var renderHtml = function(content) {
    res.writeHead(200, {'Content-Type': 'text/html'});
    res.end(content, 'utf-8');
  }

  var parts = req.url.split('/');

  var options = {
    host: 'api.mercadolibre.com',
    port: 443,
    path: '/sites/',
    method: 'GET'
  };

  var request = https.request(options, function(res) {
    console.log("statusCode: ", res.statusCode);
    console.log("headers: ", res.headers);

    res.on('data', function(d) {
      process.stdout.write(d);
    });
  });

  request.on('error', function(e) {
    console.error('error');
    console.error(e);
  });

  request.end();
  return 'item id:' + parts[2];
}; 
```

我尝试过使用 curl、soapui 和浏览器。在所有情况下都很好用，但使用 node.js 就不行了。

我怎样才能获得更多关于正在发生的事情的数据？

*添加*

我使用 curl： curl --sslv3 [https://api.mercadolibre.com/sites/](https://api.mercadolibre.com/sites/)有效。我在centos 6中测试过同样的东西并且也可以工作。我已经从源头重新安装了节点，同样的问题。我的操作系统是 ubuntu 12.04。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T16:57:25.680

我不确定`api.mercadolibre.com`网站，但如果我删除`port`参数，我可以调用 API，如以下代码：

```
var options = {
    host: 'api.mercadolibre.com',
    path: '/sites/',
    method: 'GET'
}; 
```

我们还需要添加参数来支持 SSL 版本 3：

```
https.globalAgent.options.secureProtocol = 'SSLv3_method'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T03:53:52.140

由于它与 curl 一起使用，请尝试使用 node-curl 模块。在我切换到 node-curl 之前，我花了一整天的时间试图让它在 node.js 中使用 http 和/或 https 模块工作。

尝试这个：

```
var curl = require('node-curl');
curl('https://api.mercadolibre.com/sites/', {SSLVERSION: 3}, function(err, res) {
    var body = res.body;
    res.close();
    console.log(body);
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-27T06:45:40.963

为什么不使用[请求](https://github.com/mikeal/request)之类的库来为您处理详细信息？

```
var request = require('request');

request('https://api.mercadolibre.com/sites/', {}, function(err, res, body) {
  console.log("Got body: ", body);
}); 
```

这产生：

```
Got body:  [{"id":"MLA","name":"Argentina"},{"id":"MLB","name":"Brasil"},{"id":"MCO","name":"Colombia"},{"id":"MCR","name":"Costa Rica"},{"id":"MEC","name":"Ecuador"},{"id":"MLC","name":"Chile"},{"id":"MLM","name":"Mexico"},{"id":"MLU","name":"Uruguay"},{"id":"MLV","name":"Venezuela"},{"id":"MPA","name":"Panamá"},{"id":"MPE","name":"Perú"},{"id":"MPT","name":"Portugal"},{"id":"MRD","name":"Dominicana"}] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-09T17:02:12.227

同样在这里，使用 curl 但不使用 node.js。

问题：在 CentOS-5 上 curl 使用提供的 openssl 库，因此使用 centos 标准 /etc/pki/tls/certs/ca-bundle.crt 进行 CA 检查。

node.js 在哪里寻找？，通过 strace，我看不到任何对 CA 文件的引用以进行检查。接受来自知名旧发行者的具有有效 SSL 证书的服务器的 Node.js 请求，但不接受具有自己 CA 的我自己的网络服务器。我将自己的 CA.crt 放在 ca-bundle.crt 文件中，所以现在 curl 接受它，但不是 node.js。

目前唯一的解决方案是停用我的开发盒的验证检查：

```
 var client = require('https');
    var download_options = url.parse(sourceUrl);
    download_options.method = "GET";
    download_options.agent = false;
    download_options.rejectUnauthorized = false; / HERE to accept all SSL-certificates */

    var download_request = client.request(download_options); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T10:10:33.603

我认为您在需要指定请求的代理后面。代理设置由 node-curl 使用的 libcurl 自动检测。因此请求在 node-curl 中传递。

因此，找出您的组织使用的代理 IP 和端口，然后尝试以下操作：

```
var request = require('request');
request({
    uri : 'https://mail.google.com/mail',
    proxy : 'http://<proxy ip>:<proxy port>'
}, function (error, response, body) {
    if (!error && response.statusCode == 200) {
        console.log(body) // Print the google web page.
    }else{
        console.log(error);
        console.log(response.statusCode);
    }
}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-21T20:13:13.643

如果您这样做，您将收到 ECONNRESET 错误：

```
post_options.path = 'history';
...
var req = http.request(post_options, function(res) {
... 
```

也就是说，您需要确保您的路径是`/`这样的：

```
post_options.path = '/history';
... 
```

# dojo - 新的 dojo dgrid 小部件无法正常工作并显示在自定义小部件中

> ID：10771877
> 
> 赞同：1
> 
> 时间：2012-05-27T05:29:58.673
> 
> 标签：dojo, dgrid

我正在研究一个 dojo 网格，这是新的 dojo dgrid，但我通过调用 html 标记文件上的 id 使 dgrid 工作，但我需要创建一个小部件，类似于将我的网格放入其中并能够访问的东西它通过 html 使用 dojotype。

我花了大约三天的时间来解决这个问题，但由于某种原因，如果我在我创建的小部件中声明它，我的网格不会显示。

下面是我的代码示例：

```
require([
  "dojo/_base/declare", "dojo/dom-construct", "dojo/parser", "dojo/ready",
  "dijit/_WidgetBase", "dijit/_TemplatedMixin", "dgrid/Grid", "dgrid/Keyboard",
  "dgrid/Selection","dojo/text!./templates/dumHTML.html", "dojo/domReady!"
], function(declare, domConstruct, parser, ready, _WidgetBase, _TemplatedMixin, Grid, Keyboard, Selection, template) {

  declare("Grid", [_WidgetBase, _TemplatedMixin], {

    templateString: template,
    widgetsInTemplate: true,

    postCreate: function() {
      var self = this;
      this.inherited(arguments);
      this._showGrid();
    },

    _showGrid: function() {

      //json data string
      var gridData =[
        {'id': '10', 'filename':'budget.pdf','icon':'pdf'},
        {'id': '20', 'filename':'thevampirediary.avi','icon':'xsl'},
        {'id': '30', 'filename':'budget2.xsl','icon':'xsl'},
        {'id': '40', 'filename':'budget3.doc','icon':'doc'},
        {'id': '50', 'filename':'thevampirediary.avi','icon':'xsl'}
      ];

      // Create a new constructor by mixing in the components
      var DGrid = declare([Grid, Keyboard, Selection]);

      var grid = new DGrid( {
        columns: {
          ID: {
            label: " ",
            field: "id",
            hidden: true,
            sortable: false,
            formatter: function(id) {
              return '<div style="visibility: hidden>'+id+' </div>';
            }
          },
          filename: {
            field: "filename",
            label: "File name",
            sortable: true,
            formatter: function(filename) {
              return '<div style="float:left ">'+filename+' </div>';
            }
          },
          icon: {
            field: "icon",
            label:" ",
            sortable: false,
            formatter: function(icon) {
              return '<img src="resources/' + icon + '.png" width="20px" hieght="20px"/>';
            }
          }
        },

        // for Selection; only select a single row at a time
        selectionMode: "single",

        // for Keyboard; allow only row-level keyboard navigation
        cellNavigation: true

      }, "grid");

      grid.renderArray(gridData);
    }

  });

  ready( function() {
    // Call the parser manually so it runs after our widget is defined,
    // and page has finished loading
    parser.parse();
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T08:30:52.717

我只是 dgrid 的初学者，遇到了同样的问题。看完这篇文章，我解决了。[https://github.com/SitePen/dgrid/wiki/Working-with-Widgets](https://github.com/SitePen/dgrid/wiki/Working-with-Widgets) 解决方案是：**在 Dgrid 实例中混合 DijitRegistry。**

这是我的代码。希望对初学者有所帮助。*ModuleWithGuideBar*是我的自定义小部件（使用 TemplatedMixin 声明，_WidgetsInTemplateMixin）。

```
define([
    "dojo/_base/declare",
    "dijit/registry",
    "common/widget/ModuleWithGuideBar",
    "dgrid/OnDemandGrid",
    "dgrid/Keyboard",
    "dgrid/Selection",
    "dgrid/extensions/DijitRegistry",
    "dojo/store/Memory",
    "dijit/layout/ContentPane"
], function (declare, registry, ModuleWithGuideBar, OnDemandGrid, Keyboard, Selection, DijitRegistry, Memory, ContentPane) {
    return declare("app.management.module.event", [ModuleWithGuideBar], {
        class:"module_event",
        _grid:null,
        postCreate:function () {
            this.inherited(arguments);

            var gridContainer = new ContentPane({region:'center'});
            //add to data-dojo-attach-point
            this.moduleContent.addChild(gridContainer);
            var memoryStore = new Memory({data:[
                { first:"Bob", last:"Barker", age:89 },
                { first:"Vanna", last:"White", age:55 },
                { first:"Pat", last:"Sajak", age:65 }
            ]});
            this._grid = new declare([OnDemandGrid, Keyboard, Selection, DijitRegistry])({
                columns:{
                    first:{ label:"first" },
                    last:{ label:"last" },
                    age:{ label:"age" }
                },
                store:memoryStore
            });
            gridContainer.addChild(this._grid);
        }
    });
}); 
```

# jquery - 点击回车时提交基于标签的表单

> ID：10771881
> 
> 赞同：1
> 
> 时间：2012-05-27T05:31:25.883
> 
> 标签：jquery

我有一个基于标签的搜索表单（就像您在 Facebook 或 S/O 上看到的基于标签的文本框，您可以在其中输入单词并按键盘上相应的分隔键）

在我的网站上，您在文本字段中输入一个单词，然后按 Enter 键以“确认”或“接受”该关键字，这样您就可以输入另一个关键字。

这样做的问题是，即使您可能已经完成输入搜索查询，但按 Enter 不会提交表单（显然），因为 e.preventDefault() 已启用，因此我可以使用输入按钮接受/确认每个标签.

我想要做的是，如果他们没有输入任何（或任何新的）标签，则在他们按 Enter 键时提交表单，而不是（尽管有点）不方便我的用户。

我将尝试用这张图片更清楚地解释它： ![在此处输入图像描述](../Images/2b81248c08b0b642385ad981381e80f1.png)

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T05:41:08.030

我的第一个建议是检查状态。例如，当他们在选择标签的过程中，您可以将类添加`.tagging`到元素中。当他们按下时，`Enter`您可以检查`.tagging`该类是否在元素上。如果是，则完成标记选择并删除该类。如果该类不在元素上，则意味着它们没有标记，因此您可以继续提交更改。

```
$("#tags").on("keypress", function(e){
    e.preventDefault();
    if ( e.which === 13 ) {
        if ( $(this).is(".tagging") ) {
            /* Add tag, remove class */
        } else {
            /* Submit data */
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T05:57:07.747

```
$("#tags").keyup( function(e){
    if ( e.which === 13 ) {
        if ( /*value is not empty*/ ) { //add tag             
        } else {
            $("#formID").submit();
        }
    }
}); 
```

我认为这就是你要找的

# jquery - jquery load 函数加载错误的阿拉伯文本

> ID：10771885
> 
> 赞同：0
> 
> 时间：2012-05-27T05:32:02.600
> 
> 标签：jquery, get, load, arabic

我正在使用加载函数来加载 DIV 的 html 内容。内容包含阿拉伯字符，加载阿拉伯字符后显示为?????????，我也尝试了 $.get 函数同样的问题。如果我直接从浏览器打开 html，阿拉伯文 apperas currectlly。任何人都可以帮助如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T05:42:18.343

要显示阿拉伯语文本，您需要进行一些编码并更改浏览器设置。您可以从以下链接获得帮助：

[如何在具有严格文档类型的 HTML 页面中查看阿拉伯/波斯数字？](https://stackoverflow.com/questions/5635939/how-can-i-view-arabic-persian-numbers-in-a-html-page-with-strict-doctype)

[http://www.w3.org/International/tutorials/bidi-xhtml/](http://www.w3.org/International/tutorials/bidi-xhtml/)

[HTML 阿拉伯文本](https://stackoverflow.com/questions/4724223/html-arabic-text)

[http://www.alanwood.net/unicode/arabic.html](http://www.alanwood.net/unicode/arabic.html)

你可以试试这个

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T05:50:12.897

先生，只需将编码格式添加到您的 html 内容中

```
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-07-27T23:10:59.697

要解决这个问题，只需在数据库连接后使用：

```
$mysqli->set_charset('utf8mb4');       // object oriented style 
<br/>
mysqli_set_charset($link, 'utf8mb4');  // procedural style 
```

问候

# css - 网页复制和粘贴替代内容

> ID：10771888
> 
> 赞同：1
> 
> 时间：2012-05-27T05:32:42.730
> 
> 标签：css, copy-paste, uppercase

我刚刚发现了一个关于复制和粘贴的有趣的事情。

前往暗黑破坏神 3 的网站（[http://us.battle.net/en/](http://us.battle.net/en/)）并导航到底部，您可以看到：

> ©2012 Blizzard Entertainment, Inc. 保留所有权利

网页里都是大写的文字，但是我复制粘贴后，自动转换成驼峰式。如何才能做到这一点？它是通过CSS完成的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T05:34:08.697

是的，它只是 CSS。具体来说`text-transform:uppercase`。

**HTML**

```
<div id="copyright">&copy;2012 Blizzard Entertainment, Inc.</div> 
```

**CSS**

```
#copyright {
  text-transform: uppercase;
} 
```

# android - 发现 Android 活动是否正在运行

> ID：10771889
> 
> 赞同：7
> 
> 时间：2012-05-27T05:33:06.010
> 
> 标签：android, android-activity, android-c2dm

我正在使用 C2DM，我的 BroadcastReceivers 将 C2DM 事件传播到本地服务。该服务通过将 id 发送到我的网络服务器 pus 来完成注册，它负责让设备知道新消息，但是如果应用程序（其中一个活动）启动，我们希望使用新数据向该活动发送一个意图，所以它可以被更新，如果不是 NotificationManager 用于通知用户。

问题是，如何知道活动正在运行？Application 对象不是一个选项，因为服务是应用程序的一部分，它显然会出现。在每个应用程序的 onDesroy 中取消注册也不是一个选项，因为它可能发生在方向更改中......

有什么标准的方法来完成它吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-27T06:50:37.093

**解决方案 1：** 您可以使用[ActivityManager](http://developer.android.com/reference/android/app/ActivityManager.html#getRunningAppProcesses)来检查 Activity 是否正在运行：

```
public boolean isActivityRunning() { 

ActivityManager activityManager = (ActivityManager)Monitor.this.getSystemService (Context.ACTIVITY_SERVICE); 
    List<RunningTaskInfo> activitys = activityManager.getRunningTasks(Integer.MAX_VALUE); 
    isActivityFound = false; 
    for (int i = 0; i < activitys.size(); i++) { 
        if (activitys.get(i).topActivity.toString().equalsIgnoreCase("ComponentInfo{com.example.testapp/com.example.testapp.Your_Activity_Name}")) {
            isActivityFound = true;
        }
    } 
    return isActivityFound; 
} 
```

需要将权限添加到您的清单..

```
<uses-permission  android:name="android.permission.GET_TASKS"/> 
```

**解决方案 2：** 您可以在要检查其是否正在运行的活动中使用静态变量，并将其存储在某个位置以便从您的服务或广播接收器访问：

```
static boolean CurrentlyRunning= false;
      public void onStart() {
         CurrentlyRunning= true; //Store status of Activity somewhere like in shared //preference 
      } 
      public void onStop() {
         CurrentlyRunning= false;//Store status of Activity somewhere like in shared //preference 
      } 
```

*我希望这可以帮到你！*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-27T12:46:10.683

如果您想通过您的活动（如果有任何正在运行）来处理传入的 Google Cloud 消息 (C2DM)，或者如果没有任何活动正在运行，则下一个方法将很有效。

在清单文件中注册一个 BroadcastReceiver。每当应用程序未运行时，此接收器将处理 C2D 消息。在您的活动中以编程方式注册另一个 BroadcastReceiver。每当活动运行时，此接收器将处理 C2D 消息。

AndoroidManifest.xml

```
<receiver
    android:name=".StaticReceiver"
    android:permission="com.google.android.c2dm.permission.SEND" >
    <intent-filter>
        <action android:name="com.google.android.c2dm.intent.RECEIVE" />
        <category android:name="com.mypackage" />
    </intent-filter>
</receiver> 
```

MyReceiver.java

```
public class StaticReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Trigger a Notification
    }
} 
```

我的活动.java

```
public class MyActivity extends ActionBarActivity {

    @Override
    protected void onResume() {
    super.onResume();

        final IntentFilter filter = new 
                IntentFilter("com.google.android.c2dm.intent.RECEIVE");
        filter.addCategory("com.mypackage");
        filter.setPriority(1); 
        registerReceiver(dynamicReceiver, filter, 
                "com.google.android.c2dm.permission.SEND", null);
    }

    @Override
    protected void onPause() {
        super.onPause();
        unregisterReceiver(dynamicReceiver);
    }

    private final BroadcastReceiver dynamicReceiver 
            = new BroadcastReceiver() 
    {
        @Override
        public void onReceive(Context context, Intent intent) {

            // TODO Handle C2DM

            // blocks passing broadcast to StaticReceiver instance
            abortBroadcast();
       }
    };
} 
```

笔记！要首先捕获广播，dynamicReceiver IntentFilter 的优先级必须高于 StaticReceiver 实例 IntentFilter 的优先级（默认优先级为“0”）。

PS。看起来 Google Cloud Messaging Service 发出的广播是有序广播。原创意作者：[CommonsWare](http://commonsware.com/blog/2010/08/11/activity-notification-ordered-broadcast.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T07:40:25.883

[从这里](https://stackoverflow.com/questions/5446565/android-how-do-i-check-if-activity-is-running)复制。

您可以在活动中使用静态变量。

```
class MyActivity extends Activity {
     static boolean active = false;

      public void onStart() {
         active = true;
      } 

      public void onStop() {
         active = false;
      }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-22T12:30:38.800

检查 Activity 是否正在运行的最简单方法是：

```
Context context = MyActivity.this; 

if (! ((Activity) context).isFinishing()) {
    //  Activity is running
} else {
    //  Activity has been finished
} 
```

注意：如果活动未运行，则不应执行任何与 UI 相关的操作。

# iphone - IOS 中的 Facebook 集成

> ID：10771891
> 
> 赞同：0
> 
> 时间：2012-05-27T05:33:35.023
> 
> 标签：iphone, ios, facebook, ios5

我在我的项目中使用 FBConnect 来集成 Facebook。但现在我在所有应用程序中看到，当用户点击 Facebook 按钮时，它直接进入设备中的 FaceBook 应用程序以打开登录。我认为这是通过 URLschema 完成的将应用程序与设备中的应用程序通信。但是在 Facebook 的情况下，我们如何才能做到这一点。

我的需要是，我的应用程序中有一个共享选项到 Facebook，所以当用户点击按钮时，它需要在设备中打开 Facebook 应用程序进行登录，成功登录后它也需要返回到我的应用程序。如何到这个？。是否有任何示例项目或应用程序可以做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T05:46:53.160

寻找 FBSessionDelegate。您提供在 FB 登录完成（成功与否）时获取回调的委托。此外，FBConnect 代码（参见 git://github.com/facebook/facebook-ios-sdk.git）有一个包含 Hackbook Xcode 项目的示例目录。那应该让你开始！

这是[Facebook iOS 教程](https://developers.facebook.com/docs/mobile/ios/build/)（使用 FBConnect）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T05:48:37.953

您可以使用 Graph API（使用 OAuth 201 身份验证协议）而不是 FBConnect ，它更新且更容易。您可以通过以下步骤实现它：-

1>从 facebook 的开发者门户获取唯一的 id 和 api 密钥。

2>在您的应用程序中显示facebook的登录页面。

3>允许用户通过以下网址登录

```
https://graph.facebook.com/oauth/authorize?
    client_id=[API key]&
    redirect_uri=http://www.facebook.com/connect/login_success.html&
    scope=[extended permissions]&
    type=user_agent&
    display=touch 
```

您可以在 UIWebView 中实现 FBLoginView 并呈现它。代码很大，所以我提供了[Ray Wendelich 的 Facebook Graph API的链接](http://www.raywenderlich.com/1488/how-to-use-facebooks-new-graph-api-from-your-iphone-app)

# javascript - 将文档加载到 iframe jquery 中

> ID：10771893
> 
> 赞同：-1
> 
> 时间：2012-05-27T05:34:05.727
> 
> 标签：javascript, jquery

我想访问当前加载的 iframe 文档并将该文档链接到另一个 iframe，为此我尝试了：

```
 $("#if1").attr("src", $("#if2").attr("src")); 
```

但这会再次加载文档。我想访问已经加载的文档`#if1`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T05:58:38.987

```
$("#if1").attr("src", $("#if2").attr("src")); 
```

*但这会再次加载文档。*

呃，是的，这就是你正在做的事情：你正在将 'src 设置`if1`为`if2`'s src。这就是它重新加载 iFrame 的原因...如果您在代码中交换 if1 和 if2 ，它可能会做您想做的事情——如果我能理解您的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T06:30:57.380

看看这个正在运行的演示：http: [//jsfiddle.net/aymansafadi/BanTV/5/show/](http://jsfiddle.net/aymansafadi/BanTV/5/show/)

您可能感兴趣的关键部分是：

```
$('#swap').on('click', function() {
    var iframe1 = $('#if1')[0].contentWindow.location.href;
    var iframe2 = $('#if2')[0].contentWindow.location.href;

    $('#if1')[0].contentWindow.location.href = iframe2;
    $('#if2')[0].contentWindow.location.href = iframe1;
}); 
```

> **注意：**只有当两个 iframe 与父窗口在同一个域下时，这以及您尝试的任何其他操作都将起作用。

* * *

您也可以使用`.src('attr')`设置**URL**，但不*获取*当前 URL。
演示：http: [//jsfiddle.net/aymansafadi/BanTV/7/show/](http://jsfiddle.net/aymansafadi/BanTV/7/show/)

```
$('#swap').on('click', function() {
    var iframe1 = $('#if1')[0].contentWindow.location.href;
    var iframe2 = $('#if2')[0].contentWindow.location.href;

    $('#if1').attr('src', iframe2);
    $('#if2').attr('src', iframe1);
}); 
```

# xml - xslt 中的查找表

> ID：10771896
> 
> 赞同：2
> 
> 时间：2012-05-27T05:35:48.093
> 
> 标签：xml, xslt

我有2个这样的xml文件

查找表，来自 url [http://www.and.com/lookup/administrative_division](http://www.and.com/lookup/administrative_division)

```
<lookup table="administrative_division">
    <entry>
        <code>01</code>
    <name>ACT</name>
</entry>
<entry>
    <code>02</code>
    <name>NSW</name>
</entry>
<entry>
    <code>03</code>
    <name>NT</name>
</entry> 
```

将链接到查找表以找出代码名称的主要 xml

```
<features>
    <feature>
        <administrative_division>01</administrative_division>
    </feature>
    <feature>
        <administrative_division>02</administrative_division>
    </feature>
    <feature>
        <administrative_division>03</administrative_division>
    </feature>
</features> 
```

这是我的努力：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:variable name="administrative" 
select="document('http://www.and.com/lookup/administrative_division')/lookup/entry" />

<xsl:template match="/">
<table border="1">

            <tbody>
                <xsl:for-each select="features/feature">
                    <tr>
                        <td>
                            <xsl:value-of select="$administrative[code=current()]/name" />
                        </td>       
                    </tr>
                </xsl:for-each>
            </tbody>
        </table>
</xsl:template>

</xsl:stylesheet> 
```

这个想法是通过jsp解析特征xml，然后将其传递给xsl，xsl将加载查找xml以与代码进行比较，然后显示实际名称而不是代码。我的问题是我运行时页面是空白的。所以谁能指出我正确的方法，我是 xls 的初学者。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T07:14:53.457

value-of 缺少一点：

```
<xsl:value-of select="$administrative[code=current()/administrative_division]/name" /> 
```

但是，您可能需要添加更多代码来生成有效的 HTML 页面（不确定如何应用 XSL），例如`html`and`body`标记。

# java - 将节点对象添加到 ArrayList 时出现 NullPointerException

> ID：10771898
> 
> 赞同：-2
> 
> 时间：2012-05-27T05:36:23.797
> 
> 标签：java, arraylist, nullpointerexception, variable-initialization

`NullPointerException`当我尝试运行此代码时，我得到了一个。我已将`Nodes`2、3 和 4 作为子节点分配给`Node1`. 我试图创建一个方法，该方法将遍历 Node1 中的所有子节点并返回列表。我不确定我做错了什么。

```
public class TestingArrays2 {

    List<Node> myList1;
    List<Node> myList2;
    List<Node> myList3;
    List<Node> myList4;

    private Node Node1;
    private Node Node2;
    private Node Node3;
    private Node Node4;

    public TestingArrays2() {
        myList1 = new ArrayList<Node>();
        myList2 = new ArrayList<Node>();
        myList3 = new ArrayList<Node>();
        myList4 = new ArrayList<Node>();

        myList1.add(Node2);
        myList1.add(Node3);
        myList1.add(Node4);

        Node1 = new Node("One", myList1);
        Node2 = new Node("Two", myList2);
        Node3 = new Node("Three", myList3);
        Node4 = new Node("Four", myList4);

        List<Node> allNodesArray = nodeArray(Node1);

        for (int i = 0; i < allNodesArray.size(); i++){
            System.out.println(allNodesArray.get(i).label);
        }
    }

    public static void main(String arg[]) {
        TestingArrays2 testArray = new TestingArrays2();
    }

    public List<Node> nodeArray(Node n){
        List<Node> tempList = new ArrayList<Node>();

        for (int i = 0; i < n.children.size(); i++){
            tempList.add(n.children.get(i));
        }

    return tempList;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T05:40:29.433

你不是在创建你的`Nodes`. 看到这些线...

```
private Node Node1;
private Node Node2;
private Node Node3;
private Node Node4; 
```

这些只是将变量声明为能够包含类型的对象`Node`。然而，它们最初是从一个`null`值开始的——即它们是空的。

然后你打电话给这些线路......

```
myList1.add(Node2);
myList1.add(Node3);
myList1.add(Node4); 
```

这会将`null`值插入到您的`List`中，因为您正在尝试添加尚未创建的对象。

因此，您需要更改代码，以便这些行...

```
Node1 = new Node("One", myList1);
Node2 = new Node("Two", myList2);
Node3 = new Node("Three", myList3);
Node4 = new Node("Four", myList4); 
```

出现在您尝试将`myList1.add()`它们添加到列表之前。这将首先创建`Node`对象，然后可以将其添加到您的`List`.

正如评论中提到的@BalusC，它`for`稍后在您的代码中的循环中失败，因为它试图调用`.label`一个`null`对象。按照上面的建议更正顺序将更正此问题，因为您的所有对象`List`现在都是`Nodes`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T05:41:48.063

这个：

```
myList1.add(Node2);
myList1.add(Node3);
myList1.add(Node4);

Node1 = new Node("One", myList1);
Node2 = new Node("Two", myList2);
Node3 = new Node("Three", myList3);
Node4 = new Node("Four", myList4); 
```

您正在尝试在创建节点之前将它们添加到列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T09:36:09.643

您的问题已经给出了很好的答案。

查看您的代码，我有几个建议的修改。

您正在测试类（的构造函数）中完成所有工作。在可能的情况下将其委托给 Node 类是更好的设计。也尽量不要在构造函数中做“工作”，只是初始化。

还可以查看我应用的代码约定，例如使用名词作为类名和以小写字母开头的变量名。

```
public class ArrayTest2 {

    public static void main(String arg[]) {

        Node node1 = new Node("One");

        node1.add(new Node("Two"));
        node1.add(new Node("Three"));
        node1.add(new Node("Four"));

        // this calls the toString method of node1
        System.out.println(node1);
    }

}

public class Node {

    private final String name;
    private final List<Node> children;

    public Node(String name) {
        this.name = name;
        this.children = new ArrayList<Node>();
    }

    public String getName() {
        return name;
    }

    public void add(Node children) {
        children.add(child);
    }

    @Override
    public String toString() {
        StringBuilder sb = new StringBuilder();
        sb.append(name);
        if(children.size() > 0) {
            sb.append("(");
            String separator = "";
            for (Node child : children){
                sb.append(separator).append(String.valueOf(child));
                separator = ",";
            }
            sb.append(")");
        }
        return sb.toString();
    }
} 
```

请注意，children 字段是私有的，并且没有 getter。提供对“children”等内部数据结构的直接访问被认为是不好的做法，因此我提供了一种“add”方法来添加节点。通过这种方式，类可以控制其数据发生的情况，这是一个重要的 OO 设计原则。

toString 方法构建节点的字符串表示。它附加节点名称，然后，如果有子节点，则将每个子节点的字符串表示附加到用括号括起来的逗号分隔列表中，因此应该打印如下内容：

```
One(Two,Three,Four) 
```

例如更复杂的结构：

```
Node node1 = new Node("One");
Node node2 = new Node("Two");
Node node3 = new Node("Three");
Node node4 = new Node("Four");
Node node5 = new Node("Five");
Node node6 = new Node("Six");
node1.add(node2);
node1.add(node3);
node2.add(node4);
node4.add(node5);
node4.add(node6); 
```

应该给：

```
One(Two(Four(Five,Six)),Three) 
```

免责声明：我的代码是手工制作、未经编译和未经测试的

# python - 这种排序方法使用什么算法？

> ID：10771899
> 
> 赞同：1
> 
> 时间：2012-05-27T05:36:30.587
> 
> 标签：python, algorithm, sorting

```
import sys
final_set = []
init_set = []
for i in range(1,len(sys.argv)):
    init_set.append(sys.argv[i])
for i in range(len(init_set)):
    cur_min = min(init_set)
    final_set.append(cur_min)
    init_set.remove(cur_min)
print final_set 
```

这个相当基本的排序算法必须已经有了一个名字。任何人都可以识别它及其时间复杂度吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T05:40:22.700

这似乎是具有二次复杂度的[选择排序](http://en.wikipedia.org/wiki/Selection_sort)。

# java - JPA 生成重复键

> ID：10771903
> 
> 赞同：1
> 
> 时间：2012-05-27T05:38:06.347
> 
> 标签：java, hibernate, postgresql, jpa, eclipselink

我有两个实体定义为：

```
@Entity
public class FileMaster implements java.io.Serializable{

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Long fileId;

@NotNull
@Column(unique = true)
private String fileNumber = "";
private String subject = "";

@Temporal(TemporalType.DATE)
private Date date=null;
private String authPerson="";
private String authDesign="";
private String department="";

@OneToMany(mappedBy = "fileMaster", cascade = CascadeType.ALL, orphanRemoval = true)
@JoinColumn(name="id") 
private Set<FileDetail> fileDetail = new HashSet<FileDetail>(); 
```

第二个实体：

```
@Entity
public class FileDetail implements java.io.Serializable{
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private Long pdfId;

//@NotNull
@Column(unique = true)
private String name;

//@NotNull
@ManyToOne 
private FileMaster fileMaster; 
```

下面的代码只是试图持久化两个主从表。第一次插入顺利，它提交记录：

```
Set<FileDetail> pdfFileNames = newUpload.getPdfFileNames();
EntityManager em = Persistence.createEntityManagerFactory("fms")                
                        .createEntityManager();
em.getTransaction().begin();
FileMaster fileMaster = new FileMaster();

fileMaster.setFileNumber((String) editorForm.getField("fileNumber").getValue());
fileMaster.setSubject((String) editorForm.getField("subject").getValue());
fileMaster.setAuthDesign((String) 
editorForm.getField("authDesign").getValue());
fileMaster.setAuthPerson((String) editorForm.getField("authPerson").getValue());
fileMaster.setDate((Date) editorForm.getField("date").getValue());
fileMaster.setFileDetail(pdfFileNames);
em.persist(fileMaster);

Iterator<FileDetail> iter = pdfFileNames.iterator();

while(iter.hasNext()) {
    FileDetail fileDetail = iter.next();        
    fileDetail.setName(fileDetail.getName());
    fileDetail.setFileMaster(fileMaster);
    em.persist(fileDetail);     
    }           
em.getTransaction().commit();    
em.close(); 
```

当我尝试插入第二条记录时......它给了我 PSQLException。由于我是 JPA 的新手……顺便说一句，我正在使用 Eclipselink 和 PostgreSQL 和 JPA……我发现很难解决这个问题。谁能帮我解决这个问题...让我也粘贴痕迹...

```
 May 27, 2012 10:08:02 AM com.vaadin.Application terminalError
 SEVERE: Terminal error:
 com.vaadin.event.ListenerMethod$MethodException
 Cause: javax.persistence.RollbackException: Exception [EclipseLink-4002] (Eclipse                          Services - 2.2.0.v20110202-r8913):      org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: org.postgresql.util.PSQLException: ERROR: duplicate key value     violates unique constraint "filedetail_pkey"
Detail: Key (pdfid)=(306) already exists.
Error Code: 0
Call: INSERT INTO FILEDETAIL (PDFID, NAME, FILEMASTER_FILEID) VALUES (?, ?, ?)
bind => [306, Manning Java Persistence with Hibernate 2nd.pdf, 3]
Query: InsertObjectQuery(Manning Java Persistence with Hibernate 2nd.pdf)
at com.vaadin.event.ListenerMethod.receiveEvent(ListenerMethod.java:532)
at com.vaadin.event.EventRouter.fireEvent(EventRouter.java:164)
at com.vaadin.ui.AbstractComponent.fireEvent(AbstractComponent.java:1219)
at com.vaadin.ui.Button.fireClick(Button.java:550)
at com.vaadin.ui.Button.changeVariables(Button.java:217)
at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.changeVariables(AbstractCommunicationManager.java:1451)
at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.handleVariableBurst(AbstractCommunicationManager.java:1399)
at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.handleVariables(AbstractCommunicationManager.java:1318)
at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.doHandleUidlRequest(AbstractCommunicationManager.java:763)
at com.vaadin.terminal.gwt.server.CommunicationManager.handleUidlRequest(CommunicationManager.java:296)
at com.vaadin.terminal.gwt.server.AbstractApplicationServlet.service(AbstractApplicationServlet.java:501)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:598)
at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:486)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119)
at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:524)
at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:233)
at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1065)
at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:413)
at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:192)
at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:999)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:250)
at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:149)
at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:111)
at org.eclipse.jetty.server.Server.handle(Server.java:350)
at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:454)
at org.eclipse.jetty.server.AbstractHttpConnection.content(AbstractHttpConnection.java:900)
at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.content(AbstractHttpConnection.java:954)
at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:851)
at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:77)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:606)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:46)
at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:603)
at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:538)
at java.lang.Thread.run(Unknown Source)
Caused by: javax.persistence.RollbackException: Exception [EclipseLink-4002] (Eclipse        Persistence Services - 2.2.0.v20110202-r8913):    org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: org.postgresql.util.PSQLException: ERROR: duplicate key value  violates unique constraint "filedetail_pkey"
Detail: Key (pdfid)=(306) already exists.
Error Code: 0
Call: INSERT INTO FILEDETAIL (PDFID, NAME, FILEMASTER_FILEID) VALUES (?, ?, ?)
bind => [306, Manning Java Persistence with Hibernate 2nd.pdf, 3]
Query: InsertObjectQuery(Manning Java Persistence with Hibernate 2nd.pdf)
at    org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commitInternal(Entit yTransactionImpl.java:102)
at  org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commit(EntityTransac tionImpl.java:63)
at com.complete.raspberry.webui.PersonEditor.save(PersonEditor.java:178)
at com.complete.raspberry.webui.PersonEditor.buttonClick(PersonEditor.java:120)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.vaadin.event.ListenerMethod.receiveEvent(ListenerMethod.java:512)
... 36 more
Caused by: Exception [EclipseLink-4002] (Eclipse Persistence Services -  2.2.0.v20110202-r8913): org.eclipse.persistence.exceptions.DatabaseException 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T05:47:21.480

您应该使用自动增量而不是实体来`GenerationType.IDENTITY`生成。`pdfid``GenerationType.AUTO``FileDetail`

```
@Entity
public class FileDetail implements java.io.Serializable{
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long pdfId;
} 
```

**GenerationType.IDENTITY**

> 指示持久性提供程序必须使用数据库标识列为实体分配主键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T13:27:46.810

尝试将登录设置为最好，看看发生了什么。

pdfFileNames 来自哪里？这是现有的对象，有现有的 id 吗？如果它们存在，您应该找到/合并它们，或者创建具有空 id 的新的。当您调用persist 时，确保它们没有现有的ID。

如果使用 SEQUENCE 还要确保您的增量与您的分配大小相匹配（默认为 50）。

# django - 如何覆盖管理员表单集中的删除行为

> ID：10771908
> 
> 赞同：1
> 
> 时间：2012-05-27T05:40:07.830
> 
> 标签：django, django-forms, django-admin

场景：

我有这样的模型：

```
class A(models.Model):
    ...

class B(models.Model):
    a = models.ForeignKey(A)
    ... 
```

在管理员我有这样的事情：

```
class AInlinde(admin.StackedInline):
    ...
    model = A
    ...

class BAdmin(admin.ModelAdmin):
     ...
     inlines = [AInline]
     ... 
```

现在我需要在用户删除内联中的某些模型时记录在日志中，但是我无法按照代码进行操作，直到现在，我知道`Badmin`有一个方法：`save_formset`，就是这样：

```
def save_formset(self, request, form, formset, change):
    """
    Given an inline formset save it to the database.
    """
    formset.save() 
```

但我认为这`formset`是通过方法生成的`modelformset_factory`，所以我不知道什么时候可以覆盖该表单集的删除行为

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-07-27T04:09:18.583

对于任何在 2017 年寻找软删除和记录删除的人。如今在 django 1.11 中，您可以覆盖**delete_existing**方法

## 对于常规表单集

```
class SoftDeleteModelFormSet(BaseModelFormSet):
    def delete_existing(self, obj, commit=True):
        """Deletes an existing model instance."""
        if commit:
            obj.deleted_at = datetime.datetime.now()
            obj.save()

            # log here 
```

## 对于相关型号

```
class SoftDeleteInlineFormSet(BaseInlineFormSet):
    def delete_existing(self, obj, commit=True):
        """Deletes an existing model instance."""
        if commit:
            obj.deleted_at = datetime.datetime.now()
            obj.save()

            # log here 
```

并将 modelformset_factory 与新的表单集一起使用

```
product_formset = modelformset_factory(
    ...
    formset = SoftDeleteModelFormSet,
    ...
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T16:31:20.177

覆盖表单集如何保存或删除对象的最佳方法是创建一个继承`BaseInlineFormSet`并覆盖方法`save`和的类`save_existing_objects`：

```
class NoDeleteFormset(BaseInlineFormSet):
    def save(self, commit=True, request=None):
        """Saves model instances for every form, adding and changing instances
        as necessary, and returns the list of instances.
        """
        if not commit:
            self.saved_forms = []
            def save_m2m():
                for form in self.saved_forms:
                    form.save_m2m()
            self.save_m2m = save_m2m
        return self.save_existing_objects(commit) + self.save_new_objects(commit)

    def save_existing_objects(self, commit=True, request=None):
        self.changed_objects = []
        self.deleted_objects = []
        if not self.initial_forms:
            return []

        saved_instances = []
        for form in self.initial_forms:
            pk_name = self._pk_field.name
            raw_pk_value = form._raw_value(pk_name)

            # clean() for different types of PK fields can sometimes return
            # the model instance, and sometimes the PK. Handle either.
            pk_value = form.fields[pk_name].clean(raw_pk_value)
            pk_value = getattr(pk_value, 'pk', pk_value)

            obj = self._existing_object(pk_value)
            if self.can_delete and self._should_delete_form(form):
                self.deleted_objects.append(obj)
                obj.deleted_at = datetime.now()
                obj.save()

                # log there your user deleting the object!

                continue
            if form.has_changed():
                self.changed_objects.append((obj, form.changed_data))
                saved_instances.append(self.save_existing(form, obj, commit=commit))
                if not commit:
                    self.saved_forms.append(form)
        return saved_instances 
```

然后构造一个比继承自的类`StackedInline`：

```
class MetaInline(StackedInline):
    formset = NoDeleteFormset
    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T07:26:56.923

您不需要自定义默认`ModelAdmin`删除行为，只需连接到[`django.db.models.signals.post_delete`](https://docs.djangoproject.com/en/dev/ref/signals/#django.db.models.signals.post_delete)模型并在模型被删除后获取一个钩子并将其记录在那里。

# c++ - 如果程序在源代码中使用较短的名称，它会更有效吗？

> ID：10771918
> 
> 赞同：17
> 
> 时间：2012-05-27T05:43:56.843
> 
> 标签：c++, performance

还是名称较短的函数比名称较长的函数更有效？为什么或者为什么不？

我个人认为它会更有效率，但效率不足以让我们关心它，只是猜测。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-27T05:45:07.393

没有性能差异，因为这些名称在机器级别无关紧要。编译器将处理这些名称，因此它根本不会对您的程序产生影响。

函数名称可能会变成标签（这不会影响运行时性能），变量名称可能会被寄存器引用或堆栈操作替换（两者都与您使用的名称无关）。在这个级别，操作系统正在使用（并跳转到）内存地址，而不是名称。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-27T05:50:09.433

较长的符号名称可能会——稍微慢一点——减慢编译速度，但符号长度对执行时间没有影响。

解释器的某些实现可能会受到符号名称长度的影响，但不是大多数现代解释器：它们通常执行“编译”步骤，将符号名称从考虑中移除，以及其他处理。

我使用了一台运行解释 BASIC的 1972 [HP 台式计算机。](http://en.wikipedia.org/wiki/HP_9830)用户手册建议使用短符号名称以提高速度并节省内存。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-27T14:31:52.317

**回答问题的本质：**具有长名称的函数将与具有短名称的函数一样有效，除非它递归地调用自身（并且在极少数情况下如此）。

**为了回答问题的精神（当然是猜测）：**在现代计算机上运行的绝大多数现代语言的源代码中使用长标识符的代码，即使是那些*传统*上被认为是“解释”的代码也不会比使用短标识符。

一般的答案，（好吧，有点人为的）*例外情况*更进一步：

# 黑，白

**编译语言：**在编译过程中将符号添加到符号表中。符号表的大小和复杂性会影响*编译*步骤的运行时间，但不会影响程序自身的运行时间。

**解释语言：**符号被添加到某种解释时间字典中，定位符号所需的时间通常以 O(n) 的速率变化，其中 n 是符号长度。

# 灰色的影子

**编译语言：**对于一种可能的异常，采用动态加载和自省。例如，在 *nix 上的 C 中，您可以调用该`dlopen()`函数来打开一个共享对象，然后调用该函数以*通过 name*`dlsym()`来定位该对象中的数据或子程序。这会导致按名称搜索对象的符号表。如果这是您程序的主要部分，那么您的程序最终可能会在对象长度方面具有 O(n) 复杂性。然而，在实践中，像这样加载对象只是为了在初始化时加载模块化单元或插件，并且查找并没有真正发生。*当然，您自己的程序*中符号的长度仍然不会影响运行时间。

 ****解释性语言：**绝大多数现代解释性语言都执行了一些重要的优化和标记化，因此最后，引用长标识符或短标识符可能是 100% 等效的。散列、长度限制等都简化了事情。解析更长的标识符需要额外的时间（有时在微秒内，在现代计算机上），并且取决于语言，这可能在每次程序运行时完成，但每次程序运行最多*一次*。除非你做很多`eval`s，或者大量的内省，否则你不应该看到问题。即使这样，在 Python 的情况下，自省是`dict`基于 - 的，并且`dict`s 使用散列来定位键，因此运行时间随着*符号的数量而*不是它们的*长度而增加*.

**但它是编译的还是解释的？**你看的越多，你今天使用的纯解释语言就越少。评论中提到了 Python，但 Python 将源代码编译为字节码，并在内部通过标记而不是它们的全名来引用标识符。JavaScript 引擎做的事情非常相似，具体取决于特定的实现。甚至（大部分）八十年代的 8 位 BASIC 都执行了标记化步骤，因此程序不会以文本形式存储在内存中（这节省了内存和 CPU 周期，在 3 MHz、64 KB 的计算机上并没有大量供应） ，但以易于解释的中间形式。变量名将被放入字典中，并使用标记（通常是地址）来引用它们。列出程序将有效地取消标记以进行显示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T05:53:50.663

高效在什么方面？运行时使用的内存，编译时使用的内存，运行时执行的计算，编译时执行的计算，可执行文件的大小，还是其他？

更长的标识符在编译时将需要更多的计算和内存。此外，调试可执行文件包含一些符号，因此较长的标识符可能会影响调试可执行文件的大小。

在运行时计算和内存使用方面，不，标识符的长度除了前面提到的差异的间接影响之外没有影响。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-27T11:44:38.900

这将取决于您所针对的平台，假设您的意思是发布二进制文件的运行时性能。

例如，在 DLL 中的 Symbian OS 函数是通过序号查找的，因此名称永远不会是二进制文件的一部分。因此答案是否定的，它并没有更有效，因为它没有任何区别，因为它从未出现在目标图像中。**

# java - 传递给听众

> ID：10771919
> 
> 赞同：0
> 
> 时间：2012-05-27T05:44:49.390
> 
> 标签：java, string, swing, awt, actionlistener

是否可以将 a 传递给`String`a `ActionListener`？我正在创建一个猜数游戏，我需要将选择的难度传递给`ActionListener`，因为它是从打开的第一个 GUI 传递的。`Game()`当它直接传递给构造函数时，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T05:52:48.937

让您的 ActionListener 访问包含猜测结果的变量。

我会做类似的事情：

```
 final JTextArea textArea = new JTextArea();
    JButton button =new JButton("press");
    button.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent arg0) {
            String text = textArea.getText();
            if (text.equals("something")) {
                doSomething();
            } else {
                doSomethingElse();
            }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T05:54:15.370

字符串从何而来？您可以将该组件传递给`ActionListener`构造时。例如，您的字符串来自一个`JLabel`对象。然后

```
class GuessNumberActionListener implements ActionListener {
    private JLabel difficulty;

    public GuessNumberActionListener(JLabel difficulty) {
        this.difficulty = difficulty;
    }

    // implement other methods
} 
```

然后在你的动作监听器中，你可以访问/更新你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T05:56:25.507

ActionListener 是一个接口。尝试使用继承扩展接口的功能。这会成功的

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-27T05:52:37.970

你当然可以。有很多方法，但其中之一是将其传递给`ActionListener`'s 构造函数：

```
public class MyClass implements ActionListener { 

    private int difficultyLevel;

    public MyClass(int difficultyLevel) {
      this.difficultyLevel = difficultyLevel;
    }

    public void actionPerformed(ActionEvent e) { 
        ...//code that reacts to action and does something based on difficultyLevel
    }

} 
```

更新：

看起来设计模式警察今天全力以赴。你可能想在被击中之前用 MVC 快速重写你的应用程序 :)

[http://java.sun.com/products/jfc/tsc/articles/architecture/](http://java.sun.com/products/jfc/tsc/articles/architecture/)

# html - 通过隔行扫描加载图像 - 从低分辨率到全分辨率 - HTML

> ID：10771920
> 
> 赞同：2
> 
> 时间：2012-05-27T05:45:06.877
> 
> 标签：html, interlacing

我正在创建一个使用图像作为背景的网站。我讨厌从上到下加载图像，因为它只会使页面在加载时看起来很糟糕。我见过一些网站加载了一个非常低分辨率的图像，然后它逐渐上升到全分辨率的照片。我希望我的网站也这样做，但我不知道如何实现这一点。这是否需要多个图像文件和更多带宽？我希望它使用与传统方式相同的带宽/花费相同的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T14:34:28.773

对于 .JPG，将文件另存为“渐进式 JPEG”，仅此而已。下载时渐进式 .jpeg，以全尺寸显示，但在完全下载之前会模糊。

几乎每个图片查看器都可以将 jpg 保存为渐进式。我推荐 IrfanView 因为简单、强大的批处理、免费软件......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T05:54:19.737

我发现的一个选项是添加低分辨率源。我不知道当前所有浏览器是否都支持此功能，或者它是否已过时...

```
<img src="../graphics/bearico1.gif" lowsrc="URL"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T17:23:24.543

另一种选择是使用在线图像转换器，因为交错是保存的文件类型。这是我发现的一个：http: [//njarb.com/2011/08/progressive-and-interlaced-images/](http://njarb.com/2011/08/progressive-and-interlaced-images/) 但在 Firefox 中，它看起来并没有隔行加载它，而是等到它完全加载。

# c - 除非包含 printf()，否则 C 循环会引发错误？

> ID：10771923
> 
> 赞同：0
> 
> 时间：2012-05-27T05:46:05.753
> 
> 标签：c, printf

我在 C 中有一个函数：

```
int concanatedProduct(int n, int x, int size)
{
    char numberString[10];
    long arr[size];
    int cnt = 0;

    long product = 0;
    int digit = n;
    while (digit!=0) {

        product = x * (digit % 10); // Multiply by last digit
        arr[cnt] = product; // add to array
        cnt++; // increment count
        digit /= 10; // chop off last dig

    }

    for (int i=size-1; i>=0; i--) { // reverse the number to make it the right way
        //printf("%ld", arr[i]);
        sprintf(numberString, "%s%ld",numberString, arr[i]);
    }

        return atoi(numberString);
} 
```

当我在循环外使用它时它工作正常。但是，当我尝试将其放入 for 循环时，它会引发 SIGBART 错误，除非我包含 printf。

这有效：

```
for (int i=1; i<10; i++) {
        x = concanatedProduct(12, i, 2);
        printf("%d\n", x);
    } 
```

这会引发错误：

```
for (int i=1; i<10; i++) {
        x = concanatedProduct(12, i, 2);
    } 
```

到底是怎么回事？这让我完全被难住了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T06:12:46.493

在您的第一次调用`sprintf` `numberString`中未初始化，导致此类行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T11:22:46.660

C99 标准的第 7.19.6.6 节说：

> sprintf 函数等价于 fprintf，除了输出写入数组（由参数 s 指定）而不是流。在所写字符的末尾写一个空字符；它不计为返回值的一部分。*如果复制发生在重叠的对象之间，则行为未定义。*

斜体句子意味着即使`numberString`被初始化，该行：

```
sprintf(numberString, "%s%ld", numberString, arr[i]); 
```

具有未定义的行为。

# macos - glVertexAttrib4f 在 OS X 中不工作，但在 iOS 中工作正常？

> ID：10771926
> 
> 赞同：0
> 
> 时间：2012-05-27T05:46:26.047
> 
> 标签：macos, opengl, opengl-es-2.0

我正在尝试将我为 iOS 制作的简单 OpenGL ES 2.0 渲染器移植到 OS X 桌面，我遇到了“无渲染”问题，我没有收到任何错误报告，所以我很茫然该怎么办。到目前为止，我已将问题缩小到我对 的调用`glVertexAttrib4f`，该调用仅在 OS X 中有效。任何人都可以查看以下代码并了解为什么调用`glVertexAttrib4f`无法在桌面上运行？：

```
void Renderer::drawTest()
{
    gl::clear( mBackgroundColor );

    static Vec2f vertices[3] = { Vec2f( 0, 0 ), Vec2f( 0.5, 1 ), Vec2f( 1, 0 ) };
    static int indices[3] = { 0, 1, 2 };

    mShader.bind();

    glEnableVertexAttribArray( mAttributes.position );
    glVertexAttribPointer( mAttributes.position, 2, GL_FLOAT, GL_FALSE, 0, &vertices[0] );

#ifdef USING_GENERIC_ARRAY_POINTER
    // works in iOS /w ES2 and OSX:
    static Color colors[3] = { Color( 0, 0, 1 ), Color( 0, 0, 1 ), Color( 0, 0, 1 ) };
    glEnableVertexAttribArray( mAttributes.color );
    glVertexAttribPointer( mAttributes.color, 3, GL_FLOAT, GL_FALSE, 0, &colors[0] );
#else // using generic attribute
    // works in iOS, but doesn't work in OSX ?:
    glVertexAttrib4f( mAttributes.color, 0, 1, 1, 1 );
#endif

    glDrawElements( GL_TRIANGLES, 3, GL_UNSIGNED_INT, &indices[0] );

    errorCheck(); // calls glGetError, which always returns GL_NO_ERROR
} 
```

注意：这是我从更复杂的东西中删除的示例代码，请原谅我没有让它更完整。

版本：桌面 OS X 是 2.1 ATI-7.18.18 iPhone 模拟器是 OpenGL ES 2.0 APPLE

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:11:32.123

`glVertexAttrib4f`调用时没有绘制的原因`mAttributes.color`是自动绑定到位置 0；我没有调用`glBindAttribLocation`，而是在链接期间依赖于最初的有界值。显然，在 GL 兼容性上下文（OS X 中的 2.1）中，如果位置 0 处的任何属性未“启用”，则 glDrawElements 可能不会绘制任何内容，即您调用`glEnableVertexAttribArray`它。

因此，当我将位置显式绑定到 0 并将颜色绑定到 1 时，我可以在颜色属性上调用 glVertexAttrib*()，它在 OS X（旧版）和 ES 2 中都可以正常绘制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-09T00:21:47.493

在我运行 OS X 10.1 和 NVidia GeForce GTX 680MX 的 iMac 上，Apple 的 GLUT_3_2_CORE_PROFILE 中仍然存在此问题。

最简单的解决方案是按照rich.e 的建议进行操作，并将位置显式绑定到 0。在我的着色器中，位置被称为`vPosition`，我使用教科书中的函数 InitShader 来加载、编译和链接着色器。由于位置可能会在链接上重新绑定，因此修改此代码：

```
GLuint program = InitShader( "vshader.glsl", "fshader.glsl" );
glUseProgram( program ); 
```

对此：

```
GLuint program = InitShader( "vshader.glsl", "fshader.glsl" );
glBindAttribLocation(program, 0, "vPosition");
glLinkProgram(program);
glUseProgram( program ); 
```

解决了我的问题。

# php - 我可以对 Netcat TCP 连接进行符号链接吗？

> ID：10771929
> 
> 赞同：0
> 
> 时间：2012-05-27T05:46:54.787
> 
> 标签：php, netcat

我一直在使用 netcat 连接到我的服务器，我想做这样的事情：

```
$sock=pfsockopen($i,$p,$errno,$errstr,30); 
symlink($file,$sock); 
```

但进展并不顺利。我想做的是`$file`在netcat上显示内容。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T05:53:33.100

没有内置功能。您必须手动复制：

```
while(!feof($file)) {
    fwrite($sock, fread($file, 4096));
} 
```

# node.js - 每次连接新套接字时，我的 process.nextTick() 都会中断

> ID：10771930
> 
> 赞同：2
> 
> 时间：2012-05-27T05:47:00.493
> 
> 标签：node.js, socket.io

出于某种原因，每次新套接字连接到服务器时，我的 emitDraw 函数都会在绘制过程中停止（process.nextTick() 调用周期意外中断）。无论如何，在接受新连接的同时保持我的 emitDraw 函数运行？

```
io.sockets.on('connection', function(socket) {
    socket.on('drawing', function() {  
      //some code
      emitDraw(socket);
    });
});

function emitDraw(socket) {
    //some code
    process.nextTick(function(){emitDraw(socket)});
}; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T07:08:01.893

process.nextTick() 仅有助于将代码从当前执行堆栈推到下一个堆栈的顶部。因此，允许在这两个堆栈执行之间触发的事件的回调在下一个堆栈中执行。

在当前情况下，正常的执行堆栈只有 emitDraw() 执行，并且对 process.nextTick() 的调用允许事件（特别是套接字连接）在下一个堆栈中触发和执行。一旦套接字连接被触发，堆栈就会执行两组代码，与 socket.on(connection) 和 emitDraw() 关联的回调。

如果 emitDraw() 变为无响应，仅意味着它无法在当前堆栈上共同执行而不会降低性能。

由于 Node.js 主进程在单个线程上运行，因此您无法期望通过将其保持在同一个线程中来获得更好的性能，除非增加处理能力。或者，您可以将 emitDraw() 分叉到子进程，以便它可以独立于主进程执行。

# crystal-reports - Crystal Reports 和运行总计

> ID：10771931
> 
> 赞同：0
> 
> 时间：2012-05-27T05:47:06.457
> 
> 标签：crystal-reports, report

我正在设计一个报告，其中运行余额列将自身添加到借方，并从每一行的贷方列中减去答案。在这个例子中，我从 1 月 1 日开始计算。在这种情况下，我的 Running Balance 列将为零。

现在我的客户想要查看从 1 月 17 日到结束的记录。在这种情况下，我的累积余额一开始不会为零，而是会计算 1 月 17 日之前所有日期的累积余额，并将其作为 1 月 17 日的起始余额。我被困在这一点上。如何在 1 月 17 日之前添加所有记录并在一行中显示它们的总计。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:15:07.843

有很多不同的方法可以实现这一点，但这里有一个您可能想尝试的想法。

*   设置报告选择标准以包括 01/01 的所有记录。
*   创建 2 个报告详细信息部分。
*   在第一个详细信息部分中，只需放置运行总计，也许还有一个标签：“起始余额”。
*   在第二个细节部分放置您的普通字段。
*   在部分专家使用公式来抑制第一个细节部分：`{table.date} <> {?date parameter}`
*   在部分专家使用公式来抑制第二个细节部分：`{table.date} < {?date parameter}`

希望有帮助。

# c# - C# 列表 There's a class: public class SampleInformation { public string Nutrient { get; set; } public decimal NutrientTotal { get; set; } public int NoSamples { get; set; } public decimal Average { g 问问题 问问题 2012-05-27T05:48:01.667 480 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. There's a class: public class SampleInformation { public string Nutrient { get; set; } public decimal NutrientTotal { get; set; } public int NoSamples { get; set; } public decimal Average { get; set; } public decimal StandardDeviation { get; set; } public decimal CoVariance { get; set; } public decimal PSD { get; set; } public decimal NSD { get; set; } } and have created a list of the same. Now while adding values, I would like to have PSD = Average + StandardDeviation and NSD = Average - StandardDeviation My code goes as: sampleInfoList.Add(new SampleInformation { Nutrient = "Dry Matter", NoSamples = CalculateSampleCount(dryMatter), Average = CalculateAverage(dryMatter), StandardDeviation = CalculateStandardDeviation(dryMatter), CoVariance = CalculateCoVariance(dryMatter), NSD = 0, PSD = 0, NutrientTotal = 0 }); How can I have something like sampleInfoList.Add(new SampleInformation { Nutrient = "Dry Matter", NoSamples = CalculateSampleCount(dryMatter), Average = CalculateAverage(dryMatter), StandardDeviation = CalculateStandardDeviation(dryMatter), CoVariance = CalculateCoVariance(dryMatter), NSD = Average - StandardDeviation, PSD = Average + StandardDeviation, NutrientTotal = 0 }); I do not want to create another method and pass the list to calculate NSD and PSD. Create NSD and PSD as properties: public class SampleInformation { public string Nutrient { get; set; } public decimal NutrientTotal { get; set; } public int NoSamples { get; set; } public decimal Average { get; set; } public decimal StandardDeviation { get; set; } public decimal CoVariance { get; set; } public decimal PSD { get { return Average + StandardDeviation } } public decimal NSD { get { return Average - StandardDeviation } } } then it will be calculated for you and you can just add new instance like that: sampleInfoList.Add(new SampleInformation { Nutrient = "Dry Matter", NoSamples = CalculateSampleCount(dryMatter), Average = CalculateAverage(dryMatter), StandardDeviation = CalculateStandardDeviation(dryMatter), CoVariance = CalculateCoVariance(dryMatter), NutrientTotal = 0 }); c# 4 2 回答 2 This answer is useful 1 you may try ; public class SampleInformation { public string Nutrient { get; set; } public decimal NutrientTotal { get; set; } public int NoSamples { get; set; } public decimal Average { get; set; } public decimal StandardDeviation { get; set; } public decimal CoVariance { get; set; } public decimal PSD { get { return Average + StandardDeviation; } private set { } } public decimal NSD { get{ return Average-StandardDeviation;} private set{} } } 于 2012-05-27T05:57:04.983 回答 This answer is useful 1 创建 NSD 和 PSD 作为属性： public class SampleInformation { public string Nutrient { get; set; } public decimal NutrientTotal { get; set; } public int NoSamples { get; set; } public decimal Average { get; set; } public decimal StandardDeviation { get; set; } public decimal CoVariance { get; set; } public decimal PSD { get { return Average + StandardDeviation } } public decimal NSD { get { return Average - StandardDeviation } } } 然后它将为您计算，您可以像这样添加新实例： sampleInfoList.Add(new SampleInformation { Nutrient = "Dry Matter", NoSamples = CalculateSampleCount(dryMatter), Average = CalculateAverage(dryMatter), StandardDeviation = CalculateStandardDeviation(dryMatter), CoVariance = CalculateCoVariance(dryMatter), NutrientTotal = 0 }); 于 2012-05-27T05:55:42.797 回答 Related 1 ios - Parse JSON in Objective C 2 linux - 如何将多个 PDF 页面连接到一个页面 2 google-apps-script - 谷歌电子表格集成 1 android - Android 应用程序错误“不幸的是应用程序已停止” 1 java - 如何解决“类型参数ListNode隐藏类型ListNode”？ 1 git - Git：与根目录同名的文件夹被忽略 1 php - 用于记录系统日志或历史的数据库 1 jquery - 如何在 JSP 页面中实时显示通知 1 python - 调用实例时的不同类型 1 reference - 图像文件夹参考 - 图像不显示 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10771936
> 
> 赞同：0
> 
> 时间：
> 
> 标签：c#

There's a class:

```
public class SampleInformation
{
    public string Nutrient { get; set; }
    public decimal NutrientTotal { get; set; }
    public int NoSamples { get; set; }
    public decimal Average { get; set; }
    public decimal StandardDeviation { get; set; }
    public decimal CoVariance { get; set; }
    public decimal PSD { get; set; }
    public decimal NSD { get; set; }
} 
```

and have created a list of the same. Now while adding values, I would like to have PSD = Average + StandardDeviation and NSD = Average - StandardDeviation

My code goes as:

```
sampleInfoList.Add(new SampleInformation
            {
                Nutrient = "Dry Matter",
                NoSamples = CalculateSampleCount(dryMatter),
                Average = CalculateAverage(dryMatter),
                StandardDeviation = CalculateStandardDeviation(dryMatter),
                CoVariance = CalculateCoVariance(dryMatter),
                NSD = 0,
                PSD = 0,
                NutrientTotal = 0
            }); 
```

How can I have something like

```
 sampleInfoList.Add(new SampleInformation
            {
                Nutrient = "Dry Matter",
                NoSamples = CalculateSampleCount(dryMatter),
                Average = CalculateAverage(dryMatter),
                StandardDeviation = CalculateStandardDeviation(dryMatter),
                CoVariance = CalculateCoVariance(dryMatter),
                NSD = Average - StandardDeviation,
                PSD = Average + StandardDeviation,
                NutrientTotal = 0
            }); 
```

I do not want to create another method and pass the list to calculate NSD and PSD.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T05:57:04.983

you may try ;

```
public class SampleInformation
{
    public string Nutrient { get; set; }
    public decimal NutrientTotal { get; set; }
    public int NoSamples { get; set; }
    public decimal Average { get; set; }
    public decimal StandardDeviation { get; set; }
    public decimal CoVariance { get; set; }
    public decimal PSD { get { return Average + StandardDeviation; } private set { } }
    public decimal NSD { get{ return Average-StandardDeviation;} private set{} }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T05:55:42.797

创建 NSD 和 PSD 作为属性：

```
public class SampleInformation
{
    public string Nutrient { get; set; }
    public decimal NutrientTotal { get; set; }
    public int NoSamples { get; set; }
    public decimal Average { get; set; }
    public decimal StandardDeviation { get; set; }
    public decimal CoVariance { get; set; }
    public decimal PSD { get { return Average + StandardDeviation } }
    public decimal NSD { get { return Average - StandardDeviation } }
} 
```

然后它将为您计算，您可以像这样添加新实例：

```
sampleInfoList.Add(new SampleInformation
    {
        Nutrient = "Dry Matter",
        NoSamples = CalculateSampleCount(dryMatter),
        Average = CalculateAverage(dryMatter),
        StandardDeviation = CalculateStandardDeviation(dryMatter),
        CoVariance = CalculateCoVariance(dryMatter),
        NutrientTotal = 0
    }); 
```

# android - 触发多个服务

> ID：10771942
> 
> 赞同：0
> 
> 时间：2012-05-27T05:49:04.290
> 
> 标签：android, android-intent, android-service

我有两个关于 Android 服务的问题。

首先，我想知道哪个计算成本更低？线程还是服务？

其次，在我的主要 android 应用程序中，我尝试触发 2 个服务：

```
Intent intent = new Intent("android.intent.action.MAIN");
    intent.setComponent(ComponentName
            .unflattenFromString("com.mrlite.service1"));
    intent.addCategory("android.intent.category.LAUNCHER");
    startService(intent);

    intent.setComponent(ComponentName
            .unflattenFromString("com.mrlite.service2"));
    intent.addCategory("android.intent.category.LAUNCHER");
    startService(intent); 
```

**服务1：**

```
package com.mrlite.service1;
import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
import android.util.Log;

public class Service1Activity extends Service {

    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void onCreate() {
        super.onCreate();

        //Intent intent = new Intent("android.intent.action.MAIN");
        //String value = getIntent().getExtras().getString("1")

        Log.e(getClass().getSimpleName(), "Service 1 Started");
    }

    @Override
    public void onDestroy()
    {
      super.onDestroy();
      Log.e(getClass().getSimpleName(), "Service 1 Destroyed");
    }
} 
```

**服务二：**

```
package com.mrlite.service2;
import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
import android.util.Log;

public class Service2Activity extends Service {

    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void onCreate() {
        super.onCreate();

        // Intent intent = new Intent("android.intent.action.MAIN");
        // String value = getIntent().getExtras().getString("1")

        Log.e("Service 2", "Service 2 Started");
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        Log.e("Service 2", "Service 2 Destroyed");
    }
} 
```

每当我尝试执行此代码时，只会调用服务 1。服务 2 永远不会被调用。

如何同时触发 2 个服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T05:56:46.227

您以这种方式启动服务是否有原因？为什么不这样做：

```
Intent intent = new Intent(this, Service1Activity.class);
startService(intent);

intent = new Intent(this, Service2Activity.class);
startService(intent); 
```

它可能无法按照您的方式工作的原因是因为`android.intent.action.MAIN`只能分配给一个班级。

# objective-c - 在循环中使用 CCDelay Time

> ID：10771947
> 
> 赞同：1
> 
> 时间：2012-05-27T05:50:21.497
> 
> 标签：objective-c, animation, cocos2d-iphone, delay

我的屏幕上有 6 个菜单项，我想在单击帮助按钮（6 个项目之一）后将它们一个一个滑出屏幕。这是我的代码：

```
NSArray * menuArray = [NSArray arrayWithObjects:item1, item2, item3, item4, item6, item5, nil];
CCDelayTime * delayM = [CCDelayTime actionWithDuration:1.4];
for (CCMenuItem * item in menuArray) {
    id moveLeft = [CCMoveBy actionWithDuration:0.7 position:ccp(10, 0)];
    id moveRight = [CCMoveBy actionWithDuration:0.4 position:ccp(-200, 0)];
    //CCDelayTime * delayM = [[CCDelayTime alloc] initWithDuration:1.4];
    [item runAction:[CCSequence actions:moveLeft, moveRight, delayM, nil]];
} 
```

出于某种原因，这里的延迟似乎没有任何区别，并且所有菜单项同时滑出屏幕。我怎样才能使菜单项在最后一个已经有之前不会滑出屏幕？

旁注：我不知道如何取消这些菜单项所连接的所有选择器，以便用户在整个动画进行时不会意外触摸选择器。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T05:57:34.573

这是因为它们都同时开始这些动作。

您可以这样做：

```
NSArray * menuArray = [NSArray arrayWithObjects:item1, item2, item3, item4, item6, item5, nil];
float delay = 0;
for (CCMenuItem * item in menuArray) {
    CCDelayTime * delayM = [CCDelayTime actionWithDuration:delay];
    id moveLeft = [CCMoveBy actionWithDuration:0.7 position:ccp(10, 0)];
    id moveRight = [CCMoveBy actionWithDuration:0.4 position:ccp(-200, 0)];
    [item runAction:[CCSequence actions:delayM,moveLeft, moveRight,  nil]];
    delay += 1.1;
} 
```

请记住，runAction 是异步的 - 所以要让它们一个一个地执行，您必须从不延迟开始，并且对于每个项目，将前一个项目的操作所需的时间长度添加到延迟中。在这种情况下，每个项目的动作需要 1.1 秒（左移 0.7，右移 0.4），所以我们将每个项目的延迟移动前延长 1.1 秒。

# html - 多个外部样式表？

> ID：10771953
> 
> 赞同：0
> 
> 时间：2012-05-27T05:52:31.237
> 
> 标签：html, css

您好，我想使用下载的代码添加一个弹出式登录屏幕。但是问题是它附带的 CSS 文件与我现有的文件冲突。

有没有办法让样式表只应用于一组 div 标签或任何其他方法来使其工作？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T06:01:11.570

您不能使样式表仅适用于 div（或任何其他）标签，但您可以将登录代码放在 div 中，给它一个特定的 ID（比如“登录”），然后将 #login 放在所有样式之前在登录 CSS 中。这将使它们仅适用于该 div。

因此，例如，如果您的登录 CSS 有一行：

```
form { border: none; } 
```

它会变成：

```
#login form { border: none; } 
```

...对于所有其他条目也是如此。这是我能想到的最简单的方法——当然假设你不能让弹出窗口加载一个单独的 HTML 文件而不包括你的主要 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T06:06:38.630

例如，您可以使用继承的 CSS 类 -

```
.newParentClass .theConflictClass{
    /*Override unnecessary CSS properties and use the one you wanted*/
    /*In case if this doesn't work you can fallback to "!important" */
    border: 1px solid #f00 !important;
} 
```

# windows - Symbian Qt 开发 Linux

> ID：10771958
> 
> 赞同：0
> 
> 时间：2012-05-27T05:53:27.533
> 
> 标签：windows, linux, qt, ubuntu, symbian

我想改用 Ubuntu，但我找不到关于最新的 Qt SDK for Linux 是否允许我为 Symbian 开发（就像在 Windows 上一样）的明确答案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T06:04:58.207

查看[使用 Linux 进行 Symbian 开发](http://labs.qt.nokia.com/2010/04/21/symbian-development-using-linux/)。

简而言之，从 Qt 4.7 版本开始就有可能。您需要下载 S60 SDK 和补丁，然后设置您的环境以使用交叉编译器，所有这些都在上面的链接中进行了描述。

Qt 4.8 的官方文档在这里：[Installing Qt for the Symbian platform using Linux](http://qt-project.org/doc/qt-4.8/install-symbian-linux.html)，并且有更多关于构建签名包的信息。

# php - CLI 二进制文件中的错误报告行为

> ID：10771959
> 
> 赞同：5
> 
> 时间：2012-05-27T05:53:29.610
> 
> 标签：php, command-line-interface

`test.php`包含以下行：

```
<?php echo 1 / 0; ?> 
```

PHP版本是`5.4.0 (cli)`

现在，一系列测试`display_errors`：

*   `display_errors = Off` ![图像1](../Images/fdcd1a2d2cc6ff86d0858dac08395c9a.png)
*   `display_errors = stderr` ![图2](../Images/49f158bb2e9fbd127b34d086809fa254.png)
*   `display_errors = stdout` ![图3](../Images/cc4ffa00c75a31d7ca577296fbaf7ee4.png)

为什么不`Off`关闭错误显示`stdout`？

为什么两者都`stdout`同时`stderr`打印到两个输出？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-27T14:10:03.557

> 为什么 Off 不关闭 stdout 上的错误显示？

我想是因为 error_log 没有设置。如果设置，则不显示错误。如果未设置，PHP 将使用 SAPI 错误记录器，即 CLI 中的 stderr (= stdout)。看：

```
ini_set('display_errors', 0);
echo 1 / 0; // Prints a warning.

ini_set('error_log', '/dev/null');
echo 1 / 0; // No warning on the standard output. 
```

> 为什么 stdout 和 stderr 最终同时打印到两个输出？

第一个错误被发送到 SAPI 错误记录器，第二个被发送到 stdout (display_errors = on)。两条消息都会显示，因为正如我上面提到的，SAPI 错误记录器是标准错误，在这种情况下也是标准输出。

# javascript - 使用 jQuery.get 是否有效地使 ping 时间加倍？

> ID：10771961
> 
> 赞同：-1
> 
> 时间：2012-05-27T05:53:35.867
> 
> 标签：javascript, jquery

假设我有一些脚本 myScript.js 使用 jQuery.get() 从服务器检索一小段数据。还假设我的 ping 时间在 1500 毫秒时很糟糕。使用 jQuery.get 是否有效地将 ping 时间加倍至 3000 毫秒？

还是有允许某种并行处理的异步魔法？我问的原因是我们使用 jQuery.get() 相当自由，我想知道这是否是我们需要考虑优化的一个领域。

编辑：与我是否可以以某种方式重新排列以在初始加载时加载所有数据并完全绕过 jQuery 相比，翻倍

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T05:58:24.003

Ping 时间通常与服务器相关，而 jQuery 是所有客户端。所以答案是否定的，它不会影响您的 ping 时间。

如果您询问使用 jQuery.get（或一般的 ajax）是否会使您的客户端变慢，那么答案是肯定的，如果您尝试处理很多，那么您拥有的 JS 越多，通常客户端越慢因为几乎所有东西都在同一个线程上运行。但是，默认情况下，这些 ajax 请求是异步的，因此在服务器发回响应之前，线程通常处于空闲状态。

我建议您在 Chrome 中打开您的页面并使用开发人员工具查看网络使用情况。这将准确地告诉您在服务器上“等待”了多少时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T07:07:22.937

如果您分解一个请求，您可以了解可以预期的延迟。

每个 TCP 连接都以[三次握手](http://www.inetdaemon.com/tutorials/internet/tcp/3-way_handshake.shtml)开始：

*   SYN（客户端到服务器）
*   SYN-ACK（服务器到客户端）
*   ACK（客户端到服务器）

如果请求适合一个 tcp 数据包的大小（约 1500 字节），则可以将其作为握手的最后一部分发送以优化网络流量。

响应也可能仅在一个数据包中发送（取决于其大小）。一旦发送，双方都会进行连接终止，除非连接保持活动状态，否则需要两对 FIN-ACK 序列。此时我不完全确定服务器是否可以将 FIN 与最后一个响应数据包一起发送。

因此，在最好的情况下，您可以预期至少 2 倍的 ping 时间，但更有可能是 3-4 倍。

# wordpress - 我如何自动将 wordpress 用户重定向到他们的最后一篇文章

> ID：10771965
> 
> 赞同：0
> 
> 时间：2012-05-27T05:54:15.540
> 
> 标签：wordpress, redirect, menu

我想创建一个菜单项，自动将用户重定向到他们在 wordpress 中创建的最后一篇文章，这可能吗？

# sql - 使用 For Xml 子句从 SQL Query 构建 Xml 文档

> ID：10771966
> 
> 赞同：1
> 
> 时间：2012-05-27T05:54:19.153
> 
> 标签：sql, sql-server, xml, xsd, schema

我正在使用 AdventureWorks 数据库，我想使用带有 FOR XML 子句的查询来构建 xml 块，但我需要在结果中指定特定的 XML Schema 以获得它的数据类型等等。

例如这个示例查询“复制”

```
 SELECT e.EmployeeID, c.FirstName, c.MiddleName, c.LastName
 FROM HumanResources.Employee e INNER JOIN Person.Contact c
 ON c.ContactID = e.ContactID
 WHERE c.FirstName = 'Rob'
 FOR XML RAW ('Employee'), ROOT ('Employees'), ELEMENTS XSINIL, XMLSCHEMA; 
```

得到这个结果

```
<Employees xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<xsd:schema targetNamespace="urn:schemas-microsoft-com:sql:SqlRowSet1" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:sqltypes="http://schemas.microsoft.com/sqlserver/2004/sqltypes" elementFormDefault="qualified">

    <xsd:import namespace="http://schemas.microsoft.com/sqlserver/2004/sqltypes" schemaLocation="http://schemas.microsoft.com/sqlserver/2004/sqltypes/sqltypes.xsd" />

    <xsd:element name="Employee">

      <xsd:complexType>

        <xsd:sequence>

          <xsd:element name="EmployeeID" type="sqltypes:int" nillable="1" />

          <xsd:element name="FirstName" nillable="1">

            <xsd:simpleType sqltypes:sqlTypeAlias="[AdventureWorks].[dbo].[Name]">

              <xsd:restriction base="sqltypes:nvarchar" sqltypes:localeId="1033" sqltypes:sqlCompareOptions="IgnoreCase IgnoreKanaType IgnoreWidth" sqltypes:sqlSortId="52">

                <xsd:maxLength value="50" />

              </xsd:restriction>

            </xsd:simpleType>

          </xsd:element>

          <xsd:element name="MiddleName" nillable="1">

            <xsd:simpleType sqltypes:sqlTypeAlias="[AdventureWorks].[dbo].[Name]">

              <xsd:restriction base="sqltypes:nvarchar" sqltypes:localeId="1033" sqltypes:sqlCompareOptions="IgnoreCase IgnoreKanaType IgnoreWidth" sqltypes:sqlSortId="52">

                <xsd:maxLength value="50" />

              </xsd:restriction>

            </xsd:simpleType>

          </xsd:element>

          <xsd:element name="LastName" nillable="1">

            <xsd:simpleType sqltypes:sqlTypeAlias="[AdventureWorks].[dbo].[Name]">

              <xsd:restriction base="sqltypes:nvarchar" sqltypes:localeId="1033" sqltypes:sqlCompareOptions="IgnoreCase IgnoreKanaType IgnoreWidth" sqltypes:sqlSortId="52">

                <xsd:maxLength value="50" />

              </xsd:restriction>

            </xsd:simpleType>

          </xsd:element>

        </xsd:sequence>

      </xsd:complexType>

    </xsd:element>

  </xsd:schema>

  <Employee xmlns="urn:schemas-microsoft-com:sql:SqlRowSet1">

    <EmployeeID>4</EmployeeID>

    <FirstName>Rob</FirstName>

    <MiddleName xsi:nil="true" />

    <LastName>Walters</LastName>

  </Employee>

  <Employee xmlns="urn:schemas-microsoft-com:sql:SqlRowSet1">

    <EmployeeID>168</EmployeeID>

    <FirstName>Rob</FirstName>

    <MiddleName>T</MiddleName>

    <LastName>Caron</LastName>

  </Employee>

</Employees> 
```

我需要参考另一个在线模式..这可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T14:43:39.640

由于您需要您的查询遵守现有的模式，我认为您应该自己控制生成的 XML，例如使用[`EXPLICIT`mode](http://msdn.microsoft.com/en-us/library/ms189068%28v=sql.105%29)。在这种情况下，您不能使用该`XMLSCHEMA`选项，但没关系，因为您已经拥有自己的架构。

# python - webapp2 和 App Engine 的 SHA 512 密码？

> ID：10771973
> 
> 赞同：1
> 
> 时间：2012-05-27T05:55:44.603
> 
> 标签：python, google-app-engine, webapp2

如果您将 webapp2 与 Google App Engine 一起使用，您会看到只有一种方法可以使用“create_user”方法创建用户 [auth/models.py line:364]

但是该方法调用“security.generate_password_hash”方法，其中不可能使用 SHA 512

Q1：我想知道使用 webapp2 和 App Engine Python 创建 SHA 512 密码的最佳方法是什么？

Q2：使用 SHA 512 代替 webapp2 (SHA1) 提供的加密是个好主意，还是足够了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T06:43:59.870

正如您所观察到的，默认的 User 模型不提供任何方法来自定义正在使用的散列函数。您可以对其进行子类化并重新定义有问题的方法以获取哈希参数，或者向 webapp2 项目提交功能请求。

不过，Webapp2 的密码散列有更大的问题，因为它不进行密码拉伸。虽然它可以选择（！）对哈希进行加盐，但它不会对其进行迭代，这使得蛮力攻击比攻击者应该更实用。它应该实现正确的密码原语，例如 PBKDF2、SCrypt 或 BCrypt。

为了回答您关于哈希函数相对优势的问题，虽然 SHA1 显示出一些弱点，但没有人成功地产生了碰撞，更不用说原像了。此外，HMAC 结构可以产生安全的 HMAC，即使哈希函数对冲突攻击很弱；可以说，甚至 MD5 也可以在这里工作。

当然，攻击只会变得更好，永远不会更糟，所以为未来做准备是个好主意。但是，如果您担心安全性，那么您应该更关注缺乏拉伸而不是哈希函数的选择。如果您*真的*关心安全性，您不应该自己进行身份验证 - 您应该使用用户 API 或 OAuth，这样其他人就可以安全地存储密码。

# php - 如何将 Zend 框架 2 和 Mongodb 与 shanty mongo 库集成，

> ID：10771974
> 
> 赞同：2
> 
> 时间：2012-05-27T05:55:53.673
> 
> 标签：php, mongodb, zend-framework2

我下载了 Zend framework 2 beta3 Skeleton 尝试使用 Shanty mongo 与 Mongodb 集成。任何人都可以提供步骤..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T06:54:12.963

我相信你应该看看[Doctrine MongoDB ODM](https://github.com/doctrine/mongodb-odm)。和ZF2[模块](https://github.com/doctrine/DoctrineMongoODMModule)

# asp.net-mvc - 不方便上传文件到服务器和使用TempData

> ID：10771980
> 
> 赞同：0
> 
> 时间：2012-05-27T05:57:21.697
> 
> 标签：asp.net-mvc, asp.net-mvc-3, tempdata

我正在尝试使用 Uploadify 将文件上传到服务器，但无法使用 TempData 在控制器之间传递变量，并且我没有发现错误。

我正在尝试将变量 fileName 和带有控制器“GetFile”的 TempData 的文件传递给控制器​​“ModelCreate”。

控制器“GetFile”运行良好，但是当我检查控制器“ModelCreate”中“date1”和“date2”的值时为空

我只想将文件保存在控制器“ModelCreate”中

```
 public string GetFile(HttpPostedFileBase file)
        {
            var fileName = this.Server.MapPath("~/Informs/" + System.IO.Path.GetFileName(file.FileName));

            if (System.IO.File.Exists(fileName))
                return "has been uploaded successfully";
            file.SaveAs(fileName);

            TempData["NameFile"] = fileName;
            TempData["File"] = file;
            return "1";
        }

        [HttpPost]
        public ActionResult ModelCreate(INFORME inform)
       {
            var date1 = TempData["NameFile"] as string;
            var date2 = TempData["File"] as HttpPostedFileBase;
            date2.SaveAs(date1);
        .
        .
        .
        .
        } 
```

为什么“date1”和“date2”为空？

祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:11:44.363

没有足够的信息来回答这个问题。根据评论部分的要求，我将提供一个完整的示例，说明一个允许用户填写几个输入字段并上传文件的表单。

与往常一样，我们首先定义视图模型，该模型将反映我们想要在视图上显示的信息：

```
public class MyViewModel
{
    [Required]
    public string TextField { get; set; }

    [DataType(DataType.MultilineText)]
    public string TextAreaField { get; set; }

    public bool CheckBoxField { get; set; }

    [Required]
    public HttpPostedFileBase FileField { get; set; }
} 
```

然后我们可以有一个带有 2 个动作的控制器：一个简单地显示表单的 GET 动作和一个在提交时处理表单信息的 POST 动作：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var model = new MyViewModel();
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        if (!ModelState.IsValid)
        {
            // there were validation errors => redisplay the view
            return View(model);
        }

        // at this stage the model is valid => we could do some processing

        // first let's save the file
        var appData = Server.MapPath("~/app_data");
        var file = Path.Combine(appData, Path.GetFileName(model.FileField.FileName));
        model.FileField.SaveAs(file);

        // then we could process the other properties
        // ...

        return Content("Thanks for submitting the data");
    }
} 
```

最后是视图模型顶部的强类型视图：

```
@model MyViewModel

@Html.ValidationSummary(false)

@using (Html.BeginForm(null, null, FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <div>
        @Html.EditorFor(x => x.TextField)
        @Html.ValidationMessageFor(x => x.TextField)
    </div>

    <div>
        @Html.EditorFor(x => x.TextAreaField)
        @Html.ValidationMessageFor(x => x.TextAreaField)
    </div>

    <div>
        @Html.CheckBoxFor(x => x.CheckBoxField)
        @Html.ValidationMessageFor(x => x.CheckBoxField)
    </div>

    <div>
        @Html.LabelFor(x => x.FileField)
        @Html.TextBoxFor(x => x.FileField, new { type = "file" })
    </div>

    <button type="submit">OK</button>
} 
```

# android - 为什么我会收到错误“未创建表？” 有什么问题？

> ID：10771981
> 
> 赞同：1
> 
> 时间：2012-05-27T05:57:28.893
> 
> 标签：android, database, sqlite

这是我的数据库适配器类。我用它来连接和查询数据库。

```
package com.Coursework.AppointmentRecorder;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DBAdapter {
  public static final String KEY_ROWID = "_id";
  public static final String APP_TITLE = "title";
  public static final String APP_DATE = "date";
  public static final String APP_TIME = "time";
  public static final String APP_DETAILS = "details";
  private static final String TAG = "DBAdapter";
  private static final String DATABASE_NAME = "NewUser";
  private static final String DATABASE_TABLE = "Appointment";
  private static final int DATABASE_VERSION = 1;
  private static final String DATABASE_CREATE =
    "CREATE TABLE Appointment (_id integer primary key autoincrement, "
    + "title text not null, date text not null, time text not null, "
    + "details text not null);";
  private final Context context;

  private DatabaseHelper DBHelper;
  private SQLiteDatabase db;
  public DBAdapter(Context ctx) {
    this.context = ctx;
    DBHelper = new DatabaseHelper(context);
  }

  private static class DatabaseHelper extends SQLiteOpenHelper {
    DatabaseHelper(Context context) {
      super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
      db.execSQL(DATABASE_CREATE);
    }

  @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
      Log.w(TAG, "Upgrading database from version " + oldVersion
        + " to " + newVersion + ", which will destroy all old data");
      db.execSQL("DROP TABLE IF EXISTS titles");
      onCreate(db);
    }
  }

  public DBAdapter open() throws SQLException {
    db = DBHelper.getWritableDatabase();
    return this;
  }

  //---closes the database---
  public void close() {
    DBHelper.close();
  }

  //---insert a title into the database---
  public long insertAppointment(String title,String Date, String time, String details) {
    ContentValues initialValues = new ContentValues();
    initialValues.put(APP_TITLE, title);
    initialValues.put(APP_DATE, Date);
    initialValues.put(APP_TIME, time);
    initialValues.put(APP_DETAILS, details);
    return db.insert(DATABASE_TABLE, null, initialValues);
  }

  //---deletes a particular title---
  public boolean deleteTitle(long rowId) {
    return db.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0;
  }

  //---retrieves all the titles---
  public Cursor getAllTitles() {
    return db.query(DATABASE_TABLE, new String[] {
      KEY_ROWID,
      APP_TITLE,
      APP_TIME,
      APP_DETAILS
    },
    null,
    null,
    null,
    null,
    null);
  }

  //---retrieves a particular title---
  public Cursor getTitle(long date) throws SQLException {
  Cursor mCursor = db.query(false, DATABASE_TABLE, new String[] {
    KEY_ROWID,
    APP_TITLE,
    APP_TIME,
    APP_DETAILS
  },
  APP_DATE + "=" + date,
  null,
  null,
  null,
  null,
  null);
  if (mCursor != null) {
    mCursor.moveToFirst();
    do {
    } while (mCursor.moveToNext());
  }
  return mCursor;
}

  //---updates a title---
  public boolean updateTitle(long rowId, String isbn, String title, String publisher) {
    ContentValues args = new ContentValues();
    args.put(APP_TITLE, isbn);
    args.put(APP_TIME, title);
    args.put(APP_DETAILS, publisher);
    return db.update(DATABASE_TABLE, args,
    KEY_ROWID + "=" + rowId, null) > 0;
  }
} 
```

我遇到的问题是，当我在另一个类中创建一个条目时，通过首先打开数据库，我称之为：

```
final DBAdapter db = new DBAdapter(this); 
```

然后我尝试执行这个命令，但目录一直说没有这样的表并给我一个 SQL 异常。

```
db.open();
long id  = db.insertAppointment(Title.getText().toString(),
  String.valueOf(SDate),
  Jack.getText().toString(),
  details.getText().toString()
);
alertDialog.setTitle("Appoinment Manager");
alertDialog.setMessage("The Appointment Has Been Created.");
alertDialog.show();
db.close(); 
```

有人可以告诉我错误在哪里以及为什么没有创建表吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T06:01:55.697

我猜您修改了数据库结构并忘记了增加版本。这意味着您仍然会在没有新表的情况下使用旧数据库。

增加您的数据库版本并运行应用程序，以便该`onUpgrade`方法运行并且您的问题应该消失。

# c# - XNA LocalNetworkGamer.isDataAvailable

> ID：10771983
> 
> 赞同：1
> 
> 时间：2012-05-27T05:57:55.267
> 
> 标签：c#, xna, network-programming

我对此有点困惑。本地播放器是否可以从另一台机器上的远程播放器获得这些数据，或者这些数据是否可以从本地播放器获得？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T11:04:53.767

*LocalNetworkGamer*类代表多人游戏会话中的本地玩家。[MSDN LocalNetworkGamer 文档](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.net.localnetworkgamer.aspx)

IsDataAvailable属性确定传入数据是否可从远程播放器获得**。**

请参阅文档：[MSDN LocalNetworkGamer.IsDataAvailable](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.net.localnetworkgamer.isdataavailable.aspx)

通常您会设置某种处理循环，并查询此属性以获取来自远程播放器的可用传入数据。

此页面上可用的示例：http: [//geekswithblogs.net/JoshReuben/archive/2011/06/28/xna-multiplayer-games-and-networking.aspx](http://geekswithblogs.net/JoshReuben/archive/2011/06/28/xna-multiplayer-games-and-networking.aspx)

# php - 允许在没有传统身份验证的情况下访问 MySQL 数据库 - PHP

> ID：10771985
> 
> 赞同：0
> 
> 时间：2012-05-27T05:58:24.713
> 
> 标签：php, mysql, html, database, database-connection

我正在做一个学习 PHP 的项目，我意识到我还有很长的路要走。

我正在创建一个基本站点，该站点允许为用户创建传统帐户以进入并构建电子邮件列表。然后，他们可以发送一封电子邮件，将其个性化并制作成套用信函。在这封信的末尾，我提供了一个链接，读者可以访问该链接（对每个人来说都是唯一的），他们可以在其中选择并填写一个简短的表格，我希望能够将其处理回我数据库中的另一个表中。一直在跟踪谁说了什么。

我现在一切都运行良好，但直到几乎没有意识到它运行的唯一原因是因为我已经被认证为主要用户（当我打开测试电子邮件并保存我的回复时）。因此，当我打开一封电子邮件并转到链接并在没有缓存任何 cookie 或会话变量的计算机上填写表格时，我无法保存，因为我无权访问数据库。

**我的问题**

每个人的电子邮件中显示的 URL 在末尾都有一个 guid，它由唯一标识该人的事物的组合组成。我真的不想让电子邮件收件人在我这里注册一个帐户，但我需要能够处理他们的回复。

即使他们没有完整的登录凭据，我如何才能让他们访问写入数据库？我知道他们基于他们的 URL 是合法的，这能以某种方式工作吗？

编辑：一些代码

以下是电子邮件中的 URL 示例：

```
mysite.com/process.php?guid=abcdefghijklmnopqrstuvwxyz 
```

单击后，我将 guid 从 $_GET 中拉出并查找有关它的一些信息。现在我想起来了，我可以立即在数据库中查找内容并没有什么意义，但这是另一个问题。填写完表格并按下保存按钮后，会发生以下情况：

```
<?php

   drequire("library/database.inc.php");
   require("library/check-user.inc.php");

   include("library/head1.inc.php"); // Load meta data
   include("library/head2.inc.php"); // Load scripts
   include("library/header.inc.php"); // Load header

$email = $_POST['email']; 
$eqp = $_POST['eqp'];
$month = $_POST['month'];   

$sqlDel = "DELETE FROM results WHERE eqp = $eqp AND month = '$month' AND email = '$email'";
mysql_query($sqlDel) or die('Error, could not delete.');

$sqlIns = "INSERT INTO results (month, email, eqp) VALUES ('$month', '$email', $eqp);";

mysql_query($sqlIns) or die('Error, could not insert.');

echo'Success! Keep up the good work!';
 ?> 
```

但插入不会发生。我假设这是因为我真的没有与数据库的连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T06:10:11.763

您需要发布一些代码，但作为伪代码答案

```
function post_for_user_to_write($special_user_ID_in_email)
{
       if ($special_user_ID_in_email == valid_special_ID())
       {
              // Connect to database
              // Post data to database
       }
} 
```

# javascript - 我如何调用插件中存在的这个函数？

> ID：10771988
> 
> 赞同：0
> 
> 时间：2012-05-27T05:59:16.443
> 
> 标签：javascript, jquery, plugins

我正在使用一个插件，该插件通常具有以下代码：

```
(function ($) {

    $.fn.makeEditable = function (options) {
        function _fnGetRowIDFromAttribute(row) {
            return "foo";
        }

         return this.each(function () {
             //some code
        });
    };
})(jQuery); 
```

我如何`_fnGetRowIDFromAttribute`从外部插件调用，即在我的页面上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T07:02:59.823

如果你想让你的函数可以从全局范围访问并遵守 jQuery 约定，你应该将它附加到 jQuery 对象中。

```
(function ($) {
    $._fnGetRowIDFromAttribute = function(row) {
        return "foo";
    }

    $.fn.makeEditable = function (options) {
         return this.each(function () {
             //some code
        });
    };
})(jQuery); 
```

或者你可以把它放在一个命名空间中：

```
(function ($) {
    $.myModule = $.myModule || {};
    $.myModule._fnGetRowIDFromAttribute = function(row) {
        return "foo";
    }

    $.fn.makeEditable = function (options) {
         return this.each(function () {
             //some code
        });
    };
})(jQuery); 
```

另一个说明：如果您的函数不使用 $.fn.makeEditable 范围内的任何内容，则没有理由在每次调用 $.fn.makeEditable 时重新定义它。您可以在用于指定 jQuery 插件的即时函数中定义它。

最后但并非最不重要的一点是，名称***以下划线开头***的变量或函数是一种传统的方式来说明它是***私有***的，不应该从外部调用。所以你应该考虑改变它的名字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T06:53:12.833

如果要使其从外部访问，则需要替换此行：

```
function _fnGetRowIDFromAttribute(row) { 
```

用这条线：

```
_fnGetRowIDFromAttribute = function(row) { 
```

这在全局范围内添加了函数；您还可以在模块块之外定义函数。

# algorithm - 回溯求和金字塔

> ID：10771990
> 
> 赞同：3
> 
> 时间：2012-05-27T06:00:56.263
> 
> 标签：algorithm, sum, backtracking

我正在尝试解决这个问题并且我是回溯算法的新手，问题是关于制作这样的金字塔，以便坐在两个数字上的数字是它们的总和。金字塔中的每个数字都必须不同且小于 100。像这样：

```
 88
   39  49
  15  24  25
 4  11  13  12
1  3   8   5   7 
```

关于如何使用回溯执行此操作的任何指示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T05:25:54.583

不一定是回溯，但您要求的属性与 Pascal Triangle 属性非常相似。

帕斯卡三角 (http://en.wikipedia.org/wiki/Pascal's_triangle) 用于高效计算二项式系数等，是一个金字塔，其中一个数字等于上述两个数字的总和它的顶部为 1。

如您所见，您正在询问相反的属性，其中数字是其下方数字的总和。

```
 1
              1   1
            1   2   1
          1   3   3   1
        1   4   6   4   1
      1   5  10  10   5   1
    1   6  15  20  15   6   1
  1   7  21  35  35  21   7   1
1   8  28  56  70  56  28   8   1 
```

例如，在上面的帕斯卡三角形中，如果您希望金字塔的顶部为 56，那么您的金字塔将是从 56 开始的帕斯卡三角形底部向上的重建，这将给出如下内容：

```
 56
              21    35
            6    15    20
         1     5    10    10 
```

同样，这不是回溯解决方案，这可能无法为每个 N 提供足够好的解决方案，尽管我认为这是一个值得注意的有趣近似。

# javascript - 如何补偿 Javascript 音频中的 setInterval 时间漂移

> ID：10771995
> 
> 赞同：2
> 
> 时间：2012-05-27T06:01:34.860
> 
> 标签：javascript, html5-audio

我有两个 setInterval 实例。每个都在重复的时间间隔触发不同的函数（*这两个函数是 title **quarterNoteFunc**和**FourthNoteFunc***）。**QuarterNoteFunc**的间隔是 600 毫秒。**FourthNoteFunc**的间隔为300 毫秒。这两个功能都以重复间隔触发不同的音频文件，从而创建基本的音乐节奏。两个函数调用之间的节奏最终在谷歌浏览器中“漂移”，使两个声音之间的节奏消失。我的问题是：

似乎即使基于浏览器的计时是垃圾，它们也应该是一种创建某种“硬”计时参考的方法，这样即使“全局”计时得到偏移，声音也会被锁定，从而保持声音同步。我认为分配相同的变量毫秒（下面的代码）会抑制这一点 - 但我错了。

（缩写）代码如下所示

毫秒 = 600;

QuarterNote = setInterval(QuarterNoteFunc, 毫秒);

第八注 = 设置间隔（第八注函数，毫秒/2）；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T06:11:00.500

可能最好的方法是使用一个始终有效的 1/8 音符间隔，然后每隔一个刻度调用四分音符：

```
// wrapped in a closure to allow for a private tickCount variable
// alternatively, you could use a more advanced object with start/stop methods, etc.
(function() {
    var tickCount = 0,
        tick = function() {
            eighthNoteFunc();
            if(tickCount %2 == 0) {
                quarterNoteFunc();
            }
            tickCount++;
        };

    setInterval(tick, 300);
})(); 
```

这确保了这些方法总是在同一个刻度上被调用。您还可以扩展它以支持半音符 ( `tickCount % 4 == 0`) 和全音符 ( `tickCount % 8 == 0`)。

* * *

这让我很感兴趣，所以我决定创建一个完整的示例（除了使用动画背景而不是音频）：http: [//jsfiddle.net/SycBm/](http://jsfiddle.net/SycBm/)

这使您可以看到八分音符、四分音符和二分音符同步滴答作响，以及启动和停止计时器，并独立启用或禁用音符。

享受！

# playframework - 从 facebook 获取电子邮件地址

> ID：10771998
> 
> 赞同：0
> 
> 时间：2012-05-27T06:01:59.957
> 
> 标签：playframework

最后我可以通过 fg graph 连接到 facebook，它很酷，我感谢你的帮助。但现在我正在尝试获取所有朋友列表及其相关的电子邮件地址，但我只能获取姓名和 ID。我们可以做些什么来获取所有的电子邮件地址。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T06:36:15.933

无法获取您朋友的电子邮件地址。