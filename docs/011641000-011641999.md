# StackOverflow 问答 11641000-11641999

# jsf-2 - 在 Converter 中将 JSF 日历日期转换为 JodaTime

> ID：11641001
> 
> 赞同：4
> 
> 时间：2012-07-25T00:05:03.097
> 
> 标签：jsf-2, converter

JodaTime 可能是最好的日期和时间库。

所以我很想从后端 bean 的 JodaTime 实例中的前端 xhtml Calendar 小部件接收用户输入。因此，我正在考虑使用 JSF Converter 来完成这项工作。

这是明智的做法吗？

同时，由于我正在使用 Primefaces 组件库并且我已经在我的支持 bean 上接收到一个 Date 对象，提供自定义转换器是否需要我重新执行此操作？即从 String 格式转换为 Date 对象，然后转换为 JodaTime DateTime 对象。我可以让默认的 JSF 先将其转换为 Date 吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T02:23:41.210

只需坚持`java.util.Date`模型、视图和持久层（因为它们都已经内置支持，您通常根本不需要在这些层执行日期计算/操作）并仅在需要时在业务层中使用 JodaTime根据该`java.util.Date`值执行计算/操作。这将使很多事情变得简单。

使用 Java 8 后，迁移`java.util.Date`到[`java.time.Local`](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html)/ [`ZonedDateTime`](https://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html)。JSF 2.3 将在`<f:convertDateTime>`. 在此之前，您需要按照以下答案中的说明自制它们：[How to use java.time.ZonedDateTime / LocalDateTime in p:calendar](https://stackoverflow.com/questions/34883270/how-to-use-java-time-zoneddatetime-localdatetime-in-pcalendar/)。

# android - 如何保存由用户交互更改的选项？

> ID：11641003
> 
> 赞同：0
> 
> 时间：2012-07-25T00:05:14.020
> 
> 标签：android, savechanges

我以前问过这样的问题，但答案并没有真正帮助。如果用户更改了设置，我该如何保存它，以便在应用程序被终止时仍然保存更改。我尝试在设置更改时使用并保存一个 int，但是当我返回，然后返回页面时，设置恢复正​​常。如何使用共享首选项或其他东西保存设置？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T00:21:41.237

您想使用共享首选项[http://developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)

要存储它：

```
private void putValue(String name, int value){
    SharedPreferences sp = getSharedPreferences("sharedPreferences", 0)
    SharedPreferences.Editor prefEditor = sp.edit()

    prefEditor.putInt(name, value);
    prefEditor.commit()
} 
```

为拿到它，为实现它：

```
private void getValue(String name, int defaultValue){
    SharedPreferences sp = getSharedPreferences("sharedPreferences", 0)
    return sp.getInt("Name", defaultValue);
} 
```

你可以调用 onPause

```
@Override
public void onPause(){
    super.onPause();
    putValue("IntValue", value);
} 
```

然后 onResume()

```
@Override
public void onResume(){
    super.onResume();
    value = getValue("IntValue", 0);
} 
```

# tcl - TCL load error can't load file libfoo.so

> ID：11641005
> 
> 赞同：0
> 
> 时间：2012-07-25T00:05:42.747
> 
> 标签：tcl

我正在尝试加载一个简单的 TCL 扩展，但我不断收到以下错误：

```
无法加载文件“libfoo.so”：ld.so.1：tclsh8.4_64：致命：libfoo.so：打开失败：没有这样的文件或目录

```

我正在使用[TCL 手册页](http://www.tcl.tk/man/tcl8.5/TclCmd/load.htm)中的示例， 但我不确定我在这里做错了什么。我正在使用以下方法在 Solaris 上编译库：

```
cc -KPIC -c -I/opt/external/tcl-8.5.8/include foo.c
cc -shared -R/opt/external/tcl-8.5.8/i386/lib -L/opt/external/tcl-8.5.8/i386/lib -o libfoo.so foo.o

```

有人可以建议如何调试问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:39:08.650

这里有两个问题。

1.  您传递给的库的文件名`load`可能应该有一个目录分隔符。当存在目录分隔符时，会抑制操作系统对库的搜索，这就是您想要的样子，因为您已经知道它在哪里。
2.  您似乎正在尝试`load`将库转换为比它链接的旧版本的 Tcl。（您可能还试图将 32 位构建加载到 64 位可执行文件中。）这*几乎*不可能奏效。链接到您希望支持的最旧版本的 Tcl；在开发时，最好通过链接您要加载到的确切版本的 Tcl 来完成，对于生产，您应该查看[Tcl_InitStubs 手册](http://www.tcl.tk/man/tcl8.6/TclLib/InitStubs.htm)页以获取详细信息。

# c++ - 不能将变量“”声明为抽象类型“”

> ID：11641006
> 
> 赞同：15
> 
> 时间：2012-07-25T00:05:52.700
> 
> 标签：c++, inheritance, gcc, abstract-class, pure-virtual

编辑：花了一点时间理解我编写的代码后，我仍然不知道它有什么问题。这是我派生类的基类：

```
///ContactResultCallback is used to report contact points
struct  ContactResultCallback
{
    short int   m_collisionFilterGroup;
    short int   m_collisionFilterMask;

    ContactResultCallback()
        :m_collisionFilterGroup(btBroadphaseProxy::DefaultFilter),
        m_collisionFilterMask(btBroadphaseProxy::AllFilter)
    {
    }

    virtual ~ContactResultCallback()
    {
    }

    virtual bool needsCollision(btBroadphaseProxy* proxy0) const
    {
        bool collides = (proxy0->m_collisionFilterGroup & m_collisionFilterMask) != 0;
        collides = collides && (m_collisionFilterGroup & proxy0->m_collisionFilterMask);
        return collides;
    }

    virtual btScalar    addSingleResult(btManifoldPoint& cp,    const btCollisionObjectWrapper* colObj0Wrap,int partId0,int index0,const btCollisionObjectWrapper* colObj1Wrap,int partId1,int index1) = 0;
}; 
```

现在这是我的派生类：

```
class DisablePairCollision : public btCollisionWorld::ContactResultCallback
{
public:
    virtual btScalar addSingleResult(btManifoldPoint& cp, const btCollisionObject* colObj0, int32_t partId0, int32_t index0, const btCollisionObject* colObj1, int32_t partId1, int32_t index1);

    btDiscreteDynamicsWorld* DynamicsWorld;
}; 
```

下面是我实现主要功能的地方。仍然不确定为什么我会收到此错误。

我在带有 vc2010 和代码块的 windows 上使用下面的代码没有问题：

```
btScalar DisablePairCollision::addSingleResult(btManifoldPoint& cp, const btCollisionObject* colObj0, int32_t partId0, int32_t index0, const btCollisionObject* colObj1, int32_t partId1, int32_t index1)
{
    // Create an identity matrix.
    btTransform frame;
    frame.setIdentity();

    // Create a constraint between the two bone shapes which are contacting each other.
    btGeneric6DofConstraint* Constraint;
    Constraint = new btGeneric6DofConstraint( *(btRigidBody*)colObj0, *(btRigidBody*)colObj1, frame, frame, true );

    // Set limits to be limitless.
    Constraint->setLinearLowerLimit( btVector3(1, 1, 1 ) );
    Constraint->setLinearUpperLimit( btVector3(0, 0, 0 ) );
    Constraint->setAngularLowerLimit( btVector3(1, 1, 1 ) );
    Constraint->setAngularUpperLimit( btVector3(0, 0, 0 ) );

    // Add constraint to scene.
    DynamicsWorld->addConstraint(Constraint, true);
    return 0;
} 
```

现在我正在尝试在 Ubuntu 上编译我的项目，但是当我尝试使用该类时出现此错误：

```
/home/steven/Desktop/ovgl/src/OvglScene.cpp:211: error: cannot declare variable ‘Callback’ to be of abstract type ‘Ovgl::DisablePairCollision’ 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-25T01:41:36.860

基类是抽象的原因是这个纯虚函数：

```
virtual btScalar addSingleResult(
  btManifoldPoint& cp,
  const btCollisionObjectWrapper* colObj0Wrap,
  int partId0,
  int index0,
  const btCollisionObjectWrapper* colObj1Wrap,
  int partId1,
  int index1) = 0; 
```

派生类`DisablePairCollision`尝试定义该函数，但没有正确执行：

```
virtual btScalar addSingleResult(
   btManifoldPoint& cp,
   const btCollisionObject* colObj0,
   int32_t partId0,
   int32_t index0,
   const btCollisionObject* colObj1,
   int32_t partId1,
   int32_t index1); 
```

如您所见，一些参数具有不同的类型。eg`colObj0`是 type `const btCollisionObject*`，但它应该是 type `const btCollisionObjectWrapper*`。

因此，派生类定义*了一个具有不同参数的新函数*，但它没有从基类定义纯虚函数，因此派生类仍然是抽象的。

您需要使用与基类中完全相同的参数类型来定义函数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-25T00:35:18.410

`Ovgl::DisablePairCollision`是一个抽象类，意味着它***至少包含一个纯虚函数***。

您需要从这个类派生并实现它的**抽象**功能。

例如：

```
class DisablePairCollision { virtual void foo() = 0; };
class DerivedClass : public DisablePairCollision { virtual void foo() {} };

DisablePairCollision* pCallback;
pCallback = new DerivedClass;
pCallback->foo(); 
```

# perl - 如何在 Ubuntu 上使用 Apache2 启用 Perl

> ID：11641008
> 
> 赞同：2
> 
> 时间：2012-07-25T00:06:08.320
> 
> 标签：perl, ubuntu, apache2

我已经在我的电脑上安装了带有 apache 的 ubunutu，一切正常，除了：我不知道如何启用 perl，我尝试过的所有操作要么给了我服务器错误，要么给了我 perl 脚本的 403。

请告诉我如何启用 Perl。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:20:53.673

将您的文件放在 /usr/lib/cgi-bin 中，使其可执行并将所有者和组更改为 www-data：

```
sudo cp myscript.pl /usr/lib/cgi-bin/
sudo chown www-data.www-data /usr/lib/cgi-bin/myscript.pl
sudo chmod 0755 /usr/lib/cgi-bin/myscript.pl 
```

我更喜欢在 /etc/apache2/mods-available/mime.conf 中启用“AddHandler cgi-script .cgi”行，方法是删除它前面的“#”并为 /var 下面的目录设置“Options +ExecCGI” /www 应该执行脚本的位置。但请注意：以“.cgi”结尾的所有可执行文件都将以这种方式作为 cgi 脚本执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T02:28:21.300

这个问题可能不是 Perl 的问题。相反，您的 Apache2 安装可能未配置为解析 .pl 或 .cgi 文件。您应该查看[Apache Web Server 文档](http://httpd.apache.org)以及这篇[SO 文章](https://stackoverflow.com/questions/560749/how-do-i-configure-apache2-to-run-perl-cgi-scripts)。

# c# - C# Linq 相交哈希集 在内存中使用 IEnumerable 从文件流

> ID：11641009
> 
> 赞同：1
> 
> 时间：2012-07-25T00:06:11.467
> 
> 标签：c#, linq, memory, file-io

我有一个公开`IEnumerable<Record>`如下的类（省略了实现细节）：

```
public class SomeFileReader() {
    public IEnumerable<Record> Records()
    {
        using (StreamReader sr = new StreamReader(this.Path, this.Encoding, true))
        {
            var hdr = this.HeaderParser.Parse(sr.ReadLine());  //Parse, but further ignore header (the HeaderParser might throw though)
            while (!sr.EndOfStream)
                yield return this.RecordParser.Parse(sr.ReadLine()) as Record;
        }
    } 
```

`Record`除了许多其他属性（因此是相当大的“内存/存储方式”）之外，A还具有一个`Id`属性（这是一个`Key`由 2 个“部分”组成的对象）。为了完整起见，这看起来像：

```
public class Key : IEquatable<Key>
{
    public string OperatorCode { get; set; }
    public string Key { get; set; }

    public bool Equals(Key other)
    {
        return (this.OperatorCode.Equals(other.OperatorCode, StringComparison.OrdinalIgnoreCase))
            && (this.Key.Equals(other.Key, StringComparison.OrdinalIgnoreCase));
    }
} 
```

该文件包含“键顺序”中的记录，因此（保证）按记录的`ID`磁盘排序。

在内存中，我还有一些`HashSet<Key>`我想从`SomeFileReader`. 目前我的测试文件只有几兆字节，但我预计在不久的将来它会变得非常大。此时，我只是将整个文件读入内存`Dictionary<Key, Record>`，以便从“待处理”记录的“列表”中轻松/快速地检索我想要处理的特定记录。这将类似于：

```
var recordsfromfile = MyFileImporter.Records().ToDictionary(k => k.Key.Key); 
```

当然，一旦文件增长（太大），这将是一个问题。

但是由于我正在公开`IEnumerable<Record>`我在想...我不应该将文件*完全*读入内存，因为记录是按关键顺序排列的。一个简单的[Intersect()](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.intersect.aspx)与我的待处理密钥“列表”就足够了。`Key`已经实现了`IEquatable`，如果我需要一个*根本*`IEQualityComparer<Key>`不难实现的。但我（想我）离题了。。

`Intersect()`文档告诉我：

> 当枚举此方法返回的对象时，Intersect 枚举*`first`*，收集该序列的所有不同元素。然后它枚举*`second`*，标记出现在两个序列中的那些元素。**最后**，标记的元素按照它们被收集的顺序产生。

^(（强调我的）)

所以，如果我理解正确，如果*`first`*是我`IEnumerable<Record>`的文件仍将完全读入内存。即使它*`second`*与我的“待处理”“列表”完全匹配，仍然会被读入内存，这仍然可能是非常大量的数据。还是我误读了文档，这是“终于”让我绊倒和/或我误解了文档？

显然，我想要阻止的是

*   a）不将大量数据读取到内存中，其唯一目的是一个接一个地处理其中的一些记录，之后我不关心这些记录（例如，处理会将结果写到其他地方)
*   b）不要（重新）为我的“待处理”“列表”中的每条记录一次又一次地打开同一个文件（所以我要小心不要重置我的迭代器）

长话短说; 会`Intersect()`做我想做的事吗？我应该使用其他方法吗？嵌套for循环？关于如何有效处理这个问题的任何其他想法？

**编辑：**更新以明确“要处理的密钥列表”实际上是一个`HashSet<Key>`.

* * *

Ps 我刚刚被一个关于在床上使用 Linq 用于此目的的脑电波击中，在我弄清楚之前无法入睡。不幸的是，我正在度假，距离一个体面的 Visual Studio 实例数英里远，只是为了简单地测试一下。那将不得不等到我休假之后（所以小姐们说......我们会看到......）![笑脸](../Images/233b15dbc3115d5cbe42f8f9e13c2ce2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T00:10:48.747

编辑：我怀疑你真的想要：

```
var records = new SomeFileReader().Records()
                                  .Where(record => keys.Contains(record.Key));

foreach (var record in records)
{
    Process(record);
} 
```

* * *

`Intersect`恐怕文档是错误的。它实际上首先枚举`second`，收集其中的所有内容......然后是流`first`，产生任何相交的值。

它也*不会*等到看到所有元素后才生成它们。有关它实际作用的更多详细信息，请参阅我的[Edulinq 博客文章。`Intersect`](http://codeblog.jonskeet.uk/2010/12/30/reimplementing-linq-to-objects-part-16-intersect-and-build-fiddling/)

在 TL;DR 意义上，它是：

*   创建一个`HashSet<T>`从`second`
*   迭代`first`
    *   对于每个项目，尝试将其从集合中移除
    *   如果它*在*集合中，则让出它；否则，不要

`first`项目从集合中移除的事实阻止了相同的元素被生成两次（即使它在两个和中都出现了不止一次`second`，因为它是一个集合）。

基本上，我认为只要你颠倒操作数的顺序就可以了，所以你这样做：

```
var result = streamingRecordsFromFile.Intersect(smallCollectionInMemory); 
```

# iphone - 覆盖 UITextView

> ID：11641015
> 
> 赞同：0
> 
> 时间：2012-07-25T00:06:54.450
> 
> 标签：iphone, ios, ios5, ios4

我正在尝试覆盖 uitextview 类中的一个方法，我想在我正在工作的类中执行它，但我无法让它工作。我只看到人们在一个单独的类中覆盖它。谢谢你。

```
 #import <UIKit/UIKit.h>
@interface MyTextView : UITextView

@end
@interface ViewController : UIViewController
@property (nonatomic, retain) IBOutlet MyTextView * tv;

@end

//////////////////////////////////

   #import "ViewController.h"

@implementation MyTextView

- (BOOL)canPerformAction:(SEL)action withSender:(id)sender    
{    
    [UIMenuController sharedMenuController].menuVisible = NO;  //do not display the menu
   // [self resignFirstResponder];                      //do not allow the user to selected anything
    return NO;
}

@end

@implementation ViewController
@synthesize tv;

- (void)viewDidLoad
{
    [super viewDidLoad];
    tv = [[MyTextView alloc] init];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    } else {
        return YES;
    }
}
-(void)textViewDidChangeSelection:(MyTextView *)textView
{
    NSRange range = textView.selectedRange;
    if(range.location<textView.text.length)
    {
        NSString * getRidOfFirstHalfString = [tv.text substringFromIndex:range.location];
        NSString * selectedString = [getRidOfFirstHalfString substringToIndex:range.length];

        NSLog(@"%@",selectedString);

    }
    else
    {
        // Do what ever you want to do

    }   
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T00:17:35.587

名列前茅：

```
@interface MyTextView : UITextView

@end

@implementation MyTextView

- (xxx)overRidedMethod
{
    // do something
}

@end

... your class
{
    MyTextView *foo = [MyTextView alloc] init.....] 
```

# iis - IIS 7 URL 从 http 重写为 https

> ID：11641025
> 
> 赞同：1
> 
> 时间：2012-07-25T00:08:27.000
> 
> 标签：iis, redirect, iis-7, web-config, rewrite

我的 web.config 文件中有这个：

```
<system.webServer>
    <rewrite>
        <rules>
            <rule name="HTTP to HTTPS redirect" stopProcessing="true">
                <match url="(.*)" />
                <conditions>
                    <add input="{HTTPS}" pattern="off" ignoreCase="true" />
                </conditions>
                <action type="Redirect" redirectType="Found" url="https://{HTTP_HOST}/{R:1}" />
            </rule>
        </rules>
    </rewrite>
</system.webServer> 
```

我检查了该规则是否已添加到 IIS 管理器中，但它似乎不起作用。我已经要求 SSL 关闭。

所以如果我去 webvts.mprin.com 或[http://webvts.mprinc.com](http://webvts.mprinc.com)，我会得到 404 not found 错误。但是如果我去[https://webvts.mprinc.com](https://webvts.mprinc.com)，一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T23:31:56.203

我的 SharePoint Web 应用程序遇到了这个问题。这是一个带有外联网扩展的内联网。Extranet 仅设置为 443。一旦我在 IIS 中的 Extranet 应用程序上添加了端口 80 的绑定，重定向就成功了。

# c - 多个小 malloc 与一个大 malloc

> ID：11641026
> 
> 赞同：4
> 
> 时间：2012-07-25T00:08:30.073
> 
> 标签：c, malloc, binaryfiles

任务是将二进制文件解析到内存中。但是，我事先不知道需要分配的内存量。

哪种方法更可取：当我在解析例程中进行时执行多个小型 malloc，或者首先遍历文件以确定所需的内存量，然后再次解析？

任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T00:11:13.227

在几乎所有情况下，一个大分配都比许多小分配好。这可以防止碎片，减少系统调用。它通常通过更好的局部性带来更好的性能。

一种常见的技术是先分配一个小段，然后按固定因子（通常`1.5`）重新分配一个更大的段。收集所有元素后，如果认为过度分配很大，则可以将内存固定为最大大小。

无论如何：首先实现最简单的。如果您有性能问题：基准测试。然后优化。事实证明，分配甚至不是您的瓶颈。

**编辑：**正如 R.. 提到的，通过推理内存上限及其与文件长度的关系，您可能会很好地了解分配多少。大多数好的二进制格式还在标题段中包含长度和大小信息。如果您可以通过一些算术和/或文件搜索来计算出数据结构所需的确切大小，那么您就是赢家。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T00:13:35.760

您是否看过可能`mmap()`为此使用 an ？有关更多信息，请参阅[此链接](http://en.wikipedia.org/wiki/Mmap)。基本上，您只需将文件映射到内存中并像访问内存块一样访问它，`malloc()`完全避免 s 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T00:18:50.240

这是一个经典的时空权衡。假设您需要全部内容，分配大量小块的效率可能低于一个大块。

理想情况下，文件格式应该对元数据进行编码，例如块的大小、块的数量等。鉴于磁盘访问的延迟与内存的速度相比，读取文件以确定所需的大小可能需要更长的时间。

最有效的方法还取决于需要多少处理。你提到解析，但它是一个二进制文件。大概有很多块和可变大小的结构需要遍历？

您可以尝试以下几种策略：

*   如果文件不是太大而无法放入内存，则可以查询文件系统以查看文件有多大，将其作为一大块读取，然后将其拉到内存中。这将非常快，但会占用大量内存。

*   根据二进制文件的结构，您可能可以进行几次`fseek()`调用来确定您需要读取的块有多大（如果您不需要整个文件）并读取它们。

*   您可以使用`mmap()`将文件映射到内存并让运行时管理将数据分页到内存中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T00:14:45.733

遍历文件以确定它的大小和所需的内存量绝对不是要走的路——磁盘 I/O 非常昂贵。

另一种选择是获取文件大小，然后分配内存。有关如何获取文件大小的详细信息，请参阅[此 Q/A](https://stackoverflow.com/questions/238603/how-can-i-get-a-files-size-in-c)。但是，这种方法也不是很有效。

总而言之，它实际上取决于您如何读取数据以及如何解析它。例如，拥有一些相当大的数据块以及异步文件 I/O 可能最适合您。但这是实施起来相对复杂的任务。

最简单和最有效的开始可能是使用[`mmap`](http://en.wikipedia.org/wiki/Mmap)文件的内容并将其“映射”到内存中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-25T00:16:57.337

至少部分没有通用答案，因为您没有定义“首选”。最简单的？最快的？需要最少的堆？另外，“解析二进制文件”是什么意思？解析通常是为了创建数据结构而对人类可读的文本进行的。

每个`malloc`通常都有一个小的开销。但是，除非最终的数据结构很大，否则不太可能产生任何显着差异。

使用干净的接口生成最清晰的代码，以便您以后可以替换分配方法。然后只有在你知道有问题之后才担心优化。

# android - 我应该如何创建一个充当 Android 引擎的项目（即它是否需要 AndroidManifest 等...）

> ID：11641029
> 
> 赞同：0
> 
> 时间：2012-07-25T00:09:00.237
> 
> 标签：android

我打算有一个项目，它只是一个 API，然后我将用于其他项目以在其上构建我的应用程序。

我发现自己一开始就已经不知道哪个是继续的最佳实践（祝我在剩下的事情上好运）。

我的想法是我想象中的一个非常普遍的想法。构建在 Android API 之上的引擎的想法，因此我可以在我即将进行的各种项目中重用它。

所以我的引擎需要访问Android API，这很清楚，因此我需要在项目中以某种方式拥有它，但这是我的问题......

1.  我是否制作了一个新的 Android 项目，以便它拥有自己的 AndroidManifest.xml 等？这似乎是不正确的做事方式，因为清单将毫无用处。将为每个单独的 android 应用程序创建的 android 项目将具有自己的清单。

2.  或者有一个使用 Android API 作为引用库的项目？Tgis 似乎是正确的方法，但我找不到任何关于此事的文献来证实这一点。

3.  任何其他。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T00:17:36.200

> 我是否制作了一个新的 Android 项目，以便它拥有自己的 AndroidManifest.xml 等？

您创建[一个 Android 库项目](http://developer.android.com/tools/projects/index.html#LibraryProjects)。它有一个清单。

> 这似乎是不正确的做事方式，因为清单将毫无用处。

通过最近添加的工具，您可以通过多种方式将库清单中的项目自动添加到宿主项目中。当然，这是可选的，特别是如果库中没有任何内容需要添加到宿主项目中。

> 将为每个单独的 android 应用程序创建的 android 项目将具有自己的清单。

正确的。

> 或者有一个使用 Android API 作为引用库的项目？

Android 库项目将根据您选择的构建目标自动编译。

# php - 循环遍历结果并聚合并吐出 php

> ID：11641033
> 
> 赞同：0
> 
> 时间：2012-07-25T00:10:08.963
> 
> 标签：php, loops

**我想用下面的代码完成什么：**它执行`SELECT`，它应该返回（2）个结果，这些结果每个拉动约 10 个项目（总项目：~20）并在页面上显示这些结果。

**实际发生的情况：**它提取第二个结果，因此在可能的 20 个结果中仅输出 ~10 个结果。因此，`$result`var 在循环后应该总共有 ~20 个项目......但它只有 10 个......我已经测试了实际输出和查询...

有什么想法吗？

```
<?php

## Loop through results from mysql
try{
    #connection string
        // $dbconn = new PDO('mysql:host=localhost;port=3306;dbname=thdb',array(PDO::ATTR_PERSISTENT => true));
        $dbconn = new PDO('mysql:host=localhost;port=3306;dbname=thdb','user','pass',array(PDO::ATTR_PERSISTENT => true));
        $q = $dbconn->prepare("SELECT FW_ArtSrcLink FROM FW_ArtSrc WHERE OneSet=1");
    #call stored proc
        $q->execute();
    #get the rows into an array
        $result = $q->fetchAll();
        foreach($result as $r){
            $xmlUrl = $r['FW_ArtSrcLink'];
            $ConvertToXml = simplexml_load_file($xmlUrl);
            # -> Setup XML
            $newsStory = $ConvertToXml->channel->item;
        }   

    # -----> Load News Stories
        for($i = 0;$i<sizeof($newsStory); $i++){

    # Source of Article Info-->
            $SrcTitle=$newsStory[$i]->title;
            $SrcLink=$newsStory[$i]->link;

    # Actual News Article Info -->
            $title=$newsStory[$i]->title;
            $desc=$newsStory[$i]->description;

    # Output Results ------------>      
            echo '<hr>';
            echo '<strong>'.'Title:'.$title.'</strong>'.'(via: <a href=\''.$SrcLink.'\'>'.$SrcTitle.'</a>'.'<br />';
            //echo 'Link:'.$link.'<br />';
            echo 'Description'.$desc.'<br>';
            echo '<hr>';
        }
} // try

catch(Exception $e){

    $errorStored = $e->getMessage() . ' on ' .'/errors/fanwire_loop.php';  #where errors are stored
    $pageDateOfError = '/aggregate_looping.php'.date('l jS \of F Y h:i:s A'); #inc the file and date into the file too
    file_put_contents($errorStored,$pageDateOfError, FILE_APPEND | LOCK_EX);
} // catch

?> 
```

* ***已编辑`try{}`

```
# Only outputs (2) `items`
    try{
        #connection string
            // $dbconn = new PDO('mysql:host=localhost;port=3306;dbname=thdb',array(PDO::ATTR_PERSISTENT => true));
            $dbconn = new PDO('mysql:host=localhost;port=3306;dbname=thdb','user','pass',array(PDO::ATTR_PERSISTENT => true));
            $q = $dbconn->prepare("SELECT FW_ArtSrcLink FROM FW_ArtSrc WHERE OneSet=1");
        #call stored proc
            $q->execute();
        #get the rows into an array
            $result = $q->fetchAll();
            $newsStory = array();
            foreach($result as $r){
                $xmlUrl = $r['FW_ArtSrcLink'];
                $ConvertToXml = simplexml_load_file($xmlUrl);
                # -> Setup XML
                $newsStory[] = $ConvertToXml->channel->item;
            }   

        # -----> Load News Stories
            for($i = 0;$i<sizeof($newsStory); $i++){

        # Source of Article Info-->
                $SrcTitle=$newsStory[$i]->title;
                $SrcLink=$newsStory[$i]->link;

        # Actual News Article Info -->
                $title=$newsStory[$i]->title;
                $desc=$newsStory[$i]->description;

        # Output Results ------------>      
                echo '<hr>';
                echo '<strong>'.'Title:'.$title.'</strong>'.'(via: <a href=\''.$SrcLink.'\'>'.$SrcTitle.'</a>'.'<br />';
                //echo 'Link:'.$link.'<br />';
                echo 'Description'.$desc.'<br>';
                echo '<hr>';
            }
    } // try 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T00:13:38.177

```
foreach($result as $r){
  $xmlUrl = $r['FW_ArtSrcLink'];
  $ConvertToXml = simplexml_load_file($xmlUrl);
  # -> Setup XML
  $newsStory = $ConvertToXml->channel->item;
} 
```

您对`$newsStory`此处进行了破坏性分配，我认为它是一个数组，因此请`$newsStory[] = ...`改用。

# mp3 - 可变比特率 MP3 文件的支持范围有多广？

> ID：11641040
> 
> 赞同：2
> 
> 时间：2012-07-25T00:11:31.203
> 
> 标签：mp3, podcast, bitrate

我正在开发一个音频制作工具，并试图弄清楚我应该为“选择输出编码”窗口做出哪些默认值和 UI 选择。我想默认输出到 VBR（并将界面聚焦于此），但大多数工具默认为 CBR，我试图找出原因。

与 CBR 相比，在 VBR 中编码 MP3 可以节省大量带宽，但您仍然可以找到大量不使用它的人，即使带宽非常宝贵。特别是，我找不到任何使用 VBR 的播客，尽管它特别适合混合谈话和音乐的广播式内容。这包括可以在带宽上每年节省数万美元的顶级播客（例如 This American Life）。

我在网上进行了广泛的搜索，看看是否能找到 VBR 的任何缺点。我唯一能找到的是一些较旧的 mp3 播放器不支持它。自 2004 年以来，是否有*任何*广泛发布的不支持 VBR 的媒体播放器或硬件问世？

# asp.net-ajax - 当 ScriptManager 在母版页中时 ASP.NET UpdatePanel 中断

> ID：11641051
> 
> 赞同：0
> 
> 时间：2012-07-25T00:12:54.377
> 
> 标签：asp.net-ajax

我有一个具有简化结构的 .NET 4.0 Web 应用程序，如下所示：RootMaster (with ScriptManager) > ShipmentMaster > ContentPage > UpdatePanel

最近添加了 UpdatePanel，以通过部分页面更新来减少页面闪烁。它不工作。相反，正在发生完整的回发/更新。

我已经设置了两个按比例缩小的版本，一个（Ex1）模仿上面的结构，一个（Ex2）看起来像：ContentPage（with ScriptManager）> UpdatePanel

似乎有关原始（和 Ex1）的 Master/ScriptManager 安排的某些事情正在破坏，但我不知道是什么。

有任何想法吗？

这是 Ex1 的相关代码（我认为，如果错误，请纠正我）：

根主，

```
<body>
<form id="pageForm" runat="server">
    <asp:ScriptManager ID="SiteScriptManager" 
        runat="server" 
        AjaxFrameworkMode="Enabled" 
        EnablePartialRendering="True" 
        LoadScriptsBeforeUI="true"
        ScriptMode="Release"
        onasyncpostbackerror="SiteScriptManager_AsyncPostBackError" >
        <Scripts>
            <asp:ScriptReference Path="~/Scripts/jquery-1.7.1.min.js" />
            <asp:ScriptReference Path="~/Scripts/jquery-ui-1.8.18.custom.min.js" />
            <asp:ScriptReference Path="~/Scripts/jquery.tools.min.js" />
            <asp:ScriptReference Path="~/Scripts/json2.js" />
            <asp:ScriptReference Path="~/Scripts/modernizr.custom.js" />
            <asp:ScriptReference Path="~/Scripts/PFF.js" />
        </Scripts>
    </asp:ScriptManager>
...
        </form>
    </body>
</html> 
```

WebForm1.aspx,

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Master/Root.master" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="Pasha.OTTS.Web.FamiliesFirst.WebForm1" %>
<asp:Content ID="Content1" ContentPlaceHolderID="RootHeadContentPlaceholder" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="RootBodyContentPlaceholder" runat="server">
<asp:UpdatePanel ID="UpdatePanel1" UpdateMode="Conditional" runat="server">
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="dpShipments" />
    </Triggers>
    <ContentTemplate>
        <asp:DataPager ID="dpShipments" runat="server" PagedControlID="lvShipments" PageSize="3" onprerender="dpShipments_PreRender">
        <Fields>
            <asp:NextPreviousPagerField />
            <asp:NumericPagerField />
        </Fields>
        </asp:DataPager>
        <asp:ListView ID="lvShipments" runat="server" onpagepropertieschanging="lvShipments_PagePropertiesChanging">
        <LayoutTemplate>
            <div class="table-wrapper">
                <table class="results">
                    <tr>
                        <th>A</th>
                        <th>B</th>
                    </tr>
                    <tr id="itemPlaceholder" runat="server"></tr>
                </table>
            </div>
        </LayoutTemplate>
        <ItemTemplate>
            <tr>
                <td ><%#Eval("A")%></td>
                <td ><%#Eval("B")%></td>
            </tr>
        </ItemTemplate>
        </asp:ListView>
        <asp:Button ID="Button1" runat="server" Text="Button" />
        <p>Async: <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>  
        </p>
    </ContentTemplate>
</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:29:01.400

回答我自己的问题 - 我不知道是谁添加了它，或者为什么添加它（我意识到它没有在我的原始帖子中显示），但令人反感的代码位于以下行：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Root.master.cs" Inherits="FamiliesFirst.Master.Root" ClientIDMode="Static" %> 
```

具体来说：

```
ClientIDMode="Static" 
```

删除它使问题消失。

# python - 将外键添加到 Django 模型

> ID：11641052
> 
> 赞同：2
> 
> 时间：2012-07-25T00:12:59.137
> 
> 标签：python, django, django-models, django-views

我想知道将列从 IntegerField 转换为外键的最佳程序是什么。这是我的两个模型：

```
class workout(models.Model):

    userid = models.IntegerField()
    datesubmitted = models.DateField()
    workoutdate = models.DateField(); 
    bodyweight = models.FloatField(null=True);
    totalreps = models.IntegerField() 
    totalweight = models.FloatField()
    numsets = models.IntegerField(); 
    numexercises = models.IntegerField()
    workoutname = models.CharField(max_length=250) 
```

第二个：

```
class exercise(models.Model):  
    userid = models.IntegerField();
    workoutid = models.IntegerField(); 
    exercisename = models.CharField(max_length = 100)
    repetitions = models.IntegerField()
    weight = models.FloatField() 
```

最后是我的 Django 查看代码：

```
user =User.objects.get(username = request.session['username']) #user 
        dates = request.GET.getlist('datepickerfilter') # two dates
        workout_ids = workout.objects.filter(userid=user.id).filter( workoutdate__gte = dates[0]).filter(workoutdate__lte = dates[1])
        all_exercises = exercise.objects.filter(workoutid__in = workout_ids) 
```

我想将锻炼模型中的“workoutid”列更改为与锻炼模型中的 id 字段相关的外键。我尝试将更改模型字段更改为：

```
workoutid = models.ForeignKey(workout); 
```

然后在我看来，将此 order_by 语句添加到 all_exercises 的末尾，即

```
all_exercises = exercise.objects.filter(workoutid__in = workout_ids).order_by("workoutid__workoutdate") 
```

我收到一条错误消息：

```
(1054, "Unknown column 'tracking_exercise.workoutid_id' in 'field list'") 
```

我认为这是我的模型代码中的一个问题，但我不确定这可能是视图的问题。

谢谢你们的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T01:25:43.350

您收到错误是因为锻炼 ID 不是 ID 列表。

对您当前问题的快速简单的解决方法是`.values_list('id', flat=True)`像这样使用：

```
workout_ids = workout.objects.filter(userid=user.id).\
    filter(workoutdate__gte=dates[0]).\
    filter(workoutdate__lte=dates[1]).\
    values_list('id', flat=True) 
```

但是，我强烈建议使用`models.ForeignKey`. 这是一个简单的示例，可以帮助您入门：

```
class Workout:
    user = models.ForeignKey(User)
    # other fields go here...

class Exercise:
    workout = models.ForeignKey(Workout)
    # other fields go here... 
```

然后你可以编写查询：

```
workout_list = Workout.objects.filter(user=request.user)
exercise_list = Exercise.objects.filter(workout__in=workout_list).order_by('workout__workoutdate') 
```

# javascript - 字符串替换javascript

> ID：11641053
> 
> 赞同：3
> 
> 时间：2012-07-25T00:13:01.907
> 
> 标签：javascript, regex

> **可能重复：**
> [替换字符串中字符的所有实例的最快方法 = Javascript](https://stackoverflow.com/questions/2116558/fastest-method-to-replace-all-instances-of-a-character-in-a-string-javascript)
> [如何在 JavaScript 中替换字符串中的所有点](https://stackoverflow.com/questions/2390789/how-to-replace-all-points-in-a-string-in-javascript)

我有一个字符串`2012/04/13`。我需要`/`用`-`. 我怎样才能做到这一点 ？

```
var dateV = '2012/04/13';
dateV= dateV.replace('/','-'); 
```

它只替换字符串 ( )中的第一个`/`而不是全部。我应该怎么做才能纠正这个？`/``2012-04/13`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T00:16:04.797

您需要使用全局正则表达式选项进行全局正则表达式替换。这应该适合你：

```
var dateV = '2012/04/13';
var regex = new RegExp("/", "g"); // "g" - global option
dateV = dateV.replace(regex, "-");
console.log(dateV);
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T00:16:02.933

采用

```
dateV= dateV.replace(/\//g,'-'); 
```

# c++ - 使用 C++ 的多个源文件

> ID：11641054
> 
> 赞同：0
> 
> 时间：2012-07-25T00:13:07.100
> 
> 标签：c++, file, header

我有一个简单的项目，分为以下源文件：

我的.h：

```
#ifndef MY_H
#define MY_H

extern int val;     
void print_val();   

#endif 
```

我的.cpp：

```
#include "my.h"
#include <iostream>

void print_val()
{
    std::cout << val;
} 
```

主.cpp：

```
#include "my.h"

int main()
{
    val = 4;      
    print_val();  

    return 0;
} 
```

当我编译时，我收到以下错误：

```
1>main.obj : error LNK2001: unresolved external symbol "int val" (?val@@3HA)             
1>my.obj : error LNK2001: unresolved external symbol "int val" (?val@@3HA)     
1>c:\...\test.exe : fatal error LNK1120: 1 unresolved externals 
```

为什么会这样？我只是想在头文件中声明一个变量和函数，并在一个单独的源文件中定义函数。我使用 Visual C++ 2010 Express，该项目是一个 Win32 控制台应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T00:15:55.633

在你的`my.cpp`你可能想定义你的外部变量，像这样：

```
int val; // optionally you can also initialize it here, like this: int val=0; 
```

这将确保编译器实际上为此变量分配了一个对象，该对象稍后可以链接到您的可执行文件中。

在相关说明中 - 确保在**所有源文件中只有****一个**此类`extern`变量的定义，否则您将有重复的符号并且链接器不会对此感到满意

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T00:16:05.017

您正在定义函数，但从未声明变量`val`。这就是为什么找不到它的符号的原因。**

# jquery - 表单的 jQuery 验证规则有问题

> ID：11641056
> 
> 赞同：0
> 
> 时间：2012-07-25T00:13:17.443
> 
> 标签：jquery, html, forms, validation

您好我正在尝试使用 jQuery Validation ，

基本上我有一个表格，无论如何都需要某些元素，

但是然后我有其他只需要的字段是选中了一个复选框

我在这里使用 jQuery Validation 是[文档的链接](http://docs.jquery.com/Plugins/Validation#Validate_forms_like_you.27ve_never_been_validating_before.21)

这是我的表格

```
<form action="http://www.funnytennisstories.com/save-story.php" method="POST" name="story-form" id="storyForm">
<fieldset>
    <label for="Your Story">Your Story</label>
    <textarea class="required" name="your-story" cols="" rows=""></textarea>
    <label for="free-wrist-band">Check the box to receive a free tennis wristband &nbsp;  </label>
    <input id="free-wrist-band-check-box" name="free-wrist-band" type="checkbox" />
    <label for="address">Address</label><input id="address" class="txtClass shipping" name="address" type="text" >
    <input type="submit" name="story-post" value="Post Your Story"/>
 </fieldset>
</form> 
```

所以我已经减少了很多，但基本上如果`free-wrist-band-check-box`选择了我应该输入地址文本，但如果没有选中我不应该输入任何文本

这是我写的javascript，但是如果选中了复选框，它就不起作用

```
<script>

 $(document).ready(function(){

    $("#storyForm").validate({
    debug:true,
       rules: {
         shipping: {
             required: $("#free-wrist-band-check-box:checked")
           }
       }
    });
}); 
```

调试也没有显示在 chrome 上的 firebug lite（和检查元素工具）和 safari 上的检查器中

任何想法的家伙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T00:36:21.023

在里面添加这个`$(document).ready(function(){...})`

```
$('#free-wrist-band-check-box').on('change', function(){
    if($(this).is(':checked')) $("#address").rules("add", "required");
    else $("#address").rules("remove", "required");
}); 
```

因此，`address text box`只有在`checkbox`选中 时才需要。

[**演示。**](http://jsfiddle.net/heera/SeWXp/8/)

# java - JButton 数组到 int 数组

> ID：11641061
> 
> 赞同：0
> 
> 时间：2012-07-25T00:14:22.810
> 
> 标签：java, arrays, swing, int, jbutton

我正在尝试使用 java swing 制作一个井字游戏程序，并且我已经制作了框架。如何使 JButton 数组中的按钮激活 int 数组？我希望 int 数组保存井字游戏网格中点的值，因此当按下按钮时，int 数组中的对应点将为 0 或 1，并且按钮的文本将更改为一个 X 或一个 O。

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class TicTacToeGui extends javax.swing.JFrame implements ActionListener
{

    int[][] grid = new int[3][3];
    public final static int r = 3;
    public final static int c = 3;
    public final static int X = 0;
    public final static int O = 1;

    TicTacToeGui()
    {
        this.setTitle("Tic Tac Toe");
        JButton[][] button = new JButton[3][3];
        JPanel panel = new JPanel();
        panel.setLayout(new GridLayout(r, c));
        for(int i = 0; i < r; i++)
        {
            for(int j = 0; j < c; j++)
            {
                button[i][j] = new JButton("");
                button[i][j].addActionListener(this);
                panel.add(button[i][j]);
            }

        }
        this.add(panel);
        this.setSize(400, 400);
        this.setDefaultCloseOperation(EXIT_ON_CLOSE);
    }

    public void actionPerformed(ActionEvent e){
        if(e.getSource() instanceof JButton){

        }
    }
    public static void main(String [] args)
    {
        new TicTacToeGui().setVisible(true);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T00:28:49.783

您可以创建自己的`JButton`实现并向其提供索引值。我们可以从`ActionListener`

```
public void actionPerformed(ActionEvent e){
    if(e.getSource() instanceof MySuperButton){

        MySuperButton btn = (MySuperButton)e.getSource();
        int[] index = btn.getIndex();
        // or
        int row = btn.getRow();
        int col = btn.getColumn();

    }
} 
```

然后，当您设置它时，您可以：

```
for(int i = 0; i < r; i++)
{
    for(int j = 0; j < c; j++)
    {
        button[i][j] = new MySuperButton(i, j); // Store the row/column
        button[i][j].addActionListener(this);
        panel.add(button[i][j]);
    }

} 
```

这也将允许您在内部存储按钮的状态......

您可能还想看看[JToggleButton](http://docs.oracle.com/javase/6/docs/api/javax/swing/JToggleButton.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T00:23:07.580

假设 JButton 索引镜像 int 数组，您可以在按钮数组中搜索被按下的 JButton ( `e.getSource()`in `actionPerformed`)，但您必须将按钮数组作为类的实例变量，以便您可以从其他方法使用它，尤其是。`actionPerformed()`. _ 找到索引后，只需在 int 数组中更新它的对应值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T00:36:45.077

使用 JButton 的 setActionCommand 方法将 button[0][0] 中的动作命令设置为“00”，将 button[2][1] 中的命令设置为“21”。这让你很容易从 actionPerformed 中获得职位。此外，您需要三个状态，而不仅仅是 2 个。如果您不确定我在说什么，请玩井字游戏并在中途写下数组。

# java - Android Touch UP 不工作

> ID：11641064
> 
> 赞同：3
> 
> 时间：2012-07-25T00:14:52.630
> 
> 标签：java, android, android-event

我有点卡在android中的这个项目上，我试图弄清楚为什么这不起作用，但我不知道。顺便说一下，这是一个自定义视图，以防万一。

问题是这个事件 ACTION_DOWN 正在完美地工作我得到控制台调试“触摸 1”和“触摸 2”但是 ACTION_UP、ACTION_CANCEL 或默认值：不工作我无法弄清楚所以任何帮助将不胜感激谢谢

```
 public void doTouch(MotionEvent event)
        {
            int action = event.getAction();

            float x = event.getX();
            float y = event.getY();

            switch(action)
            {
            case MotionEvent.ACTION_DOWN:
                if(x < 125 && y < 125){
                    for(AnimatedSprite a:mSprites)
                    {
                        if(a.getID() == 1)
                        {
                            a.AdvanceToFrame(0);
                            touching = true;
                            System.out.println("Touching 1");
                            //touch_obj1 = true;
                        }
                    }
                }
                else if(x > getWidth()-125 && y > getHeight()-125)
                {
                    for(AnimatedSprite a:mSprites)
                    {
                        if(a.getID() == 2)
                        {
                            a.AdvanceToFrame(1);
                            System.out.println("Touching 2");
                            touching = true;
                            //touch_obj2 = true;
                        }
                    }
                }
                else
                {
                    touching = false;
                }
                break;
                case MotionEvent.ACTION_CANCEL:
                case MotionEvent.ACTION_UP:

                    System.out.println("Touch UP");
                    touching = false;
                    break;

                default:
                    System.out.println("NOT Touching");
                    touching = false;
                break;
            }
        } 
```

这是我调用 doTouch 函数的地方

```
public boolean onTouchEvent(MotionEvent event)
        {
            thread.doTouch(event);
            return super.onTouchEvent(event);
        } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-25T13:05:14.413

看起来你的问题是你处理触摸事件的方式`onTouchEvent`。`onTouchEvent`如果要处理触摸事件，则需要从返回 true 。因此，如果您从系统中获取`ACTION_DOWN`并返回 false，`onTouchEvent`则在下一个事件之前不会再向您发送任何相关的触摸`ACTION_DOWN`事件。

在不确切知道您对触摸事件做什么的情况下，我无法为您提供一个绝对适合您的情况的解决方案，但是如果您想接收任何触摸事件，而不是`ACTION_DOWN`您需要从`onTouchEvent`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T21:16:33.250

好的，我解决了这个问题，我要做的是

1）我改变了函数，所以它可以返回一个

```
boolean public bool doTouch(MotionEvent event) 
```

2）当然我在该函数结束时返回true

3）打电话时我这样做了

```
 public boolean onTouchEvent(MotionEvent event)
    {
        return doTouch(event);
    } 
```

# cordova - 无法获得本地通知以在 phonegap 中触发

> ID：11641065
> 
> 赞同：0
> 
> 时间：2012-07-25T00:15:12.663
> 
> 标签：cordova, phonegap-plugins, localnotification

我正在尝试构建一个闹钟应用程序，并且正在使用 localNotification 并尝试调整来自[http://www.drewdahlman.com/meusLabs/?p=84](http://www.drewdahlman.com/meusLabs/?p=84)的代码。

我的应用程序是 phonegap 与骨干网的结合。我正在设置 localNotification

```
plugins.localNotification.add({
           日期：set_alarm，
           消息：'Wakey Wakey...',
           徽章：0，
           编号：12，
           声音：'Alarm.cab'，
           背景：'MyApp.Views.Alarm.notification()',
           前景：'MyApp.Views.Alarm.notification()'
           });

```

后来，在我的 MyApp.Views.Alarm 我有

```
通知：函数（）{
   警报（“警报”）；
}

```

不幸的是，这个警报永远不会在 iOS 模拟器中触发。

xCode 输出以下内容

```
2012-07-25 10:06:25.054 唤醒[8253:13403]
  通知集：2012-07-25 10:07:25 +0000
  （ID：12，徽章：0，声音：Alarm_01.cab，
   背景：Wakey.Views.Alarm.notification()，
   前景：Wakey.Views.Alarm.notification())
2012-07-25 10:06:25.055 Wakey[8253:13403] [信息] 2012-07-25T10:07:25.044Z
2012-07-25 10:06:25.056 Wakey[8253:13403] [INFO] “2012-07-25T10:07:25.044Z”
2012-07-25 10:06:25.058 Wakey[8253:13403] 我目前很活跃

```

奇怪的是，我在代码中找不到输出“我当前处于活动状态”的任何地方。我觉得很奇怪，它不在 localNotification 插件文件中。

关于为什么我的通知没有被触发的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T03:46:55.953

更改前台和后台功能的格式。

```
plugins.localNotification.add({ 
           date: set_alarm, 
           message: 'Wakey Wakey...', 
           badge: 0, 
           id: 12, 
           sound:'Alarm.cab',
           background:'MyApp.Views.Alarm.notification',
           foreground:'MyApp.Views.Alarm.notification' 
           }); 
```

在事物的目标 C 方面，调用函数并将通知的 id 作为参数包含在内。

该插件的最新更新添加了将 id 包含在回调中的功能，并且需要更新文档。

干杯！

编辑 - 我正在更新教程，自原始帖子以来发生了很多变化，我需要整合所有帖子！

# ios - 在 iOS 中，使用 CGPDFDocumentRef，为什么我的 PDF 显示的边距很大，而不是整个页面？

> ID：11641068
> 
> 赞同：2
> 
> 时间：2012-07-25T00:15:41.967
> 
> 标签：ios, xcode, pdf, margins, cgpdfdocument

> **可能重复：**
> [如何使 pdf 页面适合整个视图](https://stackoverflow.com/questions/4321681/how-to-fit-pdf-page-in-entire-view)

我正在毫无问题地显示 PDF，但是，在我编译应用程序时，原始 PDF 没有显示很大的边距。我的代码：

在 H 文件中：

```
@interface viewPDF : UIView 

{

CGPDFDocumentRef document;

} 
```

在 M 文件中：

```
 - (id)initWithFrame:(CGRect)frame {

self = [super initWithFrame:(CGRect)frame];
if (self) {
    self.backgroundColor = [UIColor clearColor];
    NSString *pathToPdfDoc = [[NSBundle mainBundle] pathForResource:@"myPDF" ofType:@"pdf"];
    NSURL *pdfUrl = [NSURL fileURLWithPath:pathToPdfDoc];
    document = CGPDFDocumentCreateWithURL((__bridge CFURLRef)pdfUrl);
    currentPage = 1;

}

return self;
}

-(void)drawRect:(CGRect)inRect{                 
if(document) 

{

    CGPDFPageRef page = CGPDFDocumentGetPage(document, currentPage);
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGContextSaveGState(ctx);
    CGContextTranslateCTM(ctx, 0.0, [self bounds].size.height);

    CGContextScaleCTM(ctx, 1.0, -1.0);
    CGContextConcatCTM(ctx, CGPDFPageGetDrawingTransform(page, kCGPDFCropBox, [self bounds], 0, true));
    CGContextDrawPDFPage(ctx, page);    
    CGContextRestoreGState(ctx);

 } 
```

有没有伟大的 PDF 开发人员知道如何避免空白？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T08:25:41.103

PDF 页面由 2 个框定义：定义物理页面大小的媒体框和定义媒体框内页面可见区域的裁剪框。您需要做的是在绘制 PDF 页面之前设置与裁剪框匹配的剪切路径。然后，当您绘制页面时，裁剪框外的所有内容都将被剪裁，您将看到在任何查看器中看到的页面。

# android - Android偏好Textview多行？

> ID：11641069
> 
> 赞同：-1
> 
> 时间：2012-07-25T00:15:44.967
> 
> 标签：android, textview, multiline, preference

如何在 PreferenceActivity 中使用 Textview（多行）？

我在应用程序“K-9 Mail”中找到了一个示例。那里的偏好“签名”是使用多行文本视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T02:11:42.717

检查[这个](http://androidresearch.wordpress.com/2012/03/09/creating-a-preference-activity-in-android/)例子。Multiline TextView 仍然是我们所知道的 TextView，您只需要设置尺寸或使用“\n”换行符打印文本。

# python - Tastypie 在两个 ForeignKey 关系中使用 ToOneFields

> ID：11641074
> 
> 赞同：2
> 
> 时间：2012-07-25T00:16:22.443
> 
> 标签：python, django, tastypie

我正在尝试在我的资源中执行此操作...

thingy = fields.ToOneField(ThingyResource, 'whatzit__thingy')

即，遍历fk。我在一个资源上，whos 模型对“whatzit”有一个 fk，而“whatzit”模型对“thingy”有一个 fk。

该语法不起作用-有没有办法做到这一点，或者不建议这样做，还是其他？

或者，是否有一种直接的方法来查询对象的 uri 资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T00:46:11.920

我想你只想这样做：

```
whatzit = fields.ToOneField(WhatzitResource, 'whatzit') 
```

然后像这样脱水：

```
def dehydrate(self, bundle):
    bundle.data['thingy'] = whatzit.thingy
    return bundle 
```

# python - 牛顿重力模拟

> ID：11641077
> 
> 赞同：3
> 
> 时间：2012-07-25T00:17:11.423
> 
> 标签：python, physics, game-physics

我正在用 Python 编写一个以重力为主要机制的 2D 游戏。

我制作了一些游戏引擎，但我被卡住的部分实际上是确定要为每个质量的 X 和 Y 速度添加什么。

假设我有圆 A 和圆 B，每个圆都有一个位置、一个速度和一个质量。每个都应该相当逼真地拉向另一个，模拟牛顿引力。我将如何实现这一目标？

是的，我对测量单位非常模棱两可。稍后我可以尝试更改变量以适应公式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T00:27:50.920

你需要解出每个物体的运动方程。它们将被写成一组耦合的一阶常微分方程。您将分别为 x 和 y 方向编写一个方程，它将给出作为两个物体之间的重力除以它们各自质量的函数的加速度。

你知道加速度、速度和位移之间的关系。

您最终需要求解四个耦合的常微分方程。使用时间步进解决方案及时推进解决方案 - 显式或隐式，您的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T00:22:36.957

假设你有一个游戏中的量化时间单位，一个时钟的“滴答”，如果你愿意的话，给每个身体一个速度向量（每个“滴答”移动多少，朝哪个方向）和对于每个刻度，让彼此的身体根据它们的距离将其速度矢量改变一定量（对其施加力，除以它的质量）。然后，只要你的时钟滴答作响，物体就会根据它们的速度矢量移动，然后它们的速度矢量会根据施加在它们身上的净力而改变。只要你决定哪个先发生——加速还是运动——只要你的刻度足够小，你应该没问题。

# asp.net - 停止附加“0”的掩码

> ID：11641083
> 
> 赞同：2
> 
> 时间：2012-07-25T00:17:43.853
> 
> 标签：asp.net, .net

使用输入掩码时，如果输入不符合掩码的长度，该字段将附加一个“0”。

掩码如下：

```
<cc1:MaskedEditExtender ID="MaskedEditExtender2" 
     runat="server" 
     ClearMaskOnLostFocus="true" 
     Mask="9-999999999999" 
     MaskType="Number" 
     TargetControlID="Sub_Ord_NumTextBox" 
     OnInvalidCssClass="MaskedEditError" 
     AutoComplete="true"/> 
```

所以一个像这样的数字：

> 1-123456789123

（14 个字符，匹配掩码）

很好，但一个喜欢

> 1-12345678912

（13 个字符）

将导致保存的字段添加一个零：

> 1-123456789120

我该如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T00:53:15.130

[在文档](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/MaskedEdit/MaskedEdit.aspx)的大力帮助下解决了这个问题！

> AutoComplete - True 自动填充用户未指定的空掩码字符
> 
> MaskType=Number - 空掩码字符将用零填充
> 
> MaskType=Time - 空掩码字符将填充当前时间
> 
> MaskType=Date - 空掩码字符将填充当前日期
> 
> MaskType=DateTime - 空掩码字符将填充当前日期/时间

设置 AutoComplete = false 似乎解决了我的问题。

# android - Android状态栏图标颜色

> ID：11641085
> 
> 赞同：0
> 
> 时间：2012-07-25T00:18:16.090
> 
> 标签：android

根据[http://developer.android.com/guide/practices/ui_guidelines/icon_design_status_bar.html](http://developer.android.com/guide/practices/ui_guidelines/icon_design_status_bar.html) - 状态栏图标应该是白色的，没有任何颜色。

我拥有的许多应用程序都有彩色状态栏图标，而有些应用程序遵循指南并保持白色。

**我的问题是这个指南有多严格？如果我们允许我们的用户更改状态栏图标的颜色，这会阻止我们的应用进入 Play 商店吗？**

任何想法都会有所帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T00:30:19.480

指导方针只是指导方针:)

如果您的意思是“接受进入 Play 商店”，那么当没有白色图标时，您的应用将被 Google 删除：不，不会。正如您已经提到的，周围有很多应用程序不遵守准则。

如果您想知道您的应用程序是否会被用户接受：这取决于。我知道很多应用程序，不遵守指南并且仍然获得相当高的排名，并且在我个人看来也看起来非常好。反过来说，我知道使用白色图标的应用程序仍然看起来不太好，例如因为它们使用了一些跨平台工具包，这些工具包创建的应用程序看起来像 iOS 应用程序，但不适合 Android。

另一个评论：设计指南是相当新的，所以有很多应用程序不是针对它们设计的。所以当然，如果你现在正在构建一个应用程序，它应该尽可能地适应它，但是，不要把它当作固定的规则。在某些情况下，如果您的应用看起来与指南有点不同，它会看起来更好。最后，重要的是用户体验！

Google I/O 2012 上关于应用程序设计的一些有趣的演讲：

*   [https://developers.google.com/events/io/sessions/gooio2012/112/](https://developers.google.com/events/io/sessions/gooio2012/112/)
*   [https://developers.google.com/events/io/sessions/gooio2012/115/](https://developers.google.com/events/io/sessions/gooio2012/115/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T00:22:57.007

1.  这是一个指南，而不是发布的清单。

    它可能会在全球范围内被更广泛地采用，但并不是每个人都在使用 UI 模式……但是。

2.  所以不，您的申请不应因此而被拒绝。

    事实上，许多应用程序在状态栏图标中使用颜色（实际上大多数是）......

希望能帮助到你。

# javascript - IE9上的addMethod错误

> ID：11641092
> 
> 赞同：1
> 
> 时间：2012-07-25T00:19:41.233
> 
> 标签：javascript, jquery, html, internet-explorer-9

当您上传文件时，我有这个脚本来验证文件大小：

```
$.validator.addMethod('filesize', function(value, element, param) {
    // param = size (en bytes) 
    // element = element to validate (<input>)
    // value = value of the element (file name)
    return this.optional(element) || (element.files[0].size <= param) 
}); 
```

而且我只在 IE9 中不断收到此错误：

```
SCRIPT5007: Unable to get value of the property '0': object is null or undefined 
```

IE9 Debug 说错误在这一行：

```
return this.optional(element) || (element.files[0].size <= param) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T00:25:11.873

是的，IE9 不支持文件 API。您需要在服务器端执行此操作或使用插件。

# mysql - 插入日期时出错 - 日期值不正确：

> ID：11641096
> 
> 赞同：29
> 
> 时间：2012-07-25T00:20:37.367
> 
> 标签：mysql, sql

我有一个名为的列`today`，类型是`DATE`.

当我尝试以格式添加日期时，`'07-25-2012'`出现以下错误：

> 无法运行查询：日期值不正确：列的“07-25-2012”

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-25T00:39:14.913

由于 MySql 在日期类型列中接受 ymd 格式的日期，因此您需要通过`STR_TO_DATE`以下方式将日期转换为 yyyy-mm-dd 格式以便插入：

```
INSERT INTO table_name(today) 
VALUES(STR_TO_DATE('07-25-2012','%m-%d-%y')); 
```

同样，如果您想选择除Mysql格式以外的其他格式的日期，您应该尝试`DATE_FORMAT`功能

```
SELECT DATE_FORMAT(today, '%m-%d-%y') from table_name; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T00:24:16.697

一般mysql使用这种日期格式'Ymd H:i:s'

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-25T00:28:10.680

您需要将日期转换为 YYYY-MM-DD 以便使用默认配置将其作为 MySQL 日期插入。

一种方法是[`STR_TO_DATE()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)：

```
insert into your_table (...)
values (...,str_to_date('07-25-2012','%m-%d-%Y'),...); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-25T04:40:01.703

这是[日期格式](http://dev.mysql.com/doc/refman/5.5/en/datetime.html)：

> DATE 类型用于具有日期部分但没有时间部分的值。**MySQL 以'YYYY-MM-DD'**格式检索和显示 DATE 值。支持的范围是“1000-01-01”到“9999-12-31”。

当 MySQL 格式为 '2012-07-25' 时，为什么要插入 '07-25-2012' 格式？实际上，如果[sql_mode](http://dev.mysql.com/doc/refman/5.5/en/server-sql-mode.html)是`traditional/strict mode`else 它只是输入 0000-00-00 并给出警告，则会出现此错误：`1265 - Data truncated for column 'col1' at row 1`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-06T12:27:36.790

您需要使用 YYYY-MM-DD 格式在 mysql 中插入日期

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-02-17T05:52:55.223

您可以在创建表时使用“DATE”作为数据类型。这样就可以避免上述错误。例如：

```
CREATE TABLE Employee (birth_date DATE);
INSERT INTO Employee VALUES('1967-11-17'); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-12-04T21:43:05.493

我对这个错误有不同的原因。我试图在不使用引号的情况下插入日期，但收到一个奇怪的错误，告诉我我试图插入 2003 年的日期。

[![我的错误信息：](../Images/cd4b9f9f2c6e97dbb9f9b3224e13aca8.png)](https://i.stack.imgur.com/fymp8.png)

虽然我已经在使用 YYYY-MM-DD 格式，但我忘记在日期周围添加引号。即使它是日期而不是字符串，仍然需要引号。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-09T06:40:21.593

您可以使用此代码。它会正常工作。

```
INSERT INTO table_name(today)  
VALUES(STR_TO_DATE('07-25-2012','%m-%d-%Y')); 
```

实际上，您不能直接将日期存储为字符串，您首先需要以我们使用`STR_TO_DATE()`函数的正确格式将字符串转换为日期，该函数需要两个参数，第一个是将日期作为字符串，第二个是您传递的日期格式你的第一个论点。

# python - 用 C、Clojure、Python、Ruby、Scala 和其他语言解释基准

> ID：11641098
> 
> 赞同：91
> 
> 时间：2012-07-25T00:20:44.480
> 
> 标签：python, ruby, scala, clojure, benchmarking

## **免责声明**

我知道人为的基准是邪恶的。他们只能在非常具体的狭窄情况下显示结果。我不认为一种语言比另一种更好，因为一些愚蠢的板凳。但是我想知道为什么结果如此不同。请在底部查看我的问题。

## 数学基准描述

基准是简单的数学计算，以找到相差 6 的素数对（所谓的[性感素数](https://en.wikipedia.org/wiki/Sexy_prime)）例如低于 100 的性感素数将是：`(5 11) (7 13) (11 17) (13 19) (17 23) (23 29) (31 37) (37 43) (41 47) (47 53) (53 59) (61 67) (67 73) (73 79) (83 89) (97 103)`

## 结果表

*表中：以秒为单位的计算时间* 运行：除 Factor 之外的所有都在 VirtualBox 中运行（Debian 不稳定的 amd64 来宾，Windows 7 x64 主机） CPU：AMD A4-3305M

```
 Sexy primes up to:        10k      20k      30k      100k               

  Bash                    58.00   200.00     [*1]      [*1]

  C                        0.20     0.65     1.42     15.00

  Clojure1.4               4.12     8.32    16.00    137.93

  Clojure1.4 (optimized)   0.95     1.82     2.30     16.00

  Factor                    n/a      n/a    15.00    180.00

  Python2.7                1.49     5.20    11.00       119     

  Ruby1.8                  5.10    18.32    40.48    377.00

  Ruby1.9.3                1.36     5.73    10.48    106.00

  Scala2.9.2               0.93     1.41     2.73     20.84

  Scala2.9.2 (optimized)   0.32     0.79     1.46     12.01 
```

[*1] - 恐怕要花多少时间

## 代码清单

C：

```
int isprime(int x) {
  int i;
  for (i = 2; i < x; ++i)
    if (x%i == 0) return 0;
  return 1;
}

void findprimes(int m) {
  int i;
  for ( i = 11; i < m; ++i)
    if (isprime(i) && isprime(i-6))
      printf("%d %d\n", i-6, i);
}

main() {
    findprimes(10*1000);
} 
```

红宝石：

```
def is_prime?(n)
  (2...n).all?{|m| n%m != 0 }
end

def sexy_primes(x)
  (9..x).map do |i|
    [i-6, i]
  end.select do |j|
    j.all?{|j| is_prime? j}
  end
end

a = Time.now
p sexy_primes(10*1000)
b = Time.now
puts "#{(b-a)*1000} mils" 
```

斯卡拉：

```
def isPrime(n: Int) =
  (2 until n) forall { n % _ != 0 }

def sexyPrimes(n: Int) = 
  (11 to n) map { i => List(i-6, i) } filter { _ forall(isPrime(_)) }

val a = System.currentTimeMillis()
println(sexyPrimes(100*1000))
val b = System.currentTimeMillis()
println((b-a).toString + " mils") 
```

Scala 优化`isPrime`（与 Clojure 优化中的想法相同）：

```
import scala.annotation.tailrec

@tailrec // Not required, but will warn if optimization doesn't work
def isPrime(n: Int, i: Int = 2): Boolean = 
  if (i == n) true 
  else if (n % i != 0) isPrime(n, i + 1)
  else false 
```

Clojure：

```
(defn is-prime? [n]
  (every? #(> (mod n %) 0)
    (range 2 n)))

(defn sexy-primes [m]
  (for [x (range 11 (inc m))
        :let [z (list (- x 6) x)]
        :when (every? #(is-prime? %) z)]
      z))

(let [a (System/currentTimeMillis)]
  (println (sexy-primes (* 10 1000)))
  (let [b (System/currentTimeMillis)]
    (println (- b a) "mils"))) 
```

Clojure 优化`is-prime?`：

```
(defn ^:static is-prime? [^long n]
  (loop [i (long 2)] 
    (if (= (rem n i) 0)
      false
      (if (>= (inc i) n) true (recur (inc i)))))) 
```

Python

```
import time as time_

def is_prime(n):
  return all((n%j > 0) for j in xrange(2, n))

def primes_below(x):
  return [[j-6, j] for j in xrange(9, x+1) if is_prime(j) and is_prime(j-6)]

a = int(round(time_.time() * 1000))
print(primes_below(10*1000))
b = int(round(time_.time() * 1000))
print(str((b-a)) + " mils") 
```

因素

```
MEMO:: prime? ( n -- ? )
n 1 - 2 [a,b] [ n swap mod 0 > ] all? ;

MEMO: sexyprimes ( n n -- r r )
[a,b] [ prime? ] filter [ 6 + ] map [ prime? ] filter dup [ 6 - ] map ;

5 10 1000 * sexyprimes . . 
```

重击（zsh）：

```
#!/usr/bin/zsh
function prime {
  for (( i = 2; i < $1; i++ )); do
    if [[ $[$1%i] == 0 ]]; then
      echo 1
      exit
    fi
  done
  echo 0
}

function sexy-primes {
  for (( i = 9; i <= $1; i++ )); do
    j=$[i-6]
    if [[ $(prime $i) == 0 && $(prime $j) == 0 ]]; then
      echo $j $i
    fi
  done
}

sexy-primes 10000 
```

## 问题

1.  为什么 Scala 这么快？是因为**静态类型**吗？或者它只是非常有效地使用JVM？
2.  ~~为什么 Ruby 和 Python 之间存在如此巨大的差异？我认为这两者并没有完全不同。也许我的代码是错误的。请赐教！谢谢。~~ **UPD**是的，那是我的代码中的错误。Python 和 Ruby 1.9 相当。
3.  Ruby 版本之间的生产力飞跃确实令人印象深刻。
4.  我可以通过添加类型声明来优化 Clojure 代码吗？会有帮助吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-25T01:12:14.563

粗略的回答：

1.  Scala 的静态类型在这里帮了很大的忙——这意味着它可以非常有效地使用 JVM，而无需太多额外的努力。
2.  我不太确定 Ruby/Python 的区别，但我怀疑`(2...n).all?`该函数`is-prime?`可能在 Ruby 中得到了很好的优化（编辑：听起来确实如此，有关更多详细信息，请参阅 Julian 的答案......）
3.  Ruby 1.9.3 得到了更好的优化
4.  Clojure 代码当然可以加速很多！虽然 Clojure 默认是动态的，但在许多情况下，您可以在需要时使用类型提示、原始数学等来接近 Scala/纯 Java 的速度。

Clojure 代码中最重要的优化是在 中使用类型化的原始数学`is-prime?`，例如：

```
(set! *unchecked-math* true) ;; at top of file to avoid using BigIntegers

(defn ^:static is-prime? [^long n]
  (loop [i (long 2)] 
    (if (zero? (mod n i))
      false
      (if (>= (inc i) n) true (recur (inc i)))))) 
```

有了这个改进，我让 Clojure 在 0.635 秒内完成了 10k（即你列表中第二快的，击败了 Scala）

**PS**请注意，在某些情况下，您在基准测试中打印了代码 - 这不是一个好主意，因为它会扭曲结果，特别是如果`print`第一次使用类似的函数会导致 IO 子系统的初始化或类似的东西！

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-07-25T05:19:04.393

这是一个快速的 Clojure 版本，使用相同的基本算法：

```
(set! *unchecked-math* true)

(defn is-prime? [^long n]
  (loop [i 2]
    (if (zero? (unchecked-remainder-int n i))
      false
      (if (>= (inc i) n)
        true
        (recur (inc i))))))

(defn sexy-primes [m]
  (for [x (range 11 (inc m))
        :when (and (is-prime? x) (is-prime? (- x 6)))]
    [(- x 6) x])) 
```

它在我的机器上运行速度比你原来的快大约 20 倍。这是一个利用 1.5 中新的 reducers 库的版本（需要 Java 7 或 JSR 166）：

```
(require '[clojure.core.reducers :as r]) ;'

(defn sexy-primes [m]
  (->> (vec (range 11 (inc m)))
       (r/filter #(and (is-prime? %) (is-prime? (- % 6))))
       (r/map #(list (- % 6) %))
       (r/fold (fn ([] []) ([a b] (into a b))) conj))) 
```

这比原来的运行速度快 40 倍。在我的机器上，1.5 秒内达到 100k。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-07-25T00:35:12.037

我将只回答 #2，因为它是唯一一个我有任何远程智能要说的东西，但是对于你的 Python 代码，你正在创建一个中间列表 in `is_prime`，而你`.map`在你的`all`in Ruby 中使用它只是迭代。

如果您更改`is_prime`为：

```
def is_prime(n):
    return all((n%j > 0) for j in range(2, n)) 
```

他们不相上下。

我可以进一步优化 Python，但我的 Ruby 还不够好，无法知道我何时获得了更多优势（例如，使用`xrange`使 Python 在我的机器上获胜，但我不记得你使用的 Ruby 范围是否创建了内存中的整个范围与否）。

**编辑：**不要太傻，让 Python 代码看起来像：

```
import time

def is_prime(n):
    return all(n % j for j in xrange(2, n))

def primes_below(x):
    return [(j-6, j) for j in xrange(9, x + 1) if is_prime(j) and is_prime(j-6)]

a = int(round(time.time() * 1000))
print(primes_below(10*1000))
b = int(round(time.time() * 1000))
print(str((b-a)) + " mils") 
```

这并没有太大变化，对我来说是 1.5 秒，而且更愚蠢的是，使用 PyPy 运行它时 10K 的速度为 0.3 秒，100K 的速度为 21 秒。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-07-25T01:42:49.560

`isPrime`您可以通过修改您的方法使 Scala 更快

```
 def isPrime(n: Int, i: Int = 2): Boolean = 
    if (i == n) true 
    else if (n % i != 0) isPrime(n, i + 1)
    else false 
```

不是很简洁，但程序在 40% 的时间内运行！

我们去掉了多余的`Range`和匿名`Function`的对象，Scala 编译器识别出尾递归并将其转换为一个 while 循环，JVM 可以将其转换为或多或少的最佳机器代码，因此它应该不会离 C 太远版本。

另请参阅：[如何在 Scala 中优化 for-comprehensions 和循环？](https://stackoverflow.com/questions/6146182/how-to-optimize-for-comprehensions-and-loops-in-scala)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-07-25T06:47:31.273

这是我的并行和非并行的 scala 版本，只是为了好玩：（在我的双核计算中，并行版本需要 335 毫秒，而非并行版本需要 655 毫秒）

```
object SexyPrimes {
  def isPrime(n: Int): Boolean = 
    (2 to math.sqrt(n).toInt).forall{ n%_ != 0 }

  def isSexyPrime(n: Int): Boolean = isPrime(n) && isPrime(n-6)

  def findPrimesPar(n: Int) {
    for(k <- (11 to n).par)
      if(isSexyPrime(k)) printf("%d %d\n",k-6,k)
  }

  def findPrimes(n: Int) {
    for(k <- 11 to n)
      if(isSexyPrime(k)) printf("%d %d\n",k-6,k)
  }

  def timeOf(call : =>Unit) {
    val start = System.currentTimeMillis
    call
    val end = System.currentTimeMillis
    println((end-start)+" mils")
  }

  def main(args: Array[String]) {
    timeOf(findPrimes(100*1000))
    println("------------------------")
    timeOf(findPrimesPar(100*1000))
  }
} 
```

编辑：根据*Emil H*的建议，我更改了代码以避免 IO 和 jvm 预热的影响：

结果显示在我的计算中：

> 列表（3432、1934、3261、1716、3229、1654、3214、1700）

```
object SexyPrimes {
  def isPrime(n: Int): Boolean = 
    (2 to math.sqrt(n).toInt).forall{ n%_ != 0 }

  def isSexyPrime(n: Int): Boolean = isPrime(n) && isPrime(n-6)

  def findPrimesPar(n: Int) {
    for(k <- (11 to n).par)
      if(isSexyPrime(k)) ()//printf("%d %d\n",k-6,k)
  }

  def findPrimes(n: Int) {
    for(k <- 11 to n)
      if(isSexyPrime(k)) ()//printf("%d %d\n",k-6,k)
  }

  def timeOf(call : =>Unit): Long = {
    val start = System.currentTimeMillis
    call
    val end = System.currentTimeMillis
    end - start 
  }

  def main(args: Array[String]) {
    val xs = timeOf(findPrimes(1000*1000))::timeOf(findPrimesPar(1000*1000))::
             timeOf(findPrimes(1000*1000))::timeOf(findPrimesPar(1000*1000))::
             timeOf(findPrimes(1000*1000))::timeOf(findPrimesPar(1000*1000))::
             timeOf(findPrimes(1000*1000))::timeOf(findPrimesPar(1000*1000))::Nil
    println(xs)
  }
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-07-25T01:53:36.257

别介意基准；这个问题引起了我的兴趣，我做了一些快速的调整。这使用了`lru_cache`装饰器，它记住了一个函数；因此，当我们打电话时，`is_prime(i-6)`我们基本上可以免费获得主要支票。此更改将工作大致减少了一半。此外，我们可以`range()`只通过奇数进行调用，将工作再次大致减少一半。

[http://en.wikipedia.org/wiki/Memoization](http://en.wikipedia.org/wiki/Memoization)

[http://docs.python.org/dev/library/functools.html](http://docs.python.org/dev/library/functools.html)

这需要 Python 3.2 或更新版本才能获得`lru_cache`，但如果您安装提供`lru_cache`. 如果您使用的是 Python 2.x，您应该真正使用`xrange()`而不是`range()`.

[http://code.activestate.com/recipes/577479-simple-caching-decorator/](http://code.activestate.com/recipes/577479-simple-caching-decorator/)

```
from functools import lru_cache
import time as time_

@lru_cache()
def is_prime(n):
    return n%2 and all(n%i for i in range(3, n, 2))

def primes_below(x):
    return [(i-6, i) for i in range(9, x+1, 2) if is_prime(i) and is_prime(i-6)]

correct100 = [(5, 11), (7, 13), (11, 17), (13, 19), (17, 23), (23, 29),
        (31, 37), (37, 43), (41, 47), (47, 53), (53, 59), (61, 67), (67, 73),
        (73, 79), (83, 89)]
assert(primes_below(100) == correct100)

a = time_.time()
print(primes_below(30*1000))
b = time_.time()

elapsed = b - a
print("{} msec".format(round(elapsed * 1000))) 
```

以上只花了很短的时间来编辑。我决定更进一步，让素数测试只尝试素数除数，并且只测试被测试数的平方根。我这样做的方式只有在您按顺序检查数字时才有效，因此它可以累积所有素数；但是这个问题已经按顺序检查了数字，所以这很好。

在我的笔记本电脑上（没什么特别的；处理器是 1.5 GHz AMD Turion II “K625”）这个版本在 8 秒内产生了 100K 的响应。

```
from functools import lru_cache
import math
import time as time_

known_primes = set([2, 3, 5, 7])

@lru_cache(maxsize=128)
def is_prime(n):
    last = math.ceil(math.sqrt(n))
    flag = n%2 and all(n%x for x in known_primes if x <= last)
    if flag:
        known_primes.add(n)
    return flag

def primes_below(x):
    return [(i-6, i) for i in range(9, x+1, 2) if is_prime(i) and is_prime(i-6)]

correct100 = [(5, 11), (7, 13), (11, 17), (13, 19), (17, 23), (23, 29),
        (31, 37), (37, 43), (41, 47), (47, 53), (53, 59), (61, 67), (67, 73),
        (73, 79), (83, 89)]
assert(primes_below(100) == correct100)

a = time_.time()
print(primes_below(100*1000))
b = time_.time()

elapsed = b - a
print("{} msec".format(round(elapsed * 1000))) 
```

上面的代码在 Python、Ruby 等中很容易编写，但在 C 中会更痛苦。

如果不重写其他版本以使用类似的技巧，则无法将此版本上的数字与其他版本的数字进行比较。我不想在这里证明什么。我只是觉得这个问题很有趣，我想看看我能收集到什么样的简单性能改进。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-07-25T12:01:34.773

不要忘记 Fortran！（主要是在开玩笑，但我希望与 C 有类似的性能）。带有感叹号的语句是可选的，但风格很好。（`!`是 fortran 90 中的注释字符）

```
logical function isprime(n)
IMPLICIT NONE !
integer :: n,i
do i=2,n
   if(mod(n,i).eq.0)) return .false.
enddo
return .true.
end

subroutine findprimes(m)
IMPLICIT NONE !
integer :: m,i
logical, external :: isprime

do i=11,m
   if(isprime(i) .and. isprime(i-6))then
      write(*,*) i-6,i
   endif
enddo
end

program main
findprimes(10*1000)
end 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2012-07-25T14:39:36.193

我忍不住对 C 版本进行了一些最明显的优化，这使得 100k 测试现在在我的机器上花费了 0.3 秒（比问题中的 C 版本快 5 倍，均使用 MSVC 2010 /Ox 编译） .

```
int isprime( int x )
{
    int i, n;
    for( i = 3, n = x >> 1; i <= n; i += 2 )
        if( x % i == 0 )
            return 0;
    return 1;
}

void findprimes( int m )
{
    int i, s = 3; // s is bitmask of primes in last 3 odd numbers
    for( i = 11; i < m; i += 2, s >>= 1 ) {
        if( isprime( i ) ) {
            if( s & 1 )
                printf( "%d %d\n", i - 6, i );
            s |= 1 << 3;
        }
    }
}

main() {
    findprimes( 10 * 1000 );
} 
```

这是Java中的相同实现：

```
public class prime
{
    private static boolean isprime( final int x )
    {
        for( int i = 3, n = x >> 1; i <= n; i += 2 )
            if( x % i == 0 )
                return false;
        return true;
    }

    private static void findprimes( final int m )
    {
        int s = 3; // s is bitmask of primes in last 3 odd numbers
        for( int i = 11; i < m; i += 2, s >>= 1 ) {
            if( isprime( i ) ) {
                if( ( s & 1 ) != 0 )
                    print( i );
                s |= 1 << 3;
            }
        }
    }

    private static void print( int i )
    {
        System.out.println( ( i - 6 ) + " " + i );
    }

    public static void main( String[] args )
    {
        // findprimes( 300 * 1000 ); // for some JIT training
        long time = System.nanoTime();
        findprimes( 10 * 1000 );
        time = System.nanoTime() - time;
        System.err.println( "time: " + ( time / 10000 ) / 100.0 + "ms" );
    }
} 
```

在 Java 1.7.0_04 中，它的运行速度几乎与 C 版本一样快。客户端或服务器虚拟机没有太大区别，只是 JIT 训练似乎对服务器虚拟机有一点帮助（~3%），而对客户端虚拟机几乎没有影响。Java 中的输出似乎比 C 中的慢。如果在两个版本中都将输出替换为静态计数器，则 Java 版本的运行速度比 C 版本快一点。

这些是我跑 100k 的时间：

*   319ms C 用 /Ox 编译并输出到 >NIL：
*   312ms C 用 /Ox 和静态计数器编译
*   324 毫秒 Java 客户端 VM，输出为 >NIL：
*   带有静态计数器的 299 毫秒 Java 客户端 VM

和 1M 运行（16386 个结果）：

*   24.95s C 用 /Ox 和静态计数器编译
*   25.08s Java 客户端 VM 与静态计数器
*   带静态计数器的 24.86 秒 Java 服务器 VM

虽然这并不能真正回答您的问题，但它表明小的调整会对性能产生显着影响。因此，为了能够真正比较语言，您应该尽量避免所有算法差异。

它还暗示了为什么 Scala 看起来相当快。它在 Java VM 上运行，因此受益于其令人印象深刻的性能。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2012-07-25T00:45:19.577

在 Scala 中尝试使用 Tuple2 而不是 List，它应该会更快。只需删除单词“List”，因为 (x, y) 是 Tuple2。

Tuple2 专门用于 Int、Long 和 Double，这意味着它不必对这些原始数据类型进行装箱/拆箱。[元组 2 源](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/Tuple2.scala#L1)。列表不是专门的。[列出源](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/collection/immutable/List.scala#L1)。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2012-07-25T04:32:18.977

这是 Go (golang.org) 版本的代码：

```
package main

import (
    "fmt"
)

func main(){
    findprimes(10*1000)
}

func isprime(x int) bool {
    for i := 2; i < x; i++ {
        if x%i == 0 {
            return false
        }
    }
    return true
}

func findprimes(m int){
    for i := 11; i < m; i++ {
        if isprime(i) && isprime(i-6) {
            fmt.Printf("%d %d\n", i-6, i)
        }
    }
} 
```

它的运行速度与 C 版本一样快。

**使用华硕 u81a** Intel Core 2 Duo T6500 2.1GHz、2MB L2 缓存、800MHz FSB。4GB 内存

100k 版本：`C: 2.723s` `Go: 2.743s`

使用 1000000（1M 而不是 100K）：`C: 3m35.458s` `Go: 3m36.259s`

但我认为使用 Go 内置的多线程功能并将该版本与常规 C 版本（没有多线程）进行比较是公平的，因为用 Go 进行多线程几乎太容易了。

更新：我在 Go 中使用 Goroutines 做了一个并行版本：

```
package main

import (
  "fmt"
  "runtime"
)

func main(){
    runtime.GOMAXPROCS(4)
    printer := make(chan string)
    printer2 := make(chan string)
    printer3 := make(chan string)
    printer4 := make(chan string)
    finished := make(chan int)

    var buffer, buffer2, buffer3 string

    running := 4
    go findprimes(11, 30000, printer, finished)
    go findprimes(30001, 60000, printer2, finished)
    go findprimes(60001, 85000, printer3, finished)
    go findprimes(85001, 100000, printer4, finished)

    for {
      select {
        case i := <-printer:
          // batch of sexy primes received from printer channel 1, print them
          fmt.Printf(i)
        case i := <-printer2:
          // sexy prime list received from channel, store it
          buffer = i
        case i := <-printer3:
          // sexy prime list received from channel, store it
          buffer2 = i
        case i := <-printer4:
          // sexy prime list received from channel, store it
          buffer3 = i
        case <-finished:
          running--
          if running == 0 {
              // all goroutines ended
              // dump buffer to stdout
              fmt.Printf(buffer)
              fmt.Printf(buffer2)
              fmt.Printf(buffer3)
              return
          }
      }
    }
}

func isprime(x int) bool {
    for i := 2; i < x; i++ {
        if x%i == 0 {
            return false
        }
    }
    return true
}

func findprimes(from int, to int, printer chan string, finished chan int){
    str := ""
    for i := from; i <= to; i++ {
        if isprime(i) && isprime(i-6) {
            str = str + fmt.Sprintf("%d %d\n", i-6, i)
      }
    }
    printer <- str
    //fmt.Printf("Finished %d to %d\n", from, to)
    finished <- 1
} 
```

~~并行版本平均使用 2.743 秒，与常规版本使用的时间完全相同。~~

并行化版本在 1.706 秒内完成。它使用了不到 1.5 Mb 的 RAM。

~~一件奇怪的事情：我的双核 kubuntu 64 位从未在两个内核中达到峰值。看起来 Go 只使用了一个核心。~~通过调用修复`runtime.GOMAXPROCS(4)`

更新：我运行了多达 100 万个数字的并行版本。 ~~我的一个 CPU 内核一直处于 100% 状态，而另一个根本没有使用（奇怪）。它比 C 和常规 Go 版本多花了一分钟。:(~~

使用 1000000（1M 而不是 100K）：

`C: 3m35.458s` `Go: 3m36.259s` `Go using goroutines:`~~3m27.137s~~`2m16.125s`

100k 版本：

`C: 2.723s` `Go: 2.743s` `Go using goroutines: 1.706s`

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2012-07-25T13:17:00.867

只是为了好玩，这里有一个并行的 Ruby 版本。

```
require 'benchmark'

num = ARGV[0].to_i

def is_prime?(n)
  (2...n).all?{|m| n%m != 0 }
end

def sexy_primes_default(x)
    (9..x).map do |i|
        [i-6, i]
    end.select do |j|
        j.all?{|j| is_prime? j}
    end
end

def sexy_primes_threads(x)
    partition = (9..x).map do |i|
        [i-6, i]
    end.group_by do |x|
        x[0].to_s[-1]
    end
    threads = Array.new
    partition.each_key do |k|
       threads << Thread.new do
            partition[k].select do |j|
                j.all?{|j| is_prime? j}
            end
        end
    end
    threads.each {|t| t.join}
    threads.map{|t| t.value}.reject{|x| x.empty?}
end

puts "Running up to num #{num}"

Benchmark.bm(10) do |x|
    x.report("default") {a = sexy_primes_default(num)}
    x.report("threads") {a = sexy_primes_threads(num)}
end 
```

在我的 1.8GHz Core i5 MacBook Air 上，性能结果是：

```
# Ruby 1.9.3
$ ./sexyprimes.rb 100000
Running up to num 100000
                 user     system      total        real
default     68.840000   0.060000  68.900000 ( 68.922703)
threads     71.730000   0.090000  71.820000 ( 71.847346)

# JRuby 1.6.7.2 on JVM 1.7.0_05
$ jruby --1.9 --server sexyprimes.rb 100000
Running up to num 100000
                user     system      total        real
default    56.709000   0.000000  56.709000 ( 56.708000)
threads    36.396000   0.000000  36.396000 ( 36.396000)

# JRuby 1.7.0.preview1 on JVM 1.7.0_05
$ jruby --server sexyprimes.rb 100000
Running up to num 100000
             user     system      total        real
default     52.640000   0.270000  52.910000 ( 51.393000)
threads    105.700000   0.290000 105.990000 ( 30.298000) 
```

看起来 JVM 的 JIT 在默认情况下为 Ruby 提供了不错的性能提升，而真正的多线程帮助 JRuby 在线程情况下的执行速度提高了 50%。更有趣的是，JRuby 1.7 将 JRuby 1.6 的分数提高了 17%！

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2012-07-25T19:19:30.513

基于[x4u 的回答](https://stackoverflow.com/a/11652251/30433)，我使用递归编写了一个 scala 版本，并且我通过仅使用 sqrt 而不是 x/2 进行质数检查功能对其进行了改进。100k 大约 250 毫秒，1M 大约 600 毫秒。我继续前进，在约 6 秒内达到 10M。

```
import scala.annotation.tailrec

var count = 0;
def print(i:Int) = {
  println((i - 6) + " " + i)
  count += 1
}

@tailrec def isPrime(n:Int, i:Int = 3):Boolean = {
  if(n % i == 0) return false;
  else if(i * i > n) return true;
  else isPrime(n = n, i = i + 2)
}      

@tailrec def findPrimes(max:Int, bitMask:Int = 3, i:Int = 11):Unit = {
  if (isPrime(i)) {
    if((bitMask & 1) != 0) print(i)
    if(i + 2 < max) findPrimes(max = max, bitMask = (bitMask | (1 << 3)) >> 1, i = i + 2)
  } else if(i + 2 < max) {
    findPrimes(max = max, bitMask = bitMask >> 1, i = i + 2)
  }
}

val a = System.currentTimeMillis()
findPrimes(max=10000000)
println(count)
val b = System.currentTimeMillis()
println((b - a).toString + " mils") 
```

我还回去写了一个 CoffeeScript (V8 JavaScript) 版本，通过使用计数器（忽略 I/O），100k 大约为 15ms，1M 为 250ms，10M 为 6s。如果我打开输出，100k 需要 150ms，1M 需要 1s，10M 需要 12s。不幸的是，这里不能使用尾递归，所以我不得不将它转换回循环。

```
count = 0;
print = (i) ->
  console.log("#{i - 6} #{i}")
  count += 1
  return

isPrime = (n) ->
  i = 3
  while i * i < n
    if n % i == 0
      return false
    i += 2
  return true

findPrimes = (max) ->
  bitMask = 3
  for i in [11..max] by 2
    prime = isPrime(i)
    if prime
      if (bitMask & 1) != 0
        print(i)
      bitMask |= (1 << 3)
    bitMask >>= 1
  return

a = new Date()
findPrimes(1000000)
console.log(count)
b = new Date()
console.log((b - a) + " ms") 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2012-07-25T17:44:25.043

您的问题 #1 的答案是，是的，JVM 速度非常快，是的，静态类型有帮助。

从长远来看，JVM 应该比 C 更快，甚至可能比“普通”汇编语言更快——当然，您总是可以通过手动运行时分析并为每个 CPU 创建单独的版本来手动优化汇编以击败任何东西，您只需必须非常优秀和知识渊博。

Java速度快的原因是：

JVM 可以在运行时分析您的代码并对其进行手动优化——例如，如果您有一个可以在编译时静态分析为真正函数的方法，并且 JVM 注意到您经常以相同的方式调用它参数，它实际上可以完全消除调用，只注入最后一次调用的结果（我不确定Java是否真的做到了这一点，但它确实做了很多这样的事情）。

由于静态类型，JVM 可以在编译时了解很多关于你的代码的信息，这让它可以预先优化很多东西。它还允许编译器单独优化每个类，而无需知道另一个类计划如何使用它。此外，Java 没有指向内存位置的任意指针，它知道内存中的哪些值可能会更改，也可能不会更改，并且可以相应地进行优化。

堆分配比 C 更有效，Java 的堆分配在速度上更像 C 的堆栈分配——但更通用。很多时间都花在了这里使用的不同算法上，这是一门艺术——例如，所有生命周期短的对象（如 C 的堆栈变量）都被分配到一个“已知的”空闲位置（无需搜索空闲位置）有足够的空间）并在一个步骤中一起释放（如堆栈弹出）。

JVM 可以了解您的 CPU 架构的怪癖，并专门为给定的 CPU 生成机器代码。

JVM 可以在您交付代码后很长时间内加速您的代码。就像将程序移到新的 CPU 可以加快速度一样，将其移到新版本的 JVM 也可以为您提供巨大的速度性能，这些性能在您最初编译代码时甚至不存在的 CPU 上，而 c 物理上不能做没有重新编译。

顺便说一句，Java 速度的大部分不良代表来自加载 JVM 的较长启动时间（有一天有人会将 JVM 构建到操作系统中，这将消失！）以及许多开发人员真的不擅长编写的事实GUI 代码（尤其是线程化的）导致 Java GUI 经常变得无响应和故障。Java 和 VB 等简单易用的语言由于普通程序员的能力往往低于更复杂的语言这一事实​​而放大了它们的缺陷。

# php - 跨语言会话变量和 cookie

> ID：11641100
> 
> 赞同：2
> 
> 时间：2012-07-25T00:21:11.980
> 
> 标签：php, cookies, asp-classic, session-variables

为了开始用 PHP 进行编程，从 Classic ASP 开始，我决定将一个非常大的、旧的、在线的 ASP 项目逐个转换，直到我最终完成整个事情并学习 PHP。

我遇到过大量使用会话变量和 cookie 的部分。本节附加的页面尚未转换，我有一段时间无法转换它们。在我继续转换这部分并弄乱我所有的用户会话/访问之前，我想知道在我的 ASP 页面上设置的会话变量或 cookie 是否可以在转换后的 PHP 页面中读取，反之亦然？

我认为请求 cookie 可以，但我不确定使用会话是否有任何影响。请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T01:41:40.200

Alex 对 cookie 的看法是正确的；但是，会话更加棘手。会话数据存储在服务器端，不同的语言可能以不同的方式存储它们。

但是，[仍然*可以*这样](https://stackoverflow.com/questions/2544389/how-to-share-sessions-between-php-and-asp-net-application)做；您只需要让两个应用程序使用相同的会话数据存储。它可能就像配置 PHP 和 ASP 以在 SQL 数据库中存储会话一样简单。但是他们可能不使用相同的格式将会话数据存储在数据库中，因此您最终可能需要为其中一个或另一个编写[自定义会话存储处理程序。](http://php.net/manual/en/function.session-set-save-handler.php)

然后，您需要做的就是确保两个应用程序从相同的 cookie 名称读取会话 ID，因为这也因语言而异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T01:58:25.193

**饼干，是的，它们将可用。**

会话，我不知道 ASP 如何处理它的会话，但我不认为 PHP 可以直接处理它们。

**您可以在 ASP 脚本中为 PHP 创建会话文件**

研究[PHP 如何处理会话](http://www.php.net/manual/en/session.configuration.php)，并在会话文件夹中创建会话文件。但是，编码/序列化所有这些值可能很棘手。PHP 会话不被 serialize() 函数序列化。他们有[自己的处理程序](http://www.php.net/manual/en/session.configuration.php#ini.session.serialize-handler)，这可能取决于您的配置。

PS：会话仅持续到客户端关闭浏览器。我说当你完全克隆完脚本后不要担心它们并激活 PHP 页面。如果您想运行用两种语言编写的脚本并让它们在两种语言之间传递数据，请使用 cookie 而不是会话，因为 cookie 保存在客户端的机器上，并且可以从两个平台读取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T01:31:13.023

是的。

Cookies 是服务器/头文件（用户浏览器与您的服务器通信），因此 PHP 文件和 ASP 文件将能够更改/编辑所有域 cookie（当然，假设它们在同一个域上）。

# ruby-on-rails-3 - 使用 awesome_nested_set 在 active_admin 中未定义的方法 `nested_set_options'

> ID：11641111
> 
> 赞同：2
> 
> 时间：2012-07-25T00:23:13.107
> 
> 标签：ruby-on-rails-3, activeadmin

当我使用以下代码覆盖表单编辑时，我在 rails3 中使用 awesome_nested_set 和 activeadmin

```
form do |f|
    f.inputs "Details" do
        f.input :parent_category
        f.input :url
        f.input :map_id, :as => :select, :collection => nested_set_options(Category, @category) {|i| "#{'-' * i.level} #{i.name}" },  :input_html => { :class => 'select2'}
    end
f.buttons
end 
```

它就像一个魅力，但是当我尝试对过滤器使用相同的代码时，如下所示：

```
filter :category, :as =>:select, :collection => nested_set_options(Category, @category) {|i| "#{'-' * i.level} #{i.name}" }, :input_html => { :class => 'select2'} 
```

我收到以下错误：

```
undefined method `nested_set_options' for #<ActiveAdmin::ResourceDSL:0x007f20c039b0b0> 
```

那么，可能是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T11:49:14.133

我为此工作了 3 个小时，并找到了以下解决方案。

将此添加到您的 activeadmin 文件中：

```
include CollectiveIdea::Acts::NestedSet::Helper
ActiveAdmin.register Company do 
```

# firefox - @font-face 不能在 Firefox 上工作

> ID：11641116
> 
> 赞同：0
> 
> 时间：2012-07-25T00:23:57.740
> 
> 标签：firefox, css, font-face

我已经搜索了每个地方，原因是字体在 Firefox 中无法正常工作。我找到了几个不同的答案，但似乎没有一个可以解决问题。如果有人能给我一些提示，那就太好了。

代码：

```
@font-face
{
    font-family:Viking-Normal;
    src: url('../fonts/VIKING.eot') format("opentype"), url('../fonts/VIKING.ttf') format("truetype");
}

div#header
{
    font-family:Viking-Normal !important;
    font-size:58px;
    text-align:center;
    width:780px;
    height:150px;
    background:#0078A8;
    margin-left:auto;
    margin-right:auto;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T01:09:56.643

了解您已经尝试过的内容会有所帮助，但是通过查看您的代码会想到三件事：

1.  字体系列名称*应*在单引号或双引号之间。

    **例如，**

    ```
    font-family: 'Viking-Normal'; 
    ```

2.  您的字体的路径可能是错误的，您可以通过放置完整的 URL 路径直接从浏览器访问它吗？

3.  您的浏览器支持的字体文件可能已损坏或缺失。我使用[字体松鼠来生成](http://www.fontsquirrel.com/fontface/generator)所需的 CSS 和字体文件。

    您只需要上传您的字体文件，它会弹出一个 .zip 文件，其中包含一个带有您的字体的演示、一个 css 就绪文件以及更好的跨浏览器支持所需的格式。

    **例如，**

    ```
    @font-face {
        font-family: 'VikingRegular';
        src: url('viking-webfont.eot');
        src: url('viking-webfont.eot?#iefix') format('embedded-opentype'),
             url('viking-webfont.woff') format('woff'),
             url('viking-webfont.ttf') format('truetype'),
             url('viking-webfont.svg#DearestRegular') format('svg');
        font-weight: normal;
        font-style: normal;
    } 
    ```

# java - 什么时候使用java bean？

> ID：11641117
> 
> 赞同：2
> 
> 时间：2012-07-25T00:24:06.133
> 
> 标签：java, javabeans

我正在学习 java bean，但我想知道什么时候需要使用它们。什么时候避开它们？如果 java 源代码只在应用程序的一个地方使用会怎样——为它创建一个 bean 不是要走的路吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T00:51:44.350

在大多数情况下，您不需要关心 Java Bean，您可以只定义您认为合适的类。

有时您将使用一个框架，例如 Spring，它期望与表征 Java Bean 的 getter、setter 和无参数构造函数进行交互。

就其本身而言，Java Bean 规范的相关性很小。

# php - PHP 的 HTML 模板语言

> ID：11641125
> 
> 赞同：0
> 
> 时间：2012-07-25T00:25:09.347
> 
> 标签：php, html, templates

我正在使用简单的模板集成制作 php 内容管理系统，但我找不到任何好的模板语言。目前我正在使用 xml 模板并使用 php DOM 解析它们。以下是模板的外观：

```
<div class="one_fourth">
    <h4 class="section-header"><span><CMS_STRING type="string" name="title" title="Title" /></span></h4>
    <p><CMS_STRING type="string" name="body" title="Body text" tooltip="" /></p>
    <p><CMS_STRING type="link" name="link" title="Link" /></p>
</div> 
```

在 php 中，我使用 DOM getElementsByTagName 解析所有 CMS_STRING 标签，然后从数据库中为访问者提取值或为管理员生成可编辑的输入。

xml 的一个问题是我不能在属性中使用标签，例如：

```
<a href="<CMS_STRING name="url" />"></a> 
```

另一个问题是 php DOM 引用转义。它看起来丑陋且难以阅读。假设我想将 JSON 放入本地化标题的属性中：

```
<CMS_STRING type="string" name="title" title="{&quot;enUS&quot;:&quot;Title&quot;,&quot;enGB&quot;:&quot;Title&quot;}" /> 
```

那么我可以在这里使用什么其他模板语言呢？我还需要它来支持 xml（例如获取 CMS_STRING 内部 html）。我发现的所有模板语言都是用缓存引擎和我不需要的所有其他东西预制的。我只需要一个带有解析器的简单语言，我会自己处理其他事情。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T00:34:54.080

使用[PHP 模板语言](http://phptemplatinglanguage.com/)。你的生活会更好、更快乐、更简单、更快，你周围的人会感谢你的后代，世界各地的小狗和小猫会更少死亡，全球变暖甚至可能会放缓一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-13T21:11:59.833

## 流行的模板引擎：

*   **[Smarty](http://www.smarty.net/)**（变得过时）

*   **[拿铁](https://github.com/nette/latte)**（主要由**[Nette](http://nette.org/)**社区使用）

*   **[Twig](http://twig.sensiolabs.org/documentation)**（主要由**[Symfony](http://symfony.com/)**社区使用）

*   **[Mustache](http://mustache.github.io/)**（这个模板引擎的官方实现存在于超过两​​打编程/脚本语言中）

我倾向于**[Mustache](http://mustache.github.io/)**，主要是因为它有**[官方 JS 版本](https://github.com/janl/mustache.js)**、 **[官方 Ruby 版本](https://github.com/defunkt/mustache)**、**[官方 Java 版本](https://github.com/spullara/mustache.java)**等。它允许您使用相同的模板前端和后端，这对于第一次渲染的小部件非常有用背景并在更新时在前台重新渲染。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T00:29:16.957

说出一些你看过但不能使用的名字，所以我们不会一直建议重复。你看过[Smarty](http://smarty.net)吗？它很棒，听起来可以满足您的需求。

是的 Smarty 有缓存，但您不必启用它。您将获得的唯一结果文件是模板的编译版本，但这只是为了提高效率，您可以禁用模板缓存（以换取性能）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T02:19:13.243

有很多可用的模板系统[Twig](http://twig.sensiolabs.org/)、[Smarty](http://www.smarty.net/)、[Mustache](https://github.com/bobthecow/mustache.php/)，当然还有 PHP 本身。

我喜欢一个实际的模板系统而不是使用普通的旧 PHP 的一件事是，如果你不熟悉 MVC 设计模式，它几乎会迫使你去做它的 VC 部分，并教会你它的重要性。 .. 我这么说是因为您仍然可以在其中执行业务逻辑，但它们通常会使它变得困难，并且让您气馁。

我相信它们都内置了缓存，所以执行明智，应该和普通的 php 脚本一样快。

# assembly - 在 x86 汇编语言中使用 little-endian 表示法有什么好处？

> ID：11641132
> 
> 赞同：0
> 
> 时间：2012-07-25T00:25:34.230
> 
> 标签：assembly, x86, endianness

> **可能重复：**
> [为什么 x86 是小端？](https://stackoverflow.com/questions/5185551/why-is-x86-little-endian)

我个人，而且我打赌很多人都会同意这一点，发现大端字节序符号更容易阅读和理解。我认为大端字节序对于 CPU 来说就像小端字节序一样容易处理。

在[x86 的黑暗角落一](http://www.informit.com/articles/article.aspx?p=770362)文中，David Chisnall 指出

> “[...] 在当时看来是个好主意的功能被逐渐添加，直到我们留下了被称为现代 x86 架构的组合。”

由于 big-endian 字节排序应该同样容易 - 如果不是更容易 - 处理，特别是在浮点类型方面，little-endian 比 big-endian 有什么好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T00:30:16.787

没有任何。

*架构使用*big-endian 或 little-endian 排序确实没有具体的理由。有些人喜欢他们每个人。甚至有一些芯片可以两者兼得！但在大多数情况下，架构会选择排序，而这就是你所使用的。世界上有太多的 x86 代码让切换顺序变得毫无意义，即使有*充分*的理由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T01:33:37.110

我发现对于硬件来说，小端更容易，而对人类来说，大端更容易。今天，它根本不重要，因为字节通道都是独立于字节序而被推挤的，而且一些架构无论如何都会这样做（ARM有两个版本的大版本和一个小版本）。可变字长指令和允许未对齐传输是比大与小更大的问题。

由于历史偏好以及随之而来的神话和观点，今天仍然存在强烈的偏好。就像宗教和政治一样，这是一个禁忌话题，可以而且确实会引发激烈的争论。归根结底，每一方都只是在他们一方的支持下更强大，真正的皈依者很少。这些强烈的意见可能是新设计宣布其中一种的来源。

随着 arm 主导处理器世界，x86 覆盖台式机、笔记本电脑和服务器，pci(e) 约定等，我们真的生活在一个小端世界中，不管你喜不喜欢。

如果您“进行系统工程”，则不会有任何字节顺序问题，因为接口规范将定义哪些字节在哪里，并且双方都符合接口规范。

# paypal - 贝宝 _cart ipn

> ID：11641134
> 
> 赞同：0
> 
> 时间：2012-07-25T00:26:01.050
> 
> 标签：paypal, cart, paypal-ipn

我的 ipn 监听器有问题，它既可以从“即时付款通知 (IPN) 模拟器”使用，也可以从我网站上使用 cmd x_click 的表单中使用。问题是当我尝试在“_cart”中编辑“_xclick”以使用多个项目进行付款时。贝宝进行了过渡，但ipn没有生命迹象......

有人有什么建议吗？谢谢！

# ruby - 使用 RVM 安装 Ruby 1.9.3 时运行“autoconf”时出错

> ID：11641135
> 
> 赞同：2
> 
> 时间：2012-07-25T00:26:19.657
> 
> 标签：ruby, makefile, rvm, autoconf, ruby-1.9.3

我使用的是 Mac OS X 10.7.4，目前使用的是 Ruby 1.9.2。我正在尝试使用 RVM 安装 Ruby 1.9.3，但在执行时出现以下错误`rvm install 1.9.3`：

```
Running autoconf
Error running 'autoconf', please read .../.rvm/log/ruby-    1.9.3/autoconf.log
Skipping configure step, 'configure' does not exist, did autoconf not run successfully?
ruby-1.9.3 - #compiling 
Error running 'make ', please read .../.rvm/log/ruby-1.9.3/make.log
There has been an error while running make. Halting the installation. 
```

`autoconf.log`我在和中都没有发现任何有用的东西`make.log`。

我查看了类似的问题，但无法解决此问题。`ruby-1.9.2-p0 directory`我还尝试按照此[问题](https://stackoverflow.com/questions/4241971/rvm-install-1-9-2-fails-when-running-autoconf)中的建议删除。

我真的可以在这里使用一些帮助（以及为什么会发生这种情况的可能解释）。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T05:22:40.853

似乎没有正确检测到 ruby​​ 版本，请确保使用最新的 RVM：

```
curl -L https://get.rvm.io | bash
rvm reload 
```

还指定完整版本可能会有所帮助：

```
rvm install ruby-1.9.3-p194 
```

# batch-file - 使用批处理文件更新和备份目录

> ID：11641141
> 
> 赞同：0
> 
> 时间：2012-07-25T00:28:06.583
> 
> 标签：batch-file, directory, backup, modified-date

我需要为一个目录创建一个备份批处理脚本。它将每 10 分钟更新一次。我希望它只更新已添加到目录或在上次备份后修改的文件。

我尝试使用这个脚本：

```
@ECHO OFF
SET srcdir=D:\Source
SET tgtdir=D:\Target
SET /A topcnt=3
SET /A cnt=0
FOR /F "tokens=*" %%F IN ('DIR /A-D /OD /TW /B "%srcdir%"') DO (
  SET /A cnt+=1
  SETLOCAL EnableDelayedExpansion
  IF !cnt! GTR !topcnt! (ENDLOCAL & GOTO :EOF)
  ENDLOCAL
  COPY "%srcdir%\%%F" "%tgtdir%"
) 
```

我遇到的问题是它只适用于批处理文件所在的目录，它将返回最近的三个文件，包括批处理文件本身。此外，复制功能不起作用。该程序未将 srcdir 与文件扩展名连接，因此程序无法确定要复制的文件。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T01:19:19.813

我不明白您的代码与您在问题第一段中陈述的目标有何关系。如果您的目标真的如您所说的那么简单，那么您不需要批处理文件。您只需安排以下命令每 10 分钟运行一次：

```
xcopy /d D:\Source\* d:\Target 
```

上述命令将仅复制自上次备份以来已修改的新文件或文件。

如果您的备份要求变得更加复杂，那么您可能应该切换到 ROBOCOPY。它有很多选择，可能会满足您的需求。仍然不需要批次。

# php - 在php中输出shell命令

> ID：11641145
> 
> 赞同：0
> 
> 时间：2012-07-25T00:28:18.057
> 
> 标签：php, bash, shell-exec

我想运行一个 shell 命令来运行一个进程很长时间，并在它执行时输出文本。此命令在后台使用 nohup 运行。

我想使用 php 在 php 中启动此命令`shell_exec`，但我想知道在执行此命令时捕获此命令输出的最佳方法，以便我的 php 在执行时显示输出并且不会无限期地等待进程终止显示输出。

例子：

`shell_exec(nohup ./program.sh &)`

# node.js - Node.JS - 读取 .html 文件并将用户输入写入其中

> ID：11641150
> 
> 赞同：0
> 
> 时间：2012-07-25T00:28:59.123
> 
> 标签：node.js

我试图了解是否可以让节点读取 html 文件（test.html），然后通过文本输入将用户输入异步写入同一文件。我已经在 webserver.js 上设置了我的 Web 服务器，然后设置了另一个名为 test.html 的页面。

我在交换机的“测试”用例中添加了侦听器，以侦听数据，将数据记录到服务器终端，然后（我假设）将此数据写入文件。

我知道从 webserver.js 脚本到 test.html 上的输入字段没有直接连接，这可能是我的第一个问题。其次，我知道 test.html 上没有定义区域来呈现响应。这是我想知道如何在 Node.js 中做的事情。

所以我希望我能得到一些关于如何让它工作的指导，如果它不是太麻烦的话。

```
var http = require('http')
, url = require('url')
, fs = require('fs')
, server;

server = http.createServer(function(req, res){

    var path = url.parse(req.url).pathname;

    var userData = "";

    switch(path){

      case '/':
        fs.readFile(__dirname + '/index.html', function (err, data) {
          if (err) throw err;
          res.writeHead(200, {'Content-Type': 'text/html'});
          res.write(data, 'utf8');
          res.end();
        });

      case '/test':
        fs.readFile(__dirname + '/test.html', function (err, data) {
          if (err) throw err;
          res.writeHead(200, {'Content-Type': 'text/html'});
          res.write(data, 'utf8');

          req.addListener("data", function(userDataChunk) {
              userData += userDataChunk;
              console.log("Received chunk ’"+userDataChunk + "’.");
              res.end("<p>" + userData + "</p>");
           });

      });

      break;

      default: '/';
  }
}); 
```

在 test.html 我只有一个文本输入

```
<html>
  <head></head>
  <body>
    <input type="text" name="userInput" />
  </body>
</html> 
```

我知道我可以在 test.html 上添加一些 javascript 来获取 keyup 的输入并将其写入页面，但我只是想知道这是否都可以用 Node.js 完成？

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T00:58:09.513

您必须将文本字段返回到服务器，这就是表单的作用。

```
<html>
  <head></head>
  <body>
    <form action="/test">
      <input type="text" name="userInput" />
      <input type="submit" />
    </form>
  </body>
</html> 
```

现在要将内容实际写入 html 文件，您必须使用 node.js 标准库中的[`fs`模块](http://nodejs.org/api/fs.html)。

# c - C 内存管理问题

> ID：11641155
> 
> 赞同：1
> 
> 时间：2012-07-25T00:29:34.173
> 
> 标签：c, memory-management

我已将 EXC_BAD_ACCESS 跟踪到以下内存分配和释放。它涉及Xcode中的加速框架。主要问题是此代码处于循环中。如果我强制循环只迭代一次，那么它工作正常。但是当它循环（7 次）时，它会在第二次迭代中导致错误。这看起来不正确吗？

编辑：*添加了实际代码。如果我删除某些部分等，该段就会运行，但似乎内存管理不佳会导致问题

```
#import <Foundation/Foundation.h>
#include <math.h>
#include <Accelerate/Accelerate.h>

  for(int i = 0; i < 8; i++)
    {

   int XX[M][m];  //M and m are just 2 ints

   for(int kk = 0; kk < M; kk++)
            {
                for (int kk1 = 0; kk1 < m; kk1++)
                {
                    XX[kk][kk1] = [[x objectAtIndex: (kk + kk1 * J)] intValue];  //x is a NSMutableArray of NSNumber objects
                }

            }

            double FreqRes = (double) freqSamp/n;

            NSMutableArray *freqs = [[NSMutableArray alloc] initWithCapacity: round((freqSamp/2 - FreqRes) - 1)];

            int freqSum = 0;

            for(double i = -1 * freqSamp/2; i < (freqSamp/2 - FreqRes); i+= FreqRes)
            {

                [freqs addObject: [NSNumber numberWithInt: i]];

                if(i == 0)
                {
                    freqSum++;
                }

            }

            int num = [x count];
            int log2n = (int) log2f(num);
            int nOver2 = n / 2;

            FFTSetupD fftSetup = vDSP_create_fftsetupD (log2n, kFFTRadix2);

            double ffx[num];

            DSPDoubleSplitComplex fft_data;
            fft_data.realp = malloc(nOver2 * sizeof(double)); //Error usually thrown on this line in the second iteration.  Regardless of what I put there.  If I add an NSLog here it throws the error on that NSLog
            fft_data.imagp = malloc(nOver2 * sizeof(double));

            for (int i = 0; i < n; ++i)
            {
                ffx[i] = [[x objectAtIndex:i] doubleValue];
            }

            vDSP_ctozD((DSPDoubleComplex *) ffx, 2, &fft_data, 1, nOver2);

            vDSP_fft_zripD (fftSetup, &fft_data, 1, log2n, kFFTDirection_Forward);

            for (int i = 0; i < nOver2; ++i)
            {
                fft_data.realp[i] *= 0.5;
                fft_data.imagp[i] *= 0.5;
            }   

            int temp = 1;

            ffx[0] = abs(fft_data.realp[0]);
            for(int i = 1; i < nOver2; i++)
                ffx[i] = sqrt((fft_data.realp[i] * fft_data.realp[i]) + (fft_data.imagp[i] * fft_data.imagp[i]));
            ffx[nOver2] = abs(fft_data.imagp[0]);
            for(int i = nOver2-1; i > 0; i--)
            {
                ffx[nOver2 + temp] = sqrt((fft_data.realp[i] * fft_data.realp[i]) + (fft_data.imagp[i] * fft_data.imagp[i]));
                temp++;
            }

            //clear Fxx and freqs data
            vDSP_destroy_fftsetupD(fftSetup);
            free(fft_data.imagp);
            free(fft_data.realp);
            [freqs release];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T00:35:48.837

您的问题可能是您将 malloc 转换为一个值。当您标记此 c 时，我假设您正在使用 c 进行编译，在这种情况下，您应该看到上一个问题的答案，即为什么使用 malloc 进行强制转换是不好的：

[https://stackoverflow.com/a/1565552/1515720](https://stackoverflow.com/a/1565552/1515720)

> 在不包含 stdlib.h 的情况下使用强制转换时会出现不可预知的运行时错误。
> 
> 所以你这边的错误不是演员表，而是忘记包含stdlib.h。编译器可能会假设 malloc 是一个返回 int 的函数，因此将 malloc 实际返回的 void* 指针转换为 int，然后由于显式转换而转换为您的指针类型。在某些平台上，int 和指针可能占用不同的字节数，因此类型转换可能会导致数据损坏。

无论如何，正如答案所说，你不应该铸造 MALLOC 返回，因为 void* 被安全地隐式转换为你分配给它的任何东西。

正如另一位回答者所说：

```
vDSP_destroy_fftsetupD(fftSetup); 
```

也可以释放您意外分配的内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T00:37:23.293

析构函数是否有可能`DSPDoubleSplitComplex`释放这两个分配的块？

也可能是您只能在进程的生命周期`vDSP_create_fftsetupD`内调用`vDSP_destroy_fftsetupD` **一次**

# python - 用于读取可变参数长度的 Python C 包装器

> ID：11641161
> 
> 赞同：0
> 
> 时间：2012-07-25T00:30:32.933
> 
> 标签：python, swig, ctypes, cython, word-wrap

我正在尝试替换 MATLAB/MEX 并切换到 Python。我遇到了 SWIG、ctypes 和 Cython 作为可能的解决方案，并开始尝试 SWIG（这看起来很简单）。

我的 C 函数具有可变参数长度的形式`main(int argc, char *argv[])`。我在网上找到了解决方案，但是与 SWIG 一起使用会导致很多问题。

1.  其他方法（ctypes / Cython）更简单吗？
2.  使用 SWIG 完成此任务的任何示例都会有所帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T08:58:06.933

在 SWIG 文档中实际上[有一个示例，](http://www.swig.org/Doc1.3/Typemaps.html#Typemaps_multi_argument_typemaps)用于使用 Python 实现这种功能。我在这里引用了它，并做了一个小的改动：

> ```
> %typemap(in) (int argc, char *argv[]) {
>   int i;
>   if (!PyList_Check($input)) {
>     PyErr_SetString(PyExc_ValueError, "Expecting a list");
>     return NULL;
>   }
>   $1 = PyList_Size($input);
>   $2 = (char **) malloc(($1+1)*sizeof(char *));
>   for (i = 0; i < $1; i++) {
>     PyObject *s = PyList_GetItem($input,i);
>     if (!PyString_Check(s)) {
>         free($2);
>         PyErr_SetString(PyExc_ValueError, "List items must be strings");
>         return NULL;
>     }
>     $2[i] = PyString_AsString(s);
>   }
>   $2[i] = 0;
> }
> 
> %typemap(freearg) (int argc, char *argv[]) {
>    free($2); // If here is uneeded, free(NULL) is legal
> } 
> ```

这使您可以在 Python 中简单地执行以下操作：

```
import test
test.foo(["a", "b", "c"]) 
```

`test`您给 SWIG 的模块名称在哪里，并且`foo`是与签名匹配的函数`int argc, char *argv[]`。对于 Python 程序员来说使用简单直观，它封装并重用了复杂的位。

* * *

但是文档似乎没有提到的是，有一个接口文件已经为您完成了所有这些工作：

```
%module test

%include <argcargv.i>

%apply (int ARGC, char **ARGV) { (int argc, char *argv[]) }

void foo(int argc, char *argv[]); 
```

足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T01:02:05.583

这是使用 ctypes 的示例。

首先是c代码，它不能改变argv的内容：

```
#include <stdio.h>
void test(int n, char *argv[])
{
    int i;
    for(i=0;i<n;i++)
    {
        printf("%s\n", argv[i]);
    }
} 
```

然后你可以通过下面的python代码调用这个c函数：

```
from ctypes import *
dll = cdll.LoadLibrary("charpp_test.dll") 
argv = ["test1", "testtest2", "testtesttest3"]
dll.test(len(argv), (c_char_p*len(argv))(*argv)) 
```

# c# - 电报记录器的 WPF 项目列表，如 Windows Media Player 播放列表

> ID：11641162
> 
> 赞同：0
> 
> 时间：2012-07-25T00:30:56.293
> 
> 标签：c#, wpf, listbox

我想为 wpf 中的总线通信创建一个数据记录器。总线通信由包含源地址、目标地址、命令类型、电报长度和实际数据的电报组成。我想在一个看起来像媒体播放器播放列表的 ListBox 中表示这些电报。ListBox 应该分为源地址、目标地址等列。通过单击一个元素，您应该选择完整的行。如果您缓慢地单击一个元素两次，您应该能够选择该行的包含文本。如果您快速双击一个元素，则会打开一个包含详细数据的窗口。第一行应该包含列的名称，可以通过单击对数据进行排序（仅突出显示鼠标悬停的元素）。

这样的控件是否已经可用于 WPF（带有源代码）？如果不是，我如何在 wpf 中创建像 windows 媒体播放列表这样的控件？

谢谢，kyon

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T00:38:53.627

您想要的控件是`DataGrid`. 它会做很多你要求的开箱即用的事情，但不是全部。

要启用打开详细信息对话框，您需要处理该`MouseDoubleClick`事件。在处理程序中，将as 转换`sender`为 a`DataGrid`并获取`SelectedItem`or`SelectedIndex`属性以确定要在详细信息对话框中显示的电报。

有一个内置的编辑功能，允许您选择单元格中的文本，但用户也可以更改此文本。我不确定这是否是您想要的，但如果您想要只读，可能有一种方法可以取消对文本的任何更改。

# java - 将信息从一个 servlet 提交到另一个

> ID：11641168
> 
> 赞同：0
> 
> 时间：2012-07-25T00:32:33.703
> 
> 标签：java, javascript, html, servlets

我有一个小错误，希望有人可以为我解决。

**小服务程序1：**

这里的故事很简单——我创建了一个表单，并在其中创建了一个图像。当您单击此图像信息时，应将其提交给 servlet2。

```
public void f1(HttpServletRequest request, HttpServletResponse response) throws  
IOException
{
    response.setContentType("text/html"); 
    PrintWriter out = response.getWriter();
    out.print("<html></br>");
    out.print("<script language='javascript' type='text/javascript'   
    src='functions.js'></script></br>");
    out.print("<body></br>");
    out.print("<form method='post' name='mainForm' action='servlet2'><br/>");
    out.print("<img id='someId' src='someSrc' onclick='submit()'/><br/>");
    out.print("<label id='gameStatus'>Welcome!</label></br>");        
    out.print("</form></br>");
    out.print("</body>\n</html></br>");
} 
```

好的，我点击了图片，现在提交了信息（我想）

**小服务程序2：**

这里我只想把之前提交的参数打印出来。

```
protected void doPost(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException
{
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();        
    Enumeration parameters = request.getParameterNames();        
    while (parameters.hasMoreElements())
    {            
        out.print((String)parameters.nextElement() + "<br/>");                
    }
} 
```

联合国教科文组织 我的输出为空，所以我猜信息未提交。问题是为什么？有错别字吗？还是逻辑问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T00:38:24.203

你想传递什么信息？我在您的表单中没有看到任何输入字段。

请尝试在您的表单中添加输入。让我们看看它是否显示在您的第二个 servlet 中。

```
out.print("<form method='post' name='mainForm' action='servlet2'><br/>");
out.print("<input type='text' name='param1' value='test' /><br/>");
out.print("<img id='someId' src='someSrc' onclick='submit()'/><br/>");
out.print("<label id='gameStatus'>Welcome!</label></br>"); 
```

检查是否显示 param1。

# asp.net - 我无法准确理解 ASP 是什么以及如何上传 ASP 网站

> ID：11641169
> 
> 赞同：2
> 
> 时间：2012-07-25T00:32:48.580
> 
> 标签：asp.net, asp.net-mvc-3

从本周开始，我被要求开始学习如何用 ASP 开发网站。我通过 XNA 对 C# 有中等水平的经验，所以这部分对我来说并没有太大的麻烦。

我一直在关注[音乐商店教程](http://www.asp.net/mvc/tutorials/mvc-music-store)，它让我设置了一个“ASP.NET MVC 3”应用程序。

当我在本地运行测试时，我即将完成教程并拥有一个正常运行的站点，但我不明白需要上传哪些文件。我之前曾为 ASP 网站进行前端更新，但在组成网站的文件等方面，它们与此完全不同。

我在我的项目中没有看到一个`.aspx`页面，这是我认为 ASP 网站是根据经验构成的。我开始认为这些项目不是 MVC 项目，而可能只是“ASP.NET Web 应用程序”风格的项目。

ASP.NET 和 ASP.NET MVC 有什么不同吗？依我的模糊理解，MVC 只是一个封装了 ASP.NET 的框架？此外，*ASP*是什么东西还是只是 ASP.NET 的同义词？最后回到我最初的困惑，当我想启动一个 ASP.NET MVC 项目时，哪些文件要上传到服务器上？

我是否只是上传整个目录，服务器会以与内置测试 ASP 服务器相同的方式处理它？或者网站是否以某种方式编译成几个文件，我只是上传其中一个目录（我想我在某处读过）。

![在此处输入图像描述](../Images/6670bd583ea8fea52b4eda41396e07a6.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T00:54:50.840

ASP 是 Active Server Pages 的首字母缩写词。在 .NET 之前，ASP 是 Microsoft 的第一个迭代脚本网页。所有这些页面通常都以扩展名 .ASP 结尾。

.NET 发布时，对 ASP 进行了重大改革，并更名为 ASP.NET。新版本的 ASP.NET 尝试对 Web 开发进行建模，类似于 Windows 应用程序开发，您在其中使用控件和事件处理模型。这是微软多年来开发网页的主要模型，它仍然存在并受到支持，但今天它被称为 ASP.NET Web 窗体。ASP.NET Web 窗体页面通常具有您提到的 .ASPX 扩展名。

在 2000 年代中期左右，Ruby on Rails 起飞，使用基于 MVC 的模型来开发 Web 应用程序。几年后，Microsoft 发布了 ASP.NET 的替代版本，称为 ASP.NET MVC，它使用了类似的概念。许多人认为 MVC 方法是一种比 Web 表单模型更自然的网页开发方法（请注意几年前这个网站上的史诗般的 Q/A 线程）。无论如何，ASP.NET MVC 与 ASP.NET Web 窗体共享部分，但外观和工作方式大不相同；一方面，没有 .ASPX 页面，因为 MVC 在大多数情况下使用不同形式的路由来确定要显示的内容。

这是一个非常简短的历史，掩盖了很多主题。您发布的屏幕截图是一个 ASP.NET MVC 项目。

就发布而言，发布 ASP.NET 网站的典型途径是在 Visual Studio 中打开项目，选择 Build|Publish，然后告诉 VS 将它放在哪里。根据您使用的方法，您可能需要在 IIS 中在您发布站点的框上进行其他配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T02:08:55.423

您可能熟悉 ASP.NET WebForms，这是一个 MVC 项目。你可以在这里找到更多：

[ASP.NET MVC](http://www.asp.net/mvc)

为了上传网站，您需要将网站从 Visual Studio 内部发布到本地文件位置，然后将所有内容上传到网站。

如果目标服务器没有安装 MVC，您可以在 Visual Studio 中右键单击网站项目并选择“添加可部署依赖项”。

这将确保服务器具有运行 MVC 项目所需的所有文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T04:31:43.080

首先，当您说 时`ASP`，您指的是旧的（过时的）技术。ASP.NET 就是您在问题中所指的具体内容。

ASP.NET 是一项 Microsoft 技术，它与 IIS 服务器协同工作以提供“Windows 应用程序”类型的网站体验。您的网站逻辑被编译成一个 .NET DLL“类库”。当 Web 请求使用与您的应用程序目录匹配的 URL 到达 IIS 时，IIS 会在内部启动您的应用程序并对其进行维护。

> 不明白需要上传什么文件

Visual Studio 实际上有一个内置的发布者可供您使用。请参阅`Build -> Publish`VS / Web Developer 中的菜单。

> 我在我的项目中没有看到一个 .aspx 页面，这是我认为 ASP 站点是根据经验构成的。

ASP.NET Web 窗体使用页面的 aspx 扩展，它们的前端呈现组件。另一方面，ASP.NET MVC 使用视图的概念，它不依赖于特定的组件。见下一段。

> ASP.NET 和 ASP.NET MVC 有什么不同吗？

是的。不，也许。ASP.NET 包含所有允许 IIS（Web 服务器）运行 Web 应用程序并提供网页的“魔法”。卷可以（并且已经）写在这上面。ASP.NET 还通过 Http Modules 和 Providers 支持许多配置。这些组件是通过 Web 应用程序`web.config`文件声明和配置的，通常由 IIS 和 ASP.NET 自动创建和保存。它们共同构成了使 ASP.NET开箱即用的粘合剂*。*

MVC 建立在现有的 ASP.NET 基础类之上。为了支持模型-视图-控制器模式，一些特性已经被借用，一些特性已经被替换，并且已经创建了不止一些特性。

例如，MVC 为我们提供了支持`View Engines`- 一个运行时库，它允许我们以特定格式编写视图（网页）。ASPX 视图引擎在 MVC 启动期间存在。后来出现了 Razor，使用了`.cshtml`扩展。MVC 框架的用户也已经实现了各种各样的他们自己的视图引擎。由于 ASP.NET 和 MVC 的模块化特性，这是可能的。

> 我是否只是上传整个目录，服务器会以与内置测试 ASP 服务器相同的方式处理它？或者网站是否以某种方式编译成几个文件，我只是上传其中一个目录（我想我在某处读过）。

我建议使用`Build -> Publish`Visual Studio 中的菜单。如果您的主机支持，您可以使用`web deploy`它，但也可以使用 FTP 和文件系统方法。

该`bin`文件夹包含在服务器上运行 Web 应用程序所需的类库。该`web.config`文件提供了执行此操作的配置。但是，您的视图不会编译到程序集中。它们按原样发布，并由视图引擎延迟渲染。

# cocoa - 连接到专用控制器时未调用 NSTableView 委托

> ID：11641170
> 
> 赞同：2
> 
> 时间：2012-07-25T00:32:58.340
> 
> 标签：cocoa, nstableview

为了能够自定义我的一些 NSTableview 的行为，我创建了这个新类来充当表格视图的控制器。

```
@interface aTableViewController : NSObject<NSTableViewDelegate>

@end
@implementation aTableViewController    
- (NSInteger)numberOfRowsInTableView:(NSTableView *)aTableView
{
    return 1;
}

- (id)tableView:(NSTableView *)aTableView objectValueForTableColumn:(NSTableColumn *)aTableColumn row:(NSInteger)rowIndex
{
    return @"something";
}

- (void)tableView:(NSTableView *)aTableView willDisplayCell:(id)aCell forTableColumn:(NSTableColumn *)aTableColumn row:(NSInteger)rowIndex
{}

@end 
```

现有的表视图绑定到 NSArrayController 以获取数据，效果很好。我在 IB 中使用了一个 NSObject 来引用这个 aTableViewController，并将表视图的委托连接到这个控制器对象。然而，这些代表都没有被叫到。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-09-04T04:48:48.160

> 我的 NSTableview 是基于视图而不是基于单元格的。这就是为什么 tableView:willDisplayCell:forTableColumn:row: 永远不会被调用

对于基于视图的表格视图，您可以使用

```
func tableView(tableView: NSTableView, viewForTableColumn tableColumn: NSTableColumn?, row: Int) -> NSView? {
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T01:27:19.863

我看到你发布的内容有几个问题。在@interface 代码中有一个TableViewController，而在@implementation 代码中有WorkspaceTableViewController。其中一个是错字还是这两个不同的类？

其次，控制器中的方法是数据源方法而不是委托方法。如果您使用绑定来填充表，则不会调用这些方法。

# vb.net - Fluent NHibernate 字典映射

> ID：11641172
> 
> 赞同：2
> 
> 时间：2012-07-25T00:33:01.803
> 
> 标签：vb.net, nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我正在尝试使用另一个类作为键在对象上创建一个 IDictionary。

```
' Dictionary Mapping on Tool
    HasMany(Function(x) x.Roles).KeyColumn("ToolRole_ID").AsEntityMap("RoleType_ID").Inverse.Cascade.AllDeleteOrphan().Table("ToolRoles")

' RoleType Mapping
Public Sub New()
    Id(Function(x) x.ID).GeneratedBy.GuidComb().Column("ToolRole_ID")
    References(Function(x) x.Tool).Not.Nullable.Column("Tool_ID")
    References(Function(x) x.RoleType).Not.Nullable.Column("RoleType_ID")
    References(Function(x) x.User).Not.Nullable.Column("User_ID")
    Map(Function(x) x.LastModified).Not.Nullable()
    Table("ToolRoles")
End Sub 
```

由于这篇文章，我不再遇到任何映射错误：[如何使用最新的 fluentNHibernate 版本映射此字典？](https://stackoverflow.com/questions/7443907/how-to-map-this-dictionary-with-the-newest-fluentnhibernate-version)，但即使我知道它有子对象，我的集合也没有被填充。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T06:59:47.720

因为 RoleType 是 ToolRole 的一个属性，所以您可以尝试标准 Map 语法。

```
HasMany(Function(x) x.Roles)
    .KeyColumn("ToolRole_ID")
    .AsMap(Function(x) x.RoleType)
    .Inverse()
    .Cascade.AllDeleteOrphan(); 
```

# php - MongoDB 搜索并保存条件

> ID：11641175
> 
> 赞同：0
> 
> 时间：2012-07-25T00:33:53.273
> 
> 标签：php, mongodb

好的，这似乎我可能不得不做 mulitable mongodb 搜索和插入，但我想我会问。

我有一个问题，我们需要在数据库中搜索企业名称，如果它不在数据库中，然后添加它，但如果它在数据库中，那么我需要它来查看它是否由相同的用户 ID 拥有。如果不返回，则返回`"sorry we can not add this to your account."`正确所有者的用户 ID。

我以为一个简单的

```
$cursor = $collection->find(array("businessname" => $businessname)); 
```

会起作用，但这意味着我需要执行以下操作

```
$collection = $this->db->retail_details;
$cursor = $collection->find(array("businessname" => $businessname));
if ($cursor->count() > 0)
{
SEARCH FOR OWNER
  if(OWNER != CURRENTUSER)
  {
return "Sorry You can not make changes please contact (OWNER)"
  }
}
else{
INSERT NEW LEAD
} 
```

虽然我知道这会起作用，但我发现它可能会变得混乱。作为经理的用户需要能够查看和编辑任何潜在客户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T01:40:22.630

您应该能够通过匹配企业名称和所有者作为您的标准来执行此[操作](http://php.net/manual/en/mongocollection.update.php)。

> Upsert：如果没有文档与 $criteria 匹配，则将从 $criteria 和 $new_object 创建一个新文档

将沿着：

```
<?php
    $collection = $this->db->retail_details;
    try {
        $collection->update(
            array("businessname" => $businessname, "owner" => $currentuser),
            $new_lead, // new lead document to insert
            array("upsert" => true, "safe" => true)
        );
    } catch (Exception $e) {
        // Something went wrong .. 
    }
?> 
```

# javascript - Javascript奇怪的StackOverflow错误

> ID：11641177
> 
> 赞同：3
> 
> 时间：2012-07-25T00:34:29.493
> 
> 标签：javascript, error-handling, stack, stack-overflow

我想知道 Javascript 中括号的工作原理，所以我写了这段代码来测试：

```
((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((
4+4
)))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))) 
```

其中包括：

```
( x1174
4+4
) x1174 
```

我在 Google Chrome 20 (Win64) 上测试了上面的代码，它给了我正确的答案 ( `8`)。

但是，如果我尝试相同的代码，但使用 1175 个括号（两边），我会得到一个**stackoverflow**错误。

您可以在 JSFiddle 中检查此代码[（](http://jsfiddle.net/2tx4G/)注意：在 JSFiddle 中，它停止使用 1178 个括号）

所以，我的问题是：

*   为什么会这样？
*   为什么它在 JSFiddle 上停止使用 1178 括号，但在我的空白页上只有 1175？
*   此错误是否取决于页面/浏览器/操作系统？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T00:50:33.230

通常，语言是由按照称为**递归下降**的模式设计的代码来解析的。我不确定情况是否如此，但“堆栈溢出”错误肯定是一个重要的证据。

这个想法是为了解析一个表达式，你通过查看一个表达式可以是什么来处理语法。*带括号*的表达式类似于“表达式中的表达式”。因此，对于解析器系统地解析它第一次看到的代码中的某些表达式（对于解析器来说，这是它永恒的命运），左括号意味着“好的 - 坚持你正在做的事情（在堆栈上） )，然后从表达式可能是什么的开头开始解析一个新的、完整的表达式，然后在看到匹配的右括号时返回。

因此，一千个或更多括号的字符串触发了相同活动的等效级联：把我们有的东西放在架子上；潜入并获得一个子表达式，然后在我们知道它的样子时继续。

现在这不是解析某些东西的唯一方法，应该注意。有很多方法。我个人是递归下降解析的忠实拥护者，但它并没有什么特别之处（除了我认为有一天它会让我看到一个真正的独角兽）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-25T00:38:03.453

不同浏览器的行为不同，因为它们具有不同的 Javascript 实现。该语言没有指定这样的事情应该如何失败，因此每个实现都以不同的方式失败。

JSFiddle 和您的空白页之间的区别在于 JSFiddle 本身使用一些堆栈帧来建立运行代码的环境。

# sql-server - 访问 SSDT 数据以进行编程操作

> ID：11641179
> 
> 赞同：1
> 
> 时间：2012-07-25T00:34:50.960
> 
> 标签：sql-server, bids, kendo-ui, sql-server-data-tools

我设置了一个 MSSQL 2012 报告服务器，并在 Sequel Server Data Tools 中制作了许多报告。我想通过 C#/ASP.NET 访问这些报告中返回的数据。

最终结果是在 KendoUI DataViz 套件中显示数据，但首先我需要在服务器端将报告转换为 JSON。

这可能吗？

**编辑：**要清楚，我需要知道如何从 Web 服务器访问报告数据。将数据转换为 JSON 格式并不是我需要帮助的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:46:01.587

是的，有可能。我建议你看看如何使用 ASP.NET MVC 返回[JSON](http://agilewarrior.wordpress.com/2011/09/15/how-to-return-json-data-from-mvc-controller/)以及它是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:30:57.107

自从我提出这个问题后，我了解到我可以使用报告上的 atom 提要按钮来下载一个 .atom 文件，该文件包含一个以 XML 格式提供报告数据的 URL。

您需要将 URL 中的 & 替换为“&”，然后您就有了一个有效的 URL。

# zend-framework2 - 附加到控制器调度事件

> ID：11641193
> 
> 赞同：0
> 
> 时间：2012-07-25T00:37:59.997
> 
> 标签：zend-framework2

ZF2问题在这里。

我喜欢 ZF2 中事件驱动的东西。

这是我的目标。

我想使用数据库表启动会话，如果由于某种原因没有数据库连接，我想被抛出到错误/错误模板。

以下是我想到的一些方法。我可以附加到应用程序“路由”事件并在路由匹配发生之前或之后立即启动会话。但是，在 Mvc\Application.php 文件中没有 TRY 捕获，所以我认为这不是这样做的地方。

然而，在调用 CONTROLLER 的调度方法周围有一个 try catch 块。而且我注意到控制器有它自己触发的内部“调度”事件。

所以另一种可能性是我应该附加到这个内部控制器调度事件并在控制器的操作方法实际执行之前设置我的会话，因此在他们需要会话之前。

那么，我怎样才能附加到这个内部的“调度”方法呢？或者我还能怎么做才能让任何数据库连接异常进入我漂亮的异常页面，而不是在没有任何异常处理的情况下作为正常的 php 错误喷出？？？

控制器上没有更多的 init() 方法，因为这是事件应该提供的功能。

感谢您的帮助。

仅供参考：我尝试附加到不同的事件，例如'bootstrap'、'loadmodules'、'loadmodules.post'。我在附加方法中所做的只是抛出一个异常，看看我是否会出现在我拥有的漂亮错误页面中，但我没有任何运气。我最终调试它并找到了这个内部控制器的“调度”方法。控制器有自己的内部事件管理器。至少这是我从调试中收集到的。我可能是错的，所以请纠正我！

# html - 将 Adob e Illustrator 模板转换为 Wordpress 主题？

> ID：11641194
> 
> 赞同：1
> 
> 时间：2012-07-25T00:38:02.350
> 
> 标签：html, css, wordpress, adobe-illustrator

谁能给我任何建议或指导我将 Adob​​e Illustrator 模板转换为 WordPress 模板的好教程？

我已经阅读了很多关于使用切片执行此操作的内容，但我也听说使用切片构建的站点是维护的噩梦。这个网站会经常更新，所以我不会有这个问题。此外，网站的背景有渐变，所以我不确定切片如何使用它。

如果我必须使用切片来制作这个模板，虽然我可以使用纯色，但首选渐变。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T01:12:52.040

使用切片只是为了以允许您使用当前 CSS 技术的方式切割您的网站。例如，一个小切片用于无缝图案的背景图像，或者一个薄而高的切片用于垂直渐变（您可以使用 CSS 对其进行重复-x）。您可能需要在切片时隐藏各个层以获得正确的点点滴滴。您可能已经读过那些对切片设计的旧概念有疑问的人 - 整个网站都是建立在拼凑在一起的图像上的，因此进行编辑是一种痛苦。

如果您只是使用切片基本上抓取您需要的单个元素（为了提高效率，请阅读图像恶意！）和背景图像 - 只是你需要的部分，因为你可以垂直和水平重复 - 你会正好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:58:29.620

您将要分解 Illustrator 模板的所有元素。然后从头开始创建您的 Wordpress 主题。由于您有渐变背景，因此将其全部切片并不是最佳选择。获取此 Illustrator 模板的所有元素并分别保存。

然后我会熟悉将这些元素转换为功能齐全的 Wordpress 主题的步骤

[http://wp.tutsplus.com/articles/news/building-wordpress-themes-from-scratch-a-new-book-from-one-of-our-wptuts-authors/](http://wp.tutsplus.com/articles/news/building-wordpress-themes-from-scratch-a-new-book-from-one-of-our-wptuts-authors/)

# lua - 类似于 perls PPI 的 Lua 解析器 DOM

> ID：11641198
> 
> 赞同：0
> 
> 时间：2012-07-25T00:38:32.520
> 
> 标签：lua

我正在寻找一个用于 lua 语言的 DOM 解析器，它的工作原理类似于用于 perl 的出色 PPI 解析器。

基本上我有很多绑定到特定实体的 lua 脚本 - 我想评估这些脚本中的一些特定函数调用以显示有关脚本的一些通用信息（例如生成报告）。

例如

```
function func1()

....
  if(check(1,4)) 

  end
end 
```

在这种情况下，我希望 dom 解析器找到带有多个参数的函数调用检查。

我不想使用正则表达式或类似工具，DOM 解析器是最好的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:26:44.260

[LuaInspect](https://github.com/davidm/lua-inspect)是你想要的。

LuaInspect 从 Lua 代码构建一个 AST（你称之为 DOM），并且可以对其进行静态分析。它可以生成 HTML 报告，也用于在某些编辑器中完成代码。

`command.lua`是 LuaInspect 的主文件，用于`ast.lua`构建 AST 等。

# f# - 如何使这段代码更符合 F# 的习惯？

> ID：11641199
> 
> 赞同：0
> 
> 时间：2012-07-25T00:38:42.703
> 
> 标签：f#, functional-programming

我有一个与此类似的函数 A，它将函数 B 应用于目录中的每个文件。每个文件都有一定数量的“条目”；函数 B 将当前条目总数作为参数，并返回在当前文件中找到的新条目数。

此外，我需要计算处理的文件数并在每次处理文件时显示此计数。由于我的命令背景，我想出了 2 个可变变量和一个 for 循环。

```
let files = Directory.EnumerateFiles sourceDirectory
let mutable numEntries = 0
let mutable numFiles = Seq.length files
let mutable index = 0
for file in files do
     printfn "done %d of %d" index numFiles
     let numNewEntries = processFile file numEntries
     numEntries <- numEntries + numNewEntries
     index <- index + 1 
```

所以，有几个问题：

*   我怎样才能以更惯用、更实用的风格来写这个？
*   你能解释一下更惯用的解决方案的优势吗？我对函数式编程非常陌生，有时我看不出我肮脏的 for 循环命令有什么问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T01:05:17.533

这是一个更实用的示例：

```
let files = Directory.EnumerateFiles sourceDirectory
let numFiles = Seq.length files
files 
|> Seq.mapi (fun idx file -> (idx,file)) // Get access to the index in a loop
|> Seq.fold (fun numentries (index,file) ->
         printfn "done %d of %d" index numFiles
         numentries + (processFile file numFiles)
         ) 0 
```

通过使用`mapi`，我可以访问循环中的索引，从而消除第一个可变变量。第二个是通过使用`fold`跟踪文件总数而不是可变变量来消除的。

这样做的主要优点是，在没有任何可变状态的情况下，可以更轻松地将代码转换为在多个线程中运行。此外，由于变量是恒定的，因此对代码的推理变得更加简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T02:35:32.697

假设您最终追求的是 的最终值`numEntries`，那么这是我的看法：

```
let getNumEntries sourceDirectory =
    Directory.GetFiles sourceDirectory
    |> fun files -> (0, 0, files.Length), files
    ||> Array.fold (fun (index, numEntries, numFiles) file ->
        printfn "done %d of %d" index numFiles
        index + 1, numEntries + processFile file numEntries, numFiles)
    |> fun (_,numEntries,_) -> numEntries 
```

如果您所追求的只是副作用`processFile`而不是最终`numEntries`值，则替换`fun (_,numEntries,_) -> numEntries`为`ignore`.

* * *

> 你能解释一下更惯用的解决方案的优势吗？我对函数式编程非常陌生，有时我看不出我肮脏的 for 循环命令有什么问题。

除了主观之外，这是相当广泛的，并且在其他多个答案中得到了比我在这里做的更彻底的回答。

# file-upload - EC2 Glassfish 3 中的 Struts 2 FileUpload 部署不工作

> ID：11641200
> 
> 赞同：1
> 
> 时间：2012-07-25T00:38:52.900
> 
> 标签：file-upload, struts2, amazon-ec2

我花了很多时间寻找解决方案，但不知道还能去哪里。我们的主要应用部署在亚马逊 EC2 GlassFish 3.1 上。我们的页面之一处理文件上传。它在我的本地开发箱以及其他几个本地部署和其他开发人员箱上运行良好。我已经完成了许多不同的日志记录选项，并且每次在本地框中更改的日志记录选项都会正确显示。

问题是，无论我尝试过什么，在亚马逊 EC2 中，上传的文件永远不会出现在我尝试过的各种临时路径中（包括将路径的所有权限和父路径更改为 777 .. 坏..我知道，但想尽办法让它工作），文件总是显示为空，并且日志记录表明没有错误。我已经修改了允许的文件类型，支持的最大文件大小，但无济于事。

在这一点上，我认为它与 EC2 有关，因为它适用于不同网络中的其他几个部署（印度团队、本地盒子等）。我在 EC2 控制台中找不到任何可以说明允许文件上传所需的任何更改的任何内容。哎呀，我可以将 .war 文件 scp 到实例并很好地部署它，所以我无法想象有任何东西会阻止浏览器从 Web 应用程序本身上传文件。

非常感谢任何帮助，因为不幸的是，这是阻碍我们最初的 alpha 版本的唯一原因。

谢谢你。

# ruby-on-rails-3 - 具有新命名空间的未定义局部变量或方法“new_admin_company”

> ID：11641204
> 
> 赞同：2
> 
> 时间：2012-07-25T00:39:50.800
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2, rails-routing

我已移至我的 rails 应用程序的 CRUD 操作的命名空间。在我的路线文件中，我已经完成了：

```
namespace :admin do
      root :to => 'companies#index'
      resources :events

      resources :vacancies

      resources :contacts

      resources :companies do
        get :getCompanies, :on => :collection
      end
end 
```

我跑步时得到这个`rake routes`：

```
admin_root        /admin(.:format)                        admin/companies#index
                admin_events GET    /admin/events(.:format)                 admin/events#index
                             POST   /admin/events(.:format)                 admin/events#create
             new_admin_event GET    /admin/events/new(.:format)             admin/events#new
            edit_admin_event GET    /admin/events/:id/edit(.:format)        admin/events#edit
                 admin_event GET    /admin/events/:id(.:format)             admin/events#show
                             PUT    /admin/events/:id(.:format)             admin/events#update
                             DELETE /admin/events/:id(.:format)             admin/events#destroy
             admin_vacancies GET    /admin/vacancies(.:format)              admin/vacancies#index
                             POST   /admin/vacancies(.:format)              admin/vacancies#create
           new_admin_vacancy GET    /admin/vacancies/new(.:format)          admin/vacancies#new
          edit_admin_vacancy GET    /admin/vacancies/:id/edit(.:format)     admin/vacancies#edit
               admin_vacancy GET    /admin/vacancies/:id(.:format)          admin/vacancies#show
                             PUT    /admin/vacancies/:id(.:format)          admin/vacancies#update
                             DELETE /admin/vacancies/:id(.:format)          admin/vacancies#destroy
              admin_contacts GET    /admin/contacts(.:format)               admin/contacts#index
                             POST   /admin/contacts(.:format)               admin/contacts#create
           new_admin_contact GET    /admin/contacts/new(.:format)           admin/contacts#new
          edit_admin_contact GET    /admin/contacts/:id/edit(.:format)      admin/contacts#edit
               admin_contact GET    /admin/contacts/:id(.:format)           admin/contacts#show
                             PUT    /admin/contacts/:id(.:format)           admin/contacts#update
                             DELETE /admin/contacts/:id(.:format)           admin/contacts#destroy
getCompanies_admin_companies GET    /admin/companies/getCompanies(.:format) admin/companies#getCompanies
             admin_companies GET    /admin/companies(.:format)              admin/companies#index
                             POST   /admin/companies(.:format)              admin/companies#create
           new_admin_company GET    /admin/companies/new(.:format)          admin/companies#new
          edit_admin_company GET    /admin/companies/:id/edit(.:format)     admin/companies#edit
               admin_company GET    /admin/companies/:id(.:format)          admin/companies#show
                             PUT    /admin/companies/:id(.:format)          admin/companies#update
                             DELETE /admin/companies/:id(.:format)          admin/companies#destroy 
```

然而我得到了错误：

```
undefined local variable or method `new_admin_company' 
```

那么，在将事物移至命名空间时，我忘记了做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T00:49:01.683

它应该是 new_admin_company_path。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T01:40:40.403

检查您的公司控制器中是否有“新”方法。

# apache - 我如何组合这些 .htaccess 命令？

> ID：11641206
> 
> 赞同：0
> 
> 时间：2012-07-25T00:39:56.543
> 
> 标签：apache, .htaccess

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} ^www.yourdomain.com [NC]
RewriteRule ^(.*)$ http://yourdomain.com/$1 [L,R=301] 
```

这就是 www/non www 重定向

这是我的维护页面

```
ErrorDocument 503 /system/maintenance.html
RewriteEngine On
RewriteCond %{REQUEST_URI} !.(css|gif|jpg|png)$
RewriteCond %{DOCUMENT_ROOT}/system/maintenance.html -f
RewriteCond %{SCRIPT_FILENAME} !maintenance.html
RewriteRule ^.*$  -  [redirect=503,last] 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T00:55:01.043

这取决于您要首先应用哪一个以及是否`RewriteBase`可以将其应用于两组规则（我假设它可以，因为第二条规则并不真正关心基础是什么）。您还可以删除重复的`RewriteEngine On`指令：

```
# this is more or less something separate from rewrite engine
ErrorDocument 503 /system/maintenance.html

# turn on the rewrite engine
RewriteEngine On
RewriteBase /

# do www to non-www redirect
RewriteCond %{HTTP_HOST} ^www.yourdomain.com [NC]
RewriteRule ^(.*)$ http://yourdomain.com/$1 [L,R=301]

# Handle maintenance
RewriteCond %{REQUEST_URI} !.(css|gif|jpg|png)$
RewriteCond %{DOCUMENT_ROOT}/system/maintenance.html -f
RewriteCond %{SCRIPT_FILENAME} !maintenance.html
RewriteRule ^.*$  -  [redirect=503,last] 
```

此顺序意味着即使维护，www 到非 www 仍然会发生。如果它们是相反的方式，无论主机名是 www 还是非 www，您都会得到维护处理。

# c# - 以编程方式将新行添加到数据网格视图

> ID：11641207
> 
> 赞同：0
> 
> 时间：2012-07-25T00:40:04.097
> 
> 标签：c#

我有一个从数据库中获取数据并显示给用户的datagridview，我还有三个文本框，如果我在datgrid中选择一个已经存在的行，然后通过它制作的文本框输入值，用户可以通过这些文本框将值输入到datagrid视图中更改以及当我按下更改按钮时，在 db 和 datagridview 中都成功进行了更改，但是如果我在 datagrid 视图中选择一个空行并尝试输入值，我无法将新行添加到 datagrid 视图中，尽管允许用户添加新行设置为true。

```
 private void txtName_TextChanged(object sender, EventArgs e)
{
    if (dataGridView1.SelectedRows.Count == 1)
    {
        dataGridView1.SelectedRows[0].Cells["Name"].Value = txtName.Text;
    }
}

private void txtRelation_TextChanged(object sender, EventArgs e)
{
    if (dataGridView1.SelectedRows.Count == 1)
    {
        dataGridView1.SelectedRows[0].Cells["Relation"].Value = txtRelation.Text;
    }
}
private void txtID_TextChanged(object sender, EventArgs e)
{
    if (dataGridView1.SelectedRows.Count == 1)
    {
        dataGridView1.SelectedRows[0].Cells["ID"].Value = txtID.Text;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T01:26:38.560

检查您的 gridview 是否为**readonly**。如果**Readonly**为 true，则将其设置为 false 以启用用户添加新行。另一个原因可能是 DataGridView 的“ **EditMode** ”属性。如果您想允许用户添加新行，它不应该是“以编程方式**编辑”**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T03:46:37.970

您必须**双击**一行才能实际创建一个新行。但是，如果您不想要双击的压力，您可以使行选择事件对行*执行单击*。

# file - Stata 多重插补输出文件

> ID：11641210
> 
> 赞同：0
> 
> 时间：2012-07-25T00:40:33.763
> 
> 标签：file, stata

我是Stata的新手。我需要在Stata上实现多重插补，但是我在使用时遇到了问题。我通过以下代码执行所有类似指令的操作：

```
use http://www.stata-press.com/data/r11/mheart1s20
mi describe
mi impute regress bmi attack smokes age female hsgrad, add(20) 
```

然后我得到了所有的东西。但是，我想找到输出文件（完成的数据）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:11:47.837

没有单独的输出数据文件；“完成”的数据在内存中。如果`mi describe`再次这样做，您将看到内存中的数据集现在包含*M* = 40 个插补，而之前的输出`mi describe`显示它包含*M* = 20 个插补。因此，您已向数据集添加了 20 个插补，由命令`add(20)`选项指定`mi impute`。

# python - 为什么 dis.dis(None) 返回输出？

> ID：11641211
> 
> 赞同：9
> 
> 时间：2012-07-25T00:41:02.157
> 
> 标签：python

特别是，它输出：

```
>>> dis.dis(None)
 22           0 LOAD_FAST                0 (x)
              3 LOAD_CONST               1 (None)
              6 COMPARE_OP               8 (is)
              9 POP_JUMP_IF_FALSE       23

 23          12 LOAD_GLOBAL              1 (distb)
             15 CALL_FUNCTION            0
             18 POP_TOP             

 24          19 LOAD_CONST               1 (None)
             22 RETURN_VALUE        

 25     >>   23 LOAD_GLOBAL              2 (isinstance)
             26 LOAD_FAST                0 (x)
             29 LOAD_GLOBAL              3 (types)
             32 LOAD_ATTR                4 (InstanceType)
             35 CALL_FUNCTION            2
             38 POP_JUMP_IF_FALSE       53

 26          41 LOAD_FAST                0 (x)
             44 LOAD_ATTR                5 (__class__)
             47 STORE_FAST               0 (x)
             50 JUMP_FORWARD             0 (to 53)

 27     >>   53 LOAD_GLOBAL              6 (hasattr)
             56 LOAD_FAST                0 (x)
             59 LOAD_CONST               2 ('im_func')
             62 CALL_FUNCTION            2
             65 POP_JUMP_IF_FALSE       80

 28          68 LOAD_FAST                0 (x)
             71 LOAD_ATTR                7 (im_func)
             74 STORE_FAST               0 (x)
             77 JUMP_FORWARD             0 (to 80)

 29     >>   80 LOAD_GLOBAL              6 (hasattr)
             83 LOAD_FAST                0 (x)
             86 LOAD_CONST               3 ('func_code')
             89 CALL_FUNCTION            2
             92 POP_JUMP_IF_FALSE      107

 30          95 LOAD_FAST                0 (x)
             98 LOAD_ATTR                8 (func_code)
            101 STORE_FAST               0 (x)
            104 JUMP_FORWARD             0 (to 107)

 31     >>  107 LOAD_GLOBAL              6 (hasattr)
            110 LOAD_FAST                0 (x)
            113 LOAD_CONST               4 ('__dict__')
            116 CALL_FUNCTION            2
            119 POP_JUMP_IF_FALSE      246

 32         122 LOAD_FAST                0 (x)
            125 LOAD_ATTR                9 (__dict__)
            128 LOAD_ATTR               10 (items)
            131 CALL_FUNCTION            0
            134 STORE_FAST               1 (items)

 33         137 LOAD_FAST                1 (items)
            140 LOAD_ATTR               11 (sort)
            143 CALL_FUNCTION            0
            146 POP_TOP             

 34         147 SETUP_LOOP             174 (to 324)
            150 LOAD_FAST                1 (items)
            153 GET_ITER            
        >>  154 FOR_ITER                85 (to 242)
            157 UNPACK_SEQUENCE          2
            160 STORE_FAST               2 (name)
            163 STORE_FAST               3 (x1)

 35         166 LOAD_GLOBAL              2 (isinstance)
            169 LOAD_FAST                3 (x1)
            172 LOAD_GLOBAL             12 (_have_code)
            175 CALL_FUNCTION            2
            178 POP_JUMP_IF_FALSE      154

 36         181 LOAD_CONST               5 ('Disassembly of %s:')
            184 LOAD_FAST                2 (name)
            187 BINARY_MODULO       
            188 PRINT_ITEM          
            189 PRINT_NEWLINE       

 37         190 SETUP_EXCEPT            14 (to 207)

 38         193 LOAD_GLOBAL             13 (dis)
            196 LOAD_FAST                3 (x1)
            199 CALL_FUNCTION            1
            202 POP_TOP             
            203 POP_BLOCK           
            204 JUMP_FORWARD            28 (to 235)

 39     >>  207 DUP_TOP             
            208 LOAD_GLOBAL             14 (TypeError)
            211 COMPARE_OP              10 (exception match)
            214 POP_JUMP_IF_FALSE      234
            217 POP_TOP             
            218 STORE_FAST               4 (msg)
            221 POP_TOP             

 40         222 LOAD_CONST               6 ('Sorry:')
            225 PRINT_ITEM          
            226 LOAD_FAST                4 (msg)
            229 PRINT_ITEM          
            230 PRINT_NEWLINE       
            231 JUMP_FORWARD             1 (to 235)
        >>  234 END_FINALLY         

 41     >>  235 PRINT_NEWLINE       
            236 JUMP_ABSOLUTE          154
            239 JUMP_ABSOLUTE          154
        >>  242 POP_BLOCK           
            243 JUMP_FORWARD            78 (to 324)

 42     >>  246 LOAD_GLOBAL              6 (hasattr)
            249 LOAD_FAST                0 (x)
            252 LOAD_CONST               7 ('co_code')
            255 CALL_FUNCTION            2
            258 POP_JUMP_IF_FALSE      274

 43         261 LOAD_GLOBAL             15 (disassemble)
            264 LOAD_FAST                0 (x)
            267 CALL_FUNCTION            1
            270 POP_TOP             
            271 JUMP_FORWARD            50 (to 324)

 44     >>  274 LOAD_GLOBAL              2 (isinstance)
            277 LOAD_FAST                0 (x)
            280 LOAD_GLOBAL             16 (str)
            283 CALL_FUNCTION            2
            286 POP_JUMP_IF_FALSE      302

 45         289 LOAD_GLOBAL             17 (disassemble_string)
            292 LOAD_FAST                0 (x)
            295 CALL_FUNCTION            1
            298 POP_TOP             
            299 JUMP_FORWARD            22 (to 324)

 47     >>  302 LOAD_GLOBAL             14 (TypeError)

 48         305 LOAD_CONST               8 ("don't know how to disassemble %s objects")

 49         308 LOAD_GLOBAL             18 (type)
            311 LOAD_FAST                0 (x)
            314 CALL_FUNCTION            1
            317 LOAD_ATTR               19 (__name__)
            320 BINARY_MODULO       
    -->     321 RAISE_VARARGS            2
        >>  324 LOAD_CONST               1 (None)
            327 RETURN_VALUE 
```

为什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-25T00:43:54.363

从[文档](http://docs.python.org/library/dis.html)中：

> dis.dis([字节源])
> 
> 反汇编字节源对象。bytesource 可以表示模块、类、方法、函数或代码对象。对于一个模块，它会反汇编所有功能。对于一个类，它反汇编所有方法。对于单个代码序列，它每条字节码指令打印一行。**如果没有提供对象，它会反汇编最后的 traceback**。

强调我的。

* * *

如果你在一个新的解释器中尝试它，没有最后的回溯，所以你会得到一个错误：

```
>>> import dis
>>> dis.dis(None)

Traceback (most recent call last):
  File "<pyshell#1>", line 1, in <module>
    dis.dis(None)
  File "C:\Python27\lib\dis.py", line 23, in dis
    distb()
  File "C:\Python27\lib\dis.py", line 57, in distb
    raise RuntimeError, "no last traceback to disassemble"
RuntimeError: no last traceback to disassemble 
```

但是现在如果你尝试相同的命令，它会反汇编`RuntimeError`你刚刚得到的：

```
>>> dis.dis(None)
 53           0 LOAD_FAST                0 (tb)
              3 LOAD_CONST               2 (None)
              6 COMPARE_OP               8 (is)
              9 POP_JUMP_IF_FALSE       82

 54          12 SETUP_EXCEPT            13 (to 28)

 55          15 LOAD_GLOBAL              1 (sys)
             18 LOAD_ATTR                2 (last_traceback)
             21 STORE_FAST               0 (tb)
             24 POP_BLOCK           
             25 JUMP_FORWARD            26 (to 54)

 56     >>   28 DUP_TOP             
             29 LOAD_GLOBAL              3 (AttributeError)
             32 COMPARE_OP              10 (exception match)
             35 POP_JUMP_IF_FALSE       53
             38 POP_TOP             
             39 POP_TOP             
             40 POP_TOP             

 57          41 LOAD_GLOBAL              4 (RuntimeError)
             44 LOAD_CONST               1 ('no last traceback to disassemble')
    -->      47 RAISE_VARARGS            2
             50 JUMP_FORWARD             1 (to 54) 
```

# java - 无法找到 }) 的含义；大括号，Android中的圆括号

> ID：11641214
> 
> 赞同：0
> 
> 时间：2012-07-25T00:41:09.703
> 
> 标签：java, android

作为 Android 的初学者并且已经远离编程多年，我在互联网上找不到这个问题的答案。它涉及我一直在阅读的一本书中的以下代码，但语法对于 Android 很常见。我不知道 }); 代表。作为过去努力使括号可读的人，我发现这段代码很棒，肯定有更好的方式来展示它吗？

这是代码：

```
CheckBox checkBox = (CheckBox)findViewById(R.id.chkAutosave);
checkBox.setOnClickListener(new View.OnClickListener()
{
public void onClick(View v) {
        if (((CheckBox)v).isChecked())
            DisplayToast("CheckBox is checked");
        else
            DisplayToast("CheckBox is unchecked");
    }
}); 
```

无论如何，有人知道}); 的含义吗？在末尾？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T00:43:49.657

它是关闭匿名实现的定义，`View.OnClickListener`然后关闭方法调用`setOnClickListener()`。

为了更清楚，代码相当于：

```
View.OnClickListener listener = new View.OnClickListener() {
    public void onClick(View v) {
        if (((CheckBox)v).isChecked())
            DisplayToast("CheckBox is checked");
        else
            DisplayToast("CheckBox is unchecked");
    }
};

checkBox.setOnClickListener(listener); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T00:49:37.767

在 ”}）;”：

*   "}" : 关闭 View.OnClickListener() 方法
*   ")" : 关闭 setOnClickListener()
*   “;” : 关闭指令

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T00:47:21.870

它关闭 setOnClickListener 。提示如果您使用的是 eclipse，请将光标设置在右方括号的右侧。左方括号将被突出显示，这样您就可以看到是什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T01:06:55.550

开始：

```
checkBox.setOnClickListener(new View.OnClickListener()
{
public void onClick(View v) {
        if (((CheckBox)v).isChecked())
            DisplayToast("CheckBox is checked");
        else
            DisplayToast("CheckBox is unchecked");
    }
}); 
```

Eliminate 方法（这不会在所有情况下都编译，但现在假设它会编译）：

```
checkBox.setOnClickListener(new View.OnClickListener()
{
  /* .. */
}); 
```

删除多余的空格：

```
checkBox.setOnClickListener(new View.OnClickListener() { /* .. */ }); 
```

而且，那里。它看起来像一个“正常的方法调用”:) 代码只是传递了一个表示事件侦听器的*匿名类型的**新*实例。

 *它可以写成：

```
ClickEventListener listener = new View.OnClickListener() { /* .. */ };
checkBox.setOnClickListener(listener); 
```

快乐编码！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T06:20:29.990

谢谢你的回答。我发现重新排列括号很有帮助，因此我将其发布以供将来参考。虽然我不确定它如何符合传统做法。

```
CheckBox checkBox = (CheckBox)findViewById(R.id.chkAutosave);
checkBox.setOnClickListener
    (   new View.OnClickListener()
        {
             public void onClick(View v) 
             {
                  if (((CheckBox)v).isChecked())
                      DisplayToast("CheckBox is checked");
                  else
                      DisplayToast("CheckBox is unchecked");
             }  // onClick
        } // new View.OnClickListener()
    );  // checkBox.setOnClickListener 
```

干杯!*

# google-apps-script - 谷歌电子表格到日历脚本更改或编辑时区触发条目出现在错误的日期

> ID：11641220
> 
> 赞同：0
> 
> 时间：2012-07-25T00:42:36.353
> 
> 标签：google-apps-script, timezone, google-sheets, google-calendar-api

这是我从一开始的问题......我真的需要别人的帮助......

我需要为我的企业创建一个活动预订系统。我创建了一个 Google 表单来将预订输入到电子表格中，然后我需要一些代码来自动将这些数据传输到我帐户中的相关 Google 日历中。我找到了创建此代码的人，与他们共享了 google 表单/电子表格，以便他们可以创建代码。

以下是他们创建的代码：

我可以在表单中输入信息，进行提交，它们都出现在正确的日期，您可以通过代码看到它将根据开始创建一个全天事件（如果我在其中一个列中输入了全天）时间（开始时间）。

我的问题是，当我提交正确的条目时，突然间我的正确条目开始出现在我日历的前一天。这恰好发生在我晚上 11 点之后提交的任何条目上。我不确定问题是什么，但我相信这可能与时区有关。我在英国，它是 GMT+0000，为我制作剧本的人在印度。我已经读过，当您更改脚本的时区时，触发器不会自动更改（它们保持原始时区）。

如果我在一定时间后提交它们，这是否会导致我的条目突然出现在我的日历中，即使电子表格中的所有内容都是正确的？？？

我可以通过编辑代码以根据结束时间（enddt）而不是 startdt 创建全天事件来临时解决此问题，但这仅适用于一小段时间。直到上午 11 点，我可能必须将代码改回来？这一切都非常令人困惑。

如果是时区问题，有人可以告诉我如何找出触发器的时区，如果它们错了，我该如何在脚本中编辑触发器的时区。我真的被困住了，因为我需要这个来为我的业务进行预订，而不会因为让他们出现在错误的日期而感到困惑。

我所有的日历、电子表格、表格和脚本都是 GMT+0000

我将在下面复制并粘贴我的脚本，并加强我可以编辑的全天活动部分，以暂时对问题进行排序，直到它再次变回是否有帮助？

```
var ss = SpreadsheetApp.getActive();
/*function onEdit(e) {
   var doc = SpreadsheetApp.getActiveSheet();
setRowColors();
Browser.msgBox("Trigger it");
}*/

function onEdit(event){
  var doc = SpreadsheetApp.getActiveSheet();
  var r = event.source.getActiveRange();
  var currentCol = r.getColumn();
 // Browser.msgBox("currentCol:- "+currentCol);
  if(currentCol!= 10 && currentCol!= 11 && currentCol!= 12)
  {
  var currentRow = r.getRow();
 // Browser.msgBox("currentRow:- "+currentRow);
  var v = parseInt(currentRow);
   var dataRange = doc.getRange(v, 10, 1,3);
  var data = dataRange.getValues();
   for (i in data) {
    var row = data[i];
    var tom = row[0].toLowerCase();  

   // Browser.msgBox(tom);
    var steven = row[1].toLowerCase();
    var lucy = row[2].toLowerCase();
    if(tom=="added" )
     doc.getRange(v, 10, 1, 1).setValue("ADD"); 
     if(steven=="added" )
     doc.getRange(v, 11, 1, 1).setValue("ADD"); 
      if(lucy=="added" )
     doc.getRange(v, 12, 1, 1).setValue("ADD"); 

   }

}
    // calscript();
   //Browser.msgBox("Done:-");
}

function calscript() {
  //Browser.msgBox("start calscript:-");
  var sheet = SpreadsheetApp.getActiveSheet();
  var startRow = 2;  // First row of data to process
  var numRows = 2;   // Number of rows to process
  var dataRange = sheet.getRange(startRow, 1, sheet.getMaxRows(),35);
  var data = dataRange.getValues();

  for (i in data) {
    var row = data[i];
    var title = row[32].toString();
    // Browser.msgBox(title);// First column
    var desc = row[34];       // Second column
    var tstart = row[2];
   // Browser.msgBox(tstart);// First column
    var tstop = row[3];
   // Browser.msgBox(tstop);// First column
    var loc = row[31];
    var tom=row[9].toLowerCase();
    var steven=row[10].toLowerCase();
    var lucy=row[11].toLowerCase();
    var day=row[4].toLowerCase();
    if(tom=="add")
    {
      AddtoTom(day,title, tstart, tstop, {description:desc,location:loc});
      dataRange.getCell(parseInt(i)+1,10).setValue('Added'); 
    }
    if(steven=="add")
    {
      AddtoSteven(day,title, tstart, tstop, {description:desc,location:loc});
      dataRange.getCell(parseInt(i)+1,11).setValue('Added'); 
    }
    if(lucy=="add")
    {
      AddtoLucy(day,title, tstart, tstop, {description:desc,location:loc});
      dataRange.getCell(parseInt(i)+1,12).setValue('Added'); 
    }
    //cal.createEvent(title, new Date("March 3, 2010 08:00:00"), new Date("March 3, 2010 09:00:00"), {description:desc,location:loc});
   // cal.createEvent(title, tstart, tstop, {description:desc,location:loc});
 }
}
function AddtoTom(day,title,startdt,enddt,desc)
{
   var cal = CalendarApp.openByName("Tom");
  if(day=="all day")
    **cal.createAllDayEvent(title, **startdt,** desc)**
  else
    cal.createEvent(title, startdt, enddt, desc);

}
function AddtoSteven(day,title,startdt,enddt,desc)
{
   var cal = CalendarApp.openByName("Steven");
 if(day=="all day")
    **cal.createAllDayEvent(title, **startdt**, desc)**
  else
    cal.createEvent(title, startdt, enddt, desc);

}
function AddtoLucy(day,title,startdt,enddt,desc)
{
   var cal = CalendarApp.openByName("Lucy");
 if(day=="all day")
    **cal.createAllDayEvent(title, **startdt**, desc)**
  else
    cal.createEvent(title, startdt, enddt, desc);

}

function onOpen() {
   //  Browser.msgBox('start');// First column
  var menuEntries = [];

  menuEntries.push({name: "Add To Calendar", functionName: "calscript"});
  ss.addMenu("Main Menu", menuEntries);
 // Browser.msgBox('end');// First column
}

function onInstall() {
  onOpen();
}

function onFormSubmit()
{

}
function configure() {
 // Browser.msgBox('trigger');// First column
  ScriptApp.newTrigger("calscript").timeBased().everyMinutes(1).create();
  //Browser.msgBox('trigger ends');// First column
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:16:19.920

好吧，我想我是个白痴.......事实证明，这不是一个真正的脚本问题，而是一个夏令时问题，因为在 2013 年 4 月 1 日之后，唯一的结果出现在我之前我的日历、表格/电子表格和脚本的时区设置为 GMT+0000。我只是将它们全部重置为“GMT+0000 没有夏令时”，这似乎解决了这个问题。我向任何有类似日期问题的人推荐这个，其中日期被推迟一天或时间被推迟一个小时。

# asp.net-mvc - MVC 的路由问题

> ID：11641224
> 
> 赞同：0
> 
> 时间：2012-07-25T00:43:01.670
> 
> 标签：asp.net-mvc

我正在使用 MVC 3 并遇到问题。而不是像我预期的那样给 mydomain/mydirectory/item 我得到这个：

mydomain/mydirectory/list?animal=quack。

这是全球路线

```
//Default route mapping
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Home", action = "Index", id = UrlParameter.Optional },
    new { controller = @"[^\.]*", action = @"[^\.]*" }
); 
```

显示我如何构建链接的代码：

> ```
>  <div id="main-content" title="AnimalBox" style="float:none;">
>         <% Html.DataList(Model.PriceListAnimals).Columns(7).Item(item =>
>                 {
>                     item.Template(galleryImage =>  
>                     {%>
>                         <div style="margin-left:20px; line-height:150%;">
>                             <span><%= Html.ActionLink(galleryImage.AnimalName,"List",new { @animal = galleryImage.AnimalName }) %></span>
>                         </div>  
>                         <%  });
>                 }).Render(); %>
>     </div> 
> ```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T02:09:12.673

Html.ActionLink 的重载是：

```
Html.ActionLink("linkText", "actionName", "controller", object routeValues, object HtmlAttributes) 
```

根据您所说，`mydirectory`=控制器和`List`=操作，对吗？如果是这样，请尝试：

```
<%= Html.ActionLink(galleryImage.AnimalName, "List", "mydirectory", new { @id = galleryImage.AnimalName }, null) %> 
```

这应该产生：

```
<a href="/mydirectory/list/quack">quack</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T04:38:39.830

您必须为像您的实例这样的特殊情况路由定义一个路由。由于您将“动物”作为参数传递，因此您应该创建一个路由来处理该实例。在您的 global.aspx（默认路由上方）中，创建如下内容：

```
routes.MapRoute(
    "Animal", // A distinct Route name
    "{controller}/{action}/{animal}", // URL with parameters
    new { controller = "MyDirectory", action = "List"}
); 
```

这将定义到动作列表上的 MyDirectory 控制器的路由，该路由具有**非可选**的动物参数。定义路由使您能够从 html 帮助程序和其他方法（重定向到操作等）生成干净的 URL。

# microchip - 将 PmodOLED 从 JB 移动到 JA 头文件 - 32MX4 (MPLAB X IDE)

> ID：11641225
> 
> 赞同：1
> 
> 时间：2012-07-25T00:43:12.000
> 
> 标签：microchip, mplab

我是微控制器编程的新手，我的第一个任务是使用 PmodWiFi 插件接受 WiFi 连接。我读到 WiFi 芯片的默认引脚/端口是 32MX4 上的 JB 接头。问题是我目前在 JB 标头中安装了 PmodOLED 插件，所以我想将它移到 JA 标头中。在`PmodOLED.h`（我已经导入到我的库中）中，我更改了以下几行以对应于 JA 标头而不是 JB 标头中的端口：

```
#define prtSelect   IOPORT_G 
#define prtDataCmd  IOPORT_B 
#define prtReset    IOPORT_D 
#define prtVbatCtrl IOPORT_D 
#define prtVddCtrl  IOPORT_B 

#define bitSelect   BIT_9 
#define bitDataCmd  BIT_15 
#define bitReset    BIT_5 
#define bitVbatCtrl BIT_4 
#define bitVddCtrl  BIT_14 
```

但是，当我运行将 PModOLED 附件插入 JA 标头的代码时，它没有响应并且屏幕为空白。如果您能告诉我如何修改我的代码以便可以在 JA 标头中安装 PmodOLED 插件，我将不胜感激。

提前感谢您的帮助，古维

# ldap - LDAP 服务器端排序 - 真的是个好主意吗？

> ID：11641229
> 
> 赞同：-6
> 
> 时间：2012-07-25T00:44:08.317
> 
> 标签：ldap, openldap

我正在玩弄在我的 OpenLDAP 服务器中使用服务器端排序。然而，当我也开始编写客户端代码时，我可以看到在这种情况下，它给我带来的只是客户端的一行排序代码。由于客户端是目前 4 个中的一个，很快将是 16 个 Tomcat，如果使用量激增，可能会达到数百个，因此在客户端进行排序对我来说实际上更有意义。我想知道 SSS 是否真的被认为是一个想法。我在这个案例中的搜索结果并不大，几十个而不是几百个。只是想知道它是否可能更像是一种武器而不是一种工具。

在 OpenLDAP 中，它与 VLV - Virtual List View 捆绑在一起，我有一天会需要它，所以它已经安装了：所以这确实是一个编程问题，而不仅仅是一个配置问题，因此不是 SF。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T16:48:02.173

[服务器端排序](https://www.rfc-editor.org/rfc/rfc2891)旨在供无法或不愿自己对结果进行排序的客户端使用；这在内存和 CPU mojo 有限的手持客户端中可能很有用。

服务器端排序的优点包括但不限于：

*   服务器可以对排序的处理施加时间限制
*   客户端可以指定服务器使用的[排序规则](http://www.ietf.org/rfc/rfc4517.txt)
*   如果客户端连接不安全，可以将专业品质的服务器配置为拒绝带有排序控制的请求
*   服务器可以强制执行资源限制，例如上述时间限制或管理限制
*   服务器可以对属性和排序请求控制本身实施访问限制；如果客户端无论如何都可以检索属性，这可能不是那么有效
*   服务器可能表明它太忙而无法执行排序或只是不愿意执行排序
*   可以将专业品质的服务器配置为拒绝所有客户端的搜索请求，但具有必要 mojo（特权、绑定 DN、IP 地址或其他）的客户端除外

缺点包括但不限于：

*   如果服务器软件无法限制同时处理的排序数量，服务器可能会因对来自多个客户端的大型结果集进行排序而不堪重负
*   客户端 API 必须支持服务器端排序请求控制和响应
*   将客户端配置为按自己的“排序规则”进行排序可能更容易；尽管这些可以添加到专业品质的可扩展服务器中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T22:01:37.173

为了回答我自己的问题，而不是减损 Terry 的回答，使用虚拟列表视图*需要*一个服务器端排序控件。

# objective-c - 根据switch添加tableview

> ID：11641233
> 
> 赞同：0
> 
> 时间：2012-07-25T00:44:35.617
> 
> 标签：objective-c, xcode, cocoa-touch

我有一个带有两个项目的标签栏，一个是带有开关的 ViewController，另一个是 Tableview，我想要做的是：

当用户点击按钮时，tableview 将获得一个新单元格......代码：

视图类.h：

```
#import <UIKit/UIKit.h>

@interface viewclass : UIViewController

@property (strong, nonatomic) IBOutlet UISwitch *myswitch;

@end 
```

视图类.m：

```
#import "viewclass.h"

@implementation viewclass

@synthesize myswitch;

- (void)viewDidUnload {

    [self setMyswitch:nil];
    [super viewDidUnload];
}

@end 
```

表视图类.h：

```
#import <UIKit/UIKit.h>

@interface tableviewclass : UITableViewController{

    NSMutableArray *list;
}

@end 
```

表视图类.m：

```
#import "tableviewclass.h"
#import "viewclass.h"

@implementation tableviewclass

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{

    classedasrespostas *testswitch;

    [super viewDidLoad];

    list = [[NSMutableArray alloc] init];

    if (testswitch.myswitch.on == YES) {
        [list addObject:@"myobject"];
    }

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [lista count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...

    return cell;
}

/*
// Override to support conditional editing of the table view.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}
*/

/*
// Override to support editing the table view.
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        // Delete the row from the data source
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }   
    else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
    }   
}
*/

/*
// Override to support rearranging the table view.
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
}
*/

/*
// Override to support conditional rearranging of the table view.
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the item to be re-orderable.
    return YES;
}
*/

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     */
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T00:52:18.173

这 ,`classedasrespostas *testswitch;`不创建对象；它只声明了一个将保存对象地址的指针。由于您没有为它分配任何东西，因此当您到达`if (testswitch.myswitch.on == YES) {`.

放在`NSLog(@"testswitch: %@", testswitch);`if 语句之前以查看问题。

# cluster-computing - Mahout ClusterDump - 显示 graphml 输出时的奇怪结果

> ID：11641236
> 
> 赞同：0
> 
> 时间：2012-07-25T00:45:01.867
> 
> 标签：cluster-computing, visualization, mahout, k-means

我一直在使用 Mahout 来使用 XML 和 SOLR 索引输入对文本文档进行 k-means 聚类。

聚类似乎有效，并且类似的文档确实被放在同一个 k-means 聚类中，这很棒。

但是，每当我使用 ClusterDump (--outputFormat GRAPH_ML) 显示 graphml 输出时，我都会得到一个显示所有簇的图，但每个元素都显示在其父簇的圆周周围，这意味着每个元素与质心的半径大致相同。

我期望元素根据它们彼此的相似性分散在整个集群中（如 Mahout 示例中所示）。

有没有人看到他们的 Mahout k-means 集群有类似的东西？我自己试图深入了解这一点，但任何提示或建议都会有很大帮助。

非常感谢，

P莫里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:32:51.427

请您解释一下您如何成功地使用 mahout 和 kmeans 算法对 solr 索引输入进行聚类？

顺便说一句，当我对 .txt 文件进行聚类时，我的输出（clusters_dump）如下所示：

> CL-0{n=0 c=[0:1.000, 1:1.000, 2:3.162, 3:1.000, 4:4.796, 6:1.000, 7:1.000, 8:1.000, 9:1.000, 10:1.000, 11:1.000, 12:4.690, 14:1.000, 15:11.446, 16:4.359] r=[]}
> 
> CL-1{n=0 c=[0:1.000, 1:1.000, 2:3.162, 3:1.000, 6:1.000, 7:1.000, 8:1.000, 9:1.000, 10:1.000, 11:1.000, 14:1.000, 15:11.446] r=[]}
> 
> CL-2{n=0 c=[4:1.000, 12:1.000, 13:8.315, 16:1.000] r=[]}

因为我指定了集群的数量 3。

# asp.net-mvc - 实体框架 - 获取外键关系的计数

> ID：11641250
> 
> 赞同：0
> 
> 时间：2012-07-25T00:48:53.973
> 
> 标签：asp.net-mvc, dry

我有一个简单的类别管理系统。

在我自动生成的 EF 实体中，我有两类相关性：

```
class Category {
    public EntityCollection<Member> Members { get; }
}
class Member {
    public Category ParentCategory { get; }
} 
```

我有一个业务规则，如果它有任何成员，它会阻止删除一个类别。我希望通过这样做来实现这一点：

```
if( category.Members.Count() > 0 ) // then disallow deletion 
```

但是，此调用始终返回零。

看来我需要先实际加载集合，这会导致数据库命中：

```
if( !category.Members.IsLoaded ) category.Members.Load();
if( category.Members.Count() > 0 ) // then disallow deletion. This works. 
```

我希望 EF 足够聪明，可以将初始`.Count()`调用转换为 SQL `SELECT COUNT(*) FROM Members WHERE Members.CategoryId = @parentCategoryId`，而不是实际加载成员实体并在内存中遍历它们。

有没有办法在 EF 中做到这一点，还是我需要定义一个 sproc 或自定义 SQL 来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T01:05:02.963

尝试

```
if ( category.Members.CreateSourceQuery().Count() > 0 ) 
```

# ios - 获取样式化 UIWebView 内容的大小 - 不太有效

> ID：11641252
> 
> 赞同：0
> 
> 时间：2012-07-25T00:49:03.943
> 
> 标签：ios, uiwebview

这似乎是一个常见问题，但我找不到合适的解决方案。我正在尝试重新调整一堆 UIWebView 的大小以适应它们的内容，但它似乎无法正常工作。到目前为止我找到的最好的解决方案是[这个 answer](https://stackoverflow.com/a/3937599/304786)，但它似乎只是偶尔在我的解决方案中起作用。`webViewDidFinishLoad:`这个想法是在委托方法中重新调整 UIWebView 的大小。但是，这仍然没有得到正确的尺寸。*如果我在之后* 的某个未定义时间触发更新`webViewDidFinishLoad:`，则内容的大小确实正确。

我将在下面描述我的情况，并将相关来源粘贴到[Gist](https://gist.github.com/3173830)上。

**问题描述**

我有一种情况，我从 JSON API 获取数据并在 webviews 中显示数据。API 返回一个对象数组，每个对象都有一个带有 HTML 格式文本的“内容”字段。设计师给出了一个结构，其中包含一个（大部分）隐藏视图，您可以向上滑动以显示该视图，其中包含所有内容的滚动视图，以非常特殊的方式格式化。

为了实现这一点，我有三个视图控制器：主视图控制器、在主视图控制器上向上滑动以显示的辅助视图控制器，以及显示来自 JSON API 结果的一项 html 格式内容的第三视图控制器.
二级视图控制器包含一个 UIScrollView 和一个三级视图控制器数组。每个第三视图控制器都包含一个 UIWebView 来显示 HTML 格式的内容，以及用于显示 JSON 对象的其他属性的标签。因为三级视图将显示在二级视图的 UIScrollView 内，所以三级视图的 UIWebView 需要重新调整大小以适应其内容并禁用用户交互，以防止混淆滚动视图中的滚动视图设想。

使所有这些工作的过程如下：

1.  首先，在主控制器 ViewDidLoad 上，加载并显示辅助视图和活动指示器，以便 UI 不会出现冻结
2.  接下来，从 JSON API 加载数据
3.  当来自 API 的数据已加载（通过委托通知）时，构造第三视图控制器，从加载的数据中设置它们的属性并将它们添加到辅助控制器的列表中。
4.  完成后，调用辅助控制器的设置方法。该方法循环遍历三级控制器列表并依次调用它们的设置方法
5.  每个第三级控制器的设置方法设置标签的文本，并使用`loadHTMLString:`预定义的 html 文件的内容设置 UIWebView 的内容，并替换为 JSON 对象的内容。
6.  **在三级控制器的`webViewDidFinishLoad:`委托方法上，使用[此答案](https://stackoverflow.com/a/3937599/304786)中的方法，根据内容大小重新调整 Web 视图的大小。**
7.  重新调整第三级控制器视图的大小以适合 Web 视图并定位位于 Web 视图下方的任何标签
8.  第三个控制器然后调用一个委托方法来通知第二个控制器它已经完成加载。二级控制器密切关注其第三级控制器中的哪些已完成加载。
9.  当所有三级控制器完成加载后，二级控制器循环遍历其列表并将三级视图添加到它的 UIScrollView 的内容中，同时调整框架和内容高度。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T02:49:48.670

如果您使用的是 iOS 5.0，您可能会使用 webview.scrollView.contentsize，否则您也可以通过 javascript 获取内容大小。

```
CGFloat newHeight = [[webView stringByEvaluatingJavaScriptFromString:@"document.body.offsetHeight;"] floatValue]; 
```

或者

```
CGFloat newHeight = [[webView stringByEvaluatingJavaScriptFromString:@"document.documentElement.scrollHeight;"] floatValue]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T16:41:38.670

我知道你有一个解决方案，但我自己只是解决了这个问题，我想出了一个简单而愚蠢的答案。

起初我`UIWebView`只会增长，但永远不会缩小。所以我开始尝试设置框架大小，但它会尝试在一个太小的框架上滚动，所以我`contentSize.height`每次加载一些东西时都将其设置为 1。我的完成负载看起来像这样

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {
    NSLog(@"--- webViewDidFinishLoad (pre sizeToFit) webview.frame = %@", NSStringFromCGRect(_detailsWebView.frame));
    NSLog(@"--- webViewDidFinishLoad (pre sizeToFit) scrollview.contentSize = %@", NSStringFromCGSize(_detailsWebView.scrollView.contentSize));
    [_detailsWebView sizeToFit];
    NSLog(@"--- webViewDidFinishLoad (post sizeToFit) scrollview.contentSize = %@", NSStringFromCGSize(_detailsWebView.scrollView.contentSize));
    NSLog(@"--- webViewDidFinishLoad (post sizeToFit) webview.frame = %@", NSStringFromCGRect(_detailsWebView.frame));
} 
```

但这给了我这样的输出

```
[8431:707] --- webViewDidFinishLoad (pre sizeToFit) webview.frame = {{20, 11}, {663, 757}}
[8431:707] --- webViewDidFinishLoad (pre sizeToFit) scrollview.contentSize = {663, 1}
[8431:707] --- webViewDidFinishLoad (post sizeToFit) scrollview.contentSize = {663, 92}
[8431:707] --- webViewDidFinishLoad (post sizeToFit) webview.frame = {{20, 11}, {663, 1}} 
```

现在只要我的“新”内容比我的旧内容大，它就可以工作，但如果内容缩小，就会出现问题。事实证明，以某种方式`sizeToFit`在更新`frame`webview 之前更新了`contentSize`

我可以通过在我调用之后手动更新来解决这个问题`frame`，最终，我只连续调用了两次。`contentSize``sizeToFit``sizeToFit`

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {
    [_detailsWebView sizeToFit];
    [_detailsWebView sizeToFit];
} 
```

它有效。我不能说我对这样的解决方案很满意，并且我正在努力让它变得更好，但它可以工作并且代码非常简单。

# java - Eclipse - 无法将 jar 添加到构建路径。jar 在项目的 lib 文件夹中，但不可见

> ID：11641254
> 
> 赞同：5
> 
> 时间：2012-07-25T00:49:20.730
> 
> 标签：java, eclipse, buildpath

我手动将我的 sql 连接器 jar 复制到我的 sql jdbc 项目的 lib 文件夹中。我在那个文件夹中已经有一些旧的 jars，并且之前也很容易添加到构建路径中。现在，我忘记了我是如何做到的，当我尝试将 jar 添加到构建路径时，我没有看到 lib 文件夹。怎么做？我希望我的 jar 成为我项目的一部分，而不是放在某个随机文件夹中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-10-09T19:43:02.327

使用项目资源管理器将 jar 直接粘贴到 Eclipse 中，然后尝试从 Build Path->Configure Build Path->Libraries 中“Add Jar”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T03:52:00.650

尝试去 Window > Preferences > Java > User Libraries 并添加指向 mysql 连接器的新用户库。然后将此库使用到您的项目中。但不要忘记删除 lib 文件夹中的旧 mysql 连接器 jar。试试这种方式.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T01:10:22.687

选择项目，然后从其弹出菜单中选择属性。在“属性”对话框中，

选择 Java 构建路径页面。

单击库选项卡。

您现在可以添加一个 JAR 文件，该文件包含在您的工作区或其他地方：

要添加工作区中的 JAR 文件，请单击 Add JARs 按钮

要添加外部 JAR 文件，请单击添加外部 JAR 按钮

在出现的对话框中，选择要添加的 JAR 文件。请注意，您可以一次添加多个 JAR。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T01:12:46.970

您可以删除与sql连接器jar相关的旧jar，然后将您需要的jar添加到构建路径中。如果您的项目是web项目，您可以将jar放入WEB-INF下名为lib的文件夹中。如果您的项目是 java 项目，你可以创建一个名为 lib 的文件夹，然后将一些 jars 放入其中。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-06-05T08:18:02.150

这是否得到解决 - 我有完全相同的问题。我在 project/src/lib 中有 3 个库，删除了其中 2 个，但现在想恢复它们。我仍然可以在构建路径对话框中看到我没有删除的 jar，但无论我做什么，我都无法恢复其他两个，因为 lib 文件夹没有显示。

# jquery - 通过ajax POST提交nicEdit文本编辑器的值，不起作用

> ID：11641255
> 
> 赞同：2
> 
> 时间：2012-07-25T00:49:27.443
> 
> 标签：jquery, ajax, forms, submit, nicedit

我找到了一些“解决方案”，但似乎没有什么对我有用。我正在使用 malsup 的 jquery 表单插件通过 POST 提交表单数据。表单元素之一是 nicEdit 框。这是我的代码：

html:

```
<div class="leftaligned">   
<h1>Add News:</h1>
<form enctype="multipart/form-data" id="addnewsform" action="addnewscode.php" method="POST">
<input type="hidden" name="isnewnews" value=1 />
<div class="missinginfo">
Please add a title and some content!
</div>
<h2>Title:</h2>
<input type="text" size="50" id="newtitle" name="newtitle">
<h2>Content:</h2>
<textarea style="width:590px; height:300px;" id="newcontent" name="newcontent"></textarea>
<br>
<div id="contentbuttons">
<input type="submit" value="Add News" class="submitnews" style="float:left;" /></form>
<input type="button" value="Cancel" onclick='parent.$.colorbox.close(); return false;'/>
</div> 
```

这是单击提交按钮时当前调用的内容：

```
<script>
$(document).ready(function() { 
var options = {

    beforeSubmit: function(arr, $form, options) {
        var title = document.getElementById("newtitle").value;
        var content = document.getElementById("newcontent").value;
        alert(content);
        var title = document.getElementById("newtitle").value;
        if(title == "" || content == "") {
            parent.$.fn.colorbox.resize({height:635});
            $(".missinginfo").show();
            setTimeout(function()     {$(".missinginfo").hide();parent.$.fn.colorbox.resize({height:610});},2000);
            return false;
        }

    },

    success:       showResponse  
}; 

$('#addnewsform').submit(function() { 
    $(this).ajaxSubmit(options); 

    return false; 
});

function showResponse(responseText, statusText, xhr, $form)  { 
    parent.onAddNewsSuccess();
}  
});
</script> 
```

我的#newcontent 文本区域是一个nicEdit 框。

alert(content) 什么都不显示，所以我知道我还需要做一些其他事情来获取 nicEdit 框中的文本以提交。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-07T18:45:32.893

（在问题编辑中回答。转换为社区 wiki 答案。请参阅[将问题的答案添加到问题本身时的适当操作是什么？](https://meta.stackoverflow.com/questions/267434/what-is-the-appropriate-action-when-the-answer-to-a-question-is-added-to-the-que)）

OP写道：

> 没关系，我使用以下方法解决了它：
> 
> ```
>  beforeSerialize: function($form, options) {
>     nicEditors.findEditor('newcontent').saveContent();
> }, 
> ```

# objective-c - 如何从 Xcode 中的 Guard Malloc 解释“未能分配给 VM”

> ID：11641258
> 
> 赞同：9
> 
> 时间：2012-07-25T00:50:01.683
> 
> 标签：objective-c, xcode

是否有关于使用 Guard Malloc 进行解释和解决问题的好教程？

我收到类似“无法为 VM 分配 262144 字节”的消息，但我不知道这意味着什么。最初我认为这是系统中缺少 RAM，但可能不是这样。如果这是一个问题，我迫切需要学习如何解释和捕捉错误。

我对 Guard Malloc 的另一个问题是，它是保护在项目的 C 代码中分配的内存（应该是对的？考虑到名称）还是仅适用于 Objective-C？我问的原因是我刚刚发现 NSZombieEnabled 仅适用于 Obj-C。

非常感谢帮助。几天来，我一直在处理可能的内存错误。而且我还不能为 iOS 编译 Valgrind。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T09:55:26.670

1) 我一直在使用保护 malloc 来记录分配失败，以解决地址空间耗尽的问题——每个分配都至少占用一页无法重用的地址空间。使用当前未分配的内存将在保护 malloc 中崩溃，不会导致分配失败。

2）顾名思义，guard malloc 代替了 malloc(3) 的实现，所以会检查使用 malloc 的 C 代码。

请注意，guard malloc 不是灵丹妙药。您仍然需要通过测试来暴露您的应用程序的错误；守卫 malloc 只会导致崩溃更早更可靠地发生。

您可能还想阅读“man libgmalloc”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-01T09:55:59.583

我看到它在 ios 模拟器上运行，并设置了 Guard Malloc。为模拟器选择 64 位设备停止了出现的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-29T15:11:44.607

正如您所怀疑的，“无法分配 VM”是缺少可用 RAM。

当我关闭我的 mac 上的所有其他程序时，我只能可靠地使用 Guard Malloc，即使这样，它有时也会因使用大量内存的贪婪程序而失败。

您需要：

1.  购买更多内存
2.  关闭 Mac 上所有其他正在运行的程序
3.  通过分析/优化减少程序使用的内存。

# android - 如何在 LIstview 中找出手指指向的项目？

> ID：11641260
> 
> 赞同：0
> 
> 时间：2012-07-25T00:50:16.937
> 
> 标签：android, listview, event-listener

我有一个列表视图和列表视图中的项目。我开始从上到下滑动手指。我手指的第一个触摸点不在任何列表视图项目上。（第一次触摸从屏幕上不同元素的列表视图开始）。然后我在列表视图项目上滑动手指。在这一点上，我可以打电话给哪些听众来找出我的手指在哪个项目上？每次我的手指从一个项目移动到另一个项目时，都会触发该事件，并且我会知道我的手指已经移动到另一个项目上。

我希望我的解释是有道理的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:49:12.667

根据我的理解，您想找出您选择/触摸的项目的名称。为此，您已经实施 setOnItemClickListener()

```
 listView.setOnItemClickListener(new OnItemClickListener() 
{
  String getSelectedItemOfList ;
  public void onItemClick(AdapterView<?> parent, View view, int position, long id) 
    {
          getSelectedItemOfList = (parent.getItemAtPosition(pos)).toString();
    // Here you will get the selected item name in the listview.          
      }
   }        
 }); 
```

希望这可以帮助... ：）

# c# - Protobuf.NET 并列出已知的对象子类型：不能添加 System.String？

> ID：11641262
> 
> 赞同：3
> 
> 时间：2012-07-25T00:51:06.707
> 
> 标签：c#, protobuf-net

我正在尝试为如下所示的类编写序列化代码：

```
public class EventMessage
{
    public Dictionary<string, object> Headers { get; set; }
    public object Body { get; set; }
} 
```

此类中的“对象”类型成员包含来自非常小的（基本上，仅限于一个程序集 + 基本 CLR 类型）类型集的对象。所以我想我可以简单地将这些类列为对象类的子类型，如下所示：

```
model.Add(typeof(object), false)
    .AddSubType(1, typeof(X))
    .AddSubType(2, typeof(Y))
    .... 
```

这样我就不必将类型信息嵌入到序列化消息中，因为对象类本身的反序列化很像 switch 语句 - 它检查消息中存在哪个标签并反序列化为适当的类型。我喜欢这样，因为这样我就可以自由地重命名类并在程序集中移动它们而不会破坏任何东西。

在我开始测试主要包含字符串数据的标头之前，这在我的测试中效果很好。我无法将字符串标记为对象的子类型，因为我遇到了这个异常：

```
Data of this type has inbuilt behaviour, and cannot be added to a model in this way: System.String 
```

有什么方法可以实现这种行为，还是必须在消息中嵌入类型信息才能序列化此类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T05:44:44.453

难道你不能添加一个“消息”或类似的类来封装你试图嵌入的字符串

```
class Message
{
  [ProtoMember(1)]
  string Data {get;set;}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T06:43:29.750

protobuf-net 存储*结构化*数据；`object`本质上不是结构化的，它不会让您简单地为 声明子类`object`，也不会让您对基本类型（如 ）进行猴子`string`，它具有非常特殊的序列化规则。

> 这在我的测试中效果很好

~~如果是这样，那就是一个错误；没有办法应该工作。完全没有。它当然不是受支持的方案，并且不能保证做正确的事情（它也可能严重破坏事情）。在这种情况下，我将更改代码以显式导致异常。我正在添加以下内容，以尽快修复：~~

嗯....我*虽然*这是一个无效的场景，但我的回归测试强调了一些“现有技术”，特别是：[为什么在 protobuf-net 中序列化的字符串实习在这个例子中不起作用？](https://stackoverflow.com/questions/6476958/why-string-interning-on-serialization-in-protobuf-net-does-not-work-in-this-exam)

（这就是为什么每次我回答一个重要的 protobuf-net 问题时，我都会将其添加为回归测试，所以我没有撒谎）

我想我不应该排除它，但**请想想小猫**：这*不是*我推荐的做法。不过，我想我现在不能杀死它。但强调：我***不能***启用它来添加`string`（等）作为子类型。仅考虑 API 消息类型，即您的自定义`class`/ `struct`s。

> 这样我就不必将类型信息嵌入到序列化消息中，因为对象类本身的反序列化很像 switch 语句

protobuf-net 通常也不嵌入类型信息；p 虽然有一些“动态”支持*确实*包含类型信息，但在这种情况下不需要它。

在不嵌入任何类型信息的情况下执行此操作的*受支持*方法是**封装**您想要的值，例如：

```
[TestFixture]
public class SO11641262
{
    [Test]
    public void Execute()
    {
        var model = TypeModel.Create();
        model.Add(typeof (FooData), true)
            .AddSubType(1, typeof (FooData<string>))
            .AddSubType(2, typeof (FooData<int>))
            .AddSubType(3, typeof (FooData<SomeOtherType>));

        var val = FooData.Create("abc");
        var clone = (FooData)model.DeepClone(val);
        Assert.AreEqual("abc", clone.ValueUntyped);
        Assert.AreEqual(typeof(string), clone.ItemType);

    }

    [ProtoContract]
    public abstract class FooData
    {
        public static FooData<T> Create<T>(T value)
        {
            return new FooData<T> {Value = value};
        }
        public abstract Type ItemType { get; }
        public abstract object ValueUntyped { get; set; }
    }
    [ProtoContract]
    public class FooData<T> : FooData
    {
        [ProtoMember(1)]
        public T Value { get; set; }

        public override Type ItemType
        {
            get { return typeof (T); }
        }
        public override object ValueUntyped
        {
            get { return Value; }
            set { Value = (T) value; }
        }
    }
    [ProtoContract]
    public class SomeOtherType {}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T14:24:14.610

嗯..我认为它是 CLR 原始类型、继承自对象还是某些自定义类型都没有关系。如果它被注册为继承类型，那么它应该以任何方式工作。据我一般理解，它以这种结构序列化

```
object
{
  A: {..., AA: {}}
  B: {..., BB: {}}
}

class A{ ... } 
class A: AA { ...}

class B {...}
class BB : B {...} 
```

它不应该影响它添加额外继承的任何东西，比如

```
object
{
  A: {..., AA: {}}
  B: {..., BB: {}}
  String: 'asdf'
} 
```

因为您没有更改字符串序列化，只是将 String 添加为继承对象。如果我想要*int*或任何其他原始类型，同样的问题

# image - Matlab：将图像划分为块并将水印放入每个块的 LSB

> ID：11641263
> 
> 赞同：0
> 
> 时间：2012-07-25T00:51:13.243
> 
> 标签：image, matlab, partitioning, watermark, block

我有一个 256x256 的图像，我想将它分成 16x16 块。然后我想将每个块的 LSB 设置为零。之后，我想使用带有用户密钥、图像 ID、图像的宽度和高度、块的索引和图像块 X' 的 MD5 函数（X'与图像块 X 相同，除了 LSB 女巫设置为零）作为参数。然后我想在 MD5 函数产生的哈希和我的水印的相应块之间执行 XOR 操作，并将其结果插入到我的图像块的 LSB 以获得带水印的图像块。我正在尝试使用 blockproc 函数，但我不知道我将在其中使用什么作为乐趣。我在网上找不到任何东西。谢谢你的帮助，对不起我的英语！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-15T11:38:11.107

您可以在本机模式下使用 imread。然后您可以将块转换为字节和位。然后您可以替换所需的位。

# ms-access - 在 Microsoft Access 中创建连接的图形表示

> ID：11641266
> 
> 赞同：1
> 
> 时间：2012-07-25T00:52:28.357
> 
> 标签：ms-access, vba, relationship, erd

我还有另一个 Microsoft Access 问题：

我正在建立一个联系人数据库，其中一些联系人彼此之间存在关系。例如，数据库中的两个联系人可能是兄弟姐妹，我会在数据库中相应地标记他们的关系。我可以用 SQL 生成一个报告，它会给我我想要的信息（即谁与什么人有关）。但是，问题不在于信息本身，而在于我想如何显示所述信息。

而不是以某种方式详细说明与相关人员相关的每个联系人的列表格式。我想以图形方式表示一个人的网络。因此，如果 John Doe 是 Scott Doe 的兄弟和 Jane Doe 的妹妹，那么 Access 报告将在中间显示 John Doe 的名字，然后从名字中引出两行指向 Scott Doe 和 Jane Doe。

我什至不确定在 Access 中是否可以使用这种图形表示，这就是为什么我很想知道是否有人曾经尝试过，或者是否有可能。然后，如何以编程方式进行设置？

我意识到这是一个相当开放的问题，但任何帮助将不胜感激。作为记录，我精通VBA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T01:53:07.763

您可以考虑引入树视图控件。而且由于你不知道有多少层，那么在我们的行业中，我们通常使用所谓的递归。

这里有一个填充树视图的代码示例：

[http://support.microsoft.com/kb/209891](http://support.microsoft.com/kb/209891)

# android - SectionIndexer - 与 ArrayAdapter 和 CustomObject 一起使用？

> ID：11641267
> 
> 赞同：2
> 
> 时间：2012-07-25T00:52:34.570
> 
> 标签：android, arraylist, android-listview, android-arrayadapter

我在这里关注一个很棒的编码示例：[这个 SO question](https://stackoverflow.com/questions/7129069/how-to-show-alphabetical-letters-on-side-of-android-listview)。它是关于实现一个 SectionIndexer 接口到一个数组适配器。

但是，如果您的 ArrayAdapter 传递的是 ArrayList< MyObject > 而不是 ArrayList< String >，您将如何做同样的事情？

例如，这是我的代码与他的代码不同的地方。他有：

```
class AlphabeticalAdapter extends ArrayAdapter<String> implements SectionIndexer {
private HashMap<String, Integer> alphaIndexer;
private String[] sections;

public AlphabeticalAdapter(Context c, int resource, List<String> data) {

    alphaIndexer = new HashMap<String, Integer>();
    for (int i = 0; i < data.size(); i++) {
        String s = data.get(i).substring(0, 1).toUpperCase();
        alphaIndexer.put(s, i);
    }

    // other stuff

 } 
```

我在使 for 循环适应我的情况时遇到问题。我不能像他那样测量尺寸。在他有上述内容的地方，我的适配器开始了。

```
 public class CustomAdapter extends ArrayAdapter<Items> implements
    SectionIndexer {

     public ItemAdapter(Context context, Items[] objects) { 
```

在他传递一个 ArrayList 的地方，我必须传递三个，但要做到这一点，必须包装在一个自定义对象类中。我要排序的 ArrayList 之一是名为“name”的类中的三个字段之一。这显然是一个字符串。

我想使用基于该名称字段的 SectionIndex 按字母顺序滚动浏览该名称。如何更改其他问题中的示例代码以在这种情况下工作？

他有“data.size()”的地方，我需要像“name.size()”这样的东西——我想？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:47:55.597

> 在他传递一个 ArrayList 的地方，我必须传递三个，但要做到这一点，必须包装在一个自定义对象类中。我要排序的 ArrayList 之一是名为“name”的类中的三个字段之一。

您没有三个`ArrayLists`，您有一个`ArrayList`由三个构建的自定义对象`ArrayLists`（因此大小是`List`您传递给适配器的大小）。从这个角度来看，您的代码中唯一的变化是使用该自定义对象的*名称*`Items`来构建这些部分：

```
for (int i = 0; i < data.size(); i++) {
    String s = data.get(i).name.substring(0, 1).toUpperCase();
    if (!alphaIndexer.containsKey(s)) {
        alphaIndexer.put(s, i);
    }
}
// ... 
```

没有其他变化。此外，您可能需要使用以下命令对传递给适配器的内容进行`List`排序`Items`：

```
Collections.sort(mData); 
```

你的`Items`类必须实现`Comparable<Items>`接口：

```
 class Items implements Comparable<Items> {
        String name;
        // ... rest of the code

        @Override
        public int compareTo(Items another) {   
            // I assume that you want to sort the data after the name field of the Items class
            return name.compareToIgnoreCase(another.name);
        }

    } 
```

# mysql - MySQL - 选择所有列，其中一列是 DISTINCT

> ID：11641270
> 
> 赞同：67
> 
> 时间：2012-07-25T00:52:59.333
> 
> 标签：mysql, sql

如果这个问题看起来太基本了，我很抱歉。
我已经浏览了整个互联网和StackOverflow以获得完整的解决方案，但没有找到任何我能理解的内容，并且无法自己编写，所以不得不在这里问。

我有一个 MySQL 数据库。
它有一个名为“posted”的表。
它有 8 列。

我需要输出这个结果：

```
SELECT DISTINCT link FROM posted WHERE ad='$key' ORDER BY day, month 
```

但我不仅需要“链接”列，还需要这一行的其他列。
就像这个查询返回的每一行一样，我还需要知道它在表中的“id”、“day”和“month”值等。

请告诉我我应该读什么来制作它，或者如何制作它。
请尽可能简单，因为我不是 MySQL 专家。

编辑：我试过这个：

```
SELECT DISTINCT link,id,day,month FROM posted WHERE ad='$key' ORDER BY day, month 
```

它不起作用。它返回太多行。假设有 10 行具有相同的链接，但不同的日/月/id。这个脚本将返回所有 10 个，我只想要第一个（对于这个链接）。

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-11-29T02:20:32.773

问题来自本能地认为那`DISTINCT`是列的本地预修饰符。

因此，您*“应该”*能够输入

`XXbadXX SELECT col1, DISTINCT col2 FROM mytable XXbadXX`

并让它返回`col`2 的唯一值。 **遗憾的是，没有。** `DISTINCT`实际上是 的全局后置修饰符`SELECT`，也就是说，与`SELECT ALL`（返回所有答案）相反，它是`SELECT DISTINCT`（返回所有唯一答案）。所以一个单一的`DISTINCT`作用于你给它的所有列。

这使得很难`DISTINCT`在单个列上使用，同时获取其他列，而不会做主要的极其丑陋的后空翻。

正确的答案是`GROUP BY`在您希望获得唯一答案的列上使用 a： **`SELECT col1, col2 FROM mytable GROUP BY col2`** 将为您提供任意唯一的`col2`行，以及它们的`col1`数据。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-25T01:21:17.657

> 我试过这个：
> 
> ```
> SELECT DISTINCT link,id,day,month FROM posted
>      WHERE ad='$key' ORDER BY day, month 
> ```
> 
> 它不起作用。它返回太多行。假设有 10 行具有相同的链接，但不同的日/月/id。这个脚本将返回所有 10 个，我只想要第一个（对于这个链接）。

你问的没有意义。

要么你想要 all of 的不同值`link, id, day, month`，要么你需要找到一个标准来选择`id, day, month`你想要使用的哪个值，如果你最多只想要一个不同的值`link`。

否则，您所追求的类似于MySQL 在[/](http://dev.mysql.com/doc/refman/5.5/en/group-by-hidden-columns.html) [statements](http://dev.mysql.com/doc/refman/5.5/en/group-by-hidden-columns.html)[中的隐藏列`GROUP BY``HAVING`](http://dev.mysql.com/doc/refman/5.5/en/group-by-hidden-columns.html)，这是非标准 SQL，实际上可能会很混乱。

`GROUP BY link`如果为给定`link`值选择任何行是有意义的，您实际上可以使用 a 。

或者，您可以使用子选择来选择`id`每个`link`值最小的行（如[本答案](https://stackoverflow.com/a/2739528/372643)中所述）：

```
 SELECT link, id, day, month FROM posted
     WHERE (link, id) IN
           (SELECT link, MIN(id) FROM posted ad='$key' GROUP BY link) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-06-04T03:26:20.307

```
SELECT Id, Link, Day, Month FROM Posted
WHERE Id IN(
   SELECT Min(Id) FROM Posted GROUP BY Link) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-25T02:46:52.650

如果您的要求是只显示具有 1 个链接的行，那么您可以使用以下内容：

```
SELECT * FROM posted WHERE link NOT IN 
(SELECT link FROM posted GROUP BY link HAVING COUNT(LINK) > 1) 
```

同样，这是假设您要删除任何具有重复链接的内容。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-06-04T04:44:33.353

我认为最好的解决方案是做一个子查询，然后将它加入到表中。子查询将返回表的主键。这是一个例子：

```
select *
from (
          SELECT row_number() over(partition by link order by day, month) row_id
          , *

          FROM posted 
          WHERE ad='$key' 
          ) x
where x.row_id = 1 
```

它的作用是 row_number 函数放置一个由导致查询的每个不同链接分区的数字序列。

通过只取那些 = 1 的 row_numbers，那么您只为每个链接返回 1 行。

更改标记为“1”的链接的方式是通过 row_number 函数中的 order-by 子句。

希望这可以帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-25T00:56:15.753

```
 SELECT OTHER_COLUMNS FROM posted WHERE link in (
  SELECT DISTINCT link FROM posted WHERE ad='$key' )
  ORDER BY day, month 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-25T01:10:17.740

如果您想要链接唯一的所有列：

```
SELECT * FROM posted WHERE link in
     (SELECT link FROM posted WHERE ad='$key' GROUP BY link); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-25T00:55:07.080

```
SELECT DISTINCT link,id,day,month FROM posted WHERE ad='$key' ORDER BY day, month 
```

或者

```
SELECT link,id,day,month FROM posted WHERE ad='$key' ORDER BY day, month 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-10-15T15:19:21.140

你想要的是以下内容：

```
SELECT DISTINCT * FROM posted WHERE ad='$key' GROUP BY link ORDER BY day, month 
```

例如，如果有 4 行链接相同，它将只选择一个（我假设第一个）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-04-14T13:59:41.917

我有一个类似的问题，也许对某人有帮助，例如 - 有 3 列的表

```
SELECT * FROM DataTable WHERE Data_text = 'test' GROUP BY Data_Name ORDER BY Data_Name ASC 
```

或者

```
SELECT Data_Id, Data_Text, Data_Name FROM DataTable WHERE Data_text = 'test' GROUP BY Data_Name ORDER BY Data_Name ASC 
```

两种方法对我有用。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-02-14T17:57:32.227

在 MySQL 中，您可以简单地使用“分组依据”。下面将选择 ALL，带有 DISTINCT "col"

```
SELECT *
FROM tbl
GROUP BY col 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-08-07T12:14:56.103

```
SELECT a.* FROM orders a INNER JOIN (SELECT course,MAX(id) as id FROM orders WHERE admission_id=".$id." GROUP BY course ) AS b ON a.course = b.course AND a.id = b.id 
```

使用上述查询，您将获得具有 where 条件的唯一记录

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2014-04-04T04:59:00.393

选择月份的日期列，以便每个链接只能获得一行，例如：

```
select link, min(datecolumn) from posted WHERE ad='$key' ORDER BY day, month 
```

祝你好运............

或者

u 如果您将日期列作为时间戳将格式转换为日期并在链接上执行不同的操作，以便您可以根据日期而不是日期时间获得不同的链接值

# css - 粘性页脚中的垂直滚动条

> ID：11641271
> 
> 赞同：2
> 
> 时间：2012-07-25T00:53:10.187
> 
> 标签：css, footer, scrollbars, sticky

我是一个 css 编码的新手（这非常显示） - 任何人都可以帮助我从我的[页面网站上](http://www.signature-online.net/chamberofcommerce)获取两个滚动条。

该 css 位于一个名为[http://www.signature-online.net/chamberofcommercemainstyle2.css](http://www.signature-online.net/chamberofcommercemainstyle2.css)的文件中，如果有人能帮助我再次扯掉我的头发，我将不胜感激！

页脚不粘，并且有两个垂直滚动条，我做了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T01:10:02.053

改变`main`你的`css`类，如下所示：

```
#main {
    overflow: hidden;
} 
```

你有`overflow: auto;`而且我们不希望这样，也删除`padding-bottom: 186px;`并更改你的`footer`类，只需删除`margin-top: -186px;`add `bottom: 0`，它应该如下所示：

```
#footer {
    bottom: 0;
    position: relative;
    height: 186px;
    clear: both;
    background-image: url(common/images/footer_mountains.png);
    background-repeat: repeat-x;
    background-position: center top;
    z-index: 600;
} 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T01:02:19.933

所以你需要做的是`#main`设置`overflow: hidden`并且`padding-bottom: 372px`你准备好了！

**编辑[1]：**对不起，你不需要设置`#wrapper` `margin-bottom: 186px`，我的错。

# java - Nexus 是归档版本（jar-with-dependencies、WAR 文件、tar.gz、zip 等）的正确位置吗？

> ID：11641273
> 
> 赞同：9
> 
> 时间：2012-07-25T00:53:24.967
> 
> 标签：java, maven, jar, nexus

据我了解，Nexus 负责存储通过 pom.xml 引用其他依赖 JAR 的 JAR 文件。反过来，原始 JAR 文件也可以用作依赖项。

但是，我们应该在 Nexus 中存储发布工件吗？这些是永远不会用作依赖项的文件。它们包括 jar-with-dependencies、WAR 文件、zip/tar.gz 文件等。存储它们的正确位置是什么？

像[http://archive.apache.org/dist/](http://archive.apache.org/dist/)这样的简单文件系统 HTTP 服务器似乎是正确的想法。但 Nexus 确实只是最重要的经理。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T06:03:36.413

Nexus 绝对是存储这些工件的好地方，因为它早已超越了纯粹的 Maven 存储库服务器。它为您提供了一个不错的用户界面，用于下载、安全等等。

如果您已经在使用 Nexus，我绝对不会浪费时间使用另一个服务器或基础架构组件来存储这些工件。尤其是当您使用 Maven 构建工件时。那么部署几乎是免费的..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:48:57.370

我同意曼瑟的观点。

从我的角度来看，每次你发布一些东西时，它都应该在你的存储库中（Nexus、Archiva、Artifactory，无论你想要什么）。

这对于企业存储库来说是正确的，但当您在 ​​Internet 上发布某些内容时尤其如此，以保持构建的版本可以使用（而不是准备构建；），这是您的 SCM 工作）。即使它是一个带有依赖项的 jar，它也是一种分发版本的便捷方式。

唯一不好的一点是在 repo 中占据很大的位置，复制 jars（用于战争、ear 或 jar-with-dependencies）。但这是（目前）准备执行完整版本的唯一方法。

# algorithm - 找出这张图片中可能的正方形的数量

> ID：11641274
> 
> 赞同：7
> 
> 时间：2012-07-25T00:53:36.723
> 
> 标签：algorithm, language-agnostic, rules

以下是我今天遇到的一个视觉问题。这里的问题只是图片中有多少个正方形。

您将如何通过代码解决这样的问题？此外，如果不处理实际图片，您将如何对其进行建模？

![方块拼图](../Images/e159715f2cf25f7583a3115b60b76af9.png)

PS：我觉得实际的分辨率需要一个规则来定义什么可以被视为正方形。类似于说边的长度相等并且可以由任意数量的线段组成，只要它们适合封闭的正方形。不过，我不确定您如何代表一个职位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T02:10:53.487

如果您可以将其建模为矩阵，那么您需要的唯一信息就是顶点的位置。然后为每个顶点检查同一行中的所有顶点，并为每个找到的顶点检查它们的列。然后删除处理过的顶点。逐列执行相同的操作。最坏情况的复杂度是 n! （？）

***我添加了代码以进行澄清。***

```
public class SqFinder {
        int calculateSquares(int[][] vertices, int n) {
            int count = 0;
            for (int i = 0; i < n; i++) {
                for (int j = 0; j < n; j++) {
                    if (vertices[i][j] == 1) {
                        for (int k = 1; k < n-j; k++) {
                            if (i + k < n && vertices[i][j+k] == 1 && vertices[i + k][j] == 1 && vertices[i + k][j + k] == 1)
                                count++;
                        }
                    }
                    vertices[i][j] =0;
                }
            }
            return count;
        }

        public static void main(String[] args) {
            SqFinder a = new SqFinder();
    //      int [][] test = {{1,1,1,1},{1,1,1,1},{1,1,1,1},{1,1,1,1}};
            int [][] test = {{1,1,1},{1,1,1},{1,1,1}};
            System.out.println(a.calculateSquares(test, 3));
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T01:17:04.950

编码：你所拥有的是一个网络。将其编码为连接位于离散二维空间中的节点的网络。

问题实际上是要求您计算满足以下属性的路径数：

1.  有3转
2.  每个这样的转弯之间的长度是相等的
3.  路径的起点和终点是相同的。

这种情况下的转折是（a）如果先前的移动导致 y 坐标发生变化，则该移动导致 x 坐标发生变化；或 (b) 如果先前的移动导致 x 坐标发生变化，则此移动会导致 y 坐标发生变化。

至于跟踪该过程：我在此页面上看到的最佳建议是简单地遍历每个节点，并为每个这样的节点检查所有可能的正方形大小。这应该避免进一步跟踪的需要。

如果你有一个更聪明的方法，只要你的路径总是左手或右手，每个正方形都由起始顶点和边长唯一标识。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T03:41:17.253

最简单的方法是遍历每个顶点，并检查它是否可以是宽度为 1、宽度为 2、宽度为 3 等的正方形的左上角顶点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T02:05:34.427

这样的事情应该这样做：

```
int line_width = 1; //the width of the square line
int squares = 0;
for (int x = 0; x < width; ++x)
{
    for (int y = 0; y < height; ++y)
    {
        for (int size = line_width; x + size < width && y + size < height; ++x)
        {
            if (valid_square_at(x, y, x + size, y + size, line_width))
            {
                ++squares;
            }
        }
    }
}
return squares;

bool valid_square_at(x_0, y_0, x_1, y_1, width) 
{
    return valid_line(x_0, y_0, x_0_ x_1, width)
        && valid_line(x_0, y_0, x_1_ x_0, width)
        && valid_line(x_0, y_1, x_1_ x_1, width)
        && valid_line(x_1, y_0, x_1_ x_1, width);
}

bool valid_line(x_0, y_0, x_1, y_1, width) 
{
    //check that all pixel in that line are black...
} 
```

基本上对于图片中的每个点，您检查每个可能大小的正方形，如果该大小的正方形从该像素开始。这很容易，因为你的方块都与边界“对齐”......问题是如果它们不是......

# c++ - 在头文件的数组中定义资源 ID

> ID：11641281
> 
> 赞同：0
> 
> 时间：2012-07-25T00:54:29.973
> 
> 标签：c++, visual-studio-2010

我试图在头文件中以矢量格式定义一个连续的 RID 范围：

```
 #include<vector>
    #include<stdlib.h>
    #include<iostream>

    #define vector<int> IDM_POPUP_LAST (5);
    for(i = 0; i < IDM_POPUP_LAST.size(); i++)
    IDM_POPUP_LAST [i] = i + 90; 
```

这里有什么遗漏吗。我有一组错误：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T01:04:00.560

您正在尝试拥有一个静态初始化的数据，并且希望它位于 a`vector`的对象中（如果我理解正确的话）。不幸的是，这在 C++ 中是不可能的。但是，您可以探索其他选项：

1）使用静态数组，如下所示：

```
int IDM_POPUP_LAST[] = {1, 2, 3, 4, 5}; 
```

2）有一个在早期`main()`或由虚拟类的构造函数初始化的向量，如下所示：

```
vector<int> IDM_POPUP_LAST(5);
struct DummyInitializer
{
  DummyInitializer()
  {
    // code to initialize the vector IDM_POPUP_LAST
  }
} global_var_so_the_constructor_is_called_before_main; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T02:42:30.107

你的变量声明是错误的。变量通常使用以下语法声明：

```
std::vector<int> IDM_POPUP_LAST (5); 
```

除此之外，`for`不能简单地将其放在函数之外。

话虽如此，这可能是您用作全局变量的东西。解决此问题的一种方法是将其设为类的静态成员，并使用函数对其进行初始化。当您决定需要它们时，您甚至可以在此处添加其他类型的 id，并根据需要将初始化它们添加到函数中：

```
//resource.h

struct ResourceIDs {
    static std::vector<int> menus;
    static void init();

    //Let's add in three cursors
    static std::vector<int> cursors;
};

//NOTE - these are all better off in a .cpp
#include "resources.h" //if in the cpp

std::vector<int> ResourceIDs::menus (5); //define the menus member
std::vector<int> ResourceIDs::cursors (3); //define the cursors member

void ResourceIDs::init() {
    for (int i = 0; i < menus.size(); ++i) //note the type mismatch since vector
        menus[i] = i + 90;                 //uses size_t, which is unsigned

    //let's do cursors starting at 150
    for (int i = 0; i < cursors.size(); ++i)
        cursors[i] = i + 150;
} 
```

现在你只需要确保初始化它们，然后你就可以在任何需要的地方使用它们：

```
#include <windows.h>
#include "resource.h"

int main() {
    ResourceIDs::init();
    //create window, message loop, yada yada
}

LRESULT CALLBACK WndProc (HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam) {
    switch (msg) {
        case WM_COMMAND:
        //check the menu ids using ResourceIDs::menus[x]

        default:
            return DefWindowProc (hwnd, msg, wParam, lParam);
    }
} 
```

这里与#define-ing id 应该看起来的代码的唯一区别是`ResourceIDs::init()`在开头的调用`main`、需要`ResourceIDs::`和数组语法。

# javascript - 增加jQuery中的计数器

> ID：11641287
> 
> 赞同：1
> 
> 时间：2012-07-25T00:55:10.997
> 
> 标签：javascript, jquery, counter

计数器不工作

mypost 是输入值

```
$("#post").click(function() {
    var cont = 0;
    value = $("#mypost").val()
    $("#1").append(value);
    $("#mypost").val('');
    var like = $('<button>like</button>', {
        click: function() {
            cont++;
            $('#1').append(cont);
        }
    });
    $('#1').append(like);
    $('#1').append('</br>');
});​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T01:06:06.113

将事件侦听器添加为`$("<tag />")`构造函数中的属性时，未正确连接事件侦听器。（尽管[文档中`$()`提到了道具中的事件](http://api.jquery.com/jQuery/#jQuery2)。我相信这与未连接到 DOM 的元素有关；胡乱猜测。）

将其添加到以下行时似乎有效`.click(function)`。

```
var like = $('<button>like</button>')
    .click(function() {
        cont++;
        $('#1').append(cont);
    }); 
```

编辑：错过了`#mypost`使用`.val()`. 更新了 jsfiddle 以使用`<input />`.

[http://jsfiddle.net/joelpurra/bJa29/](http://jsfiddle.net/joelpurra/bJa29/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-25T01:02:48.893

不确定这是否会有所帮助，但 ID 必须以字母开头。

> ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

有关详细信息，请参见[此处（http://www.w3.org - 基本 HTML 数据类型）](http://www.w3.org/TR/html4/types.html)。

# xpath - xpath 子 foo 出现在子 bar 之前的所有节点

> ID：11641289
> 
> 赞同：1
> 
> 时间：2012-07-25T00:55:25.343
> 
> 标签：xpath

```
<list>
    <head>Fruit</head>
    <type>Consumables</type>
    <item>Apple</item>
    <item>Banana</item>
    <item>Coffee</item>
<list>
<list>
    <head>Airports</head>
    <label>SFO</label>
    <item>San Francisco</item>
    <label>LHR</label>
    <item>London</item>
<list> 
```

匹配a出现在第一个 之前的所有`<list>`节点。上面的第一个列表不匹配；第二个会。`<label>``<item>`

我可以假设至少有一个`<item>`. 它可能是唯一的孩子。

（XPath/XSLT 1.0）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T04:00:14.350

**使用**：

```
 /*/list[*[self::label or self::item][1][self::label]] 
```

**这可能比使用反向轴更有效，因为评估会在第一个找到的子节点处停止，`list`即`label`or`item`**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T01:13:10.897

啊，我明白了。到达时不要期待**和**停下来。而是转到第一个并**使用**.`label``item``item`**`preceding-sibling`**

 **```
match="list[item[1]/preceding-sibling::label]" 
```**

# jquery - 使用 jquery 预加载动态加载的图像

> ID：11641292
> 
> 赞同：3
> 
> 时间：2012-07-25T00:56:04.543
> 
> 标签：jquery, preload

这些图像是动态加载的：

```
<div id="gallery-images" class="gallery-control">
    <ul>
        <img class="galleryImgs" data-src="images/test-image-1.jpg" src="images/test-image-1-s.jpg" />
        <img class="galleryImgs" data-src="images/test-image-2.jpg" src="images/test-image-2-s.jpg" />
        <img class="galleryImgs" data-src="images/test-image-3.jpg" src="images/test-image-3-s.jpg" />      
    </ul>
</div> 
```

我正在尝试从每个 img 标签的“data-src”属性中预加载图像 URL。这是我写的代码：

```
$('.galleryImgs').each(function(){
    $('<img/>')[0].src = $(this).attr("data-src");
}); 
```

目前无法运行动态脚本，因此图像标签当前是静态的。这段代码看起来好像应该可以工作还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T02:54:08.370

我用我最初评论的想法做了一个快速的片段，它应该可以跨域工作：

```
$(function() {
    //creates an imgcacher hidden element
    $('<div/>', {id: 'imgcacher', style: 'display:none;'}).appendTo('body');
    var cacher = $('#imgcacher'); //caches the cacher selector

    //appends the images to the DOM for caching
    $('.galleryImgs').each(function(){
        $('<img/>', {src: $(this).data('src'), class: "precachedImg"}).appendTo(cacher);
    });

    //clean up the DOM after the images are fully loaded and cached
    $('.precachedImg').promise().done(function() {
        cacher.remove();
    });
});​ 
```

[**演示**](http://jsfiddle.net/ult_combo/gB8FV/3/)
请注意，如果您的连接速度不够快，第二张图像可能会稍大，无法在 5 秒内加载，但至少应该部分加载。

`$.get`当我测试它时，它不适用于在 Chrome 上缓存图像，因此上面的解决方案是我的首选。它适用于我以任何连接速度和文件大小测试过的所有浏览器。现代浏览器只会请求一次图像资源，并将其与页面中的所有其他欺骗并行显示，而不会像 ajax 请求那样生成额外的请求。

此外，它还是一个动态的、可扩展的和干净的解决方案。但是，如果您更喜欢简单，它具有“相同”的最终用户体验，而不仅仅是`display:none`最初将图像添加到 DOM。显然这会不必要地弄乱 DOM，因此我会使用上面的代码片段。

另外，这里有一个稍微简化的版本：

```
$(function() {
    //appends the images to the DOM for caching
    $('.galleryImgs').each(function(){
        $('<img/>', {src: $(this).data('src'), class: 'precachedImg', style: 'display:none;'}).appendTo('body');
    });

    //clean up the DOM as the images are loaded and cached
    $('.precachedImg').load(function() {
        $(this).remove();
    });
}); 
```

[**小提琴**](http://jsfiddle.net/ult_combo/gB8FV/7/)

# c++ - Qt 我可以在构造函数中将信号/插槽连接到 self 吗？

> ID：11641297
> 
> 赞同：6
> 
> 时间：2012-07-25T00:56:42.040
> 
> 标签：c++, qt, signals-slots

编辑：与信号/插槽/连接无关。问题是构造函数调用构造函数。

可能有更好的方法来做到这一点 - 我有兴趣听到那些......

我有从 QLabel 派生的 MyClass。我想在信号中传递更多关于派生类的数据，而不是基本信号。所以我做了一个槽来拦截 customContextMenuRequested 信号并发出一个有更多数据的修改过的信号。

当我尝试在构造函数中连接这个信号时，我的插槽永远不会被调用。但是，如果我移动策略并将线路连接到父小部件（不是类层次结构父级），以便它们在 MyClass 完全构建后执行，那么我的插槽将被调用。但我总是希望为这个类连接它，这似乎是我想要在它的构造函数中的东西，而不是指望父类记住这样做。

有什么我做错了吗？还是向信号添加数据的更好方法？

```
MyClass::MyClass() : QLabel()
{
    QFont currFont = font();
    currFont.setPointSize(15);
    setFont(currFont);

    setBackgroundRole(QPalette::Mid);

    std::cout << "connecting customContextMenuRequested" << std::endl;
    /** PROBLEM START */
    setContextMenuPolicy(Qt::CustomContextMenu);

    // Is there anything wrong with connecting from "this" to "this" in a constructor?

    QObject::connect(this, SIGNAL(customContextMenuRequested(const QPoint&)),
                     this, SLOT(addCellDataToMenuContextRequest(const QPoint&)));
     /* PROBLEM END **/
}

MyClass::MyClass(QString &cellString, int row, int col)
    : QLabel(cellString)
{
    MyClass();
    setRow(row);
    setCol(col);

}

// This one is a slot
void MyClass::addCellDataToMenuContextRequest(const QPoint& pos)
{
        // This doesn't get printed if I connect in my constructor,
        // but it does print if I do the same connect from a parent widget.
    std::cout << "called addCellDataToMenuContextRequest" << std::endl;

    emit customContextMenuRequestedForCell(pos, _row, _col);
} 
```

所以我希望父小部件只寻找 customContextMenuRequestedForCell 但现在，父小部件似乎也需要负责 customContextMenuRequested。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T02:28:20.827

实际上，如果您使用 C++11，您可以调用（某种）另一个构造函数。它被称为[委托构造函数](http://en.wikipedia.org/wiki/C++11#Object_construction_improvement)。但我认为这不会让问题消失。您的问题似乎是元对象在`connect()`被调用时没有完全构造。此外，您可能需要迁移到 Qt 5 才能使 C++11 正常工作。

解决方案是延迟连接，直到对象完全构建。您可以[启动一个间隔为零的计时器](http://qt-project.org/doc/qt-4.8/qobject.html#startTimer)。它将在您的对象完全构造之后触发下一个事件循环处理。

然后在您的 timerEvent 中，建立连接并终止计时器。

**编辑：**没有看到您的编辑。看起来你找到了解决方案。那就忽略这个吧。:)

顺便提一句。你没有调用另一个构造函数。您创建了一个临时 MyClass 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T02:35:54.437

使这个“更干净”的一种方法是在 MyClass 中重新实现 QWidget::mouseReleaseEvent()。实现它的方法是，如果传递给 mouseReleaseEvent 的 QMouseEvent 类型不是右键单击鼠标释放，则调用 QLabel::mouseReleaseEvent(event)。如果是鼠标右键释放事件，您可以发出自定义信号。这提供了使用 QLabel/QWidget 提供的现有鼠标按钮释放处理代码的好处，同时允许您拦截您想要发出自定义信号的一种情况。

*编辑*哦，一定要在 mouseReleaseEvent 处理自定义案例后调用 event->accept() 。

# zend-framework - 如何在zend框架中使用phpexcel

> ID：11641298
> 
> 赞同：2
> 
> 时间：2012-07-25T00:56:42.213
> 
> 标签：zend-framework, phpexcel, zend-autoloader

我需要从 excel 导入数据，我决定使用 PHPExcel，但是当我在我的网络中需要它时，出现了一些警告：

```
 Warning: 
    include_once(PHPExcel\Shared\ZipStreamWrapper.php) [<a href='function.include-once'>function.include-once</a>]: 
failed to open stream: No such file or directory in D:\www\LearningCenter\library\Zend\Loader.php on line 146 
```

这是我的代码。：

```
public function getUserFromExcel($path){
    echo $path;
    require_once 'Excel/PHPExcel.php'; 
    echo $path;
} 
```

我的 webapp structre 是：

库 Zend Excel 其他-第三方库

自动加载器似乎有问题。

我阅读了几篇文章但没有找到解决方案。

我的最终目标是从 excel 文件中读取日期：有人可以给我一些关于 ether 如何在 zend 中使用 phpexcel 或如何使用 zend 本身从 excel 导入数据的建议。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T03:53:56.887

将PHPExcel库复制到你的`/library`目录中，结构应该如下

```
/library
    /PHPExcel
    /PHPExcel.php 
```

然后将其添加到您的 application.ini

```
autoloaderNamespaces[] = "PHPExcel_"
autoloaderNamespaces[] = "PHPExcel" 
```

它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T03:45:12.403

将您的库添加到库文件夹。（图书馆/PHPExcel）

添新`autoloaderNamespaces.phpexcel = "PHPExcel_"`

您可以使用库方法使用`PHPExcel_IOFactory::createReader($inputFileType);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-18T21:24:38.513

该问题与自动加载 PHPExcel 类有关。我建议避免自动加载 PHPExcel 类的问题，以使用 zf2 模块[MvlabsPHPExcel](https://github.com/mvlabs/MvlabsPHPExcel)，它可以让您轻松地将 [PHPOffice/PHPExcel][2] 库集成到 zend 框架 2 中。

# java - Java 直接进入 Press any key to continue

> ID：11641301
> 
> 赞同：-1
> 
> 时间：2012-07-25T00:57:19.170
> 
> 标签：java, mysql

我不确定发生了什么，但我更新了我的代码，然后当我运行它时，它一直在“按任意键继续......”。我想我完全取消了最后一次更新，但我不确定，因为它没有任何好处。

我的代码： http: [//pastebin.com/r2xVDhgC](http://pastebin.com/r2xVDhgC)

谢谢！:)

新代码： http: [//pastebin.com/RiGDWkKQ](http://pastebin.com/RiGDWkKQ)

（抱歉，stackoverflow 的代码让我很烦恼。我无法让它工作，哈哈。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T00:59:37.957

这个查询是错误的：

```
String give = "SELECT `given` FROM `has_voted` " + 
              "WHERE `ip` LIKE '+thisIp.getHostAddress()'"; 
```

大概你想要这个：

```
String give = "SELECT `given` FROM `has_voted` " + 
              "WHERE `ip` = '" + thisIp.getHostAddress() + "'"; 
```

你也没有`thisIp`在任何地方定义。

# android - Android：从主应用程序错误调用的应用程序内按回

> ID：11641310
> 
> 赞同：0
> 
> 时间：2012-07-25T00:58:57.790
> 
> 标签：android

我有一个应用程序，它又可以调用另一个应用程序。在第二个应用程序中，用户可以执行一些操作，然后将数据返回到我的主应用程序。一切正常，直到用户进入第二个应用程序并且没有执行预期的流程，而是按下后退按钮。

这将在我的主应用程序的 OnActivityResult 方法中引发空指针异常，因为当然没有数据。

你如何处理这样的事情？此外，我无权访问第二个应用程序代码，因此我的应用程序只是调用第三方软件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T01:25:06.017

我会检查有问题的变量是否为空，如果它不尝试访问它。

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if(data != null) {
        List<String> words = data.getStringArrayListExtra("words");
        if(words != null) {
            // Do something
        }
    }
} 
```

如果这不是一个选项，您最好通过发布相关代码的示例来提供一些上下文，因为我只能猜测当前的情况。

# ruby - 变量赋值 "x, = 1,2" 在 Ruby 中是如何工作的？

> ID：11641311
> 
> 赞同：3
> 
> 时间：2012-07-25T00:59:03.450
> 
> 标签：ruby, syntax, variable-assignment

执行以下代码后变量 a 和 b 的值：

```
a = 1, 2, 3 
b, = 1, 2, 3 
```

结果是

```
 a =  [1, 2, 3]
 b =  1 
```

为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T01:10:51.713

逗号使 ruby​​ 认为您将进行并行赋值，其中 b 和另一个变量将通过相同的表达式进行赋值，如下所示：

```
b, c = 1, 2 
```

结果 b == 1 和 c == 2。

所以这里 ruby​​ 将右边的第一个值赋给 b，并期望将右边的下一个值赋给另一个变量，但是没有找到，所以它丢弃了剩余的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T01:10:17.437

这是 ruby​​ 的并行分配。 表示将`a = 1, 2, 3`数组放入. 表示把 1 放到, 把 2 放到 ? 和 3 到 ?。如果你试试`[1, 2, 3]``a``b, = 1, 2, 3``b`

```
b,c,d = 1,2,3 
```

你明白我的意思

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:00:56.070

在 Ruby 中，您可以进行并行分配。例如：a, b = 1, 2 表示 a == 1 和 b == 2 在此示例中：a, b, = 1, 2, 3\. a == 1 和 b == 2 并且没有变量分配值 3。在此示例中：a，b = 1。a == 1，b 为 nil

# opa - 在 opa 中实现回调

> ID：11641312
> 
> 赞同：1
> 
> 时间：2012-07-25T00:59:14.587
> 
> 标签：opa

我正在尝试在 opa 中实现回调，因此当变量在服务器端更新时，客户端会立即获得更新后的值。

我知道我可以通过网络做到这一点：

```
Network.add_callback(update_function, room) 
```

但是，作为一项学习练习，我想自己实现该功能。

我的第一个想法是创建一个`void->void`函数列表`list(void->void)`，这是我遇到的第一个问题，即缺少可变状态和变量。所以我不能将任何回调函数添加到创建的列表中。

这引出了我的第一个问题：我如何在没有可变状态的情况下工作？我不认为自己是函数式编程的新手，但通常我只会重新分配一个变量

IE

```
x = ['a','b','c']
function addVal(val){
    x = List.add(val,x)
} 
```

但这在 opa 中似乎不合法。

没有变量或可变数据结构怎么可能工作？我看不出没有可变状态如何实现任何动态内容。

我决定尝试通过将回调函数列表存储在数据库中来解决这个问题：

```
database callbacks{
  list(void -> void) functions
} 
```

但我得到了错误

```
Elements of type void -> void cannot be stored in the database 
```

这引出了我的第二个问题：

有没有比 doc.opalang.org 更好的 opa 资源？我无法找到有关数据库中允许的类型的任何信息。

总而言之：

1.  如何在不使用可变状态或变量的情况下构建一个实际执行任何操作的程序？
2.  opa 数据库中允许哪些类型？
3.  除了 doc.opalang.org 之外，还有其他有用的 opa 资源吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T08:37:27.487

并为昆汀回答添加示例：

*   阅读您引用的 Network.add_callback 实现：[https ://github.com/MLstate/opalang/blob/v1903/stdlib/core/rpc/core/network.opa#L178](https://github.com/MLstate/opalang/blob/v1903/stdlib/core/rpc/core/network.opa#L178)
*   阅读会话模块上方的有用评论：[https ://github.com/MLstate/opalang/blob/v1903/stdlib/core/rpc/core/session.opa](https://github.com/MLstate/opalang/blob/v1903/stdlib/core/rpc/core/session.opa)
*   看看这个线程，这是一个类似于你试图用你的列表做的问题：[Opa : howo to opera stringmap (and other map)](https://stackoverflow.com/questions/10586367/opa-howo-to-manipulate-stringmap-and-other-map)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T08:29:27.707

1) Opa 是一种函数式语言，因此第一个示例在 Opa 中确实是不合法的。

```
x = ['a', 'b', 'c'] 
```

不声明变量 x，而是声明 ident`x`和 value之间的绑定`['a', 'b', 'c']`。

即使 Opa 是一种函数式语言，您也可以[像在 OpaDoc 上看到的那样](http://doc.opalang.org/module/stdlib.core/Mutable)具有可变性。但是正如您所知，可变值不是线程安全的，即您可以被抢占 beetwen get 和 set，这意味着您的状态不一致。

因此，要解决此问题，您可以使用[Session](http://doc.opalang.org/module/stdlib.core.rpc.core/Session)。基本上，会话是一个状态和一个消息处理程序。会话处理程序被线程安全地执行以更新会话状态。会话的另一个优点是可以由任何系统实体无缝地序列化和操作。

你的例子可以写成：

```
// A channel which can receive add message 
channel({string add}) s = Session.make(['a', 'b', 'c'], 
      function(oldstate, message){
        match(message){
          case {add : value} : {set : List.add(value, oldstate)} //setting the new state
          .... // other message
        }
      }
    )

function addVal(value){
  Session.send(s, {add : value}
} 
```

2）您只能在数据库中存储纯粹的数据结构。

# haskell - 'do' 符号中的新范围

> ID：11641313
> 
> 赞同：2
> 
> 时间：2012-07-25T00:59:27.087
> 
> 标签：haskell, monads

我正在尝试编写一个递归函数来改变 Data.Vector.Unboxed.Mutable 'Vector'，尽管我认为这个问题适用于任何一元代码。

作为一个人为的例子：

```
import Data.Vector.Unboxed as U
import Data.Vector.Unboxed.Mutable as M
import Control.Monad
import Control.Monad.ST
import Control.Monad.Primitive

f :: U.Vector Int -> U.Vector Int
f x = runST $ do
        y <- U.thaw x
        add1 y 0
        U.freeze y

add1 :: (PrimMonad m) => MVector (PrimState m) Int -> Int -> m()
add1 v i | i == M.length v = return ()
add1 v i = do
     c <- M.unsafeRead v i
     M.unsafeWrite v i (c + 1)
     add1 v (i+1) 
```

但是，v 在每次递归调用中都不会改变。我希望能够删除 v 作为函数的参数并将“add1”内联到 f 中，但我需要“y”在范围内。

我可以更接近一步是通过更改 add1 （并保持 f 相同），以便 v 不会在递归中传递：

```
add1 :: (PrimMonad m) => MVector (PrimState m) Int -> m()
add1 v = do add1_ 0
    where len = M.length v
          add1_ i | i == len = do return ()
          add1_ i = do
                x <- M.unsafeRead v i
                M.unsafeWrite v i (x + 1)
                add1_ (i+1) 
```

我真正想要的是完全内联 add1 。这是一个尚未完全编译的解决方案：

```
f x = let len = U.length x
          y = U.thaw x
          add1 i | i == len = return ()
          add1 i = do
             y' <- y
             c <- M.unsafeRead y' i
             M.unsafeWrite y' i (c+1)
             add1 (i+1)
      in runST $ do
            add1 0
            y' <- y
            U.freeze y' 
```

GHC 错误：

```
couldn't match type 'm0' with 'ST s'
couldn't match type 's' with 'PrimState m0' 
```

抛开错误不谈，这还不是最优的：我不想在每个 do 语句中都做 (y' <- y) （尤其是当 add1 是递归的时候）。我真的很希望 y'（y 的“非单子”版本）在范围内。有没有办法做到这一点？

（如果我以某种方式严重滥用单子，我深表歉意）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T01:49:59.133

这个怎么样？

```
f :: U.Vector Int -> U.Vector Int
f x = runST $ do
    y <- U.thaw x
    let add1 i | i == length x = return ()
               | otherwise     = do
            c <- M.unsafeRead y i
            M.unsafeWrite y i (c+1)
            add1 (i+1)
    add1 0
    U.freeze y 
```

# c++ - 如何使 cplex 不输出到终端

> ID：11641316
> 
> 赞同：11
> 
> 时间：2012-07-25T01:00:03.310
> 
> 标签：c++, mathematical-optimization, linear-programming, cplex, ilog

我正在使用 IBM cplex 优化器来解决优化问题，并且我不想要优化器所做的所有终端打印。在 IloCplex 或 IloModel 类中是否有成员将其关闭？这些是关于削减和迭代的印刷品。打印到终端是昂贵的，我的问题最终将是数百万个变量，我不想在这些多余的输出上浪费时间。谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-25T17:17:54.307

使用 cplex/concert，您可以完全关闭 cplex 到控制台的日志记录

```
cpx.setOut(env.getNullStream()) 
```

其中 cpx 是 IloCplex 对象。您还可以使用[setOut](https://www.ibm.com/support/knowledgecenter/SSSA5P_12.8.0/ilog.odms.cplex.help/refcppcplex/html/classes/IloAlgorithm.html#method_setOut)函数将日志重定向到文件。

有几个 cplex 参数可以控制记录的内容，例如 MIPInterval 将设置在行之间搜索的 MIP 节点的数量。将 MIPDisplay 设置为 0 将关闭切割的显示，除非找到新的解决方案，而 MIPDisplay 为 5 将显示有关每个 lp 子问题的详细信息。

与日志记录相关的参数包括 MIPInterval MIPDisplay SimDisplay BarDisplay NetDisplay

您可以使用 setParam 函数设置参数。

```
cpx.setParam(IloCplex::MIPInterval, 1000) 
```

# c++ - python字符串使用特殊字符发送到c++ dll，崩溃

> ID：11641325
> 
> 赞同：0
> 
> 时间：2012-07-25T01:01:53.117
> 
> 标签：c++, python, dll, special-characters

我有一个调用 c++ dll 方法的 python 方法，其中包含 printf()。

典型调用：

```
method ("something") 
```

但现在我必须能够调用类似的东西

```
method("%x %y %z") 
```

它正在崩溃。

我用一个非常简单的方法逃脱了 %

```
if msg:            
    msg = msg.replace( "%", "/%" ) 
```

它似乎适用于只有一个的情况。（不确切知道它对文本本身有什么影响......）

所以我测试了不止一个，我得到了一个调试断言失败 - 表达式（“不正确的格式说明符”，0）。

编辑：接受答案后，解决方案：

```
if msg:            
   msg = msg.replace( "%", "%%" ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T01:06:11.230

**反斜杠**是转义字符。试试这个：

```
if msg:            
  msg = msg.replace( "%", "\%" ) 
```

您的无效格式说明符错误来自`%z or %y`not begin valid tokens。

* * *

你试图做的有点令人困惑。据我所知，您正在尝试执行以下任一操作：

```
// Insert your string elements in python, before calling C functions.
method("%s %s %s" % ("Hello", "python", "world!") 
```

或这个：

```
// Set the string format in python and pass to C function
method("%%s %%s %%s")

// In C function
char buf[128];
// Print your string with your custom format.
printf(GetStringFormatFromPython(), "Hello", "python", "world!"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T01:07:21.023

逃避百分号`sprintf()`等的方法是将它们加倍（即`%%`）。但是代码本身需要通过使用`"%s"`作为第一个参数而不是传递的字符串来修复。

# regex - 流水线 sed 调用和多个 sed 表达式在效率上是否存在差异？

> ID：11641333
> 
> 赞同：5
> 
> 时间：2012-07-25T01:03:10.673
> 
> 标签：regex, performance, bash, sed

我对 bash 中的 sed 效率有疑问。我有一系列流水线的 sed 语句，例如：

```
var1="Some string of text"

var2=$(echo "$var1" | sed 's/pattern1/replacement1/g' | sed 's/pattern2/replacement2/g' | sed 's/pattern3/replacement3/g' | sed 's/pattern4/replacement4' | sed 's/pattern5/replacement5/g') 
```

假设没有输入依赖于早期 sed 管道的编辑输出，我是否最好用表达式语句编写上述脚本？例如：

```
var2=$(echo "$var1" | sed -e's/pattern1/replacement1/g' -e's/pattern2/replacement2/g' -e's/pattern3/replacement3/g' -e's/pattern4/replacement4/g' -e's/pattern5/replacement5/g') 
```

这里有什么效率可以提高吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T01:30:54.593

### 简答

使用多个表达式将比使用多个管道更快，因为您在创建管道和分叉 sed 进程方面有额外的开销。但是，在实践中很少有足够的差异。

### 基准

使用多个表达式比多个管道更快，但对于普通用例来说可能还不够重要。使用您的示例，执行速度的平均差异仅为千分之二秒，这不足以令人兴奋。

```
# Average run with multiple pipelines.
$ time {
    echo "$var1" | 
    sed 's/pattern1/replacement1/g' |
    sed 's/pattern2/replacement2/g' |
    sed 's/pattern3/replacement3/g' |
    sed 's/pattern4/replacement4/g' |
    sed 's/pattern5/replacement5/g'
}
Some string of text

real        0m0.007s
user        0m0.000s
sys         0m0.004s 
```

* * *

```
# Average run with multiple expressions.
$ time {
    echo "$var1" | sed \
    -e 's/pattern1/replacement1/g' \
    -e 's/pattern2/replacement2/g' \
    -e 's/pattern3/replacement3/g' \
    -e 's/pattern4/replacement4/g' \
    -e 's/pattern5/replacement5/g'
}
Some string of text

real        0m0.005s
user        0m0.000s
sys         0m0.000s 
```

当然，这不是针对大型输入文件、数千个输入文件或在具有数万次迭代的循环中运行的测试。尽管如此，似乎可以肯定地说，差异小到足以与大多数常见情况无关。

不常见的情况是另一回事。在这种情况下，基准测试将帮助您确定用内联表达式替换管道是否是*该用例*的有价值的优化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T01:12:17.750

sed 中的大部分开销往往是处理正则表达式，但您在每个示例中处理相同数量的正则表达式。

考虑到操作系统需要为管道的每个元素构造 std 和 stdout。Sed 还占用系统中的内存，操作系统必须为每个 sed 实例分配该内存——无论是一个实例还是四个实例。

这是我的评估：

```
$ jot -r 1000000 1 10000 | time sed 's/1/_/g' | time sed 's/2/_/g' | time sed 's/3/_/g' | time sed 's/4/_/g' >/dev/null 
        2.38 real         0.84 user         0.01 sys
        2.38 real         0.84 user         0.01 sys
        2.39 real         0.85 user         0.01 sys
        2.39 real         0.85 user         0.01 sys
$ jot -r 1000000 1 10000 | time sed 's/1/_/g;s/2/_/g;s/3/_/g;s/4/_/g' >/dev/null
        2.71 real         2.57 user         0.02 sys
$ jot -r 1000000 1 10000 | time sed 's/1/_/g;s/2/_/g;s/3/_/g;s/4/_/g' >/dev/null
        2.71 real         2.56 user         0.02 sys
$ jot -r 1000000 1 10000 | time sed 's/1/_/g;s/2/_/g;s/3/_/g;s/4/_/g' >/dev/null
        2.71 real         2.57 user         0.02 sys
$ jot -r 1000000 1 10000 | time sed 's/1/_/g;s/2/_/g;s/3/_/g;s/4/_/g' >/dev/null
        2.74 real         2.57 user         0.02 sys
$ dc
.84 2* .85 2* + p
3.38
$ 
```

并且由于 3.38 > 2.57，如果您使用单个 sed 实例，则占用的时间更少。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T01:04:42.620

是的。您将避免每次重新启动 sed 的开销。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T01:14:05.970

您可能可以衡量效率以衡量不同之处。也许使用`time`命令。根据经验， -e 会更有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-16T15:27:54.937

正如 ghoti 的回答中所述，您的示例在任何一种情况下都具有相同数量的正则表达式（单独调用`sed`vs 一系列`-e`表达式），但操作系统开销包括管道和进程设置以及`sed`. 对于少数调用，操作系统开销不值得担心，但如果数量是数千或更多，则可能是。

无论如何，除了计算机效率之外，程序员的效率通常是一个更重要的问题。到目前为止显示的两种方式都笨拙且进入缓慢。`sed`使用分号分隔的命令列表而不是许多单独的`-e`字符串更容易（至少使用 GNU sed） 。下面是一个例子。

```
$ var1="Some p1 string p2 of p3 text p4 etc"
$ var2=$(echo "$var1" | sed 's/p1/a1/g; s/p2/b2/g; s/p3/c3/g; s/p4/d4/; s/p5/e5/g')
$ echo $var2
Some a1 string b2 of c3 text d4 etc 
```

不幸的是，我没有在文档中看到分号作为 sed-command-separator `sed`，并且不知道这在 GNU sed 之外的其他版本中是否可用。

# php - 将 ASP.NET 代码翻译成 PHP

> ID：11641337
> 
> 赞同：-2
> 
> 时间：2012-07-25T01:03:53.163
> 
> 标签：php, asp.net, asp.net-mvc

我正在阅读本教程。

[http://ben.onfabrik.com/posts/pagedown-markdown-editor-custom-image-dialog](http://ben.onfabrik.com/posts/pagedown-markdown-editor-custom-image-dialog)

最后是 ASP.NET 代码

```
[HttpPost]
public ActionResult EditorUpload(MediaEditorUploadModel model)
{           
    string result;
    var serializer = new JavaScriptSerializer();

    if (model.File.IsValidFile() && model.File.IsImage()) {
        // upload the file

        result = serializer.Serialize(
            new { success = true, imagePath = "http://{the url of the uploaded image}"});
    } else {
        result = serializer.Serialize(
            new { success = false, message = "Invalid image file"});
    }

    return Content(result); // IMPORTANT to return as HTML
} 
```

但我不知道，我必须如何用 PHP 响应它。谁能帮我把这段代码翻译成PHP？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T01:54:02.967

首先，我不会假装我很了解 ASP.NET。因此，基于我对您提供的代码的浏览。它实际上看起来可能是一种语言，在我看来至少对任何给定的脚本类型都不奇怪。对我来说看起来像面向对象的代码。但那是一个静音点。

总体而言，代码似乎在做的是实例化另一个类，我认为这是您更愿意查看的大部分代码。但是从这个小片段中，它使用类来验证是否找到了文件，并且在这种情况下确实是一个图像。如果是，则根据其在服务器上的位置提供 URL。如果没有给出错误。它还以 JSON 格式输出，因此 JavaScript 可以提取并使用它，例如 AJAX 请求。

也就是说，通过 PHP 可以通过 [http://php.net/manual/en/function.file-exists.php验证文件是否在您的服务器上](http://php.net/manual/en/function.file-exists.php)

然后根据您运行的 PHP 版本，您可以使用 [http://php.net/manual/en/function.finfo-file.php](http://php.net/manual/en/function.finfo-file.php)（如果是较新的 php 版本）或 [http://php.net/manual/en/ function.mime-content-type.php](http://php.net/manual/en/function.mime-content-type.php)（旧的 php 版本）

要获取文件类型，您可以在其中使用您在 ASP snipplet 中提供的基于这些的 php 执行类似的 if-else。您将输出一个 json_encoded 数组来表示有效或良好。

# android-layout - 布局 xml 文档中的 Android“工具”命名空间

> ID：11641340
> 
> 赞同：34
> 
> 时间：2012-07-25T01:04:12.853
> 
> 标签：android-layout, namespaces, textview, preview

根据这里的问题，

[Android布局文件中的“工具：上下文”是什么？](https://stackoverflow.com/questions/11078487/android-whats-toolscontext-in-layout-files/11110969#11110969)

'tools' 命名空间引用 (xmlns:tools="http://schemas.android.com/tools") 最近开始出现在我的布局中，我想了解更多。原始帖子仅描述了“工具：上下文”属性，但我也注意到当我为列表视图指定预览布局项时出现“工具：列表项”属性的用法，即

```
<ListView
    android:id="@+id/lvCustomer"
    tools:listitem="@layout/customer_list_item" >
</ListView> 
```

还有更多元素吗？

将我带到这个“工具”命名空间的原因是，在 Eclipse 中使用布局设计器时，我希望能够拥有“仅预览”文本（即在 TextView 或 EditText 中）。

目前，我在安排布局时分配“文本”或“提示”属性来预览文本......但我总是必须记住从代码中清除预览值。

理想情况下，而不是

```
<string name="preview_customer_name">Billy Bob's Roadhouse Pub</string>

...

<TextView
    android:id="@+id/tvCustomerName"
    android:text="@string/preview_customer_name"
</TextView> 
```

有一个类似的东西：

```
<TextView
    android:id="@+id/tvCustomerName"
    tools:previewText="@string/preview_customer_name"
</TextView> 
```

谢谢-

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-10-03T21:59:05.050

我们刚刚在 Android Studio 0.2.11 中添加了对此类设计时属性的支持。有关更多信息，请参阅[http://tools.android.com/tips/layout-designtime-attributes](http://tools.android.com/tips/layout-designtime-attributes)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-09-24T01:28:30.320

仅将它们视为设计时助手。它们不会在运行时的实际视图渲染中得到处理。

例如，您想在 android studio 上工作时在布局设计中设置某些视图的背景，以便您可以清楚地区分该特定视图的位置。所以您通常会这样做

```
android:background="@color/<some-color>" 
```

现在的风险是有时我们忘记删除该颜色并且它会以 apk 的形式发送。相反，您可以执行以下操作：

```
tools:background="@color/<some-color>" 
```

这些更改将是 android studio 本地的，并且永远不会转移到 apk。

并查看[http://tools.android.com/tech-docs/tools-attributes](http://tools.android.com/tech-docs/tools-attributes)了解更多选项。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-17T17:28:14.090

`tool`在图形布局中设置对象时会找到属性。

Listview（在图形模式下）->右键单击->预览列表内容->选择布局...

产生：

```
tools:listitem="@layout/customer_list_item" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-23T12:31:53.917

请参阅下面的布局 XML。有 2 个名称空间在使用“ **xmlns:android** ”和“ **xmlns:tools** ”。

**当开发人员想要定义仅在预览或设计时使用的占位符内容时，使用**工具命名空间。**当我们编译应用程序时，工具命名空间被删除。**

 **所以在下面的代码中，我想显示仅在设计时可见的占位符图像（**image_empty**），而**image1**将是应用程序启动时显示的实际图像

[![在此处输入图像描述](../Images/38757680f20482c336f88409a620efd0.png)](https://i.stack.imgur.com/t1kGt.png)**

# jquery - TinyMCE + Fancybox (AJAX) 让我的布局陷入困境

> ID：11641343
> 
> 赞同：1
> 
> 时间：2012-07-25T01:04:27.080
> 
> 标签：jquery, ajax, tinymce, fancybox

![如您所见，左边的那个（没有初始化的 TinyMCE）工作得很好。 右边的那个（它有多个初始化的 TinyMCE）很不靠谱。](../Images/79c0de43b0d079b682d43d2102748ce6.png)

[左边和右边是同一页，只有右边显示了TinyMCE初始化后所有飞出Fancybox顶部的元素]

[查看实时示例](http://startech1.org/dev/sbir/)

我当前的设置有使用 AJAX 加载 PHP 页面的 Fancybox。页面选项卡（如上所示）是通过堆叠 DIV 并在左侧导航中的一个 LI 的 onclick 事件时将请求的一个向前移动来实现的。所有内部元素都是绝对定位的，定义了上/下和左/右。当 TinyMCE 不可用时，此设置可以正常工作。

当我初始化 TinyMCE 时，一切都乱套了。我偶尔会让它正确加载（在多个浏览器上），但在大多数情况下，它的作用类似于右上角的图像。我已经在谷歌上搜索了几个小时没有运气。我什至不知道从哪里开始。任何建议都会很棒！

HTML：

```
<div id="popup">
  <header>
    <a id="admin-link" class="fancybox" href="/dev/sbir/inc/login.php">[login]</a>
    <h1 id="head">Promote Value of SBIR</h1>
  </header>

  <ul id="nav">
    <li onclick="javascript:shiftUpContent(&quot;content_0&quot;);"><a href="#">Provide Success Stories</a></li>
    <li id="last"></li>
</ul>

  <div id="content">
    <div class="content" id="start">
      <h1>Directions</h1>
      <p>To view information on Promote Value of SBIR, select one of the sub-categories to the left.</p>
  </div>

  <div id="content_0" class="content">
    <h1>Provide Success Stories</h1>
    <p>Give Overview Presentation</p>
<ul>
  <li>It is a typical government contract</li>
  <li>It is competitive and I have to "beat someone else out"</li>
  <li>I don't have a chance against the big government contractors</li>
</ul>
<p>Other promotional strategies could include:</p>
<ul>
  <li>Conversations with current/past award winners</li>
  <li>Dr. Google assignments or in vivo browsing with client</li>
</ul>
<h2>Training Classes</h2>
<p>Search "SBIR Training", "SBIR Conferences", "SBIR Calendar" or "SBIR and name of an agency i.e. USDA, Navy, Army, etc" Some SBIR consultants give training classes from time to time as a way to solicit clients.</p>
<h2>External Content</h2>
<p><span style="text-decoration: underline;"><a href="/dev/sbir/www.zyn.com" target="_blank">www.zyn.</a>com</span><br> <a href="/dev/sbir/www.sbir.gov" target="_blank">www.sbir.guv</a></p>
</div>
</div> 
```

JavaScript：

```
/* navigate through tabs of pop-up */
function shiftUpContent(id){
    topContent.style.zIndex = '5';
    if((topContent = document.getElementById(id)) === null){ return; }

    topContent.style.zIndex = '9998';
} 
```

jQuery插件初始化：

```
$(document).ready(function() {
    $(".fancybox").fancybox({
        fitToView       : true,
        nextClick       : false,
        closeClick      : false,
        arrows          : false,
        mouseWheel      : false,
        width           : '773px',
        height          : '630px',
        type            : 'ajax',
        beforeShow      : function(){ 
            topContent  = document.getElementById("start");
            document.title  = titleRoot;
            $("#popup .fancybox").fancybox({
                fitToView       : true,
                autoSize        : true,
                nextClick       : false,
                closeClick      : false,
                arrows          : false,
                mouseWheel      : false,
                type            : 'iframe',
                ajax            : {
                                    type    : 'POST',
                                    cache   : false,
                                    success : function(data){
                                        $.fancybox(data);
                                    }
                                  }
            });
            tinyMCE.init({
                mode        : "textareas",
                relative_urls   : false,
                constrain_menus : true
            });
        }
    });
}); 
```

我试图尽可能多地去除不相关的代码，但不知道问题所在，很难知道需要留下什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:22:15.870

好吧，经过大约 7 个小时的调试，我仍然一无所获。有时设置有效，有时无效。

我的修复最终是返回 iframe 而不是 AJAX 来加载花式框。将 TinyMCE 实例与父页面完全隔离意味着每次关闭花式框时它们都会完全死掉（一切都像梦一样工作。我将不得不这样做。

使用此代码：

```
var i, t = tinyMCE.editors;
for (i in t){
    if (t.hasOwnProperty(i)){
        t[i].remove();
    }
} 
```

我能够在fancybox 上的关闭之前删除所有实例，但这似乎对解决我的问题没有任何影响。

# java - 在布局之间切换并保持内容显示

> ID：11641346
> 
> 赞同：0
> 
> 时间：2012-07-25T01:04:52.353
> 
> 标签：java, android, android-layout

在我的主布局（mainlayout）中，我显示了一些基于用户操作动态设置的文本和图像。对于一个特定的按钮单击，我需要显示另一个布局（secondlayout）的内容。我这样做使用：

```
 setContentView(R.layout.secondlayout); 
```

在第二个布局中，我有另一个按钮用于返回主布局，再次使用：

```
 setContentView(R.layout.mainlayout); 
```

问题在于再次显示主布局时，我显示的所有文本和图像现在都消失了。

如何返回主布局并仍然显示我正在显示的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T01:13:48.313

不要那样做。`setContentView()`意味着在您的`onCreate()`方法中调用一次。但是，有几种合理的方法可以做到这一点，

1.  将每个布局封装在一个片段中，然后根据需要显示/隐藏每个片段。
2.  将两个布局捆绑到一个布局中，并通过调用`setVisibility()`布局的最外层容器来显示/隐藏布局的每个部分。

# ruby-on-rails - Ruby on Rails 3：has_and_belongs_to_many 两个不同的模型

> ID：11641347
> 
> 赞同：0
> 
> 时间：2012-07-25T01:04:54.867
> 
> 标签：ruby-on-rails, associations

我有两个模型；团队和项目。我正在尝试创建的应用程序允许团队创建一个新项目。有时，一个团队可以与另一个团队进行联合项目。

那么我应该在它们之间使用什么正确的关联呢？现在，我有

团队.rb

```
has_many :projects 
```

项目.rb

```
belongs_to :team 
```

我不确定“has_and_belongs_to_many”关联是否会起作用，因为[RoR 指南](http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association)使用两个模型加上一个弱模型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T01:18:03.173

如果您还像这样创建连接表，则可以将 has_and_belongs_to_many 关联与两个模型一起使用：

```
class AddTeamsProjectsJoinTable < ActiveRecord::Migration
  def self.up
    create_table :teams_projects, :id => false do |t|
    t.integer :teams_id
    t.integer :projects_id
  end
end

  def self.down
    drop_table :teams_projects
  end
end 
```

然后在你的模型中：

团队.rb

```
has_and_belongs_to_many :projects 
```

项目.rb

```
has_and_belongs_to_many :teams 
```

然后您可以使用@team.projects 访问一个团队的所有项目，或者使用@project.teams 访问一个项目的所有团队

# r - ggplot2中的圆形图，线段在r中连接

> ID：11641356
> 
> 赞同：15
> 
> 时间：2012-07-25T01:06:22.773
> 
> 标签：r, ggplot2

我正在尝试创建一个圆形图并被困在一个点：

```
dat1 <- data.frame (xvar = 1:10, y = 6, ymin = 4, ymax = 4.5) 
```

使用这些数据，我可以在 ggplot2 中生成圆形带状图

```
require(ggplot2) 
 ggplot(dat1, aes(x=xvar, y=y)) +  geom_ribbon(aes(ymin=ymin, ymax=ymax),
  col = "blue", fill = "blue2") + ylim (c(0,6)) + coord_polar() 
```

![](../Images/3068fa6f7f2f19ef1eaffc69e7a40d8d.png)

不过我想要更多。

我想使用以下数据用不同的颜色和标签填充功能区的片段。

```
 filld <- data.frame (start = c(1, 4, 6, 7.5, 8, 9), end = c(4, 6, 7.5, 8, 9, 10),
                         label = c("A", "B", "C", "A", "C", "D"))
  filld
##    start  end label
## 1   1.0  4.0     A
## 2   4.0  6.0     B
## 3   6.0  7.5     C
## 4   7.5  8.0     A
## 5   8.0  9.0     C
## 6   9.0 10.0     D 
```

功能区将根据标签变量填充不同的颜色。例如，段 A 将从 1 开始并在 4 结束。然后段 B 将从 6 开始和结束并填充不同的颜色。具有相同标签的段（例如 A 和 C）将按线连接。

生成的图将如下所示： ![](../Images/30cdc071dc1d26ed4496b6d355c8b225.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-25T02:39:01.383

这是一个例子：

```
filld$p <- rowMeans(subset(filld, select = c(start, end)))
ggplot(filld, aes(xmin = start, xmax = end, ymin = 4, ymax = 5, fill = label)) + 
  geom_rect() + 
  geom_segment(data = subset(filld, label %in% label[duplicated(label)]),
               aes(x = p, y = 0, xend = p, yend = 4, colour = label),
               size = 2, show_guide = FALSE) +
  geom_text(aes(x = p, y = 4.5, label = label), colour = "white", size = 10) +
  coord_polar() + 
  scale_y_continuous(limits = c(0, 5)) 
```

![](../Images/12bfe5ab5eaebde6f3444b7720689f5b.png)

*更新*

我不推荐这样的东西：

```
filld <- data.frame (start = c(1, 4, 6, 7.5, 8, 9), end = c(4, 6, 7.5, 8, 9, 10),
                     label = c("A", "B", "C", "A", "C", "D"))
filld$p <- rowMeans(subset(filld, select = c(start, end)))
filld <- merge(filld, ddply(filld, .(label), summarize, p2 = mean(p)))

lnd <- subset(filld, label %in% label[duplicated(label)])
lnd <- ddply(lnd, .(label), function(x) {
  x <- seq(x$p[1], x$p[2], length = 100)
  y <- 4.5 + ((x - mean(x))^2 - (x[1]-mean(x))^2) / (x[1]-mean(x))^2 * 3 + sin(x*3*pi) * 0.1
  data.frame(x, y)
})

p <- ggplot(filld, aes(xmin = start, xmax = end, ymin = 4, ymax = 5, colour = label, fill = label)) + 
  geom_line(aes(x, y, xmin = NULL, ymin = NULL, xmax = NULL, ymax = NULL), data = lnd, size = 2) +
  geom_rect() + 
  geom_text(aes(x = p, y = 4.5, label = label), colour = "white", size = 10) +
  coord_polar() + 
  scale_y_continuous(limits = c(0, 5))
p 
```

![](../Images/47d9d21f55314b13354b5d4732f95a8b.png)

也许，你想要的超出了ggplot2的范围。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-25T09:59:18.963

看看[ggbio](http://tengfei.github.com/ggbio/)。这个包将 ggplot2 和图形语法扩展到序列数据（生物信息学），但它们似乎可以解决您的问题（例如，请参见[此处](http://tengfei.github.com/ggbio/blog/2012/04/12/circle/)）。查看包的[源代码](https://github.com/tengfei/ggbio)可能会引导您找到更通用的解决方案。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-25T01:23:47.180

添加 ymin 等来填充 d

```
fd <- data.frame(filld, ymin = 4, y =6, ymax = 4.5) 
```

然后使用`geom_rect`与列`label`作为`fill`和`colour`美学

```
 ggplot(fd, aes(x=start,xmin = start, xmax = end, y=y)) +  
   geom_rect(aes(ymin=ymin, ymax=ymax, fill = label )) + 
   ylim (c(0,6)) + 
   coord_polar() 
```

![](../Images/0f19485ccf268d192d575817fd18365d.png)

添加以下行：

```
## calculate the midpoint for each segment
fd$xmid <- apply(fd[,1:2],1,mean)
## get the replicate id for the labels (what occurence is this)
library(plyr)
library(reshape2)
fd1 <- ddply(fd, .(label), mutate, id = 1:length(xmid))
## reshape to wide, subsetting only with more than one rep
.lines <- na.omit(dcast(fd1, label~id, value.var = 'xmid'))
## add a mid point between the mid points
.lines$mid <- apply(.lines[,2:3],1,mean)
## reshape to long, and add some y values 
ld <- data.frame(arrange(melt(.lines,value.name = 'x'), label, x), y = rep(c(4,3,4),2))

ggplot(fd) +  
  geom_rect(aes(x=start,xmin = start, xmax = end, y=y,ymin=ymin, ymax=ymax, fill = label )) + 
  ylim (c(0,6)) + 
  coord_polar() + geom_path(data = ld, aes(x=x,y=y,colour = label)) 
```

![](../Images/a3a5bd13f75dc83aff2d35f608d5a6b2.png)

线条很丑，但在那里！

# ruby-on-rails - 如何使用 MongoDB 中的聚合框架执行此查询？

> ID：11641358
> 
> 赞同：1
> 
> 时间：2012-07-25T01:06:33.793
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongodb

我正在尝试返回大于 12`visits`的值。`minute`

我的数据结构如下所示：

```
{ "_id" : "20120723/foobar/song/custom-cred",
  "live_daily_count" : 4,
  "metacontent" : { "date" : "20120723",
    "live_daily_statable_slug" : "custom-cred",
    "live_daily_statable_title" : "custom cred",
    "live_daily_statable_type" : "Song",
    "url" : "foobar/songs/custom-cred",
    "user_slug" : "foobar" },
  "visits" : [
    { "country_name" : "UK",
      "iso_two_letter_country_code" : "UK",
      "referer" : "http://localhost:3000/foobar/songs/no-title-with-space",
      "minute" : 12,
      "token_id" : "134300236111rcbmbmvv" },
    { "country_name" : "UK",
      "iso_two_letter_country_code" : "UK",
      "referer" : "http://localhost:3000/foobar/songs/no-title-with-space",
      "minute" : 13,
      "token_id" : "134300242111pjvkjjkf" },
    { "country_name" : "UK",
      "iso_two_letter_country_code" : "UK",
      "referer" : "http://localhost:3000/foobar/songs/no-title-with-space",
      "minute" : 13,
      "token_id" : "134300243511udbnqldm" }
  ]
} 
```

我正在使用 Mongodb Ruby 驱动程序。我尝试了以下方法：

```
conn = Mongo::Connection.new
db   = conn['foobar_development']
cmd = {
  aggregate: 'live_daily_stats',
  pipeline: [
    { '$match' => { :_id => "20120723/foobar/song/custom-cred" } },
    { '$project' => {
      :visits => 1,
    } },
    { '$unwind' => '$visits' },
    # { '$group' => {
    #   :_id => '$_id'
    # } },
  ]
}

res = db.command(cmd)['result'] 
```

它现在返回：

```
[
    [0] {
           "_id" => "20120723/foobar/song/custom-cred",
        "visits" => {
                                          "country_name" => "UK",
                           "iso_two_letter_country_code" => "UK",
                                               "referer" => "http://localhost:3000/foobar/songs/custom-cred",
                                                "minute" => 12,
                                              "token_id" => "134300236111rcbmbmvv"
        }
    },
    [1] {
           "_id" => "20120723/foobar/song/custom-cred",
        "visits" => {
                                          "country_name" => "UK",
                           "iso_two_letter_country_code" => "UK",
                                        "follower_class" => "non_follower",
                                               "referer" => "http://localhost:3000/foobar/songs/custom-cred",
                                                "minute" => 13,
                                              "token_id" => "134300242111pjvkjjkf"
        }
    },
    [2] {
           "_id" => "20120723/foobar/song/custom-cred",
        "visits" => {
                                          "country_name" => "UK",
                           "iso_two_letter_country_code" => "UK",
                                        "follower_class" => "non_follower",
                                               "referer" => "http://localhost:3000/foobar/songs/custom-cred",
                                                "minute" => 13,
                                              "token_id" => "134300243511udbnqldm"
        }
    }
] 
```

如何确保结果只返回`visits`大于`minute`12 的？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T06:46:26.980

您在开始时使用的 $match 管道元素可以多次使用，包括在您的 $unwind 步骤之后。

一旦 $unwind 将您的访问数组元素每个拆分到自己的文档中，您就可以将 {$match:{"visits.minute":{$gt:12}}} 添加到管道的末尾，这应该只留下您想要的访问。

# android - 停止识别 Google Now 滑动手势

> ID：11641359
> 
> 赞同：9
> 
> 时间：2012-07-25T01:06:42.163
> 
> 标签：android, swipe, android-4.2-jelly-bean, google-now

在工作中，我目前面临一个问题，即打开 Google Now 的 Jelly Bean 中的新手势导致与我们的设计相关的问题。

该应用程序即将到期，因此无法重新设计布局。基本上问题是我们使用的是位于屏幕底部的滑动抽屉，JellyBean 用户会发现他们在滑动屏幕底部的滑动抽屉时经常会意外启动 Google Now 应用程序。

是否可以针对每个活动禁用 Google Now Launch 手势？或者在我们有机会重新设计 GUI 之前，甚至是现在的应用程序级别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:44:01.793

我不相信这是可能的，但是从屏幕底部移动滑动抽屉而不是放在顶部并向下滑动会不会更容易。

# sql - 在 SSRS 报告中排列页面

> ID：11641360
> 
> 赞同：0
> 
> 时间：2012-07-25T01:06:47.663
> 
> 标签：sql, excel, export, ssrs-2008

我有一份我正在为工作而编写的报告，我有一个问题，对某些人来说可能看起来很简单，但我真的需要帮助。我使用 SQL 表为我的查询创建了一个向下钻取报告，我为页面使用了几个月，因为当在 Excel 中提取报告时，我需要每个月都在一个单独的选项卡上，但现在我面临两个问题，第一个问题是有是报告按字母顺序提取月份，但我更希望它们从当前月份（在标签 1 下）向后退，或者如果这不可能，我想让它们从 1 月到 12 月订购，我的第二期我是否希望在 Excel 中导出报告时命名选项卡。提前感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T05:44:11.083

您可能正在对您的报告数据进行排序

`=MonthName(Month(Fields!DateColumnName.Value))`,

如果是这样，请将您的排序表达式更改为

`=Fields!DateColumnName.Value`

# jquery - 使用jQuery向同一类的所有按钮添加事件

> ID：11641361
> 
> 赞同：5
> 
> 时间：2012-07-25T01:06:49.483
> 
> 标签：jquery, jquery-selectors, mvc-editor-templates

这可能很容易，但我已经搜索过 SO 并尝试了一些建议，但这些都不起作用。我正在使用一个 MVC 编辑器模板，它有一个带有标准 html 按钮和其他字段的 div。当我将集合传递给模板时，它将使用唯一 id 呈现集合中每个项目的字段。然后我想在单击任何按钮时打开一个对话框。这些按钮在编辑器模板中呈现为这样：

```
@model ProductViewModel
<span>
    <button id="btnSelectTags-@(ViewData.TemplateInfo.HtmlFieldPrefix)" class="sig-button ie-shadowed select-tag" type="button" title="Select tags..." style="margin-right: 10px">Select tags</button>
</span>
// other fields 
```

因此，如果我将包含 2 个对象的集合传递给编辑器模板，我会得到以下 html：

```
<button title="Select tags..." class="sig-button ie-shadowed select-tag" id="btnSelectTags-Products[0]" style="margin-right: 10px;" type="button">
// other fields then next item:
<button title="Select tags..." class="sig-button ie-shadowed select-tag" id="btnSelectTags-Products[1]" style="margin-right: 10px;" type="button"> 
```

这似乎很好，并为每个按钮提供了一个唯一的 ID。他们需要有一个唯一的 ID（我认为），因为每个 div 中的项目都可以有自己的一组标签。所以我想使用这个jQuery为每个打开对话框的按钮添加一个点击事件（我已经尝试在选择器中包含其他类并尝试不使用“按钮”）：

```
if ($("button.select-tag")) {
    $(".select-tag").click(function () {
        showTagDialogBox();
    });
} 
```

这是呈现标签的 div：

```
<div style="display: none">
    <div id="tagDialogBox" title="Add Tags">
        @Html.EditorFor(x => x.ProductViewModels)
    </div>
</div> 
```

这是 showTagDialogBox 函数：

```
function showTagDialogBox() {
    $('#tagDialogBox').dialog({
        autoOpen: false,
        title: "Select Tags",
        modal: true,
        height: 530,
        width: 700,
        buttons: {
            "Save": function () {
                $(this).dialog("close");
            },
            "Cancel": function () {
                $(this).dialog("close");
            }
        }
    });

    return false;
} 
```

但是，当我单击任何按钮时，什么都没有发生 - 我在 Firebug 中也没有收到任何 js 错误。谁能发现我可能做错了什么？这是我正在尝试做的事情的图片：

![在此处输入图像描述](../Images/5fe7cb4af80e3b4c63cb3b15c6d2e194.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T01:17:03.657

需要注意的两件事可以解释这里发生的事情：

即使 DOM 中不存在任何按钮，以下内容将始终评估为 true：

```
if ($("button.select-tag")) { } 
```

相反，使用：

```
if ($("button.select-tag").size() > 0) { } 
```

其次，根据您的按钮是否存在于表单元素中，页面可能会在对话框出现之前将数据发送回服务器。为防止这种情况，`.preventDefault()`请在单击事件处理程序中使用如下：

```
$(".select-tag").click(function (e) {
    showTagDialogBox();
    e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T01:28:11.790

即使不检查元素也可以这样做，因为如果页面上不存在该元素不会有问题，所以你可以这样做

```
$(".select-tag").click(function(e) {
    e.preventDefault();
    showTagDialogBox();
}); 
```

但如果你想先检查一下，你可以试试这个

```
if ($("button.select-tag").length) {
    $(".select-tag").click(function(e) {
        e.preventDefault();
        showTagDialogBox();
    });
} 
```

或（如果您使用的是最新版本的 jquery）

```
$(".select-tag").on('click', function(e) {
    e.preventDefault();
    showTagDialogBox();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T08:52:55.960

好的 - 我有

> 自动打开：假

而它应该被设置为true。

**拍打额头**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-11T17:32:21.770

只是对您的标题的通用答案，即将单击事件添加到某个类的所有按钮：

```
@section scripts{
    <script type="text/javascript">
        $(document).ready(function () {
            // Items that NEED to be set after the page is loaded.
            $('.some-class').on('click', 'button', function (event) 
            {
               event.preventDefault();
               someFunction();
            }
            // And so on.
        });

        //Items that DON'T NEED to be called on page load can be put outside document.ready. For eg:
        function someFunction() { // Some logic }
    </script>
} 
```

# python - 蟒蛇mysql连接

> ID：11641365
> 
> 赞同：1
> 
> 时间：2012-07-25T01:07:18.687
> 
> 标签：python, mysql

使用标准脚本（或任何其他脚本）我无法将 python 连接到 mysql。我目前拥有来自 Conceptive Engineering (Python 2.7.2) 的适用于 Windows 的 Python SDK。早些时候我尝试了从 Enthought 免费下载（可能单独添加 mysqldb）。至于mysql，最新版本是universal windows download，应该会自动正确安装（mysql-installer - 5.5.25a0.msi）。我在尝试了没有单一尺寸安装程序的 mysql 5.1、5.0 之后尝试了这个（有时是 64 位，有时是 32 位）。

在所有情况下，python 和 mysql 都可以单独完美地工作。在我尝试连接之前，我可以看到 mysql windows 服务正在运行。

主脚本可以分为两行：

```
 #this one always works without error in ipython
import MySQLdb

 #this one never works, though all the variables test out in mysql fine
con = MySQLdb.connect(host="localhost", port=3306, user="root", db="sakila") 
```

# 这是来自 ipython 的输出

```
OperationalError                          Traceback (most recent call last)
C:\Program Files (x86)\PythonSDK\<ipython-input-3-1ffbd20d17a9> in <module>()
----> 1 con = MySQLdb.connect(host="localhost", port=3306, user="root", db="sakila")

C:\Program Files (x86)\PythonSDK\lib\site-packages\mysql_python-1.2.3-py2.7-win32.egg\MySQLdb\__init__.py in Connect(*args, **kwargs)
     79     """Factory function for connections.Connection."""
     80     from connections import Connection
---> 81     return Connection(*args, **kwargs)
     82 
     83 connect = Connection = Connect

C:\Program Files (x86)\PythonSDK\lib\site-packages\mysql_python-1.2.3-py2.7-win32.egg\MySQLdb\connections.py in __init__(self, *args, **kwargs)
    185         kwargs2['client_flag'] = client_flag
    186 
--> 187         super(Connection, self).__init__(*args, **kwargs2)
    188 
    189         self.encoders = dict([ (k, v) for k, v in conv.items()

OperationalError: (2003, "Can't connect to MySQL server on 'localhost' (10061)") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T01:38:25.610

1.  数据库在同一台机器上（因此是“localhost”）吗？如果没有，请使用正确的 IP

2.  用户“root”是否有权从主机“localhost”访问数据库“sakila”？如果没有，授予权限

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T01:44:25.907

1.  检查您的mysql服务器是否正在运行。
2.  检查防火墙是否封锁了 3306 端口。

# php - 如何对 MySQL 结果进行排序，首先是字母，最后是符号？

> ID：11641370
> 
> 赞同：5
> 
> 时间：2012-07-25T01:08:14.147
> 
> 标签：php, mysql, arrays, sorting

长期读者，第一次在这里发布海报。

我试图弄清楚如何为我正在编写的音乐应用程序对艺术家列表进行排序。

为了帮助理解数据库结构：我没有一个关系系统，其中歌曲表中的每首歌曲都有一个艺术家 ID，该 ID 引用艺术家表中的一行，我只是有一个歌曲列表，其中艺术家的名字作为一列中的字符串. 然后我`GROUP BY artist`在 MySQL 查询中使用以返回单个艺术家的列表。

我的应用程序以 JSON 编码数组的形式从我的服务器检索这些数据，该数组是以下 MySQL 查询的结果：

```
SELECT artist FROM songs GROUP BY artist ORDER BY artist ASC 
```

但是，此查询会导致名称为 &i、+NURSE 和 2007excalibur2007 的艺术家排在字母结果之前（例如 AcousticBrony、ClaireAnneCarr、d.notive 等）。

**我需要的是名字以字母排序的艺术家列表*后返回的数字和符号开头的艺术家。***

该解决方案可以是基于 PHP 的，但我更喜欢它在 MySQL 查询中完成的优雅。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-25T01:17:54.217

这会将所有名称以 az 中的字母开头的艺术家放在那些不以字母开头的艺术家之前：

```
SELECT DISTINCT artist
FROM songs
ORDER BY artist REGEXP '^[a-z]' DESC, artist 
```

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!2/68afe/5)

* * *

但是您可能更喜欢使用简化名称存储第二列，以便您可以将它们按更有意义的顺序排列：

```
artists

artist            | simplified_name
------------------------------------
&i                | i
+NURSE            | nurse
2007excalibur2007 | excalibur 
```

`simplified_name`在 MySQL 中无法轻松生成的值，因此您可能希望使用通用编程语言提取所有艺术家，将它们转换为简化名称，然后将结果填充到数据库中。

完成后，您可以使用以下查询：

```
SELECT DISTINCT artist
FROM artists
ORDER BY simplified_name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T01:30:54.597

您可以添加一个额外的`ORDER BY`子句，将以非字母字符开头的项目放在最后，如下所示：

```
 SELECT artist
      FROM songs
  ORDER BY artist REGEXP '^[^A-Za-z]' ASC, artist 
```

这应该会将每个不以 AZ 或 az 开头的艺术家移动到您的订购末尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T01:26:59.853

```
ORDER BY ASCII(SUBSTR(artist, 1, 1)) NOT BETWEEN 65 AND 122, artist 
```

这将对所有以字母字符开头的艺术家排序在非字母字符之前。

请注意，由于 ascii 的工作方式， [ \ ] & _ ` 将被视为按字母顺序排列。如果这很重要，您可以将其拆分为两个布尔表达式，分别处理大写和小写字母。

或者可能：

```
ORDER BY ASCII(UPPER(SUBSTR(artist, 1, 1))) NOT BETWEEN 65 AND 90, artist 
```

请注意，这仅适用于 ascii 字符。属于其他字符集的字母不会被识别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-10T02:26:43.293

如果你想先按符号排序

*   ★★★符号★★★</li>
*   101 头发护理
*   美国广播公司
*   定义

然后使用下面的查询

```
ORDER BY artist REGEXP '^[^A-Za-z0-9]' DESC, artist ASC 
```

# svn - 重构 SVN 分支代码

> ID：11641371
> 
> 赞同：1
> 
> 时间：2012-07-25T01:08:20.230
> 
> 标签：svn, refactoring, branching-and-merging

我正在处理的一个项目迫切需要重构。问题是通常有多个分支（维护、新功能等），我不确定我们是否可以轻松移动、重命名和删除文件和目录以及合并更改。我担心当其他人在另一个分支中更新文件时，我会在重构分支中移动文件。我一直希望有一个小窗口，主干有一切，不需要分支，但业务总是需要更改（立即或作为次要版本的一部分）。

我们的源代码控制由 Subversion 管理。在一个分支中彻底改变项目，同时与其他分支保持同步是否容易/可能？我很擅长合并更改以使分支保持最新状态，也许一次只进行小的重构更改就可以了。否则，这真的只能通过留出一些时间我们只进行重构（即没有其他分支）来完成吗？我一直在试图说服企业主我们需要一些时间来重构，虽然他们同意，但现在看来不可能。

关于重构的重要一点是它应该始终完成（不仅仅是偶尔一次）。这对于实际代码（分解函数、删除重复代码等）似乎是可行的，但我对适当地重命名和分组文件不太有信心。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T02:10:53.283

它在 SVN 中是可行的，但我可以告诉你，你将面临很多不同的问题。如果您真的希望重构到每个分支，请三思而后行？将重构的代码合并到发布分支（这是用于发布生产版本的小修复的维护分支）似乎并不合理。

虽然 SVN 可以让你从任意分支合并到任意分支，但是在分支和起源分支之间合并总是更合理。因此，如果你有这样的事情：

```
Rel-1.0          /---------------->
Rel-1.1         /   /------------------->
Trunk      --------------------------------*------>
FeatureA         \-------->  \       \     ^ (rev. X)
FeatureB                      \-->    \    |
Refactor                               \---> 
```

与其在 Refactor 中进行重构工作并将其合并到每个其他分支，不如将 Refactor 分支中的更改重新集成到 Trunk（假设在修订版 X 中），然后将修订版 X 从 Trunk 合并到需要此更改的其他分支. 对于发布分支（Rel-1.0、Rel-1.1），它很可能是一个选择。对于功能分支 A/B，它将赶上 Trunk（通过合并 Trunk 中的所有东西）。

请注意，如果您的分支偏离主干更多，合并变得更加困难。因此，如果您确实需要合并重构代码以发布分支（这很可能非常偏离主干），请三思。

另请注意，SVN 中的重命名跟踪并没有很好地实现。例如，您将主干中的文件 F 重命名为 FNew，SVN 处理的是通过从 F 复制添加 FNew，然后删除 F。如果将其合并到分支，afaik，SVN 所做的是通过从主干/复制添加分支/FNew F，并删除分支/F。因此，如果您曾经修改过分支/F，对于较新版本的 SVN（可能 >=1.5），它会产生树冲突，而在旧版本的 SVN 中您甚至会丢失修改。尽管较新的版本处理得更好，但它们都没有处理“正确”重命名的合并（将分支/F移动到分支/FNew）。这将导致您在合并时付出额外的努力，并且在两个分支偏离很多的情况下导致合并更加困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T01:25:17.870

如果你彻底改变一个分支，你肯定会在合并你的代码时遇到问题，尤其是当其他人对相同的文件进行更改时。

我会在这里推荐一些巧妙的安排。您必须处理当前未处理的部分代码。或者，将重构作为正常业务运营的一部分。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-25T01:15:54.607

我认为您可以只修改一个分支，创建补丁文件并使用相同的补丁文件来更新所有其他分支？

# clojure - 如何在 repl 中加载新的 clojure 库

> ID：11641372
> 
> 赞同：12
> 
> 时间：2012-07-25T01:08:25.967
> 
> 标签：clojure

所以我有这个工作流程问题：

我很高兴在我的 clojure 项目 repl 上打字，并意识到我需要另一个不在我的库中的库`project.clj`，比如在这种情况下，我需要该`tools.cli`库。

我在我的编辑器中打开`project.clj`并添加一个条目到`:dependencies`

```
 [org.clojure/tools.cli "0.2.1"] 
```

然后，在项目目录中，我输入`lein deps`shell 以拉入必要的库

拉取项目依赖项后，从技术上讲，所有类文件都已准备好加载，但如果我回到我的 repl 并键入：

```
> (use 'tools.cli) 
```

我明白了：

```
=>> FileNotFoundException Could not locate tools/cli__init.class
  or tools/cli.clj on classpath:   clojure.lang.RT.load (RT.java:432) 
```

所以我必须重新启动我的 repl，浪费大量时间将 repl 的状态重新配置到我需要库之前的状态。

有没有办法动态加载库？例如，在我运行之后，`lein deps`我只是回到 repl 并输入：

```
> (load-library "tools.cli") 
> (use 'tools.cli) 
```

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T01:54:35.870

石榴适合你：

[https://github.com/cemerick/pomegranate](https://github.com/cemerick/pomegranate)

它支持在运行时下载和添加新的依赖项，例如：

```
(add-dependencies :coordinates '[[incanter "1.2.3"]]
                  :repositories (merge cemerick.pomegranate.aether/maven-central
                                       {"clojars" "http://clojars.org/repo"})) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T01:37:54.130

像这样的东西对你有用吗？

[https://groups.google.com/d/msg/clojure/AJXqbpGMQw4/0-7-3pXRwGkJ](https://groups.google.com/d/msg/clojure/AJXqbpGMQw4/0-7-3pXRwGkJ)

还有 clojure.core/add-classpath，但它已被弃用。

[http://clojuredocs.org/clojure_core/clojure.core/add-classpath](http://clojuredocs.org/clojure_core/clojure.core/add-classpath)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-07T09:06:36.220

您可以在 repl 中使用[`lein-try`](https://github.com/rkneufeld/lein-try).

`~/.lein/profiles.clj`：

`{:user {:plugins [[lein-try "0.4.3"]]}}`

`command line`：

```
$ lein try clj-time "0.5.1"
Fetching dependencies... (takes a while the first time)
lein-try loaded [clj-time "0.5.1"]

nREPL server started on port 57036
REPL-y 0.2.0
Clojure 1.5.1
    Docs: (doc function-name-here)
          (find-doc "part-of-name-here")
  Source: (source function-name-here)
 Javadoc: (javadoc java-object-or-class-here)
    Exit: Control+D or (exit) or (quit)

user=> 
```

# javascript - 流星js中没有服务的用户身份验证

> ID：11641383
> 
> 赞同：2
> 
> 时间：2012-07-25T01:10:44.163
> 
> 标签：javascript, node.js, meteor

我可以在不使用任何第三方服务的情况下创建新用户吗？我正在开发一个应用程序，我需要同等对待注册的匿名用户。然后如果匿名用户注册可以更新他们的数据，同时保持相同的 uuid。是否可以？我正在使用分支 auth-dropdown

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T10:24:13.863

我不熟悉 auth-dropdown 分支，但我使用的是“auth”分支。

Meteor 团队最近引入了一个新的 API 来注册/登录用户，而无需使用 Google/Facebook 登录系统。

他们在 Wiki 上有一个关于如何开始使用 auth 分支的指南：[https ://github.com/meteor/meteor/wiki/Getting-Started-with-Auth](https://github.com/meteor/meteor/wiki/Getting-Started-with-Auth)

您可以看到他们引入了客户端 API，例如：

```
Meteor.loginWithPassword(user, password, callback)
Meteor.createUser(options, extra, callback)
Meteor.changePassword(oldPassword, newPassword, callback)
Meteor.logout() 
```

希望这可以帮助。

# wpf - Expression Blend 中的 d:IsControlPart 属性有什么作用？

> ID：11641386
> 
> 赞同：3
> 
> 时间：2012-07-25T01:11:35.200
> 
> 标签：wpf, expression-blend

在 Expression Blend 4 中，简单样式使用以下 XML 命名空间：

```
http://schemas.microsoft.com/expression/interactivedesigner/2006 
```

它经常使用来自这个命名空间的一个名为**IsControlPart**的属性，它是一个布尔值。我进行了广泛的搜索，但找不到有关此属性的任何实际文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T04:00:03.140

我想我想通了。

当 WPF 为其控件创建默认模板时，它会使用前缀“PART”来命名一些元素。例如，对于 Slider 控件，它有两个部分，**PART_Track**和**PART_SelectionRange**。这本身与 Expression Blend 无关。

这些部件是控件基本功能所必需的。大多数简单的控件，如 Button，没有任何部件，因此它们可以完全自定义而没有任何限制。

更复杂的控件依赖于存在的部分，以便代码隐藏正常工作。它不关心控件的外观，或者它们在可视化树中的位置，只要它们存在并且类型正确。

在 Expression Blend 中，有一个“部件”窗口，默认情况下，它是“项目”和“资产”选项卡旁边的一个选项卡。当您为控件编辑模板时，如果有为该控件定义的任何部件，它会在此部件窗口中列出它们。如果该部分存在于当前模板中，它会显示一个复选标记，如果不存在，您可以双击它，Blend 将为您创建元素。

我仍然不确定 d:IsControlPart 属性是如何工作的。我尝试制作自己的自定义控件并使用 IsControlPart 标签创建元素，然后为该控件创建模板以查看它是否会列出该部分。它没有。所以这仍然不是 100% 的回答。

# android - 将 DoubleArray 从一个活动的对象传递到另一个活动

> ID：11641387
> 
> 赞同：0
> 
> 时间：2012-07-25T01:12:03.690
> 
> 标签：android, bundle

我想将值从一个活动发送到另一个活动，但我在第二个活动中得到空值，请解决我的问题。第一个活动包含 blog_info，该博客的详细信息将根据第二个活动搜索位置的这些值发送到第二个活动。

```
final ArrayList<Blog> blogList = (ArrayList<Blog>) message
                .getResultList("Blog");
        for (Blog blog : blogList) {
            int i=0;
                latitude_Array[i] = Double.parseDouble(blog.getLatitude_zzs());
                longitude_Array[i]=Double.parseDouble(blog.getLongitude_zzs());
                i++;
        }
        btn = (Button) findViewById(R.id.main_top_map_list);
        btn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent intent = new Intent(MainActivity.this,
                            MainActivity_MapList.class);
                    //The method putDoubleArray(String, double[]) in the type Bundle is not applicable for the arguments (String, Double[])
                    bundle.putDoubleArray("latitude_Array", latitude_Array);

                    // intent.putExtras(bundle);
                    finish();
                    startActivity(intent);
            }
        }); 
```

我使用了一系列方法，例如：

bundle.putDoubleArray（键，值）

bundle.putSparseParcelableArray（键，值）

bundle.putParcelableArray（键，值）

bundle.putSerializable（键，值）

但我只是在第二个活动中得到“null”或“0.0”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T01:26:57.203

首先，在您发布的代码中，您放置了一个双精度列表的arraylist，然后将其转换为一个？扩展可包裹。那些不是同一类型。

我假设您只想传递一个双打列表（或数组）。您可以使用`putDoubleArray()`或`putSerializable()`。如果你想处理一个双打数组，你需要把你的双打放在 a 中`double[]`，比如，

```
double[] doubles = ...; // whatever
bundle.putDoubleArray(key, doubles); 
```

让他们从另一边出来，

```
double[] doubles = bundle.getDoubleArray(key); 
```

如果你想在一个数组列表中传递你的双打，你必须把你的双打放在一个`ArrayList<? implements Serializable>`......例如，`ArrayList<Double>`。像这样，

```
ArrayList<Double> doubles = ...; // whatever
bundle.putSerializable(key, doubles); 
```

把它们从另一边的包裹中取出，

```
ArrayList<Double> doubles = (ArrayList<Double>)bundle.getSerializableExtra(key); 
```

# php - PHP：在字符串中搜索字符串

> ID：11641390
> 
> 赞同：1
> 
> 时间：2012-07-25T01:12:36.323
> 
> 标签：php, string, replace, find

我想检查一个字符串是否存在于另一个字符串中，然后采取适当的措施。做这个的最好方式是什么？

例如; 如果字符串 'europe' 出现在 'europeisthebest' 中，则执行一些操作。

```
if ( isIn('europe', 'europeisthebest') == true){
  //do something
} 
```

十分感谢！我感谢您的所有回答和花时间提供帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T01:13:24.957

您正在寻找[`strstr()`](http://us3.php.net/manual/en/function.strstr.php)（区分大小写）、[`stristr()`](http://us3.php.net/manual/en/function.stristr.php)（不区分大小写）或[`strpos()`](http://us3.php.net/manual/en/function.stripos.php)

```
if (stristr('europeisthebest', 'europe')){
  // do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T01:16:33.147

如果您想知道子字符串在字符串中的位置，也可以使用函数 strpos()

# android - 在 WebView 中观看视频后，Android 2.3 键盘停止弹出

> ID：11641393
> 
> 赞同：1
> 
> 时间：2012-07-25T01:12:46.883
> 
> 标签：android, input, webview, video-streaming

我有一个简单的应用程序，`WebView`它加载一个 html 页面。HTML 页面仅包含一个`input`字段和一个`iframe`，`iframe`用于嵌入 youtube 视频。

```
<fieldset>
    <legend>Video Test</legend>
            <input type="text" id="text-callee-dataReceived" name="text-callee-dataReceived" size="80" value="" />
            <iframe class="youtube-player" type="text/html" width="100%" height="100%" src="http://www.youtube.com/embed/-qTIGg3I5y8" frameborder="0">
    </iframe>
</fieldset> 
```

当我点击输入字段时，键盘按预期出现。但是，当我先播放视频然后点击输入字段时，即使输入字段获得焦点（即光标出现在其中并闪烁），键盘也不会出现。

注意：当我使用 Android 浏览器访问 HTML 页面时，我无法重现这一点。

任何人都知道发生了什么，或者我是否可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T01:38:30.667

也许原因是这里描述的错误：[http ://code.google.com/p/android/issues/detail?id=7189](http://code.google.com/p/android/issues/detail?id=7189)

所以尝试以编程方式设置焦点：

```
webview.requestFocus(View.FOCUS_DOWN);
webview.setOnTouchListener(new View.OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
            case MotionEvent.ACTION_UP:
                if (!v.hasFocus()) {
                    v.requestFocus();
                }
                break;
        }
        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T14:52:11.480

我今天有同样的问题。以下解决方案对我有用：

```
mWebView.setWebViewClient(new WebViewClient() {
    @Override
    public void onPageFinished(WebView view, String url) {
        view.requestFocus();
        super.onPageFinished(view, url);
    }
}); 
```

祝你好运！

# html - 表格行（带图像）和表格行（带日期）之间的空白

> ID：11641396
> 
> 赞同：0
> 
> 时间：2012-07-25T01:13:06.137
> 
> 标签：html

我在用 html 编码时搜索了这个空白区域。但我仍然无法解决我的问题。我的问题是，无论我在表格样式中进行什么更改，abclogo 的图像之后总是有一个空格。我希望看到与显示 2012 年 7 月 31 日的下一行分开的图像

```
<table style="vertical-align: bottom; background-color: rgb(0, 136, 64); width: 100%;">
<tbody>
<tr>
        <a href="www.abc.com"><img style="border: 0; width:>800px;"alt="Logo of abc" src="abclogo.jpg"></a>           
    </tr>   
    <tr>
        <td style="text-align: right; padding-right: 15px;">31 July 2012</td>
    </tr>
 </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T01:21:01.440

添加`cellspacing=0 cellpadding=0`到表标签。或使用`border-collapse: collapse;`.

也添加`display: block;`到图像中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T01:23:47.300

只需将图像浮动到左侧：**[jsFiddle 示例](http://jsfiddle.net/j08691/947YJ/1/)**。

# ruby - Haml 或 Sinatra 中的 Ruby 逻辑

> ID：11641410
> 
> 赞同：1
> 
> 时间：2012-07-25T01:16:11.703
> 
> 标签：ruby, sinatra, logic, haml

我注意到 Haml 支持相当多的逻辑函数（if 语句等）

我很好奇，

将大部分/所有编程逻辑保留在 Sinatra app.rb 中还是将其转移到 Haml 模板中是更好的做法。

我不想在多个地方维护代码，所以我假设将它全部保存在 whatt.rb 中。但我对 sinatra 和 Haml 相当陌生，并且愿意接受建议和意见。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T01:20:11.780

保持视图逻辑尽可能简单。循环几乎是不可避免的，返回您需要显示的数据的方法也是如此。除此之外，最好编写一些暴露给视图的“辅助”方法来处理高级逻辑。

如果您发布的视图具有比您更满意的逻辑，那么也许我们可以建议如何重构它。但是没有任何代码要审查，只能给出一般指导方针。

# url - 作为 RESTful Web 服务的必需属性？

> ID：11641412
> 
> 赞同：0
> 
> 时间：2012-07-25T01:17:00.160
> 
> 标签：url, rest

我希望这不是一个愚蠢的问题，但今天我收到一条评论，说必须通过用户友好的 url 访问 PHP Web 服务才能被视为 RESTful。这是真的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T01:26:31.083

用户友好的 url 没有明确定义，因此不能有这样的约束。用户友好取决于用户。没有这样的限制，HTTP 是 RESTful 并且有很多非“用户友好”的 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T01:23:22.903

好吧，并不是说[Wikipedia Restful Information](http://en.wikipedia.org/wiki/Representational_state_transfer#Constraints)是万能的，但是根据定义的约束，用户友好的 url 不是其中之一。

> REST 架构风格描述了应用于架构的以下六个约束，同时让各个组件的实现自由设计：
> 
> 客户端服务器
> 
> 统一的接口将客户端与服务器分开。这种关注点分离意味着，例如，客户端不关心数据存储，数据存储保留在每个服务器内部，从而提高了客户端代码的可移植性。服务器不关心用户界面或用户状态，因此服务器可以更简单且更具可扩展性。服务器和客户端也可以更换和独立开发，只要不改变它们之间的接口即可。
> 
> 无状态
> 
> 客户端-服务器通信进一步受到请求之间没有客户端上下文存储在服务器上的限制。来自任何客户端的每个请求都包含服务请求所需的所有信息，并且任何会话状态都保存在客户端中。服务器可以是有状态的；此约束仅要求服务器端状态可通过 URL 作为资源寻址。这不仅使服务器对监控更加可见，而且使它们在面对部分网络故障时更加可靠，并进一步增强了它们的可扩展性。
> 
> 可缓存
> 
> 与万维网一样，客户端可以缓存响应。因此，响应必须隐式或显式地将自己定义为可缓存或不可缓存，以防止客户端重复使用陈旧或不适当的数据来响应进一步的请求。管理良好的缓存部分或完全消除了一些客户端-服务器交互，进一步提高了可伸缩性和性能。
> 
> 分层系统
> 
> 客户端通常无法判断它是直接连接到终端服务器，还是一路连接到中间人。中间服务器可以通过启用负载平衡和提供共享缓存来提高系统可伸缩性。他们还可以强制执行安全策略。
> 
> 按需编码（可选）
> 
> 服务器能够通过传输可执行代码临时扩展或定制客户端的功能。这方面的示例可能包括已编译的组件（例如 Java 小程序）和客户端脚本（例如 JavaScript）。
> 
> 统一的界面
> 
> 下面讨论的客户端和服务器之间的统一接口简化和解耦架构，使每个部分能够独立发展。下面详细介绍该接口的四个指导原则。
> 
> REST 架构的唯一可选约束是按需代码。如果服务违反任何其他约束，则不能严格将其视为 RESTful。
> 
> 遵守这些约束，从而符合 REST 架构风格，将使任何类型的分布式超媒体系统具有理想的新兴属性，例如性能、可伸缩性、简单性、可修改性、可见性、可移植性和可靠性。

# android - MonoDroid：Fragment.Instantiate ClassNotFoundException

> ID：11641417
> 
> 赞同：4
> 
> 时间：2012-07-25T01:17:33.920
> 
> 标签：android, mono, xamarin.android

我正在尝试使用 Mono for Android 中的 ActionBar 创建一个滑动选项卡视图。

eclipse插件的adroid将此作为默认项目模板，我已经设法将其转换过来，我现在正在尝试添加功能以将我的片段分开。

当我尝试运行我的项目时，我得到一个 ClassNotFoundException

这是片段的代码

```
using Fragment = Android.Support.V4.App.Fragment;

namespace MobileCompanion.AndroidOS.App.UI.Customers
{
    public  class HomeTab : Fragment
    {
        public override Android.Views.View OnCreateView(Android.Views.LayoutInflater inflater, Android.Views.ViewGroup viewGroup, Android.OS.Bundle p2)
        {

            return null;
        }
    }
} 
```

这是我的部分适配器

```
using System.Collections.Generic;
using Android.Content;
using Android.OS;
using Android.Support.V4.App;
using Java.Lang;

namespace MobileCompanion.AndroidOS.App
{
    public class SectionsPagerAdapter : FragmentPagerAdapter
    {
        private readonly Context _context;
        public readonly IList<TabInfo> Tabs = new List<TabInfo>();
        private Bundle _bundle;

        public SectionsPagerAdapter(FragmentManager fm, Context context, Bundle savedInstanceState)
            : base(fm)
        {
            this._context = context;
            this._bundle = savedInstanceState;

        }

        public override Fragment GetItem(int i)
        {
            var args = new Bundle();
            var page = Fragment.Instantiate(this._context, typeof(HomeTab).FullName);
            //          var page = new HomeTab(); <<--- Work but nothing displayed as none of the create methods are run
            page.Arguments = args;
            return page;
        }

        public override int Count
        {
            get { return this.Tabs.Count; }
        }

        public override ICharSequence GetPageTitleFormatted(int p0)
        {
            return new String(this.Tabs[p0].PageTitle);
        }

    }
} 
```

> Java.Lang.RuntimeException：无法实例化片段 MobileCompanion.AndroidOS.App.UI.Customers.HomeTab：确保类名存在，是公共的，并且
> 在 Android.Runtime.JNIEnv.CallStaticObjectMethod (intptr, intptr,Android.Runtime.JValue[]) [0x00024] 在 /Users/builder/data/lanes/monodroid-mac-monodroid-4.2.4-branch/9f7cbd60/source/monodroid/src/Mono.Android/src/Runtime /JNIEnv.g.cs:767
> 
> 在 Android.Support.V4.App.Fragment.Instantiate (Android.Content.Context,string) [0x00034] 在 /Users/builder/data/lanes/monodroid-mac-monodroid-4.2.4-branch/9f7cbd60/source/ monodroid-bindings/Compatibility-v4/bindings/obj/platform-14/src/generated/Android.Support.V4.App.Fragment.cs:624
> 
> 在 MobileCompanion.AndroidOS.App.SectionsPagerAdapter.GetItem (int) [0x00007] 在 c:\Projects\MobileCompanion\trunk\MobileCompanion.Android.App\SectionsPagerAdapter.cs:28
> 
> 在 Android.Support.V4.App.FragmentPagerAdapter.n_GetItem_I (intptr,intptr,int) [0x00008] 在 /Users/builder/data/lanes/monodroid-mac-monodroid-4.2.4-branch/9f7cbd60/source/monodroid- bindings/Compatibility-v4/bindings/obj/platform-14/src/generated/Android.Support.V4.App.FragmentPagerAdapter.cs:56
> 
> 在（包装动态方法）object.780b3637-f853-4d6e-8435-9c92bc6a9dd5 (intptr,intptr,int)
> 
> --- 托管异常堆栈跟踪结束 ---
> 
> android.support.v4.app.Fragment$InstantiationException：无法实例化片段MobileCompanion.AndroidOS.App.UI.Customers.HomeTab：确保类名存在，是公共的，并且有一个公共的空构造函数
> 
> ```
>  at android.support.v4.app.Fragment.instantiate(Fragment.java:395)
> 
>   at android.support.v4.app.Fragment.instantiate(Fragment.java:363)
> 
>   at 
> ```
> 
> mobilecompanion.androidos.app.SectionsPagerAdapter.n_getItem（本机方法）
> 
> ```
>  at 
> ```
> 
> mobilecompanion.androidos.app.SectionsPagerAdapter.getItem(SectionsPagerAdapter.java:30)
> 
> ```
>  at 
> ```
> 
> android.support.v4.app.FragmentPagerAdapter.instantiateItem(FragmentPagerAdapter.java:97)
> 
> ```
>  at android.support.v4.view.ViewPager.addNewItem(ViewPager.java:692)
> 
>   at android.support.v4.view.ViewPager.populate(ViewPager.java:821)
> 
>   at android.support.v4.view.ViewPager.populate(ViewPager.java:772)
> 
>   at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1234)
> 
>   at android.view.View.measure(View.java:12723)
> 
>   at 
> ```
> 
> android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
> 
> ```
>  at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
> 
>   at android.view.View.measure(View.java:12723)
> 
>   at 
> ```
> 
> android.widget.LinearLayout.measureVertical(LinearLayout.java:812)
> 
> ```
>  at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
> 
>   at android.view.View.measure(View.java:12723)
> 
>   at 
> ```
> 
> android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
> 
> ```
>  at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
> 
>   at 
> ```
> 
> com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2092)
> 
> ```
>  at android.view.View.measure(View.java:12723)
> 
>   at 
> ```
> 
> android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1064)
> 
> ```
>  at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
> 
>   at android.os.Handler.dispatchMessage(Handler.java:99)
> 
>   at android.os.Looper.loop(Looper.java:137)
> 
>   at android.app.ActivityThread.main(ActivityThread.java:4424)
> 
>   at java.lang.reflect.Method.invokeNative(Native Method)
> 
>   at java.lang.reflect.Method.invoke(Method.java:511)
> 
>   at 
> ```
> 
> com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
> 
> ```
>  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
> 
>   at dalvik.system.NativeStart.main(Native Method) 
> ```
> 
> 引起：java.lang.ClassNotFoundException：MobileCompanion.AndroidOS.App.UI.Customers.HomeTab
> 
> ```
>  at 
> ```
> 
> dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
> 
> ```
>  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
> 
>   at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
> 
>   at android.support.v4.app.Fragment.instantiate(Fragment.java:385) 
> ```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T02:58:04.543

命名空间必须全部小写`Fragment.Instantiate`才能工作。我相信这个限制是从 Java 继承下来的。

```
var page = Fragment.Instantiate(_activity, typeof(T).Namespace.ToLower() + "." +  
                                typeof(T).Name); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-22T22:19:15.607

更好的答案是：

```
var page = Fragment.Instantiate (_activity, Java.Lang.Class.FromType(T).Name); 
```

# java - Java 套接字客户端/服务器

> ID：11641420
> 
> 赞同：-1
> 
> 时间：2012-07-25T01:18:19.210
> 
> 标签：java, sql, sockets, client

您好我正在尝试获取有关连接到同一台机器中的多线程服务器进程的套接字客户端的一些数据。服务器线程被正确触发并且客户端 ip 被检索到，但我似乎无法通过连接发送字符串。客户端

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package solverapplet;
import java.io.DataInputStream;
import java.io.IOException;
import java.io.PrintStream;
import java.net.Socket;
import java.net.UnknownHostException;
import java.util.logging.Level;
import java.util.logging.Logger;
import java.io.*;

/**
 *
 * @author me
 */
public class Solverapplet {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // TODO code application logic here
        Socket s;
        try {
            s = new Socket("IP", 4445);
            System.out.println(s.getPort());
            //DataInputStream in = new DataInputStream (s.getInputStream());
       BufferedWriter out = new BufferedWriter(
                            new OutputStreamWriter(s.getOutputStream()));
        out.write("gamma");
                        out.newLine();
                        out.flush();

        } catch (UnknownHostException ex) {
            Logger.getLogger(Solverapplet.class.getName()).log(Level.SEVERE, null, ex);
        } catch (IOException ex) {
            Logger.getLogger(Solverapplet.class.getName()).log(Level.SEVERE, null, ex);
        }

    }
} 
```

服务器线程

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package serversideserver;
import java.io.*;
import java.net.*;
import java.security.*;
import java.util.List;
import java.sql.*;
import com.google.gson.Gson;

class doComms implements Runnable {
    private Socket server;

    private String line,input,ip;

    doComms(Socket server, String ip) {
      this.server=server;
      this.ip=ip;
    }

    public void run () {

      input="";

      try {
        // Get input from the client
        BufferedReader in = new BufferedReader(
                            new InputStreamReader(server.getInputStream()));

        PrintStream out = new PrintStream(server.getOutputStream());
      Connection conn = null;
        try
           {
               String userName = "root";
               String password = "";
               String url = "jdbc:mysql://localhost/test";
               Class.forName ("com.mysql.jdbc.Driver").newInstance ();
               conn = DriverManager.getConnection (url, userName, password);
               System.out.println ("Database connection established");
               // create the java statement
      Statement st = conn.createStatement();

       // ResultSet rs;
        while((line = in.readLine()) != null && !line.equals(".")) {
            // Now do the magic.
       //Data data = new Gson().fromJson(line, Data.class);
       System.out.println("LINE: " + line);
        input=line;
        st.executeUpdate("UPDATE `solvers` SET `online`='1',`ip`='"+  server.getInetAddress().toString().substring(1) +"' WHERE `user`='"+ line +"'");

         // input= data.getcmd();
          out.println("{\"captcha\":1,\"text\":\"abc\",\"is_correct\":\"true\"}");
        } 
           }
           catch (Exception e)
           {
               System.out.println (e.toString());
           }

        // Now write to the client

        System.out.println("UPDATE `solvers` SET `online`='1',`ip`='"+  server.getInetAddress() +"' WHERE `user`='"+ input +"'");
        //out.println("Overall message is:" + input);

        server.close();
      } catch (IOException ioe) {
        System.out.println("IOException on socket listen: " + ioe);
        ioe.printStackTrace();
      }
    }
} 
```

发送的行是空的。连接已建立

```
package serversideserver;

import java.io.*;
import java.net.*;
import java.security.*;
import java.sql.*;
/**
 * Title:        Sample Server
 * Description:  This utility will accept input from a socket, posting back to the socket before closing the link.
 * It is intended as a template for coders to base servers on. Please report bugs to brad at kieser.net
 * Copyright:    Copyright (c) 2002
 * Company:      Kieser.net
 * @author B. Kieser
 * @version 1.0
 */

public class Serversideserver {

  private static int port=4445,portsolver=4445, maxConnections=0;
  // Listen for incoming connections and handle them
  public static void main(String[] args) {
    int i=0;

    try{
      ServerSocket listener = new ServerSocket(port);
      Socket server;

      long counter=0;
             int counter1=0;
     int id=0;
      String ip="uninit";
      while((i++ < maxConnections) || (maxConnections == 0)){

        server = listener.accept();
        counter++;
      doComms conn_c= new doComms(server,ip);
        Thread t = new Thread(conn_c);
        t.start();
        //System.out.println("counter "+ (counter % id) );
      }
    } catch (IOException ioe) {
      System.out.println("IOException on socket listen: " + ioe);
      ioe.printStackTrace();
    }

  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T03:34:25.007

I looks like you've got a bit of a timing issue. The following is your code with correct timing. Note that I removed code unnecessary to the issue at hand.

Client: It looks like in the client, you were writing to the socket and immediately terminating the application (causing the connection to close). The doComms class was writing back to the client so I've added code to read the response. If, however, you were not expecting a response, you would still want to read in a byte. This will allow you to make sure you got the EOF rather than some data, and it blocks the current thread and keeps the connection alive.

```
package solverapplet;

import java.io.IOException;
import java.net.Socket;
import java.net.UnknownHostException;
import java.util.logging.Level;
import java.util.logging.Logger;
import java.io.*;

/**
 *
 * @author you
 */
public class Solverapplet {

    /**
     * @param args the command line arguments
     * @throws IOException 
     */
    public static void main(String[] args) throws IOException {
        Socket s = null;
        try {
            // make connection
            s = new Socket("localhost", 4445);

            // define streams
            BufferedWriter out = new BufferedWriter(new OutputStreamWriter(s.getOutputStream()));
            BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream()));

            // write data
            out.write("gamma");
            out.newLine();
            out.flush();

            // read response
            String returnData = in.readLine();
            System.out.println(returnData);

        } catch (UnknownHostException ex) {
            Logger.getLogger(Solverapplet.class.getName()).log(Level.SEVERE, null, ex);
        } catch (IOException ex) {
            Logger.getLogger(Solverapplet.class.getName()).log(Level.SEVERE, null, ex);
        } finally {
            // close connection
            s.close();
        }
    }
} 
```

Server: I've changed the server to allow a maximum number of connections at any given time rather than shutting down after the maximum number of connections has been established. Also, note that I the threads are not daemons. If you want to serve X number clients then shutdown, you need a mechanism to allow the threads to continue executing before shutting down ServerSocket

```
package serversideserver;

import java.io.*;
import java.net.*;

/**
 * Title:        Sample Server
 * Description:  This utility will accept input from a socket, posting back to the socket before closing the link.
 * It is intended as a template for coders to base servers on. Please report bugs to brad at kieser.net
 * Copyright:    Copyright (c) 2002
 * Company:      Kieser.net
 * @author B. Kieser
 * @version 1.0
 */

public class Serversideserver {

    private static int port             =4445;
    private static int maxConnections   =10;

    private static int connections = 0;

    synchronized static void connectionClosed() {
        connections--;
        Serversideserver.class.notify();
    }

    /**
     * The blocking mechanism to only allow <code>maxConnections<code> 
     * @throws InterruptedException
     *      thrown if blocking thread is interupted
     */
    private synchronized static void nextConnection() throws InterruptedException {
        while(connections>=maxConnections) {
            Serversideserver.class.wait();
        }
    }

    public static void main(String[] args) throws InterruptedException {
        try{
            // server socket
            ServerSocket listener = new ServerSocket(port);
            // socket
            Socket socket;

            // Keep the server alive
            while(true){
                // Blocks if we have reached the max
                nextConnection();

                // Accept connection to client
                socket = listener.accept();

                // define request service
                doComms conn_c= new doComms(socket,socket.getInetAddress().getCanonicalHostName());
                Thread t = new Thread(conn_c);
                t.setDaemon(false);

                // run request service
                t.start();
            }
        } catch (IOException ioe) {
            System.out.println("IOException on socket listen: " + ioe);
            ioe.printStackTrace();
        }
    }
} 
```

doComms: Not much has changed with this class... I just cleaned it up a bit and removed unnecessary lines of code.

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package serversideserver;
import java.io.*;
import java.net.*;

class doComms implements Runnable {
    private Socket socket;
    private String ip;

    doComms(Socket socket, String ip) {
        this.socket = socket;
        this.ip = ip;
    }

    public void run () {
        try {
            // Define input/output
            BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
            PrintStream out = new PrintStream(socket.getOutputStream());

            // Process requests until the EOF is found
            String line;
            while((line = in.readLine()) != null && !line.equals(".")) {
                // print input
                System.out.println("LINE: " + line);

                // print process line
                System.out.println("UPDATE `solvers` SET `online`='1',`ip`='"+  ip +"' WHERE `user`='"+ line +"'");

                // write response
                out.println("{\"captcha\":1,\"text\":\"abc\",\"is_correct\":\"true\"}");
            }

            socket.close();
        } catch (IOException ioe) {
            System.out.println("IOException on socket listen: " + ioe);
            ioe.printStackTrace();
        } finally {
        Serversideserver.connectionClosed();
    }
    }
} 
```

Hope this helps :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T04:01:07.287

您的问题非常模糊，但是如果您想知道为什么服务器无法回复您的客户端，那是因为客户端从不从套接字读取。

# c++ - C++ 中的“未定义符号”错误

> ID：11641423
> 
> 赞同：1
> 
> 时间：2012-07-25T01:19:25.087
> 
> 标签：c++, templates, compiler-errors

我昨天发了这个。人们建议我应该拥有`Point.h`和`Point.cpp`文件，因为我使用的是`template`. 我为我的班级创建了单独的文件`Point`，但我仍然收到错误。

```
//Point.h
Point(T = 0, T = 0, string = "Deafault Point");
~Point();
T operator-(const Point<T> &);  

//Point.cpp
template < typename T >
Point<T>::Point(T x,T y, string name)
:X(x), Y(y), Name(name)
{
}

template < typename T >
Point<T>::~Point()
{
}

template < typename T>
T Point<T>::operator-(const Point<T> &rhs)
{
cout << "\nThe distance between " << getName() << " and " 
<< rhs.getName() << " = ";

return sqrt(pow(rhs.getX() - getX(), 2) + pow(rhs.getY() - getY(), 2));;
}

//main.cpp
#include <iostream>
#include <math.h>
#include "Point.h"

using namespace std;

int main () {

Point<double> P1(3.0, 4.1, "Point 1");
cout << P1;

Point<double> P2(6.4, 2.9, "Point 2");
cout << P2;

cout << (P2 - P1);
return EXIT_SUCCESS;
} 
```

这就是我得到的：

```
Undefined symbols:
"std::basic_ostream<char, std::char_traits<char> >& operator<< <double (std::basic_ostream<char,  std::char_traits<char> >&, Point<double> const&)", referenced from:
  _main in main.o
  _main in main.o
"Point<double>::operator-(Point<double> const&)", referenced from:
  _main in main.o
"Point<double>::Point(double, double, std::basic_string<char, std::char_traits<char>, std::allocator<char> >)", referenced from:
  _main in main.o
  _main in main.o
"Point<double>::~Point()", referenced from:
  _main in main.o
  _main in main.o
  _main in main.o
  _main in main.o
ld: symbol(s) not found
collect2: ld returned 1 exit status 
```

任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T01:20:29.100

> 人们建议我应该有 Point.h 和 Point.cpp 文件，因为我使用的是模板

提出这个建议的人大错特错。模板的实现**必须**是可见的。

您可以*将实现分离*到一个文件中，但之后也需要包含它。您可以隐藏模板实现的唯一情况是您知道专业化并事先声明它们。（这里不适用）

您需要一个模板文件：

```
//Point.h

template <typename T>
struct Point
{
   Point(T = 0, T = 0, string = "Deafault Point");
   ~Point();
   T operator-(const Point<T> &);  
};

template < typename T >
Point<T>::Point(T x,T y, string name)
:X(x), Y(y), Name(name)
{
}

template < typename T >
Point<T>::~Point()
{
}

template < typename T>
T Point<T>::operator-(const Point<T> &rhs)
{
cout << "\nThe distance between " << getName() << " and " 
<< rhs.getName() << " = ";

return sqrt(pow(rhs.getX() - getX(), 2) + pow(rhs.getY() - getY(), 2));;
} 
```

此外，标题中的裸露`string`表明您在`using namespace std;`标题中也有一个。这是不好的做法，删除`using`指令并限定 name `std::string`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T01:25:04.537

所有关于模板类的定义和实现代码都应该写在'.h'文件中，否则会出现编译错误。

# python - BeautifulSoup 解析错误的 HTML 表

> ID：11641424
> 
> 赞同：1
> 
> 时间：2012-07-25T01:19:26.110
> 
> 标签：python, regex, beautifulsoup

我正在尝试使用 BeautifulSoup 解析类似于以下内容的表格，以提取每个人的姓名、年龄和职位。

```
<TABLE width="100%" align="center" cellspacing="0" cellpadding="0" border="0">

<TR>
    <TD></TD>
    <TD></TD>
    <TD align="center" nowrap colspan="3"><FONT size="2"><B>Age as of</B></FONT></TD>
    <TD></TD>
    <TD></TD>
</TR>

<TR>
    <TD align="center" nowrap><FONT size="2"><B>Name</B></FONT></TD>
    <TD></TD>
    <TD align="center" nowrap colspan="3"><FONT size="2"><B>November 1, 1999</B></FONT></TD>
    <TD></TD>
    <TD align="center" nowrap><FONT size="2"><B>Position</B></FONT></TD>
</TR>

<TR>
    <TD align="center" nowrap><HR size="1"></TD>
    <TD></TD>
    <TD align="center" nowrap colspan="3"><HR size="1"></TD>
    <TD></TD>
    <TD align="center" nowrap><HR size="1"></TD>
</TR>

<TR>
    <TD align="left" valign="top"><FONT size="2">
    Terry S. Jacobs</FONT></TD>
    <TD></TD>
    <TD></TD>
    <TD align="right" valign="top" nowrap><FONT size="2">57</FONT></TD>
    <TD></TD>
    <TD></TD>
    <TD align="left" valign="top"><FONT size="2">
    Chairman of the Board, Chief Executive Officer, Treasurer and
    director</FONT></TD>
</TR>

<TR><TD><TR><TD><TR><TD><TR><TD>

<TR>
    <TD align="left" valign="top"><FONT size="2">
    William L. Stakelin</FONT></TD>
    <TD></TD>
    <TD></TD>
    <TD align="right" valign="top" nowrap><FONT size="2">56</FONT></TD>
    <TD></TD>
    <TD></TD>
    <TD align="left" valign="top"><FONT size="2">
    President, Chief Operating Officer, Secretary and director</FONT></TD>
</TR>

<TR><TD><TR><TD><TR><TD><TR><TD>

<TR>
    <TD align="left" valign="top"><FONT size="2">
    Joel M. Fairman</FONT></TD>
    <TD></TD>
    <TD></TD>
    <TD align="right" valign="top" nowrap><FONT size="2">70</FONT></TD>
    <TD></TD>
    <TD></TD>
    <TD align="left" valign="top"><FONT size="2">
    Vice Chairman and director</FONT></TD>
</TR>

</TABLE> 
```

我目前的尝试如下：

```
 soup = BeautifulSoup(in_file)
    out = []
    headers = soup.findAll(['td','th'])
    for header in headers:
        if header.find(text = re.compile(r"^age( )?", re.I)):
            out.append(header)
    table = out[0].find_parent("table")
    rows = table.findAll('tr')
    filter_regex = re.compile(r'[\w][\w .,]*', re.I)
    data = [[td.find(text=filter_regex) for td in tr.findAll("td")] for tr in rows] 
```

对于第一个人来说，事情很有效，但糟糕的`<tr><td><tr><td>`……台词真的把事情搞砸了。我正在尝试对几千个 HTML 文件执行此操作，每个文件的表结构都略有不同。也就是说，未关闭标签的这一特性`<tr>`在`<td>`文件中似乎很常见。

任何人都对如何概括上述解析以使用具有此类结构的表有想法？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T02:34:32.450

您可以利用该属性在您想要保留的所有字段`valign`中设置为的事实，而您不想保留的字段中没有一个：`top`

```
soup = BeautifulSoup(in_file)
cells = [cell.text.strip() for cell in soup('td', valign='top')] 
```

然后您可以将这个单元格列表排序为二维结构。每个条目有三个单元格，因此您可以通过执行以下操作非常简单地对其进行排序：

```
entries = []
for i in range(0, len(cells), 3):
    entries.append(cells[i:i+3]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-13T10:29:55.660

万一其他人遇到这个问题并在这里绊倒，现代解决方案是更改您正在使用的解析器。默认解析器“html.parser”在使用足够接近的 HTML 和正确关闭的标签时非常好，但第二个你必须处理边缘情况（如下面的示例 1，类似于 OP 问题），仍然即使在 8 年后也会消失（下面的示例 2）。

在 BeautifulSoup4（当前版本 4.9.3）的文档中，有一个部分详细说明了解析器的选择：[https ://www.crummy.com/software/BeautifulSoup/bs4/doc/#installing-a-parser](https://www.crummy.com/software/BeautifulSoup/bs4/doc/#installing-a-parser)

示例 1，原始 HTML：

```
<TABLE >
  <TR VALIGN="top">
    <td>&nbsp;<td><b>Title:</b>
    <td>&nbsp;title is here <i>-subtitle</i><br>
  <TR VALIGN="top">
    <td>&nbsp;
    <td><b>Date:</b>
    <td>&nbsp;Thursday , August 27th, 2020
  <TR VALIGN="top">
    <td>&nbsp;<td><b>Type:</b>
    <td>&nbsp;61
  <TR VALIGN="top">
    <td>&nbsp;
    <td><b>Status:</b>
    <td>&nbsp;ACTIVE - ACTIVE
</TABLE> 
```

示例 2，使用时的结果`BeautifulSoup(html, 'html.parser')`：

```
<table>
<tr valign="top">
<td> <td><b>Title:</b>
<td> title is here <i>-subtitle</i><br/>
<tr valign="top">
<td>
    <td><b>Date:</b>
<td> Thursday , August 27th, 2020
  <tr valign="top">
<td> <td><b>Type:</b>
<td> 61
  <tr valign="top">
<td>
    <td><b>Status:</b>
<td> ACTIVE - ACTIVE
</td></td></td></tr></td></td></td></tr></td></td></td></tr></td></td></td></tr></table> 
```

示例 3，使用时的结果`BeautifulSoup(html, 'html5lib')`：

```
<table>
  <tbody><tr valign="top">
    <td> </td><td><b>Title:</b>
    </td><td> title is here <i>-subtitle</i><br/>
  </td></tr><tr valign="top">
    <td>
    </td><td><b>Date:</b>
    </td><td> Thursday , August 27th, 2020
  </td></tr><tr valign="top">
    <td> </td><td><b>Type:</b>
    </td><td> 61
  </td></tr><tr valign="top">
    <td>
    </td><td><b>Status:</b>
    </td><td> ACTIVE - ACTIVE
</td></tr></tbody></table> 
```

还有一些用 C 语言外部编写的解析器，例如“lxml”，根据文档，您可能会使用它更快。

# iphone - 标签栏控制器中的嵌套表格视图

> ID：11641425
> 
> 赞同：0
> 
> 时间：2012-07-25T01:19:48.353
> 
> 标签：iphone

我有一个带有四个标签的标签栏。一个选项卡打开一个表视图，其中包含一个项目列表，每个项目都带有一个可打开另一个（嵌套）表视图的披露附件。当披露详细信息视图打开时，我仍然希望看到这些选项卡。目前它已经结束了整个屏幕的写入。任何见解都会非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:18:54.467

您应该将 UITableViewController 嵌套在 UiNavigationController 中。如果您正在使用情节提要构建您的应用程序，您可以单击 UITableView，单击`Editor`菜单，然后选择 Embed in - UINavigationController。你完成了。

# mysql - 单个提交中的多个值

> ID：11641428
> 
> 赞同：0
> 
> 时间：2012-07-25T01:20:12.647
> 
> 标签：mysql

我一直在搜索谷歌以找到代码，但我找不到它。我想做的很简单，但我不是 php 专家。

我想在一次按下提交按钮时插入多个城市的名称（如果可能的话）

我创建了一个包含 2 个表的数据库：“城市”和“州”，并且填充了 states 表

所以我需要两个字段或框，一个用于状态，它是下拉“选择”框，已经填充了状态名称，从数据库中提取，

另一个是文本类型字段（type="text"）的城市字段。

我希望能够输入多个城市名称，可能用“，”逗号分隔，并且只需按一下提交按钮，所有值都将插入 mysql 城市表并进入下一个状态。

我知道我需要创建某种循环，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T01:53:54.403

## *index.php (html):

```
<html>
    <body>
        <form action="save.php" method="POST">
            <input type="text" name ="cities" value="">
            <input type="text" name ="state" value="">

            <input type="submit">
        </form>
     </body> 
```

## *保存.php：

```
<?php
/* -------include you db connection here ----*/

     if(isset($_POST['çities']) && $_POST['çities'] !='' && isset($_POST['state']) &&  $_POST['state'] !=''){

             $cities =  explode (',', $_POST['çities']);
             $n = count($cities);
             for($i=0;$i<$n;$i++){
             //Insert data
                    mysql_query("insert into `cities` (city,state) values  ('".$cities[$i]."','".$_POST['state']."') or die(mysql_error());

              } 
```

}

?>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T01:25:34.540

首先，您以如下形式创建输入：

```
<input type="text" name="cities"/> 
```

然后你输入：纽约、新泽西、旧金山、丹佛等。

然后在接收数据的 .php 文件上（我猜它是一个 $_POST 变量），所以 $_POST['cities'] 然后，你拆分它并循环：

```
// split the values by comma
$_POST['cities'] = explode(',',$_POST['cities']);

// loop the values
foreach($_POST['cities'] as $city) {

    // trim (delete white space at the end and start for safety)
    $city = trim($city);

    mysql_query("insert into `cities` ('city','state') values ('".$city.','".$_POST['state']."');

} 
```

并做了。

# javascript - 您应该在 AJAX 内容网站上使用 hashbang，还是只使用普通 URL？

> ID：11641431
> 
> 赞同：2
> 
> 时间：2012-07-25T01:20:59.837
> 
> 标签：javascript, ajax, hashbang, graceful-degradation

所以我正在创建一个相当普通的基于内容的网站，它将通过 AJAX 加载新页面/内容，以获得更流畅的用户体验和一些简单的过渡。我看到很多人使用 hashbang 进行类似的实现。

我的问题是为什么不只使用常规 URL 并让服务器端根据 XMLHttpRequest var 确定是否应该提供常规页面或 JSON/XML/等？乍一看，拥有一个 URL 似乎更有意义，我很好奇为什么我在最初的搜索中没有提到这个想法/方法。也许我只是错过了一些东西......

**回答**： 我错过了在 HTML5 历史之前不可能在没有页面加载的情况下更新完整 URL。这就是我产生困惑的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T01:23:32.357

如果您只有 1 个网址，则用户无法为您网站上的任何内容添加书签。所以你需要做点什么。

因此，您可以使用 hashbangs（又名锚点），或者，如果您的目标是相当新的浏览器，则可以使用[html5 history](http://diveintohtml5.info/history.html)。

您不能使用常规 url，因为当您更改 url 时，整个页面会重新加载。

# git - git - 我如何获得新分支的名称？

> ID：11641434
> 
> 赞同：0
> 
> 时间：2012-07-25T01:21:20.157
> 
> 标签：git, github, repository, clone

我使用 git 已经有一段时间了，并且对大多数操作都很熟悉，推、拉、合并、分支、分叉等。

我的问题是关于“当我克隆存储库时，我会得到所有代码的副本，包括所有分支”，我认为这是正确的。

但是，当其他人创建一个分支然后将该分支推送到 github 时会发生什么 - 只是未合并的分支。除非我专门按分支名称 git pull 它，否则我不会“获取”这个新分支吗？看起来就是这样。如果我从头开始并再次克隆整个存储库，这是否意味着我将获得新的分支？我的关键问题是 - 我怎么知道存在哪些其他分支。也就是说，虽然我个人可能从开发人员那里“知道”分支名称，但如果我不知道怎么办 - 我的“本地” git clone 如何知道新的分支名称？是当我 git pull origin master 得到新分支的名称然后我必须使用 master 列表中的 new_branch_name 来 git pull origin [new_branch_name] 吗？

> 我如何知道遥控器上新分支的名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T01:30:33.703

`git fetch`将为您的存储库下载任何更新，包括新分支。

fetch 命令的输出将表明正在/已经下载了新的分支。

然后，您可以使用`git branch -r`来查看可用的远程分支列表。除非您先执行 fetch 命令，否则您不会在此输出中看到新分支。

# python - Django告诉我模板不存在

> ID：11641435
> 
> 赞同：1
> 
> 时间：2012-07-25T01:21:30.420
> 
> 标签：python, django

出于某种原因，Django 告诉我我尝试加载的模板不存在。当我查看路径时，似乎它尝试加载的第一个模板实际上一个接一个地重复了路径两次。我的模板目录只列出一次以下路径：

'/Users/jonathanschen/python/projects/skeleton/yectime/templates'

但是加载器尝试加载

'/Users/jonathanschen/python/projects/skeleton/yectime/Users/jonathanschen/Python/projects/skeleton/yectime/templates/base.html'

有什么想法可能导致这种情况吗？提前致谢。

```
Template-loader postmortem

Django tried loading these templates, in this order:
Using loader django.template.loaders.filesystem.Loader:
/Users/jonathanschen/python/projects/skeleton/yectime/Users/jonathanschen/Python/projects/skeleton/yectime/templates/base.html (File does not exist) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:39:05.723

看起来你有：

```
TEMPLATE_DIRS = ('Users/jonathanschen/Python/projects/skeleton/yectime/templates',) 
```

你应该在哪里：

```
TEMPLATE_DIRS = ('/Users/jonathanschen/Python/projects/skeleton/yectime/templates',) 
```

（注意前导斜杠“/”）。

不以斜线开头的路径是“相对”路径；它被添加到当前目录的路径中。鉴于您`manage.py`可能在 中`/Users/jonathanschen/Python/projects/skeleton/`，Django 尝试查找模板的路径最终会成为您在上面发布的又长又错误的路径。

# iphone - 是否可以在未越狱的 iPhone 上查看其他应用程序？

> ID：11641436
> 
> 赞同：1
> 
> 时间：2012-07-25T01:21:51.153
> 
> 标签：iphone, ios, ios5

任何方式来做到这一点：我想看看用户的 iPhone 上安装了哪些其他应用程序。我不这么认为，但我很肯定有人会比我更了解。

如果没有，您可以通过 iTunes 在桌面上访问吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T03:29:10.097

您无法检查其他应用程序的文件系统，因为您看不到沙盒之外的任何内容（iCloud、照片等除外）。但是，如其他答案中所述，您可以检查应用程序的 URL 方案是否可用。

```
if ([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"fb://"]]) {

    //Facebook is installed

} 
```

如果您想打开某些内容，例如 Facebook 中用户的新帖子，这将非常有用。如果您不打算为了用户的直接利益而使用此功能，**请不要使用它**。这完全侵犯了他们的隐私。

# javascript - 在 Internet Explorer 中使用 JavaScript 覆盖外部对象的函数

> ID：11641437
> 
> 赞同：1
> 
> 时间：2012-07-25T01:21:57.473
> 
> 标签：javascript, internet-explorer, refactoring, external

我目前正在开发一个仅限 IE 的项目，该项目使用主机应用程序提供的外部对象模型。Internet Explorer 允许通过浏览器组件访问此外部对象：http: [//msdn.microsoft.com/en-us/library/ie/ms535246 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms535246(v=vs.85).aspx)

对对象的访问采用 JavaScript 函数调用的形式，类似于：

```
external.MethodName(arg1, arg2); 
```

最近对应用程序流程的更改之一将围绕这些 JavaScript 调用引入数百甚至数千个 if 语句条件，例如：

```
if (X) {
    external.MethodName(arg1, arg2);
} else {
    // do something else
} 
```

与其修改潜在的数千个 HTML 文件，不如重写或重写外部对象的函数以使 if 条件只出现在一个地方似乎是有意义的。通常，这可以在 JavaScript 中通过以下方式完成：

```
external.OldMethodName = external.MethodName;
external.MethodName = function(arg1, arg2) {
    if (X) {
        external.OldMethodName(arg1, arg2);
    } else {
        // do something else
    }
}; 
```

但是，这会导致“无效的过程调用或参数”脚本错误，因为您不能以这种方式引用外部宿主方法。

我无权访问主机应用程序专有代码来直接更改外部方法。

有什么方法可以使用 JavaScript 来覆盖外部对象的函数，还是需要用 if 语句包装（潜在的）数千次调用（一个非常糟糕的做法）？

**更新：**在与客户反复多次后，我们设法与第三方供应商联系以更新外部主机方法，这比我们在前端包装方法的方法要好得多。与此同时，我已经接受了保罗的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:26:17.177

使用 toString() 和 eval：

```
var foo = external.MethodName.toString().replace("OldMethodName", "MethodName").replace("bar","baz");
eval(foo);
if(x) 
  { 
  external.OldMethodName(arg1,arg2);
  }
else
  {
  MethodName(arg1,arg2)
  } 
```

# c# - LINQ Rest Services - 跨服务加入

> ID：11641438
> 
> 赞同：0
> 
> 时间：2012-07-25T01:22:17.613
> 
> 标签：c#, wcf, linq, web-services, rest

嗨，我正在创建汽车租赁网络服务，但我需要将每个任务彼此分开。因此，我为客户提供了一项服务，它只是通用的名字、姓氏、年龄等。我还提供了一项雇用日期服务，其中包含雇用日期和雇用天数（稍后将用于计算成本）。

我的问题是试图**链接** `IHireDates`到`ICustomers`下面的（最终是汽车）是一个设置示例，我只是使用控制台应用程序来托管这些不同的服务来练习。

![在此处输入图像描述](../Images/f41ff17d7e7c957474b463c1d6d42cad.png)

下面是我的 ICustomers 和 IHireDate 服务我正在尝试将 IHireDate 链接到客户，但我不知道该怎么做：

**ICustomer（服务器端）**

```
namespace WcfServiceLibrary3
{
    #region Customer DataContract
    [DataContract(Name = "Customers")]
    [ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]
    [Serializable]
    public class Customers : ICustomers
    {

            [DataMember(Name = "CustomerID")]
            public string CustomerID { get; set; }
            [DataMember(Name = "FirstName")]
            public string FirstName { get; set; }
            [DataMember(Name = "LastName")]
            public string LastName { get; set; }
            [DataMember(Name = "Age")]
            public string Age { get; set; } 
```

**IHireDates（服务器端）：**

```
namespace WcfServiceLibrary3
{
    #region HireDate DataContract
    [DataContract(Name = "HireDate")]
    [ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]
    [Serializable]
    public class HireDate : IHireDate
    {
    [DataMember(Name = "HireFromDate")]
    public string HireFromDate { get; set; }
    [DataMember(Name = "HireToDate")]
    public string HireToDate { get; set; }
    [DataMember(Name = "NumberOfDaysToHire")]
    public string NumberOfDaysToHire { get; set; }

    #endregion

        #region Lists
        List<HireDate> HireDates = new List<HireDate>();
        #endregion

        public void ICustomers.AddCustomerHireDates(string hirefromdate, string hiretodate, string customerID, string firstname, string lastname)
        {
            // not sure this will work
            var result = ICustomers.Where(n => String.Equals(n.CustomerID, customerID)).FirstOrDefault();
            if (result != null)
            {
                result.HireDates.Add(new ICustomers() { CustomerID = customerID, FirstName = firstname, LastName = lastname });
            }
        } 
```

例如，我不确定这是否正确`ICustomers.AddCustomerHireDates`，并`ICustomers.Where`说客户没有定义在哪里。如果有人可以提供帮助，我真的不知道如何执行此跨 LINQ 服务，我将不胜感激。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.Serialization;
using System.Runtime.InteropServices;
using System.ServiceModel;

namespace WcfServiceLibrary3
{
    #region Customer DataContract
    [DataContract(Name = "Customers")]
    [ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]
    [Serializable]
    public class Customers : ICustomers
    {

            [DataMember(Name = "CustomerID")]
            public string CustomerID { get; set; }
            [DataMember(Name = "FirstName")]
            public string FirstName { get; set; }
            [DataMember(Name = "LastName")]
            public string LastName { get; set; }
            [DataMember(Name = "Age")]
            public string Age { get; set; }

    #endregion

            #region Lists
            List<Customers> customermembers = new List<Customers>();
            int eCount = 0;
            #endregion

            public void AddCustomer(Customers customer)
            {
                customer.CustomerID = (++eCount).ToString();
                customermembers.Add(customer);
                //BinaryFormatter f = new BinaryFormatter();
                //Stream w = new FileStream("c:\\list.dat", FileMode.Append);
                //f.Serialize(w, staff);
                //w.Close();
            }
            public void RemoveCustomer(string customerID)
            {
                customermembers.RemoveAll(s => s.CustomerID == customerID);
            }
            public List<Customers> GetCustomerCollection()
            {
                return customermembers;
            }
            public void UpdateCustomer(string customerID, Customers customer)
            {
                var findCustomerMember = customermembers.Where(s => s.CustomerID == customerID).FirstOrDefault();

                if (findCustomerMember != null)
                {
                    findCustomerMember.CustomerID = customer.CustomerID;
                    findCustomerMember.FirstName = customer.FirstName;
                    findCustomerMember.LastName = customer.LastName;
                    //findStaffMember.TimeAdded = staff.TimeAdded;
                    //BinaryFormatter f = new BinaryFormatter();
                    //Stream w = new FileStream("c:\\updatelist.dat", FileMode.Append);
                    //f.Serialize(w, staff);
                    //w.Close();
                }

            }
            public List<Customers> GetCustomer(string anything)
            {

                List<Customers> customers = customermembers.Where(n =>
                                               string.Equals(n.CustomerID, anything, StringComparison.CurrentCultureIgnoreCase)
                                               || string.Equals(n.FirstName, anything, StringComparison.CurrentCultureIgnoreCase)
                                               || string.Equals(n.LastName, anything, StringComparison.CurrentCultureIgnoreCase)
                                               || string.Equals(n.Age, anything, StringComparison.CurrentCultureIgnoreCase)
                                           ).ToList();
                return customers;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T02:19:37.260

除非您想编写自己的 LINQ 提供程序，否则您将不得不求助于使用 LINQ to Objects。这意味着您必须从两个服务中加载结果，然后执行连接。

我真的不认为这是一个好主意，我认为沿着这条路走下去会充满问题。

另一种方法是编写您自己的各种 rdbms（可能还有一个 LINQ 提供程序来包装它）。还有一条我不推荐的路线。

我想您可以拥有*第三个*服务来为其他两个服务提供数据，因此您可以将所有数据放在一个地方以便能够真正加入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T02:26:20.617

```
 public Customer GetCustomerByHireDates(string hirefromdate, string hiretodate)
    {
        var customerID = HireDates.Where(h => h.HireFromDate == hirefromdate && h.HireToDate == hiretodate).Select(sl=>sl.CustomerID).FirstOrDefault();
        Customers customer = null;
        var customers = new Customers().GetCustomerCollection();
        if (customers != null)
        {
            customer = customers.Where(c=>c.CustomerID==customerID).FirstOrDefault();

        }
        return customer;  
    } 
```

我希望 HireDate 类中的 HireDates 列表包含 HireDates 并且 HireDate 类具有属性 HireFromDate 和 HireToDate 和 CustomerID

# android - phonegap jQuery .ajax 跨域请求在浏览器中工作，在 Android SDK 中失败

> ID：11641442
> 
> 赞同：2
> 
> 时间：2012-07-25T01:23:29.147
> 
> 标签：android, ajax, json, cordova, cross-domain

我已经为此工作了三天，并且几乎尝试了所有替代代码和修复程序，但均无济于事。

下面是代码，取自沼泽标准 jQuery 示例：

```
 $.ajax({
            url: "http://api.wunderground.com/api/4213a68e7f20c998/geolookup/conditions/forecast/q/Australia/Noarlunga.json",
            dataType: "jsonp",
            success: function(parsed_json) {
               alert("YEP!");
               var loc = parsed_json['response'];
               var weather = "Location: " + parsed_json.location.city + "<br />";
               weather += "Wind: " + parsed_json.current_observation.wind_dir + " ";
               weather += parsed_json.current_observation.wind_mph + "-" + parsed_json.current_observation.wind_gust_mph + " knts";
               $("#info").html(weather);
           }    
    }); 
```

这是很多人建议的一些配置（什么也没做）

```
 $( document ).bind( "mobileinit", function() {
        // Make your jQuery Mobile framework configuration changes here!
        $.mobile.allowCrossDomainPages = true;
        $.mobile.ajaxEnabled = true;
        $.mobile.pushStateEnabled = false;
        $.mobile.allowCrossDomainPages = true;  
    }); 
```

此外，我有：

*   将 <uses-permission android:name="android.permission.INTERNET" /> 添加到 AndroidManifest.xml 文件中

*   在同一目标上测试浏览器中的 json 请求 URL（工作正常）

*   在 FireFox / Chrome 中测试页面（工作正常）
*   通过 3G 在我的 Galaxy s2 上尝试了该应用程序（UI 一切正常，但 ajax 请求仍然失败）

请注意，这不是完整的代码，但它只是位于标准 phonegap deviceready 侦听器事件函数中，该函数包装在标准 .ready() 函数中。

这在我的手机和 SDK 上失败的事实似乎表明存在 phonegap / Eclipse 问题，而不是连接 / 权限问题。

我正在尝试使用 Android SDK 部署到 Android 2.3 AVD。我还没有尝试部署到 Android 4 AVD。

如果有人知道问题出在哪里，我会很高兴，因为我已经没有尝试的建议了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T15:13:57.370

如果前提是您可以修改服务器上的php代码..

试试这个，这样您就可以在本地浏览器或没有 JSONP 的移动设备上进行测试

1.按照jQueryMobile网站的说明，很好地解释了如何使它与phonegap一起工作（http://jquerymobile.com/test/docs/pages/phonegap.html）

在您所在的`<script></script>`地区，添加

```
$(document).on("mobileinit", function(){
  //apply overrides here
  $.mobile.allowCrossDomainPages = true;
  $.support.cors = true;

}); 
```

你的ajax可能是

```
$.ajax({
           type: "GET",
           url: "http://xx.xx.xx.xx/xxx/xx.php"
        }).done(function( msg ) {
           alert(msg);
           //refresh the content
           $( '.ui-content' ).load( 'xx/xx.html', function ()  {$(this).trigger('create') });
        }); 
```

2.你的php是这样的：

```
 <?php
    header('Access-Control-Allow-Origin: *');//for local browser test
    $test='[{"name":"aa","address":"aa"}, {"name":"bb","address":"bb"}]';
    echo $test;
 ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T02:54:36.093

在

```
$( document ).bind( "mobileinit", function() 
```

添加

```
$.support.cors = true. 
```

:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-11T00:40:56.477

我尝试了很多组合，最终奏效的是将以下内容添加到我的 index.html 中。关键是确保在加载 jquerymobile 之前加载它（如果您正在使用它）。如果在此之后将其加载到任何地方，它将无法正常工作。

```
<script type="text/javascript">
$(document).bind("mobileinit", function() {
    $.support.cors = true;
    $.mobile.allowCrossDomainPages = true;
});
</script> 
```

# javascript - 函数和回调的代码约定

> ID：11641446
> 
> 赞同：2
> 
> 时间：2012-07-25T01:23:52.487
> 
> 标签：javascript

所以我开始学习 javacript，我注意到函数和回调的编码约定是这样的（这是一个 jQuery 示例，但我到处都看到了这些）：

```
$.getJSON('some/url.json', function(a) {
// do stuff with a here
}); 
```

来自其他语言，我通常会这样写：

```
function myFunction(myVar){
//do stuff with myVar here
};

$.getJSON('some/url.json', myFunction()); 
```

为什么前者通常是首选的 JS 编写方式，而不是 [可能更易读] 后者？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T02:42:12.090

使用第二种更明确的格式有很多充分的理由（假设您解决了评论中列出的问题），包括：

*   重用作为回调传递的函数
*   给该函数一个明确的名称，以使其更易于调试
*   确保该功能在您的系统中被标记为重要的东西
*   分离出这些功能，因为它太长了，无法舒适地声明

但是第一种格式，将匿名函数作为回调传递是简短而甜蜜的。如果您不需要重用该函数，如果它相对较短，并且如果它在您的系统中不是很重要，那么在您使用它的确切位置声明它会非常有用。您避免在您的范围中添加另一个变量，并且您完全清楚该函数的用途。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T01:29:03.727

这不是首选方式。你可以做任何你想做的事。但是，如果您需要重用该函数，那么您需要执行第二个选项，或者以下选项来重用代码：

```
// in some accessible context/namespace
App.myCallback = function(a){
...
};

// somewhere else
$.getJSON('url', App.myCallback); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T01:29:13.337

您的第一个示例是所谓的匿名函数或块。当它们只被调用一次时使用它们。第二个例子是当你多次使用这个函数时......如果你一遍又一遍地重复匿名块，那将是很多浪费的输入。

# ruby - 将数组映射到方法的连续非零值？

> ID：11641451
> 
> 赞同：0
> 
> 时间：2012-07-25T01:24:27.783
> 
> 标签：ruby

所以，我有`x`变量名，我想从一个方法中分配给`x`连续的非`nil`值……我该怎么做？

例如，我想映射到以 0 开头的函数`%w[alpha beta gamma]`的三个连续的非`nil`值。`get(x)`

因此，假设的值为`get(x)`, `get(0)=1`, `get(1)=54`, `get(2)=nil`。`get(3)=6`我想要`alpha = 1`,`beta = 54`和`gamma = 6`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T02:17:42.300

设置散列键/值对可能无法真正回答问题，但对于实际程序来说，它几乎总是正确的解决方案......

```
def get x # test sub
  [1, 54, nil, 6][x]
end

# find the next n non-nil values of an integer function
def find n, sofar, nextval
  return sofar if sofar.length >= n
  return find n, (sofar << get(nextval)).compact, nextval + 1
end

h = {}
h[:alpha], h[:beta], h[:gamma] = find 3, [], 0
p h 
```

# java - Java ArrayLists - 涉及比较

> ID：11641458
> 
> 赞同：0
> 
> 时间：2012-07-25T01:25:50.550
> 
> 标签：java

我将要解释的这个概念似乎很难讨论，但我会尽量提供尽可能多的细节。

所以有2个班。其中一个用于设置 setter 和 getter 的属性，另一个文件是我进行所有比较的主要文件。

我想做的比较是在数组内，但是要考虑的属性太多了。这是它目前的样子：

```
[[Year, Month, type1, type2, name, $], [Year, Month, type1, type2, name, $], [Year, Month, type1, type2, name, $]] 
```

只有两个整数是 $ 和 year，其余的是字符串。现在您已经知道我正在使用什么样的属性，这里有一个小片段，我用它来从 Excel 中收集这些信息。

```
ArrayList<customType> workList = new ArrayList<customType>();
 for (int i = start; i <= end; i++) {
     Row r = sheet.getRow(i);
    ArrayList tmp = new ArrayList();
      tmp.setYear((int) row.getCell(0).getNumericCellValue());
      tmp.setMonth(row.getCell(1).getStringCellValue());
      tmp.setType1(row.getCell(2).getStringCellValue());
      tmp.setType2(row.getCell(3).getStringCellValue());
      tmp.setName(row.getCell(4).getStringCellValue());
      tmp.setPrice((int) row.getCell(5).getNumericCellValue());

    workList.add(temp);
 } 
```

好的，所以我在 arraylist 中有一个可能有 500 行的列表。它们按 excel 中的年份和月份排序。

前任：

*   2010 年 12 月游戏射击游戏 HaloReach 45 美元
*   2010 年 12 月 Game Racing Forza 60 美元
*   2010 年 12 月 等等 等等 等等 等等
*   2011 年 1 月 等等 等等 等等 等等
*   2011 年 1 月 Game Racing Forza 60 美元
*   2011 年 1 月游戏射击游戏 HaloReach 45 美元
*   2011 年 2 月 Game Board Monopoly 20 美元
*   2011 年 3 月 等等 等等 等等 等等
*   2011 年 3 月 等等 等等 等等 等等
*   2011 年 4 月游戏射击游戏 HaloReach 45 美元

所以对于 HaloReach 游戏，你可以看到它在 3 月和 2 月缺少一个字段。我想回到列表中并添加年、月、类型 1、类型 2、名称，但是对于价值 0 美元另外，看看大富翁游戏，它不存在未来或现在，我想复制粘贴0 美元的东西，但对于我列出的每个月。

前任：

*   2010 年 12 月游戏射击游戏 HaloReach 45 美元
*   2010 年 12 月 Game Racing Forza 60 美元
*   2010 年 12 月游戏板垄断 $ 0
*   2010 年 12 月 等等 等等 等等 等等
*   2011 年 1 月 等等 等等 等等 等等
*   2011 年 1 月 Game Racing Forza 60 美元
*   2011 年 1 月游戏射击游戏 HaloReach 45 美元
*   2011 年 2 月 Game Racing Forza $0
*   2011 年 2 月游戏射击游戏 HaloReach 0 美元
*   2011 年 2 月 Game Board Monopoly 20 美元
*   2011 年 3 月 等等 等等 等等 等等
*   2011 年 3 月 等等 等等 等等 等等
*   2011 年 3 月 Game Racing Forza 0 美元
*   2011 年 3 月游戏射击游戏 HaloReach 0 美元
*   2011 年 3 月游戏板垄断 $0

我可以为此使用哈希集吗？我一直在尝试这个，但我无法完成它。我有 500 行注释代码，哈哈。

我这样做的主要原因是我可以创建另一个 arrayList 来保存前几个月的 $$ 临时 arrayList。示例：此数组列表将仅显示当前月份：

```
 2011 Mar Game Racing Forza [60, 60, 0, 0] <-- from latest to oldest
  2011 Mar Game Shooter HaloReach [45, 0, 45, 45]
  etc.. 
```

如果名称没有出现在列表中，我想为价格添加 0..但我想查看当前月份。有更好的方法吗？如果需要，我可以尝试提供更好的解释。

编辑：我在没有 mysql 数据库的情况下完成了它。我花了6个多小时。谢谢大家的建议。也许下次我会尝试mysql的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T01:32:06.220

一种更有意义的方法是使用真正的数据库，例如 MySQL，您可以使用 SQL 轻松地对其进行查询、排序和组织。这将为您想要对这些数据执行的任何操作提供简单的解决方案。到目前为止，您选择的道路只会导致疯狂和绝望。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T01:57:48.627

如果我是你，我会从更好地分解我的对象开始。当你把你的系统分解成更合乎逻辑的组件时——它们真的可以开始为你做繁重的工作。考虑以下：

```
public class Game
{
  private String name;
  private String category;
  private Map<String, Double> pricesByDate;

  // Constructors, getters, setters

  public void addPrice(String monthYear, Double price)
  {
     pricesByDate.put(monthYear, price);
  }

  public Double getPrice(String monthYear)
  {
    // here, let the object do the work for you
    Double price = pricesByDate.get(monthYear);
    return price != null ? price : 0.0;
  }
} 
```

因此，与其担心到处填充 0，不如让对象足够聪明，以便在找不到数据时报告 0。

现在更改您的解析器以构建游戏列表。

# php - 使用 javascript 或 PHP 从给定 URL 获取图像源

> ID：11641469
> 
> 赞同：0
> 
> 时间：2012-07-25T01:27:48.123
> 
> 标签：php, javascript, image, url, screenshot

我想要做的是：

1.  [用户使用jing](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CGcQFjAA&url=http://www.techsmith.com/jing.html&ei=0BUPUPSZM4Xc4QSTsIGQDQ&usg=AFQjCNFxBdGWiUwDtpVS6-Lhzey4DVTYNg&sig2=yumdpd36XS-HSbMLsHtOXA)等应用程序截取屏幕截图。**行！**
2.  粘贴Jing返回的链接。**行！**
3.  服务器处理用户输入的链接，并提取图像源 url。但是，我**不知道**服务器将如何获得“干净”的图像源 URL。例如，这是 Jing 分享截图后返回的链接[http://screencast.com/t/zxBzNNkcg](http://screencast.com/t/zxBzNNkcg)但图片的真实 url 看起来像[http://content.screencast.com/users/TT13/folders/Jing/media /c25ec5c6-bc6a-413c-a50b-ada95fac4ed2/2012-07-25_0221.png](http://content.screencast.com/users/TT13/folders/Jing/media/c25ec5c6-bc6a-413c-a50b-ada95fac4ed2/2012-07-25_0221.png)
4.  服务器返回图像源 URL。**不知道！**

有没有可能使用 Javascript 或 PHP 获取图像 url 的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T01:34:57.507

您可以使用[Simple PHP DOM Parser](http://simplehtmldom.sourceforge.net/) 从 url 中检索图像，而无需考虑 url，只要它包含和内部的图像，如下所示：

```
foreach($html->find('div[class=div-that-contain-the image]') as $div) {         
        foreach($div->find('img') as $img){     
            echo "<img src='" . $img->src . "'/>";          
        }

    } 
```

这就是我的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T01:31:34.910

[您可以使用Query Path 之](http://querypath.org/)类的 DOM 库检索包含图像的页面。

使用它，您可以提取图像的 URL。

所以在你的第3步：

*   获取共享截图页面的来源（可能使用[`file_get_contents`](http://php.net/manual/en/function.file-get-contents.php)）
*   [使用Query Path](http://querypath.org/)提取屏幕截图的图像 src 。
*   将图片 src URL 返回给用户

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T01:33:29.043

是的。如果您右键单击图像并转到复制图像位置，您会看到它是[http://content.screencast.com/users/TT13/folders/Jing/media/c25ec5c6-bc6a-413c-a50b-ada95fac4ed2/2012- 07-25_0221.png](http://content.screencast.com/users/TT13/folders/Jing/media/c25ec5c6-bc6a-413c-a50b-ada95fac4ed2/2012-07-25_0221.png)

如果您以编程方式执行此操作，您将使用 cURL 和 simplehtmldom.sourceforge.net 来解析输出的 HTML 以获得实际链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T03:01:02.390

Javascript 答案：

输出图像是否总是具有相同的类别`embeddedObject`？

如果是这样，怎么样：

```
myVar = document.getElementsByClassName('embeddedObject');
myVar[0].getAttribute("src"); 
```

引用当然假设页面上只有一个带有 embeddedObject 类的`myVar[0]`图像，否则您需要排序，或者知道每次要引用哪个索引。

此外，令人遗憾的是，IE8 似乎不支持此功能（您需要支持哪种浏览器？）： [http ://caniuse.com/getelementsbyclassname](http://caniuse.com/getelementsbyclassname)

# c# - c# - 为什么这个 OrderBy 参数是错误的？

> ID：11641473
> 
> 赞同：1
> 
> 时间：2012-07-25T01:28:27.360
> 
> 标签：c#, linq, delegates

我在使用 Delegate 和 OrderBy 扩展方法时遇到问题。谁能告诉我为什么？提前致谢。下面是整个代码：

```
namespace StudyDemo
{
    public class MyDelegate
    {
        public delegate TResult DelegateOrder<in T, out TResult>(T arg);
    }

    public class Product
    {
        public string Name { get; private set; }
        public decimal? Price { get; set; }

        public Product(string name, decimal price)
        {
            Name = name;
            Price = price;
        }

        /* private parameterless constructor for the sake of the new property-based initialization. */
        Product() { }

        public static List<Product> GetSampleProducts()
        {
            return new List<Product>
                 {
                    new Product { Name="West Side Story", Price=9.99m },
                new Product { Name="Assassins", Price=14.99m },
                new Product { Name="Frogs", Price=13.99m },
                new Product { Name="Sweeney Todd", Price=10.99m }
                 };
        }

        public override string ToString()
        {
            return string.Format("{0}: {1}", Name, Price);
        }
    }

    public partial class FrmMain : Form
    {
        public FrmMain()
        {
            InitializeComponent();
        }

        public string myOrder(Product p)
        {
            return p.Name;
        }

        private void button2_Click(object sender, EventArgs e)
        {
            List<Product> products = Product.GetSampleProducts();

            Func<Product, string> orderDelegate2 = myOrder;
            foreach (Product product in products.OrderBy(orderDelegate2))
            {
                /* Do something */
            }

            MyDelegate.DelegateOrder<Product, string> myOrder2 = myOrder;
            foreach (Product product in products.OrderBy(myOrder2))   /*  not functioning, why? */
            {
                /* Do something */
            }
        }
    }
} 
```

注意以下： **DelegateOrder**委托和 Func 委托是相同的。**我只是将Func**委托复制到**DelegateOrder**委托。

在上面的代码示例中，该行`foreach (Product product in products.OrderBy(myOrder2))` 不起作用，谁能告诉我为什么？

这是编译代码时的错误：

`The type arguments for method 'System.Linq.Enumerable.OrderBy<TSource,TKey>(System.Collections.Generic.IEnumerable<TSource>, System.Func<TSource,TKey>)' cannot be inferred from the usage. Try specifying the type arguments explicitly.`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T01:40:33.447

**OrderBy**需要一个 Func 类型的委托。您的代表不是 Func 类型，这就是它抱怨的原因。即使它们的签名相同，Func 和 DelegateOrder 也不相同。委托声明定义了派生自 System.Delegate 类的类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T02:01:14.287

编译器无法将您的自定义委托类型 DelegateOrder 转换为 System.Func（这是 IEnumerable.OrderBy 预期的参数）。

尽管事实上两者本质上具有相同的签名。首选使用 System.Func，因为它提供了具有相同签名的委托之间的互操作。

如果我是你，我会简单地使用内联匿名函数来处理排序：

```
foreach(Product product in products.OrderBy((Product source)=>source.Name))
{
    // Do something...
} 
```

有趣的是 - 对于奖励积分 - 如果您确实想使用委托对象，则以下内容将起作用：

```
foreach(Product product in products.OrderBy((x)=>myOrder2(x)))
{
   // Do something...
} 
```

# ios - 避免递归bannerView：didFailToReceiveAdWithError：在iPad上

> ID：11641478
> 
> 赞同：2
> 
> 时间：2012-07-25T01:29:14.453
> 
> 标签：ios, ipad, iad

我有一个使用 iAd 的 iPhone 应用程序，并回退到 AdMob 广告：

```
- (void)bannerViewDidLoadAd:(ADBannerView *)banner {

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3f];

    adBannerView.frame = CGRectMake(0, 410, 320, 50);

    [UIView commitAnimations];

    // hide the admob ad
    if(adMobView != nil && adMobView.superview != nil) {
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.3f];
        adMobView.frame = CGRectMake(0, 460, 320, 48);
        [UIView commitAnimations];
    }
}

- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error {

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3f];

    // hide banner
    adBannerView.frame = CGRectMake(0, 460, 320, 50);
    [UIView commitAnimations];

    if(adMobView != nil && adMobView.superview != nil) {
        [adMobView requestFreshAd];
    } else {
        adMobView = [AdMobView requestAdWithDelegate:self];
        adMobView.frame = CGRectMake(0, 460, 320, 48);
        [self.view addSubview:adMobView];
    }
} 
```

这在 iPhone 上运行良好。但是，当应用程序在 iPad 上运行时，这种情况会再次出现；（特别是对'self.view'的调用）根据[ViewController.view 引用](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW2)`[self.view addSubview:adMobView];`调用 loadView ，它尝试再次布局 AdBannerView，这再次触发失败。

我认为这与 iPad 上的窗口边界比 iPhone 更大/不同，以及确定是否尝试加载 AdBanner 的规则有关。

一种解决方案可能是将我硬编码的边界调整为更远（因此超出 iPad 的更大范围）。另一种解决方案是完全避免 self.view 调用/递归风险并以另一种方式进行 - 但是，AdMobView 有点挑剔，并且真的希望被实例化`requestAdWithDelegate`，如果我将它放在 viewDidLoad 中，这还为时过早。

哪种方法是明智的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-31T03:54:22.350

我在 iPad 上遇到了类似的问题，只是所有以 self.view 开头的调用在bannerView:didfailToReciveAdWithError 上导致了递归错误。我认为这与调用 didfailToReciveAdWithError 方法时尚未分配 self.view 中的视图有关。为了修复它，我从该方法中删除了对 self.anything 的所有调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T17:29:26.003

解决方案是不请求新广告。您`ADBannerViewDelegate`负责隐藏和展示广告，仅此而已。来自[Apple 关于 iAd 错误处理的文档](http://developer.apple.com/library/ios/#documentation/userexperience/Conceptual/iAd_Guide/WorkingwithBannerViews/WorkingwithBannerViews.html#//apple_ref/doc/uid/TP40009881-CH4-SW4)：

> 即使将错误发送给您的代理，横幅视图仍会继续尝试下载新广告。因此，实现这两种委托方法允许您的应用程序仅在加载广告时显示横幅。

# html - 背景中的多种颜色/图像+内容

> ID：11641482
> 
> 赞同：0
> 
> 时间：2012-07-25T01:30:47.843
> 
> 标签：html, css

我在 Photoshop 中设计了一个我想实际开发的网站。[我以http://illinoisstate.edu](http://illinoisstate.edu)为网站建模。基本上，我想要顶部渐变标题、中间图像和漂浮在顶部的内容。我尝试了几种不同的方法来处理各种 CSS 样式和位置类型，但我似乎无法获得正确的效果。我尝试研究甚至下载该站点以查看他们是如何做到的，但没有运气。有谁知道如何达到这种效果？

这个链接[http://dev.connectionsquad.com](http://dev.connectionsquad.com)显示了我所拥有的。我希望那个讨厌的彩色 div 覆盖在背景 div 之上，但是当你缩小窗口的大小时，我希望背景消失并且只关注内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T02:02:36.367

在 body 标记内创建一个 div 来包含您的背景（比如说， ）。用相对位置定位它并定义它的宽度和最小高度。在其中，使用其他 div 放置您想要的不同效果。使用位置定位这些 div。然后，在 body 内部但在第一个 div 之外创建第二个 div。定位它并将内容放在这个div中。

它看起来像这样：

```
<body>
    <div class="background_wrapper">
        <div class="header"></div>
        <div class="midle_image"></div>
    </div>
    <div class="content_wrapper">
        More divs...
        content...
    </div>
</body> 
```

**编辑：** 使用 CSS 中的位置来调整第一个包装器、标题、图像和第二个包装器。我个人会使用 position:relative 作为内容包装器，使用 position:absolute 作为背景包装器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T01:58:57.473

我的理解是“中间的图像”是身体的背景图像。他们将背景图像的 y 位置调整为 232px 以使其从顶部偏移。对于浮动效果，为 id 为“body”的 div 指定了 box-shadow。

我不确定你问题的第二部分。如果您能详细说明“彩色 div”的含义，那将有所帮助。我使用 firebug 来查看代码和 css 内部。如果您还没有尝试过，您可能也想这样做。希望这可以帮助。

# java - 如何查明导致 Android 应用程序变慢的原因

> ID：11641490
> 
> 赞同：3
> 
> 时间：2012-07-25T01:32:26.890
> 
> 标签：java, android, performance

我是 Android（以及 Java）开发的新手。我认为我做得很好 - 我有一个应用程序可以读取 XML 文件，解析为 SQLite 数据库，从数据库中提取以填充不同的站点部分（可滚动的新闻项目列表）......等等。我正在使用 AsyncTasks 进行导入过程......等等。

但是 - 我的应用程序第一次加载需要 FOREVER (15-25) 秒，每次切换部分时大约需要 10 秒（将单个 XML 文件解析到 SQLite 数据库，并填充 listView）。

与 iPhone 应用程序相比，切换部分需要 2-3 秒...

**TLDR：**
如何确定导致我的应用运行缓慢的原因？是否有线程监视器或其他东西 - 除了将 Log.d() 贯穿始终之外，还有什么方法可以查看花费了这么长时间的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T01:35:56.767

查看[跟踪视图](http://developer.android.com/tools/help/traceview.html)。

这是一个非常好的工具，可以让您查看您的应用程序在哪里花费时间到方法级别。我不能在这里的描述中做到公正。点击链接并查看。

您也可以查看[strictmode](http://developer.android.com/reference/android/os/StrictMode.html)，但这更多是为了弄清楚为什么您的应用程序的 UI 没有响应。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T03:45:00.127

我认为 traceView 包含的信息太多，你很容易迷失方向。

我的解决方案只是在代码中的三个位置记录系统时间。

之前和之后并以潜在的慢代码为中心。

就像二分查找一样，下一次，一步一步缩小，最后找到罪魁祸首。

# python - 如何 cPickle 转储并将单独的字典加载到同一个文件中？

> ID：11641493
> 
> 赞同：17
> 
> 时间：2012-07-25T01:33:39.073
> 
> 标签：python, dictionary, pickle

我有一个运行并创建三个字典的进程：2 个相当小，1 个很大。

我知道我可以存储一本字典，例如：

```
import cPickle as pickle
with open(filename, 'wb') as fp:
  pickle.dump(self.fitResults, fp) 
```

我想做的是将所有 3 个字典存储在同一个文件中，并能够在另一个时间分别加载三个字典。就像是

```
with open(filename, 'rb') as fp:
  dict1, dict2, dict3 = pickle.load(fp) 
```

或者更好的是只加载前两个字典，并使其可选是否加载第三个（大）字典。这是可能的还是我应该以完全不同的方式来解决这个问题？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-25T01:37:27.793

当然，您只需分别转储每一个，然后分别加载它们：

```
with open(filename,'wb') as fp:
    pickle.dump(dict1,fp)
    pickle.dump(dict2,fp)
    pickle.dump(dict3,fp)

with open(filename,'rb') as fp:
    d1=pickle.load(fp)
    d2=pickle.load(fp)
    d3=pickle.load(fp) 
```

确保最后倾倒大的，这样你就可以加载小的而不是先加载大的。我想您甚至可以变得聪明并将每个转储开始的文件位置存储在各种标题中，然后您可以在加载之前寻找该位置（但这开始变得有点复杂）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-25T02:24:31.100

我推荐经常被遗忘的[`shelve`](http://docs.python.org/library/shelve.html#module-shelve)模块，它有效地为您提供由 Berkley DB 文件或 dbm 文件（由 选择`anydbm`）支持的持久字典。db 应该提供性能改进（对于您的大字典）。

示例用法：

```
import shelve
shelf = shelve.open('my_shelf')
>>> shelf
{}

# add your dictionaries (or any pickleable objects)
shelf['dict1'] = dict(a=10, b=20, c=30, l=[10, 20, 30])
shelf['dict2'] = dict(a=100, b=200, c=300, l=[100, 200, 300])
shelf['dict3'] = dict(a=1000, b=2000, c=3000, l=[1000, 2000, 3000])

>>> shelf
{'dict1': {'a': 10, 'c': 30, 'b': 20, 'l': [10, 20, 30]}, 'dict3': {'a': 1000, 'c': 3000, 'b': 2000, 'l': [1000, 2000, 3000]}, 'dict2': {'a': 100, 'c': 300, 'b': 200, 'l': [100, 200, 300]}}
shelf.close()

# then, later
shelf = shelve.open('my_shelf')
>>> shelf
{'dict1': {'a': 10, 'c': 30, 'b': 20, 'l': [10, 20, 30]}, 'dict3': {'a': 1000, 'c': 3000, 'b': 2000, 'l': [1000, 2000, 3000]}, 'dict2': {'a': 100, 'c': 300, 'b': 200, 'l': [100, 200, 300]}} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-03T19:57:30.743

[如此处](http://deeplearning.net/software/theano/tutorial/loading_and_saving.html#the-basics-of-pickling)所述，您可以将多个对象腌制到同一个文件中，然后将它们全部加载（以相同的顺序）：

```
f = file(filename, 'wb')
for obj in [dict1, dict2, dict3]:
    cPickle.dump(obj, f, protocol=cPickle.HIGHEST_PROTOCOL)
f.close() 
```

然后：

```
f = file(filename, 'rb')
loaded_objects = []
for i in range(3):
    loaded_objects.append(cPickle.load(f))
f.close() 
```

您可以按特定顺序保存字典，以便在加载它们时，您可以选择仅选择首选的字典。

例如，如果您按`smallDict1`以下 顺序 存储字典`smallDict2`：`largeDict1`

`for i in range(2) ...`

# jsf - 自定义ice的验证信息：selectInputDate

> ID：11641498
> 
> 赞同：0
> 
> 时间：2012-07-25T01:34:01.270
> 
> 标签：jsf, icefaces

我在 JSF Icefaces 表单上使用 selectInputDate 组件，如下所示。

```
<ice:selectInputDate id="toDateId"
                renderMonthAsDropdown="true" renderYearAsDropdown="true"
                value="#{myBackingBean.toRequestDate}" 
                onkeydown="checkDateMaxLen('myform:toDateId', 'Request To Date');searchOnEnterKeyPress(event)"  
                renderAsPopup="true">
                <f:convertDateTime timeZone="#{dateSelectBB.timeZone}"
                    dateStyle="short" />
                <h:outputText value="(mm/dd/yy)" />
            </ice:selectInputDate> 
```

当我输入无效日期（例如“sdsdsds”）并切换到另一个字段时，我收到错误消息，因为“myform:toDateId: 'sdsdsds”是无效日期。'

如何从消息中删除表单和字段 ID 名称并显示如下错误？

'sdsdsds' 是无效日期。

实现细节：JSF 2.0、Icefaces 2.0.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:01:46.533

您需要在消息包（messages.properties）中放入如下内容：

```
javax.faces.converter.DateTimeConverter.DATE_detail=Invalid date format. 
```

覆盖 JSF 错误消息。

更多细节你可以在这里看到：[http ://www.mkyong.com/jsf2/customize-validation-error-message-in-jsf-2-0/](http://www.mkyong.com/jsf2/customize-validation-error-message-in-jsf-2-0/)

希望这可以帮助！:)

# java - Java DefaultMutableTreeNodes：我的单元格渲染器提供的交互式显示？

> ID：11641501
> 
> 赞同：2
> 
> 时间：2012-07-25T01:34:32.537
> 
> 标签：java, swing, tree, jbutton, interaction

在我正在编写的程序中，我有一个 JTree 存储我自己设计的一些对象。我自己扩展了 DefaultTreeCellRenderer 并覆盖了 getTreeCellRendererComponent 以返回带有一些按钮和东西的 JPanel。我发现我添加的按钮不像按钮，这让人认为与组件的交互被树单元“窃取”了。（如果单击按钮，按钮周围的容器也会被单击，并且树对被单击有自己的响应。）

所以我的问题是：

如果我想要的是树的基本功能，加上一些按钮，我应该使用什么方法？

*   继续沿同一路线行驶；添加某种鼠标侦听器以手动将功能添加到按钮。
*   继续沿同一路线行驶；删除现有的鼠标侦听器并添加您自己的以实现正确的行为。
*   扩展或实现与您所做的稍有不同的类或接口 - 可能不是 DefaultMutableTreeNodes，也可能不是 DefaultTreeCellRenderer 等 - 使用现有的 XXXX 来做您想做的事情。
*   避免使用 JTree；自己做，没那么难。

我倾向于最后一个选项——我很有可能实际上并不想要树的折叠行为，所以我可能只是制作自己的结构。但是，即使我选择了那个选项，我也想知道我应该做什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T01:45:00.333

您还需要一个`TreeCellEditor`,[此处](https://stackoverflow.com/a/11113648/230513)说明。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T06:01:25.790

> 避免使用 JTree；自己做，没那么难

我祝你好运;-)

正在发生的是渲染器返回的组件仅用作“标记”。所以`JTree`并不真正包含返回的组件，它们只是被绘制。因此没有与您的按钮交互。它只是看起来像一个按钮。似乎本`JTree`教程不包含关于此的实际部分，但它与表的概念基本相同[，本教程的“渲染器和编辑器”部分](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)对此进行了解释。

这也解释了为什么一个典型的渲染器类可以扩展`JLabel`并且可以`return this`在对其自身进行自定义后简单地使用，而不会影响树中的其他节点。例如`DefaultTreeCellRenderer`，扩展的源代码`JLabel`包含

```
public Component getTreeCellRendererComponent(JTree tree, Object value,
                                              boolean sel,
                                              boolean expanded,
                                              boolean leaf, int row,
                                              boolean hasFocus) {
   //...
   setText(stringValue);
   //...
   return this;
} 
```

如何解决这个问题：按照@trashgod 的建议创建一个编辑器

# templates - Mediawiki 模板和生成标准化页面

> ID：11641503
> 
> 赞同：2
> 
> 时间：2012-07-25T01:34:53.910
> 
> 标签：templates, mediawiki

我正在使用 mediawiki 管理一些数据，并且想知道是否可以从现有的 wiki 数据生成标准化页面，而无需创建大量非常相似的页面。在理想情况下，我会有一个由 CGI 动态填充的数据库后端和页面模板，我想知道是否可以强制 mediawiki 模板系统填充这个角色。

这就是我想做的：

资料页

```
name:      banana
colour:    yellow
tastiness: extremely high
extra:     some more stuff, potentially with complicated wiki formatting
links:     www.banana.com; www.iheartbananas.org
image:     banana.jpg

name:      apple
colour:    red, green
tastiness: variable
extra:     some more stuff 
links:     www.apple-fruit.com 
```

然后对数据库中的每一项，生成一个标准化的页面：

```
<name> Info

It is generally <colour>
Its tastiness rating is <tastiness>
Read more about <name> at <links>

<image> 
```

mediawiki 模板可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:17:30.307

模板是可能的，尽管它不一定是一个好的解决方案。您需要为每个项目创建一个数据模板，如下所示（例如，`Template:FruitData/banana`）：

```
{{ {{{template}}}
| name =      banana
| colour =    yellow
| tastiness = extremely high
| extra =     some more stuff, potentially with complicated wiki formatting
| link =      www.banana.com
| image =     banana.jpg
}} 
```

和一个显示模板（比如`Template:StandardFruitDisplay`）：

```
[[File:{{{image}}}|thumb|right]]
The {{{name}}} is a {{{colour}}} fruit with {{{tastiness}}} taste. {{extra|}}} See [http://{{{link}}} {{{{link}}}]. 
```

然后像这样在实际页面上显示它：`{{ Template:FruitData/banana | template = StandardFruitDisplay }}`

但是你可能会更好地使用一些以数据为中心的扩展（除非你的目标是极端的灵活性或用户控制）。

# javascript - OO JavaScript - 避免 self = this

> ID：11641504
> 
> 赞同：10
> 
> 时间：2012-07-25T01:34:55.300
> 
> 标签：javascript

有谁知道在以 OO 方式使用 JavaScript 时绕过声明 var self = this 的方法？我经常看到它并且很好奇它是否只是您必须做的事情，或者是否真的有一种方法（也许是类库？）可以让您绕过它？我确实意识到为什么有必要（这具有功能范围）。但你永远不知道那里可能有什么聪明的方法。

例如，我通常在 JS 中这样编写我的“类”：

```
function MyClass() {

}

MyClass.prototype = {

    firstFunction: function() {

        var self = this;

        $.ajax({
            ...
            success: function() {
                self.someFunctionCall();

            }
        });
    },

    secondFunction: function() {

        var self = this;

        window.setTimeout(function() {
            self.someOtherFunction();
        }, 1000);
    }

}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T01:40:51.583

在您的第一个功能中，您可以执行此操作...

```
$.ajax({
    context: this,
    success: function() {
        this.someFunctionCall();

    }
}); 
```

* * *

在第二个中，您可以这样做，但您需要[`.bind()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)在旧浏览器中填充...

```
window.setTimeout(function() {
    this.someOtherFunction();
}.bind(this), 1000); 
```

* * *

使用 jQuery，您也可以这样做...

```
window.setTimeout($.proxy(function() {
    this.someOtherFunction();
}, this), 1000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T02:03:52.110

ES5 添加了调用的标准方法`bind`，允许您绑定`this`函数的前 n 个参数。`self`在上面的示例中，您可以通过调用来避免使用`bind`.

```
$.ajax({ 
    ... 
    success: function() { 
        this.someFunctionCall(); 
    }.bind(this); 
}); 
```

对于非 ES5 浏览器，您可以使用 shim，例如在此处找到的：[https ://github.com/kriskowal/es5-shim](https://github.com/kriskowal/es5-shim)

顺便说一句，我会避免`self`在您的编码模式中使用，因为`self`它被定义为一个全局变量，它等于`window`全局范围。换句话说，如果您不小心忘记定义`self`，您将默默地将全局范围作为值而不是异常。如果你`that`改用，你会得到一个异常（除非你上面的人定义了它）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T01:37:55.640

不，如果您想`this`在不同的上下文（例如回调）中引用，则需要这样做，否则它将被重新分配给另一个对象，例如`window`.

顺便说一句，`self`这是一个 python 约定——在 JavaScript 中人们通常使用该约定`that = this`。但这只是个人品味的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T02:16:35.590

我在 JSFiddle 上鬼混，并想出了以下内容。它确实假设您使用的是顶级名称空间。这使得你只需要声明一次 self （在底部）。我将类包装在一个匿名函数中，这样 self 就没有全局范围。小提琴是：http: [//jsfiddle.net/bdicasa/yu4vs/](http://jsfiddle.net/bdicasa/yu4vs/)

```
var App = {};
(function() {
    App.MyClass = function() { }

    App.MyClass.prototype = {

        firstFunction: function() {

            console.log('in first function');
            console.log(self === this); // true
        },

        secondFunction: function() {

            window.setTimeout(function() {
                self.firstFunction();
                console.log(self === this); // false
            }, 100);
        }

    };
    var self = App.MyClass.prototype;
})();

var myClass = new App.MyClass();
myClass.secondFunction(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T01:43:26.283

一些 javascript 框架有自己的事件处理机制，允许您为处理函数设置上下文。这样`self = this`，您可以简单地指定`this`为上下文，而不是使用 。

我想到的其他可能性是在全局范围内的某个地方传递上下文。喜欢

```
function MyClass() {
    MyClass.instances.push(this);
}

MyClass.instances = new Array();
MyClass.getInstanceBySomeRelevantParameter = function(param) {
     for (var i = 0; i < MyClass.instances.length; i++)
         if (condition(param))
             return MyClass.instances[i];
}

...

success: function(event) {
    MyClass.getInstanceBySomeRelevantParameter(event).someFunctionCall();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T01:44:52.820

您可以始终将您的方法绑定到`this`然后按如下方式使用它：

```
function MyClass() {

}

MyClass.prototype = {

    firstFunction: function() {

        var funct = someFunctionCall.bind(this);

        $.ajax({
            ...
            success: function() {
                funct();

            }
        });
    },

    secondFunction: function() {

        var funct = someOtherFunction.bind(this);

        window.setTimeout(function() {
            funct();
        }, 1000);
    }

}; 
```

对于属性，只需将它们分配给另一个变量。

# node.js - 哪个 azure 选项适合我使用 node.js 的 TCP 游戏服务器？

> ID：11641508
> 
> 赞同：1
> 
> 时间：2012-07-25T01:35:56.500
> 
> 标签：node.js, azure, tcpserver, online-game

我是 Microsoft windows azure cloud 的新手，想在 azure cloud 中使用 node.js 运行我的游戏服务器。我阅读了 windows azure Node.js 开发人员中心网站，似乎我的服务器可以在 azure cloud 中以多种方式运行。

哪个 azure 选项适合我使用 node.js 的 TCP 游戏服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T02:19:31.387

三个选项：

1.  网站
2.  云服务
3.  虚拟机

网站本质上是共享的虚拟主机，它只支持 HTTP，所以不适合你。

云服务可能是您想要的。这是 Windows Azure 上的核心 PaaS 产品。只要它在 Windows 上运行，它就可以让你运行几乎任何你想要的东西。它支持 TCP 端点。Node.js 有很多不错的工具。在云服务中运行 Node 有两种方式：Web 角色或工作者角色。Web 角色使用 IIS 并在其后面运行 Node.js。这不适用于您的原始 TCP 连接，因此您需要使用辅助角色。工作者角色将简单地启动您的 Node 应用程序并使其永远运行。

虚拟机也可以正常工作，但与云服务相比，它们并没有提供太多价值。在云服务中，您可以按需启动新的虚拟机，负载均衡器位于您的应用程序之前分配流量，您的应用程序在崩溃时将重新启动，您可以在不停机的情况下自动修补您的虚拟机等。除非您由于某种原因无法在云服务中运行，您很少希望使用原始 VM。

tl;dr 您希望在云服务中担任工作人员角色。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T01:45:28.997

Windows Azure 确实在 Github 上有一个用于社交游戏的工具包，这可能会对您的工作有所帮助，但不确定它是否支持 Node.js，请注意，应该有一些内容可以帮助您。

[https://github.com/WindowsAzure-Toolkits/wa-toolkit-games](https://github.com/WindowsAzure-Toolkits/wa-toolkit-games)

这篇博客文章很好地细分了在哪里运行什么以及每个用例。

[http://blogs.msdn.com/b/silverlining/archive/2012/06/27/windows-azure-websites-web-roles-and-vms-when-to-use-which.aspx](http://blogs.msdn.com/b/silverlining/archive/2012/06/27/windows-azure-websites-web-roles-and-vms-when-to-use-which.aspx)

这实际上取决于您的应用程序，它有什么后端，用户数量，性能，延迟等......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T03:46:06.740

不过需要注意的是，在 Windows 上运行 Node.js 基本没问题，但有几个库无法运行。不知道使用 Azure 是否是硬性要求，但还有其他节点托管解决方案。

[Nodejitsu](http://nodejitsu.com)
[Nodester](http://nodester.com)

这只是两个，还有更多。

免责声明：我正在构建 Node.js 托管解决方案，modules.io。

# php - 编辑现有查询以搜索时间是否在开始日期和结束日期之间

> ID：11641509
> 
> 赞同：0
> 
> 时间：2012-07-25T01:36:25.487
> 
> 标签：php, mysql, sql, date

通过一个表单，用户选择一个日期+时间，然后当他提交它时，代码运行这个查询

```
ABS(TIMESTAMPDIFF( HOUR , `start`, :time )) < 2 
```

查找`start`与所选日期之间的差异小于 2 的所有行。

但是，我现在添加了一个`end`包含事件结束日期+时间的新字段。

我的问题是我应该如何编辑现有查询以返回所选日期介于`start`和之间的所有行`end`？

这是*selected*、*start*和*end* date+time 的格式：`2012-07-25 04:30`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T01:41:46.437

利用[`BETWEEN`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_between)

```
WHERE selected_date BETWEEN start AND end 
```

引用有关使用`BETWEEN`日期的手册：

> 为了在将 BETWEEN 与日期或时间值一起使用时获得最佳结果，请使用 CAST() 将值显式转换为所需的数据类型。示例：如果将 DATETIME 与两个 DATE 值进行比较，请将 DATE 值转换为 DATETIME 值。如果在与 DATE 的比较中使用字符串常量（例如 '2001-1-1'），请将字符串转换为 DATE。

# asp.net - 我应该把代码放在哪里？试图在我的网站中复制一个示例。

> ID：11641510
> 
> 赞同：0
> 
> 时间：2012-07-25T01:36:29.033
> 
> 标签：asp.net, visual-studio-2010, visual-web-developer-2010

当我使用 Web Developer express 2010 时，我需要帮助了解 .cs 文件中的内容。

我正在查看 W3 站点上的一个示例，您可以在其中输入您的姓名并单击提交，然后会弹出一个标签并显示您在所有服务器端输入的内容。[http://www.w3schools.com/aspnet/showasp.asp?filename=demo_textbox](http://www.w3schools.com/aspnet/showasp.asp?filename=demo_textbox)

我试图在我的网站上复制它，我需要知道蓝色文本（查看上面的链接）在 .cs 文件中的位置（假设它在那里）。

这是我的 .cs 文件的样子

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace Assignment2
{
    public partial class WebForm1 : System.Web.UI.Page
    {

        protected void Page_Load(object sender, EventArgs e)
        {

        }

    }  
} 
```

我应该把它放在哪里？谢谢你的帮助！！！！！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T01:43:46.800

蓝色的代码将在 Page_Load 之后

```
public void submit(object sender, EventArgs e)
{
    lbl1.Text="Your name is " + txt1.Text;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T01:39:16.860

它不会进入 .cs 文件。

对于每个页面，您将拥有显示元素 (page.aspx) 和代码 (page.aspx.cs)。您突出显示的代码需要进入 page.aspx

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T22:44:16.687

通常，我们将 C# 代码分开放置在 .cs 文件中（如果您使用 VB，则为 .vb 文件，而不是 C#）。这就是 Visual Studio 自动为您创建它的原因。

但是在[w3schools](http://www.w3schools.com/aspnet/showasp.asp?filename=demo_textbox)的示例中，他们出于教学目的使用嵌入在 aspx 中的代码，因此他们不使用 .cs 文件。他们使用的代码是 VB 代码，而不是 C# 语法。

在 .aspx 文件中嵌入服务器代码不是一个好习惯，但有时您需要使用它。

更多信息请访问[http://msdn.microsoft.com/en-us/library/ms178135.aspx#Y90](http://msdn.microsoft.com/en-us/library/ms178135.aspx#Y90)

# mysql - mysql：获得最佳答案

> ID：11641511
> 
> 赞同：1
> 
> 时间：2012-07-25T01:36:32.543
> 
> 标签：mysql

我有一个名为***answers***的表，有 2 行：

**questionid - 答案**

正如您可能猜到的那样， *questionid*存储问题 ID 编号，*answer*存储答案，答案只是数字 1 到 8

我想显示最佳答案。

**例如：**

questionid - 答案

```
4 - 7
4 - 3
4 - 3
2 - 3
6 - 7
7 - 1
9 - 8
1 - 5 
```

最佳答案 = 3

我试过了：

```
SELECT answer FROM answers WHERE questionid='$qid' ORDER BY answer DESC LIMIT 1 
```

和

```
SELECT DISTINCT answer FROM answers WHERE questionid='$qid' ORDER BY answer DESC LIMIT 1 
```

*$qid = 页面 id 即：/question.php?qid=4*

但两者都返回不正确。

**更新：**

有没有不使用显示结果：

```
while($row = mysql_fetch_array($result)) {
// stuff here
} 
```

因为我只想显示基于 $qid 的 1 个结果（即最佳答案）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T01:39:03.180

有多种方法可以做到这一点（`HAVING()`、`WHERE`、`MAX()`等），共同点是[`GROUP BY`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html).

```
SELECT answer, COUNT(answer) FROM questions GROUP BY answer ORDER BY COUNT(answer) DESC LIMIT 1 
```

这将返回：

```
3 - 3 
```

阅读更多[关于`GROUP BY`](http://www.tizag.com/mysqlTutorial/mysqlgroupby.php/).

### 更新

在我发布此答案后，您似乎修改了您的问题。

如果要将查询限制为特定问题，请添加一个`WHERE`子句作为其他问题。

```
... FROM questions WHERE questionid = X GROUP BY ... 
```

**注意：**注意[SQL 注入](http://php.net/manual/en/security.database.sql-injection.php)。

当您只有 1 条记录时，您可以放弃`while`循环并仅访问顶部结果。

```
$result = mysql_query($sql);
$row = mysql_fetch_array($result); 
```

**注意：**您会想要进行更多的错误检查（例如确保返回*结果*）。另外，不要使用`mysql_*`函数，因为它们[现在已弃用](http://news.php.net/php.internals/53799)。请改用[MySQLi](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T01:39:42.900

```
SELECT count(*) AS answer_count, answer FROM answers WHERE questionid='$qid' GROUP BY answer ORDER BY answer_count DESC LIMIT 1 
```

# guava - 如何处理 Google Guava Cache 刷新异常？

> ID：11641512
> 
> 赞同：6
> 
> 时间：2012-07-25T01:36:45.470
> 
> 标签：guava

Google Guava Cache 文档指出：

> 刷新与驱逐并不完全相同。正如 LoadingCache.refresh(K) 中所指定的，刷新一个键会为该键加载一个新值，可能是异步的。刷新键时仍会返回旧值（如果有），与驱逐相反，驱逐强制检索等到重新加载值。
> 
> 如果刷新时抛出异常，则保留旧值，并记录并吞下异常。

这种记录和吞咽异常在我的用例中非常糟糕，因为这意味着如果刷新引发异常，缓存的用户将继续在缓存中找到陈旧的数据。

如何确保刷新时引发异常，缓存开始返回 null 或调用 load 方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T02:25:06.590

如果您不想提供过时的数据，您应该调用[`invalidate(key)`](https://google.github.io/guava/releases/19.0/api/docs/com/google/common/cache/Cache.html#invalidate%28java.lang.Object%29)而不是`refresh(key)`. 这将丢弃 的缓存值`key`（如果存在）。

然后后续调用`get(key)`将同步委托给值加载器，并将重新抛出由`CacheLoader`, 包裹在`(Unchecked)ExecutionException`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:48:54.203

如果陈旧数据对您来说是个问题，那么您应该使用它`expireAfterWrite`来确保永远不会提供陈旧数据。

# assembly - 将我的解决方案从十进制转换为十六进制

> ID：11641514
> 
> 赞同：3
> 
> 时间：2012-07-25T01:37:12.153
> 
> 标签：assembly, microprocessors, 68000

我的目标是以十六进制显示用户输入的 2 个数字的解。截至目前，我的代码从用户那里获得了 2 个数字，然后以十进制返回解决方案。我认为我应该做的只是得到我的十进制解决方案并在将数字相加后将其转换为十六进制。如果还有其他可行的方法，请告诉我。感谢您。

```
org $8000
START   movea.l #MSG1, A1
    move.b  #13,D0
    trap    #15        
    clr.w   D2
    JSR Loop

    move.w  d2, d4
    movea.l #msg2, a1
    move.b  #13,D0
    trap    #15       
    clr.w   d2
    jsr loop

    movea.l #msg3, A1
    move.b  #13,D0
    trap    #15 
    add.w   d4, d2
    JSR DISP

    MOVE.B  #9,D0
    TRAP    #15      
LOOP    move.b  #5,D0
    trap    #15
    cmp.b   #$0D, D1
    BEQ BREAK
    and.b   #$0F, d1
    mulu    #10, d2
    add.w   d1, d2
    jmp loop
Break   rts
DISP    clr.b   d3
DISDIV  divu    #10, D2
    move.b  #16, d5
    ror.l   d5, d2
    or.b    #$30, d2
    move.b  d2, -(A7)
    addq    #1, d3
    clr.w   d2
    ror.l   d5, d2
    bne DISDIV
DISDIG  move.b  (a7)+, D1
    move.b  #6,D0
    trap    #15     ; char out
    subq.b  #1, D3
    bne DISDIG
    rts
    org $8100
MSG1    DC.B    'Please enter a two digit number ', 0
MSG2    DC.B    'Please enter another two digit number ', 0
MSG3    DC.B    'The sum of the two 2 digit numbers you entered is ', 0
    end     start 
```

我正在使用 EASY68k 汇编程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T02:25:14.937

您需要更改输入和输出代码。

输入代码与字符与`$0f`，当字符为 0-9 时有效，但当字符为 af 时无效。您需要测试角色并针对 af 案例以不同的方式对待它。然后你需要将先前的结果乘以 16 而不是 10。

你在输出上有相反的问题。将 10更改`divu`为 16 可以使您成功，但是您添加 30 美元以转换为 ASCII `0`-`9`您需要测试该值并添加 41 美元，如果它在 10 和 15 之间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T02:13:09.607

只是改变

```
DISDIV  divu    #10, D2 
```

至

```
DISDIV  divu    #16, D2 
```

# ruby-on-rails - 如何知道要抢救哪些异常？

> ID：11641517
> 
> 赞同：4
> 
> 时间：2012-07-25T01:37:27.193
> 
> 标签：ruby-on-rails, ruby, sinatra

在使用 Ruby 中的特定代码库时，我经常发现自己不知道要挽救哪些异常。

例如，我经常对我的 rails/sinatra 应用程序发出的任何 HTTP 请求使用 HTTParty。我挖掘了 HTTParty 的代码，发现了一个包含所使用的已定义异常的文件。伟大的！我会在提出请求时拯救他们。

为了测试它，我为请求输入了一个虚假的域名，但是我没有预料到 HTTParty::ResponseError 异常，而是得到了一个 SocketError 异常。

处理这个问题的最佳方法是什么？我知道 HTTParty 是 Ruby 实现的包装器，这可能是引发 SocketError 异常的原因。但我通常怎么知道呢？

我可以通过拯救“异常”来解决这个问题，但这是非常糟糕的做法。我宁愿很清楚我可能导致的异常并处理这些异常。

**编辑：**我应该澄清一下，真正促使我提出这个问题的是，我不知道如何找出调用特定函数时可能引发的异常......也就是说，无需查看每一个函数调用在堆栈中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T01:46:04.907

一般来说（我不是红宝石程序员）我使用以下方法。

我通过以下方式处理异常：

*   **我可以从中恢复吗？** 如果异常可能发生并且我知道我可以恢复或重试，那么我处理异常。

*   **是否需要报告？** 如果异常可能发生，但我知道我可能无法恢复或重试，那么我通过记录异常来处理异常，然后将其传递给调用者。我总是在主要模块或服务等自然子系统边界上执行此操作。有时（取决于 API）我可能会用“我的模块”特定的异常包装异常，以便调用者只处理我的异常。

*   **不能处理吗？**所有未处理的异常都应在顶层捕获并（a）报告，（b）确保系统保持稳定和一致。无论其他两个是否完成，这是应该始终存在的。

当然还有另一类例外 - 那些非常严重以至于他们没有机会处理它们的例外。对于这些，只有一种解决方案——事后调试，我发现最好的办法是日志、日志和更多日志。并且在从小到大的许多系统上工作过，我宁愿为了稳定性和可恢复性而牺牲性能（除非它很关键），并添加大量的日志记录——如果可能的话，自省。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T01:43:58.920

如果你输入一个伪造的域名，socketError 响应是完全可以的。毕竟 - 尝试连接到不存在的域会导致连接失败 AKA SocketError。

处理这个问题的最好方法是在你的测试中使用一个带有错误 URL 的有效域，但在你的实时代码中捕获 socketError。

这里的问题不是你捕捉到了错误的异常，而是你用错误的数据来启动测试。

最好的做法是了解可能发生的异常并管理它们，当我说了解时，我正在理解 - URL 来自哪里，它是由您的用户输入的吗？如果是这样，*永远不要*相信它并抓住一切。它是否来自您的配置数据？半信任它并记录错误，除非 URL 正常是关键任务。

这里没有正确或错误的答案，但我希望这种方法会给你一个好的结果。

编辑：我在这里试图做的是倡导程序员的思维方式，即意识到他们的行为结果。我们都知道尝试连接到 'thisServiceIsTotallyBogus.somethingbad.notAvalidDomain' 会失败；但是程序员的心态应该是首先验证该域的确切来源。如果它是由用户输入的，那么您必须承担全部检查；如果您知道它来自仅由您自己或您的支持团队访问的配置文件；你可以放松一点；可悲的是，这是一个不好的例子，因为您应该始终测试 URL，因为有时互联网无法正常工作！

理想情况下，您使用的任何东西的开发人员文档都应该告诉您它可以抛出哪些异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-05T01:19:28.240

对于源代码公开可用的库或 gem，您通常可以在*exceptions.rb*文件中找到异常类型。（参考[这里](https://blog.bearer.sh/handle-ruby-exceptions/)）。否则，您将不得不依赖文档。如果所有其他方法都失败了，您可以进行救援`StandardError`，尽管在许多情况下这是一种不太理想的做法（参考[这个 SO answer](https://stackoverflow.com/a/10048406/2658159)。

# sql - 使用 VB.Net 编程使用 MS Access 更新 SQL Server 中的值

> ID：11641526
> 
> 赞同：0
> 
> 时间：2012-07-25T01:38:42.977
> 
> 标签：sql, vb.net, ms-access

我有一个关键要求，需要通过表单和按钮访问来更新 Sql server 中的表，当用户单击表单中的按钮时，他应该能够更新数据库中已经存在的记录。

例如：表有列 -EmployeeID 、 Employee Name 、 Employee Location

```
EmployeeID Values
-----
1001|
2301|
3212| 
```

假设用户想要单独更新 EmployeeName 的值而不是员工位置，在某些情况下他应该能够做到这一点。

```
update table set EmployeeName=@New_employee_name , Employee Location=@New_employee_location where EmployeeID=@Employee_ID 
```

这应该通过 vb 驱动。net 程序以更新数据库中的用户输入值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T02:05:36.693

我建议您在 SQL Server 上创建一个存储过程，这是一个示例：

```
CREATE PROCEDURE sp_UpdateEmployeeByID
(
@ID int, 
@TitleID int, 
@FirstName nvarchar(255), 
@LastName nvarchar(255)
)
AS 
BEGIN 
SET NOCOUNT ON;

UPDATE Employee SET 
TitleID = @TitleID, 
FirstName = @FirstName, 
LastName = @LastName
WHERE  ID = @ID
END 
```

使用存储过程而不是 ad-hoc SQL 可以保护您免受 SQL 注入攻击，而且还有性能优势。

然后使用 VB.Net，您将需要调用存储过程，传入更新的员工值。

```
Public Sub UpdateEmployeeByID(Byval ID As Int32, Byval TitleID As Int32, Byval FirstName As string, Byval LastName As string)

Dim connString As String = ConfigurationManager.AppSettings("ConnectionString")
Dim conn As New SqlConnection(connString)
conn.Open()
Dim sqlCommand As new SqlClient.SqlCommand("sp_UpdateEmployeeByID", conn)
sqlCommand.CommandType = CommandType.StoredProcedure

sqlCommand.Parameters.AddWithValue("@ID", ID)
sqlCommand.Parameters.AddWithValue("@TitleID", TitleID)
sqlCommand.Parameters.AddWithValue("@FirstName", FirstName)
sqlCommand.Parameters.AddWithValue("@LastName", LastName)

Try
sqlCommand.ExecuteNonQuery()

Catch ex As SqlException
'Handle SQL exceptions

Catch ex As Exception
'Handle exceptions

Finally
'clean up resources that access Data
    If IsNothing(sqlCommand) = False Then
        sqlCommand.Dispose()
        sqlCommand = Nothing
    End If
conn.Close()
End Try

End Sub 
```

# ruby-on-rails - 路由错误：没有路由匹配 [OPTIONS]

> ID：11641528
> 
> 赞同：1
> 
> 时间：2012-07-25T01:38:47.327
> 
> 标签：ruby-on-rails, ruby, ajax

当我尝试设置我的请求标头令牌时，我收到一个错误：

`ActionController::RoutingError (No route matches [OPTIONS] "/data"):`

这是ajax调用：

```
 $.ajax({
    url: this.hostName + url,
    type: 'POST',
    data: data,
    dataType: 'json',
    beforeSend: function( xhr ) {
      xhr.setRequestHeader( 'X-CSRF-Token', $( 'meta[name="csrf-token"]' ).attr( 'content' ) );
    },
    success: function(response) {
      console.log('success');
      console.log(response);
    },
    error: function(response) {
      console.log('error');
      console.log(response);
    }
  }); 
```

如果我将请求标头排除在外：

`Started POST "/data" for 127.0.0.1 at 2012-07-24 18:37:22 -0700`

但我收到一条警告：

`WARNING: Can't verify CSRF token authenticity`

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:52:12.367

你有没有尝试过

```
$.ajax({
    url: this.hostName + url,
    type: 'POST',
    headers: { 'X-CSRF-Token': $('meta[name="csrf-token"]').attr('content') }
    data: { param : 'something' },
    dataType: 'json'
}); 
```

然后在你的控制器中 params[:param] 会给你“东西”。

如果您有兴趣知道为什么需要所有 X-CSRF-Token 的东西，[这](http://guides.rubyonrails.org/security.html#cross-site-request-forgery-csrf)是一本好书。基本上，Rails 会自动在您的页面中包含该令牌以确保您的应用程序安全。如果您检查站点的任何页面，您会在 HTML 文档的头部看到如下内容：

```
<meta content="guma1QdmO9Tn9SB4yV4DonkY4xf4Sy6lIvrFyHIaR1U=" name="csrf-token"> 
```

这是由文件`<%= csrf_meta_tags %>`中包含的行创建的`application.html.erb`。

Rails 会在常规的非 GET 请求中自动包含此令牌以确保它们的安全。但是对于 javascript 和 ajax，您必须通过使用 jQuery 函数在 DOM 中搜索令牌来手动执行此操作`$('meta[name="csrf-token"]'`。

现在，这不是很有效，因为您每次发出请求时都在搜索该令牌。所以你应该做的是使用ajaxSetup，像这样：

```
$.ajaxSetup({
    type: 'POST',
    headers: { 'X-CSRF-Token': $('meta[name="csrf-token"]').attr('content') }
    dataType: 'json'
}); 
```

现在，每当您想发送请求时，您所需要的就是：

```
$.ajax({
    url: this.hostName + url,
    data: { param : 'something' }
}); 
```

编辑：啊，我明白了。当你做的时候你会得到什么`alert(this.hostName + url)`？你是如何声明你的路线的？因为如果我没记错的话，你可以使用相对 url 而不是绝对 url，你不需要根部分。这是一个例子：

```
# routes.rb
post "relative_url" => 'controller#action'

# file.js
$.ajax({
    url: "relative_url",
    data: { param : 'something' }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-16T17:29:14.177

您应该尝试在 ajax 中提供相对 url 而不是绝对。我有同样的问题，并通过更改网址来工作

# vba - 我可以隐藏/显示选定单元格周围的黑色边框吗？

> ID：11641536
> 
> 赞同：0
> 
> 时间：2012-07-25T01:40:22.897
> 
> 标签：vba, excel

如果我们使用功能区 UI 保护工作表，并且如果每个单元格都被锁定或未启用任何选择，则矩形光标会消失。

但由于我有一些单元格与用户交互，我不会锁定每个单元格。现在矩形只出现在未锁定的单元格上。

由于我必须使这些锁定的单元格可由 VBA 选择，因此添加了以下代码：

```
Worksheets("sheet1").Protect Password:="******", _
    UserInterfaceOnly:=True 
```

现在，由于 VBA 可以选择每个单元格，无论锁定或解锁，矩形光标无处不在。

现在我希望隐藏那个矩形本身；可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:25:23.290

添加这段代码：

```
Worksheets("sheet1").EnableSelection = xlNoSelection 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:43:05.340

我不能让它完全消失，但我可以很好地隐藏它。我从评论中注意到您突出显示了当前单元格，因此添加到该突出显示的这段代码应该有助于隐藏光标：

```
' Code generated by record macro, and not tidied up
Selection.Borders(xlDiagonalDown).LineStyle = xlNone
Selection.Borders(xlDiagonalUp).LineStyle = xlNone
With Selection.Borders(xlEdgeLeft)
    .LineStyle = xlContinuous
    .ColorIndex = xlAutomatic
    .TintAndShade = 0
    .Weight = xlThick
End With
With Selection.Borders(xlEdgeTop)
    .LineStyle = xlContinuous
    .ColorIndex = xlAutomatic
    .TintAndShade = 0
    .Weight = xlThick
End With
With Selection.Borders(xlEdgeBottom)
    .LineStyle = xlContinuous
    .ColorIndex = xlAutomatic
    .TintAndShade = 0
    .Weight = xlThick
End With
With Selection.Borders(xlEdgeRight)
    .LineStyle = xlContinuous
    .ColorIndex = xlAutomatic
    .TintAndShade = 0
    .Weight = xlThick
End With
Selection.Borders(xlInsideVertical).LineStyle = xlNone
Selection.Borders(xlInsideHorizontal).LineStyle = xlNone 
```

这将把边框变成黑色，当单元格被选中时它会变成白色（带有非常细的黑色轮廓）。

另一种方法是将所有单元格更改为具有灰色粗轮廓，因此在选中该框时它将具有相同的颜色轮廓。以编程方式，对代码的更改将是删除 colorindex 行，并添加

```
 .ThemeColor = 1 
```

取而代之，并将 TintAndShade 行更改为：

```
 .TintAndShade = -0.5 
```

无论使用哪种方法，您仍然会在当前单元格中看到一条细黑线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-22T20:16:13.590

没有办法真正隐藏矩形。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-05-18T15:07:08.003

1) 隐藏一列

2) 移动到 A1

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-09-08T10:17:05.763

我不知道这是谁写的，所以我可以给予信任，但它似乎有效。

```
Private Declare Function ShowCursor Lib "USER32" _ 
(ByVal fShow As Integer) As Integer 

Sub hide() 
    While ShowCursor(False) >= 0 
    Wend 
End Sub 

Sub show() 
    While ShowCursor(True) < 0 
    Wend 
End Sub 
```

# php - 对于物品交易风格的网站，我应该如何存储和读取数据？(PHP)

> ID：11641542
> 
> 赞同：0
> 
> 时间：2012-07-25T01:40:52.850
> 
> 标签：php

我目前正在尝试制作一个与游戏服务器一起使用的小 Web 应用程序。

Web 应用程序应允许用户查看游戏中的一系列产品/请求。产品和请求来自用户对站点的输入。

我的问题是存储来自这些用户输入的数据的最佳最佳方式是什么，然后使用这些存储的数据生成某种列表页面。

如果您需要一些详细信息，以下将解释用户输入字段的确切含义：

*   **项目名称** *（字符串）*
*   **项目金额** *(int)*
*   **每项成本** *（双/小数）*

还有一个视图，比如人的用户名、提供/请求 ID（可能只是一个像数据库中的自动递增字段）。

**考虑到我对存储和检索信息还很陌生，与存储信息的最佳（有效）方式相比，最简单的存储方式是什么？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T01:41:46.840

将数据存储在数据库中。我听说他们很适合这种事情。

有用的教程：[http ://www.tizag.com/mysqlTutorial/](http://www.tizag.com/mysqlTutorial/)

# java - 从 Eclipse 导出的 JAR 中排除 JUnit

> ID：11641546
> 
> 赞同：9
> 
> 时间：2012-07-25T01:41:14.223
> 
> 标签：java, eclipse, jar, junit

我正在使用 Eclipse JUnit 集成，它将 JUnit 库自动包含到我的项目中。问题是当我使用*Runnable JAR 文件*目标导出我的项目时，它包括 JUnit。

有没有办法从导出的 JAR 中排除 JUnit（理想情况下也是测试）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T02:32:18.310

如果您通过右键单击项目并选择导出然后选择 JAR 文件来创建 JAR，则可以通过取消选中您的测试文件夹来从导出中删除您的测试。请参阅[此](http://www.eclipse.org/forums/index.php/m/631575/)相关讨论和[此](http://www.javahotchocolate.com/tutorials/jar-libraries.html)示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T15:36:19.157

我通过在 Eclipse 中使用 Ant 和以下 build.xml 找到了该问题的解决方案：

```
<project>
  <target name="jar">
    <jar destfile="out.jar" basedir="bin">
      <zipgroupfileset dir="lib" includes="*.jar" />
      <manifest>
        <attribute name="Main-Class" value="com.example.Main" />
      </manifest>
    </jar>
  </target>
</project> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T02:02:10.337

您可以从“.classpath”文件中删除 JUnit 包。然后再次导出 jar 文件

# python - AttributeError：“int”对象没有属性“插入”

> ID：11641547
> 
> 赞同：2
> 
> 时间：2012-07-25T01:41:32.073
> 
> 标签：python, insert, attributeerror

帮助！就在我让一件事起作用时，另一件事却不起作用！同样，我确信经验丰富的眼睛很简单，但我很挣扎！这是我生成列表和所述列表数据的代码。

```
#Frame Creation

allframes = []

for n in range (0, (workingframes*archnodes*3)):
    allframes.append(n)

frames = allframes

print frames

#Frame Population

for f in range (0, workingframes):

    if f<=(workingframes/2):

        for x in range (0, (archnodes)):
            frames[((archnodes*3)+f)].insert(((archnodes*3)+f), (archstartred[x]))
            frames[((archnodes*3)+f+workingframes)].insert(((archnodes*3)+f+workingframes),(archstartgrn[x]))
            frames[((archnodes*3)+f+workingframes*2)].insert(((archnodes*3)+f+workingframes*2),(archstartblu[x]))

        for y in range (0, nodesperframe):
            archstartred.pop()
            archstartgrn.pop()
            archstartblu.pop()
            archstartred.insert(0, backred)
            archstartgrn.insert(0, backgrn)
            archstartblu.insert(0, backblu)

    else:
        for y in range (0, nodesperframe):
            archstartred.pop(0)
            archstartgrn.pop(0)
            archstartblu.pop(0)
            archstartred.append(backred)
            archstartgrn.append(backgrn)
            archstartblu.append(backblu)

        for x in range (0, (archnodes)):
            frames[(archnodes*3)+f].insert((archnodes*3), (archstartred[x]))
            frames[(archnodes*3)+f+workingframes].insert(((archnodes*3)+1),(archstartgrn[x]))
            frames[(archnodes*3)+f+workingframes*2].insert(((archnodes*3)+2),(archstartblu[x])) 
```

我不断收到这个可爱的错误：

```
AttributeError: 'int' object has no attribute 'insert' 
```

我计划在填充列表后将列表转换为数组，以便我可以按照需要的方式对其进行操作。我确信有一种更简单的方法可以做到这一点，但我不知道，而且我是 Python 新手！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T01:44:23.723

这些表达式`frames[((archnodes*3)+f)]`（所有 3 个版本）评估为整数，并且您试图`insert()`在它们上调用一个方法，这是导致错误的原因。

`f`是在封闭的 for 循环中创建的整数，并且`archnodes`在第一个 for 循环中使用的方式也意味着它们是数字。`frames`是在您的第一个循环中创建的数字列表，因此您正在索引数字列表，然后尝试`insert()`在列表中的特定数字上调用该方法。正如错误消息所述，

`'int' object has no attribute 'insert'`

该类型`int`没有`insert`方法。

**更新**上面的评论：

*您可以向列表*添加/删除/插入项目，但不能向整数添加/删除/插入。请参阅有关列表的简短[教程/参考](http://www.tutorialspoint.com/python/python_lists.htm)。因此，例如要将项目*插入*列表中，您将使用以下方法/方法：

```
list.insert(index, obj) 
```

所以在你的情况下

```
frames.insert(index, .. ) 
```

不是

```
frames[index].insert(..) 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T01:49:16.787

如果你想要一个列表，你需要先设置列表对象，像这样。

```
l = []
l.append(element) 
```

如果您只是在执行之前进行列表操作，`l = []`您将遇到您描述的问题。

# c++ - Visual Studio 错误并获取设备 GUID 和路径名？

> ID：11641550
> 
> 赞同：0
> 
> 时间：2012-07-25T01:41:41.697
> 
> 标签：c++, winapi, hardware, enumerate

晚上大家我想知道是否有人可以回答我 2 个快速问题。

我制作了一个与 arm 设备通信的应用程序，它工作正常，但是当我移动 PC 等时，我需要重新配置设备路径。它很长，如下所示。

小路：`\\?\usb#vid_045e&pid_0040#6&ff454f2&0&3#{a5dcbf10-6530-11d2-901f-00c04fb951ed}`

我做了一些阅读，发现它有两个功能`SetupDiGetClassDevs`，`SetupDiGetDeviceInstanceId`我需要。我的问题是我是否找对了地方，即这两个函数会返回上面的路径。另外这条路径的技术名称是什么？

我在下面的微软网站上找到了我认为是一个很好的例子（总是从例子中学到更好的东西），但这会引发错误`C2440: '=' : cannot convert from 'HLOCAL' to 'LPTSTR'` ，这是我的一个新错误指针错误？

这是代码

```
 #include <stdio.h>
   #include <windows.h>
   #include <setupapi.h>
   #include <devguid.h>
   #include <regstr.h>

   int main( int argc, char *argv[ ], char *envp[ ] )
   {
       HDEVINFO hDevInfo;
       SP_DEVINFO_DATA DeviceInfoData;
       DWORD i;

       // Create a HDEVINFO with all present devices.
       hDevInfo = SetupDiGetClassDevs(NULL,
           0, // Enumerator
           0,
           DIGCF_PRESENT | DIGCF_ALLCLASSES );

       if (hDevInfo == INVALID_HANDLE_VALUE)
       {
           // Insert error handling here.
           return 1;
       }

       // Enumerate through all devices in Set.

       DeviceInfoData.cbSize = sizeof(SP_DEVINFO_DATA);
       for (i=0;SetupDiEnumDeviceInfo(hDevInfo,i,
           &DeviceInfoData);i++)
       {
           DWORD DataT;
           LPTSTR buffer = NULL;
           DWORD buffersize = 0;

           //
           // Call function with null to begin with, 
           // then use the returned buffer size (doubled)
           // to Alloc the buffer. Keep calling until
           // success or an unknown failure.
           //
           //  Double the returned buffersize to correct
           //  for underlying legacy CM functions that 
           //  return an incorrect buffersize value on 
           //  DBCS/MBCS systems.
           // 
           while (!SetupDiGetDeviceRegistryProperty(
               hDevInfo,
               &DeviceInfoData,
               SPDRP_DEVICEDESC,
               &DataT,
               (PBYTE)buffer,
               buffersize,
               &buffersize))
           {
               if (GetLastError() == 
                   ERROR_INSUFFICIENT_BUFFER)
               {
                   // Change the buffer size.
                   if (buffer) LocalFree(buffer);
                   // Double the size to avoid problems on 
                   // W2k MBCS systems per KB 888609\. 
                   buffer = LocalAlloc(LPTR,buffersize * 2); // ERROR LINE
               }
               else
               {
                   // Insert error handling here.
                   break;
               }
           }

           printf("Result:[%s]\n",buffer);

           if (buffer) LocalFree(buffer);
       }

       if ( GetLastError()!=NO_ERROR &&
            GetLastError()!=ERROR_NO_MORE_ITEMS )
       {
           // Insert error handling here.
           return 1;
       }

       //  Cleanup
       SetupDiDestroyDeviceInfoList(hDevInfo);

       return 0;
   } 
```

希望它是一个简单的谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T02:02:54.993

您需要从以下位置转换返回值`LocalAlloc()`：

```
buffer = (LPSTR) LocalAlloc(LPTR,buffersize * 2); 
```

有关详细信息，请参阅MSDN 上的[LocalAlloc()文档。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366723%28v=vs.85%29.aspx)

# git - svn external 包含一个 git 分支

> ID：11641553
> 
> 赞同：0
> 
> 时间：2012-07-25T01:42:04.547
> 
> 标签：git, svn, git-svn

我有使用驻留在 git 上的子模块的遗留项目。

有很多方法和工具支持从 git 迁移到 git 和/或子模块 svn 项目，但我需要的恰恰相反。由于它们是我无法控制的遗留项目，我无法将它们迁移到 git。我需要的只是每当我在 git 上推送到 origin/master 时，我希望 svn-projects 能够在它们执行“svn up”或“svn co”时自动获取这些更改

有什么办法可以做到这一点？

我试过 svn:externals 但他们不支持 git submodule ...任何线索将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:42:38.673

As a solution I can propose to install [SubGit](http://subgit.com) into both repositories --- it will create a Git interface for SVN repository and SVN interface for Git. Then you can add svn:externals to the main repository for SVN interface and add a submodule to its (the same main repository's) Git, interface using SVN and Git interfaces of your slave repository.

To install SubGit for Git repository run:

```
$ svnadmin create svn.repository

$ subgit configure svn.repository

$ #edit svn.repository/conf/subgit.conf ('git.default.repository' option) 
to set path to your bare Git repository (the repository you on the server)

$ #optionally prepare svn.repository/conf/authors.txt file
to configure custom authors mapping (if you don't like automatic default mapping)

$ subgit install svn.repository 
```

To install SubGit into SVN repository, perform the same steps, but use existing SVN path instead of svn.repository and non-existing path for git.default.repository (a Git repository will be created at this path).

SubGit will keep in sync both interfaces of every repository, both interfaces are writable.

Hope, this helps.

# php - 当不需要 IV 时，PHP 的 mcrypt_get_iv_size 实际上是否返回零？

> ID：11641554
> 
> 赞同：5
> 
> 时间：2012-07-25T01:42:11.213
> 
> 标签：php, encryption, mcrypt

在[mcrypt_get_iv_size 的 PHP 文档中](http://www.php.net/manual/en/function.mcrypt-get-iv-size.php)指出，当算法/块模式组合不使用 IV 时，返回值将为零：

> 返回初始化向量 (IV) 的大小（以字节为单位）。出错时，函数返回 FALSE。如果在指定的密码/模式组合中忽略 IV，则返回零。

当我使用 MCRYPT_DES 作为算法并使用 MCRYPT_MODE_ECB 作为模式调用此函数时，它返回 8（八）而不是预期的 0（零）。

**我的理解是欧洲央行没有也不能使用 IV，因此我期望零值。这是不正确的，是文档不正确，还是我遗漏了其他东西？**

以下代码段演示了该问题：

```
<?php
// I expect this call to return zero.
$size = mcrypt_get_iv_size(MCRYPT_DES, MCRYPT_MODE_ECB);
echo 'IV Size: ' . $size . PHP_EOL; 
```

请注意，我实际上并没有将 ECB 用于现实世界的加密，我只是想找到一种可靠的方法来确定任意算法/模式是否需要 IV。（我注意到 mcrypt 库有一个函数“mcrypt_enc_mode_has_iv”，但似乎没有等效的 PHP 函数）。

我将 PHP v5.3.12 与 libmcrypt 2.5.8_1 一起使用。

**更新可能的解决方法：**

查看 libmcrypt 源，似乎 mcrypt_enc_get_iv_size() 将始终返回任何块密码模式的块大小，但回退到“询问”流模式的算法。

```
int mcrypt_enc_get_iv_size(MCRYPT td)
{
    if (mcrypt_enc_is_block_algorithm_mode(td) == 1) {
        return mcrypt_enc_get_block_size(td);
    } else {
        return mcrypt_get_algo_iv_size(td);
    }
} 
```

mcrypt_get_algo_iv_size() 调用被转发到算法库的 _mcrypt_get_algo_iv_size() 函数。所以希望这意味着如果我手动处理 ECB 案例，它应该为那些需要流模式下的 IV 的算法产生正确的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T01:57:35.640

你是对的，ECB 不使用 IV，因为它也在[PHP 文档中`mcrypt_get_iv_size`](http://www.php.net/manual/en/function.mcrypt-get-iv-size.php)指出：

> 常量之一`MCRYPT_MODE_modename`，或以下字符串之一：“ecb”、“cbc”、“cfb”、“ofb”、“nofb”或“stream”。**在 ECB 模式下，IV 被忽略，因为该模式不需要它**。您需要在加密和解密阶段都拥有相同的 IV（想想：起点），否则您的加密将失败。

为什么`mcrypt_get_iv_size(MCRYPT_DES, MCRYPT_MODE_ECB)`返回 8 是奇数。有意或无意，你应该忽略它。

# deployment - 在禁用功能的情况下将代码运送到生产环境是否存在风险？

> ID：11641563
> 
> 赞同：1
> 
> 时间：2012-07-25T01:43:52.023
> 
> 标签：deployment, workflow, release

我并不是要含糊其辞，但我对发布有意关闭的代码的想法持怀疑态度，而且我无法找到与该主题相关的任何好的资源。这可能真的是一个“取决于”的问题，在这种情况下，请随时投反对票并删除。

我的具体情况是我们自己托管的一个网络应用程序，每两周一次“发布”（推送到生产）。此外，我们目前使用 Subversion，尽管在不久的将来会推动迁移到 Git。

我听说过的一种情况是部署一项功能，该功能依赖于具有尚未发布的已知功能的库，无论是您自己的库还是第三方库。

另一个是在功能完成时发布部分功能，但在所有部分都在生产中之前禁用。

虽然这两种方法一开始听起来都不错，但我质疑在生产环境中禁用的代码的价值，尤其是作为一般实践。似乎这可能会导致未完成的功能使代码库混乱，并导致配置文件超出所需，只是为了提供禁用/启用功能的方法。

部署故意禁用的代码有什么好处（如果有的话），在我们以任何频率执行此操作之前需要解决哪些问题？

另外，请分享任何链接，并告诉我这种做法是否有名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:50:32.500

它被称为[功能切换](http://martinfowler.com/bliki/FeatureToggle.html)

我认为使用基于角色的授权启用/禁用功能不再有风险。您对代码混乱和增加配置的担忧是有道理的，但持续交付的倡导者会认为替代方案（功能分支）更糟糕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:09:27.593

我已经看到这样做的主要基础是将代码推送与配置推送分开。如果您可以将它们分开，则更容易确定您是否有错误的版本或错误的配置。您可以默认关闭不完整功能 X 的版本，继续推送可以回滚而不启用它的版本，然后当您决定打开它时，您可以更新您的配置，如果需要也可以回滚。

# java - Android：将按钮设置为随机位置

> ID：11641566
> 
> 赞同：0
> 
> 时间：2012-07-25T01:44:09.167
> 
> 标签：java, android, button, random, location

我怎样才能尽可能容易地将按钮的位置设置为随机位置？
我试过用这个：（我的屏幕分辨率是 800x480）

```
Button btn = (Button) findViewById(R.id.button1);  
Random r = new Random();

int x = r.nextInt(480);
int y = r.nextInt(800);

btn.setX(x);  
btn.setY(y); 
```

但是当我使用它时，似乎按钮有时会位于我的应用程序之外？是否可以防止这种情况并将按钮保留在应用程序中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T01:49:58.070

很确定你的问题是你没有考虑按钮的宽度和高度，所以如果它随机到 480*800 它将不在屏幕上。尝试类似的东西：

```
int x = r.nextInt(480 - buttonWidth);
int y = r.nextInt(800 - buttonHeight); 
```

# jquery - 解决 JQuery 冲突

> ID：11641567
> 
> 赞同：-1
> 
> 时间：2012-07-25T01:44:10.947
> 
> 标签：jquery, conflict

我设法创建了以下页面，该页面有一个与 BGStetcher 一起工作的 iOS 滑块，并带有一些脚本来控制所使用的两个库之间的冲突。但是，我现在想添加一个进一步的 JQuery 库来在 div 上创建“粉扑”效果。

问题是，当我添加我拥有的 puff 代码时，它会破坏页面并且所有库都不起作用。下面是我创建的 iOS Slider 和 BGStretcher 页面的链接，其中包含显示 puff 测试文档的进一步链接（请暂时原谅它的简单性，我只是想让它工作）。

www.psychobeing.co.uk/2012/demo/index.html

www.psychobeing.co.uk/2012/demo/pufftest.html

我已经尝试重新排序脚本并在下面的粉扑效果脚本和其他脚本之间添加 noConflict 脚本，但它仍然不起作用，如果有的话，它意味着没有任何作用！任何帮助将非常感激！

据我所知，iOSSlider 和 BGStretcher 脚本与以下内容之间存在冲突：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>

<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

<script src="http://ui.jquery.com/latest/ui/effects.core.js"></script> 
```

以下是包含所有内容的最新版本（包括上述行）

[http://www.psychobeing.co.uk/2012/demo/index2.html](http://www.psychobeing.co.uk/2012/demo/index2.html)

如果有人可以帮助我，我将不胜感激！

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T01:52:17.977

你有 2 个版本的 jquery man。很确定这会导致问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T01:49:51.053

您可以尝试删除其中的 1 个 jquery 吗？现在你正在使用 2 个版本。1.5.2 和 1.6.1。

您可以尝试改用 1.7.1 吗？我认为您的其他插件仍然可以工作，因为他们说 1.6+ 兼容

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 
```

如果将其他库与 jquery 一起使用，则使用 NoConflict。例如，Mootools 和 jquery。

更多信息 [http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

# image - Android - Webview 缩放图像以适应最大尺寸

> ID：11641571
> 
> 赞同：3
> 
> 时间：2012-07-25T01:44:43.550
> 
> 标签：image, webview, scale

在我努力制作自己的应用程序的过程中，我又碰上了另一堵砖墙。

***细节***

我今天决定，因为`WebView`已经内置了缩放控件，我将从...迁移到它`ImageView`...我的问题是我仍然有运行 API 3 的活跃用户...所以在编写更新时我必须牢记这一点这个应用程序

***我想做什么？***

只需从我的服务器加载图像并将其显示为适合`WebView`窗口，该窗口的大小可能因屏幕而异。

***你试过什么***

***尝试#1（我个人的尝试）***

```
//iW & iH are the height and width of the image passed from the server
//Calc the scale needed to fit width
int scW = (int) ((iW / (float)wView.getMeasuredHeight()) * 100);
//Calc the scale needed to fit height
int scH = (int) ((iH / (float)wView.getMeasuredHeight()) * 100);
//fit the bigger of the 2
if (scW < scH)
{
    wView.setInitialScale(scW);
}
else
{
    wView.setInitialScale(scH);
}
String pUrl = "http://app.guycothal.com/Funnys/2012724133312929.png";
wView.loadUrl(pUrl); 
```

这会在所有照片上留下一些空白空间

***尝试 #2（在 StackOverFlow 上找到）***

```
String pUrl = "http://app.guycothal.com/Funnys/2012724133312929.png";
String html="<html><body><img src=\"" + pUrl + 
    "\" width=\"10%37\" height=\"10%37\"/></body></html>";
wView.loadData(html, "text/html", "utf-8"); 
```

这使图像变得巨大......我的意思是***巨大的***

***尝试#3（在 StackOverFlow 上找到）***

```
wView.setWebViewClient(null);
wView.getSettings().setJavaScriptEnabled(true);
wView.getSettings().setLoadWithOverviewMode(true);//NEeds api 7
wView.getSettings().setUseWideViewPort(true);
wView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
wView.getSettings().setBuiltInZoomControls(true);
wView.getSettings().setSupportZoom(true); 
wView.getSettings().setUseWideViewPort(true);
wView.setScrollbarFadingEnabled(false);//Needs api 5
String pUrl = "http://app.guycothal.com/Funnys/2012724133312929.png";
wView.loadUrl(pUrl); 
```

除了需要和高于 3 的 API...即使没有这些行，它也会使图像再次变得巨大

***尝试#4（再次在这里找到！！！<---至少我先搜索）***

```
wView.getSettings().setDefaultZoom(WebSettings.ZoomDensity.FAR);
String pUrl = "http://app.guycothal.com/Funnys/2012724133312929.png";
wView.loadUrl(pUrl); 
```

仍然需要 Froyo (API 7) 或更高版本

_**试试#5（想了很久才写这个问题）**

```
//iW & iH are the height and width of the image passed from the server
int iMW = imgView.getMeasuredWidth();
int iMH = imgView.getMeasuredHeight();
int scW = (int) ((iW / (float)iMW) * 100);
int scH = (int) ((iH / (float)iMH) * 100);
if (iMW < iW && iMH < iH)
{
    if (scW < scH)
    {
        wView.setInitialScale(scW);
    }
    else
    {
        wView.setInitialScale(scH);
    }
}
if (iMW < iW && iMH > iH)
{
    wView.setInitialScale(scH);
}
if (iMW > iW && iMH < iH)
{
    wView.setInitialScale(scW);
}
if (iMW < iW && iMH < iH)
{
    if (scW > scH)
    {
        wView.setInitialScale(scW);
    }
    else
    {
        wView.setInitialScale(scH);
    }
}
wView.loadUrl(pUrl); 
```

***下一步是什么？***

我不知道从哪里开始……我整天都在为这件简单的事情自杀……在我拔头发之前请帮忙

***ps 我是秃头……所以头发是个笑话***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T02:12:27.107

***尝试#5 成功了！！！***

```
 int iMW = imgView.getMeasuredWidth();
        int iMH = imgView.getMeasuredHeight();
        //Had the imw and iw backward...same for height
        int scW = (int) ((iMW / (float)iW) * 100); 
        int scH = (int) ((iMH / (float)iH) * 100);
        int fScale = 0;
        if (iMW < iW && iMH < iH)
        {
            if (scW < scH)
            {
                fScale = scW;
            }
            else
            {
                fScale = scH;
            }
        }
        if (iMW < iW && iMH > iH)
        {
            fScale = scW;
        }
        if (iMW > iW && iMH < iH)
        {
            fScale = scH;
        }
        //had signs backwards...DUH
        if (iMW > iW && iMH > iH)
        {
            if (scW < scH)
            {
                fScale = scW;
            }
            else
            {
                fScale = scH;
            }
        }
        wView.setInitialScale(fScale);
        wView.loadUrl(pUrl); 
```

# firebreath - 图像查看器插件 - 第 2 部分

> ID：11641575
> 
> 赞同：0
> 
> 时间：2012-07-25T01:45:13.863
> 
> 标签：firebreath

在以前的线程（[将用户界面添加到图像查看器插件](https://stackoverflow.com/questions/11622738/adding-a-user-interface-to-an-image-viewer-plugin)）中，我对如何将 GUI 控件添加到 firebreath 插件有了一些很好的了解。Taxilian 指出，当我在 Windows 下使用窗口插件时，它应该是直截了当的。基本上就像开发任何其他 Windows 应用程序一样。

现在，以确保我理解正确。我想从 onWindowAttached 事件提供的窗口句柄创建一个子窗口。要创建这样的子窗口，我需要使用 ::RegisterClassEx(...) 注册这样的窗口类以拥有自己的窗口过程。那是对的吗？我的意思是如何访问 WM_COMMAND 事件？

完成后，我需要使用插件中的 hwnd ::CreateWindowEx(...) 我的子窗口。

这是正确的思维方式吗？

提前谢谢，克里斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:04:07.893

实际上创建一个子窗口是可选的；实际插件窗口的 WM_COMMAND 事件将封装在 WindowsEvent 中传递，您可以像获取 AttachedEvent 一样捕获它。所有 Windows 事件都以这种方式发送。

另一种选择是执行您描述的操作并使用 WINPROC 注册一个新类并创建一个子窗口。这样做的主要原因是您可能能够更轻松地与 wxWidgets 等抽象进行交互，因为它不会知道 FireBreath 是什么来从中获取事件。任何一种方法都应该可以正常工作。

# java - 从纬度和经度查找邮政编码

> ID：11641576
> 
> 赞同：0
> 
> 时间：2012-07-25T01:45:21.180
> 
> 标签：java, php, mysql, geolocation

我知道有一些网络服务有这些信息，但是它们可以限制为每天的请求。我有大约 114,000 条记录需要邮政编码。我有一个数据库，里面满是经纬度的邮政编码。但是，我不确定如何根据邮政编码 lat 和 long 计算给定的 lat 和 long。

基本上，我需要将给定的地址 lat 和 long 与提供的邮政编码 lat 和 long 进行交叉引用。我可以使用 PHP、Java 或 MySQL 过程，也可以只使用计算。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T02:05:47.017

我可以给你一块垫脚石，但仅此而已，在这种情况下。

```
$distance = 10;
$latitude = 37.295092;
$longitude = -121.896490;

$sql = "SELECT loc.*, (((acos(sin(($latitude*pi()/180)) * sin((`latitude`*pi()/180))+cos(($latitude*pi()/180)) * cos((`latitude`*pi()/180)) * cos((($longitude - `longitude`)*pi()/180))))*180/pi())*60*1.1515) AS `distance` FROM table_with_lonlat_ref loc HAVING distance < $distance" 
```

如果您创建一个在您拥有的 2 个表之间进行 JOIN 的查询并将距离减少到 1 或 2，那么您在概念上可以想出您需要的几乎所有纬度/经度组合。或者您也可以找到一个包含所有美国邮政编码的数据库，该数据库也具有纬度/经度，然后根据匹配的邮政编码查询一个表以插入另一个表。我在某处有这样一个邮政编码数据库。

我也可以建议[http://www.maxmind.com/app/geolite](http://www.maxmind.com/app/geolite)它永远不会完整，因为你想为它付出代价，它会经常改变，但是。从这里你可以得到几乎所有可能的纬度/经度组合，可以用作基于访问者 IP 的参考点（在某些情况下，它有点偏离，因为 IP 可能从一个城镇或 2 个城镇之外的中心流出。但它的总比没有好，只给你服务器可以处理的限制，并且不用担心 maxmind 使用条款之外的 API 限制。

无论如何，总而言之，我已经在许多网站上使用这种组合一段时间了，迄今为止还没有遇到很多问题。好吧，我知道这不是您问题的直接答案，但我希望它能引导您找到解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T05:14:26.550

由于您已经有一个经纬度数据库，我假设它描述了一组从 (latA, lonA) 到 (latB, lonB) 的矩形区域，每个区域都有一个相关的邮政编码。我还将假设（或推荐）您已经索引了这四个字段。

您的查询可以很容易地匹配坐标 (coordA, coordB) 是否适合描述该矩形的两个范围。

```
update coords set zip_code=(
  select zip_code from zip_codes 
  where coords.coordA >= zip_codes.latA 
    and coords.coordA <= zip_codes.latB
    and coords.coordB >= zip_codes.lonA
    and coords.coordB <= zip_codes.lonB
    limit 1
) 
```

Caviat：您应该在邮政编码数据库中验证 latA < latB 和 lonA < lonB，并验证您在两个表中使用相同的坐标系。您可能需要通过转换或适当地更改运算符来进行调整。

# javascript - 如何处理具有数十个视图的 ScrollableView？

> ID：11641578
> 
> 赞同：2
> 
> 时间：2012-07-25T01:45:27.783
> 
> 标签：javascript, android, titanium

我有一个`ScrollableView`必须滚动浏览几十个视图的 Titanium（仅针对 Android）。每个视图都是关于一两个文本的段落，可能有一个或两个图像。

我担心从一开始就填充所有视图会对 CPU 造成太大压力。所以，我的计划是一次在 ScrollableView 中实际上只有 3 个视图。

这是我想出的解决方案。视图编号为 1 到 10。粗体编号的视图是当前活动的视图。破折号是占位符。当用户查看第一个视图时：

> **1** 2 3 - - - - - - -

用户向右滚动。

> 1 **2** 3 - - - - - - -

用户再次向右滚动，视图 1 被移除。视图 4 现在已按预期添加到 ScrollableView。

> - 2 **3** 4 - - - - - -

等等。

我面临的障碍是，据我所知，无法在现有视图之前插入视图（就像*向左*滚动的情况一样）。

我应该如何实现这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T16:39:09.493

我根据[这个 GitHub gist创建](https://gist.github.com/810171)[了一个 Titanium 模块](https://bitbucket.org/MostThingsWeb/virtualscroller/wiki/Home)，它就是这样做的。

用法是这样的：

```
var VirtualScroller = require('ui/common/VirtualScroller');

var virtualScroller = VirtualScroller({
    itemCount: 10,
    start: 0,
    getView: function(i) {
        return Titanium.UI.createLabel({
            width: Titanium.UI.FILL,
            height: Titanium.UI.FILL,
            text: "This is item " + (i + 1)
        });
    },
    isInfinite: false
});

window.add(virtualScroller.view); 
```

该模块通过控制具有三个视图的 ScrollableView 来工作（如原始要点）。它支持有限（上例）和无限滚动。

我已经[在我的博客上](http://www.mostthingsweb.com/2012/07/virtualscroller-a-titanium-module-supporting-memory-efficient-finite-and-infinite-scrolling/)发布了详细信息，它可以[在 BitBucket](https://bitbucket.org/MostThingsWeb/virtualscroller/wiki/Home)上找到。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-25T01:51:41.577

我建议使用 ListView。您可以对其进行配置，以便没有分隔线。它在内部处理滚动，因此您不需要 ScrollView 包装器。它还管理内容的加载，以便只有在当前滚动位置可见的内容才需要在内存中。

# android - Android textView 图层未正确显示

> ID：11641583
> 
> 赞同：0
> 
> 时间：2012-07-25T01:46:04.283
> 
> 标签：android, android-layout, textview

我有一个 android 应用程序，在刷卡后会显示一些片段，

我的第二个片段布局中的 textView 没有正确显示，

我已经在hierarchyviewer中完成了布局的可视化，

看到我的第二个布局，框架显示在右侧，如何解决这个问题？

![在此处输入图像描述](../Images/6036898b7ffa2fb20ac7091489d78a7b.png)

这是我的xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:background="@drawable/gray_background">

    <com.egoclean.android.widget.flinger.ViewFlinger
        android:id="@+id/flinger"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="15dip"
                android:text="1\. HOW TO PREPARE THE SKIN"
                android:textColor="#da002e" />

             <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="15dip"
                android:textColor="#333333" 
                android:text="@string/taping_prepare"/>

    </LinearLayout>

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

               <TextView
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:padding="15dip"
                    android:textColor="#da002e"
                    android:text="2\. WHERE TO APPLY THE TAPeE" />

            <TextView
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:padding="15dip"
                    android:textColor="#da002e"
                    android:text="2\. WHERE TO APPLY THE TAPeE" />

    </LinearLayout>

        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

           <TextView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="15dip"
            android:textColor="#da002e"
            android:text="3\. HOW TIGHT TO TAPE" />

            <TextView
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:padding="15dip"
                    android:textColor="#da002e"
                    android:text="2\. WHERE TO APPLY THE TAPeE" />

    </LinearLayout>

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="15dip"
            android:textColor="#da002e"
            android:text="4\. HOW MUCH TAPE TO APPLY" />
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="15dip"
            android:textColor="#da002e"
            android:text="5\. WHEN TO REMOVE THE TAPE" />
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="15dip"
            android:textColor="#da002e"
            android:text="6\. HOW TO REMOVE THE TAPE" />
    </com.egoclean.android.widget.flinger.ViewFlinger>

</LinearLayout> 
```

那么，请问如何解决这个问题？

多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T03:33:45.563

ok got it,

is because i was using

> fill_parent

on the text view

using now

```
wrap_content 
```

on the layout width and height, fixed it

;)

# objective-c - 为用户输入暂停 Objective-C 运行时循环

> ID：11641590
> 
> 赞同：0
> 
> 时间：2012-07-25T01:48:07.627
> 
> 标签：objective-c, ios, cocoa-touch, runtime

我有这个代码：

```
 while (!found) {

    char letterGuess=(char)([[[wordList letterRank:lengthOfWord]objectAtIndex:yescount]intValue]+97);
    NSString *stringLetter=[NSString stringWithFormat:@"%c",letterGuess];

    if ([prevGuess count]<=0) {
        alreadyGuessed=NO;
    }else {
        if ([prevGuess containsObject:stringLetter]) {
            alreadyGuessed=YES;
            yescount++;
        }else{
            alreadyGuessed=NO;
        }
    }

    if (!alreadyGuessed) {
        [prevGuess addObject:stringLetter];
        [self drawYesNo];
        NSLog(@"%c",letterGuess);
    }

    if (userAnswer) {

    }else {
        [self noGuess:letterGuess];
    }

    if ([wordList count]<=1) {
        NSLog(@"word found");
        found=YES;
    }

} 
```

基本上，它从一个排序的数组中取出一个字母，将它与包含所有先前输入的字母的另一个数组进行检查，如果它不在那个数组中，它将调用 [self drawYesNo]，它基本上设置并绘制一个是和一个无 UIButton，并根据用户按下的内容更改“userAnswer”变量。

我的问题是这个循环执行得如此之快，以至于 objectAtIndex 很快超出了数组的边界，并引发了错误。我需要一些方法在 [drawYesNo] 方法期间暂停，并允许用户实际做出决定。

我知道在 StackOverflow 上有类似问题的答案，但我就是无法对它们做出正面或反面。有人可以为一个非常新的 OO 程序员解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T02:05:06.820

我无法真正弄清楚您代码的所有逻辑，但听起来您需要将其重构为不同的方法。与其将代码放在 while 循环中，不如使用一种方法来完成大部分（全部？我无法判断）您发布的内容（没有 while 循环）。您在应用启动时调用一次，然后在用户单击按钮后——在按钮的操作方法中更改 userAnswer 的值，然后再次调用该方法。这一直持续到您的按钮方法中满足某些条件，这将导致它停止。

# google-apps-script - 在 Google Scripts 中创建一个可排序的 html 表

> ID：11641592
> 
> 赞同：0
> 
> 时间：2012-07-25T01:48:26.167
> 
> 标签：google-apps-script, html-table

使用 Google Scripts 我有一个 HTML 表格，并希望使列可排序。

有没有办法使用 sortable 或 tablesorter jQuery 插件来做到这一点，因为我看不到如何在不将它们托管在我自己的公共服务器上的情况下调用它们，而且我看不到将它们包含在 Google Scripts 的 js 文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T19:26:17.243

由于您使用的是 Google Scripts，因此您可以通过[Default Services](https://developers.google.com/apps-script/defaultservices)使用 Google Visualization API 。这包括[TableChartBuilder](https://developers.google.com/apps-script/class_tablechartbuilder)，它可以产生您所询问的结果。

下面是[一个示例](https://script.google.com/macros/s/AKfycbxk5xiLQ0Dvx9ZUE_yoOG_zL6QTK1v8Zlg3hMgn3B_rXS_NMMhF/exec)，基于[Visualize Your Data: Charts in Google Apps Script 中的图表示例！](http://googleappsdeveloper.blogspot.ca/2011/09/visualize-your-data-charts-in-google.html)，这也解释了如何发布图表。

```
function doGet() {    
  // Populate the DataTable.  We'll have the data labels in   
  // the first column, "Release", and then add two data columns,  
  // for "Income" and "Expenses"  
  var dataTable = Charts.newDataTable()      
        .addColumn(Charts.ColumnType.STRING, "Release")      
        .addColumn(Charts.ColumnType.NUMBER, "Income")      
        .addColumn(Charts.ColumnType.NUMBER, "Expenses")      
        .addRow(["1.0", 60, 55])      
        .addRow(["10.2", 50, 60])      
        .addRow(["2.10", 100, 50])
        .addRow(["12.0.1", 70, 60])      
        .addRow(["2.0.0.142", 30, 50])
        .addRow(["2.0.0.1_2", 114, 75])
        .build();

  // Build the chart. 
  var chart = Charts.newTableChart()
      .setDataTable(dataTable)  
      .build();

  // Add our chart to the UI and return it so that we can publish  
  // this UI as a service and access it via a URL.  
  var ui = UiApp.createApplication();  
  ui.add(chart);  
  return ui;
} 
```

# python - Python 多处理的基本问题

> ID：11641603
> 
> 赞同：0
> 
> 时间：2012-07-25T01:50:42.157
> 
> 标签：python, multiprocessing

我无法弄清楚以下 python 多处理代码有什么问题。它不会终止。任何建议将不胜感激。

```
from multiprocessing import Process, Queue, Lock

def hello(num, myqueue):
   while True:
      item = myqueue.get()
      print 'Thread ', num, 'got', item
   return

def put_on_queue(myqueue):
   for i in range(10):
      myqueue.put(i)
   return

if __name__ == '__main__':
   processes = []

   myqueue = Queue()

   for i in range(4):
      proc = Process(target = hello, args = (i, myqueue))
      proc.start()
      processes.append(proc)

   put_on_queue(myqueue)

   for proc in processes:
       proc.join() 
```

- - - - - - - 编辑 - - - - - - - - -

好的，所以根据我收到的评论和一些在线帮助，我修改了我的代码，如下所示。仍然没有运气:-(

```
def hello(num, myqueue):
  while not exit_flag:
     item = myqueue.get(False,5)
     print 'Thread ', num, 'got', item
  return

def put_on_queue(myqueue):
  global exit_flag 
  for i in range(10):         
     myqueue.put(i)

   while not myqueue.empty():
      pass
   exit_flag = 1

   return

if __name__ == '__main__':
  mylock = Lock()
  processes = []
  myqueue = Queue()

  exit_flag = 0

  for i in range(4):
     proc = Process(target = hello, args = (i, myqueue))
     #proc.daemon = True
     proc.start()
     processes.append(proc)

  put_on_queue(myqueue)

  for proc in processes:
     proc.join() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T02:00:21.230

`hello`您的函数内部有一个无限循环。您必须将 sentinent 作为最后一个值放入队列中，检查它并跳出循环。

# c++ - 使用快速排序对可能包含无穷大的容器进行排序是否安全？

> ID：11641605
> 
> 赞同：4
> 
> 时间：2012-07-25T01:51:15.653
> 
> 标签：c++, algorithm, qt, sorting, gcc

我已经意识到，为了使快速排序起作用，所有的无穷大都需要相等。

换句话说，这样的标准是不够的：

```
class Entity
{
public: 
   float value() const;
   bool valueIsInfinite() const;
};

class Criterium
{
    bool operator()(Entity left, Entity right)const
    {
        if (left.valueIsInfinite())
            return false;
        return left.value() < right.value();
    }
}

const Criterium criterium;
QVector<Entity> container;

qSort<container.begin(), container .end(), criterium> 
```

这种排序失败，因为根据标准，并非所有无穷大都是相等的。不等式取决于实体进入运算符的顺序。我发现，这样的排序失败了。

我需要这样的东西：

```
class Criterium
{
    bool operator()(Entity left, Entity right)const
    {
        if (left.valueIsInfinite() && right.valueIsInfinite())
            return false;
        if (left.valueIsInfinite() && !right.valueIsInfinite())
            return false;
        if (!left.valueIsInfinite() && right.valueIsInfinite())
            return true;
        return left.value() < right.value();
    }
} 
```

但假设不是

```
 float Entity::value() const;
   bool Entity::valueIsInfinite() const; 
```

方法，我只想使用

```
 float Entity::value() const; 
```

让它回来

```
std::numeric_limits<float>::infinity(); 
```

在这种情况下

```
bool Entity::valueIsInfinite() const; 
```

将返回 true。

现在我测试了这种方法，它似乎有效。但我担心无限可能出现的其他方式。例如：

```
float otherInfinity = exp(std::numeric_limits<float>::infinity()); 
```

这个无限似乎是一样的。但我想确定。我知道 C++ 标准没有提到浮点算术实现的细节，但是如果我使用 gcc，它在所有情况下都安全吗？我的意思是在 gcc 中创建的所有无穷大都是平等的吗？对可能包含在不同场合出现的无穷大的浮动容器进行分类是否安全？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T02:17:38.057

在没有 NaN 的情况下，正则运算符的无穷大是可以的`<`：

*   +∞ < +∞ 为假：`<`不自反；
*   如果 +∞ < x 为真，则 x < +∞ 对于非无穷大值为假：`<`反对称；
*   如果 +∞ < x 为真且 x < y 为真，则 +∞ < y 为真：`<`是传递的；
*   如果 +∞ 与 x 不可比（不小于，不大于），并且 x 与 y 不可比，则 +∞ 与 y 不可比：`<`显示等价的传递性。

（类似的性质对 -∞ 有效）

鉴于*没有*`operator<`NaN 的浮点数的这些属性是严格的弱排序，因此适用于标准库样式的排序操作。

 *但是，对于 NaN，反对称性质被破坏：NaN < 1 为假，1 < NaN 也为假。您可以通过在所有非 NaN 之前或之后排序所有 NaN 来解决此问题，其方式类似于您提出的策略：

```
struct Criterion
{
    bool operator()(Entity left, Entity right)const
    {
        // NaNs come before non-NaNs
        if (isnan(left.value()) && isnan(right.value()))
            return false;
        if (!isnan(left.value()) && isnan(right.value()))
            return false;
        if (isnan(left.value()) && !isnan(right.value()))
            return true;
        return left.value() < right.value();
    }
} 
```

（`isnan`可以在 C++11 标准库中找到，或者很容易实现为`return x != x;`）

这样，我们得到 NaN < 1 为真，1 < NaN 为假，而其他属性仍然成立。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T02:10:20.243

如果你使用这个：

```
bool operator()(Entity left, Entity right)const
{
    return !(left.valueIsInfinite() && right.valueIsInfinite())
        && left.value() < right.value();
} 
```

然后无限被认为是相同的顺序，因为没有一个在另一个之前......*

# objective-c - ARC和cocos2d中的桥接演员

> ID：11641607
> 
> 赞同：3
> 
> 时间：2012-07-25T01:51:55.687
> 
> 标签：objective-c, ios, cocos2d-iphone, automatic-ref-counting

我正在用一些书学习 cocos2d，即 Pablo Ruiz 的书，这里有一些代码：

```
[next runAction:[CCSequence actions:[CCDelayTime
                 actionWithDuration:2], 
       [CCFadeIn actionWithDuration:1],
    [CCDelayTime actionWithDuration:2],
     [CCCallFuncND actionWithTarget:self selector:@selector(cFadeAndShow:data:) 
                                                    data:images],nil]];

- (void) cFadeAndShow: (id)sender data:(void*) data
    {
        NSMutableArray *images = data;
        [self fadeAndShow:images];

    } 
```

它给了我一个错误显示在数据上：runAction 中的图像：

```
Implicit conversion of Objective-C pointer type 'NSMutableArray *' to C pointer type 'void *' requires a bridged cast 
```

我尝试修复它无济于事。我该怎么办？我尝试将 void* 更改为 NSMutableArray，但仍然没有帮助。如何桥接施法？我试过使用`__bridge`，但它说你不能桥接转换 NSMutableArray。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T02:03:01.743

尝试替换此调用：

```
[CCCallFuncND actionWithTarget:self selector:@selector(cFadeAndShow:data:) data:images],nil]]; 
```

有了这个：

```
[CCCallFuncND actionWithTarget:self selector:@selector(cFadeAndShow:data:) data:(__bridge void*)images],nil]]; 
```

然后在您的淡入淡出和显示方法中，将其转换回一个 id：

```
NSMutableArray *images = (__bridge id) data; 
```

# jsf-2 - 在jsf中设置集合的属性

> ID：11641610
> 
> 赞同：1
> 
> 时间：2012-07-25T01:52:31.547
> 
> 标签：jsf-2

我想知道为什么，当我在 inputTextarea 中输入内容时，支持 bean 不会被更新。当我打印出结果时，它返回“”。System.out.println(devoir.lstQuestions.get(0).getReponse()); 展示 ””;

```
 <ui:repeat  value="#{devoirController.devoir.lstQuestions}"  var="question"  />  
    <h:inputTextarea value="#{question.reponse}" id="reponse">  
    </h:inputTextarea>  
    </ui:repeat> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T02:08:08.913

为了实现这一点，`#{devoirController}`bean 需要是一个`@ViewScoped`bean，并且`lstQuestions`需要在 bean 的构造函数或`@PostConstruct`方法中预先填充。`devoir`and的 getter 方法`lstQuestions`绝对不应包含任何其他代码行，而不仅仅是`return propertyName;`.

# c++ - 通过“int *”指针更改“const int”。令人惊讶和有趣

> ID：11641613
> 
> 赞同：3
> 
> 时间：2012-07-25T01:52:56.443
> 
> 标签：c++

> **可能重复：**
> [通过非常量指针修改 const](https://stackoverflow.com/questions/2508605/modifying-a-const-through-a-non-const-pointer)

让我们先看看下面的代码。非常短的代码：

```
int main()
{
    const int n=9;
    int *p=(int*)&n;
    *p=5;
    cout<<*p<<endl; //result is 5
    cout<<n<<endl;  // 9
    int a=n+1;
    cout<<a<<endl;  // 10
} 
```

令我惊讶的是，编译器根本没有抱怨。结果就像我在评论中显示的那样。
但是，如果这或多或少有意义的话。更令人惊讶的是，当你调试它时，你可以看到 n 的值实际上已经变成了 5！
但是，当您使用“n”时，似乎“n”仍然被视为原始值9！
所以我猜编译器已经将“n”的原始值存储在其他地方，对吧？那么“n”的原始值，即 9，现在存储在哪里呢？
谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T01:55:03.510

这可能是由于优化。既然你声明`const int n=9`了，你基本上是在做出一个你不会修改的承诺`n`。所以编译器可以自由优化`cout << n << endl;`为一个简单的`cout << 9 << endl;`. 我不认为旧值存储在其他任何地方。

然而，这是**未定义的行为**。

我可以确认此行为的原因是优化，即使在调试版本中也是如此：

```
 cout<<n<<endl;  
01151426  mov         esi,esp  
01151428  mov         eax,dword ptr [__imp_std::endl (11582B4h)]  
0115142D  push        eax  
0115142E  mov         edi,esp  

//HERE:
//
01151430  push        9  
//
//

01151432  mov         ecx,dword ptr [__imp_std::cout (11582B0h)]  
01151438  call        dword ptr [__imp_std::basic_ostream<char,std::char_traits<char> >::operator<< (11582ACh)]  
0115143E  cmp         edi,esp  
01151440  call        @ILT+325(__RTC_CheckEsp) (115114Ah)  
01151445  mov         ecx,eax  
01151447  call        dword ptr [__imp_std::basic_ostream<char,std::char_traits<char> >::operator<< (11582A8h)]  
0115144D  cmp         esi,esp  
0115144F  call        @ILT+325(__RTC_CheckEsp) (115114Ah) 
```

`n`甚至没有进入讨论。

如果`n`不是`const`，优化将是非法的：

```
00D51426  mov         esi,esp  
00D51428  mov         eax,dword ptr [__imp_std::endl (0D582B4h)]  
00D5142D  push        eax  
00D5142E  mov         edi,esp  

//HERE
//
00D51430  mov         ecx,dword ptr [n]  
00D51433  push        ecx  
//
//

00D51434  mov         ecx,dword ptr [__imp_std::cout (0D582B0h)]  
00D5143A  call        dword ptr [__imp_std::basic_ostream<char,std::char_traits<char> >::operator<< (0D582ACh)]  
00D51440  cmp         edi,esp  
00D51442  call        @ILT+325(__RTC_CheckEsp) (0D5114Ah)  
00D51447  mov         ecx,eax  
00D51449  call        dword ptr [__imp_std::basic_ostream<char,std::char_traits<char> >::operator<< (0D582A8h)]  
00D5144F  cmp         esi,esp  
00D51451  call        @ILT+325(__RTC_CheckEsp) (0D5114Ah) 
```

在这里， 的值`n`被压入参数堆栈，因为它不是`const`.

# c# - 如何从一个方向获得 XY 欧拉角？

> ID：11641614
> 
> 赞同：2
> 
> 时间：2012-07-25T01:53:06.187
> 
> 标签：c#, c++, math, unity3d

我有一个第一人称相机控制器，实现如下：

```
float rotSpeed = 20.0f;

xRotation += deltaPos.y * rotSpeed * Time.deltaTime;
yRotation += deltaPos.x * -rotSpeed * Time.deltaTime;

while(xRotation > 360.0f) xRotation -= 360.0f;
while(xRotation < 0.0f)   xRotation += 360.0f;

while(yRotation > 360.0f) yRotation -= 360.0f;
while(yRotation < 0.0f)   yRotation += 360.0f;

cam.transform.rotation = Quaternion.Euler(xRotation, yRotation, 0); 
```

我希望相机能够捕捉到 3D 空间中的某个目标。

如果我使用 transform.LookAt(target)，相机控制器只会将视图重新捕捉到它来自的位置，并且我无法在调用 LookAt() 后从相机的旋转设置 xRotation 和 yRotation，因为 LookAt()有时会产生一个 Z 旋转的四元数。

那么如何找到将相机指向某个目标所需的 X 和 Y 旋转呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T02:39:38.303

[您可以使用Quaternion.LookRotation](http://docs.unity3d.com/Documentation/ScriptReference/Quaternion.Lerp.html)轻松修改玩家的旋转，然后使用[Quaternion.Lerp](http://docs.unity3d.com/Documentation/ScriptReference/Quaternion.LookRotation.html)对其进行插值。

```
public Transform target;
float turnSpeed = 5.0f;

Quaternion lookAt = Quaternion.LookRotation(target.position - transform.position);
transform.rotation = Quaternion.Lerp(transform.rotation, lookAt, Time.smoothDeltaTime * turnSpeed); 
```

*其中 transform 是玩家的变换。*

您所要做的就是确定何时应该出现捕捉规则。

**后记：**实际上这可能还不是全部。如果目标/玩家位置经常移动，您可能会遇到一个“死区”，在该区域中，LookRotation 无法可靠地捕捉到它的目标。有关此问题（和解决方案）的更多详细信息，请[点击此处](https://gamedev.stackexchange.com/questions/17313/how-to-prevent-homing-entities-from-orbiting-their-targets)

# .net - 如何指定与显示 CHM 文件关联的图标？

> ID：11641616
> 
> 赞同：0
> 
> 时间：2012-07-25T01:53:07.990
> 
> 标签：.net, winforms, chm

在我的主要形式中，我有以下代码：

```
 FormHelpLauncher formHelpLauncher = new FormHelpLauncher();
        formHelpLauncher.LaunchHelpFile(chmFilename); 
```

FormHelpLauncher 代码如下所示：

```
 public partial class FormHelpLauncher : Form
   {
      public FormHelpLauncher()
      {
         InitializeComponent();
      }

      public void LaunchHelpFile(string chmFilename)
      {
         System.Windows.Forms.Help.ShowHelp(this, chmFilename, HelpNavigator.TableOfContents);
      }
   } 
```

这会实例化（但不显示）一个 Forms 类，然后启动一个 CHM 帮助文件。使用不显示的辅助 Forms 类背后的想法是，它在帮助窗口和我的程序的主窗口之间提供了额外的解耦。特别是，它会导致帮助窗口包含在 Alt-Tab 列表中，这是我更喜欢的。

现在我的问题是：有什么方法可以指定 Alt-Tab 将在帮助窗口中显示的图标？我尝试了各种方法，但 Alt-Tab 始终显示带有黄色问号的白纸图标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T02:18:51.103

您可以使用 FindWindow 找到您的帮助窗口，然后向其发送 WM_SETICON 消息。

*   [有什么办法可以改变windows中浏览器的任务栏图标吗？](https://stackoverflow.com/questions/356883/is-there-any-way-to-change-the-taskbar-icon-of-a-browser-in-windows)

*   [http://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/2e2ef019-56a7-4d02-bef6-76968407d784/](http://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/2e2ef019-56a7-4d02-bef6-76968407d784/)

# javascript - Javascript - 包含变量的多个数组

> ID：11641617
> 
> 赞同：1
> 
> 时间：2012-07-25T01:53:08.807
> 
> 标签：javascript

我是 Javascript 新手，在编写程序的任务中发现了一些困难。

我的任务是编写一个程序，允许用户输入他们的出生日期。然后程序继续在图像中给出相应的中国十二生肖和用户存活的天数。

**会输入什么？**

*   用户的出生年份（假设将输入有效的 4 位数年份）
*   用户的出生月份（假设用户将至少输入月份名称的前三个字母，但这可能会更长并且可能包含大写字符，因此可能是 jan、Jan、january 或 January，或其他月份名称)
*   用户的出生日期（以月份为单位）（假设将输入有效日期）

**我们将使用的常量**

创建并适当命名常量以存储以下值：

*   包含月份缩写“JANFEBMARAPPRMAYJUNJULAUGSEPOCTNOVDEC”的字符串
*   一天的毫秒数 1000*60*60*24
*   中国十二生肖的周期
*   1924年中国十二生肖开始的年份

**到目前为止我的代码：**

```
var year = prompt('Enter year of birth as a 4 digit integer') // A prompt to enter the year of birth.
var month = prompt('Enter the name of the month of birth') // A prompt to enter the month of birth.
var date = prompt('Enter day of birth as an integer') // A prompt to enter the date of birth.
    var month = ["jan", "feb", "mar", "apr", "may", "jun", "jul", "aug", "sep", "oct", "nov", "dec"]
    var month = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
    var month = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"]
    var month = ["january", "february", "march", "april", "may", "june", "july", "august", "september", "october", "november", "december"] 
```

我在输入出生月份时遇到问题。我正在尝试编写一个代码来假设用户将至少输入月份名称的前三个字母，但这可能会更长并且可能包含大写字符，因此它可能是 jan、Jan、january 或 January，或者其他月份名称。

任何帮助将不胜感激！

乔治

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T01:59:16.463

用于[`.substr()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substr)缩短他们的输入，并将`.toLowerCase()`其转换为小写。然后将其与您的月份数组匹配（小写版本）。这里有一些帮助您入门：

```
var month = prompt('Enter the name of the month of birth');
// Chop everything after the first 3 characters and make it lowercase
month = month.substr(0,3).toLowerCase();
// Store your array in months, differently named than the month input
var months = ["jan", "feb", "mar", "apr", "may", "jun", "jul", "aug", "sep", "oct", "nov", "dec"];

// You can then use array.indexOf() to locate it in the array
// Not available in older browsers though
var pos = months.indexOf(month);
if (pos >= 0) {
   // valid month, number is pos
} 
```

PS不要忘记`;`每个语句末尾的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T02:03:47.297

将所有可能的月份字符串组合成一个数组：

```
var year = prompt('Enter year of birth as a 4 digit integer') // A prompt to enter the year of birth.
var month = prompt('Enter the name of the month of birth') // A prompt to enter the month of birth.
var date = prompt('Enter day of birth as an integer') // A prompt to enter the date of birth.
var possibleMonths = ["jan", "feb", "mar", "apr", "may", "jun", "jul", "aug", "sep", "oct", "nov", "dec", 
    "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", 
    "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December", 
    "january", "february", "march", "april", "may", "june", "july", "august", "september", "october", "november", "december"] 
```

然后，遍历该数组以检查您的用户是否输入了其中一个月份：

```
var isValidMonth = false;

for (var i = 0; i < possibleMonths.length; i++){
    if (possibleMonths[i] === month){
        isValidMonth = true;
        break;
    }
}

alert(month + " is a valid month: " + isValidMonth); 
```

# c++ - C++ 异步调用最佳实践

> ID：11641620
> 
> 赞同：4
> 
> 时间：2012-07-25T01:53:21.007
> 
> 标签：c++, boost-asio

我正在使用 boost::asio。我编写了一个负责从套接字异步读取的类。在我的应用程序中，io_service 可以在一个应用程序运行期间多次停止和启动。所以我不得不担心服务停止时内存泄漏。我想到了两个解决方案：

1.  一个请求异步请求的类为函数提供了一个在 asio 读取中使用的缓冲区，并且它负责释放它。这是一个明显的解决方案，但我不喜欢它。将不需要的参数传递给函数看起来很奇怪。

2.  绑定到回调的智能指针。此处示例：http: [//pastebin.com/p8nQ5NFi](http://pastebin.com/p8nQ5NFi)

现在我正在使用第二种解决方案，但无论我感觉如何，我正在发明一个轮子。异步调用中缓冲区清理的常见做法是什么？我的方法有什么隐藏的问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T22:10:12.317

这种`shared_ptr`方法相当普遍。但是，不是将 a`shared_ptr`作为附加参数传递给`bind`，而是可以将`shared_ptr`作为实例对象传递来代替`this`。

```
boost::shared_ptr< my_class > ptr( this );

boost::asio::async_read( stream, buffer, 
  boost::bind( &my_class::read_handler, ptr, 
     boost::asio::placeholders::error
     boost::asio::placeholders::bytes_transferred ) ); 
```

通常，由于实例将通过 a 进行管理`shared_ptr`，它可能在也可能不在 的上下文中`this`，因此使用 Boost.SmartPointer 的 是一个好主意[`enable_shared_from_this`](http://www.boost.org/doc/libs/1_50_0/libs/smart_ptr/enable_shared_from_this.html)。当一个类继承自 时`boost::enable_shared_from_this`，它提供一个返回有效实例的`shared_from_this()`成员函数。`shared_ptr``this`

```
class my_class: public boost::enable_shared_from_this< my_class >
{
  void read()
  {
     boost::asio::async_read( stream, buffer, 
       boost::bind( &my_class::read_handler, shared_from_this(), 
          boost::asio::placeholders::error
          boost::asio::placeholders::bytes_transferred ) );
  }
};

boost::shared_ptr< my_class > foo( new my_class() );
foo->read(); 
```

在这个片段中，`foo.get()`两者`foo->shared_from_this()`都指向同一个实例。这有助于防止难以定位的内存泄漏。例如，在原始示例代码中，在尝试调用时`Protocol::AsyncReadMessage`if的复制构造函数抛出了内存泄漏。Boost.Asio 的[异步 TCP 日间服务器](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_asio/tutorial/tutdaytime3.html)和许多[示例](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_asio/examples.html)都显示在 Boost.Asio 中使用。为了更深入地理解，[这个](https://stackoverflow.com/questions/11356742)问题专门涵盖了异步 Boost.Asio 函数和.`AsyncReadHandler``AsyncReadMessage``enable_shared_from_this``shared_ptr`

* * *

此外，在原始代码中，创建`Protocol::AsyncHelper`模板类可能比让它成为具有模板成员函数的非模板类更容易。这将允许`AsyncHelper`接受协议、流和处理程序作为构造函数参数，并将它们存储为成员变量。此外，它使`bind`调用更易于阅读，因为它减少了需要传递的参数数量，并且由于成员函数不再是模板，因此无需指定它们的完整类型。 [这](http://pastebin.com/2RXqfDp0)是一个示例的快速传递。

# c++ - for_each 调用不适用于指针向量

> ID：11641621
> 
> 赞同：0
> 
> 时间：2012-07-25T01:53:23.827
> 
> 标签：c++, pointers, stl, foreach, huffman-code

我正在使用指针向量来释放堆中的一系列节点对象。该向量具有所有节点对象地址，并且有一个函数 delete_nodes，它与 for_each 循环一起用于删除向量中的所有节点。出于某种原因，我在 eclipse cdt 中收到以下错误，其中 for_each 循环用红色下划线：

```
error: no matching function for call to 'for_each(__gnu_cxx::__normal_iterator<Node**, std::vector<Node*, std::allocator<Node*> > >, __gnu_cxx::__normal_iterator<Node**, std::vector<Node*, std::allocator<Node*> > >, <unresolved overloaded function type>)' 
```

该代码用于 Huffman 编码，for_each 循环位于最后。nodes_delete 向量在 while 循环之前创建。

```
void Huff::delete_nodes(Node*n){//this is used to delete all the nodes in the binary tree at the end of Huff::compress()
    delete n;
}
vector<Code>* Huff::compress(){
    //-------GETTING WEIGHTS/FREQUENCIES------
    vector<Node *>* nodes = new vector<Node*>; // Vector of nodes for later use
    map<char, int>* freq = new map<char, int>; //  Map to find weight of nodes
    for(unsigned int i = 0; i < content.length(); i++)
        (*freq)[content[i]]++; 
    CopyTo copyto(nodes); //sets vector<Node*> to copy to 
    for_each(freq->begin(), freq->end(), copyto); // Copies 
    delete freq;
    vector<Node *>::iterator beg = nodes->begin();

    //-------SETTING UP TO BUILD TREE------
    if(nodes->size() % 2 == 1){ //makes sure there are an even number of nodes
        Node* fill = new Node;
        fill->set_node(0, '*', NULL, NULL);
        nodes->push_back(fill);
    }
    huff_sort(nodes); // sort nodes by weight
    vector<Node*> nodes_delete(*nodes); //this is used to delete all the nodes in the binary tree at the end
    //-------BUILDING TREE------
    while(nodes->size() != 1){ //Sorts nodes by weight and then removes two of them and replaces them with one
        int w= (**beg).weight + (**(beg+1)).weight;
        Node* p = new Node;
        p->set_node(w, '*', *nodes->begin(), *(nodes->begin()+1)); //making it the parent node of the two lowest nodes
        nodes->erase(nodes->begin(), nodes->begin()+2);
        unsigned int i = 0;
        while(w > (*nodes)[i]->weight && i <= nodes->size()){ //finds where to insert the parent node based on weight
            i++;
        }
        if(i > nodes->size()) //if it needs to be inserted at the end
            nodes->push_back(p);
        else
            nodes->insert(nodes->begin()+i, p);
    }
    //-------TRAVERSING TREE------
    Node* root = (*nodes)[0];
    delete nodes;
    vector<Code>* codes = new vector<Code>;
    traverse(root, codes , "");
    delete root;
    for_each(nodes_delete.begin(), nodes_delete.end(), delete_nodes);
    return codes;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T02:00:09.557

您正在尝试将无界成员函数作为仿函数传递。您必须使用例如[std::mem_fn](http://en.cppreference.com/w/cpp/utility/functional/mem_fn)和[bind](http://en.cppreference.com/w/cpp/utility/functional/bind)将其绑定到当前对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T02:02:46.593

看起来你`delete_nodes`是一个非静态成员函数。如果是这样，您不能仅将`delete_nodes`其用作`std::for_each`. `std::for_each`需要一个函子。你`delete_nodes`不是函子。

首先，要获得指向非静态成员函数的指针，`&`始终需要运算符和限定名称。非静态成员函数的名称（just `delete_nodes`）在 C++ 中不是有效的表达式。你必须做`&Huff::delete_nodes`。

其次，指向成员函数的指针（与指向“普通”函数的指针相反）不是函子。为了把它变成一个仿函数，你可以使用`std::mem_fun`函数。这将为您提供一个*二元*仿函数，因为`std::mem_fun`会将隐式`this`参数转换为显式参数。为了将其转换为所需的一元仿函数，`std::for_each`您必须将第一个参数绑定到特定的对象指针值（`this`可能？）。

上述步骤的最终结果将如下所示

```
bind1st(mem_fun(&Huff::delete_nodes), this) 
```

这是一个调用对象`delete_nodes`的一元函子。`this`

因此，`for_each`您示例中的调用应如下所示

```
for_each(nodes_delete.begin(), nodes_delete.end(),
  bind1st(mem_fun(&Huff::delete_nodes), this)); 
```

但是，看起来在您的实现`delete_nodes`中可以变成*静态*成员函数。静态成员函数是一个“普通”函数，这意味着它是一个函子，可以直接使用。即，如果您将`delete_nodes`其设为静态，则您的代码应该按原样工作。

确定您希望遵循的路径并进行必要的更改。

# list - 尽管有布局，但无法在面板中显示列表

> ID：11641626
> 
> 赞同：0
> 
> 时间：2012-07-25T01:54:00.053
> 
> 标签：list, sencha-touch-2, panel

嗨 StackOverFlow 社区，

好吧，也许是我忘记阅读的理论，但我不明白为什么下面的代码没有显示任何内容。（我已经在论坛中尝试了其他答案，例如配置高度手册和布局适合工作，但是使用这些布局我无法做我想做的事）。

代码：

```
Ext.define('myMoney.view.Settings',{
    extend: 'Ext.Panel', //--> Ext.Container don't work either
    fullscreen: true,
    xtype: 'configuracion',

    config: {
        title: 'Configuracion',
        iconCls: 'settings',
        scrollable: true,
        styleHtmlContent: true,
        layout: {
            type: 'vbox',
            align: 'middle'
        },
        defaults: {
            width: '50%',
            height: '50%',
            flex:1,
        },

        items: [
            {
                xtype: 'list',
                itemTpl: '{item}',

                data: [
                    {item: 'Cuentas Actuales'},
                    {item: 'Agregar nueva Cuenta'},
                ]
            },
        ]
    }
}); 
```

真正的代码在列表之前有两个“字段集”，但我不想给你们看太长的代码。所以，有人知道会发生什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:21:22.773

通常它由 **layout: 'fit'**设置固定。您可以将其添加到外部字段集配置中。

# c# - 使用比我需要调用的方法更少约束的泛型类型实现接口

> ID：11641628
> 
> 赞同：6
> 
> 时间：2012-07-25T01:54:05.743
> 
> 标签：c#, generics

我正在实现一个接口，以便将自定义业务逻辑注入到利用 Microsoft Unity 的框架中。我的核心问题是我需要实现的接口定义了以下方法：

```
T InterfaceMethod<T>(); 
```

`T`没有限制。在我的代码中，我需要从不同的 3rd 方库调用一个方法，其方法签名为

```
T AnotherMethod<T>() where T: class; 
```

类型 T 对 的逻辑很重要`AnotherMethod`。有什么方法可以`AnotherMethod<T>()`在我的实现中调用，而不使用反射？`T`如果是值类型，我显然需要采取替代措施。有没有办法自动装箱来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:44:11.093

我不确定这是否正是您所需要的，但这允许您在不使用反射的情况下从 InterfaceMethod 调用 AnotherMethod。它仍然使用 Convert.ChangeType。

这个想法是使类的实现具有约束（此处为 Tin）。然后将 InterfaceMethod 的无约束类型 T 转换为 Tin。最后，您可以使用受约束的类型调用 AnotherMethod。以下适用于字符串。

```
public interface ITest
{
    T InterfaceMethod<T> (T arg);
}

public interface ITest2
{
    U AnotherMethod<U>(U arg) where U : class;
}

public class Test<Tin> : ITest, ITest2 where Tin : class
{
    public T InterfaceMethod<T> (T arg)
    {
        Tin argU = arg as Tin;
        if (argU != null)
        {
            Tin resultU = AnotherMethod(argU);
            T resultT = (T)Convert.ChangeType(resultU,typeof(T));
            return resultT;
        }
        return default(T);
    }

    public U AnotherMethod<U> (U arg) where U : class { return arg; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T02:28:24.983

我不认为你正在寻找的东西是可能没有反思的。充其量，您可以调用`AnotherMethod<object>()`并转换结果。但这只有在`AnotherMethod`'s`T`对您的目的不重要时才真正有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T17:44:58.070

其他人说的是你可以通过这样的对象：

```
public interface ITest
{
    T InterfaceMethod<T>(T arg);
}

public interface IAnotherTest
{
    U AnotherMethod<U>(U arg) where U : class;
}

public class Test : ITest
{
    private IAnotherTest _ianothertest;

    public T InterfaceMethod<T>(T arg)
    {
        object argU = arg as object;
        if (argU != null)
        {
            object resultU = _ianothertest.AnotherMethod(argU);
            T resultT = (T)Convert.ChangeType(resultU, typeof(T));
            return resultT;
        }
        return default(T);
    }
} 
```

# c - 在 C 中生成 INTEGERS 的均匀分布

> ID：11641629
> 
> 赞同：12
> 
> 时间：2012-07-25T01:54:21.250
> 
> 标签：c, algorithm, statistics, integer, uniform

我编写了一个 C 函数，我认为它从范围为 [rangeLow, rangeHigh]的**均匀分布中选择****整数，包括在内。**这不是家庭作业——我只是在一些嵌入式系统中使用它来做一些有趣的事情。

 **在我的测试用例中，此代码似乎产生了适当的分布。不过，我并不完全相信实施是正确的。有人可以进行健全性检查并让我知道我是否在这里做错了什么？

```
//uniform_distribution returns an INTEGER in [rangeLow, rangeHigh], inclusive.
int uniform_distribution(int rangeLow, int rangeHigh)
{
    int myRand = (int)rand(); 
    int range = rangeHigh - rangeLow + 1; //+1 makes it [rangeLow, rangeHigh], inclusive.
    int myRand_scaled = (myRand % range) + rangeLow;
    return myRand_scaled;
}
//note: make sure rand() was already initialized using srand() 
```

PS我搜索了其他类似的问题。但是，很难过滤掉讨论随机整数而不是随机浮点数的一小部分问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-25T08:27:22.900

假设 rand() 在 [0..RAND_MAX] 范围内生成一个均匀分布的值 I，而您希望在 [L,H] 范围内生成一个均匀分布的值 O。

假设 I in 的范围是 [0..32767]，而 O 的范围是 [0..2]。

根据您建议的方法，O= I%3。请注意，在给定范围内，有 10923 个 I%3=0 的数字，10923 个 I%3=1 的数字，但只有 10922 个 I%3=2 的数字。因此，您的方法不会将值从 I 统一映射到 O。

作为另一个示例，假设 O 在 [0..32766] 范围内。

根据您建议的方法，O=I%32767。现在，对于 I=0 和 I=32767，您将得到 O=0。因此 0 的可能性是任何其他值的两倍 - 您的方法再次不一致。

* * *

生成统一映射的建议方法如下：

1.  计算在 [L,H] 范围内存储随机值所需的位数：

    无符号整数 nRange = (无符号整数)H - (无符号整数)L + 1;
    unsigned int nRangeBits= (unsigned int)ceil(log((double(nRange) / log(2.));

2.  生成 nRangeBits 随机位

    这可以通过右移 rand() 的结果来轻松实现

3.  确保生成的数字不大于 HL。如果是 - 重复步骤 2。

4.  现在您只需添加 L 即可将生成的数字映射到 O。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-25T03:06:01.233

在某些实现中，`rand()`没有在其低阶位上提供良好的随机性，因此模运算符不会提供非常随机的结果。如果你发现是这种情况，你可以试试这个：

```
int uniform_distribution(int rangeLow, int rangeHigh) {
    double myRand = rand()/(1.0 + RAND_MAX); 
    int range = rangeHigh - rangeLow + 1;
    int myRand_scaled = (myRand * range) + rangeLow;
    return myRand_scaled;
} 
```

`rand()`正如 Lior 所说，使用这种方式会产生偏差。但是，如果你能找到一个统一的数字生成器来计算，那么这项技术就很好`myRand`。一个可能的候选人是`drand48()`。这将大大减少对难以检测的事物的偏差量。

但是，如果您需要加密安全的东西，您应该使用 Lior 的答案中概述的算法，假设您`rand()`本身是加密安全的（默认的可能不是，所以您需要找到一个）。下面是 Lior 描述的简化实现。我们假设范围落在 内，而不是计算位，`RAND_MAX`并计算一个合适的倍数。最坏的情况是，该算法最终会在每次请求范围内的数字时平均调用随机数生成器两次。

```
int uniform_distribution_secure(int rangeLow, int rangeHigh) {
    int range = rangeHigh - rangeLow + 1;
    int secureMax = RAND_MAX - RAND_MAX % range;
    int x;
    do x = secure_rand(); while (x >= secureMax);
    return rangeLow + x % range;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-25T02:11:40.030

我认为众所周知 rand() 不是很好。这仅取决于您需要的“随机”数据有多好。

*   [http://www.azillionmonkeys.com/qed/random.html](http://www.azillionmonkeys.com/qed/random.html)
*   [http://www.linuxquestions.org/questions/programming-9/generating-random-numbers-in-c-378358/](http://www.linuxquestions.org/questions/programming-9/generating-random-numbers-in-c-378358/)
*   [http://forums.indiegamer.com/showthread.php?9460-Using-C-rand%28%29-isn-t-as-bad-as-previously-thought](http://forums.indiegamer.com/showthread.php?9460-Using-C-rand%28%29-isn-t-as-bad-as-previously-thought)

我想你可以写一个测试然后计算卡方值，看看你的统一生成器有多好：

[http://en.wikipedia.org/wiki/Pearson%27s_chi-squared_test](http://en.wikipedia.org/wiki/Pearson%27s_chi-squared_test)

根据您的用途（不要将其用于您的在线扑克洗牌器），您可能会考虑使用 LFSR

[http://en.wikipedia.org/wiki/Linear_feedback_shift_register](http://en.wikipedia.org/wiki/Linear_feedback_shift_register)

如果您只想要一些伪随机输出，它可能会更快。此外，据说它们可以是统一的，尽管我对数学的研究不足以支持这一说法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T20:34:45.643

纠正分布错误的版本（由 Lior 指出）涉及 rand() 返回的高位，并且仅使用整数数学（如果需要的话）：

```
int uniform_distribution(int rangeLow, int rangeHigh)
{
    int range = rangeHigh - rangeLow + 1; //+1 makes it [rangeLow, rangeHigh], inclusive.
    int copies=RAND_MAX/range; // we can fit n-copies of [0...range-1] into RAND_MAX
    // Use rejection sampling to avoid distribution errors
    int limit=range*copies;    
    int myRand=-1;
    while( myRand<0 || myRand>=limit){
        myRand=rand();   
    }
    return myRand/copies+rangeLow;    // note that this involves the high-bits
} 
```

//注意：确保 rand() 已经使用 srand() 初始化

`range`如果它比 小得多，这应该可以很好地工作`RAND_MAX`，否则您将回到问题，即`rand()`就其低位而言不是一个好的随机数生成器。**

# java - 如何检测我正在运行的 JVM 是否正在使用多个类加载器？

> ID：11641631
> 
> 赞同：1
> 
> 时间：2012-07-25T01:54:41.700
> 
> 标签：java, jvm, classloader, embedded-resource, contextclassloader

我认为我的问题是不言自明的。确定我使用的 JVM 正在使用多个类加载器的最快和最准确的方法是什么？如果是这样，必须采取什么措施来确保程序正确运行？

编辑：我想我需要澄清一下两个类加载器，它们可以加载同一个类吗？如果像单例这样只需要一个实例的类，我们如何防止它发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T02:00:43.477

> 必须注意哪些事项才能确保程序正确运行？

对于课程，我不知道。对于其他应用程序资源（图像、帮助文件等），请使用上下文类加载器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T07:22:42.403

每个 JVM 都使用多个类加载器。

> java -XX:+TraceClassLoading -version 2>&1 | 剪切-d''-f2 | grep 类加载器

印刷

```
java.lang.ClassLoader
sun.reflect.DelegatingClassLoader
java.lang.ClassLoader$3
java.lang.ClassLoader$NativeLibrary
java.security.SecureClassLoader
java.net.URLClassLoader
sun.misc.Launcher$ExtClassLoader
java.lang.ClassLoader$ParallelLoaders
java.net.URLClassLoader$7
sun.misc.Launcher$ExtClassLoader$1
sun.misc.Launcher$AppClassLoader
sun.misc.Launcher$AppClassLoader$1
java.lang.SystemClassLoaderAction 
```

其中一些是内部类，一些是相互扩展的，但这里有不止一个 ClassLoader，我所做的只是询问 JVM 的版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T05:48:09.580

我正在努力解决这个问题。

每个 JVM 一直在运行多个类加载器：至少是系统类加载器、扩展类加载器和应用程序类加载器。OSGi等。可以添加很多很多。

我很难在这里看到任何问题 - 类加载器的全部意义在于隔离命名空间。

# ruby - 使用除非运算符

> ID：11641632
> 
> 赞同：0
> 
> 时间：2012-07-25T01:54:54.510
> 
> 标签：ruby

我正在学习“Ruby Way”并玩得很开心，但是，我有这个按预期工作的块，尽管我知道它可能会更好。有人可以告诉我正确的使用方法`unless`吗？这是在用户控制器中。

```
def destroy
  User.find(params[:id]).destroy unless current_user.admin? 
  flash[:success] = "User destroyed."
  redirect_to users_path      
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T02:13:09.593

无论用户是否被销毁，您都将设置 flash 消息。

在您的情况下，您应该使用 if。

```
def destroy
  if current_user.admin?
      User.find(params[:id]).destroy
      flash[:success] = "User destroyed."
  else
      flash[:success] = "You can't destroy user."    
  end
  redirect_to users_path
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T02:10:59.490

你写代码的方式其实是最简洁的；尽管您可能想让整个事物成为一个块。这样，当您调用销毁时，“用户已销毁”。当帐户未被实际删除时，不会打印并且不会调用 redirect_to users_path。

```
def destroy
  unless current_user.admin?
      User.find(params[:id]).destroy
      flash[:success] = "User destroyed."
      redirect_to users_path
  end

end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T02:59:37.367

在所有有用的建议之后，这就像我想的一样紧凑

```
def destroy
      User.find(params[:id]).destroy 
      flash[:success] = "User destroyed."
      redirect_to users_path

      unless current_user.admin? 

  end
end 
```

# php - 用php完成多语言网站

> ID：11641634
> 
> 赞同：2
> 
> 时间：2012-07-25T01:54:57.900
> 
> 标签：php, mysql, configuration, internationalization

我需要一个关于如何制作一个完整的多语言网站的想法。我遇到了很多方法，有些人使用 xml 文件来翻译模板位。如果我只想要主模板，这很有效。但即使是内容也会被翻译。

例如，我有一个新的英文条目，它应该被翻译成其他 4 种语言。大多数属性是通用的。

到目前为止，我通过为具有以下属性的主要网站模板创建一个表：lang、tag、value 在我的模板中，它将对 lang 和 tag 进行匹配。

翻译网站其余部分的最佳方法是什么（使用 mysql 的动态 php 页面）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T02:16:57.190

您需要如下语言表：

```
CREATE TABLE `language` (
 `langid` tinyint(3) unsigned NOT NULL AUTO_INCREMENT,
 `language` varchar(35) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
 PRIMARY KEY (`langid`)
) ENGINE=InnoDB 
```

然后，例如，您有一个帖子表格，如下所示：

```
CREATE TABLE `post` (
 `postid` int unsigned NOT NULL AUTO_INCREMENT,
 `langid` tinyint(3) unsigned NOT NULL AUTO_INCREMENT,
 `content` TEXT CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
 `title` varchar(35) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
 PRIMARY KEY (`postid`)
) ENGINE=InnoDB 
```

在 post 表中，您需要一个 key like `langid`，它指的是语言表中的特定语言。在您的仪表板中，您将拥有以下内容：
![在此处输入图像描述](../Images/e7d4b1e28677599ed96c94be72c11b97.png) 每个文本框都引用该特定语言。
您应该有另一个用于站点菜单的表，并将 langid 外键放在那里。你应该一切顺利。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T02:28:25.997

查看 gettext 扩展 - [http://php.net/manual/en/book.gettext.php](http://php.net/manual/en/book.gettext.php)

然后使用[POEdit](http://www.poedit.net/)或[simplepo](http://code.google.com/p/simplepo/)之类的程序对语言文件进行实际编辑

IMO，这是我为多语言网站找到的最佳方式

您还可以查看[Zend_Translate](http://framework.zend.com/manual/en/zend.translate.html)模块

# javascript - 检测 Html 元素是否与另一个 Html 元素重叠

> ID：11641638
> 
> 赞同：6
> 
> 时间：2012-07-25T01:55:13.447
> 
> 标签：javascript, jquery, html

在 jQuery 或 Javascript 中，我如何检测一个 img 标签是否与另一个 img 标签重叠？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T01:59:14.950

您可以通过找到元素的[偏移量](http://api.jquery.com/offset/)，然后找到每个元素的[宽度](http://api.jquery.com/width/)和[高度](http://api.jquery.com/height/)来做到这一点。然后只需简单的数学即可确定它们是否重叠。

我不会为你做所有的工作，但这应该会让你走上正轨：

```
<div id="one"></div>
<div id="two"></div>

<script>
var offsetOne = $('#one').offset();
var offsetTwo = $('#two').offset();
var widthOne = $('#one').width();
var widthTwo = $('#two').width();
var heightOne = $('#one').height();
var heightTwo = $('#two').height();
</script> 
```

剩下的就是使用两个偏移量的 .top 和 .left 以及宽度和高度来确定是否存在重叠。查看我的答案第一段中每个函数的文档链接。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-25T03:45:44.803

我刚刚写了一个js文件供你使用=）希望它可以帮助你......我花了一段时间才完成它

你可以从这个链接下载它：[solid-dotheyoverlap.js](http://www.mediafire.com/?iykiz6l4z04is2r)

只需包含该 js 文件并使用您想知道它们是否重叠的两个 div 调用 doTheyOverlap 函数，就是这样！

这是我为您制作的一个基本而简单的示例：

```
<html>
<head>
<title>Test</title>
<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="solid-dotheyoverlap.js"></script>
<script type="text/javascript">
    $(function() {  
        alert(doTheyOverlap($('#div0'),$('#div1')));    
    });
</script>
</head>
<body>
    <div id="div0" style="position: absolute; width : 200px; height : 200px; background-color : red">div 0</div>
    <div id="div1" style="position: absolute; width : 200px; height : 200px; background-color : yellow; top:100px; left:100px">div 1</div>
</body>
</html> 
```

并且我编写的solid-doTheyOverlap.js 的代码比@artwl 提出的解决方案更清晰、更高效。它是这样的：

```
function doTheyOverlap(div0, div1){return (yInstersection(div0, div1) && xInstersection(div0, div1));}

function findSmallestY(div0, div1){
    return (div0.offset().top < div1.offset().top)? div0 : div1;
}
function yInstersection(div0, div1){
    var divY0 = findSmallestY(div0, div1);
    var divY1 = (div0 != divY0)? div0 : div1;

    return (divY0.offset().top + divY0.height()) - divY1.offset().top > 0;
}

function findSmallestX(div0, div1){
    return (div0.offset().left < div1.offset().left)? div0 : div1;
}

function xInstersection(div0, div1){
    var divX0 = findSmallestX(div0, div1);
    var divX1 = (div0 != divX0)? div0 : div1;

    return (divX0.offset().left + divX0.width()) - divX1.offset().left > 0;
} 
```

用简单的话来说，我意识到“弄清楚两个正方形是否重叠就像弄清楚它们的线段（根据 x 轴和 y 轴）是否重叠一样简单”，在 javascript 中它会像这样“ `doTheyOverlap(div0, div1){return (yInstersection(div0, div1) && xInstersection(div0, div1));}`”，来自它就像一对减法（`(divY0.offset().top + divY0.height()) - divY1.offset().top > 0`，`(divX0.offset().left + divX0.width()) - divX1.offset().left > 0`）一样简单，以找出这些段是否重叠。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-10-29T16:36:53.803

另一种使用 getBoundingClientRect() 的普通方法。我分享这个是因为我不喜欢这里的答案，这是我的解决方案。

```
function checkForOverlap(el1, el2) {

    var bounds1 = el1.getBoundingClientRect();
    var bounds2 = el2.getBoundingClientRect();

    var firstIstLeftmost = (bounds1.left <= bounds2.left);
    var leftest = firstIstLeftmost ? bounds1 : bounds2;
    var rightest = firstIstLeftmost ? bounds2 : bounds1;

    //change to >= if border overlap should count
    if(leftest.right > rightest.left) {
            //
        var firstIsTopmost = (bounds1.top <= bounds2.top);
        var topest = firstIsTopmost ? bounds1 : bounds2;
        var bottomest = firstIsTopmost ? bounds2 : bounds1;

        //change to >= if border overlap should count
        return topest.bottom > bottomest.top;
    }
    else return false;

} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-25T02:50:20.963

## [演示](http://jsfiddle.net/wsnNR/)

```
<style type="text/css">
    div{
        width:200px;
        height:200px;
        background:#EEE;
    }
    #two{
        position:absolute;
        left:100px;
        top:50px;
        background:#F60;
    }
</style>
<div id="one">One</div>
<div id="two">Two</div>
<div id="three">Three</div>
<script>
    console.log(isOverlap("one","two"));//true
    console.log(isOverlap("one","three"));//false
    console.log(isOverlap("two","three"));//true
    function isOverlap(idOne,idTwo){
        var objOne=$("#"+idOne),
            objTwo=$("#"+idTwo),
            offsetOne = objOne.offset(),
            offsetTwo = objTwo.offset(),
            topOne=offsetOne.top,
            topTwo=offsetTwo.top,
            leftOne=offsetOne.left,
            leftTwo=offsetTwo.left,
            widthOne = objOne.width(),
            widthTwo = objTwo.width(),
            heightOne = objOne.height(),
            heightTwo = objTwo.height();
        var leftTop = leftTwo > leftOne && leftTwo < leftOne+widthOne 
                && topTwo > topOne && topTwo < topOne+heightOne,
            rightTop = leftTwo+widthTwo > leftOne && leftTwo+widthTwo < leftOne+widthOne 
                && topTwo > topOne && topTwo < topOne+heightOne,
            leftBottom = leftTwo > leftOne && leftTwo < leftOne+widthOne 
                && topTwo+heightTwo > topOne && topTwo+heightTwo < topOne+heightOne,
            rightBottom = leftTwo+widthTwo > leftOne && leftTwo+widthTwo < leftOne+widthOne 
                && topTwo+heightTwo > topOne && topTwo+heightTwo < topOne+heightOne;
        return leftTop || rightTop || leftBottom || rightBottom;
    }
</script> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-08-25T07:27:27.247

@solid snake，我将您的代码重写为更简洁的形式：

```
function doTheyOverlap(el0, el1)
{
    var elY0 = (el0.offsetTop < el1.offsetTop)? el0 : el1;
    var elY1 = (el0 != elY0)? el0 : el1;
    var yInstersection = (elY0.offsetTop + elY0.clientHeight) - elY1.offsetTop > 0;

    var elX0 = (el0.offsetLeft < el1.offsetLeft)? el0 : el1;
    var elX1 = (el0 != elX0)? el0 : el1;
    var xInstersection = (elX0.offsetLeft + elX0.clientWidth) - elX1.offsetLeft > 0;

    return (yInstersection && xInstersection);
} 
```

尽管从 2012 年开始，这个答案仍然有意义

编辑：更新的代码

# matlab - 在 Matlab 中创建和初始化 3D 结构表的简单方法

> ID：11641639
> 
> 赞同：1
> 
> 时间：2012-07-25T01:55:28.330
> 
> 标签：matlab, struct

我希望能够轻松地在 matlab 中初始化一个大表。

假设我有边界 x、y、z = 5、4、3。我希望能够制作一个 5x4x3 表，其中每个元素都是一个存储计数和总和的结构。初始化时，此结构中的计数和总和应为 0。

我认为这样做就足够了：

```
table = []
table(5,4,3) = struct('sum', 0, 'count', 0) 
```

这适用于双倍，但显然不适用于结构。

有任何想法吗？

编辑：

作为另一个问题，（如果你愿意的话）有没有办法强制matlab存储结构，但是当你访问元素（即table（1、2、3））时，让它返回平均值（即table (1,2,3).sum/table(1,2,3).count)。

它对这个问题并不重要，但它肯定会很酷。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T06:29:52.490

您只需要替换该行`table = []`即可避免错误，即

```
clear table;
table(5,4,3) = struct('sum', 0, 'count', 0) 
```

工作正常。但是请注意，此命令仅初始化数组的一个字段，即内存分配不完整。要初始化数组的所有字段，您可以使用

```
table2(1:5,1:4,1:3) = struct('sum', 0, 'count', 0) 
```

要可视化差异，请使用`whos`，它会返回

```
>> whos
  Name        Size             Bytes  Class     Attributes  
  table       5x4x3              736  struct              
  table2      5x4x3             8288  struct 
```

例如，您的第二个问题可以通过使用匿名函数来解决

```
 myMean = @(a) a.sum./a.count; %define the function

 myMean(table2(2,2,2)) % access the mean in the field (2,2,2) 
```

# django - 如何在extra = 0的（模型）表单集中设置新表单的初始值

> ID：11641641
> 
> 赞同：1
> 
> 时间：2012-07-25T01:55:33.823
> 
> 标签：django, django-forms

[**编辑**]

由于我已经删除了 new_method = ... 和 syspar.method.add() 行（这是由 method.save() 处理的），我最初丢弃的解决方案已经变成了 DRY，所以它是完全可以接受的。

我仍然认为设置 self.fields[].initial （根据 pyriku 的回答）仅在 extra > 0 时才有效，因为在“添加表单”按钮之前不希望显示表单的简单用例是单击后，必须有 extra=0 并且应该可以为新添加的表单设置初始值。

[ **/编辑**]

免责声明：我查看了许多相关问题的答案，但我只找到了一种可行的解决方案，但对我来说似乎很笨拙，而且不是很干燥（[4378667](https://stackoverflow.com/questions/4378667)）/免责声明

我有一个modelformset，我将extra设置为0，因为我只想在用户按下“add_method”时显示一个新表单。一切正常，除了新添加的表单是空的（*期望的行为*：它们包含我在方法表中设置的名称的默认值）

在模型.py 中：

```
class System(models.Model):
    method = models.ManyToManyField(Method)
    ...

class Method(models.Model):
    name = models.CharField()
    ... 
```

在 view.py 中：

```
syspar = System.objects.get(id=sys_id)
MethodFormSet = modelformset_factory(Method, form=MethodForm, extra=0)
if request.POST:
    if 'add_method' in request.POST:
        new_method = Method.objects.create(name='whatever')
        syspar.method.add(new_method)

        post = request.POST.copy()
        post['method-TOTAL_FORMS'] = repr(int(post['method-TOTAL_FORMS'])+ 1)

        post['method-2-name'] = 'whatever' # code needed here to get actual value of -2-

        methodformset = MethodFormSet(data=post, prefix='method',
                queryset=Method.objects.filter(id__in=syspar.method.all())) 
```

我的行有问题： post['method-2-name']='' 这很糟糕，因为：

*   我已经在 db 表中设置了值
*   我需要额外的 cruft 来确定每个案例的“2”值

我尝试[了这种方法](https://stackoverflow.com/a/8223856/1406825)，也尝试了设置初始值（如对其他一些相关问题的回答中所建议的那样），但都没有奏效，而且都导致了非 DRY 代码。

必须有更好的方法来做到这一点......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:57:02.403

可能您需要覆盖该`__init__()`表单的方法来设置所需的初始值。就像是：

```
def __init__(self, *args, **kwargs):
    super(MethodForm, self).__init__(*args, **kwargs)
    self.initial['field'] = 'value' 
```

# php - PHP拆分和mongodb

> ID：11641648
> 
> 赞同：0
> 
> 时间：2012-07-25T01:57:24.030
> 
> 标签：php, mongodb, foreach

好的，这听起来可能很奇怪，但我有一个表格，我们的业务想要跟踪发生了什么变化，当用户添加新的潜在客户等时。

所以我设置了一个执行以下操作的函数

```
function savedata($data){
    $collection = $this->db->retail_logs;
    $this->data = explode('|', $data['data']);
    print_r($this->data);

    try {
    $collection->update(
        array($this->data['0']=>$this->data['1'],$this->data[2]=>$this->data[3]),
        array("date"=> date("d.m.Y"), "time"=>date("H:i:s"),"whochanged"=>$_COOKIE['CRMUIDkey']), // new lead document to insert
        array("upsert" => true, "safe" => true)
        );
    } catch (Exception $e) {
        // Something went wrong .. 
    }
} 
```

它基本上是一个日志文件。

但是您可能会看到 $data 发送数据，例如 tradingname|ABC|owner|ownerID

但是如果我想补充一点，我需要运行一个循环或一个 foreach 我想知道什么是确保所有数据都被保存而不仅仅是 data[0] 到 3 的最佳方法，所以说他们发送 16 个字段和其中的值我需要一个 foreach 或其他东西来拆分它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T02:09:07.720

以 json 格式发送您的数据。然后使用[json_decode](http://php.net/manual/en/function.json-decode.php)将其转换为您想要的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T22:44:32.680

看来您想将 映射`$data['data']`到 key=>value 对（关联数组）。您需要非常小心您允许使用这种格式的哪些字段，特别是因为它看起来像用户提供的数据（或者他们可以在发布请求中修改的数据？）。例如，如果您在执行 upsert 之前没有检查允许的密钥，恶意用户可能会更新或添加到另一个用户的帐户。

要转换`$data`您想要执行的字符串，例如：

```
<?php
    // Keys that can be updated
    $allowed = array('tradingname','owner');

    // Sample data    
    $data = 'tradingname|ABC|owner|ownerID|badkey|foo';

    // Split into arrays based on '|' delimiter
    preg_match_all("/([^\|]+)\|([^\|]+)/", $data, $keypairs);

    // Combine matches into key => value array
    $keypairs = array_combine($keypairs[1], $keypairs[2]);

    // Sanity check to create $criteria    
    foreach ($keypairs as $key => $value) {
        if (in_array($key, $allowed)) {
            // Perhaps do some extra sanity checking that $value is expected format
            $criteria[$key] = $value;
        } else {
            // Log and/or bailout as appropriate
            echo "Ignoring: [$key] => [$value]\n";
        }
    }

    // Criteria should now be reasonable to use in $collection->update(..) upsert
    print_r($criteria);
?> 
```

# java - 如何在 Java 中正确创建和实现 ThreadPool 类型的类

> ID：11641652
> 
> 赞同：0
> 
> 时间：2012-07-25T01:58:43.353
> 
> 标签：java, multithreading, threadpool

我想在 Java 中创建自己的 ThreadPool 类型类（我过去尝试过并不断收到并发异常 - 我忘记了具体错误），我又回到了它。

这将用于动态创建不同的线程以同时运行不同的进程，然后当任务在传递给它的线程中完成时，它将被回收并重用于另一个目的。这是我自己编写的 Java 2d 游戏引擎。

这将用于碰撞、音频、动画管理、计时、控制等。这些只是选项，因为我需要一个 ThreadPool 类。

问题：上次我尝试这个时，我创建了一个 ThreadPool 类，它包含一个“AudioThread”（或类似的）类型的数组，它是一个覆盖“run”方法的内部类。创建 ThreadPool 类时，我会传递一些要创建的线程，并将其存储在数组中以供以后操作。

然后我会尝试创建诸如“assignTask(ThreadTask task)”、“freeThread()”、getFreeThread() 之类的方法。等等。但是通过对线程进行更改，我得到了某种并发错误。

底线，有没有人有经验制作一个 ThreadPool 类型的类，可以为我能做什么和不能做什么提供经验？解决此问题的建议？建议？想法？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T02:03:12.607

您可能想使用[ThreadPoolExecutor](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ThreadPoolExecutor.html)。听起来它完全符合您的要求。

# python - 除非在特定目录中启动，否则 python 不会加载模块

> ID：11641655
> 
> 赞同：1
> 
> 时间：2012-07-25T01:59:01.357
> 
> 标签：python, opencv, ld, pythonpath

我刚刚从源代码中提取了最新版本的 opencv，不幸的是，目前我必须在一台机器上安装 2 个不同的版本。

所以我有 `/usr/local/...`旧版本的默认位置，以及新版本的自定义位置。

我的问题是，如果我打开一个 python 终端并尝试`import cv2`，如果我从新版本的目录开始，我只能加载`opencv/lib`新版本。

我希望能够切换我使用的 opencv 版本，理想情况下它将在 python 脚本本身中。

我希望能够在终端中设置一个`LD_LIBRARY_PATH`或`PYTHONPATH`两个，或者使用 更改环境变量`os.environ`，但没有成功。

首先，我不明白为什么我必须在`lib`目录中才能加载新版本，其次我不明白为什么我不能动态更改 python 使用环境变量导入模块的位置。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T02:12:46.217

您可以使用该`imp`模块从指定路径导入。

```
import imp
fp, pathname, description = imp.find_module('cv2', ['/path/to/opencv/'])
cv2 = imp.load_module('cv2', fp, pathname, description) 
```

[http://docs.python.org/library/imp.html](http://docs.python.org/library/imp.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T02:07:12.707

使用 sys 模块。Python 解释器启动后，你可以通过 sys.path 修改模块路径，实际上只是一个列表。

```
import sys
sys.path.append("/path/to/cv2") 
```

# android - 仅当在字段中输入文本时，如何使按钮执行代码？

> ID：11641656
> 
> 赞同：-4
> 
> 时间：2012-07-25T01:59:01.890
> 
> 标签：android

我正在为 Android 制作一个应用程序，如果您单击其中一个页面上的计算按钮，而在文本框中没有输入任何内容，它将强制关闭。一些用户想知道这是否可以修复，所以我想知道是否有一种方法可以`onClickListener`仅在`EditText`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T02:22:38.730

您必须自己检查，例如：

```
final EditText editText = ...; // your edit 

// check in your onClickListener
if (editText.getText().toString().isEmpty){ // Check if your EditText is 

}else{ // If your EditTexit is not null

} 
```

请在问任何问题之前先搜索谷歌！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T02:23:10.130

您可以尝试以下代码，

假设您有一个 EditText txtNum1 & txtNum2 ，所以 onClickListener() 方法您可以编写以下条件

```
public void onClick(View v)
{
     if ( v == cmdCalculate )
     {
           if (  !txtNum1.getText().equals("") && !txtNum2.getText().equals("") )
           {
              // your calculation code
           }
           else
           {
             // post error msg code
           }
     }
} 
```

# java - 向另一个 servlet 提交输入 type="image" 未能返回任何参数

> ID：11641657
> 
> 赞同：0
> 
> 时间：2012-07-25T01:59:12.047
> 
> 标签：java, javascript, html, servlets

小服务程序1：

我正在尝试将参数传递给另一个 servlet2：

..

```
out.print("<input type='text' name='someText' src='someSrc' onclick='submit()'/>"); 
```

..

单击它-正在加载 servlet2。

小服务程序2：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();                
        Enumeration params = request.getParameterNames();
        while (params.hasMoreElements())
        {
            out.print("parameter: " + (String)params.nextElement() + "</br>");
        }
} 
```

我的输出——> someText 到目前为止这么好！

但是当我的输入类型是图像时，我的输出是空的：

```
out.print("<input type='image' name='someText' src='someSrc' onclick='submit()'/>"); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:29:40.900

根据 HTML 规范，`input type="image"`将用作图像映射。当最终用户单击图像地图时，Web 浏览器会将鼠标指针的 x 和 y 位置发送到服务器。

```
out.print("<input type=\'image\' name=\'imgButton\' src=\'flowsheet/images/submit_button.gif\'/>"); 
```

提交的值将作为`imgButton.x`和`imgButton.y`

但是，如果您只想在页面中使用样式按钮来提交数据。使用`input type="submit"`可以为按钮指定 CSS 背景图像的位置。

# java - 封装别名字段的 JPQL 函数

> ID：11641660
> 
> 赞同：1
> 
> 时间：2012-07-25T01:59:23.757
> 
> 标签：java, hibernate, jpa, eclipselink, jpql

我在 Hibernate JPA 中对以下内容没有任何问题

```
SELECT e
FROM Employee e
INNER JOIN FETCH e.address AS a
WHERE a.state = :state
 AND e.middle = :middle
 AND trunc(a.birthdate) > :mindate 
```

但是，eclipselink 会发出语法错误

```
trunc(a.birthdate) > :mindate 
```

如何在 eclipselink 中使用 SQL 函数封装别名引用字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T02:29:10.520

问题不在于别名引用，而在于`trunc()`函数 - trunc 是 SQL 而不是 JPQL。

这个问题的答案可能会对您有所帮助： [SQL for NamedQuery in EclipseLink](https://stackoverflow.com/questions/8430555/sql-for-namedquery-in-eclipselink)

# android - Android 支持库如何工作？

> ID：11641669
> 
> 赞同：38
> 
> 时间：2012-07-25T02:00:54.830
> 
> 标签：android, android-support-library

据我所知，支持库正在使用，因为旧设备没有新的 API。例如，他们不知道 Fragment 是什么以及如何实现它。因此，这些行为是在支持库中定义的。

所以，我的主要问题是，支持库中的 Fragment 库与其在 API 11（Android v3.0，Honeycomb）中引入的孪生之间有什么区别。

我的第二个问题是，如果可以将每个新 API 放入支持库中，为什么我们有两种类型的库？我的意思是Android可以在支持库而不是支持库和Android版本X.xx库下发布所有API。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-15T15:48:49.577

据我了解，支持库可以作为内置 API 的替代品，但它们不应该是，因为它们直接影响应用程序的大小。

例如，一个支持库是 2MB，并且要使用它的功能，它需要所有类、资源等（2MB），所以现在`classes.dex`（应用程序中使用的所有类的 Dalvik 可执行文件）也包括该支持库类，资源也一样。所以，如果没有支持库我的应用程序大小是 1MB，那么现在有了支持库，大小是额外的 2MB，这意味着总共 3MB。

现在，假设这个支持库功能非常普遍，以至于在单个设备上，如果我有 10 个应用程序，那么至少有 9 个正在使用同一个支持库，所以我的设备上的 9*2 = 18MB 被同一个支持库使用，这在每个应用程序中都会重复，这很糟糕，因为现在 18MB 可能不会那么多，但是如果您有更多应用程序使用该支持库，则所需的空间可能会增加。

因此，最好的选择是在您的操作系统中为任意数量的应用程序提供 2MB 支持库，而不是为每个应用程序提供它。因此，当您确实希望应用程序中的一些高效功能支持旧版本时，应该使用支持库。

这里又出现了一个问题：

> 为什么不将此支持库作为自己的更新添加到操作系统中，以便每个没有大小问题的应用程序都可以访问该功能？

答案是可能有很多错误。假设某些用户没有安装该更新（支持库）......

也有可能作为更新，它可能无法像预期的那样高效，或者在与操作系统集成时可能会导致问题，因为我们已经看到每个操作系统（windows、Linux、mac）都带有新版本，而不仅仅是为所有新功能提供终身更新。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-17T15:28:45.550

与 Android 2.3.x (Gingerbread) 相比，Android 4.0.x (ICS) 有很多附加功能。兼容性库用于桥接一些添加到 ICS 的更改，这些更改可能会被 Gingerbread 支持。“可能”是这里的关键短语，因为对 ICS 进行了大量更改，这些更改永远不会与 Gingerbread 一起使用，当然，这些更改不会获得兼容性库。

例如，您提出的片段实际上在 ICS 中与在兼容性库中略有不同，因为 ICS 具有更多可以使用的功能。如果您查看 Fragments 类的 ICS 代码，它们与兼容性库中的代码不同。它是第二组代码，用于使“类似于”ICS 中的片段在像姜饼这样的旧版本中使用，而程序员不会注意到太大的区别。

这就是兼容性库的重点，也是它们不被广泛用于修补 Gingerbread 以使用 ICS 中的所有功能的原因（它们就是不能）。兼容性库的重点是将新版本的android（例如ICS）中可用的东西接口，将ICS方式完成到GB等旧版本中，完成GB方式。

至于为什么他们不只是保持支持库增长并保留相同的基本操作系统 - 答案是兼容性问题。如果用户只有 v4 并且 v12 已出，会发生什么？Android 现在使用操作系统的 Android API 版本作为应用程序兼容性的基础，开发人员可以选择*包含***支持**库（增加应用程序的文件大小，但提供更新的功能）。每个使用支持库的应用程序都独立地包含它们（意味着 4 个应用程序 = 包含 4 倍）。

这个想法是，您只能下载操作系统当前 API 版本支持的应用程序（就 Google Play 而言），并且您可以选择包含支持库以保持您的应用程序的外观和感觉支持旧 API，即还没有您选择在较新的 API 上为这些用户提供的功能。这真的是一个外观和感觉比什么都重要的考虑。

希望这能说明问题 ：）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-14T21:26:32.810

已经说过的话是真的。虽然缺少一些细节。事实上，我有机会参加了上次 Google IO 的一个会议，他们专门讨论了这个问题。让我惊讶的是，支持库并未托管所有可能的 API 版本的代码，而是对他们认为足够相关以使其可用于旧平台的新功能的改编。所以它的工作方式一般如下：

*   假设我们需要使用全新的（可从 API 16 获得）ConnectivityManager 来跟踪网络变化
*   我们包括支持库 v4 并且我们使用该类
*   它之后的工作方式是系统将检查我们的 API 版本，并在我们使用 API 16 的情况下运行内置的本机代码，或者在任何其他情况下运行支持库的代码。

所以它就像某种路由网关。原因是使用为最后一个操作系统优化的最后一个代码和最后一个系统改进（即：硬件加速）通常更有效（和执行）。

尽管如此，还是有一些元素没有被翻译到 compat 库，因为它们在本机内置代码中。例如，片段并不打算像 API13 那样重写，因为它们是一个巨大的组件，需要在系统和功能较少的设备中的各种不同场景中运行。

最终，因为所有这些，建议使用被称为良好实践的 compats 库，特别是如果您打算使您的应用程序/代码可用于旧版本（这应该是理想的方式）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-25T14:07:58.423

支持库实际上并不包含较新 API 中的所有内容。它确实支持部分 Fragment API，但还不支持 ActionBar。为此，您需要另一个库，例如 ActionBar Sherlock。

> 为什么有两个库？

因为部分问题是谷歌只向后移植了一些东西，但我的理解是，此外，由于核心操作系统框架的限制和缺少 Android 核心深处的 API，一些新功能无法向后移植用户界面框架。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-14T20:59:09.917

Android 在最近的版本中提出了片段和操作栏的很酷的功能。

现在如果我们想使用这些功能并且还支持旧版本的android，那么我们将不得不编写非常混乱的版本依赖代码，这并不好。

为了让我们摆脱所有这些混乱，android 提出了支持库，它不提供对新功能的完全支持，但足以让开发人员编写所有设备都支持的简洁代码。

对第二个问题的回答非常简单，片段是 v3.0 的集成部分，如果您希望应用程序仅在 v3.0+ 上运行，那么您实际上不必包含外部库。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-08-14T14:04:59.600

支持库中的片段相当于 Honeycomb+ 的片段。

对于第二个任务，来自文档：

> v13 是 v4 的超集，包括额外的支持类**以使用 v13 API**

即相同的功能，只是适应v13 API。

我正在使用修改后的 v4 支持库 - 带有地图。

# java - android中的类似功能SwingUtilities.invokeLater？

> ID：11641670
> 
> 赞同：15
> 
> 时间：2012-07-25T02:01:05.257
> 
> 标签：java, android, swing

有时我觉得使用 AsyncTask 对任务来说太过分了，我正在寻找类似的功能，如 Android 中的 SwingUtilities.invokeLater。因为我只想执行一行代码，没有必要为此创建一个新类。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-25T02:52:26.033

也许您正在寻找：

```
Activity.runOnUiThread(Runnable action) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-14T22:54:40.820

```
Activity.runOnUiThread(Runnable action); 
```

上述方法与 java 的 invokeLater 略有不同，因为它会检查您是否已经在 ui 线程上，然后它将立即运行您的 Runnable。

还有另一种方法可以确保您的 Runnable 稍后调用，而不是立即调用，即使您在 UI 线程上也是如此。为此，您在主线程上编写以下代码..如果您在后端线程上调用它，您的可运行将在后端线程上执行..

```
Handler h = new Handler();
h.post(new Runnable() {
    @Override
    public void run() {
        //your code..
    }
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T02:27:52.257

我不记得确切是做什么`invokeLater()`的，但是如果您想延迟执行某些操作，可以使用[postDealayed()](http://developer.android.com/reference/android/os/Handler.html#postDelayed%28java.lang.Runnable,%20long%29)。这在 UI 线程上进行，因此自然不适合长时间运行的任务。

# sql - 标记系统的数据库设计

> ID：11641676
> 
> 赞同：2
> 
> 时间：2012-07-25T02:01:59.903
> 
> 标签：sql, sql-server, database-design

我有一个数据库，它为医疗实践捕获与患者有关的信息。此信息分布在多个表中：

1.  患者 - 联系信息
2.  PatientMedicalHistory - 与当前问题无关的医疗状况
3.  PatientEpisode - 本次就诊的财务信息
4.  PatientEpisodeReason - 与患者今天在这里的原因有关的内容

我想引入一个标志系统，以便在调出患者详细信息时会出现任何消​​息。因此，例如，如果患者之前曾发生过心脏病发作，则需要对其进行标记（该信息将在 PatientMedicalHistory 中）。

我目前的方法是设置一个标志查找表，该表定义标志类型，标志所指的表/列以及为了提高该标志的值是什么：

```
CREATE TABLE FlagType
(
    ID INT PRIMARY KEY IDENTITY,
    TypeName NVARCHAR(300) NOT NULL,
    Colour NVARCHAR(100) NOT NULL,
    Urgency INT NOT NULL
)

CREATE TABLE Flag
(
    ID INT PRIMARY KEY IDENTITY,
    FlagTypeID INT NOT NULL REFERENCES FlagType(ID),
    TableName NVARCHAR(300) NOT NULL,
    FieldName NVARCHAR(300) NOT NULL,
    FlagValue NVARCHAR(300) NOT NULL
) 
```

这看起来一切都很好，但是尝试编写 a) 一个不像一团糟的存储过程或 b) 一个不会影响性能的 LINQ 查询似乎很困难。

有没有其他选择？问题是可以在上述任何表中的任何列上定义标志。这总共大约有 80 列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:07:18.800

您可以在 PatientMedicalHistory 表中添加三个字段：器官、疾病、危急程度。

当患者出现问题时，您可以根据当前事件中出现的相同器官或疾病提取患者病史，其中危急程度达到特定阈值。您在这里所做的是对您的患者历史数据进行分类，使其与当前的发作数据相关。

# perl - 我如何要求带有接口的 Moose 属性？

> ID：11641677
> 
> 赞同：2
> 
> 时间：2012-07-25T02:02:00.077
> 
> 标签：perl, interface, moose, role

你可以做

```
use Moose::Role;
requires 'method'; 
```

我在[Moose::Spec::Role](https://metacpan.org/module/Moose%3a%3aSpec%3a%3aRole)中看到我也可以要求属性，但我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T02:08:07.020

完全相同的语法。Moose 属性提供了一个访问器方法。从实际的[CPAN 文档](http://search.cpan.org/~doy/Moose-2.0603/lib/Moose/Role.pm#EXPORTED_FUNCTIONS)：

“需要（@method_names）角色可以要求某些方法由任何扮演该角色的类实现。

请注意，属性访问器也算作满足角色要求的方法。”

# actionscript-3 - 我可以只使用 e4x 还是也需要正则表达式？

> ID：11641678
> 
> 赞同：0
> 
> 时间：2012-07-25T02:02:03.337
> 
> 标签：actionscript-3, apache-flex, actionscript, e4x

我有一些 XML 需要被处理成一个字符串来呈现一些指令。文字看起来像这样

```
<?xml version="1.0" encoding="UTF-8"?>
<instructions id="detection" version="1.0">
<instruction task="detection">
    <phrase type="header">HAS THE CARD TURNED OVER?<nl/><nl/><nl/></phrase>
    <phrase type="practice">you are now going to do a practice.<nl/><nl/></phrase>
    <phrase type="real">You are now going to do a test.<nl/><nl/></phrase>
    <phrase>As soon as the card turns face up:<nl/><nl/></phrase>
    <phrase><ts/><ts/>Press YES.<nl/><nl/></phrase>
    <phrase>Go as fast as you can and try not to make any mistakes.<nl/><nl/></phrase>
    <phrase>If you press YES before a card turns face up, you will hear an error sound.</phrase>
</instruction>
</instructions> 
```

现在，我需要做的就是以下

1.  全部替换`<nl/>`为\n
2.  全部替换`<ts/>`为 \t
3.  有条件地选择实践或真实，可能通过删除其他
4.  删除所有剩余的 XML 位以生成字符串。

所以可以说我想要这个的练习版，我应该最终得到

```
HAS THE CARD TURNED OVER?\n\n\n
you are now going to do a practice.\n\n
As soon as the card turns face up:\n\n
\t\tPress YES.\n\n
Go as fast as you can and try not to make any mistakes.\n\n
If you press YES before a card turns face up, you will hear an error sound. 
```

现在，如果当前表单不适合此，我有机会更改 XML 的结构，但我不确定是否可以使用 e4X 完成上述所有操作，或者我还需要使用正则表达式？一些例子会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T22:10:28.453

它可以用 E4X 完成，可能不如正则表达式那么优雅。下面是`<nl>`使用 E4x 替换为 "\n" 的示例：

```
package
{
    import flash.display.Sprite;

    public class e4xStuff extends Sprite
    {
        private var srcxml:XML;

        public function e4xStuff()
        {
            srcxml = new XML(   '<instructions id="detection" version="1.0">' +
                '<instruction task="detection">' +
                '<phrase type="header">HAS THE CARD TURNED OVER?<nl/><nl/><nl/></phrase>' +
                '<phrase type="practice">you are now going to do a practice.<nl/><nl/></phrase>' +
                '<phrase type="real">You are now going to do a test.<nl/><nl/></phrase>' +
                '<phrase>As soon as the card turns face up:<nl/><nl/></phrase>' +
                '<phrase><ts/><ts/>Press YES.<nl/><nl/></phrase>' +
                '<phrase>Go as fast as you can and try not to make any mistakes.<nl/><nl/></phrase>' +
                '<phrase>If you press YES before a card turns face up, you will hear an error sound.</phrase>' +
                '</instruction>' +
                '</instructions>');

            processNode(srcxml);
            trace(srcxml);
        }

        private function processNode(xml:XML):XML
        {
            //replace <nl/> with \n
            if(xml.name() == "nl")
            {
                return new XML("\n");
            }

            var children:XMLList = xml.children();
            if(children.length() == 0)
            {
                return xml;
            }

            //remove the children
            xml.setChildren(new XMLList());   

            //put the children back, one-by-one, after checking for <nl/>
            for(var i:int=0; i<children.length(); i++)
            {
                xml.appendChild(processNode(children[i])); 
            }
            return xml;
        }
    }
} 
```

E4X 方法列表发布在[http://wso2.org/project/mashup/0.2/docs/e4xquickstart.html您可以使用](http://wso2.org/project/mashup/0.2/docs/e4xquickstart.html)*xml* .@type 检查实践或真实

# python - 如何将布尔参数传递给结构命令

> ID：11641689
> 
> 赞同：22
> 
> 时间：2012-07-25T02:03:16.180
> 
> 标签：python, boolean, fabric

目前我正在使用`fab -f check_remote.py func:"arg1","arg2"...`远程运行工厂。

现在我需要发送一个 bool arg，但是 True/False 变成了一个字符串 arg，如何设置它为 bool 类型？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-10-23T08:30:59.530

我正在使用这个：

```
from distutils.util import strtobool

def func(arg1="default", arg2=False):
    if arg2:
        arg2 = bool(strtobool(arg2)) 
```

到目前为止对我有用。它将解析值（忽略大小写）：

```
'y', 'yes', 't', 'true', 'on', '1'
'n', 'no', 'f', 'false', 'off', '0' 
```

strtobool 返回 0 或 1，这就是为什么需要将 bool 转换为 True/False 布尔值。

为了完整起见，这里的`strtobool`实现：

```
def strtobool (val):
    """Convert a string representation of truth to true (1) or false (0).

    True values are 'y', 'yes', 't', 'true', 'on', and '1'; false values
    are 'n', 'no', 'f', 'false', 'off', and '0'.  Raises ValueError if
    'val' is anything else.
    """
    val = val.lower()
    if val in ('y', 'yes', 't', 'true', 'on', '1'):
        return 1
    elif val in ('n', 'no', 'f', 'false', 'off', '0'):
        return 0
    else:
        raise ValueError("invalid truth value %r" % (val,)) 
```

稍微好一点的版本（感谢评论 mVChr）

```
from distutils.util import strtobool

def _prep_bool_arg(arg): 
    return bool(strtobool(str(arg)))

def func(arg1="default", arg2=False):
    arg2 = _prep_bool_arg(arg2) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-11T22:11:00.630

我会使用一个函数：

```
def booleanize(value):
    """Return value as a boolean."""

    true_values = ("yes", "true", "1")
    false_values = ("no", "false", "0")

    if isinstance(value, bool):
        return value

    if value.lower() in true_values:
        return True

    elif value.lower() in false_values:
        return False

    raise TypeError("Cannot booleanize ambiguous value '%s'" % value) 
```

然后在任务中：

```
@task
def mytask(arg):
    arg = booleanize(arg) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-25T02:18:51.613

如果有问题的 func 使用“if argN:”而不是“if argN is True:”来测试布尔值是否为真，则可以使用“”表示 False，使用“anything”表示 True。

另见：[http ://docs.python.org/library/stdtypes.html#truth-value-testing](http://docs.python.org/library/stdtypes.html#truth-value-testing)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-01-15T13:37:00.843

如果您在所有任务上始终使用该模式（'false'，'true' 是布尔值），您可以包装织物任务并将其应用于所有任务

你可以使用这个包（我写的）：[https ://pypi.python.org/pypi/boolfab/](https://pypi.python.org/pypi/boolfab/)

这是（基本上）来源：

```
from fabric.api import task as _task

def fix_boolean(f):
    def fix_bool(value):
        if isinstance(value, basestring):
            if value.lower() == 'false':
                return False
            if value.lower() == 'true':
                return True
        return value

    @wraps(f)
    def wrapper(*args, **kwargs):
        args_ = [fix_bool(arg) for arg in args]
        kwargs_ = {k: fix_bool(v) for k,v in kwargs.iteritems()}
        return f(*args_, **kwargs_)

    return wrapper

def task(f):
    return _task(fix_boolean(f)) 
```

这样就变成了：

```
@task
def my_task(flag_a, flag_b, flag_c)
   if flag_a:
       .... 
```

不会用“布尔化”参数污染每个任务。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-06-03T07:56:19.400

更好的方法是使用[`ast.literal_eval`](http://docs.python.org/2/library/ast.html#ast.literal_eval)：

```
from ast import literal_eval

def my_task(flag):
    if isinstance(flag, basestring): # also supports calling from other tasks
        flag = literal_eval(flag) 
```

尽管这没有考虑“是”或“否”之类的值，但它比`eval`...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-22T19:31:46.180

如果用户通过“False”，Craig 和 Ari 的答案将产生 True 值（Ari 的答案对此更清楚）

如果您使用 eval() 字符串“True”和“False”将评估为正确的布尔值，但如果您使用默认值，则需要确保它们是字符串而不是布尔值。

```
def myfunc(arg1="True", arg2=False):
    arg1 = eval(arg1)
    arg2 = eval(arg2) #error 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-04-08T17:13:46.857

在我的 fabfiles 中，我只是这样做：

```
TRUTHY = [True, 1, '1', 'true', 't', 'yes', 'y']

@task
def my_task(my_arg=True):
    if my_arg in TRUTHY:
         # do stuff
    else:
         # do other stuff 
```

当然，这意味着任何不在 TRUTHY 中的值都是有效的`False`，但到目前为止我不需要任何更复杂的东西。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-11-17T04:19:43.087

我已经使用装饰器解决了这个问题。我喜欢使用装饰器所带来的灵活性和明确性。

这是代码的核心：

```
import ast
from fabric import utils
from fabric.api import task
from functools import wraps

def params(*types, **kwtypes):
    def decorator(function):
        @wraps(function)
        def wrapper(*args, **kwargs):
            new_args = ()
            for index, arg in enumerate(args):
                new_args += __cast(arg, types[index]),
            for kwarg in kwargs:
                kwargs[kwarg] = __cast(kwargs[kwarg], kwtypes[kwarg])
            return function(*new_args, **kwargs)
        return wrapper
    return decorator

def __evaluate(arg):
    try:
        return ast.literal_eval(arg)
    except:
        return str(arg)

def __cast(arg, arg_type):
    try:
        return arg_type(__evaluate(arg))
    except:
        utils.abort("Unable to cast '{}' to {}".format(arg, arg_type)) 
```

这是在代码中使用它的样子：

```
@task
@params(int, bool, arg1=int, arg2=bool)
def test(arg1, arg2):
    print type(arg1), arg1
    print type(arg2), arg2 
```

这是通过具有良好参数的 fab 调用它的样子：

```
fab test:0.1,1
<type 'int'> 0
<type 'bool'> True

fab test:5,arg2=False
<type 'int'> 5
<type 'bool'> False

fab test:arg1=0,arg2=false
<type 'int'> 5
<type 'bool'> True 
```

**注意：**在最后一个示例中，“false”为 True，这是 python 中的预期行为，但它可能自然违反直觉。与将 False 作为 int 传递类似，它将在 python 中作为 int(False) == 0 强制转换为 0

这是通过带有错误参数的 fab 调用它的样子：

```
fab test:Test,False
Fatal error: Unable to cast 'Test' to <type 'int'>

Aborting. 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-01-22T11:04:04.837

这是一个基于[https://gist.github.com/mgedmin/f832eed2ac0f3ce31edf](https://gist.github.com/mgedmin/f832eed2ac0f3ce31edf)的工作版本。与旧版本不同，这实际上尊重所有可能的装饰器参数和任务别名：

```
from functools import wraps
from fabric import tasks

def fix_boolean(f):

    true_values = ("yes", "true", "1")
    false_values = ("no", "false", "0")

    def fix_bool(value):
        if isinstance(value, basestring):
            if value.lower() in false_values:
                return False
            if value.lower() in true_values:
                return True
        return value

    @wraps(f)
    def wrapper(*args, **kwargs):
        args_ = [fix_bool(arg) for arg in args]
        kwargs_ = {k: fix_bool(v) for k,v in kwargs.iteritems()}
        return f(*args_, **kwargs_)

    return wrapper

def task(*args, **kwargs):
    """
    The fabric.decorators.task decorator which automatically converts command line task arguments
    to a boolean representation if applicable.
    :param args:
    :param kwargs:
    :return: wrapped
    """
    invoked = bool(not args or kwargs)
    task_class = kwargs.pop("task_class", tasks.WrappedCallableTask)

    def wrapper(f):
        return task_class(fix_boolean(f), *args, **kwargs)

    return wrapper if invoked else wrapper(args[0]) 
```

要点：[https ://gist.github.com/eltismerino/a8ec8584034c8a7d087e](https://gist.github.com/eltismerino/a8ec8584034c8a7d087e)

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2012-07-25T04:15:59.303

如[fabric docs](http://docs.fabfile.org/en/1.4.3/usage/fab.html#task-arguments)中所述，所有参数都以字符串形式结束。在这里做的最简单的事情就是检查参数：

```
def myfunc(arg1, arg2):
  arg1 = (arg1 == 'True') 
```

括号不是必需的，但有助于提高可读性。

**编辑**：显然我实际上并没有尝试我以前的答案；更新。（两年后。）

# maven - 如何开始编写 mavenized Java 应用程序

> ID：11641696
> 
> 赞同：0
> 
> 时间：2012-07-25T02:04:12.290
> 
> 标签：maven

我对 Java 和 Maven 还很陌生，今天正在研究 Maven，如何 Mavenize 一个 Java 应用程序，如何使它对 EClipse 有好处等等......所以现在我有一个问题：当我们想要编写一个 Java 并且我们知道我们也想使用 Maven，然后我们开始编写应用程序并创建具有 Maven 喜欢的布局的目录结构吗？或者我们只是编写我们的应用程序，最后我们对其进行 mavenize？当我们想从头开始创建一个 java 应用程序并且我们希望它也被 mavenized 时，我们从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T02:34:06.643

从一开始就使用 Maven。为什么要以不同的结构编写并在最后再次转换它，而您可以从一开始就以正确的方式进行呢？如果你从一开始就不使用 Maven，那么你会使用什么构建工具呢？蚂蚁？在这种方法中，我看不到任何生产力的提高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T08:26:30.810

正如 Adrian 所说，您绝对应该从一开始就使用 Maven。

它的主要价值之一是引导您走“正确的道路”。我应该说“正确的 Maven 方式”。它有时非常严格，但它的主要优势是：如果您确实喜欢 Maven 正在等待，那么您可能正走在每个社区或大型项目的道路上。

如果您“自己”开始您的项目，您可能会忘记或错过一些困扰您的事情。例如，主要的 java 源应该在 src/main/java 中。大多数插件使用变量 sourceDirectory 来绑定它......但您可能需要为插件重新定义此变量多次。另一个经常令人困惑的例子是多模块项目。如果您有 2 个或更多绑定的项目（在它们的生命周期中），您应该设置一个多模块项目。如果不这样做，您将面临代码或操作重复（2 个标签、2 个构建、2 个部署等）。

所以，为了给你一个直接的答案：

1.  阅读[http://www.sonatype.com/books/mvnref-book/reference/](http://www.sonatype.com/books/mvnref-book/reference/)
2.  使用更合适的原型来构建您的项目
3.  如果您在命令行下创建它（而不是使用 IDE），请导入它
4.  然后工作:)

What I'm saying will appear you more and more clear using Maven :).

See [Why does Maven have such a bad rep?](https://stackoverflow.com/questions/861382/why-does-maven-have-such-a-bad-rep) to better understand why :)

# c++ - C++ 中的 && 是什么

> ID：11641697
> 
> 赞同：-2
> 
> 时间：2012-07-25T02:04:24.767
> 
> 标签：c++

> **可能重复：**
> [双地址运算符？(&&)](https://stackoverflow.com/questions/4549151/double-address-operator)

我遇到了以下函数签名

```
void doSomething(double && r3); 
```

不能是逻辑&&，而Reference是一个&...上面的&&是什么？如果可能的话，你能指点我一些关于它的文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T02:06:38.867

它是一个右值引用。我可以告诉你，我是这方面的专家，但这可能是 C++ 对我来说最令人困惑的方面。无论如何，这是一个很好的解释。

[http://thbecker.net/articles/rvalue_references/section_03.html](http://thbecker.net/articles/rvalue_references/section_03.html)

# actionscript-3 - 使动画剪辑在运动路径上移动

> ID：11641700
> 
> 赞同：0
> 
> 时间：2012-07-25T02:05:07.473
> 
> 标签：actionscript-3, flash

我正在为我的项目制作蛇和梯子游戏。

我的游戏几乎完成了，除了现在我需要让游戏块遵循“运动路径”以“平稳”地爬上梯子，而不是直接跳到梯子结束的瓷砖。

我一直在寻找如何使影片剪辑在运动路径上移动。但是它们都对我没有用，因为我只需要游戏块在到达特殊图块（例如梯子或蛇）时沿着运动路径移动。

所以我的问题是我如何准确地对我的游戏进行编码，以便当游戏块到达一个特殊的图块时，它会“捕捉”到运动路径上并相应地移动到路径上？

这是我用来将游戏块向上移动的当前代码：

```
if(playerTile[i] == startLadder1 ){
    ladder4.play();
    playerTile[i] = destLadder1;        
    players2[i].x = tiles[playerTile[i]].x + offsets[i].x;
    players2[i].y = tiles[playerTile[i]].y + offsets[i].y;

} 
```

playerTile 是游戏块所在的当前图块。startLadder1 是梯子开始处的图块。destLadder1 将是梯子的末端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T02:54:37.330

使用 Tweening 引擎，例如 Tweensy 或[TweenLite](http://www.greensock.com/tweenlite/)。例如，Tweensy 的[Bezier2D](http://docs.flashdynamix.com/tweensy/original/com/flashdynamix/motion/guides/Bezier2D.html)可能会给您想要的曲线。

# r - 对矩阵列表求和

> ID：11641701
> 
> 赞同：65
> 
> 时间：2012-07-25T02:05:07.543
> 
> 标签：r, list, matrix

我有一个列表，其中每个元素都是一个 5*5 矩阵。例如

```
[[1]]   
           V1          V2          V3          V4          V5      
      [1,]   0.000000   46.973700   21.453500  338.547000   10.401600 
      [2,]  43.020500    0.000000  130.652000  840.526000   56.363700 
      [3,]  12.605600  173.238000    0.000000  642.075000   19.628100 
      [4,] 217.946000  626.368000  481.329000    0.000000  642.341000 
      [5,] 217.946000  626.368000  481.329000    0.000000  642.341000 
[[2]]   
           V1          V2          V3          V4          V5      
      [1,]   0.000000   47.973700   21.453500  338.547000   10.401600 
      [2,]  143.020500    0.000000  130.652000  840.526000   56.363700 
      [3,]  312.605600  17.238000    0.000000  642.075000   19.628100 
      [4,]  17.946000  126.368000  481.329000    0.000000  642.341000
      [5,] 217.946000  626.368000  481.329000    0.000000  642.341000  
... 
```

如何使用类似 apply 的函数将矩阵 [1] 与 [n] 相加，并返回一个 5*5 矩阵作为结果（每个元素是列表中每个矩阵中对应元素的总和）？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-07-25T02:20:40.977

使用`Reduce`.

```
## dummy data

.list <- list(matrix(1:25, ncol = 5), matrix(1:25, ncol = 5))

Reduce('+', .list)
##       [,1] [,2] [,3] [,4] [,5]
## [1,]    2   12   22   32   42
## [2,]    4   14   24   34   44
## [3,]    6   16   26   36   46
## [4,]    8   18   28   38   48
## [5,]   10   20   30   40   50 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-25T16:11:52.840

我认为@mnel 的答案更有效，但这是另一种方法：

```
apply(simplify2array(.list), c(1,2), sum)

    [,1] [,2] [,3] [,4] [,5]
[1,]    2   12   22   32   42
[2,]    4   14   24   34   44
[3,]    6   16   26   36   46
[4,]    8   18   28   38   48
[5,]   10   20   30   40   50 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-25T02:56:11.423

你可以`do.call`胡闹，但它失去了它的口才：

```
.list <- list(matrix(1:25, ncol=5), matrix(1:25,ncol=5), matrix(1:25,ncol=5))

x <- .list[[1]]
lapply(seq_along(.list)[-1], function(i){
    x <<- do.call("+", list(x, .list[[i]]))
})
x 
```

# facebook - 在 localhost 上测试 facebook 连接

> ID：11641703
> 
> 赞同：2
> 
> 时间：2012-07-25T02:05:13.893
> 
> 标签：facebook, api

我正在尝试在我的本地主机上测试 facebook 连接。在 facebook 开发者页面的应用程序设置中，我尝试将“使用 facebook 登录的网站”更改为，`http://localsitename:8888`但出现错误：

```
Error
Site URL must be a URL with a valid domain. 
```

我读过其他人成功做到这一点的地方。有没有人找到解决这个问题的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:42:11.897

看起来 Facebook 只接受`localhost`一个没有任何点的域名。

使您的本地站点的名称中带有一个点，然后它应该可以正常工作 - `localsite.name`，`mytestsite.local`甚至`foo.bar`......</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-05T15:46:35.627

CBroe的回答效果很好！

如果您正在使用**xampp**，您可以编辑`\xampp\apache\conf\extra\httpd-vhosts.conf`和添加另一个虚拟主机。还编辑`\windows\system32\driver\etc\hosts`文件并添加对新主机的引用。

**主持人：**添加

`technotronic.fb 127.0.0.1`

**httpd-vhosts.conf：** 添加

```
<VirtualHost *>
        DocumentRoot "E:/xampp/htdocs/technotronic"
        ServerName technotronic.fb
        <Directory "E:/xampp/htdocs/technotronic">
        Order allow,deny
        Allow from all
        </Directory>
    </VirtualHost> 
```

这解决了我的问题。

# c++ - 深度+颜色的3D投影

> ID：11641704
> 
> 赞同：3
> 
> 时间：2012-07-25T02:05:18.060
> 
> 标签：c++, image-processing, kinect, projection

我有一张彩色图像及其深度图，它们都是由 Kinect 捕获的。我想将它投影到另一个位置（以查看它在另一个角度的样子）。因为我没有 Kinect 的内在参数（相机参数）；我该如何实施？

PS：我正在用 C++ 编写代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:35:16.990

使用深度框架和颜色框架，您应该有足够的数据来实现与您想要做的类似的事情。

在颜色框架中，您拥有每个像素的颜色。在深度帧中，您有每个像素的距离。

（请记住，由于每个传感器的位置，深度帧中的数据和颜色帧中的数据之间存在小的差距。请查看映射辅助方法：[MapDepthFrameToColorFrame](http://msdn.microsoft.com/en-us/library/microsoft.kinect.kinectsensor.mapdepthframetocolorframe)）

如果您同时获取深度和颜色框架中的所有数据，您可以将每个像素绘制为 3 维世界中的一个点。假设您的分辨率为 640x480。您将在 640（x = 宽度）、480（y = 高度）、~3000（z = 深度）的矩形中绘制场景。那你就可以换个角度了！

唯一的问题是您没有正确的 Z 轴比例。如果您想要更好的结果，您还应该使用 SkeletonFrame。多亏了这一点，您将获得实际的 X、Y 和 Z 值（以米为单位）。您可以再次使用辅助方法 ( [MapDepthToSkeletonPoint](http://msdn.microsoft.com/en-us/library/hh973090) ) 来获取每个深度点对应的骨架点！

如果您查看[这篇文章](http://www.renauddumont.be/en/2012/kinect-sdk-1-0-4-kinect-en-profondeur-avec-le-depthstream)，您会发现一个显示结果的视频、一段 C# 代码，以及一个您可以重复使用的项目示例。

# symfony - Symfony 2 注销路由不一致：注销重定向到登录？

> ID：11641709
> 
> 赞同：0
> 
> 时间：2012-07-25T02:05:51.643
> 
> 标签：symfony

我想解决我的 Symfony 2 应用程序中的这种不一致：当用户**未**通过身份验证时，路径`/app/logout`重定向到`/app/login`. 相反，未通过身份验证的用户应该查看错误页面（可能是 403）。

这是安全配置。这`IS_AUTHENTICATED_FULLY`似乎是强制性的，因为用户只有在之前完全通过身份验证时才能注销：

```
access_control:
    - { path: ^/app/login,  roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/app/logout, roles: IS_AUTHENTICATED_FULLY } 
```

我的注销操作`AccessController`：

```
/**
 * @Extra\Route("logout")
 * @Extra\Template
 */
public function logoutAction()
{
    // Set the token to null and invalidate the session
    $this->getSecurityContext()->setToken(null);
    $this->getSession()->invalidate();

    // Redirect url and seconds (window.location)
    $seconds  = 5;
    $redirect = $this->getRouter()->generate('access_login');

    return array('seconds' => $seconds, 'redirect' => $redirect);
} 
```

一种解决方案是从访问控制中删除路由`/app/logout`，然后在用户未完全通过身份验证时抛出异常：

```
if(false === $this->getSecurityContext()->isGranted('IS_AUTHENTICATED_FULLY'))
    throw new AccessDeniedException(); 
```

但是`/app/logout`即使没有经过身份验证的用户也可以访问这种方式！有人知道更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:34:55.633

只需从中删除注销路径`access_control`。如果未经过身份验证的用户进入注销页面，则不会发生任何不好的事情——这是安全的。不要过度设计这些东西。;)

顺便说一句，你为什么不使用 Symfony 的内置注销控制器？您可以创建一个注销处理程序来将您的自定义代码放入其中，而不是通过自己处理所有注销内容来重新发明轮子。

# css - 奇怪的谷歌 chrome 图像错误

> ID：11641710
> 
> 赞同：1
> 
> 时间：2012-07-25T02:05:54.837
> 
> 标签：css, image, google-chrome

对于这个相当有趣的问题，我似乎找不到答案。在谷歌浏览器中，具有设置宽度和/或高度的图像，无论是使用属性、内联样式还是 css 样式，都拒绝在初始加载时显示在页面上。它们似乎只在有一些页面活动之后才会出现。但是，如果您让图像加载到它们的自然大小，它们在页面加载时显示的效果非常好。可以在其他浏览器中查看图像，并且在检查 chrome 中的元素时，图像会显示在弹出窗口中。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T02:54:17.360

定义你的意思：'在一些页面活动之后'。

您还提到，当您设置宽度和/或高度时会发生这种情况，这使我相信您的某些测试省略了宽度或高度，因此它可以由浏览器计算。如果是这种情况，那么是的，图像永远不会看起来正确，并且元素在初始页面加载时没有大小，直到下载图像，浏览器检查图像并确定缺少的尺寸以创建边界框。

编辑：

查看您的在线网站后，我之前的评论解释了它的要点，但我可以看到您正在设置“自动”宽度，这需要浏览器首先加载图像并检测尺寸。这将导致浏览器渲染延迟“重排”。设置宽度和高度，否则需要由客户端浏览器计算。如果你没有那么好的电脑，它看起来很迟钝。在我的系统上，如果我在没有缓存的情况下硬刷新，有时我会得到所有的拇指，而有时我没有，并且延迟非常明显。

所以简而言之，让您的图像始终具有宽度和高度。

编辑：

您还有一些可能导致延迟的 404 错误。[http://www.webpagetest.org/result/120725_0C_3N6/1/details/](http://www.webpagetest.org/result/120725_0C_3N6/1/details/)

编辑：

我认为您唯一的选择是首先加载 bg 图像，方法是按照下载资源的顺序将其提升到更高的位置，以便尽可能快地加载以进行渲染。一个技巧可能是将 bg 图像加载到隐藏的 div 中以立即预加载它，以便浏览器首先下载它。即使你这样做了，你也应该在等待高分辨率照片下载并加载时看到一些黑色背景的闪光。无论如何都无法在背景图像上设置宽度和高度。更进一步，您可以通过在页面加载后使用 AJAX 调用加载所有缩略图来加快响应时间，这样它们甚至不会与大照片竞争并开始下载，直到 dom 完全加载。您甚至可以在其中放置一个不错的效果，以淡化缩略图加载或类似效果。

# ios - BT 4.0 LE 消费者配置文件与 iOS

> ID：11641711
> 
> 赞同：0
> 
> 时间：2012-07-25T02:06:31.147
> 
> 标签：ios, profile, core-bluetooth, bluetooth-lowenergy, spp

iPhone 4S [BT 4.0 LE 自定义配置文件 SPP] <---> 硬件设备[BT 2.0, 3.0 SPP 配置文件]

android [BT 2.0 or 3.0 profile SPP] <---> H/W Device[BT 2.0, 3.0 SPP profile]

可能吗？与基于消费者配置文件的 SPP（BT 4.0 LE）配置文件和 SPP 配置文件（BT 3.0 或 2.0）通信

如果可能的话，我想提供有关使用 CoreBluetooth 框架制作 SPP 配置文件的文档（或源代码）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:24:30.513

串行端口配置文件 (SPP) 使用 RFCOMM 不是低能耗 (LE) 配置文件。因此，即使使用支持 LE 的 BT 4.0 硬件，您也可以使用该规范的经典蓝牙。CoreBluetooth 是一个 LE API，它不能控制 SPP。

蓝牙配置文件的兼容性基于主要版本号。例如，profile X 1.0 预计不会与 profile X 2.0 兼容/互操作，但 profile X 1.1 预计与 profile X 1.5 兼容/互操作。

互操作性是按配置文件定义的。我认为最新的 SPP 是 1.1，所以只要您使用的是 SPP 1.X，以上应该可以工作。

# javascript - JavaScript 风格：我应该将哪些东西作为参数传递给我的命名空间函数？

> ID：11641715
> 
> 赞同：2
> 
> 时间：2012-07-25T02:06:54.517
> 
> 标签：javascript, coding-style, conventions

以下是 JavaScript 中的常见做法：

```
(function($) {
    ...code...
})(jQuery); 
```

我了解包装器功能（它可以防止污染全局命名空间），但是许多库（如 jQuery、Underscore 等）已经在全局范围内定义了短名称（`$`和`_`）供我使用。我想知道这种方法的优势是什么。只是为了重命名`jQuery`为更短的名字？阻止我覆盖`$`？以后更容易在另一个库中交换？我想这些对我来说似乎都没有说服力。

此外，我还看到了这个：

```
(function(_) {
    ...code...
})(_); 
```

这里甚至没有重命名。我什至见过：

```
(function(global) {
    ...code...
})(this); // or window, perhaps 
```

直接使用有什么问题`window`？

所以这就是我要问的：

*   这种做法有名字吗？
*   这种做法有什么好处？
*   我应该总是传递我正在使用的库而不是直接使用它们吗？
*   我应该传入`this`还是`window`作为对全局范围的引用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T02:15:28.273

> 这种做法有什么好处？

如果变量（' `_`'、' `$`'等）稍后被其他代码覆盖，您的代码将继续按预期工作。它将使用调用包装函数时传入的值。

> 我应该总是传递我正在使用的库而不是直接使用它们吗？

不，但如果您对上述内容有任何疑虑，这可能是一个好习惯。此外，如果您查找 AMD 加载器（例如 Require.js），您会发现这是一种熟悉的技术，因为它们会执行类似的操作来定义模块的需求。

> 我应该传入 this 或 window 作为对全局范围的引用吗？

`this`具有代码将在全局范围内运行的优点。例如，如果您的代码可能在 Node.js 服务器上运行，则没有`window`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T02:37:35.770

**这种做法有名字吗？**

该语法被称为自执行匿名函数。我不知道将全局对象传递给函数的任何特殊名称。

**这种做法有什么好处？**

*   正如您所指出的，`var`函数内的范围变量将有助于消除全局命名空间的混乱。
*   该`jQuery`示例通常用于插件中，以便插件可以`$`在保持与`$.noConflict()` [(docs)兼容的同时使用](http://api.jquery.com/jQuery.noConflict/)

    ```
    (function($) {
        ...code...
    })(jQuery); 
    ```

*   通常，将全局或保留对象（如`window`, `document`）作为参数传递有助于在缩小后减小脚本的大小：

    ```
    (function(window, document) {
        // A JS minifier can now minify the all occurrences of `window` and
        // `document` within this function.
    })(window, document); 
    ```

**我应该总是传递我正在使用的库而不是直接使用它们吗？**
**我应该传入 this 或 window 作为对全局范围的引用吗？**

仅当需要考虑缩小或冲突的库变量名称时。

# objective-c - 创建试图实现 shouldAutorotateToInterfaceOrientation 的通用应用程序

> ID：11641721
> 
> 赞同：0
> 
> 时间：2012-07-25T02:08:22.237
> 
> 标签：objective-c, xcode, orientation

我创建了一个单视图通用应用程序，并确保方法 shouldAutorotateToInterfaceOrientation 已在我的 ViewController.m 中实现，当我启动模拟器并旋转设备时，它在我旋转时不会做任何事情。我已经验证在我的 plist 中添加了所有 4 个方向，并且选择了所有四个按钮。我没有在视图中添加任何其他控制器，它不起作用我错过了什么？它在运行 iPhone 版本时旋转得很好。我在这里使用故事板，所以我有一个 iPhone 和 iPad 故事板。我什至在该方法中添加了一个断点，但它从未被调用过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T03:12:56.390

iPad 和 iPhone 使用不同的设置。您确定为 iPad 选择了所有四个方向吗？

请在您的目标设置 - 摘要选项卡中仔细检查“iPad 部署信息”。

# symfony - 将类应用于 Symfony2 表单标签

> ID：11641727
> 
> 赞同：31
> 
> 时间：2012-07-25T02:09:40.717
> 
> 标签：symfony, symfony-forms

我正在尝试使用 php 模板在表单标签上的类上设置类。

这是我的代码：

```
<?php echo $view['form']->label($form['first_name'], 'First Name', array(
    'attr' => array('class' => 'control-label')
)) ?> 
```

但这是我的输出：

```
<label class="required" for="form_first_name">First name</label> 
```

我可以找到使用 twig 的方法，但不是 PHP 的示例。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-07-25T08:37:14.957

我懂了...

```
<?php 
    echo $view['form']->label($form['first_name'], 'First Name', array(
            'label_attr' => array('class' => 'control-label'),
         )) 
?> 
```

显然，“attr”是标签字段的“label_attr”。

PS 对应树枝代码

```
{{ form_label(form.first_name, 'First Name', { 'label_attr': {'class': 'control-label'} }) }} 
```

# rspec - Capybara-webkit，javascript集成测试不起作用

> ID：11641737
> 
> 赞同：0
> 
> 时间：2012-07-25T02:11:07.210
> 
> 标签：rspec, capybara, capybara-webkit

嗨，我在运行我的规范时遇到问题，当我为我的测试打开 javascript 时，我似乎无法登录。

```
describe "logging in" do 
  let!(:user) { FactoryGirl.create(:user) }

  before do
     visit new_user_session_path
     fill_in "Email", with: user.email
     fill_in "Password", with: user.password
     click_link "Sign in"
  end

  it "should do something" do
    page.should have_css('.flash', text: "You have successfully signed in") 
  end
end 
```

奇怪的是，这工作得很好。奇怪的是，当我尝试通过将第一行更改为 : 来打开 js 时`describe "loggin in", js: true do`，测试失败并在 flash 通知中显示无效的电子邮件密码组合。

我正在使用`Rails 3.2.6`,`rspec-rails (2.11.0)`和`capybara-webkit (0.12.1)`. 我的规范助手有这条线`Capybara.javascript_driver = :webkit`。

我不确定到底发生了什么，我使用 pry 来检查用户是否已创建（它是），尽管我不确定如何检查字段是否正确填写。我相信它们已正确填写，因为它在关闭 javascript 时有效。

请注意，我知道您不需要 javascript 进行此测试，但我不想发布实际规范。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T04:32:25.820

想出你需要`config.action_dispatch.show_exceptions = true`在你的`#config/environments/test.rb`

# php - 如何按存储在子数组中的值对数组进行排序？

> ID：11641738
> 
> 赞同：0
> 
> 时间：2012-07-25T02:11:10.333
> 
> 标签：php

我有一个看起来像这样的数组：

```
array(
  (int) 0 => array(
    'SomeItem' => array(
        'id' => '1',
        'number' => '3',
        'created' => '2012-07-20 23:34:00',
        'modified' => '2012-07-20 23:34:00'
      )
  )
  (int) 1 => array(
    'SomeItem' => array(
        'id' => '1',
        'number' => '6',
        'created' => '2012-07-20 23:34:00',
        'modified' => '2012-07-20 23:34:00'
    )
  )
) 
```

我将如何按“数字”对其进行排序，以便我可以将其按数字升序排列，同时仍保持结构？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T02:55:25.207

使用闭包：

```
usort($array, function($a, $b)
        {
            if ($a['SomeItem']['number'] == $b['SomeItem']['number'])
                return 0;

            return ($a['SomeItem']['number'] < $b['SomeItem']['number']) ? -1 : 1;
        }
    ); 
```

没有

```
function cmp($a, $b)
{
    if ($a['SomeItem']['number'] == $b['SomeItem']['number'])
        return 0;

    return ($a['SomeItem']['number'] < $b['SomeItem']['number']) ? -1 : 1;
}
usort($array, 'cmp'); 
```

# php - Zend 添加 facebook 喜欢

> ID：11641740
> 
> 赞同：-1
> 
> 时间：2012-07-25T02:11:36.150
> 
> 标签：php, zend-framework, zend-db

如何在基于 zend 的应用程序中添加类似 facebook 的功能？代码是放在视图中还是放在助手中？

```
facebook.app_id = "APPID"
facebook.app_secret = "SECRET" 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T02:14:52.607

在 zend 中添加 facebook 的最简单方法是在帮助程序中添加代码，稍后可以从视图中调用。

```
class Application_View_Helper_GetFacebookLikeBox extends Zend_View_Helper_Abstract
{
public function getFacebookLikeBox()
{
    $config = Zend_Registry::get('config');
    $app_id = $config['facebook']['app_id'];

    return '<iframe
                src="//www.facebook.com/plugins/likebox.php?href=https%3A%2F%2Fwww.facebook.com%2FEXAMPLE&amp;
                    width=250&amp;height=284&amp;colorscheme=light&amp;show_faces=true&amp;border_color&amp;
                    stream=false&amp;header=false&amp;appId='.$app_id.'"
                scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:250px; height:284px;"
                allowTransparency="true">
            </iframe>';
}
} 
```

然后从视图中调用 $this->getFacebookLike(); 将呈现 facebook like 按钮。

# redis - 如何在 C++ 中将 Pub/sub 与hiredis一起使用？

> ID：11641741
> 
> 赞同：1
> 
> 时间：2012-07-25T02:11:36.760
> 
> 标签：redis

我正在尝试通过 C++ 使用hiredis客户端测试redis的这个发布/订阅功能。

我可以看到订阅某个频道似乎很容易通过 redisCommand Api 完成。

但是我想知道当有人发布到某个服务器时回复是如何返回的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-11T08:09:37.170

[https://github.com/redis/hiredis/issues/55](https://github.com/redis/hiredis/issues/55) aluiken 于 2012 年 3 月 2 日发表评论

```
void onMessage(redisAsyncContext *c, void *reply, void *privdata) {
    redisReply *r = reply;
    if (reply == NULL) return;

    if (r->type == REDIS_REPLY_ARRAY) {
        for (int j = 0; j < r->elements; j++) {
            printf("%u) %s\n", j, r->element[j]->str);
        }
    }
}

int main (int argc, char **argv) {
    signal(SIGPIPE, SIG_IGN);
    struct event_base *base = event_base_new();

    redisAsyncContext *c = redisAsyncConnect("127.0.0.1", 6379);
    if (c->err) {
        printf("error: %s\n", c->errstr);
        return 1;
    }

    redisLibeventAttach(c, base);
    redisAsyncCommand(c, onMessage, NULL, "SUBSCRIBE testtopic");
    event_base_dispatch(base);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-29T07:44:32.167

这是一个较晚的答案，但您可以尝试[redis-plus-plus](https://github.com/sewenew/redis-plus-plus)，它基于hiredis，并用C++ 11 编写。

*免责声明*：我是这个库的作者。如果您对此客户有任何问题，请随时[告诉我](https://github.com/sewenew/redis-plus-plus/issues)。如果你喜欢它，也可以随意给[它加星](https://github.com/sewenew/redis-plus-plus)：）

示例代码：

```
Redis redis("tcp://127.0.0.1:6379");

// Create a Subscriber.
auto sub = redis.subscriber();

// Set callback functions.
sub.on_message([](std::string channel, std::string msg) {
    // Process message of MESSAGE type.
});

sub.on_pmessage([](std::string pattern, std::string channel, std::string msg) {
    // Process message of PMESSAGE type.
});

sub.on_meta([](Subscriber::MsgType type, OptionalString channel, long long num) {
    // Process message of META type.
});

// Subscribe to channels and patterns.
sub.subscribe("channel1");
sub.subscribe({"channel2", "channel3"});

sub.psubscribe("pattern1*");

// Consume messages in a loop.
while (true) {
    try {
        sub.consume();
    } catch (...) {
        // Handle exceptions.
    }
} 
```

检查[文档](https://github.com/sewenew/redis-plus-plus#publishsubscribe)以获取详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-21T19:42:08.893

观察者模式是我们在 Redis 的 pub/sub 特性中看到的。

所有订阅者都是观察者，主题是发布者正在修改的频道。

当发布者修改通道时，即执行 redis-cli> publish foo value 之类的命令时，此更改由 Redis 服务器传达给所有观察者（即订阅者）

所以 Redis 服务器有一个特定频道的所有观察者的列表。

# r - R中的函数“else”

> ID：11641743
> 
> 赞同：3
> 
> 时间：2012-07-25T02:11:40.520
> 
> 标签：r, function, if-statement

我在使用`else`R 中的函数时遇到了一些困难。当我输入`?else`时，我没有得到关于函数的任何帮助`else`。

当我运行以下程序时：

```
i=1

if(i>1){print("aa")}

else{print("bb")} 
```

没用`else`。有人可以告诉我原因吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T02:15:04.760

获取帮助类型

```
?'else' 
```

查看帮助中的段落

> 请注意，忘记在语句周围加上大括号 ({ .. }) 是一个常见错误，例如，在 if(..) 或 for(..) 之后。特别是，在 } 和 else 之间不应有换行符，以避免在键盘或通过源输入 if ... else 结构时出现语法错误。出于这个原因，防御性编程的一种（有点极端的）态度是总是使用大括号，例如，if 子句。

```
if(i>1){print("aa")
}else{print("bb")} 
```

或者

```
if(i>1){print("aa")}else{print("bb")} 
```

大概会为你工作。

```
i=1

{
if(i>1){print("aa")}
else{print("bb")}
} 
```

也可以。关键是让解析器知道期待更多的输入。

# magento - Magento - 块未呈现

> ID：11641747
> 
> 赞同：0
> 
> 时间：2012-07-25T02:12:03.720
> 
> 标签：magento, block

我正在开发我的第二个 Magento 模块，它应该检索一些数据并呈现一个包含它的块。这样的块将被其他页面使用。

目前，我几乎已经完成了整个模块，但是由于某种原因，当我调用控制器方法时，该块没有呈现。我放了一些调试信息，我可以看到块的`__construct()`方法被正确调用了，但是模板似乎没有被加载并且返回的页面是空白的。

这是块的代码，我从另一个模块复制并修改：

```
class Company_CustomerData_Block_CustomerSummary extends Mage_Core_Block_Template {
    const _TEMPLATE = 'customerdata/customersummary.phtml';

    public function __construct() {
    // This method is called correctly
        parent::_construct();
        $this->setTemplate(self::_TEMPLATE);
    }
} 
```

*customersummary.phtml*文件位于*app/design/frontend/base/default/template/customerdata*中，这应该是正确的位置（或者，至少，我认为是这样）。其内容如下：

```
It works! 
```

只是一些纯文本。没有标签，没有代码，什么都没有。我不介意它是静态文本，一旦完成，它将填充数据。

如果需要，这里是控制器的代码（我删除了检索数据的部分，因为它们没有任何区别）：

```
public function dashboardAction() {
    // Customer Data to render in the block
    $CustomerData = array(); // Data is retrieved elsewhere

    $this->getResponse()->setBody(
        $this->getLayout()->createBlock('customerdata/customersummary')
        ->toHtml()
    );
} 
```

我可能做错了什么？恐怕我又犯了一些愚蠢的错误，但我真的看不出来。

最后还有两个问题：

*   如何将我在 Controller 中检索的数据传递给模板？具体来说，变量`$CustomerData`.
*   块呈现后，如何从页面中呈现其内容？该块应该返回一个包含一些东西的内容，我想在客户仪表板中呈现它，就在已经存在的信息下方。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T05:10:25.587

Magneto 上的大多数类都派生自`Varien_Object`. `Varien_Object`（以及它的后代）`__construct`为自己声明 PHP 的构造函数 ()，并提供一个`_construct`回调，您可以将其用于任何您喜欢的事情。这意味着如果您覆盖原生 PHP 构造函数 ( `__construct`)，您需要记住做一些事情：

1.  接受与基类相同数量的参数，并且...
2.  `parent::__construct`使用为您的构造函数提供的参数调用父构造函数 ( )。

或者，或者，使用 Varien_Object 提供的 _construct 回调，你就完成了。`parent::_construct`如果您使用 Magento 回调，则无需记住调用。

因此，要修复上面的代码片段，您可以更改...

```
public function __construct() { 
```

... 到 ...

```
public function _construct() { 
```

这将使您切换到使用 Magento 回调。或者你可以改变...

```
parent::_construct(); 
```

.. 到 ...

```
parent::__construct(); 
```

...调用父类的构造函数。记住添加父类提供的参数。

Alan Storm 最近写了一篇关于[Magento 的块生命周期和回调方法](http://alanstorm.com/magento_listener_lifecycle_block)的精彩文章，这可能会有所帮助。

对于您的其他问题：

*   将信息从控制器传递到块通常是通过 Magento 的注册表完成的。
*   将模板呈现为页面的一部分需要您创建布局说明（以 XML 编写），这些说明会加载您的块并将其放置在父块中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T14:35:47.787

尽管吉姆的回答是正确的，但我要添加第二部分，因为我发现还有什么问题：**符号链接**。正如我在为框架开发插件时通常所做的那样，我使用符号链接来避免一遍又一遍地复制文件。但是，Magento 使用 function `RealPath()`，它将符号链接解析为其完整路径。因此，要加载的模板文件位于 Magento 安装目录之外的路径中，出于安全原因无法加载。这完全有道理，可惜它不是很明显。

为了解决这个问题，我在我的开发 PC 上的配置中启用了允许符号链接，现在模板已正确加载和呈现。

我认为 Magento 可以在管理界面中使用日志查看器。如果还没有一个模块可以做到这一点，也许我应该自己创建一个。

谢谢大家的帮助。

# javascript - IE 对我的 javascript 背景更改代码的行为很奇怪。为什么？

> ID：11641748
> 
> 赞同：0
> 
> 时间：2012-07-25T02:12:09.677
> 
> 标签：javascript, html, internet-explorer, debugging

目前，我将网站作为我的个人项目。我已经测试了我的 javascript，它在 chrome 和 firefox 上都可以正常工作。但是当我在 IE 中测试它时，只有部分代码有效。奇怪的是，当我按 f12 并打开开发者工具时，代码运行完美！工作就像它应该做的那样，没有任何错误。

这是我的javascript：

```
var state_Clicked = false;
var List = document.createElement("div");

function gearClick() {
    if(state_Clicked == true) {
        List.parentNode.removeChild(List);
        state_Clicked = false;
    } else {
        List.setAttribute("id", "containBox");
        List.setAttribute("class", "bgChooserBox");
        List.innerHTML = '<span class="thumback"><img onMouseDown="changeBackground(\'RD1_SlurpyNom.jpg\');" class="thumb" src="GRAPHICS/bg/RD1_SlurpyNom.jpg" width="100" height="100" /></span> \
                          <span class="thumback"><img onMouseDown="changeBackground(\'FS1_SlurpyNom.jpg\');" class="thumb" src="GRAPHICS/bg/FS1_SlurpyNom.jpg" width="100" height="100" /></span> \
                          <span class="thumback"><img onMouseDown="changeBackground(\'AJ1_SlurpyNom.png\');" class="thumb" src="GRAPHICS/bg/AJ1_SlurpyNom.png" width="100" height="100" /></span> \
                          <span class="thumback"><img onMouseDown="changeBackground(\'PP1_SlurpyNom.png\');" class="thumb" src="GRAPHICS/bg/PP1_SlurpyNom.png" width="100" height="100" /></span> \
                          <span class="thumback"><img onMouseDown="changeBackground(\'R1_SlurpyNom.jpg\');" class="thumb" src="GRAPHICS/bg/R1_SlurpyNom.jpg" width="100" height="100" /></span> \
                          <span class="thumback"><img onMouseDown="changeBackground(\'TS1_SlurpyNom.jpg\');" class="thumb" src="GRAPHICS/bg/TS1_SlurpyNom.jpg" width="100" height="100" /></span> ';
        document.getElementsByTagName("body").item(0).appendChild(List);

        state_Clicked = true; 
    }
}

function changeBackground(name) {
    console.log('/GRAPHICS/bg/' + name);
    document.getElementById("body").style.backgroundImage = 'url(/GRAPHICS/bg/' + name + ')';
    document.getElementById("logo").style.opacity = '0.4';
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T02:15:09.257

`console.log`是最有可能导致您出现问题的事情。控制台不是 DOM 中的实际对象，它通常由诸如 firebug、chrome 开发人员工具、IE 开发人员工具等工具添加到那里。较新版本的 Chrome 和 Firefox 在未打开时会忽略控制台调用。或者至少我认为情况就是这样，因为现在很多人都在使用控制台进行调试，并且它可以让人们更轻松地进行调试。

无论如何，在您使用 IE 的情况下，当您打开开发工具时，控制台是一个活动对象，因此您的脚本在打开时不会中断，但是当它关​​闭时，控制台对象不存在，因为它不存在并且不存在否则在这种情况下被浏览器忽略，脚本正在中断。

从现在到世界末日，IE 已经并且很可能永远是每个 Web 开发人员的眼中钉。

如果您想使用控制台进行调试，我的建议是在逻辑中添加一个 if-else，以便您可以打开和关闭它来回翻转..

就像是`if(console.length > 0){console.log('blah');}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T02:14:33.840

删除`console.log`呼叫。它需要一个`console`可用的对象，否则会抛出错误。这就是为什么当您打开开发人员工具时它可以工作，它们提供了一个控制台。

# mysql - 有没有办法只限制mysql中的下限？

> ID：11641749
> 
> 赞同：4
> 
> 时间：2012-07-25T02:12:20.670
> 
> 标签：mysql, limit

我想获取所有行，但查询中的第一行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T02:21:17.667

您可以使用偏移量为 的大量行`1`。

```
LIMIT 1,18446744073709551615 
```

# javascript - 我什么时候可以知道我已经在 indexedDB 中打开了一个连接？

> ID：11641751
> 
> 赞同：2
> 
> 时间：2012-07-25T02:12:22.940
> 
> 标签：javascript, indexeddb

在下面的`getCursor_`函数中，请解释我如何确定是否`IndexedDb`已打开，如果未打开则重新运行函数？`getCursor_`运行正确。但是，由于所有这些调用都是异步的，因此在数据库完成打开之前执行该函数会失败。

**此代码在单独的进程中执行：**

```
var ixDb;
var ixDbRequest;

ixDbRequest = window.indexedDB.open(dbName, dbVersion);

ixDbRequest.onsuccess = function (e) {
            ixDb = ixDbRequest.result || e.result;
}; 
```

**`getCursor_`除非`ixDbRequest`尚未完成执行，否则以下功能可以正常工作。我想出了如何测试它，但我不确定如何在开放数据库请求仍在运行的实例中等待。**

```
function getCursor_(objectStoreName) {
    if (!ixDb) {
        if (ixDbRequest) {
            // "Database is still opening.  Need code to wait or re-run 
            // once completed here.
            // I tried the following with no luck:
            ixDbRequest.addEventListener ("success",
                getCursor_(objectStoreName), false); 
            return;
        }
    }

    var transaction = ixDb.transaction(objectStoreName, 
                                       IDBTransaction.READ_ONLY);
    var objectStore = transaction.objectStore(objectStoreName);  
    try{
        var request = objectStore.openCursor(); 
        return request;
    }
    catch(e){
        console.log('IndexedDB Error' + '(' + e.code + '): ' + e.message);
    }
} 
```

**更新如下：**

@Dangerz 的回答绝对帮助我走上了正轨。然而，由于函数调用是异步的，我最终还不得不添加一个回调，以便在“成功”事件最终触发后真正能够使用游标，并且我能够获得请求的 IndexedDb 游标。最终的工作函数如下（稍微重构以删除 "if(!ixDb)" 上面的负面逻辑。如果有人看到改进的余地，我完全愿意接受建议！

```
//****************************************************************************
//Function getCursor - Returns a cursor for the requested ObjectStore
//  objectStoreName  - Name of the Object Store / Table "MyOsName" 
//         callback  - Name of the function to call and pass the cursor 
//                     request back to upon completion.
//                     Ex. getCursor_("ObjectStore_Name", MyCallBackFunction);
//                     Function MyCallBackFunction(CursorRequestObj) { 
//                     CursorRequestObj.onsuccess = 
//                               function() {//do stuff here};
//                     }
//****************************************************************************
function getCursor_(objectStoreName, callback) {
  //The the openCursor call is asynchronous, so we must check to ensure a 
  // database connection has been established and then provide the cursor 
  // via callback. 
  if (ixDb) {
      var transaction = 
        ixDb.transaction(objectStoreName, IDBTransaction.READ_ONLY);
      var objectStore = transaction.objectStore(objectStoreName); 

      try{
        var request = objectStore.openCursor(); 
        callback(request);
        console.log('ixDbEz: Getting cursor request for ' 
                    + objectStoreName + ".");
      }
      catch(e){
        console.log('ixDbEz Error' + ' getCursor:(' 
                    + e.code + '): ' + e.message);
      } 
  }
  else { 
    if (ixDbRequest) {
      ixDbRequest.addEventListener ("success"
                    , function() { getCursor_(objectStoreName, callback); }
                    , false);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T07:24:43.537

将您的 addEventListener 行更改为：

```
ixDbRequest.addEventListener ("success", function() { getCursor_(objectStoreName) }, false); 
```

# javascript - 如何在没有类属性的情况下使用 Rangy.js 创建标签？

> ID：11641756
> 
> 赞同：2
> 
> 时间：2012-07-25T02:12:55.757
> 
> 标签：javascript, rangy

我一直在使用 Rangy.js 进行选择范围，到目前为止非常喜欢它。我希望将选择范围的文本节点包装在某个标签内，并在单击按钮时切换它。我使用 cssClassApplierModule 让它工作得很好，除了（并且由于名称而有意义）我还必须给 dom 元素一个它应用到自身的类。

所以现在当我选择一个范围并应用一个强标签时，我的最终结果是：

```
Text text text <strong class="test"> selected text </strong> text text text 
```

我希望它是：

```
Text text text <strong> selected text </strong> text text text 
```

我到目前为止的代码如下：

```
function gEBI(id) {
                return document.getElementById(id);
            }

            var action;

            function toggleAction() {
                action.toggleSelection();
            }

            rangy.init();

            // Enable buttons
            var cssClassApplierModule = rangy.modules.CssClassApplier;

            // Next line is pure paranoia: it will only return false if the browser has no support for ranges,
            // selections or TextRanges. Even IE 5 would pass this test.
            if (rangy.supported && cssClassApplierModule && cssClassApplierModule.supported) {
                action = rangy.createCssClassApplier("test", {
                    elementTagName: "strong",
                    elementProperties: { }
                });
                var toggleActionButton = gEBI(nsID);
                toggleActionButton.disabled = false;
                toggleActionButton.ontouchstart = toggleActionButton.onmousedown = function () {
                    toggleAction();
                    return false;
                };
            } 
```

我尝试使用 "" 和 null 而不是 "text" 作为传递的 css 类，它会切换，但不再关闭，显然不是正确的解决方案。

任何帮助表示赞赏.. 谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T08:33:20.670

不幸的是，Rangy 的 CSS 类应用程序不会让您这样做。根本问题是它依赖于 CSS 类来决定要包围或添加/删除类的元素和文本节点。检测一个类的存在要比检测一种风格的更一般的情况（例如粗体）要简单得多。

去年，我在一个更雄心勃勃的通用 execCommand 模块上做了一些工作，该模块可以满足您的需求。它达到了一个[工作演示](http://rangy.googlecode.com/svn/trunk/demos/commands.html)，但我陷入了棘手的边缘情况并停止了工作。我确实打算回到它，但可能需要几个月的时间才能准备好。

# django - 使用 apache wsgi 时 Django 管理员登录中断

> ID：11641759
> 
> 赞同：1
> 
> 时间：2012-07-25T02:13:14.373
> 
> 标签：django

我面临一个有趣的问题，当我通过 apache 中的 wsgi 访问我的应用程序时，我无法登录到我的应用程序的管理页面。

但是，当我尝试通过 django 开发服务器访问它时，它工作得很好。

我没有收到错误的登录警告，我只是看到被重定向到同一页面，就好像什么都没发生一样。输入错误的凭据确实会提示我输入了错误的凭据。

开发服务器和 apache 之间的唯一区别应该是我在创建 django 开发服务器时使用的是 virtualenv。

我已确保从 sys.path 中删除标准路径，并使其与调用虚拟 env 时相同。

我也没有在 apache 日志中看到任何内容。

谢谢！

# python - 使用金字塔框架进行搜索

> ID：11641762
> 
> 赞同：3
> 
> 时间：2012-07-25T02:13:43.960
> 
> 标签：python, full-text-search, sqlalchemy, pyramid

我正在尝试在我的网站中实现搜索功能，该网站在金字塔上运行，我想知道解决这个问题的最有效方法是什么。我目前正在使用 SqlAlchemy 研究[Whoosh](http://pieceofpy.com/blog/2011/08/05/hooking-up-whoosh-and-sqlalchemy-%28sawhoosh%29/)和[MySQL 全文搜索](http://wiki.pylonshq.com/display/pylonscookbook/MySQL+fulltext+search+in+SQLAlchemy+with+safe+query+parameters)。我需要一个快速简单的实现，并且想知道哪一个是最好的选择。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T08:24:46.597

我尝试将全文与本机数据库一起使用一段时间，但要保持跨 sqlite、mysql 和 pgsql 工作的工作量太大。我把所有的搜索代码都移植到了 whoosh 上，从那以后我真的很开心。它适用于小型工作负载，是纯 python，无需设置服务器。

您只需像在磁盘上写入和更新文件一样实现它。从我读到的内容来看，它在数百万份文档中表现良好。我将它与索引大小约为 100MB 的 18k 文档一起使用。使用它实现各种标记化和其他配置有很大的灵活性。我真的建议人们从那里开始，如果他们长大了，然后考虑使用 elasticsearch、lucene/solr 等启动额外的进程。

你可以在这里看到我是如何实现它的：

[https://github.com/mitechie/Bookie/blob/develop/bookie/models/fulltext.py](https://github.com/mitechie/Bookie/blob/develop/bookie/models/fulltext.py)

我使用 SqlAlchemy 事件挂钩更新它：

[https://github.com/mitechie/Bookie/blob/develop/bookie/models/__init__.py#L663](https://github.com/mitechie/Bookie/blob/develop/bookie/models/__init__.py#L663)

你可以通过搜索来判断它的基本实现：

[https://bmark.us/search](https://bmark.us/search)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T02:30:02.853

我是 ElasticSearch 的忠实粉丝。它是最容易设置、维护和使用的。

我通常使用请求。

索引：

```
requests.put("http://localhost:9200/myindex/category/",data=json.dumps(document)) 
```

寻找：

```
requests.get("http://localhost:9200/myindex/category/_search?q="+somequery) 
```

您可以使用 DSL 进行更深入的搜索：

[http://www.elasticsearch.org/guide/reference/query-dsl/](http://www.elasticsearch.org/guide/reference/query-dsl/)

# arrays - 谷歌地图 v3 重复标记 - 使用数组来管理标记，但仍然得到重复

> ID：11641770
> 
> 赞同：3
> 
> 时间：2012-07-25T02:14:53.523
> 
> 标签：arrays, google-maps, google-maps-markers

我不明白：我有一个数组来管理我添加到地图的标记。当我更新集合时，即使我的标记数组中仍然只有正确数量的标记，标记也会重复。

我确信这对我来说是一个非常简单和愚蠢的错误——但我没有看到它。

```
m.viewMarkers = function(data){
    //ajax call to get latLng, returns an object with 4 markers
    showMarkers();
}

function showMarkers(){
    g.currentMarkers = []; // setting up my marker array
    $.each(g.markersCollection, function(i,item){ // jquery-iterate over the object from the ajax call
        g.currentMarkers.push( // adding markers to the array but purposely not drawing them on the map just yet
            new google.maps.Marker({
                position    : new google.maps.LatLng(item.lat, item.lng)
            });
        );
    });
$.each(g.currentMarkers, function(i,item){
    if( g.map.getBounds().contains( item.getPosition() ) ){ // checking if this marker is within the viewport
        item.setMap(g.map);
    }
    else {
        item.setMap(null); // i don't want to have invisible markers slowing down my map
    }
});
console.log(g.currentMarkers.length); // tells me it's 4, just as expected
}

google.maps.event.addListener(g.map, 'dragend', function() {
    m.viewMarkers();
}); 
```

对我来说，这看起来一切都很好，但地图不断在每个`dragend`.... eeek 上绘制 4 个新标记！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T08:49:36.673

将您的`showMarkers()`功能修改为：

```
function showMarkers(){
    //Removing old markers from the Map,if they are exist
    if(g.currentMarkers && g.currentMarkers.length !== 0){            
        $.each(g.currentMarkers, function(i,item){
            item.setMap(null);
        });
    }
    g.currentMarkers = []; // setting up my marker array
    $.each(g.markersCollection, function(i,item){ 
           var expectedPosition = new google.maps.LatLng(item.lat, item.lng);
           //No need to add marker on the Map if it will not visible on viewport, 
           //so we check the position, before adding 
           if(g.map.getBounds().contains(expectedPosition)){
                g.currentMarkers.push(new google.maps.Marker({ 
                    position : expectedPosition 
                }) );
           }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-17T12:43:24.137

您还可以使用以下代码将新标记与存储的标记进行比较（以显示存储的标记而不是新的响应标记）：

```
var latlng1,latlng2;
for (var i=0; i< storedmarker.length; i++){
    //Removing old markers from the Map,if they are exist with storedmarkers
    latlng1 = storedmarker[i].getPosition();
    for (var j=0; j< newmarkers.length; j++) {
      latlng2 = newmarkers[j].getPosition();
      if(latlng1.equals(latlng2)){
        newmarkers[j].setMap(null);
      }
    }

    //Set Marker
    storedmarker[i].setMap(map);
} 
```

# ios - 在沙盒中关闭 iOS 设备上的自动续订订阅

> ID：11641774
> 
> 赞同：12
> 
> 时间：2012-07-25T02:15:09.850
> 
> 标签：ios, sandbox, auto-renewing

我已经在沙盒环境中成功设置并测试了应用内购买。但我有一个问题：

*   在实际的应用内购买中，我可以通过以下链接在 iOS 设备上关闭自动续订订阅[http://support.apple.com/kb/HT4098?viewlocale=en_US&locale=en_US](http://support.apple.com/kb/HT4098?viewlocale=en_US&locale=en_US)

*   我想知道如何在沙盒环境中做同样的事情。我以为我们必须登录 App Store 才能关闭自动续订订阅，但测试用户帐户无法登录 App Store。所以我认为我们不能在沙盒环境中关闭自动更新订阅。

*   如果是这样，我还需要一个简单的解释，为什么我们不能。

*   感谢您的阅读，任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-24T16:03:32.140

是的。这也是我的经验：测试用户无法访问设置页面来管理手机中的订阅。我认为 Apple 只是没有打扰编程，因为知道沙盒订阅无论如何都会在重复五次后取消。自动取消可能是您测试用户通过 App Store 取消的场景的方法。

# python - 无法导入名称 util

> ID：11641777
> 
> 赞同：1
> 
> 时间：2012-07-25T02:15:22.480
> 
> 标签：python, sqlalchemy

我正在尝试使用 SQLAlchemy。但是我无法将它导入到我的 python 脚本中。

我已经激活了 python 控制台并输入了“import sqlalchemy”，它抛出了我和错误，如下所示。

```
>>>import sqlalchemy
File "/usr/local/lib/python2.7/dist-packages/SQLAlchemy-0.7.8-py2.7.egg/sqlalchemy/schema.py", line 31, in <module>
from sqlalchemy import exc, util, dialects
ImportError: cannot import name util 
```

如果有人克服了这个问题与我分享，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-15T11:54:32.997

我的回答大多与原始问题和情况无关，但是在搜索错误消息时，这个线程作为第一个问题出现，它是一个解决这个问题的皮塔，所以我不妨用 Pyramid 和 SQLAlchemy 添加我的案例：

与 Pyramid 一起使用时，我遇到了同样的错误（“ImportError: cannot import name util”）。经过数小时的反复试验，唯一的原因是我在 production.ini 中设置了：

```
[server:main]
use = egg:waitress#main
host = 0.0.0.0
port = 80 
```

我还在端口 80 上使用 Apache2，这似乎很奇怪，这应该是相同的。将端口更改为例如 6543 后，错误消失并且 WSGI 服务器正常工作。没有必要的 apache2 设置（WSGIPythonHome、WSGIPythonPath）。

显然不相关，我不知道为什么端口冲突会导致此错误，但它可能会帮助其他人解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T02:58:51.163

util 在 sqlalchemy.orm 下，所以`from sqlalchemy.orm import util`应该可以工作

# javascript - 如何改善 Web 应用的浏览器垃圾回收阶段？

> ID：11641778
> 
> 赞同：1
> 
> 时间：2012-07-25T02:15:24.983
> 
> 标签：javascript, performance, browser, garbage-collection

我已经优化了我的 php/javascript 网络应用程序，使其速度相当快，但是使用谷歌速度跟踪器进行的分析显示了 230 毫秒的垃圾收集阶段。它是什么，与速度跟踪器结果有关，以及改进它的一些指导方针是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:17:07.980

如果您保留对象，那么垃圾收集阶段至少会被延迟，页面已经呈现等。如果您的Javascript代码中出于某种原因您正在腾出对象，分配对象，浏览器将执行垃圾收集为空，或替换对象。

# file - bash 从文件中永久删除一行

> ID：11641780
> 
> 赞同：4
> 
> 时间：2012-07-25T02:15:37.970
> 
> 标签：file, sed, line

我有以下代码用于在文件中查找字符串，然后删除包含该字符串的行。

```
echo `sed  /$string/d  file.txt` > file.txt 
```

问题是，如果最初 file.txt 包含：

```
a
b
c 
```

删除 "a" (string=a) file.txt 后将变为

```
b c 
```

代替

```
b
c 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T02:20:48.333

这是因为反引号。改为这样做：

```
sed -i /$string/d  file.txt 
```

请注意，如果您想就地执行此操作，您需要使用`-i`to `sed`as`>`将销毁文件，然后`sed`才能读取它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T02:22:08.433

您不需要`echo`包装，只需尝试：

```
sed -i '/a/d' file.txt 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T02:23:31.460

您需要引用命令的输出：

回声 -n " `sed /$string/d file.txt`" > 文件.txt

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T02:34:10.703

sed 有一个就地编辑选项。在你的场景中使用它更合适。例如

```
sed -i /$string/d file.txt 
```

对于您的情况，由于 `` 的输出没有用双引号引起来，因此通过 bash 完成了分词。并且换行符被删除。要在这种情况下使用 echo，请执行以下操作：

```
echo "`sed  /$string/d  file.txt`" > file.txt 
```

# c++ - 错误：“calcOpticalFlowPyrLK”不是“cv”的成员 - OpenCV 2.4.2

> ID：11641785
> 
> 赞同：0
> 
> 时间：2012-07-25T02:16:54.750
> 
> 标签：c++, opencv, g++, ubuntu-11.10

我在 OpenCV 2.4.2 上遇到了这个错误。

我正在使用这行代码：

```
 cv::calcOpticalFlowPyrLK(prev, next, prev_pts, next_pts, status, error); 
```

并在编译时显示此错误：

```
testopticalflow.cpp:75:4: error: ‘calcOpticalFlowPyrLK’ is not a member of ‘cv’ 
```

这是我使用 pkg-config 的结果

```
pkg-config opencv --libs
/usr/local/lib/libopencv_calib3d.so /usr/local/lib/libopencv_contrib.so /usr/local/lib/libopencv_core.so /usr/local/lib/libopencv_features2d.so /usr/local/lib/libopencv_flann.so /usr/local/lib/libopencv_gpu.so /usr/local/lib/libopencv_highgui.so /usr/local/lib/libopencv_imgproc.so /usr/local/lib/libopencv_legacy.so /usr/local/lib/libopencv_ml.so /usr/local/lib/libopencv_nonfree.so /usr/local/lib/libopencv_objdetect.so /usr/local/lib/libopencv_photo.so /usr/local/lib/libopencv_stitching.so /usr/local/lib/libopencv_ts.so /usr/local/lib/libopencv_video.so /usr/local/lib/libopencv_videostab.so 
```

抱歉，在 Linux 环境方面我还是个新手，所以我不知道我哪里出错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T02:23:23.060

对不起，愚蠢的错误。我忘记将其添加为标题：

```
#include <opencv2/video/tracking.hpp> 
```

# android - 从通知栏打开时的两个活动实例

> ID：11641787
> 
> 赞同：3
> 
> 时间：2012-07-25T02:17:01.133
> 
> 标签：android, android-activity, notifications

1.从通知栏打开 2.按home 返回desttop 3.从应用图标打开

问题：2个SampleTabsDefault实例，需要退出两次。

```
 Intent intent = new Intent(_context, SampleTabsDefault.class);
    intent.setFlags(/*Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP |*/ Intent.FLAG_ACTIVITY_NEW_TASK);
    PendingIntent activity = PendingIntent.getActivity(_context, 0, intent, 0);
    notification.contentIntent = activity; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-11-26T12:09:58.757

使用以下方法传递通知生成器的内容意图

```
private  PendingIntent getEmptyPendingIntent(Context context) {
    Intent resultIntent = new Intent(context, InitializationActivity.class);
    resultIntent.setAction(Long.toString(System.currentTimeMillis())); //adding unique identification for each intent
    resultIntent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
    resultIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    TaskStackBuilder stackBuilder = TaskStackBuilder.create(context);
    stackBuilder.addParentStack(InitializationActivity.class);
    stackBuilder.addNextIntent(resultIntent);
    stackBuilder.getIntentCount();
    PendingIntent resultPendingIntent =
            stackBuilder.getPendingIntent(0, PendingIntent.FLAG_UPDATE_CURRENT);

    return resultPendingIntent;
} 
```

使用以下方法发送通知

```
private void sendNotification(String title, String message) {
    Intent intent = new Intent(this, InitializationActivity.class);
    intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    String desc = "";
    if (!TextUtils.isEmpty(message)) {
        try {
            JSONObject jsonObject = new JSONObject(message);
            desc = jsonObject.optString("payload");
                        } catch (JSONException e) {
            e.printStackTrace();
        }
    }
    PendingIntent pendingIntent = PendingIntent.getActivity(this, 0 , intent,
            PendingIntent.FLAG_ONE_SHOT);
    Uri defaultSoundUri= RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
    NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(this)
            .setSmallIcon(R.mipmap.ic_launcher)getResources().getDrawable(R.drawable.notify_large)).getBitmap())
            .setContentTitle(title)
            .setContentText(desc)
            .setAutoCancel(true)
            .setSound(defaultSoundUri)
            .setContentIntent(getEmptyPendingIntent(this));

    NotificationManager notificationManager =
            (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);

    notificationManager.notify(0, notificationBuilder.build());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T03:03:42.890

在您的活动节点中尝试 AndroidMenifest.xml 文件中的以下代码。

```
<activity name="SampleTabsDefault"
android:clearTaskOnLaunch="true"
android:finishOnTaskLaunch="true"
>
.....
</activity> 
```

[请在此处](http://developer.android.com/guide/topics/manifest/activity-element.html)阅读这两个属性说明。

希望这能解决你的问题

# asp.net - AD LDS 自动标志

> ID：11641791
> 
> 赞同：1
> 
> 时间：2012-07-25T02:18:01.817
> 
> 标签：asp.net, adfs, adlds

我们有 asp.net web 应用程序，如果用户通过内网访问该网站，我们需要支持使用域凭据（Windows 主体）“自动登录”，或者如果通过 HTTPS 通过外部网络访问，我们将提示用户输入域凭据。

问题是这个 web 服务器（windows server 2008）是一个工作组机器，它在 DMZ 中。我被告知研究 AD LDS + AD FS 以在有限的时间内实现这一点，无论是否可以同时支持域凭据 SSO（内部和外部）和 Intranet 域用户的自动登录。

当我阅读论坛中的相关文档和讨论时，我了解此设置可以实现 SSO，但是我无法确定也无法找到有关在此环境下“自动签名”内网域用户的相关材料。

如果可能或是否有替代方法，任何人都可以请教。主要的是我们希望避免将现有的 Web 服务器加入域。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:31:58.897

ADFS 将为您提供所需的一切。您需要修改应用程序以支持声明（查找 WIF - Windows Identity Framework）。ADFS 将安装在您的域环境中，然后您将 ASP.Net 应用程序配置为 ADFS 中的依赖方应用程序。

我认为 AD LDS 在这里对你没有任何用处。

# zsh - 在 Z shell 脚本中执行 gcc 时出错

> ID：11641793
> 
> 赞同：1
> 
> 时间：2012-07-25T02:18:33.150
> 
> 标签：zsh

如果我运行此脚本：（注意：已编辑以反映答案 1）

```
#!/usr/bin/env zsh

setopt shwordsplit

if [[ -f $1 ]]
then
   echo "will compile $1"
else
  echo "ERROR: $1 NOT found"
  exit 1
fi

gcc_options="  -c -std=c99 -Wall -Wextra  "

echo "gcc_options: ${gcc_options}"

gcc " ${=gcc_options} " " ${=1} "

if [[ $? -eq 0 ]]
then
   echo "gcc compile worked"
else
   echo "error in gcc compile"
fi

gcc "${=gcc_options}" "${=1}"

if [[ $? -eq 0 ]]
then
   echo "gcc compile worked"
else
   echo "error in gcc compile"
fi 
```

两个编译都失败了。

输出是：

* * *

将编译 my_file.c
gcc_options: -c -std=c99 -Wall -Wextra
gcc: 错误: : 没有这样的文件或目录
gcc: 错误: : 没有这样的文件或目录
gcc: 错误: my_file.c : 没有这样的文件或目录
gcc：致命错误：没有输入文件编译终止。
gcc 编译
错误 gcc: error: : No such file or directory
gcc: error: : No such file or directory
错误 gcc 编译

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T02:34:04.740

第一个变化：

```
gcc " $gcc_options $1" 
```

至：

```
gcc "$gcc_options" "$1" 
```

如果其中一些变量包含多个单词，您可能需要打开`shwordsplit`（参见[此处](http://google-code-prettify.googlecode.com/files/prettify-1-Jun-2011.tar.bz2)），这也可以在每个变量的基础上完成（`${=VAR}`）。

```
gcc "${=gcc_options}" "${=1}" 
```

### 更新

我犯了一个错误，你肯定不想要引号`$gcc_options`，所以它可能应该是`${=gcc_options}`。是否需要引用`$1`取决于是否`$1`包含空格。所以这应该这样做：

```
gcc ${=gcc_options} $1 
```

# iphone - 从 NSMutableArray 中删除 //

> ID：11641796
> 
> 赞同：1
> 
> 时间：2012-07-25T02:18:51.987
> 
> 标签：iphone, objective-c, json, ipad, nsmutablearray

当我 NSLog NSMutableArray 的内容时，我得到空值。我相信我知道问题是什么。

我在试图弄清楚如何在这个 JSON 输出的开头删除“//”时遇到了一些麻烦。如果您将[http://www.google.com/finance/info?infotype=infoquoteall&q=AAPL,C](http://www.google.com/finance/info?infotype=infoquoteall&q=AAPL,C)加载到浏览器中，您会在开头看到“//”。我相信“//”是导致数组返回 null 的原因。我怎么能去删除两个破折号？以下是我到目前为止所做的事情......

```
NSString *url = @"http://www.google.com/finance/info?infotype=infoquoteall&q=C,JPM,AIG,AAPL";

NSData* data = [NSData dataWithContentsOfURL: 
            [NSURL URLWithString: url]];

//parse out the json data
NSError* error;
NSMutableArray* json = [NSJSONSerialization 
                  JSONObjectWithData:data //1

                  options:kNilOptions 
                  error:&error];

NSLog(@"json is %@", json); //returns "json is (null)" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T02:36:01.157

你可以试试这个：

```
NSData *newData = [data subdataWithRange:NSMakeRange(4, [data length] -4)]; 
```

这摆脱了前四个字符。在第一个“[”之前有一个控制字符，两个斜杠和一个空格，这消除了那些。我试过这个，但数据仍然存在缺陷。

# c++ - C++ 正则表达式无效字符（冒号）

> ID：11641797
> 
> 赞同：2
> 
> 时间：2012-07-25T02:18:52.970
> 
> 标签：c++, regex, character, colon

我有这行代码

```
regex rgx("([A-Z0-9#\:])"); 
```

它一直告诉我我的冒号是无效字符。不管我逃不逃。有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T07:15:17.523

您需要使用*两个*反斜杠，如在 C++（以及 C）中，一个反斜杠用于引入特殊字符（例如，换行符为`"\n"`）。

尝试：

```
regex rgx("([A-Z0-9#\\:])"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T02:22:04.170

您正在尝试**转义**在字符类之外没有特殊含义的冒号字符。

也许你也应该关闭你的角色课程？

```
"[A-Z0-9#\:]" 
```

# ruby-on-rails - Squeel 将字符串评估为连接的关键路径

> ID：11641802
> 
> 赞同：2
> 
> 时间：2012-07-25T02:19:57.280
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, closures, squeel

这是我真正想做的事情：

```
Outage.joins{eval "unit.plant"} 
```

我将有**一个**代表**squeel keypath**的字符串。我想将此字符串发送到连接语句中。

但这是我得到的错误：

```
#<Class:0x639e328>: unknown class: Squeel::Nodes::Function 
```

我试过了：

```
Outage.joins{"unit.plant"} 
```

但这不起作用......我错过了什么？

我在 github 页面上没有看到任何关于此的文档：[https ://github.com/ernie/squeel/](https://github.com/ernie/squeel/)

感谢您的任何帮助！

**更新：** 我发现了一种非常令人困惑的方法来解决这个问题：

```
("unit.plant".split ".").map{ |x| x.to_sym }.reverse.inject{ |acc, x| { x => acc } } 
```

这将输出：

```
{:unit=>:plant} 
```

这可以传递给joins squeel函数。我确信必须有比构造嵌套符号更好的方法:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T03:06:43.483

怎么样

```
Outage.joins{Squeel::Nodes::KeyPath.new("unit.plant".split("."))} 
```

*来源：[KeyPath 文档](https://github.com/ernie/squeel/blob/master/lib/squeel/nodes/key_path.rb#L21)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T17:10:35.460

替代解决方案，它可以与外部/内部链接：

```
strs = "unit.plant"
Outage.joins{strs.split(".").inject((strs.present? ? self : nil), :__send__)}

# chain with inner
# Outage.joins{strs.split(".").inject((strs.present? ? self : nil), :__send__).inner} 
```

# vb.net - 将数据写入 excel 工作表（VB.NET）中的下一列（这段代码有什么问题？）

> ID：11641803
> 
> 赞同：0
> 
> 时间：2012-07-25T02:20:00.397
> 
> 标签：vb.net, excel, loops

如何使用 VB.NET 进行以下操作，1\. 将复选框文本写入 excel 表中的列 2\. 清除新用户条目的复选框 3\. 将新用户条目写入下一列

我尝试了以下代码，但在写完第一列后，程序挂起。它没有显示任何异常。它有什么问题？

```
Dim xl As New Excel.Application
Dim wb As Excel.Workbook
Dim st As Excel.Worksheet

wb = xl.Workbooks.Open("F:\open.xlsx")
st = wb.Worksheets(1)
Dim j As Integer

For j = 0 To 2
While j

If CheckBox1.Checked Then
st.Cells(1, j + 1).value = "1"
Else : st.Cells(1, j + 1).value = "N/A"
End If

If CheckBox2.Checked Then
st.Cells(2, j + 1).value = "1"
Else : st.Cells(2, j + 1).value = "N/A"
End If

If CheckBox3.Checked Then
st.Cells(3, j + 1).value = "1"
Else : st.Cells(3, j + 1).value = "N/A"
End If

CheckBox1.Checked() = False
CheckBox2.Checked() = False
CheckBox3.Checked() = False
ComboBox1.ResetText()

End While
Next

wb.Save()
xl.Quit()
xl = Nothing
wb = Nothing
st = Nothing 
```

帮助将不胜感激。在过去 2 小时内无法执行此操作。随函附上所需结果表

谢谢

![在此处输入图像描述](../Images/3939b31245bdcf15bfe467ef9c10ebb8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T03:42:43.107

你写了一个永无止境的循环。

看看这些行：

```
For j = 0 To 2
While j
'Other code
End While
Next 
```

当 j = 0 时，您的代码应该跳过 while，但一旦 j = 1，它将无限期地重复 while 循环。我建议删除`while j`并`End while`查看它是否按预期工作。

# c++ - C++ 中的模板参数继承

> ID：11641804
> 
> 赞同：1
> 
> 时间：2012-07-25T02:20:03.127
> 
> 标签：c++, templates, inheritance, polymorphism

我有一段时间没有写 C++，所以我有点生疏了。如果我有这样的课程：

```
class JsonType{
    protected:
        map<string, JsonType>* objects;
} 
```

和一个继承自它的类：

```
class JsonObject : public JsonType{
    public:
        JsonObject(){
            this->objects = new map<string, JsonObject>();
        }
} 
```

为什么我会收到编译器错误`cannot convert...JsonObject...to...JsonType`？这不应该是合法的，因为 JsonObject 是 JsonType 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T02:25:19.537

您可以将 JsonObject 对象添加到地图中，但类型与初始化不匹配。

编辑：您必须将其初始化为：

```
this->objects = new map<string, JsonType>(); 
```

但是，如果您有任何一个对象：

```
JsonType js = new JsonType(); 
```

或者

```
JsonObject js2 = new JsonObject(); 
```

或者

```
JsonType js3 = new JsonObject(); 
```

您可以将这些对象中的任何一个添加到如上所述初始化的地图中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T02:27:25.897

`objects`不使用`JsonObject`它`value_type`，它使用`JsonType`s。

换句话说，您分配了错误的类型`map`来存储到`objects`.

# struts2 - struts 2 - 未映射动作类

> ID：11641810
> 
> 赞同：0
> 
> 时间：2012-07-25T02:21:11.003
> 
> 标签：struts2

我开始研究struts 2。我按照[这里](http://www.tutorialspoint.com/struts_2/struts_examples.htm)的例子。

**struts.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
   "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
   "http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>
<constant name="struts.devMode" value="true" />
   <package extends="struts-default">
      <action name="hello" 
            class="com.tutorialspoint.struts2.HelloWorldAction" 
            method="execute">
            <result name="success">/HelloWorld.jsp</result>
      </action>
   </package>
</struts> 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
    <display-name>HelloWorld3</display-name>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
        <welcome-file>index.htm</welcome-file>
        <welcome-file>index.jsp</welcome-file>
        <welcome-file>default.html</welcome-file>
        <welcome-file>default.htm</welcome-file>
        <welcome-file>default.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

**索引.jsp**

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
   pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="s" uri="/struts-tags"%>
   <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Hello World</title>
</head>
<body>
   <h1>Struts2</h1>
   <form action="hello">
      <label for="name">Please enter your name</label><br/>
      <input type="text" name="name"/>
      <input type="submit" value="Say Hello"/>
   </form>
</body>
</html> 
```

**HelloWorldAction.java**

```
package com.tutorialspoint.struts2;

public class HelloWorldAction{
   private String name;

   public String execute() throws Exception {
      return "success";
   }

   public String getName() {
      return name;
   }

   public void setName(String name) {
      this.name = name;
   }
} 
```

但是运行并提交表单后，出现404错误。

`type: Status report`

`message: /HelloWorld3/hello`

`description:The requested resource (/HelloWorld3/hello) is not available.`

它不会在控制台中产生任何错误。我认为动作类没有被映射。我知道这种错误对所有 struts 初学者来说都很常见，但我发誓我从昨天开始就一直在用谷歌搜索。

struts.xml 在 /src/ 里面，我也试过把它放在 WEB-INF/classes 里面，还是没有运气。

我在里面使用了eclipse gallileo和tomcat 6。

非常感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:00:35.143

我的不好，刚刚意识到与教程中的`web.xml`不一样。`web.xml`我也忘了在`struts.xml`. 更正这些后，我在控制台中遇到了错误，

`java.lang.NoClassDefFoundError: org/apache/commons/lang3/StringUtils`

为了解决这个问题，我`commons-lang3-x.y`在`WEB-INF/lib`目录中添加了教程需要添加的其他jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T13:47:30.860

添加`commons-lang3.x.y.z jar`和`commons-fileupload-x.y.z jar`您的`buildpath`以避免`'resource not available'`错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T02:25:05.150

你的类可以扩展 ActionSupport 类或 Action 接口，那么只有它会成为一个动作类。并且不需要显式调用方法execute，默认会调用execute方法。如果您要覆盖它，则需要提及该方法名称。

并且不是强制使用 ActionSupport 类。这基本上是一个帮助类，它为您提供了许多开箱即用的功能，但同时 Struts2 框架不要求使用这个类，它只需要一个返回类型为 String 的动作类的入口方法，它可以抛出一般异常

**除了验证或国际化之外，该类还提供了许多其他功能，例如操作级别错误等。**

```
<action name="hello" 
            class="com.tutorialspoint.struts2.HelloWorldAction">

    package com.tutorialspoint.struts2;

    public class HelloWorldAction extends ActionSupport{
       private String name;

       public String execute() throws Exception {
          return "success";
       }

       public String getName() {
          return name;
       }

       public void setName(String name) {
          this.name = name;
       }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T13:30:11.407

[http://viralpatel.net/blogs/tutorial-create-struts-2-application-eclipse-example/](http://viralpatel.net/blogs/tutorial-create-struts-2-application-eclipse-example/)

您可以获得带有 jar 文件的 Simple Struts 2 Example Demo。

# android - Android EditText 中的文本在 WebView 中变成垃圾字符

> ID：11641811
> 
> 赞同：2
> 
> 时间：2012-07-25T02:21:14.237
> 
> 标签：android, html, encoding, android-edittext

我将在 EditText 中获取文本，然后在 WebView 中显示文本。以下代码适用于 ASCII 字符。对于非 ASCII 字符，WebView 中的文本变为乱码。

```
String input = mEditText.getText().toString();
String html = makeHTML(input); // append HTML elements and headers including MIME and ENCODING header
mWebView.loadData(html, "text/html", "utf-8"); 
```

我以为我的 HTML 做错了什么，所以我尝试直接在 WebView 中显示文本而不修改文本。然而，结果是一样的。

```
String input = mEditText.getText().toString();
mWebView.loadData(input, "text/html", "utf-8"); 
```

其中在 EditText`makeText()`中`Toast`显示非 ASCII 文本没有任何问题。

有人知道答案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T03:40:47.817

WebView 可能无法加载某些“不安全”的 HTML 字符。尝试使用：

```
String input = mEditText.getText().toString();
String html = makeHTML(input);
String encodedHtml = URLEncoder.encode(html,"UTF-8");
mWebView.loadData(encodedHtml, "text/html", "utf-8"); 
```

URLEncoder.decode(encodedHtml,"UTF-8") 方法也可能有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T10:24:37.047

最后，我通过使用解决了这个`loadDataWithBaseURL(baseUrl, data, mimeType, encoding, historyUrl)`问题`WebView`

```
mWebView.loadData(data, mimeType, encoding)

mWebView.loadDataWithBaseURL("", data, mimeType, encoding, "") 
```

似乎相同，但实际上并非如此。

就我而言，`loadData()`未能正确编码字符并且无法加载保存在`asset`文件夹中的图像。

# sql - 单个 SQL 查询中的多个 AVG

> ID：11641812
> 
> 赞同：0
> 
> 时间：2012-07-25T02:21:15.330
> 
> 标签：sql, average, multiple-conditions

我搜索了添加多个 AVG 计算并找到了一些条目，但是我不得不加入另一个表，而且这样的例子很少。

我能找到的最接近的答案是[这个](https://stackoverflow.com/questions/9462873/basic-sql-selecting-avg-values-from-the-same-column-multiple-times-in-one-qu) ，但它处理日期并且没有连接

这是我的桌子：

指标：

```
StandardScore             IndicatorID      NID    DID
0.033333                  7                1      1
0.907723                  9                1      1
0.574739                  26               1      1
0.917391                  21               1      1
..... 
```

指数指标：

```
IndexID                   IndicatorID
1                         7
1                         26
2                         21
3                         7
4                         9
4                         21
4                         7
5                         9
....... 
```

我的目标是获得与 NID/DID（指标）组合相关的每个 IndexID（指标指标）的平均值

检索单个值的查询将是

```
SELECT AVG(StandardScore) FROM `indicators` INNER JOIN indexindicators ON indicators.IndicatorId=indexindicators.IndicatorId WHERE nid=1 AND did=1 AND indexindicators.IndexId=1 
```

最终将有 6 个（indexID）平均值，然后必须将其四舍五入，然后 * 乘以 100（我应该用 PHP 做那部分吗？）

这似乎是一个如此简单的查询，但我似乎无法全神贯注。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T07:58:17.307

```
SELECT nid, did, indexid, 100.0 * AVG(StandardScore) 
    FROM 'indicators'
    INNER JOIN 'indexindicators'
      ON indicators.IndicatorId=indexindicators.IndicatorId 
group by nid, did, indexid 
```

# ios - iOS：自定义 segue 和 presentViewController 未按预期工作

> ID：11641814
> 
> 赞同：1
> 
> 时间：2012-07-25T02:21:23.907
> 
> 标签：ios, segue

我正在使用如下所示的自定义 segue：

@implementation ModalPushSegue

```
- (void)perform {
    UIViewController *fromController = self.sourceViewController;
    UIViewController *toController = self.destinationViewController;
    UIView *fromView = fromController.view; 
    UIView *toView = toController.view; 

    CGPoint centerStage = toView.centerStage;
    toView.center = toView.rightStage;

    [fromView.window addSubview:toView];
    [fromController addChildViewController:toController];

    [UIView transitionWithView:toView 
                      duration:0.5 options:0
                    animations:^{
                        toView.center = centerStage;
                    }
                    completion:nil];

} 
```

这很好，因为视图按预期从右侧滑动，并且控制器被添加到控制器层次结构中。

但后来在添加的控制器中我这样做：

```
[self presentViewController:anotherController animated:YES completion:nil]; 
```

我希望这会将新控制器的视图向上滑动到屏幕 ala 模态样式。但是发生的事情是新视图没有出现。当我稍后移除这个控制器时，它的视图会闪烁并滑出屏幕，留下黑色背景而不是原来的视图。

我已经玩了一段时间了，如果我将代码更改为

```
//[self presentViewController:oauthController animated:YES completion:nil];
[self.view addSubview:oauthController.view];
[self addChildViewController:oauthController]; 
```

然后视图按预期显示，但未调整大小。

我的问题似乎与 segues 设置层次结构的方式与`presentViewController`做事的方式有关。我已经做了很多阅读和搜索，但到目前为止还无法清楚地了解正在发生的事情。

我也玩过在`presentViewController`segue 中使用，但不是将新视图放在旧视图上，而是屏幕变黑，然后新视图滑动。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-18T10:04:07.467

在目标视图控制器（在故事板中）上设置故事板 ID，然后尝试以下代码：

```
AnotherController *viewC = [self.storyboard instantiateViewControllerWithIdentifier:@"AnotherController"]; 
ModalPushSegue    *segue = [[ZHCustomSegue alloc] initWithIdentifier:@"coolSegueName" source:self destination:viewC];

[segue perform]; 
```

# actionscript-3 - 自定义 CellRenderer 在嵌入 TileList 时会失去其样式

> ID：11641815
> 
> 赞同：0
> 
> 时间：2012-07-25T02:21:45.327
> 
> 标签：actionscript-3

我已经定义了一个带有一些标签、文本输入和按钮的渲染器，并在创建它时调用“setStyle”来设置它们的颜色和字体。

如果我在一些普通面板中添加渲染器，则样式效果很好。

如果我把它放在 TileList 对象中，样式将会丢失

像这样的代码：

```
 public class MyRenderer extends UIComponent implements ICellRenderer
    {
        public function MyRenderer()
        {
            private var m_label = new Label();
            m_label.setStyle("textFormat", someTextFormat);
            addChild(m_label);
        }
    }

    var m_tileList:TileList = new TileList();
    m_tileList.setStyle("cellRenderer", MyRenderer)
    m_tileList.addItem({});//the renderer showed but the "someTextFormat" lose 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T02:48:23.573

自从 Adob​​e 推出 CS 6 以来，查找有关如何使用 fl.controls 组件的信息肯定会更加困难。有关如何将 stules 与它们一起使用的信息在[这里](http://help.adobe.com/en_US/ActionScript/3.0_UsingComponentsAS3/WS5b3ccc516d4fbf351e63e3d118a9c65b32-7f5b.html)。

尝试类似的东西

```
StyleManager.setComponentStyle(MyRenderer, "textFormat", someTextFormat); 
```

# facebook - 对象类型“地点”不能附加到自定义操作

> ID：11641817
> 
> 赞同：3
> 
> 时间：2012-07-25T02:21:55.090
> 
> 标签：facebook, facebook-graph-api

当我尝试将对象类型“地点”附加到“共享”时，出现错误：

“抱歉，位置已预留，无法使用。请尝试更具描述性的内容。”

与根本无法添加为对象 ID 的“图像”不同，地点似乎是默认项。

这是一个错误吗？

# c++ - C++ 子类上的 Bison 类型冲突

> ID：11641818
> 
> 赞同：1
> 
> 时间：2012-07-25T02:22:00.923
> 
> 标签：c++, bison

所以我在野牛中遇到类型冲突，形式为

```
warning: type clash on default action: <stmt> != <expr> 
```

因为我有一个像

```
%type <stmt> Stmt
%type <expr> Expr
...
Stmt : Expr    /* empty */
     | Otherstuff {do other stuff.....}
     ; 
```

我想知道是否有办法摆脱这些错误，因为 Expr 是 Stmt 的子类（我使用的是 c++），但有额外的功能，所以只需放入

```
%type <stmt> Stmt Expr 
```

不会工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T03:16:10.400

简单的方法是：

```
Stmt : Expr         {$$ =  $1;} // This is the same as default action 
```

# php - PHP array_merge 键顺序

> ID：11641822
> 
> 赞同：4
> 
> 时间：2012-07-25T02:22:08.857
> 
> 标签：php, arrays, array-merge

执行array_merge的数组数组中的键的顺序是否重要，即下面第二个数组中的键是否会覆盖第一个数组中的键：

```
array1 = array('username' => 'abc', 'level' => 'admin', 'status' => 'active');
array2 = array('level' => 'root', 'status' => 'active', 'username' => 'bcd'); 
```

? 还是两个数组中键的顺序必须相同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T02:26:02.860

[手册](http://php.net/array_merge)说明了这个问题的答案：

> 将一个或多个数组的元素合并在一起，以便将一个数组的值附加到前一个数组的末尾。它返回结果数组。
> 
> **如果输入数组具有相同的字符串键，则该键的后一个值将覆盖前一个。**但是，如果数组包含数字键，则后面的值不会覆盖原始值，而是会被追加。

所以，是的，如果第二个数组包含一些相同的键，第二个数组中的键将覆盖第一个数组中的键。

```
$array1 = array('username' => 'abc', 'level' => 'admin', 'status' => 'active');
$array2 = array('level' => 'root', 'status' => 'active', 'username' => 'bcd');

$new = array_merge($array1, $array2);

print_r($new); 
```

输出：

```
Array
(
    [username] => bcd
    [level] => root
    [status] => active
) 
```

所以你可以看到第二个数组中的键覆盖了第一个数组中的相同键；每个数组中键的顺序无关紧要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-27T15:37:03.820

这是一个替代解决方案，它允许使用模板数组来定义输出顺序。缺少的字段用`null`或按指定填充。在此示例中，`first`和`last`字段用 填充`---`。

请注意上一个关于数字键的答案中突出显示的文本。

```
function array_merge_template($array1, $array2, $template, $fill=null) {
    $_template = array_fill_keys($template, $fill);
    return array_intersect_key ( array_replace ( $_template, array_merge($array1, $array2)) , $_template);
} 
```

输入：

```
$array1 = ['username' =>'abc', 'level' =>'admin', 'status' =>'active', 'foo'=>'x'];
$array2 = ['level' =>'root', 'status' =>'active', 'username' =>'bcd', 'bar'=>'y'];
$template = ['first','level','foo','username','bar','status','last']; 
```

输出：

```
/* array_merge($array1,$array2) */
[
    "username" =>  "bcd",
    "level"    =>  "root",
    "status"   =>  "active",
    "foo"      =>  "x",
    "bar"      =>  "y"
]

/* array_merge_template($array1,$array2,$template,'---') */
[
    "first"    =>  "---",
    "level"    =>  "root",
    "foo"      =>  "x",
    "username" =>  "bcd",
    "bar"      =>  "y",
    "status"   =>  "active",
    "last"     =>  "---"
] 
```

# salesforce - BizTalk Server 和 SalesForce - INVALID_SESSION_ID：在 SessionHeader 中找到无效的会话 ID：非法会话

> ID：11641826
> 
> 赞同：1
> 
> 时间：2012-07-25T02:22:38.917
> 
> 标签：salesforce, biztalk

我正在研究 SalesForce 和 BizTalk Server 2010 之间的集成方案。我已阅读以下博客

[http://seroter.wordpress.com/2009/10/11/orchestrating-the-cloud-part-ii-creating-and-sumption-a-salesforce-com-service-from-biztalk-server/](http://seroter.wordpress.com/2009/10/11/orchestrating-the-cloud-part-ii-creating-and-consuming-a-salesforce-com-service-from-biztalk-server/)

[http://soa-thoughts.blogspot.com.au/2010/08/biztalk-salesforce-and-msmq-part-i.html](http://soa-thoughts.blogspot.com.au/2010/08/biztalk-salesforce-and-msmq-part-i.html)

[http://soa-thoughts.blogspot.com.au/2010/08/biztalk-salesforce-and-msmq-part-ii.html](http://soa-thoughts.blogspot.com.au/2010/08/biztalk-salesforce-and-msmq-part-ii.html)

如帖子中所述，我将 sessionId 设置为消息分配形状：

```
SfdcMessage(WCF.Headers) = "<headers><SessionHeader><sessionId>00DK0000005Du2o!AREAQLnrXpVFRAAgwT_Z7iaK0do1IltgHqDLyDfLhbkUGqvFMvzNURdgRtKdPc47cO9sZpOPJ0x8q496vQJsXKGrXt4BcdLW</sessionId></SessionHeader></headers>"; 
```

但是，当我的发送端口调用 SalesForce 自定义 Web 服务时，我收到以下错误

[使用 URI https://abc.xyz](https://abc.xyz)在发送端口“WcfSendPort_SP”上发送到适配器“WCF-BasicHttp”的消息被暂停。

错误详细信息：System.ServiceModel.FaultException：sf：INVALID_SESSION_IDINVALID_SESSION_ID：在 SessionHeader 中找到无效的会话 ID：非法会话

在 Microsoft.BizTalk.Adapter.Wcf.Runtime.WcfClient`2.RequestCallback（IAsyncResult 结果）

我做了更多的研究，发现了这些帖子：

[http://boards.developerforce.com/t5/General-Development/INVALID-SESSION-ID-Invalid-Session-ID-found-in-SessionHeader/td-p/74031](http://boards.developerforce.com/t5/General-Development/INVALID-SESSION-ID-Invalid-Session-ID-found-in-SessionHeader/td-p/74031)

[http://boards.developerforce.com/t5/Perl-PHP-Python-Ruby-Development/INVALID-SESSION-ID-Invalid-Session-ID-found-in-SessionHeader/td-p/66846](http://boards.developerforce.com/t5/Perl-PHP-Python-Ruby-Development/INVALID-SESSION-ID-Invalid-Session-ID-found-in-SessionHeader/td-p/66846)

[http://boards.developerforce.com/t5/General-Development/INVALID-SESSION-ID-Invalid-Session-ID-found-in-SessionHeader/td-p/200705](http://boards.developerforce.com/t5/General-Development/INVALID-SESSION-ID-Invalid-Session-ID-found-in-SessionHeader/td-p/200705)

有没有人遇到过这个问题？

任何帮助表示赞赏。

干杯，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T06:03:21.470

# tcl - 使 puts 记录输出的示例代码

> ID：11641827
> 
> 赞同：1
> 
> 时间：2012-07-25T02:22:46.310
> 
> 标签：tcl

我正在寻找一些 Tcl 代码，它们会将[puts](http://www.tcl.tk/man/tcl8.4/TclCmd/puts.htm)命令发送到 stdout 的内容复制到某个日志文件中。是的，有可能将所有对 puts 的调用更改为某个自定义函数。但我想让它尽可能透明。我有这个试用代码，但它并不能很好地工作：

```
set pass_log_output "0"

rename puts _puts
proc puts { args } {
    global pass_log_output

    if {[info exists pass_log_output]} {
        # There can be several cases:
        # -nonewline parameter, stdout specified or not
        set stdout_dest [ lsearch $args stdout ]
        set nonewline [ lsearch $args -nonewline ]
        if { $stdout_dest != -1 } {
            log_low_level "" [lindex $args [expr $stdout_dest + 1]] ""
        } elseif { $nonewline != -1 && [ llength $args ] > 1} {
            log_low_level "" [lindex $args [expr $nonewline + 1]] ""
        } else {
            log_low_level "" [lindex $args 0] ""
        }
    }

    if { [ catch { eval _puts $args } err ] } {
        return -code error $err
    }
} 
```

log_low_level 函数只是将传递的字符串存储在文件中。到目前为止，我收到此错误：

```
Tcl Interpreter Error: too many nested evaluations (infinite loop?) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T07:09:20.603

`log_low_level`用吗`puts`？那可能是你的无限循环。

如果是这样，请尝试将其更改为使用`_puts`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T18:36:02.703

感谢您的积分。我只想发布最终的工作代码以供参考。它甚至可以正确处理带有 -nonewline 标志的存储行。

```
set pass_log_output "0"
set last_call_nonewline 0

rename puts _orig_puts
proc puts { args } {
    global pass_log_output
    global g_log_file
    global last_call_nonewline

    if {[info exists pass_log_output]} {
        # Check if the logging was initialized
        if {![info exists g_log_file]} {
            _orig_puts "Log file wasn't initialized!"
            return
        }

        # There can be several cases:
        # -nonewline parameter, stdout specified or not
        set stdout_dest [ lsearch $args stdout ]
        set nonewline [ lsearch $args -nonewline ]
        if {[ llength $args ] > 3} {
            return -code error "wrong # args: should be puts ?-nonewline? ?channelId? string"
        } elseif { $stdout_dest != -1 } {
            set message [lindex $args end]
        } elseif { $nonewline != -1 && [ llength $args ] == 2} {
            set message [lindex $args [expr $nonewline + 1]]
        } elseif {[ llength $args ] == 1} {
            set message [lindex $args 0]
        }

        # Store the message in the file, if needed.
        # Take into account if the last call was with -nonewline
        if {[info exists message]} {
            if {$last_call_nonewline == 0} {
                _orig_puts -nonewline $g_log_file [clock format [clock seconds] -format "%T - "]
            }
            if {$nonewline != -1} {
                set last_call_nonewline 1
                _orig_puts -nonewline $g_log_file "$message"
            } else {
                set last_call_nonewline 0
                _orig_puts $g_log_file "$message"
            }
            flush $g_log_file
        }
    }

    if { [ catch { eval _orig_puts $args } err ] } {
        return -code error $err
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T14:30:24.153

由于[`puts`](http://tcl.tk/man/tcl8.5/TclCmd/puts.htm)选项很少，因此可能更容易考虑给定的参数数量。此外，您应该在新的 puts proc 中包含原始的所有用途`_puts`——这个新的 puts 甚至对您的代码也应该是透明的。

我假设您只想将正在写入的内容记录到标准输出

```
rename puts _orig_puts
proc puts {args} {
    switch -exact [llength $args] {
        3 {
            # both -newline and a channelId are given
            set do_log [expr {[lindex $args 1] eq "stdout"}]
        }
        2 {
            # only log if not writing to stdout
            set chan [lindex $args 0]
            set do_log [expr {$chan eq "-nonewline" || $chan eq "stdout"}]
        }
        1 {
            set do_log true
        }
        default {
            error {wrong # args: should be "puts ?-nonewline? ?channelId? string"}
        }
    }
    if {$do_log} {
        set chan [open $::mylogfile a]
        _orig_puts $chan [lindex $args end]
        close $chan
    } 
    _orig_puts {*}$args
} 
```

# jquery - 创建**一个页面**，可以在同一页面上单独显示不同的选择

> ID：11641829
> 
> 赞同：0
> 
> 时间：2012-07-25T02:22:55.733
> 
> 标签：jquery, sql

我想创建**一个页面**，可以显示来自特定公司但不是所有公司的数据，并且每个公司都选择在同一页面上显示/自动刷新。

这个想法是即使公司被添加到表格中，页面仍然可以单独显示新公司及其相关日期。

例如

> 选择公司：
> 雀巢
> AMCO
> ANSA Mcal
> Minstry of Education

选择选项后，从公司表格和所选公司的相关表中使用公司的信息进行了页面自动刷新。

注意——我是 Oracle Apex 的初学者，因此我们将不胜感激任何帮助或建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T02:41:43.427

将更改处理程序绑定到 并将处理程序中`select`所需的内容加载到内容`div`，例如

HTML

```
<select id="company">
    <option value="o">Select a company?</option>
    <option value="1">Nestle</option>
    <option value="2">AMCO</option>
    <option value="3">ANSA Mcal</option>
    <option value="4">Minstry of Education</option>
</select>
<div id="content"></div> 
```

JavaScript

```
$('#company').on('change', function(){
    var url;//url with company information to display
    switch ($(this).val()){
        case 1:
            url = '/nestle-info';
            break;
        case 2:
            url = '/amco-info';
            break;
        case 3:
            url = '/ansa-info';
            break;
        case 4:
            url = '/moe-info';
            break;
        default:
            return;
    }
    $('#content').load(url);
}); 
```

# remoting - 使用主机名时，AKKA Remoting 查找远程参与者失败

> ID：11641834
> 
> 赞同：1
> 
> 时间：2012-07-25T02:23:27.900
> 
> 标签：remoting, lookup, actor, akka

我一直在使用 AKKA 远程处理功能。除了一个问题外，它一直运行良好。如果我尝试根据主机名查找远程参与者，则查找失败。但是，如果我根据 IP 地址进行操作，它可以正常工作。有什么方法可以使它对主机名和 IP 地址统一工作？

我的 application.conf 如下所示：

```
akka {
  version = "2.0.2"
  actor {
    provider = "akka.remote.RemoteActorRefProvider"
  }
  remote {
    transport = "akka.remote.netty.NettyRemoteTransport"
    netty {
        ...
      use-passive-connections = off
      hostname = ""
      port = 8000
        ...
    }
    ...
  }
} 
```

从另一台机器：

```
actorSystem.actorFor("akka://MyActorSystem@10.0.0.1:8000/user/MyActor")  //**Works**
actorSystem.actorFor("akka://MyActorSystem@hostname.abc.com:8000/user/MyActor") //**Fails** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T16:34:55.100

我也看到了这种行为。我希望 Akka 演员系统能够从`java.net.InetAddress.getLocalHost.getHostName`.

然而，这似乎并不总是有效。从好的方面来说，将主机名添加到 application.conf 文件应该会产生正确的结果，允许通过`context.actorFor("akka://host.domain.com:8000/user/whatever")`.

即使`InetAddress`上面的调用产生了所需的主机名字符串，例如在 Scala REPL 中很容易检查，Akka 似乎更喜欢绑定到 IP 地址。如果您希望 Akka 在系统启动时自动绑定到别名，您可以考虑在将 Config 对象（set `akka.remote.netty.hostname`）传递给`ActorSystem.apply`.

当然，另一个可能不太理想的选项是简单地在每个部署的节点上设置值。

希望有帮助！

# javascript - JavaScript：如何提取字符串中的复杂内容

> ID：11641838
> 
> 赞同：0
> 
> 时间：2012-07-25T02:23:54.730
> 
> 标签：javascript, regex

我有一个字符串

```
var chartDataArrayString = '[0.00,0.00],[0.00,0.00],[0.00,0.00],[0.00,0.00],[0.00,0.00],[0.00,0.00],[0.00,0.00],[0.00,0.00],[0.00,0.00],[0.00,0.00],[8.44,10.55],[51.79,64.74]'; 
```

现在我想从这个字符串中提取每个单元并将其放入一个二维数组中。所以二维数组中有 12 个元素，每个元素都有 2 个值。所以它应该看起来像这样

```
var 2dArray = [[470, 870.45], [560, 920.49], [350, 540.12], [600, 901.59], [500, 750.4], [620, 401], [480, 724.4], [530, 598.98], [630, 630], [400, 876.69], [220, 1100.2], [500, 1021.9]]; 
```

我试图用'，'来分割它，但我发现在每个小单元里面，也有一个'，'。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T02:26:23.167

只需使用`JSON.parse`, 并在外部数组中连接...

```
var data = JSON.parse("[" + chartDataArrayString + "]"); 
```

您也可以使用`.eval()`, 但`JSON.parse`只要数据符合要求，它会更好/更安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T02:28:39.833

您可以在一行中执行此操作，`JSON.parse()`如我不是我的答案所示。

但是，既然您在谈论使用`.split()`这里的一种方法来使这项工作：

```
var dataArray = chartDataArrayString.slice(1,-1).split("],[");

for (var i=0; i < dataArray.length; i++)
    dataArray[i] = dataArray[i].split(","); 
```

也就是说，用于`.slice()`删除初始`[`和尾随`]`，然后拆分以`"],["`创建表单中的字符串数组`"0.00,0.00"`。然后遍历数组中的每个项目以创建具有另一个拆分的嵌套数组。

编辑：对于内部元素是数字而不是字符串，您可以执行以下操作（这使得 JSON.parse() 是“正确”解决方案更加明显）：

```
for (var i=0; i < dataArray.length; i++){
    dataArray[i] = dataArray[i].split(",").map(Number);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T02:33:48.257

您可以使用`eval`：

```
var arr = eval('[' + data + ']'); 
```

或者您可以使用字符串：

```
var arr = [];
var bits = data.replace(/(^\[)|(\]$)/g,'').split('],[');

for (var i=0, iLen=bits.length; i<iLen; i++) {
  arr[i] = bits[i].split(',');
} 
```

任何适合。哦，请注意，这些值将是字符串，而不是数字。

# jquery - 类似于 me.com 的 jQuery 简单粒子

> ID：11641840
> 
> 赞同：0
> 
> 时间：2012-07-25T02:24:15.577
> 
> 标签：jquery, particles

我有一个项目给我的一个客户。它涉及类似于旧 me.com 主页的内容（不再向上）

[尽管http://lokeshdhakar.com/projects/mobileme-particles/](http://lokeshdhakar.com/projects/mobileme-particles/)它看起来与此相似

我想使用 HTML CSS JQUERY，而不是 flash（她要求 flash，试图告诉她 flash 是一种垂死的技术）

我有 jQuery 的经验，但简单的动画和淡入淡出类型的东西 - 从来没有粒子，也找不到说我的语言的教程。

我的目标基本上是制作一个启动页面 - 她的标志在中间，效果将是类似于上面 URL 示例的小颗粒 - 但进入标志，而不是出去。

有没有人在这方面有任何经验，或者可能指出我可以了解更多信息的方向。

我很快就会有一个工作页面..但想把它弄出来。

谢谢，-O

/////////////////// 已更新需要更多帮助 ///////////////////

我有一个工作演示。但是需要一些关于jquery的帮助

我有一个小提琴[http://jsfiddle.net/muhupower/cneJT/2/](http://jsfiddle.net/muhupower/cneJT/2/)

1.  我无法弄清楚如何将效果直接放在大徽标后面......

2.  此外，在它居中后，当您调整浏览器窗口的大小时，效果不会保持居中。

3.  这是一个更难的部分，是否有可能只是对粒子产生一致的效果，而不是几秒钟后它就会消失并重新启动？

这也是一个上传的版本。[http://lillystreet.com/demo/](http://lillystreet.com/demo/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-02T06:17:20.947

我为这种效果做了一个[非常简单的插件。](https://github.com/Glideh/jquery.particles.burst)

这是[演示](http://pburst.gprod.net/)

# c# - linq2sql join 选择不在另一个表中的数据

> ID：11641842
> 
> 赞同：0
> 
> 时间：2012-07-25T02:24:23.143
> 
> 标签：c#, sql, winforms, c#-4.0, linq-to-sql

请不要使用lamba回复。我找到了类似的线程，但仍然需要帮助。

我正在尝试显示员工表中不是当前所选经理的员工的名称。

我的两个 sql 表的结构是这样的，但这是假数据

```
Employees:   
           pk      name     
           1      bob
           2      sam
           3      greg
           4      kip
           5      jill
           6      kelly
           7      chris

ExpenseTeamMembers: 

           pk      expMgrPk     empPk     
           1         7          2
           2         7          5
           3         7          1
           4         3          6
           5         3          4 
```

因此，如果当前选择的（mgr 变量）是 3，我想获取员工表中除 6、4 之外的所有 empPks 的名称。（kelly，kip）现在 unselectedEmps = sam，jill，bob 而不是所有 5雇员表中的其他名称。

```
var unselectedEmps = (from u in db.employees
                      join o in db.expenseTeamMembers on u.pk equals o.empPk
                      where o.expMgrPk != mgr 
                      select u.name).ToList();

                lstAvailable.DataSource = unselectedEmps; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T02:29:22.583

问题是当您实际上需要左外连接时，您正在执行内连接

看到[这个问题](https://stackoverflow.com/questions/700523/linq-to-sql-left-outer-join)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T03:33:48.300

经过我们的扩展讨论，我想你想要的是这个。

```
from u in db.Employees
where !(from e in db.ExpenseTeamMembers
        where e.expMgrPk == selectedMgr.pk
        select e.empPk).Contains(u.pk)
select u.Name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T04:34:35.307

我尝试了以下方法，它给出了正确的输出。请试一试：

```
List<Employees> emps = new List<Employees>();
        emps.Add(new Employees { PK = 1, Name = "bob" });
        emps.Add(new Employees { PK = 2, Name = "sam" });
        emps.Add(new Employees { PK = 3, Name = "greg" });
        emps.Add(new Employees { PK = 4, Name = "kip" });
        emps.Add(new Employees { PK = 5, Name = "jill" });
        emps.Add(new Employees { PK = 6, Name = "kelly" });
        emps.Add(new Employees { PK = 7, Name = "chris" });

        List<ExpenseTeamMembers> etm = new List<ExpenseTeamMembers>();
        etm.Add(new ExpenseTeamMembers { empPK = 2, ExpMgrPK = 7, PK = 1 });
        etm.Add(new ExpenseTeamMembers { empPK = 5, ExpMgrPK = 7, PK = 2 });
        etm.Add(new ExpenseTeamMembers { empPK = 1, ExpMgrPK = 7, PK = 3 });
        etm.Add(new ExpenseTeamMembers { empPK = 6, ExpMgrPK = 3, PK = 4 });
        etm.Add(new ExpenseTeamMembers { empPK = 4, ExpMgrPK = 3, PK = 5 });

        var query = from t in
                        (
                            from emp in emps
                            join o in etm on emp.PK equals o.empPK into j
                            from k in j.DefaultIfEmpty()
                            select new { Name = k == null ? string.Empty : emp.Name })
                    where t.Name != string.Empty
                    select t.Name; 
```

# iphone - 获取textview的第一句话

> ID：11641850
> 
> 赞同：0
> 
> 时间：2012-07-25T02:25:07.490
> 
> 标签：iphone, objective-c, ios

我正在尝试获取文本视图的第一句话。我有以下代码，但出现越界错误。谢谢你。或者有什么方法不是很复杂。

```
 -(IBAction)next:(id)sender
{
    NSRange ran = [[tv.text substringFromIndex:lastLocation] rangeOfString:@". "];
    if(ran.location != NSNotFound)
    {
        NSString * getRidOfFirstHalfString = [[tv.text substringFromIndex:lastLocation] substringToIndex:ran.location];
        NSLog(@"%@",getRidOfFirstHalfString);
        lastLocation+=getRidOfFirstHalfString.length;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T03:01:16.233

我知道您已经接受了这个问题的答案，但您可能需要考虑使用文本视图`tokenizer`而不是仅搜索字符串`". "` 。标记器将自动处理标点符号，如`!`,`?`和右引号。你可以像这样使用它：

```
id<UITextInputTokenizer> tokenizer = textView.tokenizer;
UITextRange *range = [tokenizer rangeEnclosingPosition:textView.beginningOfDocument
    withGranularity:UITextGranularitySentence
    inDirection:UITextStorageDirectionForward];
NSString *firstSentence = [textView textInRange:range]; 
```

如果你想枚举所有的句子，你可以这样做：

```
id<UITextInputTokenizer> tokenizer = textView.tokenizer;
UITextPosition *start = textView.beginningOfDocument;
while (![start isEqual:textView.endOfDocument]) {
    UITextPosition *end = [tokenizer positionFromPosition:start toBoundary:UITextGranularitySentence inDirection:UITextStorageDirectionForward];
    NSString *sentence = [textView textInRange:[textView textRangeFromPosition:start toPosition:end]];
    NSLog(@"sentence=%@", sentence);
    start = end;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T02:41:29.920

怎么样：

```
NSString *finalString = [[tv.text componentsSeparatedByString:@"."] objectAtIndex:0] // Get the 1st part (left part) of the separated string 
```

浏览 textview 的文本并将文本分成单独的组件，您可以在其中通过调用找到句`componentsSeperatedByString`点`tv.text`。您想要**第**一句话，这将是数组中的第 0 个对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T02:29:17.577

尝试检查是否确实找到了子字符串。

```
NSRange ran = [tv.text rangeOfString:@". "];
if(ran.location != NSNotFound)
{
    NSString * selectedString = [tv.text substringToIndex:ran.location];
    NSLog(@"%@",selectedString);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T02:31:08.983

您也可以尝试像这样使用 NSScanner：

```
NSString *firstSentence = [[NSString alloc] init];
NSScanner *scanner = [NSScanner scannerWithString:tv.text];
NSCharacterSet *set = [NSCharacterSet characterSetWithCharactersInString:@"."];
[scanner scanUpToCharactersFromSet:set intoString:&firstSentence]; 
```

我不确定你是否想要这个，但既然你想要第一句话，你可以附加一个句号（你可能知道如何做到这一点，但无论如何显示它并没有什么坏处）：

```
firstSentence = [firstSentence stringByAppendingFormat:@"."]; 
```

希望这可以帮助！

PS：如果它不适合你，也许文本视图实际上不包含任何文本。

# java - Java - 国家/州的动态下拉列表

> ID：11641853
> 
> 赞同：0
> 
> 时间：2012-07-25T02:25:48.310
> 
> 标签：java, ajax, jsp, drop-down-menu

在我的网络应用程序中，我有以下要求。

我需要有一个国家的下拉菜单。
根据选择的国家，我需要显示相应的州。
我需要从数据库中获取国家和州。

我不能使用 javascript，因为在生产（现场）中，javascript 将被禁用。

我想我必须使用 ajax 来实现这个？

谁能告诉我是否有更好的方法来实现上述要求？

我看过以下链接。
[在 JSP/Servlet 中填充级联下拉列表](https://stackoverflow.com/questions/2263996/populating-child-dropdownlists-in-jsp-servlet)

但我不喜欢使用 javascript（因为我的客户端会在生产环境中禁用 javascript）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:45:58.543

> 我不能使用 javascript，因为在生产（现场）中，javascript 将被禁用。

不能使用 javascript 而不是必须刷新页面，即：

1.  从下拉列表中选择国家
2.  提供一个链接或按钮来提交这个值（点击这个）
3.  服务器调用，它将检索 Country 值以及所选国家/地区的 State 值
4.  显示具有检索到的值的 JSP，并在下拉列表中预先选择提交的国家/地区。

> 我想我必须使用 ajax 来实现这个？

现在我的朋友，你在自相矛盾，因为`ajax`（我很抱歉这么说）不过是`javascript`，它与 javascript 没有什么不同的语言。

# css - 如何在 Firefox 中为模糊过滤器设置动画？

> ID：11641859
> 
> 赞同：3
> 
> 时间：2012-07-25T02:26:39.227
> 
> 标签：css, css-animations

```
@-webkit-keyframes myBlur{
   from{
      -webkit-filter:blur(0px);
   }
   to{
      -webkit-filter:blur(10px);
   }
} 
```

Firefox 中似乎没有实现“模糊”，我们可以使用 svg 过滤器来代替。是否可以对 svg 过滤器进行动画处理以实现与上述代码相同的效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:57:07.210

ATM你不能。

我一直尝试，但动画（如@keyframe 或通过过渡）不适用于 Aurora 构建。

期待它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T13:24:58.297

我的 Firefox 在这里模糊了

[http://demosthenes.info/blog/534/Crossbrowser-Image-Blur](http://demosthenes.info/blog/534/Crossbrowser-Image-Blur)

SVG 模糊有效.. 你可以试试 SVG 动画吗？

*-派克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T07:16:36.810

这是你想要的？

[https://developer.mozilla.org/en-US/docs/CSS/filter](https://developer.mozilla.org/en-US/docs/CSS/filter)

您正在使用适用于 webkit 浏览器的 webkit 前缀。我知道不久前 Mozilla 宣布他们将支持 webkit 前缀，但我不知道这是否是其中之一，因为它是实验性的。

```
// Browser Specific
-webkit-filter: blur(5px);
-moz-filter: blur(5px);
-o-filter: blur(5px);
-ms-filter: blur(5px);
filter: blur(5px); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T23:09:19.483

尝试 Foggy 然后循环并更改`blurRadius`and `Opacity`。

[http://nbartlomiej.github.com/foggy/](http://nbartlomiej.github.com/foggy/)

# php - Zend 数据库映射器最好的方法？

> ID：11641860
> 
> 赞同：1
> 
> 时间：2012-07-25T02:26:46.980
> 
> 标签：php, zend-framework, zend-db

嗨，在基于 zend 框架的应用程序中，从数据库中获取数据的最佳方法是什么？映射器和 DbTable 文件之间是否有任何区别，如果 hv 有一个简单的示例来演示，那就太好了。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T02:45:40.910

在使用 mapper 之前，您应该首先编写一个库，这将更容易让您调用和定义新的。以下是使用库定义基于映射器的数据库表的好方法之一。

在模型文件夹中，您需要有 DbTable 和映射器文件夹。在 DbTable 中创建 User.php 并在 mapper 中创建一个 UserMapper.php 文件。同样在模型文件夹本身内，您必须创建 User.php 文件。下面是示例代码

数据库表>用户.php

```
<?php
 class Application_Model_DbTable_Users extends Zend_Db_Table_Abstract
 {
 protected $_name = 'users';
 }
 ?> 
```

映射器>用户映射器.php

```
<?php
 class Application_Model_Mapper_UserMapper extends Zc_Model_BaseMapper
 {
  public function __construct()
  {
    $this->setDbTable('Application_Model_DbTable_Users');
  }

  public function find($userid Application_Model_User $user)
  {
  // sql will go here
  } 
```

模型>用户.php

```
class Application_Model_User extends Zc_Model_Base
{
  protected $_userId;
  protected $_userName;

  public function setUserId($userId)
  {
    $this->_userId = $userId;
    return $this;
  }
  publc function getUserId()
  {
    return $this->_userId;
  }

  public function toArray()
  {
    $data = array(
      'user_id' => getUserId();
     )
    return $data
  } 
```

希望对你有帮助 ;-）

# java - 将值从 php 项目传递给 java 项目

> ID：11641861
> 
> 赞同：-1
> 
> 时间：2012-07-25T02:27:03.657
> 
> 标签：java, php, cookies, struts2

这是我的场景。

1）我有一个链接`gotoJavaProject`作为`href link`php 项目。

2）我想`myValue`在点击`gotoJavaProject`链接时传递一个特定的值（例如），这将导致调用另一个java项目。

3) 我打算`the value as cookies`从 php 发送到 java web 应用程序。

php 项目是现有项目，我只想与新的 java 项目模块集成。

由于我对 php 不熟悉，所以我一直在搞清楚如何实现这一点。

谁能给我一个指南或示例，说明如何将 cookie 中的值从 php 传递到 Java Web 应用程序？

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T02:35:03.540

将其作为参数添加到您的链接。

```
http://example.com/?var=<?php echo $variable?> 
```

我不熟悉java，所以我不确定你是如何获取变量的，但我认为这很简单

# html - Blackberry Playbook 上的 HTML5 WebSQL 和 AppCache

> ID：11641864
> 
> 赞同：0
> 
> 时间：2012-07-25T02:27:30.363
> 
> 标签：html, blackberry-playbook, web-sql, html5-appcache, playbook

我有一个使用 HTML5、webSQL 和 appcache 的 Web 客户端。显然，它不适用于 Blackberry Playbook。它在安卓设备上运行良好。我以为 playbook 支持 webSQL，那为什么我不能创建 websql db？我也尝试过在剧本上访问带有 webSQL 演示的站点，但它也不起作用。

有任何想法吗？谢谢。

# documentation - Groc (Docco fork) 使用条带选项

> ID：11641868
> 
> 赞同：0
> 
> 时间：2012-07-25T02:28:10.067
> 
> 标签：documentation, coffeescript

据我了解，(a fork) 的`--strip`选项是允许我从文档层次结构中删除文件夹。例如。我有一个文件夹结构，如： [`groc`](http://nevir.github.com/groc/)`docco`

```
src/
    module1/
        coffee/
           submod1/
               xxx.coffee
               yyy.coffee
           submod2 
               zzz.coffee
    module2/
        coffee/
           submod1/
               xxx.coffee
               yyy.coffee
           submod2 
               zzz.coffee 
```

我想从文档的层次结构中排除所有咖啡文件夹。我如何使用条来做到这一点？在文档中并不是很清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T14:34:48.033

我认为您无法使用 --strip 选项实现您想要的。我相信 strip 只允许您从路径的开头剥离。我尝试了“* *” glob 模式匹配，但无法让您的方案正常工作（例如 --strip coffee 和 --strip ** /coffee）

对于一般用途，我使用这样的条带：

```
groc **/*.js --strip modules/WebCommon/j2ee-apps/webcommon.war/javascript

# INPUT
# modules/WebCommon/j2ee-apps/webcommon.war/javascript/validator/validator.js

# OUTPUT
# validator/validator.js 
```

但是，实际 html 文件中的文件名仍然包含整个路径。这是因为模板使用 projectPath 而不是 targetPath 作为标题。

```
# "projectPath":"modules/WebCommon/j2ee-apps/webcommon.war/javascript/validator/validator.js","targetPath":"validator/validator" 
```

诚然，Ian MacLeod（作者）同意这令人困惑： [https ://github.com/nevir/groc/issues/13](https://github.com/nevir/groc/issues/13)

# visual-c++ - MSVC 资源文件 VERTGUIDE / HORZGUIDE

> ID：11641869
> 
> 赞同：1
> 
> 时间：2012-07-25T02:28:13.343
> 
> 标签：visual-c++

HORZGUIDE 和 VERTGUIDE 的含义是什么？

我在 msdn 中找不到与这些相关的任何文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T04:52:28.060

它没有记录。这是对话框编辑器生成的用于存储编辑器状态的元数据。您会在 .rc 文件的 DESIGNINFO 块中找到它。

注意显示在对话框顶部和左侧的标尺。您可以在标尺内部单击以添加帮助您对齐控件的参考线。每个水平参考线都会在块内生成一条 HORZGUIDE 线。垂直指南的想法相同。

还要注意边距值、标尺的开始和结束。

# ruby-on-rails - rails heroku部署错误

> ID：11641870
> 
> 赞同：2
> 
> 时间：2012-07-25T02:28:15.377
> 
> 标签：ruby-on-rails, deployment, heroku

我的 rails 应用程序在 localhost 中运行良好，但未能在 heroku 上部署。我已经搜索了原因，但显然这些方法不起作用。这是heroku日志

```
 2012-07-25T02:17:01+00:00 heroku[slugc]: Slug compilation started
2012-07-25T02:17:07+00:00 app[web.1]: 
2012-07-25T02:17:07+00:00 app[web.1]: 
2012-07-25T02:17:07+00:00 app[web.1]: Started GET "/" for 18.111.101.88 at 2012-07-25 02:17:07 +0000
2012-07-25T02:17:07+00:00 app[web.1]:   Processing by StaticPagesController#home as HTML
2012-07-25T02:17:07+00:00 app[web.1]: Rendered static_pages/home.html.erb within layouts/application (1.1ms)
2012-07-25T02:17:07+00:00 heroku[router]: GET thawing-scrubland-8239.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=312ms status=500 bytes=728
2012-07-25T02:17:07+00:00 app[web.1]: 
2012-07-25T02:17:07+00:00 app[web.1]: Completed 500 Internal Server Error in 307ms
2012-07-25T02:17:07+00:00 app[web.1]: 
2012-07-25T02:17:07+00:00 app[web.1]: cache: [GET /] miss
2012-07-25T02:17:07+00:00 app[web.1]: ActionView::Template::Error (stack level too deep
2012-07-
25T02:17:07+00:00 app[web.1]: 
2012-07-25T02:17:07+00:00 app[web.1]:   (in /app/app/assets/stylesheets/custom.css.scss)):
2012-07-25T02:17:07+00:00 app[web.1]:   
2012-07-25T02:17:07+00:00 heroku[router]: GET thawing-scrubland-8239.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=31ms status=304 bytes=0
2012-07-25T02:17:07+00:00 app[web.1]: cache: [GET /favicon.ico] stale, invalid, store
2012-07-25T02:17:23+00:00 app[web.1]: 
2012-07-25T02:17:23+00:00 app[web.1]: 
2012-07-25T02:17:23+00:00 app[web.1]: Started GET "/" for 18.111.101.88 at 2012-07-25 02:17:23 +0000
2012-07-25T02:17:23+00:00 app[web.1]:   Processing by StaticPagesController#home as HTML
2012-07-25T02:17:23+00:00 app[web.1]: Rendered static_pages/home.html.erb within layouts/application (1.4ms)
2012-07-25T02:17:23+00:00 app[web.1]: 
2012-07-25T02:17:23+00:00 app[web.1]: ActionView::Template::Error (stack level too deep
2012-07-25T02:17:23+00:00 app[web.1]: Completed 500 Internal Server Error in 212ms
2012-07-25T02:17:23+00:00 app[web.1]:   (in /app/app/assets/stylesheets/custom.css.scss)):
2012-07-25T02:17:23+00:00 app[web.1]:   
2012-07-25T02:17:23+00:00 app[web.1]: 
2012-07-25T02:17:23+00:00 app[web.1]: 
2012-07-25T02:17:23+00:00 app[web.1]: cache: [GET /] miss
2012-07-25T02:17:23+00:00 heroku[router]: GET thawing-scrubland-8239.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=215ms status=500 bytes=728
2012-07-25T02:17:26+00:00 app[web.1]: 
2012-07-25T02:17:26+00:00 app[web.1]: 
2012-07-25T02:17:26+00:00 app[web.1]: Started GET "/" for 18.111.101.88 at 2012-07-25 02:17:26 +0000
2012-07-25T02:17:26+00:00 app[web.1]:   Processing by StaticPagesController#home as HTML
2012-07-25T02:17:26+00:00 app[web.1]: Rendered static_pages/home.html.erb within layouts/application (0.6ms)
2012-07-25T02:17:26+00:00 app[web.1]: Completed 500 Internal Server Error in 209ms
2012-07-25T02:17:26+00:00 app[web.1]: 
2012-07-25T02:17:26+00:00 app[web.1]:   (in /app/app/assets/stylesheets/custom.css.scss)):
2012-07-25T02:17:26+00:00 app[web.1]: ActionView::Template::Error (stack level too deep
2012-07-25T02:17:26+00:00 app[web.1]: 
2012-07-25T02:17:26+00:00 app[web.1]:   
2012-07-25T02:17:26+00:00 app[web.1]: 
2012-07-25T02:17:26+00:00 app[web.1]: cache: [GET /] miss
2012-07-25T02:17:26+00:00 heroku[router]: GET thawing-scrubland-8239.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=214ms status=500 bytes=728
2012-07-25T02:17:43+00:00 heroku[api]: Deploy 692f597 by eric61213@gmail.com
2012-07-25T02:17:43+00:00 heroku[api]: Release v7 created by eric61213@gmail.com
2012-07-25T02:17:43+00:00 heroku[web.1]: State changed from up to starting
2012-07-25T02:17:45+00:00 heroku[web.1]: Stopping all processes with SIGTERM
2012-07-25T02:17:46+00:00 heroku[slugc]: Slug compilation finished
2012-07-25T02:17:47+00:00 heroku[web.1]: Process exited with status 0
2012-07-25T02:17:48+00:00 heroku[web.1]: Starting process with command `bundle exec thin start -R config.ru -e production -p 13260`
2012-07-25T02:17:58+00:00 app[web.1]: >> Thin web server (v1.4.1 codename Chromeo)
2012-07-25T02:17:58+00:00 app[web.1]: >> Maximum connections set to 1024
2012-07-25T02:17:58+00:00 app[web.1]: >> Listening on 0.0.0.0:13260, CTRL+C to stop
2012-07-25T02:17:59+00:00 heroku[web.1]: State changed from starting to up
2012-07-25T02:18:00+00:00 app[web.1]: 
2012-07-25T02:18:00+00:00 app[web.1]: 
2012-07-25T02:18:00+00:00 app[web.1]: Started GET "/" for 18.111.101.88 at 2012-07-25 02:18:00 +0000
2012-07-25T02:18:00+00:00 app[web.1]:   Processing by StaticPagesController#home as HTML
2012-07-25T02:18:00+00:00 app[web.1]: Rendered static_pages/home.html.erb within layouts/application (13.8ms)
2012-07-25T02:18:00+00:00 app[web.1]: Completed 500 Internal Server Error in 375ms
2012-07-25T02:18:00+00:00 app[web.1]: 
2012-07-25T02:18:00+00:00 app[web.1]: 
2012-07-25T02:18:00+00:00 app[web.1]:   (in /app/app/assets/stylesheets/custom.css.scss)):
2012-07-25T02:18:00+00:00 app[web.1]: ActionView::Template::Error (stack level too deep
2012-07-25T02:18:00+00:00 app[web.1]:   
2012-07-25T02:18:00+00:00 app[web.1]: 
2012-07-25T02:18:00+00:00 app[web.1]: cache: [GET /] miss
2012-07-25T02:18:01+00:00 heroku[router]: GET thawing-scrubland-8239.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=461ms status=500 bytes=728
2012-07-25T02:18:01+00:00 app[web.1]: cache: [GET /favicon.ico] miss, store
2012-07-25T02:18:01+00:00 heroku[router]: GET thawing-scrubland-8239.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=8ms status=200 bytes=0 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T03:09:45.687

问题解决了。必须设置

```
config.assets.digest = true 
```

# c# - 将 DataGridView 中的更改保存回 SQL 数据库？

> ID：11641888
> 
> 赞同：1
> 
> 时间：2012-07-25T02:30:05.993
> 
> 标签：c#, sql, winforms, datagridview

我正在尝试制作一个 DataGridView，它显示来自 SQL 数据库（GSM.sdf）的数据，并在按下保存按钮时将对 DataGridView 所做的更改保存回数据库。数据显示正常，但按下保存按钮时没有任何反应。我一直在关注这个帖子的最佳答案：

[http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/98bc0b4d-a2ea-4b74-81f0-473da624528a](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/98bc0b4d-a2ea-4b74-81f0-473da624528a)

但这行不通。这是我的代码：

```
namespace WindowsFormsApplication5
{
    public partial class Zeelot : Form
    {
        DataTable table = new DataTable();
        SqlCeDataAdapter z;
        DataSet gSMDataSet = new DataSet();
        public Zeelot()
        {
            InitializeComponent();
        }
        private void Zeelot_Load(object sender, EventArgs e)
        {
            string b = @"Data Source =.\SQLEXPRESS;database=GSM;Integrated Security=FALSE;Connection Timeout=30;User Instance=FALSE";
            SqlCeConnection conn = new SqlCeConnection(b);
            conn.Open();
            string cd = "SELECT * FROM PhoneNumbers";
            z = new SqlCeDataAdapter(cd, conn);
            z.Fill(gSMDataSet, "PhoneNumbers");
            table = gSMDataSet.Tables[0];
            conn.Close();
            dataGridView1.DataSource = table;
        }
        private void SaveButton_Click(object sender, EventArgs e)
        {
            SqlCeCommandBuilder local_SqlCommandBuilder = new SqlCeCommandBuilder(z);
            local_SqlCommandBuilder.ConflictOption = System.Data.ConflictOption.OverwriteChanges;
            z.UpdateCommand = local_SqlCommandBuilder.GetUpdateCommand();
            z.Update(((System.Data.DataTable)this.dataGridView1.DataSource));
            ((System.Data.DataTable)this.dataGridView1.DataSource).AcceptChanges();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T04:11:03.040

我相信您的问题在于您将 DataSource 转换为 System.Data.DataTable

试试 z.Update(gSMDataSet);

我也不相信你需要 AcceptChanges()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:34:12.267

1.  最后，您不需要在 DataGridView 上调用 .AcceptChanges() 。AcceptChanges() 将更改从您的 DGV 提交到连接的 DataSource（您的 DataTable）

在尝试将更改提交到数据库之前尝试调用 AcceptChanges()。

1.  我认为你的问题在于你的连接。您手动创建并打开一个连接并将其分配给您的 DataAdapter。但是在您的 _Load() 方法中，您关闭了连接。由于 _Click EventHandler 中使用的 DataAdapter 与您的 _Load() 方法中使用的 DataAdapter 相同（因此使用相同的连接）。**它无法向您的数据库提交任何更改，因为您已经关闭了连接。**

你在运行时没有任何异常吗？

在尝试将更改提交到数据库之前，请尝试使用断点检查连接对象的当前状态。

此外，如果您想在 DataAdapter 中使用它们，AFAIK MS 建议不要手动创建连接。

DataAdapter 的 Constructor 可以自行创建连接

# ruby - 使用 Ruby 在 OS X 中操作 Word 文档

> ID：11641891
> 
> 赞同：0
> 
> 时间：2012-07-25T02:30:49.957
> 
> 标签：ruby, macos, automation, ms-word

我想获取现有的 Microsoft Word 文档，并为某些单词添加粗体。是否可以使用预装在 OS X 上的 MRI Ruby 以及一些 gem 来做到这一点？（不幸的是，这排除了使用 JRuby，正如[How to parse word documents with ruby​​?](https://stackoverflow.com/questions/375861/how-to-parse-word-documents-with-ruby)所建议的那样

我检查了 RubyGems.org 搜索“word”，但只遇到了 word2html，这是不相关的。

我检查了 Ruby 工具箱。“word”没有得到任何相关的点击，“Microsoft word”得到了不相关的massaji、rwv2、cat-bizdoc和msworddoc-extractor。

我查找了 rb-appscript。appscript 本身的[主页](http://appscript.sourceforge.net/)说它不再被开发或支持。它建议使用 osascript 或 NSAppleScript，或其他两个缺少超链接的解决方案。osascript 被描述为 Ruby 通过 IO 类使用 - 即命令行。NSAppleScript 被描述为可以通过 RubyCocoa 被 Ruby 使用。RubyCocoa 被描述为有些过时，[建议](https://stackoverflow.com/a/695353/38765)使用 MacRuby作为替代方案。为这个任务安装 MacRuby 是多余的。

我可能误解了一些东西，但如果是这样，那又是什么呢？

操作系统版本可能是 OS X Snow Leopard 或稍新或稍旧。

我可以使用 Windows 机器，但这不是首选的解决方案。

# c# - NHibernate 可以查询 IN-Memory 对象吗

> ID：11641895
> 
> 赞同：0
> 
> 时间：2012-07-25T02:31:13.653
> 
> 标签：c#, nhibernate

像 linq to objects 一样，nhibernate 是否可以在内存对象中查询？他们有一个非常强大的 API，如果它可以在内存对象中查询，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:42:16.300

不，默认情况下它不能查询您的对象。它的 ORM，而不是查询查询生成器

# php - 用于解析的巨大 XML 的 php 脚本分解

> ID：11641896
> 
> 赞同：0
> 
> 时间：2012-07-25T02:32:08.197
> 
> 标签：php, parsing, memory-limit

我有几个巨大的 XML 文件，我删掉了几行，所以我可以有一个可管理大小的文件来测试我的解析脚本，用 php.ini 编写。XML 文件中有很多嵌套，有很多列，还有很多空白，所以编写脚本是一场巨大的考验。现在，我在要解析的全尺寸 XML 文件上达到了我的 php 内存限制。

现在，我考虑过的一件事是暂时提高 php 内存限制，但我需要每隔一周左右重新运行这个脚本。另外，我没有最好的系统。运行它并让它融化是一种完全真实的可能性，也是我的“完美风暴”之一。

我还考虑尝试学习一门新语言，例如 perl 或 python。无论如何，我可能可以用来了解其中一种语言。不过，如果只是为了时间的利益，我宁愿坚持我所拥有的。

有没有办法让 php 将 XML 文件分解成可管理的块，不会将我的机器推到极限？因为 XML 文件中的每一行都由一个 ID 列包装，所以似乎我应该能够切到第 n 行闭包，解析被切片的内容，然后休眠，还是什么？

有任何想法吗？

# ruby-on-rails - Carrierwave 和 Activerecord 多查询

> ID：11641898
> 
> 赞同：1
> 
> 时间：2012-07-25T02:32:21.593
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, ruby-on-rails-3.1, carrierwave

我终于诊断出一个问题，我一直在查询 activerecord 中的表。而不是使用 Model.all 执行 1 个查询，而是分别调用每个查询。当我注释掉时，该错误已修复

```
 mount_uploader :image, ImageUploader
  mount_uploader :home_image, HomeImageUploader 
```

由于某种原因 mount_uploader 再次调用每个类实例并减慢我的查询速度。有没有人遇到过类似的问题？我在carrierwave github文档中看到要添加

```
require 'carrierwave/orm/activerecord' 
```

到我的模型课，但这没有任何帮助。此外，对carrierwave 文档中的这一行感到困惑，“确保在加载 ORM 后加载 CarrierWave”。任何建议将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T04:47:40.540

我终于找到了这个错误，所有这些额外的查询都发生了，因为我在上传器中设置了我的 store_dir

```
 "images/#{Rails.env}/#{model.class.to_s.underscore}/#{model.class.find(model.id).name}" 
```

它不断加载模型以获取其名称。我把它改成

```
"images/#{Rails.env}/#{model.class.to_s.underscore}/#{model.id}" 
```

它解决了我的查询问题。我希望这可以帮助其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-11T15:45:00.260

我有同样的问题。在上传者代码中：

```
def store_dir
  "uploads/products/#{model.product.id}"
end 
```

做了一些额外的产品模型加载。并且找不到原因（尝试包含、eager_load 等...）））））

我把它改成

```
def store_dir
  "uploads/products/#{model.product_id}"
end 
```

它解决了这个问题。谢谢指导。

# java - 将 2 个类合并在一起

> ID：11641899
> 
> 赞同：-2
> 
> 时间：2012-07-25T02:32:29.360
> 
> 标签：java, mysql

我想将我的 Vote4Cash 类与我的命令类合并。

我的 vote4cash 课程将在玩家输入命令检查时奖励他们的投票。因此，我需要将 vote4cash 进程构建到我的命令类中。我一直在尝试这样做，这是我的 vote4cash 系统中最重要的部分。如果您知道我如何将它们合并在一起或使它们一起工作，请告诉我如何。我尝试使用导入，但没有成功。我没有编写命令类，其他人编写了代码，这让我更难添加 vote4gold 进程或让它们一起工作。

我的 Vote4Cash 课程：

```
import java.sql.*;
import java.net.*;

public class Vote4Cash {

  public static void main(String args[]) {

  Connection con = null;
  Statement st = null;
  Statement stmt = null;
  ResultSet auth = null;
  ResultSet given = null;

    String url = "jdbc:mysql://localhost:3306/";
    String db = "vote4gold";
    String driver = "com.mysql.jdbc.Driver";
    String user = "root";
    String pass = "";

  try {
  Class.forName(driver);
  con = DriverManager.getConnection(url + db, user, pass);
  con.setAutoCommit(false);
  st = con.createStatement();
  stmt = con.createStatement();

  //String give = "SELECT `given` FROM `has_voted` WHERE `ip` LIKE '+thisIp.getHostAddress()'";
        InetAddress thisIp =InetAddress.getLocalHost();
String give = "SELECT `given` FROM `has_voted` " + 
              "WHERE `ip` = '" + thisIp.getHostAddress() + "'";
  given = st.executeQuery(give);

while (given.next()) {
    if (given.getInt("given") > 0) {
        System.out.println("You've already recieved a reward for the last time you voted, but thanks again for voting.");
    } else {
        System.out.println("Thanks for voting! You've been rewarded 25m gold! Vote again tomorrow!");
        String sql = "SELECT has_voted (given) Replace('0', '0', '1')";
        int rows = stmt.executeUpdate("UPDATE has_voted SET given = 1 WHERE given = 0");
        System.out.println("The given reward column has been set to 1 for the ip address:");
       System.out.println("IP:"+thisIp.getHostAddress());
    }
  }
  } catch (Exception e) {
  System.out.println(e);
  }
  }
} 
```

我的命令类（不适合这里）： http: [//pastebin.com/GXFLfMX4](http://pastebin.com/GXFLfMX4)

谢谢！如果您需要更多详细信息或不明白某些内容，请告诉我，以便我帮助您。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T03:02:12.873

首先，我不会尝试“合并”代码。当您从其他人那里收到代码时，这绝不应该是解决方案。您应该首先尝试了解它的用途。

为此...

对于初学者，`Commands`该类被声明为： `package server.model.players.packets;`

所以你需要导入那个包。此外，`Commands`类中的方法将 a`Client`作为参数。因此，为了使用这个类，您需要能够实例化`Client`.

那`Client`是哪个？好吧，看看 中的 import 语句`Commands`，它似乎是`server.model.players.Client`. 您需要访问该类并能够创建实例。

`Commands`您是否获得了类或 jar的源代码或编译集？如果是前者，您将需要访问所有其他`Commands`导入的类才能编译它。

我怀疑，看看这个`Commands`类的冗长，以及你把它当作一个黑盒子的愿望（但仍然将它与你的类合并？！？（这实际上只是一个`main`方法的包装器）），你真的只是寻找快速解决方案。我会开始小很多。抵制合并的冲动。尝试编写一个`Commands`你自己的类，用几个简单的方法来获取你设计的类。您最终将获得一个您理解的过程并获得更好的经验。

# ios - UIView 的最简单（矩形）投影

> ID：11641900
> 
> 赞同：6
> 
> 时间：2012-07-25T02:32:51.877
> 
> 标签：ios, cocoa, uiview, shadow

我见过很多片段：对于像投影这样简单的东西来说太复杂了，需要子类化 UIView 并使用quartz2d 调用，或者我无法让它们工作。

我只想在我作为子视图添加到另一个视图的视图上执行此操作（子视图取自我刚刚分配的另一个视图控制器 - 我知道这可能不太好但是哦），没有 IB 或任何东西。最简单/最被接受的方法是什么？如果我希望它在 iOS 4 上运行会有所不同吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T03:13:04.037

就像导入`<QuartzCore/QuartzCore.h>`和使用类似的代码片段一样简单，如下所示：

```
self.viewAboutContainer.layer.shadowColor = [[UIColor blackColor] CGColor];
self.viewAboutContainer.layer.shadowOpacity = 0.7;
self.viewAboutContainer.layer.shadowRadius = 4.0;
self.viewAboutContainer.layer.shadowOffset = CGSizeMake(5.0f, 5.0f);    
self.viewAboutContainer.layer.shadowPath = [UIBezierPath bezierPathWithRect:self.viewAboutContainer.bounds].CGPath; 
```

# ruby-on-rails-3 - 删除密码确认；设计

> ID：11641901
> 
> 赞同：10
> 
> 时间：2012-07-25T02:32:52.383
> 
> 标签：ruby-on-rails-3, devise, devise-confirmable

我在我的 Rails 3.2.6 应用程序中使用设计进行身份验证。我有`password confirmation`第一个，但现在我想删除它。该怎么做？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-25T03:03:12.673

您只需`password_confirmation`要从表单中删除该字段。

^([此答案中的更多信息。](https://stackoverflow.com/a/13587139/72321))

# google-app-engine - 通过 Google 应用从 Intranet 托管应用

> ID：11641902
> 
> 赞同：0
> 
> 时间：2012-07-25T02:32:59.170
> 
> 标签：google-app-engine, proxy, reverse-proxy

是否可以创建一个谷歌应用引擎程序，将 http 请求路由到本地网络上的服务器？

构建这样的程序的最佳方法是什么？

我试图摆脱从托管服务提供商那里购买服务器，而只是使用本地网络服务器，并使用谷歌应用程序作为一种代理。防火墙将被配置为仅允许从谷歌应用引擎服务器访问服务器。

如果以前在一个开源项目中这样做过，那就太好了，但我一直找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T03:59:14.380

如果你想要的只是一个指向你的动态 IP 地址的域名，你可以试试动态 DNS。它专为您的用例而设计，您无需编写任何代码；您只需要支持它的路由器或带有`cron`. 有很多提供商，但我对[Dyn DNS](http://dyn.com/dns/)有很好的体验，特别是他们的远程访问计划。

# asp.net-mvc-3 - 带有 asp.net mvc 网络服务的 IIS 7.5

> ID：11641903
> 
> 赞同：0
> 
> 时间：2012-07-25T02:33:25.837
> 
> 标签：asp.net-mvc-3, web-services, iis, asmx

这是怎么回事？

我正面临 IIS 7.5 应用程序、asp.net MVC 3 和一组 Web 服务的问题。我在端口 80 上创建了一个新的 Web 应用程序，其中包含一个 asp.net mvc 网站，效果很好，我需要使用同一个应用程序来部署 3 个 Web 服务（asmx），所以我创建了以下文件夹结构：

```
-IIS
   - My WebSite (ASP.NET MVC)
      - Services (converted to application)
      - Service 01 (converted to application)
      - Service 02 (converted to application)
      - Service 03 (converted to application) 
```

对于这些服务，我使用了一个新池，其中为**网络服务**设置了身份并为匿名应用程序设置了身份验证（配置为使用应用程序池身份）。

我已经让应用程序在不同的站点（两个不同的端口）上运行，但我需要使用相同的。您知道我可以测试或做什么吗？或者也许是关于它的线索？任何评论都对我有效！

非常感谢！

蒂亚戈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:16:25.347

不确定这是否适用于 Web 服务，但考虑绑定

[http://www.orcsweb.com/blog/mark-newnam/how-to-set-up-site-bindings-in-internet-information-services-iis/](http://www.orcsweb.com/blog/mark-newnam/how-to-set-up-site-bindings-in-internet-information-services-iis/)

# symfony - 没有虚拟主机的 Symfony 2 控制器测试

> ID：11641904
> 
> 赞同：1
> 
> 时间：2012-07-25T02:33:31.153
> 
> 标签：symfony

如何在 symfony 2 上运行没有虚拟主机的控制器测试？我的项目在网络根目录“http://localhost/Symfony/web/”下

```
public function testIndex() {
    $client = static::createClient();
    $crawler = $client->request('GET', '/home');
    $this->assertTrue($client->getResponse()->getStatusCode() == '200');
    $this->assertTrue($crawler->filter('title:contains("MyTitle")')->count() > 0);
} 
```

上面的测试尝试请求“http://localhost/home”，我尝试将请求更改为完整的 url，但它还不起作用

有谁知道我该如何解决？

# drools - drools 5.0：有没有人看到这个错误？

> ID：11641908
> 
> 赞同：0
> 
> 时间：2012-07-25T02:33:54.600
> 
> 标签：drools, rule-engine

当我修改类的默认构造函数时，我在drl文件中创建了一个新对象。发生错误，如下所示： ***源附件不包含文件AbstractWorkingMemorry.class的源***

## 代码是：

```
public static class Message {

    public static final int HELLO = 0;
    public static final int GOODBYE = 1;

    private String message;

    private int status;

    public String getMessage() {
        return this.message;
    }

    public void setMessage(String message) {
        this.message = message;
    }

    public int getStatus() {
        return this.status;
    }

    public void setStatus(int status) {
        this.status = status;
    }

    Message(String message, int status){
        this.message = message;
        this.status = status;
    }
} 
```

## drl文件内容：

```
rule "init"
    when
        eval(true);
    then
        Message message = new Message("s", 1);
        message.setMessage("Hello Xiaodong");
        message.setStatus(Message.HELLO);

        insert(message); 
end 
```

* * *

如何处理问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:56:14.857

要么使您的 Message 构造函数公开：

```
public Message(String message, int status){
    this.message = message;
    this.status = status;
} 
```

并在您的 DRL 中导入 Message 并使其成为非静态类。

或者通过声明它与 Message 位于同一包中并使其成为非静态类来启动您的 DRL。

# java - android mediaplayer 应用程序中服务和活动之间的通信

> ID：11641913
> 
> 赞同：4
> 
> 时间：2012-07-25T02:34:26.583
> 
> 标签：java, android, media-player, media

我正在开发一个媒体播放器应用程序，它将使用服务在后台播放音乐，但我对与服务通信的所有不同方式感到困惑。我希望服务在播放时告诉活动，以便按钮可以更改为暂停。我还想要一个搜索栏，所以我需要有关服务中当前播放内容的信息。

一段时间以来，我一直在研究不同的例子，似乎每个人都在以不同的方式做这件事。有些将活动绑定到服务，有些只使用全局广播，而 android 音乐播放器正在使用aidl。

就媒体播放器而言，我应该使用哪种方法？是否允许我做在其他方法上不起作用的事情？使用aidl 可以让他们做什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T04:31:36.543

在过去的几个月里，我遇到了大致相同的问题。这不是一个真正容易回答的问题，因为决策中有几个变量。很可能，您最终会使用这些选项的组合。

问：沟通是一种方式吗？只是从服务到活动？
A：如果是这样，那么[LocalBroadcastManager](http://developer.android.com/reference/android/support/v4/content/LocalBroadcastManager.html)就是你的朋友。我发现这非常有用，并且是从服务到活动进行通信的最简单方法之一。

问：您希望其他应用程序接收您的广播吗？
A：如果是这样，那么您将无法使用 LocalBroadcastManager。您必须将全局变量与 Context.sendBroadcast() 一起使用。

问：您是否希望从您的活动中与服务进行交流？
A：这个很棘手。如果您只需要告诉服务一些事情并且不期望任何回报，那么您可以使用意图。但是，如果您需要从服务返回信息，那么您肯定会想要研究[与该服务的绑定](http://developer.android.com/guide/components/bound-services.html)。

我发现当绑定到您的服务时，我有时会发现自己在玩等待游戏，而活动绑定到服务。因此，当时间很重要时，这可能会有点困难。您必须努力确保您已经绑定到该服务，然后才能与它进行通信。

鉴于您的示例并假设您不希望其他应用程序接收您的广播，您可以在媒体播放器服务中执行以下操作。

```
Intent broadcastIntent = new Intent(PlayerService.AUDIO_PLAYING);
LocalBroadcastManager.getInstance(this).sendBroadcast(broadcastIntent); 
```

然后，在您的玩家活动中，您需要注册为该意图的侦听器。也许在您的 onCreate() 或 onStart() 中。这可能因您的应用程序而异。

```
IntentFilter broadcastsToListenFor = new IntentFilter();
broadcastsToListenFor.addAction(PlayerService.AUDIO_PLAYING);
LocalBroadcastManager.getInstance(this).registerReceiver(broadcastReceiver, broadcastsToListenFor); 
```

你的 broadcastReceiver 看起来像这样......

```
// Set up broadcast receiver
private BroadcastReceiver broadcastReceiver = new BroadcastReceiver() {

    @Override
    public synchronized void onReceive(Context context, Intent intent) {

        if(action.equals(PlayerService.AUDIO_PLAYING)) {

          // Set your play button image to pause here
        }
    }
}; 
```

最后，确保您在 onStop() 或 onPause() 方法中取消注册您的活动以接收这些广播。同样，根据您的具体情况...

```
LocalBroadcastManager.getInstance(this).unregisterReceiver(broadcastReceiver); 
```

我们最近做了一些与此非常相似的事情，并且效果很好。我真的认为值得测试和尝试每个选项，因为您可能会发现每个选项都是正确的选择。

# php - MySQL sql语句检索数据失败

> ID：11641915
> 
> 赞同：0
> 
> 时间：2012-07-25T02:34:36.860
> 
> 标签：php, mysql

以下示例无法产生任何结果。

```
$cxr_sql=mysql_query("select username from game g join user u
                      on g.cxrId = u.id
                      where g.ticket='" . $gameTicket . "'");
$row=mysql_fetch_array($cxr_sql);
$cxr=$row['username']; 
```

但是，这个（相同的代码）适用于其他系统。当在失败的系统上的 mysqlworkbench 中执行时，sql 会产生预期的结果。那么为什么从 PHP 执行时它突然为空。

把我逼疯了！

PS。我已将 sql 语句回显到屏幕上。它在工作台上表现良好？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T02:39:07.453

尝试做任何一个

```
$row=mysql_fetch_array($cxr_sql, MYSQL_ASSOC); 
```

或者

```
$row=mysql_fetch_assoc($cxr_sql); 
```

我知道 mysql_fetch_array 假设默认为两者..但可能发生了一些奇怪的事情

如果这不起作用尝试做

```
echo mysql_error(); 
```

查询后

# java - Fragment.instantiate 致命异常

> ID：11641917
> 
> 赞同：2
> 
> 时间：2012-07-25T02:35:07.190
> 
> 标签：java, android, list, android-fragments

我有以下代码：

```
 import android.support.v4.app.FragmentActivity;
 import android.support.v4.app.Fragment;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_exercises_list);

    List<Fragment> fList = new Vector<Fragment>();
    fList.add(Fragment.instantiate(this, "All")); 
```

这是一个致命的例外。如果我删除 line `fList.add(Fragment.instantiate(this, "All"));`，那很好。那么发生了什么？我不知道如何使用片段，所以我猜我的问题是一个nooby。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T03:42:34.727

如果您想在 fList 中添加 Fragment 类实例，那么下面的代码将为您提供帮助。

```
fList.add(Fragment.instantiate(this, Your-Fragment-Class-Name.class.getName())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T04:21:14.350

如果您`Fragment`是嵌套的内部类，请确保您已将其声明为`public static class`. 同样，确保`Fragment`命名为`All`.

话虽如此，我希望你知道你在做什么，因为我无法想象我会存储 a `Vector`of `Fragment`s 的场景。至少你应该使用 an`ArrayList`代替。

此外，您应该发布您收到的确切错误消息，以及您的 logcat 输出的其余部分。

# android - Android Intent.CALL 不起作用

> ID：11641918
> 
> 赞同：1
> 
> 时间：2012-07-25T02:35:24.233
> 
> 标签：android, android-intent, phone-call

我查看了[此处](https://stackoverflow.com/questions/4181402/android-making-a-phone-call-from-home-screen-widget)的示例并尝试复制答案。然而，

`Intent callIntent = new Intent(Intent.ACTION_CALL);`什么都不做

`Intent callIntent = new Intent(Intent.ACTION_DIAL);`带我到预设号码的数字键盘。

我希望它在不带我到数字键盘的情况下拨打号码。我如何使它工作？

onUpdate()：

```
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {
    // TODO Auto-generated method stub
    super.onUpdate(context, appWidgetManager, appWidgetIds);
       Log.d("HomeWidget", "onUpdate(): ");
        for (int appWidgetId : appWidgetIds) {

            Intent callIntent = new Intent(Intent.ACTION_CALL);
            callIntent.setData(Uri.parse("tel:"+12345678));
            PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, callIntent, 0);

            // Get the layout for the App Widget and attach an on-click listener to the button
            RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget_layout);
            views.setOnClickPendingIntent(R.id.call, pendingIntent);

            // Tell the AppWidgetManager to perform an update on the current App Widget
            appWidgetManager.updateAppWidget(appWidgetId, views);
        }
} 
```

**编辑**

从下面的答案中，我看到 Intent.CALL 存在限制，但我真的很想使用它。任何人都可以帮助我如何解除限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:14:36.933

`ACTION_CALL`哪些应用程序可以使用;发起呼叫将受到限制。大多数应用程序应该使用`ACTION_DIAL`.

请参阅[http://developer.android.com/reference/android/content/Intent.html#ACTION_CALL](http://developer.android.com/reference/android/content/Intent.html#ACTION_CALL)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:00:03.140

原来我所需要的只是

`<uses-permission android:name="android.permission.CALL_PHONE"></uses-permission>`

# http - 传输编码：gzip 与内容编码：gzip

> ID：11641923
> 
> 赞同：106
> 
> 时间：2012-07-25T02:36:08.250
> 
> 标签：http, gzip, content-encoding, transfer-encoding

在是否要做的问题上，目前的情况是什么

```
Transfer-Encoding: gzip 
```

或一个

```
Content-Encoding: gzip 
```

当我想让带宽有限的**客户端****表示他们愿意接受压缩响应**时，**服务器拥有是否压缩的最终决定权**。

后者是例如 Apache 的 mod_deflate 和 IIS 所做的，如果您让它负责压缩。根据要压缩的内容的大小，它会做额外的`Transfer-Encoding: chunked`.

它还将包括一个`Vary: Accept-Encoding`，它已经暗示了问题。`Content-Encoding`似乎是实体的一部分，因此更改`Content-Encoding`数量等于实体的更改，即不同的`Accept-Encoding`标头意味着例如缓存不能使用其缓存版本的其他相同实体。

是否有一个我错过的明确答案（并且没有隐藏在某些 apache 新闻组的长线程中的消息中）？

我现在的印象是：

*   Transfer-Encoding 实际上是现有服务器和客户端实现通过 Content-Encoding 完成大部分工作的正确方法
*   `ETag`内容编码，因为它的语义含义，带来了几个问题（当它透明地压缩响应时，服务器应该做什么？）
*   原因很简单：浏览器不支持它，因为服务器不支持，因为浏览器不支持

所以我假设正确的方法是 a `Transfer-Encoding: gzip`（或者，如果我另外分块身体，它[会变成](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.41 "额外的") `Transfer-Encoding: gzip, chunked`）。在这种情况下，没有理由触摸`Vary`或`ETag`任何其他标题，因为它是传输级别的东西。

现在我不太关心 的“逐跳”性`Transfer-Encoding`，其他人似乎首先关心的是，因为代理可能会解压缩并将未压缩的转发给客户端。但是，如果原始请求具有正确的标头，代理也可以按原样（压缩）转发它，`Accept-Encoding`在我知道的所有浏览器的情况下都是给定的。

顺便说一句，这个问题至少有十年的历史了，参见例如 [https://bugzilla.mozilla.org/show_bug.cgi?id=68517](https://bugzilla.mozilla.org/show_bug.cgi?id=68517)。

对此的任何澄清将不胜感激。无论是在什么被认为符合标准和什么被认为是实用方面。例如，仅支持透明“内容编码”的 HTTP 客户端库将成为反对实用性的论据。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-26T07:19:45.120

引用RFC 2616 的作者之一**Roy T. Fielding的话：**

> 以不一致的方式动态更改内容编码（“从不”或“总是”）使得以后关于该内容的请求（例如，PUT 或条件 GET）无法正确处理。当然，这就是为什么执行动态内容编码是一个愚蠢的想法，以及为什么我将 Transfer-Encoding 添加到 HTTP 作为在不更改资源的情况下进行动态编码的正确方法。

来源：[https ://issues.apache.org/bugzilla/show_bug.cgi?id=39727#c31](https://issues.apache.org/bugzilla/show_bug.cgi?id=39727#c31)

换句话说：不要**进行即时**内容编码，而是使用传输编码！

**编辑：**也就是说，**除非您想将压缩内容提供给只了解 Content-Encoding 的客户端**。不幸的是，这似乎是其中的大多数。但是请注意，您**离开了规范的领域，**可能会遇到诸如 Fielding 和其他人提到的问题，例如在涉及缓存代理时。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-05-07T02:25:28.977

如 RFC 2616 中所定义并在野外实际实现的**正确**用法是客户端发送`Accept-Encoding`请求标头（客户端可以指定多种编码）。然后，服务器可以并且仅在那时，根据客户端支持的编码对响应进行编码（如果文件数据尚未存储在该编码中），在`Content-Encoding`响应标头中指示正在使用哪种编码。然后，客户端可以根据`Transfer-Encoding`(ie, `chunked`) 从套接字读取数据，然后根据`Content-Encoding`(ie: `gzip`) 对其进行解码。

因此，在您的情况下，客户端将发送一个`Accept-Encoding: gzip`请求标头，然后服务器可能决定压缩（如果还没有）并发送一个`Content-Encoding: gzip`可选的`Transfer-Encoding: chunked`响应标头。

是的，`Transfer-Encoding`标头可以在请求中使用，但仅适用于 HTTP 1.1，它要求客户端和服务器实现`chunked`都支持双向编码。

`ETag`唯一标识服务器上的资源数据，而不是实际传输的数据。如果给定的 URL 资源更改了其`ETag`值，则意味着该资源的服务器端数据已更改。

# java - TimeZone.getTimeZone() 对我来说随机失败？

> ID：11641924
> 
> 赞同：0
> 
> 时间：2012-07-25T02:36:09.420
> 
> 标签：java, android, date

在我的应用程序中，我需要将数据转换为位置时间。我有java`Date`和`TimeZoneId`

当我从服务中获取数据时 - 它以 UTC 的形式出现，我也得到了时区。需要转换成那个时区的时间。我创建的功能：

```
 private static Date getDateConvertedToTimeZone(Date utcDate, String timeZoneId)
    {
        TimeZone timeZone = TimeZone.getTimeZone(timeZoneId);
        if (timeZone.getID().equalsIgnoreCase(timeZoneId))
        {
            Log.d(LOG_TAG, "Good: " + timeZoneId + " " + Long.toString(utcDate.getTime()));
            return new Date(utcDate.getTime() + timeZone.getRawOffset() + (timeZone.inDaylightTime(utcDate) ? timeZone.getDSTSavings() : 0));
        }

        Log.d(LOG_TAG, "Bad?: " + timeZoneId + " " + Long.toString(utcDate.getTime()));
        LogData.d(LOG_TAG, "getDateConvertedToTimeZone bad time zone: " + timeZoneId, LogData.Priority.None);
        return utcDate;

    } 
```

简单的？对。只需通过 ID 获取时区并对 Date 对象进行一些数学运算。这就是我的想法......当我解析重复调用的数据函数时，输出如下：

```
07-24 21:31:06.038: DEBUG/com.me.data.TripData(18886): Good: MST 1319896800000
07-24 21:31:06.042: DEBUG/com.me.data.TripData(18886): Good: MST -2208963600000
07-24 21:31:06.053: DEBUG/com.me.data.TripData(18886): Bad?: PST 1320949800000
07-24 21:31:06.057: DEBUG/com.me.data.TripData(18886): Bad?: CST 1320685200000
07-24 21:31:06.061: DEBUG/com.me.data.TripData(18886): Bad?: CST -2208967200000
07-24 21:31:06.073: DEBUG/com.me.data.TripData(18886): Bad?: CST 1320645600000
07-24 21:31:06.077: DEBUG/com.me.data.TripData(18886): Good: EST 1320350400000
07-24 21:31:06.081: DEBUG/com.me.data.TripData(18886): Good: EST -2208970800000
07-24 21:31:06.085: DEBUG/com.me.data.TripData(18886): Good: EST -2208970800000
07-24 21:31:06.093: DEBUG/com.me.data.TripData(18886): Bad?: CST 1321268400000
07-24 21:31:06.096: DEBUG/com.me.data.TripData(18886): Bad?: PST 1320957000000
07-24 21:31:06.108: DEBUG/com.me.data.TripData(18886): Bad?: PST -2208960000000
07-24 21:31:06.116: DEBUG/com.me.data.TripData(18886): Bad?: PST 1321542000000
07-24 21:31:06.120: DEBUG/com.me.data.TripData(18886): Good: MST 1321500600000
07-24 21:31:06.124: DEBUG/com.me.data.TripData(18886): Bad?: CST 1321286400000
07-24 21:31:06.128: DEBUG/com.me.data.TripData(18886): Bad?: CST -2208967200000
07-24 21:31:06.135: DEBUG/com.me.data.TripData(18886): Good: EST 1321981200000
07-24 21:31:06.139: DEBUG/com.me.data.TripData(18886): Bad?: CST 1321884000000
07-24 21:31:06.143: DEBUG/com.me.data.TripData(18886): Bad?: PST 1321646400000
07-24 21:31:06.151: DEBUG/com.me.data.TripData(18886): Bad?: PST -2208960000000
07-24 21:31:06.159: DEBUG/com.me.data.TripData(18886): Bad?: CST 1322485200000
07-24 21:31:06.163: DEBUG/com.me.data.TripData(18886): Good: EST 1321966800000
07-24 21:31:06.163: DEBUG/com.me.data.TripData(18886): Good: EST -2208970800000
07-24 21:31:06.175: DEBUG/com.me.data.TripData(18886): Bad?: PST 1322595000000
07-24 21:31:06.178: DEBUG/com.me.data.TripData(18886): Bad?: CST 1322244000000
07-24 21:31:06.182: DEBUG/com.me.data.TripData(18886): Bad?: CST -2208967200000
07-24 21:31:06.194: DEBUG/com.me.data.TripData(18886): Bad?: PST 1322755200000
07-24 21:31:06.194: DEBUG/com.me.data.TripData(18886): Bad?: PST 1322683440000
07-24 21:31:06.206: DEBUG/com.me.data.TripData(18886): Bad?: PST -2208960000000
07-24 21:31:06.218: DEBUG/com.me.data.TripData(18886): Good: EST 1323190800000
07-24 21:31:06.218: DEBUG/com.me.data.TripData(18886): Good: EST 1323176400000
07-24 21:31:06.221: DEBUG/com.me.data.TripData(18886): Bad?: PST 1322845200000
07-24 21:31:06.229: DEBUG/com.me.data.TripData(18886): Bad?: CST 1323356400000
07-24 21:31:06.233: DEBUG/com.me.data.TripData(18886): Good: EST 1323212400000
07-24 21:31:06.237: DEBUG/com.me.data.TripData(18886): Good: EST 1323194400000
07-24 21:31:06.241: DEBUG/com.me.data.TripData(18886): Good: EST 1323183600000
07-24 21:31:06.245: DEBUG/com.me.data.TripData(18886): Good: EST -2208970800000
07-24 21:31:06.311: DEBUG/com.me.data.TripData(18886): Bad?: PST 1323705600000
07-24 21:31:06.319: DEBUG/com.me.data.TripData(18886): Bad?: CST 1323351000000
07-24 21:31:06.323: DEBUG/com.me.data.TripData(18886): Bad?: CST -2208967200000
07-24 21:31:06.331: DEBUG/com.me.data.TripData(18886): Good: EST 1324054800000
07-24 21:31:06.335: DEBUG/com.me.data.TripData(18886): Good: EST 1324040400000
07-24 21:31:06.339: DEBUG/com.me.data.TripData(18886): Bad?: CST 1323961200000
07-24 21:31:06.343: DEBUG/com.me.data.TripData(18886): Bad?: PST 1323730800000
07-24 21:31:06.346: DEBUG/com.me.data.TripData(18886): Bad?: PST -2208960000000
07-24 21:31:06.354: DEBUG/com.me.data.TripData(18886): Bad?: CST 1324303200000
07-24 21:31:06.358: DEBUG/com.me.data.TripData(18886): Good: EST 1324062000000
07-24 21:31:06.362: DEBUG/com.me.data.TripData(18886): Good: EST -2208970800000
07-24 21:31:06.370: DEBUG/com.me.data.TripData(18886): Bad?: CST 1324603800000
07-24 21:31:06.374: DEBUG/com.me.data.TripData(18886): Bad?: PST 1324306800000
07-24 21:31:06.378: DEBUG/com.me.data.TripData(18886): Bad?: PST -2208960000000
07-24 21:31:06.385: DEBUG/com.me.data.TripData(18886): Good: EST 1324962000000
07-24 21:31:06.389: DEBUG/com.me.data.TripData(18886): Bad?: CST 1324620000000
07-24 21:31:06.393: DEBUG/com.me.data.TripData(18886): Bad?: CST -2208967200000
07-24 21:31:06.405: DEBUG/com.me.data.TripData(18886): Bad?: CST 1325163600000
07-24 21:31:06.413: DEBUG/com.me.data.TripData(18886): Good: EST 1324962000000
07-24 21:31:06.413: DEBUG/com.me.data.TripData(18886): Good: EST -2208970800000
07-24 21:31:06.421: DEBUG/com.me.data.TripData(18886): Bad?: CST 1325768400000
07-24 21:31:06.425: DEBUG/com.me.data.TripData(18886): Good: EST 1325633400000
07-24 21:31:06.428: DEBUG/com.me.data.TripData(18886): Good: EST -2208970800000
07-24 21:31:06.436: DEBUG/com.me.data.TripData(18886): Good: EST 1325599200000
07-24 21:31:06.440: DEBUG/com.me.data.TripData(18886): Good: EST 1325178000000
07-24 21:31:06.444: DEBUG/com.me.data.TripData(18886): Good: EST -2208970800000
07-24 21:31:06.448: DEBUG/com.me.data.TripData(18886): Bad?: PST 1326290400000
07-24 21:31:06.456: DEBUG/com.me.data.TripData(18886): Bad?: CST 1325829600000
07-24 21:31:06.460: DEBUG/com.me.data.TripData(18886): Bad?: CST -2208967200000
07-24 21:31:06.468: DEBUG/com.me.data.TripData(18886): Good: MST 1326178800000
07-24 21:31:06.471: DEBUG/com.me.data.TripData(18886): Bad?: PST 1326121200000
07-24 21:31:06.475: DEBUG/com.me.data.TripData(18886): Bad?: PST -2208960000000
07-24 21:31:06.483: DEBUG/com.me.data.TripData(18886): Good: EST 1326603600000
07-24 21:31:06.487: DEBUG/com.me.data.TripData(18886): Good: MST 1326265200000
07-24 21:31:06.491: DEBUG/com.me.data.TripData(18886): Good: MST -2208963600000
07-24 21:31:06.499: DEBUG/com.me.data.TripData(18886): Good: EST 1326801600000
07-24 21:31:06.507: DEBUG/com.me.data.TripData(18886): Good: EST 1326690060000
07-24 21:31:06.510: DEBUG/com.me.data.TripData(18886): Good: EST -2208970800000
07-24 21:31:06.518: DEBUG/com.me.data.TripData(18886): Bad?: PST 1327064400000
07-24 21:31:06.522: DEBUG/com.me.data.TripData(18886): Good: MST 1327019400000
07-24 21:31:06.526: DEBUG/com.me.data.TripData(18886): Bad?: CST 1326837600000
07-24 21:31:06.530: DEBUG/com.me.data.TripData(18886): Bad?: CST 1326834060000
07-24 21:31:06.585: DEBUG/com.me.data.TripData(18886): Good: EST -2208970800000
07-24 21:31:06.608: DEBUG/com.me.data.TripData(18886): Bad?: CST 1327672800000
07-24 21:31:06.616: DEBUG/com.me.data.TripData(18886): Good: EST 1327496400000
07-24 21:31:06.620: DEBUG/com.me.data.TripData(18886): Good: EST -2208970800000
07-24 21:31:06.628: DEBUG/com.me.data.TripData(18886): Good: EST 1327467600000
07-24 21:31:06.632: DEBUG/com.me.data.TripData(18886): Good: MST 1327042800000
07-24 21:31:06.632: DEBUG/com.me.data.TripData(18886): Bad?: PST -2208960000000
07-24 21:31:06.643: DEBUG/com.me.data.TripData(18886): Good: MST 1327926600000
07-24 21:31:06.647: DEBUG/com.me.data.TripData(18886): Bad?: CST 1327616100000
07-24 21:31:06.651: DEBUG/com.me.data.TripData(18886): Bad?: CST -2208967200000
07-24 21:31:06.659: DEBUG/com.me.data.TripData(18886): Good: EST 1328245200000
07-24 21:31:06.663: DEBUG/com.me.data.TripData(18886): Good: MST 1327906800000
07-24 21:31:06.667: DEBUG/com.me.data.TripData(18886): Good: MST -2208963600000
07-24 21:31:06.678: DEBUG/com.me.data.TripData(18886): Good: EST 1327060800000
07-24 21:31:06.678: DEBUG/com.me.data.TripData(18886): Bad?: CST 1327060800000
07-24 21:31:06.682: DEBUG/com.me.data.TripData(18886): Bad?: CST 1327060800000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T02:48:20.550

您是否使用 3 个字母的时区标识符？Andorid 不支持此功能。

查看[文档](http://developer.android.com/reference/java/util/TimeZone.html#getTimeZone%28java.lang.String%29)

> 除了特殊情况“UTC”和“GMT”（在此上下文中是同义词，都对应于 UTC），Android 不支持 Java 1.1 中使用的已弃用的三字母时区 ID。

你应该使用

> 表单 Area/Location 的 Olson 名称，例如 America/Los_Angeles。getAvailableIDs() 方法返回支持的名称。

您还可以使用 GMT+05:00 语法。

# php - 表单数据未发布到另一个页面

> ID：11641925
> 
> 赞同：0
> 
> 时间：2012-07-25T02:36:12.623
> 
> 标签：php, html, forms, post

我正在努力解决我以前从未遇到过的问题。我在一个页面上有一个表单，它通过 POST 将其数据提交到另一个页面，但数据没有到达另一个页面。如果我制作`action=""`然后`var_dump()`在表单的页面顶部，POST数据打印出来很好，但是如果我制作`action="http://localhost/dir/"`并放在`var_dump()`该页面的顶部，然后`array empty`打印出来。到底是什么导致了这种行为？我该如何调试？我迷路了。

形式：

```
<form id="form" method="post" action="http://localhost/dir">
    <input type="hidden" name="id" value="19">
    <select style="width: 60px;" name="number">
        <option value="1">1</option><option value="2">2</option><option value="4">4</option>
    </select>

    <input type="submit" class="input_submit" value="Submit" id="submitButton">
</form> 
```

index.php 文件顶部的代码：

```
var_dump($_POST);die(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T03:01:59.740

要将数据发布到位于不同目录的页面，请使用相对路径。

例如，考虑这个。DirSub1 和 DirSub2 处于同一级别，它们都在 DirTop 内。

*   目录顶部
*   目录1
*   目录2

现在，如果您的表单在目录 DirSub1 中并且您需要将其发布到 DirSub2 中的 x.php，您可以像这样编写 action 属性：

**动作=“../DirSub2/x.php”**

希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T05:14:01.597

尝试

```
<form id="form" method="post" action="../dir/index.php">
    <input type="hidden" name="id" value="19">
    <select style="width: 60px;" name="number">
        <option value="1">1</option><option value="2">2</option><option value="4">4</option>
    </select>

    <input type="submit" class="input_submit" value="Submit" id="submitButton">
</form> 
```

假设“dir”目录位于包含此表单的文件的目录之外。

# scheme - 方案，电话/抄送

> ID：11641926
> 
> 赞同：2
> 
> 时间：2012-07-25T02:36:14.093
> 
> 标签：scheme, continuations, callcc

因此，我试图`call/cc`在 Scheme 中弄清楚这一切。以下是我正在使用的代码：

```
(+ 1 (call/cc
  (lambda (k)
    (if (number? k)
        (call/cc (lambda (k) (k (- 1 k))))
        (k 4))))) 
```

所以在这里我们开始在第一个括号中添加两个参数。`1`其余的我们必须评估，因为急切的评估。所以我们有一个`call/cc`接受一个参数的函数，一个函数，它`call/cc`通过调用来评估。（我说的对吗？）同时它包含了到目前为止在我们的第一个括号中发生的其余部分，即`(+ 1 [])`，它是“延续”。（我说的对吗？）所以我们`k`用我刚才描述的延续来调用 lambda `(+ 1 [])`，. 然后在函数中询问这是否是一个数字，它不是并且执行“then”。我在这里“迷路”了，这一秒`call/cc`做什么？调用什么`(k 4)`来使整个事情评估为`5`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T02:43:10.070

你很接近！我认为你所有的问题都是对的。

您传递给的函数`call/cc`接受一个参数（`k`在您的示例中），这是一种将值返回到当前延续的方法。`k`是一个参数的函数。当您使用值调用该函数时，该值将返回并代替`_`in this: `(+ 1 _)`。

因此，在您的示例中，`(number? k)`永远不会正确，并且永远不会执行第二次调用`call/cc`。（即使是这样，它也会因运行时错误而失败，`(- 1 k)`从 1 中减去一个函数。）所以它实际上执行了“else”分支：`(k 4)`，它返回 4，`(+ 1 4)`所以结果是 5。

希望这很清楚！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T07:59:18.590

`call/cc`就像[`setjmp`](http://en.wikipedia.org/wiki/Setjmp.h)。它定义了一个**退出点**，后面的代码可以直接“跳转”到，就像这样`longjmp`做。

它遵循一定的协议，所以我们总是写

```
( .... surrounding code .....
   (call/cc (lambda (k)
      .... inner code which has access to the exit point "k" ....
      )) .... more surrounding code .... ) 
```

在该协议下，“内部”代码照常执行，但`k`在其范围内也有一个名称。“周围的”代码都无法访问它，因为它超出了`k`'s 的范围。

`k`这是一个*一流的*值（当然，正如它的名字一样）。`(call/cc ...)`Scheme 运行时系统将在幕后自动为其分配调用点的延续。对于程序员来说，只要我们可以访问它，我们就可以使用它。

延续是一个参数的函数。当调用该函数时，它会将其参数传递给延续的调用上下文。但既然`k`是一等的命名值，我们可以自由地传递它。“内部”代码可以像我们想要的那样复杂，它可以调用其他地方定义的其他函数等。如果它`k`作为参数传递给这样的外部函数，它也可以使用它。

使用值调用`k`意味着将该值返回到原始`(call/cc ...)`调用的调用上下文中。***直接***。就像`longjmp`ing 那里（除了我们可以在那里返回任何值，而不仅仅是`int`）。

# sharepoint - sharepoint mysite 身份验证

> ID：11641933
> 
> 赞同：2
> 
> 时间：2012-07-25T02:37:33.263
> 
> 标签：sharepoint, forms-authentication, aspnetdb, mysite, sql-authentication

我在我的共享点服务器中创建了 mysite 和其他两个站点作为 3 个不同的 Web 应用程序，例如

```
http://site1.sp.com:45 - site 1
http://site2.sp.com:45 - site 2
http://mysite.sp.com:45 - mysite site 
```

所有站点都在使用身份验证 ( `aspnetdb`)

每个站点（站点 1 和站点 2）都有不同的内容和不同的用户，这些用户都有他们的 mysite

mysite.sp.com Web 应用程序。所以当用户想要访问 mysite 时，我会重定向到 mysite.sp.com 站点，它会再次要求对用户进行身份验证。我需要将 mysite 放在单独的 Web 应用程序中。

我已`http://*.sp.com`在 ie.but 中添加到 Intranet 区域，但仍然是 mysite 提示登录页面。

那么有什么解决方案可以让 mysite 身份验证正常工作..

请建议我..

# ios - 有多个项目的工作区还是一个有多个目标的项目？

> ID：11641935
> 
> 赞同：7
> 
> 时间：2012-07-25T02:37:51.133
> 
> 标签：ios, xcode, project, target, workspace

我有 4 个类似的 iOS 应用程序。它们是闪存卡应用程序，每个应用程序都有不同的主题。他们共享很多类和图像。现在我将它们全部 4 作为单独的项目，但我希望简化维护和共享资源。将所有 4 个项目放在同一个工作区中，还是在一个项目中有 4 个目标会更好？每种方法有哪些优点/缺点？它们看起来非常相似。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-09-05T09:35:13.227

这是 Marty 发布的 PDF 的摘录。这是一个很棒的文档，但是 4.4MB 并且可能会在很多人下载后下线；）

**将多个目标放在一个项目中的权衡**

通过考虑所涉及的一些权衡，您可以帮助确定是否将多个或所有目标放在一个项目中。以下是在一个项目中组合多个目标的一些优点：

*   索引适用于所有目标。需要索引信息才能访问类浏览器中的类、查看项目符号智能组中的符号以及充分利用代码完成功能。还需要使用 Command–双击来跳转到定义并使用符号对应项。

*   您可以轻松地设置项目中目标之间的依赖关系。

*   使用该项目的任何人都可以访问其所有文件。

*   如果您的计算机有多个 CPU，或者您可以访问网络上的其他计算机，则可以使用并行构建或分布式构建来缩短大型项目的构建时间。有关详细信息，请参阅 Xcode 项目管理指南和减少构建时间中的“并行构建”。

以下是将所有目标放在一个项目中的一些缺点：

*   使用该项目的任何个人或团队都可以看到所有代码，即使他们只处理一个目标或整个项目的一小部分。

*   项目规模可能会变得笨重；这可能会导致 Xcode 花费很长时间来执行索引等操作。

*   所有目标必须使用相同的 SCM 系统。

*   所有目标都必须使用相同的 SDK 构建。

*   您不能使用 Xcode 调试器同时调试一个项目中的两个可执行文件。

**使用多个项目的权衡**

将软件产品分解为多个项目和目标也需要权衡取舍。以下是使用多个项目的一些优点：

*   您可以将项目用作在不同个人或团队之间分配工作的单位。单独的项目允许您隔离代码（例如，限制对机密信息的访问）。

*   每个项目的大小可以更易于管理，Xcode 可以更快地执行索引、构建和其他操作。

*   如果项目需要共享输出，它们可以构建到一个公共目录中，如 Xcode 项目管理指南中的“构建位置”中所述。

*   您可以使用跨项目引用来构建当前项目所需的其他项目。

*   每个项目都可以使用存储在不同 SCM 系统中的源代码。但是，如果个人可以物理访问其他项目，仍然可以查看来自使用相同 SCM 系统的多个项目的 SCM 信息。

*   每个项目可以使用不同的 SDK。

*   每个项目都可以定义一个单独的构建配置列表。

*   您可以使用调试器同时调试两个或多个可执行文件，每个项目中一个。当产品直接通信或以其他方式交互时，这很有用。

以下是拥有多个项目和目标的一些缺点：

*   您没有跨项目索引，因此您只能访问其他项目专门公开的符号。这意味着，例如，您不能在其他项目中自动查找定义，除非您可以物理访问它们（不仅仅是访问它们的最终产品）。同样，您不能充分利用依赖于索引的其他功能。这包括使用代码完成、使用 Command-双击跳转到定义、重构和使用符号对应项。

*   许多较小项目的管理可能会产生额外的开销。例如，要在多个项目中设置一个依赖于其他目标的目标，您必须首先设置跨项目引用。

    同样，使用多个项目可能需要团队之间进行额外的沟通。

*   对于从事多个项目的个人来说，在多个打开的项目之间切换可能会变得笨拙。然而，这个问题可以通过使用 Organizer 得到缓解（有关详细信息，请参阅使用 Organizer）。

*   单个项目较小，不太可能利用分布式构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T03:04:23.967

终于找到了我在这里寻找的文件：http: [//hoangtuanonline.com/mad/iPhone%20documents/iphone%20devdocs/Xcode_Workspace.pdf](http://hoangtuanonline.com/mad/iPhone%20documents/iphone%20devdocs/Xcode_Workspace.pdf)

具体来说，从第 29 页开始有一节列出了每种方法的优缺点。

# css - CSS3透视z轴可见性

> ID：11641937
> 
> 赞同：1
> 
> 时间：2012-07-25T02:37:58.180
> 
> 标签：css, perspective

我有一个带有 CSS3 透视图的 DIV 元素。DIV 包含 2 个子 DIV，其中一个在 z 轴上有平移。这应该会导致一个 DIV 在另一个 DIV 前面，因此后面的 DIV 应该被挡在视线之外。
但是，这些 DIV 的可见性似乎是由它们在 HTML 中出现的顺序控制的，而不是由 CSS3 透视图自动处理的。
在下面的代码中，即使在 z 轴上 #div3 在 #div2 之后，它也会显示在前面，因为它在 HTML 中位于之后。
我知道我可以使用该`z-index`属性来明确说明哪个 DIV 应该在前面，但同样，我正在寻找一种更自动化的方法。

```
<html>
<head>
<style type="text/css">
#div1
{
position: relative;
height: 150px;
width: 200px;
-moz-perspective:150px;
-webkit-perspective:150px;
}
.child
{
padding:50px;
position: absolute;
}
#div2
{
background-color: red;
}
#div3
{
background-color: green;
-moz-transform: translateZ(-50px);
-webkit-transform: translateZ(-50px);
}
</style>
</head>
<body>
<div id="div1">
    <div id="div2" class="child">HELLO</div>
    <div id="div3" class="child">HELLO</div>
</div>
</body>
</html> 
```

参考：[**jsFiddle**](http://jsfiddle.net/Rt3xj/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:26:48.817

而不是使用`perspective: 150px;`use `transform: perspective(150px);`。然后，也使用`transform-style: preserve-3d;`使 z 轴变得可用。

这是一个参考（旋转以帮助了解发生了什么）：http: [//jsfiddle.net/joshnh/4DjLP/](http://jsfiddle.net/joshnh/4DjLP/)

以下是相关样式：

```
#div1 {
    transform: perspective(150px);
    transform-style: preserve-3d;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T08:52:43.733

检查`overflow:hidden`您的“3D 空间”容器。

我今天在 Chrome 中遇到了同样的问题，所以我确实尝试将我的更改`-webkit-perspective: 300px;`为`-webkit-transform: perspective(300px);` 但它实际上并没有成功，但在更改层完全停止通过 Z 轴排列后给了我一个提示原因。原来那是`overflow:hidden`在我一直在设置视角的主容器上。

# vb.net - 你能看看你能不能找出我遇到的这些错误？

> ID：11641939
> 
> 赞同：0
> 
> 时间：2012-07-25T02:38:16.787
> 
> 标签：vb.net

我很幸运在这里有一位专家帮助我处理这段代码，但我无法让它工作。我收到各种错误。首先，这里是代码：

```
Imports System
Imports System.Collections.Generic
Imports System.Text
Imports EO.Pdf
Imports System.Collections.Specialized

Partial Class getParcels
    Inherits System.Web.UI.Page
Public Function Download() As FileResult
        // Populate list with urls 
    Dim urls = New List(Of String)() With { _
        "C:\1.html", _
        "C:\2.html" _
    }

        Dim documents = New List(Of EO.Pdf.PdfDocument)()
        For Each url As var In urls
            Dim doc = New EO.Pdf.PdfDocument()
            EO.Pdf.HtmlToPdf.ConvertUrl(url, doc)
            documents.Add(doc)
        Next

        Dim mergedDocument As EO.Pdf.PdfDocument = EO.Pdf.PdfDocument.Merge(documents.ToArray())

        Dim ms = New MemoryStream()
        mergedDocument.Save(ms)
        ms.Position = 0

        Return New FileStreamResult(ms, "application/pdf") With { _
         .FileDownloadName = "download.pdf" _
        }
    End Function 
```

此代码旨在允许我们同时访问多个 url，用逗号分隔它们并将它们合并到一个 pdf 文档中。它给出了 fileResult 未定义的错误。

关于以下内容：

```
C:\1.html
C:\2.html 
```

它说`name of field or property being initialized in an object initializer must start with ','`

那么类型var未定义，urls必须声明，类型MemoryStream未定义，类型FileStreamResult未定义。在我看来，缺少一个系统导入。这是 Essential Objects html to pdf 组件的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T03:05:23.000

使用`From`,

```
 Dim urls = New List(Of String)() From
      {
       "C:\1.html",
       "C:\2.html"
      } 
```

或者

```
 Dim urls = New List(Of String)(
            {
              "C:\1.html",
              "C:\2.html"
            }) 
```

# android - Android：标签布局的优点和缺点

> ID：11641942
> 
> 赞同：1
> 
> 时间：2012-07-25T02:39:00.150
> 
> 标签：android, tabs

Android 为我们提供了选项卡布局，可以将应用程序分成几个活动。
但是，使用选项卡布局是一种好习惯吗？
我们应该使用按钮而不是 tabhost 吗？
我真的没有想法，我不知道我可以在它们之间比较哪些领域。
请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T03:22:47.063

一种方法是使用[TabHost](http://developer.android.com/reference/android/widget/TabHost.html)和[TabActivity](http://developer.android.com/reference/android/app/TabActivity.html)。但是，不推荐使用 TabActivity，建议您使用 Fragments 而不是这种方法。

[这](http://www.vogella.com/articles/Android/article.html#fragments_usage)是关于片段的一个很好的解释和教程。请注意，如果您正在为 3.0（API 11）以下的 Android 进行开发，则需要下载 v4 支持库才能使用片段，并且教程中会更改几个重要的方法名称。

我之前使用的另一种方法是只使用按钮和常规视图，确保在必要时膨胀并显示每个视图。我没有对 Fragments 做太多的事情，但它们似乎从夸大视图等方面做了一些工作。

# java - csv到java中的pdf文件

> ID：11641945
> 
> 赞同：4
> 
> 时间：2012-07-25T02:39:13.583
> 
> 标签：java, pdf, csv, itext

我正在尝试将`csv`文件解析为`pdf`. 我到目前为止所拥有的附在下面。

我的问题是这段代码最终在 pdf 中的文件在 csv 文件的第一行被截断，我不知道为什么。[*附上的例子*]基本上我想要一个没有任何操作的csv文件的pdf版本。我确信这是我如何将数据添加到 itext pdf 的问题，但我真的找不到另一种将数组转发到 pdf 文件的方法。关于修复代码或更简单的任何想法？

```
public static void main(String[] args) throws IOException, DocumentException {
    @SuppressWarnings("resource")
    CSVReader reader = new CSVReader(new FileReader("data1.csv") ,'\'');
    String [] nextLine;
    while ((nextLine = reader.readNext()) != null) {
            // nextLine[] is an array of values from the line
            System.out.println(nextLine[0]);
            String test; 
            test = nextLine[0];

            // step 1
            Document document = new Document();

            // step 2
            PdfWriter.getInstance(document, new FileOutputStream("Test.pdf"));

            // step 3
            document.open();

            // step 4
            PdfPTable arrayTable3 = new PdfPTable(1); 
            arrayTable3.setHorizontalAlignment(Element.ALIGN_LEFT); 

            Phrase phrase1 = new Phrase(nextLine[0]); 
            PdfPCell arrayDetailsCell3 = new PdfPCell(); 

            arrayDetailsCell3.addElement(phrase1); 

            // Add the cell to the table 
            arrayTable3.addCell(arrayDetailsCell3); 

            // Add table to the document 
            document.add(arrayTable3); 

            // step 5
            document.close();
    }
} 
```

CSV 文件：[http](http://dl.dropbox.com/u/11365830/data1.csv)
://dl.dropbox.com/u/11365830/data1.csv PDF 文件：[http ://dl.dropbox.com/u/11365830/Test.pdf](http://dl.dropbox.com/u/11365830/Test.pdf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T05:56:22.820

这是@anand 提出的解决方案（由于缺乏对 SO 工作原理的理解，anand 已将其编辑为问题）。

```
public void createPdf(String filename) throws DocumentException, IOException {
    // step 1
    Document document = new Document();

    // step 2
    PdfWriter.getInstance(document, new FileOutputStream(filename));

    // step 3
    document.open();

    // step 4
    @SuppressWarnings("resource")
    CSVReader reader = new CSVReader(new FileReader("testing.csv") ,'\'');
    List< String[]> myEntries = reader.readAll();
    for (int i = 31; i < myEntries.size(); i++) {
        String[] strings = myEntries.get(i);
        for (int j = 0; j < strings.length; j++) {
             document.add(new Paragraph(strings[j] + "\n"));
        }
    }

    // step 5
    document.close();
    reader.close();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-17T08:35:37.973

在 CSVReader.java 中将 DEFAULT_SKIP_LINES 设置为 0

# android - 从通知开始活动并返回上一个活动

> ID：11641946
> 
> 赞同：3
> 
> 时间：2012-07-25T02:39:36.763
> 
> 标签：android, android-activity

在我的应用程序中，我有两个 Activite，A 和 B。A 是根/启动器 Activity，B 是从推送通知启动的。如果用户在另一个应用程序中，并单击我的推送通知，则将启动 Activity B。当我在此 Activity 上调用 finish() 时，我希望用户在单击通知之前返回到他们所在的应用程序。相反，它们被带到 Activity A，即根 Activity。

有没有办法从通知启动 Activity，然后完成 Activity 并将用户返回到他们之前所在的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:29:32.370

下面的代码没问题，我测试了一下。在 AndroidManifest.xml

```
<activity android:name=".A" android:screenOrientation="portrait" android:configChanges="orientation|keyboardHidden" android:label="@string/app_name" >
<intent-filter>
<action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.LAUNCHER" />            
</intent-filter>         
</activity>              
<activity android:name=".B" android:screenOrientation="portrait"  android:configChanges="orientation|keyboardHidden" android:label="@string/app_name2" >
<intent-filter>          
<action android:name="android.intent.action.MAIN" />     
</intent-filter>
</activity> 
```

从第三个应用程序，调用：

```
Intent intent = new Intent();
intent.setClassName("your.app.packge", "your.app.packge.B");
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);         
context.startActivity(intent); 
```

你可以在你的项目中尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T02:44:32.230

您可以使用特定的额外内容加载通知的 Intent，您可以使用它来更改活动的控制流，这也可以与当前的活动堆栈一起使用以确保方向。

# c - 如何在 C/C++ 中将 char[3] 从 FLV 结构转换为 int

> ID：11641948
> 
> 赞同：-1
> 
> 时间：2012-07-25T02:39:44.053
> 
> 标签：c, arrays, char, int

我必须从 FLV 文件中读取标签，并且有三个字符可以识别数据长度。我已将它们读入 char `dataLength[3]`，但我不知道下一步该做什么。它是二进制的，而不是 ASCII，所以它不像使用`atoi()`转换`char xxx[] = "123"`为整数 123 那样简单。这是我的标签的 C 结构：

```
typedef struct {
  int previousLength;

  char identify; // 8: AUDIO, 9:VIDEO 18: SCRIPT
  char dataLength[3];

  char time[3];
  char timeExt;

  char streamID[3]; // always 0;
  char unused__;
} FLVTag; 
```

我可以从文件中读取标签，但是如何转换`dataLength`为 int？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T03:16:12.120

```
int length = ((unsigned int)xxx[0]) << 16 + ((unsigned int)xxx[1]) << 8 + ((unsigned int)xxx[2]); 
```

[根据http://osflash.org/flv](http://osflash.org/flv)的大端序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T02:51:27.680

您可以使用`int(char - '0')`将 char 转换为相应的十进制整数。例如`int('3' - '0')`= 3。在 C++ 中，您也可以这样使用字符串流：

```
stringstream ss;
ss << char;
int n;
ss >> n; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T03:24:10.877

你可以这样做：

```
int a = (dataLength[0]-'0')*100+(dataLength[1]-'0')*10+(dataLength[2]-'0'); 
```

如果这个 char 数组有更多项目。你可以使用while循环；

# vba - 使用基于幻灯片标题的布尔值从多个PowerPoint文件中提取文本

> ID：11641949
> 
> 赞同：2
> 
> 时间：2012-07-25T02:40:36.260
> 
> 标签：vba, text, powerpoint

我正在尝试将多个 PowerPoint 文件中的文本提取到 txt 文件或 excel 文件中。

**问题是**，我试图只提取具有特定文本标题的幻灯片。由于我有几个 PowerPoint 文件，我希望我的导出文件也可以创建为几个单独的文件。

我相信可以运行一个可以做到这一点的宏，但我不完全确定。这实际上是否可能，如果可以，最好的编码方式是什么？

理论上，这应该是一个简单的“IF”语句，但我对 VBA 不是很好，也不熟悉。

我一直在使用以下代码：（*第二组代码）* [http://www.pptfaq.com/FAQ00274_Export_Text_to_a_text_file-_extract_text_from_PowerPoint_-Mac_or_PC-.htm](http://www.pptfaq.com/FAQ00274_Export_Text_to_a_text_file-_extract_text_from_PowerPoint_-Mac_or_PC-.htm)

以及此链接：（*也是第二组代码）* [从 VBA 中的 powerpoint 文件中提取所有文本](https://stackoverflow.com/questions/4675100/extracting-all-text-from-a-powerpoint-file-in-vba)

第一个链接将文本提取到 txt 文件中，但不允许我提取具有特定标题幻灯片的文本。它似乎还有一行代码可以识别标题幻灯片，这似乎会有所帮助。第二个链接可以导出多个 txt 文件，但我的输出 txt 文件是空白的，也就是我无法让它工作。

我敢肯定，对于任何试图在多个 PowerPoint 中对大量数据进行排序的人来说，这样的东西都会很有用。

如果有人有任何想法，那就太好了！

**跟进**

根据我们在下面评论中的讨论，我添加了 LIKE 和通配符 ("*") 函数，以便代码返回幻灯片标题为**“Walkthrough:”+（单词 walkthrough 之后的任何内容）的所有文本。**当我尝试添加 like 函数时，它会导致 .txt 文件仅显示第一行文本。

至于超链接。它们仍然显示为显示文本。

Siddharth Rout，感谢您迄今为止对我的所有帮助和耐心。

**跟进(2)**

```
'~~> Change Slide Title here
Const ppSTitle As String = "Walkthrough"
'~~> Change PPT Source Directory Here
Const sDir As String = "C:\Documents and Settings\r126162\Desktop\test\"

Sub Sample()
    Dim ppPrsn As Presentation
    Dim ppSlide As Slide
    Dim filesize As Integer
    Dim shp As Shape
    Dim vFile
    Dim No As Long

    vFile = Dir(sDir & "*.ppt*")

    No = 1

    Do While vFile <> ""
        Set ppPrsn = Presentations.Open(FileName:=sDir & vFile)

        For Each ppSlide In ppPrsn.Slides
            If InStr(1, ppSlide.Shapes.Title.TextFrame.TextRange.Text, ppSTitle, vbTextCompare) Then
                '~~> Get a free file handle
                filesize = FreeFile()

                '~~> Open your file
                Open vFile & ".txt" For Output As #filesize

                For Each shp In ppSlide.Shapes
                    If shp.HasTextFrame Then
                        If shp.TextFrame.HasText Then
                            '~~> Export Text
                            Print #filesize, shp.TextFrame.TextRange.Text & " " & shp.TextFrame.TextRange.Characters.ActionSettings(ppMouseClick).Hyperlink.Address
                        End If
                    End If
                Next

                Close #filesize

                No = No + 1
                Exit For
            End If
        Next

        ppPrsn.Close
        vFile = Dir
    Loop
    Set ppPrsn = Nothing
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:51:53.320

如果定义的字符串可用，此代码会查看每个形状。
如果可用，它将使用文件系统对象将形状包含的文本写入文本文件。
要使用它，您需要参考 MS Scripting Runtime 库。
此外，我还提供了一种遍历指定文件夹并检索可用 PowerPoint 演示文稿的方法。

```
Option Explicit

Sub Get_PPT()

Dim oApp                As PowerPoint.Application
Dim oPres               As PowerPoint.Presentation
Dim oSlides             As PowerPoint.Slides
Dim oSlide              As PowerPoint.Slide
Dim oShapes             As PowerPoint.Shapes
Dim oShape              As PowerPoint.Shape
Dim sFolder             As String
Dim sFile               As String
Dim sPath               As String
Dim sSearch             As String
Dim sTitle              As String
Dim iCnt                As Integer

Dim FSO_Ext             As FileSystemObject
Dim FSO                 As FileSystemObject
Dim FSOFile             As TextStream
Dim sFilePath           As String
Dim iNoOfLoop           As Integer
Dim sExtension          As String

Set oApp = CreateObject("Powerpoint.Application")

sFolder = "U:"
If sFolder <> "" Then
    If Right(sFolder, 1) <> "\" Then
        sFolder = sFolder & "\"
    End If
    sFile = Dir(sFolder, vbNormal)
    Do While sFile <> ""
        sPath = sFolder & sFile
        Set FSO_Ext = New FileSystemObject
        sExtension = FSO_Ext.GetExtensionName(sPath)
        If sExtension = "ppt" Or sExtension = "pptx" Then
            Set oPres = oApp.Presentations.Open(sPath)
            sSearch = "partner"
            For Each oSlide In oPres.Slides
                Set oShapes = oSlide.Shapes
                For Each oShape In oShapes
                    If oShape.HasTextFrame Then
                        Debug.Print sTitle
                        sTitle = oShape.TextFrame.TextRange.Text

                        If InStr(UCase(Trim(sTitle)), UCase(Trim(sSearch))) <> 0 Then
                            iCnt = iCnt + 1
                            sFilePath = sPath & iCnt & ".txt"
                            Set FSO = New FileSystemObject
                            Set FSOFile = FSO.OpenTextFile(sFilePath, 2, True)
                            FSOFile.writeline (sTitle)
                            FSOFile.Close
                        End If
                    End If
                Next oShape
            Next oSlide
            Set oSlides = Nothing
            Set oShapes = Nothing
            oPres.Close
        End If
        Set FSO_Ext = Nothing
    sFile = Dir
    Loop
End If

oApp.Quit

End Sub 
```

请注意，没有什么可以阻止您自定义此代码。
例如，假设您想在文本文件中添加更多行（由同一张幻灯片中的其他形状包含），您可以通过将“Writeline”放在一个循环中来使用 FSO 编写多行：

```
For iCnt = 1 To 5 
    FSOFile.WriteLine ("Text at line" & iCnt) 
Next iCnt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:09:12.137

> 第一个链接将文本提取到 txt 文件中，但不允许我提取具有特定标题幻灯片的文本。

这对我有用

```
'~~> Change Title here
Const ppSTitle As String = "Title1"
'~~> Change File Name here
Const FlName = "C:\Sample.Txt"

Sub Sample()
    Dim ppPrsn As Presentation
    Dim ppSlide As Slide
    Dim filesize As Integer
    Dim shp As Shape

    Set ppPrsn = ActivePresentation

    For Each ppSlide In ppPrsn.Slides
        If ppSlide.Shapes.Title.TextFrame.TextRange.Text = ppSTitle Then

            '~~> Get a free file handle
            filesize = FreeFile()

            '~~> Open your file
            Open FlName For Output As #filesize

            For Each shp In ppSlide.Shapes
                If shp.HasTextFrame Then
                    If shp.TextFrame.HasText Then
                        '~~> Export Text
                        Print #filesize, shp.TextFrame.TextRange.Text
                        Debug.Print
                    End If
                End If
            Next

            Close #filesize

            Exit For
        End If
    Next
End Sub 
```

**跟进**

这将创建文件，如、`Sample_1.txt`等。根据您的要求修改它`Sample_2.txt``Sample_3.txt`

```
'~~> Change Title here
Const ppSTitle As String = "Title1"
'~~> Change File Name here
Const FlName As String = "C:\Sample"
'~~> Change Directory Here
Const sDir As String = "C:\Temp\"

Sub Sample()
    Dim ppPrsn As Presentation
    Dim ppSlide As Slide
    Dim filesize As Integer
    Dim shp As Shape
    Dim vFile
    Dim No As Long

    vFile = Dir(sDir & "*.ppt*")

    No = 1

    Do While vFile <> ""
        Set ppPrsn = Presentations.Open(FileName:=sDir & vFile)

        For Each ppSlide In ppPrsn.Slides
            If ppSlide.Shapes.Title.TextFrame.TextRange.Text = ppSTitle Then
                '~~> Get a free file handle
                filesize = FreeFile()

                '~~> Open your file
                Open FlName & "_" & No & ".txt" For Output As #filesize

                For Each shp In ppSlide.Shapes
                    If shp.HasTextFrame Then
                        If shp.TextFrame.HasText Then
                            '~~> Export Text
                            Print #filesize, shp.TextFrame.TextRange.Text
                        End If
                    End If
                Next

                Close #filesize

                No = No + 1
                Exit For
            End If
        Next

        ppPrsn.Close
        vFile = Dir
    Loop
    Set ppPrsn = Nothing
End Sub 
```

# ruby - “\n”与“\n”的奇怪之处

> ID：11641950
> 
> 赞同：2
> 
> 时间：2012-07-25T02:40:37.517
> 
> 标签：ruby, string

我已经离开 ruby​​ 有一段时间了，我注意到 1.9.3 中有一些非常奇怪的东西（至少对我来说）。也许有人可以向我解释。

我试图将一个字符串分成几行，所以我做到了`string.split('\n')`，但这让我很痛苦。

最终我找到了使用单引号而不是双引号的问题。那是`string.split("\n")`

在追踪这个的过程中，我注意到了一些事情

1.  `'\n'.ord == 92`
2.  `"\n".ord == 10`
3.  `'\'.ord`不是有效的红宝石
4.  `'\\'.ord == 92`

我唯一的理论是单引号导致 ruby​​ 不解析字符串，因此将`\n`其视为两个字符。但是，如果是这种情况，为什么不`'\'`通过处理器？

我错过了什么吗？为什么 split 不将字符串转换为正确的 ascii？

PS这是一些测试代码来说明我的观点

```
"asdf\nasdf".split('\n').size #=> 1
"asdf\nasdf".split("\n").size #=> 2 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T02:43:15.647

`'\n'`是一个包含 2 个字符`\`和`n`.

`"\n"`是一个包含 1 个字符的字符串，即带有 ascii 代码的新行字符 (LF) `10`。

当您使用双引号时，`\`用于转义特殊字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T02:47:04.823

除了 xdazz 的信息，`'\'.ord`在语法上是不正确的，因为反斜杠转义了以下单引号。`'\\'.ord`改为用于该目的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T09:07:08.470

双引号在字符串中进行解释/处理，因此`"\n"`是换行符，`'\n'`而是 \ 和 n。

# java - 如何配置石墨来跟踪多个服务器

> ID：11641952
> 
> 赞同：0
> 
> 时间：2012-07-25T02:41:23.920
> 
> 标签：java, amazon-ec2, amazon-web-services, graphite

我们目前正在服务器场内使用石墨，我们希望跟踪我们所有场的 Java 应用程序，但也跟踪每台服务器。

到目前为止，似乎只有全局的在工作，即使在每个应用程序服务器中，我们创建了一个不同的代理与服务器的名称。（它们都是不同的）

我们将石墨数据发送到运行石墨的 EC2 实例（我们的实例所在的外部），但 EC2 实例似乎也只有最后加载的服务器的代理。

我可以这样认为，因为我们的请求是通过代理石墨考虑的，即使我们给他们不同的代理名称，它们也来自同一个来源？

我们如何防止在一个代理下记录所有指标？

我现在看到的唯一解决方案是将石墨放在与农场相同的网络中，但这需要一周时间，因为我们必须等待另一个组给我们访问权限并配置其他盒子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:56:28.713

为什么它不起作用是因为我们使用的是 dns 而不是 ip。使用您的实例的 ip，这应该不是问题。

# json - 使用 Perl 遍历 JSON

> ID：11641954
> 
> 赞同：4
> 
> 时间：2012-07-25T02:41:31.737
> 
> 标签：json, perl

我是 Perl 的新手，想遍历这个 JSON 数据并将其打印到屏幕上。

我怎样才能做到这一点？

```
$arr = '[{"Year":"2012","Quarter":"Q3","DataType":"Other 3","Environment":"STEVE","Amount":125},{"Year":"2012","Quarter":"Q4","DataType":"Other 2","Environment":"MIKE","Amount":500}]'; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-25T02:52:41.420

使用[JSON](http://search.cpan.org/dist/JSON/)或[JSON::XS](http://search.cpan.org/dist/JSON-XS)将 JSON 解码为 Perl 结构。

简单的例子：

```
use strict;
use warnings;

use JSON::XS;

my $json = '[{"Year":"2012","Quarter":"Q3","DataType":"Other 3","Environment":"STEVE","Amount":125},{"Year":"2012","Quarter":"Q4","DataType":"Other 2","Environment":"MIKE","Amount":500}]';

my $arrayref = decode_json $json;

foreach my $item( @$arrayref ) { 
    # fields are in $item->{Year}, $item->{Quarter}, etc.
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-25T03:01:46.493

你有一个哈希数组。

```
use JSON::XS qw( decode_json );

my $records = decode_json($json_text);
for my $record (@$records) {
   for my $key (keys(%$record)) {
      my $val = $record->{$key};
      say "$key: $val";
    }
} 
```

[JSON::XS](http://search.cpan.org/perldoc?JSON%3a%3aXS)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T02:49:04.187

这是 CPAN 上的一个包，它应该可以解决问题，[JSON.pm](http://metacpan.org/pod/JSON)

一旦你解析了它，你就可以像对待任何其他 Perl 引用一样对待它。

**例子**

```
$perl_scalar = $json->decode($json_text) 
```

* * *

**文档**

> 与编码相反：需要一个 JSON 文本并尝试解析它，返回生成的简单标量或引用。错误的呱呱叫。
> 
> JSON 数字和字符串成为简单的 Perl 标量。**JSON 数组变成 Perl arrayrefs**，JSON 对象变成 Perl hashrefs。true 变为 1 (JSON::true)，false 变为 0 (JSON::false)，null 变为 undef。`

类似的堆栈溢出问题： [Parsing an array encoding in JSON](https://stackoverflow.com/questions/3695105/parsing-an-array-encoded-in-json-through-perl)

# java - ViewPager/PageAdapter 导入资源的问题

> ID：11641955
> 
> 赞同：0
> 
> 时间：2012-07-25T02:41:36.020
> 
> 标签：java, android, android-viewpager

好的，所以我下载了 android 支持包并安装了 v4，但由于某种原因，我需要的所有活动都无法导入。这是我第一次尝试使用支持包，而且我只编写了 4 周的 android 程序，如果答案很明显，很抱歉。![在此处输入图像描述](../Images/a20544c85006b187600b8b9fffc41390.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:14:55.253

> 右键单击您的项目
> 
> 选择 Build Path -> Configure Build Path -> Select Java Build Path -> Go to Libraries -> 点击 Add External Jars.. -> 然后选择 android-support-v4.jar -> 然后按 OK。
> 
> 在哪里可以找到 android-support-v4.jar 文件。
> 
> 进入android安装文件夹
> 
> android-Sdk -> extras -> android -> support -> v4 -> （你会在其中找到）android-support-v4.jar。

# asp.net-mvc - 有没有更好的方法在 asp.net-mvc 中做 IOC？

> ID：11641961
> 
> 赞同：2
> 
> 时间：2012-07-25T02:43:02.057
> 
> 标签：asp.net-mvc, interface, inversion-of-control, linfu

我有一个 asp.net-mvc 站点，我正在使用 LinFu 来做 IOC。我遇到了一个问题，其中许多操作具有我想注入控制器的依赖项，但我只想在调用依赖于它的操作时初始化依赖项。

所以在我的控制器中，我的控制器中有以下代码：

```
 public PersonController
   {

    private IPeopleImporter _peopleImporter;

    public override void Initialize(LinFu.IoC.Interfaces.IServiceContainer source)
    {
        _peopleImporter= source.GetService<IPeopleImporter>();
        base.Initialize(source);
    }

    public JsonResult GetDetails(int id)
    {
        var p = _peopleImporter.Get(id);
        var personDetails = new {p.Id, p.FirstName, p.LastName, StandardId = p.StandardIdLogin, p.PersonNumber};
        return Json(personDetails);
    }
   } 
```

启动 PeopleImporter 非常昂贵，所以我的问题是我想解决两件事：

1.  我想让 IPeopleImporter 的实现“可插入”，这样我就可以在接口中将 IOC 放入控制器

2.  我有很多操作，所以如果用户从不调用需要它的特定操作，我不希望启动 IPeopleImporter 的成本。似乎在上面的代码中，我在每次调用 PersonController 时都进行了初始化

我的初始化代码是这样的：

```
this.AddService(typeof(IPeopleImporter), typeof(DatabaseImporter), LifecycleType.Singleton); 
```

这似乎是常见的模式/问题。有没有推荐的解决方案。同时，替代方案（避免性能损失是简单地“新建”控制器内部的概念实现（并避免 IOC）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:11:15.357

第一步是将这个动作放入一个单独的控制器中。这样您就不必为此控制器中的其他操作支付初始化价格。

然后使用真正的 IoC 模式，而不是您当前使用的被视为反模式的服务定位器。在 IoC 中，控制器不应该知道所使用的特定 DI 框架的任何信息。在 IoC 中，控制器接收所有依赖项作为构造函数参数

```
public PersonsController: Controller
{
    private readonly IPeopleImporter _peopleImporter;
    public PersonsController(IPeopleImporter peopleImporter)
    {
        _peopleImporter = peopleImporter;
    }

    public ActionResult GetDetails(int id)
    {
        var p = _peopleImporter.Get(id);
        var personDetails = new { p.Id, p.FirstName, p.LastName, StandardId = p.StandardIdLogin, p.PersonNumber };
        return Json(personDetails, JsonRequestBehavior.AllowGet);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T07:37:03.337

您可以使用下一个技巧来完成您的任务。您不能注入 IPeopleImporter 的实例，而是注入这种类型的工厂：

```
private readonly Func<IPeopleImporter> _peopleImporterFactory; 
```

并在你需要的地方使用这个工厂：

```
var peopleImporter = __peopleImporterFactory(); 
```

例子：

```
 public PersonController 
```

{

```
private readonly Func<IPeopleImporter> _peopleImporterFactory;

public PersonController(Func<IPeopleImporter> peopleImporterFactory)
{
    _peopleImporterFactory = peopleImporterFactory;
}

public JsonResult GetDetails(int id)
{
    var peopleImporter = _peopleImporterFactory();
    var p = peopleImporter.Get(id);
    var personDetails = new {p.Id, p.FirstName, p.LastName, StandardId = p.StandardIdLogin, p.PersonNumber};
    return Json(personDetails);
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T13:10:22.677

我通常通过将**依赖项作为参数注入到我的操作中**来解决这个问题。可以在类级别注入常见或廉价的依赖项，而不寻常或昂贵的依赖项作为参数进入。

以下是 Enterprise Library Unity 的一些示例代码，但您可以修改它：

```
public class UnityActionInvoker : ControllerActionInvoker
{
    readonly IUnityContainer container;

    public UnityActionInvoker(IUnityContainer container)
    {
        this.container = container;
    }

    protected override object GetParameterValue(ControllerContext controllerContext, ParameterDescriptor parameterDescriptor)
    {
        Type parameterType = parameterDescriptor.ParameterType;

        if (parameterType != typeof(string) && !parameterType.IsValueType && container.IsRegistered(parameterType))
        {
            return container.Resolve(parameterType).AssertNotNull();
        }

        return base.GetParameterValue(controllerContext, parameterDescriptor);
    }
} 
```

您可以通过在控制器的构造函数（或所有控制器的公共基类）`ControllerActionInvoker`中进行设置来挂钩它。`Controller.ActionInvoker`

以下是您的控制器的外观：

```
 public PersonController
   {
    public JsonResult GetDetails(int id, IPeopleImporter _peopleImporter /*injected*/)
    {
        ...
    }
   } 
```

# python - python if语句中将带数值的字符串与整数进行比较的难题

> ID：11641965
> 
> 赞同：-4
> 
> 时间：2012-07-25T02:43:19.173
> 
> 标签：python, string

我认为在 python 中将 int 与字符串（带有数值）进行比较时，没有必要显式转换字符串。但是下面的代码给了我一个教训：

```
size = raw_input("a numeric value:")
a_str = 'abcdefghijklmn'
if len(a_str) > size:
    print("The string is longer.")
elif len(a_str) < size:
    print("The string is shorter.")
else:
    print("they are equal in length.") 
```

无论我输入什么值，它总是选择 len(a_str) < size，直到我使用 int(size) 转换大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T03:20:15.467

python[手册](http://docs.python.org/library/stdtypes.html#comparisons)明确提到

> CPython 实现细节：除数字外的不同类型的对象按其类型名称排序；不支持正确比较的相同类型的对象按其地址排序。
> 
> 不同类型的对象，除了不同的数值类型和不同的字符串类型，从不比较相等；此类对象的排序一致但任意（因此对异构数组进行排序会产生一致的结果）。此外，某些类型（例如，文件对象）仅支持退化的比较概念，其中该类型的任何两个对象都不相等。同样，这些对象的顺序是任意但一致的。当任何操作数是复数时，<、<=、> 和 >= 运算符将引发 TypeError 异常。

相关问题：

[Python如何比较string和int？](https://stackoverflow.com/questions/3270680/how-does-python-compare-string-and-int)

# javascript - JQuery：将信息附加到模式时，如何扩展它以包含新的 div？

> ID：11641966
> 
> 赞同：0
> 
> 时间：2012-07-25T02:43:49.290
> 
> 标签：javascript, jquery, append, modal-dialog

我怎样才能使它在添加新的 DIV 时，模态得到扩展？

我正在打开一个模式窗口来使用 ajax 编辑一些信息。提交信息后，我将 Alert div 附加到模态窗口，但滚动条被添加到模态，因为没有足够的空间容纳新的 div。请记住，我正在从模态本身内部附加信息！

非常感谢！！

编辑：我使用 jQuery UI 作为模态。

编辑：这就是我打开模式的方式：

```
 $( "#btn_new" ).live('click',function() {
        var iframe = $('<iframe src="users_new.php" />');

        iframe.dialog({
            autoOpen: true,
            title: "Nuevo Usuario",
            width: 370,
            height: 520,
            show: "fade",
            hide: "fade",
            modal: true,
            resizable: true,
            buttons: {
                "Cerrar": function() {
                    $(this).dialog('close');
                }
            }
            }).width(370 - 12).height(520 - 15);
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T03:13:38.173

您使用了哪种模态框架？jQuery 用户界面？灯箱？他们使用的是固定尺寸，所以我认为你必须自己修改尺寸。追加 div 后，您可以将 div 高度/宽度添加到模态对话框。举个例子：

```
var div = $('<div/>');
$('#modal').append(div);
//Jquery ui
$("#modal").dialog( "option", "height", oldheight + div.height()); 
```

# android - Android sdk main.out.xml 解析错误

> ID：11641967
> 
> 赞同：9
> 
> 时间：2012-07-25T02:43:55.793
> 
> 标签：android

我刚刚开始了一个新的 Android 项目 helloword" 继续学习 Android 开发，我很难编译默认的 'helloword' 编译/运行。我认为我错过了配置和设置的一步，但我不知所措我有一个配置、设置和启动的 AVD。

当我按“运行方式”时，我找不到 android2.1 模拟器。并找到这些错误：

```
[2012-07-25 08:59:49 - helloword] res\layout\activity_main.xml:0: error: Resource entry activity_main is already defined.
[2012-07-25 08:59:49 - helloword] res\layout\activity_main.out.xml:0: Originally defined here.
[2012-07-25 08:59:49 - helloword] E:\android软件开发\新建文件夹\helloword\res\layout\activity_main.out.xml:1: error: Error parsing XML: no element found
[2012-07-25 10:03:12 - helloword] /helloword/gen already exists but is not a source folder. Convert to a source folder or rename it.
[2012-07-25 10:03:13 - helloword] /helloword/gen already exists but is not a source folder. Convert to a source folder or rename it.
[2012-07-25 10:03:15 - helloword] File is Out of sync
[2012-07-25 10:05:13 - helloword] /helloword/gen already exists but is not a source folder. Convert to a source folder or rename it.
[2012-07-25 10:08:44 - helloword] activity_main.out.xml is out of sync. Please refresh.
[2012-07-25 10:08:45 - helloword] activity_main.out.xml is out of sync. Please refresh. 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-25T04:37:27.707

不是你的错。当您尝试从其**xml 资源**编译 android 项目时，eclipse 将其视为正在执行 xml 文件，因此您会从中获得一些输出，与带有**.out.xml**扩展名的 xml 名称相同。

为避免这种情况，您必须第一次**右键单击项目**并选择**运行方式 -> Android 应用程序**，然后按照以下步骤操作，

> 窗口 -> 首选项 -> 运行/调试 -> 启动 -> 启动操作 -> 始终启动之前启动的应用程序

一旦你在**window->preferences**中提供了这个，从下一次当你从一个 xml 文件中按**“run”**或**“ctrl+f11”**时，你的项目就会被执行。

**编辑：**您还必须删除*res/layout/*.out.xml*，Eclipse 创建的文件，您不需要它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T11:57:17.493

有同样的问题，这为我解决了。

1.  删除activity_main.out.xml
2.  双击 .java 文件
3.  按 F11

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T05:05:30.720

永远不要从 xml 文件运行你的项目。打开你的 java 代码然后运行它......如果你从 xml 运行它，你会得到那个错误。清单文件也一样

# c++ - 如何为 OpenGL(Mesa) 编写单元测试

> ID：11641968
> 
> 赞同：-1
> 
> 时间：2012-07-25T02:43:56.363
> 
> 标签：c++, opengl

我构建并安装了 mesa，它是 Linux 和 Windows 平台上 OpenGL 的开源实现。实际上，我只需要几个 OpenGL(mesa) 的 API，并且需要为这些 API 编写单元测试。有谁知道如何为 OpenGL 编写单元测试？给我一个样品。或者是否有任何现有的 OpenGL 单元测试框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:11:24.280

> Or Is there any existed framework for OpenGL unit tests?

["Piglit is a collection of automated tests for OpenGL implementations."](http://cgit.freedesktop.org/piglit/tree/README)

# jquery - 如何使用 jquery 将 Ajax 响应放入 html 选择选项中？

> ID：11641970
> 
> 赞同：0
> 
> 时间：2012-07-25T02:44:10.413
> 
> 标签：jquery, html, ajax

我正在使用 ajax 来获得响应，我的响应格式如下

阵列（[2] => 电锤 [3] => 电刨 [10] => 家务 [11] => 测试类别）

如何使用 jquery 为 html 选择选项放置它的值和文本。

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T03:48:52.063

从数据库中获取数组后，返回此 html 作为响应

```
$html = "";
$i = 0;
foreach ($array as $val) {
    $html .= "<option value="{$i}">{$val}</option>";
} 
```

然后使用 jQuery 你可以把它放在选择标签中

您的 html 代码将是这样的

```
<select id="my-options"></select> 
```

您的 jquery 代码如下，响应将是 ajax 响应，选项将包含所需的 html

```
$('#my-options').html(response.options) 
```

# python - 一条线中的python素数

> ID：11641971
> 
> 赞同：-4
> 
> 时间：2012-07-25T02:44:20.497
> 
> 标签：python

你认为这是一种最快的方法来获得低于指定数字的素数在一个衬里：

```
[p for p in xrange(3,1000000) if p%2 != 0 and 0 not in (p%d for d in xrange(3,int(p**0.5)+1))] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T02:51:17.613

我认为这些行很便宜，并且您应该在必要时在多行上编写可读代码。

在这种情况下，这是必要的。此外，如果您需要将其用于 Project Euler 问题以外的任何问题，则应使用图书馆中的 Prime sieve。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T04:24:42.900

您将紧凑代码与高效代码混淆了。上面的代码有*一些*提高效率的方法，但不管是一行还是十行都没有关系。Python在执行*之前*将人类可读的代码编译为字节码。您无法控制将代码转换为多少字节码指令。

确实，列表推导通常比`for`循环更快，但并非普遍正确。使用隐含循环（例如`map()`通常更快）通常也是如此。`timeit`和`dis`模块是你的朋友。这样，您就可以自己找出某段代码是否比另一段更快。

过早的优化是愚蠢的。在开始修补*之前*确定代码中的瓶颈。你能确定上面代码的哪一部分最有可能减慢它的速度吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-05T05:10:46.863

是的，是的，你不应该在一行中这样做。出于原因。但我喜欢一个很好的挑战。

这是我想出的单班轮，“相当”快。这是一个非常复杂的混乱，但它有效。它可以“更短”，但我发现“if step%3 or step==3”实际上通过消除三分之一的工作来加快速度。并且使用集合推导。如果你不在乎列表已排序，您可以通过删除 sorted() 调用来减少一些。

```
[2] + sorted(set(xrange(3,max,2)) - { x for step in xrange(3, int(max**0.5) + 1, 2) if step %3 or step==3 for x in xrange(step * 3, max, step * 2)} ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-23T20:52:22.053

想知道同样的......为什么不只是：

```
[2] + [x for x in xrange(3,max,2) if not [y for y in xrange(3,int(x**0.5)+1,2) if x%y==0]] 
```

# asp.net - 从 DataTable1 中获取不在 DataTable2 中的行

> ID：11641972
> 
> 赞同：0
> 
> 时间：2012-07-25T02:44:30.060
> 
> 标签：asp.net, linq, datatable

我有 2 个数据表

```
DataTable1
SNo
1
2
3
4

DataTable2

SNo
1
4
3

I want the result

DataTableResult

SNo
2 
```

我可以使用`for`循环来做到这一点。

但我正在尝试使用 linq 来做到这一点。

```
var intersection = DataTable1.AsEnumerable().Intersect(DataTable2.AsEnumerable(), DataRowComparer.Default); 
```

然后我发现 Intersect 会给你两个表都有的行。

我不知道到底要使用什么功能。

有任何想法吗？

我得到了答案。

感谢删除答案的人。

但这给了我一个开始。

答案是

```
var intersection = DataTable1.AsEnumerable().Except(DataTable2.AsEnumerable(), DataRowComparer.Default); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T02:51:16.343

您可以尝试使用 exept 语句，因为您仅将表格显示为结构，因此很难精确，但您可以尝试这样的想法

```
 var qry1 = datatable1.AsEnumerable().Select(a => new { SNo.ToString() });
 var qry2 = datatable2.AsEnumerable().Select(b => new { SNo.ToString() });
 var exceptAB = qry1.Except(qry2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T02:47:34.180

您可以使用这样的查询

```
select SNo from DataTable1 where SNo not in (select SNo from DataTable2); 
```

# objective-c - shouldAutorotateToInterfaceOrientation 单视图

> ID：11641974
> 
> 赞同：1
> 
> 时间：2012-07-25T02:44:35.233
> 
> 标签：objective-c

如何设置我的单一视图应该做的方向？下面的这个可以给我所有的方向，但在特定的视图中，我不想旋转。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
 return YES;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T03:01:16.193

只需这样做：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:   (UIInterfaceOrientation)interfaceOrientation
{
     //Or UIInterfaceOrientationLandscapeLeft, UIInterfaceOrientationLandscapeRight
     return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

# .net - 如何解决 Azure Web 部署上的 System.Web.Helpers 不匹配问题？

> ID：11641976
> 
> 赞同：5
> 
> 时间：2012-07-25T02:44:44.560
> 
> 标签：.net, azure, visual-studio-2012, azure-web-app-service, assemblybinding

我不知道为什么我似乎无法弄清楚这一点。我有点 DLL 强命名地狱。这是正在发生的事情：

*   我正在使用 Visual Studio 2012 RC 制作面向 .NET 4.0 的 MVC4 站点
*   我正在尝试在`Microsoft.Web.Helpers`库中使用 Gravatar Razor 助手
*   它可以在我的机器上运行，但是在通过 Git 部署到 Azure 后，我在调用 Gravatar 帮助程序时遇到以下异常：

    无法加载文件或程序集 'System.Web.Helpers, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 或其依赖项之一。该系统找不到指定的文件。

似乎我在`System.Web.Helpers`GAC 上安装的任何托管我的 Azure 站点的版本与我的目标版本不匹配。

这是我尝试过的：

*   复制本地 = true
*   [破解我自己的 _bin_deployableAssemblies 文件夹，因为Phil Haack 的博客](http://haacked.com/archive/2011/05/25/bin-deploying-asp-net-mvc-3.aspx)中描述的菜单选项似乎缺失
*   删除 System.Web.Helpers 的 .csproj 文件中的扩展程序集信息

此外，我在 web.config 中有以下程序集绑定重定向：

```
<runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      ...
</runtime> 
```

任何人？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T03:15:40.607

您说您尝试了 copylocal=true，但您是否确保程序集已部署到服务器？

一个潜在的问题：

• .gitignore 有一个 .dll 过滤器

我会 FTP 到服务器并检查以确保程序集实际上在 bin 目录中

# java - Java：如何描述一个网络数据包？

> ID：11641979
> 
> 赞同：0
> 
> 时间：2012-07-25T02:45:35.570
> 
> 标签：java, networking

我是 Java 新手，并通过 UDP/TCP 编写具有自己的网络协议的程序。C中有这样一个数据包：

```
struct test_package {
    u32 cmd;
    u32 args;
    u32 flags;
}; 
```

以UDP为例，我从DatagramPacket中得到的是字节数据[]。如何将其转换为包结构？

如果在 C 中，只是`(struct test_package *)data`没有对齐限制。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T02:55:49.660

假设你有一堂课：

```
public class TestPackage implements Serializable
{
   long cmd;
   long args;
   long flags;
} 
```

您可以通过序列化将其作为 byte[] 存储在 DatagramPacket 中。然后在另一端，您可以获取 byte[] 并将其反序列化回 TestPackage 的确切实例。

（这是序列化/反序列化的样子）

```
public static byte[] serialize(Object object) {
   ByteArrayOutputStream out = new ByteArrayOutputStream();
   ObjectOutputStream oos = new ObjectOutputStream(out);
   oos.writeObject(object);
   return out.toByteArray();
}

public static Object deserialize(byte[] datagramData) {
   ByteArrayInputStream in = new ByteArrayInputStream(datagramData);
   ObjectInputStream ois = new ObjectInputStream(in);
   return ois.readObject();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T02:55:41.943

Java 不提供直接内存访问，因此您不能像在 C 中那样将其转换为结构。您必须自己解析字节数组，例如：

```
byte data[] = ...;
DataInput input = new DataInputStream(new ByteArrayInputStream(data));

int cmd = input.readInt();
int args = input.readInt();
int flags = input.readInt(); 
```

# python - Django：链接不同表中两个元素的最有效方法

> ID：11641980
> 
> 赞同：1
> 
> 时间：2012-07-25T02:45:37.633
> 
> 标签：python, database, django, django-models, performance

我在 Django 中有以下模型：

```
from django.db import models

class User(models.Model):
    pen_name = models.CharField(max_length=30)
    email = models.EmailField()
    activated = models.BooleanField()
    def __unicode__(self):
        return self.email + '-' + self.pen_name

class Original_Work(models.Model):
    title = models.CharField(max_length=25)
    summery = models.TextField()
    user = models.ForeignKey(User)
    date_published = models.DateField()
    one_shot = models.BooleanField()
    def __unicode__(self):
        return self.title + '-' + self.user.email

class Chapter(models.Model):
    work = models.ForeignKey(Work)
    title = models.CharField(max_length=25)
    order_number = models.IntegerField()

class Review(models.Model):
    chapter = models.ForeignKey(Chapter)
    work = models.ForeignKey(Work)
    date_published = models.DateField()

class Work_Subscription(models.Model):
    user = models.ForeignKey(User)
    to_work = models.ForeignKey(Work)

class User_Subscription(models.Model):
    user = models.ForeignKey(User, related_name='user_owner')
    to_user = models.ForeignKey(User, related_name='user_to')

class Alert(models.Model):
    title = models.CharField(max_length=60)
    # add type
    link = models.CharField()

class Book(models.Model):
    title = models.CharField(max_length=50)
    author = models.CharField(max_length=50)
    def __unicode__(self):
        return self.title 
```

在总结/解释中，每个用户“都有”作品。每部作品“都有”章节。每个章节“都有”一个评论和每个评论。还有其他事情，但我的问题也无关紧要。现在，每件“拥有”的东西都有一个“所有者”的外键。所以评论有一个章节的外键，章节有一个作品的外键等等。我的问题是，有什么更好的方法来做到这一点？现在，服务器必须查看所有评论才能找到哪些属于作品。有没有办法加快/改进查找过程？

编辑：我通常需要按照以下方向访问数据用户 -> 工作 -> 章节 -> 审查。这意味着服务器知道用户是什么，并被要求查找用户所做的所有工作。这与了解工作并找到用户相比。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:04:45.913

我在这里假设您打算将 OriginalWork 类简称为“工作”。我还假设我们正在为网站的当前访问者执行查询。这应该可以解决问题：

```
author = request.user
Review.objects.filter(chapter__work__user=author) 
```

此外，您不需要在 Review 类中使用多余的工作字段，因为 Review 键是 Chapter 和 Chapter 键是 Work。即，您可以通过阅读章节轻松地从 Review 开始工作 - 无需有两种方法可以到达那里。

有关更多信息，请参阅[QuerySet API](https://docs.djangoproject.com/en/1.4/ref/models/querysets/)文档。

# json - 以 UTF-16 或 UTF-32 编码 JSON

> ID：11641983
> 
> 赞同：15
> 
> 时间：2012-07-25T02:46:24.310
> 
> 标签：json, unicode, character-encoding

JSON RFC，第[2.5 节](https://www.rfc-editor.org/rfc/rfc4627#section-2.5)，部分说明：

> 为了转义不在基本多语言平面中的扩展字符，该字符表示为一个十二字符序列，编码 UTF-16 代理对。因此，例如，仅包含 G 谱号字符 (U+1D11E) 的字符串可以表示为“\uD834\uDD1E”。

假设我有正当理由将 JSON 编码为 UTF-16BE（这是允许的）。这样做时，是否仍然需要对不在基本多语言平面中的字符进行转义？例如，而不是这个：

```
00 5C 00 75 00 44 00 38 00 33 00 34 00 5C 00 75 00 44 00 44 00 31 00 45
  \     u     D     8     3     4     \     u     D     D     1     E 
```

这是 24 字节的 UTF-16BE 字节序列`\uD834\uDD1E`，这样做是否合法：

```
D8 34 DD 1E 
```

即，直接使用 4 字节的 UTF-16BE 值？

同样，如果我要编码与 UTF-32BE 相同的 JSON 字符串，我是否可以直接使用代码点值：

```
00 01 D1 1E 
```

?

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-25T16:25:38.060

据我所知，是的，您可以直接编写 UTF-16 值。*支持：您引用的 RFC 段落解释了如果您决定转义它，*如何转义任意 Unicode 。然而，在同一部分的前面，RFC 说

> **除了必须转义的字符外，****所有***Unicode 字符***都***可以放在引号内：引号、反斜线和控制字符（U+0000 到 U+001F）。*
> 
>  **任何字符***都***可以转义。如果字符在基本多语言平面（U+0000 到 U+FFFF），那么它可以表示为一个六字符序列...**

 **（强调补充。）

对我来说，这意味着只有`"`,`\`和控制字符***必须***被转义，并且任何其他 Unicode 字符**都可以**直接放置到 JSON 文本中（以您使用的任何 UTF 格式）。它还告诉我，即使您将编码为 UTF-8，您也不需要将格式用于除、和控制字符`\uXXXX`之外的任何 Unicode字符。`"``\`

（顺便说一句，这确实让我想知道该`\uXXXX`表单是否真的对控制字符以外的任何东西有用。正如另一张海报所说，它可能归结为您的 JSON 解析器实际支持的内容。）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2020-05-13T10:41:20.237

我们探索了一个想法，它在 Azure Datafactory 中得到了发挥。在 sink 部分（Json File）中将编码格式转换为 US-ASCII。源保持相同的 REST API 链接：

![在此处输入图像描述](../Images/bc51ecc2977403ba58bb9cc121c8a64d.png)**

# struts2 - 使用带有 struts 2 的 servlet

> ID：11641984
> 
> 赞同：0
> 
> 时间：2012-07-25T02:46:28.770
> 
> 标签：struts2

当您将所有内容映射到 Struts2 过滤器时，我想知道如何将 servlet 与 Struts2 结合使用。假设我的应用程序中也有一个 servlet。我在我的 struts.xml 中尝试

```
<constant name="struts.action.excludePattern" value="/YourServlet"/> 
```

现在我想知道上面的线路传达了什么..？常量名在这里做什么..！请指教

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T02:58:45.353

[资源](http://struts.apache.org/2.3.4/docs/webxml.html)

为什么过滤器使用 /* 映射以及如何配置显式排除（从 2.1.7 开始） 在上面的示例中，我们将 Struts 2 调度程序映射到 /*，因此 Struts 2 对所有传入请求都有一个破解。这是因为 Struts 2 提供来自其 jar 文件的静态内容，包括 Dojo JavaScript 文件（如果使用 S2.0 或 S2.1+ 中的 Dojo 插件）和用于生成 HTML 的 Struts 2 标记的 FreeMarker 模板。

如果我们将过滤器映射更改为其他内容，例如 /*.html，我们必须考虑到这一点，并提取通常从 Struts 2 jar 文件或其他解决方案中提供的内容。

从 Struts 2.1.7 开始，您可以提供一个逗号分隔的模式列表，当与请求 URL 匹配时，过滤器将通过这些模式。这是通过配置选项 struts.action.excludePattern 完成的，例如在您的 struts.xml 中

```
<struts>
<constant name="struts.action.excludePattern" value=".*unfiltered.*,.*\\.nofilter"/>
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:25:17.383

如果您需要多映射 servlet，您可以使用：

```
<constant name="struts.action.excludePattern" value="/Servletname1, /Servletname2" /> 
```

但是在struts中，你不应该使用servlet url，因为它不统一。你可以使用ajax：

```
$.ajax({
        url : "nameAction.action?param="+id,
               type : "post",
        data : {
            'id' : id

        },
        success : function(data) {
//          $('#result').html(data);
        },
        error : function(jqXHR, textStatus, errorThrown) {
            $('#result').html("Error");
        }
    }); 
```

# java - 在二维数组中，行还是列中哪个先出现？

> ID：11641985
> 
> 赞同：89
> 
> 时间：2012-07-25T02:46:34.000
> 
> 标签：java, multidimensional-array

创建二维数组时，如何记住首先指定的是行还是列？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-07-25T02:50:53.263

Java 指定类似于“主要行”配置的数组，这意味着它首先索引行。这是因为二维数组是“数组数组”。

例如：

```
int[ ][ ] a = new int[2][4];  // Two rows and four columns.

a[0][0] a[0][1] a[0][2] a[0][3]

a[1][0] a[1][1] a[1][2] a[1][3] 
```

它也可以像这样可视化：

```
a[0] ->  [0] [1] [2] [3]
a[1] ->  [0] [1] [2] [3] 
```

第二个插图显示了“数组数组”方面。第一个数组包含`{a[0] and a[1]}`，每个数组都是一个包含四个元素的数组，`{[0][1][2][3]}`。

TL;DR 总结：

```
Array[number of arrays][how many elements in each of those arrays] 
```

有关更多解释，另请参阅*[Arrays - 2-dimensional](http://www.willamette.edu/%7Egorr/classes/cs231/lectures/chapter9/arrays2d.htm)*。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-25T02:59:39.367

尽管 Matt B 的观点在某种意义上可能是正确的，但考虑 Java 多维数组而不考虑几何矩阵可能会有所帮助。Java 多维数组只是数组的数组，第一个“维度”的每个元素的大小可以与其他元素不同，或者实际上可以存储一个空“子”数组。[请参阅此问题](https://stackoverflow.com/q/6630990/433348)下的评论

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-07-25T02:46:34.000

本能地从几何上思考：水平（X）轴，然后是垂直（Y）轴。然而，二维数组的情况并非如此，行在前，然后是列。

考虑以下类比：在几何学中，一个人走到梯子（X 轴）并爬上它（Y 轴）。相反，在 Java 中，一个人下梯子（行）然后走开（列）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-02-22T12:18:00.203

一切都取决于您对数组的可视化。**行和列是数组的可视化**属性（可能在您的想象中），而不是数组本身。

**这与询问数字“5”是红色还是绿色完全一样？**

我可以把它画成红色，我可以把它画成贪婪，对吧？颜色不是数字的整体属性。以同样的方式将二维数组表示为行和列的网格对于该数组的存在来说不是必需的。

2D 数组只有***第一维***和***第二维***，与可视化相关的一切都纯粹是您的喜好。

当我有 char array`char[80][25]`时，我可能想在旋转的控制台上打印它，以便我有 25 行 80 个字符，无需滚动即可适应屏幕。

**当将二维数组表示为行和列根本没有意义时，**我将尝试提供可行的示例：假设我需要一个包含 1 000 000 000 个整数的数组。我的机器有 8GB 的​​ RAM，所以我有足够的内存，但是如果你尝试执行`var a = new int[1000000000]`，你很可能会得到 OutOfMemory 异常。这是因为内存碎片 - 没有这种大小的连续内存块。相反，您可以使用您的值创建 10 000 x 100 000 二维数组。从逻辑上讲，它是一维数组，因此您想将其绘制并想象为单个值序列，但由于技术实现，它是二维的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-25T02:52:52.470

在 Java 中，没有多维数组。有数组数组。所以：

```
int[][] array = new int[2][3]; 
```

它实际上由两个数组组成，每个数组包含三个元素。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-08-03T14:31:47.607

记住行或列是否在前的最好方法是写评论并提及它。

Java 不会将 2D 数组存储为具有指定行和列的表，而是将其存储为数组数组，就像许多其他答案所解释的那样。因此，您可以决定第一维还是第二维是您的行。您只需要根据此读取数组即可。

所以，由于我自己一直对此感到困惑，所以我总是写一个评论告诉我，二维数组的哪个维度是我的行，哪个是我的列。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-21T18:12:30.103

在 java 中，行首先完成，因为二维数组被认为是两个单独的数组。从第一行 1 维数组开始。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-14T12:18:41.857

在 TStringGrid 单元格中，属性 Col 排在第一位。

```
Property Cells[ACol, ARow: Integer]: string read GetCells write SetCells; 
```

所以赋值`StringGrid1.cells[2, 1] := 'abcde';`的值显示在第三列第二行。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-06T19:30:36.273

在 c++（遥远的、尘土飞扬的内存）中，我认为有时查看代码和理解数组比在 Java 中要容易一些。两者都是行专业。这个插图有助于我理解。

给定这个二维字符串数组的代码......

```
 String[][] messages; 
    messages = new String[][] {
        {"CAT","DOG","YIN","BLACK","HIGH","DAY"},
        {"kitten","puppy","yang","white","low","night"} 
    };

    int row = messages.length;
    int col = messages[0].length; 
```

将我的整数命名为 2d 数组（行，列），我们会看到这些值。

```
row = (int) 2
col = (int) 6 
```

最后两行代码，我们尝试确定大小并将它们设置为`row`，`col`看起来并不那么直观，也不一定正确。

你真正在这里处理的是这个（注意新的变量名来说明）：

```
int numOfArraysIn = messages.length;
int numOfElementsIn0 = messages[0].length;
int numOfElementsIn1 = messages[1].length; 
```

Where`messages.length`告诉你`messages`有两个数组。**数组数组。**

然后`messages[x].length`产生`0` `1`内部每个单独数组的大小`messages`。

```
numOfArraysIn = (int) 2
numOfElementsIn0 = (int) 6
numOfElementsIn1 = (int) 6 
```

当我们为每个循环打印时......

```
for (String str : messages[0])
        System.out.print(str);
for (String str : messages[1])
        System.out.print(str);

CATDOGYINBLACKHIGHDAYkittenpuppyyangwhitelownight 
```

尝试删除括号并像这样打印会出错

```
for (String str : messages)
        System.out.print(str);

incompatible types: String[] cannot be converted to String 
```

在设置`.length`用于限制通过数组的步骤的循环时，理解上述内容很重要。

# php - 在引导程序中包含 ZendX Jquery

> ID：11641994
> 
> 赞同：0
> 
> 时间：2012-07-25T02:48:32.030
> 
> 标签：php, zend-framework, zend-db

如何在 zend 引导文件中添加 ZendX Jquery 库？我的以下代码似乎无法正常工作。

```
protected function _initViewHelper()
{
    $this->bootstrap('view');
    $view = $this->getResource('view');
    $view->addHelperPath('ZendX/JQuery/View/Helper/', 'ZendX_JQuery_View_Helper');

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T02:50:53.883

嗨，您的代码的问题是，您需要定义一个 Action Helper 对象。以下代码可能会解决您的问题

```
protected function _initViewHelper()
{
    $this->bootstrap('view');
    $view = $this->getResource('view');
    $view->addHelperPath('ZendX/JQuery/View/Helper/', 'ZendX_JQuery_View_Helper');

    $viewRenderer = new Zend_Controller_Action_Helper_ViewRenderer();
    $viewRenderer->setView($view);
    Zend_Controller_Action_HelperBroker::addHelper($viewRenderer);
} 
```

希望这对你有帮助;-)

# iphone - 无法在 iPhone 应用程序中运行后台操作

> ID：11641996
> 
> 赞同：2
> 
> 时间：2012-07-25T02:49:05.170
> 
> 标签：iphone, objective-c, xcode

我已经仔细阅读了关于多任务处理的苹果开发用户指南，但我仍然无法理解如何在后台运行简单的操作。我做了以下简单的实验，但什么也没发生：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
   sleep(3);
   UIAlertView *alert1 = [[UIAlertView alloc] initWithTitle:@"title" message:@"test" delegate:nil cancelButtonTitle:nil otherButtonTitles:nil , nil];
   [alert1 show];
} 
```

所以我知道默认情况下在后台添加对音频/位置/VoIP 操作的支持，但是如何添加对这样一个简单操作的支持？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T05:12:57.320

我希望这个答案。对您的问题非常有用

当您关闭应用程序时，您可以在后台看到 AlertView 中的消息。

```
- (void)viewDidLoad

{

UILocalNotification *localNotif = [[UILocalNotification alloc] init];
    localNotif.fireDate =[NSDate dateWithTimeIntervalSinceNow:15];
    localNotif.timeZone = [NSTimeZone localTimeZone];
    localNotif.alertBody = @"Staff meeting in 30 minutes";
    //localNotif.alertBody = [NSString stringWithFormat:@"%@'s Birthday",strName];

    localNotif.alertAction = @"View";
    localNotif.soundName = UILocalNotificationDefaultSoundName;
    //    localNotif.applicationIconBadgeNumber = 1;
    localNotif.repeatInterval = NSYearCalendarUnit;

    [[UIApplication sharedApplication] scheduleLocalNotification:localNotif];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T03:00:52.997

当您的应用程序进入后台时，您正尝试显示警报。尝试使用 NSLog 打印一些东西或放置一个断点并检查是否控制此方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T03:02:37.510

您的应用在后台无法执行任何 UI 操作。您可以在后台执行其他操作，例如获取数据或处理一些数据。要启用音频/位置/voip，您需要正确设置您的 info.plist 以启用它。应该记录在 iOS 文档中

# android - 如何更改 EditText 光标高度？

> ID：11641997
> 
> 赞同：14
> 
> 时间：2012-07-25T02:49:06.330
> 
> 标签：android, android-edittext

我想改变`EditText`光标高度，有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-06T00:01:19.530

我不得不深入研究 Android 源代码才能找到答案，但您基本上必须在自定义形状可绘制对象上使用填充。

注意：**仅适用于 API 12 及更高**版本，因为支持`textCursorDrawable`

使用**正的** *顶部*填充将光标的*顶部移得***更高**

用户**正** *底部*填充将光标的*底部向下***移动**

`lineSpacingMultiplier`我通常最终使用负底部填充来缩短光标，因为当您使用或增加行高时，它会下降到基线以下太低`lineSpacingExtra`。

**例如 cursor_red.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >
    <size 
        android:width="2dip" />
    <solid
        android:color="@color/red" />
    <padding 
        android:top="2sp"
        android:bottom="-11sp" />
</shape> 
```

这将生成一个 2dip 宽的红色光标，即

*   顶部高 2sp（更长）
*   底部高 11sp（短）。

然后在您的edittext中，只需指定`android:textCursorDrawable`：

```
<EditText
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textCursorDrawable="@drawable/cursor_red" /> 
```

**Editor.java**中的相关 Android 源代码，我从中找到了解决方案：

```
private void updateCursorPosition(int cursorIndex, int top, int bottom, float horizontal) {
    ...

    mCursorDrawable[cursorIndex].getPadding(mTempRect);

    ...

    mCursorDrawable[cursorIndex].setBounds(left, top - mTempRect.top, left + width,
            bottom + mTempRect.bottom);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-07-22T07:54:00.080

填充可用于控制光标高度

**光标.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <size android:width="2dp" />
    <solid android:color="@color/black" />
</shape> 
```

**cursor_with_padding.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:bottom="7dp"
        android:drawable="@drawable/cursor"
        android:top="8dp" />
</layer-list> 
```

**布局**

```
<EditText
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textCursorDrawable="@drawable/cursor_with_padding"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T03:02:45.340

将 editText 样式更改为自定义样式

```
<item name="android:editTextStyle">@style/myEditText</item> 
```

然后使用drawable设置光标：

```
<style name="myEditText" parent="@android:parentdetails">
<item name="android:textCursorDrawable">@android:drawable/my_cursor_drawable</item>
<item name="android:height">Height here e.g. 50sp</item> 
</style> 
```

# sql - 将 SQL 转换为函数

> ID：11641998
> 
> 赞同：0
> 
> 时间：2012-07-25T02:49:10.370
> 
> 标签：sql, function

我是 SQL 新手，有人可以帮忙将以下 SQL 语句转换为函数。该语句有效，我只是无法从中创建函数。

```
declare @start datetime, @end datetime
set @start = '2012/07/25 09:00:00'
set @end = '2012/07/25 12:55:00';

with weeks as (
  select @start as WeekStart
    , dateadd(hh, 24, dateadd(dd, 0, datediff(dd, 0, dateadd(dd, 6 - (@@datefirst + datepart(dw, @start)) % 7, @start)))) as WeekEnd
union all
  select dateadd(hh, 48, WeekEnd)
    , dateadd(hh, 24, dateadd(dd, 0, datediff(dd, 0, dateadd(dd, 13 - (@@datefirst + datepart(dw, WeekEnd)) % 7, WeekEnd)))) as WeekEnd
  from weeks
  where dateadd(hh, 48, WeekEnd) <= @end
)
select Seconds / (60 * 60) as Hours
from (
  select sum(datediff(ss, WeekStart, case when @end < WeekEnd then @end else WeekEnd end)) as Seconds
  from weeks) x 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T03:16:49.680

假设 SQL Server

```
create function CalculateHours
(
    @Start datetime,
    @End datetime
) returns int
as
begin
    declare @Hours int
    ;with weeks as (
      select @start as WeekStart
        , dateadd(hh, 24, dateadd(dd, 0, datediff(dd, 0, dateadd(dd, 6 - (@@datefirst + datepart(dw, @start)) % 7, @start)))) as WeekEnd
    union all
      select dateadd(hh, 48, WeekEnd)
        , dateadd(hh, 24, dateadd(dd, 0, datediff(dd, 0, dateadd(dd, 13 - (@@datefirst + datepart(dw, WeekEnd)) % 7, WeekEnd)))) as WeekEnd
      from weeks
      where dateadd(hh, 48, WeekEnd) <= @end
    )
    select @Hours = Seconds / (60 * 60)
    from (
      select sum(datediff(ss, WeekStart, case when @end < WeekEnd then @end else WeekEnd end)) as Seconds
      from weeks) x

      return @Hours
end 
```

示例使用：

```
select dbo.CalculateHours('2012/07/25 09:00:00','2012/07/25 12:55:00') 
```

# mysql - MySql 替换函数 - 在开始和结束处查找带有空格的特定字符串

> ID：11641999
> 
> 赞同：0
> 
> 时间：2012-07-25T02:49:17.610
> 
> 标签：mysql, sql

我想将地址栏中的所有“st”实例替换为“street”。这就是我所拥有的。

```
update donor
set Address_Street = replace(Address_Street, ‘ ST ’, ‘ Street ’); 
```

由于我尝试搜索和替换的字符串之前和之后的空格，我得到一个错误执行。我希望在每个之前和之后都有一个空格，以确保我不会用此更改替换街道名称。示例（5 Stanford 车道更改为 5 Streetandfor 车道）

为什么 MySql 对搜索前后的空格不满意？我错过了一个简单的语法规则吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T02:50:58.300

问题是你有奇怪的大引号而不是普通引号。尝试这个：

```
update donor
set Address_Street = replace(Address_Street, ' ST ', ' Street '); 
```