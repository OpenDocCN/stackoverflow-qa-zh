# StackOverflow 问答 12487000-12487999

# c++ - 为什么这行不通？第二个功能不会注册？

> ID：12487002
> 
> 赞同：0
> 
> 时间：2012-09-19T00:34:39.407
> 
> 标签：c++, visual-studio-2010

```
#include <iostream>
#include <iomanip>
using namespace std;

int main ()
{
double a;
double b;
a =(3.0);
b =(5.0);
cout << "  " << fixed << setprecision (1) << a << "\n" << endl;
cout << "* " << fixed << setprecision (1) << b << "\n" << endl;
cout << "------" << endl;
cout << fixed << setprecision (2) << a*b << "\n" << endl;

system("PAUSE");

return 0;
}

int calculate ()
{
   double a;
   double b;
   double c;
   a = (7.1);
   b = (8.3);
   c = (2.2);
   cout << fixed << setprecision(1) << endl;
   cout << "  " << fixed << setprecision (1) << a << "\n" << endl;
   cout << "* " << fixed << setprecision (1) << b << "\n" << endl;
   cout << "- " << fixed << setprecision (1) << c << "\n" << endl;
   cout << "------" << endl;
   cout << std::setprecision(2) << (a * b) - c << "\n" << std::endl;

system("PAUSE");

return 0;
} 
```

请不要只是告诉我阅读介绍性 C++ 书籍或以模糊的方式告诉我我的问题，我有 1，它遗漏了像这样的非常小的细节。可悲的是，我一直在努力让它工作一个小时，哈哈。

输出：

1>----- 构建开始：项目：1.2，配置：调试 Win32 ------ 1>LINK：错误 LNK2001：无法解析的外部符号 _mainCRTStartup 1>c:\users\justin\desktop\1.2\Debug \1.2.exe：致命错误LNK1120：1个未解决的外部==========构建：0成功，1失败，0最新，0跳过==========

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T01:39:11.400

您需要将源文件添加到 Visual Studio 项目中。

右键单击解决方案资源管理器中的“1.2”项目，选择“添加/现有项目...”，然后导航到源文件。

然后再次尝试构建。

一旦构建工作正常，您就可以担心将`calculate()`函数调用集成到程序中（那时可能会容易得多）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T00:42:17.840

您是否错误地将分号放在“int calculate()”后面？;)

# android - 如何改变屏幕亮度？

> ID：12487004
> 
> 赞同：0
> 
> 时间：2012-09-19T00:35:02.937
> 
> 标签：android, powermanager

如何在 Android 中更改屏幕亮度？

我可以找到如何为应用程序执行此操作，但我想为所有系统永久执行此操作（直到用户在选项中更改它）。

我不需要将其设置为自定义值。只是低亮度级别，中等亮度和最大将是完美的。

例如有可能使用`PowerManager`或类似的东西\？

使用安卓 2.0+。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T01:35:44.767

```
WindowManager.LayoutParams lp = getWindow().getAttributes();
lp.screenBrightness = <value from 0 to 1>;
getWindow().setAttributes(lp); 
```

# jquery - Jquery灯箱问题？

> ID：12487009
> 
> 赞同：0
> 
> 时间：2012-09-19T00:35:31.907
> 
> 标签：jquery, html, lightbox

我的网站[www.codtelevision.com/live](http://www.codtelevision.com/live)

点击链接。由于某种原因，页面会扩展，然后当您关闭时它会变小。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T03:16:32.797

问题是您的#bkimg 元素。它以 50% 的最小宽度和 50% 的最小高度绝对定位。因此，此图像将扩展为窗口宽度的 50%（分别为宽度/高度）。您可以删除百分比，背景将停止“扩展”。但是，这将导致您的元素在调整浏览器窗口时移出屏幕。

这是我将提出的修复方法。

1) 从您的 HTML 中完全删除 #bkimg 元素。2）用样式重新做你的身体元素，以准确反映你想要的东西。在这种情况下，我会将您的 body 标签更改为：

```
body {
  background: url(wpimages/wp6a390e39.png) top center no-repeat;
} 
```

这将导致您的背景保持在浏览器的中心，并且不会根据窗口大小“增长”或“缩小”。此外，这会给您的布局带来其他问题。几乎所有的整个页面结构都基于绝对定位的元素。对于较小的浏览器尺寸、较小的分辨率或喜欢浏览而不扩展完整浏览器窗口的人（大多数 OSX 用户都这样做），这将是一个问题。您将需要相应地调整布局以与浏览器一起流动，而不是绝对定位元素。

# jquery - JQuery 简单的工具提示效果

> ID：12487011
> 
> 赞同：0
> 
> 时间：2012-09-19T00:35:42.700
> 
> 标签：jquery, html, css, tooltip

一直想找一个jquery tooltip效果但是找不到自己需要的，于是开始写/修改最简单/最接近的例子。单击页面上的任意位置应隐藏当前打开的工具提示，除非单击不同的工具提示，在这种情况下，当前打开的工具提示将关闭并打开新的工具提示。

目前单击页面上的任意位置没有任何反应，因为工具提示的显示存在问题。单击一个提示可以很好地显示它，单击下一个会关闭第一个并打开第二个，但是在此之后单击另一个工具提示时会显示一个空白框。

为什么会这样？

```
<!DOCTYPE html>
<html>

<head>
<script type='text/javascript' src='jquery-1.6.2.js'></script>

<style type='text/css'>
    .tooltip{ 
        display:none;
        padding:5px 10px;
        background-color:#e5f4fe;
        border:#5a5959 1px solid;
        position:absolute;
        z-index:9999;
        color:#0c0c0c;
        width:100px;
        height:50px;
    }

</style>

<script type='text/javascript'>
    $(window).load(function(){
    $(document).ready(function() {

    $('body').append('<div class="tooltip"><div class="tipBody"></div></div>'); 

    var tip;

    $('a[title]').click(function(e) {

        //display tip
        tip = $(this).attr('title'); // tip = this title   
        $(this).attr('title','');    // empty title
        $('.tooltip').fadeTo(300, 0.9).children('.tipBody').html( tip ); // fade tooltip and populate .tipBody

        //set position
        $('.tooltip').css('top',  e.pageY);
        $('.tooltip').css('left',  e.pageX);

     });

  });

});

</script>

</head>
<body>
     <a title="message1" class="printbtn" href="#">tip1</a>
    <a title="message2" class="printbtn" href="#">tip2</a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T01:28:38.003

You need to add an event listener for a click to the body, using the event object, check the target if its your active tooltip, otherwise close the tooltip.

```
$('body').on('click', function (e) {
  if (!$(e.target).hasClass('tooltip')) {
     // hide your tooltip
  }
}); 
```

example: [http://jsfiddle.net/xRNnP/](http://jsfiddle.net/xRNnP/)

if you click anywhere the text will be hidden, if you click on the text itself nothing happens.

This can also be modified so that the target you are checking for is the link that triggers the tooltip, not the tooltip itself.

# javascript - 谷歌地图信息框反复打开/绘图

> ID：12487020
> 
> 赞同：0
> 
> 时间：2012-09-19T00:36:47.283
> 
> 标签：javascript, google-maps

我们正在使用谷歌地图，我有一个案例，我们有一个完全填充的地图，充满了标记，当点击地图外的特定结果时，会为相应的标记执行以下代码。

```
 map.setCenter(new google.maps.Marker({
    position : new google.maps.LatLng(latitude, longitude)
}).getPosition());
map.setZoom(10);
google.maps.event.trigger(currentMarker, 'click', {latLng: new google.maps.LatLng(latitude, longitude)}); 
```

此代码用于将指定标记居中、放大标记并激活“单击”事件，该事件依次绘制/打开信息框。

问题是，在运行此代码的大多数情况下，在标记上多次触发 click 事件，导致 InfoBox 重绘，但是这种情况发生了很多次（每次都不是固定的次数）。有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T01:03:40.660

`currentMarker`如果您将 in 传递给`google.maps.event.trigger`您不需要指定纬度/经度，我非常肯定。它应该只是`google.maps.event.trigger(currentMarker, 'click')`。

同样，另一种选择是在外部链接上使用 jquery 的事件来检测点击，然后在标记上`.on()`触发。`infoWindow.open()`下面是这个样子的一个片段。

```
$('#openmarker').on('click', function(e){
    e.preventDefault();
    infowindow.open(map,currentMarker);
    map.setCenter(currentMarker.getPosition());
}); 
```

# php - PHP 中的 htmlentities - 本地和实时之间的差异

> ID：12487022
> 
> 赞同：0
> 
> 时间：2012-09-19T00:37:01.683
> 
> 标签：php, html-entities

我通过 textarea 和一个常见的 WYSIWYG 编辑器编辑我网站的某些页面。这种编辑经常需要我使用`<pre>`标签来显示 HTML 代码。

由于文本区域的性质，我相信我需要使用 htmlentities 来保存 HTML 实体，例如`&lt;`（翻译为 <），所以这就是我所做的：

```
<textarea name="resume" class="ckeditor"><?php echo htmlentities($e['resume']) ?></textarea> 
```

这在本地很好用，我的语法荧光笔在 pre 标记中很好用，textarea 在编辑时不会转换 HTML 实体。

所以我尝试托管这个项目，但在现场有一个问题，所有双引号都显示为**\"**，我的文本中所有双引号之前都有一个斜杠。

这是我应该和我的主人一起讨论的事情吗？我不明白这个问题是如何在本地没有发生的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T00:42:30.257

您在实时站点上启用了魔术报价。

查看文档`magic_quotes_gpc`： http: [//php.net/manual/en/info.configuration.php#ini.magic-quotes-gpc](http://php.net/manual/en/info.configuration.php#ini.magic-quotes-gpc)

您可以在主机上使用它，但也可以在 .htaccess 文件中禁用它：http: [//php.net/manual/en/security.magicquotes.disabling.php](http://php.net/manual/en/security.magicquotes.disabling.php)

# php - 使用数组作为参数创建函数不适用于我

> ID：12487023
> 
> 赞同：0
> 
> 时间：2012-09-19T00:37:14.787
> 
> 标签：php, function, parameter-passing

简而言之，我有如下功能：

```
function plus($x, $y){
   echo $x+$y;
} 
```

我想告诉函数它的参数作为数组，如下所示：

```
$parms = array(20,10);
plus($parms); 
```

但不幸的是，不起作用。我厌倦了使用以下另一种方式：

```
$parms = array(20,10);
$func_params = implode(',', $parms);
plus($func_params); 
```

而且也不起作用，并给我错误消息： `Warning: Missing argument 2 for plus(), called in.....`

而现在，我很困惑。我能做什么工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T00:42:27.473

您可以做几件事。首先，要维护您的函数定义，您可以使用[call_user_func_array()](http://php.net/manual/en/function.call-user-func-array.php)。我认为这很丑陋。

```
call_user_func_array('plus', $parms); 
```

您可以通过采用可变数量的参数来使您的函数更加健壮：

```
function plus(){
  $args = func_get_args();
  return $args[0] + $args[1];
} 
```

您可以简单地接受一个数组并将所有内容相加：

```
function plus($args){
  return $args[0] + $args[1];
} 
```

或者您可以总结所有论点：

```
function plus($args){
  return array_sum($args);
} 
```

这是 PHP，有 10 种方法可以做任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T00:39:42.810

您需要调整您的函数，使其仅接受一个参数，然后在函数本身中处理该参数：

非常简单的例子：

```
function plus($arr){
   echo $arr[0]+$arr[1];
}

$parms = array(20,10);
plus($parms); 
```

您可以轻松地将其调整为遍历所有元素，检查输入等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T00:40:40.157

嘿？错误信息*非常*明确：您在函数中要求*两个*参数，但您只提供一个。

如果要传递一个数组，它将是一个变量。

```
function plus($array){
    echo ($array[0]+$array[1]);
}
$test = array(1,5);
plus($test); //echoes 6 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T00:40:44.657

用这个：

```
function plus($arr){
   $c = $arr[0]+$arr[1];
   echo $c;
} 
```

您可以调用：

```
$parms = array(20,10);
plus($parms); 
```

# java - Java（或 Excel） - 如何对齐无序的列数据

> ID：12487025
> 
> 赞同：2
> 
> 时间：2012-09-19T00:37:22.313
> 
> 标签：java, excel

我有以下数据：

```
 a b c d f g h i j
    a b d e f h i j
    a b c d e f j k l
    a b c d e f g h m 
```

我想将其输出（例如到 Excel）如下：

```
 a b c d e f g h i j
    a b   d e f   h i j
    a b c d e f       j k l
    a b c d e f g h         m 
```

在 excel 术语中，我想移动单元格，以便文本在列中匹配。

注意：为了简单起见，我使用了字母顺序，但实际上没有这样的顺序 - 但我需要保持原始顺序。

更新示例：

```
 Original Data                                                   
    a   b   c   d   f   g   h   i   j                   
    a   b   d   e   f   h   i   j                       
    a   b   c   d   e   f   j   k   l                   
    a   b   x   d   e   f   g   h   m                   

    Dougs Output                                                    
    a   b   c   d           f   g   h   i   j           
    a   b       d       e   f       h   i   j           
    a   b   c   d       e   f               j   k   l   
    a   b       d   x   e   f   g   h                   m

    My Manual Output (Required) 
    a   b   c       d       f   g   h   i   j           
    a   b           d   e   f       h   i   j           
    a   b   c       d   e   f               j   k   l   
    a   b       x   d   e   f   g   h                   m 
```

x 以上出现在索引 2 处，但 d 出现在索引 2 和 3 处，因此 x 应该在 d 之前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:17:22.177

我想我明白了。这取决于您不能将重复值添加到`collection`. 诀窍是以正确的顺序解析源数据。我将其解释为向下遍历一列中的每个单元格，然后转到下一列。然后，该集合包含在该搜索顺序中找到的每个项目的第一个实例。

该代码需要两张表，一张带有源表，一张目标表包含输出。在这种情况下，我使用代码设置工作簿`wsSource`中`wsTarget`的前两张表，但您可以根据需要更改它。

您可以更改 的定义`rng`。只要源表上没有其他内容，代码将确定最后一行和最后一列数据。这是通过其中的行来完成的`Find`：

```
Sub Rearrange()
Dim wsSource As Excel.Worksheet
Dim rng As Excel.Range
Dim i As Long, j As Long
Dim cell As Excel.Range
Dim coll As Collection
Dim wsTarget As Excel.Worksheet
Dim SourceLastRow As Long
Dim SourceLastCol As Long

Set wsSource = ThisWorkbook.Sheets(1)
Set wsTarget = ThisWorkbook.Sheets(2)
Set rng = wsSource.Range("A1:i4")    'change to suit

Set coll = New Collection
SourceLastRow = rng.Cells.Find("*", rng.Cells(1), xlValues, , xlByRows, xlPrevious).Row
SourceLastCol = rng.Cells.Find("*", rng.Cells(1), xlValues, , xlByColumns, xlPrevious).Column
'cycle through the cells in the range down through each column from left to right
For i = 1 To SourceLastCol
    For j = 1 To SourceLastRow
        Set cell = wsSource.Cells(j, i)
        If cell.Value <> "" Then
            On Error Resume Next
            'can only add an item once - no duplicates
            coll.Add cell.Value, cell.Value
            On Error GoTo 0
        End If
    Next j
Next i
'Clear and re-load wsTarget
wsTarget.Cells.Clear
For i = 1 To coll.Count
    For j = 1 To SourceLastRow
        If Application.WorksheetFunction.CountIf(wsSource.Cells(j, 1).EntireRow, coll(i)) = 1 Then
            wsTarget.Cells(j, i) = coll(i)
        End If
    Next j
Next i
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:11:13.080

我已经用Java解决了它。有一个自定义比较，它查看每个值的最大和最小索引并对其进行排序。然后我将它们打印到屏幕上。

**请注意，由于此处未解释的原因，我的数据位于 HashMap 中，但它可能很容易位于简单的列表中。

**请原谅我缺乏经验的编码实践。

@Doug-Glancy 如果您能够在 VB 中使用，那就太好了！

值比较器.java

```
import java.util.Comparator;
import java.util.Map;

public class ValueComparator implements Comparator<String> {

    private Map<String, Integer[]> base;

    public ValueComparator(Map<String, Integer[]> m) {
        this.base = m;
    }

    public int compare(String so1, String so2) {

        // get the max and min indices from each data peice
        Integer[] o1 = base.get(so1);
        Integer[] o2 = base.get(so2);

        // compare their min index first
        if (o1[0] < o2[0]) {
            return -1;
        }
        if (o1[0] == o2[0]) { //if they are the same
            if ( o1[1] < o2[1]) { // then look at the max index
                return -1;
            }
            else {
                return 1;
            }                   
        }
        else { 
            return 1;
        }
    }
} 
```

应用程序.java

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.HashMap;
import java.util.LinkedHashMap;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;
import localhost.ValueComparator;

public class App 
{
    public static void main( String[] args )
    {

        // create a list to store our original data
        ArrayList<HashMap<String, String>> keyValuePairs = new ArrayList<HashMap<String,String>>();

        // add the data to the list
        HashMap<String, String> a = new LinkedHashMap<String, String>();
        a.put("a", "1"); a.put("b", "1"); a.put("c", "1"); a.put("d", "1"); a.put("f", "1"); a.put("g", "1"); a.put("h", "1"); a.put("i", "1"); a.put("j", "1");
        keyValuePairs.add(a);

        HashMap<String, String> e = new LinkedHashMap<String, String>();
        e.put("a", "1"); e.put("b", "1"); e.put("d", "1"); e.put("e", "1"); e.put("f", "1"); e.put("h", "1"); e.put("i", "1"); e.put("j", "1");
        keyValuePairs.add(e);

        HashMap<String, String> b = new LinkedHashMap<String, String>();
        b.put("a", "1"); b.put("b", "1"); b.put("c", "1"); b.put("d", "1"); b.put("e", "1"); b.put("f", "1"); b.put("j", "1"); b.put("k", "1"); b.put("l", "1");
        keyValuePairs.add(b);

        HashMap<String, String> c = new LinkedHashMap<String, String>();
        c.put("a", "1"); c.put("b", "1"); c.put("x", "1"); c.put("d", "1"); c.put("e", "1"); c.put("f", "1"); c.put("g", "1"); c.put("h", "1"); c.put("m", "1");
        keyValuePairs.add(c);

        // create a map to store the max and min indices
        Map<String, Integer[]> m = new HashMap<String, Integer[]>();

        Integer curpos = new Integer(0);

        // loop through the data and find the max and min indices of each data (key)
        for ( Map<String,String> s : keyValuePairs) {
            curpos = 0;
            for ( String t : s.keySet() ) {

                if ( !m.containsKey(t) ){
                    // if its the first time to see the data, just add its current index as max and min
                    m.put(t,new Integer[] {curpos, curpos});

                }
                else {
                    // check if index is lower than existing minimum
                    Integer[] i = m.get(t);
                    if ( i[0] > curpos) {
                        m.put(t, new Integer[] {curpos, i[1]});
                    }
                    //check if index is greater than current maximum
                    if ( curpos > i[1] ) {
                        m.put(t, new Integer[] {i[0], curpos});
                    }
                }
                curpos++;
            }
        }

        System.out.println("The unsorted data");

        for ( HashMap<String,String> h : keyValuePairs ) {
            for ( String s : h.keySet() ) {
                System.out.print(" " + s + " ");
            }
            System.out.println();
        }
        System.out.println("\n");

        // Sort the data using our custom comparator
        ValueComparator com = new ValueComparator(m);
        List<String> toSort = new LinkedList<String>(m.keySet());
        Collections.sort(toSort, com);

        System.out.println("The sorted data");

        for ( HashMap<String,String> h : keyValuePairs) {

            for ( String s : toSort ) {
                if ( h.containsKey(s) ) {
                    System.out.print(s + " ");
                }
                else {
                    System.out.print("  ");
                }
            }
            System.out.println();
        }

    }

} 
```

# r - R：无法打开文件：没有这样的文件或目录

> ID：12487026
> 
> 赞同：0
> 
> 时间：2012-09-19T00:37:32.253
> 
> 标签：r

我有如下脚本：

```
setwd ("I:/prep/Coord/RData/test")

#load .csv files
a.files <- grep("^Whirr", dir(), value=TRUE) #pattern matching
b.files <- paste0("Files_", a.files) 

for(i in length(a.files)){
    a <- read.table(a.files[i], header=T, sep=",", row.names=1) #read files start with     Whirr_
    b <- read.table(b.files[i], header=T, sep=",", row.names=1) #read files start with Files_
    a
    b

    cr <- as.matrix(a) %*% as.matrix(t(a)
    cr

    diag(cr)<-0
    cr

    #write to file
    write.csv(cr, paste0("CR_", a.files[i], ".csv"))
} 
```

基本上，我想做的是比较两个文件名末尾有相似文件名的文件，并进行计算，并将结果写入文件。

当我尝试打印 a.files 和 b.files 时，输出对我来说似乎没问题。输出如下：

```
> a.files <- grep("^Whirr", dir(), value=TRUE) #pattern matching
> b.files <- paste0("Files_", a.files, sep="") 
Error: could not find function "paste0"
> a.files
[1] "Whirr_127.csv" "Whirr_128.csv"
> b.files
[1] "Files_ Whirr_127.csv" "Files_ Whirr_128.csv"
> 
```

我尝试为脚本提供多个文件，但收到如下错误消息：

```
Error in file(file, "rt") : cannot open the connection
In addition: Warning message:
In file(file, "rt") : cannot open file 'Files_ Whirr_128.csv': No such file or directory 
```

所以，我尝试使用 file.choose，但它对我也不起作用。

感谢专家的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T00:48:08.390

换行：

```
b.files <- paste0("Files_", a.files) 
```

至：

```
b.files <- paste("Files_", a.files, sep="") 
```

您正在使用没有的 R 版本`paste0`（我看到在较早的答案中提供了代码）。这意味着您保留了 的早期版本`b.files`，也许是使用`paste`.

关于这一点的一个重要教训是，每当您收到有关某行的错误消息时，例如`Error: could not find function "paste0"`，这意味着该行*没有发生！*您必须在粘贴代码之前修复该错误，或​​者在您粘贴代码时告诉我们该错误 - 否则我们假设该`b.files <- paste0("Files_", a.files)`行有效。

# css - 更改嵌套 div 的 z-index

> ID：12487028
> 
> 赞同：1
> 
> 时间：2012-09-19T00:37:45.950
> 
> 标签：css, html, z-index

我在网页上有一个固定的标题 div 和一个固定的侧栏 div。阴影超出了菜单的高度。当菜单阴影与链接重叠时，它们只能部分悬停。我还没有找到改变链接 z-index 的方法。有人能帮我吗？

示例：http: [//jsfiddle.net/Kf6Fw/2/](http://jsfiddle.net/Kf6Fw/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T01:00:41.480

如果你穿上它`z-index: 6; position: relative;`，`#top`它就会越过阴影，但你也会失去阴影。

我建议将链接向下移动 - 让阴影覆盖链接无论如何都不是很好的可用性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T01:28:33.160

One way of solving it is to add another div, #top-wrap, around #top

```
<div id="side">
    <div id="top-wrap">
        <div id="top">
            <a href='#'>Dictionary</a>
            <a href='#'>Comments</a>
        </div>
    </div>
</div> 
```

So you can set the that with a lower z-index than that of #menu_all

```
#top-wrap
{
    height:50px;
    width:100%;
    background-color:green;
    margin-top:75px;
    font-size:20px;
    z-index:4;
}

#top
{
    position:relative;
    z-index:6;
} 
```

# mysql - 自定义函数调用导致的 MySQL 错误 #1451

> ID：12487030
> 
> 赞同：0
> 
> 时间：2012-09-19T00:38:10.687
> 
> 标签：mysql, database, function, insert, mysql-error-1452

我做了一个相当大的函数，有很多选择/更新来用数据填充所有表。刚刚尝试填写表格，但在调用函数时收到 #1452 错误

```
SELECT insert_tune("A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S") 
```

错误的样子

```
#1452 - Cannot add or update a child row: a foreign key constraint fails (`rbase`.`tunes`, CONSTRAINT `tunes_ibfk_1` FOREIGN KEY (`riddim_fk`) REFERENCES `riddims` (`riddim_id`) ON DELETE SET NULL ON UPDATE CASCADE) 
```

数据库布局如下所示：

```
CREATE TABLE artists (
    artist_id INT AUTO_INCREMENT PRIMARY KEY,
    artist_name varchar(100) UNIQUE,
    artist_aka varchar(255) UNIQUE
) ENGINE = 'InnoDB';

CREATE TABLE labels (
    label_id SMALLINT AUTO_INCREMENT PRIMARY KEY,
    label_name varchar(100) UNIQUE,
    label_aka varchar(255) UNIQUE
) ENGINE = 'InnoDB';

CREATE TABLE producers (
    producer_id SMALLINT AUTO_INCREMENT PRIMARY KEY,
    producer_forename varchar(100),
    producer_nickname varchar(100) UNIQUE,
    producer_lastname varchar(100)
) ENGINE = 'InnoDB';

CREATE TABLE years (
    year_id TINYINT AUTO_INCREMENT PRIMARY KEY,
    year_value varchar(4) UNIQUE
) ENGINE = 'InnoDB';

CREATE TABLE genres (
    genre_id TINYINT AUTO_INCREMENT PRIMARY KEY,
    genre_name varchar(10) UNIQUE
) ENGINE = 'InnoDB';

CREATE TABLE flags (
    flag_id TINYINT AUTO_INCREMENT PRIMARY KEY,
    flag_name varchar(12) UNIQUE
) ENGINE = 'InnoDB';

CREATE TABLE tags (
    tag_id SMALLINT AUTO_INCREMENT PRIMARY KEY,
    tag_name varchar(16) UNIQUE
) ENGINE = 'InnoDB';

CREATE TABLE sources (
    source_id TINYINT AUTO_INCREMENT PRIMARY KEY,
    source_name varchar(30) UNIQUE
) ENGINE = 'InnoDB';

CREATE TABLE riddims (
    riddim_id INT AUTO_INCREMENT PRIMARY KEY,
    riddim_name varchar(40) UNIQUE,
    riddim_aka varchar(255) UNIQUE,
    genre_fk TINYINT,
    youtube varchar(11) UNIQUE,
    image varchar(11) UNIQUE,
    FOREIGN KEY (genre_fk) REFERENCES genres(genre_id) ON DELETE SET NULL ON UPDATE CASCADE
) ENGINE = 'InnoDB';

CREATE TABLE tunes (
    tune_id INT AUTO_INCREMENT PRIMARY KEY, 
    riddim_fk INT DEFAULT NULL,
    artist_fk INT DEFAULT NULL,
    tune_name varchar(60) DEFAULT NULL,
    tune_aka varchar(255) DEFAULT NULL,
    label_fk SMALLINT DEFAULT NULL,
    producer_fk SMALLINT DEFAULT NULL,
    year_fk TINYINT DEFAULT NULL,   
    lyrics TEXT DEFAULT NULL,
    flag_fk TINYINT,
    tag_fk SMALLINT,
    source_fk TINYINT,
    last_modified TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (riddim_fk) REFERENCES riddims(riddim_id) ON DELETE SET NULL ON UPDATE CASCADE,
    FOREIGN KEY (artist_fk) REFERENCES artists(artist_id) ON DELETE SET NULL ON UPDATE CASCADE,
    FOREIGN KEY (producer_fk) REFERENCES producers(producer_id) ON DELETE SET NULL ON UPDATE CASCADE,
    FOREIGN KEY (year_fk) REFERENCES years(year_id) ON DELETE SET NULL ON UPDATE CASCADE,
    FOREIGN KEY (flag_fk) REFERENCES flags(flag_id) ON DELETE SET NULL ON UPDATE CASCADE,
    FOREIGN KEY (tag_fk) REFERENCES tags(tag_id) ON DELETE SET NULL ON UPDATE CASCADE,
    FOREIGN KEY (source_fk) REFERENCES sources(source_id) ON DELETE SET NULL ON UPDATE CASCADE
) ENGINE = 'InnoDB'; 
```

我用来填充表格的函数看起来像

```
CREATE FUNCTION insert_tune(
        riddim      varchar(40),
        riddim_a    varchar(255),
        yt          varchar(11),
        img         varchar(11),
        artist      varchar(100),
        artist_a    varchar(255),
        tune        varchar(60),
        tune_a      varchar(255),
        genre       varchar(10),
        label       varchar(100),
        label_a     varchar(255),
        producer_fn varchar(100),
        producer_nn varchar(100),
        producer_ln varchar(100),
        year        varchar(4),
        lrx         TEXT,
        flag        varchar(12),
        tag         varchar(16),
        source      varchar(30)
    )
    RETURNS INT
    DETERMINISTIC
BEGIN

    DECLARE cRiddim, cArtist, cLabel, cProducer, cRiddimArtist, cRiddimTune, cArtistTune, cRiddimArtistTune INT;

    /* Testing if the tables already contain certain records/entries */
    SELECT COUNT(*) FROM riddims WHERE riddim_name = riddim INTO cRiddim;
    SELECT COUNT(*) FROM artists WHERE artist_name = artist INTO cArtist;
    SELECT COUNT(*) FROM labels WHERE label_name = label INTO cLabel;
    SELECT COUNT(*) FROM producers WHERE producer_nickname = producer_nn INTO cProducer;
    SELECT COUNT(*) FROM tunes WHERE artist_fk = (SELECT artist_id FROM artists WHERE artist_name = artist) AND tune_name = tune AND ISNULL(riddim_fk) INTO cArtistTune;
    SELECT COUNT(*) FROM tunes WHERE riddim_fk = (SELECT riddim_id FROM riddims WHERE riddim_name = riddim) AND tune_name = tune AND ISNULL(artist_fk) INTO cRiddimTune;
    SELECT COUNT(*) FROM tunes WHERE riddim_fk = (SELECT riddim_id FROM riddims WHERE riddim_name = riddim) AND artist_fk = (SELECT artist_id FROM artists WHERE artist_name = artist) AND ISNULL(tune_name) INTO cRiddimArtist;
    SELECT COUNT(*) FROM tunes WHERE riddim_fk = (SELECT riddim_id FROM riddims WHERE riddim_name = riddim) AND artist_fk = (SELECT artist_id FROM artists WHERE artist_name = artist) AND tune_name = tune INTO cRiddimArtistTune;

    /* 
       ##########
       # GENRES #
       ##########
    */
    IF genre NOT IN ('') AND NOT ISNULL(genre) THEN
        INSERT IGNORE INTO genres (genre_name) VALUES (genre);
    END IF;

    /* 
       ###########
       # RIDDIMS #
       ###########
    */
    IF cRiddim < 1 AND riddim NOT IN ('') AND NOT ISNULL(riddim) THEN
        INSERT INTO riddims (
            riddim_name, 
            riddim_aka, 
            youtube, 
            image
        ) 
    VALUES (
        riddim,
        IF(riddim_a NOT IN (''), riddim_a, NULL), 
        IF(yt NOT IN (''), yt, NULL), 
        IF(img NOT IN (''), img, NULL)
    );
    ELSE
        UPDATE riddims SET 
            riddim_aka = IFNULL(riddim_aka, IF(NOT ISNULL(riddim_a) AND riddim_a NOT IN (''), riddim_a, NULL)),
            genre_fk = IFNULL(genre_fk, IF(NOT ISNULL(genre) AND genre NOT IN (''), (SELECT genre_id FROM genres WHERE genre_name = genre), NULL)),
            youtube = IFNULL(youtube, IF(NOT ISNULL(youtube) AND youtube NOT IN (''), youtube, NULL)),
            image = IFNULL(img, IF(NOT ISNULL(img) AND img NOT IN (''), img, NULL))
        WHERE 
            riddim_name = riddim;
    END IF;

    /* 
       ###########
      # ARTISTS #
       ###########
    */  
    IF cArtist < 1 AND artist NOT IN ('') AND NOT ISNULL(artist) THEN
        INSERT INTO artists (
            artist_name, 
            artist_aka
        ) 
        VALUES (
            artist,
            IF(artist_a NOT IN (''), artist_a, NULL)
        );
    ELSE
        UPDATE artists SET 
            artist_aka = IFNULL(artist_aka, IF(NOT ISNULL(artist_a) AND artist_a NOT IN (''), artist_a, NULL)) 
        WHERE 
            artist_name = artist;
    END IF;

    /* 
       ##########
       # LABELS #
       ##########
    */
    IF cLabel < 1 AND label NOT IN ('') AND NOT ISNULL(label) THEN
        INSERT INTO labels (
            label_name,
            label_aka
        )
        VALUES (
            label,
            IF(label_a NOT IN (''), label_a, NULL)
        );
    ELSE
        UPDATE labels SET 
            label_aka = IFNULL(label_aka, IF(NOT ISNULL(label_a) AND label_a NOT IN (''), label_a, NULL)) 
        WHERE label_name = label;
    END IF;

    /* 
       #############
       # PRODUCERS #
       #############
    */
    IF cProducer < 1 AND producer_nn NOT IN ('') AND NOT ISNULL(producer_nn) THEN
        INSERT INTO producers (
            producer_forename,
            producer_nickname,
            producer_lastname
        )
        VALUES (
            IF(producer_fn NOT IN (''), producer_fn, NULL),
            producer_nn,
            IF(producer_ln NOT IN (''), producer_ln, NULL)
        );
    ELSE
        UPDATE producers SET 
            producer_forename = IFNULL(producer_forename, IF(NOT ISNULL(producer_fn) AND producer_fn NOT IN (''), producer_fn, NULL)),
            producer_lastname = IFNULL(producer_lastname, IF(NOT ISNULL(producer_ln) AND producer_ln NOT IN (''), producer_ln, NULL))
        WHERE
            producer_nickname = producer_nn;
    END IF;

    /* 
       #########
       # YEARS #
       #########
    */
    IF year NOT IN ('') AND NOT ISNULL(year) THEN
        INSERT IGNORE INTO years (year_value) VALUES (year);
    END IF;

    /* 
       #########
       # FLAGS #
       #########
    */  
    IF flag NOT IN ('') AND NOT ISNULL(flag) THEN
        INSERT IGNORE INTO flags (flag_name) VALUES (flag);
    END IF;

    /* 
       ########
       # TAGS #
       ########
    */  
    IF tag NOT IN ('') AND NOT ISNULL(tag) THEN
        INSERT IGNORE INTO tags (tag_name) VALUES (tag);
    END IF;

    /* 
       ###########
      # SOURCES #
       ###########
       */       
    IF source NOT IN ('') AND NOT ISNULL(source) THEN
        INSERT IGNORE INTO sources (source_name) VALUES (source);
    END IF;

    /* 
       #########
       # TUNES #
   #########
    */
    IF cArtistTune > 0 THEN
        UPDATE tunes SET 
            riddim_fk = IFNULL(riddim_fk, IF(NOT ISNULL(riddim) AND riddim NOT IN (''), (SELECT riddim_id FROM riddims WHERE riddim_name = riddim), NULL)),
            tune_aka = IFNULL(tune_aka, IF(NOT ISNULL(tune_a) AND tune_a NOT IN (''), tune_a, NULL)),
            label_fk = IFNULL(label_fk, IF(NOT ISNULL(label) AND label NOT IN (''), (SELECT label_id FROM labels WHERE label_name = label), NULL)),
            producer_fk = IFNULL(producer_fk, IF(NOT ISNULL(producer_nn) AND producer_nn NOT IN (''), (SELECT producer_id FROM producers WHERE producer_nickname = producer_nn), NULL)),
            year_fk = IFNULL(year_fk, IF(NOT ISNULL(year) AND year NOT IN (''), (SELECT year_id FROM years WHERE year_value = year), NULL)),
            lyrics = IFNULL(lyrics, IF(NOT ISNULL(lrx) AND lrx NOT IN (''), lrx, NULL)),
            flag_fk = IFNULL(flag_fk, IF(NOT ISNULL(flag) AND flag NOT IN (''), (SELECT flag_id FROM flags WHERE flag_name = flag), NULL)),
            tag_fk = IFNULL(tag_fk, IF(NOT ISNULL(tag) AND tag NOT IN (''), (SELECT tag_id FROM tags WHERE tag_name = tag), NULL)),
            source_fk = IFNULL(source_fk, IF(NOT ISNULL(source) AND source NOT IN (''), (SELECT source_id FROM sources WHERE source_name = source), NULL))
        WHERE 
            tune_name = tune AND artist_fk = (SELECT artist_id FROM artists WHERE artist_name = artist);
    ELSEIF cRiddimTune > 0 THEN
        UPDATE tunes SET 
            artist_fk = IFNULL(artist_fk, IF(NOT ISNULL(artist) AND artist NOT IN (''), (SELECT artist_id FROM artists WHERE artist_name = artist), NULL)),
            tune_aka = IFNULL(tune_aka, IF(NOT ISNULL(tune_a) AND tune_a NOT IN (''), tune_a, NULL)),
            label_fk = IFNULL(label_fk, IF(NOT ISNULL(label) AND label NOT IN (''), (SELECT label_id FROM labels WHERE label_name = label), NULL)),
            producer_fk = IFNULL(producer_fk, IF(NOT ISNULL(producer_nn) AND producer_nn NOT IN (''), (SELECT producer_id FROM producers WHERE producer_nickname = producer_nn), NULL)),
            year_fk = IFNULL(year_fk, IF(NOT ISNULL(year) AND year NOT IN (''), (SELECT year_id FROM years WHERE year_value = year), NULL)),
            lyrics = IFNULL(lyrics, IF(NOT ISNULL(lrx) AND lrx NOT IN (''), lrx, NULL)),
            flag_fk = IFNULL(flag_fk, IF(NOT ISNULL(flag) AND flag NOT IN (''), (SELECT flag_id FROM flags WHERE flag_name = flag), NULL)),
            tag_fk = IFNULL(tag_fk, IF(NOT ISNULL(tag) AND tag NOT IN (''), (SELECT tag_id FROM tags WHERE tag_name = tag), NULL)),
            source_fk = IFNULL(source_fk, IF(NOT ISNULL(source) AND source NOT IN (''), (SELECT source_id FROM sources WHERE source_name = source), NULL))
        WHERE
            tune_name = tune AND riddim_fk = (SELECT riddim_id FROM riddims WHERE riddim_name = riddim);
    ELSEIF cRiddimArtist > 0 THEN
        UPDATE tunes SET 
            tune_name = IFNULL(tune_name, IF(NOT ISNULL(tune) AND tune NOT IN (''), tune, NULL)),
            tune_aka = IFNULL(tune_aka, IF(NOT ISNULL(tune_a) AND tune_a NOT IN (''), tune_a, NULL)),
            label_fk = IFNULL(label_fk, IF(NOT ISNULL(label) AND label NOT IN (''), (SELECT label_id FROM labels WHERE label_name = label), NULL)),
            producer_fk = IFNULL(producer_fk, IF(NOT ISNULL(producer_nn) AND producer_nn NOT IN (''), (SELECT producer_id FROM producers WHERE producer_nickname = producer_nn), NULL)),
            year_fk = IFNULL(year_fk, IF(NOT ISNULL(year) AND year NOT IN (''), (SELECT year_id FROM years WHERE year_value = year), NULL)),
            lyrics = IFNULL(lyrics, IF(NOT ISNULL(lrx) AND lrx NOT IN (''), lrx, NULL)),
            flag_fk = IFNULL(flag_fk, IF(NOT ISNULL(flag) AND flag NOT IN (''), (SELECT flag_id FROM flags WHERE flag_name = flag), NULL)),
            tag_fk = IFNULL(tag_fk, IF(NOT ISNULL(tag) AND tag NOT IN (''), (SELECT tag_id FROM tags WHERE tag_name = tag), NULL)),
            source_fk = IFNULL(source_fk, IF(NOT ISNULL(source) AND source NOT IN (''), (SELECT source_id FROM sources WHERE source_name = source), NULL))
        WHERE
            artist_fk = (SELECT artist_id FROM artists WHERE artist_name = artist) AND riddim_fk = (SELECT riddim_id FROM riddims WHERE riddim_name = riddim);
    ELSEIF cRiddimArtistTune < 1 THEN
        IF tune NOT IN ('') AND NOT ISNULL(tune) AND artist NOT IN ('') AND NOT ISNULL(artist) THEN
            INSERT INTO tunes (
                riddim_fk,
                artist_fk,
                tune_name,
                tune_aka,
                label_fk,
                producer_fk,
                year_fk,
                lyrics,
                flag_fk,
                tag_fk,
                source_fk
            )
            VALUES (
                IF(NOT ISNULL(riddim) AND riddim NOT IN (''), riddim, NULL),
                (SELECT artist_id FROM artists WHERE artist_name = artist),
                tune,
                IF(NOT ISNULL(tune_a) AND tune_a NOT IN (''), tune_a, NULL),
                IF(NOT ISNULL(label) AND label NOT IN (''), (SELECT label_id FROM labels WHERE label_name = label), NULL),
                IF(NOT ISNULL(producer_nn) AND producer_nn NOT IN (''), (SELECT producer_id FROM producers WHERE producer_nickname = producer_nn), NULL),
                IF(NOT ISNULL(year) AND year NOT IN (''), (SELECT year_id FROM years WHERE year_value = year), NULL),
                IF(NOT ISNULL(lrx) AND lrx NOT IN (''), lrx, NULL),
                IF(NOT ISNULL(flag) AND flag NOT IN (''), (SELECT flag_id FROM flags WHERE flag_name = flag), NULL),
                IF(NOT ISNULL(tag) AND tag NOT IN (''), (SELECT tag_id FROM tags WHERE tag_name = tag), NULL),
                IF(NOT ISNULL(source) AND source NOT IN (''), (SELECT source_id FROM sources WHERE source_name = source), NULL)
        );
        END IF;
        IF tune NOT IN ('') AND NOT ISNULL(tune) AND riddim NOT IN ('') AND NOT ISNULL(riddim) THEN
            INSERT INTO tunes (
                riddim_fk,
                artist_fk,
                tune_name,
                tune_aka,
                label_fk,
                producer_fk,
                year_fk,
                lyrics,
                flag_fk,
                tag_fk,
                source_fk
            )
            VALUES (
                (SELECT riddim_id FROM riddims WHERE riddim_name = riddim),
                IF(NOT ISNULL(artist) AND artist NOT IN (''), (SELECT artist_id FROM artists WHERE artist_name = artist), NULL),
                tune,
                IF(NOT ISNULL(tune_a) AND tune_a NOT IN (''), tune_a, NULL),
                IF(NOT ISNULL(label) AND label NOT IN (''), (SELECT label_id FROM labels WHERE label_name = label), NULL),
                IF(NOT ISNULL(producer_nn) AND producer_nn NOT IN (''), (SELECT producer_id FROM producers WHERE producer_nickname = producer_nn), NULL),
                IF(NOT ISNULL(year) AND year NOT IN (''), (SELECT year_id FROM years WHERE year_value = year), NULL),
                IF(NOT ISNULL(lrx) AND lrx NOT IN (''), lrx, NULL),
                IF(NOT ISNULL(flag) AND flag NOT IN (''), (SELECT flag_id FROM flags WHERE flag_name = flag), NULL),
                IF(NOT ISNULL(tag) AND tag NOT IN (''), (SELECT tag_id FROM tags WHERE tag_name = tag), NULL),
                IF(NOT ISNULL(source) AND source NOT IN (''), (SELECT source_id FROM sources WHERE source_name = source), NULL)
            );
        END IF;
        IF artist NOT IN ('') AND NOT ISNULL(artist) AND riddim NOT IN ('') AND NOT ISNULL(riddim) THEN
            INSERT INTO tunes (
                riddim_fk,
                artist_fk,
                tune_name,
                tune_aka,
                label_fk,
                producer_fk,
                year_fk,
                lyrics,
                flag_fk,
                tag_fk,
                source_fk
            )
            VALUES (
                (SELECT riddim_id FROM riddims WHERE riddim_name = riddim),
                (SELECT artist_id FROM artists WHERE artist_name = artist),
                IF(NOT ISNULL(tune) AND tune NOT IN (''), tune, NULL),
                IF(NOT ISNULL(tune_a) AND tune_a NOT IN (''), tune_a, NULL),
                IF(NOT ISNULL(label) AND label NOT IN (''), (SELECT label_id FROM labels WHERE label_name = label), NULL),
                IF(NOT ISNULL(producer_nn) AND producer_nn NOT IN (''), (SELECT producer_id FROM producers WHERE producer_nickname = producer_nn), NULL),
                IF(NOT ISNULL(year) AND year NOT IN (''), (SELECT year_id FROM years WHERE year_value = year), NULL),
                IF(NOT ISNULL(lrx) AND lrx NOT IN (''), lrx, NULL),
                IF(NOT ISNULL(flag) AND flag NOT IN (''), (SELECT flag_id FROM flags WHERE flag_name = flag), NULL),
                IF(NOT ISNULL(tag) AND tag NOT IN (''), (SELECT tag_id FROM tags WHERE tag_name = tag), NULL),
                IF(NOT ISNULL(source) AND source NOT IN (''), (SELECT source_id FROM sources WHERE source_name = source), NULL)
            );
        END IF;
    ELSEIF cRiddimArtistTune > 0 THEN
        UPDATE tunes SET 
            tune_aka = IFNULL(tune_aka, IF(NOT ISNULL(tune_a) AND tune_a NOT IN (''), tune_a, NULL)),
            label_fk = IFNULL(label_fk, IF(NOT ISNULL(label) AND label NOT IN (''), (SELECT label_id FROM labels WHERE label_name = label), NULL)),
            producer_fk = IFNULL(producer_fk, IF(NOT ISNULL(producer_nn) AND producer_nn NOT IN (''), (SELECT producer_id FROM producers WHERE producer_nickname = producer_nn), NULL)),
            year_fk = IFNULL(year_fk, IF(NOT ISNULL(year) AND year NOT IN (''), (SELECT year_id FROM years WHERE year_value = year), NULL)),
            lyrics = IFNULL(lyrics, IF(NOT ISNULL(lrx) AND lrx NOT IN (''), lrx, NULL)),
            flag_fk = IFNULL(flag_fk, IF(NOT ISNULL(flag) AND flag NOT IN (''), (SELECT flag_id FROM flags WHERE flag_name = flag), NULL)),
            tag_fk = IFNULL(tag_fk, IF(NOT ISNULL(tag) AND tag NOT IN (''), (SELECT tag_id FROM tags WHERE tag_name = tag), NULL)),
            source_fk = IFNULL(source_fk, IF(NOT ISNULL(source) AND source NOT IN (''), (SELECT source_id FROM sources WHERE source_name = source), NULL))
        WHERE
            artist_fk = (SELECT artist_id FROM artists WHERE artist_name = artist) AND riddim_fk = (SELECT riddim_id FROM riddims WHERE riddim_name = riddim) AND tune_name = tune;
    END IF;

    RETURN 0; /** add more/better returns & values to determine what data was inserted **/
END 
```

对于那里的所有数据库向导，请多多包涵，我是这个东西的新手，所以这个功能可能有点臃肿。

无论如何，一些研究表明，当有一个外键列指向父表中不存在的行时，就会发生上述错误。奇怪的是我的桌子都是空的。当外键列 - 错误地 - 指向它自己的表时，也可能发生这种情况 - 但这里也不是这种情况（据我了解我阅读的类似问题）。

很烦人的是，我不允许在函数范围内使用 SELECT CONCAT() （用于调试目的），所以我并没有真正了解错误发生的原因/位置，但我认为它会在处理将数据插入到 tunes.riddim_fk 的函数。

我还将riddim_id、genre_id 等（父表的ID）设置为PRIMARY KEY 和AUTO_INCREMENT，现在phpMyAdmin 向我显示这些列的“NULL：否”，即使我没有指定“NOT NULL”。我假设其中一个键是自动将列设置为 NOT NULL。

可能这会导致错误，因为我将 NULL 添加到 ie。riddim_fk 列，如果函数参数“riddim”设置为“”（空字符串）？我假设不像我的实际函数测试调用（如上）我没有将空字符串作为参数传递给函数。

帮助表示赞赏！

**编辑：**错别字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:33:09.173

我发现了问题！我自己尝试将 varchar 插入 INT fk 列确实是一个错误。

```
 )
        VALUES (
            IF(NOT ISNULL(riddim) AND riddim NOT IN (''), riddim, NULL),
            (SELECT artist_id FROM artists WHERE artist_name = artist),
            tune, 
```

当然需要更改为

```
 )
        VALUES (
            IF(NOT ISNULL(riddim) AND riddim NOT IN (''), (SELECT riddim_id FROM riddims WHERE riddim_name = riddim), NULL),
            (SELECT artist_id FROM artists WHERE artist_name = artist),
            tune, 
```

我花了很长时间才找到那个。

# objective-c - UILabel 动态内容自动调整大小问题

> ID：12487036
> 
> 赞同：0
> 
> 时间：2012-09-19T00:39:07.153
> 
> 标签：objective-c, ios, xcode, uilabel, sizetofit

拜托，我需要一些必须包含动态内容的 UILabel 的帮助。它们包含在 UIScrollView 中。

我无法让它们根据屏幕方向正确调整大小。我也想在他们之间保持准确的距离。现在，我遇到了其中 2 个问题（还有很多）。

我正在使用以下代码来调整它们的大小，但它没有得到预期的结果：

```
 - (void) updateLabelsPositionForPortrait
{
    summary_PersonalMonth.numberOfLines = 0;
    summary_PersonalDay.numberOfLines = 0;

    summary_PersonalMonth.frame = CGRectMake(summary_PersonalMonth.frame.origin.x,
                                             summary_PersonalMonth.frame.origin.y,
                                             summary_PersonalMonth.frame.size.width + 15,
                                             summary_PersonalMonth.frame.size.height);
    [summary_PersonalMonth sizeToFit];

    summary_PersonalDay.frame = CGRectMake(summary_PersonalDay.frame.origin.x,
                                           summary_PersonalDay.frame.origin.y + summary_PersonalMonth.bounds.origin.y + 10,
                                           summary_PersonalDay.frame.size.width + 15,
                                           summary_PersonalDay.frame.size.height);
    [summary_PersonalDay sizeToFit];

    [self updateScrollViewContentSize];
}

- (void) updateLabelsPositionForLandscape
{
    summary_PersonalMonth.numberOfLines = 1;
    summary_PersonalDay.numberOfLines = 1;

    summary_PersonalMonth.frame = CGRectMake(summary_PersonalMonth.frame.origin.x,
                                             summary_PersonalMonth.frame.origin.y,
                                             summary_PersonalMonth.frame.size.width,
                                             summary_PersonalMonth.frame.size.height);
    [summary_PersonalMonth sizeToFit];

    summary_PersonalDay.frame = CGRectMake(summary_PersonalDay.frame.origin.x,
                                           summary_PersonalDay.frame.origin.y - summary_PersonalMonth.bounds.origin.y - 10,
                                           summary_PersonalDay.frame.size.width,
                                           summary_PersonalDay.frame.size.height);
    [summary_PersonalDay sizeToFit];

} 
```

我在 shouldAutorotateToInterfaceOrientation: 中以相应的方向调用每个方法。

```
if (UIInterfaceOrientationIsPortrait([UIDevice currentDevice].orientation))
{
    [self updateLabelsPositionForPortrait];
}
else
{
    [self updateLabelsPositionForLandscape];
} 
```

结果如下：

*   视图加载的初始结果

![视图加载的初始结果](../Images/b4bde12f9d808b8914fd2c5306ade8d1.png)

*   横向旋转后的结果

![横向旋转后的结果](../Images/ceccc5eb6f2472b7c03792630d743acd.png)

*   转回纵向后的结果

![转回纵向后的结果](../Images/34e1a342db77b44756dc092e7f7449c9.png)

拜托，我需要建议！

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T04:51:06.403

将所有标签从前到后存储在 NSArray 中。

现在制作一个根据方向设置标签框架的功能：

```
-(void)setFramesOfLabel:(BOOL)flag
{
    if(flag) //portrait
    {
      int height = 20;
      int spaceBetweenLabels = 20;
      itn xspace = 20 //
    }
    else//landscape changes
    {
      int height = 20;
      int spaceBetweenLabels = 20;
      itn xspace = 20 /
    }
    int count = 0;
    for(UILabel *label in arrLabels)
    {
       NSString *strText = [arrTexts objectAtIndex:count]; //as u may having text array to fill in labels as i assume
       CGSize expectedLabelSize = [strText sizeWithFont:label.font constrainedToSize:maximumLabelSize lineBreakMode:UILineBreakModeWordWrap]; //

       CGrect *newFrame = CGRectMake(xspace,height,expectedLabelSize.width,expectedLabelSize.height);
       [label setFrame:newFrame];

        height += expectedLabelSize.height;
       count ++;
    }
    [scrollView setContentSize(scrollView.width,height)];
} 
```

采用

```
if (UIInterfaceOrientationIsPortrait([UIDevice currentDevice].orientation))
{
  [self setFramesOfLabel:TRUE];
}
else
{    
  [self setFramesOfLabel:FALSE];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T00:53:04.193

您似乎一遍又一遍地在相同的帧上重新操作。尝试使用此代码：

```
// Declare the below variables as globals
CGRect defaultRectPortrait = CGRectZero;
CGRect defaultRectLandscape = CGRectZero;

- (void) updateLabelsPositionForPortrait
{
    summary_PersonalMonth.numberOfLines = 0;
    summary_PersonalDay.numberOfLines = 0;

    if(defaultRectPortait == CGRectZero)
        defaultRectPortait = CGRectMake(summary_PersonalMonth.frame.origin.x,
                                             summary_PersonalMonth.frame.origin.y,
                                             summary_PersonalMonth.frame.size.width + 15,
                                             summary_PersonalMonth.frame.size.height);

    [summary_PersonalMonth setFrame:defaultRectPortrait];
    [summary_PersonalMonth sizeToFit];

    // Do a similar thing for summary_PersonalDay

    [self updateScrollViewContentSize];
}    

- (void) updateLabelsPositionForLandscape
{
    // Use similar logic for summary_PersonalMonth and summary_PersonalDay in landscape as well
} 
```

最后：

```
if (UIInterfaceOrientationIsPortrait([UIDevice currentDevice].orientation))
{
    [self updateLabelsPositionForPortrait];
}
else
{
    [self updateLabelsPositionForLandscape];
} 
```

# algorithm - 使用有限内存和只读磁盘进行排序

> ID：12487038
> 
> 赞同：1
> 
> 时间：2012-09-19T00:39:12.277
> 
> 标签：algorithm, sorting, complexity-theory

想象以下场景：我有一个 10 Mb 的整数数组存储在只读存储介质上。我希望按升序打印数字。但是，我只有 2 Mb 的主内存（并且没有硬盘）。

一个非常简单的 O(n ² ) 解决方案（不使用可用的主内存）将重复扫描整个输入数组并增量输出下一个最小整数。我尝试在谷歌上搜索更好的排序算法，但答案一直引导我使用就地或外部排序算法，由于只读存储限制，这将不起作用。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T01:09:05.740

您可以使用主内存来减少扫描次数，并使用您提供的关系 o 大小，非常显着。

第一次扫描：在内存中存储一​​个几乎是主内存大小的内存，其中包含迄今为止发现的最小数字。当存储尚未满时，添加从数组中读取的下一个数字。店满时，比较店里最大的数字，如果新的小一点，就去掉最大的数字，再加上新的。扫描完整个数组后，按顺序输出找到的数字，记住存储的最大数字以及该块中出现的频率。

后续扫描：如果扫描的数量等于前一个块中的最大数量，并且它的出现次数小于前一次扫描的次数，则增加它的出现次数，但不要将它添加到存储中，如果它的出现次数更大大于或等于记住的计数将数字添加到存储中（如有必要，从存储中删除最大的数字）。如果扫描的数字大于前一次扫描的最大数字，但小于存储中的最大数字（或存储尚未满），则将其添加到存储中（必要时删除最大的数字）。扫描完成后，按顺序输出存储的数字，记住目前输出的最大数字，以及总共输出的数字（最大的数字可能和上一次扫描的数字相同，

我不确定商店的最佳数据结构是什么，但我认为堆是一个不错的选择（与最大的比较：O（1），替换：O（日志大小），输出的最终排序：O （大小*日志大小），几乎没有二叉搜索树的内存开销）。

# jquery - 复选框时如何对 div 类 ID 求和：用 jquery 或类似方法检查？

> ID：12487040
> 
> 赞同：-1
> 
> 时间：2012-09-19T00:39:14.340
> 
> 标签：jquery, checkbox, sum

就是这样，当复选框：用jquery检查时，我如何总结一些div类ID？

每次我检查一个复选框时，我应该能够总结一些来自**与每个复选框相关的查询****的一些 ID**。

 **例如。对于 3 个选中的复选框

```
for every each checkbox:checked -> sum += $(".someclass").attr('id') 
```

我的问题是： .attr(id) 只保存第一个找到的 ID。

想象一下第一个 ID = 5。

我的总和将是 5+5+5，而不是`ID(class value from checkbox1)+ID(class value from checkbox2)+ID(class value from checkbox3)`

我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T00:41:54.033

试试这个

```
var sum = 0;
$(".someclass:checked").next().each(function(){
    sum += Number(this.id);
}) 
```

**[演示](http://jsfiddle.net/m2WuV/)**

这假设“相关”输入位于复选框旁边。这是我用于演示的示例布局

```
<input type="checkbox" class="someclass" checked></input><input id="1"></input>
<input type="checkbox" class="someclass"></input><input id="2"></input>
<input type="checkbox" class="someclass"></input><input id="3"></input>
<input type="checkbox" class="someclass" checked></input><input id="7"></input>​ 
```**

# android - 将图像存储在数据库中作为 Android 应用程序的 URL 或 blob

> ID：12487044
> 
> 赞同：0
> 
> 时间：2012-09-19T00:40:21.350
> 
> 标签：android, android-image

我在服务器中有大量图片，需要在 android 应用程序中显示为列表视图。我尝试仅将 Url 存储在 db 中，但是在从服务器检索时，由于使用了更多数量的异步任务，它会出错。任何关于此的建议，因为如果我存储这么多图像将毫无用处，如果我不这样做，它会影响用户体验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T00:54:29.563

您不应为每个图像启动单独的 AsyncTask。我建议您使用单个 AsyncTask 来检索所有图像，一次一个（或几个）。接收到每个图像后，AsyncTask 可以使用`publishProgress`（您需要覆盖`onProgressUpdate`）在 UI 中显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T05:43:50.710

你在使用延迟加载吗？每当您需要加载大量不确定的图像时，通常建议使用延迟加载来改善用户体验并解决内存管理问题。

阅读/观看以下链接：

[ListView 中图像的延迟加载](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview)

[http://www.youtube.com/watch?v=gbQb1PVjfqM](http://www.youtube.com/watch?v=gbQb1PVjfqM)

# bash - 在bash中重命名一堆文件

> ID：12487046
> 
> 赞同：0
> 
> 时间：2012-09-19T00:40:39.227
> 
> 标签：bash

我在linux中有几个文件：

```
_foo_1.php
_foo_2.php
_foo_3.php 
```

我想将它们全部从 _foo 重命名为 _bar，保留文件名的其余部分。

我试过这个，但它没有重命名任何东西：

```
rename 's/_foo/_bar/' *.php 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T00:43:14.820

您使用的语法用于 Debian 重命名。Red Hat 重命名使用完全不同的语法。

```
rename _foo _bar _foo*.php 
```

# javascript - 在 UpshotJS 中使用 JavaScript 计算属性

> ID：12487047
> 
> 赞同：1
> 
> 时间：2012-09-19T00:40:38.753
> 
> 标签：javascript, upshot

我是 Upshot 的新手，找不到 Upshot 的文档/组，所以我将其发布在这里。我想在我的模型中计算属性，它是否受支持，我该如何实现？例如：

```
 upshot.metadata({
        "Cocktail:#Cocktail.Models": {
            "key": ["Id"],
            "fields": {
                "Id": { "type": "Int32:#System" },
                "Image": { "type": "String:#System" },

                "HtmlId": { "type": "String:#System"},

                 // Calculated Property
                "DetailUrl": { "type": "String:#System", "value": function(){return 'cocktail' + this.Id;} },
            }
        }
    }); 
```

# java - 无法让事件在我的 libgdx Actor 中工作

> ID：12487052
> 
> 赞同：13
> 
> 时间：2012-09-19T00:41:04.890
> 
> 标签：java, android, libgdx

我很难让事件与我`Actor`的 libgdx 一起工作。我正在使用每晚构建。

我的舞台是在子类的`show()`方法中设置的`Screen`：

```
stage = new Stage(Gdx.graphics.getWidth(), Gdx.graphics.getHeight(), true);
Gdx.input.setInputProcessor(stage);  
TestActor actor = new TestActor(); 
stage.addActor(actor); 
```

我的演员班看起来像：

```
class TestActor extends Actor {
    private Sprite sprite;
    private TextureAtlas atlas; 

    public TestActor() {   
        atlas = new TextureAtlas(Gdx.files.internal("textures/images-packed.atlas"));
        sprite = atlas.createSprite("logo-96");

        setTouchable(Touchable.enabled);
        addListener(new InputListener() {
            public boolean touchDown (InputEvent event, float x, float y, int pointer, int button) {
                Gdx.app.debug(TestGame.TAG, "TestActor.touchDown()");
                return true;  // must return true for touchUp event to occur
            }
            public void touchUp (InputEvent event, float x, float y, int pointer, int button) {
                Gdx.app.debug(TestGame.TAG, "TestActor.touchUp()");
            }
        });
    }

    @Override
    public void draw(SpriteBatch batch, float parentAlpha) {
        Color color = getColor();
        batch.setColor(color.r, color.g, color.b, color.a * parentAlpha);
        batch.draw(sprite, getX(), getY());
    }            
} 
```

这些事件似乎没有触发。奇怪的是，我使用了内置的 UI 小部件，例如`TextButton`并且可以很好地触发这些事件。谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-19T14:20:18.260

您还应该为您的演员设置边界。最好的方法（如果您想要与纹理相同的大小）将这些行添加到您的构造函数中：

```
setWidth(sprite.getWidth());
setHeight(sprite.getHeight());
setBounds(0, 0, getWidth(), getHeight()); 
```

请注意，您还可以使用前 2 个参数设置边界的位置。

# python - 自学python

> ID：12487053
> 
> 赞同：0
> 
> 时间：2012-09-19T00:41:17.973
> 
> 标签：python, coding-style, computer-science

```
x=0
y = raw_input("""Up to what number would you like to locate primes?: """)
for i in range(int(y)):
x = x + 1
if x%2 and x%3 and x%5 and x%7:
print x, '--> PRIME'
elif x==2 or x==3 or x==5 or x==7:
print x, '--> PRIME'
elif x==1:
print x
else:
print x 
```

过去一周半我一直在休息，我想我会花时间学习 Python。我今晚早些时候写了这个小脚本，它简单地打印出用户指定范围内的整数列表并识别其中哪些是素数。我想做但似乎找不到任何文档是让脚本计算素数的出现并回显“在您指定的间隔内有（空白）素数。” 我不知道在哪里寻找那种东西。我不想要答案，但我希望有人指出我需要前进的方向。

一如既往，谢谢。

PS这确实有效，我只是想让它“更好”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T01:30:14.850

I feel compelled to point out that your code works as long as you enter a number less than 11^2 = 121 (it would mistakenly identify 121 as prime).

The way you've written it is OK, but it doesn't really take advantage of the stronger features of Python. Let's look at the code:

```
x=0
y = raw_input("""Up to what number would you like to locate primes?: """)
for i in range(int(y)):
    x = x + 1
    if x%2 and x%3 and x%5 and x%7:
        print x, '--> PRIME'
    elif x==2 or x==3 or x==5 or x==7:
        print x, '--> PRIME'
    elif x==1:
        print x
    else:
        print x 
```

In Python, `for i in range(int(y))` will set `i` to 0, 1, 2, ..., y-1\. So, you don't need a *separate* `x` variable to keep track of the value:

```
y = raw_input("""Up to what number would you like to locate primes?: """)
for x in range(int(y)):
    if x%2 and x%3 and x%5 and x%7:
        print x, '--> PRIME' 
```

In Python, you can use `in` to quickly test equality against several choices (a special case of testing container membership), so `x==2 or x==3 or x==5 or x==7` can be rewritten as `x in (2, 3, 5, 7)`.

Now, if you want to count the number of primes, let's add a counter:

```
num_primes = 0
y = raw_input("""Up to what number would you like to locate primes?: """)
for x in range(int(y)):
    if x == 1:
        # 1 actually passes the modulo tests and would be considered prime in the original code
        print x
    elif (x%2 and x%3 and x%5 and x%7) or x in (2, 3, 5, 7):
        num_primes += 1 # this increments num_primes by 1
        print x, '--> PRIME'
    else:
        print x 
```

And finally print it out with a nice formatted message:

```
print 'There are {} primes between 0 and {}'.format(num_primes, y) 
```

Ta-da!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T00:47:33.243

人们确定整数是否为素数的一般方法是循环遍历每个整数从 1 到`n`（`n`所讨论的整数在哪里）并计算因数（记住这`i`是`n`if的因数`n % i == 0`）。当然，他们然后测试这个计数是否等于 2；如果是，`n`则为素数 - 如果不是，`n`则不是素数。像这样的东西（在伪代码中）：

> 为从 1 到 n 的每个 i设置 count = 0 { if (n % i is 0) then increment "count"}
> if ("count" is 2) then "n" is prime

显然有更好的方法，但对于刚刚学习的人来说应该足够了。在您的情况下，您希望将此过程应用于整个范围内的每个数字，计算遇到的素数数量并打印结果。

就像一个注释：确保正确缩进你的代码，作为提到的注释之一（这是 Python 必须的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T00:51:44.507

据我了解，您对您的算法感到满意（即使您显然知道它并不正确）；您只是在询问要添加什么以使其跟踪您在此过程中打印出“--> PRIME”的次数，对吗？

嗯，描述是一个线索。您需要一个计数器变量，它从 0 开始，然后每次打印出“--> PRIME”时将该计数器加 1。然后你可以在最后打印那个计数器：

```
x=0
y = raw_input("""Up to what number would you like to locate primes?: """)
primes = 0
for i in range(int(y)):
  x = x + 1
  if x%2 and x%3 and x%5 and x%7:
    print x, '--> PRIME'
    primes += 1
  elif x==2 or x==3 or x==5 or x==7:
    print x, '--> PRIME'
    primes += 1
  elif x==1:
    print x
  else:
    print x
print 'There were', primes, 'within your specified interval' 
```

您可能要研究的下一件事是编写一个为您进行检查的函数；然后如果函数返回 True，则增加计数器并打印数字。

然后，您可以更改代码以将 range(int(y)) 过滤到一个新列表中，其中仅包含函数返回 true 的那些值；一旦你有了它，你只需要计算结果中有多少元素。

然后您可以弄清楚如何将其编写为列表推导式（最初掌握窍门有点棘手，一旦掌握它会使您的代码变得更加简单）。

然后看看将原始显式列表生成器转换为生成器函数，和/或将列表推导转换为生成器表达式。这允许您在结果进入时打印出来（通过迭代生成器），但这意味着您不能再仅打印长度来获得总数，因此您需要一个不同的解决方案。

# javascript - 当值太小时，高图表数据标签位置需要改变

> ID：12487054
> 
> 赞同：2
> 
> 时间：2012-09-19T00:41:26.857
> 
> 标签：javascript, android, canvas, highcharts, responsive-design

大多数时候，数据标签（在本例中为现金）出现在正确的位置，就在右侧的栏内。但是，如果条的值足够低，它最终会与轴标签重叠（如紫色条所示）。

我的第一直觉是设置一个最大值并以此为基础更改数据标签的位置。例如，如果价值小于 10 美元，则将标签放在栏的右侧。但这种方法存在一个大问题。图表的大小是可变的和响应的，因此阈值需要是可变的。

理想情况下，应该测量条本身并与数据标签的宽度进行比较以确定位置。实现该解决方案让我不知所措。我没有运气从高图表或数据标签中获得条形的物理大小。

先谢谢各位了！

![在此处输入图像描述](../Images/8d91f6b39f7ac46bfaf4d8be58cac14e.png)

* * *

在 Android 2.1 设备上更新 Jugal Thakkar 的解决方案

![在此处输入图像描述](../Images/7566d59548cd9d000b4a3ddc86912956.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T10:28:00.217

`attr`您可以使用高图表更改 X 和 Y 位置。

通过，默认数据标签被绘制在条形之外。所以，我想你应该在`data Labels`属性中设置 X 和 Y 位置。

你可以做这样的事情

```
function(chartObj) {
    $.each(chartObj.series[0].data, function(i, point) {
        if(point.y <=10) {
            point.dataLabel.attr({x:point.dataLabel.x+30});
        }
    }); 
```

加载图表后调用此方法。

这是参考的[小提琴链接](http://jsfiddle.net/mhardik/RzW8X/1/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T10:48:32.060

**再次更新。将适用于 Highcharts 支持的所有设备。**

* * *

我认为[该解决方案](http://jsfiddle.net/42dRt/5/)将满足您的需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T13:13:59.837

你可以试试这个，

```
var alignDataLabels = function() {
    var chartObj = window.chart || this;
    $.each(chartObj.series[0].data, function(i, point) {
        var dataLabel = point.dataLabel;
        // Get the current X
        var x = dataLabel.translateX;
        var y = dataLabel.translateY;
        // If the goes on LHS of the axis
        if (x < 0) {
            // Set the label's X to 5 px more than the bar's height(length) in pixels
            dataLabel.translate(point.barH + 5, y);
        }
    });
}; 
```

jsFiddle @ [http://jsfiddle.net/jugal/TCjJy/](http://jsfiddle.net/jugal/TCjJy/)

我的安卓屏幕截图（用户代理：`Android 4.1.1 AppleWebKit/534.30 (KHTML, like Gecko)`

![android中的数据标签](../Images/7cbcf34db6647d95b2f4e955b08b1ab6.png)

# jquery - mvc3 下拉列表仅进入控制器以进行每个项目的第一次更改

> ID：12487056
> 
> 赞同：2
> 
> 时间：2012-09-19T00:41:33.207
> 
> 标签：jquery, asp.net-mvc-3

我定义了以下下拉列表 -

```
@Html.DropDownListFor(x => x.SelectedValue, Model.myEntity, new { @id = "ddList" }) 
```

使用以下 jquery -

```
<script type="text/javascript">
    $(document).ready(function () {        
        $("#ddList").change(function () {            
            var myid = $("#ddList").val();
            $.ajax({
                url: 'Controller/Action/',
                data: {
                    'id': myid
                },
                datatype: 'html',
                success: function (result) { success(result); }
            });
        });

    });

    function success(result) {        
        $("#partial").html(result);
    }
</script> 
```

每次我更改下拉菜单中的选择时，它都会第一次正确进入控制器。如果我再次选择相同的选项，则永远不会输入我的控制器操作。

有谁知道为什么我的代码没有命中控制器以进行任何后续的下拉选择。

谢谢

编辑 -

这是 div 部分的内容 - 它实际上呈现了一个 mvc 部分视图 -

```
<div id="partial" style="height:  90%">
        @Html.Partial("_Activities")    
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T02:14:22.923

对我来说似乎是一个缓存问题。对于数据类型 HTML，JQuery Ajax 中的缓存默认为 true，请将其设置为 false。试试这个：

```
 $.ajax({
                url: 'Controller/Action/',
                data: {
                    'id': myid
                },
                datatype: 'html',
                cache: false,
                success: function (result) { success(result); }
            }); 
```

# python - Matplotlib 颜色根据类标签

> ID：12487060
> 
> 赞同：89
> 
> 时间：2012-09-19T00:42:21.200
> 
> 标签：python, matplotlib

我有两个向量，一个带有值，一个带有类标签，例如 1、2、3 等。

我想用红色绘制属于第 1 类的所有点，用蓝色绘制属于第 2 类的点，用绿色绘制属于第 3 类的点等。我该怎么做？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2015-09-23T13:23:26.123

接受的答案是正确的，但如果您可能想指定应将哪个类标签分配给特定颜色或标签，您可以执行以下操作。我用颜色条做了一些标签体操，但使情节本身减少到一个很好的单行。这对于绘制使用 sklearn 完成的分类结果非常有用。每个标签都匹配一个 (x,y) 坐标。

```
import matplotlib
import matplotlib.pyplot as plt
import numpy as np

x = [4,8,12,16,1,4,9,16]
y = [1,4,9,16,4,8,12,3]
label = [0,1,2,3,0,1,2,3]
colors = ['red','green','blue','purple']

fig = plt.figure(figsize=(8,8))
plt.scatter(x, y, c=label, cmap=matplotlib.colors.ListedColormap(colors))

cb = plt.colorbar()
loc = np.arange(0,max(label),max(label)/float(len(colors)))
cb.set_ticks(loc)
cb.set_ticklabels(colors) 
```

[![散点图颜色标签](../Images/e9cafedd7045a4f56e33c4311887e856.png)](https://i.stack.imgur.com/Jnq3p.png)

使用[此](https://stackoverflow.com/questions/14777066/matplotlib-discrete-colorbar)答案的略微修改版本，可以将上述 N 颜色概括如下：

```
import numpy as np
import matplotlib as mpl
import matplotlib.pyplot as plt

N = 23 # Number of labels

# setup the plot
fig, ax = plt.subplots(1,1, figsize=(6,6))
# define the data
x = np.random.rand(1000)
y = np.random.rand(1000)
tag = np.random.randint(0,N,1000) # Tag each point with a corresponding label    

# define the colormap
cmap = plt.cm.jet
# extract all colors from the .jet map
cmaplist = [cmap(i) for i in range(cmap.N)]
# create the new map
cmap = cmap.from_list('Custom cmap', cmaplist, cmap.N)

# define the bins and normalize
bounds = np.linspace(0,N,N+1)
norm = mpl.colors.BoundaryNorm(bounds, cmap.N)

# make the scatter
scat = ax.scatter(x,y,c=tag,s=np.random.randint(100,500,N),cmap=cmap,     norm=norm)
# create the colorbar
cb = plt.colorbar(scat, spacing='proportional',ticks=bounds)
cb.set_label('Custom cbar')
ax.set_title('Discrete color mappings')
plt.show() 
```

这使：

[![在此处输入图像描述](../Images/86838f0b0011d41e574cca1245c84173.png)](https://i.stack.imgur.com/Rmm0n.png)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-09-19T01:24:36.750

假设您将数据放在二维数组中，这应该可以：

```
import numpy
import pylab
xy = numpy.zeros((2, 1000))
xy[0] = range(1000)
xy[1] = range(1000)
colors = [int(i % 23) for i in xy[0]]
pylab.scatter(xy[0], xy[1], c=colors)
pylab.show() 
```

您还可以设置一个`cmap`属性来控制通过使用颜色图来显示哪些颜色；即用以下内容替换该`pylab.scatter`行：

```
pylab.scatter(xy[0], xy[1], c=colors, cmap=pylab.cm.cool) 
```

可以在 [此处找到颜色图列表](http://matplotlib.org/examples/color/colormaps_reference.html)

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2017-02-22T06:49:48.693

一个简单的解决方案是为每个类分配颜色。通过这种方式，我们可以控制每个类的每种颜色。例如：

```
arr1 = [1, 2, 3, 4, 5]
arr2 = [2, 3, 3, 4, 4]
labl = [0, 1, 1, 0, 0]
color= ['red' if l == 0 else 'green' for l in labl]
plt.scatter(arr1, arr2, color=color) 
```

# django - 为什么Django教程使用choice.choice作为detail.html中的变量？

> ID：12487068
> 
> 赞同：0
> 
> 时间：2012-09-19T00:43:18.190
> 
> 标签：django

我目前正在（非常缓慢地）完成 Django 文档中的 Django 教程，并且[我已经完成了第 3 部分](https://docs.djangoproject.com/en/1.4/intro/tutorial03/)。在第三部分中，它让您为在教程中设置的投票构建 detail.html 视图。

我或多或少地跟随，但我对 detail.html 代码中的这一点感到困惑：

```
<h1>{{ poll.question }}</h1>
<ul>
{% for choice in poll.choice_set.all %}
    <li>{{ choice.choice }}</li>
{% endfor %}
</ul> 
```

我知道它首先呈现民意调查的“问题”部分（poll.question），然后遍历该民意调查（poll.choice_set.all）的选择集中的所有选择（选择），但是为什么是在寻找选择的价值“选择”吗？

如果我将 detail.html 更改为仅具有以下内容，它仍然有效：

```
 <li>{{ choice }}</li> 
```

这是一个基本上是 Pythonesque 或 Djangoesque 的例子，我应该在继续之前把我的头绕过去，还是只是一种情况，其中任何一个选项都同样好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T00:49:33.023

`poll.choice_set.all()`返回与（通过）`Choice`关联的整个 s 集。如教程[第 1 部分](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)所述，该属性位于模型内。使用works since在第 1 部分中定义为返回字段的值。`Poll``Choice.poll` `ForeignKey``choice``CharField``Choice``{{ choice }}``Choice.__unicode__()``choice`

# javascript - 可以在一个文件中加载多个 Google 脚本

> ID：12487069
> 
> 赞同：2
> 
> 时间：2012-09-19T00:43:56.613
> 
> 标签：javascript, html, google-maps, google-analytics, google-custom-search

我只是想知道是否有人知道如何——或者是否有可能——在一个文件中加载多个 Google 脚本？看到因为在我的一些页面上我加载了三个或更多的 Google 脚本：

1.  谷歌分析
2.  谷歌 CSE
3.  谷歌地图
4.  （偶尔）Google Webfonts

试图减少 HTTP 请求，并希望能够加载像**google.js**这样包含所有这些的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T07:35:31.253

您不能从 Google 下载组合的 js 文件作为单个 http 请求，但您可以下载、组合和加载它们自己的网站，前提是您经常更新它们（例如每天两次的 cron 作业）。如果您愿意，您甚至可以设置缓存标头。

尽管我建议不要这样做 - 只是异步加载这些脚本（但从 html 中，而不是单独的文件） - 它是非阻塞的，不会减慢您网站的渲染开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T07:24:12.233

您可以异步加载脚本，如[**本示例**](https://google-developers.appspot.com/maps/documentation/javascript/examples/map-simple-async)中所做的那样。可以修改 load 函数以接受 URL 参数，例如：

```
function loadScript(url) {
        var script = document.createElement('script');
        script.type = 'text/javascript';
        script.src = url;
        document.body.appendChild(script);
      } 
```

接着：

```
var url =  'https://maps.googleapis.com/maps/api/js?sensor=false';
loadScript(url);

var url =  'https://www.somedomain.com/someScript.js';
loadScript(url);

// ...etc 
```

然后你可以把所有这些放在你单独的 google.js 文件中。然而，虽然在需要的地方加载一堆脚本可能会变得更容易，但这并不会减少 HTTP 请求。

# wpf - 在 xaml/wpf 中自定义我的 ScrollViewer/Scrollbar

> ID：12487072
> 
> 赞同：0
> 
> 时间：2012-09-19T00:44:17.533
> 
> 标签：wpf, silverlight, xaml

当谈到 XAML 中的样式时，我真的很糟糕，而且我遇到了一个非常大的问题。我想在我拥有的 ListBox 中自定义我的滚动查看器。我想看起来像这样简单

![http://prntscr.com/ft1j1](../Images/02020c5a82c78b174fc059e95f61ce1f.png)

我希望有人可以帮助我做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:03:46.107

如果您使用的是 Expression Blend，这实际上非常简单。首先，您需要找到 ScrollBar 的控件模板。您可以通过在您的设计表面上放置一个滚动条控件然后右键单击并选择“编辑模板 -> 编辑副本”来执行此操作，这将显示一个框以输入新样式模板的名称以及是否要将其保存到资源字典或您正在处理的文件。

保存后，您应该会在“对象和时间线”面板中看到 ScrollBar 的垂直和水平模板的多个部分。您将编辑矩形和边框的属性，这些属性在每个水平和垂直控制模板中创建滚动条的视觉效果，具体取决于您选择使用的方式。

重新创建您的示例应该相对容易，只需找到“VerticalThumbTemplate”或“Horizo​​ntalThumbTemplate”并编辑其中的边框/矩形以获得显示的椭圆形。你可能还想修改你的 VisualStateManager 状态，而你在那里以获得 MouseOver 效果等。

自定义滚动条的示例可以在我不久前创建的部分主题中找到，您可以[在此处查看](http://gallery.expression.microsoft.com/GleemTheme)。

创建自定义 ScrollBars 后，您可以通过更改该 TargetType 的 BasedOn 值将新样式模板设为默认值，或者将其直接应用于 ListView 模板中内置的 ScrollViewer。

希望这足以让您朝着正确的方向开始。干杯! :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:21:54.710

`Scrollbar`是更难定制的模板之一。如果您真的不擅长，您可能必须搜索自定义控件库。

但是如果你真的想编辑滚动条模板，有很多网站可以帮助你进行简单的[谷歌搜索](https://www.google.fr/webhp?sourceid=chrome-instant&ie=UTF-8&ion=1#hl=fr&sclient=psy-ab&q=custom%20scrollbar%20wpf&oq=&gs_l=&pbx=1&fp=24d22d98c2008424&ion=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&biw=1920&bih=1043)

# cocos2d-iphone - 用 Cocos2d 中的对象初始化 CCSprite

> ID：12487073
> 
> 赞同：0
> 
> 时间：2012-09-19T00:44:22.177
> 
> 标签：cocos2d-iphone

我正在尝试将分数从我的主层传递到我的 CCSprite 之一，该 CCSprite 根据所述分数进行初始化。当我用这个初始化我的 CCSprite 时：

```
//Main Layer
Platform *platform = [[Platform alloc] initWithSpriteFrame:[[CCSpriteFrameCache sharedSpriteFrameCache]spriteFrameByName:@"platform.png"] withScore:score];

//CCSprite Layer
-(id) initWithSpriteFrame:(CCSpriteFrame*)spriteFrame withScore:(int)initScore {
    if( (self=[super init]) ) {
    ...
    }
} 
```

我得到一个没有 CCSprite 纹理的分数；

随后，当我用这个初始化时：

```
//Main Layer
Platform *platform = [[Platform alloc]initWithSpriteFrame:[[CCSpriteFrameCache sharedSpriteFrameCache]spriteFrameByName:@"platform.png"]];
 [platform setScore:score];

//CCSprite Layer
@property (readwrite) int score;
@synthesize score;

-(id) init {
    if( (self=[super init]) ) {
    ...
    }
} 
```

我得到一个没有分数的 CCSprite 纹理（它是 0）。男人要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T00:53:23.380

您需要将精灵帧传递给 super 所以在您的第一个代码示例中将其更改为这个。

```
//CCSprite Layer
-(id) initWithSpriteFrame:(CCSpriteFrame*)spriteFrame withScore:(int)initScore {
    if( (self=[super initWithSpriteFrame:spriteFrame]) ) {
      ...
    }

    return self; //Make sure to return self!
} 
```

# java - 将文件读入数组时出现 NullPointerException

> ID：12487074
> 
> 赞同：0
> 
> 时间：2012-09-19T00:44:21.863
> 
> 标签：java, arrays, nullpointerexception, bufferedreader

将文件读入数组时出现空指针异常。我意识到当它为空并且需要其他东西时会出现异常。阵列雷区已经初始化。异常发生在“ minefield[i][j]=input.charAt(j)+"";"

我正在尝试以这种格式读取文件：

```
#of row
#of column
abcd
efgh
ijkl 
```

这是代码：

```
 try {
            BufferedReader in =new BufferedReader (new FileReader(name+".txt"));
            String input=in.readLine();      
            row = Integer.parseInt(input);
            input=in.readLine();
            col = Integer.parseInt(input);
            int c =0;
            input=in.readLine();
            for (int i=0;i<row;i++){
            input=in.readLine();
            for (int j=0;j<col;j++){
                  System.out.println (input.charAt(j));
                  minefield[i][j]=input.charAt(j)+"";
               }
            }
            System.out.println("The file has been loaded");
            in.close();
         }
            catch(IOException iox){
               System.out.println ("Error reading file");
            } 
```

非常感谢您的帮助。编辑：对不起，我遗漏了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T01:26:41.447

Method readLine() returns null when the end of the stream is reached, but you don't check it.

See [http://docs.oracle.com/javase/8/docs/api/java/io/BufferedReader.html#readLine--](http://docs.oracle.com/javase/8/docs/api/java/io/BufferedReader.html#readLine--)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T01:01:46.183

鉴于您的输入文件的内容，您有一个额外`input = in.readLine();`的没有匹配的行条目：

```
...
int c =0;
input=in.readLine();   <-- remove this line
for (int i=0;i<row;i++){
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T00:47:19.360

检查`minefield`是否已初始化。

仅仅声明`minefield`是不够的，因为它默认为 null。

```
private String[][] minefield; 
```

您需要为其分配一个新`String[][]`数组。

```
private String[][] minefield = new String[4][5]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T00:49:30.110

确保`name`和`minefield`已初始化。然后，我将重写您的代码，以防止您拥有的任何值`row`与文件中的行数不匹配：

```
try {
    BufferedReader in =new BufferedReader (new FileReader(name+".txt"));
    String input;
    for (int i=0;i<row;i++){
        input=in.readLine();
        if (input == null) {
           throw new IOException("Expected " + row +
               " lines in the file; only found " + i + " lines");
        }
        for (int j=0;j<col;j++){
            System.out.println (input.charAt(j));
            minefield[i][j]=input.charAt(j)+"";
        }
    }
    System.out.println("The file has been loaded");
    in.close();
 }
 catch(IOException iox){
     System.out.println ("Error reading file");
 } 
```

**编辑**现在您已经用更完整的代码更新了您的问题，很清楚问题是什么。从文件中读取行数和列数后，每行读取一行，但在开始循环行数之前，您又读取了一行。除非文件包含空行，否则这会导致您超出文件末尾。

# shell - shell以root yii文件权限登录 - 痛苦

> ID：12487076
> 
> 赞同：0
> 
> 时间：2012-09-19T00:44:58.860
> 
> 标签：shell, yii, terminal, root, file-permissions

基于关于堆栈溢出的建议，我正在给 yii 框架一个旋转。

如果我以 root 身份登录，我似乎只能获得对我的 Web 服务器的 shell 访问权限。

我正在浏览本教程，并且在创建 Web 应用程序的典型命令时遇到了许多问题-

```
/usr/local/bin/php /home/testuser/public_html/yii/framework/yiic webapp /home/testuser/public_html/demo 
```

1.  我必须每次都输入 /usr/local/bin/php 吗？？？
2.  我每次都必须完整输入 /home/testuser/public_html/yii/framework/yiic 吗？？？
3.  我必须完整输入 /home/testuser/public_html/demo 吗？
4.  当我以 ROOT 身​​份登录时，我必须对 root 创建的每个文件/文件夹进行 chown 以使文件可由 testuser 查看！！！
5.  我使用 yii 创建了一个新的控制器。`controller message helloWorld`, yii 做了一些时髦的东西，但是我不能对没有 chown 一切的文件做任何事情！！！

我对 SSH 不太有信心，而且我知道这完全是一个学习曲线，但是……每次都必须更改文件权限，并且每次都必须输入完整的目录只是一种痛苦。

我知道有一些捷径我可能会随着时间的推移而学习，但如果有人能给我一些指示，让我的生活轻松 100 万倍（考虑到我目前的主要目标是学习 yii 框架）linux/terminal/shell 命令目前是次要的我的要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T01:10:27.147

这是我要做的，按以下顺序：

1 - 当您登录时`root`发出命令`su - testuser`。这会将您的有效用户 id 和 groupid 更改为`testuser`，这意味着您现在正在以该用户帐户的身份进行操作。您的当前目录现在应该是`testuser`的主目录。要返回`root`用户，只需键入`exit`.

2 - 尝试在没有完整路径的`php -v`情况下运行。如果它打印出版本号，那么您不必使用完整路径来运行`php`. 如果您收到错误，则可以在`/usr/local/bin`您的主目录中的文件中添加`PATH`环境变量。如果不存在，那么您可以创建它。`.profile``testuser``.profile`

3 - 添加`/home/testuser/public_html/yii/framework`到您的 PATH中`testuser`。`.profile`

完成所有这些之后，下次登录时，`root`您将能够执行以下操作：

```
su - testuser
cd public_html
php yiic webapp demo 
```

而且您不必担心权限，因为您将目录/文件创建为`testuser`，而不是`root`.

另请参阅：[有关修改 PATH 的 StackOverflow 问题](https://stackoverflow.com/questions/9368099/how-do-i-modify-my-user-profile-file-to-append-a-scripts-folder-i-created-to-the)

# powershell - 导出电子邮件地址 - 删除所有包含数字的电子邮件地址

> ID：12487079
> 
> 赞同：1
> 
> 时间：2012-09-19T00:45:11.810
> 
> 标签：powershell, exchange-server, office365

我有以下 powershell 脚本：

```
 Get-Mailbox -ResultSize Unlimited | Select-Object PrimarySmtpAddress | Export-Csv c:\userlist.csv -NoTypeInformation
Send-MailMessage -from noreply@domain.com -to username@domain.com -subject "Email Addresses" -Attachment "c:\userlist.csv" -SmtpServer relay-server 
```

这给了我所有的电子邮件地址作为交换。我有一堆电子邮件地址，地址中有这样的数字：

123@domain.com

如何处理数据，以便仅导出包含字母的电子邮件地址？我不希望将任何包含数字的电子邮件地址导出到 userlist.csv 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T01:16:46.077

将 Where-Object cmdlet 与 -NotMatch 一起使用

```
Get-Mailbox -ResultSize Unlimited | Where-Object { $_.PrimarySmtpAddress -NotMatch "\d" } | Select-Object PrimarySmtpAddress | Export-Csv c:\userlist.csv -NoTypeInformation
Send-MailMessage -from noreply@domain.com -to username@domain.com -subject "Email Addresses" -Attachment "c:\userlist.csv" -SmtpServer relay-server 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T07:03:43.807

附带说明一下，代码只为您提供主要地址，如果用户有多个地址，您将无法获得它们。您可以使用 EmailAddressess 属性来获取所有地址（不仅仅是 smtp）。

# ios - AVFoundation 声音在 iOS 6 模拟器上工作但不是设备？

> ID：12487080
> 
> 赞同：4
> 
> 时间：2012-09-19T00:45:26.693
> 
> 标签：ios, avfoundation

帮助！我可以在 iOS 模拟器上播放声音，但不能在我的设备上播放！这是我的代码（是的，音频文件在指定的位置，它肯定有效：

```
SystemSoundID hashtag;

NSString *path  = [[NSBundle mainBundle] pathForResource:@"hashtag" ofType:@"wav"];

NSURL *pathURL = [NSURL fileURLWithPath:path];
AudioServicesCreateSystemSoundID((__bridge CFURLRef) pathURL, &hashtag);
AudioServicesPlaySystemSound(hashtag); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T00:07:11.093

两个建议，我都遇到了同样的问题！

1) ios 设备在文件名方面区分大小写，而模拟器则不区分大小写。2）您的设备是否静音？这听起来很愚蠢，但它是我使用 AVFoundation 的应用程序错误报告的第一大原因！

# unit-testing - InputStream 的 JUnit 类路径

> ID：12487085
> 
> 赞同：1
> 
> 时间：2012-09-19T00:46:21.233
> 
> 标签：unit-testing, junit, classpath, inputstream

我在我的项目包中的位置有一个 JUnit 测试：

```
Java Resources > unittests > ActionTest.java 
```

我正在尝试在我的一个测试中使用 InputStream，该测试将接收位于我的项目包另一部分的静态文件：

```
WebRoot > TestFiles > sampleFile.txt 
```

有没有办法以某种方式将文件的类路径传递给 InputStream？或者我是否需要将 sampleFile.txt 移动到项目中的其他位置？

我曾尝试像这样定义 InputStream：

```
InputStream fileStream = getClass().getResourceAsStream("sampleValidPatientList.txt"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T00:49:26.657

如果 WebRoot/TestFiles 在类路径中，这将起作用。

我通常创建一个 /test-resources 文件夹并将测试数据放入其中。如果我将它添加到测试 CLASSPATH 我的测试总能找到它们。

# ruby-on-rails - 在 Rails 3.2 中加密文件

> ID：12487090
> 
> 赞同：0
> 
> 时间：2012-09-19T00:47:22.373
> 
> 标签：ruby-on-rails, ruby-on-rails-3, encryption, public-key-encryption, bcrypt

我想用我的文件系统中的非对称密钥加密二进制文件（然后通过电子邮件发送）。

你能推荐我怎么做吗？可以通过bcrypt吗？没有找到这么多（不是过时的）关于这个的信息......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:43:27.567

好的，我自己找到了一个解决方案 - 我用 gpg 做的......首先你必须在服务器上生成/安装公钥并将私钥复制到你的本地机器.. 然后你可以使用以下命令来加密和压缩文件（如果您安装了 gzip）：

```
 # encrypting
  system "gpg --armor -e -r 'receiverid' -o #{MYFILE_ENC} #{MYFILE} "

  # compressing
  system "gzip #{MYFILE_ENC}" 
```

# c# - 包含 UserControl 元素的 ItemsControl

> ID：12487091
> 
> 赞同：5
> 
> 时间：2012-09-19T00:47:26.317
> 
> 标签：c#, wpf, mvvm, itemscontrol

我有点在黑暗中拍摄这个并且一直在环顾四周，但找不到太多相关的东西。几乎我正在尝试在我拥有的当前窗口上创建一个 ItemsControl，因此当用户单击窗口上的“添加产品”按钮时，它将以水平方式向屏幕添加一个 UserControl。

对于初学者，我使用的是 MVVM 模式，并且我有一个 PricingViewModel，它是我的主窗口的 ViewModel。我有一个名为ComparisonViewModel 的第二个视图模型，它是用户控件视图的视图模型，我希望每次用户点击PricingView 上的“添加产品”按钮时都显示它。进入我的代码，我有一个声明的 ObservableCollection 和我的 AddComparison 方法。Collection 在 VM 的构造函数中实例化。

```
 public ObservableCollection<ComparisonViewModel> Products { get { return _products; } }

    public void AddComparison()
    {
        var products = IoC.Get<ComparisonViewModel>();
        Products.Add(products);
    } 
```

接下来，PricingView 中的 ItemsControl 绑定到 PricingViewModel 中的该集合：

```
 <ItemsControl ItemsSource="{Binding Path=Products}" >
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Stretch"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
            </ItemsControl> 
```

我运行它，点击添加后，它只显示集合名称。当用户点击添加比较时，我如何才能真正让它弹出一个新的比较用户控件？非常感谢您提前提供的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T00:53:38.873

您需要设置`ItemTemplate`以便`ItemsControl`知道如何呈现集合中的每个项目（默认情况下，它只显示调用的结果`.ToString()`）。

```
 <ItemsControl ItemsSource="{Binding Path=Products}" >
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Stretch"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>

           <ItemsControl.ItemTemplate>
                <DataTemplate DataType="{x:Type namespace:ComparisonViewModel}">
                    <!-- EXAMPLE -->
                    <Border BorderBrush="Black"
                            BorderThickness="2">
                          <DockPanel Orientation="Horizontal">
                                 <TextBlock Text="{Binding ComparisonResult}"
                                            DockPanel.Dock="Right" />
                                 <TextBlock Text="{Binding Name}" 
                                            DockPanel.Dock="Left" />
                          </DockPanel>
                    </Border>
                </DataTemplate>
           </ItemsControl.ItemTemplate>

        </ItemsControl> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-22T19:54:39.560

我发现我需要告诉 ItemsControl 两件事......首先是 ItemsControl 是什么类型的“东西”：

```
 <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal" />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel> 
```

第二个是如何显示控件：

```
 <ItemsControl.ItemTemplate>
            <DataTemplate>
                <c:Widget Margin="5" />
            </DataTemplate>
        </ItemsControl.ItemTemplate> 
```

最终代码如下所示：

```
 <ItemsControl ItemsSource="{Binding Path=DynamicItems}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal" />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <c:Widget Margin="5" />
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl> 
```

您还需要在窗口声明内容中添加对控件命名空间的引用：

```
 xmlns:c="clr-namespace:IHateEverything.Controls" 
```

# css - Internet Explorer 9 及以下 z-index 文本光标错误

> ID：12487094
> 
> 赞同：2
> 
> 时间：2012-09-19T00:47:45.323
> 
> 标签：css, internet-explorer, internet-explorer-9

我最近在 ie 9、8 和 7 中发现了一个奇怪的错误（参见[http://jsfiddle.net/global_1981/rrKaV/1/](http://jsfiddle.net/global_1981/rrKaV/1/)）

当绝对定位的锚元素分层在具有文本的块元素上时，它不遵守 cursor:pointer css 规则。

文本变为可选择的，而不是保留光标：指针。

要解决此问题，您不能将锚元素的背景颜色设置为透明。相反，它必须设置为纯色，或者在我的情况下，我需要查看下面的文本，所以我将背景图像设置为不存在的图像。

有没有人遇到过这个错误或有更好的修复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:28:36.043

您是否尝试过简单地将 div 放在绝对定位的 div 中？

```
<div class="container">
    <div class="fix">
        <div class="txt">Some text</div>
    <div>
    <a class="lnk" href="#"></a>
</div>

<div class="container ieworks">
    <div class="txt">Some text</div>
    <a class="lnk" href="#"></a>
</div> 
```

CSS：

```
.container {
  position:relative; z-index:1; width:100px; height:20px; background-color:red;
}
.fix {
position:absolute; top:0; bottom:0; left:0; right:0; cursor:pointer;
}

.txt {
  color:white;
}
.lnk {
      position:absolute; top:0; bottom:0; left:0; right:0; z-index:3;
} 
```

# iphone - 如何从已弹出的视图控制器类中释放/解除分配/返回？

> ID：12487095
> 
> 赞同：0
> 
> 时间：2012-09-19T00:47:48.970
> 
> 标签：iphone, ios, cocoa-touch, ios5, uiviewcontroller

我的应用程序中有一个 UINavigationController，我正在推送视图控制器。在该视图控制器上，有一个预加载器视图，在后台下载和解析数据时显示动画。动画下方是一个按钮，应该将用户重定向到其他视图控制器。

现在，我可以通过弹出视图控制器来完成此操作，因为我需要定向到的视图是当前视图被推送的视图。然而，这里的问题是下载、解析、计时器等。一切都在后台进行。

我需要的功能是让视图控制器在我通过单击按钮弹出 VC 时完全停止工作。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T03:16:09.463

你用什么来运行后台操作？

您可以通过继承 NSOperation 并使用 NSOperationQueue 来运行它来简化后台操作。你只需要释放 NSOperationQueue，iOS 就会自动为你清理。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html)

[https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html)

这是一个例子。

```
@interface MyBackgroundOperation : NSOperation
@end

@implementation MyBackgroundOperation
- (id)init
{
    self = [super init];

    if(self != nil)
    {        
        // stuff that needs to be done at init
    }

    return self;
}

- (void)main
{
    @try
    {
        // run my background operations
    }
    @catch (NSException *e)
    {
        // catch the exception
    }
}

- (void)dealloc
{
    // clean up
    [super dealloc];
}
@end 
```

然后你像这样开始操作

```
NSOperationQueue *operationQueue = [[NSOperationQueue alloc] init];

MyBackgroundOperation *myOperation = [[MyBackgroundOperation alloc] init];
[operationQueue addOperation:myOperation];
[myOperation release];

[operationQueue release]; 
```

操作系统将保留该操作直到它完成，以便释放视图控制器不会影响它。然而，如果你想在它已经开始之后停止操作，你将不得不使用一些更花哨的技术，也许是通知或 KVO。

# eclipse - 在 .aj 文件中快速推入重构大量 Spring Roo 生成的方法

> ID：12487098
> 
> 赞同：4
> 
> 时间：2012-09-19T00:48:07.080
> 
> 标签：eclipse, spring, aspectj, spring-roo, sts-springsourcetoolsuite

与在支持该操作的**IDE**中一次执行一个方法相比，有没有一种更快的方法将多个方法从**Roo 生成的方面推送到 Java 类？**

 **我想尽可能轻松地从由于特定**Roo**注释而生成的方面推送所有方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T00:26:58.833

在 STS 或 Eclipse 中，您可能可以使用“大纲”视图来执行此操作。

1.  打开 Spring Roo 生成的 .aj 文件。
2.  找到“大纲”视图。
3.  选择您要推入的所有方法。
4.  右键单击它们，“重构，推入”

如果您无法让 Roo 创建的 .aj 文件显示在 Package Explorer 中，请查找小向下箭头，进入“过滤器...”并关闭“隐藏生成的 Spring Roo ITD”框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T05:36:07.037

您是否尝试过从项目中移除 AspectJ 特性？或者也可以直接去掉 SpringROO 性质。这将删除所有 .aj 文件，所有方法都将转移到实际的类文件中。在 STS 中，您可以从项目的右键菜单中选择此选项。如果您的 IDE 很慢，那么您可以从命令提示符下的 ROO shell 执行此操作。

希望这对您有所帮助。干杯。**

# php - 有什么作用。在 PHP 中是什么意思？

> ID：12487100
> 
> 赞同：-2
> 
> 时间：2012-09-19T00:48:37.693
> 
> 标签：php

> **可能重复：**
> [参考 - 这个符号在 PHP 中是什么意思？](https://stackoverflow.com/questions/3737139/reference-what-does-this-symbol-mean-in-php)

考虑这个代码示例：

```
{
    $n1 = ucfirst(strtolower($n1));
    $n2 = ucfirst(strtolower($n2));
    $n3 = ucfirst(strtolower($n3));
    return $n1 . " " . $n2 . " " . $n3;
} 
```

我的书说代码将显示：

威廉亨利盖茨（每个名字都是变量的值）

那么`.`引号和下一个变量之间的 in 是做什么的呢？我一定读过它，我回头找它，但我找不到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T00:49:38.390

它连接（合并）字符串

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T00:49:52.620

级联

由于您试图`$n1`用一个空格`$n2`和另一个空格返回变量，并且`$n3`

您还可以查看PHP 手册中的[字符串运算符](http://php.net/manual/en/language.operators.string.php)以获取有关此的更多信息

使用`.`运算符的示例之一或参考 PHP 手册中的字符串运算符

```
<?php
 $a = "Hello ";
 $b = $a . "World!"; // now $b contains "Hello World!"

 $a = "Hello ";
 $a .= "World!";     // now $a contains "Hello World!"
?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T00:49:35.553

这 。运算符连接字符串。

该代码将`$n1`, `$n2`, 和`$n3`转换为小写，然后将第一个字母大写，然后将所有三个名称组合在一起，每个名称之间有一个空格。

# asp.net-mvc-3 - 布局视图中的多个局部视图和一个提交按钮

> ID：12487104
> 
> 赞同：1
> 
> 时间：2012-09-19T00:48:55.067
> 
> 标签：asp.net-mvc-3, razor, asp.net-mvc-partialview, model-validation

我不确定这是否是正确的方法。在我的搜索中，只发现了多个局部视图和一个提交按钮，但在布局中没有。

我有树不同的视图，每个视图都有自己的模型，具有相同的 _ViewStart.cshtml -> _Layout.cshtml（MVC 约定）。这是第一个控件：

```
[Authorize]
    public ActionResult UpDateData1 ()
    {
        return View();
    }
[HttpPost]
public ActionResult UpDateData1(Data1Model model)
    {
        if (ModelState.IsValid)
        {
            SOME CODE…

        }
        else
        {
            ModelState.AddModelError…
        }
        return View(model); 
```

这 3 个视图非常通用，但我不希望其中有提交按钮。

同样在 _Layout.cshtml 我有一个部分视图，其中包含 3 个视图的通用验证代码：

```
<section id="main">
        @RenderBody()
        <div>
            @Html.Partial("_CommonValidation ", new store.Models.CommonValidation())
        </div>
        <div>
            <input type="submit" value="Only one Button" />
        </div>
        <div>
            @Html.ActionLink("BackTo…", "MyAccountConfig", "Account")
        </div>
    </section> 
```

我也不想要 _CommonValidation 视图中的提交按钮。

可以使用 Layout.cshtml 中的“ONLY ONE BUTTON”提交按钮来验证部分 _CommonValidation 和 RenderBody() 视图的模型？在 _Layout.cshtml 视图中包含强类型的部分视图是一种好习惯吗？我是 MVC 3 的新手，所以我不知道该采取什么方向...... JavaScripts，HTML Helpers 也许......谢谢

# ios - 如何在应用启动时打开 FB 会话

> ID：12487105
> 
> 赞同：1
> 
> 时间：2012-09-19T00:48:57.030
> 
> 标签：ios, facebook, session

我有一个包含 FB 集成（可选）的应用程序，并且此选项登录发生在视图控制器中，它不是根视图控制器。

似乎一切都在规范，除了当我重新启动应用程序时会话关闭，而我希望会话恢复（不必每次都登录）。我尝试将以下代码放入根视图控制器的 viewDidLoad 以及 AppDelegate didFinishLaunchingWithOptions 方法中：

```
AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
[appDelegate openSessionWithAllowLoginUI:NO]; 
```

您如何为之前登录的用户重新打开会话？

# client - ActiveMQ客户端jar源代码

> ID：12487107
> 
> 赞同：0
> 
> 时间：2012-09-19T00:49:12.397
> 
> 标签：client, activemq, src

我在哪里可以找到以下 jar 文件的源代码？

activemq-core-5.6.0.jar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T01:56:00.347

ActiveMQ 源位于 Apache 的 SVN 存储库中。您可以使用以下命令签出项目。

> svn co [https://svn.apache.org/repos/asf/activemq/trunk](https://svn.apache.org/repos/asf/activemq/trunk) activemq

源 jar 也存储在相关版本的 Maven 存储库中，核心源 jar 在[这里](https://repository.apache.org/service/local/artifact/maven/redirect?r=releases&g=org.apache.activemq&a=activemq-core&v=5.6.0&e=jar&c=sources)：

# c# - 使用 null 调用重载：强制转换与默认值

> ID：12487111
> 
> 赞同：2
> 
> 时间：2012-09-19T00:49:27.050
> 
> 标签：c#, casting, overloading, default, explicit

不确定这是否是一个多余的问题，但考虑一下我有这些方法：

```
void Foo(SomeClass x)
{
    //Some code
}

void Foo(AnotherClass x)
{
    //Some code
} 
```

假设我想用 null 调用特定的重载（SomeClass 之一），这是我的选择：

```
Foo((SomeClass)null)

Foo(null as SomeClass)

Foo(default(SomeClass)) 
```

基本上，哪个是最好的选择？不同方法之间是否存在显着的性能差异？一种特定的方式通常被认为比其他方式更“优雅”吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T00:53:14.413

选项 4：创建另一个重载：

```
void Foo() 
```

使用需要强制转换的显式 null 调用？嗯……呜……

“正式”回答你的问题。尝试一下！

```
var sw = Stopwatch.StartNew();
for (int i = 0; i < 1000000; i++) {
    Foo(null as string);
}
Console.WriteLine(sw.ElapsedMilliseconds);

sw = Stopwatch.StartNew();
for (int i = 0; i < 1000000; i++) {
    Foo((string)null);
}           
Console.WriteLine(sw.ElapsedMilliseconds);

sw = Stopwatch.StartNew();
for (int i = 0; i < 1000000; i++) {
    Foo(default(string));
}
Console.WriteLine(sw.ElapsedMilliseconds);

Console.ReadLine(); 
```

对于所有 3 种方法，我得到了 ~4ms。

当我在反射器中打开程序时，我看到所有的调用都变成了： `Foo((string) null);`

因此，您可以选择您认为最易读的任何内容。IL 最终都完全相同。

# mysql - 导致不可能连接的数据结构

> ID：12487124
> 
> 赞同：0
> 
> 时间：2012-09-19T00:50:49.517
> 
> 标签：mysql, performance, cakephp, database-design, left-join

**表：**

*   节点
*   数据文本
*   数据配置文件
*   数据位置
*   数据配置文件
*   数据媒体
*   数据产品
*   数据元
*   类别
*   标签
*   类别节点
*   标签节点

这个问题是一个笼统的问题，在另一个问题的后面

**解释：**

每个“数据”表都有一个`node_id`指向节点表的 id（hasMany/belongsTo 关联）。

“节点”可以是任何东西——电视节目、电影、人物、文章……等等（全部通过 CMS 生成，因此用户可以控制他们想要的“节点”类型）。

提取数据时，我希望能够查询某些字段。例如，如果他们进行搜索，我希望能够拉出具有`data_texts.title = '%george%'`或按日期时间字段排序的节点`data_locations`。

问题是，当我对所有七个数据表（或更多）进行连接时，查询必须命中如此多的组合行，以至于它只是超时（即使数据库几乎是空的....整个 200 行数据库）。

我意识到我可以根据我正在做的事情来确定我是否需要一个连接 - 但即使有五个或六个连接（一旦数据库达到 10k+ 条记录），它会非常慢，如果它完全有效的话。根据[这个问题](https://stackoverflow.com/questions/12484702/many-left-joins-7-causing-timeout-another-way-to-do-this-or-issue-with-code)，我正在使用的查询只是对这些表进行连接完全超时。

每个节点可以具有每种数据类型的多行（出于多语言等原因）。

我完全被打败了——我正处于我认为我需要重组整个事情的地步，但没有时间去做。我曾考虑将所有内容合并到一张表中，但不确定如何....等

* * *

**节点**

```
CREATE TABLE `nodes` (
    `id` CHAR(36) NOT NULL,
    `name` VARCHAR(100) NOT NULL,
    `slug` VARCHAR(100) NOT NULL,
    `node_type_id` CHAR(36) NOT NULL,
    `site_id` CHAR(36) NOT NULL,
    `created` DATETIME NOT NULL,
    `modified` DATETIME NOT NULL,
    PRIMARY KEY (`id`),
    INDEX `nodeTypeId` (`node_type_id`),
    INDEX `slug` (`slug`),
    INDEX `nodeId` (`id`)
)
COLLATE='latin1_swedish_ci'
ENGINE=MyISAM; 
```

**数据文本：**

```
CREATE TABLE `data_texts` (
    `id` CHAR(36) NOT NULL,
    `title` VARCHAR(250) NULL DEFAULT NULL,
    `subtitle` VARCHAR(500) NULL DEFAULT NULL,
    `content` LONGTEXT NULL,
    `byline` VARCHAR(250) NULL DEFAULT NULL,
    `language_id` CHAR(36) NULL DEFAULT NULL,
    `foreign_key` CHAR(36) NULL DEFAULT NULL,
    `model` VARCHAR(40) NULL DEFAULT NULL,
    `node_id` CHAR(36) NULL DEFAULT NULL,
    `created` DATETIME NOT NULL,
    `modified` DATETIME NOT NULL,
    PRIMARY KEY (`id`),
    INDEX `nodeId` (`node_id`),
    INDEX `languageId_nodeId` (`language_id`, `node_id`),
    INDEX `foreignKey_model` (`foreign_key`, `model`)
)
COLLATE='utf8_general_ci'
ENGINE=MyISAM; 
```

**数据配置文件**

```
CREATE TABLE `data_profiles` (
`id` CHAR(36) NOT NULL,
`name` VARCHAR(80) NULL DEFAULT NULL,
`email_personal` VARCHAR(100) NULL DEFAULT NULL,
`email_business` VARCHAR(100) NULL DEFAULT NULL,
`email_other` VARCHAR(100) NULL DEFAULT NULL,
`title` VARCHAR(100) NULL DEFAULT NULL,
`description` LONGTEXT NULL,
`prefix` VARCHAR(40) NULL DEFAULT NULL,
`phone_home` VARCHAR(40) NULL DEFAULT NULL,
`phone_business` VARCHAR(40) NULL DEFAULT NULL,
`phone_mobile` VARCHAR(40) NULL DEFAULT NULL,
`phone_other` VARCHAR(40) NULL DEFAULT NULL,
`foreign_key` CHAR(36) NULL DEFAULT NULL,
`model` VARCHAR(40) NULL DEFAULT NULL,
`node_id` CHAR(36) NULL DEFAULT NULL,
`language_id` CHAR(36) NULL DEFAULT NULL,
`created` DATETIME NOT NULL,
`modified` DATETIME NOT NULL,
`user_id` CHAR(36) NULL DEFAULT NULL,
PRIMARY KEY (`id`),
INDEX `nodeId` (`node_id`),
INDEX `languageId_nodeId` (`node_id`, `language_id`),
INDEX `foreignKey_model` (`foreign_key`, `model`)
)
COLLATE='latin1_swedish_ci'
ENGINE=MyISAM; 
```

**类别**

```
CREATE TABLE `categories` (
    `id` CHAR(36) NOT NULL,
    `name` VARCHAR(100) NOT NULL,
    `node_type_id` CHAR(36) NOT NULL,
    `site_id` CHAR(36) NOT NULL,
    `slug` VARCHAR(100) NOT NULL,
    `created` DATETIME NOT NULL,
    `modified` DATETIME NOT NULL,
    PRIMARY KEY (`id`),
    INDEX `nodeTypeId` (`node_type_id`),
    INDEX `slug` (`slug`)
)
COMMENT='Used to categorize nodes'
COLLATE='utf8_general_ci'
ENGINE=MyISAM; 
```

**类别节点**

```
CREATE TABLE `categories_nodes` (
    `id` CHAR(36) NOT NULL,
    `category_id` CHAR(36) NOT NULL,
    `node_id` CHAR(36) NOT NULL,
    PRIMARY KEY (`id`),
    INDEX `categoryId_nodeId` (`category_id`, `node_id`)
)
COLLATE='utf8_general_ci'
ENGINE=MyISAM; 
```

**节点标签**

```
CREATE TABLE `node_tags` (
    `id` CHAR(36) NOT NULL,
    `name` VARCHAR(40) NOT NULL,
    `site_id` CHAR(36) NOT NULL,
    `created` DATETIME NOT NULL,
    `modified` DATETIME NOT NULL,
    PRIMARY KEY (`id`),
    INDEX `siteId` (`site_id`)
)
COLLATE='utf8_general_ci'
ENGINE=MyISAM; 
```

**节点节点标签**

```
CREATE TABLE `nodes_node_tags` (
    `id` CHAR(36) NOT NULL,
    `node_id` CHAR(36) NOT NULL,
    `node_tag_id` CHAR(36) NOT NULL,
    PRIMARY KEY (`id`),
    INDEX `node_id_node_tag_id` (`node_id`, `node_tag_id`)
)
COLLATE='utf8_general_ci'
ENGINE=MyISAM; 
```

**MySQL：**

```
SELECT `Node`.`id`, `Node`.`name`, `Node`.`slug`, `Node`.`node_type_id`, `Node`.`site_id`, `Node`.`created`, `Node`.`modified`
FROM `mysite`.`nodes` AS `Node`
LEFT JOIN `mysite`.`data_date_times` AS `DataDateTime` ON (`DataDateTime`.`node_id` = `Node`.`id`)
LEFT JOIN `mysite`.`data_locations` AS `DataLocation` ON (`DataLocation`.`node_id` = `Node`.`id`)
LEFT JOIN `mysite`.`data_media` AS `DataMedia` ON (`DataMedia`.`node_id` = `Node`.`id`)
LEFT JOIN `mysite`.`data_metas` AS `DataMeta` ON (`DataMeta`.`node_id` = `Node`.`id`)
LEFT JOIN `mysite`.`data_profiles` AS `DataProfile` ON (`DataProfile`.`node_id` = `Node`.`id`)
LEFT JOIN `mysite`.`data_products` AS `DataProduct` ON (`DataProduct`.`node_id` = `Node`.`id`)
LEFT JOIN `mysite`.`data_texts` AS `DataText` ON (`DataText`.`node_id` = `Node`.`id`)
WHERE 1=1
GROUP BY `Node`.`id` 
```

![解释查询](../Images/3eadf13d8cc4ad983a734c21bb702f97.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:57:34.620

不幸的是，我现在无法进行任何测试。我只是抛出一些想法。我以后也许可以做一些测试。

*   怀疑不同的排序规则。
*   你的一些id是没用的。例如，您应该删除列 categories_nodes.id，并在 {category_id, node_id} 上放置一个主键约束。
*   怀疑*任何*需要在运行时连接所有表的设计。有更好的方法。
*   使用 innodb 和外键约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T12:41:16.093

首先，尝试 InnoDB，而不是 MyISAM。

其次，删除 group by，看看它运行得如何，以及涉及多少行。应该不是很多，但很有趣。

您不需要节点上的“nodeId”索引（因为您已经将它作为主键）。再次，不应该有任何区别。

where 子句无关紧要。您可以以一种或另一种方式将其删除，但不会产生任何影响。

第三，好吧，有些东西严重坏了。

快速了解如何开始分析（例如[http://dev.mysql.com/doc/refman/5.0/en/show-profile.html](http://dev.mysql.com/doc/refman/5.0/en/show-profile.html)），然后运行 ​​profile 命令以查看所有时间的去向。如果它没有立即表明有什么东西坏了，就把它贴在这里。

# java - Java：如何将 UTC 时间戳转换为本地时间？

> ID：12487125
> 
> 赞同：45
> 
> 时间：2012-09-19T00:51:19.403
> 
> 标签：java, api, date, calendar, timezone

我有一个 UTC 时间戳，我想在不使用 API 调用的情况下将其转换为本地时间`TimeZone.getTimeZone("PST")`。你到底应该怎么做？我一直在使用以下代码，但没有取得多大成功：

```
private static final SimpleDateFormat mSegmentStartTimeFormatter = new        SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS");

Calendar calendar = Calendar.getInstance();

    try {
        calendar.setTime(mSegmentStartTimeFormatter.parse(startTime));
    }
    catch (ParseException e) {
        e.printStackTrace();
    }

    return calendar.getTimeInMillis(); 
```

样本输入值：`[2012-08-15T22:56:02.038Z]`

应该返回相当于`[2012-08-15T15:56:02.038Z]`

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-09-19T01:12:56.190

`Date`没有时区，内部存储为 UTC。只有当日期被格式化时，时区更正才适用。使用 a`DateFormat`时，它默认为其运行所在的 JVM 的时区。`setTimeZone`根据需要使用来更改它。

```
DateFormat utcFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
utcFormat.setTimeZone(TimeZone.getTimeZone("UTC"));

Date date = utcFormat.parse("2012-08-15T22:56:02.038Z");

DateFormat pstFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS");
pstFormat.setTimeZone(TimeZone.getTimeZone("PST"));

System.out.println(pstFormat.format(date)); 
```

这打印`2012-08-15T15:56:02.038`

请注意，我省略了`'Z'`PST 格式的 UTC，因为它表示 UTC。如果你只是去，`Z`那么输出将是`2012-08-15T15:56:02.038-0700`

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2017-09-02T06:33:36.253

使用现代 Java 日期和时间 API，这很简单：

```
 String inputValue = "2012-08-15T22:56:02.038Z";
    Instant timestamp = Instant.parse(inputValue);
    ZonedDateTime losAngelesTime = timestamp.atZone(ZoneId.of("America/Los_Angeles"));
    System.out.println(losAngelesTime); 
```

这打印

```
2012-08-15T15:56:02.038-07:00[America/Los_Angeles] 
```

注意事项：

*   你的期望有一个小错误。您的`Z`时间戳中的 表示 UTC，也称为祖鲁时间。因此，在您的本地时间值中，`Z`不应该存在。相反，您需要一个返回值，例如`2012-08-15T15:56:02.038-07:00`，因为偏移量现在是 -7 小时而不是 Z。
*   避免使用三个字母的时区缩写。它们不是标准化的，因此通常是模棱两可的。例如，PST 可能表示菲律宾标准时间、太平洋标准时间或皮特凯恩标准时间（尽管缩写中的 S 通常表示夏令时（表示 DST））。如果您打算使用太平洋标准时间，那甚至不是时区，因为在夏季（您的示例时间戳所在的位置）使用的是太平洋夏令时间。在我的代码中，使用*区域/城市*格式的时区 ID 而不是缩写。
*   时间戳通常最好作为`Instant`对象处理。`ZonedDateTime`仅在需要时转换为，例如用于演示。

**问：我可以在我的 Java 版本中使用现代 API 吗？**

如果至少使用 Java **6**，则可以。

*   在 Java 8 及更高版本中，新的 API 是内置的。
*   在 Java 6 和 7 中获得[ThreeTen Backport](http://www.threeten.org/threetenbp/)，这是新类的后向端口（对于 JSR-310 来说是 ThreeTen，现代 API 是首次定义的地方）。
*   在 Android 上，使用 ThreeTen Backport 的 Android 版本。它被称为 ThreeTenABP，我认为[这个问题有一个很好的解释：How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-05-08T06:05:50.213

**这是一个简单的修改解决方案**

```
 public String convertToCurrentTimeZone(String Date) {
            String converted_date = "";
            try {

                DateFormat utcFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
                utcFormat.setTimeZone(TimeZone.getTimeZone("UTC"));

                Date date = utcFormat.parse(Date);

                DateFormat currentTFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
                currentTFormat.setTimeZone(TimeZone.getTimeZone(getCurrentTimeZone()));

                converted_date =  currentTFormat.format(date);
            }catch (Exception e){ e.printStackTrace();}

            return converted_date;
    }

    //get the current time zone

    public String getCurrentTimeZone(){
            TimeZone tz = Calendar.getInstance().getTimeZone();
            System.out.println(tz.getDisplayName());
            return tz.getID();
    } 
```

# javascript - JavaScript 命名空间是一个函数/类？

> ID：12487127
> 
> 赞同：-1
> 
> 时间：2012-09-19T00:51:52.363
> 
> 标签：javascript, class, namespaces

所以说我有这样的功能：

```
function Moo()
{
    this.someVal = 'blah';

    return this;
}

Moo.prototype = 
{

} 
```

如果我从这个类实例化一个对象：

```
var moo = new Moo();

console.log(moo); 
```

我在控制台中得到这个，而不是带有 someVal 的对象

```
Window www.domain.com 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T01:15:32.290

我不确定我是否理解这个问题，但这里有一个可能会有所帮助的解释。

在纯javascript（即ECMAScript）中，当使用运算符调用函数时[`new`](http://ecma-international.org/ecma-262/5.1/#sec-11.2.2)，它`this`引用一个新对象，就好像通过`new Object()`将其内部`[[Prototype]]`设置为构造函数的公共`prototype`对象一样。

它是返回的新对象（不需要`return this`，这是默认操作），除非返回一些其他对象。

当一个函数被调用时，它`this`完全由调用设置，上下文（即作用域）是无关紧要的。

所以：

```
function Moo() {
  // if called with new, this references a new object
}

// Assign a new object to Moo.prototype,
// replacing the default object given to all functions
Moo.prototype = { 
  someMethod: function() {...},
  ...
} 

// Create an instance of Moo
var moo = new Moo();

// Call a method
moo.someMethod(); 
```

在最后一行中，`this`within`someMethod`将引用`moo`对象，但这完全取决于方法的调用方式，与`moo`构造方式或调用它的上下文无关。

例如 if`someMethod`调用如下：

```
var x = moo.someMethod;

x(); 
```

的值`this`尚未设置，因此`someMethod`它将默认为全局（窗口）对象，或者在严格模式下，它将是未定义的。

请注意，无论调用的上下文如何，上述情况都会发生，`this`是动态的并且完全由调用设置（忽略[ES5 bind](http://ecma-international.org/ecma-262/5.1/#sec-15.3.4.5)）。

# c# - 试图从 WindowsServer2008 + VS2010 + .NET4.0 读取或写入受保护的内存

> ID：12487129
> 
> 赞同：-1
> 
> 时间：2012-09-19T00:52:04.570
> 
> 标签：c#, multithreading, com, c++-cli

**我的 Dev-PC 有以下内容：** WindowsServer2008 + VS2010 + .NET4.0

**我的问题：** *{“试图读取或写入受保护的内存。这通常表明其他内存已损坏。”}*

**我做了什么：** 我做了一个COM组件，并用C++/CLI为它做了一个包装器，然后用C#来访问。在我的C#代码中，主线程初始化COM环境，几个子线程使用主线程分配的资源。但是如果主线程退出而没有加入等待子线程结束，我会遇到显示“尝试读取或写入受保护的内存。这通常表明其他内存已损坏”的问题。即使我使用 try catch(...) 来包装引发异常的位置，也会发生这种情况。我真的很怀疑为什么会发生这种情况......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T01:07:08.593

该消息表明您遇到了真正的问题。有很多很多很多不同的事情可能导致它 - 您需要查看（所有）可能涉及的非托管代码。

建议：

一个不太明显的根本原因可能是*未能*清理分配的资源：

*   [http://forums.textcontrol.com/showthread.php?324479-Attempted-to-read-or-write-protected-memory](http://forums.textcontrol.com/showthread.php?324479-Attempted-to-read-or-write-protected-memory)

你确定你正在优雅地释放你分配的所有东西吗？

PS：为什么没有Join()*就*退出主线程？

# java - Java多线程程序：多线程中的对象共享

> ID：12487132
> 
> 赞同：2
> 
> 时间：2012-09-19T00:52:27.470
> 
> 标签：java, multithreading

我正在尝试用 Java 制作一个使用多线程的程序。这个节目是关于使用借记卡的夫妻之间共享的银行账户。

我使用 2 个线程编写了 Java 程序，但我得到了`java.lang.NullPointerException`

我正在尝试积累我在 Java 多线程方面的知识。帮助我识别此代码块中的错误。

这是程序：

```
import java.util.concurrent.locks.Condition;
import java.util.concurrent.locks.Lock;
import java.util.concurrent.locks.ReentrantLock;
import java.util.logging.Level;
import java.util.logging.Logger;

// A bank account has a balance that can be changed by deposits and withdrawals.

public class BankAccount {

    public double total = 0, amount = 0;

    public void withdraw(double amount) {
        total -= amount;
        System.out.println("Amount Withdrawn is " + amount);
    }

    public void deposit(double amount) {
        total += amount;
        System.out.println("Amount Deposited is " + amount);
    }

    public double getAccount() {
        System.out.println("Total Amount is " + total);
        return total;

    }
}

class WithdrawalRunnable {

    private static final Lock lock = new ReentrantLock();
    final Condition myCond = lock.newCondition();
    BankAccount myAccount;

    public void amountWithdrawn(double money_Withdrawn) throws InterruptedException {
        lock.lock();
        try {
            while (money_Withdrawn > myAccount.total) {
                myCond.await();  
                //when the condition is satisfied then :
                myAccount.withdraw(money_Withdrawn);
                myAccount.getAccount();
            }
        } finally {
            lock.unlock();
        }
    }
}

class DepositRunnable {

    private static final Lock lock = new ReentrantLock();
    final Condition myCond = lock.newCondition();
    BankAccount myAccount;

    public void amountDeposited(double money_deposited) throws InterruptedException {
        lock.lock();
        try {
            myAccount.deposit(money_deposited);
            myAccount.getAccount();
            myCond.signalAll(); 
        } finally {
            lock.unlock();
        }
    }
}

class Husband implements Runnable {

    DepositRunnable myDeposit;
    WithdrawalRunnable myWithdrawal;
    double amount_deposit;
    double amount_withdraw;

    public Husband(double amount_deposit, double amount_withdraw) {
        this.amount_deposit = amount_deposit;
        this.amount_withdraw = amount_withdraw;
    }

    public void run() {
        try {
            myDeposit.amountDeposited(amount_deposit);
            myWithdrawal.amountWithdrawn(amount_withdraw);
        } catch (InterruptedException ex) {
            Logger.getLogger(Wife.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
}

class Wife implements Runnable {

    DepositRunnable myDeposit;
    WithdrawalRunnable myWithdrawal;
    double amount_deposit;
    double amount_withdraw;

    public Wife(double amount_deposit, double amount_withdraw) {
        this.amount_deposit = amount_deposit;
        this.amount_withdraw = amount_withdraw;
    }

    public void run() {
        try {
            myDeposit.amountDeposited(amount_deposit);
            myWithdrawal.amountWithdrawn(amount_withdraw);
        } catch (InterruptedException ex) {
            Logger.getLogger(Wife.class.getName()).log(Level.SEVERE, null, ex);
        }

    }
}

class RunningThreadTest {

    public static void main(String[] args) throws InterruptedException {

        Husband husb = new Husband(100.0, 0.0);
        Wife wif = new Wife(400.0, 0.0);
        Thread thread1 = new Thread(husb);
        Thread thread2 = new Thread(wif);
        thread1.start();
        thread2.start();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T02:44:56.897

这是多线程的一个很好的研究案例，我稍微改变了你的代码。请将 BankAccountManager 课程与您的两个课程进行比较，我希望这会有所帮助。

```
import java.util.concurrent.locks.Condition;
import java.util.concurrent.locks.Lock;
import java.util.concurrent.locks.ReentrantLock;
import java.util.logging.Level;
import java.util.logging.Logger;

// A bank account has a balance that can be changed by deposits and withdrawals.

class BankAccount {

    private double total = 0;

    public void withdraw(double amount) {
        total -= amount;
    }

    public void deposit(double amount) {
        total += amount;
    }

    public double getAccount() {
        return total;

    }
}

class BankAccountManager {

    private static final Lock lock = new ReentrantLock();
    private Condition myCond = lock.newCondition();
    BankAccount myAccount;

    public BankAccountManager(BankAccount myAccount) {
        this.myAccount = myAccount;
    }

    public void amountWithdrawn(double money_Withdrawn)
            throws InterruptedException {
        lock.lock();
        try {
            if (money_Withdrawn > myAccount.getAccount()) {
                myCond.await();
            }
            // when the condition is satisfied then :
            System.out.println("Amount Withdrawn is " + money_Withdrawn);
            myAccount.withdraw(money_Withdrawn);
            System.out.println("Total Amount is " + myAccount.getAccount());
        } finally {
            lock.unlock();
        }
    }

    public void amountDeposited(double money_deposited)
            throws InterruptedException {
        lock.lock();
        try {
            System.out.println("Amount Deposited is " + money_deposited);
            myAccount.deposit(money_deposited);
            System.out.println("Total Amount is " + myAccount.getAccount());
            myCond.signalAll();
        } finally {
            lock.unlock();
        }
    }
}

class Husband implements Runnable {

    private BankAccountManager manager;
    private double amount_deposit;
    private double amount_withdraw;

    public Husband(BankAccountManager manager, double amount_deposit,
            double amount_withdraw) {
        this.manager = manager;
        this.amount_deposit = amount_deposit;
        this.amount_withdraw = amount_withdraw;
    }

    public void run() {
        try {
            manager.amountDeposited(amount_deposit);
            manager.amountWithdrawn(amount_withdraw);
        } catch (InterruptedException ex) {
            Logger.getLogger(Wife.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
}

class Wife implements Runnable {

    private BankAccountManager manager;
    private double amount_deposit;
    private double amount_withdraw;

    public Wife(BankAccountManager manager, double amount_deposit,
            double amount_withdraw) {
        this.manager = manager;
        this.amount_deposit = amount_deposit;
        this.amount_withdraw = amount_withdraw;
    }

    public void run() {
        try {
            manager.amountDeposited(amount_deposit);
            manager.amountWithdrawn(amount_withdraw);
        } catch (InterruptedException ex) {
            Logger.getLogger(Wife.class.getName()).log(Level.SEVERE, null, ex);
        }

    }
}

public class RunningThreadTest {

    public static void main(String[] args) throws InterruptedException {

        BankAccountManager manager = new BankAccountManager(new BankAccount());

        Husband husb = new Husband(manager, 100.0, 0.0);
        Wife wif = new Wife(manager, 400.0, 1.0);
        Thread thread1 = new Thread(husb);
        Thread thread2 = new Thread(wif);
        thread1.start();
        thread2.start();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T00:57:37.793

在`DepositRunnable`和`WithdrawalRunnable`中，您从不初始化成员`myAccount`，但您尝试在各自的方法中使用它们。在使用它们之前尝试初始化这些成员。

```
BankAccount myAccount = new BankAccount(); 
```

可能还有更多示例，但这些是我首先要看的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T00:57:44.363

存款和取款 Runnables 中的 MyAccount 字段未初始化

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T00:58:12.637

我看到的是属性

```
BankAccount myAccount; 
```

这出现在类 DepositRunnable 和 WithdrawalRunnable 中没有被正确初始化，因此你会得到一个空指针异常，例如这里：

```
myAccount.withdraw(money_Withdrawn); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-19T01:16:54.123

您的许多类成员变量没有被初始化。您的具体问题是因为`Wife.myDeposit`从未初始化，但是一旦您过去了，就会有另一个 NPE 等着您。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-19T01:28:26.720

是的，谢谢，所有这些类都需要初始化如下：

```
DepositRunnable myDeposit = new DepositRunnable();
WithdrawalRunnable myWithdrawal = new WithdrawalRunnable();
BankAccount myAccount = new BankAccount(); 
```

没有人发现的另一个错误是：“总”必须是静态的。

谢谢大家。

# linux - 在 bash 脚本中制作基本树结构的问题

> ID：12487141
> 
> 赞同：0
> 
> 时间：2012-09-19T00:53:15.420
> 
> 标签：linux, bash, tree

我只是想制作一个简单的 bash 脚本来制作树形结构，但我无法发现我的逻辑错误的地方。截至目前，该脚本将使其达到第二个深度，但仅填写其中的第一个文件夹。谁能发现我的错误？

谢谢

```
#!/bin/bash

create(){

 directory=$1

 for((j=0; j < depth; j++)); do

  for x in ${directory[@]}; do

    temp=( )

    for((i=0; i < breadth; i++)); do

        mkdir $x/$i 

        temp=($temp $x/$i)

    done    

  done  

    directory=($temp)

 done

}

breadth=3
depth=2

direc=(tree)

create $direc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T01:24:45.677

问题是 mkdir 不能在没有 --parents (-p) 开关的情况下创建多级目录。于是上线：

mkdir $x/$i

它无法创建 $x/$i 因为 $x 不存在。尝试进行此更改：

```
create(){
    directory=$1
    for((j=0; j < depth; j++)); do
        for x in ${directory[@]}; do
            temp=( )
            for((i=0; i < breadth; i++)); do
                mkdir -p $x/$i
                temp=($temp $x/$i)
            done
        done
        directory=($temp)
    done
}

breadth=3
depth=2

direc=(tree)

create $direc 
```

**基于lotusphp的更优雅的解决方案编辑**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-29T20:15:56.210

```
#!/bin/bash

#The program expects three arguments: dir, depth, breadth in that order

directory=$1
depth=$2
breadth=$3

create()
{
    for((j=0; j < depth; j++))
    do
        for x in ${directory[@]}
    do
            temp=( )
            for((i=0; i < breadth; i++))
        do
                mkdir -p $x/$i
                #echo $x/$i
                temp=(${temp[@]} $x/$i)
            done
        done
        directory=(${temp[@]})
    done
}

create 
```

# ruby-on-rails - 在 FactoryGirl 中建立关联时出错

> ID：12487142
> 
> 赞同：0
> 
> 时间：2012-09-19T00:53:16.407
> 
> 标签：ruby-on-rails, factory-bot

我有这个工厂：

```
FactoryGirl.define do
  factory :asset_size do 

    sequence(:name) { |n| "AssetSize#{n}" }  

    after_create do |as|
      FactoryGirl.create(:midpoint, :asset_size => as)
      FactoryGirl.create(:midpoint, :asset_size => as, :grade => 18, :yearly_wage => 25000.00)
    end

  end
end 
```

但不断收到此错误：

```
AssetSize(#70166742384960) expected, got #<Class:0x007fa1eddef738>(#70166728637340)   (ActiveRecord::AssociationTypeMismatch) ./spec/factories/asset_size_factory.rb:7:in `block (3 levels) in './features/step_definitions/role_authorization_steps.rb:2:in `/^a basic balanced results employee$/'./features/role_authorization.feature:4:in `Given a basic balanced results employee'

after_create do |as|
  FactoryGirl.create(:midpoint, :asset_size => as)
  FactoryGirl.create(:midpoint, :asset_size => as, :grade => 18, :yearly_wage => 25000.00) 
```

我理解错误，但我不明白我的语法是如何关闭的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T01:06:35.090

不是语法：`after(:create) { this_runs_first }`所以我想知道如果你这样做是否会起作用。

# php - 使用 PHP 检查 memcache 连接是否存在？

> ID：12487143
> 
> 赞同：1
> 
> 时间：2012-09-19T00:53:21.543
> 
> 标签：php, connection, memcached

根据 php.net，[`memcache_connect()`应该返回`TRUE`success 或`FALSE`failure](http://php.net/manual/en/memcache.connect.php)。因此，我认为即使我将缓存服务器地址更改为不存在的地址，以下代码也应该可以工作，但它没有：

```
 $memcache=memcache_connect('myCacheServer.com', 11211);

    if($memcache){
        $this->connect=$memcache;
    }
    else{
        $memcache=memcache_connect('localhost', 11211);
        $this->connect=$memcache;
    } 
```

这是我收到的错误消息：

```
Message: memcache_connect(): php_network_getaddresses: getaddrinfo failed: Temporary 
failure in name resolution 
```

有谁知道我还能如何设置这个简单的布尔值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T01:06:13.663

根据评论，不知道为什么上述方法不起作用，但有更好的方法来处理这个问题。

如果无法连接“myCacheServer.com”，则每次超时可能需要 30 秒。然后在超时之后，您将回退到本地主机 - 但如果您每次需要等待 30 秒，则运行 memcached 并没有多大意义。

我建议将服务器放在配置文件中，或者根据已知值进行驱动——比如

```
if (isset($_SERVER['HTTP_HOST']) && strpos($_SERVER['HTTP_HOST'], 'localhost') ) !== false) {
    define('MEMCAHCED_SERVER', 'localhost');
    define('MEMCAHCED_PORT', '11211');
} else {
    // assume live - alwways have live as the fallback
    define('MEMCAHCED_SERVER', 'myCacheHost.com');
    define('MEMCAHCED_PORT', '11211');
}

$memcache=memcache_connect(MEMCAHCED_SERVER, MEMCAHCED_PORT);   

// Set the status to true or false.
$this->connect=$memcache; 
```

然后，为了满足您的需求（如果您希望远程服务器不可用），我会将这个事实存储在服务器上的文件中。它有点不正常，但会节省你的时间。

```
// Before calling memcache connect
if (file_exists(MyFlagFile) and filemtime(MyFlagFile) > time() - 600) {
     // Do Not Use Memcached as it failed within hte last 5 minutes
} else {
     // Try to use memcached again

     if (!$memcache) {
         // Write a file to the server with the time, stopping more tries for the next 5 minutes
         file_put_contents(MyFlagFile, 'Failed again');
     }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:20:12.050

我从[php.net 的 Memcache 文档](http://www.php.net/manual/en/memcache.connect.php#106786)中找到了一个部分有效的解决方案。这意味着，向用户显示的错误被抑制，但如果缓存服务器不存在，您仍然需要等待很长的超时时间。

这是我的代码：

```
 $host='myCacheServer.com';
    $port=11211;
    $memcache = new Memcache();
    $memcache->addServer($host, $port);
    $stats = @$memcache->getExtendedStats();
    $available = (bool) $stats["$host:$port"];
    if ($available && @$memcache->connect($host, $port)){
            $this->connect=$memcache;
           // echo 'true';
    }

    else{
            $host='localhost';
            $memcache->addServer($host, $port);
            $this->connect=$memcache;
            //echo 'false';
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-28T14:01:14.800

我使用此代码检查连接

```
function checkConnection()
{
    try {
        $client = $this->initClient();
        $data = @$client->getVersion();
    } catch (Exception $e) {
        $data = false;
    }
    return !empty($data);
} 
```

# python - 在python中一起绘制imshow和线图

> ID：12487145
> 
> 赞同：2
> 
> 时间：2012-09-19T00:53:25.863
> 
> 标签：python, matplotlib

好的，我完全被 Python 问题所困扰。我觉得把问题描述得太详细会让人困惑，所以我先总结一下问题，然后展示我的代码。

我创建了一个 imshow 图，在其顶部，我想绘制一个常规线图。Y 轴不同，这很好，但两者的 X 轴应该相同。

除了缩放之外，它几乎可以工作：

```
fig = plt.figure()
ax1 = fig.add_subplot(111)
ax1.set_xlabel('MJD',fontsize=14)
ax1.set_ylabel('Bin Number',fontsize=14)
mjdaxis=np.linspace(0,bad_removed_mjd.shape[0]-1,20).astype('int')
ax1.set_xticks(mjdaxis,[int(np.floor(bad_removed_mjd[i])) for i in mjdaxis])
ax1.imshow(residuals, aspect="auto")

ax2 = ax1.twinx()
ax2.set_ylabel('Pdot (s-2)',fontsize=14)
ax2.plot(pdot[8:,0],pdot[8:,1])

plt.show() 
```

现在发生的情况是 imshow 图在 x 轴上的值 0-60 之间被挤压。这是因为它们现在被它们的索引号 0,1,2...绘制。我需要它们的 x 轴值对应于列表“bad_mjd_removed”55304、55365、55401...中的值。这很好用当我自己有 imshow 情节时。

以下是 imshow 图的图片，然后当我尝试在其上添加线图时：

![仅使用 imshow 绘制](../Images/94bf1effc81cb0e666d228b53f9570d6.png) ![用 imshow 和线图绘制](../Images/773c5699f9bf80765786baed868ff8dd.png)

在第二个图上，x 轴上 0 附近的细线是整个图片 1 挤在 0 和 60 之间。

对于这个问题的任何帮助，我将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T01:31:40.630

您可以使用`extent`kwarg 将您的 imshow 图放在正确的位置。作为额外的奖励，如果您也这样做了，您应该能够让 matplotlib 自动处理轴刻度线。

```
import matplotlib.pyplot as plt
import numpy as np
x = np.random.rand(2,3)
plt.imshow(x, interpolation='nearest', extent=[0,3,0,2]) 
```

![在此处输入图像描述](../Images/397e2a0713a4c406f762a447966e9216.png)

```
plt.imshow(x, interpolation='nearest', extent=[100,103,100,102]) 
```

![在此处输入图像描述](../Images/93496fda8214f1a0f8f6c7f2c2b08dfe.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T01:05:16.003

您的一种可能性是使用 imshow 的 extend= 关键字，例如

```
plt.imshow(extend=(mjdaxis.min(),0,mjdaxis.max(),1000) 
```

或类似的东西。但是您还应该记住，如果 mjdaxis 刻度线之间的间隙不是恒定的，您的线图将不会直接对应于图像，因为 imshow 图不会以与线图相同的方式拉伸

# arrays - 排序列表中的最大总和

> ID：12487146
> 
> 赞同：0
> 
> 时间：2012-09-19T00:53:26.360
> 
> 标签：arrays, math

我知道这不是一个编程问题，但它涉及编程和一些数学。假设我有一组**N**个项目，所有项目都有它们的点，并按它们的等级排序。例如：

```
list1 = { // N = 4
1: (item1, points: 100, rank:1), 
2: (item2, points:55, rank:2), 
3: (item3, points:55, rank:2),
4: (item4, points:45, rank:3) } 
```

等等。list2 是这 4 (N) 个项目的另一个列表，但点数不同，因此排名不同。我正在尝试对这两个列表进行比较，例如两个列表中项目排名差异的总和。

例如：

```
list2 = { // N = 4
1: (item4, points: 10, rank:1), 
2: (item3, points:9, rank:2), 
3: (item2, points:8, rank:3),
4: (item1, points:7, rank:4) } 
```

在这种情况下，差异总和 S = (item1 rank difference + item2 " " + ....) S= 3 + 1 + 0 + 2 = 6

为了将它与最坏的情况进行比较，我需要这个总和对于不同 N 的最差值。

那么，就 N 而言，S 的最大值是多少？S_max (N) =?

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T01:12:46.943

我不确定是否理解，但 2 个长度为 N 的列表的最差值将是列表 1 中的每个项目都排在第 1 位，并且列表 2 中没有项目共享相同的排名（不是唯一的最坏情况，但绝对是最坏的情况) :

```
sum = (1-1)+(2-1)+...+((n-1)-1)+(n-1)
    =  0 + 1 + ... + (n-2) + (n-1)
    = n(n-1)/2 
```

# php - php-cgi.exe 在 500 次点击后退出

> ID：12487147
> 
> 赞同：6
> 
> 时间：2012-09-19T00:53:26.250
> 
> 标签：php, windows, nginx

对于我的生活，我无法弄清楚这一点。

这是我的开发机器设置：

Windows 7 家庭高级版 64 位，
网络服务器：NGINX 1.3.6 c:\users\user_name\devel\nginx
PHP：5.4.7 c:\users\user_name\devel\nginx\php5

一切正常，只是在 500 次点击后，我的 php-cgi.exe 意外退出。没有错误日志，没有事件，什么都没有。它只是在 500 次点击后死亡……每一次。我还没有在网上找到一个单一的信息来源来帮助我解决这个问题。所有配置似乎都有效且良好。这发生在两台不同的机器（我的开发桌面和我的笔记本）上。我尝试了不同的 nginx.conf 和 php.ini 文件……还是一样。

我只需要更好地了解如何进行调试。有什么建议么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-22T22:01:31.667

我终于弄明白了。也许它很简单，我找不到解决方案。

添加：

```
SET PHP_FCGI_MAX_REQUESTS=0 
```

到启动 php-cgi.exe 的命令文件修复它。我猜它在 FCGI 被杀死之前默认（未设置时）为 500 次点击。

显然，这是有充分理由的，正如 GargantuChet 所建议的那样，正确设置并让 PHP 托管和自动生成实例是一个更好的方法......但对于想要快速 Windows 开发环境的人来说，这个可以解决一些问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-24T22:19:26.540

所选答案有效，但不允许 CGI 服务器每隔一段时间关闭一次（在 OP 情况下点击 500 次后）。

就像提到的 OP 和其他人一样，在生产环境中，这种关闭对于减少内存泄漏是必要的。

在 Windows 中，另一种解决方案是创建一个如下所示的批处理文件：

```
:start
    php-cgi -b 127.0.0.1:9000
    goto start 
```

这将允许发生设计的关闭，并且几乎会立即再次启动 php-cgi。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T21:57:31.413

不可见的 EXE 文件，它将通过传递它自己的命令行参数循环运行 php-cgi.exe，可以很容易地编译为例如 ms-VCpp6 ( [phpCgiExeLoop.exe](http://jalija.com/jalija/wintools/phpCgiExeLoop.exe) ~28kb)：

```
#include <windows.h>
#include <Shellapi.h>
#include "stdio.h"

int APIENTRY WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,
                     LPSTR     lpCmdLine,      int       nCmdShow)
{   while (1)
    {   SHELLEXECUTEINFO shExInfo = {0};
        shExInfo.cbSize = sizeof(shExInfo);
        shExInfo.fMask = SEE_MASK_NOCLOSEPROCESS;   shExInfo.hwnd = 0;
        shExInfo.lpVerb = "open";            // Operation to perform
        shExInfo.lpFile = "php-cgi.exe";     // Application to start    
        shExInfo.lpParameters = lpCmdLine;   // Additional parameters
        shExInfo.lpDirectory = 0;            shExInfo.nShow = SW_HIDE;
        shExInfo.hInstApp = 0;  

        if (ShellExecuteEx(&shExInfo))
        {   WaitForSingleObject(shExInfo.hProcess, INFINITE);
            CloseHandle(shExInfo.hProcess);
        }
    }
    return 0;
} 
```

并运行“phpCgiExeLoop -b 127.0.0.1:9000”而不是“php-cgi.exe -b 127.0.0.1:9000”......以赢得支持 php 创建者的意图（避免可能的内存泄漏）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-29T14:39:01.837

如果你添加

```
SET PHP_FCGI_CHILDREN=1 
```

到启动 php-cgi.exe 的命令文件，它修复了它。

如果你愿意，你可以添加更多的孩子，这取决于你的需要。

# git - Git推送到服务器远程问题

> ID：12487148
> 
> 赞同：0
> 
> 时间：2012-09-19T00:53:34.660
> 
> 标签：git, deployment

我没有想法，需要一些。

我正在尝试将更改从本地计算机推送到使用项目的远程服务器。

我有点使用本指南：[http ://ryanflorence.com/deploying-websites-with-a-tiny-git-hook/](http://ryanflorence.com/deploying-websites-with-a-tiny-git-hook/)

我像这样在本地机器上添加遥控器

`$git remote add stage ssh://user@domain.com/var/www/domain.com/public_htm`l

这个 /var/www/domain.com/public_html 是 repo 的路径

然后当我这样做

```
$git push stage stage 
```

一切似乎都有效，但更改似乎没有出现在网站上。

所以检查远程（阶段）#git status 我可以看到

```
$ On branch stage
$ Changes to be committed:
$   (use "git reset HEAD <file>..." to unstage)
$
$   modified:   sites/all/modules/custom/bf/bf.forms.inc
$ 
```

因此，在远程（舞台）上执行 #git reset --hard 会带来变化。

然后我添加一个接收后挂钩来自动化这个过程我的接收后文件包含

```
#!/bin/sh
cd ..
GIT_DIR='.git'
umask 002 && git reset --hard 
```

但是现在当我做 $git push stage stage 时，我得到了这个结果

> 计数对象：24，完成。Delta 压缩最多使用 2 个线程。压缩对象：100% (16/16)，完成。写入对象：100% (16/16)，1.56 KiB，完成。总共 16 个（delta 10），重用了 0 个（delta 0） remote：错误：拒绝更新已签出的分支：refs/heads/stage 远程：错误：默认情况下，在非裸存储库中更新当前分支远程：错误：被拒绝，因为它会使索引和工作树不一致远程：错误：与您推送的内容，并且需要'git reset --hard'来匹配远程：错误：工作树与HEAD。远程：错误：远程：错误：您可以在远程存储库中将“receive.denyCurrentBranch”配置变量设置为远程：错误：“忽略”或“警告”以允许推入远程：错误：其当前分支；然而，除非您远程：错误：安排更新其工作树以匹配您在某个远程：错误：其他方式中推送的内容，否则不建议这样做。远程：错误：远程：错误：要压制此消息并仍保持默认行为，请将远程：错误：'receive.denyCurrentBranch' 配置变量设置为'拒绝'。到 ssh://user@domain.com/var/www/domain.com/public_html ！[远程拒绝] 阶段 -> 阶段（当前已签出分支）错误：未能将一些参考推送到 'ssh://user@domain.com/var/www/domain.com/public_html' 配置变量“拒绝”。到 ssh://user@domain.com/var/www/domain.com/public_html ！[远程拒绝] 阶段 -> 阶段（当前已签出分支）错误：未能将一些参考推送到 'ssh://user@domain.com/var/www/domain.com/public_html' 配置变量“拒绝”。到 ssh://user@domain.com/var/www/domain.com/public_html ！[远程拒绝] 阶段 -> 阶段（当前已签出分支）错误：未能将一些参考推送到 'ssh://user@domain.com/var/www/domain.com/public_html'

我该如何纠正这个问题？我的意思是根据消息，这不是推荐的工作流程，有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T01:21:41.750

错误消息非常清楚地告诉您需要做什么：登录到您的服务器并运行`git config receive.denyCurrentBranch ignore`.

通常，设置 git 以便您可以`git pull`从任何存储库中访问，无论是裸存储库还是非裸存储库，但`git push`只会发生在裸存储库中。（“裸”存储库是没有工作目录的存储库；文件夹的内容就是`.git`目录的内容。）这是有道理的；如果您检查了一个分支，并且我将同一分支的新版本推送到您的机器上，那么您的工作目录会突然过时，并且您的下一次提交可能会恢复我刚刚推送的许多内容。那很糟。

In this setup, the working directory is the directory which your web server reads and which nobody commits, you actually want git to update the working directory immediately, and you have a post-update hook that does "update its work tree to match what you pushed in some other way". You can turn off the error message and go about your business.

如果您好奇，`git reset --hard`将清除您的本地更改并确保您的工作目录与 HEAD 相同。就像 git 中的大多数事情一样，有多种方法可以做同样的事情，你可以很容易地编写`git checkout HEAD .`. 不过，一个建议是：也添加一个`git clean -df`。`git checkout`并且`git reset`通常不要删除您尚未添加到 git 的文件，因此如果您希望已删除的文件从您的服务器中消失，您需要专门指示 git 这样做。

希望有帮助！

# localization - 2012 年检测浏览器用户区域设置的最佳方法是什么？

> ID：12487150
> 
> 赞同：23
> 
> 时间：2012-09-19T00:53:45.630
> 
> 标签：localization, internationalization, locale

我想检测用户的语言环境（而不是他们的位置）。问题是这些方法似乎都不可靠。

# 接受语言标题

优点

1.  如果浏览器已更改为默认设置，您将获得一个可以显示真实语言环境的值列表。
2.  默认情况下在 IE 中似乎准确？
3.  默认情况下在 IE 中准确意味着默认情况下在 Windows 上的 FF 中准确？（即您从 mozilla.org 下载正确的版本）
4.  与 Windows 上的 Opera 的 #3 相同吗？

缺点

1.  服务器端开销和对缓存的干扰（或额外的 XHR）。
2.  在所有英语系统上的 Chrome 中默认为“en-us”，除非您安装本地词典并将其拖到顶部。
3.  不是 Safari 发送的？
4.  在 Safari 和 Chrome 中默认不正确意味着[http://mozilla.org](http://mozilla.org)和[http://opera.com](http://opera.com)将用户定向到错误的下载，并且还会安装它们自己的“en-us”版本。

结论

*   在 OSX 上完全不可靠，因为默认情况下每个浏览器都会出错。但是在 Windows 上的 IE 和 FF 中应该是准确的。

# window.navigator.language/userLanguage

优点

1.  最好的部分是它是一个很好的轻量级客户端解决方案。
2.  默认情况下在 IE 中似乎准确？
3.  默认情况下，在 Windows 上的 FF 中似乎准确？

缺点

1.  默认情况下，在所有系统上的 Safari 中始终“en-us”。
2.  在所有英语系统上的 Chrome 中默认为“en-us”，除非您安装本地词典并将其拖到顶部。
3.  在 Opera 中总是只有“en”。

结论

*   甚至比 Accept-Language 更不可靠。

# IP地理定位

优点

1.  独立于浏览器和操作系统语言设置工作。

缺点

1.  独立于浏览器和操作系统语言设置工作。
2.  关于性能、定价、保持最新等的所有常见问题。

结论

*   这是否真的有效取决于您*为什么*要尝试检测用户的语言环境。此方法为您提供用户的位置，这与 i18n 意义上的区域设置不同。

# HTML5 地理位置

优点

1.  通常与 IP 地理定位一样准确，无需服务器开销。

缺点

1.  要求用户允许您访问他们的位置。
2.  浏览器支持（实际上支持看起来很不错）。

结论

*   不得不征求许可通常会破坏交易。也与 IP 地理定位相同的结论。

# 概括

现在似乎检测用户的区域设置比以往任何时候都更难，而检测他们的物理位置变得更容易了。最大的罪魁祸首是 Safari，它至少应该在 OSX 上默认反映操作系统设置，但 Chrome 也没有设置任何示例。即使人们将他们的本地词典安装到 Chrome，我真的怀疑他们也会将其拖到列表的顶部。

我不能责怪 Mozilla 和 Opera 被其他浏览器误报到他们的下载页面所拖累。但是，如果他们将下载页面切换为使用地理定位而不是可能查看 Accept-Language，这将缓解问题。

但实际上，既然 IE 不再占主导地位，还剩下哪些选项可以检测用户的语言环境？还剩下什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T05:42:55.560

这取决于您所说的“用户区域设置”是什么意思。问题中列出的可能性反映了“用户区域设置”的不同含义。它们都没有反映现代本地化中的充分含义，即用户偏好的一组文化约定（包括按偏好顺序排列的人类语言列表）。找到它的方法是向用户询问它们。

自然，您应该只询问在上下文中真正重要的约定，并且您可以考虑将用户表达的偏好存储在 cookie、HTML5 存储、用户数据库或其他地方。

浏览器通常允许用户指定首选语言列表，以在`Accept-Language`标题中发送。然而，这仅与区域设置概念的一个方面有关，大多数用户都不知道它，并且已知它经常具有不正确的默认值。

# gdb - 在开源 GDB 代码中启用核心转储

> ID：12487152
> 
> 赞同：0
> 
> 时间：2012-09-19T00:54:03.473
> 
> 标签：gdb, arm

我正在查看开源 GDB 代码。我希望为处理器编写一个依赖于目标的代码（就像 ARM 和 MIPS 等）。我已经在类似的行上定义了适当的文件。在大多数情况下，我的目标能够让 GDB 正常工作。但是，当我尝试评估核心转储时，我得到：这个版本的 GDB 不支持核心转储。

这是放在文件中的检查：target.c

如您所知，在 GDB 中，我们有一系列可以调试的文件类型。我想知道 ARM/MIPS 或任何其他处理器架构可以启用核心转储的确切位置。

谢谢

PS：我查看了 opne source arm-linux-tdep.c 和 arm-tdep.c 但无法得出任何结论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T05:30:52.930

弄清楚了。根据 GDB 文档，我们需要在 tdep 文件中包含 supply_gregset 等例程。此外，在 Makefile.in 中，我们需要将 corelow.o 包含到 TARGET_OBS 这确保我们构建 GDB 以支持核心转储

# php - 查找空格的正则表达式失败

> ID：12487153
> 
> 赞同：1
> 
> 时间：2012-09-19T00:54:18.720
> 
> 标签：php, regex

我正在尝试使用正则表达式来查找空格组并将它们替换为另一个字符，例如 $

```
 $teststring="00005e-000003 D21    3       0004ea-287342 D21    3       000883-d94982 D21    3       000f20-4c5241 D21    3       002561-e32140 D21    3       003018-a1a24f D21    3       00e039-0fe0fe D21    3       08000f-1eb958 D21    3       08000f-1ec4de D21    3       082e5f-498900 D21    3";
 $pattern='/([0-9A-F]{6})-([0-9A-F]{6}) ([0-9A-F]+)\s{1,}([0-9]{1,})/i'; 

 if (preg_match_all($pattern,$teststring,$matches, PREG_PATTERN_ORDER)) {   
        $data = $matches[0];
 } 
```

这是根据我的模式工作的，如果我在 $data 上执行 print_r，它看起来像：

```
 Array ( 
          [0] => 00005e-000003 D21 3 
          [1] => 0004ea-287342 D21 3 
          [2] => 000883-d94982 D21 3 

       } 
```

我想做的是用 $ 替换所有空格，所以输出如下所示：

```
 Array ( 
          [0] => 00005e-000003$D21$3 
          [1] => 0004ea-287342$D21$3 
          [2] => 000883-d94982$D21$3 
  } 
```

你能告诉我我怎么能做到这一点吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T01:02:30.257

尝试改用 preg_replace

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T02:54:21.687

利用：

```
$ret = preg_replace('/([\da-f]{6}-[\da-f]{6}) ([\da-f]+)\s+(\d+)/i', '\1$\2$\3', $teststring); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T03:00:20.847

如果您只想用一个美元符号替换所有空格组，则可以执行以下操作：

```
preg_replace('/\s+/','$', $subject); 
```

顺便说一句：

*   您可以使用`\d`而不是`[0-9]`匹配一位数字
*   您可以使用`+`匹配一个或多个字符而不是`{1,}`
*   我认为不要使用`//i`不区分大小写的搜索，而是让你的十六进制字符类`[0-9a-fA-F]`更有效率......虽然我没有做腿部工作。

# ruby-on-rails - Date.new 为“11”返回未定义的方法 `div':String

> ID：12487156
> 
> 赞同：8
> 
> 时间：2012-09-19T00:55:01.573
> 
> 标签：ruby-on-rails, ruby

我收到错误

> "11":String" 的未定义方法 `div'

`@startdate`提交表单时指向该行。我完全不明白发生了什么事。如果我在 rails 控制台中执行这些步骤，它就可以正常工作。

在我的控制器中，我有：

```
@startday = params["startday_#{i}".to_sym]
@startmonth = params["startmonth_#{i}".to_sym]
@startyear = params["startyear_#{i}".to_sym].to_s
@endday = params["endday_#{i}".to_sym]
@endmonth = params["endmonth_#{i}".to_sym]
@endyear = params["endyear_#{i}".to_sym].to_s
@startdate = params["startdate_#{i}".to_sym]
@price = params["price_#{i}".to_sym]
@currency = params[:currency]
@startdate = Date.new(@startyear, @startmonth, @startday)
@enddate = Date.new(@endyear, @endmonth, @endday) 
```

我发送的哈希是：

```
{
  "startmonth_1"=>"2",
  "startday_1"=>"11",
  "startyear_1"=>"12",
  "endmonth_1"=>"2",
  "endday_1"=>"13",
  "endyear_1"=>"12",
  "price_1"=>"12",
} 
```

如果我做一个

```
@startee = @startyear.to_s + '-' + @startmonth.to_s + '-' + @startday
return render :text => @startee 
```

我得到：

> 12-2-11

所以我看不出问题。一切似乎都正常。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-19T01:01:39.687

`Date.new`当您需要传递整数时，您将传递字符串：

```
@startday = params[:"startday_#{i}"]
@startmonth = params[:"startmonth_#{i}"]
@startyear = params[:"startyear_#{i}"].to_s
@endday = params[:"endday_#{i}"]
@endmonth = params[:"endmonth_#{i}"]
@endyear = params[:"endyear_#{i}"].to_s
@startdate = params[:"startdate_#{i}"]
@price = params[:"price_#{i}"]
@currency = params[:currency]

@startdate = Date.new(@startyear.to_i, @startmonth.to_i, @startday.to_i)
@enddate = Date.new(@endyear.to_i, @endmonth.to_i, @endday.to_i) 
```

此外，如果您不需要在视图中使用这些变量，则无需将它们设为实例变量，而应将它们设为局部变量（即去掉`@`名称中的前导）。

# javascript - HTML 代码不工作

> ID：12487157
> 
> 赞同：0
> 
> 时间：2012-09-19T00:55:10.027
> 
> 标签：javascript, jquery, html, css

由于某种原因，此 HTML 无法正常工作...

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
    <head>
        <meta http-equiv="Content-type" content="text/html;charset=UTF-8"/>
        <title>Gallery</title>
        <!--
        <link rel="stylesheet" type="text/css" href="gallery.css"/>
        Note: use if stylesheet is separated from main project
        I am embedding the CSS so it is easier to send
        -->
        <!--
        <script type="text/javascript" src="gallery.js"></script>
        Note: use if javascript is separated from main project
        I am embedding the JS so it is easier to send
        -->
        <style>
            /* CSS */
            #topbar {}
            #selection {border: 3pt solid red;}
        </style>
        <script type="text/javascript">
            // Javascript
        </script>
        <!-- JQuery -->
        <script src="http://code.jquery.com/jquery-1.8.1.min.js" type="text/javascript"/>
    </head>
    <body>
        <div id="topbar">
            <table id="selection">
                <tr>
                    <td>Test1</td>
                </tr>
            </table>
        </div>
    </body>
</html> 
```

节目中什么都没有`body`！我什至尝试在其中随机粘贴`<p>`一些文字，但没有出现。问题是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T00:56:18.390

您需要关闭`<script>`标签。自闭标签对元素无效`<script>`：

```
<script src="http://code.jquery.com/jquery-1.8.1.min.js" type="text/javascript"></script> 
```

# android - 已调用 AlarmManager、Service、onStartCommand 但无法启动

> ID：12487160
> 
> 赞同：0
> 
> 时间：2012-09-19T00:55:34.910
> 
> 标签：android, android-intent, android-service, alarmmanager, android-alarms

我有一个问题，我创建了一个应该在 AlarmManager 唤醒时创建的服务。实际上它正在开始（ onStartCommand**被调用**，*我看到了 toast*），但在日志中同时出现：

```
 09-19 02:48:32.537: I/ActivityManager(1983): START {flg=0x4 cmp=com.my.app/.syncService.SyncService (has extras)} from pid -1
    09-19 02:48:39.662: W/ActivityManager(1983): Unable to start service Intent { act=com.my.app.syncService.SyncService flg=0x4 (has extras) }: not found 
```

意图：

```
 Intent intent = new Intent("com.my.app.syncService.SyncService");
    PendingIntent pendingIntent = PendingIntent.getService(this, 12345, intent, PendingIntent.FLAG_CANCEL_CURRENT);
    AlarmManager am = (AlarmManager)getSystemService(Activity.ALARM_SERVICE);
    am.setInexactRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), 1000*30, pendingIntent); 
```

我的服务看起来像这样：

```
public class SyncService extends Service{

    @Override
    public void onCreate() {
        Log.d("SyncService", "onCreate");
        Log.d("SyncService", "onCreate");
        Log.d("SyncService", "onCreate");
        super.onCreate();
        Toast.makeText(this, "Debug: SyncService created", Toast.LENGTH_LONG).show();
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        Toast.makeText(this, "Debug: SyncService onStartCommand", Toast.LENGTH_LONG).show();
        return super.onStartCommand(intent, flags, startId);
    }
} 
```

安卓清单：

```
 <application>
       ...
       <service android:enabled="true" android:name="com.my.app.syncService.SyncService"/>       
   </application> 
```

是不是有点奇怪？onCreate get 只调用一次，这对我来说很有意义，但其余的呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T01:45:22.367

您是否缺少 AndroidManifest.xml 中的接收器。像这样的东西：

```
 <receiver android:name="SyncReceiver">
        <intent-filter>
            <action android:name="com.my.app.syncService.SyncService""/>
        </intent-filter>
    </receiver> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T02:20:42.767

我认为您可以尝试更改此行

```
 Intent intent = new Intent("com.my.app.syncService.SyncService"); 
```

到

```
 Intent intent = new Intent(context,SyncService.class); 
```

在这里，这`context`取决于您在哪里创建`AlarmManager`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T02:43:58.930

```
Intent intent = new Intent("com.my.app.syncService.SyncService"); 
```

AndroidManifest.xml中Intent类引用intent-filter的构造函数

# ios - 在 iOS 上启动 PhotoBooth 的自定义 url 方案是什么？

> ID：12487161
> 
> 赞同：0
> 
> 时间：2012-09-19T00:55:36.597
> 
> 标签：ios, url

我希望使用链接从网页启动 iOS 上的 PhotoBooth。我相信最好的方法是使用自定义 url 方案。但我似乎无法在任何地方找到一个记录 Photobooth 的文件。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T02:06:29.930

我对 PhotoBooth 一无所知，但**如果您有越狱设备**，您将能够对 URL 方案（任何应用程序的）进行逆向工程。

1.  `ssh`进入你的手机
2.  导航到安装应用程序的位置（例如`/var/mobile/Applications/*/PhotoBooth.app`）
3.  如果您安装了该`plutil`实用程序（从 Cydia 获取），则`plutil Info.plist`在 PhotoBooth.app 文件夹内的 plist 文件上运行。
4.  如果您没有`plutil`，则只需`scp`将 Info.plist 文件返回到您的 Mac，然后使用 OS X**属性列表编辑器**应用程序打开它。
5.  在 Info.plist 中，您应该找到有关自定义 URL 方案的信息（如果它支持的话）。
6.  这至少会告诉您是否支持自定义 URL 方案，以及一些关于它的信息。从那里开始，您可能会更好地进行更多的网络搜索

[有关 URL 方案的 Info.plist 的更多信息，请参见此处](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW50)（该示例使用`todolist://`协议）

# java - 使用 Java 和 DirectShow 从未知视频捕获设备中提取和显示实时帧

> ID：12487165
> 
> 赞同：2
> 
> 时间：2012-09-19T00:56:26.830
> 
> 标签：java, video, directshow, video-capture

我正在用 Java 开发一个视频评论项目。我正在改进在已变成 DVR 的 Windows 2000 机器上运行的现有和极端过时的软件。本机有4个采集设备，每个采集设备有4个输入。拍摄已保存的视频并播放它没有任何问题。我的预算为 0 美元，必须使用现有技术。话虽如此，我也被迫使用 DirectShow Java 包装器，这似乎效果最好。我现在面临的问题是我无法让 DirectShow 重新调整机器上的捕获设备，但我对 DirectShow API 非常陌生，并且只尝试调用 queryDevices()。在我的电脑上找到我的网络摄像头或电视调谐器没有问题，但在 DVR 电脑上找不到任何东西。

采集卡名称为 Moab-5 v1.10。它已经很老了，最初制造该设备的公司不再支持它或该软件，因为他们已经转向更大更好的东西。

我对捕获设备了解不多，我正在寻找有关它及其工作原理的信息，这将有很大帮助。

任何人都有什么好主意，我可以如何使用 DirectShow 或其他任何东西从中提取视频？
我还有其他方法可以应对这一挑战吗？我可以探索的其他媒体框架？我已经尝试了其中的大多数，这是唯一一个效果最好的。

我愿意尝试任何事情，但最终还是想坚持使用 Java，这是我擅长的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:43:48.017

在该 PC 上运行[GraphEditPlus](http://www.infognition.com/GraphEditPlus/)，在过滤器列表中找到您的捕获设备，将其添加到一个空图表，右键单击其输出引脚，选择“渲染”，您将准备好显示视频的图表。然后您可以生成代码（参见文件菜单）并查看它是如何构建的。

# php - 如果数组不存在，则从现有 URL 将数组插入到页面链接 url 中创建数组，将默认值插入到页面上的 href 链接中

> ID：12487167
> 
> 赞同：1
> 
> 时间：2012-09-19T00:56:45.660
> 
> 标签：php, variables, exec, shortcode

我在 wordpress 中使用 PHP 短代码 exec 在帖子和页面中执行 PHP

我想从 URL 中获取变量并将它们插入到页面上的 href URL 链接中，但是如果 URL 中不存在变量，我想插入默认值。

例如，如果 url 有变量，如[http://mysite.com/?var1=123&var2=456&var3=789](http://mysite.com/?var1=123&var2=456&var3=789)

页面上的 url 应该是 href="http://othersite.com/?var1=123&var2=456&var3=789

如果 URL 是：[http](http://mysite.com/) ://mysite.com/ 站点上的链接应该是 href="http://othersite.com/?var1=abc&var2=def&var3=ghi

我是 PHP 新手，所以很抱歉我没有损坏的代码供您修复，我从头开始。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T01:30:16.017

$_GET contains the parameters sent.

So the following (untested) will give you an idea.

```
// Set your default values
$aValues = array(
    'var1' => 12,
    'var2' => 12,
    'var3' => 12
      );

// Now run through the default values to see if they were sent with $_GET
foreach ($aValues as $key=>$value) {
    // Isset does the check to see if they were sent
    if (isset($_GET[$key])) {
        $aValues[$key] = $_GET[$key];
    }
}

$url = 'http://mysite.com/?' . http_build_query($aValues); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T01:38:54.530

```
$protocol = strpos(strtolower($_SERVER['SERVER_PROTOCOL']),'https') 
                === FALSE ? 'http' : 'https';
$host     = $_SERVER['HTTP_HOST'];
$script   = $_SERVER['SCRIPT_NAME'];
$params   = $_SERVER['QUERY_STRING'];

$currentUrl = $protocol . '://' . $host . $script . '?' . $params;

if(isset($_GET["var"])) {
 echo $currentUrl; 
}
else { echo "yourwebsite with defualt vars" } 
```

将当前 url 设置为 $currentUrl 变量。如果语句检查 var 是否设置，则回显

# javascript - Phonegap Android 使用 JavaScript 读取 sdcard 上的文件

> ID：12487171
> 
> 赞同：3
> 
> 时间：2012-09-19T00:57:05.470
> 
> 标签：javascript, android, cordova

我正在尝试使用 Android 上的 Phonegap 2.0.0 使用 JavaScript 读取文本文件。[我使用http://docs.phonegap.com/en/2.0.0/cordova_file_file.md.html#File](http://docs.phonegap.com/en/2.0.0/cordova_file_file.md.html#File)上的 File API 浏览了几个示例似乎没有任何效果。

我在 Stackoverflow 上阅读了几个相关的线程，例如：

[如何使用 PhoneGap Javascript 在 android 中读取文件](https://stackoverflow.com/questions/8952950/how-to-read-file-in-android-using-phonegap-javascript)

[Android HTML5 FileApi 我可以从 SD 卡读取文件吗？](https://stackoverflow.com/questions/11145614/android-html5-fileapi-can-i-read-file-from-sd-card)

以及[如何创建新文件](https://stackoverflow.com/questions/11207099/how-to-create-a-new-file)等。然而，这些技术似乎都不起作用。

我正在使用带有 API 8 的 Nexus One。Android 应用程序加载了一个 URL：[http](http://www.mydomain.com/read_text_file.html) ://www.mydomain.com/read_text_file.html ，其中包含利用 PhoneGap 框架的 JavaScript。我正在尝试访问位于 SD 卡上的文件：`/sdcard/textfile.txt`. 我在 JavaScript 中将文件的路径指定为：`file:///sdcard/textfile.txt`

目前我的目标是在页面加载时触发来自 JavaScript 的警报并显示文件内容（这只是“测试文件”）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T07:42:42.060

代替 "file: ///sdcard/textfile.txt **"**尝试仅使用**"textfile.txt"**。

它似乎工作正常。

# c++ - 为什么 OpenGL 多边形会忽略两个顶点？

> ID：12487176
> 
> 赞同：3
> 
> 时间：2012-09-19T00:57:38.953
> 
> 标签：c++, opengl

我正在尝试绘制星形（这是我第一次尝试 OpenGL），但底部和左侧绘制为平坦的，即使我为它们设置了顶点。我在这里想念什么？

```
glBegin(GL_POLYGON);
    glVertex2i(30,0);
    glVertex2i(105,55);
    glVertex2i(180,0);
    glVertex2i(150,75);
    glVertex2i(210, 90);
    glVertex2i(135, 135);
    glVertex2i(105, 210);
    glVertex2i(75, 135);
    glVertex2i(0, 90);
    glVertex2i(55, 75);
glEnd(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T01:00:22.427

定义的多边形`GL_POLYGON` **必须**是凸的。你不能用它做星星，因为它有凸有凹的部分。

绘制星星的正确方法是定义构成星星的所有三角形并将它们绘制在`GL_TRIANGLES`. `GL_POLYGON`无论如何，现代opengl已弃用，因此明智的做法是不要过多关注它。

# c++ - 使用模板继承调用祖父构造函数

> ID：12487181
> 
> 赞同：4
> 
> 时间：2012-09-19T00:57:58.547
> 
> 标签：c++, templates, inheritance, c++11, variadic-templates

我选择使用模板继承以避免多重继承和虚拟继承。我的目标是让各种孩子（4 或 5 代或我无法控制的继承）拥有一个共同的函数调用，无论它们派生什么。

我的解决方案是这样插入模板继承：

```
template <typename BASE>
class common_call : public BASE {
public:
    void foo() { /*implementation independent of base*/ }
};

class child1 : public common_call <base1> {};
class child2 : public common_call <base2> {}; 
```

这有调用base的构造函数的问题。类 base1 和 base2（不是我写的）有不同的构造函数，我必须在初始化列表中调用它们。common_call 模板对这些构造函数一无所知，但子类按照它们当前直接继承的方式进行操作。

我有什么办法可以做到这一点：

```
class child3 : public common_call<base3>{
public:
    child3(param1, param2) : base3(param2) {/*do things here*/}
}; 
```

如果可能，我会尽量避免为每种类型的基础进行部分模板特化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:20:47.117

如果您`common_call`使用这样的可变参数模板提供模板化构造函数：

```
template <typename BASE>
class common_call : public BASE 
{
public:
    // C++11 variadic templates to define whole range of constructors
    template<typename... Args>
    common_call(Args&&... args)
    :
        BASE(std::forward<Args>(args)...)
    {}

    void foo() { /*implementation independent of base*/ }
}; 
```

`common_call`然后，您可以使用任何模板参数（例如）派生`base3`并调用该类定义的任何构造函数

```
class child3
:
    public common_call<base3>
{
public:
    child3(Type1 param1, Type2 param2)
    :
        common_call(param2), // call constructor overload with 1 parameter of Type2
        t1_(param1)          // initialize t1_ member
    {}

private:
    Type1 t1_;
}; 
```

# c# - 当使用来自不同程序集的步骤定义时，转到定义 (F12) 不起作用

> ID：12487185
> 
> 赞同：4
> 
> 时间：2012-09-19T00:58:21.820
> 
> 标签：c#, specflow

当使用来自不同装配的步骤定义时，转到定义 (F12) 不起作用。有没有办法让它工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T13:24:38.830

这可能是 Specflow 中的错误或类似问题。我有完全一样的问题。当尝试从功能文件转到步骤定义时，Visual Studio 说没有匹配的步骤绑定。虽然，在尝试运行测试时，它们运行正常，因此 Specflow 确实可以找到（并使用）匹配的步骤定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T02:33:25.797

SpecFlow 1.8 Visual Studio 扩展不完全支持外部程序集中的绑定。这在他们的文档中有所[说明](https://github.com/techtalk/SpecFlow/wiki/Use-Bindings-from-External-Assemblies)。SpecFlow 支持它们，但 Visual Studio 扩展仅部分支持。我不确定 1.9 是否解决了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-18T14:34:51.743

这可能很明显，但请确保安装 SpecFlow 扩展。

工具 -> 扩展/更新 -> 在线 -> 搜索“Specflow”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-04T10:18:13.037

我知道我晚饭有点晚了，但似乎 SpecFlow 将所有它的绑定数据存储在用户的 %temp% 文件夹中，并且这些文件是在功能文件和步骤文件之间映射的简单 .json 文件。

因此，当步骤与您的 .feature 文件位于相同的解决方案中时，SpecFlow 能够检测到正确的源文件和步骤方法的确切位置。

但是，当这些步骤在引用的 dll 中时，.json 配置文件不足以在 dll 中定位元数据，因此 F12 不起作用。

我猜这需要对引用的程序集进行某种设计时反射才能使 F12 工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-16T13:58:09.487

@ShonnLyga 非常感谢这非常有用

要从 DLL 引用程序集，您现在可以使用

```
<specFlow>
    <unitTestProvider name="NUnit" />
    <stepAssemblies>
      <stepAssembly assembly="YourDLLname" />
    </stepAssemblies>
</specFlow> 
```

# python - 在错误的地方孵化

> ID：12487186
> 
> 赞同：0
> 
> 时间：2012-09-19T00:58:41.323
> 
> 标签：python, matplotlib

![在此处输入图像描述](../Images/3f43d521198ebd23d6b71af0abe96427.png)当我将 y 轴更改为对数刻度时，为什么阴影在错误的位置？

如果我删除对数刻度，它们在 histogram-columns 内部，在对数刻度外部

```
from scipy.stats import norm
import matplotlib.mlab as mlab
import numpy as np
import matplotlib.pyplot as plt

data=np.genfromtxt(FileName)

Flow=data[:,1]

Max=np.amax(Flow)
Min=np.amin(Flow)

n, bins=np.histogram(Flow, 15)

n, bins, patches = plt.hist(Flow, 15, color= 'b',log=True, histtype='step',hatch='/')

(mu, sigma) = norm.fit(Flow)

y = mlab.normpdf( bins, mu, sigma)

plt.xlabel('Flow (m3/s)')

plt.ylabel('Number of Observations')

plt.title(r'$\mathrm{Flow:}\ \mu=%.3f,\ \sigma=%.3f, Min=%.3f, Max=%.3f$' %(mu, sigma, Min, Max))

plt.show() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:58:34.373

因为在绘制阶梯线时，Y轴数据的第一个元素始终为0，而​​对数刻度不能显示为0，所以将阶梯线的第一个点去掉。

您可以尝试为数据添加一个非常小的正值：

```
n, bins, patches = plt.hist(Flow+1e-12, 15, color= 'b',log=True, histtype='step',hatch='/') 
```

# asp.net-mvc - 模型绑定到 MVC 中的列表

> ID：12487188
> 
> 赞同：3
> 
> 时间：2012-09-19T00:59:00.263
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我无法在服务器端检索一个简单的列表。谁能指出我正确的方向？

```
public class TestList
{
    public string id { get; set; }
    public string name { get; set; }
    public string location { get; set; }
} 
```

形式：

```
@model List<SampleMVC4App.Controllers.TestList>
@{
    ViewBag.Title = "Index";
}
<h2>
    Index</h2>
@using (Html.BeginForm())
{           
    <input name="cust" value="1" type="hidden" />
    <input name="[1].id" value="de107502-284d-459b-80a1-762ce0860cd8" type="hidden" />    
    <input name="[1].name" value="test1" type="hidden" />    
    <input name="[1].location" value="location1" type="hidden" />    
    <a id="AddAnother" href="#">Add</a>
    <input type="submit" value="submit" />
} 
```

控制器：

```
[HttpPost]
public ActionResult Edit(ICollection<TestList> cust) **<---Null**
{
   return View();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T02:22:54.407

工作了几个小时后，我设法通过更改以下内容来解决

```
<input name="cust" value="1" type="hidden" /> 
```

到

```
<input name="Index" value="1" type="hidden" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T05:12:04.400

试试这个。你的模型是对的。在cshtml页面中试试这个

```
 @model List<SampleMVC4App.Controllers.TestList>
    @{
        ViewBag.Title = "Index";
    }
    <h2>
        Index</h2>
    @using (Html.BeginForm())
    {           
        foreach(SampleMVC4App.Controllers.TestList tl in Model)
{
     @model.hiddenfieldfor () // Like this your list will be rendered.
}
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T01:57:15.313

尝试使用 Edit(FormCollection fm) 从视图中获取所有表单元素。然后在您的 httpPost 操作中处理返回的变量。在查看返回的元素时，这将使调试变得更容易。

当我使用 HttpPOST [http://odetocode.com/blogs/scott/archive/2009/04/27/6-tips-for-asp-net-mvc-model-时，我发现 Scott Allen 的这篇文章很有帮助绑定.aspx](http://odetocode.com/blogs/scott/archive/2009/04/27/6-tips-for-asp-net-mvc-model-binding.aspx)

# javascript - CKEditor 中的 jQuery UI 可调整大小

> ID：12487190
> 
> 赞同：1
> 
> 时间：2012-09-19T00:59:03.940
> 
> 标签：javascript, jquery, ckeditor

我正在尝试在使用 jQuery UI Resizable 的 CKEditor 实例中获取一个。

我使用以下代码来设置 jQuery UI Resizable：

```
var ckinstance = CKEDITOR.instances.ckeditor-1;
ckinstance.on("instanceReady", function() {
    $(ckinstance.document.$).find(".gallery").resizable();
}); 
```

这似乎成功了一半。如果我检查 CKEditor 实例中的 HTML，则 div 具有用于句柄等的所有 jQuery UI Resizable 标签，但 div 似乎无法调整大小。

有谁知道为什么 div 不会调整大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:16:16.957

我不明白为什么 jQuery UI 可调整大小。CKEditor 已经有自己的调整大小 API：

*   [editor.resize()](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#resize)用于按需调整大小
*   [config.resize_enabled](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.config.html#.resize_enabled) , [config.resize_maxHeight](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.config.html#.resize_maxHeight) , [config.resize_maxWidth](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.config.html#.resize_maxWidth)等等 - 控制调整大小的过程

也许你应该更好地重新考虑你的目标。无论如何，如果您真的想使用 jQuery UI，请考虑以下 HTML：

```
<div id="resizable" style="overflow: hidden;">
    <textarea id="editor1">
        Initial content
    </textarea>
</div> 
```

以及以下 JavaScript：

```
(function( $ ) {
    var editor = CKEDITOR.replace( 'editor1', {
        width: '100%',
        resize_enabled: false       // Disable native CKEditor resize.
    });

    $( "#resizable" ).resizable({
        resize: function( event, ui ) {
            editor.resize( '100%', ui.size.height - 2 );        // Play with this.
        }
    });
})( jQuery ); 
```

编辑器将自动调整到您的`#resizable`容器。如果性能至关重要（旧浏览器），请考虑改用[停止事件](http://jqueryui.com/demos/resizable/#event-stop)。

玩得开心！

# limit - 计算所有 num_rows，忽略限制

> ID：12487191
> 
> 赞同：0
> 
> 时间：2012-09-19T00:59:06.443
> 
> 标签：limit, mysql-num-rows

即使我们在查询中添加 LIMIT，是否可以计算表中的所有行？

```
SELECT * FROM table LIMIT 0,10 
```

例如，该表包含 100 行，即使该查询有 LIMIT，我如何才能通过一个查询获得“100”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:10:51.810

i think it's easy use your PHP code to make `(0,10)` as varialbes like `($a,$b)`

then you do: `$count = $b-$a;`

# exception - ARM 程序集中的浮点异常处理

> ID：12487196
> 
> 赞同：2
> 
> 时间：2012-09-19T01:00:39.837
> 
> 标签：exception, exception-handling, arm

因此，如果我在子例程中出现异常，会发生什么？该函数是返回 NaN （或其他任何适当的）还是只是退出整个应用程序？

根据我在阅读 ARM 文档时收集到的信息，如果未设置异常陷阱启用位，那么它只会写回适当的 NaN 或无穷大。

有没有办法通过状态寄存器将信息传递给调用者，而不会在出现异常时立即退出应用程序？我想我正在寻找某种异常处理程序，但是我正在汇编中实现子例程，所以不确定如何编写异常陷阱处理程序。

# ruby-on-rails - Rails - 将控制器方法重构为应用程序控制器

> ID：12487198
> 
> 赞同：2
> 
> 时间：2012-09-19T01:00:43.650
> 
> 标签：ruby-on-rails

我刚刚进入 Rails，在理解一些我正在阅读的指南似乎认为理所当然的语法元素时遇到了一些麻烦。

今天下午我在做一个小示例项目，并试图重构一些代码。基本上，我想在我的导航栏中包含指向仅管理员控件的链接，这些控件取决于当前正在查看的页面。这是我的原始代码：

```
class RoomsController < ApplicationController
  before_filter :admin_controlls

  def new
  end

  def create
  end

  def edit
  end

  def update
  end

  def index
  end

  def destroy
  end

  private
    def admin_controlls
      @adminControlls = "rooms"
    end
end 
```

我的想法是，在我想要创建管理控件的每个控制器中，这段代码基本上是相同的。唯一的区别是我想传递给视图的标志变量@adminControlls 的值。

所以，我尝试了这个：

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  include SessionsHelper

  def admin_controlls(page)
      @adminControlls = page
  end
end 
```

并将房间控制器更改为：

```
class RoomsController < ApplicationController
  before_filter admin_controlls "rooms"

  def new
  end

  def create
  end

  def edit
  end

  def update
  end

  def index
  end

  def destroy
  end

end 
```

我认为我的困惑始于 before_filter 以及为什么在那里调用方法需要一个符号。我不知道如何在将字符串作为符号调用时将其传递给方法，并且我所有将 before 过滤器更改为调用方法（如上）的努力都失败了。总的来说，我只是觉得我没有掌握语法的一些微妙之处。如果有人有有用的资源，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T01:27:27.763

你可以试试这个：`before_filter { |c| c.admin_controlls "rooms" }`？可以在此处找到类似的问题：[如何将参数发送到前置过滤器？](https://stackoverflow.com/questions/675579/how-can-i-send-a-parameter-to-a-before-filter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:57:50.247

它需要一个符号的原因是对“before_filter”的调用在第一次加载控制器类时运行......但是您希望在每个单独的操作（不仅仅是一次）上调用实际的 before_filter*方法*（admin_controlls） .

因此，加载时 before_filter 调用存储了稍后调用的方法的名称......每次运行控制器操作时。

# asp.net-mvc - 基于路由数据值的 Ninject 注入

> ID：12487200
> 
> 赞同：5
> 
> 时间：2012-09-19T01:01:00.013
> 
> 标签：asp.net-mvc, inversion-of-control, ninject

我们有一个 ASP.NET MVC 应用程序，它有许多不同的领域。有 2 个区域使用我们服务层中的相同 C# 类，但针对不同的底层数据。我希望这些服务根据路由数据中的值获得不同的依赖关系。

很难解释，我在解释我的班级/地区名称。为了显示： ![调用逻辑](../Images/2e0b9baacd0353ea37b5d59ac454d500.png)

当“代码”在路由数据中时，我想在它不存在时注入不同的依赖项。

我知道您可以使用 .When() 方法进行条件绑定，但我不确定如何从那里获取路由数据。我也可以根据调用它的区域来做到这一点，但是在我的例子中这不是最好的（我认为我们可以在其他区域使用代码）

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:58:19.283

这对我有用（适用于标准路线配置`"{controller}/{action}/{id}"`）

**注入配置**

```
protected override Ninject.IKernel CreateKernel()
{
    var kernel = new StandardKernel();
    kernel.Bind<IService>()
        .To<ServiceA>()
        .When(x => IsRouteValueDefined("id", null));
    kernel.Bind<IService>()
        .To<ServiceB>()
        .When(x => !IsRouteValueDefined("id",null));
    return kernel;
}
// just sample condition implementation
public static bool IsRouteValueDefined(string routeKey, string routeValue)
{
    var mvcHanlder = (MvcHandler)HttpContext.Current.Handler;
    var routeValues = mvcHanlder.RequestContext.RouteData.Values;
    var containsRouteKey = routeValues.ContainsKey(routeKey);
    if (routeValue == null)
        return containsRouteKey;
    return containsRouteKey && routeValues[routeKey].ToString() == routeValue;
} 
```

它将使用

*   用于路由的 ServiceA：/home/index/1、/home/index/2 等。
*   路线的 ServiceB： / ， /home/index 等。

# mysql - JOIN 操作是否应该被多表 SELECT 替换？

> ID：12487202
> 
> 赞同：1
> 
> 时间：2012-09-19T01:01:10.793
> 
> 标签：mysql, sql, performance

鉴于这两个表：

```
A.a   B.b
-     -
1     3
2     4
3     5
4     6 
```

如果我想要**交叉匹配**，我可以两者都做

```
SELECT * FROM A, B WHERE A.a = B.b; # and
SELECT * FROM A INNER JOIN B ON (A.a = B.b) 
```

或者，如果我想要**左外连接**或**右外连接**

```
SELECT * FROM A,B WHERE A.a = B.b(+); # and
SELECT * FROM A LEFT OUTER JOIN B ON (A.a = B.b) 
```

但是查询语句之间是否存在引擎/性能差异？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T01:03:54.857

他们很可能在现代 RDBMS 上生成相同的计划。`JOIN`语法是自 1992 年以来的 ANSI SQL 语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T01:23:19.200

*理论上*，多选会首先从两个表中选择所有数据，将所有数据存储在内存中，然后将每个数据与每个人进行比较。但*实际上*，没有数据库会这样做。任何现代数据库都会优化此查询，以便多选和 JOIN 版本的处理方式相同。

# maven - 以提升的权限执行 pom.xml 部分

> ID：12487208
> 
> 赞同：0
> 
> 时间：2012-09-19T01:02:29.010
> 
> 标签：maven, pom.xml, maven-dependency-plugin

是否可以为 pom 中的特定目标授予/请求高级权限？

具体来说，我需要从存储库中检索工件，然后将该工件存储在用户没有写入权限的文件系统目录中。

理想情况下，我想提升用户权限只是为了将检索到的文件写入文件系统。

有没有办法使用 sudo 或类似的东西来使用 maven-dependency-plugin 复制目标？

它需要进入 pom.xml 以便在 Eclipse 中测试项目，所以

```
sudo mvn ... 
```

不是一个选择（无论这是否是一个好主意）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T01:50:14.443

我不认为这是可能的。但这个问题有点令人困惑。您想从用户无法访问的存储库中提取工件，或者您想将生成的工件安装在用户无法访问的本地存储库中？

在任何一种情况下，我都看不出为什么试图安装工件（或拉取依赖项）的用户会使用它无法访问的存储库。也许如果您提供一些背景信息，我们可以提出替代方案

# c# - 使用 .NET 的 API 依赖项

> ID：12487210
> 
> 赞同：0
> 
> 时间：2012-09-19T01:02:30.473
> 
> 标签：c#, .net, reflection, methods

所以，我的目标是为我的项目 API 创建一个“视图依赖项”。类似于 SQL Management Studio 对数据库对象的“查看依赖关系”，它显示了谁在使用这些对象以及这些对象依赖于谁。

因此，如果我的 NameSpace1.Class1.Method1 正在使用 NameSpace2.Class1.Method2，那么当我对 NameSpace1.Class1.Method1 使用“查看依赖项”时，NameSpace2.Class1.Method2 应该列为 NameSpace1.Class1.Method1 所依赖的方法.

我知道反射以及它是/应该如何用于在运行时获取方法列表等等。我正在寻找一种方法来提取从相关方法中调用的其他方法。任何指向这个方向的指针都会受到赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T01:21:19.203

获取类，即每个类的所有属性/方法/每个方法的参数 - 这样您就可以使用已经是 .Net Framework 一部分的代码获取某些依赖项的信息。

[要获得其余部分，您需要获取每个方法的 IL，并从MethodBase.GetMethodBody](http://msdn.microsoft.com/en-us/library/system.reflection.methodbase.getmethodbody.aspx)开始查看正在调用的内容。有允许解析 IL 的现有项目，即参见[Traverse ac# 方法和分析方法体](https://stackoverflow.com/questions/3413779/traverse-a-c-sharp-method-and-anazlye-the-method-body)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T05:53:58.607

如果您仔细分析 ILSpy 的代码库，您可能会遇到类似的功能（使用分析器），

[https://github.com/icsharpcode/ILSpy](https://github.com/icsharpcode/ILSpy)

由于这是一个开源项目，您可以按照开源许可证重用其代码。

# java - 使用线程隔离应用程序功能

> ID：12487213
> 
> 赞同：0
> 
> 时间：2012-09-19T01:02:57.010
> 
> 标签：java, jakarta-ee

我正在构建一个 Java EE 应用程序，其中包括处理 AMQP“主题”的功能。我的想法是创建一个通过 contextInitialized 方法初始化的 Listener 类`javax.servlet.ServletContextEvent`。

这个类将运行两个单独的线程；一个将侦听消息并将接收到的消息添加到 FIFO 队列中，第二个将处理来自队列的消息。这样做的原因是我不认为 AMQP 客户端会受到消息处理延迟的影响。

在具有多个“侦听器”的复杂应用程序中，我最终可能会遇到大量运行异步任务的线程。我没有足够的经验从架构的角度知道以这种方式将应用程序分成多个线程是否是一种合理的方法？

也许每条消息都应该在其“自己的”线程中处理，而不是由队列进程处理。任何关于使用多线程管理应用程序流或我提出的方法的建议或指导将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T01:31:56.063

在单独的线程中运行东西并不一定会让它们运行得更快。

在单机上运行的系统的吞吐量受到机器的处理带宽的限制；即内核的数量和速度、内存系统、磁盘和网络 I/O 等。在多线程应用程序中，所有线程都有效地共享资源。因此，例如，如果您在给定时刻拥有比核心更多的可运行线程，则某些线程将等待被调度到代码中。

第二个问题是线程通常需要相互通信和/或更新共享数据结构。这两者都需要某种同步。如果你有很多这样的事情发生，同步就有可能成为降低吞吐量的瓶颈。

* * *

那么这如何应用于您的系统呢？好吧，潜在的问题是正在执行后台处理的额外线程将使用资源，如果线程的工作过多： - 它们可能无法跟上，队列长度可能会超出控制，导致长时间的延迟甚至更糟，并且 - 这可能会干扰听众接受新消息的能力。

从性能的角度来看，您要避免的一件事是线程过多。超过某个点（取决于应用程序），添加更多线程实际上会由于各种原因而降低吞吐量。根据经验，尽量将线程数限制为内核数的 1 到 2 倍。

如果您认为您的系统可能会被更多可以处理的消息淹没，则需要对其进行设计以减轻负载；例如，通过停止接受新请求或转储现有请求。您不想要无限的队列或无限数量的工作线程，这些可能会导致灾难性的反馈和系统在重负载下崩溃/崩溃。（还要注意，由于未检测到的并发错误，重负载会导致更多的争用并增加失败的机会。）

* * *

更新：

1.  似乎 AMQP 具有使用“流帧”的内置流控制机制。您可能应该尝试利用它，而不是在内部进行自己的流量控制/负载管理。
2.  消息持久性*本身*无济于事。虽然您可以缓冲大量消息流量，但它无法帮助您处理消息生成和处理速率之间的不匹配。（持久性机制也会导致消息传输速率变慢，尽管这可能不是您关心的问题。）
3.  对不同服务进行单独的处理阶段可以提高吞吐量，但另一方面是您有更多的消息传递开销。底线是这种分区*会*减少而不是增加吞吐量。
4.  如果您希望您的解决方案扩大规模，您需要对其进行设计，以便您可以复制您的服务器；例如，与其将新请求发送到一台服务器，不如将它们拆分到具有独立持久性后端的 N 台服务器上。

# asp.net-mvc - 我应该将我的 API 密钥放在哪里？

> ID：12487214
> 
> 赞同：2
> 
> 时间：2012-09-19T01:03:00.693
> 
> 标签：asp.net-mvc, api-key

我正在构建一个需要开发人员或 API 密钥才能访问的 Web API。要求 API 密钥在查询字符串中还是在请求标头中更好？

ASP.NET 网络 API 4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T01:05:44.307

一般来说，我认为请求标头是最佳的，但是如果您打算从浏览器调用 API，则应该使用请求参数：从浏览器代码中获取请求标头通常比从服务器端代码中更难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T01:07:35.523

在我看来，为此使用 HTTP 标头更干净。它允许您保留 url 仅用于识别要访问的资源，同时使用标头进行协议和访问控制。

# c# - jQuery/JavaScript 或 CSS 如何从左到右重新排列控件到从右到左布局？

> ID：12487216
> 
> 赞同：0
> 
> 时间：2012-09-19T01:03:32.183
> 
> 标签：c#, asp.net, right-to-left

向大家问好，

我有一些使用 ActiveReports 在 ASP.NET 中制作的报告，我有超过 500 个英文报告，我想将报告的布局从左到右（英语）更改为从右到左（希伯来语/阿拉伯语）

例如，假设报告具有以下列：

```
Column1 Column2 Column3 Column4 Column5 
```

我想更改页面的布局，以便以相反的顺序重新排列列：

```
Column5 Column4 Column3 Column2 Column1 
```

就好像我正在通过镜子看页面。

是否可以使用 jQuery 或 JavaScript 甚至 CSS 来做到这一点？如果是这样，你能给我一些提示吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T16:48:26.507

埃里克

为了使列显示不同，需要将报告重新设计为从右到左显示。您可以使用 ActiveReports 设计器或在 Visual Studio 中执行此操作。也可以使用 API 更新布局，然后将报告保存回来。

我很想知道 jq 或 js 将如何实现这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T02:46:05.133

在 CSS 中，您可以将列向右浮动，这将反转您将它们放在屏幕上的顺序。

```
 .floatRight
    {
        float: right;
    }

<div class="floatRight">1</div>
<div class="floatRight">2,</div> 
```

这将显示为 2,1

或者在 JQuery 中看看这个问题：

[使用 CSS 或 jQuery 对 div 进行反向排序？](https://stackoverflow.com/questions/6062630/reverse-sort-divs-using-css-or-jquery)

# c#-4.0 - 制作LinkedList：按顺序添加

> ID：12487218
> 
> 赞同：0
> 
> 时间：2012-09-19T01:03:42.150
> 
> 标签：c#-4.0, recursion

我需要创建一个`LinkedList`. 我有一个`Node`用`int`属性和`Node`属性调用的类。我需要能够按降序将项目添加到 LinkedList。

如果给定的数字高于列表中的最高值，我有可以将项目添加到列表开头的代码。与最低的数字相同。尝试`Node`在列表中间添加 a 时会出现问题。我需要使用递归。我已经用它来找到最高和最低的数字，但我无法为最后一种情况编写代码（在中间添加）。

你能给我一个提示吗？也许告诉我哪个是基本情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:32:25.233

解决了它：

```
Node root = null;

    public void Add(int data)
    {
        Node m = new Node();
        m.data = data;

        if (root == null)
        {
            root = new Node();
            root.data = data;
            root.Next = null;
        }

        else if (root.Next == null)
        {                    
            if (m.data > root.data)
            {
                Node tempRoot = root;
                root = m;
                m.Next = tempRoot;
                tempRoot.Next = null;
            }

            else
            {
                root.Next = m;
                m.Next = null;
            }
        }

        else if (m.data > root.data)
        {
            m.Next = root;
            root = m;
        }

        else
        {
            Node temp = root;
            Node x = Insert(temp, m);

            for (; temp != x; temp = temp.Next) ;
            m.Next = temp.Next;
            temp.Next = m;
        }
    }

    public Node Insert(Node n, Node insertMe)
    {
        if (n.Next == null)
        {
            return n;
        }

        else
        {
            if (insertMe.data >= Insert(n.Next, insertMe).data)
            {
                return n;
            }

            else
            {
                return Insert(n.Next, insertMe);
            }
        }
    } 
```

# ios - 导入 ios 证书错误，“此证书由未知机构签名”。

> ID：12487223
> 
> 赞同：2
> 
> 时间：2012-09-19T01:04:14.333
> 
> 标签：ios, certificate

我的团队共享一个苹果开发者认证，其他团队成员可以正常导入，但是在我的MAC上，总是报错“This certificate was signed by an unknown authority”，不知道是不是我这边KeyChain Access的问题，验证/修复没有发现任何缺陷。

经过多次尝试仍然没有找到解决方案，请分享任何建议？我只是想知道如何删除 KeyChain Access 然后安装一个新的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-06T11:44:30.730

我通过将所需的证书导入我的*登录*钥匙串解决了我的问题。

# iphone - 在运行时处理异常？

> ID：12487224
> 
> 赞同：0
> 
> 时间：2012-09-19T01:04:56.840
> 
> 标签：iphone, objective-c, arrays, ipad, exception

在我的 iPhone 应用程序中，我需要从数组中获取一些值，如下所示：

```
string1 = [array objectAtIndex:0];
string2 = [array objectAtIndex:1]; 
```

但是，有时，根据用户数据，该对象不会存在于数组中。当调用这样的行并且对象不存在时，我的应用程序自然会崩溃并出现越界错误。

那么我该如何解决呢？如何检测该对象何时不存在并相应地设置字符串？

例如，如果索引处的对象确实存在，则 string = ...

否则，如果索引处不存在对象，则字符串 = ...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T01:17:51.667

NSArray 有一个 count 属性，您可以使用它来确定索引是否有效。

```
if(array.count < index)
{ string1 = [array objectAtIndex:index]; } 
else
{ string1 = @"Not found"; } 
```

如果您希望这是通用功能，您可以使用类别将其作为方法添加到 NSArray：

```
@interface NSArray()
- (NSString*) objectAtIndexWithCheck:(int) index;
@end

@implementation NSArray
-(NSString*) objectAtIndexWithCheck:(int) index
{
   if(self.count < index)
   { return [self objectAtIndex:index]; }
   else
   { return @"Not found"; }
}
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T01:24:10.763

您的意思是没有具有该索引号的数组元素，或者该位置的对象已被收集？如果是前者，那么只需将您的数组索引值与`array.count`. 您提到的“越界错误”表明这是这种情况。

但是，如果您的意思是后一种情况，那么请修复您的错误——除非您遇到严重的堆管理错误，否则 NSArray 中的条目绝不应该是无效地址，并且没有可靠的方法可以通过异常处理从这种情况中恢复。

# ember.js - 有没有办法让观察者去抖动

> ID：12487227
> 
> 赞同：14
> 
> 时间：2012-09-19T01:05:24.427
> 
> 标签：ember.js

我在控制器中有一个观察者，它在进行更改时保存对象。问题是它发生得太频繁了。

```
changed: ( ->
  #save code goes here 
).observes("description") 
```

我在[想像 http://underscorejs.org/#debounce](http://underscorejs.org/#debounce)这样的东西需要吗？

此外，当属性通过键输入更改时，似乎将对象保存两次，然后在从返回的服务器值设置属性时再次保存。

任何帮助都会很棒我正试图将我的头包裹在余烬上。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-10-09T04:47:14.320

从 Ember 1.0.0 开始，您可以通过将 debounce 调用包装在另一个观察的函数中，在任何 View 或 Object 中获得一个 debounce 观察者。`Ember.run.debounce`不返回函数，而是将函数句柄添加到字典中。随后每次使用该函数句柄调用 Ember.run.debounce 时，它​​都会检查字典以查看上次调用该函数的时间并按预期对其进行去抖动。

```
var MyView = Ember.View.extend({
    calledRarely: function() {
        console.log("This will log rarely.");
    },

    calledOften: function() {
        console.log("This will log often.");
        Ember.run.debounce(this, this.calledRarely, 1000);
    }.observes("propertyThatChangesOften")
}); 
```

在这里，`this.calledOften`它根本没有去抖动，因此`Ember.run.debounce`实际上会在属性更改时被调用。`this.calledRarely`在我们的去抖超时完成之前它不会调用。

# fortran - Fortran 中的动态内存分配

> ID：12487228
> 
> 赞同：0
> 
> 时间：2012-09-19T01:05:39.030
> 
> 标签：fortran, computer-science

我需要一些帮助来动态分配数组。

我有一个数组，其大小在每一步都不断变化 - 我从一个行向量开始，并在循环的每一步添加另一个行向量。我需要使用这个新数组进行进一步计算。

我一直在尝试将数组声明为可分配的，然后在 do-loop 中分配它们，但我无法让它正常工作。

当您为该特定数组取消分配内存时，我仍然不太清楚会发生什么。如果数据丢失，那么在释放之前存储它，我是否使用另一个数组？如何指定该数组的大小？

任何帮助将不胜感激。

```
! Program to generate a matrix whose rows are linearly independent vectors. 
! The elements of the matrix are either 1 or -1

   program trial

   implicit none 
   integer, parameter ::n=10,p=5   !where 'p' gives the no. of rows, & 'n' gives the no. of columns
   real(kind=8),dimension(p,n) ::z1 
! The array to be generated - this needs to be made allocatable
! I'll need the values of this array for further calculations, so should I store
! them in another array?

   integer::i,j,k,s1  !counters used
   real(kind=8),dimension(n)::x

   do i=1,p
15  call random_number(x) !generate random row vectors 
    z1(i,:)=x

! To make the array elements 1's and -1's
    do j=1,n
        if (z1(i,j).ge.0.5) then
            z1(i,j)=1.d0
!           write(*,*),z1(i,j)
        else
            z1(i,j)=-1.d0
!           write(*,*),z1(i,j)
        endif
    enddo

! Checking the output so far
    print*,'Z1'
    do k=1,i
        write(*,*)(z1(k,j),j=1,n)
    enddo

! To ckeck for linear independence, get the reduced row echelon form. Check the rows
! of the rref array, if any of the rows contains only zeros, the vectors are not
! linearly independent. Hence, regenerate that particular row of the array. 

! Check for linear independence as each row is added

    call to_rref(z1)
        do k=1,i
            s1=0
            do j=1,n
            if(z1(k,j)==0)then
                s1=s1+1
            endif
            if (s1==n) then
                print *,'THE VECTORS ARE NOT LINEARLY INDEPENDENT'
            goto 15
            endif
            enddo
        enddo

    do k=1,i
        write(*,*)(z1(k,j),j=1,n)
    enddo
   enddo

   end

! Subroutine for getting the reduced row echelon form 
subroutine to_rref(matrix)
    implicit none
    real, dimension(:,:), intent(inout) :: matrix

    integer :: pivot, norow, nocolumn
    integer :: r, i
    real, dimension(:), allocatable :: trow

    pivot = 1
    norow = size(matrix, 1)
    nocolumn = size(matrix, 2)

    allocate(trow(nocolumn))

    do r = 1, norow
       if ( nocolumn <= pivot ) exit
       i = r
       do while ( matrix(i, pivot) == 0 )
          i = i + 1
          if ( norow == i ) then
             i = r
             pivot = pivot + 1
             if ( nocolumn == pivot ) return
          end if
       end do
       trow = matrix(i, :)
       matrix(i, :) = matrix(r, :)
       matrix(r, :) = trow
       matrix(r, :) = matrix(r, :) / matrix(r, pivot)
       do i = 1, norow
          if ( i /= r ) matrix(i, :) = matrix(i, :) - matrix(r, :) * matrix(i, pivot) 
       end do
       pivot = pivot + 1
    end do
    deallocate(trow)
  end subroutine to_rref 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T01:38:54.363

是的，当您释放内存时，您必须将其视为不复存在。在 Fortran 95 和更早版本中，如果您希望扩展一个数组，您必须将数据复制到另一个数组，取消分配数组，重新分配并将部分复制回来。Fortran 2003 提供了一个简化过程的内在过程：move_alloc。

# common-lisp - 为什么 ECL 可以计算阶乘（1000）？

> ID：12487229
> 
> 赞同：-1
> 
> 时间：2012-09-19T01:05:41.657
> 
> 标签：common-lisp, ecl

ECL 可以计算 fac(1000) 真是太棒了！ECL 怎么做呢？

```
 >(defun fac (n) (if (= n 1) 1 (* n (fac (- n 1)))))
 >(disassemble #'fac)
 #(FAC N = - * #<bytecompiled-function FAC> SI:FSET)
 Name:           FAC                                                                 
    0    POP     REQ
    1    BIND    N
    3    NOMORE
    4    PUSHV   0
    6    PUSH    1
    8    CALLG   2,=
   11    JNIL    18
   13    QUOTE   1
   15    SET     VALUES(0),REG0
   16    JMP     35
   18    PUSHV   0
   20    PUSHV   0
   22    PUSH    1
   24    CALLG   2,-
   27    PUSH    VALUES(0)
   28    CALLG   1,FAC
   31    PUSH    VALUES(0)
   32    CALLG   2,*
   35    EXIT 
```

我对 ECL 字节码知之甚少。似乎没有尾递归优化。有高手能解释一下吗？

真挚地！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:17:49.457

ECL 的解释器目前不做尾调用优化。它可以很容易地实现，但我没有时间去做：基本上它相当于在字节码编译器中添加一个标志来表示尾调用。在任何情况下，正如这里所指出的，ECL 解释器使用动态分配的堆栈，以及用于解释器递归的 C 堆栈。这意味着您将获得大约 1000 个 C 堆栈帧（小）和一些简洁的列表来跟踪环境。目前它就足够了，没关系。但是，在 C 端，ECL 确实检测到自身的尾调用并可以优化其中的许多，并且在其他情况下，GCC 会优化相互尾调用（对位于尾部位置的其他函数的调用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T01:22:21.550

我对 ECL 一无所知，但我从您编译的源代码中看到，然后在反汇编中看到，编译器可以正常工作。该函数被定义为对自身的递归调用。我在拆卸时看到的一样。因此，在调用此函数期间可能出现的唯一问题是堆栈溢出和算术溢出。

# drop-down-menu - 创建下拉列表zendframework 2

> ID：12487232
> 
> 赞同：0
> 
> 时间：2012-09-19T01:05:48.353
> 
> 标签：drop-down-menu, zend-form, zend-framework2

> **可能重复：**
> [在 Zend Framework 2 中创建一个下拉列表](https://stackoverflow.com/questions/12460840/create-a-drop-down-list-in-zend-framework-2)

我开始使用 zf2 ..

我想知道如何在从数据库中获取选项的表单中创建一个下拉列表？

这可能是一个新手问题，但我很难做到。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:44:48.320

你可以这样做：

创建一个扩展 Fieldset 的类。

如果您想对该字段进行某种验证，请实现类 InputFilterProviderInterface。

要访问服务管理器，需要实现ServiceLocatorAwareInterface和setServiceLocator()和getServiceLocator()两个方法。

默认情况下，Zend Framework MVC 注册一个初始化器，它将 ServiceManager 实例注入到任何实现 Zend\ServiceManager\ServiceLocatorAwareInterface 的类中。[读这个](http://zend-framework-2-doc.readthedocs.org/en/latest/modules/zend.service.manager.quick.start.html)

```
namespace Users\Form;

use Zend\InputFilter\InputFilterProviderInterface;
use Zend\ServiceManager\ServiceLocatorAwareInterface;
use Zend\ServiceManager\ServiceLocatorInterface;
use Zend\Form\Element;
use Zend\Form\Fieldset;

class GroupsFieldset extends Fieldset implements InputFilterProviderInterface, 
        ServiceLocatorAwareInterface
{

    /**
     * @var ServiceLocatorInterface
     */
    protected $serviceLocator;

    public function __construct ()
    {
        parent::__construct('groups');

        $this->setLabel('Group');

        $this->setName('groups');

        $sl = $this->getServiceLocator();

        $sm = $sl->get('Users\Model\GroupsTable');

        $groups = $sm->fetchAll();

        $select = new Element\Select('groups');

        $options = array();

        foreach ($groups as $group) {
            $options[$group->id] = $group->name;
        }

        $select->setValueOptions($options);
    }

    /**
     * Set serviceManager instance
     *
     * @param  ServiceLocatorInterface $serviceLocator
     * @return void
     */
    public function setServiceLocator(ServiceLocatorInterface $serviceLocator)
    {
        $this->serviceLocator = $serviceLocator;
        return $this;
    }

    /**
     * Retrieve serviceManager instance
     *
     * @return ServiceLocatorInterface
     */
    public function getServiceLocator()
    {
        return $this->serviceLocator;
    }

    /**
     * 
     * @return multitype:multitype:boolean
     */
    public function getInputFilterSpecification ()
    {
        return array(
                'name' => array(
                        'required' => true
                )
        );
    }
} 
```

比在 module.php 中

```
public function getServiceConfig()
{
    return array(
            'factories' => array(
                    'Users\Model\UsersTable' =>  function($sm) {
                        $dbAdapter1 = $sm->get('Zend\Db\Adapter\Adapter');
                        $table1     = new UsersTable($dbAdapter1);
                        return $table1;
                    }, // Adapter and table groups here
                    'Users\Model\GroupsTable' =>  function($sm) {
                        $dbAdapter2 = $sm->get('Zend\Db\Adapter\Adapter');
                        $table2     = new GroupsTable($dbAdapter2);
                        return $table2;
                    },
            ),
    );
} 
```

最后在你的表格中

```
 $groups = new GroupsFieldset();
    $this->add($groups); 
```

# javascript - 弹出加载时停止javascript音频

> ID：12487244
> 
> 赞同：0
> 
> 时间：2012-09-19T01:07:15.647
> 
> 标签：javascript, audio, video

这是有问题的页面：

```
http://49.156.27.50/~dmg/index-members.php#!the-fun-begins.html 
```

该站点在页面加载时自动播放音频。在同一页面上是一个视频链接，该视频作为弹出窗口加载（底部的灰色框）。我需要在视频播放时暂停或停止音频。

我正在使用 Soundmanager2 播放音频：

```
<script type="text/javascript">
soundManager.play('more-than-a-room');
</script> 
```

要在加载新页面时停止音频，我正在使用这个：

```
<script type="text/javascript">
soundManager.stopAll();
</script> 
```

那么当用户单击弹出链接时，有没有办法暂停或停止音频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T01:14:45.783

如果您也使用 jquery：

```
$('#theidofyourlink').on("click", function(event){
    soundManager.stopAll();
}); 
```

或者，如果您只是使用简单的 javascript，请将 onclick 事件添加到您的 href 元素

```
<a href="..." onclick="soundManager.stopAll();"> 
```

# java - Java 和 XML：CRUD

> ID：12487247
> 
> 赞同：1
> 
> 时间：2012-09-19T01:07:52.110
> 
> 标签：java, xml, crud

我想知道如何在 Java 中操作 XML 文件。

我知道如何进行创建和阅读，我只是想念如何进行更新和删除它们。如果有人知道有教程的网站，我将不胜感激。我也想知道如何操作记录。

这是我到目前为止所拥有的：

```
/*
 * Classe de Lista de Compras
 */
package xml01;

public class ListaCompras {
    public String descricao;
    public int quant;
    public double valor;
}

package xml01;

import java.io.File;
import java.io.FileWriter;
import java.util.Scanner;

public class GravarLer {

    static void gravar(String xml) {
        try {
            FileWriter w = new FileWriter("teste.xml");
            w.write(xml);
            w.close();
        } catch (Exception e) {
            System.out.println("Erro ao gravar XML: " + e);
        }
    }

    static String ler() {
        try {
            Scanner in = new Scanner(new File("testeler.xml"));
            StringBuilder sb = new StringBuilder();
            while (in.hasNext()) {
                sb.append(in.next());
            }
            in.close();
            return sb.toString();
        } catch (Exception e) {
            System.out.println("Erro ao ler XML: " + e);
        }
        return "";
    }
}

/*
 * XStream
 */
package xml01;

import com.thoughtworks.xstream.XStream;

public class Xml01 {

    public static void main(String[] args) {
        // Cria um vetor de registros ListaCompras
        ListaCompras lista[] = new ListaCompras[10];
        // Inicializa os registros com numeros aleatorios
        for (int i = 0; i < lista.length; i++) {
            lista[i] = new ListaCompras();
            lista[i].quant = i + 2000 * i;
            lista[i].valor = i + 0.5 * 11 * i;
        }

        lista[0].descricao = "Arroz";
        lista[1].descricao = "Feijao";
        lista[2].descricao = "Macarrao";
        lista[3].descricao = "Agua mineral";
        lista[4].descricao = "Leite";
        lista[5].descricao = "PÃ£o de forma";
        lista[6].descricao = "Manteiga";
        lista[7].descricao = "Banana";
        lista[8].descricao = "Laranja";
        lista[9].descricao = "MaÃ§Ã£";

        // Inicializa o XStream
        XStream xstream = new XStream();
        // Converte o objeto ListaCompras para XML
        String xml = xstream.toXML(lista);
        // Imprime na tela
        System.out.println(xml);

        // Chamando a classe GravarLer
        GravarLer ClasseGravar = new GravarLer();
        // Chamando o metodo
        GravarLer.gravar(xml);
        // GravarLer.ler();
        // System.out.println(GravarLer.ler());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T02:24:08.760

我只是从我的个人代码库中提取大部分内容。它缺少xPath，但基本思想就在那里

```
public final class TestXMLCRUD {

    public static void main(String[] args) {
        new TestXMLCRUD();
    }

    public TestXMLCRUD() {

        try {

            Document doc = createNewDocument();
            setRootNode(doc, "ThisIsTheRootNode");

            Element child = addElement(doc, "ThisIsAChildNodeOfRoot");
            addElement(doc, child, "ThisIsAChildNode", "I Have text!");
            System.out.println(save(doc));

        } catch (TransformerConfigurationException ex) {
            ex.printStackTrace();
        } catch (IOException ex) {
            ex.printStackTrace();
        } catch (TransformerException ex) {
            ex.printStackTrace();
        } catch (ParserConfigurationException ex) {
            ex.printStackTrace();
        } catch (DOMException ex) {
            ex.printStackTrace();
        }

    }
    private DocumentBuilder builder;

    public Node getRootNode(Document xmlDoc) {

        Node nRoot = null;

        if (xmlDoc != null) {

            nRoot = xmlDoc.getDocumentElement();

        }

        return nRoot;

    }

    public Document createNewDocument() throws ParserConfigurationException {

        Document doc = getDocumentBuilder().newDocument();
        Element root = doc.createElement("root");
        doc.adoptNode(root);
        doc.appendChild(root);

        return doc;

    }

    public Element setRootNode(Document xmlDoc, String name) {

        removeNode(getRootNode(xmlDoc));
        Element root = xmlDoc.createElement(name);
        xmlDoc.adoptNode(root);
        xmlDoc.appendChild(root);

        return root;

    }

    public Document loadDocument(InputStream is) throws ParserConfigurationException, SAXException, IOException {

        return getDocumentBuilder().parse(is);

    }

    public Document loadDocument(File file) throws ParserConfigurationException, SAXException, IOException {

        return getDocumentBuilder().parse(file);

    }

    public Document loadDocumentFromString(String xml) throws ParserConfigurationException, SAXException, IOException {

        Document doc = null;

        ByteArrayInputStream bais = null;

        //StringReader sr = null;
        //InputSource is = null;
        try {

            bais = new ByteArrayInputStream(xml.getBytes());

            doc = loadDocument(bais);

        } finally {

//            try { sr.close(); } catch (Exception e) { }
            try {
                bais.close();
            } catch (Exception e) {
            }

        }

        return doc;

    }

    protected DocumentBuilder getDocumentBuilder() throws ParserConfigurationException {

        if (builder == null) {

            DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
            factory.setNamespaceAware(false); // You might want to change this...
            builder = factory.newDocumentBuilder();

        }

        return builder;

    }

    public Element addElement(Document xmlDoc, String name) {

        Element child = xmlDoc.createElement(name);
        getRootNode(xmlDoc).appendChild(child);

        return child;

    }

    public Node addElement(Document xmlDoc, Node node, String name) {

        Node child = xmlDoc.createElement(name);
        node.appendChild(child);

        return child;

    }

    public Node addElement(Document xmlDoc, Node node, String name, String text) {

        Node child = addElement(xmlDoc, node, name);
        child.setTextContent(text);

        return child;

    }

    public void removeNode(Node parentNode) {

        if (parentNode != null) {

            while (parentNode.hasChildNodes()) {

                removeNode(parentNode.getFirstChild());

            }

            Node parent = parentNode.getParentNode();
            if (parent != null) {

                parent.removeChild(parentNode);

                NodeList childNodes = parent.getChildNodes();
                if (childNodes.getLength() > 0) {

                    List<Node> lstTextNodes = new ArrayList<Node>(childNodes.getLength());
                    for (int index = 0; index < childNodes.getLength(); index++) {

                        Node childNode = childNodes.item(index);
                        if (childNode.getNodeType() == Node.TEXT_NODE) {

                            lstTextNodes.add(childNode);

                        }

                    }

                    for (Node node : lstTextNodes) {

                        removeNode(node);

                    }

                }

            }

        }

    }

    public void save(Document xmlDoc, File fFile) throws TransformerConfigurationException, TransformerException, IOException {

        FileOutputStream fos = null;

        try {

            fos = new FileOutputStream(fFile);
            save(xmlDoc, fos);

            fos.flush();

        } finally {

            try {
                fos.close();
            } catch (Exception e) {
            }

        }

    }

    public void save(Document xmlDoc, OutputStream os) throws TransformerConfigurationException, TransformerException, IOException {

        OutputStreamWriter osw = null;

        try {

            osw = new OutputStreamWriter(os);
            save(xmlDoc, osw);
            osw.flush();

        } finally {

            try {
                osw.close();
            } catch (Exception exp) {
            }

        }

    }

    public String save(Document xmlDoc) throws TransformerConfigurationException, IOException, TransformerException {

        String sValue = null;

        ByteArrayOutputStream baos = null;

        try {

            baos = new ByteArrayOutputStream();
            save(xmlDoc, baos);
            baos.flush();
            sValue = new String(baos.toByteArray());

        } finally {

            try {
                baos.close();
            } catch (Exception exp) {
            }

        }

        return sValue;

    }

    public void save(Document xmlDoc, Writer os) throws TransformerConfigurationException, TransformerException {

        Transformer tf = TransformerFactory.newInstance().newTransformer();
        tf.setOutputProperty(OutputKeys.INDENT, "yes");
        tf.setOutputProperty(OutputKeys.METHOD, "xml");
        tf.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "4");

        DOMSource domSource = new DOMSource(xmlDoc);
        StreamResult sr = new StreamResult(os);
        tf.transform(domSource, sr);

    }
} 
```

这会产生...

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<ThisIsTheRootNode>
    <ThisIsAChildNodeOfRoot>
        <ThisIsAChildNode>I Have text!</ThisIsAChildNode>
    </ThisIsAChildNodeOfRoot>
</ThisIsTheRootNode> 
```

一旦你消化了所有这些，我就会通读一遍

*   [Java xPath API](http://www.ibm.com/developerworks/library/x-javaxpathapi/index.html)
*   [如何在 Java 中使用 XPath 读取 XML](https://stackoverflow.com/questions/2811001/how-to-read-xml-using-xpath-in-java)

# ios - 捆绑种子 ID：团队 ID 与现有？

> ID：12487248
> 
> 赞同：1
> 
> 时间：2012-09-19T01:08:07.007
> 
> 标签：ios, apple-push-notifications, provisioning, app-id

我正在创建一个新的显式应用 ID，因为我想使用 APNS，而我只有 Xcode 为我创建的通配符应用 ID，例如 A1B2C3D4E5.*。

对于“捆绑种子 ID（应用 ID 前缀）”，我应该“使用您的团队 ID 还是选择现有的捆绑种子 ID”？

[iOS Provisioning Portal : Create App ID](https://developer.apple.com/ios/manage/bundles/add.action) page说：

> 如果您正在创建一组将共享相同 Keychain 访问权限的应用程序，请为每个应用程序的 App ID 使用相同的捆绑种子 ID。

我的团队 ID 是什么，我应该什么时候使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:14:42.263

我最终使用了我的团队 ID（它生成了一个新的捆绑种子 ID）。这是我的推理（Acani 是我的应用程序的名称。）。

> 好的。我要使用团队 ID 还是现有 ID？
> 
> 我认为现有的ID。
> 
> 为什么？如果您使用现有 ID，那么您构建的任何应用程序都将与 Acani 共享钥匙串访问权限。
> 
> 所以？
> 
> 那么，你想要吗？
> 
> 嗯，不是真的......但是，如果我想制作另一个应用程序怎么办。我希望它与 Acani 共享钥匙串访问权限？而且，它不需要明确的应用程序 ID？然后，我必须无缘无故地创建另一个通配符应用程序 ID。实际上，如果 Apple 自动执行此操作会怎样（我对此表示怀疑。[它没有]）。
> 
> 好的。所以，大不了。您将拥有三个应用程序 ID。不过，一切都会更有条理。一个用于开发的应用 ID。一个用于 Acani，另一个用于您要与 Acani 共享钥匙串访问权限的其他应用程序。
> 
> 好的。听起来不错。:)
> 
> 你确定吗？
> 
> 不，我不确定……但如果我一直为此烦恼，我什么都不会做……我只是坐在这里……
> 
> 好吧，我想确保我做出最好的选择。
> 
> 没有最好的选择。此外，这并不重要。
> 
> 我会说使用新的团队 ID，因为这就是您的意图。我的意思是，您现在不打算与任何其他应用程序共享钥匙串访问权限。而且，将来，如果您是，您可以创建另一个应用程序 ID。就是这么简单。
> 
> 好的。但是，为什么不直接使用现有的应用 ID？
> 
> 嗯...你可以，但是这样，如果你想让开发人员工作而不让他们访问 Acani 的 Keychain 服务，你可以。:)
> 
> 好的。听起来很完美！

有时，如果我没有其他人可以谈论事情，只需在文本编辑器中自言自语就会令人欣慰...... :) #protip

# c# - 在 WinrRT 应用程序中显示 HTML 内容

> ID：12487252
> 
> 赞同：2
> 
> 时间：2012-09-19T01:08:44.100
> 
> 标签：c#, xaml, windows-8, windows-runtime

我在 IsolatedStorage 中有一些带有 HTML 文本的文件。我怎样才能在应用程序中显示这个？我目前正在使用`WebView`它的`NavigateToString("html content")`属性，但它不能很好地工作，就像我无法在它上面显示任何 UI 元素一样。有没有其他解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T21:23:09.670

看来解决方案是从 html 的呈现中创建图像并显示它而不是实际的`WebView`.

从[这里](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview)，大胆地挖掘：

WebView 具有不能在 WebView 之上渲染其他 UI 区域（例如控件）的特点。这是因为窗口区域是如何在内部处理的，特别是如何处理输入事件以及如何绘制屏幕。**如果你想渲染 HTML 内容并且在 HTML 内容之上放置其他 UI 元素，你应该使用[WebViewBrush](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webviewbrush)作为渲染区域。**WebView 仍然提供 HTML 源信息，您可以通过元素名称绑定和[SourceName](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webviewbrush.sourcename)属性引用该 WebView。WebViewBrush 没有此覆盖限制。

如果要显示一个仅偶尔有重叠内容的交互式 WebView（例如下拉列表或应用栏），可以在必要时暂时隐藏 WebView 控件，将其替换为使用[WebViewBrush](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webviewbrush)填充的元素。然后，当重叠内容不再存在时，您可以再次显示原始 WebView。有关详细信息，请参阅[WebView 控件示例。](http://go.microsoft.com/fwlink/?LinkId=238582)

示例代码在[这里](http://code.msdn.microsoft.com/windowsapps/XAML-WebView-control-sample-58ad63f7/sourcecode?fileId=57963&pathId=1214102662)找到：

```
//create webview and rectangle
<WebView x:Name="WebView6" /> 
<Rectangle x:Name="Rect1"/> 

//put content in the webview
protected override void OnNavigatedTo(NavigationEventArgs e) 
{ 

    // Ensure that our Rectangle used to simulate the WebView is not shown initially 
    Rect1.Visibility = Windows.UI.Xaml.Visibility.Collapsed; 

    WebView6.Navigate(new Uri("http://www.bing.com")); 
}

//make the rectangle visible when you want something over the top of the web content
Rect1.Visibility = Windows.UI.Xaml.Visibility.Visible;

//if the rectangle is visible, then hit the webview and put the content in the webviewbrush
if (Rect1.Visibility == Windows.UI.Xaml.Visibility.Visible) 
{ 
    WebViewBrush b = new WebViewBrush(); 
    b.SourceName = "WebView6"; 
    b.Redraw(); 
    Rect1.Fill = b; 
    WebView6.Visibility = Windows.UI.Xaml.Visibility.Collapsed; 
} 
```

# php - PHP取消设置类对象数组中的类对象调用所有类对象的destruct？

> ID：12487256
> 
> 赞同：3
> 
> 时间：2012-09-19T01:09:46.727
> 
> 标签：php

我有一个存储在 PHP 数组中的客户端类对象数组。有时我需要`unset()`数组中的这些对象之一，我不想担心显式关闭套接字连接。我想`__destruct()`为我做那件事。

```
class A{

    private $id;

    public function __construct( $id ){
        $this->id = $id;
    }

    public function __destruct(){
        echo "Calling destruct on " . $this->id . ".\n";
    }

}

$array = array();

for($i=0;$i<5;$i++){
    $array[$i] = new A($i);
}

unset($array[3]);

print_r($array); 
```

析构函数被触发，因为它应该为我们正在销毁的元素。但是，即使元素没有被销毁，数组中的所有其他析构函数也会被调用。为什么？

```
Calling destruct on 3.
Array
(
    [0] => A Object
        (
            [id:A:private] => 0
        )

    [1] => A Object
        (
            [id:A:private] => 1
        )

    [2] => A Object
        (
            [id:A:private] => 2
        )

    [4] => A Object
        (
            [id:A:private] => 4
        )

)
Calling destruct on 0.
Calling destruct on 1.
Calling destruct on 2.
Calling destruct on 4. 
```

为什么会发生这种情况，我有什么选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T01:11:58.937

如果`$array`超出范围，则其余对象也将被销毁。

看起来正在发生这种情况。您会看到您的破坏跟踪消息，然后是您的 print_r() 输出，然后是其余的对象破坏。

# php - 显示没有格式的文本

> ID：12487259
> 
> 赞同：-1
> 
> 时间：2012-09-19T01:10:20.420
> 
> 标签：php, html, ckeditor

> **可能重复：**
> [在 PHP 中将 HTML 转换为纯文本以用于电子邮件](https://stackoverflow.com/questions/1884550/converting-html-to-plain-text-in-php-for-e-mail)

我有一个使用所见即所得（CKEditor）制作的 HTML 代码，这在我的 HTML 中引入了 DIV、P、SPAN 和其他一些内容，这导致 HTML 不像其他内容那样显示。有没有办法用 PHP 删除那些额外的标记？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T01:24:54.113

是的，有一个函数名`strip_tags`，更详细的请阅读官方文档： http: [//php.net/manual/en/function.strip-tags.php](http://php.net/manual/en/function.strip-tags.php)

# android - Android 应用程序未连接未通过 Apache、Axis2、Mysql、Tomcat、Eclipse 上的 Web 服务更新 MYSQL 表

> ID：12487261
> 
> 赞同：1
> 
> 时间：2012-09-19T01:10:23.140
> 
> 标签：android, mysql, tomcat, jdbc, axis2

我正在使用粘贴的教程代码连接到 MySQL 数据库并简单地发布到表中。Android 应用程序从数据字段正确返回文本，我看到通过端口 8080 进入 Apache 的流量。但是，当我通过 3306 嗅探进入数据库接口的流量时，我什么也看不到，并且 Mysql 中的 count(*) 返回 0 个条目。如何查看 JDBC 对数据的处理方式？

## Java 网络服务

```
package com.retailer.ws;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet; 
import java.sql.PreparedStatement;

public class RetailerWS {
public String customerData(){
String customerInfo = "";
try{
Class.forName("com.mysql.jdbc.Driver");
Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306        /login","root","password");
//Find customer information where the customer ID is maximum
PreparedStatement statement =  con.prepareStatement("INSERT INTO users(name,password)     VALUES('"+userName+"','"+userPassword"')");
 ResultSet result = statement.executeQuery();

while(result.next()){
customerInfo = customerInfo + result.getString("name") + "&" +         result.getString("C_ID") + "&"+result.getString("address") + "&"+result.getString("email");

}
}

catch(Exception exc){
 System.out.println(exc.getMessage());
 }

return customerInfo;
} 
```

## }

## Java Web 服务客户端

```
 package com.userdata.ws;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
  import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class AndroidMySQLClientActivity extends Activity{
private final String NAMESPACE = "http://ws.chathura.com";
private final String URL = "http://host:8080/First/services/Users?wsdl";
private final String SOAP_ACTION = "http://ws.chathura.com/insertData";
private final String METHOD_NAME = "insertData";
Button btninsert;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    btninsert = (Button)findViewById(R.id.btn_insert);
    btninsert.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            insertValues();
        }
    });
}

public void insertValues(){
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
    EditText userName = (EditText) findViewById(R.id.editText1);
    String user_Name = userName.getText().toString();
    EditText userPassword = (EditText) findViewById(R.id.editText2);
    String user_Password = userPassword.getText().toString();

 //Pass value for userName variable of the web service
    PropertyInfo unameProp =new PropertyInfo();
    unameProp.setName("userName");//Define the variable name in the web service method
    unameProp.setValue(user_Name);//Define value for fname variable
    unameProp.setType(String.class);//Define the type of the variable
    request.addProperty(unameProp);//Pass properties to the variable

  //Pass value for userPassword variable of the web service
    PropertyInfo passwordProp =new PropertyInfo();
    passwordProp.setName("userPassword");
    passwordProp.setValue(user_Password);
    passwordProp.setType(String.class);
    request.addProperty(passwordProp);

    SoapSerializationEnvelope envelope = new         SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    try{
        androidHttpTransport.call(SOAP_ACTION, envelope);
        SoapPrimitive response = (SoapPrimitive)envelope.getResponse();

        TextView result = (TextView) findViewById(R.id.textView2);
        result.setText(response.toString());

    }
    catch(Exception e){

    }
    }

   } 
```

# python - 使用 get() 函数

> ID：12487263
> 
> 赞同：0
> 
> 时间：2012-09-19T01:10:31.823
> 
> 标签：python

因此，我正在使用 csv 文件中给出的值创建一个字典，现在我正在尝试输入一个输入键，它将检查字典中的该键，然后返回该值。我在实现这一点时遇到了麻烦，但这就是我所拥有的，我相信我应该使用 d.get() 但我不是 100% 确定。

```
import csv

dictionary = []

line = 0
reader = csv.reader(open("all.csv", "rb"), delimiter = ",")

header = reader.next()

for column in reader:
    line = line + 1

    dictionary.append({column[0]:column[2]})

print dictionary

check = raw_input("Enter word in dictionary to get its value: ")

print dictionary.get(check, "This word doesnt exist in the dictionary") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T01:11:59.050

```
dictionary = [] 
```

那不是字典，而是列表。因此，它没有`get`方法。

你想要做的是像这样初始化字典：

```
dictionary = {} 
```

（注意花括号而不是方括号）。还将分配行更改为：

```
 dictionary[column[0]] = column[2] 
```

那时，您的程序应该可以工作。

# php - 访问从 JQUERY 传递的 PHP 数组

> ID：12487267
> 
> 赞同：-1
> 
> 时间：2012-09-19T01:11:16.053
> 
> 标签：php, jquery, html

我有以下结构从 jquery 传递到 php。我似乎无法从 PHP 访问数据。

![在此处输入图像描述](../Images/3ad90498ccc504f5fc6a1f611d9e795f.png)

这就是我一直在尝试的 - php：

```
print_r($_POST['cropData']);   // this shows the above array

foreach($_POST['cropData'] as $i => $row) {
  echo "... $row['src'] ... $row['width'] ..."; 
} 
```

我敢打赌这是最简单的事情——任何建议我如何连接到这个数组中的数据——必须是数组或数组因素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T01:12:31.203

看起来你的数组有两层深。这*应该*有效：

```
foreach($_POST['cropData'] as $i => $row) {
        echo "... $row[0]['src'] ... $row[0]['width'] ...";   
} 
```

# c# - 使用返回的数据表

> ID：12487269
> 
> 赞同：2
> 
> 时间：2012-09-19T01:11:48.100
> 
> 标签：c#, ado.net, datatable

我有两节课。我在 2 类中创建了一个返回的数据表。我试图弄清楚如何在类 1 中使用这些值。我需要在类 1 中的另一个方法中传递数据表值。

//示例：在第 2 课中，我有：

```
public Datatable Mytable()
{         
    DataTable table = new DataTable(); 

table.Columns.Add("Column1", typeof(string)); 

table.Columns.Add("Column2", typeof(string)); 

      //get values for the data row here

return table;
} 
```

在第 1 课中，我有：

```
public Method1 (String A, String B) 
//A and B need to represent the values in the Datatable from Class 2
{  string ab = "This is first datarow " + A + " This is second datarow " + B;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T01:27:52.523

```
public class Class1 {
    public Class1() {
        var foo = new Class2();
        var table = foo.MyTable();
        Method1(table.Rows[0]["Column1"], table.Rows[0]["Column2"]);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T01:19:30.920

我认为您需要在这里查看如何使用 DataTables：http: [//www.dotnetperls.com/datatable-foreach](http://www.dotnetperls.com/datatable-foreach)

# ios - 如何在不单击下一个单元格且不调整单元格高度的情况下使 UITableViewCell 中的下拉菜单可点击？

> ID：12487274
> 
> 赞同：0
> 
> 时间：2012-09-19T01:11:59.013
> 
> 标签：ios, drop-down-menu, uitableview, tableview, cell

我有 DropDown 类（自定义下拉菜单，它是一个 tableViewController）

它正在工作（在其他类中测试和使用）

然后我有一个 PersonalInfo 类..

我的 PersonalInfo 类是一个包含自定义单元格的 TableViewController

每个单元格都有一个 UIView dropDownView 和一个 textField contentTextField。

使 DropDown 成为 dropDownView 的子视图，我可以使下拉菜单出现在每个单元格上。但是，当 dropDown 超出单元格的高度时，dropDown 项目不再可点击，但它们仍然可见。

如果我使单元格的高度更大，它可以正常工作，但我想将单元格的高度保持在一定大小。我尝试将视图放在前面，但从未奏效。有谁能够帮我？我的想法不多了..谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T01:46:56.320

由于下拉菜单是您单元格的子视图，您只能控制该单元格中的内容（我认为......）。从“Apple Human Interface Design Guide”的角度来看，您的方法可能有点不寻常。

首先，你不会真的需要每个单元格都有一个下拉菜单，对吧？我的意思是，即使您*在*单元格中有一个下拉菜单，您一次也只会显示一个下拉菜单，而不是多个下拉菜单。因此，您可以将下拉列表设为表格的子视图。或者，更符合标准方法，您将有一个向下钻取视图，将下拉/子表加载到当前表中，类似于表视图的所有教程。

希望这可以帮助，

大人

# c# - 如何将 KeyValuePair 作为参数传递给 Command_Executed？

> ID：12487276
> 
> 赞同：2
> 
> 时间：2012-09-19T01:12:20.843
> 
> 标签：c#, .net, wpf, command, eventargs

看似简单的概念，但无法超越这一点。

我有一个命令...... _Executed 方法接收一个 KeyValuePair（类型无关紧要），因为它是参数。

```
myCommand_Executed(object sender, ExecutedRoutedEventArgs e)
    {
        KeyValuePair<System.Type, MyCustomArgs> kvp = e.Parameter as KeyValuePair<Type, MyCustomArgs>;
:
:
:
} 
```

不能这样做，因为它是不可为空的。我该如何做到这一点？我想从 e.Parameter 中提取 KeyValuePair。

感谢任何见解，如有必要，将很乐意发布更多代码/信息。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T02:31:57.377

您必须像您所做的那样使用显式转换，而不是隐式转换。
隐式转换：

```
KeyValuePair<System.Type, MyCustomArgs> kvp = e.Parameter as KeyValuePair<Type, MyCustomArgs>; 
```

显式演员表：

```
KeyValuePair<System.Type, MyCustomArgs> kvp = (KeyValuePair<System.Type, MyCustomArgs>)e.Parameter; 
```

# multithreading - COM 对象方法不在 CoInitialize-d 并创建对象的线程上执行

> ID：12487282
> 
> 赞同：4
> 
> 时间：2012-09-19T01:13:17.300
> 
> 标签：multithreading, com, methods, invoke

我正在开发一个 UI 应用程序，它会一路创建一个 COM 对象。问题是，我想将这个 COM 对象完全“移动”到另一个线程上。

我要做的是：

*   创建我想将对象移动到的新线程（使用 CreateThread API）
*   进入此线程后，我正在调用 PeekMessage 为其设置消息队列
*   调用CoInitialize，CoCreateInstance创建COM对象，QueryInterface得到我想要的接口
*   最后，我在界面上调用一个方法，该方法显示一个带有 GetCurrentThreadId() 返回值的 MessageBox（我可以访问该对象所在的 COM 库的 VB6 代码）。

问题是，正如此消息框所示，对象方法仍然在原始 UI 线程上执行，而不是在我创建并完成所有这些步骤的线程上执行。还要提一提，在调用了接口方法之后，我还在里面设置了一个经典的消息循环。

我怎样才能改变这种行为并实现我想要的？（也就是说，我希望源自我新创建的线程的 COM 对象调用在 IT 上执行，而不是在原始应用程序线程上执行）

这是一些伪代码，使其更加清晰：

```
void myMainUIMethod(){
  MessageBox(GetCurrentThreadId()); // displays 1
  CreateThread(&myCOMObjectThreadProc);
}
void myCOMObjectThreadProc(){
  MessageBox(GetCurrentThreadId()); // displays 2
  CoInitialize(NULL);
  myObject = CoCreateInstance(myObjectsCLSID);
  myObjectInterface = myObject->QueryInterface(myObjectInterfaceCLSID);
  myObjectInterface->showThreadIDMessageBox(); // this would be the COM object method call
}

And, in the VB6 code of the object, here's the pseudo-definition of showThreadIDMessageBox.
Public Sub showThreadIDMessageBox()
  Call MessageBox(GetCurrentThreadId()) //displays 1, I want it to display 2
End Sub 
```

在创建新线程之前，我通过在主线程上进行 CoUninitializing 实现了我想要的。但是为什么会这样呢？如果在我创建新线程之前在主线程上初始化了 COM，也许由于某种原因它必须是......我不希望应用程序稍后崩溃，因为我必须在创建新线程之前调用 CoUninitialize。这是一些伪代码，说明无论哪个线程首先调用 CoInitialize 都会被 STA 对象选中。

```
void myMainUIMethod(){
  MessageBox(GetCurrentThreadId()); // displays 1
  CoUninitialize(); // uninitialize COM on the main thread
  CreateThread(&myCOMObjectThreadProc);
  ***i: MessageBox("When you want to initialize COM on main thread, confirm this");
  CoInitialize();
}
void myCOMObjectThreadProc(){
  MessageBox(GetCurrentThreadId()); // displays 2
  ***ii: MessageBox("When you want to initialize COM on the new thread, confirm this");
  CoInitialize(NULL);
  myObject = CoCreateInstance(myObjectsCLSID);
  myObjectInterface = myObject->QueryInterface(myObjectInterfaceCLSID);
  myObjectInterface->showThreadIDMessageBox(); // this shows 2 IF ***ii is confirmed before ***i, 1 otherwise
} 
```

非常感谢你，科内利乌

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T10:26:17.573

看起来您的问题是您的 COM 组件线程模型**未**在注册表项[InprocServer32](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682390(v=vs.85).aspx)中指定。这意味着该对象被视为 STA（单线程单元），但将被加载到**主（或主机）STA**，而不是创建它的 STA。这是第一个调用`CoInitialize`. 要在调用您的同一 STA 中创建，`CoCreateInstance`您必须创建`HKEY_LOCAL_MACHINE\SOFTWARE\Classes\CLSID\{Your CLSID}\InprocServer32@ThreadingModel`注册表值并将其设置为`Apartment`.

引用 MSDN（[InprocServer32 注册表项文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682390(v=vs.85).aspx)）：

> 如果 ThreadingModel 不存在或未设置为值，则服务器将加载到进程中初始化的第一个单元中。这个单元有时被称为主单线程单元（STA）。如果进程中的第一个 STA 由 COM 初始化，而不是通过显式调用 CoInitialize 或 CoInitializeEx，则称为主机 STA。例如，如果要加载的进程内服务器需要 STA，但当前进程中没有 STA，则 COM 会创建一个主机 STA。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T10:09:50.107

I have finally achieved what I wanted! **Adding a CoUninitialize call in the main UI thread, before creating the new thread has solved it. This happens because STA COM objects will be handled on the thread that first calls CoInitialize.** Now all the calls to the objects methods are reported to be executed on the thread I created and the main window of the object (the COM component has a Form) is reported to belong to it too! (used WinSpy++ to test that).

There is still a question (and a problem) though..why does it behave this way? Everywhere I search on the internet I see answers telling that a STA COM component will be fully executed on the thread it is created on (provided that CoInitialize or CoInitializeEx with COINIT_APARTMENTTHREADED had been called before), no matter what. Why does it matter if I called CoInitialize on another thread before..that's just plain stupid in my opinion for Microsoft to do so :), plus it might damage the future behaviour of my application, as I stated before.

EDIT: The correct answer is the one posted by Frost. Thank you again.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T01:19:36.910

线程并行运行，这就是它们的目的。如果您希望一个对象等待另一个线程上的某些操作完成，则需要在两个线程之间进行同步。事件对象将为您服务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T06:19:26.100

创建 COM 类时需要选择**Free Threading**作为 COM 类的**Threading Model 。****对于 C++ ATL，当您选择New -> COM class**（或类似的东西）时，这是向导中的一个选项。在 .NET 语言中，我认为这被指定为类中的属性。

顺便说一句，您不需要在 CoCreateInstance 之后调用 QueryInterface（除非您需要多个接口指针）。只需将所需接口的 GUID 作为第四个参数传递给 CoCreateInstance。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T09:50:44.507

啊，我想我现在可能知道问题所在了：听起来您正在创建的 VB6 COM 对象被注册为单线程，而不是单元线程；这意味着对象是在您的应用程序第一个调用 CoInitialize() 的线程上创建的。

这解释了您所看到的行为：如果您首先让主线程 CoInitialize()，就 COM 而言，它成为“主线程”，因此 CoCreate 最终会在其上创建对象，即使它是 CoCreated 上的不同的线程。（这仅适用于单线程对象。）

但是当你让你的另一个线程 CoInitialize() 首先，它是 COM 的“主线程”，所以对象会在你想要的地方创建。

您可以将 VB 对象的线程模型更改为单元而不是单个吗？这将使它能够在调用 CoCreate() 的线程上创建。

> 问题是，我无法更改 VB6 组件的线程模型，因为它已在其他应用程序中使用，并且可能会损坏它的行为。

...看起来这对你不起作用。我想您可以检查当前的线程模型是什么，如果您可以确认它是单一的，那么您将解释为什么它会以这种方式运行，这可能会帮助您使用它。

--

那么为什么 COM 会这样呢？- A：遗留兼容性问题。单线程模型是 Windows 最初拥有线程之前的保留，当时每个进程只有一个线程，并且代码不必对进程内对象之间的同步做出任何假设。为了保持这种错觉并允许在多线程环境中使用假设单线程 COM 编写的对象，COM 引入了“单”模型，也称为“传统 STA”。[此页面上的](http://www.codeproject.com/Articles/9190/Understanding-The-COM-Single-Threaded-Apartment-Pa)更多详细信息，向下滚动或搜索“旧版 STA”以获取详细信息。COM 基本上将所有这些“单个”对象放在同一个 [STA] 线程上 - 并使用恰好是第一个调用 CoInitialize 的线程。当您在另一个线程上再次 CoUninit 和 CoInit 时，您实际上是在重新启动 COM；所以现在第二个线程是新的“调用 CoInit 的第一个线程”，这就是 COM 最终使用那个线程的原因......

（旧版 STA 是个老问题，实际上很难找到任何细节；几乎所有其他文章都提到了公寓、免费和两种选择；但很少有关于“单身”的细节。）

# objective-c - 这是什么类型的 NSDictionary？（纯文本有点像 JSON，但不完全是）

> ID：12487283
> 
> 赞同：0
> 
> 时间：2012-09-19T01:13:27.050
> 
> 标签：objective-c, ios, nsmutabledictionary

这是什么格式[http://www.stanford.edu/class/cs193p/vocabwords.txt](http://www.stanford.edu/class/cs193p/vocabwords.txt)

我可以使用以下代码导入它：

```
NSURL *wordURL = [NSURL URLWithString:@"http://www.stanford.edu/class/cs193p/vocabwords.txt"];

words = [[NSMutableDictionary    dictionaryWithContentsOfURL:wordURL] retain]; 
```

在不知道它的名称的情况下，我无法找到有关这种格式的更多信息，并且正在努力找出它的名称:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T01:19:34.380

这看起来像一个[属性列表](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/PropertyLists/Introduction/Introduction.html#//apple_ref/doc/uid/10000048-CJBGDEGD)——`NSPropertyListOpenStepFormat`它们仍然支持阅读。

# search - 衡量网站搜索质量的最佳方法是什么？

> ID：12487287
> 
> 赞同：0
> 
> 时间：2012-09-19T01:14:37.187
> 
> 标签：search, lucene, full-text-search

我有一个依赖搜索的网站，我想选择单个指标用于搜索排名实验。真实现场网站的最新指标是什么。

“现实生活”意味着我无法创建黄金标准并要求评委对每个查询的结果进行排名。我正在考虑将“每次搜索的点击次数”作为主要衡量标准。

# continuous-integration - 使用 TeamCity 合并语义版本控制的最佳实践是什么

> ID：12487292
> 
> 赞同：4
> 
> 时间：2012-09-19T01:15:10.043
> 
> 标签：continuous-integration, teamcity, nuget, assemblyinfo, semantic-versioning

TeamCity 是一个很棒的 CI 工具，我们也使用 Semantic Versioning 来管理我们的 DLL 版本很长一段时间，现在我们正在达成将 TeamCity 和 Semantic Versioning 集成在一起的想法，同时我们对这个主题进行了一些研究，比如说版本信息喜欢

MajorVersion.MinorVersion.PatchVersion.BuildNumber

buildNumber 我们总是使用 teamcity buildnumber，以及我们在 assemblyinfo.cs 中维护的其他 3 个版本，这里的问题是 - 我们如何使用 teamcity 将其 build number 输入到 assemblyinfo.cs，我可以找到 Msbuild 支持这个参数，有没有处理同一件事的最佳做法？我们还希望将整个版本作为已发布的版本信息提供给我们的开发人员的 nuget 包

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T05:22:54.023

我试图在本文中描述适合我的方法。 [http://www.developerfusion.com/article/144809/continuous-integration-using-nuget-and-teamcity/](http://www.developerfusion.com/article/144809/continuous-integration-using-nuget-and-teamcity/)

请注意，NuGet 不完全支持 SemVer（目前），例如 PrereleaseTags 与内部版本号相结合将无法按您期望的方式工作。我[在 MSDN 上的 Top 10 NuGet (Anti-)Patterns](http://msdn.microsoft.com/en-us/magazine/jj851071.aspx)中描述了一些关于版本控制的指导。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T07:14:54.337

您可以使用 AssemblyInfo Patcher 功能。构建功能在构建配置设置的构建步骤页面上配置。它记录[在这里](http://confluence.jetbrains.net/display/TCD65/AssemblyInfo+Patcher)。如果您将 AssemblyInfo 保存在非标准位置，则可以使用[MSBuild 社区任务](http://msbuildtasks.tigris.org/) `AssemblyInfo`通过 msbuild 重写它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-30T16:49:15.527

[TeamCity 元运行器电源包 ( https://github.com/JetBrains/meta-runner-power-pack](https://github.com/JetBrains/meta-runner-power-pack) )中提供了一个非常完整的 SemVer 内部版本号元运行器。

以下是作者对功能的描述：http: [//johanleino.wordpress.com/2013/10/11/teamcity-meta-runner-semantic-version-build-number/](http://johanleino.wordpress.com/2013/10/11/teamcity-meta-runner-semantic-version-build-number/)

SemVer Build Number 元运行程序是基于 PowerShell 的运行程序。它可以（在此发布时）：

*   从 nuspec (nuget) 文件中获取版本号。
*   使用手动版本号（如果需要，可以使用参数）。覆盖其他方法。
*   包括 TeamCity 构建计数器。
*   包括 VCS 修订。
*   将 Git 提交哈希转换为短哈希。
*   如果需要，忽略构建元数据。
*   记录等

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-02T19:14:14.803

这是我写的一篇博客文章，介绍了如何从`AssemblyInfo.cs`C# .Net 项目的前两个数字创建版本号，并添加构建计数器和分支名称以形成完整的版本号。可以很容易地针对其他情况进行修改，它只是带有**文件内容**替换器构建功能的脚本。

[http://www.meadow.se/wordpress/generating-semantic-version-build-numbers-in-teamcity/](http://www.meadow.se/wordpress/generating-semantic-version-build-numbers-in-teamcity/)

希望这可以帮助。

# wpf - 如何在 WPF 中以编程方式为滑块添加 Thumb.DragCompleted 的处理程序？

> ID：12487303
> 
> 赞同：1
> 
> 时间：2012-09-19T01:17:10.390
> 
> 标签：wpf, wpf-controls, slider

我知道在 .xaml 文件中添加它的方法，但我需要在 C# 文件中添加它的方法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T06:05:10.000

[您可以在此处](https://stackoverflow.com/questions/3233000/get-the-thumb-of-a-slider)找到如何以`Thumb`编程方式获取。

然后只需将处理程序添加到事件：

```
sliderThumb.DragCompleted += myDragCompletedHandler; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-28T22:16:12.867

这是我能找到的最简单的解决方案，而不会弄乱该`Thumb`属性：

```
slider.AddHandler(Thumb.DragCompletedEvent, new DragCompletedEventHandler((sender, e) =>
{
    // Handling code
})); 
```

# css - 如何为同一个 jquery 控件的多个实例设置不同的样式？

> ID：12487313
> 
> 赞同：0
> 
> 时间：2012-09-19T01:18:21.990
> 
> 标签：css, jquery-ui, styling, multiple-instances

我**在同一页面上有多个 jquery 组合框**，我想设置每个不同的宽度（和其他样式）。修改这些 jquery 类会改变所有这些，**但我想单独设置样式**。怎么做？

[这是一个工作示例，](http://jsfiddle.net/johntrepreneur/Sxv6g/13/)
**或者**
如果您愿意，您可以查看下面的代码。

**CSS：（**这改变了所有这些）

```
.ui-combobox-input
{
    margin: 0; /*original value*/
    padding: 0.3em; /*original value*/
    width: 90px; /*change the default autocomplete textbox width (too wide)*/
}
/*this is for the dropdown box*/
.ui-autocomplete
{
    max-height: 400px; /*limits dropdown list height*/
    overflow-y: auto;   /* prevent horizontal scrollbar */ /*limits dropdown list height*/
    overflow-x: hidden; /* add padding to account for vertical scrollbar */ /*limits dropdown list height*/
    z-index:1000 !important; /*limits dropdown list height*/
} 
```

**HTML**

```
<div id="searchControlsBasic" runat="server" class="searchControlsBasic">
    <div id="minPrice">
        <select id="selMinPrice" class="selMinPrice" tabindex="3">
            <option value=“”&gt;No Min</option>
            <option value=“50000”&gt;50,000</option>
            <option value=“75000”&gt;75,000</option>
        </select>
    </div>
   <div id="maxPrice">
        <select id="selMaxPrice" class="selMaxPrice" tabindex="4">
            <option value=“”&gt;No Max</option>
            <option value=“50000”&gt;50,000</option>
            <option value=“75000”&gt;75,000</option>
        </select>
    </div>
   <div id="beds">
        <select id="selBeds" class="selBeds" tabindex="5">
            <option value=“0”&gt;0+</option>
            <option value=“1”&gt;1+</option>
            <option value=“2”&gt;2+</option>
        </select>
    </div>
   <div id="baths">
        <select id="selBaths" class="selBaths" tabindex="6">
            <option value=“0”&gt;0+</option>
            <option value=“1”&gt;1+</option>
            <option value=“1.5”&gt;1.5+</option>
        </select>
    </div>
</div> 
```

**Javascript：（**与组合框演示几乎相同）

```
$(document).ready(function()
{
    $.widget("ui.combobox", {
        _create: function ()
        {
            var input,
                    self = this,
                    select = this.element.hide(),
                    selected = select.children(":selected"),
                    value = selected.val() ? selected.text() : "",
                    wrapper = this.wrapper = $("<span>")
                        .addClass("ui-combobox")
                        .insertAfter(select);

            input = $("<input>")
                    .appendTo(wrapper)
                    .val(value)
                    .addClass("ui-state-default ui-combobox-input")
                    .autocomplete({
                        delay: 0,
                        minLength: 0,
                        autoFocus: true,
                        source: function (request, response)
                        {
                            var requestTermNoCommas = request.term.replace(/,/g, "");
                            //var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i"); //original
                            var matcher = new RegExp("^" + $.ui.autocomplete.escapeRegex(requestTermNoCommas), "i");
                            response(select.children("option").map(function ()
                            {
                                var text = $(this).text(); //original
                                var textNoCommas = $(this).text().replace(/,/g, "");
                                //if (this.value && (!request.term || matcher.test(text))) //original
                                if (this.value && (!request.term || matcher.test(textNoCommas)))
                                    return {
                                        //label: text.replace( //original
                                        label: textNoCommas.replace(
                                            new RegExp(
                                                "(?![^&;]+;)(?!<[^<>]*)(" +
                                                //$.ui.autocomplete.escapeRegex(request.term) + //original
                                                $.ui.autocomplete.escapeRegex(requestTermNoCommas) +
                                                ")(?![^<>]*>)(?![^&;]+;)", "i"
                                            ), "<strong>$1</strong>")
                                            // adds the thousands comma seperator after every third digit and takes into account the optional bold html markup
                                            .replace(/((<strong>)?(<\/strong>)?\d(<strong>)?(<\/strong>)?)(?=((<strong>)?(<\/strong>)?\d(<strong>)?(<\/strong>)?\d(<strong>)?(<\/strong>)?\d(<strong>)?(<\/strong>)?)+(?!(<strong>)?(<\/strong>)?\d(<strong>)?(<\/strong>)?))/g, "$1,"),
                                        value: text,
                                        option: this
                                    };
                            }));
                        },
                        select: function (event, ui)
                        {
                            ui.item.option.selected = true;
                            self._trigger("selected", event, {
                                item: ui.item.option
                            });
                        },
                        change: function (event, ui)
                        {
                            if (!ui.item)
                            {
                                var matcher = new RegExp("^" + $.ui.autocomplete.escapeRegex($(this).val()) + "$", "i"),
                                    valid = false;
                                select.children("option").each(function ()
                                {
                                    if ($(this).text().match(matcher))
                                    {
                                        this.selected = valid = true;
                                        return false;
                                    }
                                });
                                // disabling this block since we want to leave custom values in combobox (that are conforming)
                                /*if (!valid)
                                {
                                    // remove invalid value, as it didn't match anything
                                    $(this).val("");
                                    select.val("");
                                    input.data("autocomplete").term = "";
                                    return false;
                                }*/
                            }
                        }
                    })
                    .addClass("ui-widget ui-widget-content ui-corner-left")
                    .focus(function() // for selecting text on focus 
                    {
                        // fixes a bug in chrome, firefox, and safari as well (opposed to just using $(this).select())
                        $(this).select().mouseup(function (e)
                        {
                            e.preventDefault();
                            $(this).unbind("mouseup");
                        });
                    });

            input.data("autocomplete")._renderItem = function (ul, item)
            {
                return $("<li></li>")
                        .data("item.autocomplete", item)
                        .append("<a>" + item.label + "</a>")
                        .appendTo(ul);
            };

            $("<a>")
                    .attr("tabIndex", -1)
                    .attr("title", "Show All Items")
                    .appendTo(wrapper)
                    .button({
                        icons: {
                            primary: "ui-icon-triangle-1-s"
                        },
                        text: false
                    })
                    .removeClass("ui-corner-all")
                    .addClass("ui-corner-right ui-combobox-toggle")
                    .click(function ()
                    {
                        // close if already visible
                        if (input.autocomplete("widget").is(":visible"))
                        {
                            input.autocomplete("close");
                            return;
                        }

                        // work around a bug (likely same cause as #5265)
                        $(this).blur();

                        // pass empty string as value to search for, displaying all results
                        input.autocomplete("search", "");
                        input.focus();
                    });
        },

        destroy: function ()
        {
            this.wrapper.remove();
            this.element.show();
            $.Widget.prototype.destroy.call(this);
        }
    });
});

$(document).ready(function()
{
    // setup min & max price, beds, and baths comboboxes
    $(".selMinPrice").combobox();
    $(".selMaxPrice").combobox();
    $(".selBeds").combobox();
    $(".selBaths").combobox();
    $("#toggle").click(function ()
    {
        $(".selMinPrice").toggle();
        $(".selMaxPrice").toggle();
        $(".selBeds").toggle();
        $(".selBaths").toggle();
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T01:58:14.683

你可以试试

```
#minPrice .ui-combobox-input {
    width:400px;
}

#maxPrice .ui-combobox-input {
    width:300px;
}

#beds .ui-combobox-input {
    width:200px;
}

#baths .ui-combobox-input {
    width:100px;
} 
```

# jpa - 从左侧加入，不引用 @ManyToMany

> ID：12487329
> 
> 赞同：0
> 
> 时间：2012-09-19T01:21:24.397
> 
> 标签：jpa, criteria-api

我有三张桌子。

```
LEFT ---------|<- LEFT_RIGHT ->|--------- RIGHT 
```

```
@Entity
class Left {
    // no collection mapping for LeftRight
}

@Entity
class Right {
    // no collection mapping for LeftRight
}

@Entity
class LeftRight {

    @JoinColumn(name="LEFT_ID")
    @ManyToOne
    private Left left;

    @JoinColumn(name="RIGHT_ID")
    @ManyToOne
    private Right right;
} 
```

请注意，`Left`也`Right`没有对`LeftRight`s 的任何引用。

Criteria-API 有什么方法可以`Left`在加入时进行选择`LeftRight`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:48:46.227

您可以创建条件查询`LeftRight`并使用投影来检索`left`属性：

```
session.createCriteria(LeftRight.class)
    // Add whatever restrictions on Left properties
    .createCriteria("left")
    .add(Restrictions.like("name", "%something%"))
    // Use projection to retrieve the left property
    .setProjection(Projections.property("left")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:48:58.850

是的，只需使用一个选择。

```
CriteriaQuery cq = cb.createQuery();
Root r = cq.from(LeftRight.class);
cq.select(r.get("left"));
cq.where(...);
Query query = em.createQuery(cq); 
```

[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/Criteria#CriteriaQuery](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/Criteria#CriteriaQuery)

# hadoop - 分布式缓存文件 Hadoop

> ID：12487331
> 
> 赞同：1
> 
> 时间：2012-09-19T01:21:47.103
> 
> 标签：hadoop, mapreduce, distributed-caching

我想将不同的文件附加到不同的减速器。是否可以在hadoop中使用分布式缓存技术？

我能够将相同的文件（文件）附加到所有减速器。但是由于内存限制，我想知道我是否可以将不同的文件附加到不同的减速器。

如果这是一个无知的问题，请原谅我。

请帮忙！

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:19:26.560

此外，可能值得尝试使用内存计算/数据网格技术，如 GridGain、Infinispan 等......这样您就可以将数据加载到内存中，并且您对如何映射计算作业没有任何限制（使用数据亲和性映射/减少）到任何数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:32:36.983

这是一个奇怪的愿望，因为任何 reducer 都没有绑定到特定节点，并且在执行期间，reducer 可以在任何节点甚至节点上运行（如果存在故障或推测执行）。因此，所有 reducer 都应该是同质的，唯一不同的是它们处理的数据。

所以我想当你说你想把不同的文件放在不同的减速器上时，你实际上想把不同的文件放在减速器上，这些文件应该对应于那些减速器将要处理的数据（键）。

我知道的唯一一种方法是将数据放在 HDFS 上，并在 reducer 开始处理数据时从它读取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T00:01:27.783

```
package com.a;

import javax.security.auth.login.Configuration;

import org.apache.hadoop.fs.FSDataInputStream;
import org.apache.hadoop.fs.FileSystem;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.IOUtils;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapred.JobConf;
import org.apache.hadoop.mapred.MapReduceBase;
import org.apache.hadoop.mapred.OutputCollector;
import org.apache.hadoop.mapred.Reducer;
import org.apache.hadoop.mapred.Reporter;

public class PrefixNew4Reduce4 extends MapReduceBase implements Reducer<Text, Text,   Text, Text>{
//  @SuppressWarnings("unchecked")

 ArrayList<String> al = new ArrayList<String>();
public void configure(JobConf conf4)
{

    String from = "home/users/mlakshm/haship"; 

    OutputStream dst = null;
    try {
        dst = new BufferedOutputStream(new FileOutputStream(to, false));
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } /* src (hdfs file) something like hdfs://127.0.0.1:8020/home/rystsov/hi                                         */

    FileSystem fs = null;
    try {
        fs = FileSystem.get(new URI(from), conf4);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (URISyntaxException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    FSDataInputStream src;
    try {
        src = fs.open(new Path(from));

        String val = src.readLine();
        StringTokenizer st = new StringTokenizer(val);

        al.add(val);

        System.out.println("val:----------------->"+val);

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

    public void reduce (Text key, Iterator<Text> values, OutputCollector<Text, Text> output, Reporter reporter) throws IOException {

        StringTokenizer stk = new StringTokenizer(key.toString());
        String t = stk.nextToken();
        String i = stk.nextToken();
        String j = stk.nextToken();

    ArrayList<String> al1 = new ArrayList<String>();

           for(int i = 0; i<al.size(); i++)
            {

                     boolean a = (al.get(i).equals(i)) || (al.get(i).equals(j));

                     if(a==true)
                     {

                         output.collect(key, new Text(al.get(i));                              

                     }

      while(values.hasNext())
          {

             String val = values.next().toString();
             al1.add(val);

      }

for(int i = 0; i<al1.size(); i++)
{
output.collect(key, new Text(al1.get(i));
} 
```

# performance - 向量化对子例程的调用

> ID：12487332
> 
> 赞同：1
> 
> 时间：2012-09-19T01:21:55.630
> 
> 标签：performance, optimization, fortran, vectorization, fortran90

我有一个程序，即使使用了 pragma，对子 例程的调用`foo`也不会向量化。没有给我任何关于为什么呼叫没有矢量化的理由。是因为内存引用吗？`IVDEP``vec-report3`

注意：arr1、arr2、arr3 都定义在一个公共块中

```
program test
    integer i, j, k, n
    double precision arr1(5, 5, n, n), aar2(5, 5, n, n), aar3(5, n, n, n)
    !DIR$ IVDEP
    do i=1, n
        call foo(arr1(1, 1, i, k), aar2(1, 1, i, k), aar3(1, i, j, k))
    enddo
end

subroutine foo( fooarr1, fooarr2, fooarr3 )
    implicit none
    double precision fooarr1(5, 5), fooarr2(5, 5), fooarr3(5)
    some computations on fooarr1, fooarr2, fooarr3
    fooarr1,fooarr2,fooarr3 gets updated. But there are no vector dependance

return
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:39:41.543

如果子例程不是平凡的并且不是内联的，它就不能简单地完成。向量化是使用一组有限的 SIMD 指令（您是在向量 Cray 还是 NEC 上，还是在 x86 上？），例如，您可以在其中同时进行四次乘法。但是对于同时执行的过程，您可能应该使用线程进行并行化，或者您应该在子例程中搜索向量化的潜力。

--edit-- 当我检查网络参考时，编译器供应商确实总是有类似的例子

```
!DIR$ IVDEP
      DO I = 1,N
         A(I) = A(I+1) + 3.0
      END DO 
```

所以里面没有调用，只是一个简单的计算。为了确定发生了什么，您还应该发布子程序的代码。

# scala - 被路径依赖类型挫败

> ID：12487333
> 
> 赞同：1
> 
> 时间：2012-09-19T01:22:11.417
> 
> 标签：scala, parser-combinators, path-dependent-type

在一个特征中，我无法使用从另一个特征中的方法返回的解析器。编译器抱怨类型不匹配，在我看来问题是由于路径相关类造成的。我不知道如何得到我想要的。

```
trait Outerparser extends RegexParsers {

  def inner: Innerparser

  def quoted[T](something: Parser[T]) = "\"" ~> something <~ "\""
  def quotedNumber = quoted(inner.number)     // Compile error
  def quotedLocalNumber = quoted(number)      // Compiles just fine
  def number: Parser[Int] = ("""[1-9][0-9]*"""r) ^^ {str => str.toInt}

}

trait Innerparser extends RegexParsers {

  def number: Parser[Int] = ("""[1-9][0-9]*"""r) ^^ {str => str.toInt}

} 
```

和错误：

```
[error] /Path/to/MyParser.scala:6: type mismatch
[error]  found   : minerals.Innerparser#Parser[Int]
[error]  required: Outerparser.this.Parser[?]
[error]   def quotedNumber = quoted(inner.number) 
```

我有点明白了：每个“某事”方法都定义了一个 Parser 类型，其路径特定于封闭类（Outerparser 或 Innerparser）。Outerparser 的“引用”方法需要一个 Outerparser.this.Parser 类型的实例，但正在获取 Innerparser#Parser。

我喜欢能够使用从此类或其他类获得的解析器引用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T01:30:16.327

无论好坏，您通常使用 Scala 解析器组合库的方式是将所有内容包装在一个封闭的 trait 或`extends`trait 之类的对象中`RegexParsers`。我不太清楚为什么 API 是这样设计的。

但是，无论如何，一旦它们都属于 的同一个实例`RegexParsers`，它们都会看到相同的`Parser`类型：

```
trait Everything extends RegexParsers {
    trait Outerparser {
        ...
    }

    trait Innerparser {
        ...
    }
} 
```

每个人都很高兴。

* * *

不要认为它把所有东西都放在同一个范围内；将其视为解析器组合器 API 导入名称的怪异方式，即，您可以很容易地做到

```
import scala.util.parsing.combinator._
import scala.util.parsing.input._

object blah extends RegexParsers
import blah._

trait Outerparser {
    ...
}

trait Innerparser {
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T11:52:04.377

您可以使用自类型注释使其编译，同时仍保持模块化：

```
trait OuterParser extends RegexParsers { this: InnerParser =>
  def quoted[T](something: Parser[T]) = "\"" ~> something <~ "\""
  def quotedNumber = quoted(number)     // Compile error
}

trait InnerParser extends RegexParsers {
  def number: Parser[Int] = ("""[1-9][0-9]*"""r) ^^ {str => str.toInt}
}

object MyCompleteParser extends OuterParser with InnerParser 
```

自类型注释基本上说 OuterParser 依赖于 InnerParser （它们必须混合在一起才能创建适当的可实例化类）。因此，编译器肯定知道在 OuterParser 和 InnerParser 中，`Parser`指的是相同的类型。

# python - 使用 django_nose 和 django-dynamic-fixture 优化示例 django 模型的设置和拆卸

> ID：12487337
> 
> 赞同：3
> 
> 时间：2012-09-19T01:22:36.940
> 
> 标签：python, django, unit-testing, nose, django-testing

鉴于我的模型如下：

```
class Author(models.Model):
    name = models.CharField(max_length=100)
    description = models.TextField()

class Book(models.Model):
    title = models.CharField(max_length=100)
    author = models.ManyToManyField(Author) 
```

我正在使用[django-dynamic-fixture](https://github.com/paulocheque/django-dynamic-fixture)轻松生成模型夹具以进行测试。我也在使用[django_nose](https://github.com/jbalogh/django-nose)，它可以帮助我很好地运行和管理测试。在 settings.py 文件中设置了 test_runner 并将所有可安装文件放置在适当的位置。

要生成上述模型，测试应该是

```
from django_dynamic_fixture import G

class BookModelTest(TestCase):

     def test_book_creation(self):
         author1 = G(Author)
         author2 = G(Author)
         book = G(Book, author=[author1])
         book_obj = Book.objects.all()
         self.assertEquals(book_obj.count(), 1)
         self.assertEquals(list(book_obj[0].author), [author1])
         self.assertEquals(book_obj[0].title, book.title)
         self.assertNotEquals(list(book_obj[0].author), [author1])

    def another_test(self):
       "Here as well i need the same, author1, author2 and book 
```

另外，如果我写

```
class AuthorModelTest(TestCase):

   def test_some_stuff() 
```

我需要一些固定值。所以以下是我的疑问：

我如何保持我的灯具一代干燥。意味着不在`G`每个功能中创建书籍和作者装置？

django_nose 有助于优化 setUp 和 tearDown 方法并提高速度，我该如何在这里使用它们？只需放置 *django_nose.FastFixtureTestCase* 就可以解决 setUp tearDown 的痛苦？还是我需要使用*TransactionTestCase*？如何优化上述夹具和测试？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T00:16:59.037

最新版本的[Django Dynamic Fixture](https://github.com/paulocheque/django-dynamic-fixture)包含一个[Django Nose 插件](https://github.com/paulocheque/django-dynamic-fixture/wiki/Documentation#wiki-setup_nose_plugin)，以方便创建全局灯具。检查这是否对您有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T20:56:30.147

FastFixtureTestCase 用于快速夹具处理，在这种情况下根本没有帮助。

使用 django_dynamic_fixture 或 factory_boy（我个人使用）并始终只创建测试所需的尽可能少的对象，即使有可能 - 完全省略数据库（例如，仅测试与其他模型无关的模型方法时）是最快的方法。

此外，如果数据库使您放慢速度，请尝试使用常规数据库进行测试。我知道测试中的 sqlite 应该很快，因为它是在内存中运行的，但它仍然比普通的 postgres/mysql 数据库慢得多。您还可以在 django-nose 中启用 REUSE_DB 选项，这将使测试启动和关闭更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T16:17:06.573

我不熟悉 django-nose 的优化功能，但在回答您的第一个问题时，如果您反复需要相同的一组对象进行一系列测试，我只需制作一个实用方法或独立函数即可调用创建这些对象并返回它们（或者您可以从中获取其他对象的其中一个）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T05:48:58.593

您可以创建处理数据创建的数据 API。

```
class TestData(objects):
    def create_a_book_with_author(self):
         author1 = G(Author)
         author2 = G(Author)
         book = G(Book, author=[author1])

class BookModelTest(TestCase):

     def setUp(self):
         TestData().create_a_book_with_author()
         self.book_obj = Book.objects.all()

     def test_book_creation(self):
         self.assertEquals(self.book_obj.count(), 1)
         self.assertEquals(list(self.book_obj[0].author), [author1])
         self.assertEquals(self.book_obj[0].title, book.title)
         self.assertNotEquals(list(self.book_obj[0].author), [author1]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T09:25:50.360

`TransactionTestCase`帮助您保存每次测试的整个数据库刷新，它希望您从一个未损坏的数据库开始，您可以使用任何夹具生成器自由生成它。`TransactionTestCase`但是让数据库变得杂乱无章，django-nose 可以帮助您优化它。然而，django-nose 有另一个测试运行`FastFixtureTestCase`器可以帮助您优化设置和拆解。

如前所述，您可以使用任何夹具生成，如果您想要 django-nose 的优点，请使用`FastFixtureTestCase`它，它将帮助您优化 IO 时间。

# delphi - WinInet HttpQueryInfo 可以返回原始字节吗？（带有 unicode 字符的 HTTP 标头）

> ID：12487341
> 
> 赞同：1
> 
> 时间：2012-09-19T01:22:59.077
> 
> 标签：delphi, unicode, header, delphi-xe2, wininet

内置例程 HttpQueryInfo 返回一个字符串，而不是实际字节。通常这不是问题。

但是，最近我开始遇到服务器发出重定向的问题，其中位置标头字段包含一个包含非百分比编码的 unicode/或？人物。有什么办法吗？

```
 var
          vContent_Wide: WideString;
        begin 
          vBufferSize := 4096;
          GetMem(vBufferPtr, vBufferSize);
          while True do
          begin
            TmpFakeCardinal := 0;
            vErrorNone := HttpQueryInfo(
              hHttpOpen_Request,
              HTTP_QUERY_RAW_HEADERS_CRLF,
              vBufferPtr,
              vBufferSize,
              TmpFakeCardinal
            );
            if (vErrorNone = False) then
              begin
                vErrorID := GetLastError;
                if (vErrorID = ERROR_INSUFFICIENT_BUFFER) then
                  begin
                    FreeMem(vBufferPtr);
                    GetMem(vBufferPtr, vBufferSize);
                  end
                else Break;
              end
            else
              begin
                vContent_Wide := PWideChar(vBufferPtr); 
                Result := vContent_Wide;
                Break;
              end
            ;
          end;
          FreeMem(vBufferPtr, vBufferSize); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T19:39:21.873

URI 不支持未编码的 Unicode 字符。如果服务器在标头中发送非百分比编码的 Unicode 字符串，`Location`则服务器有问题，需要修复，因为这明显违反了[RFC 2616 第 14.30 节](https://www.rfc-editor.org/rfc/rfc2616#section-14.30)。我的猜测是服务器实际上发送的是未映射的 IRI ( [RFC 3987](https://www.rfc-editor.org/rfc/rfc3987) ) 而不是 URI ( [RFC 3986](https://www.rfc-editor.org/rfc/rfc3986) )。HTTP 不支持直接使用 IRI，它们必须映射到 URI（[RFC 3987](https://www.rfc-editor.org/rfc/rfc3987)定义了如何做到这一点）。

话虽如此，请检查是否将`dwInfoLevel`参数设置为`HTTP_QUERY_CUSTOM`允许`HttpQueryInfo()`返回标头的原始字节。如果没有，那么您将无法将 WinInet 用于那些出现故障的服务器，因为 WinInet API 中没有其他函数可以访问 HTTP 标头。您必须找到另一个支持您需要的 HTTP 库，否则您可以下拉到 TCP/IP 层并在您自己的代码中手动实现 HTTP 协议。

# java - SingleLinkedList 中的 findFirst 方法

> ID：12487345
> 
> 赞同：1
> 
> 时间：2012-09-19T01:23:30.073
> 
> 标签：java, methods, find, linked-list

我刚刚更新了我的代码，如果有人可以帮助我...在我的 findFirst 方法中，我想查找包含该元素的第一个节点，如果找到这样的节点，它将返回该节点，否则返回 null ...到目前为止在我的方法我确实找到了一个节点，但我不确定如何找到第一个节点......我怎么能做到这一点？这是我到目前为止所拥有的......谢谢......

```
public SLNode<E> findFirst(E element){
    SLNode<E> cursor = head.getSuccessor();
    while(cursor != null){
        if(cursor.getElement() !=null && cursor.getElement().equals(element))
            return cursor;
        cursor = cursor.getSuccessor();
    }
    return null;
} 
```

以下是我的实际课程

```
public class SinglyLinkedList<E> {
private final SLNode<E> head;
private final SLNode<E> tail;
int length;

// creates an empty list
public SinglyLinkedList() {
    head = new SLNode<E>();
    tail = new SLNode<E>();
    head.setSuccessor(tail);
    length = 0;
}

// adds new node on beginning of the list
public void add(E element) {
    SLNode<E> node = new SLNode<E>(element, null);
    node.setSuccessor(head.getSuccessor());
    head.setSuccessor(node);
}

//removes a first node on beginning of the list
public boolean remove(E element) {
    SLNode<E> previous = head;
    SLNode<E> current = head.getSuccessor();
    while (current != tail) {
        if (current.getElement().equals(element)) {
            previous.setSuccessor(current.getSuccessor());
            //successor is next
            return true;
        }
        previous = current;
        current = current.getSuccessor();
    }
    return false;
}

public SLNode<E> findFirst(E element){
    /*Shown At the Top as part of the Question*/
}

// adds new node on beginning of the list
public void add(SLNode<E> node) {
    node.setSuccessor(head.getSuccessor());
    head.setSuccessor(node);
}

@Override
public String toString() {
    StringBuilder sb = new StringBuilder();
    SLNode<E> cursor = head.getSuccessor();
    while (cursor != tail) {
    sb.append(cursor.getElement()).append(" ");
    cursor = cursor.getSuccessor();
    }
    sb.append("\n");
    return sb.toString();
}

} 
```

SLnode 类

```
public class SLNode<E> {
    private E element;
    private SLNode<E> successor;

    public SLNode() {
        element = null;
        successor = null;
    }

    public SLNode(E theElement, SLNode<E> theSuccessor) {
        element = theElement;
        successor = theSuccessor;
    }

    public E getElement() {
        return element;
    }

    public void setElement(E newElement) {
        element = newElement;
    }

    public SLNode<E> getSuccessor() {
        return successor;
    }

    public void setSuccessor(SLNode<E> newSuccessor) {
        successor = newSuccessor;
    }

    public Object getPrevious() {
        // TODO Auto-generated method stub
        return null;
    }

    public void setPrevious(Object object) {
        // TODO Auto-generated method stub      
    }

    public void setNext(Object object) {
        // TODO Auto-generated method stub      
    }

    public Object getNext111() {
        // TODO Auto-generated method stub
        return null;
    }

    public Object getNext() {
        // TODO Auto-generated method stub
        return null;
    }

    public Object getPrevious1() {
        // TODO Auto-generated method stub
        return null;
    }

    public void setPrevious1(Object object) {
        // TODO Auto-generated method stub  
    }

    public Object getNext1() {
        // TODO Auto-generated method stub
        return null;
    }

    public void setNext11(Object object) {
        // TODO Auto-generated method stub
    }

    public void setNext1(Object object) {
        // TODO Auto-generated method stub  
    }

    public Object getNext11() {
        // TODO Auto-generated method stub
        return null;
    }
} 
```

# android-emulator - 用 Chrome 浏览器模拟 Nexus 7？

> ID：12487349
> 
> 赞同：2
> 
> 时间：2012-09-19T01:23:49.893
> 
> 标签：android-emulator

我正在尝试使用 Chrome 在 Nexus 7 上支持我的 webapp。

我尝试安装 android SDK，并使用 Google 工具创建像 Nexus 7 这样的 avd，在等待 10 分钟后启动，我发现没有 Chrome，而且模拟器太慢以至于完全没用。（我正在测试一个视频应用，这个东西不能实时解码视频）

我已经使用设备模拟器完成了所有的 iOS 测试，并且效果很好。

我是否有一些设置错误导致问题，或者我只是在浪费时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-17T06:33:39.990

模拟器可能适用于 Android 应用程序，但对于 Web 应用程序，您可能需要真正的模拟器。

即使是 Chrome 32.0.1700.76 m 中最近的仿真选项，也与实际 Nexus 7 上的相同渲染不匹配。

# maven - maven 自定义插件配置

> ID：12487351
> 
> 赞同：1
> 
> 时间：2012-09-19T01:24:05.217
> 
> 标签：maven

我有一个 Maven 多模块项目，我希望我可以使用配置文件根据 POM 属性为两种情况自定义插件的配置，但事实证明配置文件只能由外部属性激活，而不能由 POM 属性激活，所以现在我是寻找另一种方式来拥有不同的项目配置，我想得到一些想法。这是我的设置

我有一个 3 级树：一个根父 POM X 有许多子模块 A、B、C ......这些模块中的每一个都有 2 个子模块 1 和 2（所以 A1、A2、B1、B2 等）

我需要做的是为所有类型 1 的模块和另一个为类型 2 的所有模块自定义叶模块的配置。我试图避免使所有 1 共享一个共同的父级和所有 2 的另一个（不同的）共同父级，因为1 和 2 已经共享了来自其各自父级（例如 A 或 B）的一些数据。如果没有其他办法，我会将所有公共数据从 A 下推到 A1 和 A2（不理想，DRY 原则），并使所有 1 都从一个公共 1 父级继承，但我试图避免这种情况。就像我说的那样，我尝试在树的叶子中设置一个属性，并使用一个属性指定它是 1 还是 2，然后将两个不同的配置文件放在祖父母 POM X 中并根据该属性激活配置文件. 这没有用。

还有其他建议吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-19T14:12:16.203

我相信你可以实现你的目标`<pluginManagement>`

例如，在你的父 POM 中，你有这样的东西：

```
<pluginManagement>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-surefire-plugin</artifactId>
      <version>2.5</version>
      <configuration>
         <systemPropertyVariables>
              <vendor.license.file>../licenses/vendor.lic</vendor.license.file>
         </systemPropertyVariables>
      </configuration>
    </plugin>
</pluginManagement> 
```

它为 POM 的子模块定义了 Surefire 2.5 版。请注意，您实际上可以在插件配置中放置更多版本，例如子项目继承（和覆盖）的配置。请参阅[Maven POM 参考 - 插件管理](http://maven.apache.org/pom.html#Plugin_Management)

# javascript - 如何暂停和恢复计时器？

> ID：12487352
> 
> 赞同：7
> 
> 时间：2012-09-19T01:24:07.337
> 
> 标签：javascript, jquery, html, setinterval, pausing-execution

我得到了这个函数，每当我点击一个按钮时，它就会以这种格式 00:00:00 启动一个计时器。但我不知道如何恢复和暂停功能。我发现了一些我认为可能会有所帮助的片段，但我无法使它们发挥作用。我是在 js 中使用对象的新手。

```
function clock() {
  var pauseObj = new Object();

  var totalSeconds = 0;
  var delay = setInterval(setTime, 1000);

  function setTime() {
    var ctr;
    $(".icon-play").each(function () {
      if ($(this).parent().hasClass('hide')) ctr = ($(this).attr('id')).split('_');
    });

    ++totalSeconds;
    $("#hour_" + ctr[1]).text(pad(Math.floor(totalSeconds / 3600)));
    $("#min_" + ctr[1]).text(pad(Math.floor((totalSeconds / 60) % 60)));
    $("#sec_" + ctr[1]).text(pad(parseInt(totalSeconds % 60)));
  }
} 
```

pad() 只是添加前导零

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-19T01:42:26.623

我认为创建时钟对象会更好。见代码（见演示：http: [//jsfiddle.net/f9X6J/](http://jsfiddle.net/f9X6J/)）：

```
var Clock = {
  totalSeconds: 0,

  start: function () {
    var self = this;

    this.interval = setInterval(function () {
      self.totalSeconds += 1;

      $("#hour").text(Math.floor(self.totalSeconds / 3600));
      $("#min").text(Math.floor(self.totalSeconds / 60 % 60));
      $("#sec").text(parseInt(self.totalSeconds % 60));
    }, 1000);
  },

  pause: function () {
    clearInterval(this.interval);
    delete this.interval;
  },

  resume: function () {
    if (!this.interval) this.start();
  }
};

Clock.start();

$('#pauseButton').click(function () { Clock.pause(); });
$('#resumeButton').click(function () { Clock.resume(); }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T01:32:15.170

仅仅清除间隔是行不通的，因为 totalSeconds 不会增加。我会设置一个标志来确定时钟是否暂停。

该标志将在调用 pause() 时设置或在 resume() 时取消设置。我将 totalSeconds 增加分隔为始终运行的“滴答”超时，即使在暂停时也是如此（以便我们可以跟踪恢复的时间）。

因此，如果时钟没有暂停，tick 函数只会更新时间。

```
function clock()
{
    var pauseObj = new Object();

    var totalSeconds = 0;
    var isPaused = false;
    var delay = setInterval(tick, 1000);

    function pause()
    {
        isPaused = true;
    }

    function resume()
    {
        isPaused = false;
    }

    function setTime()
    {
        var ctr;
        $(".icon-play").each(function(){
            if( $(this).parent().hasClass('hide') )
                ctr = ($(this).attr('id')).split('_');
        });

        $("#hour_" + ctr[1]).text(pad(Math.floor(totalSeconds/3600)));
        $("#min_" + ctr[1]).text(pad( Math.floor((totalSeconds/60)%60)));
        $("#sec_" + ctr[1]).text(pad(parseInt(totalSeconds%60)));
    }

    function tick()
    {
        ++totalSeconds;

        if (!isPaused)
           setTime();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T01:28:00.683

使用[window.clearInterval](https://developer.mozilla.org/en-US/docs/DOM/window.clearInterval)取消使用`setInterval()`.

```
clearInterval(delay); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-16T17:05:04.680

```
 <html>
    <head><title>Timer</title>
    <script>

    //Evaluate the expression at the specified interval using setInterval()
    var a = setInterval(function(){disp()},1000);

    //Write the display() for timer
    function disp()
    {
         var x = new Date(); 

         //locale is used to return the Date object as string
         x= x.toLocaleTimeString();

        //Get the element by ID in disp()
        document.getElementById("x").innerHTML=x;
    }
    function stop()
    {
         //clearInterval() is used to pause the timer
        clearInterval(a);
    }
    function start()
    {    
        //setInterval() is used to resume the timer
        a=setInterval(function(){disp()},1000);
    }

    </script>
    </head>
    <body>
    <p id = "x"></p>
    <button onclick = "stop()"> Pause </button>
    <button onclick = "start()"> Resume </button>
    </body>
    </html> 
```

# android - 在运行时读取 Android 样式信息

> ID：12487358
> 
> 赞同：0
> 
> 时间：2012-09-19T01:24:58.843
> 
> 标签：android

我正在尝试在运行时检索 Android 样式值，因此我可以在自定义组件中应用它们。[（将样式 ID 作为第三个参数传递给嵌入式视图的构造函数似乎不起作用。）](https://stackoverflow.com/questions/3237752/android-set-textview-style-at-runtime)我找到了`Context. obtainStyledAttributes(int, int[])`，但这似乎神秘地无法检索我知道在样式中设置的特定属性。（也就是说，当 的`int[]`值`android.R.attr.*`包含样式中指定的属性和样式中**未**指定的属性的混合时，将为某些但不是全部指定的属性`TypedArray`具有值（*ie* `TypedArray. hasValue(int)` ）在风格上。）

我还发现`Resources. obtainTypedArray(int)`，它似乎总是具有样式中的所有值 - 但它似乎很难使用。问题是这些值似乎没有指定它们用于哪个属性 - 它们只是按照属性在`<style>`资源中出现的顺序出现。

*   即使在我知道我正在检查哪种风格的特殊情况下，我也无法对属性的顺序做出假设：有人可能会出现并按字母顺序、功能或随机排序。

*   在更一般的情况下，我需要处理用户可能指定的任何样式资源，我需要按 `android.R.attr.*`值进行探测。

所以，我的问题是：**有什么方法可以找到样式包含的属性、顺序吗？**

我可以打电话`Resources. getIntArray( styleId )`，但这并*没有*给我一个`int[]`价值`android.R.attr.*`！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:05:41.657

我找到了原因`Context. obtainStyledAttributes(int, int[])`，一直“神秘地失败 [ing]”：[需要对 int[] 进行排序](https://stackoverflow.com/questions/8675709/getting-style-attributes-dynamically)。

# ruby-on-rails - Rails 中的范围以优化搜索

> ID：12487359
> 
> 赞同：1
> 
> 时间：2012-09-19T01:25:06.330
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我正在尝试改进我的文章并让我的用户灵活地决定他们想要查看的内容。

这里有关系的模型

```
 Article
    has_many :tags, through: :articletags
  ArticleTags
    belongs_to :article
    belongs_to :tags
  Tags
    has_many :article, through: articletags 
```

现在的想法是使用将进入文章并在侧面看到 tags.title，然后使用 Article where tags = "world" 刷新页面。现在我正在尝试使用范围来执行此操作，但我不确定该怎么做。这是我模型中的范围

```
scope :by_tags, where(title => ?, "world news") 
```

我怎么称呼它

```
<%= link_to (tag.title), articles_path(:scope => "test") %> 
```

但显然它不起作用我该如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:11:56.930

**看法**

```
<%= link_to (tag.title), articles_path(:scope => tag.title) %> 
```

**型号（条）**

```
def self.by_tags(tag)
  joins(:tags).where('tags.title = ?', tag)
end 
```

**控制器**

```
def index
  @articles = Article.by_tags(params[:scope])
end 
```

# mysql - 不同行的 SQL SUM()

> ID：12487361
> 
> 赞同：0
> 
> 时间：2012-09-19T01:25:18.483
> 
> 标签：mysql, sql, sum

我有一个看起来像这样的表：

```
+------+----------+----------+--------+
|  id  |  team    |   match  |  score |
+------+----------+----------+--------+
|  1   |     1    |    1     |  10    |
|  2   |     2    |    1     |  5     |
|  3   |     1    |    1     |  5     |
|  4   |     1    |    2     |   6    |
|  5   |     2    |    1     |   4    |
+------+----------+----------+--------+ 
```

我需要计算`SUM()`每场比赛和球队的所有分数，我知道如何计算总和......

```
SELECT SUM(score) AS team_a_score WHERE `match`='1' 
```

我期待这样的事情......

```
+----------------+
| team_a_score   |
+----------------+
|    24          |
+----------------+ 
```

但我真正需要做的是分别获得第 1 队和第 2 队的分数，所以它会更像这样......

```
+----------------+----------------+
| team_a_score   |  team_b_score  |
+----------------+----------------+
|    15          |     9          |
+----------------+----------------+ 
```

希望这足够清楚

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T01:30:51.713

看起来您希望结果在同一行中，因此您将使用以下命令：

```
select sum(case when team = 1 then score end) team_a,
  sum(case when team = 2 then score end) team_b
from yourtable
where `match` = 1 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/c7e7b/5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T01:27:45.053

这个怎么样

```
 SELECT team, SUM(score) AS team_a_score FROM some_table GROUP BY team 
```

结果不会在列中（如您的问题中所述），而是在行中，每行都带有团队编号和总分

```
+----------+---------------+
|  team    |   score       |
+----------+---------------+
|     1    |    15         |
|     2    |     9         | 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-19T01:26:49.383

使用`GROUP_BY`：

```
SELECT SUM(score) AS team_a_score WHERE `match`='1' GROUP_BY team 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-19T01:30:16.580

```
SELECT team,sum(score) AS team_score
FROM table_missed
WHERE `match`='1'
GROUP by team 
```

# c# - 在另一个 ASP.NET 网站中嵌入 ASP.NET 网站

> ID：12487363
> 
> 赞同：1
> 
> 时间：2012-09-19T01:25:51.810
> 
> 标签：c#, asp.net, .net

我有一个 ASP.NET 站点（站点 1），它有一些使用 jquery 将数据绑定到执行数据库操作的控件和 CRUD 方法的 UI。

我想将此 ASP.NET 站点 1 嵌入到另一个 ASP.NET 站点（站点 2）中，这样当用户单击站点 2 上的按钮/链接时，站点 1 会加载到模式弹出窗口中，并且站点 2 上的用户可以在该弹出窗口中执行他们将在站点 1 上执行的所有操作。所以站点 1 实际上是站点 2 的黑盒。

我曾想过在站点 2 中使用 iframe 来加载站点 1，但我不确定如何将参数传递给站点 1。任何帮助或替代解决方案将不胜感激。

我正在使用 .NET 3.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T01:44:48.640

你可能想看看 FancyBox 库。你应该能够做你正在尝试的事情。

# forms - Rails 表单验证：如何正确显示复选框的错误

> ID：12487364
> 
> 赞同：1
> 
> 时间：2012-09-19T01:25:56.393
> 
> 标签：forms, ruby-on-rails-3, validation, checkbox

据我所知，对于之前遇到此问题的人来说，我的问题应该很容易回答......

我在 Rails 中有一个注册表单，它应该突出显示单击提交按钮时未正确完成的字段（它还应该显示相关的错误消息）。该表单仅包含输入字段和一个复选框。虽然表单的每个部分都正确显示了错误，但当用户尝试在未选中复选框的情况下提交表单时，复选框标签未正确突出显示为红色。

当复选框未选中时，我应该在我的代码中修改什么以突出显示复选框标签？

这是视图代码：

```
<%= form_for(@user) do |f| %>
<%= render 'shared/error_messages', object: f.object %>

  <%= f.label :name %>
  <%= f.text_field :name %>

  <%= f.label :email %>
  <%= f.text_field :email %>

  <%= f.label :password %>
  <%= f.password_field :password %>

  <%= f.label :password_confirmation, "Password confirmation" %>
  <%= f.password_field :password_confirmation %>

  <br>
  <%= f.check_box :terms_of_service %>
  <label_for="user_terms_of_service">I agree to the <%= link_to "Terms of Service", policies_path %>
  </label>
  <br><br>

  <%= f.submit "Create my account", :class => "btn btn-large btn-primary" %>
<% end %> 
```

此外，这是我在表单提交不正确后使用 Firebug 看到的复选框 - 问题是带有 class="field_with_errors" 的 div 放在复选框标签之前。

```
<br>
<input type="hidden" value="0" name="user[terms_of_service]">
<div class="field_with_errors">
<input id="user_terms_of_service" type="checkbox" value="1" name="user[terms_of_service]">
</div>
<label_for="user_terms_of_service"> 
```

谢谢你的帮助，亚历山德拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T02:28:05.173

我使用表单的方法是尽可能尝试使用 rails 标准，例如

添加到您的用户模型：

```
validates_acceptance_of :terms
attr_accessible :terms 
```

在你看来，

```
<%= form_for @user do |f| %>
  ...
  <%= f.check_box :terms %>
  ...
<% end %> 
```

实际上，除非您想授予未接受服务条款的用户访问权限，否则您实际上不需要在 users 表中添加额外的列，这些用户......不存在，因为他们无法完成注册。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T01:38:55.923

标签语法不正确。尝试

```
<%= f.label :user_terms_of_service, "I agree to the #{link_to 'Terms of Service', policies_path}.".html_safe %> 
```

# matrix - C++: Building a Matrix Class

> ID：12487366
> 
> 赞同：0
> 
> 时间：2012-09-19T01:26:20.247
> 
> 标签：matrix, computer-science

I know they are out there, but I think that I can learn a lot by creating my own. I do not want to get too convoluted with optimizing this thing, but I was hoping some folks could offer some input.

I am narrowing the scope of this project so that the goal is to end up with a Matrix class that could be used for Gaussian elimination and matrix addition and multiplication for now.

My outline is as follows:

```
Code:
1\. Class name: Matrix

2\. Uses <vector> as a building block.

3\. Constructors should consider:
  a. Data Type
  b. Size of Matrix to be created 

4\. Member functions:
  a. row swapping
  b. row multiply by non zero, real, constant
  c. add multiple of one row to another row 
  d. get/set Element
  e. augment (to append column of constants for solving systems)
  f. gauss solve

5\. Properties:
  a. is singular
  b. is zero
  c. is square 
```

I am sure there is much to consider, but I am just looking for a starting point.

Do you see any problems with using vector as my building block? Any other elementary member functions/properties you would suggest?

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T01:54:39.953

这看起来是一个好的开始。我会开始构建和测试你所拥有的......然后在需要时进行更改。

一旦您开始编写代码并进行测试，您将看到需要更改或添加的内容。

我会从一个 2x2 矩阵开始，然后再转向更大的矩阵。

# c# - What is SMTP Server Address and how to get SMTP Server Address?

> ID：12487369
> 
> 赞同：-4
> 
> 时间：2012-09-19T01:26:41.087
> 
> 标签：c#, .net, email, smtp, smtpclient

i am trying to send email from c# windows application and i need SMTP Server Address to send email but i don't know about SMTP Server Address, what is SMTP Server Address, how to get SMTP Server Address and how to use it.

this is the code:

```
System.Web.Mail.MailMessage message=new System.Web.Mail.MailMessage();
message.From="from e-mail";
message.To="to e-mail";
message.Subject="Message Subject";
message.Body="Message Body";
System.Web.Mail.SmtpMail.SmtpServer="SMTP Server Address";
System.Web.Mail.SmtpMail.Send(message); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T01:32:09.480

您要使用什么邮件服务器？？？通常你可以只搜索 SMTP 或 POP3 或任何你正在寻找的协议，它会为你提供端口、服务器以及连接到它所需的所有额外信息。

例如：

[http://support.google.com/mail/bin/answer.py?hl=en&answer=13287](http://support.google.com/mail/bin/answer.py?hl=en&answer=13287)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T02:12:52.007

首先，System.Web.Mail 命名空间实用程序被标记为“过时”，不应使用。相反，您应该使用 System.Net。在该名称空间中有一个“MailMessage”和一个“SmtpClient”类，它们将完成您正在尝试做的工作。

接下来，SMTP 服务器是在计算机上运行的进程，当连接到 inetrnet 时，它可以侦听和响应在特定端口上使用特定协议的传入请求。您可以将 SMTP 服务器视为邮局的机器，用于对邮件进行分类并将其路由到适当的邮箱。
.
SMTP 服务器有一个地址，就像互联网上需要与其他任何东西通信的所有其他东西一样。该地址用于通过正确的通信渠道将您的邮件消息发送到正确的机器。你可以把它想象成它的电话号码，你的邮件信息是一个将发送给它的文本。

接下来，您要查找的地址，我上次检查时是：smtp.gmail.com。因此，考虑到您需要停止使用 System.Web.Mail，并考虑到您的地址可能是 smtp.gmail.com，您的代码应如下所示：

```
 // setup mail message
        MailMessage message = new MailMessage();
        message.From = new MailAddress("from e-mail");
        message.To.Add(new MailAddress("to e-mail"));
        message.Subject = "Message Subject";
        message.Body = "Message Body";

        // setup mail client
        SmtpClient mailClient = new SmtpClient("smtp.gmail.com");
        mailClient.Credentials = new NetworkCredential("youraccount@gmail.com", "yourGmailPassword");

        // send message
        mailClient.Send(message); 
```

另外，这是一篇关于使用 gmail 作为 smtp 服务器的文章： [如何使用 Gmail 作为 SMTP 服务器](http://lifehacker.com/111166/how-to-use-gmail-as-your-smtp-server)

此外，如果 gmail 不适合您，您可以使用互联网提供商的 smtp 服务器。他们通常会将他们的 smtp 地址隐藏在他们网站的某个地方，以帮助想要设置他们的电子邮件程序的客户。如果您在其他地方找不到它，您也可以在帐户设置下查看 Outlook，如果您使用除 gmail 之外的任何东西，您应该在那里找到一个。

最后，请记住，如果不使用愿意接收和发送您的 maill 消息的 smtp 服务器，则无法发送电子邮件。通常，这类似于 gmail，或者您的 Internet 提供商的 smtp 服务器，地址通常是：smtp.providername.com。但是，例如，gmail 需要您的 smtp 服务器帐户凭据才能接收和发送您的消息。

# c++ - 在 main 之外的函数中使用结构

> ID：12487370
> 
> 赞同：1
> 
> 时间：2012-09-19T01:26:44.660
> 
> 标签：c++

要在 main() 之外的函数中使用结构，可以使用前向声明并在 main() 中定义它，还是必须在块之外定义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T02:21:46.467

如果在 中定义结构`main()`，它将隐藏结构的全局名称。所以外面的函数`main()`只能引用全局名称。此示例取自 C++ 2011 草案，第 9.1 节 p2：

```
struct s { int a; };

void g() {
    struct s;              // hide global struct s
                           // with a block-scope declaration
    s* p;                  // refer to local struct s
    struct s { char* p; }; // define local struct s
    struct s;              // redeclaration, has no effect
} 
```

没有语法可以从函数范围之外引用本地定义的类型。~~因此，即使使用模板也会失败，因为无法表达模板的实例化：~~

```
template <typename F> void bar (F *f) { f->a = 0; }

int main () {
    struct Foo { int a; } f = { 3 };
    bar(&f);                         // fail in C++98/C++03 but ok in C++11
} 
```

实际上，这在 C++11 中现在是允许的，正如这个[答案](https://stackoverflow.com/a/742617/315052)中所解释的那样。

# vb.net - 使用 LINQ 和 DBNulls 查找最小值和最大值列表

> ID：12487374
> 
> 赞同：0
> 
> 时间：2012-09-19T01:26:51.713
> 
> 标签：vb.net, linq, list, max, min

我有以下代码，它将从 double 类型的列表中获取最大值和最小值

```
Dim sprices As List(Of Double) = grp.ProductGroups.AsEnumerable().[Select](Function(sm) sm.Field(Of Double)("sprice")).Distinct().ToList()

        Dim min As Integer = sprices.Min()
        Dim max As Integer = sprices.Max() 
```

如何在第一行中出现异常“无法将 DBNull.Value 转换为类型 'System.Double'。请使用可为空的类型。” 我怎样才能避免这种情况或不将 DBNulls 添加到列表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T02:32:52.627

一种方法是使用可以为[空](http://msdn.microsoft.com/en-us/library/ms235245.aspx) `Double`的，可以表示为`Double?`：

```
Dim sprices As List(Of Double?) = grp.ProductGroups.AsEnumerable().[Select](Function(sm) sm.Field(Of Double?)("sprice")).Distinct().ToList() 
```

# objective-c - CoverStory reporting 0% coverage after running iPhone app

> ID：12487375
> 
> 赞同：1
> 
> 时间：2012-09-19T01:26:58.367
> 
> 标签：objective-c, ios, xcode, unit-testing

I have just started to use the unit testing features in Xcode 4.4.1 with the LLVM Compiler. I have created some basic unit tests. I have attempted to turn on code coverage by turning on the "Instrument Program Flow" and "Generate Test Coverage Files" in the Product section. Also, I have looked through and can't see anything written in the prefix header section. From what I have read in XCode 4.4.1 this is all you have to do to get it to work and it should generate .gcno and .gcda files in the objects-normal/i386 folder which can be opened with CoverStory to view the code coverage. After I quit my app the .gcno files are getting updated but I am not getting any .gcda files. I open the .gcno file in CoverStory which is showing a 0% coverage

Any help would be greatly appreciated

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T18:40:58.577

当应用程序干净退出时会生成 Gcda 文件。您是否正确关闭了应用程序？尝试`exit(0)`从您的测试/代码中调用。

或者，此[链接](http://code.google.com/p/coverstory/wiki/iOSGCov)建议退出模拟器而不是退出 Xcode，或添加

```
<key>UIApplicationExitsOnSuspend</key>
<true/> 
```

到你的清单。

# java - Stop randomize from picking same string in array twice in Java

> ID：12487377
> 
> 赞同：0
> 
> 时间：2012-09-19T01:27:28.513
> 
> 标签：java, arrays, string, random

Code

```
Random Randomizer = new Random () ;
  cardoneA = suits[Randomizer.nextInt(suits.length)];
  cardoneAv = ranks[Randomizer.nextInt(ranks.length)]; 
```

How can I stop the Randomizer from picking the same cards twice? Eg. If it picks a certain suit and rank, how can I stop it from picking it again? Also, how can I make it pick those two together, so that it can pick another card of the same value, as long as its a different class?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T01:33:59.320

只需像在现实生活中那样模拟一副纸牌：

1.  将所有尚未绘制的卡片存储在 ArrayList 中。
2.  生成一个介于 0 和 ArrayList 的当前大小之间的随机数
3.  取出被选中的卡片。现在数组的大小减少了一个。

该算法也称为[Fisher-Yates Shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T01:30:33.757

You can't prevent the randomizer from returning the same index multiple times. You'll need to keep a list of which cards - a combination of suit index and rank index - have already been chosen, and pick new random indices in a loop, looping until you get a card that you haven't already picked.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T01:33:30.710

与其跟踪您选择的卡片，不如跟踪您尚未选择的卡片，并在您尚未选择的卡片中随机选择数字。

1.  用所有可能的组合初始化一个列表
2.  生成一个 0 到（未选择的卡片数量 - 1）之间的随机数
3.  选择卡片并从列表中删除卡片
4.  重复第 2 步和第 3 步，直到您拥有所需数量的卡片，或已选择所有卡片。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T01:43:41.773

你想洗牌吗？

`list.add(list.remove(n));`如果是这样，其中 n 是从 0 到 的随机数的单行语句`list.size() - 1`。重复此操作约 500 次，以获得体面的洗牌。这是一个常见的洗牌；随机取出一张卡片，放在上面。

# r - 如何在 R 中实现方差函数

> ID：12487391
> 
> 赞同：1
> 
> 时间：2012-09-19T01:29:03.407
> 
> 标签：r, variance

我正在尝试从数据框中计算列的方差。我知道有用于计算方差的内置函数 var() 但我不确定如何通过将我的数据框列作为变量来编写方差函数。

```
var(banknote$Length)*((n-1)/n) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T01:38:47.883

如果您要获取方差的向量是一维的，就像您的情况一样，您可以简单地执行以下操作：

```
myvar = function(v) {
    m = mean(v)
    mean((m - v)^2)
} 
```

这假设（根据您的示例）您*不想*使用`n/(n-1)`更正。

# c++ - 重载运算符 << 输出布尔值。为什么？

> ID：12487393
> 
> 赞同：0
> 
> 时间：2012-09-19T01:29:11.257
> 
> 标签：c++, c++11, reference, operator-overloading, most-vexing-parse

xml_attribute.h

```
#pragma once
#ifndef XML_ATTRIBUTET_H
#define XML_ATTRIBUTET_H

#include <string>
#include <iostream>

struct XML_AttributeT{

    std::string tag;
    std::string value;

    //constructors
    explicit XML_AttributeT(std::string const& tag, std::string const& value);
    explicit XML_AttributeT(void);

    //overloaded extraction operator
    friend std::ostream& operator << (std::ostream &out, XML_AttributeT const& attribute);
};
#endif 
```

xml_attribute.cpp

```
#include "xml_attribute.h"

//Constructors
XML_AttributeT::XML_AttributeT(std::string const& tag_, std::string const& value_)
: tag{tag_}
, value{value_}
{}
XML_AttributeT::XML_AttributeT(void){}

//overloaded extraction operator
std::ostream& operator << (std::ostream &out, XML_AttributeT const attribute){
    return out << attribute.tag << "=" << attribute.value;
} 
```

驱动程序.cpp

```
#include <iostream>
#include <cstdlib>
#include "xml_attribute.h"

int main(){
    using namespace std;

    XML_AttributeT a();
    cout << a << endl;

    return EXIT_SUCCESS;
} 
```

驱动程序的输出是“1”，但我希望它是一个“=”符号。
为什么它输出对a的引用？
如果我更改`XML_AttributeT a();`它`XML_AttributeT a;`甚至不会编译。

我做错什么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T01:38:51.597

克里斯是正确的。您最初的问题是`XML_AttributeT a()`被解释为函数声明。`clang++`实际上会警告您：

```
Untitled.cpp:33:21: warning: empty parentheses interpreted as a function declaration [-Wvexing-parse]
    XML_AttributeT a(); 
```

您可以改用它`a{}`来解决此问题。

此时您会收到一个新错误：

```
Untitled.cpp:34:10: error: use of overloaded operator '<<' is ambiguous (with operand types 'ostream' (aka 'basic_ostream<char>') and 'XML_AttributeT')
    cout << a << endl; 
```

这是因为jogojapan所说的。您的实现`operator<<`是`XML_AttributeT const`用作属性类型而不是`XML_AttributeT const &`. 如果你解决了这个问题，它就会编译并给你想要的结果。

# ruby-on-rails - How to rescue the error exception raised by the `constantize` method?

> ID：12487404
> 
> 赞同：2
> 
> 时间：2012-09-19T01:31:11.630
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, exception, rescue

I am using Ruby on Rails 3.2.2 and I would like to properly rescue the following process flow by raising a "custom" error message:

```
def rescue_method
  # sample_string.class
  # => String
  # sample_string.inspect
  # => "ARubyConstantThatDoesNotExist"

  begin
    build_constant(sample_string)
  rescue
    raise("My custom error message: #{build_constant(sample_string)} doesn't exist.")
  end
end

def build_constant(sample_string)
  "AModule::#{sample_string}".constantize
end 
```

*Note*: I feel "forced" to use the [`constantize`](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-constantize) method also in the raised "custom" message in order to [DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself) code...

When the `rescue_method` is executed it seems that the `raise("My custom error message")` code is never executed and I get the following error:

```
uninitialized constant AModule::ARubyConstantThatDoesNotExist 
```

How to properly display the raised "custom" message (*since a further error exception is raised in the subsequent raised "custom" message*)? What do you advice about?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T02:11:08.090

问题是您的`build_constant`方法正在做两件事：

1.  构建类名。
2.  使用 . 将名称转换为类`constantize`。

当引发异常时，其中一件事想要使用另一件事。一个简单的解决方案是将这些单独的任务分开：

```
def build_class_name(sample_string)
  "AModule::#{sample_string}"
end

def rescue_method
  name = build_class_name(...)
  name.constantize
rescue NameError
  raise("My custom error message: #{name} doesn't exist.")
end 
```

您还应该更具体地了解您正在寻找的异常，所以我免费添加了它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-05-29T15:54:32.027

如果您不想依赖捕获任何异常，可以使用`safe_constantize`( [https://apidock.com/rails/ActiveSupport/Inflector/safe_constantize](https://apidock.com/rails/ActiveSupport/Inflector/safe_constantize) )。

目的相同，`constantize`但会`nil`在模块不存在时返回。

```
'UnknownModule::Foo::Bar'.safe_constantize  # => nil 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T01:41:31.257

```
begin
  "AModule::#{sample_string}".constantize
rescue SyntaxError, NameError => err
  raise("My custom error message")
end 
```

# c - Is it viable to write a Linux kernel-mode debugger for Intel x86-64 in Common Lisp, and with which Common Lisp implementation[s]?

> ID：12487405
> 
> 赞同：8
> 
> 时间：2012-09-19T01:31:20.210
> 
> 标签：c, assembly, linux-kernel, lisp, common-lisp

I'm interested in developing some kind of ring0 kernel-mode debugger for x86-64 in Common Lisp that would be loaded as a Linux kernel module and as I prefer Common Lisp to C in general programming, I wonder how different Common Lisp implementations would fit this kind of programming task.

The debugger would use some external disassembling library, such as [udis86](http://udis86.sourceforge.net/) via some [FFI](http://www.cliki.net/FFI). It seems to me that it's easiest to write kernel modules in C as they need to contain C functions `int init_module(void)` and `void cleanup_module(void)` ([The Linux Kernel Module Programming Guide](http://tldp.org/LDP/lkmpg/2.6/html/lkmpg.html)), so the kernel-land module code would call Common Lisp code from C by using [CFFI](http://common-lisp.net/project/cffi/manual/html_node/Tutorial_002dCallbacks.html). The idea would be to create a ring0 debugger for 64-bit Linux inspired by the idea of [Rasta Ring 0 Debugger](http://rr0d.droids-corp.org/), that is only available for 32-bit Linux and requires PS/2 keyboard. I think the most challenging part would be the actual debugger code with hardware and software breakpoints and low-level video, keyboard or USB input device handling. Inline assembly would help a lot in that, it seems to me that in SBCL inline assembly can be implemented by using VOPs ([SBCL Internals: VOP](http://sbcl-internals.cliki.net/VOP)) ([SBCL Internals: Adding VOPs](http://sbcl-internals.cliki.net/Adding%20VOPs)), and this [IRC log](http://www.bitchx.com/log/lisp-f/lisp-f-12-Jul-2010/lisp-f-12-Jul-2010-00.php) mentions that ACL (Allegro Common Lisp), [CCL (Clozure Common Lisp)](http://www.clozure.com/clozurecl.html) and CormanCL have LAPs (Lisp Assembly Programs). Both ACL and CormanCL are proprietary and thus discarded, but CCL (Clozure Common Lisp) could be one option. Capacity of building standalone executables is a requirement too; SBCL which I'm currently using has it, but as they are entire Lisp images, their size is quite big.

**My question is:** is it viable to create a ring0 kernel-mode debugger for Intel x86-64 in Common Lisp, with low-level code implemented in C and/or assembly, and if it is, which Common Lisp implementations for 64-bit Linux best suit for this kind of endeavour, and what are the pros and cons if there are more than one suitable Common Lisp implementation? Scheme can be one possible option too, if it offers some benefits over Common Lisp. I am well aware that the great majority of kernel modules are written in C, and I know C and x86 assembly well enough to be able to write the required low-level code in C and/or assembly. This is not an attempt to port Linux kernel into Lisp (see: [https://stackoverflow.com/questions/1848029/why-not-port-linux-kernel-to-common-lisp](https://stackoverflow.com/questions/1848029/why-not-port-linux-kernel-to-common-lisp)), but a plan to write in Common Lisp a Linux kernel module that would be used as a ring0 debugger.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T07:54:37.983

您可能想看看 Brad Beveridge 在 2008 年 2 月 2 日发表的关于使用 SBCL 的文件系统驱动程序的 lispvan 演讲“Doing Evil Things with Common Lisp”。

[谈话描述和文件](http://bc.tech.coop/blog/080229.html)

他在其中提到：

“用 CL 编写的 AC/C++ 调试器？？

现在完全是天上掉馅饼

但是，那该有多酷？

没有那么大的延伸，只需要能够写入库所在的内存以插入断点然后在 Lisp 端捕获信号

可以使用肮脏的技巧将 C 函数替换为对 Lisp 函数的调用

除了一些细节之外，这可能并不难——当然没有什么“新”</p>

肮脏的技巧将涉及用另一个跳转（没有链接的分支）覆盖 C 代码到 Lisp 回调中。当 Lisp 代码返回时，它可以通过链接寄存器直接跳转回原来的调用函数。

此外，我完全掩盖了编写调试器的真正困难——这将非常耗时。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T07:20:48.153

不，在 CL 中实现一个内核模块是不可行的，原因很明显，为了使这项工作你需要做很多黑客攻击，最终可能会失去 lisp 语言提供的所有好处，你的 lisp 代码看起来就像 S 表达式中的 C 代码一样。

编写内核模块以从内核导出所需的任何功能/数据，然后使用 ioctl 或读/写操作，任何用户模式程序都可以与模块通信。

我不确定是否有任何足够通用的内核模块可以实现 Lisp（或者可能是它的子集），这样您就可以在 Lisp 中编写代码，而这个通用模块读取 lisp 代码并将其作为子组件运行，基本上是内核 - > 通用 lisp 模块 -> 你的 lisp 代码（将在内核中运行）。

# windows - 批处理脚本适用于 XP 而不是 Win7

> ID：12487409
> 
> 赞同：1
> 
> 时间：2012-09-19T01:32:00.587
> 
> 标签：windows, batch-file

利用这些论坛的知识，我编写了一个有用的批处理脚本。

```
Del "- Output.tx_"
Del "- Output.txt"

FOR %%I in (*.txt) do @echo Filename: %%~nxI >>"- Output.tx_" & echo. >>"- Output.tx_" & echo. >>"- Output.tx_" & FOR %%f in (%%I) do type %%I >>"- Output.tx_" & echo. >>"- Output.tx_" & echo. >>"- Output.tx_"

TYPE "- Output.tx_" | MORE /E /P /S > "- Output.txt"
Del "- Output.tx_" 
```

我家的电脑是XP（SP3，32位），脚本完美结合文本文件如下图。

```
Filename: Test1.txt  

[Text file 1 contents]

Filename: Test2.txt  

[Text file 2 contents] 

... and so on. 
```

但是，几个月前，我在工作时在我的计算机上运行了这个脚本作为测试，但遇到了问题。工作的计算机装有 Windows 7（32 位，SP1），并且仅将文本文件的标题合并到输出文件中。这导致了以下结果：

```
Filename: Test1.txt  

Filename: Test2.txt     

... and so on. 
```

对于让脚本在 Windows 7 上正常工作的任何意见或反馈，我们将不胜感激。

谢谢，

DWIC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T02:51:25.133

我唯一能想到的是，Win7 计算机上的某些（或全部）文本文件的名称中有空格或特殊字符，因此 TYPE 无法找到它们。如果发生这种情况，应该有一条错误消息，但它不在您的输出文件中，因为您没有重定向 stderr。

这个问题可以通过引用变量来解决。

您的代码比它需要的更复杂。这是一个简化的版本，它做同样的事情，除了引用问题已得到修复。我还重定向了标准错误。

```
@echo off
2>nul del "- Output.txt"
(
  for %%F in (*.txt) do @(
    echo Filename: %%F
    echo.
    echo.
    type "%%F"
    echo.
    echo.
  )
) | more /s /p >"- Output.tx_" 2>&1
move "- Output.tx_" "- Output.txt" >nul 
```

# c - 为什么我这里没有错误？

> ID：12487413
> 
> 赞同：0
> 
> 时间：2012-09-19T01:32:21.897
> 
> 标签：c, linux, unix, ipc, shared-memory

当我从同一个共享内存段读取和写入时，为什么无法获得 sigsegv 或其他东西？正常吗？为什么我没有收到任何错误？

（我知道我不叫 shmclt 或 shmdt）（：

```
#include <stdio.h>
#include <sys/shm.h>
#include <sys/stat.h>

int parent(char*);
int child(char*);

int main ()
{
    int shmid = shmget (0xACA0E5,30*sizeof(char),
                IPC_CREAT | S_IRUSR | S_IWUSR);

    char *shared = (char*) shmat(shmid,0,0);

    if (fork())
        return parent(shared);
    else
        return child(shared);

}

int parent (char* shared)
{
    while(1)
    {
        printf("F: %s",shared);
        sprintf(shared,"FATHER \t%p\n",shared);
    }
}

int child(char* shared)
{
    while(1)
    {
        printf("C: %s",shared);
        sprintf(shared,"CHILD \t%p\n",shared);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T01:37:52.240

是的，这种行为是完全正常的。操作系统不会阻止您覆盖共享内存段中自己的数据。如果你想避免这种情况，你需要引入某种 IPC 来同步对共享内存区域的访问。

# python - python正则表达式重复模式匹配

> ID：12487415
> 
> 赞同：1
> 
> 时间：2012-09-19T01:33:04.983
> 
> 标签：python, regex

我想要一些关于如何编写验证模式的正则表达式的想法

前任。`.??2`

多个字符之一，后跟两个问号，后跟一个或多个数字，如果只有另一个重复模式，则分隔符将是分号。

更多示例

`--??9;.??50;,??3`- 在这个例子中，我有重复的模式，这就是为什么分号

或者

`*??5`- a`*`后跟两个 qnestions 标记后跟一个数字并且没有分号，因为没有重复组

这是我目前拥有的

`.+\?\?\d+(;|)+`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T01:36:33.720

基本模式是`.+?\?\?\d+`。我们已经制作了第一个`.+`非贪婪的，因此它不会立即尝试匹配整个字符串。使用重复组来捕获后续模式：`r'(.+?\?\?\d+)(;.+?\?\?\d+)*'`

# node.js - 如何组织使用 sequelize 的节点应用程序？

> ID：12487416
> 
> 赞同：131
> 
> 时间：2012-09-19T01:33:22.297
> 
> 标签：node.js, express, sequelize.js

我正在寻找一个使用 sequelize ORM 的示例 nodejs 应用程序。

我主要担心的是，如果这些模型由于 require() 依赖循环而彼此之间具有复杂的关系，那么在单独的 js 文件中定义模型似乎几乎是不可能的。也许人们将所有模型定义在一个非常长的文件中？

我主要对如何在整个应用程序中定义和使用模型感兴趣。我想验证一下我自己做的事情是“好”的做事方式。

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-10-31T03:52:28.540

## 短篇小说

在这种情况下，诀窍不是*在*文件中初始化模型，而只是为其初始化提供必要的信息，并让一个集中的模块负责模型的设置和实例化。

所以步骤是：

*   有几个模型文件，其中包含有关模型的数据，例如字段、关系和选项。
*   有一个单例模块，它加载所有这些文件并设置所有模型类和关系。
*   在 app.js 文件中设置你的单例模块。
*   从单例模块获取模型类，**不要**在模型文件上使用`require`，而是从单例加载模型。

## 更长的故事

以下是此解决方案的更详细说明以及相应的源代码：

[http://jeydotc.github.io/blog/2012/10/30/EXPRESS-WITH-SEQUELIZE.html](http://jeydotc.github.io/blog/2012/10/30/EXPRESS-WITH-SEQUELIZE.html)

# 编辑：这是一个非常古老的答案！（向下阅读以获取信息）

**它在很多方面都是旧的和有限的！**

*   **首先**，正如@jinglesthula 在评论中提到的（我也经历过） - 需要这些文件存在问题。这是因为它的`require`工作方式与`readdirSync`!

*   **其次**-您的关系**非常**有限-代码不为这些关联提供*选项*，因此您**无法**`belongsToMany`根据需要创建`through`属性。您可以制作最基本的 assocs。

*   **第三**- 你的模型关系非常有限！如果你仔细阅读代码，你会发现关系是一个**Object**而不是**Array**，所以如果你想创建**多个**相同类型的关联（比如有两次`belongsTo`） - 你不能！

*   **第四**- 你不需要那个单身的东西。nodejs 中的每个模块本身都是单例的，所以这一切都无缘无故地变得非常复杂。

你应该看到农场的答案！（文章的链接已损坏，但我将使用 sequelize 的官方示例修复它：[https](https://github.com/sequelize/express-example/blob/master/models/index.js) ://github.com/sequelize/express-example/blob/master/models/index.js - 你可以浏览整个项目以了解正在发生的事情）。

ps 我正在编辑这篇文章，因为它的投票率很高，以至于人们甚至都看不到任何新的答案（就像我一样）。

**编辑：**刚刚将链接更改为同一篇文章的副本，但在 Github 页面中

* * *

## 回答 #2

> 赞同：96
> 
> 时间：2013-12-15T03:54:36.673

[SequelizeJS 在他们的网站上有一篇文章](http://sequelize.readthedocs.org/en/1.7.0/articles/express/)解决了这个问题。

*[链接已损坏，但您可以在此处](https://github.com/sequelize/express-example/blob/master/models/index)找到工作示例项目并浏览它。请参阅上面的编辑答案，了解为什么这是一个更好的解决方案。*

文章摘录：

*   模型/index.js

    该文件的想法是配置与数据库的连接并收集所有模型定义。一旦一切就绪，我们将调用与每个模型关联的方法。此方法可用于将模型与其他模型相关联。

    ```
     var fs        = require('fs')
            , path      = require('path')
            , Sequelize = require('sequelize')
            , lodash    = require('lodash')
            , sequelize = new Sequelize('sequelize_test', 'root', null)
            , db        = {} 

          fs.readdirSync(__dirname)
            .filter(function(file) {
              return (file.indexOf('.') !== 0) && (file !== 'index.js')
            })
            .forEach(function(file) {
              var model = sequelize.import(path.join(__dirname, file))
              db[model.name] = model
            })

          Object.keys(db).forEach(function(modelName) {
            if (db[modelName].options.hasOwnProperty('associate')) {
              db[modelName].options.associate(db)
            }
          })

          module.exports = lodash.extend({
            sequelize: sequelize,
            Sequelize: Sequelize
          }, db) 
    ```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2015-01-30T12:42:18.360

我创建了一个包***[sequelize-connect](https://www.npmjs.com/package/sequelize-connect)***来帮助人们处理这个问题。它遵循此处的 Sequelize 建议约定：http: [//sequelize.readthedocs.org/en/1.7.0/articles/express/](http://sequelize.readthedocs.org/en/1.7.0/articles/express/)

此外，就其界面而言，它的功能也更像 Mongoose。它允许您指定模型所在的一组位置，还允许您定义自定义匹配函数以匹配您的模型文件。

用法基本上是这样的：

```
var orm = require('sequelize-connect');

orm.discover = ["/my/model/path/1", "/path/to/models/2"];      // 1 to n paths can be specified here
orm.connect(db, user, passwd, options);                        // initialize the sequelize connection and models 
```

然后您可以访问模型并像这样进行续集：

```
var orm       = require('sequelize-connect');
var sequelize = orm.sequelize;
var Sequelize = orm.Sequelize;
var models    = orm.models;
var User      = models.User; 
```

希望这可以帮助某人。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-10-31T04:05:29.207

我开始在 Express.js 应用程序中使用 Sequelize。很快就遇到了你所描述的性质的问题。也许我不太了解 Sequelize，但对我来说，不仅仅是从一张表中进行选择，这并不是很方便。通常你会使用从两个或多个表中选择，或者在纯 SQL 中使用联合，你必须运行单独的查询，并且由于 Node 的异步特性，它只会增加复杂性。

因此我不再使用 Sequelize。此外，我正在从模型中使用从数据库中获取的任何数据切换。在我看来，最好完全抽象获取数据。原因是 - 假设您不只是使用 MySQL（在我的情况下，我同时使用 MySQL 和 MongoDB），但您可以从任何数据提供者和任何传输方法获取数据，例如 SQL、no-SQL、文件系统、外部 API、FTP、SSH 等。如果你试图在模型中完成所有这些，你最终会创建复杂且难以理解的代码，这些代码很难升级和调试。

现在您要做的是让模型从知道从何处以及如何获取数据的层获取数据，但是您的模型仅使用 API 方法，例如`fetch`,等。在该层内`save`，`delete`您有特定数据提供者的特定实现。例如，您可以从本地机器上的 PHP 文件或 Facebook API 或 Amazon AWS 或远程 HTML 文档等请求某些数据。

**PS**其中一些想法是从*Cloud9的**建筑师*那里借来的：http: [//events.yandex.ru/talks/300/](http://events.yandex.ru/talks/300/)

 ** * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-05-29T19:24:51.810

我将其设置为 Farm 和文档描述。

但是我遇到了一个额外的问题，即在我将附加到每个函数中的模型的实例方法和类方法中，我需要索引文件来获取其他数据库对象。

通过使所有模型都可以访问它们来解决它。

```
var Config = require('../config/config');

 var fs = require('fs');
var path = require('path');
var Sequelize = require('sequelize');
var _ = require('lodash');
var sequelize;
var db = {};

var dbName, dbUsername, dbPassword, dbPort, dbHost;
// set above vars

var sequelize = new Sequelize(dbName, dbUsername, dbPassword, {
dialect: 'postgres', protocol: 'postgres', port: dbPort, logging: false, host: dbHost,
  define: {
    classMethods: {
        db: function () {
                    return db;
        },
        Sequelize: function () {
                    return Sequelize;
        }

    }
  }
});

fs.readdirSync(__dirname).filter(function(file) {
   return (file.indexOf('.') !== 0) && (file !== 'index.js');
}).forEach(function(file) {
  var model = sequelize.import(path.join(__dirname, file));
  db[model.name] = model;
});

Object.keys(db).forEach(function(modelName) {
  if ('associate' in db[modelName]) {
      db[modelName].associate(db);
  }
});

module.exports = _.extend({
  sequelize: sequelize,
  Sequelize: Sequelize
}, db); 
```

并在模型文件中

```
var classMethods = {
  createFromParams: function (userParams) {
    var user = this.build(userParams);

    return this.db().PromoCode.find({where: {name: user.promoCode}}).then(function (code) {
        user.credits += code.credits;
                return user.save();
    });
  }

};

module.exports = function(sequelize, DataTypes) {
  return sequelize.define("User", {
  userId: DataTypes.STRING,
}, {  tableName: 'users',
    classMethods: classMethods
 });
}; 
```

我只对类方法这样做，但你也可以对实例方法做同样的事情。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-08-06T10:12:23.900

我遵循官方指南：[http](http://sequelizejs.com/heroku) ://sequelizejs.com/heroku ，它有一个模型文件夹，将每个模块设置在单独的文件中，并有一个索引文件来导入它们并设置它们之间的关系。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-01-31T17:08:47.290

样本模型续集

```
'use strict';
const getRole   = require('../helpers/getRole')
const library   = require('../helpers/library')
const Op        = require('sequelize').Op

module.exports = (sequelize, DataTypes) => {
  var User = sequelize.define('User', {
    AdminId: DataTypes.INTEGER,
    name: {
      type: DataTypes.STRING,
      validate: {
        notEmpty: {
          args: true,
          msg: 'Name must be filled !!'
        },
      }
    },
    email: {
      type: DataTypes.STRING,
      validate: {
        notEmpty: {
          args: true,
          msg: 'Email must be filled !!'
        },
        isUnique: function(value, next) {
          User.findAll({
            where:{
              email: value,
              id: { [Op.ne]: this.id, }
            }
          })
          .then(function(user) {
            if (user.length == 0) {
              next()
            } else {
              next('Email already used !!')
            }
          })
          .catch(function(err) {
            next(err)
          })
        }
      }
    },
    password: {
      type: DataTypes.STRING,
      validate: {
        notEmpty: {
          args: true,
          msg: 'Password must be filled !!'
        },
        len: {
          args: [6, 255],
          msg: 'Password at least 6 characters !!'
        }
      }
    },
    role: {
      type: DataTypes.INTEGER,
      validate: {
        customValidation: function(value, next) {
          if (value == '') {
            next('Please choose a role !!')
          } else {
            next()
          }
        }
      }
    },
    gender: {
      type: DataTypes.INTEGER,
      validate: {
        notEmpty: {
          args: true,
          msg: 'Gender must be filled !!'
        },
      }
    },
    handphone: {
      type: DataTypes.STRING,
      validate: {
        notEmpty: {
          args: true,
          msg: 'Mobile no. must be filled !!'
        },
      }
    },
    address: DataTypes.TEXT,
    photo: DataTypes.STRING,
    reset_token: DataTypes.STRING,
    reset_expired: DataTypes.DATE,
    status: DataTypes.INTEGER
  }, {
    hooks: {
      beforeCreate: (user, options) => {
        user.password = library.encrypt(user.password)
      },
      beforeUpdate: (user, options) => {
        user.password = library.encrypt(user.password)
      }
    }
  });

  User.prototype.check_password = function (userPassword, callback) {
    if (library.comparePassword(userPassword, this.password)) {
      callback(true)
    }else{
      callback(false)
    }
  }

  User.prototype.getRole = function() {
    return getRole(this.role)
  }

  User.associate = function(models) {
    User.hasMany(models.Request)
  }

  return User;
};
```

* * *

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-06-13T08:32:08.997

[您可以使用http://sequelizejs.com/documentation#models-import](http://sequelizejs.com/documentation#models-import)从其他文件导入模型`sequelize.import`

这样你就可以拥有一个用于 sequelize 的单例模块，然后加载所有其他模型。

实际上这个答案与 user1778770 的答案非常相似。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-03-23T03:54:26.553

> 我正在寻找一个使用 sequelize ORM 的示例 nodejs 应用程序。

您可能有兴趣查看 PEAN.JS 样板解决方案。

*   [https://github.com/StetSolutions/pean](https://github.com/StetSolutions/pean)

> PEAN.JS 是一个全栈 JavaScript 开源解决方案，它为基于 PostgreSQL、Node.js、Express 和 AngularJS 的应用程序提供了坚实的起点。

PEAN 项目是 MEAN.JS 项目的一个分支（不要与 MEAN.IO 或*通用*MEAN 堆栈混淆）。

*   [https://github.com/meanjs/mean](https://github.com/meanjs/mean)

PEAN 用 PostgreSQL 和 Sequelize 替换了 MongoDB 和 Mongoose ORM。MEAN.JS 项目的一个主要好处是它为具有许多移动部件的堆栈提供的组织。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-10-12T23:57:15.430

You can also use a dependency injection which provides an elegant solution to this. Here's one [https://github.com/justmoon/reduct](https://github.com/justmoon/reduct)*

# wpf - TabItem 事件处理中的 DataGrid

> ID：12487417
> 
> 赞同：0
> 
> 时间：2012-09-19T01:33:28.133
> 
> 标签：wpf, datagrid, tabitem, routed-events, mahapps.metro

我有一个带有两个 TabItem 的 TabControl，在一个 TabItem 内我有一个 DataGrid。我正在尝试处理 TabItem 单击，并且它可以工作，但是，当我单击“dataGrid1”的一行时，也会触发 TabItem 单击的事件“TabItem_MouseLeftButtonUp”。见代码：

```
<TabControl Height="211" HorizontalAlignment="Left" Margin="33,29,0,0" Name="tabControl1" VerticalAlignment="Top" Width="417" >
        <TabItem Header="tabItem1" Name="tabItem1">
            <Grid />
        </TabItem>
        <TabItem MouseLeftButtonUp="TabItem_MouseLeftButtonUp">
            <DataGrid AutoGenerateColumns="True" Height="134" Name="dataGrid1" Width="307" />
        </TabItem>
</TabControl> 
```

注意：我不能使用个性化`<TabItem.Header>`，因为我正在使用 MahApps，如果我使用 TabItem.Header 样式 os TabItem 将会中断。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T04:39:14.510

您将收到带有 MouseLeftButtonUp 事件的 EventArgs。只需过滤掉您需要的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T05:57:07.740

该`MouseLeftButtonUp`事件是冒泡路由事件。当您在`DataGrid`s 行时，事件通过其祖先冒泡并调用相应的处理程序，在您的情况下为**TabItem_MouseLeftButtonUp 。**`TabItem`

在您的**TabItem_MouseLeftButtonUp**事件中，您可以检查谁引发了事件，哪个控件是原点。如果不是`TabItem`什么都不做。

```
private void TabItem_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
{
     if(sender is TabItem)
     {
           //do the work
     }
} 
```

# javascript - 取值 1-31 并将其转换为带有 JavaScript 的序号日期

> ID：12487422
> 
> 赞同：12
> 
> 时间：2012-09-19T01:35:19.117
> 
> 标签：javascript, date, web, frontend

是否有 JavaScript 代码片段可以取值 1-31 并将其转换为第 1、第 2、第 3 等？

谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-19T01:40:05.263

```
function getOrdinal(n) {
    var s=["th","st","nd","rd"],
    v=n%100;
    return n+(s[(v-20)%10]||s[v]||s[0]);
} 
```

感谢@RobG 位修改版

```
function getOrdinal(n) {
    if((parseFloat(n) == parseInt(n)) && !isNaN(n)){
        var s=["th","st","nd","rd"],
        v=n%100;
        return n+(s[(v-20)%10]||s[v]||s[0]);
    }
    return n;     
} 
```

测试

```
getOrdinal("test");   // test
getOrdinal(1.5);      // 1.5
getOrdinal(1);        // 1st
getOrdinal(2);        // 2nd
getOrdinal(3);        // 3rd
getOrdinal(4);        // 4th
getOrdinal(true);     // true
getOrdinal(Infinity); // Infinity
getOrdinal(NaN);      // NaN
getOrdinal(void 0);   // undefined 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T02:25:34.187

您可能会发现将函数猴子修补到 Number 原型中很方便，因此您可以将其作为数字上的方法调用（从 Pradeep 的答案中无耻地窃取了实现）：

```
Number.prototype.toOrdinal = function() {
  var n = this.valueOf(),
      s = [ 'th', 'st', 'nd', 'rd' ],
      v = n % 100;
  return n + (s[(v-20)%10] || s[v] || s[0])
} 
```

示例使用：

```
var someDay = Math.floor(Math.random() * 31 + 1);
alert(someDay.toOrdinal()) 
```

或者你可能认为猴子补丁是邪恶的；像往常一样，YMMV。

（我有时称这种方法为特殊方法`th`，但在不需要括号进行调用的语言中效果更好。）

添加逻辑说明。特定于 Javascript 的关键点：

1.  `%`运算符返回负除数模正除数的负结果（所以是`-1 % 5`；`-1`模运算符的许多其他实现只返回和之间的答案`0`，`n-1`所以`-1 % 5`是`4`）。
2.  尝试通过超出有效索引范围（负数或超出数组末尾）的值对数组进行索引会导致该`undefined`值是错误的。

逻辑利用这些事实从包含这些部分的紧凑表达式中返回正确的后缀。

1.  尝试访问`s[(v-20)%10]`. 如果`v`（给定的数以 100 为模）小于 20，则索引为负数并且数组访问返回`undefined`. 否则，数组索引在 0 到 9 之间。值 0 到 3 返回正确的关联后缀（“th”、“st”、“nd”和“rd”），而大于 3 的值将再次返回`undefined`。

2.  如果 1 的结果是一个定义的值，则返回它；否则，尝试访问`s[v]`. 如果`v`它本身是 0、1、2 或 3，我们再次分别得到“th”、“st”、“nd”或“rd”。否则，我们会得到一个未定义的值，并且表达式会转到下一个选项。

3.  如果上述结果均未定义，则返回`s[0]`，即“th”。

结果是从 4 到 20 的所有数字（包括 11、12 和 13）都得到“th”，而所有其他以 1、2 或 3 结尾的数字都得到“st”、“nd”和“rd”，分别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T03:59:48.390

Pradeep 的回答很酷，但是如果它不是添加序数的合适值（比如只返回值），那么更强大的东西应该测试该值并做一些明智的事情，例如

```
var getOrdinal = (function() {

    var re = /^\d+$/;
    var ordinal = ["th","st","nd","rd"];

    return function (value) {

      var t;

      if (re.test(String(value))) {
        t = value % 100;
        return t + (ordinal[(t - 20 % 10)] || ordinal[t] || 'th');            
      }

      return value;
    }
}());

getOrdinal( void 0 );  // undefined
getOrdinal(        );  // undefined
getOrdinal( NaN    );  // NaN
getOrdinal( true   );  // true
getOrdinal( 1.0    );  // 1st
getOrdinal( ''     );  // '' (empty string)
getOrdinal(Infinity);  // Infinity 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-31T22:23:21.027

```
npm install ordinal 
```

适用于浏览器和节点。然后只是：

```
var ordinal = require('ordinal')

ordinal(1);   //=> '1st'
ordinal(2);   //=> '2nd'
ordinal(3);   //=> '3rd'
ordinal(4);   //=> '4th'

ordinal(11);  //=> '11th'
ordinal(12);  //=> '12th'
ordinal(13);  //=> '13th'

ordinal(21);  //=> '21st'
ordinal(22);  //=> '22nd'
ordinal(23);  //=> '23rd'
ordinal(24);  //=> '24th' 
```

[https://www.npmjs.com/package/ordinal](https://www.npmjs.com/package/ordinal)

# jquery - jQuery UI 自动完成在开发中完美运行，几乎在生产中运行

> ID：12487423
> 
> 赞同：0
> 
> 时间：2012-09-19T01:35:30.977
> 
> 标签：jquery, ruby-on-rails, jquery-ui, jquery-autocomplete

我有一个带有 jquery ui 自动完成搜索输入的 rails 应用程序。它在开发中完美运行，甚至在生产模式下将请求发送到服务器，因此直到下拉菜单的所有内容都运行良好。问题是自动完成下拉菜单没有显示，甚至没有一个空的下拉菜单。

我不知道为什么会这样，因为它在开发中完美运行。它在 Heroku 上不起作用，现在我已经切换到 EC2 它也不起作用。同样的结果。

我知道显示一些代码是正常的，但我不知道如果相关代码工作正常，该显示什么。

有没有其他人有这个问题？如果您要求代码，我会发布它。

应用程序.css.sass

```
@import jquery.ui.all
@import variables.css.scss
@import bootstrap
@import sass-rules.css.scss
@import fonts.css.scss
@import general.css.scss
@import containers.css.scss
@import jquery.Jcrop.min
@import header.css.scss
@import side_bar.css.scss
@import modal.css.scss
@import home.css.scss
@import users.css.scss
@import items.css.scss
@import messages.css.scss
@import notifications.css.scss
@import me.css.scss
@import friends.css.scss
@import discover.css.scss 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T02:30:51.603

解决了。这就是发生的事情......

我在开发模式下使用 SQLite3，在生产中使用 PostgreSQL。SQLite 正在搜索数据库并返回不区分大小写的结果，而 PostgreSQL 正在返回区分大小写的结果，因此在生产中进行测试时，它没有返回任何结果，一个空哈希。作为我正在使用的唯一 jQuery UI 组件，我认为 css 已损坏。

# bash - bash变量中的第一个字符大写

> ID：12487424
> 
> 赞同：210
> 
> 时间：2012-09-19T01:35:37.280
> 
> 标签：bash

我想用 bash 将字符串中的第一个字符大写。

```
foo="bar";

//uppercase first character

echo $foo; 
```

应该打印“酒吧”；

* * *

## 回答 #1

> 赞同：397
> 
> 时间：2012-09-19T01:40:27.047

使用 bash 的一种方法（版本 4+）：

```
foo=bar
echo "${foo^}" 
```

印刷：

```
Bar 
```

* * *

## 回答 #2

> 赞同：190
> 
> 时间：2012-09-19T01:41:50.087

```
foo="$(tr '[:lower:]' '[:upper:]' <<< ${foo:0:1})${foo:1}" 
```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2012-09-19T01:47:52.757

一种方法`sed`：

```
echo "$(echo "$foo" | sed 's/.*/\u&/')" 
```

印刷：

```
Bar 
```

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2012-09-19T01:43:02.623

```
$ foo="bar";
$ foo=`echo ${foo:0:1} | tr  '[a-z]' '[A-Z]'`${foo:1}
$ echo $foo
Bar 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2018-06-11T21:12:48.407

仅将第一个单词大写：

```
foo='one two three'
foo="${foo^}"
echo $foo 
```

> **一**二三****

 *** * *

要将变量中的**每个单词**大写：

```
foo="one two three"
foo=( $foo ) # without quotes
foo="${foo[@]^}"
echo $foo 
```

> **一**二三**_ **_** _ **_****

 *** * *

（适用于 bash 4+）

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2015-05-14T20:50:14.270

这是“本机”文本工具方式：

```
#!/bin/bash

string="abcd"
first=`echo $string|cut -c1|tr [a-z] [A-Z]`
second=`echo $string|cut -c2-`
echo $first$second 
```

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2017-05-24T05:52:59.650

仅使用 awk

```
foo="uNcapItalizedstrIng"
echo $foo | awk '{print toupper(substr($0,0,1))tolower(substr($0,2))}' 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2013-08-03T11:29:44.143

也可以使用 bash-3.2 在纯 bash 中完成：

```
# First, get the first character.
fl=${foo:0:1}

# Safety check: it must be a letter :).
if [[ ${fl} == [a-z] ]]; then
    # Now, obtain its octal value using printf (builtin).
    ord=$(printf '%o' "'${fl}")

    # Fun fact: [a-z] maps onto 0141..0172\. [A-Z] is 0101..0132.
    # We can use decimal '- 40' to get the expected result!
    ord=$(( ord - 40 ))

    # Finally, map the new value back to a character.
    fl=$(printf '%b' '\'${ord})
fi

echo "${fl}${foo:1}" 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2019-12-17T15:22:11.857

只是为了好玩，你在这里：

```
foo="bar";    

echo $foo | awk '{$1=toupper(substr($1,0,1))substr($1,2)}1'
# or
echo ${foo^}
# or
echo $foo | head -c 1 | tr [a-z] [A-Z]; echo $foo | tail -c +2
# or
echo ${foo:1} | sed -e 's/^./\B&/' 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2019-03-19T19:06:15.377

这也有效...

```
FooBar=baz

echo ${FooBar^^${FooBar:0:1}}

=> Baz 
```

```
FooBar=baz

echo ${FooBar^^${FooBar:1:1}}

=> bAz 
```

```
FooBar=baz

echo ${FooBar^^${FooBar:2:2}}

=> baZ 
```

等等。

资料来源：

*   Bash 手册：[Shell 参数扩展](https://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)
*   完整的 Bash 指南：[参数](https://mywiki.wooledge.org/FullBashGuide#Parameters)
*   Bash Hacker 的 Wiki[参数扩展](https://wiki.bash-hackers.org/syntax/pe?s[]=length)

简介/教程：

*   Cyber​​citi.biz：8 [.转换为大写到小写，反之亦然](https://www.cyberciti.biz/tips/bash-shell-parameter-substitution-2.html)
*   Opensource.com：Bash[中参数扩展的介绍](https://opensource.com/article/17/6/bash-parameter-expansion)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-02-20T18:28:59.597

这个对我有用：

搜索当前目录下的所有 *php 文件，并将每个文件名的第一个字符替换为大写字母：

例如：test.php => Test.php

```
for f in *php ; do mv "$f" "$(\sed 's/.*/\u&/' <<< "$f")" ; done 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-08-02T10:44:42.650

Linux 和 OSX 的替代和干净的解决方案，它也可以与 bash 变量一起使用

```
python -c "print(\"abc\".capitalize())" 
```

返回 Abc

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2015-04-23T10:45:13.333

```
first-letter-to-lower () {
        str="" 
        space=" " 
        for i in $@
        do
                if [ -z $(echo $i | grep "the\|of\|with" ) ]
                then
                        str=$str"$(echo ${i:0:1} | tr  '[A-Z]' '[a-z]')${i:1}$space" 
                else
                        str=$str${i}$space 
                fi
        done
        echo $str
}
first-letter-to-upper-xc () {
        v-first-letter-to-upper | xclip -selection clipboard
}
first-letter-to-upper () {
        str="" 
        space=" " 
        for i in $@
        do
                if [ -z $(echo $i | grep "the\|of\|with" ) ]
                then
                        str=$str"$(echo ${i:0:1} | tr  '[a-z]' '[A-Z]')${i:1}$space" 
                else
                        str=$str${i}$space 
                fi
        done
        echo $str
} 
```

第一个字母到下层-xc(){ v-第一个字母到下层 | xclip -选择剪贴板 }

* * *

## 回答 #14

> 赞同：-3
> 
> 时间：2020-02-26T08:26:12.693

不完全是问的，但很有帮助

```
declare -u foo #When the variable is assigned a value, all lower-case characters are converted to upper-case.

foo=bar
echo $foo
BAR 
```

而相反

```
declare -l foo #When the variable is assigned a value, all upper-case characters are converted to lower-case.

foo=BAR
echo $foo
bar 
```

* * *

## 回答 #15

> 赞同：-7
> 
> 时间：2017-03-08T17:58:09.533

如果第一个字符**不是**字母（而是制表符、空格和转义的双引号）怎么办？我们最好**测试**一下，**直到**找到一封信！所以：

```
S='  \"ó foo bar\"'
N=0
until [[ ${S:$N:1} =~ [[:alpha:]] ]]; do N=$[$N+1]; done
#F=`echo ${S:$N:1} | tr [:lower:] [:upper:]`
#F=`echo ${S:$N:1} | sed -E -e 's/./\u&/'` #other option
F=`echo ${S:$N:1}
F=`echo ${F} #pure Bash solution to "upper"
echo "$F"${S:(($N+1))} #without garbage
echo '='${S:0:(($N))}"$F"${S:(($N+1))}'=' #garbage preserved

Foo bar
= \"Foo bar= 
```****

# gwt - 常规按钮的类似 TabPanel 的按钮样式

> ID：12487427
> 
> 赞同：0
> 
> 时间：2012-09-19T01:36:02.673
> 
> 标签：gwt

有没有办法从常规中创建一个像 Button 这样的 TabPanel`com.emitrom.gwt4.touch.client.widgets.Button`

我的意思是，`TabPanel`按钮用于在选项卡之间切换，并在选择某个选项卡时具有这种*“下推”*效果，因为它的样式`TabBar`与`TabPanel`. 我不是追求标签切换功能，而是更多关于按钮的按钮功能`TabPanel`。

随着项目的插入`TabPanel`，按钮会自动`TabPanel`插入。查看代码我可以看到项目的样式是: `item.setIconCls(TouchIcons.INFO)`，所以我设置了 my`button.setIconCls(TouchIcons.INFO)`但效果不一样。

出于某种原因，我不能使用`TabPanel`，所以我只需要将这种按钮样式与常规`Button`或如果有 PushButton 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:06:56.920

在这里回答：[http ://www.emitrom.com/node/313](http://www.emitrom.com/node/313)

> Button 类不支持此功能。您可以做的是使用只有一个按钮的 SegmentedButton 类并将 setAllowMultiple 设置为 true。这应该够了吧。
> 
> 干杯，
> 
> 拍。

问候。

# c# - 提高 C# 循环的效率

> ID：12487428
> 
> 赞同：1
> 
> 时间：2012-09-19T01:36:15.000
> 
> 标签：c#, loops, pi

我正在制作一个程序，该程序通过将具有给定半径的多边形的边数增加到一个极高的数量，获取面积并将其除以半径的平方来估计 pi。我有以下内容：

```
 double radius = 5;

            for (double sides = 3;sides < 10000;sides++)
            {
                double pi_est = ((radius * radius * sides * Math.Sin((360 / sides)*(Math.PI/180))) / 2) / (radius * radius);
                richTextBox1.AppendText(pi_est+"\n");
            } 
```

截至目前，这大约需要 5 秒才能完成。有什么我可以重写的东西可以提高我的循环效率吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T01:40:40.393

该`AppendText`调用将花费大量时间，因为它意味着访问 UI。`StringBuilder`使用 a或数组 with来累积字符串`String.Join`。

你不应该使用 a`double`作为迭代变量；使用 an`int`代替（这不是一个效率问题，而是一个潜在的陷阱）。

`radius*radius`取消 - 请注意，`pi`它与使用的半径无关，因此您可以假设半径等于 1 并忽略它。

全部写出来：

```
StringBuilder sb = new StringBuilder();

for(int sides = 3; sides < 10000; sides++) {
    double pi_est = sides * Math.Sin((2*Math.PI)/sides) / 2;
    sb.append(pi_est + "\n");
}
richTextBox1.AppendText(sb.ToString()); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T01:38:00.507

对于初学者，您可以在循环外预先计算半径 * 半径。

此外，如果循环内不需要，则在循环外更新您的富文本框*，*并在内部使用 StringBuilder。

# php - PHP页面不使用可见性隐藏DIV：none或display：none

> ID：12487433
> 
> 赞同：0
> 
> 时间：2012-09-19T01:36:39.413
> 
> 标签：php, javascript, css, html, hidden

我正在处理的 PHP 页面可以在多种状态下加载，在默认状态下，我需要一个 DIV 层可见，另一个不可见 - 反之亦然。该脚本具有 javascript 备份来执行相同的操作，但我需要 css 才能为查看禁用 javascript 的页面的人工作。

第一个 DIV 的代码工作正常：

```
<pre><</pre>div name="MoreDiv" ID="MoreDiv" style="position: absolute;top: 10px; left: 15px;  width: 95%; font-size:1.3em; 
<?php
if(isset($_GET['page']))
{
$ipi = getenv("REMOTE_ADDR");
$u = getenv ("HTTP_REFERER");
$httpagenti = getenv ("HTTP_USER_AGENT");

$page = $_GET['page'];
switch($page)
{
case 404:
{echo '';
break;}

default:
{ ?>

<?php }

break;}
} 
else { //
?>visibility:none; display:none;<?php }
?>"> 
```

...因此，您认为对于另一个 DIV，当在 URL 中设置 ?page 变量时需要隐藏它，将“可见性：无；显示：无；” php 输出的默认值内的属性将起作用 - 有点像这样：

```
div name="PhotoText" ID="PhotoText" style="position: absolute;top: 15px; left: 15px; width: 400px; font-size:1.3em; background: rgb(0, 0, 0); background: rgba(0, 0, 0, 0.7); padding:10px; -webkit-border-radius: 10px;  -moz-border-radius: 10px; border-radius: 10px; -khtml-border-radius: 10px; <?php
if(isset($_GET['page']))
{$page = $_GET['page'];
switch($page)
{
case "test":
{?>
visibility:none; display:none;

<?php
break;}

default:
{ ?>
visibility:none; display:none;

<?php }

break;}
}   

else { //
?><?php }
?>"> 
```

然而，由于某些奇怪且非常奇怪的原因，DIV 仍然显示！...它一直可见，直到页面完全加载并且“body onload”标签中的 javascript 开始隐藏它。我不能使用 PHP 将默认 URL 变量的 DIV 层保留为空白，因为有 javascript 链接需要它存在才能加载内容....所以我需要一种非 JS 方式来隐藏该层，但是以这样的方式可以使用JS使其再次可见！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T02:50:12.000

确实有几种方法可以做到这一点。首先，*never*，**ever ，***在属性值*中插入一个`if`和 一种`switch`逻辑，就像您在问题中所拥有的那样。食谱，遇难。

 *在[`visibility`](https://developer.mozilla.org/en-US/docs/CSS/visibility)vs[`display`](https://developer.mozilla.org/en-US/docs/CSS/display)问题上，这个 QA 实际上很好地描述了它：

[http://webdesign.about.com/od/css/f/blfaqhidden.htm](http://webdesign.about.com/od/css/f/blfaqhidden.htm)

或多或少，`visibility`仍然在文档流中保持它的“空间”，而`display`影响它的流（包括完全删除它）。容易混淆，完全不同的概念。

这是一个[演示](http://jsfiddle.net/TGaa3/embedded/result/1)，以及[源标记](http://jsfiddle.net/TGaa3/1)和 CSS。

```
<div id="wrapper">
    <div id="novisibility" class="test">
        <p>Visiblity<br>Will you see me?<br>Will I still be "there"?</p>
    </div>
    <div id="nodisplay" class="test">
        <p>Block<br>Will you see me?<br>Will I disappear?</p>
    </div>
    <p id="buttons">
        <button type="button" id="visibility">Toggle Visibility</button>
        <button type="button" id="display">Toggle Display</button>
    </p>
</div>

#wrapper.hide #nodisplay {
    display: none;
}
#wrapper.invisible #novisibility {
    visibility: hidden;
} 
```

Javascript正在`.hide`切换.`.novisibility``#wrapper`

我建议使用模板模式，将逻辑与标记/显示层分开。例如：

**页面.php**

```
<?php

// ... other stuff

if (isset($_GET['page'])) {
    $page = $_GET['page'];

    switch($page) {
        case "test":
           $cls = " NoDisplay";
        break;
        default:
           $cls = " Highlight";
        break;
    }
}

// ... other stuff

?> 
```

您在 CSS 中定义的位置（`style`如果可以帮助，不在属性中）：

**/assets/css/site.css**

```
.PhototextContent.NoDisplay {
    display: none;
}
.PhototextContent.Highlight {
    background: yellow;
    display: block;
} 
```

**docPagePhotoInline.tpl**

```
<!-- Other photo stuff, I presume. -->
<div id="PhotoText" class="PhotoTextContent<?php echo $cls; ?>">Your content</div> 
```

我还想知道您是否正在重用该`id`值；你应该（可以）[每页](http://www.w3.org/TR/CSS2/selector.html#id-selectors)[只有一个唯一`id`](http://www.w3.org/TR/CSS2/selector.html#id-selectors)的。如果您需要涵盖多个元素的内容，请使用`class`名称按*类别*对元素进行分组。另请注意，我认为`name`in `div`s 仍然有效，但很少有人使用。用于`id`唯一标识一个元素。

那么你认为哪个更容易阅读？我不认为很难看出我在这里做什么，但它需要仔细看看你所拥有的，然后是一些令人头疼的事情。你的代码应该表达意图；感觉良好且看起来正确的代码并不总是很好的代码，但不优雅的鞭打格式通常表明代码可能存在问题。把它想象成一个花园；一个精心照料、井井有条的花园比没有的花园更有吸引力。

所以我至少会实现一个基本的模板方法。有几个不错的教程，比如[这个](http://coding.smashingmagazine.com/2011/10/17/getting-started-with-php-templating/)。我想尽快试用[Mustache for PHP](https://github.com/bobthecow/mustache.php)，但还有其他的，例如[Smarty](http://www.smarty.net/)、[Flexy](http://pear.php.net/package/HTML_Template_Flexy/redirected)、[Twig](http://twig.sensiolabs.org/)和[Dwoo](http://dwoo.org/)。请记住，PHP 本身可以用作模板系统，并且大多数模板系统会将模板编译成 PHP 或字节码。您只需要小心地将逻辑与视图或显示层分开。

不过，您应该将它们与一种方法配对，因此我建议使用[MVC 模式](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)的框架。那里有很多，例如[CodeIgniter](http://codeigniter.com/user_guide/overview/mvc.html)、[TinyMVC](http://www.tinymvc.com/)、[Kohana](http://kohanaframework.org/)、[Cake](http://cakephp.org/)等。这看起来很合理：

[http://phpsavant.com/](http://phpsavant.com/)

不过，尽量不要一个人在那里闲逛太多。*

# hibernate - 使用休眠连接 2 个表的最佳方法

> ID：12487442
> 
> 赞同：10
> 
> 时间：2012-09-19T01:38:39.200
> 
> 标签：hibernate

我有 2 个休眠实体/表，需要结合两者的信息以在视图中使用。这些表是

```
Table Client:
  clientId,
  firstName,
  lastName,
  phone,
  cellPhone

Table Appointment:
  apptTime,
  clientId (and some other fields I don't need now) 
```

基于 clientID，client 和 Appointment 之间存在一对多的关系。在常规 SQL 中，我只想说：

```
Select 
    client.clientId, 
    appt.apptTime,
    client.firstName,
    client.lastName 
from 
    Client  client, 
    Appointment app 
where 
    client.clientId = appt.clientId 
```

并使用返回的记录集。

我不确定如何在 Hibernate 中执行此操作。我是否应该创建一个 ClientAppt 实体，然后执行类似上述选择的操作（针对 HQL 进行了一些修改）？

注意，我想过使用 SecondaryTable 方法，但我认为这需要 1 对 1 的关系？我想我可以映射一个一对多，但有其他选择吗？这是一次更改，映射一对多关系对于这么小的东西可能有点贵？最好的方法是什么？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T02:44:37.087

您可以通过多种方式对此进行建模。我要做的是让客户成为一个实体，并让各种约会成为一个元素集合。您没有指定语言，但在 Java 中它会像：

```
@Entity
@Table(name="person")
public class ClientAppts {
    ...

    @OneToMany(mappedBy="client")
    Set<Appointment> appointments;
}

@Entity
@Table(name="person")
public class Appointment {
    ....

    @ManyToOne
    @JoinColumn(name="person_id")
    private ClientAppts client;

    ....
} 
```

然后，您可以使用您喜欢的任何方法获取客户端，最简单的是：

```
 session.get(Client.class, clientId); 
```

Hibernate 将执行连接并返回一个带有一组约会的 Client 对象。您可以进一步将集合设置为 SortedSet，或向其添加索引以使其成为列表。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T03:13:12.670

“最佳”方式（恕我直言）是不要考虑正常的 SQL 方式。不要考虑选择某些字段并且您要加入的表。您应该尝试创建有意义的业务实体，并且应该在这些业务实体上工作。

例如，这是我要做的：

（不是实际代码，只是展示想法）

```
@Entity
public class Client {
  @Id
  @Column(name="clientId")
  private Long id;

  @Column
  private String longName;
}

@Entity
public class Appointment {
  @Id
  private Long id;

  @ManyToOne
  @Column(name="clientId")
  private Client client;
} 
```

有了上面的映射，你需要做的只是一个 HQL `from Appointment a where a.client.id = :whatEverIdYouWant`，或者，将额外的查询保存到 DB，`from Appointment a join fetch a.client where a.client.id = :whatEverIdYouWant`

如果您的设计不介意客户，您也可以添加@sharakan 的映射，具体取决于预约

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T02:36:56.593

您应该使用`Projections.alias`来指定您感兴趣的列列表。例如，请参见[此处](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html#querycriteria-projection)的休眠手册。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-18T03:26:33.247

```
public class Appoinment {

@Override
public List<Appointment > methodName(String search) {
    String hql =" from Appointment a join fetch a.client where a.client.id = 
                   :search";

    Query<Appointment > query=this.getSession().createQuery(hql,Appointment 
           .class);
    Long id=-1L;
    try {
        id=Long.parseLong(search);
    }catch (NumberFormatException ex) {
        ex.printStackTrace();
    }
    query.setParameter("id", id);
    query.setParameter("search", "%" +search+ "%");
    return query.getResultList();
}

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T02:39:22.237

您是否使用关系元数据注释您的代码？如果你这样做了，你应该能够简单地查询客户列表，然后让他们的约会访问持有他们的字段。

# php - 为什么数据仅在 foreach 循环中但在非对象之外时才显示？

> ID：12487449
> 
> 赞同：1
> 
> 时间：2012-09-19T01:39:12.133
> 
> 标签：php, mysql, arrays, codeigniter

我是 PHP 新手，对这一点感到困惑..

当我有这个时，它会显示数据

```
<?php foreach ($profile as $p):?>
    <?php echo $profile->custom_url;?>
                    <?php endforeach?> 
```

但是当我这样做时，我得到“试图获得非对象的属性”

```
 <?php echo $profile->custom_url;?> 
```

但是我已经看到了不在 foreach 循环中并且数据显示的代码。任何人都可以帮助解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T01:42:29.397

您的 foreach 应具有 (array_expression as $value) 的格式。[来源](http://php.net/manual/en/control-structures.foreach.php)

```
<?php foreach ($profile as $p):?>
<?php echo $p->custom_url;?>
<?php endforeach?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T01:52:56.157

```
// $profile is an array
<?php foreach ($profile as $profile):?>
    // inside foreach $profile is the element of the array $profile
    <?php echo $profile->custom_url;?>
<?php endforeach?>

// $profile is an array not an object
<?php echo $profile->custom_url;?>

// You'd better use another variable name for the element.
<?php foreach ($profile as $element):?>
    <?php echo $element->custom_url;?>
<?php endforeach?> 
```

# c# - 从c#静默执行批处理文件

> ID：12487452
> 
> 赞同：4
> 
> 时间：2012-09-19T01:39:44.113
> 
> 标签：c#, batch-file, silent

我知道这个问题之前已经被问过，我之前已经尝试过这些帖子中给出的所有解决方案，但我似乎无法让它发挥作用：-

```
static void CallBatch(string path)
        {
            int ExitCode;
            Process myProcess;

            ProcessStartInfo ProcessInfo;
            ProcessInfo = new ProcessStartInfo("cmd.exe", "/c " + path);
            ProcessInfo.CreateNoWindow = true;
            ProcessInfo.UseShellExecute = true;

            myProcess = Process.Start(ProcessInfo);
            myProcess.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
            myProcess.WaitForExit();

            myProcess.EnableRaisingEvents = true;
            myProcess.Exited += new EventHandler(process_Exited);

            ExitCode = myProcess.ExitCode;

            Console.WriteLine("ExitCode: " + ExitCode.ToString(), "ExecuteCommand");
            myProcess.Close();
        } 
```

当我尝试调用批处理文件时，即使 createNoWindow 和 UseShellExecute 都设置为 true，它仍然显示窗口。

我应该放点别的东西让它静默运行批处理文件吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T01:49:50.310

试试这个：

```
Process myProcess = new Process();
myProcess.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
myProcess.StartInfo.CreateNoWindow = true;
myProcess.StartInfo.UseShellExecute = false;
myProcess.StartInfo.FileName = "cmd.exe";
myProcess.StartInfo.Arguments = "/c " + path;
myProcess.EnableRaisingEvents = true;
myProcess.Exited += new EventHandler(process_Exited);
myProcess.Start();
myProcess.WaitForExit();
ExitCode = myProcess.ExitCode; 
```

`myProcess.StartInfo`这个想法是在你开始你的过程之后不要操纵：它是无用的。您也不需要设置`UseShellExecute`为`true`，因为您是通过调用自己启动 shell 的`cmd.exe`。

# python - 通过键从 listOfLists 组中获取最小的项目

> ID：12487453
> 
> 赞同：2
> 
> 时间：2012-09-19T01:39:59.480
> 
> 标签：python

我有一个像

```
listOfLists = [['key2', 1], ['key1', 2], ['key2', 2], ['key1', 1]] 
```

内部列表的第一项是键。内部列表的第二项是值。

我想得到一个输出`[['key1', 1], ['key2', 1]]`，它的值是具有相同键的列表中最小的列表，并且按键输出组（我的英语很差，所以只使用 Sql 语法的概念）

我写了一些这样的代码：

```
listOfLists = [['key2', 1], ['key1', 2], ['key2', 2], ['key1', 1]]
listOfLists.sort()    #this will sort by key, and then ascending by value
output = []
for index, l in enumerate(listOfLists):
    if index == 0:
        output.append(l)
    if l[0] == listOfLists[index - 1][0]:
        #has the same key, and the value is larger, discard
        continue
    else:
        output.append(l) 
```

这似乎不够聪明有没有更简单的方法来完成这项工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T01:44:09.050

使用字典怎么样（不需要对数据进行排序）？

```
>>> listOfLists = [['key2', 1], ['key1', 2], ['key2', 2], ['key1', 1]]
>>> d = {}
>>> for k,v in listOfLists:
    d.setdefault(k, []).append(v)

>>> d = {k:min(v) for k,v in d.items()}
>>> d
{'key2': 1, 'key1': 1} 
```

如果需要，您可以转换为列表

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T02:41:10.957

# O(N log N) 解

您可以为此使用 dict 构造函数。由于排序步骤，它是 O(N log N)

```
>>> dict(sorted(listOfLists, reverse=True))
{'key2': 1, 'key1': 1} 
```

要了解为什么会这样，请查看 sorted 的结果

```
>>> sorted(listOfLists, reverse=True)
[['key2', 2], ['key2', 1], ['key1', 2], ['key1', 1]] 
```

构造函数将在`dict`遍历列表时替换每个键，并将每个键`sorted`的最小值推到该键的子列表末尾

# O(N) 解决方案

```
>>> d = {}
>>> for k, v in listOfLists:
...  d[k] = min(d.get(k, v), v)
... 
>>> d
{'key2': 1, 'key1': 1} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T01:43:57.617

[itertools](http://docs.python.org/library/itertools.html)模块有一个非常有用的功能[`groupby`](http://docs.python.org/library/itertools.html#itertools.groupby)，它可能*正是*您所需要的：

```
from itertools import groupby

listOfLists.sort()

for key, subgroup in groupby(listOfLists, lambda item: item[0]):
    print key, min(subgroup) 
```

# jquery - 哈希锚在点击时隐藏内容

> ID：12487456
> 
> 赞同：2
> 
> 时间：2012-09-19T01:40:30.287
> 
> 标签：jquery, html, css, anchor

我有两个并排的div。我已经使用[这个](http://www.positioniseverything.net/articles/onetruelayout/equalheight)技巧使它们具有相同的高度。

现在，我遇到了锚链接的问题。如果您单击锚链接，它将隐藏该部分上方的内容。

看看 jsfiddle 示例：http: [//jsfiddle.net/bLtjj/](http://jsfiddle.net/bLtjj/)

这个有什么解决办法吗？jQuery 或 CSS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T01:45:37.800

这是因为您在包装类中将溢出设置为隐藏。

尝试这个

```
.wrapper { overflow:visible; } 
```

查看更新的[小提琴](http://jsfiddle.net/bLtjj/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T05:05:41.753

真是令人困惑的问题。使用锚点，您将链接位置。它上面的所有文本/内容都将在顶部，它们不会隐藏。正如超现实梦所说，主播是这样的。

你在那里期待什么？

# uiimageview - 按下按钮时如何更改 UIImageView 的图像？UIImageView 和 UIButton 位于两个不同的视图上

> ID：12487461
> 
> 赞同：1
> 
> 时间：2012-09-19T01:41:20.977
> 
> 标签：uiimageview, uibutton, uiimage, storyboard, multiple-views

我有一个 UIButton 和一个 UIImageView。UIButton 和 UIImageView 在故事板中的不同视图上。我想要发生的是当按下按钮时，它会切换视图并且 UIImageView 切换到不同的图像。现在，视图发生了变化，但 UIImageView 没有变化。

这是 ViewController.h 文件

```
#import <UIKit/UIKit.h>
#import "Player.h"
#import "Space.h"

@interface ViewController : UIViewController
{
    IBOutlet UIImageView* space0_0;
    Player* m_player;
    Space* m_spaces[16][16];
}
-(IBAction)startGame;

@end 
```

有一系列空间的原因是我希望最终有一个 16x16 的 UIImageViews 板。现在我只有 1 个图像视图只是为了让第一个在继续之前工作

这是连接到应该更改 UIImageView 的按钮的 IBAction

```
-(IBAction)startGame
{
    [m_spaces[0][0] setImageView:space0_0];
    [m_spaces[0][0] displaySpace];
} 
```

我做了一个名为 Space 的课程。这是 Space.h 文件

```
#import <Foundation/Foundation.h>

@interface Space : NSObject
{
    UIImageView* m_imageView;
}

-(void)setImageView:(UIImageView*)imageView;
-(UIImageView*)imageView;
-(void)displaySpace;
@end 
```

这是 Space.m 文件

```
#import "Space.h"

@implementation Space

-(void)setImageView:(UIImageView*)imageView
{
    m_imageView = imageView;
}

-(UIImageView*)imageView
{
    return m_imageView;
}
-(void)displaySpace
{
    m_imageView.image = [UIImage imageNamed:@"player.png"];
}

@end 
```

谁能告诉我这里哪里出错了？唯一的问题是 UIImageView 的图像没有改变。

编辑：当我将 startGame 方法更改为：

```
-(IBAction)startGame;
{
space0_0.image = [UIImage imageNamed:@"player.png"];
} 
```

所以问题出在我的太空课上。

# asp.net - 如何检测密码保护字，excel文件？

> ID：12487462
> 
> 赞同：0
> 
> 时间：2012-09-19T01:41:26.383
> 
> 标签：asp.net, vb.net, excel, ms-word, ms-office

我的应用程序将在文件夹中搜索 ms office 文档，例如 word、excel 等，然后读取元数据中的标签。

但是当函数尝试打开受密码保护的（需要密码）文件时，我的函数将挂起/停止。

如何检测文件已受密码保护？如果是，我跳过这个文件并继续下一个文件。

```
'Read Word metadata
Public Sub ReadWord(WordFileName As String)

    Dim Wapp As New Microsoft.Office.Interop.Word.Application
    Dim docWord As New Microsoft.Office.Interop.Word.Document

    If Wapp Is Nothing Then
        Wapp = New Microsoft.Office.Interop.Word.Application
    End If

    If docWord Is Nothing Then
        docWord = New Microsoft.Office.Interop.Word.Document
    Else
        docWord.Close()
    End If

    docWord = Wapp.Documents.Open(WordFileName)

    Dim _BuiltInProperties As Object = docWord.BuiltInDocumentProperties

    If Not _BuiltInProperties Is Nothing Then

        word_keyword = _BuiltInProperties("Keywords").Value

    End If

    If Not docWord Is Nothing Then
        docWord.Close()
    End If

    If Not Wapp Is Nothing Then
        Wapp.Quit()
    End If

End Sub

'Read Excel metadata
Public Sub ReadExcel(ExcelFileName As String)

    Dim Wapp As New Microsoft.Office.Interop.Excel.Application
    Dim excelbook As Microsoft.Office.Interop.Excel.Workbook

    If Wapp Is Nothing Then
        Wapp = New Microsoft.Office.Interop.Excel.Application
    End If

    excelbook = Wapp.Workbooks.Open(ExcelFileName)

    Dim _BuiltInProperties As Object = excelbook.BuiltinDocumentProperties

    If Not _BuiltInProperties Is Nothing Then
        excel_keyword = _BuiltInProperties("Keywords").Value
    End If

    If Not excelbook Is Nothing Then
        excelbook.Close()
    End If

    If Not Wapp Is Nothing Then
        Wapp.Quit()
    End If

End Sub 
```

# ruby-on-rails - Rails、Sidekiq 和独角兽

> ID：12487475
> 
> 赞同：1
> 
> 时间：2012-09-19T01:44:12.783
> 
> 标签：ruby-on-rails, ruby-on-rails-3, unicorn, sidekiq

我在让 Sidekiq 在我的 VPS 上运行时遇到了一些问题。在本地一切正常，但一旦我部署，我的独角兽日志中出现以下错误：

```
E, [2012-09-18T21:41:19.670672 #1308] ERROR -- : uninitialized constant MailchimpWorker::Sidekiq (NameError)
/home/deployer/production/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/ext/module.rb:36:in `const_missing'
/home/deployer/production/releases/20120919013128/app/workers/mailchimp_worker.rb:3:in `<class:MailchimpWorker>'
/home/deployer/production/releases/20120919013128/app/workers/mailchimp_worker.rb:1:in `<top (required)>'
/home/deployer/production/shared/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:439:in `block (2 levels) in eager_load!'
/home/deployer/production/shared/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:438:in `each'
/home/deployer/production/shared/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:438:in `block in eager_load!'
/home/deployer/production/shared/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:436:in `each'
/home/deployer/production/shared/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:436:in `eager_load!'
/home/deployer/production/shared/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/application/finisher.rb:53:in `block in <module:Finisher>'
/home/deployer/production/shared/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `instance_exec'
/home/deployer/production/shared/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `run'
/home/deployer/production/shared/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:55:in `block in run_initializers'
/home/deployer/production/shared/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `each'
/home/deployer/production/shared/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `run_initializers'
/home/deployer/production/shared/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:136:in `initialize!'
/home/deployer/production/shared/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/home/deployer/production/releases/20120919013128/config/environment.rb:5:in `<top (required)>'
config.ru:4:in `require'
config.ru:4:in `block in <main>'
/home/deployer/production/shared/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
/home/deployer/production/shared/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
config.ru:1:in `new'
config.ru:1:in `<main>' 
```

这是我的工作文件的内容：

```
class MailchimpWorker

  include Sidekiq::Worker

  LIST_ID = '844161948b'

  def perform(email)
    Gibbon.listSubscribe id: LIST_ID, email_address: email
  end

end 
```

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:57:20.133

如果它适用于开发但不适用于生产，听起来捆绑器没有在生产环境中加载 gem。这取决于 Gemfile 中列出的 gem 的哪个组以及您的部署方式（您如何让 bundler 在生产环境中安装您的 gem？）。

那么，您可以发布您的 Gemfile 以及部署脚本中的相关位吗？

还要仔细检查 sidekiq procs 是否正在使用 bundle exec 启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T23:13:56.020

这看起来像是`gem 'sidekiq'`您的 Gemfile 中缺少的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T10:53:59.077

你在捆绑器中运行独角兽吗？

```
bundle exec unicorn 
```

# sqlite - Sinatra-activerecord 表未找到错误

> ID：12487476
> 
> 赞同：0
> 
> 时间：2012-09-19T01:44:42.763
> 
> 标签：sqlite, activerecord, sinatra

我有一个简单的 sinatra-activerecord 应用程序。在文件 ./config/environments.rb 我有以下配置：

```
configure :development, :test do
  set :database, 'sqlite://database.db'
end

# These Heroku setup instructions can be at: https://devcenter.heroku.com/articles/rack
configure :production do
  # Database connection
  db = URI.parse(ENV['DATABASE_URL'] || 'postgres://localhost/mydb')

  ActiveRecord::Base.establish_connection(
    :adapter  => db.scheme == 'postgres' ? 'postgresql' : db.scheme,
    :host     => db.host,
    :username => db.user,
    :password => db.password,
    :database => db.path[1..-1],
    :encoding => 'utf8'
  )
end 
```

当我推送到 Heroku 时，数据库设置工作得很好。但是，在本地，它没有。例如，如果我这样做

```
$ rake db:migrate 
```

我得到以下良好的输出：

```
==  CreateHotels: migrating ===================================================
-- create_table(:hotels)
   -> 0.0015s
-- add_index(:hotels, :hotel_name)
   -> 0.0004s
==  CreateHotels: migrated (0.0021s) ========================================== 
```

现在，如果我启动服务器并使用 curl 拨打电话：

```
$ shotgun app.rb
$ curl -d "hotel_name=Sheraton" http://127.0.0.1:9393/hotels/ 
```

我收到以下错误：

```
ActiveRecord::StatementInvalid - Could not find table 'hotels':
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.8/lib/active_record/connection_adapters/sqlite_adapter.rb:472:in `table_structure'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.8/lib/active_record/connection_adapters/sqlite_adapter.rb:346:in `columns'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.8/lib/active_record/connection_adapters/schema_cache.rb:12:in `block in initialize'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.8/lib/active_record/model_schema.rb:228:in `yield'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.8/lib/active_record/model_schema.rb:228:in `default'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.8/lib/active_record/model_schema.rb:228:in `columns'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.8/lib/active_record/model_schema.rb:243:in `column_defaults'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.8/lib/active_record/base.rb:482:in `initialize'
    /Users/Sy/Developer/Sinatra/stay-checkin-api/routes/hotels_routes.rb:8:in `new'
    /Users/Sy/Developer/Sinatra/stay-checkin-api/routes/hotels_routes.rb:8:in `block in <top (required)>'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/sinatra-1.3.3/lib/sinatra/base.rb:1265:in `call'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/sinatra-1.3.3/lib/sinatra/base.rb:1265:in `block in compile!'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/sinatra-1.3.3/lib/sinatra/base.rb:835:in `[]'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/sinatra-1.3.3/lib/sinatra/base.rb:835:in `block (3 levels) in route!'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/sinatra-1.3.3/lib/sinatra/base.rb:851:in `route_eval'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/sinatra-1.3.3/lib/sinatra/base.rb:835:in `block (2 levels) in route!'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/sinatra-1.3.3/lib/sinatra/base.rb:872:in `block in process_route'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/sinatra-1.3.3/lib/sinatra/base.rb:870:in `catch'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/sinatra-1.3.3/lib/sinatra/base.rb:870:in `process_route'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/sinatra-1.3.3/lib/sinatra/base.rb:834:in `block in route!'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/sinatra-1.3.3/lib/sinatra/base.rb:833:in `each'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/sinatra-1.3.3/lib/sinatra/base.rb:833:in `route!'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/sinatra-1.3.3/lib/sinatra/base.rb:936:in `dispatch!'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/sinatra-1.3.3/lib/sinatra/base.rb:769:in `block in call!'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/sinatra-1.3.3/lib/sinatra/base.rb:921:in `block in invoke'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/sinatra-1.3.3/lib/sinatra/base.rb:921:in `catch'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/sinatra-1.3.3/lib/sinatra/base.rb:921:in `invoke'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/sinatra-1.3.3/lib/sinatra/base.rb:769:in `call!'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/sinatra-1.3.3/lib/sinatra/base.rb:755:in `call'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/rack-protection-1.2.0/lib/rack/protection/xss_header.rb:22:in `call'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/rack-protection-1.2.0/lib/rack/protection/path_traversal.rb:16:in `call'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/rack-protection-1.2.0/lib/rack/protection/json_csrf.rb:17:in `call'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/rack-protection-1.2.0/lib/rack/protection/base.rb:47:in `call'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/rack-protection-1.2.0/lib/rack/protection/xss_header.rb:22:in `call'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/rack-1.4.1/lib/rack/nulllogger.rb:9:in `call'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/rack-1.4.1/lib/rack/head.rb:9:in `call'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/sinatra-1.3.3/lib/sinatra/showexceptions.rb:21:in `call'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/sinatra-1.3.3/lib/sinatra/base.rb:99:in `call'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/sinatra-1.3.3/lib/sinatra/base.rb:1389:in `block in call'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/sinatra-1.3.3/lib/sinatra/base.rb:1471:in `synchronize'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/sinatra-1.3.3/lib/sinatra/base.rb:1389:in `call'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/rack-1.4.1/lib/rack/lint.rb:48:in `_call'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/rack-1.4.1/lib/rack/lint.rb:36:in `call'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/rack-1.4.1/lib/rack/showexceptions.rb:24:in `call'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/rack-1.4.1/lib/rack/commonlogger.rb:20:in `call'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/sinatra-1.3.3/lib/sinatra/base.rb:136:in `call'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/shotgun-0.9/lib/shotgun/loader.rb:86:in `proceed_as_child'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/shotgun-0.9/lib/shotgun/loader.rb:31:in `call!'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/shotgun-0.9/lib/shotgun/loader.rb:18:in `call'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/shotgun-0.9/lib/shotgun/favicon.rb:12:in `call'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/rack-1.4.1/lib/rack/builder.rb:134:in `call'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/thin-1.4.1/lib/thin/connection.rb:80:in `block in pre_process'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/thin-1.4.1/lib/thin/connection.rb:78:in `catch'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/thin-1.4.1/lib/thin/connection.rb:78:in `pre_process'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/thin-1.4.1/lib/thin/connection.rb:53:in `process'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/thin-1.4.1/lib/thin/connection.rb:38:in `receive_data'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run_machine'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/thin-1.4.1/lib/thin/backends/base.rb:63:in `start'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/thin-1.4.1/lib/thin/server.rb:159:in `start'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/rack-1.4.1/lib/rack/handler/thin.rb:13:in `run'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/gems/shotgun-0.9/bin/shotgun:156:in `<top (required)>'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/bin/shotgun:19:in `load'
    /Users/Sy/.rvm/gems/ruby-1.9.3-p125/bin/shotgun:19:in `<main>' 
```

任何的想法？

ps：这是我的app.rb、config.rb、路由和模型文件。

**应用程序.rb**

```
require 'sinatra'
require 'sinatra/activerecord'
require 'uri'
require './config/environments'

require_relative 'models/init'
require_relative 'routes/init' 
```

**配置文件**

```
require './app'
run Sinatra::Application 
```

**型号：hotel.rb**

```
class Hotel < ActiveRecord::Base
  validates :hotel_name, :presence => true    
end 
```

**路线：hotels_routes.rb**

```
get '/hotels' do
  @hotels = Hotel.all
  if @hotels
      content_type :json
      @hotels.to_json
  end
end

post '/hotels/' do
  @hotel = Hotel.new
  @hotel.hotel_name = params[:hotel_name]
  if @hotel.save 
    content_type :json
    @hotel.to_json
  else
    content_type :json
    "Failed to create new hotel with name #{params[:hotel_name]}".to_json
  end
end 
```

**宝石文件**

```
source :rubygems

gem 'heroku'
gem 'sinatra'
gem 'thin'
gem 'activerecord'
gem 'sinatra-activerecord'
gem 'json'

# Define which database gem to use depending on whether you are in local or production environment

group :development, :test do
  gem 'sqlite3'
end

group :production do
  gem 'pg' # this gem is required to use postgres on Heroku
end 
```

**耙文件**

```
require './app'
require 'sinatra/activerecord/rake' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T03:31:19.867

数据库设置错误，试试：

```
set :database, 'sqlite:///database.db' 
```

# javascript - 如何阻止表单在提交时重置

> ID：12487478
> 
> 赞同：4
> 
> 时间：2012-09-19T01:45:05.473
> 
> 标签：javascript, jquery, html, ajax, forms

我有一个触发 ajax 调用的简单表单，但是一旦单击提交按钮，表单就会重置并清除所有条目。你知道如何防止这种情况吗？我想控制表单何时被清除。代码如下。我怀疑我需要放弃提交功能并检测按钮上的“点击”事件。

**jQuery**

```
$("#Formid").submit(function(){loadAjax();}); 
```

**HTML**

```
 <form id="Formid" method="put">
       Name<BR/>
       <input type="text" name="name"/><BR/><BR/>
       Node Id<BR/>
       <input type="text" name="node_id"/><BR/><BR/>
       Type<BR/> 
       <input type="text" name="type"/><BR/><BR/>
       Parent<BR/> 
       <input type="text" name="parent_id"/><BR/><BR/>
       Longitude<BR/> 
       <input type="text" name="longitude"/><BR/><BR/>
       Latitude<BR/>
       <input type="text" name="latitude"/><BR/><BR/>           
       Description<BR/>          
       <textarea name="description" rows="5" cols="40">Insert description  here</textarea><BR/><BR/>           
       <input type="submit" value="Add Node"/>

    </form> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T01:47:04.853

您可以使用`preventDefault`事件对象的方法。

```
$("#Formid").submit(function(event){
   loadAjax();
   event.preventDefault()
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T01:51:27.737

您可以使用`e.preventDefault()`或`return false;`在 jQuery 事件处理程序中：

```
$("#Formid").submit(function (e) {
   loadAjax();
   e.preventDefault(); // or return false;
}); 
```

> e.preventDefault() 将阻止默认事件的发生， e.stopPropagation() 将阻止事件冒泡， return false 将同时进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T02:40:36.060

或者，您可以使用 event.returnValue = false;

```
$("#Formid").submit( function(e) {
  loadAjax();
  e.returnValue = false;
}); 
```

这与“return false;”类似，但它不会退出函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-14T06:56:24.900

我已阻止清除我的网站 mrnams.com 的搜索表单

看法

```
@using (@Html.BeginForm("Search", "Home", FormMethod.Post, new { @class = "navbar-form navbar-right pull-right" }))
{
    <div class="input-group">
        <input id="input-searchQuery" type="text" class="form-control" placeholder="Search this site" name="q">
        <span class="input-group-btn">
            <button type="submit" class="btn btn-default">
                <span class="glyphicon glyphicon-search"></span>
            </button>
        </span>
    </div>
} 
```

视图中的 jQuery 函数

```
@section scripts{
  <script type="text/javascript">
    $(function () {
        var queryReturned = '@ViewBag.SearchQuery';
        $("#input-searchQuery").val(queryReturned); 
    });
  </script>
} 
```

这是控制器。

```
public class Home : Controller
{            
  public ActionResult Search(string q)
  {
    ViewBag.SearchQuery = q;
  }
} 
```

如需演示，请访问[https://mrnams.com/](https://mrnams.com/)

# mysql - 有谁知道这是什么加密？

> ID：12487484
> 
> 赞同：-4
> 
> 时间：2012-09-19T01:45:35.487
> 
> 标签：mysql, encryption

有谁知道这是什么类型的加密：

zlnL/JLk3dtHQiKqHEpxz+Y2Y6ueKi1soF5scb1BYqpAkeBMEKsCnMB9LA1BsM+rKaOZMDBxpzJ56HXuRrQFDA==

或者找出使用什么加密的方法。该行是从 mysql 数据库中取出的，我想知道其中包含什么。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T01:46:52.717

那是[Base64](http://en.wikipedia.org/wiki/Base64)编码。`==`您可以在通常用于该编码的最后两个上看到它。

# xcode - Xcode 4 和 Allegro 5.1 - 链接器找不到框架

> ID：12487487
> 
> 赞同：1
> 
> 时间：2012-09-19T01:46:30.580
> 
> 标签：xcode, xcode4, linker, allegro, allegro5

我知道这里还有其他几个关于 Linker 和 Xcode 4 的问题，但它们与我的问题并没有真正的关系。

我已经构建了 Allegro 5.1，由于 FreeType，我花了一些时间，但最终它成功了。现在我已经使用 Allegro 编写了一个小型 Space Invader 游戏。但不知何故，链接器找不到框架。

到目前为止我所做的：

*   框架位于 /Library/Frameworks/ 并且它们具有与该位置的所有其他框架相同的结构
*   我已将框架添加到目标的“Link Binary With Libraries”选项卡中
*   我已将它们添加到目标“框架”的“复制文件”选项卡中
*   我已经在 Build Settings 中添加了正确的路径设置，所以可以找到头文件

我已经完成了所有正确的步骤，但我仍然得到：

```
ld: framework not found Allegro-5.1
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我已经有一个工作框架，但它是作为共享库安装的，而不是“框架模式”。但是将框架组件添加到项目中有点困难，因为它们存储在 中`/usr/local/lib`，无法通过文件对话框选择...

所以......我不知道还有什么可以做的。当我拥有共享库时，它可以工作，但是现在使用相同的设置但位置不同，它不再起作用了。如果您需要更多信息，请告诉我，我会提供！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T12:01:31.523

因此，如果有人登陆这里，在 Allegro IRC 中的 elias 的帮助下，我发现了“错误”：

在我的目标`Build Settings`中，我必须指定`Framework Search Paths`as `/Library/Frameworks`。

This doesn't really make sense to me, since this is the default directory for the Frameworks on Mac OS X, but whatever...

# for-loop - 如何在批处理循环中处理文件名的空间

> ID：12487491
> 
> 赞同：2
> 
> 时间：2012-09-19T01:46:45.943
> 
> 标签：for-loop, batch-file, dos, space, filepath

```
@echo off
echo processing please wait...
setlocal enabledelayedexpansion
set txtfile=%~dp0mysql\my.ini.bak
set newfile=%~dp0mysql\my.ini
if exist "%newfile%" del /f /q "%newfile%"
for /f "tokens=*" %%a in (%txtfile%) do (
   set newline=%%a
   echo !newline! >> %newfile%
) 
```

现在 my.ini.bak 文件位于 D:\Program Files\my.ini.bak
错误：系统找不到文件 Files\mysql\my.ini.bak。

如何使这段代码工作，所以它将每一行从 my.ini.bak 复制到 my.ini

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T02:35:34.187

路径中的空格确实阻止了 FOR /F 成功打开文件。您需要在文件名周围加上引号，但您还需要 FOR /F "USEBACKQ" 选项，以便将带引号的名称视为文件名而不是文本字符串。

使用`"TOKENS=*"`几乎，但不完全相同`"DELIMS="`

*   `"DELIMS="`保留整行

*   `"TOKENS=*"`在第一次去除任何前导空格和/或制表符后保留该行的其余部分

`"DELIMS="`除非我有理由去掉前导空格，否则我通常更喜欢。

如果 .INI 文件有可能包含`!`字符，那么您将需要在循环中打开和关闭延迟扩展。如果它包含并启用延迟扩展，则的值`%%a`将被破坏。`!`

将整个 FOR 循环包含在另一组括号中并将输出重定向一次而不是每次迭代一次会更有效。如果文件已经存在，它还消除了首先删除文件的需要。

```
@echo off
echo processing please wait...
setlocal disableDelayedExpansion
set "txtfile=%~dp0mysql\my.ini.bak"
set "newfile=%~dp0mysql\my.ini"
>"%newfile%" (
  for /f "usebackq delims=" %%a in ("%txtfile%") do (
    set newline=%%a
    setlocal enableDelayedExpansion
    rem Presumably more processing goes here
    echo !newline!
    endlocal
  )
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T15:54:22.037

我认为您不需要引用路径，您可以在扩展路径中使用短名称。所以使用 %~dps 而不是 %~dp

```
@echo off
echo processing please wait...
setlocal enabledelayedexpansion
set txtfile=%~dps0mysql\my.ini.bak
set newfile=%~dps0mysql\my.ini
if exist "%newfile%" del /f /q "%newfile%"
for /f "tokens=*" %%a in (%txtfile%) do (
   set newline=%%a
   echo !newline! >> %newfile%
) 
```

顺便说一句，我用你的原始代码得到的错误与你的错误略有不同，不知道为什么。

```
The system cannot find the file C:\Program. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T02:06:58.410

问题是文件路径中的空间。我现在无法对此进行测试，但相信引用路径会解决它：

```
set txtfile="%~dp0mysql\my.ini.bak"
set newfile="%~dp0mysql\my.ini" 
```

这是我测试的完整代码。为了测试，我在“my sql”中添加了一个空格，并以此名称创建了一个文件夹。

```
@echo off
echo processing please wait...
setlocal enabledelayedexpansion
set txtfile="%~dp0my sql\my.ini.bak"
echo %txtfile%
set newfile="%~dp0my sql\my.ini"
echo %newfile%
if exist "%newfile%" del /f /q "%newfile%"
for /f "tokens=*" %%a in (%txtfile%) do (
   set newline=%%a
   echo !newline! >> %newfile%
) 
```

# objective-c - KVC - 过滤器集

> ID：12487494
> 
> 赞同：0
> 
> 时间：2012-09-19T01:46:57.450
> 
> 标签：objective-c, core-data, nspredicate, key-value-coding

我有一个简单的数据模型（核心数据），但这里是它的精简版：

```
Account
----------------------------------------------------
NSSet<Transaction> transactions

Transaction
----------------------------------------------------
Account  account
NSNumber amount
NSNumber type ( type ∈ ( 0->'Credit', 1->'Debit' ) ) 
```

我想获得一个帐户的总余额，但是，我不想将借记标记为负数。我只是希望它是一个借记类型的金额。

目前，在我添加借方之前，我可以通过 Account 中的此功能获取余额：

```
- (NSNumber *)currentBalance
{
    return [self.transactions valueForKeyPath:@"@sum.amount"];
} 
```

显然，只有当我扣款为负数时，这才有效。这里有一个优雅的解决方案，也许可以将集合过滤为贷方和借方，将它们相加并执行差异？这会保持准确性吗？我已经查看了 NSPredicate，但我不确定如何进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T02:10:38.527

以下是我的研究使我得到的结果：

```
- (NSNumber *)currentBalance
{
    // credits
    NSPredicate *creditPredicate = [NSPredicate predicateWithBlock:^BOOL(id evaluatedObject, NSDictionary *bindings) {
        return [((Transaction *)evaluatedObject).type intValue] == kTransactionTypeCredit;
    }];

    NSSet *credits = [self.transactions filteredSetUsingPredicate:creditPredicate];

    NSDecimalNumber *totalCredits = [credits valueForKeyPath:@"@sum.amount"];

    // debits
    NSPredicate *debitPredicate = [NSPredicate predicateWithBlock:^BOOL(id evaluatedObject, NSDictionary *bindings) {
        return [((Transaction *)evaluatedObject).type intValue] == kTransactionTypeDebit;
    }];

    NSSet *debits = [self.transactions filteredSetUsingPredicate:debitPredicate];

    NSDecimalNumber *totalDebits = [debits valueForKeyPath:@"@sum.amount"];

    // do the math
    return [totalCredits decimalNumberBySubtracting:totalDebits];
} 
```

虽然它有效，但似乎工作量过大。这是最好的方法吗？

# sql - 按时间戳对行进行分组并有条件地对不同的列求和

> ID：12487495
> 
> 赞同：1
> 
> 时间：2012-09-19T01:46:58.610
> 
> 标签：sql, sqlite

我正在尝试选择一些流量数据并为不同的流量方向创建总和，存储在 60 秒的存储桶中。简化表如下（时间戳为 unix epoch）：

```
Timestamp      Source     Destination    Count
1              inside     outside          5
2              inside     outside          6
3              outside    inside           7
65             inside     inside           4
66             inside     outside          6
72             inside     outside          7 
```

当前查询（进行分桶，但没有任何关于方向的信息）

```
SELECT sum(count) AS total FROM table GROUP BY round(timestamp/60) 
```

这给了我每 60 秒“桶”的总计数，例如

```
Count
 18
 10
 7 
```

现在，我迷路了（我可以在客户端代码中执行此操作，但如果可能的话，我有点想使用 SQL 执行此操作）。我想为每一行以内部作为源和目标作为外部的总和称为出站总和，对于每行外部在源和内部作为目标的称为出站的总和，以及一个称为内部的行，其中源和目标都在内部. 仍按 60 秒存储桶分组。即我想要回来的是：

```
Inbound  Outbound  Internal
   7        11        0
   0         6        4
   0         7        0 
```

我的 SQL foo 很弱，我真的不知道从哪里开始（我怀疑我需要一个子选择，但我不确定如何构造它）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T01:53:59.230

```
SELECT
  round(timestamp/60)             AS bucket,
  SUM(
    CASE WHEN source = 'inside'  AND destination = 'outside'
         THEN count ELSE 0
    END
  )                               AS outbound,
  SUM(
    CASE WHEN source = 'outside' AND destination = 'inside'
         THEN count ELSE 0
    END
  )                               AS inbound,
  SUM(
    CASE WHEN source = 'inside'  AND destination = 'inside'
         THEN count ELSE 0
    END
  )                               AS internal
FROM
  yourTable
GROUP BY
  round(timestamp/60) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T01:53:29.420

你实际上应该能够做一个支点：

```
SELECT SUM(count) AS total
    , SUM(CASE 
              WHEN Source = 'outside' 
                   AND Destination = 'inside' 
                   THEN count  -- Use 1 if you only want to count each row
              ELSE 0 END) AS [Inbound]
    , SUM(CASE
              WHEN Source = 'inside' 
                  AND Destination = 'outside' 
                  THEN count
              ELSE 0 END) AS [Outbound]
    , SUM(CASE 
              WHEN Source = 'inside'
                  AND Destination = 'inside' 
                  THEN count
              ELSE 0 END) AS [Internal]
FROM table 
GROUP BY round(timestamp/60) 
```

# c++ - 依赖注入和事件处理

> ID：12487498
> 
> 赞同：1
> 
> 时间：2012-09-19T01:48:15.930
> 
> 标签：c++, events, dependency-injection

```
class ITransportProvider
{
public:
    virtual ~ITransportProvider() { }

protected:
    virtual void SendData() = 0;
    // Concrete TransportProvider will call OnReceiveDataEvent

    // virtual void RegisterHandlers(std::function<void()> onReceiveDataEvent);
}

class Device
{
public:
    Device(shared_ptr<ITransportProvider> transport)
        : m_Transport(transport)
    {
        // transport->RegisterHandlers(boost::bind(&Device::OnReceiveData, this));
    }

    void SendData()
    {
        m_Transport->SendData();
    }

    // Which design pattern to use to get concrete TransportProvider's OnReceiveData event?
    //void OnReceiveData()
    //{
    //}

private:
    shared_ptr<ITransportProvider> m_Transport;
}; 
```

我总是在我的 ITransportProvider 中添加一个“RegisterHandlers”，并让 Device 在它的 c'tor 中调用它。我想知道它在 DI/IoC 专家眼中是否正确，并且很想听听所有建议。

编辑：

为了澄清，我问除了上述通过 DI 和观察者模式的方式之外，是否有更好的方式将 TransportProvider 与 Device 解耦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:04:13.347

你有一个合理的设计。可以通过各种权衡以不同的方式在许多不同的级别上处理解耦。您的设计适用于您知道发送和接收相关的情况，但设备实例和传输实现之间没有特定的编译时关系。如果存在编译时关系，您可以使用基于策略的设计：

```
class TransportProviderA
{
public:
    void SendData();
    virtual void OnReceiveData() = 0;
}

template <typename TransportPolicy>
class Device : public TransportPolicy
{
public:
    Device(const TransportPolicy &transport_policy)
        : TransportPolicy(transport_policy)
    {
    }

    // SendData provided by TransportPolicy

    virtual void OnReceiveData(); // overrides TransportPolicy's template method.
}; 
```

然后像这样使用它：

```
Device<TransportPolicyA> my_device(TransportPolicyA()); 
```

# html - XML 中的 HTML 标记

> ID：12487499
> 
> 赞同：0
> 
> 时间：2012-09-19T01:48:29.213
> 
> 标签：html, xml, xslt

我想在 XML 文件中使用 html 标记，因此在我的 xsd 文件中，我允许通过以下方式进行 html 格式化：

```
 <xs:element name="description">
            <xs:complexType mixed="true">
                <xs:sequence>
                    <xs:any namespace="http://www.w3.org/1999/xhtml"
                            processContents="lax"
                            minOccurs="0"
                            maxOccurs="unbounded" />
                </xs:sequence>          
            </xs:complexType>
        </xs:element> 
```

在我的 XML 文件中

```
<description>
    <p xmlns="http://www.w3.org/1999/xhtml"> This course is an introduction to the information technologies required for secure, practical information systems for electronic commerce.
Topics will be chosen from areas such as document representation (XML, DTDs, XML Schema, XSLT, CSS), 
</p> security (encryption, public key, symmetric key, 
PKI, authentication); kinds of attack and vulnerabilities, electronic trading (spontaneous, deliberative, auctions), electronic document management 
(metadata, search, digital libraries, management and processing), recent developments and maturation of the area, 
such as web application frameworks, web services, the semantic web , mobile commerce </description> 
```

但是，当我将其更改为 HTML 文件时，它不显示任何内容！（没有 p）

我无法将 html 标记放在 xsl 文件中，因为我想在描述标记（XSD 的一个元素）中划分内容。如果有任何新颖的方式我会接受。

起初，甚至`<p xmlns="http://www.w3.org/1999/XHTML">`没有工作，我把 processContents="lax" 和它工作得很好，但仍然显示一大堆段落（所以`<p>`不是真的工作）

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T01:54:09.437

将 html 内容包装在[`CDATA`](http://msdn.microsoft.com/en-us/library/ms256076.aspx)标签中：

```
<![CDATA[<p>stuff</p>]]> 
```

来自 msdn：

> 当 XML 解析器遇到首字母`<![CDATA[`时，它会将后面的内容报告为字符，而不尝试将它们解释为元素或实体标记。字符引用在 CDATA 部分中不起作用。当遇到 concluding`]]>`时，解析器停止报告并返回正常解析。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T03:02:14.183

使用您提供的最小示例，XML 将根据您提供的 XSD 片段进行验证（在添加 an`xs:schema`作为根元素之后。）

### 例子.xsd：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
 <xs:element name="description">
    <xs:complexType mixed="true">
        <xs:sequence>
            <xs:any namespace="http://www.w3.org/1999/xhtml"
                processContents="lax"
                minOccurs="0"
                maxOccurs="unbounded" />
        </xs:sequence>          
    </xs:complexType>
    </xs:element>
</xs:schema> 
```

### 测试.xml：

```
<description>
    <p xmlns="http://www.w3.org/1999/xhtml"> This course is an introduction to the information technologies required for secure, practical information systems for electronic commerce.
Topics will be chosen from areas such as document representation (XML, DTDs, XML Schema, XSLT, CSS), 
</p> security (encryption, public key, symmetric key, 
PKI, authentication); kinds of attack and vulnerabilities, electronic trading (spontaneous, deliberative, auctions), electronic document management 
(metadata, search, digital libraries, management and processing), recent developments and maturation of the area, 
such as web application frameworks, web services, the semantic web , mobile commerce </description> 
```

### 验证：

```
$ xmllint --noout --schema example.xsd test.xml 
test.xml validates 
```

所以我不确定你的问题是什么。

想到的一个问题是您可能没有使用 xhtml。您包含在`description`元素中的 HTML（或任何 HTML）***必须***是有效的 xml（因此是 xhtml，而不是草率的 sgml 式 html 语法），*包括*使任何 xhtml 命名字符实体（例如，`&nbsp;`）可用于模式验证器。您在网上找到的几乎所有 html 都绝对*不是*有效的 xml。

如果您想让 html 可用于 XML 处理器和验证，请使用[XHTML 1.0 xsd](http://www.w3.org/TR/xhtml1-schema/)或（更灵活地）混合和匹配[XHTML 1.1](http://www.w3.org/TR/xhtml11/)及其 XSD 中可用的模块。

如果这对您来说太麻烦并且您可以将 HTML 内容视为文本块，只需将其作为文本内容包含并修改您的 xsd 架构以期望`xs:string`或`xs:normalizedString`作为元素的内容`description`。

# c# - 如何在没有完整驱动器路径的情况下为 Web 应用程序构建部署包？

> ID：12487500
> 
> 赞同：0
> 
> 时间：2012-09-19T01:48:38.223
> 
> 标签：c#, asp.net, visual-studio-2010, msdeploy, webdeploy

当右键单击 ASP.NET Web 应用程序并选择“构建部署包”时，我不希望它创建具有完整路径的 .zip。无论在哪里构建，我都希望输出相同。这可能吗。

例如，如果我从模板创建一个空 Web 应用程序，它将创建这个 zip C:\Users\taggartc\tmp\EmptyWebApp\obj\Debug\Package\EmptyWebApp.zip

zip 的结构如下： Content\c_C\users\taggartc\tmp\EmptyWebApp\obj\Debug\Package\PackageTmp\bin\EmptyWebApp.dll

有什么方法可以摆脱路径并使其类似于： Content\bin\EmptyWebApp.dll

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T04:27:27.877

没有可用的选项来使用 zip 存档中的相对路径。

# clearcase-ucm - 我在基本 CC vob 上有一个 UCM 组件，但无法从基本 CC 视图中看到它

> ID：12487501
> 
> 赞同：1
> 
> 时间：2012-09-19T01:48:43.307
> 
> 标签：clearcase-ucm

这是我的布局：

```
base CC vob name: vobs/sbftest
UCM vob name: vobs/P_sbftest 
```

Vobadmin`Source`为我的 UCM vob 创建了一个默认的“”组件，如下所示：

```
vobs/P_sbftest/Source 
```

Vobadmin 还为我的 UCM vob 创建了一个项目：
所以我的项目浏览器如下所示：

![项目浏览器](../Images/8093113a1faf0119a0d691bdea82c138.png)

我通过远程客户端窗口将文件添加到“源”组件。
到这里所有的作品都可以找到。

但是，我的一些团队成员更喜欢在 base CC 下工作，所以根据这个： [从 Base clearcase 迁移到 UCM 的所有步骤是什么？](https://stackoverflow.com/questions/9600322/what-are-all-the-steps-to-migrate-from-base-clearcase-to-ucm)

基本 CC 视图应该能够看到我的`Source`组件及其包含的文件，但在我的情况下并非如此。
我创建了一个基础 CC 视图，它显示了直接在基础 CC 视图中创建的其他文件夹，但该视图没有看到 UCM 视图创建的“源”组件文件夹。

我错过了什么吗？
基本 CC 视图不应该能够看到“源”组件吗？

以下是基本 CC 视图的规格：

```
element * CHECKEDOUT
element * /main/LATEST
load \sbftest 
```

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T02:18:52.627

当您使用 UCM 时，ClearCase 将创建以您的流名称命名的分支。
因此，您需要添加一个选择规则，该规则将选择添加到您的流中的版本：

```
element * CHECKEDOUT 
element * .../sbfuser_testir_proj_dev_strm/LATEST
element * .../am_testir_proj_dev_strm/LASTEST
element * .../testir_proj_int_strm/LASTEST
element * /main/LATEST 
load \sbftest 
```

注意 ' `.../branchname/LATEST`' 语法，这意味着：选择`LATEST`分支 ' `branchname`' 的版本，无论父分支是什么。

我不确定您在哪个 Stream 下添加了文件，因此上述配置规范将首先选择分支“ `sbfuser_testir_proj_dev_strm`”的版本。
如果该分支中没有版本，它将默认为`LATEST`分支' `am_testir_proj_dev_strm`'中的版本。
如果该开发分支中没有版本，它将默认为`LATEST`集成分支的版本。

* * *

[OP](https://stackoverflow.com/users/1179677/falconk) 猎鹰[评论](https://stackoverflow.com/questions/12487501/i-have-a-ucm-component-on-a-base-cc-vob-but-cannot-see-it-from-a-base-cc-view/12487697#comment17172227_12487697)：

> 我在这里问过，看起来 UCM 组件不是使用正确的选项创建的

这可以解释这个问题，因为创建组件时的唯一选择（请参阅 参考资料[`cleartool mkcomp`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/topic/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_mkcomp.htm)）是`-root`一个：组件要么是“基于根的”，要么是“无根的”。
如果该组件没有根，则它是用于聚合其他组件的“元组件”。
并且任何配置规范选择规则都不允许`Source`看到“”。

# ruby-on-rails - 麻烦重新（部署）到heroku

> ID：12487503
> 
> 赞同：0
> 
> 时间：2012-09-19T01:48:55.943
> 
> 标签：ruby-on-rails, heroku, github

我无法从 Hartls 书中重新部署示例应用程序：

```
 !  No such app as murmuring-beyond-6630. 
```

然后我登录到 Heroku，删除了应用程序并创建了另一个......

```
fatal: The remote end hung up unexpectedly
yuliya@ubuntu:~/rails_projects/sample_app$ heroku create

Creating cryptic-plains-9409... done, stack is cedar
http://cryptic-plains-9409.herokuapp.com/ | git@heroku.com:cryptic-plains-9409.git

yuliya@ubuntu:~/rails_projects/sample_app$ heroku keys:add
Found existing public key: /home/yuliya/.ssh/yuliya.pub
Uploading SSH public key /home/yuliya/.ssh/yuliya.pub... done

yuliya@ubuntu:~/rails_projects/sample_app$ git push heroku master

 !  No such app as murmuring-beyond-6630. 
```

仍然引用了以前的应用程序，所以我使用 git rm heroku 命令将其删除。然后我运行 heroku create。然后尝试再次推送应用程序...

```
yuliya@ubuntu:~/rails_projects/sample_app$ git remote add heroku git@heroku.com:cryptic-plains-9409
yuliya@ubuntu:~/rails_projects/sample_app$ git push heroku master

 !  Invalid path.
 !  Syntax is: git@heroku.com:<app>.git where <app> is your app's name. 
```

我完全被困住了，希望能在这里得到任何帮助。我对此很陌生，感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T03:07:14.413

我相信你离开了`.git`，这就是错误所抱怨的。

尝试这个，

```
git remote set-url heroku git@heroku.com:cryptic-plains-9409.git
git push heroku master 
```

引用了这个问题： [“git push heroku master”如何知道推送到哪里以及如何推送到不同的仓库？](https://stackoverflow.com/questions/5338551/how-does-git-push-heroku-master-know-where-to-push-to-and-how-to-push-to-a-dif)

# javascript - JQuery 滑块奇怪的值

> ID：12487505
> 
> 赞同：0
> 
> 时间：2012-09-19T01:49:49.173
> 
> 标签：javascript, jquery, slider

我的 JQuery 滑块的`value`吸气剂不起作用。

`var value = $("#slider").slider("option", "value")`

它没有返回正确的值。如果有帮助，我的滑块范围是 1 到 5。它返回与实际值不对应的奇数值。如果我将它移到最后并再次移回，而不是像它应该的那样去 1、2、3、4、5、4、3、2、1，它会做 0、0、2、3、4、5， 4, 3, 2。5 甚至不是在末尾，当我走到末尾时它说 4 但是当我将它滑回一个时它说 5！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T01:59:46.017

您何时尝试查询这些值？

如果是在`slide`回调期间，您将获得***先前的 value****，而不是 current*，您应该使用该`ui.value`参数。

# c++ - Qt C++ Set Set Vtk Axis Scake

> ID：12487507
> 
> 赞同：1
> 
> 时间：2012-09-19T01:50:12.183
> 
> 标签：c++, qt, vtk

我有以下代码，我在 3d 空间中绘制点：

```
 vtkSmartPointer<vtkPoints> points =
            vtkSmartPointer<vtkPoints>::New();

        for(int in = 0; in<x.size(); in++)
        {
            points->InsertNextPoint (x[in], y[in], ry[in]);
        }

          vtkSmartPointer<vtkPolyData> pointsPolydata =
            vtkSmartPointer<vtkPolyData>::New();

          pointsPolydata->SetPoints(points);

          vtkSmartPointer<vtkVertexGlyphFilter> vertexFilter =
            vtkSmartPointer<vtkVertexGlyphFilter>::New();
        #if VTK_MAJOR_VERSION <= 5
          vertexFilter->SetInputConnection(pointsPolydata->GetProducerPort());
        #else
          vertexFilter->SetInputData(pointsPolydata);
        #endif
          vertexFilter->Update();

          vtkSmartPointer<vtkPolyData> polydata =
            vtkSmartPointer<vtkPolyData>::New();
          polydata->ShallowCopy(vertexFilter->GetOutput());

          // Setup colors
          unsigned char red[3] = {255, 0, 0};
          unsigned char green[3] = {0, 255, 0};
          unsigned char blue[3] = {0, 0, 255};

          vtkSmartPointer<vtkUnsignedCharArray> colors =
            vtkSmartPointer<vtkUnsignedCharArray>::New();
          colors->SetNumberOfComponents(3);
          colors->SetName ("Colors");
          colors->InsertNextTupleValue(red);
          colors->InsertNextTupleValue(green);
          colors->InsertNextTupleValue(blue);

          polydata->GetPointData()->SetScalars(colors);

          // Visualization
          vtkSmartPointer<vtkPolyDataMapper> mapper =
            vtkSmartPointer<vtkPolyDataMapper>::New();
        #if VTK_MAJOR_VERSION <= 5
          mapper->SetInputConnection(polydata->GetProducerPort());
        #else
          mapper->SetInputData(polydata);
        #endif

          vtkSmartPointer<vtkActor> actor =
            vtkSmartPointer<vtkActor>::New();
          actor->SetMapper(mapper);
          actor->GetProperty()->SetPointSize(5);

          vtkSmartPointer<vtkRenderer> renderer =
            vtkSmartPointer<vtkRenderer>::New();
          vtkSmartPointer<vtkRenderWindow> renderWindow =
            vtkSmartPointer<vtkRenderWindow>::New();
          renderWindow->AddRenderer(renderer);
          vtkSmartPointer<vtkRenderWindowInteractor> renderWindowInteractor =
            vtkSmartPointer<vtkRenderWindowInteractor>::New();
          renderWindowInteractor->SetRenderWindow(renderWindow);

          renderer->AddActor(actor);

          this->ui->qvtkWidget->GetRenderWindow()->AddRenderer(renderer);
          renderWindowInteractor->Start(); 
```

当我得到结果图时。所有点都被绘制出来，但由于默认比例，很难看到任何东西。我不确定如何在 z 轴上放大视图。任何帮助，将不胜感激。

# jquery - Jquery 衬衫设计师 - 如何？

> ID：12487511
> 
> 赞同：2
> 
> 时间：2012-09-19T01:50:27.067
> 
> 标签：jquery, jquery-ui, codeigniter, jquery-ui-draggable, jquery-ui-droppable

我有一个客户要求我做一些类似于你在主流 T 恤网站上看到的衬衫设计师的东西。

它需要用户能够在文本输入中输入文本，然后在图像周围拖动文本。我有两个主要问题，如果我能弄清楚它们，我将能够完成这个项目......

关注1：如何让文本在图像周围拖动？我的想法是使用可拖动的 Jquery UI 在页面周围拖动文本。我只会使用 jquery 来获取文本输入的值并将其放入可拖动的 div 中。这听起来像是一个好计划吗？

问题 2：我如何拍摄包含他的衬衫图像和他想要的位置的文本的主 div 的快照，以便我可以将图像传递给网站所有者？是否有某种脚本可以拍摄 div 的快照？我四处寻找答案，但找不到太多。

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T07:30:57.097

看看 FabricJS：[http](http://fabricjs.com/) ://fabricjs.com/ ，尤其是厨房水槽演示：[http ://fabricjs.com/kitchensink/](http://fabricjs.com/kitchensink/)

您可以进行所需的文本修改，然后将其导出为 SVG。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T02:05:49.153

您可能需要考虑使用 HTML5 画布（如果您需要支持的浏览器支持它）。然后，您将能够使用诸如此类的库：[http://www.nihilogic.dk/labs/canvas2image/](http://www.nihilogic.dk/labs/canvas2image/)对于拖放，请查看此链接：[http ://html5.litten.com/how-在 html5-canvas/ 上拖放](http://html5.litten.com/how-to-drag-and-drop-on-an-html5-canvas/)

如果你必须使用 jQuery 来支持客户端浏览器，我不相信有一个简单的方法来捕获图像。但是，您可以做的是将 T 恤上文本的坐标、宽度、字体、字体大小和字体颜色发送到服务器，并在那里渲染图片。然后，您可以在客户完成订单之前，在确认对话框中将该图片加载回客户浏览器中。如果这听起来很合理，并且您可以访问服务器环境，那么您使用什么语言进行编程？php？其他？

您可能还想考虑网站所有者实际上是如何创建在网站上制作的 T 恤的。可能是文本的坐标，以及字体等……都是他/她制作衬衫所需要的，而不仅仅是最终版本应该是什么样子的图片。

# php - 在使用 PHP 类的所有函数中使用公共变量

> ID：12487512
> 
> 赞同：-2
> 
> 时间：2012-09-19T01:50:44.253
> 
> 标签：php

假设我有如下 PHP 代码：

```
class modual {
  public $glo;

  static public function SaveData($RDesTechni = 1,$RCapacity = 2){
    try{
      $sql = "INSERT INTO tblworkfaire VALUES('',$RDesTechni,$RCapacity)";
      $qry=mysql_query($sql) or die (mysql_error());
      $id = mysql_insert_id();
      $glo = $id;
    }
    catch(exception $e){
      echo $e;
    }
  }

  static public function ListData(){
    try {
      include("connectdb.php");

      $query = "SELECT * FROM tblworkfaire where id=".$glo;

      return $query;
    }
    catch(exception $e){
      echo $e;
    }
  }
} 
```

**我需要的：**

我想`$id`在函数中使用，`static public function ListData()`但它不起作用。

**问题：**

它不起作用它向我显示错误`undefined $glo`我如何解决这个问题？请任何人帮助我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T01:54:59.950

您是否考虑过将所需的参数传递给函数？

```
static public function ListData( $glo ){ 
```

当您调用该方法时，您将包含 id 的值：

```
$myModual->ListData($id); 
```

一般来说，将变量传递给函数而不是使用全局变量是更好的设计。

您还可以为该类创建一个构造函数，以便在初始化该类的对象时为 $glo 存储一个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T02:17:06.540

您必须使用*self*来访问变量，并且它还需要是*public static*。

```
class modual {
  public static $glo;

  static public function SaveData($RDesTechni = 1,$RCapacity = 2){
    try{
      self::$glo = 5;
    }
    catch(exception $e){
      echo $e;
    }
  }

  static public function ListData(){
    echo self::$glo;
  }
} 
```

# c++ - ostringstream 有时会导致崩溃

> ID：12487513
> 
> 赞同：0
> 
> 时间：2012-09-19T01:50:53.603
> 
> 标签：c++, tostring, ostringstream

所以我在夏天写了一个 ArrayList 的实现，我有一个 toString 方法，在该方法中我使用一个 ostringstream 对象来附加字符串，然后输出它们。

方法如下：

```
template<class T>
std::string ArrayList<T>::toString() {

    std::ostringstream streamOut;

    streamOut << "(";

    for (int i = 0; i < size; i++) {

        streamOut << array[i];

        if (i != (size - 1)) {

            streamOut << ", ";
        }
    }

    streamOut << ")\n";

    std::string returnString = streamOut.str();

    return returnString;
} 
```

问题是当我运行这个程序时，它有时会在上述方法中崩溃：

```
 streamOut << "("; 
```

我尝试在最后添加一个flush语句，但这并没有成功……我真的不知道这里可能出了什么问题。

我认为这个问题可能是相关的，但我不能确定......

[https://stackoverflow.com/questions/8250851/big-ostringstream-causes-application-crash](https://stackoverflow.com/questions/8250851/big-ostringstream-causes-application-crash)

编辑：

我忘了提到，我正在使用 eclipse 进行开发，当我在 eclipse 中运行它时，我无法让程序崩溃。只有当我运行通过 Windows 或命令行生成的 exe 时才会崩溃

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T02:02:46.343

我认为它崩溃了，因为在此方法之前的某个地方错误地释放了内存。

# jquery-ui - JQuery 自动完成：触发器

> ID：12487519
> 
> 赞同：2
> 
> 时间：2012-09-19T01:52:13.773
> 
> 标签：jquery-ui, jquery, grails, selection

众所周知，它是一个包含元素`javax.swing.JComboBox`的下拉选择。`E`设置时`.setEditable(true)`，我们现在可以将其`JComboBox`设置`JTextField`为其他`E`元素。

对此进行搜索后`Google`，它向我们返回了*JQuery*使用的关于[此处](http://jqueryui.com/demos/autocomplete/#combobox)显示的*自动完成*的建议。自动完成功能正在处理选择，但问题出在这里，我们需要**触发****包含 的属性，****以在所述的属性****上呈现特定模板****。****`onChange``${remoteFunction}``update``${remoteFunction}`**

```
<g:select  
  id="itemSelectId"
  onChange="${remoteFunction(
    controller:'item', action:'itemSelect',
    update:[success:'updateItemId'],
    params:'\'id=\' + escape(this.value)'"/>
<div id="updateItemId></div> 
```

在链接上`<script>`提供的我们只是更改`#combobox`为`#itemSelectId`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:56:48.763

看看[select2](http://ivaynberg.github.com/select2/index.html)，该库可能会提供您正在寻找的功能。

# ruby-on-rails-3 - RoR：我应该在路由文件中添加什么来消除此错误：没有路由匹配 [POST] "/users/1

> ID：12487520
> 
> 赞同：0
> 
> 时间：2012-09-19T01:52:17.987
> 
> 标签：ruby-on-rails-3, routing, form-helpers

我有一个应用程序，用户可以在其中发布微博。但是在表格中输入一个并按帖子，它说没有路线匹配[POST]“/users/1”。我不明白这一点。听起来它正在尝试创建 /users/1 或第一个用户，但我只是使用表单来创建微博。这是我当前的 routes.rb 文件...

```
SampleApp::Application.routes.draw do
  resources :users do
    resources :comments

    member do
      get :following, :followers
    end
  end
  resources :sessions, only: [:new, :create, :destroy]
  resources :microposts, only: [:create, :destroy] do
    resources :comments

  end
  resources :relationships, only: [:create, :destroy]

  root to: 'static_pages#home'

  match '/signup',  to: 'users#new'
  match '/signin',  to: 'sessions#new'
  match '/signout', to: 'sessions#destroy', via: :delete

  match '/help',    to: 'static_pages#help'
  match '/about',   to: 'static_pages#about'
  match '/contact', to: 'static_pages#contact'

  # The priority is based upon order of creation: 
```

这是我运行 rake 路由时的输出：

```
user_comments GET    /users/:user_id/comments(.:format)                    comments#index
                       POST   /users/:user_id/comments(.:format)                    comments#create
      new_user_comment GET    /users/:user_id/comments/new(.:format)                comments#new
     edit_user_comment GET    /users/:user_id/comments/:id/edit(.:format)           comments#edit
          user_comment GET    /users/:user_id/comments/:id(.:format)                comments#show
                       PUT    /users/:user_id/comments/:id(.:format)                comments#update
                       DELETE /users/:user_id/comments/:id(.:format)                comments#destroy
        following_user GET    /users/:id/following(.:format)                        users#following
        followers_user GET    /users/:id/followers(.:format)                        users#followers
                 users GET    /users(.:format)                                      users#index
                       POST   /users(.:format)                                      users#create
              new_user GET    /users/new(.:format)                                  users#new
             edit_user GET    /users/:id/edit(.:format)                             users#edit
                  user GET    /users/:id(.:format)                                  users#show
                       PUT    /users/:id(.:format)                                  users#update
                       DELETE /users/:id(.:format)                                  users#destroy
              sessions POST   /sessions(.:format)                                   sessions#create
           new_session GET    /sessions/new(.:format)                               sessions#new
               session DELETE /sessions/:id(.:format)                               sessions#destroy
    micropost_comments GET    /microposts/:micropost_id/comments(.:format)          comments#index
                       POST   /microposts/:micropost_id/comments(.:format)          comments#create
 new_micropost_comment GET    /microposts/:micropost_id/comments/new(.:format)      comments#new
edit_micropost_comment GET    /microposts/:micropost_id/comments/:id/edit(.:format) comments#edit
     micropost_comment GET    /microposts/:micropost_id/comments/:id(.:format)      comments#show
                       PUT    /microposts/:micropost_id/comments/:id(.:format)      comments#update
                       DELETE /microposts/:micropost_id/comments/:id(.:format)      comments#destroy
            microposts POST   /microposts(.:format)                                 microposts#create
             micropost DELETE /microposts/:id(.:format)                             microposts#destroy
         relationships POST   /relationships(.:format)                              relationships#create
          relationship DELETE /relationships/:id(.:format)                          relationships#destroy
                  root        /                                                     static_pages#home
                signup        /signup(.:format)                                     users#new
                signin        /signin(.:format)                                     sessions#new
               signout DELETE /signout(.:format)                                    sessions#destroy
                  help        /help(.:format)                                       static_pages#help
                 about        /about(.:format)                                      static_pages#about
               contact        /contact(.:format)                                    static_pages#contact 
```

我想我真正需要的是让 [POST] users/:id 路由到 microposts#create，但我不知道它的语法。

ps 如果我添加帖子 "users/:id", :controller => "users/update"，我会收到错误消息：

```
ArgumentError (missing :action):
  config/routes.rb:4:in `block (2 levels) in <top (required)>'
  config/routes.rb:2:in `block in <top (required)>'
  config/routes.rb:1:in `<top (required)>' 
```

这是与控制器交谈的形式（我认为）

```
<%= form_for :micropost do |f| %>

  <div class="field no-indent">
    <%= f.text_area :content, placeholder: "What's something else you want to buy?" %>
    <%= hidden_field_tag 'micropost[kind]', "purchase" %>
  </div>
  <%= f.submit "Post", class: "btn btn-large btn-primary" %>
<% end %> 
```

另外，这里是 microposts_controller.rb

```
class MicropostsController < ApplicationController

  before_filter :correct_user,   only: :destroy

  def create
    @micropost = current_user.microposts.build(params[:micropost])
    if @micropost.save
      flash[:success] = "Micropost created!"
      redirect_to root_path
    else
      @feed_items = []
      render 'static_pages/home'
    end
  end

  def new
    @micropost = Micropost.new(params[:micropost])
  end

  def show

    @micropost = Micropost.find(params[:id])
    @microposts = Micropost.where(:user_id => @user.id)
    @purchases = @microposts.where(:kind => "purchase")
    @sales = @microposts.where(:kind => "sale")

  end 
```

和 users_controller.rb

```
class UsersController < ApplicationController
  before_filter :signed_in_user, 
                only: [:index, :edit, :update, :destroy, :following, :followers]
  before_filter :correct_user,   only: [:edit, :update]
  before_filter :admin_user,     only: :destroy

  def index
    @users = User.paginate(page: params[:page])
  end

  def show
    @user = User.find(params[:id])
    @microposts = @user.microposts.paginate(page: params[:page])
  end

  def new
    @user = User.new
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      flash[:success] = "Welcome to the Sample App!"
      redirect_to @user
    else
      render 'new'
    end
  end

  def edit
  end

  def update
    if @user.update_attributes(params[:user])
      flash[:success] = "Profile updated"
      sign_in @user
      redirect_to @user
    else
      render 'edit'
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T05:07:59.770

根据评论，您的问题是多方面的：

1）恢复`form_for`到以前的样子

2)`@micropost`在呈现该表单的相应操作中设置变量。在 users#show 的情况下，这将是`UsersController`

```
def show
  @micropost = Micropost.new
end 
```

# c# - 寻找一种从标签中检索信息的方法。例如

> ID：12487521
> 
> 赞同：0
> 
> 时间：2012-09-19T01:52:28.313
> 
> 标签：c#, html-agility-pack

> [](www.facebook.com)
> 
> [**可能重复：**](www.facebook.com) [如何使用 HTML 敏捷包](https://stackoverflow.com/questions/846994/how-to-use-html-agility-pack)

我正在寻找一种从标签中检索信息的方法。例如，无论如何要检索 www.facebook.com？我正在使用 c#，我尝试使用 htmlagilitypack，但我似乎找不到检索它的方法。

非常感谢 =)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T04:13:09.607

在这种情况下，我最终会使用 javascript。然后您可以定位 dom 对象并引用属性“href”。但是在后面的代码中，您可能需要使用正则表达式来注意 href。

# java - Datanucleus JSON 对兼容的 JSON 存储支持什么身份验证

> ID：12487526
> 
> 赞同：0
> 
> 时间：2012-09-19T01:53:53.023
> 
> 标签：java, json, persistence, datanucleus

*我不知道为什么我之前的问题被关闭了。我认为我的问题是合法的*

[Datanucleus JSON](http://www.datanucleus.org/products/datanucleus/json/support.html)库将哪种身份验证发送到受支持的 JSON 数据存储？

*   基本的 Http 身份验证？
*   摘要认证？
*   或两者？

我正在构建自己的 JSON 数据存储库，并且我希望至少与该库兼容。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-08T13:40:32.943

查看代码将为您提供答案。我怀疑目前那里有任何身份验证，但请检查代码。毫无疑问，添加一个模块来完成它应该很容易。

# c++ - C++ 从静态方法在 Windows 中设置控制台文本颜色

> ID：12487529
> 
> 赞同：2
> 
> 时间：2012-09-19T01:54:04.347
> 
> 标签：c++, windows, oop, class, console-application

是否可以在类中使用静态方法为 Windows C++ 应用程序设置控制台的文本颜色？我的代码如下所示：

**显示.h：**

```
class Display {
public:
  Display();
  static void setTextColor(int color);
}; 
```

**显示.cpp：**

```
#include <windows.h>
#include "Display.h"

void Display::setTextColor(int color) {
  HANDLE cHandle;
  cHandle = GetStdHandle(STD_OUTPUT_HANDLE);

  SetConsoleTextAttribute(cHandle, color);
} 
```

**主.cpp：**

```
#include <iostream>
#include "Display.h"

int main(int argc, char *argv[]) {
  std::cout << "HI"; //Outputs default color
  Display::setTextColor(9);
  std::cout << "HI"; //Still default color

  return 0;
} 
```

谁能解释一下为什么这个静态方法不会更新文本颜色？如果内联放置，此 excat 代码将起作用。

感谢您的时间。

# python - 如何在运行时跳过整个 Python 'unittest' 模块？

> ID：12487532
> 
> 赞同：32
> 
> 时间：2012-09-19T01:54:12.370
> 
> 标签：python, unit-testing

我希望我的 Python *unittest*模块告诉测试运行者在某些情况下完全跳过它（例如无法导入模块或定位关键资源）。

我可以`@unittest.skipIf(...)`用来跳过*unittest.TestCase*类，但是如何跳过**整个模块**？将跳过应用于每个类是不够的，因为如果模块无法导入，类定义本身可能会导致异常。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-19T04:22:04.150

如果查看 and 的定义`unittest.skipIf`，`unittest.skip`您可以看到`raise unittest.SkipTest(reason)`执行测试时，关键是在做。如果您可以将它显示为**一个**跳过的测试而不是测试运行器中的几个，您可以简单地`unittest.SkipTest`在导入时提高自己：

```
import unittest
try:
    # do thing
except SomeException:
    raise unittest.SkipTest("Such-and-such failed. Skipping all tests in foo.py") 
```

运行`nosetests -v`给出：

```
Failure: SkipTest (Such-and-such failed. Skipping all tests in foo.py) ... SKIP:
Such-and-such failed. Skipping all tests in foo.py

----------------------------------------------------------------------
Ran 1 test in 0.002s

OK (SKIP=1) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-05-08T08:42:33.153

我发现在 setUp 中使用 skipTest 效果很好。如果您需要导入一个模块，您可以使用 try 块来设置例如 module_failed = True，如果已设置，则在 setUp 中调用 skipTest。这报告了正确的测试跳过次数，只需要一个简短的尝试块：

```
import unittest

try:
    import my_module
    module_failed = False
except ImportError:
    module_failed = True

class MyTests(unittest.TestCase):
    def setUp(self):
        if module_failed:
            self.skipTest('module not tested')

    def test_something(self):
            #... 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-20T10:12:54.537

在这里查看其他答案后，这是我想出的最佳答案。将整个测试套件嵌入到异常处理中很丑陋，但它似乎可以满足您的需求。当导入不起作用时，特别是跳过测试。

假设您正在谈论使用nosetests -x 来运行它应该在跳过的测试之后继续进行的测试，至少在我尝试它时它似乎如此。

```
import unittest
try:
    import PyQt4
    # the rest of the imports

    # actual tests go here.
    class TestDataEntryMixin(unittest.TestCase):
        def test_somefeature(self):
            # ....

except ImportError, e:
    if e.message.find('PyQt4') >= 0:
        class TestMissingDependency(unittest.TestCase):

            @unittest.skip('Missing dependency - ' + e.message)
            def test_fail():
                pass
    else:
        raise

if __name__ == '__main__':
    unittest.main() 
```

如果导入失败，它将用一个简单地跳过的测试替换测试运行。我还试图确保它不会无意中吞下任何异常。该解决方案很大程度上归功于该问题的所有其他答案和评论。

如果你在详细模式下运行它，你会在它跳过时看到这个，

```
test_fail (test_openihm_gui_interface_mixins.TestMissingDependency) ... skipped 'Missing dependency - No module named PyQt4' 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-10-05T11:14:09.967

```
@unittest.skip('comments_for_skipping_unit_tests')
class MyTests(unittest.TestCase):
def setUp(self):
    pass

def test_something(self): 
```

*您可以使用@unittest.skip*装饰器跳过整个单元测试类。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-06-17T19:21:58.767

对于 Python 2.7+（或使用*unittest2* backport）：

```
...

import unittest

def setUpModule():
    try:
        import something
    except ImportError as err:
        raise unittest.SkipTest(str(err))

class Tests(unittest.TestCase):
    @classmethod
    def setUpClass(cls):
        try:
            import something
        except ImportError as err:
            raise unittest.SkipTest(str(err))
... 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-09-19T04:25:55.860

尝试`load_tests`在你的模块中定义一个自定义函数：

```
import unittest
try:
    (testcases)
except ImportError as e:
    def load_tests(*args, **kwargs):
        print("Failed to load tests: skipping")
        return unittest.TestSuite() # no tests 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-09-10T14:43:11.707

[otus 提出的解决方案](https://stackoverflow.com/questions/12487532/how-do-i-skip-a-whole-python-unittest-module-at-run-time/23536853#23536853)有效，并且在我看来比公认的解决方案更容易。但至少有一个缺点。如果您`my_module`在装饰器中查询以跳过单个测试，例如

```
@unittest.skipIf(my_module.support_foo, 'foo not supported')
def test_foo(self):
... 
```

你会得到一个`NameError: name 'my_module' is not defined`. 解决方案是将跳过*放在*函数定义中：

```
def test_foo(self):
    if not my_module.support_foo:
        self.skipTest('foo not supported') 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-09-19T04:00:51.173

将所有子类定义放在一个块中可能*很脏*，但它会起作用：`unittest.TestCase``try...except`

```
import unittest
try:
    import eggs
    class Spam(unittest.TestCase):
        pass
    class Ham(unittest.TestCase):
        pass
    # ...
except ImportError:
    # print 'could not import eggs'
    pass 
```

`eggs`如果导入失败并且所有这些类 ( `Spam, Ham, etc.`) 都被跳过，则不会定义任何子类。它不会反映在输出中（好坏取决于你想要什么）。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-02-25T15:29:42.080

结合上述答案并使用[此答案](https://stackoverflow.com/questions/5847934/how-to-check-if-python-module-exists-and-can-be-imported)：

```
import unittest
def module_exists(module_name):
    try:
        __import__(module_name)
    except ImportError:
        return False
    else:
        return True

class TestClass(unittest.TestCase):

    @unittest.skipUnless(module_exists("moduleA"), 'ModuleA not installed')
    def test_something(self):
        # test something with moduleA 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-03-26T17:11:02.773

您可以跳过整个课程，就像跳过单个方法一样。[文档](https://docs.python.org/dev/library/unittest.html#skipping-tests-and-expected-failures)

```
@unittest.skip("showing class skipping")
class MySkippedTestCase(unittest.TestCase):
    def test_not_run(self):
        pass 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-02-22T21:42:45.227

所以这个问题已经有近十年的历史了，仍然适用！但是，其他答案都没有解决我今天遇到的问题 - 来自缺失库的测试装饰器。在这种情况下，它`hypothesis`和它的装饰器一样`@given`......所以我被迫提出了这个不太友好的替代方案：

```
try:
    from hypothesis import assume, example, given, strategies as st
    hypothesis_missing = False
except ImportError:
    hypothesis_missing = True
    def whatever(*args, **kwargs):
        if args or kwargs:
            return whatever
        raise ImportError("Requires hypothesis library")
    example = given = whatever
    # Then this part is ickier to be py2.7 compatible
    from six import add_move, MovedModule
    add_move(MoveModule('mock', 'mock', 'unittest.mock'))
    from six.moves import mock
    st = mock.Mock()  # Without this, things like st.integers() fail 
```

一个 Python3 原生的解决方案只会把它收紧一点：

```
 import unittest
  st = unittest.mock.Mock() 
```

然后在*每个*测试课上（呃）我需要：

```
@unittest.skipIf(hypothesis_missing, "Requires hypothesis library") 
```

**重要提示：**如果没有`skipIf`，测试有时会**默默通过**-在我非常有限的测试中， `raise ImportError`in`whatever()`仅捕获了大约一半。

# jquery - 通过旋转 DIV 来控制列表的位置

> ID：12487533
> 
> 赞同：2
> 
> 时间：2012-09-19T01:54:39.167
> 
> 标签：jquery, rotation, mouse, drag

我有一个长期的目标，我正在慢慢地朝着它前进，但我需要很多帮助，真的不知道我在做什么吗？

请看看这个小提琴：http: [//jsfiddle.net/bloodygeese/vjU5b/27/](http://jsfiddle.net/bloodygeese/vjU5b/27/)

我的最终目标是让红色方块控制列表的位置，当方块向右旋转时（顺时针列表向下移动以在蓝色框区域内显示新的一行文本，然后当到达列表移动将被反转，正方形将向左旋转（逆时针），列表将向上滑动以在蓝色框中显示一行文本，我真正希望能够学习的是如何使用拖动用鼠标围绕红色方块旋转方块并上下滑动列表并对齐位置，使文本位于蓝色框内。

目前，当正方形旋转时，我无法让列表继续移动，它只移动一次，从那里我不知道如何让它反转或如何使用鼠标拖动来控制它。

任何指针/帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T02:06:46.843

要让列表继续移动，您需要：

```
$('#list').animate({top : "+=20px"}, {duration:500}) 
```

代替

```
 $('#list').animate({top : "=120px"}, {duration:500}) 
```

第二个语句只会将其定位到 top:120px，而第一个语句会在每次单击时将位置递减 20px

为了改变方向，你可以这样做[jsfiddle](http://jsfiddle.net/8eqGQ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T02:06:55.763

您应该每次都更改列表顶部，如下所示：

```
var top = 120;

$(function(){
$('#box').click(function(){
    $('#list').animate({top : top + "px"}, {duration:500});
    top = top + 20;        
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T02:27:46.013

检查这个如何完成的小例子。我还没有写完整的代码..

[小提琴](http://jsfiddle.net/sushanth009/vjU5b/32/)

# java - java akka远程集群与play框架

> ID：12487536
> 
> 赞同：4
> 
> 时间：2012-09-19T01:55:19.950
> 
> 标签：java, playframework, akka

我正在构建一个具有多个节点的集群计算机系统。有一个主节点假设将任务调度到集群中的多个节点。这些节点是通过网络电缆连接到主节点的独立 PC。整个系统预计用java akka和play框架平台实现。有没有办法通过带有播放框架的akka​​远程集群来实现这一点。

我知道远程计算器教程，但它似乎是在 SBT 平台上运行的，但我很想知道播放框架中是否存在类似的教程。

或任何链接来帮助我完成我的项目

谢谢你

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T08:17:17.147

Play 的一个实例！框架应用程序可以使用简单的配置连接到远程 Akka 节点（即：您的主节点）。

有两种方法：

1.  覆盖默认的actor系统
2.  定义一个新的actor系统

我建议你使用第二个。在这种情况下，您必须在 application.conf 中添加类似

```
master {
    akka {
        actor {
            provider = "akka.remote.RemoteActorRefProvider"
        }
        remote {
            transport = "akka.remote.netty.NettyRemoteTransport"
            netty {
                hostname = "your-master-host-name"
                port = 0
            }
        }
    }
} 
```

然后在你的游戏中！应用程序，您可以通过这种方式连接到远程主节点

```
 ActorSystem system = ActorSystem.create("master", ConfigFactory.load().getConfig("master"))

 ActorRef master = system.actorFor("akka://master@your-master-host-name:your-master-port/user/master") 
```

如果您更喜欢覆盖默认的 Play Akka 演员系统。这是参考配置：[http ://www.playframework.org/documentation/2.0.3/AkkaCore](http://www.playframework.org/documentation/2.0.3/AkkaCore)

对于主节点和计算集群节点，我建议您使用此处描述的架构和代码：http: [//letitcrash.com/post/29044669086/balancing-workload-across-nodes-with-akka-2](http://letitcrash.com/post/29044669086/balancing-workload-across-nodes-with-akka-2)

如果您的主节点和计算节点不需要 Web 或 REST 接口，您可以将它们实现为简单的 Java 程序。

在引用的文章中，节点没有远程暴露。为此，只需在主节点应用程序中添加一个 application.conf：

```
master {
    akka {
        actor {
            provider = "akka.remote.RemoteActorRefProvider"
        }
        remote {
            transport = "akka.remote.netty.NettyRemoteTransport"
            netty {
                hostname = "your-master-host-name"
                port = your-master-port
            }
        }
    }
} 
```

并用actorOf方法实例化它

```
ActorSystem system = ActorSystem.create("master", ConfigFactory.load().getConfig("master"))

ActorRef master = system.actorOf(new Props(Master.class), "master") 
```

计算节点必须以与 Play 相同的方式配置！节点。

请注意，只有主节点定义了 TCP-IP 端口。非主节点使用 0 端口，这配置 Akka 为它们选择一个随机的空闲端口。这是正确的，因为您需要的唯一众所周知的主机：端口地址是主节点，每个节点在启动时都必须指向该地址。

# mongodb - MongoDB，如何更新一组中的嵌入式文档或插入一个如果它不存在？

> ID：12487537
> 
> 赞同：2
> 
> 时间：2012-09-19T01:55:21.447
> 
> 标签：mongodb

**如果单个查询**中不存在嵌入文档，如何更新集合中的嵌入文档或插入一个？假设我有如下文件。而“记录”是一组嵌入文档。

```
{
    id: "1",
    records: [
        {userId:"5", userData: "..."},
        {userId:"12", userData: "..."},
        {userId:"27", userData: "..."}
    ]
} 
```

我知道如何在单独的查询中插入或更新“记录”。但是我可以组合这些查询，使其与 MySQL 的 ON DUPLICATE KEY UPDATE 类似吗？我想避免执行另一个查询只是为了找出嵌入文档是否存在。

```
db.myCollection.update(
    {id:"1", records.userId:"12"},
    {records.$.userData:{"... new data ..."}}
);

db.myCollection.update(
    {id:"1"},
    {records:
        {$push:
            {userId: "33", userData: {"... new data ..."}}
        }
    }
); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T02:29:04.587

你可以使用 Upsert

[http://www.mongodb.org/display/DOCS/Updating#Updating-%7B%7Bupserts%7D%7D](http://www.mongodb.org/display/DOCS/Updating#Updating-%7B%7Bupserts%7D%7D)

# .htaccess - ModX Revo：友好的 URL 不起作用

> ID：12487540
> 
> 赞同：0
> 
> 时间：2012-09-19T01:56:25.050
> 
> 标签：.htaccess, friendly-url, modx, modx-revolution

这似乎是一个常见问题，但我已经尝试了所有建议，但都没有奏效。

问题是当我在 ModX Revo 中打开友好 URL 时，我的所有链接都会损坏 (404s)。URL 确实显示正确，其后有别名。

这是我尝试过的：

*   将 ht.access 更改为 .htaccess
*   `MODX_BASE_PATH`确保confic.inc.php 文件中存在正确的路径
*   确保系统设置中的所有 FURL 设置正常且正确
*   清除浏览器和 ModX 缓存

如果有人可以建议我错过的东西，那就太好了！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:00:39.843

需要一些mroe信息：

您是否在本地开发（WAMP、MAMP ..）？如果您确定在您的 apache 设置中启用了 mod_rewire。如果不确定它是否已在您的主机上启用。

您是否在浏览器中手动输入网址（没有寻路器）？(www.yoursite.com/somepage)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T23:12:45.793

好的，我在 ModX 系统设置中将 FURL 小写别名设置为“否”，现在它可以工作了......我不知道为什么，但你有它......

也许这是因为我在打开 FURL 之前指定了资源别名，因此它们实际上并没有将它们转换为小写

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-04T02:16:43.907

我意识到这是一个老问题，但我今晚才安装 REVO，在启用所有设置后，FURL 返回 404 错误时遇到问题。我没有做的是重命名 htaccess。一旦我将其重命名为 .htaccess 一切都很好。睡眠太少犯了愚蠢的错误，但我想我应该发布它，希望我可以节省一些浪费的时间。

# matlab - MATLAB：如何“形状不可知”地堆叠数组？

> ID：12487542
> 
> 赞同：4
> 
> 时间：2012-09-19T01:56:54.220
> 
> 标签：matlab

假设它`f`是一个参数的函数，它的输出是一个*n*维 ( *m* [1]  ×  *m* [2] ... ×  *m* [*n*] ) 数组，它`B`是一个长度为*k*的向量，其元素都是 的有效参数`f`。

> 我正在寻找一个方便的，更重要的是，“形状不可知”的 MATLAB 表达式（或配方），用于生成 ( *n* +1) 维 ( *m* [1]  ×  *m* [2]  ×…×  *m* [*n*]  ×  *k* ) 数组“堆叠” *k* *n*维数组`f(b)`，其中参数`b`范围超过`B`。

为此`numpy`，我将使用如下表达式：

```
C = concatenate([f(b)[..., None] for b in B], -1) 
```

如果它有任何用处，我将在下面解压缩这个 numpy 表达式（参见**附录**），但我现在要强调的特征是*它完全不知道 和 的形状/* `f(b)` *大小* `B`。对于我想到的应用程序类型，编写这种“与形状无关”的代码的能力*至关重要*。（我强调这一点，因为我在进行这种操作时遇到的许多 MATLAB 代码显然不是“与形状无关的”，而且我不知道如何做到这一点。）

* * *

**附录**

一般来说，如果`A`是一个 numpy 数组，那么表达式`A[..., None]`可以被认为是“重塑” `A`，以便它获得一个额外的、微不足道的维度。因此，如果`f(b)`是一个*n*维 ( *m* [1]  ×  *m* [2] … ×  *m* [*n*] ) 数组，则`f(b)[..., None]`是对应的 ( *n* +1) 维 ( *m* [1]  ×  *m* [2]  ×…×  *m* [*n*]  × 1) 数组。（添加这个微不足道的维度的原因将在下面变得清楚。）

有了这个澄清，第一个参数的含义`concatenate`，即：

```
[f(b)[..., None] for b in B] 
```

不太难破译。它是一个标准的 Python“列表推导”，它计算为*k* ( *n* +1) 维 ( *m* [1]  ×  *m* [2]  ×…×  *m* [*n*]  × 1) 数组的序列`f(b)[..., None]`，因为参数`b`范围在 vector 上`B`。

to的第二个参数`concatenate`是要执行连接的“轴”，表示为要连接的数组的相应维度的索引。`end`在这种情况下，索引 -1 与MATLAB中的关键字所起的作用相同。因此，表达式

```
concatenate([f(b)[..., None] for b in B], -1) 
```

说“`f(b)[..., None]`沿它们的最后一个维度连接数组”。正是为了提供这个“最后一个维度”来连接，所以有必要对`f(b)`数组进行整形（例如，使用`f(b)[..., None]`）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T02:07:57.737

一种方法是：

```
 % input:
 f=@(x) x*ones(2,2)
 b=1:3;
 %%%%
 X=arrayfun(f,b,'UniformOutput',0);
 X=cat(ndims(X{1})+1,X{:}); 
```

也许有更优雅的解决方案？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T05:10:41.870

形状不可知性是 NumPy 和 Matlab 背后的哲学之间的重要区别。在 Matlab 中比在 NumPy 中更难完成。在我看来，形状不可知论也是一件**坏事**——矩阵的形状具有*数学意义*。如果某些函数或类完全忽略输入的形状，或者以不符合数学符号的方式更改它们，那么该函数会破坏语言的部分功能和意图。

用程序员的话来说，它是一个真正有用的功能，旨在防止与形状相关的错误。当然，这通常是“程序上的不便”，但这不是调整语言的理由。这一切都在心态上。

现在，话虽如此，我怀疑 Matlab 中是否存在针对您的问题的优雅解决方案 :) 我的建议是将所有要求填充到函数中，这样您就不必进行任何后处理：

```
f = @(x) bsxfun(@times, permute(x(:), [2:numel(x) 1]), ones(2,2, numel(x)) ) 
```

现在显然这*不太*正确，因为`f(1)`它不起作用并且`f(1:2)`做了除 之外的其他事情`f(1:4)`，所以显然必须进行一些修补。但正如这个单线器的丑陋已经表明的那样，专用功能可能是一个更好的主意。Oli 建议的那个相当不错，只要你将它锁定在它自己的函数中：

```
function y = f(b)

    g = @(x)x*ones(2,2); %# or whatever else you want

    y = arrayfun(g,b, 'uni',false);
    y = cat(ndims(y{1})+1,y{:});
end 
```

以便`f(b)`任何`b`产生正确的输出。

# javascript - 在 node.js 中做对象文字块

> ID：12487545
> 
> 赞同：1
> 
> 时间：2012-09-19T01:57:33.063
> 
> 标签：javascript, node.js, asynchronous, blocking, promise

对象文字会阻塞吗？我正在尝试将其他函数的结果存储在我的分页助手类中，并且我的 Mocha 测试由于超时而失败，因为没有返回回调。如果我`local`从所有变量中删除（即`local.count`to `count`）并删除`.then`持有回调并将其放在第一个`.then`它突然起作用。

```
 render: (model, query, cb) =>
    self = @ 
    count = 0 
    local = {}

    count_promise = @query_count model, query

    count_promise.then (c) ->
      local.count = c 
      local.pages = self.pages(count)
      local.prev_class = self.prev_class(pages)
      local.next_class = self.next_class(pages)
      local.prev_page = self.prev_page(pages)
      local.next_page = self.next_page(pages)
    .then ->
      cb({num_pages: local.pages, current_page: self.page, prev_class: local.prev_class, next_class: local.next_class, prev_page: local.prev_page, next_page: local.next_page, results: {}})

    .fail (err) ->
      throw new Error(err)

    return 
```

编辑

我在回调之前添加了 console.log 以查看是否有任何显示。

```
.then ->
      console.log local
      cb({num_pages: local.pages, current_page: self.page, prev_class: local.prev_class, next_class: local.next_class, prev_page: local.prev_page, next_page: local.next_page, results: {}}) 
```

什么都没遇到。

使用 Sinon 和 Chai 断言的特定方法的 Mocha 测试代码：

```
describe 'PaginationHelper', ->

  describe 'Pagination Helper Initializes', ->
    it 'accepts page', ->
      assert.ok(new PaginationHelper(2))

  describe 'method testing', ->

    describe 'render method', ->
        ph = new PaginationHelper(2)
        result = {}

        before (done) ->
          ph.render BlogModel, {}, (res) ->
            result = res
            done()

        it 'returns object', ->
          assert.isObject(result)

        it 'returns object with num_pages', ->
          assert.property(result, "num_pages")

        it 'returns object with current_page', ->
          assert.property(result, 'current_page')

        it 'returns object with prev_class', ->
          assert.property(result, 'prev_class')

        it 'returns object with next_class', ->
          assert.property(result, 'next_class')

        describe 'render output testing', ->
          result = undefined

          before (done) ->
            ph = new PaginationHelper(1)
            ph.render BlogModel, {}, (res) ->
              result = res
              done()

          it 'returns a number for num_pages', ->
            assert.isNumber(result.num_pages)

          it 'returns a number for current_page', ->
            assert.isNumber(result.current_page)

          it 'returns string for prev_class', ->
            assert.isString(result.prev_class)

          it 'returns string for next_class', ->
            assert.isString(result.next_class) 
```

此测试的结果输出：

```
Error: Command failed:   ✖ 1 of 35 tests failed:

  1) PaginationHelper method testing render method "before all" hook:
     Error: timeout of 2000ms exceeded 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T05:36:19.073

我弄清楚了这个问题。[在深入研究Q Promise API](https://github.com/kriskowal/q/wiki/API-Reference)之前，我并没有正确理解 thenables 的链接。我没有纠正的变量中也有愚蠢的错误。超级累的时候编码并不酷。以下是代码的外观：

```
render: (model, query, cb) =>
    self = @  

    count_promise = @query_count model, query

    count_promise.fail (err) ->
      throw new Error(err)
    .then (c) ->
      defer = Q.defer()
      local = {}
      local.count = c 
      local.pages = self.pages(local.count)
      local.prev_class = self.prev_class(local.pages)
      local.next_class = self.next_class(local.pages)
      local.prev_page = self.prev_page(local.pages)
      local.next_page = self.next_page(local.pages)
      defer.resolve(local)
      return defer.promise
    .then (local) ->
      cb({num_pages: local.pages, current_page: self.page, prev_class: local.prev_class, next_class: local.next_class, prev_page: local.prev_page, next_page: local.next_page, results: {}})
    return 
```

# python - 多次导入一个模块有多安全？

> ID：12487549
> 
> 赞同：16
> 
> 时间：2012-09-19T01:58:02.303
> 
> 标签：python

我一直在想这个问题：多次导入模块是否保证安全？当然，如果模块执行诸如写入文件之类的操作系统操作，那么可能不会，但是对于大多数简单模块来说，简单地执行导入是否安全？是否有管理模块全局状态的约定？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-19T02:01:11.103

是的，你可以`import module`在一个 Python 程序中任意多次，无论它是什么模块。第一个之后的每个后续都`import`访问缓存的模块而不是重新评估它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-19T02:05:54.907

以一万个不同的名称导入 os 模块似乎没有任何问题。

```
for i in range(10000):
    exec("import os as foo%i" % i)

for i in range(10000):
    exec("foo%i.getcwd()" % i) 
```

随着不同类别的进口：

```
for i in range(10000):
    exec("""class FooClass%i:
    import os as foo%i
    print foo%i.getcwd()""" % (i,i,i)) 
```

两者都运行没有问题。当然不是保证，但至少看起来你不会立即遇到实际问题。

# ruby-on-rails - 如何让自定义 url 映射到数据库中的值？

> ID：12487550
> 
> 赞同：0
> 
> 时间：2012-09-19T01:58:06.727
> 
> 标签：ruby-on-rails, routes

我想要这样的网址：

www.example.com/topic1/... www.example.com/topic2/... www.example.com/topic3/...

这些应该使用 TopicController 来提供。

值 topic1、topic2、topic3、.. 来自数据库中的表（主题）。

这可能吗？

那我的路线会是什么样子？当然会添加这些主题，它本质上不是静态的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T02:08:10.100

尝试：

```
match '*a/' => 'topic#show' # assume the action is show 
```

`params[:a]`将等于`topic1`等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T02:08:25.623

我能想到的最接近的解决方案是定义一条路线，例如

```
match "/topic/:name" => "topic#process_topic" 
```

以及TopicController中对应的动作

```
def process_topic
    @topic = Topic.find_by_name(params[:name])
    case @topic.name
        when topic1
            ...
        when topic2
            ...
    end
end 
```

# java - Netbeans，在启动时显示内存使用情况

> ID：12487552
> 
> 赞同：0
> 
> 时间：2012-09-19T01:58:27.723
> 
> 标签：java, netbeans, netbeans-7

要在 Netbeans 平台上手动显示内存使用小部件，我必须右键单击工具栏，然后选择内存。

有没有办法让内存使用小部件在启动时默认显示？这样它将在启动时显示而无需用户输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T04:05:36.487

此设置似乎保存在用户的目录中，其中保存了他们的 Netbeans 首选项。这不是一个“可部署”的解决方案，但下面显示了设置的存储位置[http://wiki.netbeans.org/FaqWhatIsUserdir](http://wiki.netbeans.org/FaqWhatIsUserdir)

我用 Windows 7 和 Netbeans 7.0.1 验证了这一点。您要查找的文件是`.netbeans/7.0/config/Toolbars/Standard.xml`. 在这里面你应该看到一行`<Toolbar name="Memory" visible="false" draggable="true" align="left"/>`，确保“可见”设置为`"true"`，保存文件，然后启动 Netbeans。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T00:59:48.690

经过一番阅读，我发现在 Core UI 模块中可以设置一个属性。

在包资源管理器中： - 重要文件 | XML 层 | | 工具栏 | 标准

放：`<Toolbar name="Memory" visible="true">`

# ruby-on-rails - 如何在rails namspaced控制器中处理form_for

> ID：12487558
> 
> 赞同：1
> 
> 时间：2012-09-19T01:59:30.460
> 
> 标签：ruby-on-rails, namespaces, form-for

我曾使用 rails 脚手架自动生成表单和视图。但是现在我不得不在根 namspace 中使用带有模型的命名空间控制器。

所以，我在没有脚手架的情况下手动生成了控制器，我在使用表单时遇到了麻烦。

我想下面的代码应该为命名空间控制器生成一个表单

```
<%= form_for @menu do |f| %>

  <div class="field">
    <%= f.label :label %><br />
    <%= f.text_field :label %>
  </div>
  <div class="field">
    <%= f.label :order %><br />
    <%= f.text_field :order %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

但它没有。它说

```
undefined method `model_name' for NilClass:Class 
```

用脚手架生成器做 rails 似乎很容易，但如果想手动做，rails helper 方法对它们不利。

我搜索了 form_for 文档并将代码更改为

```
<%= form_for @menu, :url => admin_menu_path do |f| %> 
```

然后它显示一个不同的错误

```
No route matches {:action=>"show", :controller=>"admin/menus"} 
```

我的 rake 路线给出以下输出

```
 admin_root        /admin(.:format)                admin/menus#index
    admin_menus GET    /admin/menus(.:format)          admin/menus#index
                POST   /admin/menus(.:format)          admin/menus#create
 new_admin_menu GET    /admin/menus/new(.:format)      admin/menus#new
edit_admin_menu GET    /admin/menus/:id/edit(.:format) admin/menus#edit
     admin_menu GET    /admin/menus/:id(.:format)      admin/menus#show
                PUT    /admin/menus/:id(.:format)      admin/menus#update
                DELETE /admin/menus/:id(.:format)      admin/menus#destroy 
```

如果我错了，请纠正我，但我认为 ruby​​ 在 Admin 命名空间中找不到模型菜单，这很明显。所以，我尝试了 ::Menu.new ，我认为它会在上层命名空间中查找，但没有结果！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T02:18:38.667

**您可能忘记`@menu`在控制器中进行实例化。**

消息“NilClass:Class 的未定义方法 'model_name'”说`@menu`是`nil`.

由于需要一个 Menu 实例，Rails 在传递`admin_menu_path`时无法正确生成路由。`nil`

在控制器中正确设置实例变量后，您可以使用：

```
form_for [:admin, @menu] do |f| ... end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T02:02:39.820

类似的东西`form_for [:admin, @menu] do |f| ... end`应该可以工作。类似的问题在这里：[命名空间form_for中的嵌套资源](https://stackoverflow.com/questions/2718059/nested-resources-in-namespace-form-for)

# json - Golang：json.Unmarshal 没有正确返回数据

> ID：12487561
> 
> 赞同：4
> 
> 时间：2012-09-19T02:00:04.073
> 
> 标签：json, go

我有一个 json 文件（themes/snow/theme.json）

```
{
    Name:'snow',
    Bgimage:'background.jpg',
    Width:600,
    Height:400,
    Itemrotation:'20,40',
    Text:{
        Fontsize:12,
        Color:'#ff00ff',
        Fontfamily:'verdana',
        Bottommargin:20
    },
    Decoration:[
        {
            Path:'abc.jpg',
            X:2,
            Y:4,
            Rotation:0
        },
        {
            Path:'def.png',
            X:4,
            Y:22,
            Rotation:10
        }
    ]
} 
```

我有一个解析 json 数据的文件

```
package main

import (
    "fmt"
    "os"
    "encoding/json"
    "io/ioutil"
    "log"
)

const themeDirectory    = "themes"
const themeJsonFile     = "theme.json"

type TextInfo struct {
    Fontsize        int
    Color           string
    Fontfamily      string
    Bottommargin    int
}

type DecoInfo struct {
    Path            string
    X               int
    Y               int
    Rotation        int
}

type ThemeInfo struct {
    Name            string
    Bgimage         string
    Width           int
    Height          int
    Itemrotation    string
    Text            textInfo
    Decoration      []decoInfo
}

func main() {
    var tinfo = parseTheme("snow")
        //use tinfo to build graphics
}

func parseTheme(themename string) themeInfo {
    abspath, _ := os.Getwd()
    filename :=  abspath + "/" + themeDirectory + "/" + themename + "/" + themeJsonFile

    //Check this file exists
    if _, error := os.Stat(filename); error != nil {
        if os.IsNotExist(error) {
            log.Fatal(filename + " does not exist")
            os.Exit(1)
        }
    } 

    filebyte, error := ioutil.ReadFile(filename) 
    if error != nil { 
        log.Fatal("Could not read file " + filename + " to parse")
        os.Exit(1) 
    } 

    var t themeInfo
    json.Unmarshal(filebyte, &t) 
    fmt.Println(t)
    return t
} 
```

你可以看到我在结束前有 2 行

```
 fmt.Println(t) 
```

我不确定为什么会打印

```
{  0 0  {0   0} []} 
```

我希望它应该以可用的方式返回我的主题信息，以便我可以使用它进行进一步处理。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-19T02:12:06.010

由于 json 包使用反射来剖析你的结构，它只能看到[导出](http://golang.org/ref/spec#Exported_identifiers)的字段。您的所有字段名称都以小写字母开头，因此它们不会被导出。将名称更改为以大写字母开头，我怀疑它会开始为您工作。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-19T03:42:41.183

**您的 JSON 无效。**JavaScript 允许单引号；JSON[没有](http://simonwillison.net/2006/oct/11/json/)。此外，对象键必须用双引号引起来：

```
Valid:

{ "name": "Simon" }

Invalid:

{ name: "Simon" }
{ 'name': "Simon" }
{ "name": 'Simon' } 
```

如果用双引号将 JSON 键和值括起来，您将看到预期的输出：

```
{snow background.jpg 600 400 20,40 {12 #ff00ff verdana 20} [{abc.jpg 2 4 0} {def.png 4 22 10}]} 
```

例如，

```
const sampleTheme       = `{
    "Name":"snow",
    "Bgimage":"background.jpg",
    "Width":600,
    "Height":400,
    "Itemrotation":"20,40",
    "Text":{
        "Fontsize":12,
        "Color":"#ff00ff",
        "Fontfamily":"verdana",
        "Bottommargin":20
    },
    "Decoration":[
        {
            "Path":"abc.jpg",
            "X":2,
            "Y":4,
            "Rotation":0
        },
        {
            "Path":"def.png",
            "X":4,
            "Y":22,
            "Rotation":10
        }
    ]
}` 
```

完整程序见：[http ://play.golang.org/p/SLhaLbJcla](http://play.golang.org/p/SLhaLbJcla)

# android - Phonegap 参数化表创建

> ID：12487562
> 
> 赞同：0
> 
> 时间：2012-09-19T02:00:07.870
> 
> 标签：android, cordova

我正在尝试创建一个将数据动态插入表的函数：到目前为止，我已经尝试过：

但是，当我执行此代码时，没有任何反应。没有警报。如果我注释掉最后一个 tx.executesql 插入行，即。动态的一切正常。我将如何更改那条线以使一切正常？请帮助... Phonegap新手在这里。

```
document.addEventListener("deviceready", onDeviceReady, false);
    var tableName;
    var db;
    var id='14';
    var data='Terry had a little lamb little lamb';

    // PhoneGap is ready
    //
    function onDeviceReady() {
        db = window.openDatabase("Database", "1.0", "PhoneGap Demo", 200000);
        db.transaction(populateDB, errorCB, successCB);
    }

     // Populate the database 
    //
    function populateDB(tx) {
         tx.executeSql('DROP TABLE IF EXISTS DEMO');
         tx.executeSql('CREATE TABLE IF NOT EXISTS DEMO (id unique, data)');
         tx.executeSql('INSERT INTO DEMO (id, data) VALUES (1, "First row")');
         tx.executeSql(
                'INSERT INTO DEMO (id,data') VALUES (?, ?);',
                [id,data],
                function (transaction, resultSet) {
                 //success code
                 alert('sucessful insertion');
                 },
                 errorCB
            );
    }

    // Transaction error callback
    //
    function errorCB(err) {
        alert("Error processing SQL: "+err);
    }

    // Transaction success callback
    //
    function successCB() {
        alert("success!");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T02:09:53.517

在“数据”一词之后，您似乎有一个尾随单引号：

```
(id,data') 
```

# arrays - 如何在 RPG 中移动数组元素？

> ID：12487564
> 
> 赞同：2
> 
> 时间：2012-09-19T02:00:22.800
> 
> 标签：arrays, ibm-midrange

我知道 A 循环可用于将每个元素移动到其新目的地，但有没有更简单、更优雅的解决方案来解决这个问题？显然 MOVEA 在这里没有太大帮助，因为它不适用于同一个阵列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T04:34:34.670

使用该[`SUBARR`](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/rzasd/sc092508880.htm)功能向下移动。

```
 /FREE
    %subarr(array:1) = %subarr(array:2); // Shift elements
    array(%elem(array)) = *blanks;       // Reset the remaining element
 /END-FREE 
```

* * *

```
C                   EVAL      %SUBARR(array:1) = %SUBARR(array:2)
C                   EVAL      array(%ELEM(array)) = *BLANKS 
```

由于重叠，向上移动需要使用临时数组或存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-06T13:34:54.097

[**memmove() — 复制字节**](http://pic.dhe.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=/rtref/memmove.htm)C 库函数可以安全地从左到右或从右到左复制重叠的内存区域。我的一个用途是在扫描字符串以查找嵌入的撇号之后。如果我找到一个，我会从该位置开始获取字符串并将字节向右移动（即“复制”）一个位置。这导致嵌入的撇号加倍，所有后续字节都移动了一个位置。

该函数还返回一个指向新位置的指针，我使用它（加 1）作为起点来扫描字符串的其余部分以查找下一个嵌入的撇号。我循环直到扫描没有返回任何命中。字符串本质上只是一个字节“数组”，因此它与实际数组一样有效。

# jquery - 带有附加到页脚的禁用触发器的简单 jQuery 下拉菜单

> ID：12487570
> 
> 赞同：1
> 
> 时间：2012-09-19T02:01:29.400
> 
> 标签：jquery, wordpress, drop-down-menu

必须有更好的方法来做到这一点。

*   将悬停事件添加到 #footer 以复制（通过 clone() ）页脚菜单并显示它，除非页脚显示在 $(window) 中

***笔记***

*   div#footer 的 div#menu 子项的位置：固定在屏幕底部。

*   使用标签页脚到内容 css hack 的底部

**我怎样才能更好地优化代码......尤其是在显示实际页脚时我不希望它弹出的部分？**

CSS：

```
.floatingMenu { display:block; position:fixed; width:100%; }
#menu{position:fixed;bottom:0;width:100%;z-index:10;}
/**footer at bottom**/
html, body, #wrap, #body-container { height: 100%; }
body > #wrap {height: auto; min-height: 100%;}
body > #body-container {height:auto;min-height:100%}
#main{padding-bottom:300px;min-height:250px;}
#footer{position:relative;margin-top:-300px;height:300px;clear:both;}
.clearfix:after {content: ".";display:block;height:0;clear:both;visibility:hidden;}
.clearfix {display: inline-block}
html .clearfix { height: 1%}
.clearfix {display: block} 
```

HTML

```
<body>
  <div id="body-container">
    <div id="main" class="clearfix">
    </div>
  </div>

  <div id="footer">

    <div id="menu">

      <div id="menu-footer" class="menu-container">
        <div class="wrap">
          <?php get_template_part( 'menu', 'primary' ); // Loads the menu-primary.php file ?>
        </div>
      </div>
    </div> <!-- #menu -->

    <div id="footer-links" class="footer-color">
      <?php wp_footer(); // WordPress footer hook ?>
      <?php echo apply_atomic_shortcode( 'footer_content', hybrid_get_setting( 'footer_insert' ) ); ?>
    </div>
  </div><!-- #footer-links -->

  </div><!-- #footer -->
</body> 
```

JS V1（下面还有更多版本）

```
<script type="text/javascript">
  function addHoverEvent(varObject, varSpeed) {
    varObject.css("display", "block").addClass('floatingMenu')
    .animate({'bottom': '18px'}, varSpeed / 0.75);
  }
  function exitMenu(varObject, varSpeed) {
    varObject.stop(true,true).delay(1050).animate({'bottom': '-100%'}, varSpeed,
      function(){
        $(this).removeClass('floatingMenu');
        varObject.css("display", "none");
      }
    );
  }
$(document).ready(function() {
  var
    varSpeed = 900,
    varBindObject = $('#footer');

    varObject = $('#footer-links').clone().appendTo('#footer');
    varObject.css("display", "none");

    $(window).scroll(function() {
      var
        varBindObject = $('#footer'),
        y = $(window).scrollTop(),
        w = $(window).height(),
        c = $('#footer-links').offset();

      if(y+w>c.top) {
        //varBindObject.data("events");
        varBindObject.die();
      } else {
          varBindObject
          .live('mouseenter', function() {
            addHoverEvent(varObject, varSpeed);})
          .live('mouseleave', function () { 
            exitMenu(varObject, varSpeed);});
      }
    });

    varBindObject
    .live('mouseenter', function() {
      addHoverEvent(varObject, varSpeed);
    })
    .live('mouseleave', function () { 
      exitMenu(varObject, varSpeed);
    });
});
</script> 
```

JS V2

```
<script type="text/javascript">
  function addHoverEvent(varObject, varSpeed) {
    varObject.css("display", "block").addClass('floatingMenu')
    .animate({'bottom': '18px'}, varSpeed / 0.75
             // { duration: 'fast',
             //   easing: 'in-out'
             // }
             );
  }
  function exitMenu(varObject, varSpeed) {
    varObject.stop(true,true).delay(900).animate({'bottom': '-100%'}, varSpeed,
      function(){
        $(this).removeClass('floatingMenu');
        varObject.css("display", "none");
      }
    );
  }
  function isOnScreen(element) {
    var offset = element.offset().top - $(window).scrollTop();

    if(offset > window.innerHeight){
        // Not in view so scroll to it
        return false;
    }
   return true;
  }

$(document).ready(function() {
  var
    varSpeed = 900,
    varBindObject = $('#footer');

    varObject = $('#footer-links').clone().appendTo('#footer');
    varObject.css("display", "none");

    if(isOnScreen($('#footer-links'))) {
    }else{
    varBindObject
    .live('mouseenter', function() {
      addHoverEvent(varObject, varSpeed);
    })
    .live('mouseleave', function () { 
      exitMenu(varObject, varSpeed);
    });
    }

    $(window).scroll(function() {
      var
        varBindObject = $('#footer'),
        y = $(window).scrollTop(),
        w = $(window).height(),
        c = $('#footer-links').offset();

        varBindObject
          .live('mouseenter',
                function() {
            addHoverEvent(varObject, varSpeed);
                })
          .live('mouseleave',
                function () { 
            exitMenu(varObject, varSpeed);
                });

      if(isOnScreen($('#footer-links'))) {
      //if(y+w>c.top) {
        varBindObject.die();
      }
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T02:28:14.570

如果我正确理解您的问题，您想在 #menu 容器中复制 #footer-links 元素；当 #footer 元素被关闭时，但只有在`window`.

如果这是正确的，那么这应该可以解决问题：

```
jQuery('#footer').hover(function () {
    // Clone the element
    new_el = jQuery('#footer-links').clone();

    // Check if it should be made visible
    new_el.attr('hidden', jQuery('#footer:visible', jQuery(window)).length > 0);

    // Append it to the menu container (change this to append somewhere else)
    new_el.appendTo('#footer');
}) 
```

您也可以将它绑定到`jQuery.mouseenter()`事件而不是`jQuery.hover()`

希望有帮助！

# c++ - 我可以在 DLL 中创建第二个单例实例吗？

> ID：12487571
> 
> 赞同：0
> 
> 时间：2012-09-19T02:01:57.007
> 
> 标签：c++, dll, singleton, static-libraries

我有一个包含单例的静态库。我需要在同一进程中加载​​这些单例的单独实例以进行测试。

所以我创建了一个链接相同静态库的 DLL，然后主进程加载该 DLL。

一旦 DLL 尝试加载，我在尝试访问单例中的静态实例指针时就会遇到访问冲突。

我读过的一些帖子说这是不可能的，我需要第二个进程，而其他人说每个 DLL 都在它链接的静态库中获取它自己的所有静态变量的副本，这表明这应该可以工作..

我正在尝试做的事情可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T02:23:43.703

大多数情况下，单身人士真的只是一个人——你的要求是不寻常的。

我知道将静态库链接到 DLL 会导致静态变量的多个实例，因为我自己也见过。每个 DLL 或 EXE 通过链接器获得自己的静态库副本，从而获得自己的静态变量副本。

访问冲突可能来自初始化顺序问题。控制它的最好方法是确保静态变量在一个函数中，该函数可以即时初始化它们，而不是全局变量。

# apache - 设置根 .htaccess 以选择性地忽略子域/文件夹

> ID：12487574
> 
> 赞同：2
> 
> 时间：2012-09-19T02:02:34.290
> 
> 标签：apache, .htaccess, subdomain, root

我的服务器上有几个不同的软件，以及多个子域。我正在使用典型的 LAMP 堆栈、CentOS、Apache、MySQL、PHP 等。

问题是，一些特定的文件夹确实可以在没有任何根目录的 .htaccess 影响的情况下运行，因为它破坏了安装的一些关键区域。不幸的是，`RewriteEngine`仅禁用是不够的，因为还有更多影响它。

这就是我想做的。

`.htaccess`在根目录中（我希望它保持有效，因为它在我的域的大部分区域分发了一些我想要的常见内容，但我希望能够有选择地完全禁用访问`.htaccess`某些子域/文件夹）

完全清楚，我不想完全停止`.htaccess`影响其他文件夹，我只想能够指定它到达哪些文件夹，或者我不希望它到达哪些文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T02:12:16.430

您可以将 htaccess 文件放在您不希望 mod_rewrite 仅使用以下行做任何事情的文件夹中：

```
RewriteEngine On 
```

或者，您可以在规则顶部添加一些传递：

```
RewriteEngine On

RewriteRule ^/?folder_to_ignore - [L]
RewriteRule ^/?another_to_ignore - [L] 
```

# c#-4.0 - 试图逐行读取文本文件。但是行被分成两行并存储在下一行

> ID：12487575
> 
> 赞同：1
> 
> 时间：2012-09-19T02:02:35.040
> 
> 标签：c#-4.0

我有一个包含特殊字符和普通字符的文本文件。我正在尝试逐行读取此文件。我用过

`string[] lines = System.IO.File.ReadAllLines("Trial.txt");`

阅读它。

我使用了一个断点并试图找出存储在这些行中的值。它在没有读完它的情况下中断了其中的一些行，并将其余的存储在新的下一行中。当我检查记录时，我发现中断只发生在有特殊字符的地方，即使它不会发生在特定的特殊字符上。如果文件总共有 10 行，并且如果有 1 行存在此问题，则它总共读取 11 行。你们中的任何人都可以帮我解决这个问题吗？文本文件为 UTF-8 格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:43:28.813

该`File.ReadAllLines`方法在回车符 ('\r')、换行符 ('\n') 或回车符后跟新行时拆分文件（取自此处：http: [//msdn.microsoft.com/en-我们/图书馆/s2tte0y1.aspx](http://msdn.microsoft.com/en-us/library/s2tte0y1.aspx)）。

检查不应该拆分的行是否具有这些字符中的任何一个（从您对 Luke Wyatt 的回复来看，您可能在该行拆分处有一个新行（'\n'））。

# c# - 需要一些帮助来优化此代码，但我似乎无法弄清楚

> ID：12487577
> 
> 赞同：1
> 
> 时间：2012-09-19T02:02:41.030
> 
> 标签：c#, optimization

因此，让我为您简要介绍一下所有内容：

*   第一部分只是获取驱动器大小信息

*   Sizer 是一个返回数组的类

*   数组包含（大小转换为 4 位、大小标签、原始大小）我将代码粘贴在底部以便更好地理解

*   标签只是显示尺寸的标签

现在，我只是在内心深处知道，有一种更有效的方法可以做到这一点，而我脑子里放了个屁，想不通。必须有一种方法可以通过循环来执行此操作，或者这真的是完成此操作的最佳方法吗？

```
private void driveList_SelectedIndexChanged(object sender, EventArgs e)
        {
            DriveInfo wow = therehasgottobeanotherway[driveList.SelectedIndex];
            if (wow.IsReady)
            {
                //get drive sizes
                long tot = wow.TotalSize;
                long free = wow.TotalFreeSpace;
                long aval = wow.AvailableFreeSpace;

                sizer totSize = new sizer(tot);
                sizer freeSize = new sizer(free);
                sizer avalSize = new sizer(aval);

                String[] tots = totSize.getSizeStringType();
                String[] frees = freeSize.getSizeStringType();
                String[] avals = avalSize.getSizeStringType();

                totalSizeLabel.Text = tots[0] + tots[1];
                freeSizeLabel.Text = frees[0] + frees[1];
                avalSizeLabel.Text = avals[0] + avals[1];

                driveName.Text = wow.VolumeLabel;
            }
            else
            {
                driveName.Text = "Drive Not Ready";
            }
        }

using System;

namespace compy
{
    internal class sizer
    {
        private long fSize;
        private String[] fSizer = new String[3];

        public sizer(long fs)
        { fSize = fs; }

        public String[] getSizeStringType()
        {
            fSizer[2] = Convert.ToString(fSize);

            if (fSize > 0 && fSize < 1024)
            {
                fSizer[0] = Convert.ToString(fSize);
                fSizer[1] = " Bytes";
            }
            else if (fSize > 1024 && fSize < 1048576)
            {
                fSizer[0] = Convert.ToString(fSize / 1000);
                fSizer[1] = " Kilobytes";
            }
            else if (fSize > 1048576 && fSize < 1073741824)
            {
                fSizer[0] = Convert.ToString(fSize / 1000 / 1000);
                fSizer[1] = " Megabytes";
            }
            else if (fSize > 1073741824 && fSize < 1099511627776)
            {
                fSizer[0] = Convert.ToString(fSize / 1000 / 1000 / 1000);
                fSizer[1] = " Gigabytes";
            }
            else if (fSize > 1099511627776 && fSize < 1.1259e15)
            {
                fSizer[0] = Convert.ToString(fSize / 1000 / 1000 / 1000);
                fSizer[1] = " Terabyte";
            }

            return fSizer;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T02:25:26.370

是什么让您认为它需要优化……它运行缓慢吗？不要弄乱可读的代码，使其运行速度微不足道。

如果您想改进代码，请更改如下所示的行：

```
else if (fSize > 1048576 && fSize < 1073741824) 
```

对此：

```
else if (fSize > 0x100000 && fSize < 0x40000000) 
```

PS：你确定你的数字是正确的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T02:14:31.143

您可以使 Sizer 成为静态类，并使 getSizeStringType() 成为静态方法。然后传入 long fSize 作为参数。

所以 driveList_SelectedIndexChanged 看起来像这样：

```
 DriveInfo wow = therehasgottobeanotherway[driveList.SelectedIndex];
        if (wow.IsReady)
        {
            String[] tots = sizer.getSizeStringType(wow.TotalSize);
            String[] frees = sizer.getSizeStringType(wow.TotalFreeSpace);
            String[] avals = sizer.getSizeStringType(wow.AvailableFreeSpace);

            totalSizeLabel.Text = tots[0] + tots[1];
            freeSizeLabel.Text = frees[0] + frees[1];
            avalSizeLabel.Text = avals[0] + avals[1];

            driveName.Text = wow.VolumeLabel;
        }
        else
        {
            driveName.Text = "Drive Not Ready";
        } 
```

除此之外，您可以创建第三个类来存储 4 位数字、标签和原始大小，而不是在 sizer 中使用数组。然后 getSizeStringType() 方法可以返回这个类的一个实例而不是一个数组。这将使事情变得不那么混乱，但需要更多的代码。但最后，您在这里提出意见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T02:47:14.900

首先，您的条件不是封闭区域，例如大小仅为 1024、1048576 ...

有一个循环方法，但不是更有效的方法

```
 String[] aStrSizeUnit = new String[] { " Bytes", " Kilobytes", " Megabytes", " Gigabytes", " Terabyte" };
        int iSizeLevel = 0;
        long iSizeTmp = (long)fSize;
        fSizer[2] = Convert.ToString(fSize);

        while (iSizeTmp > 0)
        {
            fSizer[0] = Convert.ToString(fSize / Math.Pow(1000 , iSizeLevel));
            fSizer[1] = aStrSizeUnit[iSizeLevel];
            iSizeTmp /= 1024;
            iSizeLevel++;
        } 
```

# scrum - Scrum：先到先得：产品愿景还是传统需求

> ID：12487581
> 
> 赞同：-1
> 
> 时间：2012-09-19T02:03:03.457
> 
> 标签：scrum

我正在学习 Scrum 过程。对于 Scrum 流程中的事件顺序，产品愿景或传统需求哪个优先？

我知道，一旦产品收到需求，它就会积压，并通过 sprint 日志进行优先排序，但我在愿景和传统需求领域很模糊。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T09:44:10.370

SCRUM 是关于你如何处理*你的项目*。

*构想*过程先于项目本身。很可能没有项目，因此没有 SCRUM。当人们完成构想并发现从项目开始有意义时，就会收集需求（生成您的产品积压）。这就是说，您会发现**在收集需求之前进行产品构想是**合乎逻辑的，因为如果在构想过程的中间人们意识到那里有相同/相似的产品，或者这是不可行的，他们可能不会理会需求做这样的事情。

**例子：**

*构想过程：* X 人说——让我们做一个传送机。有了它，人们将能够立即将自己传送到地球上的任何一点。Y 人加入并说 - 但这是不可能的，因为{等等，等等，所有这些科学原因}。

自然，他们放弃了。:)

*需求收集：* 不需要，因为他们意识到项目在构想过程中注定要失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T07:59:22.797

首先，您能否定义“传统要求”？

一般来说，流程的自然顺序是愿景 -> 产品积压。最初的愿景会重点关注在此版本中（对客户而言）什么是重要的，因此有助于形成需求并确定其优先级。愿景应解决基本问题：“客户为什么会购买此产品？”。

但请记住，Scrum 是一个迭代的、增量的过程，因此积压工作和愿景可能会不断发展，吸收各种不同的来源，例如客户之声练习、错误报告、冲刺评论的评论等。

问候

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-27T05:56:55.467

所以，问题是：在 Scrum 中，哪个在先：需求还是产品愿景？

答：在任何其他方法中，以先到者为准。

产品愿景与 Scrum 无关。这是您对产品的愿景，无论您选择遵循何种方法，它都是相同的。因此，即使您遵循瀑布，您仍然需要产品愿景或路线图。

在 Scrum 中，产品负责人会将您的产品愿景分解为用户故事（用户语言中的要求），并定期对它们进行优先排序。

希望有帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-19T15:08:47.470

根据我的经验，产品愿景和需求（无论是功能性的还是非功能性的）都将在产品待办列表中表达。如何确定它们的优先级是产品负责人的决定。产品负责人是唯一被允许决定“拥有功能”优先于“必需功能”的人。为了帮助您了解产品待办事项中包含的内容，请查看[Mountain Goat 示例产品待办事项](http://www.mountaingoatsoftware.com/scrum/product-backlog-example/)，因为您可以看到产品待办事项包括以下内容：

*   作为站点成员，我想以半结构化的方式在自己的页面上描述自己。也就是说，我可以填写预定义的字段，但也可以为一两个自由文本字段留出空间。（最好让这个自由文本是 HTML 或类似的。）
*   作为站点访问者，我可以查看站点上所有认证 ScrumMasters、从业者、培训师和认证产品负责人的列表。（CSM 列表有超过 5,000 个名称，因此需要基于字母的分页方法。）

# java - 当我在 Java 中说“catch (Exception e) {}”时，它叫什么？

> ID：12487583
> 
> 赞同：5
> 
> 时间：2012-09-19T02:03:30.930
> 
> 标签：java, exception-handling

我不确定这个答案。我在任何地方都找不到它。是空的错误处理吗？！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T02:12:29.210

它被称为抑制异常，或吞没异常。除非有很好的理由进行评论，否则可能不是一个很好的做法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T02:21:14.813

我们亲切地称这为工作中的“吃例外”。基本上，这意味着发生了一些不好的事情，我们把头埋在沙子里，假装它从未发生过。至少，一个好的做法是在该块中有一个 logger.error(e) ：

```
try {
   // code here
}
catch (Exception e) { logger.error(e); } 
```

这样您就可以将其记录在发生异常的某个地方。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T02:12:15.823

据我所知，它被简单地称为“**空捕获子句**”（或者可能是*静默异常消耗*），通常应该避免它（正确处理异常或根本不尝试捕获它）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-19T02:13:19.133

这通常称为忽略异常。使用的其他术语是[静默消费异常](https://stackoverflow.com/questions/921471/why-java-people-frequently-consume-exception-silently)，[吃异常](https://stackoverflow.com/questions/4341214/catch-exception-by-class)等

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-19T02:15:01.387

它被称为“破码”。

（如果您想忽略异常，请*清楚地记录原因*。）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-12-03T14:03:05.383

据我所知，这意味着在花哨的谈话中“吃异常”，但它只是阻止这个特定的错误在运行你的代码时停止 java。还有“e”部分

```
 catch (Exception *e*) {} 
```

是错误对象的“名称”。

如果您仍然不确定那是什么，请阅读[此](https://docs.oracle.com/javase/tutorial/essential/exceptions/catch.html)内容。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-19T02:19:19.973

我称之为“异常掩蔽”，它不是很好的风格。最好捕获特定异常或让它们“冒泡”。屏蔽异常会回来咬你。让异常冒泡以进行适当处理是个好主意。如果异常“冒泡到顶部”，则可以开发主动异常处理程序来通知开发人员或组织发生了意外异常。

# ios - 二传手不保留

> ID：12487584
> 
> 赞同：1
> 
> 时间：2012-09-19T02:03:36.950
> 
> 标签：ios, xcode

为什么我得到以下输出：

```
@property (nonatomic, retain) Player *thePlayer; 
```

然后，以 .m 为单位：

```
NSLog(@"aPlayer retain count = %i",[aPlayer retainCount]);
thePlayer = aPlayer;
NSLog(@"thePlayer retain count = %i",[thePlayer retainCount]); 
```

给出：

```
2012-09-18 21:52:36.787 Pocket Dungeons[56613:10a03] aPlayer retain count = 1
2012-09-18 21:52:36.788 Pocket Dungeons[56613:10a03] thePlayer retain count = 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T02:20:56.367

你没有使用二传手。您正在使用 ivar（实例变量）。要使用已[声明属性](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)的 setter ，请使用以下语法：

```
self.thePlayer = aPlayer; 
```

这相当于：

```
[self setThePlayer:aPlayer]; 
```

但是在没有对所有者对象的引用（在本例中为`self`）的情况下，您最终将直接使用实例变量，并且不会调用 setter。因此，在您的原始示例中，您没有使用 setter。

顺便说一句，这就是为什么通常建议在`@synthesize`语句中使用不同的 ivar 名称的原因，例如：

```
@synthesize thePlayer = _thePlayer; 
```

That way, you are less likely to accidentally reference the instance variable when you meant the property. And in Xcode 4.4 or later, if you omit the `@synthesize` statement, this is the default behavior (where the synthesized instance variable will have the leading underscore).

# layout - 如何将固定（粘性）侧边栏粘贴到居中 div 布局上的内容部分？

> ID：12487586
> 
> 赞同：2
> 
> 时间：2012-09-19T02:03:49.337
> 
> 标签：layout, html

我了解使用此代码将侧边栏或导航贴在网站边缘

```
position: fixed;
height: 132px;
left: 0;
top: 185px;
width: 24px; 
```

但我想在我的布局的主要部分，在我的网站的灰色内容部分粘贴一个栏，[以便](http://pixphoriad.haneuri.net)它滚动我上面显示的代码的方式将有一个侧边栏滚动，但会停留在居中的内容无论观众的分辨率有多大，等等。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:50:11.850

那个灰色区域似乎不是您的 HTML 的一部分，似乎只是一个背景图像，是这样吗？你能提供你的HTML的结构吗？主要是中心的显示区域和灰色区域。他们是如何分开的？您可能需要使用 javascript 和/或 jquery 来放置侧边栏，或者可能只是简单的 css。在不了解 HTML 结构的情况下，不容易说出最佳方式。

# ajax - ExtJS 应用程序是否与 HTML 页面的其余部分共享会话

> ID：12487589
> 
> 赞同：1
> 
> 时间：2012-09-19T02:04:11.947
> 
> 标签：ajax, node.js, extjs, web

我最近才开始使用 ExtJS 和 Node.js，我不太确定如何使用这个新堆栈处理身份验证。我来自 Grails + Spring Security Core 背景，其中一个网页是用 GSP 构建的，客户端在向服务器发出请求时会维护一个会话。ExtJS 应用程序在加载 JsonStore 时的行为是否相同，或者我是否必须回退到基本或摘要身份验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:05:43.757

ExtJS 只是一个基于 javascript 的 UI 框架。它不会干扰托管网页的会话管理功能，该网页可以是 jsp、asp 或简单的 html 文件。ExtJS 只是帮助你设计一个丰富的前端，但底层协议仍然是 http。必须处理身份验证的是您的服务器端层。

# silverstripe - Silverstripe：在新页面上设置默认小部件

> ID：12487590
> 
> 赞同：1
> 
> 时间：2012-09-19T02:04:14.377
> 
> 标签：silverstripe

是否可以为 silverstripe 中的新页面设置默认小部件，或者让子页面最初从其父页面继承其小部件？整个侧边栏被我正在处理的站点中的自定义小部件占据，默认情况下，选择少数几个出现在客户端将创建的（许多）新页面上会很好。他们仍然应该可以选择删除它们或添加任何其他人。

我已经搜索了文档，但没有发现任何迹象表明这是可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T12:54:53.307

默认小部件应该很容易做到我们可以在 SiteConfig 中添加一个小部件区域，您可以在其中设置默认值，然后在 Page 中使用 populateDefaults 将小部件从 SiteConfig 复制到新页面：

文件`mysite/code/mysiteSiteConfigDecorator.php`

```
class mysiteSiteConfigDecorator extends DataObjectDecorator {
    public function extraStatics() {
        return array(
            'has_one' =>array(
                'DefaultWidgets' => 'WidgetArea'
            ),
        );
    }
    public function updateCMSFields(FieldSet &$fields) {
        $fields->removeByName('Theme');
        $fields->addFieldToTab('Root', new Tab('DefaultWidgetsTab', _t('SiteConfig.DefaultWidgetsTab', 'Default Widgets for new Pages')));
        $fields->addFieldToTab("Root.DefaultWidgetsTab", new WidgetAreaEditor("DefaultWidgets"));
    }
} 
```

文件`mysite/_config.php`

```
...

Object::add_extension('SiteConfig', 'mysiteSiteConfigDecorator');

... 
```

文件`mysite/code/Page.php`

```
class Page extends SiteTree {
    public static $has_one = array(
        'Sidebar' => 'WidgetArea'
    );
    public function populateDefaults() {
        parent::populateDefaults();
        if ($this->Sidebar()) {
            $widgetArea = new WidgetArea();
            $widgetArea->write();
            $this->SidebarID = $widgetArea->ID;
        } else {
            $widgetArea = $this->Sidebar();
        }
        $siteConfig = SiteConfig::current_site_config();
        if ($siteConfig && $siteConfig->DefaultWidgets() && $siteConfig->DefaultWidgets()->Widgets()->exists()) {
            foreach ($siteConfig->DefaultWidgets()->Widgets() as $widget) {
                $widget->ID = 0;
                $widget->write();
                $widgetArea->Widgets()->add($widget);
            }
        }
    }
    public function getCMSFields() {
        $fields = parent::getCMSFields();
        $fields->addFieldToTab("Root.Content.Widgets", new WidgetAreaEditor("Sidebar"));
        return $fields;
    }
}

... 
```

* * *

然而，从父母那里应对并不那么容易。但如果你愿意，你也可以只检查当前页面是否有小部件，如果没有，则显示父小部件，如下所示：

```
class Page extends SiteTree {
    ...
    public function SidebarForTemplate() {
        if ($this->Sidebar())
            return $this->Sidebar();
        elseif ($this->Parent())
            return $this->Parent()->SidebarForTemplate();
        return false;
    }
    ...
} 
```

然后在模板中使用 $SidebarForTemplate

# vb.net - 左修剪 Path.GetFileNameWithoutExtension

> ID：12487591
> 
> 赞同：1
> 
> 时间：2012-09-19T02:04:27.317
> 
> 标签：vb.net, string, visual-studio-2010

我需要取前 5 个字符，以便它们与我早期保存的同名图片框匹配。

例如，此文件名可以是 12345_Text_Text_Text.pdf

```
Dim key As String = Path.GetFileNameWithoutExtension(e.Name)
Dim p As PictureBox = CType(Me.Controls(key), PictureBox)
p.Image = My.Resources.Ok 
```

我认为这样做会奏效；

```
Dim subkey As String
Dim key As String = Path.GetFileNameWithoutExtension(e.Name)
subkey = Left(key, 5) 
```

问题似乎是`Left`命令，`Public Property Left As Integer' has no parameters and its return type cannot be indexed.`

完整的子程序在这里；

```
 Private Sub Watcher_Changed(ByVal sender As Object, ByVal e As FileSystemEventArgs) Handles Watcher.Changed

    Dim key As String = Path.GetFileNameWithoutExtension(e.Name)

    Dim subkey As String
    subkey = Left(key, 5)

    Dim p As PictureBox = CType(Me.Controls(key), PictureBox)
    p.Image = My.Resources.Ok

    End Sub 
```

关于我做错了什么的建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T02:18:31.750

将您的呼叫更改为以下内容：

```
subkey = Strings.Left(key,5); 
```

Left 是附加到 Strings 对象实例的静态方法，因此您的问题只是符号之一（独立的 Left 引用）。

希望这有助于解决问题。

**编辑澄清/演示：**

正如下面@SSS 所指出的，WinForms 项目中的 Forms 有一个*Left*属性，用于定义窗体在屏幕上的水平位置。当“Left”方法被无条件调用时，例如在它之前没有对象或命名空间引用，VB 进入它的解析过程以确定如何解释它。表单的本机“左”属性是“赢家”，但提供的参数导致您收到错误。

要解决这样的名称冲突，解决方案是提供对相关方法或属性的*完全限定引用。*提供“Microsoft.VisualBasic.Left”是解决此问题的一种完全有效的方法，正如此处所述，提供对 Strings 类的引用也是如此。

我希望这有助于消除任何困惑。

由于这个建议的修复可能存在一些小的不确定性或混淆，以下是它在测试项目中使用的一些屏幕截图：

![使用 Strings.Left 的 Visual Studio 2010 VB.NET 测试项目代码](../Images/b85228306fd36923c262d6d234c1f6e2.png)
在 VB.NET 中使用 Strings.Left 的示例代码...

![测试项目输出](../Images/175f4c7d2534ef3eb905c1dd21becf36.png)
示例代码的结果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T02:31:56.457

以下是最终为我工作的内容：

`subkey = Microsoft.VisualBasic.Left(key, 6)`

# java - 从列表中随机选择一个项目

> ID：12487592
> 
> 赞同：38
> 
> 时间：2012-09-19T02:04:37.407
> 
> 标签：java, random, collections

如何从 Java 列表中随机选择一个项目？例如我有

```
List<String> list = new ArrayList<String>();
list.add("One");
list.add("Two"); 
```

等等......如何使用

```
Random myRandomizer = new Random(); 
```

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-09-19T02:06:27.473

像这样的东西？

```
Random randomizer = new Random();
String random = list.get(randomizer.nextInt(list.size())); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-07-23T14:40:37.300

清洁代码：

```
List<String> list = new ArrayList<String>();
list.add("One");
list.add("Two");
String random = list.get(new Random().nextInt(list.size())); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-04-04T21:11:52.713

简单而通用的解决方案，用于从您的集合中检索随机元素：

```
public static <T> T getRandomListElement(List<T> items) {
    return items.get(ThreadLocalRandom.current().nextInt(items.size()));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-04T13:39:32.970

如果您使用 Kotlin 编码，最简单的方法是编写：

```
val randomElement = listName.shuffled()[0] 
```

或者

```
val randomElement = listName.random() 
```

我希望它会帮助你:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-30T09:43:32.290

对于 Kotlin，您可以使用

```
random() 
```

在 kotlin.collections 中定义

例如，假设

```
val results = ArrayList<Result>() //Get the list from server or add something to the list
val myRandomItem = results.random() 
```

# r - 如何显示 % 相对频率而不是频率

> ID：12487604
> 
> 赞同：0
> 
> 时间：2012-09-19T02:06:37.777
> 
> 标签：r

我有一个轮盘模拟，可以绘制频率与轮盘插槽（或因子）的关系，但我也想查看相对频率与因子的百分比。

```
black_on_wheel = paste("B", 1:18, sep = "") 
red_on_wheel = paste("R", 1:18, sep = "")
roulette_wheel = c(red_on_wheel, black_on_wheel, "0", "00")
simulated_roulette_wheel = sample(roulette_wheel, size=500, replace = TRUE)
plot(rw_runs) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T03:22:03.643

```
rw_runs <- table( simulated_roulette_wheel)
str(rw_runs)
# 'table' int [1:38(1d)] 19 9 13 8 19 16 12 11 14 13 ...
# - attr(*, "dimnames")=List of 1
#  ..$ simulated_roulette_wheel: chr [1:38] "0" "00" "B1" "B10" ...
 barplot( rw_runs*100/sum(rw_runs) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T06:58:24.590

正如@joran 指出的那样，您可以使用`table`and `prop.table`：

```
set.seed(001) # For the simulation to be reproducible.
simulated_roulette_wheel = sample(roulette_wheel, size=500, replace = TRUE)

tab <-table(simulated_roulette_wheel)                  # Frequency of each factor
prop.tab <- prop.table(tab) * 100                      # % Relative Freq.
barplot(prop.tab, xaxs='i', ylab="Relative %") ; box() # Barplot 
```

在`barplot`,`xaxs="i"`允许条形图从 x 坐标的原点开始，并且该函数`box()`在图中添加一个框。

的前十个元素`prop.tab`如下所示：

```
prop.tab[1:10]
simulated_roulette_wheel
  0  00  B1 B10 B11 B12 B13 B14 B15 B16 
2.4 2.8 4.6 3.4 2.2 3.0 1.8 2.4 2.2 2.2 
```

如果你不乘以`prop.table(tab)`100，那么你只会得到一个比例而不是相对百分比。

这是生成的条形图：

![在此处输入图像描述](../Images/4f283aec5453d57602e508f76a5ff4b4.png)

# ruby - 如何复制符号？

> ID：12487608
> 
> 赞同：1
> 
> 时间：2012-09-19T02:07:00.333
> 
> 标签：ruby, symbols

我希望能够用一个符号来做到这一点

```
variable1 = :hello
variable2 = variable1.dup 
```

但该`dup`方法不适用于符号。符号有等效的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T02:10:53.047

你不能，给定符号的一个实例永远存在。这就像尝试做一样不可能`42.dup`。

您可以看到，通过这个简单的代码片段，您总是会为一个符号获得相同的对象：

```
Array.new(1000) { :foo.object_id }.uniq.size  #=> 1 
```

与字符串（您可以`dup`）相比：

```
Array.new(1000) { 'foo'.object_id }.uniq.size  #=> 1000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T02:10:11.787

符号是不可复制的，一个符号应该只有一个实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T02:13:42.340

两个相同内容的符号是同一个实体，可以通过`.object_id`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T03:06:55.753

符号是不可变的。因此，复制它们是没有意义的。因此，这被设计为不可能。

# frame - 使用 Particles / Additive 纹理映射时如何解决游戏帧数减少的问题？

> ID：12487610
> 
> 赞同：0
> 
> 时间：2012-09-19T02:07:22.240
> 
> 标签：frame, textures, unity3d, alpha, particles

游戏引擎：unity3D

当我们使用 Particles / Additive 纹理映射和 tga 格式的图片时，游戏帧数显着减少，Plane 模型在场景中具有通道和 alpha。

PS：我们使用版本：3.5.0 和 Legacy Particles 的 Ellipsoid Particle Emitter 和 ios 目标平台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:05:06.497

要提高性能，请尝试：

*   使用“移动”着色器（移动/粒子/添加剂）
*   减少粒子的生存时间
*   降低粒子纹理分辨率
*   减少发射的最大粒子数

# mysql - SQL选择符合条件的数据，先显示，再对剩余数据进行排序

> ID：12487612
> 
> 赞同：0
> 
> 时间：2012-09-19T02:07:55.070
> 
> 标签：mysql, sql, conditional-statements, where

只需要一些关于 SQL 语句的帮助，我有一个包含一堆用户数据的表，目前我正在通过 rowid 降序获取所有数据。但是我需要修改数据的显示方式如下：

该表有一个字段，用户可以在其中指定自己的值，也可以选择默认值。选择默认值时，该字段会自动填充“randomstring_standardefaultvalue”。

所以基本上我需要选择用户没有选择默认值的所有数据，并让它们按降序排列，然后抓取用户选择默认值的所有行，并在按降序 rowid 排序的第一组数据之后填充它们。

我当前的 SQL 看起来像这样，

```
$query = "SELECT * FROM userform ORDER BY _rowid_ DESC LIMIT {$offset}, {$pl};"; 
```

表数据：

```
rowid  date  username  defaultoruniquevalue  member  etc... 
```

帮助将不胜感激。谢谢你！

回答：

```
SELECT *, IF(defaultoruniquevalue LIKE CONCAT('%','defaultstring','%'), 1, 0) AS uses_default
FROM table
ORDER BY uses_default ASC, _rowid_ DESC
LIMIT {$offset}, {$pl 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T02:11:33.780

我希望我能正确理解您的问题，但听起来您需要在查询中添加 WHERE 子句：

```
SELECT *
FROM userform
WHERE defaultoruniquevalue != "default"
ORDER BY rowid DESC
LIMIT {$offset}, {$pl} 
```

*编辑*

```
SELECT *, IF(defaultoruniquevalue LIKE '%_default', 1, 0) AS uses_default
FROM userform
ORDER BY uses_default ASC, rowid DESC
LIMIT {$offset}, {$pl} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T02:13:42.573

您仍然可以使用`CASE`in`order by`子句

```
SELECT..
FROM..
WHERE..
ORDER BY (CASE defaultoruniquevalue
               WHEN 'randomstring_standardefaultvalue' THEN 0 
               ELSE 1 END) DESC,
         rowid DESC 
```

# c# - NVP ToDictionary

> ID：12487613
> 
> 赞同：0
> 
> 时间：2012-09-19T02:07:56.357
> 
> 标签：c#, linq

这里有 2 条记录是示例字符串，“|” 表示新记录或行，“，”分隔对，“=”将键与值分开。如果它是单行或记录，但不是多行或在这种情况下为 2 行，则下面的代码将起作用。完成这项工作需要什么才能让我得到 2 行，每行 3 个元素？

```
string s1 = "colorIndex=3,font.family=Helvicta,font.bold=1|colorIndex=7,font.family=Arial,font.bold=0";
string[] t = s1.Split(new[] { '(', ')' }, StringSplitOptions.RemoveEmptyEntries);

Dictionary<string, string> dictionary =
                 t.ToDictionary(s => s.Split('=')[0], s => s.Split('=')[1]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T02:14:46.637

尝试这个：

```
var result = input.Split('|')
                  .Select(r => r.Split(',')
                                .Select(c => c.Split('='))
                                .ToDictionary(x => x[0], x => x[1])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T02:19:07.853

好像你想开始

```
class Font {
    public int ColorIndex { get; set; }
    public string FontFamily { get; set; }
    public bool Bold { get; set; }
} 
```

然后：

```
var fonts = s1.Split('|')
  .Select(s => {
      var fields = s.Split(',');
      return new Font {
          ColorIndex = Int32.Parse(fields[0].Split('=')[0]),
          FontFamily = fields[1].Split('=')[1],
          Bold = (bool)Int32.Parse(fields[2].Split('=')[2])
      };
  }); 
```

# c# - 获取当前应用程序发送/接收的字节数

> ID：12487617
> 
> 赞同：0
> 
> 时间：2012-09-19T02:08:19.207
> 
> 标签：c#

我找到了这个[片段](http://www.java2s.com/Tutorial/CSharp/0580__Network/ReportinformationfromNetworkInterfacenetworkstatistics.htm)

这不会显示从我的网络发送/接收的总字节数吗？我只查看当前应用程序的统计信息。

编辑：还有帮助吗？似乎无法获取 1 个应用程序发送/接收的字节数。

# c++ - 使用 QNetworkRequest 的 HTTP POST 的正确格式

> ID：12487620
> 
> 赞同：8
> 
> 时间：2012-09-19T02:08:27.480
> 
> 标签：c++, json, web-services, qt

我正在尝试将 JSON 查询发送到 Web 服务，并且我继续收到内部服务器错误作为对查询的响应。

这是我要发送的内容：

```
POST /api/1.7/webservice.asmx HTTP/1.1
Host: www.superService.com
User-Agent: My app name v0.1
X-Custom-User-Agent: My app name v0.1
Content-Type: application/json
Content-Length:81

{"method":"AuthenticatePlain","loginName":"username@domain.com","password":"mypass"} 
```

这应该发送到 [https://www.superService.com/api/1.7/ssapi.asmx](https://www.superService.com/api/1.7/ssapi.asmx)

在准备中`QNetworkRequest`，用什么方法插入行

**发布 /api/1.7/webservice.asmx HTTP/1.1**？

对象中是否包含完整的标头`QNetworkRequest`？
JSON 数据应该在`QNetworkRequest`对象中还是作为方法中的第二个参数添加到帖子中`QNetworkAccessManager::post()`？

这是我当前在`on_btnLogin_clicked()`插槽中的代码：

```
connect(m_qnam, SIGNAL(finished(QNetworkReply*)),
                 this, SLOT(handleNetworkData(QNetworkReply*)));
    connect(m_qnam,SIGNAL(sslErrors(QNetworkReply*,QList<QSslError>)),
                 this, SLOT(handleSSLErrors(QNetworkReply*)));

    QString baseString = "";
    baseString.append(QString("POST /api/1.7/webservice.asmx HTTP/1.1\r\n").toUtf8());  
    baseString.append(QString("www.superService.com\r\n").toUtf8());
    baseString.append(QString("User-Agent: My app name v0.1\r\n").toUtf8());
    baseString.append(QString("X-Custom-User-Agent: My app name v0.1\r\n").toUtf8());
    baseString.append(QString("Content-Type: application/json\r\n").toUtf8());

    QString jsonString = QString("{");
    jsonString.append("\"method\":");
    jsonString.append("\"AuthenticatePlain\"");
    jsonString.append(",\"loginName\":");
    jsonString.append("\"username@domain.com\"");
    jsonString.append(",\"password\":");
    jsonString.append("\"mypass\"");
    jsonString.append("}");

    QByteArray json = jsonString.toUtf8();

    baseString.append(QString("Content-Length:").toUtf8());
    baseString.append(QString::number(json.length()));
    baseString.append("\r\n").toUtf8();
    baseString.append(QString("\r\n").toUtf8());
    baseString.append(json);

    request = QNetworkRequest(QUrl("https://www.superService.com/api/1.7/ssapi.asmx"));
    request.setRawHeader()

    qDebug() << "Base String: "<< baseString;

    m_qnam->post(request,baseString.toUtf8()); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-19T02:32:38.000

这不是编写 HTTP 请求的正确方法。以下代码更正确：

```
connect(m_qnam, SIGNAL(finished(QNetworkReply*)), this, SLOT(handleNetworkData(QNetworkReply*)));
connect(m_qnam,SIGNAL(sslErrors(QNetworkReply*,QList<QSslError>)), this, SLOT(handleSSLErrors(QNetworkReply*)));

// Build your JSON string as usual
QByteArray jsonString = "{\"method\":\"AuthenticatePlain\",\"loginName\":\"username@domain.com\",\"password\":\"mypass\"}";

// For your "Content-Length" header
QByteArray postDataSize = QByteArray::number(jsonString.size());

// Time for building your request
QUrl serviceURL("https://www.superService.com/api/1.7/ssapi.asmx");
QNetworkRequest request(serviceURL);

// Add the headers specifying their names and their values with the following method : void QNetworkRequest::setRawHeader(const QByteArray & headerName, const QByteArray & headerValue);
request.setRawHeader("User-Agent", "My app name v0.1");
request.setRawHeader("X-Custom-User-Agent", "My app name v0.1");
request.setRawHeader("Content-Type", "application/json");
request.setRawHeader("Content-Length", postDataSize);

// Use QNetworkReply * QNetworkAccessManager::post(const QNetworkRequest & request, const QByteArray & data); to send your request. Qt will rearrange everything correctly.
QNetworkReply * reply = m_qnam->post(request, jsonString); 
```

# windows-phone-7 - 如何设置 WP7 应用程序图标的背景颜色

> ID：12487622
> 
> 赞同：-1
> 
> 时间：2012-09-19T02:09:12.737
> 
> 标签：windows-phone-7

我为我的 WP7 应用程序创建了一个 62x62 和一个 173x173 的 PNG 文件。我将背景图像设置为 173x173 PNG，将图标设置为 62x62 PNG。

173x173 PNG 有我喜欢的蓝色背景，但 62x62 PNG 有黑色背景。

如何让 62x62 PNG 具有蓝色背景？两个PNG都是透明的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:11:18.420

如果您在谈论主题颜色，请注意它只会对固定在主屏幕上的图标产生影响。程序列表中的图标没有主题颜色作为背景。所以你不能让它们的颜色自动改变。您必须自己决定颜色并将其作为图像的一部分。

# android - Android ID 和设备 ID 有什么区别？

> ID：12487624
> 
> 赞同：9
> 
> 时间：2012-09-19T02:09:17.357
> 
> 标签：android

我的设备 ID 是：358313044737548

和

我的安卓 id 是：4e4c5141b7cb261e

有人可以解释这两者之间的区别以及各自的目的吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T02:30:14.937

它们可用于识别应用程序安装，如此[开发人员的博客文章](http://android-developers.blogspot.com/2011/03/identifying-app-installations.html)中所述。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-19T02:28:48.870

设备 ID 是指序列号——由 adb 创建的字符串，用于通过其控制台端口号唯一标识模拟器/设备实例。序列号的格式是-。这是一个示例序列号：emulator-5554

[Android ID](http://developer.android.com/reference/android/provider/Settings.Secure.html#ANDROID_ID)是 64 位数字（作为十六进制字符串），在设备首次启动时随机生成，并且在设备的生命周期内应保持不变。

# iphone - 应用程序在 main 中的 EXC_BAD_ACCESS 上崩溃时未生成崩溃日志

> ID：12487625
> 
> 赞同：5
> 
> 时间：2012-09-19T02:09:33.497
> 
> 标签：iphone, objective-c, ios, ipad

所以这就是我现在在屏幕上看到的内容：

![在此处输入图像描述](../Images/2ebf5ee6722ebb61a1d50e59f89d64cc.png)

现在在我给出更详细的解释之前，让我强调一下，这个错误只发生在设备上的 iOS 6 上。否则该应用程序运行良好。这是一个 iPad 应用程序。

从今天早上开始，我一直在试图弄清楚这次崩溃，但它让我无处可去，因为没有为此错误生成任何崩溃日志。我将“复制期间剥离调试符号”设置为否。不知道我应该在哪里检查以便此错误进入我的崩溃日志，以便我可以获得更多详细信息。

我已将 NSZombieEnabled 设为 YES，希望它能给我更多关于 EXC_BAD_ACCESS 的详细信息，但它仍然给我相同的结果。任何人都可以帮助我下一步我能做什么，至少从这次奇怪的崩溃中获得更多的崩溃信息吗？我应该在哪里检查以便生成我的崩溃日志。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-19T04:05:40.960

您可以使用以下代码获取崩溃日志

```
int main(int argc, char *argv[])
{
    @autoreleasepool
    {
        @try 
        {
            return UIApplicationMain(argc, argv, nil, NSStringFromClass([mSellerAppDelegate class]));
        }
        @catch (NSException *exception)
        {

            NSLog(@"%@",[exception callStackSymbols]);
            return 1;
        }
    }
} 
```

# regex - 提取匹配的正则表达式或删除匹配的正则表达式以外的字符串

> ID：12487627
> 
> 赞同：0
> 
> 时间：2012-09-19T02:10:03.920
> 
> 标签：regex, perl, extract

我有一个文件

```
**data2.l**
I have a car 
its nissan GTR 
this car is super fast 
```

如果我想从这个文件中删除“汽车”这个词，我只是使用

```
perl -p -i -e "s/car//ig" data2.l 
```

但是，如果我想保留“car”并删除“car”以外的所有其他术语如果我尝试只提取“car”，我就可以提取包含“car”的完整行。

```
**example O/P**
car
car 
```

那么这个单线可以稍微修改一下来完成这个任务吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T02:36:24.763

如果单词“car”在每一行出现多次，这将打印两次，并添加一个换行符结尾：

```
grep -io "car" file.txt 
```

输入：

```
i have a car 
its nissan GTR 
this car is super fast Car 
```

输出：

```
car
car
Car 
```

**更新：**

```
grep -ioP "car[^ ]*" file.txt 
```

输入：

```
i have a car 
its nissan GTR 
this car123 is super fast Car 
```

输出：

```
car
car123
Car 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T02:46:40.580

这个 Perl 做了类似的事情，但是同一行上的所有“汽车”都保持在同一行上：

```
 perl -lne 'print join " ", /car\S*/ig if /car/i' 
```

您可以从 steve 的示例中获得以下输出：

```
car
car123 Car 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T12:54:23.770

我对此感到很开心。所有这些选项只会打印 car 一次，即使它在文件中出现多次。

```
more data2.1 | grep -q 'car' && echo 'car'

more dara2.1 | sed -n 'h;N;$x;$s/.*car.*/car/p'

perl -ne '$i=1 if ~~/car/}{print "car\n" if $i' data2.1 
```

# c++ - 对另一个类中的类使用重载运算符

> ID：12487630
> 
> 赞同：0
> 
> 时间：2012-09-19T02:10:15.293
> 
> 标签：c++, class, c++11, operator-overloading

我有一个带有重载插入运算符的类，它在我的驱动程序中工作：

```
#include <iostream>
#include <cstdlib>
#include "xml_attribute.h"

int main(){
    using namespace std;

    XML_AttributeT a("name","value");
    cout << a << endl;

    return EXIT_SUCCESS;
} 
```

输出：name="value"
有效。

我想在另一个包含此类的类中利用此功能：
header

```
#pragma once
#ifndef XML_ELEMENTT_H
#define XML_ELEMENTT_H

#include <string>
#include <vector>
#include <iostream>
#include "xml_attribute/xml_attribute.h"

struct XML_ElementT{

    std::string start_tag;
    std::vector<XML_AttributeT> attributes;
    bool single_tag;

    //Constructors
    explicit XML_ElementT(std::string const& start_tag, std::vector<XML_AttributeT> const& attributes, bool const& single_tag);
    explicit XML_ElementT(void);

    //overloaded extraction operator
    friend std::ostream& operator << (std::ostream &out, XML_ElementT const& element);

};
#endif 
```

cpp

```
#include "xml_element.h"

//Constructors
XML_ElementT::XML_ElementT(std::string const& tag_, std::vector<XML_AttributeT> const& attributes_, bool const& single_tag_)
: start_tag{tag_}
, attributes{attributes_}
, single_tag{single_tag_}
{}
XML_ElementT::XML_ElementT(void){}

//overloaded extraction operator
std::ostream& operator << (std::ostream &out, XML_ElementT const& element){

    for (std::size_t i = 0; i < element.attributes.size()-1; ++i){
        out << element.attributes[i]; //<- Does not work
    }
    return out;// << element.attributes[element.attributes.size()-1];
} 
```

错误：

```
undefined reference to `operator<<(std::basic_ostream<char, std::char_traits<char> >&, XML_AttributeT const&) 
```

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T02:32:05.817

> 对 `operator<<(std::basic_ostream<...>&, XML_AttributeT const&) 的未定义引用

该错误意味着编译器已经适当地解析了代码，并且您有一个带有上述签名的运算符的声明。**但是**，链接器在您的程序中没有找到该函数的定义。这可能是由不同的原因引起的，例如未能链接库或定义运算符的 .o。

# java - 在 Android 中创建 CDMA (3gpp2) PDU

> ID：12487634
> 
> 赞同：3
> 
> 时间：2012-09-19T02:10:44.310
> 
> 标签：java, android, cdma, pdu

上周我问了一个类似的问题，甚至设置了赏金，在意识到问题是给出的答案是针对[GSM PDU (3gpp)](https://stackoverflow.com/a/12338541/1443717)并且它在模拟器 (android 2.2) 中完美运行之后。我接受了答案并授予了赏金，并更改了标题以供将来参考。

**问题：**

现在，我在问如何创建一个 CDMA (3gpp2) PDU，类似于创建一个[GSM PDU (3gpp)](https://stackoverflow.com/a/12338541/1443717)，可以在 Android 的 API 中解析`createFromPdu()`

**尽量避免自己写：**

阅读新方法[createFromPDU(byte[] pdu, String format)](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/provider/Telephony.java#Telephony.Sms.Intents.getMessagesFromIntent%28android.content.Intent%29)时我很兴奋， 然后意识到它不能向后兼容。

[我什至对使用原始问答](https://stackoverflow.com/a/12338541/1443717)`com.android.internal.telephony.gsm.SmsMessage.createFromPdu(pdu);`生成的 GSM PDU感到好奇。但我不太确定这是否安全......

所以我决定最好的方法是根据设备类型创建一个 GSM 或 CDMA PDU。

有没有人有一个可以创建 CDMA PDU 的片段？

或者知道如何将创建 GSM PDU 的方法转换为 CDMA PDU 格式？

**更新：**

[我一直在努力手动创建一种方法来创建 CDMA (3gpp2) pdu在 cdma pdu 令人敬畏的故障](https://stackoverflow.com/a/11401421/1443717)之后我已经接近成功 但我似乎无法理解如何 7bit 打包`BearerData`和 cat日期字符串正确地放在 pdu 的末尾，这是我到目前为止所拥有的

```
private static byte[] createCDMAPDU(String sender, String body) {

    byte[] pdu = null;

    ByteArrayOutputStream baos = new ByteArrayOutputStream(100);
    DataOutputStream dos = new DataOutputStream(baos);

    Date now = new Date ();
    byte[] dateBytes = new byte[6];
    Calendar calendar = new GregorianCalendar();
    dateBytes[0] = (byte) (asBytes(""+calendar.get(Calendar.YEAR))[0]);
    dateBytes[1] = (byte) (asBytes(""+calendar.get(Calendar.MONTH) + 1)[0]);
    dateBytes[2] = (byte) (asBytes(""+calendar.get(Calendar.DAY_OF_MONTH))[0]);
    dateBytes[3] = (byte) (asBytes(""+calendar.get(Calendar.HOUR_OF_DAY))[0]);
    dateBytes[4] = (byte) (asBytes(""+calendar.get(Calendar.MINUTE))[0]);
    dateBytes[5] = (byte) (asBytes(""+calendar.get(Calendar.SECOND))[0]);

    try {
        dos.write(0);// unknown padding
        dos.write(0);// unknown padding
        dos.write(0);// unknown padding
        // MESSAGE_TYPE_POINT_TO_POINT = 0x00;
        // MESSAGE_TYPE_BROADCAST = 0x01;
        // MESSAGE_TYPE_ACKNOWLEDGE = 0x02;
        dos.write(0x00);// message type - MESSAGE_TYPE_POINT_TO_POINT
        // TELESERVICE_NOT_SET = 0x0000;
        // TELESERVICE_WMT = 0x1002;
        // TELESERVICE_VMN = 0x1003;
        // TELESERVICE_WAP = 0x1004;
        // TELESERVICE_WEMT = 0x1005;
        dos.writeInt(0x1002); // teleservice - TELESERVICE_NOT_SET
        // dos.writeInt(0); // servicePresent
        dos.writeInt(0); // serviceCategory
        // DIGIT_MODE_4BIT_DTMF = 0x00;
        // DIGIT_MODE_8BIT_CHAR = 0x01;
        dos.write(0x01);// digit mode - DIGIT_MODE_4BIT_DTMF
        // NUMBER_MODE_NOT_DATA_NETWORK = 0x00;
        // NUMBER_MODE_DATA_NETWORK = 0x01;
        dos.write(0x00);// number mode - NUMBER_MODE_NOT_DATA_NETWORK
        // TON_UNKNOWN = 0x00;
        // TON_INTERNATIONAL_OR_IP = 0x01;
        // TON_NATIONAL_OR_EMAIL = 0x02;
        // TON_NETWORK = 0x03;
        // TON_SUBSCRIBER = 0x04;
        // TON_ALPHANUMERIC = 0x05;
        // TON_ABBREVIATED = 0x06;
        // TON_RESERVED = 0x07;
        dos.write(0x00); // number_type - TON_UNKNOWN
        // NUMBERING_PLAN_UNKNOWN = 0x0;
        // NUMBERING_PLAN_ISDN_TELEPHONY = 0x1;
        dos.write(0x0);// number plan - NUMBERING_PLAN_UNKNOWN
        dos.write(sender.length());// number of digits
        dos.write(sender.getBytes(), 0, sender.getBytes().length); // digits
        dos.write(0);// bearer reply ?
        dos.write(0);// bearer reply ?
        // Subaddress is not supported.
        dos.write(0); // subaddressType
        dos.write(0); // subaddr_odd
        dos.write(0); // subaddr_nbr_of_digits
        // dos.write(encodedBearerData.length);
        // dos.write(encodedBearerData, 0, encodedBearerData.length);
        dos.write(0);
        dos.write(0);
        dos.write(0);
        dos.write(0);
        dos.write(0);
        byte[] bodybytes = getAsciiBytes(body);
        dos.write(bodybytes.length);
        dos.write(0);
        dos.write(0x03);
        dos.write(0x10);
        dos.write(0);
        dos.write(bodybytes, 0, bodybytes.length);
        dos.write(0);
        dos.write(dateBytes.length);
        dos.write(dateBytes);
        dos.close();

        pdu = baos.toByteArray();
    } catch (IOException e) {
    }
    return pdu;
} 
```

我不确定我是否走在正确的轨道上。

# javascript - HTML5 音频元素音频数据

> ID：12487638
> 
> 赞同：0
> 
> 时间：2012-09-19T02:11:13.513
> 
> 标签：javascript, html, dom, audio

有什么办法可以看到某个音频标签的音频数据？我可以在哪里看到它是什么键，以及它的 BPM（每分钟节拍数）多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T03:07:04.487

如果您想找出密钥或 BPM，音频文件对此类信息是视而不见的，因此您必须自己编写算法来做到这一点。如果您想要其他类型的元数据，也许请参阅[Read an mp3's metadata](https://stackoverflow.com/questions/3063419/read-an-mp3s-metadata)

# c# - 在 Visualstudio 中查看 SessionState、httpcontext 中的项目

> ID：12487642
> 
> 赞同：0
> 
> 时间：2012-09-19T02:11:54.793
> 
> 标签：c#, vb.net, visual-studio

有没有办法查看所有存储在当前 HTTP 会话状态中的项目？

这可能真的很愚蠢，但我需要弄清楚我的值是否真的被发送到 HttpContext 会话。

我正在使用 VS 2012。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T02:13:33.373

没关系，我想通了。

您只需将鼠标悬停在您第一次声明 HttpContext 的位置。

# mysql - MySQL 过程用例不会返回 null

> ID：12487648
> 
> 赞同：0
> 
> 时间：2012-09-19T02:12:30.147
> 
> 标签：mysql, null, procedure, case-statement

我正在编写一个程序来显示当前学生是否在表中。测试后，我遇到了几个错误......

```
Create procedure stuID(p_id int)    
begin   
    declare v_msg varchar(100);
    declare count_id int;

    select count(*) into count_id from students where id = p_id; 

    If null then
        set v_msg := 'null';
    Elseif count_cl_id = 1 then
        set v_msg := 1;
    Elseif count_cl_id = 0 then
        set v_msg := 0;
    End if;

    Select v_msg;
end; 
```

所以我创建了另一个程序来测试这些......

创建过程 test_stuID() 开始

```
 -- Test with null
    call stuID(null);

    -- Test with invalid ID
    call stuID('0');

    -- Test with String
    call stuID( 'false' );

    -- Test with true ID
    call stuID('25');

end; 
```

#

两个问题：

1) null case 不返回 v_msg 作为 'null'

2) 不返回真正有效的 ID 25。

我究竟做错了什么？？？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T02:14:23.047

2个错误：

1)`If null`应替换为`if count_id is null`

和

2）您`count_cl_id`用于比较而`count_id`参数名称。

我在我的系统上进行了更正测试，并且工作正常。

# javascript - 滚动到页面的远端

> ID：12487649
> 
> 赞同：0
> 
> 时间：2012-09-19T02:12:44.377
> 
> 标签：javascript

如何滚动到页面的最右侧。页面宽度不同。所以，我以前不知道页面的宽度？

我尝试使用`window.scrollTo`，但它没有按我的意愿工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T02:22:31.893

**快速而肮脏的解决方案**（并希望没有IE版本不会挂断这个）：

```
window.scrollTo(100000, 0) 
```

**正确解决方案**（测量内容和页面的宽度并滚动到特定点）：

包括[jQuery](http://jquery.com/)并这样做：

```
var innerWidth = $(window).width(),  // = browser width
    pageWidth = $(document).width(); // = 2010 (div + border)

window.scroll(pageWidth - innerWidth, 0); 
```

在这里查看<a href="http://jsfiddle.net/marcgrabow/qgWRg/" rel="nofollow">jsFiddle。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T03:30:28.917

由于宽度会有所不同，因此您需要在页面呈现后获取文档的宽度，然后一旦获得该值，您就可以滚动到它。这是一个例子：

```
<script>
  var width = document.body.offsetWidth;
  window.scrollTo(width, 0);
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T07:08:08.843

回答我自己的问题。我发现这种`scrollIntoView`方法效果最好。

[MDN](https://developer.mozilla.org/en-US/docs/DOM/element.scrollIntoView)上的文档

# jquery - 带有表格的 jqueryui 对话框 - 如何限制行高

> ID：12487651
> 
> 赞同：0
> 
> 时间：2012-09-19T02:12:46.700
> 
> 标签：jquery, css, jquery-ui, jquery-ui-dialog

我有一个 jqueryUI 对话框，其中有一个表，我正在用数据库查询的结果填充它。一切都运行良好，除了一个烦恼：我希望表格的每一行都恰好是一行高，永远不要绕到第二行，即我想将结果显示截断为表格宽度。

我认为我可以通过设置每个 tr 或 td 的 max-height 属性来使用 css 来做到这一点，但我无法做到这一点。所以我不知道该怎么做，甚至我是否应该在 css 或 jquery 中解决这个问题。

我尝试在我的 css 中设置“tr”元素的最大高度，并尝试设置“td”元素的最大高度，但这不起作用。我无法弄清楚最好的解决方案是什么。任何建议表示赞赏。

对话框如下所示：

```
<div id="MyDialog" class="cloudAppDialog" title="Your  Database Entries">
<form>
    <fieldset>
      <table id="TableRetrievedEntries" width="800" border="0" style="cursor:pointer">

      </table>
...
</form>
</div> 
```

构建表的代码如下所示：

```
function CreateResultsTable() {
    var i       = 0;
    var lim     = parseInt(WCGetParsedXMLValue('recsReturned'));
    var theHtml;
    theHtml     = '<tr><th>Retrieved Entries</th></tr>';
    for (i=0; i < lim; i++) {
        var theRef   = decodeURIComponent(WCGetParsedXMLArrayValue("records", i));
        var tblRow   = '<tr><td id=' + i.toString() + '>' + theRef + '</td></tr>';
        theHtml     += tblRow;
    }
    if (lim > 0) {
        return(theHtml);
    } else {
        return('');
    }
} 
```

CSS看起来像这样：

```
table#TableRetrievedEntries {
    border-collapse: collapse;   
}

#TableRetrievedEntries th {
    font-family: Verdana, Geneva, sans-serif;
    font-size: 11px;
    line-height: 12px;
    font-style: normal;
    color: #0242AC;
    font-weight: bold;
    text-align: left;
    background-color: #fff;
    text-decoration: underline;
    padding-left:3px;
    padding-right:3px;
    padding-top:0px;
    padding-bottom:10px;
}

#TableRetrievedEntries td {
    font-family: Verdana, Geneva, sans-serif;
    font-size: 11px;
    line-height: 14px;
    font-style: normal;
    color: #0242AC;
    padding: 3px 3px;
    max-height: 14px;
}

#TableRetrievedEntries tr:hover {
    background-color: #ccc;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T02:35:51.633

将此 CSS 添加到您的表格单元格中：

```
display:block;
overflow:hidden;
height: 50px; // Assuming that you want your max height to be 50px; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T02:55:31.143

我花了很长时间才回答，但玛丽安就在这里是 jsfiddle [http://jsfiddle.net/EvSv9/2/](http://jsfiddle.net/EvSv9/2/)

# c++ - 如何减少 C/C++ 浮点舍入

> ID：12487659
> 
> 赞同：1
> 
> 时间：2012-09-19T02:13:45.480
> 
> 标签：c++, c, floating-point, floating-accuracy

是否有任何普遍适用的技巧来减少 C 或 C++ 中浮点舍入误差的累积？我主要考虑如何编写编译成最佳汇编语言指令的代码，尽管整体算法设计的策略也是受欢迎的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T07:14:49.863

[数值分析](http://en.wikipedia.org/wiki/Numerical_analysis)是一个完整的数学领域，它不会被简化为一些可以盲目应用的技巧。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T02:19:10.427

我知道的唯一技巧是，当你对一堆数字求和时，不要一次做一个 - 将它们分组，以便加法的数字大致相同。例如，要对大量随机数求和，请逐对递归求和。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T13:43:47.537

人们得到关于这些东西的博士论文，所以你不会在这里得到**真正**可靠的建议，只是提示。一个技巧是避免减去值相当接近的数字。这会放大噪声位的影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T02:19:44.727

您可以启用 FPU 的扩展浮点精度以在内部使用 10 个字节。这就是我们使用的。

[http://www.website.masmforum.com/tutorials/fptute/fpuchap1.htm](http://www.website.masmforum.com/tutorials/fptute/fpuchap1.htm)

您还可以对数字进行排序，以便对相似数量的数字执行操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T23:34:38.123

您可以做很多小事情，例如在单个表达式中执行尽可能多的浮点运算，并确保将运算的所有输入转换为浮点格式。在浮点数和整数之间切换时，请确保在整数转换之前向浮点数添加 0.5 的因子，以确保将值四舍五入为最接近的整数。使用双精度数或长双精度数将增加精度，从而降低舍入/累积误差的重要性。

你**会有**一些舍入错误，所以你真的想把它们推到你正在寻找的意义之外。一种选择是使用扩展精度浮点软件库，例如[高精度算术库](http://www.nongnu.org/hpalib/)。使用库的好处是精度更高，但操作速度较慢。

# javascript - Jquery切换不适用于滑块

> ID：12487672
> 
> 赞同：0
> 
> 时间：2012-09-19T02:15:33.770
> 
> 标签：javascript, jquery, css, html, slider

我有一个隐藏的 div，直到单击链接然后它切换到视图中。我的代码运行良好，直到我实现了一段较大的 javascript 来实现一个滑块，该滑块可以在隐藏的 div 内通过鼠标移动来回轻松。我的问题是如何有效地结合这两个代码（旧的和新的）。现在，如果没有隐藏 div，我只能让一切正常工作。

```
$("#media").click(function () {
     $("#mediadetails").toggle(2000, function() {
});
$("#mediaclose").click(function() {
     $("#mediadetails").toggle(2000);
}) 
```

***用于滑块的 javascript***

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
    <script type="text/javascript" src="javascript/jquery.easing.1.3.js"></script>
<script type="text/javascript">
$mediadetails = $("#mediadetails");
$thumbScroller = $("#thumbScroller");
$thumbScroller_container = $("#thumbScroller .container");
$thumbScroller_content = $("#thumbScroller .content");
$thumbScroller_thumb = $("#thumbScroller .thumb");

$(window).load(function() {

    sliderLeft = $thumbScroller_container.position().left;
    padding = $mediadetails.css("paddingRight").replace("px", "");
    sliderWidth = $(window).width() - padding;
    $thumbScroller.css("width", sliderWidth);
    var totalContent = 0;

    //get content width
    $thumbScroller_content.each(function() {
        var $this = $(this);
        totalContent += $this.innerWidth();
        $thumbScroller_container.css("width", totalContent);
    });

    //content scrolling
    $thumbScroller.mousemove(function(e) {
        if ($thumbScroller_container.width() > sliderWidth) {
            var mouseCoords = (e.pageX - this.offsetLeft);
            var mousePercentX = mouseCoords / sliderWidth;
            var destX = -(((totalContent - (sliderWidth)) - sliderWidth) * (mousePercentX));
            var thePosA = mouseCoords - destX;
            var thePosB = destX - mouseCoords;
            var animSpeed = 900; //ease amount
            var easeType = "easeOutCirc";
            if (mouseCoords > destX) {
                //$thumbScroller_container.css("left",-thePosA);
                //without easing
                $thumbScroller_container.stop().animate({
                    left: -thePosA
                }, animSpeed, easeType);

                //with easing
            } else if (mouseCoords < destX) {
                //$thumbScroller_container.css("left",thePosB); //without easing
                $thumbScroller_container.stop().animate({
                    left: thePosB
                }, animSpeed, easeType);

                //with easing
            } else {
                $thumbScroller_container.stop();
            }
        }
    });

    //thumbnails mouse over/out & initial state
    var fadeSpeed = 200;

    $thumbScroller_thumb.each(function() {
        var $this = $(this);
        $this.fadeTo(fadeSpeed, 0.4);
    });

    $thumbScroller_thumb.hover(

    function() { //mouse over
        var $this = $(this);
        $this.fadeTo(fadeSpeed, 1);
    }, function() { //mouse out
        var $this = $(this);
        $this.fadeTo(fadeSpeed, 0.4);
    });
});

//browser resize
$(window).resize(function() {
    //$thumbScroller_container.css("left",sliderLeft); //without easing
    $thumbScroller_container.stop().animate({
        left: sliderLeft
    }, 400, "easeOutCirc"); //with easing
    var newWidth = $(window).width() - padding;
    $thumbScroller.css("width", newWidth);
    sliderWidth = newWidth;
});
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T03:02:33.607

据我所知，JavaScript 不适用于隐藏内容。这就是它适用于未隐藏内容的原因。所以我们需要在你的大脚本发生之前取消隐藏 div。

好的，试试这个，例如将较大的脚本更改`$(window).load(function() {//your script});`为任何函数`function my_slider(){//your script}`（这将在文档加载时禁用执行滑块）并在切换脚本中调用该函数，例如

```
$("#media").click(function () {
     $("#mediadetails").toggle(2000, function() {
my_slider();
});
$("#mediaclose").click(function() {
     $("#mediadetails").toggle(2000);
}) 
```

我们所做的只是调用您的滑块`onload`，一旦您单击隐藏的 div 以取消隐藏，我们就会执行它。

如果它对你有意义，试试这个

# scheme - 有没有办法使用列表来表示 lambda 演算中的过程？

> ID：12487679
> 
> 赞同：1
> 
> 时间：2012-09-19T02:16:20.347
> 
> 标签：scheme, interpreter, sicp

有一种简单的语言叫做 lambda calculus，它是 scheme 的一个子集。以下只有 4 个表达式。

```
exp : n (1 2 3)
 varref (variable reference)
 (lambda (x) body) (this is a procedure)
 (procedure argument) (this is a application which applies argument as real parameter to the procedure) 
```

我正在用方案为这种语言编写解释器。Scheme 将 lambda 表达式更改为 scheme 过程，我想用一个列表来代替它。谁能给我建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T03:15:38.540

在尝试实现 lambda 演算解释器之前，您应该了解 lambda 演算。我认为您的第一步是写下 lambda 演算术语的示例，以及它们的评估结果。如果这很困难，请告诉我；互联网上有*大量*资源可以帮助您理解 lambda 演算的术语以及它们的含义。

这是一个看起来合理的：

[http://www.cs.bham.ac.uk/~udr/popl/handout1.pdf](http://www.cs.bham.ac.uk/~udr/popl/handout1.pdf)

随着

[http://www.cs.bham.ac.uk/~udr/popl/handout2.pdf](http://www.cs.bham.ac.uk/~udr/popl/handout2.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T22:50:21.653

您可以发布一些演示该问题的特定代码吗？也许我在这里完全误解了，但我认为您应该为您的语言提供某种阅读器。当您启动它并读取 lambda 关键字时，它应该调用您的“实现”。

看看这篇很棒的帖子： [鸡肉里的口齿不清](http://pointlessprogramming.wordpress.com/2011/02/24/lispy-in-chicken-self-evaluating-values/)

# asp.net - 如何使RequiredFieldValidator控件两个验证两个控件

> ID：12487680
> 
> 赞同：2
> 
> 时间：2012-09-19T02:16:36.757
> 
> 标签：asp.net

```
 Are you required applicant?
<asp:CheckBox ID="CheckBox1" runat="server" Text="Yes" />
<asp:CheckBox ID="CheckBox2" runat="server" Text="No" /> 
```

实际上这是代码，我不知道他们为什么使用两个 Checkbox 而不是 Checkboxlist，但他们告诉我不要更改它。并使两个复选框成为必需的（使用RequiredFieldValidator）。我知道如何使用RequiredFieldValidator，但是我怎样才能使RequiredFieldValidator 控制两个复选框，只有在其中一个被选中时才通过

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T02:31:49.387

必填字段验证器一次只能在一个控件上工作——您需要使用自定义验证器，或者只编写自己的客户端/服务器验证器，独立于 ASP.NET 验证器。

也可以看看：

[如何在 ASP.NET 表单上制作所需的复选框？](https://stackoverflow.com/questions/1228112/how-do-i-make-a-checkbox-required-on-an-asp-net-form)

[aspx中两个复选框的javascript](https://stackoverflow.com/questions/3229876/javascript-for-two-checkboxes-in-aspx)

# r - 从 XML 包中保存 htmlParse 对象

> ID：12487682
> 
> 赞同：3
> 
> 时间：2012-09-19T02:16:43.933
> 
> 标签：r, html-parsing

我想保存作为 htmlParse 命令结果的对象。这是一些代码来说明我的问题。简单地说，我希望能够将解析 HTML 页面保存到一个对象并将其加载到未来的会话中。

```
library(XML)
PATH = "/colleges/Bentley-University"
URL <- paste("http://www.cappex.com", PATH, sep="")
doc <- htmlParse(URL)
mylist <- list(doc)
mylist[[1]]
save(mylist, file="mylist.Rdata")
rm(list=ls())
load("mylist.Rdata") 
```

但是，当我尝试回忆列表的内容时，这是我得到的错误：

```
> mylist[[1]]
Error in file(con, "r") : cannot open the connection
In addition: Warning message:
In file(con, "r") :
  cannot open file '/var/folders/hv/wtvckymn0230hpsdwylmtf0r0000gn/T//Rtmp8Mrpev/fileed256550e50': No such file or directory 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T08:39:12.593

`doc`无法保存，因为它是指向“C 级节点”的指针。把它放在一个列表中并不能改变这个事实。您可以先将 XML 树的表示形式写入字符串，然后再保存。之后就可以恢复文字了。

```
library(XML)
PATH = "/colleges/Bentley-University"
URL <- paste("http://www.cappex.com", PATH, sep="")
doc <- htmlParse(URL)
saveXML(doc, file="ex.txt")
rm(list=ls())

# recover
doc<-htmlParse('ex.txt') 
```

# php - 如何使用 PHP 编写网站搜索程序？

> ID：12487683
> 
> 赞同：2
> 
> 时间：2012-09-19T02:16:45.270
> 
> 标签：php, mysql, search, full-text-search, search-engine

好的，所以在创建这样的东西时，我是一个完全的初学者。我希望将搜索功能集成到我的网站中（目前正在构建并处于早期阶段）。该网站将是一个摄影网站，我希望有一个可用的搜索功能，它与在[此处](http://www.lik.com)找到的这个网站非常相似，因为我需要它来返回我网站上的照片和可能的博客条目的结果，新闻项目将最终存在。

我不知道从哪里开始。我对搜索功能、PHP 数据库 MYSQL 等进行了一些研究，这让我很困惑。

我不喜欢的一些事情是通过使用 3rd 方搜索引擎在我的网站上投放任何广告，我对上述页面感兴趣的主要事情之一是它如何抓取搜索结果并将它们显示在我选择的页面布局中.

任何帮助都将以从哪里开始的形式表示赞赏。我是一个非常热心的学习者，所以愿意接受任何建议。即使这只是我需要采取的步骤，然后我可以相应地研究/学习

非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T02:39:09.227

```
<form action="something.php" method="post">
  <input type="text" id="search" name="search />
  <input type="submit" value="submit" />
</form> 
```

在您的 PHP 脚本中，您只需执行类似于 mysql %like% 的操作。% 指定一个通配符，因此如果您要搜索的名称是“over”，那么它将返回“stackoverflow”。请务必避开您的查询。在您完成查询之后（我不会写出来，因为如果您使用过程、OOP 和框架，它会有所不同），然后您可以执行 while() 循环来显示所有结果

```
$qry = "select * from my_table where name like %".$this->real_escape_string($_POST['search'])." order by name"; 
```

如果你给我更多关于你的数据库、你的编程风格的信息，我可以为你提供更多帮助。我肯定会查看一些教程，因为这是一种非常简单的搜索方法。

# sql - 本机客户端驱动程序 DSN 更改为 SQL Server 驱动程序

> ID：12487687
> 
> 赞同：2
> 
> 时间：2012-09-19T02:17:37.380
> 
> 标签：sql, client, express, native, dsn

我在 Windows 2003 R2 机器上使用 SQL Native Client 驱动程序配置了 4 个 DSN。2 个 DSN 指向 SQL Server 2005 表示同一台机器上的数据库，以及 2 个指向另一台机器上的数据库。

我面临的问题是，在 ODBC 管理工具中，1 个 DSN 自动显示为 SQL Server 类型的 DSN。

这怎么可能？

它是否表明 SQL 系统已损坏？

# objective-c - 验证应用程序，应用程序丢失架构 armv7

> ID：12487689
> 
> 赞同：17
> 
> 时间：2012-09-19T02:17:44.853
> 
> 标签：objective-c, architecture, armv7, entitlements, code-signing-entitlements

当我更新我的第一个 iOS 应用程序时，我在验证它们时遇到了 2 个问题，

```
*iPhone/iPod Touch:application executable is missing a required architecture. 
At least one of the following architecture(s) must be present: armv7

*Unable to extract entitlements from application: (null) 
```

Info.plist 和构建设置都是默认设置，我唯一更改的是代码签名身份调试和发布到我的分发配置文件，应用程序 ID 和捆绑包 ID 相同。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-01-04T21:33:28.507

当我连接我的 iphone 5 并建立我的档案时，这发生在我身上。当我断开我的 iPhone 并建立我的档案时，一切顺利。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-03-28T11:29:41.080

确保在项目和目标设置中都将“构建活动架构”设置为否，以及此处的答案[“警告：iPhone 应用程序应包含 armv6 架构”，即使设置了构建配置](https://stackoverflow.com/questions/4198676/warning-iphone-apps-should-include-an-armv6-architecture-even-with-build-conf)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-25T21:41:12.657

现在我解决了这个问题，这是一个非常简单的问题，它与我的可执行文件名称有关。

我的目标有一个无效字符（+）然后，当我上传我的应用程序时它显示一个问题（这个包无效，可执行文件名称不能包含这个字符....）然后我将可执行文件名称从 ${EXECUTABLE_NAME}到化学，但我的应用程序的注册名称是化学++。

然后验证显示其他问题，这是通过更改此产生的。

为了解决这个问题，我点击了项目 > 目标两次并更改了名称，没有无效字符（ * . , + {} () ），所有问题都消失了。

然后上传成功。

（当我更改 Info.plist 可执行文件名称时，对于其他名称，它会产生不兼容，所以不要将其设为默认值（ ${EXECUTABLE_NAME} ），如果您更改，它会产生其他问题。）

等待苹果评测！！！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-04-06T01:40:13.190

确认的。我刚刚拔掉了我的 iPhone 5s 并重新存档了该应用程序。它完美无缺。

哎呀，我再也回不来这40分钟了。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-02-07T09:27:39.913

我已连接**iPhone 5s，**但在验证我的应用程序时出现此错误

![在此处输入图像描述](../Images/668ee695acd9f5bcfe3bce3082f91dc3.png)

将**目标和项目的****“仅构建活动架构”**设置为**NO**可解决 此问题。

 *** * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-25T16:04:58.380

确保将所有目标、库和框架的“仅构建活动架构”设置为 NO。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-27T02:16:04.710

当我拔下 iPad 时，警告就消失了，并且能够编译并上传到应用商店。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-04-23T15:04:27.057

确保 armv7 后面没有逗号。

当我在目标设置中设置架构时，我写道：

```
armv7, armv7s 
```

看起来不错，但是当我单击“其他”进行编辑时，我意识到它被设置为：

```
armv7,
armv7s 
```

删除逗号 (,) 解决了该问题。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-08-20T19:11:37.737

当我尝试验证我试图提交到应用商店的（仅限 iPad）应用时，我收到了三个错误：

**1\. iPad：应用程序可执行文件缺少所需的架构。必须至少存在以下架构之一：armv7。**

实际上，我的所有架构设置中都有 armv7 和 armv7s，是的，我确实将“仅构建活动架构”设置为“否”。

为我解决的问题是从这个列表中手动删除 armv7s，只留下**armv7**。 *只有*这样，这个错误才消失。

“至少其中一种架构必须是 armv7”

**2\. 应用程序未通过协同设计验证。签名无效，包含不允许的权利，或者未使用 iPhone 分发证书签名。**

嗯？以前，我一直在使用企业许可证构建这个 iPad 应用程序，以便在我们公司内进行 Ad-Hoc 分发。现在，我正在尝试使用开发人员许可证来构建它，这样我就可以将它部署到 App Store。

为了解决这个问题，我需要：

*   在左侧窗口中单击我的项目

*   在中间窗口中选择项目名称（在 Targets 下）

*   选择构建设置选项卡

*   在行选项卡下方，选择“基本”和“组合”选项。

*   现在，在代码签名身份下，我需要确保我选择了与我的 Apple 开发人员帐户相关的代码签名，而不是企业帐户，这是专门针对该项目的。

**3\. 无法从应用程序中提取权利：（null）**

咦？！

还记得应用程序刚刚命名的美好时光吗？使用 XCode，您的应用程序具有包名称、产品名称、可执行文件名称和包显示名称。

一些 StackOverflow 用户已经注意到了这一点，并指出了苹果文档的方向，以解释这些差异......但祝你好运。

对我来说，要解决这个问题，我只需要确保 Executable Name 和 Bundle Name（在*** -Info.plist 文件中）相同，并且还与 Product Name 匹配。

令人沮丧的是，产品名称隐藏在上面第 2 部分中提到的选项卡下，即选择“构建设置”选项卡，然后在标题栏中选择“基本”和“组合”。

我希望这对其他开发人员有用。这一切都是使用 XCode 4.6.3 完成的，所以当 iOS 7 和 XCode 5 出现时，下个月肯定会过时。届时，您的应用可能还需要昵称和中间名。谁知道？

麦克风

www.MikesKnowledgeBase.com

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-07-23T11:04:54.303

检查目标和项目设置并将“Build Active Arch Only”设置为 NO。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-07-15T18:47:55.440

我也遇到了同样的问题，已经解决了。。

事实证明，我的 Bundle/Executable 名称与项目名称不同。

转到项目 > 双击目标

将其重命名为 Bundle/Executable 名称，然后为 Release/iOS 设备构建

并且应用程序加载器将接受您的应用程序。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-09-19T02:59:22.773

它说缺少所需的架构试试这个

1.  转到**目标**“您的项目”
2.  转到**构建设置**
3.  **查看Architectures**中是否有**armv7**
***   如果不是，则将**Architectures**设置为**armv7***   清洁和建造。**

 **如果已经有**armv7**，那么一定有问题。

希望能帮助到你！

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-11-23T21:53:34.043

该死的......这对我来说是一个错字。在设置架构时，我在第一个条目（armv7）的末尾放了一个逗号......这样它就被认为是无效的并被忽略了。删除这个额外的字符已经解决了任何问题......

永远不要忘记检查您的错字！****

# php - PHP Echo 和 HTML 混合多种方法

> ID：12487690
> 
> 赞同：0
> 
> 时间：2012-09-19T02:18:04.010
> 
> 标签：php, echo

我正在使用 WAMP 运行本地 PHP/Apache 服务器。我正在尝试多种方法来使用 HTML 标记回显行，但站点中断。这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>

<?php
    $name = 'John';
    $months = array('January', 'February', 'March');

    echo "<p>$name;</p>";
?>

    <p><?php echo "Hello World!";?></p>
    <p><?php echo "My name is " . $name . ", nice to meet you.";?></p>
<?php
    echo "<p>Hi again, my name is " . $name . ".</p>";
?>

<?php
    foreach ($months as $current_month) {
        echo "<li>$current_month</li>";
    }
?>
</body>
</html> 
```

浏览器输出是

```
$name;
"; ?>
Hi again, my name is " . $name . ".
"; ?> 
```

我还尝试将 php 代码放在 Doctype 之上，但该站点再次中断。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T02:20:00.257

你不能像你正在做的那样编写代码。例如这个：

```
<p>echo $name;</p>; 
```

完全错误，应该这样写：

```
echo "<p>$name</p>"; 
```

# iterator - 在 ADF 中显示带有迭代器的项目

> ID：12487691
> 
> 赞同：0
> 
> 时间：2012-09-19T02:18:07.667
> 
> 标签：iterator

我遇到了以下问题...我正在开发 ADF 应用程序，在这种情况下我使用的是具有 3 行和 3 列的 panelFormLayout...在其中一个 af:iterator 显示 9 个项目，每个项目都在一个 panelGroupLayout ...我注意到虽然我使用 TreeSet 来订购我的项目集合，但我的项目显示如下...

```
Name1 - Name4 - Name7
Name2 - Name5 - Name8
Name3 - Name6 - Name9 
```

我希望它们显示如下...

```
Name1 - Name2 - Name3
Name4 - Name5 - Name6
Name7 - Name8 - Name9 
```

任何人都知道如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T11:48:09.640

您将 panelFormLayout 设置为 Horizo​​ntal 内部的 panelGroupLayout 设置为垂直。这意味着对于迭代器给出的每 3 个值，它将是一个新行。

# node.js - NodeJS - 强制用户等到全局事件完成

> ID：12487692
> 
> 赞同：1
> 
> 时间：2012-09-19T02:18:09.460
> 
> 标签：node.js, events, asynchronous

我有一个节点服务器，它执行以下操作：

我在外部服务器中有一个 URL 列表，称为 URLServer。当用户访问我的节点服务器时，我的节点服务器向 URLServer 发出请求并获得一个包含 20 个 URL 的列表。一旦我们得到这 20 个 URL，我希望我的节点服务器去获取每个 URL 的标题，这意味着我将获取 URL 并创建一个 DOM，然后提取标题，我还会得到其他数据，所以这就是它必须完成的方式。完成此操作后，我希望将 URL 的标题和 URL 保存在内部存储器和/或数据库中。所以我有一个 URL 缓存和一个标题缓存（我不想一直获取 URL）。

我有这样的东西： if(URL-cache is empty) 从 URLServer 获取 URL 并缓存这些 URL

然后，我想检查每个 URL 以查看它们的标题是否在我的缓存中，所以我这样做：对于每个 URL，如果 title-cache [URL]，则获取站点，创建 DOM，提取标题 + 其他数据并缓存

这对一个用户很有用，但是当我在服务器中尝试重负载时，服务器会挂起。我认为服务器挂起的原因如下：

用户 1 请求 - 空缓存 - 获取 URL 并在完成后获取 URL 的内容 用户 2 请求 - 缓存对于该用户来说仍然是空的，因为对用户 1 的请求尚未完成！！！因此，用户 2 再次强制获取 URL 及其各自的内容。用户 3 请求 - 用户 1 和用户 2 请求尚未完成，因此同样的问题...

因此，假设我需要获取 10 个 URL，而不是打开 10 个连接，每个 URL 一个然后缓存数据，如果我有 20 个用户同时访问服务器，我将打开 200 个连接（每个用户打开 10 个连接）。

如何阻止用户 X（其中 X>1）导致这些事件？我基本上希望服务器关闭一个门并要求每个用户等到它填充缓存，然后在填充这些门后打开门，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T14:24:58.767

这可以通过使用 EventEmitter 类来完成。你设置了一个 EventEmitter

```
 var events = require('events');
    var eventEmitter = new events.EventEmitter(); 
```

然后你处理你的传入请求

```
 // here you check for url in cache with your own logic
    if(weHaveUrl){
      // Respond directly
    } else {
      // Add one time event watcher for that url
      eventEmitter.once('url-' + url, function(data){
        // We now have data so respond
      });
      // Initiate search
      searchUrl(url);
    } 
```

并包装您的搜索功能以发出事件

```
 var urlSearchList = [];
    function searchUrl(url){
      // We check in case we are already looking for the data
      if(urlSearchList.indexOf(url) === -1){
        // Append url to list so we won't start a second search
        urlSearchList.push(url);

        // Your logic for searching url data
        // Once recieved we emit the event
        eventEmitter.emit('url-' + url);
        // And optionally remove from search array 
        //  if we want to repeat the search at some point
        urlSearchList.splice(urlSearchList.indexOf(url));
      }
    } 
```

如果结果在缓存中，此方法将立即响应请求，或者让它们等待搜索结果然后返回结果。

由于我们会记录启动了哪些搜索，因此我们不会多次开始搜索相同的 url，并且每个请求都会在结果可用后立即得到响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T02:24:51.590

避免此事件的最简单方法（顺便说一下，它被称为“雷群问题”）是不让*任何*用户运行`fetchURLs`代码。相反，如果缓存检查失败，则将作业添加到作业队列以刷新此数据。然后返回一条消息，内容为“我们很抱歉，我们现在没有该数据 - 请稍候，我们正在为您获取数据”。然后，您只需轮询您的端点以获取数据，一旦它在缓存中，您就已准备就绪并准备就绪。

为了防止 100 个用户将作业提交到队列中，将标志添加到另一个全局可用的数据结构（可能与您用于作业队列的相同，但不一定）。当您遇到缓存未命中时，请检查该缓存键的标志是否存在，如果不存在，请设置该标志并将作业提交到您的作业队列。在伪代码中：

```
if url not in cache:
    if url not in jobLocks:
        jobLocks.add(url)
        jobQueue.add("fetchURLs", data=url)

    return "Please wait while we fetch your data"

else:
    return cache[url] 
```

当缓存中的数据过时时，您可以使用相同的过程来避免更新时出现雷鸣般的羊群。不是删除数据然后重新获取它，而是服务器陈旧数据并将作业放入队列中以*更新*缓存。

# python - 如何在Django中显示内存中的图片？

> ID：12487698
> 
> 赞同：0
> 
> 时间：2012-09-19T02:18:53.267
> 
> 标签：python, django, memory, image

我知道如何将图片显示为内存中的页面，就像这样使用：

```
import cStringIO

mStream = cStringIO.StringIO(picBin)

return HttpResponse(mStream.getvalue(),"image/jpg") 
```

但是，如果我不想将图片显示为页面，而是想在页面中显示它，比如在 HTML 中使用，是否有人知道如果图片是从加载的，我应该设置什么“src”记忆？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T02:24:15.153

您需要将图像内容 base-64 编码为[Data URI](http://en.wikipedia.org/wiki/Data_URI_scheme)：

```
data_uri = 'data:image/jpg;base64,'
data_uri += mStream.getvalue().encode('base64').replace('\n', '') 
```

现在您可以推`data_uri`入`src`图像的属性。

# c - 为什么下面的程序给出输出：A

> ID：12487706
> 
> 赞同：1
> 
> 时间：2012-09-19T02:20:08.337
> 
> 标签：c, arrays, pointers, printf

为什么下面的程序给出输出：A。

`\n`格式说明符后有什么用`%d`？我已经在 Linux、Windows 和[ideone](http://ideone.com/2MKcy)上尝试过。

```
#include <stdio.h>
int main(void)
{
    char p[]="%d\n";
    p[1]='c';
    printf(p,65);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T02:23:57.243

首先，您的程序修改格式字符串：它变为“%c\n”。然后它打印 65，它被重新解释为一个 ASCII 码，它是一个大写的`A`.

这与

```
printf("%c\n", 65); 
```

甚至

```
printf("%c\n", 'A'); 
```

因为`char`值`int`在传递给可变参数函数（例如`printf`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T02:22:49.080

ASCII 字符编码。A 是 65。http [://www.asciitable.com/](http://www.asciitable.com/)

您正在将输出格式说明符从 %d - integer 更改为 %c - character

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T02:23:10.987

`%c`意味着`char`。

65是'A'的ASCII码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-19T02:27:44.770

让我们跟随执行流程和变量的状态。最初，您正在设置字符串 p = "%d\n"。'%d' 告诉 printf 在 '%d' 的位置打印一个整数，它将在字符串参数之后传递给 printf。然后，您正在设置 p[1] = 'c'。它将 p 更改为“%c\n”，因为数组的索引从 0 开始，因此您在引用 1 位置时更改第二个字符。他们用 p 和 65 调用 printf，这使得调用看起来像这样：'printf("%c\n", 65)'。%c 告诉 printf 函数用作为第二个参数传递的字符替换 %c。在 C 中，字符在 ASCII 表中表示为整数（可在此处找到：[http ://www.asciitable.com/](http://www.asciitable.com/)）。恰好 65 是 'A' 的代码，所以打印了一个 'A' 后跟一个换行符。我希望这是有帮助的！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-19T02:23:12.783

`"%c"`使用您指定的格式字符串`printf`应该打印一个字符。*65*是字符“A”的 ASCII 值。

您可以在[wikipedia page](http://en.wikipedia.org/wiki/Ascii)上找到有关 ASCII 的更多信息，包括字符值表。

# javascript - Bootstrap .dropdown li 背景颜色

> ID：12487707
> 
> 赞同：18
> 
> 时间：2012-09-19T02:20:24.610
> 
> 标签：javascript, drop-down-menu, twitter-bootstrap

这是我的网站：[http ://defend-foreclosure.com/index.html](http://defend-foreclosure.com/index.html)

当我将鼠标悬停在“法律”下拉列表中时，我无法将列表项更改为蓝色以外的任何颜色。谁能告诉我我需要编辑 CSS 中的哪些元素？我一直在测试 bootstrap.css 和 bootstrap.min.css 中的各种元素，但没有运气。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-19T02:52:01.950

不要更改 bootstrap.css。创建另一个 css 文件，您可以在其中覆盖它。无论如何，该行是 4572：

```
.dropdown-menu li > a:hover, .dropdown-menu li > a:focus, .dropdown-submenu:hover > a 
```

将背景图像设置为无，将背景颜色设置为您想要的任何颜色。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-24T13:31:25.920

如果您还打算更改选定元素的颜色，则应注意 li 元素的活动类：

```
.dropdown-menu li.active > a,
.dropdown-menu li.active > a:hover,
.dropdown-menu li.active > a:focus {
    ...
} 
```

# python - 当 wxPython 框架关闭时 Python 崩溃 - 仅在 XP 上

> ID：12487709
> 
> 赞同：0
> 
> 时间：2012-09-19T02:20:43.743
> 
> 标签：python, wxpython

因此，我的脚本中出现了一组相当复杂的 wxPython 框架。如有必要，我会发布所有代码，但我不知道一定是代码问题，因为一切都在 Windows 7 上完美运行。但是，当我在 Win XP 上运行它时，在关闭最后一帧后（打印最后的 Destroy() 和 Exit() 语句运行后的语句，但之后程序中没有任何反应）我得到一个“pythonw.exe 遇到错误等等”。错误报告打印了很多我不知道如何解释的信息，通常结构类似于“模块#...'somedll.dll'*文本*...”。

我可以提供所有代码等。但希望在 XP 中对 wxpython 有一些基本的可移植性要求，有人可以了解我。

好的，在下面粘贴一个简化的代码。依次弹出几个窗口，最后一个窗口重复弹出一定次数。我之前没有编写过这种嵌套帧的代码（或使用 CallAfter() 的代码），所以它肯定有问题。

```
import wx
GAME = 5

class Game:
        def __init__(self):
            "various attributes"

class UserFrame ( wx.Frame ):

        def __init__( self, parent, app):
            wx.Frame.__init__ ( self, parent, id = wx.ID_ANY, title = wx.EmptyString, pos = wx.DefaultPosition, size = wx.Size( 500,300 ), style = wx.DEFAULT_FRAME_STYLE|wx.TAB_TRAVERSAL )

            self.app = app

            self.m_button3 = wx.Button( self, wx.ID_ANY, u"OK", wx.DefaultPosition, wx.DefaultSize, 0 )
            self.Bind(wx.EVT_BUTTON, self.OnCo, id = self.m_button3.GetId() )

        def OnCo( self, event ):
            self.Close()
            wx.CallAfter(self.nextFrame)
            self.app.Exit()

        def nextFrame(self):
            IntroFrame(None, app).Show()
            app.MainLoop()
            app.Exit()
            print "this prints"

        def __del__( self ):
            pass

class IntroFrame( wx.Frame ):
        def __init__( self, parent, app):
            wx.Frame.__init__ ( self, parent, id = wx.ID_ANY, title = wx.EmptyString, pos = wx.DefaultPosition, size = wx.Size( 500,300 ), style = wx.DEFAULT_FRAME_STYLE|wx.TAB_TRAVERSAL )

            self.app = app
            self.m_button4 = wx.Button( self, wx.ID_ANY, u"OK", wx.DefaultPosition, wx.DefaultSize, 0 )
            self.Bind(wx.EVT_BUTTON, self.OnCo, id = self.m_button4.GetId() )

        def OnCo( self, event):
            self.app.myGame = Game()
            wx.CallAfter(self.playGame, self.app.myGame)
            self.Destroy()
            self.app.Exit()

        def playGame(self,myGame):
            apps = []
            for i in range(1,GAME+1):
                    apps.append(CustomApp())
                    PlayerChoice(None, apps[i-1], myGame).Show()
                    apps[i-1].MainLoop()
                    "simple decision tree for game"
                    apps[i-1].Exit()

        def __del__( self ):
            pass

class PlayerChoice( wx.Frame ):

        def __init__( self, parent, app, myGame ):
            self.app = app
            wx.Frame.__init__ ( self, parent, id = wx.ID_ANY, title = wx.EmptyString, pos = wx.DefaultPosition, size = wx.Size( 500,300 ), style = wx.DEFAULT_FRAME_STYLE|wx.TAB_TRAVERSAL )

            self.m_button1 = wx.Button( self, wx.ID_ANY, u"Choice 1", wx.Point( -1,-1 ), wx.DefaultSize, 0 )

            self.Bind(wx.EVT_BUTTON, self.OnCo1, id = self.m_button1.GetId() )

        def OnCo1(self,event):
            self.Close()

        def __del__( self ):
            pass

class CustomApp(wx.App):
    def __init__(self):
        wx.App.__init__(self)
        self.myGame = None
        "some other attributes"

app = CustomApp()
UserFrame(None, app).Show()
app.MainLoop()
print "this doesn't print"
app.Exit() 
```

# linq - 在 orderby 问题上拉我的头发

> ID：12487712
> 
> 赞同：0
> 
> 时间：2012-09-19T02:21:10.677
> 
> 标签：linq, sql-order-by

这是我的代码：

```
var students = db.Students.Where(p => p.active == true).OrderBy(z => z.lastname)

return View(students) 
```

在视图中，我遍历了 Student 的模型。第一行是“全名”。但这总是按名字的字母显示，而不是最后一个。这是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T00:29:04.787

格特，你很好。我睡在上面，然后第二天早上有一个尤里卡时刻。是的，该死的记录集被拉入 jquery 数据表。那是按全名排序。不敢相信我昨晚在这件事上浪费了一个小时。

# pointers - 无论指针指向的数据类型如何，指针是否总是相同的长度并且具有 1 个内存地址？

> ID：12487714
> 
> 赞同：0
> 
> 时间：2012-09-19T02:21:17.167
> 
> 标签：pointers

例如在我的 64 位 ubuntu 机器中，指针的长度是 2 字节并且有 1 个内存地址，那么它是否总是 2 字节，无论它指向的是 long int 还是 int 吗？

如果是这样，确定它指向的数据类型有什么意义？在下面的代码中，除了不兼容的警告目的之外，数据代表多少字节，通过使用`%hu`and `%lu`，所以无论指针是 int 还是 long ，结果都是一样的。谁能给我一个提示？

```
#include <stdio.h>
int main(void) {
    int *ptr1;
    long int *ptr2;
    long int a = 0xffffffff;
    ptr1 = &a;
    ptr2 = &a;
    printf("the value should the same as 2 ** 16 %hu", *ptr1);
    printf("the value should the same as 2 ** 32 %lu", *ptr2);
    return 0;
} 
```

* * *

更新：

确定我能想到的指针类型的另一个目的是指针算术，例如：

`ptr + 1`，它将跳过数据类型所具有的字节长度，而不是总是某个值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T02:31:04.037

我可能误解了您的要求，如果是，请提前接受我的道歉。我认为正在发生的事情是，您通常将指针*的*概念与任何给定指针可能引用的*类型的概念混淆了。*

一个指针，*不管它指向什么*，只是内存中的一个地址（但是它是为给定的环境或系统构造的）。被引用的数据类型在分配（malloc、calloc 等）中*至关重要*，因为知道需要为给定指针引用的特定类型/结构分配*多少字节的内存变得很重要。*如果您正在使用指向数组结构的指针，那么如果您增加指针引用，则数据大小变得更加关键，因为指针增量可以增加被引用数据的大小。

你可以*声明*一个指针类型，但它不*分配*任何东西。您收到的警告是编译器告诉您它看到您有意或无意地获取了一种变量的地址，但冒着试图将其用作*另一种*变量的地址的风险.

假设一个 int 需要四个字节，但一个短 int 需要两个。如果你把一个指针指向一个短整数，但写一个整数值给它，你会破坏谁知道一路上发生了什么。这正是为什么跟踪您所引用的指针类型很重要的原因，以免在运行时您的代码发生真正糟糕的事情。

正如我所说，我可能误解了这个问题，如果我是，请接受我的道歉。我希望这是有帮助的。

# ruby-on-rails - 获取 Monit monitrc 文件来测试 Rails 应用程序

> ID：12487719
> 
> 赞同：0
> 
> 时间：2012-09-19T02:22:24.040
> 
> 标签：ruby-on-rails, ruby, monit

我正在尝试使用 Monit 来监控并在某些 Rails 应用程序崩溃时重新启动它们。这些应用程序使用 Sphinx。Monit 不接受通常在 shell 中工作的命令。

monitrc 配置如下所示：

```
...
check process app_name
  with pidfile "/path/to/pidfile/searchd.production.pidfile"
  start program = sudo su user_name -c "cd /home/app_name/current
    && RAILS_ENV=production rake ts:start"
  stop program = sudo su user_name -c "cd /home/app_name/current
    && RAILS_ENV=production rake ts:stop"
... 
```

访问 pidfile 的权限被拒绝，但如果我尝试：

```
with pidfile "sudo /path/to/pidfile/searchd.production.pidfile" 
```

它不起作用。

同样，monit 不接受启动和停止程序 bash 命令。

我是否缺少明显的解决方法？顺便说一句，我是个菜鸟。

我还查看了[http://capitate.rubyforge.org/recipes/sphinx-monit.html#sphinx:monit:start](http://capitate.rubyforge.org/recipes/sphinx-monit.html#sphinx:monit:start)但并没有真正明白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:32:56.997

`bundle exec`在调用之前尝试放置`rake`。像这样：

```
start program = sudo su user_name -c "cd /home/app_name/current
  && RAILS_ENV=production bundle exec rake ts:start"
stop program = sudo su user_name -c "cd /home/app_name/current
  && RAILS_ENV=production bundle exec rake ts:stop" 
```

`puma`这是我无法监控生产服务器上的服务器和工作人员的主要原因`delayed_job`。

**更新：**

我的工作示例：

```
check process puma with pidfile <%= puma_pidfile %>
  start program = "/bin/su - ubuntu -c 'cd /home/ubuntu/apps/artvasion/current && bundle exec puma -C config/puma.rb'"
  stop program =  "/bin/su - ubuntu -c 'kill `cat /home/ubuntu/apps/artvasion/shared/pids/puma.pid`'"
  # ...monitoring stuff 
```

# python - Python 中的 If Else 语句中的模块？

> ID：12487721
> 
> 赞同：0
> 
> 时间：2012-09-19T02:22:47.753
> 
> 标签：python

我已经使用 Python 大约四个星期了，我喜欢它。我刚刚和我的实验室伙伴完成了一项实验室任务，然后我得到了一个随机灵感，为我男朋友非常痴迷的游戏创建了一个 Python 小程序：战锤。

我创建了一个运行良好的基本程序，但是对于高级程序，我遇到了一些麻烦。

高级程序的作用：

您输入您的游戏将获得多少分

逐段显示所有灰骑士总部、部队等的列表（首先是所有总部，然后是精英等）。

通过输入名称旁边的数字，您可以逐节选择所需的单位

该程序会在您进行时为您提供每个部分的小计。

该程序最后为您提供了所有部分的总和。

该程序会告诉您还有多少积分可以使用。

对于灰骑士的总部之一，您可以选择拥有最多 5 个模型，每个模型 40 点。在这个程序中，我想列出模型（使用 print 命令）然后让 if elif 语句对应于每个数字。这是我遇到问题的代码部分：

```
def inputHQ():

    print

    print

    print 'Select your HQ by entering the number beside their name. Example "1", "2", "3".'

    print 

    print '1\. Lord Kaldor Draiog - 275 points'

    print '2\. Grand Master Mordrak - 200 points'

    print '3\. Ghost Knights - 40 points per model'

        greyKnightHQ = input('What HQ do you want? Use the number beside the modle, no periods: ')

            if greyKnightHQ == 1:

                greyKnightHQ = 275

            elif greyKnightHQ == 2:

                greyKnightHQ = 200

            elif greyKnightHQ == 3:

                greyKnightGhostKnight = input('How many Ghost Knights would you like? Up to 5: ')

                def calcGreyKnightGhostKnight():

                    greyKnightGhostKnightTotal = greyKnightGhostKnight * 40 

                greyKnightHQ = greyKnightGhostKnightTotal

                return greyKnightHQ 
```

当我在 Geany 中运行它时，我得到了这个错误：

```
Traceback (most recent call last):

        File "warhammer-point-calculator-advanced.py", line 96, in <module>

            main()

        File "warhammer-point-calculator-advanced.py", line 13, in main

            greyKnightHQ = inputHQ()

        File "warhammer-point-calculator-advanced.py", line 48, in inputHQ

           greyKnightHQ = greyKnightGhostKnightTotal

NameError: global name 'greyKnightGhostKnightTotal' is not defined 
```

以下是我在文档顶部对这些功能的定义：

`greyKnightHQ = inputHQ()`

`greyKnightGhostKnightTotal = calcGreyKnightGhostKnight(greyKnightHQ)`

我的两个主要问题是： 1\. 你能在 Python 的 if else 语句中定义一个模块吗？如果是这样，我做得对吗？2\. 我是否也可以在 if else 语句之外创建 calcGreyKnightGhostKnightTotal 模块，并在需要时调用它，否则让它乘以 0，这样它就不会弄乱程序的其余部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T02:39:27.603

您遇到问题是因为您在函数中创建了一个函数，然后尝试在其范围之外访问它：

```
def inputHQ():
    ...

    def calcGreyKnightGhostKnight():
        ... 
```

`inputHQ`是全局定义的，但`calcGreyKnightGhostKnight`只定义在`inputHQ`. 尝试访问`calcGreyKnightGhostKnight`外部`inputHQ`将产生一个`NameError`.

我不确定到底`inputHQ`在做什么，所以我无法为您提供比这更多的帮助。

# python - 在 Python 中实现全局配置

> ID：12487731
> 
> 赞同：0
> 
> 时间：2012-09-19T02:23:51.707
> 
> 标签：python

我想编写一个脚本来完成一些特定的工作，每次工作完成后，我想将 a 增加`job_done_count`1，也就是说，如果我运行脚本 10 次，`job_done_count`将会是`10`.

这就是这个脚本的样子，

```
#!/usr/bin/env python

job_done_count = 0   
...

if __name__ == '__main__':
    do_the_job()
    job_done_count += 1 
```

我想知道它是否有效。因为，每次我运行脚本时，`job_done_count`都会设置为 0，然后是 1。它根本不记得工作完成了多少次。

我不应该把它`job_done_count`放在剧本里吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T02:30:59.100

您可以[`pickle`](http://docs.python.org/library/pickle.html)将`job_done_count`变量放入文件中：

```
import os, pickle

if os.path.exists('job_count.pickle'):
    with open('job_count.pickle', 'rb') as handle:
        job_done_count = pickle.load(handle)
else:
    job_done_count = 0

...

if __name__ == '__main__':
    do_the_job()
    job_done_count += 1

    with open('job_count.pickle', 'wb') as handle:
        pickle.dump(job_done_count, handle) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T03:20:42.107

或者不要使用泡菜并通过以下任何一种方式进行操作。

用手

```
with open("jobs_done.txt") as inp:
    job_done_count = int(inp.read().strip()) 
```

带[json](http://docs.python.org/library/json.html)

```
with open("jobs_done.json") as inp:
    job_done_count = json.load(inp)['jobs_done'] 
```

或者用十亿其他方法！

# java - 仅用户输入检查 int

> ID：12487734
> 
> 赞同：2
> 
> 时间：2012-09-19T02:24:10.497
> 
> 标签：java, user-input

我试图通过限制用户可以输入的内容来让我的用户输入不会使我的程序崩溃，例如：

1.  只是一个 int
2.  介于 1-30 之间

我编写的代码只能在一定程度上起作用。如果您输入的不是 int，它会检查它并要求您再次输入。如果您继续输入除 int 以外的任何内容，则再次输入。如果它确实键入了一个 int，我还有另一个 while 循环，如果它在 1-30 区域之外，那么它将要求用户再次输入。但是，之后如果用户键入另一个“除了 int 之外的任何内容”，程序就会崩溃。我尝试`sc.hasnextint()`在 1-30 条件之间结合输入和检查输入，但如果我将输入放在`sc.nextint()`之前`sc.hasnextint()`并且用户输入除 int 以外的任何内容，程序就会崩溃。如果我把它放在条件循环之后，那么用户输入将不会被声明。

```
int choose;
System.out.print("type an integer: ");
Scanner sc=new Scanner(System.in);

while (!sc.hasNextInt() ) { 
    System.out.println("only integers!: "); 
    sc.next(); // discard 
} 

choose=sc.nextInt();

while (choose<=0 || choose>30)
{
    System.out.print("no, 1-30: ");
    choose=sc.nextInt();
}
sc.close(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T02:29:51.603

您需要组合这两个循环，以便每次最终用户输入新内容时都会进行两项检查：

```
for(;;) {
    if(!sc.hasNextInt() ) { 
        System.out.println("only integers!: "); 
        sc.next(); // discard
        continue;
    } 
    choose=sc.nextInt();
    if( choose<=0 || choose>30)
    {
        System.out.print("no, 1-30: ");
        continue;
    }
    break;
} 
```

循环退出后，`choose`是 和 之间的数字`1`，`30`包括在内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T02:33:30.240

```
do:
get number from user
if non integer format is entered{
number = -1;}
while: 1 < number < 30 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T03:32:00.010

```
 String choose = "";
    System.out.println("Test if input is an integer. Type 'quit' to exit.");
    System.out.print("Type an integer: ");
    Scanner sc=new Scanner(System.in);

    choose = sc.nextLine();

    while (!(choose.equalsIgnoreCase("quit"))) {
        int d = 0;
        try {
            d = Integer.parseInt(choose);

            if (!(d > 0 && d < 31)) {
                System.out.println("Being between 1-30");
            } else {
                System.out.println("Input is an integer.");
            }
        } catch (NumberFormatException nfe) {
            System.out.println("Enter only int");
        }

        System.out.print("Type an integer to test again or 'quit' to exit: ");
        sc = new Scanner(System.in);
        choose = sc.nextLine();
    }

    sc.close();
    System.out.print("Program ends."); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-04T00:14:40.437

请参阅带有 NumberFormatException 捕获的 dasblinkenlight 的 awnser。我正在考虑这样做。这也有效：

您需要像这样组合两个循环：

```
while(true) {
if(!sc.hasNextInt) {
System.out.println("Only Integers!");
continue;
}
choose = sc.nextInt();
if(choose <= 0) {
System.out.println("The number you entered was too small.");
continue;
} else if(choose > 30) {
System.out.println("The number you entered was too large.\nMax: 30");
continue;
}
break;
}
sc.close(); 
```

# javascript - 'create' 方法完成后渲染 javascript

> ID：12487736
> 
> 赞同：0
> 
> 时间：2012-09-19T02:24:30.487
> 
> 标签：javascript, ruby-on-rails, ajax

我正在创建一个 ajax 表单，该表单将在我的 rails 应用程序中成功完成“create”方法后执行一些函数。它围绕查找单词的定义，显示它们，然后在用户保存所需的定义后将它们从屏幕上删除。我遇到的问题是从success.js.erb 访问函数rollUp 和revertButtons（存储在words.js 中）。我什至尝试将这些函数放在 application.js 中，但它仍然不起作用。现在，当这些函数包含在文件中时，success.js.erb 甚至根本没有执行......有什么想法吗？

创建动作：

```
if @word.save!
    params['word_definition'].each do |definition|
        if @word.definitions.create(text: definition)
            numDefs += 1
        end
    end
    respond_to do |format|
        if numDefs > 0  
            format.js { render action: "success" }
        end
    end
else
    format.js { render action: "failure" }
end 
```

words.js：

```
function submitForm(){
    if(isSubmittable()){
        $('#findWord form').serialize();
        $('#findWord form').submit();
    }
}
// other functions, like revertButtons() and rollUp() are stored here too 
```

成功.js.erb：

```
revertButtons();
rollUp();
$('<div />', {  class: "alert alert-success",
            text: "The word has been saved",
         }).wrap('<div class="single_error" />').parent().appendTo("#fieldAndErrorsContainer"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T02:52:25.363

是的，我感觉自己像个白痴。我在 $(document).ready() 中声明了我的所有函数，因此它被归入该函数的范围，无法从其他地方访问。学过的知识。

# permissions - Liferay 中的网页内容（控制面板）和普通用户？

> ID：12487737
> 
> 赞同：2
> 
> 时间：2012-09-19T02:24:34.090
> 
> 标签：permissions, content-management-system, liferay, web-content, control-panel

是否有任何功能可以显示一个用户提交的网络内容列表，并且他们有权编辑仅所有者条目的表情我无法获得网络内容的权限。我尝试授予 Creator 添加新条目的权限（在资产发布者上），出现 [Add New] 按钮，Creator 可以单击它，但没有 [Submit] 按钮提交条目（？），直到我授予 Creator 权限更新条目，但如果我授予创建者更新权限，他也可以编辑不是他的所有者的条目

# mysql - Wp 查询缓存

> ID：12487739
> 
> 赞同：0
> 
> 时间：2012-09-19T02:24:42.467
> 
> 标签：mysql, wordpress

我这里有个小问题..让我介绍一下...

我有一个创建简码的脚本.. 这是脚本..

```
//shortcode stock
function stok($atts, $content = null) {  
    extract(shortcode_atts(array(  
        "id" => 'http://net.tutsplus.com'  
    ), $atts));  
    $result = mysql_query("SELECT SUM(quantity) AS value_sum FROM wp_wpsc_cart_contents WHERE prodid = '".$id."'"); 
    $row = mysql_fetch_assoc($result); 
    $stock = '<center><br><b>STOK TERJUAL :</b><div class="nscountdown"><table><thead><tr><td>'.$row['value_sum'].'</td></tr></thead></table></div></center>';
    return $stock;
}  
add_shortcode("stok", "stok"); 
```

如您所见，有一个查询对列求和

```
$result = mysql_query("SELECT SUM(quantity) AS value_sum FROM wp_wpsc_cart_contents WHERE prodid = '".$id."'"); 
```

不..问题是..如何缓存结果，因为该查询使我的服务器平均负载变得尖峰...

有什么解决办法？？

之前谢谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T02:49:12.920

可能[瞬态 API](http://codex.wordpress.org/Transients_API)是您所需要的。

```
function stok($atts, $content = null) {  
    extract(shortcode_atts(array(  
        "id" => 'http://net.tutsplus.com'  
    ), $atts));  

    if ( false === ( $query_cache = get_transient( md5($id) ) ) ) {
        $result = mysql_query("SELECT SUM(quantity) AS value_sum FROM wp_wpsc_cart_contents WHERE prodid = '".$id."'"); 
        $row = mysql_fetch_assoc($result); 
        $stock = '<center><br><b>STOK TERJUAL :</b><div class="nscountdown"><table><thead><tr><td>'.$row['value_sum'].'</td></tr></thead></table></div></center>';

        // set one hour lifetime cache with the name of md5($id)
        set_transient( md5($id), $stock, 60*60*1 );     
        return $stock;
    }
    return $query_cache;
}  
add_shortcode("stok", "stok"); 
```

# jsp - 如何在 JSTL 中查找 HashMap 是否为空/null？

> ID：12487740
> 
> 赞同：3
> 
> 时间：2012-09-19T02:24:41.793
> 
> 标签：jsp, hashmap, jstl

我的控制器中有这样的东西：

```
model.attribute("hiringManagerMap",hiringManagerMap); 
```

我`hiringManagerMap`在我的 jsp 中访问它并在选项中显示字符串值。

只有当 Map 不为空时，我才需要显示该字段。

我试着做`<c:if test=${!hiringManagerMap['empty']}>`。但是，它不起作用。即使地图不为空，它也不起作用。

请帮忙！！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-19T02:38:04.160

试试这个`<c:if test="${not empty hiringManagerMap}">`。它应该检查 null 和空。如果您需要检查其他集合或地图是否为空，请阅读[此内容以获取更多详细信息。](http://gayleforce.wordpress.com/2008/01/26/jstl-empty-operator/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T01:50:28.553

试试这个：

```
<s:if test="#map.element != null">
         //you code
</s:if> 
```

您需要更多代码来完成这项工作，但想法是相似的。

# asp.net-mvc - Asp.Net MVC4 Bundling & Minification .min.js 文件从 Scripts.Render 中排除？

> ID：12487742
> 
> 赞同：8
> 
> 时间：2012-09-19T02:24:54.163
> 
> 标签：asp.net-mvc, bundling-and-minification

我创建了一些主题 HtmlHelper 扩展，用于抓取主题目录中的 .css 和 .js 文件并将它们动态注册为包。但是，如果主题仅包含 .min.js 文件，则 Scripts.Render 输出在调试模式下为空。

在调试模式下，有没有办法在 Scripts.Render 的输出中包含 *.min.js 文件？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-19T02:35:58.543

弄清楚了。

```
BundleTable.Bundles.IgnoreList.Clear(); // apparently, IgnoreList included .min.js in debug
BundleTable.Bundles.IgnoreList.Ignore(".intellisense.js", OptimizationMode.Always);
BundleTable.Bundles.IgnoreList.Ignore("-vsdoc.js", OptimizationMode.Always);
BundleTable.Bundles.IgnoreList.Ignore(".debug.js", OptimizationMode.Always); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T15:21:41.107

之前遇到同样的问题......我所做的只是将asp.net web优化升级到最新的alpha版本。

# php - 带有数组块的php domnodelist

> ID：12487747
> 
> 赞同：0
> 
> 时间：2012-09-19T02:25:50.113
> 
> 标签：php, arrays, dom-node

我想使用带有 domnodelist 的数组块函数。这会导致错误，因为 domnodelist 不是标准的 php 数组。这是我的代码：

```
 foreach (array_chunk($nodeListArray, 2) as $chunk) { //each 2 make up 1 table

        $tableHTML='';
        foreach ($chunk as $key => $node) {
           $tableHTML.= $doc->saveHTML($node);
        } 
```

有没有办法使这项工作？

谢谢，

账单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T02:37:42.360

```
$tableHTML = '';
$tables = array();
foreach ($nodeListArray as $i => $node) {
  $tableHTML .= $doc->saveHTML($node);
  if ($i % 2 === 1) {
     $tables[] = $tableHTML;
     $tableHTML = '';
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-20T02:56:52.607

尝试`array_chunk(iterator_to_array($domNodeList), 2)`从迭代器创建一个数组

# c++ - C++ 用户可以使用 cin 创建一个新字符串吗？

> ID：12487749
> 
> 赞同：3
> 
> 时间：2012-09-19T02:26:04.693
> 
> 标签：c++

我做了一本字典。我的目标是让用户输入新词并定义它们。

我想我已经把“定义词”的部分写下来了，其余的都写下来了。我在下面写了一个我正在寻找的例子。我不希望有人为我做这件事；我只是想知道是否有办法做到这一点以及我可以在哪里了解更多信息。

现在，我正在使用 C++ for Dummies 和 Sam 的 Teach Yourself For Teachers。

```
string newword
string word

cout << "Please enter a word" >> endl;
cin >> word;
if (word == newword)
{
    create string <newword>; // Which would make the following
                             // source code appear without
                             // actually typing anything new
                             // into the source code.
}  
string newword
string word
string word2 // which would make this happen

cout << "Please enter a word" >> endl;
cin >> word;
if (word == newword)
{
    create string <newword> 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T02:37:20.310

我会使用`std::map`，因为它是一个字典样式的容器。`map`容器非常适合这种情况，您可以提供唯一**的键**来匹配其他数据。由于典型的字典中每个单词只有**一个条目**，因此这是完美的。

typedef 允许我们用名称定义类型。这在这里很有帮助，因为我们不必`std::map<std::string, std::string>`一遍又一遍地输入。想象一下，每次你看到`Dictionary`，它都替换为`std::map<std::string, std::string>`

```
// Map template requires 2 types, Key type and Value type.
// In our case, they are both strings.
typedef std::map<std::string, std::string> Dictionary;
Dictionary myDict; 
```

然后我会要求用户输入条目，然后要求他们定义他们的条目。

```
std::string word;
std::cout << "What word would you like added to the dictionary?" << std::endl;
std::cin >> word;

std::string definition;
std::cout << "Please define the word " << word << std::endl;
std::cin >> definitiion; 
```

下一步只需将单词及其定义插入字典即可。使用`[]`地图上的运算符，我们替换提供的 key 已经存在的任何条目`word`。如果它不存在，它将作为新条目插入。请注意，任何先前定义的同名单词现在都将具有新定义！

```
myDict[word] = definition; 
```

运行它会产生类似于：

```
>> What word would you like added to the dictionary?
>> Map
>> Please define the word Map
>> Helps you find things 
```

访问地图中的定义现在很简单：

```
myDict["Map"]; // Retrieves the string "Helps you find things" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T02:32:48.890

**编辑：**我的回答只告诉你如何建立一个没有定义的单词列表。希望它会打开一些精神之门，但要实现为每个单词附加定义的主要目标，您需要使用 a`map`而不是 a `vector`，正如[Aesthete 的回答](https://stackoverflow.com/a/12487818/47984)所示。

您需要的是一个包含字符串*集合的变量。*最容易使用和最常用的一种是向量：

```
// At the top of your program
#include <vector>

...

vector<string> words;

...

cout << "Please enter a word" << endl;
cin >> word;
words.push_back(word);     // This adds word to the end of the vector. 
```

向量的行为与数组非常相似，如果您有一个名为 的向量`words`，您可以使用以下语法访问第 (i+1) 个元素`words[i]`：

```
cout << "The 3rd word is " << words[2] << endl; 
```

您可以用`2`其他更复杂的表达式替换上面的表达式，包括依赖变量的表达式。这使您可以执行诸如列出所有单词之类的操作。

```
for (int i = 0; i < words.size(); ++i) {
    cout << "Word " << (i + 1) << " is " << words[i] << endl;
} 
```

等等

# ios - 自定义 EKEventViewController

> ID：12487751
> 
> 赞同：2
> 
> 时间：2012-09-19T02:26:19.330
> 
> 标签：ios, subclassing

我已经看到这个似乎正在自定义 EKEventViewController 的应用程序。看起来它正在修改 EKEventViewController 中的 tableview 并向其附加行。它绝对不仅仅是它前面的一个视图——它实际上是在 tableview 里面

![自定义 EKEventViewController](../Images/fb183d08e45db8ce9029239ffb213e02.png)

任何想法如何做到这一点？这可以通过继承 EKEventViewController 来完成吗？我已经尝试过子类化 - 但无法弄清楚如何将 numberofRowsInSection 推送到超类。

看来我应该能够继承 EKEventViewController 并像这样覆盖 UITableView 委托函数

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [super tableView:tableView numberOfRowsInSection:section];
} 
```

但是由于 EKEventViewController 没有从 UITableViewContoller 继承（它是一个 UIViewController） - 此代码将无法编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T16:15:43.650

想通了

子类 EKEventViewController 然后在该类 viewDidAppear 中增加 tableview 中滚动视图的垂直 contentSize 在最后一行结束后添加到我的小视图控制器中

```
+(void) viewDidAppear:(BOOL)animated
    {
    if ([self.event.location length]>0)
    {
            UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle: nil];
        _mev = (MapEventView*)[mainStoryboard instantiateViewControllerWithIdentifier: @"MAP_EVENT_VIEW"];

        UITableView* tv=[self getEKEventTableView];
        //tv.showsVerticalScrollIndicator=YES;
        tv.contentSize=CGSizeMake(tv.contentSize.width, tv.contentSize.height+MAP_EVENT_VIEW_PADDING+_mev.view.frame.size.height);

        // get last row in last sectoin
        int lastSection=[tv numberOfSections]-1;
        int lastRow=[tv numberOfRowsInSection:lastSection]-1;
        NSIndexPath *indexPath = [NSIndexPath indexPathForRow:lastRow inSection:lastSection];
        UITableViewCell* cell=[tv cellForRowAtIndexPath:indexPath];

        float mapeventview_origin=cell.frame.origin.y+cell.frame.size.height;

        TGLog(@"%d,%d %f %f", lastSection, lastRow, cell.frame.origin.y, mapeventview_origin);
        TGLog(@"event %@ location %@", self.event.title, self.event.location);
        _mev.ewc=[[EKEventWithCoords alloc] init];
        _mev.ewc.event=self.event;

        [tv addSubview:_mev.view];
        [_mev.view setCenter:CGPointMake(_mev.view.center.x, _mev.view.center.y+mapeventview_origin)];
    }
} 
```

# iphone - 在 CGRect 中绘制 NSString

> ID：12487753
> 
> 赞同：0
> 
> 时间：2012-09-19T02:27:37.897
> 
> 标签：iphone, nsstring, uiimage, cgrect

我正在尝试在 CGRect 的底部绘制一个 NSString。到目前为止，我已经能够将文本置于顶部居中，但我需要将其置于底部。我也尝试过 DrawAtPoint 但没有奏效。这是我目前拥有的代码： *UIGraphicsBeginImageContext(img.size);*

 *```
CGRect aRectangle = CGRectMake(0,0, img.size.width, img.size.height);
[img drawInRect:aRectangle];

[[UIColor whiteColor] set];
NSInteger fontSize = 25;
UIFont *font = [UIFont boldSystemFontOfSize: fontSize];

[text drawInRect:aRectangle withFont:font lineBreakMode:NSLineBreakByWordWrapping alignment:NSTextAlignmentCenter];

UIImage *theImage=UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```*  ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T02:54:00.247

可以使用方法： sizeWithFont:constrainedToSize:lineBreakMode 获取文本大小，然后计算左上点并使用drawAtPoint绘制文本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T04:16:12.350

使用此方法：

```
 -(UIImage *)imageFromText:(NSString *)text
{
  CGSize maximumSize = CGSizeMake(300, 1000); //set width for string to wrap.
  UIFont *font = [UIFont boldSystemFontOfSize:16];
  CGSize strSize = [text sizeWithFont:font constrainedToSize:maximumSize lineBreakMode:UILineBreakModeWordWrap];
  if (UIGraphicsBeginImageContextWithOptions != NULL)
    UIGraphicsBeginImageContextWithOptions(strSize,NO,0.0);
  else
    // iOS is < 4.0 
    UIGraphicsBeginImageContext(strSize);

  CGRect newframe = CGRectMake(0, 0, strSize.width, strSize.height);
  [text  drawInRect:newframe 
                  withFont:font 
             lineBreakMode:UILineBreakModeWordWrap 
                 alignment:UITextAlignmentLeft]; 
  UIImage *testImg = UIGraphicsGetImageFromCurrentImageContext();
  UIGraphicsEndImageContext();    
  return testImg;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T20:32:31.847

我发现这段代码对我的问题非常有帮助。

 **```
- (UIImage *)addText:(UIImage *)img text:(NSString *)text1{
    int w = img.size.width;
    int h = img.size.height;
    //lon = h - lon;
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = CGBitmapContextCreate(NULL, w, h, 8, 4 * w, colorSpace, kCGImageAlphaPremultipliedFirst);

    CGContextDrawImage(context, CGRectMake(0, 0, w, h), img.CGImage);
    CGContextSetRGBFillColor(context, 0.0, 0.0, 1.0, 1);

    char* text  = (char *)[text1 cStringUsingEncoding:NSASCIIStringEncoding];// "05/05/09";
    CGContextSelectFont(context, "Arial", 18, kCGEncodingMacRoman);
    CGContextSetTextDrawingMode(context, kCGTextFill);
    CGContextSetRGBFillColor(context, 255, 255, 255, 1);

    //rotate text
    CGContextShowTextAtPoint(context, 0, 5, text, strlen(text));

    CGImageRef imageMasked = CGBitmapContextCreateImage(context);
    CGContextRelease(context);
    CGColorSpaceRelease(colorSpace);

    return [UIImage imageWithCGImage:imageMasked];
} 
```***

# c - 当它只接受 const void * 类型参数时，如何通过 write() 调用传递“double”？

> ID：12487759
> 
> 赞同：0
> 
> 时间：2012-09-19T02:28:01.120
> 
> 标签：c, linux, unix, pointers

鉴于`double temp = 6.5;`我如何将它传递给 UNIX [write()](http://www.tutorialspoint.com/unix_system_calls/write.htm)系统调用：

`write(fd[1], (WTF?), 100)`

1.  `fd[1]`是一个文件描述符。
2.  `100`是一个固定的缓冲区大小来处理大数值，以防万一。

我在中间放什么？我已经尝试了**itoa**，**&temp**，***temp**，**(char) temp**和其他一些方法，通过谷歌搜索不同的解决方案，但到目前为止没有运气。老实说，我什至不知道**const void ***是什么类型。我只知道如果我将诸如“Hello World”之类的字符串直接传递给第二个参数，它将停止抱怨。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T02:40:51.610

第二个参数 to`write`是指向内存中某个位置的指针，第三个参数是要写入文件的内存中该位置的字节数。所以你的代码是：

```
double temp = 6.5;
write(fd[1], &temp, sizeof(temp)); 
```

不过，我不确定这是否正是您想要的。需要明确的是，这会将您的二进制表示写入`double`文件。在大多数平台上，这将是以下一系列字节（此处以十六进制表示）：

```
00 00 00 00 00 00 26 64
```

如果这应该是一个文本文件，那么您需要先将您的数字转换为字符串。

```
double temp = 6.5;
char buffer[20];
sprintf(buffer, "%g", temp);
write(fd[1], buffer, strlen(buffer)); 
```

这会将“6.5”写入您的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T02:37:38.073

如果您不介意将二进制数据写入文件，请尝试

`write(fd[1], &temp, sizeof(temp));`

如果您确实想将值写入文本文件，则需要先将其转换为字符串。如果是这种情况，您可以尝试以下方法：

```
#define BUFF_SIZE 100

double temp = 17.5;
char* str[BUFF_SIZE];

sprintf(str, "%lf", temp);

write(fd[1], str, strlen(str)); 
```

# c# - 从 linq 到 xml 只选择一个随机节点

> ID：12487763
> 
> 赞同：2
> 
> 时间：2012-09-19T02:28:30.610
> 
> 标签：c#, xml, linq, var

我有一个 XML 文件，我只想选择一个随机节点。好像我快到了，但是带有 var 的 foreach 正在循环。如何只选择一个节点并返回它？

XML:

```
<human_check>
  <qa>
    <q>2 + 2</q>
    <a>4</a>
  </qa>
  <qa>
    <q>1 + 2</q>
    <a>3</a>
  </qa>
  <qa>
    <q>6 + 3</q>
    <a>9</a>
  </qa>
  <qa>
    <q>3 + 5</q>
    <a>7</a>
  </qa>
</human_check> 
```

C＃

```
public class human_check
{

    public static string get_q()
    {
        try
        {
            string h = string.Empty;
            Random rnd = new Random();
            XDocument questions = XDocument.Load(@"C:\Users\PETERS\Desktop\human_check.xml");
            var random_q = from q in questions.Descendants("qa")
                           select new
                           {
                               question = q.Descendants("q").OrderBy(r => rnd.Next()).First().Value
                           };

            foreach (var rq in random_q)
            {
                h = rq.question.ToString();
            }

            return h;

        }
        catch (Exception ex)
        {
            throw ex;
        }
    }

} 
```

提前致谢，

EP

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T02:59:44.293

您可以选择一个随机元素，而不是设置排序。

```
var qas = questions.Descendants("qa");
int qaCount = qas.Count();
h = qas.ElementAt(rnd.Next(0, qaCount - 1)).Element("q").Value; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T02:52:20.483

```
var random_q = (from q in questions.Descendants("qa")
                select q).OrderBy(r => rnd.Next()).First();

h = random_q.Descendants("q").SingleOrDefault().Value.ToString(); 
```

# java - Java 递归三角形站在技巧上

> ID：12487764
> 
> 赞同：0
> 
> 时间：2012-09-19T02:28:32.697
> 
> 标签：java, recursion, geometry

我想知道如何用星号在其尖端而不是在其底部创建三角形。

我有让它站在它的基础上的代码：

```
 public static String printTriangle (int count) 
{
    if( count <= 0 ) return "";

    String p = printTriangle(count - 1);
    p = p + "*";
    System.out.print(p);
    System.out.print("\n");

    return p;
 } 
```

但是后来我被困在如何让最多的星星在顶部，然后是下一个，依此类推。我在考虑让 (count - p) 从减少量中减去行的输入，但后来我被这个想法弄糊涂了，因为 p 是字符串。

编辑：我尝试使用原始方法更改 printTriangle(count - 1) 的位置而无需迭代，每行获得 1 颗星；我怎样才能解决这个问题？

```
public class triangles 
{
public static void main(String[] args)
{
    printTriangle(5);
}
public static String printTriangle (int count) 
{
    if( count <= 0 ) return "";
      String p = "";
    p = p + "*";
    System.out.print(p);
    System.out.print("\n");
     p = printTriangle(count - 1);
    return p;

         }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T02:40:45.577

对我来说，您似乎在递归函数中缺少一个循环，以便在 *s 上为每一行添加正确的数字。

```
 public static String printTriangle (int count) 
  {
      if( count <= 0 ) return "";

      String p = printTriangle(count - 1);
      for (int i=0; i<count; i++)
      {
        p = p + "*";
      }

      p += "\n";
      return p;
   } 
```

并调用代码看起来像

```
String triangle = printTriangle(4);
System.out.println(triangle); 
```

它产生

```
*
**
***
**** 
```

此外，我会为此使用 StringBuilder 而不是字符串。

只是重读你的问题。

在你追求这样的三角形之后

```
****
***
**
* 
```

您需要在调用递归时进行更改。

IE

```
 public static String printTriangle (int count) 
  {
      if( count <= 0 ) return "";

      String p="";
      for (int i=0; i<count; i++)
      {
        p = p + "*";
      }

      p += "\n";
      return p + printTriangle(count - 1);
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T03:02:03.273

@Leon，尽管您的回答是正确的，但它错过了他的部分问题。

编辑：@Leon，看来您已经更新了答案。我的不再需要了。

对于站立在其尖端的三角形，请尝试以下操作

```
public static String printTriangle (int count) 
{
  if( count <= 0 ) return "";

  String p = "";
  for (int i=0; i<count; i++)
  {
    p = p + "*";
  }
  p += "\n";

  p += printTriangle(count - 1)

  return p;
} 
```

# c# - C# 创建用户控件而不创建新项目

> ID：12487766
> 
> 赞同：1
> 
> 时间：2012-09-19T02:28:53.570
> 
> 标签：c#, visual-studio

如何仅在当前项目上创建新文件来创建新的用户控件（我的意思是我们不必创建新的类库项目）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T02:32:47.297

右键单击当前项目并选择“添加->新建项目”。选择“Visual C# 项目”，然后选择“用户控件”。

# java - 获取 NIO.2 服务器中客户端的 IP 地址列表

> ID：12487770
> 
> 赞同：0
> 
> 时间：2012-09-19T02:29:28.857
> 
> 标签：java, networking, asynchronous, synchronization, nio

在基于 AsynchronousServerSocketChannel 和 AsynchronousSocketChannel 的服务器中，如何检查来自给定 IP 地址的连接是否已经存在？我想向来自已经连接的 IP 地址的连接发送特定消息（要求它稍后再试；我正在处理非常特定的客户端 LAN，如果共享而不是被迫使用带宽将得不到充分利用由服务器序列化）。但是，我看不到获取 IP 地址列表来搜索相同 IP 地址是否已经有连接的方法。除了将每个新连接的 IP 地址插入到 ConcurrentSkipListSet 之类的东西（并在关闭时将其删除）之外，还有更优雅/有效的方法吗？

此外，我想定期从所有打开的连接中收集一些网络统计信息（例如，上传了多少文件块）。我想出的唯一有效地做到这一点的方法是使用 ConcurrentLinkedQueue 从完成处理程序（发送块发送网络写入）向信息收集线程发送更新，每当有东西插入队列时唤醒线程。我假设唤醒操作是非阻塞的，但我不知道它可能有多昂贵，因为我确信它至少涉及一个互锁的 CPU 指令（这意味着内存围栏并进一步影响执行速度ETC。）。还有其他建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:54:08.963

您将不得不维护自己的数据结构。所有 TCP 将给您的是套接字，您可以从中获取它们的远程地址和端口。

# google-analytics - Google Analytics - 不在 IE 中跟踪

> ID：12487771
> 
> 赞同：0
> 
> 时间：2012-09-19T02:29:39.897
> 
> 标签：google-analytics

我有一个站点 URL：`<removed after answering>` 它被映射为在 facebook 上显示为应用程序：

我可以在除 IE 之外的所有浏览器上跟踪 app.facebook 网址和直接网址上的参与情况。我尝试了互联网上人们的不同解决方案，但似乎都没有奏效。

您可以查看页面的来源以查看分析设置。难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:42:27.483

解决了这个问题。在来自：www.savio.no/blogg/a/104/how-to-track-facebook-iframes-with-google-analytics 的帮助下，我尝试了 asp.net 的解决方案，它奏效了。显然，cookie 似乎没有按预期设置。

# c# - 如何在 C# 中更好地组织我的代码？

> ID：12487774
> 
> 赞同：0
> 
> 时间：2012-09-19T02:29:59.540
> 
> 标签：c#, user-interface

我正在用 C# 编写我的第一个 GUI 和我的第一个程序。我的 GUI 有几十个菜单选项，其中大部分都有非常简单的例程，例如

```
private void menuItem54_Click(object sender, EventArgs e)
{
  button1.Text = menuItem54.Text;
  functionFoo(menuItem54.Text);
} 
```

所以我的问题是，我可以以某种方式将所有这些函数放在另一个文件中并将它们包含在我的主程序中吗？这就是为什么我的主 .cs 文件没有杂乱无章的原因？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T02:32:12.880

是的你可以。

只需做基本的 OOP 并基于对象创建类文件。

您可以在此处了解有关[OOP 和 SOLID 原理的更多信息。](http://butunclebob.com/ArticleS.UncleBob.PrinciplesOfOod)

因此，对于您的示例，也许您可​​以为菜单创建一个界面。

并创建使用相同界面的不同菜单对象。

```
public interface IMenu{
string functionFoo();
}

public class Menu54 : IMenu {
public string Text { get; set;}
public string functionFoo(){
return Text;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T02:35:20.130

您可能会为您的应用程序考虑 MVVM 模式。阅读更多： http: [//www.codeproject.com/Articles/165368/WPF-MVVM-Quick-Start-Tutorial](http://www.codeproject.com/Articles/165368/WPF-MVVM-Quick-Start-Tutorial)

# visual-studio-2010 - 为什么我的 Git Extensions Graph 完全是灰色的，我该如何解决？

> ID：12487783
> 
> 赞同：3
> 
> 时间：2012-09-19T02:31:18.583
> 
> 标签：visual-studio-2010, git, repository, bitbucket, git-extensions

我正在使用带有 Visual Studio 2010 的 Git 扩展。我的存储库在 Bitbucket 上，我正在使用 SSH 和 PuTTY 来推/拉。

当我打开我的项目并单击浏览存储库时，我看到的第一件事是一个带有这样开头的消息的窗口（以及“编辑 .gitignore”和“提交”的两个按钮）：

> 尚未对此存储库进行任何提交。
> 
> 如果这是一个普通的存储库，建议执行以下步骤： - 确保你的存储库中有一个正确的 .gitignore 文件 - 使用 commit 提交文件
> 
> 如果这是一个中央存储库（没有工作目录的裸存储库）： - 从另一个存储库推送更改

我的工作目录（在下拉列表中）设置为我计算机上的本地文件夹，当前分支是“master”（也在下拉列表中）。我可以推送、拉取和提交更改，它们将显示在 bitbucket 中，但图表不显示。

Git Extensions 窗口右侧还有另一个下拉菜单，其中包含“Branches:”作为标签。如果我从“分支：”下拉菜单中选择“主”，那么我会看到图表，但一切都是灰色的。

我尝试删除我的本地存储库并从 bitbucket 重新克隆它，但没有任何改变。

该图看起来就像我正在浏览远程存储库一样......所有分支和节点都是灰色的。

此外，我将远程存储库克隆为个人存储库……而不是中央存储库……当我第一次创建远程存储库时，我将其作为中央存储库。

这似乎不是一个常见的问题......或者我不知道在谷歌上搜索什么。

提前致谢。

编辑：

此链接[http://www.youtube.com/watch?v=cFbCusX9bKs](http://www.youtube.com/watch?v=cFbCusX9bKs)上的视频创建的存储库与我最初所做的不同......当我尝试它时它的工作方式......不同之处在于您将一个新的空 Bitbucket 存储库克隆到一个空目录作为个人存储库，然后将所有项目文件放入该文件夹并提交，然后推送到 Bitbucket.......

可能是我的问题是我从现有项目创建了一个中央存储库，然后将其推送到 Bitbucket .....我希望这对其他人有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:04:55.697

此链接[http://www.youtube.com/watch?v=cFbCusX9bKs](http://www.youtube.com/watch?v=cFbCusX9bKs)上的视频创建的存储库与我最初所做的不同......当我尝试它时它的工作方式......不同之处在于您将一个新的空 Bitbucket 存储库克隆到一个空目录作为个人存储库，然后将所有项目文件放入该文件夹并提交，然后推送到 Bitbucket.......

# php - simplexml_load_string 不适用于肥皂响应

> ID：12487787
> 
> 赞同：2
> 
> 时间：2012-09-19T02:31:55.583
> 
> 标签：php, xml, web-services, xml-parsing

我正在尝试解析来自肥皂服务的 xml 响应。但是，我无法让 simplexml_load_string 工作！这是我的代码：

```
//make soap call
objClient = new SoapClient('my-wsdl',
    array('trace' => true,'exceptions' => 0, 'encoding' => 'UTF-8'));
$soapvar = new SoapVar('my-xml', XSD_ANYXML);
$objResponse = $objClient->__soapCall($operation, array($soapvar));

//process result
$str_xml = $objClient->__getLastResponse();
$rs_xml = simplexml_load_string($str_xml); 
```

...$rs_xml 总是只有一个名为 Envelope 的元素。

但是，如果我使用 *"print var_export($objClient->__getLastResponse(),true);"* 将结果转储到我的浏览器，然后将其作为字符串变量剪切并粘贴到我的代码中，它可以正常工作！这就是我的意思：

```
$str_xml = 'my cut and pasted xml';
$rs_xml = simplexml_load_string($str_xml); 
```

因此，问题似乎与 $objClient->__getLastResponse() 对其创建的字符串所做的某些事情有关......但我不知道问题是什么或如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T04:31:33.457

请执行下列操作：

```
$str_xml = $objClient->__getLastResponse();    
$str_xml = strstr($str_xml, '<');
$rs_xml = simplexml_load_string($str_xml); 
```

因为在第一个打开元素之前剥离东西是一种快速简便的技巧。

# git - 当还有第二次更新的评论时如何修改 Gerrit 中的评论问题

> ID：12487791
> 
> 赞同：18
> 
> 时间：2012-09-19T02:32:10.253
> 
> 标签：git, gerrit

仍在尝试学习如何使用 Gerrit 及其过程。我在哪里做的步骤

1.  首先推`change1`送到 gerrit 以审查 HEAD:refs/for/develop
2.  在同一分支上处理其他事情并推`change2`送到 gerrit 以供 HEAD 审查：refs/for/develop

两个提交都有 gerrit Change-ID 行

所以现在我想解决问题，`change1`所以我做到了

```
git checkout -b change1 <change 1's commit id> 
```

进行更改并提交（将更改 ID 添加到提交消息中）

```
git add .
git commit 
```

现在当我做

```
git push origin HEAD:refs/for/develop 
```

我明白了

```
 ! [remote rejected] HEAD -> refs/for/develop (squash commits first)
error: failed to push some refs to 'ssh://adrian@192.168.7.100:29418/CommunicationsLibrary' 
```

如何解决堆积评论中的问题并将其发布到 gerrit 而无需创建另一个评论？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-19T02:55:22.670

当您在 Gerrit 中有依赖评审（即评审中的一个更改依赖于同时处于评审中的较早更改），并且您需要对较早的更改进行修改时，您实际上必须重新提交这两个更改（因为第二个更改取决于不同的“父”提交）

所以情况是您在主开发分支的一个分支中有两个提交，如下所示：

```
o master
\
 o Commit A (in review, requires change)
 o Commit B (in review, no changes required) 
```

在这种情况下，我通常做的是在第三次提交中对提交 A 进行请求的更改。我们的提交图现在看起来像这样：

```
o master
\
 o Commit A (in review, requires change)
 o Commit B (in review, no changes required)
 o Commit C (modifications to Commit A) 
```

现在我将`git rebase -i master`提交 C 重新排序到提交 A 之后但在提交 B 之前，然后将其压缩到提交 A 中。提交图现在看起来像这样：

```
o master
\ 
 o Commit A' (Commit A, incorporating the changes from Commit C)
 o Commit B' (the same changes made in Commit B, but applied to Commit A' instead of A) 
```

最后，`git review`（或您用来向 gerrit 提交更改的任何命令）将两个提交重新提交给 Gerrit。

正是由于这样的复杂性，大多数人强烈建议在单独的分支中处理每个不同的更改，然后在提交给 Gerrit 之前压缩成一个提交，而不是需要处理这些类型的情况，即您需要审查相关的更改同时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T03:17:21.020

我认为您的问题与第一次提交的修改现在将第二次提交作为依赖项有关。这是我个人会做的，但可能有更好的方法。我看着它，因为你想重新调整你的提交方式并且你正在处理最后 3 个。所以运行'git rebase -i HEAD~3'。这允许您通过切换顺序或将它们相互融合来重新调整最后 3 次提交。您应该知道它以最旧的优先顺序列出提交。这是一个例子：

git日志如下：

提交信息：......

消息：foo2

提交信息：......

消息：bar1

提交信息：......

消息：foo1

运行上述命令后，编辑器应弹出以下内容：

选择 foo1。

选择栏1。

选择 foo2。

（这是假设您的第二次 foo 更改没有更改 bar1 更改的任何文件，因为这可能不起作用，如果您这样做了，您应该已经修改了提交。）然后将列表更改为：

选择 foo1

修复 foo2

选择栏1

之后，您将 foo1 和 foo2 压缩为一个提交，而 bar1 将是以下提交。然后我会运行'git reset --soft HEAD~1'来重置最新的提交，然后是'git commit --amend'，它允许你更改第一次审查的提交消息并确保包含change-id . 然后试试你的推。之后，您应该设置一个新补丁，并且第二次更改的所有文件都将被修改，并且仍然在您的工作目录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-15T06:49:18.480

称呼

```
commit --ammend 
```

而不是你的第二次改变

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-23T10:53:08.013

情况与@Trevor 解释的完全一样。`rebase -i`当你有这种情况时，这是一个很好的方法。

就个人而言，我也使用这个命令，但有一点不同：

**1\. 使用 --fixup 和 --autosquash**

你有两个提交：

```
old commit
new commit 
```

当您想更改旧提交时，然后

```
 git commit --fixup <old_commit_id> 
```

然后用 autosquash 变基，

```
git rebase -i --autosquash <commit_id_before_old_commit> 
```

如果不清楚我的评论，您可以查看详细信息： [https ://fle.github.io/git-tip-keep-your-branch-clean-with-fixup-and-autosquash.html](https://fle.github.io/git-tip-keep-your-branch-clean-with-fixup-and-autosquash.html)

*或者*

**2\. 利用 Gerrit**

在您提交两个更改后，您**的 GUI 上将有两个公开评论**更改。

然后转到您的“旧更改”，选择**下载->签**出此更改，实际上在您签出后，您将转到此更改的分支，然后修复您的代码，修改，变基，推送......就像您所做的那样通常。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-01-05T09:44:48.553

只需 git commit --amend 然后 git review

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2017-05-19T10:20:22.737

我尝试了这些尝试

1.  git rebase -i master
    没用
2.  然后最后我做了什么，我备份了文件。删除了整个项目。然后再次克隆它。从备份中将文件粘贴到所需文件夹中，然后再次重新提交，然后推送。有效 。

# javascript - 覆盖 jQuery 函数 - 最佳实践

> ID：12487794
> 
> 赞同：3
> 
> 时间：2012-09-19T02:32:26.823
> 
> 标签：javascript, jquery, html, jquery-plugins, decorator

我的 Web 应用程序使用了许多 JQuery 插件，例如 Datatables，以及相应的 Row Reordering 和 Sorting 插件。

问题是我们需要添加一些修复来解决恼人的 IE8 不一致问题。

因此，例如，在插件 _mouseDrag() 方法之一中，我们需要在开始时添加一些额外的逻辑。有没有办法在不修改插件源代码的情况下覆盖这个函数？

在 OO 语言中，您通常会覆盖类方法，添加一些逻辑，然后调用 super() 方法以避免修改 API 的源代码。

因此，我想知道如何在不修改库本身的情况下在 JavaScript 中最好地支持这一点。

谢谢

**更新的问题**

根据下面的示例，如何覆盖我的 _mouseDrag 函数，该函数在 3rd 方库中如下所示：

```
(function( $, undefined ) {

$.widget("ui.sortable", $.ui.mouse, {

_mouseDrag: function (event){

...

} 
```

我该如何准确地覆盖它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T02:38:34.197

试试这个（见演示：http: [//jsfiddle.net/2rZN7/](http://jsfiddle.net/2rZN7/)）：

```
(function ($) {
  var oldPluginFunction =  $.fn.pluginFunction;

  $.fn.pluginFunction = function () {
    // your code
    return oldPluginFunction.call(this);
  };
})(jQuery); 
```

*从演示：*

HTML：

```
<span id="text1">text1</span>
<span id="text2">text2</span> 
```

JavaScript：

```
// define and use plugin

$.fn.pluginFunction = function (color) {
  return this.each(function () {
    $(this).css('color', color);
  });
};

$('#text1').pluginFunction('red');

// redefine and use plugin

(function ($) {
  var oldPluginFunction =  $.fn.pluginFunction;

  $.fn.pluginFunction = function () {
    $(this).css('font-size', 24)
    return oldPluginFunction.apply(this, arguments);
  };
})(jQuery);

$('#text2').pluginFunction('red'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-15T05:08:33.183

您可以通过在单独的文件中对其进行原型化来覆盖插件方法，而无需修改原始源文件，如下所示：

```
(function ($) {
    $.ui.draggable.prototype._mouseDrag = function(event, noPropagation) {

         // Your Code
    },

    $.ui.resizable.prototype._mouseDrag = function(event) {
            // Your code
    }   
}(jQuery)); 
```

现在将您的逻辑或带有项目所需的新想法的原始代码放在这里。

# iphone - 从一个 ViewController 获取数据到另一个 ViewController

> ID：12487800
> 
> 赞同：0
> 
> 时间：2012-09-19T02:33:08.887
> 
> 标签：iphone, ios, ipad

我正在为 ipad 编写应用程序。我创建了一个 PopViewController 作为弹出菜单，并在用户单击 actionButton 时在 ThirdViewConroller 中使用以下语句。

```
// set UIPopupoverController   
-(IBAction)actionButton:(id)sender
{
  if([popupCtr isPopoverVisible])
  {
    [popupCtr dismissPopoverAnimated:YES];

  }else
  {

    [popupCtr setPopoverContentSize:CGSizeMake(500, 500)];
    [popupCtr presentPopoverFromBarButtonItem:sender     permittedArrowDirections:UIPopoverArrowDirectionAny     animated:YES];

  }
} 
```

**ThirdViewController 有一个 UIWebView。我想将用户在 UIWebView 中选择单词的数据传递给 PopViewController，然后我可以通过单击 PopViewController 中的按钮来使用这些数据。**比如ipad的mail-app中的按钮Reply、Reply All、Forward、Print等都是从邮件中获取数据的。

**我该怎么做？**

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:27:27.910

如果您希望一个对象能够从另一个对象获取或接收数据，则需要对该对象的引用。通常，其中一个对象创建另一个对象。那时你给它一个引用，所以它总是可以调用对象上的方法。

考虑对象“老板”和“工人”

*   **老板雇用工人。**（老板对象创建工人对象）
*   **老板告诉工人他是老板。**（Boss 对象调用 Worker 对象上的方法并为 boss 分配一个引用）。
*   **老板记得工人。**（Boss 对象在实例变量中存储对 Worker 对象的引用）
*   <<<<时间过去了……工人要加薪>>>
*   **工人要求老板加薪。**（Worker 对象使用对 Boss 对象的引用并在其上调用方法“askForRaise”。）
*   <<<<时间过去了……老板厌倦了懒惰的工人>>>
*   **老板解雇工人。**（Boss 对象使用 Worker 对象的实例变量并在其上调用方法“fire”）

3 个对象的概念几乎相同，您只需要更多参考。创建，分配参考，然后分道扬镳。每当他们需要稍后交谈时，您都可以使用参考资料。

# asp.net - 如何在异步结果到来之前处理 UpdatePanel

> ID：12487801
> 
> 赞同：1
> 
> 时间：2012-09-19T02:33:11.460
> 
> 标签：asp.net

好的，我更新我的问题。我可以使用 UpdatePanel 来处理这种方式。您知道，ContentTemplate 中的所有内容都是异步的，但我们如何在结果到来之前处理结果。喜欢

```
<asp:UpdatePanel>
    <ContentTemplate>
        <asp:Button ID="Button1" runat="server" Text="Button" /><asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
<asp:Label ID="info" runat="server" />
    </ContentTemplate>
</asp:UpdatePanel> 
```

当我们点击按钮时，它会在后端查询数据库，这需要一些时间，也许几秒钟，也许更长。现在我怎样才能让信息标签显示“查询”，表明后端处理，访问者应该等待一段时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T03:24:07.613

使用 ProgressTemplate 使用 ProgressTemplate 使用 ProgressTemplate 使用 ProgressTemplate

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T03:23:52.387

将更新进度添加到更新面板：

```
<asp:UpdatePanel id="myUpdatePanel">
    <ContentTemplate>
        <asp:Button ID="Button1" runat="server" Text="Button" /><asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
    </ContentTemplate>
    <asp:UpdateProgress ID="UpdateProgress1" AssociatedUpdatePanelID="myUpdatePanel" runat="server">
        <ProgressTemplate>
            <asp:Label ID="info" runat="server" Text="querying..."/>
        </ProgressTemplate>
    </asp:UpdateProgress>
</asp:UpdatePanel> 
```

**[在MSDN](http://msdn.microsoft.com/en-us/library/bb398821%28v=vs.100%29.aspx)**上查看更多选项和示例。

# hibernate - 访问 grails/hibernate 为域类生成的 SQL

> ID：12487802
> 
> 赞同：11
> 
> 时间：2012-09-19T02:33:14.050
> 
> 标签：hibernate, grails, grails-orm, jdbctemplate

在我的 grails (1.3.7) 应用程序中，我使用 JDBC 模板从 CSV 文件中批量导入 1000 条记录（因为它比使用 vanilla GORM/hibernate 快得多，正如您所期望的那样）。

例如

```
class Book {
    String title
} 
```

和

```
// For each CSV record...
insertStatementList.add("insert into book (id, title) values (nextval('hibernate_sequence'), thetitle)")
...
JdbcTemplate bulkInsert = ...
bulkInsert.batchUpdate(insertStatementList) 
```

这种方法的问题是域类的改变（例如添加一个`subject`属性）需要改变域类和 SQL 插入语句。

由于 GORM/hibernate 堆栈最终必须从域类定义派生 SQL，有没有办法访问此功能，以便我不必单独维护 SQL 插入语句？或者在伪代码中，可能类似于以下内容：

```
// would return something like:
// "insert into book (id, title) values (nextval('hibernate_sequence'), 'thetitle')"
def insertStatement = hibernate.getSqlInsertForClass(Book, book.properties) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T01:32:26.647

我对 grails 的了解还不足以说明其中是否有可能。我尝试通过列出类属性并动态组合它来生成 SQL 插入字段，但它出现故障。

您可以创建一个注释来定义该字段在 CSV 中的位置：

```
import java.lang.annotation.*

@Retention(RetentionPolicy.RUNTIME) @interface CSV { int position() }

class Product {
  @CSV(position=1) String description
  @CSV(position=3) BigDecimal price
  @CSV(position=4) Integer type
  @CSV(position=2) boolean soldout
} 
```

如果您需要多个映射（例如，为了支持您自己的旧 CSV），您应该考虑一个映射结构或一个 XML，这将与实体分离。

然后，您需要迭代字段以组成查询：

```
def csv = '''rice;10.0;3;false
beet;12.0;2;false
mango;22.0;2;true'''

def properties = Product.declaredFields
  .findAll { it.declaredAnnotations }
  .sort { it.declaredAnnotations[0].position() }

def templateQuery = "INSERT INTO product(#fields) VALUES (#values)"

csv.eachLine { line ->
  def fields = line.split( /;/ )
  def sqlFields = [:]

  fields.eachWithIndex { field, i ->
    sqlFields[properties[i].name] = field
  }

  println templateQuery
    .replace('#fields', sqlFields.keySet().join(","))
    .replace('#values', sqlFields.values().join(","))
} 
```

哪个打印：

```
INSERT INTO product(description,price,type,soldout) VALUES (rice,10.0,3,false)
INSERT INTO product(description,price,type,soldout) VALUES (beet,12.0,2,false)
INSERT INTO product(description,price,type,soldout) VALUES (mango,22.0,2,true) 
```

它非常原始，需要一些修饰，比如引号和一些反对 sql 注入的东西，但它的工作原理更像是一个概念证明。

在我工作的旧系统中，我们使用 jboss seam 并在我们使用 jpa 批处理的那些散装东西上，即在所有`persist()`完成后手动冲洗。你确定grails上没有类似的东西可以与gorm一起使用吗？

[此链接](http://www.intelligrape.com/blog/2009/09/09/batch-processing-in-grails/)显示了在 grails 中使用批量更新的博客文章，`withTransaction`同时使用了定期应用会话清除：

```
 List <Person> batch =[]
    (0..50000).each{
       Person person= new Person(....)
        batch.add(person)
        println "Created:::::"+it
        if(batch.size()>1000){
            Person.withTransaction{
                for(Person p in batch){
                    p.save()
                }
            }
            batch.clear()
        }
      session = sessionFactory.getCurrentSession()
      session.clear()             
    } 
```

你确定这行不通？如果没有，那么注释可能是一个解决方案。

由于java的驼峰式大小写和db中的下划线之间的差异，列命名也存在问题。在休眠状态下，该翻译背后的人是[I​​mprovementNamingStrategy](http://docs.jboss.org/hibernate/orm/3.2/api/org/hibernate/cfg/ImprovedNamingStrategy.html)。也许你可以从他那里得到一些东西。`@CSV`或者在注释中添加列名。听起来像回收 JPA :-)。

还有[log4jdbc](https://code.google.com/p/log4jdbc/)，但我认为它不会解决您的问题：您需要潜入休眠 sql 生成。

# php - PHP正则表达式以不同的方式获取html标签结尾

> ID：12487806
> 
> 赞同：3
> 
> 时间：2012-09-19T02:33:50.180
> 
> 标签：php, regex, operators

首先，对不起我的英语，它不好。

我有如下表。

```
 <table>
  <tr class="_in" id="1">
    <td>content</td>
    <td>content
         <h1>content h1</h1>
    </td>
  </tr>
  <tr class="_in" id="2">
    <td>content</td>
    <td>content
        <table>
            <tr>
                <td>content</td>
            </tr>
        </table>
    <h2>content h2</h2>
    </td>
  </tr>
  <tr class="_in" id="3">
    <td>content</td>
    <td>
            <table>
              <tr>
                <td>content</td>
              </tr>
            </table>
            <h3>content h3</h3>
    </td>   
  </tr>
  <tr class="_in" id="4">
    <td>content</td>
    <td>content
        <h1>content h3</h1>
    </td>
  </tr>
  <tr class="_in" id="5">
    <td>content</td>
    <td>content
        <h1>content h1</h1>
    </td>
  </tr>
</table> 
```

如您所见，我想使用正则表达式来获取 tr 具有 class="_in"，但在 tr 中有另一个表，并且在该表中有另一个 tr 标记。除此之外， tr 以多种方式结束 class="_in" 。如您所见，它可以以`</h1></td></tr>`or `</h2></td></tr>`or结尾`</h3></td></tr>`

我的解决方案是使用或运算符，但没有结果，下面是我的代码

```
$html=file_get_contents("vnair3.txt");
$parten='/<tr\sclass=\"_in\"[^>]*>.*(?:<\/h1>|<\/h2>|<\/h3>)\s+<\/td>\s+<\/tr>/isU';
preg_match_all($parten,$html,$output);
print_r($output); 
```

请帮我让每个 tr 标签对输出数组中的每个元素都有 class="_in" 。我使用 php。谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:42:20.680

首先，将 HTML 转换为 DOMDocument。

```
$dom = new DOMDocument::loadHTML($html_string); 
```

然后找到你所有的`<TR>`元素。

```
$trs = $dom->getElementsByTagName('tr') 
```

然后遍历它们

```
foreach($trs as $tr) {
    $classes = $tr->getAttribute('class');
    $classes .= " _tr ";
    $tr->setAttribute('class', $classes);
} 
```

然后导出字符串

```
$html = $dom->saveHTML() 
```

供参考：[http ://www.php.net/manual/en/class.domdocument.php](http://www.php.net/manual/en/class.domdocument.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T05:50:36.353

修改你的代码，你会在每个 tr 中得到 class="_in"

```
<?php
$html=file_get_contents('vnair3.txt');
$output=str_replace("<tr","<tr class='_in' ",$html,$count);
//echo $output;
print_r($output);
?> 
```

# javascript - 是否可以仅刷新表单？

> ID：12487807
> 
> 赞同：0
> 
> 时间：2012-09-19T02:34:05.050
> 
> 标签：javascript, jquery, ajax

我有一个表单，在提交时它会发布到 div。好的，所以我发现了我收到双重提交的问题，所以我尝试应用我发现的一些 jquery 插件，但它们没用，因为如果你双击速度足够快，我仍然会收到双重提交。从我发现的那些中，我看到了防止它的最好方法是

```
 if (this.beenSubmitted) return false;
 else
 this.beenSubmitted = true; 
```

但是后来，我注意到如果需要再次发送表单，用户必须刷新页面才能发送它。就我而言，我希望他们能够在发送后再次发送，（我并不自相矛盾，因为它会是不同的内容）。为了更好地解释它，这个表格发布了想法。如果您想发布 2 个不同的想法，您必须刷新页面才能发布。如果您单击得足够快，防止重复提交将有助于两次提交相同的想法。所以，我所做的是我添加了这个“5000”：

```
 if (this.beenSubmitted) return false, 5000;
 else
 this.beenSubmitted = true; 
```

所以，现在它刷新了我的页面。但是我有点挑剔，哈哈。所以我觉得整个页面必须刷新很烦人。如果您输入然后刷新怎么办。我总是可以降低我知道的 5000，但如果你开始浏览网站或放大，我仍然觉得它很烦人，你最终会刷新。

所以，我的问题是，有没有办法刷新表格？还是一种更好的方法来防止实际上适用于这种情况的双重提交（您可以在几秒钟后提交）？

这是脚本：

```
<script type="text/javascript">
$(document).ready(function(){
$("form#myform").submit(function() {
        var addcontent = jQuery('#addcontent').attr('value');

        if ( addcontent.replace(/\s/g,"") == "" ) return false;
        if (this.beenSubmitted) return false,5000;
            else
            this.beenSubmitted = true;

$.ajax({
type: "POST",
url: "post.php",
data:"addcontent="+ addcontent,
success: function(){blah blah blah, ton sof code here including pagintion here, insert into a div here also, if u need this let me know.
});
</script> 
```

大部分都是我在这里问questinos的。我的 Jquery 和 Ajax 知识不是最好的。

谢谢你的帮助=}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T03:19:44.667

[速率限制以防止 ExpressJS 中的恶意行为](https://stackoverflow.com/questions/9424422/rate-limiting-to-prevent-malicious-behavior-in-expressjs/9426395#9426395)

上面的链接有一些关于在提交按钮上放置一个计时器的内容，这样你就不能在 3 秒内再次点击它。

```
<script>
var submitTimer = new Collate(3000);
</script>
<form action="post" onsubmit="return submitTimer.idle();"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T02:38:31.617

你为什么不使用 this.beenSubmitted = true 方法并将它与超时结合起来？例如，在 5000 毫秒后，您执行超时并将 this.beenSubmitted 设置为 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T03:25:37.113

该声明：

```
 return false, 5000; 
```

将永远返回`5000`，使用`false`是多余且毫无意义的。

要在不重新加载页面的情况下重置表单（在某些浏览器中不一定会重置表单），请使用重置按钮或调用表单的重置方法。如果表单被重置，您可以使用[*onreset*](http://dev.w3.org/html5/spec/single-page.html#handler-onreset)侦听器来更新*beenSubmitted属性。*

自发明表单以来，表单的多次提交一直是一个问题，通常在服务器上处理（如果收到两个相同的请求，则忽略第二个）。

在客户端使用脚本是不可靠的，因为您不知道服务器在做什么，并且您必须猜测是否需要重新提交表单。

# java - else 语法错误

> ID：12487816
> 
> 赞同：-1
> 
> 时间：2012-09-19T02:36:28.560
> 
> 标签：java

每当我尝试使用 else 语句时，我都会不断收到错误消息：令牌“else”上的语法错误，请删除此令牌。这很烦人，因为我已经尝试按照我在大约 5 个不同示例中看到的完全复制它。而且我仍然无法在没有错误的情况下编写带有 else 条件的行。我认为从更大的角度来看，我做错了一定是因为我无法在任何地方成功地编写它！下面是我正在编译并想要使用它的实际代码。

```
 System.out.println("Enter start time");
 String startTime = console.nextLine();
 String [] tokens = startTime.split(":");
 double starttimeHours = Double.parseDouble(tokens[0]);
 double starttimeMinutes = Double.parseDouble(tokens[1]);{
   if (starttimeHours >=6 && starttimeHours <=9 );{
   int peaktimeWage = 4;}
   else 
```

谢谢大家，if else 语句现在有效。我已将代码更改为：

```
 System.out.println("Enter start time");
 String startTime = console.nextLine();
 String [] tokens = startTime.split(":");
 double starttimeHours = Double.parseDouble(tokens[0]);
 double starttimeMinutes = Double.parseDouble(tokens[1]);{
  if (starttimeHours >=6 && starttimeHours <=9 ){
  int peaktimeWages = 4;}
  else if  (starttimeHours >=1 && starttimeHours <=5 ){
  int peaktimeWages = 2;}

  else {int peaktimeWages = 3;}{
  System.out.println(peaktimeWages);

  }}}} 
```

现在我遇到的问题是代码的最后一行： System.out.println(peaktimeWages);

它一直说 peaktimeWages 无法解析为变量，但我并没有尝试将其解析为变量，我只是想将其打印出来。所以这个消息对我来说似乎是错误的。我也以与 System.out.println(peaktimeWages); 相同的方式打印了以前的代码。

只是跟变量不同，所以不知道为什么不接受。我认为问题必须来自上一段代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T02:37:34.190

您的语句末尾有一个错误的分号`if`：

```
if (starttimeHours >=6 && starttimeHours <=9 );{// <-semicolon before the brace 
```

这会过早地关闭您的`if`语句和下一个块，并且`else`不会像您希望的那样与`if`语句关联。由于`else`语句必须有相应的`if`语句，编译器会报错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T02:37:38.183

删除后立即删除分号`if` `)`

```
 if (starttimeHours >=6 && starttimeHours <=9 ){
   int peaktimeWage = 4;}
   else 
```

有分号终止 if 块，然后 else 将是无效的语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T02:37:37.817

if 的右括号后有一个分号：

```
if (starttimeHours >=6 && starttimeHours <=9 ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T02:38:48.603

看起来你可能过早地结束了你的`if`陈述。尝试`;`从此行中删除：

```
if (starttimeHours >=6 && starttimeHours <=9 );{ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T03:45:17.187

`double starttimeMinutes = Double.parseDouble(tokens[1]);{`这里的所有其他答案，加上你在子句之前还有一个左大括号`if`，所以我想我赢了...... :)

# scala - 通过 Scala 中的解析器线程化额外状态

> ID：12487827
> 
> 赞同：26
> 
> 时间：2012-09-19T02:37:48.273
> 
> 标签：scala, haskell, monads, scalaz, monad-transformers

## 我会给你前面的 tl;dr

我正在尝试使用[Scalaz 7](https://github.com/scalaz/scalaz)中的状态单子转换器通过解析器线程化额外的状态，并且在不编写*大量*方法`t m a -> t m b`版本的情况下做任何有用的事情时遇到了麻烦`m a -> m b`。

## 示例解析问题

假设我有一个包含嵌套括号的字符串，其中包含数字：

```
val input = "((617)((0)(32)))" 
```

我还有一个新的变量名流（在这种情况下是字符）：

```
val names = Stream('a' to 'z': _*) 
```

我想从流的顶部提取一个名称，并在解析它时将其分配给每个括号表达式，然后将该名称映射到表示括号内容的字符串，并将嵌套的括号表达式（如果有）替换为他们的名字。

为了使这一点更具体，这是我希望上面示例输入的输出看起来像的样子：

```
val target = Map(
  'a' -> "617",
  'b' -> "0",
  'c' -> "32",
  'd' -> "bc",
  'e' -> "ad"
) 
```

在给定的级别上，可能存在一串数字或任意多个子表达式，但这两种内容不会混合在一个括号表达式中。

为简单起见，我们假设名称流永远不会包含重复项或数字，并且始终包含足够的名称供我们输入。

## 使用带有一些可变状态的解析器组合器

[上面的例子是这个 Stack Overflow question](https://stackoverflow.com/q/12442615/334519)中解析问题的一个稍微简化的版本 。我用一个大致如下的解决方案[回答了这个问题：](https://stackoverflow.com/a/12443270/334519)

```
import scala.util.parsing.combinator._

class ParenParser(names: Iterator[Char]) extends RegexParsers {
  def paren: Parser[List[(Char, String)]] = "(" ~> contents <~ ")" ^^ {
    case (s, m) => (names.next -> s) :: m
  }

  def contents: Parser[(String, List[(Char, String)])] = 
    "\\d+".r ^^ (_ -> Nil) | rep1(paren) ^^ (
      ps => ps.map(_.head._1).mkString -> ps.flatten
    )

  def parse(s: String) = parseAll(paren, s).map(_.toMap)
} 
```

这还不错，但我更愿意避免可变状态。

## 我想要的是

Haskell 的[Parsec](http://hackage.haskell.org/package/parsec-3.1.3)库使将用户状态添加到解析器变得非常容易：

```
import Control.Applicative ((*>), (<$>), (<*))
import Data.Map (fromList)
import Text.Parsec

paren = do
  (s, m) <- char '(' *> contents <* char ')'
  h : t  <- getState
  putState t
  return $ (h, s) : m
  where
    contents
      =  flip (,) []
     <$> many1 digit
     <|> (\ps -> (map (fst . head) ps, concat ps))
     <$> many1 paren

main = print $
  runParser (fromList <$> paren) ['a'..'z'] "example" "((617)((0)(32)))" 
```

这是我上面的 Scala 解析器的一个相当简单的翻译，但没有可变状态。

## 我试过的

我正在尝试使用 Scalaz 的状态单子转换器尽可能接近 Parsec 解决方案，所以`Parser[A]`我正在使用`StateT[Parser, Stream[Char], A]`. 我有一个“解决方案”，允许我编写以下内容：

```
import scala.util.parsing.combinator._
import scalaz._, Scalaz._

object ParenParser extends ExtraStateParsers[Stream[Char]] with RegexParsers {
  protected implicit def monadInstance = parserMonad(this)

  def paren: ESP[List[(Char, String)]] = 
    (lift("(" ) ~> contents <~ lift(")")).flatMap {
      case (s, m) => get.flatMap(
        names => put(names.tail).map(_ => (names.head -> s) :: m)
      )
    }

  def contents: ESP[(String, List[(Char, String)])] =
    lift("\\d+".r ^^ (_ -> Nil)) | rep1(paren).map(
      ps => ps.map(_.head._1).mkString -> ps.flatten
    )

  def parse(s: String, names: Stream[Char]) =
    parseAll(paren.eval(names), s).map(_.toMap)
} 
```

这行得通，而且它并不比可变状态版本或 Parsec 版本简明多少。

但我`ExtraStateParsers`的丑陋如罪——我不想比我已经拥有的更多地尝试你的耐心，所以我不会在这里包含它（虽然[这里有一个链接](https://gist.github.com/3747234)，如果你真的想要的话）。我必须为我的和类型（、、和，以防你计算）编写上面使用的每个`Parser`和方法的新版本。如果我需要使用其他组合器，我也必须编写它们的新状态转换器级版本。`Parsers``ExtraStateParsers``ESP``rep1``~>``<~``|`

有没有更清洁的方法来做到这一点？我很想看到一个 Scalaz 7 的状态 monad 转换器用于通过解析器线程化状态的示例，但 Scalaz 6 或 Haskell 示例也将很有用和赞赏。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-22T14:26:43.470

可能最通用的解决方案是重写 Scala 的解析器库以在解析时适应单子计算（就像您部分所做的那样），但这将是一项相当费力的任务。

我建议使用[ScalaZ](http://scalaz.github.com/scalaz/)的[State](http://scalaz.github.com/scalaz/scalaz-2.9.1-6.0.4/doc/index.html#scalaz.State)的解决方案，其中我们的每个结果都不是 type 的值`Parse[X]`，而是 type 的值`Parse[State[Stream[Char],X]]`（别名为`ParserS[X]`）。所以整体解析结果不是一个值，而是一个单子状态值，然后在 some `Stream[Char]`. 这几乎是一个单子变压器，但我们必须手动进行提升/卸载。它使代码有点难看，因为我们有时需要提升值或在几个地方使用`map`/ `flatMap`，但我相信它仍然是合理的。

```
import scala.util.parsing.combinator._
import scalaz._
import Scalaz._
import Traverse._

object ParenParser extends RegexParsers with States {
  type S[X] = State[Stream[Char],X];
  type ParserS[X] = Parser[S[X]];

  // Haskell's `return` for States
  def toState[S,X](x: X): State[S,X] = gets(_ => x)

  // Haskell's `mapM` for State
  def mapM[S,X](l: List[State[S,X]]): State[S,List[X]] =
    l.traverse[({type L[Y] = State[S,Y]})#L,X](identity _);

  // .................................................

  // Read the next character from the stream inside the state
  // and update the state to the stream's tail.
  def next: S[Char] = state(s => (s.tail, s.head));

  def paren: ParserS[List[(Char, String)]] =
    "(" ~> contents <~ ")" ^^ (_ flatMap {
      case (s, m) => next map (v => (v -> s) :: m)
    })

  def contents: ParserS[(String, List[(Char, String)])] = digits | parens;
  def digits: ParserS[(String, List[(Char, String)])] =
    "\\d+".r ^^ (_ -> Nil) ^^ (toState _)
  def parens: ParserS[(String, List[(Char, String)])] =
    rep1(paren) ^^ (mapM _) ^^ (_.map(
        ps => ps.map(_.head._1).mkString -> ps.flatten
      ))

  def parse(s: String): ParseResult[S[Map[Char,String]]] =
    parseAll(paren, s).map(_.map(_.toMap))

  def parse(s: String, names: Stream[Char]): ParseResult[Map[Char,String]] =
    parse(s).map(_ ! names);
}

object ParenParserTest extends App {
  {
    println(ParenParser.parse("((617)((0)(32)))", Stream('a' to 'z': _*)));
  }
} 
```

* * *

**注意：**我相信您的方法在`StateT[Parser, Stream[Char], _]`概念上并不正确。该类型表示我们正在构建一个给定状态（名称流）的解析器。因此，给定不同的流，我们可能会得到不同的解析器。这不是我们想要做的。我们只希望解析*结果*取决于名称，而不是*整个解析器*。这种方式`Parser[State[Stream[Char],_]]`似乎更合适（Haskell 的 Parsec 采用了类似的方法，state/monad 在解析器内部）。

# javascript - “建立连接之前关闭WebSocket”是什么意思？

> ID：12487828
> 
> 赞同：40
> 
> 时间：2012-09-19T02:37:48.260
> 
> 标签：javascript, websocket

我正在使用 JavaScript 和[Union 平台](http://www.unionplatform.com)我将如何诊断这个问题？非常感谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-19T22:10:38.053

如果您访问[http://jsbin.com/ekusep/6/edit](http://jsbin.com/ekusep/6/edit)并查看 JavaScript 控制台，您将看到“WebSocket 在建立连接之前已关闭”的记录。我已经在 Chrome 中对此进行了测试。

在这段代码中，它的意思是`ws.close()`在连接建立之前（由用户代码）调用。

因此，此错误的原因是代码在有机会实际连接之前尝试关闭 WebSocket 连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-12-16T14:39:25.007

对于进来寻找答案的其他人，除了上面提到的@leggetter，就我而言，事实证明我在建立连接时丢失了*端口号。*如果有帮助，我正在使用 socket.io。

```
http://websocket.service:8000 
```

# sql - postgresql 语法错误？

> ID：12487831
> 
> 赞同：0
> 
> 时间：2012-09-19T02:38:15.897
> 
> 标签：sql, postgresql

我无法识别此查询的语法错误，语法错误在哪里？

```
select c_name, c_address, c_mktsegment , count(*) as cnt customer join orders on c_custkey=o_custkey 
where
(c_name like %r% AND c_address like %a%) OR c_mktsegment like ='%t%'   
group by c_name, c_address, c_mktsegment having count(*)>2; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T02:39:50.087

一个错误是您在此处缺少引号：

```
(c_name like %r% AND c_address like %a%) 
```

应该：

```
(c_name like '%r%' AND c_address like '%a%') 
```

* * *

评论中提到的另一个问题是您错过了 FROM 关键字：

```
select c_name, c_address, c_mktsegment , count(*) as cnt customer 
```

应该：

```
SELECT c_name, c_address, c_mktsegment , count(*) as cnt
FROM customer 
```

* * *

也可能有其他错误。但是您可以确定这两个问题实际上*都是*问题，并且*确实*需要解决。我强烈建议您在进一步调查任何其他问题之前修复它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:53:33.257

我在 Mark Byers 给出的答案中再补充一件事是

**您不能将 = 与 like 运算符一起使用**

`OR c_mktsegment like ='%t%`所以你必须**用** `OR c_mktsegment like '%t%'`

# javascript - 如何使用提交上传文件而不重新加载页面

> ID：12487832
> 
> 赞同：0
> 
> 时间：2012-09-19T02:38:30.087
> 
> 标签：javascript, jquery, jstl, submit, form-submit

我正在使用提交按钮将文件上传到 tomcat 服务器，但我的问题是页面正在重新加载。如果我使用`return false`文件不上传。我尝试使用按钮不上传文件。

我正在`jstl`为我的客户端使用和 javascript。

```
<form:form modelAttribute="uploadItem" name="frm" method="post"
    enctype="multipart/form-data">
    <fieldset>
        <legend>Upload File</legend>
        <table>
            <tr>
                <td><form:label for="fileData" path="fileData">File</form:label><br />
                </td>
                <td><form:input path="fileData" id="csv" type="file" /></td>
            </tr>
            <tr>
                <td><br /></td>
                <td><input id="subUpload" type="submit" value="Upload" /></td>
            </tr>
        </table>
    </fieldset>
</form:form> 
```

对于我的 javascript：

```
$("#subUpload").click(function(e) {
    var image = document.getElementById("csv").value;
    if(image!=''){
        var checkimg = image.toLowerCase();
            if (!checkimg.match(/(\.CSV|\.csv)$/)){
                alert("Please enter  Image  File Extensions .jpg,.png,.jpeg");
                document.getElementById("image").focus();
                return false;
            }
    }
    return true;
    e.preventDefault();
}); 
```

我也使用过`e.preventDefault()`，但仍在重新加载。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T02:44:20.697

如果您使用 iframe，这是可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T06:13:51.920

您可以使用 uploadify 类型的组件，它可以在提交表单之前上传文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T03:01:34.607

*   同一个块下和同一个块中的任何内容`return [optional value here];`都将被省略，因此您的`e.preventDefault()`行将永远不会被执行。
*   `return true`将告诉按钮行为正常，因此它将尝试采取常规操作
*   `return false`并且`e.preventDefault()`会做同样的事情（阻止表单提交文件），除了`return false`另外阻止在文档中冒泡点击事件。

如果您想无缝发送文件，您可能需要使用 iframe 或使用 jQuery 发送数据，而不是让表单处理该数据传输。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-29T09:55:55.907

创建一个表格.. ex

```
<form name="form" method="post" enctype="multipart/form-data" action="test.php">
<input type="file" name="piture"  value="" onChange="window.document.forms['form'].submit();"/> </form> 
```

测试.php

```
 if(preg_match('/[.](jpg)|(gif)|(png)$/', $_FILES['picture']['name'])) {  
    $rand=rand(000000000,9999999);
    $fl_name = $_FILES['picture']['name'];
    $expld = explode('.', $fl_name);
    $extnnew = $expld[1];
    $filename = $rand.'.'.$extnnew;  
    $source = $_FILES['picture']['tmp_name'];
    $path_to_image_directory = "uploads/"; 
    if(!is_dir($path_to_image_directory)){
mkdir($path_to_image_directory, 0777);
chmod($path_to_image_directory, 0777);} 

    $target = $path_to_image_directory . $filename;  
    move_uploaded_file($source, $target);  
    $sql ="insert into picture values('','".$filename."','Now()')";
    mysql_query($sql) or die(mysql_error());

                        } 
header('Location:page.php'); 
```

# .net - 大对象和 .NET (x64)：意义？

> ID：12487835
> 
> 赞同：1
> 
> 时间：2012-09-19T02:38:40.053
> 
> 标签：.net, memory-management

我一直在阅读 .NET 中对象的 ~2GB 大小限制，遗憾的是我觉得我一定遗漏了一些东西。我相信我已经创建了大于 2GB 的列表，并且就列表是一个对象而言......我很困惑。有人可以向我解释一下这个限制是什么意思吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T02:53:17.047

所有取消引用的对象占用的总空间可能已经超过了这个值。但是列表的空间需求及其指向它包含的每个对象的内部指针都小于 2 GB。

为了解释这个一般概念 - 指针本身在存储要求方面相对较小。它们指向的对象可以单独非常大（或非常多）。

# objective-c - Objective C 中的多维数组

> ID：12487837
> 
> 赞同：0
> 
> 时间：2012-09-19T02:38:50.130
> 
> 标签：objective-c, arrays, nsdictionary

我有一个`NSDictionary`充满数据的。如果这是 php，则可以通过以下方式访问它：

```
$data = $array['all_items'][0]['name']; 
```

我如何在目标 c 中做类似的事情？（`$array`将是一个`NSDictionary`）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T03:09:27.527

Objective-C 中的等效代码是：

```
id data = [[[array objectForKey:@"all_items"] objectAtIndex:0] objectForKey:@"name"]; 
```

注意`objectForKey:`是NSDictionary`objectAtIndex:`的方法，也是NSArray的方法。

Xcode 4.5 中使用 LLVM 4.1 的快捷方式是：

```
id data = array[@"all_items"][0][@"name"]; 
```

另请注意，如果“array”是一个 NSDictionary 实例，并且您想要获取字典中所有值的数组，则使用`allValues`NSDictionary 的方法：

```
id data = [array allValues][0][@"name"]; 
```

当然，`allValues`返回一个未排序的数组，所以按索引访问数组并不是很有用。更典型的是，您会看到：

```
for (NSDictionary* value in [array allValues])
{
    id data = value[@"name"];
    // do something with data
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T02:44:40.953

不幸的是，objective-c 版本在语法上不如 PHP 版本优雅：

```
NSDictionary *array = ...;
NSArray *foo = [array objectForKey@"all_items"];
NSDictionary *bar = [foo objectAtIndex:0];
NSString *data = [bar objectForKey@"name"]; 
```

为简洁起见，您可以在一行中执行以下操作：

```
NSString *data = [[[array objectForKey@"all_items"] objectAtIndex:0] objectForKey@"name"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T02:48:43.373

你应该使用它，

```
NSString *value = [[multiArray objectAtIndex:1] objectAtIndex:0]; 
```

您可以在[这里查看问题](https://stackoverflow.com/questions/2596593/multi-dimensional-nsarray-object)

# android - 如何使用Zxing自动固定扫描条码

> ID：12487841
> 
> 赞同：0
> 
> 时间：2012-09-19T02:39:13.277
> 
> 标签：android, zxing

我使用**Zxing**在 Android 中扫描条码

```
 Button button = (Button) this.findViewById(R.id.scan);
    button.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            IntentIntegrator.initiateScan(AntennaShow.this);
        }
    }); 
```

当我触摸按钮时，我看到一个**弹出菜单**，里面有我之前安装的*Zxing*和其他*条形码扫描应用*
程序 问题：
如何触摸按钮然后自动运行 Zxing**因为**1，我需要使用 Zxing 来检索我扫描的信息 2, 用户选择*apt app时会很麻烦--Zxing*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:03:06.533

最简单的方法是使用`IntentIntegrator`项目提供的类。请参阅[http://code.google.com/p/zxing/wiki/ScanningViaIntent](http://code.google.com/p/zxing/wiki/ScanningViaIntent)

默认情况下，它将处理对 Barcode Scanner 或 Barcode Scanner+ 包的限制。

# apache-flex - 无法在flex中播放声音文件

> ID：12487843
> 
> 赞同：0
> 
> 时间：2012-09-19T02:39:23.930
> 
> 标签：apache-flex

我用flex写了一个游戏，那个游戏有声音。我从这样的资产加载声音来播放声音文件，这是函数：

```
public function playSound(value:String, vol:Number):void
{

 mySound=new Sound();
 var urlRequest:URLRequest=new URLRequest(value);
 mySound.load(urlRequest);
 sChannel=mySound.play(0, 0, new SoundTransform(vol, 0));
} 
```

当我想播放声音时，我这样称呼它：

```
playSound("sounds/abc.mp3", 1) 
```

当前项目中包中的“声音”。当我在 Eclipse 中构建时它工作正常，但是当我将该游戏放到网络上时，我听不到音乐。

谁能告诉我如何解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T02:56:43.620

```
var urlRequest:URLRequest=new URLRequest(value); 
```

您传递的是相对路径，因此当它在远程机器上运行时，它会在那里寻找声音，但显然找不到。您需要嵌入声音，如[本问题](https://stackoverflow.com/q/4276485/900873)所述：

```
[Embed(source="myfile.mp3")]
[Bindable] //Not required. Just an example of using multiple meta tags.  
public var soundCls:Class; 
```

然后，我有点生疏了，但我相信

```
sChannel = new soundCls().play(0, 0, new SoundTransform(vol, 0)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:28:44.630

试试这个。

```
 var urlReq:URLRequest = new URLRequest("assets/sound/sound3.mp3");
    var sound:Sound= new Sound(urlReq);

    sound.play(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-31T18:56:25.330

你有没有试过修改你的声音文件

1.  删除声音文件中的所有元数据。

2.  将其导出为新的 MP3 文件。

3.  是否太大而无法加载？尝试添加错误事件来监听。

# android - 来自 android SDK 的 BluetoothChat 示例 - 为什么在 onPause 方法期间应用程序从不被杀死

> ID：12487845
> 
> 赞同：1
> 
> 时间：2012-09-19T02:39:27.200
> 
> 标签：android, android-activity, bluetooth

我正在测试来自 android SDK 的 BluetoothChat 示例。在 onPause 方法期间，BluetoothChat 永远不会被杀死。以防万一用户通过后退按钮发送该订单。一般来说，应用程序由于不活动计时器（onPause 方法）而被杀死 - 另一个具有最高优先级的应用程序需要内存。在蓝牙聊天中怎么可能？

![在此处输入图像描述](../Images/1db6ec7f8c397a259ce921477690a618.png)

# spring - 春季交易范围

> ID：12487848
> 
> 赞同：0
> 
> 时间：2012-09-19T02:40:08.790
> 
> 标签：spring, transactions, scope

我是新的 Spring 用户。我有一个关于范围和交易的问题。

例如，有一个服务：

```
<bean id="bankInDaoService" class="service.dao.impl.UserDaoServiceImpl"> 
```

假设有**2 个人**想同时存入**银行**。而且我已经在上面为 Hibernate 交易添加了**@Transactional**用于银行入账的方法。

我的问题是：

1.  由于默认的 Spring 范围是单例的。这两个人是否有相同的价值观。（第 1 个人存入 500，第 2 个人存入 500）？
2.  @Transactional 会有效吗？我的意思是让第一个人完成银行存款，然后是第二个人。

我会非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T06:00:25.750

你错误地理解了@Transactional 注解的用法。

@Transactional 注释用于您希望所有交易成功或不成功的情况。如果任何一个事务失败，那么其他成功的事务将被回滚。它不是为了同步。

如果您有注册页面，您可以在其中输入 10 个字段，5 个用于表用户，5 个用于表公司，并且您从单个服务功能插入两个记录。那时你应该使用@Transactional注解。如果在用户表中插入成功而在公司表中插入失败，则用户表记录将被回滚。

希望这对您有所帮助。干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T05:51:10.933

您是正确的，默认情况下 Spring bean 是单例。但这不会成为问题，除非您的实现在每次调用时都修改了一些内部状态（这会很奇怪 - 通常服务方法只会使用给定的参数）。

正如我刚才提到的，每个服务方法调用都有自己的参数；IE：

```
deposit(person1_ID, 500)

deposit(person2_ID, 750) 
```

正如您所说的“同时”，我们可以安全地假设我们有一个多线程服务器同时处理这两个人，每个线程一个。方法参数被放置在任何给定线程的堆栈中 - 就您的服务而言，两个人的存款之间绝对没有连接/损坏的可能性。

现在转向@Transactional 注释：Spring 使用“方面”来实现此行为，这些将再次分别应用于每个执行线程，并且是独立的。

如果您正在寻找 @Transactional 来强制执行某种排序（例如，您希望 person2**提取person1****存款**的确切金额），那么您需要编写一个新方法，在一个 @Transactional 范围内按顺序执行这两个操作。

# sorting - PrimeFaces 数据表（V 3.3.1）排序无法正常工作

> ID：12487849
> 
> 赞同：0
> 
> 时间：2012-09-19T02:40:16.473
> 
> 标签：sorting, jsf-2, datatable, primefaces

当我有列时，我遇到了 primefaces 数据表排序的问题`<p:cellEditor>`，其他列的排序正确。

```
 <p:column headerText="#{message.label_code}"  sortBy="#{item.code}">
            <p:cellEditor>
    <f:facet name="output">
          <h:outputText value="#{item.code}" />
    </f:facet>
   <f:facet name="input">
         <p:inputText value="#{item.code}" style="width:100%"/>
   </f:facet>
        </p:cellEditor> </p:column> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:12:01.487

这是 primefaces 3.3.1 的缺陷。它被报告为问题[http://code.google.com/p/primefaces/issues/detail?id=4173](http://code.google.com/p/primefaces/issues/detail?id=4173)，应该在 3.4 版中解决。
尝试将 primefaces 更新到更高版本。

# functional-programming - OCaml 错误失败 "hd"

> ID：12487851
> 
> 赞同：1
> 
> 时间：2012-09-19T02:40:21.137
> 
> 标签：functional-programming, ocaml

我尝试编写一个简单的 OCaml 程序，如果 a 列表包含所有偶数整数，则返回 true，否则返回 false。

```
let rec allEven l = 
List.hd l mod 2 = 0 && allEven (List.tl l);; 
```

当我输入代码时，它没有给我任何错误。但是，每当我输入一个以偶数开头的列表时，例如 allEven [2;3]，它都会给我错误消息“失败“hd””。不太清楚为什么。谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T03:01:03.370

List.hd 将在空列表上引发故障“hd”。要更正您的功能，请使用模式匹配：

```
let rec allEven l = 
  match l with
  | [] -> true
  | h::t -> if h mod 2 = 1 then false else allEven t 
```

此外，OCaml 中的模运算符是“mod”而不是“%”

# sql - 使用以下输出连接两个表的 SQL 查询

> ID：12487856
> 
> 赞同：2
> 
> 时间：2012-09-19T02:40:57.190
> 
> 标签：sql, tsql

我需要编写一个简单的查询作为更大函数的一部分来连接两个表。表格如下

**表格1**

```
Code    Subactivity
647     1
647     2
648     3
648     4 
```

**表 2**

```
Subactivity    Hours
1              5
2              10
3              7
4              3 
```

最终输出应如下所示

```
Code    hours
647     15
648     10 
```

我以前做过，但今天我无法理解它..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T02:43:09.297

```
DECLARE @t1 TABLE([Code] INT,[Subactivity] INT)
INSERT INTO @t1 VALUES(647,1),(647,2),(648,3),(648,4)

DECLARE @t2 TABLE([Subactivity] INT, [Hours] INT)
INSERT INTO @t2 VALUES(1,5),(2,10),(3,7),(4,3)

SELECT t1.Code,SUM(t2.Hours) hours
FROM @t1 t1 JOIN @t2 t2 ON t1.subactivity = t2.subactivity
GROUP BY t1.CODE 
```

**结果**

```
Code    hours
647      15
648      10 
```

# .net - 使用委托转换 wcf 服务返回对象

> ID：12487860
> 
> 赞同：1
> 
> 时间：2012-09-19T02:41:56.403
> 
> 标签：.net, vb.net, wcf, delegates

下面的函数采用任何 wcf 服务方法并调用它。

```
Private Function ServiceCall(ByVal functionToCall As ServiceDelegate(Of IEmpService)) As Object
    Dim channel As New ChannelFactory(Of IEmpService)(_endPoint)
    Dim serv As IEmpService
    Dim result As Object = Nothing
    Dim mostRecentExp As Exception = Nothing
    Dim noOfRetries As Integer = My.Settings.NoOfRetries
    Dim initialDelay As Integer = My.Settings.InitialDelayInMS

    serv = channel.CreateChannel()

    For i As Integer = 0 To noOfRetries

        Try
            result = functionToCall.Invoke(serv)
            mostRecentExp = Nothing
            Exit For
        Catch cte As ChannelTerminatedException
            mostRecentExp = cte

            Thread.Sleep(initialDelay * (i))
        Catch enf As EndpointNotFoundException
            mostRecentExp = enf
            Thread.Sleep(initialDelay * (i))
        Catch stb As ServerTooBusyException
            mostRecentExp = stb
            Thread.Sleep(initialDelay * (i))

        Catch vf As FaultException(Of ValidationFault)
            'no retry

        Catch exp As Exception 'any other exception 
            mostRecentExp = exp
            Thread.Sleep(initialDelay * (i))

        Finally
            If channel.State = CommunicationState.Faulted Then
                channel.Abort()
            Else
                channel.Close()
            End If
        End Try
    Next
    If mostRecentExp IsNot Nothing Then
        Throw New ServiceExceptions(String.Format("Call to method {0} failed", functionToCall.ToString()), mostRecentExp.InnerException)
    End If
    Return result
End Function 
```

我根据我得到的异常类型确定是否需要重试，这一切都很好。我面临的问题是`result = functionToCall.Invoke(serv)`结果是一个对象并且它可以包含一个自定义错误对象，在这种情况下它不会是一个例外。要解决错误，我可以做类似的事情： `If TypeOf result Is SaveAddressResponse Then ElseIf TypeOf result Is SaveDetailResponse Then End If` 看起来很乱所以想知道我是否可以使用委托从`return`对象中获取错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T05:55:18.327

听起来您应该考虑让所有这些响应实现一个通用接口，例如`IFailureReporter`，它允许您以统一的方式处理任何错误。然后你*只*需要转换到那个接口（如果你的*所有*响应都实现了那个接口，你可以无条件地这样做），并以这种方式检查错误。

编辑：如果这不可行，还有另一种*可能的*方法，将每个类型的委托存储在字典中。目前还不清楚你想对错误*做*什么，或者它在你的每个响应对象中是如何表示的......但是*如果*你知道响应对象的确切类型（不仅仅是类型他们'重新兼容）。这是 C# 代码，但类似的 VB 代码应该是可行的 - 我不太可能做对：

```
private static readonly Dictionary<Type, Func<object, string>>
     ErrorExtracters = new Dictionary<Type, Func<object, string>>
{
    { typeof(SaveAddressResponse), response => ((SaveAddressResponse) response).Error,
    { typeof(OtherResponse), response => ((OtherResponse) response).ErrorMessage,
    ...
}; 
```

然后：

```
Func<object, string> extractor;
if (ErrorExtractors.TryGetValue(result.GetType(), out extractor))
{
    string error = extractor(result);
    if (error != null)
    {
        ...
    }
} 
```

# javascript - 扩展程序停止使用 Google Chrome 清单 v2

> ID：12487863
> 
> 赞同：4
> 
> 时间：2012-09-19T02:42:48.570
> 
> 标签：javascript, jquery, google-chrome-extension

我正在为 Google Chrome 开发一个运行良好的扩展程序，但现在停止使用清单的第 2 版。

它给了我以下错误：

```
Uncaught SyntaxError: Unexpected end of input 
```

popup.js：

```
chrome.tabs.getSelected(null, function (aba) {
    link = aba.url;
    titulo = aba.title;
    document.getElementById('mensagem').value = link;
});

function GrabIFrameURL(feedDescription) {
    var regex = new RegExp("iframe(?:.*?)src='(.*?)'", 'g');
    var matches = regex.exec(feedDescription);
    var url = '';
    if (matches.length == 2) {
        url = matches[1];
    }
    var quebra = url.split("/");
    return quebra[4];
}

$(document).ready(function () {
    if (localStorage.nome == '' || localStorage.nome == null || localStorage.email == '' || localStorage.email == null) {
        jQuery('#formulario').hide();
        jQuery('#erros').html('Configure seus dados <a href="options.html" target="_blank">aqui</a>');
    }

    jQuery("#resposta").ajaxStart(function () {
        jQuery(this).html("<img src='img/loading.gif'> <b>Sugestão sendo enviada, aguarde...</b>");
    });

    jQuery('#submit').click(function () {

        var nome = localStorage.nome;
        var email = localStorage.email;
        var mensagem = titulo + "\n\n<br><br>" + link;

        jQuery('#formulario').hide();
        jQuery.post('http://blabloo.com.br/naosalvo/mail.php', {
            nome: nome,
            email: email,
            mensagem: mensagem
        },

        function (data, ajaxStart) {
            jQuery('#resposta').html(data);
            console.log(data);
        });
        return false;
    });

    //Listagem de posts
    var bkg = chrome.extension.getBackgroundPage();

    jQuery('#close').click(function () {
        window.close();
    });

    jQuery('#markeall').click(function () {
        bkg.lidoAll();
        $('.naolido').attr('class', 'lido');
    });

    jQuery.each(bkg.getFeed(), function (id, item) {
        if (item.naolido == '1') 
            lidoClass = 'naolido';
        else 
            lidoClass = 'lido';
        var thumb = GrabIFrameURL(item.description);
        $('#feed').append('<li><a id="' + item.id + '" href="' + item.link + '" class="' + lidoClass + '"><img src="' + $.jYoutube(thumb, 'small') + '" class="' + lidoClass + '"/>' + item.title + '</a></li>');
    });

    $('.naolido').click(function (e) {
        e.preventDefault();
        klicked = $(this).attr('id');
        console.log(klicked);
        bkg.setLido(klicked);
        $(this).attr('class', 'lido');
        openLink($(this).attr('href'));
    });

    $('.lido').click(function (e) {
        openLink($(this).attr('href'));
    });

    var openLink = function (link) {
        chrome.tabs.create({
            'url': link,
            'selected': true
        });
        window.close();
    }

}); 
```

我认为问题出在 popup.js 的这一部分：

```
jQuery.each(bkg.getFeed(), function (id, item) {
        if (item.naolido == '1') 
            lidoClass = 'naolido';
        else 
            lidoClass = 'lido';
        var thumb = GrabIFrameURL(item.description);
        $('#feed').append('<li><a id="' + item.id + '" href="' + item.link + '" class="' + lidoClass + '"><img src="' + $.jYoutube(thumb, 'small') + '" class="' + lidoClass + '"/>' + item.title + '</a></li>');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T21:39:37.363

您的问题实际上出在第 12 和第 20 行的 background.js 中，您`''`最初将 localStorage.items 设置为，但稍后尝试在其`JSON.parse()`上运行 a ，但它不是 JSON 数据，因此 JSON.parse 返回`Unexpected end of input`。而且， JSON.parse 不是您定义的函数，而是本机浏览器函数，因此，它将错误显示为“第 1 行”。

尝试最初将它定义为一个空数组，然后像现在一样“推送”它。

# ruby-on-rails - attr_accessible, attr_accessor, 我想知道他们是做什么的

> ID：12487865
> 
> 赞同：2
> 
> 时间：2012-09-19T02:42:54.053
> 
> 标签：ruby-on-rails, attr-accessible, attr-accessor

我在 Rails 和面向对象编程中迈出了第一步。我想了解一些非常基本的东西：为什么我们需要`attr_accessible`在模型中？

我已经读到黑客可以使用批量分配来更改数据库条目并因此损害安全性，这就是敏感字段需要保护的原因（`atribute_protected`在这种情况下使用）。

是`attr_accessible`相反的`atribute_protected`吗？如果是这样，为什么我们需要说明哪些字段是可访问的，哪些是不可访问的？那些字段不能被默认访问吗？以及是`attr_accessor`用来做什么的？

我注意到，如果我不使某些字段可访问，我的应用程序将无法运行。我可以将 attr_accessible 用于敏感字段，例如 :password_digest 和 :admin 吗？

如果有人可以向我解释，那就太棒了。

一切顺利，TimmyOnRails

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T02:53:58.673

您在这里混合了几个概念，所以我将尝试解开它们。

`attr_accessor`用于设置可读可写属性。相当于说`attr_reader`and `attr_writer`。由于您的问题不是直接关于 的`attr_accessor`，因此我不会再解决它，而是说在[Accessors](http://www.rubyist.net/~slagell/ruby/accessors.html)上查看此链接。

* * *

根据 Rails 文档：**`attr_accessible`与 attr_protected 宏相反**

您是正确的，这些方法用于防止批量分配漏洞。

*   `attr_accessible`**表示可以**通过批量分配设置哪些属性。
*   `attr_protected`**表示不能通过**批量分配设置哪些属性。

那么每个的用例是什么？在一种情况下，您可以设置一个全局配置选项，以便必须声明所有属性`attr_accessible`：

```
config.active_record.whitelist_attributes = true 
```

在那种情况下，你会`attr_accessible`经常使用。

和`attr_protected`？如果您采取相反的方式并`false`在白名单属性上说，您将如何声明哪些属性不应该是可批量分配的？如果你说`attr_protected`你是对的！:D

通常，您希望将字段设置`:admin`为 as，`attr_protected`因为您不希望攻击者进入并将其权限提升为管理员角色。

批量分配不是一件容易做到的事情。大而聪明的开发团队搞错了。所以要小心谨慎，确保你明白发生了什么！

# c++ - 将 n 位二进制整数相除

> ID：12487869
> 
> 赞同：0
> 
> 时间：2012-09-19T02:43:33.400
> 
> 标签：c++, pseudocode

想知道是否有人可以帮助我创建一个伪代码来处理如何划分 n 位二进制整数。这是我认为现在可能可行的方法，如果我错了，有人可以纠正这个问题：

```
divide (x,y)
     if x=0: return (0,0) //(quotient, remainder)
     (q,r) = divide(floor(x/2), y)

     q=2q, r=2r
     if x is odd: r = r+1

     if r >= y: r = r-y, q = q+1
          return (q,r) 
```

你们会说这种通用伪代码算法将完成划分 n 位数字的预期任务，还是在我开始编写错误代码之前我的伪代码中遗漏了一些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T03:35:43.527

除了明显的东西（不检查除以零，不处理负数）之外，它似乎正在工作。我通过将其应用于以 10 为底的数字来说服自己。

# php - 现代 PHP：可以隐含 GD 吗？

> ID：12487876
> 
> 赞同：0
> 
> 时间：2012-09-19T02:44:23.413
> 
> 标签：php, image-processing, gd, php-gd

PHP 没有内置的图像编辑功能，但许多项目使用 GD 库，而我工作的服务器已经安装了它。

我正在分发一个开源产品 Camera Life，它可以让人们在他们运行的网站（如 Gallery）中管理他们的照片。在那里我需要创建图像缩略图。用户在 Mac/Linux/Windows 上使用 Apache/IIS 或其他流行的东西运行最近（5.3+）的 PHP。

对于一个稳定且现代的 PHP 项目，在假设用户安装了 GD 的例程中抽象出图像处理功能或硬编码是最佳实践吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T02:59:36.887

在concrete5，我们只要求他们有GD，我们很少看到没有GD的人。不太确定这是最佳实践，这只是我们前进的方向。

最好的祝愿，
科尔文

# google-maps - 谷歌地图显示物业表格中的位置

> ID：12487877
> 
> 赞同：0
> 
> 时间：2012-09-19T02:44:26.217
> 
> 标签：google-maps, properties

我正在尝试制作一个显示属性的表格：我的表格如下所示，我怎样才能让谷歌地图显示属性的位置？

```
 <legend><?php echo JText::_('COM_IPROPERTY_LOCATION'); ?></legend>
            <div class="formelm"><?php echo $this->form->getLabel('hide_address'); ?>
            <?php echo $this->form->getInput('hide_address'); ?></div>
            <div class="formelm"><?php echo $this->form->getLabel('street_num'); ?>
            <?php echo $this->form->getInput('street_num'); ?></div>
            <div class="formelm"><?php echo $this->form->getLabel('street'); ?>
            <?php echo $this->form->getInput('street'); ?></div>
            <div class="formelm"><?php echo $this->form->getLabel('street2'); ?>
            <?php echo $this->form->getInput('street2'); ?></div>
            <div class="formelm"><?php echo $this->form->getLabel('apt'); ?>
            <?php echo $this->form->getInput('apt'); ?></div>
            <div class="formelm"><?php echo $this->form->getLabel('city'); ?>
            <?php echo $this->form->getInput('city'); ?></div>
            <div class="formelm"><?php echo $this->form->getLabel('postcode'); ?>
            <?php echo $this->form->getInput('postcode'); ?></div>
            <div class="formelm"><?php echo $this->form->getLabel('locstate'); ?>
            <?php echo $this->form->getInput('locstate'); ?></div>
            <div class="formelm"><?php echo $this->form->getLabel('province'); ?>
            <?php echo $this->form->getInput('province'); ?></div>
            <div class="formelm"><?php echo $this->form->getLabel('country'); ?>
            <?php echo $this->form->getInput('country'); ?></div>
            <div class="formelm"><?php echo $this->form->getLabel('region'); ?>
            <?php echo $this->form->getInput('region'); ?></div>
            <div class="formelm"><?php echo $this->form->getLabel('county'); ?>
            <?php echo $this->form->getInput('county'); ?></div>
        </fieldset>
        <fieldset>
        <legend><?php echo JText::_( 'COM_IPROPERTY_DRAG_AND_DROP' ); ?></legend> 
            <?php echo $this->form->getLabel('geocode_header'); ?>
            <div class="formelm"><?php echo $this->form->getLabel('latitude'); ?>
            <?php echo $this->form->getInput('latitude'); ?></div>
            <div class="formelm"><?php echo $this->form->getLabel('longitude'); ?>
            <?php echo $this->form->getInput('longitude'); ?></div>
            <div><?php echo $this->form->getInput('google_map'); ?></div>
        </fieldset>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:36:48.213

创建一个谷歌地图并在上面添加一个标记。看起来你已经知道了纬度和经度，所以创建地图应该很简单，就像[这个例子](https://google-developers.appspot.com/maps/documentation/javascript/examples/marker-simple?hl=en)一样。这应该是您进一步开发地图的起点。

```
 function initialize() {
    var myLatlng = new google.maps.LatLng(<?php echo $this->form->getInput('latitude'); ?>,<?php echo $this->form->getInput('longitude'); ?>);
    var mapOptions = {
      zoom: 4,
      center: myLatlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

    var marker = new google.maps.Marker({
        position: myLatlng,
        map: map,
        title: 'Hello World!'
    });
  } 
```

# php - PHP 包含来自 URL 变量的错误

> ID：12487887
> 
> 赞同：0
> 
> 时间：2012-09-19T02:46:07.707
> 
> 标签：php, variables, if-statement, include, urlvariables

在我正在构建的页面上，我要求它根据 URL 末尾的变量将文件加载到页面的一部分中。例如，如果页面 URL 是 test.php?page=lp 那么页面将包含文件 lp.php ......现在这工作了一段时间，但突然停止了，我只是好像文件不存在一样返回错误。然后我“美化”了脚本，这样如果文件“未找到”，则会显示一条消息，如下所示：

```
<?php $times = substr_count($_SERVER['PHP_SELF'],"/");
$rootaccess = "";
$i = 1;

while ($i < $times) {
 $rootaccess .= "../";
 $i++;
}
$y = date("Y");
$ymo = $y-1;

//$rootaccess.
if(!file_exists($page.".php")){
echo "The file requested (www.websitename.co.uk$rootaccess$page.php) was not found, or an error occured";

}
else {include($rootaccess.$page.".php");} ?> 
```

所有发生的事情都是如果找不到文件就会被抛出......所以对于 test.php?page=lp 的例子，消息被返回“请求的文件（www.websitename.co.uk/lp .php) 未找到，或发生错误”。但事情是这样的，文件就在那里，因为页面也使用 AJAX，如果我使用 AJAX 链接在完全相同的位置加载完全相同的文件，它就可以工作！（同样，如果我在错误中输入地址显示，它会起作用）我使用 GET 来让脚本确定 $page 是否已设置，因为这也会更改页面的其他元素，所以我知道这是有效的。 ..但由于某种原因它不再想要包含该文件 - 那么解决方法是什么？（我也试过没有rootaccess位，但仍然失败）谢谢。（还，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T02:55:42.550

我想我以前也遇到过同样的问题。尝试使用：

```
$foo = trim($page.".php");

if(!file_exists($foo)) {
     :
} else {
     include(trim($rootaccess.$foo));
} 
```

# python - 游戏引擎 3D 到 Python3.x？

> ID：12487889
> 
> 赞同：2
> 
> 时间：2012-09-19T02:46:27.833
> 
> 标签：python, python-3.x, game-engine

什么是 Python 3.x 最好的游戏引擎 3D 并且易于在 Linux 上安装（Debian 7 “wheezy”）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T04:09:51.400

不确定它是否是“最好的”——但我不知道除了 Blender 3D 的游戏引擎之外的其他领域。Blender 在 2.5 版本中迁移到 Python 3 脚本，因此任何比此更新的版本都将使用 Python 3 来编写 BGE（Blender 游戏引擎）脚本。

Pygame 也可用于 Python 3.x，它确实具有与 OpenGL 的某种低级接口——所以你可以用它来做 3d。

两者在 Debian 中运行都不应该有任何重大问题，但也许您必须配置某种 PPA 才能为 Python 3 安装软件包。

此外，请确保您的 Debian`python3`是 3.2 - 众所周知，这个发行版包含令人惊讶的过时软件包，即使其中一个正在运行最新的软件包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-23T18:25:24.627

如果你想要一个 Python 游戏引擎，我会推荐这些：

1.  Kivy（多平台）

2.  PyGame（多平台）

3.  Blender（用python制作的图形游戏引擎，多平台，也用于建模）

4.  PyOpenGL（多平台，3d 游戏引擎，如搅拌机）

这些是我知道的一些游戏引擎。您可能还想尝试 Unity3d。

# objective-c - obj c：访问器：self vs myInstance

> ID：12487890
> 
> 赞同：0
> 
> 时间：2012-09-19T02:46:28.643
> 
> 标签：objective-c, self, accessor

在 Apple 的 Objective-C 编程语言 p. 18，他们区分了使用 self 和 instance 引用设置变量。例如 myInstance.value =10; 自我价值=10；1.这两个会设置不同的属性命名值吗？2\. 如果有多个实例具有名为 value 的属性，self 如何工作？他们还断言，“如果你不使用 self.，你可以直接访问实例变量。” 这意味着如果您使用 myInstance.value =10; 则不会调用访问器。并且 KVO 不起作用。这是真的？3\. 使用@Property 和@Synthesize（带有垃圾回收），设置不同实例属性的正确方法是什么？自我参考有什么用？请举一个数字示例对我有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T08:10:02.450

**1 - 这两个会设置不同的属性命名值吗？**

不，我认为您误解[了指南](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ObjectiveC/ObjC.pdf)在区分 self.value 和 myInstance.value 时所说的内容。在这两种情况下，setter 函数（即 setValue:) 都会被调用。

您使用 self 访问您自己的属性（即，从您编写的类的函数中引用属性）。像：

```
@interface MyObject : NSObject
@property( nonatomic ) NSInteger value;
- (void) doSomething;
@end

@implementation MyObject

@synthesize value;

- (void) doSomething
{
    self.value = 10;
}

@end 
```

而您将使用 myInstance 从该类外部设置其他变量中的属性。

```
MyObject* anObject = [[MyObject alloc] init];
anObject.value = 10; 
```

**2 - 如果有多个具有名为 value 的属性的实例，self 如何工作？**

它不会。往上看。

**他们还断言，“如果你不使用 self.，你可以直接访问实例变量。” 这意味着如果您使用 myInstance.value =10; 则不会调用访问器。并且 KVO 不起作用。这是真的？**

不，self.value 和 myInstance.value 都调用它们的访问器（setValue: 在这种情况下），并且 KVO 将工作。该断言的意思是，如果您从自己的类中访问 ivar，而不使用访问器，KVO 将无法工作。

```
@interface MyObject : NSObject
@property( nonatomic ) NSInteger value;
- (void) doSomething;
@end

@implementation MyObject

@synthesize value;

- (void) doSomething
{
    self.value = 10;    // This invokes the accessor, and KVO works.
    value = 10;  // This just sets the instance variable, and KVO won't work.
}

@end 
```

**使用@Property 和@Synthesize（带有垃圾收集），设置不同实例属性的正确方法是什么？自我参考有什么用？请举一个数字示例对我有帮助。**

如上所示，使用实例名称。self 仅用于访问类中的属性。上面的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T07:16:25.917

理解 self 的最好方法是考虑它是如何实现的，作为每个方法调用的隐藏参数，因此方法 -[UIView drawRect:] 具有 ac 函数实现，如

```
BOOL drawRect:( UIView * self, SEL _cmd, NSRect r ) { };    // of cause : is not legal in c 
```

和调用方法有点像（忽略动态查找）

```
UIView  * v = ...
NSRect  r = ...

drawRect:( v, @selector(drawRect:), r ); 
```

因此，如果您在 drawRect: 实现中调用一个属性，您正在为名为 self 的隐藏对象参数执行此操作。

直接访问实例变量会阻止 KVO 工作，但有时您希望这样做，例如在初始化它们时。

如果您说垃圾收集时是指自动引用计数，那么大多数情况下您希望它们是强大的或复制的对象，使用复制的不可变字符串将被转换为保留，如果它是可变的，那么您通常需要一个副本来保护反对原来在你下面被改变。

strong 的一个潜在问题是，如果您按照周围的链接返回原始对象，那么您最终可能会遇到循环引用，因此每个对象都间接地保留自己，并且您有一个 catch-22 情况，即对象必须在此之前释放自己它可以释放自己。所以在这些情况下你需要使用weak。您通常可以通过考虑概念上哪个对象拥有另一个对象来锻炼谁应该保留和谁应该弱化。

对于非对象，您必须使用分配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T03:38:30.203

`self.property`并且`[self method];`在类中严格使用来引用自身。你**永远不会**用任何东西来指代对象本身`self`。

相反，使用对象的实例来引用另一个类的对象。例如，我会以如下方式引用 a `UIImageView`from my `viewController`：

```
UIImageView* imgView = [[UIImageView alloc] init];
[imgView setFrame:CGRectMake(0,0,320,480)]; 
```

但是，如果我正在编辑我调用的 UIImageView 的子类，请说 rotationImageView：

```
@implementation rotatingImageView

-(id)init
{
    //Super instantiation code that I don't remember at the moment goes here
    [self setFrame:CGRectMake(0,0,320,480)];
} 
```

这只是一种方法的示例。

再一次，您在自己的类中严格使用 self，并使用其他变量来引用另一个类的实例。

希望这是有道理的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T05:47:10.233

我的大问题是，当 ivar 和属性具有不同的名称时，如何将它们绑定在一起，尤其是多个 ivar。
我终于发现，如果属性名称与 ivar 的名称不匹配，则会合成一个新的 ivar。这是由 self.propertyname（对象内）或 object.propertyname（对象外）访问的，而不是声明的 ivar。

要绑定 ivar 和属性的不同名称，请将它们等同于
@synthesize propertyname = ivarname。

谢谢

[http://blog.ablepear.com/2010/05/objective-c-tuesdays-synthesizing.html](http://blog.ablepear.com/2010/05/objective-c-tuesdays-synthesizing.html)

# android - Temple Run 背后的编程逻辑（OpenGL ES ？）？

> ID：12487891
> 
> 赞同：3
> 
> 时间：2012-09-19T02:46:34.467
> 
> 标签：android, ios, graphics, opengl-es

我对由 2 位开发人员和 1 位艺术家开发的 Temple Run（iOS 和 Andriod）的成功非常着迷。

我的问题是——

他们用什么来进行图形渲染，是整个游戏的 OpenGL ES（从显示到玩家移动）吗？

还有 HTML 如何帮助创建这样的动态游戏？

相同的核心引擎是否适用于 iOS 和 Android（但它们都是两种不同的语言——Objective C 和 Java）？

我并没有考虑自己创建游戏，但我已经考虑了几天，并在网上搜索了各种帖子 - 但找不到令人满意的答案。

谁能帮我理解。谢谢。

# node.js - socket.io.js 应该返回一个空文件吗？

> ID：12487895
> 
> 赞同：2
> 
> 时间：2012-09-19T02:47:53.170
> 
> 标签：node.js

我尝试使用 node.js 和 socket.io 制作一个小型聊天网站。要在我的客户端文件中包含 socket.io.js：

```
 <script src="192.168.0.108:1337/socket.io/socket.io.js"></script> 
```

但是它返回一个空文件是否正常？ [http://screencast.com/t/HPAjAqV13q8q](http://screencast.com/t/HPAjAqV13q8q)

我还想补充一点，如果在我的服务器端文件中，我执行 res.write('Hello World')，'Hello World' 将出现在网页和 socket.io.js 文件中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T00:19:17.993

解决它的方法是打开 socket.io 正在侦听的端口，在我的情况下是 8080 ......现在我的 socket.io.js 里面有 javascript 代码。

现在我在该 socket.io.js 文件中的 xhr.send(null) 上收到 404 错误，但这是另一个故事......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T02:56:58.910

你可以试试这个：

```
<script src='/socket.io/socket.io.js'></script> 
```

你应该创建一个客户端`io.connect`

```
var socket = io.connect('http://localhost:5000'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T05:18:20.713

您也可以使用 socket.io 的自动发现功能并且不指定服务器

```
<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect();
</script> 
```

# ios - 显示键盘后 UIWebView 上的 scalesPageToFit 损坏？

> ID：12487899
> 
> 赞同：4
> 
> 时间：2012-09-19T02:48:58.193
> 
> 标签：ios, uiwebview

我有这个元标记：

```
<meta name="viewport" content="width=768, minimum-scale=1.0, user-scalable=no" /> 
```

我正在设置 scalesPageToFit：

```
webView.scalesPageToFit = YES; 
```

起初，这可以正常工作。当我从纵向转到横向时，它会放大，因此设备的宽度始终为 768px。我可以毫无问题地来回走动（纵向<->横向）。

一旦我激活虚拟键盘，无论是通过 contentEditable 还是文本区域，它都会完全停止工作，即使在我关闭键盘之后也是如此。

这是 UIWebView 中的错误吗？我还需要做些什么来完成这项工作吗？有没有我可以使用的解决方法？无论方向如何，宽度都必须为 768px。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T07:41:53.920

似乎是 Apple 的私有类 UIDocumentView 的一个错误。无论出于何种原因`viewportConfigurationsDidChange`，在激活键盘后都会卡在缩放比例上，这是通过调用来设置的`_setDocumentScale`。例如，当它应该更改为 1.333 时，它会卡在 1.0 上。

通过为 UIWebDocumentView 编写一个类别是“可修复的”，它是 UIDocumentView 的子类，不实现这些方法（因此您可以调用超级类）。

尽管我尽了最大的努力，但我还是找不到使用公共 API 解决此问题的方法。我尝试弄乱 UIScrollView 的缩放级别，但我永远无法让它正常工作。内容会发生变化，还会发生其他奇怪的事情。甚至尝试使用 JavaScript 来实现。

所以修复它的唯一方法是通过私有类的类别。

**这永远不会在应用商店中获得批准。**

所以在苹果解决这个问题之前，SOL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T20:17:03.650

*警告：此解决方案使用私有 API。任何使用此代码的应用都可能被应用商店拒绝。我发布它是为了让人们至少有一个可行的解决方案。*

```
@interface UIWebDocumentView : UIView
- (void)_setDocumentScale:(float)scale;
@end

@interface UIWebView (DocumentView)
- (UIWebDocumentView *)_documentView;
@end

- (void)resetScale:(UIWebView *)webView
{
    UIWebDocumentView *webDocumentView = [webView _documentView];
    CGFloat contentWidth = [[webView stringByEvaluatingJavaScriptFromString:@"document.body.scrollWidth;"] floatValue];
    CGSize viewSize = webView.bounds.size;
    float scale = viewSize.width / contentWidth;
    [webDocumentView _setDocumentScale:scale];
} 
```

`resetScale`在 web 视图的边界改变后调用。

# ios - 应用程序在名为 com.apple.CFURLCACHE_work_queue 的线程中崩溃

> ID：12487900
> 
> 赞同：4
> 
> 时间：2012-09-19T02:49:01.917
> 
> 标签：ios

我的应用程序在名为 com.apple.CFURLCACHE_work_queue 的线程中崩溃了，崩溃日志似乎没有为我提供任何线索来查找错误或错误 =(

```
Thread 10 name:  Dispatch queue: com.apple.CFURLCACHE_work_queue
Thread 10 Crashed:
0   libsystem_kernel.dylib          0x32e93350 __pthread_kill + 8
1   libsystem_c.dylib               0x3b04011e pthread_kill + 54
2   libsystem_c.dylib               0x3b07c96e abort + 90
3   libc++abi.dylib                 0x343ebd4a abort_message + 70
4   libc++abi.dylib                 0x343e8ff4 default_terminate() + 20
5   libobjc.A.dylib                 0x3559fa74 _objc_terminate() + 144
6   libc++abi.dylib                 0x343e9078 safe_handler_caller(void (*)()) + 76
7   libc++abi.dylib                 0x343e9110 std::terminate() + 16
8   libc++abi.dylib                 0x343ea50e __cxa_throw + 118
9   libobjc.A.dylib                 0x3559f9ba objc_exception_throw + 90
10  Foundation                      0x34d42b60 _NSOutOfMemoryErrorHandler + 56
11  CoreFoundation                  0x3725130a __CFDataHandleOutOfMemory + 90
12  CoreFoundation                  0x37251458 __CFDataGrow + 288
13  CoreFoundation                  0x371d6134 CFDataReplaceBytes + 360
14  CoreFoundation                  0x371e3a9a CFDataAppendBytes + 82
15  CFNetwork                       0x33150438 CopyAllDataFromDataArray(__CFArray const*) + 104
16  CFNetwork                       0x331509ae __CFURLCache::ExecuteSQLInsert(_CFCachedURLResponse const*, __CFString const*, _CFURLRequest const*) + 370
17  CFNetwork                       0x3314ec62 __CFURLCache::AddCachedResponseForRequest(__CFURLCacheNode*, _CFCachedURLResponse const*, _CFURLRequest const*) + 58
18  CFNetwork                       0x3314eab8 __CFURLCache::ProcessCacheTasks0(bool) + 140
19  CFNetwork                       0x3314ea1c __CFURLCache::ProcessCacheTasks(bool) + 32
20  CFNetwork                       0x3314e8f0 __CFURLCache::_CFURLCacheTimerCallback0() + 280
21  CFNetwork                       0x3314e7c8 __CFURLCache::_CFURLCacheTimerCallback(void*) + 28
22  libdispatch.dylib               0x35f86134 _dispatch_source_invoke$VARIANT$mp + 248
23  libdispatch.dylib               0x35f83e8e _dispatch_queue_drain$VARIANT$mp + 78
24  libdispatch.dylib               0x35f83dbc _dispatch_queue_invoke$VARIANT$mp + 36
25  libdispatch.dylib               0x35f8491a _dispatch_root_queue_drain + 182
26  libdispatch.dylib               0x35f84abc _dispatch_worker_thread2 + 80
27  libsystem_c.dylib               0x3b017a0e _pthread_wqthread + 358
28  libsystem_c.dylib               0x3b0178a0 start_wqthread + 4 
```

为什么会发生这种情况的任何想法或线索？我猜它与 NSURLCache 有关，但我不会在我的应用程序中操作甚至创建该对象。

我正在使用 Xcode 4.5 GM - 我知道它尚未公开发布 - 和 AFNetworking 1.0RC3 用于网络通信和下载图像数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T11:27:15.550

从数字 10 和 11 的情况来看，它内存不足并引发了异常，可能是某种断言的一部分。

您可能会在设备的控制台日志中找到异常信息。如果您可以将设备连接到 Mac，则可以在 Xcode 中访问这些数据。设备不会保留太多控制台数据，因此最好在遇到错误后尽快获取日志。

# perl - perl lwp 表单帖子

> ID：12487902
> 
> 赞同：0
> 
> 时间：2012-09-19T02:49:11.573
> 
> 标签：perl, cgi, lwp

我正在尝试使用 LWP 将一些内容发布到托管服务，对此我无法控制，即我必须符合他们的标准。

基本上，内容必须在看起来类似于以下内容的帖子中进行：

```
POST / HTTP/1.1
Accept:*/*
Content-Type: text/xml
[various other headers]

<?xml version="1.0" encoding="UTF-8"?>
<xmlContent>here</xmlContent> 
```

我正在查看 LWP 文档，其示例如下所示：

```
$response = $browser->post( $url,
   ['form' => '<?xml version="1.0" encoding="UTF-8"?><content>foobarbaz</content>'],
   'Content_Type' => 'text/xml', 
   'headerkey2' => 'hvalue2', 
 ); 
```

所以相反，我的数据是这样的：

```
[headers]

form=<?xml blah blah blah 
```

我不想要那里的“form =”。

我已经尝试了一些解决方法，但我最终没有发送任何内容，或者最后有一个额外的“=”符号。看起来这应该很容易......有什么方法可以让我的内容作为帖子的正文而没有变量名？

除了使用 LWP 之外，我也愿意做其他事情，这只是我的出发点，因为我以前使用过它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T04:49:39.987

我认为您不需要表格：

```
 $req = HTTP::Request->new(POST => $url);
  $req->header("Content-Type" => "text/xml");
  $req->content(<<EOT);
  <?xml version="1.0" encoding="UTF-8"?>
  <xmlContent>here</xmlContent>
  EOT 
```

# c - 在 C 中执行冒泡排序的函数提供不稳定的结果

> ID：12487904
> 
> 赞同：-1
> 
> 时间：2012-09-19T02:49:22.077
> 
> 标签：c, bubble-sort, cs50

我正在参加哈佛的公开课件并尝试做作业题。我用 C 编写（或试图）编写一个程序来使用冒泡排序实现对数组进行排序。完成后，我用大小为 5、6、3 等的数组对其进行了测试。一切正常。然后，我尝试使用大小为 11 的数组对其进行测试，然后它就开始出现问题。该程序被编写为在达到用户输入的数组大小后停止获取数组的数字。但是，当我使用数组大小​​ 11 对其进行测试时，它会不断尝试从用户那里获取更多值，超过声明的大小。它对我持续了几天，然后第三天我尝试将数组大小变量初始化为 0，然后突然之间它会继续遇到相同的问题，数组大小为 4 或更大。我取消了初始化，它继续对超过 4 的数组大小做同样的事情。我不明白为什么该程序适用于某些数组大小而不适用于其他数组大小。我使用 main 从键盘获取数组大小和值，然后将其传递给我编写的名为 sort 的函数。请注意，这不是家庭作业或任何我需要获得学分的东西，它仅用于学习。任何意见将不胜感激。谢谢。

```
/**************************************************************************** 
 * helpers.c
 *
 * Computer Science 50
 * Problem Set 3
 *
 * Helper functions for Problem Set 3.
 ***************************************************************************/

#include <cs50.h>
#include <stdio.h>

#include "helpers.h"

void 
sort(int values[], int n);

int main(){

    printf("Please enter the size of the array \n");
    int num = GetInt();
    int mystack[num];
    for (int z=0; z < num; z++){
        mystack[z] = GetInt();
    }

    sort(mystack, num);
}

/*
 * Sorts array of n values.
 */

void 
sort(int values[], int n)
{
    // this is a bubble sort implementation
    bool swapped = false; // initialize variable to check if swap was made

    for (int i=0; i < (n-1);){ // loops through all array values

        if (values[i + 1] > values [i]){ // checks the neighbor to see if it's bigger
            i++; // if bigger do nothing except to move to the next value in the array
        }
        else{ // if neighbor is not bigger then out of order and needs sorting
            int temp = values[i]; // store current array value in temp variable for swapping purposes
            values[i] = values[i+1]; //swap with neighbor
            values[i+1] = temp; // swap neighbor to current array value
            swapped = true; // keep track that swap was made
            i++;
       }

       // if we are at the end of array and swap was made then go back to beginning
       // and start process again.
       if((i == (n-1) && (swapped == true))){ 
           i = 0;
           swapped = false;
       }

       // if we are at the end and swap was not made then array must be in order so print it
       if((i == (n-1) && (swapped == false))){
           for (int y =0; y < n; y++){
                printf("%d", values[y]);
           }
           // exit program
           break; 
       }

   } // end for

   // return;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T04:30:16.987

您可以轻松使用 2 个嵌套的 for 循环：

```
int i, j, temp ;
for ( i = 0 ; i < n - 1 ; i++ )
{
    for ( j = 0 ; j <= n - 2 - i ; j++ )
    {
        if ( arr[j] > arr[j + 1] )
        {
            temp = arr[j] ;
            arr[j] = arr[j + 1] ;
            arr[j + 1] = temp ;
        }
    }
} 
```

你现在也应该是 c++ 代码而不是 ac，因为 c 没有类似的东西：

```
int mystack[num]; 
```

并且您应该在创建数组时输入一个数字并且不能使用变量（例如代码中的“int num”）。这是在 C 中，但在 C++ 中你做对了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T04:48:56.853

调试此类问题时要做的第一件事是确保计算机正在查看您认为它应该查看的数据。您可以通过在输入数据时打印数据来做到这一点。您的输入有问题；打印出计算机看到的内容：

```
static void dump_array(FILE *fp, const char *tag, const int *array, int size)
{
    fprintf(fp, "Array %s (%d items)\n", tag, size);
    for (int i = 0; i < size; i++)
        fprintf(fp, "  %d: %d\n", i, array[i]);
}

int main(void)
{
    printf("Please enter the size of the array \n");
    int num = GetInt();
    printf("num = %d\n", num);
    int mystack[num];
    for (int z = 0; z < num; z++)
    {
        mystack[z] = GetInt();
        printf("%d: %d\n", z, mystack[z]);
    }

    dump_array(stdout, "Before", mystack, num);
    sort(mystack, num);
    dump_array(stdout, "After", mystack, num);
} 
```

这将在输入时为您提供输入内容的直接指示，这可能会帮助您识别出了什么问题。打印输入是一种非常基本的调试技术。

此外，从风格上讲，拥有一个应该调用的函数`sort_array_and_print()`表明你没有正确的分工；排序代码应该排序，并且应该使用单独的函数（如`dump_array()`我展示的函数）来打印数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T01:29:49.417

事实证明，这样做的原因是因为在将数组的邻居与自身进行比较时，如下所示：

如果（值 [i + 1] > 值 [i]）

事实上，我只是检查它是否大于，而没有检查它是否是 '=' 那么它导致它的行为不受欢迎。因此，如果数组是例如 [1, 1, 5, 2, 6, 8]，那么 1 就在 1 旁边，我的程序没有考虑到这种行为，而是按照它的方式行事。

# windows-7 - Firebird x Windows 7 x gds32.dll 错误

> ID：12487905
> 
> 赞同：9
> 
> 时间：2012-09-19T02:50:08.757
> 
> 标签：windows-7, firebird

我有一个来自新客户的 fdb 文件（firebird）（他不知道版本）。我曾尝试使用一些 GUI 来访问数据库，但没有运气。他们都说它缺少 gds32.dll，但我有这个。

我已将此 dll 复制到 GUI 文件夹，已将 dll 复制到 system32 文件夹，并已复制到 syswow64。我正在运行 Windows 7 64 位，而 firebird 数据库是 32 位。我试图安装 dll 但我无法注册它。

我已经在虚拟机中安装了WinXP，看它是否运行，但没有。regsvr32 告诉我它不是一个可执行文件......在 Win 7 中，这个 dll 可能与 Windows 版本不兼容。

我尝试过 IbExpert Personal、Ibmanager 和 Flamerobin，它们向我显示了相同的错误，即找不到或未安装 dll。

如何打开这个火鸟数据库？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-19T06:41:58.657

您需要一个正在运行的 Firebird 服务器才能访问您的数据库。如果您只想访问数据，那么最简单的方法是：

1.  获取免费[的 FDBConvert 实用程序](http://gsbelarus.com/gs/fdbconvert/)并将数据库升级到 Firebird 2.5 格式
2.  安装火鸟 2.5 服务器。[从这里](http://www.firebirdsql.org/en/server-packages/#Win32)获取设置。如果您的 GUI 工具是 32 位应用程序，请使用 Win32 版本。在安装期间检查“将客户端库生成为 GDS32DLL 以支持旧版应用程序？”。
3.  确保 Firebird 服务正在运行并尝试连接到数据库。

如果稍后将由旧应用程序访问数据库，则您必须：

1.  确定所需的 Firebird 版本。使用**gstat -h dbname.fdb**命令。检查**ODS 版本**值。[在此处](http://gedemin.blogspot.com/2012/08/firebird.html)的表格中，您将找到 ODS 编号和 Firebird 版本之间的对应关系。gstat 实用程序是服务器安装的一部分。
2.  [从这里](http://www.firebirdsql.org/en/downloads/)下载并安装适当版本的 Firebird 服务器。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-02-05T19:43:17.650

修复 Flamerobin - 缺少 gds32.dll 或 fbclient.dll 问题：

1.  检查您运行的是哪个版本的 Firebird - 32 位还是 64 位？
2.  为 32 位 Firebird 安装 32 位 Flamerobin 或为 64 位 Firebird 安装 64 位 Flamerobin。

安装正确的版本解决了我的问题。

干杯!

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-22T18:28:49.917

firebird 服务器已安装，但我不知道为什么出了点问题。所以，我卸载了所有的 firebird 软件包并重新安装。我想我的安装顺序错误，因为我在 firebird 之前安装了 ODBC (Firebird_ODBC_2.0.1.152_Win32)。

现在一切正常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-25T19:06:13.793

我在 Windows 7 64 位上遇到了完全相同的问题。解决方案是：

1.  将 fbclient.dll 和 GDS32.DLL 复制到 system32 和 SySWOW64 文件夹。
2.  `regsvr32 fbclient`&`regsvr32 GDS32.DLL`在两个文件夹上。即使收到错误消息，我也忽略了它们。
3.  转到 Program Files (x86)\FlameRobin 并右键单击 flamerobin.exe 并选择与 Windows XP (Service Pack 3) 兼容执行。另外，检查以管理员身份执行。

而已！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-11T07:35:28.870

重新安装firebird，并在安装过程中检查您是否要安装dll。

# xml - 用perl写一个tr069模拟客户端？

> ID：12487907
> 
> 赞同：1
> 
> 时间：2012-09-19T02:51:01.610
> 
> 标签：xml, soap, xml-rpc

我是soap和cwmp的新手，我想写一个假的tr069客户端来与acs服务器（比如openACS）通信，我尝试了SOAP::Lite & XML::Compile::SOAP，但仍然无法格式化与 acs 通信的正确消息正文，有什么提示和教程吗？
非常感谢！
问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-05T08:39:54.137

这是您要查找的内容（没有 perl 实现）

常规： [https ://github.com/andersnorgaard/groovycpe](https://github.com/andersnorgaard/groovycpe)

Java： [https ://github.com/paraam/tr069-simulator](https://github.com/paraam/tr069-simulator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T16:41:32.967

确切的问题是什么？您正在发送 Inform 并且没有从 ACS 获得 InformResponse？也许您的 Inform 消息不符合 cwmp 方案 - 很难猜到。

# android - 无法连接到 xmpp 服务器

> ID：12487913
> 
> 赞同：0
> 
> 时间：2012-09-19T02:52:21.843
> 
> 标签：android, xmpp, local, connect

我尝试使用 xmpp 连接到 Gmail 服务器。它有效。但是当我尝试连接我的本地 xmpp 服务器时它不起作用。这是片段

```
// Create a connection
    SmackConfiguration.setPacketReplyTimeout(500);

    ConnectionConfiguration connConfig =
            new ConnectionConfiguration("ubuntu", 5222,"ubuntu");
    XMPPConnection connection = new XMPPConnection(connConfig);

    try {
        connection.connect();
        Log.i("XMPPClient", "[SettingsDialog] Connected to " + connection.getHost());
    } catch (XMPPException ex) {
        Log.e("XMPPClient", "[SettingsDialog] Failed to connect to " + connection.getHost());
        Log.e("XMPPClient", ex.toString());
        xmppClient.setConnection(null);
    } 
```

# java - 使用 ListIterator 从列表中删除项目

> ID：12487915
> 
> 赞同：0
> 
> 时间：2012-09-19T02:52:25.007
> 
> 标签：java, arrays, string, list

代码：

```
 Random Picker = new Random();
 List<String> list = new ArrayList<String>();
  list.add("card1");
  list.add("card2");
  list.add("card3");

  ListIterator listIterator = list.listIterator();
  String c1, c2, c3;
  c1 = list.get(Picker.nextInt(list.size()));
  listIterator.remove(); 
```

执行此操作时出现 java 错误。我想要做的是将 c1 设置为`list.get(Picker.nextInt(list.size()));` 然后从列表中删除选择的卡。换句话说，我希望字符串 c1 从列表中随机选择，然后将它选择的卡从列表中删除，但保留在值 c1 中。我想我当前的代码不起作用，因为当我删除它选择的内容时，它也会从字符串 c1 中删除卡片。我不知道如何正确地做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T03:05:16.817

您没有使用迭代器从集合中删除元素。您正在从刚刚实例化的迭代器中调用 remove 。如果您查看`ListIterator`文档，您会发现`remove`：

> 每次调用下一个或上一个时，此调用只能进行一次。只有在最后一次调用 next 或 previous 之后没有调用 ListIterator.add 时，才能执行此操作。

这意味着，如果不调用`next()`迭代器来获取第一个元素，您仍然处于非法状态。

无论如何，根本不需要使用迭代器。from的`remove(int index)`方法`List<E>`可以解决问题：

```
String c1 = list.remove(rand.nextInt(list.size)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T03:24:52.603

我同意杰克的观点。此外，您可以`Random`通过调用来替代使用该类`Collections.shuffle(list)`。顾名思义，它将为您随机化您的列表。使用你的`listIterator`你可以遍历列表并选择你的卡片，将它们存储在另一个列表中。它看起来像：

```
List<String> list = new ArrayList<String>();
list.add("card1");
list.add("card2");
list.add("card3");

Collections.shuffle(list);

ListIterator<String> listIterator = list.listIterator();
List<String> pickedCards = new ArrayList<String>();

while(listIterator.hasNext()) {
    pickedCards.add(listIterator.next());
}

String c1 = pickedCards.get(0);
String c2 = pickedCards.get(1);
String c3 = pickedCards.get(2); 
```

c1、c2 和 c3 的值现在将类似于`"card2"`、`"card1"`和`"card3"`

# java - 抽象类错误：线程“主”java.lang.NullPointerException 中的异常

> ID：12487916
> 
> 赞同：0
> 
> 时间：2012-09-19T02:52:49.223
> 
> 标签：java, arrays, inheritance, abstract

这是完整的错误

```
Exception in thread "main" java.lang.NullPointerException
    at EmployeeManager.addEmployee(EmployeeManager.java:38)
    at EmployeeDriver.main(EmployeeDriver.java:231) 
```

这是错误的来源

```
public class EmployeeManager
{
private Employee[] employees;
private final int employeeMax = 100;
private int currentEmployees;

public EmployeeManager()
{
    Employee[] employees = new Employee[employeeMax];
    currentEmployees = 0;
}

public void addEmployee(int eType, String fn, String ln, char m, char g, int empNum, boolean ft, double a)
{
    double sales = 0.0, hoursWorked = 0.0;
    switch (eType)
    {
       /*error*/ case 1: employees[currentEmployees] = new HourlyEmployee(fn, ln, m, g, empNum, ft, a, hoursWorked);
                currentEmployees++;
                break;

        case 2: employees[currentEmployees] = new SalaryEmployee(fn, ln, m, g, empNum, ft, a);
                currentEmployees++;
                break;

        case 3: employees[currentEmployees] = new CommissionEmployee(fn, ln, m, g, empNum, ft, a, sales);
                currentEmployees++;
                break;
    }
} 
```

///////////////////////////////////////// //////////////////////////////////

```
 //Add Employee
            case 2:
                String fn, ln;
                char mi, g, f;
                boolean ft = true;
                do
                {
                    System.out.println("\n1\. Hourly");
                    System.out.println("2\. Salary");
                    System.out.println("3\. Commission");
                    System.out.print("Enter Choice: ");
                    subInput1 = in.nextInt();

                    if(subInput1 < 1 || subInput1 > 3)
                    {
                        System.out.println("Invalid Choice! Choose again.");
                    }
                }while(subInput1 < 1 || subInput1 > 3);

                System.out.print("Enter Last Name: ");
                ln = in.next();
                System.out.print("Enter First Name: ");
                fn = in.next();
                System.out.print("Enter Middle Initial: ");
                mi = in.next().charAt(0);
                System.out.print("Enter Gender: ");
                g = in.next().charAt(0);
                System.out.print("Enter Employee Number: ");
                en = in.nextInt();
                System.out.print("Full Time? (y/n): ");
                f = in.next().charAt(0);
                if(f == 'n' || f == 'N')
                {
                    ft = false;
                }

                if(subInput1 == 1)
                {
                    System.out.print("Enter wage: ");
                }
                else if(subInput1 == 2)
                {
                    System.out.print("Enter salary: ");
                }
                else
                {
                    System.out.print("Enter rate: ");
                }
                amount = in.nextDouble();

     /*error*/  em.addEmployee(subInput1, fn, ln , mi, g, en, ft, amount);
                em.removeRedundancies();
                break; 
```

现在就我而言，我正在创建一个 HourlyEmployee 的新实例，它将所有这些值保存在员工数组中。HourlyEmployee 是超类 Employee 的子类。这是我的这两个代码。

```
public class HourlyEmployee extends Employee
{
private double wage;
private double hoursWorked;

public HourlyEmployee(String fn, String ln, char m, char g, int empNum, boolean ft, double w, double h)
{
    super (fn, ln, m, g, empNum, ft);
    wage = w;
    hoursWorked = h;
    hoursWorked = 0.0;
}

@Override
public String toString()
{
    return this.getEmployeeNumber() + "\n" + lastName + ", " + firstName + middleInitial + "\n" + "Gender: "
     + this.getGender() + "\n" + "Status: " + fulltime + "\n" + "Wage: " + wage + "\n" + "Hours Worked: " + hoursWorked + "\n";
}

@Override
public double calculateWeeklyPay()
{
    if (hoursWorked > 40)
    {
        wage = wage * 2;
    }

    return wage * hoursWorked;
}

@Override
public void annualRaise()
{
    wage = (wage * .05) + wage;
}

@Override
public double holidayBonus()
{
    return wage * 40;
}

@Override
public void resetWeek()
{
    hoursWorked = 0.0;
}

public double plusHoursWorked(double amount, double h)
{
    while (amount <= 0)
    {
        System.out.println("Invalid value entered, please try again");
    }

    return amount + h;
}

} 
```

///////////////////////////////////////// //////////////////////////////////

```
public abstract class Employee
{
protected String firstName;
protected String lastName;
protected char middleInitial;
protected boolean fulltime;
private char gender;
private int employeeNum;

public Employee (String fn, String ln, char m, char g, int empNum, boolean ft)
{
    firstName = fn;
    lastName = ln;
    middleInitial = m;
    gender = g;
    employeeNum = empNum;
    fulltime = ft;
}

public int getEmployeeNumber()
{
    return employeeNum;
}

public void setEmployeeNumber(int empNum)
{
    while (empNum <= 10000 && empNum >= 99999)
    {
        System.out.print ("Invalid input, please try again: ");
    }

    if (empNum >= 10000 && empNum <= 99999)
    {
        employeeNum = empNum;
    }
}

public String getFirstName()
{
    return firstName;
}

public String getLastName()
{
    return lastName;
}

public char checkGender(char g)
{
    if (g != 'M' || g != 'F')
    {
        g = 'F';
    }
    return g;
}
public char getGender()
{
    return gender;
}

@Override
public boolean equals(Object e2)
{
    if (this.employeeNum == ((Employee)e2).employeeNum)
    {
        return true;
    }
    else
    {
        return false;
    }
}

@Override
public String toString()
{
    return employeeNum + "\n" + lastName + ", " + firstName + "\n" + "Gender:" + gender + "\n" + "Status:" + fulltime + "\n";
}

public abstract double calculateWeeklyPay();

public abstract void annualRaise();

public abstract double holidayBonus();

public abstract void resetWeek();
} 
```

老实说，我不知道我做错了什么，如果有人能指出我正确的方向，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T02:54:26.220

当地申报

```
Employee[] employees = new Employee[employeeMax]; 
```

隐藏实例变量，尝试：

```
employees = new Employee[employeeMax]; 
```

否则，`employees`您正在实例化的是一个局部变量，它在调用构造函数后消失。

在你的情况下，你有

```
Employees[] e = NULL;

method()
{
   Employees[] e = new Employees[N]; // this declares a different variable with same name
}

method2()
{
  .. e[0] .. // exception: e was still NULL
} 
```

# python - django-grappelli 不工作

> ID：12487920
> 
> 赞同：3
> 
> 时间：2012-09-19T02:53:17.397
> 
> 标签：python, django, django-grappelli

我无法让[django-grappelli](http://django-grappelli.readthedocs.org/)工作。以下是我所做的 -

1.  使用`pip install django-grappelli`.
2.  `grappelli`在**INSTALLED_APPS**中的 ' '之前添加了 ' `django.contrib.admin`' 。
3.  在 urls.py 中`url(r'^grappelli/', include('grappelli.urls'))`，在 admin url 之前添加了 URL 定义，即。`url(r'^admin/', include(admin.site.urls))`
4.  执行`syncdb`和`collectstatic`命令。

现在，当我运行命令 runserver 并浏览*localhost:8000/admin/*时，令人惊讶的是我得到了默认管理员。

我在 Google Chrome 网络选项卡（在开发者工具中）检查了请求流量，我没有看到任何以 Grappelli 开头的 url 请求。

我不知道我做错了什么。我在 Windows 7 机器上的 virtualenv 中使用 Django 1.4.1-final。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-08-25T12:17:00.750

`'grappelli'`在顶部添加后解决了这个问题`'django.contrib.admin'`。

添加到卢西恩的答案，文档本身说，

插入`'grappelli'`顶部`'django.contrib.admin'`。

`INSTALLED_APPS`也会如此，

```
INSTALLED_APPS = (
    'grappelli',
    'django.contrib.admin',
) 
```

取自：[http ://django-grappelli.readthedocs.org/en/latest/quickstart.html](http://django-grappelli.readthedocs.org/en/latest/quickstart.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T13:54:09.653

我发现了这个问题。实际上，我之前已经覆盖了管理模板，用于标记我的管理员登录名和首页标题。所以，在我的模板目录中，有一些自定义模板的管理目录（我`django/contrib/admin/templates`根据我的要求从中复制和编辑）。因此，Grappelli 没有显示我的任何更改...

我从这里得到了提示 - [https://stackoverflow.com/a/12193858/1284552](https://stackoverflow.com/a/12193858/1284552)

当我删除它时，它按预期工作。另外，我只需要访问管理路径，而不是 Urls.py 中定义的 grappelli 路径。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-07T19:32:13.027

我有同样的事情，我改变了行的顺序，都赚了

'格拉佩利'，

'django.contrib.admin',

确保字符串 'django.contrib.admin' 写了 1 次

# android - 如何在 ListView 中处理来自 CheckedChangedListener 的事件

> ID：12487922
> 
> 赞同：0
> 
> 时间：2012-09-19T02:53:35.647
> 
> 标签：android

我在这个特定的类中实现了一个自定义 Listview，它看起来像

[图像/文本视图/复选框]

当有人点击文本时应该启动另一个类，这目前正在工作，但是当有人点击一个复选框时，我想更新一个存储所有复选框当前状态的数组，我尝试通过使用 onCheckedChanged 方法来做到这一点在自定义适配器中但是它不起作用，因为位置变量不是最终的。所以两个问题

适配器中的 1 是他们获取 Checkbox 位置的一种方式，因此我可以更改数组中的正确位置，并且

2 如果不是，他们在不破坏 onClick 当前功能的情况下在其他地方更新数组的另一种方法。

这是我的适配器中的 onCheckedChanged

```
CheckBox.setOnCheckedChangeListener(new OnCheckedChangeListener(){

    @Override
    public void onCheckedChanged(CompoundButton but, boolean b) {
        // TODO Auto-generated method stub

        if(but.isChecked())
        {
            deleteList[???] = true;
        }else{
            deleteList[???] = false;
        }
    }

   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T03:11:53.453

看看这个[方法](http://developer.android.com/reference/android/view/View.html#setTag%28int,%20java.lang.Object%29)。您可以将标签设置为包含您希望的任何对象的视图，在您的情况下，这可能是与 CheckBox 的行关联的整数值。

因此，当您创建 CheckBox 时：

```
but.setTag(new Integer(position)); 
```

这会将您的 if 语句更改为：

```
if (but.isChecked()){
    deleteList[((Integer) but.getTag()).intValue()] = true;
} else {
    deleteList[((Integer) but.getTag()).intValue()] = false;
} 
```

让我知道这是否有帮助！

# c++ - 为什么在分配值的类型可以容纳它时，根据数据类型在计算中发生溢出

> ID：12487923
> 
> 赞同：0
> 
> 时间：2012-09-19T02:53:38.567
> 
> 标签：c++

早些时候我想出了一些东西，我解决了，但后来让我看一个类似的例子：

```
int b = 35000000; //35million
int a = 30000000;
unsigned long n = ( 100 * a ) / b; 
```

输出：4294967260

我只是更改`a`为`unsigned long`，然后会出现正确的 85% 输出，因为`a`它是一个有符号的 32 位整数。但这让我后来。`a`期间没有赋值，`( 100 * a )`只是简单的计算，应该出现正确的值，即 30 亿，而不是溢出。要了解是否真的没有分配给`a`我，我`a`从代码中删除并改为手动写入值：

```
int b = 35000000;
unsigned long n = ( 100 * 30000000 ) / b; 
```

最大的惊喜是输出也是： 4294967260
当然可以将 30 亿的值分配给`unsigned long`. 我的第一个想法是`( 100 * 30000000 )`导致溢出，但后来我问“溢出什么？没有什么可以溢出”。然后我改成`b`无符号长，甚至最令人惊讶的是输出正确率为 85%。

在第一个示例中更改`a`为`unsigned long`

```
int b = 35000000;
unsigned long a = 30000000;
unsigned long n = ( 100 * a ) / b; 
```

并保持`b`原样`int`工作，但在第二个例子中它没有，发生了什么？

让我用工作的和不工作的重新编写所有示例，这可能有点压倒性。

作品（输出 = 85）：

```
int b = 35000000;
unsigned long a = 30000000;
unsigned long n = ( 100 * a ) / b; 
```

作品（输出 = 85）：

```
unsigned long b= 35000000;
unsigned long n = ( 100 * 30000000 ) / b; 
```

不起作用（溢出）：

```
int b = 35000000;
int a = 30000000;
unsigned long n = ( 100 * a ) / b; 
```

不起作用（溢出）：

```
int b = 35000000;
unsigned long n = ( 100 * 30000000 ) / b; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T03:26:47.873

让我解释一下这里发生了什么。
上：

```
int b= 35000000;
unsigned long n = ( 100 * 30000000 ) / b; 
```

该值不正确，因为溢出发生在`( 100 * 30000000 )` But on：

```
unsigned long b= 35000000;
unsigned long n = ( 100 * 30000000 ) / b; 
```

值是正确的，那么发生了什么？

在第一个示例`b`中是 a `int`，正如 Tony 所说，发生溢出是因为`( 100 * 30000000 )`分配临时值 的寄存器能够保存 32 位有符号整数，这是因为 100 是 int 而 30000000 也是 int **AND**因为`b`是也是一个 int，这种情况下的寄存器是智能的，当右侧的**所有**`int`值都是时，它假定这些值也必须是 an，`int`但是当一个强大`unsigned long`的人参加聚会时，它知道将 an 除以 an`int`是`unsigned long`错误的`/ b`，所以它将 的值存储`( 100 * 30000000 )`到`unsigned long`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T03:06:44.320

在 C++ 中，有一些称为“文字常量”的编程元素。

例如（取自[这里](http://msdn.microsoft.com/en-us/library/c70dax92%28v=vs.80%29.aspx)）：

> 157 //整数常量
> 
> 0xFE //整数常量
> 
> 'c' // 字符常量
> 
> 0.2 // 浮动常量
> 
> 0.2E-01 // 浮动常量
> 
> "dog" // 字符串字面量

所以，回到你的例子，将两个s`100 * 30000000`相乘。`int`这就是为什么会有溢出。任何时候对相同类型的操作数执行算术运算，都会得到相同类型的结果。此外，在代码片段`unsigned long a = 30000000;`中，您将获取一个整数常量并将其分配给type`30000000`的变量。`a``unsigned long`

要获得所需的输出，`ul`请在末尾添加后缀：`unsigned long n = ( 100ul * 30000000ul ) / b;`.

[这是一个](http://www.tutorialspoint.com/cplusplus/cpp_constants_literals.htm)对后缀进行解释的网站。

> 为什么 /b 当 b 是 unsigned long 时仍然是一个有趣的问题

因为在除以*之前*`100 * 30000000`执行，并且操作数都是 type 。*`b``int`*

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T04:20:36.797

> 作品（输出 = 85）：

```
unsigned long b= 35000000;
unsigned long n = ( 100 * 30000000 ) / b; 
```

不在这里，使用：

```
#include <iostream>

int main() {
    unsigned long b= 35000000;
    unsigned long n = ( 100 * 30000000 ) / b;
    std::cout << n << std::endl;
    return 0;
} 
```

输出为 527049830640 （即使使用默认警告级别，编译器也会警告溢出）。

关键是，正如[Mark Ransom](https://stackoverflow.com/users/5987/mark-ransom) [已经写](https://stackoverflow.com/a/12488096/1011995)的那样，算术运算的类型取决于其操作数的类型。

常量 100`int`的类型是 ，常量 30000000 的类型也是如此（假设 32 位或更大`int`的 s，`long int`如果`int`是 16 位）。所以乘法是在 type 处执行的`int`，并且对于 32 位`int`s 它会溢出。溢出是未定义的行为，但环绕是该未定义行为的最常见表现，导致 value `-1294967296`。然后将乘法的结果转换为除法的类型`b`（因为它是无符号类型并且 - 在 C 术语中 - 它的整数转换等级不小于 的`int`）。

转换为无符号整数类型意味着减少模 2^WIDTH。如果 的宽度`unsigned long`为 32，则最后一次转换的结果为`2^32 - 1294967296 = 3000000000`，从而得到商 85。但如果 - 在我的系统上 - 的宽度`unsigned long`为 64 位，则该转换的结果为`2^64 - 1294967296 = 18446744072414584320`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T03:18:29.103

32 位有符号整数可以表示的最大数不溢出是 2147483647。100*30000000 比这个大。

算术运算的类型完全独立于您将其存储到的变量的类型。它基于操作数的类型。如果两个操作数都是 type `int`，则结果也将是 type `int`，然后该结果将在存储到变量之前进行转换。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T03:16:50.430

另一种常见的解决方案是在对其进行操作之前将其中一个常量类型转换为更大的结果类型。我更喜欢这种方法，因为不是每个人都记得所有可能的后缀。包括我自己。

在这种情况下，我会使用：

```
unsigned long n = ( (unsigned long)100 * 30000000 ) / b; 
```

可悲的是，这是一件事汇编语言——是的，*汇编语言*——在 C、C++ 和许多其他语言中没有做到这一点：将*M*位整数乘以*N*位整数的结果是 ( *M +N* ) 位整数，而不是 (max( *M* , *N* )) 位整数。

编辑：马克提出了一个有趣的观点：编译器*不会*“向前看”到结果的存储位置以推断结果类型。因此，C++ 要求任何子表达式的结果本身是确定性的。换句话说，`100 * 30000000`总是可以在不查看任何其他代码的情况下确定确切的类型。*

# email - CakePHP 传递变量以使用 CakeEmail 发送电子邮件

> ID：12487924
> 
> 赞同：0
> 
> 时间：2012-09-19T02:53:43.547
> 
> 标签：email, cakephp

在 CakePHP 2.x 中，如何在表单中创建变量以便将其传递给 CakeEmail 函数？

我目前有一个 php 文件“email.php”，其中包含输入“to”、“subject”和“message”的表单。此表单传递给一个名为“email_send.php”的文件，但我无法获取要传递的输入。

这是“email.php”代码；

```
<?php $this->Html->addCrumb('New Email', '#'); ?>

<div id="email_page" class="span12">
    <div class="row">

<?php echo $this->Form->create('Email', array('controller'=>'person', 'action'=>'email_send.php'));
    echo $this->Form->input('To: ', array('class'=>'email_form','label'=>'To: ','value'=>$email['Person']['primEmail']));
    echo $this->Form->input('Subject: ', array('class'=>'email_form','label'=>'Subject: '));
    echo $this->Form->input('Message: ', array('class'=>'email_form email_body', 'type'=>'textarea','label'=>'Message: '));
    echo $this->Form->end('Send', array('class'=>'pull-right')); ?>

    </div>
</div> 
```

这是“email_send.php”代码。变量 $to、$subject 和 $message 是我放在那里的变量，假设我需要从以前的表单中传递这个函数变量。

```
<?php

$email = new CakeEmail();
$email->from(array('info@info' => 'InfoSite'))
    ->to($to)
    ->subject($subject)
    ->send($message);

?> 
```

这是关于 CakePHP 2.x 的 CakeEmail 的文档；

[http://book.cakephp.org/2.0/en/core-utility-libraries/email.html](http://book.cakephp.org/2.0/en/core-utility-libraries/email.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:00:34.770

```
<?php
    App::uses('CakeEmail', 'Network/Email');
    $email = new CakeEmail();
    $email->from(array('info@info' => 'InfoSite'))
         ->to($to)
         ->subject($subject)
         ->send($message);

     ?> 
```

阅读我的博客以发送电子邮件：

[http://chetan4cake.blogspot.in/2012/07/email-in-cakephp-20.html](http://chetan4cake.blogspot.in/2012/07/email-in-cakephp-20.html)

# ios - 无法在 UIScrollView 中居中 UIImage

> ID：12487935
> 
> 赞同：1
> 
> 时间：2012-09-19T02:55:28.520
> 
> 标签：ios, uitableview, uiscrollview, uiimage

我的 UiTableViewController 的 ViewDidLoad 中有以下代码：

```
UIImage *noImage = [UIImage imageWithContentsOfFile:pathOfNoImageFile];
UIImageView *imageview = [[UIImageView alloc] initWithImage:noImage];

[imageview setContentMode:UIViewContentModeScaleAspectFit];
imageview.frame = workingFrame;
[self.scrollview addSubview:imageview];
workingFrame.origin.x = workingFrame.origin.x + workingFrame.size.width;

[self.scrollview setPagingEnabled:YES];
[self.scrollview setContentSize:
      CGSizeMake(workingFrame.origin.x,workingFrame.size.height)]; 
```

因此，我只能看到部分图像并附上了屏幕截图。

![在此处输入图像描述](../Images/780c64372e9022b10dd5c0a60a39334b.png)

我能做些什么来解决它？我已经谷歌搜索并查看了几个 Stack Overflow 问题，但无法让它工作。请建议。我在 uitableviewcell 中有一个滚动视图。我需要将图像垂直居中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T03:27:43.420

您的滚动视图/单元格大小需要足够大以容纳您要显示的图像视图。看起来一个或两个都太小了，所以我会相应地调整你的尺寸。

# jquery - JQuery UI（效果核心）在一个具有多个选择器的元素上添加类/删除类......但有一个问题

> ID：12487937
> 
> 赞同：3
> 
> 时间：2012-09-19T02:55:37.617
> 
> 标签：jquery, animation, multiple-instances, css-selectors, toggleclass

谢谢参观。我正在尝试使用 jQ UI addClass / remove Class 方法在单击前面的同级 div 时展开 hr 元素。jQ UI 效果核心支持两个类之间的平滑动画过渡：http: [//jqueryui.com/demos/removeClass/](http://jqueryui.com/demos/removeClass/)。此外，必须使用 $ 动态添加 hr 以实现更广泛的站点设计。

以下是拼图的部分：

1.  我的代码呈现四个 100x100px 兄弟 div 的行。这些 div 没有类，但如果有帮助，请随时添加它们——每个 div 最终都会有一个独特的类。在每 4 个 div 之后，动态添加一个 hr。
2.  单击任何给定的 div 后，下一小时必须切换到“打开”类，这会导致行扩展。如果再次单击此 div，它必须从 hr 切换/删除“open”类，导致 hr 缩小到其原始大小。
3.  如果点击一个div展开一个hr，然后点击另一个div，则必须触发两个动画：首先，必须删除“open”类，导致行缩回，然后必须重新添加该类重新打开该行。但是，例如，如果单击一个 div 打开第二行，然后单击第一个 hr 之前的第二个 div，则此操作必须先关闭第二个 hr，然后再打开第二个 div 对应的 hr。

我被困住了。我尝试了许多 jQ 函数组合，但结果很奇怪。你看到的是我得到的最接近的。感谢您试一试。随意添加到代码中，但是你可以让它工作。

```
<!--HTML...the children divs of ".main" can have their own unique classes if that helps-->
<div class="main">
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
</div>

/*CSS-some of this creates other events not mentioned above. These are simplified versions of what I need for my final site design*/

.main  {
    width: 450px;
}
.main div {
    height: 100px;
    width: 100px;
    background-color: #000;
    margin: 3px;
    float:left;
}
div.select   {
    background-color: #f00;
    border: 2px solid #00F;
    margin: 3px;
    float:left;
    display: block;
}
div.active   {
    background-color: #f00;
    margin: 3px;
    float:left;
    display: block;
}
hr  {
    background-color: #FF0;
    float: left;
    display: block;
    height: 20px;
    width: 450px;
}
hr.open {
    float: left;
    display: block;
    height: 300px;
    width: 450px; 
```

}

```
/*the JS - sorry about the double quotes.  I'm using Dreamweaver, which seems to add them to everything*/

$(document).ready(function() {
//dynamcally adds the <hr> after every 4th div.
    $(".main div:nth-child(4n)").after('<hr class="closed"></hr>');
//puts a blue border on the squares
    $('.main div').hover(function()  {
        $(this).addClass('select');
    },
    function() {
        $(this).removeClass('select')
    });
//changes the color of the active square to red and "deactivates" the previous one.
    $('.main div').click(function()  {
        $(this).toggleClass('active').siblings().removeClass('active');
    });
//here in lies the problem...???
    $('.main div').click(function()  {
        $('hr').removeClass('open', 1000);
        $(this).toggle
        (function() {
            $(this).nextAll("hr").first().addClass('open', 500);
        },
        function()  {
            $(this).nextAll("hr").first().removeClass('open', 500)
        });

    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:34:46.747

我很确定这就是你想要的，我从[http://makr.com](http://makr.com)复制了一般的 HTML 布局（你提到这就是你想要的）：

演示：http: [//jsfiddle.net/SO_AMK/xm7Sk/](http://jsfiddle.net/SO_AMK/xm7Sk/)

jQuery：

```
$(".main article:nth-child(4n)").after('<hr class="split"></hr>');
$(".main > article .slidedown").click(function(e) {
        e.stopPropagation();
}); // If you click on the slidedown, it won't collapse

var canAnimate = true,
    slideIsOpen = false,
    animateSpeed = 1000;

$(".main > article").hover(function() {
    $(this).addClass("hover");
}, function() {
    $(this).removeClass("hover");
}).click(function() {
    if (canAnimate) {
        canAnimate = false;
        var article = $(this),
            isThisOpen = article.hasClass("active");
        if (isThisOpen) {
            $(".main").queue(function () {
                hideSlide($(this))
            });
        }
        else {
            if (slideIsOpen) {
                $(".main").queue(function () {
                    hideSlide($(this));
                }).queue(function () {
                    positionPage(article, $(this));
                }).queue(function () {
                    showSlide(article, $(this));
                }).queue(function () {
                    positionPage(article, $(this));
                });
            }
            else {
                $(".main").queue(function () {
                    positionPage(article, $(this));
                }).queue(function () {
                    showSlide(article, $(this));
                }).queue(function () {
                    positionPage(article, $(this));
                });
            }
        }
    }
});

function showSlide(elm, main) {
        canAnimate = false;
        slideIsOpen = true;
        elm.nextAll("hr.split").first().addClass("active", animateSpeed);

        elm.children(".slidedown").css("top", (elm.offset().top + 114)).addClass("active").slideToggle(animateSpeed);

        elm.addClass("active");
        main.dequeue();
        canAnimate = true;
}

function hideSlide(main) {
        canAnimate = false;
        $(".main article.active").nextAll("hr.split.active").removeClass("active", animateSpeed);

        $(".main article.active").children(".slidedown").removeClass("active").slideToggle(animateSpeed);

        $(".main article.active").removeClass("active");
        $(main).dequeue();
        canAnimate = true;
        slideIsOpen = false;
}

function positionPage(elm, main) {
    canAnimate = false;
    var body;
    if ($.browser.safari) {
        body = $("body");
    }
    else {
        body = $("html");
    }
    var elmTop = elm.offset().top,
        bodyScroll = body.scrollTop();
    if (bodyScroll - elmTop == 0) {
        var speed = 0;
    }
    else {
        var speed = animateSpeed;
    }
    body.animate({
        scrollTop: elmTop
    }, speed, function () {
        main.dequeue();
        canAnimate = true;
    })
}​ 
```

对于这么小的东西，这可能看起来像是一个大脚本，但它有一些故障保险。唯一的错误是，如果您在转换过程中开始快速单击，有时队列会以错误的顺序结束。但是，一般用户在动画期间不会快速点击：D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T14:57:52.077

试试这个尺寸：http: [//jsfiddle.net/Bv57T/3/](http://jsfiddle.net/Bv57T/3/)

主要变化：

1.  您有 2 个 .click 绑定到同一个选择器`$('.main div')`。我相信，这在技术上是受支持的，但没有理由这样做，它使您的代码更难遵循。
2.  `.toggle()`不将函数作为参数。检查它的[文档](http://api.jquery.com/toggle/)；它不像`hover()`。
3.  没有理由为添加和删除设置单独的功能。您还删除了两次课程。您是否希望下一个 HR 动画化并保持开放？还是希望它立即打开和关闭？如果是后者，这条线就没有理由了`$('hr').removeClass('open', 1000);`。如果是前者，则没有理由使用第二个 function() `$(this).nextAll("hr").first().removeClass('open', 500)`。

这是我在小提琴中使用的javascript

```
$(document).ready(function() {
    //dynamcally adds the <hr> after every 4th div.
    $(".main div:nth-child(4n)").after('<hr class="closed"></hr>');
    //puts a blue border on the squares
    $('.main div').hover(
        function()  {
            $(this).addClass('select');
        },
        function() {
            $(this).removeClass('select')
    });
    //changes the color of the active square to red and "deactivates" the previous one.
    $('.main div').click(function()  {
        $('hr.open').removeClass('open', 1000);
        if(!$(this).hasClass('active')) {
           $(this).nextAll("hr").first().addClass('open', 500);
        }
        $(this).toggleClass('active').siblings().removeClass('active');
    });
});​ 
```

如果这不是您想要的，并且无法从这里弄清楚，请继续发帖，我可以再试一次。

**编辑**新的和改进的版本：http: [//jsfiddle.net/Bv57T/4/](http://jsfiddle.net/Bv57T/4/) 也更新了上面的js。

如果您在动画正在进行时单击第二个 div，仍然可以伪造它。您可以通过在动画期间将（全局）布尔值设置为 true 并在开始下一个动画之前检查它来解决这个问题。

但问题的根源在于您正试图让 UI 的状态（换句话说，DOM）加倍作为应用程序的状态。即使是简单的操作（正如您所见），这也会变得非常棘手。对于此类事情，我首选的方法是使用将 UI 与应用程序分开的库。这些通常被称为 MVC（模型-视图-控制器）或 MVVM（模型-视图-视图模型——我讨厌的一个绰号，因为它故意让人感到困惑）。我最喜欢的是[knockout.js](http://knockoutjs.com/)。完全兼容 jQuery 和 jQuery UI；看看这个例子：[动画过渡](http://knockoutjs.com/examples/animatedTransitions.html)。

还有更多这样的库。Backbone.js 就是其中之一，knockback.js 结合了敲除和骨干。我知道我忘记了其他一些受欢迎的和好的...

# c# - 如何清空 C# xaml Metro 风格的目录？

> ID：12487940
> 
> 赞同：1
> 
> 时间：2012-09-19T02:56:00.017
> 
> 标签：c#, xaml

我有这个 c# 代码，我想删除文档库中的某个子目录。但是，这会产生错误，因为目录不为空。我希望有人可以指导我如何做到这一点。

感谢您的及时回复。

```
StorageFolder storageFolder = KnownFolders.DocumentsLibrary;              
var queryResult = storageFolder.CreateFolderQuery();
IReadOnlyList<StorageFolder> folderList = await queryResult.GetFoldersAsync();

 foreach (StorageFolder folder in folderList)
    {
       await folder.DeleteAsync();             
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T03:43:02.683

您可以使用`StorageFolder.GetFilesAsync()`获取文件夹中存在的所有文件的列表，并在删除文件夹之前将其删除，因为该`DeleteAsync()`方法无法指定子文件夹和文件。

更多信息：[StorageFolder 类](http://msdn.microsoft.com/library/windows/apps/BR227230)| MSDN

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-22T11:29:09.383

希望这可能会有所帮助。

```
 public async void deletefile()
        {
            StorageFolder sourceFolder =  ApplicationData.Current.TemporaryFolder;
           // sourceFolder = await sourceFolder.GetFolderAsync("Test");
           // await sourceFolder.DeleteAsync(StorageDeleteOption.PermanentDelete);

          // var files = await sourceFolder.GetFilesAsync();

           IReadOnlyList<StorageFile> folderList = await sourceFolder.GetFilesAsync();
            if (folderList.Count > 0)
            {
                foreach (StorageFile f1 in folderList)
                {

                    await f1.DeleteAsync(StorageDeleteOption.PermanentDelete);
                }
            }

           //StorageFile retfile = await ApplicationData.Current.TemporaryFolder.GetFileAsync("MysoundFile.mp3");
           // if (retfile != null)
           // {
           //     await retfile.DeleteAsync(StorageDeleteOption.PermanentDelete);
           // }

        } 
```

# ubuntu - 已安装 sun-java6-jdk 时，如何在 Ubuntu 10.04 上安装 OpenJDK？

> ID：12487943
> 
> 赞同：0
> 
> 时间：2012-09-19T02:56:37.660
> 
> 标签：ubuntu, java, openjdk

我在 Ubuntu 10.04 上安装了 sun-java6-jdk。但是，有一个软件只支持 OpenJDK。如果已经安装了 sun-java6-jdk，我可以在 Ubuntu 10.04 上安装 OpenJDK 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T03:02:17.973

是的。`update-alternatives`然后，当安装了多个 Java 包时，您可以使用它在 Java 包之间切换。

# upload - 如何在快递中添加上传进度条

> ID：12487945
> 
> 赞同：0
> 
> 时间：2012-09-19T02:56:43.440
> 
> 标签：upload, progress-bar, express

我正在使用 jquery_form 将文件上传到快递服务器，它可以工作。但是没有进度条。所以请帮助添加进度条。我相信很多人也需要这个。

所以这是代码

客户端：

```
$('#uploadvideoform').ajaxSubmit({
            error:function(xhr){
                alert(xhr);
            },
            success:function(response){
                var videopath = response.path;
                var videoview  = "<video width='320' height='240' controls='controls'>";
                    videoview += "<source src="+videopath+" type='video/mp4' />";
                    videoview += "Your browser does not support the video tag.";
                    videoview += "</video>";
                $('#view_product_video_content').append(videoview);
            },
        })

    return false; 
```

服务器端：

```
exports.upload = function(req, res){
 var serverPath = 'Temp\\' + req.files.productvideo.name;

 // console.log('req.files.productvideo.path '+req.files.productvideo.path)
 // console.log('F:\\unit2\\'+serverPath);
 require('fs').rename(
  req.files.productvideo.path,
  'F:\\unit2\\'+serverPath,
  function(error){
    if(error){
      console.log(error)
      return;
    }

    res.send({
      path:serverPath,
    });

  }); 
```

};

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T05:12:24.987

您可以使用普通的 XMLHttpRequest。[除了当前的IE](http://caniuse.com/#feat=xhr2)之外，所有现代浏览器都支持它。看看这些例子：

*   [HTML5Rocks：XMLHTTPREQUEST2 中的新技巧](http://www.html5rocks.com/en/tutorials/file/xhr2/)
*   [SO：如何从 XMLHttpRequest 获取进度](https://stackoverflow.com/questions/76976/how-to-get-progress-from-xmlhttprequest)
*   [SO：上传文件VIA XMLHttpRequest时如何获得进度](https://stackoverflow.com/questions/7409954/how-to-get-progress-when-uploading-file-via-xmlhttprequest)
*   [SO：XmlHttpRequest onprogress 间隔](https://stackoverflow.com/questions/5495625/xmlhttprequest-onprogress-interval)

# java - fillRect 没有出现

> ID：12487946
> 
> 赞同：1
> 
> 时间：2012-09-19T02:56:46.437
> 
> 标签：java, swing, graphics, jpanel, paint

我在屏幕上绘制矩形时遇到问题。我的 jpanel 类中有paintComponent 方法，我想在其中绘制一个矩形。它看起来像这样：

```
public void paintComponent( Graphics g ) {

    super.paintComponent( g );

    g.setColor( Color.yellow );
    g.fillRect( 0, 140, 100, 100 );

} 
```

问题是我在要绘制的面板中添加了几个面板。子面板始终显示在顶部，而矩形绘制在它们下方。我怎样才能使矩形画在前面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T02:59:57.260

如果绘制的 JPanel 在容器中，那么它就不可能在“前面”。您可以通过调用子组件使子组件不透明`setOpaque(false)`，但容器仍将始终位于其子组件的后面。

如果您绝对想要一个组件在另一个之上，请考虑使用 JLayeredPane 或考虑在顶层窗口的玻璃窗格上绘图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T03:12:20.647

无意冒犯，但我觉得这是个坏主意...

```
public void paint( Graphics g ) {

    super.paint( g );

    g.setColor( Color.yellow );
    g.fillRect( 0, 140, 100, 100 );

} 
```

正如 Hovercraft 指出的那样，更好的方法是使用`GlassPane`( [How to use RootPanes](http://docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html) ) 或 a `JLayeredPane`or [`JLayer`](http://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html)(AKA`JXLayer`如果您不使用 Java 7)

# ruby-on-rails - 如何将自己的多对多关系放在一起？

> ID：12487951
> 
> 赞同：0
> 
> 时间：2012-09-19T02:57:06.010
> 
> 标签：ruby-on-rails, relationship, activeadmin, formtastic, has-and-belongs-to-many

> **可能重复：**
> [rails many to many self join](https://stackoverflow.com/questions/3396831/rails-many-to-many-self-join)

我有一个问题，我找不到答案...

状态是：我有一个名为 Accessories 的模型，并且我还有一个关系*has_and_belongs_to_many*到一个连接 2 个附件（自我关系，列：accessory_1_id，accessory_2_id）的表。假设该关系由“异常”调用。

我正在使用 Formtastic + ActiveAdmin，我需要通过关系获取这组附件，因为通过这种方式，Formtastic 可以检测现有对象的当前“异常”集（在编辑时）并自动将复选框设置为活动状态。

我很抱歉我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T03:30:02.400

检查这个 railscasts，它使用友谊关联在用户之间建立自我 HABTM 关联，​​检查一下：

[http://railscasts.com/episodes/163-self-referential-association](http://railscasts.com/episodes/163-self-referential-association)

# java - 将多个引用游标从 Oracle 过程返回到 Java

> ID：12487953
> 
> 赞同：5
> 
> 时间：2012-09-19T02:57:18.017
> 
> 标签：java, plsql

在我们的 Web 应用程序中，一个模块中有 18 个屏幕。我们的用户希望将 18 个屏幕的所有数据放在一页中，以便他们可以一次打印全部数据。

因此，我编写了一个 Oracle 程序来获取所有 18 个屏幕（来自 20 - 22 个表）的数据。这个 Oracle 过程将 13 个游标返回到我的 Java 程序。

页面的性能很好，我得到了想要的结果。

但是，将这么多游标返回给 Java 会产生任何问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T11:14:19.090

单个会话的最大打开游标数由[`OPEN_CURSORS`](http://docs.oracle.com/cd/E11882_01/server.112/e25513/initparams161.htm#CHDFEAFG)参数控制（默认值 50，通常扩展为数百个）。

如果按照[@Polppan](https://stackoverflow.com/users/599528/polppan)的建议在完成获取游标后正确关闭游标，则同时打开 18 个游标应该没有问题。

由于游标只是指向查询的指针，因此通过网络一次返回其中的 18 个也没有问题。

# php - 以编程方式添加 Magento 的 small_image 和 thumbnail

> ID：12487955
> 
> 赞同：7
> 
> 时间：2012-09-19T02:57:33.930
> 
> 标签：php, magento

在 Magento 中，以下代码将以编程方式将图片添加到产品的图片库中

```
//set store to admin id so we can save a product
Mage::app()->getStore()->setId(Mage_Core_Model_App::ADMIN_STORE_ID);

//load a product with an id of 2514
$product = Mage::getModel('catalog/product')->load('2514');

//add the image
$product->addImageToMediaGallery('/tmp/test.png','image',false,false); 
```

正如预期的那样，这会将图像添加到产品的媒体库中，并且该图像将被选为产品的“基础图像”。但是，不会为此图像选择“small_image”和“thumbnail”图像。

如果使用以下代码

```
$product->addImageToMediaGallery('/tmp/test.png','image',false,false);        
$product->addImageToMediaGallery('/tmp/test.png','small_image',false,false);        
$product->addImageToMediaGallery('/tmp/test.png','thumbnail',false,false); 
```

Magento 将向媒体库添加**三个新图像。**一张选择了基本图像，一张选择了小图像，第三张选择了缩略图。

是否可以在您致电时向 Magento 发出信号

```
$product->addImageToMediaGallery('/tmp/test.png','image',false,false); 
```

它应该自动生成小图像和缩略图？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-19T03:06:02.543

尝试：

```
$product->addImageToMediaGallery('/tmp/test.png',array('image', 'small_image', 'thumbnail'),false,false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-05T11:11:09.860

我和你有同样的问题。图像被导入但媒体属性（基本、缩略图、小）未显示的原因是因为它是在子网站中设置的。相反，您希望将其设置为默认值。换句话说，商店 ID = 0。

希望有帮助。山姆

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-17T12:34:35.367

这对我有用

**导入并设置**

```
$id = 2400;
$product = $object_Manager->create('Magento\Catalog\Model\Product')->load($id);
$imageType = ['image', 'small_image', 'thumbnail'];
$imagePath = '/tmp/test.png';
$product->addImageToMediaGallery($imagePath, $imageType, false, false);
$product->setStoreId(0)->save(); 
```

**只是为了设置**

```
$id = 2400;
$product = $object_Manager->create('Magento\Catalog\Model\Product')->load($id);
if (!$product->hasImage()) continue;
if (!$product->hasSmallImage()) $product->setSmallImage($product->getImage());
if (!$product->hasThumbnail()) $product->setThumbnail($product->getImage());
$product->setStoreId(0)->save(); 
```

# file - 错字3中的文件浏览

> ID：12487960
> 
> 赞同：1
> 
> 时间：2012-09-19T02:58:33.330
> 
> 标签：file, typo3

有没有人在后端模块的扩展开发中使用传统的 browser.php 和 browser_links.php 的经验？我想集成文件浏览，但似乎无法将其连接到我的扩展程序。有什么想法或其他建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T13:21:53.153

也许您正在寻找带有 ff 的[Flexforms](http://wiki.typo3.org/Extension_Development,_using_Flexforms) ，您可以将字段添加到扩展并使用 xml 配置它们。我的文件浏览器配置是：

```
...
<template>
  <TCEforms>
    <exclude>1</exclude>
    <label>template</label>
    <config>
      <type>input</type>
      <size>50</size>
      <eval>trim</eval>
      <wizards type="array">
        <_PADDING>2</_PADDING>
        <link type="array">
          <type>popup</type>
          <title>Link</title>
          <icon>link_popup.gif</icon>
          <script>browse_links.php?mode=wizard&amp;act=file</script>
          <params type="array">
            <blindLinkOptions>page,spec</blindLinkOptions>
          </params>
          <JSopenParams>height=300,width=500,status=0,menubar=0,scrollbars=1</JSopenParams>
        </link>
      </wizards>
    </config>
  </TCEforms>
</template>
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-03T00:50:12.523

三氯乙酸：

```
'field_name' => array(
    'exclude' => 0,
    'label' => 'LLL:EXT:peproducts/Resources/Private/Language/locallang_db.xml:tx_peproducts_domain_model_product.price',
    'config' => array(
    'type' => 'input',
    'size' => 30,
    'eval' => 'trim',
    'wizards' => array(
        '_PADDING' => 2,
        'link' => array(
        'type' => 'popup',
        'title' => 'Link',
        'icon' => 'link_popup.gif',
        'script' => 'browse_links.php?mode=wizard',
        'JSopenParams' => 'height=300,width=500,status=0,menubar=0,scrollbars=1'
        )
    ),
    'softref' => 'typolink[linkList]'
    ),
), 
```

# php - 如何在单击且不刷新时将 div 标签的 id 保存到数据库中？

> ID：12487962
> 
> 赞同：-5
> 
> 时间：2012-09-19T02:58:55.307
> 
> 标签：php, jquery, forms, loops, image-processing

我需要将用户选择的项目保存到数据库而不刷新页面。

这是一些示例代码：

```
<div id="id1">One</div>
<div id="id2">Two</div>
<div id="id3">Three</div>
...
<div id="id100">One Hundred</div> 
```

当用户单击 div `id1`（例如）时，我需要将其保存到数据库中。像这样的东西：

```
INSERT INTO log (elementId) VALUES ('id1'); 
```

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T03:50:37.377

jQuery 或一般的 javascript 无法真正直接连接到您所描述的数据库。如果你有一个端点要命中，那么 jQuery（或 vanilla javascript，真的）可以使用特定数据向该端点发出请求：

```
$('input:file').on('change', function(event) {
  $.ajax({
    url: '/path/to/endpoint',
    type: 'post',
    data: { 
      filename: $(this).val()
    }
  });
}); 
```

或者，您可以使用 Parse 之类的服务，但我想这不是您要问的。

如需更多阅读，请查看[jQuery API：ajax](http://api.jquery.com/jQuery.ajax/)。

# fortran90 - C 调用 Fortran 子程序

> ID：12487965
> 
> 赞同：2
> 
> 时间：2012-09-19T02:59:33.967
> 
> 标签：fortran90

我是该网站的新手，这看起来可能是获得一些提示和帮助（如果有的话）的地方。

我正在学习“C 调用 Fortran 子程序”，我对 C 有一定的了解，但对 Fortran 了解不多。

优点：我看过一些例子，并且能够编译一些。

负面的一面：我有些失落。我有一个可以使用 C 或 Fortran 90 以及 print_matrix.f 和 print_matrix.c 设计的主程序。

在 main.c 程序中，
- 填充大小为 3 x 3 的矩阵大小为 1-9 的数组
- 调用 c 函数
- 调用 fortran 子程序

我已经有人口稠密的一面（它可能不准确），但我被困在子程序上。fortran 和 C 的输出必须相同，它将使用 makefile 通过 print_matrix.f90 和 print_matrix.c 输出。我需要呼叫子程序部分的帮助，我只是不知道从哪里开始:(

我只需要帮助，任何将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T19:49:54.063

老实说，很难确切地说出你的问题是什么。但这是一个适用于我的 linux 机器的示例：

callf.c:

```
 #include<stdio.h>
  int main(int argc, char **argv) {
  int i=0;
  increment_(&i);
  printf("%d\n",i);
  return;
  } 
```

增量.f90：

```
subroutine increment(n)
integer n
n=n+1
return
end subroutine 
```

编译：

```
gcc -c callf.c
gfortran -c increment.f90
gcc callf.o increment.o -lgfortran 
```

结果：

```
> ./a.out
1 
```

两个困难的部分是 1) 获得函数调用的确切名称和 2) 知道链接两个代码需要哪些标志。回复：1）我知道使用“increment_”，因为在编译我的 FORTRAN 代码后，我在 increment.o 上运行了“nm”实用程序，发现对象的名称是“increment_”。在某些系统上，您可能会看到“INCREMENT”、“_increment”或各种其他内容。回复：2）信息应该适用于您使用的任何编译器。它变化很大。

# iphone - popToViewController 没有动画

> ID：12487970
> 
> 赞同：2
> 
> 时间：2012-09-19T02:59:59.437
> 
> 标签：iphone, storyboard, uisegmentedcontrol, xcode4.4, poptoviewcontroller

伙计，我必须说如果不是这个网站，我会没有头发，我现在可能会从桥上跳下来。好的！我的问题：

我正在使用带有 xcode 4.4 的情节提要。我有 3 个视图控制器（确实有 5 个，但我认为其他的无关紧要）。视图控制器 A 推送到视图控制器 B。视图控制器 B 在其导航栏上有一个分段控件，带有 2 个分段和一个后退按钮。视图控制器 B 加载时选择了分段 1。当用户选择段 0 时，视图控制器 C 被实例化。在第一次推动时一切都很好。你从 A 被推到 B，然后当你按下它时它会弹出到 A。我的问题是当我 popToViewController 到包含视图控制器 A 的数组列表时，它会弹出，但它没有动画！我知道你在想什么，“Animate:YES dummy！” 然而，动画是是的……嗯？这是我的代码：

*这是视图控制器 B 中发生的事情*

```
-(IBAction)Previous:(id)sender{
[self.navigationController popViewControllerAnimated:YES];
}

- (IBAction)segmentSwitch:(id)sender;
{
if ([sender selectedSegmentIndex] == 0)
{
    MapViewController *controller = [self.storyboard           instantiateViewControllerWithIdentifier:@"Map"];
    [self.navigationController pushViewController:controller animated:NO];
}
else if ([sender selectedSegmentIndex] == 1) {
    ListViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"List"];
    [self.navigationController pushViewController:controller animated:NO];

}
} 
```

*继承人视图控制器C*

```
-(IBAction)Previous:(id)sender
{
NSInteger index = -1;

ReportAppDelegate *appDelegate =
(ReportAppDelegate *)[[UIApplication sharedApplication]delegate];
MainOrangeTestViewController *orangeViewController = [appDelegate orangeViewController];

orangeViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"Orange"];
NSArray* newVCarray = [[NSArray alloc] initWithObjects:orangeViewController, nil];
self.navigationController.viewControllers = newVCarray;

for(int i=0 ; i<[newVCarray count] ; i++)
{

    if([[newVCarray objectAtIndex:i] isKindOfClass:NSClassFromString(@"MainOrangeTestViewController")])
    {
        index = i;
    }
}
[self.navigationController popToViewController:[newVCarray objectAtIndex:index] animated:YES];

}
- (IBAction)segmentSwitch2:(id)sender; {
if ([sender selectedSegmentIndex] == 0)
{
    MapViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"Map"];
    [self.navigationController pushViewController:controller animated:NO];
}
else if ([sender selectedSegmentIndex] == 1)
{
   ListViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"List"];
    [self.navigationController pushViewController:controller animated:NO];
}
} 
```

我知道当您实例化时，您正在创建该视图控制器的新实例以及创建新的导航堆栈（或类似的东西）。我想这可能与它有关。无论如何，为什么它不为流行音乐制作动画？我希望在我当前的构建中实现一些东西，但是如果它需要重建，那就这样吧！任何帮助是极大的赞赏。我肯定已经在这方面完成了我的功课，但是没有解决方案。

提前感谢大家！

编辑：我应该补充一点，从视图控制器 B 返回到 A 的初始 POP 是动画的。但是，当您开始切换分段控件并且切换到视图控制器 C 时，返回视图控制器 A 不会为弹出设置动画。因此，最初当您从 A 加载到 B 时，它会以成功的动画弹回。但是在切换之后它会弹回到没有动画的 A 并且动画方法是 YES。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:33:55.660

对您的情况仍然有些困惑，但这里有另一个提示：您可以事先创建历史。假设您想要从 VC0 推送到 VC2，并且在弹出时，您想要从 VC2 弹出到 VC1 或 VC0。完全可行：

```
// in VC0.m, animated push to VC2
// push to vc1 invisibly
[self.navigationController pushViewController:vc1 animated:NO];
// we've made history!  now push visibly to vc2
[self.navigationController pushViewController:vc2 animated:YES]; 
```

要选择弹回的位置...

```
// in VC2.m
if (/* user needs a regular pop back to VC1 */) {
    [self.navigationController popViewControllerAnimated:YES];
} else // pop back two, to VC0
    NSArray *viewControllers = [self.navigationController viewControllers];

    // we're not assuming that vc0 is the root here, the top of the navigation stack
    // is at index=count-1\.  self is at the top.  a regular pop is just below == count-2.
    // two pops is at count-3, and so on.
    NSInteger backBackIndex = viewControllers.count - 3;

    // in case we get here by some other pushing path, worst case pop is to the root
    backBackIndex = MAX(backBackIndex, 0);

    UIViewController *backBackVC = [viewControllers objectAtIndex:backBackIndex];
    [self.navigationController popToViewController:backBackVC animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T04:00:15.297

您是否只是想推动 A->B->C 然后再次跳回 A，跳过 B？如果是这样，则无需修改导航控制器的 viewControllers 属性。

```
// in vcC.m ...

-(IBAction)Previous:(id)sender
{
    [self.navigationController popToRootViewControllerAnimated:YES];
} 
```

[在类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)中查看不同种类的流行音乐。您可以弹回一个，或弹出到根目录，或弹出到您历史记录中的特定 VC。这样做的方法是*读取*viewControllers 堆栈（而不是写入它），找到要弹出的 VC，然后使用代码中的 popTo... 方法。

但听起来 popToRoot 是你需要的。

# javascript - 按类获取 location.href

> ID：12487973
> 
> 赞同：-1
> 
> 时间：2012-09-19T03:00:09.163
> 
> 标签：javascript, jquery, mediawiki

我正在使用 MediaWiki，但我无法使用 tag `<script></script>`。

有一种方法可以按类获取 url (location.href) 吗？

比如我把代码location.href放在js文件中，在我放的页面中：

`<div class="someclass"></div>`

并出现网址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T03:52:52.140

有很多“变量”可用，这应该打印当前 URL（没有任何脚本）：

```
<div>{{canonicalurl:{{FULLPAGENAME}}}}</div> 
```

[http://www.mediawiki.org/wiki/Help:Magic_words](http://www.mediawiki.org/wiki/Help:Magic_words)

# ios - AIR iOS 应用程序窗口很小

> ID：12487977
> 
> 赞同：0
> 
> 时间：2012-09-19T03:00:33.980
> 
> 标签：ios, flash, air

在我的计算机（运行 Windows 7）上预览我的 ios 应用程序时遇到问题。该应用程序是为 iPad 制作的，分辨率为 1024x768。但是当我预览它（导出为 swf 而不是在我的 iPad 上播放 ipa）时，显示它的窗口很小（我认为正好是应用程序大小的一半）并且无法调整大小。

这会导致应用程序变小两倍，这是无法测试的。如果我监听 Event.RESIZE 并将 stage.scaleMode 设置为 NO_SCALE，那么应用程序仍然是 1024 x 768，但只有它的一角显示在小窗口中（也无法测试）。

我有很多时间为此寻找解决方案。有谁知道如何使 swf 窗口更大？

谢谢，

虎斑猫

# c# - 访问文件引发更改事件

> ID：12487978
> 
> 赞同：1
> 
> 时间：2012-09-19T03:00:58.273
> 
> 标签：c#, .net, c#-4.0, c#-2.0

我有两个引用相同 xml 文件的应用程序。一个写入文件，另一个监视文件的更改。

在应用程序 1 中，我使用 FileSystemWatcher 来监视更改，将过滤器应用为 LastWrite 并仅监视更改事件。它在后台连续运行

应用程序 2 在启动时读取文件中的特定节点并在用户方向上更新该节点。它是一个简单的 windows 窗体，在执行时从文件中读取一个值，并且可以更改该值

我在运行这两个应用程序时遇到的奇怪的事情是，当应用程序 2 启动时，在应用程序 1 中引发了文件更改事件（注意：应用程序 1 不断监视文件）

我想在应用程序 2 启动时摆脱应用程序 1 中引发的更改事件。

过滤器是否不正确或 Change 事件的行为令人讨厌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:57:15.480

这种行为[记录在案](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.changed.aspx)：

> 当`Changed event`对被监视目录中的文件或目录的大小、系统属性、上次写入时间、上次访问时间或安全权限进行更改时，将引发 。

如果应用程序 2 打开文件并且操作系统跟踪上次访问时间，`Changed`则会引发一个事件。由于无法仅过滤那些实际将数据写入文件的事件，因此您必须通过保持应用程序 1 上的状态来确定发生了什么。

例如，现在您知道发生了什么，您可以保留[最后一次写入时间](http://msdn.microsoft.com/en-us/library/system.io.filesysteminfo.lastwritetime.aspx)的缓存，并决定在没有更改的情况下忽略该事件。

# performance - 交互式电影应用程序的可行性

> ID：12487981
> 
> 赞同：-2
> 
> 时间：2012-09-19T03:01:16.550
> 
> 标签：performance, facebook-apps, reliability

我正在为我将要开发的交互式电影应用程序研究不同的平台，我想知道这是否可行和*可行*，因为用户实际上可以获得可接受的性能、可靠性等。

电影将在 30 分钟以下，真人版，不需要非常高的分辨率，但需要适合真人版的帧率。我打算将（？）移植到各种移动应用程序。（虽然我还没有了解不同移动设备的 fb 应用程序和 fb 应用程序之间的区别）

万一需要说，我是一位经验丰富的开发人员，但我没有做过任何 fb 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T05:38:57.367

我不确定这是否是最适合问这个问题的地方，但无论如何......

看看[这个精致的森林](http://www.exquisiteforest.com/)，它可能会提供一些提示。我认为 HTML5 对于这样的项目很有前途。

# php - Web 服务器极慢，而 CPU 为 0-5%，RAM 为 500/1024

> ID：12487982
> 
> 赞同：1
> 
> 时间：2012-09-19T03:01:21.300
> 
> 标签：php, javascript, jquery, ajax, htop

我编写了一个网络聊天程序，它通过 ajax 命令刷新 a 来显示新条目。该命令启动了一个 php 文件，然后创建了显示最新 25 个条目的聊天日志。Ajax 每秒都会为每个用户刷新一次。

然后，当大约有 10 个用户在线时，整个网站变得异常缓慢，甚至崩溃了。我认为，缓慢来自于频繁刷新 php 脚本（每秒 > 10 次）。

我查看了我的虚拟服务器，启动了 htop 来查看进程。CPU几乎没有使用。它介于 0% 和最高 5% 之间。RAM 只使用了一半，大约 500 MB 的 1GB（这是标准的，甚至在聊天上线之前）。

我通过创建一个仅创建 1 个聊天日志的 html 缓存站点并将其提供给用户的 cron 作业解决了这个问题。

但是，我仍然想知道为什么服务器运行如此缓慢，即使 CPU 和 RAM 根本不忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T06:12:40.357

如果您没有最大化 cpu，那么它会阻塞其他资源。一些可能的候选人：

*   每个请求都有一个数据库查询吗？如果是这样，他们需要多长时间？

*   您有多少线程可用于处理请求？每个请求需要多长时间？如果只有一个线程处理请求，那么一旦请求花费超过 10 毫秒，每秒 100 个请求的传入负载（听起来就像您正在做的那样）将开始备份，充其量。

作为一般策略，我会添加计时器并尝试将问题一分为二。在请求的开始和结束时花点时间，如果这个时间很小，那么你知道延迟在其他地方。

此外，对于这种工作负载，您应该考虑推送更新而不是轮询。这样，您可以推送一条消息来更新正在侦听的客户端，而他们不必经常轮询以立即获取新消息。

# c++ - 错误 2019 链接器错误 Visual Studio

> ID：12487983
> 
> 赞同：1
> 
> 时间：2012-09-19T03:01:26.277
> 
> 标签：c++, linker, unresolved-external

嘿，我希望有人能告诉我要解决这个问题，我一直从 Visual Studio 收到以下文件的错误 2019。现在大部分功能已被删除，所以请原谅空变量等。

错误错误 LNK2019：函数 _wmain c:\Users\K\documents\visual 中引用的未解析的外部符号“void * __cdecl OpenOneDevice(void *,struct _SP_DEVICE_INTERFACE_DATA *,char *)”(?OpenOneDevice@@YAPAXPAXPAU_SP_DEVICE_INTERFACE_DATA@@PAD@Z)工作室 2010\Projects\test2\test2\test2.obj test2

```
#include "stdafx.h"
#include <windows.h>
#include <setupapi.h>

SP_DEVICE_INTERFACE_DATA deviceInfoData;
HDEVINFO hwDeviceInfo;
HANDLE hOut;
char *devName;
//
HANDLE OpenOneDevice(IN HDEVINFO hwDeviceInfo,IN PSP_DEVICE_INTERFACE_DATA DeviceInfoData,IN char *devName);
//
HANDLE OpenOneDevice(IN HDEVINFO HardwareDeviceInfo,IN PSP_DEVICE_INTERFACE_DATA DeviceInfoData,IN char *devName) {
    PSP_DEVICE_INTERFACE_DETAIL_DATA functionClassDeviceData = NULL;
    ULONG predictedLength = 0, requiredLength = 0;
    HANDLE hOut = INVALID_HANDLE_VALUE;

    SetupDiGetDeviceInterfaceDetail(HardwareDeviceInfo, DeviceInfoData, NULL, 0, &requiredLength, NULL);

    predictedLength = requiredLength;

    functionClassDeviceData = (PSP_DEVICE_INTERFACE_DETAIL_DATA)malloc(predictedLength);
    if(NULL == functionClassDeviceData) {
        return hOut;
    }
    functionClassDeviceData->cbSize = sizeof (SP_DEVICE_INTERFACE_DETAIL_DATA);

    if (!SetupDiGetDeviceInterfaceDetail(HardwareDeviceInfo, DeviceInfoData, functionClassDeviceData,
        predictedLength, &requiredLength, NULL)) {
        free( functionClassDeviceData );
        return hOut;
    }

    //strcpy(devName,functionClassDeviceData->DevicePath) ;

    hOut = CreateFile(functionClassDeviceData->DevicePath, GENERIC_READ | GENERIC_WRITE,
        FILE_SHARE_READ | FILE_SHARE_WRITE, NULL, OPEN_EXISTING, 0, NULL);

    free(functionClassDeviceData);
    return hOut;
}

// 
int _tmain(int argc, _TCHAR* argv[])
{

    hOut = OpenOneDevice (hwDeviceInfo, &deviceInfoData, devName);
    if(hOut != INVALID_HANDLE_VALUE) 
        {
            // error report
        }
    return 0;
} 
```

几个小时让我发疯。任何帮助表示赞赏。

感谢克里斯解决:-)

添加#pragma 注释（lib，“Setupapi.lib”）

谢谢

# ruby - 如何让 Ruby 释放未引用的内存？

> ID：12487986
> 
> 赞同：10
> 
> 时间：2012-09-19T03:01:37.990
> 
> 标签：ruby, memory

考虑这个片段：

```
l = []

while 1
  l << 'a random 369-characterish string'
end
^C
# ran this for maybe 4 seconds, and it had 27 million entries in l. memory
# usage was 1.6 GB.

l = nil

# no change in memory usage

GC.start

# memory usage drops a relatively small amount, from 1.6 GB to 1.39 GB. 
```

我正在将数百万个元素推入/通过 Ruby 的数据结构，并且存在一些严重的内存问题。这个例子表明，即使在没有对现存对象的引用的情况下，Ruby 也不会让 [大部分] 它离开，即使在显式调用`GC.start`.

我在现实生活中使用的对象总共将数百万个元素推入散列，但散列用作临时查找表，并在某个循环完成后清零。然而，这个查找表中的内存显然永远不会被释放，这会极大地减慢我的应用程序的速度，因为 GC 在每个周期都有数百万个失效对象需要分析。我正在研究`sparsehash`gem 的解决方法，但这似乎不是一个棘手的问题，Ruby 运行时应该像那样窒息。明确删除引用，明确收集和处置对象。谁能帮我弄清楚为什么这没有发生？

我已经尝试过`l.delete_if { |x| true}`freenode 上#ruby 中用户的建议，但这确实很慢，而且似乎也从未导致明显的内存释放。

使用`ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux]`.

编辑：

为了比较，这是一个运行`python3`：

```
l = []

while 1:
    l.append('a random 369-characterish string')
^C
# 31,216,082 elements; 246M memory usage.

l = []
# memory usage drops to 8K (0% of system total) 
```

在 python2 上的测试显示几乎相同的结果。

我不确定这是否足以将其视为 MRI 中的实施缺陷，或者它是否只是归因于 GC 的不同方法。无论哪种方式，Python 似乎更适合将总共数百万个元素通过数据结构推送并定期将结构归零的用例（就像临时查找表可能做的那样）。

看起来这确实应该是一个简单的。:\

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:46:28.010

有点骇人听闻，但您可以尝试`fork`将操作作为一个单独的过程关闭。该进程将在共享内存空间中运行；当它终止时，内存将被释放。

正如@Sergio Tulentsev 在评论中指出的那样，Ruby 可能不会将内存释放回内核。

这个 Ruby/Unix 邮件列表对话详细描述了这一点：[避免系统调用](http://librelist.com/browser//usp.ruby/2011/9/14/system-calls-in-unix/#64f712adaf24057687b148d5e2de5bb7)

此外，这篇博文将分叉描述为 Rails 中内存管理的解决方案：[使用 fork() 和 copy-on-write 在 Ruby on Rails 中保存内存](http://izumi.plan99.net/blog/index.php/2007/04/05/saving-memory-in-ruby-on-rails/)。虽然，我认为在 Ruby 2 出现之前，Ruby 不会支持写时复制。

# php - Drupal 6 - 复制站点后站点信息损坏。需要数据库黑客？

> ID：12487996
> 
> 赞同：0
> 
> 时间：2012-09-19T03:02:39.387
> 
> 标签：php, drupal-6

我有一个几年前开发的drupal 站点。我们将它复制到一个新的站点/域/数据库（从原始站点的子目录中提取）

我尝试只复制站点设置（视图和内容类型），并省略所有站点节点数据（这是一个内容驱动的站点，我们正在启动一个姊妹站点）。一切正常。不幸的是，在新站点中，我发现我无法更新“站点信息”（这意味着我无法设置我的首页）。我试图更新数据库中的数据，但这让相关的站点设置字段显示为空白

我不得不实施一个荒谬的黑客攻击来处理首页现在在技术上是 404 的事实。更奇怪的是，原来的网站现在也有同样的问题（我只能猜测是我从错误的数据库中更新了表格因为失误？！？ ）。

据我所知，这些数据存储在数据库中的“变量”中。我从网站的旧副本中导入了一个很好的“变量”表，但无济于事。

所以我完全被卡住了。如果有人有任何线索，我将非常感激。

谢谢！

# ruby-on-rails - 我的引导按钮中的一些下划线和颜色遗迹

> ID：12487998
> 
> 赞同：0
> 
> 时间：2012-09-19T03:03:06.830
> 
> 标签：ruby-on-rails, ruby-on-rails-3, css, button, twitter-bootstrap

我有一个相对普通的 Rails 应用程序，它带有[bootstrap-sass](https://github.com/thomas-mcdonald/bootstrap-sass) gem，它提供了**Twitter Bootstrap**的强大功能。

问题出在我的按钮上。我在悬停时收到蓝色文本和带下划线的文本，不知道为什么或如何摆脱它。我想知道是不是因为这些是链接标签而不是提交标签？！？无论如何，如何使它们显示为真正的按钮？

![在此处输入图像描述](../Images/0dea4ba041ee4e195911b7f2edea8aa8.png)

我已经从我的样式表中删除了所有内容，除了`@import "bootstrap";`

它们[应该是这样](http://twitter.github.com/bootstrap/components.html#buttonGroups)的。

有任何想法吗？这是视图代码，但它的按钮在其他视图中的显示方式相同......分组并单独显示。

```
%table.table.table-hover
  %thead
    %tr
      %th Title
      %th Filename
      %th

  %tbody
    - @reports.each do |report|
      %tr
        %td= report.title
        %td= report.filename
        %td
          .btn-group
            %button.btn= link_to 'Show', report
            %button.btn= link_to 'Edit', edit_report_path(report)
            %button.btn= link_to 'Destroy', report, method: :delete, data: { confirm: 'Are you sure?' } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T03:10:27.450

我猜它与 bootstrap-sass gem 有关。我从未使用过那个，但我使用过 bootstrap-rails （使用较少）。

您当然可以在引导后评估的任何 css/sass 文件中的选择器上使用 :active 或 :hover 覆盖活动和/或悬停状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T10:40:46.097

我不知道解决方案，但我建议您使用 Firefox 或 Chrome 中的 Inspect Elements 来查找您的问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T03:18:06.620

引导程序中具有 btn 类的按钮不使用`text-decoration: underline`. 如果您不包括引导程序中包含的 reset.css，这可能是一个问题，引导程序现在实际上是浏览器标准化然后重置。但我相信基本锚标签的取消样式正在那里完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T03:31:54.023

我认为你仍然有脚手架命令生成的脚手架.css。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-19T03:13:37.543

您是否考虑过使用 button_to？

```
%button.btn= button_to 'Show', report, method: :get 
```

参考，（按钮语法）[Button_to 使用 POST Link_to 使用 GET，为什么？罗尔](https://stackoverflow.com/questions/2167123/button-to-uses-post-link-to-uses-get-why-ror)

# javascript - 如何将 push 与子数组一起使用？

> ID：12487999
> 
> 赞同：1
> 
> 时间：2012-09-19T03:03:09.253
> 
> 标签：javascript, jquery

我有 3 个数组，例如：

```
var arr1 = [];
var arr2 = [];
var arr3 = [];

//When I want to add something into array then I use
arr1.push("text");
arr2.push("text"); 
```

但是否可以制作类似以下示例的内容？

```
//example:
var arr = [];

arr['group1'].push("text1");
arr['group2'].push("text2");
arr['group2'].push("textn");

//and then iterate like:

for(item in arr['group1'])
  console.log(item); 
```

甚至有可能做这样的事情吗？我试过但不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T03:12:55.140

但是有一个基本的误解，`arr`是一个数组，但您将它用作关联数组，在 JavaScript 中，它最好用 object 表示`{}`。`for...in`用于对象，而不是数组，MDN 有一个警告说明：

> `for..in` **不应该用于迭代索引顺序很重要的数组**...

即使索引很简单，我也会建议使用常规`for`循环或`forEach`.

考虑使用以下更合适的方法。

```
var obj = {
  group1: ['text1'],
  group2: ['text2'],
  group3: ['text3']
};

// pushing more strings
obj.group1.push('foo');
obj['group2'].push('baz'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T03:07:43.100

您将`arr['group1']`其视为数组（通过使用`.push()`），但您尚未将其声明为数组。

```
var arr = [];

arr['group1'] = [];
arr['group2'] = [];
arr['group3'] = [];

arr['group1'].push("text1");
arr['group2'].push("text2");
arr['group2'].push("textn"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T03:14:04.767

看来您实际上是在寻找 Javascript 对象而不是数组。
此外，您需要先创建这些对象。

```
var obj = {group1:[],group2:[],group3:[]};

/* or
var obj = {};
obj.group1 = [];
*/

obj['group1'].push("text1");
// or obj.group1.push("text1"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T03:05:38.813

该[`for...in`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)结构将您的 for 变量设置为键，而不是值。假设`arr['group1']`是一个数组，这将正常工作：

```
//example:
var arr = [];

arr['group1'].push("text1");
arr['group2'].push("text2");
arr['group2'].push("textn");

//and then iterate like:

for(item in arr['group1'])
  console.log(arr['group1'][item]);​ 
```