# StackOverflow 问答 10659000-10659999

# unix - 执行脚本

> ID：10659008
> 
> 赞同：1
> 
> 时间：2012-05-18T20:03:20.207
> 
> 标签：unix, scripting, bin

我有一个包含一堆脚本的文件夹。假设文件夹位于`~/scripts`

有没有一种方法可以轻松地在目录中执行这些脚本而无需执行类似的操作`~/scripts/file1.sh`？我试过把脚本放进去`/bin/`，但我还是得做`file1.sh`。有没有一种方法可以让我只用它们的名字来引用这些脚本，而不需要扩展名（即`file1`）？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T20:06:58.050

在 .profile、.bashrc 或命令行本身中添加`~/scripts`到您的 PATH 环境变量。使用以下命令更改 PATH 环境变量：

```
export PATH=$PATH:~/scripts 
```

完成后确保您的脚本使用`chmod +x file`命令具有执行权限，然后您可以执行：

```
file1.sh
file2.sh 
```

即不以这些脚本的实际路径为前缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T21:40:16.103

如果您想运行许多脚本，这不是最佳解决方案，但您可以为最常用的脚本创建别名。我还将我的 shell 脚本命名`.sh`为用于文档目的的扩展名（即在执行 a 时很容易发现`ls`）。

这样，别名是不带 .sh 扩展名的脚本名称，而是通过直接引用我自己的`~/bin`目录来调用脚本。

这个操作系统的好处之一是总有很多方法可以完成一项任务，在你的工具箱中有多种方法，以防哪天哪一种方法不起作用。

# objective-c - 如何禁用自动 TAB 更改，只需从代码中执行

> ID：10659009
> 
> 赞同：0
> 
> 时间：2012-05-18T20:03:31.687
> 
> 标签：objective-c, xcode, cocoa

我把txt1（NSTextFiled），txt2（NSTextField），tbl1（NSTableView）放在view1上，当光标在txt1中时，我按下TAB键并且光标转到txt2。我想从我按下TAB时转到的代码中更改它tbl1（tbl1 成为第一响应者），然后我将 txt1 子类化为`customtext`并在其中实现以下代码

```
- (BOOL)control:(NSControl*)control textView:(NSTextView*)textView doCommandBySelector:(SEL)commandSelector
{
    BOOL result = NO;

    if (commandSelector == @selector(insertTab:))
    {
            [self.delegate performSelector:@selector(pressTAB) withObject:nil ];
    }//if
    . . .
} 
```

我在 view1 中实现`pressTAB`方法并编写以下代码

```
-(void)pressTAB
{
    [[self.view window] makeFirstResponder:self.tbl1];
} 
```

一切正常，代码正常运行，但在此代码运行后，Xcode 会自动将第一响应者更改为 txt2。我如何禁用自动 TAB 更改并仅从我的代码中执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T23:04:12.010

您可以通过设置 nextKeyView 属性在代码中执行此操作（使用 Xcode 4.2 在 IB 中执行此操作似乎不起作用）。所以：

txt1.nextKeyView = tbl1;

# java - Eclipse Indigo Release 2 上的动态 Web 项目差异

> ID：10659010
> 
> 赞同：3
> 
> 时间：2012-05-18T20:03:36.360
> 
> 标签：java, eclipse

我刚刚下载了 Eclipse Indigo Release 2，发现我的动态 Web 项目有所不同。我的 WebContent 目录（或 src/main/webapp 与 Maven）通常显示在旧版本的项目根目录中（如源文件夹），但在这个新版本中不再显示。这是一个“修复”，还是什么？有没有办法把它放在“他的位置”？

谢谢！

编辑：好的，在 .settings 下找到一个文件，该文件具有以下内容：

```
<wb-resource deploy-path="/" source-path="/WebContent" tag="defaultRootSource"/> 
```

但是，这并没有在项目浏览器上显示任何内容，我认为它只是用于部署。问题还是一样：Release 2 有什么变化吗？我可以恢复它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:51:12.973

我不认为这是一个修复。尝试在项目的构建路径中添加用户库。将添加 Web 项目的库，您的 WebContent 现在应该显示在项目的根目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T13:48:34.740

我不确定你提到的问题，但你可以将你的“src/main/webapp”转换为eclipse中的源文件夹

项目 Java 构建路径 -->> 源选项卡 -->> 添加文件夹

然后选择您的“src/main/webapp 文件夹。

现在您的 webapp 文件夹将在 eclipse 中显示为源文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T11:22:12.660

现在它在`Deployed Resources -> webapp`文件夹中，您可以在其中找到您的来源

# jquery - 具有自动播放功能的垂直缩略图库

> ID：10659013
> 
> 赞同：1
> 
> 时间：2012-05-18T20:03:41.793
> 
> 标签：jquery, scroll, gallery, thumbnails

我制作了一个带有垂直缩略图的照片库，我如何在缩略图上模拟鼠标悬停和单击事件，以便它像您单击它们一样自动动画..

[请在http://misslebanon2010.com/urbana/new/index.php](http://misslebanon2010.com/urbana/new/index.php)看看我到目前为止所做的画廊

如果您注意到您可以向下和向上滚动，您也可以单击任何缩略图以在中间显示更大的照片和描述，问题是我怎样才能让它自动播放

我已经尝试过 JCarousel 插件，但如果您手动使用它，它的播放方式并没有达到应有的效果

```
<script type="text/javascript">
$(document).ready(function () {
        //jCarousel Plugin
    $('#thumbs-carousel').jcarousel({
        vertical: true,
        scroll: 1,
        auto: 2,
        wrap: 'last',
        initCallback: mycarousel_initCallback
    });

//Combine jCarousel with Image Display
$('#slideshow-carousel li a').hover(
    function () {

        if (!$(this).has('span').length) {
            $('#slideshow-carousel li a img').stop(true, true).css({'border': '2px #ccc solid'});
            $(this).stop(true, true).children('img').css({'border':'2px orange solid'});
        }       
    },
    function () {

        $('#slideshow-carousel li a img').stop(true, true).css({'border': '2px #ccc solid'});
        $('#slideshow-carousel li a').each(function () {

            if ($(this).has('span').length) $(this).children('img').css({'border':'2px orange solid'});

        });

    }
).click(function () {

    $('span.arrow').remove();  
    $('#frtitle').html($(this).find("img").attr('title'));
    $('#desc').html($(this).find("img").attr('alt'));         
    $(this).append('<span class="arrow"></span>');
    $('#slideshow-main li').removeClass('active');        
    $('#slideshow-main li.' + $(this).attr('rel')).addClass('active');  

    return false;
    });

});
    function mycarousel_initCallback(carousel) {

        // Pause autoscrolling if the user moves with the cursor over the clip.
        carousel.clip.hover(function() {
            carousel.stopAuto();
        }, function() {
            carousel.startAuto();
        });
    }

</script> 
```

# java - 如何从已通过 OAuth2 验证的服务器使用 C2DM 向设备发送消息？

> ID：10659014
> 
> 赞同：5
> 
> 时间：2012-05-18T20:03:43.420
> 
> 标签：java, android, oauth-2.0, android-c2dm

我正在开发必须向设备发送消息的系统的服务器部分。这在 GoogleLogin 方法中运行良好，但我想将其迁移到 OAuth 2.0，因为其他身份验证方法已被弃用。

在 Google API 控制台中，我创建了一个项目，然后为服务帐户创建了一个密钥。

这是我用来验证服务器的代码：

```
public boolean authenticateServer(){
    try {
        File privateKey =
            new File(getClass().getResource("/something-privatekey.p12").toURI());

        GoogleCredential cred =
            new GoogleCredential.Builder().setTransport(new NetHttpTransport())
                .setJsonFactory(new JacksonFactory())
                .setServiceAccountId("something@developer.gserviceaccount.com")
                .setServiceAccountScopes("https://android.apis.google.com/c2dm")
                .setServiceAccountPrivateKeyFromP12File(privateKey)
                .addRefreshListener(this)
                .build();

        boolean success = cred.refreshToken();
        this.credential = cred;
        return success;        
    }
    catch (Exception ex) {
         //handle this
    }
    return false;
} 
```

当我执行此操作时，该方法`onTokenResponse`被调用并且我得到一个`access_token`“`token_type`承载”在 3600 秒后到期。到现在为止还挺好。

这是我用来向设备发送消息的代码，它总是给我一个 401 状态（未授权）。有任何想法吗？

```
private static String UTF8 = "UTF-8";
public void sendMessage(String text, String registrationId) {
    try {
        StringBuilder postDataBuilder = new StringBuilder();
        postDataBuilder
            .append("registration_id")
            .append("=")
            .append(registrationId);

        postDataBuilder.append("&")
            .append("collapse_key")
            .append("=")
            .append("0");

        postDataBuilder.append("&")
            .append("data.payload")
            .append("=")
            .append(URLEncoder.encode(text, UTF8));

        byte[] postData = postDataBuilder.toString().getBytes(UTF8);

        URL url = new URL("https://android.apis.google.com/c2dm/send");

        HostnameVerifier hVerifier = new HostnameVerifier() {
            public boolean verify(String hostname, SSLSession session) {
                return true;
            }
        };

        HttpsURLConnection conn = (HttpsURLConnection) url.openConnection();
        conn.setHostnameVerifier(hVerifier);
        conn.setDoOutput(true);
        conn.setUseCaches(false);
        conn.setRequestMethod("POST");
        conn.setRequestProperty(
            "Content-Type", "application/x-www-form-urlencoded");
        conn.setRequestProperty(
            "Content-Length", Integer.toString(postData.length));
        conn.setRequestProperty(
            "Authorization", "Bearer " + credential.getAccessToken());

        OutputStream out = conn.getOutputStream();
        out.write(postData);
        out.close();
        int sw = conn.getResponseCode();
        System.out.println("" + sw);
    }
    catch (IOException ex){
        //handle this
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:37:26.273

由于 C2DM 目前处于 beta 状态，使用 OAuth2.0 使其工作的唯一方法是创建一个 Web 应用程序客户端 ID，而不是一个服务帐户（在 Google API 控制台中）。

我已按照[http://michsan.web.id/content/how-code-android-c2dm-oauth-2](http://michsan.web.id/content/how-code-android-c2dm-oauth-2)中的步骤进行操作，效果很好

# actionscript-3 - 闪存外部预加载器或自预加载器

> ID：10659016
> 
> 赞同：0
> 
> 时间：2012-05-18T20:03:59.483
> 
> 标签：actionscript-3, flash, preloader

我有这个在 Flash Builder 中构建的 Flash Professional 项目。这是一个要导出的 swf 文件。

是否会为此 SWF 文件自行预加载，因为我认为预加载器（进度条）不会显示，因为由于所有影片剪辑都设置为导出到第 1 帧，所以 flash 会导出第一帧中的所有内容，我也需要这些，因为我m 在我的文档类中实例化它们。

我应该采用外部 SWF 预加载器策略还是有一种安全的方法来进行自预加载器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T21:06:03.377

我不知道Flash Builder。在 Flash 中，您可以关闭“第一帧导出”的功能。您还可以使用预加载器（同样在 Flash 中）创建一个新的第 1 帧，并在预加载器将播放头移动到第 2 帧时开始执行 SWF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T08:02:42.893

使用 flash builder 时，您无需担心，因为 adobe 已经为您完成了一切。

只需使用[Flash builder 预加载器中的构建](http://www.adobe.com/devnet/flex/articles/flex-custom-preloader.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T06:05:57.560

Their are two ways :

1) choose some of the very heavy movieclips ( say those consisting of bitmaps or lots of animations). Turn off the "export in first frame" for them. And place those movieclips on the 2nd frame. Follow the process for all the "heavy movieclips", unless you make sure that the preloader shows up while testing it live.

2) Yes, the other method as you said is quite better, is to use another swf for preloader. But before using this method, make sure that their is no restriction on using more than 1 swf for your project.

V.

# css - 更改引导网页字体大小时

> ID：10659018
> 
> 赞同：1
> 
> 时间：2012-05-18T20:04:32.553
> 
> 标签：css, twitter-bootstrap, less

单击按钮时，如何允许用户更改使用引导程序构建的网页字体大小？我想相对更改所有组件的字体大小。这可能吗？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T20:10:54.973

Bootstrap 使用全局`@baseFontSize`参数来控制所有元素的字体大小，但更改它需要使用[less](http://lesscss.org/)重新编译 css 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T22:43:38.823

这通常使用 Javascript 和 cookie 完成。这是一个使用 jQuery 的示例：

*   [快速简单的 jQuery 字体调整器教程](http://www.queness.com/post/3956/quick-and-easy-jquery-font-resizer-tutorial)

# actionscript-3 - OSMF 上的缓冲时间

> ID：10659020
> 
> 赞同：0
> 
> 时间：2012-05-18T20:04:41.043
> 
> 标签：actionscript-3, buffering, osmf

我遇到了 OSMF 的问题。我有一个 40MB 的 MP4。它正在逐步加载。我的问题是视频在完全加载之前不会开始播放。我正在 Web 服务器上对此进行测试。知道发生了什么或我没有做什么吗？

```
var mps:MediaPlayerSprite   = new MediaPlayerSprite();
mps.x                       = 159;
mps.y                       = 53;
mps.width                   = 512;
mps.height                  = 288;
mps.resource                = new URLResource("resources/video/3.4.1.mp4"); 
addChild(mps); 
```

我什至尝试添加`mps.mediaPlayer.bufferTime = 1;`但没有运气。我什至试过0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T04:36:51.637

这是正确的。这是一个编码问题。即使我有同样的问题。对视频文件运行 MP4 FastStart 脚本可以解决此问题。 [http://www.datagoround.com/lab/](http://www.datagoround.com/lab/)

# javascript - 从 iframe 本身中从父级中删除 iframe

> ID：10659022
> 
> 赞同：0
> 
> 时间：2012-05-18T20:04:48.910
> 
> 标签：javascript, jquery, css, iframe, cross-domain

我在域 A 中有一个 iframe

```
<iframe id="iframeid" src="domain-B/abc.php"  scrolling="no" allowTransparency="true" frameborder="0" style="top: 0%; width:100%;height:100%;left:0;overflow:auto;position: fixed;z-index: 100000;text-align:center;line-height:normal;_position: absolute;"></iframe> 
```

一旦单击该十字按钮，abc.php 就有一个带有十字按钮的 div，我使用 jquery 来隐藏该 div。div 被删除，但父页面不可点击（因为 iframe）

我想在单击交叉按钮后立即删除整个 iframe，以便再次单击父页面。我知道这是一个跨域问题，并且我看到的类似问题很少，但我无法找到解决方案。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-18T20:15:31.877

将此添加到父级：

```
function childClose() {
    $('#iframeid').remove();
} 
```

然后从 iFrame 中调用它：

```
document.domain = 'domain.com';
$('selector').click(function(){parent.childClose();}); 
```

但是，是的，如果域不同，这将不起作用。

# ios - 如何为 (^Something) 块创建 MonoTouch 绑定？

> ID：10659029
> 
> 赞同：1
> 
> 时间：2012-05-18T20:05:07.417
> 
> 标签：ios, binding, xamarin.ios, objective-c-blocks

基本上，我正在尝试为作为块的属性创建绑定。[它在MonoTouch 文档](http://docs.xamarin.com/ios/advanced_topics/binding_objective-c_types#Binding_Blocks)中显示了如何执行此操作，但不适用于此特定情况。

* * *

这是我试图绑定的属性

```
 @property (copy) CouchDocumentPathMap documentPathMap; 
```

CouchDocumentPathMap 是这样定义的

```
 typedef NSString* (^CouchDocumentPathMap)(NSString* documentID); 
```

在[文档](http://docs.xamarin.com/ios/advanced_topics/binding_objective-c_types#Binding_Blocks)中，它显示了如何处理一个`(^)(id obj, BOOL *stop)`块，而不是一个`(^Something)(id someParam)`块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T01:26:01.873

由于获取“返回”块并不是真正有用，因此您可以像这样绑定此属性：

```
delegate string CouchDocumentPathMap (string documentID);

[...] 

[Export ("setDocumentPathMap:")]
void SetDocumentPathMap (CouchDocumentPathMap handler); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T15:54:14.717

`CouchDocumentPathMap`和，用你的话来说，不是`Something`块签名的一部分。`CouchDocumentPathMap`是一个类型的名称，该类型由`typedef`. 如果您要编写类型本身，它将是：

```
NSString* (^)(NSString* documentID) 
```

同样，可以在不使用 typedef 的情况下声明该属性：

```
@property (copy) NSString* (^documentPathMap)(NSString* documentID); 
```

它就像你更熟悉的类型。

# google-app-engine - 从 Google App Engine 信息中心生成自动报告

> ID：10659030
> 
> 赞同：2
> 
> 时间：2012-05-18T20:05:10.293
> 
> 标签：google-app-engine

我正在尝试根据我们的应用程序仪表板页面上的一些统计数据创建每晚的电子邮件。我无法找到一种方法来简单地导出数据或通过 api 访问任何这些数字。

看来我可以深入研究 appstats 代码并弄清楚如何通过 renderDetailsAsJson 自动获取一些统计信息，但是 a）我想要的大多数统计信息都不在那里，并且 b）我不太舒服地运行 appstats 记录全职我们的生产系统。

我也在考虑抓取 html 以获得我需要的数字，但我也不期待。

有没有人成功地以自动化方式检索 GAE 仪表板数据？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T22:50:40.560

是的，我们在一些黑客的帮助下成功地解析了仪表板。

GAE工具`appengine-tools-sdk-1.6.1.jar`使用`AppAdminFactory`ans`ServerConnection`类来更新/管理您的应用程序。没有此类的文档，但是通过查看源代码，我们提出了这段代码，它成功地获取了管理页面上的任何 Url：

```
 AppAdminFactory.ConnectOptions connectionOptions = new AppAdminFactory.ConnectOptions();
    connectionOptions.setCookies(new ClientCookieManager());
    connectionOptions.setHost("https://appengine.google.com");
    connectionOptions.setUserId("your_email@domain.com");
    connectionOptions.setPasswordPrompt(new AppAdminFactory.PasswordPrompt() {
        public String getPassword() {
            return "YourPassword";
        }
    });

    ServerConnection serverConnection = ServerConnectionFactory.getServerConnection(connectionOptions);
    Map<String, String> params = new HashMap<String, String>();

            // provide some parameters (see url when visiting Dashboard)
    params.put("app_id", "s~idd-backend")

            // provide the Url
    String response = serverConnection.get("/dashboard", params); 
```

# grails - 无法在 STS 2.8.1 中运行 Grails 2.0.3 项目？

> ID：10659031
> 
> 赞同：0
> 
> 时间：2012-05-18T20:05:15.800
> 
> 标签：grails, classpath, java, sts-springsourcetoolsuite

我曾经有 2 个 grails 项目，这意味着我可以作为 grails 应用程序运行，并且可以运行一个功能性的 Web 应用程序。

我们进行了大规模合并，所以我决定删除旧项目，然后使用 Subeclipse 插件从 svn 重新导入整个项目。

不知何故，有些东西被破坏了，所以当我尝试将项目作为 grails 应用程序运行时，会弹出以下错误：

归档：类路径引用的 C:/Program Files/Java/jdk1.6.0_26/lib/tools.jar 不存在。

我不知道错误引用的是什么类路径。我的机器上什至没有 1.6。我搜索了整个项目目录，对 1.6 的唯一引用在 buildconfig.groovy 文件中，因此我将这些引用更改为 1.7，清理所有项目，重新编译并尝试重新运行。同样的错误。

我的系统类路径当然不引用 1.6。STS 项目也配置为编译为 1.7。

因此，这让我别无其他可行的选择，只能卸载并重新安装 STS，无论如何，我必须经常这样做 - 除非这里的任何人可能有其他指示让我追查。我在这上面花了几个小时徒劳无功，并且非常接近跳到围栏的 VisualStudio 一侧，在那里我听说在那个 IDE 中从未发生过如此奇怪的事情......；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T18:17:40.100

您的启动配置已损坏并指向不存在的 JDK。`*.launch`您可以在工作区的所有文件中手动修复它：`$WORKSPACE/.metadata/.plugins/org.eclipse.debug.core/.launches/`或者只需在 STS 中打开运行配置并保存。STS 应自动切换到新的 JDK（使用 sts-2.9.1 测试）。

# c# - Linq Select 中的嵌套数组

> ID：10659035
> 
> 赞同：-1
> 
> 时间：2012-05-18T20:05:18.983
> 
> 标签：c#, linq

我正在尝试使用包含嵌套类数组的 LINQ 填充实例。我已经设法使用以下 LINQ 做到这一点。我还在选择中包含了构成实例的类。

```
 select new EditableWarrantBook {
        Id = p1.id,
        Comment = p1.EntryComment,
        WarrantYear1 = new BookYear {
            StatusYear = p2.StatusYear,
            Status = p2.Status,
        },
        WarrantYear2 = new BookYear {
            StatusYear = p3.StatusYear,
            Status = p3.Status,
        },
        WarrantYear3 = new BookYear {
            StatusYear = p4.StatusYear,
            Status = p4.Status,
        }
    }

public class EditableWarrantBook
{
    public int Id { get; set; }
    public string Comment { get; set; }

    public BookYear[] WarrantYear = new BookYear[3];

    public BookYear WarrantYear1
    {
        get { return WarrantYear[0]; }
        set { WarrantYear[0] = value; }
    }
    public BookYear WarrantYear2
    {
        get { return WarrantYear[1]; }
        set { WarrantYear[1] = value; }
    }
    public BookYear WarrantYear3
    {
        get { return WarrantYear[2]; }
        set { WarrantYear[2] = value; }
    }

}

public class BookYear
{
    public int? StatusYear { get; set; } 
    public string Status { get; set; } 
} 
```

这很有效，我可以使用`WarrantYear[0]`或访问值`WarrantYear1`。这在设计 UI 时有时很有用。但是，在这种情况下，我不需要该`WarrantYear1`属性，因为我将其转换为 JSON，并且不需要重复（或者想在网络上发送相同数据的两个版本）。我的问题是，如何编写选择语句来加载 WarrantYear 数组。或者我如何编写类，以便我可以将数组作为属性访问。我的解决方案不应包含类中的`Warrant1, Warrant2, Warrant3`属性`EditableWarrantBook`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:05:42.900

由于没有 Warrant1、Warrant2 和 Warrant3 属性，我无法让选择工作，我将其保留原样并重写了类，以便 JSON 序列化程序创建一个没有 Warrant1、Warrant2 和 Warrant3 属性的 JSON 实例。我使用了[这篇](https://stackoverflow.com/questions/930433/apply-properties-values-from-one-object-to-another-of-the-same-type-automaticall)文章的反射。为了澄清这个问题，我的第一次尝试是创建一个两倍大的 JSON 有效负载，因为 JSON 序列化程序同时创建了 Warrant1、Warrant2 和 Warrant3 结构，并再次创建了 Warrant[] 数组。使用仅使用 Warrant[] 数组的 JSON 结果的基类重写类满足我的 Web 服务的接口要求。

```
namespace my.Models
{
public class WarrantBook
{
    public int Id { get; set; } 
    public string Comment { get; set; }

    BookYear[] warrantYear = new BookYear[3];

    public BookYear[] WarrantYear
    {
        get { return warrantYear; }
        set { warrantYear = value; }
    }
}

public class EditableWarrantBook : WarrantBook  
{
    public BookYear WarrantYear1
    {
        get { return WarrantYear[0]; }
        set { WarrantYear[0] = value; }
    }
    public BookYear WarrantYear2
    {
        get { return WarrantYear[1]; }
        set { WarrantYear[1] = value; }
    }
    public BookYear WarrantYear3
    {
        get { return WarrantYear[2]; }
        set { WarrantYear[2] = value; }
    }

}
public class BookYear
{
    public int? StatusYear { get; set; } 
    public string Status { get; set; } 
}

public static class Ext
{
    public static void CopyProperties(this EditableWarrantBook  source, WarrantBook destination)
    {
        // Iterate the Properties of the destination instance and   
        // populate them from their source counterparts   
        PropertyInfo[] destinationProperties = destination.GetType().GetProperties();
        foreach (PropertyInfo destinationPi in destinationProperties)
        {
            PropertyInfo sourcePi = source.GetType().GetProperty(destinationPi.Name);
            destinationPi.SetValue(destination, sourcePi.GetValue(source, null), null);
        }
    }
} 
```

}

使用 WCF REST Web 服务

```
 [WebGet(UriTemplate = "GetWarrant?id={s}&user={user}")]
    public WarrantBook GetWarrant(string s, string user)
    {
        int id;
        if (int.TryParse(s, out id))
        {
            EditableWarrantBook model = SessionWarrantBook.One(p => p.Id == id);
            model.CheckedOutBy = user; // need to add checkout code
            WarrantBook jsonModel = new WarrantBook();
            model.CopyProperties(jsonModel);
            return jsonModel;
        }
        return new WarrantBook();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T20:15:34.607

问题是您试图将 SQL 世界（构建您的查询）与您的 CLR 世界（创建新对象）混合在一起。解决此问题的方法是将您的查询分解为初始数据获取查询（SQL 世界），然后枚举结果以转换为您的对象（CLR 世界）：

因此，在 之后`where p1.SaleYear == 2009`，添加以下内容：

```
select new { p1, p2, p3, p4 })
.AsEnumerable()
.Select(tr => new EditableWarrantBook
    {
    Id = tr.p1.id,
    Comment = tr.p1.EntryComment,
    WarrantYear = new[] {
        tr.p2 == null ? (BookYear)null : new BookYear // EDITED LINE
        {
            StatusYear = tr.p2.StatusYear,
            Status = tr.p2.Status,
        },
        tr.p3 == null ? (BookYear)null : new BookYear // EDITED LINE
        {
            StatusYear = tr.p3.StatusYear,
            Status = tr.p3.Status,
        },
        tr.p4 == null ? (BookYear)null : new BookYear // EDITED LINE
        {
            StatusYear = tr.p4.StatusYear,
            Status = tr.p4.Status,
        }}
    }).ToList(); 
```

如果您想保留查询语法，则只需将其更改为：

```
result = from tr in 
    (/*Select up to the AsEnumerable call above)*/).AsEnumerable()
    select new EditableWarrantBook
        {
            /* Initialization code supplied above */
        } 
```

编辑：所以我再次修改了这个例子。看起来您返回的值之一是 null，所以我添加了一个 null 检查以确保您没有访问 null 对象的属性（尽管我没有检查`p1`null）。

# java - 不要显示 EditText 的全部内容

> ID：10659036
> 
> 赞同：0
> 
> 时间：2012-05-18T20:05:23.930
> 
> 标签：java, android, android-edittext

我所做的是不显示 EditText 的全部内容......我有一个字符串太长，我希望你只看到三个点。

有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T20:23:46.270

如果您只想显示文本并且不希望用户编辑它，请使用 a`TextView`而不是`EditText`.

在 XML 布局文件中，只需使用[android:ellipsize](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3aellipsize)属性即可截断文本并添加“...”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T20:10:27.370

从 edittext 中获取文本并将其保存为 String 变量。然后，您可以使用 Java 中的一些逻辑来完成其余的工作。

```
int maxLength = AMOUNT_YOU_WANT_TO_BE_THE_MAXIMUM;
if(String.length() > maxLength)
    EditText.text = EditText.text.substring(0, maxLength) + "..."; 
```

我假设您知道如何获取 EditText 字段的文本。如果没有，请问。

# php - 简单的 xml getName 不起作用

> ID：10659039
> 
> 赞同：-1
> 
> 时间：2012-05-18T20:05:44.927
> 
> 标签：php, xml, simplexml

我尝试获取 xml 的元素名称。我使用 getName() 函数。但我不知道为什么它总是出错，它在那个页面上出错。

```
 $xml=filePath::$xml; //guide to the xml file

    //use simple xml to get the attributes

        $xmldoc=simplexml_load_file($xml);

        //get the children
        foreach($xmldoc->children() as $child) {

            foreach($child->attributes() as $a=>$b) {
              echo $b;//this statement works correctly

            }
            echo $child->getName();//this statement does not work, and it leads to the error.

        } 
```

为什么？

xml 文件如： root collection id="new1" slash collection collection id="new2" slash collection slash root

正确的输出应该是：new1 collection new2 collection。但“收藏”无法打印出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T20:41:34.570

请检查以下内容，我为您提供了两个有关如何从本地和远程 XML 加载、获取和打印数据的示例，也许您忘记了一些事情。

如果 XML 文档语法 100% 正确，您也可以检查它。

您可以使用此工具来验证您的 XML：

[http://www.w3schools.com/xml/xml_validator.asp](http://www.w3schools.com/xml/xml_validator.asp)

* * *

**加载本地 XML，获取和打印数据：**

```
<?php

// xml example with namespaces
$xml = '<market 
xmlns:m="http://mymarket.com/">
<m:fruit>
  <m:type>
    <m:name from="US">Apples</m:name>
    <m:name>Bananas</m:name>
  </m:type>
  <m:sell>
    <m:date>2012-06-24</m:date>
  </m:sell>
</m:fruit>
</market>';

// load the xml
$elems = simplexml_load_string($xml);

// evaluate if not null
if($elems != null){

    // declare the namespaces
    $ns = array(
      'm' => "http://mymarket.com/"
    );

    // for each td inside tr
    foreach ($elems->children($ns['m'])->fruit->type->name as $item) {
        echo $item->attributes()->from;
        echo ',';
        echo $item;
    }

    // get just an element without using loop
    echo ','.$elems->children($ns['m'])->fruit->sell->date;

    // final output is: US,Apples,Bananas,2012-06-24 
}

?> 
```

**加载远程 XML，获取和打印数据：**

```
<?php

$url = "http://www.mymarket.com/products.xml";

// evaluate if not null
if(getXml($url) != null){

    // declare the namespaces
    $ns = array(
      'm' => "http://mymarket.com/"
    );

    // for each td inside tr
    foreach ($elems->children($ns['m'])->fruit->type->name as $item) {
        echo $item->attributes()->from;
        echo ',';
        echo $item;
    }

    // get just an element without using loop
    echo ','.$elems->children($ns['m'])->fruit->sell->date;

    // final output is: US,Apples,Bananas,2012-06-24 
}

function getXml($url)
{
    $xml = @file_get_contents($url);
    // If page not found and server has a 404 error redirection, use strpos to look through the $xml
    if($xml == false || strpos($xml,'404') == true){
        return null;
    }
    else{
        $elems = simplexml_load_string($xml);
        return $elems;
    }
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T20:18:32.377

您确定 xml 文档有效吗？

脚本是否通过

```
 if($xmldoc!=null)
     { 
```

它可能会声明 $xmldoc 为 null，因为该文档无效。

# templates - 在 scala 模板中解码 html

> ID：10659040
> 
> 赞同：2
> 
> 时间：2012-05-18T20:05:48.343
> 
> 标签：templates, scala, playframework, html-escape-characters

我正在尝试制作一个根据路线表现不同的标签，但是当我尝试在一个`@{ ... }`块中呈现 html 时，我似乎无法正确插入我的变量。

```
@(route: String, on_image: String, off_image: String, alt_text: String)

@{
    val Pattern = ("(" + route + ".*)").r
    val path = request().path()

    path match {
        case Pattern(foo) => {
            if(path != route && route == "/") {
                <script type="text/javascript">
                    alert("{route}");
                </script>
            } else {
                <script type="text/javascript">
                    alert("{route}");
                </script>           
            }
        }
        case _ => {
            <script type="text/javascript">
                alert("{route}");
            </script>       
        }
    }
} 
```

当我加载页面时，我的 Firebug 控制台中出现语法错误，其中显示脚本标记的内容评估为：

`alert(&quot;/accounts&quot;);`

现在，我已经尝试过像`@Html{ ... }`and `@Html( ... )`and`@Html({ ... })`围绕整个街区的事情。我也尝试过`alert(@Html("{bar}"));`其他类似的事情，但一切都会产生各种错误。

这样做的正确方法是什么？

**编辑**

更新以显示为简单起见尝试仅使用一个变量，并显示该变量的来源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T20:41:30.143

用一点间接解决。

```
@(route: String, on_image: String, off_image: String, alt_text: String)

@on = {
    <a href="@route"><img src="@routes.Assets.at(on_image)" alt="@alt_text" /></a>
}

@off = {
    <a href="@route"><img src="@routes.Assets.at(off_image)" alt="@alt_text" /></a>
}

@{
    val Pattern = ("(" + route + ".*)").r
    val path = request().path()

    path match {
        case Pattern(foo) => {
            if(path != route && route == "/") {
                {off}
            } else {
                {on}    
            }
        }
        case _ => {
            {off}       
        }
    }
} 
```

# cygwin - Cygwin - 自动安装 OpenSSH 服务器

> ID：10659043
> 
> 赞同：4
> 
> 时间：2012-05-18T20:06:20.483
> 
> 标签：cygwin, openssh

我想知道是否有一种方法可以帮助我不仅自动安装 cygwin，还可以帮助我使用 cygwin 建立 OpenSSH 服务器。是否可以在一个脚本中完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-20T07:32:55.193

静默安装 cygwin openssh 和 apt-cyg：

```
setup -q -D -s http://mirrors.xmission.com/cygwin -l C:\cygwin -L C:\cygwin -P wget,git,git-svn,openssh
C:\cygwin\bin\wget rawgit.com/transcode-open/apt-cyg/master/apt-cyg
C:\cygwin\bin\install apt-cyg /bin
C:\cygwin\bin\mkpasswd -l > C:\cygwin\etc\passwd    
C:\cygwin\bin\mkgroup -l > C:\cygwin\etc\group
C:\cygwin\bin\bash --login -c "/bin/ssh-user-config -y -p paswordforusersshd"
netsh advfirewall firewall add rule name=SSH dir=in action=allow protocol=tcp localport=22
net start sshd 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T20:40:06.680

我很确定它至少需要两个脚本。

cygwin 的静默安装是 [可能的，但很乏味](http://cygwin.com/ml/cygwin/2010-03/msg00877.html)。它要求您至少部分手动完成安装过程。该链接末尾附近有一个部分“- 如果您想在运行 setup.exe 后自动配置某些内容”，您必须调整该部分以完成[在 cygwin 中运行 ssh 服务器](http://www.noah.org/ssh/cygwin-sshd.html)所需的安装后设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-11T02:57:52.070

我使用它，专门用于您所指的任务。向下滚动到名为*Deploy Cygwin and OpenSSH* ...的批处理脚本

[J2897的Pastebin](http://pastebin.com/u/J2897)

它也会自动设置公钥认证。因此，您所要做的就是将您的公钥添加到服务器的*authorized_keys*文件中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-11T14:16:23.823

我意识到这是一个已经有明确答案的老问题；但是，对于其他搜索，我想为想要一个易于使用的软件包的 Windows 管理员提供一个额外的答案，该软件包可以在 Windows 上自动安装和配置 OpenSSH 的 Cygwin 端口：

[https://github.com/Bill-Stewart/CygSSH](https://github.com/Bill-Stewart/CygSSH)

它使用 Cygwin v3，因此不需要专用的服务帐户（该服务以 SYSTEM 身份运行）。

The intent is to provide a convenient packaging of OpenSSH and rsync that would be (relatively) convenient to install and use on Windows machines, so it has some defaults and capabilities that are more Windows-centric:

*   Installer supports silent installation and adding to the system path

*   PowerShell is the remote interactive shell (either Windows PowerShell or PowerShell Core)

*   It creates an SSH Users local group for authentication and sets that by default in `sshd_config`; nested groups are supported (e.g., if you want to manage the membership via GPO)

*   It supports granting sftp-only access to accounts

*   It includes rsync

The package requires Windows 7 SP1/Windows Server 2008 R2 SP1 or newer. It's not a general-purpose Cygwin install; the intent is to provide an easy-to-use prepackaged OpenSSH for Windows.

# ruby - Ruby CSV 不理解 \r\n 作为行结束

> ID：10659047
> 
> 赞同：8
> 
> 时间：2012-05-18T20:07:03.927
> 
> 标签：ruby, csv

我使用一个 iPhone 应用程序，它会定期通过电子邮件向我发送 CSV 格式的日志。我有一个 ruby​​ 脚本，可以将该日志中的数据与旧日志相加。最近，应用程序开发人员发布了一个更新，由于某种未知原因，在每行末尾添加了一个回车，导致我的脚本失败。根据文档，`:row_end`默认情况下应该是`:auto`，它应该接受`\r\n`或`\n`（在 1.9.2 中）。我尝试使用 Ruby 1.8.7、1.9.2 和 FasterCSV 和 1.8.7。我通过这些不同的尝试收到各种错误消息，包括

*   `CSV::IllegalFormatError`
*   未加引号的字段不允许`\r`或`\n`（第 1 行）（`FasterCSV::MalformedCSVError`）
*   不能复制`NilClass`（TypeError）

在 1.9.2 中。（`\r`不在字段中，它是行尾！）数据以前看起来像这样：

```
03-12-2012 07:59,120.0,
03-11-2012 08:27,120.0,
03-10-2012 07:57,120.0, 
```

现在看起来像这样：

```
03-12-2012 07:59,120.0,^M
03-11-2012 08:27,120.0,^M
03-10-2012 07:57,120.0,^M 
```

考虑到 CSV 可能认为`^M`是在最后一个字段中，我尝试添加另一个逗号：

```
03-12-2012 07:59,120.0,,^M 
```

无济于事。

我唯一能想象的是 CSV 要求所有字段都用双引号引起来？我可以想到各种解决方法，例如先读取文件，然后用 CSV 处理数组，但首先我想找出我做错了什么。似乎它应该工作。

顺便说一句，我的代码很简单：

```
CSV.foreach(File.join($import_dir, file)) do |record| 
```

我试过设置`:row_end => "\r\n"`无济于事。

我在 Mac OS X 10.6.8 上。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-02-12T05:18:32.200

因为 CSV 需要在自动时读取/解析整个文件`row_end`，所以我需要执行以下操作以防止格式化和编码异常。

*   通过解码文件`File.read`
*   删除那些讨厌的回车（可能是一个或多个）
*   将清理后的文件解析为 CSV

```
file = File.read(temp_file.path, encoding: 'ISO-8859-1:UTF-8')
file = file.tr("\r", '')

CSV.parse(file, headers: true) do |row|
  # do all the things
end 
```

注意：我将 Ruby 2.1.3 版本用于 Rails 4 应用程序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-18T20:21:01.567

尝试设置`row_end`为

```
"\r\n" 
```

这与 '\r\n' 不同：单引号字符串只允许您转义 ' 和 \，其他任何内容都被视为文字 \，即

```
'\r' == "\\r" 
```

是真的

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-18T20:19:33.773

你提到了尝试`:row_end => '\r\n'`。单引号将（大多数情况下）反斜杠视为常规反斜杠字符；试试`:row_end => "\r\n"`，用双引号。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-18T23:48:24.643

在 1.9.3 中为我工作：

```
mark@ubuntu:~$ irb
1.9.3p0 :001 > require 'csv'
 => true
1.9.3p0 :002 > CSV.foreach("rn.csv") do |row|
1.9.3p0 :003 >   p row
1.9.3p0 :004 > end
["1","2","3","4","5"]
["6","7","8","9","10"] 
```

该文件确实有回车：

```
mark@ubuntu:~$ od -a rn.csv
0000000   1   ,   2   ,   3   ,   4   ,   5  cr  nl   6   ,   7   ,   8
0000020   ,   9   ,   1   0  cr  nl
0000027 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-20T16:23:18.907

文件的行实际上以 \r\r\n 结尾，而不是 \r\n 这很尴尬，我应该更详细地检查文件。我假设行尾是 \n，因为我在 Unix 机器上。但是，当 Emacs 打开文件时，它会自动进入“DOS”模式，因此它将 \r\n 显示为新行，并且仅将多余的 \r 显示为“^M”

# mysql - MySQL查询删除行

> ID：10659049
> 
> 赞同：0
> 
> 时间：2012-05-18T20:07:17.937
> 
> 标签：mysql, sql

我知道这不是 SO 的完美问题，但这个问题对我来说非常重要：

```
DELETE FROM `pligg_links` WHERE `link_id` > 10000 
```

`pligg_links`此查询会删除表中`link_id`大于 10000 的所有条目吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T20:11:54.037

如果您不确定，请先运行`SELECT`以查看将删除的内容：

```
SELECT * FROM `pligg_links` WHERE `link_id` > 10000 
```

此查询返回的行是那些将通过更改`SELECT *`为删除的行`DELETE`。

我建议您在编写`DELETE`语句时使用此技术，以防止因拼写错误而发生事故，尤其是在恢复意外删除的数据非常耗时的情况下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T20:17:33.813

在将其用于生产之前，请始终尝试对数据库的备份副本进行破坏性语句。这是假设您在某处拥有数据库的副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T20:09:09.563

假设你有适当的权利，它会的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T20:09:43.213

如果`link_id`确实是一个数字字段，那么是的。

# one-to-many - OneToMany 未填充在视图中，但如果由 Controller 加载则填充

> ID：10659050
> 
> 赞同：0
> 
> 时间：2012-05-18T20:07:19.747
> 
> 标签：one-to-many, playframework-2.0

我开始学习 Play Framework 2，遇到了一个奇怪的问题。

我在 a和它的许多s`OneToMany`之间定义了一个关系。`Project``Task`

```
@Entity
public class Project extends Model {
    @OneToMany(mappedBy="project", cascade=CascadeType.ALL)
    public List<Task> tasks = new ArrayList<Task>();
}

@Entity
public class Task extends Model {
    @ManyToOne
    public Project project;
} 
```

我有一些代码可以找到并显示`Project`：

```
final Project foundProject = Project.find(id);
//Logger.error("Tasks size:"+foundProject.tasks.size());
return ok(views.html.tasks.render(foundProject, taskForm)); 
```

还有一个观点：

```
@for(task <- project.tasks) {
    <li>@task.title</li>
} 
```

请注意`Logger`代码中找到`Project`. 如果该行被注释掉，则不`Task`显示 s，如果该行未被注释掉，则`Task`显示 s。

就好像某种惰性初始化代码在控制器内部工作但不在视图内部工作。是否有我错过的游戏的微妙之处，或者我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T07:04:26.633

这是我的错 - 我是 eBean 的新手，在代码中这样做是为了找到我的项目：

```
finder.ref(id); 
```

代替：

```
finder.byId(id); 
```

# asp.net - 使用 ASP.NET 定义 CSS 类类型等属性

> ID：10659052
> 
> 赞同：0
> 
> 时间：2012-05-18T20:07:30.077
> 
> 标签：asp.net, css

我在一页的 4 个地方使用下面的下拉菜单，有没有一种方法可以在一个地方定义字体大小，就像我们在 CSS 中那样，使用 ASP 控件`Font-Size`。是否可以在 ASP.NET 页面中做到这一点

```
<asp:DropDownList Font-Size="XX-Small" runat="server" ID="SampleDropDown"  >
 </asp:DropDownList> 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T20:11:14.187

始终最好使用 CSS 类名 + 样式表而不是内联样式。

```
<asp:DropDownList CssClass="dropDownListA" runat="server" ID="SampleDropDown" >
</asp:DropDownList> 
```

CSS：

```
.dropDownListA {
     font-size:12px;
} 
```

# windows - Windows 中的注册表权限

> ID：10659053
> 
> 赞同：-2
> 
> 时间：2012-05-18T20:07:32.010
> 
> 标签：windows, winapi, registry, uac

在我的小应用程序中，我试图在注册表中创建一个子键。我在 Windows 7 中执行此操作。我已经尝试了该`RegCreateKeyEx`功能的所有可能的键组合。我记得，在 Win XP 中一切都很好。尽管如此，它总是返回“*拒绝访问*”结果。我发现必须对*用户访问控制*设置做一些事情。这些信息解释得很混乱，我没有得到应该做的事情。有人可以告诉我出路吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T20:39:41.173

根据评论，您正在尝试写信给 HKCR。为此，您需要管理员权限。

1.  在 XP 上，您的用户是管理员，因此具有管理员权限。代码成功。
2.  在 Vista 及更高版本中，如果 UAC 处于活动状态，您的用户（即使是管理员用户）也可以使用标准用户令牌运行。代码失败，拒绝访问。

如果您确实需要写入此密钥，那么您将需要以管理员权限运行。这将需要一个 requireAdministrator 清单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T20:11:36.493

简短的回答是不要尝试编写特权密钥。例如，使用`HKEY_CURRENT_USER`root 而不是`HKEY_LOCAL_MACHINE`.

# c++ - 运算符重载 << 枚举到 ostringstream

> ID：10659055
> 
> 赞同：3
> 
> 时间：2012-05-18T20:07:49.700
> 
> 标签：c++, enums, overloading, ostringstream

我有以下宏。

```
#define STRING_STREAM( data )       \
    ( ( (std::ostringstream&)       \
        ( std::ostringstream( ).seekp( 0, std::ios_base::cur ) << data ) ).str( ) ) 
```

我正在尝试为枚举重载 <<：

```
std::ostringstream& operator<<( std::ostringstream& oStrStream, TestEnum& testEnum )
{
    oStrStream << "TestEnum";
    return oStrStream;
} 
```

当我调用 STRING_STREAM(testEnum) 时，它不使用重载的 <<。它打印枚举数值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T04:55:07.393

```
std::ostream& operator<<( std::ostream& oStrStream, const TestEnum testEnum )
{
    oStrStream << "TestEnum";
    return oStrStream;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T05:08:50.433

问题是重载的 << 运算符期望一个参数为..

```
new ostringstream() 
```

但你给它的论点..

```
ostringstream() 
```

这与重载函数**不**匹配。

在我的示例中，我使用 auto_ptr 在超出范围后自动释放 ostringstream。这允许我们使用宏来执行我们的功能而不会发生内存泄漏。

```
#include<sstream>
#include<iostream>
#define STRING_STREAM( data )                                                  \
   ((ostringstream&)( *( auto_ptr<ostringstream>(new ostringstream()) ) << data)).str()

using namespace std;

enum TestEnum { ALPHA, BETA };

ostringstream& operator<<( ostringstream& oss, TestEnum testEnum ){
    oss << "TestEnum";
    return oss;
}
int main(){
    cout << STRING_STREAM( ALPHA ) << endl;
} 
```

# iphone - 应用程序在后台时iPhone检测音量键按下

> ID：10659060
> 
> 赞同：0
> 
> 时间：2012-05-18T20:08:25.760
> 
> 标签：iphone, ios, ios5, ios4

我正在开发一个 iphone 应用程序，我想在应用程序在后台模式下运行时检测一些动作。当按下以触发应用程序中的某些操作时，是否可以检测到音量按钮？

我的应用程序尝试执行一些紧急警报以提醒服务器用户处于危险情况。

一些想法来满足这个要求？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T20:23:32.283

伊万，在苹果的官方文档中：

[https://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](https://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

它说只有当应用程序向 iOS 请求额外的时间时才有可能

对不起 ：（

# c++ - char sprintf() 句柄的限制

> ID：10659061
> 
> 赞同：0
> 
> 时间：2012-05-18T20:08:25.660
> 
> 标签：c++, c, linux

我有 2 个程序.. 一个要学习，另一个是剖析它.. 就像.. 我有一个计算每秒游戏帧数的函数。

其中一个：`sprintf(FPS, "Immortal Conflicts: FPS: %d,", misc.FPS);` 另一个没问题

`sprintf(FPS, "Immortal_Conf %d", misc.FPS);` 由于某种原因，当我在第二个函数数据中输入更多字符时，是否有某种原因......堆栈字符或其他东西，因为数字长如 8 位并且不会改变。

它写得像 Immortal_Conflicts: FPS: 8454390345

*我注意到当我从地方改变它时……它吓坏了……哈哈

字符 FPS[2];

哦，它适用于 FPS[20] =O 我对数组和字符一无所知.. 事实上.. 我学到了一些东西.. 哈哈，我发现了我的问题，哈哈

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T20:37:36.167

缓冲区溢出，因为`FPS`只能容纳两个字符。它需要足够大以容纳生成的字符串。

因为这是 C++ 建议使用`std::ostringstream`来构造你的字符串：

```
#include <sstream>

std::ostringstream FPS;
FPS << "Immortal Conflicts: FPS: " << misc.FPS; // FPS.str() will return a
                                                // std::string of the data. 
```

# css - 样式化 twitter 引导按钮

> ID：10659070
> 
> 赞同：96
> 
> 时间：2012-05-18T20:09:25.973
> 
> 标签：css, button, twitter-bootstrap

Twitter-Bootstrap 按钮非常漂亮。[通过滚动它们来试用它们](http://getbootstrap.com/components/)

![引导按钮屏幕截图](../Images/da84389b47df2690e65f1b89282fe3fb.png)

但它们的颜色有限。

有什么办法可以改变按钮的基本颜色，同时保持引导程序如此美丽和轻松的美丽悬停效果？

我完全不知道 twitter 用来维持这些效果的 css/javascript 是什么样的。

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2013-01-05T17:56:35.887

我发现最简单的方法是把它放在你的覆盖中。对不起，我没有想象力的颜色选择

## Bootstrap 4-Alpha SASS

```
.my-btn {
  //@include button-variant($btn-primary-color, $btn-primary-bg, $btn-primary-border);
  @include button-variant(red, white, blue);
} 
```

[Bootstrap 4 Alpha SASS 示例](http://codepen.io/chrisan/pen/LVKBby "Bootstrap 4 Alpah SASS 示例")

## 引导程序 3 LESS

```
.my-btn {
  //.button-variant(@btn-primary-color; @btn-primary-bg; @btn-primary-border);
  .button-variant(red; white; blue);
} 
```

[Bootstrap 3 LESS 示例](http://codepen.io/chrisan/pen/nsEJf "Boostrap 3 LESS 示例")

## 引导程序 3 SASS

```
.my-btn {
  //@include button-variant($btn-primary-color, $btn-primary-bg, $btn-primary-border);
  @include button-variant(red, white, blue);
} 
```

[引导 3 SASS 示例](http://codepen.io/chrisan/pen/aArJt "引导 3 SASS 示例")

## 引导程序 2.3 LESS

```
.btn-primary {
  //.buttonBackground(@btnBackground, @btnBackgroundHighlight, @grayDark, 0 1px 1px rgba(255,255,255,.75));
  .buttonBackground(red, white);
} 
```

[Bootstrap 2.3 LESS 示例](http://codepen.io/chrisan/pen/EHnkq "Bootstrap 2.3 LESS 示例")

## 引导程序 2.3 SASS

```
.btn-primary {
  //@include buttonBackground($btnPrimaryBackground, $btnPrimaryBackgroundHighlight); 
  @include buttonBackground(red, white); 
} 
```

它将为您处理悬停/活动

从评论中，如果您想在使用黑色（或只是想反转）时使按钮变亮而不是变暗，则需要进一步扩展该类，如下所示：

## Bootstrap 3 SASS Ligthen

```
.my-btn {
  // @include button-variant($btn-primary-color, $btn-primary-bg, $btn-primary-border);
  $color: #fff;
  $background: #000;
  $border: #333;
  @include button-variant($color, $background, $border);
  // override the default darkening with lightening
  &:hover,
  &:focus,
  &.focus,
  &:active,
  &.active,
  .open > &.dropdown-toggle {
    color: $color;
    background-color: lighten($background, 20%); //10% default
    border-color: lighten($border, 22%); // 12% default
  }
} 
```

[Bootstrap 3 SASS 减轻示例](http://codepen.io/chrisan/pen/EaLaBe "Boostrap 3 SASS 减轻示例")

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-05-18T20:15:30.867

您可以覆盖 CSS 中的颜色，例如危险按钮：

```
.btn-danger { border-color: #[insert color here]; background-color: #[insert color here];

.btn-danger:hover { border-color: #[insert color here]; background-color: #[insert color here]; } 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2013-06-20T13:41:23.933

这是一个很好的资源：[http ://charliepark.org/bootstrap_buttons/](http://charliepark.org/bootstrap_buttons/)

您可以更改颜色并查看实际效果。

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2012-05-18T20:15:15.030

基本上，Twitter Bootstrap 中的按钮在 CSS 中由“.btn{}”控制。您需要做的是转到 CSS 文件并找到其中显示“btn”的位置并更改颜色设置。但是，这并不像这样做那么简单，因为您还必须更改按钮在突出显示时变为什么颜色等。为此，您必须在 CSS 中查找其他标签，例如“.btn:hover{} “， ETC。

更改它需要更改 CSS。这是该文件的快速链接：

[https://github.com/twbs/bootstrap/blob/master/dist/css/bootstrap.css](https://github.com/twbs/bootstrap/blob/master/dist/css/bootstrap.css)

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2013-10-28T20:28:36.033

如果您在加载 bootstrap.css（版本 3）后已经在加载您自己的自定义 CSS 文件，您可以将这 2 个 CSS 样式添加到您的 custom.css 中，它们将覆盖默认按钮样式的引导默认值。

```
.btn-primary:hover, .btn-primary:focus, .btn-primary:active, .btn-primary.active, .open .dropdown-toggle.btn-primary {

  background-color: #A6A8C1;
  border-color: #31347B;
 }

.btn
{
  background-color: #9F418F;
  border-color: #9F418F;
} 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2012-08-21T20:47:10.013

[我建议使用LESS](http://lesscss.org/)，而不是一一更改 CSS 值。Bootstrap 在 Github 上有 LESS 版本：[https ://github.com/twbs/bootstrap](https://github.com/twbs/bootstrap)

LESS 允许您定义变量以更改颜色，这使其更加方便。定义一次颜色，LESS 编译全局更改值的 CSS 文件。节省时间和精力。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2015-10-26T07:47:34.187

为了完全覆盖引导按钮样式，您需要覆盖属性列表。请参见下面的示例。

```
 .btn-primary, .btn-primary:hover, .btn-primary:focus, .btn-primary.focus, 
    .btn-primary:active, .btn-primary.active, .btn-primary:visited,
    .btn-primary:active:hover, .btn-primary.active:hover{
        background-color: #F19425;
        color:#fff;
        border: none;
        outline: none;
    } 
```

如果您不使用所有列出的样式，那么您将在对按钮执行操作时看到默认样式。例如，一旦您单击按钮并从按钮上移除鼠标指针，您将看到默认颜色可见。或者按住按钮，您将看到默认颜色。所以，我列出了所有要被覆盖的伪样式。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2014-02-04T06:53:20.817

对于 Sass 的 Bootstrap 覆盖，它是

```
.btn-default {

    @include button-variant($color, $background, $border);

} 
```

你可以在这里看到它的来源：[https ://github.com/twbs/bootstrap-sass/blob/a5f5954268779ce0faf7607b3c35191a8d0fdfe6/assets/stylesheets/bootstrap/mixins/_buttons.scss#L6](https://github.com/twbs/bootstrap-sass/blob/a5f5954268779ce0faf7607b3c35191a8d0fdfe6/assets/stylesheets/bootstrap/mixins/_buttons.scss#L6)

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2013-03-26T12:10:51.997

或尝试[http://twitterbootstrapbuttons.w3masters.nl/](http://twitterbootstrapbuttons.w3masters.nl/)。它基于 html 颜色输入为按钮创建 css。在引导 css 之后添加 css。它提供了三种样式的按钮（浅色、深色和旋转）。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2015-04-07T10:44:15.213

这是一种非常简单有效的方法：在您的 CSS 类中添加您想要应用于按钮的颜色：

```
.my-btn{
    background: #0099cc;
    color: #ffffff;
}
.my-btn:hover { 
  border-color: #C0C0C0; 
  background-color: #C0C0C0; 
} 
```

并将样式添加到您的引导按钮或链接：

```
<a href="xxx" class="btn btn-info my-btn">aaa</a> 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2013-09-03T08:17:10.663

在[Twitter Bootstrap](http://twitterbootstrap.org "例子") bootstrap 3.0.0 中，Twitter 按钮是扁平的。您可以从[http://getbootstrap.com/customize](http://getbootstrap.com/customize)对其进行自定义。按钮颜色，边框圆形等。

您还可以在 [http://twitterbootstrap.org/bootstrap-css-buttons](http://twitterbootstrap.org/bootstrap-css-buttons)找到 HTML 代码和其他功能。

Bootstrap 2.3.2 按钮是渐变的，但 3.0.0（新版本）是扁平的，看起来更酷。

您还可以找到自定义整个引导程序外观和样式的资源：http: [//twitterbootstrap.org/top-5-customizing-bootstrap-resources/](http://twitterbootstrap.org/top-5-customizing-bootstrap-resources/)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-10-15T23:20:46.777

我知道这是一个较旧的线程，但只是为了添加另一个视角。我断言使用覆盖确实有点代码味道，并且在大型项目中很快就会失控。今天你要覆盖按钮，明天要覆盖 Modals，第二天要覆盖 Dropdowns，等等，等等。

我建议尝试可能注释掉包含的`buttons.less`内容并定义我自己的，或者找到另一个更适合我的项目的 Buttons 库。无耻的插件：这是一个将我们的 Buttons 库与 TB 混合是多么容易的示例：[Using Buttons with Twitter Bootstrap](https://www.youtube.com/watch?v=lhTFwq0vjLw&list=UUF1MSa97IFUc_aPVxoCSn0g)。同样，在实践中，您可能希望`buttons.less`完全删除包含以提高性能，但这表明您可以如何使事情看起来不那么“通用”。我自己还没有完成这个练习，但我想你可以从简单地注释掉以下行开始：

[https://github.com/twbs/bootstrap/blob/master/less/bootstrap.less#L17](https://github.com/twbs/bootstrap/blob/master/less/bootstrap.less#L17)

然后使用您自己的按钮模块之一使用 `lessc 重新编译。这样，您就可以获得经过实战考验的 TB 核心，但仍可以自定义事物而无需诉诸重大覆盖。绝对没有理由不只使用像 Bootstrap 这样的库的一部分。当然这同样适用于 Sass 版本的 TB

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-08-19T00:18:34.237

对于 Bootstrap（至少对于 3.1.1 版）和 LESS，您可以使用：

```
.btn-my-custom {
    .button-variant(@color; @background; @border)
} 
```

这在 中定义`bootstrap/less/buttons.less`。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-07-25T14:13:46.333

您可以更改背景颜色并使用 !important;

```
.btn-primary {
  background-color: #003c79 !important;
  border-color: #15548b !important;
  color: #fff;
}

.btn-primary:hover {
  background-color: #4289c6 !important;
  border-color: #3877ae !important;
  color: #fff;
}

.btn-primary.focus, .btn-primary:focus {
   background-color: #4289c6 !important;
   border-color: #3877ae !important;
   color: #fff;
}
```

# javascript - element.tagname 不会在链接上返回

> ID：10659071
> 
> 赞同：0
> 
> 时间：2012-05-18T20:09:27.767
> 
> 标签：javascript, iphone, tagname

 我正在编写一个 iPhone 应用程序，该应用程序使用一点 javascript 代码来获取 UIWebView 上一个点的元素。 

我对 iPhone 有一点经验，但没有使用 javascript 的经验，我在教程中找到了该代码（[此处](http://www.icab.de/blog/2010/07/11/customize-the-contextual-menu-of-uiwebview/)）

```
// Javascript code
function MyAppGetHTMLElementsAtPoint(x,y) {
    var tags = ",";
    var e = document.elementFromPoint(x,y);
    while (e) {
        if (e.tagName) {
            tags += e.tagName + ',';
        }
        e = e.parentNode;
    }
    return tags;
}

// iPhone code
    NSString *tags = [self.webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"MyAppGetHTMLElementsAtPoint(x,y);"]]
    if ([tags rangeOfString:@",A,"].location != NSNotFound) {
        NSLog(@"Link found");
        ....
    } 
```

问题是我已经使用例如 google 搜索网页测试了此代码，但我没有得到“找到链接”日志。

我认为这可能是因为页面不是完整的 HTML，但我无能为力。

谢谢！！

PD：我有同样的问题，但不是在所有页面上都有 IMG 标签（可能是因为 CSS）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T20:14:48.813

当您将其放入源代码时，某些 XHTML 模式会返回`tagName`，因此它可以小写。试着打电话

```
tags += e.tagName.toUpperCase() + ','; 
```

如果这不是问题，那么 `tags`字符串包含什么？

**完全不相关的建议**

数组是创建逗号分隔列表的最佳方式

```
function MyAppGetHTMLElementsAtPoint(x,y) {
    var tags = [];
    var e = document.elementFromPoint(x,y);
    while (e) {
        if (e.tagName) {
            tags.push(e.tagName);
        }
        e = e.parentNode;
    }
    return tags.join(',');
} 
```

我提供了一个 JSFiddle [http://jsfiddle.net/cgpVk/1/](http://jsfiddle.net/cgpVk/1/)证明该功能工作正常。你可能没有传递正确的坐标

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T20:11:40.927

您是否尝试过`e.tagName`每次记录？然后你可以看到你得到的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T06:22:46.143

正如@JuanMendes 所建议的那样，问题出在iPhone 传递给javascript 函数的坐标上。

```
// Not working code
// Searches the location on the main view, that is the full screen
CGPoint pt = [gestureRecognizer locationInView:self.view];

// Working code
// Searches the location only on the webView
CGPoint pt = [gestureRecognizer locationInView:self.webView]; 
```

感谢那些帮助我的人，尤其是@JuanMendes

# ruby-on-rails - 无法从 RubyMine Jetbrains IDE 的其他功能命令行中加载“rails c”（错误：“切换到检查模式”）

> ID：10659076
> 
> 赞同：1
> 
> 时间：2012-05-18T20:09:55.240
> 
> 标签：ruby-on-rails, development-environment, rubymine, rails-console

编辑：问题是，我如何“切换到检查模式”？

通过 RubyMine Jetbrains IDE 中的“外部工具”功能（文件、设置、外部工具），我巧妙地在我的 Jetbrains IDE 中添加了一个命令行。这个 cmd（我正在使用 Vista）工具适用于所有命令，包括 rails generate 和 rake 命令，但是当我尝试“rails c”时，它看起来像这样：

```
C:\Users\davo\Desktop\RailsProjects\simple_cms>rake db:migrate
rake db:migrate
==  CreateAdminUsersPagesJoin: migrating ======================================
-- create_table(:admin_users_pages, {:id=>false})
   -> 0.5620s
-- add_index(:admin_users_pages, ["admin_user_id", "page_id"])
   -> 0.2740s
==  CreateAdminUsersPagesJoin: migrated (0.8360s) =============================

C:\Users\davo\Desktop\RailsProjects\simple_cms>rails c
rails c
Loading development environment (Rails 3.2.3)
Switch to inspect mode. 
```

这就是jetbrains“自定义控制台”的全部内容。如您所见，我可以在那里执行 rake 命令。

我用谷歌搜索了“切换到检查模式”，但找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:04:09.240

RubyMine 有一个内置的方法来做到这一点：`Tools`|`Run Rails Console...`

# operating-system - 操作系统加载

> ID：10659080
> 
> 赞同：2
> 
> 时间：2012-05-18T20:10:17.820
> 
> 标签：operating-system

当计算机系统启动时，操作系统在哪里加载？它是RAM还是ROM？

好吧，我读到 RAM 是易失性存储器（主存储器），而 ROM 有一些只读指令，当我们打开计算机时，这些指令会被加载/执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T20:16:11.650

除非您从 CD-ROM 或任何其他只读特殊设备启动实时系统，否则不涉及 ROM。

嗯...至少有点不参与。一开始，当您打开计算机时，您的 bios 会执行一些代码。该代码通常保存在 EEPROM 中。这是一种电可擦除可编程只读存储器。所以它是一个 ROM，但它可以被擦除和重新刷新（这发生在 bios 更新中）。

BIOS 会将操作系统的启动代码从另一个设备（通常是硬盘）加载到 RAM 中并执行。从那里通常不涉及ROM。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T20:25:14.107

**电脑开机时，不**加载操作系统；加载的是固件，无论是 x86 的 BIOS 还是现代主板的 (U)EFI；固件是从主板上的某种 ROM 加载的（假设 PC 类计算机）。然后，固件决定哪些设备（或分区，在 (U)EFI 的情况下）是可引导的，然后在物理 0x7c00（在 BIOS 的情况下）或引导加载程序希望的任何其他位置（在 (U)EFI 的情况下）加载它们; 到目前为止，我还没有为 (U)EFI 写过任何东西，所以我真的不知道它是如何工作的）。稍后，引导加载程序会做它想做的任何事情。

所以：在启动时，从 ROM 加载固件；然后它决定要做什么以及加载什么以及**从**加载什么，所以你的问题太笼统了，无法给你准确的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-14T09:28:04.707

电脑开机时，ROM加载BIOS系统，操作系统加载并放入RAM中，因为ROM是非易失性的，每次开机都需要操作系统在电脑上，ROM是理想的地方操作系统将一直保留到计算机系统打开为止。正如我所提到的，RAM 的非易失性不是保留操作系统的好地方，但是，RAM 运行并存储当前使用的应用程序和软件，因此必须在加载计算机系统时将操作系统放入 RAM . :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-14T09:33:20.730

一开始，当您打开计算机时，您的 bios 会执行一些代码。该代码通常保存在 EEPROM 中。这是一种电可擦除可编程只读存储器。所以它是一个ROM，但它可以被擦除和重新刷新。BIOS 会将操作系统的启动代码从另一个设备（通常是硬盘）加载到 RAM 中并执行。从那里通常不涉及ROM。

# java - Go to last row from result set in jdbc with sql server

> ID：10659083
> 
> 赞同：5
> 
> 时间：2012-05-18T20:10:27.533
> 
> 标签：java, sql-server-2005, jdbc, resultset

i try to select from my table, only select the last row. I've tried this :

```
rset = s.executeQuery("select noorder from orders");
rset.last();
String noorder = rset.getString("noorder");` 
```

rset is resultset, and s is statement. But it throw an exception : ResultSet may only be accessed in a forward direction`

I've tried this to :

```
if (rset != null) {                
   while(rset.next()){
       rset.last();
   }
} 
```

Am I doing wrong? Any idea? Thanks

Edit : This is the answer, as suggested by @Bhavik-Ambani (thanks for him). And this is my code :

```
 Statement s2 = con.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE,ResultSet.CONCUR_READ_ONLY);
        rset = s2.executeQuery("select noorder from orders");
        rset.afterLast();
        GETLASTINSERTED:
        while(rset.previous()){
            noorder = rset.getString("noorder");
            break GETLASTINSERTED;//to read only the last row
        } 
```

Hope it will be help another. Java rocks!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T20:15:40.917

A default ResultSet object is not updatable and has a cursor that moves forward only. Thus, you can iterate through it only once and only from the first row to the last row.

At code level you can do the following thing

```
Statement statement = connection.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE,ResultSet.CONCUR_READ_ONLY);
ResultSet resultSet = statement.executeQuery("select noorder from orders");
resultSet.afterLast();
while (resultSet.previous()) {
  String productCode = resultSet.getString("col_one");
  String productName = resultSet.getString("col_two");

}
connection.close(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-12T00:39:36.413

The `isLast()` should be what you're looking for.

```
ResultSet rs = stmt.executeQuery(query);

while(rs.next()) {
  if(rs.isLast()) {
      // is last row in ResultSet
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T22:47:06.257

Remember to apply an `order by` clause otherwise the last entry in your `ResultSet` may not be what you expect.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-18T19:51:13.723

You can use: `connection.prepareStatement(sql, ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_READ_ONLY);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T20:29:52.040

```
rset = s.executeQuery("SELECT * FROM table_name ORDER BY unique_column DESC LIMIT 1");

String noorder = rset.getString("noorder");` 
```

# c# - C# 受保护的字段访问

> ID：10659086
> 
> 赞同：9
> 
> 时间：2012-05-18T20:10:35.513
> 
> 标签：c#, private, encapsulation, protected

*[（这个问题是C# 访问派生类中受保护成员](https://stackoverflow.com/questions/10657545/c-sharp-accessing-protected-member-in-derived-class)的后续问题）*

我有以下代码片段：

```
public class Fox
{
    protected string FurColor;
    private string furType;

    public void PaintFox(Fox anotherFox)
    {
        anotherFox.FurColor = "Hey!";
        anotherFox.furType = "Hey!";
    }
}

public class RedFox : Fox
{
    public void IncorrectPaintFox(Fox anotherFox)
    {
        // This one is inaccessible here and results in a compilation error.
        anotherFox.FurColor = "Hey!";
    }

    public void CorrectPaintFox(RedFox anotherFox)
    {
        // This is perfectly valid.
        anotherFox.FurColor = "Hey!";
    }
} 
```

*   现在，我们知道[私有和受保护的字段是私有的，并且受类型保护，而不是实例保护。](https://stackoverflow.com/questions/6983553/why-are-private-fields-private-to-the-type-not-the-instance)

*   我们也知道访问修饰符应该在编译时起作用。

*   所以，问题来了——**为什么我不能访问类实例的`FurColor`字段？`Fox``RedFox`** `RedFox`派生自`Fox`，因此编译器知道它可以访问相应的受保护字段。

*   此外，正如您在 中看到的，我可以访问类实例`CorrectPaintFox`的受保护字段。**那么，为什么我不能对****类实例有同样的期望呢？**`RedFox`**`Fox`**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T20:19:14.067

原因很简单：

```
public void IncorrectPaintFox(Fox anotherFox)
{
    anotherFox = new BlueFox();

    // This one is inaccessible here and results in a compilation error.
    anotherFox.FurColor = "Hey!";
} 
```

现在您没有从 内部访问受保护的字段`BlueFox`，因此由于编译器不知道运行时类型是什么，它必须始终使其成为错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T20:57:35.137

为了稍微扩展已接受的答案，编译器强制执行此规则的*原因*，而不是 PHP 具有更宽松的含义`protected`，是因为允许您想要允许的访问将有可能破坏类的不变量，通过绕过其定义的保护级别。（当然，这总是可能的，例如通过反射，但编译器至少让它很难*偶然*做到）。

问题在于，仅仅知道某个对象是 a`Fox`并不能使您安全地与其内部工作交互，因为它在运行时可能*实际上不是*a `Fox`。考虑这些类：

```
public class Fox
{
  protected Color FurColor;
}

public class RedFox
{
  public RedFox () 
  { 
    this.FurColor = Color.Red; 
  }
}

public class ArcticFox
{
  public ArcticFox () 
  { 
    this.FurColor = Color.White; 
  }
} 
```

您要求的是编译器允许以下方法，假设它是在`RedFox`类上定义的：

```
public void PaintFoxRed ( Fox fox )
{
    fox.FurColor = Color.Red;
} 
```

但如果这是合法的，我可以这样做：

```
RedFox a = new RedFox();
Fox b = new ArcticFox();
a.PaintFoxRed(b); 
```

`ArcticFox`尽管班级本身只允许自己是白色的，但我现在是红色的。

# php - Symfony2：数据库模式和实体未使用更改的元数据进行更新

> ID：10659087
> 
> 赞同：4
> 
> 时间：2012-05-18T20:10:46.467
> 
> 标签：php, symfony, doctrine, doctrine-orm, yaml

我在 Symfony2 中更新架构时遇到问题。

我已经使用学说将数据库导入 Symfony2，并在 YML 中创建了所有 ORM 文件。

我已经从这个元数据创建了所有实体并且效果很好，但是如果我想使用 orm.yml 文件更改数据库架构，它不会更新我的数据库，甚至在我重新生成实体时也不会更新它们。

导入在 /src/{name}/{my}bundle/Resources/config/doctrine/metadata/orm/{table}.orm.yml 中创建了 orm.yml 文件

它的创建没有错误。

当我做：

```
php app/console doctrine:schema:update --dump-sql 
```

它显示：

```
ALTER TABLE accounttypes CHANGE description description VARCHAR(45) NOT NULL 
```

所以我：

```
php app/console doctrine:schema:update --force 
```

和：

```
Updating database schema...
Database schema updated successfully! "1" queries were executed 
```

我可以一遍又一遍地执行此操作，然后出现相同的查询并执行它，它告诉我它已完成，但它再次表明它需要再次完成。

然后，我访问了 orm.yml 文件并彻底更改了它们，但是除了执行此操作时始终存在的查询之外，没有任何新查询出现。

文件 AccountTypes.orm.yml

```
Accounttypes:
  type: entity
  table: accounttypes
  fields:
    description:
      id: true
      type: string
      length: 45
      fixed: false
      nullable: false
      generator:
        strategy: IDENTITY
  lifecycleCallbacks: {  } 
```

改成这样：

```
Accounttypes:
  type: entity
  table: accounttypes
  id:
    id:
      type: integer
      generator: { strategy: AUTO }
  fields:
    description:
      id: true
      type: string
      length: 50
  lifecycleCallbacks: {  } 
```

它仍然告诉我我需要：

```
ALTER TABLE accounttypes CHANGE description description VARCHAR(45) NOT NULL 
```

我也尝试过使用 DoctrineMigrationsBundle 并且显示需要完成相同的查询。我迁移；它说查询已完成，当我再次使用它时，会出现相同的查询。

有人知道这是怎么发生的吗？我坚持这一点，所以非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-08T02:44:15.493

根据上面的[@Tomasz](https://stackoverflow.com/users/223668/tomasz-struczy%C5%84ski)，确保您的 Symfony2 不会尝试使用注释来设置数据库而不是 yaml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-24T10:48:39.953

我有同样的问题。

原因是 - 尚未将新创建的捆绑包添加到`app\config.yml`.

因此，这个新 Bundle 中的所有实体从未被导出`php app/console doctrine:schema:update --dump-sql`

# matlab - How to express as Matrix operations?

> ID：10659090
> 
> 赞同：1
> 
> 时间：2012-05-18T20:10:59.110
> 
> 标签：matlab, math, matrix, octave

I have a matrix `A`:

```
1 3 1
7 5 2
4 3 7
8 2 1
3 9 6
4 5 2 
```

and a matrix `B`:

```
2 9 1
4 3 8
9 7 3
4 4 2
6 5 7
2 9 2 
```

I want to compute `C`:

```
1*2+3*9+1*1
7*4+5*3+2*8
4*9+3*7+7*3
8*4+2*4+1*2
3*6+9*5+6*7
4*2+5*9+2*2 
```

How can I express this purely using matrix operations? I realize I can do this using `.` versions but I am interested in pure matrix operations. For example, when I have two vectors `x` and `y`, I vastly prefer `x'*y` over `sum(x.*y)`. Hence I am interested in how to do the above also using matrix operations.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T20:13:05.553

You should use vector operations

```
C = sum( A .* B , 2 ); 
```

The `.*` operator multiplies matrices value-by-value, while `sum( <matrix> , 2 )` sums along the rows of a matrix inside the first parameter.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T20:21:55.347

If you do not want to use vector operators, you can get the same result by performing a matrix multiplication with the transpose of the **second** multiplicand (otherwise you'll get a 3x3 result, in this case), and then extracting the diagonal.

Like so: `C = diag(A * B')`

I'm not quite sure how Octave optimizes this, but it appears to only be *slightly* slower than the element-wise approach. (at least, for this data set)

```
function test(func, n, a, b)
    for i = 1:n
        func(a, b);
    endfor
endfunction

octave> tic; test(@(a, b) sum(a.*b, 2), 100000, A, B); toc
Elapsed time is 2.843 seconds.

octave> tic; test(@(a, b) diag(a*b'), 100000, A, B); toc
Elapsed time is 3.2 seconds. 
```

**CAUTION**: A real life problem shows this to be *far* slower than the element-wise approach:

```
octave:100> size(yy)
ans =

   5000     10

octave:101> size(expected)
ans =

   5000     10

octave:102> tic; diag(yy * expected'); toc;
Elapsed time is 0.5447 seconds.
octave:103> tic; sum(yy .* expected, 2); toc;
Elapsed time is 0.0016899 seconds. 
```

# javascript - jQuery 从下拉列表中获取选定的选项

> ID：10659097
> 
> 赞同：1276
> 
> 时间：2012-05-18T20:11:54.593
> 
> 标签：javascript, html, jquery, drop-down-menu

通常我使用`$("#id").val()`返回所选选项的值，但这次它不起作用。所选标签具有 id`aioConceptName`

**html代码**

```
<label>Name</label>
<input type="text" name="name" />
<select id="aioConceptName">
    <option>choose io</option>
    <option>roma</option>
    <option>totti</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2087
> 
> 时间：2012-05-18T20:14:40.857

对于下拉选项，您可能需要这样的内容：

```
var conceptName = $('#aioConceptName').find(":selected").text(); 
```

之所以`val()`没有成功，是因为单击选项不会更改下拉列表的值——它只是将属性添加到作为下拉列表*子*`:selected`项的选定选项中。

 ** * *

## 回答 #2

> 赞同：391
> 
> 时间：2013-10-26T16:50:41.793

**设置每个选项的值**

```
<select id="aioConceptName">
    <option value="0">choose io</option>
    <option value="1">roma</option>
    <option value="2">totti</option>
</select> 
```

`$('#aioConceptName').val()`没有工作，因为`.val()`返回`value`属性。为了让它正常工作，`value`必须在每个`<option>`.

现在你可以打电话而不是其他人建议`$('#aioConceptName').val()`的所有这些巫术。`:selected`

* * *

## 回答 #3

> 赞同：197
> 
> 时间：2012-11-01T17:16:20.640

我偶然发现了这个问题，并开发了 Elliot BOnneville 答案的更简洁版本：

```
var conceptName = $('#aioConceptName :selected').text(); 
```

或一般来说：

```
$('#id :pseudoclass') 
```

这为您节省了额外的 jQuery 调用，一次选择所有内容，并且更清晰（我的观点）。

* * *

## 回答 #4

> 赞同：72
> 
> 时间：2013-02-27T08:54:52.123

试试这个价值...

```
$("select#id_of_select_element option").filter(":selected").val(); 
```

或者这个作为文本......

```
$("select#id_of_select_element option").filter(":selected").text(); 
```

* * *

## 回答 #5

> 赞同：60
> 
> 时间：2013-07-09T15:30:46.407

如果您在事件上下文中，在 jQuery 中，您可以使用 : 检索选定的选项元素，
`$(this).find('option:selected')`如下所示：

```
$('dropdown_selector').change(function() {
    //Use $option (with the "$") to see that the variable is a jQuery object
    var $option = $(this).find('option:selected');
    //Added with the EDIT
    var value = $option.val();//to get content of "value" attrib
    var text = $option.text();//to get <option>Text</option> content
}); 
```

**编辑**

正如[PossessWithin](https://stackoverflow.com/users/4781067/possesswithin)所提到的，我的回答只是回答这个问题：如何选择选定的“选项”。

接下来，要获取选项值，请使用`option.val()`.

* * *

## 回答 #6

> 赞同：39
> 
> 时间：2013-05-08T18:18:32.537

您是否考虑过使用普通的旧 javascript？

```
var box = document.getElementById('aioConceptName');

conceptName = box.options[box.selectedIndex].text; 
```

另请参阅[使用 JavaScript 获取选项文本/值](https://stackoverflow.com/questions/4641962/getting-an-option-text-value-with-javascript)

* * *

## 回答 #7

> 赞同：30
> 
> 时间：2013-11-26T23:25:58.120

```
$('#aioConceptName option:selected').val(); 
```

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2017-06-01T15:38:27.333

**读取选择的值（不是文本）：**

```
var status = $("#Status").val();
var status = $("#Status")[0].value;
var status = $('#Status option:selected').val(); 
```

**如何禁用选择？** 在这两种变体中，可以使用以下方法更改值：

**一种**

用户无法与下拉列表交互。而且他不知道可能存在哪些其他选择。

```
$('#Status').prop('disabled', true); 
```

**乙**

用户可以在下拉列表中看到选项，但所有选项都被禁用：

```
$('#Status option').attr('disabled', true); 
```

在这种情况下，`$("#Status").val()` **仅适用**于小于`1.9.0`. 所有其他变体都可以使用。

**如何更新禁用的选择？**

从后面的代码中，您仍然可以更新选择中的值。它仅对用户禁用：

```
$("#Status").val(2); 
```

在某些情况下，您可能需要触发事件：

```
$("#Status").val(2).change(); 
```

* * *

## 回答 #9

> 赞同：15
> 
> 时间：2018-10-02T14:06:18.950

你应该使用这个语法：

```
var value = $('#Id :selected').val(); 
```

所以试试这个代码：

```
var values = $('#aioConceptName :selected').val(); 
```

您可以在 Fiddle 中进行测试：http: [//jsfiddle.net/PJT6r/9/](http://jsfiddle.net/PJT6r/9/)

[在这篇文章](https://stackoverflow.com/questions/9771728/jquery-val-is-returning-undefined-on-change-of-a-select-box)中看到这个答案

* * *

## 回答 #10

> 赞同：15
> 
> 时间：2019-03-10T10:09:55.627

对于良好的做法，您需要使用`val()`来获取所选选项的价值 not `text()`。

```
<label>Name</label>
<input type="text" name="name" />
<select id="aioConceptName">
    <option value="choose">choose io</option>
</select> 
```

您可以使用

```
 $("#aioConceptName").find(':selected').val(); 
```

或者

```
 $("#aioConceptName :selected").val(); 
```

* * *

## 回答 #11

> 赞同：14
> 
> 时间：2013-04-25T01:07:45.130

要使用 jQuery 找到正确的选择，请考虑在 html 树中可以使用多个选择并混淆您的预期输出。

`(:selected).val()`或在多个选择选项上`(:selected).text()`无法**正常工作。**因此，我们首先保留所有选择的数组，`.map()`然后返回所需的参数或文本。

以下示例说明了这些问题并提供了更好的方法

```
<select id="form-s" multiple="multiple">
    <option selected>city1</option>
    <option selected value="c2">city2</option>
    <option value="c3">city3</option>
</select>   
<select id="aioConceptName">
    <option value="s1" selected >choose io</option>
    <option value="s2">roma </option>
    <option value="s3">totti</option>
</select>
<select id="test">
    <option value="s4">paloma</option>
    <option value="s5" selected >foo</option>
    <option value="s6">bar</option>
</select>
<script>
$('select').change(function() {
    var a=$(':selected').text(); // "city1city2choose iofoo"
    var b=$(':selected').val();  // "city1" - selects just first query !
    //but..
    var c=$(':selected').map(function(){ // ["city1","city2","choose io","foo"]
        return $(this).text();
    }); 
    var d=$(':selected').map(function(){ // ["city1","c2","s1","s5"]
        return $(this).val();
    });
    console.log(a,b,c,d);
});
</script> 
```

**与正确工作的c & d**相比，在变体**a、b**中查看不同的容易出错的输出，将所有选择保存在一个数组中，然后返回您要查找的内容。

 *** * *

## 回答 #12

> 赞同：11
> 
> 时间：2014-07-22T10:15:27.580

使用 jQuery，只需添加一个`change`事件并在该处理程序中获取选定的值或文本。

如果您需要选定的文本，请使用此代码：

```
$("#aioConceptName").change(function () {
    alert($("#aioConceptName :selected").text())
}); 
```

或者，如果您需要选择值，请使用以下代码：

```
$("#aioConceptName").change(function () {
    alert($("#aioConceptName :selected").attr('value'))
}); 
```

* * *

## 回答 #13

> 赞同：11
> 
> 时间：2021-02-01T09:58:56.527

使用**jQuery**：

1.  如果要获取选中的选项**文本**，可以使用`$(select element).text()`.

    `var text = $('#aioConceptName option:selected').text();`

2.  如果要获取选定的选项**值**，可以使用`$(select element).val()`.

    `var val = $('#aioConceptName option:selected').val();`

    确保在标签中设置`value`属性，例如：`<option>`

    ```
    <select id="aioConceptName">
      <option value="">choose io</option>
      <option value="roma(value)">roma(text)</option>
      <option value="totti(value)">totti(text)</option>
    </select> 
    ```

使用此 HTML 代码示例，假设**选择了最后一个选项**：

1.  ***var text***会给你`totti(text)`
2.  ***var val***会给你`totti(value)`

```
$(document).on('change','#aioConceptName' ,function(){
  var val = $('#aioConceptName option:selected').val();
  var text = $('#aioConceptName option:selected').text();
  $('.result').text("Select Value = " + val);
  $('.result').append("<br>Select Text = " + text);
})
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<select id="aioConceptName">
 <option value="io(value)">choose io</option>
 <option value="roma(value)">roma(text)</option>
 <option value="totti(value)">totti(text)</option>
</select>

<p class="result"></p>
```

* * *

## 回答 #14

> 赞同：10
> 
> 时间：2015-02-08T14:50:07.383

也使用[`jQuery.val()`](http://api.jquery.com/val/)选择元素的功能：

> .val() 方法主要用于获取输入、选择和文本区域等表单元素的值。在 select 元素的情况下，`null`当没有选择选项时返回，当至少有一个选项时返回一个包含每个选定选项的值的数组，并且可以选择更多，因为`multiple`存在属性。

```
$(function() {
  $("#aioConceptName").on("change", function() {
    $("#debug").text($("#aioConceptName").val());
  }).trigger("change");
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<select id="aioConceptName">
  <option>choose io</option>
  <option>roma</option>
  <option>totti</option>
</select>
<div id="debug"></div>
```

* * *

## 回答 #15

> 赞同：10
> 
> 时间：2019-04-30T03:31:56.010

要获取所选标签的*值*：

```
 $('#id_Of_Parent_Selected_Tag').find(":selected").val(); 
```

如果您想获取*文本*，请使用以下代码：

```
 $('#id_Of_Parent_Selected_Tag').find(":selected").text(); 
```

**例如：**

```
<div id="i_am_parent_of_select_tag">
<select>
        <option value="1">CR7</option>
        <option value="2">MESSI</option>
</select>
</div>

<script>
 $('#i_am_parent_of_select_tag').find(":selected").val();//OUTPUT:1 OR 2
 $('#i_am_parent_of_select_tag').find(":selected").text();//OUTPUT:CR7 OR MESSI
</script> 
```

* * *

## 回答 #16

> 赞同：9
> 
> 时间：2014-01-29T12:37:54.777

对于任何发现最佳答案的人都不起作用。

尝试使用：

```
 $( "#aioConceptName option:selected" ).attr("value"); 
```

在最近的项目中为我工作，所以值得一看。

* * *

## 回答 #17

> 赞同：9
> 
> 时间：2014-11-17T13:44:39.310

只是这应该工作：

```
var conceptName = $('#aioConceptName').val(); 
```

* * *

## 回答 #18

> 赞同：9
> 
> 时间：2018-11-21T09:02:53.090

直截了当而且很简单：

*您的下拉菜单*

```
<select id="aioConceptName">
    <option>choose io</option>
    <option>roma</option>
    <option>totti</option>
</select> 
```

*jquery代码获取选定的值*

```
$('#aioConceptName').change(function() {
    var $option = $(this).find('option:selected');

    //Added with the EDIT
    var value = $option.val(); //returns the value of the selected option.
    var text = $option.text(); //returns the text of the selected option.
}); 
```

* * *

## 回答 #19

> 赞同：5
> 
> 时间：2017-07-30T14:31:40.417

我希望这也有助于更好地理解并帮助在下面尝试这个，

```
$('select[id="aioConceptName[]"] option:selected').each(function(key,value){
   options2[$(this).val()] = $(this).text();
   console.log(JSON.stringify(options2));
}); 
```

有关更多详细信息，请 [http://www.drtuts.com/get-value-multi-select-dropdown-without-value-attribute-using-jquery/](http://www.drtuts.com/get-value-multi-select-dropdown-without-value-attribute-using-jquery/)

* * *

## 回答 #20

> 赞同：5
> 
> 时间：2018-07-27T11:45:49.560

您可以尝试以这种方式调试它：

```
console.log($('#aioConceptName option:selected').val()) 
```

* * *

## 回答 #21

> 赞同：4
> 
> 时间：2016-10-27T00:17:47.453

如果你想获取 'value' 属性而不是文本节点，这对你有用：

```
var conceptName = $('#aioConceptName').find(":selected").attr('value'); 
```

* * *

## 回答 #22

> 赞同：4
> 
> 时间：2020-01-04T16:40:40.107

这是此问题的简单解决方案。

```
$("select#aioConceptName").change(function () {
           var selectedaioConceptName = $('#aioConceptName').find(":selected").val();;
           console.log(selectedaioConceptName);
        }); 
```

* * *

## 回答 #23

> 赞同：3
> 
> 时间：2017-11-15T00:45:45.717

试试这个

```
$(document).ready(function() {

    $("#name option").filter(function() {
        return $(this).val() == $("#firstname").val();
    }).attr('selected', true);

    $("#name").live("change", function() {

        $("#firstname").val($(this).find("option:selected").attr("value"));
    });
});

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js"></script>
<select id="name" name="name"> 
<option value="">Please select...</option> 
<option value="Elvis">Elvis</option> 
<option value="Frank">Frank</option> 
<option value="Jim">Jim</option> 
</select>

<input type="text" id="firstname" name="firstname" value="Elvis" readonly="readonly"> 
```

* * *

## 回答 #24

> 赞同：3
> 
> 时间：2019-06-10T10:13:29.737

```
$('nameofDropDownList').prop('selectedIndex', whateverNumberasInt); 
```

将 DDL 想象成一个带有索引的数组，您正在选择一个索引。选择你想用你的 JS 设置的那个。

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2018-01-21T22:50:13.137

您可以使用`$("#drpList").val();`

* * *

## 回答 #26

> 赞同：2
> 
> 时间：2018-09-26T11:17:02.987

要获取具有相同类 = 名称的选择，您可以这样做，以检查是否选择了选择选项。

```
var bOK = true;
$('.optKategorien').each(function(index,el){
    if($(el).find(":selected").text() == "") {
        bOK = false;
    }
}); 
```

* * *

## 回答 #27

> 赞同：2
> 
> 时间：2019-01-28T07:29:22.827

我遇到了同样的问题，我弄清楚为什么它不适用于我的案例
html 页面分为不同的 html 片段，我发现我有另一个带有相同 Id 的输入字段`select`，这导致`val()`始终为空
我希望这可以为任何有类似问题的人节省一天的时间。

* * *

## 回答 #28

> 赞同：2
> 
> 时间：2020-06-21T17:43:06.863

尝试

```
aioConceptName.selectedOptions[0].value 
```

```
let val = aioConceptName.selectedOptions[0].value

console.log('selected value:',val);
```

```
<label>Name</label>
<input type="text" name="name" />
<select id="aioConceptName">
    <option>choose io</option>
    <option>roma</option>
    <option>totti</option>
</select>
```

* * *

## 回答 #29

> 赞同：2
> 
> 时间：2021-05-17T04:54:02.013

只有一种正确的方法可以找到选定的选项 - 按`option` `value`属性。所以采取简单的代码：

```
//find selected option
$select = $("#mySelect");
$selectedOption = $select.find( "option[value=" + $select.val() + "]" );
//get selected option text
console.log( $selectedOption.text() ); 
```

因此，如果您有这样的列表：

```
<select id="#mySelect" >
  <option value="value1" >First option</option>
  <option value="value2" >Second option</option>
  <option value="value3" selected >Third option</option>
</select> 
```

如果您使用`selected`属性 for `option`，那么`find(":selected")`将给出不正确的结果，因为`selected`属性将`option`永远保持不变，即使用户选择了另一个选项。

即使用户选择第一个或第二个选项，$("select option:selected") 的结果也会给出**两个元素**！所以 $("select :selected").text() 会给出类似“*第一个选项第三个选项*”的结果

所以使用`value`属性选择器，不要忘记`value`为所有选项设置属性！

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2018-04-03T08:03:28.927

对于这种情况，您最好的选择可能是使用[jQuery 的 change 方法](https://api.jquery.com/change/)来查找当前选择的值，如下所示：

```
$('#aioConceptName').change(function(){

   //get the selected val using jQuery's 'this' method and assign to a var
   var selectedVal = $(this).val();

   //perform the rest of your operations using aforementioned var

}); 
```

我更喜欢这种方法，因为您可以在给定的选择字段中为每个选定的选项执行功能。

希望有帮助！

* * *

## 回答 #31

> 赞同：1
> 
> 时间：2018-05-08T12:40:17.140

通常，您不仅需要获取选定的值，还需要运行一些操作。那么为什么不避免所有的 jQuery 魔法，而只是将选定的值作为参数传递给操作调用呢？

```
<select onchange="your_action(this.value)">
   <option value='*'>All</option>
   <option ... />
</select> 
```

* * *

## 回答 #32

> 赞同：1
> 
> 时间：2018-07-11T05:55:14.300

您可以使用精确选择的选项进行选择：下面将给出 innerText

```
$("select#aioConceptName > option:selected").text() 
```

虽然下面会给你价值。

```
$("select#aioConceptName > option:selected").val() 
```

* * *

## 回答 #33

> 赞同：1
> 
> 时间：2020-09-07T06:35:47.540

试试这个代码::)

获取价值：

```
 $("#Ostans option:selected").val() + '.' + $("#shahrha option:selected").val() 
```

获取文本：

```
 $("#Ostans option:selected").text() + '.' + $("#shahrha option:selected").text() 
```***

# asp.net - 请帮助我了解 web.config 自定义设置的类型属性？

> ID：10659100
> 
> 赞同：11
> 
> 时间：2012-05-18T20:11:58.823
> 
> 标签：asp.net, web-config

我正在尝试在我的 web.config 文件中定义自定义设置，我很确定我的大部分设置都是正确的，这一切都很有意义，除了我不明白我应该使用什么的关键部分。我用来创建我的 SectionHandler 的教程没有解释它，MSDN 也没有真正帮助我完全理解它。

这来自我使用的教程：

```
<section name="BlogSettings" type="Fully.Qualified.TypeName.BlogSettings,   
  AssemblyName" /> 
```

[链接到教程](http://haacked.com/archive/2007/03/11/custom-configuration-sections-in-3-easy-steps.aspx)

这是来自 MSDN：

```
 type="System.Configuration.SingleTagSectionHandler" 
```

是的，我对 ASP.NET 很陌生，我正在努力学习。我会很高兴有任何好的参考资料来解释这里发生了什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T20:18:30.090

### 描述

web.config 中 Section 的 type 属性是您已实现的相应`ConfigurationSection`类的“路径”。ConfigurationSection 类是定义节和可能的配置内容的类。`ConfigurationSection`是所有配置部分的基类。

这一般属于.NET，而不仅仅是web.config。

查看[揭开 .NET 2.0 配置的奥秘](http://www.codeproject.com/Articles/16466/Unraveling-the-Mysteries-of-NET-2-0-Configuration)

### 更多信息

*   [MSDN - 配置节类](http://msdn.microsoft.com/en-us/library/system.configuration.configurationsection.aspx)
*   [揭开 .NET 2.0 配置的奥秘](http://www.codeproject.com/Articles/16466/Unraveling-the-Mysteries-of-NET-2-0-Configuration)

# extjs4 - 在后端弄清楚如何添加新对象时，是否有一种简单的方法可以将 extjs 存储中的一个字段覆盖为硬编码值？

> ID：10659102
> 
> 赞同：0
> 
> 时间：2012-05-18T20:12:12.320
> 
> 标签：extjs4, extjs-mvc, extjs4.1

我正在寻找其他 extjs 开发人员在连接来自后端的 json 响应并开始工作之前如何在 UI 组件上工作。

随意具体说明我如何在实时数据和硬编码对应物之间来回切换的代码示例。

是否有一种方法可以对每个组件都可以使用的数据存储进行硬编码，或者每个组件都需要变体？

我将如何使用远程数据存储并仅用硬编码数据交换一个字段值？

很抱歉有多个问题，我想我真正想要的是关于其他 extjs 开发人员发现能够在不依赖服务器获取数据的情况下工作和测试自定义视图的建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T20:27:07.903

对于您描述的场景，我创建了一个带有硬编码数据的存储，并将一个组件（在我的例子中是图表和网格）绑定到存储。现在，当我从服务器获取实时数据时，我所做的就是更新我的商店，这反过来又更新了图表。

我不确定这是否是您正在寻找的答案？如果这会给这个答案增加价值，我当然可以给你一些代码示例。让我知道。

# c++ - c++链表到skiplist的转换

> ID：10659104
> 
> 赞同：0
> 
> 时间：2012-05-18T20:12:31.320
> 
> 标签：c++, linked-list, skip-lists

我想将（简单链接）列表转换为从链接列表派生的跳过列表。在将（链接）列表作为参数的转换 ctor 内部，我在 *. 我只是从 main 调用那个 ctor 一次。新的 SkipList 怎么可能被循环调用？

```
class SkipList : public List {
public:     
    SkipList(SkipListEl* first) : List (first){};

    SkipList(const List& sl){                           
        ListEl* fst = sl.getFirst();
        new SkipList(fst);         // * <- stackoverflow

        while(fst->hasNext()){
            new SkipListEl(*fst);
            fst = fst->getNext();
        }
    }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T20:17:41.027

您需要查看有关动态对象创建的基本 C++ 规则。`new`调用您正在创建的对象的构造函数。通过调用`new object`构造函数 for `object`，您将获得一个无限循环（实际上是无限递归），导致没有更多的堆栈空间。

# xml - How to retrieve topic title while in flow

> ID：10659105
> 
> 赞同：1
> 
> 时间：2012-05-18T20:12:34.487
> 
> 标签：xml, xslt, xsl-fo

I am using XMetal's default stylesheet to generate PDF. My source xml file has a "title" tag that I want to keep track of, previously ,I used the following code:

```
<fo:inline>
    <fo:retrieve-marker retrieve-class-name="current-header"/>
</fo:inline> 
```

However, this will never work since Markers can only be retrieved in static content in FO, not in the main fo:flow. So my question is, if I am in the main fo:flow, how could I retrieve the title of the xml file?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T12:25:26.830

Say your data looks like this:

```
<title name="Section 1">
    <tag1>
        <tag2>
        </tag2>
    </tag1>
</title> 
```

and your template is currently in `tag2`.

Then you just use select by `ancestor` axis:

```
<xsl:value-of select="ancestor::title/@name"/> 
```

If your `title`s are nested, just use `ancestor::title[1]/@name`

# windows-phone-7 - 互联网失去连接网络浏览器

> ID：10659106
> 
> 赞同：0
> 
> 时间：2012-05-18T20:12:47.503
> 
> 标签：windows-phone-7

我在应用程序中有网络浏览器。当 Internet 连接丢失时，我需要对 webbrowser 执行某些操作，例如显示 MessageBox 并且当 Internet 再次可用时重新连接到网站。我发现我可以使用 DeviceNetworkInformation.NetworkAvailabilityChanged 事件，但是当我测试时，事件没有触发。我尝试在导航时使用 DeviceNetworkInformation.IsNetworkAvailable，但这没有我想要的功能。我在诺基亚 Lumia 710 中进行了测试。

这是我的简单代码，我从 msdn [http://msdn.microsoft.com/en-us/library/microsoft.phone.net.networkinformation.devicenetworkinformation.networkavailabilitychanged%28v=vs.92%29.aspx的示例中制作了他](http://msdn.microsoft.com/en-us/library/microsoft.phone.net.networkinformation.devicenetworkinformation.networkavailabilitychanged%28v=vs.92%29.aspx)

DeviceNetworkInformation.NetworkAvailabilityChanged += new EventHandler(NetworkAvailabilityChanged);

```
 void NetworkAvailabilityChanged(object sender, NetworkNotificationEventArgs e)
    {            
       string info = string.Empty;
       bool connection = false;
       bool disco = false;

        switch (e.NotificationType)
        {                    
            case NetworkNotificationType.InterfaceConnected:                    
                    connection = true;                        
                    break;

            case NetworkNotificationType.InterfaceDisconnected:                    
                    info = "Lost Internet";      
                    disco=true;                                      
                    break;

            case NetworkNotificationType.CharacteristicUpdate:                   
                   break;                                 
            default:                   
                   break;

        }
        Dispatcher.BeginInvoke(() =>
        {
           if(disco)
            MessageBox.Show(info);

            if(connection)              
             webbrowser1.Navigate(site);                                         
        });
    } 
```

我有疑问，我在电话中检查这些方法 IsCellularDataEnabled、IsNetworkAvailable、IsWiFiEnabled 是否返回 true。我在某处读到事件 NetworkAvailabilityChanged 仅在仅启用一种类型的网络时才起作用。这是真的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T20:18:04.913

请查看此页面，它可能会对您有所帮助[http://msdn.microsoft.com/en-us/library/microsoft.phone.net.networkinformation.devicenetworkinformation.networkavailabilitychanged(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/microsoft.phone.net.networkinformation.devicenetworkinformation.networkavailabilitychanged(v=vs.92).aspx)您可以获取以下信息正如它所说，与 NetworkNotificationEventArgs 参数断开连接......

# sql - 无法从开发机器外部的 wpf 连接到数据库

> ID：10659112
> 
> 赞同：2
> 
> 时间：2012-05-18T20:13:49.260
> 
> 标签：sql, wpf, sql-server

我目前正在创建一个数据驱动的 wpf 应用程序，并且在我的开发计算机（我用来创建程序的计算机）上，一切都非常完美。此外，当我将应用程序从 Release 目录移动并复制到我的本地计算机时，它可以完美运行。但另一方面，当我的应用程序到达其他用户时，它会完全停止连接到数据库。

我不明白这是怎么回事，因为我的连接字符串设置正确，即：

```
<connectionStrings>
  <add name="MyConnectionStrint"
     connectionString="Data Source=MyServerIP\SQLEXPRESS;Initial Catalog=MyDB;Integrated Security=SSPI;"
    providerName="System.Data.SqlClient" />
</connectionStrings> 
```

这是位于根目录中的 XML 配置文件。一旦将程序提供给其他人，它就会完全停止运行；没有数据被接收或发送。

这可能是因为他们需要 MS SQL Server 或其他东西才能连接到我的远程数据库吗？我什至尝试使用 SQL Server Management Studio 连接到数据库，但它无法在其他 PCS 上运行，但由于某种原因，它适用于我的，而没有其他人的。这是一个问题，因为该程序旨在分发给至少 15 人。关于造成这种情况的任何想法？

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-27T04:55:22.200

数据库服务器在您的开发机器上吗？如果是这样，那么您必须在 SQL Server 配置管理器中启用 tcp/ip 配置。如果未启用，那么您的服务器将无法在它所在的机器之外访问。

# grails - 两个类之间的一对多和多对多关系？(Grails ORM)

> ID：10659114
> 
> 赞同：2
> 
> 时间：2012-05-18T20:14:23.343
> 
> 标签：grails, orm, grails-orm

我在处理两个实体时遇到问题，这两个实体应该具有一对多和多对多的关系。让我向您展示一个案例：有用户，他们创建并参与活动。所以一个活动可以有多个用户和一个活动创建者，同时一个用户可以创建并属于许多活动。

所以我做了这样的事情：

```
class User {

    static hasMany = [activities:Activity, activitiesCreated: Activity]
    static mappedBy = [activitiesCreated: "creator"]
...
}

class Activity{

    static hasMany = [users:User]
    static belongsTo = [users:User]
    Usuario creator
...
} 
```

这引发了一个运行时异常，即：在多对多关系中的域类 [class User] 和 [class Activity] 之间没有定义所有者。示例：静态 belongsTo = 活动

如果我不尝试实现一对多，多对多关系就可以正常工作，所以这不是问题。

这就是我卡住的地方：/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T21:14:26.710

我将有第三个实体来实现多对多关系。例如，假设将活动的实际执行表示为一个事件，这意味着一个事件有一个或多个活动、时间戳/时间框架和一个或多个参与用户。用户可以创建一个或多个活动，并且出于同样的原因，活动的所有者将被视为拥有该事件。

# php - ftp_get 内存泄漏

> ID：10659115
> 
> 赞同：1
> 
> 时间：2012-05-18T20:14:32.067
> 
> 标签：php, ftp

目前我有一个脚本可以做这种事情：

```
//Connect to the FTP server    
$conn_id = connect_to_server($server, $user, $password);

//Switch to the directory with the files
ftp_chdir($conn_id, $directory);

//Get the contents of the current directory then iterate over them
$contents = ftp_nlist($conn_id, ".");

//loop through files and download them
foreach($contents as $file) {
  ftp_get($conn_id, $local_filename, $file, FTP_BINARY);
} 
```

问题是`ftp_get`气球失控，内存不足。我找到的唯一解决方案是在每次连接之前关闭`ftp_get`连接。

有没有办法在`ftp_get`不关闭连接的情况下释放内存？

# javascript - 如果事件附加到不存在的元素，是否可以触发事件

> ID：10659122
> 
> 赞同：0
> 
> 时间：2012-05-18T20:15:21.083
> 
> 标签：javascript, security, events

所以，这个问题有两个重要的细节：

1.  它在文档就绪的回调函数的范围内
2.  **事件附加到**的元素****实际上并不存在于 DOM 中****

 **这是场景的可视化表示

```
$(document).ready(function() {
    $('#myNonExistentElement').on('click', function() {
        //do something
    });
}); 
```

**在这种情况下，是否可以通过编程方式触发该点击事件（通过控制台或其他方式）？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T20:32:48.003

我认为简单的答案是否定的。

但是，有两种情况可能适合您的问题：

1）如果您只想执行事件处理程序代码，请使用命名函数（而不是匿名函数）并在需要时调用它。

2) 如果您想将点击处理程序绑定到 DOM 中尚不存在但您知道将来会存在的对象，您可以使用如下代码：

```
$(document).ready(function() {
  $('body').on('click', '#myNonExistentElement', function() {
    //do something
  });
}); 
```

[请参阅http://api.jquery.com/on/](http://api.jquery.com/on/)上有关委托事件的部分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T20:31:28.993

如果您尝试通过 jQuery（或至少，`.on`）将事件绑定到不存在的元素，则不会绑定新事件。

示例案例[在这里](http://jsfiddle.net/N54KW/2/)。

[*事件代码从这里](https://stackoverflow.com/questions/743876/list-all-javascript-events-wired-up-on-a-page-using-jquery)被盗，因为我很懒。**

# cas - Python 请求和 CAS

> ID：10659124
> 
> 赞同：3
> 
> 时间：2012-05-18T20:15:24.670
> 
> 标签：cas, python-requests, urllib3

我还没有找到任何人使用 Python 来通过 CAS 的例子。希望肯尼斯·赖茨（Kenneth Reitz）可以向我展示“请求”如何使这变得容易...

基本上，我无法通过 CAS 登录...从不验证我的 Python 尝试。（注意，我定义了两个 url....url1 是主网页，url2 是指向 CAS 站点的重定向链接...我已经知道重定向链接，所以很容易）。

我的理解是我所要做的就是捕获 CAS 作为 cookie 发送给我的 JsessionId，然后获取该 cookie 并将 jsessionid 附加到 url 并使用我的用户名/密码将其作为 POST 发送回 CAS ）。但是，此脚本每次都失败。

一些 CAS 专家可以帮助我吗？我根本无法弄清楚为什么它不会对我进行身份验证。

```
import sys
import requests

my_config = {'verbose': sys.stderr }

url1 = 'http://agnes:8080'
url2 = 'https://agnes:8543/irisCAS/login?service=http%3A%2F%2Fagnes%3A8080%2FirisRootWeb%2Fj_spring_cas_security_check'

response = requests.get(url1, headers=headers, verify=False)
print response.cookies

cookies = response.cookies
response = requests.post(url2, headers=headers, verify=False, config=my_config, params=cookies, auth=('username', 'password'))

print response.status_code
print response.content 
```

输出 .... 注意 jsessionId 是如何附加到 url2 的，所以这很好.....我认为。

```
{'JSESSIONID': 'EEE38382A1D5AAACA58E12433BDA0BFF'}

2012-05-18T15:04:17.668601   POST   https://agnes:8543/irisCAS/login?service=http%3A%2F%2Fagnes%3A8080%2FirisRootWeb%2Fj_spring_cas_security_check&JSESSIONID=EEE38382A1D5AAACA58E12433BDA0BFF

200

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
...
...
        </script>

        <form id="fm1" class="fm-v clearfix" action="/irisCAS/login;jsessionid=30ABCAC79FEA5B48399053939530A608?service=http%3A%2F%2Fagnes%3A8080%2FirisRootWeb%2Fj_spring_cas_security_check&amp;JSESSIONID=B6235434D64C5E2E6C063BA3E1C1AC43" method="post">

            <div class="box fl-panel" id="login">
            <!-- Congratulations on bringing CAS online!  The default authentication handler authenticates where usernames equal passwords: go ahead, try it out.  -->
                <h2>Enter your UserId and Password</h2>

(this is just the xml of the CAS login page that I can't get past)

...
... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T05:32:21.157

好的，我想通了，所以我将为以后可能会发现此问题的人回答此问题。问题是我不了解“表单数据”的基本概念。换句话说，网页需要在“表单”中输入用户名和密码，并且需要通过POST点击虚拟的“提交”按钮，因为它是一个“事件”（即下面的_eventId）。所以我不得不使用'data'参数并将所有这些构建为字典。这就是我所做的：

```
payload = {'_eventId': 'submit', 'lt': 'e1s1', 'submit': 'LOGIN', 'username': 'admin', 'password': 'admin'}
sessionResp = sessionReq.post(url2, data=payload, params=cookies, verify=False, config=my_config, headers=headers) 
```

# python - Neo4j：基于节点属性和位置选择单个节点的查询方法是什么？

> ID：10659125
> 
> 赞同：3
> 
> 时间：2012-05-18T20:15:25.693
> 
> 标签：python, neo4j, cypher, gremlin

我无法评估何时使用哪种 Neo4j 查询机制（Gremlin、Cypher、遍历、内置算法）。例如，我想在整个图中选择单个节点

*   边数最多的；
*   在距 4 个起始节点之一的特定路径长度内；
*   具有一定价值的财产。

我正在使用 Python [neo4jrestclient](https://github.com/versae/neo4j-rest-client)，并且可以单独执行基本的 Gremlin/Cypher 脚本和遍历某些需求（例如，使用 Gremlin 计算 In/OutDegree），但我缺少关于如何组合它们的大局观。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T10:03:30.807

在 Cypher 中，它看起来像这样：

```
start n=node:index(indicator="startnode-value")
match n-[:REL*..10]->target
where target.prop = "value"
return target 
```

# c# - 如何获取不在列表中的内容

> ID：10659129
> 
> 赞同：2
> 
> 时间：2012-05-18T20:15:33.767
> 
> 标签：c#, linq

如果我有两个通用列表。如何使用 LINQ 找到不在其他列表中的内容？

这是我的 obj 类：

```
 public class tobj
 {      
    public string column1;
    public string column2;
 } 
```

这是数组

```
 tobj[] array1 = 
 { 
        new tobj { "1", "1" }, new tobj { "2", "2" }, new tobj { "3", "3" } 
 };

 tobj[] array2 = 
 { 
     new tobj { "2", "2" }, new tobj { "3", "3" }, new tobj { "4", "4" } 
 };

 var diff = array1.FinfDiff(array2); 

 foreach (var value in diff)
 {
    Console.WriteLine(value.column1); // 1
 } 
```

此代码尚未测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T20:25:45.807

您可以使用`Except`. 但是，鉴于您有一个自定义类型，您需要覆盖它以便它与 Linq 一起工作 `Equals()`。`GetHashCode()`

这是因为 Linq 追求效率，所以它可以使用`HashSet<T>`和其他机制来快速确定项目是否可能等效（等效的项目*必须*具有相同的哈希码，否则您的哈希码是错误的）。所以仅仅实现是不够的，在自定义类中使用这种类型的方法时还`Equals()`必须实现。`GetHashCode()`

例如：

```
 public class tobj : IEquatable<tobj>
    {
        public string column1;
        public string column2;

        public bool Equals(tobj other)
        {
            return other != null ? Equals(column1, other.column1) && Equals(column2, other.column2) : false;
        }

        public override bool Equals(object obj)
        {
            return Equals(obj as tobj);
        }

        public override int GetHashCode()
        {
            // seed the code
            int hash = 13;

            // use some primes to mix in the field hash codes...
            hash = hash * 17 + column1.GetHashCode();
            hash = hash * 17 + column2.GetHashCode();

            return hash
        }
    } 
```

现在您已经覆盖了 GetHashCode() 和 Equals()（我也喜欢实现`IEquatable<T>`自己），您可以使用`Except()`：

```
 var results = array1.Except(array2);

        foreach (var i in results)
        {
            Console.WriteLine(i.column1 + ":" + i.column2);
        } 
```

我建议[在哈希码算法上查看这个 SO 线程，](https://stackoverflow.com/questions/263400/what-is-the-best-algorithm-for-an-overridden-system-object-gethashcode)以及实现一个好的技巧。

此外，作为旁注，某些类型（例如`KeyValuePair`、`Tuple`和匿名类型）已经实现`Equals()`并`GetHashCode()`正确地实现了等价性，它们考虑到了它们的各个组件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T20:17:45.220

您可以使用 IEnumerable 可用的 except 方法。这很容易实现。您可以在此处看到一个示例：http: [//msdn.microsoft.com/en-us/library/bb336390.aspx](http://msdn.microsoft.com/en-us/library/bb336390.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T20:27:46.877

```
array2.ForEach(x => array1.Remove(x)); 
```

留在array1中的是你的结果

**编辑：** 我不看第一眼，项目不是“简单”的对象......正如詹姆斯所写，你需要覆盖 equal

# c# - 如何在同一查询中使用 where 条件时计算表中的行数

> ID：10659131
> 
> 赞同：1
> 
> 时间：2012-05-18T20:15:40.727
> 
> 标签：c#, sql-server-2008

如何在同一查询中使用 where 条件时计算表中的行数。我正在使用下面的查询来获取部门名称等于电气工程的行数。但这现在正在工作什么是正确的查询

```
SqlCommand cmd1 = new SqlCommand("Select count(*) from Student
where DepartmentName = 'DepartmentOfElectricalEngineering' ");
cmd1.Connection = conn;
studentdata[4] = cmd1.ExecuteScalar().ToString(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T20:19:51.830

资料不多。返回的`ExecuteScalar`函数是什么？没有什么？有例外吗？什么是`studentdata[4]`？ExecuteScalar 返回一个对象，您需要根据字段（`int`在本例中）和存储它的变量来转换该对象。您是否尝试直接针对 SQL Server 运行此查询？您是否尝试过指定显式字段名称，如下所示：

```
Select count(*) as C from Student
where DepartmentName = 'DepartmentOfElectricalEngineering' 
```

# r - aes 中的局部变量

> ID：10659133
> 
> 赞同：47
> 
> 时间：2012-05-18T20:15:47.713
> 
> 标签：r, ggplot2

`aes`当我使用 ggplot 绘图时，我正在尝试使用局部变量。这是我的问题归结为本质：

```
xy <- data.frame(x=1:10,y=1:10)

plotfunc <- function(Data,YMul=2){
    ggplot(Data,aes(x=x,y=y*YMul))+geom_line()
}

plotfunc(xy) 
```

这会导致以下错误：

```
Error in eval(expr, envir, enclos) : object 'YMul' not found 
```

好像我不能在`aes`. `aes`会不会是局部变量超出作用域后执行的内容造成的？我怎样才能避免这个问题（除了不使用内部的局部变量`aes`）？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-19T06:33:06.520

我会捕捉当地的环境，

```
xy <- data.frame(x=1:10,y=1:10)

plotfunc <- function(Data, YMul = 2){
    .e <- environment()
    ggplot(Data, aes(x = x, y = y*YMul), environment = .e) + geom_line()
}

plotfunc(xy) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-18T20:50:13.753

这是一种替代方法，它允许您通过`YMul`参数传递任何值，而无需将其添加到`Data`data.frame 或全局环境中：

```
plotfunc <- function(Data, YMul = 2){
    eval(substitute(
        expr = {
            ggplot(Data,aes(x=x,y=y*YMul)) + geom_line()
        }, 
        env = list(YMul=YMul)))
    }

plotfunc(xy, YMul=100) 
```

要了解它是如何工作的，请单独尝试以下行：

```
substitute({ggplot(Data, aes(x=x, y=y*YMul))}, list(YMul=100)) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-18T20:35:36.327

~~`ggplot()`'s`aes`期望`YMul`是`data`数据框中的一个变量。尝试包括`YMull`那里：~~

感谢@Justin：`ggplot()`'s`aes`似乎首先`YMul`在`data`数据框中寻找，如果没有找到，然后在全球环境中。我喜欢将这样的变量添加到数据框中，如下所示，因为这在概念上对我来说是有意义的。我也不必担心全局变量的更改会对函数产生意想不到的后果。但所有其他答案也是正确的。所以，选择适合你的。

```
require("ggplot2")
xy <- data.frame(x = 1:10, y = 1:10)
xy <- cbind(xy, YMul = 2)

ggplot(xy, aes(x = x, y = y * YMul)) + geom_line() 
```

或者，如果您想要示例中的函数：

```
plotfunc <- function(Data, YMul = 2)
{
    ggplot(cbind(Data, YMul), aes(x = x, y = y * YMul)) + geom_line()
}

plotfunc(xy) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-03-07T19:39:03.653

我正在使用 ggplot2，您的示例似乎适用于当前版本。

但是，很容易想出仍然会造成麻烦的变体。我自己对类似的行为感到困惑，这就是我找到这篇文章的方式（“ggplot 如何在传递时评估变量”的谷歌搜索结果）。例如，如果我们将 ggplot 从 plotfunc 中移出：

```
xy <- data.frame(x=1:10,y=1:10)

plotfunc <- function(Data,YMul=2){
  geom_line(aes(x=x,y=y*YMul))
}

ggplot(xy)+plotfunc(xy)
# Error in eval(expr, envir, enclos) : object 'YMul' not found 
```

在上面的变体中，“捕获本地环境”不是一个解决方案，因为 ggplot 不是从函数内部调用的，只有 ggplot 有“environment=”参数。

但是现在有一系列函数“aes_”、“aes_string”、“aes_q”，它们类似于“aes”，但捕获局部变量。如果我们在上面使用“aes_”，我们仍然会得到一个错误，因为现在它不知道“x”。但是直接引用数据很容易，这样就解决了问题：

```
plotfunc <- function(Data,YMul=2){
  geom_line(aes_(x=Data$x,y=Data$y*YMul))
}
ggplot(xy)+plotfunc(xy)
# works 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-20T17:17:39.203

你看过@wch（W. Chang）给出的解决方案吗？

[https://github.com/hadley/ggplot2/issues/743](https://github.com/hadley/ggplot2/issues/743)

我认为这是更好的

本质上类似于@baptiste，但在对 ggplot 的调用中直接包含对环境的引用

我在这里报告

```
g <- function() {
  foo3 <- 4
  ggplot(mtcars, aes(x = wt + foo3, y = mpg),
         environment = environment()) +
    geom_point()
}

g()
# Works 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-18T20:39:53.070

如果您在函数之外执行代码，它会起作用。如果你在`YMul`全局定义的函数中执行代码，它就可以工作。我不完全了解内部工作原理，`ggplot`但这有效......

```
YMul <- 2

plotfunc <- function(Data){
    ggplot(Data,aes(x=x,y=y*YMul))+geom_line()
}

plotfunc(xy) 
```

# java - 爪哇地图 >

> ID：10659134
> 
> 赞同：1
> 
> 时间：2012-05-18T20:15:53.973
> 
> 标签：java, list, collections, map, hashmap

我需要将结果集转换为地图地图。我不使用地图列表的原因是因为我不想遍历整个列表来获取特定行。

我现在面临的问题是，如果索引大于 16，则不再对 HashMap 的条目进行排序。

现在我尝试了以下简单测试：

```
 public static void main(String[] args) {

    Map<Integer, String> map = new HashMap<Integer, String>();

    //creating 20 rows from 1 to 20
    for (int i = 1; i <= 20; i++){
        map.put(i, "ROW "+i);   
    }

    //returning all the rows the map contains. Look at position 16.
    for(int key : map.keySet()){
        System.out.println(key);    
    }
} 
```

输出如下（查看位置 16 到 20。它们完全无序）：

1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 **17 16 19 18 20**

如果有人能解释为什么会发生这种情况，我将不胜感激。

顺便说一下：

我不能使用这样的东西：

```
for (int i = 0; i < map.size; i++){
    map.get(i) //...and so on

} 
```

因为我不知道索引是否存在。可能是从200到800的索引不存在。所以最好只遍历地图的现有条目。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T20:17:16.867

A`HashMap`未排序或排序。如果您需要插入有序`Map`使用`java.util.LinkedHashMap`. 如果您需要`Map`按键排序，请使用`SortedMap`诸如`java.util.TreeMap`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T20:18:48.300

您应该使用[TreeMap](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)或[LinkedHashMap](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)而不是 HashMap，具体取决于您是否希望元素分别按其自然顺序或插入顺序排序。

HashMap 不保证键的顺序。我引用的其他两个 Map 实现确实如此。

TreeMap 将根据键的自然顺序对键进行排序，这意味着键必须实现 Comparable 或者您必须提供自己的比较器才能确定顺序。

LinkedHashMap 将根据插入的时间保持键的顺序。

由于您正在寻找的行为是键自然排序，并且您碰巧自己按顺序插入键，因此任何一种实现都适用于这种情况。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-18T20:17:27.477

您可以使用[LinkedHashMap](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)来保持插入顺序，因为基本映射不保证键的顺序。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-18T20:18:58.813

使用 TreeMap 怎么样？而不是HashMap。您甚至可以提供自己的订单。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-18T21:53:14.977

> 我不使用地图列表的原因是因为我不想遍历整个列表来获取特定行。

所以让它成为一个`ArrayList`而不是一个`LinkedList`。这样，`list.get(1234)`将直接进入该条目——它不会遍历之前的 1234 个条目。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-28T14:06:03.060

我认为您面临的问题是因为 HashMap 的默认大小。

根据标准java文档，

```
/**
 * The default initial capacity - MUST be a power of two.
 */
static final int DEFAULT_INITIAL_CAPACITY = 16;
/**
 * The load factor used when none specified in constructor.
 */
static final float DEFAULT_LOAD_FACTOR = 0.75f;

/**
 * Constructs an empty <tt>HashMap</tt> with the default initial capacity
 * (16) and the default load factor (0.75).
 */
public HashMap() {
    this.loadFactor = DEFAULT_LOAD_FACTOR;
    threshold = (int)(DEFAULT_INITIAL_CAPACITY * DEFAULT_LOAD_FACTOR);
    table = new Entry[DEFAULT_INITIAL_CAPACITY];
    init();
} 
```

因此，在第 16 个元素之后您没有得到正确的输出。

根据 JavaDoc，

```
/**
 * Constructs an empty <tt>HashMap</tt> with the specified initial
 * capacity and the default load factor (0.75).
 *
 * @param  initialCapacity the initial capacity.
 * @throws IllegalArgumentException if the initial capacity is negative.
 */
public HashMap(int initialCapacity) {
    this(initialCapacity, DEFAULT_LOAD_FACTOR);
} 
```

尝试以下（具有初始容量的参数化构造函数），

```
Map<Integer, String> map = new HashMap<Integer, String>(32); 
```

# adsense - AdSense SDK 下载

> ID：10659136
> 
> 赞同：2
> 
> 时间：2012-05-18T20:16:01.637
> 
> 标签：adsense

您好我已在 Google AdSense 中注册，我想使用 SDK for iOS，但目前我找不到 SDK 下载链接。

我的申请已获批准。

任何人都知道如何下载这个sdk。

我使用这个链接来描述如何使用它，但没有关于 SDK 下载的链接。

[AdSense iOS SDK](https://developers.google.com/adsense-for-mobile-apps/docs/ios/)

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:21:50.937

我不使用 AdSense，而是使用 AdMob。真的很酷的东西！在您的应用程序中提供广告的非常简单且非常快速的方式。

# javascript - 在谷歌地图上显示标记的数量和该标记的数据

> ID：10659138
> 
> 赞同：0
> 
> 时间：2012-05-18T20:16:10.267
> 
> 标签：javascript, json, google-maps

我需要关于我正在构建的 Google 地图系统的帮助。[http://helpinspire.me/temp/google-maps/count-markers.html](http://helpinspire.me/temp/google-maps/count-markers.html)我有 5 个 json 提要根据选择的单选按钮拉入并显示。然后，当您单击标记时，我为每个项目显示了从 json 文件中提取的值的信息窗口。

所以我需要帮助的下一步是，我想完成两件事。

1.  渲染在用户所在的缩放级别内可见的标记数量，并在缩放级别更改时更新。我知道我需要使用`getMarkerCount`，但我在添加它时遇到了困难。
2.  基于可见的标记，我想添加两个变量：`available seats`和`user count`。因此，如果在该缩放级别内可以看到三个标记，我想显示可用座位总数和用户数。

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T20:38:08.520

我通常用谷歌地图做的是保留数组中所有活动标记和信息窗口的引用。这样做，您可以遍历标记并检查它们是否在地图内。使用 getBounds() 获取地图角落的 LatLng。然后遍历你的标记数组，检查每个标记的纬度/经度是否在界限内。

# javascript - Javascript 隐藏 div (is:empty) 问题

> ID：10659141
> 
> 赞同：1
> 
> 时间：2012-05-18T20:16:32.960
> 
> 标签：javascript, jquery

有一些代码来隐藏一个 div，如果它的内容是空的。这应该工作......它以前工作过。我在这里遗漏了一些明显的东西吗？div 类 = "msgalert"

```
$(document).ready(function () {
    if ($('.msgalert').is(':empty')) {
        $(".msgalert").css({'display':'none'});
    }
}); 
```

对应的 CSS 是：

```
.msgalert { border: 1px solid #eac572; background-color: #ffe9ad; } 
```

请帮忙！谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T20:19:29.933

尝试检查 of 的长度是否`html()`为`.msgalert`0 而不是检查是否为`:empty`，如下所示：

```
if ($.trim($('.msgalert').html()).length == 0) { 
```

您还需要修剪`html()`以考虑空白。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T20:24:46.090

只是发布我的版本，

```
$('.msgalert').filter(function () {
   return ($(this).text().length == 0 && $(this).children().length == 0);
}).css('display', 'none'); 
```

# java - 从 PostgreSql DB 中一一获取记录

> ID：10659142
> 
> 赞同：0
> 
> 时间：2012-05-18T20:16:34.843
> 
> 标签：java, hibernate, postgresql

有一个包含大约 300-400 条记录的数据库。我可以进行一个简单的查询来获取 30 条记录，例如：

```
SELECT * FROM table
WHERE isValidated = false
LIMIT 30 
```

关于数据库表内容的更多信息。有一个名为 isValidated 的列，它可以（如您正确猜测的那样）采用以下两个值之一：真或假。查询后，应验证某些记录 (isValidated=true)。每组 30 条记录中大约有 5-6 条记录。相应地，在每次查询之后，我将从之前的查询中获取记录（isValidated=false）。事实上，我永远不会用这种方法走到桌子的尽头。

验证过程是使用 Java + Hibernate 完成的。我是 Hibernate 的新手，所以我使用 Criterion 来进行这个简单的查询。

这种任务有什么最佳实践吗？添加标志字段（标记已获取的记录）的变体是不合适的（此数据库的过度工程）。也许有机会创建一些虚拟表，其中将存储已处理的记录或类似的东西。顺便说一句，在处理完所有记录后，计划再次开始处理它们（有可能，其中一些需要验证）。

提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T20:28:01.020

我可以想象几种解决方案：

1.  将所有内容存储在内存中。你只有 400 条记录，考虑到这个小数字，它可能是一个完美的解决方案
2.  在唯一列（例如，PK）上使用 order by 子句（无论如何都应该这样做），存储最后加载的记录的 ID，并确保下一个查询使用`where ID > :lastId`

# javascript - Visual Studio 2010 -> 打开 javascript 文件 (.js) -> 窗口显示乱码，渲染问题？

> ID：10659145
> 
> 赞同：1
> 
> 时间：2012-05-18T20:16:50.957
> 
> 标签：javascript, visual-studio-2010

我现在的电脑根本没有这个问题。前几天才开始发生。当我在 VS2010 中打开一个 .js 文件时，大约有一半的时间，当我打开这些文件时，它会显示一堆垃圾而不是一个代码窗口。如果我关闭所有内容并重新启动，问题就消失了，但随着时间的推移，我厌倦了每天这样做。

下面上传了一张图片。：

![在此处输入图像描述](../Images/b7bde9a9778981399183c5b0e3af693b.png) 任何有关此的帮助/信息将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T20:27:34.073

这是通过选项面板修复它的方法。感谢 Mahmoud 的建议，当时没有想清楚。

![在此处输入图像描述](../Images/65e1de664f8df2551db048fc9cb9e474.png)

# python - 遍历 Python 中的整数列表和列表

> ID：10659146
> 
> 赞同：2
> 
> 时间：2012-05-18T20:16:51.573
> 
> 标签：python, list

我想遍历一个包含列表和非列表元素混合的列表。这是一个例子：

```
a = [[1, 2, 3, 4, 5], 8, 9, 0, [1, 2, 3, 4, 5]] 
```

我知道如何遍历列表的强制性列表，但在这种情况下，我不知道该怎么做。我的目标是将嵌套列表的一个值与列表中的另一个值进行比较。例如在这种情况下：`[1, 2, 3, 4, 5]`和`8`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T20:28:52.910

这是你想要的吗：

```
thelist = [[1, 2, 3, 4, 5], 5, 6, 7, 8, 10, [9, 0, 1, 8]]
# Remove the 5 from the first inner list because it was found outside.
# Remove the 8 from the other inner list, because it was found outside.
expected_output =[[1, 2, 3, 4], 5, 6, 7, 8, 10, [9, 0, 1]] 
```

这是一种方法：

```
thelist = [[1, 2, 3, 4, 5], 5, 6, 7, 8, [9, 0, 1, 8]]

expected_output =[[1, 2, 3, 4], 5, 6, 7, 8, [9, 0, 1]]

removal_items = []

for item in thelist:
    if not isinstance(item, list):
        removal_items.append(item)

for item in thelist:
    if isinstance(item, list):
        for remove in removal_items:
            if remove in item:
                item.remove(remove)

print thelist

assert thelist == expected_output 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T21:15:16.290

[与jgritty](https://stackoverflow.com/a/10659291/191191)的答案略有不同的版本。区别：

*   我们使用[filter()](http://docs.python.org/library/functions.html#filter)内置`int`从列表中提取元素
*   我们将整数保存在一个[集合](http://docs.python.org/library/stdtypes.html#set)中，而不是一个`list`
*   我们遍历 的副本`a`，以便我们可以同时安全地从`a`自身中删除元素
*   使用[列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)删除已经在主列表中的嵌套列表的成员

    ```
    a = [[1, 2, 3, 4, 5], 5, 6, 7, 8, [9, 0, 1, 8]]
    print a

    numbers = set(filter(lambda elem: type(elem) is not list, a))

    for elem in a:
        if type(elem) is list:
            elem[:] = [number for number in elem if number not in numbers]

    print a 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T20:23:32.387

```
a = [[1, 2, 3, 4, 5], 8, 9, 0, [1, 2, 3, 4, 5]]
for x in a:
    if type(x) is list:
        for y in x:
            print y
    else:
        print x 
```

或使用

```
isinstance(x, list) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T20:23:07.283

您可以检查迭代的对象是否是 ListType (http://docs.python.org/library/types.html) 并进一步迭代它。

我现在不记得确切的命令了，但是可以使用 type(x) 之类的东西来获取对象的类型。

# android - CheckBox 不改变状态

> ID：10659158
> 
> 赞同：1
> 
> 时间：2012-05-18T20:18:12.810
> 
> 标签：android, android-listview, android-viewbinder

我有一个：

```
public class MyList extends ListActivity {
    SimpleAdapter simpleAdapter; 
```

绑定到`ListView`由 a 完成`ViewBinder`：

```
 simpleAdapter = new SimpleAdapter(this, getData(path),
            R.layout.menu_row, new String[] { 
        ..., "checked" }, new int[] {..., R.id.checkBox1 });

    SimpleAdapter.ViewBinder viewBinder = new SimpleAdapter.ViewBinder() {
        @Override
        public boolean setViewValue(View view, Object data,
                String textRepresentation) {
            if (view.getId() == R.id.checkBox1) {
                                CheckBox checkBox = (CheckBox) view;
                checkBox.setChecked(Boolean.parseBoolean((String) data)); 
```

我的 xml 看起来像这样，`clickable`并`focusable`有助于将行视为一个。

```
<CheckBox
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:focusable="false"
    android:clickable="false"
    android:focusableInTouchMode="false"
     /> 
```

我还有一个：

```
protected void onListItemClick(ListView l, View v, int position, long id) { 
```

它与点击事件交互。到目前为止效果很好，我的问题是当我点击一行时，`CheckBox`它不会改变它的视觉状态。我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T20:41:05.237

我认为您要查看的是`CheckedTextView`显示复选框的内容，单击列表项时复选框会更改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T21:11:56.457

在您的 onListItemClick 中放入一个`button.setChecked(true)`（或使用 setChecked 来回切换的代码）。

编辑

误解了你的问题。您是否告诉适配器数据集已更改？

# sql - 即使条件不满足，SQL 也会尝试执行包含在 IF 块中的语句

> ID：10659161
> 
> 赞同：0
> 
> 时间：2012-05-18T20:18:19.553
> 
> 标签：sql

我们升级了一个SQL数据库，升级后的表增加了新的列

例如，

`Table1`有列`Column1, Column2`。

在升级的数据库版本中，增加了一个额外的列

`Table1`现在有列`Column1, Column2, Column3`

我正在尝试创建一个可以在两个版本中工作的脚本。该脚本如下所示：

```
DECLARE @DBVersion varchar(25)

select @DBVersion = (select DBVersion from DBVersions)

IF @DBVersion = 'Old'
  BEGIN
    INSERT Table1 (Column1, Column2)
    SELECT Value1, Value2
    FROM TempTable
  END

IF @DBVersion = 'New'
  BEGIN
    INSERT Table1 (Column1, Column2, Column3)
    SELECT Value1, Value2, Value3
    FROM TempTable
  END 
```

当我在旧数据库版本中运行此脚本时，出现错误

> 列名“Column3”无效

我想，这是因为 SQL 在执行之前编译脚本并且无法找到有没有办法解决这个问题并开发一个可以在两个数据库版本中运行的脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T20:22:45.460

假设您使用的是 SQL Server 或 Sybase，则需要为此使用动态 SQL。

```
Declare @Sql nvarchar(max);

If @DBVersion = 'Old'
    Set @Sql = 'Insert Table1( Column1, Column2 )
                        Select Value1, Value2
                        From TempTable';
Else If @DBVersion = 'New'
    Set @Sql = 'Insert Table1( Column1, Column2, Column3 )
                        Select Value1, Value2, Value3
                        From TempTable';

exec ( @Sql ); 
```

# php - php DOMDocument - 操作和编码

> ID：10659164
> 
> 赞同：2
> 
> 时间：2012-05-18T20:18:33.760
> 
> 标签：php, domdocument

```
$dom = new DOMDocument('1.0', 'UTF-8');
$dom->loadHTML($content);
$divs = $dom->getElementsByTagName("div");
foreach ( $divs as $div ) {
    if ( $class = $div->attributes->getNamedItem("class") ) {
        if ( $class->nodeValue == "simplegalleryholder" ) 
            $div->parentNode->removeChild( $div );
    }
}
$content = $dom->saveHTML(); 
```

这个简单的代码应该可以帮助我删除

```
<div class="simplegalleryholder"> .... </div> 
```

从文档中。唯一的问题是，$content 包含 utf8 编码的特殊字符（ąęść 等），这些字符会被进程破坏（我得到 iÄ™ Å, Å¼ 代替）。

我应该如何处理这个问题以获得正确的结果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T20:47:15.580

在构造函数中指定`UTF-8`不会使底层 xml 处理库将其作为 utf8 处理。以下解决方法确实很hacky，但它的效果相当不错。

```
$encodingHint = '<meta http-equiv="Content-Type" content="text/html; charset=utf-8">';
$dom->loadHTML($encodingHint . $html); 
```

[https://bugs.php.net/bug.php?id=32547](https://bugs.php.net/bug.php?id=32547)

如果您在 Web 浏览器中查看输出，请发送真正的 http 标头，而不是 http-equiv 元标记。这仅用于查看。使用 domdocument 处理特别需要元标记。

```
header('content-type: text/html; charset=utf-8'); 
```

# php - 为什么使用 set_error_handler() 会消除我的错误？

> ID：10659165
> 
> 赞同：1
> 
> 时间：2012-05-18T20:18:40.507
> 
> 标签：php

我正在使用以下脚本处理错误：

```
<?php # config.inc.php

// This script establishes email default settings.
// This script determines how errors are handled.

// Email Settings
$site['from_name'] = 'x'; // from email name
$site['from_email'] = 'x@x.com'; // from email address

// Just in case we need to relay to a different server, 
// provide an option to use external mail server.
$site['smtp_mode'] = 'enabled'; // enabled or disabled
$site['smtp_host'] = 'mail.x.com';
$site['smtp_port'] = null;
$site['smtp_username'] = 'admin@x.com'; 
$site['smtp_password'] = 'x';

// Error handling:
// Flag variable for site status:
$live = TRUE;

ini_set('display_errors','On');
error_reporting(E_ALL);

// Error log email address:
$admin_email = 'x@x.com';

date_default_timezone_set('America/New_York');

// Create the error handler.
function my_error_handler ($e_number, $e_message, $e_file, $e_line, $e_vars) {

    global $live, $admin_email;

    // Build the error message.
    $message = "An error occurred in script '$e_file' on line $e_line: \n<br />$e_message\n<br />";

    // Add the date and time.
    $message .= "Date/Time: " . date('n-j-Y H:i:s') . "\n<br />";

    // Append $e_vars to the $message.
    $message .= "<pre>" . print_r ($e_vars, 1) . "</pre>\n<br />";

    if ($live) { // Don't show the specific error.

        error_log ($message, 1, $admin_email); // Send email.

        // Only print an error message if the error isn't a notice.
        if ($e_number != E_NOTICE) {
            echo '<div id="Error">A system error occurred. An administrator has been notified. We apologize for the inconvenience.</div><br />';
        }

    } else { // Development (print the error).
        echo '<div id="Error">' . $message . '</div><br />';
    }

} // End of my_error_handler() definition.

// Use my error handler.
set_error_handler ('my_error_handler');

?> 
```

如果我将此脚本包含在有错误的脚本中，则不会显示该错误。如果我注释掉对 set_error_handler() 的调用，则会显示错误。我做错了什么可能导致这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T20:20:28.153

从文档[http://php.net/manual/en/function.set-error-handler.php](http://php.net/manual/en/function.set-error-handler.php)

> 重要的是要记住，对于由 error_types 指定的错误类型，标准的 PHP 错误处理程序完全被绕过，除非回调函数返回 FALSE。

让你的处理程序返回`FALSE`

# php - 如果用户可以看到您的 php 代码，是否认为不安全？

> ID：10659173
> 
> 赞同：2
> 
> 时间：2012-05-18T20:19:23.147
> 
> 标签：php

众所周知，可以在互联网上看到任何页面的 html、css 和 javascript 代码。（查看源代码）

我试图查看网站的 php 代码，发现这是不可能的。

允许用户查看 php 代码是否被认为是危险/不安全的（对于网站安全而言）？

还是只是 php 是服务器端脚本语言？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T20:21:53.263

绕过任何系统或安全性的第一步是了解它的设计或构建方式。**是**的，如果恶意用户可以查看您的 PHP 源代码，他们**可以**找到利用它的方法。但是，如果您的服务器配置正确，那么外部（Web）用户将无法看到源代码。

# many-to-many - HQL 多对多查询不存在

> ID：10659175
> 
> 赞同：0
> 
> 时间：2012-05-18T20:19:29.710
> 
> 标签：many-to-many, hql

我有三个表 A、B 和 A_B（带有 @ManyToMany 注释）。

我尝试使用以下查询请求所有没有特定 b.id (:k) 的 A 对象：“Select disctinct a from A a join aB b where b.id != :k”

但我也想要所有没有现有 b.id 的 A 对象，并且上面的这个查询只返回没有 b.id 的 A 对象。

我能怎么做？我需要在 b.id 上使用“不存在”吗？

PS：对不起我的英语，它不是我的母语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T20:38:08.707

```
select a from A a where :k not member of a.bs 
```

（k 参数应该是 B 的实例，其 ID 为要拒绝）

# jquery - 显示来自 jquery ajax 调用的 json 响应

> ID：10659183
> 
> 赞同：-1
> 
> 时间：2012-05-18T20:19:42.163
> 
> 标签：jquery, ajax, json

我的 ajax 调用成功地从数据库返回数据，但我无法弄清楚如何解析 json 并正确显示它。这是我的ajax调用：

```
$('#cardText').change(function(){
            if($('#cardText').val().trim().length == 9)
                {
                    $.ajax({

                        url: 'components/Person.cfc',

                        //GET method is used
                        type: "POST",

                        //pass the data        
                        data: {
                            method: "getGroup",
                            uid: $('#cardText').val(),
                            },
                        datType: "json",

                        success: function(response) {

                            var resp = $.trim(response);
                            $('#form_result').html(resp);
                        },

                        error: function(jqXHR, exception) {
                            if (jqXHR.status === 0) {
                                alert('Not connect.\n Verify Network.');
                            } else if (jqXHR.status == 404) {
                                alert('Requested page not found. [404]');
                            } else if (jqXHR.status == 500) {
                                alert('Internal Server Error [500].');
                            } else if (exception === 'parsererror') {
                                alert('Requested JSON parse failed.');
                            } else if (exception === 'timeout') {
                                alert('Time out error.');
                            } else if (exception === 'abort') {
                                alert('Ajax request aborted.');
                            } else {
                                alert('Uncaught Error.\n' + jqXHR.responseText);
                            }
                        }
                }); 
            }
        }); 
```

并将以下内容返回到 (div id="form_result") 但我不知道现在如何处理数据以正确显示它：

```
{"COLUMNS":["PLAN","NAME","ID","ISSUE","TYPE","LASTUSED","BALANCE"],"DATA":[["DINING STAFF CAFE 1919 ","YOUNG, MARIA ",8.03976343E8,"2001-04-02",2.0,"2012-01-27",1]]} 
```

任何帮助，将不胜感激！杰拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T00:16:23.833

似乎“数据”中有多余的逗号 尝试删除逗号后`uid: $('#cardText').val()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T20:58:45.340

看来您只需要对从服务器返回的 JSON 数据做一些事情。如果您想将其解析为更合理的格式，例如哈希，请在此处查看我的小提琴：http: [//jsfiddle.net/skamansam/T7WbK/25/](http://jsfiddle.net/skamansam/T7WbK/25/)。如果您只是想告诉用户他/她提交的数据是正确的，请更改以下行：

`$('#form_result').html(resp);`

至

`$('#form_result').html("Form submitted successfully!");`

理想的情况是您将服务器响应更改为有意义的内容，例如 html 响应而不是 json。这似乎更像是一个偏好问题，而不是技术性或协议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T20:42:21.547

你可以通过这种方式解析json数据来做到这一点

```
var ReturnedData = jQuery.parseJSON(response); 
```

然后你可以像访问一个简单的对象和数组一样访问数据，即

```
var Col1 = ReturnedData.COLUMNS[0];  // will provide you first COLUMN value i.e. "PLAN"
var Data1= ReturnedData.DATA[0];  // will provide you first DATA value i.e. "DINING STAFF     CAFE 1919" 
```

以上两行只是一个示例，说明如何获取数据

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T20:27:06.793

由于您在客户端获取 JSON，您可以将其提供给一些了解该数据的 JS 插件，或者使用模板引擎自己显示它们。

你需要一个像样的模板引擎。

查看[http://api.jquery.com/category/plugins/templates/](http://api.jquery.com/category/plugins/templates/)、[http://handlebarsjs.com/](http://handlebarsjs.com/)或[https://github.com/leonidas/transparency](https://github.com/leonidas/transparency)

# android - 从 Android 应用程序更新 Facebook 状态

> ID：10659184
> 
> 赞同：0
> 
> 时间：2012-05-18T20:19:50.127
> 
> 标签：android, facebook-graph-api

我有一个快速的问题，我花了无数个小时试图寻找答案并想出了一个空白。我正在开发一个 Android 应用程序，我希望它更新用户状态而不是发布到他们的墙上。我找到的所有内容都解释了如何向用户墙发布消息。但我想在新闻提要上更新他们的状态。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T20:28:42.673

好吧，我不是专家，但似乎在你自己的墙上发帖会更新他们在新闻提要中的状态？

无论如何，看看 Facebook 的 Hackbook 示例（可在他们的 GIT 存储库中获得），他们的“更新状态”功能只是一个墙贴：

```
Bundle params = new Bundle();
            params.putString("caption", getString(R.string.app_name));
            params.putString("description", getString(R.string.app_desc));
            params.putString("picture", Utility.HACK_ICON_URL);
            params.putString("name", getString(R.string.app_action));

            Utility.mFacebook.dialog(Hackbook.this, "feed", params, new UpdateStatusListener()); 
```

# c++ - 通过引用传递指针（插入二叉搜索树）

> ID：10659191
> 
> 赞同：2
> 
> 时间：2012-05-18T20:20:17.470
> 
> 标签：c++

我的程序正在调用一个成员函数，该函数使用通过引用传递的指针执行向二叉搜索树的插入（以便更改指针的值）。但是，当我尝试将第二个节点插入树中时，程序崩溃了。我假设这与错误的指针有关。

此分配中唯一可以更改的部分是成员函数的实现，而不是声明。

任何帮助，将不胜感激。

```
 //Header file
using namespace std;

struct PersonRec
{
    char name[20];
    int bribe;
    PersonRec* leftLink;
    PersonRec* rightLink;
};

class CTree
{

private:
    PersonRec *tree;
    bool IsEmpty();
    void AddItem( PersonRec*&, PersonRec*);
    void DisplayTree(PersonRec*);

public:
    CTree();
    //~CTree();
    void Add();
    void View();

};

//Implementation file

#include <iostream>
#include <string>

using namespace std;

#include "ctree.h"

CTree::CTree()
{
    tree = NULL;
}

//PersonList::~MyTree()
//{
//
//}

bool CTree::IsEmpty()
{
    if(tree == NULL) 
    {
        return true;
    }
    else
    {
        return false;
    }
}

void CTree::Add()
{
    PersonRec* newPerson = new PersonRec();
    cout << "Enter the person's name: ";
    std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
    cin.getline(newPerson->name, 20);
    cout << "Enter the person's contribution: ";
    cin >> newPerson->bribe;

    newPerson->leftLink = NULL;
    newPerson->rightLink = NULL;

    AddItem(tree, newPerson);
}

void CTree::View()
{
    if (IsEmpty())
    {
        cout<<"The list is empy";
    }
    else
    {
        DisplayTree(tree);

    }

};

void CTree::AddItem( PersonRec*& ptr, PersonRec* newPer )
{
        if (tree == NULL)
        {
            ptr = newPer;
        }
        else if ( newPer->bribe < ptr->bribe)
            AddItem(ptr->leftLink, newPer); 
        else
            AddItem(ptr->rightLink, newPer); 
}
void CTree::DisplayTree(PersonRec* ptr)
{
    if (ptr == NULL)
                    return;
    DisplayTree(ptr->rightLink);
    cout<<ptr->name<<" "<<"$"<<ptr->bribe <<endl;
    DisplayTree(ptr->leftLink); 
}

//Driver file
#include <iostream>

using namespace std;
#include <cstdlib>
#include "ctree.h"

int displayMenu (void);
void processChoice(int, CTree&);

int main (void)
{
int num;
CTree ct;
do 
{
num = displayMenu();
if (num != 3)
processChoice(num, ct);
} while (num != 3);
return 0;
}

int displayMenu (void)
{
int choice;
cout << "\nMenu\n";
cout << "==============================\n\n";
cout << "1\. Add student to waiting list\n";
cout << "2\. View waiting list\n";
cout << "3\. Exit program\n\n";
cout << "Please enter choice: ";
cin >> choice;
return choice;
}

void processChoice(int choice, CTree& myTree)
{
   switch (choice)
   {
      case 1: myTree.Add (); break;
      case 2: myTree.View (); break;
   } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T20:27:22.220

在`CTree::AddItem`中，您的条件是错误的：

```
 if (tree == NULL)
    {
        ptr = newPer;
    } 
```

应该

```
 if (ptr == NULL)
    {
        ptr = newPer;
    } 
```

当您调用`AddItem(ptr->rightLink, newPer);`,`newPer`是新节点，但当前根的任何一个后代都可以是`NULL`，所以这就是您需要检查`NULL`和替换的内容，而不是新节点。

# java - 尝试将 GWT 应用程序部署到 GAE 时出错

> ID：10659192
> 
> 赞同：0
> 
> 时间：2012-05-18T20:20:19.800
> 
> 标签：java, google-app-engine, gwt, web-deployment

我正在尝试将我的项目部署到应用程序引擎，但是在编译之后，当它尝试部署应用程序时出现此错误：

```
Deploying:
    Uploading 27 files.
    Uploaded 6 files.
    Uploaded 12 files.
    Uploaded 18 files.
    Uploaded 24 files.
    Initializing precompilation...
    Sending batch containing 13 file(s) totaling 1172KB.
    Exception in flushing batch payload, so sending 1 by 1...Error posting to URL: https://appengine.google.com/api/appversion/addfiles?=&app_id=xxxx&version=3&
500 Internal Server Error

<html><head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>500 Server Error</title>
</head>
<body text=#000000 bgcolor=#ffffff>
<h1>Error: Server Error</h1>
<h2>The server encountered an error and could not complete your request.<p>If the problem persists, please <A HREF="http://code.google.com/appengine/community.html">report</A> your problem and mention this error message and the query that caused it.</h2>
<h2></h2>
</body></html>

     on backend null.
com.google.appengine.tools.admin.HttpIoException: Error posting to URL: https://appengine.google.com/api/appversion/addfile?path=img%2F0.png&app_id=xxxxxxx=3&
500 Internal Server Error

<html><head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>500 Server Error</title>
</head>
<body text=#000000 bgcolor=#ffffff>
<h1>Error: Server Error</h1>
<h2>The server encountered an error and could not complete your request.<p>If the problem persists, please <A HREF="http://code.google.com/appengine/community.html">report</A> your problem and mention this error message and the query that caused it.</h2>
<h2></h2>
</body></html> 
```

知道为什么会发生吗？我不得不说我的最后一次部署是昨天并且正在工作，从那时起我改变了一些小东西！

应用引擎服务器会停机吗？

**更新：**现在工作得很好，也许 GAE 已经关闭或smth。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T01:01:03.313

今天早些时候应用程序部署存在问题。有关更多信息，您可以关注[此错误报告](http://code.google.com/p/googleappengine/issues/detail?id=7535)。

# c++ - 无需登录即可获取 MySQL 数据库列表

> ID：10659193
> 
> 赞同：0
> 
> 时间：2012-05-18T20:20:27.883
> 
> 标签：c++, mysql, qt, c++11

我正在开发一个使用 MySQL 数据库的 Qt/C++ 开源项目。一个类将在初始配置（第一次运行）期间使用，用户将能够选择一个数据库。有没有办法在不登录并执行*SHOW DATABASES的情况下提供主机上所有数据库的列表？*交易？我想获取主机上*所有*数据库的列表，而不仅仅是特定用户拥有的数据库。我知道的唯一方法是执行*SHOW DATABASES；*作为特定主机上的 root 用户，但我不想要求用户具有 root 访问权限，除非在某些绝对必要的情况下。

这个想法是有一个对话框，让用户选择他们想要在后续会话期间使用的默认数据库，并提供与之配套的用户/通行证。如果我也能获得每个数据库的所有者，则可以加分。（例如，让程序显示数据库*foo*归 johndoe 所有，而数据库*foo2*归 janesmith 所有）一旦用户做出选择，对话框就会将此信息写入该用户的程序配置文件，该文件在正常启动时读取.

可以这样做还是我必须找到一些解决方法，例如让用户首先提供登录名/密码并显示该帐户拥有的数据库列表？这将相对繁琐但容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T20:22:01.993

不登录就*无法*执行 MySql 查询。也就是说，可以创建一个权限非常低的用户。

您可以创建一个具有足够权限的用户来显示数据库列表并以该用户身份运行查询，然后在用户登录后更改连接字符串。

有一个`SHOW DATABASES`授权允许这样做： http: [//dev.mysql.com/doc/refman/5.0/en/privileges-provided.html#priv_show-databases](http://dev.mysql.com/doc/refman/5.0/en/privileges-provided.html#priv_show-databases)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T20:24:59.990

通常，您为应用程序定义一个具有只读权限的用户，并在获取所需信息后将其呈现给用户，然后询问他的凭据。我只是过于简单化了，而不是详细说明这是如何完成的。

# wpf - WPF/XAML - 允许 ComboBox 具有不在 ItemsSource 中的 SelectedValue

> ID：10659195
> 
> 赞同：5
> 
> 时间：2012-05-18T20:20:31.113
> 
> 标签：wpf, xaml, combobox

所以，我有一个客户表，包含客户记录，记录，每个记录都有一个customertype 字段。我还有一个 customertype 表，其中包含 customertype 字段的有效值。

我需要一个 WPF 来做 CRUD。（创建、查看、更新、删除）。

显而易见的解决方案是使用 ComboBox，其 SelectedValue 属性绑定到 customertype 字段，其 ItemsSource 属性绑定到由 customertype 表的查询填充的列表。

问题是，除了你在练习中看到的那种简单问题之外，这不起作用。

当您查看或编辑具有不在 customertype 表中的 customertype 值的客户记录时，就会出现困难。这可能是错误发生的，也可能是因为 customertype 已被弃用并从表中删除。

在这种情况下，WPF 所做的是将 customertype 字段设置为 null，因为 SelectedValue 不在 ItemsSource 列表中。这是一个问题。

如果您只是查看，您应该看到表中的值，无论它是否在列表中。如果您正在编辑，您可以提出一个合理的论点，即您也应该显示表中的值，至少最初是这样，但如果您更改选择，您将无法获得您开始的内容。

那么，有什么想法吗？这是一个几乎在我拥有的每个编辑/查看表单上都会出现的问题，所以我更喜欢在使用时相当干净的东西。（也就是说，考虑到 XAML 中的复杂性选择，我需要处理这些字段之一的每个地方，或者支持我插入的 XAML 以处理这些字段之一的代码中的复杂性，我更喜欢后者。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T20:27:07.483

为此，我建议不要将您的 ItemsSource 直接绑定到 CustomerType 表的内容。相反，合并 Customer Type 表中 Customer Type 项目的 ItemsSource 以及存储在 Customer 记录中但 Customer Type 表中不存在的所有 CustomerType 值。一旦用户从查看进入编辑，更新集合以仅使用 CustomerType 表中的那些项目。当用户进入查看模式时，切换回合并的集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T18:40:43.020

虽然上面的答案有用，但它在每种情况下都产生了大量的代码。并且这个问题作为一般模式存在，列表来自一个地方而所选值来自另一个地方的任何地方。

我还没有决定解决方案，但我最近的尝试显示了希望。

我所做的是从 ComboBox 派生一个新类。为此，我添加了一个新的 DependencyProperty - AddSelectedIfMissing。然后我重写 OnItemsChanged()。在其中，我检查 SelectedValue 是否与 ItemsSource 中任何项目的 SelectedValuePath 字段匹配。

我将 ItemsSource 绑定到 viewmodel 的属性，该属性返回代表有效选择的记录对象集合。我将 SelectedValue 绑定到包含现有值的视图模型的属性。我将 AddSelectedIfMissing 绑定到视图模型的布尔属性，当我想将 SelectedValue 添加到 ItemsSource 时，该属性为真。

当我从视图更改为编辑时，我在绑定到 ItemsSource 的属性上引发 PropertyChanged，因此控件将重新加载它。

我现在所拥有的有一些限制。这取决于能否将 ItemsSource 从 object 转换为 IList，并且能够将每个 item 从 object 转换为我们可以从中获取字段值的已知基类。如果我绑定 SelectedItem 而不是 SelectedValue，它就行不通。

但在这些限制范围内，它运行良好。

# algorithm - 存储快速查询范围的最佳数据结构是什么？

> ID：10659198
> 
> 赞同：1
> 
> 时间：2012-05-18T20:20:53.907
> 
> 标签：algorithm, data-structures, intervals

我有这种情况，我有*N*个时间线，每个时间线都包含块。这些块包含具有特定索引的令牌，并且知道它们的最大和最小令牌索引。还有一个索引将块的第一个索引映射到（时间轴，块）对。这是一个例子：

```
Timeline 1: [1 2 5 8 9 11] [14 17 18 21] [22 23 25 26] ...
Timeline 2: [3 4 6 7 10 12] [13 15 16 19 20 24] [27 28 34 45] ...

Index:
  1 -> timeline 1, block 1
  3 -> timeline 2, block 1
  13 -> timeline 2, block 2
  14 -> timeline 1, block 2
  22 -> timeline 1, block 3
  27 -> timeline 2, block 3 
```

如您所见，没有丢失令牌（没有间隙）。

这些数据结构是我最初拥有的。**优化特定令牌索引查询的最佳替代数据结构是什么？**假设我要检索令牌 19。现在我要做的是：在索引中进行二分搜索以找到每个时间线的好块，然后在每个块内进行完整搜索。使用令牌 19，二分搜索将产生可以包含 19 的块 (1, 2) 和 (2, 2)，然后进行完整的线性搜索以找到令牌 19（这里不可能在块内进行二分搜索，因为令牌有各种大小，尚未包含在任何数据结构中）。

谢谢！

**编辑**：我正在考虑使用包含所有时间线间隔的间隔树。问题是查询仍然会产生许多间隔。另外，与二进制搜索相比，它并没有优化太多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T03:36:58.837

也许您可以使用稀疏空间填充曲线？当您拥有索引时，它是一个减少维度的函数。空间填充曲线是相同的，但它也在索引中添加了空间信息。空间填充曲线或空间索引的另一种数据结构是四叉树。因此，您可以使用四叉树或 kd-tree 进行搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T21:12:35.940

我认为最简单的方法（如果它不占用大量内存空间）是创建一个 blob 值数组，其中 index 是您的查询令牌（19 - 在您的示例中），该值是对应于的 blob 部分它。阵列应该很好，因为你没有差距。构造这个数组是 O(n) 并且在那里搜索是 O(1)。但这只有在查询量比较大的情况下才会带来一些好处，因为现有的结构也已经很好地优化了。（实际上应该在这里进行测试，哪种方式更快。）

构造数组：

```
array = []
foreach ( timeline in timelines ){
  foreach ( block in timeline){
    foreach( token in block ){
      array[token.index] = token.value
    }
  }    
} 
```

如果这太昂贵，请尝试仅保存令牌的时间线编号。这样，当查询到来时，您就不必搜索每个时间线。您所要做的就是获取时间线，二进制搜索一个块，并在一个块内进行简单的前向搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T20:35:52.100

*您可以拥有一个包含t*个指向对象的指针的数组*A*，这些对象包含指向令牌、其时间线和块的指针。如果您可以使用您的语言喜欢的任何机制将引用保存在数组中。如果您不能在块内进行二进制搜索，我不确定您能做什么。

# asp.net - 将参数传递给 ASP .NET 页面

> ID：10659199
> 
> 赞同：3
> 
> 时间：2012-05-18T20:20:54.827
> 
> 标签：asp.net, .net, arguments

所以我最近开始使用 ASP .NET，但我对其他 .NET 框架非常熟悉。我正在处理的应用程序需要将字符串索引作为命令行样式参数。现在在我的 Page 类中，我有一个 const 字符串用作占位符。所以我的问题是两个部分：

1-如何设置我的应用程序内部程序以接收打开页面时传入的参数？

2-如何将该参数传递到页面（尤其是在我使用 VS 2010 时）？

非常感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T20:24:16.617

您将参数传递给带有请求变量的网页（听说过 POST 或 GET 吗？）。最简单的方法是将变量附加到 url 的末尾，如下所示：

`http://localhost/Default.aspx?varname=varvalue&othervarname=othervarvalue`

在您的代码隐藏中，您可以使用`Request.QueryString`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T20:27:29.613

对于 #2：在 VS2010 上的项目配置中，转到“Web”选项卡并将选项设置为具有所需 URL 的特定页面： `http://localhost/Default.aspx?varname=varvalue&othervarname=othervarvalue`

# php - 附加 $_SERVER['HTTP_REFERER']

> ID：10659200
> 
> 赞同：1
> 
> 时间：2012-05-18T20:20:57.117
> 
> 标签：php, url

是否可以在末尾附加一些说明`$_SERVER['HTTP_REFERER']`

所以它添加了类似的东西`?redirected=1`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T20:25:35.157

```
header("Location: ".$SERVER['HTTP_REFERER']."?redirected=1");
die(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T20:29:59.507

引用 url 可能包含另一个参数，所以你必须做这样的事情。

```
<?php
  $refUrl = $SERVER['HTTP_REFERER'];

  if(strpos($refUrl,'?'))
      $refUrl .= '&redirect=1';
  else
      $refUrl .= '?redirect=1';

var_dump($refUrl); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T20:25:47.603

您可以修改每个变量，例如：

```
$_SERVER['HTTP_REFERER'].="?redirected=1"; 
```

# c# - 通过电子邮件传递参数

> ID：10659206
> 
> 赞同：0
> 
> 时间：2012-05-18T20:21:17.463
> 
> 标签：c#, email, mailmessage

许多应用程序使用电子邮件进行帐户验证和其他不同目的。您可以看到这些电子邮件包含将您重定向到带有 url 参数的特定页面的按钮（例如：http://users/1234....）。

`MailMessage`如果我使用实用程序以编程方式构建电子邮件，我该如何执行相同的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T20:26:25.823

基本上你所说的确认是一个过程。所以，例如，

*   在数据库表中创建具有 guid 和 ConfirmationDate 的用户。
*   发送了一封带有链接和 guid 的邮件
*   如果用户单击您设置 ConfirmationDate 的链接
*   如果用户有一个 ConfirmationDate （非空）用户已确认

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T20:24:24.620

将 mail.IsBodyHtml 设置为 true 并使用 HTML。

# android - 如何使用 Adob e Dreamweaver 6 和 phonegap 对数据库驱动的 iOS、Android 等应用程序进行编程？

> ID：10659207
> 
> 赞同：0
> 
> 时间：2012-05-18T20:21:21.973
> 
> 标签：android, ios, database, cordova, dreamweaver

由于我是电话应用程序编程的新手，这可能是一个愚蠢的问题......但我正在尝试开发一个 iOS，也可能是需要内部数据库的 Android 英语 - 阿姆哈拉语词典应用程序。

内部数据库是指应用程序不需要连接到任何网络或 Internet

字典定义最初必须加载到数据库中并随应用程序一起提供

用户可以突出显示/标记定义。所以还有“插入INTO ...”

我将dreamweaver 和phonegap 一起用作开发工具。

1.  我可以选择什么类型的数据库？SQLite，XML，核心数据，...？哪一个是最好的？

2.  我该如何开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T20:53:33.223

Well I assume since you are using phonegap you are looking at developing with html and javascript so I would recommend html5 local storage [here's a link](http://www.aquim.com/web-article-237.html). Or just google html5 local storage or something like that.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T21:01:50.203

我建议您做的第一件事是阅读[PhoneGap 文档](http://docs.phonegap.com/en/1.7.0/index.html)。甚至有一个关于[存储](http://docs.phonegap.com/en/1.7.0/cordova_storage_storage.md.html#Storage)的部分似乎暗示您必须使用 SQL 或 HTML 本地存储的变体

# c# - 如何设计一个类来防止循环依赖在构造前调用派生成员？

> ID：10659208
> 
> 赞同：8
> 
> 时间：2012-05-18T20:21:27.500
> 
> 标签：c#, java, oop, inheritance, circular-dependency

（*我将其标记为 C# 和 Java，因为这两种语言都是同一个问题。*）

说我有这些课程

```
interface IKernel
{
    // Useful members, e.g. AvailableMemory, TotalMemory, etc.
}

class Kernel : IKernel
{
    private /*readonly*/ FileManager fileManager;  // Every kernel has 1 file manager
    public Kernel() { this.fileManager = new FileManager(this); /* etc. */ }

    // implements the interface; members are overridable
}

class FileManager
{
    private /*readonly*/ IKernel kernel;  // Every file manager belongs to 1 kernel
    public FileManager(IKernel kernel) { this.kernel = kernel; /* etc. */ }
} 
```

这种设计的问题在于，一旦`FileManager`尝试在其构造函数中做*任何事情*`kernel`（它可能合理地需要这样做），它将调用尚未调用构造函数的潜在子类实例上的虚拟方法。

*在可以定义真正的构造函数*（而不是初始化程序，如 C#/Java）的语言中，不会出现此问题，因为在调用其构造函数之前，子类甚至不*存在……但在这里，这个问题发生了。*

那么什么是最好/正确的设计/实践，以确保不会发生这种情况？

### 编辑：

我不一定说我*需要*循环引用，但事实是两者都`Kernel`相互依赖`FileManager`。如果您有关于如何在*不*使用循环引用的情况下缓解此问题的建议，那也很棒！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T20:33:48.113

对我来说，这种对象之间的循环依赖很难闻。

我认为您应该决定哪个对象是主要对象，哪个对象是聚合甚至组合的主题。然后在主要对象内部构造次要对象，或者将其作为主要对象的依赖项注入。然后让主对象在辅助对象中注册它的回调方法，它会在需要与“外部世界”通信时调用它们。

如果您决定关系类型是聚合，那么一旦主对象被销毁，它将取消注册所有回调。

如果你使用组合，那么在主要对象被破坏时只破坏次要对象。

这是我的意思的一个例子：

```
class Program
{
    static void Main( )
    {
        FileManager fm = new FileManager( );
        Kernel k = new Kernel( fm );
        fm.DoSomething( 10 );
    }
}

class Kernel
{
    private readonly FileManager fileManager;
    public Kernel( FileManager fileManager )
    {
        this.fileManager = fileManager;
        this.fileManager.OnDoSomething += OnFileManagerDidSomething;
    }

    ~Kernel()
    {
        this.fileManager.OnDoSomething -= OnFileManagerDidSomething;
    }

    protected virtual void OnFileManagerDidSomething( int i )
    {
        Console.WriteLine( i );
    }
}

class FileManager
{
    public event Action<int> OnDoSomething;

    public void DoSomething( int i )
    {
        // ...

        OnDoSomething.Invoke( i );
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T20:41:30.590

就个人而言，我不喜欢循环引用。但是如果你决定离开它们，你可能会增加一些懒惰：

```
interface IKernel
{
    // Useful members, e.g. AvailableMemory, TotalMemory, etc.
}

class Kernel : IKernel
{
    private readonly Lazy<FileManager> fileManager;  // Every kernel has 1 file manager
    public Kernel() { this.fileManager = new Lazy<FileManager>(() => new FileManager(this)); /* etc. */ }

    // implements the interface; members are overridable
}

class FileManager
{
    private /*readonly*/ IKernel kernel;  // Every file manager belongs to 1 kernel
    public FileManager(IKernel kernel) { this.kernel = kernel; /* etc. */ }
} 
```

这里的懒惰让我们确保当查询 FileManager 实例时，IKernel 实现将被完全初始化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T20:53:05.397

If you need to keep pairs of objects, with references to each other, you should provide a utility to build them correctly. Use the Factory pattern, and reduce the complexity of construction by hiding the construction and assembly behind the Factory pattern methods.

In Java, put the constructor in the package, and make the internal component's constructors and initial assignment set up methods "package private"

```
public Kernel newKernel() {
  Kernel kernel = new Kernel();
  Filesystem filesystem = new Filesystem();
  kernel.setFilesystem(filesystem);
  filesystem.setKernel(kernel);
  return kernel;
}

public Filesystem newFilesystem() {
  Kernel kernel = new Kernel();
  Filesystem filesystem = new Filesystem();
  kernel.setFilesystem(filesystem);
  filesystem.setKernel(kernel);
  return filesystem;
} 
```

A similar idea can be had in C++ with thoughtful use of private and friend.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T17:27:33.140

虽然没有任何声明性支持强制执行这样的构造，但我建议定义（通过注释）一类受以下约束的泄漏安全构造函数和参数：

1.  泄漏安全构造函数只能使用泄漏安全参数来调用嵌套的泄漏安全构造函数（其中参数也必须作为泄漏安全传递），或将它们存储在自己的字段中。
2.  泄漏安全构造函数不能取消引用任何泄漏安全参数，也不能取消引用从泄漏安全参数加载的任何字段。
3.  泄漏安全构造函数不能将正在构造的对象传递给任何地方，除非作为泄漏安全参数传递给嵌套的泄漏安全构造函数。
4.  通过调用传递泄漏安全参数构造的对象或正在构造的对象到泄漏安全构造函数将受到泄漏安全参数的所有约束。

如果遵守这样的约束，应该有可能让泄漏安全的构造函数产生相互引用的对象，以一种可以静态证明的方式，永远不会在它们的构造函数之外取消引用任何部分构造的对象（`Foo`可以将正在构造的对象传递给 的构造函数`Bar`，但是如果该构造函数既不取消引用传入的对象，也不将其暴露给任何可能这样做的代码，也不将其保留在自身之外的任何地方，那么它可以被取消引用的唯一方法是取消引用 ; 的新创建的实例，`Bar`如果`Foo`' 的构造函数不这样做，它将被取消引用，直到`Foo`' 的构造函数返回）。

# android - Android - 根据周围的瓷砖确定瓷砖位图

> ID：10659209
> 
> 赞同：2
> 
> 时间：2012-05-18T20:21:30.613
> 
> 标签：android, tiles, terrain, procedural-generation

我一直在研究基于图块的地形生成系统，但遇到了一些障碍。我希望创建一系列过渡瓷砖来标记水和陆地之间的过渡，并且无法找出一种有效的方法来确定哪个瓷砖应该是哪个瓷砖。

我的第一次尝试（如下图所示）基本上将通过一系列 if 语句运行每个图块，以确定它应该是哪个图块。这样做的主要问题是，对于 100 块 x 100 块的世界地图，它将运行 10,000 次迭代，访问 8 个周围块上的数据（80,000 次操作），然后运行多达四个 if 语句（320,000操作）。在我看来，这将是非常低效和缓慢的。

这种方法的好处是它只能在陆地单元格上运行，并且会首先检查以确保它与至少一个水单元格相邻，这将大大减少所需的操作次数。

这是我绘制的基本图表，它遍历周围的瓷砖并挑选出合适的瓷砖。

![尝试 1 布局](../Images/ebf06ac6ab4f981e6c1f52e284ebbea9.png)

我的第二个想法是基本上开始穿过瓷砖，一旦我碰到沿海瓷砖，就沿着两个方向沿着海岸走，边走边分配瓷砖。此方法将确保在开始之前尚未计算出图块。这样做的问题是，一，我无法弄清楚它是如何工作的，二，结果我不知道它的效率有多高。

一位朋友告诉我第三种可能有效的方法。它获取水瓷砖并将它们设置为 0，将它们设置为 1。然后，它获取周围的瓷砖并将它们从 1 到 9 编号。从那里遍历它们并在 0 和 1 上创建一个字符串：

```
W   W   W
W   L   L
L   L   L 
```

将是：000011111

0*2^0 + 0*2^1 + 0*2^2 + 0*2^3 + 1*2^4 + 1*2^5 + 1*2^6 + 1*2^7 + 1* 2^8

0*1 + 0*2 + 0*4 + 0*8 + 1*16 + 1*32 + 1*64 + 1*128 + 1*126 = 496

理论上，我会为与该组合关联的图块分配数字 496 并加载它作为响应。问题是每条边都有 13 或 14 种组合，这会导致它的使用。例如：

```
W   W   L           L   W   W
W   L   L    and    W   L   L   Both need the same tile as the above example, but
L   L   L           L   L   L   produce different numbers. 
```

从本质上讲，要使这种方法起作用，我必须找出会导致特定瓷砖的每种可能的水和土地组合的最终数字，然后通过一系列 ifs / case 运行最终数字以挑选出适当的位图。这将与 if 块一样或更多低效。

因此，在所有这一切中提出实际问题。有谁知道这样做的另一种方法，或者使这些方法中的任何一种更有效的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-27T16:22:12.853

实际上，我只是写了我开始制作的游戏的这一部分。我花了一点时间来思考解决方案，但当我这样做时，我不敢相信我没有更早地想到它。如果您考虑一下，每个图块都有 8 个可能的“连接”：

```
1 2 3
4 x 5
6 7 8 
```

每个连接都可以包含它连接到的磁贴，也可以不包含。所以这很甜蜜，这意味着它是一个非常二进制的系统，我们可以用 8 位（或 1 个字节）表示每个组合，我们知道每个组合都是从 0-255 顺序表示的，所以我们可以很容易地使用查找表（嗯，查找数组）来找到正确的图像。虽然这确实意味着有 256 种可能的连接组合（不是 256 种不同的图像提醒你，就像你上面所说的不同的组合将使用相同的平铺图形）我们必须生成。我所做的（也是我推荐的）是编写了一个小脚本来生成查找数组。

现在维护这一点的方法是每个瓦片都有一个 8 长度的瓦片数组，它连接到它。加载地图时，边走边填写图块的“连接”数组。一旦瓦片具有所有连接（或一旦加载了所有瓦片），则计算每个瓦片的“连接掩码”或“连接值”（这是查找数组的索引）。这是通过循环“连接”数组并使用位移构建掩码来完成的。之后，您应该只需要再次进行非常少的处理，并且仅在添加/删除/更改的单个图块及其连接的 8 个可能的图块上进行。

希望这可以帮助。如果您需要更多详细信息或示例代码，我可以稍后提供！

# python - 如何确保每个子类都获得其父类属性的新副本（在 Python 中）？

> ID：10659211
> 
> 赞同：0
> 
> 时间：2012-05-18T20:21:39.903
> 
> 标签：python, oop, inheritance, pass-by-reference, mutable

我有一个基类，它有一个空白列表作为类属性。许多子类继承自这个基类。目的是将此列表类属性与类方法结合使用，以允许每个子类跟踪其自己的特定实例集。每个类都应该有一个单独的列表，其中只包含它自己的实例。

当我对这个继承方案进行简单的实现时，在调试期间我注意到实际上每个子类都与类属性共享完全相同的列表，并且我再次对 python 通过引用传递列表这一事实感到有趣。仔细观察，似乎父类的每个类属性、方法和值都只是通过引用传递给每个子类，并且除非在子类的定义中明确覆盖特定属性，否则这不会改变。

在创建子项时重新初始化子项的类变量的最佳方法是什么？理想情况下，我想要一种方法来确保每个孩子都以 cls.instances 属性开头，该属性是一个唯一的空白列表，其中任何孩子都没有额外的代码。否则，我首先要为继承而烦恼什么？（不要回答）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T20:45:14.380

没有不尊重@DanielRoseman 和他有见地的回答，但我想我会准确地写出你将如何使用元类来完成我理解你想要完成的事情：

mc.py：

```
class Meta(type):
    def __init__(cls, name, bases, attrs):
        cls.foo = []

class A:
    __metaclass__ = Meta

class B(A):
    pass 
```

鉴于这种：

```
>>> import mc
>>> mc.A.foo
[]
>>> mc.A.foo.append(1)
>>> mc.A.foo
[1]
>>> mc.B.foo
[] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T20:34:25.980

这就是你可能需要进入元类的地方。您的意思是，每次定义新的子类时，都需要一组新的变量。因此，元类是类类型的类：每次定义子类时，您都在实例化元类的新实例。每个元类实例都可以有自己的实例变量，这意味着每个子类都有自己的一组类变量。

[在Marty Alchin 的博客](http://martyalchin.com/2008/jan/10/simple-plugin-framework/)上有一篇关于如何使用元类来做这类事情的精彩文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T20:32:23.727

你的意思是这样的：

```
 >>> class Foo():
    ...   alist = []
    ...   def __init__(self):
    ...     pass
    >>> foo = Foo()
    >>> foo.alist
    []
    >>> Foo.alist
    []
    >>> Foo.alist.append(7)
    >>> Foo.alist
    [7]
    >>> foo.alist
    [7]
    >>> foo2 = Foo()
    >>> foo2.alist
    [7] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T20:35:27.420

我认为您在这里遇到的问题是类实际上是对象，而类成员是类的`type`类型对象的成员，而不是其实例的成员。从这个角度来看，很容易看出为什么子类实际上没有父类级别成员的唯一实例。我过去用来解决此类问题的一种方法是使`.instances`父类中的类变量成为字典，然后在父类的`__init__`方法中，在存储在`.instances`字典中的键下的列表中对每个子类的实例进行编目是`self`类型。请记住，即使在父范围内，执行`type()`on`self`也会给您直接创建对象的类型，而不是本地范围的类型。

# firefox - 如何将下拉菜单添加到 Firefox 插件 sdk 驱动的插件工具栏按钮？

> ID：10659221
> 
> 赞同：3
> 
> 时间：2012-05-18T20:22:53.480
> 
> 标签：firefox, button, menu

我使用[https://github.com/erikvold/toolbarbutton-jplib/](https://github.com/erikvold/toolbarbutton-jplib/)包将一个工具栏按钮从 addon-sdk 插件添加到 firefox 导航栏。是否可以向此按钮添加下拉菜单（据我所知没有简单的方法）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T04:06:56.610

我就是这样做的；希望对你有效。

```
var winUtils = require("window-utils");

var delegate = {
    onTrack: function(window) {
        if(window.location != "chrome://browser/content/browser.xul") {
            // console.log("=> win location false");
            return;
        }

        console.log("window tracked");

        var document = window.document;
        var navBar = document.getElementById('nav-bar');

        var btn = document.createElement('toolbarbutton');  
        btn.setAttribute('id', 'button'); 
        btn.setAttribute('type', 'menu-button');  
        btn.setAttribute('class', 'toolbarbutton-1'); 
        btn.setAttribute('image', 'http://www.facebook.com/favicon.ico');

        btn.addEventListener('command', function() {
        console.log("this=" + this.id); 
                    // your callback code here
                }
        , false);

        var menupopup = document.createElement('menupopup');
        menupopup.setAttribute('id', 'menupopup');
        menupopup.addEventListener('command', function(event) {
            // TODO your callback
          }
        , false);

        //menu items
        var menuitem1 = document.createElement('menuitem');
        menuitem1.setAttribute('id', 'menuitem1');
        menuitem1.setAttribute('label', 'Menu item1');
        menuitem1.setAttribute('class', 'menuitem-iconic');
        menuitem1.addEventListener('command', function(event) {
                // CODE
            }
        , false);
 }
  winUtils.WindowTracker(delegate); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-14T10:00:08.863

此代码需要多几行才能实际工作：

```
var delegate = {
onTrack: function(window) {

    if(window.location != "chrome://browser/content/browser.xul") {
        // console.log("=> win location false");
        return;
    }

    var document = window.document;
    var navBar = document.getElementById('nav-bar');

    var btn = document.createElement('toolbarbutton');
    btn.setAttribute('id', 'button');
    btn.setAttribute('type', 'menu-button');
    btn.setAttribute('class', 'toolbarbutton-1');
    btn.setAttribute('image', 'http://www.facebook.com/favicon.ico');

    btn.addEventListener('command', function() {
            console.log("this=" + this.id);
            // your callback code here
        }
        , false);

    var menupopup = document.createElement('menupopup');
    menupopup.setAttribute('id', 'menupopup');
    menupopup.addEventListener('command', function(event) {
            // TODO your callback
        }
        , false);

    //menu items
    var menuitem1 = document.createElement('menuitem');
    menuitem1.setAttribute('id', 'menuitem1');
    menuitem1.setAttribute('label', 'Menu item1');
    menuitem1.setAttribute('class', 'menuitem-iconic');
    menuitem1.addEventListener('command', function(event) {
            // CODE
        }
        , false);

    menupopup.appendChild(menuitem1);
    btn.appendChild(menupopup);
    navBar.appendChild(btn);

    console.log("window tracked");

    }
};

//let utils = require('api-utils/window-utils');
let utils = require('sdk/deprecated/window-utils'); // for new style sdk
utils.WindowTracker(delegate); 
```

# objective-c - NKAssetDownload 一次可以下载多少次？

> ID：10659237
> 
> 赞同：1
> 
> 时间：2012-05-18T20:23:58.397
> 
> 标签：objective-c, ios, cocoa-touch, newsstand-kit

是否可以一次进行多个下载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T13:42:36.360

当您向 NKAssetDownload 发送 downloadWithDelegate 消息时，Newsstand 框架只需将其添加到其队列中即可下载。之后，开发人员无法控制何时开始下载。据我的经验，它不会同时开始 2 次下载。当一个完成时，它会从队列中启动另一个。我不知道为什么以这种方式实现但没有并行下载。

# c - 存在表中的键索引搜索

> ID：10659238
> 
> 赞同：3
> 
> 时间：2012-05-18T20:24:10.207
> 
> 标签：c

我对我书中的一个陈述有疑问。

谈到符号表中的键索引搜索，在某个点上它说：“*如果没有记录（但只有键），我们可以使用位表。在这种情况下，符号表称为存在表，因为我们可以将第 k 位作为表中是否存在 k 键的指标。例如，在 32 位计算机上使用 313 字表，我们可以使用这种方法快速确定是否已分配给定的 4 位内部电话号码。* "

好吧，我知道单词是什么，因此在这种情况下，存在表应该是一个 10.016 位的表。但是这是什么意思？4位电话号码的事实与它有什么关系？那么，当记录对应于键时，如何实现具有键索引搜索的符号表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T20:33:07.653

您可以使用 10000 位的位表（每个位对应一个电话号码），适合 313 个字节（10000/32 = 312.5 ~= 313）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T20:33:24.530

有 9000 个四位数字（以 10 为底，十进制）和 10000 个（非负）数字，最多有四位数字，所以一个超过 10,000 位的表足以表明每个数字是否存在（是位没有`n`设置吗？）。对于五位数字（其中 90,000 个），您需要一个更大的表格。

由于位表只能告诉您“是的，我们有”或“不，我们没有”，因此如果您需要任何超出此范围的信息，则无法使用它。但是，如果这就是您需要知道的全部内容，那么任何将键映射到表（数组）中的索引都可以让您访问该信息，并紧凑地存储。在电话号码的情况下，映射是微不足道的。

# c# - C# 电子邮件到 gmail 标记为垃圾邮件，但来自雷鸟客户端的邮件正常发送（非垃圾邮件）

> ID：10659240
> 
> 赞同：5
> 
> 时间：2012-05-18T20:24:16.367
> 
> 标签：c#, email, smtp, spam

我有一个小型 vps，安装了 mailenable 邮件服务器。我已经检查了 PTR 、反向 DNS 和服务器配置，一切正常。

如果我从 Thunderbird 向 gmail 地址发送一封电子邮件，一切正常并且邮件没有被标记为垃圾邮件，这是标题：

```
Delivered-To: antani2@gmail.com
Received: by 10.60.38.104 with SMTP id f8csp54812oek;
Fri, 18 May 2012 13:04:27 -0700 (PDT)
Received: by 10.216.138.130 with SMTP id a2mr7849178wej.35.1337371466927;
Fri, 18 May 2012 13:04:26 -0700 (PDT)
Return-Path: <mailrobot@charterino.com>
Received: from mail.charterino.com (mail.charterino.com. [95.110.146.72])
by mx.google.com with ESMTP id m60si12747577wee.64.2012.05.18.13.04.26;
Fri, 18 May 2012 13:04:26 -0700 (PDT)
Received-SPF: pass (google.com: best guess record for domain of mailrobot@charterino.com designates 95.110.146.72 as permitted sender) client-ip=95.110.146.72;
Authentication-Results: mx.google.com; spf=pass (google.com: best guess record for domain of mailrobot@charterino.com designates 95.110.146.72 as permitted sender) smtp.mail=mailrobot@charterino.com
Received: from [192.168.1.132] ([2.227.153.144]) by charterino.com with MailEnable ESMTP; Fri, 18 May 2012 22:01:40 +0200
Message-ID: <4FB6AB4A.8000508@charterino.com>
Date: Fri, 18 May 2012 22:04:26 +0200
From: "mailrobot@charterino.com" <mailrobot@charterino.com>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20120428 Thunderbird/12.0.1
MIME-Version: 1.0
To: antani2@gmail.com
Subject: Prova
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit 
```

当我从 ac# 应用程序发送电子邮件时，我的邮件被标记为垃圾邮件，这是标题：

```
Delivered-To: antani@gmail.com
Received: by 10.229.39.205 with SMTP id h13csp119310qce;
Fri, 18 May 2012 12:09:26 -0700 (PDT)
Received: by 10.180.82.136 with SMTP id i8mr4157077wiy.19.1337368166529;
Fri, 18 May 2012 12:09:26 -0700 (PDT)
Return-Path: <mailrobot@charterino.com>
Received: from mail.charterino.com (mail.charterino.com. [95.110.146.72])
by mx.google.com with ESMTP id h11si2000858wiw.14.2012.05.18.12.09.26;
Fri, 18 May 2012 12:09:26 -0700 (PDT)
Received-SPF: pass (google.com: best guess record for domain of mailrobot@charterino.com designates 95.110.146.72 as permitted sender) client-ip=95.110.146.72;
Authentication-Results: mx.google.com; spf=pass (google.com: best guess record for domain of mailrobot@charterino.com designates 95.110.146.72 as permitted sender) smtp.mail=mailrobot@charterino.com
Message-Id: <4fb69e66.2b4cb40a.29ee.ffffa974SMTPIN_ADDED@mx.google.com>
Received: from win18864 ([::1]) by charterino.com with MailEnable ESMTP; Fri, 18 May 2012 21:06:44 +0200
MIME-Version: 1.0
From: mailrobot@charterino.com
To: antani@gmail.com 
```

这可能是由不包含域 @charterino.com 的 messageid 引起的？我还尝试从我的应用程序中覆盖邮件标头中的消息 ID，但服务器会覆盖它。

```
message.Headers.Add("Message-Id","<values>@charterino.com"); 
```

我不知道这是否是问题但是....为什么雷鸟可以覆盖消息ID而我不能？

我正在使用 System.Net.Mail。

任何想法？？

添加“日期”和“主题”字段后，这是新标题，添加

```
message.Headers.Add(String.format("<date format>",DateTime.Now.ToString()));

Delivered-To: antani@gmail.com
Received: by 10.229.39.205 with SMTP id h13csp155984qce;
        Sat, 19 May 2012 06:20:49 -0700 (PDT)
Received: by 10.216.138.130 with SMTP id a2mr9265313wej.35.1337433648907;
        Sat, 19 May 2012 06:20:48 -0700 (PDT)
Return-Path: <mailrobot@charterino.com>
Received: from mail.charterino.com (mail.charterino.com. [95.110.146.72])
        by mx.google.com with ESMTP id p8si14856169weh.0.2012.05.19.06.20.48;
        Sat, 19 May 2012 06:20:48 -0700 (PDT)
Received-SPF: pass (google.com: best guess record for domain of mailrobot@charterino.com designates 95.110.146.72 as permitted sender) client-ip=95.110.146.72;
Authentication-Results: mx.google.com; spf=pass (google.com: best guess record for domain of mailrobot@charterino.com designates 95.110.146.72 as permitted sender) smtp.mail=mailrobot@charterino.com
Message-Id: <4fb79e30.8878d80a.4344.ffff961dSMTPIN_ADDED@mx.google.com>
Received: from win18864 ([::1]) by charterino.com with MailEnable ESMTP; Sat, 19 May 2012 15:18:08 +0200
Subject: Invio password smarrita Charterino.com
MIME-Version: 1.0
From: mailrobot@charterino.com
To: antani@gmail.com
Date: 19 May 2012 15:18:08 +0200
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: base64 
```

没有任何变化，邮件被标记为垃圾邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:32:04.540

尝试 ：

```
message.IsBodyHtml = true; 
message.Body = htmlView; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-18T21:44:31.387

您缺少标题中的“日期：”字段。

# html - 创建单选按钮框的策略：

> ID：10659251
> 
> 赞同：0
> 
> 时间：2012-05-18T20:25:19.927
> 
> 标签：html, css

[这是我从这个漂亮的网站](http://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/)修改的一些代码：

[http://jsfiddle.net/Ajhka/](http://jsfiddle.net/Ajhka/)

我的所有元素都用复选框图像、..字体、颜色等设置样式。

我只是不知道如何进行布局。我没有策略。但我想要的只是与小提琴略有不同。

我希望标题和内容文本像它们一样对齐，但我将它们放在复选框的右侧，标题与复选框的高度相同。这将是最有意义的，也是最易读的。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T20:37:30.487

我已经用一个工作示例更新了你的小提琴

[http://jsfiddle.net/Ajhka/2/](http://jsfiddle.net/Ajhka/2/)

看起来这就是你要找的东西。第一行是复选框旁边的标题及其下方的说明。

另外两个是复选框旁边的所有文本。如果您想让所有其他人作为示例第 1 行。将第`<div style="clear: both"></div>`1 行向上移动。

如果您希望描述文本与标题文本对齐。`margin-left`在您的元素上使用`<p>`以对齐它或将其全部放在`<table>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T20:45:59.327

这是我的版本：http: [//jsfiddle.net/Ajhka/5/](http://jsfiddle.net/Ajhka/5/)

我根本没有改变你的 CSS - 只是 HTML。

```
<form id="privacy">
    <div>
        <input type="radio" id="radio1" name="rdo">
        <label for="radio1"></label>
        <span class="privacy_title">Normal</span>
        <span class="privacy_content">When you add a bookmarks it is posted to the feed.  You have a public page which can be viewed by non-members.</span>
    </div>
    <div>
        <input type="radio" id="radio2" name="rdo">
        <label for="radio2"></label>
        <span class="privacy_title">Private</span>
        <span class="privacy_content">The bookmarks you add are not posted to the feed.  You do not have a public page.</span>
    </div>
    <div>
        <input type="radio" id="radio3" name="rdo">
        <label for="radio3"></label>
        <span class="privacy_title">Secret</span>
        <span class="privacy_content">Same as private and all of your data is encrypted using NSA approved algorithms.</span>
    </div>
</form> 
```

为了得到这个布局，我把你的`<p>`标签换成了`<span>`. 然后我将每组收音机/标题/文本包装在一个`<div>`. 如果您愿意，可以使用 CSS 稍微调整间距。

# eclipse - pydev - 在 eclipse indigo 中设置一个现有的 python27 项目，其中包含 dll 和嵌套的源文件夹

> ID：10659253
> 
> 赞同：0
> 
> 时间：2012-05-18T20:25:31.657
> 
> 标签：eclipse, python-2.7, pydev

我正在尝试在 Windows 7 Pro SP1 x64 上使用 pydev 在 Eclipse Indigo 中设置一个项目。该项目存在于我的驱动器中（通过 tortoise svn 下载）并具有以下结构：

```
root\
 launcher.pyw
 settings.ini
 modules\
  __init__.py
  module1.py
  module2.py
  ...
  more_modules\
   __init__.py
   moduleA.py
   moduleB.py
   ...
  compiled\
   1.dll
   2.dll
   ... 
```

我已经在 Eclipse 中成功导入了项目——将 root/ 指定为项目文件夹——当我右键单击 launcher.pyw 并运行该文件时，程序运行正常（它是一个 gui 应用程序）。我有 2 个（主要）问题：

1.  我希望能够正常运行项目（告诉 eclipse，当我运行项目时，我实际上是指运行 launcher.pyw）——当我右键单击项目 > 运行方式 > Python-unit-test 时，唯一的选项是

2.  比如说，我在 more_modules\moduleA.py 中有类似的东西`from .. import module1`显示为错误 - 那么我应该如何正确设置它？

也不确定 dlls 文件夹——也不确定代码分析——显然我必须打开一个文件才能看到错误——但那些可能属于另一个问题

项目sourceforge页面是： http: [//oblivionworks.svn.sourceforge.net/viewvc/oblivionworks/Programs/Wrye%20Bash/](http://oblivionworks.svn.sourceforge.net/viewvc/oblivionworks/Programs/Wrye%20Bash/)

根/是 Mopy/

**编辑**：从我的评论中移动了图片：

![在此处输入图像描述](../Images/9c888f69fa5786d7adc116945e300f93.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T15:58:24.497

关于启动，您只需打开文件并按 F9 即可运行它。之后，如果您已在首选项中设置重新运行上次启动（请参阅以下说明： http: [//pydev.org/manual_101_run.html](http://pydev.org/manual_101_run.html)），您只需按 Ctrl+F11 即可重新运行它。

我查看了您的 sf 页面，并注意到您没有提交 .project 和 .pydevproject 文件（请提交，以便使用 PyDev 的任何人都可以直接进行配置）。

关于代码分析中的导入错误，如果您能真正提供真实示例，那就太好了（根据您的描述，错误是您在模块末尾有一个可能不应该存在的“.py” ，但它可能只是一个描述......如果它运行并且代码分析没有得到它，请使用该用例创建一个项目并将其附加到 pydev sf 跟踪器的错误报告中）。

至于代码分析，通常你确实必须打开一个文件才能看到错误，但你也可以右键单击一个文件夹并选择 pydev > code analysis 它会对该文件夹下的所有文件进行代码分析是你的 pythonpath 的一部分。

# json - 收缩/剥离给定的 JSON 对象

> ID：10659257
> 
> 赞同：0
> 
> 时间：2012-05-18T20:25:54.497
> 
> 标签：json, json.net

一个 .net 服务从 twitter 给我这个，我只需要大约五个字段，我已经做了 JSON 给，它只是 JSON 对象的数组可能非常大，似乎没有必要提供一个大的 JSON 文件到客户端而不是一个小对象，例如，目的只在 JSON 中包含一个对象，可能很多.. 问题是如何在将它提供到 js 文件中之前缩小，所以以某种后端方式解析，所以只提供我需要的属性。

```
var twitter_peeps = {
twitterFeedData:
 [{
    "in_reply_to_user_id_str":null,
    "truncated":false,
    "contributors":null,
    "created_at":"Fri May 18 19:20:34 +0000 2012",
    "in_reply_to_screen_name":null,
    "favorited":false,
    "geo":null,
    "user":{
       "id":16819632,
       "verified":false,
       "default_profile":true,
       "profile_background_color":"C0DEED",
       "statuses_count":8595,
       "following":true,
       "time_zone":"Central Time (US & Canada)",
       "profile_background_image_url":"http:\/\/a0.twimg.com\/images\/themes\/theme1\/bg.png",
       "profile_image_url":"http:\/\/a0.twimg.com\/profile_images\/62250922\/Garrett_and_Michael_8_X_10_2_22-54-34_normal.jpg",
       "utc_offset":-21600,
       "profile_link_color":"0084B4",
       "followers_count":12883,
       "listed_count":542,"name":"Garrett Weber-Gale",
       "notifications":false,
       "protected":false,"id_str":"16819632",
       "profile_use_background_image":true,
       "screen_name":"G_WeberGale",
       "is_translator":false,
       "profile_text_color":"333333",
       "profile_image_url_https":"https:\/\/si0.twimg.com\/profile_images\/62250922\/Garrett_and_Michael_8_X_10_2_22-54-34_normal.jpg",
       "friends_count":3758,
       "description":"Co-founder AthleticFoodieTM. High blood pressure warrior. In love w food\/cooking! Working 2 get better @ everything",
       "profile_background_image_url_https":"https:\/\/si0.twimg.com\/images\/themes\/theme1\/bg.png",
       "default_profile_image":false,
       "url":"http:\/\/www.athleticfoodie.com",
       "profile_sidebar_border_color":"C0DEED",
       "favourites_count":20,
       "created_at":"Fri Oct 17 03:35:09 +0000 2008",
       "contributors_enabled":false,
       "geo_enabled":true,
       "profile_background_tile":false,
       "lang":"en","profile_sidebar_fill_color":"DDEEF6",
       "show_all_inline_media":false,
       "follow_request_sent":false,
       "location":"Austin, Texas"
    },
    "retweet_count":0,
    "coordinates":null,
    "in_reply_to_user_id":null,
    "source":"\u003Ca href=\"http:\/\/www.hootsuite.com\" rel=\"nofollow\"\u003EHootSuite\u003C\/a\u003E",
   "in_reply_to_status_id_str":null,
   "id_str":"203565761040629760",
   "place":null,
   "in_reply_to_status_id":null,
   "id":203565761040629760,
   "possibly_sensitive":false,
   "retweeted":false,
   "text":"Awesome! Good for you:) \n\nRT @ATXglutenfree: My #startup, Locate Special Diet, has officially launched! http:\/\/t.co\/KyeDWZYj"
 }]
};

var twitter_peeps = {
twitterFeedData:
  [{
    "created_at":"Fri May 18 19:20:34 +0000 2012",
    "user":{
         "profile_image_url":"http:\/\/a0.twimg.com\/profile_images\/62250922\/Garrett_and_Michael_8_X_10_2_22-54-34_normal.jpg",
         "screen_name":"G_WeberGale",
    },
    "id_str":"203565761040629760",
    "text":"Awesome! Good for you:) \n\nRT @ATXglutenfree: My #startup, Locate Special Diet, has officially launched! http:\/\/t.co\/KyeDWZYj"
  }]
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T04:26:23.590

您可以使用[Json.NET](http://json.codeplex.com/)将来自 Web 服务的响应解析为 JArray。然后，您可以从您需要的响应中选择唯一需要的数据。您还可以创建一个包含所需属性的自定义对象，以将部分响应反序列化为。

下面是一个示例，您手动将自定义对象加载到响应列表中：

```
string json = "{\n\"twitterFeedData\":\n [{\n \"in_reply_to_user_id_str\":null,\n \"truncated\":false,\n \"contributors\":null,\n \"created_at\":\"Fri May 18 19:20:34 +0000 2012\",\n \"in_reply_to_screen_name\":null,\n \"favorited\":false,\n \"geo\":null,\n \"user\":{\n \"id\":16819632,\n \"verified\":false,\n \"default_profile\":true,\n \"profile_background_color\":\"C0DEED\",\n \"statuses_count\":8595,\n \"following\":true,\n \"time_zone\":\"Central Time (US & Canada)\",\n \"profile_background_image_url\":\"http:\\/\\/a0.twimg.com\\/images\\/themes\\/theme1\\/bg.png\",\n \"profile_image_url\":\"http:\\/\\/a0.twimg.com\\/profile_images\\/62250922\\/Garrett_and_Michael_8_X_10_2_22-54-34_normal.jpg\",\n \"utc_offset\":-21600,\n \"profile_link_color\":\"0084B4\",\n \"followers_count\":12883,\n \"listed_count\":542,\"name\":\"Garrett Weber-Gale\",\n \"notifications\":false,\n \"protected\":false,\"id_str\":\"16819632\",\n \"profile_use_background_image\":true,\n \"screen_name\":\"G_WeberGale\",\n \"is_translator\":false,\n \"profile_text_color\":\"333333\",\n \"profile_image_url_https\":\"https:\\/\\/si0.twimg.com\\/profile_images\\/62250922\\/Garrett_and_Michael_8_X_10_2_22-54-34_normal.jpg\",\n \"friends_count\":3758,\n \"description\":\"Co-founder AthleticFoodieTM. High blood pressure warrior. In love w food\\/cooking! Working 2 get better @ everything\",\n \"profile_background_image_url_https\":\"https:\\/\\/si0.twimg.com\\/images\\/themes\\/theme1\\/bg.png\",\n \"default_profile_image\":false,\n \"url\":\"http:\\/\\/www.athleticfoodie.com\",\n \"profile_sidebar_border_color\":\"C0DEED\",\n \"favourites_count\":20,\n \"created_at\":\"Fri Oct 17 03:35:09 +0000 2008\",\n \"contributors_enabled\":false,\n \"geo_enabled\":true,\n \"profile_background_tile\":false,\n \"lang\":\"en\",\"profile_sidebar_fill_color\":\"DDEEF6\",\n \"show_all_inline_media\":false,\n \"follow_request_sent\":false,\n \"location\":\"Austin, Texas\"\n },\n \"retweet_count\":0,\n \"coordinates\":null,\n \"in_reply_to_user_id\":null,\n \"source\":\"\\u003Ca href=\\\"http:\\/\\/www.hootsuite.com\\\" rel=\\\"nofollow\\\"\\u003EHootSuite\\u003C\\/a\\u003E\",\n \"in_reply_to_status_id_str\":null,\n \"id_str\":\"203565761040629760\",\n \"place\":null,\n \"in_reply_to_status_id\":null,\n \"id\":203565761040629760,\n \"possibly_sensitive\":false,\n \"retweeted\":false,\n \"text\":\"Awesome! Good for you:) \\n\\nRT @ATXglutenfree: My #startup, Locate Special Diet, has officially launched! http:\\/\\/t.co\\/KyeDWZYj\"\n }]\n}";

JObject obj = JObject.Parse(json);
JArray arr = JArray.Parse(obj["twitterFeedData"].ToString());

List<TwitterResponse> responses = new List<TwitterResponse>();

foreach (var item in arr)
{

   TwitterResponse tr = new TwitterResponse()
   {
       CreatedAt = item["created_at"].Value<string>(),
       IdStr = item["id_str"].Value<string>(),
       Text = item["text"].Value<string>(),
       User = new User() { 
           ProfileImageUrl = item["user"]["profile_image_url"].Value<string>(),
           ScreenName = item["user"]["screen_name"].Value<string>()
       }
   };

   responses.Add(tr);
}

class TwitterResponse
{
    public string CreatedAt { get; set; }
    public string Text { get; set; }
    public string IdStr { get; set; }
    public User User { get; set; }
}
class User
{
    public string ProfileImageUrl { get; set; }
    public string ScreenName { get; set; }
} 
```

# sql - Where 子句中的 SQL CASE？

> ID：10659263
> 
> 赞同：1
> 
> 时间：2012-05-18T20:26:32.003
> 
> 标签：sql, sql-server, case

我有两个可选参数empName、empLoc。这两个参数都可以为 null、空或具有某些值。如果两者都有值，我将必须获取所有值，如果 empName 有值，那么我只需要获取 empName 等于传递的参数@empName 的值，并且与 @empLoc 相同。我知道我可以在同一个存储过程中编写单独的 sql，但我想使用 CASE 子句来完成，因为它会保存大部分重复的代码。但是我在设置查询时遇到问题。我知道这是 CASE 条款。这是我的查询的样子：

```
SELECT 
     EmpID,
     EmpDept
FROM Employee
WHERE TimeStamp = @timeStamp
 **AND (CASE
        WHEN DATALENGTH(@empName) > 0 THEN EmployeeName LIKE '%' +@empName+'%'
      ELSE
         EmployeeLocation LIKE '%' +@empLoc+'%'
      END)** 
```

注意：我已经对这些参数进行了空检查。此外，仅当 @empName 或 @empLoc 具有某些值时，此查询才会运行。

任何建议如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T20:38:56.010

实际上，您必须将 DATALENGTH(@empName) <= 0 放在 OR 的第二部分，因为 CASE 意味着异或。所以正确的应该是：

```
SELECT 
     EmpID,
     EmpDept
FROM Employee
WHERE TimeStamp = @timeStamp
AND 
(
    (DATALENGTH(@empName) > 0 AND EmployeeName LIKE '%' +@empName+'%')
      OR
    (DATALENGTH(@empName) <= 0 AND EmployeeLocation LIKE '%' +@empLoc+'%')
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T20:36:11.703

`CASE`是一个返回值的表达式：

```
where TimeStamp = @timeStamp and
  CASE WHEN DATALENGTH(@empName) > 0 AND EmployeeName LIKE '%' +@empName+'%' THEN 1
    WHEN EmployeeLocation LIKE '%' +@empLoc+'%' THEN 1
    ELSE 0
    END = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T23:26:37.460

如果要修剪空间，可以使用 LEN 功能

```
SELECT DATALENGTH(' ') --Result is 1
SELECT LEN(' ') -- Result is 0 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-18T20:35:24.620

你不需要`case when`为这个问题声明

```
SELECT 
     EmpID,
     EmpDept
FROM Employee
WHERE TimeStamp = @timeStamp
 AND
    ( ( DATALENGTH(@empName) > 0 AND EmployeeName LIKE '%' +@empName+'%')
      OR
      ( DATALENGTH(@empName) = 0 AND  EmployeeLocation LIKE '%' +@empLoc+'%')) 
```

# javascript - 你如何在 node.js 中共享 EventEmitter？

> ID：10659266
> 
> 赞同：25
> 
> 时间：2012-05-18T20:26:50.410
> 
> 标签：javascript, node.js, eventemitter

我想从一个文件/模块/脚本发出事件并在另一个文件/模块/脚本中收听它们。如何在不污染全局命名空间的情况下在它们之间共享发射器变量？

谢谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2016-09-25T17:22:54.133

@srquinn 是正确的，您应该使用共享的单个实例：

**事件总线.js：**

```
const EventEmitter = require('events');
const emitter = new EventEmitter();

emitter.on('uncaughtException', function (err) {
    console.error(err);
});

module.exports = emitter; 
```

**用法：**

```
var bus = require('../path/to/eventBus');

// Register event listener
bus.on('eventName', function () {
    console.log('triggered!');
});

// Trigger the event somewhere else
bus.emit('eventName'); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-18T21:08:28.887

因此，您可以将参数传递给 require 调用：

```
var myModule = require('myModule')(Events) 
```

然后在“myModule”中

```
module.exports = function(Events) {
    // Set up Event listeners here
} 
```

话虽如此，如果您想共享一个事件发射器，请创建一个发射器对象，然后在 require 调用中传递给您的“文件/模块/脚本”。

## 更新：

虽然是正确的，但这是一种代码味道，因为您现在将模块紧密耦合在一起。相反，请考虑使用每个模块都需要的集中式事件总线。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-02-07T14:01:26.240

为什么不使用全局流程对象的 EventEmitter 呢？

```
process.on('customEvent', function(data) {
  ...
});

process.emit('customEvent', data); 
```

优点：您可以禁用或完全删除模块（例如跟踪器），而无需删除路线中的所有跟踪代码。[我正在为node-trackable](https://github.com/sreuter/node-trackable)做这件事。

骗子：我现在不知道，但如果你在这里看到问题，请告诉我；-)

# php - 如何从网页中删除外来字符？

> ID：10659267
> 
> 赞同：-1
> 
> 时间：2012-05-18T20:26:55.997
> 
> 标签：php, javascript, apache, .htaccess, content-type

我在书籍文件夹中有 html 文件。尝试在另一个 html 页面中使用 jQuery 加载方法加载 html 文件，但它显示外来字符，例如 �。

代码：

```
PageContentURL = "books/" + bookTitle + "/book_" + bookTitle;

$("#container").load(PageContentURL); 
```

工作网址： [http ://ashapanchal.com/TheBibleScholarHTML/chaptercontent.html?bid=2&btitle=Eastons%20Bible%20Dictionary&cid=4&ctitle=D&spi=186&epi=220&tpi=186](http://ashapanchal.com/TheBibleScholarHTML/chaptercontent.html?bid=2&btitle=Eastons%20Bible%20Dictionary&cid=4&ctitle=D&spi=186&epi=220&tpi=186)

为什么会这样？如何去除外来字符？我已经设置了字符集并尝试了许多在线可用的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T20:57:38.677

您需要在`Apache`server 上配置响应标头。

您现在拥有的只是文件`'Content-Type: text/html'`的标题`.html`。因此，您需要创建`.htaccess`文件（如果不存在）并添加以下行：

```
<FilesMatch "\.html$">
    Header unset Content-Type
    Header append Content-Type "text/html; charset=utf-8"
</FilesMatch> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T20:47:20.607

你能试试这个代码吗：））

```
str.replace(/[^\w\s]/gi, ''); 
```

如果你想试试

```
<input type='button' value='click' id="click"/>

<input type='text' value='' id="testtt"/>

$(function(){
    $('#click').click(function(){
     var str=   $('#testtt').val();
        var newvalue =   str.replace(/[^\w\s]/gi, '');
          alert(newvalue);
        });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T10:19:51.073

从 chaptercontent.html 中删除以下行

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

问题是主页是使用 utf-8 编码的，而您包含的页面是 iso-8859-1。因为主页是 utf-8，所以它也将包含的页面解释为 utf-8。

# django - 使用 Celery 运行具有不同优先级的相同任务

> ID：10659280
> 
> 赞同：2
> 
> 时间：2012-05-18T20:27:49.473
> 
> 标签：django, celery, django-celery

所以我有一个非常有趣的场景，我想以不同的优先级运行相同的 Celery 任务，具体取决于它的调用位置 - 例如，我想为高级用户运行一个任务，其优先级高于非高级用户。

使用文档，我能够设置多个队列，并且能够通过将所有 .delay 调用更改为 .apply_async 调用并传入一个额外的 routing_key 来指定优先级队列来使其工作。问题是必须在很多不同的地方这样做。有没有更好的方法来处理这个？我试图尽可能避免更改视图中的代码，并且更愿意在任务或 celery 配置中处理这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T10:53:06.833

您可以使用部分评估而不是定义单独的任务。

```
from celery.task import task
from functools import partial

@task
def do_something():
    pass

premium_do_something = partial(do_something.apply_async, routing_key="premium")

do_something.async_apply()
premium_do_something() 
```

# c - 如何在不修改程序的情况下通过fork启动一个进程的两个实例

> ID：10659281
> 
> 赞同：2
> 
> 时间：2012-05-18T20:27:49.460
> 
> 标签：c, linux, gcc, x86-64

我试图在一开始就从另一个进程分叉一个进程。为此，我尝试修改`__libc_start_main`glibc（我使用的修改后的 glibc）中的函数并尝试将 fork 放在那里，但无法编译 glibc，因为每当我尝试这样做时都会出错。还有哪些其他选择，为什么插入叉子`__libc_start_main`不起作用？

再次注意，我想以一种不需要修改程序的方式来做，即在 glibc 中修改是可以的，但不是程序。

在`__libc_start_main`中，我尝试像这样分叉。

```
if (__builtin_expect (! not_first_call, 1))
    {
      struct pthread *self;
      fork(); // <-- here

      self = THREAD_SELF;

      /* Store old info.  */
      unwind_buf.priv.data.prev = THREAD_GETMEM (self, cleanup_jmp_buf);
      unwind_buf.priv.data.cleanup = THREAD_GETMEM (self, cleanup);

      /* Store the new cleanup handler info.  */
      THREAD_SETMEM (self, cleanup_jmp_buf, &unwind_buf);

      /* Run the program.  */
      result = main (argc, argv, __environ MAIN_AUXVEC_PARAM);
    } 
```

我得到的错误如下。

```
file '/build/sunrpc/xbootparam_prot.T' already exists and may be overwritten
make[2]: *** [build/sunrpc/xbootparam_prot.stmp] Error 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T02:43:36.247

如果您使用主入口点静态链接到不可修改的对象，则可以使用符号包装在对象的 main() 之前潜入 fork()。

例如，无法修改的 main.o：

```
#include <stdio.h>

int main( int argc, char *argv[] ) {
   printf( "In main()\n" );
   return 0;
} 
```

glibc 中的包装符号：

```
#include <unistd.h>
#include <stdio.h>

int __wrap_main( int argc, char *argv[] ) {
   printf( "In wrapper\n" );
   if ( fork() ) {
      return __real_main( argc, argv );
   } else {
      printf( "Other process did something else\n" );
      return 0;
   }
} 
```

并使用 --wrap 命令链接器命令：

```
gcc -o app main.o wrap.o -Wl,--wrap=main

$ ./app 
In wrapper
In main()
$ Other process did something else 
```

# javascript - jQuery：找到前两个孩子

> ID：10659283
> 
> 赞同：10
> 
> 时间：2012-05-18T20:28:06.180
> 
> 标签：javascript, jquery, html, css

使用 jQuery，找到父元素的前两个子元素的最有效方法是什么，如果一个是 an`h1`另一个是 a `p`。我的代码现在无法正常工作，我想使用最佳实践来完成此操作。

**CSS**

```
div > *{
    display: none;
} 
```

**HTML**

```
<div>
    <h1>Heading</h1>
    <p>Paragraph 1</p>
    <p>Paragraph 2</p>
</div>

<div>
    <h1>Heading</h1>
    <p>Paragraph 1</p>
    <p>Paragraph 2</p>
</div> 
```

**Javascript**

```
$('div h1').show();    
$('div p:first-child').show(); 
```

**编辑**我实际上正在使用多个 DIV。我不认为这会有所作为，但看起来我错了。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-18T20:30:19.560

尝试，

```
$('div').children().slice(0,2).show(); 
```

如果您有超过 1 个 div，请尝试如下操作，

```
$('div').each (function () {
    $(this).children().slice(0,2).show();
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-18T20:33:38.970

方法的另一种`slice()`方法：

```
$('div').children(':lt(2)').show() 
```

（但我也推荐切片，特别是对于大型收藏品）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T20:33:35.280

[http://jsfiddle.net/94EU7/](http://jsfiddle.net/94EU7/)

```
$('div :lt(2)').show(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T20:32:49.453

```
$('div').children().slice(0, 2).show(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-18T20:32:53.993

您可以使用[小于](http://api.jquery.com/lt-selector/)选择器，如下所示

```
$('div > *:lt(2)').show(); 
```

[工作小提琴](http://jsfiddle.net/joycse06/sWkTg/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-18T20:32:59.547

描述性选择器将是

```
$('div').find('h1:first, p:first').show(); 
```

这清楚地表明您的意图是什么以及您正在选择哪些元素。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-18T20:38:18.413

```
$('div p:first-child,div p:nth-child(2)').show(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-18T20:30:58.977

我想你会想要这个`eq()`功能，像这样：

```
$("div").children().eq(0); // first child
$("div").children().eq(1); // second child 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-18T20:38:57.553

不知道为什么需要为此使用 jQuery。

```
var firstChild = div.firstChild;
firstChild.style.display = 'initial';
firstChild.nextSibling.style.display = 'initial'; 
```

# javascript - 图片上方 div 的 HTML 定位

> ID：10659285
> 
> 赞同：1
> 
> 时间：2012-05-18T20:28:12.113
> 
> 标签：javascript, jquery, html, css, position

我有一个大图像，以及我在所述图像顶部用作假按钮的一堆 div。目前，我正在使用绝对定位将 div 放置在我想要的位置，但我有很多 div，通过反复试验找到 x/y 坐标是我不想花的时间。有没有更简单的方法来定位它们，还是我被卡住了？

我在这个项目中使用 jQuery 和 Javascript，所以这些可以用于解决方案。

CSS：

```
#test0 {
position:absolute;
    left:381px;
    bottom:100px;
} 
```

HTML：

```
<div id="image">
    <div id="test0" class="button" onclick="$('#modal').dialog('open');" style="postion:absolute">
        Click me to test Modal!
    </div>
    <div id="test1" class="button" onclick="$('#modal').dialog('open');" style="postion:absolute">
        Click me to test the same Modal!
    </div>
    <img src="testImage.jpg" alt="testtest" />
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T20:37:49.223

HTML：

```
<div id="image">
<div id="container-of-fake-divs">

<div class="fake-div">FAKE DIV</div>
<div class="fake-div">FAKE DIV</div>

</div>

<img src="image.jpg" />

</div> 
```

风格：

```
#image { position:relative; } 
#container-of-fake-divs { position:absolute; top:0; left:0; }
.fake-div { display:block; } 
```

# jquery - 如何在 Ajax 请求中使用 DELETE 动词

> ID：10659293
> 
> 赞同：1
> 
> 时间：2012-05-18T20:29:02.950
> 
> 标签：jquery, ajax, web-services

我正在调用一个 API 删除函数，它只接受 DELETE 动词。

我试过了

```
$.ajax({
url: 'http://myurl',
type: 'DELETE',
success: function(result) {
    // Do something with the result
}); 
```

但它在响应标头中将请求方法显示为选项。

任何人都可以帮助我如何发送带有 ajax 请求的 DELETE 动词。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T21:04:29.403

“......但它在响应标头中将请求方法显示为选项。”

这听起来像是一个跨域请求问题。您是从同一个域还是不同域发出请求？此外，反应是什么？我还猜测没有第二个请求，因为如果浏览器确定您可以从选项响应中发送该请求，那么第二个请求本质上就是您的原始请求。选项请求是浏览器询问它是否可以发出其他请求。选项响应本质上告诉浏览器可以从哪些域发出某些请求（或类似的东西）。

[在此处](https://developer.mozilla.org/en/http_access_control)阅读有关跨域资源共享的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T20:30:58.657

这是您的答案，享受吧：[PUT、DELETE、HEAD 等方法在大多数 Web 浏览器中都可用吗？](https://stackoverflow.com/questions/165779/are-the-put-delete-head-etc-methods-available-in-most-web-browsers)

根据 jQuery 文档：

> 要发出的请求类型（“POST”或“GET”），默认为“GET”。注意：这里也可以使用其他 HTTP 请求方法，例如 PUT 和 DELETE，但并非所有浏览器都支持。

你使用的是什么浏览器？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T16:06:42.643

我得到了这个问题的最佳解决方案

[http://brockallen.com/2012/06/28/cors-support-in-webapi-mvc-and-iis-with-thinktecture-identitymodel/](http://brockallen.com/2012/06/28/cors-support-in-webapi-mvc-and-iis-with-thinktecture-identitymodel/)

在 webconfig 中添加条目

```
 <modules runAllManagedModulesForAllRequests="true">
        <add name="CorsHttpModule" type="Thinktecture.IdentityModel.Http.Cors.IIS.CorsHttpModule"/>
    </modules> 
```

# c++ - OpenCV 从 B/W 转换为 RGB

> ID：10659294
> 
> 赞同：0
> 
> 时间：2012-05-18T20:29:26.883
> 
> 标签：c++, image-processing, opencv

我已将图像从 RGB 转换为 B/W，然后我想将其转换回 RGB，但我有一个问题：

我的代码：

```
 int width=zoomedImage->width;
             int height=zoomedImage->height;
             TempImage=cvCreateImage(cvSize(width,height),IPL_DEPTH_8U,1);
             cvCvtColor(zoomedImage, TempImage,CV_RGB2GRAY);
             cvThreshold( TempImage, TempImage,128,256,CV_THRESH_BINARY);
             cvCvtColor( TempImage,zoomedImage,CV_GRAY2RGB);
             this->pictureBox1->Image=(gcnew 
System::Drawing::Bitmap(zoomedImage->width,zoomedImage->height,zoomedImage->widthStep, 
System::Drawing::Imaging::PixelFormat::Format24bppRgb,(System::IntPtr)zoomedImage->imageData)); 
```

在这里，我将 zoomedImage 显示为黑白图像，在另一个动作中，我想将 zoomedImage 显示为 RGB 图像，这里的主要问题是我无法更改将要绘制的图像，因为我的代码的另一部分取决于在这个序列上，我在另一个动作中写道：

```
 cvCvtColor( TempImage,zoomedImage,CV_GRAY2RGB);
this->pictureBox1->Image=(gcnew 
System::Drawing::Bitmap(zoomedImage->width,zoomedImage->height,zoomedImage->widthStep, 
System::Drawing::Imaging::PixelFormat::Format24bppRgb,(System::IntPtr)zoomedImage->imageData)); 
```

但是 zoomedImage 仍然显示为 B/W，我听说当真彩色图像转换为灰色时，它不能再次作为真彩色图像返回，那么 CV_GRAY2RGB 是做什么的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T20:34:32.203

当您将 RGB 图像转换为灰度图像时，颜色信息会丢失，并且无法再次从灰度图像中恢复此信息。

当您尝试将 B/W 图像转换为 RGB 时，您只会制作 3 通道图像，但所有通道都包含相同的强度数据。因此，您将获得具有 3 个通道的灰度图像。而已。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T11:05:37.123

我已经解决了我的问题如下：

将原始图像转换为黑白

```
 int width=zoomedImage->width;
             int height=zoomedImage->height;
             ColorSaver=cvCreateImage(cvSize(width,height),zoomedImage->depth,zoomedImage->nChannels);
             ColorSaver=cvCloneImage(zoomedImage);
             TempImage=cvCreateImage(cvSize(width,height),IPL_DEPTH_8U,1);
             cvCvtColor(zoomedImage, TempImage,CV_RGB2GRAY);
             cvThreshold( TempImage, TempImage,128,256,CV_THRESH_BINARY);
             cvCvtColor( TempImage,zoomedImage,CV_GRAY2RGB);
             this->pictureBox1->Image=(gcnew 
```

System::Drawing::Bitmap(zoomedImage->width,zoomedImage->height,zoomedImage->widthStep, System::Drawing::Imaging::PixelFormat::Format24bppRgb,(System::IntPtr)zoomedImage->imageData));

将原始图像返回为 RGB：

```
zoomedImage=cvCloneImage(ColorSaver);
this->pictureBox1->Image=(gcnew 
System::Drawing::Bitmap( zoomedImage->width, zoomedImage->height, zoomedImage->widthStep, 
System::Drawing::Imaging::PixelFormat::Format24bppRgb,(System::IntPtr) zoomedImage->imageData)); 
```

# javascript - 使网页内容适合固定大小的 iframe

> ID：10659302
> 
> 赞同：1
> 
> 时间：2012-05-18T20:30:01.233
> 
> 标签：javascript, html, css, ajax, iframe

是否有任何 javascript、ajax、css 或任何其他方法可以将网页内容安装在固定宽度的 iframe 上？就像移动设备浏览器一样。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T21:14:46.097

您定义一个具有固定宽度（例如 400 像素）的容器 div 并将该 div 设置为溢出隐藏。这将强制该 div 的内容保持在 400px 宽度内。您将所有想要在 iframe 中包含的内容放在该容器 div 中。然后，您将该 div 放入 iframe 中。

我认为这将是最简单的方法。

# asp.net - 更新面板仅更新一次单选按钮列表异步回发

> ID：10659303
> 
> 赞同：2
> 
> 时间：2012-05-18T20:30:09.577
> 
> 标签：asp.net, vb.net, updatepanel, selectedindexchanged

我正在尝试使用单选按钮列表来更改更新面板中的一些标签文本，但无论出于何种原因，SelectedIndexChanged 事件似乎只会第一次触发，然后再也不会触发。我用谷歌搜索和搜索，但我发现尝试的所有东西都没有解决这个问题。

Autopostback 设置为 true，我尝试了标准的 .net ScriptManager 和 ToolkitScriptManager，两者的行为相同，我尝试在 Trigger 中指定 Event 并未指定它（这会退回到该控件类型的默认值) ...我还尝试将 rbl 绑定到 if not me.ispostback then... 页面加载事件的结构中。

我在事件中使用的 VB 只是一个简单的 如果选择了这个索引， label.text="whatever" else "yadda" ... 没什么特别的。如果更新面板不在播放中，这一切都很好，除了我希望从完整的回发中摆脱屏幕闪烁。我把我的asp.net的肉和土豆贴在下面……救命！

类型1 类型2

```
 <asp:Panel ID="DesignInfoHeaderPanel" runat="server" CssClass="headerpanel">

        <asp:Label ID="lblDesignInfo" runat="server" font-bold="true"
            style="z-index: 1; left: 5px; top: 5px; position: absolute" Text="Design Information"></asp:Label>

    </asp:Panel>

    <div class="cpdiv">
    <asp:Panel ID="DesignInfoPanel" runat="server" CssClass="collapsepanel">

        <asp:UpdatePanel runat="server" ID="DIUpdatePanel" UpdateMode="Conditional">

            <ContentTemplate>

                <asp:Label ID="Label1" runat="server" font-bold="true"
                    style="z-index: 1; left: 5px; top: 7px; width: 95px; position: absolute; text-align: right"
                    Text="Account Name"></asp:Label>

                <asp:TextBox ID="TextBox1" runat="server" Font-Names="Verdana" Font-Size="8pt"
                    style="z-index: 1; left: 110px; top: 4px; width: 144px; position: absolute"></asp:TextBox>

                <asp:Label ID="Label2" runat="server" font-bold="true"
                    style="z-index: 1; left: 270px; top: 7px; width: 140px; position: absolute"
                    Text="Est. Volume (# units)"></asp:Label>

                <asp:TextBox ID="TextBox2" runat="server" Font-Names="Verdana" Font-Size="8pt"
                    style="z-index: 1; left: 415px; top: 4px; width: 60px; position: absolute"></asp:TextBox>

                <asp:Label ID="Label3" runat="server" font-bold="true"
                    style="z-index: 1; left: 7px; top: 35px; width: 95px; position: absolute; text-align: right"
                    Text="Sales Manager"></asp:Label>

                <asp:DropDownList ID="DropDownList1" runat="server" Font-Names="Verdana" Font-Size="8pt"
                    style="z-index: 1; left: 110px; top: 32px; width: 150px; position: absolute">
                </asp:DropDownList>

                <asp:Label ID="Label4" runat="server" font-bold="true"
                    style="z-index: 1; left: 485px; top: 7px; width: 140px; position: absolute"
                    Text="Personalization Type"></asp:Label>

                <asp:DropDownList ID="DropDownList2" runat="server" Font-Names="Verdana" Font-Size="8pt"
                    style="z-index: 1; left: 630px; top: 4px; width: 150px; position: absolute">
                </asp:DropDownList>

                <asp:CheckBox ID="CheckBox1" runat="server" font-bold="true"
                    style="z-index: 1; left: 298px; top: 32px; position: absolute" Text="Rental"
                    TextAlign="Left" />

                <asp:CheckBox ID="CheckBox2" runat="server" font-bold="true"
                    style="z-index: 1; left: 397px; top: 32px; position: absolute" Text="Dir Sales"
                    TextAlign="Left" />

                <asp:RadioButtonList ID="RadioButtonList1" runat="server" BorderColor="#640000"
                    BorderStyle="Solid" BorderWidth="2px" Font-Bold="true"
                    RepeatDirection="Horizontal"
                    style="z-index: 1; left: 545px; top: 28px; position: absolute"
                    TextAlign="Left">
                    <asp:ListItem Value="0">Type1</asp:ListItem>
                    <asp:ListItem Value="1">Type2</asp:ListItem>
                </asp:RadioButtonList>

            </ContentTemplate>

            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="rblEmblemType" />
            </Triggers>

            </asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-18T18:20:02.667

尝试添加`ClientIDMode="AutoID"`到您的 RadioButtonList。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T09:59:25.327

可能是因为 UpdatePanel 正在更新。由于您尚未发布有关您的代码脚本的任何信息，因此我假设您尚未在事件方法中使用以下代码。

```
 UpdatePanel1.Update() 
```

这（下一个）发生的可能性较小。

如果您使用 AutoPostBack，则不需要使用 asyncPostBackTrigger ..！当图像按钮/图像/网格..etc 事件发生或发生此错误时，您需要使用触发器

> 无法解析从服务器收到的消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-14T09:28:40.260

我的代码和你的非常相似。在我的情况下，当我设置 PostBackTrigger 时会触发 SelectedIndexChanged 事件。实际上，事件仅触发一次意味着单击事件附加到其他单选按钮（未选中）。所以，我只是解决了**删除“Selected=true”**

# php - 带有 RSS 提要的 sql 注入

> ID：10659306
> 
> 赞同：0
> 
> 时间：2012-05-18T20:30:28.913
> 
> 标签：php, sql-injection

我想我对mysqli注入有一个小问题。本文：

```
Filmster Jackie Chan heeft in Cannes zijn pensioen als actieheld aangekondigd. De 58-jarige acteur is naar eigen zeggen te oud om stunts uit te voeren en vindt de wereld "te gewelddadig". Jackie Chan is "heel, heel moe" na gedurende ... 
```

数据库中的输出：

```
Filmster Jackie Chan heeft in Cannes zijn pensioen als actieheld aangekondigd. De 58-jarige acteur is naar eigen zeggen te oud om stunts uit te voeren en vindt de wereld \"te gewelddadig\". Jackie Chan is \"heel, heel moe\" na gedurende ... 
```

每个人都可以看到其中有一些反斜杠，我不知道它是怎么来的。

**我如何工作？** 我使用我的 url 将文章动态加载到数据库中。

```
 echo " <a href='index.php?title=".$title."&content=".$article."&link=".$linkF."&klik="."test"."'>hier komt de link naar ...</a> "; 
```

使用超全局变量 _GET 我将它们放入变量中并使用此脚本将它们存储到数据库中。

```
public function saveArticle() 
{
        include("connection.php");

            $sSql = "INSERT INTO tblArticles
                (titel, 
                article 
                ) 
                VALUES 
                ('".mysqli_real_escape_string($mysqli, $this -> m_sTitle) . "', 
                '" .mysqli_real_escape_string($mysqli, $this -> m_sArticle) . "');";

        if (!$mysqli -> query($sSql))
        {
            throw new Exception("Something went wrong");
        }

} 
```

# android - 多个确定/取消对话框，如何在 onClick() 中判断哪个对话框？

> ID：10659307
> 
> 赞同：4
> 
> 时间：2012-05-18T20:30:30.793
> 
> 标签：android, android-dialog

我创建了一个通用的 OkCancelDialog 类，它可以通过静态方法在我的应用程序中方便地调用：

```
 static public void Prompt(String title, String message) {
    OkCancelDialog okcancelDialog = new OkCancelDialog();
    okcancelDialog.showAlert(title, message);     
  } 
```

由于各种原因，我需要活动中的 onClick 侦听器，因此在活动中我有：

```
 public void onClick(DialogInterface v, int buttonId) {
    if (buttonId == DialogInterface.BUTTON_POSITIVE) { // OK button
         // do the OK thing
    }
    else if (buttonId == DialogInterface.BUTTON_NEGATIVE) { // CANCEL button
         // do the Cancel thing
    }
    else {
      // should never happen
    }
  } 
```

这适用于应用程序中的单个对话框，但现在我想添加另一个由同一活动处理的确定/取消对话框。据我所知，只能`onClick()`为活动定义一个，所以我不确定如何实现它。

有什么建议或提示吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T20:45:14.053

尝试这样的事情......

```
public class MyActivity extends Activity
    implements DialogInterface.OnClickListener {

    // Declare dialogs as Activity members
    AlertDialog dialogX = null;
    AlertDialog dialogY = null;

    ...

    @Override
    public void onClick(DialogInterface dialog, int which) {

        if (dialogX != null) {
            if (dialogX.equals(dialog)) {
                // Process result for dialogX
            }
        }

        if (dialogY != null) {
            if (dialogY.equals(dialog)) {
                // Process result for dialogY
            }
        }
    }
} 
```

**编辑**这就是我创建我的`AlertDialogs`...

```
private void createGuideViewChooserDialog() {
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle("Select Guide View")
        .setSingleChoiceItems(guideViewChooserDialogItems, currentGuideView, this)
        .setPositiveButton("OK", this)
        .setNegativeButton("Cancel", this);
    guideViewChooserDialog = builder.create();
    guideViewChooserDialog.show();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T20:44:17.030

你有两个选择。1）您可以在对话框本身上设置 OnClickListener。2）您可以根据传入的 DialogInterface 来判断哪个对话框是哪个对话框。

# c# - HttpWebRequest 超时

> ID：10659308
> 
> 赞同：2
> 
> 时间：2012-05-18T20:30:33.907
> 
> 标签：c#, timeout, httpwebrequest

我已阅读以下 2 篇文章并尝试实施相同的文章。

我的代码是这个，超时发生在这里

```
HttpWebRequest wr = (HttpWebRequest)WebRequest.Create(url);
wr.ContentType = "multipart/form-data; boundary=" + boundary;
wr.Method = "POST";
wr.KeepAlive = false;
wr.CookieContainer = cookieJar;

wr.Proxy = null;
wr.ServicePoint.ConnectionLeaseTimeout = 5000;
Stream rs = wr.GetRequestStream(); // -> Time out error occurs here 
```

[我读的文章](https://stackoverflow.com/questions/5827030/httpwebrequest-times-out-on-second-call)

```
My code using that as a sample
HttpWebRequest wr = (HttpWebRequest)WebRequest.Create(url);
wr.ContentType = "multipart/form-data; boundary=" + boundary;
wr.Method = "POST";
wr.KeepAlive = false;
wr.CookieContainer = cookieJar;

wr.Timeout = 5000;
wr.Proxy = null;

wr.ServicePoint.ConnectionLeaseTimeout = 5000;
wr.ServicePoint.MaxIdleTime = 5000;

Stream rs = wr.GetRequestStream(); //-->Time out error 
```

任何线索都会有所帮助。有时我可以通过 1 个请求，而所有其他请求都失败或一切都失败了。我正在发布到 HTTPS 站点。使用 Fiddler 运行时没有问题

更新 1：我尝试遵循 zbugs 的想法，但这导致了同样的问题。第一个请求通过后续请求失败。我正在关闭所有响应流以及在我的请求对象上调用 abort。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T20:38:42.583

你需要设置这个。

```
const int maxIdleTimeout = 5000;
ServicePointManager.MaxServicePointIdleTime = maxIdleTimeout; 
```

如果您在任何给定时间有多个客户提出请求，

```
const int maxConnections = 100; //or more/less
ServicePointManager.DefaultConnectionLimit = maxConnections; 
```

[http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.maxservicepointidletime.aspx](http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.maxservicepointidletime.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T20:45:12.130

您应该释放所有实现`IDisposable`. 不发布它们可能会导致您正在尝试的那种问题。

在这里，您有一个示例，该示例与您的代码不完全一致，但它将帮助您理解我的意思

```
var request = WebRequest.Create(url);
request.ContentType = "application/json; charset=utf-8";

using (var response = request.GetResponse())
{
    using (var sr = new StreamReader(response.GetResponseStream()))
    {
    ...
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T15:16:56.047

在我的一个请求电话中，我没有打电话

```
Request.Abort() 
```

这似乎已经解决了我的问题以及 zbugs 的建议

# java - 无法将数据从 JTable 插入数据库

> ID：10659310
> 
> 赞同：1
> 
> 时间：2012-05-18T20:30:48.487
> 
> 标签：java, mysql, database, swing, jtable

我正在编写一个程序来将数据插入`JTable`数据库。我没有收到任何错误或异常。甚至对象也被正确填充。但不知道为什么`executeUpdate`声明失败。下面是我的代码。

```
import javax.swing.JFrame;
import java.awt.*;
import java.awt.event.*;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

import javax.swing.*;
import javax.swing.table.*;
import javax.swing.event.*;

public class Table extends JFrame implements ActionListener, TableModelListener {

    private JTable table;
    private JButton addItem, cancel, save, load, search;
    DefaultTableModel tableModel;
Object[] columnNames = new Object[]{
"Item No", "ItemName","UnitPrice", "Qty","TotalPrice","Supplier","Remarks"};

    public Table() {
        getContentPane().setLayout( new FlowLayout() );     

        tableModel = new DefaultTableModel(columnNames, 0);
        tableModel.addTableModelListener( this );

        table = new JTable(tableModel);

        JScrollPane scrollPane = new JScrollPane(table);
        table.setPreferredScrollableViewportSize(new Dimension(600, 400));
        getContentPane().add(scrollPane);

        addItem = new JButton( "Add" );
        addItem.addActionListener( this );
        getContentPane().add( addItem );

        save = new JButton( "Save" );
        save.addActionListener( this );
        getContentPane().add( save );

        cancel = new JButton( "Cancel" );
        cancel.addActionListener( this );
        getContentPane().add( cancel );
        setVisible( true );
        setSize( 640, 500 );
    }

    public void tableChanged( TableModelEvent e ) {

    }

    public void actionPerformed( ActionEvent evt ) {
        int row = table.getSelectedRow();
        int column = table.getSelectedColumn();
        if(evt.getSource()== addItem)
        {
            tableModel.addRow(new Object[]{"","","","","","",""});
        }
        else if ( evt.getSource() == save )
            saveCustomers();
    }

    private void saveCustomers() {
        PreparedStatement pstm = null;
        ResultSet rs;
        int index=1;
        int count=table.getRowCount();

        try{
        Class.forName("com.mysql.jdbc.Driver");
        Connection connect =DriverManager.getConnection("jdbc:mysql://localhost/restaurant","root","root");
        for(int i=0;i<count;i++){
            Object obj1 = GetData(table, i, 0);
            Object obj2 = GetData(table, i, 1);
            Object obj3 = GetData(table, i, 2);
            Object obj4 = GetData(table, i, 3);
            Object obj5 = GetData(table, i, 4);
            Object obj6 = GetData(table, i, 5);
            Object obj7 = GetData(table, i, 6);

            int value1= Integer.parseInt(obj1.toString());
            System.out.println(value1);
            String value2=obj2.toString();
            double value3=Double.parseDouble(obj3.toString());
            System.out.println(value2);
            double value4=Double.parseDouble(obj4.toString());
            System.out.println(value3);
            double value5=Double.parseDouble(obj5.toString());
            System.out.println(value5);
            String value6=obj6.toString();
            System.out.println(value6);
            String value7=obj7.toString();
            System.out.println(value7);
            pstm=connect.prepareStatement("insert into stock values(?,?,?,?,?,?,?)");
            System.out.println("Preperation");
                pstm.setInt(1,value1);
                pstm.setString(2,value2);
                pstm.setDouble(3,value3);
                pstm.setDouble(4, value4);
                pstm.setDouble(5,value5);
                pstm.setString(6, value6);
                pstm.setString(7, value7);

        index++;
        }
        System.out.println("execute");
        pstm.executeUpdate();
        System.out.println("saved Successfully");
        }
        catch(Exception e){}
        }

    public Object GetData(JTable table, int row_index, int col_index){
        return table.getModel().getValueAt(row_index, col_index);
        } 

    public static void main ( String[] args ) {
        Table frm = new Table();
        frm.setVisible(true);
        frm.setSize( 640, 500 );
        frm.setResizable(false);
        WindowQuitter wquit = new WindowQuitter();
        frm.addWindowListener( wquit );
    }
}

class WindowQuitter extends WindowAdapter {
    public void windowClosing( WindowEvent e ) {
        System.exit( 0 );
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T10:10:56.230

您的插入语句不正确，您应该使用：

```
connect.prepareStatement("insert into stock(field1,field2,field3,field4,field5,field6,field7) values(?,?,?,?,?,?,?)"); 
```

（用实际的字段名称替换字段！）

因为据我所知，您必须指出与每个`?`.

[请参阅此处](http://docs.oracle.com/javase/1.4.2/docs/guide/jdbc/getstart/preparedstatement.html)的一些示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:00:44.047

我不确定，但我认为您的连接 url 错误，试试这个

```
Connection con = ( Connection ) DriverManager.getConnection( "jdbc:mysql://localhost:3306/yourdatabasename", "yourmysqlid", "yourmysqlpassword" ); 
```

`3306`本地 mysql 的默认端口号在哪里。

# c - 使用 uint32_t 时溢出

> ID：10659320
> 
> 赞同：0
> 
> 时间：2012-05-18T20:31:46.723
> 
> 标签：c, overflow, uint32-t

```
#include <stdint.h>
#include <stdio.h>
#include <stdlib.h>

char* createMSG(uint8_t i,uint32_t port);

int strlen(char* tmp);
uint32_t user_port = 5000;

int main(int argc, char** argv) {
    char *msg;
    uint8_t i;
    i = 1;  
    msg = createMSG(i,user_port);
    printf("Port: %d",*(msg+2));
}

char* createMSG(uint8_t i,uint32_t port) {
    char *buff; 
    buff = (char*) malloc(6);
    uint8_t id;
    id = 2;
    memcpy(buff, &id, sizeof(uint8_t));
    memcpy(buff+1, &i, sizeof(uint8_t));
    memcpy(buff+2, &port, sizeof(uint32_t));
    return buff;
} 
```

输出为：“端口：-120”。似乎有一些溢出。但是 uint32_t 对于 5000 应该足够大。当使用 22 而不是 5000 时，一切正常。

为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T20:36:28.103

因为`*(msg+2)`有类型`char`。如果你真的想这样做，你应该这样做

```
printf("Port: %d",*(uint32_t*)(msg+2)); 
```

正如*@R..*所指出的，msg+2 几乎可以肯定不满足 uint32_t 类型的正确对齐要求。如果代码似乎可以工作，那是个意外并且不可移植。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T20:36:55.983

这条线

```
printf("Port: %d",*(msg+2)); 
```

在 (msg+2) 地址打印 'char' 值，而不是 uint32_t ！

采用

```
uint32_t PortFromProc = *(uint32_t*)(msg+2);
printf("Port: %d", PortFromProc); 
```

要从 recvfrom() 函数“修复”端口号，必须使用 ntohl() 函数。

# svn - svnadmin 添加新用户并为其分配一个 repo

> ID：10659323
> 
> 赞同：0
> 
> 时间：2012-05-18T20:32:36.930
> 
> 标签：svn, debian, svnadmin

我将在我的 svn 服务器上创建一个新用户，该用户只能在我的一个存储库中访问。这是可能的？

我的服务器运行 debian 挤压。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:16:01.643

您可以使用 svn authz 文件设置权限。首先，我们需要创建一个访问控制文件。

```
sudo nano /etc/apache2/svn_access_control 
```

用户组

您可以创建用户组，然后将其用于规则。您可以在方括号中的特殊标题下执行此操作：

```
[groups]
mygroup = dave, mike 
```

这将创建一个名为“mygroup”的组，“dave”和“mike”属于该组。

现在举一些例子。例子

```
[groups]
team = bob, bill devteam = bob, barry, brett
[/]
@team = r bob = rw
[/wowapp/trunk]
@team = r @devteam = rw brenda = rw 
```

在这个例子中：

```
Created a group team which has two members; bob and bill.
Created another group, called devteam which has three members; bob, barry, brett.
In the root of the repository, I’ve given the group team read permissions.
Also, in the root, bob has read and write permissions.
In the trunk of wowapp, the group team has read permission.
Also, the devteam group has read and write permissions.
And another user, called brenda has read and write permissions. 
```

您需要在 apache svn 配置文件中添加以下行。

```
AuthzSVNAccessFile /etc/apache2/svn_access_control 
```

使文件看起来像这样：

```
<Location /svn>
  DAV svn
  SVNPath /home/svn

  AuthType Basic
  AuthName "Subversion Repository"
  AuthUserFile /etc/apache2/dav_svn.passwd

  AuthzSVNAccessFile /etc/apache2/svn_access_control

  Require valid-user
</Location> 
```

保存文件，然后重新启动 Apache2：

```
sudo /etc/init.d/apache2 restart 
```

您现在应该可以通过 Apache2 对 Subversion 进行访问控制。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-21T08:17:57.680

对于每个目录的身份验证访问，请参见 redbean book 的[auth 部分](http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.serverconfig.httpd.authn)。

如果您想要更简单的东西，您可以使用带有 GUI 的东西来设置访问权限，例如[uberSVN](http://www.ubersvn.com/)。

# c# - 在 EF 中更新父/子实体的正确方法是什么？

> ID：10659330
> 
> 赞同：1
> 
> 时间：2012-05-18T20:33:06.177
> 
> 标签：c#, entity-framework

我首先使用 Ef 4 代码，并且有一个带孩子的父表

当我更新父项时，我注意到子项没有更新，而是创建了新条目（旧条目没有被删除）。

我的更新方法如下所示：

```
IEFRepository<Parent> repo = new EFRepository<Parent>( context );
var parent = repo.GetSingle(m => m.parentId.Equals(updatedParent.parentId));

parent.Child = updatedParent.Child;  //this is creating a new record in the db, not overwriting the existing

repo.Update(parent); 
```

如果我像下面那样在更新方法中分解子属性，它可以解决重复条目问题，但会在其他地方产生其他问题（主要是验证空条目）。

```
parent.Child.property = updatedParent.Child.property; 
```

我还尝试创建一个 UpdateChild()，并从 UpdateParent() 调用它，但得到的结果与分解单个子属性基本相同

是否有适当的方法来控制这种行为并强制 EF 覆盖子实体而不是创建新实体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T21:10:17.740

在上下文中拥有一个孩子列表，并在您不再需要时从您的上下文[中删除旧孩子。](http://msdn.microsoft.com/en-us/library/system.data.entity.dbset.remove%28v=vs.103%29.aspx)

# asp.net - 如何将参数从视图输入传递到 asp mvc 方法？

> ID：10659334
> 
> 赞同：0
> 
> 时间：2012-05-18T20:33:32.877
> 
> 标签：asp.net, asp.net-mvc-3

我有这样的代码用于发送订购我的商品。我在浏览器中的链接看起来像这样：`http://localhost:22764/Admin/AddToOrder?OrderId=1&WareId=1&WareCount=456`但是当我尝试去那里时，我得到“/中的服务器错误”，404找不到资源。我的观点是这样的：

```
<% foreach (var item in Model) { %>

        <tr>
            <td>
                <%: Html.ActionLink("Edit", "Edit", new { id=item.WareId }) %> |
                <%: Html.ActionLink("Details", "Details", new { id=item.WareId })%> |
                <%: Html.ActionLink("Delete", "Delete", new { id=item.WareId })%> ||||||
                <%: Html.ActionLink("Click Me", "AddToOrder", new { OrderId = 1, WareId = item.WareId, WareCount = item.Quantity })%>

            </td>

            <td>
                <%: item.WareName %>
            </td>
            <td>
                <%: String.Format("{0:F}", item.WareCost) %>
            </td>
            <td>
                <%: item.Quantity %>
            </td>
        </tr>

    <% } %> 
```

和控制器方法：

```
 [HttpGet]

        public ActionResult AddToOrder(int OrderId, int WareId, string WareCount)
        {
            OrderRecord or = new OrderRecord();
            or.OrderId = OrderId;
            or.WareId = WareId;
            or.WareCount = WareCount;
            try
            {
                if (ModelState.IsValid)
                {
                    db.AddToOrderRecords(or);
                    db.SaveChanges();
                    return RedirectToAction("Index");
                }
            }
            catch (Exception ex)
            {
                ModelState.AddModelError(String.Empty, ex);
            }
            return View(or);
        } 
```

我觉得是路由麻烦？请帮帮我。

路线是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.Web.Routing;

namespace Proekt
{
    // Note: For instructions on enabling IIS6 or IIS7 classic mode, 
    // visit http://go.microsoft.com/?LinkId=9394801

    public class MvcApplication : System.Web.HttpApplication
    {
        public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            );

        }

        protected void Application_Start()
        {
            AreaRegistration.RegisterAllAreas();

            RegisterRoutes(RouteTable.Routes);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T21:15:58.793

使用路由调试器查看默认路由是否可以捕获 url。通过 nugget 安装路由调试器，您可以尝试使用 ViewBag 来传递参数。

# python - Depth of a tree using DFS

> ID：10659337
> 
> 赞同：1
> 
> 时间：2012-05-18T20:33:43.173
> 
> 标签：python, tree

I'm trying to write code that returns the depth of the deepest leaf in a tree with arbitrary number of children per nodes, in Python, using DFS rather than BFS. It seeems I'm close, but the following code still has some bug that I can't figure out (i.e. the returned depth is not correct). Any help?

A test tree would be simply: [[1,2,3],[4,5],[6],[7],[8],[],[],[],[]]

```
def max_depth_dfs(tree): # DOESN'T WORK

    max_depth, curr_depth, Q = 0,0, [0]
    visited = set()

    while Q != []:
        n = Q[0]
        more = [v for v in tree[n] if v not in visited]
        if not more:
            visited.add(n)
            curr_depth -= 1
            Q = Q[1:]
        else:
            curr_depth += 1

        max_depth = max(max_depth, curr_depth)
        Q = more + Q

    return max_depth 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T20:52:20.777

I used `try .. catch` to distinguish branches from leafs. **update** No more exceptions :)

```
from collections import Iterable
tree = [[1,2,3],[4,5, [1, 6]],[6],[7],[8],[],[],[],[]]

def max_depth(tree, level=0):
  if isinstance(tree, Iterable):
    return max([ max_depth(item, level+1) for item in tree])
  else: # leaf
    return level

print max_depth(tree) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T06:39:30.063

I found the bug!

```
if not more:
    visited.add(n)
    curr_depth -= 1
    Q = Q[1:] 
```

When you visit the node 4, curr_depth is equal to 2\. Node 4 has no children, so you decrease the curr_depth and curr_depth is equal to 1 now. However, the next node you will visit is node 5 and the depth of node 5 is 2 instead of 1\. Therefore, curr_depth doesn't record the correct depth of the node in the tree.

The following solution may be helpful.

```
def max_depth_dfs(tree):

    max_depth, curr_depth, Q = 0, 0, [0]
    visited = set()

    while Q != []:
        n = Q[0]

        max_depth = max(max_depth, curr_depth)

        if n in visited:
            curr_depth -= 1
            Q = Q[1:]
            continue

        #print n, curr_depth     #show the node and its depth in the tree

        visited.add(n)
        more = [v for v in tree[n]]
        if not more:
            Q = Q[1:]
        else:
            curr_depth += 1
            Q = more + Q

    return max_depth 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T21:36:19.990

Here is the non-recurison version:

```
from collections import Iterable

def max_depth_no_recur(tree):
  max_depth, node =  0, iter(tree)
  stack = [node]
  while stack:
    try:
      n = node.next()
    except StopIteration:
      if len(stack) > max_depth:
        max_depth = len(stack)
      node = stack.pop()
      continue

    if isinstance(n, Iterable):
        stack.append(node)
        node = iter(n)
  return max_depth 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T18:33:34.127

After taking into account all the good feedback I got from Alex and Adonis and refining the code, I currently have the current version:

```
def max_depth_dfs(tree): # correct

max_depth, curr_depth, Q = 0, 0, [0]
visited = set()

while Q != []:

    n = Q[0]

    if n in visited:
        Q = Q[1:]
        curr_depth -= 1
        visited.remove(n) # won't go back, save memory 
        print 'backtrack from', n        
        continue

    # proper place to print depth in sync with node id
    print 'visiting', n, 'children=', tree[n], 'curr_depth=', curr_depth, 'Q=', Q,
    print visited # only current path, instead of visited part of tree

    if tree[n]:
        visited.add(n) # if leaf, won't ever try to revisit
        Q = tree[n] + Q
        curr_depth += 1
        max_depth = max(max_depth, curr_depth) # no need to check if depth decreases
    else:
        Q = Q[1:] # leaf: won't revisit, will go to peer, if any, so don't change depth
        print 'no children for', n

return max_depth 
```

# objective-c - 过滤文本视图

> ID：10659339
> 
> 赞同：0
> 
> 时间：2012-05-18T20:33:52.390
> 
> 标签：objective-c, xcode

我正在构建一个 iPhone 应用程序，在应用程序中我将图像上传到服务器，我从这段代码中得到结果

```
NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

NSLog(@"%@", returnString); 
```

它显示为这样

=======

[http://www.mylink.com/30268.jpg](http://www.mylink.com/30268.jpg)

121084

应用程序/八位字节流

.jpg

./30268.jpg

=======

我需要的只是将网址“http://www.mylink.com/30268.jpg”插入到文本标签中

我寻找了一种方法，但没有运气

有任何想法吗 ？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T20:45:18.457

看起来字符串的各个部分由换行符分隔，因此您可以尝试 [[returnString componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]]objectAtIndex:0]

# c# - 一个语句如何同时具有 = 和 ==？

> ID：10659341
> 
> 赞同：6
> 
> 时间：2012-05-18T20:34:15.080
> 
> 标签：c#, .net, visual-studio-2010, operators

我发现[了关于文件和目录](https://stackoverflow.com/questions/439447/net-how-to-check-if-path-is-a-file-and-not-a-directory)的另一个堆栈溢出问题，答案包括以下语句：

```
bool isDir = (File.GetAttributes(path) & FileAttributes.Directory)
             == FileAttributes.Directory; 
```

他的问题是关于 .net 的，而我在 Visual Studio 中使用 C# .net 进行编码。在同一语句中同时使用赋值运算符和等于运算符的能力是否适用于所有 .net 语言，还是特定于某些语言？另外，我能解释一下上面的代码是如何工作的吗？假设它`path`指的是一个目录，我希望`isDir`这是真的，但谁能解释为什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-18T20:37:10.510

运算符执行的相等性测试`==`优先于运算符执行的赋值`=`。因此，如果运算符的两侧相等，则将`isDir`变量设置为等于，否则将设置为。换句话说，这相当于说：`true``==``false`

```
if ((File.GetAttributes(path) & FileAttributes.Directory) == FileAttributes.Directory)
    isDir = true;
else
    isDir = false; 
```

这在 VB.NET 中是可能的。我无法回答其他语言。在 VB.NET 中，等价于：

```
Dim isDir As Boolean = ((File.GetAttributes(path) And FileAttributes.Directory) = FileAttributes.Directory) 
```

由于 VB`=`对其赋值和相等测试运算符使用相同的字符 ( )，因此它会根据上下文确定您正在执行的操作。VB 编译器足够聪明，知道第一个`=`运算符是赋值，第二个是相等测试。然而，这显然是令人困惑的，因此为了便于阅读，通常不鼓励这样做。对于具有其他语言背景的人来说，这尤其令人困惑。例如，在 C# 中，您可以执行以下操作将两个变量设置为相同的值：

```
int y;
int x = y = 5;  // Both x and y will be set to 5 
```

在 C# 中发生的原因是因为`=`始终是赋值运算符，并且赋值表达式总是计算（返回）分配的值。因此，在这种情况下，表达式`y = 5`不仅将值 5 赋给变量`y`，而且它的计算结果也为 5。因此，当您设置`x`为该表达式的值时，它也会设置为 5。然而，在 VB 中，结果却大不相同：

```
Dim y As Integer
Dim x As Integer = y = 5 
```

在 VB 中，编译器将假定表达式`y = 5`是一个相等测试，因此它的计算结果为`False`. 因此，它将尝试`x = False`根据`Option Strict`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-18T20:37:11.767

以下是上述代码的工作原理。右手边只计算真或假，因此是等价 (==) 运算符。然后使用赋值 (=) 运算符设置该值。

另一个同时使用两个运算符（虽然*不同*）的例子是在文件 IO 中：

```
while((line = streamReader.ReadLine()) != null)
{
   //do file IO
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-18T20:37:59.143

在赋值发生之前评估右值。右值是一个相等比较。比较的结果是布尔值 true 或 false，当然可以将其分配给布尔值。

这和说的一样

```
if((File.GetAttributes(path) & FileAttributes.Directory)
             == FileAttributes.Directory)
{
    isDir = true;
}
else
{
    isDir = false;
} 
```

但是更简洁。

这不是同一语句中赋值和相等的一些特殊情况。你可以做类似的事情

```
bool bar, baz, qux;
bar = qux = false;
baz = true;
bool foo = (bar || baz || qux); // foo is true 
```

`foo`如果任何标志`bar`、`baz`或`qux`为真，则变为真。您可以评估右值中的任何表达式。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-18T20:37:17.760

`=`是一个赋值运算符，它设置 isDir 的值

`==`是一个比较运算符，正在检查两边的值是否相等

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-18T20:37:06.400

`==`是在 C# 中返回布尔值的运算符。`isDir`正在分配该运算符的结果。这不仅限于 C#，但不一定适用于所有 .net 语言（例如，据我所知，VB .net 仍然使用单等号进行相等测试）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-18T20:41:19.080

此语句正在获取文件路径的属性（其中是标志枚举）与目录的枚举值相结合（这实际上将枚举的所有位擦除为 0，除了表示的位`FileAttributes.Directory`。然后比较结果该操作以查看它是否实际上等于表示 的枚举值`FileAttributes.Directory`。然后将该操作的结果存储在 isDir 变量中。

这段代码相当于：

```
FileAttributes pathAttributes = File.GetAttributes(path);
FileAttributes checkForDirectory = pathAttributes & File.GetAttributes(path);
bool isDir = checkForDirectory == FileAttributes.Directory; 
```

有关标志枚举如何工作（即 FileAttributes 是什么）的更多信息，请参阅： [枚举](http://msdn.microsoft.com/en-us/library/cc138362.aspx)

# jquery - jQuery用户可编辑表格单元格

> ID：10659344
> 
> 赞同：3
> 
> 时间：2012-05-18T20:34:29.630
> 
> 标签：jquery

我研究了几个可编辑的表格插件，但我不确定它们是否真的满足我的需求。我想要做的就是点击 td 元素，获取当前值，然后将 td html 更改为 input + 按钮，当按下按钮时，删除输入和按钮并将新文本放入 td. 这是我所拥有的，它根本不起作用。当你点击一个 td 时，整个表格消失并被一个输入代替。

这是JS：

```
 var selectedObj;

  $('td').click(function(e){
      // Handle the click

     if ($('#currentInput').length == 0)
     {
          selectedObj = $(this);
        var currentValue = $(this).text();
        var newValue = currentValue;

        $(this).html("<input id='currentInput' type='text' value='"+currentValue+"'/> <button onclick='setNewValue()'>Set</button>");
     }

  });
  function setNewValue()
  {
            var newValue = $('#currentInput').val();

        selectedObj.html('');
            selectedObj.text(newValue);
  } 
```

和 HTML：

```
<p> 
<table id='transitTable' border="0" cellspacing="2" cellpadding="2" class='display' width="400">
<tr id='1'>
<td class="etsHeader etsLeft">H1</td>
<td class="etsHeader etsLeft">H2</td>
<td class="etsHeader etsLeft">H3</td>
<td class="etsHeader etsLeft">H4</td></tr>
<tr id='2'>
<td class="etsValue etsOdd etsLeft">R1</td>
<td class="etsValue etsOdd etsLeft">R1</td>
<td class="etsValue etsOdd etsLeft">R1</td>
<td class="etsValue etsOdd etsLeft">R1</td></tr>
<tr id='3'>
<td class="etsValue etsEven etsLeft">R2</td>
<td class="etsValue etsEven etsLeft">R2</td>
<td class="etsValue etsEven etsLeft">R2</td>
<td class="etsValue etsEven etsLeft">R2</td></tr></table></p> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T20:39:28.690

你为什么不试试 contentEditable = true，

[在这里](http://jsfiddle.net/ranganadh/358ES/)检查

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T20:37:41.793

发生这种情况是因为您将 替换为在该上下文中无效`td`的标记。`input`

**违规代码**

`$(this).html("<input id='currentInput' type='text' value='"+currentValue+"'/> <button onclick='setNewValue()'>Set</button>");`

尝试`.append()`将值`td`包装`td`在另一个标签中。

# c# - 将 ObservableCollection 绑定到 ListView

> ID：10659347
> 
> 赞同：10
> 
> 时间：2012-05-18T20:34:49.353
> 
> 标签：c#, wpf, listview, data-binding, observablecollection

我在正确绑定数据时遇到了很多麻烦。我已经从有类似问题的人那里阅读了大多数帖子，但由于某种原因，我无法点击它。

我的表的 XML 是：

```
<Window ... DataContext="{Binding RelativeSource={RelativeSource Self}}" >
...
<ListView Height="124" HorizontalAlignment="Left" Margin="12,46,0,0" Name="listViewDocuments" VerticalAlignment="Top" Width="Auto" DataContext="{Binding DocumentList}">
    <ListView.View>
        <GridView>
            <GridViewColumn Width="160" Header="Description" DisplayMemberBinding="{Binding Description}"/>
            <GridViewColumn Width="160" Header="Date Filed" DisplayMemberBinding="{Binding DateFiled}"/>
            <GridViewColumn Width="160" Header="Filed By" DisplayMemberBinding="{Binding UserFiledName}"/>
            <GridViewColumn Width="150" Header="Page" DisplayMemberBinding="{Binding Pages}"/>
            <GridViewColumn Width="150" Header="Notes" DisplayMemberBinding="{Binding Notes}"/>
            <GridViewColumn Width="Auto" Header="" />
        </GridView>
    </ListView.View>
</ListView> 
```

在我的代码中，我有：

```
public ObservableCollection<Document> _DocumentList = new ObservableCollection<Document>();

...

public ObservableCollection<Document> DocumentList{ get { return _DocumentList; } }

...

public class Document
{
    public string Description { get; set; }
    public string DateFiled { get; set; }
    public string UserFiledName { get; set; }
    public string Pages { get; set; }
    public string Notes { get; set; }
    public string Tag { get; set; }

} 
```

为了更新我使用的表：

```
_DocumentList.Add(new Document
{
    Description = dr["Description"].ToString(),
    DateFiled = dr.GetDateTime(dr.GetOrdinal("DateFiled")).ToShortDateString(),
    UserFiledName = dr["UserFiledName"].ToString(),
    Pages = dr.GetInt32(dr.GetOrdinal("Pages")).ToString(),
    Notes = dr["Notes"].ToString(),
    Tag = dr["FileID"].ToString()
}); 
```

新项目似乎被正确添加，但 listView 上没有任何更新。

我已经阅读了这样的教程：[http ://www.switchonthecode.com/tutorials/wpf-tutorial-using-the-listview-part-1](http://www.switchonthecode.com/tutorials/wpf-tutorial-using-the-listview-part-1)

我已经尝试添加其他帖子中建议的所有通知代码。没有什么对我有用。

想法将不胜感激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-18T20:45:35.410

而不是`DataContext="{Binding DocumentList}"`尝试`ItemsSource="{Binding DocumentList}"`。

# css - 并排 div，边框在其他边框之上

> ID：10659348
> 
> 赞同：0
> 
> 时间：2012-05-18T20:34:56.987
> 
> 标签：css

我工作的网站的当前html是一团糟，一些是因为项目本身（页面彼此不同但有相同的想法，就像报纸一样）还有一些是因为html团队sux，哈哈。

这个想法是我可以有一行，或者两列之间没有边框，两列有边框，或者这些的组合。

我编写了以下 css 和 html，现在看起来很有条理，您可以使用任何组合：

CSS：

```
/* start structure */

div#wrapper {
    margin: 0 auto;
    width: 1024px;
}

.group:after{
    visibility: hidden;
    display: block;
    content: "";
    clear: both;
    height: 0;
}

body {
    font-family: "Trebuchet MS";
}

div#content {
    border: 1px solid #b2b2b2;
}

div.row {
    margin: 10px;
}

div.row.bb {
    margin-bottom: 0;
    padding-bottom: 10px;
    border-bottom: 1px solid #b2b2b2;
}

div.row.bt {
    margin-top: 0;
    padding-top: 10px;
    border-top: 1px solid #b2b2b2;
}

div.column {
    margin: 10px;
    float: left;
}

div.column.left {
    width: 660px;
}

div.column.right {
    width: 322px;
}

div.column.left.br {
    width: 659px;
    margin-right: 0;
    padding-right: 10px;
    border-right: 1px solid #b2b2b2;
}

/* end structure */ 
```

HTML：

```
<div id="wrapper">
    <div id="content">
        <div class="row">a</div>
            <div class="row bt bb">b</div>
            <div class="columns group">
            <div class="column left br"><p>c</p><p>c</p><p>c</p><p>c</p></div>
            <div class="column right">d</div>
        </div>
        <div class="row bt bb">a</div>
        <div class="columns group">
            <div class="column left"><p>c</p><p>c</p><p>c</p><p>c</p></div>
            <div class="column right">d</div>
        </div>
        <div class="row bt">a</div>
    </div>
</div> 
```

但是我发现了一个问题。当使用带边框的两列时`div.column.left.br`，如果右列比左列高，则边框在左列结束的地方结束。我知道我可以通过将边框放在左右列上来解决它，但我以 2 像素边框结束。

如何在我的上下文中解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T20:55:08.400

Add both a `border-left` on the right column and a `border-right` on the left column. Then move the right column to the left `1px`.

[jsFiddle Example](http://jsfiddle.net/gFfCx/)

## New CSS

```
<style type="text/css">
/* start structure */

div#wrapper {
    margin: 0 auto;
    width: 1024px;
}

.group:after{
    visibility: hidden;
    display: block;
    content: "";
    clear: both;
    height: 0;
}

body {
    font-family: "Trebuchet MS";
}

div#content {
    border: 1px solid #b2b2b2;
}

div.row {
    margin: 10px;
}

div.row.bb {
    margin-bottom: 0;
    padding-bottom: 10px;
    border-bottom: 1px solid #b2b2b2;
}

div.row.bt {
    margin-top: 0;
    padding-top: 10px;
    border-top: 1px solid #b2b2b2;
}

div.column {
    margin:10px 0;
    padding: 0 10px;
    float: left;
}

div.column.left {
    width: 660px;
}

div.column.right {
    width: 322px;
}
div.column.left.br + div.column.right {
    border-left: 1px solid #b2b2b2;
    margin-left:-1px;
}

div.column.left.br {
    width: 659px;
    margin-right: 0;
    padding-right: 10px;
    border-right: 1px solid #b2b2b2;
}

/* end structure */
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T20:57:56.603

您需要一些额外的类来定义哪一列将是较高的一列并将边框放在该列上

就像是

```
<div class="tallerLeft">
    <div class="left"> 
```

但这不是很灵活，特别是如果您的内容是动态的

# php - 通过 PHP 执行 wget

> ID：10659355
> 
> 赞同：2
> 
> 时间：2012-05-18T20:35:49.407
> 
> 标签：php, bash, unix, wget

我正在使用 php 中的 wget 命令来下载 css 样式表及其依赖项。

```
exec ("wget -p --convert-links -nH -nd --no-check-certificate http://infidelphia.com/style.css -P /home/devuser/public_html/Tset/"); 
```

有一个样式表和几个图像。当我在命令行中执行它时：

```
wget -p --convert-links -nH -nd --no-check-certificate http://infidelphia.com/style.css -P /home/devuser/public_html/Tset/ 
```

我看到其中一个资源有 404，但下载后其他所有资源都很好。

但是，当我通过 PHP 执行此资源时，跳过此资源后的所有内容。有什么方法可以确保跳过失败的下载/错误并且可以下载其余资产？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T21:08:06.150

有时，我使用 php curl 下载文件，例如：

```
$rutaArchivo = '/home/devuser/public_html/Tset/style.css';
$urlArchivo = 'http://infidelphia.com/style.css';

$fp = fopen ($rutaArchivo, 'w+');
$ch = curl_init($urlArchivo);

curl_setopt($ch, CURLOPT_TIMEOUT, 50);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_FILE, $fp);
curl_exec($ch);

$httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
$this->httpCode = $httpCode;

curl_close($ch);
fclose($fp);

if ($httpCode != 200) {
    unlink($rutaArchivo);
    echo 'Download error, deleting the empty file';    
} else {
    echo 'Download ok';
} 
```

好样的！

# java - Java -> C++ TCP Socket 直到关闭才发送

> ID：10659361
> 
> 赞同：0
> 
> 时间：2012-05-18T20:36:05.943
> 
> 标签：java, c++, sockets, tcp, stream

我面临另一个 TCP 套接字问题。我已经阅读了大量问题以及类似问题的答案，但我的问题在某种程度上有所不同。

我有一个 Java 客户端和 C++ 服务器。一切都按预期进行，直到我使用不同的机器（到目前为止等于其他问题）来自客户端的消息似乎卡在了 den TCP 缓冲区中。当我最终关闭套接字时，所有内容都发送到服务器。但是这些单条消息是控制消息，所以我需要立即发送它们。据我所知，这是预期的行为，但我如何发送可靠的控制消息。

有没有办法强制发送消息。（我可以让套接字打开几分钟而不发送任何内容。）

有什么不对？（见以下代码）

我每次都必须关闭套接字才能执行真正的刷新吗？

我是否应该使用 UDP 来替代协议工作量？

Java代码：

```
mSocketSend = new Socket();
mSocketSend.connect(new InetSocketAddress(mServerIp, mSocketPortSend), mTimeOut);
PrintWriter pw = new PrintWriter(mSocketSend.getOutputStream(), true);
pw.println(data); 
```

C++ 代码：

```
 opening socket...(i leave that)
   char* buffer = new char[1024];
   int rc = recv(mConnectedSocket, buf, 1024, 0); 
```

如果你想要更多。写下来。我几乎把所有东西都留下了。^^ 我不认为它相关。沟通通常很顺利.. 完全没有错误。所以它只是这个 TCPBuffer 东西。

我知道应该有一些分隔符或消息长度的东西。但实际上：没有发送的消息长度没有帮助。^^

谢谢你的帮助。

编辑#01 整个代码：

```
mSocket->createSocketServer(22);
    char* buffer = new char[1024];
 while(true){

        int numberBytes = mSocket->receiveChars(buffer, 1024);

        if (numberBytes > 0){
            uninterestingHandlingFunction(buffer);
        }else{
            mSocket->createSocketServer(22);
        }
    }

bool Socket::createSocketServer(u_short port)
{
    if (mConnectedSocket != INVALID_SOCKET)
    {
        closesocket(mConnectedSocket);
    }

    if (s == INVALID_SOCKET)
    {
        WSADATA wsa;

        if (WSAStartup(MAKEWORD(2,0), &wsa) != 0)
            return 0;

        s = socket(AF_INET, SOCK_STREAM, 0);
        if (s == INVALID_SOCKET)
            return 0;

        SOCKADDR_IN addr;
        memset(&addr, 0, sizeof(SOCKADDR_IN));
        addr.sin_family=AF_INET;
        addr.sin_port=htons(port);
        addr.sin_addr.s_addr=ADDR_ANY;

        if (bind(s, (SOCKADDR*)&addr, sizeof(SOCKADDR_IN)) == SOCKET_ERROR)
        {
            s = INVALID_SOCKET;
        } else if (listen(s, 10) == SOCKET_ERROR)
        {
            s = INVALID_SOCKET;
        }

        if (s == INVALID_SOCKET)
        {
            closesocket(s);
            return 0;
        }
    }
    mConnectedSocket = accept(s, NULL, NULL);

    if (mConnectedSocket == INVALID_SOCKET)
    {
        closesocket(s);
        return 0;
    }
    return 1;
}

int Socket::receiveChars(char* buf, unsigned maxSize)
{
    if (mConnectedSocket == INVALID_SOCKET)
        return -1;

    int rc = recv(mConnectedSocket, buf, maxSize, 0);
    if (rc == SOCKET_ERROR)
    {
        std::cout << "Socket: error " << WSAGetLastError() << std::endl;
    }
    return rc;
} 
```

你想要的......

编辑＃2再试一次

我尝试过的东西很少。起初：这个问题不会每次都在通过真实网络连接的设备上发生。-> 完全重启客户端和服务器 -> 问题没有发生 -> 完全重启客户端和服务器 -> 问题发生

可悲的是，我不知道从这个习惯中得到什么。

我偶然发现的另一件事是绑定和侦听套接字（在 Code SOCKET 中）。此套接字侦听连接，如果工作线程需要一个新连接（在启动时或先前关闭时），则套接字 s 将下一个排队连接提供给 mConnectedSocket 以进行接收，其他连接在处理一个连接时会积压。从 Java 视图：连接了一个 Socket（设备 A）。下一个套接字（设备 B）尝试连接。-> 连接成功（如果确实发生，则在代码中正确控制）-> 随后以自然方式发送数据。（socket还在c++端的积压中）

嗯，这很难转变为我所经历的习惯。我会尽量表达我的想法。Javaside：创建 PrintWriter。输入数据并刷新。因为连接没有完全建立（C++端没有额外的connectedSocket）。冲洗不起作用。并且 onClose 套接字最终刷新其内容。

如果你这么认为，请告诉我闭嘴。我真的不知道“连接积压”在实施中的实际含义”^^

我知道，我应该为每个连接打开一个新线程，但我现在不能。所以坚持使用这个服务器代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T20:37:48.687

您需要执行flush()，将数据推出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T21:34:50.767

解决它。有点尴尬...我在编辑中注意到的积压确实是问题所在。如果一次有两个客户端连接到服务器，则第二个客户端会积压，当第一个客户端断开连接时，他的消息将被处理。

另外（这里有线索）

如前所述，它是一个 android java 客户端。java端还有另一个线程从C++服务器接收数据。此套接字连接到另一个端口。但是我在设置活动中设置了要连接的端口和 IP 地址，并且另一个套接字的默认端口有一个坏端口（与 issuesocket 相同，采用了错误的变量）所以这个套接字首先连接，并且 issuesocket 连接到积压。仅当我输入设置以设置另一个 IPAddress 时才采用此默认值（例如，当我连接到远程主机而不是 localhost 时）

难以置信的情况...我什至没有写设置...

WIRESHARK 会解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T20:46:13.883

```
PrintWriter.flush(); 
```

或者使用具有自动冲洗功能的写入器。

您还应该确保服务器读取一行（直到 \n）而不是完整的 1024 个字符，但我不知道 recv() 是做什么的，所以我不知道。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T20:47:47.560

```
PrintWriter pw = new PrintWriter(mSocketSend.getOutputStream(), true);
pw.println(data);
pw.flush(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T20:49:24.977

当您使用自动刷新甚至尝试使用显式`flush()`：

可能是因为您没有打开 inputStream。试着做一个`getInputStream()`。

否则，您是否尝试过：

1.  您不使用的任何差异，`connect`而是直接在`Socket`构造函数中提供参数？

2.  `setTcpNoDelay`在套接字上（虽然不应该造成几分钟的延迟！！）？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-19T12:10:58.340

您的循环编码不正确。每个新的 recv() 都会覆盖前一个。您应该提前偏移参数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-18T20:55:34.063

Actually your problem could be on the receiving end, your `recv` needs to be in a loop (you can google for examples of this). There is no guarantee not much each call to `recv` will get. If you know you are flushing the data on the Java site, that's probably your problem.

# android - android 中的新语言环境（乌尔都语/巴基斯坦）

> ID：10659366
> 
> 赞同：1
> 
> 时间：2012-05-18T20:36:29.147
> 
> 标签：android, locale

> **可能重复：**
> [以编程方式设置区域设置](https://stackoverflow.com/questions/4985805/set-locale-programatically)

我是android的初学者。制作我的第一个应用程序，我想做的就是将我的应用程序本地化为乌尔都语/巴基斯坦语。我应该怎么办。我在哪里可以获得所有 android 语言环境的列表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T21:00:05.960

[这篇文章](http://www.tutorialforandroid.com/2009/01/force-localize-application-on-android.html)可能会有所帮助，乌尔都语 - 巴基斯坦的代码是 ur-PK，可能不存在供您使用。可以在[此处](https://bugzilla.mozilla.org/show_bug.cgi?id=596004)或[此处](http://developer.android.com/reference/java/util/Locale.html)找到所有 android 语言环境的列表。也看看[本地化教程](http://developer.android.com/resources/tutorials/localization/index.html)

* * *

如果你想使用**urdu**字体在视图中显示文本（比如 TextView），那么：

* * *

## 将自定义字体设置为 TextView 的代码：

**假设您在assets**文件夹下的**fonts**文件夹中有一个 urdu ttf 字体say( **URDU.ttf** ) 字体：

 ****```
 Typeface tf = Typeface.createFromAsset(getAssets(), "fonts/URDU.ttf");               
    TextView tv = (TextView) findViewById(R.id.txtview);
    tv.setTypeface(tf); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T20:42:32.560

你可能想看看[这个问题](https://stackoverflow.com/questions/4985805/set-locale-programatically)。对于 urdu-pakistan，您也可以从[这里获取代码](http://en.wikipedia.org/wiki/ISO_639-1)****

# php - 如何为多种语言编写 htacess 文件？

> ID：10659379
> 
> 赞同：0
> 
> 时间：2012-05-18T20:37:23.810
> 
> 标签：php, .htaccess

我正在为一个网站编写代码，它将选择加载哪种语言：

```
if(isset($_GET['language']) && $_GET['language']=='jp') include(lozalize/jp.php);
else include(lozalize/en.php); 
```

但是，我想要一个不错的网址：

```
www.site.com/en/
www.site.com/en/contact
www.site.com/en/projects/project1 
```

其中contact、projects 和project1 是具有自己的index.php 的文件夹。

我怎样才能写一个 .htaccess 文件（如果这甚至是答案！）没有像这样的链接：

www.site.com/contact/?language=en

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T10:13:10.300

```
RewriteEngine On
RewriteBase /
RewriteRule ^(en|jp)/(.*)$ /$2?language=$1 [QSA,L] 
```

# php - 编写 var_dump($result); 到文本文件

> ID：10659382
> 
> 赞同：0
> 
> 时间：2012-05-18T20:37:35.463
> 
> 标签：php

```
$myFile = "testFile.txt";
$fh = fopen($myFile, 'w');

fwrite($fh, $contact_first_name);         

$result = user_profile_xml($data);

echo '<br>begin response:<br>';
echo '<pre>';
var_dump($result);
echo '</pre>';
echo'<br>end response<br>'; 
```

我想写 var_dump($result); 到文本文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T20:56:12.790

var_dump 不返回任何内容，因此您不能将其放入另一个变量中。

请改用[http://www.php.net/manual/en/function.var-export.php](http://www.php.net/manual/en/function.var-export.php)！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-05T12:55:07.010

试试 PHP5: 类 x { ... }

```
 $obj = new x();

    ob_start();              // open data buffer for echoed data
    var_dump($obj); 
    $var = ob_get_clean();   // return "echoed" data and free buffer 
```

# jsf - Primefaces如何更新对话框中的内容并保持对话框居中？

> ID：10659389
> 
> 赞同：18
> 
> 时间：2012-05-18T20:38:07.600
> 
> 标签：jsf, jsf-2, primefaces

我有一个在页面加载时不包含任何内容的对话框，并且我正在根据用户单击的链接动态设置对话框的内容。

```
<p:dialog widgetVar="dlg" modal="true" id="dialog">
    <p:panel id="fullArticle">
        <h:outputText value="#{content.newsArticle}" escape="false" />
    </p:panel>
 </p:dialog>
...
...
<p:commandLink value="Read more" actionListener="#{content.getFullArticle}" onclick='dlg.show();' update=":fullArticle">
    <f:attribute name="contentId" value="#{news.contentId}" />
</p:commandLink> 
```

我遇到的问题是，当您单击“阅读更多”链接时，它会显示对话框，但对话框不在页面中心。如果我将 commandLink 上的 udpate 属性更改为`update=":dialog"`，则对话框会闪烁，好像它正在打开然后立即关闭。

如何更新对话框并使其以动态内容为中心？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-18T20:39:59.967

在ajax 请求*之前*`onclick`执行。您需要打开对话框。这将在 ajax 请求和更新*之后执行。*除非其属性评估，否则默认情况下是隐藏的。*`oncomplete`*`<p:dialog>``visible``true`**

 **```
<p:commandLink value="Read more" actionListener="#{content.getFullArticle}" 
    update=":dialog" oncomplete="dlg.show()"> 
```

* * *

**与具体问题无关**，您是否知道自 EL 2.2 以来您可以将完全有价值的对象作为方法参数传递？这使得`<f:attribute>`and `actionListener`“hack” 是多余的：

```
<p:commandLink value="Read more" action="#{content.getFullArticle(news)}" 
    update=":dialog" oncomplete="dlg.show()" /> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-21T10:35:36.517

我有同样的问题。更新对话框使其消失并重新出现（并忘记它的位置）。

为了解决这个问题，我在对话框内容周围创建了一个包装标签。

```
<p:commandLink update=":playerViewDialogHeader,:playerViewDialogContent"
               oncomplete='playerViewDialogJS.show()' value='#{item.name}' />

<p:dialog id='playerViewDialog' widgetVar='playerViewDialogJS'>

   <f:facet name="header">
      <h:outputText id="playerViewDialogHeader" value="#{playerController.objectView.name}" />
   </f:facet>

   <h:form id='playerViewDialogContent'>
      <!-- CONTENT GOES HERE -->
   </h:form>

</p:dialog> 
```**

# php - 如何通过 mysql 查询插入包含逗号的字符串？

> ID：10659397
> 
> 赞同：2
> 
> 时间：2012-05-18T20:38:34.243
> 
> 标签：php, mysql, sql

我有一个包含 3 列的表：`id`、`food_name`和`category`。例如，我有`$food_name = "Amaranth grain, cooked"`（有一个逗号）和`category = "Cereals"`.

我无法插入值并出现以下错误：

```
Could not connect: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')
      VALUES ('Amaranth grain, cooked', )' at line 1 
```

我的 SQL 查询是：

```
$results1 = mysql_query("
  INSERT INTO " . $table . " (food_en, category)
  VALUES ('" . $food_name . "', '" . $category . "')"
)or die(mysql_error()); 
```

我的猜测是“Amaranth grain,cooked”中的逗号有问题，但我无法解决。我试过了`str_replace(',', '\,', $food_name)`，`mysql_real_escape_string()`但没有成功。我可能没有正确使用它们。

提前致谢。

**编辑：我确实回显了 $category，它既不是 null 也不是空的（值是'谷物'）。**

当我打印而不是使用 mysql_query 时，我得到：

```
INSERT INTO calories (food_en, category)
      VALUES ('Amaranth grain, cooked', 'Cereal Grains and Pasta')
      INSERT INTO carbohydrates (food_en, category)
      VALUES ('Amaranth grain, cooked', 'Cereal Grains and Pasta')
      INSERT INTO fats_and_fatty_acids (food_en, category)
      VALUES ('Amaranth grain, cooked', 'Cereal Grains and Pasta')
      INSERT INTO protein_and_amino_acids (food_en, category)
      VALUES ('Amaranth grain, cooked', 'Cereal Grains and Pasta')
      INSERT INTO vitamins (food_en, category)
      VALUES ('Amaranth grain, cooked', 'Cereal Grains and Pasta')
      INSERT INTO minerals (food_en, category)
      VALUES ('Amaranth grain, cooked', 'Cereal Grains and Pasta')
      INSERT INTO sterols (food_en, category)
      VALUES ('Amaranth grain, cooked', 'Cereal Grains and Pasta')
      INSERT INTO other (food_en, category)
      VALUES ('Amaranth grain, cooked', 'Cereal Grains and Pasta')Could not connect: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')
      VALUES ('Amaranth grain, cooked', )' at line 1 
```

（不同的表只是我希望将行插入的不同表）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-12T09:17:01.007

由于逗号，您的查询没有问题。由于您要将记录插入到不同的表中，因此您需要使用`query-separator`or分隔每个查询`query-delimiter`。

```
INSERT INTO calories (food_en, category)
      VALUES ('Amaranth grain, cooked', 'Cereal Grains and Pasta'); <-- Notice semi colon at end of query

INSERT INTO carbohydrates (food_en, category)
      VALUES ('Amaranth grain, cooked', 'Cereal Grains and Pasta'); <-- Notice semi colon at end of query

INSERT INTO fats_and_fatty_acids (food_en, category)
      VALUES ('Amaranth grain, cooked', 'Cereal Grains and Pasta'); <-- Notice semi colon at end of query 
```

在示例小提琴中，我用 a 分隔每个查询，`semi-colon`并且查询插入时没有问题。

在此处参考小提琴：[http ://sqlfiddle.com/#!2/ec94bc/1](http://sqlfiddle.com/#!2/ec94bc/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T20:42:39.390

只要字符串用引号括起来（就像你在这里用单引号一样），那么你的字符串中就可以有逗号。实际错误可能与 $category 似乎是空字符串或 null 的事实有关，因为它说：

```
VALUES ('Amaranth grain, cooked', ) 
```

确保您回显了 sql 查询，以确保它完全符合您的预期。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-08-11T18:52:19.543

您可以使用 php 函数 addlashes 或 mysql_real_escape_string 将斜杠放在 mysql 中每个有意义的字符之前。

# css - 有没有办法在不注册的情况下使用 disqus 接收评论通知？

> ID：10659399
> 
> 赞同：0
> 
> 时间：2012-05-18T20:38:37.780
> 
> 标签：css, disqus, comments

我正在使用 Disqus，我正在尝试找到一种方法，让评论者无需注册 disquis 即可接收对其评论（或新评论）的回复通知。如果使用原生 wordpress 评论，人们可以选中“接收通知”的小框，并在有新评论时接收消息。但是，当使用 disqus 时，人们必须注册才能接收这些通知。许多评论者不想注册其他服务，因此人们不会收到通知。有什么方法可以让人们更容易收到通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T16:16:49.560

经过与disqus的研究和交谈，这是做不到的。作为一项免费服务，他们希望将用户引导回他们的网站以设置一个帐户，以获得评论回复等功能。我决定回到 wordpress 原生评论。

# asp.net-mvc - ASP.NET MVC 读取控制器其他实体

> ID：10659411
> 
> 赞同：1
> 
> 时间：2012-05-18T20:39:53.420
> 
> 标签：asp.net-mvc, entity-framework

我有 2 个带有 OrdersController 和 ItemsController 的实体 Orders 和 Items。在我的订单索引视图中，我有一个 webgrid

```
grid.Column(columnName: "OrderNo", header: "Order No.", canSort: true),
grid.Column(columnName: "OrderDate", header: "Order Date", canSort: true),                                                                                        
grid.Column(" ", " ", format: @<a href="@Url.Action("Index", "Items", new { id = item.OrderNo })">Items</a>) 
```

在 ItemsController 中，我向 Index 添加了一个参数：

```
public ActionResult Index(string id = "0")
    {
        var orderq = from a in db.items
                        where a.OrderNo== id
                        select a;
        return View(orderq.ToList()); // ex : orderq.Count = 2
    }...
    protected override void Dispose(bool disposing)
    {
        db.Dispose();
        base.Dispose(disposing);
    } // Object reference not set to an instance of an object 
```

但是我得到*对象引用未设置为对象的实例。*

问：我需要做什么才能从我的订单中打开商品视图？

我是否必须清除上下文并再次声明？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T15:27:35.583

订单.cshtml

```
grid.Column(" ", " ", format: @<a href="@Url.Action("Index", "Items", new { id = item.OrderNo})">Items</a>))); 
```

项目控制器.cs

```
public ActionResult Index(string id = "0")
    {
        var itemsqry = db.items.Where(a=>a.OrderNo == id);
        return View(itemsqry .ToList());
    } 
```

# excel - 在 Excel 中添加新行而不破坏使用 Range.Value 的 vba 宏

> ID：10659415
> 
> 赞同：2
> 
> 时间：2012-05-18T20:40:18.583
> 
> 标签：excel, vba, range

我在 VBA 中编写了一个宏，它只是从该工作表的另一个单元格中填充给定单元格的值。我对工作表中的许多单元格执行此操作，并且这样做是这样的：

```
Range("B3").Value = Range("B200")
Range("B4").Value = Range("B201")
'etc. 
```

现在，我经常通过插入新行来添加值，所以我可能会在 B200 和 B201 之间插入一个新行，这会破坏宏，因为当我插入新行时它不会自动更新。

如何对宏进行编码，以便在插入新行或列时自动更新单元格引用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T00:41:41.133

我的建议是确保您要从中检索值的 ROW 中具有唯一值，您可以随时 .FIND 查找，然后从找到的单元格行的 B 列中获取您的值。所以现在你想在 B200 中获得一个值，而 A200 中总是有文本：**“Final Total”**，这是独一无二的。

```
Dim MyRNG As Range

Set MyRNG = Range("A:A").Find("Final Total", LookIn:=xlValues, LookAt:=xlWhole)
Range("B3").Value = Range("B" & MyRNG.Row)
Range("B4").Value = Range("B" & MyRNG.Row + 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T20:45:36.190

尝试为范围命名。如果您按名称引用范围，Excel 将搜索它并检索定义它的行。添加新行时，范围名称会更新其定义。

除了以上内容，我认为本教程说明了我的观点： http: [//www.homeandlearn.co.uk/excel2007/excel2007s7p6.html](http://www.homeandlearn.co.uk/excel2007/excel2007s7p6.html)这是如何定义范围的名称。

本教程解释了如何在宏和 vba 上使用它：http: [//excel.tips.net/T003106_Using_Named_Ranges_in_a_Macro.html](http://excel.tips.net/T003106_Using_Named_Ranges_in_a_Macro.html)

我希望这会有所帮助：D

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T22:40:09.617

**这不是一个答案，而是一个替代方案。**

正如 Shiin 建议的那样，命名你的范围是要走的路，但是如果你有 500 个单元格，那么就像我之前提到的那样，命名 500 个单元格并在你的代码中使用它们可能会非常痛苦。另一种方法是使用智能代码。举个例子

假设您有这样的代码

```
Sub Sample()
    Range("B3").Value = Range("B200")
    Range("B4").Value = Range("B201")
    Range("B5").Value = Range("B201")
    ' And
    ' So On
    ' till
    Range("B500").Value = Range("B697")
End Sub 
```

编写此代码的最佳方法是这样的

```
Sub Sample()
    Dim i As Long

    For i = 200 To 697
        Range("B" & i - 197).Value = Range("B" & i)
    Next i
End Sub 
```

并说如果你在第 300 行插入一行，那么只需将上面的代码分成两部分

```
Sub Sample()
    Dim i As Long

    For i = 200 To 299
        Range("B" & i - 197).Value = Range("B" & i)
    Next i

    For i = 301 To 698
        Range("B" & i - 197).Value = Range("B" & i)
    Next i
End Sub 
```

因此，每次插入一行时，只需将 for 循环分成一个额外的部分。这看起来很乏味，但比命名 500 个单元格并在代码中使用它们要好得多。

**如果您打算只使用一次宏（即使用 1 次），请提前阅读**。

如果您担心当用户插入行时单元格不会更新，那么您可以分配一个公式而不是分配一个值。

例如

```
Range("B3").Formula = "=B200" 
```

`=B200`这将在单元格中放置一个公式`B3`。所以下次当你插入一行以便第 200 行移动它的位置时，你会注意到公式会自动在单元格中更新`B3`

高温高压

# asp.net - 我应该将启动 python 进程包装在另一个可执行文件中吗？

> ID：10659416
> 
> 赞同：0
> 
> 时间：2012-05-18T20:40:18.987
> 
> 标签：asp.net, python, security

所以我有一个公开 Python API 的第 3 方应用程序。我有一个 python 脚本，它可以完成我需要它来处理那个 3rd 方应用程序。

python 脚本仅使用命令行参数，没有用户输入并写入标准输出。

我正在将它连接起来，以便在运行时从 ASP.NET 网站启动。由于 python 是如此强大，我想知道从安全的角度来看，创建一个新的可执行文件是否有意义，该可执行文件使用硬编码或本地读取（App.Config）脚本路径启动 python 进程并将其命令行参数复制到蟒蛇进程。

这个新的可执行文件将从 .NET 应用程序启动，以防止攻击者上传和启动任意 python 代码？这是否否定了任何攻击媒介，还是只是额外的复杂性？

另外，我不能使用 IronPython，因为第 3 方扩展仅是为 CPython 编写的。

代码思路：

```
Process p = new Process();
p.StartInfo.FileName = "python.exe";
p.StartInfo.Arguments = "goodscript.py \"" + argument1.Replace("\"","\\\"") + "\" \"" +
  argument2.Replace("\"","\\\"") + "\"";
p.Start(); 
```

我担心可能会注入像 -i 这样的命令行开关，或者可能会以某种方式将 goodscript.py 的文件路径更改为指向另一个脚本。我想如果后者是可能的，那么 python.exe 的文件路径实际上可以更改为另一个可执行文件路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T21:16:31.923

示例代码肯定存在安全问题。我不确定 Process.StartInfo 如何在那里工作；如果它在执行子进程之前拆分了参数，或者如果它使用一些 shell 来为你做这件事，但无论哪种方式，攻击者至少有空间在参数字符串中放置反斜杠并欺骗你的双引号转义。

如果您有其他方法来单独传达参数，而不是尝试将它们打包成一个字符串并让其他东西将它们分开，那将是更可取的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T02:55:58.070

您的 Python 脚本将被网站调用。如果有人可以使用该网站来使用不同的参数调用 Python 脚本，或者执行不同的脚本，或者其他什么，那么**这就是**安全漏洞。它与“Python 如此强大”无关，这将是调用**任何**语言的安全问题

您认为用其他东西包装 Python 脚本并调用它会如何影响呢？有人可以导致调用不同的可执行文件，或者使用不同的参数或不同的数据调用，在这种情况下，无论你调用什么语言，你都会被搞砸。或者他们不能，在这种情况下，无论您使用哪种语言都可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T02:46:58.683

就目前而言，您的脚本不仅增加了复杂性，而且实际上打开了一个安全漏洞。也就是说，您将参数传递给必须解析的单个字符串，而不是作为预标记的字符串列表。

# iphone - 需要安装一个 iPhone 应用程序预发布

> ID：10659417
> 
> 赞同：0
> 
> 时间：2012-05-18T20:40:25.970
> 
> 标签：iphone, release, device

我不是 iphone 程序员，但这是我的问题：

我在 x-code 中有一个 iPhone 应用程序的源代码，我需要将它上传到一个 ftp 服务器中以允许我的客户端安装和测试预发布，但我需要在应用程序的某个位置添加他的设备 ID能够将其安装在他的 iPhone 中，我有设备 ID，但我不知道如何将其添加到应用程序中。

任何人都可以帮助我，如果您有文档或良好的链接，请将它们发送给我，请提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T20:42:22.960

最好的方法是使用以下服务之一：

[https://testflightapp.com/](https://testflightapp.com/)

或者

[http://www.hockeyapp.net/](http://www.hockeyapp.net/)

这些使得注册客户端设备和安装预发布版本变得更加容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T20:43:46.557

您必须登录[Apple Developer Portal](http://developer.apple.com/ios)并在相应部分添加他的设备 ID，然后您可以使用[TestFlight](http://testflightapp.com)和门户中的配置文件，让人们“预发布”使用它

# javascript - 如何将关联数组加入字符串

> ID：10659418
> 
> 赞同：16
> 
> 时间：2012-05-18T20:40:26.733
> 
> 标签：javascript, string, join, associative-array

我现在正在尝试这样做，我想知道是否有一种“最常用”的方法可以将关联数组（它的值）加入到由字符分隔的字符串中。

例如，我有

```
var AssocArray = { id:0, status:false, text:'apple' }; 
```

连接此对象的元素产生的字符串将是

```
"0, false, 'apple'" or "0, 0, 'apple'" 
```

如果我们用“，”字符加入他们有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-18T20:42:33.053

```
Object.keys(AssocArray).map(function(x){return AssocArray[x];}).join(','); 
```

PS：某处有`Object.values`方法，但这不是标准。还有像`hashish`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-18T20:44:42.647

只需循环遍历数组。JavaScript 中的任何数组都有索引，甚至是关联数组：

```
 var AssocArray = { id:0, status:false, text:'apple' };
    var s = "";
    for (var i in AssocArray) {
       s += AssocArray[i] + ", ";
    }
    document.write(s.substring(0, s.length-2)); 
```

将输出：`0, false, apple`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-18T20:47:03.037

`Object.map`等功能的实现`Object.forEach`仍在讨论中。现在，你可以坚持这样的事情：

```
function objectJoin(obj, sep) {
    var arr = [], p, i = 0;
    for (p in obj)
        arr[i++] = obj[p];
    return arr.join(sep);
} 
```

**编辑**：使用临时数组并加入它而不是字符串连接以提高性能。

**编辑 2**：似乎在大多数最近的浏览器中，`arr.push(obj[p]);`实际上不是增加计数器而是*更快。*看评论。

# iphone - IOS城市飞艇。如何处理通知

> ID：10659426
> 
> 赞同：2
> 
> 时间：2012-05-18T20:41:07.577
> 
> 标签：iphone, ios, xcode, urbanairship.com

我对此很陌生。我实施了 Urban Airship 推送通知并使其正常工作。现在我需要实现如何处理推送通知。我想显示一个选项卡或当用户单击通知时。

感谢任何帮助。

这是来自城市飞艇的指令，我不知道如何实施`UAPushNotificationDelegate`。

> ### 处理通知
> 
> iOS 会处理在应用程序外部收到的推送通知，但如果在应用程序运行时收到通知，则由应用程序开发人员来处理。
> 
> 示例 UI 包含一个`UAPushNotificationDelegate`处理警报、声音和徽章的实现，但是如果您希望自定义此行为，您可以提供自己的实现：
> 
> ```
> [UAPush shared].delegate = customPushDelegate; 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T20:47:19.637

您将侦听应用程序委托方法并处理通知：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{
    if ( application.applicationState == UIApplicationStateActive )
    {
        //do your handling here
    }
} 
```

如果你传入自定义 json 对象，你也会在这里解析它

# android - 如何使用monkeyrunner结束来电？

> ID：10659427
> 
> 赞同：1
> 
> 时间：2012-05-18T20:41:10.497
> 
> 标签：android, testing, monkeyrunner

我已经启动并运行了monkeyrunner：我使用monkeyrunner 安装我的.apk 并`device`准备好一个对象。换句话说

```
device.press('KEYCODE_MENU', 'DOWN_AND_UP') 
```

完美运行。

我使用`expect`telnet 到我的一个 android 模拟器并`gsm call SOME_NUMBER`模拟和来电。

我尝试通过以下方式拒绝此呼叫：

```
device.press('KEYCODE_ENDCALL', 'DOWN_AND_UP') 
```

但它什么也没做......我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:54:30.447

如果您正在使用

```
gsm call SOME_NUMBER 
```

开始通话。你可以使用

```
gsm cancel SOME_NUMBER 
```

拒绝来电或

```
gsm accept SOME_NUMBER 
```

接受它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T00:29:39.627

据我所知，没有可靠的方法来使用 MonkeyRunner 结束通话。我不确定为什么会这样。

[这里](https://stackoverflow.com/questions/5690415/monkeyrunner-and-endcall)的问题提供了一些解决方案。

您也可以尝试这样做：

```
device.press('KEYCODE_HEADSETHOOK', 'DOWN_AND_UP') 
```

在某些设备上使用耳机挂钩键码对我有用，但对其他设备无效。

我发现使用 MonkeyRunner 结束通话的最可靠方法是使用菜单按钮。我在上面链接的问题的答案中谈到了这一点。

# browser - 移动版 PC 版谷歌浏览器（面向开发者）

> ID：10659428
> 
> 赞同：4
> 
> 时间：2012-05-18T20:41:11.717
> 
> 标签：browser, emulation, desktop, simulator, mobile-browser

您能否建议如何最好地测试 Google Chrome 移动版的网站...？我知道 Opera Mobile 和 Mozilla Firefox 是桌面模拟器，但我还没有看到 Chrome 的模拟器。也许我只是看起来很糟糕？

例如：

**Mozilla Firefox** - [http://www.mozilla.org/en-US/mobile/](http://www.mozilla.org/en-US/mobile/) (fennec)

**歌剧**- [http://www.opera.com/developer/tools/mobile/](http://www.opera.com/developer/tools/mobile/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:16:10.713

很老的问题，但以防其他人将来遇到它；

我找到的最佳解决方案是这个； [https://developers.google.com/chrome-developer-tools/docs/remote-debugging?hl=tr](https://developers.google.com/chrome-developer-tools/docs/remote-debugging?hl=tr)

最好的部分是，它的工作！

PS：如果“adv devices”命令不起作用，请确保您的 PC 上安装了手机的 USB 驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T12:49:24.040

为此，Google Chrome Canary 可以成为更好的替代品。我使用 Chrome Canary 进行测试。 [https://developers.google.com/chrome-developer-tools/docs/mobile-emulation](https://developers.google.com/chrome-developer-tools/docs/mobile-emulation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-06T08:13:33.560

使用浏览代理切换器很容易浏览nay站点的移动版本，所有浏览器都有浏览器代理切换器，更多关于[在台式电脑上浏览移动版本站点的信息在](https://talktopoint.com/browse-mobile-version-of-site-on-desktop/)这里阅读。

# java - 使用现有的 Java 类作为 XSD 中的类型

> ID：10659437
> 
> 赞同：0
> 
> 时间：2012-05-18T20:42:00.020
> 
> 标签：java, jaxb

是否可以在 xsd 中定义一个使用现有 Java 类作为扩展基础的类型？

我的基类有一些函数，其中包含业务逻辑。我希望我的自动生成的 bean 也具有这些功能。我能想到的唯一方法是让我的 XSD 中的类型扩展这个基类。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T18:06:59.007

您可以使用[JAXB2 Basics中的](http://confluence.highsource.org/display/J2B/Home)[继承插件](http://confluence.highsource.org/display/J2B/Inheritance+plugin)来实现此目的。

# arrays - 以伪代码输入二维数组的数据

> ID：10659439
> 
> 赞同：0
> 
> 时间：2012-05-18T20:42:21.203
> 
> 标签：arrays, algorithm, pseudocode

问题是当列号未知时，我不确定如何将数据从键盘加载到二维数组。具体来说，我需要一个程序来存储 4 个科目的学生成绩，而不知道实际的学生人数。

我想出了这个（我相当肯定这个决定是错误的，但这是我迄今为止最好的决定）：

```
Declare Grades as dynamic two dimentional array of int
 Loop: Subject = 1 to 4
 Print 'Enter students grades for subject' + Subject#
 Print 'Enter * when done'
 If Grades <=100 && Grades >=0 then
  While Grades <> '*'
   Enter Grades w/o cursor return
  WhileEnd
  Else
   Print 'Enter a valid grade'
 EndIf
 LoopEnd: Subject 
```

我想从这段代码中并不清楚 Subject 循环是如何工作的，即它何时从 subject1 转到 subject2 等等。我最初认为要实现目标，我只需要返回光标（这将在用户输入'*'后完成），但这几乎不是真的，是吗？

那么请您帮我更好地理解这个问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T12:06:10.023

您的伪代码有一些问题：

1.  您正在尝试在阅读之前验证成绩
2.  您没有明确填充二维数组 Grades
3.  您没有处理数组中的学生索引

如果您想遍历主题然后遍历学生，您可以这样做：

```
Declare Grades as dynamic two dimensional array of int
 Loop: Subject = 1 to 4
   Print 'Enter students grades for subject' + Subject#
   Print 'Enter * when done'
   initialize student = 1
   Repeat 
     Read Grades[student, subject] from the keyboard
     If Grades[student, subject] <=100 && Grades[student, subject] >=0 then
       student = student + 1
     Else
      Print 'Enter a valid grade for ' + student + ' in subject ' + subject
     EndIf
   Until Grades = '*'
 LoopEnd: Subject 
```

# css - 有没有办法让两个对象在 IE7 的按钮内排列？

> ID：10659448
> 
> 赞同：0
> 
> 时间：2012-05-18T20:42:34.053
> 
> 标签：css, xhtml, internet-explorer-7

这个错误已经让我发疯了几天，我就是无法让它工作。

基本上，我在按钮内有一个图标和文本。我希望它们正确排列，但 IE7 将它们堆叠在一起。除非我给按钮一个特定的宽度，否则文本和图像将无法正确排列。谁能帮我吗？提前致谢。

这是一个简单的例子：

```
<button><div class="test" style="float:left;">image</div>text</button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:05:05.050

如果您将浮点数更改为“显示：内联”，那不可行吗？

```
<button><div class="test" style="display:inline">image</div>text</button> 
```

# php - $_GET 数组中未设置长 url

> ID：10659452
> 
> 赞同：0
> 
> 时间：2012-05-18T20:43:08.233
> 
> 标签：php, http-get

我有以下查询字符串：

```
 [QUERY_STRING] => u=http%3A%2F%2Fnews.yahoo.com%2Fblogs%2Fsideshow%2Fman-fathered-30-kids-needs-break-child-support-140439765.html&t=%3Cp%20id=%22yui_3_4_0_22_1337372504263_287%22%3EAnd%20you%20thought%20Octomom%20had%20her%20hands%20full%E2%80%94a%20Tennessee%20man%20who%20has%20fathered%2030%20children%20is%20asking%20the%20courts%20for%20a%20break%20on%20child%20support.%3C/p%3E%0A%3Cp%20id=%22yui_3_4_0_22_1337372504263_286%22%3EDesmond%20Hatchett,%2033,%20of%20Knoxville%20has%20children%20with%2011%20different%20women,%20%3Ca%20href=%22http://wreg.com/2012/05/16/tn-man-fathers-30-kids-but-cant-support-any/%22%20target=%22_blank%22%3Ereports%20WREG-TV%3C/a%3E.%3C/p%3E%0A%3Cp%20id=%22yui_3_4_0_22_1337372504263_285%22%3EThe%20state%20already%20takes%20half%20his%20paycheck%20and%20divides%20it%20up,%20which%20doesn%27t%20amount%20to%20much%20when%20Hatchett%20is%20making%20only%20minimum%20wage.%20Some%20of%20the%20moms%20receive%20as%20little%20as%20$1.49%20a%20month.%20The%20oldest%20child%20is%2014%20years%20old.%3C/p%3E%0A%3Cp%20id=%22yui_3_4_0_22_1337372504263_284%22%3EHatchett%20explains%20how%20he%20reached%20such%20a%20critical%20mass:%20He%20had%20four%20kids%20in%20the%20same%20year.%20Twice.%3C/p%3E%0A%3Cp%20id=%22yui_3_4_0_22_1337372504263_283%22%3E%3Ca%20href=%22http://www.youtube.com/watch?v=RTZk1y8iaho%22%20target=%22_blank%22%20id=%22yui_3_4_0_22_1337372504263_308%22%3EBack%20in%202009%20when%20Hatchett%20%3C/a%3Ewas%20in%20court%20to%20answer%20charges%20that%20many%20of%20the%20mothers%20were%20not%20receiving%20child%20support,%20he%20had%2021%20children.%20At%20the%20time,%20he%20said%20he%20was%20not%20going%20to%20father%20any%20more%20kids,%20but%20he%20ended%20up%20having%20nine%20more%20in%20the%20past%20three%20years.%3C/p%3E%0A%3Cp%20id=%22yui_3_4_0_22_1337372504263_282%22%3EThe%20state%20cannot%20order%20Hatchett%20to%20stop%20making%20babies.%20He%20hasn%27t%20broken%20any%20laws,%20according%20to%20the%20report.%3C/p%3E 
```

但是，我的 $_GET 数组中唯一的内容如下：

```
 [u] => http://news.yahoo.com/blogs/sideshow/man-fathered-30-kids-needs-break-child-support-140439765.html 
```

我的 get 请求少于 2k 个字符，服务器收到了整个字符串，所以我不知道会发生什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T20:47:22.150

试试这个：

print_r($_GET);

就我而言，使用相同的查询字符串我得到了这个结果：

```
Array
(
    [u] => http://news.yahoo.com/blogs/sideshow/man-fathered-30-kids-needs-break-child-support-140439765.html
    [t] => <p id="yui_3_4_0_22_1337372504263_287">And you thought Octomom had her hands full—a Tennessee man who has fathered 30 children is asking the courts for a break on child support.</p>
<p id="yui_3_4_0_22_1337372504263_286">Desmond Hatchett, 33, of Knoxville has children with 11 different women, <a href="http://wreg.com/2012/05/16/tn-man-fathers-30-kids-but-cant-support-any/" target="_blank">reports WREG-TV</a>.</p>
<p id="yui_3_4_0_22_1337372504263_285">The state already takes half his paycheck and divides it up, which doesn't amount to much when Hatchett is making only minimum wage. Some of the moms receive as little as $1.49 a month. The oldest child is 14 years old.</p>
<p id="yui_3_4_0_22_1337372504263_284">Hatchett explains how he reached such a critical mass: He had four kids in the same year. Twice.</p>
<p id="yui_3_4_0_22_1337372504263_283"><a href="http://www.youtube.com/watch?v=RTZk1y8iaho" target="_blank" id="yui_3_4_0_22_1337372504263_308">Back in 2009 when Hatchett </a>was in court to answer charges that many of the mothers were not receiving child support, he had 21 children. At the time, he said he was not going to father any more kids, but he ended up having nine more in the past three years.</p>
<p id="yui_3_4_0_22_1337372504263_282">The state cannot order Hatchett to stop making babies. He hasn't broken any laws, according to the report.</p>
) 
```

第二个值在那里。

也许是你的 php.ini 配置。

**- suhosin.get.max_name_length (默认: 64)** 为通过 URL 注册的变量定义变量名称的最大长度。对于数组变量，这是索引前面的名称。

**- suhosin.get.max_totalname_length（默认值：256）** 定义通过 URL 注册时总变量名称的最大长度。对于数组变量，这包括所有索引。

**- suhosin.get.max_value_length（默认值：512）** 定义通过 URL 注册的变量的最大长度。

伟大的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T21:02:57.957

如果您仔细查看查询字符串，您将找到问题的原因。

```
.....140439765.html&t=%3Cp%20id=.... 
```

仔细查看`&`html 扩展名之后的内容。在将其传递给您的 php 脚本之前，您需要在整个 url 中使用[urlencode 。](http://www.php.net/manual/es/function.urlencode.php)

```
$link='http://news.yahoo.com/blogs/sideshow/man-fathered-30-kids-needs-break-child-support-140439765.html&t=<p id="yui_3_4_0_22_1337372504263_287">And you thought Octomom had her hands fulla Tennessee man who has fathered 30 children is asking the courts for a break on child support.</p><p id="yui_3_4_0_22_1337372504263_286">Desmond Hatchett, 33, of Knoxville has children with 11 different women, <a href="http://wreg.com/2012/05/16/tn-man-fathers-30-kids-but-cant-support-any/" target="_blank">reports WREG-TV</a>.</p><p id="yui_3_4_0_22_1337372504263_285">The state already takes half his paycheck and divides it up, which doesn\'t amount to much when Hatchett is making only minimum wage. Some of the moms receive as little as .49 a month. The oldest child is 14 years old.</p><p id="yui_3_4_0_22_1337372504263_284">Hatchett explains how he reached such a critical mass: He had four kids in the same year. Twice.</p><p id="yui_3_4_0_22_1337372504263_283"><a href="http://www.youtube.com/watch?v=RTZk1y8iaho" target="_blank" id="yui_3_4_0_22_1337372504263_308">Back in 2009 when Hatchett </a>was in court to answer charges that many of the mothers were not receiving child support, he had 21 children. At the time, he said he was not going to father any more kids, but he ended up having nine more in the past three years.</p><p id="yui_3_4_0_22_1337372504263_282">The state cannot order Hatchett to stop making babies. He hasn\'t broken any laws, according to the report.</p>';
echo '<a href="script.php?u=' . urlencode($link) . '">The link title</a>' 
```

那应该行得通。

# backbone.js - 使用 Use! 加载 Backbone.Relational 插入

> ID：10659454
> 
> 赞同：0
> 
> 时间：2012-05-18T20:43:13.040
> 
> 标签：backbone.js, requirejs, amd, backbone-relational

Backbone Relational 不是 AMD 兼容的库，所以我继续寻找使用插件来确保下划线和主干都作为依赖项加载。这是我的配置文件

```
require.config({
  baseUrl: '../global/js',
  paths: {
    use: 'libs/utilities/use',
    jquery: 'libs/jquery/jquery-min',
    underscore: 'libs/underscore/underscore-min',
    backbone: 'libs/backbone/backbone-optamd3-min',
    text: 'libs/require/text',
    relational: 'libs/backbone/backbone-relational'
  },
  use:  {
    "relational": {
        deps: ["backbone","underscore"]
    }
  }
 }); 
```

我还继续扩展了 Backbone Relational 库

```
(function(Backbone, _) {
  "use strict";

  Backbone.Relational = {
        showWarnings: true
  };

})(this.Backbone, this._); 
```

最后，我在模型中调用关系

```
 define([

    'jquery',
    'underscore',
    'backbone',
    'mediator',
    'relational'

    ], function($, _, Backbone, Mediator){ 
```

我收到无法设置未定义的属性关系的错误。含义 Backbone 不可用。我错过了什么？

我一直在使用的一些链接
[https://github.com/tbranyen/use.js](https://github.com/tbranyen/use.js)
[https://github.com/tbranyen/layoutmanager-example/blob/master/app/index.js](https://github.com/tbranyen/layoutmanager-example/blob/master/app/index.js)
[https://raw.github .com/PaulUithol/Backbone-relational/master/backbone-relational.js](https://raw.github.com/PaulUithol/Backbone-relational/master/backbone-relational.js)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T07:39:43.180

要使用（原文如此）`use`插件，您**不需要**AMD 版本的下划线/主干。您确实需要相应地包装它们，即在您的要求配置中有：

```
 use: {
        backbone: {
            deps: ["use!underscore", "jquery"],
            attach: "Backbone"
        },

        underscore: {
            attach: "_"
        },

        relational: {
            deps: ["use!underscore", "use!backbone"]
        }
        ....
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T20:46:25.860

主干和下划线与 AMD 不兼容。

[升级警告：1.3.0 及更高版本删除 AMD (RequireJS) 支持。](http://documentcloud.github.com/underscore/)

# javascript - 解析动态 JSON 响应

> ID：10659456
> 
> 赞同：1
> 
> 时间：2012-05-18T20:43:29.280
> 
> 标签：javascript, json

```
{
    'AddUpdateResult': {
        "Patient": "24919"
    }
} 
```

这是我响应的一部分，我面临的问题是我得到的 JSON 响应是动态的，我需要解析它。在另一种情况下，我得到类似的东西。

```
 {
        'EditUpdateResult': {
            "Patient": "24919"
        }
    } 
```

当我尝试这样的事情时，我得到“ `Cannot read property Patient from null`”，原因是它期待“ `EditUpdateResult`”。

```
json.AddUpdateResult.Patient 
```

我如何动态访问密钥。就像... `json.whatever.Patient`，所以它可能`AddUpdateResult`或`EditUpdateResult`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T20:50:43.910

可以在不知道属性名称的情况下迭代 JSON 对象。

```
for (var key in p) {
    if (p.hasOwnProperty(key)) {
        alert(key + " -> " + p[key]);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T20:46:32.763

所有的反应都只有一个“结果”吗？如果是这样，请尝试像这样循环它：

```
var patient;

for (var i in json) {
    patient = json[i].Patient;
} 
```

# playframework - Play 2.0 中的安全性

> ID：10659458
> 
> 赞同：4
> 
> 时间：2012-05-18T20:43:47.453
> 
> 标签：playframework

我在 play 2.0 中看不到任何对安全性的引用，难道没有像在 Play 1.X 中那样内置对它的支持吗？

另请参阅 play 2.0 论坛上的问题（但未在此处回答） [https://groups.google.com/forum/?fromgroups#!searchin/play-framework/security/play-framework/YHhpAXAsHzE/7g4XrIFsIV0J](https://groups.google.com/forum/?fromgroups#!searchin/play-framework/security/play-framework/YHhpAXAsHzE/7g4XrIFsIV0J)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T20:55:32.470

目前还没有它的文档（我可以找到），但是您可以查看 Zen Tasks 示例应用程序以了解如何实现它。

[https://github.com/playframework/Play20/tree/master/samples/java/zentasks](https://github.com/playframework/Play20/tree/master/samples/java/zentasks)

# html - 在 html 中以“href”的正斜杠开头

> ID：10659459
> 
> 赞同：38
> 
> 时间：2012-05-18T20:43:53.510
> 
> 标签：html

我最近开始学习 html，真正让我困惑的一件事是为什么有些链接在路径前有一个正斜杠（“/”）而有些链接没有？

IE。

```
<link href="/favicon.png" rel="icon">
<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css"> 
```

对比

```
<dt><a href="reset/index.html">Reset CSS</a></dt> 
```

一个是相对路径，一个是绝对路径吗？href 是如何工作的？它只是在基本 url 之后的路径名上粘贴吗？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-05-18T20:46:38.253

> 一个是相对路径，一个是绝对路径吗？

是的。

如果您的浏览器当前指向`http://foo/bar/baz.html`then：

*   `<a href="reset/index.html">`将链接到`http://foo/bar/reset/index.html`.
*   `<a href="/reset/index.html">`将链接到`http://foo/reset/index.html`.

* * *

如果HTML 文档的头部有一个[基本元素，那么相对路径将是相对于基本元素的。](http://www.w3.org/TR/html4/struct/links.html#h-12.4)例如，`http://example.com/foobar/reset/index.html`无论页面位于何处，此处的链接都会将您带到。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<HTML>
 <HEAD>
   <TITLE>Base element example</TITLE>
   <BASE href="http://example.com/foobar/">
 </HEAD>

 <BODY>
   <P><a href="reset/index.html">Reset CSS</a>
 </BODY>
</HTML> 
```

# gwt - GWT：在对话框中禁用拖动

> ID：10659467
> 
> 赞同：2
> 
> 时间：2012-05-18T20:44:31.697
> 
> 标签：gwt

是否可以在`com.google.gwt.user.client.ui.DialogBox`实例中禁用拖动？我喜欢我的容器有一个标题栏，但它应该在一个固定的位置，并且用户不应该能够移动它。

如果不可能，适合这项工作的 GWT 小部件是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T23:05:37.493

扩展 DialogBox，覆盖*beginDragging*并使用*preventDefault*来中断拖动处理。

像这样：

```
public class MyDialogBox extends DialogBox
{
   protected void beginDragging(MouseDownEvent e)
   {
      e.preventDefault();
   }
} 
```

请参阅[DomEvent.preventDefault的文档](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/event/dom/client/DomEvent.html#preventDefault%28%29)

# ios - 如果我多次向手势添加相同的目标/动作会发生什么？

> ID：10659468
> 
> 赞同：0
> 
> 时间：2012-05-18T20:44:32.713
> 
> 标签：ios, cocoa-touch, uigesturerecognizer, uicontrol

如果我多次将相同的目标/操作对添加到`UIGestureRecognizer`- 或就此而言 - 我会自找麻烦吗？`UIControl`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T23:00:25.637

从苹果文档关于`addTarget:action:forControlEvents:`方法的苹果文档：

> 您可以多次调用此方法，并且可以为特定事件指定多个目标-动作对。动作消息可以可选地包括作为参数的发送者和事件，以该顺序。调用此方法时，不会保留目标。

您似乎可以将多个目标动作对分配给手势识别器。因此，为了回答您的问题，我不确定在多次使用相同的目标/动作对时它是如何工作的。要么没关系，要么连续多次调用该操作。你只需要尝试。

# php - PHP没有输出整个值

> ID：10659469
> 
> 赞同：1
> 
> 时间：2012-05-18T20:44:36.640
> 
> 标签：php, forms

我正在尝试将客户的站点从 ColdFusion 转换为 PHP。我正在尝试复制一个旧脚本脚本，其中表单的值被插入到 mysql 数据库中。我无法让我的工作，所以我尝试简单地回显一个值，发现它没有显示整个值。例如，我在一个字段中输入 11/13/2011，在另一个字段中输入 Hike，输出为`110`.

我不确定为什么将文本存储为数字。即使我将其更改为`echo`仅 Hike 它输出`0`。这是我的代码：

**HTML**：

```
<form action="file.php" method="post">
  Event Date: <input type="text" name="eventdate" size="30" />
   Theme: <input type="text" name="theme" size="50" />
</form> 
```

**PHP**：

```
<?php
    $eventdate = $_POST['eventdate'];
    $theme = $_POST["theme"];
    echo $eventdate+"<br />";
    echo $theme+"<br />";
?> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T20:46:44.940

您的问题是您将字段添加在一起，而不是与点运算符连接：`.`

```
echo $eventdate."<br />";
echo $theme."<br />"; 
```

PHP 将尝试将不同类型但在操作中加入的变量强制转换为有意义的类型（例如，如果您尝试将浮点数添加到整数，它会将整数评估为浮点数执行操作时的编号）。

有关更多信息，请参阅[Type Juggling](http://php.net/manual/en/language.types.type-juggling.php)以及[PHP 如何将字符串转换为数字的文档条目](http://www.php.net/manual/en/language.types.string.php#language.types.string.conversion)

# javascript - 根据选择拆分图像源

> ID：10659474
> 
> 赞同：-2
> 
> 时间：2012-05-18T20:45:14.037
> 
> 标签：javascript, jquery, date, src, onselect

根据用户选择从两个不同的来源加载图像的最佳方法是什么，在这种情况下选择日期？是否可以根据条件有 2 个不同的 src 路径？任何意见，将不胜感激。以下是相关代码：

```
onSelect: function(dateText, inst) {
$("#img").attr("src", "myimagesrc" + dateText + ".jpg"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T21:34:35.447

You don't. What you do is you parse dateText, check - in your case the year - and *then* set the src attribute.

# python - 在python中用漂亮的汤遍历行表

> ID：10659479
> 
> 赞同：1
> 
> 时间：2012-05-18T20:45:19.903
> 
> 标签：python, beautifulsoup

我正在尝试使用漂亮的汤来解析行表，并将每行的值保存在字典中。

一个小问题是表的结构有一些行作为节标题。因此，对于具有类“标题”的任何行，我想定义一个名为“节”的变量。这就是我所拥有的，但它不起作用，因为它在说 ['class']`TypeError: string indices must be integers`

这是我所拥有的：

```
for i in credits.contents:
    if i['class'] == 'header':
        section = i.contents
        DATA_SET[section] = {}
    else:
        DATA_SET[section]['data_point_1'] = i.find('td', {'class' : 'data_point_1'}).find('p').contents
        DATA_SET[section]['data_point_2'] = i.find('td', {'class' : 'data_point_2'}).find('p').contents
        DATA_SET[section]['data_point_3'] = i.find('td', {'class' : 'data_point_3'}).find('p').contents 
```

数据示例：

```
<table class="credits">
    <tr class="header">
        <th colspan="3"><h1>HEADER NAME</h1></th>
    </tr>
    <tr>
        <td class="data_point_1"><p>DATA</p></td>
        <td class="data_point_2"><p>DATA</p></td>
        <td class="data_point_3"><p>DATA</p></td>
    </tr>
    <tr>
        <td class="data_point_1"><p>DATA</p></td>
        <td class="data_point_2"><p>DATA</p></td>
        <td class="data_point_3"><p>DATA</p></td>
    </tr>
    <tr>
        <td class="data_point_1"><p>DATA</p></td>
        <td class="data_point_2"><p>DATA</p></td>
        <td class="data_point_3"><p>DATA</p></td>
    </tr>
    <tr class="header">
        <th colspan="3"><h1>HEADER NAME</h1></th>
    </tr>
    <tr>
        <td class="data_point_1"><p>DATA</p></td>
        <td class="data_point_2"><p>DATA</p></td>
        <td class="data_point_3"><p>DATA</p></td>
    </tr>
    <tr>
        <td class="data_point_1"><p>DATA</p></td>
        <td class="data_point_2"><p>DATA</p></td>
        <td class="data_point_3"><p>DATA</p></td>
    </tr>
    <tr>
        <td class="data_point_1"><p>DATA</p></td>
        <td class="data_point_2"><p>DATA</p></td>
        <td class="data_point_3"><p>DATA</p></td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T21:37:27.453

这是一种解决方案，对您的示例数据稍作调整，以便结果更清晰：

```
from BeautifulSoup import BeautifulSoup
from pprint import pprint

html = '''<body><table class="credits">
    <tr class="header">
        <th colspan="3"><h1>HEADER 1</h1></th>
    </tr>
    <tr>
        <td class="data_point_1"><p>DATA11</p></td>
        <td class="data_point_2"><p>DATA12</p></td>
        <td class="data_point_3"><p>DATA12</p></td>
    </tr>
    <tr>
        <td class="data_point_1"><p>DATA21</p></td>
        <td class="data_point_2"><p>DATA22</p></td>
        <td class="data_point_3"><p>DATA23</p></td>
    </tr>
    <tr>
        <td class="data_point_1"><p>DATA31</p></td>
        <td class="data_point_2"><p>DATA32</p></td>
        <td class="data_point_3"><p>DATA33</p></td>
    </tr>
    <tr class="header">
        <th colspan="3"><h1>HEADER 2</h1></th>
    </tr>
    <tr>
        <td class="data_point_1"><p>DATA11</p></td>
        <td class="data_point_2"><p>DATA12</p></td>
        <td class="data_point_3"><p>DATA13</p></td>
    </tr>
    <tr>
        <td class="data_point_1"><p>DATA21</p></td>
        <td class="data_point_2"><p>DATA22</p></td>
        <td class="data_point_3"><p>DATA23</p></td>
    </tr>
    <tr>
        <td class="data_point_1"><p>DATA31</p></td>
        <td class="data_point_2"><p>DATA32</p></td>
        <td class="data_point_3"><p>DATA33</p></td>
    </tr>
</table></body>'''

soup = BeautifulSoup(html)
rows = soup.findAll('tr')

section = ''
dataset = {}
for row in rows:
    if row.attrs:
        section = row.text
        dataset[section] = {}
    else:
        cells = row.findAll('td')
        for cell in cells:
            if cell['class'] in dataset[section]:
                dataset[section][ cell['class'] ].append( cell.text )
            else:
                dataset[section][ cell['class'] ] = [ cell.text ]

pprint(dataset) 
```

产生：

```
{u'HEADER 1': {u'data_point_1': [u'DATA11', u'DATA21', u'DATA31'],
               u'data_point_2': [u'DATA12', u'DATA22', u'DATA32'],
               u'data_point_3': [u'DATA12', u'DATA23', u'DATA33']},
 u'HEADER 2': {u'data_point_1': [u'DATA11', u'DATA21', u'DATA31'],
               u'data_point_2': [u'DATA12', u'DATA22', u'DATA32'],
               u'data_point_3': [u'DATA13', u'DATA23', u'DATA33']}} 
```

**修改**您的解决方案

您的代码很整洁，只有几个问题。你在你应该使用`contents`的地方使用`text`或者`findAll`- 我在下面修复了它：

```
soup = BeautifulSoup(html)
credits = soup.find('table')

section = ''
DATA_SET = {}

for i in credits.findAll('tr'):
    if i.get('class', '') == 'header':
        section = i.text
        DATA_SET[section] = {}
    else:
        DATA_SET[section]['data_point_1'] = i.find('td', {'class' : 'data_point_1'}).find('p').contents
        DATA_SET[section]['data_point_2'] = i.find('td', {'class' : 'data_point_2'}).find('p').contents
        DATA_SET[section]['data_point_3'] = i.find('td', {'class' : 'data_point_3'}).find('p').contents

print DATA_SET 
```

请注意，如果连续的单元格具有相同的`data_point`类别，则连续的行将替换之前的行。我怀疑这在您的真实数据集中不是问题，但这就是为什么您的代码会返回这个缩写结果：

```
{u'HEADER 2': {'data_point_2': [u'DATA32'],
               'data_point_3': [u'DATA33'],
               'data_point_1': [u'DATA31']},
 u'HEADER 1': {'data_point_2': [u'DATA32'],
               'data_point_3': [u'DATA33'],
               'data_point_1': [u'DATA31']}} 
```

# postgresql - 从本地客户端连接 Heroku postgres

> ID：10659484
> 
> 赞同：1
> 
> 时间：2012-05-18T20:45:48.847
> 
> 标签：postgresql, heroku

我正在尝试与

```
psql -h ec2-23-23-227-54.compute-1.amazonaws.com -U igcmskkpsx igcmskkpsx 
```

但它回答：

```
psql: no se pudo conectar con el servidor: Connection timed out (0x0000274C/10060)
        ¿Está el servidor en ejecución en el servidor «ec2-23-23-227-54.compute-1.amazonaws.com» y aceptando
        conexiones TCP/IP en el puerto 5432? 
```

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T02:45:27.613

Heroku 不允许在帐户免费时从外部客户端访问；我必须使用 cleanMysql 插件从我的本地 navicat 访问

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T15:43:57.250

如果默认端口没有运行，您可能需要在连接时使用 -P portthere 指定端口。

# php - PHP - 计算字符串出现在文件中的次数

> ID：10659490
> 
> 赞同：0
> 
> 时间：2012-05-18T20:46:08.980
> 
> 标签：php, file

我有一个看起来像这样的文件（leaderboard.txt）：

```
funkystudios
funkystudios
funkystudios
gilletteracer74
axehairgel
Ferby123
dirdam
TheWu13
Expert_Assassin
TheWu13
ocanosoup 
```

我希望能够读取这个文件，并打印出每个人出现在文件中的次数。（也按文件中 # 次的顺序排列）

```
funkystudios: 3
TheWu13: 2
gilletteracer74: 1
axehairgel: 1
(and so on) 
```

我尝试了各种方法，但是当我尝试正确订购它们时，这一切都归结为一个问题......我猜有一种非常简单的方法可以做到这一点。（我是 PHP 新手...）

**编辑：** 我已经到了这一点：

```
 foreach(array_count_values(file('leaderboard.txt')) as $person => $count)
echo "{$person} : {$count}<br />\r\n"; 
```

它不按 $count 排序，而只是按文件中最先出现的人排序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T20:50:51.897

```
$counted = array_count_values(file('leaderboard.txt'));

arsort($counted);

  foreach($counted as $person => $count)
        echo "{$person} : {$count}<br />\r\n"; 
```

# javascript - 在 UpdatePanel 回发上立即执行 Javascript

> ID：10659492
> 
> 赞同：2
> 
> 时间：2012-05-18T20:46:14.627
> 
> 标签：javascript, jquery, asp.net, ajax, updatepanel

我`<asp:Button ID="btnExport">`在 UpdatePanel 中有一个控件。单击该按钮时，我希望它立即执行 Javascript 函数（它是一个轮询函数，在 UpdatePanel 进行回发时将连续运行）。我怎样才能做到这一点？

我试过这个：

```
var prm = Sys.WebForms.PageRequestManager.getInstance();
prm.add_pageLoaded(pageLoaded);
function pageLoaded(sender, args) {
    $(".btnExport").click(function (e) {
        timer = window.setInterval(pollStatus, 1000);//        
    });
} 
```

那行得通，但是它不执行 btnExport 事件处理程序。我尝试的一切要么执行事件处理程序而不是轮询函数，反之亦然。我真正在寻找的是一种方法来做到这一点：

1) 单击导出按钮。

2）设置一个计时器每秒做一个轮询事件（javascript函数）。

3) 执行导出按钮的事件处理程序。

4) 回发完成后，清除计时器。

任何人对完成此任务的最佳方法有任何建议吗？

这是一些示例代码。这是我为了说明这一点而编写的一个小示例应用程序，我的实际应用程序有点过于复杂，无法在此处发布。

**默认.ASPX**

```
<asp:ScriptManager runat="server" ID="ScriptManager1"></asp:ScriptManager>

    <asp:UpdatePanel runat="server" ID="UpdatePanel1">
        <ContentTemplate>
            <asp:Button runat="server" ID="btnExport" Text="Begin Export" OnClick="btnExport_Click" ClientIDMode="Static" /><div id="message"></div>
        </ContentTemplate>
    </asp:UpdatePanel>

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" language="javascript">
        var timer;

        function pollStatus() {
            $.ajax({
                type: "POST",
                url: "<%= Page.ResolveUrl("~/Default.aspx/PollStatus") %>",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (response) {
                    $("#message").html(response.d);
                }
            });   
        }

        var prm = Sys.WebForms.PageRequestManager.getInstance();
        prm.add_pageLoaded(pageLoaded);
        function pageLoaded(sender, args) {
            $("#btnExport").click(function (e) {
                timer = window.setInterval(pollStatus, 50);
            });
        }
</script> 
```

**默认的.ASPX.CS**

```
protected void btnExport_Click(object sender, EventArgs e)
        {
            for (int i = 1; i <= 10000000; i++ )
            {
                Session["PollStatus"] = i;
            }
        }

        [WebMethod]
        public static string PollStatus()
        {
            return HttpContext.Current.Session["PollStatus"] != null ? HttpContext.Current.Session["PollStatus"].ToString() : "No result";
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T21:18:28.200

我没有看到这里指定的 CSS 类：

```
<asp:Button ID="btnExport"> 
```

但是，您的选择器正在尝试按类获取对象：

```
$(".btnExport") 
```

因此，您应该为按钮设置 CssClass 属性或更改选择器。

UPD：这段代码对我来说很好用（这是一个例子，在产品使用之前需要一些抛光）

```
<form id="form1" runat="server">

    <asp:ScriptManager runat="server" ID="scmMain"></asp:ScriptManager>

    <asp:UpdatePanel runat="server" ID="pnlMain">
        <ContentTemplate>
            <asp:Button Text="Test" ID="btnTest" CssClass="btnTest" runat="server" OnClick="btnTest_OnClick"/>
        </ContentTemplate>
    </asp:UpdatePanel>

    <script type="text/javascript">
        var prm = Sys.WebForms.PageRequestManager.getInstance();
        prm.add_pageLoaded(pageLoaded);
        var timer;
        function pageLoaded(sender, args) {
            if (prm.get_isInAsyncPostBack()) {
                window.clearInterval(timer);
            }
            else {
                $(".btnTest").click(function (e) {
                    timer = window.setInterval(pollStatus, 1000);
                });
            }
        }

        function pollStatus() {
            alert('Test');
        }

    </script>

</form> 
```

按钮的 btnTest_OnClick 服务器端事件处理程序就是这样做的：

```
Thread.Sleep(5000); 
```

在服务器向客户端提供响应之前，您应该会看到“测试”警报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T21:41:22.440

你可以试试这个

**Javascript：**

```
<script type="text/javascript">
    var timer;

    function fn() {
        //alert('hi');
        //clear the timer here.
    }
    function fn2() {
        //alert('hello');
        //Set a timer to do a polling event here
        return true;
    }
</script> 
```

**网页：**

```
<asp:Button ID="btnExport" runat="server" Text="Begin Export" OnClientClick="return fn2();" onclick="btnExport_Click" /> 
```

**代码背后：**

```
protected void btnExport_Click(object sender, EventArgs e)
    {
        for (int i = 1; i <= 10000000; i++ )
        {
            Session["PollStatus"] = i;
        }

        string myScript = @"fn();";
        Page.ClientScript.RegisterStartupScript(this.GetType(), "MyScript", myScript, true);
    } 
```

希望这可以帮助。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T11:53:40.273

如果您在示例中使用间隔，您将有许多并发轮询请求，因为请求从服务器返回需要时间。在重试之前，您应该等待最后一个轮询请求从服务器返回。

```
function poll() {
    $.ajax({
        type: "POST",
        url: "<%= Page.ResolveUrl("~/Default.aspx/PollStatus") %>",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (response) {
            if (response.d != 'No Result') {
                // done
            } else {
                setTimeout(poll, 50);
            }
        }
    }); 
}

$(function() {
    $("#btnExport").click(function (e) {
        poll();
    });
}); 
```

# javascript - 在html中设置对象元素的数据属性

> ID：10659495
> 
> 赞同：0
> 
> 时间：2012-05-18T20:46:28.297
> 
> 标签：javascript, html, activereports

我的 html 正文中有一个对象元素来显示导出到 .pdf 文件的活动报告。我需要使用 javascript 将 pdf 自动打印到客户端的默认打印机，然后将 pdf 保存到服务器：

```
<script language="javascript" type="text/javascript">
        // <!CDATA[
        function PrintPDF() {
            pdf.click();
            pdf.setActive();
            pdf.focus();
            pdf.PrintAll();
         }
        // ]]>

....

<body onload="return PrintPDF();">
 <form id="form1" runat="server">
     <object  id="pdfDoc" type="application/pdf" width="100%" height="100%"  data="test.aspx?PrintReport=yes&SavePDF=yes"/>
    </form>
</body> 
```

使用对象标签中的数据硬编码，一切运行都没有问题。

现在的问题是我需要动态地将查询字符串传递给这个页面。我试图在 javsacript 中设置属性数据以传递查询字符串。查询字符串值传递成功，但数据属性似乎没有设置。我得到一个空白页。

pdf.setAttribute("data","test.aspx?PrintReport=yes&SavePDF=yes&AccNum="+AccNum);

有谁知道如何动态设置数据属性以传入查询字符串？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T21:28:57.197

```
 var pdfObj = document.getElementById('pdfDoc');
 pdfObj.data="test.aspx?PrintReport=yes&SavePDF=yes&AccNum="+AccNum; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:24:11.240

我怀疑事情正在发生混乱。在添加嵌入之前尝试等到窗口的 onload 事件。

另外，我建议使用像[PDFObject](http://pdfobject.com/)这样的脚本来处理嵌入，因为它是一种在所有各种浏览器中嵌入 PDF 的可靠方法。例如，您可能有以下内容：

```
<html>
  <head>
    <title>PDFObject example</title>
    <script type="text/javascript" src="pdfobject.js"></script>
    <script type="text/javascript">
      window.onload = function (){
        // First build the link to the PDF raw data ("bits")
        //   getQueryStrings assumes something like http://stackoverflow.com/questions/2907482/how-to-get-the-query-string-by-javascript
        var queryStrings = getQueryStrings();
        var reportNameParamValue = queryStrings["reportName"];
        var pdfBitsUrl = "getReportPdfBits.aspx?reportName=" + reportNameParamValue;

        // just in case PDF cannot be embedded, we'll fix the fallback link below:
        var pdfFallbackLink = document.getElementById("pdfFallbackAnchor");
        pdfFallbackLink.href = pdfFallbackLink;

        // now perform the actual embed using PDFObject script from http://pdfobject.com
        var success = new PDFObject( { 
          url: pdfBitsUrl;
        }).embed();
      };
    </script>
  </head> 
  <body>
    <p>It appears you don't have Adobe Reader or PDF support in this web
    browser. <a id="pdfFallbackAnchor" href="sample.pdf">Click here to download the PDF</a></p>
  </body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T21:46:32.910

就数据属性而言，您做的一切都很好。以下是一些示例：http: [//jsfiddle.net/3SxRu/](http://jsfiddle.net/3SxRu/)

我认为您的问题可能更多与执行顺序有关。你的实际代码是什么样的？你是在写身体`onLoad`功能还是什么？

另外，我假设使用该`data`属性是一项要求。HTML5 定义`data-*`. 这个属性不是真的有效。同样，也许您的系统需要它。

# udp - UDP 健康检查

> ID：10659500
> 
> 赞同：0
> 
> 时间：2012-05-18T20:46:35.630
> 
> 标签：udp

所以我们有一个应用程序可以进行 udp 调用和发送数据包。但是，既然响应是针对 UDP 调用给出的，那么我们如何确保服务已启动且端口已打开并且内容正在被存储？

我们现在唯一的想法是发送测试数据包并确保它们被保存到数据库中。

所以我的全部问题是，有没有更好、更简单的方法来确保我们的 udp 调用成功？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T21:02:34.790

*在侦听主机上，您可以使用netstat*验证端口是否打开。例如，如果您的应用程序使用 UDP 端口 68，您可以运行：

```
# Grep for :<port> from netstat output.
$ netstat -lnu | grep :68
udp        0      0 0.0.0.0:68              0.0.0.0:* 
```

您还可以将一些测试数据发送到您的应用程序，然后检查您的数据库以验证夹具数据是否已进入您的数据库。这并不意味着它总是会如此，只是它在测试时正在工作。

归根结底，问题在于 UDP 数据包是尽力而为的，并且无法保证。因此，除非您可以将日志平台配置为在接收和/或写入数据后发送某种确认，否则您无法保证任何事情。UDP 的本质是它将确认（如果有）留给应用层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T21:50:51.817

我们采取了不同的方法，我们正在检查以确保调用到达数据库。查询表并确保记录在那里很容易。如果最近没有，我们就知道出了点问题。CodeGnome 有一个好主意，只是不是我们走的路线。谢谢！

# sql - 来自不同表的 SQL 行

> ID：10659503
> 
> 赞同：0
> 
> 时间：2012-05-18T20:46:42.977
> 
> 标签：sql

我有两张表，我想从中获取信息。第一个表的名称是 Playing，另一个是 Game。

```
Player Game_ID Points

Game_ID Length Judged_by 
```

我想编写一个只显示具有相同游戏 ID 的玩家的 SQL 查询。还有那场比赛的长度。我对 SQL 很陌生，不知道该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T20:48:26.460

不太确定你想要达到什么目标。如果您希望所有玩过 1 个以上游戏的用户使用：

```
select p.player, g.game_id, g.length 
from game g
inner join playing p on g.game_id = p.game_id
group by game_id
having count(game_id) > 1 
```

如果您想要所有玩过特定游戏的玩家，请使用（game_id 是一个示例）：

```
select p.player, g.game_id, g.length 
from game g
inner join playing p on g.game_id = p.game_id
where game_id = 123 
```

## 编辑

干得好：

```
select p.player, g.game_id, g.length
from game g 
inner join playing p on g.game_id = p.game_id
where g.game_id in (  select g.game_id
                      from game g
                      inner join playing p on g.game_id = p.game_id
                      group by g.game_id
                      having count(p.game_id) > 1
                    )
order by g.game_id 
```

请查看此[SQLFiddle 示例](http://sqlfiddle.com/#!4/dd539/9)以验证它是否正常工作。

## 编辑 2

我不知道`playing`和`players`表之间的关系。我使用了列`id`，`player`在这个例子中也得到了玩家的名字：

```
select g.game_id, g.length, p.first_name, p.last_name
from game g 
inner join playing pg on g.game_id = pg.game_id
inner join Players p on p.id = pg.player
where g.game_id in (  select g.game_id
                      from game g
                      inner join playing pg on g.game_id = pg.game_id
                      group by g.game_id
                      having count(pg.game_id) > 1
                    )
order by g.game_id 
```

## 最后编辑：

```
select g.game_id, g.length, p.first_name, p.last_name, j.Judge_firstname, j.Judge_lastname
from game g 
inner join playing pg on g.game_id = pg.game_id
inner join Players p on p.id = pg.player
inner join judges j on j.judge_id = g.judged_by
where g.game_id in (  select g.game_id
                      from game g
                      inner join playing pg on g.game_id = pg.game_id
                      where play_date > to_date('2012-05-01', 'YYYY-MM-DD')
                      group by g.game_id
                      having count(pg.game_id) > 1
                    )
order by g.game_id 
```

看[这个例子](http://sqlfiddle.com/#!4/3711d/2)

# php - 将 Zend View 导入 Google 翻译服务？

> ID：10659504
> 
> 赞同：0
> 
> 时间：2012-05-18T20:46:43.340
> 
> 标签：php, zend-framework, google-translate, zend-view

我已经看到了使用 google translate 和 zend 框架的所有示例，并且我能够毫无问题地翻译文本字符串。

我提议的是构建一个“视图助手”？这将在渲染到屏幕之前获取渲染视图并将内容发送到谷歌。

理想情况下，它会缓存内容以减少开销。API 在角色级别收费，所以让我们节省一点现金，对吧？

我仍然是 ZF 菜鸟，所以我只需要一些关于如何在渲染之前拦截视图的指示。

附言。<3 堆栈溢出！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T03:24:27.097

检查视图渲染器助手，您可能希望根据需要扩展它：

[http://framework.zend.com/manual/en/zend.controller.actionhelpers.html#zend.controller.actionhelpers.viewrenderer](http://framework.zend.com/manual/en/zend.controller.actionhelpers.html#zend.controller.actionhelpers.viewrenderer)

您可能还想在动作助手中检查布局助手，并将其扩展为翻译布局：

[http://framework.zend.com/manual/en/zend.layout.quickstart.html](http://framework.zend.com/manual/en/zend.layout.quickstart.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T15:02:09.373

最简单的是：

```
$renderedView = $this->view->render('some-view'); 
```

或者您可以创建 dispatchLoopShutdown 插件：

```
$renderedLayout = $request->getBody() 
```

或 postDispatch()... 并从响应段中获取 cview :)

# php - 使用 PHP、AJAX 和 MySQL 检查更新的最快方法

> ID：10659507
> 
> 赞同：0
> 
> 时间：2012-05-18T20:46:45.073
> 
> 标签：php, javascript, mysql, ajax

我需要以（最大）一秒的间隔检查更新以进行更新。

我现在正在寻找使用 AJAX 处理请求以及 PHP 和 MySQL 的最快方法。

**解决方案 1** 每次将需要由其他客户端检索的新数据添加到 MySQL 数据库时，file.txt 都会更新为 1。AJAX 向 PHP 文件发出请求，该文件将检查 file.txt 是否包含 1 或0\. 如果它包含 1，它将从 MySQL 数据库中获取数据并将其返回给客户端。

**解决方案 2** 每个 AJAX 请求都会调用一个 PHP 文件，该文件将直接检查到 MySQL 数据库中以获取新数据。

**解决方案 ..？** 如果有任何更快的解决方案，我很高兴知道！（考虑到我只能使用 PHP/MySQL 和 AJAX）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T21:05:14.167

如果有的话，避免使用数据库可能不会显着加快该过程。

您可以使用彗星式的 ajax 请求来获得接近实时的轮询。基本上，像往常一样向 php 脚本创建一个 ajax 请求，但是在服务器端轮询数据库并在没有新内容时休眠一小段时间。重复，直到有客户感兴趣的东西。如果在例如 60 秒的时间范围内没有出现任何内容，请关闭连接。在客户端，只有在第一个连接终止后（通过响应或超时），您才打开一个新连接。

见：[https://en.wikipedia.org/wiki/Comet_(programming)](https://en.wikipedia.org/wiki/Comet_(programming))

# c# - 如何测量我的 C# 应用程序使用的 FLOPS？

> ID：10659513
> 
> 赞同：2
> 
> 时间：2012-05-18T20:47:13.413
> 
> 标签：c#, performance, task-parallel-library, concurrent-collections, flops

[Microsoft 的并行编程白皮书](http://www.microsoft.com/en-us/download/details.aspx?id=19222)描述了在各种 FLOPS 阈值下最佳的情况，并且 FLOPS 率是何时应使用特定实现的决策点。

如何在我的应用程序中测量 FLOPS？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T21:08:16.837

FLOPS 表示每秒浮点运算次数，测量它们就像计算执行的浮点运算的数量并除以执行它们所需的时间一样简单。测量时间是容易的部分。计算操作很棘手，通常取决于硬件平台和使用的编译器。通常像加法、减法和乘法这样的简单运算非常快。除法有点慢。取平方根甚至更慢。在频谱的最慢部分是超越函数，如正弦、余弦、取幂和取对数。这些都按顺序展开并迭代计算，直到达到收敛。大多数当代 CPU 支持融合乘法和加法 (FMA) 操作，即 A*B+C 在单个周期内执行。

鉴于所有这些，很难给出一个绝对的 FLOPS 值。如果您的代码只执行简单的操作，那么您将获得高 FLOPS 计数。如果它做了很多超越，那么 FLOPS 计数会低得多（最多低 100 倍）。它还取决于获取/计算比率，即您访问主存储器的频率以及编译器在生成可以从延迟隐藏中受益的代码的能力。

标准的 FLOPS 基准测试是求解密集线性方程组的 LINPACK 测试。它只使用简单的算术运算（没有超越运算），虽然这还不足以说明 CPU 在执行更复杂的运算时的性能如何，但它仍然用于对[Top500](http://top500.org/)中的超级计算机进行排名。

# javascript - WebStorm Javascript IDE（或任何 IDE）是否理解 SMD（服务映射描述）文件

> ID：10659515
> 
> 赞同：1
> 
> 时间：2012-05-18T20:47:18.520
> 
> 标签：javascript, ide, dojo, webstorm

我们正在研究用于 Javascript 开发的工具，并计划使用带有 SMD 文件的 Dojo 来连接我们的 JSONRPC 后端 API - 它似乎是 IDE 的一个自然特性，它可以理解 SMD 文件的格式并能够验证您的函数调用针对那些在 SMD 文件中定义的。有谁知道 WebStorm（或其他一些 IDE）是否真的有这样的功能？

# svn - 如何在 VBScript 中对版本号字符串数组进行排序？

> ID：10659516
> 
> 赞同：0
> 
> 时间：2012-05-18T20:47:19.247
> 
> 标签：svn, vbscript, build-automation

我正在使用 SVN 和标签来标记版本，每个标签目录都以版本号命名。这一切都很好，但现在我正在使用 Visual Build Pro 自动化这个构建过程。

我正在使用`svn ls`检索标签列表（当然它不会按排序顺序返回），我使用它然后将其放入数组中`Split()`，用于排序以查找要签出和构建的最新标签。这都是在 VBScript 中进行的。

问题是，作为字符串，版本号不是按数字排序，而是按字母排序。给你：

```
1.0.1
1.0.10
1.0.2
etc 
```

我需要的是：

```
1.0.1
1.0.2
1.0.10
etc 
```

在 .NET 中这很容易，因为我可以创建一个`List(Of Version)`并对其进行排序，但我不能在 VBScript 中这样做。我可以使用 创建一个 Version 类型`Set verObj = Create.Object("System.Version")`，但这本身并不好。

我已经很好地浏览了这里的相关问题，但没有一个与 Windows 或 VBScript 相关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T21:35:16.527

由于 VBScript 没有本机排序，因此您必须使用其他技术：具有合适排序功能的 Javascript/JScript、断开连接的 ADO 记录集或具有一些创造性格式的 .NET ArrayList。演示最后一个选项：

```
 Dim aTests : aTests = Array( _
      "1.0.1"  _
    , "1.0.10" _
    , "1.0.2"  _
  )
  WScript.Echo Join(aTests, vbCrLf)
  Dim oFmt   : Set oFmt   = New cFormat
  Dim alVers : Set alVers = CreateObject("System.Collections.ArrayList")
  Dim sVers
  For Each sVers In aTests
      Dim aParts : aParts = Split(sVers, ".")
      alVers.Add oFmt.formatArray("{0,4}.{1,4}.{2,4}", aParts)
  Next
  alVers.Sort
  WScript.Echo "---------------"
  WScript.Echo Join(alVers.ToArray(), vbCrLf)
  WScript.Echo "---------------"
  For Each sVers In alVers
      WScript.Echo Replace(sVers, " ", "")
  Next 
```

输出：

```
1.0.1
1.0.10
1.0.2
---------------
   1\.   0\.   1
   1\.   0\.   2
   1\.   0\.  10
---------------
1.0.1
1.0.2
1.0.10 
```

[从这里](https://stackoverflow.com/a/10616669/603855)获取 cFormat 类

# javascript - 敲除数据绑定范围变量“this”

> ID：10659522
> 
> 赞同：0
> 
> 时间：2012-05-18T20:47:42.977
> 
> 标签：javascript, inheritance, knockout.js

我有一个 HTML 元素绑定到我的视图模型中的一个可观察对象，它是使用[John Resig 的简单 javascript 继承](http://ejohn.org/blog/simple-javascript-inheritance/)构建的。

```
<div data-bind="with: selectedItem()">
    ...
    <div  data-bind="click: $root.save">Save changes</div>
    ...
</div> 
```

我的 ViewModel 看起来像这样。

```
var ViewModel = Class.extend({
    init: function(type){
        this.type = type;
        this.selectedItem = ko.observable({name: "My name"});
    },
    save: function(data){
        alert(this.type);
    }
}); 
```

ViewModel#save 中的“this”引用了“selectedItem()”。换句话说，“this”引用了传递给函数的“data”。我怎样才能访问 ViewModel 的**实例**呢？

**已编辑**

这里的目的是从 ViewModel 继承函数。我想分别将“this.type”作为“第一”和“第二”访问。

```
var FirstViewModel = ViewModel.extend({
    init : function() {
    this._super('first');
    }
});

var SecondViewModel = ViewModel.extend({
    init : function() {
    this._super('second');
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T21:00:56.820

查看此答案及其下方的答案： [https ://stackoverflow.com/a/346044/1388165](https://stackoverflow.com/a/346044/1388165)

您遇到了 Javascript 的一个有趣部分，其中“this”指的是调用函数的对象，而不是被调用函数的父对象。这可以通过使用闭包来处理，例如下面示例中的 common that = this 模式。

如果你打算花很多时间在 Javascript 上，我强烈推荐 Douglas Crockford 的书“Javascript: The Good Parts”，它会让你意识到很多这样的事情。我还建议在 YouTube 上观看 Crockford 的演讲（有很多）。

编辑示例：

```
var ViewModel = Class.extend({
    that: {},
    init: function(){
        that = this;
        selectedItem = ko.observable({name: "My name"});
    },
    save: function(data){
        alert(that);
    }
});

var o = new ViewModel();
o.save(); 
```

# javascript - 如何获得客户的准确当地时间？

> ID：10659523
> 
> 赞同：59
> 
> 时间：2012-05-18T20:47:43.427
> 
> 标签：javascript, jquery, datetime, geolocation, timezone

无论客户端系统的时区如何，获取客户端本地时间的最佳方法是什么？我正在创建一个应用程序，我首先需要获取客户访问地点的确切时间和日期。即使检测客户端系统的 IP 地址也有缺点，或者检测客户端系统的时区有时可能会有风险。那么，有没有什么方法可以真正可靠且不易出错，因为向客户显示错误的时间和日期是一件非常尴尬的事情。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-05-18T20:49:26.423

在 JavaScript 中？只需实例化一个新的**[Date 对象](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)**

```
var now = new Date(); 
```

这将使用客户端的本地时间创建一个新的 Date 对象。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2016-08-26T07:52:13.700

如今，您只需一行代码即可获得用户的正确时区：

```
const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone; 
```

来源：[https ://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat/resolvedOptions](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat/resolvedOptions)

然后，您可以使用[moment-timezone](http://momentjs.com/timezone)来解析时区，例如：

```
const currentTime = moment().tz(timezone).format(); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2019-11-24T23:41:26.627

尝试

```
let s= new Date().toLocaleString();

console.log(s);
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-05-18T20:59:18.107

如果您想知道客户端相对于 GMT/UTC 的时区，请访问：

```
var d = new Date();
var tz = d.toString().split("GMT")[1].split(" (")[0]; // timezone, i.e. -0700 
```

如果您想要时区的实际名称，可以试试这个：

```
var d = new Date();
var tz = d.toString().split("GMT")[1]; // timezone, i.e. -0700 (Pacific Daylight Time) 
```

## 更新 1

根据您的第一条评论，您还可以使用`d.getTimezoneOffset()`从 UTC 获取以分钟为单位的偏移量。虽然有几个问题。

1.  返回的分钟数的符号 (+/-) 可能与您的预期相反。如果您比 UTC*晚*8 小时，它将返回`480`not `-480`。有关更多文档，请参阅[MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/getTimezoneOffset)或[MSDN](http://msdn.microsoft.com/en-us/library/81698774.aspx)。
2.  它实际上并没有返回客户端报告的时区，就像我给出的第二个示例一样。只是当前与 UTC 的分钟偏移量。所以它会根据夏令时而改变。

## 更新 2

虽然字符串拆分示例有效，但阅读起来可能会令人困惑。这是一个应该更容易理解并且可能更快的正则表达式版本（虽然这两种方法都非常快）。

如果您想知道客户端相对于 GMT/UTC 的时区，请访问：

```
var gmtRe = /GMT([\-\+]?\d{4})/; // Look for GMT, + or - (optionally), and 4 characters of digits (\d)
var d = new Date().toString();
var tz = gmtRe.exec(d)[1]; // timezone, i.e. -0700 
```

如果您想要时区的实际名称，请尝试以下操作：

```
var tzRe = /\(([\w\s]+)\)/; // Look for "(", any words (\w) or spaces (\s), and ")"
var d = new Date().toString();
var tz = tzRe.exec(d)[1]; // timezone, i.e. "Pacific Daylight Time" 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-09-30T14:01:56.933

为了在纯 Javascript 中获取本地时间，请使用这个内置函数

`// return new Date().toLocaleTimeString();`

见下面的例子

```
 function getLocaltime(){
   return new Date().toLocaleTimeString();
 }
 console.log(getLocaltime()); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-09-03T12:38:57.503

只需要解决这个问题，所以我想我会留下我的答案。不需要 jQuery 我曾经更新元素，因为我已经缓存了对象。

我首先编写了一个 php 函数来将所需的日期/时间返回到我的 HTML 模板

```
 /**
 * Gets the current location time based on timezone
 * @return string
 */

function get_the_local_time($timezone) {

    //$timezone ='Europe/London';

    $date = new DateTime('now', new DateTimeZone($timezone));

    return array(
        'local-machine-time' => $date->format('Y-m-d\TH:i:s+0000'),
        'local-time' => $date->format('h:i a')
    );

} 
```

然后在我的 HTML 模板中使用它来显示初始时间，并在数据属性中呈现 javascript 所需的日期格式。

```
 <span class="box--location__time" data-time="<?php echo $time['local-machine-time']; ?>">
            <?php  echo $time['local-time']; ?>
        </span> 
```

然后我在我的日期对象上使用 getUTCHours 来返回时间，而与用户时区无关

> getUTCHours() 方法根据世界时返回指定日期和时间的小时（从 0 到 23）。

```
var initClocks = function() {

    var $clocks = $('.box--location__time');

    function formatTime(hours, minutes) {

        if (hours === 0) {
            hours = 12;
        }

        if (hours < 10) {
            hours = "0" + hours;
        }

        if (minutes < 10) {
            minutes = "0" + minutes;
        }

        return {
            hours: hours,
            minutes: minutes
        }
    }

    function displayTime(time, $clockDiv) {

        var currentTime = new Date(time);

        var hours = currentTime.getUTCHours();
        var minutes = currentTime.getUTCMinutes();
        var seconds = currentTime.getUTCSeconds();
        var initSeconds = seconds;

        var displayTime = formatTime(hours, minutes);

        $clockDiv.html(displayTime.hours + ":" + displayTime.minutes + ":" + seconds);

        setInterval(function() {

            if (initSeconds > 60) {
                initSeconds = 1;
            } else {
                initSeconds++;
            }

            currentTime.setSeconds(initSeconds);

            hours = currentTime.getUTCHours();
            minutes = currentTime.getUTCMinutes();
            seconds = currentTime.getUTCSeconds();

            displayTime = formatTime(hours, minutes);

            $clockDiv.html(displayTime.hours + ":" + displayTime.minutes + ":" + seconds);

        }, 1000);

    }

    $clocks.each(function() {

        displayTime($(this).data('time'), $(this));

    });

}; 
```

然后我使用 setSeconds 方法根据页面加载后的秒数更新日期对象（简单的间隔函数），并更新 HTML

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-04-29T14:50:59.363

*   直接这样：

    ```
    new Date((new Date().setHours(new Date().getHours() - (new Date().getTimezoneOffset() / 60)))).toISOString() 
    ```

*   此实用程序功能中的更多详细信息

    ```
    function getLocaLTime() {
      // new Date().getTimezoneOffset() : getTimezoneOffset in minutes 
      //for GMT + 1 it is (-60) 
      //for GMT + 2 it is (-120) 
      //..
      let time_zone_offset_in_hours = new Date().getTimezoneOffset() / 60;
      //get current datetime hour
      let current_hour = new Date().getHours();
      //adjust current date hour 
      let local_datetime_in_milliseconds = new Date().setHours(current_hour - time_zone_offset_in_hours);
      //format date in milliseconds to ISO String
      let local_datetime = new Date(local_datetime_in_milliseconds).toISOString();
      return local_datetime;
      } 
    ```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-10-22T14:58:49.097

我发现这个功能在我所有的项目中都非常有用。你也可以使用它。

```
getStartTime(){
    let date = new Date();
    var tz = date.toString().split("GMT")[1].split(" (")[0];
    tz = tz.substring(1,5);
    let hOffset = parseInt(tz[0]+tz[1]);
    let mOffset = parseInt(tz[2]+tz[3]);
    let offset = date.getTimezoneOffset() * 60 * 1000;
    let localTime = date.getTime();
    let utcTime = localTime + offset;
    let austratia_brisbane = utcTime + (3600000 * hOffset) + (60000 * mOffset);
    let customDate = new Date(austratia_brisbane);

    let data = {
        day: customDate.getDate(),
        month: customDate.getMonth() + 1,
        year: customDate.getFullYear(),
        hour: customDate.getHours(),
        min: customDate.getMinutes(),
        second: customDate.getSeconds(),
        raw: customDate,
        stringDate: customDate.toString()
    }

    return data;
  } 
```

这将根据您的时区为您提供时间。

谢谢。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-09-16T07:45:18.757

这是使用 fetch 和[https://worldtimeapi.org/api在 2020 年 9 月运行良好的版本](https://worldtimeapi.org/api)

```
fetch("https://worldtimeapi.org/api/ip")
  .then(response => response.json())
  .then(data => console.log(data.dst,data.datetime));
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-11-12T22:31:30.267

我发现显示城市或位置当地时间的最可靠方法是利用时区 API，例如[Google Time Zone API](https://developers.google.com/maps/documentation/timezone/intro)。它返回正确的时区，更重要的是，任何位置的夏令时偏移量，据我所知，仅使用 JavaScript 的 Date() 对象是无法完成的。这里有一个关于使用 API 获取和显示本地时间的很好的[教程](http://www.javascriptkit.com/dhtmltutors/local-time-google-time-zone-api.shtml)：

```
var loc = '35.731252, 139.730291' // Tokyo expressed as lat,lng tuple
var targetDate = new Date() // Current date/time of user computer
var timestamp = targetDate.getTime() / 1000 + targetDate.getTimezoneOffset() * 60 // Current UTC date/time expressed as seconds since midnight, January 1, 1970 UTC
var apikey = 'YOUR_TIMEZONE_API_KEY_HERE'
var apicall = 'https://maps.googleapis.com/maps/api/timezone/json?location=' + loc + '&timestamp=' + timestamp + '&key=' + apikey

var xhr = new XMLHttpRequest() // create new XMLHttpRequest2 object
xhr.open('GET', apicall) // open GET request
xhr.onload = function() {
  if (xhr.status === 200) { // if Ajax request successful
    var output = JSON.parse(xhr.responseText) // convert returned JSON string to JSON object
    console.log(output.status) // log API return status for debugging purposes
    if (output.status == 'OK') { // if API reports everything was returned successfully
      var offsets = output.dstOffset * 1000 + output.rawOffset * 1000 // get DST and time zone offsets in milliseconds
      var localdate = new Date(timestamp * 1000 + offsets) // Date object containing current time of Tokyo (timestamp + dstOffset + rawOffset)
      console.log(localdate.toLocaleString()) // Display current Tokyo date and time
    }
  } else {
    alert('Request failed.  Returned status of ' + xhr.status)
  }
}
xhr.send() // send request 
```

来自：[使用 JavaScript 和 Google Time Zone API 显示任何城市的当地时间](http://www.javascriptkit.com/dhtmltutors/local-time-google-time-zone-api.shtml)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-04-15T12:16:25.430

我需要在本地时间向服务器报告客户端发生的事情。（在这个特定的商业案例中，UTC 没有提供任何价值）。我需要使用 toIsoString() 来使格式与 .Net MVC 兼容，但是 toIsoString() 这总是将其转换为 UTC 时间（正在发送到服务器）。

受“amit saini”答案的启发，我现在使用这个

```
 function toIsoStringInLocalTime(date) {
        return new Date((date.getTime() + (-date.getTimezoneOffset() * 60000))).toISOString()
    } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-07-07T05:45:37.670

我的代码是

```
function display_c(){
  var refresh=1000; // Refresh rate in milli seconds
  mytime=setTimeout('display_ct()',refresh)
}

  function display_ct() {
  var strcount
  var x = new Date()
  document.getElementById('ct').innerHTML = x;
  tt=display_c();
}
```

```
<body onload=display_ct();>
  <span id='ct' ></span>
</body>
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-09-16T07:30:22.040

您还可以创建自己的 nodeJS 端点，使用 heroku 之类的东西发布它，然后访问它

```
require("http").createServer(function (q,r) {
    r.setHeader("accees-control-allow-origin","*")
    r.end(Date.now())
}).listen(process.env.PORT || 80) 
```

然后在JS上访问它

```
fetch ("http://someGerokuApp")
.then(r=>r.text)
. then (r=>console.log(r)) 
```

这仍然与托管节点应用程序的任何计算机相关，但也许您可以通过某种方式获取位置并根据当前时区提供适合其他时区的不同端点（例如，如果服务器恰好在加利福尼亚，那么对于纽约时区只需将`1000*60*60*3`毫秒添加到 Date.now() 以添加 3 小时）

为简单起见，如果可以从服务器获取位置并将其作为响应标头发送，则只需在客户端对不同时区进行计算

实际上，使用 heroku，它们允许您指定应该在[https://devcenter.heroku.com/articles/regions#specifying-a-region](https://devcenter.heroku.com/articles/regions#specifying-a-region)上部署的区域，您可以将其用作参考。

编辑刚刚意识到时区在日期字符串本身中，可以将整个内容作为标题支付给客户端读取

```
require("http").createServer(function (q,r) {
    var d= new Date()
    r.setHeader("accees-control-allow-origin","*")
    r.setHeader("zman", d.toString())
    r.end(d.getTime())
}).listen(process.env.PORT || 80) 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2014-08-22T06:47:05.330

试试这种方式

```
 function timenow(){
    var now= new Date(), 
    ampm= 'am', 
    h= now.getHours(), 
    m= now.getMinutes(), 
    s= now.getSeconds();
    if(h>= 12){
        if(h>12) h -= 12;
        ampm= 'pm';
    }

    if(m<10) m= '0'+m;
    if(s<10) s= '0'+s;
    return now.toLocaleDateString()+ ' ' + h + ':' + m + ':' + s + ' ' + ampm;
}

toLocaleDateString() 
```

是更改日期时间格式的功能，例如`toLocaleDateString("en-us")`

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2021-02-20T17:23:35.017

```
new Date(Date.now() + (-1*new Date().getTimezoneOffset()*60000)).toISOString() 
```

# ruby-on-rails - 我无法插入我的数据库导轨

> ID：10659525
> 
> 赞同：0
> 
> 时间：2012-05-18T20:47:50.527
> 
> 标签：ruby-on-rails, ruby

我无法插入我的数据库我的问题是什么？

这是保龄球比赛，我有两张名为“玩家”和“结果”的桌子

看法

```
<%= form_for player_new_path(@player) do |f|%>
<div class="text_field">
    <p>
    <%= f.label "Spelare namn" %>
    <%= f.text_field :name %>
    </p>
    <p> 
    <%= f.submit "Lägg till en spelare"%>
    </p>
</div> 
```

```
Controller
 def create
   @player = Player.new(params[:players])

  if @player.save
    redirect_to players_new_path
   else
  render :action => "new"
end        

end 
```

* * *

不工作：/我的模型：

```
class Player < ActiveRecord::Base # attr_accessible :title, :body 
    belongs_to :result 
end 
```

和我的迁移：

```
class CreatePlayers < ActiveRecord::Migration
    def change 
        create_table :players do |t|
        t.string "name"
        t.references :results 
        t.timestamps
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T20:49:58.000

检查您的参数哈希。我敢打赌，关键不是“玩家”，它可能是“玩家”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T20:50:45.313

`@player = Player.new(params[:players])`应该是`@player = Player.new(params[:player])`（你得到一个单一的球员作为参数）

否则，你会得到什么错误

# c# - 如何使用 Web 服务

> ID：10659527
> 
> 赞同：0
> 
> 时间：2012-05-18T20:47:59.643
> 
> 标签：c#, asp.net, database

大家好，下面是我想使用的 WebService 类（我写的）。问题是我不太确定如何使用它。我有一个 WinForm 通过另一个实例连接到数据库`DataAccessObject`。

用户必须能够单击一个按钮，该按钮将打开表单的网站版本并从那里修改数据库。

问题是我不知道如何使用服务来做到这一点

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Xml.Linq;
using System.Configuration;

/// <summary>
/// Summary description for DataManager
/// </summary>
[WebService(Namespace = "/201103578Site//Default.aspx")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment         the following line. 
//[System.Web.Script.Services.ScriptService]

public class DataManager : System.Web.Services.WebService 
{
    XElement[] xmlCompany = null;
    XElement[] xmlCandidate = null;
    XElement[] xmlQualification = null;

    public DataManager () 
    {
        //Uncomment the following line if using designed components 
        //InitializeComponent(); 
        DataAccessObject.DataAccessObject daoDataBase = new     DataAccessObject.DataAccessObject(ConfigurationManager.ConnectionStrings[1].ToString());
        daoDataBase.openConnection();

        xmlCompany = daoDataBase.sqlSelectCompany(new SQL.SqlImplementation(), "Select     * From Company");
        xmlCandidate = daoDataBase.sqlSelectCandidate(new SQL.SqlImplementation(),     "Select * From Candidate");
        xmlQualification = daoDataBase.sqlSelectQualification(new     SQL.SqlImplementation(), "Select * From Qualification");
        daoDataBase.closeConnection();
    }

    [WebMethod]
    public XElement[] getXmlCompany()
    {
        return xmlCompany;
    }

    [WebMethod]
    public XElement[] getXmlCandidate()
    {
        return xmlCandidate;
    }

    [WebMethod]
    public XElement[] getXmlQualification()
    {
        return xmlQualification;
    }

} 
```

我想调用`getXmlCompany`Company.aspx.cs 文件中的任何其他方法，就像调用任何其他方法一样——如果可能的话

亲切的问候

马库斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T21:10:36.743

当您调试 Web 服务时，如果一切正常，您将在那里看到您的 Web 方法列表。现在，在浏览器中复制 url，转到需要使用它的项目，添加 web 引用并将 url 过去。它将查看并显示您的 web 服务。

此外，您可以考虑在 IIS 中托管您的 Web 服务，这样您就不必每次都运行调试。

# java - 创建参数为数组的泛型类

> ID：10659528
> 
> 赞同：0
> 
> 时间：2012-05-18T20:47:59.790
> 
> 标签：java, arrays, generics, comparator

我想创建一个扩展 Comparator 的类。此比较器将比较两个数组，其中数组可以包含任何可比较的内容。可以让我做这样的事情的东西：

```
comparator.compare(new Integer[] {1,2}, new Integer[] {3,4,5}); 
```

参数的类型不一定是 Integer[]。它们可以是任何东西的数组。

有什么方法可以使用泛型创建这样的类吗？或者我的比较器应该接收对象。如果它必须接收对象，我如何检查它是否是一个数组并从其中获取元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T20:58:15.693

使用数组本身作为类型参数`Comparator`怎么样？

```
public class ArrayComparator<T extends Comparable<? super T>> implements
        Comparator<T[]> {
    @Override
    public int compare(T[] o1, T[] o2) {
        // TODO
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T20:55:48.110

您的 Comparator 参数类型应为 T[]。

这是一个示例用法：

```
public class Test<T> implements java.util.Comparator<T[]> {

    @Override
    public int compare(T[] paramT1, T[] paramT2) {
        return 0;
    }

    public static void main(String[] args) {
        System.out.println(new Test<Integer>().compare(new Integer[] {1,2}, new Integer[] {3,4,5}));
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T20:57:30.667

是的，你可以，例如这样：

```
implements Comparator<T[]> {
    @Override
    public int compare(T[] array1, T[] array2) {
        //compare arrays here
        return ...;
    } 
```

或类似这样的比较方法，它将推断调用值的类型：

```
public static <T> int compare(T[] array1, T[] array2) { 
```

# .net - 重复的代码和方法重载/覆盖

> ID：10659529
> 
> 赞同：0
> 
> 时间：2012-05-18T20:48:02.510
> 
> 标签：.net, vb.net

这是一个关于面向对象的一般问题，特别是 .NET（或任何其他框架或语言）中的重载函数。我正在查看具有大量重复代码的应用程序。例如，看看以下函数：

```
Public Function Test(ByVal Test1 As String)

//code that is specifically relevant to Test1 variable

End Function

Public Function Test (ByVal Test1 As String, ByVal Test2 As String)
    //code that is specifically relevant to Test1 variable
    //code that is specifically relevant to Test2 variable
End Function 
```

我认为最好的做法是将：//与 Test1 变量特别相关的代码放在一个单独的函数中，因为它在两个函数中都很常见。是这样吗？我一直认为重复代码是一个非常糟糕的主意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T20:57:38.103

这不是更好：

```
Public Function Test(ByVal Test1 As String) 
    //code that is specifically relevant to Test1 variable
End Function 

Public Function Test (ByVal Test1 As String, ByVal Test2 As String) 
    Test(Test1)
    //code that is specifically relevant to Test2 variable 
End Function 
```

理想情况下，重载应该是向原始函数添加附加功能，但保留它的原始行为，以防您在代码中的其他地方使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T20:50:43.507

通常，如果可能，我会做这样的事情：

```
Public Function Test(ByVal Test1 As String)
    Test(Test1, Nothing)
End Function

Public Function Test (ByVal Test1 As String, ByVal Test2 As String)
    ' code that is specifically relevant to Test1 variable
    If Test2 IsNot Nothing Then
        ' code that is specifically relevant to Test2 variable
    End If
End Function 
```

# c# - Azure 上的管道读取失败

> ID：10659531
> 
> 赞同：3
> 
> 时间：2012-05-18T20:48:11.727
> 
> 标签：c#, c++, .net, azure, pinvoke

我有一个旧应用程序，我试图在 Azure 工作人员下运行。该应用程序使用一种相当常见的模式来启动子进程，方法是创建一个匿名管道、将标准输出重定向到该管道、生成一个子进程，然后使用该管道进行通信。

为了让它在 Azure 下运行，我对启动整个过程的 dll 进行了 P/Invoke 调用。

所有这些在 Azure 之外都可以正常工作，但即使在模拟器下运行也会失败。

在 Azure 下运行时，proc 无法通过管道进行通信。具体来说，父级对管道句柄的读取调用失败（超时）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T23:00:34.420

我终于发现问题是因为遗留代码复制了标准输出句柄以传递给子进程。

在 Azure 下运行时，STDOUT 的 GetStdHandle 返回 0x0。这基本上意味着，“没有错误，但你没有 STDOUT”。显然，您需要检查 0x0 和 INVALID_HANDLE。

创建句柄，在启动子项之前将它们设置在 STARTUPINFO 上，而不是复制现有的句柄来修复所有问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-19T17:13:42.813

我有以下两个建议：

1.  请问您是否正在使用 .net 4 编译您的工人角色？在 P/Invoking 时，使用 .net 4 将应用程序与网络管道绑定存在一些问题，因此请将应用程序属性设置为 .net 3.5 配置文件。
2.  从带有 SYSTEM 上下文的启动任务中启动此遗留进程，并将此应用程序 EXE 设置为 CSDEF 中的 ProgramEntryPoint，以便可以直接启动它。您是否还在此应用程序中使用任何 IP/端口？是的，你必须在你的角色 onStart() 中编写一些代码才能正确绑定。

让我知道你的结果是什么。

# c# - 在 WPF 中将列表框绑定到字符串类型的 Observable 集合

> ID：10659532
> 
> 赞同：3
> 
> 时间：2012-05-18T20:48:14.660
> 
> 标签：c#, wpf, data-binding, listbox, observablecollection

我正在尝试创建一个跟踪 JobItems 的应用程序。在应用程序中，用户单击“New Job”按钮以创建 JobItem。然后会弹出一个新窗口（NewJobWindow），用户必须填写有关 Job 的信息。一些所需的信息具有多个值。例如，您可以在一个工作项目中添加多个（字符串）业务单位。我所做的是添加一个列表框，供用户在其中添加所有业务单位。我不知道如何绑定这个业务单位列表框，这样每次我在其中添加一个项目时，当我单击提交按钮时，JobItem 中的 Observable Collection BusinessUnits 都会添加相同的项目。我需要知道如何使用数据绑定来做到这一点。我已经在 Google 上搜索过类似的答案，但找不到任何答案。

**编辑**：

这是我的 JobItem 类中的内容，每次用户在 NewJobWindow 中提交多个 BusinessUnit 时我都需要更新：

```
public ObservableCollection<string> BusinessUnit
    {
        get { return businessUnit; }
        set
        {
            if(!BusinessUnit.Equals(value))
            {
                businessUnit = value;
                OnPropertyChanged("BusinessUnit");
            }
        }

    } 
```

这是用于在列表框中添加业务单元的 xaml 中的 JobWindow 的样子。我创建了一个 ValidatingListBox 只是为了验证用户是否在列表框中插入了一个项目。：

```
<Label Grid.Column="0" Grid.Row="5">Business Unit:</Label>
        <my:ValidatingListBox Grid.Column="1" Grid.ColumnSpan="1" Grid.Row="5" Grid.RowSpan="1" x:Name="businessUnitBox" SelectionMode="Multiple" SelectionChanged="ValidatingListBox_SelectionChanged" ItemsSource="{Binding Path=BusinessUnit}" >
        <my:ValidatingListBox.ValidationListener>
                <Binding RelativeSource="{RelativeSource FindAncestor, AncestorType=Window}" Path="BusinessUnit" Mode="TwoWay">
                <Binding.ValidationRules>
                    <my:ListBoxValidationRule ValidatesOnTargetUpdated="True" ></my:ListBoxValidationRule>
                </Binding.ValidationRules>
            </Binding>
        </my:ValidatingListBox.ValidationListener>
    </my:ValidatingListBox> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T20:59:47.897

绑定非常简单：

```
<ListBox ItemsSource="{Binding MyCollection}" /> 
```

其中 MyCollection 是 ObservableCollection 类型的属性。您不需要将项目添加到 ListBox，将它们添加到集合中，数据绑定将完成剩下的工作。

# jquery - 将数值类应用于子元素

> ID：10659537
> 
> 赞同：1
> 
> 时间：2012-05-18T20:48:31.137
> 
> 标签：jquery, class, numbers

我似乎无法弄清楚如何将一个类添加到其父级中的一组元素中。

**例子：**

```
<div class="block">
  <a href="#" class="thumbnail"></a>
  <a href="#" class="thumbnail"></a>
  <a href="#" class="thumbnail"></a>
</div>
<div class="block">
  <a href="#" class="thumbnail"></a>
  <a href="#" class="thumbnail"></a>
  <a href="#" class="thumbnail"></a>
</div> 
```

**我希望它看起来像这样：**

```
<div class="block">
  <a href="#" class="thumbnail group1"></a>
  <a href="#" class="thumbnail group1"></a>
  <a href="#" class="thumbnail group1"></a>
</div>
<div class="block">
  <a href="#" class="thumbnail group2"></a>
  <a href="#" class="thumbnail group2"></a>
  <a href="#" class="thumbnail group2"></a>
</div> 
```

**我试过类似的东西：**

```
$("div.Block a").attr("class", function (arr) {
  return "group" + arr;
}); 
```

但这会使块内的类返回所有具有不同数字而不是分组的类。也许像在父 div 上使用它，然后以某种方式将主 div 类复制到它的每个孩子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T20:51:58.267

```
$("div.block").each(function(i){
    $(this).find("a").addClass("group" + (i + 1));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T20:52:16.063

```
$('div.block').each(function(idx) {
    $('a', this).addClass('group' + (idx + 1));
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T20:52:30.573

您可以使用以下代码执行此操作

```
$("div.block").each(function(index){
  $(this).find('a').addClass("group" + (index+1));
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T20:52:31.897

尝试如下，

```
//     v-- Note: your div class is block not Block.
$("div.block").each (function (idx) { 
    $(this).find('a').addClass('group' + (idx+1));
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T20:54:43.413

循环遍历 div 并使用该迭代器中的索引：

```
​$(".block").each(function(i,e){
    $("a",e).addClass("group" + (i+1));
})​​​ 
```

请注意使用 addClass 而不是 attr。还要注意使用 e（元素）作为“a”选择器的上下文

# java - 让 facebook 深层链接在模拟器 facebook android 上工作

> ID：10659541
> 
> 赞同：6
> 
> 时间：2012-05-18T20:48:49.650
> 
> 标签：java, android, facebook, android-emulator

我要解决的问题-我正在尝试使深层链接正常工作，并使用模拟器对其进行测试。单击帖子时，链接会直接指向移动网站。这是在用户拥有应用程序权限的情况下，应用程序已安装（在模拟器上）。在 Facebook 应用程序中，它甚至承认其已过时，但升级（应用程序内）崩溃。

我还注意到模拟器上安装的 Facebook 应用程序已经过时了（我是通过`adb install facebook.apk`github sdk 安装的）。

SSO 工作正常，我之前已经有效地设置了与 iOS 的深度链接（所以我知道 ti 应该如何工作/测试它等）。但是这个过时的第 3 方 Facebook 应用程序阻碍了 Android 的移植。我假设在设备上进行测试会解决它，因为 Facebook 应用程序将是最新的（这让人想起 - 如果人们没有更新他们的 android facebook 应用程序怎么办？）。

我的应用设置： ![脸书应用设置](../Images/d7f160ccf8948cd0661185d3b0794b98.png)

我会发布代码，但这似乎是纯粹的集成和配置问题。

注意：我的应用没有在 Google Play 上发布，可能是这个问题吗？另外：也许这只能在设备上测试？我的设备是“在邮件中”，所以尽量用模拟器完成这个。

更新：Facebook 告诉我这需要 Facebook 应用程序 1.9.*，它不在 SDK 中。所以，我得到了一个设备，虽然我还没有解决它，但至少应用程序书签功能正在工作。如果/当我找到答案时会更新。

上午 11 点更新：我终于让它工作了！

1.  我必须在 Play/Market 中发布我的应用程序。
2.  每次我测试时，退出 FB-Android 应用程序，清除缓存，然后强制停止。会计。书签被缓存到文档中。我还认为 facebook 应用程序同步发生在启动时，并且永远不会再发生。因此，如果您更改 FB 应用程序设置中的任何内容，您需要注销/清除缓存/停止以使其进入 fb android 应用程序。
3.  只有一个键有效，即使它在 fb 应用程序设置中显示“哈希”，我认为我的开发键搞砸了。再次确认您的发布密钥与应用设置中列出的密钥相同。
4.  对我来说，最后的秘诀是关闭 SSO 和深度链接，在没有任何设置的情况下重新测试。另外，从手机中删除开发包并从 Play 下载。（见：关键混淆）。然后，我通过首先打开 SSO、测试、然后打开本机深度链接来回退配置。
5.  只能在真实设备上工作，不能在模拟器上工作（除非你可以在模拟器上安装 1.9，可能工作，没有走那条路去测试）
6.  不确定这是否重要，但它可能：从 Store/Play 安装应用程序，而不是从 Eclipse。可能是关键同步的事情。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T01:42:12.560

我想通了 - 涉及执行以下操作：

1.  我必须在 Play/Market 中发布我的应用程序。

2.  每次我测试时，退出 FB-Android 应用程序，清除缓存，然后强制停止。会计。书签被缓存到文档中。我还认为 facebook 应用程序同步发生在启动时，并且永远不会再发生。因此，如果您更改 FB 应用程序设置中的任何内容，您需要注销/清除缓存/停止以使其进入 fb android 应用程序。

3.  只有一个键有效，即使它在 fb 应用程序设置中显示“哈希”，我认为我的开发键搞砸了。再次确认您的发布密钥与应用设置中列出的密钥相同。

4.  对我来说，最后的秘诀是关闭 SSO 和深度链接，在没有任何设置的情况下重新测试。另外，从手机中删除开发包并从 Play 下载。（见：关键混淆）。然后，我通过首先打开 SSO、测试、然后打开本机深度链接来回退配置。

5.  只能在真实设备上工作，不能在模拟器上工作（除非你可以在模拟器上安装 1.9，可能工作，没有走那条路去测试）

6.  不确定这是否重要，但它可能：从 Store/Play 安装应用程序，而不是从 Eclipse。可能是关键同步的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T21:47:26.630

您是否查看过[深度链接的故障排除提示](http://developers.facebook.com/docs/mobile/android/deep_linking/#deeplink)？（对不起，不得不问。）

我想知道您设备上的 FB 应用程序是否在相关设置更改后没有正确退出。

# python - 如何在python中将参数字符串传递给可执行文件？

> ID：10659546
> 
> 赞同：0
> 
> 时间：2012-05-18T20:49:13.393
> 
> 标签：python

假设我需要在 python 中执行以下操作：

```
import os
os.system("a.out 1 \n 3 \n 2 \n 5 \n 2...") 
```

这里我有单独的字符串来存储参数：

```
par="1 \n 3 \n 2 \n 5 \n 2..." 
```

不知道如何在 python 中将其通过管道传输到“a.out”。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T21:00:55.550

假设您想将该字符串传递给标准输入，

```
import subprocess

p = subprocess.Popen(['a.out'], stdin=subprocess.PIPE)
p.communicate('1 \n 3 \n 2 \n 5 \n 2...\n') 
```

编辑：因为你想从文件中读取，这实际上更容易。

```
import subprocess
subprocess.call(['a.out'], stdin=file('a.inp')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T21:37:38.440

你可以试试：

```
os.system('a.out %s' % par) 
```

# jquery - 创建动画热点/图像地图的最佳方法

> ID：10659548
> 
> 赞同：0
> 
> 时间：2012-05-18T20:49:25.987
> 
> 标签：jquery, html, canvas

在网上搜索了几个小时后，我在这个主题上找不到太多帮助。可能是我没有简单地提出正确的搜索词。

我的问题是：在 div 之上创建动画热点区域（即可点击的超链接）的最佳方式是什么？

你可能想知道我为什么要问这个。我正在进行 360* 交互式全景图（使用 jpeg 序列创建），我想在全景图中有一些可点击的热点。因为相机正在平移，所以必须对热点进行动画处理才能跟随正确的屏幕元素。

画布是否能够为热点/链接设置动画？还是我应该在别处寻找解决方案？也许是 SVG？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T22:23:25.237

您可以在没有画布的情况下执行此操作，这无论如何都是有问题的，因为您无法将事件侦听器本地附加到您绘制的单个元素或 SVG。

将您的热点创建为绝对定位的 div，并在使用[jQuery animate](http://api.jquery.com/animate/)方法之类的方法到达全景的每一帧时将它们移动到适当的位置。

# regex - 正则表达式将输入限制为仅出现 10 次的数值

> ID：10659550
> 
> 赞同：1
> 
> 时间：2012-05-18T20:49:29.057
> 
> 标签：regex

我需要帮助形成正则表达式以将用户输入限制为仅数字且最多出现 10 次。

我有正则表达式，它只能将输入保留为数字，但我不能将其限制为最多 10 个。

这是我所拥有的：

```
^(0|[1-9][0-9]*)$ 
```

我可以接受负数、小数和 0。有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T21:02:00.547

```
^\s*([0-9)+){0,10}\s*$ 
```

这基本上说我想要 0 到 10 件东西，每件东西都是数字。我在任一侧添加了 \s* 以允许用户在其数字之前或之后放置空格。这会接受像

10 1231231 1231 1231 23112 123123

如果你真正想要的只是一个数字，最多只有 10 位数字，那就更容易了：

```
^\s[0-9]{1,10}\s$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T21:01:05.940

你可以试试这个：

```
^(?<=\s)(\-?[\d]{1,10}(?=\s))$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T21:02:18.760

您正在寻找的正则表达式是这样的：

```
/(?=^[-+]?\d*\.?\d+$)^.{1,10}$/ 
```

请记住，此正则表达式将允许输入的最大长度为 10，其中包括可选的`+`或`-`开始时的符号和小数点`.`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T21:09:13.063

这失败了，因为它有 11 位数字

```
Debug.WriteLine(Regex.IsMatch("12345678901", @"^\d{1,10}$").ToString()); 
```

在您澄清您需要最多 10 组由空格分隔的数字之前发布了上述答案。

测试了接受的答案，在 .NET Regex 中它对我来说失败了。即使修复了语法错误，它仍然不会按空格解析

试试这个

```
Debug.WriteLine(Regex.IsMatch(" 12345 678901 12   ", @"^\s*([+-]?\d+)(\s+[+-]?\d+){1,9}\s*$").ToString()); 
```

# xmpp - 通过 Strophe 附加（未连接）时是否应该向 XMPP 服务器广播状态？

> ID：10659557
> 
> 赞同：2
> 
> 时间：2012-05-18T20:50:02.790
> 
> 标签：xmpp, strophe

XMPP 规范规定客户端应在连接到 XMPP 服务器时广播出席信息。Strophe 有两种“连接”到 XMPP 服务器的方法：连接和附加。Connect 进行完全授权，并且 attach 用于重新连接到预先存在的连接。使用附加时，客户端是否应该向服务器广播存在？

在我的测试中，如果我没有在附加时广播出席信息，客户端不会收到来自其他用户的消息（出席信息、消息或其他），并且如果客户端尝试发送任何节，他会立即被断开连接服务器。就好像服务器不知道用户在没有存在广播的情况下已连接。

这似乎是我回答了自己的问题，但是，我想知道服务器中是否存在错误，或者我做错了什么或者这是预期的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T11:18:55.407

某处存在错误-附加实际上是*附加*-您正在继续原始会话。服务器甚至不知道它发生了！

需要注意的事情 - 如果您的旧代码仍然打开，并且您有多个使用同一个会话的东西，那么您很容易得到像您描述的那样的东西。

如果您仍然卡住，查看一些代码或至少查看附加会话的日志可能会很有用（例如与服务器断开连接 - 它给出了什么错误等？）。

# jquery - Jquery试图隐藏表单

> ID：10659562
> 
> 赞同：0
> 
> 时间：2012-05-18T20:50:12.713
> 
> 标签：jquery

在页面加载时，我有两个 div 块“replyComment”和“tobereplaced”

```
<div id="replyComment">        
<form id="myForm" name="myForm" method="post" action="reply.php" >
    <textarea name="suggestions" rows="5" cols="60" style="resize:none" onfocus="this.value=''">Enter your reply here</textarea>
    <input type="hidden" name="hidden">
<input type="hidden" name="hidden2" >  
    <a href="blog.php?page=hm"><img src="html_images/cancel.png" onmouseover="src='html_images/cancelhover.png'" onmouseout="src='html_images/cancel.png'" alt="Cancel"/></a>
    <input type="image" name="Post"  value="Reply" alt="Reply" src="html_images/reply.png" onmouseover="src='html_images/replyhover.png'" onmouseout="src='html_images/reply.png'"/>
</form>
    </div>
      <div name="tobereplaced">
            <img src="html_images/reply.png"  class="ajax-func" onmouseover="src='html_images/replyhover.png'" onmouseout="src='html_images/reply.png'" />
      </div> 
```

我正在尝试在加载时隐藏replyComment div，并将其切换为在点击时显示以替换为以下jquery。

```
 $(document).ready(function () {
       $(".replyComment").hide();
       $(".ajax-func").click(function(evt) {
            $(this).prevAll(".replyComment:first").slideToggle("fast");
            $(this).toggleClass("active");
            return false;
                                            });
       }); 
```

但是replyComment不会在页面加载时隐藏，也不会切换..我是jquery的新手，任何帮助将不胜感激..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T20:52:41.817

如果您通过类引用元素，则使用点选择器，使用哈希选择器通过 ID 引用元素。所以在你的情况下，你应该有：

```
$('#replyComment').hide(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T20:53:04.393

Your div is an `id`, but your selector is looking for classes. Try this:

```
 $("#replyComment").hide(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T20:54:03.173

Your selector is wrong. ".replyComment" matches a tag with the class replyComment.

For the id you sould the selector "#replyComment".

Try studing a little bit more selectors, they are the soul of jQuery and browse [http://jqapi.com/](http://jqapi.com/) for references.

# jpa - JPA 如何知道实体是新的还是分离的？

> ID：10659566
> 
> 赞同：1
> 
> 时间：2012-05-18T20:50:23.143
> 
> 标签：jpa

如果实体被删除或管理，它将被存储（或其哈希）在当前 EntityManger 的持久化上下文中，因此 JPA 知道它的状态。但是 JPA 实现如何知道给定的实体是新的还是分离的呢？检查@ID 是否为空并不总是有效。它是特定于 JPA 提供程序的吗？换句话说，JPA 如何知道它需要`javax.persistence.EntityExistsException`在合并期间抛出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T20:59:45.570

以下是[Hibernate 的做法](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#example-parentchild-update)：

*   如果生成了标识符，则使用标识符的存在
*   如果不是，并且实体是版本化的（用于乐观锁定），请使用时间戳或版本
*   如果上述不可行，查询二级缓存或数据库，知道标识符是否已经存在。

# pthreads - Posix / 线程与连接

> ID：10659567
> 
> 赞同：1
> 
> 时间：2012-05-18T20:50:39.603
> 
> 标签：pthreads

我读了一本书，它给出了下一个代码：

```
void *printme(void *id) {
    int *i;
    i = (int *)id;
    printf("Hi. I'm thread %d\n", *i);
    return NULL;
}

void main() {
    int i, vals[4];
    pthread_t tids[4];
    void *retval;
    for (i = 0; i < 4; i++) {
        vals[i] = i;
        pthread_create(tids+i, NULL, printme, vals+i);
    }
    for (i = 0; i < 4; i++) {
        printf("Trying to join with tid%d\n", i);
        pthread_join(tids[i], &retval);
        printf("Joined with tid%d\n", i);
    }
} 
```

以及下一个可能的输出：

```
Trying to join with tid0 
Hi. I'm thread 0 
Hi. I'm thread 1 
Hi. I'm thread 2 
Hi. I'm thread 3 
Joined with tid0 
Trying to join with tid1 
Joined with tid1 
Trying to join with tid2 
Joined with tid2 
Trying to join with tid3 
Joined with tid3 
```

而且我不明白这怎么可能。我们从主线程开始，创建 4 个线程：`tids[0]... tids[3]`. 然后，我们暂停执行（通过 join 指令）：主线程会等待`tids[0]`会停止执行，`tids[0]`会等待`tids[1]`等等。

所以输出应该是：

```
Hi. I'm thread 0 
Hi. I'm thread 1 
Hi. I'm thread 2 
Hi. I'm thread 3 
Trying to join with tid0 
Trying to join with tid1 
Joined with tid0 
Trying to join with tid2 
Joined with tid1 
Trying to join with tid3 
Joined with tid2 
Joined with tid3 
```

我觉得我不明白一些非常基本的东西。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T21:25:31.240

当您创建新线程 pthread_create 时，线程 #1 和 main 都并行工作。Main 转到下一条指令，即 phtread_join 并挂起，直到线程 #1 完成。这就是为什么您尝试加入 tid0 ，然后您好，我是线程 #1。

另请注意，主线程将按指定顺序加入子线程。这意味着当你有线程#1，线程#2和线程#3，线程1需要10秒执行，线程2需要6秒执行，线程3需要7秒执行，那么第一次连接将在10之后发生秒，然后在几毫秒内你应该有下一个连接，因为所有其他线程都应该完成他们的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T21:27:14.690

我认为您缺少的是`pthread_create`与`fork`. 创建的线程从提供的函数（`printme`在本例中为 ）开始，并在该函数返回后立即退出。因此，新创建的线程都没有到达第二个`for`循环。

# vb.net - 试图让一个类返回一个字符串

> ID：10659571
> 
> 赞同：0
> 
> 时间：2012-05-18T20:50:47.760
> 
> 标签：vb.net

我正在将代码从代码隐藏移动到类并遇到问题。我有一个制作字符串（html 发票）的方法。在该方法中，创建了最终数量。我想创建一个名为 Invoice 的类，该类将具有方法“CreateInvoice”，该方法将返回一个字符串，并且我还想设置对象的 finalCharge 属性。我已经完成了所有繁重的工作，但是设置课程是我遇到麻烦的部分

```
Public Class Invoice
    Public finalCharge As Double
    Public invoiceString As String
    Public billingId As Integer
    Public clientID As Integer

Public Shared Function CreateInvoice(ByVal bill_id As Integer, ByVal client_id As Integer) As String
    ... 'create string invoice
    ... 'tally final charge
End Function

'On my code-behind page.
dim y as string
dim x as Invoice

y = x.CreateInvoice(1225,8855) <-- this line doesn't work. 
```

感谢您帮助解决问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T20:58:22.250

它是一个`Shared`函数 - 这意味着您不需要（或不想要）该类的实例来使用它。你应该这样称呼它：

```
Invoice.CreateInvoice(1225, 8855) 
```

就是说，我不完全确定应该`Shared`从头开始，因为您还说：

> [I]...想设置 finalCharge 属性

由于一个`Shared`函数只能访问`Shared`属性（因为没有实例），你可能*真的*希望它是一个实例函数：

```
Public Class Invoice
    Public finalCharge As Double
    Public invoiceString As String
    Public billingId As Integer
    Public clientID As Integer

    Public Function CreateInvoice(ByVal bill_id As Integer, ByVal client_id As Integer) As String
        ... 'create string invoice
        Me.finalCharge = ... 'tally final charge
    End Function
End Class 
```

在这种情况下，您可以这样称呼它：

```
Dim x as New Invoice()
Dim y as String = x.CreateInvoice(1225, 8855)
Dim finalCharge as Double = x.finalCharge 
```

# java - Java 监控：JMX 与 Servlet

> ID：10659572
> 
> 赞同：5
> 
> 时间：2012-05-18T20:50:48.713
> 
> 标签：java, servlets, monitoring, jmx

在过去的几年里，我学到了很多关于 JMX 的知识，并为我的 Web 应用程序构建了一些非常漂亮的 MBean。但是，我不确定我对一个非常基本的问题有一个好的答案：

为什么在简单的 HTTP servlet 上使用 JMX？

我当前的 Web 应用程序提供了冗余监控选项：我可以使用 JConsole 之类的客户端通过 JMX 访问需要监控的数据，或者我可以通过 servlet 访问 XML 格式的相同数据。我没有看到使用一种方法优于另一种方法的充分理由，但 servlet 方法确实具有可由简单的 http 客户端/Web 浏览器读取的主要优势。

我可以看到 JMX 对于不是 Web 应用程序的 Java 应用程序非常有用，但我看不出将 JMX 用于 Web 应用程序有什么好处。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T20:59:52.820

> 为什么在简单的 HTTP servlet 上使用 JMX？

从我的角度来看，JMX 更好有 3 个原因：

1.  它需要更少的代码来启用监控点。
2.  它端到端地处理 Java 序列化对象，因此具有更好的数据一致性。
3.  它适用于不基于 servlet 的程序（如您所述）。

JMX 为特定数据项提供了更简单的接口。您当然可以在许多 servlet 中编写相同的功能，但我更容易公开那些使用 JMX 的功能。

例如，如果您使用 Spring，那么您可以使用`org.springframework.jmx.export`注释（`@ManagedResource`、`@ManagedAttribute`等）来标记您的类。我还发布了我的[SimpleJmx 框架](http://256stuff.com/sources/simplejmx/)，因此您可以通过几个独立于 Spring 的注释轻松公开属性和操作。例如：

```
@JmxResource(domainName = "j256", objectName = "lookupCache")
public class LookupCache {

    // this can also be done as @JmxAttributeMethod on the getter/setters
    @JmxAttributeField(description = "Number of hits in the cache")
    private int hitCount;
    ...

    @JmxOperation(description = "Flush the cache")
    public void flushCache() {
       ...
    }
} 
```

我有一个[完整的示例程序](http://svn.code.sf.net/p/simplejmx/code/trunk/src/test/java/com/j256/simplejmx/server/ExampleTest.java)来看看它是如何工作的。因此，公开一个值或操作所需要做的就是为类以及每个属性和/或方法添加一个注释。使用 SimpleJmx 发布它的代码如下所示。Spring 与 bean 类似：

```
// create a new server listening on port 8000
JmxServer jmxServer = new JmxServer(8000);
jmxServer.start();
// register our lookupCache object defined above
jmxServer.register(lookupCache); 
```

要在 servlet 中获得类似的功能，将需要更多的代码，而不仅仅是注释。也就是说，可能存在在我不知道的 servlet 领域提供类似功能的框架。

还有一些注意事项：

*   可能有更好的监控工具可以处理 HTTP/HTML，但也有大量的分布式 JMX 监控应用程序。大概是折腾了。
*   能够以编程方式从 JMX 服务器 获取*对象是一个优势，而不仅仅是来自 servlet 页面的字符串。*[SimpleJmx](http://256stuff.com/sources/simplejmx/)还支持一个简单的 JMX 客户端，尽管存在更好的客户端。
*   显然，JVM 已经默认发布了许多其他有价值的数据：VM 设置、线程详细信息、内存信息等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T20:59:35.540

除了读取值之外，JMX 还可用于调用管理 Bean 上的方法。

例如，我们经常使用它来远程强制对 Tomcat 实例进行 JVM 垃圾收集。

此外，由于 JMX 是与 http/https 不同的端口，因此您可以通过防火墙在网络级别限制访问。JMX 也有内置的用户名/密码认证。

Web servlet 必须实现它自己的访问控制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-06T12:30:31.950

在我看来，JMX 被高估了，配置起来可能很棘手。如果您的应用程序已经是一个网络容器，我认为您绝对应该选择一个简单的 servlet。

[像 nudge4j](https://github.com/lorenzoongithub/nudge4j)这样的小型servlet 方法可以为您提供一切，甚至更多。

# solr - clojure-solr-0.2.0 和 solr4

> ID：10659574
> 
> 赞同：1
> 
> 时间：2012-05-18T20:51:07.963
> 
> 标签：solr, clojure, solrj

我正在尝试让 clojure-solr-0.2.0 与 solr4 一起使用（trunk nightly build）。我收到以下异常：

```
Caused by: java.lang.RuntimeException: Invalid version or the data in not in 'javabin' format
at org.apache.solr.common.util.JavaBinCodec.unmarshal(JavaBinCodec.java:99)
at org.apache.solr.client.solrj.impl.BinaryResponseParser.processResponse(BinaryResponseParser.java:39)
at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:466)
at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:243)
at org.apache.solr.client.solrj.request.QueryRequest.process(QueryRequest.java:89) 
```

我假设这是因为 clojure-solr 正在使用来自 solr3 代码库的某个版本的 solrj 库，并且 javabin 格式在版本之间发生了变化。

有什么简单的方法可以让它工作吗？

编辑：

我从项目的 lib 文件夹中删除了 solrj，并将其替换为`lib/apache-solr-solrj-4.0-2012-05-15_08-20-37.jar`. 我希望这会起作用，因为在运行时（应该）在类路径上找到相同的类（传递依赖项只在运行以获取依赖项时才需要`lein deps`（或者我推断）。结果是在运行：

```
Caused by: java.lang.ClassNotFoundException:    org.apache.solr.client.solrj.impl.CommonsHttpSolrServer
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at clojure.lang.DynamicClassLoader.findClass(DynamicClassLoader.java:61)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:169)
at clojure_solr$eval1423$loading__4414__auto____1424.invoke(clojure_solr.clj:1)
at clojure_solr$eval1423.invoke(clojure_solr.clj:1)
at clojure.lang.Compiler.eval(Compiler.java:5424)
... 95 more 
```

问题是`CommonsHttpSolrServer`罐子中不再存在：

```
$ jar tf lib/apache-solr-solrj-4.0-2012-05-15_08-20-37.jar |grep Http
org/apache/solr/client/solrj/impl/HttpSolrServer$1.class
org/apache/solr/client/solrj/impl/HttpSolrServer$2.class
org/apache/solr/client/solrj/impl/HttpSolrServer$3.class
org/apache/solr/client/solrj/impl/HttpSolrServer$DeflateDecompressingEntity.class
org/apache/solr/client/solrj/impl/HttpSolrServer$GzipDecompressingEntity.class
org/apache/solr/client/solrj/impl/HttpSolrServer$UseCompressionRequestInterceptor.class
org/apache/solr/client/solrj/impl/HttpSolrServer$UseCompressionResponseInterceptor.class
org/apache/solr/client/solrj/impl/HttpSolrServer.class
org/apache/solr/client/solrj/impl/LBHttpSolrServer$1.class
org/apache/solr/client/solrj/impl/LBHttpSolrServer$Req.class
org/apache/solr/client/solrj/impl/LBHttpSolrServer$Rsp.class
org/apache/solr/client/solrj/impl/LBHttpSolrServer$ServerWrapper.class
org/apache/solr/client/solrj/impl/LBHttpSolrServer.class
$ jar tf lib/apache-solr-solrj-4.0-2012-05-15_08-20-37.jar |grep CommonsHttp
$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T21:46:23.357

您很可能需要自己构建 clojure-solr 并修复它以使用最新的 solr4。这实际上并不难。

*   [从github 项目中](https://github.com/mikejs/clojure-solr)克隆它
*   安装
*   将其作为依赖项添加到您的主项目中
*   破解并重复。

# css - 禁用移动设备的悬停和活动伪类

> ID：10659577
> 
> 赞同：1
> 
> 时间：2012-05-18T20:51:43.583
> 
> 标签：css, mobile, hover

是否可以仅为移动设备禁用悬停和活动伪类？

我找到了这个

```
html.touch {
  /* Touch is enabled */
}

html.no-touch {
  /* Touch is disabled */
} 
```

这看起来很整洁。但我无法让它工作。

代码如下，你可以在这里测试一下：http: [//jsfiddle.net/5qb2J/](http://jsfiddle.net/5qb2J/)

```
<html>
<head>
<style type="text/css">
#button{background:url("http://www.webstuffshare.com/wp-content/uploads/2010/03/button3.jpg") no-repeat 0 0;display:block;width:201px;height:67px;}
#button:hover{background-position:0px -67px;}
#button:active{background-position:0px -134px;}
#button span{position:absolute;top:-99999999em;}
</style>    
</head>
<body>
<a id="button" href="#"><span>this is foo</span></a>
</body>
</html> 
```

* * *

## 编辑

我现在正在使用这个

```
<?php // detect mobile
$Mobile = FALSE;
if
(strstr(strtolower($_SERVER["HTTP_USER_AGENT"]), "android") ||
strstr(strtolower($_SERVER["HTTP_USER_AGENT"]), "webos") ||
strstr(strtolower($_SERVER["HTTP_USER_AGENT"]), "iphone") ||
strstr(strtolower($_SERVER["HTTP_USER_AGENT"]), "ipod") ||
strstr(strtolower($_SERVER["HTTP_USER_AGENT"]), "ipad") ||
strstr(strtolower($_SERVER["HTTP_USER_AGENT"]), "zune"))
{
$Mobile = TRUE;
}
?> 
```

和

```
<?php
If ($Mobile == FALSE)
{
echo <<<escapethis
some html here
escapethis;
}
?> 
```

使用单词 escapethis 的行不能以空格开头

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T20:59:14.357

听起来像`html.touch`并且`html.no-touch`正在与诸如[modernizr](http://modernizr.com/)之类的特征检测库一起使用，它将进行各种特征测试并`html`根据这些测试的结果向元素添加类。

在这种情况下，你会想要做这样的事情：

```
html.no-touch #ElementThatShouldHaveNoHoverEventOnTouchDevices:hover{
    //do your stuff
}

<div id="ElementThatShouldHaveNoHoverEventOnTouchDevices">
    hello
</div> 
```

# windbg - 如何获取进程中的关键部分列表

> ID：10659578
> 
> 赞同：3
> 
> 时间：2012-05-18T20:51:44.647
> 
> 标签：windbg

在 WinDbg 中，你可以调用 !locks 来获取当前进程中所有临界区的列表。我想知道是否有办法调用调试引擎 API 来检索相同的列表。我想在 C++ 中构建的定制调试器中执行此操作，该调试器基于调试引擎 API 构建。有什么想法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T22:01:20.347

这比较简单，你需要使用名为 RTL_CRITICAL_SECTION_DEBUG 的结构。我在打印输出中添加了注释：

```
0:011> dt ntdll!_RTL_CRITICAL_SECTION_DEBUG
   +0x000 Type             : Uint2B
   +0x002 CreatorBackTraceIndex : Uint2B
   +0x004 CriticalSection  : Ptr32 _RTL_CRITICAL_SECTION  // This is pointer to actual critical section
   +0x008 ProcessLocksList : _LIST_ENTRY  // All critical sections are chained in this doubly linked list
   +0x010 EntryCount       : Uint4B
   +0x014 ContentionCount  : Uint4B
   +0x018 Flags            : Uint4B
   +0x01c CreatorBackTraceIndexHigh : Uint2B
   +0x01e SpareUSHORT      : Uint2B 
```

如您所见，所有临界区都属于同一个全局列表，其中`ProcessLocksList`一个临界区指向`ProcessLocksList`下一个临界区（以及前一个临界区）。一旦知道所有`ProcessLocksList`s 的地址，就可以通过从中减去 sizeof(void*) 来提取指向 RTL_CRITICAL_SECTION 结构的指针。

最后，第一个`ProcessLocksList`条目的地址由 ntdll!RtlCriticalSectionList 给出。

以下命令是我上面所说的演示。它将打印出该过程中的所有关键部分：

```
 !list "-t ntdll!_LIST_ENTRY.Flink -e -x \"ln poi(@$extret-0x4); dt ntdll!_RTL_CRITICAL_SECTION poi(@$extret-0x4)\" ntdll!RtlCriticalSectionList" 
```

如果需要，请针对 x64 进行调整。

根据要求添加：这是 x64 的版本：

```
 !list "-t ntdll!_LIST_ENTRY.Flink -e -x \"ln poi(@$extret-0x8); dt ntdll!_RTL_CRITICAL_SECTION poi(@$extret-0x8)\" ntdll!RtlCriticalSectionList" 
```

# iphone - NSTimer 如何在计时器仍处于活动状态时禁用？

> ID：10659580
> 
> 赞同：2
> 
> 时间：2012-05-18T20:52:02.317
> 
> 标签：iphone, objective-c, ios4, ios5

我创建了一个计时器，

```
 self.scanTimer = [NSTimer scheduledTimerWithTimeInterval:TIMEOUT_SECONDS target:self selector:@selector(meInterrupted:) userInfo:nil repeats:NO]; 
```

在我的代码中的某个时间点，我觉得在超时发生之前禁用它，以便不调用 meInterrupted？如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T20:57:37.720

只需调用 [self.scanTimer invalidate]; 如果在计时器触发之前调用它，这将使计时器永远不会触发。

# cocoa - NSMenuItem 等效键中的丑陋字符

> ID：10659581
> 
> 赞同：3
> 
> 时间：2012-05-18T20:52:05.437
> 
> 标签：cocoa, interface-builder, nsmenuitem, text-rendering

在我的应用程序的主菜单中，我有一个菜单项，我想将其设置为快捷键 alt+“减号”。我能够在 IB 中设置等效键，它按预期触发，但在运行应用程序时真的很难看：

![在此处输入图像描述](../Images/d18f27d3f2d31083737f88a4c911d67f.png)

即使在 Interface Builder 中也很好：

![在此处输入图像描述](../Images/9d769e79107142cfb339b91caf579d63.png)

你知道为什么会这样吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T21:25:08.357

这似乎是 OS X 的问题，这是 Pixelmator 的截图：

![Pixelmator 截图](../Images/17dfb7228cbca98dab842f9f2a1cf4cf.png)

甚至 Preview.app 也有同样的问题/错误（`View`菜单）：

![预览屏幕截图 - 查看菜单](../Images/e5b58f059e13ddb73d56b07a4c649f49.png)

# java - 非常奇特：HTTP Status 405 - Method Not Allowed

> ID：10659586
> 
> 赞同：14
> 
> 时间：2012-05-18T20:52:29.490
> 
> 标签：java, rest, jaxb, jersey

**[使用 Apache Tomcat/7.0.27]**

看来我只收到此错误

*   （**HTTP 状态 405 - 方法不允许**）

当我尝试直接从浏览器发出 REST 请求时。

例如，将其粘贴到地址栏中：

```
http://localhost:8080/restExample/rest/catalog/video/14951/hello 
```

当我运行我的测试客户端 Main.java 时，**一切正常。**

关于为什么它不允许我通过浏览器执行 REST 的任何想法？

客户端：

```
public class Main{
    public static void main(String [] args){
       ClientConfig config = new DefaultClientConfig();
       Client client = Client.create(config);   
       WebResource service = client.resource(getBaseURI(_package));
       runPutRequest(service,"video/128/This is the content with the new description");
    }
}

...
private static void runPutRequest(WebResource service,String path){
        String response = service.path("rest/catalog/"+path).accept(MediaType.APPLICATION_XML).put(String.class);
        System.out.println("Post Response :"+response);
    } 
```

服务器端：

```
@PUT
@Path("/video/{video-id}/{short-descr}")
@Consumes(MediaType.TEXT_PLAIN)
@Produces(MediaType.APPLICATION_XML)
public Video updateVideo(@PathParam("video-id") int contentid,
                         @PathParam("short-descr") String descr)
{       
    //Video video = searchByContentId(contentid);
    Video video = videoMap.get(contentid);
    video.setDescription(descr);

    videoMap.put(contentid,video);

    if( videoMap.get(contentid) != null){
        return videoMap.get(contentid);
    }else{
         throw new UnsupportedOperationException("NO object found");
    }
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-18T20:57:28.410

浏览器将为您的资源发出 GET 请求 - 您已`@PUT`在服务器端声明为 a 并从客户端代码向其 PUT。浏览器正在尝试“获取”（或 GET）资源，而 @GET 不存在任何内容

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-18T20:57:11.160

通常，浏览器使用 GET HTTP 方法发出请求。您的服务器端组件只能响应 PUT 请求，这就是您收到该错误代码的原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T13:23:38.677

存在用于能够执行 PUT、POST 和 DELETE 请求的浏览器的 REST 客户端。我更喜欢Chrome 的[Simple REST Client](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFEQFjAA&url=https://chrome.google.com/webstore/detail/fhjcajmcbmldlhcimfajhfbgofnpcjmb&ei=BpYSUIOJGsGtqQHSyoGIAQ&usg=AFQjCNEAHS5oglhFFj5jce-pPj-LRhU1gQ)。

# javascript - 未捕获的类型错误：无法调用 null 的“替换”方法

> ID：10659592
> 
> 赞同：5
> 
> 时间：2012-05-18T20:52:49.243
> 
> 标签：javascript, jquery, backbone.js, underscore.js

如果我在 Chrome JS 控制台上键入“_.template($('#pranks-list').html())”，它也可以工作

```
>> _.template($('#pranks-list').html())
function (a){return e.call(this,a,b)} 
```

app.js // 视图

```
window.PranksListView = Backbone.View.extend({

    template: _.template($('#pranks-list').html())
}); 
```

索引.html

```
 <script type="text/html" id="pranks-list">
    <li><a href='#pranks/<%= id %>'><%= name %></a></li>
  </script>

  </body> 
```

为什么我在这条线上得到这个错误？

```
template: _.template($('#pranks-list').html()) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-18T20:57:50.537

没有看到整个代码就很难判断，但是您可能正在尝试`_.template($('#pranks-list').html())`在创建 dom 并且节点存在之前运行。通常，当您准备好模板变量时，在渲染时渲染模板是一个好习惯：

```
_.template($('#pranks-list').html(), {id: 'foo', name: 'bar'}); 
```

# apache - Apache rewrite rule for whole directory

> ID：10659594
> 
> 赞同：1
> 
> 时间：2012-05-18T20:53:00.153
> 
> 标签：apache, mod-rewrite

I would like to put a rewrite rule

```
RewriteRule /test /my/long/path/index.html 
```

but my index.html fetch other files, by ajax, so it's not working simple like this. I need a rule for all subfiles of the directory
I tried:

```
RewriteRule /test /my/long/path/
RewriteRule /test/* /my/long/path/* 
```

but I end up with a funny redirect [http://my.domain.co/test/index.html/index.html/index.html/index.html/index.html/index.html/index.html/index.html/index.html/index.html/index.html/index.html/index.html/index.html/index.html/index.html/index.html/index.html/index.html/index.html/index.html/](http://my.domain.co/test/index.html/index.html/index.html/index.html/index.html/index.html/index.html/index.html/index.html/index.html/index.html/index.html/index.html/index.html/index.html/index.html/index.html/index.html/index.html/index.html/index.html/)

Sorry for my ignorance in Apache, and thx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T21:00:17.497

您的 RewriteRule 无效。试试这个：

```
RewriteRule ^test(/.*)?$ my/long/path$1 
```

# terminal - Changing directory in a CakeFile task

> ID：10659598
> 
> 赞同：0
> 
> 时间：2012-05-18T20:53:16.363
> 
> 标签：terminal, coffeescript, cd, cakefile

I tried to change the directory using a normal cd command, but it says execvp(): No such file or directory.

These are the lines:

```
fs = require 'fs'

util = require 'util'
{spawn} = require 'child_process'

clientTest = (callback) ->
  d = spawn 'cd', ['client']
  d.stderr.on 'data', (data) ->
    process.stderr.write data.toString()
  d.stdout.on 'data', (data) ->
    util.log data.toString()
  d.on 'exit', (code) ->
    callback?() if code is 0 
```

I'm guessing I have to do something withe the filesystem?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T14:28:02.357

`cd`是一个内置的 shell 命令。尝试运行

```
/usr/bin/cd /dir 
```

从你的外壳；你会发现它什么也没做。同样，`cd`从 Node 运行也没有效果。

`cd`您应该使用 更改工作目录，而不是生成[`process.chdir`](http://nodejs.org/docs/latest/api/process.html#process_process_chdir_directory).

# django - Django Issue Setting Empty String

> ID：10659600
> 
> 赞同：0
> 
> 时间：2012-05-18T20:53:30.193
> 
> 标签：django, string, if-statement

I currently have a form that allows the user to edit their profile (django-profiles). The form is working great, except that I've put a switch in place for States and Provinces depending on whether ot not the user picks Canada or the US.

In my model, I have both State and Province set so that in the table there are 2 separate fields.

In my save method I have the following:

```
def user_created(sender, user, request, **kwargs):
    form = RegistrationFormZ(request.POST)
   ....stuff here.....
    if form.data["country"] == 'US':
      data.state = form.data["state"]
      data.provinces = None
    if form.data["country"] == 'CA':
      data.provinces = form.data["provinces"]
      data.state = None
   ....stuff here....
    data.save()

    user.first_name = form.data['first_name']
    user.last_name = form.data['last_name']
    user.save()

from registration.signals import user_registered
user_registered.connect(user_created) 
```

The if statements are not working as I expected they would on save.

What's happening is that it correctly saves the value of the option that was selected (state/province) but then fails to update the opposing one to an empty value.

So for example let's say I had a user who had a Canadian address, and then updated it to the US address. The US state gets properly saved, but province does not get updated to None.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T21:25:28.027

也许更优雅的方式来实现这一点是使用字典。顺便说一句，您确定您的字段名称是省（复数）而不是单数吗？这是一个如何使用字典执行此操作的示例，请注意，您可以为不同的国家/地区添加更多字段而无需更多`if`语句，您甚至可以编写单独的 getter 函数来返回这些字典：

```
def user_created(sender, user, request, **kwargs):
    form = RegistrationFormZ(request.POST)

    ....stuff here.....

    data.state = None
    data.provinces = None

    state_field = {}
    state_field['US'] = {}
    state_field['US']['src'] = form.data['state']
    state_field['US']['dest'] = data.state

    state_field['CA'] = {}
    state_field['CA']['src'] = form.data['province']
    state_field['CA']['dest'] = data.province

    state_field[form.data['country'].upper()]['dest'] = state_field[form.data['country'].upper()]['src']

    ....stuff here....
    data.save()

    user.first_name = form.data['first_name']
    user.last_name = form.data['last_name']
    user.save()

from registration.signals import user_registered
user_registered.connect(user_created) 
```

# email - SharePoint 2010 send WorkFlow email on form submit/save click

> ID：10659602
> 
> 赞同：0
> 
> 时间：2012-05-18T20:53:37.387
> 
> 标签：email, sharepoint-2010, workflow

Could you please help me understand how to send a workflow email, when user submits a task form. The process is to automate the sending of email to "BI Owners", when user fills out a form and once he/she clicks "save"/"submit", then the email should be sent out.

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T00:50:30.740

您需要了解 Worfklow 的配置吗？在这种情况下，请检查：

[在工作流中发送电子邮件](http://office.microsoft.com/en-us/sharepoint-designer-help/send-e-mail-in-a-workflow-HA010239042.aspx "在工作流中发送电子邮件")

你如何建立你的表格？它是一个aspx，一个webpart，某种魔法？

嗯，这很重要，因为你有不同的方式来启动你的工作流程，这取决于它。

如果您拥有所有表单的控制权，那么这就是我的发送电子邮件类：

```
 protected void sendEmail()
    {
        try
        {
                string mailTo = dudeToSendMail;
                MailMessage message = new MailMessage();
                message.From = new MailAddress(mailSender);
                message.To.Add(new MailAddress(mailTo));
                message.Subject = mailSubject;
                message.Body = buildMail();  // hey, dude, build up your mail here!
                message.IsBodyHtml = true;
                SmtpClient client = new SmtpClient();
                client.Send(message);
        }
        catch (System.Exception)
        {
            throw;
        }

    } 
```

希望能帮助到你。

# xamarin.android - Monodroid Deleteing GetExternalFilesDir On Every Debug Session (Unwanted Behavior)

> ID：10659607
> 
> 赞同：1
> 
> 时间：2012-05-18T20:54:03.837
> 
> 标签：xamarin.android

I recently upgraded my project to Mono For Android v4.2\. With this update, when ever I deploy my app to my device, all files I've previously created in the directory returned by **GetExternalFilesDir("db")** are deleted. I don't want this behavior. The previous version of M4A I was using did not do this unwanted behavior.

Should I be using a different Method to get a directory to store my files in? I have seen getExternalStorageDirectory() suggested but I don't even see that method available in Mono For Android.

I want this behavior: I want these files to be deleted when the user truly unisntalls my app, but I don't want them deleted if it's just installing an update.

Thanks,

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T22:32:26.013

Tools -> Options -> Mono for Android -> Preserve something something something

# objective-c - Keep UITableView selected value after data reload

> ID：10659608
> 
> 赞同：0
> 
> 时间：2012-05-18T20:54:17.220
> 
> 标签：objective-c, ios

I have a table that is loading values from a JSON call that refreshes every 5 seconds. Every time the table changes, and a new cell is added, the currently selected cell becomes the one above the last one on the reload. You can see in my get_counter selector where I am trying to do it. Thanks in advance! I am still very new at ObjC so just trying to learn :)

```
- (void)viewDidLoad {
[super viewDidLoad];
repeat_timer=[NSTimer scheduledTimerWithTimeInterval:5.0 target:self selector:@selector(check_new) userInfo:nil repeats:YES];

}

-(void)check_new{

    NSString *ret;
    ret=[MyWebFunction is_new_orders:appDelegate.user_id Order_number:[[response_array objectAtIndex:0] objectForKey:@"order_id"] Type:type];

    if([ret isEqualToString:@"yes"]){
        [indicator startAnimating];
        [self performSelector:@selector(get_counter) withObject:nil afterDelay:0.0005];

    }
}

-(void)get_counter{

jsonString = [[NSMutableString alloc] initWithData:[MyWebFunction get_orders:appDelegate.user_id Type:type Limit:limit] encoding:NSUTF8StringEncoding];;
response_array = [[jsonString JSONValue] retain];
[indicator stopAnimating];

//this is my attempt at retaining the value :)    
NSIndexPath *ipath = [table indexPathForSelectedRow];
NSLog(@"iPath: %@",ipath);
[table reloadData];
[table selectRowAtIndexPath:ipath animated:NO scrollPosition:UITableViewScrollPositionNone];

if([response_array count]>0){

    total=[[[response_array objectAtIndex:0] objectForKey:@"total_orders"] intValue];
    checksArray=[[NSMutableArray alloc] init];

    for(int i=0;i<response_array.count;i++){

        [checksArray addObject:@"0"];
    }
}
sel_item_id=[[NSMutableArray alloc] init];
all_ids=nil;

if(repeat_timer){
    [repeat_timer invalidate];
    repeat_timer=nil;
repeat_timer=[NSTimer scheduledTimerWithTimeInterval:5.0 target:self selector:@selector(check_new) userInfo:nil repeats:YES];
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T23:29:34.740

我可能完全不喜欢这个，但这可能是你的问题。

```
NSIndexPath *ipath = [table indexPathForSelectedRow]; 
```

对我来说，这看起来像是你在选定的行上获得了一个指针。因此，当您更新表时，ipath 也会更新。

尝试：

```
NSIndexPath *ipath = [[table indexPathForSelectedRow] copy]; 
```

另一件事是，如果您添加新行，则行索引会发生变化。试试这个：

```
- (NSIndexPath *)indexPathForCell:(UITableViewCell *)cell 
```

所以它会是：

```
NSIndexPath *ipath = [table indexPathForSelectedRow];
UITableViewCell *cell = [table cellForRowAtIndexPath:ipath];
[table reloadData];
[table selectRowAtIndexPath:[table indexPathForCell:cell] animated:NO scrollPosition:UITableViewScrollPositionNone]; 
```

很多信息，但希望那里的东西会有所帮助。

# c++ - How can I force to load / create pdb files for a dll

> ID：10659609
> 
> 赞同：0
> 
> 时间：2012-05-18T20:54:22.017
> 
> 标签：c++, visual-studio-2010, debugging

I have downloaded the latest version of SFML (a library) which includes source files, dlls, headers, and .lib files. I have no problem using the library and it's linked dynamically. I'd like to be able to step through the library code in the debugger (I used to be able to which earlier version), but now I can only see the assembly. What is the usual way to generate pdb files to so? thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T22:57:20.640

一般来说，Visual Studio 2010 应该会自动为您生成 .pdb 文件（如果您在调试模式下构建）。查看您的调试输出文件夹。您可以从项目设置中查看生成的 .pdb 的位置和内容；

![生成 PDB](../Images/9dc5fbb2b34fa274b3e29600338e07be.png)

斯特伦

# java - How to instrument java methods?

> ID：10659610
> 
> 赞同：6
> 
> 时间：2012-05-18T20:54:29.897
> 
> 标签：java, instrumentation

I want to write a simple java agent which can print the name of a method called by the java program instrumented.

For example, my java program I want to instrument is:

```
public class TestInstr {

public static void sayHello() {
    System.out.println("Hello !");
}

public static void main(String args[]) {
    sayHello();
    sayHello();
    sayHello();
 }

} 
```

I would like to display something like this :

```
method sayHello has been called
Hello !
method sayHello has been called
Hello !
method sayHello has been called
Hello ! 
```

Thanks for your help!

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-18T21:04:50.257

您可以使用诸如 Javassist 之类的检测库来执行此操作。

让我给你一个单一方法的例子，你可以使用 Javassist 或反射将它扩展到所有方法：

```
ClassPool pool = ClassPool.getDefault();
CtClass cc = pool.get("TestInstr");
CtMethod m = cc.getDeclaredMethod("sayHello");
m.insertBefore("{ System.out.println(\"method sayHello has been called\"); }");
cc.writeFile(); 
```

详情请查看此链接：[http ://www.csg.ci.iu-tokyo.ac.jp/~chiba/javassist/tutorial/tutorial2.html#intro](http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/tutorial/tutorial2.html#intro)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T20:58:37.107

我似乎记得[`AspectJ`](http://www.eclipse.org/aspectj/)可以做这样的事情；然而，我没有这方面的经验，所以探索可能性取决于你！:D

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T20:58:11.123

在您可以添加的方法中

```
public class TestInstr {

public static void sayHello() {
System.out.println("method sayHello has been called");
System.out.println("Hello !");
}

public static void main(String args[]) {
sayHello();
sayHello();
sayHello();
}
} 
```

您可以使用它来获取当前方法

```
public String getCurrentMethodName() {
 StackTraceElement stackTraceElements[] =
         (new Throwable()).getStackTrace();
 return stackTraceElements[1].toString();
} 
```

我不确定这是否是你要找的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T20:59:06.863

我不认为这很容易。

我能想到的唯一选择是实现类加载器并用您创建的存根替换原始类（Hibernate / JPA 为延迟加载做了类似的事情）。存根将执行您需要的操作，然后调用原始类来执行工作。这将意味着沉重的负担（反射调用并不便宜）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-22T04:02:32.810

如果您的需要只是记录一个方法是否被调用，那么面向方面的编程正是您所需要的，无论是 AspectJ（静态）还是 Spring AOP（动态），都提供了强大的功能来做到这一点。但是，您可能需要一些仪器库，以防您想做更多的仪器工作，例如跟踪执行时间、调用 track. 希望能帮助到你。

# sql - 获取没有连接的记录

> ID：10659615
> 
> 赞同：0
> 
> 时间：2012-05-18T20:54:55.487
> 
> 标签：sql

我有 3 张桌子：`Products`, `ProductProperties`, `Properties`. 我需要获得所有没有“属性 B”的产品。表：

```
# Products          # Join table                  # Properties
+----+-----------+  +------------+-------------+  +-------------+---------------+
| id | name      |  | product_id | property_id |  | property_id | property_name |
+----+-----------+  +------------+-------------+  +-------------+---------------+
|  1 | Product 1 |  |          1 |           1 |  |           1 |   Propeprty A |
|  2 | Product 2 |  |          1 |           2 |  |           2 |   Propeprty B |
|  3 | Product 3 |  |          2 |           1 |  +-------------+---------------+
+----+-----------+  |          2 |           2 |
                    |          3 |           1 |
                    +------------+-------------+ 
```

在这种特殊情况下**，我希望 Product 3 被退回**。

**是否可以在单个数据库查询**中获得所有必需的产品？实现这一目标的最小查询是什么？

**已编辑**。带有子查询的查询被认为是*bad*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T21:00:51.170

```
select * from Products P where not exists (select * from ProductProperties 
inner join Properties on ProductProperties .property_id = Properties property_id 
where P.product_id = ProductProperties.product_id and property_name = 'Propeprty B') -- *or whatever* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T21:15:18.670

> 我需要获得所有没有“Property B”的产品

逆问题。找到*带有* `PropertyB`的那些，然后否​​定它。

从所有`PropertyB`属性开始：

```
SELECT
     Property_Id
FROM Properties 
WHERE
     Property_Name = 'Property B' 
```

然后，找到有那些*s*`ProductId`的s：*`Property_Id`*

 *```
SELECT
     ProductId
FROM ProductProperties
JOIN (
     --1st query
     SELECT
         Property_Id
     FROM Properties 
     WHERE
         Property_Name = 'Property B'
) as PropertyB ON
    ProductProperties.Property_Id = PropertyB.Property_Id 
```

然后，找到所有`Product`不在该集合中的 s：

```
SELECT
    ProductId
FROM Product
LEFT OUTER JOIN (
    --2nd query
    SELECT
        ProductId
    FROM ProductProperties
    JOIN (
        --1st query
        SELECT
            Property_Id
        FROM Properties 
        WHERE
            Property_Name = 'Property B'
    ) as PropertyB ON
       ProductProperties.Property_Id = PropertyB.Property_Id
) as ProductsWithPropertyB ON
     Products.ProductId = ProductsWithPropertyB.ProductId
WHERE
     ProductsWithPropertyB.ProductId IS NULL 
```

然后，您可以简化一下：

```
SELECT
    ProductId
FROM Product
LEFT OUTER JOIN (
    SELECT
        ProductId
    FROM ProductProperties
    JOIN Properties ON
        ProductProperties.PropertyId = Properties.PropertyId
    WHERE
        Properties.Name = 'Property B'
) as ProductsWithPropertyB ON
     Products.ProductId = ProductsWithPropertyB.ProductId
WHERE
     ProductsWithPropertyB.ProductId IS NULL 
```

或者，如果您更喜欢`IN`子句（服务器可能不在乎）：

```
SELECT 
     ProductId 
FROM Products
WHERE
     ProductId NOT IN (
          SELECT ProductId FROM ProductProperties WHERE PropertyId IN (
              SELECT PropertyId FROM Properties WHERE PropertyName = 'Property B'
          )
     ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T21:01:02.127

```
SELECT Products.ProductID, Products.Name, Properties.property_name FROM Products
INNER JOIN ProductProperties ON Products.product_ID = ProductProperties.product_ID
INNER JOIN Properties ON ProductProperties.Property_ID = Properties.Property_ID
WHERE Properties.Property_ID <> 2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T21:13:54.187

似乎您想要一个 OUTER JOIN 和一个 WHERE 子句来恢复不匹配的属性。这是未经测试的，但是：

```
SELECT Products.* FROM 
Products RIGHT OUTER JOIN Join_Table 
  ON Products.ID = Join_Table.Product_ID
  AND Join_Table.Property_ID = 2
WHERE Products.ID IS NULL 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-18T21:02:39.547

是（更正以删除潜艇），

```
 Select * from 
     Products pr
     left join jointable jt on pr.id = jt.product_id 
     join properties pr on jt.property_id = pr.property_id and pr.property_name = 'Property B'
 where jt.product_id is null 
```*

# jquery - jquery countdown restart countdown without push any button

> ID：10659616
> 
> 赞同：1
> 
> 时间：2012-05-18T20:54:59.383
> 
> 标签：jquery, restart

I use this [jquery countdown](http://keith-wood.name/countdown.html)

What i want with the countdown is that it restart every day at 14:00\. When the counter reach 14:00 o'clock it should restart automatically and go to 23h:59m:59s

Right now it count down and when it reach my time it sticks at 00:00:00\. If i manually refresh the page the countdown starts again.

I have watch this [post](https://stackoverflow.com/questions/7686188/jquery-countdown-reset-timer) but i wo't help me with the restart

Here is the code I use:

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1      /jquery.min.js"></script>
<script type="text/javascript" src="js/jquery.countdown.js"></script>
<script type="text/javascript">
function doCountdown() {
    var todaysNoon = new Date(),
        nextNoon = new Date();
    todaysNoon.setHours(14, 00, 0);
    if (todaysNoon <= nextNoon) {
        nextNoon.setDate(nextNoon.getDate() + 1);
    }
    nextNoon.setHours(14, 00, 0);
    $('#defaultCountdown').countdown({
        until: nextNoon,
        description: '',
        onExpiry: function() {
            doCountdown()
        }
    });
}
$(window).load(function() {
    doCountdown();
});​
</script> 
```

**HTML**:

```
<h1>Text here</h1>
<p>Some text here.</p>
<div id="defaultCountdown"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:54:26.910

我认为countDown的问题在于它每次都使用相同的日期重新启动自己，所以如果你递归调用countDown初始化函数，它将使用旧值来初始化自己并立即调用递归函数，因为那个值将与旧相同（存）一个。所以我找到了一个不同的解决方案，这是代码：

```
 <script type="text/javascript">
    $(function () {
        startCountDown();
    });

    function startCountDown() {
        var austDay = new Date();
        //        austDay.setMinutes(austDay.getMinutes() + 1);
        austDay.setSeconds(austDay.getSeconds() + 5);
        $('#myDiv').children().remove();
        $('#myDiv').append('<div id="defaultCountdown" />');

        $('#myDiv').find('#defaultCountdown').countdown({
            format: 'MS',
            until: austDay,
            onExpiry: function () {
                $('#defaultCountdown').countdown('destroy');
                austDay.setMinutes(austDay.getMinutes() + 1);
                startCountDown();
            },
            compact: true,
            layout: '<b>{mnn}{sep}{snn}</b>'
        });
    }
</script>
<div id="myDiv">
    <div id="defaultCountdown">
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T21:36:16.440

Edited to illustrate proper use:

Simply do this - you were very close:

```
function doCountdown() {
    var todaysNoon = new Date(),
        nextNoon = new Date();
    todaysNoon.setHours(14, 00, 0);
    if (todaysNoon <= nextNoon) {
        nextNoon.setDate(nextNoon.getDate() + 1);
    }
    nextNoon.setHours(14, 00, 0);
    $('#defaultCountdown').countdown({
        until: nextNoon,
        description: '',
        onExpiry: doCountdown
    });
}
$(window).load(function() {
    doCountdown();
});​ 
```

What you were doing was passing "the result" of your function to the callback, not the actual function itself

here's a JSfiddle I made for you :

[http://jsfiddle.net/U6tgV/](http://jsfiddle.net/U6tgV/)

edit one more tyne (looking @ your page):

If you copy this verbatim it works as you wrote it with mild restructuring. Please note that I verified this via a local installation of Apache HTTPD 2.x stable, PHP5.4.x stable and this is a literal copy paste from that.

Couple additional notes : "best practices" (how i loath that phrase) are that your html + css should be stand alone and JS should compliment it. That being said - js and js refs should occur as much as possible AFTER the html is established. This sounds a lot easier than it can be depending on legacy systems and render-chain processes. Good luck and happy hunting

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>jQuery Countdown</title>
<style type="text/css">
@import "jquery.countdown.css";

#defaultCountdown { width: 240px; height: 45px; }
</style>

</head>
<body>

<div id="defaultCountdown">asdasdads</div>?
</body>
</html>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="http://keith-wood.name/js/jquery.countdown.js"></script>
<script type="text/javascript">

function doCountdown() {
    var todaysNoon = new Date(),
        nextNoon = new Date();
    todaysNoon.setHours(0, 00, 30);
    if (todaysNoon <= nextNoon) {
        nextNoon.setDate(nextNoon.getDate() + 1);
    }
    nextNoon.setHours(00, 00, 60);
    $('#defaultCountdown').countdown({
        until: nextNoon,
        description: '',
        onExpiry: doCountdown
    });
}
$('#defaultCountdown').on("click", function() {
    doCountdown();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T19:53:14.187

我有类似的问题，这是我为解决它所做的。您正在尝试在到期事件时重新初始化插件，您需要更新`until`属性。因此，在您的声明中使用不同的回调

```
$('#defaultCountdown').countdown({
        until: nextNoon,
        description: '',
        onExpiry: doReset
    }); 
```

接着

```
function doReset(){
var todaysNoon = new Date(),
        nextNoon = new Date();
    todaysNoon.setHours(14, 00, 0);
    if (todaysNoon <= nextNoon) {
        nextNoon.setDate(nextNoon.getDate() + 1);
    }
    nextNoon.setHours(14, 00, 0);
    $('#defaultCountdown').countdown('change', 'until', nextNoon);//use change method     
} 
```

这是一个带有 10 秒计时器的[演示，用于测试](http://jsfiddle.net/U6tgV/6/)

# objective-c - iOS: location services authorization alert view is not displayed when app is started

> ID：10659619
> 
> 赞同：0
> 
> 时间：2012-05-18T20:55:15.723
> 
> 标签：objective-c, ios, location, cllocationmanager

I asked [this question](https://stackoverflow.com/questions/10606349/ios-application-missing-from-location-services-list) a couple days ago about my app not showing up under Settings > Location Services after reinstall. I found out that after reinstalling, I have to run the app and wait for the "Use Current Location" authorization alert view to be displayed for the app to show up under the Location Services list. In turn, I found out that my app doesn't display this alert view instantly when the app is started.

Here's some bits of code that might be the problem:

```
-(void)restartGps: (UIWebvView *)curWebView {
  [locationManager startMonitoringSignificantLocationChanges];
  [self performSelector:@selector(noGpsLock:) withObject:curWebView afterDelay:GPS_TIMEOUT];
}

-(void)noGpsLock: (UIWebView *)curWebView {
  if (!hasLocationFix) {
    [locationManager stopMonitoringSignificantLocationChanges];
    [self performSelector:@selector(restartGps:) withObject:curWebView afterDelay:GPS_TIMEOUT];
  }
} 
```

hasLocationFix is set to be TRUE when `-locationManager:didUpdateToLocation:fromLocation:` is called.

I initially call `restartGps:` in `viewDidLoad` and let the two methods call each other from then on. I found out that the first time `restartGps:` is called (from `viewDidLoad`), the alert didn't appear, therefore the app couldn't get any location. After a `noGpsLock:` and a `restartGps` calls, the alert finally appeared and the app was able to get a location.

Why is the alert not showing up the first time `restartGps:` is called?

# javascript - Create Auto adjustable divs based on mouse over behavior

> ID：10659621
> 
> 赞同：0
> 
> 时间：2012-05-18T20:55:28.327
> 
> 标签：javascript, jquery

So I've been looking all over and seen a couple of similar posts but nothing that truly answers my question. I want to be able to resize divs and the content within it similar to the style of the new [lafitness.com website](https://www.lafitness.com/Pages/Default.aspx). I notice they are using silverlight for this function. I was curious if anyone knew how to do this in Javascript? Thank you so much for your help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T21:00:31.530

那个效果太可怕了……

然而，我想到了 javascript 中类似的东西

[http://isotope.metafizzy.co/index.html](http://isotope.metafizzy.co/index.html)

# php - 使用 PHP 从另一个页面中的 jQuery Mobile 选择列表访问选择

> ID：10659623
> 
> 赞同：1
> 
> 时间：2012-05-18T20:55:33.120
> 
> 标签：php, mysql, jquery-mobile

我正在构建一个 jQuery Mobile 站点，使用 PHP 与 MySQL 数据库交互以动态填充下拉列表。这是创建第一页的代码（表单中的简单选择列表，带有提交按钮）：

```
app.php:

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>
    </title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
    <style>
        /* App custom styles */
    </style>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js">
    </script>
    <script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js">
    </script>
</head>
<body bgcolor="#000000">
    <div data-role="page" data-theme="a" id="page1">
        <div data-theme="a" data-role="header">
            <h3>
                Header
            </h3>
        </div>
        <div data-role="content">
            <div data-role="fieldcontain">
                <form action="showView.php" method="POST">
                <label for="selectmenu1">
                    Select a show:
                </label>
                <select name="selectmenu1" id="select_a_show">
                 <?php 
$con = mysql_connect('tfis.db.7386546.hostedresource.com','tfis','Kurdt4794');

if (!$con)
{
    die('Could not connect: ' . mysql_error());
}

mysql_select_db('tfis', $con);

$queryStr = 'SELECT * FROM Shows';      
$result = mysql_query($queryStr);
while($row = mysql_fetch_array($result))
{
    $episode_num = $row['episode_num'];
    echo "<option value=" . $episode_num . ">Episode " . $episode_num . "</option>";
} 
mysql_close($con);
?>
        </select>
                <input type="submit" value="Submit" />
            </form>
            </div>
        </div>
    </div>
</body> 
```

然后我有第二个页面来处理选定的值，我在 PHP 查询中使用以下代码对数据库进行查询：

```
showView.php:

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>
    </title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js">
    </script>
    <script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js">
    </script>
</head>
    <body>

<?php 
$con = mysql_connect('tfis.db.7386546.hostedresource.com','tfis','Kurdt4794');

if (!$con)
{
    die('Could not connect: ' . mysql_error());
}

mysql_select_db('tfis', $con);

$episode = $_REQUEST["select_a_show"];
$queryStr = "SELECT * FROM Shows WHERE episode_num = $episode LIMIT 1";
echo "Episode" . $episode . $queryStr;
$result = mysql_query($queryStr);

while($row = mysql_fetch_array($result))
{
    $episode_title = $row['episode_title'];
    $description = $row['description'];
    $filename = $row['filename'];
    $image_filename = $row['image_filename'];
    $youtube = $row['youtube'];
}
echo "<div data-theme='a' data-role='header'> <h3> " . $episode_title . "</h3>
        </div>
        <div data-role='content'>
        <img src='http://foxtechnyc.com/TFIS/images/" . $image_filename . "' />
            </div>
            <div>" . $description . "
            <a data-role='button' data-transition='fade' href='http://foxtechnyc.com/TFIS/audio/" . $filename . "'>
            Listen To Show</a>
            <a data-role='button' data-transition='fade' href='http://www.youtube.com/watch?v=" . $youtube . "&feature=player_embedded>
            Watch YouTube Video
            </a></div>";
?>
<script>
    alert(selection);
</script>
</body> 
```

问题是使用以下代码未正确获取该值：

```
$episode = $_REQUEST["select_a_show"]; 
```

我从服务器阅读了 AJAX 长轮询，因为 JQuery 是客户端而 PHP 是服务器端，但我不确定如何在这里实现它。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T21:00:41.813

在您的表单中，您的`select`字段名称应为`name="select_a_show"`

换句话说，将 app.php 中的第 30 行从 `<select name="selectmenu1" id="select_a_show">`

到 `<select name="select_a_show" id="select_a_show">`

这应该够了吧。

# c++ - 寻求 DDX 的替代品

> ID：10659626
> 
> 赞同：0
> 
> 时间：2012-05-18T20:55:47.273
> 
> 标签：c++, winapi, visual-c++, mfc

DDX 技术的创建是为了将资源与类成员（例如）链接起来。在我的解决方案中，我需要在 myCCtreeCtrl（CCtreeCtrl 的实例）与类成员 CCtreeCtrl 不在资源中建立连接。现在我在资源中有 CTreeCtrl 和简单的 doDataExchange：

```
#define IDC_TREE_LAYER0                 2000   
#define IDC_TREE_LAYER1                 2001
#define IDC_TREE_LAYER2                 2002

// ============================================================================
void ForcesGUI::doDataExchange( int id0, int id1, int id2, CDataExchange* pDX )
// ============================================================================
{
   DDX_Control(pDX, id0, m_tree[0].data);
   DDX_Control(pDX, id1, m_tree[1].data);
   DDX_Control(pDX, id2, m_tree[2].data);
} 
```

但将来有必要从资源中删除 CCtreeCtrl 并创建实例。

你会问我为什么需要从资源中删除？

答案是：在项目中，我有 3 个 CCtreeCtrls，每个人都住在自己的酒吧里。他们之间没有什么不同。这就是为什么我想使用 1 个条形类和 1 个树而不是冗余。在我创建 3 个 bar 实例之后，这里出现了 DDX 的问题，它在这里不起作用。

您有什么想法可以替换基本的 DDX 吗？可能是 WinAPI 或其他东西。无论如何感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T03:55:45.550

如果控件不是从对话框资源自动生成的，则必须使用该[`Create`](http://msdn.microsoft.com/en-us/library/0yhc9kx4.aspx)方法创建它。您需要在父窗口中`OnInitDialog`或在父窗口中执行此操作。通过创建窗口，`Create`它将自动连接到您创建它的对象 - 不需要 DDX_Control。

# lua - 通过 Require (TLC) 加载 Lua 模块

> ID：10659629
> 
> 赞同：1
> 
> 时间：2012-05-18T20:56:03.963
> 
> 标签：lua

我正在尝试使用[https://github.com/aptiva/TLC](https://github.com/aptiva/TLC)

我尝试：

```
$ echo $LUA_PATH; echo "====="; find .; echo "====="; luajit-2.0.0-beta10 examples/window.lua 
```

我得到：

```
?;?.lua;./?/init.lua
=====
.
./examples
./examples/talkingcomputer.lua
./examples/window.lua
./lst
./objc
./objc/BridgeSupport.lua
./objc/dispatch.lua
./objc/init.lua
./README.md
=====
luajit-2.0.0-beta10: error loading module 'objc' from file 'objc':
        cannot read objc: Is a directory
stack traceback:
        [C]: ?
        [C]: in function 'require'
        examples/window.lua:5: in main chunk
        [C]: ? 
```

我的问题：我做错了什么？如何加载 objc 模块？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T01:29:07.707

添加`./?/init.lua`到`LUA_PATH`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-17T11:30:22.880

关于为什么接受的解决方案有效的一些进一步解释。

当需要一个模块时，Lua 使用环境变量**LUA_PATH**来查找所需模块的位置。特殊符号`'?'`是匹配任何字符串的通配符，因此当`require("module")`和时，Lua 会在当前目录中`LUA_PATH="?;./?.lua"`搜索 ' *module* ' 和 ' *module.lua '。*

在上面的问题中，LUA_PATH 最初定义为：

```
LUA_PATH="?;?.lua;" 
```

发布解决方案后，用户`./?/init.lua`在 LUA_PATH 末尾添加，但它不起作用。它不起作用的原因是当Lua试图解决`require('objc')` *objc*匹配LUA_PATH（？）中的第一个条目时，并且*objc*是一个目录，因此错误。

解决方法是`./?/init.lua`在LUA_PATH开头添加：

```
LUA_PATH="./?/init.lua;?.lua;?;" 
```

关于 LUA_PATH，需要注意的是，与环境变量 PATH 不同，目录由分号 (";") 分隔。另一种指定搜索目录的方法是使用 Lua 变量`package.path`（在 Lua 文件中）：

```
package.path = "./?/init.lua;"..package.path
local objc = require("objc") 
```

# rss - iTunes 播客提要不显示剧集

> ID：10659632
> 
> 赞同：0
> 
> 时间：2012-05-18T20:56:18.220
> 
> 标签：rss, itunes, podcast

我为我的播客创建了一个 RSS 2.0 提要，但是当我在 iTunes 中测试它时（高级 -> 订阅播客..），没有任何剧集显示。

我还没有添加 iTunes 特定的标签，因为我认为它们不是必需的。他们是吗？有什么方法可以调试它为什么不起作用？根据 W3C 的提要验证器，它是一个有效的 RSS 2.0 提要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T21:01:55.227

你的`<link>`s 中的`<item>`s 应该是`<enclosure>`s 。请参阅[提要规范示例提要](http://www.apple.com/itunes/podcasts/specs.html)：

```
<enclosure url="http://example.com/podcasts/everything/AllAboutEverythingEpisode3.m4a" length="8727310" type="audio/x-m4a" /> 
```

# python - Python mysqldb返回插入的行但mysql返回一个空集

> ID：10659635
> 
> 赞同：0
> 
> 时间：2012-05-18T20:56:35.913
> 
> 标签：python, mysql, mysql-python

我使用 mysqldb 插入一行：

```
 def insertNewLog(self,uid,beginDate,endDate,logs):
        qry1 = """INSERT INTO logs (owner,createDate,endDate,log) VALUES (%s,%s,%s,%s); """ 
        cursor = self.db.cursor()
        beginDate = int(time.mktime( beginDate.timetuple() ))
        endDate = int(time.mktime( endDate.timetuple()))
        print beginDate
        print endDate 
        cursor.execute(qry1,(uid,beginDate,endDate,logs),)
        print "inserted normally"
        print "Number of rows inserted: %d" % cursor.rowcount 
```

我得到这个输出：

```
1337720045
1337740625
inserted normally
Number of rows inserted: 1 
```

但是，当我在 mysql shell 中对我的数据库进行选择时，我得到“空集”。我检查了我的 mysql 日志，那里没有任何报告。我有点困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T21:00:07.707

您可能应该调用`commit()`您的数据库连接。否则插入回滚。

# maven-3 - 构建一个模块时未解决的兄弟依赖关系

> ID：10659636
> 
> 赞同：2
> 
> 时间：2012-05-18T20:56:37.550
> 
> 标签：maven-3

我有一个 Maven 多模块项目，其父 POM 状态：

```
<modules>
  <module>ui</module>
  <module>controller</module>  <!-- Depends on ui module -->
</modules> 
```

以下运行良好：

```
project-root> mvn clean package 
```

但是，如果我尝试会出现问题：

```
project-root/controller> mvn clean package 
```

该错误将`ui`工件报告为未解决的依赖项。

是的，我意识到这个问题之前已经被[问过](https://stackoverflow.com/questions/1677473/maven-doesnt-recognize-sibling-modules-when-running-mvn-dependencytree)。但是它没有明确的答案（该*实例*的公认答案只是一种解决方法）。这种行为被解释为依赖解析和反应器构建之间的差异。 [一篇关于 Maven 3 的帖子](http://www.sonatype.com/people/2010/12/whats-in-maven-3-0-for-users/)表明它已在该版本中得到解决。我正在使用 Maven 3.0.3 并没有看到任何缓解。 [Maven 3.0.4 的发行说明](http://maven.apache.org/docs/3.0.4/release-notes.html#Maven_3.0.4_Release_Notes)不建议更改此行为。

你如何处理这样的情况？是`project-root`每次都进行构建的唯一方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T10:31:48.277

您面临的问题是您尝试从同级调用构建，在这种情况下，依赖关系解析将针对您的本地存储库完成。

您的问题有几种解决方案。第一个是去你的根目录并做一个`mvn install`. 之后，您应该可以转到您的控制器并执行`mvn clean package`. 但我建议*转到您的根目录*并专门构建控制器模块：

```
mvn -pl controller clean package 
```

但前提是在此之前进行 mvn install 。

# haskell - Haskell 将套接字绑定到特定 IP

> ID：10659637
> 
> 赞同：4
> 
> 时间：2012-05-18T20:56:42.517
> 
> 标签：haskell, ip, ip-address, endianness

在 Haskell`network`包中

`bindSocket`用途`HostAddress`和`HostAddress6`

定义为：

```
-- | Network byte order.
type HostAddress = Word32

-- | Host byte order.
type HostAddress6 = (Word32, Word32, Word32, Word32) 
```

*   我怎样才能从`123.123.123.123`到`Word32`？
*   我怎样才能从一个`IPv6`字符串去`(Word32, Word32, Word32, Word32)`？
*   字节序是否在不同的操作系统（Windows、Linux、OS X、FreeBSD）上起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T23:42:11.423

使用[`getAddrInfo`](http://hackage.haskell.org/packages/archive/network/2.3.0.11/doc/html/Network-Socket.html#v:getAddrInfo)：

```
getAddrInfo :: Maybe AddrInfo -> Maybe HostName -> Maybe ServiceName -> IO [AddrInfo] 
```

> 将主机名或服务名解析为一个或多个地址。此函数返回的 AddrInfo 值包含您可以直接传递给 connect 或 bindSocket 的 SockAddr 值。
> 
> 此功能与协议无关。它可以返回 IPv4 和 IPv6 地址信息。

# django - heroku 新手：“web dyno + work dyno”模式与“经典”模式

> ID：10659655
> 
> 赞同：0
> 
> 时间：2012-05-18T20:57:39.943
> 
> 标签：django, heroku

[ -- 跳过这个介绍部分 -- ]

我正在向 heroku 平台（使用 django）介绍自己。我正在关注[Heroku Django 教程](https://devcenter.heroku.com/articles/django#using_a_different_wsgi_server)。在教程“步骤”中，*现在我们准备扩大工作人员：*我执行命令并出现以下消息：

```
(venv)dani@heroku-test:~/hellodjango$ heroku ps:scale celeryd=1
Scaling celeryd processes...  
 !    Please verify your account in order to change resources
 !    For more information, see http://devcenter.heroku.com/categories/billing
 !    Verify now at http://heroku.com/verify 
```

挖掘 heroku 网络后，我发现问题是我应该告知我的信用卡，因为*长时间运行多个测功机（1 个网络测功机 + 1 个工作测功机）可能会产生费用*

此外，阅读教程，heroku 说：*对于生产应用程序，您应该使用可用于生产的嵌入式 Web 服务器 Gunicorn 和 gevent。*我非常感谢扩展我的应用程序的可能性。

这让我们...

[ -- 从这里开始阅读 -- ]

...我的问题：

*   我可以在没有“web dyno + work dyno”模式的情况下开始在 heroku 中运行应用程序吗？有人有过无速度跑步的经历吗？
*   对于有限的企业“内部网”应用程序，（类似平台的）heroku 值多少钱？

任何评论都会受到欢迎。感谢您分享您的专业知识。对不起这个新手问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:28:20.613

heroku 的支持答案：

克里斯，5 月 21 日 12:38（太平洋夏令时间）：嗨，

*   我可以在没有“web dyno + work dyno”模式的情况下开始在heroku中运行应用程序而不会出现问题吗？（就像 django 快速入门的第一部分或者你建议升级到 15G + 2 dynos = 50€ moth）

> 您应该能够免费使用单个 Web dyno 运行您的应用程序。不过，您需要扩大规模以承担额外的流量。为了扩大规模，您必须使用信用卡验证您的帐户。

*   对于有限的公司“内部网”应用程序，heroku 是一个好的解决方案（以金钱计）吗？

> 是的。当然，这一切都归结为您认为运行公司应用程序所花费的合理金额。

干杯，-克里斯

# android - 检测到翻转视图手势后更改屏幕上的值

> ID：10659660
> 
> 赞同：0
> 
> 时间：2012-05-18T20:58:00.710
> 
> 标签：android

我有一个问题，我想在滑动视图后更改屏幕上的值。我的意思是，当用户在屏幕上翻转手指时，进度条开始从服务器获取值并在同一屏幕上关闭后设置值。
我阅读了许多有关 ViewFlipper、ViewPager 和 Horizaontal Pager 的功能以及更多功能，但没有找到我想要的。每个选项一次都需要所有屏幕数据，然后同样负责在 ViewFlipper 的每个页面上显示它。

请提出任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:33:05.407

您是否可以启动一个 AsyncTask 来启动进度条，然后在来自服务器的新数据可用时更新视图。[这是从http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)的类文档中的示例稍微修改的：

```
new GetServerValuesTask().execute(url1, url2, url3);

private class GetServerValuesTask extends AsyncTask<URL, Integer, String[]> {

 protected String[] doInBackground(URL... urls) {
     return getValuesFromServer(urls);
 }

 protected void onProgressUpdate(Integer... progress) {
     setProgressPercent(progress[0]);
 }

 protected void onPostExecute(String[] values) {
     updateViewWithNewValues(values);
 }
} 
```

# ruby - 指南针宝石投掷错误

> ID：10659662
> 
> 赞同：4
> 
> 时间：2012-05-18T20:58:14.393
> 
> 标签：ruby, gem, rvm, sass, compass-sass

我正在尝试开始使用 Compass & Sass。我已经用三个版本的 ruby​​（1.9.1、1.9.2、1.9.3）安装了 compass gem，每次我得到同样的错误：

```
martin@crunchbang:~$ compass
/home/martin/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/shared_helpers.rb:22:in `default_gemfile': Could not locate Gemfile (Bundler::GemfileNotFound)
    from /home/martin/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler.rb:213:in `default_gemfile'
    from /home/martin/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler.rb:164:in `root'
    from /home/martin/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler.rb:123:in `load'
    from /home/martin/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler.rb:114:in `setup'
    from /home/martin/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler.rb:119:in `require'
    from /home/martin/.rvm/gems/ruby-1.9.3-p194/gems/compass-0.12.1/bin/compass:25:in `<top (required)>'
    from /home/martin/.rvm/gems/ruby-1.9.3-p194/bin/compass:19:in `load'
    from /home/martin/.rvm/gems/ruby-1.9.3-p194/bin/compass:19:in `<main>'
    from /home/martin/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
    from /home/martin/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>' 
```

我该如何解决这个问题？

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T21:03:57.510

我在[这里](https://stackoverflow.com/questions/10610254/cant-install-compass-via-rvm)找到了答案，指南针 gem 和新版本的 bundler 似乎存在某种问题。

要解决只需运行：

```
rubygems-bundler-uninstaller 
```

# asp.net - 在动态创建的用户控件中获取控件的属性值

> ID：10659663
> 
> 赞同：0
> 
> 时间：2012-05-18T20:58:15.270
> 
> 标签：asp.net, vb.net

我无法恢复对动态创建的用户控件的引用，因此我可以获取其属性或子控件的值。

我有一个名为 BookingObject.ascx 的自定义控件，它位于 App_Code 中。

我可以毫无问题地以编程方式创建控件，但是稍后，当我尝试获取对控件的引用以访问其子控件值时，我只是不断地获取 null。

继承人一些代码：

```
 Dim MainItem As BookingItem = TryCast(LoadControl(GetType(BookingItem), Nothing), BookingItem)
        MainItem.ID = "Item_" & NumberOfControls.ToString() 'Item_0
        Dim lblid As Label = MainItem.FindControl("lblID")
        lblid.Text = (NumberOfControls + 1).ToString()

        NewItemPH.Controls.Add(MainItem)
        Me.NumberOfControls += 1 
```

这工作正常，我可以成功设置标签值。

然而：

```
 Dim MainItem As BookingItem = TryCast(Me.Page.FindControl("Item_0"), BookingItem)
    Dim product_id As DropDownList = MainItem.FindControl("product_id") 
```

尝试 FindControl("product_id") 时出现空引用异常，因为 MainItem 什么都没有。

我已经为这个问题苦苦挣扎了好几个小时，我认为这很简单。我确定我只是缺少一些小东西。

谁能告诉我我做错了什么？

感谢所有帮助。

**更新** 没关系，当我应该搜索 NewItemPH 时，我正在愚蠢地搜索 Me.Page 以获取控件。

感谢神秘人给了我线索，然后在几分钟后删除了他们的评论。

# data-binding - 使用数据绑定到图像 src 属性的敲除模板不起作用

> ID：10659665
> 
> 赞同：71
> 
> 时间：2012-05-18T20:58:19.037
> 
> 标签：data-binding, knockout.js, knockout-templating

我看不到这里有什么问题，但使用以下 Knockout 模板无法显示图像：

```
<script type="text/html" id="legend-template">       
    <div><input type="checkbox" data-bind="click : doSomething" ></input>
        <img width="16px" height="16px" data-bind="src: 'imagePath'" />          
        <span data-bind="text : label"> </span>
    </div>        
</script> 
```

this 绑定的对象如下所示：

```
tut.myObject= function (imagePath, label) {
    this.label = ko.observable(label);
    this.imagePath = ko.observable(imagePath || liveString + '/Content/images/marker.png');   
};

tut.myObject.prototype = {
    doSomething: function () { alert("do what?");
     }
}; 
```

当呈现 HTML 对象时，我看到标签并单击复选框调用 doSomething。

TIA。

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2012-05-18T21:01:27.543

只有少数属性可以直接绑定；尝试使用`attr`- 它可以让您在元素上设置任何属性。

```
<img width="16px" height="16px" data-bind="attr:{src: imagePath}" /> 
```

# windows - 适用于 osx 和 windows 7 的非常好的同步编程编辑器

> ID：10659672
> 
> 赞同：1
> 
> 时间：2012-05-18T20:59:08.960
> 
> 标签：windows, macos, editor

当我在 Windows 7 上使用 editplus 并在 OSX 上使用 smultron 时，总是会发生非常烦人的事情。我的意思是，在 OSX 上没问题，但是当我在 Windows 7 上使用相同的文件时，线路不同，一切都搞砸了。我不知道发生了什么。

两个操作系统上是否有任何好的编程编辑器没有任何错位的东西？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T21:22:20.913

Unix/Windows 使用不同的字符序列来确定换行符。要解决您的问题，您需要将两个编辑器设置为使用相同的序列，例如在 smultron 中，您可以将“Line Endings”参数更改为“Dark Side (CRLF)”。

# macos - 环境路径 - 终端 OSX

> ID：10659676
> 
> 赞同：0
> 
> 时间：2012-05-18T20:59:33.070
> 
> 标签：macos, environment-variables

我可以直接在终端中运行 java -classpath 命令而不会出现问题，但是一旦我尝试在 cron 中执行它就会引发此错误：

```
Usage: java [-options] class [args...]
           (to execute a class)
   or  java [-options] -jar jarfile [args...]
           (to execute a jar file)

where options include:
    -d32          use a 32-bit data model if available
    -d64          use a 64-bit data model if available (implies -server, only for x86_64)
    -client       to select the "client" VM
    -server       to select the "server" VM
    -jvm          is a synonym for the "client" VM  [deprecated]
    -hotspot      is a synonym for the "client" VM  [deprecated]
                  The default VM is client.

    -cp <class search path of directories and zip/jar files>
    -classpath <class search path of directories and zip/jar files>
                  A : separated list of directories, JAR archives,
                  and ZIP archives to search for class files.
    -D<name>=<value>
                  set a system property
    -verbose[:class|gc|jni]
                  enable verbose output` 
```

研究告诉我，这可能是环境路径问题？使用终端与 cron 时如何判断我的路径是什么？

我正在从 cron 调用 java，crontab 类似于：

0 3 * * * * java -classpath /Users/tb582/Desktop/sample1.jar:/Users/tb582……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T21:02:44.807

只需在 cron 中指定整个路径：

输入“哪个java”

应该输出类似这样的东西：

```
/usr/bin/java 
```

# forms - Symfony 表单框架：根据其他字段值验证表单字段

> ID：10659678
> 
> 赞同：1
> 
> 时间：2012-05-18T20:59:43.373
> 
> 标签：forms, symfony1, symfony-1.4, validation

> **可能重复：**
> [根据 Symfony 中的另一个字段值验证一个字段](https://stackoverflow.com/questions/6441982/validate-a-field-depending-on-another-field-value-in-symfony)

如何未命除，即当检查单选按钮R时，某种形式的字段命名为A E B？我希望通常为这些 A/B 字段配置验证器，但如果选中单选按钮 R（例如，将 A 和 B 设置为必需的字符串，但在 R 为即使它们是空的也要检查）。

我试图覆盖 doBind 函数，使用前/后验证器，但我继续收到“必需”消息

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T13:19:10.023

是正确的操作。我找到了[几个](http://blog.barros.ws/2008/11/05/conditional-validator-in-symfony-another-approach/)[答案](http://blog.rajatpandit.com/2009/02/22/conditional-validator-in-symfony/)，最好的办法是覆盖`bind`函数并根据表单中的值重新定义验证器的选项（禁用必需选​​项或删除验证器）：

```
public function bind(array $taintedValues = null, array $taintedFiles = null)
{
  if($taintedValues["method"] == 'phone')
  {
    // disabled required
    $this->validatorSchema["email"]->setOption('required', false);
  }
  else
  {
    // remove the validator
    $this->validatorSchema['other_field'] = new sfValidatorPass();

    // and disabled required
    $this->validatorSchema["phone"]->setOption('required', false);
  }

  return parent::bind($taintedValues, $taintedFiles);
} 
```

# html - 在 HTML 表格中显示大量数据

> ID：10659679
> 
> 赞同：1
> 
> 时间：2012-05-18T20:59:45.173
> 
> 标签：html, css

我正在为通过元表信息创建的数据仓库生成基于 SQL 语句的 HTML 表。

我遇到的问题之一是一些返回的数据表有 100 多列。有没有一种巧妙的方法可以在 HTML 表格或特定的设计解决方案中显示它。请注意，我正在查看此处的显示。更改可用列的数量不是一种选择。所有列都需要渲染。

非常感谢您的输入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T21:03:31.583

我能想到2个很好的解决方案：

1.  用一个固定宽度的容器把整张桌子包起来，`overflow-x: auto`放在上面。这将导致表格滚动。
2.  允许用户使用 JavaScript/jQuery 过滤掉他不需要查看的任何列。

两者都是可能的，第一个显然更容易实现，但第二个你有更多的控制权。选择你的路径，如果你遇到困难，你可以在 StackOverflow 上寻求帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T21:37:40.887

您所描述的称为数据网格。您绝对不应该自己生成 HTML（如您所愿），而只是将结果集绑定到任何类型的服务器端数据网格或使用某种客户端 jQuery 数据网格实现。

[https://stackoverflow.com/questions/159025/jquery-grid-recommendations](https://stackoverflow.com/questions/159025/jquery-grid-recommendations)

# java - java RMI - 意外错误

> ID：10659684
> 
> 赞同：1
> 
> 时间：2012-05-18T20:59:56.930
> 
> 标签：java, rmi

一段时间以来，我一直致力于创建一个示例 RMI 项目，并且几个小时以来一直难以解决以下错误。如果你们中的任何人能指出我的错误，我将不胜感激。我将发布带有错误的修剪代码。

在此先感谢您的时间。

PrimeFinder.java

```
import //irrelevant

public interface PrimeFinder extends Remote 
{
    public List<Integer> findPrime (int startPoint, int endPoint )
        throws RemoteException;
} 
```

PrimeFinderService.java

```
import //irrelevant

public class PrimeFinderService extends UnicastRemoteObject
implements PrimeFinder
{
    public PrimeFinderService () throws RemoteException
    {
        super();
    }

    public List<Integer> findPrime(int startPoint, int endPoint)
            throws RemoteException {

        // Irrelevant
    }

    public static void main ( String args[] ) throws Exception
    {
        if (System.getSecurityManager() == null)
            System.setSecurityManager ( new RMISecurityManager() );

        PrimeFinderService svr = new PrimeFinderService();
        Naming.bind ("PowerService", svr);

        System.out.println ("Service bound....");
    }
} 
```

。政策

```
grant {
    permission java.security.AllPermission; } 
```

杀死我的错误：

```
Exception in thread "main" java.rmi.ServerException: RemoteException occurred in server thread; nested exception is: 
    java.rmi.UnmarshalException: error unmarshalling arguments; nested exception is: 
    java.lang.ClassNotFoundException: access to class loader denied
    at sun.rmi.server.UnicastServerRef.oldDispatch(UnicastServerRef.java:419)
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:267)
    at sun.rmi.transport.Transport$1.run(Transport.java:177)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Transport.java:173)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:553)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:808)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:667)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679)
    at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(StreamRemoteCall.java:273)
    at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:251)
    at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:377)
    at sun.rmi.registry.RegistryImpl_Stub.bind(Unknown Source)
    at java.rmi.Naming.bind(Naming.java:128)
    at q7.PrimeFinderService.main(PrimeFinderService.java:69)
Caused by: java.rmi.UnmarshalException: error unmarshalling arguments; nested exception is: 
    java.lang.ClassNotFoundException: access to class loader denied
    at sun.rmi.registry.RegistryImpl_Skel.dispatch(Unknown Source)
    at sun.rmi.server.UnicastServerRef.oldDispatch(UnicastServerRef.java:409)
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:267)
    at sun.rmi.transport.Transport$1.run(Transport.java:177)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Transport.java:173)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:553)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:808)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:667)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679)
Caused by: java.lang.ClassNotFoundException: access to class loader denied
    at sun.rmi.server.LoaderHandler.loadClass(LoaderHandler.java:445)
    at sun.rmi.server.LoaderHandler.loadClass(LoaderHandler.java:182)
    at java.rmi.server.RMIClassLoader$2.loadClass(RMIClassLoader.java:637)
    at java.rmi.server.RMIClassLoader.loadClass(RMIClassLoader.java:264)
    at sun.rmi.server.MarshalInputStream.resolveClass(MarshalInputStream.java:214)
    at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1592)
    at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1513)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1749)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1346)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:368)
    ... 12 more
Caused by: java.security.AccessControlException: access denied (java.io.FilePermission /home/cem/workspace/OBSS_q7/bin/q7/- read)
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:393)
    at java.security.AccessController.checkPermission(AccessController.java:553)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)
    at sun.rmi.server.LoaderHandler$Loader.checkPermissions(LoaderHandler.java:1173)
    at sun.rmi.server.LoaderHandler$Loader.access$000(LoaderHandler.java:1127)
    at sun.rmi.server.LoaderHandler.loadClass(LoaderHandler.java:409)
    ... 21 more 
```

编辑1：

我试图克服的错误线是：

```
 Caused by: java.security.AccessControlException: access denied (java.io.FilePermission /home/cem/workspace/OBSS_q7/bin/q7/- read) 
```

我在我的 .policy 文件中尝试了至少 10 种不同的方法——所有这些方法都以同样的问题告终。我在我找到的教程中尝试了任何东西，我相信可以肯定地说问题不在于 .policy 文件。

我也干预了代码库，给代码库错误最终会导致不同的错误，所以也不会是这样。

还在寻找思路^^

干杯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T12:07:56.563

摆脱 SecurityManager，或者为自己编写一个授予该权限的安全策略文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:52:22.767

问题是关于 linux 文件系统权限，更改权限可以解决问题。

# javascript - 在弹出窗口、背景页面、chrome 扩展中访问 w.location.href

> ID：10659686
> 
> 赞同：0
> 
> 时间：2012-05-18T21:00:06.767
> 
> 标签：javascript, google-chrome, google-chrome-extension

在后台页面中：

```
var w = window.open(URL,'Example','width=675,height=350');
temp.page=setInterval(function(){
  if (w.location.href!=URL) {
    clearInterval(temp.page);
    alert(w.location.href); //undefined
    w.close();
  }
},1000); 
```

那么，为什么`w.location.href`未定义以及为什么我无法访问 w ( `w.document.write('qweqwe');//document==undefined`) 中的任何脚本？

我需要： 1\. 打开带有 URL 的页面。2\. 检测重定向。3\. 获取重定向我的页面的 URL。4\. 对第二个 URL 做一些事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T22:07:04.527

您遇到了现代 Web 浏览器内置的主要安全限制之一。您正在尝试做的事情称为“跨站点脚本”，简单的答案是您不允许这样做。

查找“跨站点脚本 (XSS)”和“javascript 代码签名”以获取更多信息。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:13:14.927

我在权限、清单中添加了站点的域名，现在我可以向该域发出 AJAX 请求。

权限“标签”也很有帮助。

# magento - 从二级商店切换时的 Magento 多商店问题

> ID：10659690
> 
> 赞同：0
> 
> 时间：2012-05-18T21:00:17.927
> 
> 标签：magento

我使用这种方法在一个 Magento 安装下设置了 2 个商店： [http ://webdevster.com/ecommerce/magento/magento-multiple-store-setup-instructions](http://webdevster.com/ecommerce/magento/magento-multiple-store-setup-instructions)

每个商店都有自己的 URL，即。[http://mainstore.com](http://mainstore.com)和[http://secondarystore.com](http://secondarystore.com)（在 cpanel 中添加域）

如果我导航到主商店，然后使用商店切换器切换到辅助商店，一切都会按预期工作。我可以登录辅助服务器并留在那里。

如果我一开始直接导航到二级商店，就会出现问题。如果我这样做然后尝试登录，我会自动重定向到[http://mainstore.com/customer/account/login/](http://mainstore.com/customer/account/login/)

有谁知道为什么只有当我导航到[http://mainstore.com](http://mainstore.com)然后切换到二级商店时才能正常工作？

**编辑：** 我注意到如果我使用secondarystore.com 访问二级商店？**_store=secondstore 而不仅仅是 secondarystore.com 它可以完美运行。任何人都知道如何在不需要的情况下获得相同的结果？**_store=secondstore?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T02:00:02.430

您需要为每个 URL 设置单独的 Apache vhost 条目。您对两者使用相同的文档根目录。在每一个中，您应该有一组行，例如：

```
SetEnv MAGE_RUN_CODE=base
SetEnv MAGE_RUN_TYPE=website 
```

使用您在管理员中为第二个站点设置的实际网站代码更改“基础”。

# node.js - 如何在 node.js 中使用 node-soap 设置标头

> ID：10659705
> 
> 赞同：7
> 
> 时间：2012-05-18T21:01:24.290
> 
> 标签：node.js, soap, express

我正在尝试使用 wsdl 服务并找到 node-soap，但我找不到如何设置一些标头。

例子 ：

```
header = {
  "Username": "foo",
  "Password" : "bar"
} 
```

我需要这个的原因是因为我尝试使用的 wsdl 需要通过标头提供用户名和密码。

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-07-24T08:39:23.650

它现在可能没有用，但是为了回答这个仍然悬而未决的问题，就在这里。

您可以使用 Client.addSoapHeader 方法。根据文档

> Client.addSoapHeader(soapHeader[, name, namespace, xmlns]) - 添加soapHeader到soap:Header节点
> 
> 选项
> 
> soapHeader Object({rootName: {name: "value"}}) 或严格的 xml-string 第一个 arg 为 object 时的可选参数：
> 
> 名称未知参数（它可能只是一个空字符串）
> 
> xml命名空间的命名空间前缀
> 
> xmlns URI

因此，您需要创建一个对象并将其传递给此方法，例如：

```
var soapHeader = {
  "Username": "foo",
  "Password" : "bar"
};
client.addSoapHeader(soapHeader); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T21:08:19.057

通读[node-soap](https://github.com/milewise/node-soap)的自述文件，如果你想做的不是`WS-Security`（我不知道，因为我**远离**SOAP），那么你将不得不向作者提出问题，因为我看不到根据文档设置自定义标题的方法。

如果*是* `WS-Security`，请按照[自述文件这一部分的说明进行](https://github.com/milewise/node-soap#clientsetsecuritysecurity---use-the-specified-security-protocol-see-wssecurity-below)操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-13T19:06:51.880

根据[文档](https://www.npmjs.com/package/soap#extra-headers-optional)，对于聚合 HTTP 标头，您可以放置​​标头，示例代码：

```
soap.createClient(url, 

    function (err, client) {
      if(err){
          console.log(err);
      } else{
          console.log(client.describe())
          var soapHeaders = {
              'Channel':'PB',
              'RqUID':'1987'
          }
          client.addHttpHeader('<nameH1>', 'valueH1');
          client.addHttpHeader('<nameH2>', 'valueH2');
//then, continue calling the soap operation 

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-11T13:00:47.967

```
soap = require('soap')
parseString = require('xml2js').parseString

soap.createClient('https://api.bingads.microsoft.com/Api/Advertiser/AdIntelligence/v9/AdIntelligenceService.svc?wsdl', function(err, client) {
  var soapHeader = {
    'AuthenticationToken': process.argv[2],
    'DeveloperToken': process.argv[3],
    'CustomerId': process.argv[4],
    'CustomerAccountId': process.argv[5]
  };
  client.addSoapHeader(soapHeader);
  client.SuggestKeywordsFromExistingKeywords({Keywords: ["Hello world"]}, function(err, result) {
    console.log(result.body);
  });
}); 
```

这行不通。回复是无效的登录凭据。相同的凭据适用于 SOAPUI。因此，其他答案中提到的发送登录凭据的格式一定是错误的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-22T22:16:42.793

这对我有用。创建客户端方法需要 wsdl_header 来检索 wsdl 定义。创建后，您需要设置基本身份验证安全性。

```
var url = 'your WSDL url';
var auth = "Basic " + new Buffer("username" + ":" + "password").toString("base64");

soap.createClient( url,{ wsdl_headers: {Authorization: auth} }).then(
    function(client){
        client.setSecurity(new soap.BasicAuthSecurity('rflhconfort_ws', '6syqxje9'));
        client.your_Method(args); 
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-04T15:48:12.257

我有同样的问题，我在下面解决了对我有用的我的 wsdl，我使用 SOAPUI 客户端插入数据（查看需要哪些字段）

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:yourUrn">
<soapenv:Header>
  <urn:AuthenticationMethod>
     <urn:userName>username</urn:userName>
     <urn:password>password</urn:password>
   </urn:AuthenticationMethod>
    </soapenv:Header>
    <soapenv:Body>
    <urn:SoapFunctionToCall>
     <urn:Field1>Text</urn:Field1>
      <urn:Field2>Text</urn:Field2>
       <urn:Field3>Text</urn:Field3>
        <urn:Field14>Text</urn:Field4>
         <urn:Field5>Text</urn:Field5>
         <urn:Field6>Text</urn:Field6>
      </urn:SoapFunctionToCall>
     </soapenv:Body>
    </soapenv:Envelope> 
```

下面是我在节点中调用的方法

```
function createSoapEntry(){
let url = "your wsdl url"
var credentials = {
    AuthenticationMethod:{
        userName: "username",
        password: "password"
    }  
}
let args = { 
            Field1:"Text",
            Field2:"Text",
            Field3:"Text",
            Field4:"Text",
            Field5:"Text",
            Field6:"Text"            
    }
soap.createClient(url, function (err, client){
    client.addSoapHeader(credentials)

    client.SoapFunctionToCall(args, function (err, res) {
        if (err) {
            console.log("Error is ----->" + err)
        } else {
            console.log("Response is -----> " + res)
        }
    })
})

 } 
```

# mysql - 在 Fedora 中安装 MySQL

> ID：10659708
> 
> 赞同：0
> 
> 时间：2012-05-18T21:01:38.087
> 
> 标签：mysql, fedora

我在 fedora 中安装 mysql 和 mysql-server。我所做的是：

`su`（更改为根）

`yum install mysql mysql-server`

`chkconfig --levels 235 mysqld on`

当我尝试开始`mysqld`使用`/etc/init.d/mysqld start`时，它给了我一个错误提示`No such a file or directory`。

通过使用`whereis mysql`我得到以下结果：

```
$whereis mysql
mysql: /usr/bin/mysql /usr/lib/mysql /usr/share/mysql /usr/share/man/man1/mysql.1.gz 
```

有人可以帮我找到安装 mysql 的位置以及如何启动它吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T21:12:11.370

尝试通过使用`service mysqld start`来启动 MySQL。

# android - android检测用户是否刷卡

> ID：10659711
> 
> 赞同：3
> 
> 时间：2012-05-18T21:01:56.320
> 
> 标签：android, position, gesture, android-viewpager, gesturedetector

我有一个带有 webviews 的 viewpager，我想检测用户是否已经刷过。

我主要想计算他们在视图之间滑动了多少次。

跟上 viewpager 中的位置的问题在于它可能无法跟踪您所在视图的位置，因为它不断生成远离您所在位置的视图 +1 和 -1。

所以我的下一个方法是使用用户进行的计数滑动。只有那种会改变viewpager的水平滑动

我在想这与手势监听器和一些方向逻辑有关，但我不确定。

另外我想知道 viewpager 和 webview 的触摸识别是否会导致难以在另一个被覆盖的函数中捕捉手势，只是为了计数。

洞察力赞赏

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T21:10:55.020

ViewPagers 允许您使用`setOnPageChangeListener()`. OnPageChangeListener 有一个方法 onPageSelected，每次用户翻页时都会调用该方法。您可以在此方法中增加计数以跟踪页面浏览量。

# ios - 将应用程序徽章编号设置为 0 不会清除通知

> ID：10659713
> 
> 赞同：0
> 
> 时间：2012-05-18T21:02:16.640
> 
> 标签：ios

> **可能重复：**
> [iOS 应用程序：如何清除通知？](https://stackoverflow.com/questions/8682051/ios-application-how-to-clear-notifications)

根据 Apple 的 iOS5 发行说明，我想从通知中心清除我的应用程序的通知

[http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-5_0/_index.html](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-5_0/_index.html)

他们说：

“通知中心显示被视为“未读”的通知。要适应没有未读状态的推送和本地通知，请将应用程序的标记计数设置为 0 以从通知中心清除该应用程序的通知。”

我在我的应用程序中调用它

```
application.applicationIconBadgeNumber = 0; 
```

但通知不会从通知中心删除。

如何删除它们？

# ruby-on-rails - 将时间选择中的值保存到字符串中

> ID：10659723
> 
> 赞同：1
> 
> 时间：2012-05-18T21:03:07.620
> 
> 标签：ruby-on-rails, ruby-on-rails-3, time

我想要一个保存为字符串的下拉时间选择，但我不断收到以下异常：1 error(s) on assignment of multiparameter attributes。这是我编写的代码：

```
<%= f.time_select :appointment_time, :minute_step => 5, :ignore_date => true %> 
```

当我提交表单时，我在 params 哈希中得到以下值

```
"appointment_time(4i)"=>"12", "appointment_time(5i)"=>"00" 
```

有什么方法可以轻松获取这两个值并将结果保存为“12:00:00”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T22:45:29.990

假设 params 哈希中不仅仅是约会键：

```
params[:your_model].select {|k,v| k =~ /^appointment_time/ }.
  sort.map {|f| f.last.to_s }.join(':') 
```

当然，这也假设您的表中的约会时间字段不是 DateTime 或 Date 字段。您必须在更新（假定的）ActiveRecord 模型实例的属性之前执行此操作。有更简单的方法可以做到这一点，但是如果没有看到代码和回溯，就很难知道它们是否有效。

**编辑**

```
processed = params.dup
processed[:your_model][:appointment_time] = params[:your_model].
  select {|k,v| k =~ /^appointment_time/ }.sort.map {|f| f.last.to_s}.join(':')
@model.update_params(processed[:your_model]) 
```

这可能更符合您正在寻找的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:12:18.170

我通过为每个时间值创建不同的列作为字符串解决了我的问题，然后在创建后将所有内容连接在一起。这不是最优雅的解决方案，但它适用于我的应用程序

# google-maps - 查询 Fusion Table 并显示 COUNT()

> ID：10659725
> 
> 赞同：0
> 
> 时间：2012-05-18T21:03:20.023
> 
> 标签：google-maps, google-fusion-tables

我有一个简单的问题（但我不是程序员......）

在[http://www.strahlen.org/index.htm](http://www.strahlen.org/index.htm)上，我在 Google Fusion 表中手动输入包含某个字符串的行数。在这种情况下，“454”记录每个数字的字符串“11”（Mineral fair）等。现在，每次我编辑 FT 时，手动编辑 html 源代码有点愚蠢......

通过查询“https://www.google.com/fusiontables/api/query?sql=SELECT COUNT() FROM 3167783 WHERE title='Mineral fair'”，我得到响应“count() 454”。其中计数是我的谷歌地图上该字符串的标记数量。

现在，愚蠢的部分来了：我如何编码我的 html 以便响应“454”自动呈现/回显？更清楚地说：我想要显示数字，计数。作为一个数字。标记显示在地图上，这不是问题。这是一个 html/js 问题，但我不是编码员。我需要一段可以解决问题的代码，但经过数小时的谷歌搜索后我找不到它。

提前感谢您的帮助...

干杯，弗兰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:28:33.817

我用示例代码发布了一个类似问题的答案：[https](https://stackoverflow.com/a/9778985/1211981) ://stackoverflow.com/a/9778985/1211981 您需要使用“未记录”的 FT JSON API，但现在已正式成为 Trusted Tester API 的一部分，因此我认为使用它是安全的。查找 getFTCount() 函数。它需要 jQuery 并使用回调，所以不是很简单的 JS。但我一直使用这种方法，性能非常好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T21:14:58.477

我在您的问题中假设您希望 fusionTablesLayer 呈现与您的 select 语句匹配的 454 个点，所以这样的事情应该可以解决问题：

```
var map = new google.maps.Map(document.getElementById('map-canvas'), 
{
    zoom: 5,
    mapTypeId: google.maps.MapTypeId.ROADMAP
});

var layer = new google.maps.FusionTablesLayer({
    query: {
        select: "title",
        from: 3167783,
        where: "title ='Mineral fair'"
    },
    map: map
}); 
```

更多信息在这里： [https ://developers.google.com/maps/documentation/javascript/layers](https://developers.google.com/maps/documentation/javascript/layers)

# jquery - 对剪裁的图像使用圆角

> ID：10659731
> 
> 赞同：0
> 
> 时间：2012-05-18T21:03:48.177
> 
> 标签：jquery, jquery-plugins

我使用 jquery 插件 (jquery.imgr.js) 来舍入图像边框。（工作正常）。现在我想用 jclip.js 剪辑图像。剪辑本身也有效。但剪裁后的图像没有圆形边框，因为 imgr.js 插件只会对完整的原始图像进行四舍五入。

```
$('.clipme').jclip(0, 126, 200, 76);
$('.roundme').imgr({size:"2px",color:"white",radius:"10px"});

<div><img src="image.jpg"  class="clipme roundme"></div> 
```

有没有办法解决这个问题？也许克隆剪切的图像并将其粘贴为新图像？

# android - 检测 toast 消息

> ID：10659734
> 
> 赞同：13
> 
> 时间：2012-05-18T21:03:58.200
> 
> 标签：android, toast

我认为这是不可能的，因为我在 SDK 文档中还没有找到任何东西（还）。

但是我可以知道是否可以编写一个记录 Toast 消息的应用程序。记录哪个应用程序显示它以及显示的消息包含什么。

这完全是个人努力创建一个可以检测 toast 消息的应用程序。因为我手机上的某些东西正在创建一个吐司，说“正在发送......”大约每天一次，而在我的一生中，我无法追踪有问题的应用程序（服务类）。我以为可能是 GMail 或 Evernote，但发送的 toast 消息略有不同。我打算构建一个应用程序，因为 1）我不知道 LogCat 是否会显示任何内容，以及 2）我不想让我的个人/开发手机一直插在 PC 上（作为“发送...”消息很少出现）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-19T13:36:03.453

[可以使用Accessibility Service](http://developer.android.com/guide/topics/ui/accessibility/services.html)捕获 Messages/Notifications ，看看那个。

您可以扩展该类[`AccessibilityService`](http://developer.android.com/reference/android/accessibilityservice/AccessibilityService.html)并覆盖该方法`onAccessibilityEvent()`以实现如下内容：

```
public void onAccessibilityEvent(AccessibilityEvent event) {
    if (event.getEventType() != AccessibilityEvent.TYPE_NOTIFICATION_STATE_CHANGED)
        return; // event is not a notification

    String sourcePackageName = (String) event.getPackageName();

    Parcelable parcelable = event.getParcelableData();
    if (parcelable instanceof Notification) {
        // Statusbar Notification
    }
    else {
        // something else, e.g. a Toast message
        String log = "Message: " + event.getText().get(0) 
                   + " [Source: " + sourcePackageName + "]";
        // write `log` to file...
    }
} 
```

注意：这对我在 Android 2.2 上不起作用，因为它似乎无法捕获 Toasts，但它在 Android 4.0+ 上有效。

# javascript - jQuery cookie 不写

> ID：10659735
> 
> 赞同：-1
> 
> 时间：2012-05-18T21:04:09.370
> 
> 标签：javascript, jquery, cookies

我无法通过 jQuery 编写 cookie。

这是功能：

```
<script type="text/javascript">
$(document).ready(function() {
    $('.jp-volume-bar,.jp-volume-bar-value').click(function(){ 
        var volval=$('.jp-volume-bar-value').width();
        var voltot=$('.jp-volume-bar').width();
        var vol=volval/voltot;
        $.cookie('jp_volume', vol, { expires: 7, path: '/'});
    });
});
</script> 
```

我已经确认这三个变量正在输出一个值。

但是检查 chromes cookie 日志，并使用 PHP 页面输出 cookie 值，结果都没有出现，所以 jQuery 实际上并没有写入 cookie。

我的代码有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T21:06:40.720

此操作需要一个 jQuery cookie 插件。[http://archive.plugins.jquery.com/project/Cookie](http://archive.plugins.jquery.com/project/Cookie)

# perl - 如何在引号内使用带有占位符的查询？（perl/postgresql）

> ID：10659737
> 
> 赞同：5
> 
> 时间：2012-05-18T21:04:13.663
> 
> 标签：perl, postgresql, dbi

我正在尝试执行以下脚本：

```
#!/usr/bin/perl -w

use strict;
use DBI;

my $db = "Pg";
my $db_database = "whatever";
my $user = "whatever";
my $password = "whatever";

my $dbh = DBI->connect("dbi:$db:dbname=$db_database", $user, $password);

my $query = $dbh->prepare (q{SELECT
                   arrival_date - INTERVAL '? MINUTE'
                   FROM emails LIMIT 1})
  or die ("unable to prepare");
$query->execute(60) or die("unable to execute");

print $query->fetchrow_array, "\n"; 
```

（arrival_date 有这种格式：time zone NOT NULL default CURRENT_TIMESTAMP 的时间戳）

问题是未检测到问号占位符，因为它在单引号内：

```
DBD::Pg::st execute failed: called with 1 bind variables when 0 are needed 
```

如果我使用 qq{}、$1 占位符并尝试使用 $dbh->quote 的一些变体，这将无济于事。我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T21:33:07.523

您不能在引号内使用占位符。您可以使用 SQL 字符串连接，但在这种情况下，使用乘法更容易做到这一点：

```
my $query = $dbh->prepare (q{SELECT
                   arrival_date - ? * INTERVAL '1 MINUTE'
                   FROM emails LIMIT 1});
$query->execute(60); 
```

这样，您不必`' minutes'`在执行查询时附加到数字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T21:29:30.600

我刚刚在这里找到了一个解决方案：http: //bugs.debian.org/cgi-bin/bugreport.cgi?bug= [321917](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=321917)

它使用 ?::interval 而不是 'interval ?' 工作：

```
my $query = $dbh->prepare (q{SELECT
                   arrival_date - ?::interval
                   FROM emails LIMIT 1});

$query->execute('60 MINUTE'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T21:14:52.797

```
my $query = $dbh->prepare (<<SQL) or die ("unable to prepare");
SELECT arrival_date - INTERVAL ? FROM emails LIMIT 1
SQL
$query->execute("60 MINUTE"); 
```

~~或者~~

 ~~```
my $query = $dbh->prepare (<<SQL) or die ("unable to prepare");
SELECT arrival_date - INTERVAL CONCAT(?, " MINUTE") FROM emails LIMIT 1
SQL
$query->execute(60); 
```~~

# javascript - 禁用 asp.net 按钮回发

> ID：10659738
> 
> 赞同：2
> 
> 时间：2012-05-18T21:04:21.923
> 
> 标签：javascript, asp.net, postback, webforms

我试图禁用一个 asp.net 按钮但失败了。错误：

```
Compiler Error Message: CS1501: No overload for method 'btnUnlock_Click' takes '0' arguments 
```

源错误：

```
 Line 99:         <asp:Button ID="btnUnlock" runat="server" Text="Unlock User" Visible="False"       OnClick ="btnUnlock_Click()" /> 
```

和

```
 protected void btnUnlock_Click(object sender, EventArgs e)
    {
        MembershipUser user = Membership.GetUser(userName);
        user.UnlockUser();
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T21:09:14.840

用于`OnClientClick="return false;"`禁用回发。你可以试试这个

```
<asp:button runat="server".... OnClientClick="return false;" /> 
```

在 C# 中，您可以通过以下方式禁用按钮

```
btnUnlock.IsEnabled = false; 
```

[IsEnabled 属性 MSDN 链接](http://msdn.microsoft.com/en-us/library/system.windows.uielement.isenabled.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T21:09:16.037

这里有两个问题：

```
OnClick="btnUnlock_Click()" 
```

此语法不正确。要设置您的服务器端点击处理程序，请按如下方式编写：

```
OnClick="btnUnlock_Click" 
```

此外，您的问题标题似乎根本与此代码无关。如果您想知道如何禁用服务器端点击处理客户端，您可以添加一个*客户端*点击处理程序，如下所示：

```
OnClientClick="return false;" 
```

...或一些自定义客户端功能。要在服务器端禁用它，只需不要添加该`OnClick`属性。

# visual-studio-2010 - VS 2010 Ultimate Web 性能测试始终未决

> ID：10659741
> 
> 赞同：1
> 
> 时间：2012-05-18T21:04:37.240
> 
> 标签：visual-studio-2010, load-testing, performance-testing

我已经记录了“网络性能测试”，但是当我尝试运行它时，它不断显示状态“待定”，当我尝试停止时，它只显示消息“测试运行停止”并且没有任何反应。我可以阻止它的唯一方法是关闭 Visual Studio 并重新打开它。

我试图运行的测试是一个非常简单的单击按钮并捕获响应的测试。

我在 Win7 Enterprise 上运行 VS 2010 Ultimate。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T04:30:34.683

对我来说非常相似的问题。通过应用 Visual Studio SP1 修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-13T16:17:53.010

同样对我有用。

在我的情况下，安装 VS2012 是问题的原因：

*   VS2010 正常工作了几个月。
*   我安装了 VS2012 Shell
*   *出现上述错误。*
*   通过安装 VS2010 ServicePack 1 解决。

谢谢。

# git - 无法修复 git 中的 eol 空格问题

> ID：10659742
> 
> 赞同：4
> 
> 时间：2012-05-18T21:04:39.877
> 
> 标签：git, windows-7, github, msysgit

我在 guthub 上有一个[存储库，它是](https://github.com/lscharen/fluentmigrator)[fluentmigrator](https://github.com/schambers/fluentmigrator)的一个分支。这是我第一次涉足 git，我陷入了无法清理我的 fork 和上游存储库之间的一些空白冲突的境地。

我在 Windows 7 上运行并且正在使用 msysgit 客户端。这是链接的存储库

```
$ git remote -v
origin  https://github.com/lscharen/fluentmigrator (fetch)
origin  https://github.com/lscharen/fluentmigrator (push)
upstream        http://www.github.com/schambers/fluentmigrator (fetch)
upstream        http://www.github.com/schambers/fluentmigrator (push) 
```

我的本地 repo 与我的 github repo 是最新的，并且对上游 repo 有一些更改

```
lscharen@LSCHAREN01 /c/checkout/fluentmigrator (master)
$ git diff --stat origin/master

lscharen@LSCHAREN01 /c/checkout/fluentmigrator (master)
$ git diff --stat upstream/master
 src/FluentMigrator.Console/MigratorConsole.cs      |  563 ++++++++++----------
 .../Initialization/IRunnerContext.cs               |    1 +
 .../Initialization/RunnerContext.cs                |    1 +
 src/FluentMigrator.Runner/MigrationLoader.cs       |  193 ++++----
 src/FluentMigrator.Runner/MigrationRunner.cs       |    4 +-
 src/FluentMigrator.Runner/VersionLoader.cs         |  343 +++++++------
 .../Versioning/VersionMigration.cs                 |  221 +++++----
 .../Unit/TestVersionTableMetaData.cs               |  105 ++--
 .../Unit/VersionLoaderTests.cs                     |  272 +++++-----
 .../Infrastructure/DefaultMigrationConventions.cs  |  252 +++++-----
 .../Infrastructure/MigrationMetadata.cs            |   91 ++--
 src/FluentMigrator/MigrationAttribute.cs           |   70 ++--
 .../DefaultVersionTableMetaData.cs                 |   84 ++--
 .../VersionTableInfo/IVersionTableMetaData.cs      |   57 ++-
 14 files changed, 1182 insertions(+), 1075 deletions(-) 
```

其中一些文件的更改是纯粹的 EOL 问题。如果我查看差异`src/FluentMigrator.Console/MigratorConsole.cs`并忽略空格。

```
$ git diff --stat -w upstream/master src/FluentMigrator.Console/MigratorConsole.cs
 src/FluentMigrator.Console/MigratorConsole.cs |   13 ++++++++++++-
 1 files changed, 12 insertions(+), 1 deletions(-) 
```

我试图通过遵循`core.autocrlf`各种 SO 答案中有关设置的建议来解决问题，但似乎没有什么能让我处于我的文件已更新并显示与我的 diff 的状态`origin`，但与`upstream`.

这是我尝试过的。

**`core.autocrlf input`从此答案设置[_](https://stackoverflow.com/questions/1510798/trying-to-fix-line-endings-with-git-filter-branch-but-having-no-luck)**

```
$ git rm --cached src/FluentMigrator.Console/MigratorConsole.cs
rm 'src/FluentMigrator.Console/MigratorConsole.cs'

$ git config core.autocrlf input

$ git add src/FluentMigrator.Console/MigratorConsole.cs

$ git diff --stat upstream/master src/FluentMigrator.Console/MigratorConsole.cs
 src/FluentMigrator.Console/MigratorConsole.cs |  563 +++++++++++++------------
 1 files changed, 287 insertions(+), 276 deletions(-) 
```

**使用 dos2unix设置`core.autocrlf false`和手动转换**

```
$ git config core.autocrlf false

$ dos2unix src/FluentMigrator.Console/MigratorConsole.cs

$ git diff --stat upstream/master src/FluentMigrator.Console/MigratorConsole.cs
 src/FluentMigrator.Console/MigratorConsole.cs |   17 ++++++++++++++---
 1 files changed, 14 insertions(+), 3 deletions(-) 
```

关！但是`^M`在差异中每个插入行的末尾都有悬挂字符，例如

```
+        public string Group;^M 
```

设置`git config core.whitespace cr-at-eol`使`diff`外观正确，但是我担心如果我提交此文件，我仍然会将不兼容的空白字符放入存储库中。

我正在尝试为拉取请求修复我的叉子，因此对于处理此问题的任何一般建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T23:16:51.290

我将通过以下方式完全重做本地克隆：

*   `git config --global core.autocrlf=false`
*   `git clone https://github.com/lscharen/fluentmigrator`

简而言之，首先不应该进行任何 EOL 转换，您`dos2unix`现在应该是所有文件。

# android - android有没有像短信这样的蓝牙接收器？

> ID：10659750
> 
> 赞同：0
> 
> 时间：2012-05-18T21:05:34.487
> 
> 标签：android, bluetooth

大家好，我遇到了一个真正的问题我有一个通过蓝牙发送文本信息的arduino设备，我想在我的Android手机上接收这个文本，但我想在任何反应之前检查（（文本））

有什么方法可以做到这一点，比如 SMS ((BroadcastReceiver))

```
public class Receiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:42:51.050

我不知道该怎么做。但是，就像您使用 Receiver for SMS 一样，您也可以使用 Receiver for Bluetooth。

注册接收者（清单或代码中）

```
registerReceiver(ActionFoundReceiver, new IntentFilter(
            BluetoothDevice.ACTION_FOUND)); 
```

并定义接收者

```
 private final BroadcastReceiver ActionFoundReceiver = new BroadcastReceiver() {

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        String action = intent.getAction();
        if (BluetoothDevice.ACTION_FOUND.equals(action)) {
            BluetoothDevice device = intent
                    .getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);

        String name;
            name = device.getName();

        }
    }
}; 
```

我想：通过交流，您可以捕捉到另一个给您文本的意图的婴儿车。

如果你想要一些例子看看。 [http://android-er.blogspot.com.es/2011/05/scan-bluetooth-devices.html](http://android-er.blogspot.com.es/2011/05/scan-bluetooth-devices.html) 和 [http://luugiathuy.com/2011/02/android-java-bluetooth/](http://luugiathuy.com/2011/02/android-java-bluetooth/)

# android - 使用 OAuth2 的经过身份验证的通信 b/w Android 应用程序和 GAE 服务器

> ID：10659751
> 
> 赞同：1
> 
> 时间：2012-05-18T21:05:47.037
> 
> 标签：android, google-app-engine, oauth-2.0

OAuth2 的新手。我正在编写一个与 App 引擎服务器应用程序通信的 Android 应用程序。

1.  该应用程序需要使用用户的 Google 帐户信息代表用户向服务器进行身份验证。服务器需要检索用户的基本信息并创建一个帐户。这是容易的部分，我知道如何做到这一点。
2.  此外，Android 应用程序还将让用户使用 Oauth2 进行身份验证，并使用用户的 Google 帐户信息检索基本用户信息。我也可以这样做。
3.  **这是我需要帮助**的地方假设前面的步骤已成功完成，我如何使用 Android 应用程序（用户登录的地方）**使用用户的凭据安全地**与服务器通信。

有什么想法还是我错过了一些明显的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:23:22.437

Android 到 App Engine OAuth2 的通信记录在这个答案中： [google app engine oauth2 provider](https://stackoverflow.com/questions/7810607/google-app-engine-oauth2-provider/10855271#10855271)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T21:53:19.643

# windows - 使用进程间通信时验证客户端

> ID：10659753
> 
> 赞同：0
> 
> 时间：2012-05-18T21:05:55.003
> 
> 标签：windows, linux, macos, security, ipc

我正在构建一个应用程序，它将为其他应用程序提供服务（让我们假设它解决了微分方程）。所以我的 DifEq 服务将一直运行，客户端应用程序可以随时向它发送请求以解决 DifEqs。

使用套接字或管道这将是微不足道的。

问题是一些应用程序非常想发送线性方程而不是微分方程，所以我想注册我知道正在向我的应用程序发送正确 DifEqs 的应用程序。

据我所知，传统的套接字在这里失效了。

理想情况下，我希望能够查看有关向我发出请求的应用程序的一些信息，并且（通过该应用程序上的一些元数据，通过与我的网站的通信，或通过其他一些未知的方法) 确定它是可接受的 DifEq 应用程序。此外，如果没有底层操作系统的根/管理员级别的妥协，这种理想的方法就不会被欺骗。如果线性方程应用程序也是一个 root 工具包，我将承认被打破。:)

我需要能够在 Windows、OS X 和 Linux（也许还有 Android）上做到这一点；但我认识到它可能不是所有平台上的相同解决方案。那么，您将如何实现这一点（如果合适，请指定您关注的平台）？我已经做了很多服务器端开发，但是自从我在浏览器之外进行任何客户端开发以来，已经有*太多*年了，今天的世界与当时大不相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T23:28:57.237

当谈到 DifEQ 与 LinearEQ 时，我认为您的问题有点令人困惑。

在我看来，您只是在寻找一种常规方法来验证客户端是否有权连接。关于这个主题有很多需要阅读的内容。常见的方法是使用 SSL 证书来验证客户端的身份。您还可以通过 SSH 建立隧道，或使用 OAUTH 等。

您将不得不在网络上进行更多挖掘，以了解哪种身份验证适合您的场景。你提到'不可欺骗'。我认为人们通常最终会将私钥证书编译到他们的应用程序中。这将阻止除非常敬业和经验丰富的黑客之外的所有黑客。

# android - .get() 未显示 AsyncTask ProgressDialog

> ID：10659759
> 
> 赞同：1
> 
> 时间：2012-05-18T21:06:28.373
> 
> 标签：android, android-asynctask, android-progressbar

我正在使用一个`AsyncTask`子类进行一些后台处理。问题是当我将类与`.get()`方法一起使用时，`ProgressDialog`我在 中指定的`onPreExecute()`不显示。

如果我在方法中使用回调，我工作得很好`onPostExecute()`。

我的第一个想法是，这是因为`.get()`等待进程完成，但也不能阻塞 UI 线程，所以事实并非如此。

谁能解释为什么会出现这种行为以及是否有解决方法？如果可以的话，我真的很想使用这种`.get()`方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T20:11:44.823

我最初接受了另一个答案，但似乎是错误的。

该`.get()`方法将阻止 UI 线程等待结果，并且显示的任何对话框也将被阻止。这是此方法的预期行为。

The only alternative is to not use `.get()` if the background activity is for any noticable amount of time and instead use callback methods to the calling activity.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T21:36:50.937

在 UI 线程上调用[AysncTask.get()](http://developer.android.com/reference/android/os/AsyncTask.html#get%28%29)将阻止 UI 线程执行并使 UI 线程等待 AysncTask.doInBackground() 完成。这样做实际上是牺牲了 AsycnTask 的好处，现在所有代码都在 UI 线程和后台线程中同步执行（仍然是两个线程，但 UI 线程现在等待后台线程）。

另请记住，您可能会通过在 UI 线程上调用 get() 获得 ANR 异常（阻塞超过 5 秒）。

如果你真的必须使用它，请在 myAsyncTask.get() 之前调用你的 showDialog() 方法：

```
showDialog();
myAsyncTask.execute();
myAsyncTask.get(); // <-- UI thread blocked and wait at this point.
dismissDialog();// <-- This line will be executed after doInBackground() finish. 
```

希望这可以帮助。

# javascript - 嵌套在另一个模板中的主干模板

> ID：10659766
> 
> 赞同：8
> 
> 时间：2012-05-18T21:07:36.013
> 
> 标签：javascript, jquery, templates, backbone.js, underscore.js

是否可以将模板嵌套在模板中并通过主干视图访问？

例如，我有使用 Template1 的 View1，使用 Template2 的 View2。Template2 实际上需要在 Template1 内的一个 DIV 中。我将模板 2 的 DIV 容器放入具有适当 ID 的模板 1 中，但在呈现页面时它不显示。如果我从 Template1 中删除 Template2 div 容器并将其放入页面正文中，它就可以正常工作。

所以只是想知道这是否可能，或者我是否必须嵌套视图/模型等才能完成这项工作？

Template2 中的数据在技术上与 Template1 无关，只是需要显示在嵌入在 Template1 中的页面上的某个位置。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-18T21:13:11.047

我过去处理这个的方式是分别定义两个视图，然后在渲染View1的时候，新建一个View2，渲染，插入View1。所以：

```
window.View1 = Backbone.View.extend({
    render: function() {
        this.view2 = new View2();
        this.$('insert-view-here').append(this.view2.render().el);
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T23:36:46.703

您应该为此创建子视图。

我喜欢在关闭时私有化子视图并返回公共视图。

```
var View = (function (BV) {
    var View, Subview;

    // Only this main view knows of this subview
    Subview = BV.extend({ 
        template: _.template( subtmpl ),

        render: function () {
            this.$el.html( this.template( this.model.toJSON() ) );
            return this;
        }   
    }); 

    View = BV.extend({
        template: _.template( tmpl ),

        render: function () {
            this.$el.html( this.template( this.model.toJSON() ) );

            var subview = new SubView({ model: this.model }); 

            // replace a div in your template meant for teh subview with the real subview
            this.$el.find( "#subview" ).replaceWith( subview.render().el );

            return this;
        }   
    }); 

    return View;

}(Backbone.View));

var view = new View({ model: user });
var subview = new Subview; // Reference Error 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-29T17:46:06.150

当您需要在 Template1 中多次包含 Template2（例如作为`<li>`a 中的元素）时，另一个有用的选项`<ul>`是将 Template2 函数传递给 Template1。（来自[Rico Sta Cruz 的 Backbone Patterns](http://ricostacruz.com/backbone-patterns/)。）

```
TasksList = Backbone.View.extend({
  // Template1, inlined in js.
  template: _.template([
    "<ul class='task_list'>",
      "<% items.each(function(item) { %>",
        "<%= itemTemplate(item) %>",
      "<% }); %>",
    "</ul>"
  ].join('')),

  // Template2, inlined in js.
  itemTemplate: _.template(
    "<li><%= name %></li>"
  ),

  render: function() {
    var html = this.template({
      items: tasks /* a collection */,
      itemTemplate: this.itemTemplate
    });

    $(this.el).append(html);
  }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T21:17:19.530

我理解的典型方式是将视图视为可以相互嵌入的完整对象。假设您有两个视图，ViewA 和 ViewB。以下代码显示了如何将 ViewB 附加到 ViewA 中。

```
# this is coffeescript, but it's easily translated to JS
class ViewA extends Backbone.View
    initialize: () ->
        this.render()

    render: ()->
        this.$el.append(new ViewB().$el)
        this.$el.append(new ViewB().$el)
        return this 
```

您可能会喜欢 ViewB 的管理方式（将其分配给属性或其他）或将不同的构造函数参数传递给每个 ViewB 实例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-16T22:13:53.947

不需要 jQuery`append()` 或涉及双 jQuery 范围的附加 SubView 对象的更精简的解决方案是严格使用下划线方法预渲染/预编译，并使用主模板中的内部注释标签将子视图作为字符串插入.

```
View = Backbone.View.extend({
  template: _.template(...),
  prerender: function(tpl,model){// pre-render a component
      var template = _.template(tpl);
      return template(model);
  },
  render: function(){
    var model = { ... };
    var component = this.prerender(this.itemTemplate, model);
    this.$el.html(this.template(model).replace('<!--#component-->', component));
  }
}); 
```

如果您的模板不是常量并且依赖于当前范围的属性，它尤其有用。

请注意，对于这个问题的范围，您必须将 View2 模型传递给组件。

# javascript - 一个接一个地运行ajax

> ID：10659768
> 
> 赞同：0
> 
> 时间：2012-05-18T21:08:00.690
> 
> 标签：javascript, ajax

我正在从事我（遗憾地）无法使用 jQuery 的项目。我需要做一些在 jQuery 中很简单的事情，但我不能用纯 JavaScript 来做。因此，我需要使用另一个响应表单来运行一个 ajax 请求。在 jQuery 中，它看起来像：

```
$.get("date.php", "", function(data) {
  var date=data;
  $("#date").load("doku.php?id="+date.replace(" ", "_")+" #to_display", function() {
    $(document.createElement("strong")).html("<a href=\"doku.php?id="+date.replace(" ", "_")+"\">"+date+"</a>:").prependTo($(this));
  });

}); 
```

这是我在纯 JS 中的代码，它不起作用：

```
 if (window.XMLHttpRequest) 
  { 
     ObiektXMLHttp = new XMLHttpRequest();
  } else if (window.ActiveXObject) 
  { 
     ObiektXMLHttp = new ActiveXObject("Microsoft.XMLHTTP");
  } 

  if(ObiektXMLHttp) 
  {
    ObiektXMLHttp.open("GET", "date.php");

    ObiektXMLHttp.onreadystatechange = function() 
    {

      if (ObiektXMLHttp.readyState == 4)
      {
        var date = ObiektXMLHttp.responseText;
        if (window.XMLHttpRequest) 
        { 
           ObiektXMLHttp = new XMLHttpRequest();
        } else if (window.ActiveXObject) 
        { 
           ObiektXMLHttp = new ActiveXObject("Microsoft.XMLHTTP");
        } 

        ObiektXMLHttp.open("GET", "doku.php?id="+date.replace(" ", "_"));
        ObiektXMLHttp.onreadystatechange = function() 
        {
          if (ObiektXMLHttp.readyState == 4)
          {
            alert(ObiektXMLHttp.responseText);
          }
        }
      } 
   } 
   ObiektXMLHttp.send(null);
  } 
```

我在做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T21:15:55.363

你忘了打电话`ObiektXMLHttp.send(null);`给第二种情况：

```
//....
ObiektXMLHttp.open("GET", "doku.php?id="+date.replace(" ", "_"));
ObiektXMLHttp.onreadystatechange = function() {
   if (ObiektXMLHttp.readyState == 4)
   {
      alert(ObiektXMLHttp.responseText);
   }
};
//Here
ObiektXMLHttp.send(null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T21:19:37.093

像这样的东西怎么样（天真的原型）：

```
// xhr object def
var xhr = {
  obj: function() {
    if (window.XMLHttpRequest) {
      return new XMLHttpRequest();
    } else if (window.ActiveXObject) {
      return new ActiveXObject("Microsoft.XMLHTTP");
    }
    throw new Error("can't init xhr object");
  },
  get: function(url, fn) {
    var xhr = this.obj();
    xhr.onreadystatechange = function() {
      if (xhr.readyState == 4) {
        fn(xhr.responseText);
      } 
    };
    xhr.open("GET", url);
    xhr.send(null);
  }
};

// implementation
xhr.get("date.php", function(data){
  xhr.get("doku.php?id=" + data.replace(" ", "_"), function(data){
    alert(data);
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T21:16:21.557

目前还不清楚你做错了什么（你能告诉我们吗？），但我建议依赖一些这样的辅助函数：

```
function xhrGet(url, callback) {
    if (window.XMLHttpRequest)
        var xhr = new XMLHttpRequest();
    else if (window.ActiveXObject)
        var xhr = new ActiveXObject("Microsoft.XMLHTTP");
    if (!xhr) return;
    xhr.open("GET", url);
    xhr.onreadystatechange = function() {
        if (xhr.readyState !== 4) return;
        if (typeof callback === "function") callback(xhr);
    };
    xhr.send(null);
    return xhr;
} 
```

所以你所要做的就是使用这个函数：

```
xhrGet("date.php", function(x1) {
    xhrGet("doku.php?id=" + date.replace(" ", "_"), function(x2) {
        // do stuff
        // x1 and x2 are respectively the XHR object of the two requests
    });
}); 
```

# javascript - Jade textarea中的长文本块？

> ID：10659775
> 
> 赞同：12
> 
> 时间：2012-05-18T21:08:24.183
> 
> 标签：javascript, node.js, template-engine, pug

我在我最新的 node.js 应用程序中使用[Jade 。](http://jade-lang.com/)默认情况下，我想在 textarea 中有很长的文本块。

如果我做这样的事情：

```
textarea(id="theTextarea") 
```

它呈现得很好：

```
<textarea id="theTextarea"></textarea> 
```

但是，如果我这样做：

```
textarea(id="theTextarea")
  Hello world. 
```

我明白了：

```
<textarea id="theTextarea">
  <hello>world</hello>
</textarea> 
```

但我希望它是这样的：

```
<textarea id="theTextarea">
  hello, world
</textarea> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-18T22:45:38.820

```
textarea(id="theTextarea")
  | Hello 
  | world.
  | Hello
  | moon.
  | Hello
  | sun. 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-09-03T19:34:21.437

该| 对我来说很好。但就我而言，我需要从 js 变量中获取值（通过渲染局部变量传递）。这就是我最终的结果：

```
textarea#resp( name="resp", rows="6", cols="66" )
  | #{respStr} 
```

我希望这对某人有所帮助。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-02T05:37:52.647

如果您不想让很多管道“堵塞”您的标记（请注意右括号后的点字符），您也可以这样做：

```
textarea(id="theTextarea").
  Hello
  world.
  Hello
  moon.
  Hello
  sun. 
```

阅读Jade 文档中的[标记文本部分以获取更多信息。](https://github.com/visionmedia/jade#tag-text "标记文本")

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-02T10:23:37.530

我看到这可能为时已晚，但希望它可以帮助其他人，在使用 textarea 并想要输出动态数据时，这对我有用

```
textarea.form-control#pdt_desc(name="pdt_desc", cols="10", rows="2")= product.pdt_desc 
```

参考：[https ://github.com/pugjs/pug/issues/2018](https://github.com/pugjs/pug/issues/2018)

# ruby-on-rails - 为什么我的配置对象在我的其他 rake 任务中不可用？

> ID：10659780
> 
> 赞同：0
> 
> 时间：2012-05-18T21:08:35.213
> 
> 标签：ruby-on-rails, ruby, rake

我的文件布局是这样的：

```
RakeFile
Tasks/*.rake 
```

在我的主要 RakeFile 中，我有：

```
config = # load from yaml 
```

现在在我的其他 rake 文件中（在任务文件夹中），如果我引用 config 它说方法或变量不存在。

为什么在我的 *.rake 文件中无法访问它？我怎样才能解决这个问题？

顺便说一句，内置的 rails rake 文件在哪里，我想看看他们如何创建用于运行迁移、删除数据库、播种等的 rake 任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T21:36:13.003

In a Rails project, your custom tasks should be in the `lib/tasks` directory to get pulled in automatically.

The built-in tasks can be found in [`railties/lib/rails/tasks`](https://github.com/rails/rails/tree/master/railties/lib/rails/tasks) for a number of them, and some others are spread out in places like [`activerecord/lib/active_record/railties`](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/railties/databases.rake). You'll have to look around to find them all, or perhaps use the `find` command.

# php - 使用 jquery 单击时如何启动 PHP 会话

> ID：10659784
> 
> 赞同：1
> 
> 时间：2012-05-18T21:09:16.550
> 
> 标签：php, jquery, mysql, session

我在 jquery 中遇到问题，我在交互式地图中工作，在单击表单 href 的城市中，我想在 sql 查询中插入城市名称或编号。

此链接链接城市：

```
<a href='#' class='city_pr' id=aden> </a> 
```

mysql查询：

```
$sql="select * from project  where    city='$_SESSION[CITY]' AND active =1 "; 
```

如何在会话到 mysql 查询时进行更改单击下面的链接 Download Page Navigation with jquery

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T21:33:30.063

jQuery 无法直接使用 PHP 会话，您需要进行 ajax 调用。

尝试这个。

**解释：**

*   这将捕获链接内的值，发布到 PHP 文件并在“结果”div 中打印数据而不刷新页面。

（不要忘记在帖子末尾阅读我的观察）

**HTML：**

```
<a href='#' id='country'>USA</a>
<br/>
<div id="result"></div> 
```

**JS：**

```
​$('#country').click(function(){
    // get the value inside the <a> tag
    var country = $(this).html();
    $.post('process.php', { country:country }, function(data){
        // Everything is Ok, so data won't be 0
        if(data != 0){
           // Print country information
           $('#result').html(data);
        }
    });
}); 
```

**进程.php**

```
<?php

if($_POST() && isset($_POST['country'])){

/* Connect to DB */
$link = mysql_connect('server', 'user', 'pwd');
if (!$link) {
    // No connection
    print(0);
    exit();
}

$db = mysql_select_db('db', $link);
if (!$db) {
    // DB selection error
    print(0);
    exit();
}

/* sanitize the value */
$country = mysql_real_escape_string($_POST['country']);

/* do your query */
$sql = "SELECT * FROM country WHERE country_name = '$country'";
$result = mysql_query($sql);

if(mysql_num_rows($result) > 0){
   while($row = mysql_fetch_array($result)){
      // At this point I am supposing that you stored in your table
      // latitudes and longitudes of countries.
      echo "Latitude is: ".$row['latitude']." Longitude is: ".$row['longitude'];
   }
} else {
  // No results found
  print(0);
}

}

?>​ 
```

**观察：**

*   尝试使用其他方式将国家/地区值发送到服务器。

例如：

如果我有：

`<a href='#' id='country'>United States of America</a>`

在 SQL 查询中，我将拥有：

```
SELECT * FROM country WHERE country_name = 'United States of America'; 
```

更好的方法可能是：

```
<a href='#' id='us'>United States of America</a> 
```

因此，在我的 JS 中，我将不得不为此替换 `var country = $(this).html();`：

```
 //outputs 'us'
 var country = $(this).attr('id'); 
```

然后在你的 SQL 查询中你会得到这个：

```
SELECT * FROM country WHERE country_name = 'us'; 
```

使用代码而不使用名称更合理（名称只是为了向用户展示，以便更好地理解，因为这样您将有更多问题来清理在查询中使用它的值，并且还使用诸如`trim();`删除空格和其他功能之类的功能） . 如果这样做，您将不得不更改查询以通过代码查找国家/地区：

```
SELECT * FROM country WHERE country_code = 'us'; 
```

希望这可以帮助 ：-）

# continuous-integration - Jenkins 中带故障恢复的分层并行执行

> ID：10659785
> 
> 赞同：1
> 
> 时间：2012-05-18T21:09:20.523
> 
> 标签：continuous-integration, hudson, jenkins

在下图中，我希望每个级别的作业并行运行（尽可能多地在执行器上同时运行），**如果**一个任意作业失败，在解决问题后我希望事情再次正常运行（好像作业没有失败）。我的意思是如果修复后成功构建失败的作业，我希望较低级别的作业自动启动。

我已经看到 Build Flow Plugin 无法意识到这一点。我希望有人有一些绝妙的想法可以分享。

谢谢你的时间。

![在此处输入图像描述](../Images/67d49df9125aad72243839f48adf5862.png)

进一步澄清：

级别 x 的所有作业必须在级别 x+1 的所有作业之前成功。如果 x 级别的某些工作失败，我不希望 x+1 级别的任何工作开始。解决问题后，重新运行作业，如果它成功（并且所有其他级别 x 也成功），那么我希望级别 x+1 开始构建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:57:48.350

参考您的图表，我将重申您的问题的要求（以确保我理解它）。

1.  在级别 1，您希望所有作业并行运行（如果可能）
2.  在第 2 级，您希望所有作业并行运行
3.  在第 3 级，您希望所有作业并行运行
4.  任何 1 级作业的成功构建都应该导致所有 2 级作业的构建
5.  任何 2 级作业的成功构建都应该导致所有 3 级作业的构建

如果您不需要“第 1 级的任何故障将阻止所有第 2 级作业运行”，我的回答应该*有效*。

我不相信这将需要任何其他插件。它只使用 Jenkins 内置的内容。

*   对于每个 1 级作业，配置“构建其他项目”的构建后操作
    *   要构建的项目应该是您的所有 2 级工作。（列表应该是逗号分隔的列表。）
    *   勾选“仅在构建成功时触发”
*   对于每个 2 级作业，配置“构建其他项目”的构建后操作
    *   要构建的项目应该是您的所有 3 级工作。

# php - 打印 atom web feed 如何

> ID：10659788
> 
> 赞同：0
> 
> 时间：2012-05-18T21:09:36.467
> 
> 标签：php, atom-feed

我正在使用此代码打印 atom 网络提要。如何访问链接 rel='enclosure' 中的一张图片？有人可以帮帮我吗？我只想在屏幕上打印一张图像，但我不知道如何访问四个链接属性之一。我已经搜索了信息，但它似乎并没有帮助我。

```
<?php

    // read in an xml file
      $myFile = "http://www.deredactie.be/cm/vrtnieuws?mode=atom";

    $feed = simplexml_load_file($myFile);

    $xml =  $feed->children('http://www.w3.org/2005/Atom');

    echo "<h1>".$xml->title . "</h1>\n";

    foreach ($xml->entry as $entries) {
        $child = $entries->children('http://www.w3.org/2005/Atom');
        // post title
        echo "<h3>".$child->title . "</h3>\n";
        // post author

        // post content
        if (!empty($child->summary)) echo htmlspecialchars($child->summary) . "<br />\n";
        echo $child->content->asXML();
        echo $child->updated;
        echo $child->link;
    }

?>
<entry>
<title>400 &#034;Blockupy&#034;-manifestanten opgepakt in Frankfurt</title>
<summary>In Frankfurt hebben betogers voor de derde dag op rij betoogd tegen de financiële crisis en de zware besparingen. 400 mensen zijn opgepakt.</summary>
<id>http://www.deredactie.be/permalink/1.1304838</id>
<published>2012-05-18T20:14:00.000+02:00</published>
<updated>2012-05-18T20:14:00.000+02:00</updated>
<link rel="self" type="application/atom+xml" title="400 &#034;Blockupy&#034;-manifestanten opgepakt in Frankfurt" href="http://www.deredactie.be/permalink/1.1304838?mode=atom"/>
<link rel="alternate" type="text/html" title="vrtnieuws - 400 &#034;Blockupy&#034;-manifestanten opgepakt in Frankfurt" href="http://www.deredactie.be/permalink/1.1304838"/>
<link rel="enclosure" href="http://media.vrtnieuws.net/2012/05/191629155ONL1205188400687.urlFLVLong.flv" type="video/x-flv" title="&#034;Blockupy&#034;-protest tegen banken in Frankfurt"/>
<link rel="enclosure" href="http://media.vrtnieuws.net/2012/05/191629155ONL1205188400687_urlThumbnailDir_tmb/0050.jpg" type="image/jpeg; format=thumbnail" title="&#034;Blockupy&#034;-protest tegen banken in Frankfurt"/>
<link rel="enclosure" href="http://www.deredactie.be/polopoly_fs/1.1304852!image/3646472733.jpg" type="image/jpeg"/>
</entry> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T22:53:13.187

对不起，我在手机上，所以我不能语法

```
$result = $child->xpath('//link[@rel=\'enclosure\']');
while(list( , $node) = each($result)) {
    echo "<img src='{$node['@href']}' />";
} 
```

因为你有超过 1 个链接，所以回显 $child->link 很奇怪

# java - 创建目录时出现 java.security 错误（Linux）

> ID：10659789
> 
> 赞同：2
> 
> 时间：2012-05-18T21:09:47.107
> 
> 标签：java, linux, file-io, directory

我有这样的代码：

```
return (new File(pathA + File.separator + pathB + File.separator)).mkdir(); 
```

我相信它曾经有效，但现在无效。该应用程序仅在 Linux 上运行，我们已经使用 Mint 9、Ubuntu 10.04、Kubuntu 12.04 等对其进行了测试。它不会创建预期的目录。

该路径位于具有 777 权限的目录中。

堆栈跟踪不是很有帮助。因为跟踪显示了对 java.security 方法的几个调用，所以我认为这是一个权限问题。但是实际的错误信息根本没有帮助（可能是因为代码中的异常处理需要改进）。

在 Linux 上用 Java 创建目录的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T21:19:50.313

*   提取`path + File.separator`到变量。
*   将其打印到控制台
*   在终端中启动 shell 并使用与应用程序运行相同的用户帐户运行此命令 `mkdir <INSERT THE PATH TO THE DIR THAT YOUR APP IS TRYING TO CREATE HERE>`

这应该给你你的问题的根本原因。

如果这不能使答案显而易见，请在问题中添加**所有其他证据**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T21:44:32.363

问题是我在路径中创建了不止一级的目录。解决方案是：

```
return (new File(pathA + File.separator + pathB + File.separator)).mkdirs(); 
```

注意 mkdirs() 上的“s”。

# android - Android - 让其他人免费测试和审查我的（付费）应用程序？

> ID：10659797
> 
> 赞同：3
> 
> 时间：2012-05-18T21:10:46.417
> 
> 标签：android, apk, review

我在 Google Play 上有一个付费应用程序，我想免费赠送一份副本，让别人试用和查看。我该怎么做？我可以简单地将签名的 APK 发送给他们吗？还是我应该制作一个未签名的 APK？或者，有没有办法让他们从 Google Play 下载它而无需付费（比如某种折扣代码或其他东西）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T21:16:51.780

与 Apple 不同，Google Play 不提供这项服务（不幸的是我们所有人......）。只要您不使用任何会导致此功能不起作用的许可服务检查，您就可以将签名的 APK 发送给他们。这将允许他们测试应用程序，但不能审查它。审核应用的唯一方法是通过 Google Play 下载...

但是，您可以做的是让他们购买该应用程序、对其进行测试、查看它，然后您可以使用 Google Checkout 控制台稍后为他们的购买退款...

# c++ - 诅咒：运动

> ID：10659798
> 
> 赞同：0
> 
> 时间：2012-05-18T21:10:48.537
> 
> 标签：c++, animation, sprite

我在使用 C++ 和 Ncurses 进行编程运动时遇到问题。我正在编写一个 pacman，主要问题是，我只想在时间段内最后一次按下键。

当我使用**usleep**时，它会保存在睡眠期间按下的每个键，然后按顺序使用它。

感谢您的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T21:29:28.070

你尝试了什么？

如果我正确理解您试图实现的目标，这样的事情应该可以工作：

```
int t = your_delay;
while (t --> 0)
{
    sleep(1);
    c = getch();
} 
```

如果你真的需要将它计时到微秒，这可能不是最好的方法，但如果你可以有一些容忍度，这就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T21:33:47.257

您是否处于无延迟模式？如果是这样，这可能会起作用：

```
usleep(your_delay);
last_key = ERR;
while ( (key=getch()) != ERR ) {
  last_key = key;
}
// "last_key" now holds most recent key, if there was one, else ERR 
```

# c# - 无法中断对流中列表的批量更新（插入）

> ID：10659801
> 
> 赞同：0
> 
> 时间：2012-05-18T21:11:15.433
> 
> 标签：c#, multithreading, system.reactive

编辑：为了简化这里的事情是范式：我有一个由连续流不断更新的项目列表。时不时地，我会得到一个重新初始化流的新数据快照。因此，如果在我想重新初始化时发生任何更新，我需要确保这些更新停止并且正在使用新快照。

我正在处理一些需要显示到 UI 的连续更新数据流。更新需要以相反的顺序显示，即最近的更新位于列表顶部。为了在顶部显示结果，我必须插入到列表中。我遇到的问题是有时列表需要休息（即 List.Clear），但是，如果我在插入中间，我需要停止它，因为否则插入会导致异常。

我已经整理了一种反应方法来帮助我解决这个问题，但是，它似乎忽略了我的*直到*流。

```
public static IObservable<T> BufferAndDispatchUntil<T, TStopUnit>(
                             this IObservable<T> source, 
                             Action<T> onNext, 
                             IScheduler scheduler, 
                             IObservable<TStopUnit> until, 
                             DispatcherPriority dispatcherPriority = DispatcherPriority.Background)
{
        if (source == null) throw new ArgumentNullException("source");
        if (onNext == null) throw new ArgumentNullException("onNext");

        if (Application.Current == null)
            return source.Do(onNext);

        var dispatcher = Application.Current.Dispatcher;

        return source
            .LazyBuffer(BufferTime, BufferCount, scheduler)
            .TakeUntil(until)
            .Do(b => dispatcher.BeginInvoke(() => b.ForEach(onNext), dispatcherPriority))
            .SelectMany(i => i);
} 
```

LazyBuffer 是 Buffer 的自定义实现，它只在有新项可用时返回结果集，而不是在指定的时间间隔返回空结果集。这就是我调用它的方式，它如上所述。

```
BufferAndDispatchUntil(p => Update.Insert(p.Item1, UpdateFactory.CreateView(p.Item2)), _config.DispatcherScheduler, _ignore); 
```

这是我在单独线程上运行的单独代码段中的明确调用。

```
_ignore.OnNext(new Unit());  
Update.Clear(); 
```

如果您能帮我弄清楚，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T21:36:58.060

You can't stop "mid insert". You need to lock your data structures when performing non-atomic operations to ensure data integrity.

```
lock(someObj)
{
    myList.Insert(i, obj);
} 
```

Make sure to lock at the smallest resolution possible, i.e., don't lock an entire method if you need only protect against a single non-atomic operation.

That, or have you looked at [C#'s thread safe collections](http://msdn.microsoft.com/en-us/library/dd997305.aspx) yet which handle much of the locking for you?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T21:35:55.347

当您执行此操作时，您将撤销 Rx 为您提供的保证：

```
.Do(b => dispatcher.BeginInvoke(() => b.ForEach(onNext), dispatcherPriority)) 
```

这就是你遇到这个错误的原因，因为你在排队等待在 UI 线程中运行的东西，但是你的 Rx 管道不知道它，所以你最终分裂了。

# devexpress - Aspxmemo -> 是否可以通过客户端设置文本颜色和粗体？

> ID：10659803
> 
> 赞同：0
> 
> 时间：2012-05-18T21:11:17.593
> 
> 标签：devexpress, client-side

我在我的页面上使用 devexpress 控件，基本上所有内容都在客户端。我已经能够使用 setText 来设置控件中的文本值，但是我无法弄清楚如何通过客户端设置文本的颜色和粗体。

有谁知道这是否可能？

我检查了 devExpress 网站上的客户端页面，但我没有看到任何内容。

[AspxMemo 客户端](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxEditorsScriptsASPxClientMemoMembersTopicAll)

想法，建议表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T11:35:20.280

可以使用以下代码：

```
function SetMemoProperties() {
        var tArea = memo.GetInputElement();
        tArea.style.color = "red";
        tArea.style.fontWeight = "bold";
    } 
```

# excel - 在 VBA Excel 中搜索新添加的命令按钮过程

> ID：10659805
> 
> 赞同：0
> 
> 时间：2012-05-18T21:11:25.240
> 
> 标签：excel, vba, button, command

[参考](https://stackoverflow.com/questions/10641683/change-name-of-activex-command-button-using-vba-in-excel)

我试图通过在 VBE 中的 sheet1 中查找过程语句的行号，然后将代码添加到下一行，将代码（子例程调用）添加到 Sheet1 中的过程。下面的代码试图实现这一点。

```
' This will search for and modify the appropriate Node#button_Click() subroutine
    With ActiveWorkbook.VBProject.VBComponents("Sheet1").CodeModule
            ProcLineNum = .ProcStartLine("Node" & NumNodes & "Button" & "_Click", 0)
            .InsertLines ProcLineNum + 1, "load_node_form(" & DQUOTE & "Node " & NumNodes & DQUOTE & ")"
    End With 
```

整个子程序如下：

```
Public Sub Node_Button_Duplication()
'
'Com: Copies and pastes Node 1's button to the appropriate column

Dim shp As Shape
Dim code As String
Dim ProcLineNum As Long
Const DQUOTE = """"

' Copy Node 1 button and paste in appropriate location

    ActiveSheet.Shapes("CommandButton1").Select
    Selection.Copy
    Cells(5, 10 + 7 * (NumNodes - 1) - 1).Select
    ActiveSheet.Paste
    Selection.ShapeRange.IncrementLeft 47.25
    Selection.ShapeRange.IncrementTop -13.5

    Set shp = ActiveSheet.Shapes(Selection.Name)

    With shp.OLEFormat.Object
        .Object.Caption = "Node" & Str(NumNodes)
        .Name = "Node" & NumNodes & "Button"
    End With

' This will search for and modify the appropriate Node#button_Click() subroutine
    With ActiveWorkbook.VBProject.VBComponents("Sheet1").CodeModule
            ProcLineNum = .ProcStartLine("Node" & NumNodes & "Button" & "_Click", 0)
            .InsertLines ProcLineNum + 1, "load_node_form(" & DQUOTE & "Node " & NumNodes & DQUOTE & ")"
    End With

End Sub 
```

该子例程将复制并粘贴一个按钮（“CommandButton1”），重命名它，然后尝试分配一个子例程调用。查找过程的问题是，一旦创建了新按钮，“CommandButton#_Click() 过程不会出现在 VBE 中，直到我从编辑器中选择它，因此当我的代码尝试搜索时会导致错误对于那个程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T21:46:48.790

这是你正在尝试的吗？

```
Option Explicit

Public Sub Node_Button_Duplication()
    Dim shp As Shape
    Dim code As String
    Dim ProcLineNum As Long, NumNodes As Long

    Const DQUOTE = """"

    ActiveSheet.Shapes("CommandButton1").Select
    Selection.Copy
    Cells(5, 10 + 7 * (NumNodes - 1) - 1).Select
    ActiveSheet.Paste
    Selection.ShapeRange.IncrementLeft 47.25
    Selection.ShapeRange.IncrementTop -13.5

    Set shp = ActiveSheet.Shapes(Selection.Name)

    With shp.OLEFormat.Object
        .Object.Caption = "Node" & Str(NumNodes)
        .Name = "Node" & NumNodes & "Button"
    End With

    With ActiveWorkbook.VBProject.VBComponents( _
    ActiveWorkbook.Worksheets("Sheet1").CodeName).CodeModule
        .InsertLines Line:=.CreateEventProc("Click", "Node" & NumNodes & "Button") + 1, _
        String:=vbCrLf & _
        "load_node_form(" & DQUOTE & "Node " & NumNodes & DQUOTE & ")"
    End With
End Sub 
```

# facebook - 应该修复的 Facebook 打开图形警告：Parser Mismatched Metadata

> ID：10659806
> 
> 赞同：0
> 
> 时间：2012-05-18T21:11:32.227
> 
> 标签：facebook, facebook-opengraph

我的 Wordpress 网站是[苏梅岛](http://kohsamui.co.uk/)

我在 fb 调试器中有这个警告：应该修复的 Facebook 打开图形警告：

解析器不匹配的元数据。

当我尝试在 fb 上发布我的帖子时，fb 显示的是我的联系方式页面而不是帖子。

请看[这里](http://developers.facebook.com/tools/debug/og/object?q=http://kohsamui.co.uk/index.php/2012/05/6123/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T03:51:46.663

看起来您的描述中有一些前导空白。Facebook 显然不喜欢这样。您在一页上也有多个值 - 我认为他们希望每个页面都是一个单独的`type`对象。`title`

# asp.net-mvc - RedirectToRouteResult 刷新页面而不是更新 div

> ID：10659809
> 
> 赞同：1
> 
> 时间：2012-05-18T21:11:51.177
> 
> 标签：asp.net-mvc

我希望改进我在 asp.net MVC 中的页面身份验证处理，所以我正在阅读本指南（[http://markfreedman.com/index.php/2012/02/28/handling-session-and-authentication-timeouts- in-asp-net-mvc/](http://markfreedman.com/index.php/2012/02/28/handling-session-and-authentication-timeouts-in-asp-net-mvc/)），我尝试了他的例子：

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, Inherited = true, AllowMultiple = true)]
public class SessionExpireFilterAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        HttpContext ctx = HttpContext.Current;

        // If the browser session or authentication session has expired...
        if (ctx.Session["UserName"] == null || !filterContext.HttpContext.Request.IsAuthenticated)
        {
            if (filterContext.HttpContext.Request.IsAjaxRequest())
            {
                // For AJAX requests, we're overriding the returned JSON result with a simple string,
                // indicating to the calling JavaScript code that a redirect should be performed.
                filterContext.Result = new JsonResult { Data = "_Logon_" };
            }
            else
            {
                // For round-trip posts, we're forcing a redirect to Home/TimeoutRedirect/, which
                // simply displays a temporary 5 second notification that they have timed out, and
                // will, in turn, redirect to the logon page.
                filterContext.Result = new RedirectToRouteResult(
                    new RouteValueDictionary {
                        { "Controller", "Home" },
                        { "Action", "Index" }
                });
            }
        }

        base.OnActionExecuting(filterContext);
    }
} 
```

但我注意到我的许多链接都是这样的 Ajax.ActionLinks：

```
<ul>@Ajax.ActionLink("Employees", "Index", "Employee", new AjaxOptions { UpdateTargetId = "employee_detail" })</ul> 
```

当我这样做时，登录视图在身份验证过期后正确返回，但在页面 div 内返回，而不是重新加载整个页面。是否可以在视图中设置它？说“如果我在一个 div 中，只需重新加载整个页面？”

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T21:13:51.543

从 Ajax.ActionLink的[文档](http://msdn.microsoft.com/en-us/library/system.web.mvc.ajax.ajaxoptions_properties)来看，如果返回非 200 状态码，似乎会调用 OnFailure。在您的属性中，请务必添加一个状态代码，类似于：

```
filterContext.Result = new JsonResult { Data = "_Logon_" };
filterContext.HttpContext.Response.StatusCode = (int)HttpStatusCode.Unauthorized; 
```

在那里，可以将 OnFailure 脚本名称添加到您的 ActionLink：

```
@Ajax.ActionLink("Employees", "Index", "Employee", 
    new AjaxOptions { 
      UpdateTargetId = "employee_detail", 
      OnFailure="myRedirectFunctionName()" 
     }) 
```

# ios - 在后台线程中加载 CoreData

> ID：10659815
> 
> 赞同：1
> 
> 时间：2012-05-18T21:12:48.287
> 
> 标签：ios, core-data

我觉得我今天已经阅读了 Stack Overflow 上的所有 CoreData 问题，但仍然非常卡住。:)

我正在开发一个使用 CoreData 的应用程序，该应用程序基于斯坦福大学 cs193p 第 14 讲（Photomania 应用程序）中说明的方法。它使用实现 NSFetchedResultsController 委托的 UITableViewController 子类，当然，在获取结果时表格会自动更新。

一切正常，但当 Document 填充数据时 UI 会阻塞，因为它发生在主线程（即文档的 managedObjectContext）中。我已经在后台线程中下载数据，这只是实际填充导致阻塞的 NSManagedObjects 的代码。该讲座提到使用 NSManagedObjectContext 的 Parent 上下文来在后台加载 Document，然后在主线程中“重新获取”数据以填充表格。我几乎可以正常工作（我认为），除了我的表格经常出现重复条目​​。似乎 [self.tableView beginUpdates] / [self.tableView endUpdates] 会解决这种事情，但是因为我正在后台上下文中保存 NSManagedObjectContext 我不知道我会把它放在哪里。

我也可能以完全错误的方式解决这个问题。:) 无论如何，这里是相关代码：

```
NSManagedObjectContext *backgroundContext;
backgroundContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
// document is my UIManagedDocument
backgroundContext.parentContext = document.managedObjectContext; 

[backgroundContext performBlockAndWait:^{             
     // Do stuff here to populate the document.             
     [backgroundContext save:nil];
}]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T22:26:34.120

它仍在等待，因为您告诉它这样做。使用 performBlock，因此它可以在自己的线程上工作。

```
[backgroundContext preformBlock:^{
    // Do your background stuff
    [backgroundContext save:&error];  // handle the error
    [document.managedObjectContext performBlock:^{
        // Tell the document it has dirty data and should save
        [document updateChangeCount:UIDocumentChangeDone];
        // Do any UI-related stuff
    }];
}]; 
```

当更改被推送到主上下文时，获取的结果控制器将自动更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T21:42:36.733

从您的代码中，我看不出问题可能出在哪里。你没有很清楚你正在加载的“文档”是什么。无论如何，什么可能对您有所帮助：尝试在后台线程（您拥有）中进行整个加载，发布通知以让表视图控制器了解更新，然后向控制器发送消息，例如：

```
[self.tableView reloadData]; 
```

那么你就不需要`beginUpdates`nor `endUpdates`，但是如果你找到了一种你需要使用它们的方法（通常是在and中`NSFetchedResultsController`使用它的委托方法），那么在更新数据之前和之后发送这些消息。`-(void)controllerWillChangeContent:(NSFetchedResultsController *)controller``- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller`

希望对您有所帮助……</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T14:06:44.317

好吧，不知道为什么，但这解决了我的问题：[https](https://stackoverflow.com/a/9451450/314051) ://stackoverflow.com/a/9451450/314051 。具体来说，就在 [backgroundContext 保存] 之前：

```
NSSet *inserts = [backgroundContext insertedObjects]; 
[backgroundContext obtainPermanentIDsForObjects:[inserts allObjects] error:&error]; 
```

我需要做一些研究才能确切地了解原因。感谢您的建议，这些建议帮助我确定这不是 UI 问题。

# php - 通过 PHP 的 SMTP 电子邮件 - 通过发送网格

> ID：10659816
> 
> 赞同：2
> 
> 时间：2012-05-18T21:12:49.640
> 
> 标签：php, smtp

我正在使用 SendGrid SMTP 邮件服务从我的 PHP 网站发送 SMTP 电子邮件。一切正常，但是当我发送大量（5,000）时，加载/发送需要很长时间，然后尝试一遍又一遍地重新启动，并且翻倍，三倍......我刚刚错误地发送了 30,000 封电子邮件！我需要一种方法来查看邮件队列并删除它们或在执行此操作时停止该过程。

*   如何查看要发送的电子邮件数量？或者取消它们被发送出去？
*   也许通过珍珠邮件？

这是我的代码

```
 require_once "Mail.php";

 $from = $thom5;
 $to = $allemailsever1.','.$thom5;
  $subject = $_POST['subject1'];
 $html   = "
<html><body>
<p></p>
$thom
</body></html>
"; 

$host = "smtp.sendgrid.net";
$port = "587";
$username5 = "";
$password5 = "";

$mime = '1.0';
$content = 'text/html'; 
$charset="ISO-8859-1";

$three = 'Receipients <'.$thom5.'>';

$headers = array ('From' => $from,
  'To' => $three,
'Subject' => $subject,
'Mime-version' => $mime,
'Content-Type' => $content,
'charset' => $charset);

$smtp = Mail::factory('smtp',
 array ('host' => $host,
 'port' => $port,
 'auth' => true,
 'username' => $username5,
 'password' => $password5));

// Send notification //

$mail = $smtp->send($to, $headers, $html); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T15:02:22.173

听起来您的本地脚本无法管理您尝试发送的邮件数量。您应该实现一个本地队列，并且由于您使用的是 PHP，一个简单的选项是[Mail_Queue PEAR 包](http://pear.php.net/manual/en/package.mail.mail-queue.mail-queue.tutorial.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T22:39:34.170

使用事件 API 并检查是否处理了每条消息。 [http://docs.sendgrid.com/documentation/api/event-api/](http://docs.sendgrid.com/documentation/api/event-api/)

# c++ - 在 C++ 中强制内存对齐

> ID：10659818
> 
> 赞同：2
> 
> 时间：2012-05-18T21:13:13.607
> 
> 标签：c++, eigen

我想设计一个内部使用 EIGEN 的 API。

基于[http://eigen.tuxfamily.org/dox/TopicPassingByValue.html](http://eigen.tuxfamily.org/dox/TopicPassingByValue.html)，如果一个类有一个 Eigen 对象作为成员，它不能通过值传递。

有没有直接的方法告诉编译器（例如 g++）我的对象不能按值传递？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T21:16:10.260

您可以简单地使复制构造函数不可用。您可以通过使用 Boost 并继承 from`boost::noncopyable`或将复制构造函数设为私有来实现此目的：

```
struct Foo
{
private:
    Foo(Foo const &) { }
}; 
```

或者在新的 C++ 中通过显式删除它：

```
struct Foo
{
    Foo(Foo const &) = delete;
    Foo(Foo &&)      = delete;
}; 
```

您可能还应该通过对赋值运算符执行相同的操作来使您的课程不可分配（并`boost::noncopyable`为您处理这个问题）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T21:16:00.380

要防止复制 C++ 对象，请声明复制构造函数和赋值运算符，但将这些函数设为私有。（因为它们没有被任何东西调用，你不必费心去实现它们。）

您引用的文档看起来很假。这个`Eigen::Vector2d`对象如何能够在原始对象中实现正确对齐，为什么复制对象不会具有相同的对齐方式？

没有给出使其有意义所需的非凡信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T21:15:48.647

只需将复制构造函数/复制运算符设为私有即可。

# c# - 调整实体框架中的类生成以使用存储过程

> ID：10659819
> 
> 赞同：0
> 
> 时间：2012-05-18T21:13:24.233
> 
> 标签：c#, stored-procedures, entity-framework-4.1

我正在寻找一些关于如何调整实体类的 T4 代码生成的指导，`EntityModel.tt`并且可能`EntityModel.Context.tt`（我正在使用 POCO 类）强制对实体的任何查询使用存储过程（我已经有 EntitySQL.tt 生成我的所有存储过程）

例如，像

```
context.MyEntities().Single(c => c.id == 5) 
```

不会生成 SQL，但会调用 SP `sp_GetMyEntities'

如果您有更好的策略来实现相同的结果，我将很高兴了解它。

**更新** 此时我只对 CRUD 的 READ 部分感兴趣。并且没有连接。只需按 ID 简单加载单个实体。理论上，SP可以设置为接受加载项的ID作为参数，以避免加载整个表（在这种情况下，`.Single(c => c.id == 5)`部分将需要bn，并且ID将提供给`MyEntities`对象。

这是一个“数据库优先”的实现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T23:37:51.817

代码优先不支持映射到存储过程。模型优先和数据库优先流确实支持映射到存储过程，但它不能按照您希望使用的方式工作，因为存储过程不可组合（即，如果您这样做 .Single() 过滤最多只会在客户端发生，而不是在数据库中 - 出于性能原因，您希望在数据库站点上进行过滤，因为您可能不想将整个数据库带到客户端只是为了选择一个实体）。.NET Framework 4.5 附带的 Entity Framework 5 的核心库支持可组合的 TVF，应该可以实现您所追求的目标，但在代码优先的场景中也不行。

# vba - 地图点 Excel VBA。为什么使用的 RAM 会增加直到冻结脚本？

> ID：10659820
> 
> 赞同：0
> 
> 时间：2012-05-18T21:13:30.347
> 
> 标签：vba, excel, mappoint

我在 VBA 中实现了两个函数

1.  formatAddress() 获取一个地址（字符串）并返回一个字符串数组，每个字符串都有一段街道地址。示例：[via] [n:civico][citta].. ecc

2.  getPoint 它使用 formatAddress() 函数返回的数组来计算将放在当前单元格上的地理坐标。2.调用 1.各街道地址计算。

在脚本运行时，每次调用 2\. MapPoint 使用的 RAM 都会像指数一样增加，直到使用 810MB RAM 冻结脚本执行，并返回典型 Microsoft 风格的错误代码，一般错误没有文档。“Si è verificato un errore Generato dal sistema o da un componenteesterno”“发生错误，由系统或外部组件生成”

如果存在管理此错误的方法，我查找了 Microsoft 参考资料[http://msdn.microsoft.com/en-us/library/aa723478](http://msdn.microsoft.com/en-us/library/aa723478) （我猜每次调用，当前演算都不会丢弃内存）没有结果。

```
 Option Explicit
 MIMO V 1.0 project Script VBA Data Manager Script
' Script Purpose
'
' This script was implemented for merge two specific Tables of in one.
' the methods and functions use a supplementary software is called
' Microsoft MapPoint 2010, fundamental to calculate extra data that
' will add at the merged table.
'
' Scopo dello script
'
' questo script è stato scritto per fondere due tabelle specifiche in una.
' i metodi e le funzioni usano un software supplementare chiamato
' Microsoft Map Point 2010, fondamentale percalcolare i dati aggiuntivi che
' verranno aggiunti alla tabella prodotta.
Const startColumn As Integer = 1
Const rowStart As Integer = 3 'per passare dagli'indici agli elementi
Const cellBlank As String = "" 'per identificare le celle vuote
' le seguenti te istruzioni avviano MapPoint
Dim App         As New MapPoint.Application
Dim map         As MapPoint.map
Dim route       As MapPoint.route

'index of the columns to copy: function joinTables()
Const ADDR As Integer = 11      ' indirizzo tab clienti
Const ID2 As Integer = 6        ' codice Agenzia tab Agenzie
Const ADDA As Integer = 9       ' indirizzo tab agenzia
Const CAPA As Integer = 10      ' CAP Agenzia
Const CITTA As Integer = 12     ' Citta Agenzia
Const PROVA As Integer = 14     'Provincia Agenzia
Const LONA As Integer = 25      ' Logitudine agenzia
Const LATA As Integer = 26      ' latitudine agenzia
Const CID As Integer = 1        'colonne di destinazione per la copia
Const CADDR As Integer = 2
Const CCAP As Integer = 3
Const CCOM As Integer = 4
Const CPRO As Integer = 5
Const CLON As Integer = 6
Const CLAT As Integer = 7
Const CID2 As Integer = 8
Const CADDA As Integer = 9
Const CCAPA As Integer = 10
Const CCITTA As Integer = 11
Const CPROVA As Integer = 12
Const CLONA As Integer = 13
Const CLATA As Integer = 14
Const SPAZIO As Integer = 15
Const TEMPO As Integer = 16
'distanceST()
Dim pointA       As MapPoint.Location
Dim pointB       As MapPoint.Location
Dim spT(2) As String ' (0)space ; (1)time
'getPoint()
Dim pt(7) As String ' array temporaneo
Dim lPoint       As MapPoint.Location
Dim fAddress()  As String
'formatAddress()
Const faLenght As Integer = 5 ' dimenzione dell'array string di ritorno
Dim tempASrt() As String
Dim lenght As Integer
Dim counter As Integer
Dim FAIndex As Integer
Dim tmpFmtAdd(faLenght) As String
' metodo prinipale dal quale parte l'esecuzione dell'intero programma
Sub main()
Const rowOffsetSh1 As Integer = 3 ' start point record of  clienti's table
Const rowOffsetSh2 As Integer = 2 ' start point record of agenzie's table
Const offsetRecord As Integer = 0 ' starting record to work

' initialize application
App.Visible = False
App.UserControl = True
Set map = App.ActiveMap
Set route = map.ActiveRoute
MsgBox joinTables(rowOffsetSh1 + offsetRecord, rowOffsetSh2)
' le seguenti tre istruzioni terminano il programma MapPoint
map.Saved = True
App.Quit
Set App = Nothing
End Sub

'join input tables in output sheet with additional data
Private Function joinTables(orsh1 As Integer, orsh2 As Integer) As String
Dim i As Integer ' indice generico
Dim link As Integer 'join fra le tabelle, necessario per la simulazione di join
' variabili temporanee per il calcolo dei dati
'Dim fADDR() As String
Dim point() As String ' conterra tutti i dati relativi ad un certo indirizzo
Dim dist() As String
Dim Sh3Off As Integer
i = orsh1 ' imposto l'indice con il valore della riga di partenza
passato come parametro di funz
         ' la tab clienti parte dalla 3 riga mentre la tab ottenuta da 2
Sh3Off = i - 1 ' offset necessario per lasciare spazio alla riga prima
di titolo nella tab uscita
' proseguo mentre la riga corrente della tabella 1 non è vuota
Do While Worksheets(1).Cells(i, startColumn) <> "" And
Worksheets(1).Cells(i, startColumn) <> " "
Worksheets(3).Cells(Sh3Off, CID) = Worksheets(1).Cells(i, startColumn)
    'copio CDO cliente del foglio 1 nel foglio 3
'Worksheets(3).Cells(Sh3Off, CID).Interior.Color = RGB(255, 0, 0)
'MsgBox "prima"
point = getPoint(Worksheets(1).Cells(i, ADDR))
    'calcolo le coordinate per l'indirizzo passato
'MsgBox "dopo"
'Worksheets(3).Cells(Sh3Off, CADDR) = point(0)
     'copio gl'indirizzi formattati del foglio 1 nel foglio 3
'Worksheets(3).Cells(Sh3Off, CCAP) = point(2)
     'copio i CAP formattati del foglio 1 nel foglio 3
'Worksheets(3).Cells(Sh3Off, CCOM) = point(3)
     'copio i Comuni formattati del foglio 1 nel foglio 3
'Worksheets(3).Cells(Sh3Off, CPRO) = point(4)
     'copio le Provincie formattati del foglio 1 nel foglio 3
'Worksheets(3).Cells(Sh3Off, CLON) = point(5)
     'copio la longitudine per l'indirizzo passato
'Worksheets(3).Cells(Sh3Off, CLAT) = point(6)
     'copio la latitudine per l'indirizzo passato
'Worksheets(3).Cells(Sh3Off, CID2) = Worksheets(1).Cells(i, ID2)
     'copio l'id dell'agenzia nella nuova tabella
' calcolo la distanza spazio-temporale
'dist = distanceST(point(5), point(6), Worksheets(2).Cells(link,
LONA), Worksheets(2).Cells(link, LATA))
'Worksheets(3).Cells(Sh3Off, SPAZIO) = dist(0)
'Worksheets(3).Cells(Sh3Off, TEMPO) = dist(1)
'link = linkForeingKey(Worksheets(1).Cells(i, ID2), orsh2, 2,
startColumn) 'calcolo la posizione dell'ID agenzia in tab agenz.
relazionata al cliente
'Worksheets(3).Cells(Sh3Off, CADDA) = Worksheets(2).Cells(link, ADDA)
'Worksheets(3).Cells(Sh3Off, CCAPA) = Worksheets(2).Cells(link, CAPA)
'Worksheets(3).Cells(Sh3Off, CCITTA) = Worksheets(2).Cells(link, CITTA)
'Worksheets(3).Cells(Sh3Off, CPROVA) = Worksheets(2).Cells(link, PROVA)
'Worksheets(3).Cells(Sh3Off, CLONA) = Worksheets(2).Cells(link, LONA)
'Worksheets(3).Cells(Sh3Off, CLATA) = Worksheets(2).Cells(link, LATA)
i = i + 1
Sh3Off = Sh3Off + 1
Loop
joinTables = "Done. (^.^) "
End Function
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
'funzione che prende un indirizzo (string) in un certo formato valido
'e ritorna un array (String) con le relative informazioni seguenti
'
' VIA | N_CIVICO | CAP | CITTA | PROVINCIA | LONG | LAT
' (0) | (1)      | (2) | (3)   | (4)       | (5)  | (6)
'
Private Function getPoint(address As String) As String()
If address <> "" And address <> " " Then
fAddress = formatAddress(address) ' converte l'indirizzo in un array
Set lPoint = map.FindAddressResults(fAddress(0), fAddress(3), , ,
fAddress(2), geoCountryItaly).Item(1)
'MsgBox fAddress(0) & ", " & fAddress(2) & " " & fAddress(3) & " " & fAddress(4)
'Set lPoint = map.findResults(fAddress(0) & ", " & fAddress(2) & " " &
fAddress(3) & " " & fAddress(4)).Item(1)
pt(0) = fAddress(0)
pt(1) = fAddress(1)
pt(2) = fAddress(2)
pt(3) = fAddress(3)
pt(4) = fAddress(4)
pt(5) = Format(lPoint.Longitude, "#,##0.000000")
pt(6) = Format(lPoint.Latitude, "#,##0.000000")
getPoint = pt
Else
MsgBox " Warning! Function getGPSPoint():: NO INPUT DATA"
getPoint = pt
End If
getPoint = pt
End Function
' funzione che prende un ID di un foglio e ritorna la sua
' posizione in Integer nella colonna del altro foglio passata
' come indice parametro di funzione
Private Function linkForeingKey(Target As String, offset As Integer,
sheet As Integer, column As Integer) As Integer
Dim i As Integer
If Target <> "" And Target <> " " And offset > 0 And sheet > 0 And
column > 0 Then
i = offset
Do While Worksheets(sheet).Cells(i, column) <> "" And
Worksheets(sheet).Cells(i, column) <> " "
If Worksheets(sheet).Cells(i, column) = Target Then
'MsgBox "foreingKey[" & Worksheets(sheet).Cells(i, column) & "]  row["
& i & "]" '[ pass ]
linkForeingKey = i
End If
i = i + 1
Loop
Else
MsgBox " Warning! Function linkForeingKey():: NO CORRECTLY DATA"
linkForeingKey = 0
End If
End Function
' funzione che prende come parametri le coordinate GPS dei punti da valutare
' restituisce un array di stringhe con distanza in KM e tempo in min tra i punti
' distanceST(...)(0) // space
' distanceST(...)(1) // time
Private Function distanceST(LONA As String, LATA As String, lonB As
String, latB As String) As String()
If LATA <> " " And LONA <> " " And latB <> " " And lonB <> " " Then
'calcolo i punti nella mappa
Set pointA = map.GetLocation(LATA, LONA)
Set pointB = map.GetLocation(latB, lonB)
'calcolo la rotta
route.Waypoints.Add pointA
route.Waypoints.Add pointB
route.Calculate
'calcolo della distanza in KM
spaceTime(0) = route.Distance
'calcolo della distanza in Min
spaceTime(1) = Left(route.DrivingTime / geoOneMinute, 5)
'MsgBox "distanza: A[LO " & LONA & "LA " & LATA & "] B[ LO " & lonB &
"LA " & latB & "] KM[" & spaceTime(0) & "] T[" & spaceTime(1) & "]"
'route.Waypoints.Item(2).Delete
'route.Waypoints.Item(1).Delete
route.Clear
Set pointA = Nothing
Set pointB = Nothing
map.Saved = False
distanceST = spT
Else
MsgBox " Warning! Function distanceST():: NO INPUT DATA"
distanceST = spT
End If
'distanceST = spaceTime
End Function
'funzione che prende una stringa che è un indirizzo
'e ritorna le componenti dell'indirizzo nella forma
' VIA | N_CIVICO | CAP | CITTA | PROVINCIA
' (0) | (1)      | (2) | (3)   | (4)
Private Function formatAddress(address As String) As String()
If address <> "" Then
FAIndex = faLenght - 1
counter = 4 ' perche 4 sono bs citta cap n_civico, la cui posizione non varia
address = Replace(address, ";", " ") ' elimina dall'indirizzo il fastidioso ';'
address = Replace(address, ",", " ") ' elimina dall'indirizzo il fastidioso ','
tempASrt = Split(address, " ")
lenght = UBound(tempASrt)
Do While lenght > -1
If tempASrt(lenght) <> "" Then
If counter > 0 Then ' sistemo subito le ultime quattro n_civico cap
citta provincia
tmpFmtAdd(FAIndex) = tempASrt(lenght)
FAIndex = FAIndex - 1
counter = counter - 1
Else ' sistemo le rimanenti parole, cioè la via
tmpFmtAdd(0) = tempASrt(lenght) + " " + tmpFmtAdd(0)
End If
End If
lenght = lenght - 1
Loop
formatAddress = tmpFmtAdd
Else
MsgBox " Warning! Function formatAddress():: NO INPUT DATA"
End If
formatAddress = tmpFmtAdd
End Function 
```

原始代码放在

[https://docs.google.com/document/d/161srj6Zz0B2x_BHQV85QQft-JY55RK8oFwj3SLlUo9A/edit](https://docs.google.com/document/d/161srj6Zz0B2x_BHQV85QQft-JY55RK8oFwj3SLlUo9A/edit)

我评论了一些代码以仅在工作时显示该功能并生成冻结

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T02:03:58.333

在路上只有一个 iPad，所以我看不到大部分代码；但是您描述的是 MapPoint API 的已知行为。基本上，垃圾收集器针对 GUI 用户进行了优化，而不是编程使用。一种简单的垃圾收集方法将是一个很好的解决方案，但尚未实施。手动最小化和最大化 MapPoint 是一种已知的解决方法，但要以编程方式执行此操作，您必须将 Windows 消息发送到 MapPoint 主窗口（在 Win7/Vista 中很难） - API 最小化/最大化方法是不够的。

如果您将 MapPoint 用作外部应用程序，则定期重新启动它是另一种解决方案 - 这就是我的 MPMilage 产品所做的。

另一件重要的事情是要非常干净地处理 MapPoint 对象。尽快清理、释放物体等。确实发生的垃圾回收将永远不会回收有引用的对象，因此一旦完成所有引用，就将它们设置为 0 或 NULL。这可以对 MapPoint 的内存增长产生很大的影响，但对于真正的大批量作业，它只会延迟不可避免的情况。

# mysql - Mysql 计数不同的结果

> ID：10659824
> 
> 赞同：1
> 
> 时间：2012-05-18T21:13:46.823
> 
> 标签：mysql, database, count, distinct

我需要一个查询来计算不同的结果...

我的桌子

```
ID | stats | name
-----------------
1  | 1     | John
2  | 1     | John
3  | 2     | John
4  | 2     | John
5  | 3     | John 
```

我需要这样的查询....

```
SELECT if( stats = 2, ADD + 1, 0) as ok, if(stats = 3, ADD + 1, 0) as no_ok 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T21:29:32.583

如果要同时计算数据集中具有多个特定条件的行数，可以使用模式`COUNT(CASE WHEN criteria THEN 1 END)`。`stats = 2`这是一个计算和的行数的示例`stats = 3`：

```
SELECT
  count(case when stats = 2 then 1 end) as ok,
  count(case when stats = 3 then 1 end) as not_ok
from
  Table1 
```

结果：

```
OK | NOT_OK
-----------
2  | 1 
```

演示：[http ://www.sqlfiddle.com/#!2/82414/1](http://www.sqlfiddle.com/#!2/82414/1)

# python - 如何为 pyqt 项目创建 Windows 安装程序

> ID：10659829
> 
> 赞同：7
> 
> 时间：2012-05-18T21:14:05.683
> 
> 标签：python, qt, pyqt4

如何将我的带有 Qt for GUI 的 python 程序转换为 .exe 文件？

我想为我的python源代码制作一个安装文件

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-18T22:02:44.043

**第一部分：“如何将我的带有 Qt for GUI 的 python 程序转换为 .exe 文件？？”**

您可以使用 PyInstaller，它支持 python 2.2 - 2.7，它有一个钩子系统，用于将 Qt 与所有 dll 和插件一起包含在内。

您还可以使用：

*   bbfreeze
*   冻结
*   py2exe（很旧）
*   esky（除 PyInstaller 之外的所有上述内容的包装器）

基本上所有这些系统都有一个定义文件来处理和生成二进制包。例如，esky 有一个 setup.py（这是一个 distutil 文件）来生成包：

```
from esky import bdist_esky
from distutils.core import setup

setup(name="appname",
      version="1.2.3",
      scripts=["appname/script1.py","appname/gui/script2.pyw"],
      options={"bdist_esky":{"includes":["mylib"]}},
     ) 
```

比你可以调用“python setup.py bdist_esky”

对于 PyInstaller，情况完全不同。从控制台，在 PyInstaller 文件夹中 cd ：

```
python Makespec.py  [options] script.py 
```

这会生成一个规范文件，其中包含打包脚本的所有选项。您也可以使用编辑器修改此文件。

```
python Build.py  script.spec 
```

这会分析并构建您的 exe（或 os 二进制等效文件）。

**第二部分：“我想为我的python源代码制作一个安装文件”**

您必须使用 NSIS、InnoSetup、BitRock Installer、IzPack 或等效软件来生成平台安装程序。所以你必须把第一部分产生的二进制结果打包成操作系统分发。几乎所有的安装程序系统都被认为适用于 Windows 系统。跨平台：零安装，IzPack ...如果您使用 IzPack，您可以拥有一个跨平台安装程序，支付包含 jvm 的价格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-08T11:57:46.623

在这里使用 Py2Exe 是最合适的选择。

PY2EXE 二进制文件：http: [//sourceforge.net/projects/py2exe/files/py2exe/0.6.9/](http://sourceforge.net/projects/py2exe/files/py2exe/0.6.9/)

用法 ：

1.  创建一个新的 setup python 文件：from distutils.core import setup

> 导入py2exe
> 
> setup(console=['你的 python 脚本绝对路径'])

2.  保存此文件。

3.  转到命令提示符并更改保存 setup.py 文件的目录。

4.  运行命令：[python<***你的python脚本名_要转换成exe*** >py2exe]

我无法发布图片，因为我没有 10 个声誉来发布两个以上的链接。如果需要任何帮助，请发表评论。

# vb.net - 在 WebBrowser 控件中使用 VB.net 设置 FileUpload 值

> ID：10659834
> 
> 赞同：1
> 
> 时间：2012-05-18T21:14:32.013
> 
> 标签：vb.net, file-upload, webbrowser-control

我正在设置一个显示具有 FileUpload 对象的网站的程序。我想让我的程序为 FileUpload 对象设置默认路径，但我似乎无法让它工作。这是我目前的尝试：

```
WebBrowser1.Document.GetElementById("uploaded_file").SetAttribute("Value", UploadDefault) 
```

但是，它似乎不起作用。有人能得到我想要的结果吗？我正在使用 VB.net，所以所有 .net 答案都是可以接受的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T22:26:06.143

由于安全原因，输入 type="file" 的 HTMLElement[值](http://msdn.microsoft.com/en-us/library/windows/apps/hh466236.aspx)属性是**只读的。**

> input type=file 值，一个文件名，由用户输入到控件中。与其他控件不同，此值是只读的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-05T14:36:24.583

您可以将壁虎与 xullrunner 一起使用

将 oFile 变暗为新 GeckoInputElement(GeckoWebBrowser1.Document.GetElementsByName("file1")(0).DomObject)

oFile.Value = fileNametoUpload

# javascript - Ant JavaScript相同的字符串比较给出错误的结果，但字符比较对字符串中的每个字符都给出正确的结果？

> ID：10659838
> 
> 赞同：4
> 
> 时间：2012-05-18T21:14:48.553
> 
> 标签：javascript, ant, ivy, string-comparison

我`<scriptdef>`在我的 project.xml 中使用 JavaScript - via - 从多个属性值组成一个属性名称。我需要比较脚本中的两个字符串：一个作为一个或多个属性值的扩展传入。另一个作为带引号的文字字符串传入。. .

```
<ac:var name="buildVariant" unset="true"/>
<property name="buildVariant" value="Debug"/>
<unStrung propstring="${buildVariant}" altifmatch="Debug"/> 
```

. . . 但是脚本中的字符串比较没有像我预期的那样工作。相同字符串的逐个字符比较的计算结果为“真”。一对否定的“>”和“<”比较的 AND 计算结果为“真”。但简单地比较 string1 == string2 的结果为“假”。这是说明问题的简化脚本（并显示了我尝试的一些解决方法）。. .

```
<scriptdef name="unStrung" language="javascript">
    <attribute name="propstring"/>
    <attribute name="altifmatch"/>
<![CDATA[
var propstring = attributes.get("propstring");
var propvalue = project.getProperty(propstring);
var altifmatch = attributes.get("altifmatch");
var debugTheDebug = "Debug";

if ( altifmatch != null && propstring != null )
{
    var alen = 0;
    var plen = 0;
    alen = altifmatch.length();
    plen = propstring.length();

    print(' ');
    print('    altifmatch = [' + altifmatch + '] and propstring = [' + propstring + ']');
    print('    so naturally (altifmatch == propstring) = [' + (altifmatch == propstring) + '],');
    print('    just like ("Debug" == "Debug") = [' + ("Debug" == "Debug") + '].');
    print(' ');

    print(' ');
    print('    altifmatch.length() = [' + alen + '] and propstring.length() = [' + plen + ']');
    print('    altifmatch.substring(0,alen) = [' + altifmatch.substring(0,alen)
        + '] and propstring.substring(0,plen) = [' + altifmatch.substring(0,alen) + ']');
    print('    so naturally ( propstring.substring(0,plen) == propstring.substring(0,plen) ) = ['
                + (altifmatch.substring(0,alen) == propstring.substring(0,plen)) + '].');
    print(' ');

    for (var c=0; c<plen; c++)
    {
        print('    char['+c+']: altifmatch['+c+']="'+altifmatch.charCodeAt(c)+'";  propstring['+c+']="'+propstring.charCodeAt(c)
            +'".  So ... a == p = "' + (altifmatch.charCodeAt(c) == propstring.charCodeAt(c)) + '"');
    }

    print(' ');
    print('    typeof(altifmatch) = "' + typeof(altifmatch) + '", and typeof(propstring) = "' + typeof(propstring) + '"');
    print('    altifmatch.toString() = "' + altifmatch.toString() + '" and propstring.toString() = "' + propstring.toString() + '"');
    print('    ...oddly enough... debugTheDebug = "' + debugTheDebug + '"');
    print('       (debugTheDebug == altifmatch.toString()) = "' + (debugTheDebug == altifmatch.toString()) + '"');
    print('       (debugTheDebug == propstring.toString()) = "' + (debugTheDebug == propstring.toString()) + '"');
    print('    ...and still... (altifmatch.toString() == propstring.toString()) = "' + (altifmatch.toString() == propstring.toString()) + '"');

    print(' ');
    print('       (debugTheDebug == altifmatch) = "' + (debugTheDebug == altifmatch) + '"');
    print('       (debugTheDebug == propstring) = "' + (debugTheDebug == propstring) + '"');
    print('    ...and still... (altifmatch == propstring) = "' + (altifmatch == propstring) + '"');
    print('       (altifmatch < propstring) = "' + (altifmatch < propstring) + '"');
    print('       (altifmatch > propstring) = "' + (altifmatch > propstring) + '"');
    print('          (!(altifmatch < propstring) && !(altifmatch > propstring)) = "'
            + (!(altifmatch < propstring) && !(altifmatch > propstring)) + '"');
    print('    ...and of course... ( (debugTheDebug == altifmatch) && (debugTheDebug == propstring) ) = "'
            + ( (debugTheDebug == altifmatch) && (debugTheDebug == propstring) ) + '"');

    print(' ');
}
]]>
</scriptdef> 
```

结果输出如下所示：

```
altifmatch = [Debug] and propstring = [Debug]
so naturally (altifmatch == propstring) = [false],
just like ("Debug" == "Debug") = [true].

altifmatch.length() = [5] and propstring.length() = [5]
altifmatch.substring(0,alen) = [Debug] and propstring.substring(0,plen) = [Debug]
so naturally ( propstring.substring(0,plen) == propstring.substring(0,plen) ) = [false].

char[0]: altifmatch[0]="68";  propstring[0]="68".  So ... a == p = "true"
char[1]: altifmatch[1]="101";  propstring[1]="101".  So ... a == p = "true"
char[2]: altifmatch[2]="98";  propstring[2]="98".  So ... a == p = "true"
char[3]: altifmatch[3]="117";  propstring[3]="117".  So ... a == p = "true"
char[4]: altifmatch[4]="103";  propstring[4]="103".  So ... a == p = "true"

typeof(altifmatch) = "object", and typeof(propstring) = "object"
altifmatch.toString() = "Debug" and propstring.toString() = "Debug"
...oddly enough... debugTheDebug = "Debug"
   (debugTheDebug == altifmatch.toString()) = "true"
   (debugTheDebug == propstring.toString()) = "true"
...and still... (altifmatch.toString() == propstring.toString()) = "false"

   (debugTheDebug == altifmatch) = "true"
   (debugTheDebug == propstring) = "true"
...and still... (altifmatch == propstring) = "false"
   (altifmatch < propstring) = "false"
   (altifmatch > propstring) = "false"
      (!(altifmatch < propstring) && !(altifmatch > propstring)) = "true"
...and of course... ( (debugTheDebug == altifmatch) && (debugTheDebug == propstring) ) = "true" 
```

我怀疑我错过了一些简单或愚蠢的事情（我对 Ant 或 JavaScript 不是很有经验）。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T21:31:25.843

对于字符串比较，您应该使用 (String).equals()

[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html)

# java - 扩展抽象类的类是否需要接口已经实现了接口？

> ID：10659839
> 
> 赞同：2
> 
> 时间：2012-05-18T21:14:51.220
> 
> 标签：java, interface, abstract-class

假设有这样的代码：

```
package com.ps.Sample;

public interface Sample
{
    public void Method1();
}

public abstract class AbstractSample implements Sample
{
    public void Method1()
    {
        System.out.println("Hello World");
    }
}

public class MySample extends AbstractSample
{

}

public class TestSample
{
    public static void main(String[] args) 
    {
        Sample my = new MySample();

        my.Method1();
    }

} 
```

我的问题是：将具体类声明为

```
public class MySample extends AbstractSample implements Sample 
```

代替

```
public class MySample extends AbstractSample 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T21:17:35.757

不，那里没有。这是多余的。AbstractSample*是一个*样本，而 MySample*是一个*AbstractSample。所以 MySample*是一个*样本。

无论您是否添加，javadoc 都会显示所有已实现的接口`implements Sample`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T21:17:54.547

一个好处是，如果将 AbstractSample 更改为不实现 Sample，则第一个声明仍允许您将 MySample 的实例传递给期望 Sample 的方法。

# cocoa-touch - 本地化的故事板被忽略（？）

> ID：10659845
> 
> 赞同：6
> 
> 时间：2012-05-18T21:15:01.750
> 
> 标签：cocoa-touch, localization, uistoryboard, xcode-storyboard

我为我的故事板创建了瑞典语本地化版本，但对于语言设置为瑞典语的 iOS 设备，它不会加载 - 它始终是英语版本。

我有`Localizable.strings`in `sv.lproj`，并且在使用`NSLocalizedString`宏时确实有效。

是否需要一些额外的步骤？我所做的只是单击“本地化”部分下的加号。

![故事板](../Images/6180ba267e308fcf3c2ffb8477a3b12b.png) ![设置](../Images/16c3aae83ea8a6a73e943e69808effc1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T17:58:11.503

除了当您准备好开始本地化工作（即故事板已准备好使用您的主要应用程序语言）外，不需要其他步骤，您应该将本地化添加到您的项目中

![如何为项目添加本地化](../Images/d77915380d22bfe802b4ffbbbe21faa1.png)

并为每种语言本地化 Storyboard

![在此处输入图像描述](../Images/d12b80a103a9fafe8e5275387cf1d257.png)

# c# - Stream.CopyTo 和 MemoryStream.WriteTo 之间的区别

> ID：10659846
> 
> 赞同：32
> 
> 时间：2012-05-18T21:15:02.557
> 
> 标签：c#, stream, httphandler, memorystream

我有一个 HttpHandler 通过返回图像`Response.OutputStream`。我有以下代码：

```
_imageProvider.GetImage().CopyTo(context.Response.OutputStream); 
```

`GetImage()`方法返回 a`Stream`它实际上是一个`MemoryStream`实例，它向浏览器返回 0 个字节。如果我更改`GetImage()`方法签名以返回 a`MemoryStream`并使用以下代码行：

```
_imageProvider.GetImage().WriteTo(context.Response.OutputStream); 
```

它工作，浏览器得到一个图像。那么 MemoryStream 类中的 WriteTo 和 CopyTo 有什么区别，以及使用方法签名中`Stream`的类使其工作的推荐方法是什么。`GetImage()`

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-05-18T21:18:03.667

`WriteTo()`在复制数据之前将读取位置重置为零 -`CopyTo()`另一方面将复制流中当前位置之后剩余的任何数据。这意味着如果您没有自己重置位置，则根本不会读取任何数据。

您很可能只是在第一个版本中错过了以下内容：

```
memoryStream.Position = 0; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-18T21:43:11.900

根据反射器，这是 CopyTo() 方法定义：

```
private void InternalCopyTo(Stream destination, int bufferSize)
{
    int num;
    byte[] buffer = new byte[bufferSize];
    while ((num = this.Read(buffer, 0, buffer.Length)) != 0)
    {
        destination.Write(buffer, 0, num);
    }
} 
```

我在这里看不到任何“剩余机制”...它将所有内容从目的地复制`this`到目的地（以缓冲区大小的块为单位）。

# objective-c - 如何让按钮拉起网页视图？

> ID：10659848
> 
> 赞同：0
> 
> 时间：2012-05-18T21:15:18.013
> 
> 标签：objective-c, uiwebview

我正在使用moviePlayerViewController 制作一个应用程序，并且我正在尝试在按下按钮时添加一个webview。这是一个单页应用程序，但一旦按下按钮就会显示一个 web 视图。我已经输入了制作 webview 的代码，但我不知道如何将它与我的 MoviePlayerViewController 结合起来。最好的方法是什么？

# axapta - 如何通过 X++ 代码将列表视图添加到对话框中？

> ID：10659852
> 
> 赞同：0
> 
> 时间：2012-05-18T21:15:31.143
> 
> 标签：axapta, dynamics-ax-2009, x++

我正在创建一个基本的 CSV 导入器工具。目标是让 RunBase 类调用一个对话框，在对话框中，我想让用户选择一个特定格式的 CSV 文件。

我`dialog.allowUpdateOnSelectCtrl(true)`的想法是当他们选择一个文件时，我可以读取第一行并在列表视图中创建预览，就像数据导入/导出工具一样。

到目前为止，这就是我的所有对话：

```
public Object dialog()
{
    DialogRunbase       dialog = super();
    container           conFilter = ["Comma Seperated Value .txt ", "*.csv"];
    #resAppl
    ;

    dialog.filenameLookupFilter(conFilter);
    dialog.allowUpdateOnSelectCtrl(true);
    dlgFileName = dialog.addFieldValue(typeid(filenameSave),filenameSave);

    return dialog;
} 
```

我意识到我可以创建自定义表单和其他选项。我想尝试这样做，这样我就可以学习这种方法。

# sql - SQL - 删除重复的结果

> ID：10659860
> 
> 赞同：13
> 
> 时间：2012-05-18T21:16:07.313
> 
> 标签：sql, duplicates

我有一个看起来像这样的表：

```
name     | surname
------------------
John     |  John
Jessica  |  Madson 
```

我有一个这样的查询：

```
SELECT *
FROM TABLE
WHERE name LIKE '%j%'
    OR surname LIKE '%j%' 
```

我得到什么：

```
John John
John John
Jessica Madson 
```

我想要的是：

```
John John
Jessica Madson 
```

我怎样才能摆脱重复的结果？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-18T21:18:58.800

使用`DISTINCT`：

```
SELECT DISTINCT name, surname
FROM yourtable
WHERE name LIKE '%j%' OR surname LIKE '%j%' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-18T21:19:18.213

尝试：

```
SELECT DISTINCT name, surname FROM table WHERE name LIKE '%j%' OR surname LIKE '%j%' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-18T21:26:06.823

您也可以使用 group by

```
SELECT name, surname
FROM yourtable
WHERE name LIKE '%j%' OR surname LIKE '%j%'
GROUP BY name, surname 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-02-03T12:16:11.547

您可以在 SQL Server 中使用[DISTINCT](https://www.sqlservertutorial.net/sql-server-basics/sql-server-select-distinct/)来仅获取不同的记录。除此之外，您还可以使用[ROW_NUMBER (Transact-SQL)](https://docs.microsoft.com/en-us/sql/t-sql/functions/row-number-transact-sql?view=sql-server-ver15)函数通过将数字分配给结果集来获得不同的结果。

的语法`row_number()`如下所示。

```
ROW_NUMBER ( )   
    OVER ( [ PARTITION BY value_expression , ... [ n ] ] order_by_clause ) 
```

下面是实现。

```
Create table TempTable (name varchar(50), surname varchar(50))

Insert into TempTable Values 
               ('John', 'John')
             , ('John', 'John') 
             , ('Jessica', 'Madson')
             , ('Jessica', 'Madson') 
             , ('Suraj', 'Kumar')
             , ('Peter', 'Smith')

Select * from TempTable -- All records.

Select * from(
SELECT name
       ,surname
       ,row_number() over (partition by name, surname order by name, surname) as RN -- For partition
FROM TempTable
WHERE name LIKE '%j%' OR surname LIKE '%j%'
)temp
where RN = 1 -- For Distinct records only 
```

输出将如下所示：

[![在此处输入图像描述](../Images/0ca8b4754df9b901214dae1f3f793cac.png)](https://i.stack.imgur.com/KolLh.png)

[**您可以在 - db<>fiddle**](https://dbfiddle.uk/?rdbms=sqlserver_2012&fiddle=d5f93260d6c6b87aaf5f43fbc24feacb)找到演示[](https://dbfiddle.uk/?rdbms=sqlserver_2012&fiddle=d5f93260d6c6b87aaf5f43fbc24feacb)

# php - 在 PHP 中，是否有一个函数可以返回由关联数组数组中的键值组成的数组？

> ID：10659875
> 
> 赞同：26
> 
> 时间：2012-05-18T21:17:16.087
> 
> 标签：php, arrays, associative-array, array-reduce, pluck

我确定这个问题之前已经被问过，我很抱歉没有先找到它。

原始数组：

```
[0] => Array
    (
        [categoryId] => 1
        [eventId] => 2
        [eventName] => 3
        [vendorName] => 4
    )

[1] => Array
    (
        [categoryId] => 5
        [eventId] => 6
        [eventName] => 7
        [vendorName] => 8
    )

[2] => Array
    (
        [categoryId] => 9
        [eventId] => 10
        [eventName] => 11
        [vendorName] => 12
    ) 
```

我希望的结果来自： print_r(get_values_from_a_key_in_arrays('categoryId', $array));

```
[0] => 1
[1] => 5
[2] => 9 
```

我只是在寻找比编写自己的基于 foreach 的函数更干净的东西。如果 foreach 是答案，我已经准备好了。

**编辑：**我不想使用硬编码的密钥，我只是展示了一个对解决方案的示例调用。谢谢！^_^

**PHP 5.3 的快速抓取解决方案：**

```
private function pluck($key, $data) {
    return array_reduce($data, function($result, $array) use($key) {
        isset($array[$key]) && $result[] = $array[$key];
        return $result;
    }, array());
} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-18T21:31:38.523

因此，[高阶](http://c2.com/cgi/wiki?HigherOrderFunction) [集合/迭代器函数](http://docs.python.org/library/itertools.html)（例如[pluck](http://api.prototypejs.org/language/Enumerable/prototype/pluck/)、[filter](http://yuilibrary.com/yui/docs/api/classes/Array.html#method_filter)、[each](http://underscorejs.org/#each)、[map](http://apidock.com/ruby/Enumerable/map)和 friends ）的酷之处在于它们可以混合和匹配以组成更复杂的操作集。

大多数语言都提供这些类型的函数（查找诸如集合、迭代器或枚举/可枚举之类的包）...有些提供的函数比其他的多，而且您通常会看到函数在不同语言中的命名方式不同（即 collect == map，减少==折叠）。如果[您的语言中不存在某个函数，您可以](http://kourge.net/node/100)从确实存在的函数中创建它。

至于你的测试用例......我们可以使用[array_reduce](http://php.net/array_reduce)来实现**pluck**。我发布的第一个版本依赖于`array_map`；但是，我同意[@salathe](https://stackoverflow.com/users/113938/salathe)的观点，即[array_reduce](http://php.net/array_reduce)更简洁地完成这项任务；[array_map](http://php.net/array_map)是一个不错的选择，但你最终不得不做更多的工作。`array_reduce`起初可能看起来有点奇怪，但如果回调组织得井井有条，一切都很好。

不那么天真的`pluck`人还会检查它是否可以在迭代值上“调用”（函数/方法）。在下面的简单实现中，我们假设结构是散列（关联数组）。

**这将设置测试用例数据（Fixtures）：**

```
<?php

$data[] = array('categoryId' => 1,    'eventId' => 2,  'eventName' => 3,  'vendorName' => 4);
$data[] = array('categoryId' => 5,    'eventId' => 6,  'eventName' => 7,  'vendorName' => 8);
$data[] = array('categoryId' => 9,    'eventId' => 10, 'eventName' => 11, 'vendorName' => 12);
$data[] = array(/* no categoryId */   'eventId' => 10, 'eventName' => 11, 'vendorName' => 12);
$data[] = array('categoryId' => false,'eventId' => 10, 'eventName' => 11, 'vendorName' => 12);
$data[] = array('categoryId' => 0.0,  'eventId' => 10, 'eventName' => 11, 'vendorName' => 12); 
```

**选择您喜欢的采摘版本**

```
$preferredPluck = 'pluck_array_reduce'; // or pluck_array_map 
```

**PHP 5.3+ 的“pluck”：array_reduce 提供了一个简洁的实现，但不像 array_map 版本那么容易推理：**

```
function pluck_array_reduce($key, $data) {
  return array_reduce($data, function($result, $array) use($key){
    isset($array[$key]) &&
      $result[] = $array[$key];

    return $result;
  }, array());
} 
```

**PHP 5.3+ 的“pluck”：array_map 并不完美，所以我们必须做更多的检查（它仍然不能解决许多潜在的情况）：**

```
function pluck_array_map($key, $data) {
  $map = array_map(function($array) use($key){
    return isset($array[$key]) ? $array[$key] : null;
  }, $data);

  // is_scalar isn't perfect; to make this right for you, you may have to adjust
  return array_filter($map, 'is_scalar');
} 
```

**旧版 PHP <5.3 的“采摘”**

我们可以使用旧的[create_function](http://php.net/create_function)；然而，这是一种糟糕的形式，不推荐，而且一点也不优雅，因此，我决定不展示它。

```
function pluck_compat($key, $data) {
  $map = array();
  foreach ($data as $array) {
    if (array_key_exists($key, $array)) {
      $map[] = $array[$key];
    }
  }
  unset($array);

  return $map;
} 
```

**这里我们根据我们运行的 PHP 版本选择一个“pluck”版本来调用。如果您运行整个脚本，无论您使用什么版本，都应该得到正确的答案。**

```
$actual   = version_compare(PHP_VERSION, '5.3.0', '>=')
          ? $preferredPluck('categoryId', $data)
          : pluck_compat('categoryId', $data);
$expected = array(1, 5, 9, false, 0.0);
$variance = count(array_diff($expected, $actual));

var_dump($expected, $actual);
echo PHP_EOL;
echo 'variance: ', $variance, PHP_EOL;

print @assert($variance)
    ? 'Assertion Failed'
    : 'Assertion Passed'; 
```

注意没有结尾'?>'。那是因为不需要它。离开它比保留它更能带来好处。

FWIW，看起来这是作为[array_column](http://benramsey.com/blog/2013/03/introducing-array-column-in-php-5-dot-5/)添加到 PHP 5.5 的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-18T21:24:46.830

映射是您需要的：

```
$input = array(
    array(
        'categoryId' => 1,
        'eventId' => 2,
        'eventName' => 3,
        'vendorName' => 4,
    ),
    array(
        'categoryId' => 5,
        'eventId' => 6,
        'eventName' => 7,
        'vendorName' => 8,
    ),
    array(
        'categoryId' => 9,
        'eventId' => 10,
        'eventName' => 11,
        'vendorName' => 12,
    ),
);

$result = array_map(function($val){
    return $val['categoryId'];
}, $input); 
```

或创建您想要的功能：

```
function get_values_from_a_key_in_arrays($key, $input){
    return array_map(function($val) use ($key) {
        return $val[$key];
    }, $input);
}; 
```

然后使用它：

```
$result = get_values_from_a_key_in_arrays('categoryId', $array); 
```

它将在 PHP >= 5.3 中工作，其中允许匿名回调。对于早期版本，您需要提前定义回调并传递其名称而不是匿名函数。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-18T21:19:57.723

对此没有内置函数，但通常称为“ [pluck](http://brianhaveri.github.com/Underscore.php/#pluck) ”。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-18T21:21:52.723

```
<?php
$a = array(
        array('a' => 1, 'b' => 2),
        array('a' => 2, 'b' => 2),
        array('a' => 3, 'b' => 2),
        array('a' => 4, 'b' => 2)
);

function get_a($v) {
        return $v['a'];
}

var_dump(array_map('get_a', $a)); 
```

您可以使用 create_function 或匿名函数 (PHP 5.3 >=)

```
<?php
$a = array(
        array('a' => 1, 'b' => 2),
        array('a' => 2, 'b' => 2),
        array('a' => 3, 'b' => 2),
        array('a' => 4, 'b' => 2)
);

var_dump(array_map(create_function('$v', 'return $v["a"];'), $a)); 
```

如上所述，我会编写一个回调函数，然后将它与 array_map 一起使用。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-10-26T14:11:57.257

从 PHP 5.5 开始，使用[`array_column`](http://php.net/manual/en/function.array-column.php)：

```
$events = [
    [ 'categoryId' => 1, 'eventId' =>  2, 'eventName' =>  3, 'vendorName' =>  4 ],
    [ 'categoryId' => 5, 'eventId' =>  6, 'eventName' =>  7, 'vendorName' =>  8 ],
    [ 'categoryId' => 9, 'eventId' => 10, 'eventName' => 11, 'vendorName' => 12 ],
];

print_r(array_column($events, 'categoryId')); 
```

[在 3v4l 在线观看。](https://3v4l.org/WbSgJ)

对于 5.5 之前的版本，您可以考虑使用[polyfill](https://github.com/ramsey/array_column)。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-05-18T21:23:58.280

没有内置功能。但是很容易用`array_map()`.

```
$array = array(
    array(
        "categoryID"   => 1,
        "CategoryName" => 2,
        "EventName"    => 3,
        "VendorName"   => 4
    ),
    array(
        "categoryID"   => 5,
        "CategoryName" => 6,
        "EventName"    => 7,
        "VendorName"   => 8
    ),
    array(
        "categoryID"   => 9,
        "CategoryName" => 10,
        "EventName"    => 11,
        "VendorName"   => 12
    )
);

$newArray = array_map(function($el) {
    return $el["categoryID"];
}, $array);

var_dump($newArray); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-18T21:38:10.250

当你需要时，lisp 在哪里？实际上在 php 中它也很容易管理。只需使用 array_map 函数，如下图所示。

```
# bunch o data
$data = array();
$data[0] = array("id" => 100, "name" => 'ted');
$data[1] = array("id" => 200, "name" => 'mac');
$data[2] = array("id" => 204, "name" => 'bub');

# what you want to do to each bit of it
function pick($n) { return($n['id']); }
# what you get after you do that
$map = array_map("pick", $data);
# see for yourself
print_r($map); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-18T21:22:36.030

您可以使用[array_filter](http://www.php.net/manual/en/function.array-filter.php)，并根据所需的键传入一个函数。

不过，Tadeck 的回答要好得多。

# objective-c - VoiceOver：在屏幕转换后强制选择辅助功能元素

> ID：10659881
> 
> 赞同：18
> 
> 时间：2012-05-18T21:17:39.987
> 
> 标签：objective-c, ios, cocoa-touch, accessibility, voiceover

我正在使我的 iOS 应用程序可访问，我快完成了。我的应用程序包含几个自定义屏幕转换，当 VoiceOver 开启时，它似乎会选择最左上角的元素来描述转换后的内容，或者偶尔选择一个随机元素。`UIAccessibilityTraitSummaryElement`看起来很有希望，但据我了解，它仅在应用程序启动时有效，而不是在任意转换之后。

似乎没有可访问性特征或属性来指定元素获得 VoiceOver 焦点的首选顺序。有没有办法强制 VoiceOver 聚焦？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-16T21:02:20.933

**编辑：** iOS 6 现在可用，正如 kevboh 所述，您现在可以在发布`UIAccessibilityLayoutChangedNotification`or时传递参数`UIAccessibilityScreenChangedNotification`：

```
UIAccessibilityPostNotification(UIAccessibilityScreenChangedNotification, myAccessibilityElement); 
```

`myAccessibilityElement`在大多数情况下，将是一个 UIView，其中 isAccessibilityElement 设置为 YES（许多视图的默认设置）。

或者，您可以将 iOS6 中添加的新特征添加`UIAccessibilityTraitHeader`到您的辅助功能元素中`accessibilityTraits`，这应该具有相同的结果（尽管我还没有对此进行测试）。

**原文：** iOS 6 中的新 API 无法在此处讨论，因为它仍处于 NDA 之下，但可以在 WWDC 2012 (Session 210) 的“iOS 可访问性”视频中找到。

但是，如果做不到这一点，解决方法可能是手动触发公告以覆盖默认的重点可访问性标签公告：

```
UIAccessibilityPostNotification(UIAccessibilityAnnouncementNotification, @"Your text"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-05-25T14:43:58.530

[由于这个可访问性建议站点](http://a11y-guidelines.orange.com/mobile_EN/dev-ios.html)，提供了强制 VoiceOver 焦点和重新排序元素的有趣解释。

**通知内容更改**

当当前页面内容发生变化时，可以使用多种通知来通知无障碍 API。为此，我们必须使用**UIAccessibilityPostNotification**方法将更改通知发送到可访问性 API 。

有几种类型的更改通知，但最常用的两种是：

*   **UIAccessibilityLayoutChangedNotification**：通知页面的一部分已经改变，有 2 个可能的传入参数（一个 NSString 或一个 UIObject）。使用 NSString，通知的行为类似于带有 VoiceOver 发声的 UIAccessibilityAnnouncementNotification。使用 UIObject，焦点转移到用户界面元素。此通知与 UIAccessibilityAnnouncementNotification 非常相似，但应该是动态内容被删除或添加到当前视图的结果。
*   **UIAccessibilityScreenChangedNotification**：通知整个页面已更改，包括 nil 或 UIObject 作为传入参数。使用 nil 时，页面中的第一个可访问元素将获得焦点。使用 UIObject，焦点转移到带有 VoiceOver 的指定元素。这个通知伴随着一个发声，包括一个像宣布一个新页面的声音。

**阅读顺序**

使用**UIAccessibilityContainer**协议重新定义 VoiceOver 阅读顺序。这个想法是有一个元素表来定义元素的阅读顺序。**使用shouldGroupAccessibilityElement**属性通常非常有用，因此我们有一个精确的顺序，但仅适用于部分视图（视图的其余部分将使用 VoiceOver 提供的本机顺序读取）。

说明此功能的最佳方式是键盘，其键顺序不一定是适当的。这是所需的顺序：1、2、3、4、7、6、8、9、5。创建了两个视图（蓝色和灰色），我们以图形方式将数字放入其中，如下所述： [![在此处输入图像描述](../Images/98f765b7fb7a94ef4ec7a83d7b211d59.png)](https://i.stack.imgur.com/heqIL.png)

插图和[代码片段](https://a11y-guidelines.orange.com/mobile_EN/dev-ios.html#reading-order)（Swift 和 ObjC）也可用于定义这 2 个解释。

# python-3.x - 将 Jinja2 与 CherryPy 3.2 一起使用

> ID：10659882
> 
> 赞同：1
> 
> 时间：2012-05-18T21:17:41.123
> 
> 标签：python-3.x, cherrypy, jinja2

我通过 mod_wsgi 用 Apache 设置了 Python 3.2。我有 CherryPy 3.2 提供一个简单的“Hello World”网页。在构建网站时，我想开始使用 Jinja2 进行模板化。我是 Python 新手，因此对 Python、CherryPy 或 Jinja 了解不多。

使用下面的代码，我可以加载站点根目录 ( `/`) 和产品页面 ( `/products`) 及其基本文本。这至少让我知道我已经正确设置了 Python、mod_wsgi 和 CherryPy。

因为该站点将有很多页面，所以我想以一种无需在每个页面处理程序类中声明和呈现模板的方式来实现 Jinja 模板。据我所知，最好的方法是包装 PageHandler，类似于以下示例：

*   [http://docs.cherrypy.org/dev/concepts/dispatching.html#replacing-page-handlers](http://docs.cherrypy.org/dev/concepts/dispatching.html#replacing-page-handlers)
*   [http://docs.cherrypy.org/stable/refman/_cptools.html#cherrypy._cptools.HandlerWrapperTool](http://docs.cherrypy.org/stable/refman/_cptools.html#cherrypy._cptools.HandlerWrapperTool)

我已经实现了第二个示例中的代码，但它并没有改变任何东西。

[代码后的更多细节]

**wsgi_handler.py** -*一些教程和示例的混搭*

```
import sys, os
abspath = os.path.dirname(__file__)
sys.path.append(abspath)
sys.path.append(abspath + '/libs')
sys.path.append(abspath + '/app')
sys.stdout = sys.stderr

import atexit
import threading
import cherrypy
from cherrypy._cptools import HandlerWrapperTool
from libs.jinja2 import Environment, PackageLoader

# Import from custom module
from core import Page, Products

cherrypy.config.update({'environment': 'embedded'})

env = Environment(loader=PackageLoader('app', 'templates'))

# This should wrap the PageHandler
def interpolator(next_handler, *args, **kwargs):
    template = env.get_template('base.html')
    response_dict = next_handler(*args, **kwargs)
    return template.render(**response_dict)

# Put the wrapper in place(?)
cherrypy.tools.jinja = HandlerWrapperTool(interpolator)

# Configure site routing
root = Page()
root.products = Products()

# Load the application
application = cherrypy.Application(root, '', abspath + '/app/config') 
```

**/应用程序/配置**

```
[/]
request.dispatch: cherrypy.dispatch.MethodDispatcher() 
```

**核心模块类**

```
class Page:
    exposed = True

    def GET(self):
        return "got Page"

    def POST(self, name, password):
        return "created"

class Products:
    exposed = True

    def GET(self):
        return "got Products"

    def POST(self, name, password):
        return "created" 
```

根据我在[Google Group](https://groups.google.com/group/cherrypy-users/browse_thread/thread/9c3d16ea3f781335?hide_quotes=no)上阅读的内容，我认为我可能需要“打开”Jinja 工具，因此我将配置更新为：

**/应用程序/配置**

```
[/]
tools.jinja.on = True
request.dispatch: cherrypy.dispatch.MethodDispatcher() 
```

更新配置后，站点根目录和产品页面显示 CherryPy 生成的错误页面“500 Internal Server Error”。在日志中没有找到详细的错误消息（至少在我知道的日志中没有）。

除非它是预先安装的，否则我知道我可能需要那里的[Jinja 工具](http://tools.cherrypy.org/wiki/Jinja)，但我不知道把它放在哪里或如何启用它。我怎么做？

我是以正确的方式解决这个问题，还是有更好的方法？

**编辑**（2012 年 5 月 21 日）：

这是我正在使用的 Jinja2 模板：

```
<!DOCTYPE html>
<html>
    <head>
        <title>{{ title }}</title>
    </head>
    <body>
        <h1>Hello World</h1>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T17:17:16.173

我想到了。

在`interpolator`函数中，`next_handler`函数调用原来的PageHandler（`Page.GET`或`Products.GET`在本例中）。那些原始的 PageHandlers 返回字符串，而`interpolator`函数将响应视为 python dict（字典），因此当它传递给`template.render`as时会出现双星号`**response_dict`。

Jinja 模板有一个 的占位符`title`，因此需要定义一个标题。将纯字符串传递给渲染函数并没有定义标题应该是什么。我们需要将一个实际的 dict 传递给 render 函数（或者什么都不传递，但这有什么好处呢？）。

注意：对于这些修复中的任何一个，都需要启用 jinja 工具，如问题所示，`tools.jinja.on`在配置中设置为 True。

## 快速解决

在调用渲染函数时定义标题。为此，我需要更改此行：

```
return template.render(**response_dict) # passing the string as dict - bad 
```

对此：

```
return template.render(title=response_dict) # pass as string and assign to title 
```

像这样，模板以我的 PageHandler 文本作为页面标题呈现。

## 更好的修复

因为模板会变得更加复杂，所以一个渲染函数可能并不总是能够正确分配必要的占位符。让原始页面处理程序返回一个实际的 dict 并分配模板的许多占位符可能是一个好主意。

保持插值器函数不变：

```
def interpolator(next_handler, *args, **kwargs):
    template = env.get_template('base.html')
    response_dict = next_handler(*args, **kwargs)
    return template.render(**response_dict) 
```

更新 Page 和 Products 以返回为模板的占位符定义值的实际字典：

```
class Page:
    exposed = True

    def GET(self):
        dict = {'title' : "got Page"}
        return dict

    def POST(self, name, password):
        # This should be updated too
        # I just haven't used it yet
        return "created"

class Products:
    exposed = True

    def GET(self):
        dict = {'title' : "got Products"}
        return dict

    def POST(self, name, password):
        # This should be updated too
        # I just haven't used it yet
        return "created" 
```

像这样，模板以我的 PageHandler 标题文本作为页面标题呈现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T19:50:55.887

在社区贡献的各种配方的[存储库](https://bitbucket.org/Lawouach/cherrypy-recipes/src)中还可以找到一个更新的[Jinja2](https://bitbucket.org/Lawouach/cherrypy-recipes/src/c899e1b91417/web/templating/jinja2_templating)工具。

# iphone - 没有为 MFMailComposeViewController 调用 didFinishWithResult

> ID：10659884
> 
> 赞同：3
> 
> 时间：2012-05-18T21:17:52.850
> 
> 标签：iphone, objective-c, ios4, ios5

在按键回调中：

```
 MFMailComposeViewController *mailViewController = [[MFMailComposeViewController alloc] init];
    mailViewController.mailComposeDelegate = self;

    [self presentModalViewController:mailViewController animated:YES]; 
```

委托实施：

```
- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error {
NSLog (@" Inside  MAIL COMPOSER CONTROLLER DELIGATE ");

// Remove the mail view
[self dismissModalViewControllerAnimated:YES];
} 
```

当我在 MailComposerView 中按下取消按钮时，不会调用删除。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T00:23:09.383

1.  将您的 viewController 设置为 MFMailComposeViewControllerDelegate：

    ```
    @interface CurrentViewController : UIViewController <MFMailComposeViewControllerDelegate> 
    ```

2.  在实例化后立即设置您的 mailComposer 委托：

    ```
    MFMailComposeViewController * mailComposer = [[MFMailComposeViewController alloc]init];
    mailComposer.mailComposeDelegate = self; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T21:20:17.247

你真的让你的班级成为 MFMailComposeViewControllerDelegate 吗？

```
@interface MyViewController : UIViewController <MFMailComposeViewControllerDelegate> 
```

# javascript - AngularJS + Rails - 压缩资产时的问题

> ID：10659890
> 
> 赞同：8
> 
> 时间：2012-05-18T21:18:28.643
> 
> 标签：javascript, ruby-on-rails-3, angularjs

我最近创建了一个带有 Rails 3.2.3 后端的 AngularJS 1.0.0rc8 应用程序，它在开发中运行良好，但是在部署到 Heroku 之后出现了一个**Unknown Provider 错误**——显然应用程序看不到服务对象。

我知道现在有必要将 angular-resource.js 作为一个单独的文件包含在内，并将**ngResource**注入到应用程序模块中，如下所示：

```
// main app javascript file

'use strict';

angular.module('contactapp', ['ngResource']).
  config(['$routeProvider', function($routeProvider) {
  $routeProvider.
      when('/contacts', {template: 'assets/app/partials/contact-list.html', controller: ContactListCtrl}).
      when('/contacts/new', {template: 'assets/app/partials/new-contact.html', controller: ContactListCtrl}).
      when('/contacts/:contact_id', {template: 'assets/app/partials/contact-detail.html', controller: ContactDetailCtrl}).
      otherwise({redirectTo: '/contacts'});      

}]); 
```

我也知道，当文件被缩小时，控制器无法判断它们的依赖关系是什么，除非它们也被注入到控制器对象中，如下所示：

```
ContactListCtrl.$inject = ['$scope', '$http', 'Contacts']; 
```

我也尝试过 Angular 推荐的另一种方式，使用括号表示法并传入这样的函数：

```
var ContactListCtrl= ['$scope', '$http', 'Contacts', function($scope, $http, Contacts) { /* constructor body */ }]; 
```

然而，这些似乎都不起作用。

我的应用程序可以看到提供的资源的唯一方法是关闭 Production.rb 文件中的资产压缩，如下所示：

```
# Compress JavaScripts and CSS
  config.assets.compress = false 
```

我花了几个小时才弄清楚这一点，但我最近看到另一个 Rails + AngularJS 应用程序也有同样的问题。

Jens Krause 得出了同样的结论，并在他的博客上进行了解释： [http ://www.websector.de/blog/2012/01/17/fun-with-angularjs-rails-coffeescript-sass-another-cafe-townsend-例子/](http://www.websector.de/blog/2012/01/17/fun-with-angularjs-rails-coffeescript-sass-another-cafe-townsend-example/)

**如果我有一个相对较大的应用程序，并且我需要压缩资源，如何使用 Angular 和 Rails 来解决这个问题？**

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-24T23:10:04.790

如果您使用的是 Rails 4，请将`js_compressor`您的生产和登台环境更改为：

```
config.assets.js_compressor = Uglifier.new(mangle: false) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T00:41:32.203

我认为问题在于您的缩小器仍在混淆控件本身的变量名称（ContactListCtrl -> a 或它所做的任何事情）。

您是否尝试过使用 module.controller 函数定义控制器？

```
angular.module('myModule', [])
.controller('Controller1', ['dep1', 'dep2', function(dep1, dep2) {
    //code
}]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-12T18:08:19.627

Adding this line to my config/environments/production.rb did the trick for me:

```
config.assets.js_compressor = Sprockets::LazyCompressor.new { Uglifier.new(:mangle => false) } 
```

# ipad - 固定位置 div 在页面上冻结 (iPad)

> ID：10659891
> 
> 赞同：9
> 
> 时间：2012-05-18T21:18:33.003
> 
> 标签：ipad, ios5, css-position

我有一个要在 ipad 上支持的 asp.net 网站。当我专注于输入元素并且键盘弹出时，位置固定的标题 div（通常与页面一起滚动）将弹出页面的距离等于键盘占用的距离并在持续时间内冻结在那里输入过程。将键盘放回原位后， div 会弹回原位并再次正常运行。我在 iOS5 上测试所以 position: fixed 应该被支持。

这是一个已知的问题？有人遇到过这个并处理过吗？我似乎在这方面找不到任何东西。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-25T02:12:24.573

固定定位在 iOS5/iOS6/iOS7 上被破坏。

编辑 3：请参阅 iOS8 的此答案接近尾声的工作修复链接。

Position:fixed 在以下情况下被破坏：

a) 页面被缩放

或者

b) iPad/iPhone 上的键盘显示（由于输入获得焦点）。

您可以在[jsbin.com/icibaz/3](http://jsbin.com/icibaz/3/edit)中通过打开链接并缩放或赋予输入焦点来自己查看错误。您可以自己编辑[编辑html](http://jsbin.com/icibaz/3/edit)。

关于错误 (a) 和 (b) 的注意事项：

1.  当输入获得焦点并且键盘显示时，固定的 div`top: 0px; left: 0px;`将显示在错误的位置（屏幕顶部上方或下方）。

2.  该问题似乎与屏幕上输入的自动居中有关（更改 window.pageYOffset）。

3.  这似乎是计算错误，而不是重绘错误：如果您`top:`在 onScroll 事件上强制更改（例如在 0px 和 1px 之间切换），您可以看到固定的 div 移动了一个像素，但它仍然是错误的地方。

4.  我之前使用的一种解决方案是[在输入获得焦点时隐藏固定的 div](http://mobile.tutsplus.com/tutorials/mobile-web-apps/ios-5-fixed-positioning-and-content-scrolling/comment-page-1/#comment-16594) - 请参阅我写的另一个答案。

5.  固定的 div 似乎卡在了键盘打开时页面上的相同绝对位置。

6.  那么当输入有焦点时，也许将 div 更改为绝对定位？编辑 3：使用此解决方案查看底部的评论。或者也许在打开键盘之前保存 pageXOffset/pageYOffset 值，并在 onScroll 事件中计算这些值与当前 pageXOffset/pageYOffset 值（打开键盘后的当前值）之间的差异，并将固定 div 偏移该差异。

7.  如果页面被缩放，固定定位似乎存在不同的问题 -[在此处尝试（](http://bit.ly/mobilefixed)[这里](http://bradfrostweb.com/blog/mobile/fixed-position/)也有关于 Android 支持在评论中修复的好信息）。

编辑1：重现使用jsbin（不是jsfiddle）并使用jsbin的全屏视图（不是编辑页面）。避免使用 jsfiddle（和 jsbin 的编辑视图），因为它们将代码放在 iframe 中，这会干扰固定定位和 pageYOffset。

编辑 2：iOS 6 和 iOS 7 Mobile Safari`position:fixed;`仍然存在相同的问题 - 大概是设计使然！。

编辑3：（b）的一个工作解决方案是当输入获得焦点时，将标题更改为绝对定位，然后在页面滚动事件上设置标题[顶部](http://jsbin.com/xujofoze/4)。这个解决方案：

*   当输入没有聚焦时使用固定定位（使用 window.onscroll 有可怕的抖动）。
*   不允许捏缩放（避免上面的错误（a））。
*   输入获得焦点后使用绝对定位和 window.pageYOffset（因此标题正确定位）。
*   如果在输入有焦点时滚动，请将 style.top 设置为等于 pageYOffset（即使在 iOS8 上，由于 onscroll 事件延迟，标题也会有些抖动）。
*   如果在 iOS8 上的应用程序中使用 UIWebView，或者使用 <=iOS7，如果在输入有焦点时滚动，标题将超级抖动，因为在滚动完成之前不会触发 onscroll。
*   一旦输入失去焦点，就返回固定位置的标题（示例使用 input.onblur，但可能更适合使用 document.body.onfocus）。
*   当心可用性失败，如果标题太大，输入可能会被遮挡/覆盖。
*   由于键盘显示时 iOS 页面/视口高度中的错误，我无法为页脚工作。
*   [使用http://jsbin.com/xujofoze/4/edit](http://jsbin.com/xujofoze/4/edit)编辑示例并使用[http://output.jsbin.com/xujofoze/4/quiet查看](http://output.jsbin.com/xujofoze/4/quiet)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T23:57:04.347

根据我的需要，我发现使用绝对定位的标题更容易，在滚动之前隐藏它并在完成滚动时显示它（我需要相同的代码来支持 iOS4 和 Android）。

出于我的目的，我隐藏了事件的标题，并在事件上`touchstart`再次显示它（加上一些计时器以提高响应能力/减少闪烁）。它闪烁，但这是我能找到的最佳折衷方案。可以使用事件检测滚动的开始（jQuery 会这样做），但我发现对我来说效果不佳，因为：`touchend``scroll``touchmove``touchmove`

1.  通常，iPad 在滚动之前无法重新绘制（即绝对标题仍然卡住 - 即使`top`在滚动开始之前已更改）。

2.  当输入元素获得焦点时，iPad 会自动将元素居中，但不会触发 scrollstart 事件（因为如果只是`click`输入，则不会触发 touchmove）。

通过使用固定和绝对定位的混合方法可以改进在 iOS5 上实现固定标头：

*   使用 iOS5 的固定定位，直到输入获得焦点。

*   当输入获得焦点（键盘显示）时，更改为 iOS4 绝对定位代码。

*   当键盘关闭时，变回固定位置。

检测键盘何时关闭的代码（例如使用键盘隐藏键）是`DOMFocusOut`在元素上注册事件`document`并执行类似于以下代码的操作。需要超时，因为`DOMFocusOut`事件可以在一个元素获得焦点和另一个元素失去焦点之间触发。

```
function document_DOMFocusOut() {
    clearTimeout(touchBlurTimer);
    touchBlurTimer = setTimeout(function() {
        if (document.activeElement == document.body) {
            handleKeyboardHide();
        }
    }.bind(this), 400);
} 
```

我的固定标头代码类似于：

```
{
    setup: function() {
        observe(window, 'scroll', this, 'onWinScroll');
        observe(document, 'touchstart', this, 'onTouchStart');
        observe(document, 'touchend', this, 'onTouchEnd');
        if (isMobile) {
            observe(document, 'DOMFocusOut', this, 'docBlurTouch');
        } else if (isIE) {
        // see http://ajaxian.com/archives/fixing-loss-of-focus-on-ie for code to go into this.docBlurIe()
            observe(document, 'focusout', this, 'docBlurIe');
        } else {
            observe(isFirefox ? document : window, 'blur', this, 'docBlur');
        }
    },

    onWinScroll: function() {
        clearTimeout(this.scrollTimer);
        this.scrolling = false;
        this.rehomeAll();
    },

    rehomeAll: function() {
        if ((isIOS5 && this.scrolling) || isIOS4 || isAndroid) {
            this.useAbsolutePositioning();
        } else {
            this.useFixedPositioning();
        }
    },

    // Important side effect that this event registered on document on iOs. Without it event.touches.length is incorrect for any elements in the document using the touchstart event!!!
    onTouchStart: function(event) {
        clearTimeout(this.scrollTimer);
        if (!this.scrolling && event.touches.length == 1) {
            this.scrolling = true;
            this.touchStartTime = inputOrOtherKeyboardShowingElement(event.target) ? 0 : (new Date).getTime();
            // Needs to be in touchStart so happens before iPad automatic scrolling to input, also not reliable using touchMove (although jQuery touch uses touchMove to unreliably detect scrolling).
            this.rehomeAll();
        }
    },

    onTouchEnd: function(event) {
        clearTimeout(this.scrollTimer);
        if (this.scrolling && !event.touches.length) {
            var touchedDuration = (new Date).getTime() - this.touchStartTime;
            // Need delay so iPad can scroll to the input before we reshow the header.
            var showQuick = this.touchStartTime && touchedDuration < 400;
            this.scrollTimer = setTimeout(function() {
                if (this.scrolling) {
                    this.scrolling = false;
                    this.rehomeAll();
                }
            }.bind(this), showQuick ? 0 : 400);
        }
    },

    // ... more code
} 
```

jQuery mobile 支持 scrollstart 和 scrollstop 事件：

```
var supportTouch = $.support.touch,
    scrollEvent = "touchmove scroll",
    touchStartEvent = supportTouch ? "touchstart" : "mousedown",
    touchStopEvent = supportTouch ? "touchend" : "mouseup",
    touchMoveEvent = supportTouch ? "touchmove" : "mousemove";

function triggerCustomEvent( obj, eventType, event ) {
    var originalType = event.type;
    event.type = eventType;
    $.event.handle.call( obj, event );
    event.type = originalType;
}

// also handles scrollstop
$.event.special.scrollstart = {

    enabled: true,

    setup: function() {

        var thisObject = this,
            $this = $( thisObject ),
            scrolling,
            timer;

        function trigger( event, state ) {
            scrolling = state;
            triggerCustomEvent( thisObject, scrolling ? "scrollstart" : "scrollstop", event );
        }

        // iPhone triggers scroll after a small delay; use touchmove instead
        $this.bind( scrollEvent, function( event ) {

            if ( !$.event.special.scrollstart.enabled ) {
                return;
            }

            if ( !scrolling ) {
                trigger( event, true );
            }

            clearTimeout( timer );
            timer = setTimeout(function() {
                trigger( event, false );
            }, 50 );
        });
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-27T19:46:50.883

这在 iOS13 中仍然是一个问题（当在“textarea”字段中删除长文本时，固定标题会跳转到该“textarea”字段的开头，阻碍视图），因此，我想我分享一下我的快速修复：

由于我的页脚相当大，我没有任何 JS，只是在页脚中添加了比固定页眉更大的 z-index。眼不见，心不烦。

# language-agnostic - 没有 RTC 的机器如何生成伪随机数？

> ID：10659898
> 
> 赞同：1
> 
> 时间：2012-05-18T21:19:11.917
> 
> 标签：language-agnostic, random

我一直想知道像NES这样的旧游戏机如何能够在没有像time(NULL)这样的种子的情况下生成随机数；

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T21:54:29.453

您可以使用后续按键、操纵杆移动或任何类似的人为交互之间的时间来做到这一点。如果您可以对事件进行计时，例如以微秒为单位并取模 100 左右，那么您将以合理的种子结束。如果需要，您也可以多次执行此操作以收获足够多的位以创建足够大（即 64 位）的种子。

在其他一些不能依赖人工交互来获取种子的系统上，复位电路使用 RC 电路，但组件变化会使每个系统的时间略有不同。外部（与 CPU 无关的计数器）可以在上电时启动，然后在启动期间由 CPU 读取。如果计数器相对于复位电路时间常数具有足够的分辨率，那么最后一位可以用作种子。在以太网时代之前，网络设备很久以前就使用它来生成 MAC 等效地址。

--ga

# android - 如何在Android上禁用锁定屏幕

> ID：10659901
> 
> 赞同：1
> 
> 时间：2012-05-18T21:19:27.533
> 
> 标签：android

我想在某个应用程序中禁用锁定屏幕。我的问题是这也会禁用整个手机的锁定屏幕。所以我添加`lock.reenableKeyguard();`到该`onPause()`方法中，但这不仅在用户退出应用程序时调用，而且每次在该应用程序中启动新活动时都会调用。我是否必须在每个活动中禁用锁定屏幕并添加此`onPause`方法？有没有办法只在应用程序启动时显示的第一个活动中管理这个？

顺便说一句，我还在`onStop`and`onDestroy`方法中重新启用了锁定屏幕。另一个问题`onPause`是当我关闭手机屏幕时也会调用它（通过按电源按钮或调用什么），所以当我第一次打开应用程序时，我关闭屏幕然后打开它，有没有锁屏，但是当我再次将其关闭时，它就会出现，因为我在该`onPause`方法中重新启用了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:43:04.957

玩了几个小时后，我发现我忘记实现 onResume()：

```
 public void onResume()    {
            lock.disableKeyguard();
            super.onResume();
        } 
```

这样每次我打开活动/打开屏幕时，锁定屏幕都会被禁用。

# canvas - 类折纸折纸动画推荐JS库

> ID：10659904
> 
> 赞同：4
> 
> 时间：2012-05-18T21:19:39.730
> 
> 标签：canvas, webgl, three.js

我想使用 WebGL 或 Canvas（没有 Flash！）创建类似折纸的折纸动画。我想重现的效果与[此处视频](http://www.youtube.com/watch?v=B0TuPsNJ-XY "YouTube")中的效果相似。

对于立方体，最终动画的清晰视图可以表示如下：

![](../Images/744d4edb26f1451ce1ed949e27b22720.png)

我试图使用[three.js](https://github.com/mrdoob/three.js/ "三.js")库，但我找不到为THREE.Mesh 的单个面设置动画的方法。我也尝试过简单的 CSS3 动画，但是用超过 6 个面制作实体动画会非常困难——因为不可能在 2 个或更多面之间创建关系。

任何人都可以推荐其他 JS 库吗？或者有没有办法用three.js实现这一点？当然，如果有一种方法可以使其仅使用 canvas2d 工作，那就太好了——但我认为这不太可能！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T08:39:31.887

我不确定哪个框架最好，但我认为最好使用支持蒙皮网格和动画播放的框架。快速搜索给出了...

[http://www.oak3d.com/](http://www.oak3d.com/)

...但我不知道这是否是要走的路。三个有（或至少有）支持蒙皮，但从 3D 程序中获取数据并非易事，并且动画播放受到限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:14:39.913

如果您使用 Maya 作为 3D 程序，请尝试 www.inka3d.com。然后您可以在 Maya 中为其设置动画，只需将顶面设置为正面，将所有侧面设置为地板（每个都是平面对象），然后创建一些关键帧。然后添加一个相机，做“全部导出...”，你就完成了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-29T13:02:58.280

我会推荐[http://oridomi.com/](http://oridomi.com/)作为灵感。它提供基本的折叠动画。

# haskell - Haskell 中有哪些符号命名空间？

> ID：10659909
> 
> 赞同：6
> 
> 时间：2012-05-18T21:20:24.430
> 
> 标签：haskell

我试图减少我对 Haskell 语法的困惑，并想了解 Haskell 中单独的命名空间是什么。

命名空间是指与编译器管理的各种符号表相对应的语法命名空间，而不是代码中定义的名称范围。

例如：

*   值名称（如函数名称）
*   数据构造函数
*   类型构造函数
*   类型参数（在类型定义中）
*   实例？
*   ...？

我之所以感兴趣，是因为我在阅读 Haskell 代码时遇到了问题（肯定比任何其他语言都多），因为我经常很难弄清楚*我*到底在看什么（尤其是数据/类型构造函数/类型声明）。

Haskell 似乎`<name> <name> ...`在许多地方重用了一些句法结构（尤其是 ）并依赖于上下文 - 结果证明编译器在这方面比我好得多......

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-18T21:25:40.857

[Haskell 报告§1.4 说](http://www.haskell.org/onlinereport/haskell2010/haskellch1.html#x6-130001.4)

> Haskell 中有六种名称：*变量*和 *构造函数*的名称表示值；*类型变量*、*类型构造函数*和*类型类*的那些是指与类型系统相关的实体；和*模块名称*是指模块。命名有两个限制：
> 
> 1.  变量和类型变量的名称是以小写字母或下划线开头的标识符；其他四种名称都是以大写字母开头的标识符。
> 2.  标识符不能用作同一范围内的类型构造函数和类的名称。
> 
> 这些是唯一的限制；例如，Int 可能同时是单个范围内的模块、类和构造函数的名称。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-18T22:36:25.720

如果您确保了解您正在阅读的内容，则可以避免混淆：

1.  表达式：这里每个大写名称都是数据构造函数或限定变量或构造函数，而小写字母是值
2.  类型：这里每个大写名称都是类型构造函数或类名称，而小写名称是类型变量。

# uitableview - UITableView 数组返回 nil

> ID：10659910
> 
> 赞同：0
> 
> 时间：2012-05-18T21:20:33.550
> 
> 标签：uitableview, nsmutablearray, nsarray, ios

现在我有一个表格视图，我可以向你保证委托方法都可以工作。但我正在尝试从数组中加载表格视图。当我在应用程序中更早地登录时，相同的数组返回实际对象，但是当我尝试访问其中的相同数组时，`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath` 它总是返回 nil/null。这是以下实现`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`：

```
NSLog(@"cell for row at twitter called");
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
}

NSDictionary *tweet = [timeLineData objectAtIndex:indexPath.row];
// NSLog(@"Tweet at index %d is %@", [indexPath row], tweet);
//NSLog(@"Tweet: %@", tweet);
cell.textLabel.text = [tweet objectForKey:@"text"];

cell.detailTextLabel.text = [tweet valueForKeyPath:@"user.name"];

return cell; 
```

我很困惑为什么会这样，因为在我所有其他项目中，相同的代码都可以正常工作。任何帮助将不胜感激。

谢谢，维林德博拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T21:23:33.750

如果您使用以下方法访问数组会有所帮助：

```
[yourArray objectAtIndex:indexpath.row]; 
```

# php - 在 PHP 中处理带有特殊字符的百分比编码字符串

> ID：10659911
> 
> 赞同：4
> 
> 时间：2012-05-18T21:20:50.680
> 
> 标签：php, string

我得到一个像这样的字符串：

> M%C3%B2nica

所以我需要得到像“Mònica”这样的东西。

PHP中最好的方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T21:22:35.613

```
echo rawurldecode ('M%C3%B2nica'); // prints Mónica 
```

您可以使用 urldecode() 或 rawurldecode()，但在您的情况下，它可能没有任何区别。（在这里阅读更多内容：[urlencode vs rawurlencode？](https://stackoverflow.com/questions/996139/php-urlencode-vs-rawurlencode)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T21:23:18.510

最短的答案：`urldecode();`

# javascript - 如何在 jQuery 中动态生成可折叠集？

> ID：10659912
> 
> 赞同：0
> 
> 时间：2012-05-18T21:20:54.907
> 
> 标签：javascript, jquery, ajax, dynamic

我从 php 文件中检索一些标题数据（主标题，每个标题都有子标题）。

我收到的数据工作正常，但是当我想在 jquery（移动）中生成一个可折叠集时，它没有显示漂亮的主题......只是纯文本？！

这是我的 HTML 文件：

```
<div data-role="collapsible-set" data-content-theme="d" id="headlinegroup"> 
```

这是我的 javascript 文件：

```
$.ajax({
   type: "POST",
   url: "headline_getter.php",
   dataType: 'json',
   cache: false,
   success: function(data1){
   console.log ("debug 2");

   var i = 0;

   var $elements = '';
   $.each(data1[i].main, function() {
          console.log ("debug 3 ");

          $elements += ($('div[data-role=collapsible-set]#headlinegroup').append('<div data-role="collapsible"><h3>' + data1[i].main + '</h3><div data-role="fieldcontain"><fieldset data-role="controlgroup" id="headlinegroup'+[i]+'">'));
          var j = 0;
          $.each(data1[i].sub, function() {
                 console.log ("debug 4");

                 $elements += ('<label><input type="checkbox" name="headlines[]" data-mini="true" value="' + data1[i].mid[j] + '"/>' + data1[i].sub[j] + '</label>');

                 j++;

                 });

        $elements += ('</fieldset></div></div>');
        $elements.collapsible();

          i++;

          }); 
   }
   }); 
```

我真的不知道问题出在哪里。我在stackoverflow上阅读了一些线程并添加了`.collapsible`属性，但它不起作用......只有纯文本。

提前致谢。最好的问候，约翰。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T12:54:53.470

您是否尝试在附加`.trigger('create')`的每个元素的末尾添加？

# audio - FFMPEG 从音频到视频产生更清晰的图像

> ID：10659913
> 
> 赞同：1
> 
> 时间：2012-05-18T21:21:20.473
> 
> 标签：audio, ffmpeg, video-encoding

我正在使用 ffmpeg 通过使用 loop_input 命令创建视频文件，并创建一个 flv 文件作为包装器，然后将其导出为 mp4。出于某种原因，当视频播放图像时，随着时间的推移图像变得清晰，它开始变得真正像素化。我需要做些什么来保持循环期间的质量或其他任何有帮助的地方吗？

这是我的视频输出参数，不是整行。

```
ffmpeg -loop_input -f image2 -i myimage.jpg -r 20 -g 20 -vcodec flv 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T02:14:22.090

啊，感谢这篇文章，我明白了我的问题所在。

[图像序列到视频质量](https://stackoverflow.com/questions/3158235/image-sequence-to-video-quality)

我忘了添加比特率。我习惯于仅在仅处理视频时设置比特率，但感觉我正在将其转换为视频，当然它仍然需要它，否则它会猜测并且它会非常低。我使用了 -b 1000k，图像看起来很棒。

# gcc - ARM 的 gcc 代码源上的 memcpy

> ID：10659914
> 
> 赞同：2
> 
> 时间：2012-05-18T21:21:21.980
> 
> 标签：gcc, alignment, memcpy

我使用 arm 代码源 (arm-none-eabi-gcc) 编译了我的代码（我认为是精简版）。

我在函数中定义了一个结构变量，然后做一个 memcpy

```
typedef struct  {
  char        src[6];           
  char        dst[6];          
  uint16_t    a;          
  uint16_t    b;    
  uint32_t    c;       
  uint16_t    d;       
} Info_t;

Info_t Info;

    memcpy(Info.src, src, sizeof(Info.src));
    memcpy(Info.dst, dst, sizeof(Info.dst)); 
```

第一个 memcpy 通过，但第二个导致中止。

我听说 gcc 优化了 memcpy 并导致非对齐的结构访问？

我尝试将 struct 变量与单词边界等对齐。但它不起作用。

谁能提供有关 gcc 的 memcpy 和对齐问题的更多详细信息。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T21:33:28.993

据我了解，ARM 中的 memcopy() 问题与编译器对优化实现的使用有关。

“在许多情况下，当编译对 memcpy() 的调用时，ARM C 编译器将生成对专门的、优化的库函数的调用。自 RVCT 2.1 以来，这些专门的函数是 ARM 体系结构的 ABI (AEABI) 的一部分，并且包括：

*   __aeabi_memcpy

此函数与 ANSI C memcpy 相同，只是返回值为 void。

*   __aeabi_memcpy4

该功能与__aeabi_memcpy 相同；但可以假设指针是 4 字节对齐的。

*   __aeabi_memcpy8

此函数与 __aeabi_memcpy 相同，但可能假定指针是 8 字节对齐的。”

详细信息可以在这里找到： http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.faqs/ [ka3934.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.faqs/ka3934.html)

# sql-server - 是否可以使用 Haskell 和 Linux 连接到 SqlServer (MSSQL)？

> ID：10659915
> 
> 赞同：6
> 
> 时间：2012-05-18T21:21:26.757
> 
> 标签：sql-server, linux, haskell

我不清楚是否有人已经/成功地从 Haskell 和 Linux 连接到 MSSQL。我找到了类似[这个 windows 指南](http://www.haskell.org/haskellwiki/HDBC-ODBC_under_Windows)的东西，但没有找到 Linux 的希望。有人对此有任何见解吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-18T21:36:06.170

HDBC[库](http://hackage.haskell.org/package/HDBC)允许您连接到任何支持[ODBC](http://en.wikipedia.org/wiki/ODBC)的数据库，我很确定 Sql-Server 可以。

# intellij-idea - 使用 Gosu 0.9-14，我需要下载它，还是我的 IntelliJ 插件会自动拉取更新？

> ID：10659933
> 
> 赞同：2
> 
> 时间：2012-05-18T21:23:30.553
> 
> 标签：intellij-idea, gosu

如果我没记错的话，IJ 插件使用 Maven 来解决有关 Gosu 的问题。我需要手动执行任何操作，还是 IJ 插件会自动更新 Maven 依赖项并为我获取最新版本的 Gosu？

如果是这样，是否有一种简单的方法来验证我是否获得了更新版本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T21:31:02.830

IJ 插件不使用 Maven。如果我们发布了 IJ 插件需要合并的新版本的 Gosu，我们将在 JetBrains 插件存储库上发布该插件的新版本。

对于 Gosu 的 0.9-14 版本，语言没有变化，所以我们不会更新插件。

# javascript - Gnome-shell 扩展。使用窗户

> ID：10659937
> 
> 赞同：1
> 
> 时间：2012-05-18T21:24:00.397
> 
> 标签：javascript, gnome, gnome-shell, gnome-shell-extensions

如何以编程方式切换窗口？我的意思是像 Alt+Tab 一样，但没有任何标签或其他东西。

我试图查看文档，但它对我来说太复杂了（你可以说不要这样做，但我在一个好的文档的帮助下学习了动作脚本，虽然一开始并不知道）。而且我不明白到底该往哪里看，因为有很多库和一些叫做 GObject-Introspection 的东西。当我试图在那里寻找东西时，我会迷失在那里，因为我真的不知道我在寻找什么。这是一个圆圈））。

我也试过看其他扩展的源代码，但比文档还要复杂。听起来我很笨，但我可以赶上它。

那么，有谁知道如何处理切换窗口，我可以在哪里找到我需要的文档或其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:44:48.173

您似乎正在寻找的图书馆是[libwnck](http://developer.gnome.org/libwnck/stable/)。该库是用 C 编写的。但是，您可以使用不同的语言访问它们，例如用于扩展的 JavaScript。这是通过 GObject-Instrospection 完成的，此时您不需要深入了解（只是 GObject-Introspection 是允许您使用不同语言的库的粘合剂）。前缀通常会根据语言而变化。

出于您的特定目的，您可能想看看[devilpie2](https://github.com/gusnan/devilspie2)。

# database-design - 数据库设计：与租户建立时间

> ID：10659946
> 
> 赞同：0
> 
> 时间：2012-05-18T21:25:03.227
> 
> 标签：database-design, database-schema

我正在努力设计一个代表建筑物及其租户开放时间的数据库模式。以下是详细信息/要求：

建筑物：

*   一般来说，每个建筑物的正常营业时间取决于季节（夏季、冬季等）
*   每栋楼都有不同的营业时间。
*   许多节假日、活动等将覆盖正常营业时间

租户：

*   租户在建筑物内经营，因此应受到建筑时间的限制。
*   正常时间也取决于季节，但与其建筑物的季节性时间不同。
*   每个租户有不同的时间

理想情况下，我希望能够查询以下内容：

*   建筑物或租户现在是否开放
*   今天的建筑时间是几点
*   未来 X 天的建筑时间是多少

到目前为止，我的（未完成的）工作是这三个表，但我仍然无法创建一个有效的解决方案。

```
[Season]
id
building_id
title
start_date
end_date

[Schedule]
id
season_id
day_of_week (0-6)
open_time
close_time

[Override]
id
schedule_id
date
is_closed
is_holiday 
```

* * *

感谢大家的时间和意见。所有答案都在开发/完善解决方案。Catcall 存储单个日期的想法对我们来说是最容易开发模型和管理/管理界面的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T12:03:43.263

你的桌子设计有了一个很好的开始。

**建造时间*（到目前为止你的模型）***

`[Override]`可以调整您的表以简化数据维护和查询。

假设您的业务规则是覆盖总是针对（一整天）一天，那么您希望在季节级别而不是计划级别进行覆盖。这使您不必担心一周中的哪一天会发生覆盖。通过在覆盖表中包含 start_date 和 end_date 列，您也可以更轻松地进行概括。此外，您的标志 ( `is_closed`, `is_holiday`) 可以简化为单个枚举列 ( `closed_reason`)。这将允许您在将来添加新的原因，而无需更改您的架构和查询。

**租户时间*（下一步）***

您的租户计划模型应该与您的建筑时间相似。根据您预计租户小时数与建筑小时数不同的频率，您可以在租户表上包含一个标志来指示`uses_building_schedule`。这将表明没有租户计划条目。

对于时间表与他们占用的建筑物不同的租户，只需使用相同的季节/时间表/覆盖结构。

由于您有一条规定租户工时必须受建筑工时限制的规则，因此您需要添加程序代码来强制执行此规则。我会在查询时进行，而不是在数据维护时进行。换句话说，当查询租户的营业时间时，我会查看他们是否有营业时间，然后将这些营业时间限制为建筑营业时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T14:08:10.657

我不确定它在多大程度上符合您的要求，但让我提供一个想法：

![在此处输入图像描述](../Images/3c29c80d49097b40b8d498dcbc5f89ed.png)

该模型具有以下特点：

*   建筑物或租户有时间表（可能会或可能不会与其他建筑物/租户共享）。
*   时间表是一组间隔。
*   每个间隔在计划中都有一个优先级：具有较高优先级的间隔“覆盖”具有较低优先级的间隔。看看 SCHEDULE_ITEM 是如何受到约束的，因此没有时间间隔可以两次属于同一个计划，并且相对于属于同一计划的其他时间间隔不能具有不明确的优先级（唯一约束`U1`）。
*   可以在时间表之间共享间隔，例如，您可以设置涵盖年度事件的单个间隔，然后在多个时间表之间共享。如果事件发生变化，您只需在一处进行更新。

这个模型的问题在于它的处理量很大，并且 DBMS 无法帮助您避免数据中出现一些无意义的情况（您需要在应用程序级别执行此操作）。另一方面，它非常灵活和强大。

在给定日期查找建筑物或租户的小时数并非易事：您需要按照优先级的顺序将时间表下的所有时间间隔相交。要找到给定租户的小时数，您需要先找到她的建筑物的小时数，然后将它们相交。

### 例子

一个时间表...

*   全年上午 9 点至下午 5 点，
*   除了从 5 月到 10 月的上午 8 点到下午 6 点，
*   周六上午 9 点至下午 1 点除外，
*   周日没有时间
*   1 月 1 日、7 月 4 日和 12 月 25 日不营业

...可以这样表示：

```
SCHEDULE_ID     PRIORITY    MONTH_START     MONTH_END       DAY_OF_MONTH_START      DAY_OF_MONTH_END        DAY_OF_WEEK_START       DAY_OF_WEEK_END     HOUR_START      HOUR_END
1               1           NULL            NULL            NULL                    NULL                    NULL                    NULL                9 AM            5 PM
1               2           5               10              NULL                    NULL                    NULL                    NULL                8 AM            6 PM
1               3           NULL            NULL            NULL                    NULL                    6                       6                   9 AM            1 PM
1               4           NULL            NULL            NULL                    NULL                    7                       7                   NULL            NULL
1               5           1               1               1                       1                       NULL                    NULL                NULL            NULL
1               6           7               7               4                       4                       NULL                    NULL                NULL            NULL
1               7           12              12              25                      25                      NULL                    NULL                NULL            NULL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T01:41:07.303

让我们以不同的方式看待这个问题。建筑物和租户的营业时间并没有本质上的不同。也就是说，价值可能会有所不同，但建筑物是否开放的想法与租户是否开放并没有本质上的不同。我创建了一个单独的模式“小时”来实现这个想法。

```
-- Essentially a supertype, but I couldn't think of a good noun to 
-- describe it.  So I named the table "x".  It holds all the attributes 
-- common to both buildings and tenants. (That is, not very much.)
--
create table hours.x (
  x_id integer primary key,
  x_name varchar(35) not null,
  x_type char(1) check (x_type in ('b','t')),
  unique (x_id, x_type)
);

insert into hours.x values 
(1, 'First building', 'b'),
(2, 'Second building', 'b'),
(3, 'First tenant', 't'),
(4, 'Second tenant', 't'),
(5, 'Third tenant', 't');

create table hours.buildings (
  bldg_id integer primary key,
  x_type char(1) not null default 'b' check (x_type = 'b'),
  foreign key (bldg_id, x_type) references hours.x (x_id, x_type),
  other_columns char(1) not null default 'x'
);

insert into hours.buildings (bldg_id) values 
(1), (2);

create table hours.tenants (
  tenant_id integer primary key,
  x_type char(1) not null default 't' check (x_type = 't'),
  foreign key (tenant_id, x_type) references hours.x (x_id, x_type),
  bldg_id integer not null references hours.buildings (bldg_id),
  other_columns char(1) not null default 'x'
);

insert into hours.tenants (tenant_id, bldg_id) values
(3, 1), (4, 1), (5, 2);

-- Operating hours records a half open interval [opening_time, closing_time).
-- If a queried time matches the opening time, the building or tenant is open.
-- But if it matches the closing time, it's *not* open.  Examples later.
create table hours.op_hours (
  x_id integer not null references hours.x (x_id),
  opening_time timestamp not null,
  closing_time timestamp not null,
  check (opening_time < closing_time),
  check (
    -- Open and close on the same date,
    ( opening_time::date = closing_time::date ) or
    -- or close at midnight following the opening.
    ( 
      (opening_time::date + interval '1' day = closing_time::date) and 
      (cast(closing_time as time) = '00:00')
    )
  )
);

insert into hours.op_hours values
-- Bldg 1 is normally Mon-Sat, 9:00 to 5:00\. Closed on Jan 1, holiday
(1, '2012-01-02 09:00', '2012-01-02 17:00'),
(1, '2012-01-03 09:00', '2012-01-03 17:00'),
(1, '2012-01-04 09:00', '2012-01-04 17:00'),
(1, '2012-01-05 09:00', '2012-01-05 17:00'),
(1, '2012-01-06 09:00', '2012-01-06 17:00'),
(1, '2012-01-07 09:00', '2012-01-07 17:00'),
-- Closed on Jan 8, a Sunday.
(1, '2012-01-09 09:00', '2012-01-09 17:00'),

-- Bldg 2 is normally Mon-Fri, 7:30 to midnight.
(2, '2012-01-02 07:30', '2012-01-03 00:00'),
(2, '2012-01-03 07:30', '2012-01-04 00:00'),
(2, '2012-01-04 07:30', '2012-01-05 00:00'),
(2, '2012-01-05 07:30', '2012-01-06 00:00'),
(2, '2012-01-06 07:30', '2012-01-07 00:00'),
-- Closed on Jan 7 and 8, weekend.
(2, '2012-01-09 07:30', '2012-01-10 00:00'),

-- "First" tenant is open 9:00 to noon and 1:00 to 4:00, Mon-Fri.
(3, '2012-01-02 09:00', '2012-01-02 12:00'),
(3, '2012-01-03 09:00', '2012-01-03 12:00'),
(3, '2012-01-04 09:00', '2012-01-04 12:00'),
(3, '2012-01-05 09:00', '2012-01-05 12:00'),
(3, '2012-01-06 09:00', '2012-01-06 12:00'),
(3, '2012-01-02 13:00', '2012-01-02 16:00'),
(3, '2012-01-03 13:00', '2012-01-03 16:00'),
(3, '2012-01-04 13:00', '2012-01-04 16:00'),
(3, '2012-01-05 13:00', '2012-01-05 16:00'),
(3, '2012-01-06 13:00', '2012-01-06 16:00'),

-- "Second" tenant is open when the building is open.
(4, '2012-01-02 09:00', '2012-01-02 17:00'),
(4, '2012-01-03 09:00', '2012-01-03 17:00'),
(4, '2012-01-04 09:00', '2012-01-04 17:00'),
(4, '2012-01-05 09:00', '2012-01-05 17:00'),
(4, '2012-01-06 09:00', '2012-01-06 17:00'),
(4, '2012-01-07 09:00', '2012-01-07 17:00'),
-- Closed on Jan 8, a Sunday.
(4, '2012-01-09 09:00', '2012-01-09 17:00'),

-- "Third" tenant is open Mon-Thu 7:30 to 9:30, Fri until midnight.
(5, '2012-01-02 07:30', '2012-01-02 21:30'),
(5, '2012-01-03 07:30', '2012-01-03 21:30'),
(5, '2012-01-04 07:30', '2012-01-04 21:30'),
(5, '2012-01-05 07:30', '2012-01-05 21:30'),
(5, '2012-01-06 07:30', '2012-01-07 00:00'),
-- Closed on Jan 7 and 8, weekend.
(5, '2012-01-09 07:30', '2012-01-09 21:30'); 
```

应该清楚的是，这种记录每个建筑物和每个租户每天的营业时间的结构将适应季节、假期、事件等的任何定义。可以使用相当简单的存储过程生成默认数据。而且所需的查询非常简单。（能够看到一些东西并*看到*它是正确的，这是很有价值的。）

```
-- Is building 1 open at 9:00 am on Jan 3? (Queries for tenants are essentially
-- identical. Returns the id number if it's open, but that could be massaged 
-- into an "is_open" derived column with Boolean values.)
select x_id
from hours.op_hours
where x_id = 1
  and opening_time <= '2012-01-03 09:00' 
  and '2012-01-03 09:00' < closing_time;

-- How about on Jan 1? (Returns an empty set if closed. See above.)
select x_id
from hours.op_hours
where x_id = 1
  and opening_time <= '2012-01-01 09:00' 
  and '2012-01-01 09:00' < closing_time;

-- Which tenants, regardless of building, are open on Jan 4 at 9:00 am?
select op_hours.x_id
from hours.op_hours
inner join hours.tenants on hours.tenants.tenant_id = hours.op_hours.x_id 
where opening_time <= '2012-01-04 09:00' 
  and '2012-01-04 09:00' < closing_time; 
```

请注意，这些查询中的每一个都在半开区间上运行。您不能使用 BETWEEN 运算符，因为它在闭合区间上运行。

这种结构*不能*满足哪些要求？

*   租户营业时间必须是建筑物营业时间的一个子集。除非您的 dbms 支持断言，否则无法以声明方式完成。可以用数据库中的程序代码来完成。

# c# - 连接到 IO 模块时出现套接字错误 10060

> ID：10659952
> 
> 赞同：0
> 
> 时间：2012-05-18T21:25:48.417
> 
> 标签：c#, .net, sockets, tcp, socketexception

我正在使用 Modbus 协议通过以太网 TCP 连接在 PC 和 IO 模块之间进行通信。我正在使用 System.Net.Sockets.Socket 类来打开和发送/接收数据。起初一切都很好。一段时间后（5 到 10 小时），当程序调用 Socket.Connect 方法时，我收到以下 SocketException 错误代码 10060。我收到异常后尝试重新连接，但抛出了相同的异常。

*连接尝试失败，因为连接的一方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应*

在正常执行期间（在抛出异常之前的 5-10 小时内）我通过关闭旧套接字并创建新套接字来创建新的 tcp 连接。这做了很多次。每次重新连接时，我都会检查 tcp 连接的数量，它保持不变。我多次使用以下方法进行连接，其中 SocketWrapper 是我用来连接到模块和发送/接收数据的类。

我该如何调查这个问题？

```
class SocketWrapper
{
    IPAddress m_ipAddr;
    Socket m_Socket;
    int m_port;

    public bool Connect(string i_szIPAddr, ProtocolType protocolType)
    {
        try
        {
            this.Disconnect();
            this.m_ipAddr = IPAddress.Parse(i_szIPAddr);

            this.m_port = 0x1f6;
            IPEndPoint remoteEP = new IPEndPoint(this.m_ipAddr, this.m_port);
            this.m_socket = new Socket(remoteEP.AddressFamily, SocketType.Stream, ProtocolType.Tcp);
            this.m_socket.Connect(remoteEP);
            return true;
        }
        catch
        {
            return false;
        }
    }

    public void Disconnect()
    {
        if (this.m_socket != null)
        {
            if(this.m_socket.Connected)
                this.m_socket.Shutdown(SocketShutdown.Both);

            this.m_socket.Close();
            this.m_socket = null;
        }
    }
} 
```

# android - Android 已弃用屏幕尺寸？

> ID：10659954
> 
> 赞同：17
> 
> 时间：2012-05-18T21:26:05.237
> 
> 标签：android, size, deprecated

嘿，我需要在我的应用程序中获取屏幕的宽度。该应用程序将在 2.1 及更高版本上运行。我已经将它设置为如下所示。该方法已弃用，我可能应该使用 getSize 或其他方式。但问题是：这是否适用于 3.0+ 和 4.0+ 等 android 版本，还是会使应用程序崩溃。我之前在一个线程中使用过一个不推荐使用的方法，它使应用程序在冰淇淋设备上崩溃。下面的方法会起作用吗？

```
 Display display = getWindowManager().getDefaultDisplay(); 
     int width = display.getWidth();
     int height = display.getHeight(); 
```

编辑：

我已经尝试过 getSize 但我没有让它工作：

```
 Display display = getWindowManager().getDefaultDisplay();
      Point size = new Point();
      display.getSize(size);
      int width = size.x;
      int height = size.y; 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-18T22:11:51.143

我不确定，但这可能有效：

```
if (android.os.Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB_MR2) {
    Display display = getWindowManager().getDefaultDisplay();
    int width = display.getWidth();
    int height = display.getHeight();
} else {
    Display display = getWindowManager().getDefaultDisplay();
    Point size = new Point();
    display.getSize(size);
    int width = size.x;
    int height = size.y;
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-18T22:04:50.370

我不知道这些已弃用的方法是否适用于 Android 3 和 4。最好的判断方法是在模拟器上进行测试。

但是，为了获得最大兼容性，这里最安全的方法是尝试使用反射的一种方法，然后回退到另一种。本质上，您可以制作自己的版本`getSize()`，不会失败。我无法测试这个 atm，但它可能看起来像这样：

```
void overrideGetSize(Display display, Point outSize) {
    try {
      // test for new method to trigger exception
      Class pointClass = Class.forName("android.graphics.Point");
      Method newGetSize = Display.class.getMethod("getSize", new Class[]{ pointClass });

      // no exception, so new method is available, just use it
      newGetSize.invoke(display, outSize);
    } catch(NoSuchMethodException ex) {
      // new method is not available, use the old ones
      outSize.x = display.getWidth();
      outSize.y = display.getHeight();
    }
} 
```

然后当然只是用类似的东西来调用它

```
Display display = getWindowManager().getDefaultDisplay();
Point size = new Point();
overrideGetSize(display, size); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T22:03:16.657

我已经扩展了 Steve 的有用代码，这样 Eclipse 就不会给出任何警告或错误，并且我还对其进行了轻微的重组。由于 Point 类自 API 级别 1 起就存在，我没有看到通过反射创建它有多大好处。

```
 final static String mTAG = "MYTAG";

  // Cope with deprecated getWidth() and getHeight() methods
  Point getSize(Display xiDisplay) 
  {
    Point outSize = new Point();
    boolean sizeFound = false;

    try 
    {
      // Test if the new getSize() method is available
      Method newGetSize = 
        Display.class.getMethod("getSize", new Class[] { Point.class });

      // No exception, so the new method is available
      Log.d(mTAG, "Use getSize to find screen size");
      newGetSize.invoke(xiDisplay, outSize);
      sizeFound = true;
      Log.d(mTAG, "Screen size is " + outSize.x + " x " + outSize.y);
    } 
    catch (NoSuchMethodException ex) 
    {
      // This is the failure I expect when the deprecated APIs are not available
      Log.d(mTAG, "getSize not available - NoSuchMethodException");
    }  
    catch (InvocationTargetException e) 
    {
      Log.w(mTAG, "getSize not available - InvocationTargetException");
    } 
    catch (IllegalArgumentException e) 
    {
      Log.w(mTAG, "getSize not available - IllegalArgumentException");
    } 
    catch (IllegalAccessException e) 
    {
      Log.w(mTAG, "getSize not available - IllegalAccessException");
    }

    if (!sizeFound)
    {
      Log.i(mTAG, "Used deprecated methods as getSize not available");
      outSize = new Point(xiDisplay.getWidth(), xiDisplay.getHeight());
    }

    return outSize;
  } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-23T13:07:32.047

根据[https://stackoverflow.com/a/1016941/2914140](https://stackoverflow.com/a/1016941/2914140)：

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);
int width = metrics.widthPixels;
int height = metrics.heightPixels; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T21:30:42.910

Display 的新函数[getSize()](http://developer.android.com/reference/android/view/Display.html#getSize%28android.graphics.Point%29)有什么问题？将 Point 对象转换为您需要的宽度和高度值真的很容易。

# javascript - 如何为 <%= link_to %> 正确使用转义 javascript？

> ID：10659957
> 
> 赞同：0
> 
> 时间：2012-05-18T21:26:21.190
> 
> 标签：javascript, jquery, ruby-on-rails, ruby

我有一个带有以下代码的 js.erb 文件，但我似乎无法正确转义 link_to 辅助方法的 javascript。我认为这与 Edit 周围的引号有关。

```
$('#microposts').prepend('<div class="micropost"><h3>' +  "<%= j @user.email %>" + '</h3>    <h3>Posted ' + "<%= j time_ago_in_words(@micropost.created_at) %>" + ' ago</h3><p>' +  "<%= j     @micropost.content %>" + '</p><p>' + "<%= j link_to "Edit",      edit_user_micropost_path(@micropost) %>" '</p></div>');
$('#new_micropost')[0].reset();
$('#micropost_count').html('<%= Micropost.count %>'); 
```

在旁注中，我将如何制作动画？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T21:56:22.597

这可能不是您正在寻找的答案，但我会谦虚地建议这不是正确的方法，而正确逃避它的困难只是该方法过于复杂的症状。

我知道您在这里所做的实际上可能是课程的标准（根据一些 Rails 开发人员的说法），但我认为这是效率低下，更糟糕的是，太复杂（因此难以维护）。大概已经进行了一些 AJAX 调用并接收到这个动态生成的响应，其中包含用 JavaScript 实现的命令（执行某些操作的命令；在这种情况下，是修改 DOM 的命令）。为什么不在页面最初加载时加载一个静态的 JavaScript 块，它知道如何获取一小段 DATA 并适当地呈现它？

然后你要做的是返回 JSON 而不是命令式的脚本块。您的静态 JavaScript 方法将通过以下方式修改 DOM：

1.  复制嵌入该页面的隐藏的易于维护的 HTML 片段。
2.  在副本上进行查找/替换以使用您从 AJAX 调用获得的 JSON 结构中的数据“填充空白”。
3.  将新的 HTML 片段添加到集合之前。

认为这会更简单，维护更容易。

# flash - Flex Mobile View 组件访问主应用程序

> ID：10659958
> 
> 赞同：0
> 
> 时间：2012-05-18T21:26:22.197
> 
> 标签：flash, apache-flex, flex4, adobe, flex4.6

Flex Mobile 4.6 中是否有一种方法可以从`<s:View>`组件中访问主应用程序？假设我的程序如下所示：

主要应用：

```
<s:TabbedViewNavigatorApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                  xmlns:s="library://ns.adobe.com/flex/spark"
                  creationComplete="databaseConnection(event)">

  <s:ViewNavigator id="tasks" width="100%" height="100%"
                       label="Tasks" firstView="views.TasksView"
                       title="Tasks" icon="@Embed('assets/icons/tasks.png')">
  </s:ViewNavigator>
</s:TabbedViewNavigatorApplication> 
```

view.TasksView：

```
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark">

  <s:List left="0" right="0" top="0" bottom="0"
     dataProvider="{taskData}" itemRenderer="renderers.TaskListRenderer"/>
</s:View> 
```

假设在主应用程序中有一个变量，我想在`view.TasksView`. 我怎样才能做到这一点？

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T21:31:49.723

[弹性全球](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/FlexGlobals.html)。[顶级应用](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/FlexGlobals.html#topLevelApplication)

在你的情况下：

```
var app : TabbedViewNavigatorApplication = FlexGlobals.topLevelApplication as TabbedViewNavigatorApplication 
```

当然，访问顶级应用程序是封装的一个很好的突破，通常不推荐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-21T10:42:38.677

最好使用“parentApplication”属性。例如，如果您想从其他视图禁用视图“vsetting”的选项卡按钮：

```
parentApplication.vsetting.enabled = false; 
```

# java - SQLite 中的 Java PreparedStatement.executeBatch() 不起作用

> ID：10659961
> 
> 赞同：3
> 
> 时间：2012-05-18T21:26:39.263
> 
> 标签：java, sqlite, prepared-statement

我有以下方法。注释的方法 saveOrUpdateToDatabase 执行得很好，但我想使用 executeBatch。我错过了什么？接收 executeBatch() 结果的 int[]r 始终为空...

```
public boolean saveOrUpdate(MonitoredData mData) {
        try {
            PreparedStatement prep;
            String timeID = this.getTimeLastRowID();

            for (CpuData o : mData.getCpu()) {
                prep = this.conn.prepareStatement(String.format(
                        INSERT_CPU_USAGE, this.nodeID, timeID, o.toString()));
                prep.addBatch();
                // saveOrUpdateToDatabase(String.format(INSERT_CPU_USAGE,
                // this.nodeID, timeID, o.toString()));
            }
            for (DiskData o : mData.getDisk()) {
                prep = this.conn.prepareStatement(String.format(
                        INSERT_DISK_USAGE, this.nodeID, timeID, o.toString()));
                prep.addBatch();
                // saveOrUpdateToDatabase(String.format(INSERT_DISK_USAGE,
                // this.nodeID, timeID, o.toString()));

            }
            for (NetworkData o : mData.getNet()) {
                prep = this.conn.prepareStatement(String
                        .format(INSERT_NETWORK_USAGE, this.nodeID, timeID, o
                                .toString()));
                prep.addBatch();
                // saveOrUpdateToDatabase(String.format(INSERT_NETWORK_USAGE,
                // this.nodeID, timeID, o.toString()));

            }

            prep = this.conn.prepareStatement(String.format(
                    INSERT_MEMORY_USAGE, this.nodeID, timeID, mData.getMem()
                            .toString()));
            // saveOrUpdateToDatabase(String.format(INSERT_MEMORY_USAGE,
            // this.nodeID, timeID, mData.getMem().toString()));

            conn.setAutoCommit(false);
            int[] r = prep.executeBatch();
            conn.setAutoCommit(true);

            return true;

        } catch (SQLException ex) {
            Logger.getLogger(HistoricalDatabase.class.getName()).log(
                    Level.SEVERE, null, ex);
        }
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T10:14:02.920

> 我错过了什么？接收 executeBatch() 结果的 int[]r 始终为空...

您使用的`addBatch()`方法不正确。在您的代码中，您正在执行以下操作：

```
for (CpuData o : mData.getCpu()) {
    // this is wrong, you can not prepare a new query each time
    prep = this.conn.prepareStatement(INSERT_CPU_USAGE);
    prep.setObject(1, this.nodeID);
    prep.addBatch();
} 
```

这每次都会*替换准备好的查询。*`prepareStatement(...)`您应该每批只调用一次。您应该执行以下操作。您将不得不更改您的插入语句以具有`?`参数：

```
PreparedStatement prep = conn.prepareStatement(INSERT_CPU_USAGE);
for (CpuData o : mData.getCpu()) {
    prep.setObject(1, this.nodeID);
    prep.setObject(2, timeID);
    prep.setObject(3, o);
    prep.addBatch();
}
prep.executeBatch(); 
```

请注意，只`prepareStatement()`使用了一个呼叫。其中包含`?`SQL 参数实体，然后在循环中使用`prep.setString(1, ...)`. 当批处理准备好执行时，您调用`prep.executeBatch()`，但这并*没有*替换`prep`您正在执行的准备好的语句。

如果您尝试在同一批次中连续执行一系列*不同*的插入语句，那么您应该考虑关闭自动提交，执行您的语句，调用提交，然后重新打开自动提交。就像是：

```
conn.setAutoCommit(false);
// statements prepared and executed here
// maybe no need for batch operations
...
conn.commit();
conn.setAutoCommit(true); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-18T22:45:20.483

除了我写的评论，我会冒险给出答案。如果你尝试这样的事情怎么办：

```
public boolean saveOrUpdate(MonitoredData mData) {
    try {
        PreparedStatement prep;
        String timeID = this.getTimeLastRowID();
        conn.setAutoCommit(false);
        for (CpuData o : mData.getCpu()) {
            prep = this.conn.prepareStatement(INSERT_CPU_USAGE);
            prep.setObject(1, this.nodeID);
            prep.setObject(2, timeID);
            prep.setObject(3, o);
            prep.addBatch();
            // saveOrUpdateToDatabase(String.format(INSERT_CPU_USAGE,
            // this.nodeID, timeID, o.toString()));
        }
        prep.executeBatch();
        for (DiskData o : mData.getDisk()) {
            prep = this.conn.prepareStatement(INSERT_DISK_USAGE);
            prep.setObject(1, this.nodeID);
            prep.setObject(2, timeID);
            prep.setObject(3, o);
            prep.addBatch();
            // saveOrUpdateToDatabase(String.format(INSERT_DISK_USAGE,
            // this.nodeID, timeID, o.toString()));
        }
        prep.executeBatch();
        for (NetworkData o : mData.getNet()) {
            prep = this.conn.prepareStatement(INSERT_NETWORK_USAGE);
            prep.setObject(1, this.nodeID);
            prep.setObject(2, timeID);
            prep.setObject(3, o);
            prep.addBatch();
            // saveOrUpdateToDatabase(String.format(INSERT_NETWORK_USAGE,
            // this.nodeID, timeID, o.toString()));

        }
        prep.executeBatch();
        prep = this.conn.prepareStatement(INSERT_MEMORY_USAGE);
        prep.setObject(1, this.nodeID);
        prep.setObject(2, timeID);
        prep.setObject(3, o);
        prep.executeUpdate();
        // saveOrUpdateToDatabase(String.format(INSERT_MEMORY_USAGE,
        // this.nodeID, timeID, mData.getMem().toString()));

        conn.setAutoCommit(true);
        return true;

    } catch (SQLException ex) {
        Logger.getLogger(HistoricalDatabase.class.getName()).log(
                Level.SEVERE, null, ex);
    }
    return false;
} 
```

您可能需要修改常量中定义的那些 SQL 查询。

# google-maps-api-3 - google maps api v3 导出当前地图的 kml 文件

> ID：10659963
> 
> 赞同：6
> 
> 时间：2012-05-18T21:26:57.837
> 
> 标签：google-maps-api-3, export, kml

我的应用程序中有一个谷歌地图组件，允许用户绘制多边形、线条和标记。现在我想实现一个按钮，允许用户导出他/她在地图中绘制的东西的 kml 文件。

任何关于这样做的最佳方法的建议。

非常感谢您的评论和贡献

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T14:55:06.297

我将我的想法总结为在用户绘制时存储坐标，然后当单击“输出 KML”按钮时，格式化保存的坐标数据并将其放置在要复制的文本区域中（除非有办法提示下载？ ）。

下面是当用户完成一个绘图元素时我如何保存数据：

[http://jsfiddle.net/8bwG2/](http://jsfiddle.net/8bwG2/)

（我不知道检测编辑的好方法。）

首先，为每种绘图类型（线、多边形、标记）添加事件侦听器，以便在完成时触发。每种类型都需要一个单独的事件侦听器。这是折线的一个，每个侦听器都会返回刚刚完成的绘图元素的类型。

```
 google.maps.event.addDomListener(drawingManager, 'polylinecomplete', function(line) {
        path = line.getPath();
        document.getElementById("action").value += "#polyline\n";
        for(var i = 0; i < path.length; i++) {
          document.getElementById("action").value += path.getAt(i) + "\n";
        }
    }); 
```

我将坐标直接放入共享的文本区域，但它们应该放入数组变量的数组中，其中一个变量用于多边形，一个用于折线，一个用于标记。

从这些内部变量中读取时，将 Google Maps LatLngs 转换为 KML 格式 long,lat,altitude。您将不得不对每个元素的名称和描述进行创意。

最后，当请求 KML 时，循环遍历标记、线和多边形变量以生成 KML 格式的元素，例如`Point-coordinates, LineString, and Polygon-outerBoundaryIs`

# php - 是否可以通过带有 error_log() 的 SMTP 发送邮件？

> ID：10659967
> 
> 赞同：2
> 
> 时间：2012-05-18T21:27:11.690
> 
> 标签：php

我正在使用以下错误处理功能，`$admin_email`如果站点处于活动状态（`$live==TRUE`），它将通过电子邮件发送错误。我的主机现在需要 SMTP 身份验证。我是否正确假设我必须删除对 error_log() 的调用并使用 PEAR 邮件包或 PHPMailer 发送邮件？

```
// Create the error handler.
function my_error_handler ($e_number, $e_message, $e_file, $e_line, $e_vars) {

global $live, $admin_email;

// Build the error message.
$message = "An error occurred in script '$e_file' on line $e_line: \n<br />$e_message\n<br />";

// Add the date and time.
$message .= "Date/Time: " . date('n-j-Y H:i:s') . "\n<br />";

// Append $e_vars to the $message.
$message .= "<pre>" . print_r ($e_vars, 1) . "</pre>\n<br />";

if ($live) { // Don't show the specific error.

    echo('<p>sending email</p>');

    error_log ($message, 1, $admin_email); // Send email.

    // Only print an error message if the error isn't a notice.
    if ($e_number != E_NOTICE) {
        echo '<div id="Error">A system error occurred. An administrator has been notified. We apologize for the inconvenience.</div><br />';
    }

} else { // Development (print the error).
    echo '<div id="Error">' . $message . '</div><br />';
}

return FALSE;

} // End of my_error_handler() definition. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T22:32:56.527

邮件功能不使用授权。我认为在 Windows 上，您可以在 php.ini 文件中将 php 设置为默认使用 smtp。

# c# - 异常“指定的命名连接...与 EntityClient 提供程序，或无效。” 在加载 WPF 设计器时

> ID：10659970
> 
> 赞同：0
> 
> 时间：2012-05-18T21:28:02.303
> 
> 标签：c#, wpf, entity-framework

我正在使用实体框架编写一个 WPF 应用程序，并且我有两个控件，Window 和 UserControl，它们嵌入在 Window 中。UserControl 设计器工作正常，但 Window 设计器返回异常：

```
The specified named connection is either not found in the configuration, not
intended to be used with the EntityClient provider, or not valid. 
```

UserControl 代码隐藏中的异常点在我创建实体实例的位置。

```
public partial class Table : UserControl
{
    private MyEntities entity;
    public Table()
    {

        InitializeComponent();
        entity = new MyEntities();
    }
} 
```

当我运行该应用程序时，一切正常。

**编辑**
我在这里找到了解决方案：[WPF 设计器不会加载实体框架](https://stackoverflow.com/questions/455214/wpf-designer-wont-load-with-entity-framework)，虽然我使用的是 VS2010，前段时间这种方法（在同一个地方创建实体的实例）工作得很好，我不知道是什么坏了它下来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T14:49:28.693

问题很可能在于设计模式中的初始化调用，这就是代码运行良好的原因。

您的实体应基于两个文件：FileName.edmx 和 FileName.Designer.vb（如果使用 C#，则为 .cs）。在设计模式下，Window 会尝试创建 UserControl 的新实例，而后者又会创建 Entity 的新实例（调用 New）。但是，在设计模式下，VS 不会查看保存实体连接字符串的 App.Config 文件（它看起来是调试模式）。因此，当 VS 尝试创建新实体时，实体初始化调用中的一种方法会失败，因为它接收到 Null 连接字符串，因此您会收到错误消息。

一个快速而肮脏的解决方法是手动将连接字符串放入 FileName.Designer.vb (FileName.Designer.cs) 中。如果您打开该文件（您可能必须在解决方案资源管理器中单击“显示所有文件”），在构造函数区域中应该有，

```
Public Sub New()
MyBase.New("name=Entity"," "Entity")
End Sub 
```

或在 C# 中

```
public New()
    {
        MyBase.New("name=Entity"," "Entity");
    } 
```

如果您将调用的第一个参数替换为 App.Config 中的连接字符串以获取 MyBase.New(ConnectionStringFromAppConfig," "Entity")，则一切正常。您可能会遇到的一个问题是类似于“不支持关键字”的错误消息：'数据源'。”要解决此问题，您需要将复制的所有连接字符串中的 " 替换为单引号。 " 是 XAML 编码单引号的方式。

希望有帮助。如果有人要提供更优雅的解决方案 - 我将不胜感激。

# javascript - Uncaught TypeError：无法读取未定义的属性

> ID：10659971
> 
> 赞同：1
> 
> 时间：2012-05-18T21:28:10.537
> 
> 标签：javascript, jquery, ajax

我使用 ajax 创建了一个动态内容：

```
$(function(){
   $('#loadFeed').bind('click',function(){ 
        $.getJSON('getData.php', function(json) {
            var output="<ul id='feedsList'>";

            for(var i=json.posts.length-1;i>=json.posts.length-31;i--){
                output+="<li class='post'>";
                output+="<div class='text' id='"+json.posts[i].id+"'>"+json.posts[i].shortmsg+"</div>";         
                output+="</li>";
            }
            output+="</ul>"
            $(output).appendTo('.posts');
    });
  });
}); 
```

html代码：

```
<div class="posts">
    <!--dynamic content here-->
</div> 
```

我想单击短文本，然后文本将展开以显示整个文本。实现它的代码是：

```
<script>
$(".posts").on("click", ".text",function(){
        var thisID = this.id; 
        $.getJSON('getData.php', function(json) {  
            alert(thisID);
            $(this).replaceWith("<div class='long_text'>"+json.posts[thisID-1].msg+"<div>"); 
        });
});
</script> 
```

错误是

```
Uncaught TypeError: Cannot read property 'msg' of undefined . 
```

我不知道为什么它将味精识别为未定义。我在 getData.php 中定义了 msg，就像我对 id 所做的一样，shortmsg。这是我的getData.php：

```
<?php

        // Connecting, selecting database
        $link = mysql_connect('localhost', 'root')
            or die('Could not connect: ' . mysql_error());
        mysql_select_db('my_db') or die('Could not select database');

        // Get Data
        $query = 'SELECT * FROM feed ORDER BY feed.userID ASC';

        $result = mysql_query($query) or die('Query failed: ' . mysql_error());

        //create json format text from posts
        $json=array();
        while($row=mysql_fetch_array($result)){
            $post=array('id'=>$row['userID'],'avatar'=>$row['avatar'],'postType'=>$row['postType'],'msg'=>$row['msg'],'shortmsg'=>$row['shortmsg'],'title'=>$row['title'],'type'=>$row['type'],'pic'=>$row['pic'],'link'=>$row['link']);
            array_push($json,$post);
        }

        //display it to the user
        header('Content-type: application/json');
        echo "{\"posts\":".json_encode($json)."}";

        // Closing connection
        mysql_close($link);

        return $row;

?> 
```

谢谢！

# android - 如何使用 NDK 合并两个或多个位图？

> ID：10659974
> 
> 赞同：0
> 
> 时间：2012-05-18T21:28:22.053
> 
> 标签：android, android-ndk

我有一个绘画应用程序，它在一些设备上很快就耗尽了内存...... :(

问题是我有屏幕大小的位图，并且我将 2 或 3 个图像加载到内存中，而不是创建一个附加到画布的空白位图以将 3 个图像合并到其中。所以是的很多位图......

我的目标是使用 NDK 从文件中加载图像并合并它们并仅返回一个位图。基本上在java中我会创建空图像并将对象传递给NDK。这应该会减少设备上使用的内存量。至少理论上...

我面临的第一个问题是从文件中解码 png 图像。我怎样才能通过 NDK 做到这一点？我应该通过 JNI 使用 BitmapFactory 吗？

比如何合并这些 ARGB 位图更大的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T22:14:32.237

我不熟悉 NDK 中内置了哪些图像处理功能，但可以包含 OpenCV 库以在本机代码中使用，这就是我使用的（主要是由于之前的熟悉，但它真的很好）。

这是[OpenCV 4 Android](http://code.opencv.org/projects/opencv/wiki/OpenCV4Android)项目。这是[打开 PNG 的](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html#imread)方法。

# c# - Async 是否比线程有更好的性能

> ID：10659975
> 
> 赞同：2
> 
> 时间：2012-05-18T21:28:41.527
> 
> 标签：c#, winforms, asynchronous

C# WinForms：

主要目标是拥有读取/写入大文件（如 1 GB 文件）的最快方法。我对 C# 中的 StreamReader 和线程有所了解，但我也看到了有关 C# 的异步文件 I/O 的内容，但我还没有学过。所以我的问题是，与普通的 StreamReader 和多线程方法相比，采用 Async 的方法自然会提供更好的性能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T21:33:34.113

使用异步变体可能是一种稍微轻松的方法。系统为您处理异步读/写，您不必在自己的代码中创建和管理线程。

但是，如果有疑问，通常的建议适用：**测量！**编写两个测试例程并测试它们的执行情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T21:35:12.777

好吧，异步也创建了一个后台线程，但好处是您不必管理它。

# jquery - 为什么缓存的 jQuery 选择器变量会导致 IE9 失败？

> ID：10659976
> 
> 赞同：0
> 
> 时间：2012-05-18T21:28:41.573
> 
> 标签：jquery, internet-explorer

在我正在处理的网站上，以下（简化的）代码处理对元素的点击：

```
var $selectors = $('.selector');

$selectors.click( function( e ) {
    // Do stuff
}); 
```

它在除 IE 之外的所有浏览器中都能正常工作。（我已经测试过 IE8 和 IE9 并且两者都中断了。）

IE 不会抛出任何错误，但它只是不运行代码（“Do stuff”）。

我发现如果不再缓存选择器，就没有这个问题了。所以这有效：

```
$('.selector').click( function( e ) {
    // Do stuff
}); 
```

有任何想法吗？我知道我可以简单地停止缓存，但这是一个简化的用例；实际上，缓存这些 DOM 查找对我很有帮助，总的来说，我只想知道它为什么不起作用。

# xslt - XSL：使用动态选择列表生成过滤列表

> ID：10659977
> 
> 赞同：1
> 
> 时间：2012-05-18T21:28:52.330
> 
> 标签：xslt, recursion, drop-down-menu

我有一个包含姓名和电话号码以及与之关联的城市（可能是多个城市）的 XML 文件。我想要做的是生成一个唯一的城市列表，然后让用户选择其中一个城市。当他们这样做时，将显示与该城市关联的所有名称的列表。

我可以生成唯一的城市列表。我可以生成与硬编码城市相关的名称。选择城市后，我可以使姓名/电话列表可见或不可见。我不能做的是弄清楚如何使用选择列表“选定”值来过滤名称。我意识到这可能是微不足道的，但请善待新手并告诉我它是如何完成的！

这是我的代码：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">

<html>
<head>

  <script type="text/javascript">
    var showList = function() {
    document.getElementById("swarms").style.visibility = "visible";
    <xsl:variable name="thisOne" select="'document.allCities.select.options[document.allCities.select.selectedIndex].value'" />
    }
  </script>
</head>

<body>

    <!-- Display list of cities -->
    <div id="city_list">
    <xsl:variable name="unique-list" select="swarmlist/member/cities/city[not(.=following::city)]" />

        <form name="allCities">
        <strong>Select A City and Click the Button to Display the List: </strong> 
        <select name="select">              
            <option value="all">All</option>
            <xsl:for-each select="$unique-list">
            <xsl:sort select="."/>
            <option>
            <xsl:attribute name="value"><xsl:value-of select="."/></xsl:attribute>
            <xsl:value-of select="."/>
            </option>
            </xsl:for-each>
        </select>
      <input name="submit" type="button" value="Display" onclick="showList();" />
    </form>
    </div>
    <!-- End of City list -->

    <!-- Display list of volunteers -->
   <table border="1" id="swarms" style="visibility:hidden">
     <tr bgcolor="#9acd32">
      <th>Name</th>
      <th>Phone</th>
    </tr>

    <xsl:for-each select="swarmlist/member">
    <xsl:choose>
       <xsl:when test="cities/city = $thisOne">
    <tr>
        <td><xsl:value-of select="name"/></td>
        <td><xsl:value-of select="phone"/></td>
    </tr>
    </xsl:when>
</xsl:choose>
  </xsl:for-each>
  </table>
  <!-- End of volunteer list -->

</body>
</html>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T23:00:38.447

您正在尝试基于 Javascript 表达式定义 XSLT 变量。据我所知，这行不通，因为 XSLT 是在之前处理*过的*在页面呈现之前和执行任何 Javascript 之前换句话说，您不能使用 XSLT 根据用户操作动态更改页面内容。

您可以尝试将您的按钮更改为真实按钮，`<input type="submit">`并在用户点击它时让页面重新加载。这样，您将选择的城市作为请求参数，您可以将其读入您的`$thisOne`变量。

我自己从未在 XSLT 中捕获过请求参数，但希望这可以帮助您： [querystring using xslt](https://stackoverflow.com/questions/811006/querystring-using-xslt)

另一种更简单（但效率极低）的方法是将整个列表解析为不同的`<div>`块，然后使用 Javascript 隐藏它们并显示正确的块。

# mule - 为组件绑定生成的代理由 NullPayload 引发 ClassCastException

> ID：10659985
> 
> 赞同：0
> 
> 时间：2012-05-18T21:29:35.200
> 
> 标签：mule

当服务调用返回 null( `NullPayload`) 时，为组件绑定生成的代理会抛出一个`ClassCastException`. 它应该返回 null 吗？（这是在 Mule CE 3.2.1 中）参见[MULE 4405](http://www.mulesoft.org/jira/browse/MULE-4405)

谢谢

这是骡子配置：

```
<mule ...>

    <flow name="entryPoint">
        <vm:inbound-endpoint
            path="entryPoint"
            exchange-pattern="request-response" />
        <component class="classcastexception.Component">
            <binding interface="classcastexception.Interface" method="foo">
                <vm:outbound-endpoint
                    path="classcastexception.Interface.foo"
                    exchange-pattern="request-response" />
            </binding>
        </component>
    </flow>

    <flow name="classcastexception.Interface.foo">
        <vm:inbound-endpoint
            path="classcastexception.Interface.foo"
            exchange-pattern="request-response" />
        <component class="classcastexception.InterfaceImpl" />
    </flow>

</mule> 
```

Java类是：

**接口.java**

```
package classcastexception;

public interface Interface {

    String foo(String s);

} 
```

**组件.java**

```
package classcastexception;

public class Component {

    private Interface i;

    public String foo(final String s) {
        return i.foo(s);
    }

    public void setInterface(final Interface i) {
        this.i = i;
    }

} 
```

**接口Impl.java**

```
package classcastexception;

public class InterfaceImpl implements Interface {

    @Override
    public String foo(String s) {
        return null;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T22:01:21.660

最近修复了这个错误。查看 [MULE-6287](http://www.mulesoft.org/jira/browse/MULE-6287) jira 了解更多信息。如您所见，此修复将包含在即将发布的 mule 3.3 中。

# php - 子目录中 CodeIgniter App 的 open_basedir 限制错误

> ID：10659988
> 
> 赞同：-2
> 
> 时间：2012-05-18T21:29:41.813
> 
> 标签：php, apache, codeigniter, plesk, open-basedir

我有一个用于管理目的的 CodeIgniter 应用程序，放在域的子目录中。

当我更新记录并尝试清除页面的缓存副本时出现以下错误，该副本位于域根目录的缓存文件夹中。

我的服务器有 Plesk 控制面板，我尝试修改 vhost.conf 并重新启动服务器，但问题仍然存在......

首先，我不明白为什么子目录中的 php 脚本无法访问根目录中的文件夹，这是因为 CodeIgniter 吗？

请帮助...以下是我收到的错误。

```
A PHP Error was encountered

Severity: Warning

Message: unlink(): open_basedir restriction in effect. File(../../cache/2dd676d5e044a6190d27ccbaf094db7b.html) is not within the allowed path(s): (/var/www/vhosts/xyz.com/httpdocs/:/tmp/)

Filename: models/products_model.php

Line Number: 180 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T21:42:04.367

你的服务器上真的允许“open_basedir”吗？它通常可以被关闭 - 并且会产生这种错误......

# applescript - AppleScript 列表项的基于类的选择器对于 UI 元素对象失败

> ID：10659994
> 
> 赞同：1
> 
> 时间：2012-05-18T21:30:36.623
> 
> 标签：applescript

AppleScript 的*列表*数据类型对**布尔测试说明符**的支持非常有限。除了按范围选择项目（使用*item*关键字），指定一个类也可以：

```
get every «class furl» of {1, "Test", (POSIX file "/posix/path")} --> {file ":hfs:path"} 
```

当列表项是引用时，使用 content*关键字*取消引用将起作用：

```
get every «class furl» of {1, "Test", a reference to (POSIX file "/posix/path")} --> {}
get every «class furl» of contents of {1, "Test", a reference to (POSIX file "/posix/path")} --> {file ":hfs:path"} 
```

那么为什么下面的代码设置`allTextAreas`为一个空列表：

```
tell application "System Events"
    set allUIElements to entire contents of window 1 of someApplication 
    set allTextAreas to every text area of contents of allUIElements --> {}
end tell 
```

假设这是对*UI 元素*`allUIElements`对象的引用列表，并且其中至少有一个是类*文本区域*？

 ****注意我*不是*在寻找如何从列表中检索特定类型的所有 UI 元素的建议（`repeat`循环会这样做）——我想了解为什么选择器模式在这种特定情况下会失败。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T22:50:39.813

如果我想在 Safari 中找到前窗口的所有按钮，我会这样做。只需将此逻辑应用于您的情况。

```
tell application "System Events"
    tell process "Safari"
        set allButtons to UI elements of window 1 whose class is button
    end tell
end tell 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T23:39:14.250

从应用程序中获取 UI 元素会生成一个*对象说明符*列表：应用程序对象（一种嵌套容器的形式），其中层次结构中的每个项目都有多个属性，包括一个类——[技术说明 TN2106](https://developer.apple.com/library/mac/#technotes/tn2002/tn2106.html)可能会对此提供更多说明——而您的第一个示例使用了具有基类的文件 URL（一种文件引用）。

因此，在从应用程序获取对象或查询返回对象的所需属性时，您将需要使用应用程序过滤器参考表单，例如：

```
set allButtons to {}
tell application "System Events" to tell application process "Safari"
    set allUIElements to entire contents of window 1
    repeat with anElement in allUIElements
        try
            if class of anElement is button then set end of allButtons to contents of anElement
        end try
    end repeat
end tell
allButtons 
```**

# php - 为什么 jQuery 不提交这个表单？

> ID：10659998
> 
> 赞同：3
> 
> 时间：2012-05-18T21:31:22.427
> 
> 标签：php, jquery, forms, submit

我正在尝试使用 jQuery 提交表单，但我必须遗漏一些小东西，因为我无法让它工作，而且从我看到的一切来看，它应该可以正常工作。

这有什么问题？

```
<table class="newrecord"><form id="editthis" action="page.php" method="post">       

    <tr><td class="left">Name:</td><td><input type="text" name="name" id="name" /></td></tr>
    <tr><td class="left">Company:</td><td><input type="text" name="company" /></td></tr>
    <tr><td class="left"><a href="?action=browse">Cancel</a></td><td><input type="button" name="submit" class="subbut" id="subthis" value="Update" /></td></tr>

</form></table> 
```

和javascript：

```
 $("#subthis").click(function() {
        $('#editthis').submit(); // An alert box works, so I know this is triggering
    }); 
```

如代码中所述，如果我单击提交按钮，则会出现一个警告框，但是当我使用 jQuery 提交功能时，什么也没有发生。我错过了什么？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T21:32:55.407

您不需要使用 jQuery 来提交表单。提交按钮提交其所属的表单是默认行为。

另外，不要使用表格进行布局。表单元素本身可以很好地布局。

```
<form id="edit_this" action="page.php" method="POST">
    <label>Name <input type="text" name="name"></label>
    <label>Company <input type="text" name="company"></label>
    <a href="?action=browse">Cancel</a>
    <button type="submit">Update</button>
</form> 
```

可以轻松布局并自行提交。

如果您需要在使用 jQuery 提交之前发生一些事情，请将其绑定到表单的`onsubmit`处理程序，而不是实际单击按钮。

* * *

实际的问题是您为按钮指定的名称与 JavaScript 中的保留字之间的冲突。不要`submit`用作名称。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T21:37:50.500

我看到两个可能的问题。

1）`form`标签内有`table`标签。虽然这可能不是问题的根本原因，但它不是有效的 HTML。

2）您使用“提交”作为`name`您的提交按钮。应该避免这种情况，因为您的对象会与 JavaScript 保留字发生冲突。`id`使用“提交”以外的其他内容，就像您对属性所做的那样。