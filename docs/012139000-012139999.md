# StackOverflow 问答 12139000-12139999

# java - 向 JPanel 添加透明渐变？

> ID：12139001
> 
> 赞同：2
> 
> 时间：2012-08-27T09:03:44.533
> 
> 标签：java, image, swing, transparency, jpanel

我正在使用该`paintComponent()`方法在 JPanel 上绘制几个形状。最后一点是向顶部添加透明的白色渐变。

我有这个：

![1](../Images/f9928554ef16d23f31788e1f4ac7a2f1.png)

我想得到这样的东西：

![2](../Images/5a6a6d61007a35610aa398c6d75f6549.png)

我尝试使用 GradientPaint 方法，但它似乎对我来说根本无法正常工作。当我打电话时`g.setPaint(new GradientPaint(...))`，它似乎根本无法覆盖现有像素。

如果有人想看看我在做什么，可以在[**这个**](http://pastebin.com/hqA3ZYRr)Pastebin 上找到代码的 SSCCE 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T09:25:12.580

如果将这些添加为 的最后几行，似乎会产生效果`paintComponent(Graphics)`。

```
// now we have set a paint, DO SOMETHING WITH IT!
g.fillRect(0, 0, getWidth(), getHeight()); 
```

## 结果

![在此处输入图像描述](../Images/3987648d105db40938280eb98af02bd4.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T09:14:47.223

`AlphaComposite`在绘制渐变之前尝试应用

```
g.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 0.5f)); 
```

您可以尝试的另一件事是在渐变中使用具有 alpha 值的颜色...

```
LinearGradientPaint lgp = new LinearGradientPaint(
    startPoint, endPoint, new float[]{...}, 
    new Color[] {
        new Color(255, 255, 255, 0),
        new Color(255, 255, 255, 128),
        new Color(255, 255, 255, 0),
    }); 
```

# c - C 变量的范围

> ID：12139002
> 
> 赞同：5
> 
> 时间：2012-08-27T09:03:58.800
> 
> 标签：c, scope, heap-memory, local

> **可能重复：**
> [从函数返回字符串文字地址是否安全且可移植？](https://stackoverflow.com/questions/2371668/is-returning-a-string-literal-address-from-a-function-safe-and-portable)
> [C中字符串文字的“生命周期”](https://stackoverflow.com/questions/9970295/life-time-of-string-literal-in-c)

你好我有点困惑

```
char *func()
 {

    return "Hello";
 } 
```

这里的“Hello”是字符序列/数组。它是一个局部变量，一旦函数返回，它就必须消失。那我们怎么能得到正确的值呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T09:08:09.190

这`"Hello"`是一个字符串文字，将在程序的整个生命周期中存在。引用C99标准的相关部分：

*   6.4.5 字符串文字

> ...然后使用多字节字符序列初始化一个**静态存储持续时间**和长度的数组，刚好足以包含该序列...

*   6.2.4 对象的存储期限

> 使用外部或内部链接或存储类说明符 static 声明其标识符的对象具有**静态存储持续时间**。它的生命周期是程序的整个执行过程，它的存储值只在程序启动之前初始化一次。

函数的返回值应该是`const char*`试图修改字符串文字是未定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T09:05:25.607

它是恒定的，并且在内存中具有恒定的地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T09:08:37.507

该函数仅在返回控件后才销毁这些值。

因此，当遇到 return 语句时，“Hello”被放置为返回值，然后函数破坏范围；

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-27T09:09:55.853

看看这个：[从函数返回字符串文字地址是否安全且可移植？](https://stackoverflow.com/questions/2371668/is-returning-a-string-literal-address-from-a-function-safe-and-portable)

即使删除了字符串（使用 malloc() 和 free() 进行局部变量或动态分配），当您返回指针时，该值也可能是正确的。但是，这是一种未定义的行为。

# c# - 在 C# 中，我需要更改我制作的表单的顺序

> ID：12139006
> 
> 赞同：0
> 
> 时间：2012-08-27T09:04:12.980
> 
> 标签：c#, windows

我需要更改我制作的表单的顺序，例如首先获取登录页面，然后获取主 cp 等。（目前，主 cp 最先出现，登录表单在最后）我应该使用什么编码以及在哪里使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:05:26.590

它们按字母顺序排列。您可以通过更改 formname 来相应地安排它们，因为这不会更改类名，因此不会影响您的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:08:59.910

解决方案资源管理器中的文件按文件名排序。

您可以通过在文件前面加上左零填充数字来重命名文件（并保留类名）：`0001_Login`.

# jquery - jQuery循环遍历列表

> ID：12139008
> 
> 赞同：0
> 
> 时间：2012-08-27T09:04:17.933
> 
> 标签：jquery

我有一个清单如下：

```
<ul>
  <li>Coffee</li>
  <li>Tea</li>
  <li>Milk</li>
</ul> 
```

我有一个文本框，我在一个名为`get`. 现在，我想使用 jquery 遍历这个列表，并将`get`'s 的值与列表的匹配值进行比较。如果它们匹配，我必须将它们打印在标签中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:08:33.277

尝试

```
var getsValue = $.trim( $("#getId").val() );
var matchedList = [];
$("ul > li").each(function() {
  if( getsValue == $(this).text().substr(0,1) ) { //check first character
     //found -- do something
     //add to matched list array
     matchedList.push( $(this).text());
  }
}); 
```

或者如果您将 id 添加到 ul 会更好，因此您可以这样做：

```
$("ul#someId > li").each(function() { ... 
```

要检查是否包含字符，可以使用 indexOf，例如：

```
console.log(someString.indexOf("T")); //will return position if found else -1 
```

你的意思是这样的吗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:09:05.107

要遍历列表项，请使用 jquery 的 each() 函数。尝试：

```
var get = "Tea"; //or other value
$('li').each(function(index) {
    if($(this).text()==get){
   //doMagic();
    }

});​ 
```

# java - SQL Date&Time 和 java Date&Time 之间的区别，应该使用哪个？

> ID：12139012
> 
> 赞同：3
> 
> 时间：2012-08-27T09:04:32.017
> 
> 标签：java, sql-server-2005

我需要用日期和时间更新记录，但我很困惑使用 sql server 2005 的 CURRENT_TIMESTAMP 或 JAVA 的日期对象，两者都给了我相同的结果。

例子：

```
select CURRENT_TIMESTAMP 
```

这将打印`2012-08-27 14:30:17.193`

下面的这个java代码也会明显地做同样的事情，但有什么区别。

```
 Date dNow = new Date( );
           SimpleDateFormat ft = 
           new SimpleDateFormat ("yyyy-MM-dd HH:mm:ss.SSS ");

           System.out.println("Current Date: " + ft.format(dNow)); 
```

**更新：**

当我使用 CURRENT_TIMESTAMP 时，我在下面有 2 个 prepareStatement，而对于第二个，我使用了 JAVA 的日期对象（日期对象让它是 util.Date 或 sql.Date）。

**声明1**

```
 pst = con.prepareStatement("insert into sLog(logUser, logType, logSystem, logTime)
             values(?, ?, ?, CURRENT_TIMESTAMP)");
                    pst.setString(1, logUser);
                    pst.setString(2, logType);
                    pst.setString(3, logSystem);
                    pst.executeUpdate(); 
```

**声明2**

```
pst = con.prepareStatement("insert into sLog(logUser, logType, logSystem, logTime)
             values(?, ?, ?, ?)");
                pst.setString(1, logUser);
                pst.setString(2, logType);
                pst.setString(3, logSystem);
                pst.setString(4, format(dNow));
                pst.executeUpdate(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:37:29.220

第一种方法直接使用 SQL 函数。它具有数据库依赖性。第二种方法通过java方法，不能直接使用SQL函数。它没有数据库依赖。如果要使用可移植代码，请使用第二种方法。

# android - 在Android中从strings.xml中随机选择一个字符串

> ID：12139015
> 
> 赞同：8
> 
> 时间：2012-08-27T09:04:39.757
> 
> 标签：android

我需要随机选择在 android 的 strings.xml 文件中定义的字符串。

例如我的 strings.xml 是：

```
<resources>
    <string name="str1">Content comes here1</string>
    <string name="str2">Content comes here2</string>
    <string name="str3">Content comes here3</string>
</resources> 
```

我可以在我的活动中随机选择这些字符串之一吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T09:23:42.580

1.  创建一个包含您要选择的所有资源名称的数组：

    `String[] strs = new String[] {"str1", "str2", "str3"};`

2.  获取随机索引：

    `int randomIndex = new Random().nextInt(3);`

3.  从资源中获取随机字符串：

    `int resId = getResources().getIdentifier(strs[randomIndex ], "string", your_package_name);`

    `String randomString = getString(resId);`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-14T14:17:54.307

最好的方法是将字符串声明为数组，然后像这样得到它：

```
String[] arrayOfStrings = context.getResources().getStringArray(R.array.your_string_array);
String randomString = arrayOfStrings[new Random().nextInt(arrayOfStrings.length)]; 
```

然后你可以随心所欲地使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T09:09:14.060

您可能宁愿将其设为一个字符串数组（然后更容易随机选择一个数组）。否则，您可以将字符串的 id 放入一个数组中，然后随机选择数组中的一项。

# c# - 正在检查 IQueryable .any() 有必要吗？

> ID：12139018
> 
> 赞同：1
> 
> 时间：2012-08-27T09:04:53.173
> 
> 标签：c#, .net, linq

我有方法可以链接到其他方法，传递 IQueryable。这是一个缩减样本。

```
 public static IQueryable<Deal> Deals(this DbContext context)
    {
        Guard.ThrowIfNull(context, "context");

        var r = new ReadRepo<Deal>(context);

        return r.FindBy()
            .Include("Deals_SitePost")
            .Include("Deals_CommunityPost")
            .Include("Deals_Preorder")
            .Include("Deals_Product")
            .Include("Deals_Sale")
            .Include("Deals_VoucherCode")
            .Include("DealSubcategories");
    }

    public static IQueryable<Deal> ByStore(this IQueryable<Deal> deals, int storeId)
    {
        return deals.Where(d => d.StoreId == storeId);
    }

    public static IQueryable<Deal> WhereFeatured(this IQueryable<Deal> deals)
    {
        return deals.Where(d => d.Deals_SitePost.IsNotNull() && d.Deals_SitePost.IsFeatured);
    } 
```

如您所见，有一个启动器“交易”和几个扩展方法，我使用它们来扩展查询。

在这种情况下，在查询语句之前检查并返回 where !IQueryable.Any() 是明智的，还是没关系？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T09:25:31.830

我看不到它会更快的情况。如果`Any`返回**false**，则列表无论如何都不会包含任何元素。所以你不节省网络带宽，而且服务器端执行计划不太可能好得多。

如果`Any`返回**true**，您只是引入了不必要的往返和不必要的查询执行。

巧合的是，它可能会更快，但不是以可预测的、有价值的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T09:20:29.100

如果 ，它可能会更快，`Any() == true`但差异可能可以忽略不计。

另一方面，如果查询返回某些内容，则它可能会显着变慢，因为您有两次到数据库的往返。一是查询是否有任何东西，二是实际检索数据。

# php - phpdocx，docx 到 html 转换器返回损坏的 span 标签

> ID：12139019
> 
> 赞同：0
> 
> 时间：2012-08-27T09:05:00.770
> 
> 标签：php, docx

我成功地使用免费版本的 phpdocx php 库将 docx 文件转换为 html 文件。

问题是输出通常包含如下所示的行：

```
<span style=" font-family:;">This line is</span><span style=" font-family:;">completely b</span><span style=" font-family:;">roken</span><span style=" font-family:;">b</span><span style=" font-family:;">ecause of the random span tags 
```

和在浏览器中看到的一样：

“由于随机跨度标签，这条线完全被破坏了”

我在清理 html 输出时尝试通过删除任何不必要的 span 标签并在每个标签周围放置空格来修复它。但当然它只修复了一些实例，实际上在其他地方中断了。使用上面的行，它会产生：

“由于随机跨度标签，这条线完全被破坏了。”

目前，防止跨度标签出现的唯一方法是选择并删除与 Word 中的句子关联的任何样式。如果您已经能够发现 Word 中的问题，那将是可以接受的，但实际上不能。

您对 phpdocx 有任何经验吗？是否有解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:23:39.507

呸！问题是我自己的清理工作。即以下代码：

```
$result = preg_replace('~>\s+<~', '><', $result); 
```

结案。

谢谢。

# java - VB.NET/Java 上的图表

> ID：12139020
> 
> 赞同：2
> 
> 时间：2012-08-27T09:05:03.497
> 
> 标签：java, vb.net

如何使用以下数据在 Java 或 VB.NET 中创建折线图？

```
Sales Rep       # of Sales      Date
Anthony         15              August 1
Anthony         17              August 2
Mark            27              August 1
David           27              August 1
Mark            30              August 2
David           14              August 2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T09:17:41.480

在 VB.Net 中，将数据放入 a`DataTable`并将其绑定到[`Chart`](http://msdn.microsoft.com/en-us/library/dd456391)控件

关于如何将 a 绑定`DataTable`到 a`Chart`的教程在[此处](http://dotnetslackers.com/articles/net/Binding-a-Microsoft-Chart-with-a-Dataset.aspx)和[此处](http://blogs.msdn.com/b/alexgor/archive/2009/02/21/data-binding-ms-chart-control.aspx)。

[此外，还有一些像this](http://www.codeproject.com/Articles/10966/Cristi-Potlog-s-Chart-Control-for-NET)和[this 这样](http://www.codeproject.com/Articles/5431/A-flexible-charting-library-for-NET)的开源图表控件。

**编辑：**

这是一个简单的示例，向您展示其`Chart`工作原理：

```
Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    Dim table = New DataTable()
    table.Columns.Add("Sales Rep", GetType(String))
    table.Columns.Add("# of Sales", GetType(Integer))
    table.Columns.Add("Date", GetType(Date))

    table.Rows.Add("Anthony", 15, "2012 August 1")
    table.Rows.Add("Mark", 27, "2012 August 1")
    table.Rows.Add("David", 27, "2012 August 1")

    table.Rows.Add("Anthony", 17, "2012 August 2")
    table.Rows.Add("Mark", 30, "2012  August 2")
    table.Rows.Add("David", 14, "2012 August 2")

    Chart1.Series.RemoveAt(0)
    Chart1.DataBindCrossTable(table.DefaultView, "Sales Rep", "Date", "# of Sales", "")

    For Each s In Chart1.Series
        s.ChartType = SeriesChartType.Line
    Next
End Sub 
```

![在此处输入图像描述](../Images/ed2e61ac16d9ba0a3d1c4a8bf2bdbc38.png)

* * *

使用 Java，看看[JFreeChart](http://www.jfree.org/jfreechart/)，它还可以呈现不同类型的图表（可能还有很多其他 Java 控件/库用于显示图表）。

![在此处输入图像描述](../Images/40f22062d146f4e22d80573fd9f07730.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-28T14:38:26.900

[www.ezVB.net](http://www.ezvb.net/draw-graph-from-1d-or-2d-array/)上有一个开源功能。

优点是

1）只需一行即可实现，例如

```
ezDrawGraph({{0.5, 1, 3.14}, {1.2, 3, 4}}).Save("testgraph.png", Imaging.ImageFormat.Png) 
```

2）该功能可以直接复制到您的代码中。不需要图书馆。

3) 它接受一个一维数组、一组两个一维数组或一个二维数组。

缩编是设计非常基本。

*（PS我隶属于ezVB.net）*

# jquery - 限制jquery ui可拖动到框架边框外的移动

> ID：12139024
> 
> 赞同：3
> 
> 时间：2012-08-27T09:05:24.953
> 
> 标签：jquery, jquery-ui, iframe, jquery-ui-draggable

我正在使用 jquery ui draggable 以使用户可以拖动字段集，整个页面加载在 iframe 中。**问题是我可以将字段集拖到 iframe 边框之外，我该如何阻止它？**

```
<iframe src='test.html'></iframe> 
```

测试.html

```
 <html>
<script>
$(".draggable").draggable();
</script>
<fieldset id='draggable'>testing</fieldset>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T09:08:23.313

使用 UI`containment`选项

```
$('.draggable').draggable({
    containment: "parent";
}); 
```

# php - 文件上传和安全问题

> ID：12139028
> 
> 赞同：1
> 
> 时间：2012-08-27T09:05:30.023
> 
> 标签：php, javascript, html, applet

我想设置输入类型文件的默认值。我搜索了很多，但每个人都说由于安全原因这是不可能的。

有什么方法可以设置默认值以及当用户上传文件而不导航到它时。它只是提示他你要从这个位置上传文件，然后只有当用户同意然后上传。

所以没有安全冲突。请告诉我，即使在 HTML5 或其他某种解决方案中，是否有任何关于此问题的 API。

在我的情况下，用户必须在一天内从同一位置上传文件 500 次，他想设置一次路径，然后下次从同一位置上传（上一个）另外，如果我为此目的使用 java 小程序怎么办

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T09:07:51.393

不，仍然是安全问题。浏览器甚至不允许您通过 javascript 打开文件对话框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T10:49:58.643

根据 OP 的要求（尽管**fastreload 已经在他的回答中说明了这一点，因此我认为我的回答是不必要的**）......

出于非常好的安全原因，浏览器会阻止控件`value`的设置。`<input type="file">`这包括预先设置 HTML 中的值（来自 PHP / ASP.NET / 静态 HTML 之类的东西）和通过客户端 JavaScript 进行的设置。

原因很清楚……浏览器不能信任 HTML 的作者。如果他们这样做了，网站将能够在未经用户许可的情况下从本地计算机上传任何文件。

您可以使用 ActiveX 控件 (OCX) 或 Java Applet 来实现此目的，但仍需要用户批准安装。

我还将在评论中添加几次提到的内容，即用户被期望上传文件“每天 500 次”（！！）听起来像是一个非常糟糕的设计。考虑构建一个可以安装在客户端计算机上的应用程序（非 Web，只是普通桌面）以上传相关文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T00:30:58.547

受信任的 Java 小程序可以实现所述功能。

但是为了节省每天访问小程序页面 500 次的用户，我会接受 @fastreload 的建议，并使其成为使用[Java Web Start 启动](https://stackoverflow.com/tags/java-web-start/info)的（受信任的）桌面应用程序（如果它是基于 Java 的应用程序）。

# django - 如何从 Jinja 的扩展中访问上下文变量？

> ID：12139029
> 
> 赞同：2
> 
> 时间：2012-08-27T09:05:36.587
> 
> 标签：django, jinja2, coffin

我通过棺材使用django+jinja2，我不明白如何访问扩展中的上下文变量。例如，我有这个：

```
from coffin.shortcuts import render_to_response

def some_view(request):
    return render_to_response('template.html', {'a': 1})

class RenderFooExtension(Extension):
    tags = set(['render_foo'])

    def parse(self, parser):
        lineno = parser.stream.next().lineno

        # Some parsing process

        return nodes.Output([self.call_method('render'),]).set_lineno(lineno)

    def render(self):
        # TODO: I need to get here, for example, `a` object
        return '' 
```

所以我需要`a`在方法中获取变量`render`。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T05:55:53.600

好的，我自己的答案。

将 a 添加`jinja2.nodes.Name('a', 'load')`到这样的 a`call_method`中`Extension`，它将从上下文中加载。

```
class RenderFooExtension(Extension):
    tags = set(['render_foo'])

    def parse(self, parser):
        lineno = parser.stream.next().lineno

        args = [nodes.Name('a', 'load'),]

        return nodes.Output([self.call_method('render', args),]).set_lineno(lineno)

    def render(self, a):
        print 'Gotcha!', a
        return 'something useful?' 
```

# jquery - 链接到 JSON 数据的 KnockOut Observable

> ID：12139032
> 
> 赞同：0
> 
> 时间：2012-08-27T09:05:42.940
> 
> 标签：jquery, knockout.js

我正在使用 KnockOutJS - 我有一个基本的 JSON 模型：

```
([{
    "occ": [{"name": "1 Room only","price": 53.9},
            {"name": "1 B&B","price": 62.16},],
    "TypeName": "Single",
    "TypeID": "3121",
    "TypeCount": "5"
   },
{
    "occ": [{"name": "2 B&B","price": 24.23},
            {"name": "2 DBB","price": 32.95}],
    "TypeName": "Double",
    "TypeID": "4056",
    "TypeCount": "4"
   }]) 
```

这个想法是，**TypeName**保存可用房间的类型 - 例如。Single、Double - 和**TypeCount**保存了可用房间的数量。

使用 KnockOut 以及来自这个论坛的大量帮助，当前的 JSFiddle 代码创建了一个购物车类型示例 - 您可以在其中添加房间，并选择您想要的那种类型的房间的数量。

但是，如果用户选择“ **Single** ”，并从数量中选择**4**（意味着只剩下**1 个 Single Room**），然后单击 Add Room，然后再次选择**TypeName** “Single”，我希望 KnockOut 能够已经跟踪选择了“ **Single** ”的先前行以及选择的数量 - 因此知道用户在再次添加**单人房间时只能从数量中选择****1**。

 **有点保持运行总计 - 所以它知道在屏幕上选择了什么，并且可以将其与 JSON 中的每个**TypeName的****TypeCount**相关联。

 **这类似于 KnockOuts 网站上的自定义绑定教程：[KnockOut Custom Bindings Example](http://learn.knockoutjs.com/#/?tutorial=custombindings)

我在 JSFiddle 中创建了许多分支，但无法让它做我想做的事 - 最后一个工作示例是：[链接到 JSFiddle 示例](http://jsfiddle.net/marktait/9x4UJ/)

感谢您的任何指示/帮助，

标记

**HTML是**

```
<div class='liveExample'> 

<table width='100%' border="1">
    <thead>
        <tr>
            <th width='25%'>Room Type</th>
                <th width='25%'>Occ</th>
            <th class='price' width='15%'>Price</th>
            <th class='quantity' width='10%'>Quantity</th>
            <th class='price' width='15%'>Subtotal</th>
            <th width='10%'> </th>
        </tr>
    </thead>
    <tbody data-bind='foreach: lines'>
        <tr>
            <td>
                <select data-bind='options: $root.RoomCategories, optionsText: "TypeName", optionsCaption: "Select...", value: category'> </select>
            </td>
            <td data-bind="with: category">
                <select data-bind='options: occ, optionsText: "name", optionsCaption: "Select...", value: $parent.product'> </select>
            </td>
            <td class='price' data-bind='with: product'>

<span data-bind='text: formatCurrency(price)'> </span>
            </td>
            <td class='quantity' data-bind="with: category">
                <select data-bind="visible: $parent.product, options: ko.utils.range(0, TypeCount), value: $parent.quantity"></select>
            </td>
            <td class='price'>
                <span data-bind='visible: product, text: formatCurrency(subtotal())' > </span>
            </td>
            <td>
                <a href='#' data-bind='click: $parent.removeLine'>Remove</a>
            </td>
        </tr>
    </tbody>
</table>
<p class='grandTotal'>
    Total value: <span data-bind='text: formatCurrency(grandTotal())'> </span>
</p>
<button data-bind='click: addLine'>Add room</button>
<button data-bind='click: save'>Submit booking</button> 
```

**并且 KnockOut 代码是**

```
function formatCurrency(value) {
return "$" + value.toFixed(2);
}

var CartLine = function() {
var self = this;
self.category = ko.observable();
self.categoryID = ko.observable();
self.product = ko.observable();
self.quantity = ko.observable(1);
self.subtotal = ko.computed(function() {
    return self.product() ? self.product().price * parseInt("0" + self.quantity(), 10) : 0;
});

// Whenever the category changes, reset the product selection
self.category.subscribe(function() {
    self.product(undefined);
});
};

var Cart = function() {
// Stores an array of lines, and from these, can work out the grandTotal
var self = this;

self.RoomCategories = ko.observableArray([]);
self.lines = ko.observableArray([new CartLine()]); // Put one line in by default
self.grandTotal = ko.computed(function() {
    var total = 0;
    $.each(self.lines(), function() {
        total += this.subtotal()
    })
    return total;
});

// Operations
self.addLine = function() {
    self.lines.push(new CartLine())
};
self.removeLine = function(line) {
    self.lines.remove(line)
};
self.save = function() {
    var dataToSave = $.map(self.lines(), function(line) {
        return line.product() ? {
            category: line.category().TypeName,
            categoryID: line.category().TypeID,
            productName: line.product().name,
            quantity: line.quantity()
        } : undefined
    });
    alert("Could now send this to server: " + JSON.stringify(dataToSave));
    };
};

var cart = new Cart();

ko.applyBindings(cart);

//simulate AJAX
setTimeout(function() {
cart.RoomCategories([{
    "occ": [{
        "name": "1 Room only",
        "price": 53.9},
    {
        "name": "1 B&B",
        "price": 62.16}, ],
    "TypeName": "Single",
    "TypeID": "3121",
    "TypeCount": "2"

    },
{
    "occ": [{
        "name": "2 B&B",
        "price": 24.23},
    {
        "name": "2 DBB",
        "price": 32.95}],
    "TypeName": "Double",
    "TypeID": "4056",
    "TypeCount": "2"

    },
{
    "occ": [{
        "name": "2+1 BB",
        "price": 34.25},
    {
        "name": "2+1 DBB",
        "price": 36.23}],
    "TypeName": "Family",
    "TypeID": "5654",
    "TypeCount": "4"}]);
}, 100); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:27:51.317

本质上，当您应该通过将运行总计存储在 JS 对象中并使用 JS 运行计算来使用本机 javascript 时，您要求淘汰赛做太多的逻辑工作。我将给出的示例不是即插即用您的代码，但它是相关的。

首先，将房间计数存储在一个对象中。

```
roomcount = { // object can be accessed by any other variable in your app
    single: 5, // data from json or where ever
    double: 4
} 
```

然后，您的 KO 视图模型将像这样工作

```
self.showAvailableSingle = ko.ovservable(roomcount.single) // Show available rooms to user
self.showAvailableDouble = ko.ovservable(roomcount.double)
self.selectSingleQuantity = ko.observable(""); // user input number of rooms
self.selectDoubleQuantity = ko.observable("");

self.selectSingleQuantity = function() { // click event
    roomcount.single = roomcount.single - self.selectSingleQuantity();
    self.showAvailableSingle(roomcount.single); // this will update what is shown to the user
}

self.selectDoubleQuantity = function() { // click event
    roomcount.Double = roomcount.Double - self.selectDoubleQuantity();
    self.showAvailableDouble(roomcount.Double);
} 
```

就像我说的，这需要修改以使用您的代码，但希望它是一个示例，可以让您走上正确的道路。这个总体思路可用于更新选择输入选项或其他更高级的东西。

您希望在应用程序的计算和逻辑方面尽可能少地使用 KO 的另一个原因是，您的最终 KO 视图模型将很大并且很烦人，无法解析您的必要数据。尝试仅将 KO 用于视图模型而不是逻辑，这一点很重要。****

# regex - preg_replace 不在 url 中的单词

> ID：12139033
> 
> 赞同：0
> 
> 时间：2012-08-27T09:05:50.780
> 
> 标签：regex, url, preg-replace, assertion

我正在使用 preg_replace 替换文本中可能包含一些 url 的单词列表。问题是如果它们是 url 的一部分，我不想替换这些词。

这些例子应该被忽略：

> foo.com
> 
> foo.com/foo
> 
> foo.com/foo/foo

对于一个基本示例（用 php 编写），我尝试使用否定前瞻断言忽略包含**.com和可选斜杠和字符的字符串，但没有成功：**

`preg_replace("/(\b)foo(\b)/", "$1bar$2(?!(\w+\.\w+)*(\.com)([\.\/]\w+)*)", $text);`

此调用仅忽略**.com**之前的单词。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:11:33.967

在这种情况下，更容易将问题倒过来考虑。您想匹配*不在*url 中的单词。相反，您想匹配 url*和*单词。因此，您的表达式将如下所示：`url_match_here|(?:my|words|here)`. 这将允许正则表达式引擎首先使用 URL，然后尝试匹配这些单词。因此，您永远不必担心匹配 URL 中的单词。如果要保持文本结构，可以使用`preg_replace`, 和以下表达式`(url_match_here)|(?:my|words|here)`并替换为`\1`来保留 URL 和文本。

我希望这有帮助。

祝你好运。

# asp.net-mvc - DropDownList 和 DropDownListFor 有什么区别？

> ID：12139034
> 
> 赞同：4
> 
> 时间：2012-08-27T09:05:51.723
> 
> 标签：asp.net-mvc, helper

> **可能重复：**
> [DropDownlist 或 DropDownListFor Html 助手之间的区别](https://stackoverflow.com/questions/8182280/difference-between-dropdownlist-or-dropdownlistfor-html-helper)

我是新来`asp.net` `mvc`的`.net`。一般来说，我的 PHP 编程背景。

`DropDownList`和 和有什么不一样`DropDownListFor`？为什么`For`？

我在哪里可以找到每个帮助者的定义以及了解如何使用它的示例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T09:35:28.390

基本区别包括：

```
DropdownList                              DropDownListFor
- weakly typed(runtime time checking    -strongly typed(compile time checking)
- support since mvc 1                    -supports from mvc 2
-do not support lambda expression to     -supports
     specify id/name of element         
- need to hardcode the id/name           -simply specifying via viewmodel with the help of lambda expression            
  of element 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:15:42.823

您应该研究强类型的 Html Helpers。

这是其中的一个示例：[http ://weblogs.asp.net/scottgu/archive/2010/01/10/asp-net-mvc-2-strongly-typed-html-helpers.aspx](http://weblogs.asp.net/scottgu/archive/2010/01/10/asp-net-mvc-2-strongly-typed-html-helpers.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T09:33:24.060

简而言之，最后带有“For”的 Html Helpers 期望您传递模型/视图模型 - 本质上，mvc 将为您完成模型的管道、命名和重新填充。

非 For 同名助手适用于当您想要使用声明性语法以临时（非模型相关方式）构造标签时，即您将输入控件的 ID/名称作为参数 +其他信息直接进入辅助方法参数，您负责提供信息并在回发发生时再次查找值。

# php - php，apache服务器错误，无法追踪

> ID：12139044
> 
> 赞同：0
> 
> 时间：2012-08-27T09:06:28.743
> 
> 标签：php, apache

> OK 服务器遇到内部错误或配置错误，无法完成您的请求。请联系服务器管理员 admin@example.com 并告知他们错误发生的时间，以及您所做的任何可能导致错误的事情。服务器错误日志中可能提供有关此错误的更多信息。

每次运行代码时都会收到此消息。我不知道错误在哪里..我检查了 apache 错误文件和其他一些错误日志文件..并没有发现任何错误..我如何跟踪错误

我认为这是我看到的错误：

```
> [8/27/2012 12:28:57 PM] Error: PHP process 35344 from the "application/x-httpd-php" pool has exited with status 255.
[8/27/2012 12:28:57 PM] Error: Read data error - unable to get read result. Code 109.
[8/27/2012 12:28:57 PM] Error: Request for C:/Program Files (x86)/Zend/Apache2/htdocs/backlinks/cron/links-buy.php: Unable to get the response from PHP process 
```

这就是我在事件查看器中看到的：

```
>     php-cgi.exe 
>    5.3.9.0     4ef33bca     ZendOptimizerPlus.dll 
>    0.0.549.0     4f00c7dd     c0000005     000061a1     8554     01cd8436d2089924     C:\Program Files
> (x86)\Zend\ZendServer\bin\php-cgi.exe     C:\Program Files
> (x86)\Zend\ZendServer\lib\optimizerplus\php-5.3.x\ZendOptimizerPlus.dll
> 112872b4-f02a-11e1-aed2-8c89a53c9045 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-28T18:16:38.287

打开你的 php 文件。它似乎是文件 /Zend/Apache2/htdocs/backlinks/cron/links-buy.php。确定文件系统上写入 PHP 错误输出的位置。例如使用'/home/myuser/public_html/phpDebugErrorLog.txt'。替换这条路径！

将许多这样的语句添加到您的 PHP 文件中（考虑 PHP 的语法）。添加不同的数字 1, 2, 3, ....., 100 。

```
error_log('Position 1: ' . chr(13), 3, '/home/myuser/public_html/phpDebugErrorLog.txt');
some PHP code here;
error_log('Position 2: ' . chr(13), 3, '/home/myuser/public_html/phpDebugErrorLog.txt');
some more PHP code;
error_log('Position 3: ' . chr(13), 3, '/home/myuser/public_html/phpDebugErrorLog.txt'); 
```

因此，您可以确定错误发生在 PHP 文件中的位置，这会导致 CGI PHP 脚本崩溃。错误日志文件中显示的最后一行将为您提供文件中存在错误的位置。然后修复PHP中的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:15:46.210

`die();`在代码中间添加。试试看。如果错误仍然发生，您在第一部分的错误。然后将您的错误部分除以两个`die();`，依此类推。

# php - 每次用户登录时记录用户的IP地址 - PHP

> ID：12139046
> 
> 赞同：0
> 
> 时间：2012-08-27T09:06:36.117
> 
> 标签：php, ip, ip-address

这是我登录页面的代码。我希望能够计算使用我的网站的次数以及他们从哪里登录。我可以进行计数，但不能计算 IP 地址。

在表格中，我希望它像这样显示每个用户数据

这些是我表中的列。用户名、上次登录、登录时间、IPADDRESS、IPADDRESS1、IPADDRESS、……IPADDRESS10。我已经创建了所有 10 个不同的 IP 地址列（我不太确定如何使以下内容看起来像在表格中，所以我真的很抱歉）

用户名 | 最后登录 | 登录时间 | IP 地址 | IPADDRESS1 | IPADDRESS2 ...... | IPADDRESS10

跳线 | 21-12-2012 8.59PM | 5 | 80.81.82.83 | 80.81.82.82 | 80.81.82.83

每次使用新的IP地址从同一用户登录时，该IP地址将被记录到表中。每个用户最多有 10 个不同的 IP 地址。表格是我第一次想到的，所以我不确定这是否是在表格中展示它们的最佳方式，所以也请给我推荐。

如何将这些 IP 地址添加到表中？我不太确定如何分隔每个 IP 地址列。当我得到新的IP地址时，它只是不断覆盖旧的IP地址。

非常感谢。

```
var $HOST = "website.com";  
var $USERNAME = "username"; 
var $PASSWORD = "password"; 
var $DBNAME = "database";   

function authenticate($username, $password) {

$Auth = new auth();
$detail = $Auth->authenticate($username, $password);

    if (ereg("'", $username)) 
    {
        return "invalid username";
    }

    if (ereg("'", $password)) 
    {
        return "invalid password";
    }

    $query = "SELECT * FROM user WHERE uname='$username' AND passwd=MD5('$password') AND status <> 'inactive'";

    $UpdateRecords = "UPDATE user SET lastlogin = NOW(), logincount = logincount + 1 WHERE uname='$username'";
    $connection = mysql_connect($this->HOST, $this->USERNAME, $this->PASSWORD);

    $SelectedDB = mysql_select_db($this->DBNAME);
    $result = mysql_query($query); 

    $numrows = mysql_num_rows($result);
    $row = mysql_fetch_array($result);

    if ($numrows == 0) {
        return 0;
    }

    */
    else {
        $Update = mysql_query($UpdateRecords);
        return $row;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T09:10:41.360

最好有一个包含 (USERNAME | IPADDRESS | TIME) 列的单独表。这样，您将能够为给定用户更有效（和更轻松地）存储不同的 IP 地址。然后，您必须选择一种算法来保留这些信息（保留前 10 个不同的 IP 地址？保留后 10 个？...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:16:28.643

使用带有 userid、ipaddress、logged_in_date_time 的单独表。每次他们登录时，检查他们的 IP 地址。在查询中使用 GROUP By ipaddress 并查看该用户是否有 10 个不同的 ip。现在如果用户有相同的IP然后让他进入...如果IP不同并且有超过10个IP不要让他进入。

**编辑：**

但是您的要求在用户看来并不方便。我使用 ADSL 连接并且我的 IP 经常更改，因此如果您的数据库有我的 10 个不同的 IP，我将无法登录到您的系统，这对用户不友好。此外，如果我的系统在网络中，100 个用户可能会使用相同的 IP 访问您的系统。

使用准备好的语句、PDO 或至少 mysqli 函数来确保应用程序安全。mysql 函数已折旧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T09:24:46.607

您应该使用两个表。一个用于存储用户的**用户名**、**密码**、**上次登录时间**和**登录次数**，另一个用于存储用户的 IP 地址。您可以存储用户每次登录时的用户**名/用户 ID**、**IP 地址**和**登录时间戳。**

这样，如果您只想存储用户的最后 10 个 IP 地址，您可以过滤 sql 搜索以仅显示该特定用户的 IP 地址，然后将最早的 IP 地址条目替换为最新的，这样您将始终有最后 10 个条目。

# tomcat - Tomcat 7 上的 CDI - 有意义吗？

> ID：12139050
> 
> 赞同：18
> 
> 时间：2012-08-27T09:06:54.640
> 
> 标签：tomcat, jsf-2, java-ee-6, cdi

如果可以选择，我将 JBoss 7 用于使用 JSF 2 和 CDI 的 Java EE 6 项目。

但有时，客户项目的环境或多或少是设置好的——所以在一种情况下，我们仅限于 Tomcat（6 个或可能 7 个）。

因此，我阅读了几篇关于在 Tomcat 中使用 CDI（例如 WELD）和 JSF 2 的文章，这表明这样做基本上没有问题。

不过，我的问题是——这有意义吗？还是 servlet 容器不适合这种架构？有没有人有任何使用 Tomcat+CDI 的经验而不是演示项目？

提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-27T10:44:02.900

好问题，首先:)

将企业应用程序部署到 servlet 引擎是例如 Spring 的主要场景，所以这当然是可能的。但是您会知道 Spring 是一个完整的 API 和配置文件生态系统，而不是您简单地放在服务器上并从中获得乐趣的几个 JAR。

我在 Tomcat 7 上使用 Weld & JSF 玩了很多次，效果非常好。但是 HelloWorldOnTomcat.java 与面向真实客户的真实应用程序之间存在重大差异。我相信你已经意识到了这一点。

我想说您将能够在相对较短的时间内编译出体面的设置。CDI 和 JSF 都不会有问题。**但是**根据您的具体要求，您将不得不处理开箱即用的 Tomcat 未涵盖的其他方面。安全、集群、故障转移、消息传递、异步等几个问题（以及事务，如评论中所述）。

如果您（或多或少）精通此类要求，并且您即将进行的项目相当轻松，并且不应该控制下一个火星任务-我当然会尝试一下。

另一方面，如果您知道这些要求，我会寻找（a）Java EE 应用服务器上的设置，或（b）Tomcat 上的另一个堆栈。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T15:45:44.877

看看 Apache Tomee：

> [Apache TomEE](http://tomee.apache.org/)，发音为“Tommy”，是一个全 Apache Java EE 6 Web Profile 认证的堆栈，其中 Tomcat 是其中的佼佼者。Apache TomEE 由一个普通的 Apache Tomcat zip 文件组装而成。我们从 Tomcat 开始，添加我们的 jars 并压缩其余部分。结果是 Tomcat 添加了 EE 功能 - TomEE。

# android - 无法在运行 ICS 4.0.3 的设备上安装 Android 应用程序

> ID：12139052
> 
> 赞同：0
> 
> 时间：2012-08-27T09:07:03.647
> 
> 标签：android, apk

无法在运行 ICS 4.0.3 的设备上安装 Android 应用程序。设备说明

[http://www.sinocan.com.cn/index.php?ac=article&at=read&did=204](http://www.sinocan.com.cn/index.php?ac=article&at=read&did=204)

# 日志猫

07-11 04:15:31.963 E/PackageManager（147）：**包 com.sks.myapp 需要不可用的共享库 com.google.android.maps；失败！**

07-11 04:15:31.963 W/PackageManager（147）：**无法在 /data/app/com.sks.myapp-1.apk 中安装包**

07-11 04:15:32.043 D/dalvikvm（147）：**GC_EXPLICIT 释放 983K，11% 释放 10952K/12231K，暂停 3ms+14ms**

07-11 04:15:32.043 D/InstallAppProgress（1648）：**安装错误代码：-9**

07-11 04:15:33.133 I/InstallAppProgress(1648):**完成安装 com.sks.myapp**

# image - 它打印 $image 但将 null 插入 DB

> ID：12139053
> 
> 赞同：0
> 
> 时间：2012-08-27T09:07:13.360
> 
> 标签：image, mongodb, set

好的，我正在使用 Mongodb，我有以下代码

```
$image = $chnl->getElementsByTagName("image");

                    foreach($image as $img){
                        $imgs = $img->getElementsByTagName("url");
                        $image = $imgs->item(0)->nodeValue;
                        print $image;
                        $collection = $fetch->db->shows;
                        $collection->update(
                        array( "_id"=> new MongoId($d["_id"])),
                        array( '$set' => array("image"=>$image) )
                    );
                    } 
```

它正在打印图像 URL，但是当我尝试将其添加到 mongodb buy $set 时，它会将 null 插入到数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:37:26.010

看来您是用 PHP 编写的。

您拥有的 $image 变量是一个数组。因此 foreach 块将使用 $image 标记作为 $img 变量分割每个元素。第 4 行似乎正在重新分配 $image 数组。

尝试将循环中的 $image 更改为新的变量名。

# javascript - Textmate代码折叠

> ID：12139056
> 
> 赞同：0
> 
> 时间：2012-08-27T09:07:26.683
> 
> 标签：javascript, textmate

我正在做一个大项目，所以我经常使用代码折叠。我基本上有两种类型的代码：

1.

```
help.scroll = function() {
    // some code
} 
```

2.

```
help.scroll = {
    // some code
}; 
```

所以 Textmate 折叠第一个代码，但不折叠第二个代码。

原来的折叠开始标记是这样的

`foldingStartMarker = '^.*\bfunction\s*(\w+\s*)?\([^\)]*\)(\s*\{[^\}]*)?\s*$';`

我想结束标记是可以的

`foldingStopMarker = '^\s*\}';`

所以我的问题是 - 我如何修改“foldingStartMarker”，以便 Textmate 折叠两个代码块。

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:23:45.670

不知道您的 textmate 版本，但以下内容可能与 textmate 2.0(9283) 一样：

```
{   foldingStartMarker = '\{\s*(//.*)?$|\[\s*(//.*)?$|\(\s*(//.*)?$';
    foldingStopMarker = '^\s*\}|^\s*\]|^\s*\)';
} 
```

# php - 使用 Jquery 和 PHP 删除 MySQL 行

> ID：12139059
> 
> 赞同：0
> 
> 时间：2012-08-27T09:07:38.680
> 
> 标签：php, jquery, ajax

一点一点地，我一直在将我正在开发的 PHP Web 应用程序转换为 Jquery AJAX 表单提交。

我正在处理的当前一个是删除表格行。我认为这是我的 javascript 的问题，因为即使使用`return false;`. 这是我创建对象的表单的问题，但是由于这个站点的一些帮助，我得到了排序，现在它可以完全工作了。

这是我的javascript：

```
$("form#table_customer").submit(function() {
        var query_string = 'page=customer&rows=';

        $(":checked").each(function() {
            query_string += this.value + "-";
        });

        $.ajax({
            url: "inc/deletesql.php",
            type: "POST",
            data: query_string,
            cache: false,
            success: function(data){
                $('#maincontent').load('inc/showObjects.php?o=customer');
            }
        });
        return false;
    }); 
```

PHP 文件 (deletesql.php) 适用于普通的 POST 提交。但我似乎无法让它通过 ajax 发布数据。

[您可以在http://www.sfyfe.com/studioadmin/index.php?i=customer](http://www.sfyfe.com/studioadmin/index.php?i=customer)的上下文中看到它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T02:34:46.920

```
 $('#maincontent').load('inc/showObjects.php?o=customer');
    ...
    // at this point form#table_customer doesn't exist yet in the DOM
    // so this binding a handler will give no effect
    $("form#table_customer").submit(function() {
           ....
    }); 
```

试试这个：

```
 // make the load reusable

 function addDeleteHandler() {
     // handle the load event
     // attach the event handler everytime the content is loaded, 
     // and the form#table_customer is added to the dom
     $('#maincontent').load('inc/showObjects.php?o=customer', function() {
         $("form#table_customer").submit(function() {

             var query_string = 'page=customer&rows=';

             $('input[name="checkbox"]:checked').each(function() {
                query_string += this.value + "-";
             });

             $.ajax({
                 url: "inc/deletesql.php",
                 type: "POST",
                 data: query_string,
                 cache: false,
                 success: function(data){
                   addDeleteHandler();
                 }
             });

             return false;
          });
      });
  }

  addDeleteHandler(); 
```

# sql - SQL Server 将 varbinary 转换为字符串

> ID：12139073
> 
> 赞同：54
> 
> 时间：2012-08-27T09:08:52.857
> 
> 标签：sql, sql-server, string, varbinary

我想在 T-SQL 中进行从`varbinary`类型到字符串类型的转换

这是一个例子：

首先我得到了这个`varbinary`

```
0x21232F297A57A5A743894A0E4A801FC3 
```

然后我想将其转换为

```
21232f297a57a5a743894a0e4a801fc3 
```

这该怎么做？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-08-27T09:12:22.373

尝试：

```
DECLARE @varbinaryField varbinary(max);
SET @varbinaryField = 0x21232F297A57A5A743894A0E4A801FC3;

SELECT CONVERT(varchar(max),@varbinaryField,2), 
@varbinaryField 
```

更新：对于 SQL Server 2008

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-12-19T09:21:56.623

我知道这是一个老问题，但这是我发现在某些情况下更有用的替代方法。我相信 master.dbo.fn_varbintohexstr 函数至少从 SQL2K 开始就在 SQL Server 中可用。在这里添加它只是为了完整性。一些读者可能还会发现查看此函数的源代码很有启发性。

```
declare @source varbinary(max);
set @source = 0x21232F297A57A5A743894A0E4A801FC3;
select varbin_source = @source
,string_result = master.dbo.fn_varbintohexstr (@source) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-27T09:12:06.820

如果要将单个`VARBINARY`值转换为`VARCHAR`( `STRING`)，可以通过声明如下变量来实现：

```
DECLARE @var VARBINARY(MAX)
SET @var = 0x21232F297A57A5A743894A0E4A801FC3
SELECT CAST(@var AS VARCHAR(MAX)) 
```

如果您尝试从表格列中进行选择，那么您可以这样做：

```
SELECT CAST(myBinaryCol AS VARCHAR(MAX))
FROM myTable 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-27T09:13:24.603

这适用于 SQL 2005 和 2008：

```
declare @source varbinary(max);
set @source = 0x21232F297A57A5A743894A0E4A801FC3;
select cast('' as xml).value('xs:hexBinary(sql:variable("@source"))', 'varchar(max)'); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-02T00:42:49.377

我到处寻找答案，最后这对我有用：

```
SELECT Lower(Substring(MASTER.dbo.Fn_varbintohexstr(0x21232F297A57A5A743894A0E4A801FC3), 3, 8000)) 
```

输出到（字符串）：

> 21232f297a57a5a743894a0e4a801fc3

您也可以在 WHERE 或 JOIN 条件中使用它，以防您想将 varbinary 记录与字符串进行比较/匹配

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-27T13:44:46.473

这是我编写的一个简单示例，用于使用 2 种转换方法进行转换和转换，我还使用固定字符串对其进行了检查

声明@VB1 VARBINARY(500),@VB2 VARBINARY(500),@VB3 VARBINARY(500)

声明@S1 VARCHAR(500)

SET @VB1=HASHBYTES('SHA1','Test')

SET @S1=CONVERT(varchar(500),@VB1,2)

SET @VB2=CONVERT(varbinary(500),@S1,2)

SET @VB3=CONVERT(varbinary(500),'640AB2BAE07BEDC4C163F679A746F7AB7FB5D1FA',2)

选择@VB1，@S1，@VB2，@VB3

IF @VB1=@VB2 PRINT '它们匹配 (2)'

IF @VB1=@VB3 PRINT '它们匹配 (3)'

打印 str(Len(@VB1))

打印 str(Len(@S1))

打印 str(Len(@VB2))

SET @VB1=HASHBYTES('SHA1','Test')

SET @S1=CONVERT(varchar(500),@VB1,1)

SET @VB2=CONVERT(varbinary(500),@S1,1)

选择@VB1，@S1，@VB2

IF @VB1=@VB2 PRINT '它们匹配 (1)'

打印 str(Len(@VB1))

打印 str(Len(@S1))

打印 str(Len(@VB2))

和输出

||| 0x640AB2BAE07BEDC4C163F679A746F7AB7FB5D1FA|640AB2BAE07BEDC4C163F679A746F7AB7FB5D1FA|0x640AB2BAE07BEDC4C163F679A746F7AB7FB5D1FA|0x640AB2BAE07BEDC4C16FBDF7FAB746

（1 行受影响）

他们匹配(2)

他们匹配(3)

```
 20
    40
    20 
```

|| 0x640AB2BAE07BEDC4C163F679A746F7AB7FB5D1FA|0x640AB2BAE07BEDC4C163F679A746F7AB7FB5D1FA|0x640AB2BAE07BEDC4C163F679A746F7AB7FB5D1FA

（1 行受影响）

他们匹配(1)

```
 20
    42
    20 
```

# regex - 在 Express.js 中，我将如何编写路由/正则表达式来捕获美国所有州？

> ID：12139082
> 
> 赞同：1
> 
> 时间：2012-08-27T09:09:14.947
> 
> 标签：regex, node.js, express

目前我在字符串中有如下状态：

```
var states = 'AL|AK|AR|AZ|CA|CO|CT|DC|DE|FL|GA|HI|IA|ID|IL...'; 
```

我想捕捉

> mydomain.com/CA/more-stuff

分成两个单独的参数。第一个带有状态信息，第二个带有附加信息。我知道如何获取附加信息：

```
app.get('/' ??? + '/:additional', ...); 
```

如何捕获状态信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:13:20.267

如果将其定义为路径中的参数...

```
app.get('/:stateabbr/:additional', ...); 
```

您可以使用以下方法对其进行验证[`app.param()`](http://expressjs.com/api.html#app.param)：

```
app.param('stateabbr', function (req, res, next, abbr) {
    var stateAbbrs = /AL|AK|AR|AZ|CA|CO|CT|DC|DE|FL|GA|HI|IA|ID|IL|../i

    if (stateAbbrs.test(abbr)) {
        next()
    } else {
        next(new Error('Unrecognized State abbreviation.'));
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T00:43:29.587

试试这个

```
var states = 'AL|AK|AR|AZ|CA|CO|CT|DC|DE|FL|GA|HI|IA|ID|IL...';
app.get('/:state('+ states + ')/:additional', function(req,res,next){
    res.send('state:'+req.params.state+',additional:'+req.params.additional);
}) 
```

我已经对其进行了测试，它应该可以按照您的要求工作:)

# iphone - 无法从 Github 运行 Rtsp Play 的代码

> ID：12139085
> 
> 赞同：-2
> 
> 时间：2012-08-27T09:09:26.570
> 
> 标签：iphone, xcode4.4, rtsp-client, code-signing-entitlements

我正在尝试在 iphone 中运行 rtsp 协议，所以我从这个链接下载了 RtspPlay 的代码：

[RTSPPLAY Github](https://github.com/mooncatventures-group/RTSPPlay)
我使用的是最新的 Xcode 4.4.1。但是由于错误，我在我的设备中运行此代码时遇到了问题。

> 错误是：找不到 Entitlements.plist。

请从给定的链接下载此代码，让我知道我能做什么。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T04:21:38.443

其他人运行此代码没有问题，我们已经使用 Xcode 4.3 进行了测试，可以在构建设置中删除权利文件引用，我认为没有权利比尝试使用来自不同应用程序的权利更好。

我们将进一步调查，并在需要时更新我们的存储库，我们希望 rtspplay 成为移动视频领域的有力竞争者，感谢您的反馈

# macos - mac终端，使用ls隐藏文件

> ID：12139087
> 
> 赞同：-2
> 
> 时间：2012-08-27T09:09:35.527
> 
> 标签：macos, terminal

我正在尝试访问我在应用程序下的目录中的一些文件，

```
sudo ls applications/Adobe Flash Builder 4.6 
```

由于某种原因，它找不到文件夹，应用程序中的其他文件夹可以访问（不是全部）

请指教

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:12:16.540

命令行上的空格是参数分隔符。看起来您想将四个单独的参数传递给`ls`：

*   应用程序/Adobe
*   闪光
*   建造者
*   4.6

使用引号或转义空格：

```
sudo ls "applications/Adobe Flash Builder 4.6"

sudo ls applications/Adobe\ Flash\ Builder\ 4.6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:12:30.160

您需要引用包含空格或转义空格的目录名称：

```
sudo ls "applications/Adobe Flash Builder 5.6" 
```

或者

```
sudo ls applications/Adobe\ Flash\ Builder\ 5.6 
```

最后，确保它不是`Applications`

# iphone - Interface Builder 是否向 UITableViewCell 的 contentView 添加元素？

> ID：12139092
> 
> 赞同：1
> 
> 时间：2012-08-27T09:10:00.377
> 
> 标签：iphone, ios, uitableview, interface-builder

读到现在，我了解到将 UI 元素添加到 UITableViewCell 的 contentView 是一种很好的做法。但通常，我看到这是使用代码完成的。我想知道，如果使用 Interface Builder 添加元素，是否仍会添加到 contentView？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T09:20:19.150

是的，它们被添加到 Cell.ContentView。

欲了解更多信息。请点击[链接](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7)

# c++ - SWIG：没有使用 %module 或 -module 指定模块名称

> ID：12139093
> 
> 赞同：3
> 
> 时间：2012-08-27T09:10:01.860
> 
> 标签：c++, swig

我正在使用 SWIG 为一些 C++ 代码生成一些语言绑定。我在控制台收到此警告：

> 没有使用 %module 或 -module 指定模块名称

警告是不言自明的，但我应该担心吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T02:22:06.557

是的，这是值得担心的事情。这是一个错误而不是警告，并且没有创建生成的包装文件（至少在我测试过的 SWIG 2.0.8 版本中没有）。只需添加`%module modulename`到 SWIG`.i`文件的顶部。

# c# - 方法 Enumerable.Where 中的两个候选者

> ID：12139098
> 
> 赞同：3
> 
> 时间：2012-08-27T09:10:18.583
> 
> 标签：c#, .net, .net-4.0

![截屏](../Images/b8274e81b36bebee663d0c598fbc369a.png)

有没有人遇到过这个问题？我有两个相同的候选方法 Enumerable。Func'2 和 Func'3 在哪里？

当我尝试过滤可枚举时

```
var subItems = itemsToShow.Where(item => item.Visible); 
```

我有一个错误：

无法解析方法“Where（lambda 表达式）”，候选者是

```
System.Collection.Generic.IEnumerable<T> Where<T>(this System.Collection.Generic.IEnumerable<T>, System.Func'2) (in calss Enumerable)
System.Collection.Generic.IEnumerable<T> Where<T>(this System.Collection.Generic.IEnumerable<T>, System.Func'3) (in calss Enumerable) 
```

在 .Net 3.5 上这项工作完美

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T09:12:40.173

快速浏览[MSDN](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.where.aspx)会告诉您实际上有两个重载。

一个只是基于谓词进行过滤，第二个重载还考虑了枚举中项目的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:12:54.993

`Func'3`并且`Func'2`meens 是一个具有 2 个和 3 个类型参数的泛型类。

我假设首先是你之前定义的类型`Func<T, bool>`在哪里。`T`和`Func<T, int, bool>`相同的加索引器。

`Func<T, int, bool>`- 它是一个谓词，接受两个类型的参数`T`并`int`返回`bool`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-19T14:40:00.653

只需构建解决方案并查看详细错误。我的是一个可以为空的布尔值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-28T09:21:05.923

它发生在我身上是因为我试图`.Contains`在一种`List`类型上使用，而我需要的是`.Any`

例如

```
var myObjectsList = new List<MyClass>();

// instead of this
myObjectList.Contains(x => x.Id == 1)
// use this
myObjectList.Any(x => x.Id == 1) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-05-28T21:43:27.840

尝试转换为 IQueryable。像这样： itemsToShow.AsQueryable()

# shell - 通过将文件更改为 rtf 写入文件 - awk

> ID：12139099
> 
> 赞同：0
> 
> 时间：2012-08-27T09:10:28.223
> 
> 标签：shell, awk, converter, rtf

我绊倒了一件事：

我在 awk 中对一堆文件进行排序，并将排序后的粒子保存为 txt。但现在我需要将它们保存为 .doc，尤其是横向格式。我用谷歌搜索了很多，发现这样做的唯一方法是将文件另存为 doc，但在创建文件期间，将这些`rtf code`写入文件，然后将真实内容写入文件。

rtf 开始标签代码：

```
{\rtf1\ansi\deff0 {\fonttbl {\f0 Courier;}}
{\colortbl;\red0\green0\blue0;\red255\green0\blue0;}
\landscape
\paperw15840\paperh12240\margl720\margr720\margt720\margb720 
```

和 rtf 关闭标签：

```
} 
```

关闭标记将作为文件的最后一行写入新创建的文件的最后一行之后。

我的问题是，我怎样才能在 awk 中找到文件的最后一行`END`。

这是我的代码。[http://pastebin.com/mfjH4NYY](http://pastebin.com/mfjH4NYY) 知道发生了什么是巨大的代码，但关键是：标签`fnnID`中不可用，通过这个，如果我尝试附加字符以关闭`END`，将创建一个新文件`}`rtf 格式。有人可以帮我找出线索吗？

多谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T09:48:21.030

假设您将拥有一个`write_header(filepath)`将 RTF 标头写入文件的函数。让这个函数在某个全局变量中记录`filepath`它传递的所有 s。然后，在您的 END 中，遍历这些`filepath`s 并将 RTF 页脚写入其中。

至于您的新“ls -l”问题：我不明白您为什么需要使用它。

这是我的建议：

```
function write_header(filepath) {
  print "{\\rtf1\\ans .... " >> filepath
  tracked[max_header++] = filepath
}

BEGIN {
  # You don't have to write the headers in BEGIN. Just make sure it's the
  # first thing you write to the files.
  write_header("file1.doc")
  write_header("file2.doc")
  write_header("another_file.doc")
}

END {
  # Write the footers.
  for(i in tracked) {
    print "}" >> tracked[i]
  }
} 
```

# python - 分两部分创建一个选择小部件，第一部分在第二部分中动态选择项目

> ID：12139100
> 
> 赞同：0
> 
> 时间：2012-08-27T09:10:33.230
> 
> 标签：python, django, django-widget

是否有任何预先完成的小部件可以合并到我的 django 代码中，从而创建一个非常特殊的小部件？

假设我有一个数据库

```
# this is simplified code to keep only problematic stuff
#model.py 

class Company(models.Model):
    name     = CharField( max_length = 50)

class Person(models.Model):
    name     = CharField( max_length = 26 , blank = True)
    company  = ForeignKey ( Company , related_name = 'Persons' )

class Meeting(models.Model):
    person   = ForeignKey ( Person , related_name = 'Meetings' )
    # So, there is a company in the meeting through myItem.person.company.name 
```

所以每个人都有自己的公司，并要求会议类中的公司创建一个**死亡钻石**，因为遇到的公司是由遇到的人确定的。但是，在现实生活中，在遇到某人之前，我必须先去他/她的公司。

我想为 Meeting 类中的“person”字段创建一个 javascript 小部件，以便在两波中选择联系人。

```
<select Company>  <Select Person in the company in the "Select Company" field> 
```

*   首先，选择公司。OnClick，第二个选择字段被更新，删除所有与所选公司无关的联系人。
*   然后，用户可以在所选公司中剩余的几个联系人之间进行选择。

好吧，如果用户再次单击第一个选择以选择另一家公司，我相信应该会发生复杂的想法，但让我们在第一次处理时让它变得简单......

我在网上找了好几次才能找到一个可以做的片段，但我不得不提到我在掌握找到那种代码的确切方法时遇到了一些困难......

你知道这样一个项目，小部件吗？是否有任何整合且简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:15:42.307

为此，您可以使用[django-selectable](http://django-selectable.readthedocs.org/en/version-0.5.2/advanced.html#chained-selection)或[django-autocomplete-light 。](http://django-autocomplete-light.readthedocs.org/en/latest/dependant.html)

# url - iis7 不支持多个应用程序

> ID：12139106
> 
> 赞同：0
> 
> 时间：2012-08-27T09:10:47.880
> 
> 标签：url, redirect, iis-7, configuration, ip

我正在运行 iis7。该网站有 2 个独特的应用程序，每个应用程序都在其自己的文件夹结构中，并且每个都作为应用程序安装在 iis 中。

服务器有 2 个与之关联的 IP 地址。在 iis6 中的应用程序属性页面上，您所要做的就是指定一个 IP 地址，该地址会自动将您路由到关联的应用程序。

此功能已被删除或很好地隐藏在 iis7 中。所以我的问题是，如何将特定的 IP 地址与 iis7 中的特定 iis 应用程序相关联。

urlrewrite 似乎没有涵盖这种情况，但又是凌晨 3 点……

我们将 IP 地址与特定应用程序相关联，因为从长远来看，与每个应用程序相关的交易量将决定使用其自己的服务器。\

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:24:04.887

右键单击 Web 应用程序并转到 Edit Bindings.. 您在那里设置 IP 和/或主机名绑定，他们也将证书绑定到那里的 IP

讨论后编辑：

如果您需要将应用程序绑定到不同的 IP 和/或主机名，那么您需要将它们设置为单独的网站应用程序。这可以通过右键单击`Sites`并选择来完成`Add Website`

配置应用程序后，您可以删除或停止默认网站应用程序。

有关更多信息，您可以在网站中添加应用程序的原因是您可以说，子目录中的博客，例如`www.somewebsite.com/blog`，主网站是一个应用程序，而博客是另一个应用程序。甚至可以是一个主要网站是 asp.net 的 wordpress

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T09:38:08.573

打开iis7 **-->>** 右键`Site` **-->>** 选择 `Add Website` **-->>**

在这里您可以设置`ip address,port,physical path`您的应用程序（即在 wwwroot 中）和`hostname`.

![截屏](../Images/f0b6d5648422b8706768ae88f4264c1c.png)

# c++ - c++浮点异常

> ID：12139108
> 
> 赞同：0
> 
> 时间：2012-08-27T09:10:54.807
> 
> 标签：c++

我为 Euler 项目问题 5 这样做了，但由于某种原因，我得到了一个浮点异常：

```
#include <iostream>
using namespace std;

int main ()
{
    long num;
    bool isnum = false;
    long i = 20;

    while (isnum == false)
    {
        for (int j = 0; j <= 20; j++)
        {
            if (i % j != 0)
            {
                break;
            }
            else
            {
                num = i;
                isnum = true;
            }
        }
        i+=20;
    }
    cout << num << endl;
    return 0;
} 
```

我不明白的是，当我对输出非整数的代码不做任何事情时，怎么会出现浮点异常。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T09:14:35.103

> 我 % j

这里有一个除以零，因为 j 被初始化为 0。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T09:18:15.503

由于您使用`i % j`with`j`被初始化为零，因此根据 5.6 [expr.mul] 第 4 段，您会得到未定义的行为：

> ...如果 / 或 % 的第二个操作数为零，则行为未定义。...

例如，这可能会产生浮点异常。我也可以导致更糟糕的事情发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T09:14:59.003

您`i % j`在循环的第一次迭代中使用 j == 0 `for`。

因此浮点异常。

# android - 如果不在上下文中，如何获取 ContentResolver？

> ID：12139109
> 
> 赞同：2
> 
> 时间：2012-08-27T09:10:54.697
> 
> 标签：android

我是android新手。修改PhoneWindowManager文件时需要ContentResolver实例。但是PhoneWindowManager不继承Context类。在这种情况下我不知道如何获取ContentResolver。谢谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:20:48.087

尝试创建一个扩展 PhoneWindowManager 类的新类。在这个新类中添加一个 Context 类型的新字段。创建一个构造函数，在其中提供上下文：

```
MyClass( Context cont ){
   myContext = cont;    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T09:21:32.637

PhoneWindowManager 初始化了一个 mContext 对象，因此您可以使用 contentResolver

```
mContext.getContentResolver() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T09:22:39.553

如果在某个没有的类中，`context`您可以创建一个`constructor or a method`接受上下文的类，然后使用此上下文获取 ContentResolver 实例或访问任何与上下文相关的方法。

# sql-server - 如果列不为空，则更新，如果为空，则保留为空

> ID：12139110
> 
> 赞同：14
> 
> 时间：2012-08-27T09:10:55.557
> 
> 标签：sql-server, tsql

我有以下 SQL：

```
UPDATE TableA
SET first_name = 'AAA',
    last_name = 'BBB',
    address1 = '123',
    address2 = 'Fake St.,',
    phone = '1234567',
    id = '11223344' 
```

如果每列不为空，我应该使用什么来更新每列？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-27T09:13:04.493

```
update tableA
set first_name = case when first_name is null then null else 'aaa' end,
last_name = case when last_name is null then null else 'bbb' end,
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T09:28:07.663

只是另一种不那么冗长（且可读性较差）的方法：

```
UPDATE TableA
SET first_name = left(  'AAA' + first_name, 3 )  ,
    last_name = left(  'BBB' + last_name, 3 )  ,
    address1 = left(  '123' + address1, 3 )  ,
    address2 = left(  'Fake St.,' + address2, len( 'Fake St.,' ) )  ,
    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-09T22:07:24.633

对于此示例，请使用 ISNULL 函数：

```
UPDATE TableA
SET first_name = ISNULL(first_name, NULL, 'AAA'),
    last_name = ISNULL(last_name, NULL, 'BBB'),
    (...)
GO 
```

# wordpress - 在 wordpress 的侧边栏中添加子菜单

> ID：12139111
> 
> 赞同：0
> 
> 时间：2012-08-27T09:11:00.377
> 
> 标签：wordpress, sidebar, submenu

我想在侧边栏区域左侧的自定义页面模板中显示我的页面的子菜单。有谁知道显示子菜单的代码。我正在使用`Wordpress 3.4.1`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:08:59.810

**注册菜单**

首先，在您的主题的functions.php 中，您需要编写一个函数来注册您的菜单名称。

```
 function register_my_menus() {
  register_nav_menus(
    array( 'sidebar-menu' => __( 'Sidebar Menu' ) )
  );
}
add_action( 'init', 'register_my_menus' ); 
```

**在主题上显示菜单**

完成此操作后，您的主题将几乎准备就绪。最后一个准备步骤是告诉主题您希望菜单显示在哪里。

```
<?php wp_nav_menu( array( 'theme_location' => 'sidebar-menu' ) ); ?> 
```

这就是所有的背景工作。最后，您只需访问站点管理员中的外观 -> 菜单面板。

请阅读 wordpress codex 网站.. 它有很多关于如何做到这一点的信息..

[http://codex.wordpress.org/Navigation_Menus](http://codex.wordpress.org/Navigation_Menus)

# postgresql - 如何在 PostgreSQL 中以编程方式查找继承的表？

> ID：12139116
> 
> 赞同：6
> 
> 时间：2012-08-27T09:11:29.720
> 
> 标签：postgresql, inheritance

我有一个使用表继承的 PostgreSQL 8.3 数据库。我想获取所有表的列表及其模式名称，该名称是使用查询从基表继承的。有什么方法可以使用 PGSQL 来实现吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T09:37:26.003

由于您使用的是旧版本的 PostgreSQL，您可能必须使用 PL/PgSQL 函数来处理大于 1 的继承深度。在现代 PostgreSQL（甚至 8.4）上，您将使用递归公用表表达式 ( `WITH RECURSIVE`) .

表`pg_catalog.pg_inherits`是关键。鉴于：

```
create table pp( );     -- The parent we'll search for
CREATE TABLE notpp(); -- Another root for multiple inheritance
create table cc( ) inherits (pp); -- a 1st level child of pp
create table dd( ) inherits (cc,notpp); -- a 2nd level child of pp that also inherits aa
create table notshown( ) inherits (notpp); -- Table that inherits only notpp
create table ccdd () inherits (cc,dd) -- Inheritance is a graph not a tree; join node 
```

正确的结果会找到`cc`, `dd`, and `ccdd`，但不会找到`notpp`or `notshown`。

单深度查询是：

```
SELECT pg_namespace.nspname, pg_class.relname 
FROM pg_catalog.pg_inherits 
  INNER JOIN pg_catalog.pg_class ON (pg_inherits.inhrelid = pg_class.oid) 
  INNER JOIN pg_catalog.pg_namespace ON (pg_class.relnamespace = pg_namespace.oid) 
WHERE inhparent = 'pp'::regclass; 
```

...但这只会找到`cc`.

对于多深度继承（即`tableC`继承`tableB`继承`tableA`），您必须通过递归 CTE 或 PL/PgSQL 中的循环来扩展它，使用最后一个循环的子级作为下一个循环的父级。

**更新**：这是一个 8.3 兼容版本，它应该递归地找到所有直接或间接从给定父级继承的表。如果使用多重继承，它应该在树的任何点找到任何将目标表作为其父表之一的表。

```
CREATE OR REPLACE FUNCTION find_children(oid) RETURNS SETOF oid as $$
SELECT i.inhrelid FROM pg_catalog.pg_inherits i WHERE i.inhparent = $1
UNION
SELECT find_children(i.inhrelid) FROM pg_catalog.pg_inherits i WHERE i.inhparent = $1;
$$ LANGUAGE 'sql' STABLE;

CREATE OR REPLACE FUNCTION find_children_of(parentoid IN regclass, schemaname OUT name, tablename OUT name) RETURNS SETOF record AS $$
SELECT pg_namespace.nspname, pg_class.relname 
        FROM find_children($1) inh(inhrelid) 
          INNER JOIN pg_catalog.pg_class ON (inh.inhrelid = pg_class.oid) 
          INNER JOIN pg_catalog.pg_namespace ON (pg_class.relnamespace = pg_namespace.oid);
$$ LANGUAGE 'sql' STABLE; 
```

用法：

```
regress=# SELECT * FROM find_children_of('pp'::regclass);
 schemaname | tablename 
------------+-----------
 public     | cc
 public     | dd
 public     | ccdd
(3 rows) 
```

这是递归 CTE 版本，如果您更新 Pg，它将起作用，但不适用于您当前的版本。IMO 更清洁。

```
WITH RECURSIVE inh AS (
        SELECT i.inhrelid FROM pg_catalog.pg_inherits i WHERE inhparent = 'pp'::regclass
        UNION
        SELECT i.inhrelid FROM inh INNER JOIN pg_catalog.pg_inherits i ON (inh.inhrelid = i.inhparent)
)
SELECT pg_namespace.nspname, pg_class.relname 
    FROM inh 
      INNER JOIN pg_catalog.pg_class ON (inh.inhrelid = pg_class.oid) 
      INNER JOIN pg_catalog.pg_namespace ON (pg_class.relnamespace = pg_namespace.oid); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T09:34:42.317

以下语句检索表的所有子表`public.base_table_name`：

```
select bt.relname as table_name, bns.nspname as table_schema 
from pg_class ct 
    join pg_namespace cns on ct.relnamespace = cns.oid and cns.nspname = 'public' 
    join pg_inherits i on i.inhparent = ct.oid and ct.relname = 'base_table_name' 
    join pg_class bt on i.inhrelid = bt.oid 
    join pg_namespace bns on bt.relnamespace = bns.oid 
```

它应该适用于 8.3，尽管我不确定 100%。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-12T17:36:45.580

对于那些正在运行`RECURSIVE`支持的 PostgreSQL 版本的人，这里有一个函数，可以为指定的基表查找派生表。

```
CREATE OR REPLACE FUNCTION tables_derived_from(base_namespace name, base_table name)
RETURNS TABLE (table_schema name, table_name name, oid oid)
AS $BODY$
    WITH RECURSIVE inherited_id AS
    (
        SELECT i.inhrelid AS oid
        FROM pg_inherits i
        JOIN pg_class base_t ON i.inhparent = base_t.oid
        JOIN pg_namespace base_ns ON base_t.relnamespace = base_ns.oid
        WHERE base_ns.nspname = base_namespace AND base_t.relname = base_table

        UNION

        SELECT i.inhrelid AS oid
        FROM pg_inherits i
        JOIN inherited_id b ON i.inhparent = b.oid
    )
    SELECT child_ns.nspname as table_schema, child_t.relname as table_name, child_t.oid
    FROM inherited_id i
    JOIN pg_class child_t ON i.oid = child_t.oid 
    JOIN pg_namespace child_ns ON child_t.relnamespace = child_ns.oid
    ORDER BY 1, 2, 3;
$BODY$ LANGUAGE sql STABLE; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-31T20:31:41.767

重要的是要注意一个表可以继承*多个*表，并且列出的解决方案都没有真正公开这一点；他们只是走下单亲的树。考虑：

```
CREATE TABLE a();
CREATE TABLE b();
CREATE TABLE ab_() INHERITS (a,b);
CREATE TABLE ba_() INHERITS (b,a);
CREATE TABLE ab__() INHERITS (ab_);
CREATE TABLE ba__() INHERITS (ba_);
CREATE TABLE ab_ba_() INHERITS (ab_, ba_);
CREATE TABLE ba_ab_() INHERITS (ba_, ab_);

WITH RECURSIVE inh AS (
        SELECT i.inhparent::regclass, i.inhrelid::regclass, i.inhseqno FROM pg_catalog.pg_inherits i WHERE inhparent = 'a'::regclass
        UNION
        SELECT i.inhparent::regclass, i.inhrelid::regclass, i.inhseqno FROM inh INNER JOIN pg_catalog.pg_inherits i ON (inh.inhrelid = i.inhparent)
) SELECT * FROM inh;
 inhparent | inhrelid | inhseqno 
-----------+----------+----------
 a         | ab_      |        1
 a         | ba_      |        2
 ab_       | ab__     |        1
 ba_       | ba__     |        1
 ab_       | ab_ba_   |        1
 ba_       | ab_ba_   |        2
 ba_       | ba_ab_   |        1
 ab_       | ba_ab_   |        2
(8 rows) 
```

请注意，b 根本没有出现，*这是不正确*的，因为 ab_ 和 ba_ 都继承了 b。

我怀疑处理此问题的“最佳”方法是列 text[] 并包含每个表的 (array[inhparent::regclass])::text 。那会给你类似的东西

```
inhrelid   path
ab_        {"{a,b}"}
ba_        {"{b,a}"}
ab_ba_     {"{a,b}","{b,a}"} 
```

虽然显然不理想，但这至少会暴露完整的继承路径并允许您通过足够的体操来访问它。不幸的是，构建它并不容易。

一个更简单的替代方法是不在每个级别包含完整的继承路径，只有每个表直接父级。那会给你这个：

```
inhrelid    parents
ab_         {a,b}
ba_         {b,a}
ab_ba_      {ab_,ba_} 
```

# android - 摩托罗拉 Xoom 屏幕像素在软件更新后发生了变化

> ID：12139122
> 
> 赞同：0
> 
> 时间：2012-08-27T09:11:45.917
> 
> 标签：android, screen, device, pixels, xoom

morotola xoom的屏幕像素在软件更新到newwest版本之前是1280 x 800或800 x 1280，现在是1280 x 752，然后是800 x 1232

有谁知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:15:23.903

在不知道您从哪个版本更新到哪个版本的情况下，我认为原因是操作栏/状态栏现在已从屏幕分辨率中排除。这样做是为了减少开发人员在计算游戏和其他屏幕密集型应用程序的视口时遇到的问题。

# c# - windows窗体中的多线程，窗体的多个实例并行运行

> ID：12139123
> 
> 赞同：-2
> 
> 时间：2012-08-27T09:11:49.533
> 
> 标签：c#, winforms, multithreading, multiple-instances

我有这个项目，我在其中调用 Web 服务，从 Web 服务接收费率，对其进行处理并将其显示在适当的文本框中，

正如您可以猜到的那样，等待来自 Web 服务的响应，并且处理在单个线程上的工作量太大，并且应用程序每隔一段时间就会无响应，因此我不得不使用多线程来使应用程序更具响应性。我对多线程很天真，我做了这样的事情：一个进行 web 服务调用的线程：

```
Webservicethread = new Thread(() => RefreshRates(marketId1));
            Webservicethread.Start(); 
```

该线程又调用另一个线程来完成繁重的处理部分：

```
t = new Thread(() => fillData(response.Length - 1, response));
                t.Start(); 
```

问题是这个表格应该没有。同时并行运行的实例，在我尝试在我的表单中应用多线程之前工作正常，

现在我已经尝试对其进行多线程处理，运行第二个或第三个实例会严重影响应用程序的所有其他实例的工作，并且在我打开第三个实例后它完全冻结。

我很困惑可能会做什么，有人请在这里帮助我.....：/

filldata() 方法从 web 服务响应中提取费率并将它们填充到相应的文本框中

*编辑

这是我的完整代码，抱歉，因为它太长了......

正如 Aaleksey 所建议的，我使用 ANTS 分析器分析了我的代码，filldata() 比网络服务调用消耗的时间更多。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using BetRates_NS.com.betfair.api;
using BetRates_NS.BFExchangeService;
using System.Net;
using System.Threading;

namespace BetRates_NS
{
    public partial class Rates : Form
    {
        public Rates()
        {
            InitializeComponent();
        }
        Thread t;
        Thread Webservicethread;
        private BFGlobalService bfg1 = new BFGlobalService();
        private BFExchangeService.BFExchangeService bfg2 = new BetRates_NS.BFExchangeService.BFExchangeService();
        int marketId1 = 0;
        public int MarketId1
        {
            get { return marketId1; }
            set { marketId1 = value; }
        }
        string match_name="";
        public string Match_name
        {
            get { return match_name; }
            set { match_name = value; }
        }
        string match_date = "";
        public string Match_date
        {
            get { return match_date; }
            set { match_date = value; }
        }
        string sessionToken = "";
        public string SessionToken
        {
            get { return sessionToken; }
            set { sessionToken = value; }
        }
        int max_len = 0;
        public int Max_len
        {
            get { return max_len; }
            set { max_len = value; }
        }
        bool inPlay=false;

        protected override bool ShowWithoutActivation
        {
            get { return true; }
        }
        public void ClearTextBoxes(Control control)
        {
            foreach (Control c in control.Controls)
            {
                if (c is TextBox)
                {
                    ((TextBox)c).Clear();
                }
                if (c.HasChildren)
                {
                    ClearTextBoxes(c);
                }
            }
        }

        private void RefreshRates(int marketid_temp)
        {
            try
            {
                //ClearTextBoxes(this);
                BFExchangeService.APIRequestHeader header2 = new BetRates_NS.BFExchangeService.APIRequestHeader();
                header2.clientStamp = 0;
                header2.sessionToken = sessionToken;

                //**************************** GET PRICES ****************************

                GetMarketPricesCompressedReq price_req1 = new GetMarketPricesCompressedReq();
                price_req1.header = header2;
                price_req1.marketId = marketId1;
                price_req1.currencyCode = "GBP";
                GetMarketPricesCompressedResp price_resp = new GetMarketPricesCompressedResp();
                price_resp = bfg2.getMarketPricesCompressed(price_req1);
                string prices = price_resp.marketPrices;
                string[] Parts = prices.Split(':');
                is_InPlay(Parts[0]);
                t = new Thread(() => fillData(Parts.Length - 1, Parts));
                t.Start();
                //fillData(Parts.Length - 1, Parts);
            }
            catch (Exception ep)
            {
                //MessageBox.Show(ep.Message);
            }
        }

        private void is_InPlay(string temp)
        {
            string[] check = temp.Split('~');
            if (Convert.ToInt32(check[3]) != 0)
            {
                inPlay = true;
                pictureBox2.Visible = true;
                ToolTip t1 = new ToolTip();
                t1.SetToolTip(this.pictureBox2, "InPlay");
            }
            else
            {
                inPlay = false;
                pictureBox2.Visible = false;
            }
        }

        private void Rates_Load(object sender, EventArgs e)
        {
            this.Text = match_name;
            //lbl_match.Text = match_name;
            BFExchangeService.APIRequestHeader header2 = new BetRates_NS.BFExchangeService.APIRequestHeader();
            header2.clientStamp = 0;
            header2.sessionToken = sessionToken;

            GetMarketReq market_req1 = new GetMarketReq();
            market_req1.header = header2;
            market_req1.marketId = Convert.ToInt32(marketId1);
            GetMarketResp market_resp1= bfg2.getMarket(market_req1);
            Market market1 = market_resp1.market;
            Runner[] runners_list = market1.runners;
            makeMyRows(runners_list.Length);
            this.Height=60+(36*runners_list.Length);
            int max_length = 0;
            for (int i = 0; i < runners_list.Length; i++)
            {
                if (max_length < runners_list[i].name.Length)
                {
                    max_length = runners_list[i].name.Length;
                }
                int label_counter = i + 1;
                string ctrl_name = "lbl" + label_counter.ToString();
                Label temp = null;
                foreach (Control ctl in this.Controls)
                {
                    if ((ctl is Label) && (ctl.Name == ctrl_name))
                   { temp = (Label)ctl; }
                }
                if (temp != null)
                { temp.Text = runners_list[i].name; }
            }
            //max_len = max_length;
            //MessageBox.Show(max_len.ToString());
            System.Windows.Forms.Timer myTimer = new System.Windows.Forms.Timer();
            myTimer.Interval = 200;
            myTimer.Tick += new EventHandler(myTimer_Tick);
            myTimer.Enabled = true;
            this.Focus();
            if (this.VerticalScroll.Visible == true)
            {
                this.Width = this.Width + 24;
            }
        }

        private void myTimer_Tick(object sender, EventArgs e)
        {
            Webservicethread = new Thread(() => RefreshRates(marketId1));
            Webservicethread.Start();
            //RefreshRates(marketId1);
        }

        private void button1_Click(object sender, EventArgs e)
        {

        }

        private void button1_Click_1(object sender, EventArgs e)
        {
            this.Refresh();
            this.RefreshRates(marketId1);
        }

        private void groupBox1_Enter(object sender, EventArgs e)
        {

        }

        //public delegate void FillData1(int count1, string[] parts1);
        private void fillData(int count,string[] Parts)
        {
            for (int i = 1; i <= count; i++)
            {
                string[] subParts = Parts[i].Split('|');
                for (int j = 1; j <= subParts.Length-1; j++)
                {
                    string[] Fields = subParts[j].Split('~');
                    for (int k = 1; k <= 6; k++)
                    {
                        string compare_txt = "";
                        string ctrl_name = "txt" + i.ToString() + k.ToString();
                        TextBox temp = null;// = (TextBox)findCtrl(ctrl_name);
                        foreach (Control ctl in this.Controls)
                        {
                            if ((ctl is TextBox) && (ctl.Name == ctrl_name))
                            { temp = (TextBox)ctl; }
                        }
                        if (j == 1)
                        {
                            switch (k)
                            {
                                case 1:
                                    compare_txt = temp.Text;
                                    //temp.Text = "";
                                    temp.Invoke(new AddText1(AddText), new object[] { ctrl_name, "" });
                                    if (Fields.Length >= 9)
                                    {
                                        if (!string.IsNullOrEmpty(Fields[8]))
                                        {
                                            this.Invoke(new AddText1(AddText), new object[] { ctrl_name, Fields[8] });
                                            //temp.Text = Fields[8];
                                        }
                                    }
                                    if (Fields.Length >= 10)
                                    {
                                        if (!string.IsNullOrEmpty(Fields[9]))
                                        {
                                            this.Invoke(new AddText1(AddText), new object[] { ctrl_name, temp.Text + "\r\n£" + Fields[9] });
                                            //temp.Text = temp.Text + "\r\n£" + Fields[9]; 
                                        }
                                    }
                                    if (temp.Text != compare_txt)//check if value has changed, if yes blink
                                    { temp.BackColor = Color.LightGreen; }
                                    else
                                    { temp.BackColor = Color.Lavender; }
                                    break;
                                case 2:
                                    compare_txt = temp.Text;
                                    this.Invoke(new AddText1(AddText), new object[] { ctrl_name, "" });
                                    //temp.Text = "";
                                    if (Fields.Length >= 5)
                                    {
                                        if (!string.IsNullOrEmpty(Fields[4]))
                                        {
                                            this.Invoke(new AddText1(AddText), new object[] { ctrl_name, Fields[4] });
                                            //temp.Text = Fields[4];
                                        }
                                    }
                                    if (Fields.Length >= 6)
                                    {
                                        if (!string.IsNullOrEmpty(Fields[5]))
                                        {
                                            this.Invoke(new AddText1(AddText), new object[] { ctrl_name, temp.Text + "\r\n£" + Fields[5] });
                                            //temp.Text = temp.Text + "\r\n£" + Fields[5];
                                        }
                                    }
                                    if (temp.Text == compare_txt)
                                    { temp.BackColor = Color.Thistle; }
                                    else
                                    { temp.BackColor = Color.LightGreen; }
                                    break;
                                case 3:
                                    compare_txt = temp.Text;
                                    this.Invoke(new AddText1(AddText), new object[] { ctrl_name, "" });
                                    //temp.Text = "";
                                    if (Fields.Length >= 1)
                                    {
                                        if (!string.IsNullOrEmpty(Fields[0]))
                                        {
                                            this.Invoke(new AddText1(AddText), new object[] { ctrl_name, Fields[0] });                                            
                                            //temp.Text = Fields[0];
                                        }
                                    }
                                    if (Fields.Length >= 2)
                                    {
                                        if (!string.IsNullOrEmpty(Fields[1]))
                                        {
                                            this.Invoke(new AddText1(AddText), new object[] { ctrl_name, temp.Text + "\r\n£" + Fields[1] });                                                                                        
                                            //temp.Text = temp.Text + "\r\n£" + Fields[1];
                                        }
                                    }
                                    if (temp.Text == compare_txt)
                                    { temp.BackColor = Color.FromArgb(192, 192, 255); }
                                    else
                                    { temp.BackColor = Color.LightGreen; }
                                    break;
                            }
                        }
                        else if (j == 2)
                        {
                            switch (k)
                            {
                                case 4:
                                    compare_txt = temp.Text;
                                    this.Invoke(new AddText1(AddText), new object[] { ctrl_name, "" });
                                    //temp.Text = "";
                                    if (Fields.Length >= 1)
                                    {
                                        if (!string.IsNullOrEmpty(Fields[0]))
                                        {
                                            this.Invoke(new AddText1(AddText), new object[] { ctrl_name, Fields[0] });
                                            //temp.Text = Fields[0]; 
                                        }
                                    }
                                    if (Fields.Length >= 2)
                                    {
                                        if (!string.IsNullOrEmpty(Fields[1]))
                                        {
                                            this.Invoke(new AddText1(AddText), new object[] { ctrl_name, temp.Text + "\r\n£" + Fields[1] });                                                                                                                                    
                                            //temp.Text = temp.Text + "\r\n£" + Fields[1];
                                        }
                                    }
                                    if (temp.Text == compare_txt)
                                    { temp.BackColor = Color.FromArgb(255, 192, 192); }
                                    else
                                    { temp.BackColor = Color.LightGreen; }
                                    break;
                                case 5:
                                    compare_txt = temp.Text;
                                    this.Invoke(new AddText1(AddText), new object[] { ctrl_name, "" });
                                    //temp.Text = "";
                                    if (Fields.Length >= 5)
                                    {
                                        if (!string.IsNullOrEmpty(Fields[4]))
                                        {
                                            this.Invoke(new AddText1(AddText), new object[] { ctrl_name, Fields[4] });
                                            //temp.Text = Fields[4]; 
                                        }
                                    }
                                    if (Fields.Length >= 6)
                                    {
                                        if (!string.IsNullOrEmpty(Fields[5]))
                                        {
                                            this.Invoke(new AddText1(AddText), new object[] { ctrl_name, temp.Text + "\r\n£" + Fields[5] });                                                                                                                                    
                                            //temp.Text = temp.Text + "\r\n£" + Fields[5]; 
                                        }
                                    }
                                    if (temp.Text == compare_txt)
                                    { temp.BackColor = Color.MistyRose; }
                                    else
                                    { temp.BackColor = Color.LightGreen; }
                                    break;
                                case 6:
                                    compare_txt = temp.Text;
                                    this.Invoke(new AddText1(AddText), new object[] { ctrl_name, "" });
                                    //temp.Text = "";
                                    if (Fields.Length >= 9)
                                    {
                                        if (!string.IsNullOrEmpty(Fields[8]))
                                        {
                                            this.Invoke(new AddText1(AddText), new object[] { ctrl_name, Fields[8] });
                                            //temp.Text = Fields[8];
                                        }
                                    }
                                    if (Fields.Length >= 10)
                                    {
                                        if (!string.IsNullOrEmpty(Fields[9]))
                                        {
                                            this.Invoke(new AddText1(AddText), new object[] { ctrl_name, temp.Text + "\r\n£" + Fields[9] });
                                            //temp.Text = temp.Text + "\r\n£" + Fields[9];
                                        }
                                    }
                                    if (temp.Text == compare_txt)
                                    { temp.BackColor = Color.Lavender; }
                                    else
                                    { temp.BackColor = Color.LightGreen; }
                                    break;
                            }
                        }
                    }
                }
            }
        }

        public delegate void AddText1(string ctrl_n, string text_a);
        private void AddText(string ctrl_name, string text_assign)
        {
            TextBox temp = null;// = (TextBox)findCtrl(ctrl_name);
            foreach (Control ctl in this.Controls)
            {
                if ((ctl is TextBox) && (ctl.Name == ctrl_name))
                { temp = (TextBox)ctl; }
            }
            temp.Text = text_assign;
        }

        private void makeMyRows(int count)
        {
            int X = 10, Y = 23;
            for (int i = 1; i <= count; i++)
            {
                Label label = new Label();
                label.Name = "lbl" + i.ToString();
                label.Location = new Point(X, Y);
                label.BackColor = Color.Transparent;
                label.Font=new Font("Calibri Sans-Serif", 10);
                label.Font = new Font(label.Font, FontStyle.Bold);
                label.ForeColor = Color.White;
                this.Controls.Add(label);
                X = X + 118;
                for (int j = 1; j <= 6; j++)
                {
                    TextBox tb = new TextBox();
                    tb.Name = "txt" + i.ToString() + j.ToString();
                    tb.ReadOnly = true;
                    tb.Location = new Point(X,Y);
                    tb.Size = new Size(55, 30);
                    tb.Font = new System.Drawing.Font("Arial, Helvetica, sans-serif", (float)7.5);
                    tb.TextAlign = HorizontalAlignment.Center;
                    tb.BorderStyle = BorderStyle.FixedSingle;
                    tb.Font = new Font(tb.Font, FontStyle.Regular);
                    tb.Multiline = true;
                    switch (j)
                    { 
                        case 1:
                            tb.BackColor = Color.Lavender;
                            break;
                        case 2:
                            tb.BackColor = Color.Thistle;
                            break;
                        case 3:
                            tb.BackColor = Color.FromArgb(192, 192, 255);
                            break;
                        case 4:
                            tb.BackColor = Color.FromArgb(255, 192, 192);
                            break;
                        case 5:
                            tb.BackColor = Color.MistyRose;
                            break;
                        case 6:
                            tb.BackColor = Color.Lavender;
                            break;

                    }
                    this.Controls.Add(tb);
                    X = X + 61;
                }
                X = 10; Y = Y + 36;
            }
        }

        //************preventing flicker*************
        int originalExStyle = -1;
        bool enableFormLevelDoubleBuffering = true;

        protected override CreateParams CreateParams
        {
            get
            {
                if (originalExStyle == -1)
                    originalExStyle = base.CreateParams.ExStyle;

                CreateParams cp = base.CreateParams;
                if (enableFormLevelDoubleBuffering)
                    cp.ExStyle |= 0x02000000;   // WS_EX_COMPOSITED
                else
                    cp.ExStyle = originalExStyle;

                return cp;
            }
        }

        private void TurnOffFormLevelDoubleBuffering()
        {
            enableFormLevelDoubleBuffering = false;
            this.MaximizeBox = true;
        }

        private void Rates_Shown(object sender, EventArgs e)
        {
            TurnOffFormLevelDoubleBuffering();
        }

        //******************************************

        private void pictureBox2_Click(object sender, EventArgs e)
        {

        }

        private void pictureBox1_Click(object sender, EventArgs e)
        {
            this.Refresh();
            RefreshRates(marketId1);
        }

        private void pictureBox1_MouseLeave(object sender, EventArgs e)
        {
            pictureBox1.BackgroundImage = ((System.Drawing.Image)(Properties.Resources.Refresh1));
        }

        private void pictureBox1_MouseEnter(object sender, EventArgs e)
        {
            pictureBox1.BackgroundImage = ((System.Drawing.Image)(Properties.Resources.Refresh_hover));
        }

        private void Rates_FormClosing(object sender, FormClosingEventArgs e)
        {
            t.Abort();
            Webservicethread.Abort();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:57:49.693

好吧，鉴于`fillData`是瓶颈，你会做很多优化。而且我很难说清楚应该在代码中更改什么以使其足够快。

我现在唯一可以建议的是优化那部分：

```
 foreach (Control ctl in this.Controls)
                        {
                            if ((ctl is TextBox) && (ctl.Name == ctrl_name))
                            { temp = (TextBox)ctl; }
                        } 
```

1.尝试使用 `this.Controls.Find()`
2.尝试缓存控件而不是搜索它。3.玩得开心:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:33:40.417

这可能会帮助你

1.  创建一个后台线程，它将异步调用 Web 服务。

2.  定义一个委托，其中包含 Web 服务返回给您的结果。

3.  当您收到结果时，使用委托/事件将结果传递给表单。

4.  在表单上显示从事件接收到的值（使用 InvokeRequired）

# xslt - XSLT 1.0 - 按未知父级和父级兄弟分组

> ID：12139124
> 
> 赞同：1
> 
> 时间：2012-08-27T09:11:53.750
> 
> 标签：xslt, grouping, xslt-1.0

继我关于[XSLT 1.0 - Concatenate known child nodes, group by unknown parent的查询之后，](https://stackoverflow.com/questions/12134880/xslt-1-0-concatenate-known-child-nodes-group-by-unknown-parent/12135064)[在重复上层节点时与 Group/merge childs of same nodes in xml/xslt](https://stackoverflow.com/questions/11970395/group-merge-childs-of-same-nodes-in-xml-xslt-when-repeating-upper-nodes?lq=1)类似的困境，我想进一步定义我的分组，并且转换

```
 <root>
    <object>
    <entry>
        <id>apples</id>
        <parent1>
            <object_id>1</object_id>
        </parent1>
        <parent1>
            <object_id>2</object_id>
        </parent1>
        <parent2>
            <object_id>3</object_id>
        </parent2>
        <parent2>
            <object_id>4</object_id>
        </parent2>
        <parent2>
            <object_id>5</object_id>
        </parent2>
    </entry>
    </object>
    <object>
    <entry>
        <id>pears</id>
        <parent1>
            <object_id>5</object_id>
        </parent1>
        <parent1>
            <object_id>4</object_id>
        </parent1>
        <parent2>
            <object_id>3</object_id>
        </parent2>
        <parent2>
            <object_id>2</object_id>
        </parent2>
        <parent2>
            <object_id>1</object_id>
        </parent2>
    </entry>
    </object>
    </root> 
```

进入

```
 <root>
    <object>
        <entry>
            <id>apples</id>
            <parent1>1-2</parent1>
            <parent2>3-4-5</parent2>
        </entry>
    </object>
    <object>
        <entry>
            <id>pears</id>
            <parent1>5-4</parent1>
            <parent2>3-2-1</parent2>
        </entry>
    </object>
    </root> 
```

我正在尝试这样的事情（尽管整个示例已简化）：

```
 <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes" />
    <xsl:key name="groupKey" match="/object/*/*/object_id" use="concat(../../id/text(),name(..))"/>
    <xsl:template match="/">
            <xsl:apply-templates select="./*[object_id]"/>
    </xsl:template>

    <xsl:template match="/object/*/*[generate-id(object_id)=generate-id(key('groupName',concat(../id/text(),name()))[1])]">
            <field>
                  <xsl:attribute name="name">
                    <xsl:value-of select="local-name()" />
                </xsl:attribute>
                 <xsl:for-each select="key('groupName',concat(../id/text(),name()))">
                    <xsl:if test="not(position()=1)">-</xsl:if>
                    <xsl:value-of select="."/>
                 </xsl:for-each>
       </field>
     </xsl:template>

    </xsl:stylesheet> 
```

但是我缺乏对 XPath 的理解，这是在每个父分组的第一个中整理**所有**对象 ID（即，连接键不起作用）。

如果有人可以帮助我整理我的 XPath 语法，我将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:17:30.317

我认为在此示例中，您将按“父”元素进行组合，而**object_id**元素将在组中。因此，您可以像这样定义您的密钥

```
<xsl:key name="groupKey" match="*[object_id]" use="concat(../id/text(), '|', name())"/> 
```

请注意，无需指定父元素的完整路径。如果您想将其限制在层次结构的某个部分，您只会这样做。还要注意分隔符“|”的使用 这里。在这种情况下可能没有必要，它通常用于连接键中，以防止两个不同的值对连接到相同的值。

然后，当您定位在**入口**元素上时，您将获得唯一的“父”元素，如下所示：

```
<xsl:apply-templates 
  select="*
     [object_id]
     [generate-id() = generate-id(key('groupKey', concat(../id/text(), '|', name()))[1])]" /> 
```

然后，当您位于每个不同的“父”元素中的第一个时，您将获得**object_id**元素，如下所示

```
<xsl:apply-templates select="key('groupKey', concat(../id/text(), '|', name()))/object_id"/> 
```

与此匹配的模板将仅输出文本，并在需要时输出分隔符。

这是完整的 XSLT

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
   <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
   <xsl:key name="groupKey" match="*[object_id]" use="concat(../id/text(), '|', name())"/>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="entry">
      <entry>
         <xsl:apply-templates select="id|*[object_id][generate-id() = generate-id(key('groupKey', concat(../id/text(), '|', name()))[1])]"/>
      </entry>
   </xsl:template>

   <xsl:template match="*[object_id]">
      <xsl:copy>
         <xsl:apply-templates select="key('groupKey', concat(../id/text(), '|', name()))/object_id"/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="object_id">
      <xsl:if test="not(position()=1)">-</xsl:if>
      <xsl:value-of select="."/>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<root>
   <object>
      <entry>
         <id>apples</id>
         <parent1>1-2</parent1>
         <parent2>3-4-5</parent2>
      </entry>
   </object>
   <object>
      <entry>
         <id>pears</id>
         <parent1>5-4</parent1>
         <parent2>3-2-1</parent2>
      </entry>
   </object>
</root> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T11:18:48.930

**这个短暂的转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kObjByParentAndId" match="object_id"
  use="concat(../../id,'+',name(..))"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="*[object_id]"/>

 <xsl:template  priority="2" match=
 "*[object_id and
    generate-id(object_id)
   =
    generate-id(key('kObjByParentAndId', concat(../id,'+',name()))[1])
    ]">
    <xsl:copy>
      <xsl:for-each select="key('kObjByParentAndId', concat(../id,'+',name()))">
        <xsl:if test="position()>1"> - </xsl:if>
        <xsl:value-of select="."/>
      </xsl:for-each>
    </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<root>
    <object>
        <entry>
            <id>apples</id>
            <parent1>
                <object_id>1</object_id>
            </parent1>
            <parent1>
                <object_id>2</object_id>
            </parent1>
            <parent2>
                <object_id>3</object_id>
            </parent2>
            <parent2>
                <object_id>4</object_id>
            </parent2>
            <parent2>
                <object_id>5</object_id>
            </parent2>
        </entry>
    </object>
    <object>
        <entry>
            <id>pears</id>
            <parent1>
                <object_id>5</object_id>
            </parent1>
            <parent1>
                <object_id>4</object_id>
            </parent1>
            <parent2>
                <object_id>3</object_id>
            </parent2>
            <parent2>
                <object_id>2</object_id>
            </parent2>
            <parent2>
                <object_id>1</object_id>
            </parent2>
        </entry>
    </object>
</root> 
```

**产生想要的正确结果：**

```
<root>
   <object>
      <entry>
         <id>apples</id>
         <parent1>1 - 2</parent1>
         <parent2>3 - 4 - 5</parent2>
      </entry>
   </object>
   <object>
      <entry>
         <id>pears</id>
         <parent1>5 - 4</parent1>
         <parent2>3 - 2 - 1</parent2>
      </entry>
   </object>
</root> 
```

**说明**：

1.  **[身份规则](http://dpawson.co.uk/xsl/sect2/identity.html)**用于重新创建上层层次结构。

2.  有两个模板覆盖了标识模板——一个“删除（具有空主体）任何具有`object_id`子元素的匹配元素。另一个（具有更高优先级）被选择用于具有子元素的任何元素，该`object_id`子元素是“其组中的第一个” - 使用经典**[的 Muenchian 分组方法](http://www.jenitennison.com/xslt/grouping/muenchian.html)**。

3.  Muenchian 分组使用复合**[键](http://www.w3.org/TR/1999/REC-xslt-19991116#key)**，它是整个组的串联（带有安全分隔符）和该`id`组中任何父级的名称`object_id`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T11:47:32.510

Strangely enough, my answer to your previous question, unaltered but for a small defect correction (identity template for group-head mode) works perfectly for this question too. Granted my answer was not accepted, but I find it ironic that I gave you the answer to this question (apparently untried), even before you posted it!

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<xsl:strip-space elements="*" />  

<xsl:key name="kParents" match="*[object_id]" use="local-name()" />

<xsl:template match="@*|node()">
 <xsl:copy>
   <xsl:apply-templates select="@*|node()" />
 </xsl:copy>
</xsl:template>

<xsl:template match="*[*/object_id]">
  <xsl:variable name="grandparent-id" select="generate-id()" /> 
 <xsl:copy>
   <xsl:apply-templates select="@* | node()[not(object_id)] |
    *[generate-id()=
      generate-id(
        key('kParents',local-name())[generate-id(..)=$grandparent-id][1])]"
      mode="group-head" />
 </xsl:copy>
</xsl:template>

<xsl:template match="*[object_id]" mode="group-head">
 <xsl:variable name="grandparent-id" select="generate-id(..)" /> 
 <xsl:copy>
   <xsl:apply-templates select="@* | node()[not(self::object_id)]" />
   <xsl:for-each select="key('kParents',local-name())[generate-id(..)=$grandparent-id]/object_id">
     <xsl:value-of select="." />
     <xsl:if test="position() != last()"> - </xsl:if>  
   </xsl:for-each>  
  </xsl:copy>
</xsl:template>

<xsl:template match="@*|node()" mode="group-head">
 <xsl:copy>
   <xsl:apply-templates select="@*|node()" />
 </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

# jquery - 如果表格长度超出，防止在文本框中写入

> ID：12139125
> 
> 赞同：0
> 
> 时间：2012-08-27T09:12:04.497
> 
> 标签：jquery

所以我在我的项目中使用jquery标签输入我想检查用户是否输入了超过最大允许标签我应该阻止他写我该怎么做。PS：我不想禁用输入

到目前为止，这是我的代码：

```
<script type="text/javascript">
$(document).ready(function(){
$('#tag1').tagsInput({
'width':'300px',
'height':'50px',
'minChars' : 1,
'maxChars' : 12,
'onAddTag':tagsCountExceeded

});

function tagsCountExceeded(){

var TagsCount=2;
var TagsTable=$('#tag1').val().split(",");

$('#tag1').keypress(function(e){
if(TagsTable.length==TagsCount)
e.preventDefault();
});

}

 });
</script> 
```

但 keyPress 功能不起作用

# oracle - 具有枚举外键的休眠实体

> ID：12139148
> 
> 赞同：2
> 
> 时间：2012-08-27T09:13:18.397
> 
> 标签：oracle, hibernate, enums, mapping

我不确定主题名称是否有意义。无论如何，问题是在我的表中我有将 fk 存储到字典表的列，我想在休眠中以 getType 将从该字典返回值的方式映射它。例如，我有类型 id = 1 的行，在字典中对应于 HIGH，并且我在 java 中声明了这样的枚举作为 ProductType，我想要方法 ProductType getType()，它会自动将值从列类型映射到我的枚举。

如果有不清楚的地方，请告诉我。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:28:04.077

这是我的问题的答案

```
@Column(name="TYPE_ID") 
@Enumerated(EnumType.ORDINAL) 
private MyType myType; 
```

当然，我的枚举如下所示：

```
public enum MyType {

HIGH(1),
LOW(2); 
```

# mongodb - 使用 MongoDB 的 MapReduce 非常非常慢（对于等效数据库，在 MySQL 中 30 小时 vs 20 分钟）

> ID：12139149
> 
> 赞同：8
> 
> 时间：2012-08-27T09:13:21.720
> 
> 标签：mongodb, hadoop, mapreduce

我现在正在做一些数据分析测试，首先，非常简单，我得到了非常奇怪的结果。

想法如下：来自互联网访问日志（每次访问包含一个文档的集合，用于测试 9000 万个文档）。我想按域获取访问次数（在 MySQL 中将是 GROUP BY），并获取访问次数最多的 10 个域

我用 JavaScript 编写的脚本非常简单：

```
/* Counts each domain url */
m = function () {
    emit(this.domain, 1 );
}

r = function (key, values)    {
    total = 0;
    for (var i in values)    {
        total += Number(i);
    }

    return total;
}

/* Store of visits per domain statistics on NonFTP_Access_log_domain_visits collection */
res = db.NonFTP_Access_log.mapReduce(m, r, { out: { replace : "NonFTP_Access_log_domain_visits" } } );
db.NonFTP_Access_log_domain_visits.ensureIndex({ "value": 1});
db.NonFTP_Access_log_domain_visits.find({}).sort({ "value":-1 }).limit(10).forEach(printjson); 
```

MySQL中的等价物是：

```
drop table if exists NonFTP_Access_log_domain_visits;
create table NonFTP_Access_log_domain_visits (
    `domain` varchar(255) NOT NULL,
    `value` int unsigned not null,
    PRIMARY KEY  (`domain`),
    KEY `value_index` (`value`)
    ) ENGINE=MyISAM DEFAULT CHARSET=utf8
    select domain, count(*) as value from NonFTP_Access_log group by domain;
select * from NonFTP_Access_log_domain_visits order by value desc limit 10; 
```

**嗯，MongoDB 需要 30 小时才能得到结果，而 MySQL 需要 20 分钟！**读了一点之后，我得出的结论是，对于数据分析，我们将不得不使用 Hadoop，因为 MongoDB 真的很慢。像这样的问题的答案是这样的：

*   MongoDB 只使用线程
*   Javascript太慢了

**我究竟做错了什么？这个结果正常吗？我应该使用Hadoop吗？**

我们正在以下环境中进行此测试：

*   操作系统：Suse Linux Enterprise Server 10（Xen 上的虚拟服务器）
*   内存：10 Gb
*   核心数：32（AMD Opteron 处理器 6128）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-27T10:04:44.370

实际上，我之前已经回答过这个[非常相似的问题](https://stackoverflow.com/questions/12062585/mongodb-groupby-slow-even-after-adding-index/12063254#12063254)。之前已经概述了 MongoDB 中 Map Reduce 的限制 - 正如您所提到的，它是单线程的，它必须转换为 Java Script（spidermonkey）并返回等。

这就是为什么还有其他选择：

1.  [MongoDB Hadoop 连接器](http://api.mongodb.org/hadoop/MongoDB+Hadoop+Connector.html)（官方支持）
2.  [聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)（需要 2.1+）

在撰写本文时，2.2.0 稳定版还没有发布，但它已经到了 RC2，所以发布应该是迫在眉睫。我建议试一试，作为此类测试的更有意义的比较。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T08:50:34.840

显然使用[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)上的组功能效果很好！:-)

**下面的 Javascript 代码在17 分钟 17 秒内**获得了访问量最大的 10 个域！

```
db.NonFTP_Access_log.aggregate(
    { $group: {
        _id: "$domain",
        visits: { $sum: 1 }
        }},
    { $sort: { visits: -1 } },
    { $limit: 10 }
    ).result.forEach(printjson); 
```

无论如何，我仍然不明白为什么 MapReduce 替代方案如此缓慢。我[在 MongoDB JIRA 中打开了以下问题](https://jira.mongodb.org/browse/SERVER-6869)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T19:55:08.307

我认为您的结果很正常，并会尝试证明它们的合理性<.br> 1\. MySQL 使用二进制格式，该格式针对处理进行了优化，而 MongoDB 使用 JSON。因此，解析时间被添加到处理中。我估计它至少是 10 倍。
2\. JS 确实比 C 慢得多。我认为至少可以假设 10 倍。我们一起得到大约 x100 - 类似于您所看到的。20 分钟 x 1000 是 2000 分钟或大约 33 小时。
3\. Hadoop 对数据处理的效率也不高，但它能够使用您拥有的所有内核，并且有所作为。Java 还拥有超过 10 年的 JIT 开发和优化。
4\. 我建议不要看 MySQL，而是看 TPC-H benchmark Q1 - 这是纯粹的聚合。我认为像 VectorWise 这样的系统将显示每个内核的最大可能吞吐量。

# javascript - 如何在 AngularJS 的 ng-options 中设置 value 属性？

> ID：12139152
> 
> 赞同：566
> 
> 时间：2012-08-27T09:13:25.417
> 
> 标签：javascript, angularjs

这似乎困扰着很多人（包括我）。

在使用`ng-options`AngularJS 中的指令填充`<select>`标签的选项时，我无法弄清楚如何设置选项的值。这方面的文档真的不清楚 - 至少对于像我这样的傻瓜来说。

我可以像这样轻松地为选项设置文本：

```
ng-options="select p.text for p in resultOptions" 
```

`resultOptions`例如什么时候：

```
[
    {
        "value": 1,
        "text": "1st"
    },
    {
        "value": 2,
        "text": "2nd"
    }
] 
```

设置选项值应该是（并且可能是）最简单的事情，但到目前为止我还是不明白。

* * *

## 回答 #1

> 赞同：711
> 
> 时间：2012-08-27T10:33:05.293

> 见*[ngOptions](https://docs.angularjs.org/api/ng/directive/ngOptions#ngOptions-arguments)*
> 
> **ngOptions(optional)** – { `comprehension_expression=`} – 以下形式之一：
> 
> *对于数组数据源*： `label for value in array` `select as label for value in array` `label group by group for value in array` `select as label group by group for value in array track by trackexpr` *对于对象数据源：* `label for (key , value) in object` `select as label for (key , value) in object` `label group by group for (key, value) in object` `select as label group by group for (key, value) in object`

在你的情况下，它应该是

```
array = [{ "value": 1, "text": "1st" }, { "value": 2, "text": "2nd" }];

<select ng-options="obj.value as obj.text for obj in array"></select> 
```

## 更新

随着 AngularJS 的更新，现在可以为带有表达式的元素的`value`属性设置实际值。`select``track by`

```
<select ng-options="obj.text for obj in array track by obj.value">
</select> 
```

## 如何记住这些丑陋的东西

对于所有难以记住这种语法形式的人：我同意这不是最简单或最漂亮的语法。这种语法是 Python 列表推导的一种扩展版本，并且知道这有助于我很容易地记住语法。是这样的：

Python代码：

```
my_list = [x**2 for x in [1, 2, 3, 4, 5]]
> [1, 4, 9, 16, 25]

# Let people to be a list of person instances
my_list2 = [person.name for person in people]
> my_list2 = ['Alice', 'Bob'] 
```

这实际上与上面列出的第一个语法相同。但是，`<select>`我们通常需要区分代码中的实际值和`<select>`元素中显示的文本（标签）。

就像，我们需要`person.id`在代码中，但我们不想向`id`用户显示；我们想显示它的名字。同样，我们对`person.name`代码中的 不感兴趣。有`as`关键字来标记东西。所以它变成了这样：

```
person.id as person.name for person in people 
```

或者，`person.id`我们可能需要`person`实例/引用本身，而不是。见下文：

```
person as person.name for person in people 
```

对于 JavaScript 对象，同样的方法也适用。请记住，对象中的项目是用`(key, value)`对解构的。

* * *

## 回答 #2

> 赞同：138
> 
> 时间：2012-09-12T08:44:07.083

值属性如何获取其值：

*   使用数组作为数据源时，每次迭代都会是数组元素的索引；
*   当使用对象作为数据源时，它将是每次迭代中的属性名称。

所以在你的情况下应该是：

```
obj = { '1': '1st', '2': '2nd' };

<select ng-options="k as v for (k,v) in obj"></select> 
```

* * *

## 回答 #3

> 赞同：123
> 
> 时间：2014-04-10T19:17:37.867

我也有这个问题。我无法在 ng-options 中设置我的值。生成的每个选项都设置为 0、1、...、n。

为了使它正确，我在我的 ng-options 中做了这样的事情：

### HTML：

```
<select ng-options="room.name for room in Rooms track by room.price">
    <option value="">--Rooms--</option>
</select> 
```

我使用“track by”来设置我的所有值`room.price`。

（这个例子很糟糕：因为如果有多个相同的价格，代码就会失败。所以请确保有不同的值。）

### JSON：

```
$scope.Rooms = [
            { name: 'SALA01', price: 100 },
            { name: 'SALA02', price: 200 },
            { name: 'SALA03', price: 300 }
        ]; 
```

我从博客文章*[How to set the initial selected value of a select element using Angular.JS ng-options & track by 中了解到](http://gurustop.net/blog/2014/01/28/common-problems-and-solutions-when-using-select-elements-with-angular-js-ng-options-initial-selection/)*。

观看视频。这是一堂很好的课:)

* * *

## 回答 #4

> 赞同：47
> 
> 时间：2013-06-12T16:35:04.873

如果您想更改`option`元素的值，因为表单最终将提交到服务器，而不是这样做，

```
<select name="text" ng-model="text" ng-options="select p.text for p in resultOptions"></select> 
```

你可以这样做：

```
<select ng-model="text" ng-options="select p.text for p in resultOptions"></select>
<input type="hidden" name="text" value="{{ text }}" /> 
```

然后将通过正确名称的表单发送预期值。

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2013-11-28T19:00:06.267

`my_hero`要使用普通表单提交将调用的自定义值发送到服务器：

JSON：

```
"heroes": [
  {"id":"iron", "label":"Iron Man Rocks!"},
  {"id":"super", "label":"Superman Rocks!"}
] 
```

HTML：

```
<select ng-model="hero" ng-options="obj.id as obj.label for obj in heroes"></select>
<input type="hidden" name="my_hero" value="{{hero}}" /> 
```

服务器将接收`iron`或`super`作为 的值`my_hero`。

这类似于[@neemzy 的答案](https://stackoverflow.com/questions/12139152/how-do-i-set-the-value-property-in-angularjs-ng-options/17070766#17070766)`value`，但为属性指定了单独的数据。

* * *

## 回答 #6

> 赞同：24
> 
> 时间：2013-11-16T23:06:15.433

**看起来使用起来`ng-options`很复杂（可能令人沮丧），但实际上我们遇到了架构问题。**

AngularJS 用作动态 HTML+JavaScript 应用程序的 MVC 框架。虽然它的 (V)iew 组件确实提供了 HTML“模板”，但它的主要目的是通过控制器将用户操作与模型中的更改联系起来。因此**，在 AngularJS 中工作的适当抽象级别是 select 元素将模型中的值设置为来自查询的值**。

*   查询行如何呈现给用户是 (V)iew 的关注点，并`ng-options`提供`for`关键字来指示选项元素的内容应该是什么，*即* `p.text for p in resultOptions`.
*   如何将选定的行呈现给服务器是 (M) 模型的关注点。因此`ng-options`提供`as`关键字来指定向模型提供什么值，如`k as v for (k,v) in objects`.

**这个问题的正确解决方案本质上是架构性的，并且涉及重构您的 HTML，以便 (M) 模型在需要时执行服务器通信**（而不是用户提交表单）。

**如果一个 MVC HTML 页面对于手头的问题是不必要的过度工程：**那么只使用 AngularJS 的 (V)iew 组件的 HTML 生成部分。在这种情况下，请遵循用于生成元素（例如`&lt;li /&gt;`'s under `&lt;ul /&gt;`'s）的相同模式，并在选项元素上放置一个 ng-repeat：

```
<select name=“value”&gt;
    <option ng-repeat=“value in Model.Values” value=“{{value.value}}”&gt;
        {{value.text}}
    </option>
</select> 
```

作为[kludge](http://en.wikipedia.org/wiki/Kludge "克鲁奇")，总是可以将 select 元素的 name 属性移动到隐藏的 input 元素：

```
<select ng-model=“selectedValue” ng-options=“value.text for value in Model.Values”&gt;
</select>
<input type=“hidden” name=“value” value=“{{selectedValue}}” /> 
```

* * *

## 回答 #7

> 赞同：20
> 
> 时间：2012-11-01T19:00:32.790

你可以这样做：

```
<select ng-model="model">
    <option value="">Select</option>
    <option ng-repeat="obj in array" value="{{obj.id}}">{{obj.name}}</option>
</select> 
```

- 更新

经过一些更新，[用户*frm.adiputra*的解决方案](https://stackoverflow.com/questions/12139152/how-do-i-set-the-value-property-in-angularjs-ng-options/12384319#12384319)要好得多。代码：

```
obj = { '1': '1st', '2': '2nd' };
<select ng-options="k as v for (k,v) in obj"></select> 
```

* * *

## 回答 #8

> 赞同：14
> 
> 时间：2015-05-17T20:04:12.230

我今天已经为这个问题苦苦挣扎了一段时间。我通读了 AngularJS 文档、这篇文章和其他文章，以及他们引出的一些博客。他们都帮助我了解了更精细的细节，但最终这似乎是一个令人困惑的话题。主要是因为`ng-options`.

最后，对我来说，它归结为少即是多。

给定一个配置如下的范围：

```
 //Data used to populate the dropdown list
        $scope.list = [
           {"FirmnessID":1,"Description":"Soft","Value":1},         
           {"FirmnessID":2,"Description":"Medium-Soft","Value":2},
           {"FirmnessID":3,"Description":"Medium","Value":3}, 
           {"FirmnessID":4,"Description":"Firm","Value":4},     
           {"FirmnessID":5,"Description":"Very Firm","Value":5}];

        //A record or row of data that is to be save to our data store.
        //FirmnessID is a foreign key to the list specified above.
        $scope.rec = {
           "id": 1,
           "FirmnessID": 2
        }; 
```

这就是我获得所需结果所需的全部内容：

```
 <select ng-model="rec.FirmnessID"
                ng-options="g.FirmnessID as g.Description for g in list">
            <option></option>
        </select> 
```

注意我没有使用`track by`. 使用`track by`所选项目将始终返回与 FirmnessID 匹配的对象，而不是 FirmnessID 本身。这现在符合我的标准，即它应该返回一个数值而不是对象，并用于`ng-options`通过不为生成的每个选项创建新范围来获得它提供的性能改进。

另外，我需要空白的第一行，所以我只是`<option>`在`<select>`元素中添加了一个。

这是一个展示我工作的[Plunkr](http://plnkr.co/edit/fbfmpPht7ENkWrlfT8c4?p=info "普朗克")。

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2014-08-20T12:23:17.123

如果您希望值与文本相同，则无需使用新的“track by”功能，您只需使用数组即可：

```
<select ng-options="v as v for (k,v) in Array/Obj"></select> 
```

注意标准语法之间的区别，这将使值成为对象/数组的键，因此数组的 0、1、2 等：

```
<select ng-options"k as v for (k,v) in Array/Obj"></select> 
```

*k as v*变成*v as v*。

我发现这只是基于查看语法的常识。(k,v) 是将数组/对象拆分为键值对的实际语句。

在“k as v”语句中，k 是值，v 是显示给用户的文本选项。我认为“跟踪”是混乱和矫枉过正。

* * *

## 回答 #10

> 赞同：11
> 
> 时间：2015-06-04T13:22:41.050

根据我的说法，这最适合所有场景：

```
<select ng-model="mySelection.value">
   <option ng-repeat="r in myList" value="{{r.Id}}" ng-selected="mySelection.value == r.Id">{{r.Name}}
   </option>
</select> 
```

您可以在其中使用模型来绑定数据。您将获得对象将包含的值以及基于您的方案的默认选择。

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2014-09-25T19:52:53.237

这就是我解决这个问题的方法。我跟踪了按值选择，并在我的 JavaScript 代码中将选定项属性设置为模型。

```
Countries =
[
    {
        CountryId = 1, Code = 'USA', CountryName = 'United States of America'
    },
    {
       CountryId = 2, Code = 'CAN', CountryName = 'Canada'
    }
] 
```

```
<select ng-model="vm.Enterprise.AdminCountry" ng-options="country.CountryName for country in vm.Countries track by country.CountryId"> 
```

`vm`是我的控制器，从服务中检索到的控制器中的 Country 是`{CountryId =1, Code = 'USA', CountryName='United States of America'}`.

当我从选择下拉列表中选择另一个国家并使用“保存”发布我的页面时，我得到了正确的国家绑定。

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2013-07-01T07:42:49.520

该`ng-options`指令没有`<options>`为数组的元素设置 value 属性：

使用`limit.value as limit.text for limit in limits`手段：

> 将`<option>`'标签设置为`limit.text`
> 将`limit.value`值保存到选择中`ng-model`

请参阅 Stack Overflow 问题*[AngularJS ng-options not rendering values](https://stackoverflow.com/questions/14425686/angularjs-ng-options-not-rendering-values)*。

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2017-12-19T16:20:58.080

可以使用 ng-options 实现选择标签绑定到值和显示成员

使用此数据源时

```
countries : [
              {
                 "key": 1,
                 "name": "UAE"
             },
              {
                  "key": 2,
                  "name": "India"
              },
              {
                  "key": 3,
                  "name": "OMAN"
              }
         ] 
```

您可以使用以下内容将您的选择标签绑定到值和名称

```
<select name="text" ng-model="name" ng-options="c.key as c.name for c in countries"></select> 
```

效果很好

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2013-12-03T15:59:10.773

```
<select ng-model="color" ng-options="(c.name+' '+c.shade) for c in colors"></select><br> 
```

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2014-04-02T08:00:57.273

问题提出一年后，我不得不为这个问题找到答案，因为至少对我来说，这些都没有给出实际答案。

您已经问过如何选择该选项，但没有人说这两件事**不**一样：

如果我们有这样的选择：

```
$scope.options = [
    { label: 'one', value: 1 },
    { label: 'two', value: 2 }
  ]; 
```

我们尝试设置一个默认选项，如下所示：

```
$scope.incorrectlySelected = { label: 'two', value: 2 }; 
```

它**不起作用**，但如果您尝试选择这样的选项：

```
$scope.correctlySelected = $scope.options[1]; 
```

它会**工作**。

即使这两个对象具有相同的属性，AngularJS 仍将它们视为不同的，因为 AngularJS 通过**引用**进行比较。

看看小提琴[http://jsfiddle.net/qWzTb/](http://jsfiddle.net/qWzTb/)。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2013-11-07T06:06:29.573

[用户*frm.adiputra*](https://stackoverflow.com/questions/12139152/how-do-i-set-the-value-property-in-angularjs-ng-options/12384319#12384319)提供了这个问题的正确答案，因为目前这似乎是显式控制选项元素的 value 属性的唯一方法。

但是，我只是想强调一下，“select”在这种情况下不是关键字，而只是表达式的占位符。请参考下面的列表，以了解“select”表达式的定义以及可以在 ng-options 指令中使用的其他表达式。

问题中描述的 select 的使用：

```
ng-options='select p.text for p  in resultOptions' 
```

本质上是错误的。

根据表达式列表，当在对象数组中给出选项时，似乎**trackexpr**可用于指定值，但它仅用于分组。

* * *

来自 AngularJS 的 ng-options 文档：

*   **array / object** : 一个表达式，其计算结果为要迭代的数组/对象。
*   **value**：局部变量，它将在迭代期间引用数组中的每个项目或对象的每个属性值。
*   **key**：局部变量，它将在迭代期间引用对象中的属性名称。
*   **label**：此表达式的结果将是元素的标签。表达式很可能引用值变量（例如 value.propertyName）。
*   **select**：此表达式的结果将绑定到父元素的模型。如果未指定，则选择表达式将默认为值。
*   **group**：此表达式的结果将用于使用 DOM 元素对选项进行分组。
*   **trackexpr**：在处理对象数组时使用。此表达式的结果将用于识别数组中的对象。trackexpr 很可能会引用 value 变量（例如 value.propertyName）。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2014-03-11T09:50:39.763

根据您设置数据源的方式，在 ng-options 中选择一个项目可能会有些棘手。

在与他们斗争了一段时间后，我最终用我使用的最常见的数据源制作了一个样本。你可以在这里找到它：

[http://plnkr.co/edit/fGq2PM?p=preview](http://plnkr.co/edit/fGq2PM?p=preview)

现在要使 ng-options 工作，这里有一些事情需要考虑：

1.  通常，您从一个来源获得选项，从另一个来源获得选定的值。例如：
    *   状态 :: ng-options 的数据
    *   user.state :: 设置为选中的选项
2.  基于1，最简单/合乎逻辑的做法是用一个源填充选择，然后通过代码设置选择的值。获得混合数据集很少会更好。
3.  AngularJS 允许选择控件容纳超过`key | label`. 许多在线示例将对象作为“键”，如果您需要来自对象的信息，请按此方式设置，否则使用您需要的特定属性作为键。（ID、CODE 等。如在 plcckr 示例中）
4.  设置下拉/选择控件值的方式取决于#3，

    *   如果下拉键是单个属性（就像 plunkr 中的所有示例一样），您只需设置它，例如： `$scope.dropdownmodel = $scope.user.state;`
    *   如果将对象设置为键，则需要通过选项循环，即使分配对象也不会将项目设置为选中，因为它们将具有不同的哈希键，例如：

        ```
        for (var i = 0, len = $scope.options.length; i < len; i++) {
          if ($scope.options[i].id == savedValue) { // Your own property here:
            console.log('Found target! ');
            $scope.value = $scope.options[i];
            break;
          }
        } 
        ```

您可以替换另一个对象中相同属性的 savedValue，`$scope.myObject.myProperty`。

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2015-03-12T09:12:23.563

对我来说[，布鲁诺戈麦斯的答案](https://stackoverflow.com/questions/12139152/how-to-set-value-property-in-angularjs-ng-options#22997081)是最好的答案。

但实际上，您不必担心设置选择选项的 value 属性。AngularJS 会解决这个问题。让我详细解释一下。

[请考虑这个小提琴](http://jsfiddle.net/sanjaykhadka/raththbh/21/)

```
angular.module('mySettings', []).controller('appSettingsCtrl', function ($scope) {

    $scope.timeFormatTemplates = [{
        label: "Seconds",
        value: 'ss'
    }, {
        label: "Minutes",
        value: 'mm'
    }, {
        label: "Hours",
        value: 'hh'
    }];

    $scope.inactivity_settings = {
        status: false,
        inactive_time: 60 * 5 * 3, // 15 min (default value), that is, 900 seconds
        //time_format: 'ss', // Second (default value)
        time_format: $scope.timeFormatTemplates[0], // Default seconds object
    };

    $scope.activity_settings = {
        status: false,
        active_time: 60 * 5 * 3, // 15 min (default value), that is,  900 seconds
        //time_format: 'ss', // Second (default value)
        time_format: $scope.timeFormatTemplates[0], // Default seconds object
    };

    $scope.changedTimeFormat = function (time_format) {
        'use strict';

        console.log('time changed');
        console.log(time_format);
        var newValue = time_format.value;

        // do your update settings stuffs
    }
}); 
```

正如您在小提琴输出中看到的那样，无论您为选择框选项选择什么，它都是您的自定义值，或者 AngularJS 自动生成的 0、1、2 值，除非您使用 jQuery 或任何其他库来访问该选择组合框选项的值并相应地对其进行操作。

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2017-05-09T11:00:43.970

请使用在选择框中区分值和标签的属性跟踪。

请试试

```
<select ng-options="obj.text for obj in array track by obj.value"></select> 
```

这将分配带有文本的标签和带有值的值（来自数组）

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2013-10-31T08:45:47.037

对于一个对象：

```
<select ng-model="mySelect" ng-options="key as value for (key, value) in object"></select> 
```

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2014-07-28T11:29:29.077

对于开发人员来说，使用 ng-options 总是很痛苦。例如：在选择标签中获取一个空/空白的选定值。尤其是在 ng-options 中处理 JSON 对象时，变得更加乏味。在这里，我做了一些练习。

目标：通过 ng-option 迭代 JSON 对象数组并设置选定的第一个元素。

数据：

```
someNames = [{"id":"1", "someName":"xyz"}, {"id":"2", "someName":"abc"}] 
```

在选择标签中，我必须显示 xyz 和 abc，其中 xyz 必须毫不费力地选择。

### HTML：

```
<pre class="default prettyprint prettyprinted" style=""><code>
    &lt;select class="form-control" name="test" style="width:160px"    ng-options="name.someName for name in someNames" ng-model="testModel.test" ng-selected = "testModel.test = testModel.test || someNames[0]"&gt;
&lt;/select&gt;
</code></pre> 
```

通过上面的代码示例，您可能会摆脱这种夸张。

另一个[参考](https://github.com/angular/angular.js/issues/1302)：

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2014-08-31T23:16:36.893

教程*[ANGULAR.JS: NG-SELECT AND NG-OPTIONS](http://www.grobmeier.de/angular-js-ng-select-and-ng-options-21112012.html#.VAOo58OwV2M)*帮助我解决了这个问题：

```
<select id="countryId"
  class="form-control"
  data-ng-model="entity.countryId"
  ng-options="value.dataValue as value.dataText group by value.group for value in countries"></select> 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2015-04-18T02:15:55.217

```
<select ng-model="output">
   <option ng-repeat="(key,val) in dictionary" value="{{key}}">{{val}}</option>
</select> 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2017-01-12T07:03:19.510

运行代码片段并查看变化。这是快速理解的注释

1.  示例 1（对象选择）：- `ng-option="os.name for os in osList track by os.id"`。这里`track by os.id`很重要 &**应该在**那里，之前`os.id as` **不应该**`os.name`有。

    *   应该设置为`ng-model="my_os"`键为**id**的对象`my_os={id: 2}`。
2.  示例 2（值选择）：- `ng-option="os.id as os.name for os in osList"`。这里`track by os.id` **不应该**在那里，`os.id as` **应该在**之前`os.name`。

    *   `ng-model="my_os"`应该设置为一个值，如`my_os= 2`

其余代码片段将解释。

```
angular.module('app', []).controller('ctrl', function($scope, $timeout){

  //************ EXAMPLE 1 *******************
  $scope.osList =[
    { id: 1, name :'iOS'},
    { id: 2, name :'Android'},
    { id: 3, name :'Windows'}
  ]
  $scope.my_os = {id: 2};

  //************ EXAMPLE 2 *******************
  $timeout(function(){
    $scope.siteList = [
          { id: 1, name: 'Google'},
          { id: 2, name: 'Yahoo'},
          { id: 3, name: 'Bing'}
        ];
   }, 1000);

    $scope.my_site = 2;

    $timeout(function(){
      $scope.my_site = 3;
    }, 2000);
})
```

```
fieldset{
  margin-bottom: 40px;
  }
strong{
  color:red;
  }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.10/angular.min.js"></script>

<div ng-app="app" ng-controller="ctrl">

  <!--//************ EXAMPLE 1 *******************-->
  <fieldset>
    <legend>Example 1 (Set selection as <strong>object</strong>)</legend>

    <select ng-model="my_os" ng-options="os.name for os in osList track by os.id">
        <option value="">--Select--</option>
      </select>
    {{my_os}}

  </fieldset>

  <!--//************ EXAMPLE 2 *******************-->
  <fieldset>
    <legend>Example 2 (Set selection as <strong>value</strong>. Simulate ajax)</legend>
      <select ng-model="my_site" ng-options="site.id as site.name for site in siteList">
        <option value="">--Select--</option>
      </select>
      {{my_site}}
  </fieldset>

</div>
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2015-03-15T11:51:54.623

就像许多人之前所说的，如果我有这样的数据：

```
countries : [
              {
                 "key": 1,
                 "name": "UAE"
             },
              {
                  "key": 2,
                  "name": "India"
              },
              {
                  "key": 3,
                  "name": "OMAN"
              }
         ] 
```

我会像这样使用它：

```
<select
    ng-model="selectedCountry"
    ng-options="obj.name for obj  in countries">
</select> 
```

在您的控制器中，您需要设置一个初始值以摆脱第一个空项：

```
 $scope.selectedCountry = $scope.countries[0];

 // You need to watch changes to get selected value
 $scope.$watchCollection(function() {
   return $scope.selectedCountry
 }, function(newVal, oldVal) {
     if (newVal === oldVal) {
       console.log("nothing has changed " + $scope.selectedCountry)
     } 
     else {
       console.log('new value ' + $scope.selectedCountry)
     }
 }, true) 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2015-03-17T07:26:59.877

以下是我在遗留应用程序中解决此问题的方法：

### 在 HTML 中：

```
ng-options="kitType.name for kitType in vm.kitTypes track by kitType.id" ng-model="vm.itemTypeId" 
```

### 在 JavaScript 中：

```
vm.kitTypes = [
    {"id": "1", "name": "Virtual"},
    {"id": "2", "name": "Physical"},
    {"id": "3", "name": "Hybrid"}
]; 
```

...

```
vm.itemTypeId = vm.kitTypes.filter(function(value, index, array){
    return value.id === (vm.itemTypeId || 1);
})[0]; 
```

我的 HTML 正确显示了选项值。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2017-10-14T14:24:09.950

# ngOptions 指令：

```
$scope.items = [{name: 'a', age: 20},{ name: 'b', age: 30},{ name: 'c', age: 40}]; 
```

*   **Case-1) 数组中值的标签：**

    ```
    <div>
        <p>selected item is : {{selectedItem}}</p>
        <p> age of selected item is : {{selectedItem.age}} </p>
        <select ng-model="selectedItem" ng-options="item.name for item in items">
        </select>
    </div> 
    ```

输出说明（假设选择了第一个项目）：

*selectedItem = {name: 'a', age: 20}* // [默认情况下，选中项等于值***项***]

*selectedItem.age = 20*

*   **案例 2）选择作为数组中值的标签：**

    ```
    <div>
        <p>selected item is : {{selectedItem}}</p>
        <select ng-model="selectedItem" ng-options="item.age as item.name for item in items">
        </select>
    </div> 
    ```

输出说明（假设第一个项目被选中）： *selectedItem = 20* // [选择部分是***item.age*** ]

# java - 将字符串映射到字符串值

> ID：12139156
> 
> 赞同：2
> 
> 时间：2012-08-27T09:13:47.083
> 
> 标签：java, string, converter

这是我的问题：

我有可能的`Product`类别列表（例如：、、、`Shoes`）`Mode`，`Women`我需要将其转换为我的特定名称。

示例：我得到了类别`Women`，我需要将其转换为`Lady's`.

我有大约 40 个类别名称需要转换。

我的问题是：在 JAVA 中执行此操作的最佳方法是什么。

我考虑过开关盒，但我不知道这是一个好的解决方案。

```
switch (oldCategoryName) {
    case "Women":
        return "Ladys";
    default:
        return "Default";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T09:26:48.477

您可以为此使用静态地图。制作如下静态地图

```
public class PropertiesUtil {
    private static final Map<String, String> myMap;
    static {
        Map<String, String> aMap = new HashMap<String, String>();
        aMap.put("Women", "Ladys");
        aMap.put("another", "anotherprop");
        myMap = Collections.unmodifiableMap(aMap);
    }
} 
```

然后获取替换字符串..

```
String womenReplace = PropertiesUtil.myMap.get("Women"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T09:35:34.283

您还可以考虑使用枚举：

```
 public enum ProductsCategory {
        Mode("MyMode"),
        Shoes("MyShoes"); 

        private String name;

        private ProductsCategory(String name) {
            this.name = name;
        }

        public String getName() {
            return name;
        }
    } 
```

然后检索：

```
String myModeStr = ProductsCategory.Mode.getName(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T09:17:04.023

请注意，java`switch`不适`String`用于低于 7 的 java 版本的对象。

您可以将值存储在地图中：

```
// storing
Map<String, String> map = new HashMap<String, String>();
map.put("Women", "Ladys");
// add other values

// retrieving
String ladys = map.get("Women"); 
```

或者您也可以使用`.properties`文件来存储所有这些关联，并检索属性对象。

```
InputStream in = new FileInputStream(new File("mapping.properties"));
Properties props = new Properties();
props.load(in);
in.close();
String ladys = props.getProperty("Women"); 
```

# openxml - 设置旋转后计算形状的 X 和 Y（顶部和左侧）值

> ID：12139157
> 
> 赞同：0
> 
> 时间：2012-08-27T09:13:50.220
> 
> 标签：openxml

设置旋转值时需要帮助调整形状的顶部和左侧。例如：

```
<p:spPr bwMode="auto">
           <a:xfrm rot="5400000">
                <a:off x="2443049" y="-1042472" />
                <a:ext cx="304800" cy="4419600" />
            </a:xfrm>
            <a:prstGeom prst="rect">
                <a:avLst />
            </a:prstGeom>
            <a:ln>
                <a:headEnd />
                <a:tailEnd />
            </a:ln> 
```

我有上面的数据。我已经相应地计算了旋转角度。现在，当创建形状并以 html 格式显示时，需要调整顶部和左侧（关闭 x="2443049" y="-1042472"）值以正确对齐。请提供一个解决方案来计算要设置的正确顶部和左侧值。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:47:55.260

正如[如何从给定的 xml 数据计算 MS Office Powerpoint 形状的旋转值中所述](https://stackoverflow.com/questions/12085076/how-to-calculate-the-rotation-value-for-the-ms-office-powerpoint-shapes-from-the)，它们不需要更改形状的左侧和顶部 - 如果旋转或不旋转，形状将具有相同的左/上，因为它是就地旋转（它在中心 X/Y 上旋转）。

如果您正在寻找如何将 EMU 转换为点/像素以便可以将其转换为不同的格式（例如 HTML），请使用**EMU/12700**。所以在这种情况下`<a:off x="2443049" y="-1042472" />`将会是`left="192.37" top="-82.08"`并且`<a:ext cx="304800" cy="4419600" />`将会是`width=24 height=348`。

# java - 内部类访问外部类方法，方法名相同

> ID：12139160
> 
> 赞同：10
> 
> 时间：2012-08-27T09:14:04.323
> 
> 标签：java, inner-classes

我有一个类和一个内部类

```
01 public class A{
02   void test(){};
03   public class B{
04     void test(){
05       test();
06     }
07   }
08 } 
```

好的，在第05行id喜欢访问A类的方法测试。但是我进入了一个循环，因为我不知道如何指定使用A类的方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-27T09:16:37.877

```
01 public class A{
02   void test(){};
03   public class B{
04     void test(){
05       test();  // local B.test() method, so recursion, use A.this.test();
06     }
07   }
08 } 
```

编辑：正如@Thilo 提到的：避免在外部类和内部类中使用相同的方法名称，这将避免命名冲突。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-27T09:22:18.720

你可以这样做：

```
public class A{
   void test(){
        System.out.println("Test from A");
    };
    public class B{
        void test(){
            System.out.println("Test from B");
            A.this.test();
        }
    }

    public static void main(String[] args) {
            A a = new A();
            B b = a.new B();
            b.test();
    }
} 
```

然后你有以下输出：

```
Test from B
Test from A 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T09:16:28.003

B 类不必是所谓的嵌套类来扩展 A 类，只需编写

```
public class B extends A {
...

} 
```

比你可以调用 A 的 test() 之类的

```
super.test() 
```

如果你像你那样调用 test() 这就是我们所说的递归，并且会冻结到审判日

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T09:17:01.887

如果你让它静态你可以打电话

```
A.test() 
```

否则，您需要 A 的实例才能在 B 中使用

```
A a;
a.test(); 
```

# android - 来自多个精灵表的动画精灵

> ID：12139162
> 
> 赞同：0
> 
> 时间：2012-08-27T09:14:05.993
> 
> 标签：android, andengine

我是 android dev 的新手，使用 andengine 和我在处理覆盖超过 1 个精灵表的大型动画时遇到了一个问题。基本上我有一个大型精灵，其动画跨越 2 个精灵表。我试图找到一种成功加载它们的方法。我会告诉你我正在尝试什么，希望有人可以告诉我正确的方法或帮助我完成它。

我首先从 xml 文件创建 2 个纹理包。这些创建得很好

```
TexturePackTextureRegionLibrary packer1 = null,packer2 = null;
        TexturePack spritesheetTexturePack1 = null,spritesheetTexturePack2 = null;
        try {
            spritesheetTexturePack1 = new TexturePackLoader(activity.getTextureManager(), "Animation/Jack/")
                    .loadFromAsset(activity.getAssets(), "Jack_walk1" + ".xml");
            spritesheetTexturePack1.loadTexture();
            packer1 = spritesheetTexturePack1.getTexturePackTextureRegionLibrary();
        } catch (final TexturePackParseException e) {
            Debug.e(e);
        }

        TexturePackerTextureRegion textureRegion = packer1.get(Jack_walk1.LOOP_JACK_WALK_TO_SAFE_AREA_00000_ID);

        try {
            spritesheetTexturePack2 = new TexturePackLoader(activity.getTextureManager(), "Animation/Jack/")
                    .loadFromAsset(activity.getAssets(), "Jack_walk2" + ".xml");
            spritesheetTexturePack2.loadTexture();
            packer2 = spritesheetTexturePack2.getTexturePackTextureRegionLibrary();
        } catch (final TexturePackParseException e) {
            Debug.e(e);
        }

        TexturePackerTextureRegion textureRegion2 = packer2.get(Jack_walk1.LOOP_JACK_WALK_TO_SAFE_AREA_00000_ID);

        ArrayList<SparseArray> animList = new ArrayList<SparseArray>();
        animList.add(packer1.getIDMapping());
        animList.add(packer2.getIDMapping());
        TiledTextureRegion text1 = TiledTextureRegion.create(textureRegion.getTexture(), (int) textureRegion.getTextureX(),  (int) textureRegion.getTextureY(), animList); 
```

然后我将此函数添加到 tiledtextureregion 以获取包含帧信息的数组列表，并逐步将它们添加到 ittexturregion 数组

```
public static TiledTextureRegion create(final ITexture pTexture, final int pTextureX, final int pTextureY, final ArrayList<SparseArray> animList) {
        ITextureRegion[] textureRegions = null;
        int maxFrame = 0;

        for(int i = 0; i < animList.size(); i++){
            maxFrame += animList.get(i).size();
        }
        int currentFrame = 0;
        textureRegions = new ITextureRegion[maxFrame];
        for(int i = 0 ; i < animList.size(); i++){
            SparseArray<? extends ITexturePackTextureRegion> packer = animList.get(i);
            for(int j = 0; j < packer.size(); j++) {
                if (packer.valueAt(j)!= null){

                    final int x = (int) packer.valueAt(j).getTextureX();
                    final int y = (int) packer.valueAt(j).getTextureY();
                    final int width = packer.valueAt(j).getSourceWidth();
                    final int height = packer.valueAt(j).getSourceHeight();
                    final Boolean rotated = packer.valueAt(j).isRotated();

                    textureRegions[currentFrame] = new TextureRegion(pTexture, x, y, width, height, rotated);

                    currentFrame++;
                }
            }
        }

        return new TiledTextureRegion(pTexture, false, textureRegions);
    } 
```

但该行返回 new TiledTextureRegion(pTexture, false, textureRegions); 期望 1 个纹理在创建平铺区域时从其中检索帧。我应该从这里开始的任何想法，或者是否有一种超级简单的方法来处理我已经忽略的这个问题。谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:31:57.313

此类旨在使用单个纹理。

如果您无法将纹理合并为一个（我认为是这种情况），那么您可以尝试编写一个实现 ITextureRegion 的新类，该类将包含 2 个或更多 TiledTextureRegion 对象，并且将有一种方法可以随意选择其中一个. 您只需将 ITextureRegion 的其余方法委托给所选对象。

```
public class MultipleTextureRegion implements ITextureRegion {
  private List<TiledTextureRegion> internal;
  private int selected=0;

  //...

  public void add(TiledTextureRegion region) {
    internal.add(region);
  }

  public void select(int index) {
    selected=index;
  }

  //...

  // Delegates all ITextureRegion methods ...

  public int getWidth() { return internal.get(selected).getWidth(); }
  // And so on...
  } 
```

# python - Python 单元测试中对象的长定义

> ID：12139167
> 
> 赞同：7
> 
> 时间：2012-08-27T09:14:33.680
> 
> 标签：python, unit-testing, coding-style

我正在对我的应用程序进行单元测试。大多数测试所做的是调用具有特定参数的函数并断言返回值与期望值相等。

在某些测试中，预期的返回值是一个相对较大的对象。例如，其中之一是将 5 个字符串映射到元组列表的字典。定义该对象需要 40-50 行重复的代码，但该对象是我正在测试的函数之一的预期值。我不想在测试函数中定义预期返回值的 40-50 行代码，因为我的大多数测试函数都包含 3-6 行代码。我正在寻找这种情况的最佳实践。在测试中放入冗长定义的正确方法是什么？

以下是我正在考虑解决这个问题的想法，在我看来，从最好到最差排列：

*   **对象的测试样本：**基于键的子集进行一些相等断言。为了代码的优雅，这将牺牲测试的彻底性。

*   **在单独的模块中定义对象：**在单独的 .py 文件中编写冗长的 40-50 行代码，在测试中导入模块，然后进行相等断言。这将使测试简短明了，但我不喜欢有一个单独的文件作为测试的补充；毕竟对象定义是测试的一部分。

*   **在测试函数中定义对象：**这是我希望避免的简单解决方案。我的测试非常简单明了，该对象的冗长定义不合适。

也许我太痴迷于干净的代码，但我不喜欢上面的解决方案。还有另一种我没有想到的常见做法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T10:20:21.900

我建议使用*测试代码*和*测试数据*的分离。出于这个原因，我通常创建一个包含我想测试的方法的抽象基类，并创建几个特定的​​测试用例类来将方法与数据联系起来。（我使用Django框架，所以我放入的所有抽象测试类`testbase.py`）：

*测试库.py*：

```
class TestSomeFeature(unittest.TestCase):
    test_data_A = ...

    def test_A(self):
        ... #perform test 
```

现在*test.py中的实现*

```
class TestSomeFeatureWithDataXY(testbase.TestSomeFeature):
    test_data_A = XY 
```

测试数据也可以外部化，例如 JSON 文件：

```
class TestSomeFeatureWithDataXYZ(testbase.TestSomeFeature):
    @property
    def test_data_A(self): 
        return json.load("data/XYZ.json") 
```

我希望我的观点足够清楚。在您的情况下，我强烈选择使用数据文件。Django 通过在执行任何测试之前使用将测试装置加载到数据库中来支持这种开箱即用的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T10:38:50.167

这实际上取决于您要测试的内容。

如果您想测试字典是否包含具有某些值的某些键，那么我建议使用单独的断言来检查每个键。这样，如果字典被扩展，您的测试仍然有效，并且测试失败应该清楚地识别问题（一条错误消息告诉您一个 50 行长的字典不等于第二个 50 行长的字典并不完全清楚） .

如果您确实想验证字典是否只包含给定的键，那么单个断言可能是合适的。将您要比较的对象定义在最清晰的位置。如果在单独的文件中定义它（正如康斯坦丁的回答所暗示的那样）使事情更具可读性，那么请考虑这样做。

在这两种情况下，指导原则是只测试你关心的行为。如果您测试您不关心的行为，您可能会发现您的测试套件在重构时更具阻碍性而不是帮助。

# mercurial - 无法让 hgignore 工作

> ID：12139171
> 
> 赞同：1
> 
> 时间：2012-08-27T09:14:48.767
> 
> 标签：mercurial, hgignore

我试图让 mercurial 忽略 win7 中的“1.txt”文件，mercurial 2.3

为什么这里的“hg status”命令仍然显示 1.txt？

```
\hgtest> dir

Directory: \hgtest

Mode                LastWriteTime     Length Name
----                -------------     ------ ----
d----        2012-08-27     11:01            .hg
-a---        2012-08-27     11:03         44 .hgignore
-a---        2012-08-27     11:02          6 1.txt

\hgtest> type .hgignore
syntax: glob
*.txt
\hgtest> hg status
? .hgignore
? 1.txt 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T14:18:49.503

我怀疑这是因为您的 .hgignore 采用 utf-16 编码。其中 44 为 22 个字符的文本。

hg 可能不理解 .hgignore 文件。

尝试打开文件并将其保存为纯 ANSI 编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:23:20.887

可能是因为它仍在存储库中。试着忘记那个文件。如果你想在存储库中有这个文件，同时忽略它，它不显示，我认为这是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T13:21:39.290

我刚刚尝试根据您在 64 位 Windows 7 上的原始问题中的信息重新创建您的场景，但是使用 Mercurial 2.2.3（我使用的是 TortoiseHg 2.4.2）并且我没有看到这个问题。我检查了 cmd.exe 控制台和 Powershell 控制台（这就是您似乎正在使用的）。我注意到，`.hgignore`在我的案例中报告的文件大小是原始问题的一半。我不确定大小差异是因为什么。由于我们使用的是不同版本的 Mercurial，我想知道 2.3 中是否有问题。

# java - 如何使用 Selenium WebDriver 和 Java 在同一个浏览器中打开一个新选项卡？

> ID：12139173
> 
> 赞同：2
> 
> 时间：2012-08-27T09:15:08.457
> 
> 标签：java, selenium-webdriver

我可以使用 Java 和 JavaScript 使用 Selenium WebDriver 打开一个新窗口。我正在使用火狐。代码如下：

```
WebDriver driver = new FirefoxDriver();
JavascriptExecutor jse = (JavascriptExecutor)driver;
jse.executeScript("function createDoc(){var w = window.open(); w.document.open(); w.document.write('<h1>Hello World!</h1>'); w.document.close();}; createDoc();"); 
```

如何使用 WebDriver (Selenium 2) 在同一浏览器中打开新标签页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:30:52.817

JavaScript 或 HTML 中没有标准支持在选项卡和窗口中打开链接。这取决于浏览器和设置。某些浏览器默认在新标签页中打开（例如 Chrome 和 Safari）。一些浏览器允许用户配置行为。最重要的是，您不应该将您的网站设计为依赖于在选项卡中打开新窗口，因为没有可靠且跨浏览器兼容的机制可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-27T13:57:31.823

瓦西姆，

```
cdriver.findElement(By.cssSelector("body")).sendKeys(Keys.CONTROL +"t"); 
```

您可以使用上面的行在同一浏览器中打开新标签（在 Firefox 中工作）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T10:34:00.337

这主要取决于您的浏览器设置，并且没有单独的方法可以在新窗口或新标签中打开链接

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-27T10:24:24.410

它还取决于您的浏览器如何配置为打开弹出窗口。

# ruby - 某些数据在 rails 控制台中显示为“未加载”

> ID：12139174
> 
> 赞同：1
> 
> 时间：2012-08-27T09:15:10.330
> 
> 标签：ruby, ruby-on-rails-3, ruby-datamapper

我有一个 rails 3 应用程序，而且我对 rails 还很陌生。我有一个地址模型。提交表单后，地址已成功保存。在地址模型中，有一个字段如下：

```
property :street_address, Text, :required => true 
```

在 rails 控制台中，当我输入：

```
1.9.3p194 :062 > add  = Address.get(208)
 => #<Address @id=208 @street_address=<**not loaded**> @postal_code="400123" @latitude=0.0            @longitude=0.0 @sub_area="subarea1" @city_id=1 @state_id=16 @country_id=1 @area_id=nil> 
1.9.3p194 :063 > add.street_address
 => "STREET" 
```

为什么街道地址显示“未加载”？另一个模型中的 Text 数据类型的字段也会发生同样的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:25:27.967

DataMapper 延迟加载某些数据类型以使数据库查询更快。这意味着具有大量数据（如文本属性）的字段在需要之前不会被加载

默认情况下，文本字段是延迟加载的，如果需要，您可以覆盖它。

```
property :street_address, Text, :required => true, :lazy => false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:12:07.383

使用 DataMapper，一些属性（例如 Text 类型的属性）默认是延迟加载的，即。在您的代码访问它们之前，它们不会从数据库中获取。

`:lazy => false`您可以通过添加到模型定义中的属性来覆盖此行为。

有关更多详细信息，请参阅[文档](http://datamapper.org/docs/properties.html)。那里有一个标题为延迟加载的部分。

# javascript - 将网页上的链接重定向到 javascript 函数

> ID：12139177
> 
> 赞同：0
> 
> 时间：2012-08-27T09:15:21.280
> 
> 标签：javascript, jquery

我正在尝试重定向网页上的链接，在这个简单的示例中，它只是通过简单的检查来设置要设置的 cookie。

不确定这是否是首先处理这种情况的正确方法，并且当“download_link”类有多个链接时我是否会遇到问题，但即使是现在，只有一个这样的链接，目标设置为未定义，看起来重定向器调用中的 $(this) 实际上指向整个 HTML 文档，而不仅仅是我要更改的元素...

```
 function redirect_link(e, destination) {
        if ($.cookie("contact_set") == "true") {
            window.location.href = destination;
        } else {
            alert("cookie not set");
        }
    }
    function redirector(destination) {
        alert("creating redirector to "+destination);
        return function(e) {redirect_link(e, destination)};
    }
    $(document).ready(function() {
        $('.download_link').click(redirector($(this).attr("href")));
        $('.download_link').attr("href", "#");
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:18:13.373

您正在`$(this)`从文档的`ready`回调范围访问，所以`$this`指向一个`HTMLDocument`对象！

```
$(document).ready(function() {
    var $downloadLnk = $('.download_link');
    $downloadLnk.click(redirector($downloadLnk.attr("href")));
    $downloadLnk.attr("href", "#");
}); 
```

正如您在评论中要求的那样：

```
$(document).ready(function() {
  $('.download_link').each(function() {
    var $lnk = $(this);
    $lnk.click(redirector($lnk.attr("href")));
    $lnk.attr("href", "#");
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T09:21:16.327

```
$(function() { // <-- Short for $(document).ready(function() {
    $('.download_link').each(function() {
        var $this = $(this);

        $this.click(redirector($this.attr("href"));
        $this.attr("href", "#");
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T09:23:13.687

您始终可以使用目标：

```
$(document).ready(function() {
    $('.download_link').on('click', redirector); //bind to function
    $('.download_link').attr("href", "#");
});​

function redirector(event) {
    alert("creating redirector to "+event.target.href); //event.target
    return function(e) {redirect_link(e, destination)};
} 
```

`#`但是，当您单击链接时，无论您使用什么，href 都将不再有效，因为您在单击处理程序之后的下一行将其设置为该值？

# background - 在任何网站中，图像总是在后台下载，对吗？

> ID：12139180
> 
> 赞同：0
> 
> 时间：2012-08-27T09:15:39.050
> 
> 标签：background, web, image-loading

只是为了确认，图像总是在与页面文本加载线程不同的另一个线程中下载？

我把我的页面，参考互联网上的图片，所有的文字总是首先出现。

你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:17:13.870

我认为该`html`文件包含所有散文并引用图片，因此无论您做什么线程，您都首先下载文本。是否在下载图片之前渲染取决于UA，在这方面它们可能相同也可能不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:20:13.253

取决于浏览器和网站。在大多数情况下，浏览器会加载“主 html”，其中包含对图片和其他内容的引用。如果网站通过 AJAX 加载大部分文本内容，则可能是另一种方式。

..但在大多数情况下你是对的

# c# - 为 asp.net MVC Web 应用程序提供 API

> ID：12139185
> 
> 赞同：0
> 
> 时间：2012-08-27T09:15:48.003
> 
> 标签：c#, asp.net-mvc, json

我目前有一个具有大约 50 个视图的 MVC 3 Web 应用程序。

是否有可能在我的视图旁边提供某种 API，以便一切仍然正常运行？

我的完美世界理念：

服务器正在运行，每个请求都进入它的视图。用户可以在他的 get 请求中决定他是否想要 JSON 格式的原始数据。除了原始数据之外，还将解析 Viewmodel 的结构/名称，以便 Modelbinder 可以做他的事情。

或者另一种方法可能是以某种方式停用我的视图以仅提供可用的 API（再次使用原始数据和结构）。

这是否可能（模型绑定器是一个大问题），甚至可能没有太多的努力/麻烦？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T10:32:06.887

如果你不想用 WebAPI 重新做所有的事情，你可以实现一些 ActionFilterAttribute 来改变基于一些查询字符串 fi 的 ActionResult 像这样：

```
public class ResultSwitcherAttribute: ActionFilterAttribute
{
    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        if (filterContext.HttpContext.Request["data"] != null && filterContext.HttpContext.Request["data"] == "json")
        {
            filterContext.Result = new JsonResult
                {
                    Data = (filterContext.Result as ViewResult).Model,
                    JsonRequestBehavior = JsonRequestBehavior.AllowGet
                };
        }
    }
} 
```

然后，您将在 application_start 或每个控制器/操作中注册它，如下所示：

```
[ResultSwitcherAttribute]
public class HomeController : Controller
{
    public ActionResult Index()
    {

        return View(new TestModel()
            {
                Web = "http://www.mywebpage.com", Name = "Yngve"
            });
    }
} 
```

当您现在使用 ?data=json 访问您的 url 时，您将获得模型的 JSON 表示，而不是视图。

**编辑：代码示例更新**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:25:55.940

考虑将[ASP.NET Web API](http://www.asp.net/web-api)添加到您的应用程序。它的实现非常简单，只需添加一个[API 控制器](http://msdn.microsoft.com/en-us/library/system.web.http.apicontroller(v=vs.108).aspx)，其中包含与您的 REST 操作相对应的方法。我不知道如何将它添加到 MVC 3 应用程序中，但我在[这个](https://stackoverflow.com/questions/11990036/how-to-add-web-api-to-an-existing-asp-net-mvc-4-web-application-project)stackoverflow 问题中有一个 MVC 4 Internet 应用程序的配方。因此，如果您可以升级您的项目以使其具备 Web API 功能，或许可以升级到 MVC 4，我认为这将是一个不错的选择。

要学习 ASP.NET Web API，[本教程](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api)是一个很好的起点。

# vim - 如何整理我的 vimrc 文件？

> ID：12139187
> 
> 赞同：3
> 
> 时间：2012-08-27T09:15:58.113
> 
> 标签：vim, autocmd

我的 Vim 配置文件越来越大*(15KB+)*。我尽量不通过在启动时采购更多*（更大）*文件来降低我的 vim 启动速度。出于同样的目的，我只使用必要的插件，并尽量减少插件的数量。

所以，在我的 .vimrc 文件的某个地方，我有这些行：

```
autocmd FileType python setlocal expandtab shiftwidth=4 tabstop=4 softtabstop=4
autocmd FileType python setlocal textwidth=78
autocmd FileType python match ErrorMsg '\%>80v.\+'
autocmd FileType python inoremap <F5> <esc>:upd\|!python %<cr>
autocmd FileType python nnoremap <F5> :upd\|!python %<cr>
autocmd FileType python nnoremap <leader>8 :w\|call Flake8()<cr>
autocmd FileType python setlocal formatoptions-=t
autocmd BufWritePost *.py call Flake8() 
```

现在我看到前 7 行，所有行都有`autocmd FileType python`共同点。所以我的想法是，如果我们设法用更少的东西替换所有这些词，那么 Vim 会更快地启动。但我不知道该怎么做。

我们可以将它们分组吗？如何？还要别的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T09:31:58.293

就放

```
setlocal expandtab shiftwidth=4 tabstop=4 softtabstop=4 textwidth=78 formatoptions-=t
match ErrorMsg '\%>80v.\+'
inoremap <F5> <esc>:upd\|!python %<cr>
nnoremap <F5> :upd\|!python %<cr>
nnoremap <leader>8 :w\|call Flake8()<cr> 
```

在`~/.vim/after/ftplugin/python.vim`.

只有当你打开一个 Python 文件时，Vim 才会读取这个文件。

实际上，我一直想这样做一段时间。出于同样的原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T10:02:49.580

`~/.vim/after/ftplugin/{filetype}.vim`正如 romainl 已经指出的那样，应将特定于文件类型的内容移至。

我将所有自定义映射和命令`~/.vim/plugin/my{mappings,commands}.vim`移到. 任何不是简单的单行并委托给函数的映射/命令然后使用自动加载机制。这使启动时读取的内容量很小。`:set``.vimrc`

*TL,DR：自动加载很棒；所有插件都应该使用它。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T10:12:04.217

我正在使用一种方案，其中一组选项设置在由自动命令调用的函数中。

```
function! s:C_options()
    setlocal cinoptions={0,:1s,g1s,t0,(0,=.5s
    setlocal noautoindent
    setlocal nosmartindent
    setlocal cindent
    call s:PROG_options()
endfunction

autocmd BufRead,BufNewFile *.c call s:C_options() 
```

它与使用文件类型非常相似，但您可以使用嵌套调用，例如在 中具有通用编程选项`s:PROG_options()`，因此您应该能够进一步减小`.vimrc`.

该`after\filetype`解决方案在初始加载时间方面可能更有效，但我宁愿将大部分自定义设置在一个单一的`.vimrc`而不是分散在`.vim`目录中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T09:23:32.177

至少您可以将前两行与第 7 行合并

```
autocmd FileType python setlocal expandtab shiftwidth=4 tabstop=4 softtabstop=4 textwidth=78 formatoptions-=t
autocmd FileType python match ErrorMsg '\%>80v.\+'
autocmd FileType python inoremap <F5> <esc>:upd\|!python %<cr>
autocmd FileType python nnoremap <F5> :upd\|!python %<cr>
autocmd FileType python nnoremap <leader>8 :w\|call Flake8()<cr>
autocmd BufWritePost *.py call Flake8() 
```

但我无法想象你怎么能摆脱其他人。另一方面，我不认为这些 autocmd 命令需要很长时间才能执行。

# c# - 如何检查拼写但不显示拼写检查对话框？

> ID：12139189
> 
> 赞同：1
> 
> 时间：2012-08-27T09:16:03.357
> 
> 标签：c#, database, excel, com-interop, spell-checking

如何防止查看运行以下代码时打开的 Excel 拼写检查弹出窗口？而且当进行拼写更正时，我想将特定单元格存储在一个数组中。

```
xlWorkSheet.CheckSpelling(Type.Missing, true, false, Type.Missing); 
```

此代码会进行正确的拼写检查，但会弹出拼写检查。我想防止这种情况发生，并将所有更正的单词存储在一个数组中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:49:54.917

如果您使用 Excel 的 Application 对象的 CheckSpelling 方法，而不是 Worksheet 对象或 Range 对象，它将返回 True 或 False 并且不显示对话框。但是，它只检查一个单词，因此您必须逐个单元格地遍历范围，然后在空格字符上拆分单元格的内容，然后遍历单词数组并将它们传递给 Application.CheckSpelling。

# c# - 数据节流 C#

> ID：12139190
> 
> 赞同：5
> 
> 时间：2012-08-27T09:16:10.613
> 
> 标签：c#, performance, throttling

我正在使用一次最多接受 25KB 数据的第三方组件。我正在将对象数组从我的应用程序传递给这个第三方组件。

然而，我的应用程序写入的数据量远远超过 25KB。我正在从数据库中检索数据并直接调用组件。

我在应用程序中添加了组件的引用。我作为包含原始和非原始类型的对象数组传递给组件的数据。

如何在此处实施数据限制？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T09:25:13.853

您可以计算数据库中一行的大小。之后，每次传递某些东西时，都会将该大小添加到变量中。同时，您正在使用运行的秒表。只需检查是否`Stopwatch.EllapsedSeconds`大于 1 秒。如果是，请重置秒表并使用您已经通过的大小重置您的变量。如果不检查您已经传递的大小（变量的数量）是否大于 25KB。如果那是真的电话`System.Thread.Thread.Sleep(Math.Max(1000 - StopWatch.EllapsedMilliseconds, 0))`。但请记住，您必须在额外的线程中执行此操作，因为 sleep 会阻塞整个线程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T09:29:42.580

您必须在应用程序和组件之间实现数据缓冲区。最好的方法是：

*   创建一个有自己的内部线程的类，
*   在类接口的公共部分实现 Write 方法，该方法接受字节数组并将其存储到队列中
*   内部线程从队列中写入最多 25kb 的数据块并休眠 1 秒，减去写入块所需的时间。

您还必须注意，如果数据流是连续的并且以 > 25kbps 的速率生成，那么您生成的数据会超过组件可以消耗的数据，并且您的队列将溢出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T09:40:00.070

查看 MSDN 中的[BufferedStream](http://msdn.microsoft.com/en-us/library/system.io.bufferedstream.aspx)类示例。您应该能够对其进行调整，以便每秒最多写入 25KB。

写入流时，您指定要读取/写入的数据大小，因此如果您说写入 25KB 并返回 24KB，您知道您仍然可以写入 1K。

如果它返回 25KB 并且缓冲区中仍有未完成的数据，您可以执行 a`Thread.Sleep(1000)`以确保它不超过配额。

# ruby-on-rails - 我如何从黄瓜中调用模型

> ID：12139191
> 
> 赞同：0
> 
> 时间：2012-08-27T09:16:17.787
> 
> 标签：ruby-on-rails, rspec, cucumber

*   如何在黄瓜测试中使用 where 条件？
*   我需要测试重置密码功能。

下面是我的代码

```
 Given /^I have successfully requested a password reset "(.*?)" and enter "(.*?)"$/ do |url, username|
    visit url
    fill_in "username", :with => username
    click_button "Request"
    @current_user = User.find_by_username!(username)
    click link("http://localhost:3000/edit/"#{@current_user.token}"/password")
  end 
```

但我有一个错误

```
uninitialized constant User (NameError) 
```

支持/env.rb

```
require 'rubygems'
require 'capybara'
require 'capybara/dsl'
require 'rspec'

Capybara.register_driver :selenium do |app|
  Capybara::Selenium::Driver.new(app, :browser => :firefox)
end

Capybara.run_server = false
Capybara.default_driver = :selenium
Capybara.default_selector = :css

module Helpers
  def without_resynchronize
    page.driver.options[:resynchronize] = false
    yield
    page.driver.options[:resynchronize] = true
  end
end

World(Capybara::DSL, Helpers) 
```

# c# - 串口通信错误，“请求的资源正在使用中。”

> ID：12139196
> 
> 赞同：15
> 
> 时间：2012-08-27T09:16:43.687
> 
> 标签：c#, winforms, serial-port

这是从串行端口读取数据的代码。为了简单起见，让我们单击按钮即可；

```
 private System.IO.Ports.SerialPort serialPort;

    private void button1_Click(object sender, EventArgs e)
    {
        if (serialPort == null)
            serialPort = new SerialPort("COM7", 4800, Parity.None, 8, StopBits.One);
            //COM7 is hard coded just for the sake of example

        if (!serialPort.IsOpen)
            serialPort.Open();

        textBox1.AppendText(serialPort.ReadExisting());
    } 
```

除非我的笔记本电脑进入睡眠状态，否则代码运行得非常好。当系统从睡眠中唤醒时，`serialPort`对象不是`null`，而是`serialPort.IsOpen`返回`false`，我得到错误，**“请求的资源正在使用中。”** 打电话时`serialPort.Open()`。内部异常中没有任何内容。![在此处输入图像描述](../Images/ce4465718f6cd2df5290d3c0f27f6f0f.png)

我已经尝试了很多关于`serialPort`对象的事情，比如关闭、处置或明确地将其分配给 null 和重新初始化，但它没有用，每次都在同一行出现相同的错误。

```
 if (!serialPort.IsOpen)
        {
            try
            {
                serialPort.Open();
            }
            catch
            {
                serialPort.Close();
                serialPort.Dispose();
                serialPort = null;

                serialPort = new SerialPort("COM7", 4800, Parity.None, 8, StopBits.One);
                serialPort.Open();
            }
        } 
```

我也尝试过`serialPort.DataReceived`事件，但是一旦系统从睡眠中唤醒，事件就不会被触发。

唯一的解决方法是停止应用程序并再次运行它。如果有人给我一个线索以体面的方式解决它，我将非常感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T10:02:08.073

正如我在评论中建议的那样，可以通过使用`SystemEvents.PowerModeChanged`事件来检测系统何时即将挂起来解决问题。当检测到该状态时，您需要关闭串行端口并在操作系统即将从挂起状态恢复时重新打开它。

哈马德确认此解决方法有效。

这是代码。

```
SystemEvents.PowerModeChanged += SystemEvents_PowerModeChanged;

void SystemEvents_PowerModeChanged(object sender, PowerModeChangedEventArgs e)
{
    if (e.Mode != PowerModes.Resume)
        serialPort.Close();
} 
```

* * *

另请注意事件文档：

**警告**

**因为这是一个静态事件，所以必须在释放应用程序时分离事件处理程序，否则会导致内存泄漏。**

# php - get_status() 函数返回 1 而不是 true 或 false，为什么？

> ID：12139200
> 
> 赞同：2
> 
> 时间：2012-08-27T09:17:00.247
> 
> 标签：php, oop, class

在下面的代码中，我的网站类中的 get_status() 方法返回 1 而不是我想要的 true 或 false。谁能告诉我为什么？我认为这可能是我课堂上的一个错误，我不确定这行代码是否是 get_status() 方法中的好习惯？

$httpcode = $this->get_httpcode();

[当我回显 $siteUp 时，无论我将网址设为http://www.google.com](http://www.google.com)还是[http://www.dsfdsfsdsdfsdfsdf.com](http://www.dsfdsfsdsdfsdfsdf.com)，它始终为 1

我对面向对象的 php 相当陌生，这是我第一次自学课程，这是我正在构建的学习 oop 的示例。它的目的是检查一个网站的状态，并根据 httpcode 判断它是打开还是关闭。

您对为什么这不起作用的任何提示都会受到极大的欢迎。提前致谢！

```
class website {
protected $url;

function __construct($url) {
    $this->url = $url;
}

public function get_url() {
    return $this->url;
}

public function get_httpcode() {
    //get the http status code
    $agent = "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)";
    $ch=curl_init();
    curl_setopt ($ch, CURLOPT_URL,$this->url);
    curl_setopt($ch, CURLOPT_USERAGENT, $agent);
    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt ($ch, CURLOPT_VERBOSE,false);
    curl_setopt($ch, CURLOPT_TIMEOUT, 10);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_SSLVERSION, 3);
    $page=curl_exec($ch);
    $httpcode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    curl_close($ch);
    return $httpcode;
}

public function get_status() {
    $httpcode = $this->get_httpcode();
    if ($httpcode>=200 && $httpcode<400) {
         $siteUp = true;
    } else {
        $siteUp = false;
    }
    return $siteUp;
}
}

// create an instance of the website class and pass the url
$website = new website("http://www.google.com");
$url = $website->get_url();
$httpcode = $website->get_httpcode();
$siteUp = $website->get_status();
echo "site up is set to: " . $siteUp; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T09:21:15.320

1 就是 PHP 如何将 "true" 转换为字符串

```
<?php echo true; ?> 
```

将显示 1。

在 PHP 中，针对 1 进行测试和针对 true 进行测试几乎是一回事。

```
$siteUp = $website->get_status() ? "true" : "false"; 
```

将使它成为一个字符串供您显示...但是您不能针对它进行测试是否为真，因为“true”和“false”都是有效的字符串，并且会给您一个布尔值 TRUE。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T09:20:35.087

您正在返回一个布尔值，它要么是要么`TRUE`（`FALSE`但不是*真假*）。

您可以返回一个字符串，也可以在将其附加到 echo 语句之前对其进行转换：

例如：

```
public function get_status() {
    $httpcode = $this->get_httpcode();
    if ($httpcode>=200 && $httpcode<400) {
     $siteUp = 'true';
    } else {
    $siteUp = 'false';
    }
    return $siteUp;
} 
```

或者，如果您想将其保留为返回的布尔值，您可以使用一个非常简单的函数将其转换为如下字符串：

```
public function showBool($myBool)
{
    return ($myBool) ? 'True' : 'False';
}

$someVar=false;
echo showBool($someVar); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T09:21:10.493

作为一个简单的练习，尝试运行以下代码并亲自查看：

```
<?php 
    echo true;
?> 
```

您要做的是打印一个布尔值，并期望一个字符串“true”或“false”。您可以执行以下操作：

```
$booleanVal? "true":"false"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T09:24:07.083

避免打印出`true`/ `false`。使用 if 语句查看它实际返回的内容。您希望`$siteUp`打印什么？

```
if($siteUp) { 
    echo "Up"; 
} else { 
    echo "Down"; 
} 
```

# php - 自动下载mpdf生成的pdf文档

> ID：12139204
> 
> 赞同：31
> 
> 时间：2012-08-27T09:17:08.797
> 
> 标签：php, html, mpdf

我是 mpdf 的新手，所以如果您觉得这个问题很愚蠢，请不要介意:)，

我生成了 pdf 文档 usinf mPDF 类，问题是生成 pdf 后浏览器在选项卡中打开它。但我希望它不要打开而是自动下载，我的代码就像下面这样..

```
include("../mpdf.php");
$html="my HTML code here !";

$mpdf=new mPDF('c','A4','','',32,25,27,25,16,13); 
$mpdf->SetDisplayMode('fullpage');
$mpdf->list_indent_first_level = 0; 
$stylesheet = file_get_contents('mpdfstyletables.css');
$mpdf->WriteHTML($stylesheet,1);
$mpdf->WriteHTML($html);
$mpdf->Output('mpdf.pdf'); 
```

`$mpdf->download`我期待在 mpdf 类中会有一个下载功能，例如`$mpdf->Output('mpdf.pdf')`。我搜索了很多这种类型的解决方案，但我找不到任何。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-08-27T09:22:05.780

添加“D”参数以供下载

```
$mpdf->Output('MyPDF.pdf', 'D'); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-27T09:22:11.960

下载使用这个

```
$filename = "mpdf.pdf";
if (file_exists($filename)) {
   header('Content-type: application/force-download');
   header('Content-Disposition: attachment; filename='.$filename);
   readfile($filename);
} 
```

# android - 在模拟时钟中根据不同时区显示时间

> ID：12139212
> 
> 赞同：0
> 
> 时间：2012-08-27T09:17:45.413
> 
> 标签：android, time, clock

我的应用程序中有两个模拟时钟。一个时钟将显示当前位置时间。另一个时钟将用于显示用户选择的不同时区的时间。
我使用以下代码将特定时区设置为第二个时钟。但它不能正常工作。谁能帮帮我吗。

```
public class ClockWidgetDemo extends Activity {
MyAnalogClock clock2;
TimePicker timePicker;
Time timeSetter;
Button btn;
 String timezone = "America/Los_Angeles";
 String time;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    btn=(Button) findViewById(R.id.btn1);
    Calendar calendar=Calendar.getInstance();
    SimpleDateFormat sdf=new SimpleDateFormat("hh:mm:ss a");
    sdf.setTimeZone(TimeZone.getTimeZone("America/Los_Angeles"));
 //TimeZone time=TimeZone.getTimeZone(timezone);
    time=sdf.format(calendar.getTime());
    Log.i("Analog Clock", "Time"+sdf.format(calendar.getTime()));
    btn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
             //timeSetter=new Time(time);
             timeSetter=new Time(timezone);

            onTimeChanged();

        }
    });
clock2 = (MyAnalogClock) findViewById(R.id.clock2);
    public void onTimeChanged(){

    timeSetter.set(timeSetter.second,timeSetter.minute,timeSetter.HOUR,timeSetter.monthDay, timeSetter.month, timeSetter.year);

    Log.i("Analog Clock","Seconds"+timeSetter.second+"Minute"+timeSetter.minute+"Hour"+timeSetter.hour+"Month Day"
            +timeSetter.monthDay+"Month"+timeSetter.month+"Year"+timeSetter.year);

    clock2.setTime(timeSetter.toMillis(true));

}
} 
```

我的模拟时钟代码是

```
public class MyAnalogClock extends View{
public MyAnalogClock(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
}

private Time mCalendar;

private Drawable mHourHand;
private Drawable mMinuteHand;
private Drawable mSecondHand;
private Drawable mDial;

private int mDialWidth;
private int mDialHeight;

private boolean mAttached;

private final Handler mHandler = new Handler();
private float mMinutes;
private float mHour;
private boolean mChanged;

Context mContext;

public MyAnalogClock(Context context, AttributeSet attrs) {
    this(context, attrs, 0);
}

public MyAnalogClock(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    Resources r = context.getResources();

//      TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.AnalogClock, defStyle, 0);
    mContext = context;
    // mDial =
    // a.getDrawable(com.android.internal.R.styleable.AnalogClock_dial);
    // if (mDial == null) {
    mDial = r.getDrawable(R.drawable.clock_dial1);
    // }

    // mHourHand =
    // a.getDrawable(com.android.internal.R.styleable.AnalogClock_hand_hour);
    // if (mHourHand == null) {
    mHourHand = r.getDrawable(R.drawable.clock_hour);
    // }

    // mMinuteHand =
    // a.getDrawable(com.android.internal.R.styleable.AnalogClock_hand_minute);
    // if (mMinuteHand == null) {
    mMinuteHand = r.getDrawable(R.drawable.clock_minute);
    mSecondHand = r.getDrawable(R.drawable.clockgoog_minute);
    // }

    mCalendar = new Time();

    mDialWidth = mDial.getIntrinsicWidth();
    mDialHeight = mDial.getIntrinsicHeight();
}

    @Override
protected void onAttachedToWindow() {
    super.onAttachedToWindow();

    if (!mAttached) {
        mAttached = true;
        IntentFilter filter = new IntentFilter();

        filter.addAction(Intent.ACTION_TIME_TICK);
        filter.addAction(Intent.ACTION_TIME_CHANGED);
        filter.addAction(Intent.ACTION_TIMEZONE_CHANGED);

        getContext().registerReceiver(mIntentReceiver, filter, null,
                mHandler);
    }

    // NOTE: It's safe to do these after registering the receiver since the
    // receiver always runs
    // in the main thread, therefore the receiver can't run before this
    // method returns.

    // The time zone may have changed while the receiver wasn't registered,
    // so update the Time
    mCalendar = new Time();

    // Make sure we update to the current time
    onTimeChanged();
    counter.start();
}

@Override
protected void onDetachedFromWindow() {
    super.onDetachedFromWindow();
    if (mAttached) {
        counter.cancel();
        getContext().unregisterReceiver(mIntentReceiver);
        mAttached = false;
    }
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {

    int widthMode = MeasureSpec.getMode(widthMeasureSpec);
    int widthSize = MeasureSpec.getSize(widthMeasureSpec);
    int heightMode = MeasureSpec.getMode(heightMeasureSpec);
    int heightSize = MeasureSpec.getSize(heightMeasureSpec);

    float hScale = 1.0f;
    float vScale = 1.0f;

    if (widthMode != MeasureSpec.UNSPECIFIED && widthSize < mDialWidth) {
        hScale = (float) widthSize / (float) mDialWidth;
    }

    if (heightMode != MeasureSpec.UNSPECIFIED && heightSize < mDialHeight) {
        vScale = (float) heightSize / (float) mDialHeight;
    }

    float scale = Math.min(hScale, vScale);

    setMeasuredDimension(
            resolveSize((int) (mDialWidth * scale), widthMeasureSpec),
            resolveSize((int) (mDialHeight * scale), heightMeasureSpec));
}

@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);
    mChanged = true;
}

protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    boolean changed = mChanged;
    if (changed) {
        mChanged = false;
    }
    boolean seconds = mSeconds;
    if (seconds) {
        mSeconds = false;
    }
    int availableWidth = 200;
    int availableHeight = 200;

    int x = availableWidth / 2;
    int y = availableHeight / 2;

    final Drawable dial = mDial;
    int w = dial.getIntrinsicWidth();
    int h = dial.getIntrinsicHeight();

    boolean scaled = false;

    if (availableWidth < w || availableHeight < h) {
        scaled = true;
        float scale = Math.min((float) availableWidth / (float) w,
                (float) availableHeight / (float) h);
        canvas.save();
        canvas.scale(scale, scale, x, y);
    }

    if (changed) {
        dial.setBounds(x - (w / 2), y - (h / 2), x + (w / 2), y + (h / 2));
    }
    dial.draw(canvas);

    canvas.save();
    canvas.rotate(mHour / 12.0f * 360.0f, x, y);
    final Drawable hourHand = mHourHand;
    if (changed) {
        w = hourHand.getIntrinsicWidth();
        h = hourHand.getIntrinsicHeight();
        hourHand.setBounds(x - (w / 2), y - (h / 2), x + (w / 2), y
                + (h / 2));
    }
    hourHand.draw(canvas);
    canvas.restore();

    canvas.save();
    canvas.rotate(mMinutes / 60.0f * 360.0f, x, y);
    // canvas.rotate(mSecond, x, y);
    final Drawable minuteHand = mMinuteHand;
    if (changed) {
        w = minuteHand.getIntrinsicWidth();
        h = minuteHand.getIntrinsicHeight();
        minuteHand.setBounds(x - (w / 2), y - (h / 2), x + (w / 2), y
                + (h / 2));
    }
    minuteHand.draw(canvas);
    canvas.restore();
    canvas.save();
    canvas.rotate(mSecond, x, y);

    // minuteHand = mMinuteHand;
    if (seconds) {
        w = mSecondHand.getIntrinsicWidth();
        h = mSecondHand.getIntrinsicHeight();
        mSecondHand.setBounds(x - (w / 2), y - (h / 2), x + (w / 2), y
                + (h / 2));
    }
    mSecondHand.draw(canvas);
    canvas.restore();
    if (scaled) {
        canvas.restore();
    }
}

MyCount counter = new MyCount(10000, 1000);

public class MyCount extends CountDownTimer {
    public MyCount(long millisInFuture, long countDownInterval) {
        super(millisInFuture, countDownInterval);
    }

    @Override
    public void onFinish() {
        counter.start();
    }

    @Override
    public void onTick(long millisUntilFinished) {
        mCalendar.set(System.currentTimeMillis() - 60000);

          //            int hour = mCalendar.hour;
          //            int minute = mCalendar.minute;
        int second = mCalendar.second;

        mSecond = 6.0f * second;
        mSeconds = true;
        // mChanged = true;
        MyAnalogClock.this.invalidate();
        // Toast.makeText(mContext, "text", Toast.LENGTH_LONG).show();
    }
}

public void setOffset(long offset){
    this.offset = offset;
    onTimeChanged();
}

public void setTime(long time){
    long tmp = System.currentTimeMillis() - time;
    this.offset = tmp;
    onTimeChanged();
}

boolean mSeconds = false;
float mSecond = 0;
long offset = 0;

private void onTimeChanged() {
    mCalendar.set(System.currentTimeMillis() - offset);

    int hour = mCalendar.hour;
    int minute = mCalendar.minute;
    int second = mCalendar.second;

    mMinutes = minute + second / 60.0f;
    mHour = hour + mMinutes / 60.0f;
    mChanged = true;
}

private final BroadcastReceiver mIntentReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        if (intent.getAction().equals(Intent.ACTION_TIMEZONE_CHANGED)) {
            String tz = intent.getStringExtra("time-zone");
            mCalendar = new Time(TimeZone.getTimeZone(tz).getID());
        }

        onTimeChanged();

        invalidate();
    }
};

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:22:22.450

尝试下面的代码以获得不同的时区日期和时间。

```
private Date getDateInTimeZone(Date currentDate, String timeZoneId) 
{
    TimeZone tz = TimeZone.getTimeZone(timeZoneId);
    Calendar mbCal = new GregorianCalendar(tz);
    mbCal.setTimeInMillis(currentDate.getTime());
    Calendar cal = Calendar.getInstance();
    cal.set(Calendar.YEAR, mbCal.get(Calendar.YEAR));
    cal.set(Calendar.MONTH, mbCal.get(Calendar.MONTH));
    cal.set(Calendar.DAY_OF_MONTH, mbCal.get(Calendar.DAY_OF_MONTH));
    cal.set(Calendar.HOUR_OF_DAY, mbCal.get(Calendar.HOUR_OF_DAY));
    cal.set(Calendar.MINUTE, mbCal.get(Calendar.MINUTE));
    cal.set(Calendar.SECOND, mbCal.get(Calendar.SECOND));
    cal.set(Calendar.MILLISECOND, mbCal.get(Calendar.MILLISECOND));
    return cal.getTime();
 }

String tz = "America/Los_Angeles";
Date date = new Date();
date = getDateInTimeZone(date, tz); 
```

# matlab - 在 Matlab 中使用 dir 函数 - 如何摆脱 `.` 和 `..`

> ID：12139213
> 
> 赞同：3
> 
> 时间：2012-08-27T09:17:51.467
> 
> 标签：matlab, file-io, directory, dir

我正在使用`dir`函数列出文件夹的内容，但它给出`.`了`..`前两个文件夹。有什么办法可以摆脱这个愚蠢的过程。

我可以在`dir`函数中使用正则表达式吗？（如果可以的话，它可以是一个解决方案）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T09:24:56.590

我不知道任何内置解决方案，但我倾向于执行以下操作：

```
d = dir ('C:\');
d(~[d.isdir])= []; %Remove all non directories.
names = setdiff({d.name},{'.','..'}); 
```

该`setdiff`命令删除不需要的元素。

* * *

另一种摆脱通配符的廉价方法`.`是`..`使用通配符（仅限 Windows）：

```
d = dir ('C:\*.*'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T09:28:43.013

这个怎么样

```
list = dir('/var/temp');
list = list(3:end,:); 
```

这当然是假设前两个条目确实是`.`并且`..`在所有操作系统上可能并非如此

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T09:25:31.270

根据本文档的声音，`dir`仅显示操作系统本身返回的内容，因此我怀疑您是否能够在不对返回的列表进行一些后期处理的情况下抑制它

[http://www.mathworks.co.uk/help/techdoc/ref/dir.html](http://www.mathworks.co.uk/help/techdoc/ref/dir.html)

dir 确实支持通配符 *

# scala - 不平衡括号：Local Play 2.0.3

> ID：12139217
> 
> 赞同：0
> 
> 时间：2012-08-27T09:18:09.750
> 
> 标签：scala, playframework

我环顾了一段时间，没有发现类似的东西，我认为这是版本不匹配。我还尝试要求：-play 2.0.3 并获得：

```
-----> Installing Play! 2.0.3.....
-----> Error installing Play! framework or unsupported Play! framework version     specified. Please review Dev Center for a list of supported versions.
 !     Heroku push rejected, failed to compile Play! app 
```

听起来怪怪的？我查看了开发中心，它应该得到支持。

这是我玩的部署错误！1.2.4 默认

```
--------------------------------------------------------------
`012-08-27T08:42:06+00:00 heroku[web.1]: Starting process with command `play run --        http.port=24193 --%prod -Dprecompiled=true`
2012-08-27T08:42:07+00:00 app[web.1]: CompilerOracle: exclude     jregex/Pretokenizer.next
2012-08-27T08:42:07+00:00 app[web.1]: 08:42:07,856 INFO  ~ Starting /app
2012-08-27T08:42:07+00:00 app[web.1]: 08:42:07,943 INFO  ~ Application is precompiled
2012-08-27T08:42:07+00:00 app[web.1]: Exception in thread "main" play.exceptions.UnexpectedException: Unexpected Error
2012-08-27T08:42:07+00:00 app[web.1]:   at play.Play.start(Play.java:556)
2012-08-27T08:42:07+00:00 app[web.1]:   at play.Play.init(Play.java:300)
2012-08-27T08:42:07+00:00 app[web.1]:   at play.server.Server.main(Server.java:159)
2012-08-27T08:42:07+00:00 app[web.1]:   at jregex.Term.makeTree(jregex/Term.java:374)
2012-08-27T08:42:07+00:00 app[web.1]:   at jregex.Term.makeTree(jregex/Term.java:308)
2012-08-27T08:42:07+00:00 app[web.1]: Caused by: jregex.PatternSyntaxException: unbalanced parenthesis
2012-08-27T08:42:07+00:00 app[web.1]:   at jregex.Term.makeTree(jregex/Term.java:206)
2012-08-27T08:42:07+00:00 app[web.1]:   at jregex.Term.makeTree(jregex/Term.java:219)
2012-08-27T08:42:07+00:00 app[web.1]:   at jregex.Pattern.<init>(jregex/Pattern.java:150)
2012-08-27T08:42:07+00:00 app[web.1]:   at jregex.Pattern.compile(jregex/Pattern.java:164)
2012-08-27T08:42:07+00:00 app[web.1]:   at jregex.Pattern.<init>(jregex/Pattern.java:108)
2012-08-27T08:42:07+00:00 app[web.1]:   at play.mvc.Router$Route.compute(Router.java:715)
2012-08-27T08:42:07+00:00 app[web.1]:   at play.mvc.Router.getRoute(Router.java:134)
2012-08-27T08:42:07+00:00 app[web.1]:   at play.mvc.Router.appendRoute(Router.java:118)
2012-08-27T08:42:07+00:00 app[web.1]:   at play.mvc.Router.parse(Router.java:199)
2012-08-27T08:42:07+00:00 app[web.1]:   at play.mvc.Router.parse(Router.java:164)
2012-08-27T08:42:07+00:00 app[web.1]:   at play.mvc.Router.load(Router.java:48)
2012-08-27T08:42:07+00:00 app[web.1]:   at play.Play.start(Play.java:519)
2012-08-27T08:42:07+00:00 app[web.1]:   ... 2 more
2012-08-27T08:42:07+00:00 app[web.1]:   at play.mvc.Router.detectChanges(Router.java:219)
2012-08-27T08:42:08+00:00 app[web.1]: ~  _ __ | | __ _ _  _| |
2012-08-27T08:42:08+00:00 app[web.1]: ~ |_|            |__/   
2012-08-27T08:42:08+00:00 app[web.1]: ~ framework ID is prod
2012-08-27T08:42:08+00:00 app[web.1]: ~
2012-08-27T08:42:08+00:00 app[web.1]: ~ | '_ \| |/ _' | || |_|
2012-08-27T08:42:08+00:00 app[web.1]: ~ |  __/|_|\____|\__ (_)
2012-08-27T08:42:08+00:00 app[web.1]: ~ play! 1.2.5, http://www.playframework.org
2012-08-27T08:42:08+00:00 app[web.1]: ~        _            _ 
2012-08-27T08:42:08+00:00 app[web.1]: ~ Ctrl+C to stop
2012-08-27T08:42:08+00:00 app[web.1]: ~
2012-08-27T08:42:08+00:00 app[web.1]: ~ 
2012-08-27T08:42:09+00:00 heroku[web.1]: Process exited with status 1
2012-08-27T08:42:09+00:00 heroku[web.1]: State changed from starting to crashed

-------------------------------------------
shell# heroku ps
=== web: `play run --http.port=$PORT $PLAY_OPTS`
web.1: crashed for 9m 
```

编辑：----路线文件

```
# Routes
# This file defines all application routes (Higher priority routes first)
# ~~~~

# The home page
GET     /                                   controllers.Projects.index

# Authentication
GET     /login                              controllers.Application.login
POST    /login                              controllers.Application.authenticate
GET     /logout                             controllers.Application.logout

# Map static resources from the /public folder to the /public path
GET     /assets/*file                       controllers.Assets.at(path="/public", file) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T00:38:17.800

问题已解决：由于某种原因 project/ 位于导致此错误的 .gitignore 中。这个问题不是很冗长。

# iphone - 动态创建 uibarbutton 工作

> ID：12139223
> 
> 赞同：0
> 
> 时间：2012-08-27T09:18:22.763
> 
> 标签：iphone, objective-c, ios, xcode

uibarbutton 没有响应。

```
UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithTitle:@"Back" 
                               style:UIBarButtonItemStylePlain target:nil action:nil]; 
```

当用户点击按钮时，不会触发任何操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:25:22.000

为此，您还需要为 UIbarbutton 使用以下代码。

```
UIBarButtonItem *cameraView = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCamera
                               target:self action:@selector(showCam)]; 
```

或者您也可以使用以下代码。

```
self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Back"
                                        style:UIBarButtonItemStylePlain
                                        target:self
                                                                              action:@selector(showCam)]; 
```

它也可能对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T09:27:37.663

```
self.navigationItem.rightBarButtonItem = [[[UIBarButtonItem alloc] initWithTitle:@"TITLE"
                                       style:UIBarButtonItemStylePlain
                                       target:self
                                       action:@selector(methodName:)] autorelease]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T09:31:04.790

您需要指定将处理按钮回调的委托（'target' 参数，通常是'self'，以及要调用的方法的名称，即'action' 参数）。

```
backButton = [[UIBarButtonItem alloc]
                 initWithTitle:@"Back"
                     style:UIBarButtonItemStylePlain
                     target:self
                     action:@selector(backButtonAction:)]; 
```

在指定为目标的类中包含操作方法“backButtonAction”。因此，如果使用“self”，请将该方法包含在添加按钮的同一类中，如下所示

```
- (void) backButtonAction:(id) sender
{
    NSLog (@"backButtonAction: Sender %p", sender);

    ....
} 
```

# playframework-2.0 - 在 Play 中使用 sbt-git-plugin！框架

> ID：12139231
> 
> 赞同：2
> 
> 时间：2012-08-27T09:19:18.903
> 
> 标签：playframework-2.0, sbt

我正在尝试在 Play 中使用 Git 命令！直接控制台。所以，我找到了[sbt-git-plugin](https://github.com/sbt/sbt-git-plugin)并尝试使用它。为此，我按照上面链接中解释的说明进行操作。

（包含

```
resolvers += Resolver.url("scalasbt", new URL("http://scalasbt.artifactoryonline.com/scalasbt/sbt-plugin-releases"))(Resolver.ivyStylePatterns)

resolvers += "jgit-repo" at "http://download.eclipse.org/jgit/maven"

addSbtPlugin("com.jsuereth" % "sbt-git-plugin" % "0.4") 
```

到项目/plugins.sbt 文件。）

但是，我的游戏！控制台说它找不到'org.eclipse.jgit.pgm.Main'。有什么我必须检查或做的吗？请让我知道如何在 Play 框架中应用这个 SBT 插件。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:27:28.647

似乎 JGit Maven 存储库已关闭（来自[http://download.eclipse.org/jgit/maven/](http://download.eclipse.org/jgit/maven/)的 404 ）。

您应该尝试使用备用存储库，例如[http://eclipse.ialto.org/jgit/maven/repository/](http://eclipse.ialto.org/jgit/maven/repository/)：

```
resolvers += Resolver.url("scalasbt", new URL("http://scalasbt.artifactoryonline.com/scalasbt/sbt-plugin-releases"))(Resolver.ivyStylePatterns)

resolvers += "jgit-repo" at "http://eclipse.ialto.org/jgit/maven/repository/"

addSbtPlugin("com.jsuereth" % "sbt-git-plugin" % "0.4") 
```

# regex - 懒惰地搜索文本

> ID：12139235
> 
> 赞同：0
> 
> 时间：2012-08-27T09:19:47.440
> 
> 标签：regex

我想搜索以**名词**或**adj**或**adv**开头的文本，直到它遇到**<**。**noun**、 **adj**和**adv**不应在它们和**<**之间再次出现。我预计这个正则表达式会起作用，但它失败了。我怎样才能使这项工作？

```
(noun|adj|adv)[^\1]+?< 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:25:06.980

`[...]`括号语法将仅搜索单个字符。

在这里，您需要使用否定断言：`((?!\1).)+`可以做到。如果您的正则表达式语法与 perl/ecmascript 兼容。

```
(noun|adj|adv)((?!\1).)+< 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:25:55.517

以前的解决方案是半正确的，但没有一个是正确的。罗伯特完全错了。@Benoit 更接近于正确，但仍然是错误的。原因如下：[http](http://regex101.com/r/qI7hA6) ://regex101.com/r/qI7hA6 - 引擎只会在前瞻不会失败的另一个位置匹配。您还设置了不必要的反向引用。最重要的是，您仍然允许在文本中使用名词/adj/adv。

这是一个更好的解决方案：[http ://regex101.com/r/nL8lL7](http://regex101.com/r/nL8lL7)

`/^|\G(?:noun|adj|adv)((?:(?!noun|adj|adv).)+)</gm`

我希望这行得通。如果这不是您要查找的内容，请澄清，我会相应地调整表达式。

祝你好运。

# jquery-ui - jquery ui Selectmenu的位置

> ID：12139237
> 
> 赞同：1
> 
> 时间：2012-08-27T09:19:56.437
> 
> 标签：jquery-ui, select-menu, jquery-ui-selectmenu

我使用下面的选择菜单脚本来初始化选择菜单。

```
$("#year").selectmenu({style:'dropdown',maxHeight:400}); 
```

HTML 代码：

```
<select name="year" class="bubble year" id="year">
        <option value="">Year</option>
                <option value="">2000</option>
                <option value="">2001</option>
</select> 
```

生成的 UI Selectmenu 放在 html 的底部。根据要求很好，但是由于以下样式应用于自动生成的 Div，因此生成的选择菜单在页面上不可见。

```
element.style {
        left: -1052.5px;
        position: relative;
        top: -2206.05px;
        z-index: 1;
} 
```

以上样式已应用于 class `.ui-selectmenu-menu`。因此，由于`left`&`top`定位，ui 下拉菜单在页面上不可见。

我的问题是关于定位。上面的样式是怎么产生的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T09:55:50.020

您使用的是哪个版本的选择菜单？工作示例或 jsFiddle？

在最新版本中，定位由 jQuery UI Position Plugin 完成。早期（已弃用）版本使用内置功能。

您是否包括所有需要的文件和 CSS？

# alfresco - 如何在 Alfresco 4 的前端访问后端代码？

> ID：12139238
> 
> 赞同：0
> 
> 时间：2012-08-27T09:20:05.650
> 
> 标签：alfresco, alfresco-share

我希望制作可在整个 Alfresco（后端和前端）中访问的类和枚举。我怎样才能做到这一点？

感谢：D

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T17:47:51.780

编写代码，根据需要实现类。将 JAR 放在 $TOMCAT_HOME/webapps/alfresco/WEB-INF/lib 中。

如果您想让这些类可用于在 Alfresco 层中运行的服务器端 JavaScript，请将您的 Java 服务公开为 JavaScript 根对象。查看 Alfresco 源代码以获取示例，例如 searchService 或 siteService 是如何公开的。

如果要将存储库层公开给共享层，请在数据层上编写 Web 脚本并通过 HTTP 从共享层调用这些脚本。有许多可用于编写 Web 脚本的资源，并且产品附带了大约 400 个 Web 脚本，因此有大量示例。

# git - 无法打开 git/commit_editmsg

> ID：12139239
> 
> 赞同：7
> 
> 时间：2012-08-27T09:20:08.273
> 
> 标签：git, commit

我有一个链接到 Dropbox 文件夹的 git 存储库。最近，我将我的笔记本电脑换到了另一台，现在我无法执行“git commit -am”功能。我不断收到此错误消息：“无法打开'.git/COMMIT_EDITMSG'：权限被拒绝。

有任何想法吗？

谢谢，里龙

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-07-07T14:11:01.113

假设您在 Windows 机器上，您可能修改了隐藏文件并且不再具有对隐藏文件的写入权限。

要解决这个问题，只需导航到您的 .git 文件夹并删除“COMMIT_EDITMSG”文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T09:13:14.010

这是一个文件权限问题，您当前登录的用户没有使用这些文件的权限。

如果那是您的回购，您可以尝试：

*   切换到拥有 repo 的其他用户
*   更改 repo 的所有者 ( `sudo chown youruser -R yourrepodir/`)
*   使用更改特定文件的权限`chmod`（您应该避免使用`0777`，因为它不安全）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T09:27:41.293

尝试这个 `git init --shared=0777`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-19T22:18:10.927

当我在工作副本的 git repo 中有一个 git repo 时，我遇到了这个问题。希望对您有所帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-16T06:30:13.437

我有同样的问题，这里的步骤，我是如何解决这个问题的。

1）首先检查文件权限（发现只有root有权限）

`$ls -l .git/COMMIT_EDITMSG`

`-rw-r--r-- 1 root root 13 Jun 11 07:54 .git/COMMIT_EDITMSG`

2）以root身份登录并更改文件权限

`# chown arun:arun .git/COMMIT_EDITMSG`（这`arun`是我的用户名，请参阅`chown`命令以获取更多详细信息）

3）现在文件权限已更改，可以毫无问题地提交！

`$ls -l .git/COMMIT_EDITMSG`

`-rw-r--r-- 1 arun arun 12 Jun 16 11:47 .git/COMMIT_EDITMSG`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-14T08:26:24.230

确保您使用的 git 应用程序（无论是 GUI、cmd 还是 bash）以管理员身份运行。如果您使用的是 Windows，这当然适用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-20T12:41:55.377

尝试删除 .git/COMMIT_EDITMSG

然后重新运行提交。

```
rm -rf .git/COMMIT_EDITMSG 
```

# vb.net - 将运行时创建的数据表保存到空的 mdb

> ID：12139240
> 
> 赞同：2
> 
> 时间：2012-08-27T09:20:09.367
> 
> 标签：vb.net, ms-access, datatable

您好，我有一个数据表，有 36 列，大约 112000 条记录和一个空 mdb 文件，将该表添加到空 mdb 数据库的最佳方法是什么？

我是否必须使用 SQL 命令`CREATE TABLE`并将每一列手动添加到创建的数据表中，然后使用 SQL`insert`命令？

有没有类似的东西`SqlBulkCopy`可以用于这项任务？请注意，Datatable 是在运行时创建的，并且从未在数据库中大部分数据取自 XML 文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T03:43:16.740

我认为最好的方法是使用`OleDBAdapter`类。在继续此过程之前，您需要先构建数据库。因为它是`OleDBAdapter`. 如果您还记得，您使用 DataAdapter 的`Fill()`方法来读取数据库中表的内容并填充我们本地缓存的 DataTable 对象。

在 ADO.Net 中保存数据有 3 个步骤：

*   `Fill()`使用方法获取数据的本地缓存副本
*   编写对本地缓存副本进行更改的代码（或使用控件）
*   `Update()`使用该方法将更改保存回底层数据库

这是代码，

```
Using conn As New OleDBConnection("connectionString Here")
    Using comm As New OleDBCommand()
        With comm
            .Connection = conn
            .CommandType = CommandType.CommandText
            .CommandText = "SELECT * FROM youTableName"
        End With
        Using adapter As New OleDBDataAdapter(comm)
            Dim _dataTable As New DataTable()
            adapter.Fill(_dataTable)

            'add you records here  '
            ' preferably by using loop '
            Dim _dataRow As DataRow
            _dataRow = _dataTable.NewRow()
            _dataRow("colNameA") = "valueA"
            _dataRow("colNameB") = "valueB"
            '........ '
            _dataTable.Rows.Add(_dataRow)

            Dim dt_changes As DataTable
            dt_changes = _dataTable.Changes()
            If Not IsNothing(dt_changes) Then
                Using commBuild As OleDbCommandBuilder(adapter)
                    Dim rowCount as Integer = adapter.Update(dt_changes)
                    MsgBox(rowCount  & " updated")
                End Using
            End If
        End Using
    End Using
End Using 
```

# java - 在pdf中以小字体打印子字符串

> ID：12139252
> 
> 赞同：1
> 
> 时间：2012-08-27T09:20:56.023
> 
> 标签：java, string, string-concatenation, pdf-writer

我使用下面的代码在 pdf 中打印一个字符串，这给了我一个相同大小的字符串，我想用不同的字体大小制作最后两个字符串。我怎样才能做到这一点 ？

```
PdfContentByte cb = writer.getDirectContent();

    String stl = "", stl1 = (String) request.getParameter("x0");//                        (String)val.get(0);
        int ln = stl1.length();
        String new1 ="" ;
        if (ln > 1)
        {
            for (int ii = 0; ii < ln - 2; ii++)
                stl = stl + stl1.charAt(ii);
            stl = stl + " . ";
            stl1 = stl1.substring(ln - 2, ln);
            new1 = stl + stl1;
            //stl1 = stl + stl1;

        }
        cb.setFontAndSize(bf, 18); 
        cb.setTextRenderingMode(2);
        //cb.showTextAligned(PdfContentByte.ALIGN_LEFT, stl1, 20 + x, 663 + y, 0);
        cb.showTextAligned(PdfContentByte.ALIGN_LEFT, new1, 20 + x, 663 + y, 0); 
```

期望的输出：

![在此处输入图像描述](../Images/e1dd6ba5aff921994a06697b25e7b2db.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T00:16:24.863

最好的方法是在第一个包含最后 2 位数字的字符串之后打印一个单独的字符串。

代码示例：

1）替换`String new1 ="" ;`为：

```
String textLarge ="" ;
String textSmall ="" ; 
```

2）替换`new1 = stl + stl1;`为以下内容：

```
textLarge = stl;
textSmall = stl1; 
```

3）更改一些代码以分别打印大文本和小文本

```
cb.setFontAndSize(bf, 18);        
cb.showTextAligned(PdfContentByte.ALIGN_LEFT, textLarge, 20 + x, 663 + y, 0);
cb.setFontAndSize(bf, 14);        
cb.showTextAligned(PdfContentByte.ALIGN_LEFT, textSmall, 20 + ? + x, 663 + y, 0); 
```

更换 ”？” 在上面的行中带有大文本的打印宽度。看起来您正在使用 itext，因此您可以使用： `BaseFont.getWidthPoint(String text, float fontSize)`来获取 pt 中字符串的宽度。或者将字符串放在一个 Chunk 中并执行`chunk.getWidthPoint()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:06:29.780

前面的答案是正确的，但还有另一种方法可以做到这一点。如果要将文本定位在绝对坐标处，还可以使用 ColumnText 类。例如：您可以使用与您目前使用的方法类似的静态方法 showTextAligned()。ColumnText 方法的优点是它接受 Phrase 对象。一个 Phrase 对象可以由不同的 Chunk 对象组成，每个 Chunk 可以使用不同大小的不同字体。有关演示上一个答案以及这个答案的示例，请参阅[http://itextpdf.com/examples/iia.php?id=62](http://itextpdf.com/examples/iia.php?id=62)

# android - 在 Android 3+ 上实现 HTML5 直播视频的最佳方式

> ID：12139253
> 
> 赞同：0
> 
> 时间：2012-08-27T09:21:01.750
> 
> 标签：android, html5-video, http-live-streaming, live-streaming

我有用于直播电视频道的 Wowza。我尝试使用 HTTP 实时流 (HLS)，但 Chrome 只播放音频（问题[17118](http://code.google.com/p/android/issues/detail?id=17118)），嵌入的 Android 浏览器开始播放视频，但非常不稳定（经常崩溃）。在 Galaxy Nexus (JB) 和 Nexus 7 上测试。即使在 Google TV (Sony NSZ-GS7) 上播放也不稳定，在 Chrome 中仅播放前 5-10 分钟然后停止。

同时在iOS（iPad 2）上播放完全稳定。

据我了解 - 现在 Flash 不是 Android 的选项。

那么是否有可能在 Android 3+ 的浏览器中获得有效的直播视频（直播电视频道）？

```
<video controls src="http://example.com:1935/live/ch1.stream/playlist.m3u8">
</video> 
```

# animation - 设置 CALayer.AnchorPoint 动画

> ID：12139254
> 
> 赞同：0
> 
> 时间：2012-08-27T09:21:08.547
> 
> 标签：animation, xamarin.ios, calayer

我正在尝试使用动画设置 AnchorPoint，但它不起作用。我尝试使用 UIView 制作动画：

```
UIView.BeginAnimations("Test");
UIView.SetDuAnimationDuration(1f);
Layer.AnchorPoint = new Point(0.5,0.5);
UIView.CommitAnimations(); 
```

但这不起作用。有没有人有动画设置 AnchorPoint 的想法？

提前感谢亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:33:35.763

对不起，我已经解决了我的问题。

答案是这两个链接的组合：

[在动画集结束时在 MonoTouch 中实现 CAKeyFrameAnimation 回调？](https://stackoverflow.com/questions/2219965/implementing-a-cakeyframeanimation-callback-in-monotouch-at-the-end-of-an-animat)

[https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/AnimProps.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/AnimProps.html)

# asp.net - Facebook Like 按钮单击给出错误

> ID：12139259
> 
> 赞同：2
> 
> 时间：2012-08-27T09:21:21.297
> 
> 标签：asp.net, facebook-like

我想在我的 asp.net 网页上放置一个类似 facebook 的按钮。我已经从 facebook 生成代码，例如按钮插件[https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
</head>
<body>
<div id="fb-root">
</div>
<script>        (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
        fjs.parentNode.insertBefore(js, fjs);
    } (document, 'script', 'facebook-jssdk'));</script>
<form id="form1" runat="server">
<div>
    <div class="fb-like" data-href="http://www.facebook.com/dotnetspider" data-send="true"
        data-width="450" data-show-faces="true">
    </div>
</div>
</form>
</body>
</html> 
```

链接按钮已正确生成，并且还显示了喜欢该页面的人数。我已经登录了一个 Facebook 帐户。但是，当我单击“赞”按钮时，该按钮会变成带有“错误”文本的红色链接。打开的弹出窗口显示以下错误：

> 您无法发布此内容，因为它有一个被阻止的链接。：您尝试共享的内容包括一个因垃圾邮件或不安全而被阻止的链接：错误/警告消息的正文。标题是：您无法发布此内容，因为它有一个被阻止的链接。有关更多信息，请访问帮助中心。如果您认为自己看错了，请告诉我们。

它的代码很简单，但它不起作用......任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:29:13.380

也许 Facebook 以某种方式将您的网页视为“不安全”的网站？我不是 100% 确定这一点，但你应该试一试。[在这里](http://sitecheck.sucuri.net)检查您的网站

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:40:05.063

出于某种原因，无论是否正确，FB 都已确定您尝试发布*LIKE*的页面是垃圾邮件的来源。请注意，这与您喜欢的页面有关，因此您的应用程序是否正在开发中，或者您实际发布的位置可能不相关。

如果您认为这是不正确的，您可以在这里发布申诉：http: [//www.facebook.com/help/contact.php?show_form=block_appeal](http://www.facebook.com/help/contact.php?show_form=block_appeal)

如果您的页面尚不存在（即您正试图为尚未发布的页面点赞），那么这可能会导致错误。

您可以在此处查看是否存在任何可能导致问题的当前已知问题：http: [//www.facebook.com/KnownIssues](http://www.facebook.com/KnownIssues)

# c# - Windows 8 Metro 应用程序 Sqlite 问题

> ID：12139262
> 
> 赞同：1
> 
> 时间：2012-08-27T09:21:43.230
> 
> 标签：c#, sqlite, microsoft-metro

我在 C# 上使用 Sqlite 数据库创建了一个示例，如下所示：

[使用-sqlite-in-your-windows-8-metro-style-applications](http://wp.qmatteoq.com/using-sqlite-in-your-windows-8-metro-style-applications/)

它在我的开发机器上正常工作，创建数据库并添加条目，但是当我在客户端机器上使用这个示例或应用程序时，它永远不会创建数据库。我不知道会发生什么。

您可以使用此示例进行测试。它也和我的一样工作。

[例子](http://wp.qmatteoq.com/wp-content/uploads/2012/06/SqlLiteTest.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:11:35.187

我解决了这个问题。我在调试模式下创建包这是错误的方式，它必须在发布模式下创建。

# windows - 如何在 WinJS 应用程序中使用嵌入式浏览器嵌入第三方网页？

> ID：12139268
> 
> 赞同：1
> 
> 时间：2012-08-27T09:22:18.313
> 
> 标签：windows, windows-8, windows-runtime, winjs

[使用 C#/XAML 开发 Windows 8 应用程序时，您可以使用WebView](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview.aspx)控件将第三方网页嵌入到应用程序中。

WinJS 的等价物是什么？框架？html控件？

我的要求是我正在构建一个内容阅读器应用程序，并且我需要能够在应用程序内呈现第三方网页，而不会炸毁 WinJS 安全沙箱或不从每个第三方网络中刮掉相关内容页。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T09:58:03.770

您可以使用 IFrame 在您的应用程序中使用 html 控件打开第三方网页`<iframe>`。

您还必须在 Content URIs 选项卡的 package.appxmanifest 中设置要在应用程序中包含/排除的 URI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:57:23.297

好吧，我想我明白了。

答案是您应该在 WinJS 应用程序中使用 iframe 来加载应用程序当前安全上下文之外的内容。

我刚刚在本地测试了它，它似乎可以工作。

此外，微软在他们的 Win8 开发中心有几个相关的例子，向你展示如何做到这一点。

**Win8 开发中心**：[集成来自 Web 服务示例的内容和控件](http://code.msdn.microsoft.com/windowsapps/Mashup-Sample-10689f5b)（向您展示如何将来自第三方服务的内容嵌入到各种安全上下文中）

**相关 MSDN 论坛帖子**：[Metro 应用程序不允许 JavaScript 使用外部网络文件？](http://social.msdn.microsoft.com/Forums/en-NZ/winappswithhtml5/thread/f5a852c1-c757-40f2-bc41-8d6a190a233e)

# navigation - Sencha Touch2 中的全局后退按钮

> ID：12139273
> 
> 赞同：0
> 
> 时间：2012-08-27T09:22:32.657
> 
> 标签：navigation, sencha-touch-2

我实现了一个 sencha touch 2 应用程序，其中包含另一个导航列表中的导航列表。

为了使应用程序更干净，我删除了导航视图的标题，因为每当显示内部导航列表时，彼此下方都有两个标题。

相反，我在应用程序的页脚中创建了一个全局后退按钮。我的问题是，无论您在应用程序中的哪个位置，如何返回一页。

使用 .pop 方法时，您需要指定要从哪个导航列表中弹出一个在我的情况下不起作用的视图。

基本上，因为当您单击一个按钮时，会加载另一个视图，我认为有某种方式可以尊重这一点，即具有类似 history.go(-1) 但不是重定向，而是返回到查看将您重定向到此处的内容。

这可以实现吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T18:50:29.190

...我建议不要在 NavigationView 中使用 NavigationView。两者都需要的原因是什么？

否则，您可能能够跟踪访问的最后一个视图并在后面弹出该视图。[NavigationView.pop(ViewObject)](http://docs.sencha.com/touch/2.2.1/#!/api/Ext.navigation.View-method-pop) - 特别是这个选项：'如果是对象，则弹出到匹配的视图实例。

# java - 用以前的 Objective-C 经验理解语法

> ID：12139274
> 
> 赞同：0
> 
> 时间：2012-08-27T09:22:38.213
> 
> 标签：java, operators, primitive-types

我是 Java 新手。我有 3 个月的 Objective-C 经验，所以我很容易理解它的概念。我正在尝试将一个用 Java 编写的简单阶乘示例程序移植到 Objective-C 以用于学习目的。但是有这一行，我不明白这里发生了什么：

```
for (int i; i < 10; i++){
println (i + "! =" + factorial(i)); 
```

现在`for`循环和一切都很好，但是这个“！=”我从未见过——它有什么作用？对我来说，它看起来像一个“不等于”运算符，这没有任何意义 i + not equal too + factorial （顺便说一句，阶乘是一种方法）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:25:06.257

这是建立一个字符串。

Java中的“+”可用于连接字符串。如果其中一个部分是字符串，并且所有其他内容也转换为字符串（如此处的整数），则会发生这种情况。

"!=" 只是一个字符串文字，不是 Java 看到的任何东西。

在 Objective-C 中，它将是

```
 [NSString stringWithFormat:@"%d! = %d", i, factorial(i)] 
```

请注意，在 Java 中，您还可以执行

```
 String.format("%d! = %d", i, factorial(i)); 
```

这对你来说可能更熟悉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T09:24:40.453

`!`是阶乘的数学符号。我假设`println`需要一个字符串并将其打印到控制台（或其他地方），因此该行很简单打印结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T09:26:16.923

它只是文本，被打印出来

所以你的控制台输出将是

```
1! =1  
2! =2  
3! =6  
... 
```

Java 中的字符串在 "" 中，并且使用 + 完成连接

```
println ("the factorial of" + i + " is " + factorial(i)); 
```

本来是一样的，但不会让你感到困惑

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T09:26:41.357

这只是一个在输出中连接的字符串，产生以下输出：

```
1! =1
2! =2 
... 
```

简而言之，它根本不是一个运算符，而是一个字符串文字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T09:27:24.453

它是一个字符串。println 完成的输出将是“i 的值”，然后就可以了！= 而不是 factorial(i) 返回...这实际上是非常非常基本的东西。

# jquery - 使用 jquery 从变量中删除 DOM 元素

> ID：12139280
> 
> 赞同：7
> 
> 时间：2012-08-27T09:23:03.797
> 
> 标签：jquery, html, dom

请帮我解决这个问题：

我有这个：

```
var text='<li id="job1">Job 1</li>'+
         '<li id="job2">Job 2</li>'+
         '<li id="job3">Job 3</li>'; 
```

我想删除一个元素，如下所示：

```
$("#job2",$(text)).remove(); 
```

这不起作用。有没有办法做到这一点？谢谢。

**编辑：** 我想将结果保存回文本：

```
 text='<li id="job1">Job 1</li><li id="job3">Job 3</li>'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T09:29:26.537

您的 var`text`只是一个包含**字符串的变量**

`<li id="job1">Job 1</li><li id="job2">Job 2</li><li id="job3">Job 3</li>`

而且字符串不是一个对象，所以你不能使用`.remove()`

* * *

但是一旦你这样做了：

`$('#someElement').append(text);`

比你可以简单地做的：

`$('#job2').remove();`

并使用以下方法检索您的新字符串：

```
text = $('#someElement').html(); // '<li id="job1">Job 1</li><li id="job3">Job 3</li>' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T09:25:34.717

试试这样...

*更新**[FIDDLE](http://jsfiddle.net/XN2uC/2/)** 我的第一个版本的代码`$(text).find("#job2").remove();`在 jsfiddle 中不起作用，但是当我添加`<ul></ul>`到代码中时，它就像魅力一样工作。我不知道为什么不使用第一个实例而没有我看不到任何没有没有`ul`的场合所以请尝试这样。`li``ul`

```
var text='<ul><li id="job1">Job 1</li>'+
         '<li id="job2">Job 2</li>'+
         '<li id="job3">Job 3</li></ul>';

$text = $(text);
// console.log($text);
$text.find("li#job2").remove();
// console.log($text.find("li#job2"));
$('div').append($text);​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T09:26:21.343

如果你想从文本中删除 'job2'

```
$(text).find("#job2").remove(); 
```

# c++ - 使用 NTL 库的编译器错误

> ID：12139285
> 
> 赞同：2
> 
> 时间：2012-08-27T09:23:22.083
> 
> 标签：c++, compiler-errors, ntl

我正在尝试使用 NTL 库，但我总是收到有关未定义符号的编译器错误。

示例（取自 NTL 文档）：

```
#include <NTL/ZZ.h>

NTL_CLIENT

int main()
{
   ZZ a, b, c; 

   cin >> a; 
   cin >> b; 
   c = (a+1)*(b+1);
   cout << c << "\n";
} 
```

结果：

```
$ g++ -lntl simple.cpp
/tmp/ccGwxURb.o: In function `main':
simple.cpp:(.text+0x3a): undefined reference to `NTL::operator>>(std::basic_istream<char, std::char_traits<char> >&, NTL::ZZ&)'
simple.cpp:(.text+0x4b): undefined reference to `NTL::operator>>(std::basic_istream<char, std::char_traits<char> >&, NTL::ZZ&)'
simple.cpp:(.text+0xda): undefined reference to `NTL::operator<<(std::basic_ostream<char, std::char_traits<char> >&, NTL::ZZ const&)'
/tmp/ccGwxURb.o: In function `NTL::ZZ::operator=(NTL::ZZ const&)':
simple.cpp:(.text._ZN3NTL2ZZaSERKS0_[NTL::ZZ::operator=(NTL::ZZ const&)]+0x22): undefined reference to `_ntl_gcopy'
/tmp/ccGwxURb.o: In function `NTL::ZZ::~ZZ()':
simple.cpp:(.text._ZN3NTL2ZZD2Ev[_ZN3NTL2ZZD5Ev]+0x14): undefined reference to `_ntl_gfree'
/tmp/ccGwxURb.o: In function `NTL::add(NTL::ZZ&, NTL::ZZ const&, long)':
simple.cpp:(.text._ZN3NTL3addERNS_2ZZERKS0_l[NTL::add(NTL::ZZ&, NTL::ZZ const&, long)]+0x2a): undefined reference to `_ntl_gsadd'
/tmp/ccGwxURb.o: In function `NTL::mul(NTL::ZZ&, NTL::ZZ const&, NTL::ZZ const&)':
simple.cpp:(.text._ZN3NTL3mulERNS_2ZZERKS0_S3_[NTL::mul(NTL::ZZ&, NTL::ZZ const&, NTL::ZZ const&)]+0x2d): undefined reference to `_ntl_gmul'
collect2: ld returned 1 exit status 
```

NTL 标头位于 中`/usr/include/NTL`，因此应包括在内。

有什么问题？我是否以错误的方式编译？如果是这样，我在哪里可以找到正确的方法，因为文档中似乎没有“如何使用 ntl 编译”之类的东西？

如果我使用`using namespace NTL`而不是`NTL_CLIENT`没有任何变化：

```
$ ls /usr/lib | grep libntl
libntl-5.4.2.so
libntl.a
libntl.so
$ ls /usr/include | grep NTL
NTL
$ g++ -L/usr/lib -lntl -lgmp -lm simple.cpp
/tmp/ccwdQkr4.o: In function `main':
simple.cpp:(.text+0x3a): undefined reference to `NTL::operator>>(std::basic_istream<char, std::char_traits<char> >&, NTL::ZZ&)'
simple.cpp:(.text+0x4b): undefined reference to `NTL::operator>>(std::basic_istream<char, std::char_traits<char> >&, NTL::ZZ&)'
simple.cpp:(.text+0xda): undefined reference to `NTL::operator<<(std::basic_ostream<char, std::char_traits<char> >&, NTL::ZZ const&)'
/tmp/ccwdQkr4.o: In function `NTL::ZZ::operator=(NTL::ZZ const&)':
simple.cpp:(.text._ZN3NTL2ZZaSERKS0_[NTL::ZZ::operator=(NTL::ZZ const&)]+0x22): undefined reference to `_ntl_gcopy'
/tmp/ccwdQkr4.o: In function `NTL::ZZ::~ZZ()':
simple.cpp:(.text._ZN3NTL2ZZD2Ev[_ZN3NTL2ZZD5Ev]+0x14): undefined reference to `_ntl_gfree'
/tmp/ccwdQkr4.o: In function `NTL::add(NTL::ZZ&, NTL::ZZ const&, long)':
simple.cpp:(.text._ZN3NTL3addERNS_2ZZERKS0_l[NTL::add(NTL::ZZ&, NTL::ZZ const&, long)]+0x2a): undefined reference to `_ntl_gsadd'
/tmp/ccwdQkr4.o: In function `NTL::mul(NTL::ZZ&, NTL::ZZ const&, NTL::ZZ const&)':
simple.cpp:(.text._ZN3NTL3mulERNS_2ZZERKS0_S3_[NTL::mul(NTL::ZZ&, NTL::ZZ const&, NTL::ZZ const&)]+0x2d): undefined reference to `_ntl_gmul'
collect2: ld returned 1 exit status
$ cat simple.cpp
#include <NTL/ZZ.h>

using namespace NTL;

int main()
{
   ZZ a, b, c; 

   std::cin >> a; 
   std::cin >> b; 
   c = (a+1)*(b+1);
   std::cout << c << "\n";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T09:29:02.983

这些不是编译器错误。这些是*链接器*错误。在编译期间包含标头是不够的。您还需要指定链接期间使用的库。

我不了解 NTL，所以我不知道需要包含哪个库，但我希望在任何可用的文档中都会提到它。用谷歌快速搜索似乎表明您需要使用`-lntl`（假设该库安装在标准目录中）。

请注意，传统的 C 编译器从左到右处理命令行，因此您应该在使用 NTL 库的源文件`-lntl` *之前添加。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-12T03:47:06.377

我遇到了同样的问题，在阅读了 NTL 文档后，我使用了以下内容：

`g++ -g -O2 -std=c++11 -pthread -march=native foo.cpp -o foo -lntl -lgmp -lm`

我认为 gmp 库也需要与 ntl 一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-09T20:11:19.633

当我第一次开始使用该库时，我遇到了同样的问题。编译完库后，每次在项目中使用该库时，都必须进入 **项目**>**添加现有项**（快捷键：`Ctrl`++ `Shift`）`A`并选择`.lib`编译库时生成的文件。

如果这不起作用，请随时收件箱给我，我可以向您发送我记录的关于如何编译和使用库的详细说明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-22T20:44:54.593

嗨，要解决这个问题，您应该通过终端运行程序，例如

```
 g++ simple.cpp -o simple -lntl 
```

然后显示结果写入

```
./simple 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-05T09:13:23.460

我有一个类似的问题。我在 ubuntu 上使用 Codelite IDE。我通过更改 Setting --> Linker --> Libraries 中的顺序解决了这个问题，如下所示：

ntl gmp

当订单不同（gmp;ntl）时，我得到了错误。

所以请在gmp之前检查顺序并先移动ntl

# wpf - WPF Grid检测点击外部

> ID：12139286
> 
> 赞同：1
> 
> 时间：2012-08-27T09:23:26.520
> 
> 标签：wpf, grid, lostfocus

我想检测用户何时在自定义网格之外单击，但是当用户单击网格时，我总是会收到 LostFocus 事件。可聚焦是真的，但似乎网格永远不会获得焦点。有人能帮帮我吗？

```
public class GridEditor : Grid
{
    public GridEditor()
    {
        Loaded += GridEditor_Loaded;
    }

    private void GridEditor_Loaded(object sender, RoutedEventArgs e)
    {
        Focusable = true;

        this.LostFocus += new RoutedEventHandler(GridEditor_LostFocus);
    }

    void GridEditor_LostFocus(object sender, RoutedEventArgs e)
    {
        if (!this.IsKeyboardFocusWithin && !this.IsMouseOver)
        {
            Commands.EditConfirmed.Execute(DataContext, this);
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T09:27:45.383

您可以使用该`Mouse.Capture(...)`方法来获取未引用您的网格的鼠标事件。如果您正在绘制线条或其他任何东西，这将非常有用。看看这个：[Mouse.Capture on msdn](http://msdn.microsoft.com/de-de/library/system.windows.input.mouse.capture.aspx)

# java - Powermockito 可以在非最终具体类中模拟最终方法吗？

> ID：12139289
> 
> 赞同：17
> 
> 时间：2012-08-27T09:23:40.817
> 
> 标签：java, unit-testing, powermock

假设我有一个非最终的具体类，其最终方法如下所示。

```
public class ABC {
  public final String myMethod(){
      return "test test";
  }
} 
```

在using中调用时是否可以模拟`myMethod()`返回其他内容？谢谢`junit``Powermockito`

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-27T12:32:50.557

这有效：

```
@RunWith(PowerMockRunner.class)
@PrepareForTest(ABC.class)
public class ABCTest {

    @Test
    public void finalCouldBeMock() {
        final ABC abc = PowerMockito.mock(ABC.class);
        PowerMockito.when(abc.myMethod()).thenReturn("toto");
        assertEquals("toto", abc.myMethod());
    }
} 
```

# c++ - C ++中的分段错误（核心转储）找不到错误

> ID：12139297
> 
> 赞同：1
> 
> 时间：2012-08-27T09:24:00.583
> 
> 标签：c++

我似乎无法找到错误的来源。该代码定义了一个名为 boolfunc 的结构。我定义了一个函数来添加两个 boolfunc(s)。我收到错误：分段错误（核心转储）。我知道这意味着什么，但错误的根源在哪里。

```
#include<iostream>
#include<vector>
using namespace std;

class boolfunc {
public:
  int num_var;
  int num_terms;
  vector<vector<int> > func;
  boolfunc addfunc(boolfunc f1, boolfunc f2);
};

boolfunc addfunc(boolfunc f1, boolfunc f2)
  {
    boolfunc f3;
    f3.func.resize(0);
    f3.num_terms = f1.num_terms + f2.num_terms;
    int var_dif = f1.num_var - f2.num_var;
    if(var_dif >= 0)
        {
        f3.num_var=f1.num_var;
        f3.func.resize(f1.num_var);
        f2.num_var=f1.num_var;
            f2.func.resize(f1.num_var);
        for(int i=0; i<f2.num_terms; ++i)
            {
            for(int j=0; j<var_dif; ++j)
                {
                f2.func[i].push_back(-1);
                }
            }
        }
    else
        {
        f3.num_var=f2.num_var;
        f3.func.resize(f2.num_var);
        f1.num_var=f2.num_var;
        f1.func.resize(f2.num_var);
        for(int i=0; i<f1.num_terms; ++i)
            {
            for(int j=0; j<(-1)*(var_dif); ++j)
                {
                f1.func[i].push_back(-1);
                }
            }
        }
    for(int i=0; i<f1.num_terms; ++i)
        {
        f3.func[i]=f1.func[i];
        }   
    for(int j=0; j<f2.num_terms;++j)
        {
        f3.func[j+f1.num_terms]=f2.func[j];
        }
    return f3;
    }

int main()
{
boolfunc ef1, ef2, ef3;
ef1.func.resize(0);
ef2.func.resize(0);
ef3.func.resize(0);
cout<< "Input the number of variables of function 1" <<endl;
cin>> ef1.num_var;
cout<< "Input the number of variables of function 2" <<endl;
cin>> ef2.num_var;
cout<< "Input the number of terms of function 1" <<endl;
cin>> ef1.num_terms;
cout<< "Input the number of terms of function 2" <<endl;
cin>> ef2.num_terms;
ef1.func.resize(ef1.num_terms);
  for(int i=0; i<ef1.num_terms; ++i)
    {
    ef1.func[i].resize(ef1.num_var);
    for(int j=0; j<ef1.num_var; ++j)
        {
    cout<<"For function 1, Input the term "<<i+1<<"'s variable "<<j+1<<"'s     value:";
        cin>>ef1.func[i][j];
        }
    }
ef2.func.resize(ef2.num_terms);
  for(int i=0; i<ef2.num_terms; ++i)
    {
    ef2.func[i].resize(ef2.num_var);
    for(int j=0; j<ef2.num_var; ++j)
        {
    cout<<"For function 2, Input the term "<<i+1<<"'s variable "<<j+1<<"'s     value:";
        cin>>ef2.func[i][j];
        }
    }
ef3 = addfunc(ef1, ef2);
for(int i=0; i<ef3.num_terms; ++i)
    {
    for(int j=0; j<ef3.num_var; ++j)
        {
        cout<<ef3.func[i][j]<<' ';
        if(j==ef3.num_var -1) cout<<endl;
        }
    }
return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T09:52:52.697

如何解决这个问题：

## 构建并运行

```
g++ -Wall -Wextra -O0 -ggdb main.cpp
gdb --args ./a.out 
```

使用示例向量 (0,0,1,0)，您的程序在第 49 行失败：

```
f3.func[i]=f1.func[i]; 
```

出现错误：

```
Input the number of variables of function 1
0
Input the number of variables of function 2
0
Input the number of terms of function 1
1
Input the number of terms of function 2
0

Program received signal SIGSEGV, Segmentation fault.
0x0000000000402930 in std::vector<int, std::allocator<int> >::capacity (this=0x0) at /usr/include/c++/4.6/bits/stl_vector.h:652
652              - this->_M_impl._M_start); }
(gdb) bt
#0  0x0000000000402930 in std::vector<int, std::allocator<int> >::capacity (this=0x0) at /usr/include/c++/4.6/bits/stl_vector.h:652
#1  0x0000000000401bf3 in std::vector<int, std::allocator<int> >::operator= (this=0x0, __x=...) at /usr/include/c++/4.6/bits/vector.tcc:164
#2  0x0000000000400fc3 in addfunc (f1=..., f2=...) at main.cpp:49
#3  0x0000000000401558 in main () at main.cpp:92 
```

## 分析

如果您查看程序结束和标准库开始的边界，我们会立即看到错误：

```
std::vector<int, std::allocator<int> >::operator= (this=0x0, __x=...) at /usr/include/c++/4.6/bits/vector.tcc:164 
```

如您所见`NULL`，作为`this`参数传递，`std::vector<..>::operator=`这意味着您的`f3.func`向量的大小错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:49:18.203

最简单的一个：使用 valgrind。

像这样：[http ://codepad.org/uSfdSK5d](http://codepad.org/uSfdSK5d)

更好的问题形式可能已经提供了更详细的答案。

# javascript - 如何获取encodeURIComponent的值

> ID：12139298
> 
> 赞同：0
> 
> 时间：2012-08-27T09:24:03.760
> 
> 标签：javascript, image, pdf, encodeuricomponent

这是我的 jsignature 代码中的脚本

我想获取图像数据并将其作为 php 值传递，以作为 pdf 电子邮件发送

但我不知道如何将代码的输出包含在表单中。

```
<script>
$(document).ready(function() {

    // This is the part where jSignature is initialized.
    var $sigdiv = $("#signature").jSignature({'UndoButton':false,'width':200,'height':100}), $tools =    $('#tools') // {'width':300,'height':300}

$('#erase').bind('click', function(e){
    $sigdiv.jSignature('reset')
})

$('#create').bind('click', function(e){
    var datapair = $sigdiv.jSignature("getData", "image") 
    var i = new Image()
    i.src = "data:" + datapair[0] + "," + datapair[1] 
    $('#displayarea2').empty();
$(i).appendTo($("#displayarea2")); // append the image (SVG) to DOM.

 })

</script> 
```

我想我想试试他做了什么

[jSignature 图像导出到 PHP 电子邮件](https://stackoverflow.com/questions/12008871/jsignature-image-export-to-php-email)

但不知道如何产生相同的结果。

# python - 为句子中随机数字的数字生成占位符

> ID：12139304
> 
> 赞同：-1
> 
> 时间：2012-08-27T09:24:20.350
> 
> 标签：python, regex, placeholder, substitution

## 问题

我需要在一个句子（字符串）中创建占位符。

### 例子

```
My son is 6 years old and my dad is 61 years old.
My son is #0 years old and my dad is #1 years old. 
```

这只是一句话。句子是逐行分隔的，并且包含句子中数字和的不同位置（数字位置是混合的并且长度不同）。

我尝试过使用各种代码，但其中大多数都适用于模式替换。我知道这个过程，如果我在 python 编程方面更有经验，我可以做到。

## 程序

阅读句子（文本文件中的行）。计算句子中数字（d+）的数量，然后如果句子包含 6 个数字，则从句子中的最后一个数字开始替换到第一个数字（#6、#5、#4、...）。

### 例如

```
My dog is 3 years old, 92.4 cm heigh and has 16 teeth. 
```

数一数各种长度的数字个数（1a,1b1,1c11,1111,1.1是8个数字）： 4.

**1.循环**（替换第4个数字）：

```
My dog is 3 years old, 92.4 cm heigh and has #4 teeth. 
```

**2.循环**：

```
My dog is 3 years old, 92.#3 cm heigh and has #4 teeth. 
```

**3.循环**：

```
My dog is 3 years old, #2.#3 cm heigh and has #4 teeth. 
```

**4.循环**：

```
My dog is #1 years old, #2.#3 cm heigh and has #4 teeth. 
```

将该行添加到文件末尾并从文件中取出另一行。重复这些步骤直到文件结束。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:40:06.327

既然你提到了 python，你可以这样做：

```
import re

myStr = "My son is 6 years old and my dad is 61 years old."
expr = r'[^#][0-9]+'
idx = 1

while True:
    try:
        match = re.search(expr,myStr)
        print match.start()
        print match.end()
        print myStr[match.start():match.end()]
        myStr = myStr[:match.start()+1] + '#' + str(idx) + myStr[match.end():]
        idx += 1
    except AttributeError:
        break

print myStr 
```

# visual-c++ - 如何在 ac# 应用程序中使用 VC++ dll

> ID：12139305
> 
> 赞同：0
> 
> 时间：2012-08-27T09:24:22.253
> 
> 标签：visual-c++, unmanaged, dllimport

我已经复制了链接显示的确切过程：

[http://www.codeproject.com/Articles/9826/How-to-create-a-DLL-library-in-C-and-then-use-it-w](http://www.codeproject.com/Articles/9826/How-to-create-a-DLL-library-in-C-and-then-use-it-w)

我已经开发并构建了一个 vc++ dll 项目并且构建并成功了。现在我的问题是 dll 将保存在创建的 Vc++ 项目中的什么位置。我在 debud 文件夹中搜索了没有 dll 文件。只有当我将 dll 复制粘贴到 bin 文件夹中时，我才能将 dll 引用到我的 C# 应用程序中（如链接所指定）

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:34:59.360

通过右键单击项目（在解决方案资源管理器中）并从上下文菜单中选择属性...来检查 VC++ DLL 项目的属性。

在属性对话框的树形控件中选择：配置属性| 一般的

现在，屏幕右侧的第一个条目是输出目录。这是您的输出应该在的地方，包括 DLL。

# java - 如何在 JFrame 内部创建一个画布并绘制一些基本形状？

> ID：12139307
> 
> 赞同：0
> 
> 时间：2012-08-27T09:24:33.453
> 
> 标签：java, swing

我是 java 新手并创建了自己的窗口框架。现在我只需要在其中绘制一些图形形状。

```
import javax.swing.JFrame;

public class run {

public static void main(String[] args) {

    JFrame frame = new JFrame();

int resx = 400,resy = 400;

frame.setSize(resx,resy);
frame.setLocationRelativeTo(null);
frame.setTitle("Mover");
frame.setResizable(false);
frame.setVisible(true);
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:34:42.223

好吧，您可以从[2D Graphcs Trail开始](http://docs.oracle.com/javase/tutorial/2d/index.html)

我也会使用`JComponent`or`JPanel`代替`Canvas`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T09:37:59.263

[在这里](http://java.sun.com/products/jfc/tsc/articles/painting/index.html)找到更多关于油漆的信息。

下面是一个简单的例子。

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;

import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class SimpleDrawing extends JFrame {

public SimpleDrawing() {

    setSize(new Dimension(500, 500));
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setVisible(true);
}

public void paint(Graphics g) {

    g.setColor(Color.red);
    g.fillOval(20, 50, 100, 100);
    g.setColor(Color.blue);
    g.fillRect(100, 100, 100, 200);
}

public static void main(String arg[]) {

    SwingUtilities.invokeLater(new Runnable() {

        @Override
        public void run() {
            // TODO Auto-generated method stub
            new SimpleDrawing();
        }
    });
}

} 
```

遍历代码中的paint方法。

# java - Java 索引异常

> ID：12139312
> 
> 赞同：1
> 
> 时间：2012-08-27T09:24:47.777
> 
> 标签：java, exception

嗨，当我尝试检查以下 if 条件时，出现字符串索引超出范围异常

```
String details="";
if("C".equalsIgnoreCase(reportType.substring(0,1)))
{
 details="CASH BOOK FROM "+startDate+" TO "+endDate+" **"+shortName;
}
else
{
  details="BANK BOOK FROM "+startDate+" TO "+endDate+" **"+shortName;
} 
```

`String index out of range: 1`: 这是错误信息

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T09:27:22.390

错误消息清楚地指出比长度`reportType`短*（*`1`即空）。这会导致抛出异常。你可以尝试类似的东西

```
if (reportType.length() >= 1) {
   // your code here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T09:30:57.490

`reportType.substring(0,1)`引发异常，因为，`reportType`可能是空白（空）。检查[javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#substring%28int,%20int%29) : `substring`throws: IndexOutOfBoundsException 如果 beginIndex 为负，或者 endIndex 大于此 String 对象的长度，或者 beginIndex 大于 endIndex。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T09:35:35.000

用这个 -

reportType.substring(0, reportType.length() -1)

通过这样做，您不会超过字符串长度，从而防止抛出异常

# javascript - 服务器端调用后如何在 div 加载时调用 javascript 函数？

> ID：12139314
> 
> 赞同：0
> 
> 时间：2012-08-27T09:24:51.283
> 
> 标签：javascript, jquery, html

我有一个表单，一旦成功提交，从服务器往返后，我会在同一页面上显示成功消息。

我正在使用以下代码：

```
<s:if test="%{#session.str==1}" >
<div onload="showSuccessToast();">
  <button onclick="showSuccessToast();"></button>
</div>
</s:if> 
```

现在，当我从服务器返回（表单提交成功）时，会显示该按钮并在其`onClick`事件`showSuccessToast()`中调用该按钮，但是当我希望 div 在该`onload`事件上调用此函数时，它没有任何效果。

任何想法如何实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:27:12.063

修改如下，这是一种模拟“on-load-div”：

```
<s:if test="%{#session.str==1}" >
<div>
  <button onclick="showSuccessToast();"></button>
  <script language="javascript" type="text/javascript">
      showSuccessToast();
  </script>
</div>
</s:if> 
```

# testing - 如何在 Jasmine 中将标签设置为夹具

> ID：12139315
> 
> 赞同：4
> 
> 时间：2012-08-27T09:24:54.233
> 
> 标签：testing, jasmine, fixtures, stubbing, jasmine-jquery

我目前正在尝试使用 Jasmine 测试 JS 函数。由于该函数检查`body`标签中设置的 CSS 类，因此我想`<body>`在夹具中使用该标签：

```
setFixtures('<body class="themed someotherclass"></body>') 
```

jQuery 对这个存根 HTML 的引用`$('body')`——然后交给我正在测试的 JS 函数。但是这个`body`标签显然从来没有真正到达 Jasmine 测试中——它看起来好像 Jasmine 用一个 body 创建了自己的文档，并且在里面它把所有的固定装置放在一个里面`div`——至少当我回`outerHTML`显存根 body 元素的时候，我在里面看到了这个一个正文和一个与 Jasmine 相关的内联 JS 之后：

```
<div id="jasmine-fixtures"></div> 
```

当我尝试对身体进行存根时，它是空的，但当我使用 a 时它是填充的`div`。

有没有办法在 Jasmine 测试中存根 body 标签？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T10:21:58.913

好的，我终于找到了解决方案。

每当你想用 Jasmine 存根 body 标签时，你首先必须调用“setFixtures()”——在这个调用期间，Jasmine 创建了它自己的 body-tag。因此，在创建了 body 标签之后，您可以使用 jQuery 对其进行操作，然后运行您的测试，这取决于您对 body 标签所做的更改。

那就是：如果需要，我会运行我常用的“setFixtures(SOME HTML)”命令，或者 - 如果我只需要测试的主体标签，我会在测试开始时简单地调用“setFixtures()”，不带任何参数。之后，至少在 Jasmine 版本 1.x 下，该标签将可用，我可以使用例如 jQuery 来调整/修改我需要的 body 标签： $('body').addClass('themed'); 因此，我没有将 body 标签模拟为固定装置，而是通过调用“setFixtures()”而不带任何参数来“创建”body 标签，然后根据需要操作 DOM。

# ember.js - 用视图替换表的行

> ID：12139324
> 
> 赞同：0
> 
> 时间：2012-08-27T09:25:19.833
> 
> 标签：ember.js, handlebars.js

我正在生成这样的表：

```
<div class="table zebra-striped selectable">
    {{#each "App.accidentsController.content"}}
        {{view App.AccidentView contentBinding="this"}}
    {{/each}}
</div> 
```

`App.AccidentView`像这样的东西在哪里：

```
<div {{action tbodyClick this target='this'}} class="tr accident">
    <div class="td w03pr">{{unbound [1]}}</div>
    <div class="td">{{unbound [3]}}</div>
    <div class="td">{{unbound [4]}}</div>
</div> 
```

我正在考虑性能问题，因为行数可能有数百甚至数千，所以我没有对行使用绑定，目前没有`ContainerView`认真考虑（或者我应该考虑吗？）。在我处理了行数据之后，我只想替换所有行的 html。我有一个行模板和它的上下文，我认为最简单有效的方法就是用新的行替换一行 html，我可以按照文档执行如下操作：

```
var newView=App.AccidentView.create(newContext);
newView.appendTo('div.table'); 
```

但`append`还不够，我需要放置它而不是旧行——比如 jQuery 的 replaceWith。所以我的问题是这样做的正确方法是什么 - 以某种方式修剪`tr`视图或使用的标签，`ContainerView`但是性能呢？感谢您的任何见解。

# silverlight - 无需鼠标即可触发按钮单击

> ID：12139326
> 
> 赞同：0
> 
> 时间：2012-08-27T09:25:23.797
> 
> 标签：silverlight

我的问题是我想在我的 Silverlight 应用程序中实现快捷键，并且使用鼠标单击调用 Button_Save 或在自己的函数中手动调用之间存在差异。

通过手动调用，silverlight 函数在控件中没有实际值。否则，当我用鼠标（onClick）单击 Button_Save 时。

有没有机会像用鼠标单击按钮一样调用 Button_Save 事件？

感谢帮助。帕特里克

# sql - 一张桌子减去另一张桌子

> ID：12139330
> 
> 赞同：0
> 
> 时间：2012-08-27T09:25:32.250
> 
> 标签：sql

我不确定如何做到这一点。我有三个表成员表，其中包含 238871 个成员作业表，其中包含 7713 个条目交易表和 231142 个条目

如果我取 238871 个成员减去交易表中的内容，我会得到 7729 的差异。在工作表中，我有 7713 个条目，因此成员表中有 16 个下落不明。所有的贸易都在工作和成员表中。但在成员中，有 16 人不在工作和贸易领域。

我如何定义这 16 个成员？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:43:12.800

实际上， a`left join`为您提供*了*`jobsortedusers`. 那么里面的所有东西`members`也在里面`jobsortedusers`。

听起来您要么想颠倒左外连接的顺序，而是这样做：

```
select * 
  from membership.members as mm
  left outer join jobsorted.jobsortedusers as js
    on mm.memberid = js.memberid 
```

这会让你把所有东西都放进去`members`，然后里面的所有东西`jobsortedusers`也放进去`members`。正如您所说，每个用户也是成员，此查询将返回所有内容。

我强烈推荐阅读[这篇文章，它很好地解释了连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

* * *

要回答您的新问题，您需要`jobsortedusers`id 为空的所有内容，即

```
select mm.* -- every other column will be null
  from membership.members as mm
  left outer join jobsorted.jobsortedusers as js
    on mm.memberid = js.memberid
 where js.memberid is null 
```

我不知道要加入什么，`trade`但为了获得不在此表或您的用户表中的所有内容，您需要以下内容：

```
select mm.* -- every other column will be null 
  from membership.members as mm
  left outer join jobsorted.jobsortedusers as js
    on mm.memberid = js.memberid
  left outer join trade t
    on mm.memberid = t.memberid
 where js.memberid is null
   and t.memberid is null 
```

# jquery - html5 jquery底部的空格

> ID：12139332
> 
> 赞同：1
> 
> 时间：2012-08-27T09:25:44.000
> 
> 标签：jquery, ios, html

我一直在尝试用 stackoverflow 和谷歌找到答案，但仍然无法解决我的问题。

这里是：我正在使用 jquery，当我使用 Safari - iPhone 3Gs 打开我的应用程序时，屏幕底部总是有一个空白区域。我无法删除它。:(

代码在这里：http: [//jsfiddle.net/XxB6Y/17/](http://jsfiddle.net/XxB6Y/17/) 这里是带图像的完整代码：[http ://www.mediafire.com/?bds0xgnzxki22ww](http://www.mediafire.com/?bds0xgnzxki22ww)

我无法理解的另一件事是，当我使用 REAL Iphone 测试我的应用程序并切换到 view12 (id: contentView12) 或 view22 (id: contentView22) 时，输入文本字段的显示方式不同（在图片下方）当我使用模拟器进行测试时出现。:(

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:14:46.147

我猜你计算的高度不正确。我用你的代码玩了一下，现在没有空格：

[http://jsfiddle.net/XxB6Y/18/](http://jsfiddle.net/XxB6Y/18/)

你能告诉我最终的总高度应该是多少，这样我才能计算出正确的数字吗？

# mongodb - 如何查询所有子文档

> ID：12139334
> 
> 赞同：9
> 
> 时间：2012-08-27T09:26:02.023
> 
> 标签：mongodb, mongoose, tags, many-to-many, nosql

我从 MongoDb 和 nodejs（使用 mongoose）开始。

我有一系列**Stories**，每个都可以有一个或多个**Tags**，就像这样：

```
{
    title: "The red fox",
    content: "The red fox jumps away...",
    tags: [
        {
            tagname: "fairytale",
            user: "pippo"
        },
        {
            tagname: "funny",
            user: "pluto"
        },
        {
            tagname: "fox",
            user: "paperino"
        }
    ]
},

... other stories 
```

现在我想做一个**标签云**。

这意味着查询所有标签的故事。

在关系世界（例如 MySQL）中，我将有一个 Stories 表、一个 Tags 表和一个 Stories_Tags 表（多对多）。然后我会查询标签表或类似的东西。

有没有办法这样做？（我确定是的）

如果是，这是一个好习惯吗？还是它打破了 nosql 范式？

你能想象一个更好的模式设计方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-29T01:34:47.803

这是使用聚合框架执行此操作的方法（您需要使用刚刚发布的 2.2）。

```
db.stories.aggregate(
[
    {
        "$unwind" : "$tags"
    },
    {
        "$group" : {
            "_id" : "$tags.tagname",
            "total" : {
                "$sum" : 1
            }
        }
    },
    {
        "$sort" : {
            "total" : -1
        }
    }
]) 
```

您的结果将如下所示：

```
{
    "result" : [
        {
            "_id" : "fairytale",
            "total" : 3
        },
        {
            "_id" : "funny",
            "total" : 2
        },
        {
            "_id" : "silly",
            "total" : 1
        },
        {
            "_id" : "fox",
            "total" : 1
        }
    ],
    "ok" : 1
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T10:32:51.337

欢迎来到蒙哥

您的数据的最佳“架构”将是这样的。

您创建了一个名为 stories 的集合，每个故事都将成为该集合中的一个文档。然后，您可以使用类似的东西轻松查询您的数据。

```
db.stories.find({ "tags.tagname": "fairytale"}); // will find all documents that have fairytale as a tagname. 
```

**更新**

```
db.stories.find({ "tags.tagname": { $exists : true }}); // will find all documents that have a tagname. 
```

请注意 find 查询中的点符号，这就是您在 mongo 中访问数组/对象的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T11:45:13.693

您可以使用 MR 来完成此操作。在 MR 中，您只需挑选标签并投影它们：

```
var map = function(){
     for(var i=0;i<this.tags.length;i++){
         emit(this.tags[i].tagname, {count: 1});
     }
} 
```

然后你的 reduce 将遍历发出的文档，基本上总结了该标签被看到的次数。

如果您升级到最新的不稳定 2.2，您还可以使用聚合框架。您将使用聚合框架的 $project 和 $sum 管道从每个帖子中投影标签，然后将它们相加以创建基于分数的标签云，允许您根据总和调整每个标签的文本大小。

> 如果是，这是一个好习惯吗？还是它打破了 nosql 范式？

这是 MongoDB 中的一个非常标准的问题，而且您不会逃避。随着可重用结构的出现，不可避免地需要对其进行一些复杂的查询。幸运的是，在 2.2 中可以保存aggregationm 框架。

至于这是一个好还是坏的方法，这是一个非常标准的方法，因此它既不好也不坏。

为了使结构更好，您可以将具有计数的唯一标签预先聚合到单独的集合中。这将使实时构建您的标签云变得更加容易。

预聚合是创建通常从 MR 获得的其他集合的一种形式，无需使用 MR 或聚合框架。它通常是基于您的应用程序的事件，因此当用户创建帖子或重新标记帖子时，它将触发预聚合事件到“tag_count”集合，如下所示：

```
{
    _id: {},
    tagname: "",
    count: 1
} 
```

当事件被触发时，您的应用程序将循环遍历帖子上的标签，基本上像这样执行 $inc upserts：

```
db.tag_count.update({tagname: 'whoop'}, {$inc: {count: 1}}, true); 
```

因此，您现在将在整个博客中拥有一组标签及其计数。从那里你走与 MR 相同的路线，只需查询此集合即可获取您的数据。您当然需要处理删除和更新事件，但您大致了解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T10:24:41.913

嗯，有不同的方法。[我认为你的解决方案和这个](https://github.com/chebyte/mongoid-simple-tags/blob/master/lib/mongoid-simple-tags.rb)没有区别。

您还可以复制并粘贴其 map_reduce 方法以输出标签计数哈希。

# android - `DialogInterface.dismiss()` 和 `DialogInterface.cancel()` 有什么区别？

> ID：12139335
> 
> 赞同：22
> 
> 时间：2012-08-27T09:26:12.393
> 
> 标签：android, dialog, android-widget

在使用 android 中的对话框时，可以取消或关闭它，但何时使用关闭以及何时使用取消？它们之间有什么区别？提前致谢。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-27T09:31:46.363

> > public void cancel () 自：API 级别 1
> > 
> > 取消对话框。这与调用dismiss() 基本相同，但它也会调用您的DialogInterface.OnCancelListener（如果已注册）。

这就是文档所说的，两者都是一样的，只是 cancel() 将调用在 DialogInterface 上注册的侦听器。

参考[链接](http://developer.android.com/reference/android/app/Dialog.html#cancel%28%29)
也 请参阅此[答案](https://stackoverflow.com/questions/3125647/what-is-the-difference-between-a-dialog-being-dismissed-or-canceled-in-android)以供参考

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T09:34:53.893

cancel() - 取消对话框。这与调用dismiss() 基本相同，但它也会调用您的DialogInterface.OnCancelListener（如果已注册）。

dismiss() - 关闭此对话框，将其从屏幕上移除。可以从任何线程安全地调用此方法。请注意，当对话框被关闭时，您不应重写此方法进行清理，而应在 onStop() 中实现该方法。

你应该[在这里](http://developer.android.com/guide/topics/ui/dialogs.html#DismissingADialog)查看更多信息如何使用这两种方法

# isapi - 用于从 .htm 页面重定向到 .aspx 页面的 ISAPI 重写语法帮助

> ID：12139341
> 
> 赞同：0
> 
> 时间：2012-08-27T09:26:38.943
> 
> 标签：isapi, isapi-redirect

我想将 www.mydomain.com\default.htm 重写（301 重定向）到 www.mydomain.com\HomePage.aspx。这样我需要为我网站中的每个 htm 页面做不同的 aspx 页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:41:34.207

```
RewriteEngine on
RewriteBase /
RewriteRule default.htm /HomePage.aspx [I,U,L] 
```

我认为可以，但是如果您在 IIS 上运行，您还可以查看 URL Rewrite Module 2.0

我想我弄错了标志： `RewriteRule Default.htm HomePage.aspx [NC,R=301,L]`

*应该*做的伎俩。尽管如此，ISAPI_Rewrite 在[“ISAPI 重写示例”中有很好的记录](http://www.helicontech.com/isapi_rewrite/doc/examples.htm)

# javascript - 预加载 jPlayer 使用的音频文件

> ID：12139345
> 
> 赞同：2
> 
> 时间：2012-08-27T09:26:49.877
> 
> 标签：javascript, jquery, jplayer

我正在使用（被隐藏的`width: 0;`）jPlayer 间歇性地播放许多短声音文件。

必要时我会使用`.jPlayer("clearMedia")`and在声音文件之间切换。`.jPlayer("setMedia")`

但是，这意味着文件仅在播放时加载。这会导致严重的延迟。我确实知道，一旦文件被加载，它们就会被缓存，并且会在稍后再次提示时立即播放。

有没有办法在不自动播放的情况下加载这些音频文件（每个都在 ogg 和 m4a 中提供），并且 jPlayer 以后可以使用该缓存？我有声音文件的完整 JS 数组列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T16:33:53.593

您可以使用多个 jPlayer。为每个声音文件创建一个 div，然后为每个声音文件分配一个 jPlayer。类似于：HTML：

```
<div id="sound1" class="audio" path="audiourl1"></div>
<div id="sound2" class="audio" path="audiourl2"></div> 
```

和 Javascript/Jquery

```
$(".audio").each(function(){
    var $this = $(this);
    var path = $this.attr("path");
    $this.jPlayer({
        ready: function () {
          $(this).jPlayer("setMedia", {
            m4a: "/mp3/"+path+".m4a", // Defines the m4a (AAC) url
            oga: "/ogg/"+path+".ogg" // Defines the counterpart oga url
          });
        },
        supplied: "m4a, oga",
        swfPath: "/jPlayer/js"
    });
}); 
```

# c# - 了解平台目标

> ID：12139350
> 
> 赞同：3
> 
> 时间：2012-08-27T09:27:17.663
> 
> 标签：c#, visual-studio-2010, x86, 64-bit, platform

我在使用 WPF 应用程序中的非托管程序集时遇到问题。这是我的设置，归结为一个简单的草图：

```
X64 RUNTIME____________________
|                              |
| AS_EXEC (executing Assy, x86)|
|   |                          |
|   |                          |
|   AS_INT (interfaces, AnyCpu)|
|   |                          |
|   |                          |
|   AS_WRA_1 (wrapper, x86)    |
|   | |                        |
|   | AS_UNM_1 (unmanaged, x86)|
|   |                          |
|   AS_WRA_2 (wrapper, x64)    |
|   | |                        |
|   | AS_UNM_2 (unmanaged, x64)|
|   |                          |
|   AS_WRA_3 (wrapper, x86)    |
|     |                        |
|     AS_UNM_3 (unmanaged, x86)|
|______________________________| 
```

*我想做的是测试`AS_WRA_1`。*

*   由于`AS_WRA_1`引用了`X86`只能在其中工作的非托管代码，我认为最好将此项目设置为`X86`自身 - 只是为了防止使用会导致`BadImageFormat`异常。

*   `AS_INT`包含所有`AS_WRA`实现的接口并设置为`ANY CPU`.

*   我在 64 位运行时，所以我也设置`AS_EXEC`为`X86`.

*   `AS_WRA_2`仅适用于 64 位，`AS_WRA_3`32 位（这意味着基本上我不能同时运行它们，但由于我只想测试`AS_WRA_1`，我或多或少很高兴地忽略了这一点 -*欢迎回来，DLL 地狱！*）。

在运行时，我使用反射从用户在 UI 中选择的包装器创建一个实例。奇怪的是，结果如下：

*   我可以从创建实例`AS_WRA_2`
*   我得到 BadImageFormatExceptions`AS_WRA_1`和`AS_WRA_3`。

这与我的预期完全相反......我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:51:43.167

如果您有一个使用 x86 (Assy) 编译的可执行文件，它将始终在 x86 中运行，并且它的所有依赖项都必须在 x86 或 AnyCpu 中（它们也将在 x86 中执行）。

您不能拥有同时在 x86 和 x64 中执行非托管资源的可执行文件，因此您将无法从 Assy 访问 AS_UNM_1 和 AS_UNM_2，因为 AS_UNM_2 是 x64 而 Assy 是 x86。由于 AS_INT 被 Assy 调用，它也变成了 x86。

# android - Android列表视图中未显示顶部和底部分隔符

> ID：12139351
> 
> 赞同：19
> 
> 时间：2012-08-27T09:27:21.553
> 
> 标签：android, listview, divider

按照我的理解，为列表视图定义的分隔符也应该出现在列表的顶部和底部，即第一项上方和最后一项下方。

由于某种原因，它们没有出现在我的列表视图中：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/mainLayout"
android:layout_width="fill_parent" 
android:layout_height="fill_parent" 
android:background="@drawable/background">

<ImageView
    android:id="@+id/home"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingLeft="3dp"
    android:paddingTop="3dp"
    android:paddingBottom="3dp"
    android:src="@drawable/homeicon"/>

<TextView
    android:id="@+id/titleBar"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Page Title" 
    android:layout_marginLeft="10dp" 
    android:paddingTop="3dp"
    android:textSize="18sp" 
    android:textStyle="bold" 
    android:typeface="serif" 
    android:textColor="#FFFFFF"
    android:layout_centerHorizontal="true"/>

<ImageView
    android:id="@+id/back"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingRight="8dp"
    android:paddingTop="8dp"
    android:src="@drawable/backicon" 
    android:layout_alignParentRight="true"/>

<ImageView
    android:id="@+id/separator1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/home"
    android:scaleType="fitXY"
    android:src="@drawable/separatorimg" />

<ListView
    android:id="@android:id/android:list" 
    android:layout_below="@+id/separator1"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:cacheColorHint="#00000000"
    android:divider="@drawable/separatorimg">
</ListView>

</RelativeLayout> 
```

将 android:footerDividersEnabled 设置为 true （这是围绕该问题的其他问题中给出的答案）不会改变任何东西。我也没有禁用的项目，除非有某种默认页脚会被禁用。

有任何想法吗？

编辑：当我滚动经过第一个/最后一个项目时，顶部和底部分隔线的分隔线似乎会出现一瞬间，然后消失。看起来界面似乎要继续，只是后来才意识到这是最后一项，然后禁用了分隔符。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-07-26T13:23:08.917

我使用以下链接的帮助解决了这个问题：[如果添加了页脚视图，则分隔符从列表视图中的最后一项消失](https://stackoverflow.com/questions/5661668/divider-disappears-from-last-item-in-listview-if-footerview-added)

我所做的是添加

```
 android:footerDividersEnabled="true" 
```

XML 中的 ListView 属性。然后以编程方式，我添加了一个空的页脚视图，可以使用

```
 listView.addFooterView(new View(context), null, true); 
```

我没有尝试标题，但我希望它以相同的方式工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T03:25:47.043

我有同样的问题。这是我解决它的方法：

```
<ListView
    android:id="@+id/my_list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:divider="@color/transparent"
    android:dividerHeight="@dimen/padding_default"
    android:footerDividersEnabled="false"
    android:headerDividersEnabled="false" >
</ListView> 
```

然后，在 onCreate() 方法中，我有：

```
View v = new View(this);
v.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, 1));
mList.addFooterView(v); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T09:37:15.177

我认为您必须使用列表视图下方的视图设置页脚。我有同样的问题，这是我可以得到的解决方案：

[在列表中的最后一项之后显示分隔符](https://stackoverflow.com/questions/11796662/show-divider-after-the-last-item-in-the-list#answers-header)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T09:40:19.813

请在下面找到修改后的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/mainLayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/background" >

<LinearLayout
    android:id="@+id/llAppBar"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:orientation="horizontal"
    android:weightSum="10" >

    <ImageView
        android:id="@+id/home"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="2"
        android:paddingBottom="3dp"
        android:paddingLeft="3dp"
        android:paddingTop="3dp"
        android:scaleType="fitXY"
        android:src="@drawable/homeicon" />

    <TextView
        android:id="@+id/titleBar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:layout_weight="6"
        android:paddingTop="3dp"
        android:text="Page Title"
        android:textColor="#FFFFFF"
        android:textSize="18sp"
        android:textStyle="bold"
        android:typeface="serif" />

    <ImageView
        android:id="@+id/back"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="2"
        android:paddingRight="8dp"
        android:paddingTop="8dp"
        android:scaleType="fitXY"
        android:src="@drawable/backicon" />
</LinearLayout>

<ImageView
    android:id="@+id/separator1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/llAppBar"
    android:scaleType="fitXY"
    android:src="@drawable/separatorimg" />

<ListView
    android:id="@android:id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/separator1"
    android:cacheColorHint="#00000000"
    android:divider="@drawable/separatorimg" >
</ListView>

</RelativeLayout> 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-06-12T03:40:25.743

我有同样的问题，设置填充和背景颜色解决了它。

```
<ListView
    android:id="@+id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@color/gray_background"
    android:paddingTop="1dp"
    android:paddingBottom="1dp"        
/> 
```

此处，背景颜色应与列表视图的分隔符的背景颜色相同。

# iphone - iphone开发：使用NSTimer制作动画

> ID：12139354
> 
> 赞同：0
> 
> 时间：2012-08-27T09:27:31.300
> 
> 标签：iphone, ios, animation, imageview, nstimer

我编写了下面的代码，使用 NSTimer 将图像从顶部移动到按钮。但是，当我运行它时，我不能单独拥有图像。基本上，图像留下痕迹。我想要的是让图像逐帧移动。我错过了什么？

```
-(void)printOut:(NSTimer*)timer1;
{

    image = [[UIImageView alloc] initWithFrame:CGRectMake(50, -50+m, 50, 50)];
    [image setImage:[UIImage imageNamed:[NSString stringWithFormat:@"image.png"]]];

    CGRect oldFrame = image.frame;
    image.frame = CGRectMake(oldFrame.origin.x+5, oldFrame.origin.y, oldFrame.size.width, oldFrame.size.height);

    [self.view addSubview:image];

    m++;
    if (m == 1000) {
        [timer1 invalidate];
    }

} 
```

编辑：我不想使用动画。因为稍后我需要使用碰撞检测并且无法控制动画的坐标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T10:12:47.083

您每次都在为自己分配和添加 subView。什么时候删除 ImageView 以使以前的 ImageView 消失。因此，在分配之前尝试删除图像。像这样试试

```
-(void)printOut:(NSTimer*)timer1;
{
[image removeFromSuperview];
image = nil;
image = [[UIImageView alloc] initWithFrame:CGRectMake(50, -50+m, 50, 50)];
[image setImage:[UIImage imageNamed:[NSString stringWithFormat:@"image.png"]]];

CGRect oldFrame = image.frame;
image.frame = CGRectMake(oldFrame.origin.x+5, oldFrame.origin.y, oldFrame.size.width, oldFrame.size.height);

[self.view addSubview:image];

m++;
if (m == 1000) {
    [timer1 invalidate];
}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T09:34:11.577

做这个：

```
image.frame = (top frame here)

[UIView animateWithDuration:0.4 delay:0 options:UIViewAnimationOptionCurveEaseOut animations:^{ 
//change time duration according to requirement
// animate it to the bottom of view
image.frame = (bottom frame here)
} completion:^(BOOL finished){
// if you want to do something once the animation finishes, put it here
}]; 
```

# java - Java 中的 Collada 接口

> ID：12139355
> 
> 赞同：2
> 
> 时间：2012-08-27T09:27:34.570
> 
> 标签：java, jogl, collada

我正在寻找一个*库*来处理`collada`文件，`Java`以便我可以读取**网格数据**并将其*呈现*在我自己的`jogl`显示器中。

是否有任何*已经**存在*的图书馆`Java`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:30:35.973

你看过这里吗：[http](http://code.google.com/p/jaxb-collada/) ://code.google.com/p/jaxb-collada/ ？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T09:36:29.337

[我自己没有尝试过，但您应该能够从jMonkeyEngine](http://jmonkeyengine.com/)借用开源 COLLADA 导入器并重新利用它：

[http://www.jmonkeyengine.com/doc/com/jmex/model/collada/ColladaImporter.html](http://www.jmonkeyengine.com/doc/com/jmex/model/collada/ColladaImporter.html)

# iphone - iphone - MBProgressHUD 防止锁定 navigationController

> ID：12139357
> 
> 赞同：2
> 
> 时间：2012-08-27T09:27:40.153
> 
> 标签：iphone, objective-c, xcode, cocoa-touch, mbprogresshud

在我的应用程序中`UINavigationController`，`UITabBar` 当我显示 HUD 时，整个屏幕都被锁定，除了`TabBar`. 所以解除我的HUD的唯一方法是点击一个标签。当我点击我的“后退”按钮时，我也想关闭它`NavigationController` 这是我的代码：

```
hud = [[MBProgressHUD alloc] initWithView:self.navigationController.view];
[self.navigationController.view addSubview:hud];
hud.delegate = self;
hud.labelText = @"Loading...";
[hud show:YES]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T09:40:23.213

您正在将 hud 视图添加到导航控制器 - 这就是您无法与导航栏交互的原因。

您想要实现的是锁定`self.navigationController.topViewController.view`在您的情况下可以通过`self.view`.

尝试以下操作：

```
hud = [[MBProgressHUD alloc] initWithView:self.view];
[self.view addSubview:hud]; 
```

让我们知道以上是否对您有用。如果没有，我会改进答案以找到解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T09:52:12.400

Hud 将使 userIntrection 禁用...因此用户无法触摸添加 hud 的区域...所以只需将 hud 添加到您想要添加它的位置...但请确保当 HUD 时没有任何 UI 更改Running ，因为 HUD 在辅助线程上运行并且辅助线程上的更改会使您的应用程序崩溃....

```
 HUD = [[MBProgressHUD alloc] initWithView:self.view];
    HUD.graceTime = .1;
    HUD.labelFont  = [UIFont fontWithName:@"Arial" size:16];
    HUD.labelText = @"Loading..";
    HUD.delegate = self;
    [self.view addSubview:HUD];
    [HUD showWhileExecuting:@selector(loginJsonParsing) onTarget:self withObject:nil animated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-29T08:09:32.753

当用户单击导航栏中的后退按钮而 HUD 仍在后台 BOOM 应用程序迷恋中工作时，我曾经将此视为错误，我设法用更短的代码中接受的答案解决了这个问题。这取决于您想要 HUD 的自定义程度。我使用默认的。

*显示：*

```
[MBProgressHUD showHUDAddedTo:self.navigationController.view animated:YES]; 
```

*隐藏：*

```
dispatch_async(dispatch_get_global_queue( DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
   dispatch_async(dispatch_get_main_queue(), ^{
       [MBProgressHUD hideHUDForView:self.navigationController.view animated:YES];
   });
}); 
```

# php - Trello Api：来自服务器的 Php Curl 错误空回复

> ID：12139362
> 
> 赞同：1
> 
> 时间：2012-08-27T09:27:51.513
> 
> 标签：php, api, curl, trello

当我的 web 应用程序中发生某些事件时，我想使用 Trello Api 创建一张新卡片。我想用 Curl 来做这个请求。这是我的代码：

```
$url = "https://api.trello.com/1/cards?key=".$key."&token=".$token."&name=".$name."&idList=".$idList;

# init curl
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)");
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLINFO_HEADER_OUT, TRUE); // make sure we see the sended header afterwards
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_TIMEOUT, 0);
curl_setopt($ch, CURLOPT_POST, 1);

# dont care about ssl
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

# download and close
$output = curl_exec($ch);
$request =  curl_getinfo($ch, CURLINFO_HEADER_OUT);
$error = curl_error($ch);
curl_close($ch); 
```

我尝试使用与提琴手相同的网址并且它有效。但是，使用此代码，我会收到错误“来自服务器的空回复”。有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T22:38:48.963

不要将参数放在 URL 中，而是尝试将它们放在 CURLOPT_POSTFIELDS 中。

这对我有用：

```
$url = "https://api.trello.com/1/cards";
$fields = "key=$key&token=$token&name=$name&idList=$idList";

# init curl
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_POSTFIELDS, $fields);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)");
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLINFO_HEADER_OUT, TRUE); // make sure we see the sended header afterwards
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_TIMEOUT, 0);
curl_setopt($ch, CURLOPT_POST, 1);

# dont care about ssl
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

# download and close
$output = curl_exec($ch);
$request =  curl_getinfo($ch, CURLINFO_HEADER_OUT);
$error = curl_error($ch);
curl_close($ch); 
```

# asp.net - 防止在用户注销时提交 AJAX 请求...？

> ID：12139366
> 
> 赞同：0
> 
> 时间：2012-08-27T09:27:59.060
> 
> 标签：asp.net

在我的 ASP.NET 项目中，我使用 JQuery 提交数据。我需要一些仍然显示在用户浏览器上的注销页面的解决方案。

如果用户单击该页面，它将向服务器发布请求。虽然请求可能不会在服务器上进行，但我在完成事件时获得“成功”代码，状态代码也显示为 200。

当用户注销时，有什么方法可以防止提交 AJAX 请求...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:32:09.233

不，您将无法停止请求。

你可以控制你对它的反应。

返回一些错误代码，告诉您的脚本用户已注销，然后您的 javascript 可以将用户引导到登录屏幕。

如果用户已注销，您得到的 200 响应可能是登录页面。在这种情况下，您可以检查响应的内容并检测注销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:35:56.690

通常登录/会话由 cookie 处理，这些 cookie 与发送到服务器的每个请求一起发送。让它成为浏览器 URL 或 ajax 调用。如果您在注销时删除 cookie，后续的 ajax 调用可以回复请再次登录消息。

# machine-learning - 从 svnlight 解释结果模型

> ID：12139369
> 
> 赞同：1
> 
> 时间：2012-08-27T09:28:03.793
> 
> 标签：machine-learning, svm, svmlight

我想用一个平面将 2 个类的一些点分开，并认为这应该可以使用支持向量机 (SVM)。

所以我设置了以下数据文件（data.txt）用svmlight进行分析：

```
-1 1:1 2:1 3:0
 1 1:1 2:2 3:0
-1 1:3 2:2 3:0
 1 1:3 2:3 3:0
-1 1:5 2:3 3:0
 1 1:5 2:4 3:0
-1 1:7 2:4 3:0
 1 1:7 2:5 3:0
-1 1:1 2:1 3:2
 1 1:1 2:2 3:2
-1 1:3 2:2 3:2
 1 1:3 2:3 3:2
-1 1:5 2:3 3:2
 1 1:5 2:4 3:2
-1 1:7 2:4 3:2
 1 1:7 2:5 3:2 
```

执行：

```
./svm_learn data.txt model 
```

不幸的是，我不知道如何解释模型以及如何描述分离平面。

你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-23T10:35:16.120

因此，您的模型文件应如下所示：

```
SVM-light Version V6.02
0 # kernel type
3 # kernel parameter -d 
1 # kernel parameter -g 
1 # kernel parameter -s 
1 # kernel parameter -r 
empty# kernel parameter -u 
3 # highest feature index 
16 # number of training documents 
17 # number of support vectors plus 1 
0.85699902 # threshold b, each following line is a SV (starting with alpha*y)
-0.035708292619498309405923208714739 1:5 2:3 3:0 #
-0.035708292619498309405923208714739 1:1 2:1 3:2 #
0.035708292619498309405923208714739 1:1 2:2 3:0 #
-0.035708292619498309405923208714739 1:1 2:1 3:0 #
0.035708292619498309405923208714739 1:7 2:5 3:2 #
-0.035708292619498309405923208714739 1:7 2:4 3:2 #
0.035708292619498309405923208714739 1:1 2:2 3:2 #
-0.035708292619498309405923208714739 1:5 2:3 3:2 #
0.035708292619498309405923208714739 1:3 2:3 3:0 #
0.035708292619498309405923208714739 1:7 2:5 3:0 #
-0.035708292619498309405923208714739 1:7 2:4 3:0 #
0.035708292619498309405923208714739 1:3 2:3 3:2 #
-0.035708292619498309405923208714739 1:3 2:2 3:0 #
0.035708292619498309405923208714739 1:5 2:4 3:0 #
-0.035708292619498309405923208714739 1:3 2:2 3:2 #
0.035708292619498309405923208714739 1:5 2:4 3:2 # 
```

这些都是模型的参数。前 9 个值是模型的配置（使用的内核等）。

您可以通过执行来读取所有参数信息`./svm_learn --help`，特别是 kernel=0 意味着它是一个线性内核（您想使用它）。

模型文件包含支持向量列表，这些**支持向量**是训练集中“最接近”分离超平面的点，这是 svm 背后的主要思想 - 仅使用数据子集“支持”您的决策边界。通过简单地使用它们的值的加权平均值，这些向量足以定义分离。这些权重是`alpha`在优化过程中找到的参数（也位于文件中）。为简单起见，这些权重已经乘以相应的标签（`+1`或`-1`），以区分它们来自分离超平面的哪个“边”。

对于线性核，以下支持向量的解释非常简单。你有 17 个参数，首先，有一个`b`值，一个超平面的自由参数，然后 - 16 个支持向量。将支持向量转换为形式

```
alphay_i 1:s_i_1 2:s_i_2 3:s_i_3 
```

简单地计算总和

```
w = SUM_i alphay_i (s_i_1,s_i_2,s_i_3) = SUM_i alphay_i s_i 
```

这导致分离超平面**法线**（垂直向量）的方程。分离超平面的整个方程现在为：

```
<w,x> + b = 0 
```

这个总和在哪里`w`，并且`b`是先前定义的“截距”参数（`0.85699902`在您的情况下）并且`<w,x>`是标准标量产品。

因此，对于线性内核，它简化为

```
w'x + b = 0 
```

在一般情况下，当您使用一些更复杂的内核（如 RBF 甚至多项式）时，您无法获得实际的超平面参数，因为该对象位于特征空间中（因此对于 RBF 情况，它具有无限多的维度）。你只能有它的功能形式

```
<w,x> = SUM_i alphay_i K(s_i, x) 
```

# html - HTML / CSS - 如果显示子菜单，则菜单不可点击

> ID：12139375
> 
> 赞同：0
> 
> 时间：2012-08-27T09:28:33.860
> 
> 标签：html, css, menu, submenu, clickable

以下菜单工作正常。但是一旦我添加了子菜单，菜单项就不再是可点击的（只有子菜单项）。

```
<div id="menu">
  <ul> 
    <li>
        <a href="site.php?page=home" class="active" > Home </a>
        <ul> 
            <li><a href="site.php?page=Account%20Summary" >Account Summary</a></li>
            <li><a href="site.php?page=Total%20Transaction" >Total Transaction</a></li>
            <li><a href="site.php?page=Claim%20Points" >Claim Points</a></li>
            <li><a href="site.php?page=Redeem%20Points" >Redeem Points</a></li>
            <li><a href="site.php?page=Profile" >Profile</a></li>
        </ul></li>    
    <li><a href="site.php?page=about" >         About Us    </a></li>
    <li><a href="site.php?page=restaurants" >   Restaurants </a></li>
    <li><a href="site.php?page=howItWorks" >    How It Works    </a></li>
    <li><a href="site.php?page=contact" >           Contact     </a></li>
  </ul>
</div> 
```

即使显示子菜单，关于如何使菜单可点击的任何建议？

注意：子菜单仅在用户登录时显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:34:43.870

我在 Jon Hanna 的评论的帮助下解决了这个问题：

我在菜单中的元素周围做了一个边框。我看到了覆盖并修复了它改变我的 CSS。

# c - 如何将值传递给 Make，然后传递给 C 代码

> ID：12139376
> 
> 赞同：5
> 
> 时间：2012-08-27T09:28:34.727
> 
> 标签：c, linux, makefile

我正在寻求帮助，让我的 Makefile 做我想做的事。

我已经想出了如何将预处理代码添加到我的 C 源代码中，只有在我为调试而编译时才会编译：

```
#if DEBUG
  printf("main()\n");

  {
    /* Pauses execution so gdb can attach. */
    int i=9;
    pid_t PID;
    char hostname[256];
    gethostname(hostname, sizeof(hostname));
    printf("PID %d on %s ready for attach.\n", PID=getpid(), hostname);
    fflush(stdout);
    while (i>0) {
      sleep(5);
      i--;
    }
  }
#endif 
```

而且我发现如果我添加`-DDEBUG=1`到我的编译语句中，上面的代码将被编译（否则它不会被编译）。

接下来，我想向我的 Makefile 传递一个标志，该标志将包含或不包含该`-D`选项。目前，我有两个单独的编译行，我酌情评论和取消评论。这是我的 Makefile（我从某人那里继承的，我很难理解）。看到说的行`CFLAGS`吗？：

```
SHELL = /bin/sh

prefix       = /home/schwarz/sundials/instdir
exec_prefix  = ${prefix}
includedir   = ${prefix}/include
libdir       = ${exec_prefix}/lib

CPP         = cc -E
CPPFLAGS    =
CC          = cc
# CFLAGS      = -Wall -g
CFLAGS      = -Wall -g -DDEBUG=1
# CFLAGS      = -g -O2
LDFLAGS     =
LIBS        = -lm
MPICC       = /usr/local/mpi/bin/mpicc
MPI_INC_DIR = /usr/local/mpi/bin/../include
MPI_LIB_DIR = /usr/local/mpi/bin/../lib
MPI_LIBS    =
MPI_FLAGS   =

INCLUDES = -I${includedir} -I${MPI_INC_DIR}
LIBRARIES = -lsundials_cvode -lsundials_nvecparallel ${LIBS}
LIBRARIES_BL =

EXAMPLES = FPU          # cvAdvDiff_non_p cvDiurnal_kry_bbd_p cvDiurnal_kry_p

OBJECTS = ${EXAMPLES:=.o}

# -----------------------------------------------------------------------------------------

.SUFFIXES : .o .c

.c.o :
        ${MPICC} ${CPPFLAGS} ${CFLAGS} ${MPI_FLAGS} ${INCLUDES} -c $<

# -----------------------------------------------------------------------------------------

all: ${OBJECTS}
        @for i in ${EXAMPLES} ; do \
          echo "${MPICC} -o $${i} $${i}.o ${MPI_FLAGS} ${CFLAGS} ${LDFLAGS} -L${libdir} ${LIBRARIES} -L${MPI_LIB_DIR} ${MPI_LIBS} ${LIBRARIES_BL}" ; \
          ${MPICC} -o $${i} $${i}.o ${MPI_FLAGS} ${CFLAGS} ${LDFLAGS} -L${libdir} ${LIBRARIES} -L${MPI_LIB_DIR} ${MPI_LIBS} ${LIBRARIES_BL}; \
        done

clean:
        rm -f ${OBJECTS}
        rm -f ${EXAMPLES} 
```

我在网上搜索过——我发誓！- 但无法弄清楚如何将参数传递到makefile。*如何设置我的 Makefile 以便它针对不同的编译需求对相同代码进行不同类型的编译？*如果我可以将特定值传递给 Makefile 会更好，它会将特定值传递给编译器，我可以使用它`i`在代码中进行初始化。（IOW，我编译为`make 8`，C 编译为`int i=8;`）。在 Make 中是否有可能做到这一点？

顺便说一句，我通过列出带有标签（冒号）的文件以及它们的依赖关系来了解 Makefile 以及它们如何工作。但我不明白这个 Makefile 是如何工作的，或者为什么它会发出两个编译语句。因此，简短的解释也会有所帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T09:34:51.007

要在调试版本和发布版本之间进行选择：

```
ifeq($(debug),1)
  CFLAGS      = -Wall -g -DDEBUG=1
else
  CFLAGS      = -Wall -g
endif 
```

然后调用make：

```
make debug=1 
```

用 DEBUG 编译，或者：

```
make 
```

无需调试即可编译。

对于初始化 i：

```
#include <stdio.h>

#ifndef INIT_I
# define INIT_I 9
#endif
int main() {
  int i = INIT_I;
  return 0;
} 
```

和生成文件：

```
ifneq ($(init_i),)
CFLAGS = "-DINIT_I=$(init_i)"
endif

all:
  gcc d.c $(CFLAGS) -E 
```

设置初始 i：

```
make init_i=10 
```

或使用默认值：

```
make 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T09:35:13.503

示例生成文件：

```
...
CFLAGS = whatever
....
ifeq ("$(DEBUG)","yes")
CFLAGS += -DDEBUG=1
endif 
```

有了这个，你可以运行 make ：

```
make "DEBUG=yes" 
```

基本上，您可以在 make 命令行上设置 makefile 变量。您可以像使用 makefile 中的任何其他变量一样使用它们，因此您也可以直接使用它们。

编辑：不过，你必须小心。除非您注意适当地命名您的目标文件，或使用不同的构建目录，否则使用不同的“调试”设置运行 make 不会自动重新编译。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T09:36:39.277

是的。

您可以使用 gcc 的`-D`选项来声明一个宏，在您的代码中使用它：

```
> gcc -DMYINT=8 foo.c 
```

与 foo.c

```
int foo(void)
{
  int my = MYINT;
} 
```

并在您的makefile中使用：

```
CFLAGS    =    -DMYINT=$(MYINT) 
```

并调用 make ：

```
> make MYINT=8 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T09:36:21.837

实现您想要的一种方法是将值`CFLAGS`从您的 shell 传递给您的 makefile。

```
CFLAGS='-Wall -g -DDEBUG=1' make -e 
```

为您调试版本，或

```
CFLAGS='-Wall -g' make -e 
```

对于您的非调试

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-27T09:38:25.430

你可以像这样在make中分配你的CFLAGS变量：CFLAGS ?= -Wall -g -DDEBUG=1

如果你运行不带参数的 make 命令，CFLAGS 将有一个默认值 '-Wall -g -DDEBUG=1'

而如果你像这样运行make：make CFLAGS='-DDEBUG=0'

此命令将使用值“-DDEBUG=0”分配 CFLAGS 值，分配的值将覆盖 makefile 中分配的默认值

# java - 如何使用jackson在java中将json转换为POJO

> ID：12139380
> 
> 赞同：9
> 
> 时间：2012-08-27T09:28:53.293
> 
> 标签：java, json, spring, jackson, pojo

我正在使用spring 3.1.2，我需要将一个json对象解析为POJO。这是我需要解析的 json：

```
{
"Person" : {
    "id" : "2"
 },
"Dog" : {
    "dateOfBirth" : "2012-08-20 00:00:00",
    "price" : "10.00"
    }
} 
```

我需要将这个 json 对象（由两个对象组合而成）转换为一个 POJO，这里是：

```
public class MyClass{
     public MyClass(){}
     public MyClass(String personsId, TimeStamp dogsDateOfBirth, BigDecimal dogsPrice){
     .... // assign each parameter to the appropriate field
     }
     private String personsId;
     private TimeStamp dogsDateOfBirth;
     private BigDecimal dogsPrice;
     //... Getters and Setters for each field
} 
```

为此，我使用`ObjectMapper mapper = new ObjectMapper();` 了 Now，因为我有几个 json 对象，所以我的代码如下所示：

```
 String json = ... ;// A json with several objects as above
    JsonNode tree = mapper.readTree(json);
    Iterator<JsonNode> iter = tree.path("data").getElements();
    while (iter.hasNext()){
        JsonNode node = iter.next();
        MyClass myClass = mapper.readValue(node, MyClass.class);
        ... // do something with myClass object
    } 
```

当我运行它时 - 我得到以下异常：

```
org.codehaus.jackson.map.JsonMappingException: No suitable constructor found for type [simple type, class ...MyClass]: can not instantiate from JSON object (need to add/enable type information?) 
```

我试图创建一个简单的 POJO - `Person`：

```
public class Person{
        private String id;          
        public Person(){}
        public Person(String id){
            this.id = id;
         }
         ... // Getter and Setter
    } 
```

并执行以下操作：

```
Person person = mapper.readValue(node.path("Person"), Person.class); 
```

我得到这个（相同的）异常：

```
org.codehaus.jackson.map.JsonMappingException: No suitable constructor found for type [simple type, class ...Person]: can not instantiate from JSON object (need to add/enable type information?) 
```

我试图阅读一些有关[类型信息](http://www.cowtowncoder.com/blog/archives/2010/03/entry_372.html)的信息- 但无法理解它如何在这里帮助我。

如何将此 json 转换为我的 POJO？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T12:25:09.367

我所做的是：我创建了一个包含 Person 对象和 Dog 对象的新类，这些类需要是静态的（我在[这里](https://stackoverflow.com/questions/8526333/jackson-error-no-suitable-constructor)找到了）。以下是课程：

```
public static class MyNewClass{
    private Person person;
    private Dog dog;
    ... // two constructors and getters and setters

 public static class Person{
     private String id;
     ... // two constructors and getters and setters
 }
 public static class Dog{
     private String dateOfBirth;
     private String price;
     ... // two constructors and getters and setters
  }
} 
```

现在我的代码如下所示：

```
 JsonNode tree = mapper.readTree(jsonString);
    Iterator<JsonNode> iter = tree.path("data").getElements();
    while (iter.hasNext()){
        JsonNode node = iter.next();
        Person person = mapper.readValue(node.path("Person"), Person.class);
        Dog dog = mapper.readValue(node.path("Dog"), Dog.class);
        MyNewClass myNewClass = new MyNewClass(person , dog);
        ... //Do something with it
    } 
```

我仍然想在不创建这两个对象（ Person 和 Dog ）的情况下做到这一点 - 现在已经足够了 - 但如果有人有想法 - 我想在这里！

谢谢。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T13:40:18.810

问题与此处描述的相同：[杰克逊错误：没有合适的构造函数](https://stackoverflow.com/questions/8526333/jackson-error-no-suitable-constructor)

您尝试实例化的类不是静态的。因此，它有一个隐藏的构造函数参数。这导致杰克逊失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T09:38:00.103

尝试更改 MyClass 的构造函数以接受`String`所有字段，因为所有字段都是 JSON 数据中的字符串。顺便说一句，JSON 中的时间戳没有标准表示，因此无论如何您都需要对日期字段进行转换。对于“价格”字段，您可以尝试更改

```
"price" : "10.00" 
```

到

```
"price" : 10.00 
```

在 JSON 数据中；这应该允许它被读取为 BigDecimal。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T12:01:03.600

如果您想将两个 json 对象组合成一个 java 对象，这里是 Genson 库[http://code.google.com/p/genson/](http://code.google.com/p/genson/)的解决方案。以下代码可以缩短并使用 Gensons 标准转换器，但作为示例不太清楚。这里的优点是您直接使用流式 API，因此速度非常快。

```
class MyClassConverter implements Deserializer<MyClass> {
    @Override
    public MyClass deserialize(ObjectReader reader, Context ctx)
            throws TransformationException, IOException {
        reader.beginObject();
        MyClass myClass = new MyClass();
        for (; reader.hasNext();) {
            reader.next();
            if ("Person".equals(reader.name())) {
                readPerson(reader, myClass);
            } else if ("Dog".equals(reader.name())) {
                readDog(reader, myClass);
            }
        }
        reader.endObject();
        return myClass;
    }

    private void readPerson(ObjectReader reader, MyClass myClass) throws IOException {
        reader.beginObject();
        for (; reader.hasNext();) {
            reader.next();
            if ("id".equals(reader.name()))
                myClass.setPersonsId(reader.valueAsString());
        }
        reader.endObject();
    }

    private void readDog(ObjectReader reader, MyClass myClass) throws IOException {
        reader.beginObject();
        for (; reader.hasNext();) {
            reader.next();
            if ("dateOfBirth".equals(reader.name()))
                myClass.setDogsDateOfBirth(Timestamp.valueOf(reader.valueAsString()));
            else if ("price".equals(reader.name()))
                myClass.setDogsPrice(new BigDecimal(reader.valueAsString()));
        }
        reader.endObject();
    }
} 
```

如果您想要其他将 Person 和 Dog 作为分隔对象的示例，您可以在 Gensons 用户组上询问。

希望这可以帮助！

**编辑** 这是另一个更短更好的版本，但未包含在已发布的 0.91 版本中（我可能会在今天发布新版本，因为我是作者 :)）要使其正常工作，您必须注释您的 getter（如果您也添加 setter使用@JsonProperty(the_name_from_json) 进行序列化。请注意，如果您希望 Genson 只能使用字段，则 Genson 不需要任何 getter/setter（默认情况下，如果可用，则使用 getter/setter，否则字段）。

```
Genson genson = new Genson.Builder().withDeserializerFactory(new MyClassConverterFactory()).create();
MyClass myClass = genson.deserialize(json, MyClass.class);

public static class MyClassConverterFactory implements Factory<Deserializer<MyClass>> {
    @SuppressWarnings("unchecked")
    @Override
    public Deserializer<MyClass> create(Type type, Genson genson) {
        BeanDescriptor<MyClass> myClassDescriptor = (BeanDescriptor<MyClass>) genson.getBeanDescriptorFactory().provide(MyClass.class, genson);
        return new MyClassConverter(myClassDescriptor);
    }
}

public static class MyClassConverter implements Deserializer<MyClass> {
    BeanDescriptor<MyClass> myClassDescriptor;
    public MyClassConverter(BeanDescriptor<MyClass> myClassDescriptor) {
        this.myClassDescriptor = myClassDescriptor;
    }

    @Override
    public MyClass deserialize(ObjectReader reader, Context ctx)
            throws TransformationException, IOException {
        reader.beginObject();
        MyClass myClass = new MyClass();
        for (; reader.hasNext();) {
            reader.next();
            if ("Person".equals(reader.name())) {
                myClassDescriptor.deserialize(myClass, reader, ctx);
            } else if ("Dog".equals(reader.name())) {
                myClassDescriptor.deserialize(myClass, reader, ctx);
            }
        }
        reader.endObject();
        return myClass;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-27T13:25:02.163

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

您可以利用 MOXy 中基于路径的映射来支持您的用例。

**我的课**

`@XmlPath`注解用于指定基于路径的映射：

```
package forum12139380;

import java.math.BigDecimal;
import java.sql.Timestamp;
import org.eclipse.persistence.oxm.annotations.XmlPath;
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class MyClass {

    public MyClass() {
    }

    public MyClass(String personsId, Timestamp dogsDateOfBirth,
            BigDecimal dogsPrice) {
        this.personsId = personsId;
        this.dogsDateOfBirth = dogsDateOfBirth;
        this.dogsPrice = dogsPrice;
    }

    @XmlPath("Person/id/text()")
    private String personsId;

    @XmlPath("Dog/dateOfBirth/text()")
    private Timestamp dogsDateOfBirth;

    @XmlPath("Dog/price/text()")
    @XmlSchemaType(name="string")
    private BigDecimal dogsPrice;

    // ... Getters and Setters for each field

} 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

下面的代码会将 JSON 转换为对象，然后再转换回 JSON。

```
package forum12139380;

import java.util.*;
import javax.xml.bind.*;
import javax.xml.transform.stream.StreamSource;
import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String, Object> properties = new HashMap<String, Object>(2);
        properties.put(JAXBContextProperties.MEDIA_TYPE, "application/json");
        properties.put(JAXBContextProperties.JSON_INCLUDE_ROOT, false);
        JAXBContext jc = JAXBContext.newInstance(new Class[] {MyClass.class}, properties);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        StreamSource json = new StreamSource("src/forum12139380/input.json");
        MyClass myClass = (MyClass) unmarshaller.unmarshal(json, MyClass.class).getValue();

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(myClass, System.out);
    }

} 
```

**输入.xml/输出**

下面是运行演示代码的输入和输出。在我的示例中，我使用的是 MOXy 默认的`Timestamp`. `XmlAdapter`您可以使用（请参阅： [jaxb unmarshal timestamp](https://stackoverflow.com/questions/2519432/jaxb-unmarshal-timestamp/3181966#3181966) ）轻松控制此表示。

```
{
   "Person" : {
      "id" : "2"
   },
   "Dog" : {
      "dateOfBirth" : "2012-08-20T00:00:00.0",
      "price" : "10.00"
   }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-01T01:40:50.467

所有这些答案都意味着使用 POJO 是唯一的方法。显然，在 Web 项目中，比如 Spring Web 服务项目，拥有 POJO 很重要，但仅仅为了单元测试，你不能只使用通用的 Jackson JsonNode 对象吗？

你不能简单地使用 Jackson ObjectMapper 反序列化成 JsonNode 而不使用 POJO 类吗？JsonNode 的实例本身不是合法的杰克逊 POJO 吗？我确信它确实如此，因为一旦你有一个 JsonNode 实例，你就可以在 json 中获取对象，例如：

```
node.get(0).get(1).get("nodename").asText(); 
```

# c++ - 依赖于 Alpha 的模板匹配

> ID：12139381
> 
> 赞同：2
> 
> 时间：2012-08-27T09:28:54.603
> 
> 标签：c++, opencv, cuda, template-matching

我正在使用具有 CUDA / CUBLAS / CUFFT 支持的 OpenCV 在灰度屏幕截图上执行一些非常基本的模板匹配以提取一些文本，这意味着我可以假设以下内容：

我确实知道我试图匹配的原始精灵的确切大小、颜色和旋转，即，我可以访问在观察程序的渲染过程中使用的纹理。

然而，由于精灵是部分透明的，正常的模板匹配通过`cv::(gpu::)matchTemplate`（使用规范互相关）不能正常工作，因为透明区域的偏差对整体相关性有太大的负面影响。

基本上这些例子很好地总结了我想要实现的目标：

给定要匹配的模板及其 alpha 掩码：

![要匹配的精灵模板。](../Images/1349fb4170faaa7c5833ae820fafdc8f.png)![模板 alpha 蒙版。](../Images/55edb267bf5c2ee83a4fb67242b14017.png)

我希望对这样的图像进行高到接近 100% 的匹配（任意背景、透明区域中的随机内容、部分遮挡）：

![白色背景上的雪碧。](../Images/973c02a96fa607c5fdbffc37157d3da6.png)![黑色背景上的精灵](../Images/2e82ea09169a3be8145afb0e0c13b7d1.png)![任意背景 + 部分遮挡的透明区域。](../Images/85d924189486c79f3583c33916579aa4.png)![部分遮挡。](../Images/f46adccf592fd03eeedfbd445cbd78d5.png)

然而，像这样的图像应该只产生非常低的百分比（错误的颜色，全黑）： ![在此处输入图像描述](../Images/654da007c3a8da845e4f415702caa712.png)![在此处输入图像描述](../Images/64f955f515f8733b6274a3440f4c2f83.png)

目前我正在使用[边缘检测](https://stackoverflow.com/questions/4761940/opencv-template-matching-and-transparency "边缘检测")来获得一些不错的匹配（Canny + 互相关），但正如您所看到的，根据背景，图像中可能存在也可能不存在边缘，这会产生不可靠的结果并且通常非常匹配“前卫”的领域。

我做了一些数学运算，得出了一个依赖于 alpha 的标准化互相关（基本上将 alpha 掩码预乘到模板和图像上），它在纸上运行良好，但几乎不可能以良好的性能实现。是的，性能确实是一个问题，因为多个精灵 (~10) 必须以近乎实时的方式 (~10 FPS) 匹配以跟上程序的速度。

我有点想不通了。有什么标准的方法吗？有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T19:34:02.507

所以我终于设法用一些数学和 CUFFT 自己解决了这个问题。我将其称为“Alpha-weighted normed cross-correlation”。这里是：

![阿尔法加权标准化互相关](../Images/29f993ce652d73eb3285e1c64ac02e20.png)

使用这种方法，对于像 OP 中的情况，我得到了非常好的匹配 (> 0.99)。它进一步有助于阈值 alpha 蒙版以简单地忽略大多数透明像素。

# java - Spring，运行时扩展的内部 bean 集合

> ID：12139382
> 
> 赞同：0
> 
> 时间：2012-08-27T09:29:01.437
> 
> 标签：java, multithreading, spring, runtime

我是一个相对较新的 Spring 用户，我有兴趣使用这个框架来加载复杂的嵌套配置。

以下是我的架构设计的伪代码：

```
 class **A** implements runnable{
      int x;
      Collection<**B**> clist;         //not fixed size list, 
      run(){
           // if (something happens) 
           //           new Thread(**B**(y,z,w))
      }
   } 

   class **B** implements runnable{
      int y;
      int z;
      int w;
      Array<**C**> bclist;            // fixed size array of C known at init time
      run(){
           process...
      }
   } 

   class **C**{
      int v;
      int l;
   } 
```

我需要能够配置 Ax、By、Bz、Bw、B.clist、Cv 和 Cl

我有一个与每个新线程的 B 初始化相关的问题，我在编译时不知道 clist 是否会保持为空，只有在运行时我才会知道将创建多少个线程。对于每个新线程，我都会创建具有相同配置的新 B。

（我查看了自动装配和原型功能，我怀疑它可能会有所帮助）

**编辑**

这里我有xml示例文件：

```
 <!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
            <beans>
                <bean id="A" class="...">
                    <property name="x" value="150" />
                    <!-- HERE IS MY PROBLEM-->

                    <property name="clist">
                        <list>
                            <ref bean="B" />
                        </list>
                </bean>

                <bean id="B" class="...">
                    <property name="y" value="20" />
                    <property name="z" value="7" />
                    <property name="w" value="7" />
                    <property name="bclist">
                        <list>
                            <ref bean="C" />
                        </list>
                </bean>

                <bean id="C" class="...">
                    <property name="v" value="3" />
                    <property name="l" value="1" />
                </bean>
            </beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:46:19.533

我对这个问题有一个可能的解决方案，它可能不是最佳的。

在 xml 中的 A bean 中，我可以注释掉 clist 的设置（结构中根本不包括它），

当我在java代码中创建B bean时，我可能每次都使用getBean（“B”），同时将xml中的B bean定义为原型。

像这样 ：

```
 <!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
            <beans>
                <bean id="A" class="...">
                    <property name="x" value="150" />
                </bean>

                <bean id="B" class="..." scope="prototype">
                    <property name="y" value="20" />
                    <property name="z" value="7" />
                    <property name="w" value="7" />
                    <property name="bclist">
                        <list>
                            <ref bean="C" />
                        </list>
                </bean>

                <bean id="C" class="...">
                    <property name="v" value="3" />
                    <property name="l" value="1" />
                </bean>
            </beans> 
```

Java代码：

```
 class **A** implements runnable{
    int x;
    Collection<**B**> clist;         //not fixed size list, 
    run(){
       // if (something happens) 
       //           new Thread((B)context.getBean("B"))
    }
  } 
```

# database - Domino DB View.AllEntries 需要很长时间

> ID：12139385
> 
> 赞同：1
> 
> 时间：2012-08-27T09:29:05.420
> 
> 标签：database, lotus-notes, lotus-domino, labview

正如标题所说：我只想获取 Notes Domino DB 的前 10 个条目，例如 SQL 语句“限制”——愚蠢地使用 labview。

因此，我创建了一个 IDatabase 对象，通过 GetView 访问。这将返回一个 IView 对象并且是有效的。为了获得 IViewEntryCollection，我必须运行 AllEntries 属性，但这需要很长时间......我想我会得到一个指针对象，我可以通过 ViewEntry.ColumnValues 和 ViewEntryCollection.GetNextEntry 枚举它。

是否有其他方法代替使用 View.AllEntries 调用？但是，如果我只想获得前 10 个条目，那么检索所有数据库条目对我来说似乎有点矫枉过正。

非常感谢，

全天钢琴

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T11:44:52.220

拥有视图对象后，您可以创建 ViewNavigator 对象。视图导航器具有允许您使用 GetFirst 和 GetNext 方法按顺序迭代的方法。

# ios - 停止应用程序时停止位置

> ID：12139392
> 
> 赞同：0
> 
> 时间：2012-08-27T09:29:44.493
> 
> 标签：ios, cllocationmanager, terminate

我开发了一个 iOS 应用程序。

当我在应用程序中时，我有一个位置管理器可以获取我的位置。

当我进入后台状态时，我希望我的位置继续更新并在更改时发送本地通知。（这部分没问题）。

我的问题是位置管理器在我杀死应用程序时仍然使用位置。

我想在应用程序终止时停止位置更新。

我尝试使用此功能：

```
- (void) applicationWillTerminate 
```

但它永远不会传递给这个函数......

有任何想法吗 ？

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:21:04.607

您应该确保在应用程序终止时正确关闭位置监控/GPS。

```
[locationManager stopUpdatingLocation]; 
```

如果一切设置正确，该位置将继续在后台或通过委托方法并唤醒您的应用程序以响应它们。

# android - 滚动画布后的Android画布触摸位置

> ID：12139395
> 
> 赞同：0
> 
> 时间：2012-08-27T09:30:01.607
> 
> 标签：android, canvas, calendar

我设计了一个 android 日历应用程序。当我在画布中绘制事件时，我会根据时间计算事件位置。

[这是滚动前的图像](https://www.box.com/s/725e88ba0f0f34b0114c)

[这是滚动后的图像](https://www.box.com/s/15ad191e201d12dd90d7)

我的问题是，滚动后。当我尝试获取触摸位置时，它会针对当前显示的屏幕原点给出点。
但我需要得到绘制事件的确切点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:38:24.850

使用 getScrollX() 和 getScrollY() 并将其添加到事件位置作为偏移量。

# html - 找不到我的 div 周围边框的来源

> ID：12139396
> 
> 赞同：0
> 
> 时间：2012-08-27T09:30:07.860
> 
> 标签：html, css, border

我正在为 drupal 页面创建一个打印 css，其中的主题是在 Artisteer 中创建的。打印时，我不想看到任何边框。唯一的问题是我找不到边界的起源。我扫描了我的 HTML 和 CSS 页面，发现只有两次提到了我指定颜色的边框。我的 CSS 中的其他边框都设置为`0`或`none`。例如，将这些更改为白色时，什么也没有发生。

即使这样做也没有效果：

```
*
{
     border: 0px transparent !important;
} 
```

我该怎么做才能找到这些边界的起源？它们可以以任何其他方式定义为`border`或`border-color`吗？

编辑：我已经尝试在浏览器中检查方法，仍然找不到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:34:30.700

我会安装[firebug](https://addons.mozilla.org/de/firefox/addon/firebug/)（如果你使用的是 firefox）并检查这个 div。使用 firebug，您可以查看哪些 css 应用于您的元素以及它来自哪个文件。您还可以随时更改这些值，看看会发生什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T09:34:23.063

您是否尝试过使用类似的方法来查找需要从中删除边框的元素。[检查 Chrome 中的元素。](https://superuser.com/questions/4640/what-is-the-inspect-element-feature-in-google-chrome)

一旦您找到了正确的目标元素，它应该可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T09:46:04.007

css 选择器有自己的[特殊性](http://www.w3.org/TR/selectors/#specificity)和[级联顺序](http://www.w3.org/TR/CSS2/cascade.html#cascading-order)（效果优先级）。因此，当您有一个类似`#myid`元素的选择器时，通用选择器 (*) 不会影响该元素。
你可以使用firefox的firebug插件来调试css。

# php - 如何使用 PHP Curl::Easy 使用 Shopify API 将元字段发布到产品

> ID：12139397
> 
> 赞同：2
> 
> 时间：2012-08-27T09:30:12.840
> 
> 标签：php, shopify

我正在尝试以下代码将元字段值插入产品。但它给

" HTTP/1.1 422 无法处理的实体服务器：nginx 日期：星期二，2012 年 8 月 21 日 20:23:46 GMT 内容类型：application/xml；charset=utf-8 传输编码：分块连接：保持活动状态：422 无法处理实体 X-Shopify-Shop-Api-Call-Limit：1/500 HTTP_X_SHOPIFY_SHOP_API_CALL_LIMIT：1/500 位置：[http](http://gmdtest.myshopify.com/admin/metafields) ://gmdtest.myshopify.com/admin/metafields缓存控制：无缓存 X-Request-Id：f25240474fd6f2868e24b9962c6c2d60 X-UA-Compatible: IE=Edge,chrome=1 X-Runtime: 0.108680 命名空间不能为空 命名空间太短（最少 3 个字符） 密钥不能为空白 密钥太短（最少 3 个字符）值不能为空 值类型不能为空 值类型不包含在列表中

" 错误。任何帮助将不胜感激。

谢谢

```
<?php

class cURL {
var $headers;
var $user_agent;
var $compression;
var $cookie_file;
var $proxy;
//var $CURLOPT_SSL_VERIFYHOST;
function cURL($cookies=TRUE,$cookie='cookies.txt',$compression='gzip',$proxy='') {
$this->headers[] = 'Accept: image/gif, image/x-bitmap, image/jpeg, image/pjpeg';
$this->headers[] = 'Connection: Keep-Alive';
$this->headers[] = 'Content-type: application/x-www-form-urlencoded;charset=UTF-8';
$this->user_agent = 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.0.3705; .NET CLR 1.1.4322; Media Center PC 4.0)';
$this->compression=$compression;
$this->proxy=$proxy;
$this->cookies=$cookies;
//$this->CURLOPT_SSL_VERIFYHOST = 1;

if ($this->cookies == TRUE) $this->cookie($cookie);
}
function cookie($cookie_file) {
if (file_exists($cookie_file)) {
$this->cookie_file=$cookie_file;
} else {
fopen($cookie_file,'w') or $this->error('The cookie file could not be opened. Make sure this directory has the correct permissions');
$this->cookie_file=$cookie_file;
//fclose($this->cookie_file);
}
}
function get($url) {
$process = curl_init($url);
curl_setopt($process, CURLOPT_HTTPHEADER, $this->headers);
curl_setopt($process, CURLOPT_HEADER, 0);
curl_setopt($process, CURLOPT_USERAGENT, $this->user_agent);
if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEFILE, $this->cookie_file);
if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEJAR, $this->cookie_file);
curl_setopt($process,CURLOPT_ENCODING , $this->compression);
curl_setopt($process, CURLOPT_TIMEOUT, 30);
if ($this->proxy) curl_setopt($process, CURLOPT_PROXY, $this->proxy);
curl_setopt($process, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($process, CURLOPT_FOLLOWLOCATION, 1);
$return = curl_exec($process);
curl_close($process);
return $return;
}
function post($url,$data) {
$process = curl_init($url);
curl_setopt($process, CURLOPT_HTTPHEADER, $this->headers);
curl_setopt($process, CURLOPT_HEADER, 1);
curl_setopt($process, CURLOPT_USERAGENT, $this->user_agent);
if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEFILE, $this->cookie_file);
if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEJAR, $this->cookie_file);
curl_setopt($process, CURLOPT_ENCODING , $this->compression);
curl_setopt($process, CURLOPT_TIMEOUT, 30);
if ($this->proxy) curl_setopt($process, CURLOPT_PROXY, $this->proxy);
curl_setopt($process, CURLOPT_POSTFIELDS, $data);
curl_setopt($process, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($process, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($process, CURLOPT_POST, 1);
$return = curl_exec($process);
curl_close($process);
return $return;
}
function error($error) {
echo "<center><div style='width:500px;border: 3px solid #FFEEFF; padding: 3px; background-color: #FFDDFF;font-family: verdana; font-size: 10px'><b>cURL Error</b><br>$error</div></center>";
die;
}
}
$cc = new cURL();

$data = '<?xml version="1.0" encoding="UTF-8"?><metafield><namespace>product_info</namespace><key>product_date</key><value type="string">21-9-2012</value><value-type>string</value-type></metafield>';

echo $cc->post('http://api_key:shared-secret@gmdtest.myshopify.com/admin/products/47140632/metafields.xml',$data);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:27:28.980

您将内容类型设置为编码格式而不是 XML，因此我们无法正确解析您的请求。

# api - 专有名词分类

> ID：12139401
> 
> 赞同：0
> 
> 时间：2012-08-27T09:30:29.593
> 
> 标签：api, taxonomy

是否有任何 API 可以将专有名词映射到其类别？

例如：阿尔伯特爱因斯坦可以映射到物理学家/科学家。TextWise API 和 Alchemy API 仅用于文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T17:18:40.340

一位朋友建议使用 Freebase API：[http](http://wiki.freebase.com/wiki/Freebase_API) ://wiki.freebase.com/wiki/Freebase_API 这对我有用。谢谢

# opencv - 使用 2D 数组初始化 OpenCV Mat

> ID：12139402
> 
> 赞同：34
> 
> 时间：2012-08-27T09:30:30.123
> 
> 标签：opencv

在我的应用程序中，我想创建一个具有一些值的 OpenCV Mat A（二维），然后使用 A 作为输入将其传递给另一个 OpenCV 函数。

目前，我正在尝试：

```
// float data[2][5] = {{1,2,3,4,5},{7,8,9,10,11}}; 
// OR
float data[10] = {1,2,3,4,5,7,8,9,10,11};

// and then
//  A = Mat(1, 5, CV_32FC1, &data, 2);   // init from float 1D - array
// OR 
    A = Mat(2, 5, CV_32FC1, &data, 2); 
```

在一维数组的情况下，值传递是可以的。但这不适用于二维数组，这是更常见的情况。如何在 OpenCV 中解决这个问题？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-27T09:41:03.953

最初，我使用了 OpenCV 在线指南中的助记符：

```
Mat::Mat(Size size, int type, void* data, size_t step=AUTO_STEP) 
```

但我不明白该文件的含义是什么`size_t step=AUTO_STEP`。这意味着我可以省略`step`OpenCV 将自动选择的参数`AUTO_STEP`

我试过了，这有效：

```
A = Mat(2, 5, CV_32FC1, &data); 
```

对于从数组初始化的 2D Mat

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-08-27T10:01:20.117

虽然您的答案对您的情况是正确的，但最好知道什么`step`和`AUTO_STEP`意思

通常，图像存储在连续的内存块中。每一行都在前一行之后，因此您可以使用简单的指针访问数据

```
data = dataPtr[currentCol + width * currentRow]; 
```

其中 width 是以字节为单位的行宽（不是以像素为单位！）

但情况并非总是如此 - 有时您访问一个子矩阵，并且数据在每一行上都是连续的，但要进入下一行，您必须*跳转*一个字节序列。

这就是步长（也称为步幅）的来源。它表示两个连续行之间的距离（以字节为单位）。在连续矩阵中，它的值为`sizeof(pixel)*rowWidth`，但在特殊情况下它可能有自定义值。当你将 AUTO_STEP 传递给 Mat 构造函数时，它知道数据是连续的，并用上面的公式计算步长。所以现在，更正确的读取像素值的方法是

```
data = dataPtr[currentCol + step * currentRow]; 
```

这适用于各种图像。

最后但并非最不重要的一点是，不要忘记 step 是以**字节**而不是**像素**来衡量的。所以如果你有一个 3 通道的 uchar RGB 图像， step 将是`3*number of pixels`，如果你有一个 3 通道的 int 图像，`step = 3(channels)*(4=sizeof(int))*(number rows)`

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2015-06-24T10:25:45.853

除了上述答案，还有[另一种选择](http://docs.opencv.org/modules/core/doc/basic_structures.html#mat)。

对于较小的数据，我更喜欢以下内容：

```
Mat A = (Mat_<float>(2, 5) << 1, 2, 3, 4, 5, 7, 8, 9, 10, 11); 
```

您可以轻松获得所需的结果，而无需定义额外的变量“数据”。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-05-18T13:57:33.417

因为`data`是 2D 数组 - 所有`data`, `&data`, `*data`, `data[0]`, `&data[0]`, 和`&data[0][0]`指向数组的基数。可以选择上述任何表示来正确构造`Mat`in 代替`X`in

```
A = Mat(2, 5, CV_32FC1, X ); 
```

放心，因为 OpenCV 接受数据，并且 OpenCV 的[数据](https://github.com/Itseez/opencv/blob/2.4.9/modules/core/include/opencv2/core/mat.hpp#L129)`void*`访问是 in [line](https://github.com/Itseez/opencv/blob/2.4.9/modules/core/include/opencv2/core/mat.hpp#L538)。我更喜欢从单维或多维数组构造 Mat 的相同语法。

```
A = Mat(1, 10, CV_32FC1, data ); //for 1D array
A = Mat(2, 5, CV_32FC1, data ); //for 2D array 
```

回到查询 - 请注意，您`Mat`从一维数组构建的偶数是不正确的。step 参数被提到为 2。它只是碰巧起作用，因为如果行数为 1， OpenCV[会覆盖提供的 step 参数。对于更高维数组，OpenCV 会为您得到的不正确的 step 参数抛出调试](https://github.com/Itseez/opencv/blob/2.4.9/modules/core/include/opencv2/core/mat.hpp#L142)[断言](https://github.com/Itseez/opencv/blob/2.4.9/modules/core/include/opencv2/core/mat.hpp#L143)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-09-08T17:21:56.247

[此合并拉取请求](https://github.com/opencv/opencv/pull/10808/files)中的 C++11 解决方案：

```
// Mat(sizes, list)
cv::Mat A({2, 5}, {1, 2, 3, 4, 5, 6, 7, 8, 9, 10}); 
```

# javascript - 当目标为空白时，链接的颜色不会变为已访问

> ID：12139411
> 
> 赞同：1
> 
> 时间：2012-08-27T09:31:10.350
> 
> 标签：javascript, html

当目标设置为“_blank”时，我的链接不会更改为默认访问颜色。我该如何解决（我想在新窗口中打开链接）？有人有这方面的经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:36:57.530

我会说您的链接在重新加载原始页面后会改变颜色，还是不会？

如果您正在寻找一种解决方法，这将帮助您将链接标记为 js 访问过，[这里](https://stackoverflow.com/questions/795654/using-javascript-to-mark-a-link-as-visited)是一个线程。

> 严格来说，没有个别链接的“已访问”状态。浏览器将 URL 本身解释为“已访问”。任何指向浏览器历史中的 URL 的链接都将接收由 CSS 中的 :visited 伪样式定义的样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:55:11.227

`http://`在之前添加`google.com`，否则是本地链接。并检查你的 CSS，也许你使用了这样的样式：

```
a { color: _yourcolor_; } 
```

这样，它将所有状态（包括 :visited）中的所有链接都设置为一种颜色。

# android - Android 侦听器关闭上下文菜单

> ID：12139413
> 
> 赞同：5
> 
> 时间：2012-08-27T09:31:23.627
> 
> 标签：android, listener

问题：我在做

```
registerForContextMenu(list); 
```

一切都很好，除了 ;

问题：我想在 contextMenu 被解除时触发一个动作。如果用户关闭 contextMenu 我怎么能有一个监听器？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T09:39:18.597

您可以覆盖该方法：

```
@Override
public void onContextMenuClosed(Menu menu) {
    super.onContextMenuClosed(menu);
} 
```

做任何你想做的事:)

祝你好运，阿克德

# python - 在 Amazon Web Service S3 中取消归档文件

> ID：12139414
> 
> 赞同：0
> 
> 时间：2012-08-27T09:31:32.870
> 
> 标签：python, json, amazon-s3, amazon-web-services, zip

目前正在处理一个项目，我正在将一系列 JSON 文件上传到 Amazon S3 以供移动客户端接收。

为了降低单个文件传输的成本，我想知道是否可以在 S3 服务器上解压缩文件，而不是在 EC2 服务器上解压缩文件而不是跨文件传输。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:40:25.920

S3 不直接支持您要求的功能。但是，您应该考虑两件事来降低成本和转移：

2.  在上传、存储和提供压缩的 JSON 文件之前压缩您的 JSON 文件，并让浏览器透明地解压缩它们（[这里](https://stackoverflow.com/questions/8350749/gzipped-json-file-not-decompressing)有一些信息）

3.  此外，您可以使用减少冗余选项来存储文件（您可以在此处节省 50%，但仅用于存储，而不是传输）

# visual-c++ - MFC 应用程序（32 位）在 Windows（7 64 位）机器上表现异常（来自 GetScrollPosition() 函数结果的垃圾值）

> ID：12139416
> 
> 赞同：0
> 
> 时间：2012-08-27T09:31:39.237
> 
> 标签：visual-c++, windows-7, mfc

我们有一个 MFC 应用程序在 windows server 2008 R2（64 位）和 windows 7（32 位）上运行良好。但它在window 7（64位）机器上表现得很奇怪。

在调试应用程序后，我发现函数调用`GetScrollPosition()`将返回值`CPoint(x,y)`作为垃圾 - 应用程序的起始行号和列号设置为不确定值，并且无法调用`Draw3DCellStep()`以绘制单元格。

我的应用程序在这里发生的一件有趣的事情是，如果我将应用程序的缩放级别更改`<=70%`为返回当前`Cpoint(x=0,y=0)`值，但如果我将缩放值修改为 80% 则`GetScrollPosition()`返回`Cpoint(x=0,y=58494736)`。

为什么`GetScrollPosition()`函数返回垃圾或不适当的值？相同的应用程序在 win 2003 R2（64 位）和 win 7（32 位）上运行良好。请帮忙。

注：在windows server 2003上编译的visual studio 2008专业版开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:06:51.693

应用 windows Classic 主题后，MFC 应用程序工作正常。因此，在 Windows7 Aero 主题中，旧版 MFC 应用程序将无法正常工作。

# c# - 将数据从 Windows 应用程序发送到控制台应用程序

> ID：12139420
> 
> 赞同：3
> 
> 时间：2012-08-27T09:31:55.023
> 
> 标签：c#

在我的应用程序中，我使用 Windows 窗体创建了一个 GUI，其中有一个带有值的 ListBox 和一个名为 sendto 的按钮。用户从 ListBox 中进行选择并单击 sendto 按钮。单击此按钮时，从 ListBox 中选择的值应显示在控制台应用程序上。这里以 Windows 形式开发的 GUI 充当服务器，控制台应用程序充当客户端。如何将数据从 Windows 窗体发送到 C# 中的控制台应用程序？我是 C# 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T05:54:11.103

我在回答你的问题：使用 c# 进行套接字编程......但是一些不全面的人关闭了你的问题......

我知道你可能是一个新程序员。但我发现你很好地提出问题，让你发展自己成为一个更好的程序员。我要给你投票！:D

请参阅以下代码，它将帮助您享受迷你客户端服务器应用程序的乐趣。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using PostSharp.Aspects;
using System.Diagnostics;
using System.IO;

namespace TestCode
{
    public class Program
    {
        public static StreamReader ServerReader;

        public static StreamWriter ServerWriter;

        static void Main(string[] args)
        {
            // here are all information to start your mini server
            ProcessStartInfo startServerInformation = new ProcessStartInfo(@"c:\path\to\serverApp.exe");

            // this value put the server process invisible. put it to false in while debuging to see what happen
            startServerInformation.CreateNoWindow = true;

            // this avoid you problem
            startServerInformation.ErrorDialog = false;

            // this tells that you whant to get all connections from the server
            startServerInformation.RedirectStandardInput = true;
            startServerInformation.RedirectStandardOutput = true;

            // this tells that you whant to be able to use special caracter that are not define in ASCII like "é" or "ï"
            startServerInformation.StandardErrorEncoding = Encoding.UTF8;
            startServerInformation.StandardOutputEncoding = Encoding.UTF8;

            // start the server app here
            Process serverProcess = Process.Start(startServerInformation);

            // get the control of the output and input connection
            Program.ServerReader = serverProcess.StandardOutput;
            Program.ServerWriter = serverProcess.StandardInput;

            // write information to the server
            Program.ServerWriter.WriteLine("Hi server im the client app :D");

            // wait the server responce
            string serverResponce = Program.ServerReader.ReadLine();

            // close the server application if needed
            serverProcess.Kill();
        }
    }
} 
```

请注意，在服务器应用程序中，您可以使用以下方法接收客户端信息：

```
string clientRequest = Console.ReadLine();
Console.WriteLine("Hi client i'm the server :) !"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T09:34:14.743

您可以使用管道，请浏览[MSDN 文章](http://msdn.microsoft.com/en-us/library/bb546102.aspx)了解本地通信或网络通信[MSDN 文章](http://msdn.microsoft.com/en-us/library/bb546085)。

# python - Django python - 如何将所有HttpResponses通过一个函数

> ID：12139428
> 
> 赞同：0
> 
> 时间：2012-08-27T09:32:22.370
> 
> 标签：python, django, httpresponse, http-request

我有 urls.py 将 HttpRequest 路由到特定的视图函数。这些视图函数都返回一个字典对象。如何通过转储到 Json 并包装在 HttpResponse 中的函数传递所有这些返回对象？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T09:35:32.217

也许你想要一个[render_decorator 。](http://djangosnippets.org/snippets/1733/)用法：

```
@render('index.html', ('json',))
def my_view(request)
    #do something
    return {'key': 'value'} 
```

或者这个[片段](http://djangosnippets.org/snippets/622/)，它用于返回字典以获取 JSON 视图的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T21:14:51.070

子类化怎么样`HttpResponse`？我在视图中使用它来返回 json：

```
import simplejson
from django.http import HttpResponse

class JsonResponse(HttpResponse):
    def __init__(self, data):
        super(JsonResponse, self).__init__(
            content=simplejson.dumps(data),
            mimetype='application/json; charset=utf8') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T14:36:01.053

使用[Django 中间件](https://docs.djangoproject.com/en/dev/topics/http/middleware/?from=olddocs#process-response)来处理您的响应对象。`process_response`在您的自定义中间件中实现该方法。使用视图创建的字典并将其转换为所需的 json。然后将其传递给以下函数，该函数将确保收到的实际响应是 json。

```
def render_json_response(data):
    """Sends an HttpResponse with the X-JSON header and the right mimetype."""
    resp = HttpResponse(data, mimetype=("application/json;"))
    resp['X-JSON'] = data
    return resp 
```

[还在Django Annoying](https://bitbucket.org/offline/django-annoying/wiki/Home)项目`ajax_request decorator - returns JsonResponse with dict as content`中发现了这个

# c++ - 编译 VS2008 解决方案时标准 Microsoft 文件“iosfwd”和“atlconv.h”中的语法错误？

> ID：12139429
> 
> 赞同：1
> 
> 时间：2012-08-27T09:32:25.523
> 
> 标签：c++, visual-studio, visual-studio-2008, visual-c++

嗨，我在标准 microsoft 文件“iosfwd”和 atlconv.h“中遇到了很多语法错误。（我在下面粘贴了一些错误）:: 真的不明白标准文件 iosfwd 和 atlconv.h 中此类错误背后的原因。任何非常感谢您的帮助。

IOSFWD 中的错误

```
\program files (x86)\microsoft visual studio 9.0\vc\include\iosfwd(350) : error C2065: '_Size_in_words' : undeclared identifier
3>c:\program files (x86)\microsoft visual studio 9.0\vc\include\iosfwd(350) : error C2065: '_First2' : undeclared identifier
3>c:\program files (x86)\microsoft visual studio 9.0\vc\include\iosfwd(350) : error C2065: '_Count' : undeclared identifier
3>c:\program files (x86)\microsoft visual studio 9.0\vc\include\iosfwd(350) : error C3861: '_CRT_SECURE_WMEMCPY': identifier not found
3>c:\program files (x86)\microsoft visual studio 9.0\vc\include\iosfwd(351) : error C2065: '_First1' : undeclared identifier
3>c:\program files (x86)\microsoft visual studio 9.0\vc\include\iosfwd(358) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
3>c:\program files (x86)\microsoft visual studio 9.0\vc\include\iosfwd(358) : error C2146: syntax error : missing ')' before identifier '_Elem'
3>c:\program files (x86)\microsoft visual studio 9.0\vc\include\iosfwd(358) : error C2059: syntax error : ')'
3>c:\program files (x86)\microsoft visual studio 9.0\vc\include\iosfwd(358) : error C2059: syntax error : ')'
3>c:\program files (x86)\microsoft visual studio 9.0\vc\include\iosfwd(366) : error C2065: '_First1' : undeclared identifier
3>c:\program files (x86)\microsoft visual studio 9.0\vc\include\iosfwd(366) : error C2065: '_Count' : undeclared identifier 
```

atlconv.h 中的错误::

```
program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(530) : error C2146: syntax error : missing ')' before identifier 'LPDEVMODEA'
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(530) : warning C4229: anachronism used : modifiers on data are ignored
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(530) : error C2495: 'AtlDevModeW2A' : '__declspec(nothrow)' can only be applied to function declarations or definitions
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(530) : error C2059: syntax error : ')'
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(535) : error C2065: 'nChars' : undeclared identifier
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(535) : error C2448: '_Ret_opt_z_cap_' : function-style initializer appears to be a function definition
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(535) : error C2143: syntax error : missing ';' before '__stdcall'
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(535) : error C2065: 'nChars' : undeclared identifier
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(535) : error C3861: '_Out_z_cap_': identifier not found
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(535) : error C2146: syntax error : missing ')' before identifier 'LPWSTR'
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(535) : warning C4229: anachronism used : modifiers on data are ignored
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(535) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(535) : error C2059: syntax error : ')'
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(536) : error C2143: syntax error : missing ';' before '{'
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(554) : error C2065: 'nChars' : undeclared identifier
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(554) : error C2448: '_Ret_opt_z_cap_' : function-style initializer appears to be a function definition
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(554) : error C2143: syntax error : missing ';' before '__stdcall'
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(554) : error C2065: 'nChars' : undeclared identifier
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(554) : error C3861: '_Out_z_cap_': identifier not found
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(554) : error C2146: syntax error : missing ')' before identifier 'LPSTR'
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(554) : warning C4229: anachronism used : modifiers on data are ignored
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(554) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(554) : error C2059: syntax error : ')'
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(555) : error C2143: syntax error : missing ';' before '{'
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(572) : error C2065: 'nChars' : undeclared identifier
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(572) : error C2448: '_Ret_opt_z_cap_' : function-style initializer appears to be a function definition
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(572) : error C2143: syntax error : missing ';' before '__stdcall'
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(572) : error C2065: 'nChars' : undeclared identifier
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(572) : error C3861: '_Out_z_cap_': identifier not found
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(572) : error C2146: syntax error : missing ')' before identifier 'LPWSTR'
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(572) : warning C4229: anachronism used : modifiers on data are ignored
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(572) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
3>c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlconv.h(572) : error C2374: 'AtlA2WHelper' : redefinition; multiple initialization 
```

这些只是我在此处粘贴的一些错误，因为我无法粘贴每个错误。但是所有错误都只在这 2 个文件中（IOSFWD 和 atlconv.h"）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:41:23.777

您通常可以假设编译器附带的头文件是正确的，尤其是当它是一个经常使用的头文件时，例如`<iosfwd>`. 但是，编译器有时会在包含标准头文件之前出现错误时报告错误。例如，一个未封闭的命名空间或类，即缺少`}`可能会产生这种效果（这就是我在你的情况下开始寻找的）或在类定义之后缺少分号。

# r - 添加变量，同时使用变换函数忽略 NA

> ID：12139431
> 
> 赞同：4
> 
> 时间：2012-08-27T09:32:31.543
> 
> 标签：r

我有一个包含大量变量的数据框。我通过将一些旧变量加在一起来创建新变量。我用来这样做的代码是：

```
name_of_data_frame<- transform(name_of_data_frame, new_variable=var1+var2 +....) 
```

当变换在其中一个观察中遇到 NA 时，它会在新变量中返回“NA”，即使它添加的其他一些变量不是 NA。

例如 if `var1= 4`, `var2=3`, `var3=NA`, then using `transform`, if I did `var1+var2+var3`it would give out `NA`，而我希望它给我 7。

我不想`NA`在数据框中将我的 s 重新编码为零，因为我可能需要稍后再参考`NA`s，所以不想将`NA`s 与真正的观察结果混淆`0`。

`NA`关于如何以上述方式使用转换函数绕过 R 处理 s 的任何帮助都会很棒（或者如果有替代函数可以使用，那也很棒）。

请注意，我并不总是对彼此相邻的变量求和，我还经常对变量进行除法、乘法、减法等。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T10:33:37.303

我的第一个直觉是建议使用`sum()`，因为那时你可以使用`na.rm`参数。但是，这不起作用，因为`sum()`将它的参数减少为单个标量值，而不是向量。

这意味着您需要编写一个`parallel sum`函数。我们称它为`psum()`，类似于基本 R 函数`pmin()`或`pmax()`：

```
psum <- function(..., na.rm=FALSE) { 
  x <- list(...)
  rowSums(matrix(unlist(x), ncol=length(x)), na.rm=na.rm)
} 
```

* * *

现在设置一些数据并用于`psum()`获取所需的向量：

```
dat <- data.frame(
  x = c(1,2,3, NA),
  y = c(NA, 4, 5, NA))

transform(dat, new=psum(x, y, na.rm=TRUE))
   x  y new
1  1 NA   1
2  2  4   6
3  3  5   8
4 NA NA   0 
```

* * *

同样，您可以定义 a `parallel product`，或者`pprod()`像这样：

```
pprod <- function(..., na.rm=FALSE) { 
  x <- list(...)
  m <- matrix(unlist(x), ncol=length(x))
  apply(m, 1, prod, na.rm=TRUE)
} 

transform(dat, new=pprod(x, y, na.rm=TRUE))
   x  y new
1  1 NA   1
2  2  4   8
3  3  5  15
4 NA NA   1 
```

* * *

此示例`pprod`为您想要做的事情提供了一个通用模板：创建一个函数，用于`apply()`将输入矩阵汇总到所需的向量中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T11:10:18.090

使用`rowSums`并`prod`可以帮助您。

```
set.seed(007) # Generating some data
DF <- data.frame(V1=sample(c(50,NA,36,24,80, NA), 15, replace=TRUE),
                 V2=sample(c(70,40,NA,25,100, NA), 15, replace=TRUE),
                 V3=sample(c(20,26,34,15,78,40), 15, replace=TRUE))

transform(DF, Sum=rowSums(DF, na.rm=TRUE)) # Sum (a vector of values)
transform(DF, Prod=apply(DF, 1, FUN=prod, na.rm=TRUE)) # Prod (a vector of values)

# Defining a function for substracting (resta, in spanish :D)
resta <- function(x) Reduce(function(a,b) a-b,  x <- x[!is.na(x)])
transform(DF, Substracting=apply(DF, 1, resta))

# Defining a function for dividing 
div <- function(x) Reduce(function(a,b) a/b,  x <- x[!is.na(x)])
transform(DF, Divsion=apply(DF, 1, div)) 
```

# encryption - 加密数据全球平台

> ID：12139436
> 
> 赞同：2
> 
> 时间：2012-08-27T09:32:41.617
> 
> 标签：encryption, javacard

我正在向`0x80`小程序发送没有 CMAC（CLA 字节 =）的 APDU。我正在使用 SCP02 i55。`SecureChannel.encryptData()`我需要使用该功能加密数据。我不想手动加密它，我需要 Global Platform 加密数据，然后我将使用正确的会话密钥对其进行解密（我确信它们是经过精心计算的）。

我正在使用以下代码来加密 APDU 缓冲区。

```
byte buffer = apdu.getBuffer();
buffer[0] = 20;
short lc = chan.encryptData(buffer, (short) 0, (short) 1);
apdu.setOutgoingAndSend((short) 0, lc); 
```

这会引发一个安全状态不满足异常 ( `0x6982`)，我期望响应 APDU 带有加密 20。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T21:46:46.493

您忘记包装状态字节。从标准：

> 小程序负责在响应数据的末尾附加预期的状态字节，以便它们受到安全消息的保护；

# ruby-on-rails - 访问 current_user 的对象时如何应用排序和分页？

> ID：12139440
> 
> 赞同：0
> 
> 时间：2012-08-27T09:32:57.070
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sorting, pagination, kaminari

我正在使用 Rails 3.2 和 Kaminari 进行分页。我使用相同的控制器操作（索引）来呈现特定用户的所有文章和所有文章。我的控制器代码如下所示：

```
 def index
    @articles = (params[:mine] == "true") ? current_user.articles : Article.search(params[:search], :page => params[:page])

    respond_to do |format|
      format.html
      format.json { render json: @articles }
    end
  end 
```

在我的文章模型中：

```
 def self.search(search, opts)
    if search.present?
      where("category LIKE ? OR article_type LIKE ?", "%#{search}%","%#{search}%").page(opts[:page]).per(25)
    else
      page(opts[:page]).per(25)
    end
  end 
```

我的问题是在显示 current_user 的文章时我不知道如何应用排序和分页。顺便说一下，排序的代码还没有。使用当前代码，在将 mine 参数设置为 true 的情况下访问索引操作时，出现此错误“#Article 的未定义方法 `current_page'”。

所以我的问题是你在使用时如何应用排序和分页`current_user.articles`？示例代码真的很有帮助。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:37:42.850

我想你应该用范围替换你的类方法：

```
scope :search, lambda {|search, opts|
  if search.present?
    where("category LIKE ? OR article_type LIKE ?", "%#{search}%","%#{search}%").page(opts[:page]).per(25)
  else
    page(opts[:page]).per(25)
  end
} 
```

然后：

```
source    = (params[:mine] == "true") ? current_user.articles : Article
@articles = source.search(params[:search], :page => params[:page]) 
```

# php - 根据下一个字段中的值选择或不选择字段

> ID：12139444
> 
> 赞同：0
> 
> 时间：2012-08-27T09:33:14.230
> 
> 标签：php, mysql, sql

从这样的表（这只是在这里）：

```
p_add  | p_add_s | p_phone | p_phone_s | p_user_id //0 = show 1= Hide
Address| 0       | 12345   | 1         | 1
Addr   | 0       | 12345   | 1         | 2 
```

我该如何选择：

```
 select p_add (if p_add_s = 0), p_phone (if p_phone_s=0) from table where p_user_id=1
or
    select p_add, p_phone from table where p_user_id=1 (if p_add_s = 0) and (if p_phone_s = 0) 
```

这些是不正确的。我把它们包括在内只是为了让你有一个想法。

实际上，如果 _s 的值为 0，我只需要数据。

这可以使用sql完成还是必须使用php来完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:37:06.130

我认为您正在寻找 mysql IF 语法：

```
select if(p_add_s=0, p_add, 'Address Private'),  if(p_phone_s=0, p_phone, 'Phone Private') from myTable 
```

如果满足条件，则返回中间部分，否则返回最后一个。

或者，根据您的第二个查询：

```
select p_add, p_phone from table where p_user_id=1 and p_add_s = 0 and p_phone_s = 0 
```

请注意，这不会返回where 子句中的*所有*条件都不满足的行，因此 if 语句可能会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:36:01.367

```
select p_add, p_phone from table where p_user_id=1 and p_add_s=0 and p_phone_s=0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T09:37:32.537

```
SELECT p_add FROM yourtable
WHERE p_user_id = 1
AND p_add_s = 0
AND p_phone_s = 0 
```

不要忘记使用[PDO](http://php.net/manual/en/book.pdo.php)。

# mysql - “IN”子句中的多个内联变量

> ID：12139445
> 
> 赞同：0
> 
> 时间：2012-08-27T09:33:19.470
> 
> 标签：mysql, sql

我有一个表，其中所有数据都按行存储。

```
key      name   field   value
11       sam    state   1
11       fred   state   1
21       sam    state   3
21       fred   state   1
11       sam    dist    1
11       fred   dist    1
21       sam    dist    1
21       fred   dist    1 
```

我需要一个查询来获取`"name" having dist = 1 with state = 1`.

以下几行的内容.. 从表中选择计数（值），其中字段 = 'dist' 和值 = 1 和**键，名称** 在（选择**键，名称** 从表中字段 = '状态' 和值 =1）

在上面的示例中，我希望答案为“3”（带有 key = 21 的 sam 不符合条件）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:37:55.233

尝试这个：

```
select count (value) 
from table a
where  field = 'dist' 
and value = 1 
and exists
(
  select 1 from table n where field = 'state' and value =1
  and a.key = b.key 
  and a.name = b.name
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:38:11.263

```
select count(distinct yourtable.name)
from yourtable
inner join
(
    select key, name from yourtable
    where field='dist' and value = 1
) dist1
    on yourtable.key = dist1.key 
    and yourtable.name = dist1.name
where field='state' and value = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T09:48:28.923

使用连接：

```
select count(distinct key, name) from table t1
inner join table t2
  on t2.key = t1.key and t2.name = t1.name and t2.field = 'state' and t2.value = 1
where t1.field = 'dist' and t1.value = 1 
```

# mysql - 出现两个或多个指定值的行数

> ID：12139449
> 
> 赞同：6
> 
> 时间：2012-08-27T09:33:34.073
> 
> 标签：mysql, sql

我有下表：

```
n1|n2|n3|n4|n5
 1| 5| 4| 7|26
26|80|75| 1|10
 5| 3| 2| 1|4
45|26| 1| 3|66 
```

我正在尝试获取出现两个或多个指定值的行数。例如，在上表中，26 和 1 出现在 3 行中。

在 mySQL 中是否有一种快速的方法来执行此操作，或者我应该在 PHP 中构建一些函数？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T09:37:59.603

```
SELECT COUNT(*) FROM your_table
WHERE 1 IN (n1,n2,n3,n4,n5) AND 26 IN (n1,n2,n3,n4,n5) 
```

# apache-flex - Flex vGroup 轮换

> ID：12139451
> 
> 赞同：0
> 
> 时间：2012-08-27T09:34:08.230
> 
> 标签：apache-flex, rotation

我正在尝试旋转 VGroup 使其平行于倾斜箭头（这是一个自定义组件）

如果在组件内，我使用

> this.rotation=20;

然后，屏幕上什么也没有显示。

我也尝试过使用 Matrix 类，但这也没有用。

请求帮助

# java - 如何使用剪辑来减少绘画时间？

> ID：12139461
> 
> 赞同：3
> 
> 时间：2012-08-27T09:34:34.063
> 
> 标签：java, swing, bufferedimage, clip, repaintmanager

我正在尝试使用剪辑来减少 CPU 负载。

但剪辑在屏幕上留下了一些我似乎无法摆脱的垃圾。此外，打开和关闭剪辑似乎对 cpu 负载没有影响。

在任一情况下。大部分时间似乎都花在了重绘管理器和绘制缓冲图像上。

```
import static java.lang.Math.*;
import static java.awt.Color.*;
import java.awt.*;
import java.awt.event.*;
import java.awt.geom.*;
import java.awt.image.*;
import java.lang.reflect.InvocationTargetException;
import java.util.*;
import java.util.concurrent.ScheduledThreadPoolExecutor;
import java.util.concurrent.TimeUnit;
import java.util.logging.Logger;
import javax.swing.*;
class Piece {
    protected Piece(int piece,int pieces,int radius) {
        this.piece=piece;
        this.start=piece*2*PI/pieces;
        this.end=(piece+1)*2*PI/pieces;
        points=new ArrayList<Point>((int)ceil(4*PI*radius*radius/pieces));
    }
    public double start() {
        return start;
    }
    public double end() {
        return end;
    }
    public int piece() {
        return piece;
    }
    public static double angleToPiece(int piece,int pieces) {
        return piece*2*PI/pieces;
    }
    public String toString() {
        return piece+" "+start+" "+end+" "+start*180/PI;
    }
    protected final double start;
    protected final double end;
    final int piece;
    public final ArrayList<Point> points;
}
class P extends Piece {
    P(int piece,int pieces,int radius) {
        super(piece,pieces,radius);
        shape=new Arc2D.Double(0,0,2*radius,2*radius,toDegrees(start),toDegrees(end-start),Arc2D.PIE);
        shapeAndPrevious=new Arc2D.Double(0-extra,0-extra,2*radius+extra,2*radius+extra,toDegrees(start-2*PI/pieces)-extrad,toDegrees(2*(end-start))+2*extrad,Arc2D.PIE);
    }
    final Shape shape,shapeAndPrevious;
    static final int extra=0;
    static final int extrad=0;
}
class Y extends JPanel {
    Y(int radius,int nPieces,long period) {
        this.radius=radius;
        this.nPieces=nPieces;
        this.period=period;
        d=new Dimension(2*radius,2*radius);
        lhsOrigin=new Point(radius,radius);
        // setOpaque(false);
    }
    private void init() {
        pieces=new P[nPieces];
        for(int i=0;i<nPieces;i++)
            pieces[i]=new P(i,nPieces,radius);
        while(gc==null)
            Thread.yield(); // wait for gui to be constructed
        bi=gc.createCompatibleImage(d.width,d.height);
        stpe.scheduleAtFixedRate(new Runnable() {
            @Override public void run() {
                dtrt();
            }
        },0,1,TimeUnit.MILLISECONDS);
    }
    private int dt() {
        return (int)(System.currentTimeMillis()-t0);
    }
    private long dtNanos() {
        return System.nanoTime()-t0Nanos;
    }
    private double dtMillis() {
        return dtNanos()/1000000.;
    }
    private void paintRadialLine(Graphics2D g) {
        g.setColor(green);
        if(line2d!=null)
            if(paintRadialLine)
                g.draw(line2d);
    }
    private void paintPieceShape(Graphics g,int index) {
        g.setColor(red);
        if(paintPieceShape) {
            ((Graphics2D)g).draw(pieces[index].shape);
            g.setColor(yellow);
            //((Graphics2D)g).fill(pieces[index].shape);
        }
    }
    @Override public void paintComponent(Graphics g) {
        // super.paintComponent(g);
        Shape s=g.getClip();
        if(clip!=null) {
            AlphaComposite ac=AlphaComposite.getInstance(AlphaComposite.SRC_OVER,.75f);
            ((Graphics2D)g).setComposite(ac);
            ((Graphics2D)g).clip(clip);
        }
        paintBufferedImage(g);
        Color old=g.getColor();
        paintPieceShape(g,piece);
        paintRadialLine(((Graphics2D)g));
        g.setColor(old);
        g.setColor(Color.white);
        g.drawLine(radius,0,radius,2*radius);
        g.drawLine(0,radius,2*radius,radius);
        if(clip!=null)
            ((Graphics2D)g).setClip(s);
    }
    private void paintBufferedImage(Graphics g) {
        if(bi!=null)
            g.drawImage(bi,0,0,null);
    }
    @Override public Dimension getPreferredSize() {
        return new Dimension(d);
    }
    private void dtrt() {
        piece=(int)(dtNanos()%period*nPieces/period);
        if(!(0<=piece&&piece<nPieces)) {
            System.out.println("!(0<=piece&&piece<nPieces)");
            throw new RuntimeException("!(0<=piece&&piece<nPieces)");
        }
        long dtNanos=dtNanos();
        if(piece!=previous) {
            if(dtNanos()<=period)
                log.info("piece="+piece);
            log.fine("piece "+piece+" "+dtMillis()+" "+round(dtMillis())+" "+(dt()-dtMillis())+" "+dtNanos()%(period/nPieces)+" "+period/nPieces);
            if(useClip)
                clip=piece==0?null:pieces[piece].shapeAndPrevious;
            // repaint();
            previous=piece;
        }
        double angle=2*PI*((dtNanos()%period)/(double)period);
        Point2D.Double pd=new Point2D.Double((double)radius*cos(angle),radius*sin(angle));
        int x=(int)rint(pd.x);
        int y=(int)rint(pd.y);
        Point p=new Point(x+radius,radius-y);
        line2d=new Line2D.Double(lhsOrigin,p);
        if(false&&useClip&&round(dtNanos()%(period/nPieces))!=0)
            clip=angle==0?null:line2d;
        if(paintImmediately)
            paintImmediately(0,0,2*radius,2*radius);
        else repaint();
    }
    private void createAndShowGUI() {
        System.out.println("start constructing gui");
        setSize(d);
        setPreferredSize(d);
        Frame f=new Frame("X");
        f.setUndecorated(true);
        f.addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent e) {
                System.exit(0);
            }
        });
        f.add("Center",this);
        gc=getGraphicsConfiguration();
        f.pack();
        if(System.getProperty("user.name").equals("ray")) {
            Rectangle rectangle=f.getBounds();
            rectangle.x+=-700;
            rectangle.y+=1080;
            f.setBounds(rectangle);
        }
        f.setVisible(true);
        System.out.println("end constructing gui");
    }
    public static void main(String[] args) throws InvocationTargetException,InterruptedException {
        RepaintManager rm;
        Y x0;
        if(false)
            x0=new Y(512,400,2000*1000000l); // real app
        else x0=new Y(512,16,10000*1000000l); // easier to see
        final Y x=x0;
        x.log=Logger.getLogger("");
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                x.createAndShowGUI();
            }
        });
        x.init();
    }
    private GraphicsConfiguration gc;
    private BufferedImage bi;
    private P[] pieces;
    private int previous,piece,n;
    private final long t0=System.currentTimeMillis(),t0Nanos=System.nanoTime();
    private final int radius,nPieces;
    private final long period;
    private final Dimension d;
    private final Point lhsOrigin;
    private Shape clip;
    private boolean useClip=true;
    private boolean paintRadialLine=true;
    private boolean paintPieceShape=true;
    private boolean paintImmediately=false; 
    private final ScheduledThreadPoolExecutor stpe=new ScheduledThreadPoolExecutor(2);
    private Line2D line2d;
    private Logger log;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:00:47.900

问题似乎是`P.shapeAndPrevious`延伸得不够远。增加它的大小似乎会使多余的东西消失。

```
class P extends Piece
{
    P(int piece, int pieces, int radius)
    {
        super(piece, pieces, radius);
        shape = new Arc2D.Double(0, 0, 2 * radius, 2 * radius,
            toDegrees(start), toDegrees(end - start), Arc2D.PIE);       
        shapeAndPrevious = new Arc2D.Double(0 - extra,
            0 - extra,
            2 * radius + extra,
            2 * radius + extra,
            toDegrees((start - 2 * PI / pieces)) - extrad,
            toDegrees((2 * (end - start))) + 2 * extrad,
            Arc2D.PIE);
}

    ... 
```

至

```
class P extends Piece
{
    P(int piece, int pieces, int radius)
    {
        super(piece, pieces, radius);
        shape = new Arc2D.Double(0, 0, 2 * radius, 2 * radius,
            toDegrees(start), toDegrees(end - start), Arc2D.PIE);           
        shapeAndPrevious = new Arc2D.Double(0 - extra,
            0 - extra,
            2 * radius + extra + 10, // add some extra
            2 * radius + extra + 10, // add some extra
            toDegrees((start - 2 * PI / pieces) - 1) - extrad,  // add some extra
            toDegrees((2 * (end - start)) + 1) + 2 * extrad,  // add some extra
            Arc2D.PIE);
} 
```

**更新**

实际上你似乎已经意识到了这个问题，因为你有变量来做我硬编码的事情。所以整个`P`班级变成了

```
class P extends Piece
{
    P(int piece, int pieces, int radius)
    {
        super(piece, pieces, radius);
        shape = new Arc2D.Double(0, 0, 2 * radius, 2 * radius,
                toDegrees(start), toDegrees(end - start), Arc2D.PIE);
        shapeAndPrevious = new Arc2D.Double(0 - extra,
                0 - extra,
                2 * radius + extra,
                2 * radius + extra,
                toDegrees((start - 2 * PI / pieces)) - extrad,
                toDegrees((2 * (end - start))) + 2 * extrad,
                Arc2D.PIE);
    }

    final Shape shape, shapeAndPrevious;
    static final int extra = 15; // add some extra
    static final int extrad = 25; // add some extra
} 
```

这似乎仍然在未绘制弧位的右下角分位数上留下问题，但这肯定与剪辑有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T09:59:11.423

我正在研究您的代码，但与此同时...

首先，我会看一下[在 AWT 和 Swing 中的绘画](http://java.sun.com/products/jfc/tsc/articles/painting/index.html)

您会发现剪切矩形已设置为组件的高度/宽度。

`Graphics2D.clip(Shape)`“将当前剪辑与指定形状的内部相交并将剪辑设置为结果交集” - 所以我认为它没有做你想要的。

**更新**

抱歉，我知道这不是在回答问题，但我强调了其他一些效率低下的领域

来自“AWT Swing 中的绘画”

> 程序不应直接调用此方法（painImmediately），除非对实时绘画有有效的需求。这是因为异步 repaint() 会导致多个重叠请求被有效折叠，而直接调用 paintImmediately() 不会

此外，再次阅读“Painting in AWT & Swing”文档后，我认为您误解了剪辑的潜在好处。

基本上，您似乎认为使用剪辑会减少绘制时间，因为剪辑之外的区域不会被渲染。虽然部分正确（它们不会出现在屏幕上），但它们仍会被渲染到`Graphics`上下文中（并占用时间被渲染）

相反，您应该尝试做的是根据剪辑形状的相交确定不应该绘制的内容，因此只绘制那些落在效果剪辑区域内的元素。

> 渲染复杂输出的组件应该巧妙地使用剪辑矩形将绘图操作缩小到与剪辑区域相交的那些。

# c - 乐高积木NXT-G可视化编程与NXC类C编程的区别

> ID：12139466
> 
> 赞同：0
> 
> 时间：2012-08-27T09:34:47.590
> 
> 标签：c, nxt, lego, mindstorms, nxc

我正在接近乐高 NXT 编程，我从非常好的网站[http://nxtprograms.com开始](http://nxtprograms.com). 特别是我遵循了简单的 Segway 的说明，将光传感器作为平衡传感器 (http://nxtprograms.com/NXT2/segway/index.html)。我研究了他的 (Dave Parker) NXT-G 程序，并成功地在他的机器人和更简单的自定义版本（没有“驱动程序”）上复制。一切正常，无论是他的程序还是我的程序。我很快就转向了 NXC 编程，因为我已经了解 C 语言并且想利用更大的潜力。我用相同的 PID 常数和计算很好地复制了平衡算法。结果是 C 程序不起作用：机器人自我平衡 1 或 2 秒，振动比 NXT-G 的振动大，然后摔倒。

我比较了 NXT-G 和 C 基本逻辑，没有发现任何区别。所以我想知道在我的程序中，电机控制是否有问题。我想控制电机的 NXT-G 图形框做的更多是简单地调用 OnFwdSync(...)/OnRevSync(...)。这可以解释为什么我的程序会产生大的初始振荡。

有没有人有 NXC 程序驱动那个简单的 segway-lego 的例子，或者可以解释为什么我的程序中的电机控制失败？在底部我附上了我的程序的源代码。

谢谢。

```
#define KP 25
#define KI 1
#define KD 10
#define KO 0.5
#define LSAMPLE 100
//#include "MotorActions.nbc"

int balance(const int RIF)
{
  int output = 0;
  int previous_error = 0;
  int error = 0;
  int I = 0;
  int D = 0;
  int counter = 0;
  int actual;

  while (true)
  {
    actual = SENSOR_3;
    error = actual - RIF;
    counter++;
    I += error;
    D = (error - previous_error);
    previous_error = error;
    /**
     *  Compute de PID compensation
     */
    output = KO * (KP * error + KI * I + KD * D);
    if ((output > 1000) || (output < -1000)) 
      break;
    if (output < 0)
      OnFwdSync(OUT_BC, -output, 0);
    else
      OnRevSync(OUT_BC, output, 0);
  }
  return (counter);
}

int read_light()
{
  int L = 0;
  int ctr = 0;

  while (ctr < LSAMPLE)
  {
    L += SENSOR_3;
    ctr++;
    Wait(10);
  }
  return (L / LSAMPLE);
}

task main()
{
  int i = 0;
  int RIF;
  int count;

  while (i++ < 3)
  {
    //PlaySound(SOUND_LOW_BEEP);
    Wait(800);
  }
  Wait(400);
  //PlaySound( SOUND_DOUBLE_BEEP );
  SetSensorColorRed(IN_3);
  ClearSensor(SENSOR_3);
  RIF = SENSOR_3;
  count = balance(RIF);
  Off(OUT_BC);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T22:33:04.237

尝试改变你的常数。尝试将 KP 提高到更大的值，32，也许？

# asp.net - 如何从 SSRS 获取无记录到 ASPX/ASCX

> ID：12139467
> 
> 赞同：0
> 
> 时间：2012-08-27T09:34:47.733
> 
> 标签：asp.net, asp.net-mvc, reporting-services, export-to-excel

我有一个 SSRS 报告，我只是从我的 aspx 中使用它并直接将其导出到 excel 中，而无需使用 ReportViewer。现在我想检查我的 DataSet 是否有价值。我可以调用我在 SSRS 中使用的 SP 来获取计数。但我不想使用它。由于我不想在没有记录或数据集为空时导出到excel......！

有谁知道如何将“无记录”从 SSRS 返回到 ASPX/ASCX？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:38:10.307

一个更简单的方法是

1.  从 .net 代码中的存储过程中获取数据
2.  检查数据集中的记录数
3.  如果有记录，传给报告
4.  如果没有，显示“无记录”消息

这是设置数据源的方法

```
reportViewer.LocalReport.DataSources.Add(
    new Microsoft.Reporting.WinForms.ReportDataSource(
    "MyData", dataset.Tables[0]));
reportViewer.RefreshReport(); 
```

您现在可以将此数据导出到 Excel。

# android - Android 是否支持 MVC（模型视图控制器）结构？

> ID：12139469
> 
> 赞同：8
> 
> 时间：2012-08-27T09:34:51.460
> 
> 标签：android, model-view-controller

我想知道，如果 Android 支持 MVC（模型视图控制器）结构？如果支持那么 1\. 什么是控制器？2.什么是型号？3\. 什么是 View ？

请清除我。我对此有些困惑。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-27T09:56:04.867

[Android 上使用了哪些设计模式？](https://stackoverflow.com/a/6770903/432903)

> **模型视图控制工作正常**
> 
> 实际的`Activity`类并没有扩展 android 的`View`类，但它确实处理向用户显示窗口并处理该窗口的事件（`onCreate`等`onPause`）。
> 
> 这意味着，当您使用**MVC 模式**时，您的控制器实际上将是**一个伪 View-Controller**。因为它正在处理向用户显示一个窗口，以及您添加到其中的其他视图组件`setContentView`，并且还处理至少各种活动生命周期事件的事件。
> 
> **在 MVC 中，控制器应该是主入口点**。如果将其应用于 android 开发时，这有点值得商榷，因为它`activity`是大多数应用程序的自然入口点。

## 所以，android中的伪MVC：

**模型**= 具有主要业务逻辑的实体或类

**View** = 布局、资源和小部件，例如`EditText`

**控制器**= `Activity`,`Adaptor`

![在此处输入图像描述](../Images/9582031547e247dfbf0831ff4cec6217.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T09:37:54.267

**模型**= 内容提供者。

**控制器**= 活动、片段或服务。

**视图**= XML 布局。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-27T09:43:00.863

MVC 已经在 Android 中实现

View = 布局、资源和内置类，如从 android.view.View 派生的 Button。

控制器 = 活动和片段

模型 = 实现应用程序逻辑的类

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-08T13:38:29.707

# 不是真正的 MVC，而是通过 Room 和 LiveData 变得更加 MVC

在经典 MVC 中，控制器是关于决策的，即下一步要运行哪个动作。视图从模型中读取数据并更新它自己的字段。

在 Android 活动中，两者都在做，它们决定运行什么动作来响应事件，并设置布局的字段。他们还从模型中读取数据并连接小部件。这些活动结合了经典控制器和经典视图两者的逻辑任务。

这就是为什么在大多数情况下我不会谈论 MVC。控制器和视图之间没有明确的分离。Java 代码和 XML 资源之间有一个清晰的分离。这是有道理的，因为在更大的团队中，不同的人负责视觉布局和编程。

您仍然可以编写自己的视图组件并将这部分代码作为视图来处理。它只是经典视图的被动部分，而逻辑已经在活动和片段中加入了控制器。我不会谈论视图，而是组件或小部件。越智能的小部件，它们再次占用的经典视图的逻辑就越多。

另一方面，如果你应用像 Room 这样的库，Android 会再次变得更像 MVC。Room 和 LiveData 使视图能够观察模型的变化，一直到数据库的变化。如果您干净地分离视图内容并将控制器减少到决策制定，您可以以某种方式构建您的架构，它真的值得再次命名为 MVC。

## 底线

这取决于开发商。可以将真正的 MVC 应用于 Android，但这不是默认情况。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-08T00:38:27.163

实现 MVC 模式的主要目标是，这样做可以让您稍后“拉出”其中任何一个，然后添加一个新的，而无需对其他两个进行很少或没有必要的更改。

**模型**：所有关于数据。操作什么，存储什么以及如何操作。

**视图**：关于 UI 或演示的所有内容。显示什么以及如何显示。

**控制器**：事件处理程序。指示其他两个响应事件何时运行。

在 Android 中，MVC 的这种实现具有扩展 Activity 类的类形式的控制器。毕竟，正是这个类最初接收构成 Android Activity 生命周期的“事件”（即 onStart()、onCreate()、onSuspend()、onStop()、onResume()、onDestroy）。这个生命周期可能会随着 Android 的发展而改变，因此将其表示为 MVC 模式的控制器组件是有意义的。

同样，通过这个 MVC 实现，我可以取出三个组件中的任何一个，然后放入一个全新的界面（视图）、一个全新的数据库（模型）或一个新的活动生命周期（控制器），而无需更改另外两个。唯一需要的是每个组件都尊重下面列出的样板模板。

在这个实现中，三个MVC组件分别用三个java类来表示：appView.java、appController.java、appModel.java

查看每个类时，记下成员变量 mController、mAppView 和 mAppModel，并查看它们在每个 java 文件中的引用方式和时间。这些成员变量是允许每个组件相互引用的“挂钩”。

此外，您会注意到 mAppModel 进一步分解并使用了一个名为 dbHelper 的附加类。这使您可以将“什么”数据与“如何”操作和存储数据分开。

```
public class appController extends Activity {

    appView mAppView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mAppView = new appView(this);

        mAppView.onCreate(savedInstanceState);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {

        return mAppView.onCreateOptionsMenu(menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {

        boolean result;

        switch (item.getItemId()) {
            case ....

                return true;

            case ....

                return true;

            default:

                result = mAppView.onOptionsItemSelected(item);
        }

        if ( !result )
            result = super.onOptionsItemSelected(item);

        return result;
    }

    @Override
    public void onCreateContextMenu(ContextMenu menu, View v, ContextMenu.ContextMenuInfo menuInfo) {

        mAppView.onCreateContextMenu(menu, v, menuInfo);
    }

    @Override
    public boolean onContextItemSelected(MenuItem item) {

        return mAppView.onContextItemSelected(item);
    }

    // When a startActivityForResult() is called
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        mAppView.onActivityResult(requestCode, resultCode, data);
    }

    @Override
    protected void onStop(){
        super.onStop();

        mAppView.onStop();
    }

    @Override
    protected void onRestart(){
        super.onRestart();

        mAppView.onRestart();
    }

    @Override
    protected void onDestroy(){
          super.onDestroy();

          mAppView.onDestroy();

          mAppView = null;
    } 
```

控制器 appController 实现了大部分“活动生命周期”方法，并依次调用视图 appView 中的方法。这意味着标准的生命周期方法，onStop、onResume、onDestroy 等不仅在 Controller 中实现，而且在此 MVC 模式的 View 部分中实现。稍后您会看到模型部分也是如此。

您可以在下面的 View 实现中看到 appView，成员变量 mController 用于访问 Activity 方法，但允许将 Activity（控制器）与 UI（布局、菜单等）分离。

```
public class appView {

    private Activity mController;

    private Context mContext;

    private appModel mAppModel;

    public appView(Activity activity) {
        this((Context) activity);

        mController = activity;
    }

    // This can be called when there is not activity available.
    public appView(Context context){

        mContext = context;

        mAppModel = new appModel(this);
    }

    protected void onCreate(Bundle savedInstanceState) {

        mController.setContentView(R.layout.whatever_you_want_activity);

        btnNewToDo = (Button) mController.findViewById(.....

        // The New button.
        btnNewToDo.setOnClickListener(......

        lvToDos = (ListView) mController.findViewById(......

        // One click will edit that selected item.
        lvToDos.setOnItemClickListener(........
    }

    public boolean onCreateOptionsMenu(Menu menu) {

        MenuInflater inflater = mController.getMenuInflater();

        inflater.inflate(R.menu.whatever_you_want_menu, menu);

        return true;
    }

    public boolean onOptionsItemSelected(MenuItem item) {

       ....
    }

    protected void onStop(){

        mAppModel.onStop();
    }

    protected void onRestart(){

        mAppModel.onRestart();
    }

    protected void onDestroy() {

        mController = null;

        mContext = null;

        if(mAppModel != null ){

            mAppModel.onDestroy();

            mAppModel = null;
        }
    }
} 
```

型号如下所示。查看此类如何在其构造函数中接收视图和控制器。控制器被视为 Context 类型，而不是 Activity。这允许您涉及任何 Context 类型的对象，而不一定是 Activity 对象。

此外，您将看到在构造函数中引入了一个帮助器类 dbHelper。

```
public class appModel {

    private appView mAppView;
    private Context mContext;

    // Holds the database helper
    private dbHelper mDBHelper;

    public appModel(appView appView){

        mAppView = appView;

        mContext = mAppView.getContext();

        mDBHelper = new dbHelper(mContext);
    }

    public boolean open() {

        if (mDBHelper == null) return false;

        return mDBHelper.open().isOpen();
    }

    public void close(){

        mDBHelper.close();
    }

    // The App might get destroyed with calling onDestroy, and so close it.
    protected void onStop(){

        // close the db connection...
        close();
    }

    protected void onRestart() {

        // db likely closed.
        open();
    }

    protected void onDestroy(){

        mAppView = null;

        mContext = null;

        mDBHelper.onDestroy();

        mDBHelper = null;
    }
} 
```

正如您在下面看到的，SQLite 是此应用程序中使用的数据库。但是，切换出这个帮助程序类 dbHelper，您可以使用完全不同的数据库，而其他组件也不明智。

下面包括一些基本方法（打开、关闭等），可让您了解此处执行的功能。此外，请注意 onDestroy() 方法在这里关闭数据库连接。它由上面的 View 调用，当它被销毁时又由 Controller 调用。

正是这个帮助类知道数据库中字段的名称。有了这个实现，视图、控制器甚至模型都不需要知道使用的数据库类型，甚至不需要知道字段名称。

```
public class dbHelper extends SQLiteOpenHelper {

    private SQLiteDatabase mDB;

    private Context mContext;

    static final String DATABASE_NAME = "whatever";

    static final String DATABASE_FILE = DATABASE_NAME + ".db";

    static final String DBKEY_FIELD = "rowid";

    static final int DATABASE_VERSION = 5;

    // SQL Statement to create a new database.
    private static final String DATABASE_CREATE = "CREATE TABLE IF NOT EXISTS " + DATABASE_NAME
            + "(....  );";

    // SQL statement used to upgrade the database.
    private final String ALTER_TABLE = "ALTER TABLE " + DATABASE_NAME + " ADD COLUMN anewfield VARCHAR;";

    private final String SELECT_ALL = "SELECT " + DBKEY_FIELD + " AS _id, * FROM " + DATABASE_NAME + " ORDER BY somefield ASC";

    private static final String DROP_TABLE = "DROP TABLE IF EXISTS " + DATABASE_NAME;

    public dbHelper(Context controller) {
        super(controller, DATABASE_FILE, null, DATABASE_VERSION);

        mContext = controller;
    }

    // Called when no database exists or if there is a new 'version' indicated.
    @Override
    public void onCreate(SQLiteDatabase db) {

        db.execSQL(DATABASE_CREATE);
    }

    public dbHelper open() {

        try {

            mDB = getWritableDatabase();

        } catch (SQLException ex) {

            if (mDB != null && mDB.isOpen()) {

                mDB.close();
            }

            if (mDB != null) {

                mDB = null;
            }
        }

        return this;
    }

    public boolean isOpen() {

        return mDB != null && mDB.isOpen();
    }

    public void close() {
        super.close();

        // It's good to lose the reference here with the connection closed.
        mDB = null;
    }

    protected void onDestroy() {

        close();

        // Just making sure.
        mDB = null;

        mContext = null;
    }

    public SQLiteDatabase getDatabaseInstance() {

        return mDB;
    }

    private Cursor runQuery(String sqlStmt) {

        Cursor records;

        try {

            records = mDB.rawQuery(sqlStmt, null);

        } catch (RuntimeException ex) {

            // If something goes wrong, return an empty cursor.
            records = new MatrixCursor(new String[]{"empty"});
        }

        return records;
    }

    protected boolean dropTable() {

        boolean dropped;

        try {

            mDB.execSQL("DROP TABLE IF EXISTS " + DATABASE_NAME);

            dropped = true;

        } catch (SQLException ex) {

            dropped = false;
        }

        return dropped;
    }

    @Override
    public void onConfigure(SQLiteDatabase db) {
    }

    @Override
    public void onOpen(SQLiteDatabase db) {
    }

    // Called when the database needs to be upgraded to the current version.
@Override
    public void onUpgrade(SQLiteDatabase _db, int _oldVersion, int _newVersion) {

        if ( _oldVersion >= _newVersion){

            Log.w(mContext.getClass().getSimpleName(), "Cannot 'upgrade' from version " + _newVersion + " to " + _oldVersion + ". Upgrade attempt failed.");
        }

        try {

            _db.execSQL(ALTER_TABLE);

        }catch(RuntimeException ex){

            Log.e(mContext.getClass().getSimpleName(), "Database upgrade failed. Version " + _oldVersion + " to " + _newVersion);

            throw ex;
        }

        // Log the version upgrade.
        Log.i(mContext.getClass().getSimpleName(), "Database upgrade. Version " + _oldVersion + " to " + _newVersion);
    }

} 
```

# magento - Magento：同一安装/后端中的第二个商店，第二个 URL

> ID：12139475
> 
> 赞同：0
> 
> 时间：2012-08-27T09:35:22.567
> 
> 标签：magento, dns

如何设置具有多个商店的 Magento 商店？我已经阅读了许多 Mage howto，但似乎我仍然缺少一些基本的 DNS/托管信息。

我使用的链接： [http ://www.crucialwebhost.com/blog/how-to-setup-multiple-magento-stores/](http://www.crucialwebhost.com/blog/how-to-setup-multiple-magento-stores/)

我已经设置了案例语句 en configged te store。但是如何在直接管理员中配置所有域？我现在使用指针，但我看到的是它为 domain2 创建了一个循环。使用 $_SERVER['HTTP_HOST'] 并​​且 domain2 指向 website1。

问题：如何在直接管理员中的整个 Magento 配置之前设置 2 个域？（使这种方法起作用）

谢谢，肖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T07:54:06.223

固定的！

directadmin 中的域指针应使用 ALIAS 框 CHECKED 设置

然后等待一段时间让它更新到他的服务器（也许当我们调试所有选项时等待是诀窍）

一个好的方法是在根目录中使用 phpinfo() 创建一个文件，并在那里查找 HTTP_HOST 的值。它会足够快地告诉你发生了什么

# javascript - node.js 脚本中的 Sqlite SQLITE_MISUSE 错误

> ID：12139481
> 
> 赞同：7
> 
> 时间：2012-08-27T09:35:35.843
> 
> 标签：javascript, node.js, sqlite

当我使用此查询启动代码时，有时我可以看到列出的所有表，有时只有一个，并且总是出现此错误：

查询错误：错误：SQLITE_MISUSE：未知错误

我读过当 SQLITE API 使用不当时会发生 SQLITE_MISUSE 。你能帮我吗，因为我找不到这段代码有什么问题。

编辑。我已经对代码进行了更改以摆脱种族问题。

SQLITE_MISUSE wrror 的消息仍然出现，但是消失的表问题已经消失。我的查询中的种族就是这种情况。

这是代码。

```
var sqlite3 = require("node-sqlite3");
var fs = require('fs');

var query_count;
var init = function (response) {
    var db = new sqlite3.Database("test.db", function() {

        fs.readFile('./assets/sql/initDB.sql', function(err,data){
            if(err) {
                console.error("Could not open file: %s", err);
                return;
            }

            var query = data.toString('utf8');
            queries = query.split(";");

            db.serialize(function() {
                query_count = queries.length;
                for(var i=0; i<queries.length; i++) {
                    queries[i] = queries[i].replace("\r\n","");
                    db.run(queries[i], function(error) {
                        if(error) {
                            console.log("Query Error: "+error);
                        }

                        query_count--;

                        if( query_count <= 0 ) {
                            db.close();
                            listAllTables(response);
                        }
                    });
                }
            });
        });
    });
};

function listAllTables(response) {
    var db = new sqlite3.Database("./assets/sql/test.db", function () {
        db.all("SELECT name FROM sqlite_master WHERE type = 'table'", function (error, records) {
            for(var record in records) {
                response.write(record+": "+records[record]+"\n");
                for(var prop in records[record]) {
                    response.write("\t"+prop+": "+records[record][prop]+"\n");
                }
            }

            response.end();
            db.close();
        });
    });
}

exports.load_customers = function(response) {
    init(response);
}; 
```

查询文件 initDB.sql 是这样的：

```
CREATE TABLE IF NOT EXISTS TemporaryAuthTokens (
  authToken TEXT PRIMARY KEY NOT NULL UNIQUE,
  expireDate NUMERIC NOT NULL);

CREATE  TABLE IF NOT EXISTS User (
  id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL UNIQUE  ,
  login TEXT NOT NULL ,
  pass TEXT NOT NULL ,
  creationDate NUMERIC NOT NULL ,
  authToken TEXT NULL REFERENCES TemporaryAuthTokens(authToken)
  ); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-27T09:52:31.090

你有一个比赛条件；您的最后一个查询（其回调关闭连接）可能会在之前的一个查询完成之前完成，不用说，这会影响之前的查询。您需要重新编写代码，以便最后一个查询*完成*，而不是最后一个查询*开始*，关闭连接（例如，为查询数量设置一个计数器，并让每个查询在完成时递减它。递减它的那个为零关闭连接）。

您可能还想查看`serialize`可用于数据库对象的方法。现在你的初始化查询都是相互独立的，但是如果你开始使用外键约束，如果引用的表还没有创建，你会遇到麻烦，所以你需要强制执行顺序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-12T11:43:36.473

**使用承诺。**

在这里，我从一个表中获取数据并使用这些数据来创建用于插入另一个表的语句。

`serialize()`确实运行 1-by-1，但我希望一个查询的响应用于另一个查询。如果我将`2nd`查询放在回调中，`1st`那么它会给出`SQLITE_MISUSE`错误

```
db.serialize(()=>{

    // QUERY 1 (SELECT) - Get data 
    let promiseGetFoo = new Promise((resolve, reject) => {
      db.all("SELECT * FROM foo", (err, rows) => {
        if (err) {
          console.log(err);
          reject(err);
        } else {
          resolve(rows);
        }
      });
    });

    // QUERY 2 (INSERT) - Use data from QUERY 1
    promiseGetFoo.then((res) => {
      let stmt = (res) => { 
        // code to create INSERT statement 
      }      
      db.run(stmt, (err) => {
        if(err) console.log(err);
        else console.log(">>> Insert DONE");
        closeDb();
      });
    });

});

let closeDb = () => {
    db.close() ;
} 
```

# java - Files#delete(Path) 和 File#delete() 之间的区别

> ID：12139482
> 
> 赞同：21
> 
> 时间：2012-08-27T09:35:39.573
> 
> 标签：java, file-io, nio

我正在使用带有 java 7 update 6 的 Windows-7 并发现这种奇怪的（至少对我而言）行为 -
我有两个文件`E:\delete1.txt`，而且`E:\delete2.txt`都是**只读**文件，当我尝试删除文件时，它会被删除而没有任何问题 -

```
File file = new File("E:\\delete1.txt"); 
assertTrue(file.delete()); 
```

但是当我使用 nio API 删除文件时，如下所示 -

```
Path path = Paths.get("E:\\delete2.txt");
Files.delete(path); 
```

它抛出`java.nio.file.AccessDeniedException`。

为什么使用旧的和新的 nio API 进行相同的操作会有不同的行为？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-02T07:42:12.697

[正如这里](http://mail.openjdk.java.net/pipermail/core-libs-dev/2012-August/011314.html)所讨论的 - 问题是`java.io.File`有很多奇怪之处，特别是在 Windows 上。在这种情况下，它会在删除文件之前重置文件属性，因此这就是它不会像预期的那样失败的原因。这是可以追溯到> 10年的行为，因此现在改变是有风险的。它还有其他几个类似的奇怪之处，这只是它没有重新实现以使用新 API 的原因之一。

如果我们尝试从命令窗口中删除文件，则 windows 会抛出相同的（拒绝访问）错误，但文件会从资源管理器窗口中删除。看起来它`File#delete()`有一个错误的实现，`Files#delete(Path)`应该首选 new 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T10:33:49.697

> 为什么使用旧的和新的 nio API 进行相同的操作会有不同的行为？

因为在新 API 的设计中，为类似操作精确模拟旧 API 的行为显然不是一个重要目标。鉴于 nio 文件系统 API 的主要目标是提供一个具有一些完全不同的底层概念和许多新功能的*新*API，这对我来说似乎很正常。

# c# - Log4Net，如何在我的日志中添加自定义字段

> ID：12139486
> 
> 赞同：100
> 
> 时间：2012-08-27T09:36:00.293
> 
> 标签：c#, log4net, appender

我使用 log4net.Appender.AdoNetAppender 附加程序。
我的 log4net 表是以下字段`[Date],[Thread],[Level],[Logger],[Message],[Exception]`

我需要在 log4net 表中添加另一个字段（例如 SalesId），但是在记录错误或信息消息时如何在我的 xml 和代码中指定以记录“SalesId”？

例如`log.Info("SomeMessage", SalesId)`

这是 log4net xml

```
 <appender name="SalesDBAppender" type="log4net.Appender.AdoNetAppender">
    <bufferSize value="1" />
    <connectionType value ="System.Data.SqlClient.SqlConnection" />
    <connectionString value="Data Source=..." />
    <commandText value="INSERT INTO Log4Net ([Date],[Thread],[Level],[Logger],[Message],[Exception]) VALUES (@log_date, @thread, @log_level, @logger, @message, @exception)" />
    <parameter>
      <parameterName value="@log_date" />
      <dbType value="DateTime" />
      <layout type="log4net.Layout.RawTimeStampLayout" />
    </parameter>
    <parameter>
      <parameterName value="@thread" />
      <dbType value="String" />
      <size value="255" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%thread" />
      </layout>
    </parameter>
    <parameter>
      <parameterName value="@log_level" />
      <dbType value="String" />
      <size value="50" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%level" />
      </layout>
    </parameter>
    <parameter>
      <parameterName value="@logger" />
      <dbType value="String" />
      <size value="255" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%logger" />
      </layout>
    </parameter>
    <parameter>
      <parameterName value="@message" />
      <dbType value="String" />
      <size value="4000" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%message" />
      </layout>
    </parameter>
    <parameter>
      <parameterName value="@exception" />
      <dbType value="String" />
      <size value="2000" />
      <layout type="log4net.Layout.ExceptionLayout" />
    </parameter>
  </appender> 
```

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2012-08-27T10:27:11.827

1）修改命令文本：`INSERT INTO Log4Net ([Date],[Thread],[Level],[Logger],[Message],[Exception],[MyColumn]) VALUES (@log_date, @thread, @log_level, @logger, @message, @exception, @CustomColumn)`

2）添加自定义列的参数定义：

```
<parameter>
   <parameterName value="@CustomColumn"/>
   <dbType value="String" />
   <size value="255" />
   <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%property{CustomColumn}" />
  </layout>
</parameter> 
```

3）然后使用 log4net 的上下文之一将值传输到参数：

```
// thread properties...
log4net.LogicalThreadContext.Properties["CustomColumn"] = "Custom value";
log.Info("Message"); 

// ...or global properties
log4net.GlobalContext.Properties["CustomColumn"] = "Custom value"; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-07-26T16:18:44.873

Log4Net 中可用的三种类型的日志记录上下文。

1.  Log4Net.GlobalContext :- 此上下文在所有应用程序线程和域之间共享。如果两个线程在 GlobalContext 上设置相同的属性，一个值将覆盖另一个值。

2.  Log4Net.ThreadContext :- 此上下文范围仅限于调用线程。这里两个线程可以将相同的属性设置为不同的值，而不会相互覆盖。

3.  Log4Net.ThreadLogicalContext :- 此上下文的行为类似于 ThreadContext。如果您正在使用自定义线程池算法或托管 CLR，您可能会发现这个算法有些用处。

将以下代码添加到您的 program.cs 文件中：

```
static void Main( string[] args )
{
    log4net.Config.XmlConfigurator.Configure();
    log4net.ThreadContext.Properties[ "myContext" ] = "Logging from Main";
    Log.Info( "this is an info message" );
    Console.ReadLine();
} 
```

2）添加自定义列的参数定义：

```
 <log4net>      
    <appender name="ConsoleAppender" type="log4net.Appender.ConsoleAppender">
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%logger (%property{myContext}) [%level]- %message%newline" />
      </layout>
    </appender> 
  </log4net> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-05-25T07:33:11.433

这是一个带有一些个性化偏好的工作版本。我添加了一个自定义列来存储生成的异常代码。

1）将您的自定义列（此处为异常代码）添加到 Log4net 配置：

```
<commandText value="INSERT INTO Log([Date],[Thread],[Level],[Logger],[Message],[Exception],[ExceptionCode]) 
VALUES (@log_date, @thread, @log_level, @logger, @message, @exception,@exceptionCode)" />

<parameter>
    <parameterName value="@exceptionCode" />
    <dbType value="String" />
    <size value="11" />
    <layout type="Common.Utils.LogHelper.Log4NetExtentedLoggingPatternLayout">
        <conversionPattern value="%exceptionCode{Code}" />
    </layout>
</parameter> 
```

2) Log4NetExtentedLoggingCustomParameters.cs

```
namespace Common.Utils.LogHelper
{
    public class Log4NetExtentedLoggingCustomParameters
    {
        public string ExceptionCode { get; set; }

        public string Message { get; set; }

        public override string ToString()
        {
            return Message;
        }
    }
} 
```

3) Log4NetExtentedLoggingPatternConverter.cs

```
namespace Common.Utils.LogHelper
{
    public class Log4NetExtentedLoggingPatternConverter : PatternConverter
    {
        protected override void Convert(TextWriter writer, object state)
        {
            if (state == null)
            {
                writer.Write(SystemInfo.NullText);
                return;
            }

            var loggingEvent = state as LoggingEvent;
            var messageObj = loggingEvent.MessageObject as Log4NetExtentedLoggingCustomParameters;

            if (messageObj == null)
            {
                writer.Write(SystemInfo.NullText);
            }
            else
            {
                switch (this.Option.ToLower()) //this.Option = "Code"
                {
                    case "code": //config conversionPattern parameter -> %exceptionCode{Code}
                        writer.Write(messageObj.ExceptionCode);
                        break;  
                    default:
                        writer.Write(SystemInfo.NullText);
                        break;
                }
            }
        }
    }
} 
```

4) Log4NetExtentedLoggingPatternLayout.cs

```
namespace Common.Utils.LogHelper
{
    public class Log4NetExtentedLoggingPatternLayout : PatternLayout
    {
        public Log4NetExtentedLoggingPatternLayout()
        {
            var customConverter = new log4net.Util.ConverterInfo()
            {
                Name = "exceptionCode",
                Type = typeof(Log4NetExtentedLoggingPatternConverter)
            };

            AddConverter(customConverter);
        }
    }
} 
```

5) Logger.cs // 使用新列享受您的记录器！:)

```
namespace Common.Utils.LogHelper
{
    public class Logger
    {
        static ILog Logger = LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);

        public static string LogError(string message, Exception exception = null)
        {
            var logWithErrCode = GetLogWithErrorCode(message);
            Logger.Error(logWithErrCode, exception);
            return logWithErrCode.ExceptionCode;
        }

        private static Log4NetExtentedLoggingCustomParameters GetLogWithErrorCode(string message)
        {
            var logWithErrCode = new Log4NetExtentedLoggingCustomParameters();
            logWithErrCode.ExceptionCode = GenerateErrorCode(); //this method is absent for simplicity. Use your own implementation
            logWithErrCode.Message = message;
            return logWithErrCode;
        }
    }
} 
```

参考：

[http://blog.stvjam.es/2014/01/logging-custom-objects-and-fields-with](http://blog.stvjam.es/2014/01/logging-custom-objects-and-fields-with)

# entity-framework-4.1 - 几个多对多关系

> ID：12139487
> 
> 赞同：0
> 
> 时间：2012-08-27T09:36:01.713
> 
> 标签：entity-framework-4.1, code-first

我设置了这两个类，我希望 Entity Framework 自动为一组实体创建生成的多对多关系表。

```
public class User {
    public int Id { get; set; }

    public ICollection<Event> SignedUpEvents { get; set; }
    public ICollection<Event> CompletedEvents { get; set; }
} 
```

和

```
public class Event {
    public int Id { get; set; }

    public ICollection<User> SignedUpUsers { get; set; }
    public ICollection<User> CompletedUsers { get; set; }
} 
```

这无济于事。我的猜测是，由于指定了两个关系并且都涉及相同的实体类型，EF 无法区分这两者。

有没有办法做到这一点？也许一些 DataAnnotation 来命名结果表之类的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:07:47.083

是的，正如您所说，问题在于它有两个“事件”集合。

您可以使用 DataAnnotations 设置双重导航属性，但我个人的偏好是使用模型构建器。这使您的 poco 类保持清洁并避免不必要的引用。

我写了一篇关于如何使用模型构建器以及[EF 导航属性如何工作](http://blog.staticvoid.co.nz/2012/07/entity-framework-navigation-property.html)的教程，我建议您阅读它，因为它更深入。

从简单的角度来看，您需要以下内容：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Entity<User>().HasMany(e => e.SignedUpEvents)
                .WithMany(e => e.SignedUpUsers);            
            modelBuilder.Entity<User>().HasMany(e => e.CompletedEvents)
                .WithMany(e => e.CompletedUsers);
        } 
```

# git - Git 和活动目录配置

> ID：12139488
> 
> 赞同：2
> 
> 时间：2012-08-27T09:36:03.300
> 
> 标签：git

我的 ActiveDirectory (AD) 存在于 Windows 操作系统上，我的 git 测试存储库存在于 Centos 上。我想集成 GIT 和 AD，以便 git 操作，如克隆和推送 AD 用户/密码的提示。我可以克隆但是，它不会提示我输入登录名/密码。我已经在这个论坛中找到了类似问题的答案，但问题仍然存在。请帮忙。

# python - csv文件中的Python列表

> ID：12139489
> 
> 赞同：0
> 
> 时间：2012-08-27T09:36:03.647
> 
> 标签：python, list, csv

我有一个关于如何以我的方式将列表保存为 CSV 文件的问题：

如果我有一个包含许多子列表的大列表：records = [['a','b','c','d'], ['1','2','3','4'] ，……]

我使用此代码生成一个 csv 文件：

```
import csv
create = csv.writer(open(filename, "wb"))
create.writerow(records) 
```

它在一行中显示所有子列表，每个子列表都在一个单元格中： ['a','b','c','d'] ['1','2','3','4' ].....

但是我不想要方括号和引号，而是想要一个单元格中的每个项目，并且每行只有一个子列表：a,b,c,d 1,2,3,4

我是 python 新手，对代码知之甚少。希望你能帮助我:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:44:00.297

```
with open(filename, "wb") as file:
    csv.writer(file).writerows(records) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-10T14:46:35.887

```
import csv
create = csv.writer(open(filename, "wb"))
for element in record:
    create.writerow(element) 
```

应该给你你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T09:42:26.947

您需要遍历`records`结构。像这样的东西：

```
for x in records:
    create.writerow(x) 
```

# python - 如何将csv文件的一行映射到python中的特定行

> ID：12139495
> 
> 赞同：0
> 
> 时间：2012-08-27T09:36:37.643
> 
> 标签：python, csv

我有一个看起来很奇怪的 csv 文件。它有子部分，每个子部分都有 csv 格式的数据。

数据例如：

```
Device Name: Test-0001

Sub section 1
header 1, header 2, header 3,header 4,.......header n
field 1, field 2, field 3, field 4, .......field n

Sub section 2
header 1, header 2, header 3,header 4,.......header n
field 1, field 2, field 3, field 4, .......field n

.....

Sub section n

header 1, header 2, header 3,header 4,.......header n
field 1, field 2, field 3, field 4, .......field n

Device Name: Test2-0002
and same format afterwards.... 
```

我希望将每个“设备名称：”映射到所有子部分，直到下一个“设备名称：”出现

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:42:28.033

我会尝试定义一个字典，将您的设备作为键，将行列表作为值。假设这`lines`是文件行的列表：

```
with open(your_file_name, "r") as f:
    lines = f.readlines()

devices = {}
key = None
for line in lines:
    if not line.strip():
        continue
    if line.startswith("Device Name"):
        key = get_key(line)
        devices[key] = []
    else:
        devices[key].append(line) 
```

where`get_key`是你要定义的函数，它会将一条线`Device Name: Test2-0002`转换成你想要的东西。

例如，如果你想要你的键`Device Name: Test2-0002`，你可以定义`get_key`为`get_key = lambda line: line`：它是一个函数，当给定 a 时，它`line`会返回完全相同的结果`line`而无需任何处理。

如果您希望您的密钥像`Test2-0002`，您可以编写您的`get_key`函数来删除`Device Name:`字符串，或者在`':'`...之后获取字符串的一部分

这是一个相当基本的解决方案，但如果您不介意一次存储文件的行，它应该可以工作。如果这是一个问题，只需使用 a`file.readline()`而不是`lines`列表。

一个稍微高级一点的解决方案可以基于该`mmap`模块：找到你的`Device Name`行的位置并存储它们。然后，您可以逐节阅读。

# android - 创建的文件去哪里了？

> ID：12139496
> 
> 赞同：0
> 
> 时间：2012-08-27T09:36:39.073
> 
> 标签：android

我正在使用以下指令创建一个世界可读的文件：

```
FileOutputStream fos = openFileOutput(filename.toString(), MODE_WORLD_READABLE); 
```

文件已创建（我可以看到模拟器的内存和文件），但我在我的设备上找不到它！它在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:38:44.047

在**应用程序的内部存储**中 .. 默认情况下`/data/data/<package_name>/`

检查这个目录..

但是，如果您的设备是无根的，那么您将无法在**DDMS -> FIle-Explorer**中看到此文件。

为此，您可以通过 commnad 提示尝试使用`adb shell`

如果您只想访问应用程序中的文件，请使用，

```
getFilesDir() 
```

**获取保存内部文件的文件系统目录的绝对路径。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-24T21:09:23.230

该文件位于 /data/data/com.yourpackagename/files/filename.txt 中，除非设备已植根，否则该文件是隐藏的。您可以通过从创建文件的目录复制文件来访问该文件。

从命令行：

复制文件

```
adb -d shell 
run-as com.yourpackagename 
cat /data/data/com.yourpackagename/files/filename.txt > /sdcard/filename.txt 
```

或者对于 SQLite 数据库

```
cat /data/data/com.yourpackagename/databases/dbname.db > /sdcard/dbname.sqlite 
```

此解决方案无需root设备即可工作。

# php - php v.5.4.6 中的 php.ini 在哪里？

> ID：12139505
> 
> 赞同：12
> 
> 时间：2012-08-27T09:37:18.457
> 
> 标签：php

这个文件似乎完全丢失了。我只看到两个文件`php.ini-development`和`php.ini-production`，但它们都不是当前 php.ini 的配置。如果我想在php中添加一个mysqli扩展，我需要做什么，我可以在哪里做？

操作系统视窗 7。

**解决方案**

通过删除`php.ini-production`重命名`php.ini`和取消注释。就这些。`extension_dir``;`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-27T09:38:27.870

这一切都取决于你的`Operating System`

创建一个文件`check.php`，它会显示你的位置`php.ini`。

```
<?php
   phpinfo();
?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-27T09:39:17.380

**php.ini**的位置`/etc/php.ini`在 Linux 中。

# ruby-on-rails - 如何使用 ruby on rails 自定义电子表格

> ID：12139507
> 
> 赞同：0
> 
> 时间：2012-08-27T09:37:27.470
> 
> 标签：ruby-on-rails, excel

我正在使用电子表格 gem 0.6.5.7 来生成 Excel 文件。我想根据需要设置工作表名称。目前工作表名称为“worksheet1”。我想根据生成的报告类型自定义名称。谁能帮我解决这个问题，因为我是 gem 文件的新手。或者我们有任何其他的宝石可以很容易地根据我们的需要进行定制。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T04:36:55.650

自定义生成的工作表的名称实际上是一项简单的任务。它可以在同一个电子表格 gem 本身中完成。（版本 0.6.5.7）。只是我们必须遵循以下语法。

```
book = Spreadsheet::Workbook.new                       /* book is the workbook that gonna generated*/
sheet = book.create_worksheet :name=>"Project Report"  /* sheet is the worksheet which contain your data.*/ 
```

希望这会有用。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:40:51.213

你试过“to_xls”宝石吗？

[http://rubygems.org/gems/to_xls](http://rubygems.org/gems/to_xls)

甚至还有一个专门用于导轨的宝石：

[http://rubygems.org/gems/to_xls-rails](http://rubygems.org/gems/to_xls-rails)

...

我对 xls 文件的工作不多，但也许有帮助。

# javascript - 无限滚动javascript已经触发

> ID：12139508
> 
> 赞同：0
> 
> 时间：2012-08-27T09:37:28.987
> 
> 标签：javascript, jquery, infinite-scroll

我有一个加载项目并使用 jquery 无限滚动插件在用户滚动时加载更多项目的站点。

当用户将鼠标悬停在某个项目上时，该项目上会显示更多的小 div。简单的。悬停时显示哪些 div 取决于用户在哪个页面上，因此它们取决于知道他们在哪个页面上。我使用一个简单的变量来解决这个问题。

我使用以下 js 来决定显示哪些 div。例如从主页

```
<script>
  $(".list_item_image").mouseenter(function () {
    $(this).children(".gl_view2").show();
    $(this).children(".gl_relist").show();
  });
  $('.list_item_image').mouseleave(function() {
    $(this).children(".gl_view2").hide();
    $(this).children(".gl_relist").hide();
  });
</script> 
```

最初加载 div（gl_view2 和 gl_relist），但使用`display:none;`

现在，这个 js 被加载到页脚中，以确保它在有问题的 div 之后。

假设我有无限滚动设置一次更新 15 个项目

对于前 15 个项目，这一切都完美地工作（意味着在 mouseenter 上应该显示/覆盖的 div 被显示），但之后项目加载但 mouseenter 根本不再工作。我猜这是因为 js 已经加载，当下一个项目加载到页面上时，js 没有任何效果。

要使用无限滚动加载下一个项目，我正在使用：

```
<nav id="page_nav"><a href="/pages/infinScrollGather.html?page_offset=2&currentpage=homepage"></a></na‌​v> 
```

我也尝试在每个项目之后加载 js，但仍然只适用于前 15 个。

我也尝试过，但这根本不起作用：

```
$("body").on("mouseenter", ".list_item_image", function () {
...
});

$("body").on("mouseleave", ".list_item_image", function () {
...
}); 
```

有没有人遇到过这样的事情？任何修复的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:40:09.663

`on()`你应该像这样使用事件委托

```
$("body").on("mouseenter", ".list_item_image", function () {
  ...
});

$("body").on("mouseleave", ".list_item_image", function () {
  ...
}); 
```

这会将您的处理程序也附加到稍后通过 ajax 在 DOM 上注入的较新元素上

仅当您使用旧版本的 jQuery 时才使用`delegate()`，`on()`否则

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T11:22:35.247

已修复（无论如何我希望如此）

似乎 js 缺少被包裹在：`$(document).ready(function(){ ... });`

感谢所有帮助。

# iphone - 如何在 ios5 中将 NSString 转换为 JSON 格式？

> ID：12139515
> 
> 赞同：5
> 
> 时间：2012-08-27T09:37:57.187
> 
> 标签：iphone, json, ios5

我有一些像这种格式的字符串值，

```
[INFO]  [Tue Aug 21 14:54:22 2012]  [ViewController]  [26]  [Hello]  [;] 
```

我想使用 NSJSONSerialization 将这些字符串转换为 JSON。

我正在使用以下代码来转换字符串，

```
 for (i = 0; i < [logArray count]; i++) 
{
    individualLogInfoArray = [[logArray objectAtIndex:i] componentsSeparatedByString:kDelimitterSpace];
    [dictionaryArray addObject:individualLogInfoArray];

}

finalLogDictionary = [NSMutableDictionary dictionaryWithObjectsAndKeys:dictionaryArray,@"Log", nil];
    NSError *error;
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:finalLogDictionary 
                                                   options:NSJSONWritingPrettyPrinted
                                                     error:&error];

NSString *jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];
NSLog(@"JsonString = %@",jsonString); 
```

然后我得到这样的输出，

```
JsonString = {
  "Log" : [
    "[INFO]  [Tue Aug 21 14:54:22 2012]  [ViewController]  [26]  [Hello]  [;]",
    "[DEBUG]  [Tue Aug 21 14:54:22 2012]  [ViewController]  [27]  [hi]  [;]",
    "[INFO]  [Tue Aug 21 14:54:22 2012]  [ViewController]  [28]  [Its  there]  [;]",
    "[PROD]  [Tue Aug 21 14:54:22 2012]  [ViewController]  [29]  [Welcome]  [;]"
  ]
} 
```

但我想要这样的输出，

```
{
"log": "[INFO]  [Tue Aug 21 14:54:22 2012]  [ViewController]  [26]  [Hello],[INFO]  [Tue Aug 21 14:54:22 2012]  [ViewController]  [26]  [Hello],[INFO]  [Tue Aug 21 14:54:22 2012]  [ViewController]  [26]  [Hello]" 
```

}

我不知道如何生成上述格式的 JSON 字符串，请提出解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T09:50:17.050

你得到的字符串是有效的 JSON，而你想要的字符串不是。因此，您将无法使用 iOS JSON 库生成无效的 JSON。

您可以使用此在线实用程序测试有效性，

[JSONLint](http://jsonlint.com)

希望有帮助。

**更新：**问题已被修改为显示有效的 JSON 作为所需的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:26:16.610

您修改后的问题现在是在将其序列化为 JSON 之前操作 NSDictionary、NSString 和 NSArray 对象以获得所需格式的情况。

您需要将原始数据操作到包含键/值对的字典中，

日志 ：

...然后将其序列化为 JSON。

在为每个 logArray 项添加对象的循环中，您可以改为使用所需格式 appendString。

# android - adt 插件更新失败

> ID：12139519
> 
> 赞同：2
> 
> 时间：2012-08-27T09:38:04.960
> 
> 标签：android, eclipse-plugin, adt

我正在尝试将我的 ADT 插件从 18 更新到 20，但它不起作用..

请帮助我并提出建议。

我收到这些错误

```
 - Some sites could not be found.  See the error log for more detail.
 - HTTP Method Not Allowed: http://developer.android.com/tools/sdk/eclipse/content.xml
 - HttpClient connection error response code 405.
 - HTTP Method Not Allowed: http://developer.android.com/tools/sdk/eclipse-adt.html/content.xml
 - HttpClient connection error response code 405. 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T11:11:48.887

尝试使用**https**协议而不仅仅是**http**，有时对我有用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T12:52:16.473

我遇到了完全相同的问题，我不确定根本原因，但这是我解决它的方法。没有完全修复，但这允许我编译和运行，所以我可以继续开发：

1.  使用此链接下载手册 ADT 更新：http: [//developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html) （底部的 zip 文件链接）

2.  在 Eclipse 中，Help -> Install New Software -> Add -> Archive（并选择下载的 zip）只选择 Developer Tools 复选框，不选中 NDK Plugins（选中它会给我更多错误）

3.  重启 Eclipse

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-28T09:02:03.813

尝试将 ADT 位置更改为此 [https://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/)

帮助 -> 安装新软件 -> 可用的软站点 -> ADT -> 编辑

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T16:20:04.667

由于[http://developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html)中的描述：

安装疑难解答 如果您在按照上述步骤下载 ADT 插件时遇到问题，以下是一些建议：

如果 Eclipse 找不到包含 ADT 插件的远程更新站点，请尝试将远程站点 URL 更改为使用 http，而不是 https。也就是说，将远程站点的位置设置为： http: [//dl-ssl.google.com/android/eclipse/](http://dl-ssl.google.com/android/eclipse/)

# html - 严格的 HTML4.01 是否更适合移动开发？

> ID：12139539
> 
> 赞同：1
> 
> 时间：2012-08-27T09:38:56.817
> 
> 标签：html, mobile, html4

一个简短的问题：使用严格的 HTML4.01 而不是 HTML5 来开发一个考虑到最大移动设备合规性的网站是否更合适？

在 W3C 的移动验证器中测试我的网站时，它声称我缺少各种 HTML4 标记，例如 meta-equiv 内容类型，并且实际上声称我应该使用我个人避免使用的 XHTML。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:54:05.427

It depends on what you mean by "mobile". Things have moved a lot in the last 5 years.

[http://html5boilerplate.com/mobile](http://html5boilerplate.com/mobile) is a most excellent resource – you perhaps don't want to just drop it in as is, though that works, but it has a lot of information in there that is hard to find in other places.

If you are designing for Android and iOS, then HTML5 is by far the right decision. If you are designing for dumb phones, then things are a little different.

# css - 将鼠标悬停在按钮上时文本颜色更改

> ID：12139546
> 
> 赞同：8
> 
> 时间：2012-08-27T09:39:24.780
> 
> 标签：css, text, colors, hover

我正在尝试更改悬停按钮内文本的颜色。

我可以让按钮本身改变颜色，但我希望按钮文本也改变颜色。

这是我当前的CSS：

```
button,
input.button,
a.button,
input[type="submit"] {
background:#2e77ae;
background: -moz-linear-gradient(top, #5590bd, #2e77ae);
background: -webkit-linear-gradient(top, #5590bd, #2e77ae);
background: -o-linear-gradient(top, #5590bd, #2e77ae);
background: -ms-linear-gradient(top, #5590bd, #2e77ae);
background: linear-gradient(top, #5590bd, #2e77ae);
border-color:#2e77ae;}

button:hover,
input.button:hover,
a.button:hover,
input[type="submit"]:hover{

    background:#E6D332;
    background: -moz-linear-gradient(top, #E6D332, #E6D332);
    background: -webkit-linear-gradient(top, #E6D332, #E6D332);
    background: -ms-linear-gradient(top, #E6D332, #E6D332);
    background: linear-gradient(top, #E6D332, #E6D332);
    border-color:#2e77ae;}

button:focus,
input.button:focus,
a.button:focus,
input[type="submit"]:focus { 
    background-color:#E6D332;} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T09:47:54.960

CSS 属性`color`一般控制元素中的文本颜色。在您的情况下，要更改悬停时的颜色，请使用说明`:hover`符；

```
input[type = "submit"]:hover {
    color: #FF0000;
    //you can add more styles to be applied on hover
} 
```

请注意，您也可以使用`rgb(x, y, z)`格式指定颜色。这里有一个小演示来说明：[little link](http://jsfiddle.net/9Zr5j/show/)。您可以在此处试用演示并查看源代码：[另一个小链接](http://jsfiddle.net/9Zr5j/)。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T09:42:01.027

如果要更改文本的颜色，请使用 CSS`color`属性，例如

```
input[type="submit"]:hover{
   color :#E6D332; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-23T23:42:40.387

```
p.one{
    color: DarkBlue}
p.one:hover{
    color: yellow}
```

```
<html>
    <head>
        <title>Css Help</title>
    <head>
    <body>
        <p class="one">Example TextExample TextExample TextExample TextExample TextExample TextExample TextExample TextExample TextExample TextExample TextExample TextExample TextExample TextExample TextExample TextExample TextExample Text<p>
    </body>
<html>
```

这是我所做的：

```
a:hover{
    color: #ffffff;
} 
```

您可以将“a”更改为诸如段落“p”之类的任何内容，或者将其指定为带有类的 html 文件

```
<p class="one">Example</p> 
```

它们在 CSS 文件中执行：

```
p.one:hover{
    color: #ffffff;
} 
```

我希望我能提供帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-13T19:51:58.237

```
.btn:hover h3{
    color: #FFFFFF;
} 
```

`<button>`您可以在after中为元素（例如文本）编写选择器，以在`.btn:hover`将鼠标悬停在按钮上时更新这些特定元素的 css 属性。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-27T09:42:52.053

`color:#(insert text color)`把这个放进去

# javascript - 我想根据 URL 参数显示/隐藏表格

> ID：12139548
> 
> 赞同：0
> 
> 时间：2012-08-27T09:39:37.450
> 
> 标签：javascript, scripting, show-hide

我想根据 URL 参数显示/隐藏表。

请注意，我已经有了这样的网址：www.mydomainname.com?selecoption=1&selec=1

现在对于 SHOW/HIDE 表，我的 URL 将是这样的：www.mydomainname.com?selecoption=1&selec=1&showid=46

看到我已经有一个我以前使用过的脚本。脚本如下：

```
<script type="text/javascript">
function getUrlVar(varName) { //returns empty string if variable name not found in URL
  if (!varName) return ''; //no variable name specified. exit and return empty string

  varName = varName.toLowerCase(); //convert to lowercase
  var params = location.search; //get URL

  if (params == '') return ''; //no variables at all. exit and return empty string

  var vars = params.split('?')[1].split('&'); //get list of variable+value strings

  if (vars instanceof String) { //is a string. i.e.: has no "&" separator; or only one variable
    vars = [vars]; //put into array
  }

  for (var i = 0; i < vars.length; i++) { //check each variable
   var varPair = vars[i].split('='); //split variable and its value

   if (varPair instanceof Array) { //is an array. i.e.: has "=" separator

     if (varPair[0].toLowerCase() == varName) { //same variable name?
       return varPair[1]; //found variable. exit and return its value
     } //else: check next variable, if any

   } //else: is not an array. i.e.: invalid URL variable+value format. ignore it
  }
  return ''; //no matching variable found. exit and return empty string
}

function show() {
  var value = getUrlVar('selecoption'); /get variable value
  if (!value) return; //variable not found
  if (parseInt(value) == NaN) return; //value is not a number

  var sel = document.getElementById('form1').selecoption;
  for (var i=0; i < sel.length; i++) {
    if (sel.options[i].value == value) {
      document.getElementById('form1').selecoption.value = value;
      return;
    }
  }
}
</script> 
```

现在通过使用这个脚本本身，我怎样才能显示/隐藏表格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:50:36.643

获取`id`要显示的表格。一旦你有了它，用它`document.getElementById('table').style.visibility = "hidden";`来隐藏它。

要显示它：`document.getElementById('table').style.visibility = "visible";`

该脚本应首先加载！

# erlang - 从 gen_tcp 套接字接收特定数量的数据

> ID：12139549
> 
> 赞同：0
> 
> 时间：2012-08-27T09:39:39.573
> 
> 标签：erlang, gen-tcp

我有以下代码使用 gen_tcp 套接字，它应该使用`{active, true}`一些总是大小为 5 的二进制命令来接收（例如`Command = <<"hello">>`）

```
{ok, ListenSocket} = gen_tcp:listen(5555,  [{active, true}, {mode, binary}, 
                                            {packet, 0}]),
{ok, Socket} = gen_tcp:accept(ListenSocket),    
loop().

receive() ->
    {tcp, _Socket, Message:4/binary} ->
         io:format("Success~n", []),
         loop();
    {tcp, _Socket, Other} ->
         io:format("Received: ~p~n", [Other]),
         loop()
end. 
```

但是，如果我尝试像这样作为客户端连接：

```
1> {ok, S} = gen_tcp:connect("localhost", 5555, []).
   {ok,#Port<0.582>}
2> gen_tcp:send(S, <<"hello">>).
ok 
```

我在接收部分：

```
Received: {tcp,#Port<0.585>,<<"hello">>} 
```

所以我想我的错误在于模式匹配......但是在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:20:52.097

您的`receive`条款看起来不正确，应该是：

```
{tcp, _Socket, <<Message:5/binary>>} ->
  .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:50:24.990

据我了解，您需要`gen_tcp:recv`功能。从文档：

```
recv(Socket, Length) -> {ok, Packet} | {error, Reason} 
```

在您的代码中，它将类似于：

```
...
{ok, Socket} = gen_tcp:accept(ListenSocket),
loop(Socket).

loop(Socket) -> 
    case gen_tcp:recv(Socket, 5) of
        {ok, Data} ->
            io:format("Success~n", []),
            loop(Socket);
        {error, closed} -> 
            ok
end. 
```

# cocos2d-iphone - Cocos2d-x - 如何制作等待第二个动画直到一个动画完成？

> ID：12139552
> 
> 赞同：1
> 
> 时间：2012-08-27T09:39:58.150
> 
> 标签：cocos2d-iphone, cocos2d-x

我正在制作一个纸牌游戏，我想一张一张地抽牌。卡必须一张一张地发给玩家，然后分别发给庄家。在这个过程中，现在我想添加我已经完成的卡片动画，但它正在一起发生。现在我想制作一张一张的动画，即一张卡片打开然后第二张卡片像这样

我尝试过使用 CCArray0>addobj(CCSequence)...这里的方法是我的代码，但它不起作用

```
m_AnimateCardArr = CCArray::create(4);

for (int i = 0; i < 4; i++) {

switch (i){

case 0: player->draw(card)
    cardAnimation(player,card,500,200);
    break;
case 1: player->draw(card)
    cardAnimation(player,card,550,200);
    break;
case 2: dealaer->draw(card)
    cardAnimation(player,card,500,1000);
    break;
case 3 :dealaer->draw(card)
    cardAnimation(player,card,550,1000);
    break;
}

++mCount;
}

    void CardAnimation(Player* player,Card* card, CCPoint startPts,CCPoint endPts){

        // ,, some code
     m_AnimateCardArr->addObject(CCSequence::create(spawn1,spawn2,finishAnimation,NULL));
     if(mCount>=4)
        card->runAction( CCSequence::create(m_AnimateCardArr));
} 
```

一旦 mCount 变为 4，我尝试运行该操作，但它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:05:06.017

您也可以像这样使用调度程序：

```
this->schedule(schedule(SEL_SCHEDULE selector), 2.0f); 
```

`SEL_SCHEDULE selector`将是您需要调用的函数

`2.0f`是一个计时器，你想延迟多少秒的函数调用

# jquery - 如何防止 jQuery DataTable 插件将所有参数发送到服务器？

> ID：12139554
> 
> 赞同：2
> 
> 时间：2012-08-27T09:40:07.483
> 
> 标签：jquery, url, get, datatables

我正在使用 jQuery 插件 DataTables 来构建一个包含来自服务器的一些数据的表。数据是使用 Ajax 源自动获取的，我使用服务器端执行分页。

这是我的列和表初始化：

```
var dTColumns = [];

jQuery.each(inputData.columns, function(key, value){
  dTColumns.push({ 
    "bVisible": key<4, 
    "bSortable":false,
    "aTargets": [ key ],
    "mData": value["fieldName"]
  });
});

jQuery(table).dataTable({
  "aoColumnDefs": dTColumns,
  "bProcessing" : true,
  "sAjaxSource" : inputData.serverURL,
  "bServerSide": true,
  "sAjaxDataProp" : inputData.resultsRootAttribute
}); 
```

问题是我对所有表操作（使用导航和排序系统触发的搜索）使用 GET 请求，并且我注意到所有列都放在 URL 内（这也发生在他们的示例中）。

问题是我的表中有 200 多列（仅显示前五列），并且插件为每列填充了 4 个字段的 URL。

**如何防止 DataTables 将所有这些参数放在 URL 中？（我不需要列的排序和搜索功能）。**

**答案：** 初始化表时，您可以添加自定义方式来执行与服务器的通信。在此方法中，您可以修改*aoData*对象，它是一个包含所有要发送到服务器的参数的数组。

[你可以在这里](http://datatables.net/forums/discussion/7060/passing-url-parameters-server-side/p1 "一个示例，展示了实现与服务器通信的自定义方法的方式")找到一个例子！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:29:11.043

初始化表时，您可以添加执行与服务器通信的自定义方式。在此方法中，您可以修改*aoData*对象，它是一个包含所有要发送到服务器的参数的数组。

[你可以在这里](http://datatables.net/forums/discussion/7060/passing-url-parameters-server-side/p1 "一个示例，展示了实现与服务器通信的自定义方法的方式")找到一个例子！

# iphone - “加载更多..”在带有自定义单元格的 tableView 上 - 单元格重用给我带来了一些问题

> ID：12139555
> 
> 赞同：1
> 
> 时间：2012-08-27T09:40:08.913
> 
> 标签：iphone, ios, xcode, cocoa-touch, uitableview

我正在尝试在 tableView 上实现“加载更多...”。我已经做到了，但我不知道它是否有效。问题是我有自定义单元格，如果我这样做：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"Cell";

    ArticlesCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if (cell==nil)
    {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"ArticlesCell" owner:self options:NULL];
        cell = (ArticlesCell *) [nib objectAtIndex:0];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }
    tableView.backgroundColor = cell.backgroundColor;

    if (indexPath.row <= (self.bookmarks.count - 1)) {
        [self configureCell:cell atIndexPath:indexPath];
    }else{
        cell.textLabel.text = @"Load more...";
    }

    return cell;
} 
```

它工作得很好，但发生的是它正在重用单元格，如果我滚动，每五个单元格（这是高度 77.0）都会有标签“加载更多......”，但实际上它是正常工作的。我找到了这个解决方法，但我不知道它是否有效。

这里是：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"Cell";
    if (indexPath.row <= (self.bookmarks.count - 1)) {

    ArticlesCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if (cell==nil)
    {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"ArticlesCell" owner:self options:NULL];
        cell = (ArticlesCell *) [nib objectAtIndex:0];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }
    tableView.backgroundColor = cell.backgroundColor;

        [self configureCell:cell atIndexPath:indexPath];
        return cell;
    }else{
        UITableViewCell *cell = [[UITableViewCell alloc] init];
        cell.textLabel.text = @"Load more...";
        return cell;
    }
} 
```

如您所见，我正在将“加载更多...”单元格制作为一个简单的 UITableViewCell，而不是重用它，因为它只是一个。这是好方法吗？你能给我一些更好的建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:35:52.470

另一种方法是使用 2 个不同的单元格标识符，一个用于识别和重用（最初创建后）ArticlesCell，另一个用于识别和重用（一旦最初创建）“加载更多...”UITableViewCell。至少那时您只会创建一次“加载更多...” UITableViewCell，而不是每次滚动到视图中时。

```
static NSString *ArticleCellIdentifier = @"ArticleCell";
static NSString *LoadMoreCellIdentifier = @"LoadMoreCell"; 
```

LazyTableImages [Apple](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html) iOS 示例项目使用类似的方法（参见 Classes/RootViewController.m）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:04:35.293

当您单击 loadmore 按钮时，然后增加行数并重新加载 tableview 。即在方法 numberofrowsinsection 中。如果您需要更多，请告诉我

# javascript - 什么将是 Java 脚本函数来实现滑动动画 鼠标悬停事件

> ID：12139557
> 
> 赞同：-2
> 
> 时间：2012-08-27T09:40:10.163
> 
> 标签：javascript, jquery, html

我有以下图片

```
<div>
     <img src="leftarrow.png"/></br>
     <img src="insert.png"/></br>
    <img src="edit.png"/></br> 
    <img src="delete.png"/></br>
 </div> 
```

现在我想要的是，如果用户将鼠标指针放在名为“leftarrow”的图像上，一个垂直条应该滑入（以前应该是不可见的）包含其余图像，即“插入”、“编辑”和“删除”之类的我们在 Visual Studio 等中有工具箱，在此先感谢 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:31:59.103

这就是我在我的网站中使用的我必须为 IPT 做的事情：[来自 W3Schools 的 JQuery Effects](http://www.w3schools.com/jquery/jquery_effects.asp)。这个网站有“自己试试”，你可以在这里修改代码，更好地了解和理解这个 jquery 效果的工作原理。为了让它工作，您需要下载或链接到 jquery 文件 ( [http://www.w3schools.com/jquery/jquery.js](http://www.w3schools.com/jquery/jquery.js) )

您可以使用`slideXX()`（其中 XX = 方向）并使用“速度”参数对其进行动画处理。随心所欲。

* * *

**更新：**如果你想让某些东西增长/缩小，你可以使用相同的 jquery 文件，但使用不同的命令（特别是 the`animate`或`toggle`命令）

语法是：`$(selector).animate({params},duration,easing,callback);` 对于隐藏/显示命令，语法是`$(selector).toggle(speed_in_milliseconds);` 编辑：哦，我差点忘了：使用`hide`命令隐藏页面加载时的按钮

这方面的更多信息也可以在[jquery effects-w3schools](http://www.w3schools.com/jquery/jquery_effects.asp)中找到。

希望能帮助到你！如果没有，请发表评论，我会看看还能做什么

# .htaccess - Codeigniter：如何在 url 中传递隐藏参数并使其可用于解析

> ID：12139560
> 
> 赞同：1
> 
> 时间：2012-08-27T09:40:15.710
> 
> 标签：.htaccess, mod-rewrite, codeigniter-2, codeigniter-url, codeigniter-routing

我有一个这样的网址：

> www.domain.com/catalog/category_name/category_id/product_name/product_id

例子 ：

> www.domain.com/catalog/notebook/93/4_cpu_quad_core/56

并希望它变成：

> www.domain.com/catalog/category_name/product_name/

例子 ：

> www.domain.com/catalog/notebook/4_cpu_quad_core

这两个 ID 参数必须传递给应用程序并使用 PHP 解析，因为我需要它来获取正确的类别和产品。

我尝试了几种使用 . `htaccess`和`route.php`配置但没有成功！

有人可以以简单的方式解释如何将这些参数传递给 Web 服务器，同时将这些参数隐藏在 url 中吗？

我只是想知道是否可以在 url 中传递隐藏参数并使它们在后端应用程序（即 java 或 php）中可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:26:26.577

> 有人可以以简单的方式解释如何将这些参数传递给 Web 服务器，同时将这些参数隐藏在 url 中吗？

没有办法“隐藏”请求的一部分。您可以删除它们，但您的应用程序根本看不到它们。例如，您可以使您的所有 URL 看起来像`www.domain.com/catalog/category_name/product_name/`，但您的 php 脚本不会看到任何关于任何 ID 的信息，因为它们已经消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T04:34:18.237

好！我在文件系统/core/uri.php 中写了一个函数

```
function assing_segment($num,$value)
{
    $this->segments[$num]   =   $value;
    return $this->segments[$n];
} 
```

并在视图或控制器中调用此函数

```
$this->uri->assing_segment(5,$myvalue); 
```

这将用我的值重新分配第 5 段

# api - Google Weather API 返回奇怪的新错误

> ID：12139565
> 
> 赞同：8
> 
> 时间：2012-08-27T09:40:30.827
> 
> 标签：api, weather, weather-api, google-weather-api

我在 iPhone 应用程序中使用 Google Weather API，最近有时它会返回 403 错误，但现在无论我进入哪个位置，它都会返回一个非常时髦的错误，说“未知 API”。[这里的例子。](http://www.google.com/ig/api?weather=Mountain%20View)

有人知道发生了什么吗？我检查了 Google Weather Monitoring 链接，它说一切正常。到底他妈发生了什么？哦

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T12:06:12.117

过去几周我遇到了同样的问题（随机 403 错误），上周出现了 Unsupported API 消息。

如果你问我，**我认为 Google 已经永久关闭了不受支持的天气 API！** 自从谷歌宣布它将关闭 iGoogle - 用于其 api。

我认为您需要开始寻找不同的免费天气 api（和我一样 =( )。

如果您使用天气小部件分析 iGoogle 页面，您会注意到该调用现在使用 wunderground.com，而不再使用 google weather api

例如： http: [//igoogle.wunderground.com/cgi-bin/findweather/getForecast ?query=47.644199,9.180259&unit=SI&hl=de](http://igoogle.wunderground.com/cgi-bin/findweather/getForecast?query=47.644199,9.180259&unit=SI&hl=de)

# c# - 定义自定义 Mono“使用”指令，如 Java“导入”

> ID：12139566
> 
> 赞同：-2
> 
> 时间：2012-08-27T09:40:33.760
> 
> 标签：c#, java, mono

为避免重复定义，我试图`internal function prototypes`从类`One`转移到 C#`using My.Class.One`指令（如`import My.Class.One`在 Java 中）。

在 Java 中，这将更改此代码：

```
public class One {
   public static void func1();
   public static void func2();
   public static int main(String[] args) { ... }
} 
```

...将该代码拆分为不同的文件：

```
import My.Include;

public class One {
   public static int Main(String[] args) { ... }
}
------------------------->8--------------------------------    
package Include;

public class My {
   public static void func1();
   public static void func2();
   ...
} 
```

在得知 Java在 C#`'packages'`中命名后`'namespaces'`，我想出了以下 C# 代码，它无法编译 ( `mcs One.cs My_include.cs -out:One.exe`) 并出现错误：

**> “错误 CS0103：名称 `func1' 在当前上下文中不存在”**

```
using System;
using My.Include;

public class One {
   public static int Main(String[] args) { return funct1(); }
}
------------------------->8--------------------------------    
using System;

namespace My {
   namespace Include {
      public class functions {
      public static void func1();
      public static void func2();
      ...
      }
   }
} 
```

* * *

我尝试了许多不同的命名约定，但仍然遇到相同的错误。你能告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:36:07.357

看起来你想要一个`partial class`，所以你的主类文件看起来像：

```
// File:  One.cs
using System;

public class One
{
    static void Main()
    {
        // Your Main method here
    }
} 
```

你会有第二个文件，看起来像：

```
// File:  One.Externs.cs
using System;

public partial class One
{
    extern static void func1();
    extern static void func2();
} 
```

在编译时，这两个（或更多）文件由编译器自动组合成一个类。这为您提供了您似乎正在寻找的分离，但将相关定义保持在正确的范围内。

该`using`指令只是 java`import`指令的部分同义词——在 C# 中，`using`只提供了进入 a 的快捷方式，`namespace`而您习惯于使用`import`.

# java - 配置 gnu.io.rxtx.properties android

> ID：12139567
> 
> 赞同：1
> 
> 时间：2012-08-27T09:40:42.270
> 
> 标签：java, android, ioexception

当我尝试在最新的 eclipse SDK 中运行一个新的空白 android 项目时，会弹出一个窗口，上面写着“配置 gnu.io.rxtx.properties”。（这是一个有 128 个复选框代表 128 个串口的那个）

当我选择一些端口并单击保存时，控制台窗口中会出现一个 IOException 并且没有其他任何事情发生。

该项目将不会运行。窗户不会消失。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:03:03.577

愚蠢的错误，由于某种原因，“配置”被设置为运行，而不是我的项目。右键，运行方式，android。解决了。

# android - 如何使用在类中创建的字符串数组填充 autocompletetextview

> ID：12139569
> 
> 赞同：1
> 
> 时间：2012-08-27T09:40:47.217
> 
> 标签：android, autocompletetextview

通常`AutoCompleteTextView`填充`strings.xml`文件`res/values`夹中的文件。谁能告诉我如何使用在类中创建的字符串数组来填充`AutoCompleteTextView`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-27T11:33:03.687

试试这个...

```
autocompletetextAdapter = new ArrayAdapter<String>(
                        this,
                        android.R.layout.simple_dropdown_item_1line, stringArray);

myAutocompleteTextView.setAdapter(autocompletetextAdapter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:45:38.750

只需在获取数组的类中创建一个公共方法，例如：getArray（），然后将其与自动完成文本视图一起使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T02:06:23.177

我是这样做的：

```
((AutoCompleteTextView) findViewById(R.id.autoCompleteTextView1)).setAdapter(
    new ArrayAdapter<String> (this, android.R.layout.simple_dropdown_item_1line,
        String_array)); 
```

您的 Autocompletetextview 字段名称在哪里`autoCompleteTextView1`String_array 是您要传递的数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-04T15:27:59.313

尝试一下：

`result_auto_txt.setAdapter(new ArrayAdapter<>(RegisterEmployeeActivity.this, android.R.layout.simple_list_item_1,getResources().getStringArray(R.array.result)));`

`string.xml`这对于使用数组列出非常有帮助。

# php - 检测文本字段中的特定模式，然后在两个单选按钮之间切换

> ID：12139572
> 
> 赞同：0
> 
> 时间：2012-08-27T09:40:52.510
> 
> 标签：php, jquery, regex, search

我有两个单选按钮连接到控制用户想要的搜索类型的搜索字段。
一个用于常规关键字搜索，另一个用于车牌搜索。

“关键字”单选按钮是预先选择的，但是当检测到车牌模式时，如果可能的话，我希望使用 jQuery 将它自动切换到“车牌”......

车牌图案总是以两个字母 (AZ) 开头，后跟五个数字 (0-9)，如下所示：“AZ12345”。可能用这样的空格分隔：“ZA 98765”。

形式方法是`_GET`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T09:45:49.240

按照您的说明，您可以使用此模式来检测车牌

```
 [A-Za-z]{2}\s?\d{5} 
```

如果您只想匹配印*版*（例如不是 liasdjfaAG 00212lkfla） ，请`^[A-Za-z]{2}\s?\d{5}$`改用。

您可以使用 textchanged 事件（查看[此](https://stackoverflow.com/questions/1362284/how-to-fire-textbox-textchanged-event-on-jquery-onkeyup)答案），然后如果模式匹配，您可以更改单选按钮的“已检查”状态。

编辑：

在[jsfiddle](http://jsfiddle.net/gmWRX/10/)中实现，基本上代码是这样的

```
var rege = /^[A-Za-z]{2}\s?\d{5}$/;

$('#inpt').keyup(function(event) {
    if (rege.test($('#inpt').val())) {
        $('#plate').attr('checked', true);
    } else {
        $('#nonplate').attr('checked', true);
    }
}); 
```

使用这样的html：

```
<input type="text" id="inpt"/><br/>
<input type="radio" name="group1" id="plate" value="Plate"> Plate<br>
<input type="radio" name="group1" id="nonplate" value="NotPlate"> Not Plate 
```

编辑2：

应您的要求，我建议您阅读[此](https://stackoverflow.com/questions/6771140/jquery-text-change-event)问题。基本上，`setInterval()`您可以每 1 或 2 秒检查一次输入的状态，以选择正确的单选按钮。您也可以缩短此间隔（将其设置为 ~100 毫秒）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:55:57.920

我相信你需要的是这样的：

```
function checkPlate($s) {
  $match = false;
  $s = strtoupper($s);
  $s = str_replace(" ","",$s);
  if (strlen($s) == 7) {
    preg_match(/[A-Z]{2}[0-9]{5}/, $s, $matches);
    if (count($matches) == 1) {$match = true;}
  }
  return $match;
} 
```

# android - Android 上的最大加速器读数

> ID：12139585
> 
> 赞同：0
> 
> 时间：2012-08-27T09:42:04.127
> 
> 标签：android, accelerometer

我想检测使用 Android 的设备是否经历了高达 +-16g 的冲击（在三星 Galaxy 等智能手机上）。

我的理解是传感器在一定范围内工作，例如+-2g。当设备受到超出其当前范围的加速度时会发生什么，比如说 10g？内核会自动扩大范围并调用onAccuracyChanged()方法吗？

我可以仅仅依靠将测量更高值的事实吗？我发现没有公共 API 可以更改加速度计的范围。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:50:24.147

我猜这些传感器通常不是为这样的加速度而构建的，因此它们无法测量这样的值，因此你无法构建这样的 API。

但无论如何，可以肯定的是，您可以编写一个简单的应用程序来显示/记录当前加速度，例如每 10 毫秒，并且手动产生 >= 2g 并不太难（将其放在桌子上约 50 厘米，看看发生，如果你敢......：P）。

# teamcity - 在路径“p4”中找不到 P4 可执行文件

> ID：12139588
> 
> 赞同：2
> 
> 时间：2012-08-27T09:42:25.850
> 
> 标签：teamcity, perforce

通过 Perfoce 在 Teamcity 中将版本控制设置设置为 CVS 类型，在 P4 可执行文件的路径中键入“p4”。然后单击“保存”和“测试连接”，然后警告“无法在路径 'p4' 找到 P4 可执行文件”。有人在将 Teamcity 与 Perforce 集成时遇到这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T11:19:39.350

P4 可执行文件的路径不是`p4`，通常是

`C:\Program Files\Perforce\p4.exe`

# jquery - jQuery中的图像旋转

> ID：12139595
> 
> 赞同：-1
> 
> 时间：2012-08-27T09:42:56.667
> 
> 标签：jquery, image-rotation

我在一个有 2 个按钮的页面上有 10 张图片：下一个和上一个。接下来，我想从第 1 个图像转到第 10 个图像，反之亦然，用于上一个按钮。这是我的html代码：

```
 <div id="Div1"> <img class='display' src=""  alt="adf"/></div>
    <button id="Button1">prev</button>
    <button id="Button2">next</button>
<div id='Div2'>
     <img src="a_large.jpg" alt="aadf" />
    <img src="b_large.jpg" alt="dfD" />
     <img src="c_large.jpg" alt="aadf" />
    <img src="d_large.jpg" alt="dfD" />
     <img src="e_large.jpg" alt="aadf" />
    <img src="f_large.jpg" alt="dfD" />
     <img src="g_large.jpg" alt="aadf" />
    <img src="h_large.jpg" alt="dfD" />
     <img src="i_large.jpg" alt="aadf" />
    <img src="j_large.jpg" alt="dfD" />
    </div> 
```

我是 jQuery 的新手。你能告诉我下一个和上一个按钮的代码吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:01:16.030

当您只需要显示时，不要将所有图像`div`保留在 1\. 将图像的名称保留在数组中，例如：

```
arrimg = ['a_large.jpg','b_large.jpg','b_large.jpg'...'j_large.jpg'] 
```

最初只保留第一个图像，属性值为 0 `ind`：

```
<div id='Div2'>
  <img src="a_large.jpg" alt="aadf" ind = '0' />
</div. 
```

然后做类似的事情（给你的按钮分配一个say类`button`来减少代码行数）：

```
$(".button").click(function() {
   if ($(this).prop('id') == 'Button1') {
     if ($("#Div2 img").prop('ind') != 0) {
        ind = parseInt($("#Div2 img").prop('ind'));
        $("#Div2 img").prop({'src': arrimg[ind-1],'ind':(ind-1)+"");
    }
    else {
         $("#Div2 img").prop({'src': arrimg[9],'ind':'9');
    }
    }
    else {
       if ($("#Div2 img").prop('ind') != 9) {
        ind = parseInt($("#Div2 img").prop('ind'));
        $("#Div2 img").prop('src': arrimg[ind+1],'ind': (ind+1)+"");
    }
    else {
         $("#Div2 img").prop('src': arrimg[0],'ind':0});
    }
    }          
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:12:18.763

这是一种预加载图像的方法，然后循环浏览按钮上的预加载图像：

```
// preload images
var preloads = [];
var imageIndex = 0;
function preloadImages() {
    var img, base = "a".charCodeAt(0);
    for (var i = 0; i < 10; i++) {
        img = new Image();
        img.src = String.fromCharCode(base + i) + "_large.jpg";
        preloads.push(img);
    }
}

preloadImages();

$(document).ready(function() {
    $("#Button2").click(function() {
        ++imageIndex;
        if (imageIndex >= preloads.length) {
            imageIndex = 0;
        }
        $("#Div1 .display").attr("src", preloads[imageIndex].src);
    });

    $("#Button1").click(function() {
        --imageIndex;
        if (imageIndex < 0) {
            imageIndex = preloads.length - 1;
        }
        $("#Div1 .display").attr("src", preloads[imageIndex].src);
    });

    // load the first image        
    $("#Div1 .display").attr("src", preloads[imageIndex].src);

});    
​ 
```

Demonstration (without the actual images): [http://jsfiddle.net/jfriend00/MKHJC/](http://jsfiddle.net/jfriend00/MKHJC/)

# android - 带有 Android 的 SQLite 数据库浏览器

> ID：12139599
> 
> 赞同：5
> 
> 时间：2012-08-27T09:43:03.553
> 
> 标签：android, sqlite

我对 SQLiteDatabase 可以接受哪些文件格式感到困惑。我想使用我在 SQLite 数据库浏览器中创建的预先存在的数据库。SQL、CSV 和文本文件有导出选项。我尝试在 Notepad++ 中将文件作为文本文件和 SQL 文件打开，我看到的只是一个带有 INSERTS 的 CREATE TABLE 命令（我通过 SQLite 数据库浏览器创建的）。**这是错误的文件类型吗？或者 SQLiteDatabase 是否真的使用这些信息来创建表？**我已将这些文件与自 2009 年以来引用的代码一起使用：[http ://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)但是该链接上的代码对我不起作用。该文件要么无法打开进行复制，要么可以打开，但一旦尝试查询，我就会收到一条错误消息，提示“表名”找不到这样的表。

代码：

```
public class DatabaseHelper extends SQLiteOpenHelper {

    public final static int DB_VERSION = 1;
    public final static String DB_PATH = "/data/data/seattle.tourists/databases/";
    public final static String DB_NAME = "attractioninfo";

    Context myContext;

    public DatabaseHelper(Context context ) {
        super( context, DB_NAME, null, DB_VERSION );
        myContext = context;
    }

    public void createDatabase() {
        boolean dbExists = databaseExists();

        if ( !dbExists ) {
            this.getReadableDatabase();

            try {
                copyDatabase();
            }
            catch ( IOException e ) {
                System.out.println( "copy database error" );
            }
        }
    }

    private boolean databaseExists() {
        SQLiteDatabase checkDB = null;

        try { 
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase( myPath, null, SQLiteDatabase.OPEN_READONLY );
        }
        catch ( SQLiteException e ) {
            System.out.println( "database does not exist" );
        }

        return checkDB != null ? true : false;
    }

    private void copyDatabase() throws IOException {
        InputStream myInput = myContext.getAssets().open( DB_NAME );

        String outFileName = DB_PATH + DB_NAME;

        OutputStream myOutput = new FileOutputStream( outFileName );

        byte [] buffer = new byte[ 1024 ];
        int length;

        while( ( length = myInput.read( buffer ) ) > 0 )
            myOutput.write( buffer, 0, length );

        myOutput.flush();
        myOutput.close();
        myInput.close();
    }

    public SQLiteDatabase openDatabase() throws SQLException { 
        // Open the database
        String myPath = DB_PATH + DB_NAME;

        if ( databaseExists() )
            return SQLiteDatabase.openDatabase( myPath, null, SQLiteDatabase.NO_LOCALIZED_COLLATORS );

        return null;
    }

    public synchronized void close() {
        super.close();
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

    }

} 
```

![文件肯定在那里](../Images/9b8db01484b30ae6ba2be902d6f43171.png)

顺便说一句，这是我的数据库文件的内容。

```
BEGIN TRANSACTION;
CREATE TABLE ExtraInfo (commonName , hours , fare , website , summary );
INSERT INTO ExtraInfo VALUES('Alki Beach Park','4 am - 11:30 pm',-1,-1,'Enjoy the Seattle skyline, ride bikes, or fly kites at Alki Beach.');
INSERT INTO ExtraInfo VALUES('Bradner Gardens','4 am - 11:30 pm',-1,-1,'A 1.6-acre park in the Mt. Baker neighborhood of southeast Seattle. Enjoy a garden, p-patch, basketball court and more.');
INSERT INTO ExtraInfo VALUES('Experience Music Project','Hours vary by season. See website for details.','Range by age: $14 - $20',-1,'Experience music hands on! Explore music history and get creative in the interactive Sound Lab.');
INSERT INTO ExtraInfo VALUES('Japanese Garden','Hours vary by season. See website.','Varies. See website.','http://www.seattle.gov/parks/parkspaces/japanesegarden.htm','Located within the Washington Park Arboretum, this is a 3.5 acre formal garden designed and constructed under the supervision of world-renowned Japanese garden designer Juki Iida in 1960.');
INSERT INTO ExtraInfo VALUES('Katie Blacks Garden','4 am - 11:30 pm',-1,-1,'This historic landscape was originally created for Katie Black, an early Seattle settler. The community rallied to preserve it and has worked hard to remove blackberries and restore the garden.');
INSERT INTO ExtraInfo VALUES('Kubota Garden','6 am - 10 pm',-1,-1,'Hidden in South Seattle, Kubota Garden is a stunning 20 acre landscape that blends Japanese garden concepts with native Northwest plants.');
INSERT INTO ExtraInfo VALUES('Museum Of Flight','Daily 10 am - 5 pm.\nClosed Thanksgiving and Christmas.','Adults $17\nSeniors (65+) $14\nYouth(5-17) $9\nChildren (4 and under) Free','http://www.museumofflight.org/','A museum dedicated to the history of air and space flight. Collection includes 150+ historically significant air- and spacecraft.');
INSERT INTO ExtraInfo VALUES('Pacific Science Center','Daily 9:45 am - 6 pm','Exhibits Admission\nAdults(16-64) $16\nSeniors(65+) $14\nYouth(6-15) $11\nKids(3-5) $9',-1,'Explore science hands on through a variety of different exhibits such as "Dinosaurs: A Journey Through Time" or the "Science Playground".');
INSERT INTO ExtraInfo VALUES('Parsons Garden','6 am - 10 pm',-1,-1,'Formerly the family garden of Reginald H. Parsons, the park was given to the City in 1956 by the family''s children. Often used for ceremonies, this mall but lovely garden is a hidden gem on Queen Anne''s south slope.');
INSERT INTO ExtraInfo VALUES('Science Fiction Museum','Hours vary by season. See website for details.','Range by age: $14 - $20',-1,'Explore science fiction through film and literature at the Science Fiction Museum. Browse the exhibits'' large collection of film and TV props and memorabilia, as well as books.');
INSERT INTO ExtraInfo VALUES('Seattle Aquarium','Daily 9:30 am - 5 pm\nThanksgiving and Christmas Day 9:30 am - 3 pm\nChristmas Day Closed','Adults (13+) $19.95\nYouth(4-12) $13.95\nChild(3  & under) Free','http://www.seattleaquarium.org/','Come see a variety of cute and strange aquatic creatures!');
INSERT INTO ExtraInfo VALUES('Seattle Childrens Theatre',-1,-1,-1,'Seattle Children''s Theatre provides children of all ages access to professional theatre, with a focus on new works, and theatre education.');
INSERT INTO ExtraInfo VALUES('Volunteer Park Conservatory','6 am - 10 pm',-1,-1,'Located in the heart of Seattle, Volunteer Park is home to the Volunteer Park Conservatory, Seattle Asian Art Museum, Puget Sound and downtown views, and more.');
INSERT INTO ExtraInfo VALUES('Washington Park Arboretum','Dawn to Dusk',-1,-1,'Managed by the UW and City of Seattle, this 230 acre arboretum has a dynamic assortment of plants found nowhere else.');
INSERT INTO ExtraInfo VALUES('Woodland Park Zoo Rose Garden','4 am - 11:30 pm',-1,-1,'A multipurpose park and recreation space southwest of Green Lake and north of the Fremont district. Ideal for picnics (reservable), BBQs, sports and recreation.');
COMMIT; 
```

这就是我询问文件格式的原因。我之前打开过其他 sql、sqlite 文件，得到的是二进制乱码。我这里有一个简单的 CREATE TABLE 命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T00:28:25.913

我对两件事进行了更改。使用 SQLite.openDatabase(...) 的 CREATE_IF_NECESSARY 标志，我意识到我的文件格式错误。使用数据库浏览器时，我正在导出到 SQL 或 TXT，而不是使用保存的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:48:00.593

它不起作用，可能您没有在清单文件中授予权限。我认为该教程没有提到它。将此添加到您的清单文件中：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T09:50:23.243

你需要创建一个 db 类 + db helper 类！

为什么？出于开发目的，您可以在 emelutor 中使用数据库，但在设备上（如果它没有根）您无法访问数据/数据文件夹

只需创建一个助手类。然后它将创建您的数据库，在更新等时对其进行管理...

4 更多信息： [http ://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

编辑：支持任何文件类型，因为 linux 使用魔术字节来确定文件类型...当您从 SQLite 浏览器保存数据库时，将其保存为 name.db 或只是名称（不是 sql 转储）

# c++ - 获取便携式设备通知

> ID：12139601
> 
> 赞同：0
> 
> 时间：2012-08-27T09:43:20.630
> 
> 标签：c++, visual-c++, device-orientation, usb-drive

大家好，当用户将某些便携式设备连接到系统时，我需要一个 C++ 代码来获取便携式设备通知。我获取大容量存储设备通知的部分代码如下，请仔细阅读并建议我如何为便携式设备执行此操作。

```
LRESULT CALLBACK DLLWindowProc (HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)
{
static HDEVNOTIFY hDeviceNotify;
__int32 devType;
char c;
char buf[5]={0};
PawCallBack *callbackHandle;
char Buffer[10];
switch (message)
{
case WM_CREATE:
    RegisterHotKey(hwnd, 1, MOD_ALT  , VK_SNAPSHOT);
    RegisterHotKey(hwnd, 2, 0 , VK_SNAPSHOT);
    if ( ! DoRegisterDeviceInterfaceToHwnd(WceusbshGUID, hwnd, &hDeviceNotify) )
    {
        // Terminate on failure.
        ExitProcess(1);
    }
    break;
case WM_HOTKEY:
    LPSTR temppath;
    CaptureScreen(GetDesktopWindow());
    UnicodeToAnsi(temp_filename, &temppath);
    callbackHandle      = new PawCallBack;
    strcpy(callbackHandle->ImageSavePath,temppath);
    callbackHandle->servicecode     = 111;
    if(!myPipe.SendMsg(_T("PAWAGENT"), callbackHandle, sizeof(PawCallBack), Buffer, 10,0))
    {
        //MessageBoxA(NULL,"Cannot Send to pipe","Drive Info",MB_OK);
    }
    delete callbackHandle;

    break;

case WM_DEVICECHANGE:
    {
        PDEV_BROADCAST_HDR pHdr;
        PDEV_BROADCAST_VOLUME vol;

        // Output some messages to the window.
        switch (wParam)
        {
        case DBT_DEVICEARRIVAL:
            //MessageBoxA(NULL,"Device Arrived", "Info", MB_OK);
            pHdr = (PDEV_BROADCAST_HDR)lParam;
            if(pHdr->dbch_devicetype == DBT_DEVTYP_VOLUME)
            {

                vol = (PDEV_BROADCAST_VOLUME)pHdr;
                c = DriveMaskToLetter(vol->dbcv_unitmask);
                memset(buf,0,5);
                sprintf(buf,"%c:", c);
                //MessageBoxA(NULL,&c, "Device Arrived", MB_OK);
                callbackHandle      = new PawCallBack;
                strcpy(callbackHandle->DriveName, buf);
                callbackHandle->servicecode     = 109;
                if(!myPipe.SendMsg(_T("PAWAGENT"), callbackHandle, sizeof(PawCallBack), Buffer, 10, 0))
                {
                    //MessageBoxA(NULL,"Cannot Send to pipe","Drive Info",MB_OK);
                }
                delete callbackHandle;
            }
            break;

        case DBT_DEVICEREMOVECOMPLETE:
            pHdr = (PDEV_BROADCAST_HDR)lParam;
            if(pHdr->dbch_devicetype == DBT_DEVTYP_VOLUME)
            {
                vol = (PDEV_BROADCAST_VOLUME)pHdr;
                c = DriveMaskToLetter(vol->dbcv_unitmask);
                memset(buf,0,5);
                sprintf(buf,"%c:",c);
                callbackHandle      = new PawCallBack;
                strcpy(callbackHandle->DriveName,buf);
                callbackHandle->servicecode     = 110;

                if(!myPipe.SendMsg(_T("PAWAGENT"), callbackHandle, sizeof(PawCallBack), Buffer, 10, 0))
                {
                    //MessageBoxA(NULL,"Cannot Send to pipe","Drive Info",MB_OK);
                }
                delete callbackHandle;
            }
            break;

        }
        break;
case WM_DESTROY:
    PostQuitMessage (0);
    break;
case WM_CLOSE:
    if ( ! UnregisterDeviceNotification(hDeviceNotify) )
    {
        MessageBoxA(NULL, "UnregisterDeviceNotification Failed", "Info",MB_OK);
    }
    UnregisterHotKey(hwnd, 1);
    UnregisterHotKey(hwnd, 2);
    break;
default:
    return DefWindowProc (hwnd, message, wParam, lParam);
    }
    return 0;
}
} 
```

上面的代码非常适合大容量存储设备，但现在我想将其扩展到便携式设备，所以请查看我的代码并建议我为便携式设备做什么。提前致谢 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:29:03.540

我想你需要看看@这两个链接

这是让您开始使用 WMI [http://blogs.technet.com/b/heyscriptingguy/archive/2006/03/20/how-can-i-get-a-list-of-installed-device的非常基本的教程-drivers.aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2006/03/20/how-can-i-get-a-list-of-installed-device-drivers.aspx)

这是您需要的真实代码

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa390425(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa390425(v=vs.85).aspx)

# jquery-plugins - 办公时间 jquery 脚本

> ID：12139603
> 
> 赞同：0
> 
> 时间：2012-08-27T09:43:40.003
> 
> 标签：jquery-plugins

我正在寻找允许快速选择办公时间的 jquery 脚本（插件），如图所示：

![在此处输入图像描述](../Images/79b7c5dd7dc60e08e412308e20a56ea5.png)

选择工作时间，使用“鼠标拖动”，因此用户可以通过星期几快速选择工作时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:49:29.780

显而易见的选择是：

[http://jqueryui.com/demos/selectable/](http://jqueryui.com/demos/selectable/)

祝你好运！

# c# - 如何从 Web 服务向 GridControl 填充数据？

> ID：12139606
> 
> 赞同：0
> 
> 时间：2012-08-27T09:43:46.750
> 
> 标签：c#, winforms, devexpress, bindingsource, gridcontrol

我在向 GridControl 添加行/单元格值时遇到问题。我使用 Web 服务作为数据源。我的网络服务功能运行完美并返回一个 xml 类型的值，例如

```
<User>
<UserID>000015</UserID>
<UserGroup>MR</UserGroup>
<UserName>ARIF SETYOWARDOYO</UserName>
<IsActive>1</IsActive>
</User> 
```

我将我的网络服务作为“添加服务”添加到我的项目中。而且，我的 BindingSource 代码：

```
userBindingSource.DataSource = typeof(DXWindowsApplication1.WebService.User); 
```

我已将 BindingSource 附加到 GridControl，它会自动创建 4 列，分别是 UserID、UserGroup、UserName 和 IsActive。
但他们的行中没有数据。如果我在下面运行此脚本，它将运行并返回值..

```
WebService.MyWebServiceWs = new WebService.MyWebServiceWs ();
WebService.User[] user = Ws.GetUserDetails();
string userId = user[0].UserID.ToString();
string userGroup = user[0].UserGroup.ToString();
string userName = user[0].UserName.ToString();
string isActive = user[0].IsActive.ToString();//int isActive = user[0].IsActive.Value; 
```

所以我的问题是，接下来我该怎么做才能将这个 WebService 数据检索到 GridControl 中？
任何参考将不胜感激......
谢谢你:)
干杯..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:52:22.303

我在没有 web 服务的情况下从 web 读取 xml，并使用以下代码填充我的表：

```
// needed variable
private DataSet ds;
//read xml and poupolate table
 System.Xml.XmlDataDocument xmlDatadoc = new System.Xml.XmlDataDocument();

                xmlDatadoc.DataSet.ReadXml("http://your link to xml");
                ds = xmlDatadoc.DataSet;

                datagridviwe1.DataSource = ds.DefaultViewManager;
                datagridviwe1.DataMember = "User"; 
```

但是您需要在我们的 xml 文件中进行一些更改，这是一个示例：

```
<User UserID="000015" UserGroup="MR" UserName="ARIF SETYOWARDOYO" IsActive="1" />
<User UserID="000016" UserGroup="MRS" UserName="LADY LAYON" IsActive="0" /> 
```

这个包含所有值的填充表，用于个性化显示的内容，您需要将源与您的 xsd 模式绑定并编辑表生成。

# php - CakePHP 禁用按钮

> ID：12139607
> 
> 赞同：-2
> 
> 时间：2012-08-27T09:43:48.833
> 
> 标签：php, cakephp, edit

我想知道如何创建一个函数，当单击记录的禁用按钮时，它将活动列的特定值更改为 0。它应该位于 ['Album']['active'] 下默认情况下是1。我试过了

```
if ($id) { $this ->data[$id]['Album']['active'] = 0; 
     $this->Album->save($this->data); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:14:30.670

试试这个功能：

```
function active($id=null)
{

       $this->Album->id = $id;
        $this->data = $this->Album->read();
        if($this->data['Album']['active']==0)
        {
            $this->data['Album']['active'] = 1;
        }
        else            {
            $this->data['Album']['active'] = 0;
        }
        if($this->Album->save($this->data['Album']))
        {
            $this->redirect('/Controller/action');
        }

} 
```

# c - 为什么控制台上没有关于信号处理的输出？

> ID：12139609
> 
> 赞同：8
> 
> 时间：2012-08-27T09:44:02.523
> 
> 标签：c, linux, unix, signals

我正在从 Unix 环境中的高级编程中尝试这个程序。

```
#include<stdio.h>
#include<signal.h>

static void handler(int sig){
    if(sig == SIGUSR1)
        printf("handled user1 signal");
    else if(sig == SIGUSR2)
        printf("handles user2 signal");
    else
        printf("unkown signal");
}

int main(){

    if(signal(SIGUSR1, handler) == SIG_ERR)
        printf("can't handle signal SIGUSR1");
    if(signal(SIGUSR2, handler) == SIG_ERR)
        printf("can't handle signal SIGUSR2");
    for(;;)
        pause();
    return 0;
} 
```

我正在使用 Ubuntu 11.10。我用 gcc 编译程序，然后按照书中的说明运行 a.out。

$./a.out& [1]+ 1345

$杀死-USR1 1345

但是没有打印输出。该程序一直在后台运行，我必须杀死它。

我尝试过的其他事情：

1.  尝试处理 SIGINT 以查看在后台运行的程序是否导致问题。还是没有输出。

2.  下载了最新版本的 FreeBSD 并在上面尝试了相同的程序，但遇到了同样的问题。

3.  我在设置信号处理程序之前放了一条 printf 语句：

    ```
    int main(){
        printf("printf is working...");
        //exit(0);
        if(signal(SIGUSR1, handler) == SIG_ERR)
        ... 
    ```

当 exit() 被注释时，没有输出。当我取消注释时，将打印输出。

请告诉我我在这做错了什么？

PS：不建议使用 sigaction()。我正在学习 Unix 编程，而不是构建任何实际应用程序。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-27T09:47:36.537

的输出`printf`被缓冲。这意味着它存储在内存中，直到刷新到输出。刷新文本的最佳方法`printf`是用换行符结束文本。您也可以使用该`fflush`功能手动冲洗。

但是，您应该注意，在信号处理程序中使用类似`printf`和`fflush`不被认为是安全的输出函数。

# javascript - Javascript的多重显示隐藏功能

> ID：12139611
> 
> 赞同：0
> 
> 时间：2012-08-27T09:44:16.837
> 
> 标签：javascript, html

目前我正在使用 JavaScript 开发一个简单的显示/隐藏 div 函数。现在我已经让它部分工作了。看一下，或者您可以复制并粘贴并在您的 com 上尝试我的代码。这是代码：

[http://jsfiddle.net/HRn3Q/](http://jsfiddle.net/HRn3Q/)

当前的问题是我不知道如何触发下拉列表中的内容并将其显示/隐藏在与 graph1、graph2 和 graph3 等相同的位置......我也想要类似当显示图 1 时的内容当我点击 show div 2 时，图 1 的内容将被 graph2 替换。我希望我已经清楚地说明了我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:14:32.467

这应该这样做。由于某种原因，该页面无法识别该状态下的功能。

转身：

```
function toggleStock(id)
{
} 
```

进入：

```
toggleStock = function(id)
{
} 
```

[http://jsfiddle.net/HRn3Q/](http://jsfiddle.net/HRn3Q/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-28T10:00:05.837

```
<script>
    var opacity =0;
    var intervalId =0;

    function fadein() 
    {
        intervalId = setInterval(hide,200)  
    }

    function hide()
    {
        var img = document.getElementById("img1");
        opacity = Number(window.getComputedStyle(img).getPropertyValue("opacity"));
        if(opacity>0)
        {
            opacity=opacity-0.2;
            img.style.opacity=opacity;
        }
        else
        {
            clearInterval(intervalId);
        }
    }

    function fadeout()
    {
        intervalId = setInterval(show,200)
    }
    function show()
    {
        var img = document.getElementById("img1");
        opacity = Number(window.getComputedStyle(img).getPropertyValue("opacity"));
        if(opacity<1)
        {
            opacity=opacity+0.1;
            img.style.opacity= opacity;
        }
        else
        {
            clearInterval(intervalId);
        }
    }
</script> 
```

# php - 从网页获取 href 属性？

> ID：12139615
> 
> 赞同：1
> 
> 时间：2012-08-27T09:44:21.450
> 
> 标签：php, parsing, html-parsing

我需要从以下获取 href 属性：

```
<tr>
    <td><h2 class="officers"><a href="/finance/stocks/officerProfile?symbol=ABB.N&officerId=232795" class="link">Roger&nbsp;Agnelli</a></h2></td>
    <td>53</td>
    <td>2002</td>
    <td>Non-Executive Member of the Board of Directors</td>
</tr> 
```

我在这里尝试的是

```
$a = $tr->getElementsByTagName('a');

echo $a->getAttribute('href'); 
```

无法获得 href 值。我在哪里失踪？？我在这里需要什么，我希望输出href链接，然后将该href链接解析为“officer id”。

希望我的问题很清楚..帮助我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:59:31.667

[`getAttribute`](http://in2.php.net/manual/en/domelement.getattribute.php)不是[`DOMNodeList`](http://in2.php.net/manual/en/class.domnodelist.php)它的方法的方法：[`DOMElement`](http://in2.php.net/manual/en/class.domelement.php)。因此，您必须执行以下操作：

```
foreach ($a as $element){
    var_dump($element->getAttribute('href'));
} 
```

而不是`echo $a->getAttribute('href');`.

# android - 如何在Android中使用HTML5的断线功能？

> ID：12139617
> 
> 赞同：2
> 
> 时间：2012-08-27T09:44:24.077
> 
> 标签：android

页面在Android的webview中加载html5页面时可以实现Cache。离线时如何提交，在线时同步服务器。我知道HTML5可以实现该功能，但我不知道细节。我如何实现它？谢谢你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T02:07:08.513

页面提交时，js调用java代码，判断网络连接是否正常。

如果没有网络，则将信息记录在Java代码中，在程序重启或计时时判断网络是否正常。

如果有网络连接，则java代码中有httpclient，在java调用页面js代码提交。

# django - 参数的 Django views.py 代码

> ID：12139618
> 
> 赞同：0
> 
> 时间：2012-08-27T09:44:32.250
> 
> 标签：django

我想检索特定用户的所有图像。我需要帮助。

这是我的模型

```
class image_archive(models.Model):
 image_id            = models.AutoField(primary_key=True)
 event_id            = models.ForeignKey(event_archive,db_column='event_id')
 image_url           = models.CharField(max_length=45)
 screenshot_url      = models.URLField(max_length=200)
 image_title         = models.CharField(max_length=45)
 date_submitted      = models.DateTimeField()
 image_description   = models.TextField() 
 original_image      = models.ImageField(upload_to=file_upload_path)
 formatted_image     = ImageSpecField([FormatImage()],image_field='original_image', format='JPEG',
                                     options={'quality': 90})
 thumbnail_image     = ImageSpecField([Adjust(contrast=1.2, sharpness=1.1),
                                      ResizeToFill(50, 50)], image_field='original_image',
                                     format='JPEG', options={'quality': 90} 
```

这是我的 urls.py

```
urlpatterns = patterns('gallery.views',   
url(r'^(?P<event_id>\d+)/images/$', 'eventimage'),             

) 
```

这是我的意见.py

```
def eventimage(request,event_id):
e_piclist  =  image_archive.objects.get(id = event_id)  
return render_to_response('gallery/image.html', 
 {  
    'e_piclist' : e_piclist,  
    'image_archive':image_archive,
 }) 
```

但这并没有显示特定事件图像的图像。需要帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:51:25.460

您的查询不正确，您可以使用

`e_piclist = image_archive.objects.filter(event_id = event_id)`.

另外，尝试使用`.filter()`而不是`.get()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:54:09.573

```
from django.shortcuts import render, get_object_or_404

def eventimage(request,event_id):

    my_event = get_object_or_404(Event, pk=event_id)
    image_list = my_event.image_archive_set.all()

    return render(request,'gallery/image.html',{'e_piclist':image_list}) 
```

# java - Java连接mssql 2008 R2 10.xxx地址

> ID：12139621
> 
> 赞同：0
> 
> 时间：2012-08-27T09:44:42.853
> 
> 标签：java, sql, sql-server

我正在尝试连接到位于我网络中 10.xxx 地址的 MS-SQL 2008 R2 服务器。

我的java代码如下

```
public void getConnection() throws ClassNotFoundException, SQLException
{
    Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
    Connection conn = DriverManager.getConnection("jdbc:sqlserver://10.x.x.x:1433/TestTv","username","password");
} 
```

但我收到如下错误

> com.microsoft.sqlserver.jdbc.SQLServerException：端口号 1433/TestTv 无效。

我也尝试过使用端口 1443 和同样的问题。我如何以及在哪里可以检查我的 2008 R2 服务器要使用的端口？在**sql server 配置管理器**下 SQLEXPRESS TCP/IP 端口的协议设置为 1443，**客户端协议**下的端口设置为 1433。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:49:09.123

为什么要添加`/TestTV`到地址的末尾？试试没有那个。

如果 TestTV 是 SQL 实例，则语法为`jdbc:sqlserver://10.x.x.x\TestTv:1433`

端口 1433 是标准端口。

# python - 从文档中检索单个属性

> ID：12139624
> 
> 赞同：1
> 
> 时间：2012-08-27T09:45:09.187
> 
> 标签：python, mongodb

今天是个好日子。假设我们有一个集合和一个看起来像这样的文档：

```
 test_doc = {
    "ID" : "123",
    "a" : [
                    {
                        'x' : "/",
                        'y' : "2000",
                        'z' : "1000"
                    },
                    {
                        'x' : "/var",
                        'y' : "3500",
                        'z' : "3000"
                    }
           ]

      } 
```

我需要的是检索单个属性 az 。在 MongoDB 中，我使用以下查询：

```
db.testcol.find({"ID":"123","a.x":"/"},{'a.z':1}) 
```

它返回这个：

```
{ "_id" : ObjectId("skipped"), "a" : [ { "z" : "1000" }, { "z" : "3000" } ] } 
```

如您所见，它返回所有 z 属性，但是当条件为时，我只需要第一个或第二个`{"ID":"123","a.x":"/var"}` 因此，问题是：在这种情况下如何获得单个属性？这只是一个糟糕的设计问题还是我应该以某种方式在代码（python）中处理返回的文档？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:10:35.200

在 MongoDB 2.0 及更早版本中，这是不可能的。你想要做的是返回数组的一个特定元素——但这不是你的投影实际上在做什么，它只会返回整个数组，然后是每个数组的 z 元素。

但是，使用 2.2（撰写此答案时为 rc2），情况有所好转。您现在可以将[$elemMatch](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24elemMatch)用作投影的一部分（有关详细信息，请参阅[SERVER-2238](https://jira.mongodb.org/browse/SERVER-2238)），以便您只拉回所需的数组元素。所以，试试这样的事情：

```
db.foo.find({"ID":"123",'a':{$elemMatch:{'x':"/"}}},{_id : 0, 'a.$': 1})
//returns
{ "a" : [ { "x" : "/", "y" : "2000", "z" : "1000" } ] } 
```

或者，只需在投影本身中使用 $elemMatch，您可能认为它更简洁：

```
db.foo.find({"ID":"123"},{_id : 0, 'a':{$elemMatch:{'x':"/"}}})
//returns 
{ "a" : [ { "x" : "/", "y" : "2000", "z" : "1000" } ] } 
```

因此，现在，至少返回的数组仅包含您想要的条目，并且您可以简单地引用相关的 z 元素（尚不支持子文档上的 elemMatch 投影）。

最后但并非最不重要的一点是，在 2.2 中，我们有聚合框架，它可以做的一件事（使用`$project`操作符，就是重塑您的文档并将子文档和数组元素更改为顶级数组。为了获得您想要的结果，您会做这样的事情：

```
db.foo.aggregate( 
        {$match : {"ID":"123"}},  
        {$unwind : "$a"},  
        {$match : {"a.x":"/"}},  
        {$project : {_id : 0, z : "$a.z"}}
) 
```

结果如下所示：

```
{ "result" : [ { "z" : "1000" } ], "ok" : 1 } 
```

# android - 如何在 Android 上使用 FileTransfer.download

> ID：12139628
> 
> 赞同：4
> 
> 时间：2012-08-27T09:45:33.773
> 
> 标签：android, cordova, file-transfer

我在 Android 上使用 Phonegap 1.9.0，但网络上的示例很少，所以我担心下载文件。

```
var ft = new FileTransfer();
ft.download(
    "http://www.something.com/test.zip",
    "test.zip", // <- Trouble 1
    function(entry) {
        alert("success");
    },
    function(err) {
        alert(err); // <- Trouble 2
    }
); 
```

1.我不明白指定适合这个参数的文件路径的方式。我应该如何指定本地路径？或者是否有任何必需的 Android.permission？
2\. 显示消息“找不到类”。这是什么原因？
3.下载文件的原生Java路径是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-06T14:55:41.903

```
// This worked for me
var ft = new FileTransfer();
ft.download(
  "http://www.something.com/test.zip", // what u download
  "/sdcard/test.zip", // this is the filename as well complete url
  // fileSystem.root.toURL() + "test.zip",  use ios and others
  function(entry) {
    alert("success");
    alert(JSON.stringify(entry));

  },
  function(err) {
    alert(err);
    alert(JSON.stringify(err));
  }
); 
```

您可以在 ADT Eclipse DDMS Perspective -> File Explorer 中检查目录结构

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T20:14:54.910

是的，Cordova/Phonegap 文档在现实世界的例子中非常精简！

1.  Simon Mac Donald 有一篇关于下载的好文章：http: [//simonmacdonald.blogspot.co.uk/2012/04/sorry-for-being-gone-so-long-vacation.html](http://simonmacdonald.blogspot.co.uk/2012/04/sorry-for-being-gone-so-long-vacation.html) 如果您想下载多个文件，请查看说出他的要点：[https ://gist.github.com/3835045](https://gist.github.com/3835045)

2.  我认为 FileTransfer 仅在设备上可用（可能是模拟器？），但我也在浏览器中收到此错误 - 也许其他人可以对此进行解释/解决方法。

3.  这取决于平台，但可以通过 FileSystem.root.fullPath 找到。如果要附加文件名，则需要添加斜杠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T20:51:08.580

```
var ft = new FileTransfer();
ft.download(
    "http://www.something.com/test.zip", // what u download
    "", // this is dir which u download, right now, it will download to mnt/sdcard/
    function(entry) {
        alert("success");
    },
    function(err) {
        alert(err); 
    }
); 
```

# tridion - 使用 Visual Studio 中的构建后事件在 Tridion 中上传 DLL 时出错

> ID：12139633
> 
> 赞同：3
> 
> 时间：2012-08-27T09:45:45.270
> 
> 标签：tridion, tridion-2011

我正在尝试通过 Visual Studio 中项目的以下构建后事件在 Tridion Content Manager 中上传程序集： C:\Users\\Documents\Visual Studio 2010\Projects\\bin\Debug\name of dll

已经通过cmd创建了config.xml，如下：

```
<?xml version="1.0"?>
<templateAssemblyUploadConfig>
  <targetURL>http://<url>/</targetURL>
  <userName>domain\user id</username>
  <password>password</password>
  <uploadPDB>false</uploadPDB>
</templateAssemblyUploadConfig> 
```

当我尝试构建 DLL 时，它给出了以下错误。

错误 1：意外参数：意外参数 Studio C:\Users\\Documents\Visual Studio 2010\Projects\\\bin\Debug\dll 名称\EXEC DLL 名称

错误 2：命令“C:\Users\\Documents\Visual Studio 2010\Projects\\\bin\Debug\name of dll”退出代码 1\. DLL 名称

有人可以帮助解决问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T12:17:02.003

确保在命令之间使用“空格”而不是“输入”按钮。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T12:25:57.020

很高兴看到休斯顿的帮助。您也可以尝试使用 Visual Studio 插件，它允许以更简单的方式将 dll 上传到 Tridion [http://sdltridionworld.com/community/2011_extensions/AssemblyUploader2.aspx](http://sdltridionworld.com/community/2011_extensions/AssemblyUploader2.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-27T10:02:19.670

这是我的构建后事件：

```
E:\Tridion\bin\client\TcmUploadAssembly.exe  e:\Tridion\bin\client\config.xml "$(TargetPath)" /folder:tcm:43-61362-2 
```

# objective-c - 如何在 cocos2d 游戏开发中提高帧率 (FPS)？

> ID：12139636
> 
> 赞同：0
> 
> 时间：2012-08-27T09:45:59.123
> 
> 标签：objective-c, cocos2d-iphone, game-engine, frame-rate

其实我是 cocos2d 和 box2d 游戏开发的新手，今天我面临一个 FPS 问题，我的应用程序 FPS 速度并不是每台设备都保持不变，它会根据不同的 iPhone、iPad 设备和模拟器增加或减少它太低了，

请告诉我是否可以更改 FPS（每秒帧数）值，

由于这个问题，只有“视差”受到影响，其他物理工作完美，

任何帮助是极大的赞赏。请大家携手.. !,

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T03:31:14.340

您可以使用 didFinishLaunching 方法中的这一行更改应用程序委托中的动画间隔

```
[director setAnimationInterval:1.0/60]; 
```

延迟可能有多种原因，但导致旧设备延迟的一件事是允许您的 UIViewController 自动旋转而不是 CCDirector。要解决此问题，请转到您的 GameConfig.h 文件并注释掉并（取消注释掉？）另一行：

```
//#define GAME_AUTOROTATION kGameAutorotationUIViewController
#define GAME_AUTOROTATION kGameAutorotationCCDirector 
```

我还能想到另外两件事。首先，在 box2d 中使用固定的时间步长很重要。我在这个链接的帮助下实现了这个：

[http://www.cocos2d-iphone.org/forum/topic/8922](http://www.cocos2d-iphone.org/forum/topic/8922)

另一件事是您在旧设备和新设备上的 armv6 和 armv7 处理器差异，请在此处查看：

[在编译 iPhone 应用程序时，armv7 相对于 armv6 的优势是什么？](https://stackoverflow.com/questions/3310907/what-are-the-advantages-of-armv7-over-armv6-when-compiling-iphone-apps)

我忘记了如何实现这一点，但您的构建中基本上有两个不同的二进制文件，一个用于使用 armv6 的旧设备，一个用于使用 armv7 的新设备。如果我错了，有人纠正我。我希望这有帮助

# android - 如何从 json 在微调器中显示数据

> ID：12139637
> 
> 赞同：1
> 
> 时间：2012-08-27T09:45:59.530
> 
> 标签：android, json, spinner, android-spinner

我正在从 json url 检索值，然后将其存储在字符串变量中。现在我想在微调器中显示该值。我在我的 strings.xml 文件中创建了一个数组列表。xml 文件包含以下代码：

```
<string name="credit_card_title">Card Type</string>
<string-array name="credit_card">
<item >Select</item>
<item >Visa</item>
<item >MC</item>
<item >Amex</item>
<item >Discover</item> 
```

我的微调代码是：

```
<Spinner
android:id="@+id/crdtcrd_crdtype"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:entries="@array/credit_card"
android:prompt="@string/credit_card_title" /> 
```

从json url检索值后，我将其存储在变量名中`String cardtype`

现在如何`cardtype`在 Spinner 中显示 的值`crtdcrd_crdtype`....

json网址是：

[http://mygogolfteetime.com/iphone/login/ramu@gmail.com/123456](http://mygogolfteetime.com/iphone/login/ramu@gmail.com/123456)

从这个 URL 我必须检索的值`cardtype`和检索值后我必须在微调器中显示它..

`cardype`like有不同的值`visa, mc, amex and discover` 所有这些值都在我的`strings.xml`文件中，在检索到值后，我必须在 Spinner 中显示它。

需要帮助仍然无法找到解决方案..

我正在尝试显示`cardtype`使用以下代码的价值：

```
crdtcrd_crdtype.setSelection(cardtype); 
```

但它显示了许多错误.. 1\. 更改为 setSelected(..) 2\. 将 cardtype 的类型更改为 int

提前致谢...

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-27T10:29:28.293

请在下面找到示例代码：

布局文件：main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<Spinner
    android:id="@+id/cmbNames"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

布局：spinner_item.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/tvName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />
</LinearLayout> 
```

代码：MainActivity.java

```
public class MainActivity extends Activity {
private static final String NAME = "name";

//{"name":["abc","pqr","xyz"]}
private String jsonNames = "{\"" + NAME + "\":"
        + "[\"abc\",\"pqr\",\"xyz\"]}";
private SimpleAdapter adapter;
private Spinner cmbNames;
private List<HashMap<String, String>> lstNames;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    populateSpinner(jsonNames);

    cmbNames = (Spinner) findViewById(R.id.cmbNames);
    adapter = new SimpleAdapter(this, lstNames, R.layout.spinner_item,
            new String[] { NAME }, new int[] { R.id.tvName });
    cmbNames.setAdapter(adapter);
}

private void populateSpinner(String jsonString) {
    lstNames = new ArrayList<HashMap<String, String>>();

    try {
        JSONObject jsonObj = new JSONObject(jsonNames);
        JSONArray jArray = jsonObj.getJSONArray(NAME);
        for (int i = 0; i < jArray.length(); i++) {
            addNewName(jArray.getString(i));
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }

}

private void addNewName(String name) {
    HashMap<String, String> map = new HashMap<String, String>();
    map.put(NAME, name);
    lstNames.add(map);
}

} 
```

# c# - 派生类的基类和对象的引用是什么意思

> ID：12139640
> 
> 赞同：3
> 
> 时间：2012-08-27T09:46:10.170
> 
> 标签：c#, polymorphism

说

```
class Animal
{
  public Animal()
   {
      Console.WriteLine("Animal constructor");
   }
}

class Dog : Animal
{
public Dog()
   {
      Console.WriteLine("Dog constructor");
   }
   } 
```

现在问题来了，如果我写这样的代码

```
Animal A = new Animal(); 
```

在堆中创建了一个对象，我们的引用变量“A”指向堆中的那个位置。

现在如果我写这样的代码

```
Animal B = new Dog(); 
```

那么这里的引用 B 是如何指向对象狗的呢？

我被这个概念的视觉说明所困扰。很多次我读到“我们有一个 Animal 类型的对象，但它引用了一个 Dog 类型的对象”。但它的真正含义是什么？

任何详尽的答案都会很好。因为我正在深入学习很少的 .net (OOPS) 概念。

![动物和狗对象](../Images/a4cb3ab45e6fafaef000df967be2554a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:55:37.190

> 参考 B 如何指向对象狗？

引用 A 指向对象 Animal 的方式相同。我认为您可能会混淆类是如何通过继承与实例化相关的。

创建从另一个派生的类的新实例不引用其基类的任何实例，例如

```
Animal a = new Animal();
Animal b = new Dog(); 
```

`Animal b`没有参考或链接`Animal a`，它们是type的 2 个独立*实例*`Animal`。区别`Animal b`实际上是类型`Dog`，但已被*强制转换*为`Animal`. 当您向上/向下转换继承层次结构时，引用不会改变（认为这方面的技术术语称为*引用转换*）因此：

```
Dog d = (Dog)b; 
```

仍然指的是同一个对象`Animal b`，它只是一种不同*类型*的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T10:52:57.183

```
class Animal
{
    public Animal() 
    { 
        Console.WriteLine("Animal constructor"); 
    }

    public  void  show()        
    {
        Console.WriteLine("animal");
    }

}

class Dog : Animal 
{ 
    public Dog() 
    { 
        Console.WriteLine("Dog constructor"); 
    }

    public  void show()
    {
        Console.WriteLine("Dog");
    }
}

class Program
{
    static void Main(string[] args)
    {
        Animal B = new Dog();

        B.show();
        Console.ReadKey();
    }
} 
```

在上述程序中

```
B.show(); 
```

将调用基类`show()`

为什么，因为，`Dog()`也会有`show()`方法，因为使用的引用类型是 Animal ，所以会调用这个方法，如果你仍然想调用`show()`Dog 的类，请使用 virtual 和 override 概念

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T10:58:58.727

如果你看一下类（而不是它们的实例），那么我宁愿这样画：

![在此处输入图像描述](../Images/7c3a80ef899cf2a38fd233bd165ad11a.png)

这意味着`Dog`类通​​常比类具有更多的方法和属性`Animal`（例如，一只狗可以`bark`（方法）和四个`legs`（属性））。当然，在实例化这个类时必须保留额外的内存。想象一下，首先创建基类方法和属性，然后在内存中创建派生方法和属性：

```
class Dog : Animal 
{ 
    public Dog() 
    { 
        legs = 4;
        Console.WriteLine("Dog constructor"); 
    } 

    public int legs { get; private set; }

    public void bark()
    {
         Console.WriteLine("grrrwoof!"); 
    }
} 
```

如果您实例化 a`Dog`并将其分配给`Animal`引用变量，那么此引用只能访问 a`Animal`具有的方法。尽管如此，整个`Dog`对象仍然保存在内存中：

```
Dog d = new Dog();
Animal a = (Animal)d; 
```

换句话说，`d`能够做到以下几点：

```
Console.WriteLine(String.Format("Number of legs: {0}", d.legs.ToString())); 
d.bark(); 
```

但`a`不能这样做，因为这些“特性”没有在`Animal`类中定义。

现在重要的是要知道并非所有类型的演员表都是允许的。始终允许从 a`Dog`转换为 an `Animal`，因为这是安全的，但您不能将 an隐式`Animal`转换为 a `Dog`，因此以下代码会引发无效的转换异常：

```
Dog dogRef2 = a; // not allowed 
```

如果您知道自己在做什么（即，如果您确定`a`包含 的实例`Dog`），那么您可以显式转换如下：

```
Dog dogRef2 = (Dog)a; // allowed 
```

之后您可以访问属性和方法：

```
dogRef2.bark(); // works 
```

这是可行的，因为编译器和运行时总是以相同的结构化方式将方法和属性存储在内存中，并且还会创建一个内部描述符以在引用它时找到它。

请注意，这并不总是安全的，例如，如果您尝试以下操作：

```
Animal a = new Animal();
Dog dogRef2 = (Dog)a; // Invalid cast exception 
```

**为什么？**因为`new Animal()`还没有创建方法`bark`和属性`legs`，它只是创建了一个`Animal`（既不包含属性`legs`也不包含方法`bark`）的实例。

**更多信息：**如果您想了解有关内部结构（如何创建和存储对象）的更多信息，请查看[此链接](http://msdn.microsoft.com/en-us/magazine/cc163791.aspx)。这是一个内存布局的例子，取自那里： ![EE类](../Images/2b1883e68b0927a42687aacb5aff68d5.png)

您可以看到[链表](http://en.wikipedia.org/wiki/Linked_list)用于构建从基类实例对象到派生类实例对象的链。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T10:17:47.623

动物 B = new Dog();

new 运算符返回 Dog() 的 ref；它存储在 Animal B 中，因此 ref b 指向 dog

# emacs - 有没有办法让 -script 对 --find-file 文件起作用？

> ID：12139646
> 
> 赞同：0
> 
> 时间：2012-08-27T09:46:58.287
> 
> 标签：emacs, elisp, text-processing

我想用emacs对一堆html文件进行文本处理，所以我这样做：

```
find . -type f -name "*.html" | while read myFile; do
    emacs emacs --no-site-file --no-init-file --batch \
    -script myScript.el --find-file "$myFile"
done 
```

问题是`myScript.el`对“$myFile”采取行动——并保存修改后的“$myFile”。

也许一种选择是添加命令行：

```
(add-to-list 'command-line-functions '(lambda () (and (message "ARG:'%s'" argi) t))) 
```

到`.emacs`——但是我必须加载`.emacs`——我只是不需要加载它。

也许在 myScript.el 中加入一些明智的行会更好。

**编辑**：

我只是想——还有一个选择是在 myScript.el 中查找文件——即使用`find-dired`.

**编辑 2**：

我的`find-dired`方法有问题，因为我无法标记文件：

```
(progn 
  (find-dired default-directory "-type f -name \"*.html\"")
  (dired-toggle-marks)
  ) 
```

不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:21:21.853

我设法在 bash 循环的帮助下做到了。我添加了

```
(setq myFile "/home/boris/pst/wordy/edu/PreWW/_build/html/test.html") 
```

到 myScript.el，并运行了一个循环：

```
find ./_build/html -type f -name '*.html' | while read myFile; do
    MyFile=`readlink -f "$myFile"`
    perl -ne "s!setq myFile .+!setq myFile \"$MyFile\")!" myScript.el
    emacs --no-site-file --no-init-file --batch -script myScript.el
done 
```

它更改脚本然后运行它。

# python - Python 日志记录：在配置文件中指定日志格式化程序的转换器属性

> ID：12139648
> 
> 赞同：7
> 
> 时间：2012-08-27T09:46:59.140
> 
> 标签：python, logging, config, converter, formatter

我希望我的日志文件中的所有时间戳都是 UTC 时间戳。当通过代码指定时，执行如下：

```
import logging
import time

myHandler = logging.FileHandler('mylogfile.log', 'a')
formatter = logging.Formatter('%(asctime)s %(levelname)-8s %(name)-15s:%(lineno)4s: %(message)-80s')
formatter.converter = time.gmtime

myHandler.setFormatter(formatter)

myLogger = logging.getLogger('MyApp')
myLogger.addHandler(myHandler)

myLogger.setLevel(logging.DEBUG)
myLogger.info('here we are') 
```

我想从上面的“代码内”配置转移到基于配置文件的机制。

这是格式化程序的配置文件部分：

```
[handler_MyLogHandler]
args=("mylogfile.log", "a",)
class=FileHandler
level=DEBUG
formatter=simpleFormatter 
```

现在，如何在上面的部分中指定转换器属性（time.gmtime）？

编辑：上面的配置文件是这样加载的：

```
logging.config.fileConfig('myLogConfig.conf') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T17:51:44.927

可悲的是，除了使用配置文件之外，没有其他方法可以做到这一点

```
class UTCFormatter(logging.Formatter):
    converter = time.gmtime 
```

然后`UTCFormatter`在配置中使用 a 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-09T23:23:33.897

这里将 Vinay 的解决方案应用于 logging.basicConfig：

```
import logging
import time

logging.basicConfig(filename='junk.log', level=logging.DEBUG, format='%(asctime)s: %(levelname)s:%(message)s')
logging.Formatter.converter = time.gmtime
logging.info('A message.') 
```

# c# - 更新在另一个线程中创建的控件？

> ID：12139650
> 
> 赞同：2
> 
> 时间：2012-08-27T09:47:07.080
> 
> 标签：c#, .net, wpf, multithreading, design-patterns

我有两个线程。

线程 1：WPF 线程。显示一个包含所有信息的窗口。
线程 2：不断循环，接收信息并更新线程 1 中的窗口。

我有以下接口。

```
IModuleWindow
{
    void AddModule(IModule module);
    void RemoveModule(IModule module);
}

IModule
{
    UserControl GetSmallScreen();
    UserControl GetBigScreen();
} 
```

IModuleWindow 由线程 1 中的 WPF 窗口
实现 IModule 由对象实现，在线程 2 中实例化，然后发送到线程 1。

我想将 IModule 中的 UserControls 添加到线程 1 中的 Window 对象中，并显示它们。IModule 对象在线程 2 中不断更新，它们必须更改其文本。

基本上这个想法是该程序应该显示线程 2 中对象的状态，该状态会不断更新。

在 WPF 中完成此任务的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:02:00.723

IMO 最好的想法是使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/4852et58)`ReportProgress` ，方法和`ProgressChanged`事件非常方便。

该`ProgressChanged`事件在 GUI 线程上引发，因此您可以直接对 GUI 执行更新。您的代码应如下所示：

```
// initialize the worker
BackgroundWorker backgroundWorker1 = new BackgroundWorker();
backgroundWorker1.WorkerReportsProgress = true;
backgroundWorker1.DoWork += new DoWorkEventHandler(backgroundWorker1_DoWork);
backgroundWorker1.ProgressChanged += new ProgressChangedEventHandler(backgroundWorker1_ProgressChanged);
backgroundWorker1.RunWorkerAsync();

// thread 2 (BackgroundWorker) 
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    // main loop
    while(true) 
    {
        // time-consuming work
        // raise the event; use the state object to pass any information you need
        ReportProgress(0, state);
    }
}

// this code will run on the GUI thread
private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    // get your state back
    object state = e.UserState;
    // update GUI with state
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T09:52:38.437

[它帮助](http://bathinenivenkatesh.blogspot.com/2011/07/wpf-build-more-responsive-ui.html)我了解我必须做什么。

场景一定是这样的：

```
ObservableCollection images = new ObservableCollection();
TaskFactory tFactory = new TaskFactory();

tFactory.StartNew(() =>
{
  for (int i = 0; i < 50; i++)
  {
    //GET IMAGE Path FROM SERVER
    System.Windows.Application.Current.Dispatcher
          .BeginInvoke((Action)delegate()
          {
            // UPDATE PROGRESS BAR IN UI
          });

     images.Add(("");
   }    
  }).ContinueWith(t =>
     {
       if (t.IsFaulted)
       {
          // EXCEPTION IF THREAD IS FAULT
          throw t.Exception;
        }
      System.Windows.Application.Current.Dispatcher
       .BeginInvoke((Action)delegate()
       {
          //PROCESS IMAGES AND DISPLAY
       });
    }); 
```

您必须使用[System.Windows.Application.Current.Dispatcher.BeginInvoke()](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.aspx)来更新 WPF 中的 UI。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T10:45:18.347

> 能够使用在另一个线程上创建的控件会很好，这就是我想要的理想

简短的回答：忘记它。

UI 控件仅属于单个 UI 线程。您可以在这里做的最好的事情是在主线程中**创建**控件，在后台线程中准备数据，并再次在主（UI）线程中更新控件的属性。

对于数据准备，我建议使用[TPL](http://msdn.microsoft.com/en-us/library/dd460717.aspx)。

# javascript - 鼠标停止或改变方向时获取鼠标坐标

> ID：12139651
> 
> 赞同：1
> 
> 时间：2012-08-27T09:47:32.043
> 
> 标签：javascript, jquery, mousemove

我用简单的代码获得鼠标位置：

```
$("#container").mousemove( function(e) {

    client_x = e.pageX;
    client_y = e.pageY;

        // save coordinates

}); 
```

但是我只需要鼠标改变方向时的开始和停止坐标+坐标，所以我可以“复制”鼠标移动。

我想我需要某种计时器来查看鼠标是否停止了一段时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:53:18.127

```
var timer, timer2 = 0, client_x, client_y; //I made them global since it's easier
$("#container").mousemove( function(e) {
  clearTimeout(timer);
  client_x = e.pageX;
  client_y = e.pageY;
  if((new Date()).getTime() > timer2 + 2000) {
    timer2 = (new Date()).getTime(); //just in case this event handler gets called again before the timer runs doCopy
    setTimeout(doCopy, 1); //run "outside" the event handler (since it's not good for an event handler to take a long time
  } else {
    timer = setTimeout(doCopy, 1000);
  }
});

function doCopy() {
  timer2 = (new Date()).getTime();
  .....
} 
```

这是不断设置和清除计时器。如果鼠标停止 1 秒，则`doCopy()`触发该功能。

# php - 带有 CodeIgniter 的 Netbeans：变量“似乎未初始化”警告在不应该出现时出现

> ID：12139654
> 
> 赞同：0
> 
> 时间：2012-08-27T09:47:39.063
> 
> 标签：php, codeigniter, netbeans

在 Netbeans 7.2 和 CodeIgniter 2.1.2 中，“视图”中的变量总是会触发警告，“变量 $var 似乎未初始化”。

在这种情况下，当视图加载到控制器中时， $var 以通常的方式定义：

```
$data["var"] = 'Some Value';
$this->load->view('main_page', $data); 
```

然后也以通常的方式在视图中引用：

```
<p>the value is <?php echo $var; ?></p> 
```

代码按预期工作和运行，但在 Netbeans 中，该行将触发警告，“变量 $var 似乎未初始化”。

真正奇怪的是，在我编写视图时，自动完成实际上会建议 $var 。所以不知何故自动完成知道它，但错误检查却不知道。

有没有办法防止这种情况发生，或者至少抑制这种不准确的警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:55:44.920

为避免此警告，您可以执行以下操作：

```
$data = array();

$data["var"] = 'Some Value';
$this->load->view('main_page', $data); 
```

或者

```
$data["var"] = 'Some Value';

$this->load->vars($data);
$this->load->view('main_page'); 
```

# java - 如何在 MongoDB 中存储 HTML 数据？

> ID：12139656
> 
> 赞同：3
> 
> 时间：2012-08-27T09:47:50.760
> 
> 标签：java, mongodb, mongodb-java

我正在尝试使用 Java 抓取网络并将 HTML 数据存储在 MongoDB 上。不幸的是，在存储数据时，MongoDB 驱动程序会将数据清空并为 HTML 数据存储空字段。

当我获得前 500 个字符的 HTML 数据时，我可以毫无问题地存储/更新它，所以我认为 HTML（或其中的 Javascript）中的某些内容会破坏发送到 MongoDB 的命令，而 MongoDB 存储的是空数据而不是 HTML。（**编辑**：我也试过 40.000 和 50.000 字符，40.000 没问题，但 50.000 字符数据没有显示在 MongoDB 上）我应该使用其他东西来存储 HTML/JavaScript 数据吗？

这是我的代码片段

```
BasicDBObject savedDoc = new BasicDBObject();
savedDoc.put("url_ID", objURL.get("_id"));
savedDoc.put("cnt", content); //Content field
savedDoc.put("st", 0);
collection.update(new BasicDBObject().append("url_ID", objURL.get("_id")), savedDoc, true, false); 
```

# android - 在页脚中使用进度对话框

> ID：12139660
> 
> 赞同：6
> 
> 时间：2012-08-27T09:47:59.860
> 
> 标签：android, footer, progressdialog

我正在制作一个应用程序，我必须在页脚视图中添加进度对话框，但我无法在页脚视图中获得任何进度对话框：

主要活动：

**我想在这个类的页脚中添加进度对话框**

```
public class MainActivity extends Activity implements OnScrollListener {

// All variables
XmlParser parser;
Document doc;
String xml;
ListView lv;
ListViewAdapter adapter;
ArrayList<HashMap<String, String>> menuItems;
ProgressDialog pDialog;

private String URL = "http://api.androidhive.info/list_paging/?page=1";

// XML node keys
static final String KEY_ITEM = "item"; // parent node
static final String KEY_ID = "id";
static final String KEY_NAME = "name";
ProgressDialog dialog;
// Flag for current page
int current_page = 1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    lv = (ListView) findViewById(R.id.list);

    menuItems = new ArrayList<HashMap<String, String>>();

    parser = new XmlParser();
    xml = parser.getXmlFromUrl(URL); // getting XML
    doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_ITEM);
    // looping through all item nodes <item>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser.getValue(e, KEY_ID)); // id not using any where
        map.put(KEY_NAME, parser.getValue(e, KEY_NAME));

        // adding HashList to ArrayList
        menuItems.add(map);
    }

    // LoadMore button
     dialog=new ProgressDialog(this);
   // Button btnLoadMore = new Button(this);
    //btnLoadMore.setText("Load More");

    // Adding Load More button to lisview at bottom
   // lv.addFooterView(dialog); 
// I want to use Progress Dialog in footer
   /* lv.addFooterView(dialog);*/

    // Getting adapter
    adapter = new ListViewAdapter(this, menuItems);
    lv.setAdapter(adapter);
    lv.setOnScrollListener(this);
     lv.addFooterView(dialog.getListView());

    /**
     * Listening to Load More button click event
     * */
    if(dialog.isShowing())
    {

    }
   /* btnLoadMore.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            // Starting a new async task
            new loadMoreListView().execute();
        }
    });*/

    /**
     * Listening to listview single row selected
     * **/
    lv.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String name = ((TextView) view.findViewById(R.id.name))
                    .getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(),
                    Test123.class);
            in.putExtra(KEY_NAME, name);
            startActivity(in);
        }
    });
}

/**
 * Async Task that send a request to url
 * Gets new list view data
 * Appends to list view
 * */
private class loadMoreListView extends AsyncTask<Void, Void, Void> {

    @Override
    protected void onPreExecute() {
        // Showing progress dialog before sending http request
        if(dialog.isShowing())
        {
        dialog.cancel();    
        }
        else
        {
        pDialog = new ProgressDialog(
                MainActivity.this);
        pDialog.setMessage("Please wait..");
        pDialog.setIndeterminate(true);
        pDialog.setCancelable(false);
        pDialog.show();
        }
    }

    protected Void doInBackground(Void... unused) {
        runOnUiThread(new Runnable() {
            public void run() {
                // increment current page
                current_page += 1;

                // Next page request
                URL = "http://api.androidhive.info/list_paging/?page=" + current_page;

                xml = parser.getXmlFromUrl(URL); // getting XML
                doc = parser.getDomElement(xml); // getting DOM element

                NodeList nl = doc.getElementsByTagName(KEY_ITEM);
                // looping through all item nodes <item>
                for (int i = 0; i < nl.getLength(); i++) {
                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();
                    Element e = (Element) nl.item(i);

                    // adding each child node to HashMap key => value
                    map.put(KEY_ID, parser.getValue(e, KEY_ID));
                    map.put(KEY_NAME, parser.getValue(e, KEY_NAME));

                    // adding HashList to ArrayList
                    menuItems.add(map);
                }

                // get listview current position - used to maintain scroll position
                int currentPosition = lv.getFirstVisiblePosition();

                // Appending new data to menuItems ArrayList
                adapter = new ListViewAdapter(
                        MainActivity.this,
                        menuItems);
                lv.setAdapter(adapter);
                // Setting new scroll position
                lv.setSelectionFromTop(currentPosition + 1, 0);

            }
        });

        return (null);
    }

    protected void onPostExecute(Void unused) {
        // closing progress dialog
        pDialog.dismiss();
    }
}

public void onScroll(AbsListView arg0, int arg1, int arg2, int arg3) {
    // TODO Auto-generated method stub
    dialog.show();
    lv.setOnScrollListener(this);
     lv.addFooterView(dialog.getListView());
     new loadMoreListView().execute();
}

public void onScrollStateChanged(AbsListView arg0, int arg1) {
    // TODO Auto-generated method stub
     new loadMoreListView().execute();
}
} 
```

适配器：

```
public class ListViewAdapter extends BaseAdapter {

private Activity activity;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;

public ListViewAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

public int getCount() {
    return data.size();
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.list_item, null);

    TextView name = (TextView)vi.findViewById(R.id.name);

    HashMap<String, String> item = new HashMap<String, String>();
    item = data.get(position);

    //Setting all values in listview
    name.setText(item.get("name"));
    return vi;
}
} 
```

xml解析器

```
public class XmlParser {

// constructor
public XmlParser() {

}

public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
}

/**
 * Getting XML DOM element
 * @param XML string
 * */
public Document getDomElement(String xml){
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
}

/** Getting node value
  * @param elem element
  */
 public final String getElementValue( Node elem ) {
     Node child;
     if( elem != null){
         if (elem.hasChildNodes()){
             for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                 if( child.getNodeType() == Node.TEXT_NODE  ){
                     return child.getNodeValue();
                 }
             }
         }
     }
     return "";
 }

 /**
  * Getting node value
  * @param Element node
  * @param key string
  * */
 public String getValue(Element item, String str) {
        NodeList n = item.getElementsByTagName(str);
        return this.getElementValue(n.item(0));
    }
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-01T06:37:01.160

我想，你想要一个[ProgressBar](http://developer.android.com/reference/android/widget/ProgressBar.html)而不是 ProgressDialog

添加新布局 pb_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <ProgressBar
        android:id="@+id/progressBar1"
        style="?android:attr/progressBarStyleSmall"
        android:indeterminate="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />

</LinearLayout> 
```

在代码中添加

```
view = getLayoutInflater().inflate(R.layout.pb_layout, null);
TextView tv = (TextView)view.findViewById(R.id.textView1);
tv.setText("Please wait..");
ProgressBar pb = (ProgressBar)view.findViewById(R.id.progressBar1);
pb.setIndeterminate(true);
lv.addFooterView(view); 
```

您只能在执行 setadapter 之前执行 addFooterView。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T09:55:07.373

你可以试试这个：

```
ProgressDialog myDialog = ProgressDialog.show(MyActivity.this, "Display Information","atthe bottom...", true);
myDialog.getWindow().setGravity(Gravity.BOTTOM); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T05:05:23.553

您可以编写具有特殊操作和行为的简单/增强自定义控件。例如，此线程上的完整菜单系统 [https://stackoverflow.com/a/11805044/1290995](https://stackoverflow.com/a/11805044/1290995)

增强的布局比上面链接中的菜单要简单得多。制作progressDialog之类的窗口的一些要点：

*   使用 FrameLayout 作为根视图
*   在 XML 布局文件中设计它
*   在 FrameLayout 的子类中膨胀它（在 Constructor 中）
*   提供一些方法，如,`show()`或您需要的所有其他方法并实现这些操作`hide()``stop()`
*   将布局传递给自定义控件以用作其父控件

    ```
    public void addTo(ViewGroup viewgroup){
        viewgroup.addView(this);
    } 
    ```

和更多...

如果您需要更多信息，请告诉我。

# java - 模拟创建 ThreadSafeClientConnManager 对象的类

> ID：12139662
> 
> 赞同：6
> 
> 时间：2012-08-27T09:48:02.890
> 
> 标签：java, mocking, powermock

我无法模拟一个类（使用 PowerMock 的 createMock 方法）。此类正在其构造函数中创建 ThreadSafeClientConnManager 类的对象。我在调用 createMock 方法并传递我的类名的那一行出现异常。以下是异常堆栈跟踪。但是，如果我运行集成测试，它工作正常。可能是什么问题 ？

```
[junit] Caused by: java.lang.IllegalStateException: Failure initializing default SSL context
[junit]     at org.apache.http.conn.ssl.SSLSocketFactory.createDefaultSSLContext(SSLSocketFactory.java:211)
[junit]     at org.apache.http.conn.ssl.SSLSocketFactory.<init>(SSLSocketFactory.java:333)
[junit]     at org.apache.http.conn.ssl.SSLSocketFactory.getSocketFactory(SSLSocketFactory.java:165)
[junit]     at org.apache.http.impl.conn.SchemeRegistryFactory.createDefault(SchemeRegistryFactory.java:45)
[junit]     at org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager.<init>(ThreadSafeClientConnManager.java:98)
[junit]     at com.amazon.marketplace.payment.tsf.TSFClient.<init>(TSFClient.java:109)
[junit]     at com.amazon.marketplace.payment.tsf.TSFClient.<clinit>(TSFClient.java:95)
[junit] Caused by: java.security.NoSuchAlgorithmException: class configured for KeyManagerFactory: com.sun.net.ssl.internal.ssl.KeyManagerFactoryImpl$SunX509 not a KeyManagerFactory
[junit]     at sun.security.jca.GetInstance.checkSuperClass(GetInstance.java:242)
[junit]     at sun.security.jca.GetInstance.getInstance(GetInstance.java:221)
[junit]     at sun.security.jca.GetInstance.getInstance(GetInstance.java:147)
[junit]     at javax.net.ssl.KeyManagerFactory.getInstance(KeyManagerFactory.java:121)
[junit]     at org.apache.http.conn.ssl.SSLSocketFactory.createSSLContext(SSLSocketFactory.java:184)
[junit]     at org.apache.http.conn.ssl.SSLSocketFactory.createDefaultSSLContext(SSLSocketFactory.java:209) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T00:00:00.130

您确定该类正在其构造函数中创建 ThreadSafeClientConnManager 吗？它可以在静态初始化程序中执行吗？如果是这种情况，您可以通过在测试类中的“类”定义之前添加以下两个注释来解决这个问题，例如：

```
@RunWith(PowerMockRunner.class)
@PrepareForTest(ClassUnderTest.class)
public class YourTestClass { 
```

注意父初始化中的 <clinit>，表示类的静态初始化过程的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T13:52:41.877

您认为这是系统类加载问题吗？尝试参考这个链接它可能会给你一些指示。[http://code.google.com/p/powermock/wiki/MockSystem](http://code.google.com/p/powermock/wiki/MockSystem)。

# php - 使用php从csv文件中获取数据

> ID：12139665
> 
> 赞同：-2
> 
> 时间：2012-08-27T09:48:12.593
> 
> 标签：php, cakephp, cakephp-2.0, cakephp-2.1

我有 csv 文件`mail.csv`，我有如下文本：

```
d,2012-08-24 00:00:57+0200,2012-08-24 00:00:45+0200,noreply@news.camera-factice.com,...
d,2012-08-24 00:00:57+0200,2012-08-24 00:00:45+0200,noreply@118-bonsplans.com,toulouse@texa.fr,...
b,2012-08-24 00:00:57+0200,2012-08-22 23:59:31+0200,noreply@lemeilleur-duweb.com,...
b,2012-08-24 00:00:57+0200,2012-08-22 23:59:31+0200,noreply@lemeilleur-duweb.com,... 
```

我只想获取 mail.exaple: `noreply@lemeilleur-duweb.com`。如果邮件有 2 个或更多邮件相同，我只想接收一封邮件。我的代码 php 如下：

```
<?php       
    $handle = fopen('acct-2012-08-24-0001.csv', 'r');
    $mail = 'noreply@118-bonsplans.com';
    $respon = 'fail';
    $Totalcounter = 0;
    $mailFail = 0;
    $percentage = 0;
    $data[]="";
    if ($handle) {
        while (($buffer = fgets($handle, 4096)) !== false) {
         if (stristr($buffer, '118-bonsplans.com')) $Totalcounter += 1;
         if(($data = fgetcsv($handle, 1000, ",")) !== FALSE);
         if (stristr($buffer, $mail) && stristr($buffer,$respon)) $mailFail += 1;

    }   fclose($handle);

    //echo $data[3];
    }
     $percentage = ($mailFail/$Totalcounter)*100;
     echo '<table border="1px">';
     echo "<tr><td>Dormain</td><td>Total</td><td>Mail Fail</td><td>Percentage</td></tr>";
     echo "<tr><td>".$data[3]."</td><td>".$Totalcounter."</td><td>".$mailFail."</td><td>".$percentage."</td></tr>";
     echo '</table>';

?> 
```

**注意** 对于此代码，我编写它是`if(($data = fgetcsv($handle, 1000, ",")) !== FALSE);`为了从 csv 文件中获取邮件。但它不起作用。

请任何人帮助我，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:54:54.740

据我所知 - 您正试图阻止您的脚本输出重复的电子邮件地址。解决这个问题很容易。您需要做的是设置一个数组来存储您将输出的电子邮件地址。在将电子邮件添加到此数组之前，您需要检查该电子邮件是否之前尚未添加到其中。如果已经添加，**请不要**添加。如果尚未添加，**请**添加。这个检查可以在[in_array()](http://php.net/manual/en/function.in-array.php)函数的帮助下完成。

通过这样做，您将得到一个不会包含任何重复电子邮件地址的数组。

# authentication - 如何提示“需要验证”对话框？

> ID：12139668
> 
> 赞同：1
> 
> 时间：2012-08-27T09:48:20.920
> 
> 标签：authentication, file-permissions, prompt, browser-security

我希望能够使用浏览器窗口中弹出的“需要身份验证”对话框来保护我网站的（某些）页面，并在您尝试访问[http://forums.digitalpoint之类的页面时询问用户名和密码.com/includes/config.php](http://forums.digitalpoint.com/includes/config.php)或路由器配置页面。我意识到它不是javascript，也许它与文件权限有关？或不？请解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:55:07.253

每个 Web 服务器以不同的方式处理安全性。至少告诉我们您正在运行哪个 Web 服务器/版本，以及您想要什么样的安全性（基本、摘要、基于 ldap..）

在这里您可以找到 Apache 的相关文档。

[http://httpd.apache.org/docs/2.2/howto/auth.html](http://httpd.apache.org/docs/2.2/howto/auth.html)

IIS 7：

[http://technet.microsoft.com/en-us/library/cc772009(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc772009(v=ws.10).aspx)

最好的祝福。

# android - 选项卡没有刷新

> ID：12139669
> 
> 赞同：1
> 
> 时间：2012-08-27T09:48:21.493
> 
> 标签：android, android-intent, tabs, android-widget

我的应用程序中有 2 个选项卡，即插入和显示。

一旦我在第一个选项卡中插入记录，它就会向我显示消息：“插入成功”但是当我看到第二个选项卡时，它只显示旧数据 - 新插入的数据不可见”

然后我发现我的第二个标签没有被刷新。

那么如何通过编码动态刷新标签。?

在此先感谢您的帮助。

问候 ：）

# javascript - Bootstrap 的 javascript 在本地工作，但在部署到服务器时不起作用

> ID：12139670
> 
> 赞同：19
> 
> 时间：2012-08-27T09:48:22.120
> 
> 标签：javascript, jquery, twitter-bootstrap, web-deployment, css-frameworks

我下载了 Twitter 引导程序的准系统示例并对其进行了自定义。我在本地（使用 WAMP 服务器）对其进行了测试，CSS 和 JScript 都运行良好。

我将文件上传到我的虚拟主机服务，但 JScript 无法正常工作。我注意到它是因为下拉框停止工作。

我搜索并发现其他有同样问题的人，但他们都在使用 ruby​​，而我没有。只是bootstrap提供的播放CSS+JScript。此外，他们说解决方案是先包含 bootstrap.js，然后再包含 jquery.js。好吧，我试过了，但没有用，我什至包括了未缩小的 .js，但它仍然没有用。

我使用相同的浏览器 (Chrome) 进行本地和远程测试。我还尝试了不同的托管服务，但两者都出现了问题。

非常感谢您的帮助。

* * *

其他类似问题：

*   [Javascript 功能在 localhost 上工作，但在部署到 Heroku 时不工作](https://stackoverflow.com/questions/10215416/javascript-features-work-on-localhost-but-not-when-deployed-to-heroku?lq=1)
*   [twitter bootstrap下拉突然不起作用](https://stackoverflow.com/questions/10218587/twitter-bootstrap-drop-down-suddenly-not-working)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T10:04:33.653

问题可能是您在 jQuery 之前加载了 boostrap.js。在本地，您的浏览器可能正在使用 Jquery 的缓存副本，因此它可以在那里工作，但不能在您的实时站点上工作。尝试通过在代码中切换这两行来修复它：

```
<script src="/code4pt/styles/js/bootstrap.js"></script>
<script src="/code4pt/styles/js/jquery.js"></script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T13:11:01.400

我知道这很奇怪，但我想我找到了解决方案。以前我使用的是（提供的）jQuery 1.7.2 缩小版。现在我将其更改为使用未缩小的 jQuery 1.8.0。它刚刚开始工作......我做的另一件事是将所有文件的**编码**转换为 UTF8（我认为这是真正的问题/解决方案）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-01T20:59:45.830

我有同样的问题。在 IE 中，该站点在 localhost 上运行，但在托管在不同的服务器上时却没有。添加以下元标记修复它。

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-27T12:27:21.833

我遇到了完全相同的问题，所以找到这篇文章和其他类似的帖子让我松了一口气。我的决议是相似的。我把头发拉了半天，尝试了所有不同的东西。遛过狗。喝了半打啤酒。睡在上面。吃过早饭。将顶部的样式表重新复制回来，并将底部的 js 从本地 html 复制到服务器 php，然后由于某种未知原因它再次开始工作。对其他人来说似乎有用的唯一几点：

*   试着回到一个工作场景——在我的例子中，index.html 在服务器上工作，但不是 index.php。让这些完全相同是关键。
*   尝试不同的浏览器以防万一发生奇怪的事情。
*   确保您不断清除浏览器缓存（例如，右键单击 Chrome 中的重新加载按钮并选择“清空缓存和硬重新加载”）
*   检查您的引导 css 和 js 版本。在版本中前后更改它们，直到您获得成功。很有可能，您的引导主题下载附带的版本是最有可能工作的版本。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-13T20:43:54.253

我以前遇到过类似的问题。选项卡功能在我的 HTML 站点中运行良好，但在编码为 Wordpress 主题时无法运行。所有源 URL 都是使用 Wordpress 动态生成的。

当我添加所有 JS 链接（除了 Modernizr 到页脚而不是页眉中）时，这些选项卡终于开始工作了。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-10-04T12:04:09.787

派对迟到了，但我发现我的问题是*Bootstrap.js*在部署期间没有被推出。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-12-09T01:07:44.827

回归基础：如果 Debug 在本地计算机上设置为 true，而在部署环境中设置为 false，请确保您的 .min.js 文件没有覆盖您对 .js 文件的非缩小版本所做的自定义（也适用于 .css）。

您还可以在本地计算机上关闭调试，您应该会看到相同的问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-09-27T18:21:29.150

我在我建立并上传到 Amazon S3 的网站上遇到了这个问题。在我的本地机器甚至我的本地服务器上都可以正常工作，但从亚马逊提供服务时无法正常工作。Firefox（但不是 Chrome）中的控制台显示它无法加载 bootstrap.min.css（等），因为它们的 MIME 类型不是 text/css。

我不得不使用 S3 控制台强制将它们的类型更改为 text/css、清除缓存并重新加载。瞧！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-08-12T10:12:01.060

有同样的问题

在我的 .html 文件中，我有这一行

```
<link th:rel="stylesheet" th:href="@{/webjars/bootstrap/4.0.0-2/css/bootstrap.min.css} "/> 
```

改成这个后

```
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous"> 
```

一切正常。我想内部 webjars 有`http`并且改变 css 链接开始`https`解决我的问题

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-04-08T13:21:46.000

除了@dialex 和@Darrell 的非常有用的建议之外，我还要补充一点，如果这些都不起作用，您可以查看您可能链接到的任何代码，即。通过`require ('page.php');`, 重复。重复的 .js 链接往往会导致这些问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-03-09T08:13:12.173

我正在使用 Codeigniter。我通过更改我`base_url`的 config.php 来解决这些问题。

**以前的 ：**

```
$config['base_url'] = 'http://localhost/public_html'; 
```

**更改为：**

```
$config['base_url'] = 'http://(my intranet server ip adress)/public_html'; 
```

# iphone - iphone开发：如何使用NSTimer创建动画

> ID：12139675
> 
> 赞同：2
> 
> 时间：2012-08-27T09:48:54.010
> 
> 标签：iphone, objective-c, ios, animation, nstimer

在我的应用程序中，我在 viewWillAppear 中有此代码。它只是将随机对象从屏幕顶部动画到底部。问题是我需要检测碰撞，到目前为止我学到的是不可能随时检索动画的坐标。那么如何使用 NSTimer 来实现呢？还是我应该使用 NSTimer？我想不通。任何线索将不胜感激。

```
-(void)viewWillAppear:(BOOL)animated
{
    for (int i = 0; i < 100; i++) {

        p = arc4random_uniform(320)%4+1;

        CGRect startFrame = CGRectMake(p*50, -50, 50, 50);
        CGRect endFrame   = CGRectMake(p*50, CGRectGetHeight(self.view.bounds) + 50,
                                       50,
                                       50);

        animatedView = [[UIView alloc] initWithFrame:startFrame];
        animatedView.backgroundColor = [UIColor redColor];

        [self.view addSubview:animatedView];

        [UIView animateWithDuration:2.f
                              delay:i * 0.5f
                            options:UIViewAnimationCurveLinear
                         animations:^{
                             animatedView.frame = endFrame;
                         } completion:^(BOOL finished) {
                             [animatedView removeFromSuperview];
                         }];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T16:39:43.753

我会放弃`NSTimer`向`CADisplayLink`您的目标发送消息。`NSTimer`可能会导致动画卡顿，因为它与设备的屏幕刷新率不同步。`CADisplayLink`正是这样做的，让你的动画像黄油一样运行。

文档：http: [//developer.apple.com/library/ios/#documentation/QuartzCore/Reference/CADisplayLink_ClassRef/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/QuartzCore/Reference/CADisplayLink_ClassRef/Reference/Reference.html)

最终，使用`CADisplayLink`看起来像这样：

```
- (id) init {
    // ...
    CADisplayLink *displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(update:)];
    [displayLink addToRunLoop:[NSRunLoop mainRunLoop] forMode:NSDefaultRunLoopMode];
    // ...
}

- (void) update {
    [myView updatePositionOrSomethingElse];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T11:37:56.367

您的声明：

> 是否不可能随时检索动画的坐标

似乎不正确你检查[了](https://stackoverflow.com/questions/7022327/how-to-get-a-items-coordinates-while-it-is-animating)吗？

看起来您可以使用 CALayer 的`presentationLayer`属性在动画期间提取坐标信息：

```
CGRect movingFrame = [[yourView.layer presentationLayer] frame]; 
```

如果动画期间发生碰撞，我将使用此信息不时检查。所以我将使用计时器来检查碰撞状态而不是动画视图。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T09:57:52.660

您可以让您的对象以小增量进行动画处理（可能是循环）。每次完成动画，您都可以获得坐标。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T10:03:11.967

我认为您可以在 for 循环中使用 beginAnimations - commitAnimations 语法，例如。直到 10，所以在每个循环之后你可以检查碰撞

```
CGRect incrementedViewFrame;

for(int i = 0; i < 10; ++i)
{

      incrementedViewFrame = CGRectMake(/*calculate the coords here*/);

      if(collision)
      {
           //do stuff
      }
      else
      {
           //do an other animation cycle
          [UIView beginAnimations:nil context:NULL];
          [UIView setAnimationBeginsFromCurrentState:YES];
          [UIView setAnimationDuration:0.1f];
          [[self viewToAnimate]setFrame:incrementedViewFrame];
          [UIView commitAnimations];
      }
} 
```

我希望这会有所帮助！

# c# - 将属性绑定到视图的样式/资源字典

> ID：12139676
> 
> 赞同：2
> 
> 时间：2012-08-27T09:48:56.973
> 
> 标签：c#, wpf, caliburn.micro

我的一个观点由 5 个组成`UserControls`，每个显示关于某个对象的数据。例如，假设视图显示了我们公司拥有的奶牛，并且在屏幕上显示了奶牛 1 到 5（每个都在自己的 UserControl 中）。

我想做的（但不确定是否可能）是将牛的状态绑定到其各自的 UserControl 中使用的样式。所以我们有一个属性`status`，例如`ok`, `hungry`。`dead`如果母牛是`ok`我想显示“正常”样式，如果`hungry`我希望背景为红色，如果`dead`我希望文本为黑色并增加字体大小。

我添加了我想要实现的简化版本。不过，我对 WPF 样式/资源字典的了解仍然有限。

**我基本上想要的代码**
A ViewModel with a `Status`property

```
class CowInfoViewModel : Screen
{
    public string Name { get; set; }

    public string Status { get; set; } //"ok", "hungry", "dead"
} 
```

检索样式或资源字典的视图

```
<UserControl x:Class="WpfModifyDifferentView.Views.CowInfoView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <!-- A reference to a ResourceDictionary with styles, that is bound to the 'Status' property -->

    <StackPanel>
        <TextBlock x:Name="Name" Text="Cow Name"/>
        <TextBlock x:Name="Status" Text="Ok" />
    </StackPanel>
</UserControl> 
```

**编辑 - 解决方案：**

我使用 Vale 的回答做了以下事情：

在 xaml 中（参考转换器）：

```
 <UserControl.Resources>
        <Converters:CowStyleConverter x:Key="styleConverter" />
    </UserControl.Resources> 
```

在 xaml（元素）中：

```
 <TextBlock x:Name="Name" Text="Cow Name" Style="{Binding Path=Style, ConverterParameter='TextBlockCowName', Converter={StaticResource styleConverter}}" /> 
```

转换器（注意我省略了检查）：

```
 public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        var status = value.ToString();
        var styleName = parameter.ToString();

        _resourceDictionary.Source = new System.Uri(string.Format("pack://application:,,,/Resources/ScreenI2Style{0}.xaml", status));

        return _resourceDictionary[styleName];
    } 
```

然后我创建了多个具有以下样式的 ResourceDictionaries：

```
<Style x:Key="TextBlockCowName" TargetType="TextBlock">
    <Setter Property="Foreground" Value="{StaticResource SomeBrush}" />
</Style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:17:24.380

您可以将 UserControl Style 属性绑定到 Status 并使用转换器。

```
<UserControl x:Class="WpfModifyDifferentView.Views.CowInfoView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
             xmlns:local="clr-namespace:WpfModifyDifferentView"
             Style="{Binding Path=Status, Converter={StaticResource myConverter}}">
        <UserControl.Resources>
            <local:MyConverter x:Key="myConverter" />
        </UserControl.Resources> 
```

我假设您的转换器直接在 WpfModifyDifferentView 中。转换器将如下所示：

```
public class MyConverter : IValueConverter {
        private ResourceDictionary dictionary;

        public MyConverter() {
            if (dictionary == null) {
                dictionary = new ResourceDictionary();
                dictionary.Source = new Uri("pack://application:,,,/WpfModifyDifferentView;Component/Resources/Styles.xaml");
            }
        }
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture) {
            switch (value.ToString()) {
                case "ok":
                    return dictionary["myKeyForOkStyle"] as Style;
                case "hungry":
                    return dictionary["myKeyForHungryStyle"] as Style;
                case "dead":
                    return dictionary["myKeyForDeadStyle"] as Style;
                default:
                    return null;
            }
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture) {
            throw new NotImplementedException();
        }
    } 
```

您当然需要指定正确的 URI。

# .htaccess - 重定向和 URL 重写

> ID：12139682
> 
> 赞同：0
> 
> 时间：2012-08-27T09:49:27.113
> 
> 标签：.htaccess, redirect

我有一个 .co.uk 域的托管站点。

我有一个 .com 独立域 - 使用不同的提供商，设置了 301 重定向到我在 .co.uk 的网站

有什么方法可以编写一个小的 htaccess 魔法，将 .co.uk 永久重写为 .com，作为标准？

还是我需要转移域？

我尝试了以下（及其变体），但没有运气。（请记住，这里唯一有问题的行是前 3 行。我已将文件的后半部分包含在上下文中，因为这些规则也是必要的）

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^(www.)?mysite.com$
RewriteRule ^(.*)$ http://www.mysite.co.uk/$1 [L]

RewriteRule ^categories$          index.php?action=categories [L]
RewriteRule ^about$          index.php?action=about [L]
RewriteRule ^modelling$          index.php?action=modelling [L]
RewriteRule ^exhibitions$          index.php?action=exhibitions [L]
RewriteRule ^sales$          index.php?action=sales [L]
RewriteRule ^contact$          index.php?action=contact [L]
RewriteRule ^/$          index.php?action=homepage [L]
RewriteRule ^admin$          admin.php [L]

RewriteRule ^categories/([0-9]+)$          index.php?action=subcategories&parent_id=$1 [L]
RewriteRule ^gallery/([0-9]+)$          index.php?action=archive&category_id=$1 [L] 
```

我希望 htaccess 重写 url，以便他们始终阅读 .com，无论他们来自哪里。

目前，如果我访问我的 .com 站点（仅限域），它会转发到 .co.uk（托管托管的地方，以及此 .htaccess 文件），并将 url 更改为 .co.uk。

您可以说目前我的域是错误的方式 - 即 .co.uk 被设置为主域名，无论您请求哪个 url，由于 .com 在那里转发，该 url 将始终更改为。我的问题是，有没有办法用 .htaccess 来扭转这种情况？

无论我尝试使用 .com 还是 .co.uk，上面的代码都不会改变 url

# php - 获取mysql表列描述

> ID：12139684
> 
> 赞同：0
> 
> 时间：2012-08-27T09:49:32.883
> 
> 标签：php, mysql, sql

我正在尝试获取我 尝试过的表的列***描述***`fetch_fields()`，但它没有获取描述（只是名称、类型、长度......）

```
 $finfo = $result->fetch_fields();
                foreach ($finfo as $val) {
                    if (in_array($val->name, $columns['names'])){
                        $ths .= '<th scope="col" id="'.$val->name.'">'.$val->name. '</th>';
                    }
                } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T09:50:59.173

您可以`COLUMN_COMMENT`从[`INFORMATION_SCHEMA.COLUMNS`](http://dev.mysql.com/doc/en/columns-table.html).

# wordpress - 发送评论时出现 Wordpress 错误

> ID：12139686
> 
> 赞同：0
> 
> 时间：2012-08-27T09:50:07.083
> 
> 标签：wordpress, comments

我在我自己的自建主题上使用默认的评论模板。当我发送评论时，我收到以下错误消息：

**警告：call_user_func_array() 期望参数 1 是有效的回调，函数 'wp_set_comment_cookies' 未找到或 /home/mattator/public_html/wp-includes/plugin.php 第 403 行中的无效函数名称**

**警告：无法修改标头信息 - 标头已由第 881 行 /home/mattator/public_html/wp-includes/pluggable.php 中的（输出开始于 /home/mattator/public_html/wp-includes/plugin.php:403）发送**

在代码中的任何地方都找不到对函数“wp_set_comment_cookies”的调用。**值得注意的是，尽管有错误消息，但评论正在正确发送**。我也尝试禁用所有插件，但问题仍然存在。

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:51:14.670

好吧，我做了一点实验，结果发现问题是在位于 WP 根目录的文件“wp-comments-post.php”的第 18 行中调用了函数“nocache_headers()”。我删除了它，瞧，一切正常。不知道为什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:08:25.850

可能是你之前有一些额外的空白

```
<?php 
```

主题文件开头的标记

谢谢

# php - PHP cURL 返回远程页面样式表

> ID：12139688
> 
> 赞同：0
> 
> 时间：2012-08-27T09:50:11.587
> 
> 标签：php, string, curl

我正在使用以下代码使用 PHP cURL 获取远程内容

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://example.com");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$output = curl_exec($ch);
curl_close($ch);
echo $output; 
```

此代码返回全部内容但我只想以以下格式打印所有样式表。

```
<link rel="stylesheet" href="http://www.example.com/css/style1.css">
<link rel="stylesheet" href="http://www.example.com/css/style2.css"> 
```

如何使用 str.replace() 过滤内容以仅获取带有 cURL 的样式表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:56:45.413

如果您**只想**保持`<link>`元素不变，那么您可以使用 PHP 的 `strip_tags()`函数。

> **strip_tags** — 从字符串中去除 HTML 和 PHP 标记

它接受一个定义允许标签的附加参数，因此您所要做的就是将唯一允许的标签设置为`<link>`标签。

```
$output = curl_exec($ch);
$linksOnly = strip_tags($ouput,'link'); 
```

这里的主要问题是您并不真正知道您将获得什么内容，并且尝试使用为该任务设计的工具以外的任何工具来解析 HTML 内容可能会让您[头发灰白，紧张不安](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)；）

参考 -

*   [`strip_tags()`](http://php.net/manual/en/function.strip-tags.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T09:56:15.407

更好的方法是使用[PHP DOM](http://php.net/manual/en/book.dom.php)来解析 HTML 树并检索所需的节点 -`<link>`在您的情况下 - 并适当地过滤它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T09:57:37.810

使用正则表达式：

```
preg_match_all('/rel="stylesheet" href="(.*)">/', $output, $matches);

if (isset($matches[1]) && count($matches[1]))
{
  foreach ($matches as $value)
  {
    echo '<link rel="stylesheet" href="'.$value.'">';
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T10:00:17.970

使用[简单的 html dom 库](http://simplehtmldom.sourceforge.net/)，

```
include('simple_html_dom.php');

// get DOM from URL or file
$html = file_get_html('http://www.example.com/');
// or your can get $html string through your curl request and say
// $html = str_get_html($html);

// find all "link"
foreach($html->find('link') as $e) {
    if($e->type="text/css" && strpos($e->href, ":/") !=== false) // you don't want relative css hrefs. right?
    echo $e->href."<br>";
} 
```

# ssas - 通过使用其显示名称获取属性过滤器？

> ID：12139691
> 
> 赞同：1
> 
> 时间：2012-08-27T09:50:22.883
> 
> 标签：ssas, mdx, analysis, cubes

我正在尝试使用作为层次结构属性的日期过滤器来设计 MDX 查询。现在，我需要将属性过滤器值放在“where”子句中。当我拖放属性说 - “2012”时，它转换为其他格式，例如“[日期]。[财政层次结构]。[年份]。&[2.012E9]”，而在左窗格显示中，它显示为“2012 年”..

如何控制这种转换？我不确定它是在什么基础上转换这个属性的？

我需要根据用户选择在程序中动态构建 MDX 查询。当用户选择“2012”时，如何确定它是“2.012E9”？或者有什么方法可以改变 MDX 中的过滤条件，这样我就可以在不使用 [2.012E9] 字符串的情况下实现这一点？

提前致谢..

```
 SELECT 
[Subjects].[Name] on Rows,

[Student].Name  ON COLUMNS 
FROM Cube    
where 
 [Date].[Fiscal Hierarchy].[Season].&[**2.0121E9**]

-- But the left side pane(Cube browser) shows the attribute as 'YEAR 2012' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:38:53.947

每个成员都有一个`unique name`和一个`display name`。在左侧窗格中，您会看到`display name`. 在 Mdx 查询中，使用了成员的密钥（请参阅[MSDN](http://msdn.microsoft.com/en-us/library/aa237332%28v=SQL.80%29.aspx)）。

如果要更改唯一名称，则必须更改密钥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:32:30.350

我可以通过像这样更改查询来做到这一点：

在行上选择 [主题]。[名称]，

[Student].Name ON COLUMNS FROM Cube
where **[Date].[Fiscal Hierarchy].[Season].[YEAR 2012]**

# php - 无法获取 X-Facebook-Locale 标头

> ID：12139695
> 
> 赞同：1
> 
> 时间：2012-08-27T09:50:25.350
> 
> 标签：php, facebook, facebook-opengraph

我想知道`X-Facebook-Locale`在以适当的语言显示应用程序时如何获取标题。

我不确定我的应用程序是否被 facebook 抓取，所以我`scraped=true`在发布操作时`og:description`放置了标签，并在标签处放置`content="I displayed $_SERVER here"`了标题中的元素。我还将标签添加`og:locale:alternalte`到`en_us`和`fr_fr`。关于`og:locale`我必须知道`X-facebook-Locale`使用专有语言的内容，但我无法在任何地方查看此标题。有人能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T05:07:20.570

经过数小时试图使语言环境功能正常工作并遇到与您相同的问题后，我更改了代码以使用 HEADER **X-facebook-Locale**验证语言环境。

我不知道您正在使用的确切编程语言，但在 PHP 中，我使用以下代码检查 Header 内容：

```
$headers = apache_request_headers();
if(isset($headers['X-Facebook-Locale']))
{
    $locale = strtolower($header['X-Facebook-Locale']);
} 
```

仅请求 HEADER 值对我有用。

祝你好运。

此致

加布里埃尔皮雷斯

# android - android 2.3.3 修复页脚问题

> ID：12139696
> 
> 赞同：2
> 
> 时间：2012-08-27T09:50:27.643
> 
> 标签：android, html, jquery-mobile

我有一个 jquery 移动页面，其中有一个文本框。单击文本框后，虚拟键盘将出现在电话屏幕上。

问题从这里开始。如果我在 android 2.3.3 中运行该页面，我的页面上的页脚会在键盘出现时出现。但是当我在 ICS 上运行我的页面时，这不会发生。我知道 android 2.3.3 中存在与页眉和页脚（[github 链接](https://github.com/jquery/jquery-mobile/issues/3695)）的固定定位相关的错误。

这个问题是因为同样的原因吗？

请帮忙 ！！谢谢 ！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T09:13:22.460

1.  确保通过将此元标记添加到您的头部来禁用放大您的应用程序：

    `<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">`

2.  像往常一样创建带有页脚的页面。确保不要添加`data-position="fixed"`

3.  相反，将类“fixedFooter”添加到页脚的类属性中：`class="fixedFooter"`

4.  在您的 CSS(-file) 中创建类“fixedFooter”：

    ```
    .fixedFooter 
    {
       position: fixed !important;
       left: 0px !important;
       right: 0px !important;
       bottom: 0px !important;
       z-index: 999 !important;
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-12T20:00:50.107

如果您的代码在 ICS 上工作并且在 Android 2.3.x 中不工作，这是因为 2.3.x 中的错误`style="position:fixed;"`

在您的 HTML 头中将 meta 更改为：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0,
     minimum-scale=1.0, user-scalable=no"/> 
```

这解决了 Android 2.3.x 问题。

更多信息： http:
[//benfrain.com/easy-css-fix-fixed-positioning-android-2-2-2-3/](http://benfrain.com/easy-css-fix-fixed-positioning-android-2-2-2-3/)
[http://bradfrostweb.com/blog/mobile/fixed-position/](http://bradfrostweb.com/blog/mobile/fixed-position/)

编辑：
我不建议更改所有设备的视口。它可能会导致不同的行为，例如用户无法进行缩放、捏合等。应该检测访问者是否使用 Gingerbread 设备，如果用户有 Gingerbread，则更改视口。要检查 Android 版本，您可以使用：
[Detecting Android Browser (from v. 1 to 2.3 firmware) in PHP](https://stackoverflow.com/questions/14021976/detecting-android-browser-from-v-1-to-2-3-firmware-in-php/22362968#22362968)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-13T09:54:26.487

从视口中删除“user-scalable=no”，一切正常

解释@ [http://wil.to/android-positioning/](http://wil.to/android-positioning/)

在 2.2.2 上像魅力一样工作

# c# - 网络测试使用响应值作为下一个请求的参数

> ID：12139698
> 
> 赞同：8
> 
> 时间：2012-08-27T09:50:32.683
> 
> 标签：c#, asp.net, asp.net-mvc, testing, visual-studio-2012

如何*将*作为从当前请求收到的响应的一部分的字段/值作为**下一个请求的参数**传递？

我只能设置静态表单 POST 参数。有没有办法在配置 Web 测试的可用 UI 中执行此操作？

![在此处输入图像描述](../Images/fb38bca3c79aa1a2decf52c679e6c3da.png)

我已经四处搜索，但这些似乎可以使用 jMeter 和其他 Web 测试框架。看到这些让我放弃（暂时）并同时开始探索 Coded Web Test 方法。

任何建议/指针表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-09-10T15:12:59.163

我知道这是关于 Visual Studio 2012 的一个老问题，但是也许这可能有助于尝试为 Visual Studio 2015 实现这一目标的人。可能有很多方法可以完成这件事；这是我的处理方式：

1.  对于登录`Request`，设置一个*提取规则*：右键单击`Request`并选择`Add Extraction Rule...`。这将允许您存储响应中的数据以在以后的请求中使用。有多种方法可以提取数据，例如从 POST 字段中提取数据。数据存储在命名变量`Context Parameter Name`. 假设您已将其设置为`sessionid`.
2.  我已使用 .将所有其他 URL 添加到原始*请求*中`Add Dependent Request`。您可以在任何地方添加访问上下文变量，方法是用双花括号括起来：`{{sessionid}}`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T10:50:56.837

经过一番挖掘后，我能够做到这一点。结果它非常简单（即使用编码测试）。

```
.
.
.
var request1 = new WebTestRequest("http://localhost/Home/Index");
var sessionId = "";
request1.ExtractValues += (s, e) => {
sessionId = 
  e.Response.HtmlDocument.HtmlTags.SingleOrDefault(tag => 
     tag.Name == "somename" 
     && tag.Attributes.Any(a => a.Name == "attrName" 
     && a.Value == "attrValue"));    
};

yield return request1; 
```

然后，

```
var request2 = new WebTestRequest("http://localhost/SomeController/Index/");
var request2Body = new FormPostHttpBody();
request2Body.FormPostParameters.Add("sessionId", sessionId);
request2.Body = request2Body;

yield return request2; 
```

如果有人知道更好的方法，请发布答案。

# c# - 无论如何要获取在 ToolStripMenuItem 点击处理程序中打开 ContextMenuStrip 的 TreeNode 吗？

> ID：12139700
> 
> 赞同：0
> 
> 时间：2012-08-27T09:50:37.317
> 
> 标签：c#, treeview, treenode, contextmenustrip

我有具有不同级别 TreeNodes 的 TreeView
我向所有父 TreeNodes 添加了相同的 ContextMenuStrip，我希望通过打开该 ContextMenuStrip 并按“全部删除”来删除所有子 TreeNodes

```
private void btn_delete_all_objects_Click(object sender, EventArgs e)
{
    ToolStripMenuItem tsmi = (ToolStripMenuItem)sender; //that way i receive button "Delete all"
    ContextMenuStrip cms = (ContextMenuStrip)tsmi.Owner; //this is ContextMenuStrip where this button...
    TreeView tw = (TreeView)cms.SourceControl; //i can get TreeView :( BUT I NEED TreeNode!
    TreeNode tn = tw.SelectedNode; //bah... if i select some of child nodes, then right click to open menu on parent, selected node is still that child
} 
```

而且我不知道如何获取用户单击以打开菜单的 TreeNode 有
什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T10:00:58.343

您可以使用`HitTest()`树视图中的方法来查找节点，如下所示，

```
var hitTest = treeView1.HitTest(treeView1.PointToClient(new Point(contextMenuStrip1.Left, contextMenuStrip1.Top)));
if (hitTest.Node != null)
{
    // Place your code to delete nodes
} 
```

或者您可以关注鼠标单击的节点并使用`treeView1.SelectedNode`属性在菜单项中进行操作。通过这种方式，您可以避免在每个上下文菜单项上使用 HitTest() ...

```
private void treeView1_MouseDown(object sender, MouseEventArgs e)
{
    var hitTest = treeView1.HitTest(treeView1.PointToClient(e.Location));
    if (hitTest.Node != null)
    {
         treeView1.SelectedNode = hitTest.Node;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T10:07:18.190

目前尚不清楚您要对上面的代码做什么。但是要执行您需要的操作（即右键单击`TreeNode`并启动特定的`ContextMenuStrip`），请使用类似的代码

```
private void customTreeViewSql_NodeMouseClick(object sender, TreeNodeMouseClickEventArgs e)
{
    // Ensure selected node is selected.
    treeView.BeginUpdate();
    this.treeView.SelectedNode = e.Node;
    try
    {
        if (e.Node.Level == 0)
        {
            if (e.Button == MouseButtons.Right)
                contextMenuStripA.Show(MousePosition);
        }
        else if (e.Node.Level == 1)
        {
            if (e.Button == MouseButtons.Right)
                contextMenuStripB.Show(MousePosition);
        }
    }
    finally
    {
        this.treeView.EndUpdate();
    }
} 
```

然后您可以在 ContexMenu 中设置 click 事件，以根据所选内容删除所有子节点

```
private void toolStripMenuDeleteAll_Click(object sender, EventArgs e)
{
    TreeNode treeNode = this.treeView.SelectedNode;
    foreach (TreeNode n in treeNode.Nodes)
        n.Remove();
} 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-23T12:41:45.127

我认为这比 Krishnakumar 的代码清晰易懂。您可以将您的“toolStripMenuDeleteAll”设置为仅一些树节点而不是所有树节点。此代码根本不会更改 Selected TreeNode。

欢迎 CHADASH

```
TreeNode LastClickedTreeNode;
private void customTreeViewSql_NodeMouseClick(object sender, TreeNodeMouseClickEventArgs e)
{
    // update last treenode clicked.
    LastClickedTreeNode = e.Node;
}

private void toolStripMenuDeleteAll_Click(object sender, EventArgs e)
{
    foreach (TreeNode n in LastClickedTreeNode.Nodes)
        n.Remove();
} 
```

# ruby-on-rails - Best way to have collections of items from a table in rails?

> ID：12139702
> 
> 赞同：1
> 
> 时间：2012-08-27T09:50:54.523
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

I have a list of items in a table and I'd like to create collections of those items in a new table. I've looked at has_many and has_many :through but I'm not sure those are the right choice and I'm not entirely sure how they'd work in my situation.

One special circumstance is that I want the items from the table to be identified by a unique field called typeID instead of the normal ID.

More information:

My model:

```
 create_table "products", :force => true do |t|
    t.integer  "typeID"
    t.string   "name"
    t.decimal  "basePrice",   :precision => 17, :scale => 4
    t.datetime "created_at",                                 :null => false
    t.datetime "updated_at",                                 :null => false
  end 
```

I have a bunch of products and I need to have some of them bundled into packages (to sell as a bundle) that I can work with. The products will need to be able to be included in multiple different bundles.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T10:07:29.273

在最简单的情况下，您只需要一个`one to many`或`many to many`关系

**一对多：**假设一个包可以包含多个项目

```
class Package < ActiveRecord::Base
    has_many :products
end

class Product < ActiveRecord::Base
    belogs_to :package
end 
```

通过这种方式，您可以将您的捆绑`products`在一个包中。

**多对多*（可能您需要这个）*：**基于您问题的最后更新。

```
class Package < ActiveRecord::Base
    has_and_belongs_to_many :products
end

class Product < ActiveRecord::Base
    has_and_belongs_to_many :packages
end 
```

现在，您的包裹还应该有一个价格列，其中包括所属产品的价格（可能有一些折扣:)。这有帮助吗？

* * *

您可能不需要这个：
*但是，如果您的产品分为多种类型（食品、电子产品、服装等），并且您希望为每种类型的继承创建单独的模型，`Product`那么您只需要拥有一个`Single Table Inheritance`.*

* * *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T10:17:32.243

如果每个产品只属于一个包，我会推荐与 Samiron's 类似的方法。

但是，如果不是这种情况，我会推荐 has_many :through 。这是一个例子：

```
class Package
  has_many :product_listings
  has_many :products, :through => :product_listings

  # allows you to make convenient create/build calls like i do below
  accepts_nested_attributes_for :product_listings
end

class Product
  # defining these relations are only necessary if you want to be able to get all
  # packages a product exists in
  has_many :product_listings
  has_many :packages, :through => :product_listings
end

class ProductListing
  belongs_to :package
  belongs_to :product

  attr_accessible :package_id, :product_id
end 
```

然后，在某些方面，您可以执行以下操作：

```
Package.all.each do |package|
  <%= package.name %>  # or whatever attribute the package has
  package.products.each do |product|
    <%= product.name %>  # or whatever attribute the product has
  end
end 
```

**编辑**

请参阅对 Package 模型的补充。

将产品添加到包中的方法如下：

```
package = Package.create(:name => 'some package')

# Rails naming convention for attributes is snake_case, not camelCase (if you care) 
product = Product.create(:name => 'mouse', :base_price => 20.00)

package.product_listings.create(:product_id => product.id) 
```

# python - KeyError 即使密钥存在

> ID：12139704
> 
> 赞同：2
> 
> 时间：2012-08-27T09:51:04.113
> 
> 标签：python, twisted

我正在运行以下代码；它来自 Twisted Framework 的示例列表，是一个网络服务器。

```
from twisted.web import server, resource
from twisted.internet import reactor

class HelloResource(resource.Resource):
    isLeaf = True
    numberRequests = 0

    def render_GET(self, request):
        self.numberRequests += 1
        request.setHeader("content-type", "text/plain")
        arg = request.args
        q = arg['q']

        #Added for debugging
        for key, value in arg.iteritems():
            print key, value

        return "I am request #" + str(self.numberRequests) + " " + q[0] + "\n"

reactor.listenTCP(8080, server.Site(HelloResource()))
reactor.run() 
```

执行：

```
[user@localhost pytwist]$ python twi.py 
```

浏览器网址：

```
http://localhost:8080/?q=test 
```

但是，我在控制台上收到以下[KeyError](http://wiki.python.org/moin/KeyError)异常：

```
File "twi.py", line 12, in render_GET
q = arg['q']
exceptions.KeyError: 'q' 
```

然而，浏览器给出了预期的输出：

```
I am request #3 test 
```

此外，控制台正在正确显示代码的调试部分：

```
q ['af'] 
```

如果输出正确并且密钥正确存在，那么可能是什么错误？请注意，我已经尝试过`dict.get()`方法，但问题仍然存在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T09:54:58.137

这可能是因为您的浏览器正在发出两个请求。第二个请求可能是针对`favicon.ico`文件的，这里它不发送`q`参数。

尝试打印请求的 URL。

**有关的**

*   [示例 python 扭曲事件驱动的 Web 应用程序将请求计数增加 2，为什么？](https://stackoverflow.com/questions/9253773/the-sample-python-twisted-event-driven-web-application-increments-request-count)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:56:14.333

我注意到一些奇怪的事情：您的代码提到`q = arg['q']`了 ，而错误消息`p = arg['q']`却相反。这里是不是不匹配，或者你正在执行好的代码？

# wcf - wcf data services self hosted credential

> ID：12139705
> 
> 赞同：2
> 
> 时间：2012-08-27T09:51:03.807
> 
> 标签：wcf, wcf-data-services, impersonation

I'm currently implementing RESTful services via WCF Data Services (System.Data.Services). My RESTful service is hosted in a window service. There is no IIS involved.

The service is working fine except that it cannot connect to my sql database as it requires impersonation.

In a normal WCF service I'm able to impersonate by accessing the WindowsIdentity of ServiceSecurityContext. Unfortunately, the ServiceSecurityContext is null for WCF Data Services and I do not have httpContext since it is hosted in a window service.

My current workaround is to set a fixed credentials at my window service. While this is fine for development, it is not acceptable by production.

Is it possible to get the identity of the caller so that i can use the identity to get to sql server? and how?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:09:49.463

您可以尝试使用： System.ServiceModel.OperationContext.Current.ServiceSecurityContext.WindowsIdentity

# objective-c - UITableViewCell textLabel, does not update until a scroll, or touch happens, while using GCD

> ID：12139707
> 
> 赞同：20
> 
> 时间：2012-08-27T09:51:10.497
> 
> 标签：objective-c, ios, uitableview, grand-central-dispatch

Can someone help me figure this out please?

My **UITableViewCell textLabel**, does not update until I **scroll**, or **touch** it.

The **ViewController** loads, it shows the **right amount of cells**. But the content is blank. I have to touch it or scroll to make my textLabel appear.

Am I doing something wrong here?

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    [[cell textLabel] setFont: [UIFont systemFontOfSize: 32.0]];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        NSDictionary * data = [self timeForObject: [self.months objectAtIndex:indexPath.row]];

        dispatch_async(dispatch_get_main_queue(), ^{

            NSString *time      = [data objectForKey:@"Time"];
            NSString *totalTime = [data objectForKey:@"Total Time"];

            NSString * textLabel  = [NSString stringWithFormat:@" %@ %@",
                                        time, totalTime];

            [[cell textLabel] setText:textLabel];

        });
    });

    return cell;
} 
```

Any help is appreciated

Thank you!

Nuno

EDIT:

A call to [cell setNeedsLayout] fixes this issue. Thank you everyone for your help!

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-27T10:44:03.183

似乎仅设置单元格的文本不足以刷新它。您是否尝试`[cell setNeedsDisplay]`在设置文本后放置并查看会发生什么？顺便说一句，由于您已经在使用 GCD 在后台计算内容，因此您应该尽量避免在主队列上做任何工作。我会把这段代码写得更像：

```
NSDictionary *data = [self timeForObject: [self.months objectAtIndex:indexPath.row]];
NSString *time      = [data objectForKey:@"Time"];
NSString *totalTime = [data objectForKey:@"Total Time"];
NSString *textLabel = [NSString stringWithFormat:@" %@ %@", time, totalTime];

dispatch_async(dispatch_get_main_queue(), ^{
    [[cell textLabel] setText:textLabel];
    [cell setNeedsDisplay];
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-12-11T03:30:34.010

您似乎正在另一个线程（不是主线程）上更新单元格

重新加载 tableview 时试试这个：

Objective-C

```
dispatch_async(dispatch_get_main_queue(), ^{
    [self.tableView reloadData];
}); 
```

迅速

```
dispatch_async(dispatch_get_main_queue()) {
    self.tableView.reloadData()
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T11:49:46.260

我猜 GCD 在主线程中以默认的运行循环模式运行你的块。尝试另一种方式：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

    [[cell textLabel] setFont: [UIFont systemFontOfSize: 32.0]];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        NSDictionary * data = [self timeForObject: [self.months objectAtIndex:indexPath.row]];
        NSString *time      = [data objectForKey:@"Time"];
        NSString *totalTime = [data objectForKey:@"Total Time"];
        NSString *textLabel  = [NSString stringWithFormat:@" %@ %@", time, totalTime];

        [cell performSelectorOnMainThread:@selector(setText:) withObject:textLabel waitUntilDone:NO modes:@[NSRunLoopCommonModes]]; //instead of using literals you could do something like this [NSArray arrayWithObject:NSRunLoopCommonModes];
    });

    return cell;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-11T01:06:02.853

在迅速 5

```
 DispatchQueue.main.async() {
        self.listView.reloadData()
    } 
```

# vb.net - Writing custom rules for Outlook 2010

> ID：12139709
> 
> 赞同：1
> 
> 时间：2012-08-27T09:51:12.477
> 
> 标签：vb.net, vbscript, outlook, rules

I've got given the crazy task of writing a custom rule for Outlook that affects emails that **does not have an attachment** . Currently in the rules wizard there is an option that targets emails that **does** have an attachment but not the other way round, strange...

Also worth saying here that I've never written a line of Visual Basic ever! But it's just a little rule, how difficult can it be.

This is what I have currently:

```
Dim WithEvents objInbox As Outlook.Items

Private Sub Application_Startup()
    Set objInbox = Session.GetDefaultFolder(olFolderInbox).Items
End Sub

Private Sub objInbox_ItemAdd(ByVal Item As Object)

    ' If the mail doesn't contain an attachment
    If Item.Attachments.Count = 0 Then

          ' Chirp chirp..

    End If

End Sub 
```

An empty if statement.. But basically all I have to do now is call some "delete" function on the "Item" object. Which would then delete the email if it doesn't have an attachment, easy.. I'm used to writing Java and C#, just fyi

Any pointers out there?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:02:00.733

您需要先将`Item`对象转换为 a[`MailItem`](http://msdn.microsoft.com/en-us/library/office/ff861252.aspx)然后调用[`MailItem.Delete`](http://msdn.microsoft.com/en-us/library/office/ff863343.aspx). **项**可以[表示多个类](http://msdn.microsoft.com/en-us/library/office/ff869291.aspx)，例如`AppointmentItem`, `TaskItem`,`JournalItem`等。

```
Outlook.MailItem mailItem = Item as Outlook.MailItem;
if (mailItem != null)
{
     mailItem.Delete();
} 
```

# iphone - jquery mobile swipe up and down

> ID：12139712
> 
> 赞同：1
> 
> 时间：2012-08-27T09:51:27.393
> 
> 标签：iphone, jquery-mobile

I have more image, I need swipe up and swipe down functionality for these image in my project. For example, in the iPhone, if I swipe up the image, then the image will go up and the new image will come from the bottom and vice versa.

How do I do this using jQuery Mobile? Below is the code for swipe right and left but I need swipe up and down like this. Anyone help me

```
<style>
    .clip {
        height:250px;
        width:150px;

        overflow: hidden;
    }
    .pan {
        width: 400%;
        -o-transition: -o-transform 2s;
        -moz-transition: -moz-transform 2s;
        -webkit-transition: -webkit-transform 2s;
        -webkit-backface-visibility: hidden;
        -webkit-perspective: 1000;
    }
    .pan img {
        display: block;
        float: left;
        width: 25%;
        -moz-user-select: none;
        -webkit-user-select: none;
        -webkit-user-drag: none;
    }
</style>

<script> 
```

var position = 0;

```
 function next() {
        position -= 25;
        if (position <= -100)
            position = 0;
        update();
    }

    function prev() {
        position += 25;
        if (position > 0)
            position = 0;
        update();
    }

    function update() {
        var pan = document.getElementById("pan");
        pan.style.OTransform = "translateX(" + position + "%)";
        pan.style.MozTransform = "translateX(" + position + "%)";
        pan.style.WebkitTransform = "translateX(" + position + "%)";
    }

    $(function() {

        $(window).bind("swipeleft", next);
        $(window).bind("swiperight", prev);
        $(window).bind("keydown", function(event) {
            if (event.which==38)
                prev();
            else if (event.which==40)
                next();
        });
        $("img").bind("dragstart", function(ev) { ev.preventDefault(); });
    }); 
```

```
 <div class="clip">
            <div id="pan" class="pan">
                <img src="images/logo.jpg" />
                <img src="images/53-house.png" />
                <img src="images/bg-blue.png" />
              <img src="images/bg-sandal.png" />
            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-16T18:27:47.747

Jquery Mobile 不支持向上滑动/向下滑动。试试这个插件：[https ://github.com/blackdynamo/jquerymobile-swipeupdown](https://github.com/blackdynamo/jquerymobile-swipeupdown)

# jquery - Why is the JQuery not working in Opera and Firefox on the server, but fine locally?

> ID：12139713
> 
> 赞同：-1
> 
> 时间：2012-08-27T09:51:31.357
> 
> 标签：jquery, firefox, opera

I am making a website where one of the pages uses a JQuery thumbnail scroller script and a lightbox script to view the thumbnail in a larger image. The site works fine in Chrome and IE9, but in Firefox 12.0 and Opera 12.01 the images do not load when viewing on the internet, but everything is perfect when I view the pages locally on my machine running IIS.

Here is the [Website](http://deucalion0.co.uk/GameCenter/reviews.php?game=gameone)

If anyone could give me any insight into why the images do not load I would be grateful as I have no idea what is going on with these browsers.

Thank you.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:55:33.400

将图像路径从更改`game-images\1\1-gp-small.png`为`game-images/1/1-gp-small.png`

虽然您的本地 IIS 是基于 Windows 的系统，但您可以使用反斜杠 ( `\`)，但您的 Online Machine 是基于 UNIX 的 Apache WebServer。Unix 需要斜杠 ( `/`) 作为路径分隔符。

你应该有类似的开发环境（本地和现场）来避免这样的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T09:56:36.063

将您的图像路径更改为 * *game-images\1\1-gp2-big.png*为 game-images/1/1-gp2-big.png

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T10:03:47.117

这是因为斜线错误。

看来IE可以修复它。

路径 IE： [http ://deucalion0.co.uk/GameCenter/game-images/1/1-gp2-small.png](http://deucalion0.co.uk/GameCenter/game-images/1/1-gp2-small.png)

路径 FF： [http](http://deucalion0.co.uk/GameCenter/game-images) ://deucalion0.co.uk/GameCenter/game-images \1\1-title-small.png

希望有帮助。

再见，

Ĵ

# android - unable to download .apk from https

> ID：12139714
> 
> 赞同：5
> 
> 时间：2012-08-27T09:51:41.060
> 
> 标签：android, apk

I've developed for my customer an Android application. I dont want to release it on the Play Strore.

I've hosted it on my client website (asp.net, I've hadded the MIME type apk : application/vnd.android.package-archive). It works like a breeze via http.

The problem is when I try to download the same apk via https : the download doesn't start. I can see it in the notifications, but the progress bar doesn't move. I've tried with the stock browser and Dolphin browser in Android 2.3 and 4.0\. It's allways the same issue.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:08:35.157

正如 Rghav 问我的那样，Android 不接受 HTTPS 证书颁发机构。唯一的解决方案是使用受信任的 CA 提供的证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-30T09:51:27.337

删除请求过滤中的 app_data > IIS 中的隐藏段它可以工作

# arrays - Perl Assigning an array of object to a hash

> ID：12139716
> 
> 赞同：0
> 
> 时间：2012-08-27T09:51:46.830
> 
> 标签：arrays, perl, hash

I have an array of objects.

1)How can I iterate through them?

```
for  my $element (@nodeArray)
{
print $element; 
} 
```

2)How can I place each element in the array into a hash.The key for each element will be $node->id(); the value for each node element will be the properties of the object. So $node->id() will be repeated.

Code is here:

```
package person; 
sub new { 
        my ($class) = @_;
        my $self = {  
            _id =>  undef,  
            _name   => undef,
            _scores => []
                    }; 
    bless $self, $class;

        return $self;
}

sub id{
     my ( $self, $id ) = @_;
    $self->{_id} = $id if defined($id);
    return $self->{_id};
    }

    sub name{
     my ( $self, $name) = @_;
    $self->{_name} = $name if defined($name);
    return $self->{_name};
    }

    sub scores {
        my ( $self, @scores )= @_;
        if (@scores) { 
            @{ $self->{_scores} } = @scores; 
            };
        return @{ $self->{_scores} };
    }

use strict;
use warnings;

#use person;
use Data::Dumper;
my @nodeArray=undef ;
my %hash = undef;

my $node = eval{person->new();} or die ($@);
   $node->id(1);
   $node->name('bob');
   $node->scores(['34','1','1',]);
   unshift(@nodeArray, $node ) ;

   $node = eval{person->new();} or die ($@);
   $node->id(2);
   $node->name('bill');
   $node->scores(['3','177','12',]);

  unshift(@nodeArray, $node ) ;

print Dumper (@nodeArray); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T09:56:56.647

```
foreach my $n (@nodeArray) {
  $hash{$n->id()} = {
    name   => $n->name(),
    id     => $n->id(),
    scores => [$n->scores()]
  };
}

print Dumper(\%hash), "\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T10:32:52.313

您也可以使用`map`而不是`foreach`循环

```
my %hash = map {
    $_->id() => {
        id => $_->id(),
        name => $_->name(),
        scores => [$_->scores()]
    }
} @nodeArray; 
```

# python - How to import module that contains a file in it

> ID：12139717
> 
> 赞同：0
> 
> 时间：2012-08-27T09:51:53.133
> 
> 标签：python, module

I have installed a custom module I created myself for learning. If I do

```
from my_first_module import test
test.thisprintssomething() 
```

The function will work, but if I do

```
import my_first_module
test.thisprintssomething() 
```

Python spits out, NameError: name 'test' is not defined. How would I import without using "from"?

EDIT:

I've fixed it myself. I forgot to add an "import test" line to my **init**.py in my_first_module module.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T09:53:37.500

since you are importing `my_first_module` you have to tell the code,, `test` belongs to `my_first_module`

```
import my_first_module

my_first_module.test.thisprintssomething() 
```

for more clarification you can have a look at [Importing Python Modules](http://effbot.org/zone/import-confusion.htm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T09:54:40.730

```
import my_first_module

my_first_module.test.thisprintssomething() 
```

这将起作用。[在http://docs.python.org/tutorial/modules.html](http://docs.python.org/tutorial/modules.html)阅读更多内容

# java - XSD 导入问题

> ID：12139732
> 
> 赞同：1
> 
> 时间：2012-08-27T09:52:49.483
> 
> 标签：java, xml-parsing, jaxb, xsd

我有三个 XSD：deviceprofile.xsd、relatedType.xsd 和 profilelist.xsd

deviceprofile.xsd 是指relatedtype.xsd 的根XSD，而relatedtype.xsd 又指profilelist.xsd。

relatedtype.xsd 和 profilelist.xsd 之间的引用工作正常，但是 deviceprofile.xsd 和 relatedType.xsd 之间的关系出现了问题。

我已经用相关的命名空间导入了 XSD，但是当用 JAXB 解析 deviceprofile.xsd 时，它给出：

```
[ERROR] src-resolve: Cannot resolve the name 'relatedData' to a(n) 'element decl
aration' component.
line 47 of file:/D:/Personal/Java/Trials/src/com/asl/trials/cea/xml/deviceprof
ile.xsd

Failed to parse a schema. 
```

XSD 都在同一个目录中，所以我可以确定这不是路径问题。

有人可以指出我做错了什么吗？？？

我在下面附上了 XSD 的相关片段（以防万一）：

> ```
> deviceprofile.xsd 
> ```

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns="urn:schemas-upnp-org:remoteui:uilist-1-0" targetNamespace="urn:schemas-upnp-org:remoteui:uilist-1-0" xmlns:xs="http://www.w3.org/2001/XMLSchema"  elementFormDefault="qualified" attributeFormDefault="unqualified" id="uilist">
<xs:import namespace="urn:schemas-ce-org:ce-html-server-caps-1-0" schemaLocation="relatedtype.xsd" />
<xs:element name="uilist">
<xs:complexType>
<xs:sequence>
<xs:element ref="relatedData" minOccurs="1" maxOccurs="1" />
</xs:sequence>
</xs:complexType>
</xs:element>
</xs:schema> 
```

> ```
> relatedtype.xsd 
> ```

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xs:schema xmlns="urn:schemas-ce-org:ce-html-server-caps-1-0"
    xmlns:xs="http://www.w3.org/2001/XMLSchema" targetNamespace="urn:schemas-ce-org:ce-html-server-caps-1-0"
    elementFormDefault="qualified" attributeFormDefault="unqualified">
    <xs:include schemaLocation="profilelist.xsd" />
    <xs:element name="relatedData" type="relatedType" />
    <xs:complexType name="relatedType">
        <xs:sequence>
            <xs:element name="keyword" type="xs:string" minOccurs="0"
                maxOccurs="unbounded" />
            <xs:element ref="profilelist" minOccurs="1" maxOccurs="unbounded" />
            <xs:element name="saveStateStorageURL" type="xs:anyURI"
                minOccurs="0" maxOccurs="1" />
            <xs:element name="savedStatesInfo" type="savedStatesInfoType"
                minOccurs="0" maxOccurs="1" />
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="savedStatesInfoType">
        <xs:attribute name="saveTime" type="xs:string" />
        <xs:attribute name="forUser" type="xs:string" use="optional" />
    </xs:complexType>
</xs:schema> 
```

> ```
> profilelist.xsd 
> ```

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    elementFormDefault="qualified" attributeFormDefault="unqualified">
    <xs:element name="profilelist" type="profileListType" />
    <xs:complexType name="profileListType">
</xs:complexType>
...
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:49:06.783

在`deviceprofile.xsd`模式中，您需要声明`urn:schemas-ce-org:ce-html-server-caps-1-0`命名空间，然后在`ref`值中包含相应的前缀。下面我使用了`foo`前缀：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns="urn:schemas-upnp-org:remoteui:uilist-1-0"
    targetNamespace="urn:schemas-upnp-org:remoteui:uilist-1-0" 
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:foo="urn:schemas-ce-org:ce-html-server-caps-1-0"
    elementFormDefault="qualified" 
    attributeFormDefault="unqualified" id="uilist">
    <xs:import namespace="urn:schemas-ce-org:ce-html-server-caps-1-0"
        schemaLocation="relatedtype.xsd" />
    <xs:element name="uilist">
        <xs:complexType>
            <xs:sequence>
                <xs:element ref="foo:relatedData" minOccurs="1" maxOccurs="1" />
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

# salesforce - 如何在apex中将一个类的方法调用到另一个类中

> ID：12139737
> 
> 赞同：3
> 
> 时间：2012-08-27T09:53:12.463
> 
> 标签：salesforce, apex-code, force.com

我想将一个类的方法用于另一个类。

```
 eg: public class controller 1{
          public void method 1(){}
      }

     public class controller 2{
         public void method 2() { }     
       } 
```

我想在类控制器 2 中使用方法 1。请帮我找到解决方案

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T10:15:00.963

您可以使用两种方法：

1.使用静态方法

您不能在此处使用 controller2 实例方法

```
public class controller2 
{
    public static string method2(string parameter1, string parameter2) {
        // put your static code in here            
        return parameter1+parameter2;
    }
    ...
} 
```

在单独的类文件中调用 method2()

```
// this is your page controller
public class controller1
{
    ...
    public void method1() {
        string returnValue = controller2.method2('Hi ','there');
    }
} 
```

2.创建另一个类的实例

```
public class controller2 
{
    private int count;
    public controller2(integer c) 
    {
        count = c;
    }

    public string method2(string parameter1, string parameter2) {
        // put your static code in here            
        return parameter1+parameter2+count;
    }
    ...
}

public class controller1
{
    ...
    public void method1() 
    {
        controller2 con2 = new controller2(0);
        string returnValue = con2.method2('Hi ','there');
    }
} 
```

如果您的方法位于具有命名空间的包中

```
string returnValue = mynamespace.controller2.method2(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T19:22:38.123

您可以通过实例化您正在调用的类来做到这一点。

```
// source class
public class MyClass1 {

    public MyClass1() {} // constructor

    public void MyMethod1() {
        // method code
    }
}

// calling class
public class MyClass2 {

    public void MyMethod2() {
        // call MyMethod1 from MyClass1
        MyClass1 c = new MyClass1(); // instantiate MyClass1
        c.MyMethod1();
    }
} 
```

请注意，如果源类是全局的（而不是公共的）并且其方法是 Web 服务，您也可以使用`MyClass1.MyMethod1();`.

# javascript - The proper way to handle the XMLHttpRequest by using javascript

> ID：12139740
> 
> 赞同：1
> 
> 时间：2012-08-27T09:53:28.950
> 
> 标签：javascript, xmlhttprequest, jqxhr

When I get the status code 400 I handle the `XMLHttpRequest` object in this way (1) and it work. Anyway I suppose this code is quite specific to my use case.

I would like to be more generic like:
1) How should I handle the server error when I get the status code 500?

* * *

(1)

```
_.each((JSON.parse(xhr.responseText)).children, function (xhrObject, name) {
    element.find('[name="' + name + '"]')
        .parent().append($('<div>')
        .attr('class', 'is-input-invalid')
        .text(xhrObject.errors));
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:14:40.680

这取决于应用程序。为了响应 500，您可能需要做三件事：

1.  报告发生错误。
2.  忽略它。
3.  试试别的。

当操作对用户不重要时，第二个可能会很好（也许他们甚至不知道你在做一些后台更新检查），否则绝对要避免（唯一比报告错误更糟糕的事情对您来说，没有向您报告错误）。第三个是非常专业的（尝试的“其他东西”可能很明显，也可能是不可能的，这取决于您首先尝试做什么）。

要从 500 中获取任何有用的信息，您将需要代码的服务器端向您发送一些有用的信息作为此类消息的主体。究竟什么是“有用的”取决于你在做什么（例如纯文本、json、xml 是你的其余代码最有可能已经设置好处理的东西）。

# vb.net - Invalid printer specified

> ID：12139742
> 
> 赞同：0
> 
> 时间：2012-08-27T09:53:32.073
> 
> 标签：vb.net, crystal-reports, visual-studio-2005, reportdocument

I try to print from web service using the below command

```
 oRpt.PrintOptions.PrinterName = "\\ipaddress\printername"
    oRpt.PrintToPrinter(1, False, 1, 1) 
```

I got "Invalid printer specified"

I could print out any word document but in programming could not.

Please share me. Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:18:21.100

您需要确保已安装打印机并为服务使用的身份设置了权限。

最简单的做法是使用与运行 Web 服务相同的身份登录到运行 Web 服务的应用服务器。如果它在 IIS 下运行，这将是应用程序池使用的标识。然后您可能需要安装打印机（作为网络打印机）并打印测试页。我们创建了一个专门用于打印的服务，并专门创建了一个 AD 帐户供其运行。您可能需要继续使用完全限定的打印机名称，而不是打印机安装时的名称，但这可能取决于您用于打印的应用程序。

# javascript - JQuery将多个类添加到一个div标签

> ID：12139746
> 
> 赞同：6
> 
> 时间：2012-08-27T09:53:44.693
> 
> 标签：javascript, jquery

我想使用 JQuery 获取下一行代码：

```
<div class="something something_else">
</div> 
```

我`$(document.createElement('div'));`用来创建 div，但是如何添加`something`和`something_else`到 div？

我确定这是基本的东西，但我似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-27T09:55:25.863

试试这个：

```
$('<div/>', {"class": "something something_else" }) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T10:06:35.620

```
var div = document.createElement('div');
div.className = "something something else";
$('<div/>').addClass("something something else");
$('<div class="something something else"/>'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T09:57:41.767

还有更多方法可以做到这一点，例如：

```
$('<div/>').addClass("something something else");
$('<div class="something something else"/>');
//plain javascript
var div = document.createElement('div');
div.className = "something something else"; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-27T09:58:21.450

使用 javascript 创建新元素的最佳方法是：

```
var newElement = $('<div></div>'); 
```

然后您可以使用***attr()***或***addClass()*** coomands 应用 4 这个元素的任何属性。

# perl - 在打印函数中调用子程序

> ID：12139748
> 
> 赞同：3
> 
> 时间：2012-08-27T09:53:57.597
> 
> 标签：perl

我有一个子程序：`calcPercentage`. 我想打印这个子程序返回的值。

我可以在一行中执行此操作吗，类似于：

```
print "Result is: $calcPercentage($a,$b)" 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T09:56:33.253

当然：`print "Result is: ", calcPercentage($a, $b), "\n";`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T10:13:16.003

`print`正如其他答案所说，最好的方法是将函数调用作为参数之一传递给。

但是，如果出于某种原因，您希望函数调用的结果在字符串文字内展开，就像`"foo $bar"`展开变量名一样，实际上有一种（相当丑陋的）方法可以做到这一点：

```
print "Result is: @{[calcPercentage($a,$b)]}"; 
```

看到[这个问题](https://stackoverflow.com/questions/3939919/can-perl-string-interpolation-perform-any-expression-evaluation)。

同样，如果您只是使用`print`，这并不是特别有用，因为`print`它本身连接了它的参数。即使您不使用`print`它也可能最好自己连接参数：

```
$s = "Result is: " . calcPercentage($a, $b); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T15:51:59.540

我有时会使用`printf`：

```
printf "Result is: %.2f\n", calcPercentage($a, $b) 
```

* * *

与风格无关，perl 中通常的命名约定`under_scores`不是`camelCase`，`$a`和`$b`是保留的变量名；通常在示例中最好使用`$x`并且`$y`是免费的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-27T10:00:37.213

```
> cat hello.pl
#!/usr/bin/perl

sub hello_p
{

return "hello"
}

print "return value is ",hello_p,"\n"; 
```

执行如下：

```
> perl hello.pl
return value is hello 
```

# colors - 机器之间颜色不同

> ID：12139751
> 
> 赞同：1
> 
> 时间：2012-08-27T09:54:06.563
> 
> 标签：colors

我正在制作一个网页，并使用以下 HEX 颜色：#494573

现在，我发现真正奇怪的是它们在不同机器（或显示器？）之间的绘制有多么不同 - 我刚买了一台 mac，所以它是全新的，看起来更像紫罗兰色，但如果我在 ubuntu 上打开同一个网页，它更像是蓝色的。我知道这可能是屏幕问题，但是，如何辨别？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:09:36.550

让我们来一个荒谬的比较。

想象一下，您正在三台显示​​器上查看它：

1.  亮度和对比度设置高的显示器。
2.  黑白显示器，亮度设置低。
3.  一个绿色和黑色的显示器！

很明显，他们会给出完全不同的观点。如此明显，你甚至不会想到它。

现在更真实一点，看看 LCD 笔记本电脑显示器中的纯色背景（这个实验越便宜越好），看看你是否能看到明显不在实际背景中的渐变。

现在走进一家电视商店，告诉卖家颜色清晰度对你很重要，钱不是问题。他会告诉你更多关于某些屏幕如何比其他屏幕更好的信息，而不是你想知道的（当你解释这只是响应 SO 帖子的实验时，他会非常生气）。

即使使用相同的屏幕，照明条件也会影响您看到的颜色。需要真正保证工作设置中颜色一致的人将窗户和胶带灯固定到位。

[http://en.wikipedia.org/wiki/Color_management](http://en.wikipedia.org/wiki/Color_management)和[http://en.wikipedia.org/wiki/ICC_profile](http://en.wikipedia.org/wiki/ICC_profile)会告诉你更多。每个操作系统都有一种方法（有时被给定图形卡的自定义控制面板覆盖）来调整颜色校准，以提供更像图像/视频/网页/等制作者预期的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:02:47.413

好吧，在我的屏幕上，这是深蓝色，略带紫色。如果你想看看什么是“真实的”，你必须校准显示器的颜色。不同的商店都有特殊颜色校准小工具。专业人士的昂贵显示器通常自带。

顺便说一句：即使您校准了，其他人也很可能看不到相同的颜色，因为他们的显示器也必须校准。

# java - 如何将字节数组转换为整数？

> ID：12139755
> 
> 赞同：2
> 
> 时间：2012-08-27T09:54:23.150
> 
> 标签：java, javasound, pcm, wave

我有一个包含纯声音数据的字节数组。我想将其转换为整数。每个样本的位数是 16。帧速率是 44100。但是如何将其转换为整数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T09:59:01.957

只是为了澄清：你有一个`byte[]`包含成对的`byte`'s来形成一个整数？就像这样：`{int1B1, int1B2, int2B1, int2B2, int3B1, int3B2, ...}`？

如果是这样，您可以将它们组装成整数，如下所示：

```
int[] audio = new int[byteArray.length/2];
for (int i = 0; i < byteArray.length/2; i++) { // read in the samples
  int lsb = byteArray[i * 2 + 0] & 0xFF; // "least significant byte"
  int msb = byteArray[i * 2 + 1] & 0xFF; // "most significant byte"
  audio[i] = (msb << 8) + lsb;
} 
```

当然，您可以将该循环优化为单行循环，但我更喜欢这种方式以提高可读性。此外，根据数据的字节顺序，您可以切换 ub1 和 ub2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T09:57:41.600

```
long value = 0;
for (int i = 0; i < by.length; i++)
{
   value += ((long) by[i] & 0xffL) << (8 * i);
} 
```

您还可以创建一个字符串并使用 Integer valueOf 或 Integer 构造函数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T10:40:15.167

尝试在 for 循环中使用它。它对我有用（签名的 16 位样本，小端序）。

```
//16 bit, litte endian (the first is the least significant)
int LSB=(int)b[i*2] & 0xff;
int MSB=(int)b[1+i*2] & 0xff;

x[i]=((MSB<<8)+LSB);
if((b[i*2+1)]&0x80)!=0)//Check the sign
       x[i]=-(65536-x[i]); 
```

# html - CSS对齐多个文本部分

> ID：12139756
> 
> 赞同：0
> 
> 时间：2012-08-27T09:54:27.780
> 
> 标签：html, css

我正在尝试对齐三个文本部分，其中中间部分具有最大宽度，并且可以使用 text-overflow:ellipsis 属性截断。

例如网站 | www.aLongNameShouldBeTruncated.com | 正在打开

应该像这样对齐：

![在此处输入图像描述](../Images/04fb54c10b7fe19ccf89f959a0c1e7ec.png)

我可以让它为 chrome 工作，见[http://jsfiddle.net/LSuRx/5/](http://jsfiddle.net/LSuRx/5/)：

但是我不能让这三个部分在 IE9 和 FireFox 中很好地垂直对齐：

![在此处输入图像描述](../Images/750d5d0663d08b4f67f66bb294e049b9.png)

任何人都知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:59:59.597

我尝试添加`vertical-align: top;`到 #addressContainer 块中。

这在 FF 14 和 Opera 12 下对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T10:00:22.370

您可以添加`vertical-align: bottom;`到`#addressContainer`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T10:00:43.750

给**你**的`span`. 像这样写：

```
span{vertical-align:top;} 
```

检查这个[http://jsfiddle.net/LSuRx/7/](http://jsfiddle.net/LSuRx/7/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T12:52:22.203

这对我有用：

```
<style type="text/css"> 
div.ord{
    white-space: nowrap;  
    overflow: hidden; 
    float: left;
}

div.elip{
    max-width: 100px;
    text-overflow: ellipsis;
}
</style>

<div class="ord">Text 1</div>
<div class="ord elip">Your long address text will be here</div>
<div class="ord">Text 2</div> 
```

# c# - Webforms Login-Control and IE 10

> ID：12139757
> 
> 赞同：0
> 
> 时间：2012-08-27T09:54:32.270
> 
> 标签：c#, asp.net, css, login, webforms

The Webforms Login Control has two different textbox widths in IE10? Anyone has a workaround for this?

![enter image description here](../Images/00599eab75bf102410707a7599d157c7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:02:24.623

我找到了2个解决方案：

1.  设置输入 css 样式：

    ```
    input
    {
        width: 150px !important;
    } 
    ```

2.  转换为 itemtemplate 并设置文本框的宽度属性

# visual-studio - 在 VS2008 中打开 VC++ 解决方案时，包“StanPackage”未能正确加载？

> ID：12139761
> 
> 赞同：0
> 
> 时间：2012-08-27T09:54:40.873
> 
> 标签：visual-studio, visual-studio-2008, visual-c++, package

![在此处输入图像描述](../Images/4ce5d32e963167523677097b34dc2cfe.png)

从上面的快照中可以看出，当我尝试在 VS2008 中打开 VC++ 解决方案时，我收到了 Package load failure 错误。为什么“Stanpackage”无法加载？这个包是什么？

PS:: 我最近通过卸载旧版本安装了 VS。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:05:26.053

请参阅[Visual Studio 2008 包加载失败](http://blogs.msdn.com/b/joy/archive/2009/06/23/visual-studio-2008-package-load-failure.aspx)

您可以使用“devenv /resetskippkgs”重新启用包加载。

**解决方案 1：**使用 Visual Studio 命令行重置或重新安装软件包。

**步骤 1：**打开 [Windows 开始] / [所有程序] / [Microsoft Visual Studio 2008] / [Visual Studio 工具] / [Visual Studio 2008 命令提示符]。如果你在Vista中，请右键单击它并选择“以管理员身份运行”

**第 2 步：**键入“devenv /ResetSkipPkgs”。此命令将重新启用 VSPackage 的加载。

**第 3 步：**重新启动 Visual Studio IDE 并尝试再次创建工作流项目。

**第 4 步：**如果仍然失败，请键入“devenv /Setup”。此命令将重新安装所有 VSPackage。

**第 5 步：**重新启动 Visual Studio IDE 并尝试再次创建工作流项目。

有关更多信息，请遵循[此](http://forums.asp.net/t/1720301.aspx/1)。

# asp.net - 上传文件asp mvc

> ID：12139762
> 
> 赞同：0
> 
> 时间：2012-08-27T09:54:48.857
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我想在 asp .net mvc 应用程序中上传文件。上传本身很容易，但我想上传其他详细信息。事实上，我正在开发一种用于项目管理的工具，每个文件都应该对应一个任务，即每个用户都能够上传对应于他的一个任务的文件。所以，我只想上传带有任务ID的文件，然后将文件名和任务ID保存在数据库中。应该有一个任务的下拉列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T11:13:38.650

据我了解，您想上传带有其他详细信息的文件。首先，您必须开始创建一个视图模型，该模型包含`HttpPostedFileBase`捕获上传的文件和其他属性以捕获其他详细信息。

```
public class UploadFileViewModel
{
   public HttpPostedFileBase File { get; set; }

   public int TaskId { get; set; }

   // other properties if any
} 
```

基本上你应该有一个带有`UploadFileViewModel`as 参数的动作。

```
public ActionResult UploadFile(UploadFileViewModel model)
{
   ...
} 
```

我建议您使用视图模型，因为您可以轻松应用验证。如果没有视图模型，您也可以执行类似的操作，

```
public ActionResult UploadFile(HttpPostedFileBase file, int taskId)
{
  ...
} 
```

你的观点应该是这样的，

```
@model UploadFileViewModel

@using (Html.BeginForm("UploadFile", "Controller", FormMethod.Post, new { enctype = "multipart/form-data" }))
{

<div>
   <input type="file" name="file" />

   @Html.DropDownListFor() @* list the tasks *@

   <input type="submit" value="OK" />
</div>

} 
```

如果您想了解有关上传文件的更多信息，请查看此博客[文章](http://prideparrot.com/blog/archive/2012/8/uploading_and_returning_files)。

# c# - 接口如何解决钻石问题？

> ID：12139772
> 
> 赞同：5
> 
> 时间：2012-08-27T09:55:18.840
> 
> 标签：c#, oop, diamond-problem

我需要和你讨论一件事。我一直在阅读有关接口的信息，它是类与接口之间的契约，该类将提供接口所有方法的实现。为了解决著名的钻石问题，我们有接口。喜欢（我正在使用 C#）

```
public interface IAInterface
{
     void aMethod();
}

public interface IBInterface
{
     void aMethod();
} 
```

现在

```
public class aClass : IAInterface, IBInterface
{
     public void aMethod()
     {

     }
} 
```

通过上面的代码，可以说aClass已经提供了接口的两个方法的实现。我的困惑是：如果它是类和接口之间的契约，那么我们怎么能说与两个接口的契约都被履行了？

一个真实的例子，就像我和杰克有合同，我会给他 5 美元，同时我也和本有合同，我会给他 5 美元，现在通过向其中一个人（杰克或本) 我怎么能说我已经履行了与他们双方的合同？

我的问题可能看起来很幼稚，但这让我很困惑。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-27T10:00:15.477

接口*保证*将实现一组给定的方法。接口本身并不关心代码将如何实现。与扩展类相反，当您扩展一个类时，您使用的是一些预定义的代码。

如果您使用相同的方法扩展两个类，例如`methodA`，并调用此方法，那么编译器将不知道它需要运行哪一个。另一方面，当您使用相同的方法实现两个接口时，由于实现是在您自己的代码中编写的，编译器将知道它需要去哪里找到实现。

所以基本上，当你实现某些东西时，你保证你会提供一些服务。

编辑：我将尝试以您的示例为例，并以某种面向对象的方式对其进行转换，这有望使事情变得更清楚。

Jack 和 Ben 会保证他们会借给你钱，而另一方面，你保证会偿还，所以，从 OO 的角度来看，你可以这样看：

```
public interface IPay
{
    public void Pay(Individual i);
}

public class MySelf : IPay
{
    public void Pay(Individual i)
    {
        ...
    }
}

public interface ILend
{
    public void Lend(Individual i);
}

public class Jack : ILend //Same applies for Ben
{
    public void Lend(Individual i)
    {
        ...
    }
} 
```

这就是我将如何处理您指定的问题。

至于另一个垃圾示例，您可以这样做：

```
public interface ITakeTrash
{
    public void TakeTrash(Trash t);
}

public Son : ITakeTrash
{
    public void TakeTrash(Trash t);
}

public class Mum  //Same applies for dad
{
    Son mySon = ...

    mySon.TakeTrash(t);
} 
```

你爸妈都不知道怎么处理垃圾，但是，他们知道*你*知道怎么处理，这才是他们关心的（就像上面一样，你只关心本和杰克能给你钱和其他方只关心你能不能还钱，没有人*真正*关心你是怎么做的。

我确实了解您想要去哪里，基本上是说如果我使用具有相同名称的方法实现两个不同的接口来做不同的事情。如果您最终陷入这种情况，我认为那是由于设计不当造成的。我不建议建立一个做无数不同事情的单一类，这是原因之一。

另一方面，你可能会问，如果我有 2 个接口用同名的方法做类似的事情怎么办？然后，我认为答案是，由于接口*做*类似的事情并且你有同名的方法，很可能你正在做同样的事情，因此，你不必混淆自己。

我希望这个编辑有助于阐明这个问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T09:57:05.083

好的实施方法不像给钱。就像倒垃圾一样。如果你答应爸爸妈妈倒垃圾，倒垃圾一次就够了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-05T09:58:56.430

例如，我们有两个接口，并且都有相同的函数 PrintIt，而 MyClass 类实现了这两个接口。

```
interface IAInterface
{
  void PrintIt(string s);
}

interface IBInterface
{
  void PrintIt(string s);
}

class MyClass : IAInterface, IBInterface
{
  public void PrintIt(string s)
  {
    Console.WriteLine(s);
  }  
} 
```

可以通过引用多个接口

1.  类对象
2.  IAInterface接口参考
3.  IBInterface接口参考

* * *

```
 MyClass _class = new MyClass();
    _class.PrintIt("Class"); 

    IAInterface _aInterface = (IAInterface)_class;
    _aInterface.PrintIt("IAInterface");

    IBInterface _bInterface = (IBInterface )_class;
    _bInterface.PrintIt("IBInterface"); 
```

您还可以提供显式接口实现...

```
class MyClass : IAInterface, IBInterface
{
  public void IAInterface.PrintIt(string s)
  {
    Console.WriteLine("AInterface - {0}", s);
  } 

  public void IBInterface.PrintIt(string s)
  {
    Console.WriteLine("BInterface - {0}", s);
  }   
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T10:08:38.147

由于两个方法具有相同的名称和相同的签名（意味着相同的返回值类型和相同的参数定义），因此假设两个方法是相同的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T10:20:33.900

在多重继承中，使用时会出现菱形问题，

```
public class A 
{
    public virtual  void aMethod(); 
}
 public class B
{      
 public virtual void aMethod();
} 
```

现在

```
public class aClass : A, B
 {      
public override void aMethod()  
    {       } 
} 
```

在上面的代码中，对于 aClass，将为 vTable中的同一个**aMethod** () 创建两个**vPtr**。因此出现歧义（菱形概率）

 **但是当你使用接口的时候，就没有 vTable 的概念了。因为 vTable 在基类和派生类场景之间在调用它们之间的差异实现时很有用。在这种情况下，接口不包含任何实现，因此没有 vPtr、vTable，因此没有菱形问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-30T15:48:30.217

如果您必须从不同的接口实现相同的命名方法。试试这个。

```
interface IFoo
{
    void SayHello();
}
interface IBar : IFoo
{
    new void SayHello();
}
class myFooBarImp : IFoo, IBar
{
     void IFoo.SayHello()
    {
        Console.WriteLine("Hello from IFoo implementation");
    }

     void IBar.SayHello()
    {
        Console.WriteLine("Hello from IBar implementation");
    }

    public void SayHello()
    {
        Console.WriteLine("Hello from SayHello");
    }

}

 class Program1
{      
    public static void Main()
    {

        myFooBarImp obj = new myFooBarImp();
        obj.SayHello();
        (obj as IFoo).SayHello();
        (obj as IBar).SayHello();
        return;        

     }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-08T12:58:46.477

父类被设计为由子类使用，而接口被设计为由子类实现。因此，即使两个父接口具有相同的方法，在继承它时也不会给子类造成混乱。

参考：[https ://dotnettutorials.net/lesson/multiple-inheritance-csharp/](https://dotnettutorials.net/lesson/multiple-inheritance-csharp/)**

# c# - 如何在C#中允许程序通过windows防火墙进行通信

> ID：12139776
> 
> 赞同：-4
> 
> 时间：2012-08-27T09:55:34.630
> 
> 标签：c#

我想让一些程序通过 Windows 防火墙使用 C# 编程（支持窗口 7）进行通信。但我不能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:00:00.653

您可以使用互操作访问用于配置防火墙的 COM 对象。

[具有高级安全参考的 Windows 防火墙](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366459%28v=vs.85%29.aspx)

要使用互操作访问 API，您需要在互操作程序集中创建。你可以用它`tlbimp.exe`来做到这一点。

1.  打开 Visual Studio 命令提示符。
2.  将目录更改为合适的可写文件夹。
3.  执行命令`tlbimp FirewallApi.dll`。

互操作程序集在名为`NetFwTypeLib.dll`. 在 C# 项目中添加对此文件的引用。

要创建一个对象，您需要编写如下代码：

```
var firewallPolicy = (INetFwPolicy2) Activator.CreateInstance(
  Type.GetTypeFromProgID("HNetCfg.FwPolicy2")); 
```

您需要使用`ProgID`上面链接的文档中指定的正确方法，然后需要将返回的对象转换为正确的接口。从那时起，您可以使用 IntelliSense 探索 API。

# c# - 如何对关于 LinkBut ton 的 ListView 进行排序

> ID：12139778
> 
> 赞同：1
> 
> 时间：2012-08-27T09:55:49.480
> 
> 标签：c#, asp.net, listview, sorting, linkbutton

我在我的 ASP.Net 应用程序中使用 ListView 与列

`[Lastname] [Firstname] [telephonenumber][Department][eMail]`和

我的 ListView 内置了 LayoutTemplate、ItemTemplate 和 AlternatingItemTemplate。

现在我希望如果我**单击**The Headertext Lastname or Firstname ，我会得到一个排序列表。我怎么能做到这一点？

这是我的列表视图：

```
 <asp:ListView runat="server" ID="myListView" OnItemCommand="myListView_ItemCommand" OnSelectedIndexChanging="myListView_SelectedIndexChanging">

    <LayoutTemplate>
        <table id="UserTable" runat="server" border="0" width="800" cellpadding="0" cellspacing="0">
            <tr style="background-color:#E5E5FE" class="TableClass">
                <th align="left" id="th4" runat="server"><asp:LinkButton CommandName="Sort" CommandArgument="Nachname" ID="lnkNachname" runat="server" >id_Nachname</asp:LinkButton></th>
                <th align="left" id="th3" runat="server"><asp:LinkButton CommandName="Sort" CommandArgument="Vorname" ID="lnkVorname" runat="server" >id_Vorname</asp:LinkButton></th>
                <th align="left" id="th5" runat="server"><asp:Label ID="lnkTelefon" runat="server" >id_Telefon</asp:Label></th>
                <th align="left" id="th6" runat="server"><asp:Label ID="lnkAbteilung" runat="server">id_Abteilung</asp:Label></th>
                <th align="left" id="th2" runat="server"><asp:Label ID="lnkemail" runat="server" >id_Email</asp:Label></th> 
            </tr>
            <tr runat="server" id="ItemPlaceholder">
            </tr>
        </table>
    </LayoutTemplate>

    <ItemTemplate>

        <tr class="TableClass"> 
             <td align="left"><asp:LinkButton  CssClass="MyLink"  CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label4" Text='<%# Eval("Nachname") %>' runat="server"  /></td>
             <td align="left"><asp:LinkButton  CssClass="MyLink" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label3" Text='<%# Eval("Vorname") %>' runat="server" /></td>
             <td align="left"><asp:LinkButton  CssClass="MyLink"  CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label5" Text='<%# Eval("Telefonnummer") %>' runat="server"  /></td>
             <td align="left"><asp:LinkButton  CssClass="MyLink"  CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label7" Text='<%# Eval("Abteilung") %>' runat="server"  /></td>
             <td align="left"><asp:LinkButton  CssClass="MyLink"  CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label2" Text='<%# Eval("eMail") %>' runat="server" /></td>

          <td align="left"><asp:Label ID="Label6" Text='<%# Eval("GUID") %>' runat="server" Visible="False" /></td>

        </tr>

    </ItemTemplate>

    <AlternatingItemTemplate>

        <tr class="TableClass"> 
            <td align="left"><asp:LinkButton  CssClass="MyLink"  CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label4" Text='<%# Eval("Nachname") %>' runat="server" /></td>
            <td align="left"><asp:LinkButton  CssClass="MyLink"  CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label3" Text='<%# Eval("Vorname") %>' runat="server" /></td>
            <td align="left"><asp:LinkButton CssClass="MyLink" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label5" Text='<%# Eval("Telefonnummer") %>' runat="server" /></td>
            <td align="left"><asp:LinkButton  CssClass="MyLink"  CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label7" Text='<%# Eval("Abteilung") %>' runat="server"  /></td>
            <td align="left"><asp:LinkButton CssClass="MyLink" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label2" Text='<%# Eval("eMail") %>' runat="server" /></td>

            <td align="left"><asp:Label ID="Label6" Text='<%# Eval("GUID") %>' runat="server" Visible="False" /></td>

        </tr>

    </AlternatingItemTemplate>

    </asp:ListView> 
```

cs代码：

```
protected void myListView_Sorting(object sender, ListViewSortEventArgs e)
    {
        if (e.SortExpression == "Vorname")
        {
            e.SortDirection = System.Web.UI.WebControls.SortDirection.Ascending;
        }
        else
        {
            e.SortDirection = System.Web.UI.WebControls.SortDirection.Ascending;
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:11:02.143

html代码是

```
<asp:ListView ID="lstLogs" runat="server" ItemPlaceholderID="tr">
                        <LayoutTemplate>
                            <table cellspacing="0">
                                <tr class="hdrRowColor1">
                                    <td align="left" width="20px" style="display: none;">
                                        <asp:CheckBox ID="selectall" runat="server" ClientIDMode="Static" /><%--onclick="toggleChecked(this.checked);"--%>
                                    </td>
                                    <td align="left" width="35px">
                                        S.No
                                    </td>
                                    <td align="left" width="120px">
                                        <asp:LinkButton ID="lnkName" runat="server" CommandArgument="FirstName" ValidationGroup="vgSearch"
                                            OnClick="lnk_Sort">Name</asp:LinkButton>
                                        <asp:Image ID="img_lnkName" Visible="false" runat="server" />
                                    </td>
                                    <td align="left" width="120px">
                                        <asp:LinkButton ID="lnkEmail" runat="server" CommandArgument="u.EmailAddress" ValidationGroup="vgSearch"
                                            OnClick="lnk_Sort">Email</asp:LinkButton>
                                        <asp:Image ID="img_lnkEmail" Visible="false" runat="server" />
                                    </td>
                                    <td align="left" width="60px">
                                        <asp:LinkButton ID="lnkRole" runat="server" CommandArgument="RoleName" ValidationGroup="vgSearch"
                                            OnClick="lnk_Sort">Role</asp:LinkButton>
                                        <asp:Image ID="img_lnkRole" Visible="false" runat="server" />
                                    </td>
                                    <td align="left" width="160px">
                                        <asp:LinkButton ID="lnkPage" runat="server" CommandArgument="Page" ValidationGroup="vgSearch"
                                            OnClick="lnk_Sort">Page Name</asp:LinkButton>
                                        <asp:Image ID="img_lnkPage" Visible="false" runat="server" />
                                    </td>
                                    <td align="left" width="105px">
                                        <asp:LinkButton ID="lnkMac" runat="server" CommandArgument="tblUserActivities.MacAddress"
                                            ValidationGroup="vgSearch" OnClick="lnk_Sort">MAC Address</asp:LinkButton>
                                        <asp:Image ID="img_lnkMac" Visible="false" runat="server" />
                                    </td>
                                    <td align="left" width="70px">
                                        <asp:LinkButton ID="lnkIp" runat="server" CommandArgument="tblUserActivities.IpAddress"
                                            ValidationGroup="vgSearch" OnClick="lnk_Sort">I.P Address</asp:LinkButton>
                                        <asp:Image ID="img_lnkIp" Visible="false" runat="server" />
                                    </td>
                                    <td align="left" width="60px">
                                        <asp:LinkButton ID="lnkCreatedDate" runat="server" CommandArgument="tblUserActivities.CreatedDate"
                                            ValidationGroup="vgSearch" OnClick="lnk_Sort">Created Date</asp:LinkButton>
                                        <asp:Image ID="img_lnkCreatedDate" Visible="false" runat="server" />
                                    </td>

                                </tr>
                                <tr id="tr" runat="server">
                                </tr>
                            </table>
                        </LayoutTemplate>
                        <ItemTemplate>
                            <tr class='<%# Convert.ToBoolean(Container.DataItemIndex % 2) ? "EvenRowColor" : "OddRowColor" %>'>
                                <%--<td align="left">
                                    <asp:CheckBox ID="chkItem" runat="server" CssClass="case" ClientIDMode="Static" />
                                    <asp:Label ID="lblpKId" runat="server" Text='<%# Eval("pkActivityId") %>' Visible="false"></asp:Label>
                                </td>--%>
                                <td align="left">
                                    <%# Eval("RowNum")%>
                                </td>
                                <td align="left">
                                    <asp:Label ID="lblUserId" runat="server" Text='<%# Eval("UserId")%>' Visible="false"></asp:Label>
                                    <asp:Label ID="lblFullName" runat="server" Text='<%# Eval("FirstName") + " " + Eval("LastName")%>'></asp:Label>
                                </td>
                                <td align="left">
                                    <asp:Label ID="lblEmail" runat="server" Text='<%# Eval("EmailAddress")%>'></asp:Label>
                                </td>
                                <td align="left">
                                    <%--<asp:Label ID="lblRole" runat="server" Text='<%# GetUserRole(Eval("RoleName"), Eval("DesignationName"))%>'></asp:Label>--%>
                                    <asp:Label ID="lblRole" runat="server" Text='<%# Eval("RoleName")%>'></asp:Label>
                                </td>
                                <td align="left">
                                    <%# Convert.ToString(Eval("Page")).Replace("~/","")%>
                                </td>
                                <td align="left">
                                    <%# Eval("MacAddress")%>
                                </td>
                                <td align="left">
                                    <%# Eval("IpAddress")%>
                                </td>
                                <td align="left">
                                    <%# Convert.ToDateTime(Eval("CreatedDate")).ToString("MMM, dd yyyy")%>

                            </tr>
                        </ItemTemplate>
                    </asp:ListView> 
```

代码背后的代码是

```
 protected void lnk_Sort(object sender, EventArgs e)
{
    LinkButton lnk = (LinkButton)sender;
    string arg = lnk.CommandArgument.ToString();
    ViewState["sortCol"] = arg;
    GetSortDirection();
    BindData(ViewState["sortCol"].ToString(), ViewState["sortDir"].ToString(), Convert.ToInt32(ViewState["nmbr"]), Pager.PageSize);
    string name = lnk.ID;
    Image img = (Image)(lstLogs.FindControl("img_" + name));
    if (img != null)
    {
        SetSortOrderImage(img, ViewState["sortDir"].ToString());
    }
}
private void SetSortOrderImage(Image image, String sortorder)
{
    if (sortorder == "asc")
    {
        image.Visible = true;
        image.ImageUrl = "../App_Themes/ThemeNew2/images/up.png";
    }
    else if (sortorder == "Desc")
    {
        image.Visible = true;
        image.ImageUrl = "../App_Themes/ThemeNew2/images/down.png";

    }
}
 private void GetSortDirection()
{
    if (Convert.ToString(ViewState["sortDir"]) == "Desc")
    {
        ViewState["sortDir"] = "asc";
    }
    else
    {
        ViewState["sortDir"] = "Desc";
    }
} 
```

试试这个

# gwt - gwt 根面板到 portlet

> ID：12139785
> 
> 赞同：0
> 
> 时间：2012-08-27T09:56:15.097
> 
> 标签：gwt, portlet

在 gwt 中，我设置托管页面 html 高度 = 100% 和正文高度 = 100%，然后在入口点类中，我设置根面板高度 = 100% 和宽度 = 100%，并且封闭的停靠布局面板高度 = 100% 和宽度 = 100% . 但是在portlet view.jsp中，由于它只是整个页面的一个片段，所以它没有and元素，那么如何将此设置迁移到portlent（liferay门户protlet）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:51:22.150

前段时间，我在我的博客中写了一篇关于*在 Liferay portlet 中包含 GWT portlet*的小条目。

如果您按照我描述的步骤进行操作，您只需将 docklayoutpanel 大小设置为 100%。

[http://www.jmichelgarcia.com/2012/gwt-smartgwt-in-a-liferay-portlet/](http://www.jmichelgarcia.com/2012/gwt-smartgwt-in-a-liferay-portlet/)

**编辑**

关于尺寸问题，我没有找到一个好的解决方案。但是，如果有帮助，您可以使用 GWT 在运行时检索屏幕尺寸。

据我所知，Liferay 的 portlet 策略是根据其内容调整大小。

请参阅：[在 Liferay 中控制 Portlet 的大小](https://stackoverflow.com/questions/10205786/controling-the-size-of-a-portlet-in-liferay)

这个：[https ://vaadin.com/forum/-/message_boards/view_message/433164](https://vaadin.com/forum/-/message_boards/view_message/433164)

这：[http ://www.liferay.com/community/forums/-/message_boards/message/10327941](http://www.liferay.com/community/forums/-/message_boards/message/10327941)

# c++ - 良好实践：纯虚方法的默认参数

> ID：12139786
> 
> 赞同：31
> 
> 时间：2012-08-27T09:56:15.800
> 
> 标签：c++

我创建了一个抽象基类，它有一个带有默认参数的纯虚方法。

```
class Base {
    ...
    virtual someMethod(const SomeStruct& t = 0) = 0;
    ...
}

class Derived : public Base {
    ...
    virtual someMethod(const SomeStruct& t = 0);
    ...
} 
```

所以我想知道将默认参数设置为纯虚拟和整体设置为虚拟方法是一种好习惯吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-27T10:18:56.813

实际上，您的代码是默认参数最糟糕的使用模式之一，因为它涉及继承和多态行为。我支持查看相关的 Scott Meyers 提示的建议，但这里有一个简短的概述：

在多态调用的情况下，根据静态类型的声明使用默认参数，而不是动态类型。这是合乎逻辑的，因为运行时不知道默认参数，但打破了关于多态行为的任何合理假设。例如，

```
#include <cstdio>

class Base
{
        public:
                virtual void f(int a = 1)
                {
                        printf("Base::f(%d)\n", a);
                }
};

class Deriv : public Base
{
        public:
                virtual void f(int a = 2)
                {
                        printf("Deriv::f(%d)\n", a);
                }
};

int main()
{
        Base* a = new Deriv();
        a->f();
        delete a;
        return 0;
} 
```

产量：

```
Deriv::f(1) 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-08-27T10:24:34.353

我经常希望像你一样使用默认参数和虚函数。然而，其他人正确地指出，这会导致模棱两可，通常不是一个好主意。有一个相当简单的解决方案，我使用的一个。给你的虚函数一个不同的名字，让它受到保护，然后提供一个带有默认参数的公共函数来调用它。

```
class Base {
protected:
    virtual void vSomeMethod(const SomeStruct& t ) = 0;
public:
    void someMethod( const SomeStruc& t = 0 )
    { vSomeMethod( t ); }
} 
```

派生类只是覆盖`vSomeMethod`并且根本不用担心默认参数。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-27T10:03:08.360

尽可能不要使用默认参数，但如果你这样做了，永远不要重新定义它们（[详见正文](http://books.google.ca/books?id=Qx5oyB49poYC&lpg=PR12&ots=KLm0tHl-kU&dq=item%2037%20effective%20C%2B%2B&pg=PA183#v=onepage&q&f=false)）

购买 Scott Meyers 的两本 Effective C++ 书籍。你不会后悔的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T10:26:31.520

我会：

*   用参数定义虚函数（无默认值）
*   在基类中定义非虚函数，根本没有参数，调用传递正确默认参数的虚函数

这样，派生类根本不必关心默认值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T11:35:51.523

如果您希望此代码有意义：

```
Base* p = new Derived;
p->someMethod(); 
```

因为它的静态类型`p`是`Base*`调用时使用的 Base 签名。分配了默认值，并且作为虚拟函数，调用被重定向到 Derived。

如果您希望 Derived::someMethod 从而`Base*`不是`Derived*`...接收不同的值，您甚至可以对它们进行不同的定义

重要的是要很好地记录这些“关系”，因为大多数程序员不会通过简单的代码阅读来理解它们。

当然，如果所有这些都不适合您的特定上下文，会产生更多的混乱，请避免虚拟函数的默认参数，并使用辅助非虚拟函数来正确调用它们。

但还要考虑到——从读者的角度来看——一个默认参数比一个重载函数私下调用另一个具有不可读参数返工的重载函数更明确。

# nsis - 在 NSIS 中定义快捷方式

> ID：12139787
> 
> 赞同：0
> 
> 时间：2012-08-27T09:56:27.157
> 
> 标签：nsis, shortcut

这是我正在使用的代码。快捷方式而不是指向 $text 指向 "C:\Users\ze\Desktop\329328" ：s 有什么建议吗？！

谢谢

```
Function nsDialogsPage

    nsDialogs::Create 1018
    Pop $Dialog

    nsDialogs::SelectFileDialog open "$PROGRAMFILES\InduSoft Web Studio v7.0\Bin\RunStartUp.exe" "*.exe"

    Pop $Text

    ${NSD_CreateText} 0 13u 100% -13u $Text
    Pop $Text

    nsDialogs::Show

    CreateShortCut "$SMPROGRAMS\My application\My application.lnk" "$Text"
    CreateShortCut "$DESKTOP\My application.lnk" "$Text"

FunctionEnd 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:02:05.863

该`pop $Text`语句存储所创建文本的*窗口句柄*，而不是其文本内容（参考文档在这一点上具有误导性）。在您的示例中，返回的句柄是 329328，这解释了奇怪的链接目标。

要获取内容，您可以使用以下内容`${NSD_GetText}`：

```
${NSD_CreateText} 0 13u 100% -13u $TextToShow
Pop $TextHandle
;...
;...
${NSD_GetText} $TextHandle $0 ; $0 will receive the text string 
```

# ios - 内存泄漏 cocos2D - spriteWithSpriteFrameName

> ID：12139790
> 
> 赞同：2
> 
> 时间：2012-08-27T09:56:35.467
> 
> 标签：ios, memory-leaks, cocos2d-iphone

请帮帮我.. 我是 cosos2D 游戏开发的新手。在仪器中，我在以下代码中的 spriteWithSpriteFrameName 处的游戏中发现了泄漏。

```
tileArray=[[CCArray alloc]initWithCapacity:11];
for (int i=1; i<=10; i++) {
@autoreleasepool {
CCSprite *encounter;
encounter = [CCSprite spriteWithSpriteFrameName:@"82x60.png"];
[self addChild:encounter z:i tag:2600+i];
encounter.position=CGPointMake(-1000,-1000);
[tileArray addObject:encounter];
}
} 
```

尽快回复我。谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:56:05.817

您的**tileArray**未发布，这就是您泄漏的原因。只需将其设置在自动释放池中....

```
tileArray=[[[CCArray alloc]initWithCapacity:11] autorelease]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:36:28.097

在你的 onExit 方法中，清理 spritesheet，并从 self 中删除所有子项。

```
-(void)onExit
 {
    [tileArray release];

    CCSpriteFrameCache *cache = [CCSpriteFrameCache sharedSpriteFrameCache];

    [cache removeSpriteFramesFromFile:@"yourSpriteSheet.plist"];

    [self removeAllChildrenWithCleanup:YES];

    [super onExit];

 } 
```

# javascript - 如何避免在 NetBeans 中将正确的指令检测为错误？

> ID：12139795
> 
> 赞同：0
> 
> 时间：2012-08-27T09:56:53.930
> 
> 标签：javascript, node.js, netbeans, ide, socket.io

我正在使用 NetBeans 7.2 作为我的 IDE 开发一个小的 socket.io 和 node.js 系统。

每次我编写完美正确的指令时，我都会发现自己运行时出现错误突出显示：

```
io.sockets.in(channel_id).emit('new user', data); 
```

准确地说，**“.in”**部分是 NetBeans 的困扰（我猜是因为“in”是一个保留的 javascript 字）。我得到的错误是**“. 运算符后缺少名称”**

有什么办法可以禁用这个特定的语法错误？（我希望突出显示其他错误，所以我不想禁用所有错误检查）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:29:16.217

像这样访问对象的属性应该可以工作：

```
io.sockets['in'] 
```

# mysql - 使用 Mysql Workbench 将两个 db 从本地同步到远程

> ID：12139797
> 
> 赞同：0
> 
> 时间：2012-08-27T09:57:01.690
> 
> 标签：mysql, sql, mysql-workbench

你能在两个数据库之间同步数据吗？

我有一个本地数据库和一个远程数据库，我希望使用 mysql 工作台将数据远程发送到数据库。

这将如何工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:30:52.080

我已经解决了`Toad`for `MySQL`。这个工具比较数据库并允许我对不同的行进行同步。

# ios - UIScrollView 在横向模式下的问题

> ID：12139799
> 
> 赞同：1
> 
> 时间：2012-08-27T09:57:12.593
> 
> 标签：ios, ipad, uikit

我的应用程序有问题，非常感谢任何帮助！

问题描述：使用下面给出的代码片段构建应用程序时，用户可以滚动两页，但只有一页显示图像。我的期望是两个页面都显示图像。

应用程序布局：该应用程序仅针对**横向模式**的 iPad 。

我的应用程序使用 UIScrollView 在两个不同的视图控制器之间滚动。每个视图控制器都在其视图中嵌入了一个 UIImageView。UIImageView 的图像是通过 IB 设置的。图像的尺寸为 1024x768 像素。

视图控制器使用故事板接口在代码中实例化。将 UIScrollView 嵌入其视图中的主视图控制器使用以下代码来实例化和添加包含图像的视图控制器。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // Keep the VCs around
    self.viewControllers = [NSMutableArray array];

    [self.scrollView setContentSize:CGSizeMake(0, 1024)];

    UIStoryboard *storyboard = self.storyboard;

    SinglePageViewController *vcOne = [storyboard instantiateViewControllerWithIdentifier:@"SimpleImageView"];
    [self addViewControllerToScrollView:vcOne];
    [vcOne setViewPositionToHorizontalPage:0];

    SinglePageViewController *vcTwo = [storyboard instantiateViewControllerWithIdentifier:@"SimpleImageView"];
    [self addViewControllerToScrollView:vcTwo];
    [vcTwo setViewPositionToHorizontalPage:1];
}

- (void)addViewControllerToScrollView:(UIViewController *)viewController
{
    CGSize contentSize = self.scrollView.contentSize;
    contentSize.width = contentSize.width + 768;
    [self.scrollView setContentSize:contentSize];
    [self.scrollView addSubview:viewController.view];
    [self.viewControllers addObject:viewController];
} 
```

SinglePageViewController 类的 setViewPositionToHorizo​​ntalPage 方法如下所示：

```
- (void)setViewPositionToHorizontalPage:(NSUInteger)pageIndex
{
    self.view.frame = CGRectMake(768 * pageIndex, 0, 768, 1024);
} 
```

当我使用透明图像时，我可以看到两个视图似乎都位于同一位置。当我记录他们的帧时，他们似乎都有正确的值（0,0,768,1024）和（768,0,768,1024）。

再次感谢你的帮助！

# scala - Scala 中的增量编译速度是否取决于每个文件的类数？

> ID：12139803
> 
> 赞同：16
> 
> 时间：2012-08-27T09:57:25.017
> 
> 标签：scala, compilation

我已经用 Scala 编写了我的第一个中型项目，现在我有点担心 Eclipse 中缓慢的增量编译时间可能与我倾向于将我的类放在相对较少的大`.scala`文件中有关。

我背后的逻辑如下：如果我修改一个大`.scala`文件中的一个小类并点击保存，编译器可能只会看到整个文件被某种方式修改，因此被迫重新编译文件中的所有内容以及依赖项类，而不仅仅是修改后的类及其依赖类。

那么问题来了：放在一个文件中的 Scala 类的平均数量是否会以任何方式影响重新编译速度？或者这样说：在重新编译速度方面，是小`.scala`文件优先于大文件，还是真的没有区别？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-27T12:35:02.730

你是对的：依赖跟踪的单位是一个文件。如果您对单个类进行更改，但您的编译单元有多个类，这将触发重新编译依赖于同一文件中其他类的所有文件。

编辑：

> 从 0.13.6 开始，sbt 默认使用新的名称哈希方案。这允许仅重新编译至少对修改后的名称具有某种依赖性的文件。

这是 Sbt 在命令行上工作的方式，Eclipse 使用 Sbt 中的增量编译器。

# git - 为什么 git stash 不能放弃刚才所做的更改？

> ID：12139812
> 
> 赞同：12
> 
> 时间：2012-08-27T09:57:52.740
> 
> 标签：git, github, git-pull, merge-conflict-resolution, git-stash

我从 github 分叉了一个项目，源点指向我自己的 github 存储库，远程指向其原始存储库，因为我想从远程获取更新，

我使用 git pull remote branch_name，然后我的本地 repo 处于冲突模式，现在我想取消 git pull 的效果，所以我使用 git stash，但惊讶地发现我没有这样做？怎么了？

详细信息如下：

```
[mirror@home weechat]$ git status
# On branch master
# Unmerged paths:
#   (use "git add/rm <file>..." as appropriate to mark resolution)
#
#       both modified:      CMakeLists.txt
#       both modified:      ChangeLog
#       both modified:      NEWS
#       both modified:      configure.in
#       both modified:      po/cs.po
#       both modified:      po/de.po
#       both modified:      po/es.po
#       both modified:      po/fr.po
#       both modified:      po/hu.po
#       both modified:      po/ru.po
#       both modified:      po/weechat.pot
#       deleted by us:      src/irc/irc-server.c
#       both modified:      weechat.spec
#
no changes added to commit (use "git add" and/or "git commit -a")
[mirror@home weechat]$ git stash
CMakeLists.txt: needs merge
ChangeLog: needs merge
NEWS: needs merge
configure.in: needs merge
po/cs.po: needs merge
po/de.po: needs merge
po/es.po: needs merge
po/fr.po: needs merge
po/hu.po: needs merge
po/ru.po: needs merge
po/weechat.pot: needs merge
src/irc/irc-server.c: needs merge
weechat.spec: needs merge
CMakeLists.txt: needs merge
ChangeLog: needs merge
NEWS: needs merge
configure.in: needs merge
po/cs.po: needs merge
po/de.po: needs merge
po/es.po: needs merge
po/fr.po: needs merge
po/hu.po: needs merge
po/ru.po: needs merge
po/weechat.pot: needs merge
src/irc/irc-server.c: needs merge
weechat.spec: needs merge
CMakeLists.txt: unmerged (118d776a202cfc6688290e96fca20ac4f8631f5e)
CMakeLists.txt: unmerged (d05c9a9711a965dcad0aefa03b79ae7a4f5cb8fb)
CMakeLists.txt: unmerged (dd2b14cb188e1927e098705d77e922ad530e232b)
ChangeLog: unmerged (764711936b54aa75812828e1ab15e1632aa3eb9d)
ChangeLog: unmerged (e00d4bf654c3d199e24bf4910b066f1659fea4b6)
ChangeLog: unmerged (dbec2315ffc1f15feede248abe3ed85beaa82ed7)
NEWS: unmerged (457d5443548e6130b50e42a9c87a6f2e8ba4c596)
NEWS: unmerged (706cee4b8853013f20129ccb2fa9057b7500fceb)
NEWS: unmerged (33afffbac62399faa32e2560a9accd95dd9a050e)
configure.in: unmerged (8e1058e5e00a5e671459cee8300420b0488560d9)
...
fatal: git-write-tree: error building trees
Cannot save the current index state 
```

那么如何取消 git pull 的效果呢？我应该删除repo，然后重新下载吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-27T10:07:29.580

运行`git merge --abort`。

您正处于合并过程中，因此存储绝对不是您应该做的事情（您会丢失与合并相关的历史信息）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-27T10:12:35.300

`git stash`是保存更改以备将来使用，而不是取消冲突状态，这就是它不起作用的原因。

而是使用`git reset ORIG_HEAD`（请参阅[如何撤消 git pull？](https://stackoverflow.com/q/5815448/11343)）

# stream - 将视频转换为 mp4 并在仍在转换时开始流式传输

> ID：12139813
> 
> 赞同：4
> 
> 时间：2012-08-27T09:57:59.937
> 
> 标签：stream, mp4

我想将视频文件转换为 mp4（不管是 ffmpeg 还是其他东西都没有关系），然后将其流式传输到我网络上的设备。我已经知道我需要使用 qt-faststart 或类似工具将“moov atom”移动到文件顶部，以便它立即播放而不是先下载整个文件。但问题是，我需要等到转换完成才能运行 qt-faststart。

有什么方法可以开始将文件转换为 mp4，然后在它仍在转换的同时进行流式传输？

我读了一些关于碎片化 mp4 文件的内容，但我不太确定这是否是我的问题的解决方案（据我所知，碎片化 mp4 文件的每个片段都有 moof 框，我可以开始流式传输片段，然后立即播放）。

另一个想法是，将文件分成小部分转换，运行 qt-faststart 然后流式传输。当它在流式传输时，我会转换下一部分，运行 qt-faststart 并在它后面流式传输它。但这可能吗？接收方不会被我正在流式传输的下一个文件的新标头而不是正常的视频数据所迷惑吗？

# c# - 如果为空则处理输出

> ID：12139817
> 
> 赞同：0
> 
> 时间：2012-08-27T09:58:11.720
> 
> 标签：c#, process

我正在使用 c# 和 StandardoutputRedirect 以字符串形式获取进程的输出，但是程序有时不提供任何输出的问题如何进程仍在等待输出我如何例如等待 3 秒如果有是没有输出继续程序？？

这是我的代码

```
Process tcpdump = new Process();
tcpdump.StartInfo.FileName= "/usr/sbin/tcpdump";
tcpdump.StartInfo.CreateNoWindow = true;
tcpdump.StartInfo.Arguments = " -i en1 -c 10 -nn tcp and src host " + ip + " and port " + ports[i];
tcpdump.StartInfo.UseShellExecute = false;
tcpdump.StartInfo.RedirectStandardOutput = true;
tcpdump.Start();
tcpdump.WaitForExit(3000);
string tcpdump_output = tcpdump.StandardOutput.ReadToEnd(); // at this part the programs waits for an output 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T10:02:39.060

你有`tcpdump.WaitForExit(3000);`，它应该只让你的进程等待那么久，但你可能还想杀死它继续前进：

```
if (!tcpdump.WaitForExit(3000)) {
    tcpdump.Kill();
} 
```

此外，根据[文档](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standardoutput.aspx)，您应该在调用`.StandardOutput.ReadToEnd()` *之前先*调用`WaitForExit()`，否则您可能会进入死锁 - 看起来您就是这样。因此，请尝试将您的代码更新为：

```
string tcpdump_output = tcpdump.StandardOutput.ReadToEnd();
if (!tcpdump.WaitForExit(3000)) {
    tcpdump.Kill();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:04:17.797

它对你有用然后你检查

```
if (tcpdump.EndOfStream)
{
    // ...
} 
```

在读到最后之前？

# oracle10g - JasperReports 服务器与 Oracle 和 WebSphere

> ID：12139819
> 
> 赞同：4
> 
> 时间：2012-08-27T09:58:14.183
> 
> 标签：oracle10g, jasper-reports, websphere, jasperserver

*是否可以在WebSphere*应用服务器上部署*JasperReport Server 4.7.0*社区项目并在*Oracle 10g*而不是*MySQL*中创建 JR 存储库？

 ***如果可能，那么需要哪些可能的配置，因为社区版不为这些服务器提供官方支持。***

# ios - 如何从 SVN 下载谷歌代码到 Mac

> ID：12139821
> 
> 赞同：6
> 
> 时间：2012-08-27T09:58:21.440
> 
> 标签：ios, macos, svn, download, google-api

我想将 Google APIs Objective-C 客户端下载到我的 Mac (OSX 10.8) 上。 [此页面](http://code.google.com/p/google-api-objectivec-client/source/checkout)说明以下内容：

> 非成员可以通过 HTTP 匿名签出只读工作副本。svn 结帐[http://google-api-objectivec-client.googlecode.com/svn/trunk/](http://google-api-objectivec-client.googlecode.com/svn/trunk/) google-api-objectivec-client-read-only

所以我尝试在终端中运行该行，我得到的只是：

> -bash：svn：找不到命令

谁能告诉我我做错了什么？SVN 应该已经与 OSX 一起安装了，不是吗？还是我需要先安装它？SVN 命令可以在任何目录中使用吗？

任何帮助，非常感谢。多谢你们。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T10:12:29.823

我很确定您需要 Apple 的命令行工具。您可以通过从 Mac App Store 安装 Xcode 或从[此处](https://developer.apple.com/downloads/index.action)下载命令行工具来获得这些。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T21:07:55.287

如何安装命令行工具：

Xcode / 行为 / 编辑行为... / 下载 / 命令行工具 / 安装

# symfony - 使用用户注册表时删除密码检查

> ID：12139822
> 
> 赞同：0
> 
> 时间：2012-08-27T09:58:36.580
> 
> 标签：symfony, symfony-2.1, fosuserbundle

我想自动创建用户并生成密码。我正在使用自定义表单类来显示名字、姓氏和电子邮件字段。用户名是根据电子邮件创建的，这没有问题。但是，在保存新用户时，我不能跳过密码验证并实现密码生成。

我应该创建自定义 validator.xml

原文如下：

```
<?xml version="1.0" encoding="UTF-8" ?>

<container xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <parameters>
        <parameter key="fos_user.validator.password.class">FOS\UserBundle\Validator\PasswordValidator</parameter>
        <parameter key="fos_user.validator.unique.class">FOS\UserBundle\Validator\UniqueValidator</parameter>
    </parameters>

    <services>
        <service id="fos_user.validator.initializer" class="FOS\UserBundle\Validator\Initializer" public="false">
            <tag name="validator.initializer" />
            <argument type="service" id="fos_user.user_manager" />
        </service>
    </services>

</container> 
```

我看到这里`fos_user.validator.password.class`，也许我应该把自定义类放在这里

好的，我接近解决方案，使用 validator.xml 我可以更改一些验证器，但我不知道如何将验证器更改`NotBlank`为`Blank`. 尝试了这个片段但没有成功。

```
 <class name="Application\Sonata\UserBundle\Entity\User">

        <property name="plainPassword">
            <constraint name="Blank">
                <option name="groups">Registration</option>
            </constraint>
        </property>

    </class> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:54:46.103

似乎根本不可能重载已经定义的约束。出于这个原因，许多人建议使用验证组来控制这一点。当然，对于这个例子来说，这是一个坏主意，因为有许多验证规则需要复制粘贴到新组中。

出于这个原因，我决定为密码创建一些隐藏字段，并用一些随机值填充它，这些值将用于生成真实密码。

# python - Python'连接由对等方重置'

> ID：12139823
> 
> 赞同：13
> 
> 时间：2012-08-27T09:58:39.837
> 
> 标签：python, sockets, udp

我正在使用 Python 并在给定端口上侦听 UDP 数据包，一切似乎都运行良好 - 但经过一段时间后脚本崩溃并出现以下错误：

```
data = self._sock.recv(self._rbufsize)
socket.error: [Errno 54] Connection reset by peer 
```

仅重新启动脚本时，同样的崩溃会在较短的时间后再次发生。重新启动服务器似乎可以再次完全解决问题一段时间。

关于事物的套接字方面，我正在做：

```
UDP_IP = "0.0.0.0"
UDP_PORT = 6000

sock = socket.socket( socket.AF_INET, socket.SOCK_DGRAM )
sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
sock.bind( (UDP_IP, UDP_PORT) ) 
```

我是否遗漏了一些明显的东西，或者是否有一种简单的方法可以避免这种情况？

提前感谢您提供的任何信息！

本吉

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-10T08:39:40.490

UDP 套接字上的“Connection reset by peer”错误，表示客户端在其发送的数据包上从服务器收到了 ICMP 错误消息（例如：端口不可达、超出 TTL 等）。

我不能确定是什么导致您的代码出现这种情况，但我可以提供两个想法：

1.  连接确实被某些东西（路由问题、服务器端故障等）中断了。在这种情况下，您可以检查此错误，如果以及何时发生，您可以重新打开您的套接字。
2.  对我来说似乎更有可能但我不太熟悉的`SO_REUSEADDR`是导致问题的原因。此套接字选项允许您在同一端口上打开多个套接字。**可能**发生的情况是，其他进程正在尝试使用端口 6000，成功（因为您告诉操作系统不要阻止它），并且您的套接字被操作系统关闭。由于我看不出`SO_REUSEADDR`在 UDP 套接字上使用的理由，我建议您删除该行`sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)`并重试。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-28T02:36:05.100

这不是最相关的，但我在尝试向 DNS (DoH) 解析器发送 HTTP GET 请求（使用 Python 套接字）时遇到了相同的 ErrNo54 或 ErrNo104 Connection Reset by peer error。

我通过修复 HTTP 请求中的参数解决了这个问题。对于我的实例，我最初有一个 Content-Type: application/dns-message，后来我将其更改为 Accept: application/dns-message。

希望这可以帮助遇到类似问题的任何人。

# java - 在类路径中找不到 META-INF/persistence.xml

> ID：12139824
> 
> 赞同：0
> 
> 时间：2012-08-27T09:58:43.887
> 
> 标签：java, jpa, netbeans, persistence, persistence.xml

我正在使用 netbeans 6.8 和 Persistence API。

在 netbeans 6.8 中，persistence.xml 放在 src/conf/ 文件夹中。我尝试创建一个 /src/META-INF/ 文件夹并将persistence.xml复制到该文件夹​​中，但我仍然收到错误

在类路径中找不到 META-INF/persistence.xml。

尝试运行应用程序时。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:45:09.067

当您运行应用程序时，请确保 META-INF 文件夹的根目录位于您的类路径中。（src 目录不会在类路径上，只有 NetBeans 将类编译到的目录）。

# android - AlertDialog.Builder 类的意义是什么？

> ID：12139825
> 
> 赞同：4
> 
> 时间：2012-08-27T09:58:49.463
> 
> 标签：android, dialog, android-alertdialog, builder

在 Android 中，每个对话框都显示`Builder`为用于该对话框类。是这些`Builder`类中的静态内部类。那么为什么 Builder 被赋予了构建对话框的控制权呢？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T10:14:56.333

它只是一个帮助类，允许您调用链中的方法并轻松设置正/负按钮。例如：

**警报对话框生成器**

```
AlertDialog.Builder alert = new AlertDialog.Builder(this)
  .setTitle("this is title")
  .setMessage("this is message")
  .setCancelable(false)
  .setPositiveButton("OK", null);
  alert.show(); 
```

**警报对话框**

```
AlertDialog alert2 = new AlertDialog.Builder(this).create();
alert2.setTitle("this is title");
alert2.setMessage("");
alert2.setCancelable(false);
alert2.setButton(AlertDialog.BUTTON_POSITIVE, "OK", new OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {
        // null 
    }
});
alert2.show(); 
```

因此，现在您可能会看到用两种不同方式创建相同事物的难易程度不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-03T03:16:27.370

我完全同意[waqaslam](https://stackoverflow.com/users/966550/waqaslam)，但同时，AlertDialog 为您提供了更多自定义对话框的方式。就像您可以通过使用轻松地在 AlertDialog 中应用动画一样

```
// Create an enter animation(name = enter_anim)
<translate android:fromXDelta="-100%p"
    android:fromYDelta="0%"
    android:duration="1000">

</translate>

//Create an exit animation(name = exit_anim)
<translate
    android:duration="1000"
    android:fromXDelta="0%"
    android:toXDelta="100%p">

</translate>

//Then combine the enter and exit animation by creating a style
<style name="DialogSlide">
    <item name="android:windowEnterAnimation">@anim/enter_anim</item>
    <item name="android:windowExitAnimation">@anim/exit_anim</item>
</style>

//Now creating an AlertDialog
AlertDialog dialog = new AlertDialog.Builder(this).create();
    dialog.setTitle("Alert Dialog");
    dialog.setMessage("Hello! This is an alert dialog");
    dialog.getWindow().getAttributes().windowAnimations=R.style.DialogSlide;
    dialog.show(); 
```

//这条线将动画附加到您的对话框中，您不会在 AlertDialog.Builder 类中找到它

```
dialog.getWindow().getAttributes().windowAnimations=R.style.DialogSlide; 
```

因此，通过这种方式，您可以创建任何类型的动画并通过创建样式附加到 AlertDialog。但我认为你很少能通过使用 AlertDialog.Builder 类来实现这一点。因此，您可以通过使用动画为用户提供更好的用户体验。

# batch-file - 批处理文件窗口

> ID：12139826
> 
> 赞同：0
> 
> 时间：2012-08-27T09:58:52.410
> 
> 标签：batch-file, batch-processing

```
P1=c:\users\a\
P2=c:\users\b\
Q1=c:\users\c\
Q2=c:\users\d\
olderthan=7 
```

P1 和 P2 是源目录 Q1 和 Q2 是目标目录

此逻辑背后的目的是从 P1 和 P2 目录中查找超过 7 天的文件。那些旧文件应该复制到 Q1 和 Q2 并从 P1 和 p2 中删除。

我使用以下逻辑为 P1 到 Q1 完成了它：

```
FORFILES -p %P1% /d -%olderthan% -m *.%extension% -c "CMD /C XCOPY %P1%\@FILE %Q1%"
FORFILES -p %P1% /d -%olderthan% -m *.%extension% -c "CMD /C if exist %Q1%\@FILE del %P1%\@FILE /Q & echo @FILE Deleted." >> %loglocation% 
```

但是如何使用 for 循环或任何其他逻辑为 P1 到 Q1 以及 P2 到 Q2 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:42:52.037

没有任何单个循环可以处理多个源和目标对。您需要分别对每一对应用相同的逻辑。也许一个子程序会简化事情。

您可以通过将 XCOPY 和 DEL 命令替换为单个 MOVE 命令来简化逻辑。

FORFILES /D 选项使用“小于或等于”逻辑，而不是“小于”。如果您确实要移动超过 7 天的文件夹，则需要使用值 8。

我在路径周围添加了引号，以防万一您得到包含空格的路径。引号需要在命令字符串中加倍。

通过使用文件掩码参数而不是扩展参数，我使例程更加灵活。

```
@echo off
call :moveOldFiles c:\users\a *.txt 7 c:\users\c >>mylog.log
call :moveOldFiles c:\users\b *.txt 7 c:\users\d >>mylog.log
exit /b

:moveOldFiles  sourceDir  extension  minAgeInDays  destinationDir
forfiles /p "%~f1" /m %2 /d -%3 -c "cmd /c move /y @path ""%~f4\"" && echo @path moved to "%~f4"""
exit /b 
```

你真的应该考虑使用 ROBOCOPY 而不是 FORFILES。它应该表现更好，并且非常灵活。与 FORFILES 一样，您需要为每个源/目标对调用一次 ROBOCOPY。

# ios-ui-automation - 无法在仪器中使用带有 python/shell 的 performTaskWithPathArgumentsTimeout 写入 txt 文件

> ID：12139828
> 
> 赞同：0
> 
> 时间：2012-08-27T09:58:58.613
> 
> 标签：ios-ui-automation, xcode-instruments

当我尝试使用 performTaskWithPathArgumentsTimeout 执行 python/shell 脚本（写入 txt 文件）时，它不起作用。我通过 Instruments 在 UIAutomation 中使用它。结果代码和错误也是“0”。所以无法找出确切的问题。

代码：

```
var result = target.host().performTaskWithPathArgumentsTimeout("/usr/bin/python", ["/Users/swr/Development/onexsipios/Automation/iOSClient/sum.py"], 15);

UIALogger.logMessage("exit code: " + result.exitCode + " std output : " + result.stdout + " error output: " + result.stderr) 
```

输出结果是：退出代码：0 标准输出：错误输出：

当我在终端中执行相同的操作时，文本文件正在创建和写入，但在 Instruments 中通过 javascript 执行时无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T12:25:11.737

问题是仪器需要完整路径并且不适用于相对路径。

在仪器中为 UIAutomation 引用文件时始终使用完整路径。

# ruby-on-rails - FFI 1.0.11 未在 cygwin 中安装

> ID：12139829
> 
> 赞同：5
> 
> 时间：2012-08-27T09:58:59.957
> 
> 标签：ruby-on-rails, cygwin, capybara, ffi

在执行“捆绑安装”时，我无法安装 ffi gem 并出现以下错误：

```
 Installing ffi (1.0.11) with native extensions
    Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

                    /home/Dmitry.Veremchuk/.rvm/rubies/ruby-1.9.3-p194/bin/ruby.exe extconf.rb
    checking for ffi.h... no
    checking for ffi.h in /usr/local/include... no
    checking for rb_thread_blocking_region()... yes
    checking for ruby_native_thread_p()... yes
    checking for rb_thread_call_with_gvl()... yes
    creating extconf.h
    creating Makefile

    make
    Configuring libffi
    make -C "/home/Dmitry.Veremchuk/.rvm/gems/ruby-1.9.3-p194/gems/ffi-1.0.11/ext/ffi_c/libffi"
    make[1]: Entering directory `/home/Dmitry.Veremchuk/.rvm/gems/ruby-1.9.3-p194/gems/ffi-1.0.11/ext/ffi_c/libffi'
    make "AR_FLAGS="  "CC_FOR_BUILD="  "CFLAGS="  "CXXFLAGS="  "CFLAGS_FOR_BUILD="
    "CFLAGS_FOR_TARGET="  "INSTALL=/usr/bin/install -c"  "INSTALL_DATA=/usr/bin/install -c -m 644"  "INSTALL_PROGRAM=/usr/bin/install -c"  "INSTALL_SCRIPT=/usr/bin/install -c"  "JC1FLAGS="  "LDFLAGS="  "LIBCFLAGS="  "LIBCFLAGS_FOR_TARGET="  "MAKE=make"  "MAKEINFO=/bin/sh /home/Dmitry.Veremchuk/.rvm/gems/ruby-1.9.3-p194/gems/ffi-1.0.11/ext/ffi_c/libffi/missing --run makeinfo "  "PICFLAG="  "PICFLAG_FOR_TARGET="  "RUNTESTFLAGS="  "SHELL=/bin/sh"  "exec_prefix=/usr/local"  "infodir=/usr/local/share/info"  "libdir=/usr/local/lib"  "prefix=/usr/local"  "AR=ar"  "AS=as"  "CC=gcc"  "CXX=g++"  "LD=/usr/i686-pc-cygwin/bin/ld.exe"  "NM=/usr/bin/nm -B"  "RANLIB=ranlib"  "DESTDIR=" all-recursive
    make[2]: Entering directory `/home/Dmitry.Veremchuk/.rvm/gems/ruby-1.9.3-p194/gems/ffi-1.0.11/ext/ffi_c/libffi'
    Making all in include
    make[3]: Entering directory `/home/Dmitry.Veremchuk/.rvm/gems/ruby-1.9.3-p194/gems/ffi-1.0.11/ext/ffi_c/libffi/include'
    make[3]: Nothing to be done for `all'.
    make[3]: Leaving directory `/home/Dmitry.Veremchuk/.rvm/gems/ruby-1.9.3-p194/gems/ffi-1.0.11/ext/ffi_c/libffi/include'
    Making all in testsuite
    make[3]: Entering directory `/home/Dmitry.Veremchuk/.rvm/gems/ruby-1.9.3-p194/gems/ffi-1.0.11/ext/ffi_c/libffi/testsuite'
    make[3]: Nothing to be done for `all'.
    make[3]: Leaving directory `/home/Dmitry.Veremchuk/.rvm/gems/ruby-1.9.3-p194/gems/ffi-1.0.11/ext/ffi_c/libffi/testsuite'
    Making all in man
    make[3]: Entering directory `/home/Dmitry.Veremchuk/.rvm/gems/ruby-1.9.3-p194/gems/ffi-1.0.11/ext/ffi_c/libffi/man'
    make[3]: Nothing to be done for `all'.
    make[3]: Leaving directory `/home/Dmitry.Veremchuk/.rvm/gems/ruby-1.9.3-p194/gems/ffi-1.0.11/ext/ffi_c/libffi/man'
    make[3]: Entering directory `/home/Dmitry.Veremchuk/.rvm/gems/ruby-1.9.3-p194/gems/ffi-1.0.11/ext/ffi_c/libffi'
    /bin/sh ./libtool --tag=CC    --mode=compile gcc -DHAVE_CONFIG_H -I.   -I. -I./include -Iinclude -I./src  -Wall -g -fexceptions  -c -o src/debug.lo src/debug.c
    libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I. -I./include -Iinclude -I./src -Wall -g -fexceptions -c src/debug.c  -DDLL_EXPORT -DPIC -o src/.libs/debug.o
    /bin/sh ./libtool --tag=CC    --mode=compile gcc -DHAVE_CONFIG_H -I.   -I. -I./include -Iinclude -I./src  -Wall -g -fexceptions  -c -o src/prep_cif.lo src/prep_cif.c
    libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I. -I./include -Iinclude -I./src -Wall -g -fexceptions -c src/prep_cif.c  -DDLL_EXPORT -DPIC -o src/.libs/prep_cif.o
    /bin/sh ./libtool --tag=CC    --mode=compile gcc -DHAVE_CONFIG_H -I.   -I. -I./include -Iinclude -I./src  -Wall -g -fexceptions  -c -o src/types.lo src/types.c
    libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I. -I./include -Iinclude -I./src -Wall -g -fexceptions -c src/types.c  -DDLL_EXPORT -DPIC -o src/.libs/types.o
    /bin/sh ./libtool --tag=CC    --mode=compile gcc -DHAVE_CONFIG_H -I.   -I. -I./include -Iinclude -I./src  -Wall -g -fexceptions  -c -o src/raw_api.lo src/raw_api.c
    libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I. -I./include -Iinclude -I./src -Wall -g -fexceptions -c src/raw_api.c  -DDLL_EXPORT -DPIC -o src/.libs/raw_api.o
    /bin/sh ./libtool --tag=CC    --mode=compile gcc -DHAVE_CONFIG_H -I.   -I. -I./include -Iinclude -I./src  -Wall -g -fexceptions  -c -o src/java_raw_api.lo src/java_raw_api.c
    libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I. -I./include -Iinclude -I./src -Wall -g -fexceptions -c src/java_raw_api.c  -DDLL_EXPORT -DPIC -o src/.libs/java_raw_api.o
    /bin/sh ./libtool --tag=CC    --mode=compile gcc -DHAVE_CONFIG_H -I.   -I. -I./include -Iinclude -I./src  -Wall -g -fexceptions  -c -o src/closures.lo src/closures.c
    libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I. -I./include -Iinclude -I./src -Wall -g -fexceptions -c src/closures.c  -DDLL_EXPORT -DPIC -o src/.libs/closures.o
    /bin/sh ./libtool --tag=CC    --mode=compile gcc -DHAVE_CONFIG_H -I.   -I. -I./include -Iinclude -I./src  -Wall -g -fexceptions  -c -o src/x86/ffi.lo src/x86/ffi.c
    libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I. -I./include -Iinclude -I./src -Wall -g -fexceptions -c src/x86/ffi.c  -DDLL_EXPORT -DPIC -o src/x86/.libs/ffi.o
    /bin/sh ./libtool    --mode=compile gcc -DHAVE_CONFIG_H -I.   -I. -I./include -Iinclude -I./src  -I. -I./include -Iinclude -I./src  -c -o src/x86/win32.lo src/x86/win32.S
    libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I. -I./include -Iinclude -I./src -I. -I./include -Iinclude -I./src -c src/x86/win32.S  -DDLL_EXPORT -DPIC -o src/x86/.libs/win32.o
    /bin/sh ./libtool --tag=CC    --mode=link gcc -Wall -g -fexceptions   -version-info `grep -v '^#' ./libtool-version` -no-undefined  -o libffi.la -rpath /usr/local/lib src/debug.lo src/prep_cif.lo src/types.lo  src/raw_api.lo src/java_raw_api.lo src/closures.lo      src/x86/ffi.lo src/x86/win32.lo

    libtool: link: gcc -shared  src/.libs/debug.o src/.libs/prep_cif.o src/.libs/types.o src/.libs/raw_api.o src/.libs/java_raw_api.o src/.libs/closures.o src/x86/.libs/ffi.o src/x86/.libs/win32.o      -o .libs/cygffi-5.dll -Wl,--enable-auto-image-base -Xlinker --out-implib -Xlinker .libs/libffi.dll.a
    Creating library file: .libs/libffi.dll.a
    libtool: link: ( cd ".libs" && rm -f "libffi.la" && ln -s "../libffi.la" "libffi.la" )
    /bin/sh ./libtool --tag=CC    --mode=link gcc -Wall -g -fexceptions     -o libffi_convenience.la  src/debug.lo src/prep_cif.lo src/types.lo  src/raw_api.lo src/java_raw_api.lo src/closures.lo      src/x86/ffi.lo src/x86/win32.lo

    libtool: link: ar cru .libs/libffi_convenience.a src/.libs/debug.o src/.libs/prep_cif.o src/.libs/types.o src/.libs/raw_api.o src/.libs/java_raw_api.o src/.libs/closures.o src/x86/.libs/ffi.o src/x86/.libs/win32.o
    libtool: link: ranlib .libs/libffi_convenience.a
    libtool: link: ( cd ".libs" && rm -f "libffi_convenience.la" && ln -s "../libffi_convenience.la" "libffi_convenience.la" )
    make[3]: Leaving directory `/home/Dmitry.Veremchuk/.rvm/gems/ruby-1.9.3-p194/gems/ffi-1.0.11/ext/ffi_c/libffi'
    make[2]: Leaving directory `/home/Dmitry.Veremchuk/.rvm/gems/ruby-1.9.3-p194/gems/ffi-1.0.11/ext/ffi_c/libffi'
    make[1]: Leaving directory `/home/Dmitry.Veremchuk/.rvm/gems/ruby-1.9.3-p194/gems/ffi-1.0.11/ext/ffi_c/libffi'
    compiling AbstractMemory.c
    AbstractMemory.c:271: warning: 'memory_put_bool' defined but not used
    AbstractMemory.c:271: warning: 'memory_write_bool' defined but not used
    AbstractMemory.c:271: warning: 'memory_get_bool' defined but not used
    AbstractMemory.c:271: warning: 'memory_read_bool' defined but not used
    AbstractMemory.c:271: warning: 'memory_write_array_of_bool' defined but not used
    AbstractMemory.c:271: warning: 'memory_read_array_of_bool' defined but not used
    AbstractMemory.c:388: warning: 'memory_read_array_of_string' defined but not used
    compiling ArrayType.c
    compiling Buffer.c
    compiling Call.c
    compiling ClosurePool.c
    compiling DataConverter.c
    compiling DynamicLibrary.c
    compiling ffi.c
    compiling Function.c
    compiling FunctionInfo.c
    compiling LastError.c
    compiling MappedType.c
    MappedType.c: In function `mapped_initialize':
    MappedType.c:63: warning: unused variable `t'
    compiling MemoryPointer.c
    MemoryPointer.c:134: warning: 'memptr_mark' defined but not used
    compiling MethodHandle.c
    compiling Platform.c
    compiling Pointer.c
    compiling Struct.c
    compiling StructByReference.c
    compiling StructByValue.c
    compiling StructLayout.c
    compiling Thread.c
    In file included from /usr/include/cygwin/sys_time.h:13,
                                     from /usr/include/sys/time.h:28,
                                     from /usr/include/sys/_default_fcntl.h:186,
                                     from /usr/include/sys/fcntl.h:3,
                                     from /usr/include/fcntl.h:14,
                                     from Thread.c:31:
    /usr/include/sys/select.h:31: error: parse error before "fd_set"
    /usr/include/sys/select.h:33: error: parse error before "fd_set"
    In file included from /home/Dmitry.Veremchuk/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/ruby/ruby.h:1382,
                                     from /home/Dmitry.Veremchuk/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/ruby.h:32,
                                     from Thread.h:25,
                                     from Thread.c:32:
    /home/Dmitry.Veremchuk/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/ruby/intern.h:285: error: parse error before "rb_fdset_t"
    /home/Dmitry.Veremchuk/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/ruby/intern.h:285: warning: type defaults to `int' in declaration of `rb_fdset_t'
    /home/Dmitry.Veremchuk/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/ruby/intern.h:285: warning: data definition has no type or storage class
    /home/Dmitry.Veremchuk/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/ruby/intern.h:379: error: parse error before "fd_set"
    /home/Dmitry.Veremchuk/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/ruby/intern.h:380: error: parse error before "rb_fdset_t"
    Makefile:199: recipe for target `Thread.o' failed
    make: *** [Thread.o] Error 1

    Gem files will remain installed in /home/Dmitry.Veremchuk/.rvm/gems/ruby-1.9.3-p194/gems/ffi-1.0.11 for inspection.
    Results logged to /home/Dmitry.Veremchuk/.rvm/gems/ruby-1.9.3-p194/gems/ffi-1.0.11/ext/ffi_c/gem_make.out
    An error occured while installing ffi (1.0.11), and Bundler cannot continue.
    Make sure that `gem install ffi -v '1.0.11'` succeeds before bundling. 
```

我的 Gemfile 中不需要 FFI gem。虽然我想水豚需要它。我有以下配置：
装有 Windows XP 和 Cygwin 的 PC（安装了 devtools）；
Ruby 版本 1.9.3p194（在 RVM 中）；
导轨版本 3.2.8。

我尝试单独安装 ffi-1.0.11，但遗憾的是结果相同。

将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:28:19.137

[在github](https://github.com/ffi/ffi/issues/226)上报告了类似的错误。但直到现在都没有解决办法。

# java - 打开的文件太多错误

> ID：12139831
> 
> 赞同：1
> 
> 时间：2012-08-27T09:59:08.573
> 
> 标签：java, file, runtime-error

**介绍**

我在网上找到了大量关于*打开文件过多*异常的信息，但我无法解决这个奇怪的情况。正如我所读到的，当超过操作系统中定义的进程打开的文件描述符的数量时，将引发异常。这些文件的性质是多种多样的。文件可以是套接字、文档等。而且我已经找到了打开在我的 Java 应用程序中实现的文件的可靠且安全的方法。

[该应用程序是一个使用Boilerpipe](http://code.google.com/p/boilerpipe/)算法下载网页的短程序。这样我就得到了那个网站最具代表性的内容。然后，我以适当的格式（*TREC 格式*）将其写入磁盘。这些网站的 URL 取自我使用*JDBC 连接器*访问的 MySQL 数据库。

所以，我认为可以从三个不同的地方抛出异常：

*   连接到数据库
*   与网站的 HTTP 连接
*   打开和写入文件

虽然，正如我所说，我认为我使用正确的方式打开和写入这些文件。

**问题**

有数千个 URL 需要处理，一段时间后抛出异常（**这也使得调试变得非常困难......**）。我不知道这是否重要，但 URL 分为不同的类别，我运行程序的不同实例以加快整个过程。类别不重叠，所以不应该有任何问题。

**代码**

为了使其更具可读性，我将仅展示简化的代码的这三个部分：

1.  数据库访问

    ```
    // Connect to database
    Connection dbconn = null;

    try {
        String dbUrl = "jdbc:mysql://" + dbServer + "/" + dbName;
        Class.forName ("com.mysql.jdbc.Driver").newInstance ();
        dbconn = DriverManager.getConnection(dbUrl, dbUser, dbPass);
        System.out.println ("Database connection established");
    } catch (Exception e) {
        e.printStackTrace();
        System.err.println ("Cannot connect to database server");
        System.exit(-1);
    }

    System.out.println("  Downloading category: " + category);                  

    Statement s = null;
    try {
        s = dbconn.createStatement();
    } catch (SQLException e) {
        System.err.println ("Error on creating the statement");
        System.exit(-1);
        e.printStackTrace();
    }

    String q = "SELECT resource,topic FROM " + 
            "content_links " + 
            "WHERE topic LIKE 'Top/" + category + "%';";

    try {
        s.executeQuery(q);
    } catch(Exception e) {
        System.err.println ("Error on executing the SQL statement");
        System.exit(-1);
        e.printStackTrace();
    }

    ResultSet rs = null;
    try {
        rs = s.getResultSet ();
    } catch (SQLException e) {
        System.err.println ("Error on getting the result set");
        System.exit(-1);
        e.printStackTrace();
    }

    int count = 0, webError = 0;

    // work with the result set
    try {
        while (rs.next ()) {

            // MAIN LOOP
        }

    } catch (SQLException e) {
        System.err.println ("Error on getting next item");
        System.exit(-1);
        e.printStackTrace();
    }

    // Close connection to database
    if (dbconn != null) {
        try {
            dbconn.close ();
            System.out.println ("  Database connection terminated");
        } catch (Exception e) { /* ignore close errors */ }
    } 
    ```

2.  HTTP 连接，提取站点的标题和锅炉过滤器

    ```
    try {

        String title = "";
        org.jsoup.nodes.Document doc = Jsoup.connect(urlVal).get();

        for (Element element : doc.select("*")) {
            if (element.tagName().equalsIgnoreCase("title")) {
                title = element.text();
            }
            if (!element.hasText() && element.isBlock()) {
                element.remove();
            }
        }

        String contents = "";
        contents = NumWordsRulesExtractor.INSTANCE.getText(doc.text());                                         
        storeFile(id, urlVal, catVal, title, contents);
                }
    } catch (BoilerpipeProcessingException e) {
        System.err.println("Connection failed to: " + urlVal);
    } catch (MalformedURLException e1) {
        System.err.println("Malformed URL: " + urlVal);
    } catch(Exception e2) {
        System.err.println("Exception: " + e2.getMessage());
        e2.getStackTrace();
    } 
    ```

3.  写入文件

    ```
    private static void storeFile(String id, String url, String cat, String title, String contents) {
    BufferedWriter out = null;
    try {
        out = new BufferedWriter(
                new OutputStreamWriter(
                new FileOutputStream(
                new File(path + "/" + id + ".webtrec")),"UTF8"));

        // write in TREC format
        out.write("...");
    } catch (IOException e) {
        System.err.println("Error: " + e.getMessage());
        e.printStackTrace();
    } finally {
        try {
            out.close();
        } catch (IOException e) {
            System.err.println("Error: " + e.getMessage());
            e.printStackTrace();
        }
    } 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T10:10:50.933

是的。您正在泄漏文件描述符。

在第一种情况下，您打开一个数据库连接并且从不关闭它。连接通常会使用套接字或其他东西与数据库通信。由于您不关闭连接，因此不会关闭套接字，并且您将泄漏文件描述符。

~~在第二种情况下，我怀疑调用`Jsoup.connect(urlVal)`是打开一个连接，然后你没有关闭它。这将导致文件描述符泄漏。~~

更正 -界面上没有`close()`方法。`Connection`看起来必须创建实际连接，然后通过该`get`方法在内部关闭。假设是这样，在第二种情况下没有文件描述符泄漏。

第三种情况不会泄漏文件描述符。但是，如果您无法打开文件，`out.close();`语句将尝试在`null`... 上调用方法并抛出 NPE。

* * *

解决办法是找到你打开文件的**所有**地方、数据库连接、http连接，并确保句柄**始终**处于关闭状态。

一种方法是将`close()`调用（或等效的）放在一个块中...... `finally`但请确保您不会意外调用`close()`.`null`

另一种方法是使用 Java 7 “try with resource”语法。例如：

```
private static void storeFile(String id, String url, String cat, 
                              String title, String contents) {
    try (BufferedWriter out = new BufferedWriter(
                new OutputStreamWriter(
                new FileOutputStream(
                new File(path + "/" + id + ".webtrec")),"UTF8"))) {
        // write in TREC format
        out.write("...");
        out.close();
    } catch (IOException e) {
        System.err.println("Error: " + e.getMessage());
        e.printStackTrace();
    }
} 
```

（但请注意，Java 7 语法只能用于实现新`Closeable`接口的资源。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T10:15:55.910

补充斯蒂芬的综合分析。我建议为数据库使用连接池，尽管正如斯蒂芬指出的那样，除非您关闭这些连接，否则您将关闭池，但至少更容易发现原因......

我没有看到任何证据，但是您应该使用某种线程池来下载页面，这将有助于最大限度地利用系统资源。一些执行者服务就足够了。就像我说的那样，您可能已经这样做了，但是您没有显示任何代码（或评论）。

# forms - struts 2 TokenInterceptor Form Tokens

> ID：12139835
> 
> 赞同：0
> 
> 时间：2012-08-27T09:59:28.043
> 
> 标签：forms, struts2, token, access-token

在我的 Web 应用程序中，我使用基于 Cookie 的会话，因此该会话在所有浏览器选项卡之间共享，有没有办法限制用户使用令牌一次访问一个选项卡中的应用程序（令牌拦截器)? 在新选项卡中打开将使以前的选项卡页面无效（即所有应用程序 jsp 页面，包括登录页面）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:13:45.143

简而言之，这是不可能的，我想到的唯一解决方案是通过动态编写 URL 使用 sessionID 来强制用户使用应用程序的单个实例。我不确定您为什么需要这个以及您的用例到底是什么。如果我是正确的，spring security 中有这样的功能可以帮助我们为每个登录用户只保留一个实例，并且您只需要在 spring 中设置一个属性-security xml 文件，例如

```
<session-management>
        <concurrency-control max-sessions="1" />
</session-management> 
```

有关详细信息，请参阅这些线程

*   [如何在浏览器选项卡中区分会话](https://stackoverflow.com/questions/368653/how-to-differ-sessions-in-browser-tabs)
*   [每个用户只允许一个会话](https://stackoverflow.com/questions/10782968/allow-only-one-session-per-user)

# android - Json到java对象android？

> ID：12139837
> 
> 赞同：0
> 
> 时间：2012-08-27T09:59:32.113
> 
> 标签：android, json, gson

谁能帮我将此 JSON 转换为 Java 对象。我通常使用 GSON，但这次似乎对我不起作用。问题是我想创建一个包含

```
Class JsonGotText{
String status; 
List<Object> result;
} 
```

但是List中的所有对象都是不同的属性......所以我不知道如何让Gson正确映射它

```
{
  "status": 0,
  "result": {
    "1346053628": {
      "type": "default",
      "decorated_time": 1346053628,
      "guidOwner": 13716,
      "friendGuid": 3264,
      "action_type": "friend",
      "summary": " is now a friend with ",
      "annotation": null,
      "group": ""
    },
    "1346051675": {
      "type": "event",
      "decorated_time": 1346051675,
      "guidOwner": 90,
      "title": null,
      "action_type": "event_relationship",
      "summary": "river:event_relationship:object:event",
      "annotation": null,
      "group": ""
    },
    "1346048488": {
      "type": "event",
      "decorated_time": 1346048488,
      "guidOwner": 90,
      "title": null,
      "action_type": "event_relationship",
      "summary": "river:event_relationship:object:event",
      "annotation": null,
      "group": ""
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:11:59.237

尝试使用

```
Class JsonGotText{
String status; 
HashMap<String, Object> result;
} 
```

如果性能不是这里的关键标准。您最好使用“JSONObject”而不用担心 JSON 字符串的结构。

* * *

理想情况下，您应该编写一个 POJO。假设`EventPOJO`具有与每个结果对象相同的属性，然后将 Java 类设为

```
Class JsonGotText{
  String status; 
  HashMap<String, EventPOJO> result;
} 
```

您可能必须使用类型标记，[请参见此处](https://sites.google.com/site/gson/gson-user-guide#TOC-Serializing-and-Deserializing-Generic-Types)，但稍后会节省您的努力。

**更新**
似乎上面的句子听起来令人困惑。这是我想`EventPOJO`表达的澄清。EventPOJO 将代表诸如

```
{
      "type": "event",
      "decorated_time": 1346048488,
      "guidOwner": 90,
      "title": null,
      "action_type": "event_relationship",
      "summary": "river:event_relationship:object:event",
      "annotation": null,
      "group": ""
    } 
```

* * *

**Update1** @LalitPoptani 要求提供确切的工作代码。这里是！

这是一个工作示例：

```
public class Test {

    private static String json = 
            "{"+
                      "\"status\": 0,"+
                      "\"result\": {"+
                        "\"1346053628\": {"+
                          "\"type\": \"default\","+
                          "\"decorated_time\": 1346053628,"+
                          "\"guidOwner\": 13716"+
                        "},"+
                        "\"1346051675\": {"+
                          "\"type\": \"event\","+
                          "\"decorated_time\": 1346051675,"+
                          "\"guidOwner\": 90"+
                        "},"+
                        "\"1346048488\": {"+
                          "\"type\": \"event\","+
                          "\"decorated_time\": 1346048488,"+
                          "\"guidOwner\": 90"+
                        "}"+
                      "}" +
             "}";

    public static class Event{
        String type;
        Long decorated_time;
        Integer guidOwner;
    }

    public static class JSON{
        Integer status;
        HashMap<Long, Event> result;
    }

    public static void main(String[] args){
        Gson gson = new Gson();
        System.out.println("JSON: " + json);
        JSON j = gson.fromJson(json, JSON.class);
        for(Entry<Long, Event> e: j.result.entrySet()){
            System.out.println(e.getKey() + ": " + e.getValue().guidOwner);
        }
    }
} 
```

# opengl - obj 文件 - 平均法线

> ID：12139840
> 
> 赞同：0
> 
> 时间：2012-08-27T09:59:37.757
> 
> 标签：opengl, 3d

我有一个 obj 文件，它以这种方式存储数据：

```
v value1 value2 value3  
f value1 value2 value3 
```

首先，我计算面部的法线，然后为该面部的每个顶点分配：

```
for(int i = 0; i < verticesInd.size(); i+=3)
{
    glm::vec3 normal = glm::normalize(glm::cross(glm::vec3(vertices[verticesInd[i + 1]]) - glm::vec3(vertices[verticesInd[i]]), glm::vec3(vertices[verticesInd[i + 2]]) - glm::vec3(vertices[verticesInd[i]])));
    out_Normals[i] = normal;
    out_Normals[i + 1] = normal;
    out_Normals[i + 2] = normal;
} 
```

为了实现平面着色，我可以复制顶点：

```
for(int i = 0; i < verticesInd.size(); i++)
{
    out_Vertices.push_back(vertices[verticesInd[i]]);
} 
```

然后使用 glDrawArrays 绘制对象：

```
glDrawArrays(GL_TRIANGLES, 0, out_Vertices.size()); 
```

为了获得平滑的阴影，我需要平均每个顶点的法线，但我不知道如何找到相邻的面。

**Edit1：**我没有注意到 f 之前的单个 s 参数：

```
v value1 value2 value3
s 1  
f value1 value2 value3 
```

**Edit2：**法线平均

```
glm::vec3 tNormal;
for(int i = 0; i < vertices.size(); i++)
{
    for(int  j = 0; j < verticesInd.size(); j++)
    {
        if(verticesInd[j] == i)
        {
            tNormal += faceNormals[j / 3];
        }
    }
    aNormals.push_back(glm::normalize(tNormal));
    tNormal = glm::vec3(0,0,0);
} 
```

**编辑 3**面法线：

```
for(int i = 0; i < verticesInd.size(); i+=3)
{
    glm::vec3 normal = glm::normalize(glm::cross(glm::vec3(vertices[verticesInd[i + 1]]) - glm::vec3(vertices[verticesInd[i]]), glm::vec3(vertices[verticesInd[i + 2]]) - glm::vec3(vertices[verticesInd[i]])));
    faceNormals.push_back(normal);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:12:10.007

在大多数对象格式中，相邻面应该*共享*顶点。在顶点处找到平滑的阴影法线应该是一个平均使用该顶点的任何面的法线的问题。

我建议您创建一个与现有顶点数组大小相同的额外新数组。

遍历每个面，并为每个顶点索引，将该顶点的面法线添加到新数组。

在该过程结束时，对结果法线向量进行归一化，然后使用它代替先前计算的面法线。

如果我正确理解您的数据结构，它看起来像这样：

```
glm::vec3 aNormals[];   // one for each vertex - use the appropriate constructor

for (int i = 0; i < verticesInd.size(); ++i) {
    int f = i / 3;                 // which face is this index part of (3 per face?)
    int v = verticesInd[i];        // which vertex number is being used
    aNormals[v] += faceNormals[f]; // add the face normal to this vertex
}

// now normalise aNormals 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:03:21.383

~~在每个片段照明上关注这个人[https://www.youtube.com/watch?v=MRD_zN0SWh0&feature=plcp 。](https://www.youtube.com/watch?v=MRD_zN0SWh0&feature=plcp)据我所知，它包含相同的方程式，用于在每个顶点的基础上找到法线。~~

你需要一张面孔列表。如果您曾经见过波前 obj。它们包含多个三角形索引 4,7,2 1,2,3。每 3 个数字代表一张脸。使用普通的 Mesh，每个点只能使用 3 次。如果你找到每个组有一个 3 你可以找到每张脸。找到它们对应的正常值，然后平均。

Alnitak 也有有效的信息。您有一个顶点列表，然后将它们列为 3 个一组，以便您可以将顶点（共享）重用为面部数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T17:04:15.417

> 我不知道如何找到相邻的面孔。

将面列表添加到临时的 OBJ-loader 顶点存储中。在处理面线时，将新面添加到它引用的每个顶点的面列表中。

这样，您可以在最后旋转所有顶点，查找它所属的面，抓取面法线，然后平均它们。

如果您的 OBJ 没有如此好的内置连接信息（并且没有要求它必须这样做），那么您必须对每个顶点进行最近邻搜索以找到附近的顶点（和相应的面）它。使用您最喜欢的[空间索引](http://en.wikipedia.org/wiki/Spatial_database#Spatial_index)来加速这些类型的查询。

# java - 如何用 mockito 模拟静态方法？

> ID：12139841
> 
> 赞同：3
> 
> 时间：2012-08-27T09:59:54.127
> 
> 标签：java, junit, mockito

我正在为 Junits 使用 mockito

我知道 mockito 不模拟静态方法，但是有没有办法解决这个问题而不是使用 powermock？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T10:18:14.327

可能的解决方法是在我认为的真实实例中封装静态方法。或静态方法背后的真实实例。

虽然这意味着您必须修改您的生产代码。

老实说，如果您现在问自己这个问题，那么您在开发过程中测试您的代码为时已晚。（现在正在宣传；））如果您正在练习 TDD，您会很早就注意到这个问题，并尽早调整您的设计，以便使用经典测试软件进行完全测试。

我个人在练习 TDD 时使用“疼痛指标”来查看我的设计是否可以。当然，一切都取决于上下文，但通常这是一个良好设计的良好指标（至少对我和其他一些人来说）。

所以我的建议是摆脱这些静态方法或修改你的设计以不依赖于静态方法模拟。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T10:15:24.093

不，我认为我们的 PowerMock 没有任何方法可以做到这一点。

[但是你可以通过引入一个适配器](http://en.wikipedia.org/wiki/Adapter_pattern)来打破对这个静态方法的依赖。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T10:12:42.263

不确定您在寻找什么“方式”。很多人同时使用 Mockito 和 Powermock，我还没有听说过任何关于不兼容或冲突的恐怖故事。只需在需要模拟静态方法的情况下使用 Powermock 就可以了。

或者重构不以需要模拟的方式使用静态方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-07T14:34:59.753

Mockito 从 3.4.0 版本开始支持模拟静态方法。*通过限制*静态方法模拟的范围，它比 PowerMock 做得更好。

要使用此功能，您必须通过将以下文件添加到 test-classpath来启用*Mockito 的内联模拟制作器：*

```
/mockito-extensions/org.mockito.plugins.MockMaker 
```

文件的内容必须是以下单行：

```
mock-maker-inline 
```

完成此操作后，您可以模拟最终类和静态方法。

这是一个**如何模拟带参数和不带参数的静态方法**的示例：

```
public class Foo {
    public static String voidMethod() {
        return "voidMethod-return";
    }

    public static String intMethod(int x) {
        return "intMethod-return " + x;
    }
}

...

// Prepare class 'Foo' for static mocking, for the current thread: 
try (MockedStatic<Foo> mocked = Mockito.mockStatic(Foo.class)) {

        //////////
        // Mock 'Foo.voidMethod()' to return "voidMethod-mock":
        mocked.when(Foo::voidMethod).thenReturn("voidMethod-mock");

        assertEquals("voidMethod-mock", Foo.voidMethod());
        mocked.verify(Foo::voidMethod);

        //////////
        // Mock 'Foo.intMethod()' to return "intMethod-mock":
        mocked.when(() -> Foo.intMethod(10)).thenReturn("intMethod-mock 10");

        assertEquals("intMethod-mock 10", Foo.intMethod(10));
        mocked.verify(() -> Foo.intMethod(10));

} // MockedStatic.close() releases the static mock.

// The original static method is 'restored' here: 
assertEquals("voidMethod-return", Foo.voidMethod());
assertEquals("intMethod-return 10", Foo.intMethod(10)); 
```

# javascript - 如何检查数组中的剩余项目？

> ID：12139844
> 
> 赞同：0
> 
> 时间：2012-08-27T10:00:04.327
> 
> 标签：javascript, backbone.js

想象一下我有一个数组

```
arr = ["one", "two", "three"] 
```

和逻辑

```
if "one" in arr
  processOne()

if "two" in arr
 processTwo()

if <<there is another items in array>>
  processOthers() 
```

**我最后** 应该写什么条件`if`？我找到了`_.difference`函数，但我不想多次编写元素（“一”、“二”……）。

**编辑**

1.  `if else if else`不适合，因为我需要调用 0..N 个过程函数。
2.  这是数组的示例。但是如果它是对象，这个代码会怎么样？
3.  数组没有重复项

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T10:01:25.433

通过使用`.indexOf`方法。

```
var index;
if ( (index = arr.indexOf('one')) !== -1) {
  processOne();
  arr.splice(index, 1);
}

if ((index = arr.indexOf('two')) !== -1) {
  processTwo();
  arr.splice(index, 1);
}

if (arr.length > 0) {
  processOthers();
} 
```

更新：或者你可以循环数组。

```
var one = false, two = false, others = false;
for (var i = 0; i < arr.length; i++) {
  if (arr[i] === 'one' && !one) {
    processOne();
    one = true;
  } else if (arr[i] === 'two' && !two) {
    processTwo();
    two = true;
  } else (!others) {
    processOthers();
    others = true;
  }
  if (one && two && others) break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:05:00.800

你应该这样做：

如果你有：

```
arr = ["one", "two", "three"] 
```

然后：

```
if (something corresponds to arr[one])
{
  processOne()
}

elseif (something corresponds to arr[two])
{
   processTwo()
}

else (something corresponds to arr[three])
{
   processOthers()
} 
```

那应该这样做。

# java - Java 锁：如何在同步块中完成监视器锁的相等性检查？

> ID：12139849
> 
> 赞同：12
> 
> 时间：2012-08-27T10:00:22.440
> 
> 标签：java, concurrency, locking, synchronized

当您`synchronized`在一个对象上有几个块时（例如）`obj`，那么 Java 如何检查所有这些`obj`s 是相同还是不同？

例如：

```
public static f() {
    synchronized ("xyz") {
        ...
    }
} 
```

`f`如果两个线程同时调用上述函数，它们会阻塞另一个吗？请注意，每个线程都会获得一个新的`String`对象实例。

为了检查这一点，我编写了以下测试代码，上面的代码块似乎确实可以工作，但是还有其他意想不到的结果。

```
public class Test {

    public static void main(String[] args){

        new Thread() {
            public void run() {
                //f1("A", new X());
                f1("A", "Str");
            }
        }.start();

        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

        //f1("B", new X());
        f1("B", "Str");
    }

    public static void f1(String a, Object x) {
        synchronized(x) {
            System.out.println("f1: " + a);
            try {
                Thread.sleep(5000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            System.out.println("f1: " + a + " DONE");
        }
    }

    private static class X {
        public boolean equals(Object o) {
            System.out.println("equals called");
            return true;
        }

        public int hashCode() {
            System.out.println("hashCode called");
            return 0;
        }
    }

} 
```

如果您运行上面的代码，您将获得以下输出：-

```
f1: A
f1: A DONE
f1: B
f1: B DONE 
```

但是，如果我注释`f1("A", "Str");`and`f1("B", "Str");`行并取消注释它们上面的行，那么结果是：-

```
f1: A
f1: B
f1: A DONE
f1: B DONE 
```

由于该`Str`版本有效，所以我期待 Java 可能使用`equals`检查`synchronized`块或可能`hashCode`，但从第二次测试看来，情况并非如此。

是`String`特例吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-27T10:02:38.983

不，Java 不`equals`用于锁监视器。

锁在对象实例本身上。所以，在某种程度上，它使用“==”，如果你愿意的话（但实际上，这不是它的实现方式。每个对象都有一个用于当前锁所有者的特殊槽）。

String 没有特殊情况。

但是，字符串发生的事情是字符串文字被池化，如果您多次使用相同的文字，它将导致相同的实例（而`new X`创建不同的实例，就像那样`new String`）。如果您调用`intern`“新”字符串，您可能会看到相同的效果。

# c++ - .wav C++ 数据未正确输出

> ID：12139852
> 
> 赞同：0
> 
> 时间：2012-08-27T10:00:44.983
> 
> 标签：c++

所以我知道我之前已经问过这个问题，但是，我仍然被困在我可以继续我的项目之前。基本上，我正在尝试读取 .wav 文件，我已经读取了所有必需的标头信息，然后将所有数据存储在 char 数组中。这一切都很好，但是，然后我将数据重新转换为整数并尝试输出数据。

我已经在 MatLab 中测试了数据，但是，我得到了非常不同的结果：

MATLAB -0.0078

C++：1031127695

现在这些是非常错误的结果，这里有人好心地说这是因为我将它作为整数输出，但是，我几乎尝试了每一种数据类型，但仍然得到错误的结果。有人建议它可能与 Endianness (http://en.wikipedia.org/wiki/Endianness) .. 这看起来合乎逻辑吗？

这是代码：

```
bool Wav::readHeader(ifstream &file)
{

file.read(this->chunkId,                                 4);
file.read(reinterpret_cast<char*>(&this->chunkSize),     4);
file.read(this->format,                                  4);

file.read(this->formatId,                                4);
file.read(reinterpret_cast<char*>(&this->formatSize),    4);
file.read(reinterpret_cast<char*>(&this->format2),       2);
file.read(reinterpret_cast<char*>(&this->numChannels),   2);
file.read(reinterpret_cast<char*>(&this->sampleRate),    4);
file.read(reinterpret_cast<char*>(&this->byteRate),      4);
file.read(reinterpret_cast<char*>(&this->align),         2);
file.read(reinterpret_cast<char*>(&this->bitsPerSample), 4);

char testing[4] = {0};
int testingSize = 0;

while(file.read(testing, 4) && (testing[0] != 'd' ||
                                testing[1] != 'a' ||
                                testing[2] != 't' ||
                                testing[3] != 'a'))
{

file.read(reinterpret_cast<char*>(&testingSize), 4);
file.seekg(testingSize, std::ios_base::cur);

  }

      this->dataId[0] = testing[0];
      this->dataId[1] = testing[1];
      this->dataId[2] = testing[2];
      this->dataId[3] = testing[3];
     file.read(reinterpret_cast<char*>(&this->dataSize),     4);

     this->data = new char[this->dataSize];

     file.read(data,                     this->dataSize);

     unsigned int *te;

     te = reinterpret_cast<int*>(&this->data);

     cout << te[3];

     return true;
     } 
```

任何帮助将非常感激。我希望我已经提供了足够的细节。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:59:39.430

我认为您的代码存在几个问题。其中之一是演员表，例如这个：

```
 unsigned int *te;                           
 te = reinterpret_cast<int*>(&this->data);     // (2)
 cout << te[3]; 
```

**te**是指向**unsigned int**的指针，而您尝试强制转换为指向**int**的指针。我希望在第 (2) 行出现编译错误...

**te[3]**是什么意思？**我希望在这里输出来自*(te + 3)**内存位置的一些垃圾。

# android - 如何在 OpenGL 中测量 deltaTime？

> ID：12139857
> 
> 赞同：1
> 
> 时间：2012-08-27T10:00:57.930
> 
> 标签：android, opengl-es

我正在像这样测量 deltaTime：

```
deltaTime = (System.currentTimeMillis()-startTime) / 1000.0f;
startTime = System.currentTimeMillis();

screen.update(deltaTime);
screen.present(deltaTime); 
```

但可能存在一些准确性问题。当使用 deltaTime 增加相机位置的 x 时，我的屏幕开始卡顿。如果我不为此使用 deltaTime，就没有任何卡顿。那么我该如何使用有效的 deltaTime 测量OpenGL ES中的系统？

# php - 上周日期数组（从最近的星期一开始）

> ID：12139858
> 
> 赞同：1
> 
> 时间：2012-08-27T10:01:01.480
> 
> 标签：php, mysql, arrays, date

我必须生成一个报告，其中将包含从星期一开始的上周数据（如果今天是星期一，则只显示今天的日期和计数）。我可以知道如何获取上周日期数组（从上周一开始）吗？谢谢。

我写了这个，但在这种情况下，如果上周开始日期是 31，那么第二天就变成了 32，这是不可能的。

```
$last_week_date_start = date('Y-m-d', strtotime('last monday')) + 1; 
```

我想要一个日期数组。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:02:56.597

内加+1

```
for($i=0; $i<6; $i++){
    $last_week_dates[] = date('Y-m-d', strtotime('last monday + '.$i.' day'));
}

/*
array(7) {
  [0]=>
  string(10) "2012-08-20"
  [1]=>
  string(10) "2012-08-21"
  [2]=>
  string(10) "2012-08-22"
  [3]=>
  string(10) "2012-08-23"
  [4]=>
  string(10) "2012-08-24"
  [5]=>
  string(10) "2012-08-25"
  [6]=>
  string(10) "2012-08-26"
}
*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:06:44.760

要遍历报告中的所有日期，您可以执行以下操作：

```
for ($date = strtotime('last monday'); $date < time(); $date += 24*60*60) {
  // e.g. date('Y-m-d', $date);
} 
```

但是，要从数据库中获取数据，您可以执行以下操作：

```
SELECT   DATE(date), COUNT(*)
FROM     my_table
WHERE    DATE(date) BETWEEN CURRENT_DATE - INTERVAL WEEKDAY(CURRENT_DATE) DAY
                        AND CURRENT_DATE
GROUP BY DATE(date)
ORDER BY DATE(date) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T10:13:33.087

为什么不直接使用 SQL 为您完成所有工作？如果您从 mysql 中提取数据（正如您的问题标签可能建议的那样），您可以很好地使用以下内容：

```
select date_sub(date_format(now(),'%Y-%m-%d'), interval WEEKDAY(now()) day) as date from dual; 
```

这为您提供上周一的日期：

```
mysql> select date_sub(date_format(now(),'%Y-%m-%d'), interval WEEKDAY(now()) day) as date from dual;
+------------+
| date       |
+------------+
| 2012-08-27 |
+------------+
1 row in set (0.00 sec) 
```

If it is Monday, it uses the current week of information. You can modify it a touch to suit your needs though.

# android - Android，无法从谷歌 api 获取天气

> ID：12139862
> 
> 赞同：2
> 
> 时间：2012-08-27T10:01:21.647
> 
> 标签：android, weather-api

以下代码之前运行良好：

```
class RetreiveWeatherTask extends AsyncTask<Bundle, Void, WeatherData> {

        private static final String TAG = "WeatherManager";

        @Override
        protected WeatherData doInBackground(Bundle... params) {
            Utils.log(TAG, "start get weather");
            WeatherData weatherData = new WeatherData();
            Bundle b = new Bundle(params[0]);
            double latitude = b.getDouble(REF_LAT);
            double longtitude = b.getDouble(REF_LONG);

            try
            {
                StringBuilder weatherBuilder = new StringBuilder();
                //weatherBuilder.append("http://www.google.com/ig/api?hl=zh-cn&weather=,,,");
                weatherBuilder.append("http://www.google.com/ig/api?hl=en-us&weather=,,,");
                int la = (int) latitude * 1000000;
                int lo = (int) longtitude * 1000000;
                weatherBuilder.append(la);
                weatherBuilder.append(",");
                weatherBuilder.append(lo);
                String weather = weatherBuilder.toString();
                HttpGet hg = new HttpGet(weather);
                // HttpGet hg = new
                // HttpGet("http://www.google.com/ig/api?hl=zh-cn&weather=,,,39130000,117200000");
                HttpClient hc = new DefaultHttpClient();
                HttpResponse hr = hc.execute(hg);
                String responseString = "";
                if (hr.getStatusLine().getStatusCode() != HttpStatus.SC_OK)
                {
                    Utils.logi("", "Location != HttpStatus.SC_OK");
                    return null;
                }
                responseString = EntityUtils.toString(hr.getEntity());
                InputStream is = new ByteArrayInputStream(responseString.getBytes());

                // URL url = new
                // URL("http://www.google.com/ig/api?hl=zh-cn&weather=,,,39130000,117200000");
                // InputStream is =url.openStream();
                DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
                DocumentBuilder db = dbf.newDocumentBuilder();
                Document document = db.parse(is);

                NodeList currList = (NodeList) document.getElementsByTagName("current_conditions");
                NodeList currList2 = currList.item(0).getChildNodes();

                weatherData.weather = new String(currList2.item(0).getAttributes().item(0).getNodeValue());

                weatherData.curTemperature = new String(currList2.item(2).getAttributes().item(0).getNodeValue() + "℃");

                weatherData.wind = new String(currList2.item(5).getAttributes().item(0).getNodeValue());

                Utils.log(TAG, "Get weather = " + weatherData.weather);
                if (isNeedIconFromNet)
                {
                    weatherData.iconUrl = new String(currList2.item(4).getAttributes().item(0).getNodeValue());

                    String url = "http://www.google.com" + weatherData.iconUrl;
                    weatherData.icon = getBitmapByUrl(url);
                }

            }
            catch (Exception e)
            {
                Utils.logi("", "Location get temp Exception e");
                e.printStackTrace();
            }

            return weatherData;
        } 
```

但现在它返回 String: Unsupported API 。

请帮我。谷歌api关闭了吗？PS。我在中国。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T12:52:03.337

是的，谷歌似乎已经停止了无证天气 API 服务。

```
XML Parsing Error: syntax error
Location: http://www.google.com/ig/api?weather=delhi
Line Number 1, Column 1:Unsupported API
^ 
```

您可能想尝试`yahoo weather`或`http://www.wunderground.com/weather/api`. 但是，google 提供了大约 4 天的天气预报，而 yahoo 只提供了大约 2 天的预报（可能有其他方法可以间接从 yahoo 获得更多天的预报）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T12:16:07.773

我认为谷歌天气 API 的终结已经到来，谷歌已经停止了该服务。毕竟，它甚至都不是官方支持的 api。

iGoogle 似乎也不再使用该 API。您最好的选择可能是寻找不同的免费天气 api。

我相信我们会在接下来的几天里听到更多关于这种变化的消息。

# ruby-on-rails - Ruby on Rails，从回形针中删除文件

> ID：12139865
> 
> 赞同：0
> 
> 时间：2012-08-27T10:01:32.037
> 
> 标签：ruby-on-rails, paperclip

我一直在使用回形针，当删除完成时，它只是删除附件，但保存在文件系统中的图像没有被删除。任何人都可以告诉如何使用回形针本身从文件系统中删除图像。

我一直在使用的代码是

```
 has_attached_file :image_o_filename,
    :styles => {
      :tn => ["100x100#",:jpg ,:name => :tn],
      :w => ["640x480>",:jpg, :name => :w],
      :l_tn => ["200x150#",:jpg, :name => :l_tn]
    },
    :path => "/places/hotels/:image_pre_path/images/:basename_:style.:extension" 

```

当我从视图中删除照片时，图像会从数据库中删除，但不会从具有上述路径的文件系统中删除，图像会保留而不会被删除。可能是什么原因？

并且控制台中也没有产生错误..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-12T13:04:06.020

Paperclip 有一个非常好的内置删除方法，我遇到了一个非常相似的问题，并且非常了解这个解决方案：我在控制器内创建了一个名为 delete_image 的方法，然后从视图中我可以调用这个方法。

```
def delete_image
  @user.image.destroy
end 
```

我已将图像附加到用户实例，并且效果很好，不要忘记在配置/路由的路由文件中定义您的方法。

祝你好运，您还可以在此处查找更多信息：

请参阅：Rails Paperclip 如何删除附件？

# linux - 在根目录 / 中创建用户级别 777 目录

> ID：12139866
> 
> 赞同：0
> 
> 时间：2012-08-27T10:01:35.600
> 
> 标签：linux, permissions, file-permissions, user-permissions

我需要将 Dropbox 文件夹放在根路径中，这样：

光盘 /Dropbox

我不能先创建一个普通文件夹，因为 Dropbox 会自动创建一个嵌套在其中的 Dropbox 文件夹......所以它会导致这个（就像现在一样） cd /folder/Dropbox

如果我给出“sudo chmod +w /”会有什么问题？所以我可以在根路径中初始化 Dropbox？如果将其他文件写入 / 没有问题，因为那里没有加载任何重要文件，并且无论如何用户都不会被允许在 /etc 等子文件夹中写入。那正确吗？

# java - 做2个java进程共享JVM

> ID：12139867
> 
> 赞同：3
> 
> 时间：2012-08-27T10:01:42.387
> 
> 标签：java, linux, memory, jvm

假设我在一台机器上运行 2 个 java 进程，它们是共享 JVM 还是拥有自己独立的 JVM。我记得设置类似 export JVM_OPTS="-Xms64m -Xmx1024m"

那么这是哪个JVM？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T10:06:08.413

他们有自己独立的 JVM。
如果您导出 JVM_OPTS，则该变量会影响读取该值的所有 JVM。
如果你想在不同的计算之间共享 JVM，你必须使用多线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T10:05:18.407

您将启动**两个**JVM 进程。

**启动时会从两者**`JVM_OPTS`中读取设置，并且都将创建一个最大大小为 1GB 的分配池

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T10:05:45.290

这两个进程是分开的，你可以在进程列表中看到其中的两个。您指定的选项将被您将在该机器上启动的所有 JVM 使用。**

# c# - 当应用程序独立运行（没有调试器）时，MiniDumpWriteDump() 不起作用

> ID：12139869
> 
> 赞同：1
> 
> 时间：2012-08-27T10:01:52.417
> 
> 标签：c#, .net, debugging, .net-4.0, minidump

在我的 .NET4 应用程序中，我`MiniDumpWriteDump()`调用`Application.ThreadException`和`AppDomain.CurrentDomain.UnhandledException`.

当我在调试器（VS10）中运行应用程序时，我得到了一个完美的转储，但是当我独立运行它时，转储文件是空的。

有任何想法吗？

# asp.net - 如何禁用面板内的所有控件但启用某些指定控件？

> ID：12139873
> 
> 赞同：1
> 
> 时间：2012-08-27T10:02:08.687
> 
> 标签：asp.net

我有 asp:panel 和一些控件，标记如下

```
<asp:panel id="panel1" runat="server">
    <asp:Label runat="server" Text="aaaa"></asp:Label>
    <asp:Label runat="server" Text="bbbb"></asp:Label>
    <asp:Label runat="server" Text="cccc"></asp:Label>
    <asp:TextBox runat="server" ID="txt1"></asp:TextBox>
    <asp:TextBox runat="server" ID="txt2"></asp:TextBox>
    <asp:ImageButton ID="ibtn1" runat="server"/>
    <asp:ImageButton ID="ibtn2" runat="server"/>
</asp:panel> 
```

现在我想禁用所有控件，但启用 ibtn1 和 ibtn2

```
Protected Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load
    panel1.Enabled = False
End Sub

Protected Sub Page_PreRender(sender As Object, e As System.EventArgs) Handles Me.PreRender
    ibtn1.Enabled = True
    ibtn2.Enabled = True
End Sub 
```

所有控件都被禁用，这很好，但不适用于 ibtn1 和 ibtn 2。

然后，我尝试了这种方法

```
Public Sub lDisableAllChildControls(ByRef p As WebControl)
    For Each c As System.Web.UI.WebControls.WebControl In p.Controls
        c.Enabled = False
        'recurse
        lDisableAllChildControls(c)
    Next
End Sub 
```

但它给了我这个错误：

> 无法将“System.Web.UI.LiteralControl”类型的对象转换为“System.Web.UI.WebControls.WebControl”类型

有没有人有任何想法来完成这项工作？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:08:18.147

你用 Control 替换，因为你的标签是乱写的

```
 For Each c As System.Web.UI.Control.Control In p.Controls

 Next 
```

# python - 从函数调用中获取值并在python的函数中使用它们

> ID：12139874
> 
> 赞同：1
> 
> 时间：2012-08-27T10:02:10.193
> 
> 标签：python

```
def fun(EACH) : 
   list1 = []
   EACH = str(EACH)
    for all in a:  # contains names of different checks     
        for files in b :
              for line in open(str(files)) : 
                 if EACH in line :
                           print files
                           break 
```

这`a`是一个包含许多文件的目录。我将这些文件存储在 list 中`b`。我想提取名称在`EACH`

例如，我想在其内容中打开作为字符串“apple”的文件。这个苹果词是通过参数传递的。

问题是我不明白如何读取该值并在`if`条件中使用相同的字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:07:05.893

您可以使用以下代码：

```
def grepFileForLines( self, fileName = "", keepLinesWith = "" ):
    file = open( fileName, 'r' )
    matches = []

    for line in file:
        if line.find( keepLinesWith ) > -1:
            matches.append( line )
    return matches 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T11:10:15.003

您真的必须逐行解析每个文件吗？你不能做类似的事情：

```
for b in a:
    for fname in b:
        with open(fname, "r") as f:
            content = f.read()
        if EACH in content:
            print "There's a {0} in {1}".format(EACH, fname) 
```

（这`with open(...) as ...`是为了确保您的文件在您阅读后关闭......）

# django - 表 lebron_entry 没有名为 slug 的列

> ID：12139880
> 
> 赞同：0
> 
> 时间：2012-08-27T10:02:44.290
> 
> 标签：django, django-models

我是 django 的新手。我一直在关注 Practical Django Projects 这本书来学习它。正如书中提到的，我正在创建一个博客。我已经按照编写入口模型的所有步骤进行了操作。当尝试从管理界面添加条目时出现错误

```
 DatabaseError at /adminlebron/entry/add/
  table lebron_entry has no column named slug 
```

经过一番搜索后，我发现我在完全创建模型之前运行了 syncdb，并且从 django 文档中我发现 Syncdb 不会更改现有表。之后我找到了 South（[http://south.aeracode.org/](http://south.aeracode.org/)）并尝试使用它，但我仍然遇到同样的错误。

这是我的入门模型

```
class Entry(models.Model):
    STATUS_CHOICES = (
    (1,'Live'),
    (2,'Draft'),
    )
    title = models.CharField(max_length=250)
        excerpt = models.TextField(blank=True)
    body = models.TextField()
    pub_date = models.DateTimeField(default=datetime.datetime.now)
    slug = models.SlugField(help_text="Slug")
    author = models.ForeignKey(User)
    enable_comments = models.BooleanField(default=True)
    featured = models.BooleanField(default=False)
    status = models.IntegerField(choices=STATUS_CHOICES,default=1)
    categories = models.ManyToManyField(Category)
    tags = TagField()
    excerpt_html = models.TextField(editable=False,blank=True)
    body_html = models.TextField(editable=False,blank=True)

    def save(self):
        self.body_html = markdown(self.body)
        if self.excerpt:
            self.excerpt_html = markdown(self.excerpt)
        super(Entry,self).save()

    class Meta:
        verbose_name_plural = "Entries"
            ordering = ['-pub_date']

    class Admin:
        pass

    def __unicode__(self):
        return self.title

    def get_absolute_url(self):
        return "/weblog/%s/%s/" %     (self.pub_date.strftime("%Y/%b/%d").lower(),self.slug) 
```

这是 sqlall 的输出

```
BEGIN;
CREATE TABLE "lebron_category" (
    "id" integer NOT NULL PRIMARY KEY,
    "title" varchar(250) NOT NULL,
    "slug" varchar(50) NOT NULL UNIQUE,
    "description" text NOT NULL
)
;
CREATE TABLE "lebron_entry_categories" (
    "id" integer NOT NULL PRIMARY KEY,
    "entry_id" integer NOT NULL,
    "category_id" integer NOT NULL REFERENCES "lebron_category" ("id")
    UNIQUE ("entry_id", "category_id")
)
;
CREATE TABLE "lebron_entry" (
    "id" integer NOT NULL PRIMARY KEY,
    "title" varchar(250) NOT NULL,
    "excerpt" text NOT NULL,
    "body" text NOT NULL,
    "pub_date" datetime NOT NULL,
    "slug" varchar(50) NOT NULL,
    "author_id" integer NOT NULL REFERENCES "auth_user" ("id"),
    "enable_comments" bool NOT NULL,
    "featured" bool NOT NULL,
    "status" integer NOT NULL,
    "tags" varchar(255) NOT NULL,
    "excerpt_html" text NOT NULL,
    "body_html" text NOT NULL
)
;
CREATE INDEX "lebron_entry_56ae2a2a" ON "lebron_entry" ("slug");
CREATE INDEX "lebron_entry_337b96ff" ON "lebron_entry" ("author_id");
COMMIT; 
```

看来柱塞毕竟在表中。我不想重新创建数据库有没有其他方法可以纠正这个问题？我的应用程序的名称是勒布朗

# python - 关于形式和视图的问题

> ID：12139885
> 
> 赞同：0
> 
> 时间：2012-08-27T10:02:50.437
> 
> 标签：python, django, django-models, django-forms, django-views

> **可能重复：**
> [关于 D​​jango 中的字段类型的问题](https://stackoverflow.com/questions/12137839/issues-regarding-field-types-in-django)

我正在 Django 中制作用户注册表单，但密码字段以原始格式显示密码，我希望它以点格式显示。编码尚未完成，但足以完成我想要的工作。所以请解决我的问题。

model.py 的代码是

```
from django.db import models

import datetime
from django.utils import timezone

    class Registration(models.Model):
        first_name=models.CharField(max_length=50)
        last_name=models.CharField(max_length=50)
        user_name=models.CharField(max_length=50)
        password=models.CharField(max_length=50)
        retype_password=models.CharField(max_length=50)
        date_of_reg=models.DateTimeField('date published')

        def __unicode__(self):
                return self.first_name
        def __unicode__(self):
                return self.user_name   
        def was_published_recently(self):
                return self.pub_date >= timezone.now() - datetime.timedelta(days=1) 
```

form.py 的代码是

```
from django import forms
from django.core import validators
from models import Registration

    class RegistrationForm(forms.Maniupulator):
        def_init_(self):
           self.fields=(
              forms.PasswordField(field_name='password',
                                    is_required=True),
                  forms.PasswordField(field_name='retype_password',                              
                    is_required=True,
                                    validator_list=[validators.AlwaysMatchesOtherField('password',
                                                                                    'Passwords must match.')]),
            ) 
```

和 view.py 是

```
from demo.registration.forms import Registration
from demo.registration.forms import RegistrationForm 
```

# sql-server-2008 - MS Access 2010 运行时错误“2467”

> ID：12139886
> 
> 赞同：1
> 
> 时间：2012-08-27T10:02:54.950
> 
> 标签：sql-server-2008, ms-access, runtime-error

我有一个 MS Access 2010 应用程序，它在后端链接到 MS SQL 2008。

当我运行应用程序时，我遇到了运行时错误“2467” - 您输入的表达式引用了一个已关闭或不存在的对象。

当我选择调试时，该行指向：

Forms!FRM_MAIN_HOME!FRM_SUB_EDIT.Form.RecordSource =

我已经在 SSMS 中运行了查询并且工作正常。

我一直在寻找缺少的参考资料，但没有。

当我使用 Shift 运行应用程序来呈现表单时，我得到一个不同的错误：条件表达式中的数据类型不匹配。这次我没有调试选项，但我怀疑这是真正的问题。

还有一件事：当我在不同的数据库上运行这个应用程序时，它加载时没有错误。

任何帮助深表感谢。

谢谢。

* * *

```
Forms!FRM_MAIN_HOME!FRM_SUB_EDIT.Form.RecordSource = _
   "SELECT V.VendorNumber, V.VendorName, T.DocumentNumber, " _
   & "T.DocumentDate, T.AmountInc, T.GSTClaim, T.GSTBatch " _
   & "FROM TBL_VENDOR_MASTER AS V INNER JOIN TBL_GST_01_TRANSACTIONS AS T " _ 
   & "ON V.AAVendorID = T.AAVendorID WHERE T.GSTBatch =" _
   & Me.BATCH_NUM & " ORDER BY V.VendorName" 
```

当我在 SSMS 中运行此代码时，它工作得很好。此外，当我选择不同的数据库时，它可以正常工作而不会出现任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:03:31.107

我准备打赌你在错误的事件中运行这个。您不能使用 Open 事件来引用窗体上的控件。我不确定您为什么要动态设置子表单记录源。

记录源应该是：

```
SELECT V.VendorNumber, 
       V.VendorName,
       T.DocumentNumber,
       T.DocumentDate, 
       T.AmountInc,
       T.GSTClaim,
       T.GSTBatch 
FROM TBL_VENDOR_MASTER AS V 
INNER JOIN TBL_GST_01_TRANSACTIONS AS T 
ON V.AAVendorID = T.AAVendorID 
ORDER BY V.VendorName 
```

您应该像这样设置链接字段：

```
Link child field : GSTBatch
Link master field : BATCH_NUM 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:18:03.253

这个问题似乎与一些内存问题有关，因为表很大（而且我的机器不是最快的......），但是在 MS Access 运行时出现的错误消息（每次我点击一个字段，一个选项卡或其他任何东西，我会得到同样的错误，只是没有调试选项），与我拥有的一个表有关，MS Access 不喜欢我在那里的一个字段。

为了解决这个错误，我加载了一个较旧的备份，并开始更新一些列并测试 MS Access，直到我发现问题。另外，我添加了一些索引，并在注册表中将 ODBC 的默认超时更改为 0（无限制）。

这似乎解决了这个问题。

# php - 无法更改 php.ini

> ID：12139893
> 
> 赞同：-1
> 
> 时间：2012-08-27T10:03:15.417
> 
> 标签：php, ini

所以我已经安装了 Apache`c:/apache`和 php`c:/php` 我已经测试了所有的 php 作品`<?php phpinfo(); ?>` 但是我需要两件事`change = short_open_tags`来查看错误。我正在努力改变`c:/php/php.ini`

```
; short_open_tag
;   Default Value: On
;   Development Value: On
;   Production Value: On 
```

到

```
; short_open_tag=1
;   Default Value: On
;   Development Value: On
;   Production Value: On 
```

完成此操作后，我重新启动服务...

`short_tags`不工作......我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T10:07:50.583

`short_open_tag`不存在，不要编辑那行，这只是描述。

在该文件中搜索它。

它应该是

```
short_open_tag = Off 
```

或者

```
short_open_tag = On 
```

# c++ - C++ 构造函数代码...这叫什么？

> ID：12139894
> 
> 赞同：1
> 
> 时间：2012-08-27T10:03:19.717
> 
> 标签：c++, constructor

这是我在程序代码中发现的：

```
pff::NAS::NAS( const NAS& p_Other ) 
: pff::MCCI(_T("NAS"))           //<- ?
, m_strS(_T("JustAString"))      //<- ?
, m_strK(_T("JustAString"))      //<- ?
, m_strR(p_Other.GetmystrR())    //<- ?
, m_Swap()
{ } 
```

**我的问题是：** 那些（`//<- ?`）标记的线叫什么？我很想搜索它应该做什么以及为什么编写此代码的人使用它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T10:05:21.843

它被称为初始化列表。

更多信息在优秀的常见问题解答[http://www.parashift.com/c++-faq/init-lists.html](http://www.parashift.com/c++-faq/init-lists.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T10:05:34.627

这称为**初始化列表**。它用于初始化类/结构成员变量的值。[你可以在这篇](http://www.cprogramming.com/tutorial/initialization-lists-c++.html)不错的文章中看到更多关于这个的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T10:09:00.387

这些行正在初始化该对象的变量

IE

```
pff::MCCI  (inherited)
m_strS 
m_str 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T10:10:54.183

这些用于在类中初始化您的字段。这是这样做的：

```
class MyClass{
private:
    int my_int;
public:
    MyClass(int a):my_int(a){} 
```

my_int 字段现在包含 a 的值。您所做的是调用要初始化的字段的构造函数。

# java - 解决 java.lang.NoSuchMethodError: org.hibernate.criterion.CriteriaQuery.getFactory()

> ID：12139895
> 
> 赞同：0
> 
> 时间：2012-08-27T10:03:29.403
> 
> 标签：java, spring, hibernate

我有以下休眠查询：

```
 @SuppressWarnings("unchecked")
    @Override
    public List<Admin> getAffectedAdmins(String wktFilter) {
        WKTReader fromText = new WKTReader();
        Geometry filter = null;

        try {
            filter = fromText.read(wktFilter);
            System.out.println("Filter = " + filter);
        } catch (ParseException e) {
            e.printStackTrace();
        }

        hibernateTemplate = new HibernateTemplate(sessionFactory);
        List<Admin> admins = new ArrayList<Admin>();
        admins =  (List<Admin>) hibernateTemplate.findByCriteria(
                DetachedCriteria.forClass(Admin.class)
                .add(SpatialRestrictions.intersects("geom", filter)));

        return admins;
    } 
```

当我执行上述方法时，抛出以下异常：

`java.lang.NoSuchMethodError: org.hibernate.criterion.CriteriaQuery.getFactory()Lorg/hibernate/engine/spi/SessionFactoryImplementor;`

我的 spring 配置文件中的相关部分如下所示：

```
 <bean id="propertyConfigurer"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
        p:location="/WEB-INF/jdbc.properties" />

    <bean id="dataSource"
        class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close"
        p:driverClassName="${jdbc.driverClassName}"
        p:url="${jdbc.databaseurl}" p:username="${jdbc.username}"
        p:password="${jdbc.password}" />

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="configLocation">
            <value>classpath:hibernate.cfg.xml</value>
        </property>
        <property name="configurationClass">
            <value>org.hibernate.cfg.AnnotationConfiguration</value>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">${jdbc.dialect}</prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>
    </bean>

    <bean id="transactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean> 
```

我的环境：Hibernate-3.6.10.FINAL、Spring 3.1.2.RELEASE、Hibernate Spatial 4.x、PostGIS JDBC 1.5.2 和 PostgreSQL 8.4-702.jdbc3。

任何关于我可能做错了什么的想法都将受到高度赞赏。

**更新**：这适用于简单的查询；不涉及空间数据的查询。所以，我猜它的空间组件有问题。

更新：pom.xml，我已经在我的 POM 文件中包含了相关部分。

```
<properties>
        <spring.version>3.1.2.RELEASE</spring.version>
    </properties>

    <dependencies>
        <dependency>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.5.1</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>3.6.10.Final</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-spatial</artifactId>
            <version>4.0-M1</version>
        </dependency>

        <dependency>
            <groupId>org.postgis</groupId>
            <artifactId>postgis-jdbc</artifactId>
            <version>${hibernate-spatial.version}</version>
            <exclusions>
                <exclusion>
                    <artifactId>postgis-jdbc</artifactId>
                    <groupId>org.postgis</groupId>
                </exclusion>
            </exclusions> 
        </dependency>

        <dependency>
            <groupId>org.postgis</groupId>
            <artifactId>postgis-jdbc</artifactId>
            <version>1.5.2</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>3.6.10.Final</version>
        </dependency>

        <dependency>
            <groupId>postgresql</groupId>
            <artifactId>postgresql</artifactId>
            <version>8.4-702.jdbc3</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>1.6.6</version>
        </dependency>

        <dependency>
          <groupId>junit</groupId>
          <artifactId>junit</artifactId>
          <version>3.8.1</version>
          <scope>test</scope>
        </dependency> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:48:35.513

> 我的环境：Hibernate-3.6.10.FINAL、Hibernate Spatial 4.x

但是[http://www.hibernatespatial.org/](http://www.hibernatespatial.org/)：

> 与休眠 ORM 的兼容性

```
Hibernate Spatial version 1.0 is compatible with Hibernate 3.2.x - 3.5.x
Hibernate Spatial version 1.1.x is compatible with Hibernate 3.6.x
Hibernate Spatial version 4.0 is compatible with Hibernate 4.x 
```

# iphone - 存档可能已损坏或无法读取

> ID：12139898
> 
> 赞同：1
> 
> 时间：2012-08-27T10:03:50.580
> 
> 标签：iphone, xcode

![在此处输入图像描述](../Images/2099025eb28f536493bb637672988154.png)![在此处输入图像描述](../Images/0323957f83c0fd6e2891a7e7d9680c40.png)我试图创建一个档案来上传应用程序商店的应用程序。但是，当我要通过在代码签名身份（在项目和目标中）中选择正确的配置（应用商店的分发）沿着相同的捆绑 ID 创建存档时，首先存档不会显示在管理器中，尽管 xcode 说它成功了. 其次，当我转到文件夹/library/developer/xcode/archives 时，它确实包含.xarchive。双击时，它说“存档可能已损坏或无法读取”。如何摆脱这个问题..请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-02-08T06:10:08.387

我也为此苦苦挣扎了一段时间，我发现将 cocoapods 从 1.10.0 版本降级到 1.9.3 修复了上述损坏的存档问题。我使用的命令：

```
gem install cocoapods -v '<= 1.9.3' -n /usr/local/bin 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:34:34.160

试试这个，从**Xcode**中的产品树中获取构建并创建一个名为“ **Payload** ”的新文件夹，并将该构建保留在其中并压缩并将扩展名重命名为“ **.ipa** ”。这将要求 ipa，然后使用 ipa 。尝试这个

# html - html 标题的最大长度

> ID：12139904
> 
> 赞同：3
> 
> 时间：2012-08-27T10:04:18.473
> 
> 标签：html

有谁知道我可以为 html 标题属性输入的最大长度是多少以及是否允许使用特殊字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:19:14.923

根据当前的 HTML 4 和 5 规范，标题长度没有限制；[但 IE 浏览器对HTML 4.01](http://msdn.microsoft.com/en-au/library/ie/ms534683%28v=vs.85%29.aspx)有 512 个字符的限制。

其他浏览器有长标题的问题（你必须每次都自己测试）。您也可以在标题中使用几乎任何东西，包括字母、数字、特殊字符（符号）等。但避免使用 Unicode。

Unicode 标题会带来一些麻烦。请参阅此 Stack Overflow 帖子[Unicode HTML 标题在 IE、Chrome 中显示为框](https://stackoverflow.com/questions/8189801/unicode-html-titles-displaying-as-boxes-in-ie-chrome)。

来自@Jukka K. Korpela 的评论：

> 避免除最常见字符之外的任何内容的原因是，在鼠标悬停时，标题属性值由通常使用特定字体的浏览器例程呈现，字符库有限。没有正式的禁令，只有糟糕的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:21:49.247

为什么标题很长？简短而简洁的诀窍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T10:09:35.260

实际上，长度没有限制。但是，除了某些字符之外，您的浏览器不会显示整个标题。允许使用特殊字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T10:10:44.277

规格没有限制。

但是当你超过 64 个字符时，浏览器会以不同的方式处理它

Internet Explorer 将文本分成两行或多行

而其他浏览器则没有。

# android - 在android中的mysql中插入选定的微调器

> ID：12139907
> 
> 赞同：0
> 
> 时间：2012-08-27T10:04:21.113
> 
> 标签：android, web-services, selecteditem, android-spinner, android-ksoap2

嗨，我使用了以下代码。

```
public class InsertionExample extends Activity {
private final String NAMESPACE = "http://xcart.com";
private final String URL = "http://192.168.1.168:8085/XcartLogin/services/Insertion?wsdl";
private final String SOAP_ACTION = "http://xcart.com/insertData";
private final String METHOD_NAME = "insertData";

private String selectedCountry = null;
private String selectedAnimal = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    //get reference to the spinner from the XML layout
    Spinner spinner = (Spinner) findViewById(R.id.spnMusketeers);

    //attach the listener to the spinner
    spinner.setOnItemSelectedListener(new MyOnItemSelectedListener());

    //Dynamically generate a spinner data 
    createSpinnerDropDown();

}

//Add animals into spinner dynamically
private void createSpinnerDropDown() {

    //get reference to the spinner from the XML layout
    Spinner spinner = (Spinner) findViewById(R.id.spinner1);

    //Array list of animals to display in the spinner
    List<String> list = new ArrayList<String>();
    list.add("Q");
    list.add("P");
    list.add("F");
    list.add("I");
    list.add("C");

    //create an ArrayAdaptar from the String Array
    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, list);
    //set the view for the Drop down list
    dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    //set the ArrayAdapter to the spinner
    spinner.setAdapter(dataAdapter);
    //attach the listener to the spinner
    spinner.setOnItemSelectedListener(new MyOnItemSelectedListener());

}

public class MyOnItemSelectedListener implements OnItemSelectedListener {

    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {

        String selectedItem = parent.getItemAtPosition(pos).toString();

        //check which spinner triggered the listener

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        PropertyInfo unameProp =new PropertyInfo();
        unameProp.setName("userName");//Define the variable name in the web service method
       unameProp.setValue(selectedItem);//Define value for fname variable
        unameProp.setType(String.class);//Define the type of the variable
        request.addProperty(unameProp);

          SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
          envelope.setOutputSoapObject(request);
          HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

          try{
           androidHttpTransport.call(SOAP_ACTION, envelope);
              SoapPrimitive response = (SoapPrimitive)envelope.getResponse();

             TextView result = (TextView) findViewById(R.id.textView2);
              result.setText(response.toString());

       }
       catch(Exception e){

       } 

        }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }

    }

    public void onNothingSelected(AdapterView<?> parent) {
        // Do nothing.
    }
    } 
```

在这里我列出了状态。所以在这里使用下面的代码。

```
 List<String> list = new ArrayList<String>();
    list.add("Q");
    list.add("P");
    list.add("F");
    list.add("I");
    list.add("C"); 
```

在这里我运行应用程序意味着首先在我的数据库中始终显示 Q...在我的数据库中仅插入我选择的值之后。在这里，如果我必须更改上面的代码链接，这意味着 `List<String> list = new ArrayList<String>(); list.add("p"); list.add("Q");`。之后我必须运行应用程序意味着首先在我的数据库上显示 P ......在我的数据库中只插入我选择的值之后。请帮助我..为什么首先显示我的第一个列表总是在我的数据库中......请为此提供解决方案。

如果我必须运行 android 应用程序意味着我得到 apache 控制台输出的时间是：

```
 [ERROR] 2
   java.lang.ArrayIndexOutOfBoundsException: 2
at org.apache.axis2.databinding.utils.BeanUtil.deserialize(BeanUtil.java:639)
at org.apache.axis2.rpc.receivers.RPCUtil.processRequest(RPCUtil.java:153)
at org.apache.axis2.rpc.receivers.RPCUtil.invokeServiceClass(RPCUtil.java:206)
at org.apache.axis2.rpc.receivers.RPCMessageReceiver.invokeBusinessLogic(RPCMessageReceiver.java:117)
at org.apache.axis2.receivers.AbstractInOutMessageReceiver.invokeBusinessLogic(AbstractInOutMessageReceiver.java:40)
at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:110)
at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:146)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680) 
```

这是我的网络服务代码：

```
 public class Insertion {

    public String insertData(String userName,String userPassword){

   try{

    Class.forName("com.mysql.jdbc.Driver");
    Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/xcart-432pro","root","");
     PreparedStatement statement =  con.prepareStatement("INSERT INTO xcart_orders(status) VALUES ('"+userName+"');");
     int result = statement.executeUpdate();
     }

     catch(Exception exc){
     System.out.println(exc.getMessage());
     }

    return "Insertion successfull!!";
     }

     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:16:01.023

我在 onitemselected 方法中调用我的肥皂，这就是为什么如果我制作按钮并添加肥皂它没有获得当前值//它应该选择当前值...我可以在按钮操作中添加 SOAPln 以查看微调器选择了什么现在我得到了输出。

# c# - 如何在 C# 中将 HTML 转换为 Javascript 转义

> ID：12139910
> 
> 赞同：1
> 
> 时间：2012-08-27T10:04:24.653
> 
> 标签：c#, html, unicode

我已将印地语字体转换为 HTML 代码。现在我想要的是将此 HTML 代码转换为 unicode 转义...

印地语：

```
श्रीगंगानगर। हनुमानगढ़ मार्ग पर लालगढ़ जाटान छावनी के नजदीक शनिवार सुबह सड़क से पन्द्रह-... 
```

对应的HTML：

`&#2358;&#2381;&#2352;&#2368;&#2327;&#2306;&#2327;&#2366;&#2344;&#2327;&#2352;&#2404; &#2361;&#2344;&#2369;&#2350;&#2366;&#2344;&#2327;&#2338;&#2364; &#2350;&#2366;&#2352;&#2381;&#2327; &#2346;&#2352; &#2354;&#2366;&#2354;&#2327;&#2338;&#2364; &#2332;&#2366;&#2335;&#2366;&#2344; &#2331;&#2366;&#2357;&#2344;&#2368; &#2325;&#2375; &#2344;&#2332;&#2342;&#2368;&#2325; &#2358;&#2344;&#2367;&#2357;&#2366;&#2352; &#2360;&#2369;&#2348;&#2361; &#2360;&#2337;&#2364;&#2325; &#2360;&#2375; &#2346;&#2344;&#2381;&#2342;&#2381;&#2352;&#2361;-...`

现在我想将此 HTML 代码转换为 unicode 转义，例如：

> \u0936\u094D\u0930\u0940\u0917\u0902\u0917\u093E\u0928\u0917\u0930\u0964 \u0939\u0928\u0941\u092E\u093E\u0928\u0917\u0922\u093C \u092E\u093E\u0930\u094D \u0917 \u092A\u0930

就像在[这个网站上](http://www.rishida.net/tools/conversion/)一样。但我希望通过 C# 代码进行这种转换，而不是在 Javascript 中......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:20:42.703

```
StringBuilder sb = new StringBuilder(hindiString.Length * 6);
foreach(char c in hindiString)
  sb.Append(@"\u").Append(((int)c).ToString("X4"));
return sb.ToString() 
```

~~我假设你不需要担心 BMP 之外的任何事情。如果是这样，您想首先将 UTF-16 高代理和低代理合并在一起。~~ 编辑：最后一句，js在内部使用与C#相同的UTF-16，所以上面的内容在BMP之外也可以正常工作。

但是，对应的 HTML 到 श्रीगंगानगर। IS：：：：

```
<p>श्रीगंगानगर। हनुमानगढ़ मार्ग पर लालगढ़ जाटान छावनी के नजदीक शनिवार सुबह सड़क से पन्द्रह&lt;/p> 
```

对应的javascript是：

```
"श्रीगंगानगर। हनुमानगढ़ मार्ग पर लालगढ़ जाटान छावनी के नजदीक शनिवार सुबह सड़क से पन्द्रह" 
```

或者：

```
'श्रीगंगानगर। हनुमानगढ़ मार्ग पर लालगढ़ जाटान छावनी के नजदीक शनिवार सुबह सड़क से पन्द्रह' 
```

为什么不直接使用它们？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:39:56.650

我看到您直接从原始文本中得到了多个答案，这是一种按照您的要求从 HTML 转义中实现的方法；

```
string input = "&#2358;&#2381;&#2352;&#2368;&#2327;&#2306;&#2327;..."

var output = Regex.Replace(input, @"&#([0-9]*);", 
               x => String.Format("\\u{0:X4}", int.Parse(x.Groups[1].Value))); 
```

或交替；

```
var output = String.Join("", WebUtility.HtmlDecode(input)
                   .Select(x => "\\u" + ((int)x).ToString("X4"))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T10:25:13.543

```
StringBuilder sb = new StringBuilder();
foreach(char c in hindi)
{
    sb.Append(@"\u").Append(((int)c).ToString("X4"));
}
return sb.ToString() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T10:13:57.937

你可以

*   使用正则表达式捕获每个 Unicode 字符`&#([0-9]+);`
*   将捕获的部分转换为整数
*   取字符串中整数的十六进制表示
*   `\u`在开头添加并`0`从左开始填充字符串以使其成为 4 个字符的字符串

# batch-file - 批处理文件中的多个 IF

> ID：12139916
> 
> 赞同：0
> 
> 时间：2012-08-27T10:04:38.020
> 
> 标签：batch-file

最近我一直在制作这个批处理文件，它让我发疯。

我的文件夹结构类似于 C:\MainFolder\Dir\ 并且“Dir”包含许多子文件夹和文件。在这些子文件夹中有许多文件和子文件夹，包括 2 个文件“C.txt”和“D.txt”我的任务是删除这些子文件夹中的所有其他内容，只保留这 2 个文件。但它不起作用。请帮忙。

我的代码是：

```
@echo off
FOR /f "tokens=*" %%M in ('dir /b "C:\MainFolder\Dir\"') DO (
For /f "tokens=*" %%S in ('dir /b "C:\MainFolder\Dir\%%M"') DO ( 
if "%%S"=="C.txt" ( 
echo Found C
) 
else if "%%S"=="D.txt" ( 
echo Found D
) 
else (
::Code to delete the file Or Directory
echo Deleted %%S
)

)
)
echo Deleted Unwanted Content
pause 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:46:14.010

这里有多个问题：

必须与出现`else`在同一行`(`：

```
if "%%S"=="C.txt" ( 
  echo Found C
) else if "%%S"=="D.txt" ( 
  echo Found D
) else (
  ::Code to delete the file Or Directory
  echo Deleted %%S
) 
```

不要`::`用于评论，它会在某些地方中断。改用`rem`：

```
) else (
  REM Code to delete the file Or Directory
  echo Deleted %%S
) 
```

请缩进你的代码。它使阅读变得更加愉快：

```
@echo off
FOR /f "tokens=*" %%M in ('dir /b "C:\MainFolder\Dir\"') DO (
  For /f "tokens=*" %%S in ('dir /b "C:\MainFolder\Dir\%%M"') DO ( 
    if "%%S"=="C.txt" ( 
      echo Found C
    ) else if "%%S"=="D.txt" ( 
      echo Found D
    ) else (
      REM Code to delete the file Or Directory
      echo Deleted %%S
    )
  )
)
echo Deleted Unwanted Content
pause 
```

# javascript - Jquery 图像循环问题

> ID：12139917
> 
> 赞同：4
> 
> 时间：2012-08-27T10:04:42.127
> 
> 标签：javascript, jquery, html, css, web

我正在为一个家庭朋友开发一个网站。他们希望在其上将所有同事的徽标放在一行中，然后巧妙地褪色以替换为第一次不适合的其他徽标。

为了实现这一点，我分配了`<img>`'s 类，它们代表它们应该出现在哪个周期中，这取决于在给定当前宽度的情况下，这些图像中有多少可以适合该行。这发生在我的`assignCycleNumbers`函数中。

然后，为了真正让它们淡入淡出，我有另一个函数调用`cycleAssociates`，它递归地淡入和淡出适当的类。理论上很好，但是它似乎不能正常工作，这特别奇怪，因为[我在这里测试了这个功能](http://jsfiddle.net/BvLb4/14/)并且它工作正常。它们之间的唯一区别是现在我正在尝试动态分配循环编号。

我真的很难过，可以做一些帮助！

您可以看到[托管在此处的网站](http://c3it.webuda.com/)，如果您向下滚动到内容的底部，您将在底部看到徽标，其行为与预期不符。（第一个周期看起来不错，但随后的周期变得混乱，如果你调整到更小的屏幕宽度，更容易观察到）。

您可以通过浏览器彻底检查代码，但这里有您需要知道的一切，再次感谢您的任何见解。

**编辑**：[按要求提供整个 javascript 文件。](http://pastebin.com/nSxPJiXM)但是所有相关的东西都在下面：

**JS：**

```
//single global variable to represent how many logo cycles there is
var totalCycles = 0;

...

$(window).load(function() {

    ...
   totalCycles = assignCycleNumbers();
   cycleAssociates();

});

// window is resized 
$(function(){
    $(window).resize(function() {
        ...
        totalCycles = assignCycleNumbers();
    });
});

...

function cycleAssociates(){
    var cycle = 0;

    var recursiveCycling = function(cycle, totalCycles){
        var currentAssociate = ".cycle" + cycle;
        //fade in all img with the current cyle class over a second,
        //wait 3 seconds before fading out over a second.
        $(currentAssociate).delay(100).fadeIn(1000).delay(3000).fadeOut(1000,
            function(){
                cycle++;
                if(cycle > totalCycles){
                    cycle = 0;
                }
                recursiveCycling(cycle, totalCycles);
            });

    };
    recursiveCycling(cycle, totalCycles);

}

function assignCycleNumbers(){
    //first remove any old cycle# classes (resized window case)
    $('[class*="cycle"]').removeClass( function(unusedIdx,c){
        return c.match(/cycle\d+/g).join(" ");
    });

    //measure div width
    var divSpace = $("#bodies").innerWidth();
    //assign a cycle number to a number of logos until no more will fit in that div
    var cycleNum = 0;
    $(".associate").each(function(){

        if( divSpace - $(this).width() > 0){
            $(this).addClass("cycle" + cycleNum);
            divSpace = divSpace - $(this).width();
        }
        else{ //next logo won't fit current cycle, create next cycle
            cycleNum++
            $(this).addClass("cycle" + cycleNum);
            divSpace = $("#bodies").innerWidth() - $(this).width();
        }
    });
    return cycleNum;
} 
```

**html:**

```
 <img class="associate" src="IMG/spare.png" alt=""/>
                <img class="associate" src="IMG/bcs_professional.jpg" alt="BCS Professional Member"/>
                <img class="associate" src="IMG/climate_savers.jpg" alt="Climate Savers Smart Computing"/>
                <img class="associate" src="IMG/code_of_conduct.jpg" alt="Data Centres Code Of Conduct Endorser"/>
                <img class="associate" src="IMG/spare.gif" alt=""/>
                <img class="associate" src="IMG/enistic.gif" alt="Enistic"/>
                <img class="associate" src="IMG/greentrac_authorised.png" alt="Greentrac Authorised Reseller"/>
                <img class="associate" src="IMG/very_pc.jpg" alt="Very PC Approved"/>
                <img class="associate" src="IMG/spare.jpg" alt=""/> 
```

**CSS：**

```
#bodies img.associate{
            float: left;
            max-width: 120px;
            max-height: 80px;
            display:none;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T11:35:09.677

问题是`fadeOut`即使在当前循环中的所有元素都淡出之前，您的函数的回调也正在执行。这是按预期工作的函数的修改版本：

```
function cycleAssociates(){
    var cycle = 0;
    var recursiveCycling = function(cycle, totalCycles){
        var currentAssociate = ".cycle" + cycle;
        var n = $(currentAssociate).length; //How many images in current cycle?
        $(currentAssociate).each(function() {
            $(this).delay(100).fadeIn(1000).delay(3000).fadeOut(1000, function() {
                n --;
                if(n <= 0) { //current cycle done?
                    cycle++;
                    if(cycle > totalCycles){
                        cycle = 0;
                    }
                    recursiveCycling(cycle, totalCycles);
                }
            });    
        });    
    };
    recursiveCycling(cycle, totalCycles);
} 
```

要解决窗口调整大小时出现的问题，请尝试将当前`$(window).resize`处理程序替换为：

```
$(function(){
    $(window).resize(function() {
        parallelNavbar();
        $(".associate").stop(); //if there are any animations, stop 'em
        $(".associate").hide(); //hide all associates
        totalCycles = assignCycleNumbers(); //update the assignment
        cycleAssociates(); //let's get cyclin' again!
    });
}); 
```

尽管我认为您在滚动方面存在一些问题。不过，这应该可以解决主要的循环问题——所以我希望能有所帮助！

# c# - 在 VS 2012 中开发的项目，但我想用 VS 2008 打开请帮助我

> ID：12139919
> 
> 赞同：1
> 
> 时间：2012-08-27T10:04:59.073
> 
> 标签：c#, visual-studio-2010, visual-studio-2008

项目在 VS 2010 中开发，但我想用 VS 2008 打开解决方案，请帮帮我。它抛出警告消息为“**所选文件是解决方案文件，但由无法打开此应用程序的新闻版本创建**”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T11:45:39.790

在VS 2008 Step 1中使用VS 2010项目有两个步骤：

您需要复制您在 vs 2010 中添加的文件夹、cs 和 aspx 文件，除了解决方案和配置文件。

第2步：

您需要在 vs 2008 中创建一个新的空项目并将文件粘贴到解决方案中。

不要替换任何文件，命名空间中会出现一些错误，请在参考文件夹中添加 dll 以避免这些错误。

# django - 多对多字段的所有值：Django

> ID：12139923
> 
> 赞同：18
> 
> 时间：2012-08-27T10:05:15.107
> 
> 标签：django, django-models, django-queryset

我有两个模型：

```
class Author(models.Model);
    name = models.CharField(max_length=255)

class Book(models.Model):
    title = models.CharField(max_length=255)
    authors = models.ManyToManyField(Author, null=True, blank=True) 
```

现在，我想要所有书籍的信息。所以我做了：

```
book_info = Book.objects.all().values('title', 'authors__name') 
```

并且，它给出的输出如下（对于有 2 个作者的 1 本书）：

```
[{'title': u'book1', 'authors__name': u'author1'},{'title': u'book1', 'authors__name': u'author2'}] 
```

我想要的是这样的：

```
[{'title': u'book1', 'authors': [{'name':u'author1'},{'name':u'author2'}]}] 
```

我可能在作者模型中有更多字段，所以也想获得这些字段。

我可以在单个查询中执行此操作吗？

我该怎么做才能得到想要的结果？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-27T10:58:57.010

## 姜戈 1.4

好问题，使用[prefetch_related](https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related)：

```
In [3]: [{'name': b.name, 'authors': [a.name for a in b.authors.all()]} for b in Book.objects.prefetch_related('authors')]
(0.000) SELECT "test_app_book"."id", "test_app_book"."name" FROM "test_app_book"; args=()
(0.000) SELECT ("test_app_book_authors"."book_id") AS "_prefetch_related_val", "test_app_author"."id", "test_app_author"."name" FROM "test_app_author" INNER JOIN "test_app_book_authors" ON ("test_app_author"."id" = "test_app_book_authors"."author_id") WHERE "test_app_book_authors"."book_id" IN (1, 2); args=(1, 2)
Out[3]: 
[{'authors': [u'a', u'b'], 'name': u'book'},
 {'authors': [u'b'], 'name': u'test'}] 
```

## 姜戈 1.3

prefetch_related 是在 Django 1.4 中引入的。对于 Django 1.3，您需要[django-selectreverse](http://code.google.com/p/django-selectreverse)：

```
In [19]: [{'name': b.name, 'authors': [a.name for a in b.authors_prefetch]} for b in Book.objects.select_reverse({'authors_prefetch': 'authors'})]
(0.000) SELECT "test_app_book"."id", "test_app_book"."name" FROM "test_app_book"; args=()
(0.001) SELECT (test_app_book_authors.book_id) AS "main_id", "test_app_author"."id", "test_app_author"."name" FROM "test_app_author" INNER JOIN "test_app_book_authors" ON ("test_app_author"."id" = "test_app_book_authors"."author_id") WHERE "test_app_book_authors"."book_id" IN (1, 2); args=(1, 2)
Out[19]: 
[{'authors': [u'a', u'b'], 'name': u'book'},
 {'authors': [u'b'], 'name': u'test'}] 
```

使用[django-selectreverse](http://code.google.com/p/django-selectreverse)：

```
class Book(models.Model):
    name = models.CharField(max_length=100)
    authors = models.ManyToManyField(Author, null=True, blank=True)

    objects = ReverseManager() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-01T15:43:17.370

为避免像@jpic 的描述性答案中那样进行两个查询，您可以在之后手动合并结果。对我来说感觉有点hacky，但它有效。

```
def merge_values(values):
    grouped_results = itertools.groupby(values, key=lambda value: value['id'])
    merged_values = []
    for k, g in grouped_results:
        groups = list(g)
        merged_value = {}
        for group in groups:
            for key, val in group.iteritems():
                if not merged_value.get(key):
                    merged_value[key] = val
                elif val != merged_value[key]:
                    if isinstance(merged_value[key], list):
                        if val not in merged_value[key]:
                            merged_value[key].append(val)
                    else:
                        old_val = merged_value[key]
                        merged_value[key] = [old_val, val]
        merged_values.append(merged_value)
    return merged_values

book_info = marge_values(Book.objects.all().values('title', 'authors__name')) 
```

merge_values 函数取自[这个要点](https://gist.github.com/pamelafox-coursera/3707015)

# java - 上一页 URL JSF

> ID：12139932
> 
> 赞同：1
> 
> 时间：2012-08-27T10:05:44.503
> 
> 标签：java, jsf

我正在使用 JSF 应用程序，我看到浏览器导航栏中显示的 URL 始终是我刚刚离开的页面，而不是我所在的页面。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T10:06:59.147

这是因为您从服务器被转发（而不是重定向）到另一个页面，要重定向，您需要在返回时设置以下参数

```
?faces-redirect=true 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T11:59:40.033

如果您使用 POST 通过例如命令链接/命令按钮进行导航，就会发生这种情况。如果它是纯粹的页面到页面导航并且您实际上不需要向服务器提交任何内容，那么您的问题就更大了。您确实会得到这种令人讨厌的“副作用”，并且您的链接将不能被收藏，也不能被搜索机器人抓取。正如其他答案所建议的那样， PRG（[Post-Redirect-Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)）确实可以解决书签（“一个 URL 后面”）问题，但它肯定不会解决搜索机器人无法抓取/索引页面的问题。

只是不要首先使用 POST 进行简单的页面到页面导航。为此使用 GET。使用`<h:link>`代替`<h:commandLink>`等等。在代码中，全部替换

```
<h:form>
    <h:commandLink value="Next page" action="nextpage" />
</h:form> 
```

经过

```
<h:link value="Next page" outcome="nextpage" /> 
```

### 也可以看看：

*   [什么时候应该使用 h:outputLink 而不是 h:commandLink？](https://stackoverflow.com/questions/4317684/when-should-i-use-houtputlink-instead-of-hcommandlink)
*   [重定向和导航/转发之间有什么区别以及何时使用什么？](https://stackoverflow.com/questions/11277366/jsf-redirect-options/11277482#11277482)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T10:11:01.060

默认情况下，JSF 执行定向到原始页面 URL 的 POST 操作。如果使用 a `<navigation-rule>`，可以指定`<redirect/>`让浏览器执行附加请求，这样目标页面的 URL 就会出现在导航栏中。

# r - 有没有一种快速的方法在 data.table 中运行滚动回归？

> ID：12139934
> 
> 赞同：12
> 
> 时间：2012-08-27T10:06:06.267
> 
> 标签：r, data.table, zoo

我在 R 中运行滚动回归，使用存储在`data.table`.

我有一个工作版本，但*感觉*就像一个 hack——我真的在使用我从`zoo`包中知道的东西，并且没有任何魔法`data.table`......因此，它感觉比它应该的要慢。

结合 Joshua 的建议 - 下面 - 通过使用`lm.fit`而不是`lm`.

（修订）示例代码：

```
require(zoo)
require(data.table)
require(rbenchmark)
set.seed(1)

tt <- seq(as.Date("2011-01-01"), as.Date("2012-01-01"), by="day")
px <- rnorm(366, 95, 1)

DT <- data.table(period=tt, pvec=px)

dtt <- DT[,tnum:=as.numeric(period)][, list(pvec, tnum)]
dtx <- as.matrix(DT[,tnum:=as.numeric(period)][, tnum2:= tnum^2][, int:=1][, list(pvec, int, tnum, tnum2)])

rollreg <- function(dd) coef(lm(pvec ~ tnum + I(tnum^2), data=as.data.frame(dd)))
rollreg.fit <- function(dd) coef(lm.fit(y=dd[,1], x=dd[,-1]))

rr <- function(dd) rollapplyr(dd, width=20, FUN = rollreg, by.column=FALSE)
rr.fit <- function(dd) rollapplyr(dd, width=20, FUN = rollreg.fit, by.column=FALSE)

bmk <- benchmark(rr(dtt), rr.fit(dtx), 
         columns = c('test', 'elapsed', 'relative'),
         replications = 10,
         order = 'elapsed'
       )

     test elapsed relative
2 rr.fit(dtx)    0.48   1.0000
1     rr(dtt)    5.85  12.1875 
```

*尝试应用*[这里](https://stackoverflow.com/questions/12150472/using-data-table-to-speed-up-rollapply)和[这里](https://stackoverflow.com/questions/11676476/r-data-table-sliding-window)展示的知识，我制作了以下简单的滚动回归函数，*我认为*它使用了一些 data.table 操作的速度。

请注意，问题有点不同（而且更现实）：取一个向量，添加滞后，然后回归自身。这类 AR 类型的问题非常广泛。

我在这里分享它，因为它可能有用，我**确信**它可以改进（我会随着改进而更新）：

```
require(data.table)
set.seed(1)
x  <- rnorm(1000)
DT <- data.table(x)
DTin <- data.table(x)

lagDT <- function(DTin, varname, l=5)
{
    i = 0
    while ( i < l){
        expr <- parse(text = 
                  paste0(varname, '_L', (i+1), 
                     ':= c(rep(NA, (1+i)),', varname, '[-((length(',     varname, ') - i):length(', varname, '))])'
                 )
              )
    DTin[, eval(expr)]
    i <- i + 1
}
return(DTin)
}   

rollRegDT <- function(DTin, varname, k=20, l=5)
{
adj <- k + l - 1
.x <- 1:(nrow(DTin)-adj)
DTin[, int:=1]
dtReg <- function(dd) coef(lm.fit(y=dd[-c(1:l),1], x=dd[-c(1:l),-1]))
eleNum <- nrow(DTin)*(l+1)
outMatx <- matrix(rep(NA, eleNum), ncol = (l+1))
colnames(outMatx) <- c('intercept', 'L1', 'L2', 'L3', 'L4', 'L5')
for (i in .x){
    dt_m <- as.matrix(lagDT(DTin[i:(i+adj), ], varname, l))
    outMatx[(i+(adj)),] <- dtReg(dt_m)
}
return(outMatx)
}

rollCoef <- rollRegDT(DT, varname='x') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T10:51:31.723

据我所知，不是；`data.table`滚动窗口没有任何特殊功能。其他包已经在向量上实现了滚动功能，因此它们可以`j`在`data.table`. 如果它们不够高效，并且没有包有更快的版本（？），那么这是一个自己编写更快版本并（当然）贡献它们的情况：要么是现有的包，要么是创建你自己的包。

相关问题（按照链接中的链接）：

[使用data.table加速rollapply](https://stackoverflow.com/questions/12150472/using-data-table-to-speed-up-rollapply)
[R data.table滑动窗口](https://stackoverflow.com/questions/11676476/r-data-table-sliding-window)
[R中多列滚动回归](https://stackoverflow.com/questions/11873123/rolling-regression-over-multiple-columns-in-r)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-18T23:11:04.367

使用包中的`roll_regres`功能，您可以快 14585 / 766 ~ 19 倍`rollRegres`

```
require(zoo)
require(data.table)
require(microbenchmark)
set.seed(1)

tt <- seq(as.Date("2011-01-01"), as.Date("2012-01-01"), by="day")
px <- rnorm(366, 95, 1)

DT <- data.table(period=tt, pvec=px)

dtt <- DT[,tnum:=as.numeric(period)][, list(pvec, tnum)]

# this is a quite bad problem as tnum and the square has a high cor
cor(dtt$tnum, dtt$tnum^2)
#R [1] 0.9999951

# so we center it to avoid numerical issues in the comparisons
dtt$tnum <- dtt$tnum - mean(dtt$tnum)
cor(dtt$tnum, dtt$tnum^2)
#R [1] -2.355659e-21

dtx <- as.matrix(DT[,tnum:=as.numeric(period)][, tnum2:= tnum^2][, int:=1][, list(pvec, int, tnum, tnum2)])

rollreg <- function(dd)
  coef(lm(pvec ~ tnum + I(tnum^2), data = as.data.frame(dd)))
rollreg.fit <- function(dd) coef(lm.fit(y=dd[,1], x=dd[,-1]))

rr <- function(dd) rollapplyr(
  dd, width=20, FUN = rollreg, by.column = FALSE, align = "right")
rr.fit <- function(dd) rollapplyr(
  dd, width=20, FUN = rollreg.fit, by.column = FALSE, align = "right")

#####
# use rollRegres
library(rollRegres)
rollreg_out    <- rr(dtt)
rollRegres_out <- roll_regres(pvec ~ tnum + I(tnum^2), dtt, width = 20L)

# show that they give the same
all.equal(rollRegres_out$coefs[-(1:19), ], rollreg_out,
          check.attributes = FALSE)
#R [1] "Mean relative difference: 4.985435e-08"

#####
# benchmark
microbenchmark(
  rr = rr(dtt),
  rr.fit = rr.fit(dtx),
  roll_regres = roll_regres(pvec ~ tnum + I(tnum^2), dtt ,width = 20L),
  times = 5)
#R Unit: microseconds
#R expr        min         lq        mean     median         uq       max neval
#R          rr 279404.357 279456.901 282071.3414 279989.840 282201.396 289304.21     5
#R      rr.fit  13744.598  14017.981  14585.2106  14147.166  14887.117  16129.19     5
#R roll_regres    621.037    660.939    766.7364    721.383    843.853    986.47     5 
```

# mapreduce - CouchDB：按键分组数据

> ID：12139936
> 
> 赞同：2
> 
> 时间：2012-08-27T10:06:15.070
> 
> 标签：mapreduce, couchdb

我的数据库中有以下数据：

```
|  value1  |  value2  |
|----------+----------|
|     1    |    a     |
|     1    |    b     |
|     2    |    a     |
|     3    |    c     |
|     3    |    d     |
|----------+----------| 
```

我想要的输出是`{"key":1,"value":[a,b]},{"key":2,"value":[a]},{"key":3,"value":[c,d]}`

我写了这个地图功能（但不确定这是否正确）

```
function(doc) {
    emit(doc.value1,doc.value2);
} 
```

...但我错过了减少功能。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T08:36:39.463

不确定这是否可以/应该使用 reduce 函数来完成。

但是，您可以使用[lists](http://wiki.apache.org/couchdb/Formatting_with_Show_and_List#Listing_Views_with_CouchDB_0.10_and_later)重新格式化输出。尝试以下列表功能：

```
function (head, req) {
    var row,
        returnObj = {};
    while (row = getRow()) {
        if(returnObj[row.key]){
            returnObj[row.key].push(row.value);
        }else{
            returnObj[row.key] = [row.value];
        }
    }
    send(JSON.stringify(returnObj));
}; 
```

输出应如下所示：

```
{
  1: [
    "a",
    "b"
  ],
  2: [
    "a"
  ],
  3: [
    "c",
    "d"
  ]
} 
```

希望有帮助。

# apache-flex - Flex 中的严格容器边框

> ID：12139939
> 
> 赞同：0
> 
> 时间：2012-08-27T10:06:27.490
> 
> 标签：apache-flex, components, containers

我将一些组件放入 Group 容器中，但我可以将它们移到容器边界之外并查看它们。我怎么能在外面看不到组件？例如：100*100 的容器，放入简单的按钮并设置 (x,y) = (150, 150)。所以，按钮在容器中，但在外面看到。我想将容器的边框设置为真正的边框并隐藏外部组件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:17:11.177

您所要做的就是将 Group 的[clipAndEnableScrolling](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/supportClasses/GroupBase.html#clipAndEnableScrolling)属性设置为`true`（`false`默认情况下）。

```
<s:Group width="100" height="100" clipAndEnableScrolling="true">  
    <s:Image width="150" height="150" 
             source="@Embed(source='/gfx/myimage.jpg')"/> 
</s:Group> 
```

这里还有一些文档： [http ://help.adobe.com/en_US/flex/using/WS8DF44A60-B4B0-491f-A359-1B193DEB18D6.html](http://help.adobe.com/en_US/flex/using/WS8DF44A60-B4B0-491f-A359-1B193DEB18D6.html)

# html - 自定义 Struts Displaytag 表属性

> ID：12139942
> 
> 赞同：0
> 
> 时间：2012-08-27T10:06:35.463
> 
> 标签：html, struts2, displaytag

我知道如何使用 Struts2 displaytag:table 和 decorator 自定义显示数据。

但我需要自定义表格列（tr 样式）

```
public String getWorkFlow() {
    WorkOrderDO currentWorkOrder = (WorkOrderDO) getCurrentRowObject();
    String output = null;
    if (currentWorkOrder.getChildId() == 0) {
        if (!currentWorkOrder.isWorkFlowRetrieved()) {
            output = "<input type = 'submit' value = 'Work Flow' id=" + currentWorkOrder.getMoveWorkOrderId() + " onclick = 'changeWorkOrder(this);return false;'/>";
        } else {
            output = "<input type = 'submit' value = 'Work Flow' id=" + currentWorkOrder.getMoveWorkOrderId() + " onclick = 'changeWorkOrder(this);return false;' disabled/>";
        }
    }
    return output;
} 
```

通过装饰器类中的上述方法，我们可以自定义数据外观。

但我的问题是，如果`currentWorkOrder.isWorkFlowRetrieved() == true`我想用 style 属性突出显示页面中表格中的整个列（tr）

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:26:44.660

您可以通过在 display:column 标记中使用 style 属性来做到这一点

例如

我希望这对你有用。

# html - h3 文字不可见

> ID：12139948
> 
> 赞同：0
> 
> 时间：2012-08-27T10:07:12.483
> 
> 标签：html, css

我在 h3 标签中有一些文本，但文本不可见，我尝试更改 h3 标签的高度以及包含它的 div 的高度。我正在谈论的文字在此处的屏幕截图中可见 - [http://imagebin.org/226001](http://imagebin.org/226001) 网页在此处 - [http://bit.ly/PLDSCJ](http://bit.ly/PLDSCJ)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:11:02.743

这是因为父元素（`.detail`和`.details`）`.details_wrapper`都有固定的高度。H3 将放置在这些元素内，因此当它变大时，您将看不到它。

解决方法是改变父元素的高度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T10:11:37.367

尝试增加高度

```
<div class="details_wrapper"> 
```

像这样的东西......

```
.details_wrapper{
 height:400px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T10:18:55.673

我认为您页面上的一个容器 div 正在剪掉该部分。它很可能是具有 .details_wrapper 类的 div，其高度仅为 200px。正确对齐这些高度或将溢出设置为可见

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T10:15:24.267

你的包装不够高，特别是

```
<div class="wrapper clearfix">
<div class="carousel clearfix" style="position:absolute;">
<div class="panel">
<div class="details_wrapper"> 
```

此容器会切断您的文本。当您将高度更改为更多时，例如 400px；你的文字再次出现！它位于 CSS 的这一部分：

```
.carousel .panel .details_wrapper {
    height: 400px; /* changed this height */
    left: 25px;
    overflow: hidden;
    position: absolute;
    top: 20px;
    width: 175px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T10:16:50.437

增加 details_wrapper 中的高度

只需添加：

> 样式=“高度：400px”

问题就解决了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T11:02:08.333

使用白色以外的颜色。

```
<h3 class="Lexia-Bold" style="color:black; overflow: auto; width: 100px; height:500px;"> 
```

# javascript - 在 html 页面的 iframe 内显示警报框

> ID：12139953
> 
> 赞同：3
> 
> 时间：2012-08-27T10:07:24.273
> 
> 标签：javascript, html, dom

有一个简单的 HTML 页面，名为 abc.html。现在 abc.html 有一个名为 say 'click me' 的按钮。此页面 abc.html 也有一个 iframe，其 id 为“myframe”。

现在我想要的是，当单击“单击我”按钮时，应在名为“myframe”的 iframe 内出现一个警告框。我怎样才能做到这一点？

我试过以下..

```
window.frames[0].contentWindow.alert("this is the iframe"); 
```

但这似乎不起作用。请让我知道为什么这不起作用以及什么可能是替代解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:13:26.567

ContentWindow 派生自文档，而不是窗口。

您要做的是将警报添加到 iframe 页面上的函数中，然后使用`document.getElementById('targetFrame').contentWindow.targetFunction();`它来调用它（以 targetFunction 为例）。[这个答案](https://stackoverflow.com/questions/251420/invoking-javascript-in-iframe-from-parent-page)可能会为您提供有关技术的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T10:41:01.050

如果源`<iframe>`来自与父页面不同的域，则您将访问浏览器的[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，这意味着您根本无法对该页面执行任何操作。

对于“替代建议”，它确实取决于您要实现的目标以及用户应该体验的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T13:35:56.823

浏览器级别`alert`没有明显地绑定到特定框架。您将*始终*收到以浏览器窗口为中心的警报，而不是以调用它的窗口/框架为中心。

[JSFiddle 演示了这一点](http://jsfiddle.net/LP5By/)

如果您需要此功能，则必须使用自己的模态对话，或展示它们的库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T10:16:24.617

这可能对您有帮助：

```
function body_load()
{       
    document.getElementById('loader').src;
} 
```

```
<div id='mydiv'>
    <input type="button" value="Click Me" onclick="body_load();" />
</div>
<iframe id='loader' onload="body_load(this)" name="Google"  scrolling="auto" style="width:95%;height:600px" src="http://www.image.com"></iframe> 
```

**[http://jsbin.com/idazul/1/edit](http://jsbin.com/idazul/1/edit)**

# javascript - 如何恢复 Kinetic.js 鼠标事件

> ID：12139954
> 
> 赞同：1
> 
> 时间：2012-08-27T10:07:25.083
> 
> 标签：javascript, canvas, mouseevent, restore, kineticjs

如何恢复 Kinetic.js 事件？我编写了一个 Kinetic.js “形状按钮”，它监听 mouseover 和 mouseout 事件。当我点击它时，它会改变颜色并且不再听鼠标悬停/退出。当我第二次单击它时，我希望它再次听到 mouseover 和 mouseout。我试图删除一个单击事件并在两个事件中恢复另一个事件，但是我无法恢复一个事件，因为 `circle.on("eventname")` 我必须定义一个函数， `circle.on("eventname", function(){//do stuff here});` 但它会以定义函数的连续循环结束

谢谢你的回答！

这是我的代码：

```
<head>
        <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.0.0.js">    </script>
        <script>

            var layer = new Kinetic.Layer();
            var sfcolor = '#00ff00'         
            var nfcolor = '#0000ff'         
            var cfcolor = '#ff0000'         
            var smcolor = '#009a00'         
            var nmcolor = '#00009a'         
            var cmcolor = '#9a0000'         
            var slcolor = '#007000'         
            var nlcolor = '#000070'         
            var clcolor = '#700000'         
            function drawCircle(sx, sy, sradius, sstrokeWidth) {
                var stage = new Kinetic.Stage({ container: "container", width: 578, height: 200 });
                var circleLayer = new Kinetic.Layer();
                //circle
                var scircle = new Kinetic.Circle({
                    x: sx,
                    y: sy,
                    radius: sradius,
                    fill:  {
                    start: {
                        x: 0,
                        y: 0,
                        radius: 0
                    },
                    end: {
                        x: 0,
                        y: 0,
                    radius: sradius
                    },
                colorStops: [0, sfcolor, 0.5, smcolor, 1, slcolor]
      },
                    stroke: slcolor,
                    strokeWidth: sstrokeWidth
                });
                scircle.on("mouseover.event1", function() {
                    this.setFill({
                        start: {
                            x: 0,
                            y: 0,
                            radius: 0
                        },
                        end: {
                            x: 0,
                            y: 0,
                            radius: sradius
                        },
                        colorStops: [0, nfcolor, 0.5, nmcolor, 1, nlcolor]
                });
                    this.setStroke(nlcolor);
                    scircle.off("click.event2");
                    circleLayer.draw();
                });
                scircle.on("mouseout.event1", function() {
                    this.setFill({
                        start: {
                            x: 0,
                            y: 0,
                            radius: 0
                        },
                        end: {
                            x: 0,
                            y: 0,
                            radius: sradius
                        },
                        colorStops: [0, sfcolor, 0.5, smcolor, 1, slcolor]
                    });
                    this.setStroke(slcolor);
                    scircle.off("click.event2");
                    circleLayer.draw();
                });
                scircle.on("click.event1", function() {
                    this.setFill({
                        start: {
                            x: 0,
                            y: 0,
                            radius: 0
                        },
                        end: {
                            x: 0,
                            y: 0,
                            radius: sradius
                        },
                        colorStops: [0, cfcolor, 0.5, cmcolor, 1, clcolor]
                    });
                    this.setStroke(clcolor);
                    scircle.off("mouseout.event1");
                    scircle.off("mouseover.event1");
                    scircle.off("click.event1");
                    scircle.on("click.event2", function() {
                        this.setFill({
                            start: {
                                x: 0,
                                y: 0,
                                radius: 0
                            },
                            end: {
                                x: 0,
                                y: 0,
                                radius: sradius
                            },
                            colorStops: [0, nfcolor, 0.5, nmcolor, 1, nlcolor]
                        });
                        this.setStroke(clcolor);
                        scircle.on("mouseout.event1");
                        scircle.on("mouseover.event1");
                        scircle.on("click.event1");
                        scircle.off("click.event2");
                        circleLayer.draw();
                    });

                    circleLayer.draw();
                });

                circleLayer.add(scircle);
                stage.add(circleLayer);
            }
            window.onload = function() {
                drawCircle(200, 100, 50, 3);
            };
        </script>

    </head>
    <body>
        <div id="container">
        </div>
    </body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:41:44.787

“开”功能需要两个参数。第一个是事件名称。第二个是处理程序。您需要传递处理程序才能正确恢复事件。

我认为您应该尝试将事件分配给处理程序并将它们传递给 scircle.on

看看下面的代码是否有效

干杯!

```
<head>
        <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.0.0.js">    </script>
        <script>

            var layer = new Kinetic.Layer();
            var sfcolor = '#00ff00'         
            var nfcolor = '#0000ff'         
            var cfcolor = '#ff0000'         
            var smcolor = '#009a00'         
            var nmcolor = '#00009a'         
            var cmcolor = '#9a0000'         
            var slcolor = '#007000'         
            var nlcolor = '#000070'         
            var clcolor = '#700000'         
            function drawCircle(sx, sy, sradius, sstrokeWidth) {
                var stage = new Kinetic.Stage({ container: "container", width: 578, height: 200 });
                var circleLayer = new Kinetic.Layer();
                //circle
                var scircle = new Kinetic.Circle({
                    x: sx,
                    y: sy,
                    radius: sradius,
                    fill:  {
                    start: {
                        x: 0,
                        y: 0,
                        radius: 0
                    },
                    end: {
                        x: 0,
                        y: 0,
                        radius: sradius
                    },
                    colorStops: [0, sfcolor, 0.5, smcolor, 1, slcolor]
                    },
                    stroke: slcolor,
                    strokeWidth: sstrokeWidth
                });

                mouseover_event1 = function() {
                    this.setFill({
                        start: {
                            x: 0,
                            y: 0,
                            radius: 0
                        },
                        end: {
                            x: 0,
                            y: 0,
                            radius: sradius
                        },
                        colorStops: [0, nfcolor, 0.5, nmcolor, 1, nlcolor]
                    });
                    this.setStroke(nlcolor);
                    scircle.off("click.event2");
                    circleLayer.draw();
                };
                scircle.on("mouseover.event1", mouseover_event1);

                mouseout_event1 = function() {
                    this.setFill({
                        start: {
                            x: 0,
                            y: 0,
                            radius: 0
                        },
                        end: {
                            x: 0,
                            y: 0,
                            radius: sradius
                        },
                        colorStops: [0, sfcolor, 0.5, smcolor, 1, slcolor]
                    });
                    this.setStroke(slcolor);
                    scircle.off("click.event2");
                    circleLayer.draw();
                }
                scircle.on("mouseout.event1", mouseout_event1);

                click_event1 = function() {
                    this.setFill({
                        start: {
                            x: 0,
                            y: 0,
                            radius: 0
                        },
                        end: {
                            x: 0,
                            y: 0,
                            radius: sradius
                        },
                        colorStops: [0, cfcolor, 0.5, cmcolor, 1, clcolor]
                    });
                    this.setStroke(clcolor);
                    scircle.off("mouseout.event1");
                    scircle.off("mouseover.event1");
                    scircle.off("click.event1");
                    scircle.on("click.event2", click_event2);

                    circleLayer.draw();
                };

                click_event2 = function() {
                    this.setFill({
                        start: {
                            x: 0,
                            y: 0,
                            radius: 0
                        },
                        end: {
                            x: 0,
                            y: 0,
                            radius: sradius
                        },
                        colorStops: [0, nfcolor, 0.5, nmcolor, 1, nlcolor]
                    });
                    this.setStroke(clcolor);
                    scircle.on("mouseout.event1", mouseout_event1);
                    scircle.on("mouseover.event1", mouseover_event1);
                    scircle.on("click.event1", click_event1);
                    scircle.off("click.event2");
                    circleLayer.draw();
                };

                scircle.on("click.event1", click_event1);

                circleLayer.add(scircle);
                stage.add(circleLayer);
            }
            window.onload = function() {
                drawCircle(200, 100, 50, 3);
            };
        </script>

    </head>
    <body>
        <div id="container">
        </div>
    </body> 
```

# jquery - 使用 Internet Explorer 的 jquery Ajax 响应“未定义”

> ID：12139957
> 
> 赞同：4
> 
> 时间：2012-08-27T10:07:34.210
> 
> 标签：jquery, ajax, internet-explorer, undefined

我遇到了 jquery ajax 请求的情况。

```
<script type="text/javascript">
$(document).ready(function() {
    $.ajax({
        type: "POST",
        async: false,
        cache: false, 
        url: "/ajax/script.php",
        data: { display: 'user', user_id: '1'}
    }).done(function( msg ) {
        if (msg !== "") {
            alert(msg);
        }
    });
});
</script> 
```

使用 Chrome 和 Firefox 我已经通过脚本生成了 html 代码`/ajax/script.php` 使用 IE8（我没有尝试使用 6、7 和 9+）我有`Undefined`

有人知道如何解决吗？

**编辑：**我正在使用 jquery 1.7.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-12T16:35:16.163

返回的 MIMEType`application/json; charset=utf8`在 IE8 中对我造成了同样的行为。更改它以`application/json;`使 IE8 神奇地开始运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T10:14:05.037

好吧，因为你没有定义“味精”，所以它是未定义的。done() 需要一个函数、多个函数或什么都没有作为参数。

如果你想从你的 ajax 调用中回调，你应该使用

```
 $.ajax({
        type: "POST",
        async: false,
        cache: false, 
        dataType: 'text',
        url: "/ajax/script.php",
        data: { display: 'user', user_id: '1'},
        success: function(data) {
            // do something
        }

    }); 
```

**编辑：**如果有帮助，我正在使用 jquery 1.7.2

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-04T18:34:29.217

我解决了更改代码的问题：

```
response.setCharacterEncoding("UTF8"); 
```

至：

```
response.setCharacterEncoding("UTF-8"); 
```

# wordpress - 未登录时 the_author 为空

> ID：12139963
> 
> 赞同：0
> 
> 时间：2012-08-27T10:08:08.070
> 
> 标签：wordpress

当用户未登录时，the_author 应该在第一页返回一个空字符串，但是当通过 AJAX 加载更多帖子时应该返回作者姓名，是否有原因？两种情况下的循环都是相同的。请帮我解决这个问题，因为我一无所知，我需要尽快修复它以启动我的网站。

这是整个 index.php：

```
<?php 

get_header();
get_sidebar();

?>
<!-- MAIN DIV -->

            <div id='content_and_floater'>

                <?php get_template_part('social_floater'); ?>
                <div id='content'>
                    <?php get_template_part('loop'); ?>
                </div>

            </div>

            <?php get_template_part('loader'); ?>

<!-- MAIN DIV -->
<?php
get_footer();
?> 
```

以下是infinitePaginator如何调用functions.php中的循环（当向下滚动到底部或单击加载器链接时调用该函数）：

```
function wp_infinitepaginate(){
    $loopFile        = $_POST['loop_file'];
    $paged           = $_POST['page_no'];
    $posts_per_page  = get_option('posts_per_page');  

    # Load the posts
    query_posts(array('paged' => $paged ));
    get_template_part( $loopFile );  

    exit;
} 
```

您可以在 test.nowillnoskill.net 上查看该行为。在单个帖子中它也不起作用。我的猜测是 query_posts(array('paged' => $paged )); 更改了查询中的某些内容，但我不知道它是什么。我试图插入 setup_postdata($post); 就在 loop.php 中的 the_post() 之后，我发现它对某人有用，但它不适合我。

我也尝试插入

```
query_posts(array('paged' => 1 )); 
```

在 index.php 中调用循环文件之前，但根本没有显示任何帖子。

这是我的loop.php：

```
<?php while ( have_posts() ) : the_post() ?>    
            <!-- POST1 -->
            <article class='post'>  
                <header class='post_header'>

                    <?php
                        global $current_user;
                        $current_user = wp_get_current_user();
                        if (!empty($current_user)) {
                            $pid = get_the_id();
                            $uid = $current_user->ID;

                            $title = (is_favorite($pid, $uid)) ?
                                'Remove from favorites' :
                                'Add to favorites';

                            $trans = (is_favorite($pid, $uid)) ?
                                '' :
                                ' transparent';

                    ?>

                    <div>
                        <h2>
                            <a href="<?php the_permalink(); ?>">
                                <?php the_title(); ?>
                            </a>
                        </h2>

                        <?php if (is_user_logged_in()) { ?>
                        <a title='<?php echo $title ?>' class='post_favorite' href='#' alt='fpid=<?php echo $pid ?>uid=<?php echo $uid ?>'>
                            <span class='symbol<?php echo $trans ?>'>R</span> 
                        </a>
                        <?php } ?>

                    </div>

                    <div class='post_header_div'>

                        <strong class='post_category'>
                            <?php echo get_the_category_list(', '); ?>
                        </strong>

                        <strong class='post_author'>
                            <span class='symbol'>U</span>
                                <?php the_author(); ?>
                        </strong>

                    </div>

                    <div>

                        <span class='post_author'>
                            <?php edit_post_link('[edit]'); ?>                          
                        </span>

                    </div>

                    <?php } ?>

                </header>

                <figure class='post_image'>
                    <!--<img src='design/img/flashkick.png' alt='logo' />-->
                    <?php the_post_thumbnail(); ?>
                </figure>

                <div class='post_perex'>
                    <?php the_content('Read more'); ?>
                </div>

                <div class='space'></div>

                <footer class='post_footer'>

                    <div class='post_footer_top'>

                        <div class='post_tags'>
                            <?php the_tags('', '', ''); ?>
                        </div>

                        <div class='post_time'>
                            <time datetime="<?php the_time('Y-m-d'); ?>" pubdate>
                                <span class='symbol'>P </span>
                                    <?php relative_post_the_date(); ?>
                            </time>

                        </div>

                    </div>

                </footer>

                <div class='space'></div>

            </article>

            <?php endwhile; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:01:07.223

作者信息由 Wordpress 在帖子信息中提供。尝试对您的 query_posts 结果进行 var_dump，您应该找到作者姓名的存储位置，以便正确显示它。

你能展示你的循环模板吗？至少显示作者的部分。

# java - 编写 Jena 内置程序

> ID：12139978
> 
> 赞同：2
> 
> 时间：2012-08-27T10:09:41.263
> 
> 标签：java, semantic-web, jena

我正在尝试编写一个[内置的 Jena](http://jena.apache.org/documentation/inference/#RULEbuiltins)来从给定的算法中返回一个值，然后与该值进行比较，例如，

```
String rule = "[exRule: (?d rdf:type ex:abc)" +
              "<-" +
              // ...extract ?a, ?b to use as inputs to the rule
          "greaterThan(myBuiltIn(?a, ?b), 1)" +  // Is return value greater than 1
      "]"; 
```

因此，首先[Jena 文档](http://jena.apache.org/documentation/inference/#RULEextensions)说，最简单的实验方法是查看 builtins 目录中的示例，但是我的安装中似乎没有这个，我在 Windows 7 上使用 Jena 2.6.4 . 我在哪里可以找到这个？我需要从其他地方下载吗？

其次，我不确定如何从我的内置函数中获取返回值。如果我只是`myBuiltIn(2, 1)`使用硬连线值调用，我知道它是由于我添加到内置`bodyCall()`方法中的一些调试输出而被调用的。但是，如果我将它传递给`greaterThan()`，那么我将不再看到这个。它仍然被调用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T06:50:57.923

@约书亚

我找到了如何实现这一点。

首先，您应该创建一个从**BaseBuiltin**扩展的新类，例如[http://sadl.sourceforge.net/CustomJenaBuiltins.html](http://sadl.sourceforge.net/CustomJenaBuiltins.html)

然后将其添加到 builtinRegistry 类

# c# - 开始和结束日期的数据注释

> ID：12139979
> 
> 赞同：3
> 
> 时间：2012-08-27T10:09:49.233
> 
> 标签：c#, asp.net-mvc-3, data-annotations

我将视图模型用于开始和结束日期，并使用数据注释进行验证。验证规则是：

1.  开始日期不应大于结束日期且不为空，空白
2.  结束日期不应小于开始日期且不小于 DateTime.Now 且不为空、空白

以下视图模型由 startdate 和 enddate 属性组成。令人困惑的是，如何在下面的代码中传递 StartEndDateRange 数据注释中的 EndDate 值和 EndDate 数据注释中的 StartDate 值：

```
 public class StartEndDate
    {
        [DataType(DataType.Date)]
        [DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
        [StartEndDateRange("2000/01/01", "value of end date properties")]
        public DateTime StartDate { get; set; }

        [DataType(DataType.Date)]
        [DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
        [StartEndDateRange("value of startdate properties", DateTime.Now.ToString("yyyy/MM/dd"))]
        public DateTime EndDate { get; set; }

    }

    public class StartEndDateRangeAttribute : ValidationAttribute
    {
        private const string DateFormat = "yyyy/MM/dd";
        private const string DefaultErrorMessage =
     "'{0}' must be a date between {1:d} and {2:d}.";

        public DateTime MinDate { get; set; }
        public DateTime MaxDate { get; set; }

        public StartEndDateRangeAttribute(string minDate, string maxDate)
            : base(DefaultErrorMessage)
        {
            MinDate = ParseDate(minDate);
            MaxDate = ParseDate(maxDate);
        }

        public override bool IsValid(object value)
        {
            if (value == null || !(value is DateTime))
            {
                return true;
            }
            DateTime dateValue = (DateTime)value;
            return MinDate <= dateValue && dateValue <= MaxDate;
        }
        public override string FormatErrorMessage(string name)
        {
            return String.Format(CultureInfo.CurrentCulture,
     ErrorMessageString,
                name, MinDate, MaxDate);
        }

        private static DateTime ParseDate(string dateValue)
        {
            return DateTime.ParseExact(dateValue, DateFormat,
     CultureInfo.InvariantCulture);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T10:36:24.527

创建两个不同的验证属性。一个`DateBefore`和另一个`DataAfter`

您可以从中获取正在验证的模型的属性`validationContext`。

在`DateBefore`做

```
protected override ValidationResult IsValid(object value, ValidationContext validationContext) {
    PropertyInfo endDateProperty= validationContext.ObjectType.GetProperty("EndDate");
    ...
} 
```

通过获取值

```
var endDate = endDateProperty.GetValue(validationContext.ObjectInstance, null); 
```

现在比较`value`和`endDate`。

# **编辑**

多一点代码

```
public class BeforeEndDateAttribute : ValidationAttribute{
    public string EndDatePropertyName { get; set; }
    public string StartDate { get; set; }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        PropertyInfo endDateProperty = validationContext.ObjectType.GetProperty(EndDatePropertyName);

        DateTime endDate = (DateTime) endDateProperty.GetValue(validationContext.ObjectInstance, null);

        var startDate = DateTime.Parse(StartDate);

        // Do comparison
        // return ValidationResult.Success; // if success
        return new ValidationResult("Error"); // if fail
    }

} 
```

并使用如下：

```
public class MyModel
{
    [BeforeEndDate(EndDatePropertyName = "EndDate", StartDate = "2000/01/01")]
    public DateTime StartDate { get; set; }

    // [AfterStartDate(StartDatePropertyName = "StartDate", EndDate = "2020/01/01")]
    public DateTime EndDate { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T10:22:14.817

在一个验证属性中实现这一点更容易`DateRange`。

但是，如果您不想这样做，则必须覆盖`IsValid(Object, ValidationContext)`，提取正在验证的对象类型`ValidationContext.ObjectType`，获取其正在验证的属性`ValidationContext.MemberName`，然后从属性中读取值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T11:28:48.760

我可能会建议您`IValidatableObject`在课堂上实现，但唯一的事情是您必须自己进行客户端验证。

```
public class StartEndDate: IValidatableObject
{
    [Required]
    public DateTime StartDate { get; set; }

    [Required]    
    public DateTime EndDate { get; set; } 

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
       // do the validations
    }
} 
```

# magento-1.4 - Magento - 后端创建的新产品属性不可见

> ID：12139983
> 
> 赞同：1
> 
> 时间：2012-08-27T10:10:22.530
> 
> 标签：magento-1.4, magento-1.5, magento, magento-1.7

我已经在本地和测试服务器上创建了后端两个新产品的属性。虽然在本地我能够在产品详细信息中看到新属性，但在测试服务器上我看不到任何两个新属性。我已经尝试了几次重新索引数据，清除缓存，取消并重新创建这些属性，使用与本地相同的配置，但它不起作用，我看不到我的新属性。我可以检查什么？这是两个屏幕截图：

本地： ![在此处输入图像描述](../Images/8f08c8741bcdae69da5a833422bb503a.png)

测试服务器： ![在此处输入图像描述](../Images/73c0e353ef86b1c07d7838bd9562494b.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-01T13:29:20.347

您添加的任何属性都必须分配给某个属性集。

因此，每次创建新属性并将其分配给属性集后，您都必须转到**目录 -> 属性 -> 管理属性集。**

如果您在添加产品时选择了正确的属性，它将出现在产品输入表单中。

# apache - 更改 DocumentRoot 后，Apache 总是获得 403 权限

> ID：12139985
> 
> 赞同：0
> 
> 时间：2012-08-27T10:10:30.263
> 
> 标签：apache, freebsd

我只是 Apache 的新手。我刚刚在我的家庭办公室的 FreeBSD 机器上安装了 apache 2.2。FreeBSD 文档上的说明是我可以更改 DocumentRoot 指令以使用自定义的目录数据。所以我换了...

```
/usr/local/www/apache22/data 
```

和

```
/usr/home/some_user/public_html 
```

但有些不对劲。目录中有 index.html 文件，但似乎 apache 无法读取目录/文件。

```
Forbidden
You don't have permission to access / on this server. 
```

的许可

```
public_html 
```

是

```
drwxr-xr-x 
```

我想知道这里可能有什么问题。另外，就我而言，我不会为这个 FreeBSD 机器托管多个网站，所以我根本没有考虑使用 VirtualHost。这只是更改 DirectoryRoot 指令的好习惯吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T10:54:31.773

apache 配置中的某处是这样的一行：

```
# This should be changed to whatever you set DocumentRoot to.
#
<Directory "/usr/local/www/apache22/data"> 
```

您也必须更改此路径才能使其正常工作。该指令包含例如：

```
Order allow,deny
Allow from all 
```

这使初始用户可以访问该目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:19:49.710

想到的一种可能性是 SELinux 阻止 Web 进程访问该文件夹。如果是这种情况，您会在 selinux 日志中看到它。您必须使用以下命令检查原始 Web 根目录的上下文：

```
ls -Zl 
```

然后将其应用到您的新 Web 文件夹：

```
chcon whatevercontextyousaw public_html 
```

或者，如果它不是需要安全性的生产服务器（例如防火墙后面的开发机器），您可能只想关闭 selinux。

只有一个想法。可能是其他一些事情。

# timezone - 时区迁移后 FQL 无法返回事件数据

> ID：12139994
> 
> 赞同：0
> 
> 时间：2012-08-27T10:11:12.337
> 
> 标签：timezone, facebook-fql

[如此处](https://developers.facebook.com/blog/post/2012/08/01/platform-migration--events-timezone-support/ "Facebook 平台迁移博客")所述，在时区迁移之后，这些更改适用

在“events_timezone”迁移之前：

*   start_time 和 end_time 字段是太平洋时间的 UNIX 时间戳。
*   示例：“1341453600”表示 2012 年 7 月 4 日晚上 7 点。
*   **end_time 总是被定义的。**

在“events_timezone”迁移之后：

*   start_time 和 end_time 字段是 ISO-8601 格式的字符串。
*   **如果未指定，end_time 可能为 null。**

我使用以下查询来查询用户社交网络中发生的每个事件的结束时间。

```
SELECT eid, end_time FROM event WHERE eid IN (SELECT eid FROM event_member WHERE start_time > '2012-08-27' AND uid IN (SELECT uid FROM user WHERE uid = me() OR uid IN (SELECT uid2 FROM friend WHERE uid1 = me()))) LIMIT 5000. 
```

此查询在时区迁移之前有效，但在启用时区迁移的情况下无法返回任何数据。我高度怀疑这是**因为至少一个事件的 end_time 为空。**

我该如何克服这个问题，并获得大多数事件的 end_dates 呢？我不介意为一两个事件设置一个空值，但我希望我的数据尽可能准确。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:25:04.050

似乎添加了一个简单的

```
AND end_time != '' 
```

成功了

代码现在

```
SELECT eid, end_time FROM event WHERE eid IN (SELECT eid FROM event_member WHERE start_time > '2012-08-27' AND uid IN (SELECT uid FROM user WHERE uid = me() OR uid IN (SELECT uid2 FROM friend WHERE uid1 = me()))) AND end_time != '' LIMIT 5000 
```

但是，我现在收到的事件仍然比以前少。为了获得相同的结果，我将不得不编写第二个查询来获取没有结束时间的事件

# jquery - jQuery：查找两个结果集之间的重叠元素

> ID：12139995
> 
> 赞同：3
> 
> 时间：2012-08-27T10:11:28.410
> 
> 标签：jquery

如果我有两个 jQuery 结果集，比如说

```
$("#someParent *") 
```

和

```
$("#someElement").nextAll() 
```

*那么我怎样才能最好地获得两个*结果集中出现的所有元素呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T10:15:51.857

您可以使用[filter()](http://api.jquery.com/filter/)：

```
var firstSet = $("#someParent *");
var secondSet = $("#someElement").nextAll();
var elementsInBothSets = firstSet.filter(secondSet); 
```

# java - 如何转换 ArrayList to a XML using JAXB? I am trying to convert ArrayList to xml using JAXB.. ArrayList <ldapuser>myList = new ArrayList<ldapuser>(); myList = retrieveUserAttributes.getUserBasicAttribu 问问题 问问题 2012-08-27T10:11:28.863 10743 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I am trying to convert ArrayList to xml using JAXB.. ArrayList <ldapuser>myList = new ArrayList<ldapuser>(); myList = retrieveUserAttributes.getUserBasicAttributes(lastName, retrieveUserAttributes.getLdapContext()); JAXBContext jaxbContext = JAXBContext.newInstance(LDAPUser.class); Marshaller jaxbMarshaller = jaxbContext.createMarshaller(); StringWriter sw = new StringWriter(); jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true); jaxbMarshaller.marshal(myList, sw); System.out.println(sw.toString()); return sw.toString(); ... but its not working, I am getting this error: 27-Aug-2012 10:43:58 org.apache.catalina.core.StandardWrapperValve invoke SEVERE: Servlet.service() for servlet [spring] in context with path [/Spring3-LDAP-WebService] threw exception [Request processing failed; nested exception is javax.xml.bind.JAXBException: class java.util.ArrayList nor any of its super class is known to this context.] with root cause javax.xml.bind.JAXBException: class java.util.ArrayList nor any of its super class is known to this context. at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getBeanInfo(JAXBContextImpl.java:554) at com.sun.xml.internal.bind.v2.runtime.XMLSerializer.childAsRoot(XMLSerializer.java:470) at com.sun.xml.internal.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:314) at com.sun.xml.internal.bind.v2.runtime.MarshallerImpl.marshal(MarshallerImpl.java:243) at javax.xml.bind.helpers.AbstractMarshallerImpl.marshal(AbstractMarshallerImpl.java:96) at ie.revenue.spring.RestController.searchLdapUsersByLastNameTwo(RestController.java:69) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)........... Please help! Thanks. I find that this usually occurs to me when i still have a method declaration in an interface, which a class implements, but that i had later removed and had forgotten to remove it from the interface as well. I usually just save the entire solution every 30mins n then just revert back to an earlier version if i cant find the error. javaxmljaxb 4 1 回答 1 This answer is useful 4 尝试创建一个包含您的列表并使其成为 xml 根的类，例如： @XmlRootElement class LDAPUsers { private List <ldapuser>users; ... get ... set ... constructor } 然后封送 LDAPUsers 对象。 于 2012-08-27T10:53:32.727 回答 Related 1 c# - /* ... */ 的正则表达式 1 iphone - 如何在不影响现有用户数据的情况下发布更新的 Core Data 架构？ 2 php - 在循环PHP之外使用循环变量 2 sql-server-2008 - SELECT 在存储过程中使用时返回不同的结果 1 android - 在Android中制作带有图像的RadioGroup单选按钮......如何？ 4 php - mySQL 事务不工作 2 python - Fabric中下载时如何维护权限 2 c# - Html Parser - C# Regex html 标签（div、img、a、h5 等）加上属性 9 javascript - 如何在运行时获取 Javascript 函数调用/跟踪 1 c# - Oracle SQL 插入/Visual Studio 2010 C# 错误 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</ldapuser></ldapuser></ldapuser></ldapuser></ldapuser>

> ID：12139996
> 
> 赞同：1
> 
> 时间：
> 
> 标签：java, xml, jaxb

I am trying to convert ArrayList to xml using JAXB..

```
ArrayList<LDAPUser> myList = new ArrayList<LDAPUser>();

    myList = retrieveUserAttributes.getUserBasicAttributes(lastName,
            retrieveUserAttributes.getLdapContext());

    JAXBContext jaxbContext = JAXBContext.newInstance(LDAPUser.class);
    Marshaller jaxbMarshaller = jaxbContext.createMarshaller();

    StringWriter sw = new StringWriter();

    jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

     jaxbMarshaller.marshal(myList, sw);
     System.out.println(sw.toString());     
     return sw.toString(); 
```

... but its not working, I am getting this error:

> 27-Aug-2012 10:43:58 org.apache.catalina.core.StandardWrapperValve invoke SEVERE: Servlet.service() for servlet [spring] in context with path [/Spring3-LDAP-WebService] threw exception [Request processing failed; nested exception is javax.xml.bind.JAXBException: **class java.util.ArrayList nor any of its super class is known to this context.] with root cause javax.xml.bind.JAXBException: class java.util.ArrayList nor any of its super class is known to this context.** at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getBeanInfo(JAXBContextImpl.java:554) at com.sun.xml.internal.bind.v2.runtime.XMLSerializer.childAsRoot(XMLSerializer.java:470) at com.sun.xml.internal.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:314) at com.sun.xml.internal.bind.v2.runtime.MarshallerImpl.marshal(MarshallerImpl.java:243) at javax.xml.bind.helpers.AbstractMarshallerImpl.marshal(AbstractMarshallerImpl.java:96) at ie.revenue.spring.RestController.searchLdapUsersByLastNameTwo(RestController.java:69) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)...........

Please help! Thanks.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T10:53:32.727

尝试创建一个包含您的列表并使其成为 xml 根的类，例如：

```
@XmlRootElement
class LDAPUsers {
    private List<LDAPUser> users;
    ... get ... set ... constructor 
} 
```

然后封送 LDAPUsers 对象。

# qt - 是否可以使用 QNetworkAccessManager 控制下载速度

> ID：12139999
> 
> 赞同：3
> 
> 时间：2012-08-27T10:11:37.447
> 
> 标签：qt

我们是否可以`QNetworkAccessManager`通过限制下载速度来限制消耗整个带宽，因为我们确实看到几乎每个下载管理器都有这样的选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:17:57.823

这是开箱即用的。但是看看[Qt Torrent Example](http://qt-project.org/doc/qt-4.8/network-torrent.html)，尤其是类`RateController`（[ratecontroller.h](http://qt-project.org/doc/qt-4.8/network-torrent-ratecontroller-h.html) | [ratecontroller.cpp](http://qt-project.org/doc/qt-4.8/network-torrent-ratecontroller-cpp.html)）。这个类不仅控制一个连接，而且控制一组连接，几乎可以满足您的要求。

但是，这个速率控制器正在运行`QTcpSockets`（确切地说是在`PeerWireClients`），所以你需要将“对等”的类型更改为`QIODevice`，我希望这并不难，因为`PeerWireClient`继承自`QTcpSocket`，它本身继承自`QIODevice`：

```
 // old
 void addSocket(PeerWireClient *socket);
 // new
 void addDevice(QIODevice *device); 
```

（注意 Torrent 示例中的 RateController 控制上传和下载，但您只需要控制下载速率。因此您可以删除不必要的代码。）

然后，您需要`QNetworkAccessManager`使用此速率控制器发出请求。这可以通过重新实现`QNetworkAccessManager`和覆盖（扩展）方法来完成`QNetworkAccessManager::createRequest`，每当创建新请求时都会调用该方法。此方法返回将从中读取下载的`QNetworkReply*`（继承自`QIODevice*`），因此告诉速率控制器控制此设备将限制下载速率：

```
QNetworkReply *MyNetworkAccessManager::createRequest(
                QNetworkAccessManager::Operation op,
                const QNetworkRequest &req,
                QIODevice *outgoingData)
{
    // original call to QNetworkAccessManager in order to get the reply
    QNetworkReply *reply = QNetworkAccessManager::createRequest(op, req, outgoingData);

    // add this reply (which is a QIODevice*) to the rate controller
    rateController.addDevice(reply);

    return reply;
} 
```

如果您已经知道实际执行请求的代码片段，则不必继承 QNetworkAccessManager。方法`get()`和`post()`返回 a`QNetworkReply*`您也可以将其添加到速率控制器。（但是这样，您在管理器*之外**手动*执行此操作，这不符合信息/实现隐藏的概念，在这种情况下，下载是速率控制的事实。）