# StackOverflow 问答 10050000-10050999

# jquery - 检测浏览器中“打印”操作的关闭

> ID：10050000
> 
> 赞同：1
> 
> 时间：2012-04-06T22:32:35.310
> 
> 标签：jquery, browser, printing

> **可能重复：**
> [检测浏览器打印事件](https://stackoverflow.com/questions/1234008/detecting-browser-print-event)

我正在使用 jquery 来移动一些 html（添加、删除），所以如果用户打印页面，它会更好。

关闭打印窗口提示后，如何定位它，以便将其恢复为原始状态？

### 我的打印按钮

```
<div id="printthispage" onClick="window.print();return false;"></div> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T22:38:41.500

自 FF 6 以来已经采用了一些事件，并且它在 IE 中是原生的。我相信这也适用于 chrome。

body.onafterprint 和 body.onbeforeprint

[https://developer.mozilla.org/en/Printing#Detecting_print_requests](https://developer.mozilla.org/en/Printing#Detecting_print_requests)

# css - CSS 和为 IE8 开发的艰辛

> ID：10050001
> 
> 赞同：-1
> 
> 时间：2012-04-06T22:32:41.737
> 
> 标签：css, internet-explorer-8

刚刚完成了一个网站的开发，但是如果没有偶尔尝试让事情在 Internet Explorer 中运行的感觉，那么网站开发将是什么......特别是在这种情况下是 IE8。查看以下页面。它在 Chrome、IE9 和 10 以及 Firefox 中运行良好；IE8是最后一个必须工作的。`http://dev.mrstore.co.uk/container-sales-hire.php`. 我一直在尝试通过浮动元素来使其工作..我已经尝试过明确：在第三张图片之后..设置高度和宽度..我不知道。这可能是多种因素的结合，但在这一点上，我不介意朝着正确的方向前进。我只想修复最后一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T23:04:17.993

您的 HTML 代码已损坏。您缺少最后四张图片周围链接的结束标签。

# php - strpos 和/或 stripos 的正确用法是什么？（这是一个错误吗？）

> ID：10050004
> 
> 赞同：0
> 
> 时间：2012-04-06T22:32:59.557
> 
> 标签：php

这让我陷入了一个循环：

```
$s = "ERROR: 5 - [RecordN...blah blah blah";
print stripos($s, 'error') . "\n";
print strpos($s, "ERROR") . "\n";
print $s . "\n"; 
```

结果是：

```
0
0
ERROR: 5 - [RecordN...blah blah blah 
```

嗯？好吧，我会从[这里](http://php.net/manual/en/function.strpos.php)尝试一些东西：

```
$mystring = 'abc';
$findme   = 'a';
$pos = strpos($mystring, $findme);

print $pos . "\n"; 
```

结果是：

```
0 
```

什么？

我在跑：

```
php --version

PHP 5.3.6-13ubuntu3.6 with Suhosin-Patch (cli) (built: Feb 11 2012 03:26:01) 
Copyright (c) 1997-2011 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2011 Zend Technologies 
```

我在看一个错误吗？

提前致谢。

编辑：

显然在那里失去了理智。感谢所有的回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T22:50:44.207

一切都是正确的。您得到零是因为在第一次 stripos 返回 0 作为“e”（或“E”）的位置，而在第二次零只是 FALSE 被打印为整数。

如果您查看 stripos 的手册，您将看到返回值描述为

> 返回针相对于 haystack 字符串开头的位置（与偏移量无关）。另请注意，字符串位置从 0 开始，而不是 1。

尝试将您的代码更改为此，您将明白我的意思：

```
$s = "ERROR: 5 - [RecordN...blah blah blah";
var_dump(stripos($s, 'error'));
var_dump(strpos($s, "ERROR"));

var_dump(strpos($s, 'error'));
var_dump(stripos($s, "ERROR"));

print $s . "\n"; 
```

#1、#2 和 #4 将是 int(0)，#3 将是 bool(false)。

在您的第二个示例中发生了完全相同的事情。您正在检查“a”的位置，它实际上是字符串中的第一个字符，这意味着它的位置是 0。

如果您需要检查字符串是否是错误，您应该从（假设）更改您的代码：

```
$s = "ERROR: 5 - [RecordN...blah blah blah";
$isError = stripos($s, 'error') != 0; 
```

对此：

```
$s = "ERROR: 5 - [RecordN...blah blah blah";
$isError = (stripos($s, 'error') !== false); 
```

或根据需要使其区分大小写：

```
$s = "ERROR: 5 - [RecordN...blah blah blah";
$isError = (strpos($s, 'ERROR') !== false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T22:35:57.240

```
$mystring = 'abc';
$findme   = 'a';
$pos = strpos($mystring, $findme); 
```

上面的例子工作正常。因为`a`在 的`0`索引位置`abc`。如果它不在字符串中，则 `strpos`返回`false`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T22:36:08.630

如果搜索词位于字符串的第 0 位（即在开头），则返回零。明显地。

如果搜索词不在字符串中，`FALSE`则返回。这就是为什么你应该用它`!== FALSE`来测试是否找到了字符串。

# php - 输出数组的值

> ID：10050006
> 
> 赞同：0
> 
> 时间：2012-04-06T22:33:27.897
> 
> 标签：php, foreach

我有以下数组：

```
array(20) {
  [0]=>
  array(3) {
    ["href"]=>
    string(112) "http://blogs.msdn.com/b/..."
    ["title"]=>
    string(50) "How to improve performance ..."
    ["dateCreated"]=>
    string(11) "03 apr 2012"
  }
  [1]=>
  array(3) {
    ["href"]=>
    string(104) "http://blogs.msdn.com/b/ ..."
    ["title"]=>
    string(98) "Activating Windows 8 c..."
    ["dateCreated"]=>
    string(11) "24 mar 2012"
  } 
```

我想做的就是输出数组的值，例如：

```
foreach($array as $item) {
    $item->href?
} 
```

这应该很简单，但我今晚很挣扎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T22:35:05.323

嗯...与您输出其他任何内容的方式相同。与[`echo`](http://php.net/echo).

```
foreach($array as $item) {
    echo $item['href'];
} 
```

[也修改数组](http://php.net/array)的基础知识。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T22:45:47.813

通过类型转换，您可以将数组更改为对象，如下所示：

```
<?php
foreach ( $array as $item ) 
{
    $item = (object)$item;
    echo $item->href;
}
?> 
```

如果您从数据库中检索数据，您还可以使用`mysqli_fetch_object()`which 将数据作为对象而不是数组返回。

[mysqli_fetch_object()](http://php.net/manual/en/mysqli-result.fetch-object.php "mysqli_fetch_object")上的 PHP.net

或者，如果您对像对象一样使用它不感兴趣，只需使用`echo $item['href'];`而不是`echo $item->href;`

# exception - Tomcat：启动tomcat实例时过滤对象崩溃

> ID：10050010
> 
> 赞同：0
> 
> 时间：2012-04-06T22:33:49.817
> 
> 标签：exception, tomcat, filter

我已经实现了一个过滤器对象并将其注册到 web.xml 文件中。启动tomcat服务器时出现以下错误：

```
Apr 7, 2012 12:24:18 AM org.apache.catalina.core.StandardContext filterStart
SEVERE: Exception starting filter Google Bot Filter
java.lang.InstantiationException: eu.homeinspiration.server.SEOFilter
at java.lang.Class.newInstance0(Class.java:340)
at java.lang.Class.newInstance(Class.java:308)
at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:125)
at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:256)
at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:382)
at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:103)
at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4638)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5294)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:958)
at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1599)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680) 
```

我不明白这里出了什么问题。[过滤器对象与此链接http://code.google.com/p/gwt-platform/source/browse/src/com/philbeaudoin/gwtp/](http://code.google.com/p/gwt-platform/source/browse/src/com/philbeaudoin/gwtp/crawler/server/CrawlFilter.java?r=6e633296934feb9d8150f53b07b8b9515ea6dc4b)提供的过滤器类代码几乎相似（除了一些小的更改）[爬虫/服务器/CrawlFilter.java?r=6e633296934feb9d8150f53b07b8b9515ea6dc4b](http://code.google.com/p/gwt-platform/source/browse/src/com/philbeaudoin/gwtp/crawler/server/CrawlFilter.java?r=6e633296934feb9d8150f53b07b8b9515ea6dc4b)

编辑：问题是由构造函数引起的：

```
public SEOFilter( Logger log ) 
```

我添加了一个通用构造函数

```
public SEOFilter() {
    this.log = Logger.getAnonymousLogger();
} 
```

现在它起作用了。谢谢阅读。

# php - PHP通过唯一值创建/合并数组

> ID：10050013
> 
> 赞同：0
> 
> 时间：2012-04-06T22:34:04.887
> 
> 标签：php, arrays, merge

我陷入了无休止的 foreach 中。

我有一个数组：

```
$array[0] = array( A,B );
$array[1] = array( A,C );
$array[2] = array( B,C );
$array[3] = array( B,E );
$array[4] = array( C,E ); 
```

我需要得到的是：

```
$array[0] = array( A,B,C );
$array[1] = array( A,B,E );
$array[2] = array( A,C,E );
$array[3] = array( B,C,E ); 
```

有没有一种简单的方法可以通过一个简单的功能来实现这一点？我还需要为上面的结果创建 4 个值数组：A、B、C、E 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T22:46:21.103

如果您需要生成唯一[排列](http://en.wikipedia.org/wiki/Permutation)数组，可以使用本文中的代码：

[http://www.dannyherran.com/2011/06/finding-unique-array-combinations-with-php-permutations/](http://www.dannyherran.com/2011/06/finding-unique-array-combinations-with-php-permutations/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T23:03:20.810

像这样的东西（未经测试）：

```
$out = array();
foreach($array as $first) {
    foreach($array as $second) {
        if (array_slice($first, 1) == array_slice($second, -1)) {
            $copy = $first;
            $last = array_slice($second, -1, 1);
            $copy []= $last[0];
            $out []= $copy;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T23:03:27.510

关于什么：

```
$array[0] = array( A,B );
$array[1] = array( A,C );
$array[2] = array( B,C );
$array[3] = array( B,E );
$array[4] = array( C,E );

$array2 = new array();

for($i = 0; $i < count($array); $i++)
{
    for($j = 0; $j < count($array); $j++)
    {
        if($array[$i][1] == $array[$j][0])
        {
            $array2[] = new array($array[$i][0], $array[$i][1], $array[$j][1]);
        }
    }
} 
```

# ruby-on-rails - 使用自定义 json 方法渲染

> ID：10050015
> 
> 赞同：0
> 
> 时间：2012-04-06T22:34:13.287
> 
> 标签：ruby-on-rails, ruby, json, activerecord

我的一个活动记录子类有一个创建类 json 表示的方法。这是回答该数据数组的方法吗？

```
# answer is an array
answer = MyModel.fetch()

respond_to do |format|
    format.json { render :json => answer.collect { |e| e.as_special_json } }
end 
```

我认为这是不对的。我想我真的不明白 render :json 是什么意思。我认为这将json编码几乎json。有没有办法像任何其他json一样回答几乎json？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T01:06:16.320

您可以将其呈现为文本：

```
respond_to do |format|
  format.special_json { render :text => answer.collect{ |e| e.as_special_json } }
end 
```

您可以访问添加`.special_json`到您的 url 以使 rails 呈现文本。您需要将新的 mime 符号“special_json”映射到 json mime 类型。只需将此行添加到`config/initializers/mime_types.rb`：

```
Mime::Type.register "application/json", :special_json 
```

# java - 在java中生成不重复的随机数

> ID：10050018
> 
> 赞同：0
> 
> 时间：2012-04-06T22:34:19.663
> 
> 标签：java

我正在制作一个游戏，它将在 java 中提出不同的问题。问题存储在一些数组列表中。我的问题是这些问题不应该重复。如果所有问题都被问过，那么程序应该停止。我用过java随机函数。但它失败了。任何帮助都将是可观的问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T22:38:34.837

如果我正确理解您的问题，您希望以随机顺序显示问题。这个问题有一个简单的解决方案。使用该方法`java.util.Collections.shuffle`随机排列列表中的问题。然后从头开始遍历列表。该算法具有线性时间和空间复杂度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T22:41:06.617

将问题列表复制到临时列表中，以及

```
while(list.size() > 0){
     int i = Math.floor(Math.Random() * list.size());
     list.get(i); //do something with question
     list.remove(i);
} 
```

只要列表有元素，此循环就会循环，将随机元素拉出，然后将其从列表中删除。

* * *

编辑澄清 - 这可以确保你不会得到重复

# php - smarty中的for循环

> ID：10050019
> 
> 赞同：0
> 
> 时间：2012-04-06T22:34:41.843
> 
> 标签：php, mobile, smarty

我在 php 中编写了一个简单的分页代码，但我想在 index.tpl 中而不是在 index.php 中显示 for 循环我该怎么办？

一些帮助的链接：[http ://www.smarty.net/syntax_comparison](http://www.smarty.net/syntax_comparison)

```
$perPage = 10;
$PaginationSql = mysql_query("SELECT COUNT('ID') FROM VA_VIDEOS");
$Pages = ceil(mysql_result($PaginationSql, 0) / $perPage);
$Page = (isset($_GET['page'])) ? (int)$_GET['page'] : 1;
$Start = ($Page - 1) * $perPage;
$postDate = date("d-m-Y");
srand(time());
$randomNum = (rand()%20);
$sql = mysql_query("SELECT * FROM VA_VIDEOS ORDER BY ID DESC LIMIT ".$Start.", ".$perPage."");
while ($Videos = mysql_fetch_array($sql))
{

$ShowVideos[] = $Videos;

}
if($Page >= 1 && $Page<=$Pages){
echo "<div style='margin-left:20px;'>";
if($Page != 1){print "<b class='pagination'><a href='?page=1'>First</a></b>";}

    for($x=1; $x<=$Pages; $x++){
    $PaginationNum = ($x == $Page) ? "<b class='page-in'>".$x."</b>" : "<a href='?page=".$x."' class='pagination'>".$x."</a>";
    echo $PaginationNum;

    }

    if($Page != $Pages){
$LastPage = "<b class='pagination'><a href='?page=".$Pages."'>Last</a></b>";
echo $LastPage;
}
echo "</div>";
} else {

    print "Error!";

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T23:28:51.877

只需将脚本的最后一部分在其中回显内容放入`index.tpl`.

尝试这样的事情（使用 Smarty3 foreach 语法）：

```
<?php
// index.php

$perPage = 10;
// ...
while ($Videos = mysql_fetch_array($sql)) {
    $ShowVideos[] = $Videos;
}

$smarty->assign('current_page', $Page);
$smarty->assign('pages', range($pages)); // returns: array(1, 2, 3, ..., $Pages) 
```

索引.tpl

```
{if $current_page < $pages|count}
    <b class="pagination"><a href="?page=1">First</a></b>
{/if}

{foreach $pages as $page}
    {if $page == $current_page}
         <b class="page-in">{$page}</b>
    {else}
        <a href="?page={$page}" class="pagination">{$page}</a>

    {/if}
{/foreach}

{if $page < $pages|count}
    <b class="pagination"><a href="?page={$pages|count}">Last</a></b>
{/if} 
```

为了获得额外的性能，计算`$pages`in的大小`index.php`并分配它。我只是想展示如何使用 PHP 函数作为[变量修饰符](http://www.smarty.net/docs/en/language.modifiers.tpl)以备不时之需。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T18:42:17.567

像这样使用循环

```
while ($Videos = mysql_fetch_array($sql))
{

$ShowVideos[] = $Videos;

}
$smarty->assign("video", $ShowVideos); 
```

TPL 文件如下所示：

```
{section name=video loop=$video}

<li>{$video[video].id}</li> //// will show the video id from database

{/section} 
```

# java - 正则表达式匹配格式 DigitOperandDigit 的字符串

> ID：10050025
> 
> 赞同：-2
> 
> 时间：2012-04-06T22:35:46.920
> 
> 标签：java, regex

我正在寻找一个简单的 Java 正则表达式来查看给定的字符串是否**包含**以下模式：

```
DigitOperandDigit 
```

数字是从 0 到 9 的数字，操作数是 中的任何一个`+-/*`。

例子：

```
1+1
2/4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T22:38:41.403

这个表达式应该有效：

```
\d[*/+-]\d 
```

并在使用中：

```
if (string.matches("\d[*/+-]\d"))
{
    // ...
} 
```

# c# - 反射程序集会导致 Unity 需要 Microsoft.Practices.ServiceLocation

> ID：10050027
> 
> 赞同：5
> 
> 时间：2012-04-06T22:36:04.590
> 
> 标签：c#, c#-4.0, reflection, unity-container

我们通常只在我们的应用程序中引用 Microsoft.Practices.Unity.dll。我们只使用基本功能，这很好用。在一个应用程序中，使用反射的行为导致 Unity 需要另一个 DLL。

例如，创建一个控制台应用程序并仅引用 Microsoft.Practices.Unity（文件版本 2.0.414.0）。输入以下代码并运行它：

```
class Program
{
    static void Main()
    {
        using (var container = new UnityContainer())
        {
            container.RegisterType<IDoSomething, ConcreteDoSomething>();

            var thing = container.Resolve<IDoSomething>();

            thing.DoSomething();
            Console.WriteLine();

            LoadSchemaLoaders();
        }
    }

    public static void LoadSchemaLoaders()
    {
        var type = typeof(ISchemaLoader);

        try
        {
            // Get all loaded assemblies, including Unity.
            // Get all of the types.
            // Filter for types that ISchemaLoader (custom type) can be assigned from.

            var types = AppDomain.CurrentDomain.GetAssemblies()
                .SelectMany(s => s.GetTypes())
                .Where(c => type.IsAssignableFrom(c) && c.IsClass && !c.IsAbstract && !c.IsGenericParameter);

            Console.WriteLine("Got here...");

            types.FirstOrDefault();
        }
        catch (ReflectionTypeLoadException ex)
        {
            Console.WriteLine(ex.Message);

            foreach (Exception exSub in ex.LoaderExceptions)
            {
                Console.WriteLine(exSub.Message);
            }
        }
    }
}

public interface IDoSomething
{
    void DoSomething();
}

public class ConcreteDoSomething : IDoSomething
{
    public void DoSomething()
    {
        Console.WriteLine("Something!");
    }
}

public interface ISchemaLoader {} 
```

在我的机器上，输出是：

```
某物！

去那里...
无法加载一种或多种请求的类型。检索 LoaderExceptions 属性以获取更多信息。
无法加载文件或程序集“Microsoft.Practices.ServiceLocation，Version=1.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。该系统找不到指定的文件。
```

现在注释掉该行

```
LoadSchemaLoaders(); 
```

再次运行它，它就可以工作了。

这是生产代码的简化版本。生产代码实际上是动态加载实现接口的自定义类型。我们一引入 Unity，代码就抛出了异常。但是 Unity 类型无法实现我们的接口！

我不明白如何简单地反映程序集导致核心 Unity 程序集需要另一个依赖项。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T22:49:23.710

Unity 程序集中的一个类型，来自 Microsoft.Practices.ServiceLocation（可能是 IServiceLocator）中定义的接口。

编译器不要求您的应用程序直接引用该 dll……但反映 System.Type 对象将尝试加载 Unity 引用的 dll。

仅当您反映程序集时才会发生这种情况的原因是因为 Unity 在正常情况下可能不会加载引用 Microsoft.Practices.ServiceLocation 的类型。

作为一种解决方法，您可以将 Assembly.GetTypes() 调用包含在 try/catch 块中。

或者，如果您将 Microsoft.Practices.ServiceLocation dll 放在您的应用程序可以找到它的位置，那也应该可以解决问题。

# facebook - 我无法让 Facebook 抓取我发布到博客的链接

> ID：10050029
> 
> 赞同：1
> 
> 时间：2012-04-06T22:36:12.033
> 
> 标签：facebook, image, hyperlink, blogger, scrape

当我在 Facebook 上发布指向我所做的博客文章的链接时，没有一张正确的图片出现。我尝试将 og 标签添加到我的博客代码中的各种内容中，但没有任何效果。帮助！

我尝试了 linter，这就是我得到的。推断属性：应显式提供“og:description”属性，即使可以从其他标签推断出值。推断属性：应显式提供“og:image”属性，即使可以从其他标签推断出值。

我是否必须开始为每个帖子添加 og 标签？

[http://michelleglauser.blogspot.com](http://michelleglauser.blogspot.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T22:54:05.407

当您在 facebook 上发布/共享链接时，该链接有一个 url，facebook 需要为每个 url 提供 og 标签。

例如[http://michelleglauser.blogspot.com](http://michelleglauser.blogspot.com)和[http://michelleglauser.blogspot.com/2012/04/links-to-love-week-14-2012.html](http://michelleglauser.blogspot.com/2012/04/links-to-love-week-14-2012.html)是两个不同的 url，每个都必须有 og 标签如果您想控制 facebook 呈现它们的方式。

我查看了您网站的 html 代码，您似乎确实提供了 og:title、og:type 和 og:url 但是 og:image 和 og:description 出于某种原因被注释掉了，即它们在代码中看起来像这样：

```
<!--
/*
<meta property="og:image" content="http://s191.photobucket.com/albums/z72/MichemilyG/Blog/?action=view&current=Circles-and-Dots-and-Other-Distractions-Michelle-Glauser-Blog-Header-Flat.jpg"/>
<link rel="http://s191.photobucket.com/albums/z72/MichemilyG/Blog/?action=view&current=Circles-and-Dots-and-Other-Distractions-Michelle-Glauser-Blog-Header-Flat.jpg" href="thumbnail_image" / >
<meta property="fb:title" content="Circles and Dots and Other Distractions"/>
<meta property="og:description" content="Michelle Glauser"/>
... 
```

您需要将这些标签与其余的 og 标签放在一起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T22:59:48.647

这是我刚刚在我正在开发的 wordpress 网站上实现的一个示例（blogger 有点不同）。基本上，它会检查您所在的当前页面是否有相关的英雄图像。如果是这样，它将使用该英雄图像。如果不是，则使用徽标图像。这样，当我“喜欢”我的一篇博文（甚至是来自首页，而不是来自博文页面本身）时，facebook 会 ping 该网址并查找相关的 og:image 和 og:description 标签。

```
<?php
    wp_reset_query();
    $fb_image = ui::getImage(290, 121, "align left");
    if(!$fb_image){
        $fb_image = ui::logo();
    }
?>

<meta property="og:site_name" content="<?php ui::title(); ?>"/>
<meta property="og:title" content="<?php the_title(); ?>"/>
<meta property="og:url" content="<?php the_permalink(); ?>"/>
<meta property="og:image" content="<?php echo $fb_image ?>"/> 
```

顺便说一句，这在每一页的“头”部分

# android - Android Accelerometer 设置：我可以让它仅在按下按钮时运行。

> ID：10050035
> 
> 赞同：1
> 
> 时间：2012-04-06T22:37:07.537
> 
> 标签：android, timer, accelerometer

我在我的应用程序中使用加速度计，我想知道是否可以使加速度计仅在用户按下开始按钮后激活一段时间。当用户按下停止按钮时它应该停止。它本质上将用作计步器，这是更大应用程序的一部分。这是用于实现加速度计的代码：-

```
SensorManager sensorManager = (SensorManager)getSystemService(Context.SENSOR_SERVICE);
    int sensorType = Sensor.TYPE_ACCELEROMETER;
    sensorManager.registerListener(sensorListener, sensorManager.getDefaultSensor(sensorType),SensorManager.SENSOR_DELAY_NORMAL); 
```

我有计算步骤的代码：-

```
final SensorEventListener sensorListener = new SensorEventListener()
{

    public void onSensorChanged(SensorEvent event)
    {
            if(event.values[2]<3)
            {
                counter ++;
            }
            else if(event.values[2]>5)
            {
                counter --;
                counter ++;

            }
            sensorData.setText("Steps = "+ counter);

      }

      public void onAccuracyChanged(Sensor sensor, int accuracy){}
      }; 
```

我只是想知道，由于我正在计算 onSensorChanged 方法中的步骤，我如何将其限制为仅按下按钮状态？是否可以添加一个计时器来计算我之前提到的两次按下按钮之间的时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T23:15:08.300

是的当然。

准备经理：

```
mSensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
mAccelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER); 
```

启动加速度计：

```
mSensorManager.registerListener(this, mAccelerometer, 
     SensorManager.SENSOR_DELAY_NORMAL); 
```

停止：

```
mSensorManager.unregisterListener(this); 
```

不要忘记在 onPause() 方法中取消注册监听器。

# django-forms - Django 表单中 Textarea 的字计数器

> ID：10050044
> 
> 赞同：0
> 
> 时间：2012-04-06T22:38:25.837
> 
> 标签：django-forms

我刚从 django 开始。我想将最大字数计数器集成到我的 django 表单的 Textarea 中。我一直在寻找许多来源，但我变得更加困惑。

我真的很感激任何建议。（我知道如何为纯 html 表单的单词计数器编写 javascript）。对我来说主要的困惑是如何向 django 表单中的字段添加类似“onClick”属性的内容。

谢谢一堆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T22:49:27.433

您可以使用 jQuery`.onChange()`来触发单词计数器。正如您可能猜到的那样，这将让您在每次对文本字段进行更改时调用一个函数。

至于单词计数器本身，一个基本概念是

1.  获取文本字段的值
2.  使用空格“”作为分隔符将字符串拆分为数组
3.  计算数组的长度

如果您需要有关代码的帮助，我可以给您一些指示。我会为所有这些使用 jQuery，因为它是我遇到过的最通用的库。

# coldfusion - ColdFusion：变量 CHRIS3 未定义。但页面仍然有效，除了最初的错误消息

> ID：10050055
> 
> 赞同：0
> 
> 时间：2012-04-06T22:39:40.703
> 
> 标签：coldfusion

在查看我的 CF 页面时，我试图找到错误消息的根本原因，但是该页面仍然可以正常运行。我现在必须道歉。这是我使用 CF 的第三天。我真的很感激任何帮助

```
 <cfsetting showDebugOutput="Yes">
<form id="form1" name="form1" method="post" action="">

  <label for="Chris3">Please Select.<br />
  </label>
  <select name="Chris3" id="Chris3">
    <option value="COOKWARE/CUTLERY">COOKWARE/CUTLERY</option>
    <option value="BAKEWARE/ ELECTRICS">BAKEWARE/ ELECTRICS</option>
    <option selected="selected">Please Select one</option>
  </select>
  <input type="submit" name="SUBMIT" id="SUBMIT" value="Submit" />
</form>
<p>
<cfset Chris3 ="Form.Chris3">
  <cffile action="append"
  file="C:\Inetpub\wwwroot\PURGE\WS\DEPTM.txt"
  output="#Chris3#"> 
```

错误信息：

以下信息仅供网站开发人员用于调试目的。

处理请求
变量 CHRIS3 未定义时发生错误。

```
The error occurred in C:\Inetpub\wwwroot\PURGE\WS\PURGE.cfm: line 29

27 :   <cffile action="append"
28 :   file="C:\Inetpub\wwwroot\PURGE\WS\DEPTM.txt"
29 :   output="#Chris3#">
30 : </p>
31 : <p>Below are Departments that have finished reviewing the purge</p>

--------------------------------------------------------------------------------

Resources: 
Check the ColdFusion documentation to verify that you are using the correct syntax. 
Search the Knowledge Base to find a solution to your problem. 

Browser   Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Trident/4.0; .NET CLR 1.1.4322; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; .NET4.0C; .NET4.0E) 
Remote Address   192.168.97.38 
Referrer    
Date/Time   06-Apr-12 03:30 PM 

Stack Trace (click to expand) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T00:44:19.873

看起来有两个问题：

第一个问题是您设置变量的位置`Chris3`。如果您希望它等于传递给表单的值，那么您需要使用

```
 <cfset Chris3 = form.Chris3 /> 
```

..您现在编写它的方式是将文字字符串“form.Chris3”存储为输入的值。

第二个是在提交表单之前该字段不存在。你可以做两件事之一来处理这个问题。像 Scott 建议的那样添加 a `cfparam`，因此始终定义该值：

```
 <cfparam name="form.Chris3" default="" /> 
```

或者，您可以在访问之前添加检查以查看表单是否已提交，将值设置为您的变量：

```
 <cfif StructKeyExists(form,'Chris3')> 
```

如果您使用`<cfparam>`简单地检查字段的长度：

```
 <cfif Len(Trim(form.Chris3))> 
```

至于显示未定义的值，我认为您的代码没有任何问题。我复制并粘贴了它，它在我的机器上运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T00:25:06.670

除非您在页面顶部设置（或参数）值 form.chris3，否则第一次运行该页面时会出现此错误，因为表单范围可能为空。提交表单后，它将按预期工作。

不确定您要做什么，但在执行 CFFILE 之前将 CFFILE 包装在 CFIF 中检查“form.chris3”是否存在（或将“form.chris3”的值设置为“chris3”）。

# iphone - 将 CGcolorRef 转换为 UIColor

> ID：10050059
> 
> 赞同：14
> 
> 时间：2012-04-06T22:40:11.297
> 
> 标签：iphone, objective-c, ios, xcode

我想知道如何转换`CGcolorRef`为`UIColor`？我为自己创建了一个自定义方法，我需要它来使用 UIColor

编辑方法：

```
 - (void)fontColor:(CGColorRef)colors setString(NSSTring *)blah blah blah  {

    coreTextLayer.foregroundColor = color;

    }

[myClass fontColor:[UIColor redColor] setString....]; 
```

正确的方法是使用这样的东西：

```
[UIColor redColor]CGColor]; 
```

但是有什么方法可以只使用 UIColor 吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-06T22:44:42.230

`+ (UIColor *)colorWithCGColor:(CGColorRef)cgColor`不做你需要的？

* * *

跟进：

尝试将您的方法实现为：

```
- (void)setFontColor:(UIColor *)color forString(NSString *)aString  {
    [coreTextLayer setForegroundColor:[color CGColor]];
    ...
} 
```

（调整为更符合 Cocoa 命名约定，并且不使用点语法。;-)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-06T22:46:54.537

你为什么不使用

> *   (UIColor *)initWithCGColor:(CGColorRef)cgColor

# mips - 需要帮助在 MIPS 中实现数组

> ID：10050060
> 
> 赞同：0
> 
> 时间：2012-04-06T22:40:16.320
> 
> 标签：mips

我试图理解 MIPS 中的数组。我知道您需要将堆栈指针向前或向后移动一个单词（增量为 4）。但我不知道如何将这个想法实现到 MIPS 代码中。

```
 j = 0
 x = a[j+k]
 a[j+k] = a[j] 
```

我确定的是将0加载到寄存器中（j = 0），然后我认为您将字加载到基地址$ a0并制作a [j]，然后您将k添加到它之前，然后将该值添加到0（$ a0)。

```
li $t0, 0       
lw $t0 0($a0)
add $t0, $t0, $a2
sw $t0, ($a0) 
```

我们被指派将此代码转换为 MIPS，前一个是它的第一部分。

```
# Register usage
# $a0 = base address of array
# $a1 = n, size of array
# $a2 = k, the shift amount

# j = 0
# x = a[j+k]
# a[j+k] = a[j]
# repeat n-1 times
#   j = (j+k) mod n
#   m = (j+k) mod n
#   y = a[m]
#   a[m] = x
#   x = y
# end repeat 
```

我的问题是如何在 MIPS 中进行 n-1 次循环？那么这是一个条件吗

```
subi $a1 $a1 
```

最后如何找到mod？我相信它是 div 然后是 $HI。这就是我到目前为止所拥有的。

```
add $t1, $t0, $a2    #j+k
div $t1, $a1         #divide (j+k) by n
mfhi $t2             #move rem into t2
move $t2, $t0        #j = (j+k) mod n

add $t1, $t0, $a2    #j+k
div $t1, $a1         #divide (j+k) by n
mfhi $t2             #move rem into t2
move $t2, $t0        #m = (j+k) mod n

sw $t0, 0($t0)
lw $t3, 0($t0) 
```

我相信我自己很困惑。澄清将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T01:40:08.507

```
li $t3, 0       #j = 0
lw $t3, 0($a0)     #load the value of @a0 in to j
add $t3, $t3, $a2  # j = j+k
sw $t3, 4($a0)     # store the new value of j in to $a0

loop:
beq $a1, $zero, return
sub $a1, $a1, 1      #n = n-1
add $t4, $t3, $a2    #j+k
div $t4, $a1         #divide (j+k) by n
mfhi $t5        

move $t5, $t3        #j = (j+k) mod n

 add $t4, $t3, $a2    #j+k
 div $t4, $a1         #divide (j+k) by n
 mfhi $t5             #move rem into t2
 move $t5, $t3        #m = (j+k) mod n
 b loop

return:
sw $t3, 4($a0)
jr $ra
lw $t3, 0($a0) 
```

I saw your code here and after some tinkering. I had the program running but the outputs were wrong and i saw an error i made with the condition and upon fixing it the program no longer returns any out put. I changed the registers.

# ruby-on-rails-3 - 自适应付款中的项目详细信息、销售税和运费的 PayPal 参数

> ID：10050071
> 
> 赞同：0
> 
> 时间：2012-04-06T22:41:20.723
> 
> 标签：ruby-on-rails-3, paypal, activemerchant, paypal-adaptive-payments

我有一个 Rails（3.0，Ruby 1.9.2）应用程序，我正在构建访问者可以从我的用户那里购买东西（付款直接从买家到用户）。我正在尝试使用 PayPal Adaptive Payments 来实现这一点，但是，我不知道我该怎么做：

1.  在我的应用中进行描述（PayPal 中的第一行）= 产品名称。现在，我可以发送付款，但通常描述某人在 PayPal 中购买的商品的第一行显示为收件人的电子邮件，我不知道如何更改
2.  显示与主要金额分开的运费和销售税

我试过了：

1.  [查看 PayPal 关于自适应支付的文档](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APPayAPI)
2.  发布到 PayPal 开发者委员会
3.  尝试 Apigee 看看这是否向我透露了任何信息

这是我当前的代码：

```
 gateway = ActiveMerchant::Billing::PaypalAdaptivePaymentGateway.new( :login => "foo",:password => "bar", :signature => "foobar",:appl_id => "foobar1" )

  ss= gateway.pay amount.to_i, @user.paypal_account,
    :ip => request.remote_ip,
    :sender_email => params[:paypal_email],
    :return_url =>"http://#{current_subdomain}.foobar.com/product/#{params[:product_id]}",
    :cancel_url => request.referer,
    :client_details =>
    {
    :application_id => '60',
    :customer_type => 'user',
    :customer_id => '12',
    :tracking_id => tracking_id,
    :pay_key => '24',
    :ipn_notification_url => "http://foobar.com/paypal_ipn"
    } 
```

该代码用于获取付款信息​​，它主要不会像我想要的那样显示（项目名称/描述显示为收件人，@user.paypal_account - 如果可能的话，我想分解金额显示运费和税费）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T02:18:06.643

Adaptive Payments 在常规结帐页面中不支持此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:25:40.737

这是我的代码（我正在使用 paypal_adaptive gem）

我指定了更多参数，由于您使用的是 ActiveMerchant 的 paypal 类，因此它可能会有所不同：

```
pay_request = PaypalAdaptive::Request.new

server="http://mybaseurl.com"
data = {
  "returnUrl" => "#{server}/sales/summary?sale_id=#{sale_id}", 
  "requestEnvelope" => {"errorLanguage" => "en_US"},
  "currencyCode"=>"USD",  
  "receiverList"=>{"receiver"=>[{"email"=>"#{@sale.seller.email}","amount"=>"item amount"}]},
  "cancelUrl"=>"#{server}/payments/canceled_payment_request?sale_id=#{sale_id}",
  "actionType"=>"PAY",
  "ipnNotificationUrl"=>"#{server}/payments/ipn_notification",
  "feesPayer"=>"EACHRECEIVER",
  "memo"=>"Purchase for item from my company",
  "reverseAllParallelPaymentsOnError"=>"true",
  "trackingID"=>"#{sale_id}",
  "partnerName"=>"Pretty sure this is the top line in paypal"
      }

@pay_response = pay_request.pay(data) 
```

因此，上面的 partnerName 是您可以指定为您的应用的第一行

至于销售税，论坛上有一个很长的帖子......我不确定那个......也许你必须在你的贝宝个人资料中设置它来收取销售税，或者在得到你的总数之前计算正在向买方询问，并在摘要屏幕上向他们展示。[论坛主题](https://www.x.com/developers/paypal/forums/soap/sales-tax)

此外，这里还有更多您可能没有看到的文档，因为他们在 x.com 上组织了一半的文档，然后在 cms.paypal.com 上组织了更多文档...... [https://www.x.com/developers/paypal/documentation -tools/api/pay-api-操作](https://www.x.com/developers/paypal/documentation-tools/api/pay-api-operation)

# sharepoint-2010 - InfoPath 2010 + SP2010：我的设计会起作用吗？

> ID：10050072
> 
> 赞同：0
> 
> 时间：2012-04-06T22:41:22.920
> 
> 标签：sharepoint-2010, infopath2010, sharepoint-list

我正在做一个项目，我是 InfoPath 的新手。

要求是员工任务，其中每个员工必须每月提交主管分配给他们的定期任务的完成报告。我有一个所有任务的主列表（比如 50 个），每个员工都有一个任务模板（50 个中的 15 个，其他可能只有 50 个中的 5 个）。主管希望通过按月过滤全年数据，在单页中查看所有员工任务完成状态（Emp1- 90%，Emp2- 50% 的任务）的提交报告，并且可以打印/查看每个员工的提交报告（可能表单）。

设计：我猜，这个项目可能需要 3 个用于主数据、模板和实际每月数据的列表，以及 1 个用于提交表单的 InfoPath 表单库和一个用于主管视图的自定义视图/表单，以便按月过滤。如果需要，我可以使用 MySQL 数据库。我可以使用 ASP.Net + 数据库来做到这一点，但我正在尝试在 InfoPath 表单和 SP2010 中实现这一点。

我想知道是否可以实现，如果它是可扩展的？我非常感谢您的意见和建议。

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T03:37:24.187

我相信您必须将 Microsoft SQL Server 与 SharePoint 2010 一起使用。您可以将模板存储在默认情况下在站点集合中创建的站点资产或站点页面文件夹中。这些文件夹用于保存文件，而列表通常保存数据。除此之外，是的，听起来您可以实现您的设计。

SharePoint 工作流有一个任务编辑项，允许用户按百分比输入进度，从 0 到已完成。InfoPath 非常适合填写报告/业务表格。

# matlab - 以编程方式将 Simulink 图打印到 SVG

> ID：10050073
> 
> 赞同：1
> 
> 时间：2012-04-06T22:41:24.277
> 
> 标签：matlab, simulink

我可以使用以下命令将 simulink 图打印到 SVG：

```
print -dsvg -sYYYY myfile.svg 
```

其中 YYYY 是我的 simulink 图的名称，但它会将图逆时针旋转 90 度！

有没有办法做到这一点，所以它不会被旋转？

（或者，以编程方式将其顺时针旋转 90 度，但这似乎是一种完全的痛苦，因为我什至无法手动做到这一点。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T01:55:24.540

`orient`在调用之前尝试使用命令`print`：

```
orient('YYYY', 'portrait')
print -dsvg -sYYYY myfile.svg 
```

从逻辑上讲，您会认为将横向指定为方向可以解决问题，但输出仍然逆时针旋转 90 度。将其设置为纵向似乎可行。

# asp-classic - 我的 ASP 经典站点正在呈现代码而不是输出，我该如何解决？

> ID：10050074
> 
> 赞同：0
> 
> 时间：2012-04-06T22:42:16.740
> 
> 标签：asp-classic, hosting

> **可能重复：**
> [在 iis7 上设置经典 asp 站点，站点运行但可以看到服务器标签](https://stackoverflow.com/questions/10007587/setting-up-classic-asp-site-on-iis7-site-runs-but-can-see-server-tags)

我对 HTML、PHP 和 CSS 有一些了解，但我对 ASP 很陌生。

在 Windows 7 上安装 IIS 后，我编写了一些 ASP 代码`<% =time %>`并将文件保存`test1.asp`在一个新文件夹中。我打开浏览器并输入`http://localhost/MyWeb/test1.asp`，我可以成功查看此网页结果。

当我将相同的文件放入托管网站并键入`http://mywebsite.ca/test1.asp`时，网页浏览器会显示源代码而不是结果。

我做错了什么？也许我不明白这里的概念。

请任何人都可以向我解释如何在托管网站中正确使用 ASP 文件。

在此先感谢，迈克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T22:50:43.990

您必须设置扩展映射并确保安装并启用了 ASP 经典模块。这是一篇博文（[在 IIS 7 上运行经典 ASP](http://www.alexthissen.nl/blogs/main/archive/2008/02/18/running-classic-asp-on-iis-7.aspx)），它详细描述了要执行的操作。

此外，您需要确保 Web 主机可以支持 Classic ASP。这是一项非常古老的技术，您可能需要将其移植到 asp.net（这通常很容易做到）。

事实上，您应该确保 Web 主机甚至完全运行 IIS。

# python - 如何将数组转换为 char，以便我可以从 c 中的函数返回这个 char 值。然后，在 Python 中调用它。

> ID：10050078
> 
> 赞同：0
> 
> 时间：2012-04-06T22:42:53.370
> 
> 标签：python, c, hash, ctypes

我想做一个函数，可以返回一个字符串值。但是我在几天内偶然发现了这个问题，无法单独解决这个错误。所以我需要你的建议和提示。我正在使用 Hash jh sha3 2010 候选函数。这是代码：

```
anyway this an update code, but I still dont get expected value to get this function called from Python Language. the returned value is "9976864". Anymore helps?

#include <stdio.h>
#include "jh_ansi_opt32.h"
#include <time.h>
#include <stdlib.h>

char* jh(char *input)
{
BitSequence  output[512];
char *iData; 
char* msg;

int dInt;

msg= (char*)malloc(sizeof(output));
if(!msg){
    return 1;
}

memset(output,0,sizeof(output));

iData = input;
printf("[+] data is %s\n", iData);
dInt = strlen(iData);
BitSequence data[dInt];

memset(data,0, sizeof(data));
strncpy(data,iData,dInt);
DataLength dLen =dInt;
HashJh(512, data,dLen,output);
//printf("\n[+] resulted hash is ");

int k;
for (k=0;k<sizeof(output);k++){
        msg[k]= output[k];
}
if (msg) return msg;
free(msg);
return 0;
} 
```

而蟒蛇是：

```
from ctypes import *
d = CDLL('jh.dll')
a=d.jh('this is message by hash jh function')
print a 
```

这是一个更新代码，但仍然没有得到预期值。当我尝试从 python 调用时，返回的值是整数“9968784”。任何帮助将不胜感激，谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T22:45:02.830

> ```
> if (!(BitSequence *)malloc(sizeof(output)))
>     exit(EXIT_FAILURE); 
> ```

那没有任何作用。其次，您正在递增`msg`然后**返回**它。第三，你似乎从来没有取消引用`msg`，你只是在增加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T01:39:01.050

关于 Python 中的返回值问题，`ctypes`默认期望一个整数返回值。告诉它返回类型（[docs](http://docs.python.org/library/ctypes.html#return-types)）：

```
>>> from ctypes import *
>>> d = CDLL('jh.dll')
>>> d.jh('abc')
39727048
>>> d.jh.restype=c_char_p
>>> dll.jh('abc')
'abc' 
```

我伪造了你的 DLL，只返回了一个字符串。你得到的数字是返回的指针地址的整数值。

请注意，正如其他人提到的那样，您将泄漏内存，返回一个 malloc 的指针，而无法释放它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T22:47:02.223

摆脱`malloc`代码，您的`output`,`data`和`dLen`数组/变量将在堆栈上分配。

`msg`是一个`char*`，不是一个`char`。它也是未初始化的。

如果你想返回一个字符串，你需要分配`malloc`它并以某种方式填充它。为您的字符串返回一个指向该指针的指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T22:50:06.860

这要么丢失 malloc 返回的指针，要么仅在没有更多内存时才有效：

```
if (!(BitSequence *)malloc(sizeof(output)))
        exit(EXIT_FAILURE); 
```

然后这也是一样的：

```
if ((BitSequence *) malloc(sizeof(data)) == NULL)
    exit(EXIT_FAILURE); 
```

那是你需要的吗？我通常会说这是一个错误。

# actionscript-3 - 将事件侦听器添加到影片剪辑内的影片剪辑

> ID：10050083
> 
> 赞同：0
> 
> 时间：2012-04-06T22:43:49.333
> 
> 标签：actionscript-3, movieclip, addeventlistener

我这里有 4 个在主舞台上的影片剪辑，其中一个影片剪辑中有 5 个影片剪辑

`btn_mc5`在我添加了事件侦听`btn_mc9`器的内部`content_mc`，但他们没有做任何事情。此外，他们正在生成一条从“”行开始的错误消息`content_mc.btn_mc5.addEventListener(MouseEvent.MOUSE_DOWN, btn5up);`：

> TypeError：错误＃1010：术语未定义且没有属性。在 Untitled_fla::MainTimeline/frame2()

```
import flash.events.MouseEvent;

stop();

btn_mc1.gotoAndStop(2);
btn_mc2.stop();
btn_mc3.stop();
btn_mc4.stop();

content_mc.stop();

btn_mc1.addEventListener(MouseEvent.MOUSE_DOWN, btn1up);
btn_mc2.addEventListener(MouseEvent.MOUSE_DOWN, btn2up);
btn_mc3.addEventListener(MouseEvent.MOUSE_DOWN, btn3up);
btn_mc4.addEventListener(MouseEvent.MOUSE_DOWN, btn4up);

content_mc.btn_mc5.addEventListener(MouseEvent.MOUSE_DOWN, btn5up);
content_mc.btn_mc6.addEventListener(MouseEvent.MOUSE_DOWN, btn6up);
content_mc.btn_mc7.addEventListener(MouseEvent.MOUSE_DOWN, btn7up);
content_mc.btn_mc8.addEventListener(MouseEvent.MOUSE_DOWN, btn8up);
content_mc.btn_mc9.addEventListener(MouseEvent.MOUSE_DOWN, btn9up);

function btn1up(event:MouseEvent):void{
    content_mc.gotoAndStop(1);
    reset();
    btn_mc1.gotoAndStop(2);
}
function btn2up(event:MouseEvent):void{
    content_mc.gotoAndStop(2);
    reset();
    btn_mc2.gotoAndStop(2);
}
function btn3up(event:MouseEvent):void{
    content_mc.gotoAndStop(3);
    reset();
    btn_mc3.gotoAndStop(2);
}
function btn4up(event:MouseEvent):void{
    content_mc.gotoAndStop(4);
    reset();
    btn_mc4.gotoAndStop(4);
}
function btn5up(event:MouseEvent):void{
    content_mc.gotoAndStop(1);
    content_mc.btn_mc5.gotoAndStop(1);
}
function btn6up(event:MouseEvent):void{
    content_mc.gotoAndStop(6);

}
function btn7up(event:MouseEvent):void{
    content_mc.gotoAndStop(7);
}
function btn8up(event:MouseEvent):void{
    content_mc.gotoAndStop(8);
}
function btn9up(event:MouseEvent):void{
    content_mc.gotoAndStop(9);
}

function reset():void{
    for(var i = 1; i<= 4; i++){
        var btn_name = getChildByName("btn_mc"+i);
        btn_name.gotoAndStop(1);
        }
} 
```

# ios - 如何在 Xcode 4.2 中一次链接多个对象？

> ID：10050092
> 
> 赞同：0
> 
> 时间：2012-04-06T22:45:11.573
> 
> 标签：ios, xcode, interface-builder, xcode4.2

我可能在这里缺少基础知识...有没有办法使用 Xcode 4.2 中的 Interface Builder 一次将多个对象链接到一个方法？

我在 UIView 中设置了大量的 UIButton。他们都只调用一种方法（比方说`- (IBAction)buttonPushed:(UIButton *)aButton`），该方法应该根据发件人执行不同的操作。我想不出一种方法一次将它们全部与我的方法联系起来。任何建议将不胜感激...

注意我在 Snow Leopard 上使用 Xcode 4.2，没有情节提要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T22:58:13.810

这应该只是工作。也就是说，你

1.  定义您的 IBAction
2.  您将“内部修饰”（或其他所需的操作）附加到每个按钮的方法
3.  您在每个按钮上设置标签值
4.  在您的 IBAction 中，您从发件人那里获取标签并采取相应措施

    ```
    - (IBAction)buttonPressed:(id)sender;
    {
        NSInteger tag = [sender tag];
        // switch statement or some other check against tag value
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T23:36:33.470

for 循环可能是个好主意。保留按钮的 NSArray 并执行以下操作：

```
for (int i = 0; i < [myArray count];  i++) {
    [(UIButton*)[myArray objectAtIndex:i] addTarget:self action:@selector(buttonPushed:) forControlEvents:UIControlEventTouchUpInside];
    [(UIButton*)[myArray objectAtIndex:i]setTag:i];
} 
```

（来自我的 iPhone，这是我能做的最好的。它有点粗糙，可能无法编译，但你明白了要点）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T06:58:11.177

在 Xcode 4.2 中使用 IB 一次链接多个对象似乎是不可能的。

正如 Phillip Mills 首次建议的那样，我的代码中出现了一个 for 循环（+1 对他的评论）。

这是我的代码：

```
for (UIButton *aButton in [self.view subviews]) {
    [aButton addTarget:self
                action:@selector(buttonPushed:)
      forControlEvents:UIControlEventTouchUpInside];
} 
```

谢谢大家的帮助！！！

# sql - 什么是 hive 相当于“选择 ... 进入 outfile”？

> ID：10050093
> 
> 赞同：2
> 
> 时间：2012-04-06T22:45:20.560
> 
> 标签：sql, hive

我将如何在 Hive 中执行此操作？

```
select * from mytable into outfile "/tmp/foo" 
```

或此的任何变体；我只需要能够将这些数据保存到磁盘。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T01:29:24.870

```
INSERT OVERWRITE LOCAL DIRECTORY 'someDir' SELECT ... 
```

# c++ - C++ 编程：导航到用户文件以保存我的每个用户的应用程序数据

> ID：10050098
> 
> 赞同：1
> 
> 时间：2012-04-06T22:45:46.357
> 
> 标签：c++, windows, directory, subdirectory

我正在尝试访问 C:\Users\...

但是，每台计算机都有不同的用户名。我知道有一种方法可以通过代码导航来做到这一点，但我无法终生找到这个特定问题的答案。

我应该放在什么地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T23:03:04.273

Windows 有一个称为特殊文件夹名称的功能。例如，您可以使用`%windir%`来定位 windows 目录。如我所见，您需要`%USERPROFILE%`. [您可以在Wikipedia](http://en.wikipedia.org/wiki/Special_folder)上找到更多相关信息。

# c - 从函数中打开文件

> ID：10050101
> 
> 赞同：-2
> 
> 时间：2012-04-06T22:46:16.283
> 
> 标签：c, function, file-io

我正在做一份作业，我想将 FILE * 作为参数发送到函数中，因为我必须以相同的方式使用一些“风味文本”打开 3 个文件。我让它像这样正常工作：

```
enum {IN, STAT, REPRINT} FNAMES;
#define FNAME_MAX 256

int main(void)
{
  FILE *in, *stat, *reprint;
  char fnames[3][FNAME_MAX]; // store actual file names input by user
  char format[11];           // format identifier used in scanf for file names

  in = stat = reprint = NULL; // TODO: Check necessity

  buildFormat(format); // this translates FNAME_MAX into the string "%256s[^\n]"

  // TODO: Find out why this cannot be put into a function!
  // open the input file
  while (in == NULL)
  {
    // get input file name
    getFileName(format, fnames[IN]); // simply prompts for a file name/path

    // open the input file for reading
    in = fopen(fnames[IN], "r");

    // make sure it opened
    if (in == NULL)
      printf("%s did not open, please check spelling/path.\n\n", fnames[IN]);
    else
      printf("%s was opened successfully.\n\n", fnames[IN]);
  }
  return 0;
} 
```

这是行不通的：

```
void openFile(FILE *in, char *format, char *fname, char *openFor)
{
  // TODO: Find out why this cannot be put into a function!
  // open the input file
  while (in == NULL)
  {
    // get input file name
    getFileName(format, fname); // simply prompts for a file name/path

    // open the input file for reading
    in = fopen(fname, openFor); 

    // make sure it opened
    if (in == NULL)
      printf("%s did not open, please check spelling/path.\n\n", fname);
    else
      printf("%s was opened successfully.\n\n", fname);
  }
} 
```

如果我将文件读取操作放在函数中它可以正常工作，但是如果我回到 main 并尝试使用我发送的文件指针它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T22:50:16.200

你想`openFile`返回一个`FILE *`. 摆脱`FILE *in`您的输入参数。声明`FILE *in`为局部变量并在完成后返回其值。

您可能还想在`fname`本地声明，除非您需要在`openFile`返回后使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T22:56:43.253

C 函数不会修改它们的参数，所以如果你真的希望函数修改 FILE * 你可以添加一个[间接](http://en.wikipedia.org/wiki/Indirection)级别，如 openFile(FILE **in... 并用 &in 调用它。丑陋，是的。更常见的做法是正如其他答案所说，返回一个指针......

在确保我的易出错的记忆电路使用正确的词时发现了一句幽默的引语，“计算机科学中的所有问题都可以通过另一个间接层次来解决”——大卫·惠勒

# c# - 使用带有子集合的视图模型提交表单

> ID：10050103
> 
> 赞同：2
> 
> 时间：2012-04-06T22:46:51.253
> 
> 标签：c#, asp.net, asp.net-mvc, c#-4.0

我想知道在 MVC 3 中是否可以执行以下操作

我基本上有一个带有子集合的 ViewModel，我想使用 Ajax 表单发布它：

模型

```
 [Serializable]
    public class Customer
    {
        public string FirstName { get; set; }
        public string LastName { get; set; }

        public int CurrentSalesRep { get; set; }

        public List<SelectListItem> SalesReps { get; set; }
    }

    [Serializable]
    public class CustomerVM
    {
        public List<Customer> Customers { get; set; }
    } 
```

销售控制器

```
 [HttpPost]
        public ActionResult Customers(CustomerVM customer)
        {
            return PartialView(customer);
        } 
```

看法

```
@model  DropdownSave.Models.CustomerVM

<div>
    @{
        using(Ajax.BeginForm("Customers", "Sales", new AjaxOptions { UpdateTargetId = "gridArea",HttpMethod="Post" })){
        <div id="gridArea">
            <table>
            @foreach (var m in Model.Customers)
            {
                <tr>
                    <td>
                        @Html.TextBoxFor(a => m.FirstName)
                    </td>
                    <td>
                        @Html.TextBoxFor(a => m.LastName)
                    </td>
                </tr>
            }
            </table>                   
            <input type="submit" value="Save" /> 

        </div>
        }
     }
</div> 
```

基本上我可以将 CustomerVm 的实例发布到控制器，但子集合为空。我正在尝试的甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T23:08:57.423

自己解决了：

看起来视图必须更新为以下内容

```
<div>
    @{
        using(Ajax.BeginForm("Customers", "Sales", new AjaxOptions { UpdateTargetId = "gridArea",HttpMethod="Post" })){
        <div id="gridArea">
            <table>
            @for (int i = 0; i < Model.Customers.Count; i++)
            {
                <tr>
                    <td>
                        @Html.LabelFor(m => m.Customers[i].FirstName)
                    </td>
                    <td>
                        @Html.LabelFor(m => m.Customers[i].LastName)
                    </td>
                    <td>
                        @Html.HiddenFor(m => m.Customers[i].CurrentSalesRep)
                    </td>
                    <td>
                        @Html.DropDownListFor(m => m.Customers[i].CurrentSalesRep,Model.Customers[i].SalesReps)
                    </td>
                </tr>
            }
            </table>                   
            <input type="submit" value="Save" /> 

        </div>
        }
     }
</div> 
```

我还添加了在下拉列表中捕获所选项目的功能

# objective-c - NSWindow 不会显示在 OSStatus 事件处理程序方法中

> ID：10050106
> 
> 赞同：0
> 
> 时间：2012-04-06T22:46:55.147
> 
> 标签：objective-c, macos, cocoa

我已经坚持了很长一段时间，我已经在互联网上广泛搜索了一个解决方案...... IB 中的连接设置正确，我可以像这样在 awakeFromNib 中打开我的 NSWindow：

```
NSApp activateIgnoringOtherApps:YES];
[popUp makeKeyAndOrderFront:nil]; 
```

没有问题。我还可以从 awakeFromNib 调用一个方法，并使用该方法中相同的两行打开窗口。

此方法以及从中调用的任何方法中都会出现问题 - NSWindow 将无法打开：

```
OSStatus myHotKeyHandler(EventHandlerCallRef nextHandler, EventRef anEvent, void *userData)
{ 
    GeronimoAppDelegate *self = [[GeronimoAppDelegate alloc] init];
    [self.popUp makeKeyAndOrderFront:nil];

    GeronimoAppDelegate *appDel = (GeronimoAppDelegate *)[NSApp delegate];
    [appDel.popUp makeKeyAndOrderFront:nil];

    //Run the timer method
    [self runBackTimer];
    return noErr; 
} 
```

如您所见，我尝试了两种打开窗口的方法，即通过引用 appdelegate 来访问 NSWindow 对象，但都没有奏效。我需要能够从此方法或从中调用的方法打开窗口。我可能错误地引用了该对象？（所有这些方法都在同一个文件 - GeronimoAppDelegate.m 中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T06:07:11.593

热键句柄函数是一个 C 函数而不是 Objective-C 实例方法，它没有“自我”对象的概念。您已尝试通过声明一个局部变量来解决此问题`self`，但它没有指向任何感兴趣的对象。相反，您创建了一个新的和不同的对象供它指向，该对象未连接到应用程序中的其余对象，并且其`popUp`属性未连接到任何东西（因为它不是来自 NIB ）。

引用应用程序委托应该有效。您确定`delegate`应用程序对象的出口连接到在 NIB 中实例化的应用程序委托对象吗？您可以稍后通过调用`-setDelegate:`或分配其`.delegate`属性来断开它或重新连接它吗？

通常，要将 C 风格的回调与面向对象的程序集成，您需要安排将对象指针传递给 C 函数。幸运的是，热键回调签名通过`userData`参数适应了这样的设计。注册回调时，应将对象指针指定为在调用回调时应传递给回调的用户数据。在回调中，您声明一个适当类型的对象指针变量并分配`userData`给它（在 ARC 下，这需要 __bridge 强制转换）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T00:23:28.480

它在其他地方打开但在其他地方没有打开的事实表明它`awakeFromNib`实际上并没有连接，但是窗口被标记为“在启动时打开”，所以它恰好可以工作。确保`popUp`实际上不是`nil`。

# android - Android AutocompleteTextView 使用 ArrayAdapter 和 Filter

> ID：10050108
> 
> 赞同：25
> 
> 时间：2012-04-06T22:47:12.353
> 
> 标签：android, autocomplete, android-arrayadapter, autocompletetextview

## 背景资料

我目前正在编写的应用程序涉及地点。创建地点的主要方法是输入地址。提供一种方便的方式来做到这一点对于用户体验来说非常重要。

## 当前解决方案

在调查了这个问题一段时间后，我得出的结论是，最好的方法是基于当前位置和用户输入（如在 Google Map 应用程序中）自动完成的文本区域。由于很遗憾 Google Map API 没有提供此功能，因此我必须自己实现它。

## 当前实施

为了获得地址建议，我使用[Geocoder](http://developer.android.com/reference/android/location/Geocoder.html)。这些建议由自定义[ArrayAdaptor](http://developer.android.com/reference/android/widget/ArrayAdapter.html)通过自定义[Filter提供给](http://developer.android.com/reference/android/widget/Filter.html)[AutoCompleteTextView](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html)。

**ArrayAdapter（一些代码已被删除）**

```
public class AddressAutoCompleteAdapter extends ArrayAdapter<Address> {

@Inject private LayoutInflater layoutInflater;

private ArrayList<Address> suggested;
private ArrayList<Address> lastSuggested;
private String lastInput = null;
private AddressLoader addrLoader;

public AddressAutoCompleteAdapter(Activity activity, 
        AddressLoaderFactory addrLoaderFact,
        int maxSuggestionsCount) {
    super(activity,R.layout.autocomplete_address_item);
    suggested = new ArrayList<Address>();
    lastSuggested = new ArrayList<Address>();
    addrLoader = addrLoaderFact.create(10);
}

...

@Override
public Filter getFilter() {
    Filter myFilter = new Filter() {

        ...

        @SuppressWarnings("unchecked")
        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
            Log.d("MyPlaces","performFiltring call");
            FilterResults filterResults = new FilterResults();
            boolean debug = false;
            if(constraint != null) {
                // Load address
                try {
                    suggested = addrLoader.load(constraint.toString()); 
                }
                catch(IOException e) {
                    e.printStackTrace();
                    Log.d("MyPlaces","No data conection avilable");
                    /* ToDo : put something useful here */
                }
                // If the address loader returns some results
                if (suggested.size() > 0) {
                    filterResults.values = suggested;
                    filterResults.count = suggested.size();
                // If there are no result with the given input we check last input and result.
                // If the new input is more accurate than the previous, display result for the
                // previous one.
                } else if (constraint.toString().contains(lastInput)) {
                    debug = true;
                    Log.d("MyPlaces","Keep last suggestion : " + lastSuggested.get(0).toString());
                    filterResults.values = lastSuggested;
                    filterResults.count = lastSuggested.size();
                } else {
                    filterResults.values = new ArrayList<Address>();
                    filterResults.count = 0;
                }

                if ( filterResults.count > 0) {
                    lastSuggested = (ArrayList<Address>) filterResults.values;
                }
                lastInput = constraint.toString();
            }
            if (debug) {
                Log.d("MyPlaces","filter result count :" + filterResults.count);
            }
            return filterResults;
        }

        @Override
        protected void publishResults(CharSequence contraint, FilterResults results) {
            AddressAutoCompleteAdapter.this.notifyDataSetChanged();
        }
    };
    return myFilter;
}

... 
```

**AddressLoader（一些代码已被删除）**

```
public class GeocoderAddressLoader implements AddressLoader {

private Application app;
private int maxSuggestionsCount;
private LocationManager locationManager;

@Inject
public GeocoderAddressLoader(
        Application app,
        LocationManager locationManager,
        @Assisted int maxSuggestionsCount){
    this.maxSuggestionsCount = maxSuggestionsCount;
    this.app = app;
    this.locationManager = locationManager;
}

/**
 * Take a string representing an address or a place and return a list of corresponding
 * addresses
 * @param addrString A String representing an address or place
 * @return List of Address corresponding to the given address description
 * @throws IOException If Geocoder API cannot be called
 */
public ArrayList<Address> load(String addrString) throws IOException {
    //Try to filter with the current location
    Location current = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
    Geocoder geocoder = new Geocoder(app,Locale.getDefault());
    ArrayList<Address> local = new ArrayList<Address>();
    if (current != null) {
        local = (ArrayList<Address>) geocoder.getFromLocationName(
                addrString,
                maxSuggestionsCount,
                current.getLatitude()-0.1,
                current.getLongitude()-0.1,
                current.getLatitude()+0.1,
                current.getLongitude()+0.1);
    }
    if (local.size() < maxSuggestionsCount) {
        ArrayList<Address> global = (ArrayList<Address>) geocoder.getFromLocationName(
                addrString, maxSuggestionsCount - local.size());
        for (Address globalAddr : global) {
            if (!containsAddress(local,globalAddr))
                local.add(globalAddr);
        }
    }
    return local;
}

... 
```

## 问题

这个实现确实有效，但并不完美。

AddressLoader 有一些输入的奇怪行为。
例如如果用户想输入这个地址

```
10 rue Guy Ropartz 54600 Villers-les-Nancy 
```

当他进入时：

```
10 rue Guy 
```

有一些建议，但不是所需的地址。
如果在达到此输入时他继续输入文本：

```
10 rue Guy Ro 
```

建议消失。当输入时，最终出现所需的地址

```
10 rue Guy Ropart 
```

我认为这对用户来说是令人不安的。奇怪的是没有*“10 rue Guy Ro”*的建议，而有*“10 rue Guy”*和*“10 rue Guy Ropart”*的建议......

### 一种可能的解决方法

我想一个可能的解决方法来解决这个问题并尝试实施它。这个想法是如果在输入更长的地址后没有 AdressLoader 建议的地址，则保留先前的建议。在我们的示例中，当输入为*"10 rue Guy Ro"*时，保留*"10 rue Guy"*建议。

 *不幸的是，我的代码不起作用。当我处于这种情况时，代码的大部分内容已达到：

```
else if (constraint.toString().contains(lastInput)) {
                debug = true;
                Log.d("MyPlaces","Keep last suggestion : " + lastSuggested.get(0).toString());
                filterResults.values = lastSuggested;
                filterResults.count = lastSuggested.size();
            } 
```

**并且performFiltering**返回的 FilterResult充满了好的建议，但它没有出现在视图中。也许我错过了**publishResults**中的一些东西......

## 问题

*   地理编码器有时会出现奇怪的行为，也许有更好的方法来获取地址建议？
*   你能建议我一个比我描述的更好的解决方法吗？
*   实施我的解决方法有什么问题？

**更新**
出于兼容性考虑，我基于[Google Geocode Http API](https://developers.google.com/maps/documentation/geocoding/)实现了一个新的 AddressLoader （因为默认的 Android 地理编码器服务并非在所有设备上都可用）。它重现了完全相同的奇怪行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T06:44:05.540

Geocoder api 的设计目的不是为像 "10 rue Guy Ro" 这样的部分字符串提供建议。你可以在谷歌地图上试试这个，输入“10 rue Guy Ro”，留个空格。你不会得到任何建议（谷歌地图使用地理编码器），但是当你删除空间时，你会得到关于部分字符串的建议（谷歌地图使用私有 API）。您可以像使用 Google 地图一样使用 Geocoder api，仅在用户输入字符串中的空格后获取建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T19:11:09.880

我认为您的问题是您将 lastSuggested 设置为建议（通过 filterResults.values），然后在下一次通过时，您正在更新建议-> lastSuggested 将设置为与建议的值相同的值，因为 Java 通过引用传递变量，除非原语.

所以，而不是

> if (filterResults.count > 0) { lastSuggested = (ArrayList) filterResults.values; }

你应该试试

```
if ( filterResults.count > 0) {
    lastSuggested.clear();
    ArrayList<Address> tempList = (ArrayList<Address>) filterResults.values;
    int i = 0;
    while (i < tempList.size()){
        lastSuggested.add(tempList.get(i));
        i += 1;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T07:48:02.627

尝试更改这部分代码：

```
if ( filterResults.count > 0) {
    lastSuggested = (ArrayList<Address>) filterResults.values;
}
lastInput = constraint.toString(); 
```

进入这个：

```
if ( filterResults.count > 0) {
    lastSuggested = (ArrayList<Address>) filterResults.values;
    lastInput = constraint.toString();
} 
```*

# ruby-on-rails-3 - 在 Rails 中使用 Google Maps API 的设计模式

> ID：10050109
> 
> 赞同：0
> 
> 时间：2012-04-06T22:47:25.123
> 
> 标签：ruby-on-rails-3, google-maps-api-3

我的 rails 3.2.2 应用程序中有地址字段，包括 @address.address1、@address.city、@address.state 和 @address.zip。查看谷歌地图 API：

```
<img src="https://maps.googleapis.com/maps/api/staticmap?center=[SOME ADDRESS]&zoom=14&size=512x512&sensor=false" /> 
```

我试图找出组装我的地址字段并插入上面的 URL 的最佳策略，最终进入我的 erb 文件。

例如，最好的方法就是使用

```
 <%= image_tag "https://maps.googleapis.com/maps/api/staticmap?center=[SOME ADDRESS]&zoom=14&size=512x512&sensor=false" %> 
```

如果是这样，我怎样才能将字段附加到标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T05:00:15.047

将地址加入一个字符串：

```
address = [@address.address1, @address.city, @address.state, @address.zip].join(", ") 
```

对要包含在 URL 中的字符串进行编码：

```
require 'uri'
address = URI.escape(address) 
```

创建图像标签：

```
<%= image_tag "https://maps.googleapis.com/maps/api/staticmap?center=#{address}&zoom=14&size=512x512&sensor=false" %> 
```

# c# - 在 C# 中打开文件时弹出 USB

> ID：10050110
> 
> 赞同：1
> 
> 时间：2012-04-06T22:47:55.270
> 
> 标签：c#, winapi, usb, native-code

我们有一个程序可以检查并弹出 USB 设备。除了文件打开时，弹出效果很好。我们正在尝试找到一种方法来弹出 USB 设备，即使文件已打开，知道任何更改都不会被保存。在我们的场景中，变化不应该是一个因素。是否有任何标志可以让您覆盖防止设备在文件正在使用时被弹出的安全弹出？我没有成功找到以下调用的标志：

```
NativeCode.CM_Request_Device_Eject_NoUi(this.DeviceInstanceHandle, IntPtr.Zero, null, 0, 0); 
```

如果有另一种要求更少而要求更高的替代方法，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T15:42:50.463

请参阅[如何准备 USB 驱动器以进行安全移除](http://www.codeproject.com/Articles/13839/How-to-Prepare-a-USB-Drive-for-Safe-Removal)

另一种方法是检查在 USB 驱动器上锁定文件的进程并要求用户关闭它或自己关闭它。

# matlab - 用流函数绘制流线

> ID：10050112
> 
> 赞同：0
> 
> 时间：2012-04-06T22:48:12.837
> 
> 标签：matlab, contour

我正在尝试使用流函数绘制流线：

```
psi = Y.*(F.*M.*cosh((1 + phi.*cos(2.*pi.*X)).*M)+ (1 + F.*M.^2*beta).*sinh((1 + phi.*cos(2.*pi.*X)).*M))-(F + (1 + phi.*cos(2.*pi.*X))).*sinh(M.*Y)/(1 + phi.*cos(2.*pi.*X)).*M.*cosh((1 + phi.*cos(2.*pi.*X)).*M)+ (-1 + (1 + phi.*cos(2.*pi.*X)).*M.^2.*beta).*sinh((1 + phi.*cos(2.*pi.*X)).*M )+ (alpha.*((F + (1 + phi.*cos(2.*pi.*X))).*Y.*cosh(2.*(1 + phi.*cos(2.*pi.*X)).*M) + Y.*(-1 + 2.*(1 + phi.*cos(2.*pi.*X)).^2.*M.^2- 2.*M.*Y.*cosh(M.*Y).*((1 + phi.*cos(2.*pi.*X)).*M.*cosh((1 + phi.*cos(2.*pi.*X)).*M)+ (-1 + (1 + phi.*cos(2.*pi.*X)).*M.^2.*beta).*sinh((1 + phi.*cos(2.*pi.*X)).*M))- 2.*(1 + phi.*cos(2.*pi.*X)).*M.*sinh(2.*(1 + phi.*cos(2.*pi.*X)).*M) + 2.*((1 + phi.*cos(2.*pi.*X)).*M.*(Y + (1 + phi.*cos(2.*pi.*X)).^2.*M.^2.*beta).*cosh((1 + phi.*cos(2.*pi.*X)).*M) + (-Y + (1 + phi.*cos(2.*pi.*X)).*M.*2.*((1 + phi.*cos(2.*pi.*X)).^2 - (1 + phi.*cos(2.*pi.*X)).*beta + Y.*beta)).*sinh((1 + phi.*cos(2.*pi.*X).*M)).*sinh(M.*Y)))./8.*((1 + phi.*cos(2.*pi.*X)).*M.*cosh((1 + phi.*cos(2.*pi.*X)).*M) + (-1 + (1 + phi.*cos(2.*pi.*X)).*M.^2.* beta).*sinh((1 + phi.*cos(2.*pi.*X)).*M)).^2)); 
```

我写了一个代码：

```
M = 0;
phi = 0.4;
beta = 0.0;
theta = 0.65;
F = theta - 1;
alpha = 0.0;

[X,Y]= meshgrid(linspace(-0.5,0.5),linspace(0,1.5));
Z = Y.*(F.*M.*cosh((1 + phi.*cos(2.*pi.*X)).*M)+ (1 + F.*M.^2*beta).*sinh((1 + phi.*cos(2.*pi.*X)).*M))-(F + (1 + phi.*cos(2.*pi.*X))).*sinh(M.*Y)/(1 + phi.*cos(2.*pi.*X)).*M.*cosh((1 + phi.*cos(2.*pi.*X)).*M)+ (-1 + (1 + phi.*cos(2.*pi.*X)).*M.^2.*beta).*sinh((1 + phi.*cos(2.*pi.*X)).*M )+ (alpha.*((F + (1 + phi.*cos(2.*pi.*X))).*Y.*cosh(2.*(1 + phi.*cos(2.*pi.*X)).*M) + Y.*(-1 + 2.*(1 + phi.*cos(2.*pi.*X)).^2.*M.^2- 2.*M.*Y.*cosh(M.*Y).*((1 + phi.*cos(2.*pi.*X)).*M.*cosh((1 + phi.*cos(2.*pi.*X)).*M)+ (-1 + (1 + phi.*cos(2.*pi.*X)).*M.^2.*beta).*sinh((1 + phi.*cos(2.*pi.*X)).*M))- 2.*(1 + phi.*cos(2.*pi.*X)).*M.*sinh(2.*(1 + phi.*cos(2.*pi.*X)).*M) + 2.*((1 + phi.*cos(2.*pi.*X)).*M.*(Y + (1 + phi.*cos(2.*pi.*X)).^2.*M.^2.*beta).*cosh((1 + phi.*cos(2.*pi.*X)).*M) + (-Y + (1 + phi.*cos(2.*pi.*X)).*M.*2.*((1 + phi.*cos(2.*pi.*X)).^2 - (1 + phi.*cos(2.*pi.*X)).*beta + Y.*beta)).*sinh((1 + phi.*cos(2.*pi.*X).*M)).*sinh(M.*Y)))./8.*((1 + phi.*cos(2.*pi.*X)).*M.*cosh((1 + phi.*cos(2.*pi.*X)).*M) + (-1 + (1 + phi.*cos(2.*pi.*X)).*M.^2.* beta).*sinh((1 + phi.*cos(2.*pi.*X)).*M)).^2));
contour(X,Y,Z,100)

[C,h] = contour(X,Y,Z);
set(h,'ShowText','on','TextStep',get(h,'LevelStep')*2)
colormap cool 
```

我正进入（状态

```
Warning: Matrix is singular to working precision.
Warning: Contour not rendered for non-finite ZData
> In contour>parseargs at 192
  In contour at 69
Warning: Contour not rendered for non-finite ZData
> In contour>parseargs at 192
  In contour at 69 
```

问题是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T01:00:04.537

你正在划分一个奇异矩阵：

(F + (1 + phi.*cos(2.*pi.*X))).*sinh(M.*Y)/ **(1 + phi.*cos(2.*pi.*X))**

我认为您在斜线之前缺少一个点：

```
M = 1;
phi = 0.4;
beta = 0.0;
theta = 0.65;
F = theta - 1;
alpha = 0.0;
[X,Y]= meshgrid(linspace(-0.5,0.5),linspace(0,1.5));
Z = Y.*(F.*M.*cosh((1 + phi.*cos(2.*pi.*X)).*M)+ (1 + F.*M.^2*beta).*sinh((1 + phi.*cos(2.*pi.*X)).*M))-(F + (1 + phi.*cos(2.*pi.*X))).*sinh(M.*Y)./(1 + phi.*cos(2.*pi.*X)).*M.*cosh((1 + phi.*cos(2.*pi.*X)).*M)+ (-1 + (1 + phi.*cos(2.*pi.*X)).*M.^2.*beta).*sinh((1 + phi.*cos(2.*pi.*X)).*M )+ (alpha.*((F + (1 + phi.*cos(2.*pi.*X))).*Y.*cosh(2.*(1 + phi.*cos(2.*pi.*X)).*M) + Y.*(-1 + 2.*(1 + phi.*cos(2.*pi.*X)).^2.*M.^2- 2.*M.*Y.*cosh(M.*Y).*((1 + phi.*cos(2.*pi.*X)).*M.*cosh((1 + phi.*cos(2.*pi.*X)).*M)+ (-1 + (1 + phi.*cos(2.*pi.*X)).*M.^2.*beta).*sinh((1 + phi.*cos(2.*pi.*X)).*M))- 2.*(1 + phi.*cos(2.*pi.*X)).*M.*sinh(2.*(1 + phi.*cos(2.*pi.*X)).*M) + 2.*((1 + phi.*cos(2.*pi.*X)).*M.*(Y + (1 + phi.*cos(2.*pi.*X)).^2.*M.^2.*beta).*cosh((1 + phi.*cos(2.*pi.*X)).*M) + (-Y + (1 + phi.*cos(2.*pi.*X)).*M.*2.*((1 + phi.*cos(2.*pi.*X)).^2 - (1 + phi.*cos(2.*pi.*X)).*beta + Y.*beta)).*sinh((1 + phi.*cos(2.*pi.*X).*M)).*sinh(M.*Y)))./8.*((1 + phi.*cos(2.*pi.*X)).*M.*cosh((1 + phi.*cos(2.*pi.*X)).*M) + (-1 + (1 + phi.*cos(2.*pi.*X)).*M.^2.* beta).*sinh((1 + phi.*cos(2.*pi.*X)).*M)).^2));
contour(X,Y,Z,100)
[C,h] = contour(X,Y,Z);
set(h,'ShowText','on','TextStep',get(h,'LevelStep')*2)
colormap cool 
```

另外，请务必将 M 更改为不同于 0 的值

![在此处输入图像描述](../Images/49260bfa0ebcbc96f478f35678aade37.png)

# git - 与远程同名的 Git 分支的创建方式不同

> ID：10050116
> 
> 赞同：4
> 
> 时间：2012-04-06T22:48:29.107
> 
> 标签：git, git-branch

在创建名称与远程分支名称匹配的分支时，推送和拉取的配置设置不同。

拥有当前的远程分支：

```
$ git branch -r
  origin/HEAD -> origin/master
  origin/master
  origin/someBranch 
```

并创建几个本地分支来跟踪远程分支：

```
$ git branch someBranch origin/someBranch 
  Branch someBranch set up to track remote branch someBranch from origin.
$ git branch someOtherBranch origin/someBranch 
  Branch someOtherBranch set up to track remote branch someBranch from origin. 
```

检查跟踪和上游信息：

```
$ git remote show origin
* remote origin
  Fetch URL: git@github.somewhere.com:maic/repo.git
  Push  URL: git@github.somewhere.com:maic/repo.git
  HEAD branch: master
  Remote branches:
    master     tracked
    someBranch tracked
  Local branches configured for 'git pull':
    master          merges with remote master
    someBranch      merges with remote someBranch
    someOtherBranch merges with remote someBranch
  Local refs configured for 'git push':
    master     pushes to master     (up to date)
    someBranch pushes to someBranch (up to date) 
```

为什么在没有推送配置的情况下创建了第二个分支？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T04:16:03.897

如果本地分支和远程分支具有相同的名称，则本地分支只能跟踪远程分支以进行推送。对于拉取，本地分支不必与远程分支具有相同的名称。有趣的是，如果您设置一个分支 'foo' 来跟踪远程分支 'origin/bar'（使用 'git branch foo origin/bar'）并且如果远程存储库当前**没有**一个名为 'foo' 的分支，那么如果稍后远程确实有一个名为 foo 的分支，然后本地分支 foo 将在此后跟踪 origin/foo！

```
$ git clone dev1 dev2
Cloning into 'dev2'...
done.
$ cd dev2
#
# After clone, local master tracks remote master.
#
$ git remote show origin
* remote origin
Fetch URL: /Users/ebg/dev1
Push  URL: /Users/ebg/dev1
HEAD branch: master
Remote branch:
  master tracked
Local branch configured for 'git pull':
  master merges with remote master
Local ref configured for 'git push':
  master pushes to master (up to date)
#
# Create branch br1 to track origin/master
#
$ git branch br1 origin/master
Branch br1 set up to track remote branch master from origin.
#
# br1 tracks origin/master for pulling, not pushing
#
$ git remote show origin
* remote origin
Fetch URL: /Users/ebg/dev1
Push  URL: /Users/ebg/dev1
HEAD branch: master
Remote branch:
  master tracked
Local branches configured for 'git pull':
  br1    merges with remote master
  master merges with remote master
Local ref configured for 'git push':
  master pushes to master (up to date)
#
# Go to the origin repo and now create a new 'br1' branch
#
$ cd ../dev1
$ git checkout -b br1
Switched to a new branch 'br1'
#
# Go back to dev2, fetch origin
#
$ cd ../dev2
$ git fetch origin
From /Users/ebg/dev1
 * [new branch]      br1        -> origin/br1
#
# Now local branch 'br1' is tracking origin/br1 for pushing
#
$ git remote show origin
* remote origin
Fetch URL: /Users/ebg/dev1
Push  URL: /Users/ebg/dev1
HEAD branch (remote HEAD is ambiguous, may be one of the following):
  br1
 master
Remote branches:
  br1    tracked
  master tracked
Local branches configured for 'git pull':
  br1    merges with remote master
  master merges with remote master
Local refs configured for 'git push':
  br1    pushes to br1    (up to date)
  master pushes to master (up to date) 
```

所以 br1 最初应该从 master 拉/推，我们最终 br1 从 origin/master 拉并推到一个我们不知道存在的分支。

# ruby-on-rails - 新手：activerecord 加入？一些帮助将 sql 转换为 activerecord

> ID：10050122
> 
> 赞同：1
> 
> 时间：2012-04-06T22:50:07.233
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, relation

我试图弄清楚该怎么做：

*   组 has_many 参与者
*   参与者所属组
*   用户 has_profile
*   个人资料属于用户

**现在我正在尝试从 group.id ='1' 和participant.profile.gender ='x'的组中获取所有参与者**

这将如何转换为活动记录？我已经挖掘了文档，但不是 sql 大师，也不是 AR 大师。任何人都可以指出我正确的方向吗？这将非常有助于理解如何做到这一点。*使困惑*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T23:01:06.280

我认为你可以做类似的事情

```
 Participant.where(:group_id => 1).where(:profile=>{:gender=>'x'}) 
```

更新：由于参与者是一个连接表，你需要改变它：

```
 Participant.where(:group_id => 1).where(:user=>{:profile=>{:gender=>'x'}}) 
```

您还需要添加一个 belongs_to :user 到 Participant

# events - matplotlib + gtk 中的连接信号

> ID：10050130
> 
> 赞同：0
> 
> 时间：2012-04-06T22:50:52.333
> 
> 标签：events, gtk, matplotlib

我正在 gtk 中开发一个 matplotlib 应用程序，我想在 python 类中抽象与绘图相关的东西，但同时，我也希望能够通过击键与图形进行交互。我的类定义如下所示：

```
class Plot:
    def __init__(self, data, datatype, xlabel=None, ylabel=None, xtics=None, ytics=None):
        self.figure = Figure(figsize=(8,6), dpi=72)
        self.axis = self.figure.add_subplot(111)
        self.canvas = FigureCanvas(self.figure)
        self.figure.canvas.mpl_connect('key_press_event', self.on_key)

    def on_key(self, event):
        print 'pressed' 
```

我将绘图放在主窗口中：

```
x = numpy.linspace(0, 10, 100)
y = numpy.sin(x)
plot = Plot([x,y], 'line', 'xlabel', 'ylabel')
vbox.pack_start(plot.plotbox) 
```

其中 vbox 只是一个 gtkbox。现在，绘图已正确显示，但我无法与之交互，即当我按下某个键时，我无法输入函数 on_key。有人可以指出缺少什么吗？

非常感谢，

v923z

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T10:14:23.967

我弄清楚了问题所在：plot 的作用域是**init**函数，因此一旦**init**函数返回，它就会变为非活动状态。必须将情节定义为

```
self.plot = Plot([x,y], 'line', 'xlabel', 'ylabel')
vbox.pack_start(self.plot.plotbox) 
```

有了这个，情节对按键做出反应。

v923z

# c# - 在运行时在asp页面中保存控件？

> ID：10050132
> 
> 赞同：0
> 
> 时间：2012-04-06T22:51:32.770
> 
> 标签：c#, asp.net, runtime

我在运行时将 HTML 通用控件创建为 (ul) 和 (il)。然后我想在我的页面内循环以在运行时创建所有 ul 和 il ，但是当我单击按钮时，我创建的所有控件都消失了。如何将其保存在我的页面中以循环访问它？

```
protected void AddHtmlGroups( int groups,ArrayList judids ,int judnum)
{
    for (int i = 1; i <= groups; i++)
    {
        HtmlGenericControl myUnOrderedList = new HtmlGenericControl("ul");
        HtmlGenericControl fieldset = new HtmlGenericControl("fieldset ");

        HtmlGenericControl legend = new HtmlGenericControl("legend  ");

        legend.InnerText="المجموعه " + i.ToString();
        legend.Attributes.Add("class", "group");
        myUnOrderedList.Controls.Add(legend);
        myUnOrderedList.ID = i.ToString()+"g";

        myUnOrderedList.Attributes.Add("class", "profList column");

        for (int j = 1; j <= judnum; j++)
        {
            if (judids.Count > 0)
            {
                HtmlGenericControl listItem = new HtmlGenericControl("li");
                listItem.ID = judids[0].ToString();
                string judname = getjudgeName(Convert.ToInt32(judids[0]));
                if (judname != null)
                {
                    listItem.InnerText = judname;
                }
                judids.RemoveAt(0);

                myUnOrderedList.Controls.Add(listItem);
            }
        }

        fieldset.Controls.Add(myUnOrderedList);

        Panel1.Controls.Add(fieldset);
        Panel1.Visible = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T00:46:26.430

> 当我单击按钮时，我创建的所有控件都消失了

大概您正在单击一个导致回发的按钮，从而导致重新创建页面。每次从`OnInit`or加载页面时，您都必须重建动态控件树`OnLoad`（`OnLoad`如果您需要访问 ViewState，请使用）。

重新创建控制树后，您可以对其执行操作，例如读取项目、添加项目、删除项目等。

通常控制树需要在回发之间“记住”它们的状态。您可以使用：

*   ViewState（仅在有限的数量下使用它，因为它会大大增加页面的大小）

*   会话状态（我使用队列来确保每个会话只能有有限数量的对象）。

*   数据库（如果您想保留更改和/或如果您可以从数据库重新创建控制树，请使用）。

## 例子

*这是一个非常简单的示例，它演示了以 Session 作为状态机制的流程。请记住，如果您使用 Session，它会消耗服务器内存，并且可以从该会话中的任何页面访问（因此，如果用户同时打开两个相同的页面，您可能会导致冲突）。*

```
protected override void OnLoad( EventArgs e)
{
    // build every time the page loads
    BuildTree();
}

private void BuildTree()
{
    // clear existing dynamic controls
    this.MyOutputPanel.Controls.Clear();

    // if there is a value in session, use it
    if( Session["Number"] != null )
    {
        int number = (int)Session["Number"];

        // create some dynamic controls
        for( int i = 0; i < number; i++ )
        {
            var div = new HtmlGenericControl( "div" );
            this.MyOutputPanel.Controls.Add( div );
        }
    }

    // otherwise, do nothing
}

protected void btnDoSomething_Click( object sender, EventArgs e )
{
    // 1\. Get the value from the user and store it in Session
    Session["Number"] = Convert.ToInt32( this.txtFoo.Text );

    // 2\. rebuild your tree of controls
    BuildTree();
} 
```

# javascript - JavaScript windows.onload 或引用新元素？

> ID：10050133
> 
> 赞同：0
> 
> 时间：2012-04-06T22:51:34.660
> 
> 标签：javascript, dom

我正在尝试创建一个灯箱，但遇到了麻烦。

我认为问题要么是因为我有 2 个 window.onloads，要么是因为我试图引用一个新创建的 DOM 元素。我在下面的代码中添加了一些注释来解释我正在尝试做什么。

```
//open lightbox
window.onload = showLargeImage;

function showLargeImage() {
    var enlargeButton = document.getElementById("thumb1"); // thumb1 is a thumbnail you click to get the lightbox
    enlargeButton.onclick = handleClick;
}

function handleClick() {
    var lightboxContainerId = document.getElementById("lightboxContainer");
    lightboxContainerId.innerHTML = '<div class="lightbox"><a class="reduceButton" href="#" ><img id="imageButton" class="largeImage" src="2012/images/web/web1.jpg" width="500" height="500" alt="Web Thumb 1"></a></div>';
} // the inner HTML creates the lightbox.

//close lightbox
window.onload = reduceImage; // i'm pretty sure that this windo.onload is the problem... or, that I'm referencing "imageButton" which is new to the DOM             

function reduceImage() {
    var reduceButton = document.getElementById("imageButton"); // you're supposed to click the big image in the lightbox to get close it.  
    reduceButton.onclick = handleReduceClick;
}

function handleReduceClick() {
    var shadeId = document.getElementById("lightboxContainer");
    shadeId.innerHTML = "say what"; // closing the lightbox simply strips everything out of the lightboxContainer                
    alert("oh yeah");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T13:47:07.210

以下是您的代码无法正常工作的几个原因：

*   showLargeImage 和 reduceImage 在分配给 window.onload 的位置缺少调用括号。没有括号，window.onload 被分配了一个函数，但该函数没有被调用。例如，您应该有 window.onload = showLargeImage();
*   正如您所怀疑的，第二个 window.onload 正在覆盖第一个。
*   reduceButton （正如您所怀疑的）在它存在之前被分配，导致错误。

这是一种可能适合您的解决方案。

HTML：

```
<!DOCTYPE html>
<html><head><title></title>
</head><body>

    <a href="#" id="thumb">View</a>
    <div id="lightboxcontainer"></div>

</body></html> 
```

JavaScript：

```
window.onload = function() {

    // click link to show
    var enlargeButton = document.getElementById('thumb');
    enlargeButton.onclick = function() {
        var lightboxContainerId = document.getElementById('lightboxcontainer');
        lightboxContainerId.innerHTML = '<img src="http://placehold.it/350x150"' +
                                        'width="350" height="150 alt="Thumb 1">' +
                                        '<p>Click image to hide.</p>';
    };

    // click image to hide
    var reduceButton = document.getElementById('lightboxcontainer');
    reduceButton.onclick = function() {
        reduceButton.innerHTML = ''; // removes lightbox contents         
    };
}; 
```

现场演示：http: [//jsfiddle.net/ericmathison/BxwYY/7/](http://jsfiddle.net/ericmathison/BxwYY/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T22:55:41.477

如果代码位于`<body>`（或灯箱元素之后的任何位置）的末尾，只需使用以下代码：

```
document.getElementById("thumb1").onclick = function () {
    document.getElementById("lightboxContainer").innerHTML = '<div class="lightbox"><a class="reduceButton" href="#" ><img id="imageButton" class="largeImage" src="2012/images/web/web1.jpg" width="500" height="500" alt="Web Thumb 1"></a></div>';  
    document.getElementById("imageButton").onclick = function () {
        document.getElementById("lightboxContainer").innerHTML = "say what";
        alert("oh yeah");
    };
} 
```

这将做你想做的一切。

# jquery - 如何从第一个 celDiv 单选按钮获取其他 celDiv 数据？

> ID：10050134
> 
> 赞同：0
> 
> 时间：2012-04-06T22:51:42.243
> 
> 标签：jquery, jquery-selectors

我有一张桌子

```
<table>
<tr><td><input radio name="R1" onClick=getOtherColumnData()>first</td><td>TR1-TD2</td><td>TR1-TD3</td><td>TR1-TD4</td></tr>
<tr><td><input radio name="R1" onClick=getOtherColumnData()>Second</td><td>TR2-TD2</td><td>TR2-TD3</td><td>TR2-TD4</td></tr>
<tr><td><input radio name="R1" onClick=getOtherColumnData()>first</td><td>TR3-TD2</td><td>TR3-TD3</td><td>TR3-TD4</td></tr>
</table> 
```

现在，当我单击单选按钮时，如何获取其他列数据？我正在尝试使用

`$(td)('nth-child(3) div').text();`

但它返回所有行的第三个 TD 数据，但我只想返回单击单选按钮的特定行。

感谢您的帮助！

尼莱什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T23:15:58.907

鉴于您已经在使用 jQuery，为什么不使用它来绑定点击处理程序呢？然后在处理程序`this`中将引用单击的单选，并`$(this).closest("tr")`为您提供它所在的行。如果您想通过索引或其他选择器选择特定单元格，您可以从那里使用`.find()`或获取该行的其他单元格`.children()`. 或者您可以使用`$(this).parent()`获取收音机所在的单元格并`$(this).parent().siblings()`获取该行中的其他单元格。

```
$('input[name="R1"]').click(function() {
    var $tr = $(this).closest("tr"),
        cell3content = $tr.children().eq(2).text();  // get content of third cell
    // or
    var $allOtherCellsInRow = $(this).parent().siblings();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T23:09:03.310

您应该将`this`参数传递给您的函数，而不是获取其他列数据，

```
<table>
<tr><td><input type="radio" name="R1" onClick=getOtherColumnData(this)>first</td><td>TR1-TD2</td><td>TR1-TD3</td><td>TR1-TD4</td></tr>
<tr><td><input type="radio" name="R1" onClick=getOtherColumnData(this)>Second</td><td>TR2-TD2</td><td>TR2-TD3</td><td>TR2-TD4</td></tr>
<tr><td><input type="radio" name="R1" onClick=getOtherColumnData(this)>first</td><td>TR3-TD2</td><td>TR3-TD3</td><td>TR3-TD4</td></tr>
</table>

<script>
function getOtherColumnData(e) {
   $(e).parent().siblings().each(function() {
        alert($(this).html());
    });        
}
</script>​ 
```

[你可以在这里看到一个现场演示](http://jsfiddle.net/kwnDS/2/)

# c# - 没有在 linq 语法中添加的定义？

> ID：10050135
> 
> 赞同：3
> 
> 时间：2012-04-06T22:52:28.557
> 
> 标签：c#, wcf, web-services, rest

我正在获得与上一个问题相关的帮助，但随后被告知要提出一个与之相关的新问题，但是给出的代码遇到了错误：

```
public void AddPersonToCommunity(string person, string communityName) 
{ 
    var result = communities.Where(n => String.Equals(n.CommunityName, communityName)).FirstOrDefault(); 
    if (result != null) 
    { 
        result.Add(new Person() { PersonName = person }); //no definition for add?
    } 
} 
```

您可以在此处查看上一个问题以了解更多细节：[休息中的关系？](https://stackoverflow.com/questions/10046196/relationships-in-rest)

如果我这样做`var result = communities;`了，那么结果就会有 Add 的定义，所以我不确定发生了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T22:56:36.030

您正在调用`Where()`which 将返回一个`IEnumerable<Community>`（无`Add`方法），然后`FirstOrDefault()`返回一个`Community`（也没有`Add`方法）。您*希望*一种`Add`方法来自哪里？

我怀疑你*真的*想要：

```
if (result != null) 
{ 
    result.People.Add(new Person { PersonName = person });
} 
```

...因为`Community.People`是那个社区的人的名单，对吗？

请注意，如果您这样做`var result = communities;`，确实会有一个 Add 方法 - 但签名为`Add(Community)`，*而不是* `Add(Person)`。

保持所有内容的类型正确很重要。这实际上与 LINQ 关系不大。如果您尝试过，您会看到相同的结果：

```
Community community = new Community();
community.Add(new Person { PersonName = person }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T23:30:04.970

添加到@Jon的答案

有一种`Concat`扩展方法`IEnumerable<T>`允许您在逻辑上将两个`IEnumerable<T>`对象组合成一个`IEnumerable<T>`跨越两个集合的对象。您可以将此逻辑扩展到附加单个元素，然后将其应用于您当前的情况。

```
public static IEnumerable<T> Concat(this IEnumerable<T> enumerable, T value) {
  foreach (var cur in enumerable) {
    yield return cur;
  }
  yield return value;
}

...

result = result.Concat(new Person() { PersonName = person }); 
```

# iphone - 从 youtube 下载视频的应用程序

> ID：10050137
> 
> 赞同：3
> 
> 时间：2012-04-06T22:52:36.360
> 
> 标签：iphone, objective-c, xcode, cocoa-touch, youtube

我制作了一个从 youtube 观看视频的应用程序，我认为编写代码让用户能够下载视频并将其保存在应用程序的文档文件夹中非常容易，我的问题是：

1）这样做是否合法，是否担心申请被拒绝？

2）是否可以让用户观看视频，当他完成（观看所有视频）时获取此数据并保存，（不要再次下载，因为他已经观看并下载了视频）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T23:05:33.883

我相信这是一个灰色地带。一般来说，您不得在不付费的情况下下载受版权保护的视频。YouTube 的官方立场相当有趣。此链接告诉您[http://support.google.com/youtube/bin/answer.py?hl=en&answer=56100](http://support.google.com/youtube/bin/answer.py?hl=en&answer=56100)**不支持**它，除非在*一种*情况下，即如果您正在下载自己的视频。

然后继续列出下载您自己的视频的各种限制和政策。但是请注意，**不支持**并不意味着**取消资格**。如需进一步阅读，请访问此链接：[http](http://news.cnet.com/8301-13739_3-9936833-46.html) ://news.cnet.com/8301-13739_3-9936833-46.html对于普通观众而言，它比一连串的政策更具可读性。因此，针对您的问题：

1.  这是一个灰色地带。您的申请可能会或可能不会被拒绝。组织正在打击 YouTube 等网站上的受版权保护的视频。但是，YouTube 并未明确*禁止*您的申请。粗略的 Google 搜索会发现有许多应用程序可以让您下载 YouTube 视频。出于道德考虑，我不会在这里发布任何内容。

2.  当您说“此数据”时，您是什么意思？如果您感兴趣的只是 YouTube 上用户的使用情况和查看统计信息，那么我建议您查看 YouTube API，您可以在其中完成所有这些有趣的事情，而无需在应用程序中下载一大堆视频。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T02:12:46.837

1）看运气。但是，可能会被拒绝。被拒绝的可能性更大。

因为遵循 Youtbe TOS。我的应用程序已被 Apple 拒绝。

出于以下原因：

* * *

22.4

我们发现您的应用包含可能允许其用户下载 YouTube 内容的信息，这不符合 YouTube 服务条款。

“......您不得下载任何内容，除非您看到 YouTube 在服务上针对该内容显示的“下载”或类似链接。您不得复制、复制、分发、传输、广播、展示、出售、许可或未经 YouTube 或内容的相应许可方事先书面同意，以其他方式将任何内容用于任何其他目的。YouTube 及其许可方保留未明确授予服务和内容的所有权利。

另请参阅以下站点问题。这很重要。你肯定需要阅读。

[http://www.iphonedevsdk.com/forum/business-legal-app-store/88260-youtube-downloader.html](http://www.iphonedevsdk.com/forum/business-legal-app-store/88260-youtube-downloader.html)

* * *

2) 可用。但是，就像我上面所说的，下载 YouTube 视频存在潜在风险。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T02:59:34.033

> 1）这样做是否合法，是否担心申请被拒绝？

我不确定这是否违法；但这绝对**违反了 YouTube 的服务条款**。而且，如果您打算让您的应用在 App Store 中获得批准，那么请相信我：算了。

> 2）是否可以让用户观看视频，当他完成（观看所有视频）时获取此数据并保存，（不要再次下载，因为他已经观看并下载了视频）。

是的，这是可行的。

# java - 如何使用 Java swing 创建一个动态列表，其中必须为每个元素指定多个参数

> ID：10050139
> 
> 赞同：0
> 
> 时间：2012-04-06T22:52:47.823
> 
> 标签：java, swing, list

我对 Java Swing 的经验较少，我想创建一个动态列表，其中必须为每个元素指定 2 个参数。

我有 n 个元素，其中数字 n 未知并且取决于其他程序...

我希望对于 n 个元素，swing GUI 显示 n 行，其中左侧的每一行都有 2 个框用于设置参数*String id*和*int time*。

确认时的这个摇摆 GUI 应该将所有这些数据放在一个`List<Process>` （其中 Process 只是一个由*String id*和*int time*定义的对象）中。

# c++ - 使用 -flto 选项的 g++ 错误

> ID：10050140
> 
> 赞同：15
> 
> 时间：2012-04-06T22:53:10.303
> 
> 标签：c++, boost, linker, g++

我正在尝试在 g++ 中启用链接时间优化。`-flto`没有该选项，我的程序编译得很好。当我将它添加到我的 Makefile 时，目标文件编译时没有错误，例如

```
g++ main.cpp -I ../includes -std=c++0x -fopenmp -Wall -pedantic -Wno-vla -flto -D INFO_ -c -o .obj/main.o 
```

但是当涉及到链接程序时：

```
g++ -fwhole-program -I ../includes -std=c++0x -fopenmp -Wall -pedantic -Wno-vla -flto -D INFO_ .obj/main.o .obj/atom.o .obj/bee.o .obj/colony.o ../includes/.obj/error.o ../includes/.obj/CmdLine.o ../includes/boost_lib_deb/libboost_program_options.a ../includes/gmp_lib_deb/lib/libgmpxx.a ../includes/gmp_lib_deb/lib/libgmp.a -o BeeBench 
```

我收到很多这样的错误：

```
includes/gmp_lib_deb/lib/libgmpxx.a ../includes/gmp_lib_deb/lib/libgmp.a -o BeeBench
`typeinfo for boost::program_options::too_many_positional_options_error' referenced in section `.rodata._ZTVN5boost15program_options33too_many_positional_options_errorE[vtable for boost::program_options::too_many_positional_options_error]' of ../includes/boost_lib_deb/libboost_program_options.a(cmdline.o): defined in discarded section `.gnu.linkonce.t._ZTIN5boost15program_options33too_many_positional_options_errorE' of .obj/main.o (symbol from plugin)

`typeinfo for boost::program_options::too_many_positional_options_error' referenced in section `.rodata._ZTIN5boost16exception_detail19error_info_injectorINS_15program_options33too_many_positional_options_errorEEE[typeinfo for boost::exception_detail::error_info_injector<boost::program_options::too_many_positional_options_error>]' of ../includes/boost_lib_deb/libboost_program_options.a(cmdline.o): defined in discarded section `.gnu.linkonce.t._ZTIN5boost15program_options33too_many_positional_options_errorE' of .obj/main.o (symbol from plugin)
`typeinfo for boost::program_options::invalid_command_line_style' referenced in section `.rodata._ZTVN5boost15program_options26invalid_command_line_styleE[vtable for boost::program_options::invalid_command_line_style]' of ../includes/boost_lib_deb/libboost_program_options.a(cmdline.o): defined in discarded section `.gnu.linkonce.t._ZTIN5boost15program_options26invalid_command_line_styleE' of .obj/main.o (symbol from plugin) 
```

我不知道出了什么问题。我使用`-flto`. 这些库，即 Boost 和 GMP，是在没有`-flto`选项的情况下编译的。这是导致错误吗？gcc 手册说可以混合使用 & 不带`-flto`选项编译的目标文件。还是我错过了其他东西，例如错误所说的这个插件是什么？

我在 Debian Wheezy 上使用 G++ 4.6.3。

**更新：**

正如评论中的建议，我做了一个最小的例子。我的测试程序的代码只有这样：

```
#include "boost/program_options.hpp"

int main ( int argC, char* argV[] )
{
    return 0;
} 
```

当我使用以下方法编译它时：

```
g++ -o test -I ../includes -Wall -std=c++0x test.cpp -flto -fwhole-program -static 
```

它给出了与上述类似的错误。如果我省略 -static、-flto 或 std=c++0x 选项，它编译时不会出错。-fwhole-program 选项不会改变结果。我现在也用 G++ 4.7 进行了测试，同样的错误。

有什么建议么？这真的是编译器错误，还是我仍然做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-25T13:33:53.563

由于我没有发现任何证据表明我的代码有问题，因此我发布了[Boost](https://svn.boost.org/trac/boost/ticket/6903)错误报告。它也被其他 boost 用户复制，因此我认为它实际上是 boost 或 g++ 中的一个错误。到目前为止，Boost 维护者没有任何回应。有的话我会更新这篇文章。

**更新**

似乎是 g++ 链接器插件导致了问题（我仍然不知道为什么）。因此，一种可能的解决方法是通过使用禁用链接器插件`-fno-use-linker-plugin`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T15:57:14.447

库中的某些内容引用了该特定类的类型信息（通常是针对该特定异常的“catch”语句或“dynamic_cast”）。因此，您的错误消息中的“在部分中引用”。

但是，要生成 typeinfo，非内联非纯虚函数必须存在于其中一个编译单元中。如果函数是在类定义中定义的，则不计算在内（它被内联并被视为内联链接，即使您传递了“-fno-default-inline”）。

因此，dynamic_cast 或 catch 语句可能无法按作者的预期工作；直到在标题上尝试 LTO 之前，这个问题才被注意到。

因此，我将其称为 BOOST 错误和/或 g++ 的缺点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T23:03:31.317

`-flto`flag 必须同时出现在编译和链接器命令行中才能工作。`-fwhole-program`，另一方面，根本不需要。顺便说一下，LTO 不能与未在 LTO 支持下编译的翻译单元一起使用。

# c# - 我如何遍历每个 readlistviewitem，检查值并将其设置为粗体？

> ID：10050145
> 
> 赞同：0
> 
> 时间：2012-04-06T22:54:13.427
> 
> 标签：c#, asp.net, listview, telerik

我有一个列表视图，其中加载了一个对象列表，该列表包含一个名为的属性，该属性包含`AssigneeView`打开条目的日期。`listview's` `ItemTemplate`有一个名为“lblHeader”的标签。我想要做的是遍历`ListView`.Items 并检查每个元素的`AssigneeView`属性，如果是`null`，我想将其设置`lblHeader.Text`为粗体（表示它未读）。

我想创建一个方法，该方法从`Object`调用的 Items 列表中获取一个属性，`ticketID`并查找该字段的`AssigneeView`字段是否为 null 并返回一个`bool`. 所以它看起来像

```
ForEach item in listview.Items
   if(IsUnread(item.datamember.ticketID)) then
       item.lblHeader.MakeBold
   else
      item.lblHeader.MakeNotBold 
```

我不是 100% 了解如何深入研究 Telerik 控件以获得我需要的东西。有什么建议么？

更新：这是我现在的位置：

```
using (var client = new QUTIService.QSVCClient())
            {
                var data = client.SearchTickets(this.myGuid, txtSearchString.Text, 100, chkSearchClosed.Checked).ToList();
                lsvResultTickets.DataSource = data;
                lsvResultTickets.DataBind();
                if (data.Count == 0)
                {
                    lblStatus.Text = "No tickets found.";
                }
                else
                {
                    foreach (var item in lsvResultTickets.Items)
                    {
                        var obj = item.DataItem as QT.FullTicket;
                        if (TicketIsUnread(obj.OriginalTicket.TicketID))
                        {
                            //???
                        }
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T17:16:44.227

好的，事实证明我只需要再深入一层。我不需要使用另一种方法来为我进行检查。我在项目加载的事件处理程序中处理了这个，这就是我最终得到的：

```
protected void ResultItem_DataBound(object sender, RadListViewItemEventArgs e)
    {        
        var dItem = e.Item as RadListViewDataItem;
        var dObj = dItem.DataItem as QT.FullTicket;
        //if no read date, mark as unread (bold)
        if (dObj.AssigneeView == null)
        {            
            var headerLabel = e.Item.FindControl("lblHeader") as Label;
            headerLabel.Style.Add("Font-Weight", "Bold");
            headerLabel.Style.Add("Color", "Orange");
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T23:23:47.733

您需要做的是检查 RowDataBound 事件中的 AssigneeView，然后相应地设置 lblHeader。在将数据源中的每一行添加到 GridView 时，都会调用 RowDataBound。

```
if (e.Row.RowType == DataControlRowType.DataRow) {
    if (DataBinder.Eval(e.Row.DataItem, "AssigneeView") == null) {
      //Set bold
    } else {
      //Set normal
    } 
} 
```

# javascript - 重构这个 javascript 代码

> ID：10050146
> 
> 赞同：1
> 
> 时间：2012-04-06T22:54:42.040
> 
> 标签：javascript, refactoring

我有两个点击事件，几乎相似，但不完全一样。我想知道如何最好地重构它们：

```
 $('.remove_fields.dynamic').live('click', function(e) {
    var $this = $(this);
    var after_removal_trigger_node = $this.closest(".nested-fields").parent();
    trigger_removal_callback($this);
    e.preventDefault();
    $this.closest(".nested-fields").remove();
    trigger_after_removal_callback(after_removal_trigger_node);
  });

  $('.remove_fields.existing').live('click', function(e) {
    var $this = $(this);
    var after_removal_trigger_node = $this.closest(".nested-fields").parent();
    trigger_removal_callback($this);
    e.preventDefault();
    $this.prev("input[type=hidden]").val("1");
    $this.closest(".nested-fields").hide();
    trigger_after_removal_callback(after_removal_trigger_node);
  }); 
```

如您所知，有相当多的重叠。我想知道重构此代码的最佳/最好方法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T22:58:51.990

在`.remove_fields`click 函数中进行类检查。

```
$('.remove_fields').click(function(e) {
    var $this = $(this);
    var after_removal_trigger_node = $this.closest(".nested-fields").parent();
    trigger_removal_callback($this);
    e.preventDefault();
    if($this.hasClass("dynamic") {
        $this.closest(".nested-fields").remove();
    } else if($this.hasClass("existing")) {
        $this.prev("input[type=hidden]").val("1");
        $this.closest(".nested-fields").hide();
    }
    trigger_after_removal_callback(after_removal_trigger_node);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T22:57:19.680

将选择器组合成`$('.remove_fields.dynamic, .remove_fields.existing')`.

然后，测试是否`$this`有 class `existing`。如果是这样，运行`$this.prev("input[type=hidden]").val("1");`.

完毕。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T23:25:46.187

多打扫一下：

```
$('.remove_fields').click(function(e) {
    e.preventDefault();

    var $this = $(this);
    var $nestedFields = $this.closest(".nested-fields");

    trigger_removal_callback($this);

    if($this.hasClass("dynamic") {
        $nestedFields.remove();
    } else if($this.hasClass("existing")) {
        $this.prev("input[type=hidden]").val("1");
        $nestedFields.hide();
    }

    trigger_after_removal_callback($nestedFields.parent());

}); 
```

# ruby-on-rails - rails routes.rb 中的匹配重定向太多次

> ID：10050148
> 
> 赞同：1
> 
> 时间：2012-04-06T22:54:55.560
> 
> 标签：ruby-on-rails, rails-routing

我有一条路线应该与类似
localhost:3000/site/admin 的路线相匹配

并重定向到

本地主机：3000/en/site/admin

这是应该匹配此
routes.rb的路线

```
match '*path', to: redirect("/#{I18n.default_locale}/%{path}") 
```

但不是匹配它并重定向到 localhost:3000/en/site/admin，而是将无限重定向到这个

```
http://localhost:3000/en/en/en/en/en/en/en/en/en/en/en/en/en/site/admin
(adds /en until browser complains about infite loop) 
```

知道为什么会发生这种无限循环吗？谢谢

***编辑***

链接到我的整个 routes.rb 文件

[https://gist.github.com/2323762](https://gist.github.com/2323762)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T23:01:31.770

您在文件中是否有更高的路由来捕获您要重定向到的“/:locale/:path”URL？如果没有，您的路线将通过并再次被“*path”路线（匹配任何东西）捕获。

# iphone - 在 iOS 中加密字符串并防止逆向工程

> ID：10050151
> 
> 赞同：1
> 
> 时间：2012-04-06T22:55:30.507
> 
> 标签：iphone, objective-c, encryption, reverse-engineering

我正在构建一个 iPhone 应用程序，我目前需要加密一个字符串，将其存储在一个文件中，以便以后解密。据我了解，我可以使用对称加密来执行此操作，但我的加密/解密密钥可以进行逆向工程。不对称加密可以解决这个问题，但似乎我需要一个服务器来发送数据以使用私钥解密。有谁知道我可以在独立应用程序中安全地加密/解密字符串的方法？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T23:22:45.863

与所有与安全有关的问题一样，问题是：你在为谁辩护？

如果您试图阻止不经意间的窃贼（或脚本小子）读取加密字符串，则使用内置的 iOS 加密服务（例如[Keychain](https://developer.apple.com/library/mac/#documentation/Security/Conceptual/keychainServConcepts/01introduction/introduction.html)）可以提供足够好的安全性。显然，安全性的强度将部分取决于您无法控制的各种因素（特别是用户为设备配置的密码锁类型（如果有的话））。

下一个级别将是使用对称加密密钥（即受用户密码保护的密钥）的对称加密。正如@lukas 所指出的，原则上这当然可以被破解，但从实际的角度来看，如果用户为足够大的密钥选择了足够强的密码短语，那么将有效地阻止临时到中级的攻击者。

另一方面，如果您需要像布鲁斯·施奈尔（ [Bruce Schneier](https://www.schneier.com/)）所说的那样保守秘密，而不是向您的妹妹，而是向世界主要政府保密，那么这些方法可能是不够的，您将不得不探索其他选择，包括但不仅限于将字符串存储在多个位置，使用多个密钥和多个身份验证因素。

所有这一切（保存最后一个选项）的主要 Apple 参考资料是[Secure Coding Guide](https://developer.apple.com/library/mac/#documentation/security/Conceptual/SecureCodingGuide/Introduction.html)，它在开头页面的末尾引用了其他更具体的编程指南（包括钥匙串和加密服务）。我也衷心推荐 Graham Lee 的[Professional Cocoa Application Security](https://rads.stackoverflow.com/amzn/click/com/0470525959)。如果你想要一个理论基础，黄金标准是 Schneier 的[应用密码学](https://rads.stackoverflow.com/amzn/click/com/0471128457)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T23:47:29.557

这个基本问题在 Stackoverflow 上经常被问到。答案是，您不能对自己的客户的安全性感到困惑，而且您永远不应该花费过多的钱来尝试。我推荐以下链接以查找之前的许多讨论：

*   [iOS 应用程序安全性的最佳实践](https://stackoverflow.com/questions/9448632/best-practices-for-ios-applications-security/9448821#9448821)
*   [iPhone 应用到网页的安全 https 加密](https://stackoverflow.com/questions/9181186/secure-https-encryption-for-iphone-app-to-webpage)

从上面你会发现更多的链接。但最终的答案是，你很可能试图解决错误的问题，而你认为​​你想解决的问题是无法解决的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T23:01:33.637

> 有谁知道我可以在独立应用程序中安全地加密/解密字符串的方法？

不会。如果有人对数据有物理访问权，它就可以被破解。做一个网络服务来解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T23:15:34.337

您是否考虑过使用[钥匙串服务](https://developer.apple.com/library/mac/#documentation/security/Conceptual/keychainServConcepts/02concepts/concepts.html#//apple_ref/doc/uid/TP30000897-CH204-TP9)？

# winapi - WinInet - 无法从标头中删除 Content-Length 以手动分块上传

> ID：10050153
> 
> 赞同：4
> 
> 时间：2012-04-06T22:55:50.837
> 
> 标签：winapi, http-headers, wininet, chunked-encoding

MSDN[声明](http://msdn.microsoft.com/en-us/library/windows/desktop/hh227298%28v=vs.85%29.aspx)WinInet 不支持分块上传（“客户端代码必须执行分块。”）。对我来说，这意味着我可以手动分块传输。我的意图是通过 HttpAddRequestHeaders 添加“Transfer-Encoding: chunked” ，通过[HttpAddRequestHeaders](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384227%28v=vs.85%29.aspx) HTTP_ADDREQ_FLAG_REPLACE 删除 Content-Length，然后在我的 InternetWriteFile 循环中，将数据写入分块编码块中。问题是，我似乎无法说服 WinInet 不发送 Content-Length。即使在删除之后，它最终也会向服务器发送“Content-Length: 0”（除了“Transfer-Encoding: chunked”），这会使服务器感到困惑。

我还尝试在[HttpSendRequestEx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384318%28v=vs.85%29.aspx)中设置 HSR_CHUNKED 标志。

有没有人有让 WinInet 跳过发送 Content-Length 的示例？

我知道 WinHTTP 声称支持分块上传，但我们对 WinInet 有其他依赖项，这就是为什么我希望尽可能在那里解决问题。

这是我尝试过的代码示例：

```
#include <windows.h>
#include <wininet.h>
#include <tchar.h>
#include <stdio.h>

bool http_putfile(HINTERNET hConnection, TCHAR* resource);

#define HOST  _T("www.website.com")
#define RESOURCE _T("/path/for/resource")

int _tmain(int argc, TCHAR* argv[])
{
    LPCTSTR lpszHostName = HOST;
    INTERNET_PORT nServerPort = INTERNET_DEFAULT_HTTP_PORT;
    DWORD dwService = INTERNET_SERVICE_HTTP;
    DWORD dwFlags = NULL;
    DWORD dwContext = 0;

    HINTERNET hSession = InternetOpen(
        argv[0],
        INTERNET_OPEN_TYPE_DIRECT, 
        NULL,
        NULL,
        NULL);

    if(hSession != NULL)
    {
        HINTERNET hConnection = InternetConnect(
            hSession,
            lpszHostName,
            nServerPort,
            NULL,
            NULL,
            dwService,
            dwFlags,
            dwContext);

        if(hConnection != NULL)
        {
            http_putfile(hConnection, RESOURCE);

            InternetCloseHandle(hConnection);
        }
        else
        {
            printf("InternetConnect failed: %d\n", GetLastError());
        }

        InternetCloseHandle(hSession);
    }
    else
    {
        printf("InternetOpen failed: %d\n", GetLastError());
    }

    return 0;
}

bool http_putfile(HINTERNET hConnection, TCHAR* resource)
{
    bool result = false;

    HINTERNET hRequest = HttpOpenRequest(
        hConnection,
        _T("PUT"),
        resource,
        NULL,
        NULL,
        NULL,
        INTERNET_FLAG_RELOAD | INTERNET_FLAG_EXISTING_CONNECT | INTERNET_FLAG_NO_CACHE_WRITE,
        0);

    if(hRequest != NULL)
    {
        HttpAddRequestHeaders(
            hRequest,
            _T("Transfer-Encoding: chunked\r\n"),
            -1L,
            HTTP_ADDREQ_FLAG_ADD | HTTP_ADDREQ_FLAG_REPLACE);

        // have tried:
        // Content-Length
        // Content-Length:
        // Content-Length\r\n
        // Content-Length:\r\n
        // all with/without HTTP_ADDREQ_FLAG_ADD.  Have even tried adding in a Content-Length
        // and then removing it.  All results show "Content-Length: 0" in the header on the wire.
        if(HttpAddRequestHeaders(
            hRequest,
            _T("Content-Length"),
            -1L,
            HTTP_ADDREQ_FLAG_ADD | HTTP_ADDREQ_FLAG_REPLACE) == FALSE)
        {
            DWORD err = GetLastError();
        }

        // have tried both 0 here for flags as documented on msdn
        // http://msdn.microsoft.com/en-us/library/windows/desktop/aa384318%28v=vs.85%29.aspx
        // as well as other combinations of INITIATE/CHUNKED
        if(HttpSendRequestEx(hRequest, NULL, NULL, HSR_INITIATE | HSR_CHUNKED /* 0 */, NULL))
        {
            DWORD wrote = 0;
            char* chunks = "5\r\nCHUNK0\r\n";

            if(InternetWriteFile(
                    hRequest,
                    chunks,
                    strlen(chunks),
                    &wrote) == FALSE)
            {
                printf("InternetWriteFile failed: %d\n", GetLastError());
            }

            HttpEndRequest(hRequest, NULL, 0, NULL);
        }
        else
        {
            printf("HttpSendRequestEx failed: %d\n", GetLastError);
        }

        InternetCloseHandle(hRequest);
    }
    else
    {
        printf("HttpOpenRequest failed: %d\n", GetLastError());
    }

    return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T05:27:51.283

很好的问题，我自己为此感到沮丧了好几个小时。

你的直觉`HTTP_ADDREQ_FLAG_REPLACE`被证明是正确的......但是，你必须很晚才结束。具体来说，您需要[注册一个状态回调](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385120(v=vs.85).aspx)，并且当您的回调被调用时`INTERNET_STATUS_CONNECTED_TO_SERVER`，*即*当您删除标头时：

```
// Inside InternetStatusCallback
//
if (dwInternetStatus == INTERNET_STATUS_CONNECTED_TO_SERVER)
{
  HttpAddRequestHeaders(Handle, L"Content-Length", -1, HTTP_ADDREQ_FLAG_REPLACE);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T20:36:44.873

Well, it looks like you are right. In fact, I don't see anything to indicate that WinINet supports chunked uploading; [only WinHTTP does](http://msdn.microsoft.com/en-us/library/windows/desktop/hh227298%28v=vs.85%29.aspx). Looking at the [Wine source code](http://source.winehq.org/source/dlls/wininet/http.c#L4656) (which tends to be quite accurate), the "Content-Length" header is ALWAYS appended to the request for any method other than "GET".

According to the [HTTP specs](http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.4), if a non-identity "Transfer-Encoding" header is present then the message is considered to be chunked. If a "Content-Length" header is also present then it MUST be ignored. If the spurious "Content-Length: 0" header is causing you problems then it could be argued that it is an issue with the server. I would give WinHTTP a try and see if it fixes the problem.

# java - JPA多对多级联删除

> ID：10050156
> 
> 赞同：1
> 
> 时间：2012-04-06T22:56:43.443
> 
> 标签：java, jpa, many-to-many, toplink

我刚开始使用 netbeans IDE 使用 JEE6，现在我正在使用 toplink 学习 JPA。我正在使用 Netbeans IDE 和 mySQL。

我创建了 2 个非常简单的表，具有多对多关系：

```
table student
int id PK
varchar name

table teacher
int id PK
varchar name

//the mapping
table studentTeacher
int studentID FK
int teacherID FK 
```

studentTeacher 表将 Student id 映射到 Teachers id，并在删除和更新时进行级联。

我使用了“从数据库生成实体”netbeans 功能，它工作正常：我可以将 Student 对象添加到我的学生表中，我可以将一个教师对象添加到我的教师表中。

问题是，我怎样才能创建一个“studentTeacher”实体并坚持下去？或者它已经由 IDE 完成？

这是 Netbeans 自动生成的注释：

```
 //Student Entity annotation generated by Netbeans 7.0.1

 @Id
 @Basic(optional = false)
 @NotNull
 @Column(name = "id")
 private Integer id;
 @Size(max = 40)
 @Column(name = "name")
 private String name;
 @JoinTable(name = "studentTeacher", joinColumns =
 {
    @JoinColumn(name = "studentID", referencedColumnName = "id")
 }, inverseJoinColumns =
 {
    @JoinColumn(name = "teacherID", referencedColumnName = "id")
 })
 @ManyToMany
 private Collection<Teacher> teacherCollection; 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T23:06:10.003

正确地说，它已经由 JPA 实现完成，在您的情况下：TopLink。您不需要`StudentTeacher`实体，因为它本身不是实体，它只是实体-关系方案所需的辅助表，以便为您的多对多关系建模。

如果除了两个实体的外键之外，您之间的关系`Student`和具有其他属性，那么您将需要一个额外的实体，但您已经存在的实体 ( and ) 将不再具有多对多关系，而是一对多关系与该中介实体的多/多对一。`Teacher``Student``Teacher``StudentTeacher`

我的建议是，如果您的模型像您的示例一样简单，请保持原样。

# post - 在 Netty 3.x 中使用 HttpPostRequestDecoder

> ID：10050159
> 
> 赞同：0
> 
> 时间：2012-04-06T22:56:49.510
> 
> 标签：post, netty

我正在尝试将 Netty Extension 1.1.9 中的 HttpPostRequestDecoder 与 Netty 3.3.1 一起使用。但是，当我尝试从内置的 Netty HttpRequest 获取到 org.jboss.netty.handler.codec.http2 包中使用的内容时，我遇到了类转换问题。

解决这个问题的正确方法是什么？

```
org.jboss.netty.handler.codec.http.DefaultHttpRequest request;
HttpPostRequestDecoder decoder = new HttpPostRequestDecoder((org.jboss.netty.handler.codec.http.HttpRequest) request); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T17:50:14.993

我从未使用过 netty 扩展，但从快速查看源代码来看，您需要确保只使用它附带的 http 编解码器。从您的描述来看，您似乎尝试将 netty 附带的 http 编解码器内容与 netty 扩展程序附带的内容混合在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T05:12:56.327

您是否尝试过使用 master 分支中的 HttpPostRequestDecoder ？

[https://github.com/netty/netty/tree/master/codec-http/src/main/java/io/netty/handler/codec/http](https://github.com/netty/netty/tree/master/codec-http/src/main/java/io/netty/handler/codec/http)

它似乎对我有用。见[https://github.com/mashupbots/socko/tree/master/socko-webserver/src/main/java/org/mashupbots/socko/postdecoder](https://github.com/mashupbots/socko/tree/master/socko-webserver/src/main/java/org/mashupbots/socko/postdecoder)

您只需将所有相关文件放入源目录并更改名称空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T15:47:06.060

我最终在 http.DefaultHttpRequest 和 http2.DefaultHttpRequest 实现之间编写了一个小型转换器：

```
org.jboss.netty.handler.codec.http2.DefaultHttpRequest convertedRequest = new org.jboss.netty.handler.codec.http2.DefaultHttpRequest(HttpVersion.HTTP_1_0, org.jboss.netty.handler.codec.http2.HttpMethod.POST, request.getUri());
convertedRequest.setContent(request.getContent());
convertedRequest.setChunked(request.isChunked());
// convert the headers
for (Entry<String, String> entry : request.getHeaders()) {
    convertedRequest.setHeader(entry.getKey(), entry.getValue());
} 
```

# c# - 打包 .NET 应用程序，使其在没有 .NET 的计算机上运行

> ID：10050160
> 
> 赞同：8
> 
> 时间：2012-04-06T22:56:59.620
> 
> 标签：c#, .net, redistributable

我最近一直在尝试在没有安装 .NET 的计算机上部署 C# 应用程序。

我知道 StackOverflow 上有*很多*关于同一主题的问题。以下是其中一些，我阅读了所有人的回复：

[使用 .net 应用程序部署打包 .net 框架](https://stackoverflow.com/questions/162845/packaging-up-the-net-framework-with-a-net-application-deployment)

[在不安装 .net 客户端配置文件的情况下运行 .net 应用程序？](https://stackoverflow.com/questions/7289213/run-a-net-application-without-installing-net-client-profile)

[在 windows XP 中运行 C# windows 应用程序而不安装 .NET Framework](https://stackoverflow.com/questions/4930831/run-c-sharp-windows-application-in-windows-xp-without-installing-net-framework)

因此，对上述问题的所有答复都表明，没有特定软件等是不可能的。提到的一种软件是[Salamander .NET Linker](http://www.remotesoft.com/salamander/navigator.html?demo)。唯一的问题是，在 Salamender 处理该应用程序后，我似乎无法运行该应用程序。我知道这本身是不可能的，因为它需要 .NET 虚拟机才能运行。然而，在过去，我制作了 Java 应用程序，并与它们一起发布了整个 JVM。令人惊讶的是，它们仍然有效。所以这不是上述问题的重复的原因是因为我真正的问题是：

我需要打包 .NET 框架的哪些项目？如果我确实设法打包所有内容，是否将它们放在与我正在运行的应用程序相同的目录中允许应用程序运行？

我找到了一个解决方案，即[Microsoft .NET Redist Package](http://www.microsoft.com/download/en/confirmation.aspx?id=26)。唯一的问题是它有自己的 GUI。除此之外，这将是一个完美的契合。所以，谁能告诉我两件事之一：

是否有命令行 .NET 包，如果有，我在哪里下载？

如果没有，或者这样做不切实际，我需要从 .NET 安装中复制大约哪些目录？

我知道这些文件和目录是系统特定的，我的 .NET 安装可能无法在您的计算机上运行，​​但如果 C# 类似于 Java，那么这应该是可以实现的。是吗？大小不是限制，应用程序及其所有文件是否为 1GB 或仅为 1MB 对我来说并不重要。

如果没有其他解决方案，我使用[Dependency Walker](http://www.dependencywalker.com/)检查程序的所有依赖项。如果我要打包其中的大部分，理论上我的应用程序会起作用吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-06T23:05:08.023

对于 .NET，您确实*必须*安装适当的 .NET 框架。.NET 框架安装确实包含命令行选项以允许静默安装，例如：

```
dotnetfx35.exe /q /norestart 
```

有关命令行选项的详细信息，请参阅[3.5](http://msdn.microsoft.com/en-us/library/cc160716.aspx)和[.NET 4.0](http://blogs.msdn.com/b/astebner/archive/2010/05/12/10011664.aspx)的选项。

话虽如此，大多数安装包都会在安装过程中为您处理这些详细信息。使用体面的安装程序将自动处理这种依赖关系。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-06T23:09:26.890

根据您需要的 .NET Framework 的各个部分，您可以使用[Mono](http://www.mono-project.com/Main_Page)。它支持无需像 JVM 那样安装即可交付运行时，或者您可以静态链接二进制文件以创建本机可执行文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T23:23:43.313

如果您计划部署您的应用程序（并且假设安装过程不需要太复杂），您可以简单地[在 Visual Studio 中创建一个安装项目](http://msdn.microsoft.com/en-us/library/2kt85ked.aspx)，然后引导先决条件（.NET 框架和其他您认为的东西可能需要）。

您可以按照这些 MSDN 文章中描述的步骤进行操作：

*   [如何在 Visual Studio 中创建安装项目](http://msdn.microsoft.com/en-us/library/19x10e5c.aspx)
*   [如何将先决条件添加到安装项目](http://msdn.microsoft.com/en-us/library/7eh4aaa5.aspx)

[此 CodeProject 文章](http://www.codeproject.com/Articles/35976/Add-Prerequisites-of-NET-Framework-in-Visual-Studi)中提供了演练。

对于更复杂的部署方案（例如在您的应用程序中安装设备驱动程序，或更好的本地化支持），我建议查看[WiX (Windows Installer XML) 工具集](http://wix.sourceforge.net/)。它是一个构建 Windows 安装包的工具集，您可以使用 Visual Studio 中的 XML 文件对其进行配置。WiX 还支持各种[引导方案](http://wix.sourceforge.net/manual-wix3/install_dotnet.htm)。

[本页](https://msdn.microsoft.com/en-us/library/ee721500(v=vs.100).aspx)介绍了 VS 安装项目、WiX 和 InstallShield 之间的区别。

# sas - if语句的sas编码问题

> ID：10050163
> 
> 赞同：0
> 
> 时间：2012-04-06T22:42:48.667
> 
> 标签：sas

我使用 if 语句创建一个新变量，但不起作用。我环顾四周，找不到问题出在哪里。

```
data sockeye;
 infile 'c:/sockeye.csv';
 length data $8.;  
 input data $ sockeye;
 if data='29-Jul' then sampweight =250/15;
 if data='30-Jul' then sampweight =250/15;
run;

data n_boats;
 length data$8.;
 data = '29-Jul';_total_=250;output;
 data = '30-Jul';_total_=250;output;
run;

proc surveymeans data=sockeye N=n_boats mean sum;
 strata data / list;
 var sockeye;
 weight sampweight;
run; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T12:53:56.900

对于第一部分，您正在尝试读取 .csv 文件。根据我的经验，最好使用导入向导来完成。这是特别的。对于日期是正确的，这在 SAS（和许多其他程序）中很难处理。

对于第二部分，带有 _ 前缀和后缀的变量由 SAS 创建。我不积极，但我认为你不能改变它们；我建议不要尝试。

一般来说，我会避免将变量命名为“数据”之类的东西，这是 SAS 中的一个关键字。此外，该变量名称是不具信息性的。显然，这些是日期。因此，变量名称应该类似于 dateXXX，其中 XXX 表示日期。

# javascript - Spotify：如何防止它记得听过超过 1 首歌曲？

> ID：10050166
> 
> 赞同：0
> 
> 时间：2012-04-06T22:57:50.660
> 
> 标签：javascript, api, spotify, playlist

我正在为 Spotify 申请。有了这个应用程序，我有一个简单的“订阅”功能，它允许我从用户正在收听的当前曲目中添加专辑的播放列表。一切正常。虽然我有这个错误。听完超过一首歌曲后，当我按下订阅按钮时，它会为每首听过的歌曲附加一个播放列表。

例如：我听了专辑的 3 首歌曲，然后按订阅：它将为每首歌曲附加 3 个播放列表。然后：如果我然后听另一张专辑中的歌曲，当按下订阅时，它将为新歌曲和前 3 首歌曲附加一个播放列表。这一直发生，直到我重新加载应用程序。

似乎它会记住加载应用程序后听过的每一首歌。

这是我的代码：

函数订阅（）{

```
//Cache important information
var playerTrackInfo = player.track;
var track = playerTrackInfo.data;
var albumUri = track.album.uri;
var albumTitle = track.album.name;
var artistFromAlbum = track.album.artist.name;

//Click event on button
$(".subscribe button").on("click", function(playlist){
    console.log("I work!"); //Checks if button click works

    //Creates new playlist "Albumtitle - Artistname"
    var playlist = new models.Playlist(albumTitle+" - "+artistFromAlbum);

    //Fills in playlist with album from current playing track
    models.Album.fromURI(albumUri, function(album){
        $(album.tracks).each(function(i) {
            playlist.add(album.tracks[i]);
        });
    });

    playlist.subscribed = true;

    playlist.observe(models.EVENT.CHANGE, function() {
        console.log("Playlist was subscribed!");
    });
}); 
```

}

我需要一种方法来防止这个问题。我尝试了很多不同的方法并无休止地搜索网络，但到目前为止还没有运气。任何帮助或指向正确方向都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T21:33:20.037

我已经解决了这个问题。

有两件事导致了这个错误。这是解决方案：

1.  我将所有变量都放在了点击事件中。

2.  我在代码的其他地方有一个 eventListener ，这也使它成为错误。该事件监听器检测到他们的玩家状态是否发生了变化，如果为真，它将刷新初始化。但是，它显然将变量堆叠在我的 subscribe() 中。在将它从 eventListener 中取出并替换 var 之后，它终于可以正常工作了。

    ```
    function subscribe(){

     //Click event on button within div with class 'subscribe'
     $(".subscribe button").on("click", function(playlist){
    console.log("I work!"); //Checks if button click works

    //Cache important information
    var playerTrackInfo = player.track;
    var track = playerTrackInfo.data;
    var albumUri = track.album.uri;

    //Creates new playlist "Albumtitle - Artistname"
    var albumTitle = track.album.name;
    var artistFromAlbum = track.album.artist.name;
    var playlist = new models.Playlist(albumTitle +" - "+ artistFromAlbum);

    //Fills in playlist with album from current playing track
    models.Album.fromURI(albumUri, function(album){
        $(album.tracks).each(function(i) {
            playlist.add(album.tracks[i]);
        });
    });

    playlist.subscribed = true;

    playlist.observe(models.EVENT.CHANGE, function() {
        console.log("Playlist was subscribed!");
    }); 
    ```

    }); }

感谢帮助人们！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T10:13:48.077

好吧，它每次都会创建一个全新的播放列表，因为您在每次点击时都这样做：

`var playlist = new models.Playlist(albumTitle+" - "+artistFromAlbum);`

在`new`那一行中的真正意味着它;-)

如果您想通过多次点击使用相同的播放列表，请将您创建的播放列表存储在某个变量中，以便您以后可以再次访问它。不幸的是，目前无法查看用户拥有的播放列表列表。

# c# - Moq、抽象类和虚拟属性

> ID：10050168
> 
> 赞同：3
> 
> 时间：2012-04-06T22:58:01.957
> 
> 标签：c#, .net, unit-testing, mocking, moq

我正在使用`Moq`Mocking 框架。

我有一个`SocialWorker`派生自一个`abstract DataWorker`类。

参考`SocialWorker`了几个`Repositories`作为`virtual property`

我正在尝试运行以下测试：

```
private Place _place;
private Mock<IRepository<Resources.Data.Place>> _placeRepositoryMock;
private Mock<SocialWorker> _socialWorkerMock;

[SetUp]
public void SetUp()
{
    _place = new Place {Name = "A"};

    _socialWorkerMock = new Mock<SocialWorker> {DefaultValue = DefaultValue.Mock};

    IRepository<Resources.Data.Place> placeRepository = _socialWorkerMock.Object.PlaceRepository;

    _placeRepositoryMock = Mock.Get(placeRepository);

    _placeRepositoryMock.Setup(
        repository =>
        repository.Find(It.IsAny<Expression<Func<Resources.Data.Place, bool>>>(), null, null))
        .Returns(new[] {new Resources.Data.Place()});
}

[Test]
public void AddShouldAddANewPlace()
{
    var placeManager = new PlaceManager(_socialWorkerMock.Object);

    object placeEntity = placeManager.Add(_place);

    placeEntity.GetType().Should().Equal(typeof (Resources.Data.Place));

    _socialWorkerMock.Verify(
        socialWorker => socialWorker.PlaceRepository.Add(It.IsAny<Resources.Data.Place>()), Times.Once());

    _placeRepositoryMock.Verify(
        placeRepository =>
        placeRepository.Find(p => p.Name.Equals(_place.Name), null, null).First(),
        Times.Once());
} 
```

此测试的最后验证失败并出现以下错误：

```
System.NotSupportedException : Invalid verify on a non-virtual (overridable in VB) member: placeRepository => placeRepository.Find(p => p.Name.Equals(._place.Name), null, null).First<Place>() 
```

我对起订量和一般的单元测试相当陌生。

以下是相关代码供您参考：

`IUnitOfWork`

```
public interface IUnitOfWork : IDisposable
{
    void CommitChanges();
} 
```

`IRepository`

```
public interface IRepository<T>
{
    void Add(T entity);

    void Delete(T entity);

    IEnumerable<T> Find(Expression<Func<T, bool>> filter = null,
                        Func<IQueryable<T>, IOrderedQueryable<T>> orderBy = null,
                        IList<string> includedProperties = null);

    T FindById(object id);

    void Update(T entity);
} 
```

`DataWorker`

```
public abstract class DataWorker : IUnitOfWork
{
    protected ObjectContext ObjectContext;
    private bool _disposed;

    protected DataWorker()
    {
        ObjectContext = new ObjectContext(ConfigurationManager.ConnectionStrings["DataEntities"].ConnectionString);
    }

    ~DataWorker()
    {
        . . .
    }

    protected virtual void Dispose(bool disposing)
    {
        . . .
    }

    public virtual void CommitChanges()
    {
        ObjectContext.SaveChanges();
    }

    public void Dispose()
    {
        . . .
    }
} 
```

`DataRepository`

```
public class DataRepository<T> : IRepository<T> where T : EntityObject
{
    private readonly ObjectSet<T> _objectSet;

    public DataRepository(ObjectContext objectContext)
    {
            _objectSet = objectContext.CreateObjectSet<T>();
    }

    public void Add(T entity)
    {
        . . .
    }

    public void Delete(T entity)
    {
        . . .
    }

    public virtual IEnumerable<T> Find(Expression<Func<T, bool>> filter = null,
                               Func<IQueryable<T>, IOrderedQueryable<T>> orderBy = null,
                               IList<string> includedProperties = null)
    {
        . . .
    }

    public T FindById(object id)
    {
        . . .
    }

    public void Update(T entity)
    {
        . . .
    }
} 
```

`SocialWorker`

```
public class SocialWorker : DataWorker
{
    private IRepository<ContactRequest> _contactRequestRepository;
    private IRepository<Place> _placeRepository;
    private IRepository<User> _userRepository;

    public virtual IRepository<ContactRequest> ContactRequestRepository
    {
        get
        {
            return _contactRequestRepository ??
                   (_contactRequestRepository = new DataRepository<ContactRequest>(ObjectContext));
        }
    }

    public virtual IRepository<Place> PlaceRepository
    {
        get { return _placeRepository ?? (_placeRepository = new DataRepository<Place>(ObjectContext)); }
    }

    public virtual IRepository<User> UserRepository
    {
        get { return _userRepository ?? (_userRepository = new DataRepository<User>(ObjectContext)); }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T13:09:49.420

我对你的代码试图做什么感到困惑，设计似乎有点奇怪。

首先，你遇到问题的测试是引用一个`PlaceManager`你没有指定的 class ，因为这是测试的一部分，很难看出哪里出了问题。

此外，我不确定 PlaceManager 的用途。您的设计具有`SocialWorker`提供 的属性`PlaceRepository`，那么`PlaceManager`for 是什么，为什么要通过 a `SocialWorker`？`SocialWorker`自己不管理`PlaceRepository`？

你为什么不打电话`_socialWorker.PlaceRepository.Add(place)`，或者更直接一点`_socialWorker.Add(place)`？

我只是猜测`PlaceManger`访问 . `SocialWorker.PlaceRepository`，但我不明白为什么作为`SocialWorker.PlaceRepository`公共财产，没有什么可以阻止任何人直接使用并忽略`PlaceManager`. 那就是如果`PlaceManager`也是某种`Repository`for `Place`。

此外，您的`IRepository`代码有`Add()`一个 void，但`PlaceManager`返回一个`object`. 为什么这不是强类型的`Place`？看来这就是您所期望的...并且您的`PlaceManager.Add()`方法返回 a `Place`，尽管该`Repository` `Add()`方法是`void`. （它被坚持到上下文之后是同一个地方吗？）你`PlaceManager`在做其他事情`Place`吗？

也许我有错误的一端？您能否进一步说明您的代码的意图是什么，而不是它的作用？抱歉有这么多问题，但我想知道你的设计应该做什么，然后再弄清楚你为什么要尝试验证非虚拟......

我认为具体问题的原因是，在您的验证中，您`Find`期望`First()`对虚拟的或抽象的。

`First()`无论如何，我不确定你为什么要反对。您正在验证的方法只是：

```
_placeRepositoryMock.Verify(placeRepository =>
   placeRepository.Find(p => p.Name.Equals(_place.Name), null, null),
   Times.Once()); 
```

这就是实际调用的内容，因为这是存储库中方法的签名。您只能检查是否调用了接口方法。

# .net - 通过 HTTPS 的 WCF basic256 消息加密

> ID：10050171
> 
> 赞同：2
> 
> 时间：2012-04-06T22:58:09.183
> 
> 标签：.net, wcf, security, encryption

是否可以使用 basic256 加密对消息进行加密，并使用 basicHttpBinding 在 WCF 中通过 HTTPS 发送消息？我知道有一种名为 TransportWithMessageCredentials 的安全模式，但它需要一个 clientCredentialType 用于消息，并且“none”不是一个选项。此外，所有 basic256 算法（AES 256）是否在 WCF 中使用密码？如果是这样，我们如何知道这些密钥的长度？如果不是，我们可以指定指定长度的密钥吗？是否可配置？

# macos - 在我的 Mac 上运行 play framework 2.0 时出错 (NoSuchMethodError)

> ID：10050174
> 
> 赞同：1
> 
> 时间：2012-04-06T22:58:28.463
> 
> 标签：macos, logging, playframework, slf4j, playframework-2.0

我只是在我的 mac 上试用 play framework 2.0。我已经使用 Play 1.x 一段时间了，没有任何问题。我已经下载了新框架，更新了我的 PATH 以指向新版本的 play 并创建了一个简单的 Java 项目（'play new testapp'）

当我调用 play run 时，出现以下错误：

```
log4j:WARN No appenders could be found for logger (akka.event.slf4j.Slf4jEventHandler).
log4j:WARN Please initialize the log4j system properly.
[error] java.lang.NoSuchMethodError: org.slf4j.spi.LocationAwareLogger.log(Lorg/slf4j/Marker;Ljava/lang/String;ILjava/lang/String;[Ljava/lang/Object;Ljava/lang/Throwable;)V
[error] Use 'last' for the full log. 
```

根据上面的错误，我运行了“last”命令，下面是由此产生的堆栈跟踪的摘录：

```
java.lang.NoSuchMethodError: org.slf4j.spi.LocationAwareLogger.log(Lorg/slf4j/Marker;Ljava/lang/String;ILjava/lang/String;[Ljava/lang/Object;Ljava/lang/Throwable;)V
    at org.slf4j.bridge.SLF4JBridgeHandler.callLocationAwareLogger(SLF4JBridgeHandler.java:203)
    at org.slf4j.bridge.SLF4JBridgeHandler.publish(SLF4JBridgeHandler.java:278)
    at java.util.logging.Logger.log(Logger.java:478)
    at java.util.logging.Logger.doLog(Logger.java:500)
    at java.util.logging.Logger.logp(Logger.java:616)
    at org.jboss.netty.logging.JdkLogger.debug(JdkLogger.java:36)
    at org.jboss.netty.logging.InternalLoggerFactory$1.debug(InternalLoggerFactory.java:80)
    at org.jboss.netty.channel.socket.nio.NioProviderMetadata.<clinit>(NioProviderMetadata.java:95)
    at org.jboss.netty.channel.socket.nio.NioWorker.<clinit>(NioWorker.java:58)
    at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.<init>(NioServerSocketPipelineSink.java:58)
    at org.jboss.netty.channel.socket.nio.NioServerSocketChannelFactory.<init>(NioServerSocketChannelFactory.java:133)
    at org.jboss.netty.channel.socket.nio.NioServerSocketChannelFactory.<init>(NioServerSocketChannelFactory.java:104)
    at play.core.server.NettyServer.<init>(NettyServer.scala:43) 
```

我启动了一个 Ubuntu VM 并完成了相同的过程，应用程序运行良好。有什么建议么？

* * *

编辑：我运行 play classpath 来获取应用程序的类路径，这是输出（将目录的公共部分替换为 ...）：

```
Here is the computed classpath of your application:

- .../testapp/target/scala-2.9.1/classes
- ...play-latest/framework/sbt/boot/scala-2.9.1/lib/scala-library.jar
- ...play-latest/framework/../repository/local/play/play_2.9.1/2.0/jars/play_2.9.1.jar
- ...play-latest/framework/../repository/local/play/templates_2.9.1/2.0/jars/templates_2.9.1.jar
- ...play-latest/repository/local/com.github.scala-incubator.io/scala-io-file_2.9.1/0.2.0/jars/scala-io-file_2.9.1.jar
- ...play-latest/repository/local/com.github.scala-incubator.io/scala-io-core_2.9.1/0.2.0/jars/scala-io-core_2.9.1.jar
- ...play-latest/repository/local/com.github.jsuereth.scala-arm/scala-arm_2.9.1/0.3/jars/scala-arm_2.9.1.jar
- ...play-latest/framework/../repository/local/play/anorm_2.9.1/2.0/jars/anorm_2.9.1.jar
- ...play-latest/framework/../repository/local/io.netty/netty/3.3.0.Final/bundles/netty.jar
- ...play-latest/framework/../repository/local/org.slf4j/slf4j-api/1.6.4/jars/slf4j-api.jar
- ...play-latest/framework/../repository/local/org.slf4j/jul-to-slf4j/1.6.4/jars/jul-to-slf4j.jar
- ...play-latest/framework/../repository/local/org.slf4j/jcl-over-slf4j/1.6.4/jars/jcl-over-slf4j.jar
- ...play-latest/framework/../repository/local/ch.qos.logback/logback-core/1.0.0/jars/logback-core.jar
- ...play-latest/framework/../repository/local/ch.qos.logback/logback-classic/1.0.0/jars/logback-classic.jar
- ...play-latest/framework/../repository/local/com.typesafe.akka/akka-actor/2.0/jars/akka-actor.jar
- ...play-latest/framework/../repository/local/com.typesafe.akka/akka-slf4j/2.0/jars/akka-slf4j.jar
- ...play-latest/framework/../repository/local/com.google.guava/guava/10.0.1/jars/guava.jar
- ...play-latest/framework/../repository/local/com.google.code.findbugs/jsr305/1.3.9/jars/jsr305.jar
- ...play-latest/framework/../repository/local/org.avaje/ebean/2.7.3/jars/ebean.jar
- ...play-latest/framework/../repository/local/org.hibernate.javax.persistence/hibernate-jpa-2.0-api/1.0.1.Final/jars/hibernate-jpa-2.0-api.jar
- ...play-latest/framework/../repository/local/com.h2database/h2/1.3.158/jars/h2.jar
- ...play-latest/framework/../repository/local/org.scala-tools/scala-stm_2.9.1/0.4/jars/scala-stm_2.9.1.jar
- ...play-latest/framework/../repository/local/com.jolbox/bonecp/0.7.1.RELEASE/bundles/bonecp.jar
- ...play-latest/framework/../repository/local/org.yaml/snakeyaml/1.9/bundles/snakeyaml.jar
- ...play-latest/framework/../repository/local/org.hibernate/hibernate-validator/4.2.0.Final/jars/hibernate-validator.jar
- ...play-latest/framework/../repository/local/javax.validation/validation-api/1.0.0.GA/jars/validation-api.jar
- ...play-latest/framework/../repository/local/org.springframework/spring-context/3.0.7.RELEASE/jars/spring-context.jar
- ...play-latest/framework/../repository/local/org.springframework/spring-core/3.0.7.RELEASE/jars/spring-core.jar
- ...play-latest/framework/../repository/local/org.springframework/spring-beans/3.0.7.RELEASE/jars/spring-beans.jar
- ...play-latest/framework/../repository/local/joda-time/joda-time/2.0/jars/joda-time.jar
- ...play-latest/framework/../repository/local/org.joda/joda-convert/1.1/jars/joda-convert.jar
- ...play-latest/framework/../repository/local/javassist/javassist/3.12.1.GA/jars/javassist.jar
- ...play-latest/framework/../repository/local/commons-lang/commons-lang/2.6/jars/commons-lang.jar
- ...play-latest/framework/../repository/local/com.ning/async-http-client/1.7.0/jars/async-http-client.jar
- ...play-latest/framework/../repository/local/oauth.signpost/signpost-core/1.2.1.1/jars/signpost-core.jar
- ...play-latest/framework/../repository/local/commons-codec/commons-codec/1.3/jars/commons-codec.jar
- ...play-latest/framework/../repository/local/com.codahale/jerkson_2.9.1/0.5.0/jars/jerkson_2.9.1.jar
- ...play-latest/framework/../repository/local/org.codehaus.jackson/jackson-core-asl/1.9.5/jars/jackson-core-asl.jar
- ...play-latest/framework/../repository/local/org.codehaus.jackson/jackson-mapper-asl/1.9.5/jars/jackson-mapper-asl.jar
- ...play-latest/framework/../repository/local/org.reflections/reflections/0.9.6/jars/reflections.jar
- ...play-latest/framework/../repository/local/javax.servlet/javax.servlet-api/3.0.1/jars/javax.servlet-api.jar
- ...play-latest/framework/../repository/local/javax.transaction/jta/1.1/jars/jta.jar
- ...play-latest/framework/../repository/local/tyrex/tyrex/1.0.1/jars/tyrex.jar
- ...play-latest/framework/../repository/local/jaxen/jaxen/1.1.3/jars/jaxen.jar
- ...play-latest/framework/../repository/local/net.sf.ehcache/ehcache-core/2.5.0/jars/ehcache-core.jar 
```

# java - 需要对此 Java 语法的解释

> ID：10050176
> 
> 赞同：2
> 
> 时间：2012-04-06T22:58:33.153
> 
> 标签：java, arrays, syntax

有人可以解释以下内容吗？

```
private HashSet nodes[]; 
nodes = new HashSet[21]; 
```

我有点困惑......之间的区别

```
private HashSet nodes = new HashSet; 
```

和以上，特别是在方括号语法方面。这是一个 HashSet 数组吗？因为通常我习惯于看到

```
int[] myarray = new int[21]; 
```

或类似的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T23:00:50.433

它们只是替代品 - 不幸的是，两者都是有效的。

哎呀，即使这也是有效的：

```
int[] bad [] = null; 
```

这相当于

```
int[][] bad = null; 
```

显然不要这样做:)

从[JLS 的第 10.2 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.2)：

> [] 可以作为类型的一部分出现在声明的开头，或者作为特定变量的声明符的一部分，或者两者兼而有之。

和

> 我们不建议在数组变量声明中使用“混合表示法”，其中括号出现在类型和声明符中。

基本上，使用将所有类型信息保存在一个地方的表单 - 您习惯的表单。这是*绝大多数*惯用的形式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T23:00:50.227

> ```
> private HashSet nodes = new HashSet; 
> ```

不是有效的 Java。与 JavaScript 不同，`new`Java 中的运算符始终需要带括号的参数列表。

> ```
> private HashSet nodes = new HashSet(21); 
> ```

不同于

> ```
> private HashSet[] nodes = new HashSet[21]; 
> ```

因为前者构造了一个`HashSet`集合，该集合最初有足够的空间容纳 21 个集合项，而后者是一个`21`空值数组，可以填充对集合的引用。

* * *

> ```
> private HashSet nodes[]; 
> ```

声明一个成员变量，它可以引用任何元素类型为 的数组`HashSet`。

> ```
> nodes = new HashSet[21]; 
> ```

创建一个包含 21 个引用空间的数组`HashSet`并将其分配给该成员变量。

请记住，在 Java 中，与 C 不同，`HashSet[21]`它不是一种类型，因此您不能只通过以下方式为 Java 中的数组分配空间

```
int[21] myints; 
```

在某些时候，您必须通过创建一个数组

*   `new <type>[size]`,
*   缩写语法`new <type> { element0, element1, element2, ... }`，
*   或反射性地通过`java.lang.reflect.Array.newInstance`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T22:59:22.393

是的，它是一个数组`HashSets`。

```
HashSet nodes[]; 
```

是相同的

```
HashSet[] nodes; 
```

仅当您使用逗号一次声明一堆变量时，放置括号的位置的差异才变得重要：

```
HashSet[] alpha, bravo, charlie; // Three arrays of hashsets
HashSet delta[], echo, foxtrot; // One array (delta) and two hashsets (echo and foxtrot) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T23:02:52.610

在 Java 中，声明

```
private HashSet nodes[]; 
```

相当于声明

```
private HashSet[] nodes; 
```

它可以读作“一个 HashSet 数组”或“一个 HashSet 数组”。

# java - 表达式的类型必须是数组类型，但解析为 char

> ID：10050183
> 
> 赞同：1
> 
> 时间：2012-04-06T22:59:51.130
> 
> 标签：java, arrays, for-loop, char, tile

```
 import java.awt.Color;
import java.awt.Graphics;

import javax.swing.JFrame;

public class Sheet extends JFrame{
    private String[] line = {
    "wwwwwwffwwwwww",       
    "wwwwwwfffffffw",       
    "wwwwwwffwwwffw",       
    "wwwwwwffwwwffw",
    "wwwwwwfffffffw",
    "wwwwwwffwwwwww"        
    };
    String line1 = "wwwwwffwwwww";
            int tileX =50;
    int tileY= 50;
    public Sheet(){
        //setUndecorated(true);
        setVisible(true);
        setSize(400,400);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        //setResizable(false);
        setTitle("window");
    }
    public static void main(String[] args){
        Sheet frame = new Sheet();

    }
    public void paint(Graphics g){

        g.setColor(Color.black);
        g.drawRect(0,100,1000,1);
        for(int i = 0; i<line.length; i++){
            for(int f = 0; f<line[i].length(); f++){
                char line = line[f].charAt(i);

            }
        }
    }
} 
```

这是我的代码，我正在尝试制作一个根据字符串数组绘制图块的程序。在这个绘制方法中，我有 2 个 for 循环，一个循环遍历行的数组索引，一个循环遍历数组的字符。我收到此错误：

线程“AWT-EventQueue-0”java.lang.Error 中的异常：未解决的编译问题：表达式的类型必须是数组类型，但它解析为 char

```
at Sheet.paint(Sheet.java:36) 
```

请问有人可以帮我解决这个问题吗？我试过没有成功。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T23:03:44.223

您正在尝试重新声明`line`变量。更改变量名称，您应该没问题：

```
char c = line[f].charAt(i); 
```

这是一个相当模糊的错误消息，因为当编译器理解您正在声明一个类型`char`为 name的变量`line`时，当它查看它看到`line[f]`并认为这很疯狂的初始化程序时。变量甚至不会被赋值的事实*只是*另一个问题:)

# c# - 什么是歌曲的 AudioImporter？

> ID：10050185
> 
> 赞同：0
> 
> 时间：2012-04-06T23:00:08.883
> 
> 标签：c#, xna

我正在尝试找出一首歌曲的进口商名称应该是什么？

```
context.BuildAsset<AudioContent, SongContent>(new ExternalReference<AudioContent>(filename), "SongProcessor", null, "**AudioImporter**", Path.GetFileNameWithoutExtension(filename)); 
```

谢谢，西蒙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T10:48:39.563

看起来好像是**Mp3Importer**。

# emacs - 是否可以告诉 Windows 上的 emacs 使用 IE http 代理设置？

> ID：10050186
> 
> 赞同：12
> 
> 时间：2012-04-06T23:00:23.173
> 
> 标签：emacs, elisp, http-proxy

> 另请参阅：[HTTP 代理背后的 Emacs](https://stackoverflow.com/questions/1595418/emacs-behind-http-proxy)

是否可以告诉 emacs*自动*使用 IE 使用的任何代理设置？

url.el 包说我可以像这样显式指定代理：

```
(setq url-using-proxy t)
(setq url-proxy-services  '(("http" . "proxyserver:3128"))) 
```

当我更改 IE 代理设置时，这可能会自动发生吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-06T23:03:26.573

是的，这是可能的。

基本思想是为 URL 函数定义预先通知，并将这些变量设置为适当的值。这需要能够从 elisp 中检索来自 Windows 的 IE 代理设置。

[w32-registry 包](http://marmalade-repo.org/packages/w32-registry)执行此操作。

因此，在 Windows 上，您可以这样做：

```
(eval-after-load "url"
  '(progn
     (require 'w32-registry)
     (defadvice url-retrieve (before
                              w32-set-proxy-dynamically
                              activate)
       "Before retrieving a URL, query the IE Proxy settings, and use them."
       (let ((proxy (w32reg-get-ie-proxy-config)))
         (setq url-using-proxy proxy
               url-proxy-services proxy))))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T21:57:15.643

如果您通过浏览 URL 处理 URL，您还可以将其设置为 Windows 特定功能，如下所示。然后 URL 将由 Windows 处理（调用您的默认浏览器）。

> browse-url-browser-function 是在 `browse-url.el' 中定义的变量。
> 
> 它的值是browse-url-default-windows-browser

# c - 在 C 中捕获用户的“输入”键击

> ID：10050188
> 
> 赞同：2
> 
> 时间：2012-04-06T23:00:37.553
> 
> 标签：c

我现在开始学习 C，我试图弄清楚当用户点击“输入”时我将如何捕捉。我特别关注 scanf 和 getc 函数，但我不太确定如何去做。当用户点击回车时，我想在等待/观看他再次点击回车时执行一些操作......“输入”是来自控制台的换行符吗？任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T23:04:10.677

您可以使用 fgetc() 检查 ascii 值。

```
while(condition) {
    int c = fgetc(stdin);

    if (c==10) {//Enter key is pressed
    //your action
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T23:08:58.507

如果您只需要在用户按 enter 作为输入时输入，您可以使用`scanf`or `getchar`。这是来自[cplusplus.com的示例](http://www.cplusplus.com/reference/clibrary/cstdio/getchar/)

```
/* getchar example : typewriter */
#include <stdio.h>

int main ()
{
  char c;
  puts ("Enter text. Include a dot ('.') in a sentence to exit:");
  do {
    c=getchar();
    putchar (c);
  } while (c != '.');
  return 0;
} 
```

此代码将您输入的内容打印到标准输入（终端窗口）。

但是，如果您不想要输入（我知道对于新学习者来说这确实是不必要且复杂的），您应该使用事件处理程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T23:17:37.637

```
printf("Hit RETURN to exit"\n");
fflush(stdout);
(void)getchar(); 
```

参考：[comp.lang.c 常见问题列表 · 问题 19.4b](http://c-faq.com/osdep/waitforkey.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T23:10:46.250

C 语言是独立于平台的，它本身没有任何键盘交互。当您编写控制台程序时，控制台会处理键盘输入，然后将其作为标准输入传递给您的程序。控制台输入/输出通常是缓冲的，因此您无法对单个按键做出反应，因为控制台仅在每行之后将输入发送到程序。

然而！`<conio.h>`如果您不要求控制台应用程序独立于平台，则在某些 Windows 编译器中有一个非标准库，`getche();`它有一个名为`char`被按下。

# c++ - 运算符 new[] 定义分解

> ID：10050189
> 
> 赞同：1
> 
> 时间：2012-04-06T23:00:38.887
> 
> 标签：c++, operator-overloading

我很难消化这种语法：

```
void* operator new[](std::size_t, const std::nothrow_t&) throw(); 
```

虽然这仍然可以理解：

```
void* operator new (std::size_t size, const std::nothrow_t& nothrow_constant) throw(); 
```

问题：

1.  我认为`new`和下标`[]`是不同的运算符。我们如何在一个定义中组合两个运算符以重载？

2.  还有`nowthrow`. 以下调用对我没有意义（关于函数的签名）。

    ```
     int * p2 = new (nothrow) int; 
    ```

如果有人可以参考 bjarne stroustrup 书中的相关主题，那就太好了，但不是硬性要求。

更新：请尝试回答这两个问题:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T23:06:59.917

new[] 和 [] 是两个完全不同的运算符。

new[] 是数组的分配运算符，[] 是数组的下标访问运算符。

new[] 是它自己的运算符，它不仅仅是结合了 '[]' 下标运算符的 'new' 分配器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T23:19:30.140

前两个是全球新运营商的签名。对于（很少）它的价值，`operator new`用于为新表达式分配空间，例如`x = new T;`，而`operator new[]`用于为新表达式分配空间，例如`x = new T[count];`. 它的价值“小”有一个相当简单的原因：你永远不应该使用`new T[count]`，所以它的工作原理几乎纯粹是一个历史好奇心。

如果您愿意，您可以重载`::operator new`和/或提供您自己的堆分配。`::operator new[]`就基本要求而言，两者之间*没有区别*——它们都只是分配并返回一个指向所请求内存量的指针。

就目前`nothrow`而言，传递给的大小`operator new`总是由编译器根据对象的大小计算出来的，如果是新数组，则计算你给出的计数。因此，您在新表达式中指定的参数变成传递给的第二个参数`operator new`。

为了强调一点，我在上面可能还不够清楚：`operator new`(and `operator new[]`) 被使用，但与新表达式分开（当你说类似的东西时，你在代码中的内容`x = new T;`）。`operator new`并且`operator new[]`非常像`malloc`- 他们只是分配“原始”内存。一个新的表达式¹使用其中一个来分配原始内存，然后调用构造函数在该内存中分配一个对象（或多个，在 的情况下`new T[count];`）。这两者显然是相关的，但同样显然不是真的相同。

另一个小问题：也可以有一个`operator new`（或`operator new[]`作为类成员。这允许您为该类分配与使用全局堆的其他类不同的内存。这对于您期望的小对象来说往往是最常见的大量分配。对于这些，全局堆通常有很多您希望避免的开销。

最后，当/如果你想分配原始内存，你也可以`operator new`直接调用，如`void *a = ::operator new(1234);`. 唯一常见的地方是如果您决定自己实现某种集合类（例如，如果您想要一个循环缓冲区）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T23:07:17.220

`new`并且`new[]`是两个独立的运算符，与“[]”运算符没有真正的关系。`delete p`最好从和之间的区别中看出这一点`delete[] p`；您是要删除 指向的单个实例`p`，还是整个实例数组？

同样，`new[]`是一种分配整个对象数组的方法，所有对象都在同一个内存块中。

# ruby-on-rails - 检查 url 参数是否存在并在 Rails 中正确呈现

> ID：10050196
> 
> 赞同：2
> 
> 时间：2012-04-06T23:02:23.343
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个这种格式的 URL `http://0.0.0.0:3000/#&ui-state=dialog`。我想检查是否存在，`ui-state`以便我可以适当地呈现页面。我试过这个

```
params.has_key?(:'ui-state') 
```

但它没有用。

如何检查 ui-state 是否存在？

* * *

解决方案

我正在使用 jQuery 手机。看起来像 url 参数的东西实际上是 jQuery mobile 的内部属性。这就是为什么没有`?`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T23:25:46.550

如果您发布的部分示例 URL ( `http://.../&ui-state=dialog`) 是您的实际 URL，则它是不正确的。您的查询字符串必须以 a 开头，`?`如`http://.../?ui-state=dialog`. `&`无法启动查询字符串。

### 更新

因为这是来自 jQuery 而不是真正的 URL 参数，所以它不会出现`params`在 Rails 中。相反，您需要将其解析为`request.url`：

```
ui_state = /&ui-state=([a-z]+)$/.match(request.url)
puts ui_state[1] 
```

### 更新2

由于`&ui-state`跟随 url 散列`#`，它不会在`request.url`. 哈希严格来说是浏览器使用的客户端组件，不会在 HTTP 请求中发送到服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T23:07:22.407

你试过`params[:ui-state] == dialog`或`params[:ui-state].blank?`/`params[:ui-state] == ""`

# testing - 是否有适用于 Intersystems Cache 对象脚本的代码覆盖率分析工具？

> ID：10050197
> 
> 赞同：1
> 
> 时间：2012-04-06T23:02:33.847
> 
> 标签：testing, intersystems-cache

如果有某种调试 API 允许某人编写自己的代码覆盖率分析工具，那也是可以接受的。我不认为这是一个民意调查问题，因为此类工具的详尽列表可能很小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T07:46:24.987

没有现成的覆盖工具（afaik）。但是，您也许可以使用 MONLBL 工具（[此处](http://docs.intersystems.com/cache20121/csp/docbook/DocBook.UI.Page.cls?KEY=GCM_monlbl#GCM_C136592)）。引入这些是为了能够识别性能热点。查看这些代码会很有趣，因为创建代码覆盖工具所需的钩子与创建性能监控所需的钩子非常相似。如果您可以访问 WRC，我强烈建议您向 ISC 提出此问题，这听起来绝对是很多人都可以使用的！高温高压

编辑：想一想，因为 monlbl 为您提供了执行行的次数，这是一个有好处的代码覆盖率；）所以，答案是：是的，有

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T11:07:52.037

在 Cache' Studio 中调试。
还有[^PERFMON](http://docs.intersystems.com/cache20121/csp/docbook/DocBook.UI.Page.cls?KEY=GCM_perfmon#GCM_perfmon_using)

# ios - GLSL：更改两个以上的顶点尺寸会使着色器崩溃

> ID：10050204
> 
> 赞同：1
> 
> 时间：2012-04-06T23:03:08.513
> 
> 标签：ios, memory, glsl, opengl-es-2.0, shader

出于测试目的，我试图将每个顶点的位置设置为零。但是如果我尝试改变两个以上的维度（无论哪个都没有关系），着色器会默默地崩溃。有人能告诉我这里发生了什么吗？我的代码：

```
static const float  vertices[12] = {
                -0.5,-0.5, 0.0,
                0.5,-0.5, 0.0,
                -0.5, 0.5, 0.0,
                0.5, 0.5, 0.0,
            };
glVertexAttribPointer(vertexHandle, 3, GL_FLOAT, GL_FALSE, 0, (const GLvoid*)vertices);
glEnableVertexAttribArray(vertexHandle);            
glUniformMatrix4fv(mvpMatrixHandle, 1, GL_FALSE, (const GLfloat*)&modelViewProjection.data[0]);
glDrawArrays(GL_POINTS, 0, 4); 
```

还有我的着色器：

```
attribute vec4 vertexPosition;
uniform mat4 modelViewProjectionMatrix;

void main()
{
    vec4 temp = vertexPosition;
    temp.x = 0.0;
    temp.y = 0.0;
    temp.z = 0.0; // Can set any 2 dimensions (e.g. x and y or y and z)
                  // to zero, but not all three or the shader crashes.

    gl_Position = modelViewProjectionMatrix * vec4(temp.xyz, 1.0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T00:15:21.963

也许是因为您声明`vertexPosition`为 a ，但您在 C 代码中每个顶点`vec4`仅传递 3秒？`float`我认为关于你的`temp`向量的部分是一个红鲱鱼。

# java - 在多个服务器之间复制缓存数据

> ID：10050205
> 
> 赞同：0
> 
> 时间：2012-04-06T23:03:12.003
> 
> 标签：java, caching, jakarta-ee, jboss, memcached

我正在开发一个应用程序，到目前为止，该应用程序在单个服务器上的 JBoss AS 上运行。现在需要进行故障转移，为此我们要添加另一台服务器并创建 JBoss 集群。这是问题所在：

到目前为止，该应用程序使用 Hashmap 来存储我们从数据库中获取的大约 200 万条记录。现在我必须将此数据复制到第二个节点（将来可能会添加更多节点）。我们需要存储的数据现在更有可能是 500 万条记录。

我只想对存储此键/值类型数据并将其复制到所有服务器节点的最佳方法发表意见。

我一直在考虑 Redis 或 memcached 是否是合适的解决方案？JBoss Cache 怎么样，我知道它是分布式缓存，可以复制到集群中的所有节点。

以下是我最担心的事情：

1.  对性能的影响 - 复制可能会导致网络延迟数据
2.  质量 - 希望避免处理过时的数据对内存的影响 -
3.  一旦数据加载到 HashMap/Cache 中，它就不会过期。可能会有一些记录的添加或删除，这些更改必须在所有节点上复制。
4.  可扩展性 - 正如我提到的......可以添加更多节点

对此的任何想法都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T00:58:27.460

由于您在 Java 环境中工作，我建议您查看 hazelcast (http://www.hazelcast.com/)。我们正在使用它来同步多个门户服务器，效果非常好！

# java - Java - 搜索和替换字符串的一部分

> ID：10050211
> 
> 赞同：0
> 
> 时间：2012-04-06T23:03:33.990
> 
> 标签：java

我想写一个简短的程序来代替字符串的计数。所以我想以 0 insted of 1 开始字符串。而且因为它是一个长字符串，我不想自己更改它。所以字符串（在这个例子中）是：字符串 LINE：

1.  Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore
2.  magna aliquyam erat，sed diam voluptua。
3.  在 vero eos et accusam et justo duo dolores et ea rebum。Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum
4.  dolor 坐在一起。Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore
5.  magna aliquyam erat，sed diam voluptua。在 vero eos et accusam et justo duo dolores et ea rebum。Stet clita kasd gubergren，
6.  no sea takimata sanctus est Lorem ipsum dolor sit amet。

我希望字符串从 0 开始计数。

```
 public static void main(String[] args) {

    int Counter = 1;

    while (Counter <=300){
        int counter2 =1;
        String Counterstring ;
        Counterstring = (new Integer(counter2)).toString() + ".";
        int ReplaceCounting = 0;
        String Replace = (new Integer(ReplaceCounting)).toString() + ".";
        Line.replace(Counterstring , Replace);

        Counter++;

    }

    System.out.println(Line);

} 
```

}

有人可以告诉我我做错了什么吗？输出是一样的。

编辑：

我把它改成： 我把它改成：

```
 public static void main(String[] args) {

    for (int counter = 1; counter <= 300; counter++) {

        int NormCounter =1;
        int ReplaceCounter = 0;

        String NormCounterS  = (new Integer(NormCounter)).toString() + ".";

        String ReplaceCounterS = (new Integer(ReplaceCounter)).toString() + ".";
        Line = Line.replace(NormCounterS , ReplaceCounterS);
        ++ReplaceCounter;

        ++NormCounter;

    }

    System.out.println(Line);

} 
```

}

但它仍然改变了第一个“1”。进入“0。”......所以它的0,2,3,4......但我希望计数去0,1,2,3,4

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T23:06:04.553

您假设字符串是可变的。他们不是。调用`replace`然后忽略返回值不会有任何用处。你要：

```
Line = Line.replace(Counterstring, Replace); 
```

尽管出于偏好，您应该使用`camelCase`变量名，并避免无缘无故地做大量工作。例如，您的循环会更好：

```
for (int counter = 1; counter <= 300; counter++) {
    line = line.replace("1.", "0.");
} 
```

不清楚你为什么要多次这样做，当然......你的描述对我来说很模糊，我害怕。

编辑：使用您编辑的代码，看起来您真的想要：

```
for (int counter = 1; counter <= 300; counter++) {
    line = line.replace(counter + ".", (counter - 1) + ".");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T05:05:39.673

首先，就像 Jon 所说的那样，没有适当`camelCase`的变量会使您的代码对于普通 Java 用户几乎不可读。您发布的任何新代码都应该真正使用既定的约定。

现在，至于您的代码，您每次遍历循环时都会重置计数器。所以每次你到达`line.replace(normCounter, replaceCounter)`它的时候`line.replace("1.", "0.")`

这是你应该做的：

```
int replaceCounter = 0;
for (int counter = 1; counter <= 300; counter++) {
  line = line.replace(String.valueOf(counter) + ".", String.valueOf(replaceCounter) + ".");
  replaceCounter++;
}

System.out.println(line); 
```

请注意我是如何在 for 循环之外初始化计数器的。

# c# - 需要 WCF 传输安全性和会话

> ID：10050217
> 
> 赞同：2
> 
> 时间：2012-04-06T23:04:10.193
> 
> 标签：c#, asp.net, https

我正在尝试通过 wsHttpBinding 实现传输级安全性（使用 Windows 身份验证/凭据）。但我收到以下错误：绑定验证失败，因为 WSHttpBinding 不支持基于传输安全 (HTTPS) 的可靠会话。无法打开通道工厂或服务主机。使用消息安全性通过 HTTP 进行安全可靠的消息传递。

```
<?xml version="1.0"?>
<configuration>
  <appSettings/>
  <system.web>
    <roleManager enabled="true" />
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral,     PublicKeyToken=b77a5c561934e089"/>
  </assemblies>
</compilation>
    <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID"/>
  </system.web>
  <system.serviceModel>
    <bindings>
      <wsHttpBinding>
    <binding name="wsSecure">
      <reliableSession enabled="true" />
      <security mode="Transport">
        <transport proxyCredentialType="Windows" />
      </security>
    </binding>
  </wsHttpBinding>
</bindings>
<services>
  <service behaviorConfiguration="ServiceBehavior" name="MyService">
    <endpoint address="https://localhost:8000/MyService/" binding="wsHttpBinding" bindingConfiguration="wsSecure"
      name="wsBinding" contract="IMyContract" />
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="ServiceBehavior">
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
  </serviceBehaviors>
</behaviors>
  </system.serviceModel>
</configuration> 
```

# php - 用 php 对查询进行分组

> ID：10050220
> 
> 赞同：3
> 
> 时间：2012-04-06T23:04:45.590
> 
> 标签：php, mysql

基本问题！

我有 2 张桌子

**生产**

```
 +-----+--------------+  
   | id  |  fruit_name  |
   +--------------------+
   | 1   |   Apple      |
   | 2   |   Banana     |
   | 3   |   Carrot     |
   +-----+--------------+ 
```

**品种**

```
 +-----+---------------+----------------+
   | id  |  fk_fruit_id  |  variety_name  |
   +-----+---------------+----------------+
   | 1   |   1           |    Cox         |
   | 2   |   1           |    Braeburn    |
   | 3   |   2           |    Chester     |
   | 4   |   3           |    Kotaka      |
   | 5   |   3           |    Imperial    |
   | 6   |   3           |    Oneal       |
   +-----+---------------+----------------+ 
```

我想输出每个水果的品种列表，例如

```
APPLE - Cox, Braeburn

BANANA - Chester

CARROT - Kotaka, Imperial, Oneal 
```

我目前的代码是

```
$query   = "SELECT * FROM produce, varieties WHERE produce.id = varieties.fk_fruit_id"; 

$result  = mysql_query($query) or die('Error : ' . mysql_error()); 
while ($row     = mysql_fetch_array($result, MYSQL_ASSOC)) { 

$produce_fruit_code   = $row['fruit_code']; 
$variety_name   = $row['variety_name']; 

echo $produce_fruit_code.' - '.$variety_name.'<br/>';

} 
```

输出：

```
Apple - Cox
Apple - Braeburn
Banana - Chester
Carrot - Kotaka
Carrot - Imperial
Carrot - Oneal 
```

不是一百万英里之外，但仍然不在那里。非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T23:18:18.297

你可能会得到一个粗壮的 sql 语句来为你做这件事，但我会选择使用数组来处理数据。

例如（未经测试，请原谅格式）：

```
$query   = "SELECT * FROM produce, varieties WHERE produce.id = varieties.fk_fruit_id";     
$result  = mysql_query($query) or die('Error : ' . mysql_error()); 

$res=array();

while ($row     = mysql_fetch_array($result, MYSQL_ASSOC)) { 

    $produce_fruit_code   = $row['fruit_code']; 
    $variety_name   = $row['variety_name']; 

    if(isset($res[$produce_fruit_code])){
        $res[$produce_fruit_code]+=','.$variety_name;
    }else{
        $res[$produce_fruit_code]=$variety_name;
    }

}        
print_r($res); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T23:43:58.897

如果你使用 MySQL，你可以在分组上使用 group_concat 扩展。类似于以下内容：

```
SELECT 
   f.fruitname as fruit, 
   GROUP_CONCAT(distinct v.varietyname separator ',') as variety  
FROM fruit f JOIN varieties v ON produce.id = varieties.fk_fruit_id; 
```

或类似的。抱歉，我的 sql 现在有点生锈了。有关更多信息，请查看本文 [http://www.mysqlperformanceblog.com/2006/09/04/group_concat-useful-group-by-extension/](http://www.mysqlperformanceblog.com/2006/09/04/group_concat-useful-group-by-extension/) ，当然还有：http: [//dev.mysql.com/doc/refman /5.0/en/group-by-functions.html](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)

如果您不使用 MySQL 并且您的数据库不支持 group_concat，请考虑缓冲这些结果。在大型数据库和同时有许多用户的情况下，当每次都必须下载所有数据并将其存储在本地时，您的应用程序可能会大大减慢速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T23:11:35.203

这不会让你一路走好，但它会让你得到你想要的大部分。有一些边缘情况是有问题的。

```
$query   = "SELECT * FROM produce, varieties WHERE produce.id = varieties.fk_fruit_id"; 
$result  = mysql_query($query) or die('Error : ' . mysql_error()); 

$produce_fruit_code = "";
while ($row     = mysql_fetch_array($result, MYSQL_ASSOC)) { 
  if ($produce_fruit_code != $row['fruit_code'])
  {
    $produce_fruit_code = $row['fruit_code'];
    echo "<br/>".$produce_fruit_code." - ". $row['variety_name'];
  } else {
    echo ", ".$row['variety_name']; 
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T23:27:30.930

```
$query   = "SELECT * FROM produce, varieties WHERE produce.id = varieties.fk_fruit_id"; 

echo "<dl>";

$result  = mysql_query($query) or die('Error : ' . mysql_error()); 
while ($row     = mysql_fetch_array($result, MYSQL_ASSOC)) { 

    if($row['fruit_name'] != $current_fruit_name) {
        $current_fruit_name = $row['fruit_name'];
        echo "<dt>$current_fruit_name</dt>"; 
     }
echo "<dd>" . $row['variety_name'] . "</dd>";

} 
```

    回声“”；

如果您想要一些 CSS 来使定义列表看起来像`Name - X,Y,Z`问题中的样子，请告诉我。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-07T00:07:28.813

这个可以直接查询

```
SELECT 
   f.fruitname as fruit, 
   GROUP_CONCAT(distinct v.varietyname separator ',') as variety  
FROM fruit f JOIN varieties v ON produce.id = varieties.fk_fruit_id;
GROUP BY produce.id 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-04-06T23:17:35.617

将所有内容排序到`while`循环中的数组中。这应该有效：

```
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) { 

   $produce_fruit_code   = $row['fruit_code']; 
   $variety_name   = $row['variety_name']; 

   if ($produce_fruit_code == "Apple") {
   $apple_array[] = $variety_name;
   }
   if ($produce_fruit_code == "Banana") {
   $banana_array[] = $variety_name;
   }
   if ($produce_fruit_code == "Carrot") {
   $carrot_array[] = $variety_name;
   }

}

echo "Apples:" . implode(", ", $apple_array) . "<br/>";
echo "Bananas:" . implode(", ", $bananas_array) . "<br/>";
echo "Carrots:" . implode(", ", $carrots_array) . "<br/>"; 
```

# wpf - ListBox 内的 WP7 按钮仅每隔一次按下“点击”

> ID：10050224
> 
> 赞同：1
> 
> 时间：2012-04-06T23:06:00.370
> 
> 标签：wpf, windows-phone-7

我在列表框的 DataTemplate 内定义了一个按钮。

```
<phone:PhoneApplicationPage.Resources>        
    <DataTemplate x:Key="ListTemplate">
        <Grid Margin="12,12,24,12">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <Button Grid.Column="0" Name="EnableDisableButton" 
                    Click="EnableDisableButton_Click" 
                    BorderBrush="Transparent">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Image Grid.Row="0" Source="\Images\img.dark.png" Width="48" Height="48" Visibility="{StaticResource PhoneDarkThemeVisibility}" />
                    <Image Grid.Row="0" Source="\Images\img.light.png" Width="48" Height="48" Visibility="{StaticResource PhoneLightThemeVisibility}" />
                    <Rectangle Grid.Row="1" Width="48" Height="8" Fill="{Binding CurrentColor}" RadiusX="4" RadiusY="4" />
                </Grid>
            </Button>

            <Grid Grid.Column="1">
              <... more stuff here ...>
            </Grid>
        </Grid>
    </DataTemplate>
</phone:PhoneApplicationPage.Resources> 
```

我看到的是，当我第一次按下按钮时，Click 事件就会触发。我第二次按下它，它不火。第三次按下，火灾。第四次按，不开火。等等。最初我将它绑定到一个命令，但它的行为方式相同。（我在事件处理程序中放置了一个 Debug.WriteLine() 以便我知道它何时触发。）

有任何想法吗？click 事件每隔一段时间才会触发一次，这真的很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T23:25:10.497

尝试以下两种“解决方法”之一：

1.  在您的点击事件回调中，将焦点设置回页面：`this.Focus();`

2.  在您的点击事件回调中`SelectedItem`，将您的设置`ListBox`为 null：`myListBox.SelectedItem = null;`

我认为两者之一应该工作......

点击事件回调 =`EnableDisableButton_Click`方法

# php - 正则表达式匹配和？

> ID：10050225
> 
> 赞同：1
> 
> 时间：2012-04-06T23:06:02.407
> 
> 标签：php, regex

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T23:08:50.750

`(?<!href=")`在您的第一个正则表达式之后添加`#`。这将确保它不在标签内。

# c++ - C++ char 数组空终止符位置

> ID：10050228
> 
> 赞同：20
> 
> 时间：2012-04-06T23:06:18.617
> 
> 标签：c++, arrays, char, null-terminated

我是一名学习 C++ 的学生，我试图了解以空字符结尾的字符数组是如何工作的。假设我像这样定义一个 char 数组：

```
char* str1 = "hello world"; 
```

正如预期的那样，`strlen(str1)`等于 11，并且它是空终止的。

如果上述 char 数组的所有 11 个元素都用字符“hello world”填充，C++ 将空终止符放在哪里？它实际上是否分配了一个长度为 12 而不是 11 的数组，第 12 个字符是`'\0'`？[CPlusPlus.com](http://www.cplusplus.com/doc/tutorial/ntcs/)似乎暗示 11 个中的一个需要是`'\0'`，除非它确实分配了 12 个。

假设我执行以下操作：

```
// Create a new char array
char* str2 = (char*) malloc( strlen(str1) );

// Copy the first one to the second one
strncpy( str2, str1, strlen(str1) );

// Output the second one
cout << "Str2: " << str2 << endl; 
```

这个输出`Str2: hello worldatcomY╗°g♠↕`，我假设是 C++ 在指针指向的位置读取内存，`char* str2`直到它遇到它解释为空字符的内容。

但是，如果我这样做：

```
// Null-terminate the second one
str2[strlen(str1)] = '\0';

// Output the second one again
cout << "Terminated Str2: " << str2 << endl; 
```

它`Terminated Str2: hello world`按预期输出。

但是写入并不`str2[11]`意味着我们正在分配的内存空间之外写入`str2`，因为`str2[11]`是第 12 个字节，但我们只分配了 11 个字节？

运行此代码似乎不会导致任何编译器警告或运行时错误。这在实践中安全吗？使用`malloc( strlen(str1) + 1 )`而不是会更好`malloc( strlen(str1) )`吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-06T23:10:44.840

在字符串文字的情况下，编译器实际上为该元素保留了一个额外`char`的`\0`元素。

```
// Create a new char array
char* str2 = (char*) malloc( strlen(str1) ); 
```

这是新 C 程序员常犯的错误。为 a 分配存储空间时，`char*`您需要分配字符数 + 1 来存储`\0`. 此处不分配额外存储意味着该行也是非法的

```
// Null-terminate the second one
str2[strlen(str1)] = '\0'; 
```

在这里，您实际上是在写超出您分配的内存的末尾。分配 X 元素时，您可以访问的最后一个合法字节是偏移的内存地址`X - 1`。写入`X`元素会导致未定义的行为。它通常会起作用，但它是一个定时炸弹。

正确的写法如下

```
size_t size = strlen(str1) + sizeof(char);
char* str2 = (char*) malloc(size);
strncpy( str2, str1, size);

// Output the second one
cout << "Str2: " << str2 << endl; 
```

在此示例中，`str2[size - 1] = '\0'`实际上并不需要。该`strncpy`函数将使用空终止符填充所有额外的空格。这里只有`size - 1`元素，`str1`所以数组中的最后一个元素是不需要的，将被填充`\0`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-06T23:08:51.720

> 它实际上是否分配了一个长度为 12 而不是 11 的数组，第 12 个字符是 '\0'？

是的。

> 但是写入并不`str2[11]`意味着我们正在分配的内存空间之外写入`str2`，因为`str2[11]`是第 12 个字节，但我们只分配了 11 个字节？

是的。

> 使用`malloc( strlen(str1) + 1 )`而不是会更好`malloc( strlen(str1) )`吗？

是的，因为第二种形式的长度不足以将字符串复制到其中。

> 运行此代码似乎不会导致任何编译器警告或运行时错误。

除了最简单的情况外，在所有情况下都检测到这一点是一个非常困难的问题。所以编译器作者根本不打扰。

* * *

如果您正在编写 C++，那么这种复杂性正是您应该使用`std::string`而不是原始 C 样式字符串的原因。就这么简单：

```
std::string str1 = "hello world";
std::string str2 = str1; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T23:10:30.457

文字`"hello world"`是一个`char`看起来像这样的数组：

```
{ 'h', 'e', 'l', 'l', 'o', ' ', 'w', 'o', 'r', 'l', 'd', '\0' } 
```

所以，是的，字面量是 12`char`秒。

此外，`malloc( strlen(str1) )`为比所需字节少 1 个字节分配内存，因为`strlen`返回字符串的长度，不包括 NUL 终止符。写入`str[strlen(str1)]`是在您分配的内存量之外写入 1 个字节。

您的编译器不会告诉您这一点，但是如果您通过*valgrind*或系统上可用的类似程序运行程序，它会告诉您是否正在访问您不应该访问的内存。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-07T00:19:53.273

我认为您对 的返回值感到困惑`strlen`。它返回字符串的长度，不应与保存字符串的数组的大小混淆。考虑这个例子：

```
char* str = "Hello\0 world"; 
```

我在字符串中间添加了一个空字符，这是完全有效的。这里数组的长度为 13（12 个字符 + 最后一个空字符），但`strlen(str)`将返回 5，因为在第一个空字符之前有 5 个字符。`strlen`只计算字符，直到找到一个空字符。

因此，如果我使用您的代码：

```
char* str1 = "Hello\0 world";
char* str2 = (char*) malloc(strlen(str1)); // strlen(str1) will return 5
strncpy(str2, str1, strlen(str1));
cout << "Str2: " << str2 << endl; 
```

str2 数组的长度为 5，并且不会被空字符终止（因为`strlen`不计算在内）。这是你所期望的吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-06T23:18:42.840

对于标准 C 字符串，存储字符串的数组的长度总是比字符串长度（以字符为单位）长一个字符。因此，您的`"hello world"`字符串的字符串长度为 11，但需要一个包含 12 个条目的后备数组。

原因很简单，就是读取这些字符串的方式。处理这些字符串的函数基本上是一个一个地读取字符串的字符，直到找到终止字符`'\0'`并在这一点停止。如果此字符丢失，则这些函数只需继续读取内存，直到它们到达导致主机操作系统终止您的应用程序的受保护内存区域或直到它们找到终止字符。

此外，如果您初始化一个长度为 11 的字符数组并将字符串`"hello world"`写入其中，则会产生大量问题。因为该数组预计至少包含 12 个字符。这意味着内存中数组后面的字节被覆盖。导致不可预知的副作用。

此外，当您使用 C++ 时，您可能需要查看`std:string`. 如果您使用 C++ 并提供更好的字符串处理，则可以访问此类。这可能值得研究。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-29T19:42:10.663

我认为您需要知道的是 char 数组从 0 开始，直到数组长度为 1，并且位置数组长度具有终止符（'\0'）。
在你的情况下：

```
str1[0] == 'h';  
str1[10] == 'd';  
str1[11] == '\0'; 
```

这就是为什么正确 str2[strlen(str1)] = '\0';
strncpy 之后的输出问题是因为它复制了 11 个元素（0..10），所以您需要手动放置终止符（str2[11] = '\0'）。

# c# - 在不使用 LINQ 数据源的情况下将记录存储在 DB 的下拉列表中

> ID：10050244
> 
> 赞同：0
> 
> 时间：2012-04-06T23:08:52.000
> 
> 标签：c#, asp.net, linq

我有一个舞蹈学院网站，用户可以在其中注册和添加/删除舞蹈课程。

在网页中放置特定舞蹈，对于特定用户，下拉列表显示她注册的舞蹈。

现在我想从列表中删除其中一个舞蹈。

因此，我将从表中以及下拉列表中删除该行。问题是每次具有最低 ID（索引）的项目都被删除，无论用户选择哪一个。

我想我错误地存储了下拉列表的 DataTextField 和 DataValueField。有人可以帮我吗？代码是：

```
private void PopulateDanceDropDown()
        {

            var registereddanceList = from dd in context.DANCER_AND_DANCE
                                        where dd.UserId == dancerId
                                        select new
                                        {
                                            Text = dd.DanceName,
                                             Value = dd.DanceId
                                        };

            dances.DataSource = registereddanceList;
            dances.DataTextField = "Text";
            dances.DataValueField = "Value";
            dances.DataBind();

        }

        protected void dropthedance(object o, EventArgs e)
        {
            String strDataValueField = dances.SelectedItem.Value;            
            int danceIDFromDropDown = Convert.ToInt32(strDataValueField);
            var dancer_dance = from dd in context.DANCER_AND_DANCE
                               where dd.DanceId == danceIDFromDropDown
                               select dd;

            foreach (var dndd in dancer_dance)
            {
                context.DANCER_AND_DANCE.DeleteOnSubmit(dndd);

            }

            try
            {
                context.SubmitChanges();
            }

            catch (Exception ex)
            {
                Console.WriteLine(ex);
            }
            PopulateDanceDropDown();

        }

<asp:DropDownList ID = "dances" runat="server">
    </asp:DropDownList>

<asp:Button ID="dropDance" runat="server" OnClick="dropthedance" Text="Drop Class" BackColor="Maroon" ForeColor="#FFCC99"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T07:27:16.320

As your question says you want to access records without storing it in Linq.

So below one could be an alternative for you.

First store all the data from Database to, lets say `List<NameIDPair>`

Heres what `NameIDPair` could be:

```
class NameIDPair 
{
public NameIDPair(){}
public string NameValue{get;set;}
public string IDValue{get;set;}
} 
```

Then populate drop down list as follows:

```
List<NameIDPair> storeInMe = From Database
foreach(NameIDPair pair in storeInMe )
{
ListItem item = new ListItem();
item.Value = pair.IDValue;
item.Text = pair.NameValue;
ddldancesList.Items.Add(item);
} 
```

Then for droppingTheDance, you can call the delete stored procedure to delete the same...

Hope this helps...

# php - Joomla：在后端使用多个 JHTML::calendar？

> ID：10050256
> 
> 赞同：0
> 
> 时间：2012-04-06T23:10:37.397
> 
> 标签：php, joomla, joomla1.7, joomla1.6, joomla2.5

试图在我正在构建的组件中拥有多个弹出日历，但只有第一个有效。

```
<?php echo JHTML::calendar($this->escape($item->datepassed), 'teacher_datepassed', 'teacher_datepassed', '%Y-%m-%d'); ?> 
```

一些研究虽然似乎找不到不止一个有效的例子：

```
http://docs.joomla.org/JHtml::calendar/1.6
http://www.zriel.com/joomla/25-how-to-add-pop-up-calendar-in-backend-of-joomla 
```

想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T06:01:23.657

您必须为日历使用不同的名称和 ID，否则 javascript 会崩溃。另外，请确保您没有任何其他 JS 错误，因为它可能导致无法正确初始化。用户 Firebug 控制台或 Chrome 控制台。

```
<?php 
echo JHtml::calendar($item->datepassed, 'cal1_name', 'cal1_id'); 
echo JHtml::calendar($item->datepassed, 'cal2_name', 'cal2_id'); 
?> 
```

# shoutcast - 获取当前播放歌曲的开始和结束时间

> ID：10050260
> 
> 赞同：1
> 
> 时间：2012-04-06T23:10:54.490
> 
> 标签：shoutcast, internet-radio

我正在尝试在 android 中实现无线电流切换器。我想做的，按照所需的顺序，是这样的：

1.  开始播放广播电台
2.  从该电台获取当前播放歌曲的结束时间
3.  在 endTime - Delta，我想扫描一个电台列表，我想返回一个在区间 [endTime, endTime + Delta'] 中开始有新歌的电台列表
4.  从[3]中的结果集切换到一个流，然后重复

所以，我可以播放广播电台（没问题）。我可以在歌曲更改时收到通知（使用streamscraper 获取元数据并在元数据更改时生成通知）。但是，我无法找到的是是否可以执行以下操作：

1.  获取当前播放歌曲的结束时间
2.  扫描电台列表，并获取大约在同一时间开始的歌曲（因此获取歌曲的 startTime）或可能即将开始的歌曲（如果这些流中当前歌曲的 endTime 接近或者我实际上可以获得流程序提前）。

如果有人能告诉我这是否可能，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T19:22:01.367

这是不可能的。在停止播放之前，您无法知道正在播放的内容的结束时间。数据不存在，甚至不适用于所有流。（想想现场节目、DJ 混合节目、交叉淡入淡出的开始/结束点等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-30T20:04:02.497

我能够做一些类似于你在 SHOUTcast 中所指的事情。我不确定 Icecast 的日志文件是如何格式化的，但我能够使用 PHP 来基本观察“Song Change”事件的日志。

一旦能够这样做，您就可以根据需要执行代码。如果您想知道标题播放的长度，您可以在歌曲更新时启动计时器，并在歌曲再次更改时停止。

这有点棘手，但它确实有效.. www.soundcheck.xyz - 自动将当前播放的歌曲实时发布到 Twitter。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-06T02:50:49.530

流由无缝的 mp3 流组成，这就是流的作用……它将分离的 mp3 拼接到一个大流中。

但是流中有轨道ID标签......如果您可以找到结束并从它们开始，或者它们是否正好在轨道开始或其他固定位置开始，则不知道。

大多数电台不会提前发送有关下一首曲目的信息只是因为他们不知道，大多数使用自动 dj 播放列表，其中服务器必须在新旧曲目之间的小间隙决定新曲目将是什么，即：它不决定那个在播放旧曲目时。

一些电台确实会发送信息（PHP 到他们的网页）下一首曲目将是什么，但大多数不会......如果他们这样做，那么这些信息肯定不在流本身中。

也许一个技巧可能是为您的听众添加延迟，
即：听众当前听到的
内容是旧的（最多几分钟或 1 个完整的曲目）

不知道如何创建这样的延迟......也许你需要记录（缓冲）它
并延迟播放（在你的应用程序中或通过一些额外的服务器）

您的（未延迟的）应用程序将（希望）通知当前歌曲何时结束
，因为新歌曲以新的 ID2/3 标签开始...当他当前但延迟的歌曲结束时，它将将您的听众切换到新的流.

说不同......在你的应用程序向前看的表面之下（相对于听众）

您需要学习 Shoutcast 和 ID-tag 协议。额外的静音检测也可能有所帮助（不是万无一失的）。

可能并不总是有效..有些电台不发送 ID 标签，其他电台则淡入淡出他们的曲目（没有沉默）......正是为了避免这些技巧。

或者类似的东西......祝我好运，我不会编写任何代码......这只是理论上的，我怀疑一些喊话开膛手使用这个技巧......我想他们使用这个来扫描多个流（并行）以查找某些预设的艺术家曲目。也许您可以通过对这些裂土器进行逆向工程来获得一些想法。因为我自己有一台收音机，所以我不喜欢这些技巧，因为他们在我支付版权费用的同时从我这里偷窃……许多开膛手会扼杀在线收音机。

最后，我不认为你的想法（如果我很好地理解它的目的）有用，无论如何
从一个流切换到另一个流，每个下一首曲目似乎都不是一种享受的体验。
好的广播电台将有一个精心制作（有序）的播放列表
，如果你把它搞砸了，你的听众会在很短的时间内得到很多情绪/风格的变化。

唯一有用的目的可能是构建一个自动开膛手，可以分散预设曲目/艺术家从大量平行观察的流中，并在播放想要的曲目时记录它们......对于许多在线电台来说，这些开膛手是一个大问题已经有 10 个以上的开膛手和在线广播已经死了……结果高质量和独立的音乐将不再可用……我们将只被 Youtube 和其他受金钱侵扰的企业集团所困……我不是期待……好奇你是否有其他有用的目的。

# ruby-on-rails-3.1 - ICS 文件的 Amazon SES 附件错误

> ID：10050264
> 
> 赞同：4
> 
> 时间：2012-04-06T23:12:28.070
> 
> 标签：ruby-on-rails-3.1, amazon-web-services, amazon-ses

我在使用 Amazon SES 服务时遇到附件错误。正常`pdf`或`jpg`文件正确附加。但是当我附加`.ics`一个日历文件时。我得到了这个错误。

```
554 Transaction failed: Illegal filename 'file_name.ics' 
```

我正在使用`aws-ses`宝石`rails 3.2.2`

亚马逊有什么限制吗？我们如何要求他们允许这种 mime 类型进入我们的帐户？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-07T21:50:51.210

实际问题是电子邮件具有内容类型`multipart/mixed`，而包含`ics`文件的部分具有内容类型`text/plain`，根据[Amazon MIME 类型](http://docs.amazonwebservices.com/ses/latest/DeveloperGuide/MIMETypes.html)，`text/plain`必须具有扩展名`txt, diff, text`。但就我而言，它正在`.ics`扩展。

所以我必须从这里更改代码。

```
attachments["file_name.ics"] = @model.to_ical 
```

对此。

```
attachments["file_name.ics"] = {:mime_type => 'text/calendar',
                                            :content => @model.to_ical} 
```

它解决了我的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T12:23:35.630

虽然[Amazon SES](http://aws.amazon.com/ses/)确实不接受所有 MIME 类型，但根据其各自的[附录：MIME 类型正确支持](http://docs.amazonwebservices.com/ses/latest/DeveloperGuide/MIMETypes.html)*内容类型* `text/calendar`和*扩展* 。`ics`

在不查看其来源的情况下，我怀疑这最终是[aws-ses](https://github.com/drewblas/aws-ses) gem 的限制（SES 支持的 MIME 类型列表随着时间的推移而增加）并建议您提供官方[AWS SDK for Ruby](http://aws.amazon.com/sdkforruby/) (AWS Ruby Gem)取而代之的是，它现在应该为所有已经支持的 AWS 服务提供更一致和适当维护的开发/使用体验。

祝你好运！

# php - PHP：在正则表达式中使用感叹号时不匹配

> ID：10050267
> 
> 赞同：1
> 
> 时间：2012-04-06T23:14:01.957
> 
> 标签：php, regex, escaping, no-match

我正在尝试使用 preg_match 在加载的 HTML 文件中查找注释部分。然而，出现的感叹号似乎打破了它。每当我尝试使用

```
preg_match("/<!/", "<!", $matches); 
```

返回一个空的 $matches[0]。我试过了

```
preg_match("/< !/", "< !", $matches);
preg_match("/!</", "!<", $matches); 
```

这些确实返回“<！” 和“！<”。我到处寻找解决方案，但我似乎无法为这个最有可能非常容易解决的问题找到解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T23:17:22.387

您确定`$matches[0]`返回的是一个空的，还是它`$matches[0]`本身就是一个隐藏的 HTML 注释？尝试`var_dump($matches)`检查字符串的长度。

# mysql - 每天统计消息（17:00 后计算次日）

> ID：10050269
> 
> 赞同：0
> 
> 时间：2012-04-06T23:14:21.530
> 
> 标签：mysql, sql, date, time

我有两个 MySQL 表：stats（左）和 messages（右）

```
 +------------+---------+      +---------+------------+-----------+----------+
  |  _date     | msgcount|      | msg_id  | _date      | time      |  message |
  +------------+---------+      +----------------------+-----------+----------+
  | 2011-01-22 |  2      |      |   1     | 2011-01-22 |  06:23:11 | foo bar  |
  | 2011-01-23 |  4      |      |   2     | 2011-01-22 |  15:17:03 | baz      |
  | 2011-01-24 |  0      |      |   3     | 2011-01-22 |  17:05:45 | foobar   |
  | 2011-01-25 |  1      |      |   4     | 2011-01-22 |  23:58:13 | barbaz   |
  +------------+---------+      |   5     | 2011-01-23 |  00:06:32 | foo foo  |
                                |   6     | 2011-01-23 |  13:45:00 | bar foo  |
                                |   7     | 2011-01-25 |  02:22:34 | baz baz  |
                                +---------+------------+-----------+----------+ 
```

我填写了 stats.msgcount，但实际上它仍然是空的。我正在寻找一种查询方式：

*   计算每个 stats._date 的消息数量（注意 2011-01-25 上的零 msgcount）
*   messages.time 是 24 小时格式。5 点（17:00:00）之后的所有消息都应计入第二天（注意 msg_id 3 和 4 计入 2011-01-23）
*   更新 stats.msgcount 以保存所有计数

我特别关心“晚于 17:00:00 计入次日”部分。这在（My）SQL 中可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T00:20:08.200

你可以使用：

```
UPDATE stats LEFT JOIN
  ( SELECT date(addtime(_date,time) + interval 7 hour) as corrected_date, 
           count(*) as message_count
    FROM messages
    GROUP BY corrected_date ) mc
ON stats._date = mc.corrected_date
SET stats.msgcount = COALESCE( mc.message_count, 0 ) 
```

但是，此查询要求您感兴趣的日期已经在 stats 表中，如果您没有它们，则将 _date 设为主键或唯一键（如果还没有）并使用：

```
INSERT IGNORE INTO stats(_date,msgcount)
SELECT date(addtime(_date,time) + interval 7 hour) as corrected_date,
       count(*) as message_count
FROM messages
GROUP BY corrected_date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T00:21:02.383

真的，你所做的只是将时间移动了 7 个小时。像这样的东西应该工作：

```
UPDATE stats s
SET count = (SELECT COUNT(msg_id) FROM messages m
             WHERE m._date BETWEEN DATE_SUB(DATE_ADD(s._date, INTERVAL TIME_TO_SEC(m.time) SECOND), INTERVAL 7 HOUR)
                               AND DATE_ADD(DATE_ADD(s._date, INTERVAL TIME_TO_SEC(m.time) SECOND), INTERVAL 17 HOUR)); 
```

基本思想是，它获取统计表中的每个日期，将其调整 7 小时，然后查找在该范围内发送的消息。如果您使用 DATETIME 列而不是单独的 DATE 和 TIME 列，则不需要额外的 DATE_ADD(..., TIME_TO_SEC) 东西。

可能有更好的方法来添加日期和时间，我没有看到快速浏览 MySQL 参考文档的方法。

因此，您需要做的就是在 stats 表中插入一个新行，其中 msgcount 为 0，然后运行更新命令。如果您只想更新几天（因为消息计数可能在 6 天后不会改变），您只需要在更新中添加一个简单的 where 子句：

```
UPDATE stats s
SET ...
WHERE s._date BETWEEN '2012-04-03' AND '2012-04-08' 
```

# php - 通过函数传递 PHP 变量？

> ID：10050281
> 
> 赞同：1
> 
> 时间：2012-04-06T23:17:06.353
> 
> 标签：php, arrays, session, variables

我在尝试通过函数传递 PHP 变量值时遇到了一些麻烦，每次我尝试在我的一个函数中使用变量时，它的值都会变为 nil，让我更具体一些。我的 php 文件中有以下代码：

```
$myvar = $Session['username'];

function updateuserinformation(){

        if(trim($_FILES["fileUpload"]["tmp_name"]) != ""){

            $images = $_FILES["fileUpload"]["tmp_name"];
            $new_images = "thumbnails_".$_FILES["fileUpload"]["name"];
            copy($_FILES["fileUpload"]["tmp_name"],"Photos/".$_FILES["fileUpload"]["name"]);
            $width=200; //*** Fix Width & Heigh (Autu caculate) ***//
            $size=GetimageSize($images);
            $height=round($width*$size[1]/$size[0]);
            $images_orig = ImageCreateFromJPEG($images);
            $photoX = ImagesX($images_orig);
            $photoY = ImagesY($images_orig);
            $images_fin = ImageCreateTrueColor($width, $height);
            ImageCopyResampled($images_fin, $images_orig, 0, 0, 0, 0, $width+1, $height+1, $photoX, $photoY);
            ImageJPEG($images_fin,"Photos/".$new_images);
            ImageDestroy($images_orig);
            ImageDestroy($images_fin);

            print $data["foo"];

            echo"$myvar";

            mysql_query("UPDATE users SET userpictureaddress = 'http://www.litsdevelopment.com/litsapplication/userimages/MATEUS' WHERE username = 'Mateus' ");

        }
} 
```

我试图在我的函数中使用 $myvar 值，但每次运行代码时它都不起作用，我已经尝试过全局、全局、数组和会话，但没有任何效果。当然我犯了一个小错误在它的某些部分，但有人知道这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T23:24:07.123

如果您想了解变量范围在 PHP 中的工作原理，请阅读以下内容：

[http://php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

```
$myvar = $Session['username'];

function updateuserinformation(){
    global $myvar;

        if(trim($_FILES["fileUpload"]["tmp_name"]) != ""){

            $images = $_FILES["fileUpload"]["tmp_name"];
            $new_images = "thumbnails_".$_FILES["fileUpload"]["name"];
            copy($_FILES["fileUpload"]["tmp_name"],"Photos/".$_FILES["fileUpload"]["name"]);
            $width=200; //*** Fix Width & Heigh (Autu caculate) ***//
            $size=GetimageSize($images);
            $height=round($width*$size[1]/$size[0]);
            $images_orig = ImageCreateFromJPEG($images);
            $photoX = ImagesX($images_orig);
            $photoY = ImagesY($images_orig);
            $images_fin = ImageCreateTrueColor($width, $height);
            ImageCopyResampled($images_fin, $images_orig, 0, 0, 0, 0, $width+1, $height+1, $photoX, $photoY);
            ImageJPEG($images_fin,"Photos/".$new_images);
            ImageDestroy($images_orig);
            ImageDestroy($images_fin);

            print $data["foo"];

            echo"$myvar";

            mysql_query("UPDATE users SET userpictureaddress = 'http://www.litsdevelopment.com/litsapplication/userimages/MATEUS' WHERE username = 'Mateus' ");

        }
} 
```

但是正如@JohnConde 指出的那样，如果您尝试从会话中读取，那么您的意思似乎是 $_SESSION 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T23:25:28.450

1.  你没有打电话`session_start()`
2.  你拼错了`$_SESSION`
3.  如果您希望在函数中使用它们并遵循最佳实践，则需要将要在函数中使用的任何变量作为参数传递

    ```
    session_start();
    $myvar = $_SESSION['username'];

    function updateuserinformation($myvar){

        if(trim($_FILES["fileUpload"]["tmp_name"]) != ""){

            $images = $_FILES["fileUpload"]["tmp_name"];
            $new_images = "thumbnails_".$_FILES["fileUpload"]["name"];
            copy($_FILES["fileUpload"]["tmp_name"],"Photos/".$_FILES["fileUpload"]["name"]);
            $width=200; //*** Fix Width & Heigh (Autu caculate) ***//
            $size=GetimageSize($images);
            $height=round($width*$size[1]/$size[0]);
            $images_orig = ImageCreateFromJPEG($images);
            $photoX = ImagesX($images_orig);
            $photoY = ImagesY($images_orig);
            $images_fin = ImageCreateTrueColor($width, $height);
            ImageCopyResampled($images_fin, $images_orig, 0, 0, 0, 0, $width+1, $height+1, $photoX, $photoY);
            ImageJPEG($images_fin,"Photos/".$new_images);
            ImageDestroy($images_orig);
            ImageDestroy($images_fin);

            print $data["foo"];

            echo"$myvar";

            mysql_query("UPDATE users SET userpictureaddress = 'http://www.litsdevelopment.com/litsapplication/userimages/MATEUS' WHERE username = 'Mateus' ");

        } 
    ```

    }

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T23:20:10.327

您需要将变量传递给函数，或者在函数内部声明它是全局变量。

例如

```
function updateuserinformation($myvar){ 
```

或者

```
global $myvar;
echo $myvar; 
```

此外，在访问使用会话变量之前，您需要调用[`session_start()`](http://www.php.net/manual/en/function.session-start.php).

# java - Android：为什么 native_start 在 Android 2.3.1 模拟器上的 startNavigating() 中失败？

> ID：10050287
> 
> 赞同：2
> 
> 时间：2012-04-06T23:18:03.373
> 
> 标签：java, android, android-emulator, geolocation, gps

我正在使用 Android 2.3.1 项目使用 LocationManager.GPS_PROVIDER 获取当前位置。

这是我的代码

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    LocationManager locManager = (LocationManager)this.getSystemService(Context.LOCATION_SERVICE);
    LocationListener locListener = new BTILocationListener();

    locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locListener);
}

public class BTILocationListener implements LocationListener {

    @Override
    public void onLocationChanged(Location loc) {
        Log.d("BTILocation", "Inside onLocationChanged() ---");

        if (loc != null) {
            double latitude = loc.getLatitude();
            double longitude = loc.getLongitude();

            String locationstr = "Latitude = " + latitude + " longitude = "  +longitude;

            Log.d("BTILocation", locationstr);

        }
    }

    @Override
    public void onProviderDisabled(String provider) {
        Toast.makeText(getApplicationContext(), "GPS Disabled", Toast.LENGTH_SHORT).show();
        Log.w("BTILocation", "GPS is Disabled");
    }

    @Override
    public void onProviderEnabled(String provider) {
        Toast.makeText(getApplicationContext(), "GPS Enabled", Toast.LENGTH_SHORT).show();
        Log.w("BTILocation", "GPS is Enabled");
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

} 
```

我使用的权限集 -

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission> 
```

我使用开放的 telnet 连接

```
telnet localhost 5544
geo fix 12 22 
```

我在 logcat 上看到以下错误 -

```
E/GpsLocationProvider(   75): native_start failed in startNavigating() 
```

onLocationChanged(location loc) 返回的位置对象在 2.3.1 上始终为 null。

相同的代码在 Android 2.1 和 4.0 中运行良好。请帮我解决这个问题，我试过谷歌搜索，但我在任何地方都找不到解决方案。谢谢！我没有与 Android API 级别 7 兼容的 Google API，有人知道如何下载吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T14:11:36.993

这似乎是平台 2.3 的一个已知问题，我使用 android SDK 管理器下载了平台 2.2 和 2.1 的 Google API。只需选中过时的复选框即可下载所需的软件包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T21:17:57.630

我在 API 级别 17 中遇到了与 4.4.2 相同的错误。虽然这是零星的，但并不清楚是什么解决了这个问题。我确实重新启动了模拟器，系统所有常用的东西，没有任何帮助。

但是我打开了另一个模拟器并修复了它们。

# php - 从一个非常简单的日期开始

> ID：10050296
> 
> 赞同：0
> 
> 时间：2012-04-06T23:19:19.190
> 
> 标签：php, date

有没有一种简单的方法可以从一个非常简单的日期字符串中获取日期？

例如：

```
14 mar 2012 
```

转换为：

```
Wed, 14 mar 2012 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T23:22:47.947

您应该熟悉[`DateTime`](http://php.net/DateTime)：

```
$str = "14 mar 2012"; 
```

```
$date = DateTime::createFromFormat("j M Y", $str);
$str = $date->format("D, j M Y"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T23:23:51.883

```
$dateUnformated = '14 mar 2012';

$dateFormated = date("D, j M Y", strtotime($dateUnformated)); 
```

# javascript - 单击除一个元素外的 HTML，不使用 jQuery

> ID：10050299
> 
> 赞同：2
> 
> 时间：2012-04-06T23:19:37.707
> 
> 标签：javascript, html, dom, onclick

我向我们展示了代码：

```
(function (){
  var element = document.getElementById('bar'), hideElement = document.getElementById('foo'),
  var html = document.getElementsByTagName('html')[0];
  tool.onclick = function() {
    hideElement.style.display = 'block';
    html.onclick = function() {
      hideElement.style.display = 'none';
    }
  }
})(); 
```

这段代码工作正常，但是，单击 html 后，我无法重新打开隐藏的元素。

我想单击 html 元素并将 display:none 赋予 hideElement，然后单击元素 id="bar"，赋予隐藏元素 display:block，但不是单击元素 foo，而是单击 html 元素。我可以做什么？

哦，我需要没有 JQUERY 的帮助，谢谢 :)

编辑：类似的东西：[点击正文，除了一些其他标签不起作用](https://stackoverflow.com/questions/9711134/click-on-body-except-some-other-tag-not-working)，但没有 JQuery，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T23:33:02.970

我不确定它会回答你的问题，但这里是：如何处理身体上的事件，除了一个元素：

```
document.documentElement.onclick = function(e) {
    var evt = e || window.event, // IE...
        target = evt.target || evt.srcElement // IE again...
    // There, "target" is the element clicked. See where I'm going?
    if (target.id !== "foo") {
        // Do w/e you want if the page was clicked, except for "foo"
    }
} 
```

这就是“事件冒泡”的概念。您可以一次收听一个元素及其所有子元素，并获取代码中指定的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T23:20:47.190

首先，您似乎没有定义`tool`我能看到的任何地方。

其次，你忘记`.style`了`hideElement.display`（应该是`hideElement.style.display`）。

第三，`document.getElementsByTagName('html')[0]`是多余的。改用就好`document.documentElement`了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T23:21:50.013

改变

```
html.onclick = function() {
  hideElement.display = 'none';
} 
```

到

```
html.onclick = function() {
  hideElement.style.display = 'none';
} 
```

# algorithm - 人们如何证明计算机视觉方法的正确性？

> ID：10050300
> 
> 赞同：4
> 
> 时间：2012-04-06T23:20:05.723
> 
> 标签：algorithm, opencv, computer-vision, proof, correctness

我想提出一些关于计算机视觉研究的抽象问题。通过搜索网络和阅读论文，我还不能完全回答这些问题。

1.  有人如何知道计算机视觉算法是否正确？
2.  我们如何在计算机视觉的背景下定义“正确”？
3.  形式化证明对理解计算机视觉算法的正确性有影响吗？

一点背景知识：我即将开始攻读计算机科学博士学位。我喜欢设计快速并行算法并证明这些算法的正确性。我也在一些课堂项目中使用过 OpenCV，尽管我没有接受过太多计算机视觉方面的正式培训。

一位潜在的论文顾问找到了我，他致力于为计算机视觉设计更快、更具可扩展性的算法（例如快速图像分割）。我试图了解解决计算机视觉问题的常见做法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T23:26:50.277

你只是没有证明它们。

**您可以在一组测试用例上测试您的算法，并将**输出与先前已知的算法或正确答案进行比较（例如，当您识别文本时，您可以生成一组图像，而不是通常不可能做到的正式证明你知道文本说什么的地方）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T06:51:02.363

这是我个人的看法，所以请看它的价值。

您现在无法证明大多数计算机视觉方法的正确性。我认为当前的大多数方法都是某种“配方”，其中成分被丢弃，直到“结果”足够好。你能证明布朗尼蛋糕是正确的吗？

它在某种程度上与机器学习的演变方式有点相似。起初，人们做神经网络，但它只是一个大“汤”，碰巧或多或少地起作用。它有时有效，但在其他情况下无效，而且没有人真正知道为什么。然后统计学习（通过 Vapnik 等）开始了，并带有一些真正的数学备份。您可以证明您拥有最小化特定损失函数的独特超平面，PCA 为您提供与给定矩阵最接近的固定秩矩阵（考虑到我相信的 Frobenius 范数）等等......

现在，计算机视觉中仍有一些“正确”的东西，但它们非常有限。我想到的是[小波](http://en.wikipedia.org/wiki/Wavelet)：它们是正交函数基中最稀疏的表示。（即：以最小误差表示图像近似值的最压缩方式）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T08:56:03.553

在实践中，计算机视觉更像是一门经验科学：您收集数据，思考可以解释数据某些方面的简单假设，然后检验这些假设。对于人脸识别等高级 CV 任务，您通常没有明确的“正确”定义，因此无法证明正确性。

但是，低级算法是另一回事：您通常在这里对“正确”*有*一个清晰的数学定义。例如，如果您发明了一种算法，可以比已知算法更有效地计算中值滤波器或形态学运算，或者可以更好地并行化，那么您当然必须证明它的正确性，就像任何其他算法一样。

对可以形式化的计算机视觉算法有某些要求也很常见：例如，您可能希望您的算法对旋转和平移保持不变——这些是可以形式化证明的属性。有时也可以创建信号和噪声的数学模型，并设计一个具有最佳信噪比的滤波器（IIRC Wiener 滤波器或 Canny 边缘检测器就是这样设计的）。

许多图像处理/计算机视觉算法都有某种“重复直到收敛”循环（例如蛇或 Navier-Stokes 修复和其他基于 PDE 的方法）。您至少会尝试证明该算法对于任何输入都收敛。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T06:34:17.627

计算机视觉算法不像您可以证明的定理，它们通常试图将图像数据解释为我们人类更容易理解的术语。像人脸识别、运动检测、视频监控等。确切的正确性是不可计算的，就像在图像压缩算法的情况下，你可以很容易地通过图像的大小找到结果。用于显示计算机视觉方法（尤其是分类问题）结果的最常用方法是精度与召回率、准确率与误报率的图表。这些是在各种站点上可用的标准数据库上测量的。通常，您为正确检测设置的参数越严格，产生的误报就越多。典型的做法是根据你的要求从图中选择点'

# jquery - 我应该使用什么事件来隐藏 jquery 中的上下文菜单？

> ID：10050301
> 
> 赞同：1
> 
> 时间：2012-04-06T23:20:07.193
> 
> 标签：jquery

我有一个上下文菜单，当您右键单击时会显示在某些元素上。这没问题。

```
wrapper.on('contextmenu', 'div.outer', function (e) {        
    context_menu.css({
        left: e.pageX,
        top: e.pageY,
        zIndex: '101'
     }).fadeIn();
     return false;
});

//This does not work correctly
context_menu.mouseout(function (e) {
    $(this).fadeOut();
}); 
```

我试图弄清楚当用户没有将鼠标悬停在菜单上时如何隐藏菜单。现在，只要我在右键单击后移动鼠标，它就会淡出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T23:54:26.797

这些事件很可能是`mouseleave`因为它是一个容器。

```
context_menu.mouseleave(function (e) {
    $(this).fadeOut();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T23:38:11.397

看这里：[http ://api.jquery.com/hover/](http://api.jquery.com/hover/)

hover() 事件有一种方法用于鼠标悬停在元素上，另一种用于鼠标不在元素上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T02:53:24.073

`$(selector).hover(handlerIn, handlerOut);`

是以下的简写：

```
$(selector).mouseenter(handlerIn).mouseleave(handlerOut); 
```

# android - 如何禁用 TextView

> ID：10050303
> 
> 赞同：2
> 
> 时间：2012-04-06T23:20:10.730
> 
> 标签：android

我可以在活动类中使用任何命令来禁用`TextViews`在 xml 文件中创建的命令吗？我想把它放在一个 if 子句中，比如：

```
 if (something == null) {
     TextView.dontCreate();
 } else {
     TextView.setText("Hello");
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T23:49:16.403

在参考文献中，我找到了两种方法：invalidate() 和 setVisibility()。但这是一种英语偏好，所以如果英语不好，我无法准确区分它们。也许，你可以试一试。

# regex - 正则表达式字符串格式检查

> ID：10050307
> 
> 赞同：0
> 
> 时间：2012-04-06T23:20:41.653
> 
> 标签：regex

我需要检查字符串是否采用格式

```
05:31:2008:06:27:2010 
```

我不必检查任何内容，例如有效日期或任何内容，只要有 2 位数字、冒号、两位数字、冒号、四位数字......等

所以我第一次尝试这个我的正则表达式看起来像这样

```
[0-9]{2}:[0-9]{2}:[0-9]{4}:[0-9]{2}:[0-9]{2}:[0-9]{4} 
```

它似乎不起作用，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T23:23:22.660

```
\d{2}\:\d{2}\:\d{4}\:\d{2}\:\d{2}\:\d{4} 
```

或更短，分组且不转义`:`

```
(\d{2}:){2}\d{4}:(\d{2}:){2}\d{4} 
```

如果这不起作用，您需要发布更多代码。

# java - 如何在 Google Blobstore 中获取二进制文件的直接 url？

> ID：10050309
> 
> 赞同：2
> 
> 时间：2012-04-06T23:20:47.693
> 
> 标签：java, google-app-engine, blobstore

我的应用程序生成二进制数据（压缩的 xml）并将其保存到 Google App Engine Blobstore。我想返回一个公共 URL，客户端可以使用它从任何地方访问此二进制文件，而无需通过 AppEngine 和我的 Java servlet。[我知道可以使用ImagesService#getServingUrl](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/images/ImagesService.html#getServingUrl%28com.google.appengine.api.blobstore.BlobKey%29)为图像获取这种 URL ，但是对于其他类型的文件呢？

我像这样创建我的文件：

```
FileService#createNewBlobFile("application/octet-stream", "myfile.bin"); 
```

当我调用 AppEngineFile#getFullPath() 时，我得到如下信息：

```
/blobstore/writable:a2c0noo4_LNQ0mS6wFdCMA 
```

我可以看到在我的开发文件系统中创建的文件具有不同的随机名称。它的网址是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T02:18:55.767

您可以将 Google Cloud Storage 用于您的文件。

然后，您可以为您的文件提供一个公共云存储 URL，让您的客户无需通过 AppEngine 即可下载它。您还可以使用许多不同的 ACL 场景来收紧访问权限，它在文档中。

[将 Google Cloud Storage 与 Files API 结合使用。](https://developers.google.com/appengine/docs/java/googlestorage/overview)

[云存储文档。](https://developers.google.com/storage/docs/getting-started)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T00:27:02.613

根据文档，blobstore 中的对象没有公共 URL。您只能通过应用程序中的 Blobstore API 访问它。因此，如果您希望每个 blobstore 对象都有一个 URL，则必须为此创建自己的处理程序，这当然必须通过 AppEngine 和您的 Java servlet。

我认为`ImagesService#getServingUrl`不会为 blobstore 中的图像生成公共 URL。该 URL 并不真正直接指向您的 blobstore 数据。它指向能够访问您的 blobstore 的图像服务，并通过其自己的高性能基础架构为您提供图像。

# c# - 将 DTO 对象图映射回客户端/服务器应用程序中的实体框架对象图的优雅方式

> ID：10050313
> 
> 赞同：4
> 
> 时间：2012-04-06T23:22:29.677
> 
> 标签：c#, wcf, entity-framework

我有一个客户端/服务器应用程序，其中服务器使用实体框架作为 ORM。每个要发送到客户端的实体都由 DTO 类表示。

实体框架和 DTO 类之间的映射是使用 AutoMapper 处理的。

假设我们有以下表格：

Person (string Name, int CountryID) Country (int CountryID, int Population, string Name)

它们由以下 EF 类表示：

```
class Person
{
 public string Name { get; set; }
 public int CountryID { get; set; }
 public Country Country { get; set;}
}

class Country
{
 public int CountryID { get; set; }
 public int Population { get; set; }
 public string Name { get; set;}
} 
```

依次由以下 DTO 表示：

```
class PersonDTO
{
 public string Name { get; set; }
 public CountryDTO Country { get; set;}
}

class CountryDTO
{
 public int CountryID { get; set; }
 public int Population { get; set; }
 public string Name { get; set;}
} 
```

数据库的初始状态表示一个空的 Person-Table 和一个 Country-table，它有一个条目：(1, 123, 'CountryXYZ')

客户的应用程序任务是创建一个新的人员实体并将其国家参考附加到可用的“国家XYZ”国家实体。

为此，客户端应用程序首先请求可用的 CountryDTO。然后它创建一个新的 PersonDTO 实例并将其 Country 属性设置为它从服务器接收到的唯一 CountryDTO。然后这个 PersonDTO 实例被发送回服务器。服务器依次将 PersonDTO-instance 映射回 Person-instance。

服务器的最后一步现在是将 Person-instance 存储在 ObjectContext 中并调用 ObjectContext.SaveChanges()。

这种方法的问题是，只要我调用 ObjectContext.SaveChanges()，就会在数据库中创建一个新的 Country-row，而不仅仅是使用可用的 Country-row。我在这里想念什么？

我是 EF 的新手，我认为这个用例很常见......所以我希望有一个简单的解决方法。

如果问题描述不够清楚，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T16:54:45.787

如果您知道客户端将始终使用它已​​经从您的服务器收到的国家/地区（它是现有的），您可以简单地修改您的保存逻辑以使用：

```
objectContext.PersonSet.AddObject(personToSave);
objectContext.ObjectStateManager
             .ChangeObjectState(personToSave.Country, EntityState.Unchanged);
objectContext.SaveChanges(); 
```

如果您使用`AddObject`方法，则实体及其所有关系都被标记为已添加，并将作为新对象插入到数据库中，除非您重新配置它们的状态。

您的实体还公开了 FK 属性，因此您可以在将 DTO 映射回实体而不是创建国家/地区实例时使用 FK 属性。在这种情况下，您将不需要处理更改关系状态，因为该关系将仅通过整数列表示。

如果客户端可以在单个调用中创建两者`Person`，`Country`您将需要在 DTO 中使用一些标志来区分现有实体或新实体，或者您必须查询数据库以验证是否`Country`已经存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T23:59:24.443

这是一个使用[自我跟踪实体](http://msdn.microsoft.com/en-us/library/ff407090.aspx)可能对您有用的实例。

它使用 T4 模板来生成您的实体类，并且可以使用 WCF 来回传输它们。但是，您需要在客户端和服务器上共享包含实体的程序集。

如果您同时控制两者，并且两者都使用.Net，我会走那条路。

# java - Android/Java 变量可能超出范围

> ID：10050318
> 
> 赞同：0
> 
> 时间：2012-04-06T23:23:01.603
> 
> 标签：java, android, scope

当我运行下面的代码时，一切都很好，直到我改变了 seekBar 的值。onProgressChange 更改 myValue 的文本值。我用力关闭，它给了我下面的日志猫条目。

在进行调试时，抛出的异常说它找不到 ID 2，你可以说它是 myValue，这是意料之中的。请让我知道你在想什么。谢谢

```
04-06 18:15:38.576: E/AndroidRuntime(25164):android.content.res.Resources$NotFoundException: String resource ID #0x2f
04-06 18:15:38.576: E/AndroidRuntime(25164):    at android.content.res.Resources.getText(Resources.java:201)
04-06 18:15:38.576: E/AndroidRuntime(25164):    at android.widget.TextView.setText(TextView.java:2877)
04-06 18:15:38.576: E/AndroidRuntime(25164):    at thisPackage.Tabs.CustomSeekBar.onProgressChanged(CustomSeekBar.java:74) 
```

颜色活动（主要）

```
public class ColorsActivity extends Activity
{
CustomSeekBar red = new CustomSeekBar();
RelativeLayout theItem;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.seekbarlist);     
    RelativeLayout thisOne = (RelativeLayout)findViewById(R.id.mainLayout);

    attachLayout(thisOne, red, "red", 1);
    //attachLayout(thisOne, "blue", 2);
    //attachLayout(thisOne, "green", 3);

   // Amarino.connect(this, "00:11:11:21:05:53");
}
public void attachLayout(RelativeLayout layout, CustomSeekBar object, String label, int id)
{

    theItem = object.createCustomSeekBar(this, label);
    theItem.setId(id);
    RelativeLayout.LayoutParams myLayoutParams  =  new RelativeLayout.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT);
    myLayoutParams.addRule(RelativeLayout.BELOW,id-1);
    theItem.setLayoutParams(myLayoutParams);
    layout.addView(theItem, id);
}

} 
```

自定义搜索栏

```
public class CustomSeekBar implements SeekBar.OnSeekBarChangeListener {

  Context myContext;
 RelativeLayout myLayout;
  TextView myValue;
  TextView myLabel;
  SeekBar mySeekBar;

  public void CustomSeekBar(){

  }

public RelativeLayout createCustomSeekBar(Context context, String label){

    myContext = context;                
    myLayout = new RelativeLayout(myContext); 

    mySeekBar = new SeekBar(myContext);
    myLabel = new TextView(myContext);
    myValue = new TextView(myContext);  

    mySeekBar.setId(1);
    myLabel.setId(2);
    myValue.setId(3);

    RelativeLayout.LayoutParams mySeekBarParams =  new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.FILL_PARENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
    RelativeLayout.LayoutParams myLabelParams   =  new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
    RelativeLayout.LayoutParams myValueParams   =  new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);

    int seekBarId =  mySeekBar.getId();
    int labelId =  myLabel.getId();

    myLabelParams.addRule(RelativeLayout.BELOW,seekBarId);
    myValueParams.addRule(RelativeLayout.BELOW,seekBarId);
    myValueParams.addRule(RelativeLayout.RIGHT_OF,labelId);

    mySeekBar.setLayoutParams(mySeekBarParams);
    myLabel.setLayoutParams(myLabelParams);
    myValue.setLayoutParams(myValueParams);

    myLabel.setText(label);
    myValue.setText("hello");       
    mySeekBar.setOnSeekBarChangeListener(this);

    myLayout.addView(myLabel);
    myLayout.addView(myValue);
    myLayout.addView(mySeekBar);

    return myLayout;

}

 public void onProgressChanged(SeekBar seekBar, int progress, boolean fromTouch) {
    myValue.setText(progress);      
    //Amarino.sendDataToArduino(myContext, "00:11:11:21:05:53", 'A', progress);
 }
 public void onStopTrackingTouch(SeekBar seekBar){

 }
 public void onStartTrackingTouch (SeekBar seekBar){
 }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T23:33:59.490

您正在将文本设置为 int，因此 Android 认为您正在尝试通过 id 引用资源。转换`progress`为字符串应该可以解决您的问题。例如`Integer.toString(progress)`。

# c++ - C++ 新建和删除

> ID：10050320
> 
> 赞同：-4
> 
> 时间：2012-04-06T23:23:12.133
> 
> 标签：c++

我分配了内存，但是当我调用析构函数时，它给了我一个分段错误。这是代码。我是否使用正确的方法来释放内存？

```
class plan {
    char *symbol;
    gro  *grow;
  public:
    plan (int, char[] ); //constructor
    ~plan ( ); //destructor
};

plan::plan (int num_of_sm, char sm[]){
  try {
    symbol = new char [strlen(sm) + 1];
  }
  catch (std::bad_alloc) {
    symbol = NULL;
  }

  if (symbol != NULL) {
    if (sm == NULL) {
      strcpy (symbol, "");
    }
    else {
      strcpy (symbol, sm);
    }
  }
  gro = new grow [num_of_sm]; 
}

plan::~plan( ){
  delete [ ] symbol;
  delete [ ] gro;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T23:52:21.770

使用`std::string`并完成它。

以防万一不明显，这将解决问题。

但是，为了避免一些类似的问题并只是了解更多所涉及的问题，请查看 3 规则，或者现在在 C++11 中已知的 5 规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T01:45:13.253

内存问题可能非常棘手，因为程序并不总是立即崩溃。例如，如果您两次删除同一个指针，程序可能会继续正常运行，直到稍后删除它崩溃的地方。如果你在 Linux 上运行，我建议运行 valgrind（假设它已安装，只需键入 valgrind 后跟正常命令。例如`valgrind myprog arg1 arg2`）

无论如何，不​​要假设问题一定是程序崩溃的地方。尝试检查任何其他删除/释放语句是否存在问题。您还确定 num_of_sm 是一个合理的值吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T02:48:19.587

> 当我调用析构函数时，它给了我一个分段错误。

你的意思是测试代码吗（下面）

```
int main()
{
    plan a_plan(2, "hello");
    a_plan.~plan();
} 
```

如果是这样，我认为问题在于您两次删除了指针。第一次在 plan::~plan() 中，第二次在离开 main() 时。所以，不要调用plan::~plan()。

而且你应该遵循三法则（或五法则），也就是说：如果你定义了析构函数，你应该同时定义复制构造函数和赋值运算符。

# google-maps - 谷歌地图 | 代码只运行 localhost

> ID：10050322
> 
> 赞同：-1
> 
> 时间：2012-04-06T23:23:31.660
> 
> 标签：google-maps, google-maps-api-3, localhost

我想将 Google Maps API v3 用于我正在制作的网站...我在 localhost 上制作并尝试了代码并运行，然后我将文件上传到我的 ftp 并注册了 API KEY . 好的。我已经修改了谷歌地图的 src 文件，添加了密钥，但它没有运行。我不知道让它运行。

我使用 AJAX。

[http://www.superclub95.com/#vive-superclub/localizacion](http://www.superclub95.com/#vive-superclub/localizacion)

这样对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T23:40:26.230

你有几十个网络错误，还有脚本错误，你有没有看过控制台内部？

但是，没有任何反应，因为您没有调用`initialize()`.

# django - 在 Django 中集成 celery beat？

> ID：10050325
> 
> 赞同：1
> 
> 时间：2012-04-06T23:23:42.957
> 
> 标签：django, django-models, django-admin, data-integrity, database-normalization

我刚刚开始了一个项目，试图启动一个非常简单的 Django Celery 项目。因为我主要只是想看看它是如何工作的，所以我的设置如下所示：

```
BROKER_TRANSPORT = "django"
CELERY_ALWAYS_EAGER = True
CELERYBEAT_SCHEDULER = "djcelery.schedulers.DatabaseScheduler" 
```

我已经`apply_async()`通过在 Django 管理站点中安排它们来测试发布任务，并且两者都工作得很好。

我目前看到的唯一问题是我需要运行两个单独的进程来测试我的任务，`django runserver`并且`django celerybeat`. 当我更改周期性任务时，我需要重新启动`celerybeat`进程以使其重新加载。有什么方法可以让我运行`celerybeat`集成的进程`runserver`，以避免必须记住启动另一个进程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T13:38:19.573

我自己没有使用过，但看来您应该查看[django-supervisor](https://github.com/rfk/django-supervisor)项目。我的理解是它可以配置为自动重新加载与您的网络服务器一起运行的任意数量的并发运行进程的内容。

或者，您可以使用 celery 2.5 的 --autoreload 功能。[发行说明](http://ask.github.com/celery/whatsnew-2.5.html#experimental-support-for-automatic-module-reloading)中对此有更多详细信息。

# php - 从 Ajax 导航中的 url 中删除哈希 (#) 而不刷新

> ID：10050329
> 
> 赞同：0
> 
> 时间：2012-04-06T23:23:55.410
> 
> 标签：php, jquery, ajax, url

我有一个类似于[这里的](http://www.queness.com/resources/html/ajax/index.php#page4)**ajax 导航**。

现在如果单击菜单 window.location.hash 像这样添加**#about**

**我想删除哈希 (#)，以便人们可以轻松地自然地复制和共享链接。**

如果没有 pagerefresh crossbrowserwise (IE7+,FF,Opera,Safari)，如何在 2012 年 4 月做到这一点？

*获取灵感：实际上有人已经[这样](http://cssbrigit.com/wpthemes/hungarian/features/)做了，点击“投资组合”或“功能”并在浏览器中查看 url。*

感谢您的提示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T23:31:29.710

可用时使用历史 API。而不是设置哈希（在支持它的浏览器上），去：

```
history.pushState({ /* Some state object */ }, "A title representing this state"); 
```

`popstate`然后，在事件监听器中处理状态变化。以这种方式做事意味着 URL 不会改变，但历史记录仍然可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T23:34:40.643

您正在寻找的是`pushState`： [http ://badassjs.com/post/840846392/location-hash-is-dead-long-live-html5-pushstate](http://badassjs.com/post/840846392/location-hash-is-dead-long-live-html5-pushstate)

HTML5 让我们可以访问浏览器的浏览历史记录，让我们即时操作它：

```
window.history.pushState(data, "Title", "/new-url"); 
```

这会操纵当前页面以将“/new-url”显示为 url，将“Title”显示为页面的标题。有一些 javascript 库可以为您处理这个问题，例如[主干.js](http://documentcloud.github.com/backbone/)。

如果您共享 URL，您将需要命令您的应用程序仍然提供正确的内容（或者只是提供为您提供内容的“基础”javascript 应用程序）。

希望这能让你指出正确的方向。

# bash - Bash脚本将一个文件中的代码插入另一个文件的特定位置？

> ID：10050330
> 
> 赞同：1
> 
> 时间：2012-04-06T23:24:05.883
> 
> 标签：bash, shell, scala, scripting, sed

我有一个带有一段代码的 fileA，我需要一个脚本将该代码段插入到 fileB 中特定模式之后的行中。

我正在尝试使[该线程中接受的答案](https://stackoverflow.com/questions/5073014/inserting-multiline-text-from-file-to-another-file-after-pattern)起作用，但事实并非如此，也没有给出错误，所以不知道为什么不：

```
sed -e '/pattern/r text2insert' filewithpattern 
```

有什么建议么？

模式（在后面插入代码段）：

```
def boot { 
```

也尝试了转义模式，但没有运气：

```
def\ boot\ {
def\ boot\ \{ 
```

文件片段：

```
 LiftRules.htmlProperties.default.set((r: Req) =>
        new Html5Properties(r.userAgent)) 
```

文件B（引导.scala）：

```
package bootstrap.liftweb
import net.liftweb._
import util._
import Helpers._
import common._
import http._
import sitemap._
import Loc._

/**
 * A class that's instantiated early and run.  It allows the application
 * to modify lift's environment
 */
class Boot {
  def boot {
    // where to search snippet
    LiftRules.addToPackages("code")

    // Build SiteMap
    val entries = List(
      Menu.i("Home") / "index", // the simple way to declare a menu

      // more complex because this menu allows anything in the
      // /static path to be visible
      Menu(Loc("Static", Link(List("static"), true, "/static/index"), 
           "Static Content")))

    // set the sitemap.  Note if you don't want access control for
    // each page, just comment this line out.
    LiftRules.setSiteMap(SiteMap(entries:_*))

    // Use jQuery 1.4
    LiftRules.jsArtifacts = net.liftweb.http.js.jquery.JQuery14Artifacts

    //Show the spinny image when an Ajax call starts
    LiftRules.ajaxStart =
      Full(() => LiftRules.jsArtifacts.show("ajax-loader").cmd)

    // Make the spinny image go away when it ends
    LiftRules.ajaxEnd =
      Full(() => LiftRules.jsArtifacts.hide("ajax-loader").cmd)

    // Force the request to be UTF-8
    LiftRules.early.append(_.setCharacterEncoding("UTF-8"))

  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T23:34:21.610

sed 格式对我来说是正确的。

为了帮助您诊断此问题，请尝试使用两个更简单的文本文件和一个简单的模式。

文件filewithpattern：

```
hello
world 
```

文件文本插入：

```
foo
goo 
```

现在运行 sed：

```
sed -e '/hello/r textinsert' filewithpattern 
```

你应该看到这个：

```
hello
foo
goo
world 
```

那对你有用吗？

如果是这样，则编辑 filewithpattern 以使用您的目标：

```
hello
def boot {
world 
```

运行命令：

```
sed -e '/def boot {/r textinsert' filewithpattern 
```

你应该看到这个：

```
hello
def boot {
foo
goo
world 
```

如果你想要变量替换，试试这个：

```
#!/bin/bash
PATTERN='def boot {'
sed -e "/${PATTERN}/r textinsert" filewithpattern 
```

# c - 在 C 中添加和排序链表

> ID：10050336
> 
> 赞同：3
> 
> 时间：2012-04-06T23:25:29.527
> 
> 标签：c, pointers, linked-list, structure

在我的作业中，我必须编写一个函数，该函数将一个指向“LNode”结构的指针和一个整数参数作为参数。然后，我不仅要将该整数添加到链表中，还要将其放置以便列表按正确的升序排列。我已经尝试了几种不同的尝试，这是我发布时的代码。

```
LNode*  AddItem(LNode  *headPtr, int  newItem)
{
    auto    LNode   *ptr = headPtr;

    ptr = malloc(sizeof(LNode));

    if (headPtr == NULL)
    {
        ptr->value = newItem;
        ptr->next = headPtr;
        return ptr;
    }
    else
    {

        while (headPtr->value > newItem || ptr->next != NULL)
        {
            printf("While\n"); // This is simply to let me know how many times the loop runs
            headPtr = headPtr->next;
        }
        ptr->value = newItem;
        ptr->next = headPtr;
        return ptr;
    }

}  // end of "AddItem" 
```

当我运行它并尝试插入一个 5 和一个 3 时，5 被插入，但随后 while 循环运行一次，我得到一个分段错误。

此外，我无法更改参数，因为它是该项目的骨架代码的一部分。感谢任何能提供帮助的人。

如果它有帮助，这就是结构的样子

```
typedef struct  LNode
{
    int                 value;
    struct  LNode      *next;

} LNode; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T23:45:36.687

在你的循环中

```
while (headPtr->value > newItem || ptr->next != NULL)
    {
    printf("While\n"); // This is simply to let me know how many times the loop runs
    headPtr = headPtr->next; 
```

您检查未初始化的是否`ptr->next`为 (not) `NULL`。这是不明智的，并且如果该部分中的位模式可能`ptr`不是`NULL`指针的位模式，则可能会造成严重破坏，因为您有一个`||`in 条件，那么循环条件始终为真并且您跑出了列表的末尾。

`||`无论如何都是错误的，你需要一个，`&&`两个条件都必须成立，有些不是`NULL`，并且值之间的关系必须成立。

而且，由于您希望列表按升序排列，因此您必须在列表中的值*小于*要插入的值时遍历列表。

但是您必须在指向的值变得与新值一样大或大于新值之前停止，因为您必须修改`next`插入新值之后的节点的指针。

```
if (headPtr->value >= newItem) {
    ptr->value = newItem;
    ptr->next = headPtr;
    return ptr;
}
while(headPtr->next != NULL && headPtr->next->value < newItem) {
    headPtr = headPtr->next;
}
// Now headPtr is the node behind which the new item is to be inserted
ptr->value = newItem;
ptr->next = headPtr->next;
headPtr->next = ptr;
return ?? 
```

但是你会返回什么指针？如果新项是列表中的第一个，则返回指向第一个节点的指针。如果您还想在以后插入新项目时这样做，则需要保留（副本）原件`headPtr`并将其退回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T23:35:44.940

您的 while 循环条件是错误的。您从未设置`ptr->next`，但您使用它来检查循环中`ptr->next!=NULL`哪个方法`headPtr=headPtr->next`变得疯狂。所以你应该设置：`ptr->next=NULL`一旦你设置了它的值。

您也可以将这些行取出并将其放在顶部：

```
 ptr->value = newItem;
   ptr->next = headPtr; 
```

尝试这个：

```
LNode*  AddItem(LNode  *headPtr, int  newItem)
{
    auto    LNode   *ptr, *temp, *orghead;
    orghead = headPtr;
    int fl=0;
    ptr = malloc(sizeof(LNode));
    ptr->value = newItem;
    ptr->next = NULL;
    temp = ptr;

    if (headPtr == NULL)
        return ptr;
    else
        {

        while(headPtr != NULL && headPtr->value < newItem)
            {
            printf("While\n");
            fl =1;
            temp = headPtr;
            headPtr = headPtr->next;
            }
        temp->next = ptr;
        ptr->next = headPtr;
        if(fl) return orghead;
        else return temp;
        }

}  // end of "AddItem" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T23:44:41.103

您的 while 循环一直持续到链表的末尾，并且您的最后一个元素为空。因此，在您的 while 条件下，您正在取消引用一个空节点（headPtr），这样就会出现分段错误。我认为您需要像这样检查您的节点是否为空：

```
while (headPtr != NULL && (headPtr->value > newItem || ptr->next != NULL)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-13T11:25:26.183

从以上所有来看都是如此

```
while (headPtr->value > newItem || ptr->next != NULL)
        {
            printf("While\n"); // This is simply to let me know how many times the loop runs
            headPtr = headPtr->next;
        } 
```

您没有在 While 内检查 headPtr 的空条件

在此刻

```
headPtr = headPtr->next; 
```

headPtr->next 可以为 null，这会使您的程序崩溃

多一点

```
LNode*  AddItem(LNode  *headPtr, int  newItem)
{

auto    LNode   *ptr = headPtr; ?

    ptr = malloc(sizeof(LNode));

    if (headPtr == NULL)
    {
        ptr->value = newItem;
        ptr->next = headPtr;
        return ptr;
    } 
```

考虑 headPtr 不是 NULL，ptr 现在指向一些 malloc 堆 ptr->next 在这种情况下可能是也可能不是 NULL

```
while (headPtr->value > newItem || ptr->next != NULL) 
```

将是不可预测的

可能你需要多看看你的逻辑

如果您愿意，请参阅下面的伪逻辑

```
LNode* add_time(LNode *headptr , data){

    LNode   *ptr =  headptr, *temp;        

    temp = malloc(sizeof(LNode));

    if(!temp) 
      return ptr;

    temp->next = NULL;
    temp->value= data;

    if(ptr == NULL){ 
        /** There is no list**/
        ptr = temp;
        return ptr;
     }

    /* go to last node*/
    while(ptr->next)
        ptr = ptr->next;

    ptr->next = temp;

    return ptr;

} 
```

# qt - 构建 argv 和 argc

> ID：10050338
> 
> 赞同：0
> 
> 时间：2012-04-06T23:25:36.087
> 
> 标签：qt, arguments, main, argv, argc

我是一名学生程序员，使用 Qt 构建用于工作的 GUI 应用程序。此应用程序的主要目的是打开我们的一些旧样式文件，允许更好地编辑，然后以新格式和文件扩展名保存文件。最近有人要求我允许从终端进行这种转换。虽然我确实知道 argv 和 argc 是什么以及它们代表什么，但我不确定如何完成他们想要的。例如如何处理相对路径与绝对路径……也许如何从相对路径中获取绝对路径；也许这些都不需要。我的编程经验主要是使用 guis，所以这对我来说有点新。

用户希望从终端运行以下内容

```
application -o /fileLocation /fileDestination template(to determine new format) 
```

我开始使用 for 循环和 if 语句来完成这一点，因为我意识到我可能正在对所有这一切采取磨损的方法。如果 QT 有这方面的东西，我也会很感兴趣！这是我开始想出的：

```
int main(int argc, char *argv[])
{
    if(argc > 1)
    {
        for(int i = 0; i < argc; i++)
        {
            if(argv[i] == "-c")
            {
                QString fileName = QString::fromStdString(argv[i+1]);
                QString fileDestination = QString::fromStdString(argv[i+2]);
                QString templateName = QString::fromStdString(argv[i+3]);
                QFile fileToConvert(fileName);
                if(fileToConvert.open(QFile::ReadOnly))
                {
                //do stuff 
```

感谢您阅读我的帖子，非常感谢您为帮助我克服这个问题所做的任何贡献。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T04:49:24.183

`if(argv[i] == "-c")`

你不能像那样比较 C 字符串。你可以比较字符，所以你可以做
`if(argv[i][0] == '-' && argv[i][1] == 'c')`

但在 Qt 中，您应该使用 QApplication::arguments 请参阅[在 Qt 应用程序中获取命令行参数](https://stackoverflow.com/questions/2918353/obtaining-command-line-arguments-in-a-qt-application)

# excel - 在单元格引用中插入字符串

> ID：10050343
> 
> 赞同：-1
> 
> 时间：2012-04-06T23:26:05.627
> 
> 标签：excel

我在一个单元格（“I8”）中有工作表的名称，我在另一个单元格中我想获取位于不同工作簿中但具有相同名称的单元格的值。

我试过了：

```
='[Results.xlsx]'&I8&'!$P$2 
```

但我得到一个错误。我试过使用`"`，但我也得到一个错误。我已经这样做了，但是我没有带excel文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T23:45:09.617

采用`Indirect()`

```
=INDIRECT("'[Results.xlsx]" & I8 & "'!$P$2") 
```

# c++ - OpenCV：如何在图像上应用彩虹渐变图？

> ID：10050344
> 
> 赞同：8
> 
> 时间：2012-04-06T23:26:21.930
> 
> 标签：c++, c, opencv, gradient

假设我们有一张通过 openCV 以某种方式修改的图像：

![在此处输入图像描述](../Images/418d0fac45e87002609aae121ec5ab27.png)

现在我们很乐意将[渐变映射应用于它（就像我们可以通过 Photoshop 应用的那样）](http://help.adobe.com/en_US/Photoshop/11.0/WSfd1234e1c4b69f30ea53e41001031ab64-763fa.html)：

![在此处输入图像描述](../Images/92ea4508ab8f9537b8ac4830c1286f9c.png)

所以我想知道如何通过openCV应用渐变图（彩虹色）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-09T07:28:11.033

这是一种使用 Python 创建假/伪彩色图像的方法，转换为 c++ 应该非常简单。概述：

1.  以灰度和 RGB 格式打开图像
2.  将 RGB 图像转换为 HSV（色相、饱和度、值/亮度）颜色空间。这是一个圆柱形空间，色调由极轴上的单个值表示。
3.  将色调通道设置为我们已经打开的灰度图像，这是关键的一步。
4.  将值和饱和度通道都设置为最大值。
5.  转换回 RGB 空间（否则显示将不正确）。

虽然有几个问题......

1.  由于色调以度为单位，色谱表示为 0 到 180（不是 0-256 也不是 0-360（有时是这种情况）），我们需要通过乘以适当地重新缩放灰度图像`180 / 256.0`
2.  在 opencv 情况下，色调色阶从蓝色开始（不是红色，如您的图像中所示）。IE。映射是这样的：

从：![在此处输入图像描述](../Images/5b139f4762964d9de69708c79b6fbb14.png)到：![在此处输入图像描述](../Images/bb251b2f8721a406f883926d95cd6d55.png)

如果这对改变很重要，我们可以通过偏移所有色调元素并将它们包裹在 180 左右来实现（否则它会饱和）。代码通过在这个截止点屏蔽图像然后适当地偏移来做到这一点。使用 120 的偏移量，生成您的色标：

从：![在此处输入图像描述](../Images/5b139f4762964d9de69708c79b6fbb14.png)到：![在此处输入图像描述](../Images/c0d90147e10f9755787706e0d7f56608.png)

并且以这种方式处理的图像似乎与您的图像非常匹配（最后）。

```
import cv

image_bw = cv.LoadImage("TfBmw.jpg", cv.CV_LOAD_IMAGE_GRAYSCALE)
image_rgb = cv.LoadImage("TfBmw.jpg")

#create the image arrays we require for the processing
hue=cv.CreateImage((image_rgb.width,image_rgb.height), cv.IPL_DEPTH_8U, 1)
sat=cv.CreateImage((image_rgb.width,image_rgb.height), cv.IPL_DEPTH_8U, 1)
val=cv.CreateImage((image_rgb.width,image_rgb.height), cv.IPL_DEPTH_8U, 1)
mask_1=cv.CreateImage((image_rgb.width,image_rgb.height), cv.IPL_DEPTH_8U, 1)
mask_2=cv.CreateImage((image_rgb.width,image_rgb.height), cv.IPL_DEPTH_8U, 1)

#convert to cylindrical HSV color space
cv.CvtColor(image_rgb,image_rgb,cv.CV_RGB2HSV)
#split image into component channels
cv.Split(image_rgb,hue,sat,val,None)
#rescale image_bw to degrees
cv.ConvertScale(image_bw, image_bw, 180 / 256.0)
#set the hue channel to the greyscale image
cv.Copy(image_bw,hue)
#set sat and val to maximum
cv.Set(sat, 255)
cv.Set(val, 255)

#adjust the pseudo color scaling offset, 120 matches the image you displayed
offset=120
cv.CmpS(hue,180-offset, mask_1, cv.CV_CMP_GE)
cv.CmpS(hue,180-offset, mask_2, cv.CV_CMP_LT)
cv.AddS(hue,offset-180,hue,mask_1)
cv.AddS(hue,offset,hue,mask_2)

#merge the channels back
cv.Merge(hue,sat,val,None,image_rgb)
#convert back to RGB color space, for correct display
cv.CvtColor(image_rgb,image_rgb,cv.CV_HSV2RGB)

cv.ShowImage('image', image_rgb)
# cv.SaveImage('TfBmw_120.jpg',image_rgb)
cv.WaitKey(0) 
```

您的图像处理过`offset = 120`：

![在此处输入图像描述](../Images/2505641892279a752eb022c5bf400673.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-12-14T09:53:52.420

现在存在名为[applyColorMap](https://docs.opencv.org/2.4/modules/contrib/doc/facerec/colormaps.html)的 openCV 函数，它使这个过程变得微不足道。以下代码可以解决问题

```
image_cm = cv2.applyColorMap(image, cv2.COLORMAP_JET)) 
```

这是结果：

[![原飞机](../Images/2c1e024b8a6e1d47df607fd273a2fd37.png)](https://i.stack.imgur.com/CzfFT.png) 图 1：原始平面 图 [![应用颜色图后的平面](../Images/5b482b3667dc05c75a6ac402d6195232.png)](https://i.stack.imgur.com/N0jtf.png) 2：应用颜色图后的平面

# cuda - 分散段的分段缩减

> ID：10050345
> 
> 赞同：5
> 
> 时间：2012-04-06T23:26:32.773
> 
> 标签：cuda, opencl, gpgpu, reduction

我必须在 GPU 上解决一个非常标准的问题，但我对实用的 GPGPU 还是很陌生，所以我正在寻找解决这个问题的想法。

我在 3 空间中有很多点被分配给极少数的组（每个点属于一个组），在这种情况下特别是 15 个（永远不会改变）。现在我想计算所有组的均值和协方差矩阵。所以在CPU上它大致相同：

```
for each point p
{
    mean[p.group] += p.pos;
    covariance[p.group] += p.pos * p.pos;
    ++count[p.group];
}

for each group g
{
    mean[g] /= count[g];
    covariance[g] = covariance[g]/count[g] - mean[g]*mean[g];
} 
```

由于组的数量非常少，最后一步可以在 CPU 上完成（无论如何，我需要 CPU 上的这些值）。第一步实际上只是分段缩减，但分段分散。

所以我想出的第一个想法是首先按他们的组对点进行排序。我考虑了一个简单的桶排序，`atomic_inc`用于计算桶大小和每点重定位索引（对排序有更好的想法？，原子可能不是最好的想法）。之后，它们按组排序，我可能会想出[此处](http://www.idav.ucdavis.edu/publications/print_pub?pub_id=1041)介绍的分段扫描算法的改编版。

但是在这种特殊情况下，我每点获得大量数据（9-10 个浮点数，如果需要，甚至可能翻倍），因此使用每个线程共享内存元素和每个点线程的标准算法可能会产生问题将每个多处理器资源视为共享内存或寄存器（好吧，计算能力 1.x 比 2.x 更多，但仍然如此）。

由于组的数量非常少且固定，我认为可能有更好的方法。也许已经存在适合此类标准问题的这些特定属性的想法。或者，也许我的一般方法还不错，并且您有改进各个步骤的想法，例如适用于非常少量键的良好排序算法或某些分段缩减算法，以最大限度地减少共享内存/寄存器的使用。

我正在寻找通用方法并且不想使用外部库。FWIW 我正在使用 OpenCL，但这并不重要，因为 GPU 计算的一般概念在主要框架上并没有真正的不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T03:15:54.617

即使组很少，我认为您无法避免最初的分组，同时仍然保持减少步骤的效率。您可能还希望执行完整排序，而不仅仅是排序索引，因为这将有助于在缩减步骤中保持内存访问的效率。

对于排序，请在此处阅读有关一般策略的信息：

[http://http.developer.nvidia.com/GPUGems2/gpugems2_chapter46.html](http://http.developer.nvidia.com/GPUGems2/gpugems2_chapter46.html)

为了减少（旧但仍然很好）：

[http://developer.download.nvidia.com/compute/cuda/1.1-Beta/x86_website/projects/reduction/doc/reduction.pdf](http://developer.download.nvidia.com/compute/cuda/1.1-Beta/x86_website/projects/reduction/doc/reduction.pdf)

对于并行归约的示例实现：

[http://developer.nvidia.com/cuda-cc-sdk-code-samples#reduction](http://developer.nvidia.com/cuda-cc-sdk-code-samples#reduction)

# objective-c - iOS获取磁盘上的文件大小

> ID：10050347
> 
> 赞同：1
> 
> 时间：2012-04-06T23:27:02.373
> 
> 标签：objective-c, ios, xcode, size, disk

我正在尝试使用Objective C获取iOS中文件的磁盘大小。到目前为止，我已经能够使用 `NSFileManager`然后获取属性`attributesOfItemAtPath:error`而不是大小来获取文件的实际大小和其他文件信息磁盘。我也尝试从中获取文件大小，`struct stat`但它又没有给我磁盘上的大小。我尝试使用`NSTask`来调用`du -h`但 iOS 不允许我分叉其他进程。欢迎任何想法:)

我知道这个问题与许多其他问题相似，但不同之处在于我正在尝试在 iOS 中执行此操作，而其他系统中使用的大多数方法在这里都不起作用。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T23:43:16.233

编辑：值得在这里阅读 Nikolai Ruhe 对同一问题的回答：[https](https://stackoverflow.com/a/28660040/97337) ://stackoverflow.com/a/28660040/97337 。

请参阅[iphone 文件系统的块大小是多少？](https://stackoverflow.com/questions/1315311/what-is-the-block-size-of-the-iphone-filesystem)有关 iOS 块大小的信息。磁盘上文件的`stat`大小将四舍五入到下一个块的大小。

# php - 仅当使用类时 PHP 加载/包含文件

> ID：10050349
> 
> 赞同：2
> 
> 时间：2012-04-06T23:27:21.663
> 
> 标签：php

我有几个类，某些类只需要 SDK 的一部分。

例如

`class a { /* requires filea.php*/ }`

`class b { /*requires fileb.php*/ }`

而不是像在顶部包含文件

```
require_once 'filea.php';
require_once 'fileb.php';

class a { /*do stuff*/ }
class b { /*do stuff*/ } 
```

我可以将它们包含在类中，以便仅在制作对象时加载吗？

```
class a { require filea.php; /*do stuff*/ }
class b { require fileb.php; /*do stuff*/ } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T23:29:08.357

这涉及[紧密耦合，这被认为是一种不好的做法](https://docs.google.com/viewer?a=v&q=cache%3armWGOtwA6nwJ%3amartinfowler.com/ieeeSoftware/coupling.pdf%20&hl=en&gl=us&pid=bl&srcid=ADGEESg-ohhDQzr3on1fPMUbbz3wArmjb3Z-pXLjIoUYCD3UuW2EoyVO71J066HW-rn_8z_o2snhrQe7tzIsSIttAjUQ2BaY7icOggyDh5utojhuItEtTup2lq06vzh8H4Vf1O-oRNga&sig=AHIEtbT4La65_UMC8rpSXg4ReQgifS_xqw&pli=1)。如果您需要两个类一起工作，您应该使用[依赖注入。](https://www.google.com/search?sourceid=chrome&ie=UTF-8&q=why%20coupling%20is%20bad#hl=en&safe=off&sa=X&ei=s3x_T97JIpGE8QT2gYXOBw&ved=0CBwQvwUoAQ&q=php%20dependency%20injection&spell=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=87c6230bd8e448f1&biw=1359&bih=864)

但是，无论如何，自动加载应该让你更容易做到：

*   [`__autoload()`](http://php.net/manual/en/function.autoload.php)
*   [`SPL Autoload`](http://us.php.net/manual/en/function.spl-autoload.php)

# bash - awk - 检查时间码

> ID：10050351
> 
> 赞同：2
> 
> 时间：2012-04-06T23:27:56.187
> 
> 标签：bash, shell, awk, timecodes

在我的文件中，每一行看起来像这样：

```
\18:49:25 1920/11/29\ 0.25 
```

当我将其保存在变量中时，有没有一种方法可以检查时间码是否正确，以确保其中没有拼写错误（最多 12 个月，用 4 个数字写的年份等）？

```
\%H:%M:%S %Y/%m/%d\ 
```

谢谢

PS我知道检查不能每次都进行（我无法区分分钟和秒，但我可以检查我没有13个月等）

编辑：时间码不固定。数据文件可能如下所示：

```
 *1920.11.29 18.49.25* 0.25 
```

但它也可能看起来完全不同。唯一确定的想法是我将时间码以一般形式保存在变量中。在这种情况下，它将是

```
*%Y.%m.%d %H.%M.%S* 
```

**EDIT2：** 看起来我没有表达清楚，所以这里有一些我想要实现的例子：

*1)*

```
$ cat input.txt
29/11/1920 17:50
30/11/1920 18:20
01/12/1920 07:20
...

$ ./checktimecode "%d/%m/%Y %H:%M" input.txt 
```

结果=时间码OK

*2)*

```
$ cat input.txt
**1920/11@17:50**
**1920/12@18:20**
**1920/13@07:20**
...

$ ./checktimecode "**%Y/%d@%H:%M**" input.txt 
```

结果=时间码OK

```
$ ./checktimecode "**%Y/%m@%H:%M**" input.txt 
```

结果=错误的时间码

*3)*

```
$ cat input.txt
!17/50/20\29/11/1920&
!18/20/50\30/11/1920&
!07/18/05\01/12/1920&
...

$ ./checktimecode "!%H/%M/%S\%d/%m/%Y&" input.txt 
```

结果=时间码OK

```
$ ./checktimecode "%H/%M/%S\%d/%m/%Y&" input.txt 
```

结果=错误的时间码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T01:53:14.577

### 样品日期：

```
$ cat input.txt

\18:00:00 1920/11/29\ OK
\18:00:00 1920/13/29\ KO
\00:61:00 1920/02/29\ KO
\25:00:00 1920/11/29\ KO
\00:00:00 1920/11/29\ OK 
```

### `awk`脚本

```
#!/usr/bin/awk -f

BEGIN{
    FS = "\\"
}

!check_date_time($2)

function check_date_time(dt,     a,date,time,year,mon,day,hour,min,sec)
{
    split(dt, a, " ")
    date = a[2]
    time = a[1]

    split(date, a, "/")
    year = a[1]
    mon  = a[2]
    day  = a[3]

    split(time, a, ":")
    hour = a[1]
    min  = a[2]
    sec  = a[3]

    return check_date(year, mon, day) && check_time(hour, min, sec)
}

function check_time(hour, min, sec)
{
    return 0<=hour && hour<=23 && 0<=min && min<=59 && 0<=sec && sec<=59
}

function check_date(year, mon, day)
{
    if (mon < 0 || mon >= 13)
        return 0
    else if (day == 31 && (mon == 4 ||  mon == 6 || mon == 9 || mon == 11))
        return 0;
    else if (day >= 30 && mon == 2)
        return 0;
    else if (mon == 2 && day == 29 && ! (  year % 4 == 0 && (year % 100 != 0 || year % 400 == 0)))
        return 0;
    else
        return 1;
} 
```

### 输出

```
$ awk -f chk_date_time.awk input.txt

\18:00:00 1920/13/29\ KO
\00:61:00 1920/02/29\ KO
\25:00:00 1920/11/29\ KO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T16:56:19.103

使用 Python 的[`time.strptime()`](http://docs.python.org/library/time.html#time.strptime)or [`datetime.strptime()`](http://docs.python.org/library/datetime.html#datetime.datetime.strptime)：

```
#!/usr/bin/python2.6
from datetime import datetime
import sys
format = sys.argv[1]
file = sys.argv[2]

with open(file, 'r') as f:
    for line in f:
        try:
            datetime.strptime(line.rstrip(), format)
        except:
            print "BAD timecode"
            sys.exit(1)

print "timecode OK" 
```

**编辑：**

用法：

```
$ ./checktimecode "%d/%m/%Y %H:%M" input.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T23:48:22.823

您可以根据您想要的任何规则验证 H、M、S、Y、m 和 d...

```
awk -F'[\\\\:/ ]' '{H=$2; M=$3; S=$4; Y=$5; m=$6; d=$7; print "=" H "=" M "=" S "=" Y "=" m "=" d "="}' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T02:11:02.147

发射器：

```
@(do (defvar counter (range 1)))
@(collect :vars ())
@  (bind lineno @(pop counter))
@;;; 
@;;; Here we can add numerous cases for different date formats.
@;;;
@  (try)
@    (cases)
\@hh:@mm:@ss @year/@mo/@da\ @stuff
@    (or)
*@year.@mo.@da @hh.@mm.@ss* @stuff
@    (or)
@line
@    (throw error `line @lineno: unrecognized format`)
@    (end)
@    (filter :tonumber hh mm ss year mo da)
@    (do
       (each ((n (list hh mm ss year mo da)))
         (if (null n)
           (throw 'error `line @lineno: bad number`))
         (if (< n 0)
           (throw 'error `line @lineno: negative number`)))
       (if (> hh 23)
         (throw 'error `line @lineno: hour > 23`))
       (if (> mo 12)
         (throw 'error `line @lineno: month > 13`)))
@  (catch error (err))
@    (do (format t "~a\n" err))
@  (end)
@(end) 
```

数据：

```
\28:49:25 1920/11/29\ 0.25
*1920.13.29 18.49.25* 0.25
asdf *1920.28
*-1920.11.29 18.49.25* 0.25
*1920.x3.29 18.49.25* 0.25 
```

跑：

```
$ txr times.txr  times.txt  | sed -e 's/^/    /'
line 1: hour > 23
line 2: month > 13
line 3: unrecognized format
line 4: negative number
line 5: bad number 
```

耸耸肩。也许这种异常方法不是一个好主意，因为每个条目最多只能得到一个错误报告。但如果错误条目相对较少，那可能没关系。

# css - 使用 span 在 H1 标签的文本旁边放置一个图标

> ID：10050352
> 
> 赞同：2
> 
> 时间：2012-04-06T23:27:58.370
> 
> 标签：css, image, html

这是我尝试使用的 HTML：

```
<h1>Order Not Paid<span class="not-paid"></span></h1> 
```

*当然如果有更好的方法请说出来。*

目前由于跨度内没有文本，浏览器似乎忽略了这个标签。Firebug 在检查时显示为灰色。

当我在跨度中放置文本时，图标显示正确。

我可以为这个效果应用什么 CSS 规则？这是我到目前为止所拥有的（它是 SASS，但很容易掌握）：

```
h1 {
    font-size: 24px;

    span.not-paid {
        background-image: url('/Public/images/remove.png');
        background-repeat: no-repeat;
    }
} 
```

我希望图标出现在跨度所在的位置。

或者，做这样的事情是否符合犹太教规？如果是这样，我可以解决这个问题，因为它在 IE8 和现代浏览器上看起来不错。

```
<h1>Order Not Paid <img src="@Url.Content("~/Public/images/remove.png")" alt="" /></h1> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T23:58:43.907

如果图标很小并且没有在其他任何地方重复使用，只需将其设置为 h1 的一部分。

HTML：

```
<h1 class="not-paid">Order Not Paid</h1> 
```

CSS：

```
h1.not-paid {
  font-size: 24px;
  padding:0 16px 0 0; /* whatever the dimensions the image needs */
  background-image: url('/Public/images/remove.png') no-repeat right center; /* Position left/right/whatever */
} 
```

这样干净一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T23:45:45.577

背景图像没有显示，因为跨度没有宽度，因此没有显示任何背景。

此外，您提供的代码段不是有效的 CSS。

尝试这样的事情，假设图像是 16 像素 x 16 像素：

```
h1 {
  font-size: 24px;
}

span.not-paid {
    display: inline-block;
    vertical-align: middle;
    height: 16px;
    width: 16px;
    background-image: url('/Public/images/remove.png');
    background-repeat: no-repeat;
} 
```

这样`display: inline-block;`做是为了使宽度适用。是使`vertical-align`图像居中在线的中间。

综上所述，`<img>`标签解决方案也可以工作，但它不能很好地扩展到许多类似的图像。基于 css 的解决方案使以后更容易切换到 css spriting 之类的东西。

无论哪种情况，您都可能希望将直接图像 url 更改为相对 url，然后再期望此页面在生产环境中工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T23:38:23.580

我很确定您需要给跨度一些`width`. 默认情况下它没有，所以当然不会看到背景图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T23:51:29.730

首先，如果你没有使用 sass 和 less，那么你的样式表是错误的。接下来，给`inner-block`跨度和图像的高度和宽度。

```
h1 {
    font- size: 24px;
}

h1 span.not-paid {
    width: 50px;
    height: 50px;
    display: inline-block;
    background-image: url('/Public/images/remove.png');
    background-repeat: no-repeat;
} 
```

# php - 在 PHP/HTML 网页中执行多个 MySQL 查询：只运行第一个查询

> ID：10050354
> 
> 赞同：0
> 
> 时间：2012-04-06T23:28:23.100
> 
> 标签：php, mysql, html

我有一个用 HTML 编写的网页。我有一个使用 MySQL 查询的数据库填充的下拉列表：

```
<SELECT NAME = "Participant" STYLE = "WIDTH: 187" TITLE="Begin typing participant last name for fast searching." required>
<OPTION SELECTED VALUE = "">Select Participant...</OPTION>
<?PHP
    $allParticipants = getall_participants();
    foreach($allParticipants as &$value) {
        $dt = date('Y-m-d'); 
        $val = $value->get_id();
        $optval = $dt.$val;
        echo "<OPTION VALUE='",$optval,"'>";
        echo $value->get_first_name()," ",$value->get_last_name();
        echo "</OPTION>";
    }
?>
</SELECT> 
```

getall_participants() 看起来像：

```
function getall_participants () {
connect();
$query = "SELECT * FROM dbParticipants ORDER BY last_name";
$result = mysql_query ($query);
$theParticipant = array();
while ($result_row = mysql_fetch_assoc($result)) {
    $theParticipant = new Participant($result_row['last_name'], 
                      $result_row['first_name'], $result_row['address']);
    $theParticipants[] = $theParticipant;
}
mysql_close();
return $theParticipants;
} 
```

在同一页面上，我有一个由另一个数据库预先填写的文本框：

```
<?php
    $dt = date('Y-m-d'); 
    $participants = getall_dbParticipantEntry_byDate($dt);
    foreach($participants as &$value) {
        $a = $a.$value.", ";
    }
    echo "<INPUT TYPE='text' NAME='Participants' STYLE='WIDTH:50px;' TITLE='Participants' ";
    echo "VALUE='[", $a.' ', "]'/>";
?> 
```

那 getall_dbParticipantEntry_byDate($date) 看起来像：

```
function getall_dbParticipantEntry_byDate($date) {
connect();
$query = 'SELECT * FROM dbParticipantEntry WHERE date = "'.$date.'"';
$result = mysql_query ($query);
$theParticipantEntry = array();
while ($result_row = mysql_fetch_assoc($result)) {
    $theParticipantEntry = new ParticipantEntry($result_row['date'], $result_row['id'], $result_row['call_time'],
    $result_row['result'], $result_row['notes']);
    $theParticipantEntries[] = $theParticipantEntry->get_id();
}
mysql_close();
return $theParticipantEntries;
} 
```

然而，虽然这两个函数单独工作都很好，但当它们都在同一个网页上时（就像我的意思一样），只有第一个运行的函数。我通过切换它们来测试这一点。他们都完成了指定的任务，但只有在页面上单独时。我怎样才能让它们都运行并填充各自的字段？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T23:37:05.620

尝试以下顺序：

1.  连接到 mySQL 服务器

2.  做任务1

3.  执行任务 2

4.  关闭连接

对我来说，在执行 task2 之前，您似乎已经关闭了 mysqlconnection。

编辑：

也许你可以那样做？

```
function f1 ()
{
    $res = mysql_connect(...);

    // .. do some queries ..
    mysql_query($sql, $res); 

    mysql_close($res ) 
}

function f2 ()
{
    $res = mysql_connect(...);

    // .. do some queries ..
    mysql_query($sql, $res); 

    mysql_close($res ) 
} 
```

编辑：

来自 php.net：

使用多个链接连接到同一个数据库（使用相同的用户名）时要小心。除非您在 mysql_connect() 中明确指定创建新链接，否则它将返回一个已经打开的链接。如果它会被 mysql_close() 关闭，它也会（显然）关闭另一个连接，因为链接是相同的。解决这个问题有很多麻烦，因为在 <=4.3.6 中有一个错误没有关闭连接，但是在补丁到 >=4.3.7 之后，我所有的应用程序都因为一个脚本而崩溃了这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T23:34:24.247

你在同一个连接上运行它们。您需要存储从 mysql_connect 返回的资源 id 并将其传递给每个 mysql 方法（每个方法都使用它自己的相关资源）。

也就是说，我认为是时候：

1.  转向更现代的东西，比如 Mysqli 或 PDO 扩展。更好的API
2.  在连接管理上使用某种抽象，最好是每个连接一个数据库管理类的实例。网络上有大量示例，提供此类说明超出了本网站的范围。

# php - php中的会话问题

> ID：10050355
> 
> 赞同：0
> 
> 时间：2012-04-06T23:28:34.817
> 
> 标签：php, session

你好，

```
 if ($_SESSION["selCurrency"] = "USD") { $_SESSION["currencyidx"] = 1; }
    if ($_SESSION["selCurrency"] = "CAD") { $_SESSION["currencyidx"] = 2; }
    if ($_SESSION["selCurrency"] = "EUR") { $_SESSION["currencyidx"] = 4; } 
```

不管我做什么，我的

$_SESSION["currencyidx"] 始终是上述行中的最后一个。我已经搞砸了一个小时，我一定遗漏了一些完全荒谬的东西，请某人睁开我的眼睛？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T23:30:14.737

您使用的是赋值 ( `=`) 而不是比较 ( `==`)。修复它，它会工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T23:30:12.833

您的 if 条件使用单个 = 当它应该是 == 时。您正在设置 $_SESSION["selCurrency"] 的值，而不是检查它。它应该是。

```
if ($_SESSION["selCurrency"] == "USD") { $_SESSION["currencyidx"] = 1; }
if ($_SESSION["selCurrency"] == "CAD") { $_SESSION["currencyidx"] = 2; }
if ($_SESSION["selCurrency"] == "EUR") { $_SESSION["currencyidx"] = 4; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T23:30:12.893

```
 if ($_SESSION["selCurrency"] == "USD") { $_SESSION["currencyidx"] = 1; }
    if ($_SESSION["selCurrency"] == "CAD") { $_SESSION["currencyidx"] = 2; }
    if ($_SESSION["selCurrency"] == "EUR") { $_SESSION["currencyidx"] = 4; } 
```

请注意与`==`您的相反`=`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T23:30:38.973

它应该是

```
 if ($_SESSION["selCurrency"] == "USD") { $_SESSION["currencyidx"] = 1; }
    if ($_SESSION["selCurrency"] == "CAD") { $_SESSION["currencyidx"] = 2; }
    if ($_SESSION["selCurrency"] == "EUR") { $_SESSION["currencyidx"] = 4; } 
```

与`=`您分配，而不是比较。与`==`，您正在比较。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T23:32:44.717

使用 == 进行比较

```
 if ($_SESSION["selCurrency"] == "USD") { $_SESSION["currencyidx"] = 1; }
    if ($_SESSION["selCurrency"] == "CAD") { $_SESSION["currencyidx"] = 2; }
    if ($_SESSION["selCurrency"] == "EUR") { $_SESSION["currencyidx"] = 4; } 
```

# php - Sendmail 问题：成功发送但从未到达

> ID：10050357
> 
> 赞同：6
> 
> 时间：2012-04-06T23:28:49.950
> 
> 标签：php, email, sendmail

我正在尝试通过 PHP mail() 函数发送邮件，据我所知，该函数使用 sendmail 来交付货物。现在我的问题是 mail() 返回 true 但我的邮箱中甚至没有邮件的痕迹（是的，我也检查了垃圾邮件）。

所以我尝试从终端手动发送一些邮件，但问题仍然存在。sendmail 没有给我一个错误，除了我通过将我的开发机器的域添加到 /etc/hosts 并将其与 127.0.0.1 相关联来修复的无法确定域错误。

```
andreas@Andreas-PC-Ubuntu:~$ sendmail xxxxxxx@xxxxxxx.com
Test
.
andreas@Andreas-PC-Ubuntu:~$ 
```

除了没有给出错误之外，sendmail 还在 /var/log/mail.log 中记录了邮件已成功发送：

```
Apr  7 01:16:21 Andreas-PC-Ubuntu sendmail[11759]: q36NGIfD011759: from=andreas, size=5, class=0, nrcpts=1, msgid=<201204062316.q36NGIfD011759@home.hagenz.com>, relay=andreas@localhost
Apr  7 01:16:21 Andreas-PC-Ubuntu sm-mta[11760]: q36NGL1J011760: from=<andreas@home.hagenz.com>, size=299, class=0, nrcpts=1, msgid=<201204062316.q36NGIfD011759@home.hagenz.com>, proto=ESMTP, daemon=MTA-v4, relay=ip6-localhost [127.0.0.1]
Apr  7 01:16:21 Andreas-PC-Ubuntu sendmail[11759]: q36NGIfD011759: to=xxxxxxx@xxxxxxx.com, ctladdr=andreas (1000/1000), delay=00:00:03, xdelay=00:00:00, mailer=relay, pri=30005, relay=[127.0.0.1] [127.0.0.1], dsn=2.0.0, stat=Sent (q36NGL1J011760 Message accepted for delivery) 
```

所以是的，有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T23:47:42.153

您确定收件人 SMTP 服务器没有丢弃（或至少将其列入灰名单）您的邮件吗？邮件服务器将不是来自公认 MX 服务器的邮件视为垃圾邮件是很常见的。

sendmail 是否配置为使用 SMTP 中继/智能主机？如果不是，如果您将其配置为使用您的 ISP、雇主或其他托管服务提供商的服务器，会发生什么情况？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T23:32:11.597

您是否在 php.ini 文件中设置了配置？

当我在自己的服务器上设置 php 时（我在服务器 2003 上运行 IIS，使用 Exchange 处理电子邮件），我必须编辑 php.ini 文件来配置邮件功能。

只需取消注释并为该`SMTP`部分指定我的邮件服务器。

# 编辑

> ```
> [mail function]
> ; For Win32 only.
> ; http://php.net/smtp
> SMTP = #mymailserver#
> ; http://php.net/smtp-port
> smtp_port = 25 
> ```

您可能必须执行相同或类似的操作，具体取决于您的 Web 服务器环境

# facebook - 如何在图形 API 中获取永久访问令牌

> ID：10050362
> 
> 赞同：5
> 
> 时间：2012-04-06T23:29:24.767
> 
> 标签：facebook, facebook-graph-api

我在 Facebook 上创建了一个应用程序，并使用图形 API 资源管理器，从应用程序下拉框中选择了我的应用程序，请求了具有 manage_pages、offline_access 和 publish_stream 权限的访问令牌。

使用此访问令牌，我成功地能够使用`restfb`API 在页面上发布消息，但是当我注销时，它开始抛出`The session is invalid error`.

我在几篇文章中读到了offline_access 已被弃用。有人可以告诉我如何获得永久访问令牌吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T23:42:09.553

查看文档：[https](https://developers.facebook.com/roadmap/offline-access-removal/) ://developers.facebook.com/roadmap/offline-access-removal/这不再可能。

> 桌面应用程序将无法延长现有 access_token 的寿命，并且用户必须在令牌过期后登录 facebook。

否则，可以请求具有更长有效期的访问令牌。这里是方向：[https ://developers.facebook.com/roadmap/offline-access-removal/#extend_token](https://developers.facebook.com/roadmap/offline-access-removal/#extend_token)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-26T12:51:06.553

您需要什么样的访问令牌？共有三种，User AT、App AT 和 Page AT。

如果您想要用户 AT，那么您似乎不走运。我认为这已经不可能了。你只能到60天。但是，如果您需要 Page AT，您可以获得永久的。不同之处在于，页面访问令牌只能访问单个 facebook 页面。

基本上，您需要先获得用户访问令牌，并`manage_pages`获得许可。当您拥有一个时，您必须`/{pageId}?fields=access_token`在 Graph API 中查看您的页面 id。

有关更多信息，请查看：[facebook：永久页面访问令牌？](https://stackoverflow.com/questions/17197970/facebook-permanent-page-access-token)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T08:43:42.010

正如 Facebook 开发者博客所解释的那样，您不会获得任何永久访问令牌。您将获得 60 天的长期访问令牌。在到期之前，Facebook 会通知您到期，然后您可以更新它，或者您可以构建自己的自定义控件来获取令牌到期通知，您可以从 Facebook API 获取。

# iphone - 如何正确使用 __bridge 进行 ARC

> ID：10050371
> 
> 赞同：5
> 
> 时间：2012-04-06T23:30:14.090
> 
> 标签：iphone, ios, automatic-ref-counting

我将下面显示的代码更改为与 ARC 兼容。

我只是按照 Xcode 的建议对其进行了更改，并且在 Xcode 上没有显示错误。但是一旦事件发生，代码就会崩溃。有没有人有解决这个问题的想法？

我不确定这种暗恋是否是因为 acapela SDK 而发生的。

**这是非 ARC 代码，它工作正常。**

```
void MyInterruptionListener(void *inClientData, UInt32 inInterruptionState) {

    AcapelaSpeech* anAcapelaSpeech = *(AcapelaSpeech**)inClientData;

    if (inInterruptionState == kAudioSessionBeginInterruption) {

        [anAcapelaSpeech setActive:NO];
        status = AudioSessionSetActive(NO);
    }
    if (inInterruptionState == kAudioSessionEndInterruption) {

        status = AudioSessionSetActive(YES);
        [anAcapelaSpeech setActive:YES];
    }
} 
```

**这是 ARC 兼容的，但它对 [anAcapelaSpeech setActive:NO]; 很不利。**

```
void MyInterruptionListener(void *inClientData, UInt32 inInterruptionState) {

    AcapelaSpeech* anAcapelaSpeech = (__bridge_transfer AcapelaSpeech*)inClientData;

    if (inInterruptionState == kAudioSessionBeginInterruption) {

        [anAcapelaSpeech setActive:NO];
        AudioSessionSetActive(NO);
    }
    if (inInterruptionState == kAudioSessionEndInterruption) {

        AudioSessionSetActive(YES);
        [anAcapelaSpeech setActive:YES];
    }
} 
```

**附加信息。** 我正在使用 Acapela 音频 SDK，音频中断代码显示在此 PDF 的 9.Interruptions 中。 [http://www.ecometrixem.com/cms-assets/documents/44729-919017.acapela-for-iphone.pdf](http://www.ecometrixem.com/cms-assets/documents/44729-919017.acapela-for-iphone.pdf)

这是暗恋的截图。 ![在此处输入图像描述](../Images/7e99654c935c494990073ef7f91980f1.png)

**已解决** 此代码有效，谢谢。

```
void MyInterruptionListener(void *inClientData, UInt32 inInterruptionState) {

    AcapelaSpeech *anAcapelaSpeech = (__bridge id) (*(void **) inClientData);

    if (inInterruptionState == kAudioSessionBeginInterruption) {

        [anAcapelaSpeech setActive:NO];
        AudioSessionSetActive(NO);
    }
    if (inInterruptionState == kAudioSessionEndInterruption) {

        AudioSessionSetActive(YES);
        [anAcapelaSpeech setActive:YES];
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T23:48:34.003

你需要这样的东西：

```
id asObject = (__bridge id) (*(void **) ptr); 
```

# python - 为什么这条 python 行不是错误？

> ID：10050374
> 
> 赞同：3
> 
> 时间：2012-04-06T23:30:32.087
> 
> 标签：python, syntax, syntax-error

为什么下一条 python 行不是语法错误？如果真的不是，那么我该如何使用它以及在什么情况下它会有用？

```
 a= range(10)[1:3]=[2,3] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T23:39:31.210

Python 支持在同一行进行多个赋值：

```
>>> a = b = c = 2
>>> a
2
>>> b
2
>>> c
2 
```

由于您将第一个分配给一个列表（python 中的一个可变对象），然后将该列表的一部分（它是可变的）和一个分配给第三个项目的内容，因此 python 可以接受。如果你用不可变的东西替换了你的中间值，你会得到一个错误。

```
>>> a = 'foo' = 'bar'
  File "<input>", line 1
SyntaxError: can't assign to literal

>>> a = {}['foo'] = 'bar'
>>> a
'bar' 
```

有趣的是，这样的行仍然会引发错误，因为您试图将值 3 和 4 分配给字面值 1 和 2。

```
>>> a = [1, 2] = [3, 4]
  File "<input>", line 1
SyntaxError: can't assign to literal 
```

虽然这不会：

```
>>> a = [1, 2][:] = [3, 4]
>>> a
[3, 4] 
```

在这种情况下，关键是通过使用切片表示法，您将分配给列表内的范围，而不是重新分配给列表中的文字值。

此外，线条

```
>>> a = [[], []] = [{}, {}]
>>> a
[{}, {}] 
```

和

```
>>> a = [b, c] = 3, 4
>>> b
3
>>> c
4 
```

是有效的，第一个是因为内部列表和字典都是可变的和可迭代的，第二个是因为您将 3 和 4 分配给变量 b 和 c 而不是文字（感谢 Sven :D）。

**编辑**回答操作的最后一个问题。

```
>>> a = 1
>>> b = 2
>>> a,b = b,a = a,b
>>> a
2
>>> b
1 
```

这只是归结为 b，a = a，b 的最终（最右边）分配。观察：

```
>>> a, b = 'a', 'b'
>>> a, b = b, a = a, b = b, a
>>> a
'b'
>>> b
'a'
>>> a, b = b, a = b, a
>>> a
'a'
>>> b
'b' 
```

这令人困惑，但我对此的解释是在语句完成之前不会重新评估/分配新值 a 和 b，因此重要的分配是最右边的分配。如果最后一条语句是 a、b = a、b 或 b，a = b、a、a 和 b 的值不会改变。如果是a，b = b，a或b，a = a，b，则切换值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T23:41:57.137

好吧，让我们从 range 函数开始分解一下。range 函数创建一个从 0 到 9 的整数列表。所以你最终得到了这个

```
[0,1,2,3,4,5,6,7,8,9] 
```

接下来，切片符号将应用于您的整数列表。在冒号之前指定一个数字告诉 python 你想用它作为你的起始索引，因为列表是零索引的，你得到列表中的第二个元素，即值 1。你还给了第二个值提供的数字一个附加索引，因此您将获得不超过该索引的值。但这只会导致第三个元素，它直接跟在起始索引值之后。现在你有了这个：

```
[1,2] 
```

传统上，在编程语言中，值是从右到左分配的。范围/切片操作似乎在分配之前完成，因为最右边的列表替换了范围操作创建的值。然后将该值再次分配给a。

除非您绝对必须这样做，否则不要像这样重复分配。这是可怕的阅读和理解。最好有可读/更简单的代码。我从来没有用这种方式分配东西。老实说，甚至没有理由处理范围操作，因为它只是被替换了。这只是一个奇怪的东西，最好不要使用。国际海事组织。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T23:35:18.903

这条线确实不是错误，但它从来没有用处。它的作用与

```
a = [2, 3] 
```

此外，它创建一个包含内容的新列表`[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]`，并将该列表的第二项和第三项设置为`2`and `3`，最后再次删除该新列表，因为根本没有对它的引用。

这是一个更完整的代码。选择语句的顺序以匹配原始语句的执行顺序：

```
a = [2, 3]
b = range(10)
b[1:3] = a
del b 
```

# javascript - 不能把两个函数的输出放在一行吗？

> ID：10050376
> 
> 赞同：-4
> 
> 时间：2012-04-06T23:31:26.993
> 
> 标签：javascript, html

我正在尝试组合两个单独的 javascript 函数的输出，但每个函数都在单独的行上。我希望它们在同一行，一旦你看到你就会明白的页面。我整天都在做这个，但我无法弄清楚。

我试图将其转换为外部 javascript 文件，但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T23:36:49.927

如果您的意思是希望每个函数的*输出*位于同一行，则需要将第二个函数的容器从 a 更改`div`为类似 a 的内容`span`。

改变这个：

```
<div id="cdcontainer"></div> 
```

对此：

```
<span id="cdcontainer"></span> 
```

# java - Java减少堆栈大小以节省内存

> ID：10050377
> 
> 赞同：0
> 
> 时间：2012-04-06T23:31:29.010
> 
> 标签：java, performance, memory, jvm

我想减少 Java 应用程序的内存占用以减少交换。为此，我一直在考虑减小堆栈大小（Xss 参数），但不确定堆栈内存是如何分配的，以及每个线程的默认 512k（对于 32 位操作系统）是否始终位于常驻内存中，无论它有多少实际使用。

减少堆栈内存会导致交换减少吗？

更新：请不要建议分析应用程序 - 它已经完成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T00:13:03.903

你正在运行多少个线程？即使有大量线程和非常大的堆栈大小（例如，10k 线程和 256KB 堆栈大小），也只有 2GB 的堆空间。

您说您在 32 位 JVM 上运行，所以我假设这是一个相对较小的系统。你有几个选择：

*   切换到 64 位 JVM。现在你有大量的地址空间，堆栈大小应该是无关紧要的

*   你的机器太小了。如果 2gb 的堆栈对您的 10k+ 线程来说是个问题，那么您在太“小”的机器上运行太“大”的应用程序。少做软件或购买更多硬件

*   减少线程数

*   问题实际上出在其他地方，而您正在吠叫错误的树

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T00:10:44.977

您正在使用多少内存，需要节省多少内存？

由于每个线程的堆栈只有 512K，这意味着您需要 200 个线程才能开始输入一个可能值得保存的值 (100Mb)

由于堆栈内存的使用会“非常频繁”，因此我认为它是被换出的糟糕目标。除非您正在处理内存受限的环境？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T23:59:19.450

是的，当然它的后进先出规则，少堆栈少交换

# soap - Coldfusion - 向 Neolane 发出 SOAP 请求时出错

> ID：10050380
> 
> 赞同：0
> 
> 时间：2012-04-06T23:31:40.050
> 
> 标签：soap, coldfusion, cfhttp, neolane

我正在尝试使用 Coldfusion 和 CFHTTP 向 Neolane 发出 Web 服务 SOAP 请求。

我直接从 Neolane 的文档中复制了 SOAP 请求，所以我认为没关系。

返回的错误信息是：

SOAP-ENV:ClientLe 消息 XML SOAP est 不正确（服务 ''，方法 'POST'）。Le nom de 方法 'ExecuteQuery' du paquet SOAP ne 对应 pas à celui du paramètre 'action' de l'en-tête 'Content-类型' （''）

转换为：

SOAP-ENV：客户端 SOAP XML 消息不正确（服务'' 方法 'POST'）。方法名称 'ExecuteQuery' SOAP 包与标头 'Content-type'('') 中的参数 'action' 不匹配

CFHTTP中Coldfusion设置的Content-type头中的action参数？cfhttpparam 是否应该添加一些内容？

任何指导将不胜感激。

谢谢，加里

更新：找到解决方案。需要使用 cfhttpparam 添加 SOAPAction 并使用与文档中的示例不同的替代身份验证方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T19:11:39.350

找到解决方案。需要使用 cfhttpparam 添加 SOAPAction 并使用与文档中的示例不同的替代身份验证方法。

# linker - 在 libtool 命令行上重复库

> ID：10050389
> 
> 赞同：4
> 
> 时间：2012-04-06T23:32:55.950
> 
> 标签：linker, automake, libtool

我正在使用 automake，并获得这样的 libtool 调用：

```
/bin/sh ../libtool --tag=CC --mode=link gcc -o test_foo test_foo.o -lA -lB -lC -lA -lB -lC 
```

请注意，这些库（我无法控制）具有循环依赖关系，需要多次提及它们。不幸的是，似乎 libtool 将对库的多个请求折叠成一个请求，并且它运行：

```
gcc -o test_foo test_foo.o -lA -lB -lC 
```

请注意，对库的第二次遍历已经消失；我收到一堆链接器错误。当我手动运行带有额外`-l`标志的 gcc 命令行时，它可以工作。

**如何让 libtool 将我请求的所有库传递给 gcc？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T18:43:54.977

> 如何让 libtool 将我请求的所有库传递给 gcc？

我不知道该怎么做。但是请注意，如果您在使用 GNU-ld（或 gold）的系统上，您可以使用

```
-Wl,--start-group -lA -lB -lC -Wl,--end-group 
```

也许 libtool 会让这些不受干扰？唉，libtool 2.2.6b`-Wl,--end-group`在所有库之前移动；-(

这个粗俗的黑客做到了：

```
-Wl,--start-group,-lA,-lB,-lC,--end-group 
```

（我发现`libtool`99% 的情况都是错误的，并尽量避免它像瘟疫一样。）

# php - 用户在 php mysql 中按用户类型登录

> ID：10050392
> 
> 赞同：-1
> 
> 时间：2012-04-06T23:33:38.087
> 
> 标签：php, mysql

这是我的 php，用于将我的用户重定向到他们的个人资料页面。

我在数据库中有一个用户登录表。

他们也是该表中的用户类别字段。

它说一个**error22527**。

```
 include'connection.php';

            $query = "SELECT * FROM tbluser_login WHERE user_Email='$_POST[email]' AND user_Password='md5($_POST[password])'";
            $result = mysql_query($query);

            $usercategory = "SELECT user_Category FROM tbluser_login WHERE user_Email='$_POST[email]'";
            $result2 = mysql_query($usercategory);
            $result3 = mysql_fetch_row($result2);

            if ($result){
                if(mysql_num_rows($result)){

                    /*session_regenerate_id();*/

                    $login = mysql_fetch_assoc($result);

                    $_SESSION['SESS_username']= $login['user_Email'];

                    $_SESSION['SESS_usercategory'] = $login['user_Category'];

                    $_SESSION['SESS_pasword'] = $login['user_Password'];

                    session_write_close();

                    switch($result3[0]){

                        case 'Staff':
                        header("location: staff_profile.php");
                        break;

                        case 'Tutor':
                        header("location: tutor_profile.php");
                        break;

                        case 'Student':
                        header("location: student_profile.php");
                        break;

                        case 'Administrator':
                        header("location: admin_profile.php");
                        break;

                    }
                    }
                    else {
                        echo("error".error_reporting(E_ALL));
                        exit;
                        }
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T23:35:52.000

```
echo("error".error_reporting(E_ALL)); 
```

应该

```
echo("error".mysql_error()); 
```

# jquery - jquery 运行函数

> ID：10050394
> 
> 赞同：0
> 
> 时间：2012-04-06T23:34:02.033
> 
> 标签：jquery, function

我在 jquery 中有一个函数：

```
$('#map').click(function(e) {
    var posX = $(this).offset().left, posY = $(this).offset().top;
    if (posY < 100) {
       // do this 
```

当用户在该元素内单击时，它将运行。但如果他按下光标键，我也希望它运行。

是否可以执行以下操作：

```
$('#map').click OR key.press(function(e) { 
```

基本上，您可以设置多个事件来运行该功能吗？只是学习jquery，所以对我轻松一点。

## 更新

```
function move(e) {
   var posX = $(this).offset().left, posY = $(this).offset().top;

    if (posX > 75 && posX < 150 && posY < 75) { var go = "N"; }
    if (e.which == 38) { var go = "N"; }

    $.post("inc_map.php", { move: go }, function(data){ 
        var substr = data.split('@'); 
        if (substr[0] != "block") {
            var x1 = substr[0]; var y1 = substr[1];
            x = parseInt(x1) * 32; y = parseInt(y1) * 32;
            $("#mapview").css({ backgroundPosition: -x + "px " + -y + "px" });
                $("#map").html(substr[2]);
                $("#info").html(substr[3]);
                };
            $("#pos").html((x/32) + ', ' + (y/32)); 
        });  

};

$("#map").click(move).keypress(move); 
```

为什么这不起作用？:o

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T23:36:29.010

您将在事件处理程序之外定义一个函数，然后分别从每个处理程序调用它。

```
function myFunc(e) {
    var posX = $(this).offset().left, posY = $(this).offset().top;
    if (posY < 100) {

    }

    // if e.which equals 38, the up arrow was pressed
    if(e.which == 38) {
        // do nice stuff here
    }

    // the rest of your function here...
}

$("#map").click(myFunc).keypress(myFunc); 
```

编辑：也加入了 jQuery 函数链。

啊哈，好吧。我想我发现了你的错误。我已经重新格式化了您的代码并对其进行了一些整理。试试这个：

```
function move(e) {
    var posX = $(this).offset().left,
    var posY = $(this).offset().top;

    var go = "";

    if (posX > 75 && posX < 150 && posY < 75) {
        go = "N";
    }

    if (e.which == 38) {
        go = "N";
    }

    $.post("inc_map.php", {
        move: go
    }, function(data) {
        var substr = data.split('@');
        if (substr[0] != "block") {
            var x1 = substr[0];
            var y1 = substr[1];
            x = parseInt(x1) * 32;
            y = parseInt(y1) * 32;
            $("#mapview").css({
                backgroundPosition: -x + "px " + -y + "px"
            });
            $("#map").html(substr[2]);
            $("#info").html(substr[3]);
        };
        $("#pos").html((x / 32) + ', ' + (y / 32));
    });

}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T23:39:07.240

使用 jQuery.bind()。

您可以将空格分隔的列表传递给 .bind() 用于多个事件，例如

```
$("#map").bind("click keypress", myFunc); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T23:48:21.383

在点击和按键之间传递一个公共事件处理程序

例如：

```
function myFunc(e) {
   //For cursor
   switch(e.charCode) {
      case 37: 
         // Left
      break;
      case 37: 
         // Up
      break;
      case 37: 
         // Right
      break;
      case 37: 
         // Down
      break;
   }
}

$("#map").click(myfunc).keypress(myfunc); 
```

# .net - 当内存需求超过预定义的限制时中止算法的执行？

> ID：10050402
> 
> 赞同：2
> 
> 时间：2012-04-06T23:35:47.107
> 
> 标签：.net

有没有办法为 64 位应用程序设置最大内存使用量？

原因：当我的笔记本电脑上运行的 64 位 .net 算法/应用程序超过 3 GB 的内存要求时，我的电脑变得非常慢。（在我手动终止程序后仍然很慢。）我宁愿让算法在超过 3GB 时终止。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T23:41:52.213

您可以检查[Process.WorkingSet64](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.workingset64.aspx)属性。

```
var currentProcess = System.Diagnostics.Process.GetCurrentProcess();
if(currentProcess.WorkingSet64 > 3221225472)
    throw new System.OutOfMemoryException("Process memory consumption exceeded 3GB"); 
```

如果您想限制内存而不检查它，因为您正在调用外部 API，您可以使用[`JobObjectWrapper`](http://jobobjectwrapper.codeplex.com/). 它允许您创建一个进程并限制该进程可以使用的内存量。

> JobObjectWrapper 是对 Win32 作业对象的 .NET 抽象。使用此库，您可以创建作业对象、创建进程并将其分配给作业、控制进程和作业限制，并注册各种与进程和作业相关的通知事件。

**编辑**：来自示例项目：

```
class Program
{
    static bool _isStop = false;

    static void Main(string[] args)
    {
        try
        {
            using (JobObject jo = new JobObject("JobMemoryLimitExample"))
            {
                jo.Limits.JobMemoryLimit = new IntPtr(30000000);
                jo.Events.OnJobMemoryLimit += new jobEventHandler<JobMemoryLimitEventArgs>(Events_OnJobMemoryLimit);

                while (!_isStop)
                {
                    ProcessStartInfo psi = new ProcessStartInfo("calc.exe");
                    Process proc = jo.CreateProcessMayBreakAway(psi);
                    Thread.Sleep(100);
                }
            }
        }
        catch (Exception){ }
    }

    /// <summary>
    /// The events which fires when a job reaches its memory limit
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="args"></param>
    static void Events_OnJobMemoryLimit(object sender, JobMemoryLimitEventArgs args)
    {
        _isStop = true;
        (sender as JobObject).TerminateAllProcesses(8);
        Console.WriteLine("Job has reacehed its memory limit");
    }
} 
```

# google-apps-script - 如何转移管理员不拥有的文档的文件所有权？

> ID：10050404
> 
> 赞同：3
> 
> 时间：2012-04-06T23:35:56.530
> 
> 标签：google-apps-script, google-apps

用例

*   作为管理员服务帐户，使用 Google Docs API 转移文档所有权，类似于内置的 cPanel“高级工具”->“文档所有权转移”

约束

*   API 是在 Google Apps 管理员服务帐户而不是最终用户帐户的上下文中调用的，因为 API 是从站点页面中的 Google Apps 脚本调用的

*   授权是 OAuth 1.0，因为这是 Apps 脚本支持的

什么有效：

*   将管理员服务帐户自己的文件的所有权转移到另一个用户的帐户，如此[处所述](https://developers.google.com/google-apps/documents-list/#updating_sharing_permissions)

需要什么：

*   转移其他用户文件的所有权，最好不要与管理员服务帐户共享任何权限；如果没有其他方法，他们可以与管理员服务帐户共享文件的编辑权限。
*   目前这会返回一个

    “ ServiceException - 您无权共享这些项目：”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T04:18:39.157

您可以通过使用管理员帐户模拟用户来尝试执行此操作。文档显示了如何在[此处](https://developers.google.com/google-apps/documents-list/#using_google_apps_administrative_access_to_impersonate_other_domain_users)执行此操作。

本质上，首先请求 API URL`default`替换为当前所有者的电子邮件地址。但是，必须在授权为管理员用户时提出请求。

```
https://docs.google.com/feeds/user@yourdomain.com/private/full/ 
```

请求该 URL 后，将返回所有提要 URL，并且该电子邮件已存在。然后，像往常一样简单地更改所有权。

# javascript - 当前浏览器缓存的当前文件类型

> ID：10050410
> 
> 赞同：0
> 
> 时间：2012-04-06T23:37:02.027
> 
> 标签：javascript, html, ajax, browser, browser-cache

让浏览器假设它们是静态文件？会假定 htm 是静态的吗？你会建议使用 *.txt 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T00:07:12.193

您只需要在提供文件时在文件上设置正确的 HTTP 缓存标头即可。

[https://developers.google.com/speed/docs/best-practices/caching](https://developers.google.com/speed/docs/best-practices/caching)

对于静态文件，您可以配置您的网络服务器来执行此操作（例如[，使用 Apache 缓存网站图像](https://stackoverflow.com/questions/447014/website-image-caching-with-apache)），对于动态文件，您可以即时执行此操作（在 PHP 中使用该[`header()`](http://php.net/manual/en/function.header.php)功能）。

请注意，文件扩展名也无关紧要，您应该告诉浏览器使用`Content-Type`标头的文件类型（尽管扩展名将帮助您的网络服务器猜测这一点）。

# objective-c - 如何使用 segmentControl 值更改事件加载视图控制器？

> ID：10050412
> 
> 赞同：0
> 
> 时间：2012-04-06T23:37:08.263
> 
> 标签：objective-c, ios, uiviewcontroller, uinavigationcontroller

我有三个视图，每个视图都由一个名为 firstVC、secondVC 和 thirdVC 的视图控制器表示。在 firstView (firstVC) 中，我有一个分段控件，其中包含第一、第二和第三三个选项。当我单击第二个段控件时，我想加载相应的视图控制器，在本例中为 secondVC。我是视图控制器的新手，但我确实尝试了各种选项。我创建了一个出口和一个价值改变事件。我事件尝试在值更改时推送视图控制器，但它会拉出一个空白页面，而不是 secondVC。

请参阅下面的代码。

```
- (IBAction)chainAction:(id)sender {
   UINavigationController *navcon = self.navigationController;

   if (chainSegControl.selectedSegmentIndex == 1) {       
      secondVC *atSecondVCChain = [[secondVC alloc] init];
      [navcon pushViewController:atSecondVCChain animated:YES];
    }
} 
```

任何帮助将不胜感激。谢谢你。

PS我正在使用Xcode 4.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T00:54:45.253

不要使用 alloc 创建控制器，而是在情节提要中定义一个命名的 segue（如果您还没有），描述从 firstVC 到 secondVC 的推送，然后使用 performSegueWithIdentifier:sender: 方法而不是 pushViewController:。

# php - 即使图像已保存到数据库，也无法显示（回显）图像

> ID：10050415
> 
> 赞同：2
> 
> 时间：2012-04-06T23:37:42.577
> 
> 标签：php

/*此代码在本地主机上工作（回显图像）但未显示在实时站点上*/请帮助,,,,

```
 <?php echo "<img src=geti/tipb_geti.php?id=$lastid  width=200px height=180px >"; 
```

/*下面这个php块是tipb_geti.php文件*/

```
 <?php
      include("connect.php");
      $id=@addslashes($_REQUEST['id']);

      $image_query=@mysql_query("select image from tipuranibasti where id=$id");
        $image_row=@mysql_fetch_assoc($image_query);

            $image=$image_row['image']; 
            header("content-type: image/jpeg");

          echo $image;              

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T00:59:03.160

您的实时服务器的内存限制是多少？您在此处制作图像数据的两个副本：

```
$image=$image_row['image']; 
```

这是完全没有意义的。你可以简单地拥有

```
echo $image_row['image']; 
```

而是为自己节省额外的浪费/无意义的复制操作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-06T23:43:12.717

检查您的字符编码是否正确。liveb 可能有 UTF8 编码或服务器有，但你没有，如果没有，输出是什么？注释掉`header("content-type: image/jpeg");`并检查您是否在现场和本地获得相同的东西。

哦，我更喜欢：

```
<?php print'<img src="geti/tipb_geti.php?id=' . $lastid . '"  width="200px" height="180px" />'; 
```

使您的 html/xhtml 格式更好一些，并且`print'test';`比`print"test";`“$var” 将输出 $var 的内容而 '$var' 不会输出稍微快一点，这会减少过热。但是不要认为你会从中获得超高速：P 你不会注意到更多的性能，我只是认为它提供了更好的代码。

# javascript - 使用 div 提交表单

> ID：10050419
> 
> 赞同：1
> 
> 时间：2012-04-06T23:38:22.127
> 
> 标签：javascript, html, forms, styles, submit

我的网站上有一个用于登录的表单。为了使表单看起来更好，我使用了一个 div 作为提交按钮，它使用 onclick="login()"。除了一件事之外，这一切都很好：当您输入用户名，点击选项卡，输入密码，点击回车时，点击回车不会提交表单。

有没有办法让表单在输入时提交而无需编写疯狂的 javascript 来监视按键？或者更好的是，有没有一种方法可以在不使用图像的情况下将提交按钮设置为看起来不像按钮？

我的按钮实际上只是我设计的看起来可点击的文本。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T23:42:25.450

一种`submit`类型的输入基本上是针对`ENTER`您正在寻找的默认键行为进行的。

有无数种方法来设置表单按钮的样式。

[http://speckyboy.com/2009/05/27/22-css-button-styling-tutorials-and-techniques/](http://speckyboy.com/2009/05/27/22-css-button-styling-tutorials-and-techniques/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T23:41:14.467

设置提交按钮的样式，使其看起来像纯文本：

```
#mySubmitButton {
    background:none!important;
    border:none; 
    padding:0!important;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T23:42:53.597

不。如果您的用户没有 javascript，他们将永远无法提交您的表单。您必须始终使您的网站在没有 javascript 的情况下可用。这称为[优雅降级](http://webtips.dan.info/graceful.html)或[渐进增强](http://en.wikipedia.org/wiki/Progressive_enhancement)。

否则，它会是这样的：

```
document.getElementById('your-form').onkeypress = function(e) {
    if (e.keyCode === 13) { // If the key pressed is [Enter]. See here for a list: http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes
        login()
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T23:41:44.573

放：

```
background-color: transparent;
border-width: 0; 
```

在您的按钮上，它现在又恢复到看起来像普通文本了。从那里去。

# html - 使用 css -top 值移动 div 位置

> ID：10050425
> 
> 赞同：4
> 
> 时间：2012-04-06T23:39:14.390
> 
> 标签：html, css

嗨，我不确定这是否是正确的方法，但我正在尝试将 div 标签定位回前一个 div 元素这就是我的工作

![例子](../Images/e35b43ed4de58e9080a3c0caf5c18ee0.png)

我用来让它工作的CSS看起来像

```
.page-frame {
background-color: #fff;
padding-top: 40px;
position: relative;
top: -35px;
} 
```

所以对于顶部的 div 元素看起来像我想要的那样，但是元素的底部没有针对 -35px 进行调整；

![在此处输入图像描述](../Images/12dc829b403126b3ae1bbfa2b1f22452.png)

我尝试在元素之后添加一个清晰的 div，但这没有帮助。我需要更改什么来删除我的 .page-frame div 和下一个 div 之间的空间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T23:45:08.347

的使用`position: relative`只会改变页面中元素的外观，但不会改变它在页面上占用的实际“空间”。因此，您所做的事情使您的视觉更改以`35px`更高的方式显示元素，但不会导致其他元素围绕它重排。可能，您需要添加的是 a`margin-bottom: -35px`以获得您想要的最终效果。

**编辑**：[添加了更好的小提琴示例](http://jsfiddle.net/fLCKz/2/)以显示带边距的回流。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T23:44:38.777

使用`position: absolute;`代替`relative`

# java - 在 Java 中替换字符串

> ID：10050431
> 
> 赞同：0
> 
> 时间：2012-04-06T23:40:01.597
> 
> 标签：java

我想写一个简短的程序来代替字符串的计数。所以我想以 0 insted of 1 开始字符串。而且因为它是一个长字符串，我不想自己更改它。所以字符串（在这个例子中）是：字符串 LINE：

1.  Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore
2.  magna aliquyam erat，sed diam voluptua。
3.  在 vero eos et accusam et justo duo dolores et ea rebum。Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum
4.  dolor 坐在一起。Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore
5.  magna aliquyam erat，sed diam voluptua。在 vero eos et accusam et justo duo dolores et ea rebum。Stet clita kasd gubergren，
6.  no sea takimata sanctus est Lorem ipsum dolor sit amet。

我希望字符串从 0 开始计数。然后继续 1.2.3....(0,1,2,3,4...)

```
public static void main(String[] args) {
    for (int counter = 1; counter <= 300; counter++) {

        int NormCounter =1;
        int ReplaceCounter = 0;

        String NormCounterS  = (new Integer(NormCounter)).toString() + ".";

        String ReplaceCounterS = (new Integer(ReplaceCounter)).toString() + ".";
        Line = Line.replace(NormCounterS , ReplaceCounterS);
        ++ReplaceCounter;

        ++NormCounter;
    }

    System.out.println(Line);
} 
```

它只是改变了第一个“1”。进入“0。”......所以它的0,2,3,4......但我希望计数去0,1,2,3,4

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T23:45:38.083

即使您增加了计数器，每次循环迭代时您都将计数器重新设置为 1 和 0。您可能应该移动此代码：

```
int NormCounter = 1;
int ReplaceCounter = 0; 
```

在for循环之外：

```
public static void main(String[] args) {

    int NormCounter = 1;
    int ReplaceCounter = 0;

    for (int counter = 1; counter <= 300; counter++) {
        String NormCounterS  = NormCounter + ".";
        String ReplaceCounterS = ReplaceCounter + ".";

        Line = Line.replace(NormCounterS, ReplaceCounterS);

        ++ReplaceCounter;
        ++NormCounter;
    }

    System.out.println(Line);
} 
```

还要注意如何`String NormCounterS = (new Integer(NormCounter)).toString() + ".";`更简单地重写`String NormCounterS = NormCounter + ".";`。（最终结果是一样的）。

有关此方法的其他错误修复，请参阅[Laky 的评论。](https://stackoverflow.com/a/10050528/312407)

也只是 Java 编码约定的一个小插件：使用小写首字母命名 Java 变量是标准的。例如使用`normCounter`而不是`NormCounter`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T23:57:16.703

正如其他人建议的那样，将变量赋值放在 for 循环之外。但是，您的代码仍然不起作用，您将匹配“31”。在第一次迭代中并将其更改为“30”。然后在后面的迭代中，您将匹配“30”。并将其更改为“29.”，因此您实际上将更改为“31”。改为“29”，而不是“30”。如你所愿。尝试以下操作：（我假设数字前面有一个空格）

```
for (int counter = 0; counter < 300; counter++) {
    line = line.replace(" " + (counter + 1) + ".", " " + counter + ".");
} 
```

编辑：可能更好的解决方案是使用 replaceFirst 并且这次不需要假设：

```
for (int counter = 0; counter < 300; counter++) {
    line = line.replaceFirst((counter + 1) + ".", counter + ".");
} 
```

现在应该可以了。

注意：变量名通常以小写字母开头，类名以大写字母开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T23:51:07.520

将 int NormCounter =1; 整数替换计数器 = 0；在 for 循环之外

# struts2 - OGNL 和通配符在使用 struts2-tiles-plugin 的瓷砖定义中工作？

> ID：10050433
> 
> 赞同：0
> 
> 时间：2012-04-06T23:40:08.757
> 
> 标签：struts2, tiles, ognl

我希望 Tiles 从 struts2 值堆栈中解析 ognl。这该怎么做？

使用 tile 2.2.2（虽然如果可以使用更高版本，例如 3，那很好）

这里提到了新功能： [http ://tiles.apache.org/2.2/framework/whats-new.html](http://tiles.apache.org/2.2/framework/whats-new.html)

这里展示了如何实现它：[http ://tiles.apache.org/2.2/framework/tutorial/advanced/el-support.html#OGNL_Support](http://tiles.apache.org/2.2/framework/tutorial/advanced/el-support.html#OGNL_Support)

但我不确定如何在我的项目中进行。是否有人在他们的 struts2 项目中使用了 tiles3？我记得阅读了一些默认情况下打开图块 3 中所有新功能的方法，但我找不到该页面的链接。

如果可以使用 spring 无论如何都可以完成配置，那很好（如果有帮助，如果没有，则不是问题）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T23:20:15.883

我喜欢 tile 模板系统，因为它简单直接，使用 Tiles 2.2.2，您可以拥有通配符支持，将您的 struts2 约定直接推入模板系统，现在还有**OGNL**！

在瓦片内添加支持 OGNL 的瓦片 2.2.2 的步骤（当前使用 Struts 2.3.1.2）：

1）添加struts2-tiles-plugin

2) 添加tiles 2.2.2 jars，包括添加ognl支持的jars。假设 maven：所有组 id 为：*org.apache.tiles*所有版本均为*2.2.2*，以下是工件 id：

*   瓷砖-api
*   瓦芯
*   瓷砖-附加
*   瓷砖-jsp
*   瓷砖-ognl
*   瓦片-servlet

还需要添加以下内容：

*   log4j，log4j，1.2.14（应该已经是基本设置的一部分： http: [//struts.apache.org/2.x/docs/create-struts-2-web-application-using-maven-to-manage -artifacts-and-to-build-the-application.html](http://struts.apache.org/2.x/docs/create-struts-2-web-application-using-maven-to-manage-artifacts-and-to-build-the-application.html) )

*   slf4j-api，org.slf4j，1.6.4

*   slf4j-简单，org.slf4j，1.6.4

通过使用 org.apache.tiles.extras.complete.CompleteAutoloadTilesListener 您可以在您的 tiles.xml 中获得通配符、EL、OGNL、MVEL 支持

**示例 web.xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <listener>
        <listener-class>org.apache.tiles.extras.complete.CompleteAutoloadTilesListener</listener-class>
    </listener>
    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
</web-app> 
```

**用于演示的struts.xml**：该演示使用 struts 中的 OGNL 来显示硬编码的问候消息。三个动作映射存在“”、“test”和“package/*”，斜线后面的值将被tiles用来设置一个新的标题。一个非常微不足道的例子，但确实显示了一些有用的特性。

```
<struts>
    <constant name="struts.devMode" value="true" />
    <constant name="struts.ui.theme" value="simple" />
    <constant name="struts.enable.SlashesInActionNames" value="true" />
    <constant name="struts.mapper.alwaysSelectFullNamespace" value="false"/>
    <package  name="basicstruts2"  namespace="" extends="tiles-default">
        <result-types>
            <result-type name="tiles" default="true" class="org.apache.struts2.views.tiles.TilesResult"/>
        </result-types>
        <action name="/**" class="com.kenmcwilliams.tiles.action.Test">
            <result>{1}</result>
        </action>
    </package>
</struts> 
```

**瓷砖.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE tiles-definitions PUBLIC
       "-//Apache Software Foundation//DTD Tiles Configuration 2.1//EN"
       "http://tiles.apache.org/dtds/tiles-config_2_1.dtd">
<tiles-definitions>
    <definition name="baseLayout" template="/WEB-INF/content/tiles/template.jsp">
        <put-attribute name="title" value="Default Title"/>
        <put-attribute name="header" value="/WEB-INF/content/tiles/header.jsp"/>
        <put-attribute name="body" value="/WEB-INF/content/tiles/body.jsp"/>
        <put-attribute name="footer" value="/WEB-INF/content/tiles/footer.jsp"/>
        <put-attribute name="variable"  expression="OGNL:greeting"/>
    </definition>
    <definition name="test" extends="baseLayout">
        <put-attribute name="title" value="Test Title"/>
    </definition>
    <definition name="WILDCARD:package/*" extends="baseLayout">
        <put-attribute name="title" value="{1}" type="string"/>
    </definition>
    <definition name="" extends="baseLayout">
    </definition>
</tiles-definitions> 
```

**/WEB-INF/content/tiles/body.jsp**

```
<div>
    This is the default body.
</div> 
```

**/WEB-INF/content/tiles/footer.jsp**

```
<div>
    This is the default footer.
</div> 
```

**/WEB-INF/content/tiles/header.jsp**

```
<div>
    This is the default header.
</div> 
```

**/WEB-INF/content/tiles/template.jsp**

```
<%@taglib prefix="tiles" uri="http://tiles.apache.org/tags-tiles" %>
<%@taglib prefix="s" uri="/struts-tags"%>
<%@page contentType="text/html" pageEncoding="UTF-8" %>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title><tiles:insertAttribute name="title"/></title>
    </head>
    <body>
        <tiles:insertAttribute name="header"/>
        <tiles:insertAttribute name="body"/>
        <tiles:insertAttribute name="footer"/>
        <tiles:insertAttribute name="variable"/>
    </body>
</html> 
```

**Test.java 动作**

```
package com.kenmcwilliams.tiles.action;

import com.opensymphony.xwork2.ActionSupport;
import java.util.Map;
import java.util.logging.Logger;
import org.apache.struts2.interceptor.SessionAware;

public class Test extends ActionSupport implements SessionAware{
    private static final Logger log = Logger.getLogger(Test.class.getName());
    @Override
    public String execute(){
        log.info("Test execute");
        return SUCCESS;
    }

    private String greeting = "Hello, World from Action!";
    public String getGreeting(){
        return greeting;
    }

    @Override
    public void setSession(Map<String, Object> session) {
        session.put("greeting", "Greetings from session!");
    }
} 
```

现在应该足以让磁贴为您的应用程序工作。

# wordpress - 页面 html 中的 Wordpress 插件简码

> ID：10050440
> 
> 赞同：0
> 
> 时间：2012-04-06T23:41:37.527
> 
> 标签：wordpress, plugins, editor, shortcode

我对 Wordpress 有点陌生。我主要是一名前端网页设计师，我使用 Wordpress 插件来处理动态内容、表单以及任何客户要求但我不知道如何编写代码的东西。不幸的是，我分享了许多抱怨 Wordpress 的 html 清理的设计师/开发人员的挫败感。因此，我将大部分 html 直接写入页面模板，而不是使用 Wordpress 编辑器。我只将 Wordpress 编辑器用于需要插入插件简码的页面的一小部分——用于表单或其他内容。在我需要在一页上使用多个插件之前，这很有效。例如，如果我需要页面顶部的表单插件和底部的谷歌地图，那么我必须将这两个元素之间的所有 html 编码到 Wordpress 编辑器中，

我的问题——有没有办法在页面模板 html 中使用 Wordpress 插件，而不是在 Wordpress 编辑器中使用简码？如果我按照自己的方式进行操作，我将永远不必为非博客内容使用 Wordpress 编辑器。

谢谢，斯科特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T23:46:34.407

使用wordpress`do_shortcode();`

例如`echo do_shortcode('[gallery autoplay=no]');`

# database - 当元素大小不同时如何维护 B-tree 不变量？

> ID：10050442
> 
> 赞同：4
> 
> 时间：2012-04-06T23:41:45.450
> 
> 标签：database, b-tree

对于 m 阶 B 树，除根外的每个节点都必须包含 m-1 到 2m-1 个元素，其中每个元素至少是一个键，也可能是一些附加数据（例如，一个值）。然而，每个节点必须选择一些恒定的总大小才能在底层块设备上提供良好的性能。那么如果你的元素是可变大小的会发生什么呢？

SQLite3 似乎有一个将额外的块大小的片段附加到它的节点上的方案，并且 MySQL 允许您声明记录的大小（例如，您可以键入的字段不仅是字符串，还可以是某种大小的字符串）。还有哪些其他解决方案？人们在选择一个而不是另一个时会怎么想？

**编辑**：上一句，我的意思是，*数据库开发人员*在*决定以一种方式而不是另一种方式实现他们的 B 树*时会考虑什么？

（我现在正在上数据库课程，所以我对理论和设计角度更感兴趣，而不是特定系统的细节。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T21:03:21.440

我知道 SQL Server 在页面大小为 8192 字节时的密钥长度最多可达 900 字节。如果您实际上有 900 字节的键，则只有 9（或 8）行将适合索引的中级页面。这只是意味着分支因子比平时低。这可能违反了理论上的 B-tree 不变量，但这只是一个学术问题，不会显着阻碍性能。它不会改变所涉及算法的渐近复杂度。

简而言之：这纯粹是学术问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T00:06:53.457

我认为这是一个很好的问题。尽管 RDBMS 供应商的实现略有不同，但基本理论是相同的，我怀疑是否有人使用 b-tree 实现作为选择供应商的决定因素。

据我了解，每个 b-tree 页面的基本结构都包含键和指针。指针不断引用包含更多键和指针的其他页面，最终指针引用关联的数据记录。

如何处理可变长度键很有趣。也许其他人可以对供应商特定的解决方案有所了解。

# php - 在 Eclipse 中使用 Zend Debugger 调试 Yii Web 应用程序

> ID：10050447
> 
> 赞同：0
> 
> 时间：2012-04-06T23:42:30.783
> 
> 标签：php, eclipse, debugging, yii, zend-debugger

我在 Eclipse 中成功运行了 Zend 调试器，但我不明白如何调试 Yii 项目。即，我可以调试单页 PHP 脚本，但我不知道 Yii Web 应用程序的配置选项应该是什么。

例如，我在想控制器文件将是我选择实际调试的文件，但它说找不到该文件。我附上了选项的屏幕截图。

我使用了 Firefox Zend Debugger 扩展，效果很好。现在，我只想知道如何在 Eclipse 中进行等效的操作。

基本选项是：文件和 URL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T07:23:59.580

您是否使用 Eclipse 调试过其他应用程序？如果是这样，它应该没有太大的不同：

1.  我通常在 / 上进行调试，这意味着我登录到应用程序，去任何我需要的地方，然后准备调试的场景（包括适当的断点）。接下来，我运行“常规”调试会话 -> 在浏览器上打开一个新选项卡。我忽略了这个选项卡，而是返回到我准备要调试的场景的选项卡并在那里继续。
2.  我通常将标记 / 或 /index.php 作为“调试入口点”（或任何术语）。如果需要（我认为不需要使用 Yii），我会配置一些“路径”，告诉 IDE“/”由 HTDOCS 翻译/表示。同样，我认为我不需要使用 Yii（但到目前为止我对 Yii 进行的调试很少）。
3.  我曾经有一篇关于使用 PDT（即 Eclipse）和 xDebug（它是 Zend Debugger 的替代品，基本相同）调试 Drupal 的博客文章。您可能会发现它很有用：[链接](http://rymland.org/post/17?title=Using%20PDT%20%2b%20xDebug%20%28for%20debugging%20Drupal%20projects%29)。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T21:29:22.360

在框架中时，在框架规则内工作。如果某些东西不起作用，请不要尝试逐步查看代码。这是徒劳的，因为您将通过几十个没有可辨别顺序的封装函数。Yii 是建立在[单例](http://www.yiiframework.com/doc/guide/1.1/en/basics.application)模式之上的，根据我的经验，这使得几乎不可能知道你在哪里或你要去哪里。

# validation - 仅针对定义的约束的一部分进行验证

> ID：10050450
> 
> 赞同：3
> 
> 时间：2012-04-06T23:43:07.813
> 
> 标签：validation, symfony, entity

我有这个领域：

```
$builder->add('offices', 'entity', array(
    'class' => 'ControlPanelBundle:Offices',
    'property' => 'name',
)); 
```

在我的表单中，我只使用该`Offices`对象中所有可能字段中的一个字段。当我提交时，它会尝试验证所有字段。我怎样才能暂时禁用验证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T06:34:51.550

[验证组](http://symfony.com/doc/master/book/validation.html#validation-groups)是专门为此设计的。

# ruby-on-rails - 如何使用 rspec、rails 和 simplecov 获取视图规范的覆盖范围？

> ID：10050460
> 
> 赞同：19
> 
> 时间：2012-04-06T23:44:37.630
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec

我有一个项目，我正在使用 rails 3.2.3、rspec 2.9.0 和 simplecov 0.6.1，它们似乎都是最新的 gem。

我得到了我的控制器和模型的代码覆盖率结果，但不是我的观点。我尝试在我的 simplecov 设置中添加该组：

```
SimpleCov.start 'rails' do
  add_group 'Views', 'app/views'
end 
```

甚至明确说我想要 .erb 文件包括：

```
SimpleCov.start 'rails' do
  add_group 'Views', 'app/views/*/*.erb'
end 
```

...但没有骰子。我的报道结果中有“视图”组，但那里没有列出任何文件。

有没有人得到这个工作？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-09T18:58:55.530

显然，由于标准 ruby​​ 覆盖库的限制，对此的答案是“你不能”：

[https://github.com/colszowka/simplecov/issues/38](https://github.com/colszowka/simplecov/issues/38)

# javascript - 如何从 Chrome 中的代码设置 JavaScript 断点？

> ID：10050465
> 
> 赞同：735
> 
> 时间：2012-04-06T23:44:48.693
> 
> 标签：javascript, debugging, google-chrome, breakpoints

我想强制 Chrome 调试器*通过代码*中断一行，或者使用某种注释标记，例如`console.break()`.

* * *

## 回答 #1

> 赞同：1230
> 
> 时间：2012-04-06T23:49:37.850

您可以`debugger;`在代码中使用。如果开发者控制台打开，执行将中断。它也适用于萤火虫。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2016-08-19T11:00:51.937

您也可以使用, 在被调用`debug(function)`时中断。`function`

[命令行 API 参考：调试](https://developers.google.com/web/tools/chrome-devtools/debug/command-line/command-line-reference?hl=en#debugfunction)

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2014-05-04T17:33:09.403

设置按钮单击侦听器并调用`debugger;`

**例子**

```
$("#myBtn").click(function() {
 debugger;   
}); 
```

**演示**

[http://jsfiddle.net/hBCH5/](http://jsfiddle.net/hBCH5/)

**JavaScript 调试资源**

*   [http://www.laurencegellert.com/2012/05/the-three-ways-of-setting-breakpoints-in-javascript/](http://www.laurencegellert.com/2012/05/the-three-ways-of-setting-breakpoints-in-javascript/)
*   [http://berzniz.com/post/78260747646/5-javascript-debugging-tips-youll-start-using-today](http://berzniz.com/post/78260747646/5-javascript-debugging-tips-youll-start-using-today)

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-02-02T04:55:36.543

正如其他人已经说过的那样，`debugger;`这是要走的路。我写了一个小脚本，您可以在浏览器的命令行中使用它在函数调用之前设置和删除断点：http: [//andrijac.github.io/blog/2014/01/31/javascript-breakpoint/](http://andrijac.github.io/blog/2014/01/31/javascript-breakpoint/)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-04-06T23:53:28.483

在“脚本”选项卡上，转到您的代码所在的位置。在行号的左侧，单击。这将设置一个断点。

截屏：

![chrome中的断点截图](../Images/b1572657b965adb30e50dad0d04999c4.png)

然后，您将能够在右侧选项卡中跟踪您的断点（如屏幕截图所示）。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-05-31T15:26:20.443

**`debugger`是 EcmaScript 的保留关键字，并且从 ES5 开始具有可选语义**

因此，它不仅可以在 Chrome 中使用，还可以[通过`node debug myscript.js`](https://stackoverflow.com/a/4703227/895245).

[标准](http://www.ecma-international.org/ecma-262/5.1/#sec-12.15)说：

> 句法
> 
> ```
> DebuggerStatement :
>     debugger ; 
> ```
> 
> 语义
> 
> 评估 DebuggerStatement 生产可能允许实现在调试器下运行时导致断点。如果调试器不存在或不活动，则此语句没有可观察到的效果。
> 
> 生产 DebuggerStatement : debugger ; 评估如下：
> 
> 1.  如果实现定义的调试工具可用并启用，则
>     1.  执行实现定义的调试操作。
>     2.  让 result 是实现定义的 Completion 值。
> 2.  别的
>     1.  让结果为（正常，空，空）。
> 3.  返回结果。

ES6 没有变化。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-04-26T14:18:35.620

有很多方法可以调试 JavaScript 代码。以下两种方法被广泛用于通过代码调试 JavaScript

1.  `console.log()`用于打印浏览器控制台中的值。（这将帮助您了解代码某些点的值）

2.  调试器关键字。添加`debugger;`到您要调试的位置，然后打开浏览器的开发人员控制台并导航到源选项卡。

有关调试 JavaScript 代码的更多工具和方法，请[参阅 W3School 的此链接](https://www.w3schools.com/js/js_debugging.asp)。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-01-21T10:02:20.383

这是可能的，并且您可能想要这样做的原因有很多。例如，在页面加载开始时调试 javascript 无限循环，这会阻止 chrome 开发人员工具集（或 firebug）正确加载。

见第 2 节

[http://www.laurencegellert.com/2012/05/the-three-ways-of-setting-breakpoints-in-javascript/](http://www.laurencegellert.com/2012/05/the-three-ways-of-setting-breakpoints-in-javascript/)

或者只是在所需的测试点将包含单词 debugger 的行添加到您的代码中。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-11-04T18:06:07.367

> 断点：-
> 
> 断点将停止执行，并让您检查 JavaScript 值。
> 
> 检查值后，您可以恢复代码的执行（通常使用播放按钮）。
> 
> 调试器：-
> 
> 调试器；停止 JavaScript 的执行，并调用调试函数。
> 
> 调试器语句暂停执行，但它不会关闭任何文件或清除任何变量。

```
Example:-
function checkBuggyStuff() {
  debugger; // do buggy stuff to examine.
}; 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-01-19T10:37:56.770

您也可以设置`debug(functionName)`调试功能。

[https://developers.google.com/web/tools/chrome-devtools/javascript/breakpoints#function](https://developers.google.com/web/tools/chrome-devtools/javascript/breakpoints#function)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-03-30T21:56:59.690

`debugger;`如果您只想杀死和停止 javascript 代码，我不建议您这样做，因为`debugger;`它只会暂时冻结您的 javascript 代码而不是永久停止它。

如果您想在命令中正确终止和停止 javascript 代码，请使用以下命令：

`throw new Error("This error message appears because I placed it");`

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2021-02-04T09:21:24.280

这个要点[Git 预提交挂钩，用于从您的 merb 项目中删除杂散的调试器语句](https://gist.github.com/yeban/958687/f7c9675e86e1534077f9aedac6430e6c9b1c0e53)

如果想`debugger`在提交时删除断点可能有用

# c - 错误：字段“rwsem”的类型不完整

> ID：10050470
> 
> 赞同：2
> 
> 时间：2012-04-06T23:45:12.413
> 
> 标签：c, module, linux-kernel, semaphore

我有一个模块。它有一个头文件：circular_buffer.h

```
typedef struct _buffer_entry_{
       char data[1024];
       int size;
       struct rw_semaphore rwsem;
}buffer_entry; 
```

当我编译时。有一个错误：rwsem 的类型不完整？我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T23:46:42.413

做之前定义的`struct rw_semaphore`前向声明`struct _buffer_entry_`。

或者，如果这是在头文件中，您可以在定义 `_buffer_entry_`之前定义`rw_semaphore`，这样您就可以避免前向声明。

# beagleboard - 使用 Cloud9 IDE 在 BeagleBone 上运行代码

> ID：10050478
> 
> 赞同：0
> 
> 时间：2012-04-06T23:46:36.857
> 
> 标签：beagleboard, cloud9-ide

我对 BeagleBone 很陌生。到目前为止，我一直在使用 Arduino。

我将 BeagleBone 插入我的 Linux 笔记本电脑，并将 BeagleBone 连接到我的路由器。

我可以通过浏览到 192...:3000 打开 Cloud9。我想加载并运行这段代码： [https ://github.com/jadonk/bonescript](https://github.com/jadonk/bonescript)

此处描述：http: [//www.gigamegablog.com/2012/01/05/beaglebone-coding-101-blinking-an-led/](http://www.gigamegablog.com/2012/01/05/beaglebone-coding-101-blinking-an-led/)

在“文件”菜单上，我找不到任何创建新项目的选项。我应该如何将代码加载到 Cloud9 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:21:07.957

您不需要创建新项目——您可以简单地创建一个可执行的新源文件。“运行”按钮的右侧有一个小的向下箭头。在那里，您可以选择添加新的运行配置来执行您的新文件。

顺便说一句，感谢 mDNS/Bonjour，您可以使用[http://beaglebone.local:3000/在您的网络上发现 Cloud9](http://beaglebone.local:3000/)

# java - 没有规则来制作目标makefile

> ID：10050481
> 
> 赞同：1
> 
> 时间：2012-04-06T23:46:49.753
> 
> 标签：java, makefile

> **可能重复：**
> [为 Java/Linux 制作文件](https://stackoverflow.com/questions/9935635/make-file-for-java-linux)

```
JFLAGS = -g
JC = javac
.SUFFIXES: .java .class
.java.class:    $(JC) $(JFLAGS) $*.java

CLASSES =   pprint.java ARPModule.java  EthernetModule.java IPModule.java   FrameModule.java 

default: classes

classes: $(CLASSES:.java=.class)

clean:  $(RM) *.class 
```

不断收到此错误：

> 没有规则来制作“类”所需的目标“pprint.class”。停止。

我尝试清除所有空间并放置标签，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T03:51:44.487

您需要将`.java.class`规则的命令放在单独的行上：

```
.java.class:
        $(JC) $(JFLAGS) $*.java 
```

或者，如果您对垂直空间感到绝望，您可以将它们放在分号后的同一行：

```
.java.class: ; $(JC) $(JFLAGS) $*.java 
```

# perl - Perl - myprint() 或重载打印命令的新定义

> ID：10050482
> 
> 赞同：-2
> 
> 时间：2012-04-06T23:47:13.800
> 
> 标签：perl, printing

我是 Perl 的新手。我正在编写一些脚本，并想定义我自己的 print 调用`myprint()`，它将根据一些标志（详细/调试标志）打印传递给它的东西

```
open(FD, "> /tmp/abc.txt") or die "Cannot create abc.txt file";
print FD "---Production Data---\n";
myprint "Hello - This is only a comment - debug data"; 
```

有人可以帮我提供一些示例代码来实现`myprint()`功能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T02:26:28.703

您是否更关心编写自己的日志系统，或者您想知道如何将日志语句放在您可以关闭的程序的适当部分（并且在关闭时几乎不会造成性能损失）？

如果您想要一个易于开始使用的日志系统，同时还提供您可以逐步发现和使用的大量功能，那么[Log::Log4perl](http://search.cpan.org/perldoc/Log::Log4perl)是一个不错的选择。它有一个简单模式，允许您指定所需的日志记录级别，并仅发出高于所需级别的日志消息。

```
#!/usr/bin/env perl

use strict; use warnings;

use File::Temp qw(tempfile);
use Log::Log4perl qw(:easy);

Log::Log4perl->easy_init({level => $INFO});

my ($fh, $filename) = tempfile;

print $fh "---Production Data---\n";

WARN 'Wrote something somewhere somehow'; 
```

[该片段还显示了使用File::Temp](http://search.cpan.org/perldoc/File::Temp)打开临时文件的更好方法。

至于覆盖内置[打印](http://perldoc.perl.org/functions/print.html)……除非在非常特殊的情况下，否则摆弄内置插件确实不是一个好主意。`perldoc perlsub`有一个关于[覆盖内置函数](http://perldoc.perl.org/perlsub.html#Overriding-Built-in-Functions)的部分。[这个问题](https://stackoverflow.com/questions/3678882/which-perl-built-ins-cannot-be-overridden-in-coreglobal)的公认答案列出了[不能被覆盖的 Perl 内置函数](https://stackoverflow.com/questions/3678882/which-perl-built-ins-cannot-be-overridden-in-coreglobal)。`print`就是其中之一。

但是，那么，一个人真的不需要重写一个内置的来编写一个日志系统。

所以，如果一个已经编写好的日志系统不适合你，你似乎真的在问“我如何编写一个根据标志值有条件地打印内容的函数？”

这是一种方法：

```
#!/usr/bin/env perl

package My::Logger;
{
    use strict; use warnings;
    use Sub::Exporter -setup => {
        exports => [
            DEBUG => sub {
                return sub {} unless $ENV{MYDEBUG};
                return sub { print 'DEBUG: ' => @_ };
            },
        ]
    };
}

package main;

use strict; use warnings;

# You'd replace this with use My::Logger qw(DEBUG) if you put My::Logger
# in My/Logger.pm somewhere in your @INC
BEGIN {
    My::Logger->import('DEBUG');
}

sub nicefunc {
    print "Hello World!\n";
    DEBUG("Isn't this a nice function?\n");
    return;
}

nicefunc(); 
```

示例用法：

```
$ ./yy.pl
你好世界！
$ MYDEBUG=1 ./yy.pl
你好世界！
调试：这不是一个很好的功能吗？
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T06:49:56.333

我不打算回答这个问题，因为 Sinan 已经有了我推荐的答案，但今晚我也碰巧在为即将到来的[Intermediate Perl](http://www.intermediateperl.com)编写“文件句柄引用”一章。那是几个相关的段落，我将直接复制它们而不使它们适应您的问题：

* * *

**IO::Null 和 IO::Interactive**

有时我们不想将输出发送到任何地方，但我们被迫将其发送到某个地方。在这种情况下，我们可以使用 IO::Null 创建一个文件句柄，它会简单地丢弃我们给它的任何东西。它看起来和行为就像一个文件句柄，但什么也不做：

```
use IO::Null;

my $null_fh = IO::Null->new;

some_printing_thing( $null_fh, @args ); 
```

其他时候，我们在某些情况下想要输出，但在其他情况下不想要。如果我们登录并在终端中运行我们的程序，我们可能希望看到很多输出。但是，如果我们通过*cron*安排作业，我们可能不会太在意输出，只要它能完成作业。IO::Interactive 模块足够聪明，可以区分：

```
use IO::Interactive;

print { is_interactive } 'Bamboo car frame'; 
```

该`is_interactive`子例程返回一个文件句柄。因为对子例程的调用不是一个简单的标量变量，所以我们用大括号括起来告诉 Perl 它是文件句柄。

现在您了解了“什么都不做”文件句柄，您可以替换一些每个人都倾向于编写的丑陋代码。在某些情况下你想要输出，而在某些情况下你不需要，所以很多人在某些情况下使用后表达式条件来关闭语句：

```
print STDOUT "Hey, the radio's not working!" if $Debug; 
```

取而代之的是，您可以根据您想要的任何条件分配不同的值，然后 在 every 的末尾`$debug_fh`去掉丑陋的：`if $Debug``print`

```
use IO::Null;

my $debug_fh = $Debug ? *STDOUT : IO::Null->new;

$debug_fh->print( "Hey, the radio's not working!" ); 
```

IO::Null 背后的魔力可能会使用间接对象表示法（例如 ）发出关于“未打开的文件句柄 GLOB 上的 print()”的警告， `print $debug_fh`即使它工作得很好。我们没有直接形式的警告。

# android - 如何修复损坏的应用程序？

> ID：10050485
> 
> 赞同：0
> 
> 时间：2012-04-06T23:47:27.910
> 
> 标签：android, eclipse, crash, corrupt

当我编程时，我踩到了电源代码，我的电脑就关机了。知道当我回到 eclips 时，gen 文件是空的并且我的一个布局中没有代码吗？有没有什么办法解决这一问题？或者，无论如何可以从它导出到的 .apk 中获取我需要的一切？请帮帮我谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T23:51:37.700

您应该可以使用 winZip 打开您的 .apk。

您必须从备份中恢复您的源（或重新输入）。

# java - 额外的按钮不断出现

> ID：10050491
> 
> 赞同：3
> 
> 时间：2012-04-06T23:49:00.460
> 
> 标签：java, swing

我对java有点陌生，我在每台运行我的程序的计算机上都遇到了这个小问题。我的代码是

```
 import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;

public class FrameTest2 {

    public static void main(String[] args){
    String s = "Catch Torchic";

    MainMenu m = new MainMenu(s);
    }
}

class MainMenu extends JFrame {

    JButton autoa, manualb, createc, exitd;

    public MainMenu(String s){
        super(s);
        setBackground(new Color(247,247,111));
        setSize(640,600);
        setVisible(true);
        setResizable(false);
        setLocationRelativeTo(null);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        Container contentPane = getContentPane();
        setLayout(new BoxLayout(contentPane, BoxLayout.Y_AXIS));
        CustomPanel panel = new CustomPanel();
        panel.setAlignmentX(Component.CENTER_ALIGNMENT);
        panel.setMinimumSize(new Dimension(600,365));
        panel.setPreferredSize(new Dimension(600,365));
        panel.setMaximumSize(new Dimension(600,365));
        panel.setBackground(new Color(247,247,111));
        contentPane.add(panel);
        JPanel btnPanel = new JPanel();
        btnPanel.setLayout( new BoxLayout(btnPanel, BoxLayout.Y_AXIS));
        btnPanel.setBackground(new Color(247,247,111));
        autoa = new JButton("AutoPlay");
        autoa.setAlignmentX(Component.CENTER_ALIGNMENT);
        btnPanel.add(autoa);

        manualb = new JButton("Manual Play");
        manualb.setAlignmentX(Component.CENTER_ALIGNMENT);
        btnPanel.add(manualb);

        createc = new JButton("Create Maze");
        createc.setAlignmentX(Component.CENTER_ALIGNMENT);
        btnPanel.add(createc);

        exitd = new JButton("Exit");
        exitd.setAlignmentX(Component.CENTER_ALIGNMENT);
        btnPanel.add(exitd);

        btnPanel.setAlignmentX(Component.CENTER_ALIGNMENT);
        contentPane.add(btnPanel);
        setContentPane(contentPane);

        ButtonHandler handler = new ButtonHandler(this);
        autoa.addActionListener(handler);
        manualb.addActionListener(handler);
        createc.addActionListener(handler);
        exitd.addActionListener(handler);
}

}

class ButtonHandler implements ActionListener{
    MainMenu mm;

    public ButtonHandler(MainMenu mm){
        this.mm = mm;
    }

    public void actionPerformed(ActionEvent e){
        if(e.getSource() == mm.autoa)
        System.out.println("Clicked on Auto");
        else if(e.getSource() == mm.manualb)
        System.out.println("Clicked on Manual");
        else if(e.getSource() == mm.createc)
        System.out.println("Clicked on Create");
        else 
        System.exit(0);
    }

}

class CustomPanel extends JPanel{
    public void paintComponent (Graphics painter){

    Image pic = Toolkit.getDefaultToolkit().getImage("logo.png");
    if(pic != null) painter.drawImage(pic, 105, 30, this); 

    }
} 
```

此代码导致： http: [//a3.sphotos.ak.fbcdn.net/hphotos-ak-ash4/318155_424290814251286_100000111130260_1871937_131988334_n.jpg](http://a3.sphotos.ak.fbcdn.net/hphotos-ak-ash4/318155_424290814251286_100000111130260_1871937_131988334_n.jpg)

左上角总是有多余的按钮，我的问题是，如何删除它？该按钮以随机间隔出现，有时不会。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T07:04:17.030

试试这个变种。很多评论，最重要的在 SHOUTING。请注意，当我得到它成为工作代码（或者更确切地说，在这里工作用于加载图像的代码）时，我从未见过你描述的问题。

```
import javax.swing.*;
import javax.swing.border.*;
import java.awt.*;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;

import java.net.URL;
import javax.imageio.ImageIO;

public class FrameTest2 {

    public static void main(String[] args) throws Exception {
        final String s = "Catch Torchic";
        URL url = new URL("http://pscode.org/media/stromlo2.jpg");
        final Image image = ImageIO.read(url);

        //Create the frame on the event dispatching thread
        SwingUtilities.invokeLater(new Runnable(){

            @Override
            public void run() {
                new MainMenu(s, image);
            }

        });
    }
}

class MainMenu extends JFrame {

    JButton autoa, manualb, createc, exitd;

    public MainMenu(String s, Image image) {
        super(s);
        // do this after pack (if at all)
        //setSize(640,600);
        // do this after pack/setSize
        //setVisible(true);
        // don't do this in broken code
        //setResizable(false);
        // If you're going to spend space on GUI position..
        // setLocationRelativeTo(null);
        // ..do it like this.
        setLocationByPlatform(true);

        setDefaultCloseOperation(EXIT_ON_CLOSE);
        Container contentPane = getContentPane();
        contentPane.setLayout(new BorderLayout());
        CustomPanel panel = new CustomPanel(image);
        panel.setAlignmentX(Component.CENTER_ALIGNMENT);
        //panel.setMinimumSize(new Dimension(600,365));
        //panel.setPreferredSize(new Dimension(600,365));
        //panel.setMaximumSize(new Dimension(600,365));
        contentPane.add(panel);
        JPanel btnPanel = new JPanel();
        btnPanel.setBorder(new EmptyBorder(5,5,100,5));
        btnPanel.setLayout( new BoxLayout(btnPanel, BoxLayout.Y_AXIS));
        // not needed for an SSCCE
        //btnPanel.setBackground(new Color(247,247,111));
        autoa = new JButton("AutoPlay");
        autoa.setAlignmentX(Component.CENTER_ALIGNMENT);
        btnPanel.add(autoa);

        manualb = new JButton("Manual Play");
        manualb.setAlignmentX(Component.CENTER_ALIGNMENT);
        btnPanel.add(manualb);

        createc = new JButton("Create Maze");
        createc.setAlignmentX(Component.CENTER_ALIGNMENT);
        btnPanel.add(createc);

        exitd = new JButton("Exit");
        exitd.setAlignmentX(Component.CENTER_ALIGNMENT);
        btnPanel.add(exitd);

        // you already said that
        //btnPanel.setAlignmentX(Component.CENTER_ALIGNMENT);
        contentPane.add(btnPanel, BorderLayout.SOUTH);
        setContentPane(contentPane);

        ButtonHandler handler = new ButtonHandler(this);
        autoa.addActionListener(handler);
        manualb.addActionListener(handler);
        createc.addActionListener(handler);
        exitd.addActionListener(handler);

        // CAUSE THE COMPONENTS TO BE PROPERLY LAID OUT.
        pack();
        setSize(640,600);
        setVisible(true);
    }

}

class ButtonHandler implements ActionListener{
    MainMenu mm;

    public ButtonHandler(MainMenu mm){
        this.mm = mm;
    }

    public void actionPerformed(ActionEvent e){
        // for clarity, even single line statements 
        // in these should be enclosed in {}
        if(e.getSource() == mm.autoa)
            System.out.println("Clicked on Auto");
        else if(e.getSource() == mm.manualb)
            System.out.println("Clicked on Manual");
        else if(e.getSource() == mm.createc)
            System.out.println("Clicked on Create");
        else
            System.exit(0);
    }

}

class CustomPanel extends JPanel{

    Image pic;

    CustomPanel(Image pic) {
        this.pic = pic;
    }

    public void paintComponent (Graphics painter){
        // DO NOT TRY TO READ IMAGES IN PAINT!
        //Image pic = Toolkit.getDefaultToolkit().getImage("logo.png");
        if(pic != null) painter.drawImage(pic, 105, 30, this);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T01:22:20.480

我认为这是缺少的`contentPane.`：

```
 //setLayout(new BoxLayout(contentPane, BoxLayout.Y_AXIS));
    contentPane.setLayout(new BoxLayout(contentPane, BoxLayout.Y_AXIS));// 
```

还有内容窗格的多余设置。

```
 //setContentPane(contentPane); 
```

* * *

***在“不：”之后***

*难的。* 移动`setVisible(true)`到最后，只调用一个布局。尝试在内容窗格内不使用两个面板（只有一个）：

```
 Container contentPane0 = getContentPane();
    Container contentPane = new JPanel();
    contentPane0.add(contentPane); 
```

# flash - socketio 和 nodejs 上的 flashsocket 不起作用

> ID：10050497
> 
> 赞同：2
> 
> 时间：2012-04-06T23:49:43.960
> 
> 标签：flash, node.js, socket.io

我试图让 flashsocket 与 socket.io 一起工作，但它没有，总是在 xhr-polling 后备中。

如果有人可以提供帮助，我看不出我做错了什么。

**在服务器端**：

```
var app = express.createServer(),
io = require('socket.io').listen(app, {
    flashPolicyServer: true,
    transports: ['flashsocket', 'htmlfile', 'xhr-polling', 'jsonp-polling']
});
app.listen(80); 
```

**在客户端**：

```
...
<script src="/socket.io/socket.io.js"></script>
...
            socket = io.connect();

            socket.on('connect', function(evt) {
                console.log(socket.socket.transport.name);

                onOpen(timeDifference(new Date(), earlierDate), socket.socket.transport.name);
                earlierDate = new Date();
                socket.on('disconnect', function(evt) {
                    onClose(evt);
                });
                socket.on('echo', function(msg) {
                    onEcho(msg);
                });
                socket.on('error', function(evt) {
                    onError(evt);
                });
            }); 
```

之后，我检查了我的浏览器 chrome 是否启用了 flash。我还检查了端口 843 和 10843 是否正在侦听和响应：

```
<cross-domain-policy>
    <allow-access-from domain="*" to-ports="*"/>
</cross-domain-policy> 
```

在服务器日志上，仅获取：

```
debug - served static content /socket.io.js
debug - client authorized
info  - handshake authorized 14328044138726156
debug - setting request GET /socket.io/1/xhr-polling/14328044138726156?t=1333755740295
debug - setting poll timeout
debug - client authorized for 
debug - clearing poll timeout
debug - xhr-polling writing 1::
debug - set close timeout for client 14328044138726156
debug - setting request GET /socket.io/1/xhr-polling/14328044138726156?t=1333755740299
debug - setting poll timeout
debug - clearing poll timeout
debug - xhr-polling writing 5:::{"name":"echo","args":["transport type : xhr-polling; and socket.id : 14328044138726156"]}
debug - set close timeout for client 14328044138726156
debug - discarding transport
debug - cleared close timeout for client 14328044138726156
debug - setting request GET /socket.io/1/xhr-polling/14328044138726156?t=1333755740303
debug - setting poll timeout
debug - discarding transport
debug - cleared close timeout for client 14328044138726156
debug - clearing poll timeout
debug - xhr-polling writing 8::
debug - set close timeout for client 14328044138726156` 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T16:54:38.063

事实上，它有效！

感谢XHR，您带领我进行更多的分析和测试，以便我自己找到。

它可以工作，但与预期的不同：在浏览器上启用 websocket 时，您不能改用 flashsocket。

因此，即使您使用以下方式设置服务器：`transports: ['flashsocket', 'htmlfile', 'xhr-polling', 'jsonp-polling']`您的 google chrome 也永远不会使用 flashsocket，因为它启用了 websocket 并且它回退到 xhr-polling。但是没有启用 websocket 的 Internet Explorer 将使用 flashsocket。

而且我不需要在没有 websocket 的情况下设置 socket.io，所以这种行为对我有用。

此外，我认为这种行为很好，因为它可以防止在不需要时加载沉重的 .swf 文件。

杰罗姆。

# java - Java 文本标记替换器代码

> ID：10050498
> 
> 赞同：0
> 
> 时间：2012-04-06T23:50:28.423
> 
> 标签：java, pattern-matching

在我看来，这似乎很简单……直到我坐下来开始打字。

无论如何，我的任务是编写一个方法，该方法将在字符串中找到“标签”，并适当地替换它们，输出结果字符串。函数声明看起来像：

```
public String doStuff(String source, Map<Integer, String> replacementData) 
```

这个想法是每个“标签”将是一个被“<<>>”包围的整数值（所以正则表达式类似于“. *<<[0-9]+>>.* ”）。一旦在 中遇到这些标签之一`source`，我应该从标签中获取标签中包含的整数，并且应该通过替换标签`replacementData.get(I)`

无论如何，我想有效地做到这一点。我只是不知道该怎么做。我看了一下 Pattern and Matcher，我认为那不是正确的方法。我不想使用 String.indexOf 之类的东西，因为它效率低下（不是吗？）。

感谢您的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T00:32:50.187

使用正则表达式模式和匹配器的方法是捕获所谓的组中的整数，然后用它来替换。问题的另一个有趣部分是逐步替换。您需要执行的步骤顺序在[appendReplacement 方法的 javadoc 中进行了描述](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Matcher.html#appendReplacement%28java.lang.StringBuffer,%20java.lang.String%29)

示例代码：

```
String str = "abc<<1>>def<<2>>ghi";
java.util.Map<Integer,String> replacementMap = new java.util.HashMap<Integer,String>() {
    {
        put(1," ONE ");
        put(2," TWO ");
    }
};
java.util.regex.Pattern pattern = java.util.regex.Pattern.compile("<<([0-9]+)>>");
java.util.regex.Matcher matcher = pattern.matcher(str);
int start = 0;
StringBuffer sb = new StringBuffer();
while(matcher.find()) {
    matcher.appendReplacement(sb,replacementMap.get(Integer.parseInt(matcher.group(1))));
}
matcher.appendTail(sb);
System.out.println(sb.toString()); 
```

输出：`abc ONE def TWO ghi`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T00:04:32.030

天真的实现：

```
public String doStuff(String source, Map<Integer, String> replacementData){

    for( Map.Entry<Integer,String> entry : replacementData.entrySet() )
         source = source.replace("<<"+entry.getKey().toString()+">>", entry.getValue() );

    return source;
} 
```

~~对我来说，它看起来并不太低效。使其更有效的唯一方法是尝试在一次遍历字符串中完成所有内容，但这实际上涉及重写`String.replace()`.~~

~~考虑到将要投入的工作量，我会将这种优化归类为仅当分析器显示这是一个真正的瓶颈时才要做的事情。~~

Puneet的`Matcher`基于 - 的方法更好，因为它只传递字符串一次。

# android - 如果数据库为空，如何获取自动增量编号？

> ID：10050507
> 
> 赞同：1
> 
> 时间：2012-04-06T23:52:58.650
> 
> 标签：android, sqlite

在我正在构建的应用程序中，我有一个自动增量行，所以说我在 android 的 sql 数据库中添加了 3 个条目，它是 0,1,2 但是说我从数据库中删除了 3 个条目，然后添加另一个它将继续自动从放在数据库中的最后一个自动增量号中增加号，所以如果我删除数据库中的所有条目，如果当时数据库中还剩下诺丁，我如何获得最后一个自动增量号？

## 更新

当尝试使用“SELECT last_insert_rowid()”时，我得到了一堆垃圾：

在数据库文件中我有：

```
 public Cursor getmax(){
        return databaseConnect.rawQuery("SELECT last_insert_rowid()", null);
    } 
```

并且在文件中我试图返回最后一行：

```
 Cursor reminder = databaseHelper.getmax();
 String title = reminder + ""; 
```

我需要像上面那样转换成字符串，但是当我检查它时，我得到了一堆垃圾？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T00:46:07.233

两种选择：

- 为插入创建一个[数据库触发器](http://www.sqlite.org/lang_createtrigger.html)，以便插入操作返回它刚刚插入的行的 ID。将该值存储在某个地方，例如共享偏好。

- 自动递增索引不应该仅仅因为数据库为空而重新开始。如果你想要最后一行的索引，只需插入一行，检查它的索引，然后减去一个。然后删除空行（相应地更新您的“最后插入的索引”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T00:09:58.537

尝试...

```
String maxValue = "0";
Cursor c = db.rawQuery("SELECT seq FROM sqlite_sequence WHERE sqlite_sequence.name = 'MY_TABLE'", null);
if (c != null && c.moveToFirst())
    maxValue = String.valueOf(c.getInt(c.getColumnIndex("seq"))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T23:58:59.913

您始终可以获取一列的最大值并向其添加一个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T23:56:11.263

如果它是 android 我猜它是 SQLLite，你应该可以使用

```
SELECT last_insert_rowid() 
```

# php - 覆盖核心 Symfony2 组件

> ID：10050510
> 
> 赞同：1
> 
> 时间：2012-04-06T23:53:58.827
> 
> 标签：php, symfony

好吧，老实说吧。不喜欢 symfony 决定对他们的核心文件做出的一些决定，所以我试图覆盖它们。例如

`Symfony/Component/Form/Extension/Core/Type/FieldType.php`

如果 FormView 有父级，我正在尝试更改呈现的名称，因为它们会进行一些很酷的字符串格式化......

我只是想做到这一点，`$fullName`并且`$id`两者兼而有之`$form->getName()`；

```
 public function buildView(FormView $view, FormInterface $form)
    {
        $name = $form->getName();

        if ($view->hasParent()) {
            $parentId = $view->getParent()->get('id');
            $parentFullName = $view->getParent()->get('full_name');

            // Custom Logic
            //$id = sprintf('%s_%s', $parentId, $name);
            //$fullName = sprintf('%s[%s]', $parentFullName, $name);
            $id = $form->getName();
            $fullName = $form->getName();
        } else {
            $id = $name;
            $fullName = $name;
        }

        $types = array();
        foreach ($form->getTypes() as $type) {
            $types[] = $type->getName();
        }

        $view
            ->set('form', $view)
            ->set('id', $id)
            ->set('name', $name)
            ->set('full_name', $fullName)
            ->set('errors', $form->getErrors())
            ->set('value', $form->getClientData())
            ->set('read_only', $form->isReadOnly())
            ->set('required', $form->isRequired())
            ->set('max_length', $form->getAttribute('max_length'))
            ->set('pattern', $form->getAttribute('pattern'))
            ->set('size', null)
            ->set('label', $form->getAttribute('label'))
            ->set('multipart', false)
            ->set('attr', $form->getAttribute('attr'))
            ->set('types', $types)
        ;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T08:48:41.760

我认为您可以尝试构建自己的表单类型。

你可以把你自己的表单类型放到你的包中，你有一个干净的结构，比如（“TestBundle/Form/Type”）。

在此字段类型中，您可以进行所需的更改。

[如何在 symfony2 中创建自定义字段类型？](https://stackoverflow.com/questions/6506110/how-can-i-make-a-custom-field-type-in-symfony2)

这是一个有用的帖子，显示制作自定义字段类型很热门。

这是一个简短的提示，我希望您能找到一个好的解决方案，并告诉我们它是否有效以及您如何解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T17:20:49.920

构建了一个辅助函数。

```
public function fixForm(\Symfony\Component\Form\FormView $form)
{
    foreach($form as &$child)
    {
        $name = $child->get('full_name');
        $id = $child->get('id');
        $matches = array();
        preg_match('/^(?<form>.+)\[(?<ele>.+)\]/', $name, $matches);
        if(isset($matches['ele']))
            $child->set('full_name', $matches['ele']);
        $matches = array();
        preg_match('/^(?<first>.+)_(?<second>.+)/', $id, $matches);
        if(isset($matches['second']))
            $child->set('id', $matches['second']);
    }
    return $form;
} 
```

及其工作。当您需要修复表单时只需调用它

# objective-c - 使用存储在变量中的类名来调用类方法？

> ID：10050517
> 
> 赞同：2
> 
> 时间：2012-04-06T23:54:32.883
> 
> 标签：objective-c, ios

我可能过度思考这个/浪费时间试图避免一些条件代码 - 所以我想我会问。我已经看到了一些其他问题@这类事情，但他们使用的是 php 或其他语言。

在最基本的情况下，我可以做这样的事情吗（我知道语法是错误的）：

```
 Class * var = @"Playback_Up";
        // call Class method to get default settings
        NSMutableDictionary * dict = [var getPlaybackDefaults]; 
```

我为什么要这样做？为了避免一堆条件。我有一个应用程序，用户可以从一系列播放“类型”中进行选择——每种类型都由“播放”类的子类处理。将类名存储在数组中会很方便，然后在进行选择时（从 tableView）调用所选类，创建它的实例等。

这是可能的还是我在这里自掘坟墓？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T23:56:35.310

第一行的正确语法是：

```
Class var = NSClassFromString(@"Playback_Up"); 
```

其余的都很好，我使用这种技术的频率比你想象的要高。

（除了“Playback_Up”当然不应该是一个类的名称。）

* * *

编辑：请注意下面 Paul.s 的评论。`+class`如果您可以在编译时对类进行硬编码，则首选使用。

# java - 关键词搜索数据结构的建议

> ID：10050518
> 
> 赞同：1
> 
> 时间：2012-04-06T23:55:18.093
> 
> 标签：java, lucene, keyword

我需要组合一个能够有效提供关键字搜索功能的数据结构。

我的指标是：

1.  大约 500,000 种产品。
2.  每个产品大约有 20 多个关键字（猜测）。
3.  产品由大约 10 位数字的 ID 标识，但以后可能是任何 ASCII 代码。

如果可能的话，我想尝试将数据结构放入内存中。我将在服务器上，因此我可以假设一些重要的内存可用性。

速度很重要。使用`LIKE`数据库查询将不是一个可接受的解决方案。

关于数据结构的任何想法？

我的想法：

**特里地图**

关键字非常有效，但需要有一个产品 ID 列表挂在任何叶子上，如此严重的内存消耗。有什么想法可以帮助解决这个问题吗？

**压缩**

各种压缩方案浮现在脑海中，但没有一个具有重要价值。

有没有人把这样的东西放在一起？你能分享你的经验吗？

数据可能会更改，但不会经常更改。每天重建结构以适应变化是合理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T00:18:04.747

您是否考虑过在内存中或文件系统索引中使用[lucene ？](http://lucene.apache.org/)

它非常快，并且为将来可能出现的进一步要求提供了很大的空间。

# bochs - 在 bochs 上运行操作系统返回错误

> ID：10050524
> 
> 赞同：3
> 
> 时间：2012-04-06T23:56:39.470
> 
> 标签：bochs

我正在开发一个名为 pintos 的操作系统编程项目。它按照命令在 bochs 上运行`pintos run nameOfProcess`

这是我收到的错误消息

```
Writing command line to /tmp/eKW3NMXoGT.dsk...
squish-pty bochs -q
========================================================================
                     Bochs x86 Emulator 2.5.1.svn
             Built from SVN snapshot, after release 2.5.1
                  Compiled on Apr  6 2012 at 19:37:19
========================================================================
00000000000i[     ] reading configuration from bochsrc.txt
00000000000i[     ] installing x module as the Bochs GUI
00000000000i[     ] using log file bochsout.txt
Next at t=0
Writing command line to /tmp/eKW3NMXoGT.dsk...
squish-pty bochs -q
========================================================================
                     Bochs x86 Emulator 2.5.1.svn
             Built from SVN snapshot, after release 2.5.1
                  Compiled on Apr  6 2012 at 19:37:19
========================================================================
00000000000i[     ] reading configuration from bochsrc.txt
00000000000i[     ] installing x module as the Bochs GUI
00000000000i[     ] using log file bochsout.txt
Next at t=0
(0) [0x00000000fffffff0] f000:fff0 (unk. ctxt): (invalid)                 ; ffff
<bochs:1> fgets() returned ERROR.
debugger interrupt request was 0
(0).[0] [0x00000000fffffff0] f000:fff0 (unk. ctxt): (invalid)                 ; ffff
(0) [0x00000000fffffff0] f000:fff0 (unk. ctxt): (invalid)                 ; ffff
<bochs:1> fgets() returned ERROR.
debugger interrupt request was 0
(0).[0] [0x00000000fffffff0] f000:fff0 (unk. ctxt): (invalid)                 ; ffff 
```

还有我的 bochsrc.txt

```
romimage: file=$BXSHARE/BIOS-bochs-latest, address=0xe0000  
vgaromimage: file=$BXSHARE/VGABIOS-lgpl-latest
boot: disk
cpu: ips=1000000
megs: 4
log: bochsout.txt
panic: action=fatal
clock: sync=none, time0=0
ata0-master: type=disk, path=/tmp/eKW3NMXoGT.dsk, mode=flat, cylinders=1, heads=16, spt=63, translation=none
com1: enabled=1, mode=term, dev=/dev/stdout 
```

Bochs 是在我的 Ubuntu 11.04 上使用额外配置从源代码构建的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-29T10:11:44.847

我有同样的问题，我[在 OSDev 论坛上问了一个问题](http://forum.osdev.org/viewtopic.php?f=1&t=27183 "OSDev 论坛")。我使用 file=$BXSHARE/BIOS-bochs-legacy 因为我需要 64K BIOS。它不适用于：

> romimage：文件=$BXSHARE/BIOS-bochs-legacy，地址=0xf0000

在 .bochsrc 文件中。它可以在没有“address=0xf0000”部分的情况下工作。

尝试在这里删除BIOS的起始地址：

> romimage：文件=$BXSHARE/BIOS-bochs-latest，地址=0xe0000

走吧：

> romimage: 文件=$BXSHARE/BIOS-bochs-latest

在你的 bochsrc.txt

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T19:01:53.870

安装 qemu 而不是 bosch：

```
sudo apt-get install qemu 
```

如果 qemu 的版本是最新的，那么您需要创建一个从“qemu-system-i386”到“qemu”的 simbolyc 链接

```
sudo ln -s /usr/bin/qemu-system-i386 /usr/bin/qemu 
```

如果 qemu 的版本低于 1.0，则不需要这样做。现在您可以使用 qemu 运行 Pintos，例如：

```
pintos --qemu -- run alarm-multiple 
```

# php - 按日期计数的 PHP 查询

> ID：10050529
> 
> 赞同：0
> 
> 时间：2012-04-06T23:57:20.920
> 
> 标签：php, mysql, count

我有一个名为 books 的数据库表

`books ('id', 'sku', 'date_added')`

日期时间在哪里`date_added`。

我需要运行查询以按上个月添加的数量查找所有书籍。现在我可以做到并获得一个列表，但对于没有上传任何日期的日期，我需要一个 0。我如何实现这一点？

还有什么查询会给我按月上传的书籍数量？

# scala - Scala 修饰符和类型参数化

> ID：10050531
> 
> 赞同：13
> 
> 时间：2012-04-06T23:58:14.240
> 
> 标签：scala

我正在创建一个记忆类。

每个类都记忆一个函数类型，并具有以下定义：

```
 class MemoizedFunction1[-T1, +R](f: T1 => R) {
    private[this] val cache = mutable.Map[T1, R]()
    def apply(t: T1): R = cache.getOrElseUpdate(t,f(t))
  } 
```

这很好地编译并按预期工作。但是，如果我删除修改`private[this]`我得到以下错误：

```
contravariant type T1 occurs in invariant position in type => scala.collection.mutable.Map[T1,R] of value cache 
```

为什么我去掉修饰符后，逆变类型T1突然干扰了Map的不变类型？修饰符如何影响类型参数化？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T07:09:03.083

假设您可以删除`[this]`.

没有`[this]`你可以添加方法`getOtherCache`：

```
class MemoizedFunction1[-T1, +R](f: T1 => R) { 
  private val cache = mutable.Map[T1, R]() // trait Map[A, B] extends Iterable[(A, B)] with Map[A, B] with MapLike[A, B, Map[A, B]]
  def apply(t: T1): R = cache.getOrElseUpdate(t,f(t))

  def getOtherCache(other: MemoizedFunction1[T1, R]) {
    val otherCache: mutable.Map[T1, R] = other.cache;
  }
}

class A
class B extends A

val mf1: MemoizedFunction1[B, B] = new MemoizedFunction1[B, B](b => b)

val mf2: MemoizedFunction1[B, B] = new MemoizedFunction1[A, B](a => new B)
// mf2 is MemoizedFunction1[B, B]
// mf2 contains mutable.Map[A, B]

mf1.getOtherCache(mf2) //Error! mf2.cache is NOT mutable.Map[B, B]! 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-07T04:56:41.397

并不是说我理解所有这些，但这在第 45 页的[Scala 语言规范 2.9的第 4.5 节（变量注释）中得到了解决](http://www.scala-lang.org/docu/files/ScalaReference.pdf)

> *对类的对象私有或对象保护的值、变量或方法（第 5.2 节）中的类型参数的引用不会检查它们的方差位置。在这些成员中，类型参数可以出现在任何地方，而不限制其合法的差异注释。*

为了简化您的示例，根据规范，这很好：

```
class Inv[T]

class Foo[-T] {
  private[this]   val a: Inv[T] = sys.error("compiles")
  protected[this] val b: Inv[T] = sys.error("compiles")
} 
```

但如果你删除`[this]`它会抱怨。在某种程度上，这是有道理的，因为如果它不是对象私有或受保护的，逆变返回类型可能会泄漏到对象之外并导致运行时错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T11:19:25.987

[Scala 编程在第](http://www.artima.com/pins1ed/)[19.7 节对象私有数据](http://www.artima.com/pins1ed/type-parameterization.html#19.7)中涉及到这个主题：“对象私有成员只能从定义它们的对象内部访问。事实证明，从定义它们的同一对象访问变量不会引起方差问题。”

# google-maps-api-3 - Google Maps API v3 找不到自己的建议位置（自动完成）

> ID：10050532
> 
> 赞同：1
> 
> 时间：2012-04-06T23:58:20.120
> 
> 标签：google-maps-api-3

（Google Maps Developer Direction 建议在此处发布）

我正在为我的网站使用 Google Maps API v3，这是地址： http: [//goo.gl/YuyPo](http://goo.gl/YuyPo)抱歉罗马尼亚语，但很容易看到搜索字段和地图，这是通用的 :) （或，您可以从这里使用官方的 Google Maps API v3 自动完成示例：[https](https://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete) ://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete ，它的反应相同）

它工作得很好，但如果我搜索

```
Câmpulung Moldovenesc, Suceava, Romania 
```

（完全像这样）自动竞争有效，但如果我点击自动完成的值（上面的那个），它什么也不做。它应该去搜索和选择的地方。该位置是有效的，例如，您可以在 Google 地图中找到它。

这是一样的

```
Cîmpulung Moldovenesc, Suceava, Romania 
```

（在罗马尼亚语中，Câmpulung 是正确的，但直到大约 15 年前它还是 Cîmpulung，并且 î 在单词中间变成了 â）

只有当我用 i ( ) 拼写时，该搜索才会让我到达那个城镇`Cimpulung Moldovenesc`。

最初，代码是我提供链接的那个示例中的代码（在我的示例中，代码被修改以满足我除了搜索和自动完成之外的其他需求）：

> Google Maps JavaScript API v3 示例：地点自动完成
> 
> ```
> <style type="text/css">
>   body {
>     font-family: sans-serif;
>     font-size: 14px;
>   }
>   #map_canvas {
>     height: 400px;
>     width: 600px;
>     margin-top: 0.6em;
>   }
> </style>
> 
> <script type="text/javascript">
>   function initialize() {
>     var mapOptions = {
>       center: new google.maps.LatLng(-33.8688, 151.2195),
>       zoom: 13,
>       mapTypeId: google.maps.MapTypeId.ROADMAP
>     };
>     var map = new google.maps.Map(document.getElementById('map_canvas'),
>       mapOptions);
> 
>     var input = document.getElementById('searchTextField');
>     var autocomplete = new google.maps.places.Autocomplete(input);
> 
>     autocomplete.bindTo('bounds', map);
> 
>     var infowindow = new google.maps.InfoWindow();
>     var marker = new google.maps.Marker({
>       map: map
>     });
> 
>     google.maps.event.addListener(autocomplete, 'place_changed', function() {
>       infowindow.close();
>       var place = autocomplete.getPlace();
>       if (place.geometry.viewport) {
>         map.fitBounds(place.geometry.viewport);
>       } else {
>         map.setCenter(place.geometry.location);
>         map.setZoom(17);  // Why 17? Because it looks good.
>       }
> 
>       var image = new google.maps.MarkerImage(
>           place.icon,
>           new google.maps.Size(71, 71),
>           new google.maps.Point(0, 0),
>           new google.maps.Point(17, 34),
>           new google.maps.Size(35, 35));
>       marker.setIcon(image);
>       marker.setPosition(place.geometry.location);
> 
>       var address = '';
>       if (place.address_components) {
>         address = [(place.address_components[0] &&
>                     place.address_components[0].short_name || ''),
>                    (place.address_components[1] &&
>                     place.address_components[1].short_name || ''),
>                    (place.address_components[2] &&
>                     place.address_components[2].short_name || '')
>                   ].join(' ');
>       }
> 
>       infowindow.setContent('<div><strong>' + place.name + '</strong><br>' + address);
>       infowindow.open(map, marker);
>     });
> 
>     // Sets a listener on a radio button to change the filter type on Places
>     // Autocomplete.
>     function setupClickListener(id, types) {
>       var radioButton = document.getElementById(id);
>       google.maps.event.addDomListener(radioButton, 'click', function() {
>         autocomplete.setTypes(types);
>       });
>     }
> 
>     setupClickListener('changetype-all', []);
>     setupClickListener('changetype-establishment', ['establishment']);
>     setupClickListener('changetype-geocode', ['geocode']);
>   }
>   google.maps.event.addDomListener(window, 'load', initialize);
> </script>   </head>   <body>
> <div>
>   <input id="searchTextField" type="text" size="50">
>   <input type="radio" name="type" id="changetype-all" checked="checked">
>   <label for="changetype-all">All</label>
> 
>   <input type="radio" name="type" id="changetype-establishment">
>   <label for="changetype-establishment">Establishments</label>
> 
>   <input type="radio" name="type" id="changetype-geocode">
>   <label for="changetype-geocode">Geocodes</lable>
> </div>
> <div id="map_canvas"></div>   </body> </html> 
> ```

有没有解决方案，或者我应该以某种方式提交错误报告？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:53:20.543

```
 var input = document.getElementById('searchTextFieldWhereMe');
    var autocomplete = new google.maps.places.Autocomplete(input,options);
    autocomplete.bindTo('bounds', this.map);

    var infowindow = new google.maps.InfoWindow();

    google.maps.event.addListener(autocomplete, 'place_changed', function() {
           infowindow.close();
           var place = autocomplete.getPlace();
           if (place.geometry.viewport) {
              alfamap.map.fitBounds(place.geometry.viewport);
           } else {
             alfamap.map.setCenter(place.geometry.location);
             alfamap.map.setZoom(16);
           }

           alfamap.marker.setPosition(place.geometry.location);

           var address = '';
           if (place.address_components) {
             address = [(place.address_components[0] &&
                         place.address_components[0].short_name || ''),
                        (place.address_components[1] &&
                         place.address_components[1].short_name || ''),
                        (place.address_components[2] &&
                         place.address_components[2].short_name || '')
                       ].join(', ');
           }

           infowindow.setContent('<div><strong>' + place.name + '</strong><br>' + address);
           infowindow.open(alfamap.map, marker);
         }); 
```

为我工作

# php - 粗体最大值 - 比较值

> ID：10050533
> 
> 赞同：1
> 
> 时间：2012-04-06T23:58:23.053
> 
> 标签：php, html, css

我正在尝试比较两个数字，并向大的数字添加一个 HTML 类——在本例中是视频游戏的统计信息。现在我可以做`$player1[stat]-$player2[stat]`，如果结果是否定的，player2 有一个很大的值，或者只是做大于或小于逻辑的正常值。但是，问题是，我有大约 20 个不同的统计数据需要比较和添加类。

使较大的值加粗的最简单方法是什么？

我打算尝试使用案例切换，但这似乎很乏味。20 种不同的 if 语句似乎也没有必要。

谢谢！

编辑：为了更清楚起见，我也需要回显这些值，但要使用最大的粗体

```
$player1[kills] = 55;  
$player2[kills] = 40;  

$player1[deaths] = 15;  
$player2[deaths] = 10; 
```

期望的结果：

```
<table>  
    <tr> 
        <th>Statistic</th>
        <th>Player 1</th>   
        <th>Player 2</th>        
    </tr>
    <tr> 
        <th>Kills</th>
        <th><strong>40Player 2</th>        
    </tr>  
    <tr> 
        <th>Deaths</th>
        <th>15</th>   
        <th><strong>10</strong></th>        
    </tr>      
</table> 
```

另一件事-更少的死亡更好，那么有没有办法为这种情况选择较小的死亡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T00:16:18.257

从每个组中检索最大值，例如：

```
$maxkills = max($player1['kills'], $player2['kills']);
$maxdeaths = max($player1['deaths'], $player2['deaths']); 
```

输出时：

```
if ($player1['kills'] == $maxkills) {
   // Add <strong> tag
   echo "<strong>{$player1['kills']}</strong>";
}
else {
   // output without <strong> tag
   echo $player1['kills'];
} 
```

您也可以使用三元运算符来缩短它：

```
echo $player1['kills'] == $maxkills ? "<strong>{$player1['kills']}</strong>" : $player1['kills']; 
```

顺便说一句，请在您的数组键周围加上引号。尽管 PHP 可以正确解析它们（假设您打算使用字符串而不是常量），但它会在您每次执行此操作时发出一个通知，即使这些通知只是堆积在日志文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T00:28:37.477

当您检索杀戮和死亡的值时，将它们添加到全局数组中。

```
$kills = array();
$death = array();
while($row = mysql_fetch_assoc($query)) //... or some database operation
    $kills[] = $row['kills'];
    $death[] = $row['deaths';

    //do other details
} 
```

现在找出每个值的最大值

```
$killMax = max($kills);
$deathMax = max($death); 
```

现在无论您在哪里显示与此的比较

```
echo $player1['kill']==$killMax ? "<strong>".$killMax."</strong>" : $killMax; 
```

# magento - Magento 自定义运输模块描述未显示在电子邮件模板上

> ID：10050534
> 
> 赞同：1
> 
> 时间：2012-04-06T23:58:27.800
> 
> 标签：magento

我创建了一种自定义运输方式来显示客户将从其取货的仓库名称，

因此，通过添加覆盖模型文件，在订单视图页面上的前端/后端存储和检索 depo 详细信息一切正常

**在 config.xml 中添加了这个**

```
 <models>

            <sales>
                <rewrite>
                    <order>Module_Model_Sales_Order</order>
                </rewrite>
            </sales>
    </models> 
```

**添加了 Order.php**

```
<?php
class Module_Model_Sales_Order extends Mage_Sales_Model_Order{
    public function getShippingDescription(){
        $desc = parent::getShippingDescription();
        $desc = $desc." added the shipping depo details from order id"; 
        return $desc;
    }
} 
```

它确实在管理销售视图/前端客户销售视图中添加了运输描述。但它没有在电子邮件模板（app\locale\en_US\template\email\sales\order_new.html）下发送相同的运输描述

```
 {{var order.getShippingDescription()}} 
```

我应该单独为邮件模板运输描述做些什么吗？有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T08:33:38.663

您应该将变量传递给电子邮件模板。从卓越教程中获取参考

*   [高级交易电子邮件模板](http://www.excellencemagentoblog.com/magento-advanced-transactional-email-templates)

# java - Eclipse RenameParticipant 偏移处理

> ID：10050545
> 
> 赞同：1
> 
> 时间：2012-04-07T00:01:37.533
> 
> 标签：java, eclipse, plugins

当我编写代码时，我在每个方法的开头都包含跟踪调用，如下所示：

```
public void doOperation()
{
  Trace tr = new Trace("doOperation");
  ... method body ...
} 
```

我正在尝试编写一个 Eclipse 插件，这样当我重命名一个方法时，跟踪方法调用中的字符串常量也会被更新。为了实现这一点，我正在实施 RenameParticipant。

我遇到的问题是，我生成的更改仅在方法名称不更改长度时才能正常工作。如果方法名称更改长度，那么我的更改最终会在更改的文件中编辑错误的偏移量。

我究竟做错了什么？我如何解释方法重命名可能会改变我的 Trace 调用文件中的偏移量这一事实？

* * *

要计算更改，我使用以下代码：

```
@Override
public Change createChange(IProgressMonitor pm)
  throws CoreException,
         OperationCanceledException
{
  ICompilationUnit unit = element.getCompilationUnit();
  CompilationUnit astCompUnit = parse(unit, pm);
  ASTNode astElement = NodeFinder.perform(astCompUnit, element.getNameRange());
  MethodDeclaration astMethod = (MethodDeclaration)getParent(astElement, MethodDeclaration.class);

  String newName = getArguments().getNewName();
  List<TraceFnFixOperation> ops = new ArrayList<TraceFnFixOperation>(1);
  TraceFnCtorFinder finder = new TraceFnCtorFinder(newName, ops);
  astMethod.accept(finder);

  if (ops.size() == 0)
    return null;

  return new TraceChange("Fix Trace", unit, ops);
} 
```

TraceFnCtorFinder 的主体：

```
public static class TraceFnCtorFinder extends ASTVisitor
{
  private final String methodName;
  private final List<TraceFnFixOperation> workingops;

  public TraceFnCtorFinder(String methodName, List<TraceFnFixOperation> workingops)
  {
    this.methodName = methodName;
    this.workingops = workingops;
  }

  @Override
  public boolean visit(ClassInstanceCreation ctorClass)
  {
    Type type = ctorClass.getType();

    // Only examine simple types
    if (type.isSimpleType())
    {
      SimpleType simpleType = (SimpleType)type;
      String typeName = simpleType.getName().getFullyQualifiedName();

      // Check type has correct name
      if ("Trace".equals(typeName))
      {
        List<?> arguments = ctorClass.arguments();

        // Only check a single argument
        if ((arguments != null) &&
            (arguments.size() == 1))
        {
          Object arg = arguments.get(0);

          // Only check a string literal argument
          if (arg instanceof StringLiteral)
          {
            StringLiteral literal = (StringLiteral) arg;
            String currentArg = literal.getLiteralValue();

            // Check whether argument value is valid
            if (!methodName.equals(currentArg))
            {
              workingops.add(new TraceFnFixOperation(literal.getStartPosition(),
                                                     literal.getLength(),
                                                     methodName));
            }
          }
        }
      }
    }
    return false;
  }
} 
```

TraceChange 的主体：

```
public static class TraceChange extends CompilationUnitChange
{
  public TraceChange(String name,
                     ICompilationUnit cunit,
                     List<TraceFnFixOperation> ops)
  {
    super(name, cunit);

    MultiTextEdit multiTextEdit= new MultiTextEdit();
    setEdit(multiTextEdit);
    for (TraceFnFixOperation op : ops)
    {
      addEdit(new ReplaceEdit(op.startPosition,
                              op.length,
                              "\"" + op.methodName + "\""));
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T11:31:11.077

通过使用 createPreChange(...)，我能够让我的代码正常工作。这允许我返回在执行主重构之前在源上执行的更改。这意味着我的代码计算的更改在实际应用时仍然准确。

[http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fltk%2Fcore%2Frefactoring%2Fparticipants%2FRefactoringParticipant.html](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fltk%2Fcore%2Frefactoring%2Fparticipants%2FRefactoringParticipant.html)

**编辑**：使用 createPreChange(...) 实际上只是一种解决方法，因为我的更改仍可能与另一个 PreChange 冲突。通过返回使用 createChange(...) 并调用 getTextChange(...) 来获取现有的文本编辑对象并将我的编辑添加到该对象，我提出了一个更好的解决方案。这似乎使偏移量正常工作。

```
public Change createChange(IProgressMonitor pm)
  throws CoreException,
         OperationCanceledException
{
  ICompilationUnit unit = element.getCompilationUnit();
  TextChange change = getTextChange(unit);

  // Failed to find existing change to add our changes to
  if (change == null)
    return null;

  // Find the AST version of the method being changed
  CompilationUnit astCompUnit = parse(unit, pm);
  ASTNode astElement = NodeFinder.perform(astCompUnit, element.getNameRange());
  MethodDeclaration astMethod = (MethodDeclaration)getParent(astElement, MethodDeclaration.class);

  // Visit the contents of the method to find changes to make
  String newName = getArguments().getNewName();
  List<TraceFnFixOperation> ops = new ArrayList<TraceFnFixOperation>(1);
  TraceFnCtorFinder finder = new TraceFnCtorFinder(newName, ops);
  astMethod.accept(finder);

  // Add identified edits to the overall change
  for (TraceFnFixOperation op : ops)
  {
    change.addEdit(new ReplaceEdit(op.startPosition,
                                   op.length,
                                   "\"" + op.methodName + "\""));
  }

  // Don't return a dedicated change
  return null;
} 
```

# php - 在 Wordpress 中使用字体

> ID：10050546
> 
> 赞同：0
> 
> 时间：2012-04-07T00:01:42.290
> 
> 标签：php, css, wordpress, layout, fonts

最近安装了新的 wordpress 主题。问题是，只有以下字体选项可供选择。

![在此处输入图像描述](../Images/c27563adac1d3f1a2e25fff2fe728bd8.png)

但我想将 Arial 设置为所有内容的默认字体。

试图更改主题的 css 文件。没有成功！

如何将所有字体更改为 arial 或支持所有 utf-8 字符的字体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T00:32:00.257

只需将这行代码添加到主题目录中 style.css 的最后一行即可。

```
body {font-family: "Arial" !important;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T00:28:08.570

添加 !important 你只是被级联了。

```
body {
    color: #333;
    font-family: "Arial" !important; 
    font-size: 13px;
    line-height: 1.62em;
} 
```

你也应该包括这样的后备`"Arial", sans-serif !important`

# javascript - 在 Javascript 中为全局变量添加属性

> ID：10050547
> 
> 赞同：2
> 
> 时间：2012-04-07T00:01:44.287
> 
> 标签：javascript, object, scope

假设我有一个这样的代码块：

```
keysPressed = new Object();
document.onkeydown = function(e) {
    keysPressed[e.charCode] = true;
}
document.onkeyup = function(e) {
    keysPressed[e.charCode] = false;
} 
```

理论上，这应该给我留下一个对象，我可以在其中`keysPressed.w`检查当前是否按下了“w”。

我可以在我的 JavaScript 控制台中看到所有属性都像正常一样定义，但是每当我尝试访问它们时，它都会说它们是未定义的。我怀疑这些属性在定义它们的函数内具有本地范围，并且无法在其他地方访问。有没有办法在不创建一大堆全局变量的情况下解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T00:08:30.413

这里的问题是`charCode`返回一个数值。因此，与其为它添加一个属性，不如为`w`它添加一个属性 number `87`。您想在`String.fromCharCode`这里获取字符串表示形式

```
keysPressed = new Object();
document.onkeydown = function(e) {
    keysPressed[String.fromCharCode(e.charCode)] = true;
}
document.onkeyup = function(e) {
    keysPressed[String.fromCharCode(e.charCode)] = false;
} 
```

现在像下面这样的代码将起作用（注意使用大写 W 而不是小写）

```
if (keysPressed.W) {
  ...
} 
```

# apache - 为什么代理下的getContextPath()返回的是HttpServlet内部的内部路径，而不是Filter内部的路径？

> ID：10050550
> 
> 赞同：1
> 
> 时间：2012-04-07T00:02:19.337
> 
> 标签：apache, tomcat, servlets, servlet-filters, response.redirect

一直在烦我。

所以，我正在使用 JSP，在我实现的过滤器和扩展的 HttpServlet 中分别有这些方法（简单示例）：

```
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
    ((HttpServletResponse) response).sendRedirect(((HttpServletRequest) request).getContextPath() + "/foo");
} 
```

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {
    response.sendRedirect(request.getContextPath() + "/foo");
} 
```

在`localhost:8080/app`，Filter 和 HttpServlet 都正确地将我重定向到`localhost:8080/app/foo`.

但是在`www.mysite.com/app`，它在 Apache 的代理下隐藏了一个`tomcatserver:8080/app`如下，

```
RedirectPermanent /app /app/
ProxyPass /app/ http://tomcatserver:8080/app/
ProxyPassReverse /app/ http://tomcatserver:8080/app/ 
```

过滤器将我重定向到`www.mysite.com/app/foo`，而 HttpServlet 要么：

1.  *（来自同一域）*显示 Tomcat 的服务器地址，将我重定向到`tomcatserver:8080/app/foo`或
2.  *（来自域外）*只是卡住了加载。

那么……是什么原因造成的？

**PS：我知道从 HttpServlet 中删除`request.getContextPath()`and`"/"`部分可以解决问题，我不是在问这个问题。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T13:20:45.940

因为 Tomcat 不知道反向代理的主机名。Tomcat 看到的主机头是为它自己的。因此，这是 Tomcat 在为重定向等生成绝对 URL 时使用的主机。

您可以使用更改此设置

```
ProxyPreserveHost On 
```

在您的 httpd 配置中。

# javascript - 重写这个 jQuery 查找选择器？

> ID：10050551
> 
> 赞同：0
> 
> 时间：2012-04-07T00:02:21.773
> 
> 标签：javascript, jquery, performance, internet-explorer, jquery-selectors

我在 IE 中遇到性能问题并使用浏览器分析器，我将其缩小为：

```
$tbody.find('> tr:not(.t-grouping-row,.t-detail-row)') 
```

这到底是什么意思以及关于如何重写它以使其在 IE 中表现更好的任何想法（如果有意义的话，可能是纯 Javascript）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T00:11:40.420

好吧，让我们一步一步地看看这意味着什么：

```
$tbody.find('> tr:not(.t-grouping-row,.t-detail-row)') 
```

`$tbody`是一个变量。它可能是在那之前定义的。我猜它的名字意思是“表的 tbody 标签”。

`>`意思是“所有的孩子”。

`tr:not(.t-grouping-row,.t-detail-row)'`意思是“所有没有类“t-grouping-row”和“t-detail-row”的tr。

所以你的选择器是“在这个 tbody 中找到所有没有类“t-grouping-row”和“t-detail-row”的 TR。

更好的选择器如下：

```
$('tr:not(.t-grouping-row, .t-detail-row)', $tbody) 
```

但这只会好一点，但仍然很糟糕。您应该查看您的 HTML，查看您想要的内容并使用更简单的选择器，例如`$('.class', $tbody)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T00:11:14.077

我的回答是理论上的。

```
$tbody.children('tr').filter(function(){
    var that = $(this);
    return (!that.hasClass('t-grouping-row') && !that.hasClass('t-detail-row');
}) 
```

`.children`比`.find`因为它有更少的元素要查看更有效，此时嘶嘶声引擎停止（嘶嘶声看起来可能是你的问题）。`:not`替换为`.filter`将检查属性而不是选择的。

# symfony - FOSUserBundle/Symfony2：根本没有检查用户实体的验证约束

> ID：10050552
> 
> 赞同：1
> 
> 时间：2012-04-07T00:02:24.643
> 
> 标签：symfony, fosuserbundle

我在我的用户实体的validation.yml 中定义了验证约束，但实际上没有一个被调用；它曾一度工作，但现在没有检查三个约束。我得到 SQL 唯一约束错误，所以它肯定没有在代码中正确处理。

这是我的validation.yml：

```
Acme\CPBundle\Entity\User:
   constraints:
        - Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntity: { fields: username, message: userExists }
        - FOS\UserBundle\Validator\Unique: {property: usernameCanonical, message: userExists}
        - Callback:
            methods: [isTimeZoneValid]
   properties:
        firstName:
            - MaxLength: 255
        lastName:
            - MaxLength: 255
        username:
            - NotBlank: { groups: [create_user] }
            - MinLength: { limit: 4, groups: [create_user] }
            - MaxLength: { limit: 50, groups: [create_user] }
        email:
            - NotBlank: { groups: [create_user, edit_user] }
            - MaxLength: { limit: 255, groups: [create_user, edit_user] }
            - Email:
                message: The email "{{ value }}" is not a valid email
                checkMX: true
        plainPassword:
            - NotBlank:  { groups: [create_user] }
            - MinLength: { limit: 6, groups: [create_user], message: "passwordMin {{ limit }}" }
        newPassword:
            - MinLength: { limit: 6, groups: [edit_user], message: "passwordMin {{ limit }}" }
        singleRole:
            - Choice: { callback: getAllowedRoles } 
```

这是我的用户实体：

```
<?php

namespace Acme\CPBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;
use FOS\UserBundle\Model\User as BaseUser;
use Acme\CPBundle\Constant\SecurityConstant;
use Symfony\Component\Validator\ExecutionContext;

/**
* Acme\CPBundle\Entity\User
*/
class User extends BaseUser {

/**
* @var \Acme\CPBundle\Entity\Organization $organization
*/
private $organization;

/**
* @var string $firstName
*/
private $firstName;

/**
* @var string $lastName
*/
private $lastName;

/**
* @var DateTime $timeZone
*/
private $timeZone;

/**
* @var Role $singleRole
*/
private $singleRole;

/**
* @var ArrayCollection $sessions
*/
private $sessions;

/**
* @var integer $id
*/
protected $id;

public function __construct() {
    parent::__construct();
    $this->enabled = true;
    $this->sessions = new ArrayCollection();
}

public function setFirstName($firstName) {
    $this->firstName = $firstName;
}

public function getFirstName() {
    return $this->firstName;
}

public function setLastName($lastName) {
    $this->lastName = $lastName;
}

public function getLastName() {
    return $this->lastName;
}

public function setTimeZone($timeZone) {
    $this->timeZone = $timeZone;
}

public function getTimeZone() {
    return $this->timeZone;
}

public function getId() {
    return $this->id;
}

public function setOrganization(\Acme\CPBundle\Entity\Organization
    $organization) {
        $this->organization = $organization;
}

public function getOrganization() {
    return $this->organization;
}

public function setSingleRole($singleRole) {
    $this->singleRole = $singleRole;
}

public function getSingleRole() {
    return $this->singleRole;
}

public function setSessions($sessions) {
    $this->sessions = $sessions;
}

public function getSessions() {
    return $this->sessions;
}

/*
* Form Validation Methods
*/
public static function getAllowedRoles() {
    return array(SecurityConstant::ROLE_ADMIN,
        SecurityConstant::ROLE_ORG_ADMIN, SecurityConstant::ROLE_USER);
}

public function isTimeZoneValid(ExecutionContext $context) {
    $timeZoneIdentifiers = \DateTimeZone::listIdentifiers();
    if (!in_array($this->getTimeZone(), $timeZoneIdentifiers)) {
        $propertyPath = $context->getPropertyPath() . '.timeZone';
        $context->setPropertyPath($propertyPath);
        $context->addViolation('timeZoneInvalid', array(), null);
    }
} 
```

几天来我一直试图解决这个问题，但我对问题可能是什么一无所知。

任何帮助，将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T03:50:44.320

显然，您也可以像设置任何其他约束一样设置组。

```
constraints:
    - Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntity: { fields: username, groups: [create_user, default], message: userExists }
    - FOS\UserBundle\Validator\Unique: { property: usernameCanonical, groups: [create_user, default], message: userExists }
    - Callback:
        methods: [isTimeZoneValid]
        groups: [create_user, default] 
```

# python - Python中的机器人运动

> ID：10050554
> 
> 赞同：5
> 
> 时间：2012-04-07T00:03:18.023
> 
> 标签：python, robotics

我正在尝试对机器人进行编程以使其移动。机器人根据当前位置移动。有四个地方可以：

```
LOCATION1 Motion Plan is like so,
5 6
3 4
1 2
Initial positon is (x1,y1)
This gets coded as (x1,y1)->(x1+dx,y1)->(x1,y1+dy)->(x1+dx,y1+dy) ... and so on

LOCATION2 Motion Plan is like so,
5 3 1
6 4 2
The initial position is (x1,y1)
This gets coded as (x1,y1)->(x1,y1-dy)->(x1-dx,y1)->(x1-dx,y1-dy) ... and so on

LOCATION3 Motion Plan is like so,
6 5
4 3
2 1
Initial positon is (x1,y1)
This gets coded as (x1,y1)->(x1-dx,y1)->(x1,y1+dy)->(x1-dx,y1+dy) ... and so on

LOCATION4 Motion Plan is like so,
6 4 2
5 3 1
The initial position is (x1,y1)
This gets coded as (x1,y1)->(x1,y1+dy)->(x1-dx,y1)->(x1-dx,y1+dy) ... and so on 
```

我正在努力想出一个好的pythonic方法来编码这个。我正在考虑定义 4 个不同的下一步移动规则，然后有一堆 if 语句来选择正确的规则

有人做过类似的事情吗...有没有更好的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T00:57:59.503

我知道这可以变得更优雅（而且我的方法的名称很糟糕！），但也许是这样的？

```
>>> import itertools
>>> def alternator(*values):
...     return itertools.cycle(values)
... 
>>> def increasor(value_1, dvalue_1, steps=2):
...     counter = itertools.count(value_1, dvalue_1)
...     while True:
...             repeater = itertools.repeat(counter.next(), steps)
...             for item in repeater:
...                 yield item
... 
>>> def motion_plan(x_plan, y_plan, steps=6):
...     while steps > 0:
...         yield (x_plan.next(), y_plan.next())
...         steps -= 1
... 
>>> for pos in motion_plan(alternator('x1', 'x1+dx'), increaser('y1', '+dy'): #Location 1 motion plan
...     print pos
... 
('x1', 'y1')
('x1+dx', 'y1')
('x1', 'y1+dy')
('x1+dx', 'y1+dy')
('x1', 'y1+dy+dy')
('x1+dx', 'y1+dy+dy') 
```

我不确定您需要多大的灵活性，如果您想消除一些灵活性，您可以进一步降低复杂性。此外，您几乎肯定不会为此使用字符串，我只是认为这是演示该想法的最简单方法。如果您使用数字，则如下所示：

```
>>> count = 0
>>> for pos in motion_plan(increaser(0, -1), alternator(0, 1)): #location 4 motion plan
...     print "%d %r" % (count, pos)
...     count += 1
1 (0, 0)
2 (0, 1)
3 (-1, 0)
4 (-1, 1)
5 (-2, 0)
6 (-2, 1) 
```

应该很清楚地对应于此：

```
LOCATION4 Motion Plan is like so,
6 4 2
5 3 1 
```

我相信议案计划如下：

```
Location1 = motion_plan(alternator(0, 1), increasor(0, 1))
Location2 = motion_plan(increasor(0, -1), alternator(0, -1))
Location3 = motion_plan(alternator(0, -1), increasor(0, 1))
Location4 = motion_plan(increasor(0, -1), alternator(0, 1)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T07:37:03.520

最pythonic的方式是[StateMachine](http://en.wikipedia.org/wiki/State_pattern)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T00:08:17.743

你可以这样做，你会做的是。

```
def motion_loc1(x1,y1,dx,dy):
     # your operation

def motion_loc2(x1,y1,dx,dy):
     # your operation 
```

然后在主程序中，根据x1、y1调用各种运动方法。

# php - php - 通过 cron 运行脚本来创建文件

> ID：10050555
> 
> 赞同：0
> 
> 时间：2012-04-07T00:03:33.680
> 
> 标签：php, cron

我编写了一个脚本来生成一些 XML，我使用一种非常基本的方法将 XML 的结果保存到文件中：

```
<?php
// start the output buffer to cache the content
ob_start();

//SOME PHP CODE HERE TO GENERATE CONTENTS ON THE FILE

$cachefile = "results.xml";
// open the cache file for writing
$fp = fopen($cachefile, 'w'); 
// save the contents of output buffer to the file
fwrite($fp, ob_get_contents()); 
// close the file
fclose($fp); 
// Send the output to the browser
ob_end_flush(); 
```

当我手动转到服务器上包含脚本的文件的 URL 时，脚本会运行并创建文件。

但是，当我尝试将其作为 cron 作业运行时，脚本会运行并且输出是通过不保存到文件来生成的。

任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T00:08:53.750

应该是权限问题。尝试 chmod 777，然后重新 cron。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T00:09:12.517

我可以想象，cronjob 只请求标头而不是正文，因此 apache 根本不会生成一个，因此 ob 保持为空...您可以尝试以下操作：

```
<?php
$out = ''

//SOME PHP CODE HERE TO GENERATE CONTENTS ON THE FILE
$out .= 'content' . "\n";
$out .= 'more' . "\n";
$out .= 'more' . "\n";
$out .= 'more' . "\n";
$out .= 'more' . "\n";

$cachefile = "results.xml";
// open the cache file for writing
$fp = fopen($cachefile, 'w'); 
// save the contents of output buffer to the file
fwrite($fp, $out); 
// close the file
fclose($fp); 
// Send the output to the browser

print$out; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T00:13:27.707

正在创建文件，但在根目录中，而不是在运行脚本的目录中。

在浏览器中运行的文件是在正确的目录中创建的，通过cron运行并且它是在根目录中创建的。

可能需要指定完整路径。

# ssh - 设置 ssh 供 Jenkins 在运行时使用

> ID：10050556
> 
> 赞同：7
> 
> 时间：2012-04-07T00:03:35.540
> 
> 标签：ssh, jenkins

我需要一些 Jenkins 作业才能通过 ssh 对其他一些机器进行 shell 命令行访问。

我怎样才能做到这一点？

我没有目标服务器的密码，但我有一个“密钥”文件，但是当我使用以下内容运行作业时

```
ssh -i /path/to/key/file name@someserver some_command 
```

作为 shell 命令，我得到以下信息：

```
ssh_askpass: exec(/usr/bin/ssh-askpass): No such file or directory 
```

ssh_askpass 是我和 Jenkins 用户都可以访问的 GUI 实用程序。

我没有 Jenkins 用户的密码（或任何 Jenkins 运行的密码），所以我无法登录并创建 ~/.ssh/id_dsa 文件。

该怎么办？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-07T20:40:50.393

SSH 要求输入密码，因为密钥无效或密钥受密码保护。

通过自己运行相同的命令来尝试密钥以找出您需要解决的问题。

如果密钥受密码保护，您可能应该删除密码，因为在 Jenkins 作业中没有输入密码的好方法。你可以用`ssh-keygen -p -f /path/to/key/file`. 设置一个空密码以删除密码。

在非交互式构建作业中使用 ssh 命令时，您可能应该使用 option `-o BatchMode=yes`。您可能还想使用`-o StrictHostKeyChecking=no`，除非您可以交互方式进行首次登录并接受主机密钥。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-07T01:30:52.433

我没有安装bin文件ssh-askpass，所以没有这样的文件或目录...我需要安装它。

Linux：sudo apt-get install ssh-askpass

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T06:10:32.143

不要尝试通过将命令放在“执行 Shell”字段中直接 ssh 到远程计算机。而是使用[SSH 插件](https://wiki.jenkins-ci.org/display/JENKINS/SSH+plugin)或[Publish Over SSH 插件](https://wiki.jenkins-ci.org/display/JENKINS/Publish+Over+SSH+Plugin)。您不必为 jenkins 用户生成密钥。它将开箱即用。

# c# - asp.net 联系表突然停止在外部工作

> ID：10050557
> 
> 赞同：1
> 
> 时间：2012-04-07T00:04:00.283
> 
> 标签：c#, asp.net

这是一个非常简单的联系表单，只需在按钮单击事件上运行以下代码。问题是在网络内部这个东西工作得很好，但是当我在外面尝试时什么都没有发生，而是一个 500 服务器错误。特别奇怪的是，这在几天前还可以正常工作。我猜这可能是 DNS 发生的事情。我的问题是，我怎样才能阻止这种情况发生并使这种形式更稳定？

```
 string toAddress = "me@me.com";
            string fromAddress = "no-reply@mydomain.com";
            string mailServer = "mail.mydomain.com";
            DateTime now = DateTime.Now;
            MailMessage myMailMessage = new MailMessage();
            myMailMessage.To.Add(toAddress);

            myMailMessage.From = new MailAddress(fromAddress);
            myMailMessage.Subject = "Contact Form Submission";
            myMailMessage.Body =
              "some text" + "\r\n" + 
               "-------------------------------------------" +
              "\r\n" +
              "xxx#: " + xxx.Text.ToString() +

              "\r\n" + "FirstName: " + FirstName.Text.ToString() +
              "\r\n" + "LastName: " + LastName.Text.ToString() +
              "\r\n" + "City: " + City.Text.ToString() +
              "\r\n" + "ListPrice: " + ListPrice.Text.ToString() +
              "\r\n" + "Features: " + Features.Text.ToString() +
              "\r\n" 

            SmtpClient mySmtpClient = new SmtpClient(mailServer);

            mySmtpClient.Send(myMailMessage);

            Response.Redirect("thankyou.aspx"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T01:41:42.640

500 服务器错误是一般消息，您需要阅读事件查看器上的详细消息。

这里可能存在的问题。如果您从同时拥有邮件服务器的服务器发送电子邮件，请将邮件服务器名称更改为 localhost

```
string mailServer = "localhost"; 
```

并设置邮件服务器以接受来自本地的邮件。如果您在其他地方有邮件服务器，那么您需要检查

*   邮件服务器在发送之前是否请求登录？
*   邮件服务器是否请求 SSL 连接？

并根据该选项制作代码。

# string - MongoDB ObjectID 的字符串表示是如何生成的？（在外壳中）

> ID：10050560
> 
> 赞同：0
> 
> 时间：2012-04-07T00:04:17.140
> 
> 标签：string, mongodb

在 MongoDB shell 中，如果我键入`someDoc._id`，Mongo 会回复类似`ObjectId(4f6b83af44c75956279e7777)`. 该字符串是如何从[ObjectId 字节](http://www.mongodb.org/display/DOCS/Object+IDs#ObjectIDs-BSONObjectIDSpecification)生成的？

欢迎链接到 javascript 源代码，也欢迎链接到其他驱动程序的源代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T00:42:31.793

看起来来自[`BSONElement::toString`](https://github.com/mongodb/mongo/blob/v2.0/bson/bson-inl.h#L751)：

```
case jstOID:
    s << "ObjectId('";
    s << __oid() << "')";
    break; 
```

并[`__oid()`](https://github.com/mongodb/mongo/blob/v2.0/bson/bsonelement.h#L207)给你一个`mongo::OID`和[`<<`运营商](https://github.com/mongodb/mongo/blob/v2.0/bson/oid.h#L111)电话`str`：

```
inline StringBuilder& operator<< (StringBuilder& s, const OID& o) { return (s << o.str()); } 
```

这只是调用[`toHexLower`](https://github.com/mongodb/mongo/blob/v2.0/bson/oid.h#L58)原始字节：

```
string str() const { return toHexLower(data, 12); } 
```

最后，[`toHexLower`](https://github.com/mongodb/mongo/blob/v2.0/util/hex.h#L52)这样做：

```
inline string toHexLower(const void* inRaw, int len) {
    static const char hexchars[] = "0123456789abcdef";

    StringBuilder out;
    const char* in = reinterpret_cast<const char*>(inRaw);
    for (int i=0; i<len; ++i) {
        char c = in[i];
        char hi = hexchars[(c & 0xF0) >> 4];
        char lo = hexchars[(c & 0x0F)];

        out << hi << lo;
    }

    return out.str();
} 
```

字符串化不是在 JavaScript 中完成的，而是在 C++ 中完成的。

上面使用了 MongoDB 的 2.0 分支，但（当前）master 是相同的（或几乎相同）。

# javascript - 从 JS 调用 actionscript 函数

> ID：10050562
> 
> 赞同：3
> 
> 时间：2012-04-07T00:04:35.473
> 
> 标签：javascript, html, flash, actionscript

我将不胜感激有关此问题的任何帮助。

我试图在单击某个链接时执行 AS 功能，但无法使其正常工作。我正在运行代码如下：

在我的对象构造函数中，我有以下行：

```
ExternalInterface.addCallback("methodName",methodName); 
```

我的函数定义如下（在构造函数之外）：

```
function methodName()
        {
//functioncode here
        } 
```

在我的 html 文件中，javascript 代码如下：

```
<script type="text/javascript">
function callExternalInterface() {
    thisMovie("swf").methodName();
}
function thisMovie(movieName) {
    if (navigator.appName.indexOf("Microsoft") != -1) {
        return window[movieName]
    }
    else {
        return document[movieName]
    }
}
    </script> 
```

按钮调用上述函数的代码：

```
<input type="button" onclick="callExternalInterface()" value="Call ExternalInterface" /> 
```

flash 对象的嵌入方式如下：

```
<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="655" height="324" align="middle" id="swf" name="swf">
    <param name="allowScriptAccess" value="always">
    <param name="allowFullScreen" value="false">
    <param name="movie" value="flash1.swf">
    <param name="menu" value="false">
    <param name="quality" value="best">
    <param name="bgcolor" value="#f3f3f3">  
    <embed src="flash1.swf" menu="false" quality="best" bgcolor="#f3f3f3" width="655" height="324" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.adobe.com/go/getflashplayer" id="swf" name="swf">
    </object> 
```

根据 Firebug 控制台，当我单击按钮时，出现以下错误：

> thisMovie("swf").methodName 不是函数

看起来这是一个无法识别该功能的 javascript 错误。我从该站点获得了大部分代码，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T14:30:37.027

在此处检查运行示例[http://www.redcodelabs.com/2012/04/calling-actionscript-method-from-javascript/](http://www.redcodelabs.com/2012/04/calling-actionscript-method-from-javascript/)

这是帖子中的一些代码

```
package {
    import flash.display.Sprite;
    import flash.events.*;
    import flash.external.ExternalInterface;
    import flash.text.TextField;
    import flash.utils.Timer;
    import flash.text.TextFieldType;
    import flash.text.TextFieldAutoSize;

    public class ExternalInterfaceExample extends Sprite {
        private var input:TextField;
        private var output:TextField;
        private var sendBtn:Sprite;

        public function ExternalInterfaceExample() {
            input = new TextField();
            input.type = TextFieldType.INPUT;
            input.background = true;
            input.border = true;
            input.width = 350;
            input.height = 18;
            addChild(input);

            sendBtn = new Sprite();
            sendBtn.mouseEnabled = true;
            sendBtn.x = input.width + 10;
            sendBtn.graphics.beginFill(0xCCCCCC);
            sendBtn.graphics.drawRoundRect(0, 0, 80, 18, 10, 10);
            sendBtn.graphics.endFill();
            sendBtn.addEventListener(MouseEvent.CLICK, clickHandler);
            addChild(sendBtn);

            output = new TextField();
            output.y = 25;
            output.width = 450;
            output.height = 325;
            output.multiline = true;
            output.wordWrap = true;
            output.border = true;
            output.text = "Initializing...\n";
            addChild(output);

            if (ExternalInterface.available) {
                try {
                    output.appendText("Adding callback...\n");
                    ExternalInterface.addCallback("sendToActionScript", receivedFromJavaScript);
                    if (checkJavaScriptReady()) {
                        output.appendText("JavaScript is ready.\n");
                    } else {
                        output.appendText("JavaScript is not ready, creating timer.\n");
                        var readyTimer:Timer = new Timer(100, 0);
                        readyTimer.addEventListener(TimerEvent.TIMER, timerHandler);
                        readyTimer.start();
                    }
                } catch (error:SecurityError) {
                    output.appendText("A SecurityError occurred: " + error.message + "\n");
                } catch (error:Error) {
                    output.appendText("An Error occurred: " + error.message + "\n");
                }
            } else {
                output.appendText("External interface is not available for this container.");
            }
        }
        private function receivedFromJavaScript(value:String):void {
            output.appendText("JavaScript says: " + value + "\n");
        }
        private function checkJavaScriptReady():Boolean {
            var isReady:Boolean = ExternalInterface.call("isReady");
            return isReady;
        }
        private function timerHandler(event:TimerEvent):void {
            output.appendText("Checking JavaScript status...\n");
            var isReady:Boolean = checkJavaScriptReady();
            if (isReady) {
                output.appendText("JavaScript is ready.\n");
                Timer(event.target).stop();
            }
        }
        private function clickHandler(event:MouseEvent):void {
            if (ExternalInterface.available) {
                ExternalInterface.call("sendToJavaScript", input.text);
            }
        }
    }
} 
```

和 html / JS

```
<html lang="en">
 <head>
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <title>ExternalInterfaceExample</title>
 <script language="JavaScript">
     var jsReady = false;
     function isReady() {
         return jsReady;
     }
     function pageInit() {
         jsReady = true;
         document.forms["form1"].output.value += "\n" + "JavaScript is ready.\n";
     }
     function thisMovie(movieName) {
         if (navigator.appName.indexOf("Microsoft") != -1) {
             return window[movieName];
         } else {
             return document[movieName];
         }
     }
     function sendToActionScript(value) {
         thisMovie("ExternalInterfaceExample").sendToActionScript(value);
     }
     function sendToJavaScript(value) {
         document.forms["form1"].output.value += "ActionScript says: " + value + "\n";
     }
 </script>
 </head>
 <body onload="pageInit();">

     <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
             id="ExternalInterfaceExample" width="500" height="375"
             codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab">
         <param name="movie" value="ExternalInterfaceExample.swf" />
         <param name="quality" value="high" />
         <param name="bgcolor" value="#869ca7" />
         <param name="allowScriptAccess" value="sameDomain" />
         <embed src="ExternalInterfaceExample.swf" quality="high" bgcolor="#869ca7"
             width="500" height="375" name="ExternalInterfaceExample" align="middle"
             play="true" loop="false" quality="high" allowScriptAccess="sameDomain"
             type="application/x-shockwave-flash"
             pluginspage="http://www.macromedia.com/go/getflashplayer">
         </embed>
     </object>

     <form name="form1" onsubmit="return false;">
         <input type="text" name="input" value="" />
         <input type="button" value="Send" onclick="sendToActionScript(this.form.input.value);" /><br />
         <textarea cols="60" rows="20" name="output" readonly="true">Initializing...</textarea>
     </form>

 </body>
 </html> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-14T12:48:38.010

您提供的问题描述不完整，无法得出您面临问题的任何结论。

这是我创建的工作测试代码 - 使用您提供的部分代码 -

HTML Header 标记中的 JavaScript 函数

```
<script type="text/javascript">
      function callExternalInterface() {
         thisMovie("swf").methodName();
      }

      function thisMovie(movieName) {
        if(navigator.appName.indexOf("Microsoft") != -1) {
           return window[movieName]
        } else {
           return document[movieName]
        }
       }
</script> 
```

以以下方式嵌入的 Flash 对象：

```
<body bgcolor="#ffffff" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
        <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" id="swf" width="550" height="400" align="middle">
            <param name="allowScriptAccess" value="Always" />
            <param name="movie" value="AS3-JS.swf" />
            <param name="quality" value="high" />
            <param name="bgcolor" value="#ffffff" />
            <embed src="AS3-JS.swf" quality="high" bgcolor="#ffffff" width="550" height="400" swLiveConnect=true id="swf" name="swf" align="middle" allowScriptAccess="Always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" /> 
```

和 AS 类文件

```
package  {

import flash.display.MovieClip;
import flash.external.ExternalInterface;

public class Main extends MovieClip {

    public function Main() 
    {
        // constructor code
        ExternalInterface.addCallback("methodName",methodName);
    }

    private function methodName():void
    {
        msg_txt.htmlText = "Called"
    }
} 
```

}

# asp.net - 更改密码控制

> ID：10050564
> 
> 赞同：1
> 
> 时间：2012-04-07T00:04:57.397
> 
> 标签：asp.net, controls, styling

我正在使用 ChangePassword ASP.NET 控件。

正如预期的那样，当不满足其中一项要求（最小密码长度、确认密码不匹配、密码强度不够好......）时，会出现红色的错误消息。

![级联错误消息 = BAD](../Images/9d187a2fabd8d4e2aa599f9199cb9416.png)

当有多个错误时，它们似乎只是连接在一行上。这看起来很丑陋，而且杂乱无章。

当有 2 个或更多错误时，我该怎么做，每个错误都在自己的行上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T00:33:01.200

您可以更改[`ChangePassword.FailureTextStyle`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.changepassword.failuretextstyle.aspx)属性。

> 获取对 Style 属性集合的引用，这些属性定义 ChangePassword 控件上错误消息的外观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T17:27:20.097

我很抱歉。

事实证明，我的 ChangePasswordFailureText 完全设置为：

> 密码错误或新密码无效。新密码长度最小值：{0}。需要非字母数字字符：{1}。

这是不可能分开的。

# internet-explorer-9 - 当我点击“开始调试”时，IE9 开发人员工具栏取消固定

> ID：10050567
> 
> 赞同：1
> 
> 时间：2012-04-07T00:05:57.267
> 
> 标签：internet-explorer-9, ie-developer-tools

当我在 IE9 开发人员工具栏上点击“开始调试”时，IE 将工具栏取消固定为浮动模式，并使其无法重新固定。

有人解决了这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T00:28:24.740

您可以通过单击“停止调试”按钮启用重新固定按钮。

# iphone - 我正在尝试将 UIActivityIndi catorView 居中在 UITableView 上，但它具有上边距

> ID：10050568
> 
> 赞同：3
> 
> 时间：2012-04-07T00:06:14.770
> 
> 标签：iphone, objective-c, xcode

我在雪豹上使用 Xcode 4.2。我正在尝试做的事情。基本上，我有一个带有表格视图的主视图控制器。为了填充表格视图，我需要调用 API 并从那里下载信息。

从 API 下载数据时，我想显示一个活动指示器，以便让用户知道正在发生某些事情并且应用程序没有卡住。

我所做的是我在表格视图上创建了一个新的 UIView，带有 alpha 0.5，并在其中间放置了一个活动指示器。这是我在主控制器视图加载时执行的代码：

```
// Show the activity indicator
self.overlayView = [[UIView alloc] init];
self.overlayView.backgroundColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:0.5];
self.overlayView.frame = self.tableView.frame;
self.activityIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
CGRect frame = self.overlayView.frame;
self.activityIndicator.center = CGPointMake(frame.size.width/2, frame.size.height/2);
[self.overlayView addSubview:self.activityIndicator];
[self.activityIndicator startAnimating];
[self.tableView addSubview:self.overlayView]; 
```

当从 API 加载数据时，我隐藏了覆盖视图和活动指示器：

```
[self.activityIndicator removeFromSuperview];
[self.overlayView removeFromSuperview]; 
```

它工作正常，但问题是覆盖视图没有正确对齐，它有一个上边距并且看起来不太好。这是它的外观：

![在此处输入图像描述](../Images/a078b99fd0e73921b57823af075028d4.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T00:08:25.680

不要使用

```
self.overlayView.frame = self.tableView.frame; 
```

改为使用

```
self.overlayView.frame = self.tableView.bounds; 
```

看起来你的 tableView 有 origin.y = 20.0f;

* * *

## 其他注意事项

*   [UIView](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-BBCDCECG)的指定初始化程序是`initWithFrame:`您应该使用它。

*   你可以简单地这样

    ```
     self.activityIndicator.center = CGPointMake(frame.size.width/2, frame.size.height/2); 
    ```

    至

    ```
     self.activityIndicator.center = self.overlayView.center; 
    ```

# objective-c - 如何在 Objective-C 中定义具有属性的协议？

> ID：10050569
> 
> 赞同：0
> 
> 时间：2012-04-07T00:06:22.263
> 
> 标签：objective-c

我试图强制协议的所有实现者实现只读属性。这是我的尝试：

```
@protocol Foo
@property(readonly) BOOL isPending;
@end

@interface Bar <Foo>
@end

@implementation Bar
- (BOOL) isPending {
    return NO;
}
@end 
```

为什么我在协议文件中收到警告？

> 属性“isPending”需要定义方法“isPending”

这是一个协议！协议不应该实现这些功能！实现协议的类应该实现功能，这正是我所做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T00:14:31.703

我无法重现您在 Xcode 4.3.2 下报告的问题。是否有可能您已经声明了要实现的东西`Foo`但忽略了为其添加吸气剂`isPending`？诊断可能是添加`- (BOOL) isPending`到协议中代替`@property`并查看是否有任何差异。即使使用完全声明的 getter 和 setter，您仍然可以使用点语法，因此它不应该对程序的任何其他部分产生语法差异。

# jquery - 每个（）函数。有人可以告诉我如何缩短此代码

> ID：10050571
> 
> 赞同：1
> 
> 时间：2012-04-07T00:06:28.543
> 
> 标签：jquery

我在下面的代码工作正常，但我相信它可以更加精简。

无论屏幕大小如何，该脚本基本上都会调整图像的大小并将其水平放置在其包含 div 的中心。

函数“resizeBg”中的两个函数是相同的，只是它们指向不同的 div（“.block1”和“.block2”），其中包含具有不同类（“.bg1”和“.bg2”）的图像。

我需要将函数 resizeBG 单独应用于每个 div。一张图像可能是纵向的，而另一张可能是横向的，因此结果会因图像比例而异。这是我现在可以让它工作的唯一方法，但我意识到它可能会更简单/更整洁。

HTML

```
<div class="block block1">
    IMAGE
</div>
<div class="block block2">
    IMAGE
</div> 
```

CSS

```
.block1 {background: #000000;}
.block2 {background: ffffff;}

.block {
    float: left;
    width: 50%;
    height: 100%;
    overflow: hidden;
    }

.bgwidth { 
  width: 100%;
  }

.bgheight { 
  height: 100%;
  } 
```

jQuery

```
jQuery(window).load(function() {
// FULLSCREEN BACKGROUND IMAGE
var theWindow = $(window);
var block1 = $('.block1');
bg1 = block1.children(".bg1");
var block2 = $('.block2');
bg2 = block2.children(".bg2");
aspectRatio1 = bg1.width() / bg1.height();
aspectRatio2 = bg2.width() / bg2.height();

function resizeBg() {

    $('.block1').each(function() {
        if ((block1.width() / block1.height()) < aspectRatio1) {
            bg1.removeClass('bgwidth').addClass('bgheight');
            if(bg1.width() > block1.width()) {
                bg1.each(function(){
                    //get width (unitless) and divide by 2
                    var hWide = ($(this).width() - block1.width())/2;
                    // attach negative and pixel for CSS rule
                    hWide = '-' + hWide + 'px';
                    $(this).addClass("js-fix").css({
                        "margin-left" : hWide
                        });
                    });
                }
            else {
                bg1.each(function(){
                    $(this).removeClass("js-fix").css({
                        "margin-left" : 0 + 'px'
                        });
                    });
                };
        } else {
            bg1.removeClass('bgheight').addClass('bgwidth');

            bg1.each(function(){
                $(this).removeClass("js-fix").css({
                    "margin-left" : 0 + 'px'
                });
            });
        }

    });

    $('.block2').each(function() {
        if ((block2.width() / block2.height()) < aspectRatio2) {
            bg2.removeClass('bgwidth').addClass('bgheight');
            if(bg2.width() > block2.width()) {
                bg2.each(function(){
                    //get width (unitless) and divide by 2
                    var hWide = ($(this).width() - block2.width())/2;
                    // attach negative and pixel for CSS rule
                    hWide = '-' + hWide + 'px';
                    $(this).addClass("js-fix").css({
                        "margin-left" : hWide
                        });
                    });
                }
            else {
                bg2.each(function(){
                    $(this).removeClass("js-fix").css({
                        "margin-left" : 0 + 'px'
                        });
                    });
                };
        } else {
            bg2.removeClass('bgheight').addClass('bgwidth');

            bg2.each(function(){
                $(this).removeClass("js-fix").css({
                    "margin-left" : 0 + 'px'
                });
            });
        }

    });

}

theWindow.resize(function () {
    resizeBg();
}).trigger("resize"); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T00:24:27.290

所以我[试了一下](http://jsfiddle.net/edelman/muUU5/)。基本上你只需要重构你的代码，让它更通用，并且可以在你的 jQuery 对象中的每个元素上工作。我不确定这是否正是您想要的，我并没有真正关注代码中发生的事情，我只是对其进行了通用化，这样您就不必两次编写相同的代码。它可能可以进一步重构，这只是为了让您了解应该做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T01:35:48.073

```
$('.block').each(function() {
    var $block = $(this), 
    blockWidth = $block.width(),
    blockHeight = $block.height(),
    blockRatio = blockWidth / blockHeight,
    className = $block.attr('class'),
    $bg = $('.bg' + className.substr(className.length-1)),
    bgWidth = $bg.width(),
    bgHeight = $bg.height(),
    bgRatio = bgWidth / bgHeight;

    if (blockRatio < bgRatio) {
        $bg.removeClass('bgwidth').addClass('bgheight');
        if(bgWidth > blockWidth) {
            $bg.addClass('js-fix')
            .css('margin-left',
            '-' + ((bgWidth - blockWidth)/2) + 'px';
        } else {
            $bg.removeClass('js-fix').css('margin-left','0');
        }
    } else {
        $bg.removeClass('bgheight').addClass('bgwidth')
        .removeClass('js-fix').css('margin-left','0');
    }
}); 
```

仅供参考：0px === 0pt === 0em === 0

# rally - 使用 Rally API 在 backlog 底部创建工件

> ID：10050574
> 
> 赞同：1
> 
> 时间：2012-04-07T00:07:13.347
> 
> 标签：rally

我们已经使用 Ruby Rally API 来创建用户故事，但这些似乎默认位于 backlog 的顶部。有没有办法使用 API / create 并让它出现在积压的底部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T01:32:08.573

Rally Webservices API 中有一个 REST 端点来“排名高于”或“排名低于”。例如，您可以使用以下 REST 请求来重新排列一个缺陷，相对于另一个您知道其引用的缺陷：

[https://rally1.rallydev.com/slm/webservice/1.25/defect/3850797404.js?rankAbove=/defect/3859484383.js&fetch=Name,FormattedID,Rank](https://rally1.rallydev.com/slm/webservice/1.25/defect/3850797404.js?rankAbove=/defect/3859484383.js&fetch=Name,FormattedID,Rank)

不幸的是，标准的[Rally Ruby REST API](http://developer.rallydev.com/help/ruby-toolkit-rally-rest-api)无法访问此端点。

但是，如果您有兴趣，这里有一个新的“alpha” [Rally Ruby REST API](http://developer.rallydev.com/help/ruby-toolkit-rally-rest-api-json)，它使用 JSON 而不是 XML 序列化请求。Ruby JSON API 可以使用“rankAbove 和 rankBelow”端点。基于 JSON 的 Ruby API 的另一个优点是，因为 JSON 比 XML 紧凑得多，它提供了优于旧的基于 XML 的 Ruby REST API 的性能优势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T02:12:58.100

添加到 Mark 的注释中，在 rally_api（新 gem）中，您可以查询按等级排序的对象以获得最低的项目。然后，如果您有最低的 objectA 或作为剪切线的占位符故事，您可以调用： someobject.rank_below(objectA)

# html - 是否建议结合：JSF 2.0 + Facelets + HTML5/CCS3/JavaScript？

> ID：10050575
> 
> 赞同：3
> 
> 时间：2012-04-07T00:07:23.073
> 
> 标签：html, css, jsf-2, twitter-bootstrap, facelets

我最近开始使用 JSF 2.0 开发一个 Web 应用程序，但是我是 Web 开发的新手，而且该领域（即使仅限于 JVM 解决方案）结果非常广泛......可供选择的技术数量有点压倒性.

我的担忧/问题是，混合/集成以下技术是否可行/建议？

*   CCS3 + HTML5 + JavaScript（特别是使用 Twitter Bootstrap 框架）
*   JSF 2.0
*   小面

如果是这样，当与网页设计师一起工作时，JSF 2.0 将使我变得更加困难的事情是什么。例如，当将网页设计集成到应用程序中时，我想我必须做一些修改：插入 JSF 标记和 EL 表达式，以某种特殊方式处理 JavaScript（？），处理 HTML 标记的不兼容性（？）等.

以下问题很有帮助，但并未阐明所有问题：

*   [Java Server Faces 2.0 的主要缺点是什么？](https://stackoverflow.com/questions/3623911/what-are-the-main-disadvantages-of-java-server-faces-2-0)
*   [JSF/Facelets：为什么将 JSF/Facelets 与 HTML 标签混合不是一个好主意？](https://stackoverflow.com/questions/5474178/jsf-facelets-why-is-it-not-a-good-idea-to-mix-jsf-facelets-with-html-tags)
*   [是否可以在 HTML 4/5 中使用 JSF+Facelets？](https://stackoverflow.com/questions/2935759/is-it-possible-to-use-jsffacelets-with-html-4-5)

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T01:27:29.707

You seem to not fully understand the point of JSF. JSF is basically just a HTML/CSS/JS code producer. It really doesn't matter to JSF what version the produced code is. JSF doesn't run in webbrowser or something. It runs in webserver. All the webbrowser retrieves is just the JSF-produced HTML/CSS/JS code. You just have to make sure that *that* HTML/CSS/JS code is understood by the particular webbrowser.

# c# - 如何从 RadListViewItemEventArgs 拆箱对象？

> ID：10050577
> 
> 赞同：0
> 
> 时间：2012-04-07T00:07:37.547
> 
> 标签：c#, asp.net, listview, telerik

我有一个 RadListView，它加载了一个名为“FullTicket”的对象列表，或者换句话说 ListView.DataSource = List。在 ItemDataBound 事件中，我试图对每个项目做一些事情，但不幸的是我似乎无法拆箱该对象。

所以我有（对象发送者，RadListViewItemEventArgs e），我正在尝试获取实际对象，所以我尝试了这个

```
var itemObj = (FullTicket)e.Item; 
```

但它说“无法将类型从 RadListViewItem 转换为 FullTicket”。我在 e.Item.* 内部环顾四周，看看是否有任何其他属性可能实际持有该对象，但那里没有任何东西。有谁知道如何得到我的对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T03:28:02.397

试试这个：

```
var listViewDataItem = e.Item as RadListViewDataItem;
if (listViewDataItem != null)
{
    var itemObj = listViewDataItem.DataItem;
    // ...
} 
```

`RadListViewDataItem`派生`RadListViewItem`并添加`DataItem`包含您的对象的属性。

# apache-flex - Flex MXML 布局问题

> ID：10050578
> 
> 赞同：0
> 
> 时间：2012-04-07T00:07:42.813
> 
> 标签：apache-flex, layout, mobile, mxml

所以我想要的是左边的 ToggleSwitch 和右边的 Button。当屏幕太小时，我希望按钮变小并显示一些“...”。所以我用：

```
<s:Group width="100%">
    <s:layout>
        <s:HorizontalLayout verticalAlign="middle"/>
    </s:layout>
    <s:ToggleSwitch />
    <s:Spacer width="100%"/>
    <s:Button label="TestTestTestTestTest"/>
</s:Group> 
```

这工作正常，直到屏幕太小以至于按钮中的整个标签文本都不适合。然后两个组件都在屏幕外左右浮动。

所以我尝试了使用基本布局：

```
<s:Group width="100%">
    <s:ToggleSwitch left="0" />
    <s:Button right="0" label="TestTestTestTestTest"/>
</s:Group> 
```

也不起作用。当屏幕太小时，按钮浮动在切换开关上。那么我怎样才能让它工作呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T04:47:45.900

您可能快到了，如果您想并排，只需从 HGroup 开始，并防止其父级的布局“边界违规”，请打开 clipAndEnableScrolling 属性。

```
<s:HGroup width="100%" clipAndEnableScrolling="true">
    <s:ToggleSwitch />
    <s:Rect width="100%" />
    <s:Button label="TestTestTestTestTest"/>
</s:HGroup> 
```

# android - Android 微调器项目长按/触摸

> ID：10050579
> 
> 赞同：1
> 
> 时间：2012-04-07T00:07:42.830
> 
> 标签：android, click, spinner

我的应用程序微调器中有。我想检测对其项目的长按/触摸。我试过这个：

```
 ipSpinner.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener() {

        public boolean onItemLongClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
            System.out.println("long click on position: " + arg2);
            return true;
        }
    }); 
```

但是这段代码不起作用，我不知道为什么。

我需要检测长按，因为我想启用删除微调器的每个项目。还有另一种删除项目的聪明方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:31:16.530

正如 Jason Robinson 所指出的，Spinner 尚不支持 Long Click。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-04T07:23:03.873

1）通过扩展微调器创建一个自定义微调器类，

```
public class CCSpinner extends Spinner {
    public CCSpinner(Context context) {
        super(context);
    }

    public CCSpinner(Context context, int mode) {
        super(context, mode);
    }

    public CCSpinner(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public CCSpinner(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
    }

    public CCSpinner(Context context, AttributeSet attrs, int defStyleAttr, int mode) {
        super(context, attrs, defStyleAttr, mode);
    }

    @Override
    public void onDetachedFromWindow() {
        super.onDetachedFromWindow();
    }
} 
```

在您的 xml 视图中使用上述微调器。

2）定义一个接口来处理点击，

```
 public interface ClickListener {
        void onItemLongClicked(View view);
        void onItemClicked(View view);
    } 
```

3) 在您的微调器适配器类中，在 getView 和 getDropDownView 中执行这些操作

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        //ususal stuffs
        convertView.setTag(R.string.click_tag, position);
        convertView.setClickable(false);
        convertView.setLongClickable(false);

        return convertView;
    }

    @Override
    public View getDropDownView(int position, View convertView, ViewGroup parent) {
        //ususal stuffs
        convertView.setTag(R.string.click_tag, position);

        convertView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                if (clickListener != null) {
                    clickListener.onItemClicked(v);
                }
            }
        });

        convertView.setOnLongClickListener(new View.OnLongClickListener() {
            @Override
            public boolean onLongClick(View v) {
                if (clickListener != null) {
                    clickListener.onItemLongClicked(v);
                }
                return true;
            }
        });

        return convertView;
    } 
```

4) 在实例化适配器时，传递我们创建的 ClcikListener 接口。

5）并在实现类中执行以下操作，

```
@Override
    public void onItemLongClicked(final View view) {
        mPSpinner.onDetachedFromWindow();
        final int pos = (int) view.getTag(R.string.click);
        mPSpinner.setSelection(pos);
    }

@Override
public void onItemClicked(final View view) {
    mPSpinner.onDetachedFromWindow();
    int pos = (int) view.getTag(R.string.click);
    mPSpinner.setSelection(pos);
} 
```

# javascript - 无法弄清楚如何将方法添加到字符串

> ID：10050580
> 
> 赞同：0
> 
> 时间：2012-04-07T00:08:09.440
> 
> 标签：javascript

我的实际任务是这样的：

> 向 String 添加一个名为 format 的新方法，该方法接受一些颜色、字体（斜体、粗体、删除线或无）、字体大小以及是否以大写或小写显示。
> 
> 使用新的格式化方法，格式化字符串“Jose 在圣何塞生活了很多年”。如蓝色、斜体、12 号和全部大写。

使用提供的注释（以及我通过谷歌搜索找到的网站），我唯一能想到的是：

```
String.prototype.format = function() {
    string = string.fontcolor("Blue")
    string = string.italics()
    string = string.fontsize(12)
    string = string.toUpperCase()
    }
var string = "Jose lived in San Jose for many years."
document.write(string.format()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T00:11:54.747

好吧，首先这个函数不带任何参数，那么你怎么能让它带颜色、字体、大小或大小写呢？？？

此外，要获取调用函数的字符串，请使用`this`. 但是，您无法更改`this`，因此您必须在最后使用临时变量`return`。

这些方面的东西：

```
String.prototype.format = function(col,font,size,caps) {
    var str = this;
    // do stuff to str
    return str;
}; 
```

我将由你来决定该怎么做`str`。

# java - ProgressDialog 没有立即显示

> ID：10050581
> 
> 赞同：0
> 
> 时间：2012-04-07T00:08:11.810
> 
> 标签：java, android, android-asynctask, progressdialog, android-ui

我正在尝试从 Internet 获取数据，对其进行解析，然后将数据显示给用户。该动作通常需要 3 秒左右，我想在一个微调器 ProgressDialog 中显示一条消息，说明我正在加载数据。问题是 ProgressDialog 仅在加载几乎完成时显示。这是我的代码

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button load_routes = (Button)findViewById(R.id.load_routes);

    load_routes.setOnClickListener(new View.OnClickListener()
    {
        public void onClick(View v)
        {
            task_complete = false;
            progressBar = new ProgressDialog(v.getContext());
            progressBar.setCancelable(false);
            progressBar.setMessage("Fetching routes data ...");
            progressBar.setProgressStyle(ProgressDialog.STYLE_SPINNER);
            progressBar.show();

            if(haveNetworkConnection())
            {
                loading_routes_data(v);
            }
            else
            {
                progressBar.dismiss();
            }
        }
    });
} 
```

这是我调用 onclick 的函数

```
private void loading_routes_data(View v)
{
    try
    {
        new Thread(new Runnable()
        {
            public void run()
            {
                while(!task_complete)
                {
                    refresh_routes();
                    try
                    {
                        Thread.sleep(1000);
                    }
                    catch(InterruptedException e)
                    {
                        e.printStackTrace();
                    }
                }
                runOnUiThread(new Runnable()
                {
                    public void run()
                    {
                        progressBar.dismiss();
                    }
                });
            }
        }).start();
    }
    catch(Exception e)
    {
    }

    while(!task_complete)
    {
    }
} 
```

我的`refresh_routes()`函数获取数据，解析它然后设置`task_complete`为`true`，我什至不确定是否应该将其保留在 while 循环中。

所以这是我的大问题。我想`ProgressDialog`在按钮单击时立即显示，然后我想调用`refresh_routes()`，一旦`refresh_routes()`完成，我想摆脱进度对话框。但我不确定如何去做。

如果有人能以一些文章为例或类似的东西向我展示如何解决问题，我将不胜感激。先感谢您 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T00:33:42.760

您通过`while(!task_complete)`在方法结束时调用来锁定 UI 线程。你真的应该使用这样[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)的操作。这是您的`AsyncTask`外观：

```
private class MyAsyncTask extends AsyncTask<Void, Void, Void> {

    private ProgressDialog progressDialog;
    private Context context;

    public MyAsyncTask(Context context) {

        this.context = context;
    }

    @Override
    protected void onPreExecute() {

        super.onPreExecute();
        progressDialog = ProgressDialog.show( context, null, "Fetching routes data ..." );
    }

    @Override
    protected Void doInBackground( Void... params ) {

        while (!task_complete) {
            refresh_routes();
            try {
                Thread.sleep( 1000 );
            }
            catch (InterruptedException e) {
                e.printStackTrace();
            }
        }

        return null;
    }

    @Override
    protected void onPostExecute( Void result ) {

        super.onPostExecute( result );
        progressDialog.dismiss();
    }
} 
```

要执行此操作，您将执行以下操作：

```
new MyAsyncTask( this ).execute(); 
```

我不确定你的`refresh_routes()`方法是如何工作的，但你可以考虑将它的功能移到`doInBackground()`方法中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T00:26:17.430

使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)来执行此操作。它为您提供了在 Activity 中执行多线程的强大功能。

# windows - QNetworkRequest 不工作

> ID：10050592
> 
> 赞同：2
> 
> 时间：2012-04-07T00:10:09.120
> 
> 标签：windows, qt, qt4, qnetworkaccessmanager, qnetworkrequest

我有一个 Qt 应用程序，我在 Windows 7 x64 SP1 下使用 Qt 4.8.1 部署，但使用 32 位编译。应用程序使用`QNetworkAccessManager`、`QNetworkRequest`和`QNetworkReply`通过 HTTPS 与服务器通信。我已经在五台不同的机器上成功地测试了这个连接。在第六台机器上，我去测试这个连接失败了`QNetworkReply::NetworkError UnknownNetworkError`。这台机器可以在网络浏览器中访问 URL，并且通信正常。此外，我能够在同一网络上使用不同的计算机并成功地与我的应用程序建立连接。有没有人有任何想法可能导致这种行为？此外，我在 Qt 版本 4.7.4 和 4.8.1 中看到了这种行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T00:39:27.717

这是一个 SSL 问题。显然 Qt 需要 OpenSSL dll。一旦我包括了这些，一切都很好。

# sql-server-2005 - 具有可变列数的表的存储过程

> ID：10050593
> 
> 赞同：0
> 
> 时间：2012-04-07T00:10:15.543
> 
> 标签：sql-server-2005, stored-procedures

当结果可以具有可变数量的列时，如何将 SP 的输出插入到表中？

此 SP 创建一个表，其中列数可能会有所不同。我需要将结果放入一个临时表中，以便我可以使用它来查询报告。如何创建可以处理 SP 输出的表？

```
 DECLARE @cols AS VARCHAR(MAX),
 @query  AS VARCHAR(MAX); 

 SET @cols = STUFF((SELECT distinct ',' + QUOTENAME(c.question) 
        FROM temp_SURVEY_DATA c
        FOR XML PATH(''), TYPE
        ).value('.', 'VARCHAR(MAX)') ,1,1,'')

 set @query =  'SELECT responseid, moduleid, responsedatetime, ' + @cols + ' from 
        (select question, response, responsedatetime, responseid, moduleid
            from temp_SURVEY_DATA) x
        pivot 
        ( max(response)
            for question IN(' + @cols + ') ) p '

          execute(@query) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T06:07:19.207

使用专门用于此类事情的静态表并将结果集插入其中，而不是将行返回给调用者：

```
DECLARE @cols AS VARCHAR(MAX),
        @query  AS VARCHAR(MAX); 

 SET @cols = STUFF((SELECT distinct ',' + QUOTENAME(c.question) 
        FROM temp_SURVEY_DATA c
        FOR XML PATH(''), TYPE
        ).value('.', 'VARCHAR(MAX)') ,1,1,'');

**EXECUTE ('IF OBJECT_ID(''temp_SURVEY_DATA_pivoted'') IS NOT NULL
  DROP TABLE temp_SURVEY_DATA_pivoted');**

set @query =  'SELECT responseid, moduleid, responsedatetime, ' + @cols + '
  **INTO temp_SURVEY_DATA_pivoted**
  from 
        (select question, response, responsedatetime, responseid, moduleid
            from temp_SURVEY_DATA) x
        pivot 
        ( max(response)
            for question IN(' + @cols + ') ) p '

          execute(@query) 
```

或者在使用动态脚本而不是在显示数据之前立即放弃动态脚本的想法。

# apache-pig - 简化元组模式

> ID：10050594
> 
> 赞同：1
> 
> 时间：2012-04-07T00:10:31.857
> 
> 标签：apache-pig

经过一长串命令后，一个开始很简单的模式，例如

```
A: {state: chararray,m_inc: int,s_err1: bytearray,interval: int} 
```

最终看起来像这样：

```
describe L;
L: {null::F::null::null::state: chararray,null::F::null::null::m_inc: int,null::F::null::null::s_err1: bytearray,null::F::null::null::interval: int,m_inc_nrmlzd: double} 
```

有没有一种简单的方法可以将这些列挖掘出来，使其回到更简单的模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:10:26.807

你可以尝试做这样的事情：

```
L = FOREACH L GENERATE null::F::null::null::state AS state:chararray, null::F::null::null::m_inc AS m_inc:int, ... 
```

# architecture - AWS 可扩展架构设计

> ID：10050601
> 
> 赞同：3
> 
> 时间：2012-04-07T00:12:00.017
> 
> 标签：architecture, amazon-web-services

我目前正在使用 AWS 基础设施实施我的第一个 Web 应用程序并学习基础知识。我遇到了一个设计问题，所以想出了以下场景来说明我的问题：

假设我正在制作一个 Web 应用程序，将网站保存/打印为 pdf 并将其存储在 S3 上。前端有一个单一的形式。用户将输入他们想要保存为 pdf 的站点的 url，然后单击提交。该应用程序应将给定 url 处的页面打印为 pdf 并将文件呈现给用户。

为了使应用程序具有可扩展性，我想象单击提交会将 SQS 消息发送到带有要处理的 url 的队列。然后，一群工人可以从这个队列中消费，创建 pdf 并将它们存储在 S3 中，然后将 S3 密钥/路径存储到 SimpleDB。我遇到的问题是工作人员如何通知网络应用程序处理完成？

示例设计： ![示例设计](../Images/3a626636742703168a0f7abb5cfa5a03.png)

我想 Web App 可以不断轮询 SimpleDB，直到出现 S3 密钥的条目，但是这个解决方案似乎有点笨拙。我觉得这是一个必须经常遇到的模式/问题。谁能提供一种通用的方法来解决这个问题？

此外，云中常见设计模式的任何推荐资源都将非常有益。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T07:49:16.887

除非您使用 WebSockets 之类的东西，否则我认为这不是问题。当用户发出请求时，Web 应用程序将轮询 SimpleDB（就像您提到的那样）以检查处理是否完成（或者是否有错误）。使用 WebSockets 之类的东西，您可以拥有另一个队列，Web 应用程序将订阅该队列，以便在处理完成时收到通知，然后通知浏览器它已完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T06:34:56.287

正如您所说，您基本上已经解决了除了前端之外的所有问题，前端需要轮询我们的后端 API 以查看媒体是否准备好。在我的公司，我们按照你上面说的做，渲染网页截图，也做 PDF 的 jpg 快照，办公文档，处理编码视频和音频。

我们使用 ajax 进行更新，并将它们设置为每秒 ping 几次，然后逐渐回退到每秒一次，每隔几秒一次，以免对我们的服务器造成太大压力。正如另一个答案所提到的，另一个选项是使用 websockets，它是与服务器的持久连接，您可以从中“推送”和“拉取”数据。不过，大多数人都使用 ajax 轮询方法。对于像 Apache 这样的旧技术，这对于数千个连接来说可能是个大问题，但对于像 Nginx、Node 和中间缓存这样的东西来说，这并不是什么大问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-22T11:38:07.173

您可以将对象（如标记）存储在 S3 中，然后轮询 S3 而不是简单的 DB。这样你就可以避免给你的 SimpleDB 带来压力，你的轮询性能会更稳定。

您可以使用这种方法从您的 Web 应用程序实例进行轮询，甚至从 ajax 层进行轮询。（尽管后者不是最佳选择，因为这些调用中的任何错误都不会记录在您的服务器中）

# wordpress - 301 重定向 – Tumblr 到 Wordpress

> ID：10050602
> 
> 赞同：1
> 
> 时间：2012-04-07T00:12:02.123
> 
> 标签：wordpress, .htaccess, http-status-code-301, tumblr

我已将博客从 tumblr 移至 wordpress，到目前为止，只有帖子已导入到新的 wordpress 设置中。剩下的就是做 301 重定向。

我对此知之甚少，因此我需要一些帮助。tumblr 中的帖子网址如下所示：

**example.com/post/[ID]/post-slug**

在这样的wordpress中：

**example.com/2012/04/07/post-slug**

后蛞蝓是平等的，所以我想应该有办法做到这一点。哦，如果重要的话，域是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T10:39:11.363

我用这段代码自己解决了这个问题：

```
RewriteRule ^/post/(.*?)/(.*?)$ /$2 [R=301,L] 
```

但正如我所说，我不擅长这个，所以如果有人有更好的东西，请告诉我。

# php - 使用 python 或 php 处理音频文件

> ID：10050606
> 
> 赞同：0
> 
> 时间：2012-04-07T00:14:09.330
> 
> 标签：php, python, algorithm, audio

我正在尝试找到一个可以处理音频文件的 PHP 或 Python 库。我需要遍历记录的电话并对其进行处理以删除那些具有某些特定模式的电话，例如仅哔声而不是人声。我认为可以通过比较音频文件中的幅度样本来实现。您知道有哪些图书馆可以提供帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T00:34:19.437

Python自带标准库[wave](http://docs.python.org/library/wave.html)模块，可以加载和解析.wav文件；检测哔声可能比您想象的要困难一些，但并不是非常困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T06:57:39.857

[Audiolab](http://cournape.github.com/audiolab/)是一个 python 库，可以将 AIFF、AU 和 WAV 文件直接加载到[numpy](http://www.numpy.org)数组中。

仅包含哔声的音频很可能具有相当简单的[功率谱](https://en.wikipedia.org/wiki/Power_spectrum)，可以使用`numpy.fft`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T07:08:36.810

有人向我推荐[pyaudiere](http://pypi.python.org/pypi/pyaudiere/0.2)，它可以“将声音缓冲区作为 float32 的 NumPy 数组传递”。我以前没用过，你可以试试。

我以前用[pymad](http://spacepants.org/src/pymad/)，可能有点旧，买起来很方便。

# objective-c - 如何在Objective-C（iPhone）中使用带有表格视图的两个不同的动态单元格？

> ID：10050607
> 
> 赞同：0
> 
> 时间：2012-04-07T00:14:15.310
> 
> 标签：objective-c, uitableview, tableview

我有一个标签栏控制器，里面只有两个按钮。每个都转到一个不同的表视图，但两个表视图都继承自我的 TableViewController.m 类。我在每个表格视图中有一个动态单元格。它们都有不同的名称（第一个是“地点列表”，第二个是“照片和地点列表”）。我想在每个选项卡中显示不同的内容（指向表格视图），但我不知道如何。我想我需要在我的控制器中识别我的动态单元格的名称来实现这一点，但我也不知道怎么做。请帮忙！这是 TableViewController.m 中的方法

```
- (UITableViewCell *)tableView:(UITableView *)sender 
          cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"Places List";

    UITableViewCell *cell = [sender dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [cities objectAtIndex:indexPath.row];
    cell.detailTextLabel.text = [restOfPlaces objectAtIndex:indexPath.row];
    return cell;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T01:26:41.960

You can either

1.  add an ivar to the `TableViewController` and set it to the tab index when it is instantiated

2.  Ask the tabBarController

    ```
    [self.tabBarController.viewControllers indexOfObject:self]; 
    ```

Both of these are ugly solutions and I would probably think about restructuring.

# console - 如何计算首选终端类型的排序列表？

> ID：10050609
> 
> 赞同：1
> 
> 时间：2012-04-07T00:14:27.707
> 
> 标签：console, terminal

为了知道默认配置什么终端，我希望构建一个排序的首选终端列表。

是否有比较，最好作为不同终端类型的表格，包括：`xterm` `xterm-new` `xterm-256color` `ansi` `vt100` `rxvt` `linux`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:16:44.563

根据当前的反馈，这是**推荐的排序列表**：

```
linux
xterm-256color
xterm-16color
xterm
安西
VT100
rxvt

```

为了确保我们正确排序，这里是规则：

```
linux > xterm
xterm > rxvt
xterm-256colors > xterm-16colors > xterm
ansi > vt100
VT102 > VT100

```

这是一个社区维基的答案，**欢迎您修补它**！

# r - 在 R 中处理大量数据和大量栅格？

> ID：10050611
> 
> 赞同：5
> 
> 时间：2012-04-07T00:14:33.400
> 
> 标签：r, memory-management, large-files, spatial, raster

G'day，我正在处理一个包含约 125,000 个经纬度位置和日期的大型数据集，用于物种存在/不存在记录。对于每个位置，我想计算出日期和日期前 3 个月内每个位置的天气情况。为此，我下载了在 5 年内获取数据的给定天气变量（例如，最高温度）的每日天气数据。我总共有 1,826 个光栅文件，都在 2-3mb 之间。

我曾计划堆叠所有光栅文件，然后从每个光栅 (1,826) 中为每个点提取一个值。这将产生一个庞大的文件，我可以用它来搜索我需要的日期。但是，这是不可能的，因为我无法堆叠那么多栅格。我尝试将栅格拆分为 500 个堆栈，这可行，但它生成的文件大约 1Gb 并且非常慢（行，125,000；列，500）。此外，当我尝试将所有这些文件带入 R 以创建大数据框时，它不起作用。

我想知道是否有办法在 R 中处理这么多数据，或者是否有一个包可以用来提供帮助。我可以使用像ff这样的包吗？有没有人有什么建议可以用一种不太耗电的方法来做我想做的事情？我曾考虑过类似 lapply 的功能，但以前从未使用过，也不确定从哪里开始。

任何帮助都会非常棒，提前感谢您的宝贵时间。我目前使用但没有成功的代码如下。

亲切的问候，亚当

```
library(raster)
library(rgdal)
library (maptools)
library(shapefiles)

# To create weather data files, first set the working directory to the appropriate location (i.e., maxt)
# list of raster weather files
files<- list.files(getwd(), pattern='asc')
length(files)

memory.size(4000)  
memory.limit(4000)

# read in lon/lat data
X<-read.table(file.choose(), header=TRUE, sep=',')
SP<- SpatialPoints(cbind(X$lon, X$lat)) 

#separate stacks into mannageable sizes
s1<- stack(files[1:500])
i1 <- extract( s1,SP, cellnumbers = True, layer = 1, nl = 500)
write.table(i1, file="maxt_vals_all_points_all_dates_1.csv", sep=",", row.names= FALSE, col.names= TRUE)
rm(s1,i1)
s2<- stack(files[501:1000])
i2 <- extract( s2,SP, cellnumbers = True, layer = 1, nl = 500)
write.table(i2, file="maxt_vals_all_points_all_dates_2.csv", sep=",", row.names= FALSE, col.names= TRUE)
rm(s2,i2)
s3<- stack(files[1001:1500])
i3 <- extract( s3,SP, cellnumbers = True, layer = 1, nl = 500)
write.table(i3, file="maxt_vals_all_points_all_dates_3.csv", sep=",", row.names= FALSE, col.names= TRUE)
rm(s3,i3)
s4<- stack(files[1501:1826])
i4 <- extract( s4,SP, cellnumbers = True, layer = 1, nl =325)
write.table(i4, file="maxt_vals_all_points_all_dates_4.csv", sep=",", row.names= FALSE, col.names= TRUE)
rm(s4,i4)

# read files back in to bind into final file !!! NOT WORKING FILES ARE TOO BIG!!
i1<-read.table(file.choose(),header=TRUE,sep=',')
i2<-read.table(file.choose(),header=TRUE,sep=',')
i3<-read.table(file.choose(),header=TRUE,sep=',')
i4<-read.table(file.choose(),header=TRUE,sep=',')

vals<-data.frame(X, i1, i2, i3 ,i4)
write.table(vals, file="maxt_master_lookup.csv", sep=",", row.names= FALSE, col.names= TRUE) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T07:01:56.173

我会一次提取一个光栅文件，然后将结果附加到文件中。

我在制作矩阵列表时作弊，但是由于 raster 可以采用文件名或矩阵（除其他外），并且您可以在字符向量上使用“[[”进行索引，因此它在您的情况下应该几乎相同。

```
files <- list(volcano, volcano * 2, volcano * 3)
library(sp)
SP <- SpatialPoints(structure(c(0.455921585146703, 0.237608166502031, 0.397704673508124, 0.678393354622703, 0.342820219769366, 0.554888036966903, 0.777351335399613, 0.654684656824567), .Dim = c(4L, 2L)))

library(raster)
for (i in seq_len(length(files))) {

    r <- raster(files[[i]])
    e <- extract(r, SP)
    ## print(e)  ## print for debugging
    write.table(data.frame(file = i, extract = e),"cellSummary.csv", col.names = i == 1, append = i > 1, sep = ",", row.names = FALSE)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-11T23:44:12.197

我正在使用并行处理和一种基于单元格数的裁剪形式。此函数将采用任何空间点或多边形，并从大型栅格堆栈中返回值。这是大型多边形的代码[好例子](https://gis.stackexchange.com/questions/130522/r-increase-speed-of-crop-mask-extract-raster-by-many-polygons/188834#188834)的变体。

对于我的数据，使用 extract 大约需要 350 秒，或者在 16 核 linux 服务器上需要 32 秒。希望它可以帮助某人！

```
 # Define Functions
  extract_value_point_polygon = function(point_or_polygon, raster_stack, num_workers){
          # Returns list containing values from locations of spatial points or polygons
          lapply(c('raster','foreach','doParallel'), require, character.only = T)
          registerDoParallel(num_workers)
          ply_result = foreach(j = 1:length(point_or_polygon),.inorder=T) %do%{
                print(paste('Working on feature: ',j,' out of ',length(point_or_polygon)))
                get_class= class(point_or_polygon)[1]
                if(get_class=='SpatialPolygons'|get_class=='SpatialPolygonsDataFrame'){
                    cell = as.numeric(na.omit(cellFromPolygon(raster_stack, point_or_polygon[j], weights=F)[[1]]))}
                if(get_class=='SpatialPointsDataFrame'|get_class=='SpatialPoints'){
                    cell = as.numeric(na.omit(cellFromXY(raster_stack, point_or_polygon[j,])))}
                if(length(cell)==0)return(NA)
                r = rasterFromCells(raster_stack, cell,values=F)
                result = foreach(i = 1:dim(raster_stack)[3],.packages='raster',.inorder=T) %dopar% {
                   crop(raster_stack[[i]],r)
                }
                result=as.data.frame(getValues(stack(result)))
                return(result)
          }
          endCluster()
          return(ply_result)
  } 
```

# ios - 自定义字体未显示在设备上，但在模拟器上显示

> ID：10050613
> 
> 赞同：12
> 
> 时间：2012-04-07T00:15:33.720
> 
> 标签：ios, iphone, cocoa-touch, uifont, custom-font

我一直在玩 iOS 中的自定义字体，除了自定义字体不会在我的任何设备上显示之外，我已经弄清楚了其中的大部分内容。

1.  我已将字体添加到项目文件的根目录中。
2.  将其添加到数组或“应用程序提供的字体”下的 info.plist 文件中
3.  检查原始文件和我添加到 info.plist 文件中的区分大小写是否相同。
4.  用于`[playMenuBtn.titleLabel setFont:[UIFont fontWithName:@"fontname" size:40]];`使字体工作。

当我在模拟器中运行我的应用程序时，一切看起来都很好并且可以正常工作。但是，一旦我在物理设备上运行它，它就会以默认大小显示默认字体。

如果我使用：
`UIFont *font = [UIFont fontWithName:@"VINCASTENCIL" size:20]; NSLog(@"Font:%@", font);`

然后模拟器返回： `2012-04-07 01:10:41.544 AppName[47412:f803] Font:<UICFFont: 0x683e040> font-family: "VINCA STENCIL"; font-weight: normal; font-style: normal; font-size: 20px`

设备返回的位置： `2012-04-07 00:42:56.358 AppName[5079:707] Font:(null)`

我已经尝试了一切，包括尝试 FontBook 告诉我可以命名字体的所有名称。我知道它是免费的，而且没有许可证。

任何帮助都将不胜感激，因为它让我发疯，我真的不想为所有这些使用图像，因为本地化会很痛苦！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-07T11:04:34.543

是的，我刚刚设法让这个工作。我所做的一切都是正确的，但由于某种原因，它没有将我的字体文件添加到“目标”->“构建阶段”->“复制捆绑资源”。通过手动将其添加到此列表中，该字体随后会显示在设备上。

这是该项目第二次没有在此处自动添加文件（之前是通过我添加的类完成的，但它没有）所以我认为这是我的项目有问题，或者是 Xcode 中的错误。

感谢大家的建议和帮助。:-D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-25T22:40:41.663

是的，按照上面提到的所有指示，你应该没问题。其他需要注意的事项：区分大小写。在您的 *.plist 文件和`Fonts provided by application`. 模拟器可能会忽略大小写，但设备不会。例如，“Facebook”与“FaceBook”不同。（这导致字体在模拟器中工作，但不是设备！）

# ruby-on-rails - Rails 控制台的 YAML 输出

> ID：10050615
> 
> 赞同：5
> 
> 时间：2012-04-07T00:16:05.023
> 
> 标签：ruby-on-rails, ruby, console, yaml

当在 rails 控制台中执行命令`y Grau.all`时，我得到这些奇怪`!binary`的字符串而不是属性的名称。知道如何解决这个问题吗？

谢谢。

```
irb(main):003:0> y Grau.all
  ←[1m←[36mGrau Load (0.0ms)←[0m  ←[1mSELECT "graus".* FROM "gr
  ←[1m←[35mEXPLAIN (0.0ms)←[0m  EXPLAIN QUERY PLAN SELECT "grau

EXPLAIN for: SELECT "graus".* FROM "graus"
0|0|0|SCAN TABLE graus (~1000000 rows)

---
- !ruby/object:Grau
  attributes:
    !binary "aWQ=": 27
    !binary "bm9tZQ==": 1 Grau
    !binary "Y3JlYXRlZF9hdA==": 2012-04-06 21:24:34.553163000 Z
    !binary "dXBkYXRlZF9hdA==": 2012-04-06 21:24:34.553163000 Z
- !ruby/object:Grau
  attributes:
    !binary "aWQ=": 28
    !binary "bm9tZQ==": 2 Grau
    !binary "Y3JlYXRlZF9hdA==": 2012-04-06 21:24:34.599963000 Z
    !binary "dXBkYXRlZF9hdA==": 2012-04-06 21:24:34.599963000 Z 
```

[更新]

```
irb(main):001:0> Grau.find(1)
  ←[1m←[36mGrau Load (43.8ms)←[0m  ←[1mSELECT "graus".* FROM "graus" WHERE "grau
s"."id" = ? LIMIT 1←[0m  [["id", 1]]
=> #<Grau id: 1, nome: "1º Grau", created_at: "2012-04-11 15:51:32", updated_at:
 "2012-04-11 15:51:32">
irb(main):002:0> 
```

我在 Windows 7 64 位上使用 Rails 3.2.3、Ruby 1.9.3。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-14T22:52:38.317

这似乎是因为 rails 默认使用较新的`psych`YAML 引擎，较旧的`syck`yaml 引擎不输出`!binary`密钥。如果您只是希望它在控制台中进行测试，您可以切换回旧的 yaml 引擎作为临时解决方法：

```
 > y User.first
  User Load (0.0ms)  SELECT "users".* FROM "users" LIMIT 1
--- !ruby/object:User
attributes:
  !binary "aWQ=": 1
  !binary "bmFtZQ==": Example User
  !binary "ZW1haWw=": user@example.com

 > YAML::ENGINE.yamler= 'syck'
=> "syck"

 > y User.first
  User Load (1.0ms)  SELECT "users".* FROM "users" LIMIT 1
--- !ruby/object:User
attributes:
  id: 1
  name: Example User
  email: user@example.com 
```

`Encoding::ASCII_8BIT`只有当您的 ActiveRecord 列名称/属性键使用我认为只有 SQLite 才会发生的编码时，您才需要这样做。

* * *

## **更新：**

自发布此答案以来，SQLite3 gem 已修复为[返回 utf8 for column names](https://github.com/luislavena/sqlite3-ruby/commit/4a47171747beb938dcf6ff7e4bc5f42a1ed199c9)。确保您使用的是 sqlite3 gem 的 1.3.6 版（或更高版本）。然后默认/较新的 psych yaml 引擎（也支持人类可读的 unicode 输出）将毫无问题地工作：

```
 > y User.first
  User Load (0.0ms)  SELECT "users".* FROM "users" LIMIT 1
  EXPLAIN (0.0ms)  EXPLAIN QUERY PLAN SELECT "users".* FROM "users" LIMIT 1
EXPLAIN for: SELECT  "users".* FROM "users"  LIMIT 1
0|0|0|SCAN TABLE users (~1000000 rows)

--- !ruby/object:User
attributes:
  id: 1
  name: irmão
  email: user@example.com 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T14:42:37.850

我在我的一个页面上显示我的调试（参数）时遇到了同样的问题。这让我很沮丧。我可能走了很长一段路，但我一直在使用 sqlite3，并且知道我将在生产中使用 Postgres，我继续在本地配置 Postgres 数据库（有点让人头疼）。可能已经完成的另一件事是在 database.yml 文件上我添加了 **encoding: unicode**。

如果您有时间和耐心，最好在测试中使用与生产中使用的相同的数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T05:19:07.397

我不确定 irb，但`rails console`请在 Rails 应用程序根目录中尝试（这将正确加载所有活动记录对象）

*在 Rails 2.x 中*

```
<your rails app> ruby script/console 
```

*在 Rails 3.x 中*

```
<your rails app> rails c 
```

# java - 防止第 3 方类加载器加载类

> ID：10050617
> 
> 赞同：0
> 
> 时间：2012-04-07T00:16:51.373
> 
> 标签：java, classloader, urlclassloader

我正在调用第三方代码

```
method.invoke(null, args); 
```

它有一个加载类的类加载器。是否有可能阻止它加载特定的类？此外，我正在调用超过三分之一的部分程序，并且我正在寻找一种广泛的解决方案，该解决方案通常会阻止子类加载器加载特定的类，看看子类加载器如何首先委托给父类这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T15:19:34.050

好的，经过一番插入后，我想出了一种方法，[javaagent option](http://www.javalobby.org/java/forums/t19309.html)，这是一个拦截所有传入类文件的示例，这正是我想要的。这通常用于内存分析器之类的东西。

# javascript - 使用 Click 事件和 Dragend 事件

> ID：10050619
> 
> 赞同：1
> 
> 时间：2012-04-07T00:16:52.543
> 
> 标签：javascript, events, bing-maps

我想在我的别针上进行活动。当用户单击 pin 时调用 click 方法。当用户拖动图钉时，第二种方法是 dragend。

我目前有以下事件处理程序：

```
Microsoft.Maps.Events.addHandler(pin, 'click', displayInfobox);
Microsoft.Maps.Events.addHandler(pin, "dragend", endDragHandler); 
```

问题是当用户只点击图钉时，endDragHandler 会先被调用，然后再调用 click 方法。

对于如何解决这个问题，有任何的建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T01:45:07.670

`dragend`之前触发确实看起来很奇怪`click`，但你是对的，情况确实如此。我能想到的最简单的解决方法是：与其订阅`click`事件，不如订阅`mousedown`事件：

```
Microsoft.Maps.Events.addHandler(pin, 'mousedown', displayInfobox);
Microsoft.Maps.Events.addHandler(pin, "dragend", endDragHandler); 
```

`mousedown`之前会开火`dragend`。因此，如果您可以避免使用“mousedown”，我建议您这样做。如果你必须使用`click`，事情可能会变得复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T02:51:17.690

我最终想到的解决方案是检查当前位置，看看它是否仍在同一个位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-29T07:35:52.697

虽然这个问题已经得到解答，但我在[这个](https://www.codeproject.com/Tips/1173178/How-to-Detect-in-Bing-Map-Version-It-Is-Click-Even)CodeProject 链接上找到了一个解决方案，类似于上面@johnston 的建议：

基本上在图钉的点击事件中，新旧纬度/经度以 3 个十进制值进行比较。如果它匹配它假定它是一个点击事件，否则它是一个拖动事件。我很惊讶为什么 Bing 团队没有调查这个奇怪的问题，我花了好几个小时才解决这个问题。Bing API 本身应该解决这个问题。

# ruby - 错误要求：无法加载此类文件 - mongomapper (LoadError) 并且不知道从哪里开始

> ID：10050622
> 
> 赞同：0
> 
> 时间：2012-04-07T00:17:23.490
> 
> 标签：ruby, rubygems, mongomapper

启动 sinatra 应用程序后，我收到以下错误消息：

```
/home/matt/.rvm/gems/ruby-1.9.3-p125/gems/backports-2.5.1/lib/backports/tools.rb:310:in `require': cannot load such file -- mongomapper (LoadError)
    from /home/matt/.rvm/gems/ruby-1.9.3-p125/gems/backports-2.5.1/lib/backports/tools.rb:310:in `require_with_backports'
    from /home/matt/handle-phone-call/app.rb:10:in `<top (required)>'
    from /home/matt/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/matt/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/matt/handle-phone-call/config.ru:2:in `block in <main>'
    from /home/matt/.rvm/gems/ruby-1.9.3-p125/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
    from /home/matt/.rvm/gems/ruby-1.9.3-p125/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
    from /home/matt/handle-phone-call/config.ru:1:in `new'
    from /home/matt/handle-phone-call/config.ru:1:in `<main>'
    from /home/matt/.rvm/gems/ruby-1.9.3-p125/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
    from /home/matt/.rvm/gems/ruby-1.9.3-p125/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
    from /home/matt/.rvm/gems/ruby-1.9.3-p125/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
    from /home/matt/.rvm/gems/ruby-1.9.3-p125/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
    from /home/matt/.rvm/gems/ruby-1.9.3-p125/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
    from /home/matt/.rvm/gems/ruby-1.9.3-p125/gems/rack-1.4.1/lib/rack/server.rb:137:in `start'
    from /home/matt/.rvm/gems/ruby-1.9.3-p125/gems/rack-1.4.1/bin/rackup:4:in `<top (required)>'
    from /home/matt/.rvm/gems/ruby-1.9.3-p125/bin/rackup:19:in `load'
    from /home/matt/.rvm/gems/ruby-1.9.3-p125/bin/rackup:19:in `<main>' 
```

有任何想法吗？我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T00:52:47.783

你应该要求`mongo_mapper`，而不是`mongomapper`。

# javascript - 如何实现每个元素的单例？

> ID：10050623
> 
> 赞同：1
> 
> 时间：2012-04-07T00:17:30.517
> 
> 标签：javascript

**概述**

这是我的消息对象。我只希望每个元素允许一个对象。评论中提到的元素。

正如用户所见，每个元素应该只有一条消息。例如，如果用户继续单击按钮，我不想重新实例化更多消息。只需要一个。

我本可以做的一件事是禁用按钮，直到消息显示完毕……但这不是我想要的方式。

Effects.fade() 函数在大约 4 秒后淡出消息。

**问题？**

如何修改它，使其每个元素只允许一个自身实例？

**物体**

```
/**
 *    Message
 */

var Message = function( element ) 
{
    // need only single instance per element..so a singleton pattern per element
    this.element = element;  // This is element where the message is sent
};

Message.prototype.messages = 
{ 
    name:       'Please enter a valid name',
    email:      'Please enter a valid email',
    pass:       'Please enter passoword, 6-40 characters',
    url:        'Please enter a valid url',
    title:      'Please enter a valid title',
    tweet:      'Please enter a valid tweet',
    empty:      'Please complete all fields',
    same:       'Please make emails equal',
    taken:      'Sorry, that email is taken',
    validate:   'Please contact <a class="d" href="mailto:me@host.com">support</a> to reset your password',
};

Message.prototype.display = function( type ) 
{
    Control.send( this.element, this.messages[ type ] );
    var EffectsObject = new Effects( this.element );
    EffectsObject.fade( 'down', 4000);
}; 
```

**对象的使用**

```
this.message_object = new Message( this.response_element );
this.message_object.display( 'empty' ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T02:19:32.333

与现有答案类似，但更符合单例的传统概念：

```
Message = function(element) {
    if (element.hasOwnProperty("messageInstance")) {
        return element.messageInstance;
    }

    element.messageInstance = this;

    // Remainder of your constructor logic here
}; 
```

这样您就不必在一个集中位置跟踪所有标记的元素，并且您可以随意调用`new Message(element)`多次，并确保您只会返回一个实例。

**编辑**：`setAttribute`是一种`Element`专门用于处理 DOM 节点属性的方法（即标签上的东西或`href`几乎任何东西）。`<a>``id`

相比之下，点表示法或等效的括号表示法 ( `element['messageInstance']`) 在任意 JavaScript 对象上设置属性。两种方法都可以，但由于*messageInstance*在技术上不是根据 ( [X](http://www.w3.org/TR/xhtml11/xhtml11_schema.html) ) [HTML](http://www.w3.org/TR/html4/sgml/dtd.html)规范的合法属性，因此将其分配为对象属性在技术上更正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T00:40:54.883

或者你可以给元素添加一个自定义属性，然后创建一个新的Message实例，检查是否有自定义属性

```
Message = function( element ) 
{
    if ( !element.getAttribute("messageInstance")  ){
        // need only single instance per element..so a singleton pattern per element
        this.element = element;  // This is element where the message is sent
        element.setAttribute("messageInstance" , "true");
    } else {
        throw new Error ( "one elem one instance");
    }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T00:59:16.530

您可以在闭包中定义构造函数。

```
(function () {
    var messageInstances = {};

    Message = function(element) {
        if (messageInstances[element.name])
            return messageInstances[element.name];

        this.element = element;

        messageInstances[element.name] = this;
    }

    Message.prototype.messages = {...};
    Message.prototype.display = {...};

})(); 
```

`Message`标识符在闭包内定义，但没有关键字`var`，因此可以全局访问。这`messageInstances`是一个“私有”（在闭包之外无法访问）数组，用于跟踪现有实例。如果`Message(element)`为给定的第一次调用构造函数`element`，则会创建一个新对象。如果再次调用，则会在数组中找到之前创建的实例并返回，而不是新创建的对象。

请注意，在此示例中，元素必须通过某些字符串属性来识别，例如`name`.

# jquery - 优雅地加载图像

> ID：10050627
> 
> 赞同：2
> 
> 时间：2012-04-07T00:18:49.310
> 
> 标签：jquery, css, slideshow

如何使用此幻灯片更优雅地加载图像？

[http://jsfiddle.net/AndyMP/CkuKe/11/](http://jsfiddle.net/AndyMP/CkuKe/11/)

显然，较大的图像需要更长的时间来加载，并且当它们像这样相互叠加时看起来很乱。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T00:25:43.750

[http://jsfiddle.net/SxHNn/](http://jsfiddle.net/SxHNn/)

等待图像加载然后开始间隔。@Starx 是正确的，特别是因为某些浏览器不会在缓存图像上触发加载事件。因此，如果没有 waitforimages，则在某些浏览器中刷新页面后，间隔将不会开始。使用我发布的小提琴，但使用`.waitForImages`插件而不是 jQuery`.load`

或者，因为您没有使用背景图像，您可以使用 Paul Irish 更简洁的解决方案：[https ://gist.github.com/268257](https://gist.github.com/268257)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T00:57:18.580

对于您的情况，有一个名为[waitforimages](https://github.com/alexanderdickson/waitForImages)的插件，非常完美。

加载所有图像后，只需运行该函数。

# c# - Open-XML 保存 word 文档会产生损坏的文件

> ID：10050628
> 
> 赞同：3
> 
> 时间：2012-04-07T00:18:50.887
> 
> 标签：c#, ms-word, ms-office, openxml

虽然我是 Open-XML 世界的新手，但在使用它时我已经遇到了一些麻烦/问题。其中大多数都很容易解决，但我无法解决这个问题：

```
public class ReportDocument : IDisposable
{
    private MemoryStream stream;
    private WordprocessingDocument document;
    private MainDocumentPart mainPart;

    public byte[] DocumentData
    {
        get 
        {
            this.document.ChangeDocumentType(WordprocessingDocumentType.MacroEnabledDocument);
            byte[] documentData = this.stream.ToArray();
            return documentData;
        }
    }

    public ReportDocument()
    {
        byte[] template = DocumentTemplates.SingleReportTemplate;
        this.stream = new MemoryStream();
        stream.Write(template, 0, template.Length);
        this.document = WordprocessingDocument.Open(stream, true);
        this.mainPart = document.MainDocumentPart;
    }

    public void SetReport(Report report)
    {
        Body body = mainPart.Document.Body;
        var placeholder = body.Descendants<SdtBlock>();
        this.SetPlaceholderTextValue(placeholder, "Company", WebApplication.Service.Properties.Settings.Default.CompanyName);
        this.SetPlaceholderTextValue(placeholder, "Title", String.Format("Status Report for {0} to {1}", report.StartDate.ToShortDateString(),
            report.ReportingInterval.EndDate.ToShortDateString()));
        //this.SetPlaceholderTextValue(placeholder, "Subtitle", String.Format("for {0}", report.ReportingInterval.Project.Name));
        this.SetPlaceholderTextValue(placeholder, "Author", report.TeamMember.User.Username);
        this.SetPlaceholderTextValue(placeholder, "Date", String.Format("for {0}", DateTime.Today.ToShortDateString()));
    }

    private void SetPlaceholderTextValue(IEnumerable<SdtBlock> sdts, string alias, string value)
    {
        SdtContentBlock contentBlock = this.GetContentBlock(sdts, alias);
        Text text = contentBlock.Descendants<Text>().First();
        text.Text = value;
    }

    private SdtContentBlock GetContentBlock(IEnumerable<SdtBlock> sdts, string alias)
    {
        return sdts.First(sdt => sdt.Descendants<SdtAlias>().First().Val.Value == alias).SdtContentBlock;
    }

    public void Dispose()
    {
        this.document.Close();
    }
} 
```

所以我创建了一个新文档，基于它通过内存流获得的模板，并希望在进行更改时将其写回内存流。

最大的问题是，当我保存生成的字节数组时，数据 docx 文件已损坏：

.\word 中的document.xml 称为document2.xml .\word_rels 中的document.xml.rels 称为document2.xml.rels 包含我希望你们中的一些人能提供好的解决方案。

MFG清酒寿司大

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T11:01:11.357

将您的 DocumentData 属性更改为此，我认为它应该可以工作。重要的是在读取内存流之前关闭文档。

```
public byte[] DocumentData
    {
        get 
        {
            this.document.ChangeDocumentType(WordprocessingDocumentType.MacroEnabledDocument);
            this.document.MainDocumentPart.Document.Save();
            this.document.Close();            
            byte[] documentData = this.stream.ToArray();
            return documentData;
        }
    } 
```

# php - 如何使用 Stack.PHP 搜索 Stack Overflow？

> ID：10050629
> 
> 赞同：1
> 
> 时间：2012-04-07T00:19:00.517
> 
> 标签：php, api

我正在尝试使用[php stacks 应用程序搜索 Stack Overflow 问题](https://stackapps.com/questions/826/stack-php-powerful-and-extensive-library-for-accessing-the-stack-exchange-api)

但我似乎找不到搜索方法，我正在尝试将搜索字符串参数传递给该方法（如果存在）

例如：

```
$stackoverflow = API::Site('stackoverflow');

$searchString;

$response = $stackoverflow->???->Exec(); // problem here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T00:22:38.323

[Column 80 - 纯文本优化 SOFU](https://stackapps.com/q/542/10353)（[代码](http://www.column80.com/Column80.zip)）具有搜索功能，并且也基于该库。所以这是一个工作示例，可能会有所帮助。

# java - 在 Java 中解析文本文件的问题

> ID：10050637
> 
> 赞同：0
> 
> 时间：2012-04-07T00:20:03.513
> 
> 标签：java

我查看了所有链接，但似乎无法得到我想要的东西。我有一个需要读入的文本文件。首先是文本文件格式：

```
3 STL NY Chi //all on one line
STL NY 575 //on its own line
NY Chi 550 //on its own line
STL Chi 225 //on its own line 
```

我需要将 int 读入一个 int 变量，比如我们称之为计数。然后将同一条线上的实际城市放入一个数组中。接下来的几行需要读入一个数组，以将里程与该数组相关联，例如 [STL NY]=575。我只能使用数组。没有哈希表、列表、堆栈或队列。这是我到目前为止得到的，老实说它并不多。我真的可以使用一些帮助，因为我对这方面的“操作方法”感到非常困惑。

```
import java.io.*;
import java.util.*;

public class P3 {

/**
 * @param args the command line arguments
 */
public static int count;

public static void main(String[] args) {

    try {

        FileInputStream dataFile = new FileInputStream("Data.txt");
        //BufferedReader br = new BufferedReader(new InputStreamReader(dataFile));

        String line = br.readLine();

    }

    catch (IOException e) {
        System.err.println ("Unable to open file");
        System.exit(-1);
    }
  }
} 
```

* * *

我想我到了那里，但我收到一个错误代码：“非静态变量城市无法从静态上下文中引用。” 我正在尝试通过打印来测试我的代码。谁能帮我打印这个？我想看看数组中有什么，以确保我做得正确。这是我的代码：

```
package p3;

import java.io.*;
import java.util.*;

class citiesDist {
    String cityOne;
    String cityTwo;
    int miles;
}

class city {
    String cityName;
    int numberLinks;
    citiesDist[] citiesDists;
}

public class P3 {

    city[] cities;

    void initCity(int len) {
        for (int i = 0; i < len; i++) {
            cities[i] = new city();
        }
    }

    void initCitiesDist (int index, int len) {
        for (int i = 0; i < len; i++) {
            cities[index].citiesDists[i] = new citiesDist();
        }
    }

    void parseFile() throws FileNotFoundException, IOException { 
        FileInputStream fstream = new FileInputStream("Data.txt"); 
        DataInputStream in = new DataInputStream(fstream); 
        BufferedReader br = new BufferedReader(new InputStreamReader(in)); 

        int numberCities = Integer.parseInt(br.readLine());
        cities = new city[numberCities];
        initCity(numberCities);

        for (int i = 0; i < numberCities; i++) {
            String line = br.readLine();
            int numberLink = Integer.parseInt(line.split(" ")[1]);
            cities[i].cityName = line.split(" ")[0];
            cities[i].numberLinks = numberLink;
            initCitiesDist (i, numberLink);

            for (int j = 0; j < numberLink; j++){
                line = br.readLine();
                cities[i].citiesDists[j].cityOne = line.split(" ")[0];
                cities[i].citiesDists[j].cityTwo = line.split(" ")[1];
                cities[i].citiesDists[j].miles = Integer.parseInt(line.split(" ")[2]);
            }
        }

    }

    public static void main(String args[]) {
        System.out.println("city" + cities.city);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T01:45:27.343

如果您曾经对代码感到困惑，请不要考虑编程语言；它只会进一步混淆您的逻辑。（将算法与语言分开。）当你清楚地知道你想要完成什么时，添加你的语言（就“我如何完成*这个*特定的任务？”）。

# 最终目标

根据您的设计，您的目标是制作一个与每个城市之间的距离相关的图表。它看起来像这样：

```
 [STL][NY] [Chi]
[STL][0]  [575][25]
[NY] [575][0]  [550]
[Chi][25] [550][0] 
```

[`Scanner`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)就文件输入和类而言，这并不太难完成。

# 第一步

您必须提取图形的尺寸（即 3 x 3）。这是在输入文件的第一行中为您提供的。从 a 中获取一个`Scanner`带有 a的整数`File`并不难，只要确保您导入了正确的类，以及正确的错误处理（`try...catch`或者抛出异常）。

```
Scanner sc = new Scanner(new File("input.txt")); 
```

You'll need two arrays - one for the cities, and one for the distances themselves. We don't know how large they are (you *never* assume the data in a file, you just assume the form of the data), so we have to get that from the file itself. Luckily, we are given an integer followed by the cities themselves. We will read this integer once and use it in multiple different locations.

```
String[] cities = new String[sc.nextInt()];
int[][] distances = new int[cities.length][cities.length];
for(int i = 0; i < cities.length; i++) {
    // Surely there's a method in Scanner that returns String that reads the _next_ token...
} 
```

# The Exercise to the Reader

You now have your data structure set up and ready to go. What you would need to do from here is bridge the gap between the cities array and distances array. Consider the order in which they arrived in the file, and the order in which we're encountering them. You would be well-served with some methodology or way to answer the question, 'Which came first - STL or NY?'

Give it a whirl and see if you can get further.

# .net - 在不继承类的情况下访问类的属性

> ID：10050640
> 
> 赞同：0
> 
> 时间：2012-04-07T00:20:46.453
> 
> 标签：.net, vb.net, oop, class, inheritance

我有一个类，它具有由构造函数中的方法生成的以下属性。

```
Public Class clsLoadTables
    Private _ds As New DataSet
    Public Property ds() As DataSet
        Get
            Return _ds
        End Get
        Set(ByVal value As DataSet)
            _ds = value
        End Set
    End Property

    Sub New()

        Try
            loadCSVTableII()
            loadXMLFiles(pathMainTable, "MainRMDTable")
            loadXMLFiles(pathBeneLifeExp, "pathBeneLifeExp")
        Catch ex As Exception
            MessageBox.Show(ex.Message)
            Throw
        End Try

    End Sub

End Class 
```

我的问题是我不想继承这个类，但是我有其他类需要访问 ds DataSet 属性。如果可能的话，我不想使用继承，也不想在程序中多次加载我的数据表。

这是我尝试访问未继承 clsLoadTables 的另一个类中的属性失败：

```
 Dim tableRow As DataRow = ds.Tables("MainRMDTable").Select(String.Format("age={0}",  age.ToString()))(0) 
```

关于如何访问这个数据集的任何想法，我只想从许多类的程序中加载一次，而不使用类继承或全局模块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T00:45:23.290

您将它作为公共属性，因此如果您有对 clsLoadTables 类的实例的引用，您应该能够访问它。

```
Dim foo As New clsLoadTables

Dim tableRow As DataRow = foo.ds.Tables("MainRMDTable").Select(String.Format("age={0}",  age.ToString()))(0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T00:38:16.000

对于 VB.Net 中的全局范围，使用带有 PUBLIC 变量和 PUBLIC 方法或友变量的 MODULE

公共 _ds 作为新数据集

或者

Friend _ds 作为新数据集

希望我没有误解你的问题..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T14:34:09.303

通常我为这样的事情所做的只是`_ds`在你的类中进行更改，并在第一次访问你的属性`shared`时加载数据。`get`

# objective-c - 在 iOS 中保存图像

> ID：10050645
> 
> 赞同：1
> 
> 时间：2012-04-07T00:21:25.913
> 
> 标签：objective-c, ios, plist, nsuserdefaults

我有一个像照片库一样的应用程序。我正在实现用户删除照片的能力，方法是在每个 UIImageView 上放置一个不可见的按钮，并在他们点击按钮时调用 removeObject。此代码运行良好，但它依赖于标签。我需要在界面构建器中标记每个 UIImageView / UIButton 才能使其正常工作。所以，我现在正试图以我的标签仍然有效的方式保存图像，这不包括使用 NSData。

所以我完全不知道现在该做什么。我对编程非常非常陌生，我什至能做到这一点感到震惊。非常感谢有关什么或如何编辑我的代码以使其工作的任何帮助或建议，谢谢！

这是我的整个文件仅供参考：

```
- (IBAction)grabImage {
    self.imgPicker = [[UIImagePickerController alloc] init];
    self.imgPicker.delegate = self;
    self.imgPicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
        _popover = [[UIPopoverController alloc] initWithContentViewController:imgPicker];
        [_popover presentPopoverFromRect:self.imageView.bounds inView:self.imageView permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
    } 

    else {
        [self presentModalViewController:imgPicker animated:YES];
    }
    [self.imgPicker resignFirstResponder];
}
// Sets the image in the UIImageView
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)img editingInfo:(NSDictionary *)editInfo {
    if (imageView.image == nil) {
        imageView.image = img;

        [self.array addObject:imageView.image];

        [picker dismissModalViewControllerAnimated:YES];
        [self.popover dismissPopoverAnimated:YES];
        return;

    }

    if (imageView2.image == nil) {
        imageView2.image = img;
        NSLog(@"The image is a %@", imageView);
        [self.array addObject:imageView2.image];

        [picker dismissModalViewControllerAnimated:YES];
        [self.popover dismissPopoverAnimated:YES];
        return;
    }

    if (imageView3.image == nil) {
        imageView3.image = img;

        [self.array addObject:imageView3.image];

        [picker dismissModalViewControllerAnimated:YES];
        [self.popover dismissPopoverAnimated:YES];
        return;
    }

    if (imageView4.image == nil) {
        imageView4.image = img;

        [self.array addObject:imageView4.image];

        [picker dismissModalViewControllerAnimated:YES];
        [self.popover dismissPopoverAnimated:YES];
        return;
    }
    if (imageView5.image == nil) {
        imageView5.image = img;

        [self.array addObject:imageView5.image];

        [picker dismissModalViewControllerAnimated:YES];
        [self.popover dismissPopoverAnimated:YES];
        return;
    }

- (void)applicationDidEnterBackground:(UIApplication*)application {
    NSLog(@"Image on didenterbackground: %@", imageView);

    [self.array addObject:imageView.image];
    [self.array addObject:imageView2.image];
    [self.array addObject:imageView3.image];
    [self.array addObject:imageView4.image];
    [self.array addObject:imageView5.image];

    [self.user setObject:self.array forKey:@"images"];
    [user synchronize];

}

- (void)viewDidLoad
{
    self.user = [NSUserDefaults standardUserDefaults];
    NSLog(@"It is %@", self.user);
    self.array = [[self.user objectForKey:@"images"]mutableCopy];
    imageView.image = [[self.array objectAtIndex:0] copy];
    imageView2.image = [[self.array objectAtIndex:1] copy];
    imageView3.image = [[self.array objectAtIndex:2] copy];
    imageView4.image = [[self.array objectAtIndex:3] copy];
    imageView5.image = [[self.array objectAtIndex:4] copy];

    UIApplication *app = [UIApplication sharedApplication];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(applicationDidEnterBackground:)
                                                 name:UIApplicationDidEnterBackgroundNotification
                                               object:app];

    [super viewDidLoad];

}

// This is when the user taps on the image to delete it.
- (IBAction)deleteButtonPressed:(id)sender {
    NSLog(@"Sender is %@", sender);
    UIAlertView *deleteAlertView = [[UIAlertView alloc] initWithTitle:@"Delete"
                                                              message:@"Are you sure you want to delete this photo?"
                                                             delegate:self
                                                    cancelButtonTitle:@"No"
                                                    otherButtonTitles:@"Yes", nil];
    [deleteAlertView show];

    int imageIndex = ((UIButton *)sender).tag;
    deleteAlertView.tag = imageIndex;
}

- (UIImageView *)viewForTag:(NSInteger)tag {
    UIImageView *found = nil;
    for (UIImageView *view in self.array) {
        if (tag == view.tag) {
            found = view;
            break;
        }
    }
    return found;
}

- (void)alertView: (UIAlertView *) alertView 
clickedButtonAtIndex: (NSInteger) buttonIndex
{

    if (buttonIndex != [alertView cancelButtonIndex]) {
        NSLog(@"User Clicked Yes. Deleting index %d of %d", alertView.tag, [array count]);
        NSLog(@"The tag is %i", alertView.tag);

        UIImageView *view = [self viewForTag:alertView.tag];
        if (view) {
            [self.array removeObject:view];
        }

        NSLog(@"After deleting item, array count  = %d", [array count]);
        NSLog(@"Returned view is :%@, in view: %@", [self.view viewWithTag:alertView.tag], self.view);
        ((UIImageView *)[self.view viewWithTag:alertView.tag]).image =nil;
    }

    [self.user setObject:self.array forKey:@"images"];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T01:17:03.250

前面的评论是准确的；请考虑如何扩大规模。

也就是说，您需要以某种方式存储和加载图像，这总是意味着将您的 UIImage 对象转换为 NSData。无论您将它们存储在 NSUserDefaults、文件还是 Core Data 中，这都适用。

UIImage 支持 NSCoding，所以你可以使用它。阅读有关如何使用它的信息，因为您最终会需要它。或者，如果您知道自己总是想使用 PNG 或 JPEG 格式，那么可以使用函数`UIImagePNGRepresentation(UIImage *image)`和`UIImageJPEGRepresentation(UIImage *image, CGFloat compressionQuality)`. 要将 NSData 对象转换回 UIImage，请使用`[UIImage imageWithData:NSData*]`以下是您在 applicationDidEnterBackground 中可以拥有的内容：

```
NSMutableArray *dataArray = [NSMutableArray array];
[dataArray addObject:UIImagePNGRepresentation(imageView.image)];
[dataArray addObject:UIImagePNGRepresentation(imageView2.image)];
[dataArray addObject:UIImagePNGRepresentation(imageView3.image)];
[self.user setObject:dataArray forKey:@"images"];
[self.user synchronize]; 
```

然后，在 viewDidLoad 期间检索这些：

```
[self.array removeAllObjects];
NSArray *dataArray = [self.user objectForKey:@"images"];
for (NSData *imageData in dataArray)
    [self.array addObject:[UIImage imageWithData:imageData]]; 
```

这将解决您当前的问题，但请不要将其视为永久解决方案。考虑：

1.  将图像存储在文件或核心数据中，因为 NSUserDefaults 不应该包含大量内容。
2.  使用 UITableView 显示图像，因此您可以使用任意数字而不是硬编码为三个。
3.  如果 UITableView 没有您需要的布局，请创建一个自定义 UIView 子类，该子类显示一组图像并适当地响应点击。
4.  确保您的应用程序可以检测到它可能被挂起或关闭的所有方式。您可能不会总是收到 ApplicationDidEnterBackground 通知，或者您可能没有时间在它发生后保存所有数据。如果你有多个 UIViewControllers，这一个可能会在应用程序本身没有收到通知的情况下被卸载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T20:28:31.667

您似乎正在使用该标签，以便您可以识别正在选择的图像视图。您在每个图像顶部都有一个“隐形”按钮？那正确吗？我假设这样你就可以处理一个点击，它选择通过按钮显示的图像？

有很多方法可以做到这一点，但一个简单的解决方案是只识别水龙头，然后“找到”该水龙头下的图像视图。从情节提要中将 UITapGestureRecognizer 拖放到您的控制器上。按住 Ctrl 键将其拖入控制器的代码中，它将创建一个操作方法。填写类似这样的内容...

```
 - (IBAction)tapGesture:(UITapGestureRecognizer*)gesture
  {
    CGPoint tapLocation = [gesture locationInView: self.galleryView];
    for (UIImageView *imageView in self.galleryView.subviews) {
      if (CGRectContainsPoint(imageView.frame, tapLocation)) {
        // This is the imageView that was tapped on!
        // Do whatever you want with it now that you found it.
      }
    }
  } 
```

# android - android：将应用程序从 android 升级到 4.04 需要哪些设置？

> ID：10050647
> 
> 赞同：0
> 
> 时间：2012-04-07T00:21:41.923
> 
> 标签：android, android-mapview

我的开发手机（nexus s）刚刚完成了操作系统升级到 4.0.4 版，从那时起我的应用程序开始出现异常。它加载没有错误，应用程序的某些部分没有出现

我有包含许多视图的选项卡主机，其中一个是地图视图。其中一些视图包含带有列表视图和线性布局的视图翻转器。现在，当我单击列表视图时，它不会显示地图视图。

是否需要设置或安装任何东西才能获得为 4.0.4 上的早期版本开发的应用程序？

android 项目构建目标设置为 Google API。我尝试将其更改为 Android 4.0.3，但错误无处不在。在 android 4.0.4 中使用地图活动是否需要不同版本的 Google API？

这是我的清单的副本：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="dc.ase.dublincityparking"
    android:versionCode="1"
    android:versionName="1.0">

    <uses-sdk android:minSdkVersion="8" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.CALL_PHONE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application
        android:icon="@drawable/parking"
        android:label="@string/app_name" >
        <uses-library android:name="com.google.android.maps" />

        <activity
            android:label="@string/app_name"
            android:configChanges="orientation"     

            android:name="dc.ase.dublincityparking.DublinCityParkingActivity" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

# android - 声音响度降低 AsyncPlayer()

> ID：10050648
> 
> 赞同：0
> 
> 时间：2012-04-07T00:21:42.433
> 
> 标签：android, media-player

我`AsyncPlayer()`在我的应用程序中的某个时间点用于播放小文件，但声音的响度急剧下降。在我的电脑上，它听起来很响亮。即使我提高设备的铃声音量，它也不会响亮。

这是我正在使用的代码

```
public AsyncPlayer boardMusic=new AsyncPlayer("music player on board");
Uri draw_audio=Uri.parse("android.resource://com.san.ttt/raw/draw_audio");
boardMusic.play(getApplicationContext(),draw_audio , false, AudioManager.ADJUST_SAME); 
```

我注意到声音来自用于通话的扬声器，而不是来自用于播放 MIDI 文件（扬声器）的扬声器。那么如何让它在扬声器中播放。

# java - Java - 具有集合属性的多态性

> ID：10050651
> 
> 赞同：0
> 
> 时间：2012-04-07T00:22:32.360
> 
> 标签：java, collections, polymorphism

我想问一下是否有更优雅的方式来编写以下代码：

```
public class MTree {
    class MTreeObject {
        double[] vector;
    }

    class RoutingObject extends MTreeObject {
        double radius;
    }

    class LeafObject extends MTreeObject {
        int id;
    }

    class Node {
        LinkedList<MTreeObject> list;
    }

    class InnerNode extends Node {
        LinkedList<RoutingObject> list;
    }

    class LeafNode extends Node {
        LinkedList<LeafObject> list;
    }

    public static void main(String[] argv) {
        MTreeObject object = new RoutingObject();
        Node node = new InnerNode();
        ((InnerNode)node).list.add((RoutingObject)object);

    }
} 
```

问题是，如果我有例如：

```
class Result {
    Node node;
} 
```

然后调用 main

```
public static void main(String[] argv) {
    Result result = new Result();
    MTreeObject object = new RoutingObject();
    result.node = new InnerNode();
    result.((InnerNode)node).list.add((RoutingObject)object);      
} 
```

它不按我想要的方式工作。那么我也可以这样做：

```
newnode = result.node
((InnerNode)newnode).list.add((RoutingObject)object); 
```

但是在我更复杂的代码中我会有太多的变量......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T00:35:59.203

问题是您已将所有类声明为 MTree 的内部类。内部类的实例只能存在于外部类（MTree）的实例中。

尝试使您的类（RoutingObject、LeafObject 等）成为独立类而不是嵌套类或实例化内部类，您必须先实例化外部类。然后，使用以下语法在外部对象中创建内部对象：

MTree mtree = new MTree(); MTree.Node 节点 = mtree.new Node();

请参阅： [http ://docs.oracle.com/javase/tutorial/java/javaOO/nested.html](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)

从您的示例中不太确定您要完成什么，我猜最好的猜测是您不应该使用嵌套类。希望这可以帮助。

# google-maps - Oauth 登录 PHP 以显示 Fusion Table

> ID：10050655
> 
> 赞同：0
> 
> 时间：2012-04-07T00:22:56.380
> 
> 标签：google-maps, oauth-2.0, google-fusion-tables

我需要有关我的 PHP 代码的帮助，因为我有一个项目，我有一个私有层 Fusion 表，并且想在我的网站上显示。我正在尝试使用 OAuth，但它向我展示了外套。那么变量被捕获了吗？我已经采取了[http://code.google.com/p/fusion-tables-api/](http://code.google.com/p/fusion-tables-api/)指南，但没有向我展示任何内容。: (

```
<code>
<!DOCTYPE html>
<html>
<head>
<style>
#map_canvas { width: 500px; height: 400px; }
</style>

<script type="text/javascript" src="http://maps.google.com/maps/api/js?
sensor=false">
</script>
<script type="text/javascript">
var map;

var layer;
var tableid = 2102910;

function initialize() {
map = new google.maps.Map(document.getElementById('map_canvas'), {
center: new google.maps.LatLng(19.541451, -96.925632),
zoom: 5,
mapTypeId: google.maps.MapTypeId.ROADMAP
});

layer = new google.maps.FusionTablesLayer(tableid);
layer.setQuery("SELECT 'geometry' FROM " + tableid);
layer.setMap(map);
}

</script>

</head>
<body onload="initialize();">

<div id="map_canvas"></div>

<div style="margin-top: 10px;">

</div>
<?php

include('clientlogin.php');
include('sql.php');
include('file.php');
$tableid = 2102910;
$username = "xxxxxx@gmail.com";
$password = "xxxx";
$token = ClientLogin::getAuthToken($username, $password);
$ftclient = new FTClientLogin($token);

$condition = $_POST["

echo "These Projects are in ".$condition."";
?>
</body>
</html>`
<code> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T22:07:16.653

您的代码没有使用 OAuth，而是使用旧方法“ClientLogin”。如果您想使用 OAuth，请遵循[Fusion Tables 中的 OAuth 指南](https://developers.google.com/fusiontables/docs/articles/oauthfusiontables)。

让它工作真的很简单：

*   [在Google 的 API 控制台](https://code.google.com/apis/console/)注册您的应用程序。
*   然后将用户重定向到 Google 授权页面
*   从那里用户被重定向回您的应用程序（到您在第一步中注册应用程序时指定的 URL）。在此步骤中，授权令牌将发送到您的应用程序
*   使用此令牌，您可以访问用户融合表。

但只要按照指南，一切都在详细描述！

# bash - 基于 CSV 文件的多列执行高度自定义的排序？

> ID：10050656
> 
> 赞同：2
> 
> 时间：2012-04-07T00:23:00.940
> 
> 标签：bash, csv, sorting

我有一个四列 CSV 文件，`@`用作分隔符，例如：

```
0001 @ fish @ animal @ eats worms 
```

第一列是唯一保证唯一的列。

我需要对第 2、3 和 4 列执行四次排序操作。

首先，第 2 列按字母数字排序。这种排序的重要特征是它必须保证第 2 列中的任何重复条目彼此相邻，例如：

```
@ a @ @
@ a @ @
@ a @ @
@ a @ @
@ a @ @
@ b @ @
@ b @ @
@ c @ @  
@ c @ @  
@ c @ @  
@ c @ @  
@ c @ @ 
```

接下来，在第一个排序中，将行分为两类。第一行是那些不包含单词“arch.”、“var.”、“ver.”、“anci”的行。或“家庭”。第 4 列中的任何位置。第二行（排在后面）是包含这些单词的行，例如：

```
@ a @ @ Does not have one of those words.
@ a @ @ Does not have one of those words.
@ a @ @ Does not have one of those words.
@ a @ @ Does not have one of those words.
@ a @ @ This sentence contains arch.
@ b @ @ Does not have one of those words.
@ b @ @ Has the word ver.
@ c @ @ Does not have one of those words.
@ c @ @ Does not have one of those words.
@ c @ @ Does not have one of those words.
@ c @ @ This sentence contains var.
@ c @ @ This sentence contains fam.
@ c @ @ This sentence contains fam. 
```

最后，仅在第二次排序的单独类别中排序，将行从“包含第 3 列中重复条目最多”到“包含第 3 列中重复条目最少”，例如：

```
@ a @ fish @ Does not have one of those words.
@ a @ fish @ Does not have one of those words.
@ a @ fish @ Does not have one of those words.
@ a @ tiger @ Does not have one of those words.
@ a @ bear @ This sentence contains arch.
@ b @ fish @ Does not have one of those words.
@ b @ fish @ Has the word ver.
@ c @ bear @ Does not have one of those words.
@ c @ bear @ Does not have one of those words.
@ c @ fish @ Does not have one of those words.
@ c @ tiger @ This sentence contains var.
@ c @ tiger @ This sentence contains fam.
@ c @ bear @ This sentence contains fam. 
```

如何按第 2 列的字母数字、第 4 列中某些关键字的出现以及第 3 列中最常见的重复到最不常见的重复对文件进行排序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T01:35:39.680

TXR：（[http://www.nongnu.org/txr](http://www.nongnu.org/txr)）

```
@(bind special-words ("arch." "var." "ver." "anci." "fam."))
@(bind ahash @(hash :equal-based))
@(repeat)
@id @@ @alpha @@ @animal @@ @words
@  (rebind words @(split-str words " "))
@  (bind record (id alpha animal words))
@  (do (push record [ahash alpha]))
@(end)
@(bind sorted-rec-groups nil)
@(do
   (defun popularity-sort (recs)
     (let ((histogram [group-reduce (hash)
                                    third (do inc @1)
                                    recs 0]))
      [sort recs > [chain third histogram]]))

   (dohash (key records ahash)
     (let (contains does-not combined)
       (each* ((r records)
               (w [mapcar fourth r]))
         (if (isec w special-words)
           (push r contains)
           (push r does-not)))
       (push (append (popularity-sort does-not)                                 
                     (popularity-sort contains))                                
             sorted-rec-groups)))
   (set sorted-rec-groups [sort sorted-rec-groups :
                                [chain first second]]))
@(output)
@  (repeat)
@    (repeat)
@(rep)@{sorted-rec-groups} @@ @(last)@{sorted-rec-groups " "}@(end)
@    (end)
@  (end)
@(end) 
```

数据：

```
0001 @ b @ fish @ Does not have one of those words.
0002 @ a @ bear @ Does not have one of those words.
0003 @ b @ bear @ Has the word ver.
0004 @ a @ fish @ Does not have one of those words.
0005 @ c @ bear @ Does not have one of those words.
0006 @ c @ bear @ Does not have one of those words.
0007 @ a @ fish @ Does not have one of those words.
0008 @ c @ fish @ Does not have one of those words.
0009 @ a @ fish @ Does not have one of those words.
0010 @ c @ tiger @ This sentence contains var.
0011 @ c @ bear @ This sentence contains fam.
0012 @ a @ fish @ Does not have one of those words.
0013 @ c @ tiger @ This sentence contains fam. 
```

跑：

```
$ txr sort.txr data.txt 
0004 @ a @ fish @ Does not have one of those words.
0007 @ a @ fish @ Does not have one of those words.
0009 @ a @ fish @ Does not have one of those words.
0012 @ a @ fish @ Does not have one of those words.
0002 @ a @ bear @ Does not have one of those words.
0001 @ b @ fish @ Does not have one of those words.
0003 @ b @ bear @ Has the word ver.
0005 @ c @ bear @ Does not have one of those words.
0006 @ c @ bear @ Does not have one of those words.
0008 @ c @ fish @ Does not have one of those words.
0010 @ c @ tiger @ This sentence contains var.
0013 @ c @ tiger @ This sentence contains fam.
0011 @ c @ bear @ This sentence contains fam. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T01:37:36.200

这是您第一个问题的答案，可帮助您入门：

```
sort data -t "@" -k 2,2 -k 3,4 
```

这个怎么运作：

*   -t 指定对您来说是“@”符号的字段分隔符。
*   -k 2,2 表示对字段二进行排序
*   -k 3,4 表示通过在字段 3 上排序，然后在字段 4 上排序来解决平局

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T02:40:08.290

这是Ruby中的解决方案。

```
#!/usr/bin/env ruby

class Row

  SEPARATOR = " @ "

  attr_accessor :cols

  def initialize(text)
    @cols = text.chomp.split(SEPARATOR)
    @cols.size == 4 or raise "Expected text to have four columns: #{text}"
    duplicate_increment
  end

  def has_words?
    cols[3]=~/arch\.|var\.|ver\.|anci\.|fam\./ ? true : false
  end

  def to_s
    SEPARATOR + 
      @cols[1,3].join(SEPARATOR) +
      " -- id:#{cols[0]} duplicates:#{duplicate_count}"
  end

  ### Comparison

  def <=>(other)
    other or raise "Expected other to exist"
    cmp = self.cols[1] <=> other.cols[1]
    return cmp if cmp !=0
    cmp = (self.has_words? ? 1 : -1) <=> (other.has_words? ? 1 : -1)
    return cmp if cmp !=0
    other.duplicate_count <=> self.duplicate_count 
  end

  ### Track duplicate entries

  @@duplicate_count = Hash.new{|h,k| h[k]=0}

  def duplicate_key
    [cols[1],has_words?]
  end

  def duplicate_count
    @@duplicate_count[duplicate_key]
  end

  def duplicate_increment
    @@duplicate_count[duplicate_key] += 1
  end

end

### Main

lines = ARGF
rows = lines.map{|line| Row.new(line) }
sorted_rows = rows.sort
sorted_rows.each{|row| puts row } 
```

输入：

```
0001 @ b @ fish @ text
0002 @ a @ bear @ text
0003 @ b @ bear @ ver.
0004 @ a @ fish @ text
0005 @ c @ bear @ text
0006 @ c @ bear @ text
0007 @ a @ fish @ text
0008 @ c @ fish @ text
0009 @ a @ fish @ text
0010 @ c @ lion @ var.
0011 @ c @ bear @ fam.
0012 @ a @ fish @ text
0013 @ c @ lion @ fam. 
```

输出：

```
$ cat data.txt | ./sorter.rb 
@ a @ fish @ text -- id:0007 duplicates:5
@ a @ bear @ text -- id:0002 duplicates:5
@ a @ fish @ text -- id:0012 duplicates:5
@ a @ fish @ text -- id:0004 duplicates:5
@ a @ fish @ text -- id:0009 duplicates:5
@ b @ fish @ text -- id:0001 duplicates:1
@ b @ bear @ ver. -- id:0003 duplicates:1
@ c @ bear @ text -- id:0005 duplicates:3
@ c @ fish @ text -- id:0008 duplicates:3
@ c @ bear @ text -- id:0006 duplicates:3
@ c @ lion @ var. -- id:0010 duplicates:3
@ c @ bear @ fam. -- id:0011 duplicates:3
@ c @ lion @ fam. -- id:0013 duplicates:3 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-08T07:38:10.110

#  [q](https://kx.com/)

首先，我[加载](http://code.kx.com/q/ref/filenumbers/#load-csv)“csv”并将其调整为正确的[形状](http://code.kx.com/q/ref/lists/#flip)。测试数据在我的计算机上称为“蠕虫”，但因为 q 不使用字符串作为文件名“类型”（以防止例如注入攻击），所以我需要使用[hsym](http://code.kx.com/q/ref/filewords/#hsym)来创建“文件名”：

```
t:flip `id`a`b`c!("SSSS";"@")0:hsym`worms; 
```

然后我研究了哪些“第四字段”条目包含你的一个词。我使用[like](http://code.kx.com/q/ref/strings/#like)构建了一个位图，并将其应用于[每一行（左）](http://code.kx.com/q/ref/adverbs/#each-left)，然后是[每个模式（右）](http://code.kx.com/q/ref/adverbs/#each-right)，以获得不存在单词的 0 或其中一个存在的 1：

```
t:update p:any each c like/:\:("*arch.*";"*var.*";"*ver.*";"*anci.*";"*fam.*") from t; 
```

然后我想找到重复的数量。这只是第2 列 (a)、第 3 列 (b) 和当前类别中[的行数：](http://code.kx.com/q/cookbook/faq/#how-can-i-add-a-column-with-the-row-number-to-a-table)

```
t:update d:neg count i by a,b,p from t; 
```

最后，我因为我[否定](http://code.kx.com/q/ref/arith-integer/#neg)了计数，所以我的所有值都“走同样的路”，所以我可以简单地按这三列[排序：](http://code.kx.com/q/ref/dictsandtables/#xasc)

```
`a`p`d xasc t 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-07T12:04:06.253

这可能对你有用（非常不雅！）：

```
sed 's/[^@]*@\([^@\]*\)@\([^@]*\)/\1\t\2\t&/;h;s/@/&\n/3;s/.*\n//;/\(arch\|var\|ver\|anci\|fam\)\./!ba;s/.*/1/;bb;:a;s/.*/0/;:b;G;s/\(.\)\n\([^\t]*\)/\2\t\1/' file |
sort | 
tee file1 |
sed 's/\(.*\)\t.*/\1/' |
uniq -c |
sed 's|^\s*\(\S*\) \(.*\t.*\t\(.*\)\)|/^\2/s/\3/\1/|' >file.sed
sed -f file.sed file1 |
sort -k1,2 -k3,3nr |
sed 's/\t/\n/3;s/.*\n//'
1 @ a @ fish @ Does not have one of those words.
2 @ a @ fish @ Does not have one of those words.  
3 @ a @ fish @ Does not have one of those words.
4 @ a @ tiger @ Does not have one of those words.
5 @ a @ bear @ This sentence contains arch.
6 @ b @ fish @ Does not have one of those words.
7 @ b @ fish @ Has the word ver.
8 @ c @ bear @ Does not have one of those words.
9 @ c @ bear @ Does not have one of those words.
10 @ c @ fish @ Does not have one of those words.
11 @ c @ tiger @ This sentence contains var.
12 @ c @ tiger @ This sentence contains fam.
13 @ c @ bear @ This sentence contains fam. 
```

解释：

使排序键包括：

1.  第二场
2.  0/1: 0 代表没有arch./var./etc的第4个字段。1 代表有。
3.  对上述 2 进行排序后，第 3 个字段的计数重复。

该文件最终使用上述键排序，然后删除键。

# sql - SQL Server 2008 R2 和 SQL Serve 2008 Express 不打球

> ID：10050657
> 
> 赞同：0
> 
> 时间：2012-04-07T00:23:14.097
> 
> 标签：sql, sql-server-2008-r2, sql-server-2008-express

我有一个使用 SQL Server 2008 Express 在一个盒子上创建的数据库，并且正在使用 2008 R2 在该盒子和另一个盒子（不久前由朋友设置）之间开发一个网站。不幸的是，我遇到了两个问题。

第一个是在 R2 盒子上，虽然它会从 2008 年开始加载到数据库中，但它不允许我添加表（它给出了陈旧且完全无用的指定模块找不到 HRESULT：0x8007007E） - 我可以除了添加表格之外的所有内容。

第二个是当文件被访问并更新到SVN时，另一个盒子不能使用它，因为版本号不同（一个661上的655 [2008 Express]，另一个没有降级路径）。呸！

我的计划是这样做 - 将 2008 R2 框上的 SQL 文件复制到 SQL 脚本中。完全从机器中删除 R2，只需执行 2008 的默认安装并重新导入脚本。唯一的问题是我对如何做到这一点一无所知。

任何人都可以推荐一个可以做到这一点的工具包或指向一个可能有帮助的网站的方向吗？谷歌产生了大量的点击量，但并不总是对这一点有所帮助。

谢谢

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T02:36:03.910

从您的描述看来，您使用的是 SQL Express 2008，而不是 SQL Express 2008 R2；

您是否考虑过将 SQL Express 升级到 SQL Express 2008 R2 [http://www.microsoft.com/download/en/details.aspx?id=23650](http://www.microsoft.com/download/en/details.aspx?id=23650)

SQL Express 不是一个版本，而只是一个版本。将 SQL Express 2008 升级到 SQL Express 2008 R2 可能更容易。

**但是**......如果您设置将数据库导出到脚本，这可能就是您正在寻找的内容。 [http://blog.sqlauthority.com/2011/05/07/sql-server-2008-2008-r2-create-script-to-copy-database-schema-and-all-the-objects-data-schema-存储过程函数触发器表视图约束和所有其他数据库对象/](http://blog.sqlauthority.com/2011/05/07/sql-server-2008-2008-r2-create-script-to-copy-database-schema-and-all-the-objects-data-schema-stored-procedure-functions-triggers-tables-views-constraints-and-all-other-database-objects/)

# java - LWJGL 圆柱体纹理映射

> ID：10050659
> 
> 赞同：0
> 
> 时间：2012-04-07T00:23:27.373
> 
> 标签：java, opengl, lwjgl, texture-mapping

我想知道如何在 org.lwjgl.util.glu.Cylinder 类上执行纹理映射。我希望能够将纹理包裹在圆柱体的“侧面/弯曲”部分周围。

这是我的主要问题，但了解如何在 lwjgl.util.glu 中的所有“Quadric”类上执行此操作也会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T01:23:21.760

根据 GL 参考`glUCylinder`：

> 如果打开纹理（使用 gluQuadricTexture），则生成纹理坐标，以便 t 线性范围从 z = 0 处的 0.0 到 z = 高度处的 1.0，并且 s 的范围从 +y 轴上的 0.0 到 +x 轴上的 0.25轴，在 -y 轴到 0.5，在 -x 轴到 0.75，在 +y 轴回到 1.0。

[您可以在OpenGL 网站上](http://www.opengl.org/sdk/docs/man/)找到各种 OpenGL 函数的参考资料。它们适用于 C 版本，但 Java 的语法变化不大。

如果该映射不是您想要的，那么您将不得不编写自己的代码来生成具有正确纹理坐标的圆柱体模型。

# jsf - 渲染属性和可见属性之间的区别

> ID：10050669
> 
> 赞同：17
> 
> 时间：2012-04-07T00:26:00.130
> 
> 标签：jsf, primefaces

我在我的项目中使用 PrimeFaces 3.2。***我想知道设置 a 的渲染***属性`<p:dialog>`与设置***可见***属性有什么区别。我什么时候应该使用这些属性中的任何一个？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-07T01:21:11.910

`rendered`属性是服务器端，属性`visible`是客户端。该`rendered`属性告诉 JSF 是否应该生成对话框的 HTML 表示。该`visible`属性告诉 HTML/CSS/JS 是否应该在浏览器页面加载时立即显示对话框。

如果对话框未呈现，那么您将无法通过例如 JavaScript 显示它，`dialogWidgetVar.show()`而无需重新加载页面或 ajax 更新对话框的父组件之一，以便对话框的`rendered`条件评估为`true`. 此外，`visible`如果对话框没有被渲染，该属性也不会产生任何影响，因为没有任何内容被渲染到可以被 JavaScript 显示/隐藏的 HTML 输出。

如果对话框被渲染，那么它默认是隐藏的。您可以设置`visible`为`true`强制它在打开页面时立即显示对话框。`dialogWidgetVar.show()`或者您可以在某些`onclick`或`oncomplete`属性中调用 JavaScript来显示它。

如果您根本不想呈现对话框，请使用该`rendered`属性，例如因为在当前请求的页面组合中无论如何都不会使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T00:34:29.383

根据这些属性的[文档](http://primefaces.org/documentation.html)，第 3.28 节：

```
rendered: Boolean value to specify the rendering of the component, when set to
          false component will not be rendered [default value: TRUE]
visible:  When enabled, dialog is visible by default [default value: FALSE] 
```

# image-processing - 通过 Mathematica 中的脚本增加图形细节

> ID：10050675
> 
> 赞同：5
> 
> 时间：2012-04-07T00:27:51.633
> 
> 标签：image-processing, graphics, wolfram-mathematica

我的目标是生成大图并通过脚本保存它们的图像（最好是 PNG）（即：无需通过笔记本与它们交互）。

示例：我在 Mathematica 笔记本中生成了一个包含 100 个笔记的完整图形并保存了该图形。出现了下面非常详细的图像：

![耶！ 高质量图表：](../Images/8dae0889d7e60fcae63b14ed8af09a68.png)

但是当我通过如下脚本保存它时：

```
graph = CompleteGraph[100];
Export["mysuperawesomegraph.png", ImageResize[graph, 1000]]; 
```

![我失去了边缘的所有细节](../Images/0a86abbef8faa67b4425a1a25fdda62f.png)

不好了！失去了很多质量！连边缘都看不到了……

我尝试将数字 1000 更改为最多 15000 的数字：

```
Export["mysuperawesomegraph.png", ImageResize[graph, 1000]]; 
```

结果似乎是保存了更大的图像，但具有相同的细节级别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T03:07:37.027

您首先要在屏幕上找到合适的尺寸。这看起来不错：`Show[graph, ImageSize -> 1000]`

然后导出指定适当的图像分辨率：

```
Export["mysuperawesomegraph.png", 
       Show[graph, ImageSize -> 1000], ImageResolution -> 200] 
```

有关更多详细信息，请在mathematica.SE 上查看[此问题](https://mathematica.stackexchange.com/questions/296/how-to-export-large-graphics)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T04:09:15.917

试试这个：

```
Export["mysuperawesomegraph.png", CompleteGraph[100, ImageSize -> 1000]] 
```

# iphone - 如何打造像 Nike+ KM 一样的计数器？

> ID：10050680
> 
> 赞同：0
> 
> 时间：2012-04-07T00:28:39.940
> 
> 标签：iphone, objective-c, ios, xcode, ios4

谁曾经使用过 Nike+ 应用程序，一开始你会有这种数字运行的动画。我想知道如何创建这样的东西？

这里有一些图片：

![耐克+](../Images/22c7bc58c7dfbb489d39a518db55cfc6.png) ![耐克+](../Images/8aef2a97f23653735bc60ef10be827c2.png)

他们是如何创作这部动画的？

非常感谢！

# html - 为什么在Firefox中绝对定位后伪元素会移动一个额外的像素？

> ID：10050682
> 
> 赞同：2
> 
> 时间：2012-04-07T00:29:27.317
> 
> 标签：html, css, pseudo-element

[http://jsfiddle.net/NgdUR/](http://jsfiddle.net/NgdUR/)

我基本上使用带边框的css三角形来创建一个带有向上和向下箭头的自定义选择框。

如果您在 Opera、chrome、safari 上检查它，它工作得很好，但是在 Firefox 中，后伪元素上有一个额外的像素（或者之前的伪元素少了一个像素）有人知道为什么会发生这种情况吗？

如果我更改伪元素以保持背景颜色，则它们没有对齐问题：http: [//jsfiddle.net/NgdUR/1/](http://jsfiddle.net/NgdUR/1/)

有任何想法吗？

**编辑：Firefox中的图像，**

![在此处输入图像描述](../Images/885fca5a33ca2c15544d8aa70a4c9e90.png)

**我在其他浏览器中的外观：**

![在此处输入图像描述](../Images/9475b2f35200d1f5de887a0889abc7f4.png)

谢谢

/杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T01:20:50.567

我添加了 1px 的高度和宽度，并将每个伪元素的边框宽度更改为 2px。可以在 Firefox、IE9 和 Chrome 中使用。IE8 和 Opera 11+ 看起来有点笨重。

[更新的小提琴](http://jsfiddle.net/NgdUR/5/)

```
.test {
    position:relative;
    background:#ccc;
    border:1px solid #aaa;
    box-shadow:#aaa 0 0 4px;
    display:block;
    height:26px;
    width:28px;
   }
.test:before,
.test:after {
    content:"";
    border:2px solid transparent;
    width:1px;
    height:1px;
    display:block;
    position:absolute;
    left:11px;
}
.test:before {
    border-bottom:3px solid #000;
    top:6px;
}
.test:after {
    border-top:3px solid #000;
    top:14px;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T00:55:13.007

这在 FF11 上为我修复了它：

```
.test {
    position:relative;
    background:#ccc;
    border:1px solid #aaa;
    box-shadow:#aaa 0 0 4px;
    display:block;
    height:26px;
    width:28px;
   }
.test:before {
    content:"";
    border:3px solid transparent;
    border-bottom:3px solid #000;
    width:0;
    height:0;
    display:inline-block;
    position:absolute;
    top:6px;
    left:11px;
}
.test:after {
    content:"";
    border:3px solid transparent;
    border-top:3px solid #000;
    width:0;
    height:0;
    display:inline-block;
    position:absolute;
    top:14px;
    left:10px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-27T13:36:17.350

好吧......几年后仍然是同样的问题：如果你告诉 Firefox（目前是 45 版）一些带有 :before 或 :after 的游戏以及一些带有粗边框三角形的游戏，他仍然会错误计算宽度和高度这些元素随机最多一个像素。这会带来丑陋的视觉烦恼，尤其是在流畅响应的布局中，当箭头和箭头在一半的情况下与它们的身体分离时。

不得不在我的一个项目中修复这些问题，我偶然发现了这篇文章。但它实际上并没有开箱即用。而是提出了尝试完全其他方式的想法。

在我的情况下，可靠的帮助是：

1.  将三角形的 box-sizing 设置为 border-box
2.  给三角形的内部内容（宽度/高度）大小 0
3.  给外部边框框提供三角形的确切所需大小

相对简单，但对于 Firefox 来说，这是让他服从规则的唯一方法。Chrome 对任何大小调整方法都没有任何问题。Opera 尽管是 Chrome 的克隆版，但令人惊讶地表现出与 Firefox 相同的丑陋，但也具有相同的驯服性。

# java - 使用 asp.net 和 Java HttpComponents 发布请求时遇到问题

> ID：10050684
> 
> 赞同：0
> 
> 时间：2012-04-07T00:31:03.213
> 
> 标签：java, asp.net, session, post, apache-httpcomponents

我有一个特殊的问题，即 .aspx 站点不会通过 HttpComponents 完成的发布请求生成会话 ID cookie。

该网站是我学校在线日程查看器的登录名。[https://www.lectio.dk/lectio/22/login.aspx](https://www.lectio.dk/lectio/22/login.aspx) 或者，我将 HTML 发布到 pastebin： http: [//pastebin.com/nMhxfgjL](http://pastebin.com/nMhxfgjL)

（Brugernavn 是用户名，adgangskode 是密码）

我将输入字段的名称确定为 m$Content$username2 和 m$Content$password2

我的代码如下所示：

```
DefaultHttpClient httpclient = new DefaultHttpClient();

    HttpGet httpget = new HttpGet("https://www.lectio.dk/lectio/22/login.aspx");

    HttpResponse response = httpclient.execute(httpget);
    HttpEntity entity = response.getEntity();

    System.out.println("Login form get: " + response.getStatusLine());
    if (entity != null) {
        entity.consumeContent();
    }

    System.out.println("Initial set of cookies:");
    List<Cookie> cookies = httpclient.getCookieStore().getCookies();
    if (cookies.isEmpty()) {
        System.out.println("None");
    } else {
        for (int i = 0; i < cookies.size(); i++) {
            System.out.println("- " + cookies.get(i).toString());
        }
    }

    HttpPost httpost = new HttpPost("https://www.lectio.dk/lectio/22/login.aspx");

    List<NameValuePair> nvps = new ArrayList<NameValuePair>();
    nvps.add(new BasicNameValuePair("m$Content$username2", "blabla")); //set your own username
    nvps.add(new BasicNameValuePair("m$Content$password2", "blabla")); //set your own password

    httpost.setEntity(new UrlEncodedFormEntity(nvps, HTTP.UTF_8));

    response = httpclient.execute(httpost);
    entity = response.getEntity();

    System.out.println("Login form get: " + response.getStatusLine());
    if (entity != null) {
        entity.consumeContent();
    }

    System.out.println("Post logon cookies:");
    cookies = httpclient.getCookieStore().getCookies();
    if (cookies.isEmpty()) {
        System.out.println("None");
    } else {
        for (int i = 0; i < cookies.size(); i++) {
            System.out.println("- " + cookies.get(i).toString());
        }
    } 
```

由于显而易见的原因，我没有包括我的用户名和密码。

我从运行它得到的输出是

> 登录表单获取：HTTP/1.1 200 OK
> 
> 初始 cookie 集：
> 
> [版本：0][名称：lecmobile][值：0][域：www.lectio.dk][路径：/][到期：2029 年 12 月 31 日星期一 00:00:00 CET]
> 
> [版本：0][名称：lectiogsc][值：831859d3-370c-a582-340d-0377177bfcae][域：www.lectio.dk][路径：/][到期：1 月 1 日星期六 00:59:59 CET 10000 ]
> 
> 登录表单获取：HTTP/1.1 200 OK
> 
> 登录后 cookie：
> 
> [版本：0][名称：lecmobile][值：0][域：www.lectio.dk][路径：/][到期：2029 年 12 月 31 日星期一 00:00:00 CET]
> 
> [版本：0][名称：lectiogsc][值：831859d3-370c-a582-340d-0377177bfcae][域：www.lectio.dk][路径：/][到期：1 月 1 日星期六 00:59:59 CET 10000 ]

唯一重要的 cookie 是一个名为“ASP.NET_SessionId”的 cookie。显然，在您登录之前，您不会得到这个，至少不会得到这个值。

另外，我可以想象 HTTP 响应不会是 200，因为您在成功登录后被重定向......

希望有任何帮助:)

谢谢迈克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T11:30:52.970

未获取会话 cookie 可能是服务器配置问题。

# python - Qpixmap图像未在pyqt4 4.9 python中加载

> ID：10050685
> 
> 赞同：1
> 
> 时间：2012-04-07T00:31:08.237
> 
> 标签：python, pyqt4, qpixmap

-编辑

我使用此代码在 zetcode 中找到的[qlabel](http://zetcode.com/tutorials/pyqt4/widgets2/)中加载图片。它适用于更高版本的 pyqt4，但不适用于 pyqt4 4.9。在 pyqt4 4.9 中使用 qpixmap 有变化吗？谢谢。

```
import sys
from PyQt4 import QtGui, QtCore

class Example(QtGui.QWidget):

    def __init__(self):
        super(Example, self).__init__()

        self.initUI()

    def initUI(self):      

        hbox = QtGui.QHBoxLayout(self)
        pixmap = QtGui.QPixmap("redrock.png")

        lbl = QtGui.QLabel(self)
        lbl.setPixmap(pixmap)

        hbox.addWidget(lbl)
        self.setLayout(hbox)

        self.move(300, 200)
        self.setWindowTitle('Red Rock')
        self.show()        

def main():

    app = QtGui.QApplication(sys.argv)
    ex = Example()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T00:50:04.400

我使用与您相同的版本，并且要使此示例正常工作，您的脚本必须与`redrock.png`

# iphone - iPhone iOS5 如何向用户呈现字体类型、大小、颜色和对齐小部件？

> ID：10050686
> 
> 赞同：0
> 
> 时间：2012-04-07T00:31:10.403
> 
> 标签：iphone, objective-c, ios, fonts, uitextfield

我有一些 UITextFields，我希望用户能够在这些字段中更改字体的外观。

现在我有一个带有 5 个用于字体控件的按钮的 UIToolbar。一种用于字体名称，一种用于大小，一种用于颜色，一种用于对齐。

要更改字体，我会显示一个带有字体系列名称的选择器，让用户为该系列选择默认字体。

对于字体颜色，我显示另一个带有字体大小滑块的工具栏 对于字体颜色，我显示一个开源颜色选择器 对于字体对齐，我显示一个在左/中/右对齐之间循环的按钮。最后还有一个隐藏工具栏的关闭按钮。

目前我的所有代码都在一个控制器中，但我希望将它重构为一个单独的、可重用的类。

由于我将重写代码，**是否有像我上面描述的那样的开源字体控件？**也许我可以插入一些已经在我的项目中的东西？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T02:20:16.843

一点也不难。而不是选择器，而是使用带有按钮和标签的滚动视图，它们使用字体。至于大小，你也可以这样做！

这在 Xcode 4 中很容易，在 3.XX 中不太确定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:30:54.153

我发现苹果的属性字符串示例确实有一个类似于表格视图的字体控制器，其中包括字体外观的预览。我认为扩展该控制器可能是最简单的事情：

[http://developer.apple.com/library/ios/#samplecode/CoreTextPageViewer/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/CoreTextPageViewer/Introduction/Intro.html)

# iphone - UITableViewCell 附件重复？

> ID：10050687
> 
> 赞同：0
> 
> 时间：2012-04-07T00:31:11.960
> 
> 标签：iphone, objective-c, uitableview

在我的应用程序中，我有一个详细视图，用户可以在其中编辑人员、姓名、地址等属性。

在两个单元格中，它们不能选择它们来编辑它们的内容，而是有一个正确的附件，一个 UISwitch，但有时，它不一致，但它们会在我的上一节中复制到其他单元格。

我已经用细梳子扫描了我的代码几十次，但找不到该死的原因。什么可能导致这种情况？这是我用来在单个单元格上创建 UISwitch 的代码：

```
if (indexPath.section == 0 && indexPath.row == 1) 
{
    cell.textLabel.text = @"Confirmed";

    //Make the cell unselectable
    [cell setSelectionStyle:UITableViewCellSelectionStyleNone];
    //Create and add uiswitch
    confirmedSwitch = [[UISwitch alloc] initWithFrame:CGRectZero];
    [confirmedSwitch addTarget:self action:@selector(switchConfirmedStatus:) forControlEvents:UIControlEventValueChanged];
    [confirmedSwitch setOn:[venue.isConfirmed boolValue]];
    cell.accessoryView = confirmedSwitch;
} 
```

所以你希望它只出现在那个单元格上，看到那个代码有什么奇怪的地方吗？我检查了我的 if 语句，并且我所有的括号 indexPath 检查都是正确的。

有人以前见过这个或有任何线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T07:04:45.687

`reusability`问题是由于`UITableView`. 您可能`identifier`对所有单元格使用相同的，这会导致`cellForRowAtIndexPath`在其他行中实现（当您向上和向下滚动时）。

当您开发应用程序时，这是一个常见问题，`tableView`并且在 StackOverflow 上有很多这样的问题。

作为一般解决方案，您将需要执行其中任何一项。

1.  `dequeueReusableCellWithIdentifier`为每个单元格分配时使用不同的标识符。这相当简单，您只需为它们分配不同的标识符。

2.  对您进行子类化`UITableViewController`，并创建您自己的子类，`CustomTableViewController`它将在`cell`. 我相信您将需要覆盖该`set Layout Subviews`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T04:19:52.703

将出现一个视图中的数组，并为该行添加对象 0，为所有其他行添加对象 1，然后在 cellForRowAtIndexPath 中检查数组在该索引处是否为 0，如果它已放置开关，否则为 nill..

```
for(int i =0;i<10;i++)
{
    if(i==1)
    {
        [arrayForSwitch addObject:@"0"];
    }
    else
    {
        [arrayForSwitch addObject:@"1"];
    }
} 
```

然后在 cellForRowAtIndexPath 写入条件

```
if([arrayForSwitch objectAtIndex:indexPath.row isEqualToString:@"0"])
{
    cell.accessoryView = confirmedSwitch;
}
else
{

    cell.accessoryView =UITableViewCellAccessoryNone;
} 
```

它现在将保持不变

# silverlight - Silverlight Toolkit 图表：带条形和线条的多个系列

> ID：10050691
> 
> 赞同：0
> 
> 时间：2012-04-07T00:31:39.307
> 
> 标签：silverlight, charts, line, bar-chart

我无法以我想要的方式显示网格。但我也不确定是否可以在 Silverlight 工具包图表中做到这一点。因此，对此的任何帮助或指导将不胜感激。

```
<Grid x:Name="LayoutRoot" Background="White">
<charting:Chart x:Name="myChart" Width="600" Height="400">
<charting:BarSeries                 
Title="Tasks"
ItemsSource="{Binding Path=Data1}"
IndependentValueBinding="{Binding Month}"
DependentValueBinding="{Binding Task}"
DependentRangeAxis="{Binding ElementName=TaskAxis}">
</charting:BarSeries>
<charting:LineSeries                 
Title="Benefits"
ItemsSource="{Binding Path=Data1}"
IndependentValueBinding="{Binding Month}"
DependentValueBinding="{Binding Benefits}"
DependentRangeAxis="{Binding ElementName=BenefitsAxis}">
</charting:LineSeries>
<charting:Chart.Axes>
<charting:LinearAxis Orientation="Y" Location="Left" Title="First" x:Name="TaskAxis" />
<charting:LinearAxis Orientation="Y" Location="Right" Title="Second" x:Name="BenefitsAxis" />
</charting:Chart.Axes>
 </charting:Chart>
</Grid> 
```

鉴于上面的代码片段，是否可以让左侧的 Y 轴显示月份，顶部的 x 轴显示任务值，底部的 x 轴显示收益值。

所以在某种程度上，它正在共享本月的 Yaxis。它可以使用顶部/底部 x 轴甚至右 Y 轴来绘制任务和收益值。

你们有什么感想？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T13:28:40.113

下面的示例在顶部有任务轴，在底部有好处轴，左侧有一个共享的 Y 轴：

```
<toolkit:Chart x:Name="myChart" Width="600" Height="800">
    <toolkit:BarSeries                 
            Title="Tasks"
            ItemsSource="{Binding Path=Data1}"
            IndependentValueBinding="{Binding Month}"
            DependentValueBinding="{Binding Task}"
            DependentRangeAxis="{Binding ElementName=TaskAxis}">
    </toolkit:BarSeries>

    <toolkit:BarSeries                 
            Title="Benefits"
            ItemsSource="{Binding Path=Data1}"
            IndependentValueBinding="{Binding Month}"
            DependentValueBinding="{Binding Benefits}"
            DependentRangeAxis="{Binding ElementName=BenefitsAxis}">
    </toolkit:BarSeries>

    <toolkit:Chart.Axes>
        <toolkit:LinearAxis Orientation="X" Location="Top" Title="Task" x:Name="TaskAxis" />
        <toolkit:LinearAxis Orientation="X" Location="Bottom" Title="Benefits" x:Name="BenefitsAxis" />
    </toolkit:Chart.Axes>
</toolkit:Chart> 
```

# asp.net - WCF Windows 服务和非响应式 UI

> ID：10050694
> 
> 赞同：0
> 
> 时间：2012-04-07T00:32:06.003
> 
> 标签：asp.net, .net, sql-server, wcf, optimization

我们有一个核心 Windows 服务托管大约 9 个 WCF 服务，并充当另外 3 个 WCF 服务的客户端。我们有一个前端网站，通过 WCF 与这个 windows 服务进行通信。

在某些时候，Windows 服务正在执行一些繁重的操作，导致 100% 的 CPU 使用率，通常在 Windows 服务和 SQL 服务器之间拆分 60-40。

这是网站之间的 WCF 连接/请求超时的地方，这会导致 UI 非常无响应。

我正在寻找一种方法来确保任何与 UI 相关的 WCF 调用无论如何都会被执行并具有最高优先级。

我们的主要问题是我们需要坚持这种部署场景，Windows 服务、网站和 SQL 服务器都运行在一台机器上。即使 CPU 利用率为 100%，我们也需要保持响应式 UI。我不确定从哪里开始寻找解决方案...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T14:02:52.390

听起来您应该将服务端点拆分到两台单独的主机上，一台用于大容量或流程密集型操作，另一台用于低延迟操作。大容量端点将离线处理队列，而低延迟端点将同步处理来自 UI 的请求。

当您尝试在同一进程中同时平衡高容量和低延迟的冲突资源需求时，您遇到的这类问题很典型。

如果您不能以这种方式扩展，那么我真的无法建议您对此做些什么，并且必须为没有直接回答您的问题而道歉。

您可以看到的另一件事是异步移动所有内容并使用诸如[CQRS 之](http://en.wikipedia.org/wiki/CQRS)类的模式来分离您的读取和写入需求。

# python - 大阵列的优化平均？

> ID：10050695
> 
> 赞同：1
> 
> 时间：2012-04-07T00:32:39.143
> 
> 标签：python, average

所以我有一个 .wav 文件。从这里我得到了数据：正如预期的声音文件一样，它是立体声的，所以数据看起来像

## 清单 1（原始清单）

> [ [1,2], [2,3], [4,9], [1,5], [1,7], ....]

注意：我只是编造了这些数字，但重点是它是一个嵌套列表。这里的问题是我正在对此进行 FFT，因此我只想使用两个通道的平均值，所以我想要：

## 清单 2（平均）

> [[1.5]、[2.5]、[6.5]、[3]、[4]、....]

所以为此我做了：

```
averaged_array =  [sum(x)/len(x) for x in original_list] 
```

我假设 len(x) 是一个常数时间运算，即使它总是 2。

这里的问题是我相信原始列表的长度> 900,000。在我的家用电脑上，我可以在大约 46 秒内平均它。在我必须用于演示的计算机上，大约需要 121 秒。这是一个相当大的增长，坦率地说，在它运行时必须等待是不好的。无论如何我可以优化它以减少所需的时间吗？

注意：我相信这是一台双核计算机，所以我不能并行运行它（我想？）。我可以通过 ssh 进入我已获准使用的服务器（运行一些 i7）。如果我以某种方式 ssh 并在那里进行计算会更好吗？我相信我使用的原始计算机约为 2 ghz，但它是旧的戴尔型号（几年前的系列）。此外，McAfee 和另一个进程也占用了大约 50% 的处理时间，我无权终止这些进程。

如果我这样做：

*   我将如何通过 SSH 在这台远程计算机上进行计算？（我使用的是 python 2.7，并且真的不希望安装任何外部库，因为这不是我的计算机而是组织计算机）
*   我能以某种“顺序”进行计算吗？我认为在并行执行操作时，您无法维持秩序，因为一旦打开核心来计算它就会完成。按顺序我的意思是：我希望列表将平均值保持在原始列表的相同索引处。前任。[ [1,2], [3,4]] 应该给出 [ [2.5], [3.5]] 而不是 [ [3.5], [2.5]]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T00:42:33.797

对于此类任务，您确实希望使用事实上的标准[NumPy](http://numpy.org/)模块。该模块以有效的方式处理大型数组（如果您需要，它甚至可以为您执行 FFT）。

以下是如何计算平均值：

```
>>> a = numpy.array([[1,2], [2,3], [4,9], [1,5], [1,7]])
>>> numpy.average(a, axis=-1)
array([ 1.5,  2.5,  6.5,  3\. ,  4\. ]) 
```

在我的机器上对 100 万对数组执行平均只需要 22 毫秒。

然后可以使用`numpy.fft`模块完成 FFT。

# iphone - 是否需要 Xcode 4 才能继续 iPhone 开发？

> ID：10050697
> 
> 赞同：0
> 
> 时间：2012-04-07T00:32:58.533
> 
> 标签：iphone, ios, xcode, backwards-compatibility

自从我上次为 iPhone 编写 XCode 已经有一段时间了，我注意到有一个新版本的 XCode，XCode 4，根据这个链接[https:// ，它似乎只适用于 Lion OSX developer.apple.com/xcode/](https://developer.apple.com/xcode/)。

我从一个朋友那里听说 Lion 在应用程序领域造成了很大的破坏，所以我想知道使用旧版本的 Xcode 开发应用程序是否存在任何兼容性问题。

我目前在 Snow Leopard OSX 版本 10.6.8 上运行，并且正在使用 Xcode 3.2.3。此设置是否仍然能够创建功能齐全的应用程序，还是需要更新/升级？

与此有关的任何和所有额外信息也将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T00:46:36.520

如果你想为 iOS 5 构建，我认为你必须升级你的 Xcode。

是的，Xcode 4 有很多 bug，性能不如 Xcode 3。另一方面，Xcode 4 中的开发过程非常精简。有很多新功能可以让您的开发过程更轻松。我最喜欢的是自动设备配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T01:55:13.687

您无需升级到 Lion 即可使用 Xcode 4 进行开发。Xcode 4.2 在 Snow Leopard 上运行，可在下面的链接中找到。此版本将允许您针对最高 5.0 的 iOS 进行开发。如果你想为 iOS 5.1 开发，那么你需要 Xcode 4.3.2，它只适用于 Lion。

[https://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_4.2_for_snow_leopard/xcode_4.2_for_snow_leopard.dmg](https://developer.apple.com/devcenter/download.action?path=/Developer_Tools/xcode_4.2_for_snow_leopard/xcode_4.2_for_snow_leopard.dmg)

# regex - 用于在 vb.net 中的 2 条评论之间提取 html 的正则表达式代码不起作用

> ID：10050699
> 
> 赞同：0
> 
> 时间：2012-04-07T00:33:11.120
> 
> 标签：regex, vb.net, html-parsing

我正在尝试在 2 条评论之间提取部分 html。

这是测试代码：

```
Sub Main()

    Dim base_dir As String = "D:\"
    Dim test_file As String = base_dir & "72.htm"

    Dim start_comment As String = "<!-- start of content -->"
    Dim end_comment As String = "<!-- end of content -->"

    Dim regex_pattern As String = start_comment & ".*" & end_comment
    Dim input_text As String = start_comment & "some more html text" & end_comment 

    Dim match As Match = Regex.Match(input_text, regex_pattern)

    If match.Success Then
        Console.WriteLine("found {0}", match.Value)
    Else
        Console.WriteLine("not found")
    End If

    Console.ReadLine()

End Sub 
```

以上工作。

当我尝试从磁盘加载实际数据时，以下代码失败。

```
Sub Main()

    Dim base_dir As String = "D:\"
    Dim test_file As String = base_dir & "72.htm"

    Dim start_comment As String = "<!-- start of content -->"
    Dim end_comment As String = "<!-- end of content -->"

    Dim regex_pattern As String = start_comment & ".*" & end_comment
    Dim input_text As String = System.IO.File.ReadAllText(test_file).Replace(vbCrLf, "") 

    Dim match As Match = Regex.Match(input_text, regex_pattern)

    If match.Success Then
        Console.WriteLine("found {0}", match.Value)
    Else
        Console.WriteLine("not found")
    End If

    Console.ReadLine()

End Sub 
```

HTML 文件包含开始和结束注释以及中间的大量 HTML。HTML 文件中的某些内容是阿拉伯语。

感谢和问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T00:51:30.780

尝试像这样`RegexOptions.Singleline`传入`Regex.Match(...)`：

```
Dim match As Match = Regex.Match(input_text, regex_pattern, RegexOptions.Singleline) 
```

这将使点的`.`匹配换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T00:34:57.777

我不知道`vb.net`，但是否`.`匹配换行符或者您必须为此设置一个选项？考虑使用`[\s\S]`而不是`.`包含换行符。

# machine-learning - 对Adaboost算法的基本了解

> ID：10050705
> 
> 赞同：5
> 
> 时间：2012-04-07T00:34:43.873
> 
> 标签：machine-learning, adaboost

我是一名机器学习新手，试图了解 Adaboost 的工作原理。

我读过很多文章，解释了**Adaboost**如何利用一组**弱*******分类*器** 来创建一个**强分类器**。

但是，我似乎无法理解“ **Adaboost 创建了一个强分类**器”的说法。

当我查看[Adaboost](http://codingplayground.blogspot.com/2009/03/adaboost-improve-your-performance.html)的实现时，我意识到它并没有“实际上”创建一个强分类器，而是在测试阶段以某种方式计算出“**如何使用一组弱分类器来获得更准确的结果**”，这反过来又就像一个**强分类器**“**集体**”。

所以从技术上讲，没有创建单一的**强分类**器（但是一组弱分类器共同充当强分类器）。

**如果我错了，请纠正我。如果有人可以对此发表一些评论，那就太好了**。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T00:53:45.133

分类器是一个接收输入（特征向量）并返回输出（标记向量）的黑盒。所以称某事物为分类器，你只关心它做了***什么***，而不关心它是***如何***做的。AdaBoost的分类器可以看成这样的黑盒，所以它确实是一个单一的分类器，即使它内部使用了几个弱分类器来产生这样的输出。

# recursion - 为什么 OpenCL 不支持递归？

> ID：10050708
> 
> 赞同：4
> 
> 时间：2012-04-07T00:35:47.143
> 
> 标签：recursion, opencl

我目前正在开发一个 OpenCL 项目，我想知道为什么它不支持递归。它与并行性有关吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T07:43:21.930

我认为它与目标硬件有关。支持递归需要一些特定类别的 OpenCL 设备（即 GPU）所不具备的硬件功能。没有它们，维护调用堆栈和进行间接代码分支是不切实际的。出于同样的原因，NVIDIA 不支持所有支持 CUDA 的硬件上的递归。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-07T17:13:44.100

它不是 OpenCL，而是它的 GPU 硬件。AMD 已经制定了支持递归的未来指令集架构。GPU 有大量的寄存器（高达 32 K）。所以要小心要求和得到什么。对于递归调用，推送/弹出 32K 寄存器不会很快。

# android - 升级到姜饼后无法更改软键盘进入“完成”按钮

> ID：10050713
> 
> 赞同：4
> 
> 时间：2012-04-07T00:36:46.437
> 
> 标签：android, keyboard, android-2.3-gingerbread

很简单： `inputField.setImeOptions(EditorInfo.IME_ACTION_DONE);` 用来让我的软键盘显示“完成”键而不是回车。

由于我将手机（三星 Galaxy S）更新为姜饼，这行代码没有任何效果。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T15:16:50.900

我也看到过这个问题，我相信它发生在你没有设置`inputType`. 实际上，如果设置为（默认值） ，则所有`imeOptions`属性（以及其他一些属性）都会被完全忽略。`inputType``EditorInfo.TYPE_NULL`

所以试一试其中一个（我选择了`next`，但你可以输入任何类型）：

**XML:**

```
 android:inputType="text"
    android:imeOptions="actionNext" 
```

**JAVA**

```
 text.setInputType(EditorInfo.TYPE_CLASS_TEXT);
    text.setImeOptions(EditorInfo.IME_ACTION_NEXT); 
```

如果您真的想发疯，您可以使用`setImeActionLabel('Add', SOME_ID)`并完全配置操作键（也有 xml 等效项）。

话虽如此。我对您的个人设备可能完全错误，但我认为这很容易测试并且似乎总能解决我的问题，所以我应该分享。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T03:55:09.217

我一直在研究同样的问题。您设备上的 IME（输入法编辑器）有问题，不会在软键盘上显示完成按钮或下一步按钮。HTC sense 有自己的软键盘，不识别 ime 指令。还有其他的，你的三星显然是其中之一。这是我第一次陷入 android 碎片化。

我确实尝试在 XML 中设置它，膨胀并创建一个辅助类，以及一堆其他东西。我松了一口气，发现它根本不起作用。

所以现在我们必须添加一个完成按钮，而不是键盘编辑器完成输入。我使用相对布局将其添加到编辑文本的末尾以对齐它们。将 IME 代码留给那些具有该功能的人......这是唯一的快速解决方案，另一个是为您的应用程序编写一个完整的自定义软键盘。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-17T13:59:36.550

I've checked inside the method `TextView.setInputType` and at the end of this method, InputMethodManager restarts the keyboard. So this is the trigger to change the imeOptions, **not** InputType.TYPE_NULL.

```
private void changeInputTypeAndImeOptions(EditText fieldValue, int inputType, int imeOption) {
    if (inputType == InputType.TYPE_NULL) inputType = fieldValue.getInputType();
    fieldValue.setImeOptions(imeOption | EditorInfo.IME_FLAG_NO_FULLSCREEN);
    //Makes the trigger for the imeOptions to change while typing!
    //fieldValue.setInputType(InputType.TYPE_NULL);
    fieldValue.setInputType(inputType);
    InputMethodManager imm = (InputMethodManager)
            mContext.getSystemService(Context.INPUT_METHOD_SERVICE);
    if (imm != null) imm.restartInput(fieldValue);
} 
```

**NOTE:**

Setting the setInputType with same previous value, doesn't give any effect so better to restart imm (this doesn't close the kb, only refreshes the buttons).

Also `fieldValue.setInputType(InputType.TYPE_NULL);` has a bad effect the return button is visible during the multiple set, that's why is commented and it should be removed. Better restart the kb with imm.

# google-play - 为什么我自己的应用程序与我的手机不兼容？

> ID：10050715
> 
> 赞同：0
> 
> 时间：2012-04-07T00:37:21.767
> 
> 标签：google-play

我制作了一个应用程序，并在我的手机上对其进行了全面测试。当我将它上传到市场时，它说它与我的手机不兼容 - 为什么会这样，有什么方法可以手动包含我的设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T19:08:00.037

事实证明，因为我已将我的应用程序设置为使用保护（App-Private 数据文件夹），所以它不会安装到有根手机上。我的手机已经root了。

# javascript - JavaScript - 输入一个日期，然后自动填充下一个不同的字段

> ID：10050716
> 
> 赞同：0
> 
> 时间：2012-04-07T00:37:23.143
> 
> 标签：javascript

嗨，这让我发疯了。我不是开发人员。试图让这个工作。用户使用日期对象（日历）将日期（雇用日期）输入表单 下一个字段应采用该日期并减去今天的日期以获得就业时间。但是我在该领域变得不确定，并且我原来的雇用日期消失了。这是我所拥有的，请帮助，非常感谢！

```
//grab date of hire
try{document.getElementById("dData_DOH").onchange =          custom_calculateDate;}catch(e){}
//not sure if necessary - field that the difference should go to
try{document.getElementById("dData_LengthEmp").onblur =     insertDate;}catch(e){}

//Function to grab input hire date 
//Create variable for now
//Create variable for difference

function custom_calculateDate(){
 var hireDate = document.getElementById("dData_DOH").value = "";
     var timeNow= new Date();
 var diff = Math.abs(timeNow - hireDate);
document.getElementById("dData_DOH").setAttribute('value',     custom_calculateDate());
     }

//Function to get the difference into the LengthEmp field    
function insertDate() {
document.getElementById("dData_LengthEmp").setAttribute("",     custom_calculateDate());
} 
```

我知道这是完全错误的，因为我说过我不是开发人员或程序员，我无法弄清楚如何将这些信息放入该字段并让我的原始字段仍然显示。

谢谢您阅读此篇！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T00:40:30.710

使用`value`代替`setAttribute`

```
document.getElementById("dData_DOH").value = custom_calculateDate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T00:59:23.820

哇哇哇。

我将尝试通过向您解释原因来重写您的代码：

```
// Firstly, the onchange event doesn't work on IE for text inputs, prefer onblur
document.getElementById('dData_DOH').onblur = function(e) {
    // Now let's get some variables
    var hireDate = this.value, // "this" refers to the element that triggered the event
        now = new Date(),
        // You were on the right track for the difference, almost!
        diff = Math.abs(new Date(now.getTime() - hireDate.getTime()))

    // Finally, just don't change the original field, but the one you wanted to modify
    document.getElementById('dData_LengthEmp').value = diff.toTimeString() // Get the time as a readable format
} 
```

我还没有测试过这个解决方案，但它应该能让你走上正轨。

顺便说一句，不要使用 try/catch。

# php - 保护 php 联系表

> ID：10050718
> 
> 赞同：0
> 
> 时间：2012-04-07T00:37:43.663
> 
> 标签：php, wordpress, forms, contact-form

我按照本教程制作了一个简单的 php 联系表：http: [//www.catswhocode.com/blog/how-to-create-a-built-in-contact-form-for-your-wordpress-theme](http://www.catswhocode.com/blog/how-to-create-a-built-in-contact-form-for-your-wordpress-theme)

最大的问题是这种表单处理不安全，我听说人们可以用它来发送垃圾邮件和/或入侵我的服务器。

**使此表单更安全所需的基本步骤是什么？** Ps：如果可以避免的话我不想使用re-captcha...

**编辑：**我需要关于哪些 php 函数用于过滤和确保表单以“正确方式”提交而不是更改和/或用于破解我的网站或向其他人发送电子邮件的建议（使用该网站向其他人发送垃圾邮件）其他人）。我只需要使用 strip_slashes 吗？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T00:44:29.610

一种方法：如果您不是一个巨大的网站，那么不太可能有人会想出这个/花时间去解决这个问题。

您可以使用一些棘手的 JS 来处理点击时的标记。因此，您的服务器在后端渲染阶段向页面上的可点击/可聚焦元素发出令牌 ID。将这些记录在数据库或数据文件中。然后，当用户点击并提交时，您可以比较通过 onclick() 函数发送的 id。您还可以应用一些启发式方法来确定点击历史的节奏是否合理。帖子太快了，不是人类，也就是说，即使他们编写了劫持令牌 ID 的脚本并自动提交，您也可以检查点击事件之间的时间是否自动显示。最近注册了推特账号？他们使用被动人体检测，虽然不是 100% 万无一失，但它更慢且更难破解。有人真的想入侵/发送垃圾邮件您的网站。

**重要步骤 2：**如果您认为这会破坏您的页面，请去除/URLEncode 奇怪的字符。破坏事物的常见方法是 " 和 ' 和 ：

另一种方式：[http ://areyouahuman.com/](http://areyouahuman.com/)

只要您使用加密方法来验证人性，而没有糟糕的 CAPTCHA 是可能的。我的意思是，也不要忽略您的标题。这些是免费的方式。

关键是要有足够的复杂性来解决 NP-Complete 问题。[http://en.wikipedia.org/wiki/NP-complete](http://en.wikipedia.org/wiki/NP-complete)

当人工智能可以自行解决多个复杂的人类问题的那一天到来时，除了请求篡改之外，我们还有其他事情要担心。

[http://louisville.academia.edu/RomanYampolskiy/Papers/1467394/AI-Complete_AI-Hard_or_AI-Easy_Classification_of_Problems_in_Artificial](http://louisville.academia.edu/RomanYampolskiy/Papers/1467394/AI-Complete_AI-Hard_or_AI-Easy_Classification_of_Problems_in_Artificial)

另一家进行有趣研究的公司是[http://www.vouchsafe.com/play-games](http://www.vouchsafe.com/play-games)，他们实际上使用旨在欺骗 RTT 的游戏来训练 RTT 如何更容易被人类解决！

这是一篇关于 NP-Hard 问题的精彩文章。我可以在这里看到一个巨大的可能性：[http ://www.i-programmer.info/news/112-theory/3896-classic-nintendo-games-are-np-hard.html](http://www.i-programmer.info/news/112-theory/3896-classic-nintendo-games-are-np-hard.html)

# sql-server-2008 - SSIS Excel - 检索最小日期值并将其存储到变量中

> ID：10050721
> 
> 赞同：0
> 
> 时间：2012-04-07T00:38:21.430
> 
> 标签：sql-server-2008, ssis

我有一个 Excel 源，它有 1000 行，大约 10 列，其中一列是日期字段，我们必须检索最小日期值并将其分配给 ssis 中的变量。你们能给我一个脚本或步骤吗将该值映射到变量...这样我就可以在控制流任务中使用它来使用变量值执行截断操作。请告知

感谢您在这方面的帮助。罗什..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:42:24.450

这相当简单：您使用执行 SQL 任务来检索值并将其存储在变量中。基本步骤：

A. 创建一个 Excel 连接管理器，将其指向您的文件

B. 创建一个变量来存储值

C. 添加执行 SQL 任务

1.  连接类型：EXCEL
2.  指定连接管理器
3.  结果集：单行
4.  SQLSourceType：直接输入
5.  SQL语句：`select max(fieldname) as fieldname from [sheetname$]`

在结果集选项卡中，添加一行，将 ResultName 设置为`fieldname`，并在 Variable Name 列中添加之前创建的变量。

请注意，由于 required ，因此 sheetname 限定符（方括号）是必需的`$`。如果您的字段（列）名称中包含空格，您还必须对其进行限定：`[field name]`

# python - 使用 django 1.4 的“应用程序”级导入？

> ID：10050724
> 
> 赞同：3
> 
> 时间：2012-04-07T00:38:40.603
> 
> 标签：python, django

我有一个在 1.2 天内开发的 django 应用程序。我现在正在尝试将其移植到 1.4 项目格式。

我的项目设置的旧方式如下：

```
django_project/
    settings.py
    manage.py
    urls.py
    app1/
    app2/
    app3/ 
```

我将其更改为使用新的 manage.py，我的目录如下所示：

```
django_project/
    manage.py
    project
        urls.py
        wsgi.py
        app1/
        app2/
        app3/ 
```

问题是我在我的所有代码中都导入了这样的东西：

```
from app1.models import SomeModel 
```

现在给了我一个导入错误。这样做可以解决它：

```
from project.app1.models import SomeModel 
```

我真的不想通过我的项目来更改所有这些导入。有什么我想念的吗？有没有更简单的方法？或者这就是你应该这样做的方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T02:53:44.587

您不应该将您的应用程序放入`project`模块中。和以前一样， Django`startapp`将它们放在项目根目录中。`project`模块仅用于项目范围的设置、url 和类似的东西。您的应用程序应位于项目根目录之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T04:09:29.760

您可以保留当前布局，因为它可以正常工作。对于新项目，我认为您可以开始将您的应用程序放入“项目”模块中。如果您查看[1.4 发行说明](https://docs.djangoproject.com/en/dev/releases/1.4/#updated-default-project-layout-and-manage-py)，您会看到它是推荐的布局。但是，如果您正在开发泛型应用程序（您可以在多个项目中使用），那么更好的地方可能是项目根目录。

# php - 循环遍历记录，更新一条记录，然后退出

> ID：10050729
> 
> 赞同：1
> 
> 时间：2012-04-07T00:41:13.463
> 
> 标签：php, mysql

我想从我的表中选择所有记录并循环遍历所有这些记录，直到找到 numtimespaid 列等于 0 的记录。一旦找到该列，我想将该记录更新为 2，然后退出。这是我所拥有的无法正常工作的内容：

```
$query1 = "SELECT * FROM ".$line." ORDER BY datestamp, timestamp";
$result1 = mysql_query($query1) or die(mysql_error());
while($row = mysql_fetch_array($result1)){
    if ($row[numtimespaid] == 0) {
        $queryupdate="UPDATE ".$line." SET numtimespaid=1";
        $resultu=mysql_query($queryupdate);
        break;
        }
    } 
```

关于我做错了什么和/或正确的做法有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T00:43:42.300

没有必要从`SELECT`语句中循环遍历行集。您可以简单地使用该值更新第一行。此查询将准确更新一条匹配的记录`numtimespaid = 0`。如果要更新符合该条件的所有行，只需删除`LIMIT 1`.

```
$result = mysql_query("UPDATE $line SET numtimespaid=1 WHERE numtimespaid = 0 ORDER BY datestamp, timestamp LIMIT 1"); 
```

顺便说一句，我们不知道它的内容`$line`是什么，但希望你已经正确过滤了来自用户输入的值。如果确实来自用户输入，建议对照可能的表名白名单检查其值：

```
// $line can be one of table1,table2,table3
if (!in_array($line, array('table1','table2','table3')) {
  // FAIL, don't execute the query
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T00:57:47.857

```
if ($row[numtimespaid] == 0) { 
```

通常被解释为 numtimespaid 是一个未定义的常量。在它周围加上引号，如下所示：

```
if ($row['numtimespaid'] == 0) { 
```

然后，意识到迈克尔的回答总体上更好。

# php - 从表中找出相关数据

> ID：10050736
> 
> 赞同：1
> 
> 时间：2012-04-07T00:43:35.340
> 
> 标签：php, mysql, codeigniter

我的 mysql 数据库中有三个表，如下所示： ![在此处输入图像描述](../Images/2b1d6d32d71aaa0eff65f9cca7b3d669.png)

# 编辑

“成员”表包含一些成员的名称和代码。现在，表“Boss”包含已被选为某事件 Boss 的成员的姓名。每个老板至少有一个下属（请查看下属表）。

现在我要做的是找出 Bon Jovi（请检查表 table:members）关联的名称和它们的点。当发现有条件时...如果 table:boss 中的“condition_type”为 1，则下属的值将在右侧，如果 table:boss 中的“condition_type”为 0，则下属的值将在左侧。

现在我试图找出的内容如下所示。

![在此处输入图像描述](../Images/8d78df4eb7dc56e34f65a67ded010df8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T06:24:07.230

好的，我已经为您找到了解决方案，我正在发布

```
$condition  = 1;// Condition will be provided by you for selection. Could be zero  
$data   =   array(
        'members.name',
        'subordinates.points',
        'subordinates.event'
);

$this->db->select($data);
$this->db->join('members','members.code = subordinates.member_code','left');
$this->db->join('boss','boss.event = subordinates.event','left');
$this->db->where('boss.condition_type',$condition);
$this->db->where('boss.event    =   subordinates.event');
$this->db->get('subordinates'); 
```

此外，我在选择中有事件，以便您识别查询将带来的事件差异。请测试一下，看看它是否适合您。列名可能略有不同。一个好的方法是像这样使用表之间的简单易懂的关系。

```
Table1 :  members
Columns : id , code , name
Table2 :  boss
Columns : id , event , member_code , condition_type
Table3 :  subordinates
Columns : id , boss_event , member_code , points 
```

# iphone - 切换 xib 视图而不携带来自前一屏幕的命令

> ID：10050738
> 
> 赞同：0
> 
> 时间：2012-04-07T00:43:45.967
> 
> 标签：iphone, ios, xcode

自从我开始使用 xCode 以来，我一直在使用故事板。今天我一直在尝试使用 xib 文件的旧方法。

我的第一个视图有一个加速度计代码，当我在第二个视图上时它仍然处于活动状态。

有没有办法**阻止**第二个视图控制器使用第一个视图中的代码？

我将第二个视图头文件导入到第一个视图实现文件中，对吗？如果我删除该导入，我会收到错误。

```
//
//  ViewController.m

#import "ViewController.h"
#import "ViewController2.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{

    [super viewDidLoad];

}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

-(void)viewWillAppear:(BOOL)animated{
    [self startAccel];
    //[self view];

}

-(void)viewWillDisappear:(BOOL)animated{
    [self stopAccel];
    //[self view];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation

    {

    return ((interfaceOrientation == UIInterfaceOrientationPortrait) || (interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown));

}

-(void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration{

    double const kThreshold = 1.7;
//    double const kThreshold = 2.0;
    if ( fabsf(acceleration.x) > kThreshold
        || fabsf(acceleration.y) > kThreshold
        || fabsf(acceleration.z) > kThreshold){

        int randomNumber = arc4random() % 3 + 1;

        NSURL *soundURL = [NSURL fileURLWithPath:[[NSBundle mainBundle]pathForResource:[NSString stringWithFormat:@"Sound%02d", randomNumber] ofType:@"wav"]];

        AVAudioPlayer * soundPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:soundURL error:nil];

        [soundPlayer prepareToPlay];
        [soundPlayer play];

    }
}

-(void)startAccel{
    UIAccelerometer * accel = [UIAccelerometer sharedAccelerometer];
    accel.delegate = self;
    accel.updateInterval = .25;
}

-(void)stopAccel{
    UIAccelerometer * accel = [UIAccelerometer sharedAccelerometer];
    accel.delegate = nil;
}

-(IBAction)View2:(id)sender;{
    ViewController2 *V2 = [[ViewController2 alloc]
                                              initWithNibName:@"ViewController2"
                                              bundle:nil];

    [self.view addSubview:V2.view];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T00:50:21.467

第二个控制器并没有真正**使用**第一个控制器的代码，但是，如果您在显示第一个视图时调用了 startAccelerometerUpdates，您可能希望停止它们，因为如果它不需要它们，您将要呈现第二个控制器。

# php - 使用 zf configure db-adapter 时无事可做

> ID：10050739
> 
> 赞同：0
> 
> 时间：2012-04-07T00:44:18.953
> 
> 标签：php, zend-framework

我正在学习 Zend 框架。

当我在命令提示符下输入这一行时：

```
zf configure db-adapter 
```

我有 ：

```
Nothing to do! 
```

我错了吗？我正在阅读这个页面： http: [//framework.zend.com/manual/en/learning.quickstart.create-model.html](http://framework.zend.com/manual/en/learning.quickstart.create-model.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T02:48:33.520

是的，他们将命令包装成多行，让它有点难以分辨。

无需换行的快速启动的完整命令是：

```
zf configure db-adapter 'adapter=PDO_SQLITE&dbname=APPLICATION_PATH "/../data/db/guestbook.db"' production 
```

如快速入门所示：

```
% zf configure db-adapter \
> 'adapter=PDO_SQLITE&dbname=APPLICATION_PATH "/../data/db/guestbook.db"' \
> production 
```

该`\`字符告诉外壳程序在回车后期待更多的命令输入，而不是尝试处理它。只是他们表明他们的`>`外壳正在等待当前命令的更多输入。

您必须复制他们放置的内容并删除`>`以使其正常运行，或复制上面的单行版本。

# arrays - 访问 numpy 数组中对象的属性

> ID：10050741
> 
> 赞同：1
> 
> 时间：2012-04-07T00:44:22.310
> 
> 标签：arrays, numpy

我有一个 numpy 自定义对象数组。如何获得包含这些对象的特定属性值的新数组？

例子：

```
import numpy as np

class Pos():
   def __init__(self, x, y):
      self.x = x
      self.y = y

arr = np.array( [ Pos(0,1), Pos(2,3), Pos(4,5) ] )

# Magic line
xy_arr = .... # arr[ [arr.x,arr.y] ]

print xy_arr
# array([[0,1],
         [2,3],
         [4,5]]) 
```

我应该补充一点，我进行这种操作的动机是计算数组中对象的质心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T17:59:25.280

通常，当我有多个属于一起的数量并且我想从 numpys 索引功能中受益时，我会使用记录数组。请注意，如果您执行大量附加/删除操作，numpy 在速度方面可能相当低效。

如果我正确理解了您的评论，这是一个示例，其中第三个选择了两个值：

```
import numpy as np

# create a table for your data
dt = np.dtype([('A', np.double), ('x', np.double), ('y', np.double)])
table = np.array([(1,1,1), (2,2,2), (3,3,3)], dtype=dt)

# define a selection mask
selection = table['A'] > 1.5
columns = ['x', 'y']

print table[selection][columns] 
```

一个很好的副作用是使用 h5py 保存此表非常简单方便，因为您的数据已经被标记。

# c# - 在读取文本文件时，它只读取其中的一部分

> ID：10050747
> 
> 赞同：3
> 
> 时间：2012-04-07T00:44:52.460
> 
> 标签：c#, streamreader

我正在尝试读取一个大文本文件（4000 多行）并将每一行输出到控制台。我正在使用以下代码

```
 using (var reader = new StreamReader("list1.txt"))
        {
            while (!reader.EndOfStream)
                Console.WriteLine(reader.ReadLine().Trim());
        }

        Console.Read(); 
```

这会读取这些行，但问题是读取从第 4113 行开始，而它应该从第 1 行开始，对吗？所以这意味着我只能从文本文件中得到 100 行左右。为什么会发生这种情况？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T00:56:12.370

根据用户的建议，我需要增加 Bufferheight 以适应文本行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T00:58:05.007

您可能会发现输出窗口只显示最后`N`几行，`N`大约是 100 行。换句话说，回滚缓冲区比您想象的要小。

您可以通过将代码更改为以下内容来检查这一点：

```
int numlines = 0;
using (var reader = new StreamReader("list1.txt")) {
    while (!reader.EndOfStream) {
        Console.WriteLine(reader.ReadLine().Trim());
        numlines++;
    }
}
Console.WriteLine("Wrote " + numlines + " lines.");
Console.Read(); 
```

这将输出最后处理的行数。

您可以使用以下命令*更改*控制台高度：

```
Console.BufferHeight = 30000; 
```

# php - PHP header("位置：$url");

> ID：10050749
> 
> 赞同：0
> 
> 时间：2012-04-07T00:45:28.977
> 
> 标签：php, session, http-headers

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

在这里我有一个奇怪的问题来保护我的页面，检查会话是否启动，如果没有重定向到登录，

```
 <?php 
require_once ('includes/config.inc.php'); 

// Start output buffering:
ob_start();

// Initialize a session:
session_start();

// Check for a $page_title value:
if (!isset($page_title)) {
    $page_title = 'User Registration';
}

// If no first_name session variable exists, redirect the user:
if (!isset($_SESSION['first_name'])) {

    $url = BASE_URL . 'index.php'; 
    ob_end_clean(); // Delete the buffer.
    header("Location: $url");
    exit(); // Quit the script.

}
?> 
```

我收到了这个错误：在第 8 行：

> session_start() [function.session-start]：无法发送会话缓存限制器 - 标头已发送

有人可以发布一个好的解决方案来检查会话是否已启动，如果没有重定向到登录页面，则留在页面上？Txanks

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T00:46:15.037

这是你的问题：

```
 <?php 
^^^^ 
```

在标头发送之前，您不能输出**任何**内容；包括空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T00:48:54.177

无论何时，您都会看到`headers already sent`，这意味着在 PHP 发送标头之前正在输出某些内容。

在您的情况下，它是 Oli Charlesworth 所说的 PHP 标记之前的附加源。

# sed - 如何将查找和替换限制为仅 CSV 中的一列？

> ID：10050753
> 
> 赞同：3
> 
> 时间：2012-04-07T00:46:14.283
> 
> 标签：sed, awk, replace

我有一个 4 列的 CSV 文件，例如：

```
0001 @ fish @ animal @ eats worms 
```

我曾经`sed`对文件进行查找和替换，但我需要将此查找和替换限制为仅在第 3 列中找到的文本。

我怎样才能让查找和替换只发生在这一列上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T01:06:25.080

你确定要使用`sed`吗？怎么样[`csvfix`](http://code.google.com/p/csvfix/)？您的 CSV 是否美观且简单，没有引号或嵌入的逗号或其他使正则表达式变得不那么令人满意的处理通用 CSV 文件的方式？我假设 the`@`是您格式中的“逗号”。

考虑使用`awk`而不是`sed`：

```
awk -F@ '$3 ~ /pattern/ { OFS= "@"; $3 = "replace"; }' 
```

可以说，您应该有一个设置 OFS 一次的 BEGIN 块。对于一行输入，它没有任何可能性（你可能也很难衡量一百万行输入的差异）：

```
$ echo "pattern @ pattern @ pattern @ pattern" | 
> awk -F@ '$3 ~ /pattern/ { OFS= "@"; $3 = "replace"; }'
pattern @ pattern @replace@ pattern
$ 
```

如果`sed`仍然看起来很吸引人，那么：

```
sed '/^\([^@]*@[^@]*\)@pattern@\(.*\)/ s//\1@replace@\2/' 
```

例如（并注意输入和输出略有不同 - 如果需要，您可以将其修复为`awk` *非常*容易处理）：

```
$ echo "pattern@pattern@pattern@pattern" |
> sed '/^\([^@]*@[^@]*\)@pattern@\(.*\)/ s//\1@replace@\2/'
pattern@pattern@replace@pattern
$ 
```

第一个正则表达式查找一行的开头、一个非符号字段、一个符号字段、另一个非符号字段并记住该批次；它查找一个 at 符号、模式（它必须在第三个字段中，因为前两个字段已经匹配）、另一个 at 符号，然后是该行的剩余部分。当该行匹配时，它用前两个字段（未更改，根据需要）替换该行，然后添加替换的第三个字段，以及该行的剩余部分（未更改，根据需要）。

如果您需要编辑而不是简单地替换第三个字段，那么您可以考虑使用`awk`Perl 或 Python。如果您仍然受限于`sed`，那么您探索使用保持空间来保持行的一部分，同时在模式空间中操作另一部分，并最终在打印之前从保持空间和模式空间重新集成所需的输出行线。这几乎和听起来一样混乱。实际上，可能比听起来更混乱。我会选择 Perl（因为我很久以前就学会了它，而且它很容易做到这一点），但你可以使用任何`sed`你喜欢的非工具。

* * *

Perl 编辑第三个字段。请注意，默认输出`$_`必须从数组中的自动拆分字段重新组合`@F`。

```
$ echo "pattern@pattern@pattern@pattern" | sh -x xxx.pl
> perl -pa -F@ -e '$F[2] =~ s/\s*pat(\w\w)rn\s*/ prefix-$1-suffix /; $_ = join "@", @F; ' "$@"
pattern@pattern@ prefix-te-suffix @pattern
$ 
```

*一个解释。* 意思是“循环，在每次迭代结束时`-p`读取行`$_`并打印”。`$_`意思是“`-a`自动拆分`$_`成数组`@F`”。`-F@`表示字段分隔符`@`是. 紧随其后的`-e`是 Perl 程序。在 Perl 中，数组从 0 开始索引，因此第三个字段被拆分为`$F[2]`(sigil — the `@`or `$`— 根据您是使用数组中的值还是整个数组中的值而变化。the`=~`是一个匹配运算符；它将 RHS 上的正则表达式应用于 LHS 上的值。替代模式识别零个或多个空格`\s*`，`pat`然后是两个“单词”字符，这些字符被记住`$1`，然后`rn`和零个或多个空格；也许应该有一个`^`and`$`来绑定到字段的开头和结尾。替换是一个空格、'prefix-'、记住的一对字母、'-suffix' 和一个空格。从可能修改的单独字段中`$_ = join "@", @F;`重新组合输入行`$_`，然后将其`-p`打印出来。不像我想要的那样整洁（所以可能有更好的方法来做到这一点），但它确实有效。你可以毫不费力地对 Perl 中的任意字段进行任意转换。Perl 还有一个模块`Text::CSV`（和一个高速 C 版本`Text::CSV_XS`），它可以处理非常复杂的 CSV 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T01:16:43.613

基本上将线分成三部分，中间有你要找的图案。然后保留外件并更换中间件。

`/\([^@]*@[^@]*@\[^@]*\)pattern\([^@]*@.*\)/s//\1replacement\2/`

`\([^@]*@[^@]*@\[^@]*\)`- 收集模式之前的所有内容，包括第三个 @ 和数学之前的任何文本 - 这变成 \1

`pattern`- 你要找的东西

`\([^@]*@.*\)`- 在模式之后收集所有内容 - 这变成 \2

然后将该行更改为`\1`then `replacement`，然后是之后的所有内容`pattern`，即`\2`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T07:19:47.667

这可能对您有用：

```
echo 0001 @ fish @ animal @ eats worms|
sed 's/@/&\n/2;s/@/\n&/3;h;s/\n@.*//;s/.*\n//;y/a/b/;G;s/\([^\n]*\)\n\([^\n]*\).*\n/\2\1/'
0001 @ fish @ bnimbl @ eats worms 
```

解释：

1.  定义要处理的字段（在本例中为第三个）并`\n`在它之前和之后直接插入一个换行符 ( )。`s/@/&\n/2;s/@/\n&/3`
2.  将行保存在保留空间中。`h`
3.  删除两边的字段`s/\n@.*//;s/.*\n//`
4.  现在处理该字段，即全部更改`a's`为`b's`.`y/a/b/`
5.  现在附加原始行。`G`
6.  用新字段替换旧字段（同时删除任何换行符）。`s/\([^\n]*\)\n\([^\n]*\).*\n/\2\1/`

注意，在第 4 步中，模式空间仅包含定义的字段，因此可以在此处执行任意数量的命令，结果不会影响该行的其余部分。

# c++ - C++ std::map 比较方法

> ID：10050760
> 
> 赞同：3
> 
> 时间：2012-04-07T00:48:13.060
> 
> 标签：c++, map, std

我遇到以下代码错误

```
struct MapKey {
    std::string x;
    std::string y;
}

std::map<MapKey, int> m;

if (m.find(key) != m.end()) {
    ......
} 
```

我收到一个错误说，

```
no match for "operator<" in '__x < __y' 
```

我认为问题在于 MapKey 需要一个比较方法，我想知道如何为 Mapkey 实现一个。例如，

```
struct MapKey {
    bool operator<(const MapKey &key) const {
        ... what shall I put here? ...
    }
    std::string x;
    std::string y;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-07T00:59:59.500

在 ' 的定义之后定义它`MapKey`（作为自由函数，而不是成员函数），然后您就设置好了：

```
bool operator <(MapKey const& lhs, MapKey const& rhs)
{
    return lhs.x < rhs.x || lhs.x == rhs.x && lhs.y < rhs.y;
} 
```

确保像`inline`定义在头文件中一样定义运算符，否则您将面临链接器错误的风险。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T01:25:22.590

任何引入[严格弱排序](http://en.wikipedia.org/wiki/Strict_weak_ordering)的函数（可以接受 const 参数）都是可以的。还请记住，您不需要 operator==，但是当且仅当 !(a < b) && !(b < a) 时，两个键 a 和 b 被认为是等效的。

# android-ndk - Android 4.0 为包含的库解包错误的 eabi

> ID：10050765
> 
> 赞同：2
> 
> 时间：2012-04-07T00:49:02.600
> 
> 标签：android-ndk

情况如下：我已经构建了一个本机库，用于在其他应用程序中重新分发。因为我们使用的是 ARMv7 NEON，所以我们发布了两个版本的库：一个用于大多数设备，一个用于 ARMv5/ARMv6 的“后备”有限功能版本。到目前为止一切都很好，而且效果很好。

但是，由于某种原因，在 Nexus S 上运行 Android 4.0.3 的新创建应用程序选择了错误的库版本（armeabi 而不是 armeabi-v7a）。

如果我们深入研究设备文件系统，我们会发现 /data/app/my_app.apk 包含正确版本的库。但是，当Android解压到/data/data/my_app时，我们发现/data/data/my_app/lib/my_lib.so是armeabi版本。但是，奇怪的是，/data/data/my_other_app/lib/my_lib.so 是正确的 armeabi-v7a 版本。

所以问题是：1）WTF？？2) Android 如何决定从 APK 中提取哪个 eabi？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T02:43:09.360

是的，这是 ICS 中的已知错误 - 它选择了错误的库。

在这里阅读：

*   [http://www.moodstocks.com/2012/03/20/ice-cream-sandwich-why-native-code-support-sucks/](http://www.moodstocks.com/2012/03/20/ice-cream-sandwich-why-native-code-support-sucks/)
*   [https://groups.google.com/d/msg/android-ndk/N8FLjvM81pg/2rYeClQZcckJ](https://groups.google.com/d/msg/android-ndk/N8FLjvM81pg/2rYeClQZcckJ)

# java - Java/Selenium RemoteWebDriver/Maven/JUnit - 尝试调用浏览器时获取空会话 ID

> ID：10050768
> 
> 赞同：1
> 
> 时间：2012-04-07T00:49:16.970
> 
> 标签：java, maven, selenium, junit, webdriver

背景/设置：
我在 JUnit 中有一堆测试类。全部通过 Maven 和 Eclipse 配置。每个测试类实例化一个 RemoteWebDriver 实例，并在测试类完成执行后在 tearDown 方法中退出它。

当我尝试通过执行“mvn clean install”来运行所有测试时，一些测试执行得很好，但其余测试由于以下异常（stacktrace）而失败：

```
Tests in error: 
  com.tagged.qa.selenium.tests.gifts.GiftsPageTest: Error communicating with the remote browser. It may have died.(..)
  com.tagged.qa.selenium.tests.tags.TagsPageTest: Error communicating with the remote browser. It may have died.(..)
  addFriendsTest(com.tagged.qa.selenium.tests.friends.FriendsTest): Error communicating with the remote browser. It may have died.(..)
  deleteFriendsTest(com.tagged.qa.selenium.tests.friends.FriendsTest): Error communicating with the remote browser. It may have died.(..)
  com.tagged.qa.selenium.tests.statusupdates.StatusUpdatesTest: Error communicating with the remote browser. It may have died.(..)
  com.tagged.qa.selenium.tests.comments.CommentsTest: Error communicating with the remote browser. It may have died.(..)
  com.tagged.qa.selenium.tests.search.SearchPageTest: Error communicating with the remote browser. It may have died.(..)
  com.tagged.qa.selenium.tests.homepage.HomePageTest: Error communicating with the remote browser. It may have died.(..)
  com.tagged.qa.selenium.tests.wink.WinkPageTest: Error communicating with the remote browser. It may have died.(..)
  com.tagged.qa.selenium.tests.profile.ProfilePageTest: Error communicating with the remote browser. It may have died.(..)
  com.tagged.qa.selenium.tests.footerpagestests.TermsOfServiceTest: Error communicating with the remote browser. It may have died.(..)

Tests run: 18, Failures: 0, Errors: 11, Skipped: 0 
```

检查 target/surefire-reports/ 中失败的单个测试的日志会导致我这样做：

```
org.openqa.selenium.remote.UnreachableBrowserException: Error communicating with the remote browser. It may have died.
Caused by: org.openqa.selenium.WebDriverException: Session ID may not be null. 
```

在测试执行过程中，我注意到浏览器（在我的例子中是 firefox）试图打开但一秒钟后退出。Selenium 服务器记录没有会话 ID。它尝试了几次并退出尝试。之后管道中的所有其他测试由于相同的原因而失败。

令人困惑的是，当我尝试单独运行这些测试时，不会出现这个问题，但是当我尝试使用 maven 一起运行所有这些测试时，这种情况始终如一。请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-23T10:44:36.093

在我的这段代码中遇到了同样的问题。

```
 WebDriver augmentedDriver;
        if(BrowserConfig.getHubURL().equalsIgnoreCase("none"))
            augmentedDriver = getDriver();
        else augmentedDriver = new Augmenter().augment(getDriver());

        LOGGER.info("Just before capture: ");
        LOGGER.info(augmentedDriver.toString());
        byte[] screenshot = ((TakesScreenshot) augmentedDriver).getScreenshotAs(OutputType.BYTES); 
```

发现 driver.quit() 在 getscreenshot 调用之前在流程中被调用。这个b

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T01:10:50.277

我不知道这是否会有所帮助，但我无法通过 maven 使用 3.x 以外的任何版本的 firefox（从我使用 3.18 的内存中）获得 selenium。我在使用更高版本时出现了您的症状。

我尝试了一切，但承认失败并简单地安装并使用旧版本。

至少我们的硒测试奏效了，我们继续做真正的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T01:22:40.077

我不确定，但通常当我在运行一组测试时看到失败，而在运行单个测试时通过，罪魁祸首通常是：

1）线程问题。这些测试是多线程的吗？如果是这样，可能存在某种资源争用。

2）拆解问题。tearDown 中是否发生了某些事情，导致浏览器处于不良状态，以至于新浏览器无法正常启动？

抱歉，我无法提供更多帮助，我不使用 Maven 和 Eclipse 来驱动我的 Selenium 测试。

# ruby-on-rails - Heroku Push - Git 推送到 Heroku 时出错

> ID：10050770
> 
> 赞同：2
> 
> 时间：2012-04-07T00:49:38.570
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, sqlite

当我尝试对heroku（git push heroku master）进行git push时出现错误。我在雪松堆栈上，我的 Gemfile 指定 sqlite 1.3.5。这是错误：

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
   /usr/local/bin/ruby extconf.rb
   checking for sqlite3.h... no
   sqlite3.h is missing. Try 'port install sqlite3 +universal'
   or 'yum install sqlite-devel' and check your shared library search path (the
   location where your sqlite3 shared library is located).
   *** extconf.rb failed ***
   Could not create Makefile due to some reason, probably lack of
   necessary libraries and/or headers.  Check the mkmf.log file for more
   details.  You may need configuration options.
   Provided configuration options:
   --with-opt-dir
   --without-opt-dir
   --with-opt-include
   --without-opt-include=${opt-dir}/include
   --with-opt-lib
   --without-opt-lib=${opt-dir}/lib
   --with-make-prog
   --without-make-prog
   --srcdir=.
   --curdir
   --ruby=/usr/local/bin/ruby
   --with-sqlite3-dir
   --without-sqlite3-dir
   --with-sqlite3-include
   --without-sqlite3-include=${sqlite3-dir}/include
   --with-sqlite3-lib
   --without-sqlite3-lib=${sqlite3-dir}/lib
   --enable-local
   --disable-local
   Gem files will remain installed in /tmp/build_3umr292rjcdek/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.5 for inspection.
   Results logged to /tmp/build_3umr292rjcdek/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.5/ext/sqlite3/gem_make.out
   An error occured while installing sqlite3 (1.3.5), and Bundler cannot continue.
   Make sure that `gem install sqlite3 -v '1.3.5'` succeeds before bundling. 
```

！！无法通过 Bundler 安装 gem。！！Heroku 推送被拒绝，无法编译 Ruby/rails 应用程序

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-07T01:33:15.990

Heroku 告诉您无法`sqlite3-ruby`在 Heroku 平台上编译 gem。

您可能希望将`sqlite3-ruby`gem 移动到 Heroku 上默认未安装的组中。

```
gem "rails"

group :development, :test do
  gem "sqlite3-ruby", :require => "sqlite3"
end

group :production do
  gem "pg"
end 
```

* * *

更新：看来 gem`sqlite3-ruby`是旧的，而`sqlite3`你应该使用新的 gem。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T23:36:00.803

我遇到的一个导致数小时头痛的问题是“水龙头”宝石。在我将它移到“开发”组之前，它对我造成了几乎完全相同的错误：

```
group :production do 
  gem 'taps'
  gem 'pg'
end 
```

不确定这是否直接适用于您，但它产生了 sqlite3 错误，直到我将水龙头放入 :production。希望它会帮助某人。

**编辑**：@cloneofsnake：我没有足够的代表来评论你的答案，但我看到你的 Gemfile 中有“水龙头”宝石。要么摆脱它，要么把它放在 :production 组中；taps 显然对 sqlite3 有一些依赖。我已经为 pg 切换了 sqlite3，但是在我将“水龙头”移到生产环境之前，我遇到了和你一样的错误。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-05T14:36:48.670

看看你要推送哪个分支。就我而言，我正在开发分支上工作，并尝试使用：

```
$ git push heroku master 
```

git 所做的是将我的 master 分支推送到 heroku，但我的 master 分支使用的是 sqlite3，导致了这个奇怪的错误。

尝试做：

```
$ git push heroku [name_of_your_branch]:master 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T01:10:07.583

确保您在生产中拥有必要的宝石。我最近自己也遇到了这个问题。还可以尝试使用 gem 'pg' (POSTGRESQL) 而不是 sqlite，因为这就是 Heroku 使用的。

例如：

```
group :production do
  gem 'pg'
  gem 'carrierwave'
  gem 'rmagick'
  gem 'heroku'
  gem 'git-rails'
  gem "jquery-rails"
  gem 'hoe', '~> 1.5.1'
  gem "RedCloth"
  gem 'i18n'
end 
```

# jquery - jQuery $('head:first').prepend(' ') 在 IE 中不起作用

> ID：10050771
> 
> 赞同：0
> 
> 时间：2012-04-07T00:49:47.413
> 
> 标签：jquery, css

我有以下 JS 代码，我在不同的地方调用它来包含 CSS 样式：

```
<script>    
    $('head:first').prepend('<link rel="stylesheet" type="text/css" href="/styles.css" />')
}
</script> 
```

它适用于 Firefox 和 Chrome，但不适用于 IE。IE 只是不从这个文件加载 CSS 样式。然而，

```
document.write('<link rel="stylesheet" href="/styles.css" type="text/css" media="screen" />'); 
```

适用于 IE，但不适用于我的其他场景。

如何在不使用 document.write 的情况下为 IE 修复它？

谢谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-07T00:52:34.227

呃...你试图把`<link>`标签放在 之前`<head>`，当它必须在里面时。

使用`append`而不是`prepend`.

# .net - 如何在 .NET 中实现 VERP（可变信封返回路径）？

> ID：10050779
> 
> 赞同：1
> 
> 时间：2012-04-07T00:50:54.427
> 
> 标签：.net, email, smtp, email-bounces

我想在.NET中植入这个反弹处理协议，但是在我研究了abit之后，我发现.NET附带的基本类不支持VERP要求的信封分配

有解决方法或其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T01:06:18.417

您绝对可以使用 实现VERP ，只需为每个地址`System.Net.Mail`生成一个唯一地址，然后当邮件退回时，您的电子邮件帐户就会收到它，您就会知道要使哪个地址失效。`from``to``catch-all``to`

这是一个分步示例：

1.  您将发送电子邮件至`someuser@somedomain.com`。
2.  您从 GUID 生成随机唯一`from`地址，例如：F9168C5E-CEB2-4faa-B6BF-329BF39FA1E4-customers@mydomain.com
3.  `from`您保留将上述地址与地址相关联的字典或数据库表`to`。
4.  您收到一封退回邮件到`catch-all`收件人所在的收件箱`F9168C5E-CEB2-4faa-B6BF-329BF39FA1E4-customers@mydomain.com`，因此...
5.  您在数据库中无效`someuser@somedomain.com`。

# ruby-on-rails - 嵌套资源有很多：通过关系问题

> ID：10050786
> 
> 赞同：0
> 
> 时间：2012-04-07T00:53:03.710
> 
> 标签：ruby-on-rails, has-many-through, nested-attributes

我真的被这个问题困住了，我找不到解决办法：

我有一个用户模型（用设计构建）。

我有一个项目模型，它是用户的嵌套资源。

在用户模型（user.rb）中：

```
# Setup the relations model
has_many :items, :dependent => :destroy 
```

在项目模型（item.rb）中：

```
# Setup the relations model
belong_to :user 
```

在 routes.rb 中：

```
resources :users do
  resources :items
end 
```

通过这种方式，用户能够创建一个项目并拥有它：

路径前：user/1/items/1

现在我希望用户能够与另一个用户共享一个项目（由他创建），但拥有该项目的所有权（只有创建该项目的用户可以销毁它，只有创建该项目的用户可以更新项目的某些字段，而不是其他字段也需要由收到项目的用户更新（可编辑）。换句话说，我希望创建它的用户和刚刚收到它的用户对项目的权限是不同的。

为了允许用户之间的项目共享操作，我建立了以下 as_many :through 关系：

我创建了另一个模型，称为共享（表示项目模型和用户模型之间的联合表）：

然后我通过以下方式修改了user.rb（用户模型）：

```
# Setup the Item relations model
has_many :items, :dependent => :destroy # this to set up the item ownership

#This to set up the has_many :through realtionship
#(note I am calling a new model shared_items - that really doesn't exist - is an item model)
has_many :sharings
has_many :shared_items, :foreign_key => "shared_user_id", :through => :sharings

accepts_nested_attributes_for :items #This will work for the nested items resource
accepts_nested_attributes_for :sharings #Do I really need this line??

# Setup accessible (or protected) attributes for your model
attr_accessible :email, :password, :password_confirmation, 
                :items_attributes, #This will work for the nested items resource
                :sharings_attributes  #Do I really need this line?? 
```

然后我通过以下方式修改了 item.rb（项目模型）：

```
# Setup the relations model
belong_to :user

#this two lines are suppose to connect the two models (item and receiver) using a joint table
has_many :sharings
has_many :shared_users, :foreign_key => "shared_item_id", :through => :sharings

accepts_nested_attributes_for :sharings #Do I really need this line??

attr_accessible :user_id, :item_type, :reference_date, :title, 
                :sharings_attributes #Do I really need this line?? 
```

我通过以下方式编写了sharing.rb（共享模型-联合表）：

```
belongs_to :shared_user, :class_name => "User"
belongs_to :shared_item, :class_name => "Item"

attr_accessible :shared_moment_id, :shared_user_id 
```

之后，我不得不考虑接收者也是用户（是自引用关系）的事实，并且在我的应用程序中，仍然存在友谊模型（允许用户与其他用户成为朋友，这是像魅力一样工作）-但我相信乔尔的建议可以提供帮助（或者只是更改对我朋友表的引用）。

有了这个，我可以为 Item (ItemsController) 创建一个 restful 控制器，并添加一个新的、create、show、destroy 等操作，这些操作将允许用户（实际上是 current_user）创建一个 item、销毁或更新它而不会出现任何问题. （正如您在项目模型中看到的那样，有外键 user_id）。

相反，我需要做什么来创建一个restful控制器来管理共享模型（创建新的共享项目，并将它们分配（共享）给其他用户）？？？

我如何才能回忆起数据库值？我的意思是，例如：

id 为 3 的用户创建了五个新项目（项目 id 为 1、2、3、4、5），现在他还决定与其他用户共享此项目的一部分（用户 6 的项目 2，用户 7 的项目 4,5 ,8,9)???

我拉出嵌套资源进行共享，现在我只有：

item 是用户 (user/2/item/5) 的嵌套资源，共享将是什么？

请有人帮助我....

非常感谢迪努兹

**更新** 我能够让应用程序正常工作，但仅作为单件：

用户创建一个项目。在他决定与另一个用户共享项目后（并使用共享控制器 - 联合表控制器，我能够在联合表内创建记录（传递用户 ID 和特定项目 ID）。

现在我想一次性执行所有操作：

current_user（登录的用户）创建一个项目，他需要以相同的形式与其他用户（数组）共享它或只为自己保留。

我相信这进一步的步骤需要将项目控制器和共享控制器融合在一起，并在新的项目视图中做同样的事情。

那么我需要如何进行？如果有人可以为 has_many 建议一个好的教程：通过它可以涵盖我的情况（我真的需要了解在这种情况下控制器和视图的外观），我认为模型关联设置得很好，但是我无法真正弄清楚如何处理控制器和视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T01:00:55.733

您可以使用这样的自定义验证：

```
class User < ActiveRecord::Base
  validate :sharing_with_friends_only

  def sharing_with_friends_only
    (receivers - friends).empty?
  end
end 
```

正如您所提到的，简单的方法是取消嵌套资源。

这也将使您的 API 更清洁。

# jquery - Firefox，iOS Safari 不再使用 jquery 更改 img src

> ID：10050789
> 
> 赞同：2
> 
> 时间：2012-04-07T00:53:45.503
> 
> 标签：jquery, image, firefox, google-chrome

我正在尝试每秒使用 JQuery 从 img 标签更改 src 属性。在 Google Chrome 上运行良好，每秒都会出现一个新图像。但不要在 Firefox 或我的 iPad 上工作。只更改一次图像。

这是我正在使用的代码：

```
$(document).ready(function(){
    function refreshIMG(){
        $("#camara").attr("src", "localhost:4000");
    }
});
window.setInterval(refreshIMG, 1000) 
```

在 localhost:4000 上，我正在运行一个龙卷风服务器，并使用 openCV 保存我的网络摄像头的图像。我知道这是可行的，因为它可以在 Google Chrome 上运行，并且我将图像保存在我的硬盘上。还将警报（“test”）添加到 refreshIMG 功能，并且警报每秒都会在 firefox 和我的 iPad2 上显示，但图像不会改变。

在 Firefox 11、带有 iOS 5.1 的 ipad、Chrome 18 上测试。Ubuntu 11.10

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T01:14:27.853

这些其他浏览器是否有可能检测到 src 是相同的，所以它不会改变任何东西？

尝试添加`?time=" + new Date().getTime()`到您的 src. 我还建议移动`setInterval`内部`$(document).ready()`，以防它`refreshIMG()`在它存在之前尝试执行，因为 DOM 还没有准备好（不太可能，但是很好的做法）。最终产品将类似于：

```
$(document).ready(function(){
    function refreshIMG(){
        $("#camara").attr("src", "localhost:4000?time=" + new Date().getTime());
    }
    window.setInterval(refreshIMG, 1000);
}); 
```

这可能会“欺骗”那些浏览器，使其认为这是一个完全不同的图像并刷新它。

否则，您可能会尝试对只有内容所在的页面进行 AJAX 调用`<img src="localhost:4000">`，然后用当前图像中的 HTML 替换该 HTML。

# sql-server-2005 - 一次为一个实体插入多个值

> ID：10050790
> 
> 赞同：0
> 
> 时间：2012-04-07T00:53:56.067
> 
> 标签：sql-server-2005

我有 3 个表： 1\. userTABLE - USERNAME (jone)

1.  产品表

    *   prd_name (prd1, prd2, prd3)
2.  付费表

    *   用户名
    *   prd_name
    *   已付_amt

我的查询是插入 jone 为 3 种产品支付的金额。一种方法是：我必须为他购买的每件产品单独插入 jone 支付的 amts。

```
create proc paid @USERNAME varchar, @prd_name varchar, @paid_amt int
as
insert into paidTABLE values (@USERNAME, @prd_name, @paid_amt  ) 
```

有什么方法可以将 jone 的值一次性插入表中的 3 种产品，即在一个存储过程语句中，我可以插入 jone 为他购买的 3 种产品支付的金额。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T01:14:44.623

我同意 Marc - 在事务中这样做，但如果你真的想要一个声明，那么你可以这样做：

```
insert into paid (username, prd_name, paid_amt)
select 'jone', 'prd1', 10
union all
select 'jone', 'prd2', 20
union all
select 'jone', 'prd3', 30 
```

# maxscript - 如何从 polyop 更改为 meshop & 两个面之间的角度是在对象内部还是外部？

> ID：10050792
> 
> 赞同：1
> 
> 时间：2012-04-07T00:54:36.113
> 
> 标签：maxscript

**第1部分：**

如何

```
for i = 1 To polyop.getNumEdges $ do
(
  append faces ((polyop.getfacesusingedge $ #{i}) as array)
  if faces[i][2] != undefined then
  (
    f1 = polyop.getfacenormal $ faces[i][1];
    f2 = polyop.getfacenormal $ faces[i][2];  
  )
) 
```

看看使用meshop？

此代码从可编辑多边形中读取所有边，将在边处连接的面附加到**面**以便于访问并获取法线。

问题是以前该对象是可编辑的网格。由于某种原因转换为 ep 后，面数减少了。我需要整个对象只包含三角形，所以我不能使用这种方法，因为转换似乎将一些三角形组合成多边形。

**第2部分：**

我有一个功能

```
fn getAnglebetweentwoFaces face1 face2 =
(
    --theAngle = acos(dot face1 face2)
    theAngle = acos(dot (normalize face1) (normalize face2))
    return theAngle
) 
```

效果“好”。它确实告诉我两个面之间的角度，但我需要知道这两个面是对象内部的角度还是外部的角度。我怎么做？

提前致谢。

编辑：我补充说

```
if face2Coord < 0 then
(
  normAngle = 360 - normAngle
)
normAngle = 180 - normAngle
return normAngle 
```

到你的函数，现在我得到内角的负值和外角的正值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T23:31:03.753

**第1部分：**

不是一个直接的答案，但如果唯一的问题是转换后面的数量似乎越来越少并且您想保持简单，只需在转换之前使所有网格边缘可见。可编辑网格的结构与可编辑多边形的结构完全不同，在 eMesh 中，您将迭代面，每个面都有三个顶点和三个边，其中没有一个与另一个面共享，这使得这些事情变得不必要地复杂。在 ePoly 中，结构是由边缘定义的，这使得循环和环形选择以及查找面之间共享的边缘（实际上是多边形）变得更加容易。

**第2部分：**

您需要一些额外的数据来实现这一点，例如面的中心（取决于几何体的扭曲程度，选择 getFaceCenter 或 getSafeFaceCenter 方法）。当你有了这些点，剩下的就很容易了，如果一个面的中心在另一个面的平面之上，它是较小的角度，你不要改变它，如果它是相反的，它是实施例（360-角度）。

```
fn getAngleBetweenFaces normal1 normal2 center1 center2 =
(
    local face1Matrix = translate (matrixFromNormal normal1) center1
    local face2Coord = (center2 * (inverse face1Matrix)).z
    local normAngle = acos(dot (normalize normal1) (normalize normal2))
    if face2Coord < 0 do normAngle = 360 - normAngle
    normAngle 
) 
```

# php - 我可以为 Facebook 应用配置多个域吗？

> ID：10050793
> 
> 赞同：0
> 
> 时间：2012-04-07T00:54:38.750
> 
> 标签：php, facebook, oauth

我之前在您的网站上看到过这个问题，但它并没有完全帮助我......

这是我想要实现的目标：

我有一个内容管理系统 (PHP)，它安装在我客户的各个网站的服务器上。每当用户在其网站上发布新消息时，该消息的较短版本就会发送到社交媒体网站。现在，这可以通过 twitter（使用 OAuth 库）实现。但我希望它也可以与 facebook 一起使用....

当我在 Facebook 中创建应用程序时，我必须分配一个返回 URL。但是因为要使用的CMS系统可以在任何地方，对我来说没什么用？

或者有没有办法让这个工作？

最好的问候，罗伯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T01:06:01.490

我不确定您对此处返回 URL 的确切需求。但是，让 CMS 从服务器端与 Facebook 通信将使用带有 OpenGraph 协议的[Graph API来执行。](http://developers.facebook.com/docs/reference/api/)这听起来就像您使用 Twitter 的 OAuth 所做的一样。

然后，您可以对您的 CMS 进行编码以使用您的 API 凭据，并且永远不要离开 CMS 服务器。甚至还有一个可用于 Facebook 的[PHP SDK](http://developers.facebook.com/docs/reference/php/)，听起来它可以很好地为您集成。

如果每个人的 CMS 位于不同的 URL，那么他们每个人都需要在其 Facebook 个人资料上创建一个应用程序，以在此方法中添加通信。因为 Facebook 在设计上要求 URL 的基本名称相同，以确保安全。这通常通过使最终用户能够在他们的配置文件中配置他们自己的“应用程序”以进行通信来执行，并且通常使用 Wordpress 应用程序来完成相同的目的。

# ruby-on-rails - Rails 错误：无法批量分配受保护的属性

> ID：10050797
> 
> 赞同：41
> 
> 时间：2012-04-07T00:55:43.943
> 
> 标签：ruby-on-rails

我正在尝试构建一个非常简单的 AddressBook rails 应用程序。但是，我收到此错误“无法批量分配受保护的属性：city_id”。我怎样才能解决这个问题？请随时在您对以下 rails 代码的回答中添加任何评论/建议。谢谢。

我是如何创建项目的（从头开始）：

```
rails new demo
rails generate model City name:string
rails generate scaffold User name:string city:references
rake db:migrate 
```

分贝/种子.db：

```
City.create(name: "City1")
City.create(name: "City2")
City.create(name: "City3") 
```

耙分贝：种子

将此行`<%= f.text_field :city %>`从更改`app/views/users/_form.html.erb`为`<%= f.collection_select :city_id, City.all, :id, :name %>`

将`user.rb`自动生成的行更改`belongs_to :city`为`has_one :city`.

添加`belongs_to :city`到`city.rb`

PS：我使用的是 Rails 3.2.3 和 Ruby 1.9.3。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-04-07T01:05:58.590

有一个重要的安全更改轨道 3.2.3 要求您通过设置明确地允许批量`config.active_record.whitelist_attributes`分配`false`

[https://weblog.rubyonrails.org/2012/3/30/ann-rails-3-2-3-has-been-released/](https://weblog.rubyonrails.org/2012/3/30/ann-rails-3-2-3-has-been-released/)

[http://www.h-online.com/security/news/item/Rails-3-2-3-makes-mass-assignment-change-1498547.html](http://www.h-online.com/security/news/item/Rails-3-2-3-makes-mass-assignment-change-1498547.html)

或者（更好），而不是允许批量分配，您只需要设置`attr_accessible`模型中您希望能够更改的属性，例如

```
attr_accessible :city_id, :name # list all fields that you want to be accessible here 
```

请查看[rails 安全指南](https://guides.rubyonrails.org/v3.2.22.5/security.html#mass-assignment)以获取有关 rails 中的质量分配的更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-28T03:45:46.647

或者你可以改变

```
config.active_record.mass_assignment_sanitizer = :strict 
```

到

```
config.active_record.mass_assignment_sanitizer = :logger 
```

我不知道为什么必须更改为，`:logger`但这是错误的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-01T09:08:22.977

只需将模型中的数据字段包括为：

```
attr_accessible :city_id 
```

# html - Socket.IO Websocket 发送消息不适用于 Firefox 和 Chrome

> ID：10050799
> 
> 赞同：2
> 
> 时间：2012-04-07T00:56:08.903
> 
> 标签：html, websocket, socket.io

我有一个运行着 apache 和 Socket.IO 的服务器。我正在尝试在我的网站上使用 socket.io 发送和接收消息。

这是我的服务器的代码：

```
var fs = require('fs');
var hskey = fs.readFileSync('file.key');
var hscert = fs.readFileSync('file.crt');

var options = {
    key: hskey,
    cert: hscert
};

var app = require('https').createServer(options);
var io = require('/usr/local/lib/node_modules/socket.io').listen(app);

app.listen(8181);

io.sockets.on('connection', function (socket) {
  socket.emit('serverMessage', 'Bienvenue master!');
socket.broadcast.emit('serverMessage', 'New user online');
}); 
```

这是网页：

```
<!doctype html>
<html>
  <head>
    <title>Socket.io Test</title>
    <script src="./socket.io.js"></script>
  </head>
  <body>

    <script>

    var socket;
    var firstconnect = true;

    function connect() {
      if(firstconnect) {
        socket = io.connect('https://secure.mysite.com:8181');

        socket.on('serverMessage', function(data){ message(data); });
        socket.on('connect', function(){ status_update("Connected to Server"); });
        socket.on('disconnect', function(){ status_update("Disconnected from Server"); });
        socket.on('reconnect', function(){ status_update("Reconnected to Server"); });
        socket.on('reconnecting', function( nextRetry ){ status_update("Reconnecting in " 
          + nextRetry + " seconds"); });
        socket.on('reconnect_failed', function(){ message("Reconnect Failed"); });

        firstconnect = false;
      }
      else {
        socket.socket.reconnect();
      }
    }

    function disconnect() {
      socket.disconnect();
    }

    function message(data) {
      document.getElementById('message').innerHTML += "<br>" + "Server says: " + data;
    }

    function status_update(txt){
      document.getElementById('status').innerHTML = txt;
    }

    function esc(msg){
      return msg.replace(/</g, '&lt;').replace(/>/g, '&gt;');
    }

    function send() {
      socket.send('clientMessage', 'world');    
    };        

    </script>

    <h1>Socket.io Test</h1>
    <div><p id="status">Waiting for input</p></div>
    <div><p id="message"></p></div>  
    <button id="connect" onClick='connect()'/>Connect</button>
    <button id="disconnect" onClick='disconnect()'>Disconnect</button>
    <button id="send" onClick='send()'/>Send Message</button>
  </body>
</html> 
```

在 Safari (websocket) 和 Opera (json pooling) 下一切似乎都可以正常工作，但在 Firefox 和 Chrome (websocket) 下，我无法将任何消息从客户端发送到服务器。其他一切正常，我可以握手、连接并获取服务器消息。我做了很多研究，但似乎我是唯一一个遇到这个问题的人。

谢谢你帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T22:47:46.923

我发现了问题，我使用的是与服务器端不同版本的 socket.io.js。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T23:34:44.170

当您附加 socket.io 模块以表达它时，它会拦截 socket.io 路由。

因此，当您请求“https://secure.mysite.com:8181/socket.io”时，它会回复“欢迎来到 socket.io”。

因此，当您请求客户端 socket.io.js 时，它直接来自 socket.io 模块。“https://secure.mysite.com:8181/socket.io/socket.io.js”

因此，如果您不想修改客户端库，您可以创建修改后的副本并让 express 提供文件，但是当您通过 npm 更新 socketio 时，您还必须手动修改修改后的副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-13T11:30:53.887

如果在 FireFox 中出现此错误 - 首先检查启用或没有代理。如果启用，则关闭代理。

# android - android防弹吐司方法

> ID：10050801
> 
> 赞同：1
> 
> 时间：2012-04-07T00:56:17.597
> 
> 标签：android, multithreading, service, toast

我的应用程序有许多类、工作线程和后台服务操作。通知可以来自那些其他线程，并且它们可以在应用程序未运行时进入服务。我有一个实用程序类，我想在其中编写一个可以处理所有这些情况的“SendToast（Context ctx，String message）”方法。是否可以？[这篇 SO 帖子](https://stackoverflow.com/questions/3134683/android-toast-in-a-thread)很接近，但它不适用于我的服务消息

```
// won't work.. I need something that can run given a Context, rather than
// an Activity
public static void ShowToast(final Activity activity, 
    final String message, int length) {
       activity.runOnUiThread(new Runnable() {
       public void run() {
       Toast.makeText(activity, message, Toast.LENGTH_SHORT).show();
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T01:00:52.477

引用 Android Design Patterns 网站：“对话框和 toast 用于反馈而不是通知。如果您的应用程序当前不在屏幕上，则不应创建对话框或 toast”。

请参阅：http: [//developer.android.com/design/patterns/notifications.html](http://developer.android.com/design/patterns/notifications.html)

请改用通知。

# r - 给定一些标准的数据框子集

> ID：10050811
> 
> 赞同：2
> 
> 时间：2012-04-07T00:59:23.207
> 
> 标签：r, dataframe

如何仅返回满足 R 中年龄标准的高度？

IE

```
Age Height 
1   0.5
1   0.6
1   0.7
1   0.6
4   2.0
4   2.3
4   2.3 
```

我只想要与 Age == 4 相对应的高度。R 中的哪个函数允许我这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T01:16:15.980

试试这个：

```
dat <- data.frame(Age=c(1,1,1,1,4,4,4),Height=c(0.5,0.6,0.7,0.6,2.0,2.3,2.3))

dat[dat$Age==4,2] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T04:03:01.267

此外，由于您在问题标题中使用了“子集”，因此您可以使用该命令。看看`?subset`，你会发现它`subset(dat, Age == 4, select = "Height")`也有效。

# ruby - 是否可以获得引发错误的行号？

> ID：10050813
> 
> 赞同：10
> 
> 时间：2012-04-07T00:59:37.813
> 
> 标签：ruby, exception, exception-handling

```
begin
  . . .
  # error occurs here
  . . .
rescue => error
  puts "Error: " + error.message
end 
```

有没有办法获取*发生错误的语句*的行号？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-07T01:11:21.463

只需回溯：

```
begin
  . . .
  # error occurs here
  . . .
rescue => error
  puts "Error: " + error.message
  puts error.backtrace
end 
```

要仅获取行号 - 只需通过正则表达式将其从回溯中解析出来。

更多信息可以在这里找到：[Catching line numbers in ruby​​ exceptions](https://stackoverflow.com/questions/119286/catching-line-numbers-in-ruby-exceptions)

# jquery - jQuery CSS 不透明度覆盖

> ID：10050820
> 
> 赞同：1
> 
> 时间：2012-04-07T01:01:08.967
> 
> 标签：jquery, css

我正在尝试创建一个使用 jQuery 的 CSS 函数的弹出窗口。代码如下：

```
function Show_Popup(action, userid) {
 $('#content').css("opacity","0.7");
 $('#window').fadeIn('fast');
 $('#window').css("opacity","1.0");} 
```

这里#window 在#content 中。因此，当它“淡入”时，它的不透明度也设置为0.7，我试图通过第三行代码覆盖它。但它不起作用。有什么办法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T01:03:42.210

不幸的是，没有办法解决这个问题。至少，没有整洁的方式。

看，`#window`被设置为`#content`70% 的 100%。

解决这个问题的唯一方法是`#window`不要在里面`#content`，而是在之后/在上面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T01:03:50.027

采用

```
 $('#content').css("opacity","0.7");
 $('#window').fadeIn('slow', function() {
      $('#window').css("opacity","1.0");}
  }); 
```

如果这就是您要寻找的，您也可能需要考虑 $.animate() 。

**记住：** CSS-Opacity 是链式的。因此，即使#window 的不透明度为 100%，它也只是其父级的 70% 不透明度的 100%。请参阅[http://www.impressivewebs.com/css-opacity-that-doesnt-affect-child-elements /](http://www.impressivewebs.com/css-opacity-that-doesnt-affect-child-elements/)一个骇人听闻的解决方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T01:14:06.870

只是有一个更好/不同的想法。

如果可以，请设置`position: absolute`在`#window`. 确保它不会导致流程出现问题，但是如果您这样做，则`opacity`不再链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T01:16:29.397

使用 fadeTo()

```
$('#window').fadeTo('fast', 1.0); 
```

# logging - log4j、可加性和日志记录级别

> ID：10050822
> 
> 赞同：0
> 
> 时间：2012-04-07T01:02:53.377
> 
> 标签：logging, log4j

我正在尝试在 log4j 中进行配置，但我不确定是否支持...

这是场景：

我为包“com.abc”定义了一个记录器，为包“com”定义了另一个记录器（两者都具有可加性=true）。

这实际上意味着 com.abc.myClass 类中的任何日志记录都将记录到两个记录器中......

我的目标是能够定义第二个记录器（父记录器）来记录直接到达该记录器的任何消息，例如来自类 com.myClass 的消息，同时仅记录通过可加性功能传入并且已经记录在后代记录器中的错误级别消息。 ..

如果我将“com”的记录器设置为错误，我只会看到错误级别的消息，而我愿意看到直接写入此日志的信息级别的消息......

那可能吗 ？诸如设置可加性日志级别之类的东西...

谢谢，GB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T02:17:51.157

创建您自己的[Log4J 过滤器](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/spi/Filter.html)。

将此过滤器附加到父附加程序，并且仅当“com.abc”事件的级别不是 ERROR 时才过滤它们。

一个简单的例子：

```
public class MyCustomFilter extends Filter
{
  @Override
  public int decide(final LoggingEvent event) {
    if (event. getFQNOfLoggerClass().startsWith("com.abc.") && !event.getLevel().isGreaterOrEqual(Level.ERROR) {
      return DENY;
    }
    return NEUTRAL;
  }
} 
```

当然，您必须实施一个更好的条件来满足您的所有需求。

# python - 配置wsgi python

> ID：10050824
> 
> 赞同：0
> 
> 时间：2012-04-07T01:03:47.813
> 
> 标签：python, django, amazon-ec2, mod-wsgi, virtual-machine

我在 ubuntu 服务器上配置我的 EC2 实例（亚马逊网络服务），以测试 django（python）

我安装了 python 和 apache 服务器，

我的 url 地址 index.html 上有`It works!`[apache] 页面

现在我正在配置 wsgi 和 mod_wsgi [for python 和 django]，

我按照这个信息来配置wsgi：

[部署 python wsgi 应用教程](http://library.linode.com/web-servers/apache/mod-wsgi/ubuntu-10.04-lucid)

但是当我尝试`Basic Hello World WSGI Configuration`

```
import os 
import sys 

sys.path.append('/srv/www/cucus/application') 

os.environ['PYTHON_EGG_CACHE'] = '/srv/www/cucus/.python-egg' 

def application(environ, start_response):
    status = '200 OK'
    output = 'Hello World!'
    response_headers = [('Content-type', 'text/plain'),
                        ('Content-Length', str(len(output)))]
    start_response(status, response_headers)

    return [output] 
```

并转到 mysite/application/application.wsgi

> [http://ec2-107-20-20-19.compute-1.amazonaws.com/cucus/application/application.wsgi](http://ec2-107-20-20-19.compute-1.amazonaws.com/cucus/application/application.wsgi)

在我的浏览器中，我看到了页面的代码，但没有看到呈现的“hello world”

我错过了什么？

我需要为 ubuntu 配置虚拟主机吗？即使我只使用一个站点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-01-24T15:02:39.100

你需要你的输出是二进制的。

改变

`output = 'Hello World!'`

至

`output = b'Hello World!'`

这是我创建的一些简单的 WSGI 样板代码 - 向您展示如何管理 GET 和 POST 请求。

[https://github.com/blaking94/Python/blob/master/web_server_gateway_interface.py](https://github.com/blarking94/Python/blob/master/web_server_gateway_interface.py)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T03:25:32.863

您是否阅读过任何实际的 mod_wsgi 文档或观看有关它的演示文稿：

[http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide](http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide) [http://code.google.com/p/modwsgi/wiki/WhereToGetHelp?tm=6#Conference_Presentations](http://code.google.com/p/modwsgi/wiki/WhereToGetHelp?tm=6#Conference_Presentations)

您要么从未设置过 WSGIScriptAlias，要么没有为 Apache 正确启用站点以读取它，或者没有重新启动 Apache。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T05:00:50.520

如果这不起作用，请尝试重新启动 Apache，然后将您的 apache 配置加倍，您正在使用这行代码`LoadModule wsgi_module modules/mod_wsgi.so`以及启用 mod_wsgi`WSGIScriptAlias / /path/to/mysite/apache/django.wsgi`

# html - 如何检测css浮动项是否溢出到下一行？

> ID：10050828
> 
> 赞同：0
> 
> 时间：2012-04-07T01:04:52.163
> 
> 标签：html, css

当您使用 float:left 或 float:right 时，如何知道一行何时溢出到下一行？例如，我希望一组项目从底部屏幕的左向右流动，但是当该行溢出到下一行时，只需将其隐藏即可。有没有办法知道浮动项目在哪一点溢出到下一行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:07:05.433

我打算使用 jQuery 来做这样的事情：

```
$("#container").resize(function(){
    var totalwidth = 0;
    $(".floatable").each(function(index){
        totalwidth += $(this).outerWidth();
    });
    if(totalwidth > $("#container").width()){
        // YOUR MANIP CODE HERE
    }
}); 
```

$.resize() 在某些浏览器中重绘的每一步都会触发，因此您可能希望在其中设置 250 毫秒的延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T01:14:05.417

一种查看方法是

*   根据浮动订单收集物品
*   计算总宽度
*   与父母比较，看看它是否更大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T01:07:37.903

实际上没有办法检测到这一点，但您可以给页脚容器一个固定的高度并将其溢出属性设置为隐藏。

# php - 使用 implode 创建新表

> ID：10050834
> 
> 赞同：0
> 
> 时间：2012-04-07T01:05:41.043
> 
> 标签：php, mysql, arrays, implode

我有一个来自一个 mysql db 的大表，我想在不同的 mysql db 中创建一个新表并从大表中复制 3 列。为此，我编写了以下代码：

```
$result = mysql_query("SELECT * FROM huge_table", $hugeDB);
    $count = mysql_result($result, 0);
    $iterations=ceil($count/500);    

    for($i=1; $i<=$iterations; $i++)
    {
        $start = ($i-1)*500;
        $query = mysql_query("SELECT col1, col3, col6 FROM huge_table LIMIT $i, 500", $hugeDB);
        $results = array();
        $j = 0;
        while($result = mysql_fetch_array($query)) {
            $result[$j]= '('.$result['col1'].', '.$result['col3'].', '.$result['col6'].')';
            $j++;
        }
        print_r($results);
        $a = mysql_query("INSERT INTO less_huge_table (col1, col3, col6) VALUES ".implode(',', $results), $localDB);
        if(!$a) die(mysql_error()."\n");
    } 
```

但随后的输出是：

```
Unknown column 'BTFG' in 'field list' 
```

其中 BTFG 是数组的第一个元素的项：

```
(2007-01-03, BTFG, 23.0481) 
```

我想我犯了一个小错误，但我无法抓住。

我应该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T01:11:41.853

您可以使用 MySQL在[单个查询中执行此操作：](http://dev.mysql.com/doc/refman/5.0/en/ansi-diff-select-into-table.html)

```
INSERT INTO less_huge_table (col1, col3, col6)
   SELECT col1, col3, col6
   FROM huge_table 
```

这消除了通过脚本往返值的需要。同样，您的代码容易受到 SQL 注入攻击。即使您直接从数据库中获取了这些数据，它仍然可以包含 sql 元字符，然后您会盲目地将其填充回另一个查询中。是的，**完全**可以自己注射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T01:09:27.323

你的数组 `$result`不是`$resullts`. 您声明了数组，然后在您使用的插入和插入中`$results`分配了值，该数组是空白的。`$result``$results`

它应该是

```
 while($result = mysql_fetch_array($query)) {
   $results[$j]= '("'.$result['col1'].'", "'.$result['col3'].'", "'.$result['col6'].'")';
   ....
   } 
```

顺便说一句，`$j++` 其他任何地方都没有使用过的东西。

**编辑：**

正确引用 char 和 string 值：

```
('2007-01-03', 'BTFG', 23.0481) 
```

在这里改变：

```
 $results[$j]= '("'.$result['col1'].'", "'.$result['col3'].'", "'.$result['col6'].'")'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T01:13:17.743

完全使用 MySQL 语句执行此操作可能会更容易和更快，并且您不必使用两个连接，假设您的数据库位于同一服务器上并且凭据相同或授权。

例如：-

```
mysql_query( 'INSERT INTO less_huge_table (col1, col3, col6) SELECT col1, col3, col6 FROM huge_table LIMIT $i, 500', $hugeDB ); 
```

如果您确实需要将数据传输到不同服务器上的本地数据库，只需再次查询系统以获取您的 less_huge_table。这可以防止您将信息输入 PHP 并确保您正在转义并将其正确地传递回新的插入语句，MySQL 将为您从一个表到另一个表处理它。

但是，根据您上面的代码，可能存在来自破坏您查询的巨大表的非转义数据。“Array()”将来自您的 print_r 命令和来自下一个插入错误的错误。因此，您始终可以只打印您的 SQL 语句，而不是执行它并直接查看它。

# java - 我是否可以控制显示在 jsvc stderr 输出中的 java 日志的日志格式？

> ID：10050837
> 
> 赞同：4
> 
> 时间：2012-04-07T01:06:10.020
> 
> 标签：java, logging, logback, jsvc

我正在使用 logback 来记录 Java Web 服务应用程序，使用嵌入式 Jetty。日志记录基于 logback.xml 文件按预期工作......除了一些源自 Java 的日志，但显示在 jsvc 输出到 stderr 中。

我特别想查看我所有的 Java 生成的日志，其时间戳与我的其他日志相匹配，而显示在 jsvc stderr 输出中的日志只显示到第二个。

jsvc 标准输出日志主要是从 Jersey 生成的，我看到我自己的代码被引用为在 Guice 注册的对象，这让我希望它可以通过 logback 进行控制。我不明白是什么原因导致这些日志显示在 jsvc 的 stderr 输出中，而不是在 logback 中。有没有人在使用 jsvc 时在他们的代码或配置中解决了类似的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:06:55.890

该解决方案需要在几个地方进行更改，并且主要是 slf4j 配置问题。我的应用程序有许多依赖项，它们引入了各种日志记录实现。Slf4j 旨在将它们全部聚集在一起，并且该过程通常只是一个简单的 jar 插件，但 java.util.logging 需要更多的努力。

slf4j [Bridging Legacy APIs](http://www.slf4j.org/legacy.html)页面（主要）描述了如何连接 Jersey 引入的 JUL 依赖项。我已经包含了 jul-to-slf4j.jar，但它没有正确连接。我需要`SLF4JBridgeHandler.install()`在我的应用程序的初始化中执行。此外，除非我还在 logback.xml 文件中包含以下内容，否则该页面会警告对性能的负面影响：

```
<contextListener class="ch.qos.logback.classic.jul.LevelChangePropagator">
    <resetJUL>true</resetJUL>
</contextListener> 
```

这让我走了大部分路，但引入了日志事件的重复——一个去了 slf4j，另一个继续到 stderr。Google 将我引向 Claus Neilsen 博客中的一篇文章，“[将 java.util.logging 与 SLF4J 桥接](http://blog.cn-consult.dk/2009/03/bridging-javautillogging-to-slf4j.html)”。这包含一个有用的代码片段：

```
// Jersey uses java.util.logging - bridge to slf4
java.util.logging.Logger rootLogger = LogManager.getLogManager().getLogger("");
Handler[] handlers = rootLogger.getHandlers();
for (int i = 0; i < handlers.length; i++) {
    rootLogger.removeHandler(handlers[i]);
}
SLF4JBridgeHandler.install(); 
```

有了这些，在我的 jsvc stderr 输出中显示的 Jersey 日志现在与我的其余日志一起显示，并按照 logback.xml 的指示进行了很好的格式化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T01:54:51.643

据我了解，它`jsvc`是一个用 C 语言编写的管理 Java 应用程序的守护进程。它并没有真正在 Java 本身中运行，并且它的日志记录受限于`stdout`和`stderr`. 您可以将`jsvc`输出重定向到[命名管道](http://gabenell.blogspot.com/2009/11/working-around-jsvcs-logging.html)并让一些进程读取它们并为您提供毫秒时间戳。由您决定要为解决方案付出多少努力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T21:50:12.853

根据客户端或容器[过滤器 javadoc](http://jersey.java.net/nonav/apidocs/1.8/jersey/com/sun/jersey/api/container/filter/LoggingFilter.html)，Jersey 默认使用 JDK Logging API 生成其日志行`System.out`。

因此，您必须参考[Java Logging 指南](http://docs.oracle.com/javase/6/docs/technotes/guides/logging/overview.html)来设置它，`LogManager`以便按类或级别进行过滤，甚至将日志行转移（或复制）`System.out`到您自己的文件中。

您自己的代码使用`slf4j`，您必须配置 logback 以`ConsoleAppender`替换`FileAppender`.

# ruby-on-rails - 如果访问者来自 Google 搜索，则显示不同的视图

> ID：10050841
> 
> 赞同：1
> 
> 时间：2012-04-07T01:06:19.910
> 
> 标签：ruby-on-rails, ruby, http-referer

我正在尝试完成类似于纽约时报和其他新闻网站的事情，当访问者从谷歌引荐时显示完整文章，但仅在直接访问时显示预览。

我相信要检查访问者是否来自谷歌，我需要检查：`request.env["HTTP_REFERER"]`。

这个对吗？它只是名称“google”的匹配项吗？控制器中的逻辑是这样的吗：

```
if request.env["HTTP_REFERER"].match "google"
  # do action/set variable etc. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T01:27:38.050

Yeah you are pretty much right about all that. Just check via a regex if the user comes from google - and display the other site. Example code:

```
if request.env["HTTP_REFERER"] =~ /google\.[a-z]{2,4}/
  # do the special google stuff here
  render layout: "special_google_layout"
else
  # do the regular stuff here
end 
```

This regex checks the referer for the string "google" followed by a dot and 2 - 4 small letters.

# php - 连接到带有 imap 错误的 gmail

> ID：10050844
> 
> 赞同：2
> 
> 时间：2012-04-07T01:06:38.207
> 
> 标签：php, ssl, gmail, port, imap

我正在尝试使用 imap 和 gmail 在 php 中创建邮件应用程序。我正在使用一个免费的托管站点[http://powrhost.com/](http://powrhost.com/)，并且 imap、ssl 和所有其他的东西都安装在上面。我的登录代码是：

```
/* connect to gmail */
$hostname = '{imap.gmail.com:993/imap/ssl/novalidate-cert}INBOX';
$username = '*************@gmail.com';
$password = '**************';

/* try to connect */
 $inbox = imap_open($hostname,$username,$password) or die('Cannot connect to Gmail: ' .   imap_last_error()); 
```

我知道一切都很好，只是我不知道我的主机是否允许端口 993。是否有更好的免费主机可以工作，或者我的代码是否错误？顺便说一句，没有外壳访问。错误是：无法流式传输 imap 连接：超时

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:34:41.363

尝试这个

```
$hostname = "{imap.gmail.com:993/imap/ssl}INBOX";
$username = $imap_user;
$password = $imap_password;
$inbox = imap_open($hostname, $username, $password);//Open Mailbox 
```

要访问像存档这样的任何其他邮箱，您只需将收件箱更改为存档或任何文件夹名称，我认为此文件夹名称区分大小写。

# java - Java 图形和图形搜索 API

> ID：10050845
> 
> 赞同：0
> 
> 时间：2012-04-07T01:06:51.993
> 
> 标签：java, collections, graph

我处于需要在图形结构中对一组 JavaBean 建模的位置，其中每个 bean 都是图形上的一个节点/顶点，并且它们通过和边“连接”/相互关联。

因此，就像使用`List<?>`or`ArrayList<?>`来表示一系列项目一样，我需要一个（最好是通用的）API 来表示图中的节点。此 API 需要允许我构建图表、从图表中添加/删除我喜欢的节点等。

此外，我需要能够通过向其传递任意数据值来搜索整个图，并且它将返回包含该数据的节点/顶点。

我唯一能找到的是内置的 Java `TreeSet`，但我不需要从单个根节点流出的有向树。我需要一个真正的（在数学意义上）图形 API。

是否存在这样的解决方案，或者我是否坚持从头开始编写自己的解决方案（uggghhh）。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-22T23:59:43.937

如果我理解得很好，您需要一个“节点”对象的表示：

1）允许您存储值，以便您以后可以搜索正确的节点

2）使用预定义的数据结构来保存图形的信息。

3) 允许被搜索算法使用。

有一个简单的解决方案可以满足所有三个要求：

```
public class Node {

    // Add as many fields as you need to contain the node info
    private String mName;
    private int mArbitraryValue;

    // Store the adjacent nodes in a list
    private List<Node> mAdjacencyList;

    //Define your constructors
    public Node(String name, int arbitraryValue, List<Node> adjacencyList) {
        mName = name;
        mArbitraryValue = arbitraryValue;
        mAdjacencyList = adjacencyList;
    }

    /* Add your methods here depending on the functionality that
       you want to implement
    */

    public String getName() {
        return mName;
    }

    public int getArbitraryValue() {
        return mArbitraryValue;
    }

    public List<Node> getNeighbors() {
        return Collections.unmodifiableList(mAdjacencyList);
    }

    // Add setters if you want these values to be able to change

    public boolean addNeighbor(Node n) {
        return !mAdjacencyList.contains((Node) n) && mAdjacencyList.add(n);
    }

    public boolean removeNeighbor(Node n) {
        return mAdjacencyList.remove((Node) n);
    }
} 
```

如果您的对象可以更改，我不建议您使用 HashMap 实现邻接列表，因为它可能导致集合中断（即，即使对象存在，对 contains() 的调用也可能返回 false）。

现在，您的搜索算法可以访问节点的成员变量以检查它们是否已完成。

# php - 基于 PHPExcel 的函数 RATE() 返回 NAN()

> ID：10050846
> 
> 赞同：1
> 
> 时间：2012-04-07T01:06:56.423
> 
> 标签：php, phpexcel, nan, financial

我有这个代码： http: [//pastebin.com/Sd9WKZFr](http://pastebin.com/Sd9WKZFr)

当我调用类似它的东西时，`rate(60, -6000, 120000)`它会返回一个`NAN`结果，但 MS Excel 上的相同函数会返回我`0,04678...`。我在尝试 -5000、-4000、-3000 和 -2000 时遇到同样的问题。

当我调试代码时，我看到大约 8/9 迭代，第 29 行开始返回一个`NAN`结果，使所有其他结果也转向`NAN`。

但是，当我调用类似的东西时，`rate(60, -1000, 120000)`它会返回一个`float -0.02044...`与 MS Excel 完全相同的结果。

我已经尝试将*所有*数学计算转换为**BCMath 函数**，但是这样 -6000 的结果是错误的（-1.0427...而不是 0,04678...）但是使用 -1000 结果是正确的，匹配 excel结果。

有没有办法让它正常工作？

在此先感谢您提供任何有用的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T16:05:19.523

我需要做一些测试，以确保在其他情况下没有不利影响；但以下看起来好像可以解决这个问题，并且肯定会为您的参数计算正确的速率值 RATE(60, -6000, 120000) 在迭代 15 中稳定在 0.046781916422493。

```
define('FINANCIAL_MAX_ITERATIONS', 128); 
define('FINANCIAL_PRECISION', 1.0e-08); 

function RATE($nper, $pmt, $pv, $fv = 0.0, $type = 0, $guess = 0.1) { 

    $rate = $guess; 
    if (abs($rate) < FINANCIAL_PRECISION) { 
        $y = $pv * (1 + $nper * $rate) + $pmt * (1 + $rate * $type) * $nper + $fv; 
    } else { 
        $f = exp($nper * log(1 + $rate)); 
        $y = $pv * $f + $pmt * (1 / $rate + $type) * ($f - 1) + $fv; 
    } 
    $y0 = $pv + $pmt * $nper + $fv; 
    $y1 = $pv * $f + $pmt * (1 / $rate + $type) * ($f - 1) + $fv; 

    // find root by secant method 
    $i  = $x0 = 0.0; 
    $x1 = $rate; 
    while ((abs($y0 - $y1) > FINANCIAL_PRECISION) && ($i < FINANCIAL_MAX_ITERATIONS)) { 
        $rate = ($y1 * $x0 - $y0 * $x1) / ($y1 - $y0); 
        $x0 = $x1; 
        $x1 = $rate;
        if (($nper * abs($pmt)) > ($pv - $fv))
            $x1 = abs($x1);

        if (abs($rate) < FINANCIAL_PRECISION) { 
            $y = $pv * (1 + $nper * $rate) + $pmt * (1 + $rate * $type) * $nper + $fv; 
        } else { 
            $f = exp($nper * log(1 + $rate)); 
            $y = $pv * $f + $pmt * (1 / $rate + $type) * ($f - 1) + $fv; 
        } 

        $y0 = $y1; 
        $y1 = $y; 
        ++$i; 
    } 
    return $rate; 
}   //  function RATE() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T00:32:12.437

我不建议使用 Secant 方法来查找[内部收益率，](http://finance.thinkanddone.com/irr.html)因为它比其他首选迭代方法（例如 Newton Raphson 方法）消耗更多时间。从代码看来，设置最多 128 次迭代是浪费时间

使用[Newton Raphson 方法](http://finance.thinkanddone.com/finding_irr_with_tvm_equation_using_newton_raphson_method.html)通过两个[TVM](http://finance.thinkanddone.com/tvm.html)方程中的任何一个求 RATE 只需 3 次迭代

```
TVM Eq. 1: PV(1+i)^N + PMT(1+i*type)[(1+i)^N -1]/i + FV = 0

f(i) = 0 + -6000 * (1 + i * 0) [(1+i)^60 - 1)]/i + 120000 * (1+i)^60

f'(i) = (-6000 * ( 60 * i * (1 + i)^(59+0) - (1 + i)^60) + 1) / (i * i)) + 60 * 120000 * (1+0.05)^59

i0 = 0.05
f(i1) = 120000
f'(i1) = 42430046.1459
i1 = 0.05 - 120000/42430046.1459 = 0.0471718154728
Error Bound = 0.0471718154728 - 0.05 = 0.002828 > 0.000001

i1 = 0.0471718154728
f(i2) = 12884.8972
f'(i2) = 33595275.7358
i2 = 0.0471718154728 - 12884.8972/33595275.7358 = 0.0467882824629
Error Bound = 0.0467882824629 - 0.0471718154728 = 0.000384 > 0.000001

i2 = 0.0467882824629
f(i3) = 206.9714
f'(i3) = 32520602.801
i3 = 0.0467882824629 - 206.9714/32520602.801 = 0.0467819181458
Error Bound = 0.0467819181458 - 0.0467882824629 = 6.0E-6 > 0.000001

i3 = 0.0467819181458
f(i4) = 0.056
f'(i4) = 32503002.4159
i4 = 0.0467819181458 - 0.056/32503002.4159 = 0.0467819164225
Error Bound = 0.0467819164225 - 0.0467819181458 = 0 < 0.000001
IRR = 4.68%

TVM Eq. 2: PV + PMT(1+i*type)[1-{(1+i)^-N}]/i + FV(1+i)^-N = 0

f(i) = 120000 + -6000 * (1 + i * 0) [1 - (1+i)^-60)]/i + 0 * (1+i)^-60

f'(i) = (--6000 * (1+i)^-60 * ((1+i)^60 - 60 * i - 1) /(i*i)) + (0 * -60 * (1+i)^(-60-1))

i0 = 0.05
f(i1) = 6424.2628
f'(i1) = 1886058.972
i1 = 0.05 - 6424.2628/1886058.972 = 0.0465938165535
Error Bound = 0.0465938165535 - 0.05 = 0.003406 > 0.000001

i1 = 0.0465938165535
f(i2) = -394.592
f'(i2) = 2081246.2069
i2 = 0.0465938165535 - -394.592/2081246.2069 = 0.046783410646
Error Bound = 0.046783410646 - 0.0465938165535 = 0.00019 > 0.000001

i2 = 0.046783410646
f(i3) = 3.1258
f'(i3) = 2069722.0554
i3 = 0.046783410646 - 3.1258/2069722.0554 = 0.0467819004105
Error Bound = 0.0467819004105 - 0.046783410646 = 2.0E-6 > 0.000001

i3 = 0.0467819004105
f(i4) = -0.0335
f'(i4) = 2069813.5309
i4 = 0.0467819004105 - -0.0335/2069813.5309 = 0.0467819165937
Error Bound = 0.0467819165937 - 0.0467819004105 = 0 < 0.000001
IRR = 4.68% 
```

# data-structures - 使用 Fenwick 树增加范围

> ID：10050848
> 
> 赞同：12
> 
> 时间：2012-04-07T01:07:27.910
> 
> 标签：data-structures, intervals, fenwick-tree

我想知道是否可以将 Fenwick 树（或二进制索引树）修改为：

**1）将某个范围内**所有元素的频率增加一定量

**2）查询单个**元素的频率。

这与传统的 Fenwick 树相反，传统的 Fenwick 树在单个元素上完成更新，查询在一个范围内完成（有点像逆 Fenwick 树）。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-10T23:00:13.233

当然！

Fenwick 树允许您在 O(log n) 中执行这些操作：

```
update(x, delta)   => increases value at index x by delta
query(x)           => returns sum of values at indices 0,1,2,...,x 
```

这是 C++ 中 Fenwick 树的简单实现：

```
int F[MAX];

void update( int x, int delta ) {
  for( ++x; x < MAX; x += x&-x ) F[x] += delta;
}

int query( int x ) {
  int sum = 0;
  for( ++x; x > 0; x -= x&-x ) sum += F[x];
  return sum;
} 
```

现在忘记 Fenwick 树的内部结构并专注于问题。当使用 Fenwick 树时，想象一下它实际上存储了一个频率数组，并且以某种方式神奇地在 O(log n) 中完成了这两个操作。函数 update 修改单个元素的频率，查询返回前 x 个元素的频率之和。

因此，在“传统”问题中，您有以下操作：

```
void incFreqAt( int index ) {
  update( index, 1 );
}

int getFreqAt( int index ) {
  return query( index ) - query( index-1 );
} 
```

现在，让我们存储相邻元素频率之间的差异，而不是存储每个单个元素的频率。

这些是新的操作：

```
void incFreqFromTo( int a, int b, int delta ) {
  update( a, delta );
  update( b+1, -delta );
}

int getFreqAt( int index ) {
  return query( index );
} 
```

当在 [a..b] 范围内增加频率时，只需增加索引 a 处的差异并减少索引 b+1 处的差异。这也好比说：增加范围 [a..infinity] 中的所有频率并减少范围 [b+1..infinity] 中的所有频率。

要获得索引 x 处元素的频率，只需将范围 [0..x] 内的所有频率差相加即可。

# android - 将数据从活动传递到广播接收器

> ID：10050849
> 
> 赞同：0
> 
> 时间：2012-04-07T01:07:34.977
> 
> 标签：android

我想将edittextpreference中的一些数据传递给正在接收短信的广播接收器......我该怎么做......下面的代码代表我一直在做的事情，但这不起作用......

```
public class AppPreferences extends PreferenceActivity{

    SharedPreferences prefs;
    @Override
   public void onCreate(Bundle b)
   {
      super.onCreate(b);
       addPreferencesFromResource(R.xml.prefs);

       prefs= PreferenceManager.getDefaultSharedPreferences(this);

      Log.v("",  prefs.getString("Spam", null));
      Bundle ba = new Bundle();
      ba.putString("spam",prefs.getString("Spam",null));
   }

} 
```

同时得到它

```
 spam=bundle.getString("spam");
Log.v("Bundle", spam); 
```

不起作用...我该怎么做...

很简单，我想从用户输入的 edittextpreference 中获取文本，然后我想在 BoradCast Receiver 中获取文本以匹配传入消息中的某些单词....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T01:11:45.167

如果数据位是首选项，则必须从`Preferences`对象的接收器中获取它：

```
import android.content.SharedPreferences;
import android.preference.PreferenceManager;

//...

public void onReceive(Context Ctxt, Intent in)
{
    //...
    SharedPreferences Prefs = PreferenceManager.getDefaultSharedPreferences(Ctxt);
    spam = Prefs.getString("spam", ""); 
```

编辑：该类没有什么特别之处，除了你不应该直接构造它（如`new SharedPreferences()`）。如上图所示，您可以`SharedPreferences`从 a中获取实例。`PreferenceManager`

EDIT2：额外内容作为名称-值集合存储在 Intent 对象中。当您创建一个调用接收器的意图时，您会存储这样的附加信息：

```
Intent in = new Intent(Ctxt, MyBroadcastReceiver.class);
in.putExtra("foo", "Hello world"); //that's a string extra
in.putExtra("bar", 17); //that's an integer extra 
```

在接收端：

```
public void onReceive(Context Ctxt, Intent in)
{
    String Foo = in.getStringExtra("foo");
    int Bar = in.getStringExtra("bar");
    //and so forth 
```

# javascript - 在元素上使用重复的类名？

> ID：10050851
> 
> 赞同：4
> 
> 时间：2012-04-07T01:07:57.810
> 
> 标签：javascript, performance, compatibility, classname

我发现有很多框架会在我认为会降低性能的元素上添加新的类名之前检查重复的类名。

元素具有重复的类名时是否有任何问题？

当使用重复的类名时，它还将应用 CSS 类而不会发生冲突。

```
<div class="aa bb cc aa"></div> 
```

可以简单地添加一个类名`elem.className += ' ' + 'aa ee'`，甚至元素有重复的类名吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T01:10:24.733

具有重复的类名并没有什么“错误”，它只是多余的。可能会对性能产生很小的影响，但只有当你有很多重复时才会真正产生很大的不同。

此外，防止重复只是有助于保持整洁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-31T14:16:20.177

ES6 提供了一个方便的 API 用于添加、删除和测试 DOM 元素的类名：classList.add(name) 和 classList.remove(name) 和 classList.contains(name)。

在 ES6 上下文中，这个问题也许可以改写为：

“如果我使用 .classList.add() 多次添加同一个类名，然后想使用 classList.remove() 删除该类，我需要多次调用 classList.remove() 吗？

幸运的是，答案似乎是对 .classList.remove() 的一次调用就足以删除给定的类，无论您添加了多少次。

我无法通过 Google 找到一个简单的答案，所以我编写了以下测试来告诉我它的行为方式。使用 DOM 元素作为参数调用以下函数不会引发错误：

```
function testClassListRemove (dem)
{
  dem.classList.add ("hello");
  dem.classList.add ("hello");
  dem.classList.add ("hello");
  ok (dem.classList.contains ("hello") );

  dem.classList.remove ("hello");
  ok (!  dem.classList.contains ("hello") );

  function ok (b)
  { if (! b)
    { throw new Error ('not ok ');
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-05T15:01:16.980

[语义 UI](https://semantic-ui.com/)大量使用属性选择器

像这儿

```
.ui.grid [class*="left floated"].column {
  margin-right: auto;
}
.ui.grid [class*="right floated"].column {
  margin-left: auto;
} 
```

如果您想要`margin-left`并`margin-right`拥有`auto value`，则必须拥有类名段的副本`floated`（例如`<div class="left floated right floated">Lorem</div>`）

# actionscript-3 - 查找数组中给定的匹配项

> ID：10050855
> 
> 赞同：3
> 
> 时间：2012-04-07T01:08:59.283
> 
> 标签：actionscript-3

我不了解函数中的数组，但是您如何找到数组中给出的匹配项？例如：

```
var fruit:Array = ["apples", "oranges", "grapes", "oranges", "apples", "grapes"]; 
```

我怎样才能让它只显示数组中的苹果数量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T03:04:45.230

简单地说，你可以这样做：

```
private function getCount(fruitArray:Array, fruitName:String):int {
    var count:int=0;
    for (var i:int=0; i<fruitArray.length; i++) {
        if(fruitArray[i].toLowerCase()==fruitName.toLowerCase()) {
            count++;
        }
    }
    return count;
}

var fruit:Array = ["apples", "oranges", "grapes", "oranges", "apples", "grapes"];
var appleCount=getCount(fruit, "apples"); //returns 2
var grapeCount=getCount(fruit, "grapes"); //returns 2
var orangeCount=getCount(fruit, "oranges"); //returns 2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-07T07:24:37.237

根据数组中有多少项目，以及您想要搜索不同项目的频率，每次您想要计算事物时，让 for 循环遍历整个数组可能会非常昂贵（如果您做了其他两个答案的建议）。您可能希望有一个 count 函数只遍历数组一次，并返回一个**counters 列表**，而不是单个数字：

```
function countItems( arr:Array ) : Object {
    var counts : Object = {};

    for each ( var item : String in arr ) {
        if (counts.hasOwnProperty(item)) counts[item]++;
        else counts[item] = 1;
    }
    return counts;
}

var fruit:Array = ["apples", "oranges", "grapes", "oranges", "apples", "grapes"];
var counts : Object = countItems(fruit);

trace (counts["apples"]);  // => 2
trace (counts["oranges"]); // => 2
trace (counts["grapes"]);  // => 2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T08:26:52.417

```
function countOccurrences( haystack, needle ){
    var index : int = -1;
    var counter : int = -1;
    do{
        counter++;
        index = haystack.indexOf( needle, index + 1 );
    }while( index >= 0 );
    return counter;
}

var fruit:Array = ["apples", "oranges", "grapes", "oranges", "apples", "grapes"];

trace( countOccurrences( fruit, "apples" ) ); //outputs '2' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T08:34:33.140

```
var stringToSearch:String = "apples";
var pattern:RegExp = new RegExp(/\b\b/.source+stringToSearch, "g");
var matches:Array = fruit.toString().match(pattern);
//
trace(matches.length); 
```

免责声明：如果您的数组中有很多元素（例如fruit.length>1000），请不要使用它：它很紧凑，但它可能比此处发布的任何其他解决方案都慢。要指出的另一件事是，在这里我假设您的“匹配项”是“字符串”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-07T01:40:08.183

尝试类似的东西

```
private function makeFilter(filterValue:String):Function {
   var fn:Function = function (obj:Object, index:int=0, arr:Array=[]):Boolean {
     if (String(obj)==filterValue) {
        return true;
     }
     return false;
   }
   return fn;
}

//somewhere else:
var filterFunction:Function = makeFilter('apples');
var appleCount:int = fruit.filter(filterFunction).length; 
```

仅供参考，有关此方法的更多信息：[http ://www.gasi.ch/blog/functional-actionscript-1/](http://www.gasi.ch/blog/functional-actionscript-1/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-05T10:41:14.023

```
var matches = 0
var arrayMatcher = (array1, array2) => {
    for (let i = 0; i <= array1 - 1; i++) {
        var myFirstItem = array1[i];
        for (a = 0; a <= array2.length - 1; a++) {
            var mySecondItem = array2[a];
            if (mySecondItem === myFirstItem) {
                matches += 1;
            }
        }
    }
    return matches;
}
```

我用它来查找患者症状列表与某种疾病的常见症状列表中的匹配项，它对我有用。你可以试一试！:)

# android - Android中对话框的良好设计模式

> ID：10050856
> 
> 赞同：0
> 
> 时间：2012-04-07T01:09:22.203
> 
> 标签：android, dialog, design-patterns

我想知道以下代码是否是在Android中使用对话框的好模式，遵循[对话框（developer.android）](http://developer.android.com/guide/topics/ui/dialogs.html)的指导方针并促进封装。

该示例显示了一个用于选择选项的对话框。关键点是`ChooseLevel`只需要在标记为**HERE**的点处修改的类，以便为呈现给用户的选项添加常量。

```
package org.dialogs;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.Context;
import android.content.DialogInterface;
import android.os.Bundle;
import android.widget.Toast;
import org.dialogs.ChooseLevel.Level; // see below

// -----------------------------------------------------------------------------
// -----------------------------------------------------------------------------
public class MainActivity 
    extends Activity 
    implements ChooseLevel.Listener
{

    // ...........................................................................
    @Override
    public void onCreate(Bundle icicle) {

        super.onCreate(icicle);

        showDialog(ChooseLevel.ID);

    } // ()

    // ...........................................................................
    @Override
    protected Dialog onCreateDialog(int dialogId) {

        Dialog dialog;

        if (dialogId == ChooseLevel.ID) {
            dialog = new ChooseLevel (this, this).getTheDialog();
        }

        return dialog;

    }

    // ...........................................................................
    public void levelChosen(Level whatLevel) {
        Toast.makeText(this, "level = " + whatLevel.toString(), Toast.LENGTH_LONG).show();
    }

} //

// -----------------------------------------------------------------------------
// -----------------------------------------------------------------------------
class ChooseLevel 
{
    // ...........................................................................
    public static final int ID = ChooseLevel.class.hashCode();

    // ...........................................................................
    public interface Listener {
        void levelChosen(Level whatLevel);
    }

    // ...........................................................................
    public enum Level {

        Easy, Medium, Expert; // HERE: write constants names for the options

        public static final String[] names;

        static {
            Level[] vals = Level.values();

            names = new String[vals.length];
            for (int i=0; i<vals.length; i++) {
                names[i] = vals[i].toString();
            }
        } // static initializer

    }

    // ...........................................................................
    private Listener theListener;

    // ...........................................................................
    private AlertDialog theDialog = null;
    public AlertDialog getTheDialog () { return this.theDialog; }

    // ...........................................................................
    public ChooseLevel (Context ctx, Listener li) {

        theListener = li;

        AlertDialog.Builder builder = new AlertDialog.Builder(ctx);

        builder.setTitle("choose a level");

        builder.setSingleChoiceItems(Level.names, -1, new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int numChosen) {
                dialog.dismiss();
                Level theLevel = Level.valueOf(Level.names[numChosen]);
                if (theListener != null) {
                    theListener.levelChosen(theLevel);
                }
            }
        });

        theDialog = builder.create();

    } // ()
} // class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T16:47:33.077

我发现了一种更简单的方法来显示用于选择选项的对话框：

用户代码将是：

```
import android.app.Activity;
import android.app.Dialog;
import android.os.Bundle;
import android.widget.Toast;

// -----------------------------------------------------------------------------
// -----------------------------------------------------------------------------
public class MainActivity 
    extends Activity 
    implements Chooser.Listener
{
    // .....................................................................
    private Chooser levelChooser;

    // .....................................................................
    enum Options { one, two, tree, four};

    // .....................................................................
    // .....................................................................
    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);

        levelChooser = new Chooser (Options.class, "choose an option", this, this);

        showDialog(levelChooser.ID);
    } // ()

    // .....................................................................
    // .....................................................................
    @Override
    protected Dialog onCreateDialog(int dialogId) {
        Dialog aDialog = null;

        if (dialogId == levelChooser.ID) {
            aDialog = levelChooser.getTheDialog();
        }
        return aDialog;
    }

    // .....................................................................
    // .....................................................................
    public <T extends Enum<T>> void onChoiceMade(T theChoice) {
        Toast.makeText(this, "choice = " + theChoice, Toast.LENGTH_LONG).show();
    }
} // class 
```

您只需要更改`enum Options`上面的常量。所有技巧都在`Chooser`课堂上完成，无需修改：

```
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import java.lang.reflect.Method;

public class Chooser {

    // .....................................................................
    // .....................................................................
    public static <T extends Enum<T>> String[] getNames(Class<T> c) {
        // returns the values of *any* enum in an array of String
        String[] values;
        try {
            Method m1 = c.getMethod("values");
            Object[] valuesObj;
            valuesObj = (Object[]) m1.invoke(c);
            values = new String[valuesObj.length];
            for (int i = 0; i < valuesObj.length; i++) {
                values[i] = valuesObj[i].toString();
            }
        } catch (Exception ex) {
            values = null;
        }
        return values;
    } // ()

    // .....................................................................
    // .....................................................................
    public interface Listener {
        public <T extends Enum<T>> void onChoiceMade(T theChoice);
    }

    // .....................................................................
    // .....................................................................
    public final int ID;
    private Listener theListener;
    private AlertDialog.Builder theBuilder;
    private AlertDialog theDialog = null;
    private final String[] names;

    // .....................................................................
    // .....................................................................
    public final AlertDialog getTheDialog() {
        if (this.theDialog == null) {
            this.theDialog = this.theBuilder.create();
        }
        return this.theDialog;
    }

    // .....................................................................
    // .....................................................................
    public <T extends Enum<T>> Chooser(final Class<T> theEnum, String theTitle, Context ctx, Listener listener) {

        this.ID = theEnum.hashCode();
        this.names = getNames(theEnum);
        this.theListener = listener;
        this.theBuilder = new AlertDialog.Builder(ctx);
        this.theBuilder.setTitle(theTitle);

        this.theBuilder.setSingleChoiceItems(names, -1, new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int electedNumber) {
                dialog.dismiss();
                Enum.valueOf(theEnum, names[electedNumber]);

                T theOption = (T) Enum.valueOf(theEnum, names[electedNumber]);
                if (theListener != null) {
                    theListener.onChoiceMade(theOption);
                }
            }
        });

    } // ()
} // class 
```

# python - Python PDF完整性检查

> ID：10050858
> 
> 赞同：1
> 
> 时间：2012-04-07T01:09:48.003
> 
> 标签：python, pdf

我有一个 pdf 库（大多数都有一些随机压缩的东西和 djvu）。其中一些 pdf 文件已损坏，应删除。

无论如何我可以在python中进行pdf完整性检查吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T02:53:01.467

如果读取过程给您一个错误，您可以 pyPDF 读取 pdf 并声明它无效......就像这样，

```
from pyPdf import PdfFileReader 
try :
     mypdf = PdfFileReader(file( 'filename', 'rb'))
except:
     print filename,' is invalid pdf' 
```

# javascript - SignalR - 不要在 javascript 中处理来自当前调用者的通知

> ID：10050859
> 
> 赞同：-1
> 
> 时间：2012-04-07T01:09:51.760
> 
> 标签：javascript, signalr

我知道这真的很简单，但我在任何地方都找不到这方面的文档。

我想要做的是检测当前客户端何时发送更新，以便该事件不会在本地重现。

我希望能够在 signalR 事件中获取客户端 ID 和呼叫者 ID，以忽略它们匹配的那些。

```
<script type="text/javascript">
    $(function () {
        var drag = $.connection.drag;

        drag.move = function ( x, y,clientId) {
            if(clientId!== drag.clientId) //<-IE something like this (but this doesnt work)
                $("#box").offset({ top: y, left: x });
        };

        $("#box").draggable({
            drag: function (event, ui) {
                drag.sendMove(ui.position.left, ui.position.y);
            }
        });

        $.connection.hub.start();
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T01:40:41.553

连接 ID 为`$.connection.hub.id`.

您可以使用它在客户端阻止对自己的呼叫。此功能尚未在服务器端启用。

# opencv - 使用内在和转换矩阵的项目点

> ID：10050860
> 
> 赞同：1
> 
> 时间：2012-04-07T01:10:05.903
> 
> 标签：opencv, computer-vision, transformation, emgucv, homography

目前我正在使用 C# 和 emgucv.net 进行 3D 图像可视化项目。在该项目中，按照已经使用相同场景的 2 张图像完成的步骤（旋转和平移略有不同），

1.  特征检测（SURF）、匹配和计算单应性
2.  计算基本矩阵
3.  使用上述基本矩阵和相机固有矩阵计算基本矩阵
4.  最后计算旋转和平移矩阵

此外，我通过更改其符号，使用 R 和 T 的不同组合获得了转换矩阵（3X4 [R|T]）的 4 个可能答案。现在我想从这 4 个答案中选择正确的转换矩阵。在此之前，我想检查其中一个答案是否正确。所以我必须使用“相机内在矩阵”和“变换矩阵”中的每一个重新投影第二张图像的点。之后，我可以将结果点与第二个图像点进行比较以确认结果（平移矩阵）。

我的问题是，如何使用 emgucv.net 重新组合平移矩阵（旋转 [3X3] 和平移 [3X1] 矩阵）和相机固有矩阵以将点投影到图像点？

或任何替代方法来确认我获得的转换矩阵？

提前感谢您的帮助。

# git - 回到历史上一个完好无损的版本？

> ID：10050861
> 
> 赞同：4
> 
> 时间：2012-04-07T01:10:07.457
> 
> 标签：git, corruption, recovery

我有一个损坏的松散物体。

我尝试了结帐、还原、变基，并且可能很少有其他事情可以进行原始提交。在每种情况下，我都跑了`git fsck`，但仍然遇到同样的问题：

```
> git fsck 
error: corrupt loose object '25a196217ebb6e341909205575f491022eafc4d9'
fatal: loose object 25a196217ebb6e341909205575f491022eafc4d9 (stored in .git/objects/25/a196217ebb6e341909205575f491022eafc4d9) is corrupt 
```

有没有办法摆脱损坏的对象而无需简单地删除.git？我没有另一个备份，所以我无法替换损坏的对象。

[移动目录后，这个 git“错误：损坏的松散对象”引发](https://stackoverflow.com/questions/10049101/git-error-corrupt-loose-object-after-moving-a-directory)了一个更狭窄的问题

**更新（1）：**

```
> git gc
Counting objects: 747, done.
Delta compression using up to 8 threads.
error: corrupt loose object '25a196217ebb6e341909205575f491022eafc4d9'
fatal: loose object 25a196217ebb6e341909205575f491022eafc4d9 (stored in .git/objects/25/a196217ebb6e341909205575f491022eafc4d9) is corrupt
error: failed to run repack 
```

**更新（2）：** 这也不起作用[从 git 存储库中删除文件（历史记录）](https://stackoverflow.com/questions/2164581/remove-file-from-git-repository-history)

**更新（3）：** 克隆不起作用：

```
> git clone ../dynamicsCode_good/ .
Cloning into ....
done.
error: corrupt loose object '25a196217ebb6e341909205575f491022eafc4d9'
fatal: loose object 25a196217ebb6e341909205575f491022eafc4d9 (stored in .git/objects/25/a196217ebb6e341909205575f491022eafc4d9) is corrupt 
```

这 。目录为空

**更新（4）：** 删除损坏的对象。

```
> git --version
git version 1.7.5.4

> rm -f .git/objects/25/a196217ebb6e341909205575f491022eafc4d9
13:42:57 ~/Dropbox/work/dev/dynamicsCode_torek 
> git fsck --full
missing blob 25a196217ebb6e341909205575f491022eafc4d9
dangling tree 64a970c878fef7deeeb4ce2ffc5e6234a72894ad
dangling tree 528e6c121fb8e56097462b2ebb9ec4de66388ce2 
```

第一个（初始）评论。此评论甚至没有损坏的文件。

```
> git log |tail -5
commit 150ceebafb9c20769386cc7ffba07f6e6565fae6
Author: Kirill ...gmail.com>
Date:   Tue Sep 27 22:51:15 2011 -0400

    state takes input as input
checkout:

> git checkout -b 150ceebafb9c20769386cc7ffba07f6e6565fae6
Switched to a new branch '150ceebafb9c20769386cc7ffba07f6e6565fae6'

> git gc
Counting objects: 783, done.
error: unable to find 25a196217ebb6e341909205575f491022eafc4d9
Compressing objects: 100% (776/776), done.
fatal: unable to read 25a196217ebb6e341909205575f491022eafc4d9
error: failed to run repack
> git fsck --full
broken link from    tree 4668817140320ad2e04aa946d95dec2c3885d97b
              to    blob 25a196217ebb6e341909205575f491022eafc4d9
missing blob 25a196217ebb6e341909205575f491022eafc4d9
dangling tree 64a970c878fef7deeeb4ce2ffc5e6234a72894ad
dangling tree 528e6c121fb8e56097462b2ebb9ec4de66388ce2 
```

我还尝试解压缩`.git/objects/pack/`目录中唯一的对象。没有帮助。

我还将这个状态克隆到一个新目录中：

```
> git gc
Counting objects: 662, done.
error: unable to find 25a196217ebb6e341909205575f491022eafc4d9
Compressing objects: 100% (656/656), done.
fatal: unable to read 25a196217ebb6e341909205575f491022eafc4d9
error: failed to run repack
14:40:34 ~/Dropbox/work/dev/dynamicsCode_torek_commit_clone 
> git fsck 
broken link from    tree b5ab6b287804d5069a3c8648ace38d9d9feac1a5
              to    blob 25a196217ebb6e341909205575f491022eafc4d9
dangling commit dad8edc620248d3911b7b1c0a99608a64e0288a3
missing blob 25a196217ebb6e341909205575f491022eafc4d9
dangling tree 64a970c878fef7deeeb4ce2ffc5e6234a72894ad
dangling commit ae2b2a9edb744d9e91aa78891c849d5a0040ea94
dangling commit 32ed79bd4ac70b118d046cb6093a4710562e95ba
dangling commit 7e45ef0c6ffc46401b1f82bcbf0f7e843abf9e31
dangling tree 528e6c121fb8e56097462b2ebb9ec4de66388ce2
14:40:40 ~/Dropbox/work/dev/dynamicsCode_torek_commit_clone 
> git branch 
* 150ceebafb9c20769386cc7ffba07f6e6565fae6 
```

也没有帮助。

损坏的文件`tags`来自 ctags。我不需要它。奇怪的是，没有那个文件我就无法重建 git。最重要的是，从我所有的研究来看，我既看不出它是如何做到的，也看不出为什么它不可能。

**更新（5）：** 结帐无分支

```
> git checkout 150ceebafb9c20769386cc7ffba07f6e6565fae6
Note: checking out '150ceebafb9c20769386cc7ffba07f6e6565fae6'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b new_branch_name

HEAD is now at 150ceeb... state takes input as input
16:41:40 ~/Dropbox/work/dev/dynamicsCode_torek_commit 
> git fsck --full
broken link from    tree 4668817140320ad2e04aa946d95dec2c3885d97b
              to    blob 25a196217ebb6e341909205575f491022eafc4d9
missing blob 25a196217ebb6e341909205575f491022eafc4d9
dangling tree 64a970c878fef7deeeb4ce2ffc5e6234a72894ad
dangling tree 528e6c121fb8e56097462b2ebb9ec4de66388ce2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T09:24:35.350

如果您手动删除损坏的对象，git 通常会让您处理其他所有问题。我故意破坏了一个 git blob（只是在前面强制了几个坏字节）并得到了以下信息：

```
$ git fsck
fatal: object bd1b260b0ef92d1a219e1183953fa1ac7cdb4cad is corrupted
$ git gc
Counting objects: 23, done.
error: unable to unpack bd1b260b0ef92d1a219e1183953fa1ac7cdb4cad header
error: inflateEnd: failed
Delta compression using up to 2 threads.
Compressing objects: 100% (12/12), done.
fatal: object bd1b260b0ef92d1a219e1183953fa1ac7cdb4cad is corrupted
error: failed to run repack
$ git fsck --full
fatal: object bd1b260b0ef92d1a219e1183953fa1ac7cdb4cad is corrupted
$ rm -f .git/objects/bd/1b260b0ef92d1a219e1183953fa1ac7cdb4cad
$ git fsck --full
broken link from    tree a3070cb66fd169e1443867a8bb137a44103c9f24
              to    blob bd1b260b0ef92d1a219e1183953fa1ac7cdb4cad
missing blob bd1b260b0ef92d1a219e1183953fa1ac7cdb4cad
$ git cat-file -p 2418b6ba8fd0289933c9351260a272b8e410867f
tree a3070cb66fd169e1443867a8bb137a44103c9f24
parent 8d945134b0cead535d66af29c8eb4228b5dc3763
author [redacted] 1333789753 -0600
committer [redacted] 1333789753 -0600

test corrupted object
$ git checkout 2418b6ba8fd0289933c9351260a272b8e410867f
error: git checkout-index: unable to read sha1 file of morefile (bd1b260b0ef92d1a219e1183953fa1ac7cdb4cad)
D   morefile
Note: checking out '2418b6ba8fd0289933c9351260a272b8e410867f'.

You are in 'detached HEAD' state. ... 
```

请注意，在此过程中，它会将分支重新指向`master`之前的“良好”提交（不是立即提交的，我不知道为什么），因此您可能必须修复您的提交历史等。但一切都是那里，除了丢失的文件“morefile”，我损坏了它的blob。（我从我预先制作的备份副本中恢复了它，甚至能够用 . 取回文件`git checkout -- morefile`。你可以`mv`在某个地方找到损坏的 blob，看看你是否可以从中恢复一些数据。）

我当然会先备份损坏的 git 存储库，以防万一。:-)

# c++ - 范围解析运算符

> ID：10050863
> 
> 赞同：33
> 
> 时间：2012-04-07T01:10:16.227
> 
> 标签：c++, scope, g++

我偶然碰巧在我正在查看的源代码之一中发现了这一点。所以，我在这里给出一个类似的小例子。

在文件*test.h 中*：

```
#include<iostream>

class test{
    int i;
public:
    test(){}
    //More functions here
}; 
```

在文件*test.cpp 中*：

```
#include "test.h"

int main()
{
    test test1;
    test::test test2;
    test::test::test test3;
    return 0;
} 
```

首先，有理由这样声明`test2`吗？其次，这段代码在 g++ 4.4.3 及更低版本中编译得很好。C++ 标准中是否有一些东西，说，当不需要解析范围时，范围解析运算符会被忽略？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-07T01:19:47.070

此代码无效。

这是 g++ 中的一个错误，它接受了代码。请参阅[“g++ 未正确处理注入的类名”。](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=11764) 该错误已在 2009 年修复，因此它应该在任何最新版本的 g++ 中修复。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-07T01:29:22.007

To clarify the situation, as specified in §9/2:

> A class-name is inserted into the scope in which it is declared immediately after the class-name is seen. The class-name is also inserted into the scope of the class itself; this is known as the injected-class-name. For purposes of access checking, the injected-class-name is treated as if it were a public member name.

However, as specified in §3.4.3.1/1:

> If the nested-name-specifier of a qualified-id nominates a class, the name specified after the nested-namespecifier is looked up in the scope of the class (10.2), except for the cases listed below.
> 
> [ ... §3.4.3.1/2]:
> 
> In a lookup in which the constructor is an acceptable lookup result and the nested-name-specifier nominates a class C:
> 
> — if the name specified after the nested-name-specifier, when looked up in C, is the injected-class-name of C (Clause 9) [ ... ] the name is instead considered to name the constructor of class C.
> 
> [ ... example: ]

```
struct A { A(); };
[ ... ]
A::A a; // error, A::A is not a type name
struct A::A a2; // object of type A 
```

# java - 从单独的类方法运行 GUI 更新方法

> ID：10050866
> 
> 赞同：0
> 
> 时间：2012-04-07T01:10:50.280
> 
> 标签：java, swing, user-interface

我正在用 Java 创建一个纸牌游戏。我已经编写了整个游戏逻辑，包括所有规则等，并且我已经开始在该模型之上实现 GUI。

我有 5 个类，但我要谈论的只是“主要”或游戏类和“GUI”类。首先，为了构造手，我使用了我创建的 Object Type < Card > 的 ArrayLists。游戏通过“Play()”方法进行游戏，并且（此时）通过控制台向他显示人类玩家手，并要求他在 ArrayList 中进行整数选择以放下。我在 Main 类中有 main(String[] args) 并且为了调用类 GUI 并设置我使用的游戏板。

```
 public static void main(String[] args)
     {
        Deck deck = new Deck();     
        ai = new AI;

        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                GUI gui = new GUI();
                gui.setVisible(true);
            }
        }) 
```

理想情况下，我希望游戏通过使用 Play() 方法并从 GUI 类调用方法来更新棋盘并返回人类玩家选择的卡片。目前我能做的最好的事情是，在设置电路板时，我通过实现一个按钮

```
 Button go = new Button("Update Hand");
   ButtonDisplay.add(go);

   go.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e) {
                Thread queryThread = new Thread() {
            public void run() {
                 UpdateHand();
            }
            };
                queryThread.start();                      
                        }
        }); 
```

然后运行

```
 public void UpdateHand()
    {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                inPlay = main.inPlay;
                UpdateInPlay(inPlay, InPlayDisplay);
                HumanHand = main.humanplayer;
                HumanHandDisplay.removeAll(); 
```

单击后，将清除面板并重新绘制卡片 JLabels。

我的问题是，如何在 GUI 类中调用 Play() 方法？当我尝试从 Play() 方法运行 UpdateHand() 时，只需使用

gui.UpdateHand();

它在该 gui.UpdateHand() 行返回 NullPointerException，但仍会在我告诉它时将 UpdateHand() 方法内的变量打印到控制台，例如 ArrayList。正如我所说，我希望我的 Play() 方法不是在 gui 上有一个更新棋盘的按钮，而是在它循环其回合顺序时调用 UpdateMethod，然后当玩家需要选择卡片时，而不是使用我现在使用的控制台扫描仪，运行一个方法，将一个文本字段和一个按钮添加到板上，供用户输入他们的选择，然后将其返回到 Play() 方法以继续进行游戏计算.

谁能阐明我做错了什么以及如何实现我在这里指定的内容？

编辑：

根据要求，我的 2 个类的更多代码

```
GUI
public class GUI extends JFrame
{
public Main main;
private ArrayList<Card> AIHand;
     public GUI() {

     pane = this.getContentPane();
     pane.setLayout(new GridLayout(6,1,2,2));
     AIBackDisplay = new JPanel();
     //just more of the same for other panels here

     pane.setBackground(Color.GREEN);
     setTitle("Last Man Standing");
     pane.add(AIBackDisplay);
     pane.add(AIHandDisplay);
     pane.add(InPlayDisplay);
     pane.add(HumanHandDisplay);
     pane.add(HumanBackDisplay);
     pane.add(HumanFacedownDisplay);
     pane.add(ButtonDisplay);

       setSize(800, 700);
       setLocationRelativeTo(pane);
       setDefaultCloseOperation(EXIT_ON_CLOSE);

       UpdateFacedown(AIFacedown, AIBackDisplay); //these are methods called for original display
       UpdateFacedown(HumanFacedown, HumanBackDisplay); 
```

然后我有通过按钮调用的 updateHand() 方法并执行此操作

```
 for (int i = 0; i < (HumanHand.size()); i++)
                {
                    Card card = HumanHand.get(i);

                    BufferedImage cardImage = null;

                    try {

                        cardImage = ImageIO.read(new File("card/" + card + ".jpg"));
                    } catch (IOException e) {
        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    JLabel picLabel = new JLabel(new ImageIcon( cardImage ));
                    HumanHandDisplay.add(picLabel);

                } 

                HumanHandDisplay.updateUI(); 
```

我的主要课程有

```
public class Main {

    static AI ai;
    public static GUI gui; 
```

发现 GUI 必须是静态的，否则我无法使用它来调用它

```
 Scanner sc = new Scanner (System.in);
                choice = sc.nextInt(); //what i'm using now
                //choice = gui.GUIReturn(); //what i'd like to use 
```

即使 GUI 是静态的，它也不允许我运行 gui.GUIReturn() 出于某种原因，说它必须是静态的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T01:38:05.420

我认为我们可能需要更多代码来回答这个问题。对我来说，它看起来可能很简单，比如你的 GUI gui 变量的范围。在您展示的示例中，gui 的范围仅在您创建的 Runnable 对象的 run 方法中。

传统上，在 GUI 中调用某些东西的正确方法是使用[Singleton 模式](http://en.wikipedia.org/wiki/Singleton_pattern)。基本上，让你打电话

```
GUI.getInstance().myMethod(); 
```

此外，稍微切线，如果这是您的 UpdateHand() 方法中的唯一代码，那么您的额外线程是浪费时间，因为

```
SwingUtilities.invokeLater(new Runnable(){ ... }); 
```

只需将 Runnable 放入事件队列中，等待轮到它运行。因此，如果这是您方法中唯一的事情，那么线程几乎会立即消失。虽然它可能不是那里唯一的代码，因为你没有结束括号，只是想我会注意到它。

最后，影响 GUI 的任何事情（[除了一些事情......](http://java.sun.com/products/jfc/tsc/articles/threads/threads1.html#exceptions)）都需要在 invokeLater 中完成。否则，您最终可能会遇到让您发疯的错误，因为它似乎不在您的代码中。

# sharepoint-2010 - Sharepoint 2010 不跨文件搜索内容

> ID：10050876
> 
> 赞同：0
> 
> 时间：2012-04-07T01:13:21.343
> 
> 标签：sharepoint-2010

确保设置了所有正确的索引选项后，我的 SP2010 开发安装仍然没有搜索 word 文档的内容，只搜索标题。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T19:55:22.397

您的爬虫帐户是否有足够的权限来访问附加到列表项的文件？您是将网站作为 SharePoint 网站还是网站进行爬网（在这种情况下，您需要确保有指向文档的链接。

您是否没有 robots.txt 文件作为您的 Web 应用程序的根目录，该文件可能具有阻止内容被正确抓取的排除规则？

如果您真的想知道爬虫在工作时发生了什么，您可以在您的开发机器上安装 fiddler，并将您的搜索服务应用程序的代理设置更改为由 fiddler 创建的代理设置。这样做将允许您实时检查当前正在抓取的 url/内容以及返回的 http 状态代码以诊断权限/内容问题。

希望它有所帮助。

# http - URL：带有@的用户名

> ID：10050877
> 
> 赞同：143
> 
> 时间：2012-04-07T01:13:22.243
> 
> 标签：http, url, url-encoding

要使用 URL 发送用户名和密码，我们使用以下方案：

```
http://username:password@www.my_site.com 
```

但我的用户名是`my_email@gmail.com`.
问题是`@`.

我该如何解决？

* * *

## 回答 #1

> 赞同：209
> 
> 时间：2012-04-07T01:15:59.037

您需要将@ 编码为 %40。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-04-07T01:18:14.450

在您的用户名中使用 %40 而不是 @ 符号进行 url 编码。它应该正确地通过它。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2016-07-05T09:05:05.557

做就是了：

```
 http://my_email%40gmail.com:password@www.my_site.com 
```

我很惊讶问题出在用户名`@`而不是密码上——通常这是我在 url 权限或路径部分中获得保留字符的地方。

要解决特殊字符的一般情况：只需打开 chrome 控制台，`F12`然后粘贴 您的密码（或用户名）`encodeURIComponent(str)`在哪里`str`，然后使用编码结果形成带有密码的 url。

希望这可以节省您一些时间。

# c# - 在 Objective-c 项目中嵌入 Mono：如何处理返回的 List<>

> ID：10050878
> 
> 赞同：0
> 
> 时间：2012-04-07T01:13:28.507
> 
> 标签：c#, objective-c, mono

我将 Mono 嵌入到用 Objective-c 编写的 MacOSX 应用程序中。

我正在访问一个 C# lib (DDL)，它只包含一堆返回不同类型的静态方法。到目前为止，我可以成功返回 int、double 和 string，但是在检索返回的数组时遇到了麻烦......

例如，这是我检索 int 的方法：

```
MonoDomain *domain = mono_jit_init("TestDomain");

NSBundle* mainBundle = [NSBundle mainBundle];
NSString* dll = [mainBundle pathForResource:@"TestLib86" ofType:@"dll"];

MonoAssembly* assembly = mono_domain_assembly_open(domain, [dll UTF8String]);

MonoImage* image = mono_assembly_get_image(assembly);

// Get INTEGER

// get a method handle to whatever you like
const char* descAsString = "MiniLib86.Show:GetInt()";
MonoMethodDesc* description = mono_method_desc_new(descAsString,TRUE);
MonoMethod* method = mono_method_desc_search_in_image(description, image);

// call it
void* args[0];
MonoObject *result = mono_runtime_invoke(method, NULL, args, NULL);    
int int_result = *(int*)mono_object_unbox (result);

// See the result in log
NSLog(@"int result %i", int_result); 
```

C# 中返回 List 的方法如下所示：

```
public static List<int> GetListInt()
{
    return new System.Collections.Generic.List<int>{1,2,3,4,5};
} 
```

任何帮助将非常感激 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:46:59.667

看看`mono_runtime_invoke_array`。

# java - 鼠标位置是相对窗口，而不是内容

> ID：10050879
> 
> 赞同：0
> 
> 时间：2012-04-07T01:13:59.523
> 
> 标签：java, jframe

我正在用 Java 编写一个简单的游戏，并试图获取鼠标的坐标。我想要的是内容左上角的 0,0，但是，我得到了相对于窗口的坐标。

![在此处输入图像描述](../Images/598ff0aa5574779af4ddee6dd57dd754.png)

代码如下：

```
public void mouseMoved(MouseEvent event)
{
    x = event.getY();
    y = event.getX();
} 
```

这是通过`JFrame.addWindowListener()`

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T01:22:28.193

我会确保您将事件绑定到窗口框架内的内容窗格。那么你的事件应该从 0,0 坐标相对触发。假设，您不需要主外部的事件，出于所有目的，您可以在那里绑定不同的事件处理程序。

另一种方法是确定标题栏高度和窗口框架宽度，然后将它们从给定坐标中减去（因为您在游戏窗口内与它们相邻 - 如果您适当地移动调整）内容框架内的相对位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T01:26:40.203

那是相对于窗口的。窗口包括 边缘周围的边框[`contentPane`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html#getContentPane%28%29)，这就是为什么你得到 3, 25 而不是 0,0。您可以将您`MouseListener`的`contentPane`直接添加到边框中，也可以使用框架[`Insets`](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#getInsets%28%29)来说明边框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-11T09:24:44.210

```
double screenW = Toolkit.getDefaultToolkit().getScreenSize().width;
double screenH = Toolkit.getDefaultToolkit().getScreenSize().height;
double posX = screenW/2 - WIDTH/2;
double posY = screenH/2 - HEIGHT/2;

x = event.getX() - posX;
y = event.getY() - posY; 
```

# java - Java：如何将类传递给函数以进行实例化

> ID：10050880
> 
> 赞同：2
> 
> 时间：2012-04-07T01:14:04.363
> 
> 标签：java, templates, generics

请原谅我的无知，但我无法在其他地方找到答案。

我有以下代码：

```
int value = 5;
Strategy s = new Strategy(convert(value));
mainClass.setStuff(s, value); 
```

策略使用基于“值”转换的数字进行初始化。mainClass 使用未转换的“值”。

我想做的是通过仅向 mainClass 提供要使用的策略以及未转换的值的信息来简化这一点，因此 mainClass 应该进行策略的实例化和初始化并处理该值。

在 C++ 中，这可以通过模板实现：

```
int value = 5;
mainClass.setStuff<Strategy>(value); 
```

我可以以某种方式在 Java 中完成这项工作吗？它似乎不适用于泛型，因为与 C++ 不同，Java 无法推断参数的类型，因此我无法初始化 Strategy。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T01:17:44.793

`setStuff`将方法签名更改为`public <T extends Strategy> ReturnType setStuff(Class<T> clazz, int value)`. 然后你可以[找到正确的构造函数](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getConstructor%28java.lang.Class...%29)并创建你的[新实例](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Constructor.html#newInstance%28java.lang.Object...%29)。

# php - php比较2个坐标

> ID：10050883
> 
> 赞同：0
> 
> 时间：2012-04-07T01:14:09.707
> 
> 标签：php, if-statement

我不知道为什么，但这似乎不起作用。

`($playerX, $playerY)`基本上，如果 player1与 player2 相距一个正方形，我希望这是真的`($rs[x], $rs[y])`

```
if (($rs[x] > $playerX-2 or $rs[x] < $playerX+2) && ($rs[y] > $playerY-2 or $rs[y] < $playerY+2)) {
    // code 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T01:16:36.400

如果你用一些测试值替换，你可能会得到：

```
if( (3 > 5 or 3 < 9) && (13 > 15 or 13 < 19)) 
```

显然，这总是正确的。

在这种情况下，您应该使用`&&`而不是。`or`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T01:17:15.887

这只是替换为的`or`情况`and`。这是编写 if 语句以获得奖励积分的一种更简洁的方法：

```
if(abs($playerX - $rs[x]) < 2 && abs($playerY - $rs[y]) < 2) {
    // code 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T01:18:29.490

由于 OR 运算符，您的条件最终为真

```
if (($rs[x] > $playerX-2 && $rs[x] < $playerX+2) && ($rs[y] > $playerY-2 && $rs[y] < $playerY+2)) {
   //your code
} 
```

# memory-management - 如何在 Go 中分配 16GB 内存？

> ID：10050888
> 
> 赞同：1
> 
> 时间：2012-04-07T01:15:03.497
> 
> 标签：memory-management, go, ram, large-data-volumes

我正在使用以下简单的 Go 代码来分配大小为 1024x1024x1024 的 3D 数组：

```
grid = make([][][]TColor, 1024)
for x = 0; x < 1024; x++ {
    grid[x] = make([][]TColor, 1024)
    for y = 0; y < 1024; y++ {
        grid[x][y] = make([]TColor, 1024)
    }
} 
```

该 TColor 结构是一个 4 分量的 float64 向量：

```
type TColor struct { R, G, B, A float64 } 
```

分配的中途（x=477 和 y=~600ish），最内层的 make() 调用出现恐慌...**运行时：内存不足：无法分配 65536 字节块（17179869184 正在使用）**

这适用于较低的网格分辨率，即 256³、128³ 等。现在由于结构的大小是 4x4 字节，整个网格应该需要 16 GB 的内存。我的机器（openSuse 12.1 64 位）有 32 GB 的可寻址物理（即非虚拟）内存。为什么 Go (weekly.2012-02-22) 连一半都分配不上？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T01:32:19.980

该结构有 4x8 字节，而不是 4x4。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-07T06:00:25.410

在 Go 语言的当前实现中，在 64 位 CPU 上，Go 运行时会为操作系统预留 16GB 的虚拟内存。这将 Go 程序使用的总内存限制为 16GB。

如果您打算在需要大量内存的项目中使用 Go，您需要编辑`runtime·mallocinit`文件[malloc.goc](http://golang.org/src/pkg/runtime/malloc.goc)中的函数并将变量的值`arena_size`从 16GB 增加到更大的值（例如 32GB）。修改后运行

```
cd $GOROOT/src/pkg/runtime
go tool dist install -v 
```

然后重新编译你的项目。

# mkmapview - 中心位置未更新，让我置身大海中央？

> ID：10050897
> 
> 赞同：1
> 
> 时间：2012-04-07T01:17:22.643
> 
> 标签：mkmapview

坚持一些非常基本的东西，刚开始使用 MKMapView 并试图让它放大我的位置。

```
- (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation {
self.mapView.centerCoordinate = self.mapView.userLocation.location.coordinate; } 
```

这段代码似乎无法正常工作，我知道获取位置通常需要一点时间，而且我已经离开了一段时间，现在很幸运。然而，该位置显示正确，但它并没有以此为中心（它位于地图的正中间，就在西非附近）

我在 viewDidLoad 中也有以下代码，这似乎是正确的，因为它放大到指定的高度，只是没有放置。

```
MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(self.mapView.userLocation.coordinate, 20000, 20000);
[self.mapView setRegion:region animated:YES]; 
```

编辑：在按下一次或两次然后重新查看地图后，它现在似乎正在模拟器上工作。但它仍然无法在我的 iPhone 上运行。我检查了所有的定位服务设置，它们似乎都打开了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T23:37:26.227

如果 MKMapView 的中心位于加蓬以西，则很可能您的对象之一为零，因此坐标为 0° 纬度和 0° 经度。您可以通过在调试器中设置断点并分析您的对象来轻松测试它。

![在此处输入图像描述](../Images/c16c41957362df8b86008c82581fce48.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T12:57:00.143

我使用以下代码设置要在 MapView 中显示的中心和跨度。它应该工作。

```
MKCoordinateRegion region = {{0,0},{.5,.5}}; 
region.center.latitude = doubleLattitude;
region.center.longitude = doubleLongitude;
[mapView setRegion:region animated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T04:22:50.323

```
self.mapView.centerCoordinate = self.mapView.userLocation.location.coordinate; 
```

不在用户位置上居中地图。 `- (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation`仅在设备获取用户位置时才第一次调用，更好地使用 -`(void)locationManager:didUpdateToLocation: fromLocation:`

```
- (void)locationManager:(CLLocationManager *)manager
        didUpdateToLocation:(CLLocation *)newLocation
               fromLocation:(CLLocation *)oldLocation {

    if(newLocation.horizontalAccuracy>0)
    {
    // set center of map (span will not be changed in this case)
    [mymap setCenterCoordinate:newLocation.coordinate animated:YES];

    // or use region to specify both span and center
    MKCoordinateRegion region.span.latitudeDelta = .05 ;
         region.span.longitudeDelta = .05 ;
         region.center.latitude = newLocation.coordinate.latitude ;
         region.center.longitude = newLocation.coordinate.longitude ;
            [mymap setRegion:region animated:TRUE];

    }
     } 
```

# php - 将 DIV ID 放入 PHP 变量

> ID：10050899
> 
> 赞同：-1
> 
> 时间：2012-04-07T01:18:04.420
> 
> 标签：php, jquery

我想用类获取页面上所有 div 的 id `archive`，并将它们放入 MySQL 查询中以检查 id 是否存档在数据库中。

所以基本上我想知道我该怎么做：`$div = $(this).attr('id');`

然后我会把它扔进循环来检查：

```
$matches = mysql_query("SELECT * FROM content WHERE `div` = '$div'");
        while ($post = mysql_fetch_assoc($matches)) 
        {
            if (mysql_num_rows($matches) > 0)
            { 
              //DO THIS
            }
        } 
```

更新

我现在有这个 AJAX 代码：

```
$('div.heriyah').each(function() { 
var curID = $(this).attr('id'); 
$.post("admin/btnCheck.php", { div : curID }, function(data) {
if (data == "yes") {
    $('#' + curID).html('<div class=\"add\"><div id=\"add_button_container\"><div id=\"add_button\" class=\"edit_links\">  + Add Element</div></div></div><div class=\"clear\"></div></div>');
} else {
    $('#' + curID).html('<div class=\"add\"><div id=\"add_button_container\"><div id=\"add_button\" class=\"edit_links\">  + Set As Editable Region</div></div></div><div class=\"clear\"></div></div>');
}
  });
}); 
```

还有我的 PHP：

```
$matches = mysql_query("SELECT * FROM content WHERE `div` = '".$_POST['div']."'");
 if (mysql_num_rows($matches) > 0)
 { 
    echo "yes";
 } else {
    echo "no";
 } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T01:19:56.683

您不能像这样将 javascript 变量扔给 PHP 脚本。您必须向页面发送 ajax 请求

```
$div = $(this).attr('id');
$.post("yourquerypage.php", { divid : $div }, function(data) {
    // Something to do when the php runs successfully
}); 
```

接下来，配置您的查询以从 $_POST() 获取变量

```
$matches = mysql_query("SELECT * FROM content WHERE `div` = '".$_POST['divid']."'"); 
```

当然，你必须采取注射措施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T02:15:07.167

这是简单的语法错误。删除之后的条件`else`，你应该没问题。

```
else (data == "yes") { // remove (data == "yes")
    // snip
} 
```

# java - 如何处理像“java.exe program < s1.in”这样的命令行输入

> ID：10050900
> 
> 赞同：1
> 
> 时间：2012-04-07T01:18:05.650
> 
> 标签：java, input, command-line-arguments, javac

我知道如何使用字符串 args 从命令行获取输入，并且它`input = args[0]`在我的输入位置上运行良好`java.exe program s1.in`

但我需要在终端中运行一个比较程序。所以我的输入必须有“<”符号。但是，我无法使用`input = args[1]`. 当我输入这个时，args.length 变为 0。为什么会发生这种情况？

顺便说一句，有谁知道如何在谷歌中最好地搜索这种术语？Itthink google 无法识别搜索条目中的“<”。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T01:20:20.033

这是因为当您使用 时`xyzzy <inputfile`，您的 shell 会运行`xyzzy`并将该文件“连接”到您的标准输入。然后它希望您读取该标准输入以获取您的数据 - 您永远不会看到参数，因为它已从命令行中删除（或者更有可能从未添加到您的参数列表中）。

这就是为什么许多程序会在给定文件的情况下处理文件，否则它们将从标准输入中读取数据。这正是您需要在这里做的。

为此，您可能需要以下内容：

```
import java.io.*;

class Test {
    public static void main(String args[]) {
        InputStreamReader inp = null;
        Boolean isStdIn = false;

        try {
            if (args.length > 0) {
                inp = new InputStreamReader(new FileInputStream(args[0]));
            } else {
                inp = new InputStreamReader(System.in);
                isStdIn = true;
            }

            // Now process inp.

            if (isStdIn)
                inp.close();

        } catch (Exception e) {
            System.exit(1);
        }
    } 
} 
```

它选择文件（如果可用）或标准输入流进行读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T02:13:43.063

通常，最简单的方法是使用 Scanner：

```
 Scanner scaner = new Scanner (System.in); 
```

# ios - iOS 中的 RSS 应用：通过 UIWebView 检测提要的存在

> ID：10050903
> 
> 赞同：0
> 
> 时间：2012-04-07T01:18:17.663
> 
> 标签：ios, ios5, uiwebview, rss

我正在制作一个 RSS 应用程序。

在我的“添加提要”选项卡中，有一个 UIWebView 覆盖了页面的一半。我希望能够在我的网络视图中进行谷歌搜索或输入网站。在页面的另一半，我希望显示在 UIWebView 中检测到的任何提要。

当显示提要/提要 URL 时，我希望它们位于“加号”或“添加”按钮旁边。单击后，提要会添加/保存到另一个选项卡中的 UITableView。

我不是要求任何人为我编写代码，但如果有人知道从哪里开始或者是否有某个课程会有所帮助，请告诉我！甚至是让我走上正轨的教程！

这是一个具有我正在谈论的功能（检测部分）的应用程序，我只想以不同的方式显示它。[http://itunes.apple.com/us/app/free-rss-reader/id290537970?mt=8](http://itunes.apple.com/us/app/free-rss-reader/id290537970?mt=8)

任何帮助是极大的赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T01:29:54.723

加载完成后，获取 Web 视图的 HTML 内容：

```
[webView stringByEvaluatingJavaScriptFromString:@"document.documentElement.outerHTML"]; 
```

使用正则表达式或其他方法解析内容并提取锚标记的 href 和 title 属性。

使用启发式方法查找包含“rss”、“feed”或“xml”的链接标题或 href，这可能表示 RSS 链接。

向您的用户展示过滤后的链接列表。

# r - 如何使用 R 中的列名从另一个列表中选择表列表？

> ID：10050904
> 
> 赞同：1
> 
> 时间：2012-04-07T01:18:17.977
> 
> 标签：r

我是 R 编程的初学者，并认为是否无法使用列名选择表并从列表列表中创建表列表，其中主列表的每个元素中都有不同的表为了更清楚，我有一个列表此列表中按产品列出的具有不同表格的产品。像这样：

1.  产品一：
    *   表 1-a 栏；b栏；c栏；
    *   表 2 - j 栏；k栏；l栏；
2.  产品乙：
    *   表 1 - 第 i 列；第二栏；第三栏；
    *   表 2-a 栏；b栏；c栏；
    *   表 3 - m 栏；第 n 列；o栏；

但是，产品的数量是多么巨大，我不知道产品 A 中的表 1 是否与产品 B 中的表相同，但我知道我想要的表在其他产品中具有相同的列名表（如表 1（产品 A）和表 2（产品 B）），是否可以使用特定的列名按产品选择表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T02:55:20.500

```
filter.by.colnames <- function(tab.list, col.names) {
    lapply(tab.list, function(product) Filter(function(tab) col.names %in% colnames(tab), product))
} 
```

此函数将为您提供来自 tab.list 的表列表列表，其中列名中包含 col.names 中的字符串。

```
>tab.list <- list(ProductA = list(Table1 = table(1:3, c('a', 'b', 'c')),
                                 Table2 = table(1:3, c('j', 'k', 'l'))),
                 ProductB = list(Table1 = table(1:3, c('i', 'ii', 'iii')),
                                 Table2 = table(1:3, c('a', 'b', 'c')),
                                 Table3 = table(1:3, c('m', 'n', 'o'))
                                 ))
>filter.by.colnames(tab.list, c('a')) 
```

给你

```
$ProductA
$ProductA$Table1

    a b c
  1 1 0 0
  2 0 1 0
  3 0 0 1

$ProductB
$ProductB$Table2

    a b c
  1 1 0 0
  2 0 1 0
  3 0 0 1 
```

# php - 搜索庞大的数据库

> ID：10050907
> 
> 赞同：0
> 
> 时间：2012-04-07T01:18:39.800
> 
> 标签：php, mysql, performance

我遇到了一些问题，也就是说，我有一个包含一些单词的数据库，大概有 900,000 个，我想做的是检查其中是否有一个单词，如果是，则返回该行中的另一个字段。

当我这样做时，我会超时。我知道我可以更改超时，但我真正想要的是尽可能让它更快。我的访客不想等待 30 多秒才能得到他想要的东西。

我无法制作 900,000k 静态文件，因为我在托管中有 inode 限制。

所以我几乎被关起来了，所以我能做些什么来让它变得更好？

表结构：

身份证 | 词 | 换句话说

```
CREATE TABLE `database` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `word` text COLLATE utf8_unicode_ci NOT NULL,
 `md5string` text COLLATE utf8_unicode_ci NOT NULL,
 PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=966277 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci 
```

询问：

```
mysql_query("SELECT otherword FROM table WHERE word='$word'"); 
```

另一个查询：

```
mysql_query("SELECT word FROM table WHERE otherword='$otherword'"); 
```

主查询（使用 GET 的文件）

```
$word = $_GET["word"];
echo $word;
$check = mysql_query("SELECT md5string FROM `database` WHERE word='$word'") or     die(mysql_error());
while (mysql_num_rows($check)>0)
{
$out = mysql_fetch_array($check);
$output = $out[0];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T01:23:40.033

如果搜索更多然后更新，则添加`fulltex index`并使用表。`MyIsam`否则根据需要添加索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T01:20:46.430

如果您有一个合理的索引，那么在 MySQL 数据库中搜索超过 100 万行应该不是问题。

尝试向您的数据库添加索引，如下所示（假设您要查找的单词在它自己的列中）：

```
ALTER TABLE your_word_table ADD KEY(word_column(32)); 
```

（编辑为包括密钥长度，因为事实证明它们是`TEXT`列）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T01:23:21.327

一百万不应该是30秒。你能给我们你的查询和表结构吗？尝试对字段使用全文索引。尝试使用仅搜索大写字母的大写单词定义搜索行等技巧。

```
ALTER TABLE  `database` ADD FULLTEXT (
 `word` , `md5string` ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T01:24:35.990

这应该使您在完成后快速查找。更新以包含要索引的列的数量，因为这些是文本字段。

ALTER TABLE `database` ADD INDEX word_idx (word (32)), ADD INDEX md5_idx(md5string (32))

您是否将表命名为“数据库”？它是 MySQL 中的保留字，可能会让您有些头疼......

# java - 我如何从 GWT 中的 java 访问一些 javaScript 文件

> ID：10050909
> 
> 赞同：1
> 
> 时间：2012-04-07T01:18:53.237
> 
> 标签：java, gwt

我的 GWT 项目中有 helloJava.HTML，在那个 html 文件中，我有这个 javascript 代码

```
 <script type="text/javascript">
function testJavaScript(var input){
    var var1inJS = "Default value";

    alert("Value of Var1 = " + var1inJS);
    var1inJS = input;
    alert("Value of Var1 = " + var1inJS);

    var var2inJS = "Waht is the value of Var2";

    alert("Value of Var2 = " + var2inJS);

} 
```

现在我想从我的 onmoduleLoad 类（即从我的 java 类）中调用这个方法。

可能吗 ？

hellojava.html 文件

```
 <!doctype html>
<!-- The DOCTYPE declaration above will set the     -->
<!-- browser's rendering engine into                -->
<!-- "Standards Mode". Replacing this declaration   -->
<!-- with a "Quirks Mode" doctype is not supported. -->

<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">

    <!--                                                               -->
    <!-- Consider inlining CSS to reduce the number of requested files -->
    <!--                                                               -->
    <link type="text/css" rel="stylesheet" href="HelloJSNI.css">

    <!--                                           -->
    <!-- Any title is fine                         -->
    <!--                                           -->
    <title>Web Application Starter Project</title>

    <!--                                           -->
    <!-- This script loads your compiled module.   -->
    <!-- If you add any GWT meta tags, they must   -->
    <!-- be added before this line.                -->
    <!--                                           -->
    <script type="text/javascript" language="javascript" src="hellojsni/hellojsni.nocache.js"></script>

    <script type="text/javascript">
    function testJavascript(var input){
        window.jsniAlert();
        var var1inJS = "Default value";

        alert("Value of Var1 = " + var1inJS);
        var1inJS = input;
        alert("Value of Var1 = " + var1inJS);

        var var2inJS = "Waht is the value of Var2";

        alert("Value of Var2 = " + var2inJS);

    }

    function callJava(){

    }
    </script>
  </head>

  <!--                                           -->
  <!-- The body can have arbitrary html, or      -->
  <!-- you can leave the body empty if you want  -->
  <!-- to create a completely dynamic UI.        -->
  <!--                                           -->
  <body>

    <!-- OPTIONAL: include this if you want history support -->
    <iframe src="javascript:''" id="__gwt_historyFrame" tabIndex='-1' style="position:absolute;width:0;height:0;border:0"></iframe>

    <!-- RECOMMENDED if your web app will not function without JavaScript enabled -->
    <noscript>
      <div style="width: 22em; position: absolute; left: 50%; margin-left: -11em; color: red; background-color: white; border: 1px solid red; padding: 4px; font-family: sans-serif">
        Your web browser must have JavaScript enabled
        in order for this application to display correctly.
      </div>
    </noscript>

    <h1>JSNI EXAMPLE</h1>

    <table align="center">
      <tr>
        <td colspan="2" style="font-weight:bold;"></td>        
      </tr>
      <tr>
        <td id="nameFieldContainer"></td>
        <td id="sendButtonContainer"></td>
      </tr>
      <tr>
        <td colspan="2" style="color:red;" id="errorLabelContainer"></td>
      </tr>
    </table>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T02:58:26.573

是的。这大约是您想要的：

```
public static native void callJavascript() /*-{
    $wnd.testJavaScript("hello");
}-*/; 
```

然后在您的 Java 代码中调用此方法：`callJavascript();`

阅读谷歌关于 JSNI 的文档： [https ://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T13:16:04.140

Travis 的函数语法是正确的，问题是调用函数的名称和 JS 脚本不*正确*。

以下是更正

1.  函数声明中的错误，不应用于`var`参数。

2.  删除第一行`window.jsniAlert();`

3.  将第二个函数的声明更正`function callJava(){`为`function callJava(){`

这是代码（让我们在 JS 中调用函数`testJSnative`）：

```
<script type="text/javascript">
function testJSnative(input){
    //window.jsniAlert();
    var var1inJS = "Default value";

    alert("Value of Var1 = " + var1inJS);
    var1inJS = input;
    alert("Value of Var1 = " + var1inJS);

    var var2inJS = "What is the value of Var2";

    alert("Value of Var2 = " + var2inJS);

}

function callJava(){

}
</script> 
```

类实现示例`EntryPoint`：

```
 public void onModuleLoad() {

    Button jsniButton = new Button("call JS");
    jsniButton.addClickHandler(new ClickHandler() {

      @Override
      public void onClick(ClickEvent event) {

        callJavascript();
      }
    });
    RootPanel.get().add(jsniButton);
  } 

  public native void callJavascript() /*-{
    $wnd.testJSnative("hello");
  }-*/; 
```

我希望这会有所帮助。

# android - 我如何 adb 拉出 SD 卡中存在的文件夹的所有文件

> ID：10050925
> 
> 赞同：120
> 
> 时间：2012-04-07T01:21:23.093
> 
> 标签：android, android-sdcard

我的 SD 卡中有一个文件夹： `/mnt/sdcard/Folder1/Folder2/Folder3/*.jpg`

Folder1 和 Folder2 的名称保持不变，在 Folder2 内我有 Folder3、4、5 等等。我想使用 adb 将所有 jpeg 文件而不是所有文件（还有更多）拉到计算机上的当前目录。 .

每个文件夹都有**不同数量**的 jpeg 文件和其他文件，我尝试使用它：

```
adb pull mnt/sdcard/Folder1/Folder2/Folder/*.jpg . 
```

但它没有工作..所以，我如何使用单个命令 adb 拉取 SD 卡任何文件夹中存在的所有文件（单个命令，因为每个文件夹有不同数量的文件）

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2012-04-08T04:41:23.097

## 单个文件/文件夹使用`pull`：

```
adb pull "/sdcard/Folder1" 
```

输出：

```
adb pull "/sdcard/Folder1"
pull: building file list...
pull: /sdcard/Folder1/image1.jpg -> ./image1.jpg
pull: /sdcard/Folder1/image2.jpg -> ./image2.jpg
pull: /sdcard/Folder1/image3.jpg -> ./image3.jpg
3 files pulled. 0 files skipped. 
```

## `find`使用from 的特定文件/文件夹`BusyBox`：

```
adb shell find "/sdcard/Folder1" -iname "*.jpg" | tr -d '\015' | while read line; do adb pull "$line"; done; 
```

这是一个解释：

```
adb shell find "/sdcard/Folder1" - use the find command, use the top folder
-iname "*.jpg"                   - filter the output to only *.jpg files
|                                - passes data(output) from one command to another
tr -d '\015'                     - explained here: http://stackoverflow.com/questions/9664086/bash-is-removing-commands-in-while
while read line;                 - while loop to read input of previous commands
do adb pull "$line"; done;         - pull the files into the current running directory, finish. The quotation marks around $line are required to work with filenames containing spaces. 
```

脚本将从顶部文件夹开始并递归地向下查找所有“*.jpg”文件并将它们从手机中拉到当前目录。

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2013-03-09T17:50:16.997

目录拉取可在新的 android 工具上使用。（我不知道它是从哪个版本添加的，但它适用于最新的 ADT 21.1）

```
adb pull /sdcard/Robotium-Screenshots
pull: building file list...
pull: /sdcard/Robotium-Screenshots/090313-110415.jpg -> ./090313-110415.jpg
pull: /sdcard/Robotium-Screenshots/090313-110412.jpg -> ./090313-110412.jpg
pull: /sdcard/Robotium-Screenshots/090313-110408.jpg -> ./090313-110408.jpg
pull: /sdcard/Robotium-Screenshots/090313-110406.jpg -> ./090313-110406.jpg
pull: /sdcard/Robotium-Screenshots/090313-110404.jpg -> ./090313-110404.jpg
5 files pulled. 0 files skipped.
61 KB/s (338736 bytes in 5.409s) 
```

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2013-03-12T19:18:09.107

请尝试仅提供您想要提取文件的路径我刚刚从 sdcard 获取文件，例如

`adb pull sdcard/`

不要给`*`喜欢扩大搜索或过滤掉。例如：`adb pull sdcard/*.txt`--> 这是无效的。

只要给`adb pull sdcard/`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-03-11T10:54:37.527

是的，只需使用尾部斜杠递归地拉目录。适用于 Nexus 5 和当前版本的 adb（2014 年 3 月）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-09-01T04:05:08.803

在带有 ADB 版本 1.0.32 的 Android 6 上，您必须将 / 放在要复制的文件夹后面。例如`adb pull "/sdcard/".`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-09-02T21:49:54.707

如果你想从有根设备中拉出一个访问受限的目录，你需要以根用户身份重新启动 adb：`adb root`在拉取之前键入。否则你会得到一个错误说`remote object '/data/data/xxx.example.app' does not exist`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-11-04T05:10:26.500

如果您使用 jellybean 只是启动 cmd，键入 adb devices 以确保您的可读性，键入 adb pull sdcard/ sdcard_(日期或额外) <---此文件需要事先在 adb 目录中创建。利润！

在其他版本中，键入 adb pull mnt/sdcard/sdcard_（日期或额外）

记住要制作文件，否则你会弄得一团糟，或者它不会工作。

# hibernate - 使用 Vaadin JPAContainer2.0 配置 Hibernate

> ID：10050927
> 
> 赞同：0
> 
> 时间：2012-04-07T01:22:05.633
> 
> 标签：hibernate, jpa, vaadin

我试图将 JPAContainer 的 Vaadin 演示转换为使用休眠而不是 eclipselink。但我似乎无法让它工作。

这是我引用的文档[https://vaadin.com/book/-/page/jpacontainer.html](https://vaadin.com/book/-/page/jpacontainer.html)

这是尝试运行应用程序时的堆栈跟踪：

```
description The server encountered an internal error () that prevented it from   fulfilling this request.

exception

javax.servlet.ServletException: java.lang.ExceptionInInitializerError
   com.vaadin.terminal.gwt.server.AbstractApplicationServlet.handleServiceException(AbstractApplicationServlet.java:1004)
com.vaadin.terminal.gwt.server.AbstractApplicationServlet.service(AbstractApplicationServlet.java:548)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause

java.lang.ExceptionInInitializerError
sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
java.lang.reflect.Constructor.newInstance(Constructor.java:532)
java.lang.Class.newInstance0(Class.java:372)
java.lang.Class.newInstance(Class.java:325)
com.vaadin.terminal.gwt.server.ApplicationServlet.getNewApplication(ApplicationServlet.java:82)
com.vaadin.terminal.gwt.server.AbstractApplicationServlet.createApplication(AbstractApplicationServlet.java:978)
com.vaadin.terminal.gwt.server.AbstractApplicationServlet.findApplicationInstance(AbstractApplicationServlet.java:801)
com.vaadin.terminal.gwt.server.AbstractApplicationServlet.service(AbstractApplicationServlet.java:456)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause

javax.persistence.PersistenceException: org.hibernate.exception.JDBCConnectionException: Could not open connection
    org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1365)
    org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1293)
org.hibernate.ejb.AbstractEntityManagerImpl.throwPersistenceException(AbstractEntityManagerImpl.java:1375)
org.hibernate.ejb.TransactionImpl.begin(TransactionImpl.java:62)
com.vaadin.demo.jpaaddressbook.DemoDataGenerator.create(DemoDataGenerator.java:55)
com.vaadin.demo.jpaaddressbook.JpaAddressbookApplication.<clinit>(JpaAddressbookApplication.java:11)
sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
java.lang.reflect.Constructor.newInstance(Constructor.java:532)
java.lang.Class.newInstance0(Class.java:372)
java.lang.Class.newInstance(Class.java:325)
    com.vaadin.terminal.gwt.server.ApplicationServlet.getNewApplication(ApplicationServlet.java:82)
    com.vaadin.terminal.gwt.server.AbstractApplicationServlet.createApplication(AbstractApplicationServlet.java:978)
    com.vaadin.terminal.gwt.server.AbstractApplicationServlet.findApplicationInstance(AbstractApplicationServlet.java:801)
    com.vaadin.terminal.gwt.server.AbstractApplicationServlet.service(AbstractApplicationServlet.java:456)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause

org.hibernate.exception.JDBCConnectionException: Could not open connection
    org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:131)
    org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:304)
    org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.getConnection(LogicalConnectionImpl    .java:169)
        org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.doBegin(JdbcTransaction.java:    67)
org.hibernate.engine.transaction.spi.AbstractTransactionImpl.begin(AbstractTransactionImpl.java:160)
org.hibernate.internal.SessionImpl.beginTransaction(SessionImpl.java:1363)
org.hibernate.ejb.TransactionImpl.begin(TransactionImpl.java:59)
com.vaadin.demo.jpaaddressbook.DemoDataGenerator.create(DemoDataGenerator.java:55)
com.vaadin.demo.jpaaddressbook.JpaAddressbookApplication.<clinit>(JpaAddressbookApplication.java:11)
sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
java.lang.reflect.Constructor.newInstance(Constructor.java:532)
java.lang.Class.newInstance0(Class.java:372)
java.lang.Class.newInstance(Class.java:325)
com.vaadin.terminal.gwt.server.ApplicationServlet.getNewApplication(ApplicationServlet.java:82)
com.vaadin.terminal.gwt.server.AbstractApplicationServlet.createApplication(AbstractApplicationServlet.java:978)
com.vaadin.terminal.gwt.server.AbstractApplicationServlet.findApplicationInstance(AbstractApplicationServlet.java:801)
com.vaadin.terminal.gwt.server.AbstractApplicationServlet.service(AbstractApplicationServlet.java:456)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause

java.sql.SQLException: No suitable driver found for jdbc:mysql://localhost:3306/grails_sandbox
java.sql.DriverManager.getConnection(DriverManager.java:640)
java.sql.DriverManager.getConnection(DriverManager.java:169)
    org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl.getConnection(DriverManagerConnectionProviderImpl.java:192)
    org.hibernate.internal.AbstractSessionImpl$NonContextualJdbcConnectionAccess.obtainConnection(AbstractSessionImpl.java:278)
        org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:297)
    org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.getConnection(LogicalConnectionImpl.java:169)
org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.doBegin(JdbcTransaction.java:67)
org.hibernate.engine.transaction.spi.AbstractTransactionImpl.begin(AbstractTransactionImpl.java:160)
org.hibernate.internal.SessionImpl.beginTransaction(SessionImpl.java:1363)
org.hibernate.ejb.TransactionImpl.begin(TransactionImpl.java:59)
com.vaadin.demo.jpaaddressbook.DemoDataGenerator.create(DemoDataGenerator.java:55)
com.vaadin.demo.jpaaddressbook.JpaAddressbookApplication.<clinit>(JpaAddressbookApplication.java:11)
sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
java.lang.reflect.Constructor.newInstance(Constructor.java:532)
java.lang.Class.newInstance0(Class.java:372)
java.lang.Class.newInstance(Class.java:325)
com.vaadin.terminal.gwt.server.ApplicationServlet.getNewApplication(ApplicationServlet.java:82)
com.vaadin.terminal.gwt.server.AbstractApplicationServlet.createApplication(AbstractApplicationServlet.java:978)
com.vaadin.terminal.gwt.server.AbstractApplicationServlet.findApplicationInstance(AbstractApplicationServlet.java:801)
com.vaadin.terminal.gwt.server.AbstractApplicationServlet.service(AbstractApplicationServlet.java:456)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

这是我的 persistence.xml 位于 /WEB-INF/classes/META-INF/

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0">

    <persistence-unit name="addressbook">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <properties>
                <property name="hibernate.archive.autodetection" value="class" />
                <property name="hibernate.format_sql" value="false" />
                <property name="hibernate.show_sql" value="false" />
                <property name="hibernate.hbm2ddl.auto" value="create-update" />
                <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver" />
                <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5InnoDBDialect" />
                <property name="hibernate.connection.username" value="root" />
                <property name="hibernate.connection.password" value="Shadow13" />
                <property name="hibernate.connection.url" value="jdbc:mysql://localhost:3306/grails_sandbox" />
        </properties>
    </persistence-unit>

</persistence> 
```

我已经在 /WEB-INF/lib/ 中包含了 hibernate 库和 mysql 连接器

我几乎整整一天都在搞砸这个问题，却一无所获。任何帮助者将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:08:37.037

我已经通过使用早期版本的 hibernate 3.x 来实现这一点。最初我使用的是hibernate 4.x，我认为该版本中一定有一些配置更改不允许我以我尝试的方式使用。

# javascript - 可能吗 ？“Javascript 子类”

> ID：10050928
> 
> 赞同：1
> 
> 时间：2012-04-07T01:22:05.607
> 
> 标签：javascript, class, object, subclass

我想知道我可以在javascript中做一些与这个（不工作）代码“相似”的事情吗？

```
function Player ()     {

    this.Inventory = function ()     {

        this.Inventory.UseItem = function(item_id)    {
            /* use the item ... */
        }

    }

} 
```

然后像这样使用它：

```
current_player = new Player();
current_player.Inventory.UseItem(4); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T01:27:27.613

```
function Player() {
    this.Inventory = {
        UseItem: function(item_id) {
            // code here
        }
    };
} 
```

Try that.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T01:26:47.177

```
current_player = new Player();
current_player.prototype.Inventory = {
         UseItem : function(item_id)    {
            /* use the item ... */
        }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-07T01:31:54.267

是的

```
function Player ()     {

    var Inventory = {

        UseItem : function(item_id)    {
            /* use the item ... */
        }

    };

} 
```

# css - 在 URL 栏中隐藏“www”文本 (firefox)

> ID：10050930
> 
> 赞同：0
> 
> 时间：2012-04-07T01:22:20.863
> 
> 标签：css, firefox, url, text, hide

我想知道是否可以使用 Stylish 插件中的 CSS 或/和 Greasemonkey 中的 Java 隐藏 URL 栏中的“www”文本（仅在 Firefox 中）。

我希望这能让 Firefox 更加紧凑。

* * *

这是我在 Firefox 中为 URL 栏找到的一些 CSS 代码，它将使用 Stylish 修改文本大小。希望它可以提供帮助。

```
@namespace url("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul");

.urlbar-input-box,
.searchbar-textbox {
 font-size: 11px !important;
} 
```

### 更新

我不想删除“www”，我只想从 url 栏中隐藏它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T01:24:52.810

`www.example.com`和`example.com`是两个不同的东西。通常它们被认为是相同的，但`www.`实际上是一个子域。

因此，隐藏它会误导用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T01:28:49.087

You have to use .htaccess for this

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www.example.com$ [NC]
RewriteRule ^(.*)$ http://example.com/$1 [R=301,L] 
```

Replace example.com with your domain name.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T01:44:30.937

我认为这不是一个好主意，因为`www.`实际上是一个子域，因此删除它可能会导致某些网站出现问题，因为有时它们可​​能需要`www.`一些东西。此外，如果他们使用其他子域，他们可能希望仅在其上设置 cookie（或使用该域的东西），`www.`而不是在其前面`*.example.com`没有（子域）时会发生这种情况。`www.`

所以不，我认为这不可能，也不是一个好主意。让网站所有者/开发人员决定他们是否想要`www.`在前面。它只是一个额外的三四个字符 - 离开它不会造成太大的伤害。:)

# iphone - iPhone SDK 使按钮不可点击/可触摸

> ID：10050931
> 
> 赞同：-1
> 
> 时间：2012-04-07T01:22:24.740
> 
> 标签：iphone, button, sdk

我有3个按钮，当你点击其中任何一个时，会弹出一个对应的纸卡UIImageView。在界面构建器中，纸卡位于按钮的“前面”，因此当卡可见时您看不到它们（一件好事）。

问题是，我注意到即使你看不到仍然在纸卡 UIImageView 后面的按钮，如果你点击它们所在的位置，你仍然会按下这些按钮，就好像你正在按下一样纸卡。

因此，我需要一个功能，使这些按钮在纸卡可见时无法触摸，并且在我按下后退按钮移除纸卡并返回查看三个按钮之前保持无法触摸。是否有“禁用按钮”代码之类的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T01:31:15.377

*   好的，谷歌`UIButton`，你会得到这里的文档[UIButton Class Reference](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html)。
*   现在扫描文档以查找可能有用的任何内容-（嗯，不）
*   [不，好的，让我们按照UIButton docs](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html)中的链接查看超类，其中说超类是[UIControl](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIControl_Class/Reference/Reference.html#//apple_ref/occ/cl/UIControl)
*   太好了，有一个名为 enabled 的属性 - 这看起来像是您可以使用的东西。

    ```
    self.myButton.enabled = NO; 
    ```

# javascript - Javascript 未正确更改内部 html

> ID：10050933
> 
> 赞同：-1
> 
> 时间：2012-04-07T01:22:34.153
> 
> 标签：javascript, html

这是我的Javascript...

```
<script type="text/javascript">

    function validator() {
         var x = parseInt(document.MyForm.textnuming.value);
         alert(x);

        if (document.getElementById('rbsm').checked) {
            if(x == 0){
                var y = 7.70;
            }
            else if(x == 1){
                var y = 8.41;
            }
            else if(x == 2){
                var y = 9.10;
            }
            else if(x == 3){
                var y = 9.65;
            }
            else{
                var y = 9.65+(0.71*x);
            }
        }

        else if (document.getElementById('rbme').checked || document.getElementById('rbla').checked) {
            if(x == 0){
                var y = 13.84;
            }
            else if(x == 1){
                var y = 14.95;
            }
            else if(x == 2){
                var y = 15.99;
            }
            else if(x == 3){
                var y = 17.04;
            }
            else{
                var y = 17.04+(1.09*x);
            }
        }

        else if (document.getElementById('rbmi').checked) {
            if(x < 3){
                var y = 3.99;
            }
            else{
                var y = 4.28;
            }
        }
        else {
            alert("Error!");
        }

        document.getElementById(testing).innerHTML = y;

}

</script> 
```

下面是我的 HTML 表单...

```
<body>
<form name="MyForm">
    <input type="radio" name="rbsize" value="small" id="rbsm" />Small<br />
    <input type="radio" name="rbsize" value="medium" id="rbme" />Medium<br />
    <input type="radio" name="rbsize" value="large" id="rbla" />Large<br />
    <input type="radio" name="rbsize" value="mini" id="rbmi" />Mini<br />
    Number of Ingredients: <input type="text" name="textnuming"  width="2" maxlength="2" />
    <input type="button" value="Press me!" onClick="validator()" />

</form>
<div id="testing">Price!</div>

</body> 
```

除了最后一部分之外，我的脚本已成功执行。我希望 div“测试”在通过脚本后说出 var y 是什么，但它不会改变..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T01:26:13.530

You should do something like this:

```
document.getElementById('testing').innerHTML = '' + y; 
```

Without quotes, `testing` is trying to reference a variable called `testing` instead of getting the `<div>` with `id='testing'`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T01:28:11.490

last sentence is wrong

should be: `document.getElementById("testing").innerHTML = y;`

# winforms - 调试自定义 Windows.Forms.ComboBox

> ID：10050934
> 
> 赞同：0
> 
> 时间：2012-04-07T01:22:43.570
> 
> 标签：winforms, combobox

**问题**- 每当我将自定义 ComboBox 设置为“ON”时，它会立即变为“ON”，但偶尔会切换为“OFF”。

基本上我有一个方法：

```
void value_SelectedIndexChanged(object sender, EventArgs e)
{

   if((ComboBox)sender.Focused == true)
    {
      if(value.SelectedIndex == false) // OFF
         // set a bunch of variables for OFF
      else // ON
         // set a bunch of variables for ON
    }
} 
```

在我将 ComboBox 设置为“ON”后，它会执行“ON”选定索引的代码路径。但是，由于我不明白的原因，所选索引切换到“关闭”。结果，OFF 变量代码路径随后执行。

为了尝试修复它，每当调用此“value_SelectedIndexChanged”方法时，我都会放置一条日志语句来捕获发送者和 EventArgs e。但是，发送者等于类，EventArgs 是 System.EventArgs。

请告诉我如何调试这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T01:47:03.573

我不太明白你为什么要这样构造你的代码。这样岂不是更有意义：

```
void value_SelectedIndexChanged(object sender, EventArgs e)
{
  switch(value.SelectedIndex)
  {
    case 0: // OFF
       // set a bunch of variables for OFF
       break;
    case 1: // ON
       // set a bunch of variables for ON
       break;
  }
} 
```

问题可能是由“为关闭设置一堆变量”操作引起的。您是否通过在处理程序中设置断点然后单步执行所有内容来进行测试？

# vba - 选择在 Excel 宏中具有值的列（VBA 中的范围对象）

> ID：10050946
> 
> 赞同：1
> 
> 时间：2012-04-07T01:25:05.763
> 
> 标签：vba, excel

如何在 VBA 中修改此行以仅选择具有值的列？

```
Set rng = Range("A1", Range("A65536").End(xlUp)).SpecialCells(xlCellTypeVisible) 
```

我认为我做的不对，因为该`CountLarge`物业有数十亿个细胞

这是我的数据示例

![在此处输入图像描述](../Images/ebd650f2b49d857f229a34bac08c2fc1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T15:47:47.857

> > > @SiddharthRout 是的，我只需要有数据的行。我想我现在可以使用来自@JMax 的 End(xlToLeft) ... 现在我正在遍历单元格，一旦到达最后一行，我就可以退出 For each 循环。我现在可能有这个工作。– makerofthings7 14 分钟前

为此，您既不需要`.SpecialCells`也不需要遍历行:)

这是一个示例代码。这会将所有有数据的行复制到 Sheet2 （**TRIED AND TESTED**）

```
Sub Sample()
    Dim ws As Worksheet
    Dim rng As Range
    Dim LastRow As Long, LastCol As Long

    Set ws = Sheets("Sheet1")

    With ws
        LastRow = .Cells.Find(What:="*", After:=.Range("A1"), Lookat:=xlPart, _
        LookIn:=xlFormulas, SearchOrder:=xlByRows, SearchDirection:=xlPrevious, MatchCase:=False).Row

        LastCol = .Cells.Find(What:="*", After:=.Range("A1"), Lookat:=xlPart, _
        LookIn:=xlFormulas, SearchOrder:=xlByColumns, SearchDirection:=xlPrevious, _
        MatchCase:=False).Column

        With .Range("A1:" & Split(Cells(, LastCol).Address, "$")(1) & LastRow)
            .AutoFilter Field:=1, Criteria1:="<>"
            Set rng = ws.AutoFilter.Range
            rng.Offset(1, 0).Resize(rng.Rows.Count - 1).Copy _
            Destination:=Sheets("Sheet2").Range("A1")
        End With
    End With
End Sub 
```

**快照**

![在此处输入图像描述](../Images/19bb684f096c2f806f0c745bea1194ff.png)

我假设特定行中的所有单元格都会有数据并且不会出现这样的情况

> > > @makerofthings7：我想我知道你到底想做什么:) 你不需要使用循环来实现你想要的。只是一个快速的问题。是否有可能说 Cell C10 可能有值但 B10 可能没有？– Siddharth Rout 12 分钟前

如果有，那么我们将不得不相应地设置自动过滤条件。

**编辑：** **方式 2**

另一种方法是对数据进行排序，将空格向下推，然后复制结果范围:)

高温高压

# haskell - Kernighan & Ritchie word count example program in a functional language

> ID：10050948
> 
> 赞同：9
> 
> 时间：2012-04-07T01:25:25.263
> 
> 标签：haskell, clojure, functional-programming, scheme, common-lisp

I have been reading a little bit about functional programming on the web lately and I think I got a basic idea about the concepts behind it.

I'm curious how everyday programming problems which involve some kind of state are solved in a pure functional programing language.

For example: how would the word count program from the book 'The C programming Language' be implemented in a pure functional language?

Any contributions are welcome as long as the solution is in a pure functional style.

Here's the word count C code from the book:

```
#include <stdio.h>

#define IN  1 /* inside a word */
#define OUT 0 /* outside a word */

/* count lines, words, and characters in input */
main()
{
  int c, nl, nw, nc, state;

  state = OUT;
  nl = nw = nc = 0;
  while ((c = getchar()) != EOF) {
    ++nc;
    if (c == '\n')
      ++nl;
    if (c == ' ' || c == '\n' || c = '\t')
      state = OUT;
    else if (state == OUT) {
      state = IN;
      ++nw;
    }
  }

  printf("%d %d %d\n", nl, nw, nc);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-07T06:35:26.837

基本上，在功能样式中，您需要将获取数据流的 IO 操作与基于当前字符和当前状态的一些状态转换的纯操作分开。

Tikhon 的 Haskell 解决方案非常简洁，但对输入数据执行了三遍，并将导致整个输入包含在内存中，直到计算出结果。您可以增量处理数据，我在下面使用 Text 包而不是其他高级 Haskell 工具来处理数据（这可能会以非 Haskell 人员的可理解性为代价来清理它）。

首先我们有我们的序言：

```
{-# LANGUAGE BangPatterns #-}

import Data.Text.Lazy as T
import Data.Text.Lazy.IO as TIO 
```

然后我们定义我们的数据结构来保存进程的状态（字符数、单词数和行数以及状态 IN/OUT）：

```
data Counts = Cnt { nc, nl, nw :: !Int
                  , state :: State  }
        deriving (Eq, Ord, Show)

data State = IN | OUT
        deriving (Eq, Ord, Show) 
```

现在我定义一个“零”状态只是为了方便使用。我通常会制作一些辅助函数或使用像 lense 这样的包来`Counts`简单地增加结构中的每个字段，但是没有这个答案：

```
zeros :: Counts
zeros = Cnt 0 0 0 OUT 
```

现在我将您的一系列 if/else 语句转换为纯状态机：

```
op :: Counts -> Char -> Counts
op c '\n' = c { nc = nc c + 1, nw = nw c + 1, nl = nl c + 1, state=OUT }
op c ch | ch == ' ' || ch == '\t' = c { nc = nc c + 1, state=OUT }
        | state c == OUT = c { nc = nc c + 1, nw = nw c + 1, state = IN }
        | otherwise  = c { nc = nc c + 1 } 
```

最后，该`main`函数只获取输入流并将我们的操作折叠到字符上：

```
main = do
        contents <- TIO.getContents
        print $ T.foldl' op zeros contents 
```

编辑：你提到不理解语法。这是一个更简单的版本，我将解释：

```
import Data.Text.Lazy as T
import Data.Text.Lazy.IO as TIO

op (nc, nw, nl, st) ch
  | ch == '\n'              = (nc + 1, nw + 1 , nl + 1, True)
  | ch == ' ' || ch == '\t' = (nc + 1, nw     , nl    , True)
  | st                      = (nc + 1, nw + 1 , nl    , False)
  | otherwise               = (nc + 1, nw     , nl    , st)

main = do
        contents <- TIO.getContents
        print $ T.foldl' op (0,0,0,True) contents 
```

*   这些`import`语句使我们可以访问我们使用的`getContents`和`foldl'`函数。

*   该`op`函数使用了一堆守卫 - 部件之类的`| ch = '\n'`- 基本上就像 C if/elseif/else 系列。

*   元组`( ... , ... , ... , ... )`包含我们所有的状态。Haskell 变量是不可变的，因此我们通过在先前变量的值上加一个（或不加）来创建新的元组。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-07T01:37:26.780

一种简单的方法是读取输入，然后使用一些简单的函数来获取行/单词/字符数。像这样的东西会起作用：

```
count :: String -> (Int, Int, Int)
count str = (length $ lines str, length $ words str, length str)

main :: IO ()
main = fmap count getContents >>= print 
```

这不*完全相同*，但很接近。

这真的很简单。给定一个字符串，我们可以用标准函数把它变成一个行列表，用标准`lines`函数把它变成一个单词列表`words`。由于`String`is just `[Char]`，`length`因此返回字符数。这就是我们获得三个计数的方式。（供参考，`length $ lines str`与 相同`length (lines str)`。）

重要的想法是`IO`——读取输入并将其打印出来——如何与实际逻辑分离。

此外，我们不是逐个字符地跟踪某些状态，而是通过对输入应用简单的函数来获得实际数字。这些函数都只是标准库函数的组合。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-07T04:42:48.987

在你的循环中有四个状态变量，nc、nw、nl 和 state，加上下一个字符 c。循环通过循环记住上次循环的nc、nw、nl和状态，并且c通过循环改变每次迭代。想象一下，您将这些变量从循环中取出并将它们放入一个向量中：[state, nc, nw, nl]。然后将循环构造更改为一个接受两个参数的函数，第一个是向量 [state, nc, nw, nl]，第二个是 c，并返回一个新向量，其中包含 nc、nw、nl 的更新值和状态。在 C-ish 伪代码中：

```
f([state, nc, nw, nl], c) {
    ++nc;
    if (c == '\n')
      ++nl;
    if (c == ' ' || c == '\n' || c = '\t')
      state = OUT;
    else if (state == OUT) {
      state = IN;
      ++nw;
    }
    return [state, nc, nw, nl];
} 
```

现在您可以使用向量 [OUT, 0, 0, 0] 和字符串中的第一个字符（例如“hello, world”）调用该函数，它将返回一个新向量 [IN, 1, 0, 0 ]。用这个新向量和第二个字符'e'再次调用 f，它返回 [IN, 2, 0, 0]。对字符串中的其余字符重复此操作，最后一次调用将返回 [IN, 12, 2, 0]，与 C 代码打印的值相同。基本思想是将状态变量从循环中取出，将循环的内容变成一个函数，并将状态变量的向量和下一个输入作为参数传递给该函数，并返回一个新的状态向量结果。有一个叫做 reduce 的函数可以做到这一点。

以下是您在 Clojure 中的操作方式（格式化以强调返回的向量）：

```
(defn f [[state nc nw nl] c]
  (let [nl (if (= c \n)(inc nl) nl)]
    (cond
     (or (= c \space)(= c \n)(= c \t)) [:out  (inc nc) nw       nl]
     (= state :out)                    [:in   (inc nc) (inc nw) nl]
     true                              [state (inc nc) nw       nl]
)))

(defn wc [s] (reduce f [:out 0 0 0] s))

(wc "hello, world") 
```

返回（并在 repl 中打印）[:in 12 2 0]

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-08T05:23:03.677

这是我在 Scheme 中对纯函数式、严格的、单通道、尾递归解决方案的拍摄：

```
(define (word-count input-port)
  (let loop ((c (read-char input-port))
             (nl 0)
             (nw 0)
             (nc 0)
             (state 'out))
    (cond ((eof-object? c)
           (printf "nl: ~s, nw: ~s, nc: ~s\n" nl nw nc))
          ((char=? c #\newline)
           (loop (read-char input-port) (add1 nl) nw (add1 nc) 'out))
          ((char-whitespace? c)
           (loop (read-char input-port) nl nw (add1 nc) 'out))
          ((eq? state 'out)
           (loop (read-char input-port) nl (add1 nw) (add1 nc) 'in))
          (else
           (loop (read-char input-port) nl nw (add1 nc) state))))) 
```

`word-count`接收一个`input port`作为参数；请注意，没有创建其他数据结构（结构、元组、向量等），而是将所有状态保存在参数中。例如，用于计算包含以下内容的文件中的单词：

```
hello, world 
```

像这样调用过程：

```
(call-with-input-file "/path/to/file" word-count)
> nl: 0, nw: 2, nc: 12 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-04-08T08:13:53.240

提到了 Common Lisp，但它不是一种纯函数式编程语言，它的标准不支持 TCO。单独的实现可以。

尾递归版本，如果编译器支持它：

```
(defun word-count (&optional (stream *standard-input*))
  (labels ((word-count-aux (in-p chars words lines)
             (case (read-char stream nil :eof)
               (:eof (values chars words lines))
               (#\newline (word-count-aux nil (1+ chars) words (1+ lines)))
               ((#\space #\tab)   (word-count-aux nil (1+ chars) words lines))
               (otherwise (word-count-aux t
                                          (1+ chars)
                                          (if in-p words (1+ words))
                                          lines)))))
    (word-count-aux nil 0 0 0))) 
```

但由于 TCO 不在标准中，便携式版本看起来更像这样：

```
(defun word-count (&optional (stream *standard-input*)
                   &aux (in-p nil) (chars 0) (words 0) (lines 0) char)
  (loop while (setf char (read-char stream nil nil)) do
        (case char
          (#\newline         (setf in-p nil) (incf lines))
          ((#\space #\tab)   (setf in-p nil))
          (otherwise (unless in-p (incf words)) (setf in-p t)))
        (incf chars))
  (values chars words lines)) 
```

以上不再是*Functional*。

我们可以用高阶替换循环`stream-map`：

```
(defun stream-map (function stream)
  (loop for char = (read-char stream nil nil)
        while char do (funcall function char)))

(defun word-count (&optional (stream *standard-input*)
                   &aux (in-p nil) (chars 0) (words 0) (lines 0) char)
  (stream-map (lambda (char)
                (incf chars)
                (when (eql char #\newline)
                  (incf lines))
                (if (member char '(#\space #\newline #\tab))
                    (setf in-p nil)
                  (unless in-p
                    (incf words)
                    (setf in-p t))))
              stream)
  (values chars words lines)) 
```

状态由闭包修改。为了摆脱它，我们可以实现一个`stream-reduce`.

```
(defun stream-reduce (function stream &key initial-value)
  (let ((value initial-value))
    (loop for char = (read-char stream nil nil)
          while char
          do (setf value (funcall function value char)))
  value))

(defun word-count (&optional (stream *standard-input*))
  (rest (stream-reduce
          (lambda (state char)
            (destructuring-bind (in-p chars words lines) state
               (case char
                  (#\newline         (list nil (1+ chars) words (1+ lines)))
                  ((#\space #\tab)   (list nil (1+ chars) words lines))
                  (otherwise         (list t
                                           (1+ chars)
                                           (if in-p words (1+ words))
                                           lines)))))
          stream
          :initial-value (list nil 0 0 0)))) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-04-08T14:35:25.593

这是该程序的 Scheme 版本，来自我的[博客](http://programmingpraxis.com/2009/12/08/word-count/)，它实现了整个 Unix 字数统计程序，包括参数和文件处理。关键函数是 wc，它是纯函数式的。它将所有局部变量移动到局部函数的参数中（通过 named-let 定义），这是将命令式循环转换为函数式样式的标准习惯用法。手册页和代码如下所示：

```
NAME

    wc -- word count

SYNOPSIS

    wc [ -lwc ] [ name ... ]

DESCRIPTION

    Wc counts lines, words and characters in the named files,
    or in the standard input if no name appears. A word is a
    maximal string of characters delimited by spaces, tabs or
    newlines.

    If the optional argument is present, just the specified
    counts (lines, words, or characters) are selected by the
    letters l, w or c.

#! /usr/bin/scheme --script

(define l-flag #t)
(define w-flag #t)
(define c-flag #t)

(define (update-flags fs)
  (if (not (member #\l fs)) (set! l-flag #f))
  (if (not (member #\w fs)) (set! w-flag #f))
  (if (not (member #\c fs)) (set! c-flag #f)))

(define (put-dec n width)
  (let* ((n-str (number->string n)))
    (display (make-string (- width (string-length n-str)) #\space))
    (display n-str)))

(define (wc)
  (let loop ((inword #f) (c (read-char)) (ls 0) (ws 0) (cs 0))
    (cond ((eof-object? c) (values ls ws cs))
          ((char=? c #\newline)
            (loop #f (read-char) (add1 ls) ws (add1 cs)))
          ((not (member c '(#\space #\newline #\tab)))
            (if inword
                (loop #t (read-char) ls ws (add1 cs))
                (loop #t (read-char) ls (add1 ws) (add1 cs))))
          (else (loop #f (read-char) ls ws (add1 cs))))))

(define (main args)
  (when (and (pair? args) (char=? (string-ref (car args) 0) #\-))
        (update-flags (cdr (string->list (car args))))
        (set! args (cdr args)))
  (if (null? args)
      (let-values (((ls ws cs) (wc)))
        (when l-flag (display ls) (display " "))
        (when w-flag (display ws) (display " "))
        (when c-flag (display cs) (display " "))
        (newline))
      (let loop ((args args) (l-tot 0) (w-tot 0) (c-tot 0))
        (if (null? args)
            (begin (when l-flag (put-dec l-tot 12))
                   (when w-flag (put-dec w-tot 12))
                   (when c-flag (put-dec c-tot 12)))
            (with-input-from-file (car args)
              (lambda ()
                (let-values (((ls ws cs) (wc)))
                  (when l-flag (put-dec ls 12))
                  (when w-flag (put-dec ws 12))
                  (when c-flag (put-dec cs 12))
                  (display " ") (display (car args)) (newline)
                  (loop (cdr args) (+ l-tot ls) (+ w-tot ws) (+ c-tot cs)))))))))     

(main (cdr (command-line))) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-04-08T15:17:51.797

在 Haskell 中使用严格的 IO 而不是惰性的。只做单词，但您可以在此基础上轻松实现字符和线条。需要`text`和`conduit`包：

```
module Main
where

import Control.Applicative
import Data.Conduit
import qualified Data.Conduit.Binary as CB
import qualified Data.Conduit.List as CL
import qualified Data.Conduit.Text as CT
import qualified Data.Text as T
import System.Environment

main :: IO ()
main = do args <- getArgs
          print <$> (runResourceT $
            CB.sourceFile (args !! 0)
                $$  CB.lines
                =$= CT.decode CT.utf8
                =$= CL.map T.words
                =$  CL.fold (\acc words -> acc + length words) 0) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-04-07T13:15:53.263

这是一个基于此处发布的 Clojure 示例的解决方案，但在 CL 中使用递归。

```
(defstruct (state (:constructor make-state (state chars words lines)))
  state chars words lines)

(defun wc (state stream)
  (symbol-macrolet ((s (state-state state))
                    (c (state-chars state))
                    (w (state-words state))
                    (l (state-lines state)))

    (case (read-char stream nil :eof)
      (:eof state)

      (#\Newline (wc (make-state :out (1+ c) w (1+ l)) stream))
      (#\Space   (wc (make-state :out (1+ c) w     l)  stream))

      (t (if (eq s :out)
             (wc (make-state :in (1+ c) (1+ w) l) stream)
             (wc (make-state :in (1+ c)     w  l) stream))))))

(with-input-from-string (stream "Hello Functional Programming World")
  (wc (make-state :out 0 0 0) stream)) 
```

;;; => #S(STATE :STATE :IN :CHARS 34 :WORDS 4 :LINES 0)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-04-07T23:07:20.660

我相信你可以写得更优雅一些，同时仍然只对输入进行一次迭代，但你需要让 GHC 做更多的工作，当然使用`-O2`.

我还没有编译这段代码，更不用说它的速度与 Thomas DuBuisson 的答案，但这应该表明基本方向。

```
{-# LANGUAGE BangPatterns #-}
import Data.List

wordcount = snd . foldl' go (False,0) 
  where  go (!b,!n) !c =  if  elem c [' ','\t','\n']  then  (False,n)
              else  (True, n + if b then 0 else 1)

linecount = foldl' go 0
  where  go !n !c = n + if c == '\n' then 1 else 0

main = interact $ show . go
  where  go x = (linecount x, wordcount x, foldl' (\!n _ ->n+1) 0 x) 
```

如果我正确理解流融合，那么 GHC 应该 inline`wordcount`和`linecount`into `main`，将三个`foldl'`命令合并为一个，希望如此，然后开始重新安排 if 检查。我希望它是内联的`elem`，`foldl'`当然也是。

如果没有，您当然可以强制内联并可能创建一个简单的融合规则，但也许默认值就足够了。或者，也许一些简单的改变会产生预期的效果。

顺便说一句，我写这篇文章`foldl' (\n _ ->n+1) 0 x`只是因为我听说过不好的故事`length`，但也许`length`效果很好，另一个值得分析的变化。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-04-16T19:21:20.497

这是一个 Haskell 实现，我试图与原始 C 程序所遵循的方法保持接近。迭代通常变成折叠操作，包含状态的变量最终作为传递给操作的第一个参数`fold`。

```
-- Count characters, words, and lines in an input string.
wordCount::String->(Int, Int, Int)
wordCount str = (c,w,l)
  where (inWord,c,w,l) = foldl op (False,0,0,1) str
          where op (inWord,c,w,l) next | next == '\n' = (False,c+1,w,l+1)
                                       | next == '\t' || next == ' ' = (False,c+1,w,l)
                                       | inWord == False = (True,c+1,w+1,l)
                                       | otherwise = (True,c+1,w,l)

main = interact $ show . wordCount 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-04-10T19:43:12.327

这是 Typed Racket 中使用`match`和`for`循环宏的版本：

```
(: word-count : Input-Port -> Void)
(define (word-count in)
  (define-values (nl nw nc st)
    (for/fold: ([nl : Integer 0] [nw : Integer 0] [nc : Integer 0] 
                [state : (U 'in 'out) 'out])
      ([c (in-input-port-chars in)])
      (match* (c state)
        [(#\newline _) (values (add1 nl) nw (add1 nc) 'out)]
        [((? char-whitespace?) _)
         (values (add1 nl) nw (add1 nc) 'out)]
        [(_ 'out) (values nl (add1 nw) (add1 nc) 'in)]
        [(_ _) (values nl nw (add1 nc) state)])))
  (printf "nl: ~s, nw: ~s, nc: ~s\n" nl nw nc)) 
```

# objective-c - Hide Nav Bar when Presenting a New Controller

> ID：10050949
> 
> 赞同：0
> 
> 时间：2012-04-07T01:26:11.153
> 
> 标签：objective-c

When a button is clicked, the end user is able to send an email. However the nav bar won't go away, and the email nav bar is hidden underneath the main one. Is there a way to hide the main one? This is the action that is called when the button is pressed:

```
-(void)goToEmail{
    if([MFMailComposeViewController canSendMail]) {
        MFMailComposeViewController *mailCont = [[MFMailComposeViewController alloc] init];
        mailCont.mailComposeDelegate = self;

        [mailCont setSubject:@"Hello!"];
        [mailCont setToRecipients:[NSArray arrayWithObject:@"name@email.com"]];
        [mailCont setMessageBody:@"Test" isHTML:NO];

        [self.navigationController setNavigationBarHidden:YES];
        [self presentModalViewController:mailCont animated:YES];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T01:52:27.743

`self.navigationController.navigationBar`是邮件控制器的导航控制器。因此，您隐藏了电子邮件导航栏，而不是主要导航栏。您根本不必隐藏主要的。把那个电话 ( `[self.navigationController setNavigationBarHidden:YES];`) 拿出来看看你得到了什么。您应该会在另一个前面看到邮件控制器，并显示一个导航栏。主导航栏仍然可见，但会在后面。

# jquery - show paragraph on image mouseover

> ID：10050954
> 
> 赞同：0
> 
> 时间：2012-04-07T01:26:55.273
> 
> 标签：jquery, hover, onmouseover

I have images in divs and I would like to have paragraphs to appear on top of them on mouseover, using jQuery. The paragraphs are initially hidden.

I've tried the following but can't make the paragraph to appear only when I mouseover one image, on top of that image only.

HTML:

```
<div id="photos">

    <div class="test">
        <img src="http://www.blset.com/img/300x200/biostat300200.jpg" />
        <p class="desc">Test 1</p>
    </div>

    <div class="test">
        <img src="http://www.blset.com/img/300x200/barometre1300200.jpg" />
        <p class="desc">Test 2</p>
    </div>
</div> 
```

CSS:

```
#photos {position:relative;width:100%;height:100%;background:#ccc;}

#photos img {float:left;height:120px;}

#photos p {display:none; position:absolute;top:0;left:0;} 
```

jQuery:

```
$(".test img").hover(function() {

        $(".test p").fadeIn(200);
    }, function () {

        $(".test p").fadeOut(200);

    }); 
```

jsFiddle: [http://jsfiddle.net/m7zFb/13/](http://jsfiddle.net/m7zFb/13/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T01:29:55.773

尝试这个：

```
$(".test img").hover(function(e) {
    $(e.target).next().fadeIn(200);
}, function (e) {
    $(e.target).next().fadeOut(200);
}); 
```

使用以下 CSS：

```
.test { float: left;position: relative; }

#photos {position:relative;}

#photos img {height:120px;}

#photos p {display:none; position:absolute;top:0;left:;} 
```

jsFiddle：

*   [http://jsfiddle.net/m7zFb/15/](http://jsfiddle.net/m7zFb/15/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T01:47:55.293

这看起来像你有一个问题，因为像 P 这样的块元素在以这种方式设置时不会包含在 DIV 元素中。此外，您将 P 元素设置为绝对定位，但尚未定义包含元素的定位。因此，您的 P 最终会相对于视口定位。

就个人而言，如果您希望文本位于图像顶部并使其更简单：我会将图像放置为 div 的背景，例如 background-image: url('imagepath'); 然后，您可以将文本直接放在那里，除非您真的需要它们，否则无需 P 元素标签，因为您可以在 CSS 中指定 DIV 本身的文本定位，而不会影响 IMG 元素。

如果您想了解有关定位和浮动和块元素的更多信息，这是一个很好的主题教程：[http ://coding.smashingmagazine.com/2007/05/01/css-float-theory-things-you-should -知道/](http://coding.smashingmagazine.com/2007/05/01/css-float-theory-things-you-should-know/)。请记住，如果要浮动元素，请始终设置宽度和高度。

# php - how to insert arraylist into single column in mysql database using php

> ID：10050955
> 
> 赞同：1
> 
> 时间：2012-04-07T01:26:59.600
> 
> 标签：php, mysql

Hello Sir i am pass array list through url android to php my `arraylistvalues[x,y.z,....]` this all values inserted into single column(menuname) in test table to mysql using php

i tried this

```
$a=$_POST['menuname'];
mysql_connect("localhost","root","MobixMySQL");
mysql_select_db("test");
foreach($a as $value)
{
  mysql_query("INSERT INTO test (menuname) VALUES $value)")or
  die ('unable'.mysql_error());
  echo "Inserted";
} 
```

i try above php it shows error valild argument in foreach please tell me how to solve ..please help me

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T01:35:17.330

```
mysql_query("INSERT INTO `test` (`menuname`) VALUES ('".mysql_real_escape_string( $value )."')") or die ('unable'.mysql_error()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T01:38:51.477

`$a`可能不是一个数组，因此`foreach`会抛出错误，因为它期望它的参数是一个数组。

你可以做一个`var_dump`看看到底是什么`$_POST['menuname']`。

另外，`mysql_real_escape_string`在插入到数据库之前用于转义

```
mysql_query("INSERT INTO test (menuname) VALUES ('" . mysql_real_escape_string($value) . "')"); 
```

[http://sg2.php.net/mysql_real_escape_string](http://sg2.php.net/mysql_real_escape_string)

或者更好的是，使用`pdo` [http://sg.php.net/pdo](http://sg.php.net/pdo)

# entity-framework - 使用 CodeFirst.DontDropDbJustCreateTablesIfModelChanged 会导致 EF 4.3 中的 ObjectStateManager 出现附件问题

> ID：10050971
> 
> 赞同：0
> 
> 时间：2012-04-07T01:30:34.367
> 
> 标签：entity-framework, ef-code-first, appharbor

**[编辑]：**该应用程序在我的本地运行良好，但不会在[AppHarbor](https://appharbor.com/)运行。在我的网站的初始加载时，我会[在另一个问题中提到这个错误](https://stackoverflow.com/questions/10011214/ninject-crashes-on-application-start-on-appharbor)，如果我重新加载页面，那么我会得到下面提到的错误。正如 appharbor 的管理员所提到的，他们正在解决新遗物和 ninject 的问题。但我不太确定我的第二个错误是否仍然与 appharbor 的新遗物问题有关。Devtalk.EF.CodeFirst.DontDropDbJustCreateTablesIfModelChanged 是否与 EF 4.3 一起正常工作？我只是等待他们的更新吗？

```
[InvalidOperationException: The object cannot be detached because it is not attached to the ObjectStateManager.]
   at System.Data.Objects.ObjectContext.Detach(Object entity, EntitySet expectedEntitySet)
   at System.Data.Objects.ObjectContext.Detach(Object entity)
   at Devtalk.EF.CodeFirst.DontDropDbJustCreateTablesIfModelChanged`1.SaveModelHashToDatabase(T context, String modelHash, ObjectContext objectContext)
   at Devtalk.EF.CodeFirst.DontDropDbJustCreateTablesIfModelChanged`1.InitializeDatabase(T context)
   at System.Data.Entity.Database.<>c__DisplayClass2`1.<SetInitializerInternal>b__0(DbContext c)
   at System.Data.Entity.Internal.InternalContext.<>c__DisplayClass8.<PerformDatabaseInitialization>b__6()
   at System.Data.Entity.Internal.InternalContext.PerformInitializationAction(Action action)
   at System.Data.Entity.Internal.InternalContext.PerformDatabaseInitialization()
   at System.Data.Entity.Internal.LazyInternalContext.<InitializeDatabase>b__4(InternalContext c)
   at System.Data.Entity.Internal.RetryAction`1.PerformAction(TInput input)
   at System.Data.Entity.Internal.LazyInternalContext.InitializeDatabaseAction(Action`1 action)
   at System.Data.Entity.Internal.LazyInternalContext.InitializeDatabase()
   at System.Data.Entity.Internal.InternalContext.Initialize()
   at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType)
   at System.Data.Entity.Internal.Linq.InternalSet`1.Initialize()
   at System.Data.Entity.Internal.Linq.InternalSet`1.get_InternalContext()
   at System.Data.Entity.Infrastructure.DbQuery`1.System.Linq.IQueryable.get_Provider()
   at System.Linq.Queryable.Where[TSource](IQueryable`1 source, Expression`1 predicate)
   at Core.Repository`2.Find(Expression`1 predicate) in d:\temp\2otuf0q2.xtn\input\Domain\Core\Repository.cs:line 52
   at Data.RegistrantRepository.GetAllRegistrant() in d:\temp\2otuf0q2.xtn\input\Data\Data\RegistrantRepository.cs:line 20
   at IPOD.Controllers.HomeController.Index() in d:\temp\2otuf0q2.xtn\input\IPOD\Controllers\HomeController.cs:line 28
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)
   at System.Web.Mvc.Controller.ExecuteCore()
   at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)
   at System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext)
   at System.Web.Mvc.MvcHandler.<>c__DisplayClass6.<>c__DisplayClassb.<BeginProcessRequest>b__5()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass1.<MakeVoidDelegate>b__0()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   at System.Web.Mvc.Async.AsyncResultWrapper.End[TResult](IAsyncResult asyncResult, Object tag)
   at System.Web.Mvc.Async.AsyncResultWrapper.End(IAsyncResult asyncResult, Object tag)
   at System.Web.Mvc.MvcHandler.<>c__DisplayClasse.<EndProcessRequest>b__d()
   at System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f)
   at System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action)
   at System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult)
   at System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T03:37:35.633

对我来说，初始化程序似乎正在尝试更新 EdmMetadata 表 - 至少这是我从中推断出来的：

```
Devtalk.EF.CodeFirst.DontDropDbJustCreateTablesIfModelChanged`1.SaveModelHashToDatabase(T context, String modelHash, ObjectContext objectContext) 
```

在 EF 4.3 中，不会创建 EdmMeatadata 表（如果您的数据库中有一个并且模型没有更改，则将使用它 - 即当您从 4.1/4.2 升级到 4.3+ 时 - 有关更多详细信息，请参阅：[http:// blog.oneunicorn.com/2012/01/13/ef-4-3-beta-1-what-happened-to-that-edmmetadata-table/](http://blog.oneunicorn.com/2012/01/13/ef-4-3-beta-1-what-happened-to-that-edmmetadata-table/)）

在 4.3 世界中，如果您的模型发生更改并且您需要更新数据库但不想实际删除并重新创建它，您希望使用迁移。看看这个演练：http: [//blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx)

# ruby - RVM 拒绝安装 - curl SSL 证书验证失败

> ID：10050972
> 
> 赞同：17
> 
> 时间：2012-04-07T01:30:38.213
> 
> 标签：ruby, rvm

我正在安装一个相对干净的 OS X。我有 Xcode，但删除了它。

当我输入`rvm install 1.9.3`时，我得到：

```
max-macbook:~ max$ rvm install 1.9.3 Fetching yaml-0.1.4.tar.gz to /Users/max/.rvm/archives   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed   0     0    0     0    0     0      0      0 --:--:-- --:--:--
--:--:--     0 curl: (60) SSL certificate problem, verify that the CA cert is OK. Details: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed More details here: http://curl.haxx.se/docs/sslcerts.html

curl performs SSL certificate verification by default, using a "bundle"  of Certificate Authority (CA) public keys (CA certs). If the default  bundle file isn't adequate, you can specify an alternate file using the --cacert option. If this HTTPS server uses a certificate signed by a CA represented in  the bundle, the certificate verification probably failed due to a  problem with the certificate (it might be expired, or the name might  not match the domain name in the URL). If you'd like to turn off curl's verification of the certificate, use  the -k (or --insecure) option. There was an error, please check /Users/max/.rvm/log//*.log. Next we'll try to fetch via http. Trying ftp:// URL instead.   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed   0     0    0     0    0     0      0      0 --:--:-- --:--:--
--:--:--     0 curl: (60) SSL certificate problem, verify that the CA cert is OK. Details: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed More details here: http://curl.haxx.se/docs/sslcerts.html

curl performs SSL certificate verification by default, using a "bundle"  of Certificate Authority (CA) public keys (CA certs). If the default  bundle file isn't adequate, you can specify an alternate file using the --cacert option. If this HTTPS server uses a certificate signed by a CA represented in  the bundle, the certificate verification probably failed due to a  problem with the certificate (it might be expired, or the name might  not match the domain name in the URL). If you'd like to turn off curl's verification of the certificate, use  the -k (or --insecure) option. There was an error, please check /Users/max/.rvm/log//*.log Extracting yaml-0.1.4.tar.gz to /Users/max/.rvm/src Error running 'tar xmzf /Users/max/.rvm/archives/yaml-0.1.4.tar.gz -C /Users/max/.rvm/src ', please read /Users/max/.rvm/log/ruby-1.9.3-p125/yaml/extract.log /Users/max/.rvm/scripts/functions/pkg: line 52: cd: /Users/max/.rvm/src/yaml-0.1.4: No such file or directory Configuring yaml in /Users/max/.rvm/src/yaml-0.1.4\. Error running ' ./configure
--prefix="/Users/max/.rvm/usr"  ', please read /Users/max/.rvm/log/ruby-1.9.3-p125/yaml/configure.log Compiling yaml in /Users/max/.rvm/src/yaml-0.1.4\. Error running 'make ', please read /Users/max/.rvm/log/ruby-1.9.3-p125/yaml/make.log

Database file /Users/max/.rvm/config/packages does not exist.

/Users/max/.rvm/scripts/functions/build: line 28: --version: command not found Installing Ruby from source to: /Users/max/.rvm/rubies/ruby-1.9.3-p125, this may take a while depending on your cpu(s)...

ruby-1.9.3-p125 - #fetching  ruby-1.9.3-p125 - #downloading ruby-1.9.3-p125, this may take a while depending on your connection... 
```

奇怪的事情似乎正在发生，就像我没有默认系统一样。这是我第一次尝试安装 Ruby（最终尝试使用 Rails），所以整个过程对我来说很陌生。

我检查了输出提到的几个日志，大多数时候 RVM 正在寻找一个不存在的文件（但它说它已下载）或一个不存在的程序（它试图运行`./configure`并得到一个“文件未找到”）。

任何人都可以对此有所了解吗？我想尽快弄脏 Rails。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-08T20:33:16.430

旧的 RVM 证书已过期，我们正在迁移到较短的域[rvm.io](https://rvm.io)，我已更新所有资源和代码以指向新域，只需更新 RVM：

```
rvm get head # OR:
rvm get stable 
```

还有新的更短的安装程序命令：

```
curl -L get.rvm.io | bash -s stable 
```

对于较旧的 RVM 版本，可能需要：

```
rvm get head
rvm reload
rvm get stable 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-13T13:15:41.917

我们解决了这个问题：

```
echo 'insecure' > ~/.curlrc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T03:26:50.093

我在 Ubuntu 上安装 1.9.3 时遇到了同样的错误。rvm 站点的 SSL 证书[已过期](https://rvm.io)；错误来自尝试获取[yaml-0.1.4.tar.gz](https://rvm.iosrc/yaml-0.1.4.tar.gz)。

看起来它在几次重试后确实正确地故障转移到常规 HTTP 或 FTP，所以不应该担心任何事情（尽管红色文本看起来确实不祥）。

如果您真的想抑制错误消息，请在以下位置查找这两行（对我来说，第 62 和 66 行）`~/.rvm/scripts/fetch`：

```
fetch_command="curl -x${rvm_proxy} -f -L --create-dirs -C - " # -s for silent

fetch_command="curl -f -L --create-dirs -C - " # -s for silent 
```

并在 curl 中添加 -k 标志，以便它不验证 SSL 证书：

```
fetch_command="curl -k -x${rvm_proxy} -f -L --create-dirs -C - " # -s for silent

fetch_command="curl -k -f -L --create-dirs -C - " # -s for silent 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T11:50:04.197

[这是使用 RVM 安装 Ruby 1.9.2 时](https://stackoverflow.com/questions/6414232/curl-certificate-error-when-using-rvm-to-install-ruby-1-9-2)出现 Curl 证书错误的副本

Wei 描述的解决方案在我的 Debian 机器上运行良好：

```
wget http://pyyaml.org/download/libyaml/yaml-0.1.4.tar.gz
cp yaml-0.1.4.tar.gz /home/luc/.rvm/archives
rvm install 1.9.3 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-02T20:38:04.570

截至 2013 年 11 月 2 日，@mpapis 的回答对我不起作用。最终，rvm 失败消息将我指向 rvm.io/support/fixing-broken-ssl-certificates，它说要`sudo apt-get install ca-certificates`为 Ubuntu 运行。然后标准`/curl -L get.rvm.io | bash -s stable`起作用了。

# php - 每隔这么多秒自动保存文本区域

> ID：10050973
> 
> 赞同：0
> 
> 时间：2012-04-07T01:30:52.737
> 
> 标签：php, ajax, jquery

我需要“自动保存”文本区域的帮助。基本上，每当用户在文本区域中输入时，我都想在我们的数据库中保存一个“草稿”。例如，用户正在输入博客文章。我希望脚本每 15 秒更新一次数据库，其中包含输入到 textarea 中的所有文本输入。

我希望通过 jQuery/Ajax 来实现这一点，但我似乎找不到任何满足我需求的东西。

非常感谢您对此事的任何帮助！

更新：

这是我的PHP代码：

```
<?php

$q=$_GET["q"];
$answer=$_GET["a"];

//Connect to the database
require_once('mysql_connect.php') ;

$sql="UPDATE english_backup SET q".$q."='".$answer."' WHERE student_id = {$_COOKIE['student']} LIMIT 1";
$result = mysqli_query($dbc, $sql); 
```

?>

这是我的javascript代码：

```
<script type="text/javascript">
function showUser(str, answer)
{
if (str=="")
  {
  document.getElementById("txtHint").innerHTML="";
  return;
  } 
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","getuser_english.php?q="+str+"&a="+answer,true);
xmlhttp.send();
}
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T01:33:30.857

```
function saveText() {
    var text = $("#myTextArea").val();
    // ajax call to save the text variable

    // call this function again in 15 seconds
    setTimeout(saveText, 15000);
}(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T01:47:14.273

我想你想要像 ajax 这样的东西......我正在使用 ajax jQuery，所以你需要 [jQuery 库](http://docs.jquery.com/Downloading_jQuery)才能让它工作。下载它。您可以在网站的文档选项卡上找到教程。

```
 //in your javascript file or part
$("textarea#myTextArea").bind("keydown", function() {
        myAjaxFunction(this.value) //the same as myAjaxFunction($("textarea#myTextArea").val())
});

function myAjaxFunction(value) {
    $.ajax({
        url: "yoururl.php",
        type: "POST",
        data: "textareaname=" + value,
        success: function(data) {
            if (!data) {
                alert("unable to save file!");
            }
        }
    });
}

 //in your php part
 $text = $_POST["textareaname"]; 
 //$user_id is the id of the person typing
 $sql = "UPDATE draft set text='".$text."' where user_id='".$user_id."'"; //Try another type of query not like this. This is only an example
 mysql_query($sql);
 if (mysql_affected_rows()==1) {
    echo true;
 } else echo false; 
```

嘿大家我仍然有问题请看这里[https://stackoverflow.com/questions/10050785/php-parse-html-using-querypath-to-plain-html-characters-like-facebook-twitter](https://stackoverflow.com/questions/10050785/php-parse-html-using-querypath-to-plain-html-characters-like-facebook-twitter)

# jquery - Lite Content Slider 问题 event.layerX 和 event.layerY 已弃用

> ID：10050975
> 
> 赞同：3
> 
> 时间：2012-04-07T01:31:16.893
> 
> 标签：jquery, wordpress, slider

JQuery Lite Content Slider 似乎有问题。当我尝试移至下一张幻灯片时，我会收到警告。我不完全相信这是问题所在，因为它只是一个警告，但我看不出脚本有任何其他问题。

该网站是 skincarewithaconscience.com

任何帮助或建议将不胜感激。

**更新**

我使用的是 jQuery 1.7.1，并且在 Lite Content Slider 中使用了 noConflict 模式。对不起，我应该提到这两点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T07:03:46.497

的使用`jQuery.noConflict();`删除了 jQuery 与`$`变量的关联，这在同一页面上使用多个版本的 jQuery 或同时使用 jQuery 时通常需要使用另一个框架，该框架也`$`用作对其框架的引用.

当您的站点使用`jQuery.noConflict();`时，您需要`jQuery`按名称而不是使用`$`快捷方式来引用，或者将函数包装在重命名`jQuery`为的闭包中`$`（与 livequery 或 prettyPhoto 插件相同）。

要创建一个闭包，您将使用：

```
(function($) {
  // your code using $ goes here
  $(document).ready(function() { /* etc */ });
}(jQuery)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-09T03:35:55.160

此问题已在 jQuery 1.7 中修复。

[WebKit 与 event.layerX 和 event.layerY 的问题](https://stackoverflow.com/questions/7825448/webkit-issues-with-event-layerx-and-event-layery)

该网站目前使用的是 1.6 版。可以升级吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T06:50:00.793

我发现 $ 对浏览器不可用.....但是在 settings.js 中 $ 无处不在。

是的...正如您提到的，您在 noConflict 模式下使用它

像 jquery.prettyPhoto.js 一样将它包装在 jQuery 命名空间中

这应该解决这个问题......

# cocos2d-iphone - 播放多个声音时音效中途停止？

> ID：10050977
> 
> 赞同：2
> 
> 时间：2012-04-07T01:31:40.060
> 
> 标签：cocos2d-iphone, audio, simpleaudioengine

我有一个 8 秒长的充电音效，仅在我的游戏中每个关卡结束时才触发播放。

问题是，当同时播放其他声音（激光、爆炸等）时，音效会在中途停止。我在其他地方读到，您可以同时播放多达 32 个声音，但游戏最多可能同时播放多达 7 或 8 个声音效果。但是充电的音效还是会中断。

如果我在游戏中不进行任何射击，只播放充电效果，它会一直播放。

我在启动时预加载我的声音，如下所示：

```
-(void)setupSound
{
    [[SimpleAudioEngine sharedEngine] playBackgroundMusic:@"Kickshock.mp3" loop:YES];
    [[SimpleAudioEngine sharedEngine] preloadEffect:@"explosion_large.caf"];
    [[SimpleAudioEngine sharedEngine] preloadEffect:@"explosion_small.caf"];
    [[SimpleAudioEngine sharedEngine] preloadEffect:@"laser_ship.caf"];
    [[SimpleAudioEngine sharedEngine] preloadEffect:@"powerup.mp3"];
    [[SimpleAudioEngine sharedEngine] preloadEffect:@"railgun.mp3"];
    [[SimpleAudioEngine sharedEngine] preloadEffect:@"metal.mp3"];
    [[SimpleAudioEngine sharedEngine] preloadEffect:@"count.mp3"];
    [[SimpleAudioEngine sharedEngine] preloadEffect:@"charge_up.mp3"];
}

-(id)init
{
    if( (self = [super init]) )
    {
        [self setupSound];
        // Rest of other code..
    }
    return self;
} 
```

我会在需要时播放它们（发射激光、关卡结束、爆炸等）：

```
[[SimpleAudioEngine sharedEngine] playEffect:@"charge_up.mp3" pitch:1.0 pan:0.0 gain:0.4]; 
```

我猜充电声音正在失去它的“槽”，因为其他声音正在播放？如上所述，当充电音效切断时，我最多只能同时播放 7 或 8 个声音。

如果我的声音正在失去它的“槽”，有没有办法我可以锁定一个特定的声音效果，这样它就不会失去它的“槽”？

关于我做错了什么或我能做些什么来纠正这个问题的任何想法？任何帮助是极大的赞赏！:D 感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T23:42:47.973

好的，我在看了以下教程后明白了：

[http://bobueland.com/cocos2d/?p=200](http://bobueland.com/cocos2d/?p=200)

我没有意识到 SimpleAudioEngine 是用于短音效的。

对于那些被困在这一点上的人，这就是我所做的：

在界面中：

```
CDLongAudioSource *rightChannel; 
```

在我的 init 或 setupSound 方法中：

```
rightChannel = [[CDAudioManager sharedManager] audioSourceForChannel:kASC_Right];
[rightChannel load:@"charge_up.mp3"]; 
```

当我想玩它时：

```
[rightChannel play]; 
```

我相信这只有在你只有一个长音效的情况下才有效。如果您有多个长音效，我相信您必须以不同的方式处理它。除非我只是创建更多 CDLongAudioSource 实例？有没有人有任何链接/教程？谢谢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T18:40:27.093

要播放多种声音，我会使用 CDAudioManager 和 CDSoundEngine 而不是 SimpleAudioEngine。

CDSoundEngine 允许多个通道（最多 32 个），可以同时播放声音。

例子：

```
// create engine
CDSoundEngine * engine = [CDAudioManager sharedManager].soundEngine;

// assign groups
NSArray * groups = [NSArray arrayWithObjects:
    [NSNumber numberWithInt:1],
    [NSNumber numberWithInt:1],
    [NSNumber numberWithInt:1],
    [NSNumber numberWithInt:1],
    [NSNumber numberWithInt:1],
    [NSNumber numberWithInt:1],
    [NSNumber numberWithInt:1],
    [NSNumber numberWithInt:1],
    [NSNumber numberWithInt:1],
    [NSNumber numberWithInt:1],
    [NSNumber numberWithInt:1],
    [NSNumber numberWithInt:1],
    [NSNumber numberWithInt:1],
    [NSNumber numberWithInt:1],
    [NSNumber numberWithInt:1],
    [NSNumber numberWithInt:1],
    [NSNumber numberWithInt:1],
    [NSNumber numberWithInt:1],
    [NSNumber numberWithInt:1],
    [NSNumber numberWithInt:1],
    [NSNumber numberWithInt:1],
    [NSNumber numberWithInt:1],
    [NSNumber numberWithInt:1],
    [NSNumber numberWithInt:1],
    [NSNumber numberWithInt:1],
    [NSNumber numberWithInt:1],
    [NSNumber numberWithInt:1],
    [NSNumber numberWithInt:1],
    [NSNumber numberWithInt:1],
    [NSNumber numberWithInt:1],
    [NSNumber numberWithInt:1],
    [NSNumber numberWithInt:1], nil];

[engine defineSourceGroups:groups];
[CDAudioManager initAsynchronously:kAMM_FxPlusMusicIfNoOtherAudio];

// load requests
NSMutableArray * requests = [[[NSMutableArray alloc] init] autorelease];

NSString * plist_sounds = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:[NSString stringWithFormat:@"Sounds.plist"]];
if (![[NSFileManager defaultManager] fileExistsAtPath:plist_sounds]) {
    plist_sounds = [[NSBundle mainBundle] pathForResource:@"Sounds" ofType:@"plist"];
}
NSDictionary * dictionary_sounds = [[NSDictionary dictionaryWithContentsOfFile:plist_sounds] objectForKey:@"Sounds"];   
if (dictionary_sounds != nil) {
    for (id key in dictionary_sounds) {
        [requests addObject:[[[CDBufferLoadRequest alloc] init:[key intValue] filePath:[dictionary_sounds objectForKey:key]] autorelease]];
    }
}

[engine loadBuffersAsynchronously:requests]; 
```

然后播放声音：

```
- (ALuint)play:(NSInteger)sound group:(NSInteger)group loop:(BOOL)forever volume:(float)volume {
     [[CDAudioManager sharedManager].soundEngine playSound:sound sourceGroupId:group pitch:1.0f pan:0.0f gain:volume loop:forever];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T12:56:54.680

对不起我简单的英语......
简单的引擎目前最多有 32 个音频通道

```
if(SoundId == 0)
{
    // when you say playEffect engine capture one channel for effect
    // do playEffect once and save result SoundID for Stop or Resume effect
    SoundId = SimpleAudioEngine::sharedEngine()->playEffect("audio.mp3");
}
// effect loaded, channel captured, say resume for play effect again, nothing more 
else
{
    SimpleAudioEngine::sharedEngine()->resumeEffect(SoundId);
}

// if you say effect nothing will happen with channel try
SimpleAudioEngine::sharedEngine()->stopEffect(SoundID); 
```

在这种情况下，如果运行次数超过 32，第一个效果的通道将不会被新效果替换

# jquery - 将 jQuery DatePicker 中的日期格式更改为英文 dd/mm/yy？

> ID：10050978
> 
> 赞同：1
> 
> 时间：2012-04-07T01:31:50.327
> 
> 标签：jquery, jquery-ui-datepicker

我正在尝试将 jQuery DatePicker 的日期格式化为英文格式“dd-mm-yy”，但我无法让它工作。我查看了该站点上的所有答案，他们都使用与我相同的代码。知道为什么我的不工作吗？我尝试了以下两种方法：

```
$(function () {
    $(".datefield").datepicker({dateFormat:'dd/mm/yy'});
});

$(function () {
    $(".datefield").datepicker({ dateFormat: 'dd-mm-yy' });
}); 
```

这些都没有奏效。我想知道是否必须包含其他一些 jQuery 文件才能将日期格式化为英文。

任何帮助，一如既往，非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T01:36:25.470

如果您尝试更改它，请使用 setter 方法

```
$( ".datefield" ).datepicker( "option", "dateFormat", 'yy-mm-dd' ); 
```

# nlp - 将英语单词映射到它们的单数形式

> ID：10050983
> 
> 赞同：0
> 
> 时间：2012-04-07T01:32:41.863
> 
> 标签：nlp

示例：将复数名词映射到其单数形式：children --> child, boxes ---> box 将形容词和副词的比较级和最高级映射到其基本形式映射动词 ....

我曾经找到一个开源资源来实现它。我记得，它是一个数据表？/电子表格？/数据库？的映射。有谁知道开源资源或任何替代/更好的解决方案？我正在用java编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T01:36:53.083

这称为*词干提取*，而[Lucene](http://lucene.apache.org/java/docs/index.html)（特别是[雪球](http://snowball.tartarus.org/)贡献者）可以做到这一点。

有许多[不同的词干算法](https://stackoverflow.com/questions/5068790/difference-between-lucene-stemmers-englishstemmer-porterstemmer-lovinsstemmer)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T01:46:01.483

80 年代有一篇关于 UNIX 拼写检查器的论文解释了词干提取的工作原理。这篇[Wikipedia UNIX Spell](http://en.wikipedia.org/wiki/Spell_%28Unix%29)文章提供了该论文的链接，并确定了一些替代方案。

# java - 路径元素的技术名称

> ID：10050985
> 
> 赞同：0
> 
> 时间：2012-04-07T01:33:01.557
> 
> 标签：java, path, classpath, buildpath

您一直听到诸如“类路径”、“构建路径”等术语，它们引用了一个目录列表，某些东西会出于特定原因查看这些目录。

有人知道这些路径中每个项目的技术名称吗？**路径元素？！？！**

是的 - 这是一个编程问题！我正在用 Java 编写一个类路径资源管理器对象，并且想知道如何命名我的 POJO 属性：

```
public class ClassPathExplorer
{
    private List<URI> pathElements; // ??????
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T01:37:25.367

我相信它被称为**路径**或**资源路径**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T01:57:47.103

通常它们被称为“文件路径”。

> 操作系统特定说明
> 
> 由于与文件系统密切相关，命令行类路径语法取决于操作系统。例如：
> 
> 在所有类 Unix 操作系统（如 Linux 和 Mac OS X）上，目录结构具有 Unix 语法，不同的**文件路径**由冒号 (":") 分隔。
> 
> 在 Windows 上，目录结构具有 Windows 语法，每个**文件路径**必须用分号 (";") 分隔。

看看[维基百科页面](http://en.wikipedia.org/wiki/Classpath_%28Java%29)。

# django - django中多对多连接表中的参考抽象模型

> ID：10050986
> 
> 赞同：1
> 
> 时间：2012-04-07T01:33:11.473
> 
> 标签：django, django-models

我有以下模型，需要通过指定的连接表与作者一起发布 m2m，我已经这样做了，但不断收到错误消息：

```
Error: One or more models did not validate:
publications.workshop: 'staff' is a manually-defined m2m relation through model AuthorsJoinTable, which does not have foreign keys to Staff and Workshop
publications.technicalreport: 'staff' is a manually-defined m2m relation through model          AuthorsJoinTable, which does not have foreign keys to Staff and TechnicalReport
publications.authorsjointable: 'publication' has a relation with model Publication, which has either not been installed or is abstract.
publications.authorsjointable: "unique_together" refers to staff, a field that doesn't exist. Check your syntax. 
```

我的模型看起来像：

```
class Publication(models.Model):
    title = models.CharField(max_length=500)
    staff = models.ManyToManyField("personnel.Staff", related_name='%(app_label)s_%(class)s_related', through='AuthorsJoinTable')
    tag = models.ManyToManyField("Tag", related_name='%(app_label)s_%(class)s_related')
    class Meta:
        abstract = True

class Workshop(Publication):
    location = models.CharField(max_length=100)
    workshop_title = models.CharField(max_length=100)
    start_date = models.DateField()
    end_date = models.DateField()
    def __unicode__(self):  
        return u'%s - %s' % (self.title, self.workshoptitle)

class TechnicalReport(Publication):
    published_date = models.DateField()

class AuthorsJoinTable(models.Model):
    author = models.ForeignKey("Author", related_name='%(app_label)s_%(class)s_from')
    publication = models.ForeignKey("Publication", related_name='%(app_label)s_%(class)s_to')
    order = models.IntegerField()
    class Meta:
        unique_together = ('staff', 'publication')

class Tag(models.Model):
    tag_name = models.CharField(max_length=100, primary_key=True)

class Author(models.Model):
    name = models.CharField(max_length=100)
    biography = models.TextField() 
```

那么我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T02:51:10.063

> Publications.authorsjointable：“unique_together”指的是人员，一个不存在的字段。检查你的语法。

您不能在抽象模型上创建 ForeignKey，因为该模型在 DB 中没有表，因此没有要引用的主键。因此，您应该改为使用`Publication`非抽象或参考`Workshop`。其他错误行也应该在那之后消失。

# haskell - haskell 从列表列表中删除所有出现的给定值

> ID：10050988
> 
> 赞同：6
> 
> 时间：2012-04-07T01:33:17.173
> 
> 标签：haskell

我想从列表列表中删除所有出现的给定值。例如，输入：

```
'a' ["abc", "bc", "aa"] 
```

输出：

```
 ["bc", "bc", ""] 
```

至今：

```
remove :: Eq a => a -> [[a ]] -> [[a ]]
remove y xs = filter(\x -> x/= y) xs 
```

我收到一个错误，提前谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-07T01:42:48.880

您需要映射外部列表。

```
remove y xs = map (filter(\x -> x/= y)) xs 
```

你实际上并不需要一个 lambda，更好：

```
remove y xs = map (filter(/=y)) xs 
```

# c# - 为什么这个事件会发生两次？

> ID：10050990
> 
> 赞同：0
> 
> 时间：2012-04-07T01:33:46.737
> 
> 标签：c#, multithreading, events

我正在学习 Daniel M. Solis 的 Book Illustrated C# 2010 中的 C# 事件，并且正在尝试给出的关于 VS 2010 中事件的示例。出于某种原因，我收到了两次事件消息，但对于我的一生来说，我可以'不知道为什么。这是代码：

```
using System;
using System.Text;
using System.Threading;

namespace ConsoleApplication3
{
    internal class MyTimerClass
    {
        public event EventHandler<MyTCEventArgs> Elapsed;

        public void OnOneSecond(object source, EventArgs args)
        {
            if (Elapsed != null)
            {
                MyTCEventArgs mtcea = new MyTCEventArgs("Message from OnOneSecond");
                Elapsed(source, mtcea);
            }
        }

        //-----------------
        private System.Timers.Timer MyPrivateTimer;

        public MyTimerClass()
        {
            MyPrivateTimer = new System.Timers.Timer();

            MyPrivateTimer.Elapsed += OnOneSecond;

            MyPrivateTimer.Interval = 1000;

            MyPrivateTimer.Enabled = true;
        }
    }

    internal class ClassA
    {
        public void TimerHandlerA(object source, MyTCEventArgs args)
        {
            Console.WriteLine("Class A Message: {0}", args.Message);
        }
    }

    internal class ClassB
    {
        public static void TimerHandlerB(object source, MyTCEventArgs args)
        {
            Console.WriteLine("Class B Message: {0}", args.Message);
        }
    }

    internal class MyTCEventArgs : EventArgs
    {
        public string Message;

        public MyTCEventArgs(string s)
        {
            Message = s;
        }
    }

    internal class Program
    {
        private static void Main(string[] args)
        {
            ClassA ca = new ClassA();
            MyTimerClass mc = new MyTimerClass();

            mc.Elapsed += new EventHandler<MyTCEventArgs>(ca.TimerHandlerA);
            mc.Elapsed += new EventHandler<MyTCEventArgs>(ClassB.TimerHandlerB);

            Thread.Sleep(2250);
        }
    }
} 
```

结果是以下消息： A 类消息：来自 OnOneSecond 的消息 B 类消息：来自 OnOneSecond A 类的消息 消息：来自 OnOneSecond 的消息 B 类消息：来自 OnOneSecond 的消息

为什么会发生两次？另外，当我删除 Thread.Sleep 行时，什么也没有发生。这也让我感到困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T01:39:38.700

您的计时器正在另一个线程上运行，因此它不会被调用阻塞`Sleep()`。它有一个间隔，`1000`你睡了`2250`。因此，该`Tick`事件将在此期间引发两次，这就是您所看到的。

如果您删除睡眠，则根本没有任何反应的原因是因为您的程序在`Tick`事件触发之前退出。请记住，该事件每`1000`毫秒引发一次，并且比程序退出所需的时间要少得多。

# django - Django - CSRF 令牌丢失或不正确

> ID：10050991
> 
> 赞同：15
> 
> 时间：2012-04-07T01:33:54.113
> 
> 标签：django, django-authentication, django-csrf

我刚刚将我的 django 更新到 1.4。但是当我尝试提交登录表单时出现以下错误：

> 禁止 (403) CSRF 验证失败。请求中止。失败原因：CSRF 令牌丢失或不正确。

在我的 settings.py (MIDDLEWARE_CLASSES) 中，我不得不删除以下行，因为它现在已被弃用：

```
'django.middleware.csrf.CsrfResponseMiddleware', 
```

然后我开始得到这个错误。

一些必要的信息：Urls.py

> ```
> url(r'^login/$', 'django.contrib.auth.views.login', {'template_name': 'registration/login.html'}, name='login') 
> ```

```
MIDDLEWARE_CLASSES = (
    'django.middleware.gzip.GZipMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
#   'django.middleware.csrf.CsrfResponseMiddleware',
    'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',
) 
```

登录.html

```
{% extends "base.html" %}
{% block title %} Login {% endblock %}
{% block content %}

   <div id="text">
        <table>
          <form action="" method="post">
          {% csrf_token %}
            <tr>
                <td><label for="username">Email:</label></td>
                <td><input type="text" name="username" value="" id="username"></td>
            </tr>
            <tr>
                <td><label for="password">Password:</label></td>
                <td><input type="password" name="password" value="" id="password"></td>
            </tr>
            <tr>
                <td><input type="submit" value="Login" />
            {% if next %}
                <input type="hidden" name="next" value="{{ next }}" /></td>
            {% else %}
                <input type="hidden" name="next" value="/" /></td>
            {% endif %}
            </tr>
          </form>
        </table>

      {% if form.errors %}
        <p class="error">User or password incorrect</p>
      {% endif %}
    </div>
{% endblock %} 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-07T03:05:50.290

代码看起来不错，Django 1.3 和 1.4 auth.views.login 正确使用了 RequestContext。请检查：

*   先清除浏览器数据再试
*   提交的 csrfmiddlewaretoken 值是多少
*   你导入正确的 Django 吗？
*   只需确保控制台中是否有 UserWarning 之类的？：“在模板中使用了 {% csrf_token %}，但上下文未提供该值。这通常是由于未使用 RequestContext 造成的。”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T03:43:39.637

1.  对于 1.3 和 1.4，“django.middleware.csrf.CsrfResponseMiddleware”应命名为“django.middleware.csrf.CsrfViewMiddleware”
2.  此外，对我来说，清除谷歌浏览器的 cookie 使其工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-05T13:32:02.063

我有类似的问题，我的应用程序部署在 HTTPS 上。我必须将设置标志 CSRF_COOKIE_HTTPONLY 更改为 false，以便客户端服务器可以访问 csrf cookie。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-07T19:09:07.813

**清除浏览器或 Google Chrome cookie**，我希望它会起作用。

# directx - 如何让图形调试器在 Visual Studio 11 中工作？

> ID：10050992
> 
> 赞同：1
> 
> 时间：2012-04-07T01:35:14.867
> 
> 标签：directx, windows-8, visual-studio-2012

我正在尝试使用 MS [DirectX 教程示例应用程序](http://code.msdn.microsoft.com/windowsapps/Direct3D-Tutorial-Sample-08667fb0)的 Lesson3.Cubes 中的示例代码让图形调试器工作，但我无法让它工作。

我试过按 ALT+F5 来运行诊断程序，但是当我这样做时，我在 VSGraphicsHelper.dll 中抛出异常并且应用程序无法运行。它在正常调试器下正常工作。

我还尝试将调试器设置从 Native 切换到 GPU 调试，当我按 ALT+F5 时应用程序运行，但调试 HUD 不显示并且我收到一条消息：“无法启动实验会话”如果我尝试并捕捉一帧。

作为参考，我使用英特尔显卡在本机运行 Win8 CP（NVidia 驱动程序仍然存在错误，它们往往会崩溃并让我退出）。

我还查看了有关[VS11 图形调试器要求](https://stackoverflow.com/q/9696302/63179)的问题，但它对我没有帮助。

当谈到 C++/DX 时，我还是个新手，所以不要以为我知道基础知识。任何提示、教程或演练，除了无用的 MSDN 文章，关于如何让这个工作的任何提示、教程或演练都将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T00:33:46.907

很想帮忙...

Beta 中存在与（不相关的）“GPU”调试器设置相关的错误。您应该将其设置为 Native。另一个要检查的 Beta 错误是您是否在非美国语言环境中运行。你能打开第一次机会异常（Debug > Exceptions > Win32 Exceptions）并描述抛出哪个异常吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-03T00:07:34.143

这是一个项目配置问题。要解决此问题，请执行以下步骤...

转到调试-> 项目名称属性

将“调试器类型”设置为“混合（托管和本机）”或“仅本机”。现在运行诊断程序将按预期正常工作。

# javascript - 一次定位表单字段（JavaScript 速记有点？）

> ID：10050996
> 
> 赞同：0
> 
> 时间：2012-04-07T01:35:41.280
> 
> 标签：javascript

长话短说，我有一些表单（2）需要不同类型的验证......为了论证，假设我想检查所有表单字段上的空值或“”值。

例如，如果我有 3 个字段，我如何在不为所有字段编写代码的情况下同时检查这 3 个字段中的空值...

我的意思是……例如：

继承人一些示例代码：

JS：

```
var test = document.getElementById("loginUsername");//this is the username field//

test.onfocus = removeVal;
test.onblur = inserDefVal;

function removeVal(){
    if(test.value == "Enter your Username"){
        test.value = "";    
    }
}

function inserDefVal(){
    if(test.value == ""){
        test.value = "Enter your Username"; 
    }   
} 
```

现在虽然我有这 2 个函数来检查字段值，但如果我有 3 个字段，这意味着 id 必须有一个列表

```
test.onfocus = removeVal;
test.onblur = inserDefVal;

test2.onfocus = removeVal;
test2.onblur = inserDefVal;

test2.onfocus = removeVal;
test2.onblur = inserDefVal; 
```

现在想象一下我想检查是否有空的表单中的所有其他字段......我有一个超级长的列表哈哈......

所以我的问题是，有没有办法把所有这些都放在一个……或者也许

就像一个通用的功能/或动作，说的是

（我的意思是逻辑）这里有伪代码——

`if(this.value =="") do xyz`....和“这个”是我正在徘徊的领域。

或者如果说，我要以某种方式..例如，将所有按钮名称/变量名称放在一个数组中，并说它称为 ArraOfButtons，然后

```
ArrayOfButtons.onmouseover/out = function..... 
```

我希望我不会太困惑......我只是在寻找一种方法来编写更好、更简洁的代码，因为正如你在上面看到的，如果我有那些​​ test1/2/3 来检查空，然后想象检查日期和其他值....页面会超长。

简而言之，我正在寻找一种类似于 CSS 速记的东西，而不是一个写作

```
margin-top:10px / margin-bottom:10px / margin-left/right:10px 
```

一个人会做

边距：10px；

任何提示/链接/信息我都很高兴。

先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T01:59:17.677

```
<input class="hint" type="text" name="username" value="Enter your Username" data-hint="Enter your Username" />
<input class="hint" type="text" name="email" value="Enter your Email" data-hint="Enter your Email" />
<input class="hint" type="text" name="city" value="Enter your City" data-hint="Enter your City" />

<script type="text/javascript">

    // handler for form elements when they receive onfocus
    function removeVal() {
        // get default value from attribute 'data-hint' and compare the current value
        if ( this.value == this.getAttribute( 'data-hint' ) ) {
            // if current value equal default value, set value to empty
            this.value = "";
        }
    }

    // handler for form elements when they receive onblur
    function inserDefVal() {
        // if current value equal empty
        if ( this.value == "" ) {
            // get default value from attribute and set her to field value.
            // if attribute not found to set empty
            this.value = this.getAttribute( 'data-hint' ) || "";
        }   
    }

    // search elements by className
    function addEvents( className ) {

        var i, j, elem, all, elems = [];

        // If your browser supports "getElementsByClassName", use it
        if ( document.getElementsByClassName ) {
            // search elements by class name
            elems = document.getElementsByClassName( className );
        } else {
            // search elements by class name for IE7-8.
            // IE7-8 not support native "getElementsByClassName"
            all = document.getElementsByTagName( "*" );
            // pass on all the elements
            for( j = 0; elem = all[ j++ ]; ) {
                // check for the presence of our class name
                if ( (" " + elem.className + " ").indexOf( " " + className + " " ) >= 0 ) {
                    // is found the className, put an item in the stack
                    elems[ elems.length ] = elem;
                }
            }
        }

        // hang on found items the events
        for( i = 0; elem = elems[ i++ ]; ) {
            elem.onfocus = removeVal;
            elem.onblur = inserDefVal;
        }
    }

    // initialize elements by className "hint"
    addEvents( 'hint' );

</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T01:39:47.903

如果你使用 jQuery，你可以给所有的字段一个类并像这样访问它们

```
$('.inputClass') 
```

或通过元素

```
$('input') 
```

这将允许您对所有匹配的元素执行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T02:01:22.467

要遍历页面中的每个表单字段，您可以执行以下操作

```
var formFields = document.getElementsByTagName('input');
for (var i=0; i < formFields.length; i++) {
    var field = formFields[i];
    field.onfocus = removeVal;
    field.onblur = inserDefVal;
} 
```

您还可以根据输入的特定类型或您可能分配给输入的任何任意类在该循环中进行过滤。

# c# - 在这种情况下，对控制器如何实际映射到视图感到困惑

> ID：10050998
> 
> 赞同：0
> 
> 时间：2012-04-07T01:36:16.140
> 
> 标签：c#, asp.net-mvc-3, actionmethod

我想向我的用户提供这两个 URL：

```
/Account/Orders   <- This would should be a grid of all orders.
/Account/Orders/132   <- This would show this particular order information. 
```

这是我的两个 ActionMethods：

```
[Authorize]
public ActionResult Orders(int id)
{
    using (var orderRepository = new EfOrderRepository())
    using (var accountRepository = new EfAccountRepository())
    {
        OrderModel model = new OrderModel();
        return View(model);
    }
}

[Authorize]
public ActionResult Orders()
{
    using (var orderRepository = new EfOrderRepository())
    using (var accountRepository = new EfAccountRepository())
    {            
        List<OrderModel> model = new List<OrderModel>();
        return View(model);
    }
} 
```

如果我的 Orders 视图使用 an`OrderModel`作为模型进行强类型化，则`Orders()`action 方法将不起作用，因为我需要将 IEnumerable 而不是单个对象传递给它。

在这种情况下你有什么建议？这似乎很容易做到，但我度过了很长（富有成效！）的一天，但我只能走这么远。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T02:06:54.273

假设您使用的是默认路由，`Order`则永远不会调用您的第二种方法。如果没有提供一个空值，该路由将用空值填充缺少的`id`参数，并尝试使用该`id`参数调用重载。

你可以改变你的路线或做其他事情来尝试解决这个问题，但更快的选择是只在路由系统中工作：

```
public ActionResult Orders(int id = -1)
{
  return id == -1 ? this.OrdersSummary() : this.OrdersDetail(id);
}

private ActionResult OrdersSummary()
{
  var model = new SummaryModel();
  // fill in model;
  return this.View("OrdersSummary", model);
}

private ActionResult OrdersDetail(int id) 
{
  var model = new DetailModel();
  // fill in model;
  return this.View("OrderDetail", model);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T02:42:17.067

几个选项：

1）首先设置最具体的路线

```
MapRoute("first", "/Accounts/Orders/{id}" ....
           controller="mycontroller" action="details"
MapRoute("second", "/Accounts/Orders .....
           controller="mycontroller" action="summary" 
```

2）而不是路由有两个具有不同签名的get方法：

```
public ActionResult Index()
{
} 
```

[ActionName("Index")] public ActionResult IndexDetails(int id) { }

路由应该匹配

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T01:42:57.907

你可以有两种不同的观点。一个用于网格，一个用于订单详细信息。

然后你可以这样称呼他们：

```
return View("OrderGrid", Orders); // for grid

return View("OrderDetail", Order); // for detail 
```