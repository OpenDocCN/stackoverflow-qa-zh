# StackOverflow 问答 12241000-12241999

# c++ - 指向动态分配的类的 void 指针

> ID：12241001
> 
> 赞同：3
> 
> 时间：2012-09-03T01:16:13.443
> 
> 标签：c++, void-pointers

我正在尝试将 void* 传递给函数，然后在该函数内部使指针指向动态创建的对象。这是我到目前为止所拥有的，但它似乎不起作用：

主要的：

```
int main()
{
  void* objPtr;

  setPtr(objPtr);
} 
```

设置指针：

```
void setPtr(void*& objPtr)
{
  objPtr = new Obj1; 
  (*objPtr).member1 = 10; //error: expression must have pointer-to-class type
} 
```

对象1：

```
struct Obj1
{
  int member1;
}; 
```

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T01:27:51.750

好吧，当然：a`void*`不指向类类型，因此不能用于访问成员。C++ 是静态类型的。编译器看到 a`void*`就是这样。它不会试图找出指针实际指向的对象类型——你必须通过强制转换来告诉它：

```
objPtr->whatever; // fails: objPtr is not a pointer-to-class-type

((actual_type*)objPtr)->whatever; // okay: cast to actual_type* 
```

嗯，这就是我的 C 程序员。有些人喜欢在`static_cast`这里使用：

```
static_cast<actual_type*>(objPtr)->whatever; // okay: cast to actual_type* 
```

但是，无论你怎么做，你都必须确保它`objPtr`实际上指向一个 type 的对象`actual_type`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T01:19:03.883

编辑：问题所有者的问题原来是不同的，这个答案代表着用指向指针的指针实现的同一件事。请咨询 Pete Becker 关于正确铸造的真实答案。

```
int main()
{
  void* objPtr;

  setPtr(&objPtr);
} 
```

设置指针：

```
void setPtr(void** objPtr)
{
  *objPtr = new Obj1; //where Obj1 is user defined class type
} 
```

我在这里所做的只是 C-way 指针传递，setPtr 函数接受一个指向 void 指针的指针，并按预期设置 void 指针。

# php - 正则表达式数值范围，例如 1000 - 2000？

> ID：12241002
> 
> 赞同：1
> 
> 时间：2012-09-03T01:17:09.523
> 
> 标签：php, regex

我需要检查一个字符串的格式是否为：xxx[yz]

其中 y 和 z 是两个数字。例如，y 可以是 1000，z 可以是 2000，在这种情况下，这些都是有效的：

xxx1000 xxx1500 xxx1900 xxx2000

有没有办法在正则表达式中实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T01:21:15.247

我没有看到在这里使用正则表达式的意义，尤其是 if`y`和`z`are 变量。使用正则表达式测试格式，然后取最右边的 n 个字符（将其捕获在一组中是最简单的），尝试将其解析为整数并测试它是否在范围内。

如果`y`和`z`是不变的，请确保继续：

```
xxx(2000|1[0-9]{3})$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T01:30:17.990

如果您能提供帮助，这种评估不应该真正出现在正则表达式中。您可以使用正则表达式对格式进行测试，但使用其他函数来测试内容：

```
$in = "xxx1234";
if( preg_match("/^xxx(\d{4})$/",$in,$m) && $m[1] >= 1000 && $m[1] <= 2000) {
    // ok!
} 
```

# java - Java NativeCall 库返回数据类型

> ID：12241009
> 
> 赞同：0
> 
> 时间：2012-09-03T01:19:00.017
> 
> 标签：java, dll, jna

我目前正在尝试使用来自 Java 的 NTX 索引访问 DBF。我有一个多年前的 Artemis 引擎（现在是 ApolloDB）的副本，它可以在 VB6 中执行此操作。它主要使用 3 个 DLL，主要是 SDE32.DLL。

我已经使用 NativeCall 成功访问了这些 DLL 中的许多函数

`public static VoidCall sx_Zap = new VoidCall("SDE32", "sx_Zap");` `public static IntCall sx_Use = new IntCall("SDE32", "sx_Use");`

```
intFile = sx_Use.executeCall(fileName);
        if (intFile == 0){
            if (JOptionPane.showOptionDialog(null, "Could not open:" + fileName + "\nRetry?", "Failed to open DBF", JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE, null, null, null) != JOptionPane.YES_OPTION){
                return;
            }else{
                sx_Zap.executeCall();
            }
        } 
```

该代码将非常高兴地打开并删除数据库，因此我知道我在正确的轨道上。请注意，当我想返回一个整数时，我使用了 IntCall，而当我不想返回任何内容时，我使用了 VoidCall。

我发现的问题是一些函数，如一些数据访问函数返回字符串，例如 VB6 中的 sx_GetString 函数的函数声明，该函数从当前记录中获取一个字符串字段。 `Declare Function sx_GetString Lib "sde32.dll" (ByVal cpFieldName As String) As String`

如何将这些信息导入 Java？似乎只有 int（和 boolean）和 void 返回类型，我怎样才能得到 String、double 和 long 类型？

使用 JNA，我似乎可以访问双精度和长整数，但是当我尝试使用字符串返回类型时，我得到了执行保护违规并且 Java 崩溃了。

JNA 示例：

```
public interface SDE32 extends Library {
   public String sx_GetString(String cpFieldName);
   public Double sx_GetDouble(String cpFieldName);
   public Long sx_GetLong(String cpFieldName); 
```

}

```
JNADBF.SDE32 sde = (JNADBF.SDE32) Native.loadLibrary("SDE32", JNADBF.SDE32.class);
    System.out.println(sde.sx_GetString("TILLNAME"));
    System.out.println(sde.sx_GetDouble("SELLPRICE")); 
```

JNA 错误：

`Execution protection violation`

`#`

`# A fatal error has been detected by the Java Runtime Environment:`

`#`

`# EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x00000000, pid=11104, tid=11060`

那么我怎样才能得到这些返回类型呢？尤其是字符串。

非常感激任何的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T14:23:49.007

我建议首先返回一个指针（而不是字符串），然后使用各种指针方法检查它指向的内存。一旦了解了函数返回的内容，您就可以弄清楚如何使 JNA 正确恢复数据（自动或显式）。

**编辑**

```
public interface SDE32 extends StdCallLibrary {
   public Pointer sx_GetString(String cpFieldName); // don't use String just yet
   public double sx_GetDouble(String cpFieldName);
   // Don't use Java "long" unless you want a 64-bit integer
   // On windows, native "int" and "long" are both 32 bits
   public NativeLong sx_GetLong(String cpFieldName);
} 
```

**编辑** 参考更新版本的[pascal 头文件](http://read.pudn.com/downloads92/sourcecode/others/360042/apollovcl61/SDE60.pas__.htm)，您应该使用 Java 类型`short`for`smallInt`和`WordBool`，和`int`for `Long`。但是，切换到这些类型并不能提供完整的修复（它将减少堆栈损坏 - 您将使用错误的标志“打开”数据库）。

# mysql - MySQL 数据库中的下一个最低值

> ID：12241013
> 
> 赞同：2
> 
> 时间：2012-09-03T00:59:03.500
> 
> 标签：mysql, sql

```
SELECT * 
FROM  `experience` 
WHERE  `reqexp` <>  '4793'
ORDER BY  'lvl' DESC 
LIMIT 1 
```

这就是我想要做的。我正在为客户制作在线游戏，并且需要能够使用具有随机值的 mysql 查询，并找到与该经验量相关的级别。在这种情况下，我需要找到数据库中已经存在的低于 4793 的下一个值，以便确定玩家的适当级别。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T01:23:00.957

而不是 order by `lvl`（它被错误地用`'`单引号而不是反引号引用，因此被视为字符串文字），您需要 order by`reqexp DESC`并仅查找 values `< 4793`。

```
SELECT *
FROM `experience`
WHERE `reqexp` < 4793
ORDER BY `reqexp` DESC
LIMIT 1 
```

如果您仍然需要按 排序`lvl`，则：

```
ORDER BY `reqexp` DESC, `lvl` 
```

# c# - 从 CoreData 模型生成类

> ID：12241014
> 
> 赞同：0
> 
> 时间：2012-09-03T01:19:37.570
> 
> 标签：c#, core-data, xamarin.ios, monomac

我正在尝试开发一对 C# 应用程序，一个 iOS，一个 Mac，它们使用相同的 CoreData 数据库。实际上，桌面应用程序填充它，然后它作为 iOS 应用程序的一部分分发。

我可以使用 XCode 生成一个`.xcdatamodeld`文件，描述我希望数据库的外观。我可以用它`momc`来编译成一个`.momd`文件。我可以将其中的`.mom`文件包含到我的 Mono 项目中，然后将其加载到 a`NSManagedObjectModel`中，从中我可以访问各种实体的所有属性。

我还没有弄清楚如何从数据库中创建一个类的对象，而不是访问表的属性。有什么建议么？

* * *

澄清一下：我希望能够在 XCode 中创建一个表/类，调用它`Person`。我给它两个字段：`Name`和`Phone`. 我希望能够在 Mono 中运行与此类似的代码：

```
using (var context = new NSManagedObjectContext())
{
  var me = context.Person.GetByID(1);
  me.Name = "Bobson";
  context.Save();
} 
```

显然，从数据库中获取它并将其保存回来的细节会有所不同，但要点就在那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:04:13.790

在 MonoTouch 中使用 CoreData 并不难。您需要使用 momc.exe 生成妈妈。我已经成功地做到了。

如果您将文件放在应用程序目录的顶层（可能其他位置也可以使用）并且您将构建操作设置为“BundleResource”（可能其他操作也可以使用）。实例化 UIManagedDocument 将导致 CoreData 自动获取 mom 文件，因此您无需自己创建它，而且您还可以获得 iCloud 支持的优势。

您必须自己生成类文件。编写一个可以读取 xcdatamodel 文件并输出 C# 的脚本应该很容易。这是一个外观示例。

```
public partial class Photographer : NSManagedObject
{
    public static NSString NameKey = (NSString) "name";
    public static NSString PhotosKey = (NSString) "photos";

    public Photographer(IntPtr handle) : base(handle)
    {
    }

    public string Name
    {
        get { return (NSString) Runtime.GetNSObject(ValueForKey(NameKey)); }
        set { SetValueForKey(value, NameKey); }
    }

    public NSSet Photos
    {
        get { return (NSSet) Runtime.GetNSObject(ValueForKey(PhotosKey)); }
        set { SetValueForKey(value, PhotosKey); }
    }

    void SetValueForKey(string value, NSString key)
    {
        base.SetValueForKey((NSString)(value ?? ""), key);
    }

    public static Photographer InsertNewObject(NSManagedObjectContext context)
    {
        return (Photographer) NSEntityDescription.InsertNewObjectForEntityForName("Photographer", context);
    }

    public static Photographer WithName(string name, NSManagedObjectContext context)
    {
        Photographer photographer = null;

        // This is just like Photo(Flickr)'s method.  Look there for commentary.

        if (name.Length > 0)
        {
            var request = new NSFetchRequest("Photographer")
            {
                SortDescriptors = new[] {new NSSortDescriptor("name", true, new Selector("localizedCaseInsensitiveCompare:"))},
                Predicate =  NSPredicate.FromFormat("name = %@", new NSObject[] {(NSString) name})
            };

            NSError error;
            var matches = context.ExecuteFetchRequest(request, out error);

            if (matches == null || matches.Length > 1)
            {
                // handle error
            }
            else if (matches.Length == 0)
            {
                photographer = InsertNewObject(context);
                photographer.Name = name;
            }
            else
            {
                photographer = (Photographer) matches.First();
            }
        }

        return photographer;
    }
}

public partial class Photo : NSManagedObject
{
    public static NSString ImageUrlKey = (NSString) "imageURL";
    public static NSString TitleKey = (NSString) "title";
    public static NSString UniqueKey = (NSString) "unique";
    public static NSString SubtitleKey = (NSString) "subtitle";
    public static NSString WhoTookKey = (NSString) "whoTook";

    public Photo (IntPtr handle) : base (handle)
    {
    }

    public string ImageUrl  {
        get { return (NSString)Runtime.GetNSObject(ValueForKey(ImageUrlKey)); }
        set { SetValueForKey(value, ImageUrlKey); }
    }

    public string Subtitle  {
        get { return (NSString)Runtime.GetNSObject(ValueForKey(SubtitleKey)); }
        set { SetValueForKey(value, SubtitleKey); }
    }

    public string Title  {
        get { return (NSString)Runtime.GetNSObject(ValueForKey(TitleKey)); }
        set { SetValueForKey(value, TitleKey); }
    }

    public string Unique  {
        get { return (NSString)Runtime.GetNSObject(ValueForKey(UniqueKey)); }
        set { SetValueForKey(value, UniqueKey); }

    }

    public Photographer WhoTook  {
        get { return (Photographer)Runtime.GetNSObject(ValueForKey(WhoTookKey)); }
        set { SetValueForKey(value, WhoTookKey); }
    }

void SetValueForKey(string value, NSString key)
{
    base.SetValueForKey((NSString) (value??""), key);
}

    public static Photo InsertNewObject(NSManagedObjectContext context)
    {
        return (Photo) NSEntityDescription.InsertNewObjectForEntityForName("Photo", context);
    }

    public UIImage Image
    {
        get {
            if (string.IsNullOrEmpty(ImageUrl))
                return null;

            var imageData = NSData.FromUrl(new NSUrl(ImageUrl));
            if (imageData == null)
                return null;
            return new UIImage(imageData);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:38:29.500

我相信这就是你所追求的：

```
public partial class Item : NSManagedObject
{
   internal Item(string entityName)
      : base(NSEntityDescription)m_managedObjectModel.EntitiesByName.ObjectForKey(new NSString(entityName)), m_managedObjectContext) 
```

其中 entityName 是来自 MOM 的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T19:19:00.583

根据@t9mike 的评论（如果他给出答案，我会接受），我放弃了使用 CoreData 以支持更跨平台的方法。我最终将 Vici CoolStorage 用于 ORM，尽管我必须将源代码嵌入到我的项目中才能使其正常工作。

# html - 图标：使用 HTML 还是 CSS？

> ID：12241018
> 
> 赞同：1
> 
> 时间：2012-09-03T01:20:07.003
> 
> 标签：html, css, image, icons

使用图标的最佳做法是什么？

我应该在我的 html 中输入图标吗？或者我应该使用 CSS 背景？

另外，如果我想同时指定图像（透明背景）和其他背景颜色（不想每次都创建新的 .png 文件）怎么办。

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T01:30:23.917

我更喜欢为图标使用 CSS 背景——这也意味着我可以为所有图标使用精灵，并为每个实例适当地定位它们，从而减少对服务器的调用。

如果相同的图标出现在不同的背景上，我将创建 2 个精灵 - 1 个用于浅色背景，1 个用于深色背景，或者您可以使用透明的 PNG-24。这是一个更大的文件大小，但透明度没有遮罩，因此适用于所有彩色背景。请记住，IE6 不支持透明 PNG，因此您可能需要备用（如果您在意的话）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T01:53:25.017

两者：对于任何图像，这取决于这是[传达信息的图像](http://www.braillenet.org/accessibilite/referentiel-aw21-en/glossaire.php#mImgInfo)还是[装饰图像](http://www.braillenet.org/accessibilite/referentiel-aw21-en/glossaire.php#mImgDeco)。

**传达信息的图像**

它必须是带有有意义的文本替代的 HTML 图像（例如：仅由该图像组成的链接。链接绝不能为空，因此图像不能是 CSS 图像，否则链接将为空。

**装饰形象**

背景图像或精灵的一部分或自定义字体字符或带有空替代文本的 HTML 图像（后者如果是作者将仅用作内容中的装饰一次且您不会添加到样式表中的图像）

**[适当使用替代文本](http://webaim.org/techniques/alttext/)**（编辑：WebAIM）

编辑：用户看不到任何图像的一种情况是，如果他使用[High Contrast Mode](https://stackoverflow.com/questions/10091676/what-actually-happens-to-css-in-high-contrast-mode)。然后，如果他在仅由没有文字的大“图标”组成的菜单中看不到任何链接，那就太糟糕了。如果他看不到链接项目前面的项目符号，但这些链接的文字仍然很清楚，那么可以。
还有许多其他原因导致图像不会出现在页面上，无论是 Wi-Fi 不稳定、连接速度慢、移动设备成本、代理或家长控制有问题、用户决定等

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T02:00:07.853

CSS 通常更好，因为您可以使用[CSS 精灵](http://www.alistapart.com/articles/sprites/)并添加悬停效果。另外，因为您使用的是 CSS，您只需向元素添加一个类，精灵就会出现，这使得它成为一个更加灵活的解决方案。

```
<span class="icon">Icon</span> 
```

CSS：

```
.icon {
     background: (images/icon.png) 0 0 no-repeat;
     width: 25px;
     height: 25px;
     text-indent: -10000px; /* hides the text */
     display: inline-block; }
.icon:hover { background-position: 0 25px; } 
```

唯一一次我建议使用`<img>`over CSS 是用于您网站的徽标 - CSS 不允许您右键单击 -> 查看图像。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T01:45:05.473

使用矢量文件并将其存储在字体中。这种方法适用于未来未知的分辨率——比如视网膜。除了图标应该是矢量绘制的，因此保持它们矢量是一个明显的步骤。

[http://css-tricks.com/examples/IconFont/](http://css-tricks.com/examples/IconFont/)

[http://www.webdesignerdepot.com/2012/01/how-to-make-your-own-icon-webfont/](http://www.webdesignerdepot.com/2012/01/how-to-make-your-own-icon-webfont/)

# c++ - 找不到头文件

> ID：12241019
> 
> 赞同：2
> 
> 时间：2012-09-03T01:20:25.743
> 
> 标签：c++, header-files, icc

我无法在磁盘上找到特定的头文件，而我的编译器（icpc）包含它而没有任何错误。

**如何找到头文件？**

[**我尝试按照这里**](https://stackoverflow.com/questions/344317/where-does-gcc-look-for-c-and-c-header-files)的建议查询预处理器的头文件位置。

首先，icpc 不报告它的预处理器。其次，我也无法在`cc1`'s 的位置找到头文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T01:26:04.360

在您的编译器中查找和选项，类似于 MSVC 中的 /P：

[http://msdn.microsoft.com/en-us/library/8z9z0bx6(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/8z9z0bx6(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T01:26:34.980

通常你可以在你安装编译器的路径中找到它，比如如果你安装了 mingw at `C:\MingW`，那么包含文件将在`C:\MinGW\include`所以去搜索你安装 icpc 的路径我认为会有所帮助:)

# c# - EF通用存储库查询方法，如何选择一列？

> ID：12241021
> 
> 赞同：0
> 
> 时间：2012-09-03T01:20:49.570
> 
> 标签：c#, .net, linq, entity-framework-4

我使用带有存储库模式的 EF 4，它有一个通用的查询方法，编码如下：

```
 public IEnumerable<T> Query(Expression<Func<T, bool>> filter)
    {
        return objectSet.Where(filter);
    } 
```

我知道如何查询以选择一个完整的对象，如下所示：

```
context.PeriodRepository.Query(a => a.EntityId == selectedEntityId); 
```

你能指导我如何查询非强制对象而不是如何获取一个属性，我想将属性直接放入文本框中。

谢谢

**编辑**

我决定从查询中获取完整对象：

```
MyType obj = context .Signatories1Repository.Query(a=>a.Id==signatory1Id); 
```

但它显示一个错误：

无法从 IEnumarable 转换为类型。存在显式转换。你错过了演员表吗？

你能建议我如何让它正常工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T01:24:23.430

为了只检索一个属性（或一些属性），您需要调用`Select()`linq 扩展方法来进行转换，以检索您想要的内容：

```
context.PeriodRepository.Query(a => a.EntityId == selectedEntityId)
       .Select(x => x.TheProperty); 
```

我还建议返回`IQueryable<T>`而不是`IEnumerable<T>`在您的 Query 方法中。事实上，我会避免使用查询方法，而只是让你的存储库实现`IQueryable<T>`，这样你就可以使用开箱即用的 linq 扩展方法`Where()`来代替。

# c# - 如何将此字符串拆分为数组？

> ID：12241029
> 
> 赞同：1
> 
> 时间：2012-09-03T01:23:10.433
> 
> 标签：c#, arrays, delimiter

我有一个字符串：

```
string s = \x22thanh\\u003Cb\\u003E nien\\u003C\\/b\\u003E\x22,0,[]],[\x22thanh\\u003Cb\\u003E ca\\u003C\\/b\\u003E\x22,0,[]],[\x22thanh\\u003Cb\\u003E nhan\\u003C\\/b\\u003E\x22,0,[]],[\x22thanh\\u003Cb\\u003E thao\\u003C\\/b\\u003E\x22 
```

我想将此字符串拆分为一个名为“s2”的数组，分隔符为“,0,[]],[”。我尝试使用 s.Split() 但它只接受分隔符是一个字符。我怎么能做到这一点？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T01:26:20.820

`String.Split`唯一接受 a作为分隔符的重载`string`需要一个数组 ( `string[]`)，所以你会想要这个：

```
string[] s2 = s.Split(new string[] { ",0,[]],[" }, StringSplitOptions.RemoveEmptyEntries); 
```

查看这些重载：

[String.Split (String[], StringSplitOptions)](http://msdn.microsoft.com/en-us/library/tabh47cf.aspx)

[String.Split (String[], Int32, StringSplitOptions)](http://msdn.microsoft.com/en-us/library/1bwe3zdy.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T01:29:35.303

希望这有效

```
s.Split(new string[] {"0","[]]","[" }, StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T01:31:29.097

```
string[] s2 = s.Split(new string[] { ",0,[]],[" }, StringSplitOptions.None); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T01:37:35.767

按正则表达式拆分也应该有效。

```
string[] s2 = Regex.Split(s, ",0,\\[\\]\\],\\[") 
```

# android - Android：将结构化名称信息传递给 ACTION_INSERT_OR_EDIT 不起作用

> ID：12241036
> 
> 赞同：5
> 
> 时间：2012-09-03T01:24:35.533
> 
> 标签：android, android-intent

我试图将 StructuredName 信息传递给 ACTION_INSERT_OR_EDIT，但它不起作用。所有其他领域都很好。

```
Intent i = new Intent(Intent.ACTION_INSERT_OR_EDIT);
i.setType(ContactsContract.Contacts.CONTENT_ITEM_TYPE)

ArrayList<ContentValues> data = new ArrayList<ContentValues>();

// add structured name, this does not work, the information do not show
// in the ACTION_INSERT_OR_EDIT activity

ContentValue row = new ContentValues();
row.put(Data.MIMETYPE, StructuredName.CONTENT_ITEM_TYPE);
row.put(StructuredName.FAMILY_NAME, "Test_family_name");
row.put(StructuredName.GIVEN_NAME, "Test_given_name");
data.add(row);`

// add other values...., all of them work

i.putParcelableArrayListExtra(ContactsContract.Intents.Insert.DATA, data); 
```

# mysql - 如何创建具有多值属性的单个元组？

> ID：12241038
> 
> 赞同：0
> 
> 时间：2012-09-03T01:24:59.103
> 
> 标签：mysql

我的 MySQL 数据库中有两个表：`supplier`和`supplier_contact`. 我可以从这些表中获取数据。如何为每个`supplier_ID`not two 生成单个元组或为 single 生成树元组`supplier_ID`？

我需要的是：

```
-------------------------------------------------------
supplier_id | f_name | l_name | Mobile_num | Home_num |
------------------------------------------------------- 
```

`mobile_num`并`home_num`存储在`supplier_contact`表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T01:37:05.377

假设您的 supplier_contact 表有一个“种类”列，您可以将其连接两次，每次都将类型指定为连接条件的一部分：

```
SELECT s.supplier_id, s.f_name, s.l_name,
 cmob.number as Mobile_num,
 chom.number as Home_num
FROM 
 suppliers AS s
 LEFT JOIN supplier_contact AS cmob ON s.supplier_id = cmob.supplier_id AND cmob.type = 'mobile'
 LEFT JOIN supplier_contact AS chom ON s.supplier_id = chom.supplier_id AND chom.type = 'home'
GROUP BY supplier_id 
```

请注意，MySQL 允许这样做，但在其他 RDBMS 中，您需要在数字列的 SELECT 列表中使用聚合函数，例如`MAX()`or `GROUP_CONCAT()`。

或者，您可以执行单个联接并将条件添加到 SELECT 列表：

```
SELECT s.supplier_id, s.f_name, s.l_name,
 GROUP_CONCAT(IF(c.type = 'mobile', c.number, NULL)) AS Mobile_num,
 GROUP_CONCAT(IF(c.type = 'home', c.number, NULL)) AS Home_num
FROM 
 suppliers AS s
 LEFT JOIN supplier_contact AS c USING(supplier_id)
GROUP BY supplier_id 
```

# api - 将站点和 api 连接到同一个数据库

> ID：12241043
> 
> 赞同：2
> 
> 时间：2012-09-03T01:25:42.703
> 
> 标签：api, rest, database-connection

我正在为我为客户编写的应用程序构建一个 REST API。我之前在应用程序和网站之间共享信息的方式是我会为两者使用 API。我想知道将站点直接连接到数据库以及将 API 连接到同一个数据库是否是一个好的决定。

更新：具体来说，该网站将供管理员和代理查看有关公司客户的信息。他们将能够联系、查看合同等。使用它的人不会超过 50 人。该应用程序用于收集地理位置数据、签到和其他个人信息。客户已明确要求这样做。它可能不会超过 1000 个用户。对于这种规模的东西，我认为如果管理站点直接连接到数据库而不是通过 API 层就可以了。我不确定这是否是一个完全明智的决定，我想听听为什么一种方法比另一种更好的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-11T03:54:06.273

时隔一年多，我想回到这个问题上来回答一下。我打算设计这个系统的方式是让移动应用程序使用数据库，并且让网站跳过该层并直接使用数据库。我现在意识到，如果我要使用基于服务的架构，我不妨在整个系统中使用它以保持一致。第一种方法的优点是直接使用 DB 编码更简单，而且可能更快，因为它不需要太多的网络流量。但是，我在两个单独的应用程序上复制代码。第二种方法允许我定义一个逻辑层，它将在我的应用程序中保持通用。

# javascript - 在 PHP 中访问 Canvas RGB 数据并组装图像

> ID：12241046
> 
> 赞同：0
> 
> 时间：2012-09-03T01:26:08.137
> 
> 标签：javascript, php, canvas, rgb

我需要能够访问画布的图像数据，但是它存储在某种数组（UINT8 或其他东西）中，阻止我访问数据。具体来说，我需要获取整个画布的RGB数据。

假设可以做到，我如何（在 PHP 中）从 RGB 数据数组中正确重建画布图像？此应用程序所用的浏览器缺少“toDataURL()”，所以我希望按照指定的方式完成此操作。

# c# - 静态类和 Getter

> ID：12241052
> 
> 赞同：4
> 
> 时间：2012-09-03T01:26:52.683
> 
> 标签：c#, collections, static

我有一个名为 Test 的静态类和一个私有 List 集合。现在我想实现一个 getter 来将我的 List 返回到主类。这是正确的方法吗？

其次可以实现静态构造函数吗？如果没有，我如何正确声明我的列表集合？

```
static class Storage
{

   private static List<string> store;

   static Storage()
   {
       store = new List<string>();

   }

   //Is it okay to have a getter in my static class to return my List Collection
   public static List<string> getList
   {
       get
       {
           return store;
       }

   }

   public static void addString(string add)
   {
       store.Add(add);
   }

   public static void removeString(string remove)
   {
       store.Remove(remove);
   } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T01:37:47.183

如果您在 getter 中返回对列表的引用，则任何调用者都可以在列表中添加或删除项目，而无需通过静态类的添加/删除方法。如果你想阻止任何人修改列表，我会从 getter返回一个[只读集合：](http://msdn.microsoft.com/en-us/library/e78dcd75.aspx)

```
public static IEnumerable<string> getList
{
   get
   {
       return store.AsReadonly();
   }
} 
```

**编辑**

正如 Marc 指出的那样，您需要注意多线程问题。想象一下，一个线程枚举通过 getter 获得的集合，而另一个线程通过添加或删除一个项目来修改它 -> 您将收到一个异常，指出您在枚举时无法修改集合。唯一的解决方案是锁定对私有集合的所有访问并在 getter 中返回一个副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T01:28:56.043

你可以这样做`private static readonly List<string> store = new List<string>()`。

拥有一个属性来返回您的字段是处理它的正确方法。你不应该有公共领域。

此外，当我们讨论风格时：方法和属性名称应该按照 Microsoft 发布的命名约定以大写字母开头。

# wix - 为什么我的 WiX 安装程序需要一个空的 CreateFolder 来有条件地更新 Xml 文件？

> ID：12241056
> 
> 赞同：48
> 
> 时间：2012-09-03T01:28:08.673
> 
> 标签：wix, windows-installer, wix-extension

**TL;DR**：为什么我需要在这个条件组件中使用一个*空* `<CreateFolder/>`元素才能使其工作？

我正在为内部应用程序组装一个简单的基于 WiX 的安装程序。此安装程序需要部署一个标准配置文件（一个普通的 .NET`.config`文件），然后使用传递给`msiexec`命令行的属性对其进行自定义。

其中一项自定义是仅在定义了 RUNTIME 属性时才创建特定的应用程序设置。这是 WiX 组件：

```
 <Component Id="C.Rbnz.Fsis.CollectionPeriodService.exe.config.runtime"
             Guid="*">
    <Condition>
      <![CDATA[RUNTIME]]>
    </Condition>

    <CreateFolder/>

    <util:XmlFile Id="X.Runtime.1"
                  Action="createElement"
                  ElementPath="/configuration/appSettings"
                  File="[#F.Rbnz.Fsis.CollectionPeriodService.exe.config]"
                  Name="add"
                  Sequence="2"/>

    <util:XmlFile Id="X.Runtime.2"
                  File="[#F.Rbnz.Fsis.CollectionPeriodService.exe.config]"
                  ElementPath="/configuration/appSettings/add[\[]not(@key)[\]]"
                  Action="setValue"
                  Name="key"
                  Value="RunTime"
                  Sequence="3"/>

    <util:XmlFile Id="X.Runtime.3"
                  File="[#F.Rbnz.Fsis.CollectionPeriodService.exe.config]"
                  ElementPath="/configuration/appSettings/add[\[]@key='RunTime'[\]]"
                  Action="setValue"
                  Name="value"
                  Value="[RUNTIME]"
                  Sequence="4"/>

  </Component> 
```

这就像我想要的那样工作 - 如果在命令行上指定 RUNTIME `msiexec`，则创建新元素；如果没有，什么都不会发生。

**为什么我必须`<CreateFolder/>`在这个组件中有空？**

当我试图让它工作时，我发现了“ [Wix Condition Statement](http://madtechnology.wordpress.com/2007/05/04/wix-condition-statement/) ”，它显示了一个工作组件，但没有解释为什么`<CreateFolder/>`是必要的。

删除`<CreateFolder/>`给了我这个错误：

> ICE18：组件的 KeyPath：“C.Rbnz.Fsis.CollectionPeriodService.exe.config.runtime”是目录：“INSTALLDIR”。目录/组件对必须列在 CreateFolders 表中。

我敢肯定，一旦您知道它的含义，就会提供很多信息。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-03T02:14:11.473

每个组件都有一个关键路径；最常见的是文件。您的组件没有文件或其他关键路径，因此 WiX 为其提供了默认目录。然后 Windows 安装程序出现并说具有目录键路径的组件必须确保创建目录，即使其他东西会这样做。这是一个很容易解决的愚蠢规则。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-06-12T08:15:47.647

您可以在组件标签中使用参数 KeyPath="yes"。仅当“INSTALLDIR”是该组件的正确路径时。

# symfony - 获取与 Doctrine 的 OneToMany 关系的最后一个元素

> ID：12241057
> 
> 赞同：7
> 
> 时间：2012-09-03T01:28:40.503
> 
> 标签：symfony, one-to-many

我有一个“学生”模型，它与 Symfony2 中使用 Doctrine 的许多“转移”元素相关。

如何以有效的方式访问与当前“学生”相关的最后一个“转移”元素？

也就是说，例如在“Student”类中创建一个类似“getLastTransfer()”的方法。

我听说不建议在模态中使用实体管理器，以便能够在其上使用依赖注入等......

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-03T01:36:08.770

假设您的`Transfer`实体有一个`date`字段，`Student`类将如下所示：

```
class Student
{
    // ...

    /**
     * @OneToMany(targetEntity="Transfer" mappedBy="student")
     * @OrderBy({"date" = "ASC"})
     */
    private $transfers;

    // ...

} 
```

传输存储在 a 中[`ArrayCollection`](http://www.doctrine-project.org/api/common/2.2/class-Doctrine.Common.Collections.ArrayCollection.html)，因此只需调用：

```
$student -> getTransfers() -> last(); 
```

# mysql - MySQL 多个子查询与整个查询

> ID：12241060
> 
> 赞同：2
> 
> 时间：2012-09-03T01:29:11.730
> 
> 标签：mysql, sql

我想知道从 MySQL 数据库获取数据的哪种方式具有更好的性能特征。

在一个主查询中使用子查询：

```
SELECT
(SELECT SUM(`number`) FROM `table`) as `number_sum`,
(SELECT MAX(`number`) FROM `table`) as `number_max`,
(SELECT MIN(`number`) FROM `table`) as `number_min` 
```

或者，3 个不同的`SELECT`语句检索相同的数据。

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T01:31:15.710

由于这三个聚合来自具有相同`WHERE`条件的同一张表，因此您不需要子选择。所有三个聚合都在同一个行分组上操作（没有`GROUP BY`指定，所以整个表的一行），因此它们都可以`SELECT`直接存在于列表中。

```
SELECT
  SUM(number) AS number_sum,
  MAX(number) AS number_max,
  MIN(number) AS number_min
FROM `table` 
```

如果任何聚合需要基于您将在`WHERE`子句中过滤的不同条件，那么您将需要对不同条件使用子选择，或者进行笛卡尔连接。`LEFT JOIN`对于仅返回一行的聚合，此子选择和以下方法在性能方面应该是等效的：

```
SELECT
  /* Unique filtering condition - must be done in a subselect */
  (SELECT SUM(number) FROM `table` WHERE `somecolumn` = `somevalue`) AS number_sum,
  MAX(number) AS number_max,
  MIN(number) AS number_min
FROM `table` 
```

或者等效于上面的查询，您可以`LEFT JOIN`针对*没有`ON`子句*的子查询。这只应在您知道子查询将仅返回一行的情况下进行。否则，您将得到一个笛卡尔积——连接一侧返回的行数*乘以*另一侧返回的行数。

如果您需要返回具有一组`WHERE`子句条件的几列和具有一组不同条件的几列*，*`WHERE`但仅从. 在这种情况下，它应该比使用相同子句执行*两个子选择更快。**`JOIN``JOIN`*`WHERE`**

 ****这应该更快....**

```
SELECT
  /* this one has two aggregates sharing a WHERE condition */
  subq.number_sum_filtered,
  subq.number_max_filtered,
  /* ...and two aggregates on the main table with no WHERE clause filtering */
  MAX(`table`.number) AS number_max,
  MIN(`table`.number) AS number_min
FROM
  `table`
  LEFT JOIN (
    SELECT 
       SUM(number) AS number_sum_filtered,
       MAX(number) AS number_max_filtered
    FROM `table`
    WHERE `somecolumn = `somevalue`
  ) subq /* No ON clause here since there's no common column to join on... */ 
```

**比这个...**

```
SELECT
  /* Two different subselects each over the same filtered set */
  (SELECT SUM(number) FROM `table` WHERE `somecolumn` = `somevalue`) AS number_sum_filtered,
  (SELECT MAX(number) FROM `table` WHERE `somecolumn` = `somevalue`) AS number_max_filtered,
  MAX(`table`.number) AS number_max,
  MIN(`table`.number) AS number_min
FROM
  `table` 
```**

# c# - 使用 HttpWebRequest 方法检查恢复能力

> ID：12241067
> 
> 赞同：1
> 
> 时间：2012-09-03T01:30:59.357
> 
> 标签：c#, httpwebrequest, download, httpwebresponse

这是我正在使用的代码：

```
private bool CheckPartialDL(String url)
{
    HttpWebRequest hwr = (HttpWebRequest)WebRequest.Create(url);
    hwr.Method = "HEAD";
    hwr.AddRange(0);

    try
    {
        HttpWebResponse hwbresp = (HttpWebResponse)hwr.GetResponse();
        if (hwbresp.StatusCode == HttpStatusCode.PartialContent)
        {
            hwbresp.Close();
            return true;
        }

    }//end of try

    catch (WebException wbe)
    {
        MessageBox.Show(wbe.Message, "Error");
    }//end of catch

    return false;

}//end of Check 
```

但是服务器返回以下错误：

远程服务器返回错误：(416) 请求的范围不可满足。

我将下载以下文件格式：

[http://windowsclient.net/sitefiles/1000/wpf/videos/source-code/creatingavideoapp-part1.zip](http://windowsclient.net/sitefiles/1000/wpf/videos/source-code/creatingavideoapp-part1.zip)

当我使用 IDM 检查恢复功能时，idm 显示它可用。

那么我提出的代码哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-19T15:05:27.587

我知道这个问题已经有几年了，但我只是遇到了完全相同的问题（和类似的代码），问题似乎是你不能同时拥有“Method = 'HEAD'”和 AddRange() 作为删除对 AddRange 的调用工作正常。

编辑 - 这篇[文章](https://stackoverflow.com/questions/18549051/http-head-request-with-range-header)证实了这一点：

> “服务器必须忽略使用 GET 以外的请求方法接收到的 Range 标头字段”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T04:59:59.517

这是一个包含一些信息的链接

[http://www.checkupdown.com/status/E416.html](http://www.checkupdown.com/status/E416.html)

现在我对可恢复下载及其工作原理有了一点了解，所以我看到的是您没有为文件提供要下载的正确字节范围。

假设文件的大小为 1500 字节。您必须将范围设置为从 150 到 324。当然范围不得超过 1500 :)

所以我认为你没有为它提供合适的数据范围来检索。

[更多，检查这个链接问题，它指定了具有多个范围的 HTTP 请求](https://stackoverflow.com/q/2293461/448407)的字节 范围

# javascript - 为什么要在外部访问中声明变量？

> ID：12241072
> 
> 赞同：1
> 
> 时间：2012-09-03T01:31:50.010
> 
> 标签：javascript, with-statement

代码是：

```
with(location)
    {
        var url=href+"aaa";    
    }
alert(url); 
```

变量`url`声明在`with`，但它可以访问外部，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T01:33:52.823

因为`var url;`被提升到功能块的顶部。JavaScript 没有块级作用域，只有闭包级（函数）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T01:35:35.453

看到这个答案：[https ://stackoverflow.com/a/185283/548696](https://stackoverflow.com/a/185283/548696)

问题是在这个块中定义的变量的作用域是这个块（只有你将在后面括起来的对象`with`）。

要实现块级作用域，请执行以下操作：

```
with({"url": href+"aaa"}) {
    // url is available here    
}
alert(url); // but not here 
```

或者更确切地说使用[`let`statement](https://developer.mozilla.org/en-US/docs/JavaScript/New_in_JavaScript/1.7#let_statement)，因为`with`被认为是有害的：

```
let (url = href + "aaa"){
    // url available here
}
// but not here 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T01:37:07.250

在 JavaScript 中，没有块级作用域；仅功能级别的范围。举两个例子：

```
if (true) {
    var a = 5;
}

alert(a); // 5

// ...

function foo() {
    var a = 5;
}

foo();

alert(a); // ReferenceError: a is not defined 
```

# vb.net - 给定日期列表，如何在 VB.NET 中获取过去到今天的最近日期和未来到今天的最近日期

> ID：12241077
> 
> 赞同：1
> 
> 时间：2012-09-03T01:32:15.187
> 
> 标签：vb.net, date, datetime, timespan

我目前正在使用下面的函数将日期列表中最近的日期返回到日期（今天）。我的问题是，该函数返回最接近的日期，无论它是今天日期的过去还是未来。如何更改此代码，以便可以选择返回今天之后的最近日期和今天之前的最近日期？这让我很困惑。

非常感谢您的意见。

```
Function GetNearestDate(ByVal source As IEnumerable(Of DateTime), ByVal target As DateTime) As DateTime
    Dim result As DateTime = Nothing
    Dim lowestDifference = TimeSpan.MaxValue

    For Each _date As DateTime In source

        If _date >= target Then
            Continue For
        End If

        Dim difference = target - _date

        If difference < lowestDifference Then
            lowestDifference = difference
            result = _date
        End If
    Next

    Return result
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T01:59:30.163

好像这就是你要找的东西。您只需要能够将某些内容传递给函数，以便它知道您想要什么。为了明确起见，我选择了一个枚举。我还更新了它以传回一个可为空的日期。这应该可以纠正您的时间问题，但您需要考虑 null 返回值。

```
Public Enum DateCompare
    LessThanEqualTo
    GreaterThanEqualTo
End Enum

Public Function GetNearestDate(ByVal source As IEnumerable(Of DateTime), _
                               ByVal target As DateTime, _
                               ByVal dt As DateCompare) As Nullable(Of DateTime)
    Dim result As Nullable(Of DateTime) = Nothing
    Dim lowestDifference As TimeSpan = TimeSpan.MaxValue
    Dim difference As TimeSpan

    For Each _date As DateTime In source
        If dt = DateCompare.LessThanEqualTo And _date > target Then
            Continue For
        ElseIf dt = DateCompare.GreaterThanEqualTo And _date < target Then
            Continue For
        End If

        If target > _date Then
            difference = target - _date
        Else
            difference = _date - target
        End If

        If difference < lowestDifference Then
            lowestDifference = difference
            result = _date
        End If
    Next

    Return result
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T01:50:07.033

希望您可以将其转换为 VB.Net。思路是对日期进行排序，然后找到给定日期的索引，那么集合中的上一个日期和下一个日期分别是过去和未来最近的日期

查找最近的日期

```
string findNearestAfter(List<DateTime> ld, DateTime t)
{
    ld.Sort();

    int index = 0;
    for (int i = 0; i < ld.Count; i++ )
    {
        if (ld[i] == t)
            index = i;
    }

    string nearest = "";

    if (index < ld.Count)
        nearest = ld[index + 1].ToString();

    return nearest;
} 
```

查找最近的日期

```
string findNearestBefore(List<DateTime> ld, DateTime t)
{
    ld.Sort();

    int index = 0;
    for (int i = 0; i < ld.Count; i++ )
    {
        if (ld[i] == t)
            index = i;
    }

    string nearest = "";

    if (index > 0)
        nearest = ld[index - 1].ToString();

    return nearest;
} 
```

![在此处输入图像描述](../Images/b628c5f9739ee9341ccc855f5b40c9b7.png)

从上图中，选择任何日期，上一个和下一个是最近的日期。请注意，日期已排序。例如，选择 8 月 15 日，那么最近的未来日期是 21，最近的过去日期是 12

# javascript - 子元素 live.('click') 永远不会运行父 div 的 Click 总是运行

> ID：12241079
> 
> 赞同：0
> 
> 时间：2012-09-03T01:32:32.413
> 
> 标签：javascript, jquery, html, javascript-events

在父 div 的`Click`事件中，我返回一个关闭我的覆盖 div 的函数，如下所示

```
$('div#overlayBackground').click(function() {
            return clicker();
        }); 
```

这个 div 的子元素是使用填充的，`.innnerHTML`并且`document.ready()`我给子元素单击功能，如下所示：

```
$('#CaptionTextArea').live('click', function(e) {
             e.stopPropagation();
        }); 
```

这样点击`TextArea`不会关闭覆盖。但是子元素`click`永远不会运行，而父 div`click`总是运行，感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T01:43:27.203

`.live()`在 jQuery 库中已弃用，因此您不应该使用它。原因之一是事件必须一直传播到要处理的根级别，所以`stopPropagation`在那里没有用。*更好*的解决方案是在同一个父点击处理程序中处理这种情况：

```
$('div#overlayBackground').click( function(e) {
    if( e.target.id != 'CaptionTextArea' )
        return clicker();
}); 
```

由于`#CaptionTextArea`(a `<textarea>`) 不会有任何子项用于传播单击事件，因此效果很好；不过，一般来说，您还希望处理来自其后代的事件：

```
// ignore clicks which originated within #CaptionTextArea
if( $(e.target).closest('#CaptionTextArea').length === 0 ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T01:37:04.143

该`.live()`方法在*文档*级别绑定事件处理程序。当事件冒泡到文档时，jQuery 然后检查它是否发生在您指定的元素上。因此，如果您有其他事件处理程序绑定到更靠近发生事件的元素并且这些处理程序停止事件传播，`.live`则永远不会调用基于 - 的处理程序。如果您的`clicker()`函数返回`false`，那将停止传播。

你可以试试这个：

```
$('div#overlayBackground').on("click", "#CaptionTextArea", function(e) {
    e.stopImmediatePropagation();
}).on("click", function(e) {
    return clicker();
}); 
```

也就是说，使用该`.on()`方法替换您的`.live()`，以便事件处理程序实际上与您的其他单击事件绑定到相同的父元素。jQuery 按照它们绑定的顺序调用事件处理程序，因此`.live()`将首先调用此替换，您可以使用它[`event.stopImmediatePropagation()`](http://api.jquery.com/event.stopimmediatepropagation/)来阻止第二个运行。

# java - 这是一个合适的数据结构吗

> ID：12241081
> 
> 赞同：0
> 
> 时间：2012-09-03T01:33:07.440
> 
> 标签：java, list, data-structures, map

> **可能重复：**
> [HashMap 是否是正确的数据结构](https://stackoverflow.com/questions/12239487/is-a-hashmap-a-proper-data-structure)

我必须做两件事，如果不迭代整个集合，我不知道该怎么做，这似乎不对。

1.  我必须找出在特定 HashMap 键（HashMap 中的第一个字符串）的 ArrayList 中是否有颜色为“red”的对象。如果是的话得到他们。
2.  整个 HashMap 也是一样的（没有 HashMap 键的信息。）

这是一个简短的伪代码：

```
HashMap<String, ArrayList<Car>>

public class Car{
    private uniqueId;
    private color;
    private size
} 
```

现在我想知道我是否为这个任务选择了合适的数据结构。你怎么看？你有什么建议？

# c# - 如何将数据插入 SQL Server

> ID：12241084
> 
> 赞同：25
> 
> 时间：2012-09-03T01:34:24.080
> 
> 标签：c#, sql, sql-server

我的编码有什么问题？我无法将数据插入到 ms sql 中。我使用 C# 作为前端，使用 MS SQL 作为数据库...

```
name = tbName.Text;
userId = tbStaffId.Text;
idDepart = int.Parse(cbDepart.SelectedValue.ToString());

string saveStaff = "INSERT into tbl_staff (staffName,userID,idDepartment) " +
                   " VALUES ('" + name + "', '" + userId +"', '" + idDepart + "');";

SqlCommand querySaveStaff = new SqlCommand(saveStaff);

try
{
querySaveStaff.ExecuteNonQuery();
}
catch
{
//Error when save data

MessageBox.Show("Error to save on database");
openCon.Close();
Cursor = Cursors.Arrow;
} 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-03T01:42:06.710

您必须设置 Command 对象的 Connection 属性并使用参数化查询而不是硬编码 SQL 以避免[SQL Injection](http://msdn.microsoft.com/en-us/library/ms161953%28v=sql.105%29.aspx)。

```
 using(SqlConnection openCon=new SqlConnection("your_connection_String"))
    {
      string saveStaff = "INSERT into tbl_staff (staffName,userID,idDepartment) VALUES (@staffName,@userID,@idDepartment)";

      using(SqlCommand querySaveStaff = new SqlCommand(saveStaff))
       {
         querySaveStaff.Connection=openCon;
         querySaveStaff.Parameters.Add("@staffName",SqlDbType.VarChar,30).Value=name;
         .....
         openCon.Open();

         querySaveStaff.ExecuteNonQuery();
       }
     } 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-09-03T01:43:06.943

我认为你缺乏将`Connection`对象传递给你的`command`对象。`command`如果你会使用它会更好`parameters`。

```
using (SqlConnection connection = new SqlConnection("ConnectionStringHere"))
{
    using (SqlCommand command = new SqlCommand())
    {
        command.Connection = connection;            // <== lacking
        command.CommandType = CommandType.Text;
        command.CommandText = "INSERT into tbl_staff (staffName, userID, idDepartment) VALUES (@staffName, @userID, @idDepart)";
        command.Parameters.AddWithValue("@staffName", name);
        command.Parameters.AddWithValue("@userID", userId);
        command.Parameters.AddWithValue("@idDepart", idDepart);

        try
        {
            connection.Open();
            int recordsAffected = command.ExecuteNonQuery();
        }
        catch(SqlException)
        {
            // error here
        }
        finally
        {
            connection.Close();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-12-24T19:18:30.140

```
string saveStaff = "INSERT into student (stud_id,stud_name) " + " VALUES ('" + SI+ "', '" + SN + "');";
cmd = new SqlCommand(saveStaff,con);
cmd.ExecuteNonQuery(); 
```

# c# - 获取像 TEXCOORD0 这样的颜色坐标以进行模糊处理

> ID：12241089
> 
> 赞同：2
> 
> 时间：2012-09-03T01:36:19.217
> 
> 标签：c#, xna, hlsl

我正在尝试掌握 HLSL ...我了解如何指定特定像素以从中获取纹理颜色，但这会忽略色调，使用`COLOR0`作为函数的输入我可以获得像素的色调但是..据我所知，我无法访问我认为会被调用的某种属性，`COLORCOORD0`以便我可以获取周围像素的颜色。

您将如何从函数当前处理的像素以外的像素中获取颜色？

另外，x 和 y 坐标使用什么单位？如果我没记错的话，我记得很久以前读过那`{0f, 0f}`将是窗口的中心，`{-1f, -1f}`将是左上角，`{1f, 1f}`将是右下角；它是否正确？这是否意味着您的着色器会因人而异，具体取决于他们使用的游戏窗口的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T05:41:18.503

[XNA Bloom Sample](http://xbox.create.msdn.com/en-US/education/catalog/sample/bloom)是您寻找如何进行模糊的好例子的地方。

基本上，您将场景渲染到渲染目标。通过一个方向（水平或垂直）的多次点击模糊着色器将其反弹到另一个目标，然后通过另一个方向的模糊着色器将其绘制到屏幕上。

您还可以将采样降低到一半大小，然后进行上采样，使用双线性过滤来获得额外的模糊，而无需更多的纹理采样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:21:44.130

您需要首先将（未模糊的）场景渲染为纹理，然后，要绘制模糊场景，从该纹理中的周围点查找值以便能够执行此操作。

（按照建议移至答案）。

# android - 当我尝试更改 ImageView 图像时，Android 崩溃

> ID：12241099
> 
> 赞同：0
> 
> 时间：2012-09-03T01:37:56.823
> 
> 标签：android

我有一个 ImageView，我希望每次按下图片时都能在两张图片之间切换。我注释掉了所有的代码，只留下了改变图像视图显示的图像的代码。当我调用 setImageDrawable 时它崩溃了。

编码：

```
ImageView but;
but =(ImageView) findViewById(R.id.butFavrets);  

// it crashes hear
but.setImageDrawable(  Drawable.createFromPath("@drawable/unselected") ); 
```

XML 文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/backFeetGallery"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <ImageView
        android:id="@+id/viewimage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"        
        android:layout_centerVertical="true"
        android:layout_centerHorizontal="true"               
        android:src="@drawable/background" />         

     <Button
        android:id="@+id/butEmail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_toRightOf="@+id/butLeft"
        android:text="Email" />

    <Button
        android:id="@+id/butLeft"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"    
        android:text="Left" />

    <Button
        android:id="@+id/butRight"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:text=" Right " />

      <ImageView
        android:src="@drawable/unselected" 
        android:id="@+id/butFavrest"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_toLeftOf="@+id/butRight" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T01:42:21.670

由于您将图像放在可绘制文件夹中，因此使用它`getResources().getDrawable(R.drawable.unselected);`来加载图像，而不是`createFromPath`.

`createFromPath`用于从文件路径名（来自 sdcard 或手机的文件）*创建可绘制对象*

# dart - 找不到引用的源：package:unittest/unittest.dart

> ID：12241100
> 
> 赞同：2
> 
> 时间：2012-09-03T01:38:25.073
> 
> 标签：dart, dartium

我无法使用 pub 包语法导入文件，如下所示：

```
#import("package:unittest/unittest.dart"); 
```

我收到以下编译时错误：

找不到引用的源：package:unittest/unittest.dart

重现步骤： 1) 为 windows [https://gsdview.appspot.com/dart-editor-archive-integration/latest/darteditor-win32-64.zip](https://gsdview.appspot.com/dart-editor-archive-integration/latest/darteditor-win32-64.zip)安装了以下 Dart 编辑器。2) 获取一些使用 pub 的项目。3) pub install //works 4) 在 dart 编辑器中打开项目

我看到很多人都在使用它，所以我打赌我做错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T11:27:11.387

我可能应该将其发布为答案。

您是否设置了声明您打算使用 unittest 包的 pubspec.yaml 文件？另一部分是您（此时）需要为编辑器设置包源目录。它在工具-> 首选项中。将其指向项目中的 package/ 文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T02:32:14.573

谢谢埃文斯先生！

“另一部分是您（此时）需要为编辑器设置包源目录。它位于工具 -> 首选项中。将其指向项目中的包/文件夹。”

# .htaccess - Sitename/node?destination=node 在迁移后给出未找到错误

> ID：12241101
> 
> 赞同：0
> 
> 时间：2012-09-03T01:38:29.300
> 
> 标签：.htaccess, drupal

我们最近将一个 Drupal 7 实例从一个 Web 主机迁移到另一个。我们传输了所有文件以及数据库。该网站大部分时间都在工作，但是每当我们尝试登录时，我们都会收到 404 Not Found 错误。

这可能是什么原因造成的？这是一个 .htaccess 错误吗？我们还没有将域名指向新服务器（我们通过 IP 访问它）——这可能与它有关吗？

.htaccess 文件，完整：

```
#
# Apache/PHP/Drupal settings:
#

# Protect files and directories from prying eyes.
<FilesMatch "\.(engine|inc|info|install|make|module|profile|test|po|sh|.*sql|theme|tpl(\.php)?|xtmpl)$|^(\..*|Entries.*|Repository|Root|Tag|Template)$">
  Order allow,deny
</FilesMatch>

# Don't show directory listings for URLs which map to a directory.
Options -Indexes

# Follow symbolic links in this directory.
# For security reasons, Option followsymlinks cannot be overridden.
#Options +FollowSymLinks
#Options +SymLinksIfOwnerMatch

# Make Drupal handle any 404 errors.
ErrorDocument 404 /index.php

# Set the default handler.
DirectoryIndex index.php index.html index.htm

# Override PHP settings that cannot be changed at runtime. See
# sites/default/default.settings.php and drupal_environment_initialize() in
# includes/bootstrap.inc for settings that can be changed at runtime.

# PHP 5, Apache 1 and 2.
<IfModule mod_php5.c>
  php_flag magic_quotes_gpc                 off
  php_flag magic_quotes_sybase              off
  php_flag register_globals                 off
  php_flag session.auto_start               off
  php_value mbstring.http_input             pass
  php_value mbstring.http_output            pass
  php_flag mbstring.encoding_translation    off
</IfModule>

# Requires mod_expires to be enabled.
<IfModule mod_expires.c>
  # Enable expirations.
  ExpiresActive On

  # Cache all files for 2 weeks after access (A).
  ExpiresDefault A1209600

  <FilesMatch \.php$>
    # Do not allow PHP scripts to be cached unless they explicitly send cache
    # headers themselves. Otherwise all scripts would have to overwrite the
    # headers set by mod_expires if they want another caching behavior. This may
    # fail if an error occurs early in the bootstrap process, and it may cause
    # problems if a non-Drupal PHP file is installed in a subdirectory.
    ExpiresActive Off
  </FilesMatch>
</IfModule>

# Various rewrite rules.
<IfModule mod_rewrite.c>
  RewriteEngine on

  # Block access to "hidden" directories whose names begin with a period. This
  # includes directories used by version control systems such as Subversion or
  # Git to store control files. Files whose names begin with a period, as well
  # as the control files used by CVS, are protected by the FilesMatch directive
  # above.
  #
  # NOTE: This only works when mod_rewrite is loaded. Without mod_rewrite, it is
  # not possible to block access to entire directories from .htaccess, because
  # <DirectoryMatch> is not allowed here.
  #
  # If you do not have mod_rewrite installed, you should remove these
  # directories from your webroot or otherwise protect them from being
  # downloaded.
  RewriteRule "(^|/)\." - [F]

  # If your site can be accessed both with and without the 'www.' prefix, you
  # can use one of the following settings to redirect users to your preferred
  # URL, either WITH or WITHOUT the 'www.' prefix. Choose ONLY one option:
  #
  # To redirect all users to access the site WITH the 'www.' prefix,
  # (http://example.com/... will be redirected to http://www.example.com/...)
  # uncomment the following:
  # RewriteCond %{HTTP_HOST} !^www\. [NC]
  # RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
  #
  # To redirect all users to access the site WITHOUT the 'www.' prefix,
  # (http://www.example.com/... will be redirected to http://example.com/...)
  # uncomment the following:
  # RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
  # RewriteRule ^ http://%1%{REQUEST_URI} [L,R=301]

  # Modify the RewriteBase if you are using Drupal in a subdirectory or in a
  # VirtualDocumentRoot and the rewrite rules are not working properly.
  # For example if your site is at http://example.com/drupal uncomment and
  # modify the following line:
  # RewriteBase /drupal
  #
  # If your site is running in a VirtualDocumentRoot at http://example.com/,
  # uncomment the following line:
  # RewriteBase /

  # Pass all requests not referring directly to files in the filesystem to
  # index.php. Clean URLs are handled in drupal_environment_initialize().
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !=/favicon.ico
  RewriteRule ^ index.php [L]

  # Rules to correctly serve gzip compressed CSS and JS files.
  # Requires both mod_rewrite and mod_headers to be enabled.
  <IfModule mod_headers.c>
    # Serve gzip compressed CSS files if they exist and the client accepts gzip.
    RewriteCond %{HTTP:Accept-encoding} gzip
    RewriteCond %{REQUEST_FILENAME}\.gz -s
    RewriteRule ^(.*)\.css $1\.css\.gz [QSA]

    # Serve gzip compressed JS files if they exist and the client accepts gzip.
    RewriteCond %{HTTP:Accept-encoding} gzip
    RewriteCond %{REQUEST_FILENAME}\.gz -s
    RewriteRule ^(.*)\.js $1\.js\.gz [QSA]

    # Serve correct content types, and prevent mod_deflate double gzip.
    RewriteRule \.css\.gz$ - [T=text/css,E=no-gzip:1]
    RewriteRule \.js\.gz$ - [T=text/javascript,E=no-gzip:1]

    <FilesMatch "(\.js\.gz|\.css\.gz)$">
      # Serve correct encoding type.
      Header set Content-Encoding gzip
      # Force proxies to cache gzipped & non-gzipped css/js files separately.
      Header append Vary Accept-Encoding
    </FilesMatch>
  </IfModule>
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:59:53.233

您可以检查干净的 url 设置。只需尝试放在`?q`每个网址之前。

如果问题仍然存在，那么你有一个严重的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-11T23:27:11.747

尝试检查 httpd.conf 中的 mod_rewrite 设置。我在 Mac 上遇到了这个问题，这就是修复：[Install and configure mod_rewrite for Apache 2 on Mac OS X for Zend Framework 2](https://stackoverflow.com/questions/12592215/install-and-configure-mod-rewrite-for-apache-2-on-mac-os-x-for-zend-framework-2)

# android - Android 视频 - Flash 已死，HTML5 是播放视频的唯一选择吗？

> ID：12241102
> 
> 赞同：1
> 
> 时间：2012-09-03T01:38:44.910
> 
> 标签：android, flash, html, video-streaming, html5-video

我正在为 android 开发一个应用程序，它可以播放来自网络的 mp4 视频文件。我的问题是我最初依靠 adobe flash player 播放视频，但几周前 adobe 停止为 android 移动设备开发 flash，我现在唯一的选择是 html5，对吗？
在移动设备上通过 html5 播放 mp4 视频的最佳方法是什么？
我应该像使用 flash 一样在“WebView”中使用 html5 代码，还是有其他选择？

我有点迷路了，任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T01:47:37.593

如果您有一个原生 Android 应用程序，那么您根本不需要依赖 Flash 或 a`WebView`在 Android 中播放 mp4 视频。您应该使用[MediaPlayer](http://developer.android.com/reference/android/media/MediaPlayer.html)类，如[Android SDK 文档](http://developer.android.com/guide/topics/media/mediaplayer.html)中所述。

只要您的内容符合[支持的协议和格式/编解码器](http://developer.android.com/guide/appendix/media-formats.html)列表，您就可以使用它来播放视频。假设它们使用 H.264 视频编解码器和非疯狂的音频格式，几乎可以肯定通过 HTTP 传递的 mp4 文件。

# javascript - Function.prototype.bind polyfill 和参数化对象创建

> ID：12241103
> 
> 赞同：2
> 
> 时间：2012-09-03T01:39:08.527
> 
> 标签：javascript, internet-explorer, polyfills

感谢`Function.prototype.bind`有一个很好的方法来创建带有参数参数的对象：

```
var d = new (Function.prototype.bind.apply(Date, [null, 2012, 8, 3]));
console.log(d); // => Mon Sep 03 2012 00:00:00 + timezone 
```

不幸的是，IE8 和更早版本不支持绑定，但许多常见的 polyfill 都涵盖了这一点。[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind#Compatibility)上的那个可能是最常见的：

```
Function.prototype.bind = function (oThis) {
    if (typeof this !== "function") {
        // closest thing possible to the ECMAScript 5 internal IsCallable function
        throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");
    }

    var aArgs = Array.prototype.slice.call(arguments, 1), 
        fToBind = this, 
        fNOP = function () {},
        fBound = function () {
            return fToBind.apply(this instanceof fNOP && oThis ? this : oThis,
                           aArgs.concat(Array.prototype.slice.call(arguments)));
        };

    fNOP.prototype = this.prototype;
    fBound.prototype = new fNOP();

    return fBound;
}; 
```

但这会在 IE 上导致奇怪的结果：

```
console.log(d); // throws "Date.prototype.toString: 'this' is not a Date object" 
```

自定义类也有类似的东西，而不仅仅是本机对象。

我有点迷失了。是否可以仅更改 的定义来解决此问题`Function.prototype.bind`？恐怕不是。

# c# - Visual Studio 的 Web 性能测试可以用作 Web 场的压力测试吗？

> ID：12241106
> 
> 赞同：2
> 
> 时间：2012-09-03T01:40:05.613
> 
> 标签：c#, visual-studio-2010, performance-testing

Visual Studio Ultimate 具有“Web 性能测试”功能，允许您指定运行测试的次数。但看起来它一个接一个地运行这些测试。例如，如果您指定 100，它将连续运行 100 次测试。

![在此处输入图像描述](../Images/ac2c3083492eddcfffb2a7a5073dc084.png)

是否可以同时运行 100 个测试以对 Web 应用程序进行压力测试？如果没有，Visual Studio 提供什么可用于压力测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T02:32:53.757

使用 VS Ultimate 时，您可以在 Web 应用程序上执行许多测试。从[这里开始：](http://msdn.microsoft.com/en-us/library/dd293540.aspxcapacities.)

> 当您将 Web 性能测试添加到负载测试时，您模拟了多个用户同时打开到服务器的连接并发出多个 HTTP 请求。您可以设置广泛应用于各个 Web 性能测试的负载测试的属性。
> 
> **烟雾**：您的应用程序如何在短时间轻负载下执行。
> 
> **压力**：确定您的应用程序是否会在重负载下持续成功运行。
> 
> **性能**：您的应用程序的响应速度。
> 
> **容量规划**：您的应用程序如何在各种容量下执行。

在这种情况下，您需要使用**New Load Test Wizard**创建压力测试。

希望能帮助到你！

# vb.net - VB.Net 中的 VC++ DLL 疑难解答

> ID：12241107
> 
> 赞同：2
> 
> 时间：2012-09-02T20:50:05.670
> 
> 标签：vb.net, visual-studio, visual-c++, c++-cli

我正在尝试在 Visual Studio 中制作一个由 VC++ DLL (C++/CLI) 和 VB.Net 应用程序组成的解决方案。为了解决这个问题，我创建了一个 VC++ 类库项目，代码如下（我删除了向导创建的所有垃圾）：

数学函数.cpp：

```
#include "MathFuncs.h"
namespace MathFuncs
{
    double MyMathFuncs::Add(double a, double b)
    {
        return a + b;
    }
} 
```

数学函数.h：

```
using namespace System;
namespace MathFuncs
{
    public ref class MyMathFuncs
    {
    public:
        static double Add(double a, double b);
    };
} 
```

这编译得非常愉快。然后我可以在解决方案中添加一个 VC++ 控制台项目，为这个新项目添加对原始项目的引用，并按如下方式调用它：

测试.cpp：

```
using namespace System;
int main(array<System::String ^> ^args)
{
    double a = 7.4;
    int b = 99;
    Console::WriteLine("a + b = {0}",
        MathFuncs::MyMathFuncs::Add(a, b));
    return 0;
} 
```

这工作得很好，并将构建到 test.exe 和 mathsfuncs.dll。

但是，我想使用 VB.Net 项目来调用 DLL。为此，我将一个 VB.Net 项目添加到解决方案中，使其成为启动项目，并添加对原始项目的引用。然后，我尝试按如下方式使用它：

```
MsgBox(MathFuncs.MyMathFuncs.Add(1, 2)) 
```

但是，当我运行此代码时，它给了我一个错误：

> 无法加载文件或程序集“MathFuncsAssembly，Version=0.0.0.0，Culture=neutral，PublicKeyToken=null”或其依赖项之一。试图加载格式不正确的程序。

我是否需要以某种方式公开该方法？

我正在使用 Visual Studio 2008 Professional。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T14:15:20.507

有时当项目平台设置不正确时，我会明白这一点。转到您的项目设置 > 编译 > 高级编译选项并选择目标 CPU x86。

# visual-studio-2010 - 构建和部署有什么区别？

> ID：12241109
> 
> 赞同：16
> 
> 时间：2012-09-03T01:40:51.067
> 
> 标签：visual-studio-2010, visual-studio

解决方案资源管理器 -> 解决方案'名称' -> 属性 -> 配置属性 -> 配置管理器...

![在此处输入图像描述](../Images/9dc6a2b7775b984358529b53e3a60e44.png)

我认为它与 Web/服务器应用程序有关，但它也与纯桌面项目的解决方案同时出现。所以现在我完全糊涂了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-03T01:45:30.057

**Build**表示*编译*项目。

**部署**意味着：

1.  编译项目
2.  *发布*输出，意味着将其复制到目标目录，将其上传到 FTP 服务器或 IIS 实例等（取决于配置）。

您可以通过右键单击 Visual Studio 中的项目然后“发布”来测试“部署”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T02:00:28.993

在大多数情况下，构建意味着编译所有源代码以生成目标文件或可执行文件或库。

部署可以做的不止这些。部署通常先编译，然后将文件上传到程序实际运行的地方，并将程序配置为定义的状态以进行板载运行/测试。

如果您只使用纯桌面程序。很可能你的编译环境和运行环境是同一个环境，因此除了构建之外不需要做更多的工作。

# php - Can i program in both symfony1 and symfony2 in one application

> ID：12241112
> 
> 赞同：1
> 
> 时间：2012-09-03T01:41:47.803
> 
> 标签：php, symfony

I don't know anything about symfony1 but I have just developed a massive web application in symfony2\. So I like symfony2 very much. There are many projects in company which are in symfony 1.4.

Now I don't want to go back to learn symfony1.4\. But I have to if I have no other option. I want to know that if I need to add extra features on existing wesite in symfony1.4.

Can I use symfony2 to make those extra features and leave old components in symfony1\. Can I work together in symfony1 and symfony1.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T03:12:52.027

No. The two frameworks are utterly different and incompatible. s2 was re-conceived and rebuilt from the ground up. The best you're going to be able to do is communicate between projects via a web services API or something comparable.

s1.4 is very mature and very well-documented (officially and unofficially), so unless your functionality is very customized, you probably will not have much trouble jumping on board s1.4.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T02:13:13.817

**I would say that you can use the SF2 components within SF1.**

But trying to mix both when developing the remaining modules of your app is definitely not what you should even try do do (besides just using some components).

If you're using **Doctrine**, the way you develop your **domain model** will remain the same. So, it's easy to create the controllers/actions and templates in SF1 and use the same domain model of a SF2 application.

So, code it with SF1 and be happy, it will not take too much if you already know the SF philosophy.

# javascript - 在 HTML5 画布中创建关键事件的最佳方式是什么？

> ID：12241113
> 
> 赞同：28
> 
> 时间：2012-09-03T01:41:59.883
> 
> 标签：javascript, html, canvas, keyboard

请建议为 HTML5 画布创建关键事件的最佳方法。我不喜欢任何图书馆，但如果你认为这是最好的方法，那就去回答吧。提前致谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-03T01:59:37.410

这将返回关键代码：

```
<canvas id="myCanvas" width="200" height="100" style="background:green"></canvas>
<script type="text/javascript">
window.addEventListener('keydown',this.check,false);

function check(e) {
    alert(e.keyCode);
}
</script> 
```

如果您想演示基于密钥所做的不同事情：

```
function check(e) {
    var code = e.keyCode;
    //Up arrow pressed
    if (code == 38)
        alert("You pressed the Up arrow key");
    else
        alert("You pressed some other key I don't really care about.");
} 
```

或者，如果您有一长串要使用的键，请在开关盒中进行：

```
function check(e) {
    var code = e.keyCode;
    switch (code) {
        case 37: alert("Left"); break; //Left key
        case 38: alert("Up"); break; //Up key
        case 39: alert("Right"); break; //Right key
        case 40: alert("Down"); break; //Down key
        default: alert(code); //Everything else
    }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-05-25T07:20:51.283

如果要在`<canvas>`自身（而不是`window`or ）上设置关键事件处理，请在元素`document`上设置 tabindex 。`<canvas>`请注意，画布需要聚焦才能捕捉关键事件。

```
<script>
    document.getElementById('game').addEventListener('keypress', handleKeyPress);
    function handleKeyPress(e) { ... }
</script>
<canvas id="game" tabindex="1" width="350" height="200">
</canvas> 
```

这是在[Processing.js](http://processingjs.org/learning/basic/keyboardfunctions/)网站上完成的。

如果您不希望在单击画布时出现边框，请将其样式设置为`outline: none`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T01:48:50.620

我正在编写一个 Canvas 游戏，我使用默认值`.addEventListener`并通过`event.keyCode`它附带的 s 进行切换。此外，我不侦听 Canvas 元素本身的关键事件，而只是将侦听器设置为窗口。

```
window.addEventListener('keyup',keyUpListener,false);
window.addEventListener('keydown',keyDownListener,false); 
```

# java - 在 Java(TM) 平台 SE 二进制文件中打开

> ID：12241115
> 
> 赞同：46
> 
> 时间：2012-09-03T01:42:16.787
> 
> 标签：java, file, file-io, filehandle, file-locking

我试图删除一个我有两个的文件，其中一个略有更改，因此我可以删除旧的文件并用我更改的新文件替换它。当我试图删除该文件时，我收到错误消息“正在使用的文件”，其中表示该操作无法完成，因为该文件已在 Java(TM) Platform SE 二进制文件中打开。

我该如何关闭它？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-02-14T11:04:01.247

这对我有用（使用 Windows）。它与 ali haider 评论的程序基本相同，但有更多细节......

使用 Windows 命令提示符：

```
tasklist | findstr java 
```

（“findstr”是 Windows 的命令行实用程序，类似于 Linux 中的“grep”）

搜索任何带有“java”的行并记下 java 进程的 PID。

```
taskkill /F /PID "PID_OF_JAVA_PROCESS" 
```

其中“PID_OF_JAVA_PROCESS”应替换为实际的 PID 编号。

结果：

```
SUCCESS: The process with PID "PID_OF_JAVA_PROCESS" has been terminated. 
```

对正在运行的每个 java 进程重复此操作。现在你应该可以得到你想要的文件了！

如果您需要有关 Linux 的说明（即 ps、kill 等），请告诉我，但可能大多数 Linux 用户都知道这些...

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-08-21T09:03:21.947

只需在 Windows 上打开任务管理器，检查进程，关闭所有 java 进程。现在再次尝试删除文件，应该可以了。这对我有用。

干杯!

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-29T03:42:59.127

在 Eclipse 中关闭项目，它应该可以工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-03T03:39:05.287

如果它不是在系统启动期间运行的东西，请尝试重新启动以清除所有打开的文件。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-05-18T01:55:27.927

在 Windows 8.1 中：

1) 开始菜单...选择“运行”并输入：msconfig 并单击“确定”。

2) “系统配置”打开，单击“启动”选项卡。

3）单击“打开任务管理器”的位置。

4) 选择“进程”选项卡。

5) 浏览列表并找到“Java SE”。右键单击并选择“结束任务”。

6) 关闭“任务管理器”和“系统配置”框。

7) 返回无法删除的文件。右键单击并再次选择“删除”。Presto........文件已删除。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-11-16T05:39:34.503

1.  在 Windows 中打开任务管理器。
2.  转到查看-> 选择列并检查命令行。
3.  现在杀死锁定文件的java进程。（命令行选项显示了 java 进程的执行路径，因此您不需要杀死所有的 java 进程。）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-28T08:27:23.530

-打开任务管理器-进入详细信息选项卡-查找名称=java.exe 和命令行=您的jar 路径-右键单击-结束任务

示例：名称 命令行
javaw.exe "C:\Program Files\Java\jdk-11.0.2\bin\javaw.exe" -jar "C:\TEST\0.0.1-SNAPSHOT.jar"

# html - 在页面上居中（垂直和水平）显示一张（未知尺寸的）图像

> ID：12241122
> 
> 赞同：2
> 
> 时间：2012-09-03T01:44:05.973
> 
> 标签：html, css, layout, vertical-alignment

如何在不提前知道其尺寸的情况下垂直和水平居中单个图像？

此外，如果图像大于视口，则应重新调整大小以适应

有没有办法在不使用 Javascript 的情况下完成所有这些工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-03T01:59:21.993

这是我之前所做的一个页面：）

[http://kt80.net/](http://kt80.net/)

这是整个代码：

```
body{background:#e5e7e6 url(egyptrabbit.jpg) no-repeat fixed 50% 50%} 
```

编辑：啊，刚刚看到调整大小以适合部分。您可以在背景图像上使用 CSS3 属性“包含”以确保它始终在窗口内，但如果窗口更大，这将拉伸它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-03T01:51:15.450

如果包含元素是 of ，您只能垂直对齐`display: table-cell`，所以设置它，然后您可以使用`vertical-align`and `text-align`。这是一个例子：

```
​&lt;div style="width: 500px; height: 300px; border: 1px red solid; display: table-cell; vertical-align: middle; text-align: center">
<img src="https://www.google.com/images/srpr/logo3w.png">
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

小提琴示例：http: [//jsfiddle.net/8Aq5Y/](http://jsfiddle.net/8Aq5Y/)

`display`如果您不更改，或者将`display`设置为类似`block`or ，则它不起作用`inline`。

要确保它适合包含元素，只需使用`max-width`and `max-height`：

```
<div style="width: 100px; height: 100px; border: 1px red solid; display: table-cell; vertical-align: middle; text-align: center">
<img src="https://www.google.com/images/srpr/logo3w.png" style="max-width: 100px; max-height: 100px;">
</div>​ 
```

[http://jsfiddle.net/8Aq5Y/3/](http://jsfiddle.net/8Aq5Y/3/)

# google-app-engine - 迁移到 HRD (Google App Engine) 后出现 Create_login_url 错误

> ID：12241127
> 
> 赞同：0
> 
> 时间：2012-09-03T01:45:30.650
> 
> 标签：google-app-engine

我在尝试访问新迁移的 Google App Engine HRD 应用时收到错误消息。

```
Traceback (most recent call last):
  File "/base/python_runtime/python_lib/versions/1/google/appengine/ext/webapp/_webapp25.py", line 710, in __call__
    handler.get(*groups)
  File "/base/data/home/apps/s~***-hrd/1.361484826407666031/***.py", line 37, in get
    return self.redirect(users.create_login_url('self.request.uri'))
  File "/base/python_runtime/python_lib/versions/1/google/appengine/api/users.py", line 256, in create_login_url
    raise NotAllowedError
NotAllowedError 
```

在复制和部署我的应用程序后，我立即遇到了这个问题。在将我的数据存储（完成没有任何问题）从主从迁移到 HRD 后，我仍然收到它。

有任何想法吗？

更新：我通过将新创建的应用程序 ID 添加到我的谷歌应用程序域控制面板来解决此问题。 [https://developers.google.com/appengine/articles/auth](https://developers.google.com/appengine/articles/auth)

我也从`using users.create_login_url`使用 login: 更改为`app.yaml`.

# symfony - Symfony2 - FOSBundle FosBundle 在哪里存储 SessionID？

> ID：12241128
> 
> 赞同：-1
> 
> 时间：2012-09-03T01:45:31.383
> 
> 标签：symfony, session-timeout, sessionid, fosuserbundle

我想知道如何在 * ***FOS****捆绑包****Symfony2*****中操作sessionID**s** **。* *我需要 Symfony 2 作为中央身份验证系统（有点****AAA****）。* *所以我想检查***来自其他应用程序请求对 **FOS 的Given** ***SessionID*** *s并更新它们的超时。*

 *******FOS 是一个很好的框架吗？
FOS Bundle 在哪里存储它的 SessionID？
我可以操纵它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T01:49:18.167

使用 JFramework 而不是 symfony。*******

# mysql - 无法在 Java EE/JBoss 应用程序中连接到 MySQL

> ID：12241133
> 
> 赞同：0
> 
> 时间：2012-09-03T01:46:32.100
> 
> 标签：mysql, eclipse, jpa, jboss, datasource

在部署我的应用程序时，我收到以下错误（我还包括主观上重要的警告）：

```
03:36:42,113 WARN  [org.jboss.resource.connectionmanager.JBossManagedConnectionPool] Throwable while attempting to get a new connection: null: org.jboss.resource.JBossResourceException: Could not create connection; - nested throwable: (org.jboss.resource.JBossResourceException: Failed to register driver for: com.mysql.jdbc.Driver; - nested throwable: (java.lang.ClassNotFoundException: com.mysql.jdbc.Driver from BaseClassLoader@66a8c396{vfs:///D:/MobilnyPodroznik/workspace/.metadata/.plugins/org.jboss.ide.eclipse.as.core/JBoss_6.x_Runtime_Server1345902635716/deploy/MP01.jar}))
(...)
Caused by: org.jboss.resource.JBossResourceException: Failed to register driver for: com.mysql.jdbc.Driver; - nested throwable: (java.lang.ClassNotFoundException: com.mysql.jdbc.Driver from BaseClassLoader@66a8c396{vfs:///D:/MobilnyPodroznik/workspace/.metadata/.plugins/org.jboss.ide.eclipse.as.core/JBoss_6.x_Runtime_Server1345902635716/deploy/MP01.jar})
(..)
Caused by: java.lang.ClassNotFoundException: com.mysql.jdbc.Driver from BaseClassLoader@66a8c396{vfs:///D:/MobilnyPodroznik/workspace/.metadata/.plugins/org.jboss.ide.eclipse.as.core/JBoss_6.x_Runtime_Server1345902635716/deploy/MP01.jar}

03:36:42,122 WARN  [org.hibernate.cfg.SettingsFactory] Could not obtain connection to query metadata: org.jboss.util.NestedSQLException: Unable to get managed connection for MP01Local; - nested throwable: (javax.resource.ResourceException: Unable to get managed connection for MP01Local)
(...)
Caused by: javax.resource.ResourceException: Unable to get managed connection for MP01Local
(...)
Caused by: org.jboss.resource.JBossResourceException: Could not create connection; - nested throwable: (org.jboss.resource.JBossResourceException: Failed to register driver for: com.mysql.jdbc.Driver; - nested throwable: (java.lang.ClassNotFoundException: com.mysql.jdbc.Driver from BaseClassLoader@66a8c396{vfs:///D:/MobilnyPodroznik/workspace/.metadata/.plugins/org.jboss.ide.eclipse.as.core/JBoss_6.x_Runtime_Server1345902635716/deploy/MP01.jar}))
(...)
Caused by: org.jboss.resource.JBossResourceException: Failed to register driver for: com.mysql.jdbc.Driver; - nested throwable: (java.lang.ClassNotFoundException: com.mysql.jdbc.Driver from BaseClassLoader@66a8c396{vfs:///D:/MobilnyPodroznik/workspace/.metadata/.plugins/org.jboss.ide.eclipse.as.core/JBoss_6.x_Runtime_Server1345902635716/deploy/MP01.jar})
(...)
Caused by: java.lang.ClassNotFoundException: com.mysql.jdbc.Driver from BaseClassLoader@66a8c396{vfs:///D:/MobilnyPodroznik/workspace/.metadata/.plugins/org.jboss.ide.eclipse.as.core/JBoss_6.x_Runtime_Server1345902635716/deploy/MP01.jar}

03:36:42,143 WARN  [org.jboss.resource.connectionmanager.JBossManagedConnectionPool] Throwable while attempting to get a new connection: null: org.jboss.resource.JBossResourceException: Could not create connection; - nested throwable: (org.jboss.resource.JBossResourceException: Failed to register driver for: com.mysql.jdbc.Driver; - nested throwable: (java.lang.ClassNotFoundException: com.mysql.jdbc.Driver from BaseClassLoader@66a8c396{vfs:///D:/MobilnyPodroznik/workspace/.metadata/.plugins/org.jboss.ide.eclipse.as.core/JBoss_6.x_Runtime_Server1345902635716/deploy/MP01.jar}))
(...)
Caused by: org.jboss.resource.JBossResourceException: Failed to register driver for: com.mysql.jdbc.Driver; - nested throwable: (java.lang.ClassNotFoundException: com.mysql.jdbc.Driver from BaseClassLoader@66a8c396{vfs:///D:/MobilnyPodroznik/workspace/.metadata/.plugins/org.jboss.ide.eclipse.as.core/JBoss_6.x_Runtime_Server1345902635716/deploy/MP01.jar})
(...)
Caused by: java.lang.ClassNotFoundException: com.mysql.jdbc.Driver from BaseClassLoader@66a8c396{vfs:///D:/MobilnyPodroznik/workspace/.metadata/.plugins/org.jboss.ide.eclipse.as.core/JBoss_6.x_Runtime_Server1345902635716/deploy/MP01.jar}

03:36:42,147 ERROR [org.hibernate.tool.hbm2ddl.SchemaExport] schema export unsuccessful: org.jboss.util.NestedSQLException: Unable to get managed connection for MP01Local; - nested throwable: (javax.resource.ResourceException: Unable to get managed connection for MP01Local)
(...)
Caused by: javax.resource.ResourceException: Unable to get managed connection for MP01Local
(...)
Caused by: org.jboss.resource.JBossResourceException: Could not create connection; - nested throwable: (org.jboss.resource.JBossResourceException: Failed to register driver for: com.mysql.jdbc.Driver; - nested throwable: (java.lang.ClassNotFoundException: com.mysql.jdbc.Driver from BaseClassLoader@66a8c396{vfs:///D:/MobilnyPodroznik/workspace/.metadata/.plugins/org.jboss.ide.eclipse.as.core/JBoss_6.x_Runtime_Server1345902635716/deploy/MP01.jar}))
(...)
Caused by: org.jboss.resource.JBossResourceException: Failed to register driver for: com.mysql.jdbc.Driver; - nested throwable: (java.lang.ClassNotFoundException: com.mysql.jdbc.Driver from BaseClassLoader@66a8c396{vfs:///D:/MobilnyPodroznik/workspace/.metadata/.plugins/org.jboss.ide.eclipse.as.core/JBoss_6.x_Runtime_Server1345902635716/deploy/MP01.jar})
(...)
Caused by: java.lang.ClassNotFoundException: com.mysql.jdbc.Driver from BaseClassLoader@66a8c396{vfs:///D:/MobilnyPodroznik/workspace/.metadata/.plugins/org.jboss.ide.eclipse.as.core/JBoss_6.x_Runtime_Server1345902635716/deploy/MP01.jar} 
```

至于整个控制台输出： http: [//pastebin.com/de2Br9xL](http://pastebin.com/de2Br9xL)

基本上，似乎我的 JDBC 驱动程序不可见，但我已将 .jar 放在服务器的默认/lib 文件夹和项目的构建路径中，因此我现在一无所知。

**持久性.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
       version="2.0">
  <persistence-unit name="mp" transaction-type="JTA">
    <jta-data-source>java:/MP01Local</jta-data-source>

           <properties>
       <!--s
       <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect"/>
       -->
       <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>
       <property name="hibernate.hbm2ddl.auto" value="create-drop"/>
   </properties>
  </persistence-unit>
</persistence> 
```

**mysqllocal-ds.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE datasources
    PUBLIC "-//JBoss//DTD JBOSS JCA Config 1.5//EN"
    "http://www.jboss.org/j2ee/dtd/jboss-ds_1_5.dtd">
<datasources>

   <local-tx-datasource>
      <jndi-name>MP01Local</jndi-name>
      <connection-url>jdbc:mysql://localhost:3306/mp</connection-url>
      <driver-class>com.mysql.jdbc.Driver</driver-class>
      <user-name>login</user-name>
      <password>pass</password>
   </local-tx-datasource>

</datasources> 
```

我已将 DS XML 文件放在 JBoss 服务器的默认/部署路径中，并将 mysql-connector-java-5.0.8-bin 放在默认/lib 中，如 JBoss 手册中所述。

**我正在使用**

*   Eclipse，构建 20120614-1722，
*   JBoss AS 6,
*   mysql-connector-java-5.0.8-bin 驱动程序。
*   对于 MySQL， mysql --version 打印出“mysql Ver 14.14 Distrib 5.5.25a, for Win32 (X86)”。

**我的项目构建路径**

1.  jre6
2.  JBoss 6.x 运行时
3.  MySQL JDBC Driver 5.0.8，包括mysql-connector-java-5.0.8-bin.jar [我在数据源资源管理器中创建的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:37:16.510

好吧，我从一开始就重复了所有步骤，作为一个新鲜的早晨男人，它奏效了。仍然不知道为什么，但这里有一些事情**可能已经解决**了这个问题。希望这对正在努力部署他的第一个 Java EE + JPA 应用程序的人有所帮助。

这是我遵循的步骤：

*   [从http://www.mysql.com/downloads/connector/j/5.0.html#downloads](http://www.mysql.com/downloads/connector/j/5.0.html#downloads)下载 mysql-connector-java-5.0.8-bin.jar
*   把它放在 jboss-6.0.0.Final\server\default\lib
*   使用数据源资源管理器在 Eclipse 中创建了一个新的连接配置文件（我不知道该步骤是否必要）。在向导中，我还使用 5.0.8 连接器创建了一个新的驱动程序定义。ping 成功，我的数据库在数据源资源管理器中可见。
*   使用 File->New->Other...->JBoss Tools Web->JBoss Datasource (-ds.xml)（使用 AS5 格式）从 3) 中提到的 CP 生成 -ds.xml 文件并放在 jboss- 6.0.0.Final\server\default\deploy\Mysql_local-ds.xml 以及项目的 META-INF\Mysql_local-ds.xml **（更正：当我同时将它放在两个地方时，我收到了 ERROR [org.jboss. kernel.plugins.dependency.AbstractKernelController] 安装到 Real 时出错：(...) 原因：java.lang.IllegalStateException: jboss.jca:name=MP01Datasource2,service=ManagedConnectionFactory 已安装。）**
*   我已经添加了 db 的 jar 来构建路径 usign [rmb on project]->Build Path->Configure Build Path...->Add Library->Connectivity Driver Definition 并选择了我在 3 中定义的那个）

我还从我的其他测试项目中删除了一些旧的 .jar 部署，这些部署卡在 workspace.metadata.plugins\org.jboss.ide.eclipse.as.core\JBoss_6.x_Runtime_Server1345902635716\deploy 文件夹中（可能是由于不正确的关闭） ，但我真诚地怀疑这是否有帮助。

我想主要原因可能是因为我正在交换驱动程序和驱动程序定义（我一直在从 5.1.sth 移动到 5.0.8）我也忘记在 pj 的构建路径中交换它们并且不由自主地离开了旧的。

**我当前的 persistence.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
       version="2.0">
  <persistence-unit name="mp" transaction-type="JTA">
    <jta-data-source>java:/MP01Datasource2</jta-data-source>
           <properties>
       <!--s
       <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect"/>
       -->
       <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>
       <property name="hibernate.hbm2ddl.auto" value="create-drop"/>
   </properties>
  </persistence-unit>
</persistence> 
```

**mysql_local-ds.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE datasources
    PUBLIC "-//JBoss//DTD JBOSS JCA Config 1.5//EN"
    "http://www.jboss.org/j2ee/dtd/jboss-ds_1_5.dtd">
<datasources>

   <local-tx-datasource>
      <jndi-name>MP01Datasource2</jndi-name>
      <use-java-context>true</use-java-context>
      <connection-url>jdbc:mysql://localhost:3306/mp</connection-url>
      <driver-class>com.mysql.jdbc.Driver</driver-class>
      <user-name>x</user-name>
      <password>y</password>
   </local-tx-datasource>

</datasources> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:45:16.133

JDBC 驱动程序必须放置在`CLASSPATH`您的应用程序服务器中。

# objective-c - Mac 应用程序不使用视网膜 @2x 图像文件

> ID：12241134
> 
> 赞同：5
> 
> 时间：2012-09-03T01:46:47.623
> 
> 标签：objective-c, cocoa, retina-display, nsimage, nsimageview

我正在尝试更新我的应用程序以支持视网膜显示器，但是当它在 Retina MacBook Pro 上运行时，没有使用图像的 @2x 版本。以下是我在我的应用程序中用于设置图像视图的方法。

在 XML 解析器类中：

```
[[self theCurrent] setCurIcon:[NSImage imageNamed:@"snow.png"]]; 
```

在 Current 类中设置 NSImageView：

```
[viewCurIcon setImage:curIcon]; 
```

每个图像文件都有一个标准分辨率版本和一个高分辨率版本，它们都在 Xcode 项目的支持文件夹中：

```
snow.png is 128x128 pixels
snow@2x.png is 256x256 pixels 
```

我确认在 Xcode 构建应用程序时，应用程序包中包含了 @2x 版本。其他需要注意的事项是：该应用程序是一个菜单栏应用程序，所有视图都位于 NSPopover 中，其中一个图像视图中使用了动画 GIF（没有@2x 版本的 GIF），该应用程序使用 Xcode 4.4 构建运行 OSX 10.7.4 且没有视网膜显示屏的旧款 MacBook Pro。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T15:10:42.873

尝试使用`@"snow"`而不是`@"snow.png"`. 这样，您将指向一个名为“snow”的图像，并让操作系统整理有关分辨率和扩展名的详细信息，而不是明确说明该图像将被命名`"snow.png"`

# c++ - 如何报告分段错误？

> ID：12241135
> 
> 赞同：4
> 
> 时间：2012-09-03T01:47:11.863
> 
> 标签：c++, bash, ubuntu, segmentation-fault

我只是想知道如何报告分段错误。

*   该进程将直接死亡，因此显然它无法报告它。
*   除非进程传递信号，否则 shell 将无法确定，这可能不一定是这种情况。
*   操作系统可能可以做某事，但我不确定如何做。

其中哪一个报告了分段错误（只是一个示例），以及如何报告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T01:50:09.353

> 该进程将直接死亡，因此显然它无法报告它。

这实际上是错误的。可以安装一个处理程序来替换默认的处理程序，它只是转储核心并死掉*。*`SIGSEGV`预加载库可以这样做以捕获分段违规并使用可用的有限设施来通知在系统上运行的另一个进程在退出之前发生了什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T02:41:21.713

You can have some code like [this](http://neugierig.org/software/blog/2012/06/backtraces.html) which will call the GDB command to dump the call trace:

```
void BacktraceOnSegv() {
  struct sigaction action = {};
  action.sa_handler = DumpBacktrace;
  if (sigaction(SIGSEGV, &action, NULL) < 0) {
    perror("sigaction(SEGV)");
  }
}

void DumpBacktrace(int) {
  pid_t dying_pid = getpid();
  pid_t child_pid = fork();
  if (child_pid < 0) {
    perror("fork() while collecting backtrace:");
  } else if (child_pid == 0) {
    char buf[1024];
    sprintf(buf, "gdb -p %d -batch -ex bt 2>/dev/null | "
            "sed '0,/<signal handler/d'", dying_pid);
    const char* argv[] = {"sh", "-c", buf, NULL};
    execve("/bin/sh", (char**)argv, NULL);
    _exit(1);
  } else {
    waitpid(child_pid, NULL, 0);
  }
  _exit(1);
} 
```

[Here](http://pre.racket-lang.org/racket/src/racket/gc2/sighand.c) is an implementation that support more platforms.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T01:53:52.500

如果您查看函数[`wait()`或`waitpid()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/wait.html)，您会发现退出状态中的一位表示核心转储。POSIX 规范提到`WIFSIGNALED`[原文如此] 并 `WTERMSIG`获取终止进程的信号。POSIX 规范没有提到它，但在 Mac OS X (10.7.4) 上，例如，有一个`WCOREDUMP()`宏来测试是否创建了核心文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T02:51:32.270

好的，首先，当 CPU 尝试访问进程无权访问的地址时，会发生分段错误。在最低级别，内存映射的实现必须检测到这一点，这通常会产生中断。内核接收到该中断，并有一个其他代码段的地址表，每个代码段都旨在处理该中断。

当内核接收到该中断时，它将其转换为特定值（我含糊其辞，因为确切的细节因硬件架构和内核实现而异）。 `SIGSEGV`通常定义为值 11，但确切的值并不重要；它定义在`signal.h`.

此时，信号值被传递到内核内部的另一个表，其中包含“信号处理程序”的地址。这些处理程序之一位于由 表示的偏移量处`SIGSEGV`。除非您已对其进行了更改，否则该地址通常是导致核心转储的例程，假设适当的限制允许，但您可以将其替换为您自己的例程的地址，它可以做任何您喜欢的事情。

# c# - 我可以在 C# 中获取我的对象的名称吗？

> ID：12241136
> 
> 赞同：9
> 
> 时间：2012-09-03T01:47:20.867
> 
> 标签：c#

假设我有以下课程..

```
Class Boy
{
    public void hello()
    {
        Console.WriteLine("Hello!");
    }
    static void Main(String[] args)
    {
            Boy a = new Boy();
            a.hello();
    }
} 
```

我知道变量**'a'是****'Boy'**类型的参考变量。关键字**'new'**创建了一个**'Boy'**对象，将其地址分配给变量**'a'**。

现在，我是否有可能获得我的对象的名称。C# 中的对象是否有名称？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-03T04:30:15.953

```
class Boy
{
    public void hello()
    {
        Console.WriteLine("Hello!");
    }
    static void Main(String[] args)
    {
        Boy a = new Boy();
        a.hello();
        Type objtype = a.GetType();
        Console.WriteLine(objtype.Name); // this will display "Boy"
    }
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-03T02:21:14.743

我猜您指的是变量的名称“a”。好吧，问题是：这*不是*对象的名称——对象没有名称。此外，一个对象可以有零个或多个对它的引用，例如：

```
var x = new SomeType(); // a class
var y = x; 
```

这里 x 和 y 都指向同一个对象。相等：

```
new SomeType(); 
```

没有对它的任何引用，但仍然是一个对象。此外，方法变量（本地变量）实际上在 IL 中没有名称 - 只有在 c# 中（相比之下，字段确实有名称）。所以`new SomeType().WriteName();`没有任何意义。

所以不：没有从对象引用中获取变量名称的合理方法。

如果您希望对象具有名称，请添加一个`Name`属性。

有一些有趣的方法可以使用表达式树来获取字段变量的名称，但我认为这对您尝试做的事情没有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T01:54:23.567

我们没有对象的名称。事实上，对象的引用被分配给*引用*变量，以便通过公共方法/属性访问*数据。*如果您希望在`instance`该特定类的方法中引用对象，请使用`this`变量。

```
Class Boy
{   
    int age;
    public void setAge(int age)
    {
        this.age = age; 
    }
} 
```

# javascript - javascript 中的脚本等于 php 中的 $_SERVER['REQUEST_URI'] 是什么？

> ID：12241138
> 
> 赞同：9
> 
> 时间：2012-09-03T01:47:54.697
> 
> 标签：javascript

我想通过附加 iframe 的 javascript 将 URL 传递到另一个域，当退出 iframe 时，另一个域可以将用户返回到我网站上的上一页。如果使用php提交exit_url，则为

```
$exit_url = "http://" . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'] . "&request=example""; 
```

我想学习如何将此字符串转换为在 javascript 中使用。谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-03T01:54:23.707

`$_SERVER['REQUEST_URI']`通过附加`location.pathname`and可以得到等价物`location.search`：

```
var request_uri = location.pathname + location.search; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T01:51:08.930

```
window.location.pathname.substr(1) will do it 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T01:50:04.377

我不太明白你的问题，但`$_SERVER['REQUEST_URI']`基本上是`location.pathname`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-15T17:35:11.793

如果搜索字符串为空，您将需要附加“？” 代替 ”＆”

```
var q = location.search ? "&" : "?";
var request_uri = location.pathname + location.search + q + "other=value"; 
```

# typo3 - Typo3 - 删除外部菜单项中的默认目标

> ID：12241144
> 
> 赞同：0
> 
> 时间：2012-09-03T01:48:53.990
> 
> 标签：typo3, typoscript

我有下面的打字稿

```
lib.nav = HMENU
lib.nav {
  wrap = <ul> | </ul>
  1 = TMENU
  1 {
        expAll=1
        NO {
        |*| <ul><li> | </li></ul> |*| <ul><li> | </li></ul> || <ul><li class="last"> | </li></ul> |*|

            wrapItemAndSub = |*| <li> | </li> |*| <li> | </li> || <li class="last"> | </li> |*|
            stdWrap.cObject = CASE
            stdWrap.cObject {
                key.field = doktype
                default = TEXT
                default.field = title
                default.typolink.parameter.data = field:uid
                default.typolink.ATagBeforeWrap=0
                3 < .default
                3 {
                stdWrap.htmlSpecialChars = 1
                typolink {
                parameter {
                data >
                dataWrap = http://{field:url}
            }
            }
        }
        }
          doNotLinkIt = 1     # to avoid "<a>" repeated twice
          subst_elementUid = 1
        }
      }
        2 = TMENU
      2 {
        expAll=1
        wrap = <ul> | </ul>
        NO {
          wrapItemAndSub =  |*| <li> | </li> |*| <li> | </li> || <li> | </li> |*|
          stdWrap.cObject = CASE
          stdWrap.cObject {
            key.field = doktype
            default = TEXT
            default.field = title
            default.typolink.parameter.data = field:uid
            default.typolink.ATagBeforeWrap=0
        3 < .default
        3 {
        stdWrap.htmlSpecialChars = 1
        typolink {
        parameter {
        data >
        dataWrap = http://{field:url}
        }
        }
        }
          }
          doNotLinkIt = 1     # to avoid "<a>" repeated twice
          subst_elementUid = 1
        }
      }
    } 
```

这似乎运作良好，但是当我在导航中有一个外部 url 页面时，我注意到了一个小故障。它为外部 url 生成以下代码。

```
<ul>
<li><a href="index.php?id=3">External Links</a>
    <ul>
        <li><a target="_top" href="http://example.com/1">Example 1</a></li>
        <li><a target="_top" href="http://example.com/2">Example 2</a></li>
        <li><a target="_top" href="http://example.com/3">Example 3</a></li>
    </ul>
</li>
</ul> 
```

如何删除此默认设置？我希望它可以在行为选项卡中按页面进行配置（LTS 4.5 中的链接目标字段）。

我的常量中也有以下设置。

```
PAGE_TARGET = 
content.pageFrameObj = 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T09:18:42.693

[通过config](http://typo3.org/documentation/document-library/core-documentation/doc_core_tsref/4.7.0/view/1/6/#id1556666)在 setup 中设置 extTarget 。它是默认的“_top”。

```
# just set it to an empty string instead of _top
config.extTarget = 
```

# wpf - WPF 设计时数据混乱

> ID：12241148
> 
> 赞同：1
> 
> 时间：2012-09-03T01:49:18.527
> 
> 标签：wpf, mvvm, blendability

为什么当我为我的 MVVM 视图创建一些设计时数据时，我必须嵌套 xmlns 两次才能访问该属性的属性？

例子：

```
 <d:DesignProperties.DataContext>
            <local:UserListViewModel>
                <local:UserListViewModel.Users xmlns:local="clr-namespace:ChatModule.ViewModels">
                    <local:User Name="Person 1" />
                    <local:User Name="Person 2" />
                    <local:User Name="Person 3" />
                    <local:User Name="Person 4" />
                    <local:User Name="Person 5" />
                    <local:User Name="Person 6" />
                </local:UserListViewModel.Users>
            </local:UserListViewModel>
       </d:DesignProperties.DataContext> 
```

我已经在 UserControl 的 xmlns 中定义了一个本地属性。但是要访问底层类中的 User 结构，我必须在 Users 属性中再次定义它。

这是为什么？

所有这一切都很好......我可以看到我的运行时数据非常棒。我以前从来没有这样做过，所以能够看到它很整洁。我注意到当我编译时我经常得到错误消失......但每当我更改 xaml 时都会再次出现。

```
The property 'Name' was not found in type 'User'.
The property 'Name' was not found in type 'User'.
The property 'Name' was not found in type 'User'.
The property 'Name' was not found in type 'User'.
The property 'Name' was not found in type 'User'.
The property 'Name' was not found in type 'User'. 
```

显然它有效，否则我将无法看到运行时数据。

我还想将此设计时数据提取到另一个 xaml 类中，并在此类中引用它，因此我没有位于视图本身内的实际设计时数据……只是对另一个 xaml 文件的引用。

所以我这样做了......就像这样......

```
<UserListViewModel xmlns="clr-namespace:ChatModule.ViewModels">
    <UserListViewModel.Users xmlns:local="clr-namespace:ChatModule.ViewModels">
        <local:User Name="Person 1" />
        <local:User Name="Person 2" />
        <local:User Name="Person 3" />
        <local:User Name="Person 4" />
        <local:User Name="Person 5" />
        <local:User Name="Person 6" />
    </UserListViewModel.Users>
</UserListViewModel> 
```

但是，当我摆脱代码隐藏时，我得到了上面提到的相同错误（在构建中消失），但还有一个错误说

```
Cannot set properties on propety elements. Line 2 Position 6. 
```

与其他错误不同，这不允许我构建。为什么是这样？我如何解决它？我仍然习惯这种设计时数据的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T02:08:13.143

好的，所以在摆弄它之后，根据我上面的评论，我已经弄清楚了。它显然与视图 xaml 的工作方式不同，因为我不需要指定 xmlns:local 两次来访问属性的属性。我不知道为什么会这样。

这是我的代码现在的样子。

在我的主要 xaml 中，我有这个：

```
<Grid Name="LayoutRoot" d:DataContext="{d:DesignData Source=DesignTimeData/UserListViewData.xaml}">
    <ListView ItemsSource="{Binding Users}" ItemTemplate="{StaticResource UserTemplate}"  VerticalContentAlignment="Center" HorizontalContentAlignment="Stretch" Background="#505050" >
    </ListView>
</Grid> 
```

在单独的 xaml 文件中，我有这个：

```
<local:UserListViewModel xmlns:local="clr-namespace:ChatModule.ViewModels">
    <local:UserListViewModel.Users >
        <local:User Name="Person 1" />
        <local:User Name="Person 2" />
        <local:User Name="Person 3" />
        <local:User Name="Person 4" />
        <local:User Name="Person 5" />
        <local:User Name="Person 6" />
    </local:UserListViewModel.Users>
</local:UserListViewModel> 
```

我仍然在支持的 xaml 文件中得到“找不到属性'名称'...”，但不再出现在视图的主 xaml 文件中。我觉得这很优雅。并且以这种方式......视图仍然完全不知道实际的 ViewModel 类型......而当我像以前一样在视图 xaml 文件中拥有它时，它必须知道该信息，即使它只是在设计时。

顺便说一句，这是在工作......这是在 Visual Studio 的 xaml 编辑器中。

![在此处输入图像描述](../Images/000955f8a7495af40b2e08eb90b24bfa.png)

这是错误问题的一个示例，这使得它成为一个让事情变得正确的苦差事猜谜游戏。除非我重建以清除错误，直到我再次弄乱一些语法，否则没有智能感知和其他东西。它仍然可以作为设计时数据正常工作，所以我不知道发生了什么。

![在此处输入图像描述](../Images/7958bcc8b2c6d18dc5891f2d23c56c03.png)

![http://i.imgur.com/jiVKm.jpg](../Images/c81570185bf31a44af8c56282428eea4.png)

# java - 如何获取内部 IP 地址？

> ID：12241149
> 
> 赞同：1
> 
> 时间：2012-09-03T01:49:28.463
> 
> 标签：java, sockets, ip, internal

首先我的编程语言是Java。我使用套接字创建了一个简单的聊天程序。它工作得很好。

我在两个终端实例之间的计算机（本地主机）上尝试了它。

我想在我的笔记本电脑或另一台电脑上试用它。为此，我需要客户端的内部 IP 地址。

如何使用 Java 找出客户端的内部 IP 地址？

我特别想用 Java 来解决它，而不是使用 CMD 或类似的东西。我的意思是 - 这不仅仅是一个常量字符串。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T02:24:21.150

在 Java 中，有一个类***[InetAddress](http://docs.oracle.com/javase/8/docs/api/index.html?java/net/InetAddress.html)***表示 IP 地址（在某些情况下，还有它对应的主机名）。

例如，让我们获取我的 IP 地址和主机名：

```
import java.net.InetAddress;

public class Main {

    public static void main(String[] args) {
        try {
            InetAddress i = InetAddress.getLocalHost();
            System.out.println(i);                  // host name and IP address
            System.out.println(i.getHostName());    // name
            System.out.println(i.getHostAddress()); // IP address only
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

} 
```

输出（在我的情况下）：

> LLEITE/192.168.1.100
> LLEITE
> 192.168.1.100

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T02:03:28.470

使用以下代码：

```
InetAddress ownIP=InetAddress.getLocalHost();
System.out.println("IP of my system is := "+ownIP.getHostAddress());` 
```

# django - 在 Django 中反转多对多字段 + 计算它们

> ID：12241150
> 
> 赞同：0
> 
> 时间：2012-09-03T01:49:38.950
> 
> 标签：django, list, count, django-templates

我试图弄清楚如何解决这个问题

```
class Item(models.Model):
    type = models.ForeignKey(Type)
    name = models.CharField(max_lenght = 10)
    ...

class List(models.Model):
    items = models.ManyToManyField(Item)
    ... 
```

我想计算一个项目出现在另一个列表中的数量，并显示在模板上。

# 看法

```
def items_by_list(request, id_):
    list = List.objects.get(id = id_)
    qr = list.items.all()

    #NOT TESTED

    num = []
    i = 0
    for item in qr:
        num[i] = List.objects.filter(items__id = item__id ).count()

    #FINISH NOT TESTED

    c = {}
    c.update(csrf(request))
    c = {'request':request, 'list' : qr, 'num' : num}
    return render_to_response('items_by_list.html', c, context_instance=RequestContext(request)) 
```

# 模板

```
 {% for dia in list %}   
            <div class="span4" >
                <div>
                    <h6 style="color: #9937d8">{{item.type.description}}</h6>
                    <small style="color: #b2e300">{{ item.name }}</small>
                    <small style="color: #b2e300">{{COUNT HOW MANY TIMES THE ITEM APPEAR ON OTHER LISTS}}</small>

                </div>  
    {% endfor %} 
```

这似乎很容易，但我还不能实现。

如果有人对我有胶水，请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T03:37:16.757

如果您使用的是 django 1.3+，请使用[聚合](https://docs.djangoproject.com/en/1.4/topics/db/aggregation/)

```
from django.db.models import Count    
queryset = List.objects.annotate(item_count=Count('item')) 
```

此查询集中的每个 List 实例都有一个 item_count 属性，您可以在模板中显示该属性。您将在文档中找到更多示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:39:27.280

我想做的方式，最简单的方法是在类 Items 上创建一个方法。

```
def get_num_item(self):
    return Lista.objects.filter(item__id = self.id).count() 
```

我很惭愧。

谢谢，谢夫！

# jquery - 为什么我的切换代码没有触发？

> ID：12241151
> 
> 赞同：0
> 
> 时间：2012-09-03T01:49:47.017
> 
> 标签：jquery, google-sites

下面有什么明显的我遗漏的东西吗？我在一个谷歌网站上有一个简单的 html 框小工具，用最少的 jquery 来关闭/打开一个 div，但它似乎不起作用。下面的代码在 apache 站点页面上运行良好。有小费吗 ？

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.js"></script>
<script>

    $('#check').click(function(){
        $('#feedback').toggle();
    });

</script>

<button id='check'>Check Answers</button>

<div id='feedback' style='display:none;'>
    <ul>
        <li>list 1</li>
        <li>list 2</li>
    </ul>
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T02:20:45.570

如果您的脚本包含在您的元素之前，那么它会在元素被解析之前运行，这意味着`$("#check")`找不到任何元素来绑定点击处理程序。

您需要将脚本块移动到相关元素*之后*（就在结束`</body>`标记是包含脚本的常见位置之前）或使用文档就绪处理程序，该处理程序将等待运行您的代码，直到*解析*完所有元素：

```
$(document).ready(function() {
    $('#check').click(function(){
        $('#feedback').toggle();
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-31T19:13:10.953

我无法让它与 jquery 一起工作。

Elliot Shafii 在[google+ Google 协作平台社区](https://plus.google.com/u/0/communities/107454103091776894629)中帮助了我，以下代码有效：

```
<button id="infoToggle" value="toggle" onclick="document.getElementById('info').style.display=((document.getElementById('info').style.display=='block') ? 'none' : 'block')">Toggle</button>

<div id="info" style="display:block;">
TEST
</div> 
```

# c++ - 提升“没有这样的文件或目录”

> ID：12241152
> 
> 赞同：21
> 
> 时间：2012-09-03T01:49:48.403
> 
> 标签：c++, boost, codeblocks

我正在尝试在新计算机上设置我的 Code::Blocks 工作环境，但遇到了一些问题。自从我第一次这样做以来已经有很长时间了，现在当我打开我的主要项目时，Boost 给我带来了问题。

我对 C++ 还是很陌生，解决这类问题是我经验有限的事情。

当我打开我的项目并尝试编译它时，我收到此错误：

> 致命错误：boost/algorithm/string.hpp：没有这样的文件或目录|

在我的一个头文件的这一部分：

```
#include <boost/algorithm/string.hpp> 
```

我将 Boost v1.51.0 库放在 C:\boost 中，因为那是我在另一台计算机上的位置。我的项目设置为在该目录中搜索其他包含但似乎没有找到文件？

我的项目以前使用过旧版本的 Boost，但我怀疑这是个问题。

我不确定用这些有限的信息来调试这个问题有多么困难，所以如果还有什么我可以提供的，请告诉我。

我正在使用 Code::Blocks，并且刚刚设置了 minGW 和 Visual C++ 2010。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-09-10T16:28:58.090

在 Ubuntu 中使用

```
sudo apt-get install libboost-dev 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-05T15:02:25.363

确保您已安装 boost-devel 软件包

在 Centos 中以 root 身份执行：

```
yum install boost-devel 
```

然后

```
root@centos6 /]# find / -name boost
/usr/include/boost
/usr/lib64/boost
[root@centos6 /]# 
```

# .net - .NET 中的强类型装箱值

> ID：12241153
> 
> 赞同：3
> 
> 时间：2012-09-03T01:49:50.710
> 
> 标签：.net, clr, boxing

要将您转换为的值类型装箱`System.Object`- 这本身对我来说似乎是“错误的”（因为转换应该将值转换为另一种类型（因此将 Int32 转换为 Object 应该是数据丢失操作，因为 Object 没有实例自己的状态）或将接口指针转换为父对象（这不会影响所指向对象的状态，并且是编译时关注的问题）。在 CLR 中装箱值类型时，您正在复制值当您只想执行第一个任务（将值复制到堆，或者至少获得对它的引用）时，同时丢失了接口信息。

`Integer`Java 用和的强类型解决了这个问题`Long`。为什么.NET 没有这个？

我有自己的实用程序源代码集合，我喜欢将它们包含在其他项目中，它们包括自己的强类型盒装类（例如 BoxedInt32）的实现，它们覆盖了隐式和显式转换运算符，因此它们的工作方式与转换为 Object 可以，除非不必实际转换为对象（从而保留类型数据）。所以我可以这样做：

```
private BoxedInt32 _reference;
public Int32 GetValue{ return _reference; } 
```

那么为什么.NET 在四个主要版本之后仍然没有强类型的盒装类型呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T02:34:01.577

There would be no point. You would never directly use BoxedInt32, since if you knew the type in advance it would only be sensible to use `int` instead of the box. So the only interesting case is: when we *don't* know the type in advance, i.e. when dealing with `object`. Well, value-type boxing already handles that perfectly, reporting the type as `Int32`.

The reason the specific boxed versions exist in Java is, in part, because Java generics work very differently via type erasure; however .NET has true generics including for value-types, so this is unnecessary.

You could make your own box:

```
public class Box<T> where T : struct {
    private readonly T value:
    public Box(T value) { this.value = value; }
    public T Value { get { return value; } }
} 
```

(perhaps adding more features such as conversions / equality): but - again: no point whatsoever. Regular inbuilt boxing already handles this much better.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T04:38:01.767

您的问题的根源似乎是对铸造的工作原理及其用途的误解：

> （因为转换应该将值转换为另一种类型......或将接口指针转换为父级）

当您将一件事转换为另一件事时，所发生的一切就是告诉编译器“请以稍微不同的方式处理这个随机的位集合”。这些位根本不应该被转换或修改。为了安全起见，C# 和 Java 会进行类型检查，但这并不是强制转换操作本身的核心。

将表示 int32 的位集合视为其他东西（例如 Object 引用）是荒谬的，因此 Boxing 系统会在您背后为您生成包装器。它仍然遵循强制转换规则 - 编译器现在可以将此装箱包装器视为对象引用，并且原始位不会被修改

> ...除非不必实际转换为对象（从而保留类型数据）...

同样，这是基于一个不正确的假设。根据上面的解释，强制转换确实“保留了类型数据”，因为它不修改值，它只是改变了编译器解释该数据的方式。装箱生成的包装器仍然可以访问底层数据， - 您可以在装箱的 int 上调用 .GetType() ，它会很高兴地报告它是一个 Int32。您的`BoxedInt32`课程只是在浪费时间和空间来存储已经可用的数据。

**注意：有时看起来像 C# 中的强制转换的代码实际上会通过调用隐式转换运算符来转换数据。这不是铸造，只是假装，所以规则不适用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-28T05:49:00.267

也许对于这种情况会很方便：

```
var myDictionary = new Dictionary<int, bool>();

// So we could use a BoxedBool here and modify the
// value set below.
//var myDictionary = new Dictionary<int, BoxedBool>();

myDictionary.Add(1, true);
myDictionary.Add(2, false);

foreach (var key in myDictionary.Keys)
{
    myDictionary[key] = false;
    // Cannot do this as it modified the collection.
    // If it was a reference type, this would not be a problem?
} 
```

# html - 我写了一个网页，想在手机上显示。如何调整背景图像？

> ID：12241158
> 
> 赞同：0
> 
> 时间：2012-09-03T01:50:20.790
> 
> 标签：html

我写了一个网页，现在想在手机上显示，但是背景图片太大显示不全，如何调整？

```
<td width="60%" height="105" background="templets/images/top_logo.jpg" align="left"> 
```

在电脑浏览器上是正常的，但在手机上只能显示一部分图像，不能按比例缩小。

我认为有一个简单的、一两行来实现这一点。我在哪里可以找到它的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T06:56:32.483

例如，只需对 webview 进行设置

```
//adapt to print 39adapt to the vertical screen 57adapt to cross scree
mWebView.setInitialScale(39) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T01:54:50.617

您可以使用[jquerymobile](http://jquerymobile.com)。它有助于所有移动平台，如 android、iphone 和黑莓。

# ruby-on-rails - Haml Rails 部分和本地问题

> ID：12241160
> 
> 赞同：1
> 
> 时间：2012-09-03T01:50:48.337
> 
> 标签：ruby-on-rails, haml, partial-views, local-variables, renderpartial

我刚开始玩haml，我试图了解我做错了什么。

**文章/edit.html.haml**

```
=render partial: 'form', f: f
  .submit_field
    =f.submit "Update Article" 
```

**文章/_form.html.haml**

```
=form_for @article do |f|
  -if @article.errors.any?
  #error_explanation
    %h2
      =pluralize(@article.errors.count, "error")
      prohibited this task from being saved:
      %ul
        -@article.errors.full_messages.each do |msg|
          %li=msg

  .text_field
    =f.label :title 
    %br
    =f.text_field :title

  .text_field
    =f.label :body
    %br
    =f.text_area :body, {rows: 10, cols: 40} 
```

我收到此错误：**语法错误，意外的keyword_ensure，期望 $end** at .submit_field 。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T02:19:57.717

尝试将提交按钮移到您的表单部分中：

**文章/edit.html.haml**

```
=form_for @article do |f|
  =render partial: 'form', f: f 
```

**文章/_form.html.haml**

```
-if @article.errors.any?
#error_explanation
  %h2
    =pluralize(@article.errors.count, "error")
    prohibited this task from being saved:
    %ul
      -@article.errors.full_messages.each do |msg|
        %li=msg

.text_field
  =f.label :title 
  %br
  =f.text_field :title

.text_field
  =f.label :body
  %br
  =f.text_area :body, {rows: 10, cols: 40}

.submit_field
  =f.submit "Update Article" 
```

# amazon-web-services - 在 DynamoDB 中将一个表复制到另一个表

> ID：12241161
> 
> 赞同：45
> 
> 时间：2012-09-03T01:50:55.903
> 
> 标签：amazon-web-services, amazon-dynamodb

在 DynamoDB 中将一个表相同地复制到一个新表的最佳方法是什么？

（我不担心原子性）。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2018-08-23T17:22:02.610

创建备份（备份选项）并使用新表名恢复表。这会将所有数据放入新表中。注意：根据表的大小需要相当长的时间

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2017-09-07T19:31:57.160

我只是使用了 python 脚本[dynamodb-copy-table](https://github.com/techgaun/dynamodb-copy-table)，确保我的凭据位于某些环境变量（`AWS_ACCESS_KEY_ID`和`AWS_SECRET_ACCESS_KEY`）中，并且它完美地工作。它甚至为我创建了目标表。

`python dynamodb-copy-table.py src_table dst_table`

默认区域是，使用env 变量`us-west-2`更改它。`AWS_DEFAULT_REGION`

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-06-02T14:03:24.710

AWS Pipeline 提供了一个可用于此目的的模板：“CrossRegion DynamoDB Copy”

请参阅：[http ://docs.aws.amazon.com/datapipeline/latest/DeveloperGuide/dp-crossregion-ddb-create.html](http://docs.aws.amazon.com/datapipeline/latest/DeveloperGuide/dp-crossregion-ddb-create.html)

结果是一个简单的管道，如下所示：

![在此处输入图像描述](../Images/0d43bc2e035eec7c18ac249566506eb1.png)

尽管它称为 CrossRegion，但只要目标表名称不同，您就可以轻松地将其用于同一区域（请记住，每个帐户和区域的表名称都是唯一的）

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-03T13:09:23.177

您可以使用[Scan](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/scandynamodb.html)读取数据并将其保存到新表中。

在 AWS 论坛上，来自 AWS 团队的一个人发布了另一种使用 EMR 的方法：[如何复制表？](https://forums.aws.amazon.com/message.jspa?messageID=366132#366132)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2022-01-28T02:46:13.650

这是一种将所有项目从一个表复制到另一个表的解决方案，只需使用 shell 脚本、[AWS CLI](https://docs.aws.amazon.com/cli/latest/index.html)和[jq](https://thoughtbot.com/blog/jq-is-sed-for-json)。适用于小桌子。

```
# exit on error
set -eo pipefail

# tables
TABLE_FROM=<table>
TABLE_TO=<table>

# read
aws dynamodb scan \
  --table-name "$TABLE_FROM" \
  --output json \
 | jq "{ \"$TABLE_TO\": [ .Items[] | { PutRequest: { Item: . } } ] }" \
 > "$TABLE_TO-payload.json"

# write
aws dynamodb batch-write-item --request-items file://"$TABLE_TO-payload.json"

# clean up
rm "$TABLE_TO-payload.json" 
```

如果两个表相同，则需要先删除 TABLE_TO 中的所有项目。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-29T17:51:04.603

2017 年 11 月 29 日，引入了*全局表*。根据您的用例，这可能很有用，这可能与原始问题不同。[以下是博客文章](https://aws.amazon.com/blogs/aws/new-for-amazon-dynamodb-global-tables-and-on-demand-backup/)中的一些片段：

> **全局表**– 您现在可以创建跨两个或多个 AWS 区域自动复制的表，完全支持多主写入，只需单击几下。这使您能够为全球用户群构建快速、大规模扩展的应用程序，而无需管理复制过程。
> 
> ...
> 
> 您无需对现有代码进行任何更改。您只需将写入请求和最终一致的读取请求发送到任何指定区域中的 DynamoDB 终端节点（与强一致性读取关联的写入应该共享一个公共终端节点）。在幕后，DynamoDB 实现了多主写入，并确保对特定项目的最后一次写入占上风。当您使用全局表时，每个项目都将包含一个时间戳属性，该属性表示最近一次写入的时间。更新通过 DynamoDB Streams 异步传播到其他区域，通常在一秒钟内完成（您可以使用新的**ReplicationLatency**和**PendingReplicationCount**指标进行跟踪）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-26T16:08:13.237

正如之前的回复中提到的，Data Pipeline 模板不再存在。

在这个线程中尝试了其他几个提议后，我最终编写了一个 NodeJS 脚本来移动数据。也许这对你有用？如果你想尝试，我[在我的博客上](https://tvernon.tech/blog/move-dynamodb-data-between-regions)记录了我的方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-29T21:25:51.290

使用这个节点 js 模块：[copy-dynamodb-table](https://www.npmjs.com/package/copy-dynamodb-table)

# ruby-on-rails - 如何排序以找到 34 个元素中的前 5 个

> ID：12241165
> 
> 赞同：1
> 
> 时间：2012-09-03T01:51:49.880
> 
> 标签：ruby-on-rails, ruby, sorting

我有 34 个元素，但我只需要知道哪些是排名前 5 的元素。

我在所有 34 个元素中使用比较“A 与 B”类型的问卷。

现在，它不是动态的，因此我无法根据先前的问题更改问题。

*   我可以在问卷中提出的最少问题数是多少？
*   你会使用什么排序算法？

现在我正在使用手册并使用 Excel，但想知道如何最终在 Ruby 中为基本的 Rails 应用程序执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T01:56:32.390

如果您只有简单的整数、浮点数或字符串，您可以轻松地对数组进行排序：

```
a = [ 3,3,1,6,2,8 ]
a.sort # => [1,2,3,3,6,8] 
```

但这有点上升。

要降序排序，您可以执行以下操作：

```
a.sort {|x,y| y <=> x } # => [8,6,3,3,2,1] 
```

或者

```
a.sort.reverse # => [8,6,3,3,2,1] 
```

然后要获得前 5 个元素，只需使用：

```
a.sort.reverse.take(5) # => [8,6,3,3,2] 
```

如果您正在排序的元素实际上是结构，您可以更改 sort_by 块内的代码以轻松解决此问题，例如：

```
a = [{:score => 5, :name => "Bob"}, {:score => 51, :name => "Jane"}, \
     {:score => 15, :name => "Joe"}, {:score => 23, :name => "John"}, \
     {:score => 35, :name => "Sam"}, {:score => 1, :name => "Rob"}]

a.sort_by{|x| x[:score] }.reverse.take(5)
# => [{:score => 51, :name => "Jane"},{:score => 35, :name => "Sam"},...] 
```

# vba - 在 VBA 中设置全局变量

> ID：12241167
> 
> 赞同：6
> 
> 时间：2012-09-03T01:52:10.473
> 
> 标签：vba, variables, global, powerpoint

我目前正在 PowerPoint 中制作“操作系统”，我需要知道如何为设置设置全局变量。

我制作了一个名为“设置”的模块，其中包含：

```
Public Sub Settings()

Option Explicit
Public UserName, UserIcon, Background, BrowserHomePage As String
Public SetupComplete As Boolean

SetupComplete = False
UserName = "Administrator"
UserIcon = Nothing
Background = Nothing
BrowserHomePage = Nothing

'Set the variables
UserName.Text = UserName

End Sub 
```

现在在“登录”屏幕上，我有一个名为“用户名”的文本框。然后我做了一个按钮来测试变量。该按钮执行此操作：

```
Private Sub CommandButton1_Click()
UserName.Value = UserName
End Sub 
```

当我单击按钮时，文本框没有任何价值。我是 VBA 的超级新手，想知道如何做到这一点。此外，如果有人知道如何在启动 PowerPoint 时自动执行代码，那就太好了。

编辑：我正在尝试制作一个仅包含设置的模块。有人可以指出如何更改幻灯片中的值吗？就像我单击幻灯片 1 中的按钮一样，我希望它将模块“设置”中的“用户名”值更改为我想要的任何值。

**解决方案**：好的，我找到了一个解决方案。我必须将设置写入文本文件并检索它以供阅读。

我的设置模块：

```
Public UserName As String, Password As String, UserIcon As String, DesktopBackground As String, LogInBackground As String, BrowserHomePage As String
Public InitialSetupCompleted As Boolean

Public Sub ReadSettings()

'Delcaring variables
TempDir = Environ("Temp")
SettingsFileName = "\OpenOSSettings.txt"
SettingsFile = TempDir & SettingsFileName
ReadFile = FreeFile()

'Read all settings from file
Open SettingsFile For Input As #ReadFile
Do While Not EOF(ReadFile)
    Line Input #ReadFile, Read
        If Read Like "UserName = *" Then
        UserName = Replace(Read, "UserName = ", "")
        End If
        If Read Like "Password = *" Then
        Password = Replace(Read, "Password = ", "")
        End If
        If Read Like "UserIcon = *" Then
        UserIcon = Replace(Read, "UserIcon = ", "")
        End If
        If Read Like "DesktopBackground = *" Then
        DesktopBackground = Replace(Read, "DesktopBackground = ", "")
        End If
        If Read Like "LogInBackground = *" Then
        LogInBackground = Replace(Read, "LogInBackground = ", "")
        End If
        If Read Like "BrowserHomePage = *" Then
        BrowserHomePage = Replace(Read, "BrowserHomePage = ", "")
        End If
        If Read Like "InitialSetupCompleted = *" Then
        InitialSetupCompleted = Replace(Read, "InitialSetupCompleted = ", "")
        End If
Loop
Close #ReadFile

'Applying settings to all elements
Slide5.UserName.Caption = UserName

End Sub

Public Sub SaveSettings()

'Declaring variables
TempDir = Environ("Temp")
SettingsFileName = "\OpenOSSettings.txt"
SettingsFile = TempDir & SettingsFileName
WriteFile = FreeFile()

'Write all settings to file
Open SettingsFile For Output As #WriteFile
Print #WriteFile, "UserName = " & UserName
Print #WriteFile, "Password = " & Password
Print #WriteFile, "UserIcon = " & UserIcon
Print #WriteFile, "DesktopBackground = " & DesktopBackground
Print #WriteFile, "LogInBackground = " & LogInBackground
Print #WriteFile, "BrowserHomePage = " & BrowserHomePage
Print #WriteFile, "InitialSetupCompleted = " & InitialSetupCompleted
Close #WriteFile

End Sub 
```

现在要保存设置，我只使用一个文本框和一个按钮。将 TextBox1 的值保存到文件中的 UserName 中：

```
Private Sub CommandButton1_Click()
UserName = TextBox1.Value
Settings.SaveSettings
End Sub 
```

读取 UserName 的值并放入 TextBox1：

```
Private Sub CommandButton2_Click()
Settings.ReadSettings
TextBox2.Value = UserName
End Sub 
```

很长的代码，但效果很好。感谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T14:24:19.643

不要将您的设置值放在模块中。模块用于代码，您将做更多的工作来尝试在其中存储数据而不是您想要的。将设置存储在注册表或文本文件中。如果您希望设置在文件中，您可以使用 CustomDocumentProperties 或隐藏幻灯片 - 我对 PPT 了解不够，无法给您一个好的建议。

制作一个从您存储设置的位置读取设置的过程。然后制定一个程序将它们写回存储。当用户单击幻灯片上的某个按钮时，您更改 Username 变量，然后执行将其写入存储的过程。

在同一行声明变量时，必须包括每个变量的类型。

```
Public UserName, UserIcon, Background, BrowserHomePage As String 
```

将 BrowserHomePage 调暗为字符串，但将其他三个变量调暗为 Variants。改用这个

```
Public UserName As String, UserIcon As String, Background As String, BrowserHomePage As String 
```

或者更好，但他们都在自己的路线上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T03:33:51.810

您的“用户名”变量实际上并不是全局变量，因为它在您的 Settings 子例程的范围内。将变量声明移到函数/子例程之外，使其成为全局变量。

尝试这个：

```
Option Explicit
Public UserName, UserIcon, Background, BrowserHomePage As String
Public SetupComplete As Boolean

Public Sub Settings()

SetupComplete = False
UserName = "Administrator"
UserIcon = Nothing
Background = Nothing
BrowserHomePage = Nothing

'Set the variables
UserName.Text = UserName

End Sub 
```

# c - 从这个函数接收值需要什么数据类型？

> ID：12241169
> 
> 赞同：1
> 
> 时间：2012-09-03T01:52:45.377
> 
> 标签：c, types

我需要帮助确定函数调用分配的正确数据类型。

我正在尝试获取`content`. `N_Vector u`以下是文档所说的`N_Vector`：

> 类型`N_Vector`定义为
> 
> ```
> N_Vector u;
> tpedef struct _generic_N_Vector *N_Vector;
> struct _generic_N_Vector {
>   void *content;
>   struct _generic_N_Vector_Ops *ops;
> }; 
> ```
> 
> ...
> 
> [并行NVECTOR模块]将*内容*字段定义为`N_Vector` 包含全局和局部长度的结构、指向连续局部数据数组开头的指针、MPI通信器和标志。
> 
> ```
> struct _N_VectorContent_Parallel {
>   long int local_length;
>   long int global_length;
>   booleantype own_data;
>   realtype *data;
>   MPI_Comm comm;
> } 
> ```

所以我想这意味着`content`“`_generic_N_Vector`指向”一个类型的结构`_N_VectorContent_Parallel`（对吗？）。

然后我尝试使用宏来访问`content`. 这是`NV_CONTENT_P`.

> `v_cont=NV_CONTENT_P(v)`设置`v_cont`为指向`N_Vector`type 的内容结构的指针`struct _N_VectorParallelContent`。

注意结构的不同名称！

*这意味着什么？我声明`v_cont`是什么类型？*

我试过了

```
N_Vector u;
...
_N_VectorParallelContent *v_cont1;
_N_VectorContent_Parallel *v_cont2;
v_cont1 = NV_CONTENT_P(u);
v_cont2 = NV_CONTENT_P(u); 
```

但这些声明得到错误“'_N_VectorContent_Parallel' undeclared...”或“'_N_VectorParallelContent' undeclared...”。

但似乎这些结构*必须*已经被删除。我成功地声明（并使用了）`u`，类型为`N_Vector`。并且文档似乎说`N_Vector`包含这两种结构之一（或者可能两者兼有）。

*那么为什么会出现错误消息？* `v_cont` *声明接收数据* *的正确数据类型是*`NV_CONTENT_P`什么？

我知道这是一个冗长而详细的问题，但我理解的不够深入，无法再减少它。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T02:39:50.390

I'm not familiar with this particular library, but it looks to me like [the documentation](https://computation.llnl.gov/casc/sundials/documentation/kin_guide/node7.html#SECTION00720000000000000000) is a little inconsistent.

Right after the blurb about `NV_CONTENT_P(v)`, it says `NV_CONTENT_P(v)` is defined as:

```
#define NV_CONTENT_P(v) ( (N_VectorContent_Parallel)(v->content) ) 
```

So that version of the name is probably correct. I can't see a definition for `N_VectorContent_Parallel` on that page, but it's probably defined somewhere as something like `struct _N_VectorContent_Parallel*`. So, you can probably do:

```
N_VectorContent_Parallel v_cont1 = NV_CONTENT_P(u); 
```

Remember that for structs, `struct` is part of the type name. This means that you're getting errors in your example because you haven't included `struct`:

```
// this is an unknown type
_N_VectorParallelContent *v_cont1; 

// this is a "struct _N_VectorParallelContent"
struct _N_VectorParallelContent *v_cont1; 

// But use this one, as it follows the macro
N_VectorContent_Parallel v_cont1; 
```

* * *

If you want to see exactly what the preprocessor has done to your code, you can use gcc's `-E` flag.

> ```
> -E    Stop after the preprocessing stage; do not run the compiler proper. 
>    The output is in  the form of preprocessed source code, which is sent to 
>    the standard output.
>    Input files which don't require preprocessing are ignored. 
> ```

This is especially useful for seeing the results of macros and multiple complex header files.

* * *

**Edit:** From the source you've linked:

```
typedef struct _N_VectorContent_Parallel *N_VectorContent_Parallel; 
```

This is a type definition that says that `N_VectorContent_Parallel` is the same as a `struct _N_VectorContent_Parallel *` (a pointer to a `struct _N_VectorContent_Parallel`), which means you can access `v_cont1` using the `->` syntax:

```
N_VectorContent_Parallel v_cont1;
printf("%d",v_cont1->local_length); 
```

`a->b` is is shorthand for `(*a).b` - it's just a cleaner-looking way of writing the dereference needed to accessing a member of a struct through a pointer to that struct. If that seems confusing, see my answer to [this question](https://stackoverflow.com/questions/10325505/objective-c-union-vs/10325743#10325743).

Personally, I don't like typedefs that hide pointers like this one, because it's hard to tell by looking at the code whether you need to use `a.b` or `a->b`.

# c# - WPF 中的基本动画：如何在展开时为网格设置动画

> ID：12241173
> 
> 赞同：0
> 
> 时间：2012-09-03T01:53:11.860
> 
> 标签：c#, wpf, mvvm, storyboard

我在我的 WPF 应用程序中使用 MVVm。我目前正在玩动画网格，以便当用户在组合框中选择特定项目时，我希望我的网格在展开时进行动画处理。我的视图模型中有一个属性，我想绑定它以触发网格中的动画。我们如何在 MVVM 中做到这一点？到目前为止，我最近找到了一个解决方案

```
EventTrigger RoutedEvent ="SampleGridEventName" 
```

有什么方法可以使用其他触发器绑定到我的 ViewModel 中的属性？类似

```
Trigger BlahBlah ="{Binding ExpandGrid}" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T04:39:21.327

是的。Style 有 DataTrigger，它也有 EnterActions 属性。动画存储在资源中。这就是诀窍。

```
<UserControl x:Class="TriggerSpike.UserControl1"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Height="300" Width="300">
<UserControl.Resources>
    <DoubleAnimation x:Key="SearchAnimation" Storyboard.TargetProperty="Opacity" To="1" Duration="0:0:4"/>
    <DoubleAnimation x:Key="StopSearchAnimation" Storyboard.TargetProperty="Opacity" To="0" Duration="0:0:4"/>
</UserControl.Resources>
<StackPanel>
    <TextBlock Name="progressWheel" TextAlignment="Center" Opacity="0">
        <TextBlock.Style>
            <Style>
                <Style.Triggers>
                    <DataTrigger Binding="{Binding IsBusy}" Value="True">
                        <DataTrigger.EnterActions>
                            <BeginStoryboard>
                                <Storyboard>
                                    <StaticResource ResourceKey="SearchAnimation"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </DataTrigger.EnterActions>
                        <DataTrigger.ExitActions>
                            <BeginStoryboard>
                                <Storyboard>
                                   <StaticResource ResourceKey="StopSearchAnimation"/> 
                                </Storyboard>
                            </BeginStoryboard>
                        </DataTrigger.ExitActions>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </TextBlock.Style>
        Searching
    </TextBlock>
    <Label Content="Here your search query"/>
    <TextBox Text="{Binding SearchClause}"/>
    <Button Click="Button_Click">Search!</Button>
    <TextBlock Text="{Binding Result}"/>
</StackPanel>
</UserControl> 
```

# c# - VB 6 DoEvents 的 C# 等效项

> ID：12241178
> 
> 赞同：14
> 
> 时间：2012-09-03T01:54:14.170
> 
> 标签：c#, .net, vb.net, vb6

VB6 有一个 DoEvents() 方法，您可以调用该方法将控制权返回给操作系统并在该单线程环境中模拟多线程行为。

与 VB 6 DoEvents() 等效的 .NET 框架是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-03T02:00:49.653

你可以使用`Application.DoEvents()`. 为什么不使用**[Threading](http://msdn.microsoft.com/en-us/library/aa645740%28v=vs.71%29.aspx)**类或简单地使用**[Background Workers](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)**？如果您在 .net 环境中进行操作，请不要使用`DoEvents`. 将其保留在 VB6 上。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-03T01:59:15.510

Application.DoEvents()（WinForms 的一部分）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-27T17:58:50.643

下面是一个通用的 DoEvents 类型方法

```
using System;
using System.Windows.Threading;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Security.Permissions;

namespace Utilites
{
/// <summary>
/// Emulates the VB6 DoEvents to refresh a window during long running events
/// </summary>
public class ScreenEvents
{
    [SecurityPermissionAttribute(SecurityAction.Demand, Flags = SecurityPermissionFlag.UnmanagedCode)]
    public static void DoEvents()
    {
        DispatcherFrame frame = new DispatcherFrame();
        Dispatcher.CurrentDispatcher.BeginInvoke(DispatcherPriority.Background,
            new DispatcherOperationCallback(ExitFrame), frame);
        Dispatcher.PushFrame(frame);
    }

    public static object ExitFrame(object f)
    {
        ((DispatcherFrame)f).Continue = false;

        return null;
    }
}
} 
```

它不需要了解应用程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T17:47:26.377

如果您在代码中调用 Application.DoEvents()，您的应用程序可以处理其他事件。例如，如果您有一个将数据添加到 ListBox 并将 DoEvents 添加到您的代码的表单，则当另一个窗口被拖到它上面时，您的表单会重新绘制。如果从代码中删除 DoEvents，则在按钮的单击事件处理程序完成执行之前，您的表单不会重新绘制。有关消息传递的更多信息，请参阅 Windows 窗体中的用户输入。

与 Visual Basic 6.0 不同，DoEvents 方法不调用 Thread.Sleep 方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-18T06:45:30.710

您不应该使用 Application.DoEvents()。它将有重入问题。您应该在循环内调用：

```
await System.Windows.Threading.Dispatcher.Yield() 
```

它会做同样的事情。不过，您需要将其放入异步方法中。这具有将方法标记为异步调用方法的额外优势。使用 Async() 为调用 await Dispatcher.Yield 的方法添加后缀是很好的。该方法自然不是异步的（即它确实具有 CPU 绑定工作），但出于所有意图和目的，该方法变为异步，因为它不会锁定调用线程。

# matlab - 加速度计数据的高斯滤波

> ID：12241182
> 
> 赞同：0
> 
> 时间：2012-09-03T01:54:52.173
> 
> 标签：matlab, filtering, accelerometer, gaussian

我有加速度计时间序列数据，它很嘈杂。我希望应用一些低通滤波器来使用 MATLAB 去除噪声。我在这个链接上找到了一个很好的答案，里面有非常简洁的 MATLAB 代码[（](https://stackoverflow.com/questions/1773542/matlab-filter-noisy-ekg-signal) [MATLAB：过滤嘈杂的 EKG 信号](https://stackoverflow.com/questions/1773542/matlab-filter-noisy-ekg-signal)）。它提供的语法是：

```
window = 7;

h = normpdf( -window:window, 0, fix((2*window+1)/6) );

y = filter(h, 1, x); 
```

然而，在这个公式中，均值设置为 0，标准差设置为 2*window+1)/6。我的问题是：

(1) 对于选择一维高斯滤波器，我们如何选择均值和标准差参数？或者有没有其他更好的方法来理解这个解决方案。

(2) 如果窗口大小为 N 则 h 应写为 h=normpdf(-N:N, 0, fix(2*N+1)/(N-1)));

现在我无法访问 MATLAB 中的信号处理工具箱。您的帮助将不胜感激

# unit-testing - “致命错误：在第 48 行的 /usr/bin/phpunit 中调用未定义的方法 PHPUnit_Util_Filter::addfiletofilter()”

> ID：12241183
> 
> 赞同：0
> 
> 时间：2012-09-03T01:55:49.733
> 
> 标签：unit-testing, phpunit, command-line-interface, php

我刚刚在我们的 Ubuntu/Linux 服务器上使用 PEAR 安装了 phpunit（Linux mccoy 2.6.28-11-server #42-Ubuntu SMP Fri Apr 17 02:45:36 UTC 2009 x86_64 GNU/Linux）

当我尝试运行单元测试时，出现错误：

> “致命错误：在第 48 行的 /usr/bin/phpunit 中调用未定义的方法 PHPUnit_Util_Filter::addfiletofilter()”

我已经用谷歌搜索了这个并遇到了一些线程，但是这些似乎都不能解决我的问题。

我已将以下行添加到我的

```
/etc/php5/cli/php.ini:

include_path = ".:/usr/share/php/PHPUnit" 
```

（我也试过不包含“/PHPUnit”文件夹）

但我仍然得到这个错误。

任何帮助将不胜感激

万托

编辑：这是文件 /user/bin/phpunit 开头的内容：

```
// ...just comments prior to this

 if (extension_loaded('xdebug')) {
     xdebug_disable(); }

 if (strpos('/usr/bin/php', '@php_bin') === 0) {
     set_include_path(dirname(__FILE__) . PATH_SEPARATOR . get_include_path()); }

 require_once 'PHPUnit/Util/Filter.php';

 PHPUnit_Util_Filter::addFileToFilter(__FILE__, 'PHPUNIT'); //line 48

 require 'PHPUnit/TextUI/Command.php';

 define('PHPUnit_MAIN_METHOD', 'PHPUnit_TextUI_Command::main'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T16:15:27.683

Seems like a version conflict / installation issue.

`pear version` should produce `1.9.4.`. If not `pear upgrade` and follow the commands until it does.

Then `sudo pear install --force --alldeps phpunit/phpunit` to fix the installation.+

Your include path should include the "pear" dir. Use `pear config-show` to find that.

# response.write - 有什么办法可以代替 Response.Write？

> ID：12241184
> 
> 赞同：0
> 
> 时间：2012-09-03T01:55:50.917
> 
> 标签：response.write

我的问题是，我有以下功能：

```
function change_tarif(param) {
    var arrTarif = <% Response.Write(Session["Tarif"]); %>
    .....
} 
```

Session["Tarif"] - 包含多维数组列表，当我加载我的页面时，它给出了这个错误

无法修改 Controls 集合，因为该控件包含代码块（即`<% ... %>`）。

当我删除`<% Response.Write(Session["Tarif"]); %>`它时，它不会给出这个错误。那么，如何在不使用代码块的情况下替换此代码以从 Session["Tarif"] 获取数组列表`<% %>`？

这是我在 C# 中的数组列表代码：

```
 public void getTarifList()
{
    int intRows = 0;
    string strTarif = "null";
    Session["Tarif"] = "null";

    SqlCommand cmdTarif = new SqlCommand("sp_SIMPay_GetTarifList");
    cmdTarif.CommandType = CommandType.StoredProcedure;

    DataTable dtTarif = SQL.GetData(cmdTarif);

    if (dtTarif.Rows.Count > 0)
    {
        intRows = dtTarif.Rows.Count;

        strTarif = "new Array(" + intRows + ");";
        int intIndex = 0;

        foreach (DataRow dRows in dtTarif.Rows)
        {
            strTarif += "arrTarif[" + intIndex + "] = new Array('" + dRows["TarifName"] + "', '" + dRows["ProviderID"] + "', '" + dRows["CodeID"] + "');";
            intIndex++;
        }
    }
    else
    {
        strTarif = "null";
    }
    Session["Tarif"] = strTarif;
} 
```

我的完整脚本：

```
function change_tarif(param) {
var  arrTarif = <% Response.Write(Session["Tarif"]); %>
var select = document.getElementById('TarifList');

var i = 0;

if (arrTarif != null) {
    for (i = 0; i < arrTarif.length; i++) {
        if (arrTarif[i][1] == '98' && param == '98') {
            clear_tarif();
            select.options[select.options.length] = new Option('' + arrTarif[i][0] + '', '' + arrTarif[i][2] + '');
            break;
        }
        else {
            clear_tarif();
            select.options[select.options.length] = new Option('Default Tarif', '');
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T01:57:53.110

您可以使用`Expression`（等效于`Response.Write()`）。

```
function change_tarif(param) {
 var arrTarif = <%= Session["Tarif"] %>;
} 
```

编辑：我已经定制了你的代码，

后面的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    getTarifList();
}
public void getTarifList()
{
    Session["Tarif"] = "null";
    StringBuilder sb = new StringBuilder();
    sb.AppendLine("new Array(" + 3 + ");");
    for(int i=0;i<3;i++)
    {
        sb.AppendLine("arrTarif[" + i + "] = new Array('A" + i + "', 'B" + i + "', 'C" + i + "');");
    }
    Session["Tarif"] = sb.ToString();
} 
```

和标记，

```
 <script type="text/javascript">
    function change_tarif(param){
       var  arrTarif = <% Response.Write(Session["Tarif"]); %>
       return arrTarif;
      }
     console.log(change_tarif('test'));
 </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T02:17:10.617

发生这种情况是因为您在页面代码中的某处执行了类似的操作（只是一个示例 - 它在`Label`这里并不重要，任何动态添加/删除的控件都会触发错误）：

```
Label lbl = new Label ();
lbl.Xxxx = ...;

Controls.Add ( lbl ); // this is what triggers your issue 
```

当您`<%= ... %>`在同一个容器中尝试通过使用`Controls`该容器的集合（`Page`、`Panel`等）来动态添加控件时，您将看到您看到的错误。

如果可以，请尝试删除将控件动态添加/删除到容器的代码（您拥有的同一个容器，`<%= ... %>`然后您的`<%= ... %>`块将开始工作。

要删除添加/删除控件的动态逻辑，只需将这些控件像任何其他控件一样放入容器中，例如

```
<asp:Label runat="server" id="lbl" ... /> 
```

然后在需要时简单地显示/隐藏控件。这样控件始终存在于页面中，您不必在运行时添加/删除它，然后您可以在同一个容器中拥有代码块。

这是一个会创建此错误的快速示例：

```
...
<div runat="server" id="div1">
    <asp:Label runat="server" id="lbl1" /><br />
    <span>Name:&nbsp;<%= Session["name"] %></span>
</div>
...

// in code-behind
protected override void OnLoad ( EventArgs e )
{
    Label lbl2 = new Label ();
    lbl2.Text = "Time: " + DateTime.Now.ToString ();

    // Error: you cannot modify the Controls collection if
    // the same control contains code blocks
    div1.Controls.Add ( lbl2 );
} 
```

# asp.net - 如何实现类似印象笔记、记牛奶、博主等的“添加/发邮件”功能？

> ID：12241187
> 
> 赞同：2
> 
> 时间：2012-09-03T01:57:26.590
> 
> 标签：asp.net, email, add

许多网站/应用程序现在具有接收传入电子邮件并添加到后端数据存储等功能。例如 Evernote、Blogger，您可以向指定的电子邮件地址发送电子邮件，您的笔记/帖子将被添加。他们如何实现这一点？

我做了什么：

1.  创建一个特殊的邮箱。

2.  让用户以某种格式发送电子邮件。

3.  然后在 ASP.NET 中，使用虚拟页面和计时器定期阅读传入的电子邮件。

4.  然后解析电子邮件并处理里面的信息。

我的问题是：

1.  一个特殊的邮箱就够了，还是为每个用户创建一个邮箱？

2.  有通用格式吗？例如，主题中的“@2012-09-03”代表时间还是什么？

3.  有没有更好的方法来主动监控邮箱，以指定频率或实时检测未读电子邮件？

感谢您的输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T03:46:53.057

您在这里真正缺少的是安全性。
你如何验证发件人是谁？

使用电子邮件很容易冒充他人。
虽然有一些方法可以安全地知道这一点（域密钥），但并不是每个人都使用它们。

Blogger 试图通过要求您指定用于邮寄的秘密电子邮件地址来降低这种风险。

一个特殊的收件箱绝对不够。

对于日期格式，您可以使用[ISO 日期格式](http://www.w3.org/QA/Tips/iso-date)。
这也被微数据格式用于时间，因此它应该易于显示，并且[对搜索引擎](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=176035)也可读。

```
<time itemprop="startDate" datetime="2012-10-11T19:00-08:00">11 Oct 2012, 7PM</time> 
```

要接收您的邮件，请查看[MailSystem.NET](http://mailsystem.codeplex.com/)。它确实有一个

> 新消息到达通知支持（IDLE 命令）

因此，您不必一直轮询服务器。

# java - 使用一个类中的变量到另一个java中

> ID：12241188
> 
> 赞同：0
> 
> 时间：2012-09-03T01:57:44.493
> 
> 标签：java, jakarta-ee, web-applications, velocity

我有一个使用速度的 java we 应用程序。我通过使用 ureq.getParameter() 方法提取的 url 在第一页中获得了两个变量。具有速度容器的其他类之一，我需要将其中一个变量从 url 发送到此速度容器。我尝试在第二个类中创建第一个类的实例并使用 getVariable name 方法来做到这一点，但它不起作用。有人能告诉我我该怎么做吗？

第一类：

```
package org.olat.dispatcher;

import java.io.UnsupportedEncodingException;
import java.net.URLDecoder;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.olat.core.gui.UserRequest;

public class RemoteLoginformDispatcher implements Dispatcher {

    private static final String PARAM_newUrl = "ret";
    private static String newURL;

    @Override
    public void execute(
            final HttpServletRequest request, 
            final HttpServletResponse response, 
            final String uriPrefix) {

        UserRequest ureq = null;

        try {
            ureq = new UserRequest(uriPrefix, request, response);
            newURL = ureq.getParameter(PARAM_newUrl);
        } catch () {
        }

    }

    public String getURL(){
        return newURL;
    }

} 
```

第 2 类：

```
public class BaseChiefController extends DefaultChiefController implements ContentableChiefController {
    //Velocity container mainvc created here. It interacts with a html file. Removed the code that would not really matter

    //mainvc.contextPut("newURL", "something");
    //The below statement works. When I try with something, the something appears in the html file.
    mainvc.contextPut("newURL", myLogin.getURL());      

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T02:36:59.500

To create an instance of another class, simply create a "public CLASSNAME" method, and inside define all class variables with the "this" modfier. Then, call out the function you wish to use from that method, and when you want to use the class, just do "new CLASSNAME(args);"

Although, I am not really sure I am understanding your question.

Maybe this is your answer. You can use variables from one class to another class by making the variable static, then doing "CLASSNAME.VARIABLENAME = WHATEVER".

* * *

EDITED:

Okay, so as far as I can tell, you are using a method to return a static value from the class, which is much slower than just doing "newURL", RemoteLoginformDispatcher.newURL);. Why not try this, as it is probably faster, and it should always work if newURL is defined. Otherwise, you have a different problem, and newURL is not being defined. If this is the case, try printing the caught Exception.

# jquery - jQuery 动态创建复杂的 HTML 片段

> ID：12241192
> 
> 赞同：5
> 
> 时间：2012-09-03T01:58:29.953
> 
> 标签：jquery, html, json

我希望使用 jQuery 生成（或至少用 JSON 数据填充某种模板并附加到列表）一个半复杂的 HTML div 元素。数据采用 JSON 格式（如果重要），对于每个父条目，我希望将另一个 div 添加到轮播类型元素。

很长的声明，例如：

```
$('#list').append('<li><div id=" + entry.id +"><span id="highlight> + entry.name + <span/><div id="picture" .... 
```

会工作，但太难维护（请原谅那里的错误，这只是为了说明一点）。必须有更有效的方法。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T02:08:18.510

您正在研究 javascript 模板语言 - 那里有很多：

*   [下划线.js](http://underscorejs.org/#template)；
*   [小胡子.js](http://mustache.github.com/) ;
*   [玉](http://jade-lang.com/);
*   [车把.js](http://handlebarsjs.com/)；
*   还有很多...

这个想法是保持数据和它的视图分开：

```
var myUser = { name : 'John', lastname : 'Doe' };

$('#awesomeDiv').html(
    someTemplateFunction( { user : myUser } )
); 
```

并且`someTemplateFunction()`会在它的身体里保持这样的东西：

```
<p>Hello <strong><%=user.name %> <%=user.lastname %></strong></p> 
```

通过*持有*我的意思是模板库能够解析这样的模板 [来自 DOM 或来自外部文件] 并将其呈现给新的 DOM 元素。

我的选择是**underscore.js**，因为它是一个非常小但有用的库，请随意看看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T02:03:19.703

您正在寻找一些模板。有许多：

*   [车把](http://handlebarsjs.com/)
*   [霍根](http://twitter.github.com/hogan.js/)
*   [灰尘.js](http://akdubya.github.com/dustjs/)
*   [胡子](http://mustache.github.com/)
*   [下划线模板](http://underscorejs.org/#template)
*   [jQuery 模板](http://api.jquery.com/category/plugins/templates/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T02:03:43.090

不知道它是否适用于您正在做的事情，但最近我遇到了类似的问题，我不想用要插入的 html 来“污染”我的 js。我的解决方案是在页面中插入所有 html 并将其隐藏，以便在需要时，我可以显示它，或者在某些情况下，我复制所需的 div。

# javascript - 从 Haml 调用外部 javascript 中的 ruby 数组

> ID：12241193
> 
> 赞同：0
> 
> 时间：2012-09-03T01:58:39.817
> 
> 标签：javascript, ruby-on-rails, arrays, haml

我是 RoR 和 web 应用程序开发的新手，我使用 Rails 3.2.3，我想在 Highcharts 中使用 ruby​​ 数组，我在视图文件中使用 Haml。

我在控制器中定义了一个数组，如下所示：

```
...
def show
  ...
  @close_array = DailyQuote.where(company_id: @company.id).map(&:closing_price)
end 
```

我已经在我的 Haml 视图文件中声明了它。

```
%body
  - close_array_j = "#{@close_array.inspect}"
  =javascript_include_tag :build_chart
  #container{:style => "min-width: 300px; height: 300px; margin: 0 auto"} 
```

现在我想`close_array_j`在一个 Highcharts 图表中使用这个数组，我在一个名为 build_chart.js 的单独文件中编写了代码：

```
$(function () {
  var chart;
  $(document).ready(function() {
  chart = new Highcharts.Chart({
    chart: {
      renderTo: 'container',
      },
...
    series: [{
      name: 'Closing Price',
      data: $('#close_array_j')
    }]
... 
```

正在呈现没有数据的 highcharts 图表。顺便说一句，我不太了解 ruby​​ 或 haml 或 js，你可能会说...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T02:15:32.833

您可以在 HAML 中像这样打印变量

```
%script
  != "close_array_j = #{@close_array.to_json};" 
```

然后在javascript中使用它

```
...
series: [{
    name: 'Closing Price',
    data: close_array_j
}]
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T02:37:45.557

The variable assignment you do in your haml view file has no effect. It doesn't automagically apply itself in your javascript file.

You could wrap it up in a script tag. Here's the erb version:

```
<%= javascript_tag do %>
 close_array_j =  = '<%= j @close_array.to_json %>';
<% end %> 
```

However, there are other, cleaner techniques. One would be to leverage the HTML5 data attribute to embed data such as yours. It's easy to access with Jquery.

I recommend you watch Ryan Bate's screencast on how to pass data to javascript in a variety of ways.

[http://railscasts.com/episodes/324-passing-data-to-javascript?view=asciicast](http://railscasts.com/episodes/324-passing-data-to-javascript?view=asciicast)

# linq - 使用 LINQ 对列表中每个对象的字段进行排序

> ID：12241199
> 
> 赞同：-1
> 
> 时间：2012-09-03T01:59:58.720
> 
> 标签：linq

是否可以使用 LINQ 对 IEnumerable 列表中的项目进行排序？

例如：

```
 IEnumerable<sample> sam = new List<sample>()
        {
            new sample{ id = 1, name = "sample 1", list = new List<int>{5,6,1}},
            new sample{ id = 2, name = "sample 1", list = new List<int>{2,9}},
            new sample{ id = 3, name = "sample 1", list = new List<int>{8,3,7}},
            new sample{ id = 4, name = "sample 1", list = new List<int>{8,4,3}},
            new sample{ id = 5, name = "sample 1", list = new List<int>{5,1,7}},
            new sample{ id = 6, name = "sample 1", list = new List<int>{6,9,7}}
        }; 
```

上面给出的示例的预期输出将是 List 中的排序值。预期输出为：

```
sample{ id = 1, name = "sample 1", list = new List<int>{1,5,6}},
sample{ id = 2, name = "sample 1", list = new List<int>{2,9}},
sample{ id = 3, name = "sample 1", list = new List<int>{3,7,8},
sample{ id = 4, name = "sample 1", list = new List<int>{3,4,8}},
sample{ id = 5, name = "sample 1", list = new List<int>{1,5,7}},
sample{ id = 6, name = "sample 1", list = new List<int>{6,7,9}} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T02:16:18.833

尝试，

```
 sam.All(p => { p.list.Sort(); return true; }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:01:29.237

LINQ 的一般形式是它不会更改原始数据。例如，如果我们有一个列表

```
var ints = new  List<int>{5,6,1}; 
```

并使用 linq 对其进行“排序”

```
var sorted = ints.OrderBy(); 
```

我们最终得到两个列表

```
ints => { 5,6,1}
sorted => {1,5,6} 
```

在您上面的示例中，这取决于您希望输出是什么

如果您想要一个列表排序的新样本列表，那么您可以使用

```
var newSampleList = samples.Select( sam => new Sample { 
                                                 id = sam.id, 
                                                 name = sam.name, 
                                                 list = new List<int>(sam.list.OrderBy())
                                   }); 
```

如果您不想创建一个新列表，但想对值进行排序，这并不是 LINQ 的真正用途，但可以使用 AVD 的答案来对每个成员执行功能（在这种情况下调用 Sort on名单）。

注意：这仅在 sample.list 被定义为 List() 时才有效，因为 Sort() 仅存在于 List<> 上。如果定义为 IList 或 IEnumerable，它将不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T02:56:37.770

```
((List<sample>)sam).ForEach(s => s.list.Sort()); 
```

# bash - 在 shell 提示符上显示退出代码总是 0，为什么

> ID：12241216
> 
> 赞同：1
> 
> 时间：2012-09-03T02:03:15.240
> 
> 标签：bash

我希望在 Bash shell 提示符下显示退出代码，以便我可以轻松知道上一个命令是否成功运行，但是它总是显示 0。这有什么问题吗？那么有没有可能达到想要的结果呢？

```
 PS1="\t <\w> ERR:$(echo $?) \$ " 
```

![在此处输入图像描述](../Images/cd2be3c07d3a04bc3e886fce8f797059.png)

-- openSUSE 11.4 上的 Bash 4.1.10

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T02:07:45.017

执行分配时，您忘记转义`$`以抑制扩展。

```
PS1="\t <\w> ERR:$(echo \$?) \$ " 
```

​</p>

```
22:04:48 <~/Work/tmp> ERR:x $ true
22:05:51 <~/Work/tmp> ERR:0 $ false
22:05:52 <~/Work/tmp> ERR:1 $ 
```

# c++ - 单数链表在传递给函数时变为循环链表

> ID：12241221
> 
> 赞同：0
> 
> 时间：2012-09-03T02:03:44.033
> 
> 标签：c++, linked-list

我正在尝试使用 C++ 反转一个链表，然后打印出反转的链表。

例如：原列表是1->2->3 还原后：3->2->1

但是当我试图打印出反向链表时， 3->2->1 变成了像 3<->2 这样的循环链表

以下是我的代码：

```
#include <iostream>
#include <sstream>
using namespace std;
class List{
public:
    int value;
    List *next;
    List(int);
    List(int, List *);
};

List::List(int v){
    value = v;
    next = NULL;
}

List::List(int v, List *ne){
    value = v;
    next = ne;
}

string IntToString(int val){
    stringstream temp;
    temp<<val;
    return temp.str();
}

void print(List *l){
    string output= "";
    while(l->next != NULL){
        output+=(IntToString(l->value)+"-->");
        l = l->next;
    }
    output+=(IntToString(l->value)+"-->NULL");
    cout<<output<<endl;
}

List reverse(List L){
    if(L.next == NULL) return L;
    List remain = reverse(*(L.next));
    List *current = &remain;
    while(current->next != NULL)
        current = (current->next);
    L.next = NULL;
    current->next = &L;
    //print(remain);
    return remain;
}

List copy(List l){
    return l;
}

int main() {
    List L3(3);
    List L2(2, &L3);
    List L1(1, &L2);
    List L4 = reverse(L1);
    print(&L4);
    return 0;
} 
```

谁能告诉我为什么会这样？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T02:27:25.487

我认为您的反向算法是正确的，但是`remain`是一个局部变量，返回后无效，因此 L4 将包含无效指针。`reverse()`更改取回的签名`List *`。

```
列表 *reverse(列表 *L){
    if(L->next == NULL) 返回 L;
    列表 *remain = reverse(L->next);
    列表 *当前 = 剩余；
    而（当前->下一个！= NULL）
        当前=（当前->下一个）；
    L->下一个 = NULL；
    当前->下一个 = L；
    //打印（保留）；
    返回剩余；
}

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T05:29:01.020

只需查看您的`reverse()`函数，您就可以在调用的堆栈上创建一个对象`remain`并将其插入您的列表中。这是行不通的：一旦你从函数返回，这个对象就会超出范围（原来的对象`main()`有同样的问题，但你离开后不要尝试使用它们`main()`）。此外，您的`reverse()`函数似乎具有二次性能，而它应该是线性的。我认为这样的事情可以解决问题：

```
List* reverse(List* head) {
    List* tail(0);
    while (head) {
        List* tmp(head);
        head = head->next;
        tmp->next = tail;
        tail = tmp;
    }
    return tail;
} 
```

上述实现也避免了递归。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T06:05:24.313

首先，我想向您指出，`list`包含指向的指针在概念上`another list`是*错误*的。

单独创建一个列表节点类，例如

```
struct ListNode {
    int value;
    Node *next;
}; 
```

然后你的`List`变成，

```
class List {
    ...
    ListNode *head;
    ...
}; 
```

现在开始倒车。在该方法`List reverse( List L )`中，***L 只是一个局部变量***。*之后超出范围*，

```
 return remain;
} // Here the scope of L ends 
```

所以返回值为 L 的位置的 a 在逻辑上是不正确`List`的`next`，

```
current->next = &L;
return remain; // remain is equal to *current and current->next = &L 
```

这会在您的实现中导致***未定义的行为。***

编辑：我有一些空闲时间，所以我想出了[这个实现](http://pastebin.com/LCC6sEru)。尽管修改了调用它的*原始列表*，但它使用相同的算法。

# xslt - 使用 xslt 解析多个节点

> ID：12241224
> 
> 赞同：-3
> 
> 时间：2012-09-03T02:04:44.083
> 
> 标签：xslt

下面是我的输入xml

```
 <Record>
          <Header>
              <field1/>
          </Header>
          <Body>
              <firstname>x1</firstname>
              <lastname>y1</lastname>
              <company>Test1</company>
          <Body>
          <Body>
              <firstname>x2</firstname>
              <lastname>y2</lastname>
              <company></company>
          <Body>
          <Body>
              <firstname>x3</firstname>
              <lastname>y3</lastname>
              <company>Test2</company>
          <Body>
        </Record> 
```

1.  我正在尝试遍历正文并检查公司值是否为空白，以输出相应的名字和姓氏。整个输出，我正在使用 xslt 映射器映射到目标上的 DATA。有人可以帮助我使用以下代码这不起作用

    ```
     <?xml version='1.0' ?>
        <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ns0="Namespace">
            <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
                <xsl:variable name="NAME" select="/RecordSet/Body"/>
                <xsl:variable name="break">&lt;br&gt;</xsl:variable>
            <xsl:variable name="tableB">&lt;table Border="1" BorderColor="#000000"  cellpadding="4" cellspacing="0" &gt;</xsl:variable>
            <xsl:variable name="tableE">&lt;/table&gt;</xsl:variable>
            <xsl:variable name="trB">&lt;tr&gt;</xsl:variable>
            <xsl:variable name="trE">&lt;/tr&gt;</xsl:variable>
            <xsl:variable name="tdB">&lt;td&gt;</xsl:variable>
            <xsl:variable name="tdE">&lt;/td&gt;</xsl:variable>
            <xsl:variable name="nbsp">&amp;nbsp;</xsl:variable>
            <xsl:variable name="thB">&lt;tr BGCOLOR="#CCCCCC"&gt;</xsl:variable>
            <xsl:template match="/">
        <DATA>
                <xsl:value-of select="$tableB"/>
            <xsl:value-of select="$thB"/>
        <xsl:value-of select="$tdB"/>&lt;B&gt;FirstName&lt;/B&gt;

                        <xsl:value-of select="$nbsp"/>
                        <xsl:value-of select="$tdE"/>
                        <xsl:value-of select="$tdB"/>&lt;B&gt;LASTNAME &lt;/B&gt;

                        <xsl:value-of select="$nbsp"/>
                        <xsl:value-of select="$tdE"/>
        <xsl:value-of select="$trE"/>
                        <xsl:value-of select="$trB"/>
                        <xsl:for-each select="$NAME/Body[string-length(company) &gt; 0]">
        <xsl:value-of select="$tdB"/>
                            <xsl:value-of select="$MT_NAME/firstname"/>
                            <xsl:value-of select="$nbsp"/>
                            <xsl:value-of select="$tdE"/>
        <xsl:value-of select="$tdB"/>
                            <xsl:value-of select="$MT_NAME/lastname"/>
                            <xsl:value-of select="$nbsp"/>
                            <xsl:value-of select="$tdE"/>
    <xsl:if test="position() mod 2 = 0">
                <xsl:value-of select="$trE"/>
            </xsl:if>
        </xsl:for-each>
                        <xsl:value-of select="$tableE"/>
        </DATA> 
    ```

2.  输出应该是

* * *

## |名字|姓氏|

## | X2 | Y2 |

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T03:29:01.247

提供的代码根本不生成 HTML——它生成*字符串*——一维文本。

此外，AFAIK`DATA`不是 HTML 元素。

此外，提供的“XML”格式严重错误。

**下面是一个如何使用 XSLT 生成 HTML 表格的示例：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="html" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
  <table>
   <thead>
     <tr>
       <td>First Name</td>
       <td>Last Name</td>
       <td>Company</td>
     </tr>
   </thead>
   <xsl:apply-templates/>
  </table>
 </xsl:template>

 <xsl:template match="Body">
  <tr>
   <xsl:apply-templates select="*"/>
  </tr>
 </xsl:template>

 <xsl:template match="Body/*">
  <td>&#xA0;</td>
 </xsl:template>

 <xsl:template match="Body/*[normalize-space()]">
  <td><xsl:value-of select="."/></td>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时**（提供的严重格式错误的文本 -- 已更正）：

```
<Record>
    <Header>
        <field1/>
        <Body>
            <firstname>x1</firstname>
            <lastname>y1</lastname>
            <company>Test1</company>
        </Body>
        <Body>
            <firstname>x2</firstname>
            <lastname>y2</lastname>
            <company></company>
        </Body>
        <Body>
            <firstname>x3</firstname>
            <lastname>y3</lastname>
            <company>Test2</company>
        </Body>
    </Header>
</Record> 
```

**生成了一个有意义且合理的 HTML 表格：**

```
<table>
   <thead>
      <tr>
         <td>First Name</td>
         <td>Last Name</td>
         <td>Company</td>
      </tr>
   </thead>
   <tr>
      <td>x1</td>
      <td>y1</td>
      <td>Test1</td>
   </tr>
   <tr>
      <td>x2</td>
      <td>y2</td>
      <td>&nbsp;</td>
   </tr>
   <tr>
      <td>x3</td>
      <td>y3</td>
      <td>Test2</td>
   </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T03:48:49.127

我不得不猜测您的要求，因为它们没有得到很好的解释。

这个 XSLT 1.0 样式表...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html" indent="yes"/>
<xsl:strip-space elements="*" />  

<xsl:template match="/">
  <DATA>
    <table Border="1" BorderColor="#000000"  cellpadding="4" cellspacing="0">
      <tr BGCOLOR="#CCCCCC">
        <th>First name</th>
        <th>Last name</th>
        <th>Company</th>
      </tr>
      <xsl:apply-templates select="*/Body" /> 
    </table>
  </DATA>
</xsl:template>

<xsl:template match="Body">
  <tr>
    <td><xsl:value-of select="firstname" /></td>
    <td><xsl:value-of select="lastname" /></td>
    <td>
      <xsl:choose>
        <xsl:when test="company!=''" >
          <xsl:value-of select="company" />
        </xsl:when>
        <xsl:otherwise>
          <xsl:value-of select="concat(firstname,' ',lastname)" />
        </xsl:otherwise>
      </xsl:choose>
    </td>
  </tr>  
</xsl:template>

</xsl:stylesheet> 
```

...当应用于本文档时...

```
<Record>
    <Header>
        <field1/>
    </Header>
    <Body>
        <firstname>x1</firstname>
        <lastname>y1</lastname>
        <company>Test1</company>
    </Body>
    <Body>
        <firstname>x2</firstname>
        <lastname>y2</lastname>
        <company/>
    </Body>
    <Body>
        <firstname>x3</firstname>
        <lastname>y3</lastname>
        <company>Test2</company>
    </Body>
</Record> 
```

...将产生...

```
<DATA>
  <table Border="1" BorderColor="#000000" cellpadding="4" cellspacing="0">
    <tr BGCOLOR="#CCCCCC">
      <th>First name</th>
      <th>Last name</th>
      <th>Company</th>
    </tr>
    <tr>
      <td>x1</td>
      <td>y1</td>
      <td>Test1</td>
    </tr>
    <tr>
      <td>x2</td>
      <td>y2</td>
      <td>x2 y2</td>
    </tr>
    <tr>
      <td>x3</td>
      <td>y3</td>
      <td>Test2</td>
    </tr>
  </table>
</DATA> 
```

## 笔记

请注意，当输入公司为空或缺失时，根据规定的要求，中间记录的公司单元格值为“x2 y2”。

* * *

# 更新

输入文档的格式仍然严重错误。考虑到 OP 的更新要求，这个 XSLT 1.0 样式表...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html" indent="yes"/>
<xsl:strip-space elements="*" />  

<xsl:template match="/">
  <DATA>
    <table Border="1" BorderColor="#000000"  cellpadding="4" cellspacing="0">
      <tr BGCOLOR="#CCCCCC">
        <th>First name</th>
        <th>Last name</th>
      </tr>
      <xsl:apply-templates select="*/Body[company='']" /> 
    </table>
  </DATA>
</xsl:template>

<xsl:template match="Body">
  <tr>
    <td><xsl:value-of select="firstname" /></td>
    <td><xsl:value-of select="lastname" /></td>
  </tr>  
</xsl:template>

</xsl:stylesheet> 
```

...当应用于与以前相同的输入文档时，产生...

```
<DATA>
  <table Border="1" BorderColor="#000000" cellpadding="4" cellspacing="0">
    <tr BGCOLOR="#CCCCCC">
      <th>First name</th>
      <th>Last name</th>
    </tr>
    <tr>
      <td>x2</td>
      <td>y2</td>
    </tr>
  </table>
</DATA> 
```

# sql - SQL 触发器在删除期间仅返回一条记录

> ID：12241225
> 
> 赞同：1
> 
> 时间：2012-09-03T02:05:13.447
> 
> 标签：sql, sql-server, triggers

下面是我为 SQL 数据库中的表创建的触发器（我们正在运行 SQL Server 2008）。我们将批量进行更新、插入和删除，因此我们创建了这个触发器和一个“存储”表 (TransactionLog) 来捕获所有活动。到目前为止，此触发器非常适用于插入和更新。所有记录都以所有适当的值出现在“存储”表中。

但是，当我们尝试删除多于一条记录时，就会出现问题。此触发器捕获并发送到“存储”表的唯一记录是最后删除的记录。所有其他人都会迷路。

```
CREATE TRIGGER [dbo].[trg_Agent_ALL] 
ON [dbo].[Agent]

FOR INSERT, UPDATE, DELETE
AS
BEGIN

--TransactionLog variables
DECLARE @tableName char(25) = 'Agent'
DECLARE @transDate datetime 
DECLARE @lastChangeOperator char(6) 
DECLARE @tableString char(255)
DECLARE @action char(1) = 'I'
DECLARE @userId char(25)

--Trigger table variables
DECLARE @sNumber char(10)
DECLARE @controlId char(3)
DECLARE @entityType char(1)
DECLARE @firstName nvarchar(50)
DECLARE @lastName nvarchar(50)
DECLARE @suffix nvarchar(10)
DECLARE @corpName nvarchar(100)

IF EXISTS (SELECT * FROM deleted)
    BEGIN
        SET @action = 
            CASE    
                WHEN EXISTS (SELECT * FROM inserted) THEN 'U'
                ELSE 'D'
            END
    END

IF @action = 'D'
    BEGIN 
        SELECT @sNumber = sNumber, @lastChangeOperator = LastChangeOperator, @transDate = LastChangeDate, @entityType = EntityType, 
        @firstName = FirstName, @lastName = LastName, @suffix = NameSuffix, @corpName = CorporateName, @controlId = ControlId
        FROM deleted

        IF @firstName IS NULL SET @firstName = 'NULL'
        IF @lastName IS NULL SET @lastName = 'NULL'
        IF @suffix IS NULL SET @suffix = 'NULL'
        IF @corpName IS NULL SET @corpName = 'NULL'
        IF @controlId IS NULL SET @controlId = 'NULL'

        SET @tableString = 'sNum:' + @sNumber + ' ' + 'EntType:' + @entityType + ' ' + 'Fname:' + @firstName + ' ' + 'Lname:' + @lastname + ' ' + 'suf:' + @suffix +
            ' ' + 'crpName:' + @corpName + ' ' + 'crlId:' + @controlId
    END
ELSE
    BEGIN
        SELECT @sNumber = SymetraNumber, @lastChangeOperator = LastChangeOperator, @transDate = LastChangeDate, @entityType = EntityType, 
        @firstName = FirstName, @lastName = LastName, @suffix = NameSuffix, @corpName = CorporateName, @controlId = ControlId
        FROM inserted

        IF @firstName IS NULL SET @firstName = 'NULL'
        IF @lastName IS NULL SET @lastName = 'NULL'
        IF @suffix IS NULL SET @suffix = 'NULL'
        IF @corpName IS NULL SET @corpName = 'NULL'
        IF @controlId IS NULL SET @controlId = 'NULL'

        SET @tableString = 'sNum:' + @sNumber + ' ' + 'EntType:' + @entityType + ' ' + 'Fname:' + @firstName + ' ' + 'Lname:' + @lastname + ' ' + 'suf:' + @suffix +
            ' ' + 'crpName:' + @corpName + 'crlId:' + @controlId
    END

INSERT INTO TransactionLog (TransactionDate, Operator, TableName, Action, TableString, UserId)
VALUES (@transDate, 'Op', @tableName, @action, @tableString, @lastChangeOperator)

END 
```

根据下面的评论，我更改了删除部分中的 SQL 代码。硬编码的值似乎有效，但是我将它们放在那里的主要原因只是为了显示这些值是我需要这些特定列的值。我在上面的代码中使用这些值设置了变量（请参阅 DECLARE 语句）。但是，这给了我以下错误消息：

```
 Conversion failed when converting the varchar value 'P' to data type int. 
```

此错误来自内部 SELECT 语句中的 EntityType 属性。让我感到困惑的是，该列的数据类型设置为 char(1)，而 TableString 列（连接值的目标）的数据类型为 nvarchar(255)。不知道“int”来自哪里......

```
IF @action = 'D'
    BEGIN   
        INSERT INTO TransactionLog (TransactionDate, Operator, TableName, Action, TableString, UserId)
        SELECT LastChangeDate, 'Op', 'Agent', 'D', 
        (SELECT CAST(CAST(sNumber as nvarchar) + ' ' + EntityType + ' ' + ISNULL(FirstName, ' ') + ' ' + ISNULL(LastName, ' ') + ' ' + ISNULL(NameSuffix, ' ') + ' ' + 
                ISNULL(CorporateName, ' ' ) + ' ' + ISNULL(CAST(ControlId as nvarchar), ' ') AS nvarchar) as TableString
        FROM deleted), LastChangeOperator
        FROM deleted
    END
ELSE 
```

编辑

通过将 sNumber 和 controlId 字段转换为 nvarchar，我能够跳过我之前的错误消息。现在，但是我收到下面发布的不同错误消息：

```
 Subquery returned more than 1 value. This is not permitted when the subquery follows =, !=, <, <= , >, >= or when the subquery is used as an expression. 
```

最终编辑

像这样更改子查询允许我将多个已删除的记录返回到 Audit 表中，因为我一次只请求一条记录。

```
IF @action = 'D'
    BEGIN 
        INSERT INTO TransactionLog (TransactionDate, Operator, TableName, Action, TableString, UserId)
            SELECT LastChangeDate, 'Op', 'Agent', 'D', 
            CAST('SymNum:' + CAST(SymetraNumber as nvarchar(30)) + ' entType:' + EntityType + ' Fname:' + ISNULL(FirstName, 'NULL') + ' Lname:' + ISNULL(LastName, 'NULL') +
             ' suff:' + ISNULL(NameSuffix, 'NULL') + ' corpName:' + ISNULL(CorporateName, 'NULL' ) + ' ctrlId:' + ISNULL(CAST(ControlId as nvarchar(30)), 'NULL') AS nvarchar(30)) as TableString
            , LastChangeOperator
        FROM deleted
    END
ELSE 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T02:19:37.197

该`select @sNumber = sNumber, ..`语法将为每一行覆盖一次变量，因此您最终只会得到最后一行的值。

然后你也做一个`insert into ... values (...)`，它只能插入一行。

您应该尝试以以下形式重写它：

```
insert into TransactionLog ( ... )
select sNumber, ... from deleted 
```

您可以使用`ISNULL(lastname, 'NULL')`而不是您的 if 语句。

# google-maps - 带有 Google Map 的 Ember.js

> ID：12241227
> 
> 赞同：7
> 
> 时间：2012-09-03T02:05:39.987
> 
> 标签：google-maps, ember.js

我正在尝试根据事件对象的位置显示嵌入的 Google 地图。

这是基本的应用程序：

```
App = Em.Application.create();

App.Event = Em.Object.extend({
    lat: -33.8665433,
    lng: 151.1956316
});

App.EventController = Ember.ObjectController.extend();

App.ApplicationController = Ember.ObjectController.extend();

App.EventView = Ember.View.extend({
    templateName: 'event'
});

App.ApplicationView = Ember.View.extend({
    templateName: 'application'
});

App.Router = Ember.Router.extend({
    enableLogging: true,
    root: Ember.Route.extend({
        event: Ember.Route.extend({
            route: '/',
            connectOutlets: function (router) {
                router.get('eventController').set('content', App.Event.create());
                router.get('applicationController').connectOutlet('event');
            }
        })
    })
});

App.initialize(); 
```

使用以下模板：

```
<script type="text/x-handlebars" data-template-name="application">
    {{outlet}}
</script>
<script type="text/x-handlebars" data-template-name="event">
    {{lat}} {{lng}}
    // Embeded Google Map
</script> 
```

我将在哪里初始化地图？此外，如果纬度/经度发生变化，我将如何捕捉它并重新绘制地图？

**工作视图代码**（根据 sabithpocker 的回答修改）

```
App.EventView = Ember.View.extend({
    templateName: 'event',
    map: null,
    latitudeBinding: 'controller.content.lat',
    longitudeBinding: 'controller.content.lng',
    didInsertElement: function () {
        var mapOptions = {
            center: new google.maps.LatLng(this.get('latitude'), this.get('longitude')),
            zoom: 8,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(this.$().get(0), mapOptions);
        this.set('map', map); //save for future updations
        this.$().css({ width: "400px", height: "400px" });
    },
    reRenderMap: function () {
        if (this.get('map')) {
            var newLoc = new google.maps.LatLng(this.get('latitude'), this.get('longitude'));
            this.get('map').setCenter(newLoc);
        }
    }.observes('latitude', 'longitude') //these are bound to lat/lng of Event
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T03:05:24.883

这是一个快速的想法，不遵循 ember 应用程序结构，只是一个想法。

```
App.EventView = Ember.View.extend({
    templateName: 'event',
    map : null,
    latitudeBinding : 'App.Event.lat',
    longitudeBinding : 'App.Evet.lng',
    didInsertElement : function(){
      var mapOptions = {
        center: new google.maps.LatLng(this.get('latitude'), this.get('longitude')),
        zoom: 8,
        mapTypeId: google.maps.MapTypeId.ROADMAP
        };
      var map = new google.maps.Map(this.$().get(0),mapOptions);
      this.set('map',map); //save for future updations
    },
    reRenderMap : function(){
      var newLoc = new google.maps.LatLng(this.get('latitude'), this.get('longitude'));
      this.get('map').setCenter(newLoc)
      }.observes('latitude','longitude') //these are bound to lat/lng of Event
}); 
```

我也认为`App.Event`应该是：

```
App.Event = Em.Object.extend({
    lat: null,
    lng: null,
    init : function(){
      this.set('lat', -33.8665433);
      this.set('lng', 151.1956316);
      }
}); 
```

[避免Ember 中](http://www.cerebris.com/blog/2012/03/06/understanding-ember-object/)所谓的染色体突变

# iphone - 如何在像 iphone 键盘一样触摸时使按钮键盘（AZ）更大

> ID：12241230
> 
> 赞同：1
> 
> 时间：2012-09-03T02:06:46.330
> 
> 标签：iphone, ios, uikeyboard

我正在做一个定制的键盘。如何在触摸时使那些字母按钮（AZ）的键盘变大？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T02:24:22.900

查看按钮的事件。有`UIControlEventTouchDown`，`UIControlEventTouchUpInside`还有一些。您应该分配`IBActions`给这些事件。

但是如果你有很多按钮，你最好继承 UIButton 并覆盖它的`touchesBegan:`,`touchesMoved:`和`touchesEnded:`消息。

在这些消息中，根据您的需要调整按钮框架的大小（您甚至可以更改它的背景图像或文本大小）。但请确保您的按钮的超级视图没有`Clips Subviews`设置属性。

# c - 如何使用 Visualdsp++ 应用低搁架滤波器？

> ID：12241231
> 
> 赞同：3
> 
> 时间：2012-09-03T02:07:06.047
> 
> 标签：c, signal-processing, fractions

我对DSP很陌生。并且必须解决以下问题：对数据数组应用低搁架滤波器。原始数据显示在 fract16 (VisualDSP++) 中。我正在写如下内容，但不确定它是否正确。

1.  以下代码是否有溢出问题？
2.  如果1是真的，我应该怎么做才能防止它？
3.  对这个问题有什么建议吗？

```
fract16 org_data[256]; //original data
float16 ArrayA[],ArrayB[];
long tmp_A0, tmp_A1, tmp_A2, tmp_B1, tmp_B2; 
float filter_paraA[3], filter_paraB[3]; // correctness: 0.xxxxx

// For equalizing
// Low-Shelving filter
for ( i=0; i<2; i++)
{
    tmp_A1 = ArrayA[i*2];
    tmp_A2 = ArrayA[i*2+1];
    tmp_B1 = ArrayB[i*2];
    tmp_B2 = ArrayB[i*2+1];
    for(j=0;j<256;j++){
        tmp_A0 = org_data[j];
        org_data[j] =  filter_paraA[0] * tmp_A0
                     + filter_paraA[1] * tmp_A1
                     + filter_paraA[2] * tmp_A2
                     - filter_paraB[1] * tmp_B1
                     - filter_paraB[2] * tmp_B2;
        tmp_A2 = tmp_A1;
        tmp_B2 = tmp_B1;
        tmp_A1 = tmp_A0;
        tmp_B1 = org_data[j];
    }
    ArrayA[i*2]     = tmp_A1;
    ArrayA[i*2+1]   = tmp_A2;
    ArrayB[i*2]     = tmp_B1;
    ArrayB[i*2+1]   = tmp_B2;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T08:06:23.803

我不知道 fract16 的范围是多少，大约只有 -1 到 +1？

对我来说可能会产生溢出的部分是分配 org_data[j] ，但这取决于您对输入信号和滤波器系数的了解。如果您可以确保将 filter_paraA[2:0] 乘以带有值 tmp_A2..1 = [1,1,1] 的信号 < max(fract16) ，那么无论“B”侧如何，您都应该没问题。

我建议在您的代码中添加一些溢出检查。它不一定要修复它，但您将能够识别一个非常棘手的错误。除非您需要绝对的最大性能，否则我什至会保留检查代码，但输出较少或设置一个检查标志。

```
macA = filter_paraA[0] * tmp_A0 + filter_paraA[1] * tmp_A1 \
     + filter_paraA[2] * tmp_A2;

macB = filter_paraB[1] * tmp_B1 - filter_paraB[2] * tmp_B2;
if((macA-macB)>1){
    printf("ERROR! Overflow detected!\n");
    printf("tmp_A[] = [%f, %f, %f]\n",tmp_A2,tmp_A1,tmp_A0);
    printf("tmp_B[] = [%f, %f]\n",tmp_B1,tmp_B0);
    printf(" i = %i, j = %i\n",i,j);
} 
```

# amazon-web-services - DynamoDB query() 与 getItem() 用于基于索引的单项检索

> ID：12241235
> 
> 赞同：66
> 
> 时间：2012-09-03T02:08:09.150
> 
> 标签：amazon-web-services, amazon-dynamodb

如果我根据索引散列键从表中检索单个项目，则 or 之间是否存在性能`query()`差异`getItem()`？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-03T13:01:05.977

`getItem`会更快

`getItem`通过散列和范围键检索是 1:1 拟合，检索它所需的时间（因此性能）受散列和内部分片的限制。

查询导致搜索“所有”范围键。它增加了计算工作，因此被认为更慢。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-09-03T14:36:04.503

在 Amazon 的 DynamoDB 中，无论采用何种访问方法，都可以**保证您的性能。**（你付钱）。

正如 Chen Harel 所建议的那样，DynamoDB 服务器本身可能存在**几毫秒的**差异，但由于 HTTP 请求 RTT，这些差异**可以忽略不计。**

这就是说，最好发出 a而不是在您有足够的信息时这样做**。**`GET``QUERY`

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2020-02-04T20:08:35.750

正如 aws 员工在其中一次讨论中所建议的那样，我引用：

> GetItem 与限制 = 1 的查询的延迟将是相等的。

[AWS 讨论链接](https://forums.aws.amazon.com/thread.jspa?threadID=93743)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-02-21T19:53:08.220

两者之间没有性能差异。两个查询中的哈希计算都是 1 对 1 完成的。后者，即 get item 只是作为 JPA 存储库/spring findOne/findById 的类比提供，以使 Spring Bean 布线/Hibernate 配置中的布线更容易。

# joomla - Joomla v1.5.14 Admin 顶部菜单元素丢失

> ID：12241239
> 
> 赞同：0
> 
> 时间：2012-09-03T02:08:52.587
> 
> 标签：joomla

我的客户有 Joomla！安装在远程服务器上的 1.5.14 版。我使用 url /administrator/ 登录，登录为“admin”。登录成功后进入管理页面时，我观察到顶部菜单只有两个元素，站点和帮助。菜单、内容、组件、扩展等所有其他元素都不存在。我也找不到任何方法来访问这些元素（菜单、组件）。屏幕上没有图标可以访问它们。

有人可以帮我解决这个问题吗？

提前致谢

问候， MulC

编辑：

以下是管理页面的截图 [http://postimage.org/image/youvqynh7/](http://postimage.org/image/youvqynh7/)

用户 admin 属于“超级管理员”组

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T02:47:10.770

在 Joomla！1.5.xa 常见的安全步骤是创建一个备用“超级用户”并将默认`admin`帐户降级为标准注册。由于 1.5 的早期版本存在问题，但不建议删除或禁用此帐户。

这听起来像是您的`admin`帐户正在发生的事情。

您可以通过查看数据库检查表`jos_users`查找用户名`admin`并查看其`usertype`设置来检查这一点。同时寻找一个拥有`usertype`of的用户`Super Administrator`（是的，真的是*Super Administrator*）。

获得`username`超级管理员的权限后，您将需要找到密码。如果客户不知道，那么您将[不得不恢复管理员密码](http://docs.joomla.org/How_do_you_recover_your_admin_password%3F)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T02:16:38.757

这很奇怪，除非您的客户一直在摆弄核心 Joomla 文件或数据库表。

1.  将站点更新到1.5系列的最新版本（1.5.26）
2.  下载完整的 Joomla 包，提取管理员、组件、包含、库、模块和插件文件夹，将它们压缩并上传到服务器，替换当前文件夹。不用担心，这只会覆盖我认为尚未编辑的核心文件。
3.  尝试下载并安装另一个管理模板。

否则我唯一能想到的另一件事是重建网站，这可能需要一段时间，具体取决于投入的工作量。

# html - 浏览器显示代码不是页面

> ID：12241240
> 
> 赞同：0
> 
> 时间：2012-09-03T02:08:58.190
> 
> 标签：html, node.js, amazon-web-services

我是菜鸟。最近，我在 AWS 上构建的网站发生了一件奇怪的事情。如果我从我的桌面访问它，一切看起来都很好。但是，当我切换到我的移动浏览器或其他人的 = 计算机时，它只显示源代码。请把我的屁股从这种烦人的情况中拯救出来。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T02:46:22.553

尝试将 设置`Content-type`为实际的[响应标头](http://nodejs.org/api/http.html#http_response_setheader_name_value)：

```
res.setHeader('Content-type', 'text/html; charset=utf-8'); 
```

`<meta http-equiv>`仅当浏览器至少尝试将文件读取为`text/html`. 如果它选择跳过这样的试用，至少有几个似乎这样做，那么它只会将文件打印为`text/plain`.

# ruby-on-rails - Rails：after_create 中的异常停止保存

> ID：12241244
> 
> 赞同：22
> 
> 时间：2012-09-03T02:09:47.213
> 
> 标签：ruby-on-rails, activerecord, resque, after-create

简单的问题。我有一个 ActiveRecord 模型，我想在保存记录后执行后期处理。因此，在模型中，我有一个 queue_for_processing 方法，可以将作业粘贴到我的 Resque 队列中。为了在我的记录成功保存后执行此操作，我在模型中编写了以下内容：

```
after_create :queue_for_processing 
```

很简单。我原以为一切都按预期工作，除了昨晚我的 redis 服务器出现故障并且事情出了差错。我的期望是记录仍然会被保存，我可以稍后手动处理这项工作。但是 queue_for_processing 方法抛出异常（预期行为）并停止保存记录。

我是否误解了 after_create 的工作原理？还是我的理解正确并且发生了一些奇怪的事情？

谢谢。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-03T02:13:29.020

是的，回调都包含在事务中。

基本上，以下将导致回滚：

*   `before_save`从或类似的回调中返回 false
*   `before_save`或类似回调中的异常
*   或类似回调中的异常`after_save`（after_create）

以下不会导致回滚：

*   `after_save`从或类似的回调中返回 false
*   例外`after_commit`

如果您不希望异常导致回滚，请使用`after_commit`

*   参考：[http ://webonrails.com/2012/08/28/activerecord-after_commit-hook/](http://webonrails.com/2012/08/28/activerecord-after_commit-hook/)
*   附加参考： http: [//guides.rubyonrails.org/v3.1.3/active_record_validations_callbacks.html#transaction-callbacks](http://guides.rubyonrails.org/v3.1.3/active_record_validations_callbacks.html#transaction-callbacks)

# php - 应用程序用户的 PHP Facebook 连接 steamPublish

> ID：12241245
> 
> 赞同：0
> 
> 时间：2012-09-03T02:09:55.343
> 
> 标签：php, facebook

我有一个 fb 应用程序来收集 FB 成员用户 ID 和个人资料并存储到本地数据库

我有一个后端/管理站点，我想从后端/管理员向注册的 fb 成员发布一些墙帖，因此我使用 fb connect，并且我可以使用 php sdk 通过 FQL 成功获取 fb 成员的信息。

那么如何使用我的应用程序帐户（或 fb ID）在我的管理站点（而不是应用程序页面）中代表用户的姓名（假设我已经有权这样做）将消息发布到用户的墙上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:43:44.093

您应该只使用流发布作为用户操作的直接结果。在用户不知道并允许将某些内容发布到他的墙上的情况下，您不应该这样做。

此处详细描述了执行此操作的方法：[https ://developers.facebook.com/docs/reference/api/#publishing](https://developers.facebook.com/docs/reference/api/#publishing)

# c# - 如何从 IEnumerable 转换 输入？

> ID：12241246
> 
> 赞同：0
> 
> 时间：2012-09-03T02:09:58.340
> 
> 标签：c#, .net, linq, entity-framework

我正在使用带有存储库模式的 EF 4，它具有如下所示的通用查询方法：

```
public IEnumerable<T> Query(Expression<Func<T, bool>> filter) 
    { 
        return objectSet.Where(filter); 
    } 
```

我知道我可以像这样选择一个完整的对象：

```
context.PeriodRepository.Query(a => a.EntityId == selectedEntityId); 
```

但我想传递一个返回它的 Linq 查询，`type`而不是`IEnumerable<type>`使用 LINQ 表达式而不更改方法。请告诉我该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T02:18:47.730

使用`First()`or`FirstOrDefault()`方法并传入一个谓词来查找您想要的元素（如果它不是第一个元素）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T02:28:52.097

查询描述了对列表执行的操作；您必须执行查询才能获得结果。

使用`.ToList()`/`.ToArray()`将返回与查询匹配的所有项目。用于`.First()`获取第一个匹配`.FirstOrDefault()`的项目或获取第一个项目或不匹配的默认值。

类的默认值为`null`。

我认为你的代码应该是这样的：

```
var myMatch = context.PeriodRepository
   .Query(a => a.EntityId == selectedEntityId)
   .First(); 
```

另请注意，`First()`当没有匹配时会抛出异常。

# javascript - Javascript Regex，在字符串中查找数字

> ID：12241248
> 
> 赞同：0
> 
> 时间：2012-09-03T02:11:57.947
> 
> 标签：javascript, regex, string

抱歉，这太具体了，但我无法从我看到的任何示例或其他问题中弄清楚。我需要在字符串中找到所有具有任意精度小数的正数或负数。示例：-0.2、.2、3.4、-3.4、3.400、300.5 等。它们必须有小数，没有数字，也没有逗号。任何帮助将不胜感激，我认为这应该很简单，但我没有得到任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T02:13:51.960

尝试这个：

```
/\-?\d*\.\d+/ 
```

它仍然可以工作，`-.2`不确定你是否想要。

```
\-?        - or no -
\d*        0 or more digits
\.         .
\d+        1 or more digits 
```

此外，如果您确定整个字符串将是没有其他字符的值，那么您应该添加`^`和`$`

`/^\-?\d*\.\d+$/`不会匹配类似的东西，而`'hello1.2'`没有它会匹配。`^``$`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T02:28:40.737

试试这个，我只是在正则表达式教练中测试它，适合你的例子：

```
"[^\d]\.\d+|[-|\d+|-\d+]\d*\.\d+|\.d+" 
```

# iphone - 当我调整一层imageview的大小时，如何同时调整uiimageview的大小？

> ID：12241250
> 
> 赞同：0
> 
> 时间：2012-09-03T02:12:14.967
> 
> 标签：iphone, imageview, scale, layer, cabasicanimation

这是我的代码：

```
CABasicAnimation *animation = [CABasicAnimation 
                               animationWithKeyPath:@"transform.scale"];
[animation setFromValue:[NSNumber numberWithFloat:1.0f]];
[animation setToValue:[NSNumber numberWithFloat:3.0f]];
[animation setDuration:0.8];
[animation setRemovedOnCompletion:NO];
[animation setFillMode:kCAFillModeForwards];
[imageView.layer addAnimation:animation forKey:@"scale"];

[imageView setFrame:nowRect]; 
```

我发现这不对，因为当我将imageView框架设置为nowRect时，imageView的层又变大了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T03:16:10.593

试试这个，你首先在 viewDidLoad 中设置你的图像大小......

例如：在本例中，a 和 b 是您最初需要的尺寸...

```
imageForAnimate.frame=CGRectMake(imageForAnimate.frame.origin.x, imageForAnimate.frame.origin.y, a, b); 
```

那么您需要将此代码附加到您需要的区域...

```
 [UIView animateWithDuration:0.8 animations:^{
        imageForAnimate.frame=CGRectMake(imageForAnimate.frame.origin.x, imageForAnimate.frame.origin.y, a*3, b*3);

    }]; 
```

我希望这能帮助你解决....

# javascript - 是否可以使用 javascript 以 em 为单位获取窗口的宽度？

> ID：12241251
> 
> 赞同：48
> 
> 时间：2012-09-03T02:12:21.363
> 
> 标签：javascript, jquery, media-queries, em

我正在寻找一种可靠的方法来使用 javascript 以 em 为单位获取窗口的宽度。我很惊讶地看到 jQuery 只会返回像素测量结果。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-09-03T02:26:20.510

这似乎有效：

```
$(window).width() / parseFloat($("body").css("font-size")); 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2017-02-06T06:07:32.517

这是一个不需要 jQuery 的解决方案，也不需要显式的字体大小声明。

```
window.innerWidth / parseFloat(
  getComputedStyle(
    document.querySelector('body')
  )['font-size']
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-16T17:00:54.987

对于那些需要它们的人来说，这段代码对我有用：

```
<p>Window size: <span id="width_px"></span> pixels or <span id="width_ems"></span> ems</p>
<script>
  window.onresize = function() {
    document.getElementById("width_px").innerHTML = window.innerWidth;
    document.getElementById("width_ems").innerHTML = window.innerWidth / parseFloat($("body").css("font-size"));
  };
</script> 
```

它是使用上面添加到链接教程中的[窗口宽度测试代码](http://mobile.smashingmagazine.com/2013/07/22/simple-responsive-images-with-css-backgrounds/)中的答案组合在一起的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T02:26:42.937

可以计算它，但`em`它不是一个“简单”单位，`px`因为它取决于字体选择（即字体系列、样式（粗体、斜体等）和字体大小的组合）。当然字体大小本身可以是相对的（例如，如果您给字体一个`em`、`ex`或百分比大小，那么该`px`字体的计算高度来自父元素的大小）。

要获得`em`页面的宽度，您可以像这样进行转换（警告：伪代码）：

```
// For this to work reliably, size should be in px, pt, or mm.
function getWindowWidthInEm(fontFamily, style, size) {
    var box = document.createElement("span");
    box.innerText = "M";
    box.style.fontFamily = fontFamily;
    box.style.fontSize   = size;
    box.style.fontWeight = style is bold;
    box.style.fontStyle  = style is italic;

    var body = document.getElementsByTagName("body")[0];
    body.appendChild( box );

    var emInPx = box.getComputedStyle().width;

    body.removeChild( box );

    var windowPx = window.width;
    return windowx / emInPx;
} 
```

* * *

## 回答 #5

> 赞同：-20
> 
> 时间：2012-09-03T03:58:22.347

很简单，因为我们知道`1em = 16px`

```
var window_width_em = 1/16 * window_width_px; 
```

# php - MySQL左连接，SQL语法错误

> ID：12241252
> 
> 赞同：0
> 
> 时间：2012-09-03T02:12:40.153
> 
> 标签：php, mysql, left-join, syntax-error

我对 php left join 有一些问题

php给我写一个错误

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 12 行的“FROM ipb_topics t LEFT JOIN ipb_posts p ON p.topic_id = t.tid LEFT JOIN ipb_at”附近使用正确的语法

代码是

```
$query = mysql_query("
SELECT

t.tid as tid,
t.title as title,
t.start_date as start_date,
t.title_seo as title_seo,

p.post as post,

a.attach_location as attach_location,

FROM ".$forum_prefix."topics t
LEFT JOIN ".$forum_prefix."posts p ON p.topic_id = t.tid
LEFT JOIN ".$forum_prefix."attachments a ON a.attach_rel_id = t.tid

GROUP BY t.tid
") or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T02:13:20.940

删除字段子句末尾的逗号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T02:30:56.727

```
$查询 = mysql_query("
选择

t.tid 为 tid，
t.title 作为标题，
t.start_date 作为 start_date，
t.title_seo 作为title_seo，

p.post 作为帖子，

a.attach_location 作为 attach_location

FROM ".$forum_prefix."主题 t
LEFT JOIN ".$forum_prefix."posts p ON p.topic_id = t.tid
LEFT JOIN ".$forum_prefix."attachments a ON a.attach_rel_id = t.tid

按 t.tid 分组
") 或死(mysql_error());

```

尝试这个！！不要忘记转义您的数据。不要使用`mysql_*`使用`mysqli_*`或`PDO`参考[链接](http://php.net/manual/en/book.mysqli.php)

# python - 设置属性和 on_done 方法

> ID：12241253
> 
> 赞同：0
> 
> 时间：2012-09-03T02:12:51.927
> 
> 标签：python, sublimetext2

在这个 sublimetext 插件的 python 代码中：

```
class PersonCommand(sublime_plugin.TextCommand):
    def run(self, edit):
        self.name = None
        self.view.window().show_input_panel("Name", "", self.on_done, None, None)
        print "run: ", self.name

    def on_done(self, value):
        self.name = value
        print "on_done: ", self.name 
```

如果我在输入面板中输入“杰克”，我会期望

```
run: Jack 
```

但是我*实际上*得到：

```
run: None
on_done: Jack 
```

为什么我会得到这个结果？我可以使用输入面板作为提示来读取参数吗？如果可以，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T02:53:44.070

在这种情况下，该`on_done`函数是一个回调。当这条线运行时：

```
 self.view.window().show_input_panel("Name", "", self.on_done, None, None) 
```

它*不会立即调用 on_done*。该函数只是设置`self.on_done`为输入值后将调用的方法。这意味着后面的行`print "run: ", self.name`, 将在输入任何值之前出现。

该函数`on_done`稍后发生（可能是几秒钟或几分钟后，具体取决于用户输入值的时间）。只有这样，值才会被设置并且`print "on_done: ", self.name`语句才会发生。

# javascript - 有谁知道是否有明确支持 Ember.JS 的 IDE？

> ID：12241254
> 
> 赞同：10
> 
> 时间：2012-09-03T02:12:55.160
> 
> 标签：javascript, backbone.js, ember.js, ide

想知道是否有一个完全支持 Ember.JS 的优秀 IDE，而不仅仅是基本的 JS。或者是否有任何命令行工具或代码生成工具，例如 Grunt for Backbone.JS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:27:31.820

对于 EmberJS 的智能感知，我没有 IDE，但[Sublime](http://www.sublimetext.com/2)通常是 Javascript 开发的首选程序。使用几个包和一个 jslinter，您可以立即破解。

在编辑器中，有一些叫做“片段”的东西可以让你输入一个组合键，大部分代码会立即为你填写。例如，[这个 repo](https://github.com/arturgrigor/sublime-emberjs-snippets/tree/master/Handlebars)有一个集合，你可以添加到你的 Sublime 应用程序中来帮助你开始。除此之外，没有什么能像拥有一个自动 Jslinter（或 jshinter，取决于你有多讨厌 Crockford）和一组漂亮的代码片段那样帮助你更快、更轻松地编写代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T21:57:51.183

使用[ember-rails](https://github.com/emberjs)，您可以生成 Ember.js 应用程序结构以及控制器、模型等。在[此处](https://github.com/emberjs/ember-rails/tree/master/lib/generators/ember)找到生成器。

[Bower](https://github.com/twitter/bower)还有一个 ember.js 包。看看[Yeoman](http://yeoman.io/)，它使用 Bower 进行包管理。

# emacs - emacs 作为屏幕/tmux 替代品 - 从终端分离

> ID：12241255
> 
> 赞同：18
> 
> 时间：2012-09-03T02:13:09.247
> 
> 标签：emacs, gnu-screen, tmux

众所周知，emacs 可以用作终端仿真器（当它本身在终端仿真器中运行时），因此使其成为更传统的终端在终端方法的有效替代方案，例如`tmux`or `screen`。然而，有一件事情可以用后者轻松完成，`term`到目前为止，我在 emacs 中没有找到替代品。

两者都`tmux`可以`screen`从*终端分离，*并且在其窗口中运行的所有任务继续在后台运行。默认情况下使用*Cb, d* in`tmux`和*Ca, d* in`screen`完成。`tmux attach`稍后，我可以通过运行类似or的东西返回（重新连接）到我已分离的终端`screen -r`。此外，在这两个终端多路复用器中运行的会话是持久的——即，如果我连接到某个远程终端并且连接失败，我可以重新连接并重新连接到终端而不会丢失我的任何工作——这在网络故障的情况下真的很有帮助偶尔会中断 ssh 连接的链接。

是否有类似的东西可用于 emacs？基本上，我希望能够：

*   从 emacs 中分离并让它在后台运行，所有子进程都在`term`缓冲区中运行。
*   稍后重新连接它，发现我所有的进程都在运行。
*   收到 SIGHUP 后自动从终端分离 emacs。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-03T02:31:14.980

使用 emacs 守护进程：

```
$ emacs --daemon 
```

然后只需启动一个新框架，相当于`screen -x`：

```
$ emacsclient -t 
```

# spring - 在spring mvc报告java.lang.ClassNotFoundException的servlet.xml中定义bean

> ID：12241258
> 
> 赞同：0
> 
> 时间：2012-09-03T02:13:20.537
> 
> 标签：spring, jakarta-ee, spring-mvc, tomcat6, tomcat7

我在 xml 中为 DispatcherServlet 定义了 bean。而 bean，foodService，是接口的实现，FoodServiceImpl，IFoodService。所以，我定义了 web.xml 和 foodcenter-servlet.xml，如下所示： web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
id="WebApp_ID" version="2.5">
<display-name>FCAS</display-name>
<servlet>
    <servlet-name>foodcenter</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>foodcenter</servlet-name>
    <url-pattern>*.json</url-pattern>
</servlet-mapping>

</web-app> 
```

foodcenter-servlet.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation=" 
http://www.springframework.org/schema/beans 
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
http://www.springframework.org/schema/context 
http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<context:annotation-config />

<!-- Controller 类的注解标识 -->
<context:component-scan base-package="com.liuxi.foodcenter.controller" />

<!--这个ViewResolver 的具体原来没细究，不过CV战士们 中的一员，这样用是没问题的(参考官文) -->
<bean
    class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
    <property name="mediaTypes">
        <map>
            <entry key="json" value="application/json" /> <!-- 告诉视图解析器 返回的类型为json 格式 -->
        </map>
    </property>
    <property name="defaultViews">
        <list>
            <!-- 这个 View 比较重要,ModelAndView 里的数据变成JSON -->
            <bean
                class="org.springframework.web.servlet.view.json.MappingJacksonJsonView">
            </bean>
        </list>
    </property>
</bean>

<!--真正的项目，业务Bean 有专门对应的配置文件，这里为了简单起见，就写在这里了 -->
<bean id="foodService" class="com.liuxi.food.service.FoodServiceImpl" />

</beans> 
```

但是，当我在服务器上运行它时，tomcat 6.0，它提示以下错误：

```
2012-9-3 9:58:57 org.springframework.web.servlet.FrameworkServlet initServletBean
严重: Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.web.servlet.view.ContentNegotiatingViewResolver#0' defined in ServletContext resource [/WEB-INF/foodcenter-servlet.xml]: Initialization of bean failed; nested exception is org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [com.liuxi.food.service.FoodServiceImpl] for bean with name 'foodService' defined in ServletContext resource [/WEB-INF/foodcenter-servlet.xml]; nested exception is java.lang.ClassNotFoundException: com.liuxi.food.service.FoodServiceImpl
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469)
    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1206)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1026)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4421)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4734)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [com.liuxi.food.service.FoodServiceImpl] for bean with name 'foodService' defined in ServletContext resource [/WEB-INF/foodcenter-servlet.xml]; nested exception is java.lang.ClassNotFoundException: com.liuxi.food.service.FoodServiceImpl
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1262)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:576)
    at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1331)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doGetBeanNamesForType(DefaultListableBeanFactory.java:341)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:320)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:420)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:414)
    at org.springframework.context.support.AbstractApplicationContext.getBeansOfType(AbstractApplicationContext.java:1163)
    at org.springframework.beans.factory.BeanFactoryUtils.beansOfTypeIncludingAncestors(BeanFactoryUtils.java:228)
    at org.springframework.web.servlet.view.ContentNegotiatingViewResolver.initServletContext(ContentNegotiatingViewResolver.java:260)
    at org.springframework.web.context.support.WebApplicationObjectSupport.initApplicationContext(WebApplicationObjectSupport.java:76)
    at org.springframework.context.support.ApplicationObjectSupport.setApplicationContext(ApplicationObjectSupport.java:73)
    at org.springframework.context.support.ApplicationContextAwareProcessor.invokeAwareInterfaces(ApplicationContextAwareProcessor.java:117)
    at org.springframework.context.support.ApplicationContextAwareProcessor.postProcessBeforeInitialization(ApplicationContextAwareProcessor.java:92)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:394)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1448)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    ... 32 more
Caused by: java.lang.ClassNotFoundException: com.liuxi.food.service.FoodServiceImpl
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at org.springframework.util.ClassUtils.forName(ClassUtils.java:258)
    at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:417)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doResolveBeanClass(AbstractBeanFactory.java:1283)
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1254)
    ... 48 more
2012-9-3 9:58:57 org.apache.catalina.core.ApplicationContext log
严重: StandardWrapper.Throwable
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.web.servlet.view.ContentNegotiatingViewResolver#0' defined in ServletContext resource [/WEB-INF/foodcenter-servlet.xml]: Initialization of bean failed; nested exception is org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [com.liuxi.food.service.FoodServiceImpl] for bean with name 'foodService' defined in ServletContext resource [/WEB-INF/foodcenter-servlet.xml]; nested exception is java.lang.ClassNotFoundException: com.liuxi.food.service.FoodServiceImpl
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469)
    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1206)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1026)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4421)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4734)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [com.liuxi.food.service.FoodServiceImpl] for bean with name 'foodService' defined in ServletContext resource [/WEB-INF/foodcenter-servlet.xml]; nested exception is java.lang.ClassNotFoundException: com.liuxi.food.service.FoodServiceImpl
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1262)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:576)
    at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1331)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doGetBeanNamesForType(DefaultListableBeanFactory.java:341)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:320)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:420)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:414)
    at org.springframework.context.support.AbstractApplicationContext.getBeansOfType(AbstractApplicationContext.java:1163)
    at org.springframework.beans.factory.BeanFactoryUtils.beansOfTypeIncludingAncestors(BeanFactoryUtils.java:228)
    at org.springframework.web.servlet.view.ContentNegotiatingViewResolver.initServletContext(ContentNegotiatingViewResolver.java:260)
    at org.springframework.web.context.support.WebApplicationObjectSupport.initApplicationContext(WebApplicationObjectSupport.java:76)
    at org.springframework.context.support.ApplicationObjectSupport.setApplicationContext(ApplicationObjectSupport.java:73)
    at org.springframework.context.support.ApplicationContextAwareProcessor.invokeAwareInterfaces(ApplicationContextAwareProcessor.java:117)
    at org.springframework.context.support.ApplicationContextAwareProcessor.postProcessBeforeInitialization(ApplicationContextAwareProcessor.java:92)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:394)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1448)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    ... 32 more
Caused by: java.lang.ClassNotFoundException: com.liuxi.food.service.FoodServiceImpl
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at org.springframework.util.ClassUtils.forName(ClassUtils.java:258)
    at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:417)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doResolveBeanClass(AbstractBeanFactory.java:1283)
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1254)
    ... 48 more
2012-9-3 9:58:57 org.apache.catalina.core.StandardContext loadOnStartup
严重: Servlet /FCAS threw load() exception
java.lang.ClassNotFoundException: com.liuxi.food.service.FoodServiceImpl
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at org.springframework.util.ClassUtils.forName(ClassUtils.java:258)
    at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:417)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doResolveBeanClass(AbstractBeanFactory.java:1283)
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1254)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:576)
    at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1331)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doGetBeanNamesForType(DefaultListableBeanFactory.java:341)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:320)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:420)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:414)
    at org.springframework.context.support.AbstractApplicationContext.getBeansOfType(AbstractApplicationContext.java:1163)
    at org.springframework.beans.factory.BeanFactoryUtils.beansOfTypeIncludingAncestors(BeanFactoryUtils.java:228)
    at org.springframework.web.servlet.view.ContentNegotiatingViewResolver.initServletContext(ContentNegotiatingViewResolver.java:260)
    at org.springframework.web.context.support.WebApplicationObjectSupport.initApplicationContext(WebApplicationObjectSupport.java:76)
    at org.springframework.context.support.ApplicationObjectSupport.setApplicationContext(ApplicationObjectSupport.java:73)
    at org.springframework.context.support.ApplicationContextAwareProcessor.invokeAwareInterfaces(ApplicationContextAwareProcessor.java:117)
    at org.springframework.context.support.ApplicationContextAwareProcessor.postProcessBeforeInitialization(ApplicationContextAwareProcessor.java:92)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:394)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1448)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469)
    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1206)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1026)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4421)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4734)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) 
```

附言：

1.  我试过其他的tomcat版本，比如5和7，但它也失败了

2.  服务器和项目使用同一个jdk

# spring-mvc - 获取 mybatis 中插入记录的自动生成密钥

> ID：12241260
> 
> 赞同：4
> 
> 时间：2012-09-03T02:13:31.053
> 
> 标签：spring-mvc, mybatis

我正在使用 spring mvc + mybatis + mysql 的 Web 应用程序下工作。

而且我发现我无法为最后插入的记录获取自动生成的密钥（我已经搜索了很多）。

这是相关配置（以模型'Post'为例）：

### 春天.xml：

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    //omitted
</bean>

<bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="configLocation" value="config.xml" />
</bean>

<bean id="sqlSession" class="org.mybatis.spring.SqlSessionTemplate">
    <constructor-arg index="0" ref="sqlSessionFactory" />
</bean> 
```

### mybatis 配置.xml

```
<configuration>
    <typeAliases>
        <typeAlias alias="Post" type="com.king.model.Post" />
    </typeAliases>
    <mappers>
        <mapper resource="com/king/model/PostMapper.xml" />
    </mappers>
</configuration> 
```

### PostMapper.xml：

```
<mapper namespace="com.king.model.PostMapper">
    <insert id="insert" parameterType="Post">
        insert into posts (title,body,created_at,updated_at) values (#{title},#{body},#{createDate},#{updateDate})
    </insert>
</mapper> 
```

### 道：

```
public abstract class AbstractSimpleDaoImpl<T> extends SqlSessionDaoSupport{
    @Override
    public int add(T entity) {
        return getSqlSession().insert(getMapperNamespace() + ".insert", entity);
    }

    protected abstract String getMapperNamespace();
}

public class PostDao extends AbstractSimpleDaoImpl<Post> {
    @Override
    protected String getMapperNamespace() {
        return "com.king.model.PostMapper";
    }
} 
```

* * *

但是，当我将新帖子插入数据库时​​：

```
postDao.add(post); 
```

我无法为插入的帖子获取生成的 ID。我总是得到 1。我知道这是受行影响的数字。

另外，我阅读了 mybatis 指南，并尝试了这个：

```
<insert id="insert" parameterType="Post" useGeneratedKeys="true" keyProperty="id"> 
```

但似乎，这不起作用。

如何解决？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-06T09:13:33.110

事实上，以下工作：

```
<insert id="insert" parameterType="Post" useGeneratedKeys="true" keyProperty="id">

postDao.add(post); 
```

将像以前一样返回 1，但`post.getId()`会得到密钥。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-08-17T00:04:40.167

这也可以使用注释来完成。

```
final String INSERT = "insert into posts (title,body,created_at,updated_at) values (#{title},#{body},#{createDate},#{updateDate})";

@Insert(INSERT)
@Options(useGeneratedKeys = true, keyProperty = "id", keyColumn = "id")
void insert(Post post) throws Exception; 
```

设置`keyProperty`为 Java 变量名。

设置`keyColumn`为数据库中的列名。

插入后，`post.getId()`会有你生成的ID。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T10:18:36.743

尝试使用以下代码；我将**keyColumn**字段添加到您的代码中：

```
<insert id="insert" parameterType="Post" useGeneratedKeys="true" keyProperty="id" keyColumn="id"> 
```

或者，如果您使用的是*PostgreSql*：

```
<insert id="insert" parameterType="Post" useGeneratedKeys="true" keyProperty="id" keyColumn="id"> 
<selectKey keyProperty="id" resultType="java.lang.Integer">
        SELECT
        currVal('your_tbl_seq') as id
    </selectKey> </insert> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-12T23:26:01.653

这将适用于使用注释的 Spring Boot，并`id`在原始问题中获取作为返回值。

```
@Insert("insert into sources (host, created_at) values (#{host}, now())")
@SelectKey(statement="select LAST_INSERT_ID()", keyProperty="id", before=false, resultType=long.class)
long create(@Param("host") String host); 
```

然后`long id = sourceMapper.create("abc");`将返回您的主键。

# python - 检查一个数字是否以 5 结尾？

> ID：12241264
> 
> 赞同：2
> 
> 时间：2012-09-03T02:14:07.947
> 
> 标签：python

我正在尝试定义一个接受 2 个参数的函数，将它们相加，如果两个参数的总和以 5 结尾，则报告 2。如果它不以 5 结尾，则返回 8。

有任何想法吗？

我正在考虑做一个 if 语句，但我对如何检查一个数字是否以 5 结尾（或者是 5）感到困惑。

感谢您的帮助，尝试自学编程是如此困难但又如此有益:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T02:17:43.753

## 解决方案

我的回答假设您正在检查整数（从您的问题来看这似乎很合理）：

```
def sum_ends_with_5(a, b):
    """
    Checks if sum ends with "5" digit.
    """
    result = a + b
    return 2 if result % 10 == 5 else 8 
```

或更灵活（带有任意数量的参数）：

```
def sum_ends_with_5(*args):
    """
    Checks if sum ends with "5" digit.
    """
    result = sum(args)
    return 2 if result % 10 == 5 else 8 
```

## 它是如何工作的（又名测试）

该函数的行为如下：

```
>>> sum_ends_with_5(5)
2
>>> sum_ends_with_5(3)
8
>>> sum_ends_with_5(2, 8)
8
>>> sum_ends_with_5(7, 8)
2
>>> sum_ends_with_5(10, 20, 3, 2)
2 
```

## 较短的版本

所以，如果你想以更短更灵活的方式编写它，你可以这样做：

```
def sum_ends_with_5(*args):
    return 2 if sum(args) % 10 == 5 else 8 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T02:15:59.143

当且仅当数字可以被 5 整除但不能被 10 整除时，数字以 5 结尾。您可以使用模算术轻松检查这些条件。更一般地，您可以通过将该数字的值与数字进行比较来检查数字是否以数字结尾`mod 10`。

```
num = 1234
isDivisibleByFive = num % 10 == 5 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-03T02:17:52.603

将模数乘以 10 并检查它是否为 5。

```
print num % 10 == 5 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-03T02:14:59.653

一种简单的方法是获取数字并将其转换为字符串并使用索引检查最后一位数字是否为 5：

例如，

```
n = 153
str(n)[-1] == '5':
False 
```

和

```
n = 155
str(155)[-1] == '5'
True 
```

因此，作为`if`-statement 的一部分：

```
if str(n)[-1] == `5`: 
   print "number ends in 5" 
else: 
   print "number did not end in 5" 
```

如果您只想检查被 5 整除（这与以 5 结尾不同），您可以使用 mod 操作。

但是您也可以修改 10 并检查余数 5 以确定数字 (int) 是否以 5 结尾。我的解决方案检查任何数字的最后一位数字（包括浮点数）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-03T02:42:05.990

我最喜欢 Tadeck 的解决方案，但还有另一种方法，我认为对于这个特定的用例不太好，但如果您的返回值需要遵循比简单的模运算更复杂的规则，它仍然可能有用。

```
def xlatVal (*nums):
    #            0 1 2 3 4 5 6 7 8 9
    lookupTbl = [8,8,8,8,8,2,8,8,8,8]
    return lookupTbl[sum(nums) % 10] 
```

虽然这些值仍然使用模数减少到一个范围，但这允许在该范围内进行任意转换。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-03T02:16:09.897

将其转换为字符串并检查最后一个字符：

```
str(num)[-1] == "5" 
```

# git - GIT 推送到由一台 gerrit 服务器托管的多个存储库

> ID：12241266
> 
> 赞同：1
> 
> 时间：2012-09-03T02:14:53.833
> 
> 标签：git, git-push, gerrit

我尝试过但未能从旧帖子中找到答案。因此，如果它已经存在，我很抱歉，我重新发布了这个问题。

我们有一个问题，我们有一个 gerrit 服务器托管多个 git 存储库。有时需要将相同的提交推送到两个或更多存储库，但并非总是如此。现在我们有一个问题，当我们尝试推送到第二个 repo 时，gerrit 抱怨其他提交中已经使用的更改 id。

有没有一种简单的方法可以将相同的更改推送到具有不同更改 ID 的多个存储库中？

或者如何创建一个新的变更ID？

Br，亚诺·S。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-21T15:18:32.653

如果要复制，可以使用gerrit复制。但这种情况全面发生。

现在 - 如果你想推送一个选择性的changeSet（自动）你可以完成changeset-merged hook。但是什么是保证没有合并冲突。

您将如何自动检测此提交是否适合推送，是否基于评论？

您最好的选择是创建 git 补丁并将其应用到下一个存储库

# database - 歌乐数据库

> ID：12241267
> 
> 赞同：1
> 
> 时间：2012-09-03T02:14:58.513
> 
> 标签：database, migration, odbc, clarion, tps

我在 Clarion 制作了一个非常古老的应用程序。我需要使用 ODBC 驱动程序从外部访问数据。问题是数据存储在 .DAT 和 .K0 文件中。据我所知，数据需要存储在 .TPS 文件中才能使用 de ODBC 驱动程序。有没有办法将数据迁移到 .TPS 文件而不是 .DAT 文件，并且让用户继续工作而不会注意到更改？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T00:21:25.410

您可以轻松地将数据复制/转换为另一种格式以用于 ODBC 或其他目的，但如果没有 Clarion 应用程序的源代码，您将无法切换程序使用的数据格式。

# matlab - 为什么我不能使 GPUvariable ？（无法使用 cudaMalloc 分配内存）

> ID：12241268
> 
> 赞同：0
> 
> 时间：2012-09-03T02:14:57.903
> 
> 标签：matlab, memory-management, cuda, gpu

我正在尝试在 ubuntu 下使用 GPUmat(MATLAB)。

对于我的系统，GPUstart 运行良好，没有任何错误消息，如下所示：

```
Starting GPU
- GPUmat version: 0.280
- Required CUDA version: 4.2
There is 1 device supporting CUDA
CUDA Driver Version:                           4.20
CUDA Runtime Version:                          3.0

Device 0: "GeForce GT 520"
  CUDA Capability Major revision number:         2
  CUDA Capability Minor revision number:         1
  Total amount of global memory:                 1073283072 bytes
  - CUDA compute capability 2.1
...done
- Loading module EXAMPLES_CODEOPT
- Loading module EXAMPLES_NUMERICS
  -> numerics21.cubin
- Loading module NUMERICS
  -> numerics21.cubin
- Loading module RAND 
```

但是当我尝试创建像 ' a = GPUdouble(rand(2)); 这样的变量时 ' 出现以下错误信息

```
Error using mxNumericArrayToGPUtypePtr
Unable to allocate memory using cudaMalloc

Error in GPUdouble (line 52)
            p.slot = mxNumericArrayToGPUtypePtr(p,
            double(A)); 
```

我无法猜测为什么会发生这种情况。你能给我一些建议来解决这个问题吗？我非常感谢您的帮助。

ps) 第一次GPUstart由于库问题无法正常工作。所以我根据GPUmat开发者的建议将CUDA 4.2的所有库都移到了matlab库文件夹中。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-11T03:52:00.270

您安装了不兼容的 CUDA 运行时版本。GPUStart 告诉您“所需的 CUDA 版本：4.2”，但您已安装 CUDA 3.0 工具包。

您需要将 CUDA 工具包更新到受支持的版本。

# android - Android空指针，我应该把活动代码放在哪里？

> ID：12241270
> 
> 赞同：0
> 
> 时间：2012-09-03T02:15:05.720
> 
> 标签：android

我在主activity中设置了一个带有三个选项卡的交换卡，第三个选项卡中有一个listview，点击listview会弹出时间选项对话框。

```
public void onSetWarn(){
        LayoutInflater factoryInflater = LayoutInflater.from(MainActivity.this);
        final View dialogView = factoryInflater.inflate(R.layout.dialog, null);
        AlertDialog dialog = new AlertDialog.Builder(MainActivity.this).setTitle("set")
                .setView(dialogView)
                .setPositiveButton("confirm", new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {
                        Toast.makeText(getApplicationContext(), "set success！", Toast.LENGTH_SHORT).show();
                    }
                })
                .setNegativeButton("cancel", new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {

                    }
                }).create();
        /*
        timePicker = (TimePicker) this.findViewById(R.id.TimePicker1);
        timePicker.setIs24HourView(true);
        */
        dialog.show();
    } 
```

我应该把这段代码放在哪里

```
timePicker = (TimePicker) this.findViewById(R.id.TimePicker1);
timePicker.setIs24HourView(true); 
```

我尝试了几个地方，但所有的 NULL 指针错误。

对话框.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >
    <TextView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="reminder the time"
        />
    <TimePicker 
        android:id="@+id/TimePicker1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        />
      <TextView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="remind way"
        />
      <LinearLayout 
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          >
      <CheckBox 
          android:id="@+id/checkBox1"
          android:layout_width="fill_parent"
          android:layout_height="wrap_content"
          android:text="ring"
          />
      <CheckBox 
          android:id="@+id/checkBox2"
          android:layout_width="fill_parent"
          android:layout_height="wrap_content"
          android:text="shake"
          />
      </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T02:21:47.220

您应该使用`dialogView.findViewById(R.id.TimePicker1)`而不是`this.findViewById(R.id.TimePicker1)`。那是因为 TimePicker1 存在于 dialogView 的视图树中（您通过 LayoutInflator 从 dialog.xml 加载它）

# asp.net - 使用 GData .NET Analytics API 2.4 从注册帐户中获取特定的 ProfileId

> ID：12241277
> 
> 赞同：1
> 
> 时间：2012-09-03T02:16:43.620
> 
> 标签：asp.net, gdata, google-analytics-api

在过去的条目中，我想出了如何检索某个配置文件 id 的指标数据： [使用 GData .NET Analytics API 时引发的异常](https://stackoverflow.com/questions/12113204/exception-thrown-when-using-gdata-net-analytics-api)

现在我想在 Google Analytics 中检索与我的帐户列表中的注册域名匹配的某个配置文件 ID，这在以前很容易，但在 Google 上一次升级到 Management/Core Reporting API 3.0 之后，旧的 2.3 提要已关闭并且 AccountsFeed 相关代码未按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T02:16:43.620

使用此处发布的建议：[http ://code.google.com/p/gdata-issues/issues/detail?can=2&start=0&num=100&q=&colspec=API%20ID%20Type%20Status%20Priority%20Stars%20Summary&groupby= &sort=&id=2955](http://code.google.com/p/gdata-issues/issues/detail?can=2&start=0&num=100&q=&colspec=API%20ID%20Type%20Status%20Priority%20Stars%20Summary&groupby=&sort=&id=2955)，我想出了这段代码来完成我需要的工作：

```
Imports Google
Imports Google.Analytics
Imports Google.GData.Analytics
Imports System.Collections.Generic
Imports System.Collections

Public Function GetProfileId(ByVal DomainText As String) As String

Dim Ids As String = String.Empty
Dim service As GData.Analytics.AnalyticsService = New GData.Analytics.AnalyticsService("MyAnalyticsService")
service.setUserCredentials(username, pass)

//Dim factory As GData.Client.GDataGAuthRequestFactory = CType(service.RequestFactory, GData.Client.GDataGAuthRequestFactory)
//factory.AccountType = "GOOGLE" 
//factory.UseSSL = True
//service.RequestFactory = factory    

Dim aF As DataFeed = service.Query(New DataQuery("https://www.googleapis.com/analytics/v2.4/management/accounts"))
Dim webPropsUrl As String = "" 
For Each o As GData.Client.AtomEntry In aF.Entries
     //webproperties
      If o.Title.Text.Contains(DomainText) Then
           webPropsUrl = o.Links.Item(1).HRef.Content
           Exit For
      End If
Next

Dim wpF As DataFeed = service.Query(New DataQuery(webPropsUrl))
Dim profileFeedUrl As String = "" 
For Each entry As DataEntry In wpF.Entries
    //profiles
     profileFeedUrl = entry.Links.Item(2).HRef.Content
     Exit For
Next

Dim prF As DataFeed = service.Query(New DataQuery(profileFeedUrl))
Dim profileUrl As String = "" 
For Each profd As DataEntry In prF.Entries
     profileUrl = profd.Links.Item(0).HRef.Content
     Exit For
Next

Dim profileId As String = ""
profileId = profileUrl.Split("/")(profileUrl.Split("/").Length - 1)

Return profileId

End Function 
```

# mongodb - mongoimport 没有正确导入对象

> ID：12241281
> 
> 赞同：2
> 
> 时间：2012-09-03T02:17:26.247
> 
> 标签：mongodb, mongoid, mongodb-.net-driver

在 Mongodb v2.2 中，当我尝试将一个像这样的简单 json 文档文件从我的 .json 文件导入到一个空集合中时，我导入了 13 个对象。这就是我正在做的事情。

这是数据（我缩短了字段名称以保护数据）：

```
[
{ 
    "date" : ISODate("2012-08-01T00:00:00Z"), 
    "start" : ISODate("2012-08-01T00:00:00Z"), 
    "xxx" : 1, 
    "yyt" : 5, 
    "p" : 6, 
    "aam" : 20, 
    "dame" : "denon", 
    "33" : 10, 
    "xxt" : 8, 
    "col" : 3, 
    "rr" : [   
        { "name" : "Plugin 1", "count" : 1 },  
        { "name" : "Plugin 2", "count" : 1 },  
        { "name" : "Plugin 3", "count" : 1 }   
    ], 
    "xkx" : { "y" : 0, "n" : 1 }, 
    "r" : { "y" : 0, "n" : 1 }, 
    "po" : { "y" : 0, "n" : 1 }, 
    "pge" : { "posts" : 0, "pages" : 1 }, 
    "pol" : { "y" : 0, "n" : 1 }, 
    "lic" : { "y" : 0, "n" : 1 }, 
    "count" : 30, 
    "tx" : [ 
        { "zone" : -7, "count" : 1 } 
    ], 
    "yp" : "daily", 
    "ons" : [ 
        { "version" : "9.6.8", "count" : 1 } 
    ], 
    "ions" : [
        { "version" : "10.0.3", "count" : 1 } 
    ] 
}
] 
```

使用此命令：

```
mongoimport --db development_report --collection xxx --username xxx --password xxx --file /Users/Alex/Desktop/daily2.json --type json --jsonArray --stopOnError --journal 
```

我得到了这个奇怪的回应：

```
Mon Sep  3 12:09:12 imported 13 objects 
```

这 13 个新文档最终出现在集合中，而不是一个：

```
{ "_id" : ObjectId("5044114815e24c08bcdc988e") }
{ "_id" : ObjectId("5044114815e24c08bcdc988f"), "name" : "Plugin 1", "count" : 1 }
{ "_id" : ObjectId("5044114815e24c08bcdc9890"), "name" : "Plugin 2", "count" : 1 }
{ "_id" : ObjectId("5044114815e24c08bcdc9891"), "name" : "Plugin 3", "count" : 1 }
{ "_id" : ObjectId("5044114815e24c08bcdc9892"), "y" : 0, "n" : 1 }
{ "_id" : ObjectId("5044114815e24c08bcdc9893"), "y" : 0, "n" : 1 }
{ "_id" : ObjectId("5044114815e24c08bcdc9894"), "y" : 0, "n" : 1 }
{ "_id" : ObjectId("5044114815e24c08bcdc9895"), "posts" : 0, "pages" : 1 }
{ "_id" : ObjectId("5044114815e24c08bcdc9896"), "y" : 0, "n" : 1 }
{ "_id" : ObjectId("5044114815e24c08bcdc9897"), "y" : 0, "n" : 1 }
{ "_id" : ObjectId("5044114815e24c08bcdc9898"), "zone" : -7, "count" : 1 }
{ "_id" : ObjectId("5044114815e24c08bcdc9899"), "version" : "9.6.8", "count" : 1 }
{ "_id" : ObjectId("5044114815e24c08bcdc989a"), "version" : "10.0.3", "count" : 1 } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T04:06:15.963

您遇到的问题是文档开头的两个 ISODate 字段。

JSON 没有任何“日期”类型，因此它不处理文档中的 ISODate 字段。您需要像这样转换这些：

```
[
{ 
"date" : { "$date" : 1343779200000 }, 
"start" : { "$date" : 1343779200000 },
... 
```

您的导入将起作用。

出现这种情况的原因是 MongoDB 处理的类型比 JSON 规范中可用的类型多。[您可以在文档](http://www.mongodb.org/display/DOCS/Import+Export+Tools#ImportExportTools-Example:ImportingInterestingTypes)中查看更多信息。还有一张公开票让 MongoImport 处理 MongoDB 在[这里](https://jira.mongodb.org/browse/SERVER-5675)所做的所有格式，更多细节[在这里](https://jira.mongodb.org/browse/SERVER-5543)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T04:04:18.263

这真是令人沮丧；我无法使用导入工具快速到达任何地方，因此我使用`load()`mongo 客户端中的函数来加载插入我的记录的脚本。

```
> load('/Users/Alex/Desktop/daily.json'); 
```

我显然不得不修改 json 文件以包含如下插入命令：

```
>db.mycollection.insert(
    { DOCUMENT 1 },
    ...
    { DOCUMENT N }
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T13:22:03.140

这真的很晚，但如果它可以帮助其他人 - 你不应该传递 JSON 数组。只需每行列出 1 个 JSON 文档，每行将创建一个单独的文档。下面的文件将插入 2 个文档：

```
{ "date" : { "$date": 1354320000000 }, "xxx" : 1, "yyt" : 5, ... }
{ "date" : { "$date": 1354320000000 }, "xxx" : 2, "yyt" : 6, ... } 
```

# php - 为每个实际用户创建用户？

> ID：12241282
> 
> 赞同：1
> 
> 时间：2012-09-03T02:17:29.627
> 
> 标签：php, mysql, scalability

我正在努力让我曾经很温馨的网站能够容纳两个以上的用户。是否可以为每个在我的网站注册的人创建一个新的 MySQL 用户，运行

```
CREATE USER $userName [IDENTIFIED BY [PASSWORD] '$userPass'] 
```

每次有人注册？然后我会`mysql_connect()`以他们的名义拨打电话。

或者，做类似的事情是否有好处/注意事项

```
 CREATE USER genericSiteUser [IDENTIFIED BY [PASSWORD] 'sitePass'] 
```

并且只是放置`$userName`一个专栏来跟踪谁留下了什么评论等？或者有没有比这两种方法更好的第三种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T02:19:30.820

创建数据库用户是不可扩展的，也不安全。相反，您应该创建一个具有最低权限的数据库用户（理想情况下仅插入/选择/更新/删除），然后使用表来跟踪用户。

然后，您可以在评论表中创建用户表的外键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T03:40:26.787

否 - MySQL`CREATE USER`命令用于让用户访问 MySQL 数据库本身。它不应该被普通应用程序调用；实际上，良好的安全实践要求您的应用程序使用的数据库用户不应具有`SUPER`管理用户所需的权限。

由于您的应用程序的用户与用于访问 MySQL 的用户凭据完全无关，因此您的应用程序应该在数据库表中维护其用户的数据，就像您的应用程序使用的任何其他数据一样。

# c# - 返回 ICollection 比 List 有什么优势

> ID：12241287
> 
> 赞同：3
> 
> 时间：2012-09-03T02:18:08.957
> 
> 标签：c#, icollection

> **可能重复：**
> [List (of T) 和 Collection(of T) 有什么区别？](https://stackoverflow.com/questions/398903/what-is-the-difference-between-list-of-t-and-collectionof-t)

我有一个静态类和一个 getter 来返回我的列表集合。现在我阅读并被告知要返回 ICollection 而不是 List。与公共静态列表相比，使用公共静态 ICollection 有什么优势？

```
static class Storage
{
    private static List<string> store;

    static Storage()
    {
        store = new List<string>();
    }

    public static ICollection<string> getList
    {
        get
        {
            return store.AsReadOnly();
        }
    }

    public static void addString(string add)
    {
        store.Add(add);
    }

    public static void removeString(string remove)
    {
        store.Remove(remove);
    }

    public static void display()
    {
        foreach (String view in store)
        {
            Console.WriteLine(view);
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T03:30:05.127

*   `IEnumerable<T>`提供对一系列`T`对象上的只进游标的访问
*   `ICollection<T>`提供与属性相同`IEnumerable<T>`的`Count`属性（意味着集合具有确定的结束）
*   `IList<T>`通过索引器 ( )提供对列表中任何元素的相同`ICollection<T>`但随机访问`list[5]`

`List<T>`实现以上所有。

使用更简单的接口作为参数或返回值的好处是它为调用者提供了更大的灵活性，并且可以帮助记录对象将如何使用（或打算在返回值的情况下使用）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T03:10:39.330

这是一种很好的做法，并且更易于维护。如果您使用接口而不是类型，那么您的代码不会硬编码为该类型 ( `List`)。

示例：假设您稍后决定更改您的`Storage`类以将数据保存在另一种类型的存储中（即数据库、XML 等）。您可能使用实体框架连接到数据库，或者您可能使用 LINQ-to-objects。

实际上，您可能需要考虑使用`IEnumerable`or `IEnumerable<string>`。这些类型非常适用于 LINQ 以及大多数其他类型的集合。因此，您可以转换到 LINQ，而无需更改返回类型并重新编写处理您的`Storage`类的所有代码。

而且，也许`string`也不是最好的选择？你在储存什么？也许您应该为要存储的对象创建一个类（即`Name`）。然后你会想要返回一个`IEnumerable<Name>`.

```
class Name
{
    public string Name { get; set; }
} 
```

稍后您可能想要添加对您的类的访问`FirstName`权限`LastName`：

```
class Name
{
    public string Name
        get
        {
            return string.Format("{0} {1}", FirstName, LastName);
        }

    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

通过使用`IEnumerable<Name>`，您不必更改任何使用代码来执行此操作——只要您支持`Name`类的原始接口，您就可以添加额外的功能而不会破坏任何东西。

现在，如果您迁移到不同的返回类型，您还应该考虑将所有处理的代码也迁移`Storage`到新类型。当您在代码中的任何地方“烘焙”存储类型时，您`List`会更加难以进行未来的更改。你现在可能不明白这一点，但是当你成为一个更好的程序员或发现自己在做未来的改变时，你会看到使用允许改变底层类型的接口的好处。当您选择对象类型并在第一个修订版中容纳它们时，请尝试预测未来的可能性，这样您以后添加东西时就不会头疼了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T02:20:52.740

如果您要问为什么要在对象上返回接口，则接口描述了对象的作用和使用方式，而不是需要特定的实现。它使代码更通用。

如果您要问为什么是 Collection 而不是 List，则 Collection 并不意味着顺序，而 List 则意味着。技术术语是集合“较弱”，因此适用于更多情况。如果您不需要订购，请使用 Collection。否则，使用列表。

# .net - 正则表达式仅匹配普通字符加口音

> ID：12241290
> 
> 赞同：0
> 
> 时间：2012-09-03T02:18:39.370
> 
> 标签：.net, regex

下面是目前的比赛。
它匹配所有形式的字符，例如上面的双点。
角色的其他形式的术语是什么？
我只想要 az、AZ 和重音 az。
什么是正确的正则表达式？

```
(?:[-_'@\w]+) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T02:37:58.627

Use Unicode Category or Unicode Block:

```
\p{L}+ 
```

`\p{L}` stands for all letter characters.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T04:03:42.627

即使您只是尝试匹配英语中常用的单词，您仍然会以这种方式错过一些。例如，诗意的口音（“一个非常博学的人”）使用[重音](http://en.wikipedia.org/wiki/Grave_accent)，而不是您要求的尖锐口音。英语还因窃取其他语言的单词而臭名昭著，例如 vis-à-vis、厄尔尼诺现象、外观。你会很难用一些名字，例如 Chloë，以及偶尔使用像 coöperate 这样的传统拼写的人（我在技术博客中不止一次看到过这种拼写，人们往往会坚持不常见的细节）。

因此，您所要求的通常不是很有用，因此，您极不可能找到预先构建的东西来做到这一点。你只需要自己做这项工作。编写一个匹配 ASCII`A-Z`和的正则表达式，`a-z`然后手动列出您想要的所有其他表达式。

```
(?:[-_'@A-Za-záéíóúý]+) 
```

# twitter - twitter 开发者控制台和 twitter oauth 工具

> ID：12241293
> 
> 赞同：1
> 
> 时间：2012-09-03T02:19:17.043
> 
> 标签：twitter, twitter-oauth

我正在尝试从 twitter 获取请求令牌，但我遇到了一些问题。我使用 twitter4J 来查看它是否可以使用它并且确实可以，但是当我使用 twitter oauth 工具获取有效的授权标头，并将其复制并粘贴为[http://api.twitter.com/的授权标头时oauth/request_token](http://api.twitter.com/oauth/request_token)在 twitter 开发者控制台中我收到 401 错误（“无法验证签名和令牌”）。我已经为其他需要身份验证的请求尝试了相同的复制和粘贴方法，它可以工作，但它不适用于这个请求。关于发生了什么的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T16:27:44.803

Ok I figured it out! The problem was that the oauth access token is included in the header when you use the twitter oauth tool, with the access token being that of the twitter account related to your application. But if you are using the request_token url you shouldn't already have that, and that is why it throws the error. Thus the twitter oauth tool is useless for a request to this url.

# gnu-screen - 你怎么知道你当前连接的 gnu 屏幕会话

> ID：12241301
> 
> 赞同：4
> 
> 时间：2012-09-03T02:20:16.963
> 
> 标签：gnu-screen

我们在办公室经常使用 gnu screen，有时如果我不注意，我最终会迷失自己已经在哪个屏幕会话中。

所以我的问题是，你怎么知道你在哪个屏幕会话中？你有办法检查吗？

澄清：我需要知道的是，当我执行以下操作时：

```
~$ screen -ls 
```

我看到类似的东西：

```
There is a screen on:
    4732.work_Sept42012     (Attached)
    3551.web01  (Attached)
    5521.mysql01 (Attached)
    1255.tomcat05 (Detached)
    3326.oracle15 (Attached)

 1 Socket in /tmp/uscreens/S-icasimpan. 
```

我如何知道我当前是否连接到任何附加会话？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T16:30:29.250

除了`sessionname`screen 命令之外，screen`STY`还为其启动的进程设置环境变量。您可以从 shell 检查此变量的值：

```
$ echo $STY
5521.mysql01
$ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T09:19:08.867

### 更新：

`ctrl+a`,`:sessionname`可用于显示当前屏幕会话的名称。

### 以前的回复（有误解的问题）：

我也为此苦苦挣扎，直到遇到了这个奇妙的`hardstatus`功能。在我的这两行中，我`~/.screenrc`在屏幕会话的底部得到以下内容。

```
hardstatus alwayslastline
hardstatus string '%{= kG}%-Lw%{= kW}%50> %n*%f %t%{= kG}%+Lw%< %{= kG}%-=%D %M %d | %C:%s %A %1`%{-}' 
```

![在此处输入图像描述](../Images/9afeab2876072e0d513d88af2cfac092.png)

我在这里看到的是我的本地计算机上的一个屏幕会话，带有三个窗口（`bash`、、、`mumble`）`kalkyl`。在名为我的活动窗口`mumble`中，我通过 ssh 连接到另一台计算机，在该计算机上我正在运行另一个具有三个窗口（、、、`top`）`auto`的屏幕会话`bash`。我可以看到两个会话中的所有窗口并跟踪我的位置。

# java - 如何编译 Apache Thrift 定义文件？

> ID：12241306
> 
> 赞同：4
> 
> 时间：2012-09-03T02:20:58.607
> 
> 标签：java, thrift

我正在尝试编译一个 Apache Thrift 定义文件（在 Ubuntu 上）。我不断收到错误消息：`Could not open input file with realpath: Calculator.thrift`每当我进入`thrift -r --gen java Calculator.thrift`命令行时。我已经安装了 Thrift。我应该在哪里保存 .thrift 定义文件以便可以编译它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T08:52:08.870

在 thrift 安装附带的教程目录中，您应该看到以下 2 个`*.thrift`文件：

```
shared.thrift
tutorial.thrift 
```

在同一个目录中，您应该能够从 thrift IDL 文件生成/编译，如下所示：

```
thrift -r --gen java ./tutorial.thrift 
```

`gen-java`这应该在教程目录中创建一个子目录。

该`Calculator.thrift`文件实际上并不存在，计算器服务定义在`tutorial.thrift`. 该错误试图告诉您它无法找到该文件，这是正确的，因为它实际上并不存在:)

# java - 从给定的字符串表示在java中初始化日期对象

> ID：12241308
> 
> 赞同：2
> 
> 时间：2012-09-03T02:21:14.340
> 
> 标签：java, date, datetime, jodatime

我正在尝试以以下格式导入表示日期的给定字符串：

```
2007-03-12T00:00:00.000+01:00 
```

现在要创建一个新的日期对象，我使用 Joda Library 使用：

```
DateTime date = new DateTime(year, month, day, hour, minute, second); 
```

但是，我想在这里确保两件事：

*   如何在此日期时间上下文中处理 GTM +1？
*   无论如何，我不必解析这个字符串，并且可以直接用这个字符串初始化日期对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T03:31:08.047

```
DateTime date = DateTime.parse("2007-03-12T00:00:00.000+01:00"); 
```

正如其他答案中提到的那样，偏移量应该根据文档与字符串的其余部分一起解析。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T03:41:38.393

您可以使用 解析该日期字符串[`SimpleDateFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)，然后将该日期传递给 Joda 类：

```
String dateStr = "2007-03-12T00:00:00.000+01:00";
SimpleDateFormat sdf = new SimpleDateFormat( "yyyy-MM-dd'T'HH:mm:ss.SSSZ");
Date date = sdf.parse( dateStr.replaceAll(":(?=..$)", "")); // remove last colon 
```

请注意，您必须删除最后一个冒号，以便偏移量是[RFC 822 时区](http://www.w3.org/Protocols/rfc822/)，例如`+0100`，我使用[`String.replaceAll()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-03T02:32:41.267

您的两个问题都可以通过阅读课程[文档来回答](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html)

时区由类处理。寻找采用时区参数的[构造](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html#DateTime%28int,%20int,%20int,%20int,%20int,%20org.joda.time.DateTimeZone%29)函数。

是的，您可以使用字符串创建 DateTime 对象。[DateTime.parse(String)](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html#parse%28java.lang.String%29)可用于执行此操作。如果需要，还有另一种[方法](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html#parse%28java.lang.String,%20org.joda.time.format.DateTimeFormatter%29)可用于解析自定义日期格式。

# sqlite - SQLite 与 Cygwin 或独立于 SQLite 网站？

> ID：12241312
> 
> 赞同：0
> 
> 时间：2012-09-03T02:22:02.143
> 
> 标签：sqlite, cygwin

我想安装 SQLite。但我对 SQLite 数据库以及如何安装它一无所知。我不确定是从它的网站独立安装 SQLite*还是*通过 Cygwin 安装 SQLite。我已经在我的系统上安装了 Python 2.7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:54:23.407

有[适用于 Windows 的预编译二进制文件](https://www.sqlite.org/download.html)。

[SQLite 绑定](http://docs.python.org/library/sqlite3.html?highlight=sqlite#sqlite3)包含在 Python 中。

# asp.net-mvc - 如何在 ASP.NET MVC 项目中指定默认应用程序池？

> ID：12241314
> 
> 赞同：3
> 
> 时间：2012-09-03T02:22:28.587
> 
> 标签：asp.net-mvc, msdeploy, webdeploy

在我的 ASP.NET MVC 项目中，我添加了一个 parameters.xml 文件，如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<parameters>
  <parameter name="Application Pool" description="Application Pool Name" defaultValue="PreferredPool">
    <parameterEntry kind="DeploymentObjectAttribute"
                    scope="appHostConfig"
                    match="application/@applicationPool"/>
  </parameter>
</parameters> 
```

然后我继续构建部署包：

```
MSBuild.exe myproject.csproj /t:Package /p:PackageLocation="C:\packages\myproject.zip" 
```

然后我调用生成的批处理脚本 (myproject.deploy.cmd) 并将应用程序部署到本地 IIS 7 服务器。问题是，分配给应用程序的始终是默认应用程序池，而不是 parameters.xml 中指定的 PreferredPool。

我做错什么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T22:17:30.487

将 parameterEntry 的范围更改为“应用程序”：

```
<parameterEntry kind="DeploymentObjectAttribute" 
                scope="application" 
                 match="application/@applicationPool"/> 
```

# php - 显示来自外部公共目录（GD？）的动画 GIF

> ID：12241317
> 
> 赞同：0
> 
> 时间：2012-09-03T02:22:44.263
> 
> 标签：php, gd, gif, animated-gif

一旦用户将他们的图像上传到非公共文件夹（即在 htdocs 或 public_html 文件夹之外），我使用 GD 从该文件夹中获取图像。这一切都是为了安全，因为图像本身在未经处理的情况下永远不会显示。

问题在于动画 GIF，GD 只能通过仅显示其第一帧来显示。

我知道那里有一些课程可以将 GIF 分割成各自的帧并将它们“粘合”在一起，但我希望即时显示这些......

我不想创建一个新的动画 gif 并显示它，而是有一个 GD 脚本，它根据从位于公共文件夹之外的照片目录中获取的信息来渲染图像。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T21:10:46.820

如果您根本不处理图像，我只会返回带有正确标题的文件内容。

例如：

```
<?php 

$file = 'whatever.gif';

// Do whatever checks you want on permissions etc

header('Content-type: image/gif');
readfile($file);

?> 
```

Readfile 输出文件的内容，并且标题确保浏览器将其视为 gif 并显示它。因为你没有使用 GD，所以它仍然是动画的。

这种方法的问题是您需要知道每个文件的内容类型才能正确地为它提供服务。

[http://php.net/manual/en/function.readfile.php](http://php.net/manual/en/function.readfile.php)

# go - 在 OpenBSD 上编译 Golang 时“无法保留竞技场虚拟地址空间”

> ID：12241319
> 
> 赞同：0
> 
> 时间：2012-09-03T02:22:49.283
> 
> 标签：go

在使用命令“ksh all.bash”在 OpenBSD 上编译 golang 时出现错误“无法保留竞技场虚拟地址空间”（也尝试过 make.bash 但没有用）。这是输出：

```
$ ksh all.bash
# Building C bootstrap tool.
cmd/dist

# Building compilers and Go bootstrap tool for host, openbsd/386.
lib9
libbio
... (truncated)
pkg/go/doc
pkg/go/build
cmd/go
throw: runtime: cannot reserve arena virtual address space 
```

我尝试按照[http://code.google.com/p/go-wiki/wiki/OpenBSD](http://code.google.com/p/go-wiki/wiki/OpenBSD)上的说明进行操作，但也有可能我没有正确执行。任何提示将非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:30:02.447

似乎不是与“员工”组搞砸，而是更改“默认”部分的默认值解决了这个问题。

```
default:\
    :path=/usr/bin /bin /usr/sbin /sbin /usr/X11R6/bin /usr/local/bin /usr/local/sbin:\
    :umask=022:\
    :datasize-max=infinity:\
    :datasize-cur=infinity:\
    :maxproc-max=256:\
    :maxproc-cur=128:\
    :openfiles-cur=128:\
    :stacksize-cur=4M:\
    :localcipher=blowfish,6:\
    :ypcipher=old:\
    :tc=auth-defaults:\
    :tc=auth-ftp-defaults: 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T03:38:31.137

您的程序未能分配虚拟地址空间

[http://code.google.com/p/go/source/browse/src/pkg/runtime/malloc.goc#374](http://code.google.com/p/go/source/browse/src/pkg/runtime/malloc.goc#374)

我自己不使用 OpenBSD，不知道你的问题是什么。但是，如果您在此处插入一些打印输出，您可以尝试自己收集更多信息：

[http://code.google.com/p/go/source/browse/src/pkg/runtime/mem_openbsd.c#54](http://code.google.com/p/go/source/browse/src/pkg/runtime/mem_openbsd.c#54)

亚历克斯

# java - 使用支持通配符的 SimpleDateFormat 解析日期字符串（例如 *yyyy*MM*dd*hh*mm*ss）

> ID：12241320
> 
> 赞同：3
> 
> 时间：2012-09-03T02:22:54.953
> 
> 标签：java, wildcard, simpledateformat

首先，我想知道是否有一个类似于**SimpleDateFormat**但支持通配符的现有库？如果没有，最好的方法是什么？

我有这个问题，我需要匹配并从文件名中提取日期，但我似乎找不到适合这种情况的正确方法。虽然我承认下面的场景对于文件名根本不实用，但我仍然必须将它作为“假设条件”包含在内。

# **设想**

**文件名**：19882012ABCseptemberDEF03HIJ12KLM0156_249.zip，**模式**：*yyyy* MMM *dd* hh *mmss'_* .zip'

*   **预计日期：** 2012 年 9 月 3 日 12:01:56
*   **分解版本：** 1988-2012-ABC-september-DEF-03-HIJ-12-KLM-01-56-_249.zip

我看到很多解析这个问题（例如确定正确的年份）。我希望你们能有所启发并帮助我找到正确的方向。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T04:31:58.013

我不知道有什么好东西，`SimpleDateFormat`但是您可以做的是使用正则表达式检查输入文件名是否匹配，以及它是否提取匹配的内容以创建您的日期。

这是一个验证您的标准的快速正则表达式：

`(.*?)([0-9]{4})([^0-9]*?)([a-z]+)(.*?)([0-9]{2})(.*?)([0-9]{2})(.*?)([0-9]{4})_([^.]+)[.]zip`

这意味着（实际上并没有那么复杂）

```
(.*?) // anything 
([0-9]{4}) // followed by 4 digits
([^0-9]*?) // followed by anything excepted digits
([a-z]+) // followed by a sequence of text in lowercase
(.*?) // followed by anything
([0-9]{2}) // until it finds 2 digits
(.*?) // followed by anything
([0-9]{2}) // until it finds 2 digits again
(.*?) // followed by anything
([0-9]{4}) // until if finds 4 consecutive digits
_([^.]+) // an underscore followed by anything except a dot '.'
[.]zip // the file extension 
```

你可以在Java中使用它

```
String filename = "19882012ABCseptemberDEF03HIJ12KLM0156_249.zip";
String regex = "(.*?)([0-9]{4})([^0-9]*?)([a-z]+)(.*?)([0-9]{2})(.*?)([0-9]{2})(.*?)([0-9]{4})_([^.]+)[.]zip";
Matcher m = Pattern.compile(regex).matcher(filename);
if (m.matches()) {
    // m.group(2); // the year
    // m.group(4); // the month
    // m.group(6); // the day
    // m.group(8); // the hour
    // m.group(10); // the minutes & seconds
    String dateString = m.group(2) + "-" + m.group(4) + "-" + m.group(6) + " " + m.group(8) + m.group(10);
    Date date = new SimpleDateFormat("yyyy-MMM-dd HHmmss").parse(dateString);
    // here you go with your date
} 
```

ideone 上的可运​​行示例：http: [//ideone.com/GBDEJ](http://ideone.com/GBDEJ)

编辑：您可以通过删除您不关心的括号来避免匹配您不想要的内容。然后正则表达式变为`.*?([0-9]{4})[^0-9]*?([a-z]+).*?([0-9]{2}).*?([0-9]{2}).*?([0-9]{4})_[^.]+[.]zip`，匹配组变为

```
group(1): the year
group(2): the month
group(3): the day
group(4): the hour
group(5): the minutes & secondes 
```

# objective-c - 无法设置 UIImageView 子类的属性

> ID：12241321
> 
> 赞同：0
> 
> 时间：2012-09-03T02:22:56.940
> 
> 标签：objective-c, ios, xcode4

我将 UIImageView 子类化了，它被称为 ACCascadeImageView。

```
@interface ACCascadeImageView : UIImageView{
    BOOL isSpotlight;
}

@property (assign, nonatomic) BOOL isSpotlight;

-----

@implementation ACCascadeImageView
@synthesize isSpotlight; 
```

然后我像这样创建实例，并添加一个手势识别器..

```
ACCascadeImageView *imageview = 
    [[ACCascadeImageView alloc] initWithFrame:imageframe];

UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];

[imageview addGestureRecognizer:singleTap]; 
```

在 handleSingleTap 方法中，我循环遍历我的 UIScollView 子视图，并尝试为每个子视图执行此操作...

```
(imageview in this scope is [gestureRecognizer view])
[imageview setIsSpotlight:NO]; 
```

但我明白这个...

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', 
reason: '-[UIImageView setIsSpotlight:]: unrecognized selector sent to instance 0x6888be0' 
```

为什么我的`ACCascadeImageView`突然变成了`UIImageView`？如果我做了一些愚蠢的事情，我深表歉意，但我之前已经进行了子类`UIImageView`化。我很困惑。

我应该说我已经`NSLog'd [imageview class]`得到了，“ `ACCascadeImageView`”。

这是问题所在：

```
NSArray *cascadeImages = [PhotoCascade subviews];
for (ACCascadeImageView *v in cascadeImages){
    NSLog(@"RESPONDS: %d", [v respondsToSelector:@selector(setIsSpotlight:)]);
    [v setIsSpotlight:NO];
} 
```

我得到：响应：1 响应：0

然后它就死了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T02:37:15.963

You can't be sure `[gestureRecognizer view]` is your `UIImageView`. To check this try `NSLog(@"view: %@", [gestureRecognizer.view class]);`. My tests says it's just `UIView`. If you're adding gesture recognizer to your image view the selector will be fired only when the user taps this view. So you could omit those checks at all.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T03:54:23.350

根据您的结果，并且由于每个对象只测试一次，因此数组中的第一个对象似乎是您的自定义子视图，但第二个对象不是。也许 cascadeImages 中的某个对象*不是*ACCascadeImageView。遍历数组并对每个数组执行自省，记录结果，以确保数组仅包含 ACCascadeImageViews。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T03:38:40.833

您是说您`handleSingleTap`正在返回 TRUE 以响应`respondsToSelector:@selector(setIsSpotlight:)`，但是当您尝试使用 时`setIsSpotlight`，它会失败吗？那是一个谜。

例如，我创建了这个超级简单的示例，它可以按您的预期工作：

```
#import "ViewController.h"

@interface Test : UIImageView

@property (assign, nonatomic) BOOL isSpotlight;

@end

@implementation Test

@synthesize isSpotlight;

@end

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    Test *test = [[Test alloc] initWithFrame:self.view.frame];
    [self.view addSubview:test];
    test.userInteractionEnabled = YES;

    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];
    [test addGestureRecognizer:tap];
}

- (void)handleSingleTap:(UIGestureRecognizer *)sender
{
    Test *imageview = (Test *)[sender view];

    NSLog(@"%s %d", __FUNCTION__, [imageview respondsToSelector:@selector(setIsSpotlight:)]);

    [imageview setIsSpotlight:NO];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

问题必须很简单，但是由于您的问题中提供的代码片段有限，问题出在哪里并不明显。但是您上面提供的代码不会显示您描述的那种问题。`UIImageView`您的应用程序中一定有流氓！

# ruby-on-rails - 用户签名？总是返回 false

> ID：12241322
> 
> 赞同：4
> 
> 时间：2012-09-03T02:23:06.903
> 
> 标签：ruby-on-rails, devise, janrain, rpx

我一直在关注这些 railscasts

[http://railscasts.com/episodes/209-introducing-devise](http://railscasts.com/episodes/209-introducing-devise) && [http://railscasts.com/episodes/233-engage-with-devise](http://railscasts.com/episodes/233-engage-with-devise) 用于用户身份验证，但是每当我尝试查看用户是否登录时，响应总是错误的。

我尝试了很多方法来解决这个问题。我尝试了不同版本的 devise 和 devise_rpx_connectable。我尝试在配置文件中更改设置。我尝试使用不同的 gem 版本多次运行“rails generate devise:install”。

奇怪的是，当我将 RPXNow.api_key 更改为伪造的东西时，我没有收到错误，这是意外行为。

这是我的 application.html.erb 文件中的代码：

```
<% if user_signed_in? %>
    Signed in as <%= current_user.email %>. Not you?
    <%= link_to "Sign out", destroy_user_session_path %>
<% else %>  
    <%= link_to_rpx "Sign in", user_session_url %>
<% end %>
<%= javascript_include_rpx(root_url) %> 
```

这是我的用户模型 user.rb 文件中的代码

```
class User < ActiveRecord::Base
    devise :database_authenticatable, :registerable,
           :recoverable, :rememberable, :trackable, :validatable, :rpx_connectable

    attr_accessible :email, :password, :password_confirmation

    validates :email, :uniqueness => true
    .....other stuff....
end 
```

这是我的 Gemfile 的一部分：

```
gem 'rails', '3.2.6'

gem 'devise','2.0.0'
gem 'devise_rpx_connectable' 
```

这得到了 devise_rpx_connectable gem 版本 0.2.2

这是我的初始化程序/devise.rb 文件中的内容：

```
Devise.setup do |config|
    config.mailer_sender = "please-change-me-at-config-initializers-devise@example.com"
    config.apply_schema = false
    require 'devise/orm/active_record'
    config.case_insensitive_keys = [ :email ]
    config.strip_whitespace_keys = [ :email ]
    config.skip_session_storage = [:http_auth]
    config.stretches = Rails.env.test? ? 1 : 10
    config.reconfirmable = true
    config.use_salt_as_remember_token = true
    config.reset_password_within = 6.hours
    config.sign_out_via = :delete
    config.rpx_application_name = "appname"
    RPXNow.api_key = "<any_key_we_want_apparently>"
end 
```

这是在我们的 routes.rb 文件中：

```
AppName::Application.routes.draw do
    root :to => "pages#home"
    match 'users/:id' => "users#index" 
    devise_for :users
end 
```

--在 ply 评论后编辑---我做了 rails g migration add_rpx_to_users rpx_identifier:string

并运行 rake db:migrate ：

```
class AddRpxToUsers < ActiveRecord::Migration
    def change
        add_column :users, :rpx_identifier, :string
    end
end 
```

如果有人有任何想法，请分享。我整天都在为这个问题苦苦挣扎。

非常感谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-08-21T06:17:43.563

这可能是因为您可能已经在应用程序控制器中使用 current_user 方法。因此，该设计不会看到它的 current_user 方法的实现，因此它总是为其辅助方法返回 false。只需删除或重命名您正在使用的 current_user 方法即可解决问题。

# java - JSP PropertyNotFoundException

> ID：12241324
> 
> 赞同：0
> 
> 时间：2012-09-03T02:23:14.427
> 
> 标签：java, hibernate, jsp, spring-mvc, managed-bean

我有一个基于 Apache Tomcat + Hibernate 的应用程序。我有一个 MyModel 类和一个 MyViewModel 类，它装饰一个 MyModel 类型的对象。

当我收到请求时，我会在 Map 中返回多个 MyViewModel 实例。假设一个实例是 x。当我尝试访问`${x.comments}`时，我得到一个 property not found 异常。

我仔细检查了 MyModel 是否包含 getComments() 和 setComments() 方法。MyViewModel 还包含 getComments() 方法，该方法在装饰对象上调用 getComments()，如果返回 null，则返回空字符串。

现在令人惊讶的是，当我在代码中的任何地方添加注释字段时，这段代码昨天还在工作。我的数据库仍然有评论字段。但不知何故，豆子没有被正确识别。

我对代码进行了一些更改，现在我正在使用 jquery-ui 来访问该页面，但我看不出这应该有何不同，因为我可以访问除注释字段之外的所有其他字段。

Hibernate 日志显示选择查询未获取评论字段。

我尝试重新启动服务器，我的 Eclipse IDE 似乎没有任何工作。

你能帮我找出问题吗？

提前致谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-03T05:45:31.037

修复！

MyViewModel 类缺少默认构造函数。

为什么我不能早点抓住它？

我在 WEB-INF/lib 下有一组旧的 jar 文件。但是，当我在 Eclipse 中配置项目时，我在单独的目录中下载了较新版本的 jar 文件并将它们添加到构建路径，但我的 WEB-INF/lib 仍然包含旧的 jar 文件。我最终计划拥有新版本，但由于一切正常，我没有打扰。

现在不知何故，这昨天还在工作，但我可能在提交之前做了某种“清理”。我一定是从 MyViewModel 中删除了默认构造函数。但是我可能在测试之前没有重新启动服务器，因此它工作正常。

理想情况下，这应该在部署过程中被捕获。但不知何故，新版本的罐子没有发现错误。当我切换到 WEB-INF/lib 目录中的 jar 时，服务器在初始化期间开始抛出异常，说缺少默认构造函数，因此无法初始化 bean。这解决了这个问题。

我试图重现这种情况。我删除了默认构造函数，将旧的 .classpath 文件放回项目目录中，它在部署期间不会捕获错误，但在运行时会失败。原因是 .classpath 中的一些依赖项不是必需的，也无法满足。所以 Eclipse 向我显示了一个红色的感叹号（不是通常表示构建问题的十字符号）。我现在明白感叹号意味着我的项目存在验证错误，并且项目没有重新构建，因为构建路径包含缺少的依赖项。

所以我从构建路径中删除了缺少的依赖项，红色感叹号消失了。现在在部署过程中发现了错误。

这么多不使用Maven。

# android - 如何移动片段并调整其大小

> ID：12241326
> 
> 赞同：1
> 
> 时间：2012-09-03T02:23:58.170
> 
> 标签：android, android-layout, android-widget

我在 Gmail 应用程序上看到。当用户触摸电子邮件列表中的电子邮件时。电子邮件列表向左移动并调整大小。像那些图像：

[邮件列表](http://img546.imageshack.us/img546/7210/mail1w.png)

[邮件视图](http://img39.imageshack.us/img39/738/mail2k.png)

对不起。我是新人，不能发图。你知道我们该怎么做吗？或者他们正在使用什么样的东西？

谢谢

# asp.net-mvc - 任何不使用单元测试或模拟的 ASP.NET MVC 教程？

> ID：12241331
> 
> 赞同：0
> 
> 时间：2012-09-03T02:24:42.180
> 
> 标签：asp.net-mvc

我是一名 ASP.NET Webforms 开发人员，我正在逐渐适应 ASP.NET MVC。我了解完整单元测试的好处以及使用模拟来完全分离不同的抽象层。但如果可能的话，我想先自学 MS MVC 框架……然后将单元测试（通过测试项目）和模拟框架纳入我的知识。

那么有没有人知道只关注 ASP.NET MVC 框架而不包含单元测试或模拟框架的书籍/教程？我看过。TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T04:04:06.793

如果您喜欢视频培训，请访问 www.pluralsight.com。这些视频分为多个部分，因此如果您当前不感兴趣的区域，则可以继续。

他们在 asp.net 网站[http://www.asp.net/mvc/videos](http://www.asp.net/mvc/videos)上也有一些。

# php - set_value() 不维护字段的值

> ID：12241332
> 
> 赞同：0
> 
> 时间：2012-09-03T02:24:42.753
> 
> 标签：php, codeigniter

**当我收到验证错误时，设置值不会保持字段值。**

*****查看***：****

 **```
echo form_input('post_title', set_value('post_title')); 
```

**控制器：**

```
if ($this->form_validation->run('post_ad') == FALSE)
{
    set_temporary_msg(validation_errors('<div>', '</div>'));  
} 
```

**帮手：**

```
function set_temporary_msg($msg, $target_location = '') 
{
    $CI =& get_instance();
    $CI->session->set_flashdata('temp_msg', $msg);
    redirect($target_location); 
}

function get_temporary_msg() {

    $CI =& get_instance();
    echo $CI->session->flashdata('temp_msg');

} 
```

如果某些输入无效，则调用 set_temporary_msg()。在***视图***页面的顶部，我 echo get_temporary_msg();

**错误消息和重定向工作正常，但我丢失了所有 set_value()。知道如何解决这个问题吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T04:54:10.093

这很正常，如果你在表单提交后进行重定向，set_value 找不到 post_title 的值，因为 $_POST 为空。如果你想保持提交的值，你必须在你的重定向 url 或会话中传递它。对不起我糟糕的英语..**

# php - MySQL 不会从配置文件中读取密码

> ID：12241333
> 
> 赞同：0
> 
> 时间：2012-09-03T02:24:44.803
> 
> 标签：php, mysql, html, forms, mysqli

我的网站上有一个 html 表单，我正在尝试处理数据，然后将其存储在我服务器上的 mysql 数据库中。为了通过 php 安全地连接到 mysql，我已按照[此处](https://stackoverflow.com/questions/3710511/best-way-to-connect-to-mysql-with-php-securely)的建议将登录信息放在主 webroot 之外的配置文件中。

当它像这样编写时，代码可以无缝执行：

```
<?php
$mysqli = mysqli_init( );
$mysqli->options(MYSQLI_READ_DEFAULT_FILE, "/this/is/the/filepath/to/my.cnf");
$mysqli->real_connect(NULL, NULL,'*********',NULL );  

if (mysqli_connect_errno()) {
    printf("Connect failed: ", mysqli_connect_error());
    exit();
}

$email = $mysqli->real_escape_string($_POST['email']);

$mysqli->query("INSERT INTO subscribetest (email) VALUES ('$email')");  
?> 
```

但是当我取出密码时，像这样：

```
<?php
$mysqli = mysqli_init( );
$mysqli->options(MYSQLI_READ_DEFAULT_FILE, "/this/is/the/filepath/to/my.cnf");
$mysqli->real_connect(NULL,NULL,NULL,NULL ); 

if (mysqli_connect_errno()) {
    printf("Connect failed: ", mysqli_connect_error());
    exit();
}

$email = $mysqli->real_escape_string($_POST['email']);

$mysqli->query("INSERT INTO subscribetest (email) VALUES ('$email')");
?> 
```

代码崩溃，我收到错误消息：'警告：mysqli::real_connect()。'user'@'webaddress.net' 的访问被拒绝（使用密码：NO）'

为什么我的 php 脚本可以读取除了配置文件中的密码之外的所有内容？它能够从配置文件中读取用户名、主机和数据库；密码是唯一一个被遗漏的密码。我到处寻找，花了几个小时，但我一直无法找到任何解决方案。有没有其他人有这个问题？我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:52:17.843

[文档](http://www.php.net/manual/de/mysqli.real-connect.php)说将密码参数设置为`real_connect()`意味着`NULL`“用户不需要密码”。如果您在没有任何参数的情况下调用它（它们都是可选的），它会起作用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-17T15:33:03.743

This bug still seems to exist: [https://bugs.php.net/bug.php?id=43812](https://bugs.php.net/bug.php?id=43812)

Workaround:

```
$iniData = file_get_contents('/etc/mysql/debian.cnf');
$iniData = preg_replace('/#.*$/m', '', $iniData);
$mysqlConfig = parse_ini_string($iniData, true);
$mysqli = new mysqli( $mysqlConfig['client']['host'], $mysqlConfig['client']['user'], $mysqlConfig['client']['password'] );
if ( $mysqli->connect_error ) {
    die(sprintf("MySQL Connect Error: %s", $mysqli->connect_error));
} 
```

# c++ - 虚拟运算符重载

> ID：12241334
> 
> 赞同：1
> 
> 时间：2012-09-03T02:24:59.540
> 
> 标签：c++, operator-overloading

我正在制作一个包含将进一步派生为 3 种类型的 GVector 类，即
PVector（像素空间矢量）
MVector（米空间矢量）
RVector（渲染空间矢量）

```
class GVector {
  public : 
    eVectorSpace eVS; // Defines which space the vector would be
    float x,y; // The x and y values of a 2-Dimensional vector
    ...
    GVector operator+ (const GVector& v) const { return GVector(x+v.x, y+v.y, v.eVS); }
    ...
};

class MVector {
  public :
    PVector toPVector() {...}
    //Will contain functions to convert the same vector into a different space
}; 
```

我想让添加位于同一空间中的 2 个向量成为可能

```
MVector operator+ (const MVector& v) const { return MVector(x+v.x, y+v.y); } 
```

我需要像这样制作基类功能吗？

```
virtual GVector* operator+ (const GVector* v) const () = 0; 
```

但我想在与两个相加向量相同的空间中返回一个向量。

对于每种类型的向量，将 x,y 的值相加的功能是相同的。有没有办法将其最小化到基类本身？或者有没有更好的方法在同一空间中添加向量并将它们转换为不同的空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T02:32:07.117

如果对两个不同的子级执行操作没有意义，则不应**在**父级上定义运算符。相反，可以定义一个受保护的辅助函数，然后孩子应该单独实现运算符，委托给辅助函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T03:12:39.797

某处的某些代码需要知道如何将两个向量对象相加，但实际上并不需要是向量类型本身。您可以在类之外定义一组加法运算符。

```
MVector operator+(const MVector &left, const MVector &right) {
    return MVector(left.x + right.x, left.y + right.y);
} 
```

您可以根据需要定义任意数量的不同运算符添加，只要编译器可以明确地确定类型是什么。您甚至可以提供接受 a`MVector`和 a 的实现`GVector`。

```
MVector operator+(const MVector &left, const RVector &right) {
    MVector tmp = right.toMVector();
    return MVector(left.x + tmp.x, left.y + tmp.y);
} 
```

# php - 功能索引上的 Codeigniter 分页

> ID：12241337
> 
> 赞同：0
> 
> 时间：2012-09-03T02:26:01.473
> 
> 标签：php, codeigniter, pagination

我在弄清楚了一些事情后对其进行了编辑，但是如果我希望我的链接出现在索引上，这是一个好方法吗？如果没有功能页面，base_url 为 test/index 将无法正常工作，但 test/test 可以。

控制器

类测试扩展 CI_Controller {

```
public function __construct()
{
    parent::__construct();
    $this->load->model('Test_model');
    $this->load->library('pagination');
}

public function index()
{
    $page['title']  = '';
    $page['file']   = 'test/index';

    $config['base_url'] = base_url().'test/page';
    $config['total_rows'] = $this->Test_model->record_count();
    $config['per_page'] = 2;
    $config['num_links'] = 5;

    $offset = $this->uri->segment(3,0);

    $this->pagination->initialize($config);

    $page['data']['items'] = $this->Test_model->getItems($config['per_page'], $offset);
    $page['data']['pagination'] = $this->pagination->create_links();
    $this->load->view('template', $page);
}

public function page()
{
    $page['title']  = '';
    $page['file']   = 'test/index';

    $config['base_url'] = base_url().'test/page';
    $config['total_rows'] = $this->Test_model->record_count();
    $config['per_page'] = 2;
    $config['num_links'] = 5;

    $offset = $this->uri->segment(3,0); 

    $this->pagination->initialize($config);

    $page['data']['items'] = $this->Test_model->getItems($config['per_page'], $offset);
    $page['data']['pagination'] = $this->pagination->create_links();
    $this->load->view('template', $page);
} 
```

}

模型

```
public function record_count()
{
    return $this->db->count_all('item');
}

public function getItems($limit, $offset)
{
    $query = $this->db->get('item', $limit, $offset);
    $result = $query->result();
    return $result;
} 
```

看法

```
<h2><?=$pagination; ?></h2>
<table>
<?php foreach($items as $item) { ?>

<tr><td><?=$item->name?></td></tr>

<?php } ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T06:55:30.123

尝试这个：

```
function  __construct()
    {

        parent::__construct();
        $this->load->helper('array');
        $this->load->helper('url');
        $this->load->library('pagination');
        $this->load->model('Test_model','',TRUE);
    }

function index($uri_segment="3")
{   
        $config['base_url'] = base_url('test/index');
        $config['total_rows'] = $this->Test_model->record_count();
        $config['per_page'] = 5;
        $config['uri_segment'] = 3;
        $this->pagination->initialize($config);

$page['data']['products'] = $this->Test_model->getItems($config['per_page'],$this->uri->segment(3));

    $page['data']['pagination']= $this->pagination->create_links();
    $page['title']  = '';
    $page['file']   = 'test/index';

    $this->load->view('template', $page);
} 
```

如果生成的列表在单击下一页时显示随机页面，则它应该采用下一页编号而不是下一个 id(+5)。在这种情况下，添加

```
 $config['use_page_numbers'] = TRUE; 
```

在初始化分页配置之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T04:31:02.973

在控制器中，您必须更新它

```
public function index()
    {

        $this->load->library('pagination');

        $config['base_url'] = base_url().'test/index'; // use test/test and it works
        $config['total_rows'] = $this->Test_model->record_count();
        $config['per_page'] = 5;
        $config['num_links'] = 10;
        $config['uri_segment'] = 3;  

        $offset = $this->uri->segment(3,0);

        $this->pagination->initialize($config);

        $page['data']['products'] = $this->Test_model->getItems($config['per_page'], $offset);
        $page['data']['pagination'] = $this->pagination->create_links();

        $page['title']  = '';
        $page['file']   = 'test/index';

        $this->load->view('template', $page);
    } 
```

这是对您 [Codeigniter 分页有用的链接](http://www.devessence.com/2009/10/11/codeigniter-search-and-pagination-terms-and-uri-segments/)

# php - Wordpress 独立评论页面 - 带分页

> ID：12241339
> 
> 赞同：3
> 
> 时间：2012-09-03T02:26:27.277
> 
> 标签：php, pagination, comments, wordpress

我想构建一个显示*所有评论*的页面，无论它们附加到哪个帖子。我还希望对该页面进行分页，因为它可能有 10,000 多条评论。

* * *

我不知道该怎么做，但这里有一些我迄今为止研究过的功能：

1.  [`get_comments`](http://codex.wordpress.org/Function_Reference/get_comments)- 如果没有`post_id`传入，它将返回所有评论。但是，我看不到对这些进行分页的方法（有一些可供选择`offset`的`number`选项，但手动操作*非常*乏味）。

2.  [`wp_list_comments`](http://codex.wordpress.org/Function_Reference/wp_list_comments)- 这方面的文档非常糟糕，但[源代码](http://core.trac.wordpress.org/browser/tags/3.4.1/wp-includes/comment-template.php#L1415)`get_comments`表明，如果与 结合使用，我们可以通过将`get_comments`数组作为第二个参数传递来遍历所有注释。然而，这实际上仍然会用于`get_comments`......好吧，获得评论，并且似乎没有办法对其进行分页。

3.  [`previous_comments_link`](http://codex.wordpress.org/Template_Tags/previous_comments_link)& [`next_comments_link`](http://codex.wordpress.org/Template_Tags/next_comments_link)- 这些似乎只能与`wp_list_comments`（没有第二个参数）结合使用。

4.  [`paginate_comments_links`](http://codex.wordpress.org/Function_Reference/paginate_comments_links)- 看起来它只适用于`wp_list_comments`（没有第二个参数）。

* * *

# 我试过的：

1.  只需使用以下`number`参数`get_comments`：

    ```
    $comments = get_comments(array(
        'status'    => 'approve',
        'number'    => '2'
    ));

    wp_list_comments(array(
        'callback' => 'my_rendering_function'
    ), $comments);

    paginate_comments_links(); 
    ```

    这不会显示任何分页链接。

2.  这里建议的方法：[**Display latest comments on page with pagination**](https://wordpress.stackexchange.com/questions/7413/display-latest-comments-on-page-with-pagination)

    ```
    $comments = get_comments(array(
        'status' => 'approve'
    ));

    wp_list_comments('per_page=2', $comments);

    paginate_comments_links(); 
    ```

    这也不起作用（它显示前 2 条评论，但没有分页）。此外，我对将*所有*`get_comments`评论加载到内存中感到畏缩。

 ** * *

# 问题：

如何对*所有*评论进行分页？

* * *

**PS**我正在使用 WordPress 3.4.1 和 PHP 5.3.2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T22:56:43.230

如果您计划建立自己的分页，您将需要知道您将要使用的评论总数，因此您必须加载所有评论。

我已经建立了我会使用的东西，让我知道它是否有帮助。

```
#Config here.
define('DEFAULT_COMMENTS_PER_PAGE',100);

$page = (int) (!isset($_REQUEST["page"]) ? 1 : $_REQUEST["page"]);
$limit = DEFAULT_COMMENTS_PER_PAGE;
$offset = ($page * $limit) - $limit;
$param = array(
    'status'=>'approve',
    'offset'=>$offset,
    'number'=>$limit,
);
$total_comments = get_comments(array('status'=>'approve'));
$pages = ceil(count($total_comments)/DEFAULT_COMMENTS_PER_PAGE);
$comments = get_comments($param);
foreach($comments as $comment) {
    // ECHO THE AUTHOR AND COMMENT
    echo("<strong>{$comment->comment_author}</strong> - {$comment->comment_content}");
}
$args = array(
'base'         => 'https://example.com/all-comments/%_%',
'format'       => '?page=%#%',
'total'        => $pages,
'current'      => $page,
'show_all'     => False,
'end_size'     => 1,
'mid_size'     => 2,
'prev_next'    => True,
'prev_text'    => __('&laquo; Previous'),
'next_text'    => __('Next &raquo;'),
'type'         => 'plain');
// ECHO THE PAGENATION 
echo paginate_links( $args ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-23T05:26:49.280

我们应该担心使用 get_comments() 获取总评论的性能。必须使用参数 offset 为 false，并且 count 为 true，如下所示：

```
$comments_per_page = 2;
$page = 2;

//MYSQL: LIMIT offset, number
$params = array(
    'post_id' => $post_id,
    'offset' => (--$page) * $comments_per_page,
    'number' => $comments_per_page,
);

$comments = get_comments( $params );
$total_comments = get_comments(
    array_merge($params, 
            array(
                'count' => true,
                'offset' => 0,
                'number' => 0
            )
    )
);

$args = array(
    'total'     => ceil( $total_comments / $comments_per_page ),
    'current'   => max( 1, $page ),
);

$pagination = paginate_links( $args ); 
```

添加您需要的任何参数。您可以将 wp_list_comments() 用作 Weel，但如果您想自定义输出 HTML，请使用 foreach for $comments：

```
foreach ( $comments as $comment ) :

    echo $comment->comment_date;
    echo '<br>';
    echo $comment->comment_author;
    echo '<br>';
    echo $comment->comment_content;

endforeach; 
```*

# android - 是否有用于开发 Android 应用程序的在线构建服务器

> ID：12241340
> 
> 赞同：0
> 
> 时间：2012-09-03T02:26:28.857
> 
> 标签：android

我正在寻找用于 Android 应用程序开发的在线构建服务器（Hudson 或 jenkins）。我已经在 Github 上有了我的代码。谁能帮我？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T02:51:33.980

如果您想自己运行构建服务器，请将其安装在您的机器上并设置它以提取和构建您的项目。如果您想要托管解决方案，请查看[CloudBees](http://www.cloudbees.com/)及其提供的服务。

# c# - 通过命令提示符等界面的命令

> ID：12241345
> 
> 赞同：0
> 
> 时间：2012-09-03T02:27:23.173
> 
> 标签：c#, wpf

我想知道有没有一种方法可以在不使用 switch 或 if 语句的情况下将用户的输入表单作为命令运行？

例如，如果我有一个包含 10 x 10 相框的表单，并且想要将其大小更改为 100 x 100。更好的是，有没有一种方法可以使用`string`代码中定义的 a： `string newString = "";` 然后更改所述字符串的名称：`newString = "newButton" + count;`

此代码将像这样使用：

```
 for (int count = 0; count < records) // Records being the count of records to   be presented.
          { 
            newString = "newButton" + count;
            Button newString.ToString() = new Button();
          } //Uses the newString to give      ID name to the new buttons. 
```

与此类似的事情是使用 java 代码使用`<tag>`and`out_print`命令为 servlet 创建表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T02:32:05.190

似乎您正在寻找一个`Dictionary<T,T>`. 你可以像这样实现你的循环想法：

```
var buttons = new Dictionary<string,Button>();
for (int count = 0; count < records)
{ 
    newString = "newButton" + count; 
    var newButton = new Button();
    buttons.Add(newString, newButton);
} 
```

# javascript - 将视图中的项目添加到数组（backbone.js）

> ID：12241351
> 
> 赞同：0
> 
> 时间：2012-09-03T02:29:01.957
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我在多步骤向导中有一个`ProductListView`包含多个子视图的父视图。`ProductView`当用户单击 a`ProductView`时，其模型的 id 应该存储在某个地方（可能在一个数组中），以便可以将其发送回服务器端进行处理。

**问题：**`id`我应该在哪里存储`ProductView`用户点击的？我尝试将其存储在其父视图中`ProductListView`，但似乎无法`selectedProducts`从子视图访问父视图中的数组`ProductView`。

这是正确的方法吗？这应该怎么做？

**模型**

```
ProductCollection = Backbone.Collection.extend({
    model: Product,
    url: '/wizard'
}); 
```

**父视图**

```
ProductListView = Backbone.View.extend({
    el: '#photo_list',

    selectedProducts: {},  // STORING SELECTED PRODUCTS IN THIS ARRAY

    initialize: function() {
        this.collection.bind('reset', this.render, this);
    },

    render: function() {
        this.collection.each(function(product, index){
            $(this.el).append(new ProductView({ model: product }).render().el);
        }, this);
        return this;
    }
}); 
```

**子视图**

```
ProductView = Backbone.View.extend({
    tagname: 'div',
    className: 'photo_box',

    events: {
        'click': 'toggleSelection'
    },

    template: _.template($('#tpl-PhotoListItemView').html()),

    render: function() {
        this.$el.html(this.template( this.model.toJSON() ));
        return this;
    },

    // ADDS ITS MODEL'S ID TO ARRAY
    toggleSelection: function() {
        this.parent.selectedProducts.push(this.model.id);
        console.log(this.parent.selectedProducts);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T02:37:43.600

I don't think `parent` is a property of a backbone `View` type, and you haven't defined it, so there's no way this line is going to work:

```
this.parent.selectedProducts.push(this.model.id); 
```

It seems like the correct approach would be to add a `selected` property to the `Product` model; toggle that property in the click handler. Then, when it's time to submit to the server, collect the IDs by filtering the Products collection for selected items (underscore.js included with Backbone makes this easy).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T08:21:40.617

为什么不尝试直接在模型中保留选定的信息。那么，您将轻松跟踪所选使用事件的更改状态，并在进一步的向导步骤中使用该信息？

```
toggleSelection: function () {
    this.model.set({ selected: true });
} 
```

# sql - SSRS 表达式 - 减去总和

> ID：12241352
> 
> 赞同：0
> 
> 时间：2012-09-03T02:29:03.250
> 
> 标签：sql, reporting-services, ssrs-2008

我需要一些关于 SSRS 表达式的帮助，该表达式求和然后减去总和。我有一个数据集，其中包含帐户和相应的货币/金额值。我正在尝试编写一个表达式，将指定范围内一组帐户的金额/金额值相加，然后从另一个范围内的金额/金额总额中减去它。例如：

```
(Sum(amt) where acct between 40000 and 49999) - 
(Sum(amt) where (acct between 50000 and 59999) or (acct between 66000 and 69999)) - 
(Sum(amt) where acct between 76000 and 79825) - 
(Sum(amt) where acct between 89000 and 90399) 
```

我真的可以使用一些帮助将上面的 SQL 逻辑转换为用于 SSRS 中的文本框的表达式。任何建议都会非常有帮助！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:17:46.230

尝试这个 ：-

```
=Sum(
     iif(Fields!acct.Value) >= 1 and
         Fields!acct.Value) < 4 ,
     Fields!amt.Value,0
        )
    )
-
 Sum(
     iif(
         (Fields!acct.Value>=5 and Fields!acct.Value<10)
          or (Fields!acct.Value>=12 and Fields!acct.Value< 15),
          Fields!amt.Value,0 
         )
    )
-
Sum(
     iif(
         Fields!acct.Value) >= 76000 and
         Fields!acct.Value) < 79825 ,
         Fields!amt.Value,0
         )
   )
-
Sum(
   iif(
       Fields!acct.Value) >= 89000 and
       Fields!acct.Value) < 90399 ,
   Fields!amt.Value,0
       )
    ) 
```

# php - 如何在我的网站中获取登录用户的 Facebook 好友详细信息？

> ID：12241353
> 
> 赞同：-1
> 
> 时间：2012-09-03T02:29:42.893
> 
> 标签：php, facebook

我正在尝试获取 Facebook 朋友的详细信息，例如姓名、照片、当前工作和加入日期。我正在使用 PHP。我尝试使用 facebook-developer site.Url 中给出的代码。该网站的网址如下。

[http://developers.facebook.com/docs/reference/fql/](http://developers.facebook.com/docs/reference/fql/)

我已经完成了登录代码，现在我想在我的网站中显示朋友的详细信息，因为它在以下网址中......

[http://www.jobisjob.com/MyNetwork](http://www.jobisjob.com/MyNetwork)

在那请按照facebook登录链接...

谁能告诉我如何使用 php 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:48:25.963

确保您为此请求适当的权限（查看朋友权限列） - [https://developers.facebook.com/docs/authentication/permissions/](https://developers.facebook.com/docs/authentication/permissions/)。当然，获取此数据也取决于他们的隐私设置，因此您应该能够处理提供此数据和不提供此数据的两种情况。

# memcached - 内存缓存生命周期

> ID：12241354
> 
> 赞同：0
> 
> 时间：2012-09-03T02:30:13.077
> 
> 标签：memcached, lifetime

我读过一篇文章，使用memcache缓存存储在mysql数据库中具有一定生命周期的密码，但是当数据库中更新用户密码时，memcache仍然缓存旧数据，生命周期结束后，再次从数据库中获取数据，然后得到最新的数据。

还有其他方法可以立即获取最新更新的数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T02:52:15.120

通常，您在应用程序中使用的框架会让您设置规则，例如：

*   将数据保存在 memcache 中的时间/何时从缓存中刷新记录
*   如何/在什么情况下去数据库

当然，一种方法是在更新 db 中 pw 的例程中，相同的例程使 memcache 中的相关记录过期。

# android - 来自 Viewflipper 的 setWallpaper

> ID：12241357
> 
> 赞同：0
> 
> 时间：2012-09-03T02:31:01.830
> 
> 标签：android, wallpaper

我已经使用`viewFlipper`. 现在我想`setWallpaper`。但是当我按下`setWallpaper`按钮时，我的 coad 不工作。这是我的代码：

```
public class WallpaperChooserActivity extends Activity implements OnClickListener {
/** Called when the activity is first created. */

ViewFlipper vp;
Bitmap bmp;
ImageView image;
int i;
int galleryId [] ={R.drawable.bela1,R.drawable.bela2,R.drawable.bela3,
        R.drawable.bela4,R.drawable.bela5};

private void setFlipperImage1(int res) {
       // Log.i("Set Filpper Called", res+"");
        image = new ImageView(getApplicationContext());
        image.setImageResource(res);
        vp.addView(image);
}  

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    initilizeVariable();   

    for(int i=0;i<galleryId.length;i++)
    {
        setFlipperImage1(galleryId[i]);
    }

}

private void initilizeVariable() {
    // TODO Auto-generated method stub

    vp =(ViewFlipper)findViewById(R.id.ViewFlipper01);
    Button setWall = (Button)findViewById(R.id.btnSetWall);
     Button moreApp = (Button) findViewById(R.id.btnMore);
     Button share = (Button) findViewById(R.id.btnShare);
     Button rate = (Button)findViewById(R.id.btnRate);
     ImageButton next = (ImageButton)findViewById(R.id.ibNext);
     ImageButton prev = (ImageButton)findViewById(R.id.ibPrev);

     setWall.setOnClickListener(this);
    moreApp.setOnClickListener(this);
    share.setOnClickListener(this);
    rate.setOnClickListener(this);
    next.setOnClickListener(this);
    prev.setOnClickListener(this);

}

public void onClick(View v) {
    // TODO Auto-generated method stub

 switch (v.getId()){

    case R.id.ibNext:

        vp.showNext();
    break;

    case R.id.ibPrev:

        vp.showPrevious();
        break;

    case R.id.btnSetWall:

        //Bitmap wallpaper = BitmapFactory.decodeStream(getResources().openRawResource(galleryId [i]));
        WallpaperManager myWallpaperManager  = WallpaperManager.getInstance(getApplicationContext()); 

         try {

                 myWallpaperManager.setResource(galleryId [i]);

         } catch (IOException e) {
                 // TODO Auto-generated catch block
              e.printStackTrace();
         }break;

}

 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T02:45:48.650

编辑* - 您没有更新您的其他 int i，仅更新 onCreate() 中 for 循环内的一个。而不是gallery[i]，它实际上应该是类似gallery[currentFlipperIndex]“currentFlipper”索引当然是您的视图翻转器的当前索引。

# visual-studio-2010 - 在构建说无法加载自己的文件或程序集后创建了新的 Visual Studio 2010 测试项目

> ID：12241360
> 
> 赞同：1
> 
> 时间：2012-09-03T02:31:18.130
> 
> 标签：visual-studio-2010, mstest

今晚我一直在 VS 2010 中创建一个全新的测试项目。在创建 VS 2010 提供的测试文件以向我展示如何使用它的属性的项目后，我立即构建并获得以下内容：

> 加载时出错...我的文档\visual studio 2010\Projects\TestProject1\bin\Debug\TestProject1.dll：无法加载文件或程序集...\my documents\visual studio 2010\Projects\TestProject1\bin\Debug\TestProject1 .dll' 或其依赖项之一。不支持操作。（来自 HRESULT 的异常：0x80131515）

我没有任何依赖项或引用。为什么我不能在创建后立即在 VS 中构建测试项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T02:39:02.107

It might be a network permissions issue on where your project files were being saved.
Just saving stuff locally will fix your problem. Maybe!

Or you can try [**Unblocking Any Protected Files**](http://blogs.msdn.com/b/brada/archive/2009/12/11/visual-studio-project-sample-loading-error-assembly-could-not-be-loaded-and-will-be-ignored-could-not-load-file-or-assembly-or-one-of-its-dependencies-operation-is-not-supported-exception-from-hresult-0x80131515.aspx)

# sql - 通过在 SQL Server 中附加到右侧来制作多行的单行？

> ID：12241362
> 
> 赞同：1
> 
> 时间：2012-09-03T02:31:49.597
> 
> 标签：sql, database, sql-server-2008, tsql, reporting-services

我有一张这样的桌子：

```
用户 ID 地址线路 1、地址线路 2、电话
1，第一街，某处，123
1, 第二街, Somewhere2, 124
2，第 32 街，某处，125
2, 24th Street, Somewhere3, 126
2, 25th Street, Somewhere4, 127

```

如何将其转换为（输出需要将每个字段放在单独的列中，每个逗号都表示一个列分隔符）：

```
1，第一街，某处，123，第二街，某处2，124
2, 32th Street, Somewhere, 125, 24th Street, Somewhere3, 126, 25th Street, Somewhere4, 127
```

这是我在 SSRS 中所做的报告。每个用户都可以拥有动态数量的地址，并且在最终结果中它们都需要在每个用户的单行上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T03:21:47.983

尝试这个

```
Declare @t Table([UserID] int, [AddressLine1] varchar(20), [AddressLine2] varchar(20), [Phone] int);

INSERT INTO @t VALUES
    (1, 'First Street', 'Somewhere', 123),
    (1, 'Second Street', 'Somewhere2', 124),
    (2, '32th Street', 'Somewhere', 125),
    (2, '24th Street', 'Somewhere3', 126),
    (2, '25th Street', 'Somewhere4', 127);

SELECT 
      [UserID]
    , [New Address] = 

                    STUFF((
                            SELECT ',' 
                                    +  [AddressLine1] 
                                    + ', ' 
                                    + [AddressLine2] 
                                    + ', ' 
                                    + CAST([Phone] AS VARCHAR(10)) 
                          FROM @t AS t2 
                          WHERE t1.UserID = t2.UserID 
                          FOR XML PATH('')),1,1,'')
FROM @t t1
GROUP BY t1.[UserID] 
```

//结果

**用户 ID 新地址**

```
1   First Street, Somewhere, 123,Second Street, Somewhere2, 124
2   32th Street, Somewhere, 125,24th Street, Somewhere3, 126,25th Street, Somewhere4, 127 
```

除了这里描述的方法之外，还有许多其他方法可以解决同样的问题。值得一提的是，[在 Transact-SQL](http://www.simple-talk.com/sql/t-sql-programming/concatenating-row-values-in-transact-sql/)文章中查看 Concatenating Row Values。这是一篇很棒的文章，请花一些时间来阅读它（如果你还没有这样做的话）。

希望这可以帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T02:45:23.997

这可能不是有效的方法，`MSSQL`但请尝试一下。

```
SELECT  a.UserID, 
        SUBSTRING(d.Addresses,1, LEN(d.Addresses) - 1) AddressList
FROM 
        (
            SELECT DISTINCT UserID
            FROM   tableName
        ) a
        CROSS APPLY
        (
            SELECT [AddressLine1] + ', ' + [AddressLine2] + ', ' + CAST([Phone] as VARCHAR(15)) + ', ' 
            FROM tableName AS B 
            WHERE A.UserID = B.UserID 
            FOR XML PATH('')
        ) D (Addresses) 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!3/b886d/18)

# matlab - 如何使用 MATLAB 更改矩阵中的元素

> ID：12241364
> 
> 赞同：2
> 
> 时间：2012-09-03T02:31:56.150
> 
> 标签：matlab, matrix, simulation

开始希望一个 7x4 二进制矩阵，我需要更改每列中的一个随机位来模拟错误。一直在尝试无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T04:12:34.537

一个非常直接的方法是使用 for 循环。它可能不是 MATLAB 中最有效的方法，但考虑到您的数据集非常小，它可能已经足够好了。

遍历四列中的每一列。在每次迭代中，随机选择一个从 1 到 7 的数字来表示您选择更改的该列中的行。最后，翻转该行/列的位。下面的代码就是这样做的。假设“A”是一个 7 行 4 列的二进制矩阵

```
for col=1:4;                  %// Iterate through each column
    row = ceil(7*rand());     %// Randomly chose a number from 1 to 7 to represent row
    A(row,col) = ~A(row,col); %// Flip the bit at the specified row/col
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T07:21:38.990

另一种可能性是在一次调用中创建 4 个随机数，并以矢量化方式分配：

```
rowNumbers = randi(4,[1 4])
A(rowNumbers,:) = ~A(rowNumbers,:); 
```

# regex - AS3 Regexp 不包括？

> ID：12241367
> 
> 赞同：2
> 
> 时间：2012-09-03T02:32:10.207
> 
> 标签：regex, actionscript-3, include

我在 AS3 中有一个正则表达式。直到现在它一直在工作，但现在我想从一开始就排除一个短语。具体来说，原文是：

```
var pattern:RegExp = new RegExp(keyword,'/gi'); 
```

我正在尝试按照以下方式做一些事情：

```
var pattern:RegExp = new RegExp(!'<a href=\"event:' + keyword,'/gi'); 
```

在哪里

```
baaah 
```

会工作，但是

```
<ahref="event:baaah 
```

行不通。

请帮忙！在我的代码中实现的正确语法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T05:55:01.450

看看这个。

```
var myPattern:RegExp = /(?<=<a href='event:).+/;   
var str:String = "<a href='event:baaah";
var result:Array = myPattern.exec(str);
trace(result[0]); //baaah 
```

* * *

我强烈推荐：[Regular_expression](http://en.wikipedia.org/wiki/Regular_expression)

**`Assertions`**

```
 - foo(?=bar)   Lookahead assertion. The pattern foo will only match if
   followed by a match of pattern bar.

 - foo(?!bar)   Negative lookahead assertion. The pattern foo will only
   match if not followed by a match of pattern bar.

 - (?<=foo)bar  Lookbehind assertion. The pattern bar will only match if
   preceeded by a match of pattern foo.

 - (?<!foo)bar  Negative lookbehind assertion. The pattern bar will only
   match if not preceeded by a match of pattern foo. 
```

# mysql - cannot run mysql in mountain

> ID：12241371
> 
> 赞同：0
> 
> 时间：2012-09-03T02:33:05.910
> 
> 标签：mysql, macos

My system is Mountail Lion.

I want to change MySQL's default charset to utf8, so I copied my-huge.cnf in /usr/local/mysql/support-files to /etc/my.cnf and modified it.

However, strange things happen.

Before my copying, I can run mysql and there is mysql.sock in /tmp.

After my copying and restarting, the mysql.sock disappears so I cannot run.

I think the problem lies in my.cnf. Because whenever I remove it from /etc and restart, mysql.sock appears in /tmp and mysql can run. Whenever I copy it to /etc and restart, mysql.sock never appear.

==================== updated ====================

I found problem lies in the statement:

> default-character-set = utf8

which I added in my.cnf under [mysqld]

when I detele it, mysql can restart and run.

==================== problem solved ====================

I should use

```
character-set-server = utf8 
```

instead. ......I don't know why default-character-set = utf8 doesn't. Every tutorial on the internet uses it. =.=

# java - How to improve runtime of a recursive function

> ID：12241374
> 
> 赞同：0
> 
> 时间：2012-09-03T02:33:46.307
> 
> 标签：java, recursion, runtime

In solving this problem: [http://www.cs.duke.edu/csed/newapt/drawtree.html](http://www.cs.duke.edu/csed/newapt/drawtree.html) I wrote the code below but it seems to run too slow. Is there a faster way of checking all of the child nodes w/o using a FOR loop? Would a queue be helpful?

```
public class DrawTree {
    HashMap<String, ArrayList<String>> map = 
            new HashMap<String, ArrayList<String>>();
    ArrayList<String> drawing = new ArrayList<String>(); 
    String root;
    public String[] draw(int[] parents, String[] names) {

         for(int x=0; x<parents.length; x++)
         {
             int parentindex = parents[x];
             //root name

             if(parentindex==-1)
            {
                 root=names[x];
                 if(!map.containsKey(names[x]))
                 {

                     map.put(names[x], new ArrayList<String>()); 
                 }

                 continue;
            }

             //add parent, child to map
             if (!map.containsKey(names[parentindex])) 
                             map.put(names[parentindex], 
                                     new ArrayList<String>());
             map.get(names[parentindex]).add(names[x]);
         }

         sketch("",root,false);
        return drawing.toArray(new String[drawing.size()]);
      }
    //***IMPROVE RUN TIME - different algorithm??***
     //method takes root and prefix?
     public void sketch(String parent, String child, boolean addPipe){

         StringBuilder toAdd = new StringBuilder();

         //don't need to add connector pipe
         if(!addPipe)
         {
            //number of spaces to add to prefix
            int spaces = parent.indexOf('-')+1;

             //add spaces to prefix
            while(spaces>0)
            {
                toAdd.append(" ");
                spaces--;
            }
            toAdd.append("+-"+child);
         }

         //index of pipe in parent, -1 if parent doesn't have pipe
         int parentPipe = parent.indexOf('|');

        //need to add connector pipe & parent has pipe 
            // (is a child of a subtree)
         if(parentPipe>0)
         {
            //number of spaces to add to prefix
             int spaces = parent.indexOf('-')+1;

             //add spaces to prefix
             while(spaces>0)
             {
                 if(spaces==parentPipe) toAdd.append('|');
                 else toAdd.append(" ");
                 spaces--;
             }
             toAdd.append("+-"+child);   

         }

         //need to add pipe and parent doesn't have pipe
         if(addPipe && parentPipe<0)
         {
             int spaces = parent.indexOf('-')+1;
             while(spaces>0)
             {
                 if(spaces==2) toAdd.append('|');
                 else toAdd.append(" ");
             }
             toAdd.append("+-"+child);   
         }

         //add child to list of tree drawing
         String node = toAdd.toString();
         drawing.add(node);
         //System.out.println(node);     

         //loop through list of children, passing each recursively
             //...count level?
         if(map.containsKey(child))
         {
             //System.out.println("map works");
             for(int x = 0; x<map.get(child).size(); x++)
             {
                 boolean pipe = false;
                 if(x<(map.get(child).size()-1)) pipe=true;
                 //System.out.println(map.get(child).get(x));
                 sketch(node, map.get(child).get(x), pipe);
             } 
         }

     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:24:05.007

在这种情况下，我认为队列不会有帮助。For循环可能是这样做的方式

```
public class DrawTree {
    public String[] lines;
    public int lineNum;

    public String[] draw(int[] parents, String[] names) {
        lines = new String[parents.length];
        lineNum = 0;
        drawLeaf(parents, names, -1, 0);
        return lines;
    }

    public void drawLeaf(int[] parents, String[] names, int root, int depth) {
        for (int i = 0; i < parents.length; i++) {
            if (parents[i] == root) {
                lines[lineNum] = "";
                for (int j = 0; j < depth; j++) {
                    lines[lineNum] += "  ";
                }

                lines[lineNum] += "+-" + names[i];
                int pipeNum = lineNum - 1;
                while ((pipeNum >= 0)
                        && (lines[pipeNum].charAt(depth * 2) == ' ')) {
                    String oldLeaf = lines[pipeNum];
                    lines[pipeNum] = "";
                    for (int j = 0; j < oldLeaf.length(); j++) {
                        if (j == depth * 2) {
                            lines[pipeNum] += '|';
                        } else {
                            lines[pipeNum] += oldLeaf.charAt(j);
                        }
                    }
                    pipeNum--;
                }

                lineNum++;
                drawLeaf(parents, names, i, 1 + depth);
            }
        }
    }
} 
```

# c++ - 嵌套模板列表错误

> ID：12241375
> 
> 赞同：0
> 
> 时间：2012-09-03T02:33:47.083
> 
> 标签：c++, templates

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T02:39:50.760

Write:

```
typename list< SKPair<VALUETYPE> >::iterator it = bucket->begin(); 
```

The `->` is needed here.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T03:09:55.243

`bucket` is declared as a pointer, so you need a dereferencing operator to access its members:

```
auto it = bucket->begin(); 
```

Should do the trick if you have C++11's `auto` available.

# intersection - how to find intersections from OpenStreetMap？

> ID：12241377
> 
> 赞同：5
> 
> 时间：2012-09-03T02:34:32.120
> 
> 标签：intersection, openstreetmap

How to extract intersections in the OpenStreetMap？ I need the longitude and latitude of the intersections, thanks!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T13:38:31.483

[这里](http://help.openstreetmap.org/questions/15442/detection-of-intersections-in-the-maps)有一个类似的问题。没有直接的 API 调用来检索交叉点。但是您可以查询给定边界框中的所有方式（例如直接通过[API](http://wiki.openstreetmap.org/wiki/API)或通过[Overpass API](http://wiki.openstreetmap.org/wiki/Overpass_API)）并查找由两种或多种方式共享的节点，如另一个答案中所述。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-04T10:16:22.213

尝试 GeoNames `findNearestIntersectionOSM`API： [http ://api.geonames.org/findNearestIntersectionOSMJSON?lat=37.451&lng=-122.18&username=demo](http://api.geonames.org/findNearestIntersectionOSMJSON?lat=37.451&lng=-122.18&username=demo)

输入是位置的 lng 和 lat，响应包含最近交点的 lng 和 lat：

```
{"intersection":{...,"lng":"-122.1808293","lat":"37.4506505"}} 
```

它由[GeoNames](http://www.geonames.org/export/ws-overview.html)提供，但似乎基于[OpenStreetMap](http://wiki.openstreetmap.org/wiki/API)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-24T09:43:38.227

正如@scai 完美解释的那样，**您必须自己处理原始 OSM 数据才能找到方式的交集节点**。

[您可以先使用OverpassAPI](http://overpass-turbo.eu/)尝试不同的算法，而不是编写自己的程序。

*   根据您感兴趣的方式，将不应该算作交集的方式类型添加到*regv*属性（在两个脚本部分）。可以在这里找到方式的类型：[高速公路标签](https://wiki.openstreetmap.org/wiki/Key:highway)。
*   BoundingBox 是您在 Overpass-tourbo 网站上查看的地图的一部分。
*   *该脚本基于[另一个问题回复](https://stackoverflow.com/a/18385182/5815054)中的脚本链接，但我重写了它以使其更具可读性并添加了评论（包括此处和原始回复）。*

**示例脚本：**

```
<!-- Only select the type of ways you are interested in -->
<query type="way" into="relevant_ways">
  <has-kv k="highway"/>
  <has-kv k="highway" modv="not" regv="footway|cycleway|path|service|track"/>
  <bbox-query {{bbox}}/>
</query>

<!-- Now find all intersection nodes for each way independently -->
<foreach from="relevant_ways" into="this_way">  

  <!-- Get all ways which are linked to this way -->
  <recurse from="this_way" type="way-node" into="this_ways_nodes"/>
  <recurse from="this_ways_nodes" type="node-way" into="linked_ways"/>
  <!-- Again, only select the ways you are interested in, see beginning -->
  <query type="way" into="linked_ways">
    <item set="linked_ways"/>
    <has-kv k="highway"/>
    <has-kv k="highway" modv="not" regv="footway|cycleway|path|service|track"/>
  </query>

  <!-- Get all linked ways without the current way --> 
  <difference into="linked_ways_only">
    <item set="linked_ways"/>
    <item set="this_way"/>
  </difference>
  <recurse from="linked_ways_only" type="way-node" into="linked_ways_only_nodes"/>

  <!-- Return all intersection nodes -->
  <query type="node">
    <item set="linked_ways_only_nodes"/>
    <item set="this_ways_nodes"/>
  </query>
  <print/>
</foreach> 
```

# unix - 使用差异命令

> ID：12241388
> 
> 赞同：0
> 
> 时间：2012-09-03T02:38:22.213
> 
> 标签：unix

因此，我试图将使用 gcc 编译时生成的二进制文件与提供的示例可执行文件进行比较。所以我使用了命令 diff 并像这样

diff asgn2 sample-asgn2 二进制文件 asgn2 和 sample-asgn2 不同

有什么办法可以看出它们有何不同？而不是它只是显示不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T02:47:59.963

为什么不试试 Vbindiff？它可能做你想要的：

> Visual Binary Diff (VBinDiff) 以十六进制和 ASCII（或 EBCDIC）显示文件。它还可以一次显示两个文件，并突出显示它们之间的差异。与 diff 不同，它适用于大文件（最大 4 GB）。

从哪里获得 Vbindiff 取决于您使用的操作系统。如果是 Ubuntu 或其他 Debian 衍生产品，`apt-get install vbindiff`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T02:52:06.947

使用 hexdump 对两个二进制文件进行十六进制转储。然后你可以使用你最喜欢的差异工具来比较十六进制转储，比如 kdiff3、tkdiff、xxdiff 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T02:46:58.023

我正在使用 Linux，在我的情况下，我需要一个 -q 选项来显示你得到了什么。

```
diff -q file1 file2 
```

如果没有 -q 选项，它将显示哪一行不同并显示该行。

您可以检查 man diff 以查看在您的 UNIX 中使用的正确选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-03T17:28:41.730

`vbindiff`只做逐字节比较。如果只有一个字节添加/删除，它将标记所有后续字节更改...

另一种方法是将二进制文件转换为文本文件，以便与文本差异算法进行比较。

`colorbindiff.pl`是一个简单且开源的 perl 脚本，它使用此方法并显示彩色并排比较，就像在文本差异中一样。它突出显示字节更改/添加/删除。它在[GitHub](https://github.com/jjazzboss/colorbindiff)上可用。

[![colorbindiff 输出快照](../Images/53a84f12779c5bd3016f41bb0971395b.png)](https://i.stack.imgur.com/qSW6m.png)

# java - 焦点监听器行为

> ID：12241389
> 
> 赞同：3
> 
> 时间：2012-09-03T02:38:43.747
> 
> 标签：java, swing, jframe, focuslistener

当用户单击它时，我`JFrame`想要关闭它。我有两个`JTextFields`和一个`JButton`（用户名、密码、提交）。当我给他们所有的`FocusListener`时候，只要用户从一个字段转到另一个字段，窗口就会关闭。如何允许用户从一个字段转到另一个字段，并且只有在用户单击弹出窗口的任何位置时才关闭它？

```
public class LoginForm {

    static JTextField userName;
    static JTextField password;
    static JButton submit;
    JFrame main;
    Dimension dim = Toolkit.getDefaultToolkit().getScreenSize();

    UserSession session;

    public LoginForm(){

        Handler handle = new Handler();  //inner class
        LoginFormFocusListener fl = new LoginFormFocusListener();   //inner class

        main = new JFrame("Please Login");

        main.setUndecorated(true);
        main.setBounds((dim.width/2) - (500/2),(dim.height/2) - (150/2),500,150);
        main.setVisible(true);
        main.setAlwaysOnTop(true);
        main.setResizable(false);
        main.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        userName = new JTextField(10);
        password = new JTextField(10);
        main.setLayout(new GridLayout(0,1));

        JPanel panel = new JPanel();
        main.add(panel);
        panel.add(new JLabel("Username: "));
        panel.add(userName);
        panel.add(new JLabel("Password: "));
        panel.add(password);

        submit = new JButton("Submit");
        panel.add(submit);

        userName.addFocusListener(fl);
        password.addFocusListener(fl);
        submit.addFocusListener(fl);

        submit.addActionListener(handle);
    }
} 
```

...（不重要的方法和“处理程序”类省略）

```
public class LoginFormFocusListener implements FocusListener{

    public void focusGained(FocusEvent fe) {
        System.out.println("focus gained...");
        System.out.println("click off of this window to close...");
    }

    public void focusLost(FocusEvent fe){
    System.out.println("focus lost...");
    WindowEvent winEvt = new WindowEvent(main, 0);
    winEvt.getWindow().dispose();
    }

}

//test
public static void main(String args[]){
    SwingUtilities.invokeLater(new Runnable(){  
        public void run(){  
        new LoginForm();  
    }  
    });  
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T02:52:08.837

不要为此使用 FocusListener，因为这些是用于获得和失去焦点的组件，而不是用于顶级窗口。也许使用 WindowListener 侦听窗口被停用或图标化。

例如：

```
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class WindowListenerFun {
   public static void main(String[] args) {
      JPanel panel = new JPanel();
      panel.add(new JTextField(10));
      panel.add(new JButton("button"));
      JFrame frame = new JFrame("Bad Frame");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.add(panel);
      frame.pack();
      frame.setLocationRelativeTo(null);
      frame.setVisible(true);

      frame.addWindowListener(new WindowAdapter() {

         @Override
         public void windowIconified(WindowEvent wEvt) {
            ((JFrame)wEvt.getSource()).dispose();
         }

         @Override
         public void windowDeactivated(WindowEvent wEvt) {
            ((JFrame)wEvt.getSource()).dispose();
         }

      });
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T02:52:52.453

**编辑：**我误读了您的代码；另一个答案是正确的——您需要使用 WindowFocusListener 而不是 FocusListener。

```
public class Listener extends WindowAdapter
{
    public void windowLostFocus(WindowEvent e)
    {
        Window w = e.getWindow();
        e.setVisible(false);
        e.dispose();
    }
} 
```

和

`main.addWindowFocusListener(new Listener());`

**Edit2：**用窗口关闭代码替换占位符。

~~然后，您将焦点侦听器添加到各个菜单组件，只要组件失去焦点，它就会被触发。您只希望在*窗口*失去焦点时触发它，因此请将其添加到窗口中。~~

`main.addWindowFocusListener(f1);`

~~应该解决你的问题。~~

# android - 增加google play的下载量

> ID：12241396
> 
> 赞同：0
> 
> 时间：2012-09-03T02:40:19.720
> 
> 标签：android

我想优化和增加我创建的应用程序的下载量。我最近发现了admob。但它是免费的吗？如果没有其他免费替代品？我可以在只提交一份申请的情况下使用移动广告应用程序吗？因为现在我在 google play 中只发布了一个应用程序。我看到了 appbrain sdk，但我认为您必须创建多个应用程序来推广您的应用程序，因为它使用 sdk（这意味着您必须在代码中添加一些内容）。[这](https://developers.appbrain.com/info/sdk)是链接。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T03:27:38.547

除了 AdMob 之外，还有其他可能更好的方法来增加吸引力。[GoogleIO 上的这个演讲](http://www.youtube.com/watch?v=7-62tRHLcHk)是描述他的游戏为何如此受欢迎的一个人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T02:59:41.930

Admob 不是免费的，如果您想宣传自己的应用程序，您必须先注册该服务并设置每月预算和广告范围。为了在您的移动应用程序中托管广告，是的，它是完全免费的，您只需下载 SDK（我认为 v6 是当前版本）。是的，你可以只为一个应用程序制作横幅广告，如果这就是你迄今为止所需要的。我不熟悉appbrain sdk。

# opengl - GLSL, Shader has some array limit?

> ID：12241398
> 
> 赞同：2
> 
> 时间：2012-09-03T02:40:33.837
> 
> 标签：opengl, glsl

I create 1000 size vec3 array, but it shows nothing on glut window when I resize the array to 128\. it will show I think it has some limit on my Graphic card.

what can I do to avoid this limit?

```
uniform vec3 cir[128]; // can show something

uniform vec3 cir[1000]; // shows nothing 
```

I need pass at least 500 cir to shader.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T03:05:01.547

Uniforms 已通过[GL_ARB_uniform_buffer_object](http://www.opengl.org/registry/specs/ARB/uniform_buffer_object.txt)扩展以支持大型数组。如果您负担不起使用此扩展的费用，则可以考虑改用一维纹理。

# c# - PHP Response to C#

> ID：12241401
> 
> 赞同：0
> 
> 时间：2012-09-03T02:41:05.097
> 
> 标签：c#, php, arrays

I am soon looking at coding a C# Application out of my spare time for a friend of mine, this application will essentially be uploading files from the clients computer to a PHP webscript, using the [WebClient Class](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx) and its [UploadFile Method](http://msdn.microsoft.com/en-us/library/36s52zhs.aspx). I am currently planning out exactly how the script will communicate with the server, and then how it will receive a response containing some information regarding the users upload to the server.

Step 1: User will select file(s) to be uploaded, they will then upload them

Step 2: The program will communicate with a PHP script on our server, which will process through the uploads and upload them to the correct folder

Step 3: The PHP server will then simply respond with a string, array or some sort of response which will be relayed back to the program, this will contain important information, such as;

*   Username
*   A link
*   Date/Time on server uploaded
*   An error status

I was thinking the best way to do this was via an array of some sort, however I am lost at this point as I have never really delved into this. I have been told that simply outputting a PHP Array will not do the trick, and I will need to use other means such as JSON or XML. Does anyone have any recommendations for how I should handle the returned data, which I will need to use on the software to display a link and other information such as the date & time(which will actually be in timestamp format).

Cheers,

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T02:47:37.820

由于您正在处理跨语言通信，因此 JSON 确实是最好的格式。XML 也可以很好地工作，但我发现 XML 有点过于冗长，因为只是为了传输数据。

简单地....

```
 json_encode($array) 
```

...您的数组，然后发送数据。您可以轻松地在 C# 端解析这些数据。对于您希望发送数据以用于多种语言的大多数场景，JSON 是最佳格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T02:48:17.617

转储 PHP 数组将不起作用，因为 PHP 有它自己的序列化程序，而 c# 不能（也许它可以，但它不实用）读取它。

使用 JSON 或 XML 的建议是正确的，这两种格式非常适合传输数据。我会说坚持使用 JSON，但这只是个人喜好。它们都适用于该目的，并且 XML 和 JSON 在 c# 和 PHP 中都有本机实现。

编辑：

*   [c# json 序列化器文档](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer%28loband%29.aspx)
*   [PHP json 序列化器文档](http://php.net/manual/en/book.json.php)

# ruby - Jekyll on Heroku listing additional (internal?) posts I haven't created

> ID：12241403
> 
> 赞同：2
> 
> 时间：2012-09-03T02:41:32.103
> 
> 标签：ruby, heroku, jekyll

Alright, I'm dealing with a really odd problem.

I've built a Jekyll-based site with several test posts. Locally, it compiles perfectly. Now I've begun testing it on Heroku (its eventual home). I'm using a [custom buildpack](https://github.com/mattmanning/heroku-buildpack-ruby-jekyll) to build the site once it is pushed to Heroku so I don't have to commit compiled content into my repo.

The Jekyll site is building without error, and yet, the results are bizarre. My index page is built to list all of my posts in `site.posts`:

```
{% for post in site.posts %}
  <li>
    <a href="{{ post.url }}">{{ post.title }}</a>
  </li>
{% endfor %} 
```

It starts with the test post I've made, and then lists 28 other "posts" that I've never created. They look to me like internal Jekyll functions somehow getting caught up in the compiler. Here are some of their names:

*   Md Extension
*   Text Extension
*   Timezone Override
*   Time Override
*   Override Data
*   Date Override
*   Foo --- Bar
*   No Yaml
*   ...

These "posts" are only showing up when compiling on Heroku.

Does anybody have any idea what is going on here?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T01:16:53.507

我遇到了同样的问题，然后我发现 heroku 在 / 处运行，并且 gem 安装在 /vendor 中。一旦 Jekyll 运行，它会扫描目录中的所有文件和文件夹以构建 _site。

编辑你的 _config.yml 并告诉 Jekyll 排除“供应商”。我也将我的配置为排除“Procfile”、“unicorn.rb”和“config.ru”。

# php - 在codeigniter的foreach中显示关联数组值的前20个字母

> ID：12241409
> 
> 赞同：0
> 
> 时间：2012-09-03T02:42:54.313
> 
> 标签：php, codeigniter, associative-array

我正在使用 codeigniter 库，并且陷入了困境。首先这是我的数组

```
Array (
    [0] => Array (
        [product_name] => some data
        [product_slug] => some data
        [price] => some Data...
        [sell_price] => 2000.00

    )

    [1] => Array (
        [product_name] => some data
        [product_slug] => some data
        [price] => some Data...
        [sell_price] => 2000.00
    )
) 
```

现在这是我在控制器中的代码：

```
$this->load->model('product_model');
$data['product']=$this->product_model->get_product();
$this->load->view('show_product',$data); 
```

这是我的型号代码

```
function get_product()
{
  return $this->db->query("SELECT * FROM dt_product")->result_array();
} 
```

最终我的视图代码

```
<div class="featured_right_gallery_bellow">
                    <ul class="product_list">
                                        <?php foreach($product as $product)
                                        {?>
                    <li>
                    <div class="pro_name"><?php echo $product['product_name'];?></div>
                    </li>
                    <?php
                    }?>
                    </ul>
</div> 
```

现在我的问题是，我想只显示 product_name 的前 20 个字母......但这里显示的是全名......

我知道我可以写一个 mysql 代码`SELECT LEFT(product_name,20),sell_price,price FROM dt_product`……但我不想那样做，因为表包含近 20 个属性，我必须多次更改查询……我想要的只是有人指出我关于如何使用偏移概念显示product_name的前20个字母的解决方案，

我尝试回显 $product['product_name'][20]，但是使用 foreach 循环，它会抛出未定义索引的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T02:45:38.630

尝试这个：

```
<div class="pro_name"><?php echo substr($product['product_name'], 0, 20);?></div> 
```

在此处阅读功能：http `substr()`: [//php.net/manual/en/function.substr.php](http://php.net/manual/en/function.substr.php)

编辑：

如果您想直接在数组中进行编辑（我认为没有必要）：

假设`$array`是数组：

```
Array (
    [0] => Array (
        [product_name] => some data
        [product_slug] => some data
        [price] => some Data...
        [sell_price] => 2000.00

    )

    [1] => Array (
        [product_name] => some data
        [product_slug] => some data
        [price] => some Data...
        [sell_price] => 2000.00
    )
) 
```

然后这样做：

```
// Iterating through each of the elements of the array.
// $productArray gets loaded as each inner array value.
foreach ($array as $key => $productArray) {
    // The value of $array[$key] is the current inner array.
    // The substr() just gets the value of the product_name key and returns the first 20 characters.
    // To load the modified value, set $array[$key]['product_name'] to the modified value.
    $array[$key]['product_name'] = substr($productArray['product_name'], 0, 20);
} 
```

# android - 带有 Gridviews 的 Android 动画：从缩略图缩放到全尺寸图像

> ID：12241411
> 
> 赞同：0
> 
> 时间：2012-09-03T02:43:13.270
> 
> 标签：android, android-animation

我目前有一个`GridView`充满缩略图的图像。现在通常我会通过`onClickListener`.

但是，我正在尝试复制效果，如果单击缩略图，它应该放大以显示全尺寸图像，并且当您点击全尺寸图像时，它应该缩小到缩略图。我尝试了一个简单的缩放动画，但似乎无法将图像从（和返回到）它的初始位置动画化。

注意：如果有人有 HTC One X，我追求的效果和那部手机上的 Gallery 应用完全一样。当您单击图像时，由 Jellybean 驱动的 Nexus 7 也具有相同的效果。

我最近的尝试是（在点击时触发）：

```
<?xml version="1.0" encoding="utf-8"?>
<scale
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/linear_interpolator"
    android:fromXScale="1.0"
    android:toXScale="1.0"
    android:fromYScale="0.0"
    android:toYScale="1.0"
    android:pivotY="50%"
    android:fillAfter="true"
    android:fillEnabled="true"
    android:startOffset="200"
    android:duration="200" /> 
```

**更新**：尝试查看 Google 的 Gallery3D 应用程序的源代码（http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.1.1_r1/com/android/ gallery3d/app)，这是 Nexus 使用的，但它非常复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-18T02:31:54.137

[这](http://www.youtube.com/watch?v=XNF8pXr6whU)是 DevBytes 中类似效果的一个很好的例子。它在[ActivityOptions](http://developer.android.com/reference/android/app/ActivityOptions.html)中使用新的 API ，可以直接从 JellyBean 获得，也可以通过[support-v4](http://developer.android.com/reference/android/support/v4/app/ActivityOptionsCompat.html)库访问

从该示例中截取的代码如下：

```
Intent i = new Intent(HomeActivity.this, DetailActivity.class);
i.putExtra(DetailActivity.EXTRA_COLOUR, colour);
Bundle b = null;
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN) {
    Bitmap bitmap = Bitmap.createBitmap(view.getWidth(), view.getHeight(), Bitmap.Config.ARGB_8888);
    bitmap.eraseColor(colour);
    b = ActivityOptions.makeThumbnailScaleUpAnimation(view, bitmap, 0, 0).toBundle();
}
startActivity(i, b); 
```

# android - android上的自定义视图

> ID：12241413
> 
> 赞同：0
> 
> 时间：2012-09-03T02:43:21.823
> 
> 标签：android, view, custom-component

我创建了一个自定义视图`MyView`：

```
package com.example;

public class MyView extends View {

    public MyView(Context context) {
        super(context);
    }
} 
```

并在布局 xml 中使用它：

```
<com.example.MyView android:id="@+id/imageView"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent">
</com.example.MyView> 
```

它抛出错误：

```
09-02 16:43:07.114: ERROR/AndroidRuntime(1387): FATAL EXCEPTION: main
        java.lang.RuntimeException: Unable to start activity 
        ComponentInfo{com.example/com.example.MyActivity}: android.view.InflateException: Binary XML file line #13:
           Error inflating class com.example.MyView
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
        at android.app.ActivityThread.access$1500(ActivityThread.java:117) 
```

如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T02:47:58.690

您应该尝试定义另一个构造函数以使其工作。

```
public MyView(Context context, AttributeSet attrs){
    super(context, attrs);
} 
```

# jquery - 在表格单元格内的任何位置选择一个复选框

> ID：12241414
> 
> 赞同：1
> 
> 时间：2012-09-03T02:44:18.520
> 
> 标签：jquery

我需要一个（jQuery）选择器，上面写着：

> 任何时候表格单元格中有一个复选框，然后将光标作为该表格单元格的指针，如果用户单击表格单元格内的任何位置，然后单击它们的复选框。

我想我曾经有过这个，但那是在“on”选择器出现之前，此外，我认为它在某个时候给我带来了无限循环的麻烦，所以我把它拿出来了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T02:46:57.503

这会做到的。我使用 s 进行事件委托`td`，因为 s 可以有很多`table`，而且它还使您可以灵活地在将来通过 JavaScript 添加更多内容并让它们*正常工作*。

```
// Get some references to your elements.
var $table = $("#some-table");
var $tdWithCheckbox = $table.find("td:has(input[type='checkbox'])");    

// Alternatively, add a class which has `cursor: pointer`.
$tdWithCheckbox.css("cursor", "pointer");

// Use event delegation.
$table.on("click", "td", function() {
     $(this).find("input[type='checkbox']").prop("checked", true);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T02:47:30.080

您可以使用`:has`选择器。

```
$('td:has(input[type=checkbox])').css('cursor', 'pointer');

$(document).on('click', 'td', function(){
   $('input[type=checkbox]', this).click()
}) 
```

# javascript - JQuery Animate() 从页面底部向上滑动 div

> ID：12241417
> 
> 赞同：9
> 
> 时间：2012-09-03T02:44:59.357
> 
> 标签：javascript, jquery, html, jquery-animate

希望简单，但尝试实施其他 SO 问题的答案无济于事。

我有一个 div 我想在文档加载时从页面底部向上滑动。但是，我似乎无法让 JQuery 正常工作。这是我所拥有的：

```
#content {
    width: 640px;
    margin:auto;
    margin-top: 2000px;
}

$(function(){

$('#content').animate({MarginTop: '50px',} 1000);

}); 
```

基本上，我只想`margin-top`在页面加载时缩小距离。

谁能指出我正确的方向？谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-03T02:48:01.633

尝试：

```
$('#content').animate({'margin-top': '50px'}, 1000); 
```

[提琴手](http://jsfiddle.net/MvQsT/1/)

# php - PHP - 用 openssl_random_pseudo_bytes() 替换 mcrypt_create_iv()

> ID：12241418
> 
> 赞同：8
> 
> 时间：2012-09-03T02:45:00.363
> 
> 标签：php, openssl, mcrypt

我需要提高我们网站的安全性，目前正在使用此处的指南：http: [//crackstation.net/hashing-security.htm](http://crackstation.net/hashing-security.htm)，以及此处的随机密码生成：[https ://defuse.ca/generating -随机密码.htm](https://defuse.ca/generating-random-passwords.htm)。我收集到两者都使用`mcrypt_create_iv()`生成随机字节（或位？）的函数，但由于某种原因，我在 CentOS 6 下安装 php-mcrypt 时遇到错误。幸运的是，第一个链接说这`openssl_random_pseudo_bytes()`是一个 CSPRNG（以及 PHP 文档和其他来源也支持该声明），并且在当前服务器安装的 PHP 5.4 上可用，所以我目前别无选择，只能使用它。考虑到这些，我想问以下问题：

1.  直接代码替换是否足够而不影响安全性？（也就是说，只需替换对 to 的调用就`mcrypt_create_iv()`可以了`openssl_random_pseudo_bytes()`吗？）

2.  关于代码中提到的常量（http://crackstation.net/hashing-security.htm#properhashing），指南说“[m]确保你的盐至少和哈希函数的输出一样长。” 我是否正确假设`PBKDF2_SALT_BYTES`and`PBKDF2_HASH_BYTES`都设置为 24 字节，因为`pbkdf2()`函数的输出只是 24 字节，而不是 32（对于 256 位），因为使用的底层算法是`sha256`？（是的，我也在使用键拉伸。）在相关说明中，24 字节是否可以，或者应该增加/减少，这会产生什么影响？

高级感谢那些将回答的人。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T15:13:11.053

1.  我认为安全性不会受到影响，因为这两个函数都只是密码安全的伪随机数生成器（NB:`openssl_random_pseudo_bytes($len, true)`和`mcrypt_create_iv($len, MCRYPT_DEV_RANDOM)`）。
2.  `PBKDF2_SALT_BYTES`仅在测试功能中使用`create_hash()`，而不在`pbkdf2()`其本身中使用。所以你只需要使用这些 CSPRNG 实现你自己的盐生成功能。

# android - 错误：无法在 sqlite3 上打开数据库

> ID：12241420
> 
> 赞同：1
> 
> 时间：2012-09-03T02:45:19.633
> 
> 标签：android, eclipse, android-emulator, sqlite, console

我正在使用 Android 并使用 Eclipse 来开发和使用模拟器来测试我的应用程序，我正在尝试将 ArrayList 中的内容插入到数据库中，但是当我尝试通过控制台访问数据库的信息时，我得到了以下消息：

`Error: unable to open database /data/data/my.package/databases/ars.db : unable to open database file`

到目前为止，我知道数据库正在正确创建，因为每次我插入一行时，SQLiteDatabase 的插入方法都会返回创建的行的 id，到目前为止，我已经运行了我的应用程序 6 次，我得到的最后一个 id 是 18。

我正在尝试通过以下方式访问数据库：

`#sqlite3 /data/data/my.package/databases/ars.db`

然后当我尝试时：

`sqlite>.tables`

我收到错误消息。我究竟做错了什么？为什么我无法获得访问数据库数据的权限？是因为我使用的是模拟器而不是 Android 设备吗？感谢您提供的任何建议。

# linux - 将 IPv6 添加到 domU 来宾

> ID：12241422
> 
> 赞同：0
> 
> 时间：2012-09-03T02:45:33.433
> 
> 标签：linux, networking, ipv6, xen

我正在寻求有关将 IPv6 安装到我的 Xen domU 的帮助。我目前有一个来自 HE 的 6 英寸 4 隧道供每位客人使用，并希望将其合并到 dom0 上的一个。但我并不打算这样做——我完全愿意接受建议。

根据我在这里和谷歌上的研究，我没有发现任何好的东西。值得一提的是，dom0 运行的是 Centos 5.8 和 Xen 3.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T02:47:52.267

听起来不错。在 dom0 上设置 radvd 以告知他们给您的可路由 /64 并让 domU 从中获取地址。

# arrays - perl 数组如何工作 $"

> ID：12241423
> 
> 赞同：3
> 
> 时间：2012-09-03T02:45:32.750
> 
> 标签：arrays, perl

我对这段代码的结果感到困惑。

```
my @lines;
for (my $count = 0; $count < 3; $count++) {

    print "Give me input again ";
    chomp (my $line = <STDIN>);
    $lines[$count] = $line;
}

$" = "|";
print "@lines\n"; 
```

当我运行代码时，它是如何 `$" = "|";`工作的？结果是一|二|三。代码如何工作，以便将“|” 每个输入之间？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T03:03:07.443

这就是将数组插值到双引号字符串中的作用。

```
"$foo\n" 
```

等同于

```
$foo . "\n" 
```

和

```
"@lines\n" 
```

等同于

```
join($", @lines) . "\n" 
```

这记录在[perldata](http://perldoc.perl.org/perldata.html)和[perlvar](http://perldoc.perl.org/perlvar.html#%24LIST_SEPARATOR)中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T02:51:09.213

`$"`只是 perl 中的一个特殊变量名，它告诉解释器如何在双引号字符串上下文中分隔数组元素。默认值是空格，但上面的代码告诉 perl 改为使用`|`。因此，如果您省略了该行，`One|Two|Three`而不是默认值。`One Two Three`

有关详细信息，请参阅[http://perldoc.perl.org/perlvar.html#General-Variables 。](http://perldoc.perl.org/perlvar.html#General-Variables)

# c# - 如何通过嵌套的 IEnumerable 对象对 IEnumerable 对象进行排序？

> ID：12241427
> 
> 赞同：-2
> 
> 时间：2012-09-03T02:45:48.930
> 
> 标签：c#, linq

> **可能重复：**
> [使用 LINQ 对列表中每个对象的字段进行排序](https://stackoverflow.com/questions/12241199/sort-a-field-of-each-object-in-a-list-with-linq)

我有这个收藏：

```
 IEnumerable<sample> sam = new List<sample>()
    {
        new sample{ id = 1, name = "sample 1", list = new List<int>{5,6,1}},
        new sample{ id = 2, name = "sample 1", list = new List<int>{2,9}},
        new sample{ id = 3, name = "sample 1", list = new List<int>{8,3,7}},
        new sample{ id = 4, name = "sample 1", list = new List<int>{8,4,3}},
        new sample{ id = 5, name = "sample 1", list = new List<int>{5,1,7}},
        new sample{ id = 6, name = "sample 1", list = new List<int>{6,9,7}}
    }; 
```

如何使用 LINQ 对其进行排序，以便输出为：

```
 new sample{ id = 2, name = "sample 1", list = new List<int>{2,9}},
     new sample{ id = 5, name = "sample 1", list = new List<int>{5,1,7}},
     new sample{ id = 1, name = "sample 1", list = new List<int>{5,6,1}},
     new sample{ id = 6, name = "sample 1", list = new List<int>{6,9,7}}
     new sample{ id = 3, name = "sample 1", list = new List<int>{8,3,7}},
     new sample{ id = 4, name = "sample 1", list = new List<int>{8,4,3}}, 
```

顺便说一下，这是按“列表”排序的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T02:51:39.767

`sam`这是按属性的第一项排序的 LINQ `list`（我猜这就是您所追求的，对吧？）：

```
IEnumerable<sample> orderedSam = sam.OrderBy(item => item.list.FirstOrDefault()); 
```

# matlab - 如何从 1 xn 单元阵列等的 mx 1 单元阵列制作 mxn 单元阵列？

> ID：12241428
> 
> 赞同：1
> 
> 时间：2012-09-03T02:46:04.433
> 
> 标签：matlab

[对不起这个愚蠢的问题。我对 MATLAB 完全陌生（完全被它弄糊涂了）。]

我想编写一个函数，将 1 x *n单元阵列的**m* x 1 单元阵列`to2d`作为其唯一参数，并返回相应的*m* x *n*单元阵列。

 ***例如，我们会得到类似的东西：

```
>> A = {{1, 2}; {3, 4}; {5, 6}}

A = 

    {1x2 cell}
    {1x2 cell}
    {1x2 cell}

>> B = to2d(A)

B = 

    [1]    [2]
    [3]    [4]
    [5]    [6] 
```

这个问题可以被认为是更一般的问题的一个特例，即以编程方式将参数传递给变量参数函数，当所有人都知道这些参数是它们存储在某个单元阵列中时。在 Python 中，通过使用 - 语法来做到这`*`一点。例如

```
func_with_indeterminate_args(*a_runtime_list_of_args) 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T04:25:56.373

函数`cat`在做什么：

```
>> cat(1,A{:})
ans = 
    [1]    [2]
    [3]    [4]
    [5]    [6] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T04:25:37.320

你的第一个问题很容易回答：

```
function B = to2d(B)
    B = cat(1,B{:});
end 
```

（感谢@Eastsun 使用 of`cat`而不是`[B{:}]`）。

至于您的第二个问题：可以在用户可访问的单元格数组中捕获和扩展任何函数的参数`varargin`。*传递给任何*函数的参数总数可以由`nargin`. 例子：

```
function B = to2d(B, varargin)

    if nargin == 1
        B = reshape([B{:}], size(B,1),[])

    else
        for ii = 1:nargin
            fprintf('Parsing argument %d\n', ii); 
            varargin{ii}
        end

    end
end 
```

然后打电话

```
>> to2d(B)
B = 

    [1]    [2]
    [3]    [4]
    [5]    [6]

>> to2d(B, [0 0 0])
Parsing argument 1
ans = 
    {1x2 cell}
    {1x2 cell}
    {1x2 cell}

Parsing argument 2
ans = 
    [0 0 0] 
```***

# php - 如何在没有 /n 的情况下拆分分隔文件？

> ID：12241445
> 
> 赞同：0
> 
> 时间：2012-09-03T02:48:14.730
> 
> 标签：php, parsing, fopen

我有这个数据：

```
920-1063-03@0001D92E@2012-07-02 920-1063-04@00002F5F@2012-07-02 920-1063-04@00002453@2012-07-02 920-1063-03@0001D256@2012-07-02 920-1063-03@0001E225@2012-07-02 920-1063-03@0001E3C1@2012-07-02 920-1063-04@00001EA6@2012-07-02 920-1063-03@0001D316@2012-07-02 920-1063-04@00002A41@2012-07-02 920-1063-04@00001ADA@2012-07-02 920-1063-04@00002DFD@2012-07-02 920-1063-03@0001C595@2012-07-02 920-1063-04@00001C24@2012-07-02 920-1063-04@00002341@2012-07-02 920-1063-04@00001645@2012-07-02 920-1063-04@00001C04@2012-07-02 
```

我试图用`@`符号分隔。

为此，我有以下代码：

```
<?php
    $filename = "tru_cage_DSB_sn";
    $fd = fopen ($filename, "r");
    $contents = fread ($fd,filesize ($filename));

    fclose ($fd); 
    $delimiter = "@";
    $splitcontents = explode($delimiter, $contents);
    $counter = "";
    foreach ( $splitcontents as $color ){ 
    $counter = $counter+1;
    echo "<b>Split $counter: </b> $color<br>";
    }
?> 
```

输出将是这样的：

```
Split 1: 920-1063-03
Split 2: 0001D92E
Split 3: 2012-07-02 920-1063-04
Split 4: 00002F5F
Split 5: 2012-07-02 920-1063-04 
```

但是，我希望拆分也`2012-07-02 920-1063-04`分成两个字符串，由空格分隔。所以输出应该是这样的？

```
Split 1: 920-1063-03
Split 2: 0001D92E
Split 3: 2012-07-02
Split 4: 920-1063-04
Split 5: 00002F5F
Split 6: 2012-07-02
Split 7: 920-1063-04 
```

我该如何进一步拆分？

或者，有没有办法将这些数据直接插入到具有 3 列的 mySQL 数据库中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T02:51:12.490

您可以使用[`preg_split`](http://www.php.net/manual/en/function.preg-split.php)而不是`explode`拆分由您要使用的任一分隔符组成的正则表达式：

```
$delimiter = "/@| /";
$splitcontents = preg_split($delimiter, $contents); 
```

此外，您可能应该初始化`$counter`为`0`空字符串而不是空字符串。

* * *

或者，正如[Ignacio 评论](https://stackoverflow.com/questions/12241445/how-do-i-split-a-delimited-file-without-n/12241462#comment16407452_12241445)的那样，使用[`fgets`](http://www.php.net/manual/en/function.fgets.php)逐行读取文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T03:01:07.987

```
<?php

$text = '920-1063-03@0001D92E@2012-07-02 920-1063-04@00002F5F@2012-07-02 920-1063-04@00002453@2012-07-02 920-1063-03@0001D256@2012-07-02 920-1063-03@0001E225@2012-07-02 920-1063-03@0001E3C1@2012-07-02 920-1063-04@00001EA6@2012-07-02 920-1063-03@0001D316@2012-07-02 920-1063-04@00002A41@2012-07-02 920-1063-04@00001ADA@2012-07-02 920-1063-04@00002DFD@2012-07-02 920-1063-03@0001C595@2012-07-02 920-1063-04@00001C24@2012-07-02 920-1063-04@00002341@2012-07-02 920-1063-04@00001645@2012-07-02 920-1063-04@00001C04@2012-07-02';

$matches = preg_split('#[@\s]#msi', $text);

if (count($matches)) {
    $counter = 0;
    foreach ( $matches as $color ){ 
        $counter = $counter++;
        echo "<strong>Split $counter: </strong> $color<br/>\n";
    }
}

?> 
```

输出：

```
<strong>Split 1: </strong> 920-1063-03<br/>
<strong>Split 2: </strong> 0001D92E<br/>
<strong>Split 3: </strong> 2012-07-02 <br/>
<strong>Split 4: </strong> 920-1063-04<br/>
<strong>Split 5: </strong> 00002F5F<br/> 
```

编辑：我用过`preg_split`马特提到的，简单得多。

# c++ - 设置 -fno-elide-constructors 时，clang Xcode 4.4.1 是否存在问题？

> ID：12241448
> 
> 赞同：3
> 
> 时间：2012-09-03T02:48:35.267
> 
> 标签：c++, xcode, c++11, clang, move-semantics

我正在尝试对自己进行移动构造函数和移动赋值的教育，以便让我的学生开始使用 C++11 的这一特性。我已经看到（并在本网站的其他地方解释过）编译器会在大多数情况下优化移动（或普通）构造，因此您无法在工作中看到它。在 gcc 4.7.0 中，-fno-elide-constructors 选项将关闭它，您可以看到移动构造正在发生。但是相同的标志应该（？）是 clang 选项，当我在 Xcode 4.4.1 中使用 clang、c++11 和 stdc++ 将其指定为“其他 C++ 标志”时，显然不会复制返回值或者根本搬出去！

这是完整的测试代码和带有问题发生位置注释的输出：

```
#include <iostream>
using namespace std;

class Array_Exception {
public:
Array_Exception (int v, const char * msg) :
    value (v), msg_ptr(msg) {}

int value;
const char * msg_ptr;
};

class Array {
public:
Array() : size(0), ptr(nullptr), serial_number(++counter) {
    cout << "Array " << serial_number << " default constructed";
    }

Array(int size_) : size(size_), serial_number(++counter) {
    if(size <= 0)
        throw Array_Exception(size, "size must be greater than 0");
    ptr = new int[size];
    cout << "Array " << serial_number << " constructed" << endl;
    }

Array(const Array& source) : size(source.size), ptr(new int[size]), serial_number(++counter) {
    for (int i = 0; i < size; i++)
        ptr[i] = source.ptr[i];
    cout << "Array " << serial_number << " constructed from " << source.serial_number << endl;
    }

// move constructor - take the guts from the source and leave it in a safely destructable state
Array(Array&& source) : size(source.size), ptr(source.ptr), serial_number(++counter) {
    source.size = 0;
    source.ptr = nullptr;
    cout << "Array " << serial_number << " move constructed from " << source.serial_number << endl;
    }

// copy the data from rhs into lhs object using copy-swap
Array& operator= (const Array& source) {
    Array temp(source);
    swap(temp);
    cout << "Array " << serial_number << " assigned from " << source.serial_number << endl;
    return *this;
    }

// move assignment just swaps source with this.
Array& operator= (Array&& source) {
    swap(source);
    cout << "Array " << serial_number << " move assigned from " << source.serial_number << endl; 
    return *this;
    }

// swap the member variable values of this object with the other (serial_numbers are NOT swapped)
void swap(Array& other) {
    int t_size = size;  // could use std::swap
    size = other.size;
    other.size = t_size;
    int * t_ptr = ptr;
    ptr = other.ptr;
    other.ptr = t_ptr;
    }       

~Array() {
    delete[] ptr; 
    cout << "Array " << serial_number << " destroyed" << endl;
    }   

int get_size() const {return size;}

// overloaded plus operator returns an Array containing the sum of the two
Array operator+ (const Array& rhs) { // "this" object is lhs
    // must have the same size
    if(size != rhs.get_size())
        throw Array_Exception(size, "LHS and RHS must have the same size for +");
    Array result(size);
    for(int i = 0; i < size; i++)
        result[i] = ptr[i]+rhs[i];
    return result;
    }

const int& operator[] (int index) const {
    if ( index < 0 || index > size - 1) {
        throw Array_Exception(index, "Index out of range");
        }
    return ptr[index];
    }

int& operator[] (int index) {
    if ( index < 0 || index > size - 1) {
        throw Array_Exception(index, "Index out of range");
        }
    return ptr[index];
    }

private:
int size;
int* ptr;
int serial_number;
static int counter; 
};

int Array::counter = 0;

void print_all(const char * msg, const Array& a);
Array reverse_contents(Array a); // call and return by value

int main()
{   

Array a(5), b(5), c(5);
for (int i = 0; i < 5; i++)
    a[i] = i;   // 0, 1, 2, 3, 4

try {            
    cout << "\ncall by value and assign from returned value:" << endl;
    print_all("a has", a);
    b = reverse_contents(a);
    print_all("b has reversed", b);

    cout << "\nassign from rvalue expression" << endl;
    c = a + b;
    print_all("c has sum", c);

    cout << "\nconstruct from rvalue expression" << endl;
    Array e(a + c);
    print_all("e has copy of a + c", e);

    cout << "\nconstruct from function return value" << endl;
    Array d(reverse_contents(a));
    print_all("d has returned reverse of a", d);

   }

catch (Array_Exception& x) {
    cout << x.msg_ptr << ' ' << x.value << endl;
    }

cout << "\nDone!" << endl;
}

void print_all(const char * msg, const Array& a) {
cout << msg << ": ";
for(int i= 0; i < a.get_size(); i++)
    cout << a[i] << ' ';
cout << endl;
}

Array reverse_contents(Array a) {
int n = a.get_size();
Array result(n);

for(int i = 0; i < n; i++) {
    result[i] = a[n-i-1];
    }
return result; 
} 
```

使用 clang 和 -fno-elide 构造函数运行它并不会走得太远：被调用函数中的局部变量在返回期间被销毁，我们最终从一个虚假对象进行了移动赋值：

```
Array 1 constructed
Array 2 constructed
Array 3 constructed

call by value and assign from returned value:
a has: 0 1 2 3 4 
Array 4 constructed from 1
Array 5 constructed
Array 5 destroyed  << local Array has been destructed
Array 2 move assigned from 0  << Array with serial_number == 0 is bogus object
Array 0 destroyed << bogus object destroyed here
Array 4 destroyed
b has reversed: << nothing in the returned result 
```

程序在下一个测试中停止，因为 b 中没有任何内容。

在 gcc 4.7.0 下运行的相同代码似乎很有意义，并显示了移动构造的工作： g++ -std=c++11 *.cpp -fno-elide-constructors

```
Array 1 constructed
Array 2 constructed
Array 3 constructed

call by value and assign from returned value:
a has: 0 1 2 3 4 
Array 4 constructed from 1
Array 5 constructed
Array 6 move constructed from 5
Array 5 destroyed
Array 2 move assigned from 6
Array 6 destroyed
Array 4 destroyed
b has reversed: 4 3 2 1 0 

assign from rvalue expression
Array 7 constructed
Array 8 move constructed from 7
Array 7 destroyed
Array 3 move assigned from 8
Array 8 destroyed
c has sum: 4 4 4 4 4 

construct from rvalue expression
Array 9 constructed
Array 10 move constructed from 9
Array 9 destroyed
Array 11 move constructed from 10
Array 10 destroyed
e has copy of a + c: 4 5 6 7 8 

construct from function return value
Array 12 constructed from 1
Array 13 constructed
Array 14 move constructed from 13
Array 13 destroyed
Array 15 move constructed from 14
Array 14 destroyed
Array 12 destroyed
d has returned reverse of a: 4 3 2 1 0 
Array 15 destroyed
Array 11 destroyed

Done!
Array 3 destroyed
Array 2 destroyed
Array 1 destroyed 
```

所以关闭省略在 gcc 4.7 中给出了一个合理的结果，但在 clang 中产生了损坏的代码。这是clang中的一个错误，还是clang实际上不支持该编译器选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T16:08:49.240

这看起来像这个 clang 错误：

[http://llvm.org/bugs/show_bug.cgi?id=12208](http://llvm.org/bugs/show_bug.cgi?id=12208)

# node.js - 在 express 3.x 中重定向后显示 flash

> ID：12241449
> 
> 赞同：3
> 
> 时间：2012-09-03T02:48:37.710
> 
> 标签：node.js, express

我了解`req.flash()`已从 express 3.x ( [source](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x) ) 中删除，建议`req.session`直接使用 (ie, `req.session.messages`)。

这不是问题，但是我很难弄清楚如何在重定向后在布局中显示此信息。我试过类似的东西

```
app.locals.messages = function() { return req.session.messages }; 
```

但我们显然无权访问该`req`对象。

`req.session.messages`重定向后如何显示内容？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-03T22:55:22.797

做就是了：

```
app.use(/* my session middleware */)
app.use(function(req, res, next) {
  res.locals.messages = req.session.messages
  next()
}) 
```

你将永远`messages`在你的视野中。它真的不必比这更复杂。

如果需要，您可以添加自己的`flash`功能。

```
app.use(function(req, res, next) {
  var session = req.session;
  var messages = session.messages || (session.messages = []);

  req.flash = function(type, message) {
    messages.push([type, message])
  }

  next()
}) 
```

而在你看来只是做`message = messages.pop()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-14T23:46:01.730

You can also use connect-flash [https://github.com/jaredhanson/connect-flash](https://github.com/jaredhanson/connect-flash)

# jquery - 如何使用 jquery 插件在 asp.net 中进行分页和搜索

> ID：12241453
> 
> 赞同：0
> 
> 时间：2012-09-03T02:49:32.520
> 
> 标签：jquery, asp.net

我用这个 jquery 插件（https://github.com/gbirke/jquery_pagination）在 asp.net 中创建了一个分页网格，工作正常。但我不知道如何进行搜索。我是新手，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T03:14:39.860

让我们暂时忽略 jQuery 并假设您将完全在 .NET 中实现搜索，大概是为了响应带有名为“ `q`”的查询字符串参数的 GET 请求。

您实际执行搜索的方式无关紧要：我假设您有某种数据库对象或 Lucene 索引搜索器可以为您提供结果，那么只需使用可选提供的分页查询字符串参数对该数据的结果进行分页（通常分别称为`start`和`count`)。

例如（用 MVC 的说法）

```
public ActionResult Search(String q, Int32? start, Int32? count) {

    // example using L2S or EF
    var results = from d in _db.Documents
                  where d.Content.Contains("q")
                  select d;
    if( start != null ) results = results.Skip( start.Value );
    results = results.Take( count != null ? count.Value : 25 );

    return View( results );
} 
```

现在，当您涉及 jQuery 时，我假设您想要异步进行搜索。然后只需重新实现服务器端`Search`操作，但返回 JSON、XML 或原始 HTML 片段而不是整个视图文档。

大概你会为文本框的按键事件执行一个事件处理程序（检测 Enter/Return 键），触发对 Search 控制器操作的 Ajax 请求，然后将响应转换为 HTML（如果还没有）然后将其插入您的结果表中。简单的。

由于各种原因，省略了进一步的技术细节。

# google-app-engine - 用于 Google App Engine 项目的基于云的持续构建服务器

> ID：12241458
> 
> 赞同：1
> 
> 时间：2012-09-03T02:50:39.307
> 
> 标签：google-app-engine

我被要求为 Google App Engine 项目 (python) 设置一个持续构建服务器。是否有人已经在云中配置了包含 Google App Engine SDK 的构建服务器？

我理想的解决方案是我可以克隆、启动和配置的公共 Amazon EC2 AMI（或 Google Compute Engine 映像）。我们的 GAE 代码托管在 Github 中，所以我的目标是设置 Github 以在每次对 Github 存储库有新提交时 ping 构建服务器，并让基于云的构建服务器实例重建并测试 GAE 项目。

有人知道现有的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T20:00:26.913

CloudBees 与 Jenkins 免费集成。

# javascript - 在样式表中声明元素后删除该元素的悬停属性

> ID：12241473
> 
> 赞同：1
> 
> 时间：2012-09-03T02:52:52.193
> 
> 标签：javascript, css, hover

`:hover`一旦在样式表中声明，是否可以删除或取消 效果？

例如..

我有一个`:hover`在样式表中有效果的类。对于此类中的一个元素（并且有很多），我不想有这些悬停效果。

因此，与其通过我想要这样做的每个课程，有没有办法简单地取消`:hover`效果？我在想这可能需要一些javascript。

更新一个简短的例子：

```
.class1 {a bunch of properties that vary based on the class}
.class1:hover {a bunch of properties that vary based on the class}
.class2 {a bunch of properties that vary based on the class}
.class2:hover {a bunch of properties that vary based on the class} 
```

对于其中一个类中的一个元素，我希望它不参与悬停庆祝活动，但仍希望它出现在类中。我不想只为悬停创建新类。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T03:57:32.740

在不知道悬停时更改的实际代码或属性的情况下，解决此问题的一种方法是将属性更改回来，例如：

[http://jsfiddle.net/MfqDg/](http://jsfiddle.net/MfqDg/)

```
<div class="class1"></div>
<div class="class1"></div>
<div class="class1"></div>​

.class1{
    width: 100px;
    height: 100px;
    border: 1px solid;
    margin: 20px;
}

.class1:hover{
    background: #000;
}

.class1:nth-child(2):hover{
    background: none;
}
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T03:20:42.657

只需更具体地定位您的目标即可。假设您有很多带有“foo”类的东西 - 而不是使用`.foo:hover {color:red}`, 然后`p .foo:hover {color:black}`, `table .foo:hover {color:black}`，只是说`.container p .foo:hover {color:red}`，那么其他实例将不会应用该样式。那有意义吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T17:58:10.660

据我收集...这是不可能的:(

# android - 按下电源按钮时，Asynctask 音乐不会停止

> ID：12241474
> 
> 赞同：2
> 
> 时间：2012-09-03T02:53:17.170
> 
> 标签：android, android-asynctask

在我的应用程序中，背景音乐由异步任务控制。按下主页按钮时，音乐关闭。按下电源按钮时，它会继续播放。我还意识到，如果我按下电源按钮然后恢复它，它会同时开始复制歌曲。

```
private single s;
private BackgroundSound mBackgroundSound = new BackgroundSound();

protected void onPause(){
    super.onPause();
    Log.d("mSTATE","PAUSE");
    s.onPause();
    mBackgroundSound.cancel(true);
}

public void onBackPressed() {
       super.onBackPressed();
       return;
}

protected void onDestroy(){
    super.onDestroy();
    Log.d("mState","DESTROY");
}

public void onWindowFocusChanged(boolean change){
    super.onWindowFocusChanged(change);

}

@Override
protected void onResume(){
    super.onResume();
    mBackgroundSound = new BackgroundSound();
    mBackgroundSound.execute(null);
    Log.d("mSTATE","RESUME");
    s.onResume();

}

@Override
protected void onStop(){
    super.onStop();
    Log.d("mSTATE","STOP");
    s.freeMemory();
    mBackgroundSound.end();

}

@Override
protected void onRestart(){
    super.onRestart();
    Log.d("mSTATE","RESTART");
}

@Override 
protected void onStart(){
    super.onStart();
    Log.d("mSTATE","STARTER");
}

public class BackgroundSound extends AsyncTask<Void, Void, Void> {
    private MediaPlayer player;
    protected void onPreExecute() {
        player = MediaPlayer.create(SingleActivity.this, R.raw.song);
    }
    @Override
    protected Void doInBackground(Void... params) {

        player.setLooping(true);
        AudioManager mAudioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE); 
         int currentVolume = mAudioManager.getStreamVolume(AudioManager.STREAM_RING);
         int maxRingerVolume = mAudioManager.getStreamMaxVolume(AudioManager.STREAM_RING);
         double proportion = currentVolume/(double)maxRingerVolume;
         int maxMusicVolume = mAudioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
         int volume = (int)(proportion * maxMusicVolume);
        player.setVolume(volume,volume); 
        player.setLooping(true);
        player.start(); 
        return null;
    }

    public void end(){
        player.stop();
        player.release();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T03:24:46.880

AFAIK 按下电源按钮时，只`onpause`调用而不`onstop`调用，由于没有其他活动进入前台，只有一个系统窗口出现在顶部。因此，您的结束通话没有被调用。

更好的方法是在 OnPause 而不是 onstop 中覆盖`Asynctask.onCancelled` 和调用方法`Asynctask.cancel`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T03:21:53.947

只需添加，您需要覆盖 onCancelled() 并在 doInBackground() 中添加检查。请参阅：[取消正在执行的 AsyncTask 的理想方法](https://stackoverflow.com/questions/2735102/ideal-way-to-cancel-an-executing-asynctask)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T02:59:03.167

你必须取消你的 asyncTask。您应该在 Activity 的 onDestroy() 中调用 asyncTask.cancel(true)。

# git - 触发器.io .gitignore

> ID：12241480
> 
> 赞同：3
> 
> 时间：2012-09-03T02:54:08.993
> 
> 标签：git, trigger.io

注意到当我为我的 Trigger.io 应用程序构建时，我在`.template/`和`development/`.

我应该忽略这些文件吗？`.gitignore`您想分享任何建议或文件吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T00:25:36.413

您需要保留在源代码管理中的唯一文件在您的`src`目录中。在那里，您也可以排除`identity.json`，因为不同的开发人员应该有自己的身份。

[如何将另一个协作者添加到我的 trigger.io 项目？](https://stackoverflow.com/questions/10822272/how-can-i-add-another-collaborator-to-my-trigger-io-project)

所以，如果你的 git repo 比 src 高一级，我会在我的 .gitignore 中有这个：

```
development
release
local_config.json
forge-error.log
src/identity.json 
```

当然，另一种选择（我倾向于）是仅源代码控制`src`并仅包含`identity.json`在您的 .gitignore ...

# javascript - 外部js文件如何工作

> ID：12241481
> 
> 赞同：2
> 
> 时间：2012-09-03T02:54:13.933
> 
> 标签：javascript

希望有人可以向我解释当我们通过脚本标签包含外部 js 文件时它们是如何工作的。

它像css文件一样工作吗？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T03:03:35.203

您需要了解 HTML 是浏览器呈现的文档。您可以包含各种其他资源

*   脚本（javascript 和浏览器支持的任何此类脚本）
*   样式表 (css)
*   图像（在 script/css/inline 元素中引用）
*   字体

当浏览器加载文档（HTML）（作为初始 HTTP 请求的一部分）时，它会尝试取消引用被引用的资源。如果存在对上述任何资源的引用，则浏览器会发出额外的 HTTP 请求以获取资源。如果您在 HTML 文档中嵌入了 javascript，则浏览器不会解释它，而是 javascript 引擎（浏览器的一部分）解释脚本并运行它。

**编辑** 另外，请参考 Marc B 提供的答案。

我建议您在任何现代浏览器中运行调试器，以了解如何发出资源请求。

![在此处输入图像描述](../Images/dc30066eae96b8b0f5de3be7f6b61014.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T02:58:29.423

给定

```
file.js:

alert('foo');

file.html:

<script type="text/javascript" src="file.js"></script> 
```

基本上没有什么不同，并且与以下内容完全相同：

```
file2.html:

<script type="text/javascript">
   alert('foo');
</script> 
```

除了第一个涉及另一个 http 请求，无论出于何种原因，它都可能失败，让您没有 JS 代码。另一方面，如果您不使用所有这些代码，那么在每个页面中嵌入所有 js 代码也是一种带宽浪费。

# jquery - .addClass 不工作

> ID：12241486
> 
> 赞同：2
> 
> 时间：2012-09-03T02:55:57.537
> 
> 标签：jquery

我正在尝试使用 .addClass() 将类添加到 div

这是我尝试的方法：

```
<script>
$("#circle").hover(function() {
    ("#circle").addClass("new_style");
});
</script> 
```

我有这个 div

```
<div id="circle" class="lol"></div> 
```

在检查元素并查看控制台后，我可以看到错误

```
"Uncaught TypeError: Object #circle has no method 'addClass' " 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T02:56:48.307

你错过了`$`之前`("#circle")`：

```
$("#circle").hover(function() {
    $("#circle").addClass("new_style");
}); 
```

但是，您根本不需要为该元素重新查询 DOM！

```
$("#circle").hover(function() {
    $(this).addClass("new_style");
}); 
```

即便如此，您也不需要重新 jQuery-ify 那个对象。重用 jQuery 对象以减少性能损失：

```
var $circle = $("#circle");

$circle.hover(function() {
    $circle.addClass("new_style");
}); 
```

* * *

有趣的是，[JSLint](http://www.jslint.com/)和[JSHint](http://www.jshint.com/)都没有发现这个草率的错误。

# c++ - 你如何在一个类的不同实例之间共享一个互斥锁？

> ID：12241487
> 
> 赞同：0
> 
> 时间：2012-09-03T02:56:21.760
> 
> 标签：c++, boost, synchronization, condition-variable, boost-mutex

我想知道如何在另一个类的不同实例中共享一个类中的互斥锁。

现在，我有一个类 Indexer，它有一个 Boost mutex 和 condition_variable 作为私有成员变量。我在 main 中创建了 Indexer 类的 auto_ptr，并将 Indexer 的指针传递给另一个类 Robot 的实例。

我这样做如下：

```
std::auto_ptr<Indexer> index_service(new Indexer());
Robot a(*index_service.get());
Robot b(*index_service.get());
Robot c(*index_service.get()); 
```

机器人的构造函数是：

```
Robot(Indexer &index_service)
{
  this->index_service = index_service;
} 
```

机器人的标题看起来像：

```
class Robot
{
   public:
     Robot(Indexer &index_service);
   private:
     Indexer index_service;
}; 
```

但是，由于互斥锁是不可复制的，我得到一个错误。

我正在考虑制作互斥锁和条件变量 shared_ptrs 但我读到这可能会导致意外行为。

有人可以告诉我正确/正确的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T03:39:13.730

我不是 C++ 大师，但似乎引用传递和指针的邪恶组合在这里很麻烦。

具体来说，你这样做：`this->index_service = index_service;`
但是值是作为传入的`Indexer &index_service`
并且由于本地 index_service 是类型`Indexer index_service;`
，我相信分配意味着复制。

我假设你只想要一个 的实例`Indexer`，所以你真的想在你的 Robot 类中存储对它的引用。为此，您需要让您的构造函数获取一个指针（`*index_service.get()`无论如何，这就是调用给您的）。此外，您希望您的类变量是指针类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:53:08.590

就像您可以使用`std::shared_ptr`的另一个选项一样，您可以`std::auto_ptr`在`Robot`类中使用更改`Indexer to`std::shared_ptr`。

```
class Robot
{
public:
    Robot( std::shared_ptr<Indexer> const &index_service)
    {
        this->index_service = index_service;
}
private:
   std::shared_ptr<Indexer> index_service;
};

std::shared_ptr<Indexer> index_service(new Indexer());
Robot a(*index_service.get());
Robot b(*index_service.get());
Robot c(*index_service.get()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T03:19:04.907

在你的类中声明一个静态 boost::mutex。请记住在您的 .cpp 文件中定义它。

在这里检查： [在类中使用静态互斥锁](https://stackoverflow.com/questions/2462961/using-static-mutex-in-a-class)

# asp.net-mvc-3 - 调试 Application_Error() 未捕获的错误

> ID：12241488
> 
> 赞同：0
> 
> 时间：2012-09-03T02:56:32.523
> 
> 标签：asp.net-mvc-3, iis, runtime-error, web-deployment

我有一个 MVC3 (C#) 应用程序引发了一个神秘错误（显示自定义错误页面），我在我的日志文件（我使用 NLog 进行日志记录）和 IIS 日志中都没有找到任何有关它的信息。

事实上它没有出现在我的日志文件中，我得出的结论是 Application_Error() 没有触发，因为否则它应该被记录下来。一旦发生此错误，它不会消失，直到我重新启动应用程序池。

**注意：**这与当 customError 为 On 时 Application_Error() 不触发无关。即使我将 customError 设置为 On。因为当我故意输入错误的 URL 时，我会得到自定义错误页面，并且我也可以在日志中看到它。

有人遇到过类似的问题吗？或者有人知道我应该研究什么吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T03:01:59.880

为了捕获给定域上的任何 URL，您需要所谓的包罗万象的路由，如下所示：

```
// this route is intended to catch 404 Not Found errors instead of bubbling them all the way up to IIS.
routes.MapRoute("PageNotFound", "{*catchall}", notFound); 
```

最后注册该路线。

关于问题的“接管 IIS 劫持”方面，您可能需要研究[system.webServer httpErrors](http://msdn.microsoft.com/en-us/library/ms690497%28v=vs.90%29.aspx)

# javascript - 解析复杂的json jquery

> ID：12241496
> 
> 赞同：1
> 
> 时间：2012-09-03T02:58:54.977
> 
> 标签：javascript, jquery, arrays, json, traversal

我正在尝试获取以下 json 数据：

```
{
  "count": 96,
  "value": {
    "title": "cotripWeatherStations",
    "description": "Pipes Output",
    "link": "http:\/\/pipes.yahoo.com\/pipes\/pipe.info?_id=f43ccc14ab9d1c88d537236e93c1525e",
    "pubDate": "Mon, 03 Sep 2012 02:17:48 +0000",
    "generator": "http:\/\/pipes.yahoo.com\/pipes\/",
    "callback": "",
    "items": [
      {
        "ws:Location": {
          "global:Latitude": "37.086807",
          "global:Longitude": "-104.521294"
        },
        "ws:Device": {
          "global:DeviceId": "6796",
          "global:CommonName": "025N008  RATON PASS (RWIS)",
          "global:Status": "enabled",
          "global:EntityId": "1",
          "global:RoadId": "31",
          "global:RoadName": "I-25",
          "global:Direction": "North",
          "global:MileMarker": "8",
          "global:LastUpdateDate": "2012-08-26T13:52:00.000-06:00",
          "global:Icon": "theme\/cotrip.org\/images\/devices\/icon_device_weather_station_with_cam_16x23.gif"
        }
      }
   ]
} 
```

以下代码给了我一个带有输出的警报，但没有数据：

```
var weather = $.getJSON("http://pipes.yahoo.com/pipes/pipe.run?_id=f43ccc14ab9d1c88d537236e93c1525e&_render=json&_callback=?", function(json) {
  alert("JSON Data: " + json.value["items"]);
}); 
```

我如何进一步遍历这个 JSON 到 'ws:Devise - "global:CommonName"

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T03:01:28.203

怎么样

```
json.value.items[0]['ws:Device']['global:CommonName'] 
```

?

[http://jsfiddle.net/zerkms/D2JKR/](http://jsfiddle.net/zerkms/D2JKR/)

# python - 这个python函数有什么作用？

> ID：12241499
> 
> 赞同：-1
> 
> 时间：2012-09-03T02:59:26.057
> 
> 标签：python, math

```
def f(b, n):
    assert isinstance(n, int) and n >= 0
    def _f(n):
        if n == 0: return 1
        else: return b ** _f(n-1)
    return _f(n) 
```

参加 Python 课程，我们必须解释它的作用，以便高中代数学生能够理解。我搞不清楚了。如果有人可以在不给我答案的情况下将我推向正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T05:06:55.440

函数计算`b`提升到自身的幂次 提升到自身的幂`n-1`次 where `n`is at least `1`。它等价于这个更简单的非递归函数：

```
def g(b, n):
    assert isinstance(n, int) and n >= 0
    ret = 1
    for _ in xrange(n):
        ret = b ** ret
    return ret 
```

它看起来像这样写成一个数学公式：

![函数的数学公式](../Images/8c78adbae46bc667ceb72597851ecc9c.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T03:14:46.640

~~似乎代码定义了一个[装饰器](http://simeonfranklin.com/blog/2012/jul/1/python-decorators-in-12-steps/)~~。**_fn**的内部定义是为了便于递归。该代码正在计算以下内容

```
b^(b^(b^(... (b^(b^0)))...)) 
```

即，给定

```
b = 2
n = 3 
```

该值将是：

```
16 = 2^(2^(2^(2^0) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T03:59:33.347

> 上 Python 课，我们必须解释它的作用，以便高中代数学生能够理解

函数*f*接受两个整数*b*和*n*。它将第一个*b*提高到第二个*n的幂，并将**n*减少1。重复此操作直到*n*为零，并返回累积结果。

这没有回答任何与 Python 相关的问题，例如“做`assert isinstance(n, int) and n >= 0`什么”，我将其留给 OP 作为练习。

# html - HTML 网站搜索表单

> ID：12241500
> 
> 赞同：0
> 
> 时间：2012-09-03T02:59:29.957
> 
> 标签：html, search

我正在尝试向网站搜索表单添加一个额外的参数。

[http://jsfiddle.net/n8SVV/](http://jsfiddle.net/n8SVV/)

我添加的是第一组 html 代码（Campus），但这似乎没有以任何有意义的方式与搜索交互。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T03:09:56.340

如果它在表单中并且搜索不受影响，则发生以下两种情况之一：

*   处理提交的脚本期望在不同的变量中指定校园（也许它期望“school_campus”或“campus_choice”等）
*   该脚本不支持校园参数。

这两种情况背后的根本原因是您不能只是将数据扔到脚本中并期望它能够工作。如果存在这样的事情，校园搜索 API 的文档会说什么？

我什至没有在目标页面上看到校园选择，所以我敢打赌您的问题是第二个问题。

# android - Android系统停止时如何处理活动？

> ID：12241504
> 
> 赞同：0
> 
> 时间：2012-09-03T03:00:17.077
> 
> 标签：android, lru, android-lru-cache

我很好奇当应用程序从屏幕上关闭并且用户切换到其他应用程序时应用程序的活动会发生什么。在activity圈中，activity会到达onStop()，那么在activity是onRestart()还是relaunch之前系统是如何处理的呢？引擎盖下到底发生了什么？还在缓存中，被 LRU 代替了？

任何人都有一些想法或知道一些讨论这个问题的文章？

如果可能的话，任何人都可以提到一些源代码来阅读吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T03:04:16.013

我建议你熟悉 Android 的 Activity 生命周期。根据系统需要，一旦从用户的视图中消失，活动可能会暂停或停止-> 销毁。看看这个页面 [http://developer.android.com/images/activity_lifecycle.png](http://developer.android.com/images/activity_lifecycle.png)

# c++ - 在 Windows 上运行的 GCC 代码编译器错误

> ID：12241507
> 
> 赞同：3
> 
> 时间：2012-09-03T03:01:13.540
> 
> 标签：c++, gcc, for-loop, compiler-errors

我有一段简单的代码给我一个编译器错误。我在 Visual Studio 下的 windows 环境中编译和运行它没有问题，但现在在 linux 下，使用 gcc，我遇到了问题。注意我正在使用**gcc 4.4.5**，并使用**-std=c++0x**指令。

此代码片段位于头文件 file_handling.h 中，其中包含所有必要的库（vector、string、fstream 等）。变量 'output_file' 是 LogFile 对象的成员，并在其他地方得到正确检查/实例化/等。代码本身非常简单，这就是我难过的原因：

```
template <typename T> void LogFile::put(std::string const & header, std::vector<T> const & data) {

  output_file << header << " " << std::scientific << data[0] << std::endl;

  for (std::vector<T>::const_iterator value = (data.begin()+1); value < data.end(); ++value) {
           output_file << *value << std::endl;
  }

} 
```

编译器声明：

```
In file included from file_handling.cpp:2:
file_handling.h: In member function 'void LogFile::put(const std::string&, const std::vector<T, std::allocator<_Tp1> >&)':
file_handling.h:132: error: expected ';' before 'value'
file_handling.h:132: error: 'value' was not declared in this scope
make: *** [file_handling.o] Error 1 
```

为什么 gcc 没有将“值”的原位声明视为 const_iterator？我尝试了以下方法作为健全性检查：

```
template <typename T> void LogFile::put(std::string const & header, std::vector<T> const & data) {
  std::vector<T>::const_iterator value;
  output_file << header << " " << std::scientific << data[0] << std::endl;

  for (value = (data.begin()+1); value < data.end(); ++value) {
           output_file << *value << std::endl;
  }

} 
```

并收到完全相同的编译器报告。鉴于这看起来很简单，并且在 Visual Studio 中运行良好，我对 gcc 和/或 Linux 环境有什么遗漏或误解？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T03:56:57.820

正确的形式应该是：

```
template <typename T> void LogFile::put(std::string const & header, std::vector<T> const & data) {

  output_file << header << " " << std::scientific << data[0] << std::endl;

  for (typename std::vector<T>::const_iterator value = (data.cbegin()+1); value != data.cend(); ++value) {
           output_file << *value << std::endl;
  }

} 
```

注意 typename 的添加，以及从 begin() 和 end() 到 cbegin() 和 cend() 的更改。

当您使用模板类型时，typename 是必需的。begin() 和 end() 不适用于 const_iterators。

编辑：显然 begin() 和 end() 将返回 const_iterators。由于增加了清晰度和强制返回类型，我从未将它们用于此目的，并且始终使用 cbegin() 和 cend()。我猜对每个人都是他自己的。

注意：为简化起见，您可以使用 c++11 中的新 auto 关键字。

```
template <typename T> void LogFile::put(std::string const & header, std::vector<T> const & data) {

  output_file << header << " " << std::scientific << data[0] << std::endl;

  for (auto value = (data.cbegin()+1); value != data.cend(); ++value) {
           output_file << *value << std::endl;
  }

} 
```

# fubumvc - 如何使用 Fubu 的 DisplayConversionRegistry 为 Edit 和 DisplayFor 转换不同的值？

> ID：12241515
> 
> 赞同：0
> 
> 时间：2012-09-03T03:02:54.613
> 
> 标签：fubumvc

我正在使用我自己的 DisplayConversionRegistry 后代来转换值以在 FubuMVC 中显示。这对于日期格式一致性等非常有用。但是，当通过 Edit 与 DisplayFor 在我的视图中输出时，我发现自己试图以不同的方式格式化/转换某些类型的值。

例如，我想在使用 DisplayFor 输出时使用货币符号显示货币值。但是，我**不**希望在使用 Edit 时输出货币符号。我还有其他情况，我需要与编辑器不同的格式值来显示。

有没有办法用 DisplayConversionRegistry 做到这一点，还是我错过了其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T05:44:17.797

据我所知，您必须为编辑器引入一个单独的约定，以覆盖您在 DisplayConversionRegistry 实现中配置的内容。你可以通过两种方式做到这一点：

1.  将表达式直接添加到您的 FubuRegistry 类中（对一次性有用）： [https ://gist.github.com/3741460](https://gist.github.com/3741460)

2.  提供您自己的 HtmlConventionRegistry 类并将其注册到您的 FubuRegistry 中（如果您的代码库中已经有 HtmlConventionRegistry 实现器，则很有用）： [https ://gist.github.com/3741471](https://gist.github.com/3741471)

# arrays - 使用 bash 计算文件中每个单词的出现次数

> ID：12241517
> 
> 赞同：2
> 
> 时间：2012-09-03T03:03:15.357
> 
> 标签：arrays, bash

我想计算文件中每个单词的出现次数，但结果是错误的。

```
#!/bin/bash
#usage: count.sh file

declare -a dict

for word in $(cat $1)
do
    if [ ${dict[$word]} == "" ] ;then
        dict[$word]=0
    else
        dict[$word]=$[${dict[$word]} + 1]
    fi
done

for word in ${!dict[@]}
do
    echo $word: ${dict[$word]}
done 
```

使用下面的测试文件：

```
learning the bash shell
this is second line
this is the last line 
```

bash -x count.sh 文件得到结果：

```
+ declare -a dict
++ cat book
+ for word in '$(cat $1)'
+ '[' '' == '' ']'
+ dict[$word]=0
+ for word in '$(cat $1)'
+ '[' 0 == '' ']'
+ dict[$word]=1
+ for word in '$(cat $1)'
+ '[' 1 == '' ']'
+ dict[$word]=2
+ for word in '$(cat $1)'
+ '[' 2 == '' ']'
+ dict[$word]=3
+ for word in '$(cat $1)'
+ '[' 3 == '' ']'
+ dict[$word]=4
+ for word in '$(cat $1)'
+ '[' 4 == '' ']'
+ dict[$word]=5
+ for word in '$(cat $1)'
+ '[' 5 == '' ']'
+ dict[$word]=6
+ for word in '$(cat $1)'
+ '[' 6 == '' ']'
+ dict[$word]=7
+ for word in '$(cat $1)'
+ '[' 7 == '' ']'
+ dict[$word]=8
+ for word in '$(cat $1)'
+ '[' 8 == '' ']'
+ dict[$word]=9
+ for word in '$(cat $1)'
+ '[' 9 == '' ']'
+ dict[$word]=10
+ for word in '$(cat $1)'
+ '[' 10 == '' ']'
+ dict[$word]=11
+ for word in '$(cat $1)'
+ '[' 11 == '' ']'
+ dict[$word]=12
+ for word in '${!dict[@]}'
+ echo 0: 12 0: 12 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T04:01:50.850

Using`declare -a dict`意味着每个键都被评估为一个数值，然后将其用作索引。如果你用文字来存储东西，那不是你想要的。改为使用`declare -A`。

* * *

此外，`$[ ]`它是一种非常过时的数学语法。即使是现代的 POSIX sh 也支持`$(( ))`，您应该使用它来代替：

```
dict[$word]=$(( ${dict[$word]} + 1 )) 
```

或者，利用仅 bash 的数学语法：

```
(( dict[$word]++ )) 
```

* * *

此外，使用`for word in $(cat $1)`在几个方面被破坏：

*   它不引用`$1`，因此对于带有空格的文件名，它会将名称拆分为几个单词并尝试将每个单词作为单独的文件打开。要仅解决此问题，您将使用`$(cat "$1")`or `$(<"$1")`（效率更高，因为它不需要启动外部程序 cat）。
*   它尝试将文件中的单词扩展为 glob - 如果文件包含`*`，则当前目录中的每个文件都将被视为一个单词。

相反，使用 while 循环：

```
while read -r -d' ' word; do
  if [[ -n ${dict[$word]} ]] ; then
    dict[$word]=$(( ${dict[$word]} + 1 ))
  else
    dict[$word]=1
  fi
done <"$1" 
```

# regex - 使用 Bash 查找 H1 文本

> ID：12241519
> 
> 赞同：0
> 
> 时间：2012-09-03T03:03:37.620
> 
> 标签：regex, bash

在这个标签中查找文本“这是标题”的正则表达式是什么？使用 Grep、Sed 或 Awk。

代码示例：

```
<h1 class="round title">
  <a href="/somepage">This is the title</a>
</h1> 
```

我在上面的 h1 标签上试过这个。

```
curl --silent http://domain.com/index.html | grep "<h1 class=\"round title\">" 
```

结果是：

```
<h1 class="round title"><a href="/somepage">This is the title</a></h1> 
```

我只需要“这是标题”的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T06:14:08.017

我通过以下命令得到了它。

```
curl --silent http://domain.com/index.html | grep -E "<h1.*><a.*>(.*?)</a></h1>" | sed 's/.*<a.*>\(.*\)<\/a>.*/\1/' 
```

谢谢你们。

# c - C中奇怪的宏声明

> ID：12241520
> 
> 赞同：1
> 
> 时间：2012-09-03T03:03:39.897
> 
> 标签：c, libusb, libusb-1.0

> **可能重复：**
> [为什么在 C/C++ 宏中有时会出现无意义的 do/while 和 if/else 语句？](https://stackoverflow.com/questions/154136/why-are-there-sometimes-meaningless-do-while-and-if-else-statements-in-c-c-mac)
> [do { ... } while (0) 有什么用？](https://stackoverflow.com/questions/257418/do-while-0-what-is-it-good-for)

探索 libusb-1.0.9 源代码，我发现了这样一行（`./os/poll_windows.c:78`）：

```
#define CHECK_INIT_POLLING do {if(!is_polling_set) init_polling();} while(0) 
```

对我来说，这是一样的：

```
#define CHECK_INIT_POLLING if(!is_polling_set) init_polling(); 
```

有什么理由循环那个表达式吗？

**更新：**

答案后我仍然无法意识到出了什么问题，以下示例有所帮助：

```
#include <stdio.h>

#define TEST if(test) foo();
#define TEST_DO do { if(test) foo(); } while(0)

int test = 1;
void foo() {
    printf("%s", "Foo called");
}

int main(int argc, char** argv) {
    if(argc > 1) TEST_DO; /* LINE 12 */
    else printf("%s", "skipping...");

    return 0;
} 
```

如果放在`TEST`第 12 行，编译器会报错`"error: ‘else’ without a previous ‘if’"`。
希望，这会帮助某人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T03:06:55.373

这是为了避免宏被替换后出现的错误，例如，想想如果`else`你的第二个版本之后会发生什么。

# haskell - Haskell 面试问题

> ID：12241521
> 
> 赞同：1
> 
> 时间：2012-09-03T03:04:05.917
> 
> 标签：haskell

由于没有人问过我在哪里可以找到 SO，而且我可能很快就会雇用一个 Haskell 开发人员，所以我想我会提出这个..

要问一些详细的口头问题，以证明对 Haskell 有很强的工作知识。我能想到一些好的问题和编码项目，但看看其他人的想法真的很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T03:30:21.350

我通常会问一些面试问题，从简单开始，然后再努力。最终，你会遇到一个足以让候选人失败或至少流汗的问题，然后你会看到他们如何应对压力。

所以对于 Haskell，你可以选择：

*   简单：生成素数列表
*   medium：编写一个函数，给出第 n 个斐波那契数
*   hard：演示 Monad 的使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T04:28:10.090

我的最爱之一是：

> 编写一个函数，按元素的频率对列表进行排序。列表中出现频率最低的元素应该排在最前面，出现频率最高的元素应该排在最后。例如，[3,2,1,2] 应按 [3,1,2,2] 排序。

我喜欢这样的问题，因为它们允许申请人提供一个简单的解决方案，并且仍然可以讨论更有效的替代方案。

当然，你会想在面试的后期问更复杂的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T06:31:26.323

“解释你认为 和 的相对优势和`Monad`劣势`Applicative`。`Arrow`”

“解释你认为使用类型族和依赖类型的相对优势和劣势。”

但主要是，您希望看到一些代码，然后在那里编写，并且您需要询问他们将如何在各种情况下开发解决方案的问题。

# linux - 如何在linux centos中更改根文件夹权限

> ID：12241526
> 
> 赞同：0
> 
> 时间：2012-09-03T03:04:34.550
> 
> 标签：linux, centos, root

我目前在我的 / 文件夹中有此权限。

`drwxr-xr-x`. 我已经看到任何人都可以打开该文件夹。

如何从中删除可执行权限以使其他权限保持不变还有我需要删除公共可执行权限的 / 中的任何其他主文件夹

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T03:06:33.607

通过删除可执行权限，`/`您将使其下的任何内容都无法访问。你可以这样做，`chmod -x /`但这是**非常不可取**的。

对于大多数实际目的，这将使普通用户无法访问所有内容。更糟糕的是，这可能会阻止与盒子的 ssh 连接，因此即使使用 root，您也需要对 tty 进行物理访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T03:05:49.893

```
chmod a-x / 
```

将从文件夹中删除/减去`x`所有 ( ) 的 e ecute 权限- 是否有特殊原因想要这样做？`'a'``/`

有关详细信息，请参阅此[chmod 手册页](http://ss64.com/bash/chmod.html)上的“符号模式” 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-25T06:54:43.073

要将目录中的所有文件夹和子文件夹（目录）权限更改为 755 `/path/to/directory`，请使用以下命令。

```
find /path/to/directory -type d -exec chmod 755 {} \; 
```

将目录内的所有文件权限更改为 644`/path/to/directory`

```
find /path/to/directory -type f -exec chmod 644 {} \; 
```

## 更多阅读：chmod - 了解文件夹和文件权限

```
0: no permission,
1: execute
2: write
3: write and execute
4: read
5: read and execute
6: read and write
7: read, write, and execute 
```

### 文件夹权限：

*   阅读：能够阅读文件夹内容，
*   写入：编辑文件夹数据。删除或在其中创建新文件/文件夹等，
*   执行：能够运行\执行文件夹内容。

### 同样，文件权限：

*   阅读：如果它是像 index.html 或 index.php 这样的文本文件，那么用户\浏览器就可以阅读它。
*   写入：更改其数据的能力。
*   执行：如果它是 index.php 之类的脚本，则运行它以从中获取结果数据。

# android - Galaxy Nexus html锚定到不同的文件

> ID：12241528
> 
> 赞同：1
> 
> 时间：2012-09-03T03:04:42.893
> 
> 标签：android, webview, anchor

我正在创建一个使用多个本地 html 文件（都在资产目录中）的应用程序。当我在文件 foo.html 中创建一个锚点并在 bar.html 中创建指向该锚点的链接，然后在我的 Galaxy Nexus 上查看它时，我的 webview 说该网页不可用。

我相当确定 html 已正确完成。w3c HTML5 验证器通过了它，当我在我的计算机上查看网页时，导航可以正常工作，并且当使用运行 2.2.3 而不是 Nexus 的摩托罗拉机器人时，该应用程序可以正常工作。

当锚点和指向它的链接在同一个 html 文件中时，锚点起作用，并且当链接中不包含锚点时，页面加载得很好（当然，不是在我希望它们所在的位置）。

如果有人对此有解决方案或有不同的方法，我会很高兴听到。

在我的研究中，我发现 Android 操作系统中存在一个类似问题的错误，但它被标记为已发布，所以我怀疑是它。 [http://code.google.com/p/android/issues/detail?id=17535](http://code.google.com/p/android/issues/detail?id=17535)

这里有一个类似的问题，[Android Webview Anchor Link (Jump link) not working](https://stackoverflow.com/questions/3039555/android-webview-anchor-link-jump-link-not-working)，但我没有任何滚动视图。

这是我唯一的活动：

```
package com.me.Foo;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.webkit.WebView;
//import android.webkit.WebViewClient;
import android.widget.Button;

public class Foo extends Activity implements OnClickListener {
    WebView browser;
    public static final String RDR = "RDR";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ((Button) findViewById(R.id.backButton)).setOnClickListener(this);
        ((Button) findViewById(R.id.forwardButton)).setOnClickListener(this);

        browser = (WebView) findViewById(R.id.webView);
        //browser.loadUrl("file:///android_asset/table_of_contents.html");
        browser.loadUrl("file:///android_asset/game_parameters.html#2.9");
    }

    @Override
    public void onClick(View v) {
        switch(v.getId()) {
        case R.id.backButton: 
            Log.d(RDR, "Back button pressed.");
            if(browser.canGoBack())
                browser.goBack();
            break;
        case R.id.forwardButton:
            Log.d(RDR, "Forward button pressed.");
            if(browser.canGoForward())
                browser.goForward();
            break;
        default:
            Log.d(RDR, "ERROR!  That button click is not handled.");
        }
    }
} 
```

这是我的 xml 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/naviagtionLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/backButton"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="50"
            android:text="@string/backward" />

        <Button
            android:id="@+id/forwardButton"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="50"
            android:text="@string/forward" />

    </LinearLayout>

    <WebView
        android:id="@+id/webView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/naviagtionLayout" />

</RelativeLayout> 
```

谢谢。

# c# - 使用 Uri 中的图像更改 Metro 应用程序背景

> ID：12241533
> 
> 赞同：0
> 
> 时间：2012-09-03T03:05:27.120
> 
> 标签：c#, image, microsoft-metro

我正在尝试将背景从黑色更改为来自 URI 的图像，我环顾四周，只能找到有关 XAML 代码的示例，但如果我想以编程方式完成这一切怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:17:03.780

```
this.Background =
    new ImageBrush
    {
        ImageSource = new BitmapImage
        {
            UriSource = uri
        }
    }; 
```

假设“this”是应用程序的布局根，并且页面或其他控件不会用自己的背景覆盖背景。

# python - 带有 openssl 的 Python 无法与普通用户帐户（Linux 用户）进行握手

> ID：12241534
> 
> 赞同：0
> 
> 时间：2012-09-03T03:05:35.573
> 
> 标签：python, openssl

我已经抓住了互联网，但无法得到答案。我创建了一个示例 cert.py 文件：

```
import ssl
import traceback

def getCert():
    try:
        m_cert = ssl.get_server_certificate(('www.verisign.com', 443))
    except Exception, e:
        print e
        traceback.print_exc()
        m_cert = ''

    print m_cert
getCert() 
```

我用“root”权限尝试了这个，它处理得很好，没有任何问题，但是当我切换到其他普通用户帐户时，我总是得到以下回溯：

```
Traceback (most recent call last):
  File "/tmp/cert.py", line 10, in getCert
    m_cert = ssl.get_server_certificate(('www.verisign.com', 443))
  File "/lib/python2.7/ssl.py", line 405, in get_server_certificate
  File "/lib/python2.7/ssl.py", line 299, in connect
  File "/lib/python2.7/ssl.py", line 283, in do_handshake 
```

我也尝试使用“openssl”来运行命令，我得到了相同的结果：root 很好，但是普通用户失败了。

任何人都可以对此提供一些提示吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T02:22:49.627

我有它失败的原因。原因是我系统中的 /dev/random 设置为 600，openssl 试图在未经许可的情况下访问它。

在我将 /dev/random 修改为 666 后，问题就解决了。

# javascript - 简单的 onclick 事件只工作一次

> ID：12241535
> 
> 赞同：0
> 
> 时间：2012-09-03T03:05:39.917
> 
> 标签：javascript, html, css, dom

请帮忙）为什么这个结构不起作用？增量只发生一次。

```
var player = document.getElementById("player");
var button = document.getElementById("button");

function moveDown(object) {
    object.style.top += 32;
}

button.onclick = function() {
    moveDown(player);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T03:16:29.903

尝试使用：

`object.style.top = parseInt(object.style.top, 10) + 32;`

代替

`object.style.top+=32;`

（并确保玩家`position`设置为`absolute`or `relative`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T03:20:30.210

演示：http: [//jsfiddle.net/SrQUh/1/](http://jsfiddle.net/SrQUh/1/)

```
var player = document.getElementById("player");
var button = document.getElementById("button");

function moveDown(object) {
  object.style.top = parseInt(object.style.top || 0) + 32 + 'px';
}

button.onclick = function() {
    moveDown(player);
}​ 
```

# java - 为什么这个java小程序在绘制图形之前就退出了？

> ID：12241536
> 
> 赞同：2
> 
> 时间：2012-09-03T03:05:48.400
> 
> 标签：java, swing, graphics, draw, joptionpane

我正在做我的第一个 java 项目，我很困惑。这将打开一个对话框以获取 0-255 之间的数字，检查它是否为整数并且在范围内，然后使用 int 为图形小程序的背景制作灰色阴影。我让它做它应该做的一切！但它不会绘制小程序。程序在最后一次调用 JOptionPane 后终止。

```
import javax.swing.JApplet;
import javax.swing.JOptionPane;
import java.awt.Graphics;
import java.awt.Color;

@SuppressWarnings("serial")
public class DrawingShapes extends JApplet
{
  private Shade shade = new Shade();
  private void getColor()
  {
    int rgb = 0;
    boolean useful = false;
    String number = JOptionPane.showInputDialog("Make this easy for me.\n"
    + "Type an integer between 0 and 255");
    {
      try
      {
        rgb = Integer.parseInt(number);
        if (rgb > 0 && rgb < 255)
        {
          useful = true;
          shade.setColor(rgb);
        }
        else
        {
          useful = false;
          number = JOptionPane.showInputDialog( null, "\"" + number + "\""
          + " is not between 0 and 255!\n"
          + "Lrn2 be doin' it right!" );
        }
      }
      catch (NumberFormatException nfe)
      {
      number = JOptionPane.showInputDialog(null, "\"" + number + "\""
      + " is not an integer!\n"
      + "Lrn2 be doin' it right!");
      }
    }
    if (useful)
    {
      JOptionPane.showMessageDialog(null, rgb + " will be the shade of gray.");
      //WHEN this message is closed, the program seems to quit.
      //System.exit(0);
    }
  }
  public static void main(String[] args)
  {
    new DrawingShapes().getColor();
  }
  public class Shade
  {
    private int color;
    public void setColor(int col)
    {
      color = col;
      System.out.println("color: " + color);
      System.out.println("col: " + col); //IT prints these lines....
    }
    public void paint (Graphics g) //Everything after this is sadly ignored.
    {
      int size = 500;
      setSize(size, size);
      int rgb = color;
      Color gray = new Color(rgb,rgb,rgb);
      setBackground(gray);
      System.out.println(rgb + " This should be the third time");
      g.drawOval(0, 0, size, size);
    }
  }
} 
```

我无法弄清楚“public void paint (Graphics g)”有什么问题，但它不会导致任何事情发生。我欢迎任何人的指正，我确定我犯了一个可笑的错误，因为我对这种语言不太满意......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T03:07:27.340

这不是一个applet 程序——是的，它扩展了JApplet，但是没有`init`方法，而是你有一个`main`方法——一个不会在applet 程序中调用的方法。请先阅读[JApplet 教程](http://docs.oracle.com/javase/tutorial/deployment/applet/index.html)，然后再进行其他操作。

其他建议：

*   同样，您将需要适当的`init()`覆盖。
*   不要直接在 JApplet 或任何顶级 Window 组件中绘制。
*   而是在`paintComponent(...)`JApplet 中显示的 JPanel 的方法中绘制。
*   不要在`paint(...)`or`paintComponent(...)`方法中设置背景颜色或更改 GUI 的状态。
*   您需要在方法覆盖中调用该`super.paintComponent(...)`方法`paintComponent(...)`，这通常是您的方法的第一个方法调用。
*   此外，您还需要阅读同一站点上的 Swing Graphics 教程，因为它对您有**很大**帮助。
*   如果你想创建一个桌面应用程序而不是一个小程序，那么你的攻击会有点不同，因为你不会有一个`init()`方法覆盖，你需要一个主方法，你会把你的组件到一个 JFrame 作为您的顶级窗口。
*   为了获得更好的帮助，请在您的问题中发布更少的借口和道歉（我已经删除了大部分），而是专注于以尽可能清晰的方式提供有用的信息。我们对您的情况并不感兴趣，因为我们对帮助解决您的问题很感兴趣，所以请帮助我们帮助您。

运气！

# c# - 使用列表进行 C# 递归编程

> ID：12241540
> 
> 赞同：2
> 
> 时间：2012-09-03T03:06:35.883
> 
> 标签：c#, class, recursive-datastructures

我正在开发一个程序，其中每个项目都可以包含一组项目（我正在制作一个菜单，它具有树状结构）

目前我将项目作为列表而不是数组，但我觉得我没有充分利用它来简化代码。我选择了一个列表而不是标准数组，因为接口（.add、.remove 等）很有意义。

我有代码来搜索结构并返回名称的路径（即 Item.subitem.subsubitem.subsubsubitem）。下面是我的代码：

```
public class Item
{
                                                                //public Item[] subitem; <-- Array of Items
    public List<Item> subitem;                                  // <-- List of Items

    public Color itemColor = Color.FromArgb(50,50,200);
    public Rectangle itemSize = new Rectangle(0,0,64,64);
    public Bitmap itemBitmap = null;
    public string itemName;

    public string LocateItem(string searchName)
    {
        string tItemName = null;

        //if the item name matches the search parameter, send it up)
        if (itemName == searchName)
        {
            return itemName;
        }

        if (subitem != null)
        {

            //spiral down a level
            foreach (Item tSearchItem in subitem)
            {
                tItemName = tSearchItem.LocateItem(searchName);

                if (tItemName != null)
                    break;  //exit for if item was found
            }
        }

        //do name logic (use index numbers)
        //if LocateItem of the subitems returned nothing and the current item is not a match, return null (not found)
        if (tItemName == null && itemName != searchName)
        {
            return null;
        }

        //if it's not the item being searched for and the search item was found, change the string and return it up
        if (tItemName != null && itemName != searchName)
        {
            tItemName.Insert(0, itemName + ".");  //insert the parent name on the left -->  TopItem.SubItem.SubSubItem.SubSubSubItem
            return tItemName;
        }

        //default not found
        return null;
    }

} 
```

我的问题是，是否有更简单的方法来处理列表？关于应该使用列表还是只使用数组，我一直在脑海中反复思考。我有一个列表的唯一原因是我不必在每次添加或删除项目时编写代码来调整数组的大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T04:53:01.427

列表听起来很棒。不过，我建议对您的定义进行一些修改。尝试像这样创建你的类：

```
public class Item : List<Item>
{
    public string Name;
} 
```

如果您`Item`从您那里继承，`List<Item>`则自动使其成为树而不需要该`subitem`字段。

这是我的完整版您的课程：

```
public class Item : List<Item>
{
    public string Name;

    private List<Item> LocateItems(string searchName)
    {
        if (this.Name == searchName)
            return (new [] { this }).ToList();

        var result =
            this
                .Select(s => s.LocateItems(searchName))
                .Where(x => x !=null && x.Count > 0)
                .FirstOrDefault();

        if (result != null)
            result.Add(this);

        return result;
    }

    public string LocateItem(string searchName)
    {
        var items = this.LocateItems(searchName);
        if (items == null)
            return null;
        else
            return String.Join(".", items.Select(i => i.Name).Reverse());
    }
} 
```

该方法`LocateItems`返回从匹配`Item`开始的列表`Item`，然后是所有父`Item`实例，直到并包括根。

我用这段代码测试过：

```
var foos = new Item() { Name = "Foo" };
var bars = new Item() { Name = "Bar" };
var qazs = new Item() { Name = "Qaz" };
var wees = new Item() { Name = "Wee" };

foos.Add(bars);
bars.Add(qazs);
foos.Add(wees);

Console.WriteLine(foos.LocateItem("Wee"));
Console.WriteLine(foos.LocateItem("Qaz"));
Console.WriteLine(foos.LocateItem("Bar"));
Console.WriteLine(foos.LocateItem("Foo")); 
```

我得到了这些结果：

```
Foo.Wee
Foo.Bar.Qaz
Foo.Bar
Foo 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T03:14:37.473

在这种情况下使用列表是完全可以接受的。如果性能是一个问题，那么阵列将是一个更好的选择 - 如果是这样，阵列会稍微快一些，但正如您所发现的那样，灵活性要低得多。

人们谈论得不够多的一件事是简单性是构建代码的重要基础。如果使用列表比数组更容易编写和维护，那么（在其他条件相同的情况下）使用列表是完全正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T03:35:26.020

我会建议列表。由于向数组添加/删除项目会重新分配内存，因此对于项目的动态集合（我假设是您的情况）列表通常总体上具有更好的性能。你可能想看看：

[Array 与 List<T>：何时使用哪个？](https://stackoverflow.com/questions/434761/array-versus-listt-when-to-use-which)

# javascript - 这种形式的 javascript 语法是什么？(`this.prototype[name] = func;`)

> ID：12241541
> 
> 赞同：0
> 
> 时间：2012-09-03T03:06:46.327
> 
> 标签：javascript, prototype

因此，我正在阅读 Douglas Crockford 关于[经典继承](http://www.crockford.com/javascript/inheritance.html)的文章，并在描述他为示例编写的糖时看到了以下代码：

```
Function.prototype.method = function (name, func) {
    this.prototype[name] = func;
    return this;
}; 
```

现在，我从未见过第二行使用的语法`this.prototype[name] = func;`.

你怎么能有一个与 一起使用的数组`this.prototype`？这是什么语法？还能用在什么地方？

# linux - Linux，将文件内容与文本字符串进行比较

> ID：12241545
> 
> 赞同：1
> 
> 时间：2012-09-03T03:07:12.780
> 
> 标签：linux, echo, wget, contain

我在使用这段 linux 代码时遇到了问题：

```
 FILE=$(wget 'https://dl.dropbox.com/s/ru72h4b984qpxxq/spotify.txt' -q -O -)

if [ "$FILE" == "|  |" ]
then
echo "File is a match" 
```

我不能让这个说法是真的。您介意检查 url 的内容并告诉我是否在垂直线或间距方面做错了吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T03:33:50.517

@MarkB 的观点很好：通常`=`在`[]`. 但是，您的具体问题似乎`wget`是返回一个杂散`\r`的回车字符。你可以看到这个

```
echo "$FILE" | hexdump -C 
```

假设您安装了 BSD 实用程序（您可能会这样做）。

这是一个修复：

```
FILE=$(wget 'https://dl.dropbox.com/s/ru72h4b984qpxxq/spotify.txt' -q -O - | sed 's/\r//') 
```

# android - 为什么这个 `onDraw` 没有被触发？

> ID：12241548
> 
> 赞同：1
> 
> 时间：2012-09-03T03:07:19.893
> 
> 标签：android, image, view, ondraw

我有一个正在扩展的自定义视图`View`：

```
public class MyView extends View {

    public List<Drawable> drawables = new ArrayList<Drawable>();

    public MyView(Context context) {
        super(context);
    }

    public MyView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public void addDrawable(Drawable drawable) {
        this.drawables.add(drawable);
        Log.i("myview", "new drawable added: " + drawables.size());
        invalidate();
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        Log.i("myview", "on draw, my drawables: " + drawables.size());
        for (Drawable d : drawables) {
            d.draw(canvas);
            Log.i("myview", "Draw drawable: " + d);
        }
    }
} 
```

我在 main.xml 中声明了它：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent">

    <Button android:id="@+id/btnAdd"
            android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="add"/>

    <com.example.MyView android:id="@+id/imageView"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:background="#6699cc">
    </com.example.MyView>

</LinearLayout> 
```

在我的活动中，当单击按钮时`Add`，将添加一个可绘制对象`MyView`：

```
public class MyActivity extends Activity {

    private Button btnAdd;
    private MyView myView;

    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        findViews();
        setListeners();
    }

    private void setListeners() {
        this.btnAdd.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                myView.addDrawable(getResources().getDrawable(R.drawable.m1));
            }
        });
        this.myView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
            }
        });
    }

    private void findViews() {
        this.myView = (MyView) findViewById(R.id.imageView);
        this.btnAdd = (Button) findViewById(R.id.btnAdd);
    }

} 
```

但它不起作用。当我单击“添加”按钮时，控制台会打印：

```
09-02 17:07:27.015: INFO/myview(1748): new drawable added: 1 
```

并且屏幕没有显示图像。该`onDraw`方法似乎没有触发，如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T03:22:59.777

您必须为`drawables`.

像这样的东西：

```
drawable.setBounds(10,10,100,100); 
this.drawables.add(drawable); 
```

# python - 金字塔遍历资源url无属性__name__

> ID：12241550
> 
> 赞同：0
> 
> 时间：2012-09-03T03:07:54.173
> 
> 标签：python, pyramid

所以我有：

资源.py：

```
 def _add(obj, name, parent):
     obj.__name__ = name
     obj.__parent__ = parent
     return obj

 class Root(object):
     __parent__ = __name__ = None

     def __init__(self, request):
         super(Root, self).__init__()
         self.request = request
         self.collection = request.db.post

     def __getitem__(self, key):
         if u'profile' in key:
             return Profile(self.request)

 class Profile(dict):

     def __init__(self, request):
         super(Profile, self).__init__()
         self.__name__ = u'profile'
         self.__parent__ = Root
         self.collection = request.db.posts

     def __getitem__(self, name):
         post = Dummy(self.collection.find_one(dict(username=name)))
         return _add(post, name, self) 
```

我正在使用 MongoDB 和`pyramid_mongodb`

视图.py：

```
@view_config(context = Profile, renderer = 'templates/mytemplate.pt')
def test_view(request):
    return {} 
```

在 mytemplate.pt 中：

```
 <p tal:repeat='item request.context'>
      ${item}
 </p> 
```

我可以回显数据库中的内容（我正在使用 mongodb），但是当我为每个项目提供 URL 时，使用`resource_url()`

```
 <p tal:repeat='item request.context'>
 <a href='${request.resource_url(item)}'>${item}</a>
 </p> 
```

我收到一个错误：`'dict' object has no attribute '__name__'`有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T07:17:26.860

那么完整的回溯肯定会很有用。但是，在您的示例中，我至少可以说`self.__parent__ = Root`需要使用实际对象，而不是类。

# java - 从 Eclipse 构建 Google App Engine Java 源代码

> ID：12241553
> 
> 赞同：0
> 
> 时间：2012-09-03T03:09:18.817
> 
> 标签：java, eclipse, google-app-engine, ant, osx-snow-leopard

我想尝试从源代码构建 Google App Engine for Java。

我试过这个：

![在此处输入图像描述](../Images/4a5baf38e05da1f8def5336f6088360e.png) ![在此处输入图像描述](../Images/f066e1234f4e92929f82b74b31527d9b.png) ![在此处输入图像描述](../Images/0959c0efe5e6ef69d236d975088493e8.png)

我不知道如何解决 javac Ant 任务。我在 Mac OS X 10.6.8 上。

我尝试从源代码创建 Java 项目的原因是，当我尝试调试/单步执行从 SVN 下载的源代码时，Eclipse 中出现了问题，并且它无法在正确的代码行跟踪执行。它似乎正在执行“评论行”？所以我没有准确跟踪代码路径。

我认为我最理想的需要是：

1) svn checkout 命令与最新 SDK 的 REV 号匹配 2) wget 命令下载匹配的 jar

# php - PHP读取csv字段在字段中包含新行

> ID：12241559
> 
> 赞同：1
> 
> 时间：2012-09-03T03:10:02.513
> 
> 标签：php, csv, newline

让我们看看我在 csv 字符串中有这个（从 cURL 输出中得到）：

```
"name";"gender";"address";"phone";\n
"John Doe"; "Male"; "Broke Street\n No. 69 South Pole";"911";\n 
```

类似的东西，我使用explode逐行到达，但是有一个字段也使用\ n作为新行，因此弄乱了我的数组索引。我该如何解决这个问题，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T03:13:26.147

在这种情况下，这是一个严重生成/损坏的 .csv。如果一个字段包含换行符，那么它应该被包围，`"`以便 csv 解析器可以告诉 line-break-to-start-new-record 除了 line-break-inside-a-field-just-to-make-a - 新线分开。

修复生成 csv 的任何内容，而不是尝试处理它吐出的垃圾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:18:42.217

Atm 我使用 str_replace 将 '";\n' 替换为 '";#n' 或您喜欢的其他内容，并使用 explode 拆分 #n 分隔符以获取每一行。

我想这就是现在对我有用的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T03:20:48.660

在您的情况下，这是格式错误的 csv。

实际上，您可以使用 preg_match_all 来解析该文件，而无需关心它是否为 csv。

例如：preg_match('#([^;]+);([^;]+);([^;]+);([^;]+)\s?#', $csv_file_content, $matches);

# android - Android真的需要使用游戏引擎吗？

> ID：12241564
> 
> 赞同：0
> 
> 时间：2012-09-03T03:10:59.850
> 
> 标签：android

我已经有足够的安卓经验来制作一个基本的游戏（比如乒乓球），但我现在想为安卓制作一个专业的游戏应用程序。您认为使用游戏引擎（例如 Andengine）来制作游戏真的值得付出额外的努力吗？或者我应该没有它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T03:22:17.210

这取决于你的游戏是做什么的。

有些游戏不需要游戏引擎；引擎会妨碍你。

其他游戏可以使用游戏引擎来实现 3D、碰撞检测、多人游戏支持等花哨的东西。如果您的游戏具有会消耗大量开发时间的功能并且已经在游戏引擎中提供，那么请节省您的时间并使用引擎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T03:16:57.890

这取决于您是否希望更多地快速制作游戏，或者在此过程中学习一些东西。

如果您想快速制作游戏，您可能应该尽可能多地研究中间件。编写引擎/库代码在很大程度上与构建实际游戏无关，有多少游戏使用其他人的库就证明了这一点。

如果您的目标是最终学习并制作游戏，那么*随着您逐渐编写更复杂的游戏*，编写库代码可能是值得的- 您不应该以现在就编写极其复​​杂的游戏*并*编写引擎为目标同时。

我的建议是继续编写更复杂的游戏（下一个可能是 Space Invaders 的克隆版？），向它们学习，然后看看你是否开始重用代码，然后也许将其撞到一个“引擎”中。如果您想使某些东西变得非常复杂，那么可能需要数年才能获得可玩的东西，如果有的话，以这种方式。

# parsing - 构造Scala解析器组合器代码的正确方法是什么？

> ID：12241567
> 
> 赞同：1
> 
> 时间：2012-09-03T03:11:35.683
> 
> 标签：parsing, scala, coding-style, formatting

因为 Scala Parsers 库要求您对 Parsers 进行子类化，这最终为您留下了特定的 Parser 实现，所以您似乎无法真正将其分离为多个类或对象，除非它们在类的范围内最初是解析器的子类。处理这个问题的正确方法是什么，这样我就不必连续有 50 个惰性 val？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T04:35:59.897

就个人而言，我认为做到这一点的方法是将所有内容保存在一个类中，或者，如果有意义的话，创建一个继承层次结构来扩展概念，就像`JavaTokenParsers`extends `RegexParsers`which extends一样`Parsers`。此外，通过将词法从语法中分离出来，使用标记化解析器会有所帮助。

除此之外，将其保存在一个地方：拆分语法会导致理解的噩梦。所有其余的——AST 类，以及对它们进行操作的代码，不需要与解析器一起保存。

现在，如果这真的不是您的测试，您可以将它们拆分为特征，并使用自身类型在特征之间创建必要的依赖关系。他们只是创建一个继承自所有特征的大类（或对象）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T03:57:35.573

您可以将不同的组件拆分为`trait`扩展相同父`Parser`类型的 s，然后将它们混合在一起以创建最终解析器。显然，一些解析器组合器将依赖于其他组合器，但至少基本解析器（例如终端解析器）可以通过这种方式分解。无论如何，您可能不想将其拆分为太多不同的类/特征，否则如果代码被拆分到太多不同的文件中，则可能很难分析解析器在做什么。

# php - Google SEO - 如何获得这样的网站搜索结果？

> ID：12241572
> 
> 赞同：0
> 
> 时间：2012-09-03T03:12:00.383
> 
> 标签：php, search, seo

嗨，我只是想知道在谷歌上输入我的网站时我必须做什么才能获得这样的搜索结果，这种技术叫什么，我需要在我的网站中添加什么代码？

![在此处输入图像描述](../Images/6f9210da62f52958708f79dd8c6d4869.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T03:20:03.567

它们被称为附加链接：[https ://support.google.com/webmasters/bin/answer.py?hl=en&answer=47334](https://support.google.com/webmasters/bin/answer.py?hl=en&answer=47334)

但是，如何让它显示并不简单，您需要以 Google 认可的方式设置您的网站布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T03:16:45.267

在搜索特定品牌时，这是自动的。尝试任何你能想到的品牌——如果我搜索我当地的比萨店，我会得到相同的显示。

# jquery - JQuery 悬停和单击事件

> ID：12241576
> 
> 赞同：0
> 
> 时间：2012-09-03T03:12:44.743
> 
> 标签：jquery

我在页面上有许多人的照片，我想在鼠标悬停时显示一个人的备用照片，并在鼠标移出时将照片恢复为默认值。我还希望在有人单击照片以查看他们的个人资料（显示在侧边栏上）时显示备用照片。当有人点击其他人时，将为该人显示默认照片。我无法结合单击和悬停事件来实现这一点。

这是我到目前为止所拥有的。我在那里聚会，但是这不会将以前查看的个人资料图片恢复为其默认照片。当点击不同的个人资料图片时，如何从以前查看的个人资料中删除点击事件？

```
 $('.rollover').click(function() {
        $(this).unbind('mouseout'); 
    }).mouseover(function() {
          img_src = $(this).attr('src'); //grab original image
          new_src = $(this).attr('rel'); //grab rollover image
          $(this).attr('src', new_src); //swap images
          $(this).attr('rel', img_src); //swap images
    }).mouseout(function() {
          $(this).attr('src', img_src); //swap images
          $(this).attr('rel', new_src); //swap images
    }); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T04:44:49.343

rel 属性仅适用于锚点和链接标签。你应该尝试另一种选择。我在[这里](http://jsfiddle.net/8eMFp/1/)创建了一个小提琴。让我们看看这是否是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T03:16:59.057

您可以使用该`on`方法绑定单击处理程序。

```
$(document).on({
    mouseenter: function () {
      img_src = $(this).attr('src'); 
      new_src = $(this).attr('rel'); 
      $(this).attr('src', new_src); 
      $(this).attr('rel', img_src); 
    },
    mouseleave: function () {
      $(this).attr('src', img_src); 
      $(this).attr('rel', new_src); 
    }, 
    click: function() {
     // ...
    },
}, ".rollover"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T21:41:38.357

这就是我最终做的事情，并且按照我的意愿工作。可能有一种方法可以简化这一点，我愿意接受建议。感谢那些回答的人。

```
jQuery(document).ready(function($) {

//rollover swap images with rel 
  var img_src = "";
  var new_src = "";

$('.rollover').click(function() {

        if($(this).hasClass("clicked"))
    {
            //do nothing if this element has already been clicked
    }
    else 
    {   
        //Unbind the hover effect from this element
        $(this).removeClass("rollover");
        $(this).unbind('mouseenter').unbind('mouseleave')

        //Go through and find anything having 'clicked' class -
        //in theory, there should only be one element that has the 'clicked' class at any given time.
        $('.clicked').each(function (){
                $(this).removeClass("clicked");
                $(this).addClass("rollover");

                //Swap the images
                img_src = $(this).attr('src'); //grab original image
                new_src = $(this).attr('rel'); //grab rollover image
                $(this).attr('src', new_src); //swap images
                $(this).attr('rel', img_src); //swap images

                //Rebind hover (since we unbound it back up there ^^) to this *specific* element.
                //If you do $(".rollover") to rebind, it kills all the other existing binds and binds ONLY this element.
                $(this).hover(function(){
                        img_src = $(this).attr('src'); //grab original image
                        new_src = $(this).attr('rel'); //grab rollover image
                        $(this).attr('src', new_src); //swap images
                        $(this).attr('rel', img_src); //swap images
                        });
                }); 

        $(this).addClass("clicked");

    } 
});

$(".rollover").hover(function(){
      img_src = $(this).attr('src'); //grab original image
      new_src = $(this).attr('rel'); //grab rollover image
      $(this).attr('src', new_src); //swap images
      $(this).attr('rel', img_src); //swap images
    });

}); 
```

# java - 前面表达式中的减号操作数

> ID：12241583
> 
> 赞同：1
> 
> 时间：2012-09-03T03:14:43.587
> 
> 标签：java, parsing, calculator

## JAVA RPn 解析器

`else if (token.equals("-")) { op2 = stack.pop(); op1 = stack.pop(); stack.push(op2*-1);}`

如果我输入的是“-4”或数字前面有减号的东西，它会带来错误

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T03:27:18.853

如果要在 RPN（反向波兰表示法）中解析负数，则需要在将数字推送到堆栈之前在解析器中检测 then。

如果您正在阅读减号并且下一个符号（在空格之前）是一个数字，它将是数字的一部分。看一看：

```
import java.util.*;

public class RPNParser {

    public static void main( String[] args ) {

        String rpnExp = "-4 3 + 5 * 3 - -61 *";
        String[] tokens = rpnExp.split( " " );

        Stack<Integer> stack = new Stack<Integer>();
        Integer op1 = null;
        Integer op2 = null;
        Integer result = null;

        for ( String token : tokens ) {

            if ( token.equals( "+" ) ) {
                op2 = stack.pop();
                op1 = stack.pop();
                stack.push( op1 + op2 );
            } else if ( token.equals( "-" ) ) {
                op2 = stack.pop();
                op1 = stack.pop();
                stack.push( op1 - op2 );
            } else if ( token.equals( "*" ) ) {
                op2 = stack.pop();
                op1 = stack.pop();
                stack.push( op1 * op2 );
            } else if ( token.equals( "/" ) ) {
                op2 = stack.pop();
                op1 = stack.pop();
                stack.push( op1 / op2 );
            } else {
                stack.push( Integer.valueOf( token ) );
            }

        }

        result = stack.pop();
        System.out.printf( "%s = %d\n", rpnExp, result );

    }

} 
```

如您所知：

```
-4 3 + 5 * 3 - -61 * = ((((-4 + 3) * 5) - 3) * -61) = 488
        postfix                     infix             result 
```

如果您想手动解析您的字符串（不使用拆分），您将需要做更多的工作，但这真的很容易。

```
String rpnExp = "-4    3 + 5 * 3 - -61 *";
StringBuilder newToken = new StringBuilder();
List<String> tokens = new ArrayList<String>();

for ( char c : rpnExp.toCharArray() ) {
    // the current char is a space?
    if ( c == ' ' ) {
        // yes, it is.
        // the new token has something?
        if ( newToken.length() > 0 ) {
            // yes, it has
            // add its value to the token list
            tokens.add( newToken.toString() );
            // resets new token
            newToken = new StringBuilder();
        }
    } else {   // c is not a space
        // yes, so add it to the newToken
        newToken.append( c );
    }
}

// needs to process the last value of newToken
// so, if it has something
if ( newToken.length() > 0 ) {
    // add the value to the token list
    tokens.add( newToken.toString() );
}

Stack<Integer> stack = new Stack<Integer>();
// the rest of the code here ... 
```

# delphi - 如何制作一个检测表单上是否有新组件的 CustomComponents

> ID：12241585
> 
> 赞同：4
> 
> 时间：2012-09-03T03:15:17.740
> 
> 标签：delphi, notifications, custom-component, skins

我在delphi2009中创建了自定义组件SkinMgr和SkinPanel。我希望这两个组件自动链接在一起，即使 SkinMgr 位于 DataModule 或其他形式的任何位置。

任何帮助、样品或建议。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T08:11:20.557

这是一个使用`TActionList`后代的快速测试 和`TCustomActionManager`：当在设计时将组件实例`TActionListEx`拖放到表单上时，它会枚举所有当前项目的模块并尝试找到具有`TCustomActionManager`. 如果它找到一个，它将新创建的添加`TActionListEx`到它的`LinkedActionLists`集合中。

运行时包：

```
unit TestComponents;

interface

uses
  System.Classes, Vcl.ActnList;

type
  TActionListEx = class(TActionList)
  public
    constructor Create(AOwner: TComponent); override;
  end;
  TNotifyProc = procedure(Sender: TObject);

var
  CreateNotify: TNotifyProc = nil;

implementation

{ TActionListEx }

constructor TActionListEx.Create(AOwner: TComponent);
begin
  inherited Create(AOwner);
  if (csDesigning in ComponentState) and Assigned(CreateNotify) then
    CreateNotify(Self);
end;

end. 
```

设计时包：

```
unit TestComponentsDesign;

interface

procedure Register;

implementation

uses
  System.Classes, System.SysUtils,
  Vcl.ActnMan,
  ToolsAPI,
  TestComponents;

procedure CreateNotifyProc(Sender: TObject);
var
  ActionList: TActionListEx absolute Sender;
  ModuleServices: IOTAModuleServices;
  ActiveProject: IOTAProject;
  I, J: Integer;
  ModuleInfo: IOTAModuleInfo;
  Module: IOTAModule;
  Editor: IOTAFormEditor;
  RootComponent: IOTAComponent;
  Component: INTAComponent;
  ActionManager: TCustomActionManager;
  ActionListItem: TActionListItem;
begin
  if not (Sender is TActionListEx) or not (csDesigning in ActionList.ComponentState) then
    Exit;

  if not Supports(BorlandIDEServices, IOTAModuleServices, ModuleServices) then
    Exit;

  ActiveProject := ModuleServices.GetActiveProject;
  if not Assigned(ActiveProject) then
    Exit;

  for I := 0 to ActiveProject.GetModuleCount - 1 do
  begin
    Module := nil;
    Editor := nil;
    RootComponent := nil;

    ModuleInfo := ActiveProject.GetModule(I);
    if Assigned(ModuleInfo) and (ModuleInfo.FormName <> '') then
      Module := ModuleInfo.OpenModule;

    if Assigned(Module) then
      for J := 0 to Module.ModuleFileCount - 1 do
        if Supports(Module.ModuleFileEditors[J], IOTAFormEditor, Editor) then
          Break;

    if Assigned(Editor) then
      RootComponent := Editor.GetRootComponent;

    if Assigned(RootComponent) then
      for J := 0 to RootComponent.GetComponentCount - 1 do
        if Supports(RootComponent.GetComponent(J), INTAComponent, Component) and (Component.GetComponent is TCustomActionManager) then
        begin
          ActionManager := TCustomActionManager(Component.GetComponent);
          ActionListItem := ActionManager.LinkedActionLists.Add as TActionListItem;
          try
            ActionListItem.ActionList := ActionList;
            Editor.MarkModified;
            Exit;
          except
            ActionListItem.Free;
            raise;
          end;
        end;
  end;
end;

procedure Register;
begin
  RegisterComponents('Test', [TActionListEx]);
  CreateNotify := CreateNotifyProc;
end;

initialization

finalization
  CreateNotify := nil;

end. 
```

# javascript - 如何从数字列表中选择最小的数字？

> ID：12241586
> 
> 赞同：0
> 
> 时间：2012-09-03T03:15:52.397
> 
> 标签：javascript, list, numbers

我有四个可能相同但或很可能不同的数字。基本上我希望这个函数选择不相等的数量，但如果它们不相等，则选择最低的一个，如果有两个相同，则只选择其中一个并继续。

例如，我有`3434`、`3396`、`3414`和`3374`。好吧，我希望函数返回给我说`0`它们是否都相同，`1`对于第一个等等。所以在这种情况下我需要被退回`4`。

但如果数字是`321`, `576`, `812`,`321`它会返回给我`1`。

我已经在这里待了几天了，我似乎找不到任何方法来做我需要做的事情。任何人都知道可以使这项工作神奇地工作的东西吗？谢谢！

**编辑** 我的方法让我按照创建数组排序并尝试使用最后一个结果的方式做一些事情，但是当我对数组进行排序时，键会弄乱所以我不知道它属于哪个值

```
 var choices = new Array();
 choices[1] = parseInt(value1);
 choices[2] = ...
 choices = choices.sort();
 //and then I ran into the problem that my keys being not starting 
 //with 0, it added an element which I was able to remove by doing this
 choices = choices.splice(0,4); 
```

然后我被困在那里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T03:18:43.367

这是回答您问题的旅程的开始。正如其他人所指出的，这段代码并不能处理您提到的所有情况；这是故意的。

> 如何从数字列表中选择最小的数字？

手卷方式；`O(n)`一通：

```
var myList = [3434, 3396, 3414, 3374];
var min = Infinity;
var minIndex = -1;
var current;

for (var i=0; i<myList.length; i++)
{
    current = myList[i];
    if (current < min)
    {
        min = current;
        minIndex = i;
    }
}

// the value you want is in minIndex 
```

更简洁；也`O(n)`只有两次通过数组：

```
var min = Math.min.apply(null, myList);
var minIndex = myList.indexOf(min); 
```

**NB** `Array.indexOf`在旧版本的 IE 中需要 shim。

* * *

> 基本上我希望这个函数选择不相等的数量

正如他们所说，这个练习留给读者。

# node.js - 在 mongoose Schema 中定义一个唯一的数字数组

> ID：12241588
> 
> 赞同：4
> 
> 时间：2012-09-03T03:16:32.773
> 
> 标签：node.js, mongodb, schema, unique, mongoose

我想在节点上的猫鼬中存储大量数组。我想确保这些数组包含唯一的数字集合。这是我的架构：

```
var schema = new Schema({
    array: { type: [Number], unique: true, required: true }
}); 
```

它不起作用。例如，创建和保存几个新的数据库模型，它们有几个（我称之为唯一的）数组：

```
new Model({ array: [1,2] })
new Model({ array: [0,2] }) 
```

...导致：

```
E11000 duplicate key error index: test2.modes.$array_1  dup key: { : 1 } 
```

..所以看起来“唯一”正在检查这些数组中的每个索引的唯一性，而不是整个数组是否唯一。

还有另一种方法可以一步完成吗？或者我是否必须在数据库上执行查找，比如在 schema.pre('save', fn) 内部，以检查数组是否唯一？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T03:46:03.920

好的，所以代替更好的方法，这就是我解决它的方法，使用保存钩子和额外的字符串：

```
var schema = new Schema({
    array: { type: [Number], required: true }
    _arraySignature: { type: String, unique: true }
});

schema.pre('save', function(next) {
    this._arraySignature = this.array.join('.');
    next();
}); 
```

...但我只能这样做，因为我知道我的数组将被排序，永远不会包含多个相同的数字，并且是不可变的。有点难看。我很想知道是否有更好的方法。

# java - setfill() 和 setw() Java 等价物？

> ID：12241593
> 
> 赞同：3
> 
> 时间：2012-09-03T03:17:31.123
> 
> 标签：java, string, padding

我有一个任务，我们需要使用 toString() 方法创建一个 User 类。toString 方法应该返回一个包含用户所有信息的字符串。我们需要创建一个包含 50 个用户对象的数组，并在单独的行上打印有关每个用户的信息。问题是，我想把所有东西都放在一个整齐的桌子上，所有字符串的长度都一样。例如：

```
User Name          Password          Full Name                     Email
___________________________________________________________________________________________
shortUser          12345             John Smith                    jSmith@shortnames.com
thisUserIsLonger   1234567890        Smitty Werbenjagermanjensen   Smitty@thisOneIsLong.com 
```

我想让所有内容保持一致，如上表所示。这在 C++ 中很容易，因为我可以使用 setw() 根据字段的大小动态填充空格。在 Java 中这样的事情可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T03:53:28.423

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T04:18:28.393

有很多方法可以存储数据并根据需要进行检索，例如：存储在 DBMS 中或序列化数据

由于没有太多数据，我会坚持序列化。

1.  首先，您需要创建 person be 类。

    ```
    class Person{
    String name;
    String pwd;
    String email;
    String fullName;

    // make the getters and setters

    } 
    ```

2.  使用 setter设置`Person`数据（您可以使用循环）

3.  将对象 person 添加到 ArrayList

    ```
    arrayListObj.add(person1); 
    ```

4.  [序列化 ArrayList](http://www.rgagnon.com/javadetails/java-0075.html)

    尝试 { System.out.println("序列化列表"); FileOutputStream fout = new FileOutputStream("list.dat"); ObjectOutputStream oos = new ObjectOutputStream(fout); oos.writeObject(arrayListObj); oos.close(); } 捕捉（异常 e）{ e.printStackTrace(); }

5.  反序列化如下

    ```
     try {
         FileInputStream fin = new FileInputStream("list.dat");
         ObjectInputStream ois = new ObjectInputStream(fin);
         List<String> list = (ArrayList) ois.readObject();

         for (String s : list){
             System.out.println(s);
         }

         ois.close();
     }
     catch (Exception e) { 
         e.printStackTrace(); 
     } 
    ```

6.  反序列化后，您可能必须使用[迭代器](http://www.java-examples.com/iterate-through-elements-java-arraylist-using-iterator-example)来调用列表

这些是您实现目标可以遵循的基本步骤！

说完之后就是打印结果了。

# jquery - jqueryrotate 适用于 IE7 和 IE8，但不适用于 IE9

> ID：12241594
> 
> 赞同：0
> 
> 时间：2012-09-03T03:17:34.057
> 
> 标签：jquery, jquery-plugins

旋转东西的好小插件：[http ://code.google.com/p/jqueryrotate/](http://code.google.com/p/jqueryrotate/)

这是一个很好的例子，它适用于 IE7、IE8、FF、Chrome 等，关于如何使它作为时钟工作： http: [//d-zig.com/demo/46e3ec48-0f71-4615-8798-61cd83266659 /](http://d-zig.com/demo/46e3ec48-0f71-4615-8798-61cd83266659/)

它不适用于 IE6，但我并不感到惊讶或失望。

令人失望和令人惊讶的部分是它适用于早期版本的 IE，但不适用于 IE9！

这是一个初始的 jsFiddle [http://jsfiddle.net/KurKa/](http://jsfiddle.net/KurKa/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T03:24:41.350

我查看了[http://d-zig.com/demo/46e3ec48-0f71-4615-8798-61cd83266659/](http://d-zig.com/demo/46e3ec48-0f71-4615-8798-61cd83266659/)的来源，它使用的是 jquery 1.4.1，这可以解释为什么它不起作用但你的小提琴可以. 我相信这很可能是因为您的小提琴使用的是 jquery 1.7.2。

过去，我曾使用过一些在 IE9 中无法使用的 jquery 插件，因为我使用的是旧版本的 jquery。如果升级jquery，问题应该可以解决。

编辑：我相信我的假设是正确的。Jquery 直到版本 1.5.1 才支持 IE9。此信息可[在 jquery 1.5.1 发布的博客文章中找到](http://blog.jquery.com/2011/02/24/jquery-151-released/)

# objective-c - Objective-C 的“obj performSelector”与 objc_msgSend()？

> ID：12241596
> 
> 赞同：11
> 
> 时间：2012-09-03T03:18:01.437
> 
> 标签：objective-c, ios, cocoa

在浏览 Apache Cordova 的源代码时，我遇到了两行令我感到困惑的代码：

```
 //[obj performSelector:normalSelector withObject:command];
    objc_msgSend(obj,normalSelector,command); 
```

从Apple的文档来看，这两种方法似乎没有太大区别。

**id objc_msgSend(id theReceiver, SEL theSelector, ...)** 将带有简单返回值的消息发送到类的实例。

**- (id)performSelector:(SEL)aSelectorwithObject:(id)anObject** 以对象作为参数向接收者发送消息。（必需的）

这两种方法究竟有什么区别？在上述情况下，两者都将带有对象作为参数的消息发送给接收对象。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-03T03:31:41.480

您在问两种“方法”之间的区别，但其中只有一个实际上是一种方法。该`objc_msgSend`功能是一个功能。不是方法。

`objc_msgSend`函数就是你在Objective C中对任意对象调用任意方法时*实际*调用的函数。例如下面两个基本等价：

```
// This is what the compiler generates
objc_msgSend(obj, @selector(sel:), param);

// This is what you write
[obj sel:param];

// You can check the assembly output, they are *almost* identical! 
```

这里的主要区别是`objc_msgSend`编译器不会检查类型——或者至少，它的参数不会根据选择器的参数类型进行类型检查。所以以下大致等价：

```
[obj performSelector:normalSelector withObject:command];
objc_msgSend(obj, @selector(performSelector:withObject:),
             normalSelector, command); 
```

但是，这有点浪费，因为所有`performSelector:withObject:`的都是 call `objc_msgSend`。

**但是：**您应该远离，`obc_msgSend`因为它不是类型安全的，如上所述。Apache 开发人员所做的只是删除单个方法调用，在大多数情况下，这只会给您带来非常*轻微*的性能优势。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-03T03:26:14.197

注释掉的行是正确的，该`objc_msgSend()`行是不正确的，因为它需要显式键入（可变参数有时与某些平台上的非可变参数函数调用不兼容）。

他们实际上做同样的事情。实际上，方法调用版本只是`objc_msgSend()`.

# android - 使用 Samsung SPen SDK 示例时内存不足

> ID：12241598
> 
> 赞同：0
> 
> 时间：2012-09-03T03:18:45.037
> 
> 标签：android, android-emulator

我想使用三星 SPen SDK 开发一个应用程序。三星提供的资源中有一个示例，但是当我尝试在 AVD 上运行它时出现错误。它说内存不足。

我已经检查了[http://galaxynotespenchallenge.com/forum_topics/657](http://galaxynotespenchallenge.com/forum_topics/657)但没有解决方案。

有没有人和我一样的问题并解决了？

这是我的 AVD 配置：

目标：Android 2.3.3 - API 级别 10，最大 VM 应用程序堆大小：256，设备内存大小：512

这是错误：

```
09-03 11:10:28.712: E/AndroidRuntime(335): FATAL EXCEPTION: main
09-03 11:10:28.712: E/AndroidRuntime(335): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
09-03 11:10:28.712: E/AndroidRuntime(335):  at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
09-03 11:10:28.712: E/AndroidRuntime(335):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:470)
09-03 11:10:28.712: E/AndroidRuntime(335):  at com.samsung.sdraw.cl.a(SourceFile:56)
09-03 11:10:28.712: E/AndroidRuntime(335):  at com.samsung.sdraw.ao.h(SourceFile:198)
09-03 11:10:28.712: E/AndroidRuntime(335):  at com.samsung.sdraw.ao.g(SourceFile:172)
09-03 11:10:28.712: E/AndroidRuntime(335):  at com.samsung.sdraw.ao.c(SourceFile:105)
09-03 11:10:28.712: E/AndroidRuntime(335):  at com.samsung.sdraw.ao.a(SourceFile:93)
09-03 11:10:28.712: E/AndroidRuntime(335):  at com.samsung.sdraw.AbstractSettingView.j(SourceFile:2806)
09-03 11:10:28.712: E/AndroidRuntime(335):  at com.samsung.sdraw.AbstractSettingView.a(SourceFile:561)
09-03 11:10:28.712: E/AndroidRuntime(335):  at com.samsung.sdraw.AbstractSettingView.<init>(SourceFile:429)
09-03 11:10:28.712: E/AndroidRuntime(335):  at com.samsung.sdraw.SettingView.<init>(SourceFile:137)
09-03 11:10:28.712: E/AndroidRuntime(335):  at com.samsung.spen.a.d.b.onCreateSettingView(SourceFile:591)
09-03 11:10:28.712: E/AndroidRuntime(335):  at com.samsung.spen.a.g.b.a(SourceFile:74)
09-03 11:10:28.712: E/AndroidRuntime(335):  at com.samsung.spensdk.SCanvasView.b(SourceFile:382)
09-03 11:10:28.712: E/AndroidRuntime(335):  at com.samsung.spensdk.SCanvasView.c(SourceFile:362)
09-03 11:10:28.712: E/AndroidRuntime(335):  at com.samsung.spensdk.SCanvasView.a(SourceFile:359)
09-03 11:10:28.712: E/AndroidRuntime(335):  at com.samsung.spensdk.SCanvasView$12.onFinish(SourceFile:4543)
09-03 11:10:28.712: E/AndroidRuntime(335):  at com.samsung.sdraw.CanvasView.onLayout(SourceFile:597)
09-03 11:10:28.712: E/AndroidRuntime(335):  at android.view.View.layout(View.java:7175)
09-03 11:10:28.712: E/AndroidRuntime(335):  at android.widget.RelativeLayout.onLayout(RelativeLayout.java:912)
09-03 11:10:28.712: E/AndroidRuntime(335):  at android.view.View.layout(View.java:7175)
09-03 11:10:28.712: E/AndroidRuntime(335):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
09-03 11:10:28.712: E/AndroidRuntime(335):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
09-03 11:10:28.712: E/AndroidRuntime(335):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
09-03 11:10:28.712: E/AndroidRuntime(335):  at android.view.View.layout(View.java:7175)
09-03 11:10:28.712: E/AndroidRuntime(335):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
09-03 11:10:28.712: E/AndroidRuntime(335):  at android.view.View.layout(View.java:7175)
09-03 11:10:28.712: E/AndroidRuntime(335):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
09-03 11:10:28.712: E/AndroidRuntime(335):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
09-03 11:10:28.712: E/AndroidRuntime(335):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
09-03 11:10:28.712: E/AndroidRuntime(335):  at android.view.View.layout(View.java:7175)
09-03 11:10:28.712: E/AndroidRuntime(335):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
09-03 11:10:28.712: E/AndroidRuntime(335):  at android.view.View.layout(View.java:7175)
09-03 11:10:28.712: E/AndroidRuntime(335):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1140)
09-03 11:10:28.712: E/AndroidRuntime(335):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
09-03 11:10:28.712: E/AndroidRuntime(335):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-03 11:10:28.712: E/AndroidRuntime(335):  at android.os.Looper.loop(Looper.java:123)
09-03 11:10:28.712: E/AndroidRuntime(335):  at android.app.ActivityThread.main(ActivityThread.java:3683)
09-03 11:10:28.712: E/AndroidRuntime(335):  at java.lang.reflect.Method.invokeNative(Native Method)
09-03 11:10:28.712: E/AndroidRuntime(335):  at java.lang.reflect.Method.invoke(Method.java:507)
09-03 11:10:28.712: E/AndroidRuntime(335):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-03 11:10:28.712: E/AndroidRuntime(335):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-03 11:10:28.712: E/AndroidRuntime(335):  at dalvik.system.NativeStart.main(Native Method) 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:26:11.313

请检查 AVD 的其他属性。您需要的选项是“最大 VM 应用程序大小”。将其设置为 100Mb 并检查问题是否得到解决。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T03:53:43.880

您是否仔细阅读了您发布的链接的最后一条评论。

> 我们正在解决模拟器的问题。在此期间，SDK 1.5 仍然可用。版本 1.5 确实适用于模拟器。总体而言，它将很好地了解使用 SDK 的感觉。您可以在 [http://innovator.samsungmobile.com/cms/cnts/knowledge.detail.view.do?platformId=1&cntsId=10210找到它](http://innovator.samsungmobile.com/cms/cnts/knowledge.detail.view.do?platformId=1&cntsId=10210)
> 
> 霍德

似乎只有 1.5 版在工作，他们正在努力解决这个问题，据我了解。

# postgresql - 不能用 PostgreSQL 制作代码生成器

> ID：12241599
> 
> 赞同：-1
> 
> 时间：2012-09-03T03:18:55.143
> 
> 标签：postgresql, bitnami, yii

我在使用 PostgreSQL 数据库的代码生成器时遇到问题，我已经在 main.php 中进行了配置.. ...

```
'modules'=>array(

    'gii'=>array(
        'class'=>'system.gii.GiiModule',
        'password'=>'123wasis85',
        'ipFilters'=>array('127.0.0.1','::1'),
    ),

), 
```

...

```
'db'=>array(
        'connectionString' => 'pgsql:host=127.0.0.1;port=5432;dbname=yii_first',

            'emulatePrepare' => true,

            'username' => 'postgres',

            'password' => 'anghauz',

            'charset' => 'utf8',
        ), 
```

...

但是当我使用 crud 生成时它仍然会产生错误结果，这是错误..：

...

```
CDbConnection failed to open the DB connection: could not find driver

C:\BitNami\apache2\htdocs\yii\framework\gii\generators\crud\CrudCode.php(44) 
```

...

我使用bitnami在localhost n中制作它..

请帮助我的解决方案..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T04:34:24.733

请转到已安装的 php 文件夹中的 php.ini 文件。取消注释以下行。

```
extension=php_pdo_pgsql.dll
extension=php_pgsql.dll 
```

它对我有用。

# c - 它正在编译但每次都崩溃

> ID：12241602
> 
> 赞同：0
> 
> 时间：2012-09-03T03:19:47.007
> 
> 标签：c, char

我是编程新手。我只是想制作自己的程序来查找球体和圆柱体的体积和表面积。我无法弄清楚为什么这个程序在它到达其余代码之前一直崩溃。我猜这`char*`可能是错误的，但我不明白为什么会这样。

```
int main()
{
    char* solid;
    char* unit;
    printf("Welcome to the Center of Spheres and Cylinders!\n");
    printf("Would you like to look at a Sphere or a Cylinder?: ");
    scanf("%s", solid);
        if(solid == "Cylinder" || solid == "cylinder")
        {
            printf("You chose to look at a Cylinder.\n");

        else if(solid == "Sphere" || solid == "sphere")
        {
            printf("You chose to look at a Sphere.\n"); 
```

它在我输入 .. 之后就崩溃了，当我输入`scanf.`圆柱体或球体时它崩溃了。感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T03:20:58.857

`solid`是一个字符指针，它*没有*指向任何*分配*的内存位置，当您尝试将数据读入其中时会导致程序崩溃`scanf()`（这就是为什么它会在您观察到的调用后立即崩溃）。

声明后

```
 char *solid; 
```

你应该`malloc()`有一定的存储空间让它指向。或者，您可以声明一个名为的数组`solid`

```
 char solid[100]; 
```

请注意，崩溃实际上是一件好事，因为它有助于显示差事指针存在问题。不幸的是，这可能并不总是发生，这取决于内存中的指针所指向的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T03:54:28.483

正如其他人所指出的，您的程序有几个“缺陷”：

1.  “星”表示指针。指针必须指向内存中的某个位置，这可以通过 malloc()、指针分配/操作或显式位地址来完成。有关指针的更多信息，您可以阅读以下内容：http: [//pw1.netcom.com/~tjensen/ptr/pointers.htm](http://pw1.netcom.com/~tjensen/ptr/pointers.htm)（但是说真的，指针？您提到您是编程的初学者；指针是高级概念不仅在 C 中，而且在计算机科学中也是如此。无论如何，现在不要想太多。）

2.  C 中的字符串比较不是由简单的相等运算符完成的，而是通过位比较（由库自动完成）。相等运算符 (==) 仅比较原始类型（int、char 等），但不比较用户定义的类型或数组（字符串是字符数组）。您必须使用 strcmp() （或 strncmp() 来比较可选偏移量的前 n 个字节）。您可以在 Google 上搜索 strcmp() 和 strncmp() 的文档以获取更多信息。

牢记这些概念，您的程序将如下所示：

```
#include <string.h> /**Contains string manipulation functions; very important **/
#include <ctype.h> /**Contains tolower() **/
int main()
{
    char* solid;
    char* unit;

    printf("Welcome to the Center of Spheres and Cylinders!\n");
    printf("Would you like to look at a Sphere or a Cylinder?: ");
    scanf("%s", solid);

    if(strcmp(tolower(solid), 'cylinder') == 0)
    {
        printf("You chose to look at a Cylinder.\n");

    else if(strcmp(tolower(solid), 'sphere') == 0)
    {
        printf("You chose to look at a Sphere.\n");

    }
    /** Other code here **/
    return 0;
} 
```

您可能已经猜到了，tolower() 将字符串转换为小写。另外仅供参考，数组是一个指针，因此使用“星号”表示法存储来自 scanf 的输入的理由。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T03:24:25.807

问题出在线路上

```
if(solid == "Cylinder" || solid == "cylinder") 
```

U 不能像 C 中那样比较字符串。而是使用 C 中可用的 strcmp 库函数。

代码应该如下所示

```
if( (strcmp(solid,"Cylinder")==0) || (strcmp(solid,"cylinder")==0) ) 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T03:39:41.697

`char* solid;`创建一个指向任意位置的字符指针（至少对于自动变量，这是您在代码中所拥有的）。然后，当您尝试`sccanf`进入该位置时，您将调用未定义的行为，因为没有有效的后备存储。

类似的东西`char solid[100];` *会*创建后备存储，解决直接的问题，因为它为要存储的字符分配空间。但是，您的代码至少还有两个其他问题。

* * *

第一个是你不比较 C 中的字符串与`==`，它只是比较指针，而不是指针*后面*的内容。为了比较内容，C提供了一个`strcmp`函数so，而不是：

```
if (solid == "something") 
```

你应该有：

```
if (strcmp (solid, "something") == 0) 
```

某些实现还可能提供`stricmp`忽略大小写的方法，因此您不必这样做：

```
if ((strcmp (solid, "something") == 0) || (strcmp (solid, "Something") == 0)) 
```

取而代之的是：

```
if (stricmp (solid, "something") == 0) 
```

这将允许*任何*字符为大写或小写，例如`SomeThing`.

但是，这不是标准 C，因此它可能并非随处可用。

* * *

您的另一个主要问题在于`scanf("%s")`. 在此处使用无界字符串是不安全的，因为如果用户输入的内容超出您的预期，您将受到缓冲区溢出的影响。例如，如果您使用上述方法`char solid[100]`并且用户输入了 500 个字符，则很可能会破坏您的堆栈并导致另一次崩溃。

如果你想要一个真正强大的用户输入功能，看看[这个](https://stackoverflow.com/questions/4023895/how-to-read-string-entered-by-user-in-c/4023921#4023921)。它具有溢出保护并在必要时丢弃线路的其余部分，以便后续输入不受影响。

# php - 查找源 MongoConnectionPool.cs MongoDB Exception VB.net

> ID：12241604
> 
> 赞同：0
> 
> 时间：2012-09-03T03:20:16.893
> 
> 标签：php, vb.net, mongodb

我有一个使用 VB.net 自动更新 MongoDB 的程序

哪里异常：在 MongoDB.Driver.dll 中发生了“System.TimeoutException”类型的第一次机会异常

我的代码添加了尝试捕获但此错误未捕获

这是我的代码

```
 Try
                            For Each ReturnedDocument In ListCollectionBusinessCursorForThisStepping
                                Dim abusiness = New Business(ReturnedDocument)
                                Dim businessBson = abusiness.ToBsonDocument
                                appendToTextFile(businessBson.ToString + vbNewLine, "IndexContentquery.txt")
                                collection.Save(businessBson)
                                counter += 1
                            Next ReturnedDocument
                        Catch ex As Exception
                            LogException(ex)
                            appendToTextFile("Some error at" + CStr(starts) + "+" + CStr(counter) + vbNewLine, "messedup.txt", ForAppending)
                        End Try 
```

让我困惑的是为什么它要求一些 .cs 文件？我正在使用 vb.net。我没有cs文件。是否有带有 cs 文件的 mongodb 驱动程序？我应该获取 mongodb 驱动程序的 cs 文件吗？

这是截图 ![在此处输入图像描述](../Images/2c3ec0aee090aae01f4927d3d104b3d4.png)

该代码大部分时间都有效。有时它只是发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T04:36:33.457

吉姆·蒂奥

它要求您找到 .cs 文件，因为您选择了调试选项，并且 Visual Studio 正在尝试查找用于编译引发原始异常的对象的源代码。

# css - 是否可以设置音频控件的位置和大小？

> ID：12241605
> 
> 赞同：1
> 
> 时间：2012-09-03T03:20:18.327
> 
> 标签：css, html, html5-audio

我有一个音频标签，最初没有显示控件，如果用户单击这样的链接，则显示它们：

```
var audio = document.getElementById(audioId);
if (audio.paused) {
    audio.src = clip;
    audio.play();
    audio.setAttribute("controls", "controls");
}
else {
    audio.removeAttribute("controls");
    audio.pause();
    audio.currentTime = 0;
} 
```

clip 是要播放的音频文件的 url。

音频是这样的：

```
<audio id="audio1"></audio> 
```

如何设置控件的位置，是否也可以设置它们的大小？

音频标签是列表元素的子元素，对于所有其他列表元素，我定位它们，例如

```
#track_title {
    position:absolute;
    top: 2px;   
    left: 80px;
    font-size: 15px;
    font-weight: bold;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T04:03:38.427

无法通过 html5 音频标签的 CSS 来控制 html5 音频播放器控件。尽管您可能希望保留默认控件并通过 javascript 实现自己的控件。

然而，有一个很好的现有 html5 主题播放器，称为[jPlayer](http://www.jplayer.org/) ，它被证明非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:27:53.440

您可以使用 Media API 来构建您自己的一组控件，让您可以像任何其他 HTML 元素一样通过 CSS 为它们设置样式。[我在 Adob​​e Developer Connection：使用 HTML5 多媒体组件 - 第 3 部分：自定义控件](http://www.adobe.com/devnet/html5/articles/html5-multimedia-pt3.html)上写了关于如何做到这一点的文章。

# algorithm - 在数轴上找到线段的并集

> ID：12241613
> 
> 赞同：3
> 
> 时间：2012-09-03T03:21:17.260
> 
> 标签：algorithm

我有一个介于 0 到 1000 之间的数轴。我在数轴上有很多线段。所有线段的 x1 >= 0，所有 x2 < 1000。所有 x1 和 x2 都是整数。

我需要找到线段的所有并集。

在此图像中，线段为蓝色，联合为红色：

![在此处输入图像描述](../Images/6da45a1c51cf4439e2a2ea6b97f7e73a.png)

是否有针对此类问题的现有算法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-18T17:36:47.330

您可以使用 marzullo 的算法（有关更多详细信息，请参阅 Wikipedia）。这是我写的一个 Python 实现：

```
def ip_ranges_grouping(range_lst):
    ##  Based on Marzullo's algorithm
    ##  Input: list of IP ranges
    ##  Returns a new merged list of IP ranges
    table = []
    for rng in range_lst:
        start,end = rng.split('-')
        table.append((ip2int(start),1))
        table.append((ip2int(end),-1))
    table.sort(key=lambda x: x[0])
    for i in range(len(table) - 1):
        if((table[i][0] == table[i+1][0]) and ((table[i][1] == -1) and (table[i+1][1] == 1))):
           table[i],table[i+1] = table[i+1],table[i]

    merged = []
    end = count = 0
    while (end < len(table)):
        start = end
        count += table[end][1]
        while(count > 0): # upon last index, count == 0 and loop terminates
            end += 1
            count += table[end][1]
        merged.append(int2ip(table[start][0]) + '-' + int2ip(table[end][0]))
        end += 1
    return merged 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T03:38:49.077

如果段没有动态改变，这是一个简单的问题。只需按左端对所有段进行排序，然后扫描已排序的元素：

```
struct Seg {int L,R;};

int cmp(Seg a, Seg b) {return a.L < b.L;}

int union_segs(int n, Seg *segs, Segs *output) {
  sort(segs, segs + n, cmp);
  int right_most = -1;
  int cnt = 0;
  for (int i = 0 ; i < n ; i++) {
    if (segs[i].L > right_most) {
      right_most = segs[i].R;
      ++cnt;
      output[cnt].L = segs[i].L;
      output[cnt].R = segs[i].R;
    }
    if (segs[i].R > right_most) {
      right_most = segs[i].R;
      output[cnt].R = segs[i].R;
    }
  }
  return cnt+1;
} 
```

时间复杂度为 O(nlogn)（排序）+ O(n)（扫描）。

如果段是动态插入和删除的，想要随时查询并集，就需要一些比较复杂的数据结构，比如[范围树](http://en.wikipedia.org/wiki/Range_tree)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T03:38:52.013

考虑到段的坐标是有界 ([0, 1000]) 整数，您可以使用大小为 1000 的数组，初始化为零。然后，您遍历您的段集，并在该段覆盖的数组的每个单元格上设置 1。然后，您只需遍历数组即可检查 1 的连续序列。

```
---      -----
  ---  ---
1111100111111100 
```

复杂性取决于段的数量，但也取决于它们的长度。

这是另一种方法，它也适用于浮点段。对段进行排序。然后，您只需遍历已排序的路段并比较每个相邻路段的边界。如果他们交叉，他们在同一个工会。

# objective-c - UITextView 阴影不工作

> ID：12241616
> 
> 赞同：0
> 
> 时间：2012-09-03T03:21:42.537
> 
> 标签：objective-c, ios, uitextview, calayer, shadow

我试图让 UITextView 的图层阴影在 UITableView 标头中工作。我有一个 UIView，我正在格式化所有内容，然后将 headerview 设置为等于它。

```
UIView * view = [[UIView alloc] initWithFrame: CGRectMake(0, 0, self.tableView.frame.size.width, 450);
UIColor * baseColor = [[UIColor alloc] initWithRed: 45/255.0
                                             green: 100/255.0
                                              blue: 150/255.0
                                             alpha: 1.0];

view.backgroundColor = baseColor;
...
UITextView * newCommentField = [[UITextView alloc] initWithFrame:CGRectMake(20, 230, 270,   120)];
newCommentField.text = @"New Comment";
newCommentField.tag = 3;
newCommentField.layer.shadowOffset = CGSizeMake(0, 3);
newCommentField.layer.shadowRadius = 5.0;
newCommentField.layer.shadowColor = [UIColor blackColor].CGColor;
newCommentField.layer.shadowOpacity = 0.8;
[view addSubview:newCommentField];
...
self.tableView.tableHeaderView = view; 
```

一切都在视图中正确显示。然而，影子并没有出现。我不知道这里出了什么问题。我什至尝试修改图层的框架并将其设置为评论字段的大小，更大且大小相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-27T03:13:11.380

您没有为 newCommentField 设置背景颜色。尝试：

```
newCommentField.backgroundColor = [UIColor whiteColor]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T04:54:03.837

您也可以这样做...创建一个与您的 textView 大小相同的视图（例如 bgView），并将该 textView 添加为 bgView 的子视图，该子视图将添加为您的标题视图的子视图。而是将阴影效果应用于 bgView。

```
UIView *bgView=[[UIView alloc]initWithFrame:CGRectMake(20, 230, 270,   120)];
bgView.backgroundColor=[UIColor whiteColor];
bgView.layer.shadowOffset = CGSizeMake(0, 3);
bgView.layer.shadowRadius = 5.0;
bgView.layer.shadowColor = [UIColor blackColor].CGColor;
bgView.layer.shadowOpacity = 0.8;

[bgView addSubview:newCommentField];

[view addSubview:bgView]; 
```

# c# - 在 LINQ 中对 IEnumerable 进行排序

> ID：12241619
> 
> 赞同：5
> 
> 时间：2012-09-03T03:22:00.583
> 
> 标签：c#, linq, linq-to-objects

如何对给定的示例进行排序。

```
 IEnumerable<extra> eList = new List<extra>()
        {
            new extra{ id = 1, text = "a"},
            new extra{ id = 2, text = "g"},
            new extra{ id = 3, text = "i"},
            new extra{ id = 4, text = "e"},
            new extra{ id = 5, text = "f"},
            new extra{ id = 6, text = "d"},
            new extra{ id = 7, text = "c"},
            new extra{ id = 8, text = "h"},
            new extra{ id = 9, text = "b"}
        };

        IEnumerable<sample> sam = new List<sample>()
        {
            new sample{ id = 1, name = "sample 1", list = new List<int>{1,5,6}},
            new sample{ id = 2, name = "sample 1", list = new List<int>{2,9}},
            new sample{ id = 3, name = "sample 1", list = new List<int>{8,3,7}},
            new sample{ id = 4, name = "sample 1", list = new List<int>{3,4,8}},
            new sample{ id = 5, name = "sample 1", list = new List<int>{1,5,7}},
            new sample{ id = 6, name = "sample 1", list = new List<int>{6,9,7}}
        }; 
```

我有这个代码来排序并将示例列表加入到上面的额外对象中。

```
 var s2 = (from d1 in sam
                  select new
                  {
                      name = d1.name,
                      id = d1.id,
                      list =
                      (
                         from d2 in d1.list
                         join e in eList on d2 equals e.id
                         select new {  
                             id = d2, text = e.text
                         }
                      ).OrderBy(item => item.text.FirstOrDefault())
                  }); 
```

上面的代码工作正常，它连接了两个数据并对列表的值进行了排序。但我想要的是's2'上面的输出将再次按'list.text'的'list'值排序。

所以上面可能的输出必须是：

```
 { id = 1, name = "sample 1", list = {'a','f','d'}},         
        { id = 5, name = "sample 1", list = {'a','f','c'}},
        { id = 2, name = "sample 1", list = {'g','b'}},
        { id = 4, name = "sample 1", list = {'i','e','h'}},
        { id = 6, name = "sample 1", list = {'d','b','c'}},
        { id = 3, name = "sample 1", list = {'h','i','c'}}, 
```

这在 LINQ 中可行吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T03:53:02.040

```
var newsam = sam.Select(s => new
                 {
                   id = s.id,
                   name = s.name,
                   list = s.list
                           .Select(l => eList.FirstOrDefault(e => e.id == l).text)
                           .OrderBy(e => e)
                           .ToList()
                 }
                ).OrderBy(s => s.list.FirstOrDefault())
                 .ToList(); 
```

**编辑**

因此，内部列表按 eList 的文本值排序；并且外部列表按内部列表的第一个元素排序

**编辑**

```
 var s2=(from d1 in sam
                  select new
                  {
                      name = d1.name,
                      id = d1.id,
                      list =
                      (
                         from d2 in d1.list
                         join e in eList on d2 equals e.id
                         select e.text
                      ).OrderBy(item => item).ToList()
                  }).OrderBy(item => item.list.FirstOrDefault()); 
```

# struts2 - 是否可以在struts2的隐藏标签中调用名称的setter？

> ID：12241623
> 
> 赞同：1
> 
> 时间：2012-09-03T03:22:48.533
> 
> 标签：struts2, hidden, assign

在我的 jsp 页面中，我有一个表单（在 struts2 中），在该表单中，我尝试在提交表单后使用隐藏标记将 ArrayList 数据的大小分配给 Vector testVector，但我仍然得到 testVector 的大小等于 0。

```
<s:hidden name="testVector.size" value="%{data.size}" /> 
```

我在 Action 类中为 data 和 testVector 创建了 setter 和 getter。

```
private Vector<String> testVector = new Vector<String>();
private ArrayList<String> data = new ArrayList<String>();
private String testName; // a field for testing the form. 

// getters and setters of testVector and data 
```

我认为这应该可以工作，因为 Vector 有一个公共设置器 setSize(int size)。对于另一个字段“testName”，它已经很好地提交了。所以我的语法有问题吗？

十分感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T06:40:48.310

您不应该使用 Vector。请注意，出于安全原因，OGNL 在请求中的工作方式与在呈现 JSP 时的工作方式不同，它太强大了。您应该只从请求中设置 bean 属性、集合、数组和内置类型（忽略类型转换器）。

从这种情况下的请求来看，它认为正在尝试将值放入向量中。我认为它会创建一个新字符串并将其放入 Vector 中，然后尝试设置字符串的大小（这将不起作用，因为该方法不存在）。

为了确认这一点，我尝试按照您所说的进行操作，并且日志指出：

```
WARNING: Error setting expression 'testVector.size' with value '[Ljava.lang.String;@5c7b2d2f'
ognl.OgnlException: Error converting given String values for Collection. [ognl.NoSuchPropertyException: java.lang.String.size] 
```

如果您想要这种行为，您将需要在您的操作中创建第二个方法，例如 setSize()，然后再修改矢量大小。这个我觉得暴露给外界不是很好的事情，万一有人叫你的动作很多次传入一个巨大的数字怎么办？

# c - 将 C 代码从 HP-Unix 移动到 Linux 时替代 linux 中的 pstat.h

> ID：12241624
> 
> 赞同：0
> 
> 时间：2012-09-03T03:22:51.937
> 
> 标签：c, linux, compiler-errors

我正在将一个应用程序（C 语言）从 HP-UX 移植到 Linux（icc 编译器）。我对 pstat.h 有疑问。它仅存在于 HP-UX 中，但不存在于 Linux 中，并且我收到错误“pstat_getproc 未声明”。有没有其他解决方案？sys/pstat.h 有什么替代品吗？到目前为止，我正计划用可以在 Linux 上运行的代码替换整个代码。期待您的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T03:29:10.357

没有直接的等价物；整个`pstat`函数系列都非常特定于 HP/UX。可能最接近的等价物是`/proc`接口——例如，获取有关当前进程的信息，可以检查`/proc/self`.

实际上，您可能需要替换大部分使用`pstat`.

# oauth - oauth 2.0 再次显示授权页面

> ID：12241627
> 
> 赞同：2
> 
> 时间：2012-09-03T03:23:59.050
> 
> 标签：oauth, oauth-2.0, twitter-oauth, oauth-provider

我是 oauth 2.0 的新手并正在阅读它。我尝试将 oauth 2.0 用于具有 37signals 站点的应用程序，但遇到了问题。现在确定它是否符合设计。任何这里都是我所看到的。

1.  用户已登录 37signals 网站。
2.  我的应用程序通过将他重定向到 37signals 站点来启动 oauth 流程
3.  将出现一个授权页面，询问用户是否可以授予对我的应用程序的访问权限。
4.  用户批准并返回到我的应用程序。（也可以使用访问令牌）
5.  现在，用户退出 37signals 站点。
6.  用户尝试使用我的应用程序。我的应用程序通过将他重定向到 37signals 站点来启动 oauth 流程。
7.  用户使用登录屏幕登录。
8.  再次向他显示授权页面。**自从用户第一次批准后，不应该跳过它吗？**或者这是设计好的？

无论如何，这对我来说似乎不是很用户友好，即每次注销后都显示批准页面。

我也注意到 twitter 的类似行为。我最初在使用 nodejs oauth 库时发布了一个类似的问题。然后我认为这是一个一般的 oauth 2.0 问题。 [everyauth 总是触发授权](https://stackoverflow.com/questions/12207578/everyauth-always-triggers-authorization)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T04:18:59.210

在初始身份验证时，身份验证提供程序（在本例中为 37Signals）将提供身份验证令牌。与您的应用程序密钥一起，您可以在初始身份验证之后使用用户令牌随后对其进行身份验证。OAuth 提供者通常会随着时间的推移使身份验证令牌过期，在这种情况下，您需要让您的用户重新进行身份验证。

# caching - 为什么 ServiceStack.Redis 抛出错误而不是尝试连接到另一个读取实例？

> ID：12241629
> 
> 赞同：1
> 
> 时间：2012-09-03T03:24:37.093
> 
> 标签：caching, redis, servicestack

我在两台机器上成功安装了 Redis，然后作为主从工作。我测试了一些代码来检查复制是否有效并且一切正常。

我的客户经理看起来像

```
var manager = new PooledRedisClientManager(new[] { "MasterIP:6379" }, new[] { "MasterIP:6379", "SlaveIP:6379" }); 
```

但是现在我关闭了我的主实例，当我再次测试我的代码时，我得到了一个错误，比如客户端无法连接到主服务器。

ps 对于阅读，我使用 GetReadOnlyCacheClient();

我重复了我的代码，我注意到客户端首先获取主控（错误无法连接），然后当我再次运行我的代码时客户端获取从属，然后当我再次运行我的代码时客户端获取主控等等。

我在 ServiceStack.Redis 客户端下载了源代码。我只是想检查该错误何时发生，这是代码。

```
private void Connect()
    {
        socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp)
        {
            SendTimeout = SendTimeout,
            ReceiveTimeout = ReceiveTimeout
        };
        try
        {
            if (ConnectTimeout == 0)
            {
                socket.Connect(Host, Port);
            }
            else
            {
                var connectResult = socket.BeginConnect(Host, Port, null, null);
                connectResult.AsyncWaitHandle.WaitOne(ConnectTimeout, true);
            }

            if (!socket.Connected)
            {
                socket.Close();
                socket = null;
                return;
            }
            Bstream = new BufferedStream(new NetworkStream(socket), 16 * 1024);

            if (Password != null)
                SendExpectSuccess(Commands.Auth, Password.ToUtf8Bytes());

            db = 0;
            var ipEndpoint = socket.LocalEndPoint as IPEndPoint;
            clientPort = ipEndpoint != null ? ipEndpoint.Port : -1;
            lastCommand = null;
            lastSocketException = null;
            LastConnectedAtTimestamp = Stopwatch.GetTimestamp();

            if (ConnectionFilter != null)
            {
                ConnectionFilter(this);
            }
        }
        catch (SocketException ex)
        {
            if (socket != null)
                socket.Close();
            socket = null;

            HadExceptions = true;
            var throwEx = new RedisException("could not connect to redis Instance at " + Host + ":" + Port, ex);
            log.Error(throwEx.Message, ex);
            throw throwEx;
        }
    } 
```

我真的不明白这段代码，couze项目真的很大，但我认为没有*如果这个服务器出现故障，那么尝试从只读服务器列表中的另一台主机获取（如果存在）*

我可以制作某种我的自定义逻辑来检查是否无法尝试获取另一个只读实例..但是不支持这个客户端准备好解决这个问题吗？

# c++ - OpenGL中的Texture Splatting是如何实现的？

> ID：12241632
> 
> 赞同：4
> 
> 时间：2012-09-03T03:25:02.290
> 
> 标签：c++, opengl, textures

我已经阅读了一段时间用于纹理地形的不同技术并遇到了[纹理飞溅](http://en.wikipedia.org/wiki/Texture_splatting)。我发现很多文章都在讨论如何在 OpenGL 中做到这一点，但大多数都只是理论上讨论它并且几乎没有提供我可以研究的代码。有谁知道/有一些代码可以在 OpenGL 中说明这一点？

澄清一下，我希望能够加载四种不同的纹理，并根据四边形/顶点的高度，逐渐将纹理从一个更改为下一个。

编辑：下面是一些快速的代码，可以帮助显示我想知道的内容

```
#include <windows.h>
#include <SFML/Graphics.hpp>
#include <gl/gl.h>
#include <gl/glu.h>

#define GL_CLAMP_TO_EDGE 0x812F

class Scene {
public:
    void resize( int w, int h ) {
        // OpenGL Reshape
        glViewport( 0, 0, w, h );
        glMatrixMode( GL_PROJECTION );
        glLoadIdentity();
        gluPerspective( 120.0, (GLdouble)w/(GLdouble)h, 0.5, 500.0 );
        glMatrixMode( GL_MODELVIEW );
    }
};

int main() {

    sf::RenderWindow window(sf::VideoMode(800, 600, 32), "Test");

    ///Setup the scene, materials, lighting
    Scene scene;
    scene.resize(800,600);
    glEnable(GL_DEPTH_TEST);
    glEnable(GL_LIGHTING);
    glColorMaterial(GL_FRONT_AND_BACK, GL_EMISSION);
    glEnable(GL_COLOR_MATERIAL);
    glShadeModel(GL_SMOOTH);
    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glEnable(GL_LIGHT0);
    float XL = .5, YL = .1, ZL = 1;
    GLfloat ambientLight[] = { 0.2f, 0.2f, 0.2f, 1.0f };
    GLfloat diffuseLight[] = { 0.8f, 0.8f, 0.8, 1.0f };
    GLfloat specularLight[] = { 0.5f, 0.5f, 0.5f, 1.0f };
    GLfloat lightpos[] = {XL, YL, ZL, 0.};
    glLightfv(GL_LIGHT0, GL_AMBIENT, ambientLight);
    glLightfv(GL_LIGHT0, GL_DIFFUSE, diffuseLight);
    glLightfv(GL_LIGHT0, GL_SPECULAR, specularLight);
    glLightfv(GL_LIGHT0, GL_POSITION, lightpos);

    ///Test terrain texture splatting

    ///Load the textures
    sf::Image tex1;
    tex1.loadFromFile("texture1.png");
    sf::Image tex2;
    tex2.loadFromFile("texture2.png");

    ///Set the first texture
    GLuint grass;
    glGenTextures(1, &grass);
    glBindTexture(GL_TEXTURE_2D, grass);
    glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_REPLACE);
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );
    glTexImage2D( GL_TEXTURE_2D, 0, GL_RGBA, tex1.getSize().x, tex1.getSize().y, 0, GL_RGBA, GL_UNSIGNED_BYTE, (const GLvoid*)tex1.getPixelsPtr() );

    ///Set the second texture
    GLuint dirt;
    glGenTextures(1, &dirt);
    glBindTexture(GL_TEXTURE_2D, dirt);
    glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_REPLACE);
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );
    glTexImage2D( GL_TEXTURE_2D, 0, GL_RGBA, tex2.getSize().x, tex2.getSize().y, 0, GL_RGBA, GL_UNSIGNED_BYTE, (const GLvoid*)tex2.getPixelsPtr() );

    ///Start loop
    while( window.isOpen() ) {
        sf::Event event;
        while( window.pollEvent( event ) ) {
            if( event.type == sf::Event::Closed )
                window.close();
        }

        ///Clear buffer and set camera
        glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );
        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        gluPerspective(50.0, 1.0, 1.0, 50);
        glMatrixMode(GL_MODELVIEW);
        glLoadIdentity();
        gluLookAt(1, 0, 1, 0, 0, 0, 0, 1, 0);

        ///Begin rendering quad             
        glEnable(GL_TEXTURE_2D);
        glBindTexture(GL_TEXTURE_2D, grass);
        ///I know that around here I should enable blending in order to get my two textures to mix, but I am not certain
        glBegin(GL_QUADS);

            glTexCoord2f(0, 0);
            glVertex3f(-0.5, -0.5, 0.0);

            glTexCoord2f(1, 0);
            glVertex3f(-0.5, 0.5, 0.0);

            glTexCoord2f(1, 1);
            glVertex3f(0.5, 0.5, 0.0);

            glTexCoord2f(0, 1);
            glVertex3f(0.5, -0.5, 0.0);
        glEnd();

        ///Reset env settings for SFML
        glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);

        window.display();
    }
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T07:24:06.893

如上所述，使用可编程管道，使用着色器。在片段着色器中，您可以传递所有纹理并根据从顶点着色器接收到的顶点数据在它们之间进行插值。

快速搜索给了我[这个结果](http://www.dhpoware.com/demos/glslTerrainTexturing.html)。我相信这就是你所需要的。也看看[这个帖子](https://stackoverflow.com/questions/9973466/glsl-mixing-base-texture-with-decal-texture-at-needed-place)。[这篇](http://www.cosc.canterbury.ac.nz/research/reports/HonsReps/2008/hons_0801.pdf)论文很好地解释了这项技术。

# javascript - 使用正则表达式修改字符串

> ID：12241634
> 
> 赞同：0
> 
> 时间：2012-09-03T03:25:05.047
> 
> 标签：javascript, regex

我有一个看起来像这样的字符串：

```
Blah blah one.<tmp>[[url=b, link=c]]</tmp> Blah blah two.
Also remember, blah blah three.<tmp>[[url=d, link=e]]</tmp> 
```

所以我想获取`b`和`d`（的`url`属性`tmp`），并更改字符串，使其看起来像这样（`ex()`函数返回一个字符串）：

```
Blah blah one.<tmp>[[url=b, link=c, add=ex(b)]]</tmp> Blah blah two.
Also remember, blah blah three.<tmp>[[url=d, link=e, add=ex(d)]]</tmp> 
```

我需要使用正则表达式，因为没有现有的库解析这种类型的标记。

我希望我的解释清楚。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T03:42:08.357

尝试这个

```
var text = "Blah blah one.<tmp>[[url=b, link=c]]</tmp> Blah blah two.";
text.replace(/(url=([^,]+), [^\]]+)/g, "$1, add=ex($2)");

// return "Blah blah one.<tmp>[[url=b, link=c, add=ex(b)]]</tmp> Blah blah two." 
```

更新：

```
// declare your ex() function first
var text = "Blah blah one.<tmp>[[url=b, link=c]]</tmp> Blah blah two.";
text.replace(/(url=([^,]+), [^\]]+)/g, function(){ 
    return RegExp.$1 +", add="+ex(RegExp.$2)+""; 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T03:43:45.053

尝试：

```
var str = "Blah blah one.<tmp>[[url=http://www.google.com, link=c]]</tmp> Blah blah two.";
var tempRe = /(<tmp>\[\[url=)([^,]+)(link=[^\]]\])(, \]<\/tmp>)/;

var newStr = str.replace(tempRe, '$1$2$3,add=ex($2)$4'); 
```

这仅替换内部的字符串`<tmp></tmp>`。

# c++ - “最衍生的对象”是什么意思？

> ID：12241637
> 
> 赞同：14
> 
> 时间：2012-09-03T03:25:41.153
> 
> 标签：c++

C++03 标准规定 §1.8 [intro.object]/4：

> 如果一个完整的对象，一个数据成员（9.2），或者一个数组元素是类类型，它的类型被认为是最派生的类，以区别于任何基类子对象的类类型；最派生类类型的对象称为最派生对象。

任何人都可以对“最衍生的对象”有所了解吗？一些例子将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-03T03:51:40.920

*引用将大多数派生类*的含义定义为被实例化的对象的类。虽然一个对象可以有*多种*类型，但作为继承模型的*is-a*关系，它只有一个*最派生类*。

举个例子：

```
class base {};
class derived : base {};
class base2 {};
class mostderived : derived, base2 {};

mostderived md; 
```

该对象`md`属于*大多数派生类* ，`mostderived`尽管它也属于 和类型。在谈论时，有一个 type的子对象，一个 type 的子对象（包括 type 的子对象）和一个 type 的子对象，但只有一个*最派生的 object*是type 。`base``derived``base1``md``base``derived``base``base2`*`md``mostderived`*

# c - 解析时间表以上传到 Google 日历

> ID：12241638
> 
> 赞同：0
> 
> 时间：2012-09-03T03:26:04.867
> 
> 标签：c, parsing, sed, awk, schedule

我有一半的 C 课程，也许还有一两个我写的 shell 脚本作为经验。我正在尝试解析日程表中的数据，以便从终端将其上传到 Google 日历。我收到这样的文本块中的时间表：

> 2012 年 9 月 1 日星期六 00:00:00 GMT-0700 (PDT) 星期六 2:00PM 11:00PM
> 
> 2012 年 9 月 2 日星期日 00:00:00 GMT-0700 (PDT) 星期日 00:00AM 00:00AM
> 
> 2012 年 9 月 3 日星期一 00:00:00 GMT-0700 (PDT) 星期一上午 9:00 下午 6:00
> 
> 2012 年 9 月 4 日星期二 00:00:00 GMT-0700 (PDT) 星期二上午 9:00 下午 6:00
> 
> 2012 年 9 月 5 日星期三 00:00:00 GMT-0700 (PDT) 星期三 00:00 AM 00:00 AM
> 
> 2012 年 9 月 6 日星期四 00:00:00 GMT-0700 (PDT) 星期四上午 8:00 下午 4:00
> 
> 2012 年 9 月 7 日星期五 00:00:00 GMT-0700 (PDT) 星期五 10:00 AM 7:00 PM

我发现使用 googlecl 我可以在终端中输入：

> $ google calendar 添加“Sep 3 Work 9 to 6”

我会得到一个日历事件，然后我可以自动同步到我的手机。

我已经阅读了一些关于 sed 和 awk 的文档，认为我可以使用它们来抓取每行的第 5 到第 10（即 9 月 1 日）字符以及轮班开始和结束的时间，添加“工作”标题，并将其直接通过管道传输到 googlecl。不过我还没弄下来。

我还尝试在 C 中研究文件 i/o，因为我可以将上面看到的日程表导出到文本文件，然后可能使用 C 将日程表以更简单的英语通过管道传输到 Google 日历。

sed 和 awk 是这样做的首选方式吗？（如果我能弄明白的话，我想只用常见的 *nix 命令是我的首选）我应该用 C 编写一个小程序来做到这一点吗？任何帮助（即使只是将我链接到您最喜欢的教程，以便我可以做更多阅读）将不胜感激，因为我发现谷歌搜索的许多页面都非常长而且有点超出我的头脑。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T05:58:55.970

```
awk '{ if ($9 != $10) {print "google calendar add \"" $2, $3, "Work", $9, "to", $10"\""}}' cal 
```

结果：

```
google calendar add "Sep 01 Work 2:00PM to 11:00PM"
google calendar add "Sep 03 Work 9:00AM to 6:00PM"
google calendar add "Sep 04 Work 9:00AM to 6:00PM"
google calendar add "Sep 06 Work 8:00AM to 4:00PM"
google calendar add "Sep 07 Work 10:00AM to 7:00PM" 
```

解释：

```
if ($9 != $10) {...} 
```

如果它们相同，则看起来您不需要在日历中输入它们。此外，隐式检查非空行。

```
print "google calendar add \"" $2, $3, "Work", $9, "to", $10"\"" 
```

打印带有相关字段的字符串，转义引号。

编辑：至于自动执行它，有一些微妙的引用问题正在发生，所以将这一行放在 for 循环中并不是一件容易的事（对我来说！）。一种简单的方法是将结果存储在“文件”中，然后存储在“sh 文件”中。

# python - 为什么这部分文本要换行？（Python）

> ID：12241647
> 
> 赞同：0
> 
> 时间：2012-09-03T03:27:25.263
> 
> 标签：python, io

我正在向文本文件中的其中一行添加一些新位，然后将其与文件中的其余行一起写入新文件。参考 while 循环中的第二个 if 语句，我希望它都在同一行：

```
path = raw_input("Enter the name of the destination folder: ")

source_file = open("parameters")
lnum=1
for line in source_file:
    nums = line.split()
    if (lnum==10):
        mTot = float(nums[0])
    if (lnum==11):
        qinit = float(nums[0])
    if (lnum==12):
        qfinal = float(nums[0])
    if (lnum==13):
        qgrowth = float(nums[0])
    if (lnum==14):
        K = float(nums[0])
    lnum = lnum+1

q = qinit
m1 = mTot/(1+qinit)
m2 = (mTot*qinit)/(1+qinit)
taua = (1/3.7)*(mTot**(-4.0/3.0))
taue = taua/K
i = 1
infname = 'parameters'
while (q <= qfinal):
    outfname = path+'/'+str(i)
    oldfile = open(infname)
    lnum=1
    for line in oldfile:
        if (lnum==17):
            line = "{0:.2e}".format(m1)+' '+line
        if (lnum==18):
            line = "{0:.2e}".format(m2)+' '+line+' '+"{0:.2e}".format(taua)+' '+"      {0:.2e}".format(taue)
        newfile = open(outfname,'a')
        newfile.write(line)
        lnum=lnum+1
    oldfile.close()
    newfile.close()
    i=i+1
    q = q + q*(qgrowth)
    m1 = mTot/(1+q)
    m2 = (mTot*q)/(1+q) 
```

但是 taua 和 taue 被写在其余部分的下方。我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T03:29:04.360

那是因为 line 仍然包含尾随的换行符，并且当您连接它时，您还包括换行符。

插入一个

```
line = line.strip() 
```

就 `if (lnum == 19):` *在*你把更长的时间`line`放在一起摆脱换行符之前。

请注意，它`write`不会自动添加换行符，因此您需要添加自己的尾随换行符。

**更新**：

这是未经测试的，但我认为除非我搞砸了，否则你可以使用它而不是你的长线：

```
 line = line.strip()
 line = "{0:.2e} {} {0:.2e}   {0:.2e}\n".format(x, line, y, z) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T03:31:31.933

如果您在更改行之前使用 line = rstrip(line) ，那么它将修剪新行（以及任何空白）。

# iphone - Interface Builder 不允许我“向下滚动”

> ID：12241652
> 
> 赞同：0
> 
> 时间：2012-09-03T03:29:09.107
> 
> 标签：iphone, xcode, uitableview, ios5, ios4

我有一个 UITabelView 作为我的界面。我的身高大于 460 像素。我无法在 460 像素处编辑模拟 APP 底部下方的任何表格视图单元格（或任何东西）我不想“以编程方式在界面中添加东西”。我如何在界面生成器中“滚动”？

我正在使用 Xcode 4.2 和 STORYBOARDS ！

太感谢了！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T04:07:53.880

设置视图的 y 轴 (-ve)。就像如果您有 600px 的表格视图，这意味着默认情况下您有 160px 不可见。编辑它使您的视图或表格视图到 y 轴 = -160。您将看到您的视图。但是不要忘记再次将其设置为 0 并将高度设置为 460 以使您的应用程序运行良好。

我想这就是你要找的。让我知道，以防万一。

# c# - 在 MVC 4 中动态替换标签

> ID：12241654
> 
> 赞同：2
> 
> 时间：2012-09-03T03:29:30.460
> 
> 标签：c#, asp.net-mvc, razor

我想在我的 MVC 4 视图中动态生成 DIV 的 ID 标签：

```
 <div id="newBox{0}"></div> 
```

并将 {0} 替换为 @Model.MyTag

最好的做法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T07:37:02.380

```
<div id="newBox@(Model.MyTag)"></div> 
```

或者

```
<div id="newBox@{Write(Model.MyTag);}"></div> 
```

两者都进行 HTML 编码（特殊字符安全）。

# sql - 使用名称值对更新数据库中的记录 - sql server

> ID：12241661
> 
> 赞同：0
> 
> 时间：2012-09-03T03:31:37.540
> 
> 标签：sql, sql-server, tsql, sql-server-2005

一直在 Google 中查找此内容，但找不到任何内容。

想知道 SQL Server 2005 中是否有一种方法可以使用名称值对来更新数据库中的记录。

我有一个名称值对的列表，并且想要更新所有可以找到名称的记录作为列值（您将在 where 子句中指定的东西），如果找到记录...用配对的值更新记录用名字

例如，像

```
update X set column_value = <Value paired with the Name> where column_name = <Name from the list> 
```

PS 我有一个超过 1000 条记录的列表，这可能更多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T03:37:37.217

显而易见的方法是将您的配对值存储在单独的表中。例如：

```
map(name,value) 
```

并使用连接更新您的表。例如：

```
update m1 set m1.column_value = m2.value
from mytable m1 join map m2 on m1.column_name = m2.name 
```

# javascript - 使用 javascript 选择一个选项

> ID：12241662
> 
> 赞同：0
> 
> 时间：2012-09-03T03:31:38.470
> 
> 标签：javascript, html, option

> **可能重复：**
> [如何使用Javascript通过选项的值在选择框中选择一个选项？](https://stackoverflow.com/questions/2143197/how-to-select-an-option-in-a-select-box-by-the-value-of-the-option-using-javascr)

我有一个下拉菜单，我想在 ajax 调用中选择它。这是我目前正在使用的：

```
var selector = document.getElementById("action_person").firstChild;

var n = 0;
while(selector.options[n] != null)
{
   if(selector.options[n].value == "person")
   {
      selector.options.selectedIndex = n;
   }                    
   n++;
} 
```

我也试过`selector.options.selectedIndex = n`用`selector.options[n].selected = true`. 但是，它从不为我选择。它始终在下拉列表的顶部显示该项目。

我已经验证下拉列表中确实存在值“person”，并且变量“selector”确实指向有效的下拉列表。我在这里做错了什么？

编辑：在被明显的问题轰炸之后，我意识到不清楚这是在 ajax 调用之后被解雇的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T04:27:21.103

在您的代码中：

```
> while(selector.options[n] != null) 
```

如果`options[n]`不存在，则表达式将返回“未定义”，而不是 null。你也可以写：

```
 while (selector.options[n]) 
```

然后：

```
> {
>   if(selector.options[n].value == "person")
>   {
>      selector.options.selectedIndex = n; 
```

[options 集合](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#HTMLOptionsCollection)没有属性，而[`selectedIndex`](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-85676760)select 元素有。所以：

```
 selector.selectedIndex = n; 
```

或者您可以将特定选项的 selected 属性设置为 true：

```
 selector.options[n].selected = true; 
```

除非您正在迭代多项选择，否则下一行可以是 return 语句：

```
 return; 
```

请注意，您还可以将选项的[`defaultSelected`](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-37770574)属性设置为`true`也，然后如果表单被重置（例如通过单击重置按钮），该选项将被设置为选中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T05:04:54.937

我最终遍历了这些选项，然后修改了 DOM 以在适当的选项中包含 selected = "selected" 。我不知道为什么给出的解决方案都不起作用，但它现在正在起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T03:33:57.130

就写这个

```
document.getElementById("action_person").firstChild.value="person"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T04:18:52.837

这是如何运作的？或者让我们知道您的测试网络浏览器。

```
<select name="selector">
<option>Foo</option>
<option>Bar</option>
<option>Baz</option> 
```

```
<script type="text/javascript">
    var selector = document.all('selector');
    var setSelectedItem = function(content){
        for(var i=0;i<selector.children.length;i++){
            if(selector.children[i].value == content){
                selector.selectedIndex = i;
            }
        }
    }
    setSelectedItem("Baz")
</script> 
```

# cocoa - Cocoa - 如何以编程方式决定要显示的第一个窗口？

> ID：12241665
> 
> 赞同：0
> 
> 时间：2012-09-03T03:32:13.367
> 
> 标签：cocoa, xcode4

刚接触 Cocoa 框架 - 我从 [这个问题](https://stackoverflow.com/questions/5237833/how-does-xcode-decide-which-xib-to-show-first)中了解到，第一个窗口是由 info.plist 文件中的设置决定的。

对于我的应用程序，要显示的窗口由一些外部设置决定。如何设置在运行时显示的第一个窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T03:37:14.197

在您的 AppDelegate 类中，您会发现一个名为 - (void)applicationDidFinishLaunching:(NSNotification *)aNotification{} 的方法，您必须创建一个要加载和加载窗口的窗口控制器类的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T04:09:46.783

以编程方式显示您需要在 Appdelegate`makeKeyAndOrderFront`中`awakeFromNib`或 Appdelegate中设置的第一个窗口`- (void)applicationDidFinishLaunching:(NSNotification *)aNotification` 它会在第一个显示您的决定窗口。

```
- (void)awakeFromNib
{
    [window makeKeyAndOrderFront:NSApp];

} 
```

或者

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification`
{

     [window makeKeyAndOrderFront:NSApp];

} 
```

# php - 在 PHPUnit 中如何强制 tearDownAfterClass() 在出现意外异常的情况下运行

> ID：12241667
> 
> 赞同：9
> 
> 时间：2012-09-03T03:32:30.880
> 
> 标签：php, unit-testing, phpunit

因此，每次我在 PHPUnit 中遇到意外异常（例如由于完整性检查而无法插入数据库）时，我的测试都会失败，并且它会在没有运行`tearDownAfterClass()`函数的情况下出错。这将使我的数据库处于混乱状态，因此我必须手动清理它。有没有办法确保`tearDownAfterClass()`始终执行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T20:08:27.160

`tearDownAfterClass`即使测试方法出现错误和失败，PHPUnit 也会调用。抛出异常*时不会*调用它。`setUpBeforeClass`为了确保清理您的数据库，请将清理代码移动到您从中调用的新方法`tearDownAfterClass`和`setUpBeforeClass`.

```
function FooTest extends PHPUnit_Framework_TestCase
{
    static function setUpBeforeClass() {
        try {
            ... setup code that might fail ...
        }
        catch (Exception $e) {
            self::cleanupDatabase();
            throw $e;  // so the tests will be skipped
        }
    }

    static function tearDownAfterClass() {
        self::cleanupDatabase();
    }

    static function cleanupDatabase() {
        ... clean ...
    }

    ... test methods ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T10:55:55.510

您可以覆盖该功能

```
protected function onNotSuccessfulTest(Exception $e) 
```

例如；

```
$this->tearDownAfterClass();
throw $e; 
```

# javascript - 根据窗口宽度动态更改 jQuery 滑块选项

> ID：12241668
> 
> 赞同：1
> 
> 时间：2012-09-03T03:33:06.927
> 
> 标签：javascript, jquery, resize

我想根据窗口宽度（加载和调整大小）更改 jQuery 选项。

我找到了接近我需要的解决方案，但我对 jQuery 或 javascript 的了解不够，无法根据我的需要定制它们。

这是我的 jQuery 代码：

```
<script type="text/javascript">
  var tpj = jQuery;

  tpj.noConflict();

  tpj(document).ready(function () {

    if (tpj.fn.cssOriginal != undefined) tpj.fn.css = tpj.fn.cssOriginal;

    tpj('#rev_slider_1_1').show().revolution({
      delay: 5000,
      startwidth: 1920,
      startheight: 515,
      hideThumbs: 200,

      thumbWidth: 100,
      thumbHeight: 50,
      thumbAmount: 4,

      navigationType: "bullet",
      navigationArrows: "verticalcentered",
      navigationStyle: "navbar",

      touchenabled: "on",
      onHoverStop: "off",

      navOffsetHorizontal: 0,
      navOffsetVertical: 20,

      shadow: 0,
      fullWidth: "on"
    });

  }); //ready
</script> 
```

我想改变`startheight`基于窗口宽度。

如果窗口宽度高于 1280，我希望高度的值为 515，如果低于 1280，我希望高度为 615，如果宽度小于 480，则高度为 715。

在另一篇文章的帮助下，[我](https://stackoverflow.com/questions/12234413/use-jquery-to-change-height-of-slider-based-on-window-size)可以使用此脚本更改我需要的 css：

```
$(window).on('load resize', function () {
  var w = $(window).width();
  $("#rev_slider_1_1 #rev_slider_1_1_wrapper")
    .css('max-height', w > 1280 ? 515 : w > 480 ? 615 : 715);
}); 
```

但我还需要即时更改 jQuery`startheight`值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T03:53:26.283

为什么不在 CSS 中使用百分比。

我在这里创建了一个示例：

[http://jsfiddle.net/webwarrior/aLJQm/52/](http://jsfiddle.net/webwarrior/aLJQm/52/)

```
<div id="slider"></div> 
```

CSS：

```
#slider {
    width: 90%; 
} 
```

要调整大小，请在调整大小时使用 JavaScript 和类似的东西：

```
var clientWidth = jQuery(window).width();
var clientHeight = jQuery(window).height();
jQuery("#rev_slider_1_1 #rev_slider_1_1_wrapper").height(clientHeight/20); 
```

现在在图像上尝试以下操作：

```
.slotholder{
    overflow: hidden;
}
.slotholder img{
    width: 110%;
    margin-left: -5%;
} 
```

如[http://jsfiddle.net/webwarrior/wLFEJ/11/](http://jsfiddle.net/webwarrior/wLFEJ/11/)

hth

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:22:09.077

像这样修改“加载调整大小”事件绑定：

```
$(window).on('load resize', function () {
  var w = $(window).width();
  $("#rev_slider_1_1 #rev_slider_1_1_wrapper")
    .css('max-height', w > 1280 ? 515 : w > 480 ? 615 : 715);
  if(w > 1280) { tpj('#rev_slider_1_1').revolution('option', 'startheight', 515);}
  else if(w < 1280 && w > 480) { tpj('#rev_slider_1_1').revolution('option', 'startheight', 615); }
  else { tpj('#rev_slider_1_1').revolution('option', 'startheight', 715); }      
}); 
```

这适用于大多数 jquery 插件，但由于您似乎使用的是付费插件（我的猜测是 http://codecanyon.net/item/slider-revolution-responsive-jquery-plugin/2580848），自定义可能是受限制 - 所以，一切顺利！:)

# android - 如何在android中取消闹钟？

> ID：12241674
> 
> 赞同：2
> 
> 时间：2012-09-03T03:33:30.763
> 
> 标签：android, alarm, cancel-button

我正在开发一个应用程序，我在其中创建事件并为事件设置警报。我需要知道如何取消警报。我遇到了麻烦。任何人都可以帮助我，谢谢。

**更新**
发布了代码，请参见下面的代码。报警类.java

```
Button buttonCancel = (Button) findViewById(R.id.btnCancel);
        buttonCancel.setOnClickListener(new Button.OnClickListener()
        {

            @Override
            public void onClick(View arg0)
            {
                Intent i = new Intent(AlarmClass.this, AlarmReceiver.class);
                PendingIntent pendingIntent = PendingIntent.getBroadcast(AlarmClass.this, 1, i, 0);

                AlarmManager aManager = (AlarmManager) getSystemService(ALARM_SERVICE);
                aManager.cancel(pendingIntent);

                Toast.makeText(getApplicationContext(), "Alarm has been cancelled", Toast.LENGTH_SHORT).show();
            }

        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T03:38:42.730

`cancel()`您可以简单地通过AlarmManager 的方法取消警报。

```
AlarmManager am; 
.
.
.
am.cancel ( PendingIntent operation ); 
```

例如

```
Intent intent = new Intent(this, AlarmReceive.class);
PendingIntent sender = PendingIntent.getBroadcast(this,0, intent, 0);
AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);

alarmManager.cancel(sender); 
```

您需要将`PendingIntent`' 对象传递给 cancel() 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T07:02:19.280

要停止服务，您可以使用`stopSelf();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T01:25:24.803

有一点需要注意，有点愚蠢的是，AlarmManager 实际上会在调用 cancel() 时发送 PendingIntent。为什么会这样，我不知道。不确定你是否注意到这一点，但我注意到了。为了解决这个问题，我在 PendingIntent 本身上调用了 cancel()：

```
 myntent = new Intent(SetActivity.this,AlarmActivity.class);
   pendingIntent = PendingIntent.getActivity(CellManage_AddShowActivity.this,
             id, myntent,PendingIntent.FLAG_UPDATE_CURRENT);
   pendingIntent.cancel();
   alarmanager.cancel(pendingIntent); 
```

# javascript - JavaScript 对象作为哈希？复杂度是否大于 O(1)？

> ID：12241676
> 
> 赞同：59
> 
> 时间：2012-09-03T03:33:48.100
> 
> 标签：javascript, performance

对于我最近编写的一些算法，我认为散列会很棒。我认为我可能只使用对象中的成员变量作为键值对。我不确定这是否是最佳选择，因为我真的不知道幕后发生了什么。我还认为 V8 的做法与其他环境不同。然而，我确实想象查找成员变量会很快（希望如此）？

综上所述，我想知道在 JavaScript 对象中写入、读取、创建和删除成员变量的运行时复杂度是否都是 O(1)。如果环境存在差异（v8 与其他），它们是什么？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-09-03T23:31:18.843

是的，它们是哈希。不同浏览器的实现是不同的。尽管许多文章声称对象不是散列，但它们的行为非常像散列，因此可以这样使用。

我必须通过运行性能测试来证明这一点：

阅读这些测试的方法是，当对象的大小增加时，如果 ops/sec 没有性能差异，那么这意味着对象是散列。哈希的定义特征是每个操作的复杂度为 O(1)，无论它与其他操作相比更快或更慢。

测试： http:
[//jsperf.com/objectsashashes/2](http://jsperf.com/objectsashashes/2)（100 键）
[http://jsperf.com/objectsashashes/3](http://jsperf.com/objectsashashes/3)（100k 键）
[http://jsperf.com/objectsashashes/](http://jsperf.com/objectsashashes/)（100 万键）
[http:// /jsperf.com/objects-as-hashes-300-mil（10m](http://jsperf.com/objects-as-hashes-300-mil)键）

注意：每个浏览器在不同的操作中更快/更慢。这似乎在版本之间和每年都在变化。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-03T03:41:48.877

JavaScript 对象*是*哈希。我无法想象任何不会对对象属性提供恒定时间 CRUD 操作的合理实现。

您是否看到这种方法存在特定的性能问题？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-03-20T08:30:20.853

JavaScript 中的对象是哈希表的一个示例，因为对象数据表示为键和值。

# iphone - Admob 集成

> ID：12241680
> 
> 赞同：0
> 
> 时间：2012-09-03T03:34:05.213
> 
> 标签：iphone, xcode, frameworks, admob

我正在尝试将 admob 添加到我的应用程序中，但我对第 4 步感到困惑

> 在 Other Linker Flags 下，将 -all_load 添加到 Debug 和 Release。

是在 OTHER_LDFLAGS 下吗？我该怎么做呢？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T04:13:48.060

做这个：

```
1\. Go to target seetings of your project.

2\. Now go to Build settings. In Search bar type " Other Linker Flags ". As shown below in image will appear on screen. 
```

![在此处输入图像描述](../Images/c1b3fb6e6f485ab19ccf2f2c5366ddc5.png)

现在将 -all_load 添加到 Debug 和 Release。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T04:17:53.133

检查此图像以设置其他链接器标志。希望有帮助。

![在此处输入图像描述](../Images/c775474918f806ac4d3b403104862ecb.png)

# c# - MonoTouch 缺少成员？

> ID：12241682
> 
> 赞同：1
> 
> 时间：2012-09-03T03:34:42.463
> 
> 标签：c#, objective-c, binding, xamarin.ios, catransform3d

我只是将一个 objc 视频播放器示例转换为 MonoTouch 并来到这一部分：

```
self.view.layer.sublayerTransform = CATransform3DMakePerspective(1000); 
```

在 Monotouch 中，我可以进行“缩放”或“旋转”变换：

```
this.View.Layer.SublayerTransform = CATransform3D.MakeScale(1.0f, -1.0f, 1.0f); 
```

但即使在对象浏览器等效项中搜索后，也看不到透视选项。这是否是我在某处读到的 API 的“策划”的一部分，没有将较少使用的项目带到 MonoTouch ？

我将如何使用此功能？会员以这种方式失踪是否很常见？我认为一个自动化工具会生成绑定，所以我认为所有元素都是可用的，除非冗余或不推荐使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T14:15:39.173

我找不到`CATransform3DMakePerspective`在 Apple 文档网站中命名的函数（grepping Apple SDK 头文件也没有返回它）。

*注意：如果您有指向其文档的 URL，请编辑您的帖子*

谷歌搜索[返回一个宏](http://b2cloud.com.au/how-to-guides/ios-perspective-transform)：

```
#define CATransform3DMakePerspective(x, y) (CATransform3DPerspective(CATransform3DIdentity, x, y)) 
```

这取决于另一个宏`CATransform3DPerspective`和一个 C 函数`CATransform3DMake`。它们中的每一个看起来都很容易移植到 C#。

这**可能**与您要移植的 ObjC 示例不同。OTOH，您的视频播放器的代码应该包含可以翻译成 C# 的类似功能。

# perl - 如何将 Starman 请求代理到 Apache？

> ID：12241685
> 
> 赞同：0
> 
> 时间：2012-09-03T03:35:12.007
> 
> 标签：perl, psgi, starman

我将starman 用于我的网络应用程序。Apache Web 服务器侦听端口 8080。我想在 Starman 中重写一些请求，例如`'/request'`对这个 Apache Web 服务器的请求。我试图找到一些下午，但我找到了一些帮助我的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T05:51:21.380

[Plack::App::Proxy](http://search.cpan.org/dist/Plack-App-Proxy/lib/Plack/App/Proxy.pm)允许您代理到 app.psgi 中的另一个 Web 服务器。改编自大纲：

```
use Plack::Builder;

# proxy all requests for /request to 127.0.0.1:8080
builder {
    mount "/request" => Plack::App::Proxy->new(remote => "http://127.0.0.1:8080")->to_app;
}; 
```

# jquery-mobile - JQM 嵌套弹出窗口

> ID：12241688
> 
> 赞同：0
> 
> 时间：2012-09-03T03:35:27.320
> 
> 标签：jquery-mobile

我很难使用 JQM 的新 Alpha 版本不显示嵌套弹出窗口。例如，我正在显示一个用户应该填写的弹出表单，如果服务器端验证失败，我想显示一个错误弹出窗口。我发现没有显示错误弹出窗口。我怀疑它显示在原始弹出窗口下方。

```
function bindSongWriterInvite() {

    // Bind the click event of the invite button
    $("#invite-songwriter").click(function () {
        $("#songwriter-invite-popup").popup("open");
    });

    // Bind the invitation click event of the invite modal
    $("#songwriter-invite-invite").click(function () {
        if ($('#songwriter-invite').valid()) {
            $('#songwriter-invite-popup').popup('close');
            $.ajax({
                type: 'POST',
                async: true,
                url: '/songwriter/jsoncreate',
                data: $('#songwriter-invite').serialize() + "&songName=" + $("#Song_Title").val(),
                success: function (response) {
                    if (response.state != "success") {
                        alert("Should be showing error dialog");
                        mobileBindErrorDialog(response.message);
                    }
                    else {
                        mobileBindErrorDialog("Success!");
                    }
                },
                failure: function () {
                    mobileBindErrorDialog("Failure!");
                },
                dataType: 'json'
            });
        }
    });

    // Bind the cancel click event of the invite modal
    $("#songwriter-invite-cancel").click(function () {
        $("#songwriter-invite-popup").popup("close");
    });
}

function mobileBindErrorDialog(errorMessage) {
    // Close all open popups.  This is a work around as the JQM Alpha does not
    // open new popups in front of all other popups.
    var error = $("<div></div>").append("<p>" + errorMessage + "</p>")
                                .popup();
    $(error).popup("open");
} 
```

因此，您可以看到我尝试显示错误对话框，无论 ajax 发布是成功还是失败。它只是永远不会出现。

有人有什么想法吗？

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T23:57:20.920

我找到了解决办法！

我在 bindErrorPopup 函数上设置了一个延迟，以等待弹出关闭动画完成。

```
function mobileBindErrorDialog(errorMessage, delay) {
    var error = $("<div></div>").attr({
        'data-rel': "popup",
        'data-theme': "a"
    });

    $(error).append("<p>" + errorMessage + "</p>")
            .popup({
                overlayTheme: "a",
                positionTo: "window",
                theme: "a"
            });

    setTimeout(function () {
        $(error).popup("open");
    }, delay);
} 
```

效果很棒！

# c++ - 同一容器中的 IOCP 多个套接字完成端口

> ID：12241690
> 
> 赞同：0
> 
> 时间：2012-09-03T03:36:01.607
> 
> 标签：c++, windows, io, winsock, iocp

在过去的几天里，我一直在思考如何解决我面临的一个问题，我试图研究这个话题，但我真的不知道我能做什么。

我在同一个结构中有 2 个套接字，它们都具有相同的完成端口。问题是，它们都使用不同的协议。有没有办法可以找出触发了哪个套接字？他们叫game_socket，和client_socket

示例代码将类似于...

```
while (true) {
error = GetQueuedCompletionStatus(CompletionPort, &BytesTransfered, (PULONG_PTR)&Key, &lpOverlapped, 0);
srvc = CONTAINING_RECORD ( lpOverlapped, client , ol );
if ( error == TRUE ) {
cout << endl << "SOCKET: [" << srvc->client_socket << "] TRIGGERED - WORKER THREAD" << endl;
cout << endl << "BytesTransfered: [" << BytesTransfered << "]" << endl;

if ( srvc->game_client triggered ) {
// .. this code
} else {

// .. this code
} 
```

任何想法或帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T08:21:35.650

使用 IOCP 时，每个异步操作都可以使用两项用户数据。

第一个是完成键，它是“每个连接”数据，当您通过调用 CreateIoCompletionPort() 与套接字/文件句柄和现有完成端口将文件句柄或套接字与完成端口相关联时设置。对于给定连接，每次调用 GetQueuedCompletionStatus() 时都会返回此值。

第二个是“扩展重叠”结构，即“按操作”数据。每个并发操作必须具有为其分配的唯一重叠结构。

在您上面的设计中，您应该使用“每个连接”数据来识别您的连接。您有两个链接的连接（套接字），所以我将有两个链接的类，一个用于连接的每一侧。该类（或结构，如果您使用的是 C 而不是 C++）将保存套接字、指向另一半连接的指针和一个指示它是哪种类型的连接的标志。如果使用 C++，这两个类将派生自一个公共基类，以便您可以调用成员函数来确定完成键代表的连接类型。如果使用 C，请使用有区别的联合。

然后，您只需将完成键转换为基础，然后确定您拥有的连接类型并转换为正确的类/结构。您现在知道在哪个连接上执行了操作。连接类可以存储运行其协议的状态机的所有状态。

正如 Criag 所提到的，每个重叠的结构都是“每个操作唯一的”，在我的 IOCP 代码中，这往往允许访问操作的数据缓冲区和一个告诉我操作是什么的标志（读/写/接受/连接等） ）。

一个潜在的复杂性是让每个操作和每个连接数据保持活动状态，直到使用它的所有未完成的操作完成。我个人喜欢对每个连接和每个操作数据进行引用计数，但我相信还有其他方法。

我有一些使用这些概念的 IOCP 示例代码（虽然不提供“双连接”示例），您可以从这里下载：[http ://www.serverframework.com/products---the-free-框架.html](http://www.serverframework.com/products---the-free-framework.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T03:54:53.770

您使用的重叠扩展结构非常适合**特定的**连接实例。例如，该结构不仅应包含正在执行操作的套接字，还应包含操作。例如，可能正在读取或写入的套接字上的 IO 完成应反映启动 IO 请求时存在的状态。大多数基于 IOCP 的客户端/服务器代码示例将证明这种普遍的意识形态。

在您的情况下，您不应该对具有两个可能独立操作的两个不同套接字使用相同的 OVERLAPPED 结构。如果套接字在某种意义上是“相关的”，那么应该在您的 OVERLAPPED 结构之外进行跟踪和维护。每个都应该有自己独特的结构来完成自己独特的 IO 完成。老实说，其他任何事情都让人头疼。

话虽如此，您的用例似乎距离改变您当前的方案以适应我所描述的内容并不遥远。我总是不愿意给出“你不应该那样做”的答案，因为我自己完全讨厌听到这些答案，但在这种情况下，这仍然是有必要的。

祝一切顺利。

# ubuntu - 在 /etc/apt/sources.list 中使用“deb file:/local-path-to-repo ...”时发生 GPG 错误

> ID：12241692
> 
> 赞同：-1
> 
> 时间：2012-09-03T03:36:10.790
> 
> 标签：ubuntu, package, apt, system-administration

我需要在非互联网连接环境中安装软件包。我的计划是从 Internet 下载 dist 结构，然后将文件路径添加到 /etc/apt/sources.list。

所以我从一个 ftp 镜像服务器下载了相关的结构，包括 ubunt/dists/precise、precision-backports、precision-proposed、precision-security、precision-updates。

然后我删除原始源并将以下内容添加到我的 /etc/apt/sources.list 中。

```
deb file:path-to-local-ubuntu-directory/ precise main restricted multiverse universe
deb-src file:path-to-local-ubuntu-directory/ precise main restricted multiverse universe 
```

然后我在apt-get更新后得到如下GPG错误。

```
root@openstack:/~# apt-get update
Ign file: precise InRelease
Get:1 file: precise Release.gpg [198 B]
Get:2 file: precise Release [50.1 kB]
Ign file: precise Release
Get:3 file: precise/main TranslationIndex [3,761 B]
Get:4 file: precise/multiverse TranslationIndex [2,716 B]
Get:5 file: precise/restricted TranslationIndex [2,636 B]
Get:6 file: precise/universe TranslationIndex [2,965 B]
Reading package lists... Done
W: GPG error: file: precise Release: The following signatures were invalid: BADSIG 0976EAF437D05B5 Ubuntu Archive Automatic Signing Key <ftpmaster@ubuntu.com> 
```

我曾尝试在谷歌之后使用以下步骤但徒劳无功。

```
sudo apt-get clean
cd /var/lib/apt
sudo mv lists lists.old
sudo mkdir -p lists/partial
sudo apt-get update 
```

有没有办法解决这个问题？为什么会出现这个错误？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:38:27.937

经过大量的调查和尝试。我认为问题可能是文件完整性问题。所以我重新下载整个 dist/precise 并更新没有任何问题。

# xml-parsing - How-XLST 转换

> ID：12241694
> 
> 赞同：-2
> 
> 时间：2012-09-03T03:36:55.040
> 
> 标签：xml-parsing, transform, xslt-2.0

只是想问一下如何在下面给定的 xml 示例中获取作者姓名并添加 eq="yes" 的属性。EQ 意味着平等的贡献者。

这是 XML。

```
<ArticleFootnote Type="Misc">
<Para>John Doe and Jane Doe are equal contributors.</Para>
</ArticleFootnote> 
```

这应该是其他形式的 XML 的输出。

```
<AuthorGroups>
<Authors eq="yes">John Doe</Authors>
<Authors eq="yes">Jane Doe</Authors>
</AuthorGroups> 
```

假设已经在作者列表中定义了 JOhn Doe 和 Jane Doe，但是在转换之后，作者标签应该具有属性 eq="yes"。请帮忙，因为我对 xlst 的写作了解不多。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T02:12:11.987

这里没有足够的信息给你一个明确的答案。

如果你有一个作者列表，你可以在每个作者的名字上依次使用 fn:match()，也许在模式中将空格更改为 \s+ 之后。

不过，我通常使用 Perl 来做这类事情，但要小心不要破坏标记结构。

在任何情况下，您都需要一次处理一个单词，在一个名字只是“John”而另一个名字是“John Doe”的情况下，可能会递归地找到最长的匹配项。请注意不要将标记添加到已处理的名称中。

如果文本确实总是准确地说明您在那里的内容，但名称不同，您可以有一个模板来匹配 ArticleFootnote/Para[contains(., 'are equal contrubutors')] 并使用 substring()和 substring-before() 或 XSLT 2 模式匹配。

# iphone - 我无法在 iTunes Connect 中获得崩溃报告

> ID：12241695
> 
> 赞同：5
> 
> 时间：2012-09-03T03:37:06.333
> 
> 标签：iphone, ios, crash-reports, crash-log

我在 App Store 上提出了这个应用程序。我检查了 iTunes Connect，没有累积崩溃报告。

目前使用 Xcode 4.4 和 App 名称 CityOfOz。

不知道~TT

使用崩溃报告所需的其他任务？如何根据崩溃日志进行累积？

我会等待你的友好回应。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T10:24:26.723

iTunes connect 仅在特定组达到阈值后显示崩溃报告（所需的崩溃数量未知）。此外，该列表每天只能更新一次。此外，如果用户在设置设备时确实允许发送要发送给 Apple 的匿名数据，它只会显示崩溃报告。大多数用户不允许这样做，因此您看不到任何报告。同样在 iOS 5.0 之前，这些报告只会在设备与 iTunes 同步时发送给 Apple。

作为以下答案的一部分，我列出了一些关于如何快速可靠地获取崩溃报告的替代方法：[Include custom data into iOS crash dumps](https://stackoverflow.com/questions/8488894/including-custom-data-into-ios-crash-dumps/8511100#8511100)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-26T15:38:48.693

正如 Kemi 所提到的，iTunes Connect 中的崩溃报告部分并不是特别有用。如今，大多数开发人员都使用第三方崩溃报告工具。

根据我的经验，crashlytics ( [http://try.crashlytics.com](http://try.crashlytics.com) ) 是最好的解决方案之一。

# javascript - 为什么这个代码指向窗口对象？

> ID：12241696
> 
> 赞同：4
> 
> 时间：2012-09-03T03:37:07.377
> 
> 标签：javascript, arguments, this

我的代码是：

```
var length = 20;
function fn(){
    console.log(this.length);
}

var o = {
    length:10,
    e:function (fn){
       fn();
       arguments[0]();
    }
}

o.e(fn); 
```

输出是`20,1`，谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T03:43:04.883

当`this`关键字出现在函数内部时，其值取决于**函数的调用方式**。

在您的情况下，`fn()`在不提供 this 值的情况下调用，因此默认值为`window`. 对于`arguments[0]()`，上下文是`arguments`对象，其长度为`1`。

**关键是在哪里调用函数**并不重要，重要的**是如何调用函数**。

```
var length = 20;
function fn(){
    console.log(this.length);
}

var o = {
    length:10,
    e:function (fn){
       fn(); // this will be the window.
       arguments[0](); // this will be arguments object.
    }
}

o.e(fn); 
```

此外，如果你想`this`成为 object `o`，你可以先使用`call`or `apply`，或`bind`object 。

```
var length = 20;
function fn(){
    console.log(this.length);
}

var o = {
    length:10,
    e:function (fn){
       var fn2 = fn.bind(this);
       fn.call(this); // this in fn will be the object o.
       fn.apply(this); // this in fn will be the object o.
       fn2(); // this also will be the object o.
    }
}

o.e(fn); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T04:09:01.520

让我们稍微扩展一下您的代码：

```
var length = 20;
function fn() {
    console.log(this, this.length);
}

var o = {
    length: 10,
    e: function(fn) {
        fn();
        fn.call(this);
        arguments[0]();
    }
}

o.e(fn);​ 
```

演示：http: [//jsfiddle.net/ambiguous/Ckf2b/](http://jsfiddle.net/ambiguous/Ckf2b/)

现在我们可以看到调用时是什么`this`（以及从何`this.length`而来） 。`fn`这给了我以下输出：

```
DOMWindow 0
Object 10
[function fn() { console.log(this, this.length); }] 1 
```

我们也有三种调用函数的方式`fn`：

1.  `fn()`: 就像任何旧函数一样调用它。
2.  `fn.call(this)`：[`call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)用于强制特定上下文（AKA `this`）。
3.  `arguments[0]()`:`fn`通过`arguments`对象调用。

当您说. `fn()`_ 全局恰好有一个[属性](https://developer.mozilla.org/en-US/docs/DOM/window.length)：`this``window``this``window`[`length`](https://developer.mozilla.org/en-US/docs/DOM/window.length)

> 返回窗口中的帧数（frame 或 iframe 元素）。

这就是零（在我的输出中）的来源，您`window.length`可能会有所不同。

我们在里面这么称呼`e`is ，`o.e(fn)`这就是意思（除了绑定函数和相关的复杂性）。所以in is and that与我们在控制台中得到的and相同（或多或少） 。注意到那个点再次出现了吗？`this``e``o``o.e(...)``this``fn.call(this)``o``fn.call(this)``o.fn = fn; o.fn()``o``10`

> `fn.call(o)`就好像`o.fn = fn; o.fn()`

第三个，`arguments[0]()`，包含一个隐藏点，就像`p = 'm'; o[p]`（或多或少）一样，`o.m`就像`arguments[0]()`一样`fn = arguments[0]; arguments.fn = fn; arguments.fn()`。

# codeigniter - 如何防止机器人在 CodeIgniter 中创建会话？

> ID：12241701
> 
> 赞同：1
> 
> 时间：2012-09-03T03:38:21.883
> 
> 标签：codeigniter, session, web-crawler, robot

我正在将 CodeIgniter 与存储在我的数据库中的会话一起使用。在短时间内，机器人/蜘蛛等创建了大量会话。

有没有办法防止这种情况？也许通过.htaccess？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T05:52:01.313

首先，您应该在域的 Web 根目录中创建一个 robots.txt 文件来解决两个问题。首先控制网站被抓取的速度，这有助于防止机器人/蜘蛛同时创建大量数据库连接。其次是防止特定的机器人爬取网站。使用以下默认值，但您可能希望添加或删除拒绝的用户代理，并调整抓取速度

示例代码：

```
User-agent: *
Crawl-delay: 10

User-agent: Baiduspider
Disallow: /

User-agent: Sosospider
Disallow: / 
```

使用 /robots.txt 时有两个重要的注意事项：

1.  机器人可以忽略您的 /robots.txt。尤其是扫描网络以查找安全漏洞的恶意软件机器人，以及垃圾邮件发送者使用的电子邮件地址收集器将不予理会。
2.  /robots.txt 文件是公开可用的文件。任何人都可以看到您不希望机器人使用服务器的哪些部分。

# javascript - IE8 jquery ajax 头请求不起作用？

> ID：12241704
> 
> 赞同：1
> 
> 时间：2012-09-03T03:38:38.533
> 
> 标签：javascript, jquery, html, ajax, internet-explorer-8

典型的IE问题大家。这适用于 chrome、firefox、safari - 但不适用于 IE8。还没试过IE9。有谁知道我错过了什么？我尝试了使用和不使用 crossDomain 参数。提前致谢。

```
$.ajax({
  url:'http://www.example.com/photo.jpg',
  type:'HEAD',
  crossDomain:true,
  error: function() {
    // something bad
  },
  success: function() {
    // something cool
  } 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T03:40:30.153

从这里[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)：

**类型**

**默认值**：“获取”

要发出的请求类型（“POST”或“GET”），默认为“GET”。注意：这里也可以使用其他 HTTP 请求方法，例如 PUT 和 DELETE，但并非所有浏览器都支持。

# linux - 如何检查手册页是否存在？

> ID：12241709
> 
> 赞同：4
> 
> 时间：2012-09-03T03:38:56.977
> 
> 标签：linux, bash, conditional-statements, manual

我正在尝试编写一个脚本来将手册页转换为 PDF 文件。我现在的脚本是：

```
#! /usr/bin/env bash
[[ $# -ne 1 ]] && { echo "Usage: $(basename $0) [command]" ; exit 1 ; }
man -t ${1} | ps2pdf14 - > "${1}_man.pdf" 
```

问题是如果手册页不存在，脚本仍然会继续执行，生成一个空的 PDF 文件。所以我想知道是否有办法确定手册页是否存在？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T03:55:29.450

## 从函数中使用人的退出状态

man(1) 手册页定义了以下退出状态代码：

> 退出状态
> 
> ```
> 0      Successful program execution.
> 1      Usage, syntax or configuration file error.
> 2      Operational error.
> 3      A child process returned a non-zero exit status.
> 16     At least one of the pages/files/keywords didn't exist or wasn't
>        matched. 
> ```

这意味着您可以使用*man*本身的退出状态来确定页面是否可以通过*manpath*获得。例如：

```
check_for_man_page () {
    man "$1" > /dev/null 2>&1
} 
```

使用此函数，您可以对退出状态使用测试条件，如下所示：

```
$ check_for_man_page "cat" && echo 'Found it!'
Found it!

$ check_for_man_page "quux" || echo 'Not found!'
Not found! 
```

## 使用 If/Else 语句

这是执行此操作的另一种方法，使用 if/else 语句来确定是否运行您的原始代码：

```
if man "$1" > /dev/null 2>&1
then
    man -t ${1} | ps2pdf14 - > "${1}_man.pdf"
else
    echo "Missing man page: $1" >&2
fi 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T03:49:06.510

它并不整洁，但这似乎可以满足您的要求：

```
if man -w ${1} >/dev/null 2>/dev/null ; then
    man -t ${1} | ps2pdf14 - > "${1}_man.pdf"
fi 
```

然而，一些手册页可能存在于手册的不同部分——例如`man 1 printf`和`man 3 printf`. 您可能希望修改脚本以考虑到这一点。

# c - 复杂 while 语句的时间和空间复杂度

> ID：12241712
> 
> 赞同：-1
> 
> 时间：2012-09-03T03:39:26.520
> 
> 标签：c, time-complexity

```
int foo(char *str)
{
    char *p = str;
    while (p && *p!='\0' && 
        ((*p >= 'a' && *p <= 'z') 
            || (*p >= 'A' && *p <= 'Z') || *p == '@')) {
         p++;
    }
    return p-str;
} 
```

上述复杂`while`语句的时间和空间复杂度是多少。它是否取决于 while encloser 中的语句 `while (p && *p!='\0' && ((*p >= 'a' && *p <= 'z') || (*p >= 'A' && *p <= 'Z') || *p == '@'))`

或仅在`while`身体上

```
while(){ 
 //body statements   
  p++;
} 
```

如上。它还取决于`&&`或的短路`||`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T06:44:35.277

我不知道您的运行时或空间复杂度，但实际条件复杂度可以简化很多，使其更具可读性。首先，您不必在`p`每个循环中检查`str`指针，首先在单独的检查中检查它是否为非空指针。其次，您应该使用[`isalpha`](http://en.cppreference.com/w/cpp/string/byte/isalpha)来检查字母。

所以代码可能看起来像这样：

```
int foo(char *str)
{
    if (str == NULL)
        return 0;

    char *p = str;
    while (*p != '\0' && (isalpha(*p) || *p == '@'))
        p++;

    return p - str;
} 
```

Using`isalpha`可以帮助您解决问题评论中提到的问题，即使您的语言环境发生更改也可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T04:00:38.257

当您谈论复杂性时，您是在谈论它根据输入的大小而增长了多少。在这种情况下，它基于作为`str`. 在 while 条件下检查的东西的数量不会改变。它被固定在算法中，即所谓的“常数因子”，所以我们不计算它。因为在最坏的情况下，测试对字符串的每个字符运行一次，它是`O(n)`，其中`n`是字符串的长度。

# php - 在 PHP 中使用 PDO 查询十六进制数 - PDO 总是在十六进制数周围添加引号？

> ID：12241719
> 
> 赞同：2
> 
> 时间：2012-09-03T03:41:17.007
> 
> 标签：php, pdo, hex

我正在尝试使用 PDO 执行此查询：

```
select * from users where uuid = 0x1e8ef774581c102cbcfef1ab81872213; 
```

我将此 SQL 查询传递给 PDO 的 prepare 方法：

```
select * from users where uuid = :uuid 
```

然后我传递这个哈希图来执行：

```
Array ( [:uuid] => 0x1e8ef774581c102cbcfef1ab81872213 ) 
```

当我调用 fetchAll 时，看起来这个查询正在 mysql 服务器上执行：

```
select * from users where uuid = '0x1e8ef774581c102cbcfef1ab81872213'; 
```

如何在不让 PDO 在我的十六进制周围添加引号的情况下执行查询？

谢谢，史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T03:48:20.970

您的值必须作为字符串插入，因为它远远超出（128 位）在 64 位和 32 位版本的 PHP 中可以表示为正常数字的值。

例如跳过占位符并将其直接嵌入到查询字符串中：

```
$uuid = '0x....';
$sql = "SELECT ... WHERE uuid = $uuid"; 
```

这意味着您将失去占位符的好处，并且必须直接处理 SQL 注入缓解。

您没有提及您正在使用哪个 DBMS，但您可以通过利用 DBMS 的强制转换功能来绕过它，例如。

```
SELECT... WHERE uuid = CAST(:uuid AS uuid_type) 
```

有了这个，即使它作为一个字符串进入数据库，它也会在关键时刻被视为原生 uuid。

# javascript - Node.js HTTP/NET——连接和请求的区别

> ID：12241721
> 
> 赞同：8
> 
> 时间：2012-09-03T03:41:39.683
> 
> 标签：javascript, http, node.js, tcp, tcp-ip

这个问题涉及围绕 tcp/ip 协议的一般概念，So 上已经有很好的答案，但我希望能够深入了解 node.js http/net 库的特殊性。

节点 http 服务器实例允许为两种类型的事件注册回调，“请求”事件和“连接”事件。后者是从 net 库继承的，还有一个字段“_connections”，它计算服务器当前拥有的并发连接数。

现在，在我看来，由于 http 是一个无状态协议，请求和连接事件之间应该有 1-1 的对应关系——但事实并非如此。在我的调试器中单步执行一个简单的“hello-world”服务器时，我看到请求事件的数量超过了连接事件的数量。我还看到，即使没有对服务器进行调用（并且进程没有暂停），.connections 字段也永远不会归零。为什么请求数不等于连接数，为什么服务器会在最终调用 response.end() 后保持连接打开（当应该刷新响应缓冲区并且连接结束时？）。

此外，http 服务器的并发连接数（不使用 keep-alive 做任何事情）怎么会高于 1？请求基本上不会在套接字上排队并一一处理吗？我知道 Node 是异步的，但我也认为它以单线程方式运行。

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-03T03:44:08.750

[HTTP](http://en.wikipedia.org/wiki/Http)是无状态的，但它运行在[TCP](http://en.wikipedia.org/wiki/Tcp)上，它不是无状态的。

通过设置[HTTP 请求标头](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Requests) `Connection: keep-alive`，可以（并且经常使用）保持底层 TCP 连接打开。[这是一种性能优化](http://en.wikipedia.org/wiki/HTTP_persistent_connection#Advantages)，因为反复建立和断开 TCP 连接的成本很高。

# javascript - 类的 Ext JS 最佳实践以太多的 .js 文件告终。性能呢？

> ID：12241723
> 
> 赞同：2
> 
> 时间：2012-09-03T03:41:55.447
> 
> 标签：javascript, performance, caching, extjs, extjs4

为了实现我的自定义元素/类（从 Ext JS 类/小部件扩展）的模块化和重用，我遵循[The Class System](http://docs.sencha.com/ext-js/4-1/#!/guide/class_system)中建议的方法。由于我使用了大多数简单和复杂的小部件以及布局容器，我最终可能会得到大量具有 3 到 4 级命名空间层次结构（以及文件夹结构）的 .js 文件。

我对这种方法有点紧张，因为传统上（使用原始 JavaScript）我试图尽量减少否。.js 文件。由于我的页面可能使用许多这些自定义元素，因此它将调用相当多的这些 .js 文件。我是否正确地假设这会造成巨大的性能瓶颈，还是我想太多了？

接下来，我如何确保曾经从服务器请求的 .js 文件至少在会话期间保持缓存在浏览器中？我观察到 .js 文件总是使用`dc`属性请求，每次使用随机数。这对这种情况没有帮助，因为我所要求的只是一个不会随每个请求而改变的类定义文件。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T03:47:40.410

您需要一个预部署构建步骤，将所有 .js 文件合并为一个文件以下载到客户端。（它也可能会缩小生成的文件。）然后您可以提供带有 HTTP 缓存标头的单个文件。

# android - 如果无法ping通，Android wifi重新连接

> ID：12241725
> 
> 赞同：0
> 
> 时间：2012-09-03T03:42:58.283
> 
> 标签：android, wifi

你好，有wifi管理器吗？

如果它在范围内，请连接到我的首选接入点，然后尝试每 30 秒连接一次网络，如果无法连接到网络，请切换 wifi。

我有一个 wibro 4g 调制解调器，它最终断开了 wifi 连接，但 Android 仍然认为它有连接。

这也可能是 Android 让 wifi 进入睡眠状态。所以另一个答案是，我怎样才能让 2.23 永远不让 wifi 进入睡眠状态？我当然在设置中设置了这个......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T03:47:35.587

> 我怎样才能让 2.23 永远不让 wifi 进入睡眠状态？

你试过WIFI-LOCK吗？这将阻止它睡觉。

```
WifiLock wifiLock = ((WifiManager) getSystemService(Context.WIFI_SERVICE))
    .createWifiLock(WifiManager.WIFI_MODE_FULL, "mylock");

wifiLock.acquire(); 
```

# excel - 使用 ReportViewer 内置功能导出到 Excel

> ID：12241736
> 
> 赞同：4
> 
> 时间：2012-09-03T03:44:37.303
> 
> 标签：excel, reportviewer

我想知道是否可以将 Excel 输出设置为“锁定”，因为当我们尝试更改单元格的值时，会出现警告，表明我们无法更改它，除非我们删除表的保护。

我知道我们可以开发自定义 Excel 自动化代码，并在保存工作表之前设置密码来保护工作表。但是，有没有什么简单的方法可以使用 ReportViewer 的内置功能来实现这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T09:09:07.487

经过一番研究，我设法找到了解决方案：）想法是拦截ReportViewer的Export Report功能，然后运行我们自己的进程。此过程将获得正在生成的 Excel 文件的输出，然后读取它并应用任何必要的更改，并在将其作为下载发送给用户之前再次保存。但是应该注意的是，拦截方法会根据我们使用的报告类型而有所不同。就我而言，我的 ReportViewer 使用的是 WebForm 而不是 WinForm，并且大多数解释都是关于 ReportExport 事件的解释，该事件仅在 WinForm 中可用。

对于使用 WinForm 的用户，您可以像这样覆盖 ReportExport 事件：

```
void reportViewer_ReportExport(object sender, Microsoft.Reporting.WinForms.ReportExportEventArgs e)
{
    e.Cancel = true;
    // insert your own code to export excel
} 
```

在 WebForm 中，没有 ReportExport 的事件处理程序。我能想到的选项是在 .aspx 中创建一个自定义按钮，它将执行我们的自定义代码，或者直接呈现 excel 而无需预览报告。我决定直接渲染excel文件。我将使用数据集并从存储过程中获取数据。然后，我将数据集分配给 RDLC 并调用 Render 方法来获取输出。输出格式为byte[]，我用FileStream来写。完成后，我使用 Interop 打开 Excel 文件并应用保护。这是代码：

```
// Setup DataSet (Adapter and Table)
YourTableAdapters.ATableAdapter ds = new YourTableAdapters.ATableAdapter();
YourDataSet.ADataTable dt = new YourDataSet.ADataTable ();

ds.Fill(dt, outlet, period);

// Create Report DataSource
ReportDataSource rds = new ReportDataSource("DataSet1", (System.Data.DataTable)dt);

// Variables needed for ReportViewer Render method
Warning[] warnings;
string[] streamIds;
string mimeType = string.Empty;
string encoding = string.Empty;
string extension = string.Empty;

// Setup the report viewer object and get the array of bytes
ReportViewer viewer = new ReportViewer();
viewer.ProcessingMode = ProcessingMode.Local;
viewer.LocalReport.ReportPath = "YourReport.rdlc";
viewer.LocalReport.DataSources.Add(rds); // Add datasource here

byte[] bytes = viewer.LocalReport.Render("Excel", null, out mimeType,
                                          out encoding, out extension,
                                          out streamIds, out warnings);

// Prepare filename and save_path, and then write the Excel using FileStream.
String temp_path = Path.Combine(Server.MapPath(Config.ReportPath), "FileName.xls");
FileStream fs = new FileStream(temp_path, FileMode.Create);
fs.Write(bytes, 0, bytes.Length);
fs.Close();

// Open the Excel file created, and add password protection.
PIDExcel pidexcel = new PIDExcel();
pidexcel.CollectExcelPID();

Microsoft.Office.Interop.Excel.Application xlApp = new Microsoft.Office.Interop.Excel.Application();
Microsoft.Office.Interop.Excel.Range lock_range = null;

int excelid = pidexcel.GetNewExcelID();

Microsoft.Office.Interop.Excel.Workbook xlWorkBook = null;

try
{
    //xlApp.Visible = true;
    xlWorkBook = (Microsoft.Office.Interop.Excel.Workbook)xlApp.Workbooks.Open(temp_path,
                  Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                  Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                  Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                  Type.Missing, Type.Missing);

    foreach(Microsoft.Office.Interop.Excel.Worksheet displayWorksheet in xlApp.ActiveWorkbook.Worksheets)
    {
        lock_range = xlApp.Cells;
        lock_range.Select();
        lock_range.EntireColumn.Locked = true;
        displayWorksheet.Protect("<your password here>");
    }

}
catch (Exception ex)
{
    throw new Exception(ex.Message.Replace("'", "")); ;
}
finally
{
    // Set First Sheet Active
    xlWorkBook.Sheets[1].Select();
    xlApp.DisplayAlerts = false;
    xlWorkBook.Save();
    xlWorkBook.Close(Type.Missing, Type.Missing, Type.Missing);
    xlApp.Quit();

    System.Runtime.InteropServices.Marshal.FinalReleaseComObject(xlWorkBook);
    System.Runtime.InteropServices.Marshal.FinalReleaseComObject(xlApp);

    GC.WaitForPendingFinalizers();
    GC.Collect();

    pidexcel.KillExcel(excelid);

} 
```

通过使用这个概念，我可以轻松地设计报表输出，因为我使用 RDLC 作为模板来填充 SP 提供的数据，然后渲染它。想象一下，如果我们使用 Excel 手动编写报告代码（设置边框、合并单元格、分组）会很麻烦。

# objective-c - 如何使用 NSDate 为每周范围创建查找表（超过 5 年）

> ID：12241743
> 
> 赞同：0
> 
> 时间：2012-09-03T03:45:57.223
> 
> 标签：objective-c, ios, nsdate, nsdictionary, nsdateformatter

不确定如何最好地实现这一目标。

```
 NSDate *date = [NSDate date]; 
```

我需要查找日期并返回一个字符串值。

```
12/17/2011 < date < 12/23/2011  return "20120101"

12/24/2011 < date < 12/30/2012   return "20120102"

12/31/2011 < date < 01/06/2012   return "20120201" 
```

...

```
10/20/2012 < date < 10/26/2012  return "20122301" 
```

...

```
11/02/2013 < date < 11/08/2013   return "20132301" 
```

..

5年……每周

日期可以是 2017 年 12 月之前的任何日期。

我不知道返回字符串背后的逻辑，所以我不能简单地根据日期计算字符串。返回字符串（在模型中转换为 NSDate）成功地用作我的 fetchedresultscontroller 的部分。

我不确定如何基于 NSDate 创建查找表，或者我是否需要一些怪物 if/case 语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T04:41:18.303

我会计算相关日期的“周数”，然后从字符串数组中获取值。这应该适合你：

```
// Create an array of your strings.
// This would probably be best to read from a file since you have so many
NSArray *strings                = [NSArray arrayWithObjects:
                                   @"20120101",
                                   @"20120102",
                                   @"20120201",
                                   @"20122301",
                                   @"20132301", nil];

// Create a new date formatter so that we can create our dates.
NSDateFormatter *formatter      = [NSDateFormatter new];
formatter.dateFormat            = @"MM/dd/yyyy";

// Create the date of the first entry in strings.
// We will be using this as our starting date and will calculate the
// number of weeks that has elapsed since then.
NSDate *earliestDate            = [formatter dateFromString:@"12/17/2011"];

// The date to check
NSDate *dateToCheck             = [formatter dateFromString:@"01/12/2012"];

// Create a calendar to do our calculations for us.
NSCalendar *cal                 = [NSCalendar currentCalendar];

// Calculate the number of weeks between the earliestDate and dateToCheck
NSDateComponents *components    = [cal components:NSWeekCalendarUnit
                                         fromDate:earliestDate
                                           toDate:dateToCheck
                                          options:0];
NSUInteger weekNumber           = components.week;

// Lookup the entry in the strings array.
NSString *string;
if (weekNumber < [strings count])
{
    string = [strings objectAtIndex:weekNumber];
}

// Output is:  "String is: 20122301"
NSLog(@"String is: %@", string); 
```

# ios - NSFileManager 不保存

> ID：12241745
> 
> 赞同：0
> 
> 时间：2012-09-03T03:46:30.623
> 
> 标签：ios, nsfilemanager

我一直在尝试使用 NSFileManager 将图像缓存到我的沙盒应用程序的缓存目录中。不幸的是，我的代码似乎不起作用。

```
- (BOOL)saveImageToCacheFolder
{
    NSFileManager *filemgr = [NSFileManager defaultManager];
    NSString *cachePath = [[[filemgr URLsForDirectory:NSCachesDirectory inDomains:NSUserDomainMask] lastObject] absoluteString];
    NSString *fullpath = [cachePath stringByAppendingPathComponent:@"test.jpg"];
    NSURL *imageURL = [FlickrFetcher urlForPhoto:self.photoData format:FlickrPhotoFormatLarge];
    NSData *imageData = [NSData dataWithContentsOfURL:imageURL];

    BOOL success = false;
    if (imageData != nil) {
        success = [imageData writeToURL:[NSURL URLWithString:fullpath] atomically:true];
        if (!success) NSLog(@"Did Not Managed to save the image");
    }
    return success;
} 
```

这是我想要做的。首先，获取默认的 NSFileManager。其次，获取我的应用程序缓存目录的相对路径。第三，附加我的文件名（这里我现在只是写了测试）。第四，将我的图像转换为 NSData。四、将NSData对象写入指定路径。

编辑：添加 if 语句用于检查 imageData 是否为 nil

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T04:07:38.030

试试这个：

```
NSArray *myPathList = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
NSString *cachePath    = [myPathList  objectAtIndex:0];
NSString *fullpath = [cachePath stringByAppendingPathComponent:@"test.jpg"];

NSURL *imageURL = [FlickrFetcher urlForPhoto:self.photoData format:FlickrPhotoFormatLarge];
NSData *imageData = [NSData dataWithContentsOfURL:imageURL];

if (imageData != nil) {
    success = [imageData writeToURL:[NSURL fileURLWithPath:fullpath] atomically:YES];
    if (!success) NSLog(@"Did Not Managed to save the image");
} 
```

# asp.net-mvc - 如何在 MVC4 中存储大数据

> ID：12241754
> 
> 赞同：0
> 
> 时间：2012-09-03T03:47:46.057
> 
> 标签：asp.net-mvc, asp.net-mvc-4, large-data

我是 MVC 的新手。我有一些疑问，所以请澄清一下。

1.  如何在 MVC4 中存储大数据以及如何跨页面传递该数据。
2.  如何跨页面维护用户详细信息。在 webforms 中我们有会话，但在 mvc4 中我们将如何做。
3.  如果我们有两个同名的 actionresult，一个会在 POST 动作中被触发。CLR 如何识别要调用的 Action 方法..意味着它将如何识别调用 POST 方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T03:53:49.700

1.  定义“大数据”——记住网络是无状态的，持久性是使用数据库或服务器端缓存完成的。我需要更多关于你想在这里完成什么的信息。

2.  ASP.NET MVC 仍然支持会话。您可以从任何 Controller 操作访问 Session 集合。

3.  Post 操作方法必须具有不同的方法签名。通常的做法是将视图的模型指定为参数，或 FormValueCollection，例如：

-

```
// GET
public ActionResult Foo() {
}

// POST
[HttpPost]
public ActionResult Foo(FooModel model) {
}

OR:

// POST
[HttpPost]
public ActionResult Foo(FormValueCollection postValues) {
} 
```

# c# - 如何将 C# 变量值传递给 javascript 以使用 amcharts？

> ID：12241756
> 
> 赞同：0
> 
> 时间：2012-09-03T03:48:01.743
> 
> 标签：c#, javascript, asp.net, json, amcharts

我正在尝试将带有 json 字符串的变量从 C# 传递到 javascript，我试图在其中使用该信息来绘制 amchart 柱形图。但是，当我尝试从 javascript 访问存储 json 字符串的变量时，我收到以下错误：

> 编译器错误消息：BC30451：未声明“sjson”。由于其保护级别，它可能无法访问。

线上，

```
var chartData = '<%=sjson%>'; 
```

这是我的所有代码：

**C#**：

```
 public partial class Default3 : System.Web.UI.Page
    {
        public string sjson;
        protected void Page_Load(object sender, EventArgs e)
        {
            ArrayList conRc = new ArrayList();

            for (int i = 0; i < 10; i++)
            {

                conRc.Add(new Confidence(i.ToString(), (i + 10).ToString()));

            }

            foreach (object obj in conRc)
            {
                Confidence cnLv = (Confidence)obj;
                Response.Write(cnLv.Ip + " - " + cnLv.Count.ToString());
                Response.Write("</br>");
            }

            System.Web.Script.Serialization.JavaScriptSerializer oSerializer = new System.Web.Script.Serialization.JavaScriptSerializer();
            sjson = oSerializer.Serialize(conRc);

        }
    } 
```

**HTML**：

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
    <html>

        <head>

            <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
            <title>amCharts examples</title>
            <link rel="stylesheet" href="http://localhost/amcharts/images/style.css" type="text/css">
            <script src="http://localhost/amcharts/amcharts.js" type="text/javascript"></script>         
            <script type="text/javascript">

                var chart;

                var chartData = '<%=sjson%>'; //[{ "Ip": "0", "Count": "10" }, { "Ip": "1", "Count": "11" }, { "Ip": "2", "Count": "12" }, { "Ip": "3", "Count": "13" }, { "Ip": "4", "Count": "14" }, { "Ip": "5", "Count": "15" }, { "Ip": "6", "Count": "16" }, { "Ip": "7", "Count": "17" }, { "Ip": "8", "Count": "18" }, { "Ip": "9", "Count": "19"}];

                AmCharts.ready(function () {
                    // SERIAL CHART
                    chart = new AmCharts.AmSerialChart();
                    chart.dataProvider = chartData;
                    chart.categoryField = "Ip";
                    chart.startDuration = 1;

                    // AXES
                    // category
                    var categoryAxis = chart.categoryAxis;
                    categoryAxis.labelRotation = 90;
                    categoryAxis.gridPosition = "Count";

                    // value
                    // in case you don't want to change default settings of value axis,
                    // you don't need to create it, as one value axis is created automatically.

                    // GRAPH
                    var graph = new AmCharts.AmGraph();
                    graph.valueField = "Count";
                    graph.balloonText = "[[category]]: [[value]]";
                    graph.type = "column";
                    graph.lineAlpha = 0;
                    graph.fillAlphas = 0.8;
                    chart.addGraph(graph);

                    chart.write("chartdiv");
                });
            </script>

        </head>

        <body>
            <div id="chartdiv" style="width: 100%; height: 400px;"></div>
        </body>

    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T04:17:04.960

您似乎在这里错过了一些非常基本的东西。

aspx 的第一行应该如下所示：

```
<%@ Page Language="C#" Inherits="Default3 " Codebehind="Default3.aspx.cs" %> 
```

如果您没有该行，您的 aspx 页面将不会使用相同的类，并且您无法访问其公共属性。

# python - 简单的 Python 网络问题

> ID：12241763
> 
> 赞同：0
> 
> 时间：2012-09-03T03:49:00.753
> 
> 标签：python, networking

这是服务器程序

```
 # Echo server program
    import socket

    HOST = ''                 # Symbolic name meaning all available interfaces
    PORT = 50007              # Arbitrary non-privileged port
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.bind((HOST, PORT))
    s.listen(1)
    conn, addr = s.accept()
    print('Connected by', addr)
    while True:
        data = conn.recv(1024)
        if not data: break
        conn.sendall(data)
    conn.close() 
```

现在，我想知道我使用的端口是否让我们说是 50007，而我在 uni 计算机上的朋友想要使用客户端程序来连接到我。那么他是否也必须打开端口 50007 ？你知道，为了让他和我联系。

这是客户端程序顺便说一句：

```
 import socket

    HOST = 'daring.cwi.nl'    # The remote host
    PORT = 50007              # The same port as used by the server
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.connect((HOST, PORT))
    s.sendall(b'Hello, world')
    data = s.recv(1024)
    s.close()
    print('Received', repr(data) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T04:49:55.950

uni 网络应该允许到端口 50007 的*传出*tcp 连接。您的网络应该允许端口 50007 上的*传入*tcp 连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T03:58:58.367

这将起作用（从 python 套接字的角度来看）。当您的朋友连接到您的套接字（由于 .accept() 调用而“打开”）时，该连接将保持打开状态，直到特别关闭，从而允许您将消息发回。

现在，问题可能出在大学防火墙上，它几乎可以肯定配置为不允许端口 50007 上的出站（从他到您）连接。如果是这种情况，除非您对 uni 防火墙具有管理员访问权限，否则您将不会能够连接。

# php - Facebook API 返回未捕获异常：604：您的语句不可索引

> ID：12241765
> 
> 赞同：2
> 
> 时间：2012-09-03T03:49:36.817
> 
> 标签：php, facebook, codeigniter, facebook-graph-api

我目前正在制作一个应用程序，它将阅读我墙上的一些帖子。问题是我不断收到此错误

```
Fatal error: Uncaught Exception: 604: Your statement is not indexable. The WHERE clause must contain an indexable column. Such columns are marked with * in the tables linked from http://developers.facebook.com/docs/reference/fql thrown in \application\libraries\base_facebook.php on line 1238 
```

我已经拥有这些权限，我什至在我的应用程序设置中添加了一些其他权限。**read_stream offline_access read_insights**

AppId、secret 和 access_token 都设置好了。

更新：现在，当我将查询更改为此时，API 返回一个不同的错误

```
$fql = "SELECT post_id, actor_id, target_id, message FROM stream WHERE source_id = me() AND created_time > 1346277600 LIMIT 50"; 
```

更新：我现在收到此错误

```
Fatal error: Uncaught Exception: 102: Requires user session thrown in \application\libraries\base_facebook.php on line 1238 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T04:28:18.950

看 ：

[http://developers.facebook.com/docs/reference/fql/stream/](http://developers.facebook.com/docs/reference/fql/stream/)

只有少数字段是可索引的，因此应在`where`FQL 的子句中使用其中之一。您的查询似乎对我来说很好。

[https://api.facebook.com/method/fql.query?query=SELECT%20post_id%2C%20actor_id%2C%20target_id%2C%20message%20FROM%20stream%20WHERE%20source_id%20%3D%20me%28% 29%20AND%20created_time%20%3C%201346647136%20LIMIT%2050&access_token=ACCESS_TOKEN_HERE](https://api.facebook.com/method/fql.query?query=SELECT%20post_id%2C%20actor_id%2C%20target_id%2C%20message%20FROM%20stream%20WHERE%20source_id%20%3D%20me%28%29%20AND%20created_time%20%3C%201346647136%20LIMIT%2050&access_token=ACCESS_TOKEN_HERE)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T05:38:03.743

我只是忘了把`access_token`at the facebook->api call

```
$data['posts'] = $this->facebook->api(array(
                   'method' => 'fql.query',
                   'query' => $fql,
                   'access_token'=>$facebook['access_token']
                 )); 
```

# jquery - Jquery Simplyscroll 在容器/剪辑中添加左右图像

> ID：12241766
> 
> 赞同：0
> 
> 时间：2012-09-03T03:49:39.220
> 
> 标签：jquery, css

我正在使用 Jquery Simplyscroll (http://logicbox.net/jquery/simplyscroll/)，我正在寻找一种在左右两侧添加图像（褪色 png）的方法，以避免我的图像被“切断” “一旦滑过。

我的滚动条的代码：

```
 <script type="text/javascript">
    (function($) {
        $(function() {
            $("#scroller").simplyScroll();
        });
    })(jQuery);
    </script>

    <ul id="scroller">
      <li><img src="http://logicbox.net/jquery/simplyscroll/assets/20080608_9N3H5GYL_tb.jpg" width="290" height="200" alt="Firehouse"></li>
        <li><img src="http://logicbox.net/jquery/simplyscroll/assets/20080513_4D3SD1BQ_tb.jpg" width="290" height="200" alt="Chloe nightclub"></li>
        <li><img src="http://logicbox.net/jquery/simplyscroll/assets/20080513_VPJWVQRW_tb.jpg" width="290" height="200" alt="Firehouse bar"></li>
        <li><img src="http://logicbox.net/jquery/simplyscroll/assets/20080514_B1YJ08B6_tb.jpg" width="290" height="200" alt="Firehouse chloe club fishtank"></li>
        <li><img src="http://logicbox.net/jquery/simplyscroll/assets/20080514_JYW68XPT_tb.jpg" width="290" height="200" alt="Firehouse restaurant"></li>
        <li><img src="http://logicbox.net/jquery/simplyscroll/assets/20080608_38CG51J2_tb.jpg" width="290" height="200" alt="Firehouse"></li>
    </ul> 
```

为了让我实现这一目标，最佳实践/方法是什么？

一些建议将不胜感激。

谢谢你，帕特里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T04:15:25.740

我找到了一个临时解决方案：

```
 .mask {
         -webkit-mask: -webkit-linear-gradient(
              left,
             rgba(255,255,255,0),
             rgba(255,255,255,1) 5%,
             rgba(255,255,255,1) 95%,
             rgba(255,255,255,0)
         ); 
```

# vb.net - VB.net For 循环怪异？

> ID：12241767
> 
> 赞同：0
> 
> 时间：2012-09-03T03:49:44.710
> 
> 标签：vb.net, loops, for-loop

所以我决定玩一些 VB.net，而 for 循环似乎非常不准确。那，或者我做错了什么。有人可以在这里帮助我解决我的问题吗？

```
Private Sub forLoop()
    For i = 0 To 10 Step 1
        'Do stuff
    Next i
End Sub 
```

它似乎经历了 3k 到 200 次之间的任何地方，这取决于我所做的事情......它不应该只经历那个循环 10 次吗？我习惯了java，对不起，如果这是一个超级愚蠢的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T04:17:43.750

sendkeys 正在触发 Button.Click 事件，因此您的应用程序处于无限循环中。

# c# - 单击按钮创建日志文件检测

> ID：12241769
> 
> 赞同：1
> 
> 时间：2012-09-03T03:50:13.850
> 
> 标签：c#, asp.net, log4net, trace

有什么方法可以让我跟踪按钮单击哪个网页。

例如 Default1.aspx button1 点击

然后在我的日志文件中。我的日志文件将记录 button1 在 default1 页面中单击。

是否可以在 global.asax 文件的 beginrequest 事件中执行此操作？请指导我一个解决方案。

这是我的 global.asax 代码

```
 protected void Application_Start(object sender, EventArgs e)
    {

        // Set logfile name and application name variables

        string l4net = Server.MapPath("~/log4Net.config");
        log4net.Config.XmlConfigurator.ConfigureAndWatch(new System.IO.FileInfo(l4net));

    }

    protected void Application_BeginRequest(object sender, EventArgs e)
    {
        //What should i code here???

    } 
```

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T04:07:40.300

是的，你当然可以做到。

您可以使用获取当前页面

```
var page = HttpContext.Current.Request.Url; 
```

并且按钮存在于事件目标中

```
var button = HttpContext.Current.Request.Params["__EVENTTARGET"]; 
```

这将为您获取控件的 ClientID，但您应该能够从中提取控件 ID。

# eclipse - 修改受保护目录中的 Eclipse RCP 启动参数

> ID：12241770
> 
> 赞同：4
> 
> 时间：2012-09-03T03:50:21.517
> 
> 标签：eclipse, eclipse-rcp

我正在为我的 RCP 应用程序启用国际化。首选项选项卡允许用户在语言之间进行选择。我了解 Eclipse (3.7) 必须在启动时加载语言并且不能动态更改语言。

我知道实现此目的的三种方法：1）修改操作系统级别的快捷方式以传入 -nl XX 2）将 app.ini 文件更改为具有 -nl XX（在单独的行上） 3）将 config.ini 更改为具有 osgi .nl = XX

这些方法的问题是它们都需要对应用程序目录的写权限。在不提供程序写入权限的 Vista / Windows 7 和 Linux 实现下运行时，普通用户无权修改这些文件。

是否有另一种方法来传递改变 VM 语言的参数？操作系统提供的文件保护是否有解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T20:55:58.830

在 Windows 中，应用程序目录被写保护是有充分理由的。幸运的是，可以设置**Eclipse 运行时选项**来配置 RCP 应用程序应存储的位置

*   **配置数据**
*   **工作区数据**

这可以通过两种方式实现：

*   **设置命令行参数**（-configuration，-data）
*   **定义系统属性**（osgi.configuration.area to , osgi.instance.area to ）例如在*config.ini*

有关详细信息，请参阅[官方 Eclipse 帮助中的运行时选项](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/misc/runtime-options.html)。

在 Windows 中，此类数据应存储在用户目录中。顺便说一句，您应该能够在**标准 About 对话框的****Installation Details**窗格中找到这些设置。

 **但是设置这些属性有点棘手。在我的例子中，**应用程序安装程序**会在安装时评估**用户目录**的位置，并相应地修改*config.ini*文件。**

# algorithm - while 循环的运行时间（数学）

> ID：12241771
> 
> 赞同：1
> 
> 时间：2012-09-03T03:50:24.357
> 
> 标签：algorithm, math, time, complexity-theory, code-analysis

所以我需要以下循环的数学表达式，但我似乎无法掌握它。我假设我只是缺少一些简单的东西。

```
while a <= b
    a = a + a
end 
```

使用分析，这个函数的运行时间是多少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T03:51:24.370

运行时间取决于 的对数`b`。换句话说，时间复杂度是`O(log N)`。

如果从`a`1 和`b`256 开始，您可以看到这一点。每次通过循环时，`a`都加倍，因此只有九次迭代（如果条件为 ，则为八次`< b`）。

该值的每翻一番`b`将导致一次额外的迭代。

当然，这是复杂性分析，*运行时间*取决于许多其他因素，例如（几乎可以肯定不是详尽的列表）：

*   你的机器有多快。
*   它必须同时做哪些其他事情。
*   的初始值`a`：`a == 0`给出无限的运行时间，`a == b + 1`给你恒定的运行时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T04:35:40.493

由于您`a`每次都加倍，因此您需要`log(b/a)`在循环退出之前加倍。所以运行时间是`Theta(log(b/a))`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T03:58:22.163

你同意循环的每次迭代都加倍`a`吗？如果是这样，那么让`a`初始值为 1。经过一次迭代，`a == 2`。经过两次迭代`a == 4`。三点后，`a == 8`。四后，`a == 16`; 等等。

假设`b == 64`. 在这种情况下，循环将运行七次迭代。观察那个`log_2(64) == 6`。

假设`b == 128`. 在这种情况下，循环将运行八次迭代。观察那个`log_2(128) == 7`。

假设`b == 256`. 在这种情况下，循环将运行九次迭代。观察那个`log_2(256) == 8`。

因此，运行时间取决于 的对数`b`。

# ruby - Ruby 1.9.3 Dir.glob 奇怪的递归匹配行为

> ID：12241772
> 
> 赞同：10
> 
> 时间：2012-09-03T03:51:04.820
> 
> 标签：ruby, ruby-1.9, ruby-1.9.3

假设目录结构为：

```
a/b/c/d/e/f/g/h 
```

我试图通过以下方式找到“h”：

```
Dir.glob('a/**/f/g/h') 
```

但是，这是行不通的。有任何想法吗？

你可以试试下面的测试用例：

```
$ /usr/bin/ruby -v
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux]
$ mkdir -p a/b/c/d/e/f/g/h
$ ruby -e "puts Dir.glob('a/**/*')"
a/b
a/b/c
a/b/c/d
a/b/c/d/e
a/b/c/d/e/f
a/b/c/d/e/f/g
a/b/c/d/e/f/g/h
$ ruby -e "puts Dir.glob('a/**/h')"
a/b/c/d/e/f/g/h
$ ruby -e "puts Dir.glob('a/**/g/h')"
a/b/c/d/e/f/g/h
$ ruby -e "puts Dir.glob('a/**/f/g/h')"
**nothing** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T07:34:39.687

这是一个错误，已通过变更集 r36905 解决。耶！

[https://bugs.ruby-lang.org/issues/6977](https://bugs.ruby-lang.org/issues/6977)

# html - 在 HTML 中，普通的 ` ` 链接是否可以产生 POST 请求？

> ID：12241773
> 
> 赞同：0
> 
> 时间：2012-09-03T03:51:12.447
> 
> 标签：html, http

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T04:03:48.570

不

替代方案：您可以使用 javascript 修改锚标记发出的请求，

或者

使用表单，并通过将提交按钮设置为看起来像链接来模拟锚点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T04:01:07.033

在 html 文件中，锚文件不支持 POST 值。

您只能通过 form 标签获取 html 文件的 post 值。

`<form action="test.php" method="post" > <input type="text" name="lname" /><br /> <input type="submit" value="Submit" /> </form>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T01:32:08.333

正如 Matt Ball 评论的那样，您可以使用表单而不是 JS 来完成此操作：

```
<form method="post" action="YOUR_ACTION">
    <input type="hidden" name="foo" value="bar" />
    <input type="submit" value="link" class="submitLink" />
</form> 
```

然后将提交设置为看起来像常规链接：

```
<style type="text/css">
input.submitLink {
    background: none;
    border: medium none;
    color: blue;
    cursor: pointer;
    margin: 0;
    padding: 0;
    text-decoration: underline;
}
</style> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T04:09:55.633

您可以使用要提交的值创建隐藏表单；并且您链接可以触发该`submit()`表单上的操作。这很容易用 jquery（或你最喜欢的 javascript 库）完成。

这是未经测试的，但应该这样做：

```
<form method="POST" id="the_form" action="foo/">
  <input type="hidden" name="bar" value="baz" />
</form>

<a href="#" id="submit_link">Send values</a>

<script type="text/javascript">
  $('#submit_link').click($('#the_form').submit());
</script> 
```

# c++ - std::map 按值或指针操作？

> ID：12241776
> 
> 赞同：-4
> 
> 时间：2012-09-03T03:51:31.593
> 
> 标签：c++, map

我有一个A类：

```
struct A
{
    std::map<int,int> aa;
} 
```

和 B 类：

```
struct B
{
    std::map<int,B> bb;
} 
```

如果这些代码处于无限循环中：

```
B b;
int inx=0;
while(true)
{
    A a;
    a.aa[0] = 0;
    b.bb[inx] = a;
    ++inx;
} 
```

**这会导致内存泄漏吗？**我想要复制的
所有值到. 我只想知道这是 std::map 指针的实现吗？`a``b[inx]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T05:04:54.967

> 这会导致内存泄漏吗？

您的程序中没有内存泄漏，但存在编译错误，因为没有为结构 B 定义 operator[]。

假设您在此处添加到地图：

```
while(true)
{
    A a;
    a[0] = 0;
    b[inx] = a;
    ++inx;
} 
```

没有内存泄漏。内存会增加，直到您使用所有 int 数字，但这是正常的，因为它们必须存储在内存中的某个位置。

# javascript - Backbone.js 中的命名空间

> ID：12241778
> 
> 赞同：3
> 
> 时间：2012-09-03T03:51:45.880
> 
> 标签：javascript, jquery, backbone.js, namespaces, underscore.js

我很困惑如何在 Backbone.js 中实现命名空间。我一直在全球范围内创建我的模型、集合和视图。命名空间是否只是`App.`在模型、集合和视图类和对象的前面加上一行`window.App = {};`？

它似乎有效，但这种方式被认为是最佳实践吗？如果没有，有什么更好的方法？

我也在`App = App || {};`某个地方看到过。拥有的目的是`|| {}`什么？

**尝试命名空间** // 命名空间 window.App = {};

```
// Models
App.Product = Backbone.Model.extend();

// Collections
App.ProductCollection = Backbone.Collection.extend({
    model: App.Product,
    url: '/wizard'
});

// Views
App.ProductListView = Backbone.View.extend({
    el: '#photo_list',

    initialize: function() {
        this.collection.bind('reset', this.render, this);
    },

    render: function() {
        this.collection.each(function(product, index){
            $(this.el).append(new App.ProductView({ model: product }).render().el);
        }, this);
        return this;
    }
});

// Snippet

App.productList = new App.ProductCollection();
App.selectedProductList = new App.SelectedProductCollection();
App.productListView = new App.ProductListView({ collection: App.productList }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T06:45:42.530

您最好使用将创建或更新命名空间对象的命名空间函数，例如`ns('App.Views.Homepage', Backbone.View.extend({...})`.

回覆。命名空间约定 - 为了您自己的方便，您可以使用您的文件系统结构。例如，`UI/Homepage/View/Main.js`将成为`App.UI.Homepage.View.Main`（这是如果您使用模块）。

或者另一种简单的制作方法是简单且易于找到相关文件 - 根据功能创建结构，例如`App.Backbone.Collection.Comments`，您从更一般到更具体的位置，例如您有一个应用程序，一个主干，您有视图、模型、集合, 路由器。在每个内部，您将拥有多个特定于您的用例的模块。

例如，这是我使用的命名空间函数：

```
var ns = window.ns = function (nspace, payload, context) {
  payload = payload || {};

  context = context || window;

  var parts = nspace.split('.'),
    parent = context,
    currentPart = '';

  while (currentPart = parts.shift()) {
    if (parts.length !== 0) {
      parent[currentPart] = parent[currentPart] || {};
    }
    else {
      parent[currentPart] = parent[currentPart] || payload;
    }
    parent = parent[currentPart];
  }

  return parent; 
```

用途就是我上面提到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T08:17:59.167

1.  Using of namespacing in JS is considered to be best practice, keep doing this.
2.  As it's been said, using of helper function instead of 'manual' namespacing, if better. The namespace function I use, if [here](https://gist.github.com/3607835).
3.  `App = App || {};` - does the following. If App is undefined (not initialized, used first time) || operator returns `false` so, second statement applied and App variable is initialized with empty object.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T05:54:44.807

JavaScript 不支持命名空间。您的方法相当于将主干对象嵌套在全局 App 对象中。这与 JavaScript 中的命名空间差不多。请参阅 ahren 关于初始化语法的评论。

# wcf - 我们如何从 iPhone 使用 WCF 服务？

> ID：12241779
> 
> 赞同：0
> 
> 时间：2012-09-03T03:52:14.787
> 
> 标签：wcf, ios4

我正在实现一个显示来自后端服务器的数据的应用程序。后端服务器使用 WCF 编写 Web 服务。我不熟悉那个 WCF。

我可以尝试什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T04:24:50.830

如果您的 WCF 应用程序配置为 SOAP 服务，则可以使用任何适用于 iOS 的 SOAP 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T04:29:34.113

您可以向 WCF 发出 HTTP 或 SOAP 请求。例如，给定一个 HTTP 请求，您可以使用 cUrl 对其进行测试。最简单的 cUrl 获取请求如下所示：

```
curl http://stackoverflow.com 
```

您很可能需要发出 POST 或 PUT 请求。如果是这样，您可以在此处查看文档：http: [//curl.haxx.se/docs/httpscripting.html](http://curl.haxx.se/docs/httpscripting.html)。我已经包含了一个使用 cUrl 的示例 POST 请求：

```
curl -X POST -H 'Content-type: text/xml' -d <YOUR PAYLOAD HERE> http://stackoverflow/fakepost 
```

有很多方法可以发出 HTTP 请求，cUrl 只是一个客户端。

下面描述一个 POST 请求的 iOS 实现：[iOS：如何执行 HTTP POST 请求？](https://stackoverflow.com/questions/5537297/ios-how-to-perform-a-http-post-request).

# java - wsimport 生成的客户端如何工作？

> ID：12241781
> 
> 赞同：31
> 
> 时间：2012-09-03T03:52:54.003
> 
> 标签：java, web-services, jax-ws, axis2, wsimport

首先，我想让您知道我已经可以连接到 Web 服务服务器。我问这个问题是因为我想更深入地了解 wsimport 生成的客户端是如何工作的。根据我的研究，wsimport 使用 JAXWS。请注意，我不了解 JAXWS。

我使用 wsimport 生成了我的客户端。我使用的 WSDL 来自 Axis2 Web 服务，由 Axis2 自动生成。下面的类是 wsimport 的结果：

在下面`com.datamodel.xsd`

*   `DataBeanRequest.java`
*   `DataBeanResponse.java`
*   `ObjectFactory.java`
*   `package-info.java`

在下面`com.service`

*   `MyWebService.java`
*   `MyWebServicePortType.java`
*   `MyMethod.java`
*   `MyMethodResponse.java`
*   `ObjectFactory.java`
*   `package-info.java`

通过上面的类，我可以看出其中`com.datamodel.xsd`包含 Web 服务服务器使用的 bean（不包括`ObjectFactory`and `package-info`）。同时，`MyMethod`也是`MyMethodResponse`用于设置 Web 服务方法/操作的请求和响应参数的 bean。

以下是我的问题：（如果您不知道我的某些问题的答案，您实际上不必回答所有问题。:) 请随时分享您认为我可能会觉得有用的任何信息。）

我是否正确

*   我的上述假设是否正确？
*   其他类的作用是什么？
*   我检查`MyWebService`了它，它包含一个注释，它引用了我用来生成客户端的 WSDL 的绝对位置。在客户端中指定的相关性是什么`wsdllocation`？客户如何使用该信息？
*   我注意到 Web 服务的实际 URL 没有在任何生成的类中声明。客户端如何知道它需要连接到哪里？
*   是否对 WSDL 文件进行了注释，以便客户端可以在连接时读取 WSDL 文件上的 URL？如果是这样，是否意味着必须建立新连接时始终读取 WSDL 文件？
*   ~~由于我需要编译我的应用程序并将其安装在不同的服务器上，因此将变得无效。我可以将其设置为相对路径而不是绝对路径吗？如何？（回答：是的，可以设置为相对路径。`wsimport`命令有一个`wsdllocation`属性，`wsdllocation`可以指定的值。）~~
*   如果我需要连接到 HTTPS 怎么办。如何设置服务器证书？
*   当我使用 wsimport 生成客户端和使用 Axis2 或 Apache CXF 生成客户端时有什么区别吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-03T13:04:19.257

在我回答问题之前，先澄清一下：JAX-WS 是用 Java 实现 Web 服务的规范。它描述了如何将 WSDL 工件映射到 Java 类以及如何使用注释来应用这种映射。您可以[在此处下载规范](http://download.oracle.com/otndocs/jcp/jaxws-2_0-fr-eval-oth-JSpec/)。工具 wsimport 是本规范参考实现的一部分，参考实现是 Java 类库的一部分。有几种替代实现，例如 Axis2、CXF 或 Metro，它们通过支持其他标准（例如 WS-ReliableMessaging 或 WS-Security）来增强基本 JAX-WS 支持。

现在回答你的问题：

> 我的上述假设是否正确？

是的，你是。

> 其他类的作用是什么？

用于将`package-info`Web 服务中使用的 XML 命名空间映射到实现类所在的包。命名空间通常看起来与 Java 包名称不同（通常是 URL），这使得映射成为必要。

`ObjectFactory`允许您创建服务发送和接收的任何消息。如果你想在你的存根类前面挂上代码，提供修改过的消息或类似的东西，你需要这个。

我看不到您的类的内容，但如果我理解正确的话，它`MyWebServicePortType`是一个类似于`portType`您的 WSDL 中的接口。也就是说，它将 WSDL 中的操作及其签名映射到 Java 方法。如果您想提供服务（您不提供服务，您正在询问客户端），则需要实现此接口。当您实现客户端时，您只需使用它。

`MyWebService`最后，如果您想调用 Web 服务，该类包含您需要的客户端存根。

> 我检查了 MyWebService，它包含一个注释，它引用了我用来生成客户端的 WSDL 的绝对位置。在客户端指定 wsdllocation 有什么相关性？客户如何使用该信息？

您生成的接口包含`portType`服务的签名，但它没有说明您如何与服务对话。这是 WSDL 中绑定的一部分。最基本的设置是使用 SOAP over HTTP 的消息的文档/文字样式。其他配置（例如 JMS 上的 SOAP）也是可能的，您的客户端需要知道要使用什么协议。因此它需要绑定 WSDL。此外，正如您稍后所述，您的 Java 文件中没有端点地址。该地址也是从 WSDL 中读取的。

> 我注意到 Web 服务的实际 URL 没有在任何生成的类中声明。客户端如何知道它需要连接到哪里？

`address`它从WSDL 中`port`读取。`service`它位于 WSDL 的末尾。

> 是否对 WSDL 文件进行了注释，以便客户端可以在连接时读取 WSDL 文件上的 URL？

不，这`port`是具体 Web 服务端点的典型元素。这里没有什么特别需要的。

> 如果是这样，是否意味着必须建立新连接时始终读取 WSDL 文件？

好吧，客户端可能有缓存（我不知道这个参考实现的细节）。从概念的角度来看：是的。

> 如果我需要连接到 HTTPS 怎么办。如何设置服务器证书

这可能很棘手，我不能给你一个开箱即用的答案。我建议通读有关该主题的问题，[例如这个](https://stackoverflow.com/q/11001102/1127892)。

> 使用 wsimport 生成客户端和使用 Axis2 或 Apache CXF 生成客户端时有什么区别吗

就在这里。wsimport 更好，不要使用 wsdl2java。[这是一个描述，为什么](https://stackoverflow.com/a/3590252/1127892)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T11:21:09.203

**您问：我注意到 Web 服务的实际 URL 未在任何生成的类中声明。客户端如何知道它需要连接到哪里？**

如果 WSDL 是使用浏览器下载并作为输入传递给***wsimport***的，那么本地 wsdl 文件位置将嵌入到生成的代码中。这就是您在生成的代码中看不到实际服务位置的原因。这也意味着如果您删除了 wsdl 文件的本地副本，则生成的代码将不起作用（当使用 main 方法进行 inovked 时）。

如果 wsdl 的 URL 作为输入传递给***wsimport***，那么该 URL 将嵌入到生成的代码中，该代码进一步用于获取实际的服务位置。这个想法是 WSDL 位置是固定的。它们应该位于 UDDI 中或作为本地文件。这允许实际服务移动，如果它们移动，您只需单独修改 wsdl 文件的本地副本或更新 UDDI 中的 wsdl。[大多数情况下这不会发生，因为服务位置从不是 IP 而是 DNS 名称]

这就是为什么在运行 Web 服务的同一台服务器上发布 wsdl 绝不是一个好主意

# c# - 为什么要对 Task<> 使用 async 和 await？

> ID：12241786
> 
> 赞同：14
> 
> 时间：2012-09-03T03:53:10.260
> 
> 标签：c#, async-await

如果我有一个想要异步的普通方法：

```
public int Foo(){} 
```

我会做：

```
public Task<int> FooAsync(){
    return Task.Run(() => Foo());
} 
```

我为什么要这样做：

```
public async Task<int> FooAsync(){
    return await Task.Run(() => Foo());
} 
```

我计划使用它的方式是：

```
FooAsync().ContinueWith((res) => {}); 
```

我希望该方法在不停止的情况下运行，但我希望触发回调之类的东西，因此`ContinueWith`. 但是对于第二个版本，使用它有什么意义吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-03T04:55:49.710

在我的理解中，您只需要`async`并且`await`当您编写一个在内部执行一些异步调用的方法时，但您希望它*看起来不像*。换句话说，你想像普通的顺序代码一样编写和读取代码，像普通的顺序代码一样处理异常，像普通的顺序代码一样返回值等等。然后编译器的职责是使用所有必要的回调来重写该代码，以保留逻辑。

你的方法很简单，我认为它根本不需要重写，你可以返回任务，但是任何使用它的人都可能想要`await`它的返回值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T18:25:01.790

> 我为什么要这样做：
> 
> ```
>  public async Task<int> FooAsync()
>  {
>   return await Task.Run(() => Foo());
>  } 
> ```

你不会的。您以前的版本返回已经等待的任务。这个新版本没有添加任何东西。

> 我计划使用它的方式是：
> 
> ```
>  FooAsync().ContinueWith((res) => {}); 
> ```
> 
> 我希望该方法在不停止的情况下运行，但我希望触发回调之类的东西，因此需要 ContinueWith。

这就是区别所在。让我们稍微充实一下您的示例：

```
void DoAsyncStuff()
{
    FooAsync().ContinueWith((res) => { DoSomethingWithInt(res.Result) });
} 
```

使用`async`，您可以编写相同的代码，如下所示：

```
void async DoAsyncStuff()
{
    int res = await FooAsync();
    DoSomethingWithInt(res);
} 
```

结果是一样的。该`await`关键字将您的方法的其余部分变成一个延续，在 FooAsync 产生一个值后恢复。它就像您的其他代码一样，但更易于阅读。*耸耸肩*

# javascript - 当在 jquery 中完成 ajax 调用时，如何运行一些代码？

> ID：12241796
> 
> 赞同：0
> 
> 时间：2012-09-03T03:54:09.590
> 
> 标签：javascript, ajax, jquery, jquery-effects

我有一个包含一些内容的 div。我希望这个 div 能够向上滑动并下载一些新内容。通过 ajax 加载内容后，我希望 div 再次向下滑动并显示新内容。我知道如何分别处理每件作品，但我不知道如何一次完成所有作品。这就是我所拥有的：

```
$(element).slideUp('fast'); // slide up
$(element).slideDown('fast'); // slide down 
$(element).ajax(url); // download the text 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T03:58:50.753

```
$.ajax(url).done(function (response) {
  // your code
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T04:00:58.353

您还需要为您的 ajax 使用 slideUp 的回调和成功处理程序。您的代码将如下所示：

```
$(element).slideUp('fast', function() {
    $.get(url, data, function (result) {
        $(element).html(result);
        $(element).slideDown('fast');
    });
}); 
```

# datatable - YUI DataTable 改变 DraggableColumn 和 Resizable

> ID：12241800
> 
> 赞同：0
> 
> 时间：2012-09-03T03:54:37.220
> 
> 标签：datatable, yui

在构建 YUI2 数据表之后，是否可以动态更改配置设置？

如果在初始化数据表时 draggableColumns 未设置为 true，我以后如何更改该行为？同样，当列没有被识别为可调整大小时，以后有没有办法改变它？

我预计数据表方法会允许这种情况发生（设置开/关），但我似乎无法在 API 中找到类似的东西（http://developer.yahoo.com/yui/docs/module_datatable.html） .

因此，我尝试浏览数据表对象并更改每列的“可拖动”标志。那没有用，而且似乎也不是正确的方法。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T05:19:29.223

每个元素的配置对象都可以通过它的`cfg`属性来访问。

因此，为了`draggableColumns`动态设置配置属性，您需要使用：

```
myDatatable.cfg.setProperty("draggableColumns", "true", true) 
```

请注意，第二个布尔参数应该是一个字符串。请参阅此[链接](http://developer.yahoo.com/yui/docs/YAHOO.util.Config.html#method_setProperty)以供参考。

# objective-c - 未找到 FBRequestConnection 类方法

> ID：12241806
> 
> 赞同：0
> 
> 时间：2012-09-03T03:56:10.337
> 
> 标签：objective-c, facebook, facebook-fql, facebook-ios-sdk

我正在尝试按照[Facebook 开发人员网站](http://developers.facebook.com/docs/howtos/run-fql-queries-ios-sdk/)上针对 iOS 版 FacebookSDK 的教程的指示运行 Facebook 多查询，以下是我在 iOS 应用程序中的代码：

```
-(BOOL) FBGetFriendList
{
    if (FBSession.activeSession.isOpen)
    {
        // Multi-query to fetch the active user's friends
        // Initial query is stored in reference named "friends"
        // Second query picks up the "uid2" info from the first query
        // and gets the friend details.
        NSString *query = 
        @"{"
        @"'friends':'SELECT uid2 FROM friend WHERE uid1 = me()',"
        @"'friendinfo':'SELECT uid, name, pic_square FROM user WHERE is_app_user = 1 AND uid IN (SELECT uid2 FROM #friends)',"
        @"}";

        // Setup the query parameter
        NSDictionary *queryParam = [NSDictionary dictionaryWithObjectsAndKeys:query, @"q", nil];

        // Make the API request that uses FQL
        [FBRequestConnection startWithGraphPath:@"/fql"
                                 parameters:queryParam
                                 HTTPMethod:@"GET"
                          completionHandler:^(FBRequestConnection *_connection, id _result, NSError *_error) {
            // check for errors here
            if (_error)
            {
                NSLog(@"FacebookSDKPlugin > FBGetFriendList() > request error!");
            }
            else
            {
                @synchronized(friendList)
                {
                    if (friendList == nil)
                    {
                        friendList = [[NSMutableArray alloc] init];
                    }
                    else
                    {
                        [friendList removeAllObjects];
                    }
                    NSArray *facebookData = [(NSDictionary *)_result objectForKey:@"data"];
                    int count = facebookData.count;
                    for (int i = 0; i < count; ++i)
                    {
                        NSDictionary<FBGraphUser> *tempObject = [facebookData objectAtIndex:i];
                        FacebookFriend *tempFriend = [[FacebookFriend alloc] initWithID:[tempObject.id copy] name:[tempObject.name copy]];
                        [friendList addObject:tempFriend];
                    }
                }
             }
        }];
        return YES;
    }
    return NO;
} 
```

但是，在编译过程中会出现警告：

```
Class method '+startWithGraphPath:parameters:HTTPMethod:completionHandler:' not found (return type defaults to 'id') 
```

我忽略了这个错误并在我的 iPad2 上编译，它因这个错误而崩溃：

```
2012-09-03 11:53:13.377 +[FBRequestConnection startWithGraphPath:parameters:HTTPMethod:completionHandler:]: unrecognized selector sent to class 0xa05350
2012-09-03 11:53:13.379 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '+[FBRequestConnection startWithGraphPath:parameters:HTTPMethod:completionHandler:]: unrecognized selector sent to class 0xa05350' 
```

我已经包含了“FBRequest.h”和“Facebook.h”，我可以在“FBRequest.h”中看到方法。但是我不明白为什么编译器找不到该函数。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T03:07:02.570

哎呀，我意识到我一直在使用旧版本的 FacebookSDK，这解释了为什么代码不能按照官方教程中的说明工作。更新到最新版本的 SDK（版本 3.0.8）修复了这个问题！

# json - 通过 json 发送 expressjs cookie

> ID：12241807
> 
> 赞同：1
> 
> 时间：2012-09-03T03:56:18.807
> 
> 标签：json, node.js, cookies, express

我在express api参考中看到了数据

[cookie 的 expressjs api 参考](http://expressjs.com/api.html#res.cookie)

在文档中，cookie 可以作为 JSON 发送`res.cookie('cart', { items: [1,2,3] });`

所以我开始尝试，当我使用字符串时，cookie 效果很好，但不是 JSON 格式。

```
 res.cookie('cookietmp',{test: ['test1', 'test2']}, { maxAge: 900000, httpOnly: true});
   res.send('test cookie: ' + req.cookies.cookietmp) 
```

这是我的代码

和我的浏览器显示

```
 test cookie: [object Object] 
```

好像我的浏览器不知道格式是 JSON 什么的，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T04:11:55.227

那是一个对象文字，**而不是 JSON。**JSON 是一种序列化格式，但您尝试设置为 cookie 值的不是字符串。您`'[object Object]'`在浏览器中看到，因为这就是[`Object.toString`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/toString)返回的内容。

*作为程序员，您*需要使用以下方法将该对象转换为 JSON [`JSON.stringify`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)：

```
var cookieValue = JSON.stringify({test: ['test1', 'test2']}, { maxAge: 900000, httpOnly: true});
res.cookie('cookietmp', cookieValue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-01T13:02:43.557

您的 cookie 设置正确。问题是您在`response`对象上设置了一个 cookie，然后检查过时的`request`对象以获取 cookie 的值。更新`response`不会更新传入的`request`：

```
console.log(req.cookies.cookieTmp)  // '[object Object]'

res.cookie('cookietmp',{test: ['test1', 'test2']}, { maxAge: 900000, httpOnly: true});
res.send('test cookie: ' + req.cookies.cookietmp)

console.log(req.cookies.cookieTmp)  // '[object Object]'
console.log(res.get('Cookie'))  // 'cookieTmp={test: ['test1', 'test2']}` (or urlencoded version of this). 
```

# android - 我没有文件夹“资产” - Eclipse

> ID：12241810
> 
> 赞同：0
> 
> 时间：2012-09-03T03:56:39.357
> 
> 标签：android, eclipse, assets

一个简单的问题..在我的项目中我没有资产文件夹..我不知道我是否删除了它..

我应该只创建文件夹吗？我还需要做其他事情吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T03:59:51.770

是的，只需创建文件夹。您的项目将被适当地构建。

# android - 使用 AlarmManager 在不同的时间设置闹钟

> ID：12241811
> 
> 赞同：0
> 
> 时间：2012-09-03T03:56:41.557
> 
> 标签：android, alarmmanager

我目前正在开发一个应用程序，它会在某些时间发出警报。现在我设法在 10 秒后将其关闭，但是我不知道如何以与内置警报系统相同的格式设置警报，它们在活动前 10 分钟或活动前 1 天设置，等等

# javascript - 为什么在使用 indexedDB 时会看到“类型错误：游标未定义”？

> ID：12241815
> 
> 赞同：1
> 
> 时间：2012-09-03T03:57:09.480
> 
> 标签：javascript, html, indexeddb

我正在尝试使用 index.openCursor(keyRange.only 或 keyRange.bound 此处提供) 使用使用**autoIncrement: true**创建的表上的索引访问一个或多个记录。我尝试了多种变体，但没有成功。有人可以使用以下代码作为模板向我展示一个工作示例：

```
window.indexedDB = window.indexedDB || window.webkitIndexedDB 
                || window.mozIndexedDB || window.msIndexedDB;
var ixDb; 

var ixDbIndexTest = function () {
  //Open or create the requested IndexedDB Database
  var ixDbRequest = window.indexedDB.open("testDBindexes", 2);

  ixDbRequest.onupgradeneeded = function (e) {
    ixDb = ixDbRequest.result || e.currentTarget.result;

    objectStore = 
      ixDb.createObjectStore("demoOS", 
                             { keyPath: "id", autoIncrement: true });
    objectStore.createIndex("ixdemo", "Field1",
                             { unique: false, multiEntry: false });

    //define new dummy record  
    var newRecord = {};
    newRecord.Field1 = "222";
    newRecord.Field2 = "333";
    newRecord.Field3 = "444";

    var request = objectStore.add(newRecord);

    request.onsuccess = function (e) {
      var index = objectStore.index('ixdemo');
      var range = IDBKeyRange.only("222");
      var cursorRequest = index.openCursor(range);

      cursorRequest.onsuccess = function(e) {    
        var cursor = cursorRequest.result || e.result; 
        alert(cursor.value);
        cursor.continue();
      }
    }
  };
};

window.onload = ixDbIndexTest; 
```

**更新：** 我修改了演示脚本以在 Firefox 和仍然使用 setVersion 的旧 Chrome 版本中工作。但是，您需要为 Chrome 添加额外的版本检查逻辑，因为每次脚本运行时当前逻辑都会运行 setVersion。

```
window.indexedDB = window.indexedDB || window.webkitIndexedDB 
                || window.mozIndexedDB || window.msIndexedDB;
window.IDBTransaction = window.IDBTransaction || window.webkitIDBTransaction 
                    || window.mozIDBTransaction || window.msIDBTransaction;
window.IDBKeyRange = window.IDBKeyRange || window.webkitIDBKeyRange || 
                     window.mozIDBKeyRange || window.msIDBKeyRange;

var ixDb;     
var ixDbIndexTest = function () {
  //Open or create the requested IndexedDB Database
  var ixDbRequest = window.indexedDB.open("testDBindexes", 1);

  ixDbRequest.onsuccess = function(e) {
    ixDb = ixDbRequest.result || e.currentTarget.result;

    if (typeof ixDb.setVersion === "function") {
      ixDbVersionRequest = ixDb.setVersion(1);

      ixDbVersionRequest.onsuccess = function (e) {
        indexTest();
      };
     }
     else {
       ixDbRequest.onupgradeneeded = function (e) {
       indexTest(); 
       };
     }
   }
 };

window.onload = ixDbIndexTest;

function indexTest() {
  var objectStore = ixDb.createObjectStore("demoOS", 
                           { keyPath: "id", autoIncrement: true });
  objectStore.createIndex("ixdemo", "Field1", 
                           { unique: false, multiEntry: false });

  //define new record with users input 
  var newRecord = {};
  newRecord.Field1 = "222";
  newRecord.Field2 = "333";
  newRecord.Field3 = "444";

  var request = objectStore.add(newRecord);

  request.onsuccess = function (e) {
    var index = objectStore.index('ixdemo');
    var range = IDBKeyRange.only("222");
    var cursorRequest = index.openCursor();

    cursorRequest.onsuccess = function(e) {    
      var cursor = cursorRequest.result || e.result; 
      if(cursor) {
        alert(JSON.stringify(cursor.value));
        cursor.continue();
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T19:33:17.397

出现错误消息`Type Error: cursor is undefined`是因为您使用游标而不检查它是否已定义。因此，当`cursor.continue()`告诉 IndexedDB 去获取数据库中的下一个对象时，游标在耗尽唯一实际存在的对象后将是未定义的。

所以你应该做这样的[事情](https://developer.mozilla.org/en-US/docs/IndexedDB/Using_IndexedDB#Using_a_cursor)。在您的代码中，它看起来像：

```
 cursorRequest.onsuccess = function(e) {    
        var cursor = cursorRequest.result || e.result;
        if (cursor) {
          alert(cursor.value);
          cursor.continue();
        }
      } 
```

此外，如果您知道您只在寻找一个对象（例如当您使用 时`IDBKeyRange.only`），您可以省略该`cursor.continue()`部分：

```
 cursorRequest.onsuccess = function(e) {    
        var cursor = cursorRequest.result || e.result;
        alert(cursor.value);
      } 
```

至于您的 Chrome 问题，我无法帮助您，因为到目前为止我只关注 Firefox。我建议您尝试最新的 Chrome 开发版本，它实际上支持`onupgradeneeded`各种其他更新，但在我的测试中，到目前为止它仍然存在相当多的错误，并且在 Firefox 中运行的代码在 Chrome 中可能会失败。如果这不是一个紧急项目，您最好等待一段时间让 Chrome 稳定下来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T15:05:21.680

在 onupgardeneded 事件中不能添加记录。

更改版本后，您必须重新打开数据库以获取新的 objectStore 架构。所以会有两个开

当前的 chrome 是，我认为仍然是旧标准，setVersion，onupgardeneeed 永远不会调用。

newRecord 必须具有 keyPath 'id'，否则您不应在创建对象存储时指定 keyPath。

# makefile - 在 Makefile 函数中定义规则

> ID：12241816
> 
> 赞同：1
> 
> 时间：2012-09-03T03:57:24.723
> 
> 标签：makefile

我想定义一些类似的规则，所以我决定尝试在函数内部定义它们：

```
COMPILED_JS_FILES=$(COMPILED_JS_FILES) $(foreach m,$(notdir $(wildcard src/$(1)/*.$(2))),$(TARGET_DIR)/$(1)/$(m))

$(TARGET_DIR)/$(1)/%.$(2) : src/$(1)/%.$(2)
    $(CAT) $< > $@

endef

$(eval $(call COMPILE_JS,modules,js))
$(eval $(call COMPILE_JS,modules,jsm))
$(eval $(call COMPILE_JS,models,js))
$(eval $(call COMPILE_JS,firefox,js))
$(eval $(call COMPILE_JS,helpers,js)) 
```

但是，规则中的 $< 和 $@ 变量评估为空字符串，可能是因为它们是由运行它们的函数定义的，而不是在评估规则之前保存。

我很好奇这个问题的答案，同时也进入了这个问题的其他合理解决方案（除了重组目录结构）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T04:12:10.683

我实际上想出了答案（在这种情况下，我一般不知道） -`$$<`和`$$@`. 此外，$$(CAT) 将延迟 $(CAT) 的扩展，直到对规则进行评估。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T04:06:12.080

这是 makefile 的一个老问题。在 Make 中确实没有一个好的、通用的方法来解决它，因为你是对的：当你需要它们时，`$<`和`$@`只是不可用。

当我遇到这样的问题时，我倾向于在 Make 之外编写一个支持脚本。但是，GNU Make 确实提供了 .SECONDEPANSION 目标，这是一种晦涩难懂的 hack，旨在使您的某些任务能够完成。您可能会对其进行调查，尽管我自己的经验是 .SECONDEPANSION 并不总是一个干净的解决方案。

# actionscript-3 - 仅当前帧中的对象

> ID：12241819
> 
> 赞同：0
> 
> 时间：2012-09-03T03:57:51.960
> 
> 标签：actionscript-3, flash, frame

我有一个 Player 影片剪辑对象被放置在示例播放器所在的帧上，然后使示例播放器不可见。但是当它运行时，播放器被放置在示例在第一帧中的位置，而不是在每个当前帧中。

父类：

```
playerStartX = exPlayer.x;
playerStartY = exPlayer.y; 
```

有没有办法只查看当前帧中的示例，或者在当前帧中的示例已经被“复制”后仅删除它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:10:34.667

不确定，如果我完全理解你的问题，但也许你应该为事件使用事件处理程序`Event.ENTER_FRAME`。此事件与 SWF 的帧速率同步调度。您的处理程序可能如下所示：

```
function enterFrameHandler(event:Event):void
{
    playerStartX = exPlayer.x;
    playerStartY = exPlayer.y;
} 
```

因为我对您如何在舞台上构建/组织您的 MovieClips 不够了解，所以我不能说在哪里添加处理程序。但是在某个地方你必须做：

```
addEventListener(Event.ENTER_FRAME, enterFrameHandler); 
```

# xml - Xquery 根据元素类型将文本附加到标记值

> ID：12241824
> 
> 赞同：0
> 
> 时间：2012-09-03T03:58:22.150
> 
> 标签：xml, xquery

我需要获取一些元素的值，然后需要根据元素添加一些文本，例如：

```
<elementType>a</elementType> 
<otherElementType>b</otherElementType> 
<elementType>c</elementType> 
<elementType>d</elementType>

$doc//*[self::elementType or self::otherElementType]/string()

"a"
"b"
"c"
"d" 
```

这会返回值，但我不知道如何获取这样的值：

```
"a is an elementType"
"b is an otherElementType"
"c is an elementType"
"d is an elementType" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T04:05:18.103

**使用**：

```
//*[self::elementType or self::otherElementType]
              /concat(., ' is a ', name(), '&#xA;') 
```

**当针对以下 XML 文档评估此表达式时**（提供的格式错误的片段 -- 已更正）：

```
<t>
    <elementType>a</elementType>
    <otherElementType>b</otherElementType>
    <elementType>c</elementType>
    <elementType>d</elementType>
</t> 
```

**产生了想要的正确结果**：

```
a is a elementType
 b is a otherElementType
 c is a elementType
 d is a elementType 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T07:57:56.910

您可能希望查看 XSLT 及其基于规则的处理，这似乎与您考虑需求的方式相匹配：

利用

```
<xsl:apply-templates select="*"/> 
```

处理所有元素，然后单独的模板规则来说明如何处理每种元素：

```
<xsl:template match="elementType">
  do one thing
</xsl:template>

<xsl:template match="otherElementType">
  do a different thing
</xsl:template> 
```

# google-app-engine - GAE 上的 Django 0.96 到 Django 1.2

> ID：12241826
> 
> 赞同：-2
> 
> 时间：2012-09-03T03:58:56.497
> 
> 标签：google-app-engine, django-forms, python-2.7

在 configuration.py 中：

```
FOOTER_HTML = ( 'Powered by <a href="http://code.google.com/appengine">GAE </a> ' ) 
```

在 base.html 中：

```
<div id="footer">
   {% block footer %}
   {{ configuration.FOOTER_HTML }}
   {% endblock %}
</div> 
```

这在 Django 0.96 / Python 2.5.2 中按预期呈现，但在 Django 1.2 / Python 2.7.2 中未按预期呈现

如何解决这个问题呢 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:46:38.217

阅读 django 模板文档。

[https://docs.djangoproject.com/en/dev/topics/templates/](https://docs.djangoproject.com/en/dev/topics/templates/)

要快速解决此问题，请使用

```
{{ configuration.FOOTER_HTML|safe }} 
```

但是，还有其他方法可以做到这一点，如模板文档中所述。

以供将来参考，如果您可能应该解释什么不起作用。与其简单地说某事“未按预期呈现”，不如展示您的期望和得到的结果。您还应该解释您尝试过的哪些修复无效。

否则，您会期望人们读懂您的想法。

# java - 显示音频信号

> ID：12241829
> 
> 赞同：1
> 
> 时间：2012-09-03T03:59:41.830
> 
> 标签：java, swing, audio, awt, javasound

我们正在尝试使用各种放大器显示已经从电吉他录制的输入音频信号。我们正在寻找一种用 Java 显示的算法。

我们目前正在研究 AWT 和 Swing 库，并且想知道：哪个更适合图形或视觉显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T04:03:49.310

你会被允许使用 JavaFx 吗？我问的原因是 JavaFx 2.0 有一些专门为这类多媒体任务设计的优秀 api。这对于 swing 或 awt 是可行的，但为什么不善待自己呢？我没有时间或空间在这里深入探讨它，但我推荐 Apress 的“Javafx 2.0 简介”或“Pro JavaFx 2.0”。我会说第二个更好，更全面。我相信两者都有示例代码，几乎可以完成您刚才描述的操作。

祝你好运！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T04:12:55.440

为此，请使用 Swing 而不是 AWT。两者都可以，但 Swing 更现代，支持 AWT API 中缺少的组件（`JTree`、`JTable`..）和功能（内置双缓冲、键绑定、PLAF、支持富文本）。

使用 Swing 的另一个优点是，您似乎正处于需要进一步提问的阶段。大多数使用 Java SE 编写 GUI 的人从未使用过 AWT 组件，而我们其他人大多都忘记了如何使用！（在这一点上，可以帮助 Swing 的人比 JavaFX 多得多。）

在 AWT 中，您可以使用 a`Canvas`来绘制波形，但在 Swing 中，您可以使用以下任一方法：

*   A `JPanel`（或有时是`JComponent`）我们覆盖的绘制位置`paintComponent(Graphics)`
*   中的一个`BufferedImage`显示器`JLabel`。

你可以在 DrewTubeish 看到第一种技术的例子——这里是[Leftover Wine](http://www.youtube.com/watch?v=B0O3lX1Idxg)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T15:45:54.297

[`JFreeChart`](https://stackoverflow.com/tags/jfreechart/info)包括[各种](http://www.jfree.org/jfreechart/samples.html)合适的图表；[这里](https://stackoverflow.com/a/5048863/230513)有一个时域示例。这[`KineticModel`](https://sites.google.com/site/drjohnbmatthews/kineticmodel)扩展`JLabel`并实施`Icon`以显示频域[`Histogram`](https://sites.google.com/site/drjohnbmatthews/kineticmodel/code#Histogram)。两者都不*需要*Swing，但在 Swing 上下文中都可以更好地工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T02:47:40.383

我在音频领域的主要项目中使用过 AWT、Swing 和 JavaFX，包括波形绘制和编辑。以下是我的想法：

*   AWT 没有被开发或教授。我不知道有任何开发人员仍在使用它。我不会使用它。
*   JavaFX 是一场灾难。早在 2010 年，我正在开发最大的 JavaFX 代码库，我们放弃了它。我确信它已经变得更好了，但我还没有听到有人说它可以处理重大项目。如果您的项目很小，JavaFX 可能是一个不错的选择，或者如果您感觉强烈，您可能需要做进一步的研究。你可以在这里阅读更多关于我的经历：http: [//blog.bjornroche.com/2010/03/java-nofx-why-one-project-dropped.html](http://blog.bjornroche.com/2010/03/java-nofx-why-one-project-dropped.html)
*   Swing 有问题，应该受到很多批评，但如果你知道自己在做什么，它会很棒。我用它开发了一些很棒的用户界面（它们看起来和设计一模一样）。Swing 是在 AWT 之上编写的，您可能会认为这会使它变慢，但是有很多优化实际上使它在大多数平台上都非常快。如果我理解正确的话，CodenameOne 使用类似 swing 的界面，所以在我的书中，这是对 swing 的另一票：http: [//www.codenameone.com/](http://www.codenameone.com/)
*   SWT 是另一种选择。[http://www.eclipse.org/swt/](http://www.eclipse.org/swt/)我从来没有用过它，但我知道你必须用它来做你自己的内存管理，IMO，它带走了很多使用 Java 的优势。不过，就像我说的那样，我从未使用过它，所以我可能是错的。它是 Eclipse 的原生工具包。

# html - CSS 像素字体大小的一致性

> ID：12241832
> 
> 赞同：0
> 
> 时间：2012-09-03T04:00:05.620
> 
> 标签：html, css, fonts, media-queries, font-size

假设我想渲染两个大写的“T”，两个都**正好**是一英寸高。一个“T”在配备 Retina 显示屏的 Macbook Pro（220 DPI，CSS 像素比 2）上渲染，另一个在 iPhone 4S（326 DPI，CSS 像素比 2）上渲染。为此，我将 Macbook Pro 上的字体大小设置为 220 / 2 = 110px，将 iPhone 4S 上的字体大小设置为 326 / 2 = 163px。但是，这两个“T”的[尺寸仍然不一样](http://hashdev.com/liquid_layout/main.html)。为什么？另外，我能做些什么来确保两个“T”的物理尺寸相同？

**编辑：**是的，我正在使用媒体查询。我不想深入细节，但我通过提到 CSS 像素比的使用来暗示它。假设我在所有情况下都能神奇地获得客户端监视器的 DPI 和 CSS 像素比。

感谢您的洞察力！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T04:07:18.393

我认为必须执行此操作的概念是媒体查询，并且没有提及您正在使用媒体查询进行此操作。您可以使用媒体查询同时定位 iPhone 和 iOS 以获得所需的效果：

更多在[这里](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)

# android - 即使移动到下一个活动，音频也会持续播放

> ID：12241833
> 
> 赞同：0
> 
> 时间：2012-09-03T04:00:30.663
> 
> 标签：android

我做了一个`activity`有音频作为背景音乐的。当我添加一个跳过按钮以移动到另一个`activity`时，我的第一个活动的背景音乐不断播放。这是我的代码，请检查并发布我应该添加到我的代码中的内容。提前致谢！

```
public class pgone extends Activity {
    protected boolean _active = true;
    protected int _splashTime = 7000;
     public void onAttachedToWindow() {
            super.onAttachedToWindow();
            Window window = getWindow();
            window.setFormat(PixelFormat.RGBA_8888);

        }

     MediaPlayer audio;
     MediaPlayer SLONE;

    private long splashDelay = 6000; 

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.pgone);

        TimerTask task = new TimerTask()
        {

            public void run() {

                Intent mainIntent = new Intent().setClass(pgone.this, pgtwo.class);
                startActivity(mainIntent);
                finish();

            }

        };

        final Timer timer = new Timer();
        timer.schedule(task, splashDelay);

        audio = MediaPlayer.create(this,R.raw.storyaud);
        audio.start();

        SLONE = MediaPlayer.create(this,R.raw.sl1);
        SLONE.start();

        final MediaPlayer mp = MediaPlayer.create(this, R.raw.buttonbeep);
        final Vibrator mVibrator = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);

Button skipButton = (Button)findViewById(R.id.skip);
skipButton.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        Intent skipIntent = new Intent(pgone.this,choose.class);
        startActivity(skipIntent);
         mp.start();
         mVibrator.vibrate(500);
        finish();
        timer.cancel();
        timer.purge();

    }
});

    }

    protected void exitByBackKey() {

        AlertDialog alertbox = new AlertDialog.Builder(this)
        .setMessage("Do you want to exit the game?")
        .setPositiveButton("Yes", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface arg0, int arg1) {

                finish();
            }
        })
        .setNegativeButton("No", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface arg0, int arg1) {
            }
        })
          .show();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T04:12:29.973

在移动到下一个活动之前，您应该停止音频。在这里尝试用 mp.stop() 替换 mp.start()，

```
Button skipButton = (Button)findViewById(R.id.skip);
skipButton.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        Intent skipIntent = new Intent(pgone.this,choose.class);
        startActivity(skipIntent);
         mp.stop();
         mVibrator.vibrate(500);
        finish();
        timer.cancel();
        timer.purge();

    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T05:09:06.267

请写`mp.stop()` `mp.reset()`而不是`mp.start()`跳过按钮的单击事件，有关更多信息，请参见下面的链接。

[播放声音的媒体播放器示例](http://www.badprog.com/android-mediaplayer-example-of-playing-sounds)

[简单的安卓 Mp3 媒体播放器](http://www.hrupin.com/2010/12/simple-android-mp3-media-player)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-08T18:28:07.730

最简单最有效的方法——

```
@Override
    protected void onPause() {
        super.onPause();
        yoursMusicPlayerObject.release();

    } 
```

当你跳转到下一个活动时，利用活动生命周期的 onPause 阶段。只需释放正在使用的 I/O 资源，这是你的 MediaPlayer 对象。

# c++ - 多核 C++ 线程

> ID：12241839
> 
> 赞同：1
> 
> 时间：2012-09-03T04:01:09.113
> 
> 标签：c++, multithreading

我不知道如何在 C++ 中进行线程化，而且我不仅不想知道这一点，而且有没有办法可以将线程强制到不同的核心上？另外我怎么知道用户有多少个内核？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T04:09:57.937

将线程绑定到任意 CPU 称为设置亲和性。这是平台相关的操作。

对于 Windows：[SetProcessAffinityMask](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686223%28v=vs.85%29.aspx)

对于 pthreads：`pthread_attr_setaffinity_np(3)`和`pthread_setaffinity_np(3)`

对于 Boost，您可以使用`native_handle()`获取特定于平台的线程句柄以将它们与上述功能一起使用。

# c++ - 用 C++ 编写一组标准算法

> ID：12241841
> 
> 赞同：2
> 
> 时间：2012-09-03T04:01:37.360
> 
> 标签：c++, stl

随着时间的推移，我创建了许多算法，我发现自己在每个后续项目中都在重复使用这些算法。迄今为止，我只是将粘贴的代码剪切到相关项目中。但是，创建一个（或多个）算法库会更有效，然后我可以根据需要将其包含在内，就像我包含标准库一样。

创建这样一个库的最佳方法/实践是什么？我应该创建一个包含一组静态函数的类吗？还是我看错了？

您能提供的任何建议将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T05:49:08.147

只需按照与标准库相同的方式执行此操作：在您自己的命名空间中创建一组自由函数。通常，自由函数会采用一些迭代器来告诉算法要对哪些项目进行操作。

编辑：没有理由在 C++ 中使用静态类成员，这是一个 Java 习惯用法，因为它没有命名空间级别的自由函数。

# c - C：将新项目分配给链表中的“下一个”指针失败

> ID：12241847
> 
> 赞同：2
> 
> 时间：2012-09-03T04:02:52.217
> 
> 标签：c, list, pointers, linked-list

我在下面的链表函数中遇到了一个错误，我不知道该怎么办。疯狂的部分（对我来说）是我的代码到目前为止一直运行良好，并且在遇到错误之前仍然可以进行多次调用。

该函数的目标是在 PathItem 链表的末尾添加一个新项（PathItem，其中包含一个 BinaryItem）。我的功能如下

```
void addPathItemAtEnd(struct PathItem * pathItem, struct BinaryItem * binaryItem) {
    if (pathItem == NULL) {
        pathItem = malloc(sizeof(struct PathItem));
        pathItem->binaryItem = binaryItem;
        pathItem->next = NULL;
    } else {
        while (pathItem->next != NULL) {
            pathItem = pathItem->next;
        }
        struct PathItem * newPathItem = malloc(sizeof(struct PathItem));
        newPathItem->binaryItem = binaryItem;
        newPathItem->next = NULL;
        pathItem->next = newPathItem;        
    }
} 
```

有问题的线是`pathItem->next = newPathItem`. `EXC_BAD_ACCESS`我在调试器中得到错误。再一次，这段代码以前运行良好，所以我不明白现在发生了什么来扰乱它......

这似乎是重新分配指针变量的问题。不知道怎么了。

任何想法，建议，批评。如果需要，我可以附加更多/我的代码的其余部分。真的需要你的帮助和提前感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T04:05:34.920

您的主要问题是`pathItem`作为*副本*传入，因此对它的更改不会反映在原始代码中。C 使用按值传递的范例（C++ 也使用按值传递，但它至少具有引用类型，因此您不必纠结于 C 的钝指针方法）。

我看不出这是如何工作的，因为如果你传入的指针*最初*`pathItem`是 NULL，那么当你返回时它会*保持NULL。*换句话说，列表总是空的。

可能最简单的解决方法是将原型更改为：

```
void addPathItemAtEnd (struct PathItem *pPathItem, blah blah blah ... 
```

然后，无论您当前`pathItem`在该函数中的哪个位置，将其替换为`(*pPathItem)`.

而且，当然，用指针调用它，改变（类似）：

```
addPathItemAtEnd (listStart, newItem); 
```

到：

```
addPathItemAtEnd (&listStart, newItem); 
```

* * *

顺便说一句，健壮的代码也会检查来自的返回值`malloc`并采取相应的行动。虽然课堂作业和小型个人项目可能会在假设没有失败的情况下侥幸逃脱，但这在现实世界中并不会削减它:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T04:23:01.413

您正在按值传递列表的根，因此永远不会修改实际的根。改为传递 &root 以便可以对其进行修改。

```
struct PathItem *root = NULL;

void addPathItemAtEnd(struct PathItem **pRoot, struct BinaryItem * binaryItem) {
    // advance pRoot so that either it points to the original root or it
    // points at the next field of the last item
    while (*pRoot)
        pRoot = &(*pRoot)->next;
    // add the new item
    struct PathItem *p = malloc(sizeof(struct PathItem));
    // TODO check p!= NULL
    p->next = NULL;
    p->binaryItem = binaryItem;
    *pRoot = p;
} 
```

叫像

```
addPathItemAtEnd(&root, blah); 
```

# c++ - 如何处理关闭 MessageBox

> ID：12241851
> 
> 赞同：0
> 
> 时间：2012-09-03T04:03:41.863
> 
> 标签：c++, mfc, compact-framework

我的环境是 C++、MFC、WM 6.0+ 设备的紧凑框架。

在许多地方，我使用“MessageBox()”显示弹出消息，以提供简单的警告或从用户那里获得是/否的回复。我想要做的是，每当关闭任何消息时，在执行特定代码之前调用一些常用函数。

我在父窗口中尝试了 WM_SHOWWINDOW 但它似乎没有发生。

任何建议将不胜感激。

[已添加] 我的屏幕有很多按钮，我必须确保始终只有一个按钮处于焦点。当我显示消息框时，按钮似乎失去了焦点，所以我想在消息关闭时将其重新聚焦。当然，我可以在使用消息的每个地方都这样做，但要寻找一种更好的方法来处理这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T04:20:33.040

MessageBox 函数在关闭时返回特定的返回码，您可以包装 MessageBox 函数并检查返回值并在此基础上运行一些代码。

以下是 MSDN 的返回代码：

```
IDABORT    3    The Abort button was selected.
IDCANCEL    2    The Cancel button was selected.
IDCONTINUE    11    The Continue button was selected.
IDIGNORE    5    The Ignore button was selected.
IDNO    7    The No button was selected.
IDOK    1    The OK button was selected.
IDRETRY    4    The Retry button was selected.
IDTRYAGAIN    10    The Try Again button was selected.
IDYES    6    The Yes button was selected. 
```

所以下面的代码可以用来根据返回码运行不同的函数。

```
void MyMessageBox(wstring title,wstring message)
{
  int msgboxID = MessageBox(
       NULL,
       (LPCWSTR)message.c_str(),
       (LPCWSTR)title.c_str(),
       MB_ICONWARNING | MB_CANCELTRYCONTINUE | MB_DEFBUTTON2
   );

 switch (msgboxID)
 {
    case IDCANCEL:
        // TODO: add code
        break;
    case IDTRYAGAIN:
        // TODO: add code
        break;
    case IDCONTINUE:
        // TODO: add code
        break;
    //so on
 }
} 
```

更多信息在这里：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms645505 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645505(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T04:16:36.873

您可以尝试在父窗口中拦截[WM_ACTIVATE消息。](http://msdn.microsoft.com/en-us/library/aa922525.aspx)

# asp.net-mvc - 设置 MVC 以便多个 Web 应用程序可以共享相同的数据库模型和内置成员身份验证的正确方法是什么？

> ID：12241858
> 
> 赞同：0
> 
> 时间：2012-09-03T04:05:26.230
> 
> 标签：asp.net-mvc

我正在构建一个具有 4 个与相同数据库和内置表单身份验证交互的 Web 应用程序（站点）的 Web 业务。我想知道实现这一目标的最佳方法是什么？

一个应用程序/网站将成为我们的后台，在这里我们管理我们的客户、他们对我们的付款以及他们的订阅。

第二个站点 /app 将是我们面向公众的站点，它主要销售我们的服务并允许他们注册和/或为他们的站点付费。

第三个应用程序/站点是一个管理站点，允许他们建立自己的网上商店。

第四个应用程序将运行我们客户的网站。

根据这个讨论，[http](http://forums.asp.net/t/1753900.aspx/1?multiple+projects+in+one+solutions) ://forums.asp.net/t/1753900.aspx/1? multiple+projects+in+one+solutions，我相信设置了五个项目，一个是类库，将被引用其他四个项目是要走的路，但是当我这样做并将模型文件夹移动到这个类库时，我在尝试构建新库时遇到了一堆错误，例如：

```
The type or namespace name 'DataAnnotations' does not exist in the namespace 'System.ComponentModel' (are you missing an assembly reference?)
The type or namespace name 'Security' does not exist in the namespace 'System.Web' (are you missing an assembly reference?)
The type or namespace name 'Entity' does not exist in the namespace 'System.Data' (are you missing an assembly reference?) 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T04:09:43.973

移动共享任务，例如针对成员身份数据库的身份验证是正确的方法。缺少引用的问题只是意味着您需要将项目引用添加到`System.ComponentModel.DataAnnotations.dll`、`System.Web.dll`和`System.Data.Objects.dll`程序集到您的新库项目（因为库项目默认为一小组引用）。

# git - 通过“some”属性（分叉数或星数）获取排序的 github 存储库搜索结果

> ID：12241873
> 
> 赞同：4
> 
> 时间：2012-09-03T04:08:20.543
> 
> 标签：git, github

如何获取按叉数或星数排序的github搜索结果？

我需要这个特性来展示在那些针对类似任务/功能/特性的项目中哪个项目是最热门的。

我注意到 github 确实提供了高级搜索[，](https://github.com/search)但是如何编写查询？说，我想知道前 10 个分叉的 django 插件应用程序。查询是什么样的？我尝试了“django-fork：”甚至“django-fork：> 500”，它不起作用。（这里我们使用 'django-' 因为大多数 django 插件应用程序都有这样的前缀）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T04:19:49.260

更新更新（2013 年 2 月，来源“ **[Sortable Stars](https://github.com/blog/1410-sortable-stars)** ”）：

> 从今天开始，您可以按您加星标的时间或存储库的最后更新时间对已加[星标的存储库进行排序。](https://github.com/stars)

![在此处输入图像描述](../Images/47706d1fcb80cf9fe6551ead3ad1c242.png)

所以排序标准现在是可见的。

* * *

2013 年 1 月更新（来源：“[**全新的代码搜索**](https://github.com/blog/1381-a-whole-new-code-search)”）

按叉数搜索现在似乎返回按叉数排序的结果

[`django- forks:>500`](https://github.com/search?q=django-%20forks:%3E500&type=Repositories&ref=advsearch&l=)

博客文章“[通过搜索结果排序](https://github.com/blog/1396-sorting-through-search-results)”（2013 年 1 月 31 日）证实了这一点：

> 如果您正在搜索存储库，您可以按星号、分叉或最近更新排序

* * *

（原始答案：2012 年 9 月）

我在 GitHub 高级搜索中没有看到任何排序选项。

forks: 过滤器用于指示精确的 fork 数量，例如[此查询](https://github.com/search?q=django-%20forks:100%20fork:&repo=&langOverride=&start_value=1&type=Repositories&language=)将显示 4 个 repos，其中 100 个 fork 用于“ `django-`”。但这并没有显示超过 100 个分叉的*所有*repo，并且不会对它们进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:41:02.313

GitHub 支持“Lucene 查询语法”。

在此处查看@VonC 的答案：

[GitHub 高级搜索默认行为](https://stackoverflow.com/questions/5740454/github-advanced-search-default-behaviour)

和

[http://www.lucenetutorial.com/lucene-query-syntax.html](http://www.lucenetutorial.com/lucene-query-syntax.html)

但是 Lucene 不支持排序。

# ruby-on-rails - 如何将模型中的整数列转换为视图中的字符串

> ID：12241878
> 
> 赞同：1
> 
> 时间：2012-09-03T04:09:01.780
> 
> 标签：ruby-on-rails, view, model

对于“表示”字符串的整数数据库列，在视图中显示字符串值的最佳方式是什么？

例如，如果我以整数形式收集“payment_method”值，如下所示：

```
<%= f.select :payment_method, { "Visa" => "1", "Mastercard" => "2", "Amex" => "3"} %> 
```

如何在我的视图文件中将保存的整数显示为字符串？我可以在我的模型中添加什么，以便

```
<%= @relevantvariable.payment_method %> 
```

或类似的返回字符串值，如“Visa”、“Mastercard”或“Amex”，而不是它们各自的整数值？

非常感谢您处理这样一个基本问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T04:41:42.343

要么不使用整数值，直接将支付方式作为字符串存储在数据库中，要么创建一个 PaymentMethod 模型。

建立关联后，您可以这样引用付款方式的名称：

```
<%= @relevantvariable.payment_method.name %> 
```

不要尝试手动处理名称/ID 列表 - 这很快就会变得难以管理。

编辑：阅读您的评论后，如果您使用第一个选项并将字符串存储在表中，绝对不允许用户直接键入值，维护模型（或类似）列表，您为您的种子播种从下拉列表中，这样您仍然可以限制可能的值。如果您想确定将什么放入数据库，您甚至可以添加自定义验证器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T14:42:34.187

我会坚持使用cheeseweasel解决方案，但你可以做一件事来展示你的观点......

```
<% if @relevantvariable.payment_method == 1 %>
<%= "Visa" %>
<% else %>
<%= "Mastercard" %> 
```

您可能想改用开关/外壳，但您明白了

正如我所说，我认为你应该坚持使用奶酪鼬鼠解决方案，因为这种方法存在很多问题......这是你的决定

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T04:54:03.353

因此，您将付款方式放在单独的表中`payment_methods`，并且所有者（例如用户）包含`has_one`与它的关系

```
class User < AR::Base
   has_one :payment_method
end 
```

然后显示付款方式名称，就像

```
<%=
    @user.payment_method.name #or whatever you have. 
%> 
```

但是，在加载`@user`数据时，您可以执行`eager loading`by `:include`。像

```
User.find(user_id, :include => :payment_method) 
```

`PaymentMethod`即使对于具有单个查询的多个用户，这也会更早地加载数据。

# php - 从字符串中删除特定的 html 字符

> ID：12241887
> 
> 赞同：0
> 
> 时间：2012-09-03T04:10:59.520
> 
> 标签：php

它有点棘手的情况。我有一个表格供用户输入他们的评论。有时，用户会输入 HTML 字符。我的问题是，我只想保存特定的 HTML 字符`bold, table, tr, td`，比如`<>`标签。除此以外，应从字符串中删除任何其他 HTML 字符。我想知道如何做到这一点？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T04:15:09.510

[strip_tags](http://www.php.net/manual/en/function.strip-tags.php)允许您设置允许的标签列表。

> 字符串 strip_tags ( 字符串 $str [, 字符串 $allowable_tags ] )

```
echo strip_tags($text, '<b><table><tr><td>'); 
```

# iphone - ASIFormDataRequest 适用于模拟器但不适用于设备？

> ID：12241889
> 
> 赞同：0
> 
> 时间：2012-09-03T04:11:13.420
> 
> 标签：iphone, ios, xcode, simulator, asiformdatarequest

我正在使用 ASIFormDataRequest 发布三个值，即 url、标题和摘要。所有这些都在模拟器上运行良好，但在设备上不起作用。这是我正在使用的代码：

```
- (IBAction)addLinkPressed:(UIButton *)sender {

    ASIFormDataRequest *loginRequest = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:@"http://MyWebsite.com/login.php"]];
    [loginRequest setRequestMethod:@"POST"];
    [loginRequest setPostValue:[[NSUserDefaults standardUserDefaults] objectForKey:@"defaultUsername"] forKey:@"username"];
    [loginRequest setPostValue:[[NSUserDefaults standardUserDefaults] objectForKey:@"defaultPassword"] forKey:@"password"];
    [loginRequest setUseKeychainPersistence:YES];
    [loginRequest setDelegate:self];

    [loginRequest setDidFinishSelector:@selector(requestLoginFinished:)];
    [loginRequest setDidFailSelector:@selector(requestLoginFailed:)];
    [loginRequest startSynchronous];

    NSString *strURL = @"http://MyWebsite.com/send_link.php";
    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:strURL]];
    [request setDelegate:self];
    [request setPostValue:self.linkField.text forKey:@"url"];
    [request setPostValue:self.linkTitleField.text forKey:@"title"];
    [request setPostValue:self.linkSummaryField.text forKey:@"summary"];

    [request setDidFinishSelector:@selector(requestDone:)];
    [request setDidFailSelector:@selector(requestWentWrong:)];
    [request startAsynchronous];
} 
```

任何人都可以帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T06:44:01.490

首先：不再支持 ASIRequest。众所周知，在某些情况下它是错误的，并且错误不会被修复。

第二个，关于您的问题，我看到两个可能发生错误的地方（模拟器和设备之间的差异）：

1.  你确定在设备上`[[NSUserDefaults standardUserDefaults] objectForKey:@"defaultUsername"]`并且`[[NSUserDefaults standardUserDefaults] objectForKey:@"defaultPassword"]`设置正确吗？

2.  在 iOS 模拟器上，您无法访问钥匙串，因此此设置 ( `[loginRequest setUseKeychainPersistence:YES];`) 也可能导致设备出现问题。

我建议检查`NSUserDefaults`并更好地使用另一个框架，即 RestKit

**编辑：**

使用 RestKit 的示例：

```
[RKClient clientWithBaseURLString:@"http://example.com"];
RKClient *rkclient = [RKClient sharedClient];
RKParams *params = [RKParams paramsWithDictionary:[NSDictionary dictionaryWithObjectsAndKeys:
                                                   username, @"username",
                                                   password, @"password", nil]];
[rkclient post:@"/profile" params:params delegate:self];

// implement needed delegate methods 
```

# linux - 为什么 ln -s 中的斜杠很重要？

> ID：12241890
> 
> 赞同：1
> 
> 时间：2012-09-03T04:11:21.947
> 
> 标签：linux, bash, shell, symlink

假设（假设地）我想在我的桌面上创建一个指向我的 Documents 文件夹的符号链接。我会这样做：

```
cd ~/Desktop
ln -s ~/Documents 
```

这将在我的桌面上创建一个名为 Documents 的符号链接。

但是，当我这样做时（注意后面的斜杠`~/Documents`：

```
cd ~/Desktop
ln -s ~/Documents/ 
```

我得到：

```
ln: ./: File exists 
```

怎么来的？在这种情况下，为什么尾部斜杠很重要，一般来说，尾部斜杠是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T04:25:32.290

如评论中所述，尾部斜杠取决于应用程序。在我的系统（CentOS 5）上，两者都运行良好。

在这种情况下，我会说 ln 被解释`~/Documents/`为路径，并使用默认文件名`.`来引用当前目录，以获得有效的组合路径`~/Documents/.`. 由于您没有指定目标链接的名称，因此它会选择与`.`已存在的“指定”文件名匹配的链接。

当我`~/Documents/.`明确指定时，我会收到与您类似的错误。

您可以通过指定要显式创建的链接的名称来解决此问题。`ln -s ~/Documents/ Documents`应该为你工作。

# c# - 如何管理 WinForm 窗体上的顶部、左下角和其他间距？

> ID：12241893
> 
> 赞同：0
> 
> 时间：2012-09-03T04:12:00.530
> 
> 标签：c#, .net, winforms

我正在开发一个带有标签的 Win Forms 应用程序，并且有许多标签页。所有这些都对它们有很多控制。我需要管理表单的顶部、左侧、右侧和底部边距。在我通过选择和移动控件/标签并尝试使边距相等来手动管理此之前，但是在一些选项卡之后管理表单的边距和控件的边距以及控件之间的边距有点困难。

请建议什么是最好和专业的方法来管理这个。

**编辑** 我的控制继承如下：

**表单 > 选项卡控制 > 选项卡页面 > 表单拆分器 > 输入控件** 表单拆分器停靠在左侧。 ![在此处输入图像描述](../Images/d218b3e9de2cceefaf2448345ea3b85b.png) ![在此处输入图像描述](../Images/d2ef9b44cdb8a74f11d102a0ae2e267d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T04:31:28.963

您可以使用最简单的方法，而不是一个一个地移动控件。单击窗口，然后按**ctrl+A**然后按**Arrow Buttons**。这对我帮助很大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T04:23:07.903

设置每个标签页的`Padding`属性（它在属性面板的属性网格中）。它将有助于使用可视化设计器对齐控件。还要确保您使用该`Anchor`属性来处理大小调整，而无需编写自己的代码。

请注意，如果您有一个包含许多选项卡页和许多控件的表单，那么您可能做错了什么。

最好的方法是为每个标签页创建一个复合 UserControl。它确实简化了事情。

# html - 如何在表格单元格 (td) 中定位元素，使一个元素左对齐，另一个右对齐？

> ID：12241896
> 
> 赞同：2
> 
> 时间：2012-09-03T04:12:28.543
> 
> 标签：html, css, html-table, css-tables

给定下面的html代码：

```
<tr>
   <td>Some text <a href="">Some link</a> <button>Some Button</button></td>
</tr> 
```

我想实现这样的目标：

![表的图像](../Images/8dfb24eb0fecffe658411c7e202e6bf3.png)

我是否需要添加额外的标记，例如包装 div 以将一个浮动到左侧，另一个浮动到右侧？我还需要 td 中的元素垂直对齐。

以最少的额外加价实现这一目标的最佳方法是什么。

我在这里有示例代码：http: [//jsfiddle.net/stormwild/AAw78/17/](http://jsfiddle.net/stormwild/AAw78/17/)

一个相关的问题是当一个单元格包含浮动元素时，如何保持表格单元格之间的文本对齐一致？

![在此处输入图像描述](../Images/67e65dab322c6f1e30c0fa9ac436534e.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T04:14:35.033

CSS：`td button { float: right; }`

排序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T04:14:33.387

嗨，现在给你按钮中的浮动元素

```
<button style="float:right;">Some Button</button> 
```

***[演示](http://jsfiddle.net/AAw78/20/)***

**或者**

```
<button class="fr">Some button</button> 
```

**CSS**

```
.fr{
float:right;
} 
```

# django - 在 django 中解析复杂的 json post 数据的问题

> ID：12241900
> 
> 赞同：1
> 
> 时间：2012-09-03T04:13:00.873
> 
> 标签：django, urllib2, simplejson

我有一个 django 解析函数：

```
def parse_org(request):
    try:
       org = simplejson.loads(request.POST['org'])
    except Exception:
       traceback.print_exc()
    print org 
```

我得到了解码错误。

在客户端，脚本版本（代码粘贴在后面部分）工作正常，但最近我想写一个python版本来做负载测试，所以我在python客户端脚本中编写了以下代码来发送请求：

```
data_dict = {}
org = ["UCSD", "MIT"]
data_dict["org"] = org
req = urllib2.Request(request_url, urllib.urlencode(data_dict), headers)
response = urllib2.urlopen(req, timeout = 5) 
```

然后 django 站点上的解析代码出现解析错误。我比较了正确的javascript版本和错误的python客户端，唯一的区别是单引号和双引号，django端的错误解析输入是：

```
POST:<QueryDict: {u'org': [u"['UCSD', 'MIT']"], .... 
```

正确的输入是：

```
POST:<QueryDict: {u'org': [u'["UCSD","MIT"]'], .... 
```

供您参考，javascript 端看起来像（django 可以正确地将 org 解析为数组）：

```
var org = [];
org.push("UCSD")
org.push("MIT")
var data = {"org":  JSON.stringify(org), ...
           }
$.post(url, data, function(data){
    callback(data);
}); 
```

我搜索了很多，但仍然找不到为什么python客户端不能工作，而javascript客户端可以工作。它与urllib的urlencode有关吗？为什么那里有单引号和双引号的区别？

非常感谢！

# mysql - 从内部连接创建表非常慢

> ID：12241901
> 
> 赞同：0
> 
> 时间：2012-09-03T04:13:28.793
> 
> 标签：mysql, linux, performance, join

我有如下声明

```
CREATE TABLE INPUT_OUTPUT 
SELECT T1_C1,.....,T1_C300, T1_PID from T1 
    INNER JOIN (SELECT T2_C1,T2_C2,T2_PID FROM T2) as RESPONSE ON T1.T1_PID=RESPONSE.T2_PID 
```

运行速度非常慢 - 现在运行了 5 个小时。这两个表有大约 400 万行和几百列。

我有一台 8 核、64gb ram ubuntu-linux 机器，使用 top 我可以看到 mysql 进程只在一个内核上使用了 3gb，尽管它的使用率始终保持在 100%。令人不安的是，并非所有内核都在使用。

我想比这更快地创建表。

我应该使用

```
CREATE TABLE INPUT_OUTPUT LIKE T1 
```

通过为 T2 中相关的列添加额外的列来更改 INPUT_OUTPUT，然后填充它？我不确定这样做的语法以及它是否会导致加速。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T04:39:57.290

`T1_PID`有索引吗？如果是这样，这应该运行得很快。运行查询`EXPLAIN`的`SELECT`一部分，看看它说了什么。

也就是说，我不明白你为什么需要子查询。出什么问题了：

```
CREATE TABLE INPUT_OUTPUT 
SELECT T1_C1,.....,T1_C300, T1_PID, T2_C1, T2_C2, T2_PID
FROM T1 INNER JOIN T2 ON T1.T1_PID=T2.T2_PID 
```

*如果有一个或* 有一个索引`T1`，则使用后者应该可以工作。`T2``PID`

# php - 依赖中的脚本需要 Composer 自动加载器的路径

> ID：12241903
> 
> 赞同：9
> 
> 时间：2012-09-03T04:13:35.563
> 
> 标签：php, autoload, composer-php

我正在开发一个包——`myvendor/mylib`我计划使用 Composer 分发它，可能通过 Packagist。这个包包含 - 除其他外 - 一个命令行 PHP 脚本`bin/console.php`，我想将其提供给项目 - 比如说`myvendor/mymain`- 导入`mylib`包。

我知道我可以在`mylib`包中指定一个带有要导入的 bin 数组的`config`设置：`composer.json`

```
{
    "name": "myvendor/mylib",
    "config" : {
        "bin" : ["bin/console.php"]
    }
} 
```

当`mymain`项目进行作曲家安装/更新时，这`mylib/bin/console.php`将被符号链接为`mymain/bin/console.php`此外，我知道该`mymain`项目可以指定 - 在他自己的`composer.json`-*他*希望在哪里对依赖项进行符号链接：

```
{
    "name": "myvendor/mymain",
    "config": {
        "bin-dir": "scripts"
    }   
} 
```

在这种情况下，控制台脚本会被符号链接为`scripts/console.php`.

这很好用——顺便说一句，当所有人都出去时，这很酷。;-)

但是，脚本`bin/console.php`本身需要包含 Composer 生成的`vendor/autoloader.php`. 单独开发`mylib`时，脚本`bin/console.php`知道自己相对于 的位置`vendor/autoloader.php`，所以他可以轻松地包含它。但是一旦它作为依赖项导入到另一个项目中——`myvendor/mymain`在这种情况下——那么就只有`mymain/vendor/autoloader.php`脚本了。原则上，控制台脚本无法知道他相对于该自动加载器脚本的位置。

Composer 是否提供了一些环境变量 - 控制台脚本可以访问 - 允许脚本找到正确的`vendor/autoloader.php`脚本？

顺便说一句：我知道[Composer CLI environment variable](http://getcomposer.org/doc/03-cli.md#environment-variables)，所以我想我可以要求导入项目`mymain`- 定义（和导出！） var `COMPOSER_VENDOR_DIR`。然后我的控制台脚本可以使用它来查找项目的自动加载器。但这似乎可能存在问题：

1.  我们希望该设置仅适用于*该*项目，但 shell var（和导出）将适用于从该 shell 会话访问的*所有项目。*似乎对我的小依赖很冒昧`myvendor/mylib`- 将其强加于导入项目。

2.  原则上，依赖本身——`myvendor/mylib`应该能够找到他需要的东西。把责任推给进口商似乎是不对的。

WDYT？提前致谢。欢迎提出想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T03:24:43.273

一种方法（来自与@igorw 在 IRC freenode #composer 上的讨论，我正在解释并且我正在对其进行一些扩展）是让 bin 脚本`console.php`迭代文件系统，从 开始`__DIR__`，寻找`autoload.php`.

# javascript - 跨页面运行函数

> ID：12241907
> 
> 赞同：1
> 
> 时间：2012-09-03T04:14:39.547
> 
> 标签：javascript, google-chrome

我尝试让一个函数跨页面运行。

函数如下：

1.  打开一个网络并等待 document.readyState “完成”。
2.  在打开的页面中做某事。
3.  获取并单击提交按钮。
4.  等待页面加载并再次获取并单击提交按钮。

第 1 步和第 2 步在同一个页面中，第 3 步和第 4 步不同。

我想知道的是是否可以在 chrome Javascript 控制台上运行这些功能。还有其他方法可以实现吗？

# c++ - 为什么这段代码会导致死锁？

> ID：12241910
> 
> 赞同：3
> 
> 时间：2012-09-03T04:16:21.697
> 
> 标签：c++, pthreads, deadlock, cilk, cilk-plus

我很惊讶地看到`pstack`这段代码导致了死锁！我看不出有同样的原因。

```
pthread_mutex_t lock;

_Cilk_for (int i = 0; i < N; ++i) {
  int ai = A[i];
  if (ai < pivot) {
    pthread_mutex_lock(&lock);
    A[ia++] = ai;
    pthread_mutex_unlock(&lock);
  }
  else if (ai > pivot) {
    pthread_mutex_lock(&lock);
    A[ib++] = ai;
    pthread_mutex_unlock(&lock);
  }
  else {
    pthread_mutex_lock(&lock);
    A[ic++] = ai;
    pthread_mutex_unlock(&lock);
  }
} 
```

我只是使用互斥锁来确保对 A 的访问是原子的和序列化的。

*   **这段代码有什么问题导致死锁？**
*   有没有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T04:33:31.020

如果那是函数内的代码，那么您没有正确初始化互斥锁。您需要将其设置为`PTHREAD_MUTEX_INITIALIZER`（对于简单的默认互斥锁）或`pthread_mutex_init()`对其进行操作（对于更复杂的要求）。如果没有正确的初始化，您将不知道互斥锁从什么状态开始 - 它很可能处于锁定状态，因为该位置的堆栈上发生的任何事情看起来都像是一个锁定的互斥锁。

这就是为什么它总是需要以某种方式初始化，这样就不会怀疑初始状态。

您可能遇到的另一个潜在问题是：

```
int ai = A[i]; 
```

您*可能*应该使用相同的互斥锁来保护该访问，否则您可能会以“半状态”读取它（当另一个线程只是更新变量的一部分时）。

* * *

而且，我不得不说，我不确定这里是否明智地使用了线程。互斥锁的使用很可能会淹没一个语句`A[ia++] = ai`，以至于绝大多数时间都花在锁定和解锁互斥锁上。它们通常在锁定期间处理的代码更重要的情况下更有用。

您可能会发现一个非线程变体会将这个变体从水中吹走（但是，当然，不要相信我的话——我的主要优化口号是*“测量，不要猜测”*）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T04:23:34.770

你`pthread_mutex_t lock`没有正确初始化，所以，因为它是一个局部变量，它可能包含垃圾，并且可能处于奇怪的锁定状态。您应该调用[pthread_mutex_init](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_mutex_init.html)或`lock`使用`PTHREAD_MUTEX_INITIALIZER`

正如其他人抱怨的那样，您没有明智地使用互斥锁。您的代码的关键部分太小了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T04:46:32.473

在您修复或以其他方式验证您实际上正在初始化您的之后`lock`：

`pstack`可能知道由其引入的控制机制`_Cilk_for`会干扰原本合理的`pthread`代码。

快速搜索显示有[与 Cilk 一起使用的互斥解决方案](http://software.intel.com/sites/products/documentation/hpc/composerxe/en-us/2011Update/cpp/lin/index.htm#cref_cls/common/cilk_resolve_data_races.htm)- 没有提到混合 Cilk 和 pthreads。看起来 Cilk 是 pthreads 之上的一层——所以如果 Cilk 选择在周围放置一个包装器，`mutex,`他们这样做可能是有充分理由的。我建议继续使用 Cilk API。

除此之外，您的算法还有一个更根本的问题。 *在您的情况下，*创建并行线程和同步它们的开销可能会使执行 for 循环主体中的代码的成本相形见绌。这很有可能在不并行化的情况下运行得更快。

# android - 此进程的字节外部分配太大”，“VM 不允许我们分配字节”

> ID：12241911
> 
> 赞同：1
> 
> 时间：2012-09-03T04:16:35.580
> 
> 标签：android, memory-management, logcat, dalvik

我正在使用 Android 2.2，当我尝试通过按后退按钮从第二个活动返回到第一个活动时，应用程序崩溃并产生 logcat 错误：

```
字节外部分配对于这个进程来说太大了，
    VM 不允许我们分配字节
```

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:21:25.773

您似乎内存不足，因此活动无法重新启动。请查看此链接以跟踪您在 Android 中的记忆 - [http://android-developers.blogspot.com/2011/03/memory-analysis-for-android.html](http://android-developers.blogspot.com/2011/03/memory-analysis-for-android.html)

但是，如果您要粘贴更多日志和代码 - 它可以帮助确定确切的问题。

祝你好运

# ruby - Ruby 最短公共超弦

> ID：12241913
> 
> 赞同：-1
> 
> 时间：2012-09-03T04:16:42.070
> 
> 标签：ruby, algorithm

最短常见超字符串问题的目标是找到包含给定集合中的每个字符串作为子字符串的最短可能字符串。我知道问题是“NP完成”。但是有针对该问题的近似策略。例如，给定短字符串

```
ABRAC
ACADA
ADABR
DABRA
RACAD 
```

如何实现最短的常见超字符串问题，使得上面给定字符串的输出是`ABRACADABRA`？另一个例子

```
Given

fegiach
bfgiak
hfdegi
iakhfd
fgiakhg 
```

该字符串 `bfgiakhfdegiach`是长度为 15 的可能解。

尽管我没有深入研究算法，但我想在 Ruby 中实现这一点，但我正在努力改进它。

一个天真的贪婪实现将涉及为每个子字符串创建一个后缀数组

```
def suffix_tree(string)
  size = string.length
  suffixes = Array.new(size)
  size.times do |i|
    suffixes[i] = string.slice(i, size)
  end
  suffixes
end

#store the suffixes in a hash
#key is a fragment, value = suffixes
def hash_of_suffixes(fragments)
  suffixes_hash = Hash.new
  fragments.each do |frag|
    suffixes_hash["#{frag}"]= suffix_tree(frag)
  end
  suffixes_hash
end

fragments = ['ABRAC','ACADA','ADABR','DABRA','RACAD']
h = hash_of_suffixes(fragments)

#then search each fragment in all the suffix trees and return the number of 
#overlaps for each key

#store the results in graph??
#find possible ordering of the fragments

I would be grateful with some help. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T06:46:07.237

请注意指出您的示例问题的评论。另请注意，如果有一些巧妙的方法可以做到这一点，我不知道它是什么。我只是遍历所有排列，将它们组合在一起，然后找到最短的。

```
class ShortestSuperstring
  def initialize(*strings)
    self.strings = strings
  end

  def call
    @result ||= smoosh_many strings.permutation.min_by { |permutation| smoosh_many(permutation.dup).size }
  end

  private

  attr_accessor :strings

  def smoosh_many(permutation, current_word='')
    return current_word if permutation.empty?
    next_word = permutation.shift
    smoosh_many permutation, smoosh_two(current_word, next_word)
  end

  def smoosh_two(base, addition)
    return base if base.include? addition
    max_offset(base, addition).downto 0 do |offset|
      return base << addition[offset..-1] if addition.start_with? base[-offset, offset]
    end
  end

  def max_offset(string1, string2)
    min string1.size, string2.size
  end

  def min(n1, n2)
    n1 < n2 ? n1 : n2
  end
end 
```

和测试套件：

```
describe ShortestSuperstring do
  def self.ss(*strings, possible_results)
    example "#{strings.inspect} can come from superstrings #{possible_results.inspect}" do
      result = described_class.new(*strings).call
      strings.each { |string| result.should include string }
      possible_results.should include(result), "#{result.inspect} was not an expected superstring."
    end
  end

  ss '', ['']
  ss "a", "a", "a", ['a']
  ss "a", "b", %w[ab ba]
  ss 'ab', 'bc', ['abc']
  ss 'bc', 'ab', ['abc']
  ss 'abcd', 'ab', ['abcd']
  ss 'abcd', 'bc', ['abcd']
  ss 'abcd', 'cd', ['abcd']
  ss 'abcd', 'a', 'b', 'c', 'd', ['abcd']
  ss 'abcd', 'a', 'b', 'c', 'd', 'ab', 'cd', 'bcd', ['abcd']

  %w[ABRAC ACADA ADABR DABRA RACAD].permutation.each do |permutation|
    ss *permutation, %w[RACADABRAC ADABRACADA]
  end

  %w[fegiach bfgiak hfdegi iakhfd fgiakhg].permutation.each do |permutation|
    ss *permutation, %w[bfgiakhgiakhfdegifegiach
                        bfgiakhgfegiachiakhfdegi
                        iakhfdegibfgiakhgfegiach
                        iakhfdegibfgiakhgfegiach
                        fegiachiakhfdegibfgiakhg
                        fegiachbfgiakhgiakhfdegi
                        iakhfdegifegiachbfgiakhg]
  end
end 
```

# iphone - 有时 MBProgressHUD 不显示

> ID：12241914
> 
> 赞同：1
> 
> 时间：2012-09-03T04:16:59.137
> 
> 标签：iphone, ios, ios4, mbprogresshud

我在 uitableview 中显示了歌曲标题列表以及“购买”按钮。当点击该按钮时，我正在显示 MBProgressHUD。但有时它没有被显示。它也禁用了用户交互，因为它在下面的代码中。

但为什么有时它不显示 MBProgressHUD？

请告诉我，非常感谢。

> 下面是代码

```
-(void) buySong:(UIButton *)button
    {
      self.view.userInteractionEnabled = NO;

      self.navigationController.navigationBar.userInteractionEnabled = NO;

      MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
      hud.labelText = @"Proessing...";
      hud.yOffset = -80;

      UITableViewCell *cell = (UITableViewCell *)[[button superview] superview];
      NSIndexPath *indexPath = [[self tblViewChildrenPoems] indexPathForCell:cell];

      PSSongTags *songTags = [self.songsArray objectAtIndex:indexPath.row];
      [ [PurchaseViewController sharedPurchaseManager] startPurchase:songTags];

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T04:45:37.810

试试这个代码可能对你有帮助......

在您的 .h 文件中导入 .

```
 #import "MBProgressHUD.h" 
```

设置委托。

```
MBProgressHUDDelegate 
```

后

```
MBProgressHUD *HUD; 
```

在您的 .m 文件中//将此代码添加到您要显示的位置...

```
HUD = [[MBProgressHUD alloc] initWithView:self.navigationController.view];
    [self.navigationController.view addSubview:HUD];
    HUD.delegate = self;
    HUD.labelText = @"Authorizing...";
    [HUD show:YES]; 
```

当您的流程最终用于隐藏时..

```
[HUD Hide:YES]; 
```

并在你的 m 文件中设置隐藏委托..

```
- (void)hudWasHidden:(MBProgressHUD *)hud {
    // Remove HUD from screen when the HUD was hidded
    [HUD removeFromSuperview];
    [HUD release];
    HUD = nil;
} 
```

快乐的编码...

# ios - 如果背景音频处于活动状态，MPMoviePlayerController 将冻结

> ID：12241916
> 
> 赞同：2
> 
> 时间：2012-09-03T04:17:19.217
> 
> 标签：ios, audio, video, mpmovieplayercontroller, avfoundation

在视图控制器中，我播放了视频和一些背景音乐。如果正在播放背景音乐，则视频在循环播放时会冻结。如果背景音乐未正常播放，则视频循环正常。

这是我设置视频播放器的方式：

```
self.moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:[self getBundleClip:@"MyVideo"]];
self.moviePlayer.controlStyle = MPMovieControlStyleNone;
self.moviePlayer.shouldAutoplay = YES;
self.moviePlayer.repeatMode = MPMovieRepeatModeOne; 
```

音频正在通过此[Sound Manager](https://github.com/nicklockwood/SoundManager)播放。知道为什么视频会冻结吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T04:43:12.670

尝试在后台使用播放音乐`AVAudioPlayer`并同时播放，`MPMoviePlayerController`如下面的代码，以重复模式播放 AVAudioplayer：

首先在头文件 (.h) 中初始化 AVAudioplayer 对象，如下所示：

```
@interface  Yourviewcontroller : UIViewController
{
    //your some codes after
    AVAudioPlayer *audioPlayer;
}

@property (strong, nonatomic) AVAudioPlayer *audioPlayer; 
```

在后台实现播放音频文件后，如下代码：

```
 audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:    [[NSBundle mainBundle] pathForResource:@"audio" ofType:@"mp3"]] error:NULL]; 

    audioPlayer.numberOfLoops =-1;//it's play audio repeatedly
    audioPlayer.currentTime=0.0f;
    [audioPlayer prepareToPlay]; 
```

播放音频后，项目的任何部分如下代码：

```
 [audioPlayer play]; 
```

你想像下面的代码一样停止音频播放器：

```
 [audioPlayer stop]; 
```

# php - 当访问者在输入文本字段中键入颜色代码时自动更改示例边框

> ID：12241922
> 
> 赞同：1
> 
> 时间：2012-09-03T04:18:02.180
> 
> 标签：php, javascript, html, css

我想知道当访问者在输入文本字段中键入颜色代码时如何自动更改示例边框：

您有想要的特定边框颜色吗？

```
input name="ContentInclude:borderspecs" type="text" maxlength="200" id="ContentInclude_borderspecs" tabindex="5" style="width:500px" 
```

[https://advertiser.seek.com.au/advertisers/catalogue/templaterequest.ascx](https://advertiser.seek.com.au/advertisers/catalogue/templaterequest.ascx)

示例代码以：开始示例模板开头

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:05:30.090

最简单的解决方案：

```
<input name="ContentInclude:borderspecs" type="text" maxlength="200" 
    id="ContentInclude_borderspecs" tabindex="5" style="width:500px" 
    onkeyup="javascript:changeBorderColor(this);"> 
```

JS代码：

```
<script>
function changeBorderColor(elem){
    var template = document.getElementById('sampletemplate');
    if (elem.value.match(/^\#([\dabcdef]{3}|[\dabcdef]{6})$/i)) { // HEX code
        template.style.borderColor = elem.value;
    }
    // more else if to match other possible values
    else { // reset to default
        template.style.borderColor = null; // or "black"
    }
}
</script> 
```

// 编辑所以它改变了模板预览的颜色`div#sampletemplate`

# javascript - 我可以在浏览器中看到 API 响应，但不能使用 Ajax，为什么？

> ID：12241925
> 
> 赞同：0
> 
> 时间：2012-09-03T04:18:33.110
> 
> 标签：javascript, ajax, api

我有一个来自后端的 api，如果我直接访问浏览器中的 url，我可以正确看到响应，但如果我使用 Ajax 加载它，我总是会`502 Bad Gateway`出错。

页面和 api 在同一个域中：`http://xx.com`和`http://xx.com/api`.

这真的很奇怪，怎么会这样？

更新：我进一步探索了它，发现甚至`var img = new Image(); img.src = url;`出现 502 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T04:37:18.183

正如[本页](http://www.checkupdown.com/status/E502.html)有用地解释的那样，“上游服务器和网关/代理不同意交换数据的协议。” 在这种情况下，这可能会发生，因为您的 Ajax 请求指定了不同的标头（例如不同的“Accept”标头），从而导致在您的代理和实际后端之间交换不同的实体类型（即正文）。我建议使用像 Firebug 或 Chrome 调试器这样的工具来检查您的常规请求和 Ajax 请求的详细信息，寻找显着差异，并根据需要向 Ajax 请求添加标头以获得所需的结果。

# php - PHP中的Heroku postgres连接

> ID：12241929
> 
> 赞同：0
> 
> 时间：2012-09-03T04:19:12.433
> 
> 标签：php, postgresql, heroku

我尝试以与连接 phpmyadmin 相同的方式连接到 postgres，但似乎连接失败。我所做的是将我的凭据复制并粘贴到 php 文件中。我想知道是否需要激活 postgres 数据库在尝试连接之前？？任何帮助将不胜感激..最好..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:34:17.247

你得到什么错误信息？

您至少需要将数据库添加到您的应用程序才能使用 -[请参阅此处的答案](https://stackoverflow.com/a/12246014/28037)。您是否能够添加应用程序并查看数据库凭据？

# javascript - 在 JS 中给一个字母赋值？

> ID：12241931
> 
> 赞同：0
> 
> 时间：2012-09-03T04:19:22.193
> 
> 标签：javascript, jquery

是否可以为一定数量的字母分配一个数值，以后可以将其相加？

前任：

```
A,B,C = 1
D,E,F = 2 
```

所以如果我添加`A`+ `D`+`D`我得到`5?`

我会发布我尝试过的内容，但我什至不知道我可以在这个网站上尝试什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T04:21:20.263

你需要做

```
A = B = C = 1;
D = E = F = 2; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T04:21:17.500

您可以使用属性映射来分配值：

```
var map = { A:1, B:1, C:1, D:2, E:2, F:2 };
console.log(map.A+map.D+map.D); 
```

> 5

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-03T04:23:26.073

```
var alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
    letters = alphabet.split(''),
    len = letters.length,
    i;

for (i = 0; i < len; i++) {
    window[letters[i]] = Math.ceil((i + 1) / 3);
}

alert(D + D + A); 
```

[http://jsfiddle.net/zerkms/dKQS2/](http://jsfiddle.net/zerkms/dKQS2/)

# java - StyledEditorKit.FontSizeAction() 不能通过 JButton 工作

> ID：12241935
> 
> 赞同：0
> 
> 时间：2012-09-03T04:20:10.120
> 
> 标签：java, swing, jbutton, actionlistener, jtextpane

我有一个`JToolBar`和一个`JTextPane`。在工具栏上，我有加粗、下划线等按钮。我尝试添加一个按钮，按下该按钮会增加文本的大小。

此代码出现在我的 ToolBar 类的开头，并设置为等于我的 Display 类中的一个 int，它的默认值为 24。它用于设置原始字体大小。

`static int size = Display.size;`

此代码在我的 ToolBar() 构造函数中。

```
final JButton reduceButton = new JButton(new ImageIcon("res/reduce.png"));
reduceButton.setToolTipText("Reduce Text...");
reduceButton.setFocusable(false);
reduceButton.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent arg0) {
        size -= 4;
        System.out.println("FontSize = " + size);
    }
});
reduceButton.addActionListener(new StyledEditorKit.FontSizeAction("myaction-", size)); 
```

由于某种原因，该按钮不起作用，但是如果我将代码更改为：

```
reduceButton.addActionListener(new StyledEditorKit.FontSizeAction("myaction-", 40)); 
```

..然后它工作。知道这是为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T06:32:38.583

问题是大小是由第二次调用固定的`addActionListener`- 无论该`size`代码最初运行时的值是什么，它将保持不变。

如果您需要动态更改字体大小，就像您所做的那样，那么您需要在之前的动作侦听器中进行。尝试类似的东西

```
reduceButton.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent arg0) {
        size -= 4;
        System.out.println("FontSize = " + size);
        // Font has changed, instantiate a new FontSizeAction and execute it immediately.
        new StyledEditorKit.FontSizeAction("myaction-", size).actionPerformed(arg0);
    }
}); 
```

仅仅为了调用一个动作而创建一个新的动作对象有点奇怪；我可能会重写它只是为了直接修改编辑器对象上的字体。

顺便说一句，拥有像这样的静态、可变变量通常是个坏主意。

看起来您可以通过 actionEvent 中的 actionCommand 字符串覆盖您在构造函数中指定的字体大小；见[http://opensourcejavaphp.net/java/harmony/javax/swing/text/StyledEditorKit.java.html](http://opensourcejavaphp.net/java/harmony/javax/swing/text/StyledEditorKit.java.html)

```
public void actionPerformed(final ActionEvent event) {
        Object newValue = null;
        if (event != null) {
            try {
                newValue = new Integer(event.getActionCommand());
            } catch (NumberFormatException e) {
            }
        }
        performAction(event, StyleConstants.FontSize, null, defaultValue,
                      newValue, false);
    } 
```

但是我首先发布的内容应该有效。如果它不让我知道问题是什么，我会再看看。

# tomcat - 具有虚拟 IP 的 Apache Tomcat

> ID：12241943
> 
> 赞同：0
> 
> 时间：2012-09-03T04:21:24.527
> 
> 标签：tomcat

我有 由网络管理员设置的*物理 ip*和*虚拟 ip的服务器。*在服务器内部，我安装`Apache tomcat 7.0.29`并创建了一个 Web 应用程序。当我运行 wget`http://<physical ip>:8080/xxx`或时`http://<localhost>:8080/xxx`，我可以获取页面但不能使用 wget`http://<virtual ip>:8080/xxx`并且它会引发如下*错误*

```
Connecting to <virtual ip>:8080... connected.
HTTP request sent, awaiting response... Read error (Connection reset by peer) in headers.
Retrying. 
```

服务器的*操作系统*是`redhat`.

如何获得`http://<virtual ip>:8080/xxx works`？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T04:36:42.537

您的两个最佳选择：

1) 获取一个静态 IP（这*并不*像许多人认为的那样“必要”）

... 或者 ...

2）使用可以在IP地址更改时更新其记录的DNS服务器（Windows Active Directory擅长这种事情）

如果这些都不是一个选项，您可以：

3a）在 Tomcat 服务器上编写一个“cron”作业，定期调用“http:/www.whatismyip.com”（或类似的东西）来获取您当前的 IP 地址，并且 3b）让脚本向您发送一封电子邮件（或类似的东西）只要它检测到地址已更改。

'希望有帮助

# java - 自动重定向到另一个页面时使用URLConnection获取原始网页源代码有问题

> ID：12241944
> 
> 赞同：0
> 
> 时间：2012-09-03T04:22:03.560
> 
> 标签：java, urlconnection

当我在浏览器中打开网页时，我可以成功访问该网页。但是当我厌倦了在线获取Java网页的源代码时，网页自动重定向到另一个页面，所以我只能在我的程序中获取新网页的源代码。有什么办法可以打破java中的这种重定向吗？

多谢。

以下是在我的程序中获取源代码的部分。

目标网页是一个在线社区网页（如Facebook），属于中国最大的互联网公司（百度）。

当你运行下面的程序时，你会发现控制台中贴出的网页源代码并不是你可以从浏览器中得到的代码。并且控制台中发布的源代码与您在以下网页中可以找到的几乎相同， [http://www.baidu.com/search/ressafe.html?q=%E5%AE%AB%E5%B4 %8E%E9%AA%8F%E5%90%A7&url=http://tieba.baidu.com/f?kw=%B9%AC%C6%E9%BF%A5](http://www.baidu.com/search/ressafe.html?q=%E5%AE%AB%E5%B4%8E%E9%AA%8F%E5%90%A7&url=http://tieba.baidu.com/f?kw=%B9%AC%C6%E9%BF%A5)

这表明网页被重定向。

```
import java.net.*;
import java.io.*;
import java.util.*;

public class URLConnectTest {

    public static final String s = "%B9%AC%C6%E9%BF%A5";

    public static void main(String[] args) throws Exception {
        URL u = new URL("http://tieba.baidu.com/f?kw=" + s);
        URLConnection yc = u.openConnection();

        /* I've ever tried to reset the UA, which doesn't work.
        yc.setRequestProperty("User-Agent", "Mozilla/5.0 (Windows NT 6.0; WOW64) AppleWebKit/534.24 (KHTML, like Gecko) Chrome/11.0.696.16 Safari/534.24");
        */

        BufferedReader in = new BufferedReader(new InputStreamReader(yc.getInputStream()));
        String line;
        while ((line = in.readLine()) != null) {
            System.out.println(line);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T05:09:57.640

`HTTPURLConnection`自动遵循 HTTP 重定向，如果要禁用它，请调用`HTTPURLConnection.setInstanceFollowRedirects(false)`.

# python - 有哪些方法可以使用不提供美国标准中写后读一致性的 Amazon S3？

> ID：12241945
> 
> 赞同：0
> 
> 时间：2012-09-03T04:22:10.750
> 
> 标签：python, amazon-s3, amazon-web-services

是否有任何普遍接受的做法来解决这个问题？具体来说，对于上传到 Web 服务的用户提交的图像。我的应用程序在 Python 中运行。

想到的一些被黑的解决方案：

*   从本地目录显示上传的图像，直到 S3 图像准备好，然后“移交”并更新数据库以反映更改。
*   将“等待”进度指示器显示为背景 gif，图像将在准备就绪时出现（使用 JavaScript）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T04:50:36.250

我会节省时间，什么也不做。等待时间非常快。

如果您想阻止最终用户，您可以只显示没有图像的“成功”页面。如果图像不可用，大多数普通用户只会点击重新加载。

如果你真的觉得你必须......我可能会使用这样的 javascript 解决方案：

*   在您的数据存储中有一个“时间戳上传”列
*   如果上传时间小于 1 分钟，而不是渲染 img=src 标签...渲染一些 javascript 以 15 秒间隔轮询 s3 存储桶

同样，大多数用户可能永远不会体验到这一点——如果他们这样做了，他们也不会真正关心。用户生成内容的用户体验期望非常低（看看 Facebook）；如果这是一个“企业”服务的管理后端，可以使工作流程更好，您可能希望在“最佳”解决方案上投入时间。不过，对于一个面向公众的网站，我会忘记它。

# c# - 在 C# 中从列表框中获取值到标签

> ID：12241946
> 
> 赞同：0
> 
> 时间：2012-09-03T04:22:14.880
> 
> 标签：c#, sql-server-2008

> **可能重复：**
> [在 C# 中从查询中获取值到标签](https://stackoverflow.com/questions/12243118/take-value-from-query-to-label-in-c-sharp)

我是 C# 的新手

我在 Ms SQL 中有 3 个表 .. tbl_staff、tbl_logs 和 tbl_department

在 Windows 窗体中，我有一个列表框和两个标签。列表框将在 tbl_logs 中显示用户 ID。

当用户从列表框中选择时，标签将改变一个值并以相同的形式显示名称和部门。

问题是，如何根据查询将列表框中的值粘贴到标签？

这是我的 SQL 查询

```
SELECT tbl_staff.userID, tbl_staff.staffName,tbl_department.department FROM tbl_staff,tbl_logs,tbl_department WHERE tbl_staff.userID = tbl_logs.userID and tbl_staff.idDepartment = tbl_department.idDepartment; 
```

如何在 c# 中执行并将值粘贴到标签？以下是我当前的代码

```
SqlConnection openCon = new SqlConnection(connString);

                openCon.Open();

                SqlCommand queryChangeName = new SqlCommand();

                int index = listStaff.SelectedIndex;

                DataSet ds = new DataSet();

                ds.Clear();

                SqlDataAdapter adapter = new SqlDataAdapter("SELECT tbl_staff.userID, tbl_staff.staffName,tbl_department.department FROM tbl_staff,tbl_logs,tbl_department WHERE tbl_staff.userID = tbl_logs." + listStaff.SelectedValue + " and tbl_staff.idDepartment = tbl_department.idDepartment";", openCon); 
```

我没有任何想法可做，希望有人可以帮助我解决这个问题。抱歉英语不好。

非常感谢 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T04:28:58.077

您的代码现在所做的只是填充数据库。也许您应该在这里查看[Start To Windows Form](http://windowsclient.net/getstarted/)希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T04:26:28.500

最好在开始时将数据集（包括员工 ID、姓名和部门）初始加载到本地`DataTable`.

然后使用它来填充您的下拉菜单。然后，当您从列表框中选择索引时，您可以参考您的本地 DataTable，以获取关联的名称和部门。

# asp.net - MVC 3 ViewModel 创建方法模型

> ID：12241951
> 
> 赞同：0
> 
> 时间：2012-09-03T04:23:24.530
> 
> 标签：asp.net, asp.net-mvc

我遇到了一个真正的问题，我知道这是因为我知道的不够多。我已经搜索了大约 50 篇文章，但找不到答案。

这是我的域模型

```
Namespace Models
    Public Class Article
        Public Property ArticleId As Integer
        Public Property Author As String

        <DisplayFormat(DataFormatString:="{0:D}")>
        Public Property CreatedOn As DateTime

        <DisplayFormat(DataFormatString:="{0:D}")>
        Public Property LastModified As DateTime

        <AllowHtml()>
        Public Property Content As String
        Public Property Title As String
        Public Property Excerpt As String
        Public Property IsPublic As Boolean

        Public Overridable Property Category As ICollection(Of Category)
        Public Overridable Property Tags As ICollection(Of Tag)
        Public Overridable Property Status As ICollection(Of Status)
        Public Overridable Property Comments As ICollection(Of Comment)
    End Class
End Namespace

Namespace Models
    Public Class Status
        Public Property StatusId As Integer
        Public Property Name As String

        Public Overridable Property Articles As ICollection(Of Article)
    End Class
End Namespace

Namespace Models
    Public Class Category
        Public Property CategoryId As Integer
        Public Property Name As String

        Public Overridable Property Articles As ICollection(Of Article)
    End Class
End Namespace

Namespace Models
    Public Class Tag
        Public Property TagId As Integer
        Public Property Name As String

        Public Overridable Property Articles As ICollection(Of Article)
    End Class
End Namespace 
```

这是我的 ViewModel（基于我的域模型）

```
Namespace ViewModels.Admin
    Public Class ArticleViewModel
        Public Property Article As Article
        Public Property CategoryId As Integer
        Public Property StatusId As Integer
        Public Property Tags As ICollection(Of Tag)
    End Class
End Namespace 
```

我不知道如何保存所有这些数据交叉模式。我现在尝试了很多方法，我不知道在哪里看。我已经尝试了几本书，但没有人真正深入研究这一点。我还查看了 Contoso 大学项目，但它似乎不像我的项目。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:10:42.390

如果您使用实体框架来执行您的 DAL，您可以很容易地做到这一点。只需从上到下构建对象。因此，在您的示例中，从 ViewModel 获取文章并从 View Model 的其他部分填充其导航属性。

不要担心连接子对象的导航属性。

然后，您可以使用文章集合上的 AddObject 将这篇文章添加到上下文中，并且所有子属性也应该插入并连接起来。

当心 Db 中可能已经存在的子属性，我看到 EF 会在这些项目上插入，即使它们有 Id，而不仅仅是更新映射表等。

# java - 如何在Android中将字符转换为布尔二维数组？

> ID：12241953
> 
> 赞同：0
> 
> 时间：2012-09-03T04:23:26.983
> 
> 标签：java, android, boolean, type-conversion

我正在做一个需要在 Android 中将字符转换为二维数组的项目。例如，如果我有字符（或字符串）“A”，我必须创建一个二维数组，如下所示：

```
[0,0,1,0,0]   
[0,1,0,1,0]    
[0,1,0,1,0]    
[1,0,0,0,1]    
[1,1,1,1,1]    
[1,0,0,0,1]    
[0,0,0,0,0] 
```

图形化：

![在此处输入图像描述](../Images/28e31775a87f48a2012399f2f675c1df.png)

我该如何处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T04:35:05.420

您可以尝试以下方法：

```
String str = "ABC";
List<byte[][]> codedString = new ArrayList<byte[][]>();

for ( char c : str.toCharArray() ) {

    switch ( c ) {

        case 'A':
            codedString.add( new byte[][]{
                { 0, 0, 1, 0, 0 },
                { 0, 1, 0, 1, 0 },
                { 0, 1, 0, 1, 0 },
                { 1, 0, 0, 0, 1 },
                { 1, 1, 1, 1, 1 },
                { 1, 0, 0, 0, 1 },
                { 0, 0, 0, 0, 0 } } );
            break;

        case 'B':
            codedString.add( new byte[][]{
                { 1, 1, 1, 1, 0 },
                { 1, 0, 0, 0, 1 },
                { 1, 0, 0, 0, 1 },
                { 1, 1, 1, 1, 0 },
                { 1, 0, 0, 0, 1 },
                { 1, 0, 0, 0, 1 },
                { 1, 1, 1, 1, 0 } } );
            break;

        case 'C':
            codedString.add( new byte[][]{
                { 0, 1, 1, 1, 0 },
                { 1, 0, 0, 0, 1 },
                { 1, 0, 0, 0, 0 },
                { 1, 0, 0, 0, 0 },
                { 1, 0, 0, 0, 0 },
                { 1, 0, 0, 0, 1 },
                { 0, 1, 1, 1, 0 } } );
            break;

    }

}

for ( byte[][] codedChar : codedString ) {
    for ( int i = 0; i < codedChar.length; i++ ) {
        for ( int j = 0; j < codedChar[i].length; j++ ) {
            System.out.print( codedChar[i][j] == 1 ? "X" : " " );
        }
        System.out.println();
    }
} 
```

您将需要对所有模式进行硬编码。

**编辑：**我将代码更改为使用零和一来表示模式。它比使用布尔值更容易阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T04:40:34.437

如果我的问题是正确的，那么您正试图在 5x7 像素网格中表示每个字符。一种方法是将所有字符（“A”到“Z”以及更多，如果你愿意的话）表示存储在一个硬编码的映射中，并在必要时返回/访问它们。

# search - 修复 Solr 搜索结果顺序问题，与搜索两个词短语有关

> ID：12241956
> 
> 赞同：0
> 
> 时间：2012-09-03T04:23:52.773
> 
> 标签：search, solr

对于 Solr 搜索结果，我正在为搜索字符串的搜索词重要性而苦苦挣扎。

当我搜索“xperia go”时（注意购物车没有该产品，所以结果要么是 xperia 中的其他产品，要么是 go 或两者都出现在名称中），搜索结果中出现的产品是那些有 go以他们的名义，然后在他们中的几个 appx 之后。在这些产品的末尾，会出现其他名称中带有 xperia 的产品。

当我搜索“go xperia”时，名称中带有 xperia 的产品出现得比名称中带有 go 的产品更早。

所以 solr 更重视第二个词而不是第一个词。我只是想让结果颠倒过来。因此，当我搜索 xperia go 时，它应该在顶部显示名称中带有 xperia 的产品，然后显示名称中带有 go 的产品。

我试图找出可能是什么问题，但无法找到导致此问题的原因。我敢肯定这只是一个与配置相关的小事情。我正在寻找有关如何解决它的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T20:38:42.870

那么请尝试像这样构建您的查询：

```
xperia^2 go 
```

我还没有使用它，所以如果这不起作用，请尝试

```
yourField:xperia^2 yourField:go 
```

使用术语中的 ^2，您将提升搜索词并为其提供更高的“分数”。所以这将首先显示。也许这个网站会帮助你：[http](http://wiki.apache.org/solr/SolrRelevancyFAQ#How_can_I_make_.22superman.22_in_the_title_field_score_higher_than_in_the_subject_field) ://wiki.apache.org/solr/SolrRelevancyFAQ#How_can_I_make_.22superman.22_in_the_title_field_score_higher_than_in_the_subject_field 以下主题可能也很有趣。

# android - asmack 没有收到多用户聊天请求

> ID：12241958
> 
> 赞同：3
> 
> 时间：2012-09-03T04:24:40.307
> 
> 标签：android, xmpp, asmack

我正在使用 asmack 库，并且面临多用户聊天请求的问题。

发送会议请求时，它不会进入邀请侦听器，尽管相同的代码正在使用 java 中的 smack 库。

在调试时它显示我正在接收消息，但没有在监听器中提供我。

如果你们中的任何人都可以帮助我，或者至少告诉我如何解析我在数据包侦听器中收到的消息。

以下是消息：

```
<message from="user1_a1c@conference.server" to="user2@server">
<x xmlns="http://jabber.org/protocol/muc#user">
    <invite from="user1@server">
        <reason>Please join me in a conference</reason>
    </invite>
</x>
<x xmlns="jabber:x:conference" jid="user1_a1c@conference.server"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T17:54:04.290

听起来相应的 Providers 没有初始化。

aSmack 的[自述文件](https://github.com/Flowdalic/asmack/blob/master/README.markdown)确实告诉您初始化 smack 的静态代码，这将初始化提供程序。您是否在执行任何 XMPP 相关操作之前运行了代码？

# python - 如何编写一个通过gdb调试子进程的自动化工具

> ID：12241960
> 
> 赞同：3
> 
> 时间：2012-09-03T04:24:57.190
> 
> 标签：python, c, debugging, gdb, interactive

我在 python 中有一个脚本，它产生了一个我想在 gdb 中调试的新进程。通常我会做通常的过程来调试这个子进程。将睡眠置于此进程中，直到某些条件为真，然后通过此进程的 pid 在另一个会话中附加 gdb，放置一些断点并使条件为真，以便它在睡眠后继续。

我想以自动方式执行此操作，例如 python 脚本本身会产生一个新的 gdb 进程并给我一个 gdb 提示符？我对诅咒有点了解，所以我可以用它做点什么。但主要问题是如何在 python 中生成交互式进程（此处为 gdb）以及如何向用户提供 gdb 提示，我不太清楚。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T06:40:47.400

在这种情况下，可以使用 Expect 或 pexpect python 库来执行此操作。

下面的简单 pexpect 用法示例：

```
import pexpect
child = pexpect.spawn("mc")
child.interact() # will return when mc finish 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T16:47:34.843

如果您从终端以交互方式运行 python 进程，只需正常运行“gdb”（例如使用`os.system()`）作为 python 进程的子进程。它将继承终端并接管 stdio，就像它从 shell 运行一样。（如果您没有以交互方式运行它，则需要解释“给我一个 gdb 提示符”的确切含义）。

此外，如果您知道将来要调试该进程，那么最好首先在 gdb 下生成该进程，而不是让它在正确的位置停止并附加它。

# jquery - Jquery HTML .load() 进一步参与 jquery

> ID：12241961
> 
> 赞同：0
> 
> 时间：2012-09-03T04:25:25.927
> 
> 标签：jquery

所以我使用 .load 来显示输出数据的 php 文件中的一些信息。我想使用 .load 以便我可以偶尔或在特定操作时刷新这些数据。不幸的是，这会影响我网站的其他部分。有一个按钮被输出，jquery 通常会拦截该按钮。虽然现在我无法选择该类，因为由于使用了.load，它似乎不在我的源代码中。

我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T04:27:49.940

据我了解，您需要使用 jquery [on()](http://api.jquery.com/on/)在您的按钮上设置点击事件。不是您的按钮不存在，而是它被重新创建。因此，除非您使用 on() 进行设置，否则您的初始选择器将不起作用。您的代码将如下所示：

```
$('.fRequest').on("click", ".friendConfirm", function () {

}); 
```

上面的代码会在页面上找到一个静态元素（最好是动态加载内容的父元素），并会寻找第二个参数中指定的类的所有元素。然后它将在第一个参数中找到的指定事件附加到所有找到的元素，即使它们是在初始 pageLoad 之后创建的。

请注意，jQuery [on()](http://api.jquery.com/on/)适用于 jquery 1.7.1 或更高版本。如果您使用的是早期版本，则可能需要使用[live()](http://api.jquery.com/live/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T04:29:20.797

如果它在页面上仍然可见，则 jQuery 应该能够与之交互 - 我使用 jQuery 来更改加载到文档中的元素，该元素一直加载*到*文档中。

我认为可能会发生两件事：您的 PHP 脚本正在生成的按钮的新副本与您的 jQuery 选择器所依赖的 ID/类/等不同，或者您正在按 ID 选择并且您的更新过程导致呈现多个具有相同 ID 的按钮，这将不起作用。

# jquery - jQuery验证混淆

> ID：12241964
> 
> 赞同：1
> 
> 时间：2012-09-03T04:25:35.970
> 
> 标签：jquery, validation

我在让 jQuery bassassistance 验证插件工作时遇到了一点问题。首先，我将向您指出正在开发的相关站点。[开发现场](http://www.mysunlight.cc/home.php?a=kindergarten&name=fuan_kindy)。我是中国的一名 ESL 老师，所以该网站是中文的，以便解决问题：

*   页面左上角有两个按钮，点击第一个
*   ajax 请求完成后，将弹出一个带有登录表单的模式对话框

麻烦就在这里。简而言之，我无法让验证插件正常工作。已经定义了一些额外的验证方法，firebug 告诉我它们已加载到对象中。即使我设置规则来查找所需的内容，它仍然不会返回任何内容，甚至不会返回错误。我可以使用控制台调用 validate 并且它确实有效，但同样，除了返回对象之外没有任何反馈。这个问题真的让我摸不着头脑

操作流程的简化时间表如下：

1.  调用页面时，会设置一个类型，在本例中为 form
2.  向返回 xml 的服务器发出请求
3.  任何额外的样式表和脚本文件都会被下载并注入到 head 中。＃作品＃
4.  验证规则位于我的 pagecontroller 类中以 json 形式存储的 xml 节点中。帖子末尾的示例。此响应是浏览器安全的，当前转换为对象
5.  在弹出对话框并注入表单后，调用了一个名为 formentities attach 的函数#works#
6.  该函数的最后一部分是将验证函数附加到表单，它使用从服务器发回的规则

    ```
    /* Attach validation to the button class used for submit*/
    $(".form-submit").live("click", function(event){
       event.preventDefault();
       event.stopImmediatePropagation();
       /* Perform the actual validation */
       $("#"+params.strFormName).validate({
          /* As defined from ajax call */
          rules: params.objValidation,
          /* Custom function to prevent default send */
          submitHandler: function(form) {
             /* Now the form has passed script validation, set it as inactive */
             var strFormName = form.id;
             params.strRequestType = "formresponse";
             params.strRequestMethod = "POST";
             params.strRequestURL = $("#"+strFormName).attr("action") + '&ajax_type=formresponse'; 
             params.strRequestParameters = $("#"+strFormName).serialize();
             methods.requestpage();
          }
       });                  
    }); 
    ```

任何指针将不胜感激。感谢您阅读这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T04:42:18.393

如果您重新排序代码然后调用该`valid`方法怎么办？

```
// You need to create the validation object first and initialize it.
$("#"+params.strFormName).validate({ // This method doesn't "validate" it instantiates.
      /* As defined from ajax call */
      rules: params.objValidation,
      /* Custom function to prevent default send */
      submitHandler: function(form) {
         /* Now the form has passed script validation, set it as inactive */
         var strFormName = form.id;
         params.strRequestType = "formresponse";
         params.strRequestMethod = "POST";
         params.strRequestURL = $("#"+strFormName).attr("action") + '&ajax_type=formresponse'; 
         params.strRequestParameters = $("#"+strFormName).serialize();
         methods.requestpage();
      }
   });                  

/* Attach validation to the button class used for submit*/
$(".form-submit").live("click", function(event){
   event.preventDefault();
   event.stopImmediatePropagation();
   /* Perform the actual validation */
   $("#"+params.strFormName).valid(); // Call the valid method here to see check if form is valid
}); 
```

一点[文档](http://docs.jquery.com/Plugins/Validation/valid)永远不会受到伤害。

# install4j - 如何更改我想要的初始目录？

> ID：12241966
> 
> 赞同：0
> 
> 时间：2012-09-03T04:25:36.383
> 
> 标签：install4j

我添加了“配置表单组件”。然后我添加了“安装目录选择器”。

当我单击初始化脚本中的“搜索”按钮时，我想更改初始目录。它是“我的文档”的默认设置。 ![在此处输入图像描述](../Images/6798a935d426e7a6664a2d3bc8cc9261.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:54:53.357

初始安装目录可以设置为

```
context.setInstallationDirectory(...) 
```

在屏幕显示之前，例如在安装程序的“启动”节点中的“运行脚本”操作中。“安装目录选择器”表单组件的目录选择器首先显示当前安装目录的父目录。

# linear-algebra - 找到具有不同方向的任何向量的最简单方法

> ID：12241969
> 
> 赞同：1
> 
> 时间：2012-09-03T04:25:57.787
> 
> 标签：linear-algebra, vectormath

获取输入向量（给定为 (x,y,z)）并找到一些与它不同方向的新向量的最简单方法是什么？任何方向都可以，它必须是与输入不同的方向（除了完全相反的方向，这是微不足道的）。

似乎应该有一个不涉及分支的简单解决方案，但我似乎找不到一个，但经过一番之后，我很想知道是否真的有一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:49:08.473

我不确定这有多简单，但假设 (x,y,z) 的长度为 L（不是 0），下面的向量长度为​​ 1 并且与 (x,y,z) 成直角

```
-y * (x + sign(x)*L) / (L*(L+|x|))
1 - y * y / (L*(L+|x|))
-y * z / (L*(L+|x|)) 
```

（这里 |x| 是 x 的绝对值，如果 x<0，sign(x) 为 -1，如果 x >= 0，则为 1）

[我通过计算将 (x,y,z) 映射到 (1,0,0) 的倍数的户主反射（例如http://en.wikipedia.org/wiki/Householder_transformation](http://en.wikipedia.org/wiki/Householder_transformation) ）推导出这个公式 ，然后计算图像在这个矩阵下的（0,1,0）；由于矩阵既是正交的又是对称的，这个向量将与 (x,y,z) 正交。

没有连续函数 (x,y,z) -> (x',y',z') (for (x,y,z) != (0,0,0)) 使得 (x',y ',z') 绝不是 (x,y,z) 的倍数；如果有，您可以从 (x',y',z') 中删除其在 (x,y,z) 方向上的分量，从而获得连续映射 (x,y,z)->(x'',y '',z'') 其中 (x'',y'',z'') 与 (x,y,z) 成直角，但根据[毛球定理](http://en.wikipedia.org/wiki/Hairy_ball_theorem)，你不能。

在上面的公式中，不连续符号函数的出现使得公式不连续。请注意，符号不必涉及分支；在某些语言中，有一个内置函数可以做到这一点；在 C 中你可以使用 2*(x>=0)-1。

# sql - 如何按指定的年份和月份范围进行分组？

> ID：12241972
> 
> 赞同：0
> 
> 时间：2012-09-03T04:26:25.993
> 
> 标签：sql, oracle, plsql, report, procedure

我有来自两个表的一系列产品的大量数据，我想根据当前日期在指定的日期范围内显示这些数据，并按功能分组。数据范围为：

假设今天的日期是 03/09/2012 (DD/MM/YYYY)

```
--Product 1--
Everything 5 years ago 'Before 2007'  {field1}   {field2}   {field3} 
4 years ago          '2008' 
3 years ago          '2009' 
2 years ago          '2010' 
1 year by month      'Jan 2011' 
'Feb 2011' 
'Mar 2011 
.... 
.... 
'Dec 2011' 
Sum of 1 year ago    '2011' 
This year by month   'Jan 2012' 
'Feb 2012' 
'Mar 2012' 
.... 
....
'Sept 2012' 
Sum of this year '2012' 
```

这个sql的性能很重要。到目前为止，我得到了一个 sql，它可以按年或月对每个产品进行进一步分组，但不是按上述顺序。我正在考虑使用 NVL、CASE 和许多嵌套的 sql，但任何人都可以想出一个可以获得良好性能的解决方案吗？

```
 SELECT EXTRACT (YEAR FROM {DATE}) "YEAR", EXTRACT (MONTH FROM {DATE}) "MONTH", SUM({field1}) as A, SUM({field 2}) as B ,COUNT(1) as {field 3}
    FROM (
            SELECT {Field A}, DECODE({Field Key1}, NULL, 0, 1) {field 1}, DECODE({field B}, NULL, 1, 0)  {field2}, {Field Key2}
            FROM {table A}, (
                    SELECT {field key2}
                    FROM {table B}
                    WHERE {conditions} B  
            WHERE A.KEY= B.KEY(+)
    )
    where {conditions}
    GROUP BY EXTRACT (YEAR FROM {DATE}) , EXTRACT (MONTH FROM {DATE}) 
  ) DATASET 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:31:54.020

我有点不清楚你在努力解决哪个部分，或者为什么你提到许多嵌套的 SQL。没有任何样本数据，我不得不编造一些：

```
create table t42 (my_date date, my_value number);

insert into t42 values (date '2006-01-31', 0601);
insert into t42 values (date '2006-12-31', 0612);
insert into t42 values (date '2007-01-31', 0701);
insert into t42 values (date '2007-12-31', 0712);
insert into t42 values (date '2008-01-31', 0801);
insert into t42 values (date '2008-12-31', 0812);
insert into t42 values (date '2009-01-31', 0901);
insert into t42 values (date '2009-12-31', 0912);
insert into t42 values (date '2010-01-31', 1001);
insert into t42 values (date '2010-12-31', 1012);
insert into t42 values (date '2011-01-31', 1101);
insert into t42 values (date '2011-12-31', 1112);
insert into t42 values (date '2012-01-31', 1201);
insert into t42 values (date '2012-02-29', 1202);
insert into t42 values (date '2012-03-31', 1203);
insert into t42 values (date '2012-04-30', 1204);
insert into t42 values (date '2012-05-31', 1205); 
```

然后，您可以使用内部查询为期间/年/月生成“标签”，并使用虚拟字段对结果进行排序，加上您实际感兴趣的值。然后使用外部查询来执行任何操作`sum`，`count`等等.

```
select label, sum(my_value), count(1)
from
(
    select
        case when my_date < trunc(sysdate, 'YYYY') - interval '4' year then
                'Before ' || to_char(trunc(sysdate, 'YYYY')
                - interval '5' year, 'YYYY')
            when my_date < trunc(sysdate, 'YYYY') - interval '1' year then
                to_char(my_date, 'YYYY')
            else to_char(my_date, 'Mon YYYY')
        end as label,
        case when my_date < trunc(sysdate, 'YYYY') - interval '4' year then
                to_char(trunc(sysdate, 'YYYY') - interval '5' year, 'YYYYMM')
            when my_date < trunc(sysdate, 'YYYY') - interval '1' year then
                to_char(my_date, 'YYYY') || '01'
            else to_char(my_date, 'YYYYMM')
        end as order_field,
        my_value
    from t42
)
group by label, order_field
order by order_field; 
```

我`trunc(sysdate, 'YYYY')`用来查找当前年份的开始，然后`interval`用于返回五年，并根据这些“桶”生成`label`和`order_field`伪列。像这样使用`case`让我有不同的桶——一个用于超过五年的所有东西，一个用于直到去年的每一年，一个用于从那以后的每个月。

```
LABEL             SUM(MY_VALUE)   COUNT(1)
----------------- ------------- ----------
Before 2007                2626          4
2008                       1613          2
2009                       1813          2
2010                       2013          2
Jan 2011                   1101          1
Dec 2011                   1112          1
Jan 2012                   1201          1
Feb 2012                   1202          1
Mar 2012                   1203          1
Apr 2012                   1204          1
May 2012                   1205          1 
```

我只打了一次表，所以性能应该取决于你如何提取原始数据（你的连接和条件），而不是你如何操作它。显然，您可以用`t42`两个表之间的当前连接替换，并提取您感兴趣的字段。

我建议您切换到 ANSI 连接语法，而不是 Oracle`(+)`用于外部连接的旧表示法。这不涉及任何没有任何数据的年份或月份，但您的原始大纲也没有，所以这可能不是问题。您如何产生或至少显示“年度总和”值可能取决于您的客户。

* * *

将标签生成分离到一个视图中以使其可重用并允许您查找没有数据的时段：

```
create or replace view v42 (period_label, period_order, period_start, period_end)
as
select 'Before ' || to_char(trunc(sysdate, 'YYYY') - interval '5' year, 'YYYY'),
    '197001',
    date '1970-01-01',
    trunc(sysdate, 'YYYY') - interval '4' year  - interval '1' second
from dual
union
select to_char(year_start, 'YYYY'),
    to_char(year_start, 'YYYY') || '01',
    year_start,
    year_start + interval '1' year - interval '1' second
from (
    select add_months(trunc(sysdate, 'YYYY'), - 12 * (level + 1)) as year_start
    from dual connect by level <= 3
)
union
select to_char(month_start, 'Mon YYYY'),
    to_char(month_start, 'YYYYMM'),
    month_start,
    month_start + interval '1' month - interval '1' second
from (
    select add_months(trunc(sysdate, 'MM'), 1 - level) as month_start
    from dual connect by level <= 12 + to_number(to_char(sysdate, 'MM'))
); 
```

这是为了生产您最初拥有的标签；如果您希望单独显示所有年份，请删除 的第一部分`union`，您可以调整`connect by`条款以改变按月显示的年份。（您可以对其进行参数化，但这可能有点远）。

你有三类“桶”，一类是按月分类，一类是按年分类，然后是对过去太远的东西的统称；联合的每个部分都针对其中一个部分，为每个类中的所有存储桶生成周期开始和结束日期，以及标签和稍后订购的东西。查看视图，也许每个`select`单独的视图，看看他们在做什么。

然后将该视图加入您的数据表或表；如果要显示没有匹配数据的标签，请使用左外连接：

```
select v.period_label, nvl(sum(t.my_value), 0), count(t.my_value)
from v42 v
left join t42 t on t.my_date between v.period_start and v.period_end
group by v.period_label, v.period_order
order by v.period_order;

PERIOD_LABEL      NVL(SUM(T.MY_VALUE),0) COUNT(T.MY_VALUE)
----------------- ---------------------- -----------------
Before 2007                         2626                 4
2008                                1613                 2
2009                                1813                 2
2010                                2013                 2
Jan 2011                            1101                 1
Feb 2011                               0                 0
...
Nov 2011                               0                 0
Dec 2011                            1112                 1
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T05:54:34.637

```
select * from (
  select t.*
         ,case 
            when extract(YEAR FROM t.date) < 2007
              then 0
            else
              extract(YEAR FROM t.date)
          end as nYear
         ,case
            when extract(YEAR FROM t.date) < 2007
              then 0
            else
              extract(MONTH FROM t.date)
          end as nMonth       
  from table_name t
)d
group by d.nYear, d.nMonth 
```

# perl - 替换文件中的一行将替换它下面的行。Perl

> ID：12241974
> 
> 赞同：0
> 
> 时间：2012-09-03T04:26:28.380
> 
> 标签：perl, file-io

我有一个文件处理程序，我正在寻找行中的匹配项并用新行替换匹配项。替换行发生在子例程中。

```
sub replace{
   seek(FILE,0,0);
   while(my $line= <FILE>){
       if($line =~ m/SOMEMATCH/){
            $line=~ s/SOMEMATCH/REPLACEMENT/;
            print FILE $line;
       }
    } 
} 
```

当我在调用 &replace 后打印文件时，我发现错误的行被改变了，所以：

```
Line 1
Line 2
Line 3
SOMEMATCH
Line 4
Line 5 
```

变成：

```
Line 1
Line 2
Line 3
SOMEMATCH
REPLACEMENT
Line 5 
```

这是怎么回事？我如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T04:41:21.263

我不认为您可以读取文本文件并用更长或更短的字符串替换其中的部分内容并获得您想要的结果。较长的新字符串必须覆盖某些数据，否则如果字符串较短，则会留下“洞”。如果字符串恰好是相同的长度，您的逻辑仍然有问题 - 替换字符串需要您备份，因为您在阅读后超过了要替换的字符串。在该点写入替换应该覆盖下一行，因为这是文件“指针”当前设置为准备读取下一行的位置。

我认为这样的事情最好通过单独的输出文件来完成。读取一个，写入另一个，如有必要，删除第一个并重命名第二个。

或者您可以将整个文件读入一个数组，进行字符串替换，关闭并重新打开文件以进行覆盖，然后将数组写回文件，然后关闭文件。

# asp.net - 在 ASP.NET 中获取引用页面的 URL

> ID：12241976
> 
> 赞同：3
> 
> 时间：2012-09-03T04:27:10.497
> 
> 标签：asp.net, http-referer, user-management

我正在开发一个 ASP.NET 项目，目前正在做一些事情。基本上，我有三个不同级别的用户 1\. Admin 2\. DMV 3\. Caller

所有用户都有各自的目录，可以根据自己的权限访问目录中的资源。当有人想要登录应用程序时，他必须使用根目录中存在的相同 login.aspx 页面，并且一旦登录，他将根据他的身份被重定向到相应文件夹的主页特权。

在我的应用程序中，有时当会话不情愿地关闭时，用户被重定向到登录页面，或者他知道页面的完整 url，只想快速登录并使用作为查询传递的“Redirect_URL”变量进入该页面弦，他做不到。在这里，当他登录时，他会被重定向到他的主页，这将使他再次执行许多操作以到达他所在的页面。

因此，我需要 login.aspx 页面来检查引用页面的 URL，将其存储在查询字符串中，例如使用 HTTP_REFERER 之类的“Redirect_url”，一旦用户成功登录，他就会被重定向到页面，出现在“Redirect_url”变量。

我还在某处寻找了 Global.asax 解决方案，但就我而言，我认为上述逻辑效果最好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T04:30:09.370

两件事情：

首先：为了快速解决，只需使用`Request.ServerVariables["HTTP_REFERER"]`or`Request.UrlReferrer`获取 HTTP Referrer 标头值。

第二：使用 ASP.NET 内置的 Forms 身份验证类，它们可以为您执行重定向（和查询字符串重定向到）管理。

# visual-studio-2012 - LightSwitch - VS 2012 中的模板错误

> ID：12241977
> 
> 赞同：1
> 
> 时间：2012-09-03T04:27:12.420
> 
> 标签：visual-studio-2012, visual-studio-lightswitch

我在 VS 2012 中探索 LightSwitch。我设法根据一些在线教程创建了几个示例应用程序。当我今天尝试打开 VS 并再次创建示例应用程序时出现错误。

错误 ![在此处输入图像描述](../Images/9ede47d0425d5920639c56300a91bd03.png) 请帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T15:03:32.343

有同样的问题，这个线程解决方案对我有用：

[http://social.msdn.microsoft.com/Forums/vstudio/en-US/0d9963b7-6bed-42ce-a054-c8c5c998aef6/error-this-template-attempted-to-load-component-assembly](http://social.msdn.microsoft.com/Forums/vstudio/en-US/0d9963b7-6bed-42ce-a054-c8c5c998aef6/error-this-template-attempted-to-load-component-assembly)

Robert Schoen 的响应指向导致此错误的注册表项。将 Computer\HKEY_CLASSES_ROOT.lsproj 的值从“VisualStudio.Launcher.lsproj.10.0”更改为“VisualStudio.Launcher.lsproj.11.0”解决了这个问题，虽然看起来它可能会被 LS2011 设置改回来，但更改此注册表项很多比修复 VS2012 安装更快。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-04T01:09:42.057

你有没有在你的机器上安装任何其他程序？

您可以尝试修复 VS 2012。

# javascript - Javascript将数组转换为字符串并使其反向输出

> ID：12241979
> 
> 赞同：0
> 
> 时间：2012-09-03T04:27:19.640
> 
> 标签：javascript, arrays, string, reverse

当我在下面编写代码时，所有内容都按预期在输出上反转。

```
var sequence = "kick snare hat openHat";
var sequenceBackwards = sequence.split('').reverse().join('');
document.write(sequenceBackwards); 
```

但是，当我有一个数组时，然后将其转换为字符串，然后执行相同的过程，它不起作用。

```
var sequence = ["kick","snare", "hat","openHat"];
sequence.toString();
var sequenceBackwards = sequence.split('').reverse().join('');
document.write(sequenceBackwards); 
```

我想确切地知道为什么这不起作用，以及一个可行的替代示例。

当我为 sequenceBackwards 执行“typeof”时，它不会返回字符串。它返回的对象告诉我在假定的“转换”之后它仍然是一个数组。我对此有点困惑。

我不是为了一个我很好奇并且已经研究了一个小时的项目而这样做的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T04:30:52.103

此行不会更改`sequence`变量，它只是`returns`字符串：

`sequence.toString();`

`["kick", "snare", "hat", "openHat"].toString()`提供`"kick,snare,hat,openHat"`. 所以这不是你要找的。

利用

```
var sequence = ["kick", "snare", "hat", "openHat"];
var sequenceBackwards = sequence.join(' ').split('').reverse().join('');
document.write(sequenceBackwards); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T04:35:43.813

`sequence`这对变量没有任何作用：

```
var sequence = ["kick","snare", "hat","openHat"];
sequence.toString(); 
```

您需要重新分配它：

```
sequence = sequence.toString(); 
```

但`Array.toString`返回逗号分隔的值，但您可以使用`sequence.join(' ')`空格连接值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T04:29:47.037

数组有`.reverse`方法。

```
var sequence = ["kick","snare", "hat","openHat"];
sequence.reverse(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T04:29:49.310

您遇到不同行为的原因是因为`toString`调用通过逗号而不是空格将每个元素连接在一起。这段代码：

```
var sequence = ["kick","snare", "hat","openHat"];
sequence.toString(); 
```

返回以下内容：

> 踢，圈套，帽子，openHat

您可以改用它：

```
sequence.join(' '); 
```

# mysql - 如何在 MySQL 中设计医院 RDBMS？

> ID：12241982
> 
> 赞同：1
> 
> 时间：2012-09-03T04:27:58.137
> 
> 标签：mysql, rdbms

我曾经使用过这样的 MySQL 和数据库设计。

![医院 rdbms 设计](../Images/b691ac0c729d0a0d2395daa4486c65da.png)

该数据库是为医院设计的。在患者表中有超过 1.500.000 条患者记录。在临床表中有 15 条记录。在医生表中有 25 条记录。在诊断表中有超过 500 条记录。在 out_condition 表中有 10 条记录。

并且所有要在表 transaction_current 中关联的表。完成后，事务移至历史表。

这是一个糟糕的设计吗？因为在查询选择中，需要一分钟以上才能让一名患者处于浏览模式。如果这是最好的关系设计，我应该如何使用包含所有关系表引用的事务表的选择查询。

谢谢你的帮助。

编辑：“对不起......我的形象设计在哪里？只有我的borwser吗？......”

这是示例选择查询

```
select  transaction_current.registration_number, 
        transaction_current.Date_registration, 
        patient.mr_code, 
        patient.patient_name,
        clinic.Poly_clinic_name, 
        doctor.doctor_name, 
        diagnose.diagnose_name,
        out_condition.OC_name
from transaction_current,patient, clinic, doctor, diagnose, out_condition
where   transaction_current.patient_code=patient.MR_code and 
        transaction_current.clinic_code=clinic.clinic_code and 
        transaction_current.doctor_code=doctor.doctor_code and 
        transaction_current.diagnose_code=diagnose.doagnose_code and 
        transaction_current.OC_code=Out_Condition.OC_code
        and patient.patient_name = 'xxx%' 
```

回答：经过先生的仔细回答。rj45，有时不建议进行任何规范化。尤其是历史数据。如果参考表发生变化，历史数据也会发生变化。像这样的情况……如果代码更改医生，或删除，那么记录将跟随更改历史。当它不在遗嘱中时。其极端，数据历史不会出来，因为关系代码不匹配。非常感谢@rj45

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T05:15:00.080

最好对查询应用一些优化步骤。

例如： - 在查询中适当地使用运算符 EXISTS、IN 和表连接

最好避免在 where 子句中进行过多的比较。我相信这是你有滞后的地方。您可以比较具有构建索引的字段。所以它会在查询上快得多。

PS：尽管有时存在标准化，但最好坚持使用较少标准化的形式（根据经验；））

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:11:14.093

你的桌子设计看起来不错。它已标准化，我不认为设计会出现任何性能问题。作为使用的引擎（InnoDB？）的更多细节，特定表的定义和现有索引将帮助其他人提供更多建议。

您的查询似乎加入了 4 个相当小的表和两个较大的表（`patient`和`transaction_current`）。因此，如果您已经定义了图像显示的外键并且它们被索引（以及相同数据类型的引用和引用列），则此查询应该非常快。

最可能的瓶颈是`patient_name`. 这将需要对表进行表扫描`patient`。

# c# - 如何并行和串行处理集合中的项目

> ID：12241983
> 
> 赞同：2
> 
> 时间：2012-09-03T04:28:07.530
> 
> 标签：c#, .net, multithreading, task-parallel-library

我有一个集合，其中包含要处理的元素，最多只能同时处理四个元素。在运行时，所有进程一起启动并且都进入等待状态。一次只处理四个元素。

问题是处理元素是随机选择的，因为所有线程都在等待资源释放。意味着第一个元素可以是集合中的最后一个元素。

但是，我需要处理元素以便它们在集合中。

请告诉我如何实现这一目标？

我正在使用 TPL 和 C# 4.0

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T06:25:01.913

对于并行性，总是存在定义“按顺序”的含义的问题。假设您有 100 个项目的集合。“一次按 4 个”处理它们（如您所要求的）可能意味着：

1.  松散排序：使用 4 个线程，按照原始集合的顺序发出任务。

    在这种情况下，您可以使用：

    ```
    ParallelOptions po = new ParallelOptions() { MaxDegreeOfParallelism = 4 };
    Parallel.ForEach(list.AsParallel().AsOrdered(), po,
             (item) =>
             {
                 // code
             }); 
    ```

    在不平衡任务的情况下，这将很快失去原始顺序，因为一些线程可能会在繁重的任务上落后，但任务将按顺序分配。

2.  严格排序：按 4 组的顺序处理它们，如下所示：

    ```
     0 1 2 3                
                   4 tasks
         _____________________________
                    barrier

                   4 5 6 7                
                   4 tasks
         _____________________________
                    barrier

                     etc. 
    ```

    在这种情况下，您可以使用屏障：

    ```
    Barrier b = new Barrier(4);
    ParallelOptions po = new ParallelOptions() { MaxDegreeOfParallelism = 4 };
    Parallel.ForEach(list.AsParallel().AsOrdered(), po,
        (item) =>
        {
            // code
            b.SignalAndWait();
        }); 
    ```

    尽管您必须确保任务数是 4 的倍数，否则在最后一次迭代中不会发出屏障信号。

3.  在单个任务中处理 4 项：您可以创建一个任务对象来封装原始列表的 4 项，然后`Parallel.ForEach`像第一种情况那样做一个简单的操作（即每个线程将顺序处理 4 项作为单个任务的一部分）。这将按顺序以 4 个为一组发出任务，但如果任务花费的时间过长，可能会再次导致一些线程滞后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:59:58.747

我不清楚在“随机选择元素”的情况下你到底在做什么。但是，如果您使用`Paralle.ForEach()`，那么它会尝试提高效率，因此它会以某种方式对输入序列进行分区。如果输入序列是`IList<T>`，它将使用范围分区，否则，它将使用块分区（请参阅[*PLINQ 中的块分区与范围分区*](http://blogs.msdn.com/b/pfxteam/archive/2007/12/02/6558579.aspx)）。

如果要按顺序处理项目，可以`Parallel.ForEach()`使用[自定义分区](http://msdn.microsoft.com/en-us/library/dd997411)器进行配置，它将集合划分为大小为 1 的块。

但是由于您在这里并不真正需要`Parallel.ForEach()`，因此可能更简单的解决方案是创建 4 个任务来逐个处理项目。对于同步，您可以使用[`BlockingCollection`](http://msdn.microsoft.com/en-us/library/dd267312.aspx). 就像是：

```
public static class ParallelOrdered
{
    public static void ForEach<T>(IEnumerable<T> collection, Action<T> action, int degreeOfParallelism)
    {
        var blockingCollection = new BlockingCollection<T>();
        foreach (var item in collection)
            blockingCollection.Add(item);
        blockingCollection.CompleteAdding();

        var tasks = new Task[degreeOfParallelism];
        for (int i = 0; i < degreeOfParallelism; i++)
        {
            tasks[i] = Task.Factory.StartNew(
                () =>
                {
                    foreach (var item in blockingCollection.GetConsumingEnumerable())
                        action(item);
                });
        }
        Task.WaitAll(tasks);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T06:39:48.763

这就是我完成这项任务的方式

```
public delegate void ProcessFinished(IParallelProcess process);
public interface IParallelProcess
{
    void Start();
    event ProcessFinished ProcessFinished;
}

public class ParallelProcessBasket : ConcurrentQueue<IParallelProcess>
{
    public void Put(IParallelProcess process)
    {
        base.Enqueue(process);
    }
    public IParallelProcess Get()
    {
        IParallelProcess process = null;
        base.TryDequeue(out process);
        return process;
    }
}
public class ParallelProcessor<T> where T : class
{
    private ParallelProcessBasket basket;
    private readonly int MAX_DEGREE_OF_PARALLELISM;
    private Action<T> action;
    public ParallelProcessor(int degreeOfParallelism, IEnumerable<IParallelProcess> processes, Action<T> action)
    {
        basket = new ParallelProcessBasket();
        this.action = action;
        processes.ToList().ForEach(
            (p) =>
            {
                basket.Enqueue(p);
                p.ProcessFinished += new ProcessFinished(p_ProcessFinished);
            });
        MAX_DEGREE_OF_PARALLELISM = degreeOfParallelism;
    }

    private void p_ProcessFinished(IParallelProcess process)
    {
        if (!basket.IsEmpty)
        {
            T element = basket.Get() as T;
            if (element != null)
            {
                Task.Factory.StartNew(() => action(element));
            }
        }
    }

    public void StartProcessing()
    {
        // take first level of iteration
        for (int cnt = 0; cnt < MAX_DEGREE_OF_PARALLELISM; cnt++)
        {
            if (!basket.IsEmpty)
            {
                T element = basket.Get() as T;
                if (element != null)
                {
                    Task.Factory.StartNew(() => action(element));
                }
            }
        }
    }
}
static void Main(string[] args)    
{
     ParallelProcessor<ParallelTask> pr = new ParallelProcessor<ParallelTask>(Environment.ProcessorCount, collection, (e) => e.Method1());
            pr.StartProcessing();
} 
```

谢谢..

# blogger - 将博主博客移至自定义域而不会丢失 Facebook 点赞数和 G+ plusones

> ID：12241988
> 
> 赞同：1
> 
> 时间：2012-09-03T04:28:41.867
> 
> 标签：blogger, blogspot

我最近将我的 blogspot 博客移至自定义域。虽然一切正常，但我的帖子失去了 G+ plusones 和 Facebook 点赞。Facebook 评论也是如此。（我博客的每篇文章都有 Facebook 评论社交插件）

问题在于现在 data:post.url 指向[http://mydomain.foo/post-link.html](http://mydomain.foo/post-link.html)而不是[http://blah.blogspot.com/post-link.html](http://blah.blogspot.com/post-link.html)当我查看相应小部件的模板代码（点赞、+1 按钮和 Facebook 评论）我发现正在使用 data:post.url。

我的问题是，是否有办法使用博客模板语言来定义 post.url 旧方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-26T10:23:51.630

您可以在您的博客上恢复您对 Google+ 的所有优点和评论。如果您最近将子域迁移到自定义域，则加号将需要时间重新出现，因为评论可以立即出现。

过程是；

1.  转到 Blogger 仪表板 > 模板 > 编辑 HTML
2.  单击将**小部件模板恢复为默认**选项卡。
3.  将弹出一个窗口，选中**Blog1**的框，然后单击**Revert selected widgets**
4.  现在查看博客，您可以看到您的所有评论都已恢复。

这是一个经验丰富的过程，您可以使用它来恢复 Google 以及您博客上的评论。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T06:28:18.053

据我所知，没有。

即使我在迁移时也遇到了同样的问题。

现在是继续前进的时候了。从长远来看，在您的新博客中为 fb、g+ 计数器提供上一篇博客的 url 以及新帖子是不可行的。

此外，如果您保留旧的 G+ 计数器，所有 SEO 等宝贵的资源都会链接到您的旧博客而不是新博客。

# maven - Jetty 通过 maven 正确运行，但作为 jar 不正确

> ID：12241989
> 
> 赞同：1
> 
> 时间：2012-09-03T04:28:52.713
> 
> 标签：maven, maven-2, jetty, spring-roo

（如果我的标题具有误导性/不正确，请提出更具描述性的内容，这是我能想到的最好的）

我已经使用 spring roo 创建了自己的 Web 应用程序，但尚未编辑任何代码。我正在使用 maven 和 jetty 构建和运行 Web 应用程序。当我执行以下一切工作正常。

```
mvn jetty:run 
```

但是当我打包然后直接运行jar时，我遇到了一些奇怪的问题。

```
mvn package
java -jar target/dependency/jetty-runner.jar target/*.war 
```

（与“mvn jetty:run-exploded”相同）

主页按原样加载，但是当我单击其中一个导航链接（以创建或列出我的模型）时，我最终将这些错误打印到浏览器（http://localhost:8080/pages/main.jsf）

```
HTTP ERROR 500

Problem accessing /pages/main.jsf. Reason:

/pages/nameMeaning.xhtml @25,80 value="#{applicationBean.getColumnName(column)}" Error Parsing: #{applicationBean.getColumnName(column)}
Caused by:

javax.faces.view.facelets.TagAttributeException: /pages/nameMeaning.xhtml @25,80 value="#{applicationBean.getColumnName(column)}" Error Parsing: #{applicationBean.getColumnName(column)}
at com.sun.faces.facelets.tag.TagAttributeImpl.getValueExpression(TagAttributeImpl.java:401)
at com.sun.faces.facelets.tag.TagAttributeImpl.getValueExpression(TagAttributeImpl.java:351)
at com.sun.faces.facelets.tag.jsf.ValueHolderRule$DynamicValueExpressionMetadata.applyMetadata(ValueHolderRule.java:129)
at com.sun.faces.facelets.tag.MetadataImpl.applyMetadata(MetadataImpl.java:81)
at javax.faces.view.facelets.MetaTagHandler.setAttributes(MetaTagHandler.java:129)
at javax.faces.view.facelets.DelegatingMetaTagHandler.setAttributes(DelegatingMetaTagHandler.java:102)
at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.doNewComponentActions(ComponentTagHandlerDelegateImpl.java:398)
at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:159)
...
Caused by: javax.el.ELException: Error Parsing: #{applicationBean.getColumnName(column)}
at com.sun.el.lang.ExpressionBuilder.createNodeInternal(ExpressionBuilder.java:171)
at com.sun.el.lang.ExpressionBuilder.build(ExpressionBuilder.java:188)
at com.sun.el.lang.ExpressionBuilder.createValueExpression(ExpressionBuilder.java:232)
at com.sun.el.ExpressionFactoryImpl.createValueExpression(ExpressionFactoryImpl.java:92)
at com.sun.faces.facelets.tag.TagAttributeImpl.getValueExpression(TagAttributeImpl.java:385)
... 95 more
Caused by: com.sun.el.parser.ParseException: Encountered "(" at line 1, column 32.
Was expecting one of:

"}" ...
"." ...
"[" ...
">" ...
"gt" ...
"<" ...
"lt" ...
">=" ...
"ge" ...
"<=" ...
"le" ...
"==" ...
"eq" ...
"!=" ...
"ne" ...
"&&" ...
"and" ...
"||" ...
"or" ...
"*" ...
"+" ...
"-" ...
"?" ...
"/" ...
"div" ...
"%" ...
"mod" ...

at com.sun.el.parser.ELParser.generateParseException(ELParser.java:1664)
at com.sun.el.parser.ELParser.jj_consume_token(ELParser.java:1544)
at com.sun.el.parser.ELParser.DeferredExpression(ELParser.java:147)
at com.sun.el.parser.ELParser.CompositeExpression(ELParser.java:74)
at com.sun.el.lang.ExpressionBuilder.createNodeInternal(ExpressionBuilder.java:139)
... 99 more
Caused by: 
```

请在此处查看 pom.xml 文件：http: [//pastebin.com/6aPpYP47](http://pastebin.com/6aPpYP47)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:52:40.153

查看您的[`pom.xml`](http://pastebin.com/6aPpYP47)内容后，很明显您正在运行不同版本的 Jetty。这可能是也可能不是问题的根本原因，但是随着不同版本实现不同版本的 Servlet 容器规范，您可能会发现 Servlet 3.0 功能适用于 Jetty 8 而不适用于 Jetty 7 (这是Servlet 2.5 IIRC）

如果您查看插件配置：

```
 <plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>jetty-maven-plugin</artifactId>
            <version>8.1.4.v20120524</version>
            <configuration>
                <webAppConfig>
                    <contextPath>/${project.name}</contextPath>
                </webAppConfig>
            </configuration>
        </plugin> 
```

您会注意到`jetty:run`将使用 Jetty `8.1.4.v20120524`，而当您注入 jetty-runner

```
 <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-dependency-plugin</artifactId>
          <version>2.3</version>
          <executions>
            <execution>
              <phase>package</phase>
              <goals><goal>copy</goal></goals>
              <configuration>
                <artifactItems>
                  <artifactItem>
                    <groupId>org.mortbay.jetty</groupId>
                    <artifactId>jetty-runner</artifactId>
                    <version>7.4.5.v20110725</version>
                    <destFileName>jetty-runner.jar</destFileName>
                  </artifactItem>
                </artifactItems>
              </configuration>
            </execution>
          </executions>
        </plugin> 
```

和`java -jar jetty-runner.jar namename.war`你一起运行正在使用 Jetty`7.4.5.v20110725`

正如其他人指出的那样，您使用的是 EL 2.2，这实际上是 Servlet 3.0 功能，所以也许您只需要升级到[更新版本的 jetty runner](http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22org.mortbay.jetty%22%20AND%20a%3A%22jetty-runner%22)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T08:31:48.477

我遇到了同样的错误，我解决了。你的问题是错误的。

这是由于表达式解析器。你用过

```
#{applicationBean.getColumnName(column)} 
```

以你的名字Meaning.xhtml。对于该解析器，它不是有效的 EL。要么你需要改变

```
#{applicationBean.getColumnName} 
```

并像传递参数一样

```
 <f:param name="column" value="#{column}"/> 
```

或者在码头使用 el-api-2.2.jar 解析器。

# haskell - 如何在同一个列表中融合两张地图？

> ID：12241992
> 
> 赞同：14
> 
> 时间：2012-09-03T04:29:09.580
> 
> 标签：haskell, fusion

`xs`我们可以在表达式中融合两个遍历列表

```
(map f xs, map g xs) 
```

像这样

```
unzip (map (\x -> (f x, g x)) xs) 
```

有没有关于自动执行这种融合的研究？

（如果一个返回的列表在另一个之前被消耗，那么这里就有创建空间泄漏的风险。我更感兴趣的是防止额外的遍历而`xs`不是节省空间。）

编辑：我实际上并不打算将融合应用到实际的内存中 Haskell 列表中，根据是否`unzip`可以与其消费者融合，这种转换可能没有意义。我有一个我知道`unzip`可以融合的设置（请参阅“FlumeJava：简单、高效的数据并行管道”）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T07:35:00.717

也不是全自动的，但你可以给 GHC 一个这样的重写规则列表。请参阅[7.14 重写规则](http://www.haskell.org/ghc/docs/7.2.2/html/users_guide/rewrite-rules.html)和[使用规则](http://www.haskell.org/haskellwiki/GHC/Using_rules)。然后编译器在编译时使用这些规则来优化你的程序。（请注意，编译器绝不会检查规则是否有意义。）

**编辑：**举一个这个特定问题的例子，我们可以写：

```
{-# OPTIONS_GHC -fenable-rewrite-rules -ddump-rule-firings -ddump-rule-rewrites #-}

import Data.Char

{-# RULES
"map/zip" forall f g xs. (,) (map f xs) (map g xs) = unzip (map (\x -> (f x, g x)) xs)
   #-}

main :: IO ()
main = let x = "abCD" in
        print $ (,) (map toUpper x) (map toLower x) 
```

（规则中的顶级函数名称是`(,) :: a -> b -> (a, b)`）。编译时，您将看到规则是如何应用的。选项`dump-rule-firings`在应用规则时显示一条消息，并`-ddump-rule-rewrites`详细显示每个规则应用程序 - 请参阅[7.14.6。控制重写规则中发生的事情](http://www.haskell.org/ghc/docs/7.2.2/html/users_guide/rewrite-rules.html#controlling-rules)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T17:10:34.877

我设法找到了两个提到类似 fusion (un-)zip 的功能的资源，至少是简要的：

约瑟夫·斯文宁森。“用于累积参数和类似 Zip 功能的快捷方式融合” [http://www.cse.chalmers.se/~josefs/publications/fusion.pdf](http://www.cse.chalmers.se/~josefs/publications/fusion.pdf)

邓肯·库茨。“流融合：共归纳序列类型的实用快捷方式融合” [https://community.haskell.org/~duncan/thesis.pdf](https://community.haskell.org/~duncan/thesis.pdf)

不过，这两种资源都没有明确提到这种“兄弟融合”。

# android - 将 Apache Pig 导入 Android 项目导致“无法执行 dex：Java 堆空间”错误

> ID：12241996
> 
> 赞同：2
> 
> 时间：2012-09-03T04:29:46.657
> 
> 标签：android, serialization, hadoop, sharedpreferences, apache-pig

我试图`TreeMap`在我的 Android 应用程序中序列化 a ，以便我可以将其保存到 a `SharedPreferences`，正如[StackOverflow Q&A](https://stackoverflow.com/questions/7057845/save-arraylist-to-sharedpreferences)中所建议的那样。这是一个`ArrayList`，但我还是抓住了机会。重点是使用`ObjectSerializer`Apache Pig 项目中的类将 TreeMap 序列化为 String 并将其保存在共享首选项中的该数据类型中。

然而，当我在没有 Hadoop 的情况下导入 .jar 时，我开始遇到很多错误。当我在模拟器中运行我的应用程序（我使用 Eclipse）时，我的 IDE 底部的状态栏永远不会超过消息“Launching [app name] 100% ...”然后，过了很长时间，这会出现：

![在此处输入图像描述](../Images/9cdf889fe10272214ee8afd90b5939c8.png)

如果我再等一会，更多的对话框会一个接一个地弹出：

![在此处输入图像描述](../Images/9bf5d705e66cdc57df930fa1792a5b67.png)

我的问题是：

1.  这是怎么回事，为什么会这样？这可能是 Apache Pig 的错误吗？
2.  是否有可用于序列化我的替代库`TreeMap`？现在，我的解决方法是自己序列化它，如[本教程](http://java.sun.com/developer/technicalArticles/Programming/serialization/)中所述，并将其保存在设备内部存储器中与共享首选项分开的文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T04:47:35.290

您可以尝试打开 eclipse.ini 文件并更改以下参数：

--launcher.XXMaxPermSize 512m

-XX:MaxPermSize=256m

-Xms512m

-Xmx1024m

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T04:06:28.843

解决方案是根本不在 Android 应用程序中使用 Apache Pig——这是一个非常糟糕的举动。Apache Pig 针对大数据项目进行了优化，需要大量物理资源才能运行。如果您只需要一个类来序列化您的对象，则不值得导入它。

我只是从应用程序的引用库中删除了 Pig，然后应用程序在 Eclipse 中再次正确启动。

# python - 使用 Python 匹配大文本文件的一部分

> ID：12241998
> 
> 赞同：1
> 
> 时间：2012-09-03T04:29:49.323
> 
> 标签：python, regex

我一直在手动搜索运行程序产生的大文件。我已经成功地提取了一些信息块，但我一直试图提取最后三个块。块的结构如下：

尝试了几个 re 表达式但没有成功，例如：

```
v2 = re.findall(r'(?s)\(VFSCAN\) AT TIME =(.*?)100 BUSES WITH LOW VOLTAGE DEVIATION BELOW.*?\s*$',wholefile) 
```

Wholefile 是我读入的整个文件。该文件有以下几个部分，我想将它们全部提取出来，以便找到最后出现的条目，例如 ( `18436 [LENZIE 618.0] -0.245`)。然后，我将用时间解析该行以确定何时发生。我必须对“电压偏差”“电压”和“频率”做同样的事情。如果我发现如何匹配一个可变长度，多行部分，其他部分应该相同。我的问题是知道何时结束搜索。我使用的事实是搜索应该在最后一个空白行结束（因此我使用`\s*$`）。例如，我正在使用 findall 来提取所有这些部分的电压偏差。

我对 python 中模式的 VERBOSE 定义也有疑问。我似乎没有工作（下）。难道我做错了什么？

```
(VFSCAN) AT TIME =  1.1800 UP TO  100 BUSES WITH LOW VOLTAGE DEVIATION BELOW -0.200:

X ----- BUS ------ X    VDEV       X ----- BUS ------ X    VDEV
18436 [LENZIE 618.0]   -0.245      18433 [LENZIE 318.0]   -0.245     
18431 [LENZIE 118.0]   -0.214      18432 [LENZIE 218.0]   -0.214     
18435 [LENZIE 518.0]   -0.214      18434 [LENZIE 418.0]   -0.214     

(VFSCAN) AT TIME =  2.6267 UP TO  100 BUSES WITH LOW VOLTAGE BELOW  0.700:

X ----- BUS ------ X    VOLT       X ----- BUS ------ X    VOLT
65191 [BONANZA 24.0]    0.439      65194 [CHAPITA  138]    0.581     
65192 [BONANZA  138]    0.585      65371 [COVE TP  138]    0.694     
66278 [RANGELY  138]    0.698     

(VFSCAN) AT TIME =  6.0632 UP TO  100 BUSES WITH LOW FREQUENCY BELOW 59.600:

X ----- BUS ------ X    FREQ       X ----- BUS ------ X    FREQ
27117 [WTGCP   .600]   59.443      27123 [WTGGE2  .570]   59.490     
27119 [WTGGE   .570]   59.492      26040 [INTERM2G26.0]   59.492     
26039 [INTERM1G26.0]   59.492     

pattern = r"""
(?s)                                                            # Tell Regex to span multiple lines
\(VFSCAN\).*100 BUSES WITH LOW VOLTAGE DEVIATION BELOW -0.200:  # Literal string to serach for
(\s*$).*?                                                        # This search for an empty line
X ----- BUS ------ X    VOLT       X ----- BUS ------ X    VOLT   # Literal string to search            (\d{5}.*).*?                                                         # Multiple lines starting with numbers
\s*$                                                                 # This search ends with an empty line
"""
regex = re.compile(pattern, re.VERBOSE) 
```

第二天 在尝试了几个小时后，我想出了以下内容。第一个匹配所有内容（不是我需要的），第二个我确定可以使用的文件与我的测试文件不匹配。

第一的：

```
(?s)^\(VFSCAN\).*100 BUSES WITH LOW VOLTAGE DEVIATION BELOW -0.200:.*(\s*$)? 
```

第二：

```
(?m)(?s)^\(VFSCAN\).*100 BUSES WITH LOW VOLTAGE DEVIATION BELOW -0.200:^\s*$^X ----- BUS ------ X    VDEV.*?
(.*?)
^\s*$ 
```

使用这些正则表达式，我试图完全匹配文件的以下部分。

```
(VFSCAN) AT TIME =  1.1800 UP TO  100 BUSES WITH LOW VOLTAGE DEVIATION BELOW -0.200:

X ----- BUS ------ X    VDEV       X ----- BUS ------ X    VDEV
18436 [LENZIE 618.0]   -0.245      18433 [LENZIE 318.0]   -0.245     
18431 [LENZIE 118.0]   -0.214      18432 [LENZIE 218.0]   -0.214     
18435 [LENZIE 518.0]   -0.214      18434 [LENZIE 418.0]   -0.214 
```

我需要一些帮助来修复模式，以便我可以选择上述模式。

我对以下文字有疑问。我只想提取所有方括号“[]”中的时间和相关项目。

```
test3 = r'''(VFSCAN) AT TIME =  1.1800 UP TO  100 BUSES WITH LOW VOLTAGE DEVIATION BELOW -    0.200:

X ----- BUS ------ X    VDEV       X ----- BUS ------ X    VDEV
18436 [LENZIE 618.0]   -0.245      18433 [LENZIE 318.0]   -0.245     
18431 [LENZIE 118.0]   -0.214      18435 [LENZIE 518.0]   -0.214     
18434 [LENZIE 418.0]   -0.214      18432 [LENZIE 218.0]   -0.214     

(VFSCAN) AT TIME =  1.5167 UP TO  100 BUSES WITH LOW VOLTAGE DEVIATION BELOW -0.200:

X ----- BUS ------ X    VDEV       X ----- BUS ------ X    VDEV
69036 [DNLP2G21.575]   -0.414      69038 [DNLP2G22.575]   -0.414     
69040 [DNLP2G23.575]   -0.414      69032 [DNLP1_G1.575]   -0.402     
65460 [DIFICULT 230]   -0.384      69027 [7MIHL G1.575]   -0.355     
69076 [HORIZ_G .575]   -0.303      67237 [MEDBOWCO 115]   -0.301     
67940 [STNDPSVC 230]   -0.300      65976 [MINERS  34.5]   -0.294     
65585 [FT CRK1 34.5]   -0.261      65584 [FT CRK2 34.5]   -0.261     
69073 [HIPLN_G .575]   -0.214     

(VFSCAN) AT TIME =  1.1800 UP TO  100 BUSES WITH LOW VOLTAGE DEVIATION BELOW -0.200:

X ----- BUS ------ X    VDEV       X ----- BUS ------ X    VDEV
65191 [BONANZA 24.0]   -0.572      65192 [BONANZA  138]   -0.434     
65194 [CHAPITA  138]   -0.433      66278 [RANGELY  138]   -0.320     
65371 [COVE TP  138]   -0.302      79265 [CALAMRDG 138]   -0.286     
79400 [DES.MINE 138]   -0.285      65086 [ASHLEY  69.0]   -0.284     
79067 [VERNAL   138]   -0.277      67257 [MOONLAK269.0]   -0.268     
67256 [MOONLAK169.0]   -0.266      79264 [W.RV.CTY 138]   -0.206     

''' 
```

当我将 findall 与我得到的模式一起使用时。

```
[('1.1800', 'DEVIATION', 'LENZIE 218.0'), ('1.5167', 'DEVIATION', 'HIPLN_G .575'), ('1.1800', 'DEVIATION', 'W.RV.CTY 138')] 
```

我的列表中应该有 30 多个匹配的元组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T20:30:11.210

## 正则表达式提取字段

```
\(VFSCAN\)[^=]*=\s*    # first line of a section: (VFSCAN) AT TIME =  1.1800 UP TO  100 BUSES WITH LOW VOLTAGE DEVIATION BELOW -0.200
(\d*(?:\.\d+)?)        # group 1 - first number of first line: 1.1800
\D+
(\d+)                  # group 2 - second number of first line: 100
[^\d-]+
(-?\d*(?:\.\d+)?)      # group 3 - last number of first line: -0.200
\D+                    # skip second line
(?:                    # a data line: 18436 [LENZIE 618.0] -0.245 18433 [LENZIE 318.0] -0.245
  (?:                  # a data entry: 18436 [LENZIE 618.0] -0.245
    (\d+)              # group 4 - first number in an entry: 18436
    \s+\[
    (.*?)              # group 5 - words in brackets: LENZIE
    (-?\d*(?:\.\d+)?)  # group 6 - number in brackets: 618.0
    \]\s*
    (\S*)              # group 7 - last number (VDEV): -0.245
    \s*
  )+
  (?=[\r\n\s]+|$)
)+ 
```

`BUSES WITH LOW VOLTAGE DEVIATION BELOW`介于第 2 组和第 3 组之间 ( `[^\d-]+`)。因此，您可以执行以下操作之一：

### 选项1

您也可以捕获此部分以稍后检查它是否是您想要的部分。只需在其周围添加括号，使其成为第 3 个捕获组：

`[^\d-]+`=> `([^\d-]+)`。

### 选项 2

或者您可以更改正则表达式的相同部分以仅与所需部分匹配。在这种情况下，正则表达式只匹配指定的部分而不是每个部分：

`[^\d-]+`=>`\s+BUSES\s+WITH\s+LOW\s+VOLTAGE\s+DEVIATION\s+BELOW\s+`

如果要匹配这两行：

```
BUSES WITH LOW VOLTAGE DEVIATION BELOW
BUSES WITH LOW FREQUENCY BELOW 
```

然后，您可以使用替代 ( `|`) 语法编写更改部分（`(?:...)`表示不捕获该组）：

`[^\d-]+`=>`\s+BUSES\s+WITH\s+LOW\s+(?:VOLTAGE\s+DEVIATION|FREQUENCY)\s+BELOW\s+`

## 性能改进

### 捕获组

可以删除不需要的数组捕获组，例如`(xyz)`=> `xyz`，或者以这种方式使其不捕获：`(xyz)`=>`(?:xyz)`

### 不必要的选择

更改`.*`为`.+`可能会导致一些性能提升。

## 改进的正则表达式

下面的正则表达式是上述正则表达式的改进版本：

```
\(VFSCAN\)[^=]*=\s*    # first line of a section: (VFSCAN) AT TIME =  1.1800 UP TO  100 BUSES WITH LOW VOLTAGE DEVIATION BELOW -0.200
(\d*(?:\.\d+)?)        # group 1 - first number of first line: 1.1800
\D+
\d+                    # second number of first line: 100
[^\d-]+
-?\d*(?:\.\d+)?        # last number of first line: -0.200
\D+                    # skip second line
(?:                    # a data line: 18436 [LENZIE 618.0] -0.245 18433 [LENZIE 318.0] -0.245
  (?:                  # a data entry: 18436 [LENZIE 618.0] -0.245
    \d+                # first number in an entry: 18436
    \s+\[
    (.+?)              # group 2 - words in brackets: LENZIE
    -?\d*(?:\.\d+)?    # number in brackets: 618.0
    \]\s+
    \S+                # last number (VDEV): -0.245
    \s*
  )+
  (?=[\r\n\s]+|$)
)+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T05:36:48.380

`VOLT`你正在尝试匹配`VDEV`

```
(VFSCAN) AT TIME =  1.1800 UP TO  100 BUSES WITH LOW VOLTAGE DEVIATION BELOW -0.200:

X ----- BUS ------ X    VDEV       X ----- BUS ------ X    VDEV 
```

`-0.200`或者您正在尝试匹配`0.700`

```
(VFSCAN) AT TIME =  2.6267 UP TO  100 BUSES WITH LOW VOLTAGE BELOW  0.700:

X ----- BUS ------ X    VOLT       X ----- BUS ------ X    VOLT 
```

# java - Android：如何在 CSV 文件中写入换行符？

> ID：12241999
> 
> 赞同：9
> 
> 时间：2012-09-03T04:30:05.127
> 
> 标签：java, android, csv

我正在尝试将我的数据组织在 .CSV 文件中。我想将我的数据放在特定的行中，所以我尝试放置“\n”，但它不起作用。请帮助我将数据放入特定的行。谢谢进步..

```
public void writeData(String data,String strFilePath)
        {

            PrintWriter csvWriter;
            try
            {

                File file = new File(strFilePath);
                if(!file.exists()){
                    file = new File(strFilePath);
                }
                csvWriter = new  PrintWriter(new FileWriter(file,true));

                csvWriter.print(data+","+"hello");
                csvWriter.append('\n');
                csvWriter.print("world");

                csvWriter.close();

            }
            catch (Exception e)
            {
                e.printStackTrace();
            }
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T04:49:45.523

您的代码看起来不错，我确信换行符已正确写入文件。我能想到的唯一原因是您使用不`\n`视为行分隔符的编辑器打开文件，它将`\r\n`pair 视为行分隔符（如 Windows 上的记事本）。

因此，您可以使用 . 编写换行符`write.print("\r\n")`，也可以使用其他一些编辑器（例如`vim`. 无论您使用什么编辑器打开文件，换行符都在那里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T04:59:01.593

CSV 文件并不像看起来那么容易创建。在尝试编写快速 CSV 解析器/写入器时遇到了很多问题。

只需使用[OpenCSV 即可](http://opencsv.sourceforge.net/)立即解决您的所有问题。

使用 OpenCSV，您可以执行以下操作：

```
CSVWriter writer = new CSVWriter(new FileWriter("yourfile.csv"), '\t');
// feed in your array (or convert your data to an array)
String[] entries = "first#second#third".split("#");
writer.writeNext(entries); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T08:35:38.427

1.  在关闭它之前尝试刷新你的流 `csvWriter.flush()`
2.  而不是使用打印，尝试 println

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T04:45:44.077

试试下面的代码（使用[`StringBuffer`](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuffer.html)）——一个线程安全的、可变的字符序列：

```
 public void writeData(String data, String strFilePath) {

    PrintWriter csvWriter;
    try {
        /*1\. declare stringBuffer*/
        StringBuffer oneLineStringBuffer = new StringBuffer();

        File file = new File(strFilePath);
        if (!file.exists()) {
            file = new File(strFilePath);

        }
        csvWriter = new PrintWriter(new FileWriter(file, true));

        /*2\. append to stringBuffer*/   
        oneLineStringBuffer.append(data + "," + "hello");
        oneLineStringBuffer.append("\n");
        oneLineStringBuffer.append("world");

        /*3\. print to csvWriter*/
        csvWriter.print(oneLineStringBuffer);

        csvWriter.close();

    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-10T21:53:16.547

您只需更改`csvWriter.print("world");`为`csvWriter.println("world");`. 下一个打印将在下一个新行中。

```
public void writeData(String data,String strFilePath)
            {

                PrintWriter csvWriter;
                try
                {

                    File file = new File(strFilePath);
                    if(!file.exists()){
                        file = new File(strFilePath);
                    }
                    csvWriter = new  PrintWriter(new FileWriter(file,true));

                    csvWriter.println(data+","+"hello");
                    csvWriter.print("world");

                    csvWriter.close();

                }
                catch (Exception e)
                {
                    e.printStackTrace();
                }
            } 
```